(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"C:\\Users\\MNguyen\\AppData\\Roaming\\npm\\node_modules\\watchify\\node_modules\\browserify\\node_modules\\process\\browser.js":[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};

process.nextTick = (function () {
    var canSetImmediate = typeof window !== 'undefined'
    && window.setImmediate;
    var canMutationObserver = typeof window !== 'undefined'
    && window.MutationObserver;
    var canPost = typeof window !== 'undefined'
    && window.postMessage && window.addEventListener
    ;

    if (canSetImmediate) {
        return function (f) { return window.setImmediate(f) };
    }

    var queue = [];

    if (canMutationObserver) {
        var hiddenDiv = document.createElement("div");
        var observer = new MutationObserver(function () {
            var queueList = queue.slice();
            queue.length = 0;
            queueList.forEach(function (fn) {
                fn();
            });
        });

        observer.observe(hiddenDiv, { attributes: true });

        return function nextTick(fn) {
            if (!queue.length) {
                hiddenDiv.setAttribute('yes', 'no');
            }
            queue.push(fn);
        };
    }

    if (canPost) {
        window.addEventListener('message', function (ev) {
            var source = ev.source;
            if ((source === window || source === null) && ev.data === 'process-tick') {
                ev.stopPropagation();
                if (queue.length > 0) {
                    var fn = queue.shift();
                    fn();
                }
            }
        }, true);

        return function nextTick(fn) {
            queue.push(fn);
            window.postMessage('process-tick', '*');
        };
    }

    return function nextTick(fn) {
        setTimeout(fn, 0);
    };
})();

process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

// TODO(shtylman)
process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};

},{}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.controller.js":[function(require,module,exports){
//app.controller.js
var app = require('./app.model.js');

app.controller = function () {
}

//Browserify Directives
module.exports = app.controller
},{"./app.model.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.model.js"}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.model.js":[function(require,module,exports){
//app.model.js
var app = {
}

app.App = function (data) {
}

app.controller = require('./app.controller.js');

app.view = require('./views/app.view.js');

//Browserify Directives
module.exports = app;
},{"./app.controller.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.controller.js","./views/app.view.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\views\\app.view.js"}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.route.js":[function(require,module,exports){
var m = require('../mithril.js');
var app = require('./app.model.js');
var settings = require('./app.settings.js');
var body = require('./modules/body.module.js');
var leftmenu = require('./modules/leftmenu.module.js');
var rightmenu = require('./modules/rightmenu.module.js');
var clearscreen = require('./modules/clearscreen.module.js');
var todo = require('./models/todo.model.js');

m.route.mode = "hash";

//setup routes for main content to start w/ the `/` symbol
m.route(settings.rootContainer, "/", {
    "/": body,
    "/home": app,
    "/profile": app,
    "/todo": todo
});

//Set up side menus
m.module(settings.leftMenu, leftmenu);
m.module(settings.rightMenu, rightmenu);

///////////////////////////////
//a sample module
//var dashboard = {
//    controller: function () {
//        this.id = m.route.param("userID");
//    },
//    view: function (controller) {
//        return m("div", controller.id);
//    }
//}

//var profile = {
//    controller: function () {
//        this.id = m.route.param("userID");
//    },
//    view: function (controller) {
//        return m("div");
//    }
//}

//define a route
//m.route($rootContainer, "/profile/johndoe", {
//    "/profile/:userID": dashboard
//});
},{"../mithril.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js","./app.model.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.model.js","./app.settings.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.settings.js","./models/todo.model.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\models\\todo.model.js","./modules/body.module.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\modules\\body.module.js","./modules/clearscreen.module.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\modules\\clearscreen.module.js","./modules/leftmenu.module.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\modules\\leftmenu.module.js","./modules/rightmenu.module.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\modules\\rightmenu.module.js"}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.settings.js":[function(require,module,exports){
var settings = {
    rootContainer: document.getElementsByClassName("container")[0],
    leftMenu: document.getElementById("left-menu"),
    rightMenu: document.getElementById("right-menu")
};
//Browserify Directives
module.exports = settings;
},{}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\controllers\\todo.controller.js":[function(require,module,exports){
var m = require('../../mithril.js');
var todo = require('../models/todo.model.js');

todo.controller = function () {
    this.list = new todo.TodoList();
    this.description = m.prop("");

    this.add = function () {
        if (this.description()) {
            this.list.push(new todo.Todo({ description: this.description() }));
            this.description("");
        }
    }.bind(this);
}

//Browserify Directives
module.exports = todo.controller
},{"../../mithril.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js","../models/todo.model.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\models\\todo.model.js"}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\models\\todo.model.js":[function(require,module,exports){
var m = require('../../mithril.js');
var todo = {}

todo.Todo = function (data) {
    this.description = m.prop(data.description);
    this.done = m.prop(false);
}

todo.TodoList = Array;

//Browserify Directives
module.exports = todo; //<-- This export has to be before the requires for todo.controller, because todo.controller relies on todo module (circular dependency)

todo.controller = require('../controllers/todo.controller.js');

todo.view = require('../views/todo.view.js');
},{"../../mithril.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js","../controllers/todo.controller.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\controllers\\todo.controller.js","../views/todo.view.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\views\\todo.view.js"}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\modules\\body.module.js":[function(require,module,exports){
var m = require('../../mithril.js');
var body = {}

body.Body = function (data) {
}

body.controller = function () {
}

body.view = function () {
    return [
        [m(".main", [            
		        m("ul.tile-grid.clearfix[id='tile-grid']", [
			        m("li.tile.icon-clima-2", [
				        m("h3", "Register"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-1", { onclick: function () { window.location = '/#/home'; } }, [
				        m("h3", "Dashboard"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-4", [
				        m("h3", "Admin"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-1", { onclick: function () { window.location = '/#/todo';} }, [
				        m("h3", "todo"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-1.tile-span-2", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-1", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-2", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-11", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-2", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-2.tile-span-2", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-4.tile-span-4", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ])
		        ])
        ])]
    ];
}

//Browserify Directives
module.exports = body
},{"../../mithril.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js"}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\modules\\clearscreen.module.js":[function(require,module,exports){
var clearScreen = {}
clearScreen.controller = function () {

}
clearScreen.view = function () { }

module.exports = clearScreen
},{}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\modules\\leftmenu.module.js":[function(require,module,exports){
var m = require('../../mithril.js');
var leftmenu = {}

leftmenu.LeftMenu = function (data) {
}

leftmenu.controller = function () {
}

leftmenu.view = function () {
    return [
		m("ul", [
			m("li", [
				m("a[href='#']", [
					m("i.fa.fa-home.fa-2x"),
					m("span.nav-text", "Dashboard")
				])
			]),
			m("li.has-subnav", [
				m("a[href='#']", [
					m("i.fa.fa-laptop.fa-2x"),
					m("span.nav-text", "UI Components")
				])
			]),
			m("li.has-subnav", [
				m("a[href='#']", [
					m("i.fa.fa-list.fa-2x"),
					m("span.nav-text", "Forms")
				])
			]),
			m("li.has-subnav", [
				m("a[href='#']", [
					m("i.fa.fa-folder-open.fa-2x"),
					m("span.nav-text", "Pages")
				])
			]),
			m("li", [
				m("a[href='#']", [
					m("i.fa.fa-bar-chart-o.fa-2x"),
					m("span.nav-text", "Graphs and Statistics")
				])
			]),
			m("li", [
				m("a[href='#']", [
					m("i.fa.fa-font.fa-2x"),
					m("span.nav-text", "Typography and Icons")
				])
			]),
			m("li", [
				m("a[href='#']", [
					m("i.fa.fa-table.fa-2x"),
					m("span.nav-text", "Tables")
				])
			]),
			m("li", [
				m("a[href='#']", [
					m("i.fa.fa-map-marker.fa-2x"),
					m("span.nav-text", "Maps")
				])
			]),
			m("li", [
				m("a[href='#']", [
					m("i.fa.fa-info.fa-2x"),
					m("span.nav-text", "Documentation")
				])
			])
		]),
		m("ul.logout", [
			m("li", [
				m("a[href='#']", [
					m("i.fa.fa-power-off.fa-2x"),
					m("span.nav-text", "Logout")
				])
			])
		])
    ];
}

//Browserify Directives
module.exports = leftmenu
},{"../../mithril.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js"}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\modules\\rightmenu.module.js":[function(require,module,exports){
var m = require('../../mithril.js');
var rightmenu = {}

rightmenu.rightmenu = function (data) {
}

rightmenu.controller = function () {
}

rightmenu.view = function () {
    return [
		m("h3", "Menu"),
		m("a[href='#']", "Register"),
		m("a[href='#']", "Administration")
    ];
}

//Browserify Directives
module.exports = rightmenu
},{"../../mithril.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js"}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\views\\app.view.js":[function(require,module,exports){
//app.view.js
var m = require('../../mithril.js');
var app = require('../app.model.js');
var Controls = require('../../controls.js');
controls = new Controls();

app.view = function (ctrl) {
    return [
	m(".jumbotron", [
		m("h1", "ASP.NET"),
		m("p.lead", "ASP.NET is a free web framework for building great Web sites and Web applications using HTML, CSS, and JavaScript."),
		m("p", [
            [m("button.btn.btn-primary.btn-lg[id='hitme']", { onclick : function () { new controls.PopupDialog().show(null, 'Are you sure you want to continue?', 'Confirmation Needed', function () { alert('You pressed Yes ^^');}, function () { alert('You pressed No TT');});} }, "Hit Me!"), "\n",
             m("button.btn.btn-primary.btn-lg[id='yes']", { onclick: function () { controls.showNotification('YES!!', 'Just a Test', 'Success', 5000, 30, 30, null); } }, "Yes"), "\n",
             m("button.btn.btn-primary.btn-lg[id='no']", { onclick: function () { controls.showNotification('NO!!', 'Just a Test', 'Error', 5000, controls.notificationRightPos, controls.notificationTopPos, null); } }, "No"), "\n",
             m("button.btn.btn-primary.btn-lg[id='maybe']", { onclick: function () { controls.showNotification('MAYBE SO...', 'Just a Test', 'Warning', 5000, controls.notificationRightPos, controls.notificationTopPos, null); } }, "Maybe So")]
		])
	]),
	m(".row", [
		m(".col-md-4", [
			m("h2", "Your information"),
			m("p", "This section shows how you can call ASP.NET Web API to get the user details."),
			m("p[data-bind='text: myHometown']"),
			m("p", [m("a.btn.btn-default[href='http://go.microsoft.com/fwlink/?LinkId=273732']", "Learn more »")])
		]),
		m(".col-md-4", [
			m("h2", "Getting started"),
			m("p", "\n                    ASP.NET Single Page Application (SPA) helps you build applications that include significant client-side interactions using HTML, CSS, and JavaScript.\n                    It's now easier than ever before to getting started writing highly interactive web applications.\n                "),
			m("p", [m("a.btn.btn-default[href='http://go.microsoft.com/fwlink/?LinkId=273732']", "Learn more »")])
		]),
		m(".col-md-4", [
			m("h2", "Web Hosting"),
			m("p", "You can easily find a web hosting company that offers the right mix of features and price for your applications."),
			m("p", [m("a.btn.btn-default[href='http://go.microsoft.com/fwlink/?LinkId=301867']", "Learn more »")])
		])
	])
    ];
}

//Browserify Directives
module.exports = app.view
},{"../../controls.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\controls.js","../../mithril.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js","../app.model.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.model.js"}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\views\\todo.view.js":[function(require,module,exports){
/**
 * JSX version of the Mithril Getting Started documentation's TODO example.
 * http://lhorie.github.io/mithril/getting-started.html
 * @jsx m
 */
var m = require('../../mithril.js');
var todo = require('../models/todo.model.js');

todo.view = function (ctrl) {
    return m("html", [
        m("body", [
            m("input",  {onchange:m.withAttr('value', ctrl.description), value: ctrl.description()}),            
            m("button", {onclick:ctrl.add}, ["Add"]),
            m("table", [            
                ctrl.list.map(function (task, index) {
                    return m("tr", [
                        m("td", [
                            m("input",  {type:'checkbox', onclick: m.withAttr('checked', task.done), checked: task.done()})            
                        ]),
                        m("td", {style:{textDecoration: task.done() ? 'line-through' : 'none'}}, [task.description()])
                    ])
                })
            ])
        ])
    ])
}
//Browserify Directives
module.exports = todo.view
},{"../../mithril.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js","../models/todo.model.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\models\\todo.model.js"}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\controls.js":[function(require,module,exports){
//***********************
//#region Kendo UI Controls
//***********************
var controls = function(){
    this.notificationRightPos = 30;
    this.notificationTopPos = 30;
    //#region Notification Messages
    this.getDialogCriticality = function (message) {
        if (message.toLowerCase().indexOf('success') > 0) {
            return "Success";
        } else if (message.toLowerCase().indexOf('error') > 0) {
            return "Error";
        } else if (message.toLowerCase().indexOf('fail') > 0) {
            return "Error";
        } else {
            return "Warning";
        }
    }
    this.showNotification = function (messageText, titleText, mode, timeOut, posRight, posTop, appendTo) {
        var appendTarget = appendTo;
        if (typeof (notificationHandle) == "undefined") {
            notificationHandle = $("#notificationSpan").kendoNotification({
                "position": { "right": posRight, "top": posTop },
                "autoHideAfter": timeOut,
                "stacking": "down",
                "templates": [
                    { "type": "error", "templateId": "errorTemplate" },
                    { "type": "warning", "templateId": "warningTemplate" },
                    { "type": "success", "templateId": "successTemplate" }
                ]
            });
        }
        var notification = $("#notificationSpan").data("kendoNotification");
        notification.show({
            message: messageText,
            title: titleText,
        }, mode.toLowerCase());
    }
    //#endregion Notification Messages
    //#region Popup Dialog
    this.PopupDialog = function (mute) {
        this.mute = mute;

        this.show = function (e, messageText, titleText, confirmCallback, cancelCallback) {
            var dfd = new $.Deferred(); //Promise object to perform actions based on user input        

            if (this.mute == false && e != null) {
                if (!e.preventDefault) {
                    e = $.event.fix(e);
                }
                e.preventDefault();
            }

            if (messageText != null) {
                $("#modal-confirmation").html("<div class=\"confirmContent\"><p class=\"modal-message\">" + messageText + "</p><button class=\"modal-confirm k-button\">Yes</button>&nbsp;<button class=\"modal-cancel k-button\">No</button></div>");
            }
            var kendoWindow = $("<div />").kendoWindow({
                width: 400,
                //height: 120,
                title: titleText,
                resizable: false,
                modal: true
            });

            if (this.mute == false || this.mute == undefined) {
                kendoWindow.data("kendoWindow")
                    .content($("#modal-confirmation").html())
                    .center().open();

                kendoWindow.find(".modal-confirm,.modal-cancel").click(function () {
                    if ($(this).hasClass("modal-confirm")) {
                        dfd.resolve(true);
                        if (e != null) {
                            e.currentTarget.click();
                        }
                        else {
                            if (confirmCallback !== undefined && confirmCallback != null) {
                                confirmCallback();
                            }
                        }
                    }
                    if ($(this).hasClass("modal-cancel")) {
                        if (cancelCallback !== undefined && cancelCallback != null) {
                            cancelCallback();
                        }
                        dfd.resolve(false);
                    }
                    kendoWindow.data("kendoWindow").close();
                });
            }
            else {
                if (confirmCallback !== undefined && confirmCallback != null) {
                    confirmCallback();
                }
                dfd.resolve(false);
            }
            return dfd.promise(); //Returns a promise
        }
    }
    //#endregion Popup Dialog Section
}
module.exports = controls;

//***********************
//#endregion 
//***********************
},{}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\core.js":[function(require,module,exports){
//#region Keyboard Shortcuts
    jQuery(document).bind('keypress', 'd', function (event) {
        $("#Dropdown").trigger("click");
    });
    jQuery(document).bind('keypress', 'h', function (event) {
        $("#hitme").trigger("click");
    });
    jQuery(document).bind('keypress', 'y', function (event) {
        $("#yes").trigger("click");
    });
    jQuery(document).bind('keypress', 'n', function (event) {
        $("#no").trigger("click");
    });
    jQuery(document).bind('keypress', 'm', function (event) {
        $("#maybe").trigger("click");
    });
//#endregion Keyboard Shortcuts
},{}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\jquery.hotkeys.js":[function(require,module,exports){
/*jslint browser: true*/
/*jslint jquery: true*/

/*
 * jQuery Hotkeys Plugin
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Based upon the plugin by Tzury Bar Yochay:
 * http://github.com/tzuryby/hotkeys
 *
 * Original idea by:
 * Binny V A, http://www.openjs.com/scripts/events/keyboard_shortcuts/
 */

/*
 * One small change is: now keys are passed by object { keys: '...' }
 * Might be useful, when you want to pass some other data to your handler
 */
var jQuery = require('./kendo/2014.3.1119/jquery.min.js');
(function(jQuery) {

  jQuery.hotkeys = {
    version: "0.8",

    specialKeys: {
      8: "backspace",
      9: "tab",
      10: "return",
      13: "return",
      16: "shift",
      17: "ctrl",
      18: "alt",
      19: "pause",
      20: "capslock",
      27: "esc",
      32: "space",
      33: "pageup",
      34: "pagedown",
      35: "end",
      36: "home",
      37: "left",
      38: "up",
      39: "right",
      40: "down",
      45: "insert",
      46: "del",
      59: ";",
      61: "=",
      96: "0",
      97: "1",
      98: "2",
      99: "3",
      100: "4",
      101: "5",
      102: "6",
      103: "7",
      104: "8",
      105: "9",
      106: "*",
      107: "+",
      109: "-",
      110: ".",
      111: "/",
      112: "f1",
      113: "f2",
      114: "f3",
      115: "f4",
      116: "f5",
      117: "f6",
      118: "f7",
      119: "f8",
      120: "f9",
      121: "f10",
      122: "f11",
      123: "f12",
      144: "numlock",
      145: "scroll",
      173: "-",
      186: ";",
      187: "=",
      188: ",",
      189: "-",
      190: ".",
      191: "/",
      192: "`",
      219: "[",
      220: "\\",
      221: "]",
      222: "'"
    },

    shiftNums: {
      "`": "~",
      "1": "!",
      "2": "@",
      "3": "#",
      "4": "$",
      "5": "%",
      "6": "^",
      "7": "&",
      "8": "*",
      "9": "(",
      "0": ")",
      "-": "_",
      "=": "+",
      ";": ": ",
      "'": "\"",
      ",": "<",
      ".": ">",
      "/": "?",
      "\\": "|"
    },

    // excludes: button, checkbox, file, hidden, image, password, radio, reset, search, submit, url
    textAcceptingInputTypes: [
      "text", "password", "number", "email", "url", "range", "date", "month", "week", "time", "datetime",
      "datetime-local", "search", "color", "tel"],

    options: {
      filterTextInputs: true
    }
  };

  function keyHandler(handleObj) {
    if (typeof handleObj.data === "string") {
      handleObj.data = {
        keys: handleObj.data
      };
    }

    // Only care when a possible input has been specified
    if (!handleObj.data || !handleObj.data.keys || typeof handleObj.data.keys !== "string") {
      return;
    }

    var origHandler = handleObj.handler,
      keys = handleObj.data.keys.toLowerCase().split(" ");

    handleObj.handler = function(event) {
      //      Don't fire in text-accepting inputs that we didn't directly bind to
      if (this !== event.target && (/textarea|select/i.test(event.target.nodeName) ||
          (jQuery.hotkeys.options.filterTextInputs &&
            jQuery.inArray(event.target.type, jQuery.hotkeys.textAcceptingInputTypes) > -1))) {
        return;
      }

      var special = event.type !== "keypress" && jQuery.hotkeys.specialKeys[event.which],
        character = String.fromCharCode(event.which).toLowerCase(),
        modif = "",
        possible = {};

      jQuery.each(["alt", "ctrl", "shift"], function(index, specialKey) {

        if (event[specialKey + 'Key'] && special !== specialKey) {
          modif += specialKey + '+';
        }
      });

      // metaKey is triggered off ctrlKey erronously
      if (event.metaKey && !event.ctrlKey && special !== "meta") {
        modif += "meta+";
      }

      if (event.metaKey && special !== "meta" && modif.indexOf("alt+ctrl+shift+") > -1) {
        modif = modif.replace("alt+ctrl+shift+", "hyper+");
      }

      if (special) {
        possible[modif + special] = true;
      }
      else {
        possible[modif + character] = true;
        possible[modif + jQuery.hotkeys.shiftNums[character]] = true;

        // "$" can be triggered as "Shift+4" or "Shift+$" or just "$"
        if (modif === "shift+") {
          possible[jQuery.hotkeys.shiftNums[character]] = true;
        }
      }

      for (var i = 0, l = keys.length; i < l; i++) {
        if (possible[keys[i]]) {
          return origHandler.apply(this, arguments);
        }
      }
    };
  }

  jQuery.each(["keydown", "keyup", "keypress"], function() {
    jQuery.event.special[this] = {
      add: keyHandler
    };
  });

})(jQuery || this.jQuery || window.jQuery);

},{"./kendo/2014.3.1119/jquery.min.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\kendo\\2014.3.1119\\jquery.min.js"}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\kendo\\2014.3.1119\\jquery.min.js":[function(require,module,exports){
(function (global){
;__browserify_shim_require__=require;(function browserifyShim(module, exports, require, define, browserify_shim__define__module__export__) {
/*! jQuery v1.9.1 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery.min.map
*/(function(e,t){var n,r,i=typeof t,o=e.document,a=e.location,s=e.jQuery,u=e.$,l={},c=[],p="1.9.1",f=c.concat,d=c.push,h=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,b=function(e,t){return new b.fn.init(e,t,r)},x=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,N=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^[\],:{}\s]*$/,E=/(?:^|:|,)(?:\s*\[)+/g,S=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,j=/^-ms-/,D=/-([\da-z])/gi,L=function(e,t){return t.toUpperCase()},H=function(e){(o.addEventListener||"load"===e.type||"complete"===o.readyState)&&(q(),b.ready())},q=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",H,!1),e.removeEventListener("load",H,!1)):(o.detachEvent("onreadystatechange",H),e.detachEvent("onload",H))};b.fn=b.prototype={jquery:p,constructor:b,init:function(e,n,r){var i,a;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),C.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(a=o.getElementById(i[2]),a&&a.parentNode){if(a.id!==i[2])return r.find(e);this.length=1,this[0]=a}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return h.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||b.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(o=arguments[u]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,a=e&&b.isArray(e)?e:[]):a=e&&b.isPlainObject(e)?e:{},s[i]=b.extend(c,a,r)):r!==t&&(s[i]=r));return s},b.extend({noConflict:function(t){return e.$===b&&(e.$=u),t&&e.jQuery===b&&(e.jQuery=s),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!o.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(o,[b]),b.fn.trigger&&b(o).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||y.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=b.trim(n),n&&k.test(n.replace(S,"@").replace(A,"]").replace(E,"")))?Function("return "+n)():(b.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(j,"ms-").replace(D,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:v&&!v.call("\ufeff\u00a0")?function(e){return null==e?"":v.call(e)}:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?b.merge(n,"string"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(g)return g.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else while(n[o]!==t)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return f.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),b.isFunction(e)?(r=h.call(arguments,2),i=function(){return e.apply(n||this,r.concat(h.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if("object"===b.type(r)){o=!0;for(u in r)b.access(e,n,u,r[u],!0,a,s)}else if(i!==t&&(o=!0,b.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(b(e),n)})),n))for(;l>u;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),"complete"===o.readyState)setTimeout(b.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",H,!1),e.addEventListener("load",H,!1);else{o.attachEvent("onreadystatechange",H),e.attachEvent("onload",H);var r=!1;try{r=null==e.frameElement&&o.documentElement}catch(i){}r&&r.doScroll&&function a(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(a,50)}q(),b.ready()}}()}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function M(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}r=b(o);var _={};function F(e){var t=_[e]={};return b.each(e.match(w)||[],function(e,n){t[n]=!0}),t}b.Callbacks=function(e){e="string"==typeof e?_[e]||F(e):b.extend({},e);var n,r,i,o,a,s,u=[],l=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=u.length,n=!0;u&&o>a;a++)if(u[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,u&&(l?l.length&&c(l.shift()):r?u=[]:p.disable())},p={add:function(){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this},remove:function(){return u&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,u,r))>-1)u.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?b.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=l=r=t,this},disabled:function(){return!u},lock:function(){return l=t,r||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||i&&!l||(n?l.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=h.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,o=1===i?e:b.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?h.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,u,l;if(r>1)for(s=Array(r),u=Array(r),l=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(a(t,l,n)).fail(o.reject).progress(a(t,u,s)):--i;return i||o.resolveWith(l,n),o.promise()}}),b.support=function(){var t,n,r,a,s,u,l,c,p,f,d=o.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),r=d.getElementsByTagName("a")[0],!n||!r||!n.length)return{};s=o.createElement("select"),l=s.appendChild(o.createElement("option")),a=d.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!a.value,optSelected:l.selected,enctype:!!o.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==o.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===o.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!l.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}a=o.createElement("input"),a.setAttribute("value",""),t.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),t.radioValue="t"===a.value,a.setAttribute("checked","t"),a.setAttribute("name","t"),u=o.createDocumentFragment(),u.appendChild(a),t.appendChecked=a.checked,t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+f,"t"),t[f+"Bubbles"]=c in e||d.attributes[c].expando===!1;return d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip,b(function(){var n,r,a,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",u=o.getElementsByTagName("body")[0];u&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",u.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=d.getElementsByTagName("td"),a[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===a[0].offsetHeight,a[0].style.display="",a[1].style.display="none",t.reliableHiddenOffsets=p&&0===a[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===d.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==u.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,r=d.appendChild(o.createElement("div")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(u.style.zoom=1)),u.removeChild(n),n=d=a=r=null)}),n=s=u=l=r=a=null,t}();var O=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,B=/([A-Z])/g;function P(e,n,r,i){if(b.acceptData(e)){var o,a,s=b.expando,u="string"==typeof n,l=e.nodeType,p=l?b.cache:e,f=l?e[s]:e[s]&&s;if(f&&p[f]&&(i||p[f].data)||!u||r!==t)return f||(l?e[s]=f=c.pop()||b.guid++:f=s),p[f]||(p[f]={},l||(p[f].toJSON=b.noop)),("object"==typeof n||"function"==typeof n)&&(i?p[f]=b.extend(p[f],n):p[f].data=b.extend(p[f].data,n)),o=p[f],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[b.camelCase(n)]=r),u?(a=o[n],null==a&&(a=o[b.camelCase(n)])):a=o,a}}function R(e,t,n){if(b.acceptData(e)){var r,i,o,a=e.nodeType,s=a?b.cache:e,u=a?e[b.expando]:b.expando;if(s[u]){if(t&&(o=n?s[u]:s[u].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in o?t=[t]:(t=b.camelCase(t),t=t in o?[t]:t.split(" "));for(r=0,i=t.length;i>r;r++)delete o[t[r]];if(!(n?$:b.isEmptyObject)(o))return}(n||(delete s[u].data,$(s[u])))&&(a?b.cleanData([e],!0):b.support.deleteExpando||s!=s.window?delete s[u]:s[u]=null)}}}b.extend({cache:{},expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!$(e)},data:function(e,t,n){return P(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return P(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,o=this[0],a=0,s=null;if(e===t){if(this.length&&(s=b.data(o),1===o.nodeType&&!b._data(o,"parsedAttrs"))){for(r=o.attributes;r.length>a;a++)i=r[a].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),W(o,i,s[i]));b._data(o,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?o?W(o,e,b.data(o,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function W(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(B,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:O.test(r)?b.parseJSON(r):r}catch(o){}b.data(e,n,r)}else r=t}return r}function $(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}b.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),o=b._queueHooks(e,t),a=function(){b.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),o.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=b.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(s--)r=b._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var I,z,X=/[\t\r\n]/g,U=/\r/g,V=/^(?:input|select|textarea|button|object)$/i,Y=/^(?:a|area)$/i,J=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,G=/^(?:checked|selected)$/i,Q=b.support.getSetAttribute,K=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u="string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):" ")){o=0;while(i=t[o++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||"string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):"")){o=0;while(i=t[o++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var o,a=0,s=b(this),u=t,l=e.match(w)||[];while(o=l[a++])u=r?u:!s.hasClass(o),s[u?"addClass":"removeClass"](o)}else(n===i||"boolean"===n)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=b.isFunction(e),this.each(function(n){var o,a=b(this);1===this.nodeType&&(o=i?e.call(this,n,a.val()):e,null==o?o="":"number"==typeof o?o+="":b.isArray(o)&&(o=b.map(o,function(e){return null==e?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))});if(o)return r=b.valHooks[o.type]||b.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(U,""):null==n?"":n)}}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;for(;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&b.nodeName(n.parentNode,"optgroup"))){if(t=b(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var o,a,s,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return typeof e.getAttribute===i?b.prop(e,n,r):(a=1!==u||!b.isXMLDoc(e),a&&(n=n.toLowerCase(),o=b.attrHooks[n]||(J.test(n)?z:I)),r===t?o&&a&&"get"in o&&null!==(s=o.get(e,n))?s:(typeof e.getAttribute!==i&&(s=e.getAttribute(n)),null==s?t:s):null!==r?o&&a&&"set"in o&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(w);if(o&&1===e.nodeType)while(n=o[i++])r=b.propFix[n]||n,J.test(n)?!Q&&G.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!b.isXMLDoc(e),a&&(n=b.propFix[n]||n,o=b.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):V.test(e.nodeName)||Y.test(e.nodeName)&&e.href?0:t}}}}),z={get:function(e,n){var r=b.prop(e,n),i="boolean"==typeof r&&e.getAttribute(n),o="boolean"==typeof r?K&&Q?null!=i:G.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}},K&&Q||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,"input")?(e.defaultValue=n,t):I&&I.set(e,n,r)}}),Q||(I=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:I.get,set:function(e,t,n){I.set(e,""===t?!1:t,n)}},b.each(["width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;function it(){return!0}function ot(){return!1}b.event={global:{},add:function(e,n,r,o,a){var s,u,l,c,p,f,d,h,g,m,y,v=b._data(e);if(v){r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=b.guid++),(u=v.events)||(u=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||"").match(w)||[""],l=n.length;while(l--)s=rt.exec(n[l])||[],g=y=s[1],m=(s[2]||"").split(".").sort(),p=b.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=b.event.special[g]||{},d=b.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&b.expr.match.needsContext.test(a),namespace:m.join(".")},c),(h=u[g])||(h=u[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent("on"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),b.event.global[g]=!0;e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,p,f,d,h,g,m=b.hasData(e)&&b._data(e);if(m&&(c=m.events)){t=(t||"").match(w)||[""],l=t.length;while(l--)if(s=rt.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){p=b.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=f.length;while(o--)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));u&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||b.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)b.event.remove(e,d+t[l],n,r,!0);b.isEmptyObject(c)&&(delete m.handle,b._removeData(e,"events"))}},trigger:function(n,r,i,a){var s,u,l,c,p,f,d,h=[i||o],g=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];if(l=f=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+b.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),u=0>g.indexOf(":")&&"on"+g,n=n[b.expando]?n:new b.Event(g,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),p=b.event.special[g]||{},a||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!a&&!p.noBubble&&!b.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(l=l.parentNode);l;l=l.parentNode)h.push(l),f=l;f===(i.ownerDocument||o)&&h.push(f.defaultView||f.parentWindow||e)}d=0;while((l=h[d++])&&!n.isPropagationStopped())n.type=d>1?c:p.bindType||g,s=(b._data(l,"events")||{})[n.type]&&b._data(l,"handle"),s&&s.apply(l,r),s=u&&l[u],s&&b.acceptData(l)&&s.apply&&s.apply(l,r)===!1&&n.preventDefault();if(n.type=g,!(a||n.isDefaultPrevented()||p._default&&p._default.apply(i.ownerDocument,r)!==!1||"click"===g&&b.nodeName(i,"a")||!b.acceptData(i)||!u||!i[g]||b.isWindow(i))){f=i[u],f&&(i[u]=null),b.event.triggered=g;try{i[g]()}catch(v){}b.event.triggered=t,f&&(i[u]=f)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,o,a,s=[],u=h.call(arguments),l=(b._data(this,"events")||{})[e.type]||[],c=b.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=b.event.handlers.call(this,e,l),n=0;while((o=s[n++])&&!e.isPropagationStopped()){e.currentTarget=o.elem,a=0;while((i=o.handlers[a++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(o=[],a=0;u>a;a++)i=n[a],r=i.selector+" ",o[r]===t&&(o[r]=i.needsContext?b(r,this).index(l)>=0:b.find(r,this,null,[l]).length),o[r]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return n.length>u&&s.push({elem:this,handlers:n.slice(u)}),s},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,a=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new b.Event(a),t=r.length;while(t--)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,a,s=n.button,u=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||o,a=i.documentElement,r=i.body,e.pageX=n.clientX+(a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==o.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===o.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;
return(!i||i!==r&&!b.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,"form")?!1:(b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,"form")?!1:(b.event.remove(this,"._submit"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return b().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){var n,r,i,o,a,s,u,l,c,p,f,d,h,g,m,y,v,x="sizzle"+-new Date,w=e.document,T={},N=0,C=0,k=it(),E=it(),S=it(),A=typeof t,j=1<<31,D=[],L=D.pop,H=D.push,q=D.slice,M=D.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},_="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=F.replace("w","w#"),B="([*^$|!~]?=)",P="\\["+_+"*("+F+")"+_+"*(?:"+B+_+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+O+")|)|)"+_+"*\\]",R=":("+F+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+P.replace(3,8)+")*)|.*)\\)|)",W=RegExp("^"+_+"+|((?:^|[^\\\\])(?:\\\\.)*)"+_+"+$","g"),$=RegExp("^"+_+"*,"+_+"*"),I=RegExp("^"+_+"*([\\x20\\t\\r\\n\\f>+~])"+_+"*"),z=RegExp(R),X=RegExp("^"+O+"$"),U={ID:RegExp("^#("+F+")"),CLASS:RegExp("^\\.("+F+")"),NAME:RegExp("^\\[name=['\"]?("+F+")['\"]?\\]"),TAG:RegExp("^("+F.replace("w","w*")+")"),ATTR:RegExp("^"+P),PSEUDO:RegExp("^"+R),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+_+"*(even|odd|(([+-]|)(\\d*)n|)"+_+"*(?:([+-]|)"+_+"*(\\d+)|))"+_+"*\\)|)","i"),needsContext:RegExp("^"+_+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+_+"*((?:-\\d)?\\d*)"+_+"*\\)|)(?=[^-]|$)","i")},V=/[\x20\t\r\n\f]*[+~]/,Y=/^[^{]+\{\s*\[native code/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,G=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,K=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{q.call(w.documentElement.childNodes,0)[0].nodeType}catch(nt){q=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}function rt(e){return Y.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function ot(e){return e[x]=!0,e}function at(e){var t=p.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function st(e,t,n,r){var i,o,a,s,u,l,f,g,m,v;if((t?t.ownerDocument||t:w)!==p&&c(t),t=t||p,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(!d&&!r){if(i=J.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&y(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return H.apply(n,q.call(t.getElementsByTagName(e),0)),n;if((a=i[3])&&T.getByClassName&&t.getElementsByClassName)return H.apply(n,q.call(t.getElementsByClassName(a),0)),n}if(T.qsa&&!h.test(e)){if(f=!0,g=x,m=t,v=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){l=ft(e),(f=t.getAttribute("id"))?g=f.replace(K,"\\$&"):t.setAttribute("id",g),g="[id='"+g+"'] ",u=l.length;while(u--)l[u]=g+dt(l[u]);m=V.test(e)&&t.parentNode||t,v=l.join(",")}if(v)try{return H.apply(n,q.call(m.querySelectorAll(v),0)),n}catch(b){}finally{f||t.removeAttribute("id")}}}return wt(e.replace(W,"$1"),t,n,r)}a=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},c=st.setDocument=function(e){var n=e?e.ownerDocument||e:w;return n!==p&&9===n.nodeType&&n.documentElement?(p=n,f=n.documentElement,d=a(n),T.tagNameNoComments=at(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),T.attributes=at(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),T.getByClassName=at(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),T.getByName=at(function(e){e.id=x+0,e.innerHTML="<a name='"+x+"'></a><div name='"+x+"'></div>",f.insertBefore(e,f.firstChild);var t=n.getElementsByName&&n.getElementsByName(x).length===2+n.getElementsByName(x+0).length;return T.getIdNotName=!n.getElementById(x),f.removeChild(e),t}),i.attrHandle=at(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==A&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},T.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==A&&!d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==A&&!d){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==A&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=T.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},i.find.NAME=T.getByName&&function(e,n){return typeof n.getElementsByName!==A?n.getElementsByName(name):t},i.find.CLASS=T.getByClassName&&function(e,n){return typeof n.getElementsByClassName===A||d?t:n.getElementsByClassName(e)},g=[],h=[":focus"],(T.qsa=rt(n.querySelectorAll))&&(at(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||h.push("\\["+_+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||h.push(":checked")}),at(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&h.push("[*^$]="+_+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||h.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),h.push(",.*:")})),(T.matchesSelector=rt(m=f.matchesSelector||f.mozMatchesSelector||f.webkitMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&at(function(e){T.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),g.push("!=",R)}),h=RegExp(h.join("|")),g=RegExp(g.join("|")),y=rt(f.contains)||f.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},v=f.compareDocumentPosition?function(e,t){var r;return e===t?(u=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||y(w,e)?-1:t===n||y(w,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return u=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:0;if(o===a)return ut(e,t);r=e;while(r=r.parentNode)s.unshift(r);r=t;while(r=r.parentNode)l.unshift(r);while(s[i]===l[i])i++;return i?ut(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},u=!1,[0,0].sort(v),T.detectDuplicates=u,p):p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&c(e),t=t.replace(Z,"='$1']"),!(!T.matchesSelector||d||g&&g.test(t)||h.test(t)))try{var n=m.call(e,t);if(n||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&c(e),y(e,t)},st.attr=function(e,t){var n;return(e.ownerDocument||e)!==p&&c(e),d||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):d||T.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},st.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},st.uniqueSort=function(e){var t,n=[],r=1,i=0;if(u=!T.detectDuplicates,e.sort(v),u){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e};function ut(e,t){var n=t&&e,r=n&&(~t.sourceIndex||j)-(~e.sourceIndex||j);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function pt(e){return ot(function(t){return t=+t,ot(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}o=st.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},i=st.selectors={cacheLength:50,createPseudo:ot,match:U,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return U.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&z.test(n)&&(t=ft(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[e+" "];return t||(t=RegExp("(^|"+_+")"+e+"("+_+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(m){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){c=m[x]||(m[x]={}),l=c[e]||[],d=l[0]===N&&l[1],f=l[0]===N&&l[2],p=d&&m.childNodes[d];while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if(1===p.nodeType&&++f&&p===t){c[e]=[N,d,f];break}}else if(v&&(l=(t[x]||(t[x]={}))[e])&&l[0]===N)f=l[1];else while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(v&&((p[x]||(p[x]={}))[e]=[N,f]),p===t))break;return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);return r[x]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ot(function(e,n){var i,o=r(e,t),a=o.length;while(a--)i=M.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ot(function(e){var t=[],n=[],r=s(e.replace(W,"$1"));return r[x]?ot(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:ot(function(e){return function(t){return st(e,t).length>0}}),contains:ot(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:ot(function(e){return X.test(e||"")||st.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=d?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[0>n?n+t:n]}),even:pt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:pt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=lt(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=ct(n);function ft(e,t){var n,r,o,a,s,u,l,c=E[e+" "];if(c)return t?0:c.slice(0);s=e,u=[],l=i.preFilter;while(s){(!n||(r=$.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),n=!1,(r=I.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(W," ")}),s=s.slice(n.length));for(a in i.filter)!(r=U[a].exec(s))||l[a]&&!(r=l[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?st.error(e):E(e,u).slice(0)}function dt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function ht(e,t,n){var i=t.dir,o=n&&"parentNode"===i,a=C++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var u,l,c,p=N+" "+a;if(s){while(t=t[i])if((1===t.nodeType||o)&&e(t,n,s))return!0}else while(t=t[i])if(1===t.nodeType||o)if(c=t[x]||(t[x]={}),(l=c[i])&&l[0]===p){if((u=l[1])===!0||u===r)return u===!0}else if(l=c[i]=[p],l[1]=e(t,n,s)||r,l[1]===!0)return!0}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var o,a=[],s=0,u=e.length,l=null!=t;for(;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s));return a}function yt(e,t,n,r,i,o){return r&&!r[x]&&(r=yt(r)),i&&!i[x]&&(i=yt(i,o)),ot(function(o,a,s,u){var l,c,p,f=[],d=[],h=a.length,g=o||xt(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:mt(g,f,e,s,u),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,u),r){l=mt(y,d),r(l,[],s,u),c=l.length;while(c--)(p=l[c])&&(y[d[c]]=!(m[d[c]]=p))}if(o){if(i||e){if(i){l=[],c=y.length;while(c--)(p=y[c])&&l.push(m[c]=p);i(null,y=[],l,u)}c=y.length;while(c--)(p=y[c])&&(l=i?M.call(o,p):f[c])>-1&&(o[l]=!(a[l]=p))}}else y=mt(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function vt(e){var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],u=a?1:0,c=ht(function(e){return e===t},s,!0),p=ht(function(e){return M.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;o>u;u++)if(n=i.relative[e[u].type])f=[ht(gt(f),n)];else{if(n=i.filter[e[u].type].apply(null,e[u].matches),n[x]){for(r=++u;o>r;r++)if(i.relative[e[r].type])break;return yt(u>1&&gt(f),u>1&&dt(e.slice(0,u-1)).replace(W,"$1"),n,r>u&&vt(e.slice(u,r)),o>r&&vt(e=e.slice(r)),o>r&&dt(e))}f.push(n)}return gt(f)}function bt(e,t){var n=0,o=t.length>0,a=e.length>0,s=function(s,u,c,f,d){var h,g,m,y=[],v=0,b="0",x=s&&[],w=null!=d,T=l,C=s||a&&i.find.TAG("*",d&&u.parentNode||u),k=N+=null==T?1:Math.random()||.1;for(w&&(l=u!==p&&u,r=n);null!=(h=C[b]);b++){if(a&&h){g=0;while(m=e[g++])if(m(h,u,c)){f.push(h);break}w&&(N=k,r=++n)}o&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,o&&b!==v){g=0;while(m=t[g++])m(x,y,u,c);if(s){if(v>0)while(b--)x[b]||y[b]||(y[b]=L.call(f));y=mt(y)}H.apply(f,y),w&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(f)}return w&&(N=k,l=T),x};return o?ot(s):s}s=st.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){t||(t=ft(e)),n=t.length;while(n--)o=vt(t[n]),o[x]?r.push(o):i.push(o);o=S(e,bt(i,r))}return o};function xt(e,t,n){var r=0,i=t.length;for(;i>r;r++)st(e,t[r],n);return n}function wt(e,t,n,r){var o,a,u,l,c,p=ft(e);if(!r&&1===p.length){if(a=p[0]=p[0].slice(0),a.length>2&&"ID"===(u=a[0]).type&&9===t.nodeType&&!d&&i.relative[a[1].type]){if(t=i.find.ID(u.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(a.shift().value.length)}o=U.needsContext.test(e)?0:a.length;while(o--){if(u=a[o],i.relative[l=u.type])break;if((c=i.find[l])&&(r=c(u.matches[0].replace(et,tt),V.test(a[0].type)&&t.parentNode||t))){if(a.splice(o,1),e=r.length&&dt(a),!e)return H.apply(n,q.call(r,0)),n;break}}}return s(e,p)(r,t,d,n,V.test(e)),n}i.pseudos.nth=i.pseudos.eq;function Tt(){}i.filters=Tt.prototype=i.pseudos,i.setFilters=new Tt,c(),st.attr=b.attr,b.find=st,b.expr=st.selectors,b.expr[":"]=b.expr.pseudos,b.unique=st.uniqueSort,b.text=st.getText,b.isXMLDoc=st.isXML,b.contains=st.contains}(e);var at=/Until$/,st=/^(?:parents|prev(?:Until|All))/,ut=/^.[^:#\[\.,]*$/,lt=b.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if("string"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1))},filter:function(e){return this.pushStack(ft(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?lt.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,o=[],a=lt.test(e)||"string"!=typeof e?b(e,t||this.context):0;for(;i>r;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&11!==n.nodeType){if(a?a.index(n)>-1:b.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}}return this.pushStack(o.length>1?b.unique(o):o)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack;function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return pt(e,"nextSibling")},prev:function(e){return pt(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return at.test(e)||(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!ct[e]?b.unique(i):i,this.length>1&&st.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!b(o).is(r)))1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});function ft(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(ut.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function dt(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+ht+")[\\s/>]","i"),yt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,xt=/<tbody/i,wt=/<|&#?\w+;/,Tt=/<(?:script|style|link)/i,Nt=/^(?:checkbox|radio)$/i,Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^$|\/(?:java|ecma)script/i,Et=/^true\/(.*)/,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},jt=dt(o),Dt=jt.appendChild(o.createElement("div"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(Ot(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Mt(Ot(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&b.cleanData(Ot(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,""):t;if(!("string"!=typeof e||Tt.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(Ot(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||"string"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=f.apply([],e);var i,o,a,s,u,l,c=0,p=this.length,d=this,h=p-1,g=e[0],m=b.isFunction(g);if(m||!(1>=p||"string"!=typeof g||b.support.checkClone)&&Ct.test(g))return this.each(function(i){var o=d.eq(i);m&&(e[0]=g.call(this,i,n?o.html():t)),o.domManip(e,n,r)});if(p&&(l=b.buildFragment(e,this[0].ownerDocument,!1,this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(n=n&&b.nodeName(i,"tr"),s=b.map(Ot(l,"script"),Ht),a=s.length;p>c;c++)o=l,c!==h&&(o=b.clone(o,!0,!0),a&&b.merge(s,Ot(o,"script"))),r.call(n&&b.nodeName(this[c],"table")?Lt(this[c],"tbody"):this[c],o,c);if(a)for(u=s[s.length-1].ownerDocument,b.map(s,qt),c=0;a>c;c++)o=s[c],kt.test(o.type||"")&&!b._data(o,"globalEval")&&b.contains(u,o)&&(o.src?b.ajax({url:o.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((o.text||o.textContent||o.innerHTML||"").replace(St,"")));l=i=null}return this}});function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Ht(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Mt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function _t(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,o=b._data(e),a=b._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)b.event.add(t,n,s[n][r])}a.data&&(a.data=b.extend({},a.data))}}function Ft(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}"script"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Nt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],o=b(e),a=o.length-1;for(;a>=r;r++)n=r===a?this:this.clone(!0),b(o[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}});function Ot(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||b.nodeName(o,n)?s.push(o):b.merge(s,Ot(o,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],s):s}function Bt(e){Nt.test(e.type)&&(e.defaultChecked=e.checked)}b.extend({clone:function(e,t,n){var r,i,o,a,s,u=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=Ot(o),s=Ot(e),a=0;null!=(i=s[a]);++a)r[a]&&Ft(i,r[a]);if(t)if(n)for(s=s||Ot(e),r=r||Ot(o),a=0;null!=(i=s[a]);a++)_t(i,r[a]);else _t(e,o);return r=Ot(o,"script"),r.length>0&&Mt(r,!u&&Ot(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){var i,o,a,s,u,l,c,p=e.length,f=dt(t),d=[],h=0;for(;p>h;h++)if(o=e[h],o||0===o)if("object"===b.type(o))b.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){s=s||f.appendChild(t.createElement("div")),u=(bt.exec(o)||["",""])[1].toLowerCase(),c=At[u]||At._default,s.innerHTML=c[1]+o.replace(vt,"<$1></$2>")+c[2],i=c[0];while(i--)s=s.lastChild;if(!b.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!b.support.tbody){o="table"!==u||xt.test(o)?"<table>"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;while(i--)b.nodeName(l=o.childNodes[i],"tbody")&&!l.childNodes.length&&o.removeChild(l)
}b.merge(d,s.childNodes),s.textContent="";while(s.firstChild)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));s&&f.removeChild(s),b.support.appendChecked||b.grep(Ot(d,"input"),Bt),h=0;while(o=d[h++])if((!r||-1===b.inArray(o,r))&&(a=b.contains(o.ownerDocument,o),s=Ot(f.appendChild(o),"script"),a&&Mt(s),n)){i=0;while(o=s[i++])kt.test(o.type||"")&&n.push(o)}return s=null,f},cleanData:function(e,t){var n,r,o,a,s=0,u=b.expando,l=b.cache,p=b.support.deleteExpando,f=b.event.special;for(;null!=(n=e[s]);s++)if((t||b.acceptData(n))&&(o=n[u],a=o&&l[o])){if(a.events)for(r in a.events)f[r]?b.event.remove(n,r):b.removeEvent(n,r,a.handle);l[o]&&(delete l[o],p?delete n[u]:typeof n.removeAttribute!==i?n.removeAttribute(u):n[u]=null,c.push(o))}}});var Pt,Rt,Wt,$t=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp("^("+x+")(.*)$","i"),Yt=RegExp("^("+x+")(?!px)[a-z%]+$","i"),Jt=RegExp("^([+-])=("+x+")","i"),Gt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,o=[],a=0,s=e.length;for(;s>a;a++)r=e[a],r.style&&(o[a]=b._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(o[a]=b._data(r,"olddisplay",un(r.nodeName)))):o[a]||(i=nn(r),(n&&"none"!==n||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,o,a={},s=0;if(b.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=b.css(e,n[s],!1,o);return a}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=b.camelCase(n),l=e.style;if(n=b.cssProps[u]||(b.cssProps[u]=tn(l,u)),s=b.cssHooks[n]||b.cssHooks[u],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:l[n];if(a=typeof r,"string"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(b.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||b.cssNumber[u]||(r+="px"),b.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(l[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{l[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,u=b.camelCase(n);return n=b.cssProps[u]||(b.cssProps[u]=tn(e.style,u)),s=b.cssHooks[n]||b.cssHooks[u],s&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),"normal"===a&&n in Kt&&(a=Kt[n]),""===r||r?(o=parseFloat(a),r===!0||b.isNumeric(o)?o||0:a):a},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(""!==u||b.contains(e.ownerDocument,e)||(u=b.style(e,n)),Yt.test(u)&&Ut.test(n)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):o.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s[n]:t,l=e.style;return null==u&&l&&l[n]&&(u=l[n]),Yt.test(u)&&!zt.test(n)&&(i=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left="fontSize"===n?"1em":u,u=l.pixelLeft+"px",l.left=i,a&&(o.left=a)),""===u?"auto":u});function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function an(e,t,n,r,i){var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;for(;4>o;o+=2)"margin"===n&&(a+=b.css(e,n+Zt[o],!0,i)),r?("content"===n&&(a-=b.css(e,"padding"+Zt[o],!0,i)),"margin"!==n&&(a-=b.css(e,"border"+Zt[o]+"Width",!0,i))):(a+=b.css(e,"padding"+Zt[o],!0,i),"padding"!==n&&(a+=b.css(e,"border"+Zt[o]+"Width",!0,i)));return a}function sn(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?"border":"content"),r,o)+"px"}function un(e){var t=o,n=Gt[e];return n||(n=ln(e,t),"none"!==n&&n||(Pt=(Pt||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=ln(e,t),Pt.detach()),Gt[e]=n),n}function ln(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}b.each(["height","width"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,"display"))?b.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===b.trim(o.replace($t,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+" "+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:"inline-block"},Wt,[e,"marginRight"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?b(e).position()[n]+"px":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||b.css(e,"display"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},o="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(b.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\[\]$/,fn=/\r?\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Nt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(fn,"\r\n")}}):{name:t.name,value:n.replace(fn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],o=function(e,t){t=b.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join("&").replace(cn,"+")};function gn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==b.type(t))r(e,t);else for(i in t)gn(e+"["+i+"]",t[i],n,r)}b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,yn,vn=b.now(),bn=/\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Nn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Cn=/^(?:GET|HEAD)$/,kn=/^\/\//,En=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Sn=b.fn.load,An={},jn={},Dn="*/".concat("*");try{yn=a.href}catch(Ln){yn=o.createElement("a"),yn.href="",yn=yn.href}mn=En.exec(yn.toLowerCase())||[];function Hn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(w)||[];if(b.isFunction(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){var o={},a=e===jn;function s(u){var l;return o[u]=!0,b.each(e[u]||[],function(e,u){var c=u(n,r,i);return"string"!=typeof c||a||o[c]?a?!(l=c):t:(n.dataTypes.unshift(c),s(c),!1)}),l}return s(n.dataTypes[0])||!o["*"]&&s("*")}function Mn(e,n){var r,i,o=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}b.fn.load=function(e,n,r){if("string"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,u=e.indexOf(" ");return u>=0&&(i=e.slice(u,e.length),e=e.slice(0,u)),b.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&b.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,s.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,o){return b.isFunction(r)&&(o=o||i,i=r,r=t),b.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:"GET",isLocal:Nn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Mn(Mn(e,b.ajaxSettings),t):Mn(b.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,u,l,c,p=b.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?b(f):b.event,h=b.Deferred(),g=b.Callbacks("once memory"),m=p.statusCode||{},y={},v={},x=0,T="canceled",N={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else N.always(e[N.status]);return this},abort:function(e){var t=e||T;return l&&l.abort(t),k(0,t),this}};if(h.promise(N).complete=g.add,N.success=N.done,N.error=N.fail,p.url=((e||p.url||yn)+"").replace(xn,"").replace(kn,mn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=b.trim(p.dataType||"*").toLowerCase().match(w)||[""],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?80:443))==(mn[3]||("http:"===mn[1]?80:443)))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=b.param(p.data,p.traditional)),qn(An,p,n,N),2===x)return N;u=p.global,u&&0===b.active++&&b.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Cn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,"$1_="+vn++):o+(bn.test(o)?"&":"?")+"_="+vn++)),p.ifModified&&(b.lastModified[o]&&N.setRequestHeader("If-Modified-Since",b.lastModified[o]),b.etag[o]&&N.setRequestHeader("If-None-Match",b.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&N.setRequestHeader("Content-Type",p.contentType),N.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Dn+"; q=0.01":""):p.accepts["*"]);for(i in p.headers)N.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,N,p)===!1||2===x))return N.abort();T="abort";for(i in{success:1,error:1,complete:1})N[i](p[i]);if(l=qn(jn,p,n,N)){N.readyState=1,u&&d.trigger("ajaxSend",[N,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){N.abort("timeout")},p.timeout));try{x=1,l.send(y,k)}catch(C){if(!(2>x))throw C;k(-1,C)}}else k(-1,"No Transport");function k(e,n,r,i){var c,y,v,w,T,C=n;2!==x&&(x=2,s&&clearTimeout(s),l=t,a=i||"",N.readyState=e>0?4:0,r&&(w=_n(p,N,r)),e>=200&&300>e||304===e?(p.ifModified&&(T=N.getResponseHeader("Last-Modified"),T&&(b.lastModified[o]=T),T=N.getResponseHeader("etag"),T&&(b.etag[o]=T)),204===e?(c=!0,C="nocontent"):304===e?(c=!0,C="notmodified"):(c=Fn(p,w),C=c.state,y=c.data,v=c.error,c=!v)):(v=C,(e||!C)&&(C="error",0>e&&(e=0))),N.status=e,N.statusText=(n||C)+"",c?h.resolveWith(f,[y,C,N]):h.rejectWith(f,[N,C,v]),N.statusCode(m),m=t,u&&d.trigger(c?"ajaxSuccess":"ajaxError",[N,p,c?y:v]),g.fireWith(f,[N,C]),u&&(d.trigger("ajaxComplete",[N,p]),--b.active||b.event.trigger("ajaxStop")))}return N},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}});function _n(e,n,r){var i,o,a,s,u=e.contents,l=e.dataTypes,c=e.responseFields;for(s in c)s in r&&(n[c[s]]=r[s]);while("*"===l[0])l.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in u)if(u[s]&&u[s].test(o)){l.unshift(s);break}if(l[0]in r)a=l[0];else{for(s in r){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==l[0]&&l.unshift(a),r[a]):t}function Fn(e,t){var n,r,i,o,a={},s=0,u=e.dataTypes.slice(),l=u[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u[1])for(i in e.converters)a[i.toLowerCase()]=e.converters[i];for(;r=u[++s];)if("*"!==r){if("*"!==l&&l!==r){if(i=a[l+" "+r]||a["* "+r],!i)for(n in a)if(o=n.split(" "),o[1]===r&&(i=a[l+" "+o[0]]||a["* "+o[0]])){i===!0?i=a[n]:a[n]!==!0&&(r=o[0],u.splice(s--,0,r));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(c){return{state:"parsererror",error:i?c:"No conversion from "+l+" to "+r}}}l=r}return{state:"success",data:t}}b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||b("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var On=[],Bn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=On.pop()||b.expando+"_"+vn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,u=n.jsonp!==!1&&(Bn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Bn,"$1"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||b.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,On.push(o)),s&&b.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=b.ajaxSettings.xhr(),b.support.cors=!!Rn&&"withCredentials"in Rn,Rn=b.support.ajax=!!Rn,Rn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)u.setRequestHeader(s,i[s])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var s,l,c,p;try{if(r&&(i||4===u.readyState))if(r=t,a&&(u.onreadystatechange=b.noop,$n&&delete Pn[a]),i)4!==u.readyState&&u.abort();else{p={},s=u.status,l=u.getAllResponseHeaders(),"string"==typeof u.responseText&&(p.text=u.responseText);try{c=u.statusText}catch(f){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,l)},n.async?4===u.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},b(e).unload($n)),Pn[a]=r),u.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp("^(?:([+-])=|)("+x+")([a-z%]*)$","i"),Jn=/queueHooks$/,Gn=[nr],Qn={"*":[function(e,t){var n,r,i=this.createTween(e,t),o=Yn.exec(t),a=i.cur(),s=+a||0,u=1,l=20;if(o){if(n=+o[2],r=o[3]||(b.cssNumber[e]?"":"px"),"px"!==r&&s){s=b.css(i.elem,e,!0)||n||1;do u=u||".5",s/=u,b.style(i.elem,e,s+r);while(u!==(u=i.cur()/a)&&1!==u&&--l)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};function Kn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Qn[t]||[]).concat(Qn["*"]),i=0,o=r.length;for(;o>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,o=0,a=Gn.length,s=b.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;var t=Xn||Kn(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;for(;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(tr(c,l.opts.specialEasing);a>o;o++)if(r=Gn[o].call(l,e,c,l.opts))return r;return Zn(l,c),b.isFunction(l.opts.start)&&l.opts.start.call(e,l),b.fx.timer(b.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function tr(e,t){var n,r,i,o,a;for(i in e)if(r=b.camelCase(i),o=t[r],n=e[i],b.isArray(n)&&(o=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),a=b.cssHooks[r],a&&"expand"in a){n=a.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=o)}else t[r]=o}b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});function nr(e,t,n){var r,i,o,a,s,u,l,c,p,f=this,d=e.style,h={},g=[],m=e.nodeType&&nn(e);n.queue||(c=b._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,p=c.empty.fire,c.empty.fire=function(){c.unqueued||p()}),c.unqueued++,f.always(function(){f.always(function(){c.unqueued--,b.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==un(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",b.support.shrinkWrapBlocks||f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],Vn.exec(a)){if(delete t[i],u=u||"toggle"===a,a===(m?"hide":"show"))continue;g.push(i)}if(o=g.length){s=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in s&&(m=s.hidden),u&&(s.hidden=!m),m?b(e).show():f.done(function(){b(e).hide()}),f.done(function(){var t;b._removeData(e,"fxshow");for(t in h)b.style(e,t,h[t])});for(i=0;o>i;i++)r=g[i],l=f.createTween(r,m?s[r]:0),h[r]=s[r]||b.style(e,r),r in s||(s[r]=l.start,m&&(l.end=l.start,l.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),o=b.speed(t,n,r),a=function(){var t=er(this,b.extend({},e),o);a.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=b.timers,a=b._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=b.timers,a=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Un||(Un=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Un),Un=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return n=s.documentElement,b.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");"static"===r&&(e.style.position="relative");var i=b(e),o=i.offset(),a=b.css(e,"top"),s=b.css(e,"left"),u=("absolute"===r||"fixed"===r)&&b.inArray("auto",[a,s])>-1,l={},c={},p,f;u?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),b.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(l.top=t.top-o.top+p),null!=t.left&&(l.left=t.left-o.left+f),"using"in t?t.using.call(e,l):i.css(l)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===b.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.documentElement;while(e&&!b.nodeName(e,"html")&&"static"===b.css(e,"position"))e=e.offsetParent;return e||o.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?b(a).scrollLeft():o,r?o:b(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});function or(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return b.access(this,function(n,r,i){var o;return b.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?b.css(n,r,s):b.style(n,r,i,s)},n,a?i:t,a,null)}})}),e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})})(window);
; browserify_shim__define__module__export__(typeof $ != "undefined" ? $ : window.$);

}).call(global, undefined, undefined, undefined, undefined, function defineExport(ex) { module.exports = ex; });

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\kendo\\2014.3.1119\\kendo.web.min.js":[function(require,module,exports){
/*
* Kendo UI v2014.3.1119 (http://www.telerik.com/kendo-ui)
* Copyright 2014 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at
* http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
(function(f,define){define([],f)})(function(){!function(e,t,n){function i(){}function r(e,t){if(t)return"'"+e.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var n=e.charAt(0),i=e.substring(1);return"="===n?"+("+i+")+":":"===n?"+e("+i+")+":";"+e+";o+="}function o(e,t,n){return e+="",t=t||2,n=t-e.length,n?N[t].substring(0,n)+e:e}function a(e){var t=e.css(gt.support.transitions.css+"box-shadow")||e.css("box-shadow"),n=t?t.match(Tt)||[0,0,0,0,0]:[0,0,0,0,0],i=bt.max(+n[3],+(n[4]||0));return{left:-n[1]+i,right:+n[1]+i,bottom:+n[2]+i}}function s(t,n){var i,r,o,s,l,c,d,u,h=xt.browser,p="rtl"==t.css("direction");return t.parent().hasClass("k-animation-container")?(d=t.parent(".k-animation-container"),u=d[0].style,d.is(":hidden")&&d.show(),i=Ct.test(u.width)||Ct.test(u.height),i||d.css({width:t.outerWidth(),height:t.outerHeight(),boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"})):(r=a(t),o=t[0].style.width,s=t[0].style.height,l=Ct.test(o),c=Ct.test(s),h.opera&&(r.left=r.right=r.bottom=5),i=l||c,!l&&(!n||n&&o)&&(o=t.outerWidth()),!c&&(!n||n&&s)&&(s=t.outerHeight()),t.wrap(e("<div/>").addClass("k-animation-container").css({width:o,height:s,marginLeft:r.left*(p?1:-1),paddingLeft:r.left,paddingRight:r.right,paddingBottom:r.bottom})),i&&t.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})),h.msie&&bt.floor(h.version)<=7&&(t.css({zoom:1}),t.children(".k-menu").width(t.width())),t.parent()}function l(e){var t=1,n=arguments.length;for(t=1;n>t;t++)c(e,arguments[t]);return e}function c(e,t){var n,i,r,o,a,s=gt.data.ObservableArray,l=gt.data.LazyObservableArray,d=gt.data.DataSource,u=gt.data.HierarchicalDataSource;for(n in t)i=t[n],r=typeof i,o=r===Pt&&null!==i?i.constructor:null,o&&o!==Array&&o!==s&&o!==l&&o!==d&&o!==u?i instanceof Date?e[n]=new Date(i.getTime()):M(i.clone)?e[n]=i.clone():(a=e[n],e[n]=typeof a===Pt?a||{}:{},c(e[n],i)):r!==Ft&&(e[n]=i);return e}function d(e,t,i){for(var r in t)if(t.hasOwnProperty(r)&&t[r].test(e))return r;return i!==n?i:e}function u(e){return e.replace(/([a-z][A-Z])/g,function(e){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()})}function h(e){return e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})}function p(t,n){var i,r={};return document.defaultView&&document.defaultView.getComputedStyle?(i=document.defaultView.getComputedStyle(t,""),n&&e.each(n,function(e,t){r[t]=i.getPropertyValue(t)})):(i=t.currentStyle,n&&e.each(n,function(e,t){r[t]=i[h(t)]})),gt.size(r)||(r=i),r}function f(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&"toJSON"!=t&&n++;return n}function g(e,n,i){n||(n="offset");var r=e[n]();return xt.browser.msie&&(xt.pointers||xt.msPointers)&&!i&&(r.top-=t.pageYOffset-document.documentElement.scrollTop,r.left-=t.pageXOffset-document.documentElement.scrollLeft),r}function m(e){var t={};return vt("string"==typeof e?e.split(" "):e,function(e){t[e]=this}),t}function v(e){return new gt.effects.Element(e)}function _(e,t,n,i){return typeof e===Et&&(M(t)&&(i=t,t=400,n=!1),M(n)&&(i=n,n=!1),typeof t===zt&&(n=t,t=400),e={effects:e,duration:t,reverse:n,complete:i}),mt({effects:{},duration:400,reverse:!1,init:wt,teardown:wt,hide:!1},e,{completeCallback:e.complete,complete:wt})}function y(t,n,i,r,o){for(var a,s=0,l=t.length;l>s;s++)a=e(t[s]),a.queue(function(){U.promise(a,_(n,i,r,o))});return t}function w(e,t,n,i){return t&&(t=t.split(" "),vt(t,function(t,n){e.toggleClass(n,i)})),e}function b(e){return(""+e).replace(W,"&amp;").replace(j,"&lt;").replace($,"&gt;").replace(G,"&quot;").replace(q,"&#39;")}function k(e,t){var i;return 0===t.indexOf("data")&&(t=t.substring(4),t=t.charAt(0).toLowerCase()+t.substring(1)),t=t.replace(nt,"-$1"),i=e.getAttribute("data-"+gt.ns+t),null===i?i=n:"null"===i?i=null:"true"===i?i=!0:"false"===i?i=!1:Dt.test(i)?i=parseFloat(i):et.test(i)&&!tt.test(i)&&(i=Function("return ("+i+")")()),i}function x(t,i){var r,o,a={};for(r in i)o=k(t,r),o!==n&&(Z.test(r)&&(o=gt.template(e("#"+o).html())),a[r]=o);return a}function C(t,n){return e.contains(t,n)?-1:1}function S(){var t=e(this);return e.inArray(t.attr("data-"+gt.ns+"role"),["slider","rangeslider"])>-1||t.is(":visible")}function T(e,t){var n=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(n)?!e.disabled:"a"===n?e.href||t:t)&&D(e)}function D(t){return!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")||e.expr.filters.hidden(this)}).length}function A(e,t){return new A.fn.init(e,t)}var E,M,P,I,z,F,R,B,L,O,H,N,V,U,W,j,G,q,$,Y,K,Q,X,J,Z,et,tt,nt,it,rt,ot,at,st,lt,ct,dt,ut,ht,pt,ft,gt=t.kendo=t.kendo||{cultures:{}},mt=e.extend,vt=e.each,_t=e.isArray,yt=e.proxy,wt=e.noop,bt=Math,kt=t.JSON||{},xt={},Ct=/%/,St=/\{(\d+)(:[^\}]+)?\}/g,Tt=/(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+)?/i,Dt=/^(\+|-?)\d+(\.?)\d*$/,At="function",Et="string",Mt="number",Pt="object",It="null",zt="boolean",Ft="undefined",Rt={},Bt={},Lt=[].slice,Ot=t.Globalize;gt.version="2014.3.1119",i.extend=function(e){var t,n,i=function(){},r=this,o=e&&e.init?e.init:function(){r.apply(this,arguments)};i.prototype=r.prototype,n=o.fn=o.prototype=new i;for(t in e)n[t]=null!=e[t]&&e[t].constructor===Object?mt(!0,{},i.prototype[t],e[t]):e[t];return n.constructor=o,o.extend=r.extend,o},i.prototype._initOptions=function(e){this.options=l({},this.options,e)},M=gt.isFunction=function(e){return"function"==typeof e},P=function(){this._defaultPrevented=!0},I=function(){return this._defaultPrevented===!0},z=i.extend({init:function(){this._events={}},bind:function(e,t,i){var r,o,a,s,l,c=this,d=typeof e===Et?[e]:e,u=typeof t===At;if(t===n){for(r in e)c.bind(r,e[r]);return c}for(r=0,o=d.length;o>r;r++)e=d[r],s=u?t:t[e],s&&(i&&(a=s,s=function(){c.unbind(e,s),a.apply(c,arguments)},s.original=a),l=c._events[e]=c._events[e]||[],l.push(s));return c},one:function(e,t){return this.bind(e,t,!0)},first:function(e,t){var n,i,r,o,a=this,s=typeof e===Et?[e]:e,l=typeof t===At;for(n=0,i=s.length;i>n;n++)e=s[n],r=l?t:t[e],r&&(o=a._events[e]=a._events[e]||[],o.unshift(r));return a},trigger:function(e,t){var n,i,r=this,o=r._events[e];if(o){for(t=t||{},t.sender=r,t._defaultPrevented=!1,t.preventDefault=P,t.isDefaultPrevented=I,o=o.slice(),n=0,i=o.length;i>n;n++)o[n].call(r,t);return t._defaultPrevented===!0}return!1},unbind:function(e,t){var i,r=this,o=r._events[e];if(e===n)r._events={};else if(o)if(t)for(i=o.length-1;i>=0;i--)(o[i]===t||o[i].original===t)&&o.splice(i,1);else r._events[e]=[];return r}}),F=/^\w+/,R=/\$\{([^}]*)\}/g,B=/\\\}/g,L=/__CURLY__/g,O=/\\#/g,H=/__SHARP__/g,N=["","0","00","000","0000"],E={paramName:"data",useWithBlock:!0,render:function(e,t){var n,i,r="";for(n=0,i=t.length;i>n;n++)r+=e(t[n]);return r},compile:function(e,t){var n,i,o,a=mt({},this,t),s=a.paramName,l=s.match(F)[0],c=a.useWithBlock,d="var o,e=kendo.htmlEncode;";if(M(e))return e;for(d+=c?"with("+s+"){":"",d+="o=",i=e.replace(B,"__CURLY__").replace(R,"#=e($1)#").replace(L,"}").replace(O,"__SHARP__").split("#"),o=0;i.length>o;o++)d+=r(i[o],o%2===0);d+=c?";}":";",d+="return o;",d=d.replace(H,"#");try{return n=Function(l,d),n._slotCount=Math.floor(i.length/2),n}catch(u){throw Error(gt.format("Invalid template:'{0}' Generated code:'{1}'",e,d))}}},function(){function e(e){return a.lastIndex=0,a.test(e)?'"'+e.replace(a,function(e){var t=s[e];return typeof t===Et?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function t(o,a){var s,c,d,u,h,p,f=n,g=a[o];if(g&&typeof g===Pt&&typeof g.toJSON===At&&(g=g.toJSON(o)),typeof r===At&&(g=r.call(a,o,g)),p=typeof g,p===Et)return e(g);if(p===Mt)return isFinite(g)?g+"":It;if(p===zt||p===It)return g+"";if(p===Pt){if(!g)return It;if(n+=i,h=[],"[object Array]"===l.apply(g)){for(u=g.length,s=0;u>s;s++)h[s]=t(s,g)||It;return d=0===h.length?"[]":n?"[\n"+n+h.join(",\n"+n)+"\n"+f+"]":"["+h.join(",")+"]",n=f,d}if(r&&typeof r===Pt)for(u=r.length,s=0;u>s;s++)typeof r[s]===Et&&(c=r[s],d=t(c,g),d&&h.push(e(c)+(n?": ":":")+d));else for(c in g)Object.hasOwnProperty.call(g,c)&&(d=t(c,g),d&&h.push(e(c)+(n?": ":":")+d));return d=0===h.length?"{}":n?"{\n"+n+h.join(",\n"+n)+"\n"+f+"}":"{"+h.join(",")+"}",n=f,d}}var n,i,r,a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l={}.toString;typeof Date.prototype.toJSON!==At&&(Date.prototype.toJSON=function(){var e=this;return isFinite(e.valueOf())?o(e.getUTCFullYear(),4)+"-"+o(e.getUTCMonth()+1)+"-"+o(e.getUTCDate())+"T"+o(e.getUTCHours())+":"+o(e.getUTCMinutes())+":"+o(e.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),typeof kt.stringify!==At&&(kt.stringify=function(e,o,a){var s;if(n="",i="",typeof a===Mt)for(s=0;a>s;s+=1)i+=" ";else typeof a===Et&&(i=a);if(r=o,o&&typeof o!==At&&(typeof o!==Pt||typeof o.length!==Mt))throw Error("JSON.stringify");return t("",{"":e})})}(),function(){function t(e){if(e){if(e.numberFormat)return e;if(typeof e===Et){var t=gt.cultures;return t[e]||t[e.split("-")[0]]||null}return null}return null}function i(e){return e&&(e=t(e)),e||gt.cultures.current}function r(e){e.groupSizes=e.groupSize,e.percent.groupSizes=e.percent.groupSize,e.currency.groupSizes=e.currency.groupSize}function a(e,t,r){r=i(r);var a=r.calendars.standard,s=a.days,l=a.months;return t=a.patterns[t]||t,t.replace(d,function(t){var i,r,c;return"d"===t?r=e.getDate():"dd"===t?r=o(e.getDate()):"ddd"===t?r=s.namesAbbr[e.getDay()]:"dddd"===t?r=s.names[e.getDay()]:"M"===t?r=e.getMonth()+1:"MM"===t?r=o(e.getMonth()+1):"MMM"===t?r=l.namesAbbr[e.getMonth()]:"MMMM"===t?r=l.names[e.getMonth()]:"yy"===t?r=o(e.getFullYear()%100):"yyyy"===t?r=o(e.getFullYear(),4):"h"===t?r=e.getHours()%12||12:"hh"===t?r=o(e.getHours()%12||12):"H"===t?r=e.getHours():"HH"===t?r=o(e.getHours()):"m"===t?r=e.getMinutes():"mm"===t?r=o(e.getMinutes()):"s"===t?r=e.getSeconds():"ss"===t?r=o(e.getSeconds()):"f"===t?r=bt.floor(e.getMilliseconds()/100):"ff"===t?(r=e.getMilliseconds(),r>99&&(r=bt.floor(r/10)),r=o(r)):"fff"===t?r=o(e.getMilliseconds(),3):"tt"===t?r=e.getHours()<12?a.AM[0]:a.PM[0]:"zzz"===t?(i=e.getTimezoneOffset(),c=0>i,r=(""+bt.abs(i/60)).split(".")[0],i=bt.abs(i)-60*r,r=(c?"+":"-")+o(r),r+=":"+o(i)):("zz"===t||"z"===t)&&(r=e.getTimezoneOffset()/60,c=0>r,r=(""+bt.abs(r)).split(".")[0],r=(c?"+":"-")+("zz"===t?o(r):r)),r!==n?r:t.slice(1,t.length-1)})}function s(e,t,r){r=i(r);var o,a,s,c,d,w,b,k,x,C,S,T,D,A,E,M,P,I,z,F,R,B,L,O=r.numberFormat,H=O.groupSize[0],N=O[m],V=O[g],U=O.decimals,W=O.pattern[0],j=[],G=0>e,q=f,$=f,Y=-1;if(e===n)return f;if(!isFinite(e))return e;if(!t)return r.name.length?e.toLocaleString():""+e;if(d=u.exec(t)){if(t=d[1].toLowerCase(),a="c"===t,s="p"===t,(a||s)&&(O=a?O.currency:O.percent,H=O.groupSize[0],N=O[m],V=O[g],U=O.decimals,o=O.symbol,W=O.pattern[G?0:1]),c=d[2],c&&(U=+c),"e"===t)return c?e.toExponential(U):e.toExponential();if(s&&(e*=100),e=l(e,U),G=0>e,e=e.split(g),w=e[0],b=e[1],G&&(w=w.substring(1)),$=w,k=w.length,k>=H)for($=f,C=0;k>C;C++)C>0&&(k-C)%H===0&&($+=N),$+=w.charAt(C);if(b&&($+=V+b),"n"===t&&!G)return $;for(e=f,C=0,S=W.length;S>C;C++)T=W.charAt(C),e+="n"===T?$:"$"===T||"%"===T?o:T;return e}if(G&&(e=-e),(t.indexOf("'")>-1||t.indexOf('"')>-1||t.indexOf("\\")>-1)&&(t=t.replace(h,function(e){var t=e.charAt(0).replace("\\",""),n=e.slice(1).replace(t,"");return j.push(n),y})),t=t.split(";"),G&&t[1])t=t[1],A=!0;else if(0===e){if(t=t[2]||t[0],-1==t.indexOf(v)&&-1==t.indexOf(_))return t}else t=t[0];if(F=t.indexOf("%"),R=t.indexOf("$"),s=-1!=F,a=-1!=R,s&&(e*=100),a&&"\\"===t[R-1]&&(t=t.split("\\").join(""),a=!1),(a||s)&&(O=a?O.currency:O.percent,H=O.groupSize[0],N=O[m],V=O[g],U=O.decimals,o=O.symbol),D=t.indexOf(m)>-1,D&&(t=t.replace(p,f)),E=t.indexOf(g),S=t.length,-1!=E?(b=(""+e).split("e"),b=b[1]?l(e,Math.abs(b[1])):b[0],b=b.split(g)[1]||f,P=t.lastIndexOf(_)-E,M=t.lastIndexOf(v)-E,I=P>-1,z=M>-1,C=b.length,I||z||(t=t.substring(0,E)+t.substring(E+1),S=t.length,E=-1,C=0),I&&P>M?C=P:M>P&&(z&&C>M?C=M:I&&P>C&&(C=P)),C>-1&&(e=l(e,C))):e=l(e),M=t.indexOf(v),B=P=t.indexOf(_),Y=-1==M&&-1!=P?P:-1!=M&&-1==P?M:M>P?P:M,M=t.lastIndexOf(v),P=t.lastIndexOf(_),L=-1==M&&-1!=P?P:-1!=M&&-1==P?M:M>P?M:P,Y==S&&(L=Y),-1!=Y){if($=(""+e).split(g),w=$[0],b=$[1]||f,k=w.length,x=b.length,G&&-1*e>=0&&(G=!1),D)if(k===H&&E-B>k)w=N+w;else if(k>H){for($=f,C=0;k>C;C++)C>0&&(k-C)%H===0&&($+=N),$+=w.charAt(C);w=$}for(e=t.substring(0,Y),G&&!A&&(e+="-"),C=Y;S>C;C++){if(T=t.charAt(C),-1==E){if(k>L-C){e+=w;break}}else if(-1!=P&&C>P&&(q=f),k>=E-C&&E-C>-1&&(e+=w,C=E),E===C){e+=(b?V:f)+b,C+=L-E+1;continue}T===_?(e+=T,q=T):T===v&&(e+=q)}if(L>=Y&&(e+=t.substring(L+1)),a||s){for($=f,C=0,S=e.length;S>C;C++)T=e.charAt(C),$+="$"===T||"%"===T?o:T;e=$}if(S=j.length)for(C=0;S>C;C++)e=e.replace(y,j[C])}return e}var l,c,d=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g,u=/^(n|c|p|e)(\d*)$/i,h=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,p=/\,/g,f="",g=".",m=",",v="#",_="0",y="??",w="en-US",b={}.toString;gt.cultures["en-US"]={name:w,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0,twoDigitYearMax:2029}}},gt.culture=function(e){var i,o=gt.cultures;return e===n?o.current:(i=t(e)||o[w],i.calendar=i.calendars.standard,o.current=i,Ot&&!Ot.load&&r(i.numberFormat),n)},gt.findCulture=t,gt.getCulture=i,gt.culture(w),l=function(e,t){return t=t||0,e=(""+e).split("e"),e=Math.round(+(e[0]+"e"+(e[1]?+e[1]+t:t))),e=(""+e).split("e"),e=+(e[0]+"e"+(e[1]?+e[1]-t:-t)),e.toFixed(t)},c=function(e,t,i){if(t){if("[object Date]"===b.call(e))return a(e,t,i);if(typeof e===Mt)return s(e,t,i)}return e!==n?e:""},Ot&&!Ot.load&&(c=function(t,n,i){return e.isPlainObject(i)&&(i=i.name),Ot.format(t,n,i)}),gt.format=function(e){var t=arguments;return e.replace(St,function(e,n,i){var r=t[parseInt(n,10)+1];return c(r,i?i.substring(1):"")})},gt._extractFormat=function(e){return"{0:"===e.slice(0,3)&&(e=e.slice(3,e.length-1)),e},gt._activeElement=function(){try{return document.activeElement}catch(e){return document.documentElement.activeElement}},gt._round=l,gt.toString=c}(),function(){function t(e,t,n){return!(e>=t&&n>=e)}function i(e){return e.charAt(0)}function r(t){return e.map(t,i)}function o(e,t){t||23!==e.getHours()||e.setHours(e.getHours()+2)}function a(e){for(var t=0,n=e.length,i=[];n>t;t++)i[t]=(e[t]+"").toLowerCase();return i}function s(e){var t,n={};for(t in e)n[t]=a(e[t]);return n}function l(e,i,a){if(!e)return null;var l,c,d,u,f,g,m,_,y,w,b,k,x,C=function(e){for(var t=0;i[B]===e;)t++,B++;return t>0&&(B-=1),t},S=function(t){var n=v[t]||RegExp("^\\d{1,"+t+"}"),i=e.substr(L,t).match(n);return i?(i=i[0],L+=i.length,parseInt(i,10)):null},T=function(t,n){for(var i,r,o,a=0,s=t.length;s>a;a++)if(i=t[a],r=i.length,o=e.substr(L,r),n&&(o=o.toLowerCase()),o==i)return L+=r,a+1;return null},D=function(){var t=!1;return e.charAt(L)===i[B]&&(L++,t=!0),t},A=a.calendars.standard,E=null,M=null,P=null,I=null,z=null,F=null,R=null,B=0,L=0,O=!1,H=new Date,N=A.twoDigitYearMax||2029,V=H.getFullYear();for(i||(i="d"),u=A.patterns[i],u&&(i=u),i=i.split(""),d=i.length;d>B;B++)if(l=i[B],O)"'"===l?O=!1:D();else if("d"===l){if(c=C("d"),A._lowerDays||(A._lowerDays=s(A.days)),P=3>c?S(2):T(A._lowerDays[3==c?"namesAbbr":"names"],!0),null===P||t(P,1,31))return null}else if("M"===l){if(c=C("M"),A._lowerMonths||(A._lowerMonths=s(A.months)),M=3>c?S(2):T(A._lowerMonths[3==c?"namesAbbr":"names"],!0),null===M||t(M,1,12))return null;M-=1}else if("y"===l){if(c=C("y"),E=S(c),null===E)return null;2==c&&("string"==typeof N&&(N=V+parseInt(N,10)),E=V-V%100+E,E>N&&(E-=100))}else if("h"===l){if(C("h"),I=S(2),12==I&&(I=0),null===I||t(I,0,11))return null}else if("H"===l){if(C("H"),I=S(2),null===I||t(I,0,23))return null}else if("m"===l){if(C("m"),z=S(2),null===z||t(z,0,59))return null}else if("s"===l){if(C("s"),F=S(2),null===F||t(F,0,59))return null}else if("f"===l){if(c=C("f"),x=e.substr(L,c).match(v[3]),R=S(c),null!==R&&(x=x[0].length,3>x&&(R*=Math.pow(10,3-x)),c>3&&(R=parseInt((""+R).substring(0,3),10))),null===R||t(R,0,999))return null}else if("t"===l){if(c=C("t"),_=A.AM,y=A.PM,1===c&&(_=r(_),y=r(y)),f=T(y),!f&&!T(_))return null}else if("z"===l){if(g=!0,c=C("z"),"Z"===e.substr(L,1)){D();continue}if(m=e.substr(L,6).match(c>2?p:h),!m)return null;if(m=m[0].split(":"),w=m[0],b=m[1],!b&&w.length>3&&(L=w.length-2,b=w.substring(L),w=w.substring(0,L)),w=parseInt(w,10),t(w,-12,13))return null;if(c>2&&(b=parseInt(b,10),isNaN(b)||t(b,0,59)))return null}else if("'"===l)O=!0,D();else if(!D())return null;return k=null!==I||null!==z||F||null,null===E&&null===M&&null===P&&k?(E=V,M=H.getMonth(),P=H.getDate()):(null===E&&(E=V),null===P&&(P=1)),f&&12>I&&(I+=12),g?(w&&(I+=-w),b&&(z+=-b),e=new Date(Date.UTC(E,M,P,I,z,F,R))):(e=new Date(E,M,P,I,z,F,R),o(e,I)),100>E&&e.setFullYear(E),e.getDate()!==P&&g===n?null:e}function c(e){var t="-"===e.substr(0,1)?-1:1;return e=e.substring(1),e=60*parseInt(e.substr(0,2),10)+parseInt(e.substring(2),10),t*e}var d=/\u00A0/g,u=/[eE][\-+]?[0-9]+/,h=/[+|\-]\d{1,2}/,p=/[+|\-]\d{1,2}:?\d{2}/,f=/^\/Date\((.*?)\)\/$/,g=/[+-]\d*/,m=["G","g","d","F","D","y","m","T","t"],v={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},_={}.toString;gt.parseDate=function(e,t,n){var i,r,o,a,s;if("[object Date]"===_.call(e))return e;if(i=0,r=null,e&&0===e.indexOf("/D")&&(r=f.exec(e)))return r=r[1],s=g.exec(r.substring(1)),r=new Date(parseInt(r,10)),s&&(s=c(s[0]),r=gt.timezone.apply(r,0),r=gt.timezone.convert(r,0,-1*s)),r;if(n=gt.getCulture(n),!t){for(t=[],a=n.calendar.patterns,o=m.length;o>i;i++)t[i]=a[m[i]];i=0,t=["yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","ddd MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.fffffffzzz","yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mm:ss.fffffff","yyyy-MM-ddTHH:mm:ss.fff","yyyy-MM-ddTHH:mmzzz","yyyy-MM-ddTHH:mmzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd","HH:mm:ss","HH:mm"].concat(t)}for(t=_t(t)?t:[t],o=t.length;o>i;i++)if(r=l(e,t[i],n))return r;return r},gt.parseInt=function(e,t){var n=gt.parseFloat(e,t);return n&&(n=0|n),n},gt.parseFloat=function(e,t,n){if(!e&&0!==e)return null;if(typeof e===Mt)return e;e=""+e,t=gt.getCulture(t);var i,r,o=t.numberFormat,a=o.percent,s=o.currency,l=s.symbol,c=a.symbol,h=e.indexOf("-");return u.test(e)?(e=parseFloat(e.replace(o["."],".")),isNaN(e)&&(e=null),e):h>0?null:(h=h>-1,e.indexOf(l)>-1||n&&n.toLowerCase().indexOf("c")>-1?(o=s,i=o.pattern[0].replace("$",l).split("n"),e.indexOf(i[0])>-1&&e.indexOf(i[1])>-1&&(e=e.replace(i[0],"").replace(i[1],""),h=!0)):e.indexOf(c)>-1&&(r=!0,o=a,l=c),e=e.replace("-","").replace(l,"").replace(d," ").split(o[","].replace(d," ")).join("").replace(o["."],"."),e=parseFloat(e),isNaN(e)?e=null:h&&(e*=-1),e&&r&&(e/=100),e)},Ot&&!Ot.load&&(gt.parseDate=function(e,t,n){return"[object Date]"===_.call(e)?e:Ot.parseDate(e,t,n)},gt.parseFloat=function(t,i){return typeof t===Mt?t:t===n||null===t?null:(e.isPlainObject(i)&&(i=i.name),t=Ot.parseFloat(t,i),isNaN(t)?null:t)})}(),function(){var i,r,o,a,s,l,c;xt._scrollbar=n,xt.scrollbar=function(e){if(isNaN(xt._scrollbar)||e){var t,n=document.createElement("div");return n.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",n.innerHTML="&nbsp;",document.body.appendChild(n),xt._scrollbar=t=n.offsetWidth-n.scrollWidth,document.body.removeChild(n),t}return xt._scrollbar},xt.isRtl=function(t){return e(t).closest(".k-rtl").length>0},i=document.createElement("table");try{i.innerHTML="<tr><td></td></tr>",xt.tbodyInnerHtml=!0}catch(u){xt.tbodyInnerHtml=!1}xt.touch="ontouchstart"in t,xt.msPointers=t.MSPointerEvent,xt.pointers=t.PointerEvent,r=xt.transitions=!1,o=xt.transforms=!1,a="HTMLElement"in t?HTMLElement.prototype:[],xt.hasHW3D="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix||"MozPerspective"in document.documentElement.style||"msPerspective"in document.documentElement.style,vt(["Moz","webkit","O","ms"],function(){var e,t=""+this,a=typeof i.style[t+"Transition"]===Et;return a||typeof i.style[t+"Transform"]===Et?(e=t.toLowerCase(),o={css:"ms"!=e?"-"+e+"-":"",prefix:t,event:"o"===e||"webkit"===e?e:""},a&&(r=o,r.event=r.event?r.event+"TransitionEnd":"transitionend"),!1):n}),i=null,xt.transforms=o,xt.transitions=r,xt.devicePixelRatio=t.devicePixelRatio===n?1:t.devicePixelRatio;try{xt.screenWidth=t.outerWidth||t.screen?t.screen.availWidth:t.innerWidth,xt.screenHeight=t.outerHeight||t.screen?t.screen.availHeight:t.innerHeight}catch(u){xt.screenWidth=t.screen.availWidth,xt.screenHeight=t.screen.availHeight}xt.detectOS=function(e){var n,i,r=!1,o=[],a=!/mobile safari/i.test(e),s={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},l={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},c={tablet:/playbook|ipad|fire/i},u={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};for(i in s)if(s.hasOwnProperty(i)&&(o=e.match(s[i]))){if("windows"==i&&"plugins"in navigator)return!1;r={},r.device=i,r.tablet=d(i,c,!1),r.browser=d(e,u,"default"),r.name=d(i,l),r[r.name]=!0,r.majorVersion=o[2],r.minorVersion=o[3].replace("_","."),n=r.minorVersion.replace(".","").substr(0,2),r.flatVersion=r.majorVersion+n+Array(3-(3>n.length?n.length:2)).join("0"),r.cordova=typeof t.PhoneGap!==Ft||typeof t.cordova!==Ft,r.appMode=t.navigator.standalone||/file|local|wmapp/.test(t.location.protocol)||r.cordova,r.android&&(1.5>xt.devicePixelRatio&&400>r.flatVersion||a)&&(xt.screenWidth>800||xt.screenHeight>800)&&(r.tablet=i);break}return r},s=xt.mobileOS=xt.detectOS(navigator.userAgent),xt.wpDevicePixelRatio=s.wp?screen.width/320:0,xt.kineticScrollNeeded=s&&(xt.touch||xt.msPointers||xt.pointers),xt.hasNativeScrolling=!1,(s.ios||s.android&&s.majorVersion>2||s.wp)&&(xt.hasNativeScrolling=s),xt.mouseAndTouchPresent=xt.touch&&!(xt.mobileOS.ios||xt.mobileOS.android),xt.detectBrowser=function(e){var t,n=!1,i=[],r={webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(t in r)if(r.hasOwnProperty(t)&&(i=e.match(r[t]))){n={},n[t]=!0,n[i[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,n.version=parseInt(document.documentMode||i[2],10);break}return n},xt.browser=xt.detectBrowser(navigator.userAgent),xt.zoomLevel=function(){try{return xt.touch?document.documentElement.clientWidth/t.innerWidth:xt.browser.msie&&xt.browser.version>=10?(top||t).document.documentElement.offsetWidth/(top||t).innerWidth:1}catch(e){return 1}},xt.cssBorderSpacing=n!==document.documentElement.style.borderSpacing&&!(xt.browser.msie&&8>xt.browser.version),function(t){var n="",i=e(document.documentElement),r=parseInt(t.version,10);t.msie?n="ie":t.mozilla?n="ff":t.safari?n="safari":t.webkit?n="webkit":t.opera&&(n="opera"),n&&(n="k-"+n+" k-"+n+r),xt.mobileOS&&(n+=" k-mobile"),i.addClass(n)}(xt.browser),xt.eventCapture=document.documentElement.addEventListener,l=document.createElement("input"),xt.placeholder="placeholder"in l,xt.propertyChangeEvent="onpropertychange"in l,xt.input=function(){for(var e,t=["number","date","time","month","week","datetime","datetime-local"],n=t.length,i="test",r={},o=0;n>o;o++)e=t[o],l.setAttribute("type",e),l.value=i,r[e.replace("-","")]="text"!==l.type&&l.value!==i;return r}(),l.style.cssText="float:left;",xt.cssFloat=!!l.style.cssFloat,l=null,xt.stableSort=function(){var e,t=513,n=[{index:0,field:"b"}];for(e=1;t>e;e++)n.push({index:e,field:"a"});return n.sort(function(e,t){return e.field>t.field?1:t.field>e.field?-1:0}),1===n[0].index}(),xt.matchesSelector=a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.matchesSelector||a.matches||function(t){for(var n=document.querySelectorAll?(this.parentNode||document).querySelectorAll(t)||[]:e(t),i=n.length;i--;)if(n[i]==this)return!0;return!1},xt.pushState=t.history&&t.history.pushState,c=document.documentMode,xt.hashChange="onhashchange"in t&&!(xt.browser.msie&&(!c||8>=c))}(),V={left:{reverse:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},"in":{reverse:"out"},out:{reverse:"in"}},U={},e.extend(U,{enabled:!0,Element:function(t){this.element=e(t)},promise:function(e,t){e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.hide&&e.data("olddisplay",e.css("display")).hide(),t.init&&t.init(),t.completeCallback&&t.completeCallback(e),e.dequeue()},disable:function(){this.enabled=!1,this.promise=this.promiseShim},enable:function(){this.enabled=!0,this.promise=this.animatedPromise}}),U.promiseShim=U.promise,"kendoAnimate"in e.fn||mt(e.fn,{kendoStop:function(e,t){return this.stop(e,t)},kendoAnimate:function(e,t,n,i){return y(this,e,t,n,i)},kendoAddClass:function(e,t){return gt.toggleClass(this,e,t,!0)},kendoRemoveClass:function(e,t){return gt.toggleClass(this,e,t,!1)},kendoToggleClass:function(e,t,n){return gt.toggleClass(this,e,t,n)}}),W=/&/g,j=/</g,G=/"/g,q=/'/g,$=/>/g,Y=function(e){return e.target},xt.touch&&(Y=function(e){var t="originalEvent"in e?e.originalEvent.changedTouches:"changedTouches"in e?e.changedTouches:null;return t?document.elementFromPoint(t[0].clientX,t[0].clientY):e.target},vt(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],function(t,n){e.fn[n]=function(e){return this.bind(n,e)}})),xt.touch?xt.mobileOS?(xt.mousedown="touchstart",xt.mouseup="touchend",xt.mousemove="touchmove",xt.mousecancel="touchcancel",xt.click="touchend",xt.resize="orientationchange"):(xt.mousedown="mousedown touchstart",xt.mouseup="mouseup touchend",xt.mousemove="mousemove touchmove",xt.mousecancel="mouseleave touchcancel",xt.click="click",xt.resize="resize"):xt.pointers?(xt.mousemove="pointermove",xt.mousedown="pointerdown",xt.mouseup="pointerup",xt.mousecancel="pointercancel",xt.click="pointerup",xt.resize="orientationchange resize"):xt.msPointers?(xt.mousemove="MSPointerMove",xt.mousedown="MSPointerDown",xt.mouseup="MSPointerUp",xt.mousecancel="MSPointerCancel",xt.click="MSPointerUp",xt.resize="orientationchange resize"):(xt.mousemove="mousemove",xt.mousedown="mousedown",xt.mouseup="mouseup",xt.mousecancel="mouseleave",xt.click="click",xt.resize="resize"),K=function(e,t){var n,i,r,o,a=t||"d",s=1;for(i=0,r=e.length;r>i;i++)o=e[i],""!==o&&(n=o.indexOf("["),0!==n&&(-1==n?o="."+o:(s++,o="."+o.substring(0,n)+" || {})"+o.substring(n))),s++,a+=o+(r-1>i?" || {})":")"));return Array(s).join("(")+a},Q=/^([a-z]+:)?\/\//i,mt(gt,{ui:gt.ui||{},fx:gt.fx||v,effects:gt.effects||U,mobile:gt.mobile||{},data:gt.data||{},dataviz:gt.dataviz||{},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110},support:gt.support||xt,animate:gt.animate||y,ns:"",attr:function(e){return"data-"+gt.ns+e},getShadows:a,wrap:s,deepExtend:l,getComputedStyles:p,size:f,toCamelCase:h,toHyphens:u,getOffset:gt.getOffset||g,parseEffects:gt.parseEffects||m,toggleClass:gt.toggleClass||w,directions:gt.directions||V,Observable:z,Class:i,Template:E,template:yt(E.compile,E),render:yt(E.render,E),stringify:yt(kt.stringify,kt),eventTarget:Y,htmlEncode:b,isLocalUrl:function(e){return e&&!Q.test(e)},expr:function(e,t,n){return e=e||"",typeof t==Et&&(n=t,t=!1),n=n||"d",e&&"["!==e.charAt(0)&&(e="."+e),e=t?K(e.split("."),n):n+e},getter:function(e,t){var n=e+t;return Rt[n]=Rt[n]||Function("d","return "+gt.expr(e,t))},setter:function(e){return Bt[e]=Bt[e]||Function("d,value",gt.expr(e)+"=value")},accessor:function(e){return{get:gt.getter(e),set:gt.setter(e)}},guid:function(){var e,t,n="";for(e=0;32>e;e++)t=16*bt.random()|0,(8==e||12==e||16==e||20==e)&&(n+="-"),n+=(12==e?4:16==e?3&t|8:t).toString(16);return n},roleSelector:function(e){return e.replace(/(\S+)/g,"["+gt.attr("role")+"=$1],").slice(0,-1)},directiveSelector:function(e){var t,n=e.split(" ");if(n)for(t=0;n.length>t;t++)"view"!=n[t]&&(n[t]=n[t].replace(/(\w*)(view|bar|strip|over)$/,"$1-$2"));return n.join(" ").replace(/(\S+)/g,"kendo-mobile-$1,").slice(0,-1)},triggeredByInput:function(e){return/^(label|input|textarea|select)$/i.test(e.target.tagName)},logToConsole:function(e){var i=t.console;!gt.suppressLog&&n!==i&&i.log&&i.log(e)}}),X=z.extend({init:function(e,t){var n,i=this;i.element=gt.jQuery(e).handler(i),i.angular("init",t),z.fn.init.call(i),n=t?t.dataSource:null,n&&(t=mt({},t,{dataSource:{}})),t=i.options=mt(!0,{},i.options,t),n&&(t.dataSource=n),i.element.attr(gt.attr("role"))||i.element.attr(gt.attr("role"),(t.name||"").toLowerCase()),i.element.data("kendo"+t.prefix+t.name,i),i.bind(i.events,t)},events:[],options:{prefix:""},_hasBindingTarget:function(){return!!this.element[0].kendoBindingTarget},_tabindex:function(e){e=e||this.wrapper;var t=this.element,n="tabindex",i=e.attr(n)||t.attr(n);t.removeAttr(n),e.attr(n,isNaN(i)?0:i)},setOptions:function(t){this._setEvents(t),e.extend(this.options,t)},_setEvents:function(e){for(var t,n=this,i=0,r=n.events.length;r>i;i++)t=n.events[i],n.options[t]&&e[t]&&n.unbind(t,n.options[t]);n.bind(n.events,e)},resize:function(e){var t=this.getSize(),n=this._size;(e||!n||t.width!==n.width||t.height!==n.height)&&(this._size=t,this._resize(t),this.trigger("resize",t))},getSize:function(){return gt.dimensions(this.element)},size:function(e){return e?(this.setSize(e),n):this.getSize()},setSize:e.noop,_resize:e.noop,destroy:function(){var e=this;e.element.removeData("kendo"+e.options.prefix+e.options.name),e.element.removeData("handler"),e.unbind()},angular:function(){}}),J=X.extend({dataItems:function(){return this.dataSource.flatView()},_angularItems:function(t){var n=this;n.angular(t,function(){return{elements:n.items(),data:e.map(n.dataItems(),function(e){return{dataItem:e}})}})}}),gt.dimensions=function(e,t){var n=e[0];return t&&e.css(t),{width:n.offsetWidth,height:n.offsetHeight}},gt.notify=wt,Z=/template$/i,et=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,tt=/^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]*\]$/,nt=/([A-Z])/g,gt.initWidget=function(i,r,o){var a,s,l,c,d,u,h,p,f,g,m,v,_;if(o?o.roles&&(o=o.roles):o=gt.ui.roles,i=i.nodeType?i:i[0],u=i.getAttribute("data-"+gt.ns+"role")){f=-1===u.indexOf("."),l=f?o[u]:gt.getter(u)(t),m=e(i).data(),v=l?"kendo"+l.fn.options.prefix+l.fn.options.name:"",g=f?RegExp("^kendo.*"+u+"$","i"):RegExp("^"+v+"$","i");
for(_ in m)if(_.match(g)){if(_!==v)return m[_];a=m[_]}if(l){for(p=k(i,"dataSource"),r=e.extend({},x(i,l.fn.options),r),p&&(r.dataSource=typeof p===Et?gt.getter(p)(t):p),c=0,d=l.fn.events.length;d>c;c++)s=l.fn.events[c],h=k(i,s),h!==n&&(r[s]=gt.getter(h)(t));return a?e.isEmptyObject(r)||a.setOptions(r):a=new l(i,r),a}}},gt.rolesFromNamespaces=function(e){var t,n,i=[];for(e[0]||(e=[gt.ui,gt.dataviz.ui]),t=0,n=e.length;n>t;t++)i[t]=e[t].roles;return mt.apply(null,[{}].concat(i.reverse()))},gt.init=function(t){var n=gt.rolesFromNamespaces(Lt.call(arguments,1));e(t).find("[data-"+gt.ns+"role]").addBack().each(function(){gt.initWidget(this,{},n)})},gt.destroy=function(t){e(t).find("[data-"+gt.ns+"role]").addBack().each(function(){var t,n=e(this).data();for(t in n)0===t.indexOf("kendo")&&typeof n[t].destroy===At&&n[t].destroy()})},gt.resize=function(t,n){var i,r=e(t).find("[data-"+gt.ns+"role]").addBack().filter(S);r.length&&(i=e.makeArray(r),i.sort(C),e.each(i,function(){var t=gt.widgetInstance(e(this));t&&t.resize(n)}))},gt.parseOptions=x,mt(gt.ui,{Widget:X,DataBoundWidget:J,roles:{},progress:function(t,n){var i,r,o,a,s=t.find(".k-loading-mask"),l=gt.support,c=l.browser;n?s.length||(i=l.isRtl(t),r=i?"right":"left",a=t.scrollLeft(),o=c.webkit&&i?t[0].scrollWidth-t.width()-2*a:0,s=e("<div class='k-loading-mask'><span class='k-loading-text'>Loading...</span><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("100%").height("100%").css("top",t.scrollTop()).css(r,Math.abs(a)+o).prependTo(t)):s&&s.remove()},plugin:function(t,i,r){var o,a=t.fn.options.name;i=i||gt.ui,r=r||"",i[a]=t,i.roles[a.toLowerCase()]=t,o="getKendo"+r+a,a="kendo"+r+a,e.fn[a]=function(i){var r,o=this;return typeof i===Et?(r=Lt.call(arguments,1),this.each(function(){var t,s,l=e.data(this,a);if(!l)throw Error(gt.format("Cannot call method '{0}' of {1} before it is initialized",i,a));if(t=l[i],typeof t!==At)throw Error(gt.format("Cannot find method '{0}' of {1}",i,a));return s=t.apply(l,r),s!==n?(o=s,!1):n})):this.each(function(){new t(this,i)}),o},e.fn[a].widget=t,e.fn[o]=function(){return this.data(a)}}}),it={bind:function(){return this},nullObject:!0,options:{}},rt=X.extend({init:function(e,t){X.fn.init.call(this,e,t),this.element.autoApplyNS(),this.wrapper=this.element,this.element.addClass("km-widget")},destroy:function(){X.fn.destroy.call(this),this.element.kendoDestroy()},options:{prefix:"Mobile"},events:[],view:function(){var e=this.element.closest(gt.roleSelector("view splitview modalview drawer"));return gt.widgetInstance(e,gt.mobile.ui)||it},viewHasNativeScrolling:function(){var e=this.view();return e&&e.options.useNativeScrolling},container:function(){var e=this.element.closest(gt.roleSelector("view layout modalview drawer splitview"));return gt.widgetInstance(e.eq(0),gt.mobile.ui)||it}}),mt(gt.mobile,{init:function(e){gt.init(e,gt.mobile.ui,gt.ui,gt.dataviz.ui)},appLevelNativeScrolling:function(){return gt.mobile.application&&gt.mobile.application.options&&gt.mobile.application.options.useNativeScrolling},roles:{},ui:{Widget:rt,DataBoundWidget:J.extend(rt.prototype),roles:{},plugin:function(e){gt.ui.plugin(e,gt.mobile.ui,"Mobile")}}}),l(gt.dataviz,{init:function(e){gt.init(e,gt.dataviz.ui)},ui:{roles:{},themes:{},views:[],plugin:function(e){gt.ui.plugin(e,gt.dataviz.ui)}},roles:{}}),gt.touchScroller=function(t,n){return e(t).map(function(t,i){return i=e(i),xt.kineticScrollNeeded&&gt.mobile.ui.Scroller&&!i.data("kendoMobileScroller")?(i.kendoMobileScroller(n),i.data("kendoMobileScroller")):!1})[0]},gt.preventDefault=function(e){e.preventDefault()},gt.widgetInstance=function(e,n){var i,r,o,a,s=e.data(gt.ns+"role"),l=[];if(s){if("content"===s&&(s="scroller"),n)if(n[0])for(i=0,r=n.length;r>i;i++)l.push(n[i].roles[s]);else l.push(n.roles[s]);else l=[gt.ui.roles[s],gt.dataviz.ui.roles[s],gt.mobile.ui.roles[s]];for(s.indexOf(".")>=0&&(l=[gt.getter(s)(t)]),i=0,r=l.length;r>i;i++)if(o=l[i],o&&(a=e.data("kendo"+o.fn.options.prefix+o.fn.options.name)))return a}},gt.onResize=function(n){var i=n;return xt.mobileOS.android&&(i=function(){setTimeout(n,600)}),e(t).on(xt.resize,i),i},gt.unbindResize=function(n){e(t).off(xt.resize,n)},gt.attrValue=function(e,t){return e.data(gt.ns+t)},gt.days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},e.extend(e.expr[":"],{kendoFocusable:function(t){var n=e.attr(t,"tabindex");return T(t,!isNaN(n)&&n>-1)}}),ot=["mousedown","mousemove","mouseenter","mouseleave","mouseover","mouseout","mouseup","click"],at="label, input, [data-rel=external]",st={setupMouseMute:function(){var t,n=0,i=ot.length,r=document.documentElement;if(!st.mouseTrap&&xt.eventCapture)for(st.mouseTrap=!0,st.bustClick=!1,st.captureMouse=!1,t=function(t){st.captureMouse&&("click"===t.type?st.bustClick&&!e(t.target).is(at)&&(t.preventDefault(),t.stopPropagation()):t.stopPropagation())};i>n;n++)r.addEventListener(ot[n],t,!0)},muteMouse:function(e){st.captureMouse=!0,e.data.bustClick&&(st.bustClick=!0),clearTimeout(st.mouseTrapTimeoutID)},unMuteMouse:function(){clearTimeout(st.mouseTrapTimeoutID),st.mouseTrapTimeoutID=setTimeout(function(){st.captureMouse=!1,st.bustClick=!1},400)}},lt={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"},xt.touch&&(xt.mobileOS.ios||xt.mobileOS.android)?lt={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:xt.pointers?lt={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}:xt.msPointers&&(lt={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}),!xt.msPointers||"onmspointerenter"in t||e.each({MSPointerEnter:"MSPointerOver",MSPointerLeave:"MSPointerOut"},function(t,n){e.event.special[t]={delegateType:n,bindType:n,handle:function(t){var i,r=this,o=t.relatedTarget,a=t.handleObj;return(!o||o!==r&&!e.contains(r,o))&&(t.type=a.origType,i=a.handler.apply(this,arguments),t.type=n),i}}}),ct=function(e){return lt[e]||e},dt=/([^ ]+)/g,gt.applyEventMap=function(e,t){return e=e.replace(dt,ct),t&&(e=e.replace(dt,"$1."+t)),e},ut=e.fn.on,mt(!0,A,e),A.fn=A.prototype=new e,A.fn.constructor=A,A.fn.init=function(t,n){return n&&n instanceof e&&!(n instanceof A)&&(n=A(n)),e.fn.init.call(this,t,n,ht)},A.fn.init.prototype=A.fn,ht=A(document),mt(A.fn,{handler:function(e){return this.data("handler",e),this},autoApplyNS:function(e){return this.data("kendoNS",e||gt.guid()),this},on:function(){var e,t,n,i,r,o,a=this,s=a.data("kendoNS");return 1===arguments.length?ut.call(a,arguments[0]):(e=a,t=Lt.call(arguments),typeof t[t.length-1]===Ft&&t.pop(),n=t[t.length-1],i=gt.applyEventMap(t[0],s),xt.mouseAndTouchPresent&&i.search(/mouse|click/)>-1&&this[0]!==document.documentElement&&(st.setupMouseMute(),r=2===t.length?null:t[1],o=i.indexOf("click")>-1&&i.indexOf("touchend")>-1,ut.call(this,{touchstart:st.muteMouse,touchend:st.unMuteMouse},r,{bustClick:o})),typeof n===Et&&(e=a.data("handler"),n=e[n],t[t.length-1]=function(t){n.call(e,t)}),t[0]=i,ut.apply(a,t),a)},kendoDestroy:function(e){return e=e||this.data("kendoNS"),e&&this.off("."+e),this}}),gt.jQuery=A,gt.eventMap=lt,gt.timezone=function(){function e(e,t){var n,i,r,o=t[3],a=t[4],s=t[5],l=t[8];return l||(t[8]=l={}),l[e]?l[e]:(isNaN(a)?0===a.indexOf("last")?(n=new Date(Date.UTC(e,d[o]+1,1,s[0]-24,s[1],s[2],0)),i=u[a.substr(4,3)],r=n.getUTCDay(),n.setUTCDate(n.getUTCDate()+i-r-(i>r?7:0))):a.indexOf(">=")>=0&&(n=new Date(Date.UTC(e,d[o],a.substr(5),s[0],s[1],s[2],0)),i=u[a.substr(0,3)],r=n.getUTCDay(),n.setUTCDate(n.getUTCDate()+i-r+(r>i?7:0))):n=new Date(Date.UTC(e,d[o],a,s[0],s[1],s[2],0)),l[e]=n)}function t(t,n,i){var r,o,a,s;return(n=n[i])?(a=new Date(t).getUTCFullYear(),n=jQuery.grep(n,function(e){var t=e[0],n=e[1];return a>=t&&(n>=a||t==a&&"only"==n||"max"==n)}),n.push(t),n.sort(function(t,n){return"number"!=typeof t&&(t=+e(a,t)),"number"!=typeof n&&(n=+e(a,n)),t-n}),s=n[jQuery.inArray(t,n)-1]||n[n.length-1],isNaN(s)?s:null):(r=i.split(":"),o=0,r.length>1&&(o=60*r[0]+ +r[1]),[-1e6,"max","-","Jan",1,[0,0,0],o,"-"])}function n(e,t,n){var i,r,o,a=t[n];if("string"==typeof a&&(a=t[a]),!a)throw Error('Timezone "'+n+'" is either incorrect, or kendo.timezones.min.js is not included.');for(i=a.length-1;i>=0&&(r=a[i][3],!(r&&e>r));i--);if(o=a[i+1],!o)throw Error('Timezone "'+n+'" not found on '+e+".");return o}function i(e,i,r,o){typeof e!=Mt&&(e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));var a=n(e,i,o);return{zone:a,rule:t(e,r,a[1])}}function r(e,t){var n,r,o;return"Etc/UTC"==t||"Etc/GMT"==t?0:(n=i(e,this.zones,this.rules,t),r=n.zone,o=n.rule,gt.parseFloat(o?r[0]-o[6]:r[0]))}function o(e,t){var n=i(e,this.zones,this.rules,t),r=n.zone,o=n.rule,a=r[2];return a.indexOf("/")>=0?a.split("/")[o&&+o[6]?1:0]:a.indexOf("%s")>=0?a.replace("%s",o&&"-"!=o[7]?o[7]:""):a}function a(e,t,n){var i,r;return typeof t==Et&&(t=this.offset(e,t)),typeof n==Et&&(n=this.offset(e,n)),i=e.getTimezoneOffset(),e=new Date(e.getTime()+6e4*(t-n)),r=e.getTimezoneOffset(),new Date(e.getTime()+6e4*(r-i))}function s(e,t){return this.convert(e,e.getTimezoneOffset(),t)}function l(e,t){return this.convert(e,t,e.getTimezoneOffset())}function c(e){return this.apply(new Date(e),"Etc/UTC")}var d={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},u={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};return{zones:{},rules:{},offset:r,convert:a,apply:s,remove:l,abbr:o,toLocalDate:c}}(),gt.date=function(){function e(e,t){return 0===t&&23===e.getHours()?(e.setHours(e.getHours()+2),!0):!1}function t(t,n,i){var r=t.getHours();i=i||1,n=(n-t.getDay()+7*i)%7,t.setDate(t.getDate()+n),e(t,r)}function n(e,n,i){return e=new Date(e),t(e,n,i),e}function i(e){return new Date(e.getFullYear(),e.getMonth(),1)}function r(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0),n=i(e),r=Math.abs(t.getTimezoneOffset()-n.getTimezoneOffset());return r&&t.setHours(n.getHours()+r/60),t}function o(t){return t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),e(t,0),t}function a(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function s(e){return e.getTime()-o(e)}function l(e,t,n){var i,r=s(t),o=s(n);return e&&r!=o?(t>=n&&(n+=m),i=s(e),r>i&&(i+=m),r>o&&(o+=m),i>=r&&o>=i):!0}function c(e,t,n){var i,r=t.getTime(),o=n.getTime();return r>=o&&(o+=m),i=e.getTime(),i>=r&&o>=i}function d(t,n){var i=t.getHours();return t=new Date(t),u(t,n*m),e(t,i),t}function u(e,t,n){var i,r=e.getTimezoneOffset();e.setTime(e.getTime()+t),n||(i=e.getTimezoneOffset()-r,e.setTime(e.getTime()+i*g))}function h(){return o(new Date)}function p(e){return o(e).getTime()==h().getTime()}function f(e){var t=new Date(1980,1,1,0,0,0);return e&&t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t}var g=6e4,m=864e5;return{adjustDST:e,dayOfWeek:n,setDayOfWeek:t,getDate:o,isInDateRange:c,isInTimeRange:l,isToday:p,nextDay:function(e){return d(e,1)},previousDay:function(e){return d(e,-1)},toUtcTime:a,MS_PER_DAY:m,MS_PER_HOUR:60*g,MS_PER_MINUTE:g,setTime:u,addDays:d,today:h,toInvariantTime:f,firstDayOfMonth:i,lastDayOfMonth:r,getMilliseconds:s}}(),gt.stripWhitespace=function(e){var t,n,i;if(document.createNodeIterator)for(t=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,function(t){return t.parentNode==e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},!1);t.nextNode();)t.referenceNode&&!t.referenceNode.textContent.trim()&&t.referenceNode.parentNode.removeChild(t.referenceNode);else for(n=0;e.childNodes.length>n;n++)i=e.childNodes[n],3!=i.nodeType||/\S/.test(i.nodeValue)||(e.removeChild(i),n--),1==i.nodeType&&gt.stripWhitespace(i)},pt=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},gt.animationFrame=function(e){pt.call(t,e)},ft=[],gt.queueAnimation=function(e){ft[ft.length]=e,1===ft.length&&gt.runNextAnimation()},gt.runNextAnimation=function(){gt.animationFrame(function(){ft[0]&&(ft.shift()(),ft[0]&&gt.runNextAnimation())})},gt.parseQueryStringParams=function(e){for(var t=e.split("?")[1]||"",n={},i=t.split(/&|=/),r=i.length,o=0;r>o;o+=2)""!==i[o]&&(n[decodeURIComponent(i[o])]=decodeURIComponent(i[o+1]));return n},gt.elementUnderCursor=function(e){return document.elementFromPoint(e.x.client,e.y.client)},gt.wheelDeltaY=function(e){var t,i=e.originalEvent,r=i.wheelDeltaY;return i.wheelDelta?(r===n||r)&&(t=i.wheelDelta):i.detail&&i.axis===i.VERTICAL_AXIS&&(t=10*-i.detail),t},gt.throttle=function(e,t){var i,r=0;return!t||0>=t?e:function(){function o(){e.apply(a,l),r=+new Date}var a=this,s=+new Date-r,l=arguments;return r?(i&&clearTimeout(i),s>t?o():i=setTimeout(o,t-s),n):o()}},gt.caret=function(t,i,r){var o,a,s,l,c=i!==n;if(r===n&&(r=i),t[0]&&(t=t[0]),!c||!t.disabled){try{t.selectionStart!==n?c?(t.focus(),t.setSelectionRange(i,r)):i=[t.selectionStart,t.selectionEnd]:document.selection&&(e(t).is(":visible")&&t.focus(),o=t.createTextRange(),c?(o.collapse(!0),o.moveStart("character",i),o.moveEnd("character",r-i),o.select()):(a=o.duplicate(),o.moveToBookmark(document.selection.createRange().getBookmark()),a.setEndPoint("EndToStart",o),s=a.text.length,l=s+o.text.length,i=[s,l]))}catch(d){i=[]}return i}},gt.compileMobileDirective=function(e,n){var i=t.angular;return e.attr("data-"+gt.ns+"role",e[0].tagName.toLowerCase().replace("kendo-mobile-","").replace("-","")),i.element(e).injector().invoke(["$compile",function(t){var r=i.element(e).scope();n&&n(r),t(e)(r),r.$digest()}]),gt.widgetInstance(e,gt.mobile.ui)},function(){function n(t,n,i){var r=e("<form>").attr({action:i,method:"POST"}),o=t.split(";base64,");e("<input>").attr({value:o[0].replace("data:",""),name:"contentType",type:"hidden"}).appendTo(r),e("<input>").attr({value:o[1],name:"base64",type:"hidden"}).appendTo(r),e("<input>").attr({value:n,name:"fileName",type:"hidden"}).appendTo(r),r.appendTo("body").submit().remove()}function i(e,t){var n,i,r,o,a,s=e;if("string"==typeof e){for(n=e.split(";base64,"),i=n[0],r=atob(n[1]),o=new Uint8Array(r.length),a=0;r.length>a;a++)o[a]=r.charCodeAt(a);s=new Blob([o.buffer],{type:i})}navigator.msSaveBlob(s,t)}function r(e,n){t.Blob&&e instanceof Blob&&(e=URL.createObjectURL(e)),o.download=n,o.href=e;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(i)}var o=document.createElement("a"),a="download"in o;gt.saveAs=function(e){var t=n;e.forceProxy||(a?t=r:navigator.msSaveBlob&&(t=i)),t(e.dataURI,e.fileName,e.proxyURL)}}()}(jQuery,window),function(e,t){function n(e,t){if(!t)return e;e+"/"===t&&(e=t);var n=RegExp("^"+t,"i");return n.test(e)||(e=t+"/"+e),p.protocol+"//"+(p.host+"/"+e).replace(/\/\/+/g,"/")}function i(e){return e?"#!":"#"}function r(e){var t=p.href;return"#!"===e&&t.indexOf("#")>-1&&t.indexOf("#!")<0?null:t.split(e)[1]||""}function o(e,t){return 0===t.indexOf(e)?t.substr(e.length).replace(/\/\//g,"/"):t}function a(e){return e.replace(/^(#)?/,"#")}function s(e){return e.replace(/^(#(!)?)?/,"#!")}var l=window.kendo,c="change",d="back",u="same",h=l.support,p=window.location,f=window.history,g=50,m=l.support.browser.msie,v=/^#*/,_=window.document,y=l.Class.extend({back:function(){m?setTimeout(function(){f.back()}):f.back()},forward:function(){m?setTimeout(function(){f.forward()}):f.forward()},length:function(){return f.length},replaceLocation:function(e){p.replace(e)}}),w=y.extend({init:function(e){this.root=e},navigate:function(e){f.pushState({},_.title,n(e,this.root))},replace:function(e){f.replaceState({},_.title,n(e,this.root))},normalize:function(e){return o(this.root,e)},current:function(){var e=p.pathname;return p.search&&(e+=p.search),o(this.root,e)},change:function(t){e(window).bind("popstate.kendo",t)},stop:function(){e(window).unbind("popstate.kendo")},normalizeCurrent:function(e){var t,o=e.root,a=p.pathname,s=r(i(e.hashBang));o===a+"/"&&(t=o),o===a&&s&&(t=n(s.replace(v,""),o)),t&&f.pushState({},_.title,t)}}),b=y.extend({init:function(e){this._id=l.guid(),this.prefix=i(e),this.fix=e?s:a},navigate:function(e){p.hash=this.fix(e)},replace:function(e){this.replaceLocation(this.fix(e))},normalize:function(e){return e.indexOf(this.prefix)<0?e:e.split(this.prefix)[1]},change:function(t){h.hashChange?e(window).on("hashchange."+this._id,t):this._interval=setInterval(t,g)},stop:function(){e(window).off("hashchange."+this._id),clearInterval(this._interval)},current:function(){return r(this.prefix)},normalizeCurrent:function(e){var t=p.pathname,n=e.root;return e.pushState&&n!==t?(this.replaceLocation(n+this.prefix+o(n,t)),!0):!1}}),k=l.Observable.extend({start:function(t){if(t=t||{},this.bind([c,d,u],t),!this._started){this._started=!0,t.root=t.root||"/";var n,i=this.createAdapter(t);i.normalizeCurrent(t)||(n=i.current(),e.extend(this,{adapter:i,root:t.root,historyLength:i.length(),current:n,locations:[n]}),i.change(e.proxy(this,"_checkUrl")))}},createAdapter:function(e){return h.pushState&&e.pushState?new w(e.root):new b(e.hashBang)},stop:function(){this._started&&(this.adapter.stop(),this.unbind(c),this._started=!1)},change:function(e){this.bind(c,e)},replace:function(e,t){this._navigate(e,t,function(t){t.replace(e),this.locations[this.locations.length-1]=this.current})},navigate:function(e,n){return"#:back"===e?(this.backCalled=!0,this.adapter.back(),t):(this._navigate(e,n,function(t){t.navigate(e),this.locations.push(this.current)}),t)},_navigate:function(e,n,i){var r=this.adapter;return e=r.normalize(e),this.current===e||this.current===decodeURIComponent(e)?(this.trigger(u),t):((n||!this.trigger(c,{url:e}))&&(this.current=e,i.call(this,r),this.historyLength=r.length()),t)},_checkUrl:function(){var e=this.adapter,n=e.current(),i=e.length(),r=this.historyLength===i,o=n===this.locations[this.locations.length-2]&&r,a=this.backCalled,s=this.current;return null===n||this.current===n||this.current===decodeURIComponent(n)?!0:(this.historyLength=i,this.backCalled=!1,this.current=n,o&&this.trigger("back",{url:s,to:n})?(e.forward(),this.current=s,t):this.trigger(c,{url:n,backButtonPressed:!a})?(o?e.forward():(e.back(),this.historyLength--),this.current=s,t):(o?this.locations.pop():this.locations.push(n),t))}});l.History=k,l.History.HistoryAdapter=y,l.History.HashAdapter=b,l.History.PushStateAdapter=w,l.absoluteURL=n,l.history=new k}(window.kendo.jQuery),function(){function e(e,t){return t?e:"([^/]+)"}function t(t,n){return RegExp("^"+t.replace(f,"\\$&").replace(u,"(?:$1)?").replace(h,e).replace(p,"(.*?)")+"$",n?"i":"")}function n(e){return e.replace(/(\?.*)|(#.*)/g,"")}var i=window.kendo,r=i.history,o=i.Observable,a="init",s="routeMissing",l="change",c="back",d="same",u=/\((.*?)\)/g,h=/(\(\?)?:\w+/g,p=/\*\w+/g,f=/[\-{}\[\]+?.,\\\^$|#\s]/g,g=i.Class.extend({init:function(e,n,i){e instanceof RegExp||(e=t(e,i)),this.route=e,this._callback=n},callback:function(e){var t,r,o=0,a=i.parseQueryStringParams(e);for(e=n(e),t=this.route.exec(e).slice(1),r=t.length;r>o;o++)void 0!==t[o]&&(t[o]=decodeURIComponent(t[o]));t.push(a),this._callback.apply(null,t)},worksWith:function(e){return this.route.test(n(e))?(this.callback(e),!0):!1}}),m=o.extend({init:function(e){e||(e={}),o.fn.init.call(this),this.routes=[],this.pushState=e.pushState,this.hashBang=e.hashBang,this.root=e.root,this.ignoreCase=e.ignoreCase!==!1,this.bind([a,s,l,d],e)},destroy:function(){r.unbind(l,this._urlChangedProxy),r.unbind(d,this._sameProxy),r.unbind(c,this._backProxy),this.unbind()},start:function(){var e,t=this,n=function(){t._same()},i=function(e){t._back(e)},o=function(e){t._urlChanged(e)};r.start({same:n,change:o,back:i,pushState:t.pushState,hashBang:t.hashBang,root:t.root}),e={url:r.current||"/",preventDefault:$.noop},t.trigger(a,e)||t._urlChanged(e),this._urlChangedProxy=o,this._backProxy=i},route:function(e,t){this.routes.push(new g(e,t,this.ignoreCase))},navigate:function(e,t){i.history.navigate(e,t)},replace:function(e,t){i.history.replace(e,t)},_back:function(e){this.trigger(c,{url:e.url,to:e.to})&&e.preventDefault()},_same:function(){this.trigger(d)},_urlChanged:function(e){var t,n,r,o,a=e.url;if(a||(a="/"),this.trigger(l,{url:e.url,params:i.parseQueryStringParams(e.url),backButtonPressed:e.backButtonPressed}))return void e.preventDefault();for(t=0,n=this.routes,o=n.length;o>t;t++)if(r=n[t],r.worksWith(a))return;this.trigger(s,{url:a,params:i.parseQueryStringParams(a),backButtonPressed:e.backButtonPressed})&&e.preventDefault()}});i.Router=m}(),function(e,t){function n(r,s){var l,c,d,u,h,p,f,g,m=[],v=r.logic||"and",_=r.filters;for(l=0,c=_.length;c>l;l++)r=_[l],d=r.field,f=r.value,p=r.operator,r.filters?r=n(r,s):(g=r.ignoreCase,d=d.replace(/\./g,"/"),r=o[p],s&&(r=a[p]),r&&f!==t&&(u=e.type(f),"string"===u?(h="'{1}'",f=f.replace(/'/g,"''"),g===!0&&(d="tolower("+d+")")):h="date"===u?s?"{1:yyyy-MM-ddTHH:mm:ss+00:00}":"datetime'{1:yyyy-MM-ddTHH:mm:ss}'":"{1}",r.length>3?"substringof"!==r?h="{0}({2},"+h+")":(h="{0}("+h+",{2})","doesnotcontain"===p&&(s?(h="{0}({2},'{1}') eq -1",r="indexof"):h+=" eq false")):h="{2} {0} "+h,r=i.format(h,r,f,d))),m.push(r);return r=m.join(" "+v+" "),m.length>1&&(r="("+r+")"),r}var i=window.kendo,r=e.extend,o={eq:"eq",neq:"ne",gt:"gt",gte:"ge",lt:"lt",lte:"le",contains:"substringof",doesnotcontain:"substringof",endswith:"endswith",startswith:"startswith"},a=r({},o,{contains:"contains"}),s={pageSize:e.noop,page:e.noop,filter:function(e,t,i){t&&(e.$filter=n(t,i))},sort:function(t,n){var i=e.map(n,function(e){var t=e.field.replace(/\./g,"/");return"desc"===e.dir&&(t+=" desc"),t}).join(",");i&&(t.$orderby=i)},skip:function(e,t){t&&(e.$skip=t)},take:function(e,t){t&&(e.$top=t)}},l={read:{dataType:"jsonp"}};r(!0,i.data,{schemas:{odata:{type:"json",data:function(e){return e.d.results||[e.d]},total:"d.__count"}},transports:{odata:{read:{cache:!0,dataType:"jsonp",jsonp:"$callback"},update:{cache:!0,dataType:"json",contentType:"application/json",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(e,t,n){var r,o,a,c;if(e=e||{},t=t||"read",c=(this.options||l)[t],c=c?c.dataType:"json","read"===t){r={$inlinecount:"allpages"},"json"!=c&&(r.$format="json");for(a in e)s[a]?s[a](r,e[a],n):r[a]=e[a]}else{if("json"!==c)throw Error("Only json dataType can be used for "+t+" operation.");if("destroy"!==t){for(a in e)o=e[a],"number"==typeof o&&(e[a]=o+"");r=i.stringify(e)}}return r}}}}),r(!0,i.data,{schemas:{"odata-v4":{type:"json",data:function(e){return e.value?e.value:(delete e["odata.metadata"],[e])},total:function(e){return e["@odata.count"]}}},transports:{"odata-v4":{read:{cache:!0,dataType:"json"},update:{cache:!0,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(e,t){var n=i.data.transports.odata.parameterMap(e,t,!0);return"read"==t&&(n.$count=!0,delete n.$inlinecount),n}}}})}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=e.isArray,r=e.isPlainObject,o=e.map,a=e.each,s=e.extend,l=n.getter,c=n.Class,d=c.extend({init:function(e){var t,l,c,d,u=this,h=e.total,p=e.model,f=e.parse,g=e.errors,m=e.serialize,v=e.data;p&&(r(p)&&(t=e.modelBase||n.data.Model,p.fields&&a(p.fields,function(e,t){t=r(t)&&t.field?s(t,{field:u.getter(t.field)}):{field:u.getter(t)},p.fields[e]=t}),l=p.id,l&&(c={},c[u.xpathToMember(l,!0)]={field:u.getter(l)},p.fields=s(c,p.fields),p.id=u.xpathToMember(l)),p=t.define(p)),u.model=p),h&&("string"==typeof h?(h=u.getter(h),u.total=function(e){return parseInt(h(e),10)}):"function"==typeof h&&(u.total=h)),g&&("string"==typeof g?(g=u.getter(g),u.errors=function(e){return g(e)||null}):"function"==typeof g&&(u.errors=g)),v&&("string"==typeof v?(v=u.xpathToMember(v),u.data=function(e){var t,n=u.evaluate(e,v);return n=i(n)?n:[n],u.model&&p.fields?(t=new u.model,o(n,function(e){if(e){var n,i={};for(n in p.fields)i[n]=t._parse(n,p.fields[n].field(e));return i}})):n}):"function"==typeof v&&(u.data=v)),"function"==typeof f&&(d=u.parse,u.parse=function(e){var t=f.call(u,e);return d.call(u,t)}),"function"==typeof m&&(u.serialize=m)},total:function(e){return this.data(e).length},errors:function(e){return e?e.errors:null},serialize:function(e){return e},parseDOM:function(e){var n,r,o,a,s,l,c,d={},u=e.attributes,h=u.length;for(c=0;h>c;c++)l=u[c],d["@"+l.nodeName]=l.nodeValue;for(r=e.firstChild;r;r=r.nextSibling)o=r.nodeType,3===o||4===o?d["#text"]=r.nodeValue:1===o&&(n=this.parseDOM(r),a=r.nodeName,s=d[a],i(s)?s.push(n):s=s!==t?[s,n]:n,d[a]=s);return d},evaluate:function(e,t){for(var n,r,o,a,s,l=t.split(".");n=l.shift();)if(e=e[n],i(e)){for(r=[],t=l.join("."),s=0,o=e.length;o>s;s++)a=this.evaluate(e[s],t),a=i(a)?a:[a],r.push.apply(r,a);return r}return e},parse:function(t){var n,i,r={};return n=t.documentElement||e.parseXML(t).documentElement,i=this.parseDOM(n),r[n.nodeName]=i,r},xpathToMember:function(e,t){return e?(e=e.replace(/^\//,"").replace(/\//g,"."),e.indexOf("@")>=0?e.replace(/\.?(@.*)/,t?"$1":'["$1"]'):e.indexOf("text()")>=0?e.replace(/(\.?text\(\))/,t?"#text":'["#text"]'):e):""},getter:function(e){return l(this.xpathToMember(e),!0)}});e.extend(!0,n.data,{XmlDataReader:d,readers:{xml:d}})}(window.kendo.jQuery),function(e,t){function n(e,t,n,i){return function(r){var o,a={};for(o in r)a[o]=r[o];a.field=i?n+"."+r.field:n,t==wt&&e._notifyChange&&e._notifyChange(a),e.trigger(t,a)}}function i(t,n){if(t===n)return!0;var r,o=e.type(t),a=e.type(n);if(o!==a)return!1;if("date"===o)return t.getTime()===n.getTime();if("object"!==o&&"array"!==o)return!1;for(r in t)if(!i(t[r],n[r]))return!1;return!0}function r(e,t){var n,i;for(i in e){if(n=e[i],it(n)&&n.field&&n.field===t)return n;if(n===t)return n}return null}function o(e){this.data=e||[]}function a(e,n){if(e){var i=typeof e===ft?{field:e,dir:n}:e,r=ot(i)?i:i!==t?[i]:[];return at(r,function(e){return!!e.dir})}}function s(e){var t,n,i,r,o=e.filters;if(o)for(t=0,n=o.length;n>t;t++)i=o[t],r=i.operator,r&&typeof r===ft&&(i.operator=W[r.toLowerCase()]||r),s(i)}function l(e){return e&&!rt(e)?((ot(e)||!e.filters)&&(e={logic:"and",filters:ot(e)?e:[e]}),s(e),e):t}function c(e){return ot(e)?e:[e]}function d(e,n){var i=typeof e===ft?{field:e,dir:n}:e,r=ot(i)?i:i!==t?[i]:[];return H(r,function(e){return{field:e.field,dir:e.dir||"asc",aggregates:e.aggregates}})}function u(e,t){return e&&e.getTime&&t&&t.getTime?e.getTime()===t.getTime():e===t}function h(e,t,n,i,r,o){var a,s,l,c,d;for(t=t||[],c=t.length,a=0;c>a;a++)s=t[a],l=s.aggregate,d=s.field,e[d]=e[d]||{},o[d]=o[d]||{},o[d][l]=o[d][l]||{},e[d][l]=j[l.toLowerCase()](e[d][l],n,dt.accessor(d),i,r,o[d][l])}function p(e){return"number"==typeof e&&!isNaN(e)}function f(e){return e&&e.getTime}function g(e){var t,n=e.length,i=Array(n);for(t=0;n>t;t++)i[t]=e[t].toJSON();return i}function m(e,t,n,i,r){var o,a,s,l,c;for(l=0,c=e.length;c>l;l++){o=e[l];for(a in t)s=r[a],s&&s!==a&&(o[s]=t[a](o),delete o[a])}}function v(e,t,n,i,r){var o,a,s,l,c;for(l=0,c=e.length;c>l;l++){o=e[l];for(a in t)o[a]=n._parse(a,t[a](o)),s=r[a],s&&s!==a&&delete o[s]}}function _(e,t,n,i,r){var o,a,s,l;for(a=0,l=e.length;l>a;a++)o=e[a],s=i[o.field],s&&s!=o.field&&(o.field=s),o.value=n._parse(o.field,o.value),o.hasSubgroups?_(o.items,t,n,i,r):v(o.items,t,n,i,r)}function y(e,t,n,i,r,o){return function(a){return a=e(a),a&&!rt(i)&&("[object Array]"===Ht.call(a)||a instanceof jt||(a=[a]),n(a,i,new t,r,o)),a||[]}}function w(e,t,n,i){for(var r,o,a,s=0;t.length&&i&&(r=t[s],o=r.items,a=o.length,e&&e.field===r.field&&e.value===r.value?(e.hasSubgroups&&e.items.length?w(e.items[e.items.length-1],r.items,n,i):(o=o.slice(n,n+i),e.items=e.items.concat(o)),t.splice(s--,1)):r.hasSubgroups&&o.length?w(r,o,n,i):(o=o.slice(n,n+i),r.items=o,r.items.length||t.splice(s--,1)),0===o.length?n-=a:(n=0,i-=o.length),!(++s>=t.length)););t.length>s&&t.splice(s,t.length-s)}function b(e){var t,n,i,r,o,a=[];for(t=0,n=e.length;n>t;t++)if(o=e.at(t),o.hasSubgroups)a=a.concat(b(o.items));else for(i=o.items,r=0;i.length>r;r++)a.push(i.at(r));return a}function k(e,t){var n,i,r;if(t)for(n=0,i=e.length;i>n;n++)r=e.at(n),r.hasSubgroups?k(r.items,t):r.items=new Gt(r.items,t)}function x(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n].hasSubgroups){if(x(e[n].items,t))return!0}else if(t(e[n].items,e[n]))return!0}function C(e,t,n,i){for(var r=0;e.length>r&&e[r].data!==t&&!S(e[r].data,n,i);r++);}function S(e,t,n){for(var i=0,r=e.length;r>i;i++){if(e[i]&&e[i].hasSubgroups)return S(e[i].items,t,n);if(e[i]===t||e[i]===n)return e[i]=n,!0}}function T(e,n,i,r){var o,a,s,l;for(o=0,a=e.length;a>o;o++)if(s=e[o],s&&!(s instanceof r))if(s.hasSubgroups!==t)T(s.items,n,i,r);else for(l=0;n.length>l;l++)if(n[l]===s){e[o]=n.at(l),C(i,n,s,e[o]);break}}function D(e,t){var n,i,r;for(n=0,i=e.length;i>n;n++)if(r=e.at(n),r.uid==t.uid)return e.splice(n,1),r}function A(e,t){var n,i,r,o;for(r=e.length-1,o=0;r>=o;r--)i=e[r],n={value:t.get(i.field),field:i.field,items:n?[n]:[t],hasSubgroups:!!n,aggregates:{}};return n}function E(e,t){return t?P(e,function(e){return e.uid?e.uid==t.uid:e[t.idField]===t.id}):-1}function M(e,t){return t?P(e,function(e){return e.uid==t.uid}):-1}function P(e,t){var n,i;for(n=0,i=e.length;i>n;n++)if(t(e[n]))return n;return-1}function I(e,t){var n,i;return e&&!rt(e)?(n=e[t],i=it(n)?n.from||n.field||t:e[t]||t,ut(i)?t:i):t}function z(e,t){var n,i,r,o={};for(r in e)"filters"!==r&&(o[r]=e[r]);if(e.filters)for(o.filters=[],n=0,i=e.filters.length;i>n;n++)o.filters[n]=z(e.filters[n],t);else o.field=I(t.fields,o.field);return o}function F(e,t){var n,i,r,o,a,s=[];for(n=0,i=e.length;i>n;n++){r={},o=e[n];for(a in o)r[a]=o[a];r.field=I(t.fields,r.field),r.aggregates&&ot(r.aggregates)&&(r.aggregates=F(r.aggregates,t)),s.push(r)}return s}function R(t,n){var i,r,o,a,s,l=e(t)[0].children,c=[],d=n[0],u=n[1];for(i=0,r=l.length;r>i;i++)o={},s=l[i],s.disabled||(o[d.field]=s.text,a=s.attributes.value,a=a&&a.specified?s.value:s.text,o[u.field]=a,c.push(o));return c}function B(t,n){var i,r,o,a,s,l,c,d=e(t)[0].tBodies[0],u=d?d.rows:[],h=n.length,p=[];for(i=0,r=u.length;r>i;i++){for(s={},c=!0,a=u[i].cells,o=0;h>o;o++)l=a[o],"th"!==l.nodeName.toLowerCase()&&(c=!1,s[n[o].field]=l.innerHTML);c||p.push(s)}return p}function L(e){return function(){var t=this._data,n=K.fn[e].apply(this,Lt.call(arguments));return this._data!=t&&this._attachBubbleHandlers(),n}}function O(t,n){function i(e,t){return e.filter(t).add(e.find(t))}var r,o,a,s,l,c,d,u,h=e(t).children(),p=[],f=n[0].field,g=n[1]&&n[1].field,m=n[2]&&n[2].field,v=n[3]&&n[3].field;for(r=0,o=h.length;o>r;r++)a={_loaded:!0},s=h.eq(r),c=s[0].firstChild,u=s.children(),t=u.filter("ul"),u=u.filter(":not(ul)"),l=s.attr("data-id"),l&&(a.id=l),c&&(a[f]=3==c.nodeType?c.nodeValue:u.text()),g&&(a[g]=i(u,"a").attr("href")),v&&(a[v]=i(u,"img").attr("src")),m&&(d=i(u,".k-sprite").prop("className"),a[m]=d&&e.trim(d.replace("k-sprite",""))),t.length&&(a.items=O(t.eq(0),n)),"true"==s.attr("data-hasChildren")&&(a.hasChildren=!0),p.push(a);return p}var H,N,V,U,W,j,G,q,$,Y,K,Q,X,J,Z,et,tt=e.extend,nt=e.proxy,it=e.isPlainObject,rt=e.isEmptyObject,ot=e.isArray,at=e.grep,st=e.ajax,lt=e.each,ct=e.noop,dt=window.kendo,ut=dt.isFunction,ht=dt.Observable,pt=dt.Class,ft="string",gt="function",mt="create",vt="read",_t="update",yt="destroy",wt="change",bt="sync",kt="get",xt="error",Ct="requestStart",St="progress",Tt="requestEnd",Dt=[mt,vt,_t,yt],At=function(e){return e},Et=dt.getter,Mt=dt.stringify,Pt=Math,It=[].push,zt=[].join,Ft=[].pop,Rt=[].splice,Bt=[].shift,Lt=[].slice,Ot=[].unshift,Ht={}.toString,Nt=dt.support.stableSort,Vt=/^\/Date\((.*?)\)\/$/,Ut=/(\r+|\n+)/g,Wt=/(?=['\\])/g,jt=ht.extend({init:function(e,t){var n=this;n.type=t||qt,ht.fn.init.call(n),n.length=e.length,n.wrapAll(e,n)},at:function(e){return this[e]},toJSON:function(){var e,t,n=this.length,i=Array(n);
for(e=0;n>e;e++)t=this[e],t instanceof qt&&(t=t.toJSON()),i[e]=t;return i},parent:ct,wrapAll:function(e,t){var n,i,r=this,o=function(){return r};for(t=t||[],n=0,i=e.length;i>n;n++)t[n]=r.wrap(e[n],o);return t},wrap:function(e,t){var n,i=this;return null!==e&&"[object Object]"===Ht.call(e)&&(n=e instanceof i.type||e instanceof Kt,n||(e=e instanceof qt?e.toJSON():e,e=new i.type(e)),e.parent=t,e.bind(wt,function(e){i.trigger(wt,{field:e.field,node:e.node,index:e.index,items:e.items||[this],action:e.node?e.action||"itemchange":"itemchange"})})),e},push:function(){var e,t=this.length,n=this.wrapAll(arguments);return e=It.apply(this,n),this.trigger(wt,{action:"add",index:t,items:n}),e},slice:Lt,sort:[].sort,join:zt,pop:function(){var e=this.length,t=Ft.apply(this);return e&&this.trigger(wt,{action:"remove",index:e-1,items:[t]}),t},splice:function(e,t,n){var i,r,o,a=this.wrapAll(Lt.call(arguments,2));if(i=Rt.apply(this,[e,t].concat(a)),i.length)for(this.trigger(wt,{action:"remove",index:e,items:i}),r=0,o=i.length;o>r;r++)i[r].children&&i[r].unbind(wt);return n&&this.trigger(wt,{action:"add",index:e,items:a}),i},shift:function(){var e=this.length,t=Bt.apply(this);return e&&this.trigger(wt,{action:"remove",index:0,items:[t]}),t},unshift:function(){var e,t=this.wrapAll(arguments);return e=Ot.apply(this,t),this.trigger(wt,{action:"add",index:0,items:t}),e},indexOf:function(e){var t,n,i=this;for(t=0,n=i.length;n>t;t++)if(i[t]===e)return t;return-1},forEach:function(e){for(var t=0,n=this.length;n>t;t++)e(this[t],t,this)},map:function(e){for(var t=0,n=[],i=this.length;i>t;t++)n[t]=e(this[t],t,this);return n},filter:function(e){for(var t,n=0,i=[],r=this.length;r>n;n++)t=this[n],e(t,n,this)&&(i[i.length]=t);return i},find:function(e){for(var t,n=0,i=this.length;i>n;n++)if(t=this[n],e(t,n,this))return t},every:function(e){for(var t,n=0,i=this.length;i>n;n++)if(t=this[n],!e(t,n,this))return!1;return!0},some:function(e){for(var t,n=0,i=this.length;i>n;n++)if(t=this[n],e(t,n,this))return!0;return!1},remove:function(e){var t=this.indexOf(e);-1!==t&&this.splice(t,1)},empty:function(){this.splice(0,this.length)}}),Gt=jt.extend({init:function(e,t){ht.fn.init.call(this),this.type=t||qt;for(var n=0;e.length>n;n++)this[n]=e[n];this.length=n,this._parent=nt(function(){return this},this)},at:function(e){var t=this[e];return t instanceof this.type?t.parent=this._parent:t=this[e]=this.wrap(t,this._parent),t}}),qt=ht.extend({init:function(e){var t,n,i=this,r=function(){return i};ht.fn.init.call(this);for(n in e)t=e[n],"object"==typeof t&&t&&!t.getTime&&"_"!=n.charAt(0)&&(t=i.wrap(t,n,r)),i[n]=t;i.uid=dt.guid()},shouldSerialize:function(e){return this.hasOwnProperty(e)&&"_events"!==e&&typeof this[e]!==gt&&"uid"!==e},forEach:function(e){for(var t in this)this.shouldSerialize(t)&&e(this[t],t)},toJSON:function(){var e,t,n={};for(t in this)this.shouldSerialize(t)&&(e=this[t],(e instanceof qt||e instanceof jt)&&(e=e.toJSON()),n[t]=e);return n},get:function(e){var t,n=this;return n.trigger(kt,{field:e}),t="this"===e?n:dt.getter(e,!0)(n)},_set:function(e,t){var n,i,r,o=this,a=e.indexOf(".")>=0;if(a)for(n=e.split("."),i="";n.length>1;){if(i+=n.shift(),r=dt.getter(i,!0)(o),r instanceof qt)return r.set(n.join("."),t),a;i+="."}return dt.setter(e)(o,t),a},set:function(e,t){var n=this,i=e.indexOf(".")>=0,r=dt.getter(e,!0)(n);r!==t&&(n.trigger("set",{field:e,value:t})||(i||(t=n.wrap(t,e,function(){return n})),(!n._set(e,t)||e.indexOf("(")>=0||e.indexOf("[")>=0)&&n.trigger(wt,{field:e})))},parent:ct,wrap:function(e,t,i){var r,o,a=this,s=Ht.call(e);return null==e||"[object Object]"!==s&&"[object Array]"!==s||(r=e instanceof jt,o=e instanceof K,"[object Object]"!==s||o||r?("[object Array]"===s||r||o)&&(r||o||(e=new jt(e)),e.parent()!=i()&&e.bind(wt,n(a,wt,t,!1))):(e instanceof qt||(e=new qt(e)),e.parent()!=i()&&(e.bind(kt,n(a,kt,t,!0)),e.bind(wt,n(a,wt,t,!0)))),e.parent=i),e}}),$t={number:function(e){return dt.parseFloat(e)},date:function(e){return dt.parseDate(e)},"boolean":function(e){return typeof e===ft?"true"===e.toLowerCase():null!=e?!!e:e},string:function(e){return null!=e?e+"":e},"default":function(e){return e}},Yt={string:"",number:0,date:new Date,"boolean":!1,"default":""},Kt=qt.extend({init:function(n){var i,r,o=this;if((!n||e.isEmptyObject(n))&&(n=e.extend({},o.defaults,n),o._initializers))for(i=0;o._initializers.length>i;i++)r=o._initializers[i],n[r]=o.defaults[r]();qt.fn.init.call(o,n),o.dirty=!1,o.idField&&(o.id=o.get(o.idField),o.id===t&&(o.id=o._defaultId))},shouldSerialize:function(e){return qt.fn.shouldSerialize.call(this,e)&&"uid"!==e&&!("id"!==this.idField&&"id"===e)&&"dirty"!==e&&"_accessors"!==e},_parse:function(e,t){var n,i=this,o=e,a=i.fields||{};return e=a[e],e||(e=r(a,o)),e&&(n=e.parse,!n&&e.type&&(n=$t[e.type.toLowerCase()])),n?n(t):t},_notifyChange:function(e){var t=e.action;("add"==t||"remove"==t)&&(this.dirty=!0)},editable:function(e){return e=(this.fields||{})[e],e?e.editable!==!1:!0},set:function(e,t,n){var r=this;r.editable(e)&&(t=r._parse(e,t),i(t,r.get(e))||(r.dirty=!0,qt.fn.set.call(r,e,t,n)))},accept:function(e){var t,n,i=this,r=function(){return i};for(t in e)n=e[t],"_"!=t.charAt(0)&&(n=i.wrap(e[t],t,r)),i._set(t,n);i.idField&&(i.id=i.get(i.idField)),i.dirty=!1},isNew:function(){return this.id===this._defaultId}});Kt.define=function(e,n){n===t&&(n=e,e=Kt);var i,r,o,a,s,l,c,d,u=tt({defaults:{}},n),h={},p=u.id,f=[];if(p&&(u.idField=p),u.id&&delete u.id,p&&(u.defaults[p]=u._defaultId=""),"[object Array]"===Ht.call(u.fields)){for(l=0,c=u.fields.length;c>l;l++)o=u.fields[l],typeof o===ft?h[o]={}:o.field&&(h[o.field]=o);u.fields=h}for(r in u.fields)o=u.fields[r],a=o.type||"default",s=null,d=r,r=typeof o.field===ft?o.field:r,o.nullable||(s=u.defaults[d!==r?d:r]=o.defaultValue!==t?o.defaultValue:Yt[a.toLowerCase()],"function"==typeof s&&f.push(r)),n.id===r&&(u._defaultId=s),u.defaults[d!==r?d:r]=s,o.parse=o.parse||$t[a];return f.length>0&&(u._initializers=f),i=e.extend(u),i.define=function(e){return Kt.define(i,e)},u.fields&&(i.fields=u.fields,i.idField=u.idField),i},N={selector:function(e){return ut(e)?e:Et(e)},compare:function(e){var t=this.selector(e);return function(e,n){return e=t(e),n=t(n),null==e&&null==n?0:null==e?-1:null==n?1:e.localeCompare?e.localeCompare(n):e>n?1:n>e?-1:0}},create:function(e){var t=e.compare||this.compare(e.field);return"desc"==e.dir?function(e,n){return t(n,e,!0)}:t},combine:function(e){return function(t,n){var i,r,o=e[0](t,n);for(i=1,r=e.length;r>i;i++)o=o||e[i](t,n);return o}}},V=tt({},N,{asc:function(e){var t=this.selector(e);return function(e,n){var i=t(e),r=t(n);return i&&i.getTime&&r&&r.getTime&&(i=i.getTime(),r=r.getTime()),i===r?e.__position-n.__position:null==i?-1:null==r?1:i.localeCompare?i.localeCompare(r):i>r?1:-1}},desc:function(e){var t=this.selector(e);return function(e,n){var i=t(e),r=t(n);return i&&i.getTime&&r&&r.getTime&&(i=i.getTime(),r=r.getTime()),i===r?e.__position-n.__position:null==i?1:null==r?-1:r.localeCompare?r.localeCompare(i):r>i?1:-1}},create:function(e){return this[e.dir](e.field)}}),H=function(e,t){var n,i=e.length,r=Array(i);for(n=0;i>n;n++)r[n]=t(e[n],n,e);return r},U=function(){function e(e){return e.replace(Wt,"\\").replace(Ut,"")}function t(t,n,i,r){var o;return null!=i&&(typeof i===ft&&(i=e(i),o=Vt.exec(i),o?i=new Date(+o[1]):r?(i="'"+i.toLowerCase()+"'",n="("+n+" || '').toLowerCase()"):i="'"+i+"'"),i.getTime&&(n="("+n+"?"+n+".getTime():"+n+")",i=i.getTime())),n+" "+t+" "+i}return{eq:function(e,n,i){return t("==",e,n,i)},neq:function(e,n,i){return t("!=",e,n,i)},gt:function(e,n,i){return t(">",e,n,i)},gte:function(e,n,i){return t(">=",e,n,i)},lt:function(e,n,i){return t("<",e,n,i)},lte:function(e,n,i){return t("<=",e,n,i)},startswith:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".lastIndexOf('"+n+"', 0) == 0"},endswith:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"', "+t+".length - "+(n||"").length+") >= 0"},contains:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"') >= 0"},doesnotcontain:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"') == -1"}}}(),o.filterExpr=function(e){var n,i,r,a,s,l,c=[],d={and:" && ",or:" || "},u=[],h=[],p=e.filters;for(n=0,i=p.length;i>n;n++)r=p[n],s=r.field,l=r.operator,r.filters?(a=o.filterExpr(r),r=a.expression.replace(/__o\[(\d+)\]/g,function(e,t){return t=+t,"__o["+(h.length+t)+"]"}).replace(/__f\[(\d+)\]/g,function(e,t){return t=+t,"__f["+(u.length+t)+"]"}),h.push.apply(h,a.operators),u.push.apply(u,a.fields)):(typeof s===gt?(a="__f["+u.length+"](d)",u.push(s)):a=dt.expr(s),typeof l===gt?(r="__o["+h.length+"]("+a+", "+r.value+")",h.push(l)):r=U[(l||"eq").toLowerCase()](a,r.value,r.ignoreCase!==t?r.ignoreCase:!0)),c.push(r);return{expression:"("+c.join(d[e.logic])+")",fields:u,operators:h}},W={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain"},o.normalizeFilter=l,o.prototype={toArray:function(){return this.data},range:function(e,t){return new o(this.data.slice(e,e+t))},skip:function(e){return new o(this.data.slice(e))},take:function(e){return new o(this.data.slice(0,e))},select:function(e){return new o(H(this.data,e))},order:function(e,t){var n={dir:t};return e&&(e.compare?n.compare=e.compare:n.field=e),new o(this.data.slice(0).sort(N.create(n)))},orderBy:function(e){return this.order(e,"asc")},orderByDescending:function(e){return this.order(e,"desc")},sort:function(e,t,n){var i,r,o=a(e,t),s=[];if(n=n||N,o.length){for(i=0,r=o.length;r>i;i++)s.push(n.create(o[i]));return this.orderBy({compare:n.combine(s)})}return this},filter:function(e){var t,n,i,r,a,s,c,d,u=this.data,h=[];if(e=l(e),!e||0===e.filters.length)return this;for(r=o.filterExpr(e),s=r.fields,c=r.operators,a=d=Function("d, __f, __o","return "+r.expression),(s.length||c.length)&&(d=function(e){return a(e,s,c)}),t=0,i=u.length;i>t;t++)n=u[t],d(n)&&h.push(n);return new o(h)},group:function(e,t){e=d(e||[]),t=t||this.data;var n,i=this,r=new o(i.data);return e.length>0&&(n=e[0],r=r.groupBy(n).select(function(i){var r=new o(t).filter([{field:i.field,operator:"eq",value:i.value,ignoreCase:!1}]);return{field:i.field,value:i.value,items:e.length>1?new o(i.items).group(e.slice(1),r.toArray()).toArray():i.items,hasSubgroups:e.length>1,aggregates:r.aggregate(n.aggregates)}})),r},groupBy:function(e){if(rt(e)||!this.data.length)return new o([]);var t,n,i,r,a=e.field,s=this._sortForGrouping(a,e.dir||"asc"),l=dt.accessor(a),c=l.get(s[0],a),d={field:a,value:c,items:[]},h=[d];for(i=0,r=s.length;r>i;i++)t=s[i],n=l.get(t,a),u(c,n)||(c=n,d={field:a,value:c,items:[]},h.push(d)),d.items.push(t);return new o(h)},_sortForGrouping:function(e,t){var n,i,r=this.data;if(!Nt){for(n=0,i=r.length;i>n;n++)r[n].__position=n;for(r=new o(r).sort(e,t,V).toArray(),n=0,i=r.length;i>n;n++)delete r[n].__position;return r}return this.sort(e,t).toArray()},aggregate:function(e){var t,n,i={},r={};if(e&&e.length)for(t=0,n=this.data.length;n>t;t++)h(i,e,this.data[t],t,n,r);return i}},j={sum:function(e,t,n){var i=n.get(t);return p(e)?p(i)&&(e+=i):e=i,e},count:function(e){return(e||0)+1},average:function(e,n,i,r,o,a){var s=i.get(n);return a.count===t&&(a.count=0),p(e)?p(s)&&(e+=s):e=s,p(s)&&a.count++,r==o-1&&p(e)&&(e/=a.count),e},max:function(e,t,n){var i=n.get(t);return p(e)||f(e)||(e=i),i>e&&(p(i)||f(i))&&(e=i),e},min:function(e,t,n){var i=n.get(t);return p(e)||f(e)||(e=i),e>i&&(p(i)||f(i))&&(e=i),e}},o.process=function(e,n){n=n||{};var i,r=new o(e),s=n.group,l=d(s||[]).concat(a(n.sort||[])),c=n.filterCallback,u=n.filter,h=n.skip,p=n.take;return u&&(r=r.filter(u),c&&(r=c(r)),i=r.toArray().length),l&&(r=r.sort(l),s&&(e=r.toArray())),h!==t&&p!==t&&(r=r.range(h,p)),s&&(r=r.group(s,e)),{total:i,data:r.toArray()}},G=pt.extend({init:function(e){this.data=e.data},read:function(e){e.success(this.data)},update:function(e){e.success(e.data)},create:function(e){e.success(e.data)},destroy:function(e){e.success(e.data)}}),q=pt.extend({init:function(e){var t,n=this;e=n.options=tt({},n.options,e),lt(Dt,function(t,n){typeof e[n]===ft&&(e[n]={url:e[n]})}),n.cache=e.cache?$.create(e.cache):{find:ct,add:ct},t=e.parameterMap,ut(e.push)&&(n.push=e.push),n.push||(n.push=At),n.parameterMap=ut(t)?t:function(e){var n={};return lt(e,function(e,i){e in t&&(e=t[e],it(e)&&(i=e.value(i),e=e.key)),n[e]=i}),n}},options:{parameterMap:At},create:function(e){return st(this.setup(e,mt))},read:function(n){var i,r,o,a=this,s=a.cache;n=a.setup(n,vt),i=n.success||ct,r=n.error||ct,o=s.find(n.data),o!==t?i(o):(n.success=function(e){s.add(n.data,e),i(e)},e.ajax(n))},update:function(e){return st(this.setup(e,_t))},destroy:function(e){return st(this.setup(e,yt))},setup:function(e,t){e=e||{};var n,i=this,r=i.options[t],o=ut(r.data)?r.data(e.data):r.data;return e=tt(!0,{},r,e),n=tt(!0,{},o,e.data),e.data=i.parameterMap(n,t),ut(e.url)&&(e.url=e.url(n)),e}}),$=pt.extend({init:function(){this._store={}},add:function(e,n){e!==t&&(this._store[Mt(e)]=n)},find:function(e){return this._store[Mt(e)]},clear:function(){this._store={}},remove:function(e){delete this._store[Mt(e)]}}),$.create=function(e){var t={inmemory:function(){return new $}};return it(e)&&ut(e.find)?e:e===!0?new $:t[e]()},Y=pt.extend({init:function(e){var t,n,i,r,o,a,s,l,c,d,u,h,p,f=this;e=e||{};for(t in e)n=e[t],f[t]=typeof n===ft?Et(n):n;r=e.modelBase||Kt,it(f.model)&&(f.model=i=r.define(f.model)),o=nt(f.data,f),f._dataAccessFunction=o,f.model&&(a=nt(f.groups,f),s=nt(f.serialize,f),l={},c={},d={},u={},h=!1,i=f.model,i.fields&&(lt(i.fields,function(e,t){var n;p=e,it(t)&&t.field?p=t.field:typeof t===ft&&(p=t),it(t)&&t.from&&(n=t.from),h=h||n&&n!==e||p!==e,c[e]=Et(n||p),d[e]=Et(e),l[n||p]=e,u[e]=n||p}),!e.serialize&&h&&(f.serialize=y(s,i,m,d,l,u))),f._dataAccessFunction=o,f.data=y(o,i,v,c,l,u),f.groups=y(a,i,_,c,l,u))},errors:function(e){return e?e.errors:null},parse:At,data:At,total:function(e){return e.length},groups:At,aggregates:function(){return{}},serialize:function(e){return e}}),K=ht.extend({init:function(e){var n,i,r,o=this;e&&(i=e.data),e=o.options=tt({},o.options,e),o._map={},o._prefetch={},o._data=[],o._pristineData=[],o._ranges=[],o._view=[],o._pristineTotal=0,o._destroyed=[],o._pageSize=e.pageSize,o._page=e.page||(e.pageSize?1:t),o._sort=a(e.sort),o._filter=l(e.filter),o._group=d(e.group),o._aggregate=e.aggregate,o._total=e.total,o._shouldDetachObservableParents=!0,ht.fn.init.call(o),o.transport=Q.create(e,i),ut(o.transport.push)&&o.transport.push({pushCreate:nt(o._pushCreate,o),pushUpdate:nt(o._pushUpdate,o),pushDestroy:nt(o._pushDestroy,o)}),null!=e.offlineStorage&&("string"==typeof e.offlineStorage?(r=e.offlineStorage,o._storage={getItem:function(){return JSON.parse(localStorage.getItem(r))},setItem:function(e){localStorage.setItem(r,Mt(e))}}):o._storage=e.offlineStorage),o.reader=new dt.data.readers[e.schema.type||"json"](e.schema),n=o.reader.model||{},o._detachObservableParents(),o._data=o._observe(o._data),o._online=!0,o.bind(["push",xt,wt,Ct,bt,Tt,St],e)},options:{data:null,schema:{modelBase:Kt},offlineStorage:null,serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,batch:!1},online:function(e){return e===t?this._online:(this._online!=e&&(this._online=e,e&&this.sync()),t)},offlineData:function(e){return null==this.options.offlineStorage?null:e!==t?this._storage.setItem(e):this._storage.getItem()||{}},_isServerGrouped:function(){var e=this.group()||[];return this.options.serverGrouping&&e.length},_pushCreate:function(e){this._push(e,"pushCreate")},_pushUpdate:function(e){this._push(e,"pushUpdate")},_pushDestroy:function(e){this._push(e,"pushDestroy")},_push:function(e,t){var n=this._readData(e);n||(n=e),this[t](n)},_flatData:function(e,t){if(e){if(this._isServerGrouped())return b(e);if(!t)for(var n=0;e.length>n;n++)e.at(n)}return e},parent:ct,get:function(e){var t,n,i=this._flatData(this._data);for(t=0,n=i.length;n>t;t++)if(i[t].id==e)return i[t]},getByUid:function(e){var t,n,i=this._flatData(this._data);if(i)for(t=0,n=i.length;n>t;t++)if(i[t].uid==e)return i[t]},indexOf:function(e){return M(this._data,e)},at:function(e){return this._data.at(e)},data:function(e){var n,i=this;if(e===t){if(i._data)for(n=0;i._data.length>n;n++)i._data.at(n);return i._data}i._detachObservableParents(),i._data=this._observe(e),i._pristineData=e.slice(0),i._storeData(),i._ranges=[],i.trigger("reset"),i._addRange(i._data),i._total=i._data.length,i._pristineTotal=i._total,i._process(i._data)},view:function(e){return e===t?this._view:(this._view=this._observeView(e),t)},_observeView:function(e){return T(e,this._data,this._ranges,this.reader.model||qt),new Gt(e,this.reader.model)},flatView:function(){var e=this.group()||[];return e.length?b(this._view):this._view},add:function(e){return this.insert(this._data.length,e)},_createNewModel:function(e){return this.reader.model?new this.reader.model(e):e instanceof qt?e:new qt(e)},insert:function(e,t){return t||(t=e,e=0),t instanceof Kt||(t=this._createNewModel(t)),this._isServerGrouped()?this._data.splice(e,0,A(this.group(),t)):this._data.splice(e,0,t),t},pushCreate:function(e){var t,n,i,r,o,a;ot(e)||(e=[e]),t=[],n=this.options.autoSync,this.options.autoSync=!1;try{for(i=0;e.length>i;i++)r=e[i],o=this.add(r),t.push(o),a=o.toJSON(),this._isServerGrouped()&&(a=A(this.group(),a)),this._pristineData.push(a)}finally{this.options.autoSync=n}t.length&&this.trigger("push",{type:"create",items:t})},pushUpdate:function(e){var t,n,i,r,o;for(ot(e)||(e=[e]),t=[],n=0;e.length>n;n++)i=e[n],r=this._createNewModel(i),o=this.get(r.id),o?(t.push(o),o.accept(i),o.trigger("change"),this._updatePristineForModel(o,i)):this.pushCreate(i);t.length&&this.trigger("push",{type:"update",items:t})},pushDestroy:function(e){var t=this._removeItems(e);t.length&&this.trigger("push",{type:"destroy",items:t})},_removeItems:function(e){var t,n,i,r,o,a;ot(e)||(e=[e]),t=[],n=this.options.autoSync,this.options.autoSync=!1;try{for(i=0;e.length>i;i++)r=e[i],o=this._createNewModel(r),a=!1,this._eachItem(this._data,function(e){var n,i;for(n=0;e.length>n;n++)if(i=e.at(n),i.id===o.id){t.push(i),e.splice(n,1),a=!0;break}}),a&&(this._removePristineForModel(o),this._destroyed.pop())}finally{this.options.autoSync=n}return t},remove:function(e){var n,i=this,r=i._isServerGrouped();return this._eachItem(i._data,function(o){return n=D(o,e),n&&r?(n.isNew&&n.isNew()||i._destroyed.push(n),!0):t}),this._removeModelFromRanges(e),this._updateRangesLength(),e},sync:function(){var t,n,i,r,o=this,a=[],s=[],l=o._destroyed,c=o._flatData(o._data);if(o.online()){if(!o.reader.model)return;for(t=0,n=c.length;n>t;t++)c[t].isNew()?a.push(c[t]):c[t].dirty&&s.push(c[t]);r=[],r.push.apply(r,o._send("create",a)),r.push.apply(r,o._send("update",s)),r.push.apply(r,o._send("destroy",l)),i=e.when.apply(null,r).then(function(){var e,t;for(e=0,t=arguments.length;t>e;e++)o._accept(arguments[e]);o._storeData(!0),o._change({action:"sync"}),o.trigger(bt)})}else o._storeData(!0),o._change({action:"sync"}),i=e.Deferred().resolve().promise();return i},cancelChanges:function(e){var t=this;e instanceof dt.data.Model?t._cancelModel(e):(t._destroyed=[],t._detachObservableParents(),t._data=t._observe(t._pristineData),t.options.serverPaging&&(t._total=t._pristineTotal),t._change())},hasChanges:function(){var e,t,n=this._data;if(this._destroyed.length)return!0;for(e=0,t=n.length;t>e;e++)if(n[e].isNew()||n[e].dirty)return!0;return!1},_accept:function(t){var n,i=this,r=t.models,o=t.response,a=0,s=i._isServerGrouped(),l=i._pristineData,c=t.type;if(i.trigger(Tt,{response:o,type:c}),o&&!rt(o)){if(o=i.reader.parse(o),i._handleCustomErrors(o))return;o=i.reader.data(o),ot(o)||(o=[o])}else o=e.map(r,function(e){return e.toJSON()});for("destroy"===c&&(i._destroyed=[]),a=0,n=r.length;n>a;a++)"destroy"!==c?(r[a].accept(o[a]),"create"===c?l.push(s?A(i.group(),r[a]):o[a]):"update"===c&&i._updatePristineForModel(r[a],o[a])):i._removePristineForModel(r[a])},_updatePristineForModel:function(e,t){this._executeOnPristineForModel(e,function(e,n){dt.deepExtend(n[e],t)})},_executeOnPristineForModel:function(e,n){this._eachPristineItem(function(i){var r=E(i,e);return r>-1?(n(r,i),!0):t})},_removePristineForModel:function(e){this._executeOnPristineForModel(e,function(e,t){t.splice(e,1)})},_readData:function(e){var t=this._isServerGrouped()?this.reader.groups:this.reader.data;return t.call(this.reader,e)},_eachPristineItem:function(e){this._eachItem(this._pristineData,e)},_eachItem:function(e,t){e&&e.length&&(this._isServerGrouped()?x(e,t):t(e))},_pristineForModel:function(e){var n,i,r=function(r){return i=E(r,e),i>-1?(n=r[i],!0):t};return this._eachPristineItem(r),n},_cancelModel:function(e){var t=this._pristineForModel(e);this._eachItem(this._data,function(n){var i=M(n,e);i>=0&&(!t||e.isNew()&&!t.__state__?n.splice(i,1):n[i].accept(t))})},_promise:function(t,n,i){var r=this;return e.Deferred(function(e){r.trigger(Ct,{type:i}),r.transport[i].call(r.transport,tt({success:function(t){e.resolve({response:t,models:n,type:i})},error:function(t,n,i){e.reject(t),r.error(t,n,i)}},t))}).promise()},_send:function(e,t){var n,i,r=this,o=[],a=r.reader.serialize(g(t));if(r.options.batch)t.length&&o.push(r._promise({data:{models:a}},t,e));else for(n=0,i=t.length;i>n;n++)o.push(r._promise({data:a[n]},[t[n]],e));return o},read:function(t){var n=this,i=n._params(t),r=e.Deferred();return n._queueRequest(i,function(){n.trigger(Ct,{type:"read"})?(n._dequeueRequest(),r.resolve()):(n.trigger(St),n._ranges=[],n.trigger("reset"),n.online()?n.transport.read({data:i,success:function(e){n.success(e),r.resolve()},error:function(){var e=Lt.call(arguments);n.error.apply(n,e),r.reject.apply(r,e)}}):null!=n.options.offlineStorage&&(n.success(n.offlineData()),r.resolve()))}),r.promise()},_readAggregates:function(e){return this.reader.aggregates(e)},success:function(e){var n,i,r,o,a=this,s=a.options;if(a.trigger(Tt,{response:e,type:"read"}),a.online()){if(e=a.reader.parse(e),a._handleCustomErrors(e))return a._dequeueRequest(),t;a._total=a.reader.total(e),a._aggregate&&s.serverAggregates&&(a._aggregateResult=a._readAggregates(e)),e=a._readData(e)}else{for(e=a._readData(e),n=[],i=0;e.length>i;i++)r=e[i],o=r.__state__,"destroy"==o?this._destroyed.push(this._createNewModel(r)):n.push(r);e=n,a._total=e.length}a._pristineTotal=a._total,a._pristineData=e.slice(0),a._detachObservableParents(),a._data=a._observe(e),null!=a.options.offlineStorage&&a._eachItem(a._data,function(e){var t,n;for(t=0;e.length>t;t++)n=e.at(t),"update"==n.__state__&&(n.dirty=!0)}),a._storeData(),a._addRange(a._data),a._process(a._data),a._dequeueRequest()},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents)for(var e=0;this._data.length>e;e++)this._data[e].parent&&(this._data[e].parent=ct)},_storeData:function(e){function t(e){var n,i,r,s=[];for(n=0;e.length>n;n++)i=e.at(n),r=i.toJSON(),o&&i.items?r.items=t(i.items):(r.uid=i.uid,a&&(i.isNew()?r.__state__="create":i.dirty&&(r.__state__="update"))),s.push(r);return s}var n,i,r,o=this._isServerGrouped(),a=this.reader.model;if(null!=this.options.offlineStorage){for(n=t(this._data),i=0;this._destroyed.length>i;i++)r=this._destroyed[i].toJSON(),r.__state__="destroy",n.push(r);this.offlineData(n),e&&(this._pristineData=n)}},_addRange:function(e){var t=this,n=t._skip||0,i=n+t._flatData(e,!0).length;t._ranges.push({start:n,end:i,data:e}),t._ranges.sort(function(e,t){return e.start-t.start})},error:function(e,t,n){this._dequeueRequest(),this.trigger(Tt,{}),this.trigger(xt,{xhr:e,status:t,errorThrown:n})},_params:function(e){var t=this,n=tt({take:t.take(),skip:t.skip(),page:t.page(),pageSize:t.pageSize(),sort:t._sort,filter:t._filter,group:t._group,aggregate:t._aggregate},e);return t.options.serverPaging||(delete n.take,delete n.skip,delete n.page,delete n.pageSize),t.options.serverGrouping?t.reader.model&&n.group&&(n.group=F(n.group,t.reader.model)):delete n.group,t.options.serverFiltering?t.reader.model&&n.filter&&(n.filter=z(n.filter,t.reader.model)):delete n.filter,t.options.serverSorting?t.reader.model&&n.sort&&(n.sort=F(n.sort,t.reader.model)):delete n.sort,t.options.serverAggregates?t.reader.model&&n.aggregate&&(n.aggregate=F(n.aggregate,t.reader.model)):delete n.aggregate,n},_queueRequest:function(e,n){var i=this;i._requestInProgress?i._pending={callback:nt(n,i),options:e}:(i._requestInProgress=!0,i._pending=t,n())},_dequeueRequest:function(){var e=this;e._requestInProgress=!1,e._pending&&e._queueRequest(e._pending.options,e._pending.callback)},_handleCustomErrors:function(e){if(this.reader.errors){var t=this.reader.errors(e);if(t)return this.trigger(xt,{xhr:null,status:"customerror",errorThrown:"custom error",errors:t}),!0}return!1},_observe:function(e){var t,n=this,i=n.reader.model,r=!1;return n._shouldDetachObservableParents=!0,i&&e.length&&(r=!(e[0]instanceof i)),e instanceof jt?(n._shouldDetachObservableParents=!1,r&&(e.type=n.reader.model,e.wrapAll(e,e))):(t=n.pageSize()?Gt:jt,e=new t(e,n.reader.model),e.parent=function(){return n.parent()}),n._isServerGrouped()&&k(e,i),n._changeHandler&&n._data&&n._data instanceof jt?n._data.unbind(wt,n._changeHandler):n._changeHandler=nt(n._change,n),e.bind(wt,n._changeHandler)},_change:function(e){var t,n,i,r=this,o=e?e.action:"";if("remove"===o)for(t=0,n=e.items.length;n>t;t++)e.items[t].isNew&&e.items[t].isNew()||r._destroyed.push(e.items[t]);!r.options.autoSync||"add"!==o&&"remove"!==o&&"itemchange"!==o?(i=parseInt(r._total,10),p(r._total)||(i=parseInt(r._pristineTotal,10)),"add"===o?i+=e.items.length:"remove"===o?i-=e.items.length:"itemchange"===o||"sync"===o||r.options.serverPaging?"sync"===o&&(i=r._pristineTotal=parseInt(r._total,10)):i=r._pristineTotal,r._total=i,r._process(r._data,e)):r.sync()},_calculateAggregates:function(e,t){t=t||{};var n=new o(e),i=t.aggregate,r=t.filter;return r&&(n=n.filter(r)),n.aggregate(i)},_process:function(e,n){var i,r=this,o={};r.options.serverPaging!==!0&&(o.skip=r._skip,o.take=r._take||r._pageSize,o.skip===t&&r._page!==t&&r._pageSize!==t&&(o.skip=(r._page-1)*r._pageSize)),r.options.serverSorting!==!0&&(o.sort=r._sort),r.options.serverFiltering!==!0&&(o.filter=r._filter),r.options.serverGrouping!==!0&&(o.group=r._group),r.options.serverAggregates!==!0&&(o.aggregate=r._aggregate,r._aggregateResult=r._calculateAggregates(e,o)),i=r._queryProcess(e,o),r.view(i.data),i.total===t||r.options.serverFiltering||(r._total=i.total),n=n||{},n.items=n.items||r._view,r.trigger(wt,n)},_queryProcess:function(e,t){return o.process(e,t)},_mergeState:function(e){var n=this;return e!==t&&(n._pageSize=e.pageSize,n._page=e.page,n._sort=e.sort,n._filter=e.filter,n._group=e.group,n._aggregate=e.aggregate,n._skip=e.skip,n._take=e.take,n._skip===t&&(n._skip=n.skip(),e.skip=n.skip()),n._take===t&&n._pageSize!==t&&(n._take=n._pageSize,e.take=n._take),e.sort&&(n._sort=e.sort=a(e.sort)),e.filter&&(n._filter=e.filter=l(e.filter)),e.group&&(n._group=e.group=d(e.group)),e.aggregate&&(n._aggregate=e.aggregate=c(e.aggregate))),e},query:function(n){var i,r=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates;return r||(this._data===t||0===this._data.length)&&!this._destroyed.length?this.read(this._mergeState(n)):(this.trigger(Ct,{type:"read"})||(this.trigger(St),i=this._queryProcess(this._data,this._mergeState(n)),this.options.serverFiltering||(this._total=i.total!==t?i.total:this._data.length),this._aggregateResult=this._calculateAggregates(this._data,n),this.view(i.data),this.trigger(Tt,{}),this.trigger(wt,{items:i.data})),e.Deferred().resolve().promise())},fetch:function(e){return this._query().then(nt(e,this))},_query:function(e){var t=this;return t.query(tt({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate()},e))},next:function(e){var n=this,i=n.page(),r=n.total();return e=e||{},!i||r&&i+1>n.totalPages()?t:(n._skip=i*n.take(),i+=1,e.page=i,n._query(e),i)},prev:function(e){var n=this,i=n.page();return e=e||{},i&&1!==i?(n._skip=n._skip-n.take(),i-=1,e.page=i,n._query(e),i):t},page:function(e){var n,i=this;return e!==t?(e=Pt.max(Pt.min(Pt.max(e,1),i.totalPages()),1),i._query({page:e}),t):(n=i.skip(),n!==t?Pt.round((n||0)/(i.take()||1))+1:t)},pageSize:function(e){var n=this;return e!==t?(n._query({pageSize:e,page:1}),t):n.take()},sort:function(e){var n=this;return e!==t?(n._query({sort:e}),t):n._sort},filter:function(e){var n=this;return e===t?n._filter:(n._query({filter:e,page:1}),t)},group:function(e){var n=this;return e!==t?(n._query({group:e}),t):n._group},total:function(){return parseInt(this._total||0,10)},aggregate:function(e){var n=this;return e!==t?(n._query({aggregate:e}),t):n._aggregate},aggregates:function(){return this._aggregateResult},totalPages:function(){var e=this,t=e.pageSize()||e.total();return Pt.ceil((e.total()||0)/t)},inRange:function(e,t){var n=this,i=Pt.min(e+t,n.total());return!n.options.serverPaging&&n._data.length>0?!0:n._findRange(e,i).length>0},lastRange:function(){var e=this._ranges;return e[e.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var e=this._ranges;return e.length&&e[0].data.length&&e[0].data[0].uid},enableRequestsInProgress:function(){this._skipRequestsInProgress=!1},range:function(e,n){var i,r,o,a,s,l,c,d;if(e=Pt.min(e||0,this.total()),i=this,r=Pt.max(Pt.floor(e/n),0)*n,o=Pt.min(r+n,i.total()),i._skipRequestsInProgress=!1,a=i._findRange(e,Pt.min(e+n,i.total())),a.length){i._skipRequestsInProgress=!0,i._pending=t,i._skip=e>i.skip()?Pt.min(o,(i.totalPages()-1)*i.take()):r,i._take=n,s=i.options.serverPaging,l=i.options.serverSorting,c=i.options.serverFiltering,d=i.options.serverAggregates;try{i.options.serverPaging=!0,i._isServerGrouped()||i.group()&&i.group().length||(i.options.serverSorting=!0),i.options.serverFiltering=!0,i.options.serverPaging=!0,i.options.serverAggregates=!0,s&&(i._detachObservableParents(),i._data=a=i._observe(a)),i._process(a)}finally{i.options.serverPaging=s,i.options.serverSorting=l,i.options.serverFiltering=c,i.options.serverAggregates=d}}else n!==t&&(i._rangeExists(r,o)?e>r&&i.prefetch(o,n,function(){i.range(e,n)}):i.prefetch(r,n,function(){e>r&&o<i.total()&&!i._rangeExists(o,Pt.min(o+n,i.total()))?i.prefetch(o,n,function(){i.range(e,n)}):i.range(e,n)}))},_findRange:function(e,n){var i,r,o,s,l,c,u,h,p,f,g,m,v=this,_=v._ranges,y=[],w=v.options,b=w.serverSorting||w.serverPaging||w.serverFiltering||w.serverGrouping||w.serverAggregates;for(r=0,g=_.length;g>r;r++)if(i=_[r],e>=i.start&&i.end>=e){for(f=0,o=r;g>o;o++)if(i=_[o],p=v._flatData(i.data,!0),p.length&&e+f>=i.start&&(c=i.data,u=i.end,b||(m=d(v.group()||[]).concat(a(v.sort()||[])),h=v._queryProcess(i.data,{sort:m,filter:v.filter()}),p=c=h.data,h.total!==t&&(u=h.total)),s=0,e+f>i.start&&(s=e+f-i.start),l=p.length,u>n&&(l-=u-n),f+=l-s,y=v._mergeGroups(y,c,s,l),i.end>=n&&f==n-e))return y;break}return[]},_mergeGroups:function(e,t,n,i){if(this._isServerGrouped()){var r,o=t.toJSON();return e.length&&(r=e[e.length-1]),w(r,o,n,i),e.concat(o)}return e.concat(t.slice(n,i))},skip:function(){var e=this;return e._skip===t?e._page!==t?(e._page-1)*(e.take()||1):t:e._skip},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(e,t,n){var i=this;return function(r){var o,a,s,l=!1,c={start:e,end:t,data:[]};if(i._dequeueRequest(),i.trigger(Tt,{response:r,type:"read"}),r=i.reader.parse(r),s=i._readData(r),s.length){for(o=0,a=i._ranges.length;a>o;o++)if(i._ranges[o].start===e){l=!0,c=i._ranges[o];
break}l||i._ranges.push(c)}c.data=i._observe(s),c.end=c.start+i._flatData(c.data,!0).length,i._ranges.sort(function(e,t){return e.start-t.start}),i._total=i.reader.total(r),i._skipRequestsInProgress||(n&&s.length?n():i.trigger(wt,{}))}},prefetch:function(e,t,n){var i=this,r=Pt.min(e+t,i.total()),o={take:t,skip:e,page:e/t+1,pageSize:t,sort:i._sort,filter:i._filter,group:i._group,aggregate:i._aggregate};i._rangeExists(e,r)?n&&n():(clearTimeout(i._timeout),i._timeout=setTimeout(function(){i._queueRequest(o,function(){i.trigger(Ct,{type:"read"})?i._dequeueRequest():i.transport.read({data:i._params(o),success:i._prefetchSuccessHandler(e,r,n)})})},100))},_rangeExists:function(e,t){var n,i,r=this,o=r._ranges;for(n=0,i=o.length;i>n;n++)if(e>=o[n].start&&o[n].end>=t)return!0;return!1},_removeModelFromRanges:function(e){var t,n,i,r,o;for(r=0,o=this._ranges.length;o>r&&(i=this._ranges[r],this._eachItem(i.data,function(i){t=D(i,e),t&&(n=!0)}),!n);r++);},_updateRangesLength:function(){var e,t,n,i,r=0;for(n=0,i=this._ranges.length;i>n;n++)e=this._ranges[n],e.start=e.start-r,t=this._flatData(e.data,!0).length,r=e.end-t,e.end=e.start+t}}),Q={},Q.create=function(e,t){var n,i=e.transport;return i?(i.read=typeof i.read===ft?{url:i.read}:i.read,e.type&&(dt.data.transports=dt.data.transports||{},dt.data.schemas=dt.data.schemas||{},dt.data.transports[e.type]&&!it(dt.data.transports[e.type])?n=new dt.data.transports[e.type](tt(i,{data:t})):i=tt(!0,{},dt.data.transports[e.type],i),e.schema=tt(!0,{},dt.data.schemas[e.type],e.schema)),n||(n=ut(i.read)?i:new q(i))):n=new G({data:e.data||[]}),n},K.create=function(e){(ot(e)||e instanceof jt)&&(e={data:e});var t,n,i,r=e||{},o=r.data,a=r.fields,s=r.table,l=r.select,c={};if(o||!a||r.transport||(s?o=B(s,a):l&&(o=R(l,a))),dt.data.Model&&a&&(!r.schema||!r.schema.model)){for(t=0,n=a.length;n>t;t++)i=a[t],i.type&&(c[i.field]=i);rt(c)||(r.schema=tt(!0,r.schema,{model:{fields:c}}))}return r.data=o,s=null,r.table=null,r instanceof K?r:new K(r)},X=Kt.define({id:"id",init:function(e){var t=this,n=t.hasChildren||e&&e.hasChildren,i="items",r={};dt.data.Model.fn.init.call(t,e),typeof t.children===ft&&(i=t.children),r={schema:{data:i,model:{hasChildren:n,id:t.idField,fields:t.fields}}},typeof t.children!==ft&&tt(r,t.children),r.data=e,n||(n=r.schema.data),typeof n===ft&&(n=dt.getter(n)),ut(n)&&(t.hasChildren=!!n.call(t,t)),t._childrenOptions=r,t.hasChildren&&t._initChildren(),t._loaded=!(!e||!e[i]&&!e._loaded)},_initChildren:function(){var e,t,n,i=this;i.children instanceof J||(e=i.children=new J(i._childrenOptions),t=e.transport,n=t.parameterMap,t.parameterMap=function(e,t){return e[i.idField||"id"]=i.id,n&&(e=n(e,t)),e},e.parent=function(){return i},e.bind(wt,function(e){e.node=e.node||i,i.trigger(wt,e)}),e.bind(xt,function(e){var t=i.parent();t&&(e.node=e.node||i,t.trigger(xt,e))}),i._updateChildrenField())},append:function(e){this._initChildren(),this.loaded(!0),this.children.add(e)},hasChildren:!1,level:function(){for(var e=this.parentNode(),t=0;e&&e.parentNode;)t++,e=e.parentNode?e.parentNode():null;return t},_updateChildrenField:function(){var e=this._childrenOptions.schema.data;this[e||"items"]=this.children.data()},_childrenLoaded:function(){this._loaded=!0,this._updateChildrenField()},load:function(){var e,n={},i="_query";this.hasChildren?(this._initChildren(),e=this.children,n[this.idField||"id"]=this.id,this._loaded||(e._data=t,i="read"),e.one(wt,nt(this._childrenLoaded,this)),e[i](n)):this.loaded(!0)},parentNode:function(){var e=this.parent();return e.parent()},loaded:function(e){return e===t?this._loaded:(this._loaded=e,t)},shouldSerialize:function(e){return Kt.fn.shouldSerialize.call(this,e)&&"children"!==e&&"_loaded"!==e&&"hasChildren"!==e&&"_childrenOptions"!==e}}),J=K.extend({init:function(e){var t=X.define({children:e});K.fn.init.call(this,tt(!0,{},{schema:{modelBase:t,model:t}},e)),this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var e=this;e._data.bind(xt,function(t){e.trigger(xt,t)})},remove:function(e){var t,n=e.parentNode(),i=this;return n&&n._initChildren&&(i=n.children),t=K.fn.remove.call(i,e),n&&!i.data().length&&(n.hasChildren=!1),t},success:L("success"),data:L("data"),insert:function(e,t){var n=this.parent();return n&&n._initChildren&&(n.hasChildren=!0,n._initChildren()),K.fn.insert.call(this,e,t)},_find:function(e,t){var n,i,r,o,a;if(r=K.fn[e].call(this,t))return r;if(o=this._flatData(this._data))for(n=0,i=o.length;i>n;n++)if(a=o[n].children,a instanceof J&&(r=a[e](t)))return r},get:function(e){return this._find("get",e)},getByUid:function(e){return this._find("getByUid",e)}}),J.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},n=t.data,i=t.fields,r=t.list;return n&&n._dataSource?n._dataSource:(n||!i||t.transport||r&&(n=O(r,i)),t.data=n,t instanceof J?t:new J(t))},Z=dt.Observable.extend({init:function(e,t,n){dt.Observable.fn.init.call(this),this._prefetching=!1,this.dataSource=e,this.prefetch=!n;var i=this;e.bind("change",function(){i._change()}),e.bind("reset",function(){i._reset()}),this._syncWithDataSource(),this.setViewSize(t)},setViewSize:function(e){this.viewSize=e,this._recalculate()},at:function(e){var n=this.pageSize,i=!0;return e>=this.total()?(this.trigger("endreached",{index:e}),t):this.useRanges?this.useRanges?((this.dataOffset>e||e>=this.skip+n)&&(i=this.range(Math.floor(e/n)*n)),e===this.prefetchThreshold&&this._prefetch(),e===this.midPageThreshold?this.range(this.nextMidRange,!0):e===this.nextPageThreshold?this.range(this.nextFullRange):e===this.pullBackThreshold&&this.range(this.offset===this.skip?this.previousMidRange:this.previousFullRange),i?this.dataSource.at(e-this.dataOffset):(this.trigger("endreached",{index:e}),null)):t:this.dataSource.view()[e]},indexOf:function(e){return this.dataSource.data().indexOf(e)+this.dataOffset},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var e=this,t=e.pageSize,n=e.skip-e.viewSize+t,i=Pt.max(Pt.floor(n/t),0)*t;this.offset=n,this.dataSource.prefetch(i,t,function(){e._goToRange(n,!0)})},range:function(e,t){if(this.offset===e)return!0;var n=this,i=this.pageSize,r=Pt.max(Pt.floor(e/i),0)*i,o=this.dataSource;return t&&(r+=i),o.inRange(e,i)?(this.offset=e,this._recalculate(),this._goToRange(e),!0):this.prefetch?(o.prefetch(r,i,function(){n.offset=e,n._recalculate(),n._goToRange(e,!0)}),!1):!0},syncDataSource:function(){var e=this.offset;this.offset=null,this.range(e)},destroy:function(){this.unbind()},_prefetch:function(){var e=this,t=this.pageSize,n=this.skip+t,i=this.dataSource;i.inRange(n,t)||this._prefetching||!this.prefetch||(this._prefetching=!0,this.trigger("prefetching",{skip:n,take:t}),i.prefetch(n,t,function(){e._prefetching=!1,e.trigger("prefetched",{skip:n,take:t})}))},_goToRange:function(e,t){this.offset===e&&(this.dataOffset=e,this._expanding=t,this.dataSource.range(e,this.pageSize),this.dataSource.enableRequestsInProgress())},_reset:function(){this._syncPending=!0},_change:function(){var e=this.dataSource;this.length=this.useRanges?e.lastRange().end:e.view().length,this._syncPending&&(this._syncWithDataSource(),this._recalculate(),this._syncPending=!1,this.trigger("reset",{offset:this.offset})),this.trigger("resize"),this._expanding&&this.trigger("expand"),delete this._expanding},_syncWithDataSource:function(){var e=this.dataSource;this._firstItemUid=e.firstItemUid(),this.dataOffset=this.offset=e.skip()||0,this.pageSize=e.pageSize(),this.useRanges=e.options.serverPaging},_recalculate:function(){var e=this.pageSize,t=this.offset,n=this.viewSize,i=Math.ceil(t/e)*e;this.skip=i,this.midPageThreshold=i+e-1,this.nextPageThreshold=i+n-1,this.prefetchThreshold=i+Math.floor(e/3*2),this.pullBackThreshold=this.offset-1,this.nextMidRange=i+e-n,this.nextFullRange=i,this.previousMidRange=t-n,this.previousFullRange=i-e}}),et=dt.Observable.extend({init:function(e,t){var n=this;dt.Observable.fn.init.call(n),this.dataSource=e,this.batchSize=t,this._total=0,this.buffer=new Z(e,3*t),this.buffer.bind({endreached:function(e){n.trigger("endreached",{index:e.index})},prefetching:function(e){n.trigger("prefetching",{skip:e.skip,take:e.take})},prefetched:function(e){n.trigger("prefetched",{skip:e.skip,take:e.take})},reset:function(){n._total=0,n.trigger("reset")},resize:function(){n._total=Math.ceil(this.length/n.batchSize),n.trigger("resize",{total:n.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(e){var n,i,r=this.buffer,o=e*this.batchSize,a=this.batchSize,s=[];for(r.offset>o&&r.at(r.offset-1),i=0;a>i&&(n=r.at(o+i),n!==t);i++)s.push(n);return s},total:function(){return this._total},destroy:function(){this.buffer.destroy(),this.unbind()}}),tt(!0,dt.data,{readers:{json:Y},Query:o,DataSource:K,HierarchicalDataSource:J,Node:X,ObservableObject:qt,ObservableArray:jt,LazyObservableArray:Gt,LocalTransport:G,RemoteTransport:q,Cache:$,DataReader:Y,Model:Kt,Buffer:Z,BatchBuffer:et})}(window.kendo.jQuery),function(e,t){function n(t,n,i){return v.extend({init:function(e,t,n){var i=this;v.fn.init.call(i,e.element[0],t,n),i.widget=e,i._dataBinding=M(i.dataBinding,i),i._dataBound=M(i.dataBound,i),i._itemChange=M(i.itemChange,i)},itemChange:function(e){a(e.item[0],e.data,this._ns(e.ns),[e.data].concat(this.bindings[t]._parents()))},dataBinding:function(e){var t,n,i=this.widget,r=e.removedItems||i.items();for(t=0,n=r.length;n>t;t++)c(r[t])},_ns:function(t){t=t||x.ui;var n=[x.ui,x.dataviz.ui,x.mobile.ui];return n.splice(e.inArray(t,n),1),n.unshift(t),x.rolesFromNamespaces(n)},dataBound:function(e){{var i,r,o,s,l=this.widget,c=e.addedItems||l.items(),d=l[n];d.group()||[]}if(c.length)for(o=e.addedDataItems||d.flatView(),s=this.bindings[t]._parents(),i=0,r=o.length;r>i;i++)a(c[i],o[i],this._ns(e.ns),[o[i]].concat(s))},refresh:function(e){var r,o=this,a=o.widget;e=e||{},e.action||(o.destroy(),a.bind("dataBinding",o._dataBinding),a.bind("dataBound",o._dataBound),a.bind("itemChange",o._itemChange),r=o.bindings[t].get(),a[n]instanceof x.data.DataSource&&a[n]!=r&&(r instanceof x.data.DataSource?a[i](r):r&&r._dataSource?a[i](r._dataSource):a[n].data(r)))},destroy:function(){var e=this.widget;e.unbind("dataBinding",this._dataBinding),e.unbind("dataBound",this._dataBound),e.unbind("itemChange",this._itemChange)}})}function i(e,n){var i=x.initWidget(e,{},n);return i?new w(i):t}function r(e){var t,n,i,o,a,s,l,c={};for(l=e.match(b),t=0,n=l.length;n>t;t++)i=l[t],o=i.indexOf(":"),a=i.substring(0,o),s=i.substring(o+1),"{"==s.charAt(0)&&(s=r(s)),c[a]=s;return c}function o(e,t,n){var i,r={};for(i in e)r[i]=new n(t,e[i]);return r}function a(e,t,n,s){var c,d,u,h=e.getAttribute("data-"+x.ns+"role"),p=e.getAttribute("data-"+x.ns+"bind"),v=e.children,_=[],w=!0,b={};if(s=s||[t],(h||p)&&l(e),h&&(u=i(e,n)),p&&(p=r(p.replace(k,"")),u||(b=x.parseOptions(e,{textField:"",valueField:"",template:"",valueUpdate:B,valuePrimitive:!1,autoBind:!0}),b.roles=n,u=new y(e,b)),u.source=t,d=o(p,s,f),b.template&&(d.template=new m(s,"",b.template)),d.click&&(p.events=p.events||{},p.events.click=p.click,d.click.destroy(),delete d.click),d.source&&(w=!1),p.attr&&(d.attr=o(p.attr,s,f)),p.style&&(d.style=o(p.style,s,f)),p.events&&(d.events=o(p.events,s,g)),u.bind(d)),u&&(e.kendoBindingTarget=u),w&&v){for(c=0;v.length>c;c++)_[c]=v[c];for(c=0;_.length>c;c++)a(_[c],t,n,s)}}function s(t,n){var i,r,o,s=x.rolesFromNamespaces([].slice.call(arguments,2));for(n=x.observable(n),t=e(t),i=0,r=t.length;r>i;i++)o=t[i],1===o.nodeType&&a(o,n,s)}function l(e){var t=e.kendoBindingTarget;t&&(t.destroy(),R?delete e.kendoBindingTarget:e.removeAttribute?e.removeAttribute("kendoBindingTarget"):e.kendoBindingTarget=null)}function c(e){l(e),d(e)}function d(e){var t,n,i=e.children;if(i)for(t=0,n=i.length;n>t;t++)c(i[t])}function u(t){var n,i;for(t=e(t),n=0,i=t.length;i>n;n++)c(t[n])}function h(e,t){var n=e.element,i=n[0].kendoBindingTarget;i&&s(n,i.source,t)}var p,f,g,m,v,_,y,w,b,k,x=window.kendo,C=x.Observable,S=x.data.ObservableObject,T=x.data.ObservableArray,D={}.toString,A={},E=x.Class,M=e.proxy,P="value",I="source",z="events",F="checked",R=!0,B="change";!function(){var e=document.createElement("a");e.innerText!==t?p="innerText":e.textContent!==t&&(p="textContent");try{delete e.test}catch(n){R=!1}}(),f=C.extend({init:function(e,t){var n=this;C.fn.init.call(n),n.source=e[0],n.parents=e,n.path=t,n.dependencies={},n.dependencies[t]=!0,n.observable=n.source instanceof C,n._access=function(e){n.dependencies[e.field]=!0},n.observable&&(n._change=function(e){n.change(e)},n.source.bind(B,n._change))},_parents:function(){var t,n=this.parents,i=this.get();return i&&"function"==typeof i.parent&&(t=i.parent(),e.inArray(t,n)<0&&(n=[t].concat(n))),n},change:function(e){var t,n,i=e.field,r=this;if("this"===r.path)r.trigger(B,e);else for(t in r.dependencies)if(0===t.indexOf(i)&&(n=t.charAt(i.length),!n||"."===n||"["===n)){r.trigger(B,e);break}},start:function(e){e.bind("get",this._access)},stop:function(e){e.unbind("get",this._access)},get:function(){var e=this,n=e.source,i=0,r=e.path,o=n;if(!e.observable)return o;for(e.start(e.source),o=n.get(r);o===t&&n;)n=e.parents[++i],n instanceof S&&(o=n.get(r));if(o===t)for(n=e.source;o===t&&n;)n=n.parent(),n instanceof S&&(o=n.get(r));return"function"==typeof o&&(i=r.lastIndexOf("."),i>0&&(n=n.get(r.substring(0,i))),e.start(n),o=n!==e.source?o.call(n,e.source):o.call(n),e.stop(n)),n&&n!==e.source&&(e.currentSource=n,n.unbind(B,e._change).bind(B,e._change)),e.stop(e.source),o},set:function(e){var t=this.currentSource||this.source,n=x.getter(this.path)(t);"function"==typeof n?t!==this.source?n.call(t,this.source,e):n.call(t,e):t.set(this.path,e)},destroy:function(){this.observable&&(this.source.unbind(B,this._change),this.currentSource&&this.currentSource.unbind(B,this._change)),this.unbind()}}),g=f.extend({get:function(){var e,t=this.source,n=this.path,i=0;for(e=t.get(n);!e&&t;)t=this.parents[++i],t instanceof S&&(e=t.get(n));return M(e,t)}}),m=f.extend({init:function(e,t,n){var i=this;f.fn.init.call(i,e,t),i.template=n},render:function(e){var t;return this.start(this.source),t=x.render(this.template,e),this.stop(this.source),t}}),v=E.extend({init:function(e,t,n){this.element=e,this.bindings=t,this.options=n},bind:function(e,t){var n=this;e=t?e[t]:e,e.bind(B,function(e){n.refresh(t||e)}),n.refresh(t)},destroy:function(){}}),A.attr=v.extend({refresh:function(e){this.element.setAttribute(e,this.bindings.attr[e].get())}}),A.style=v.extend({refresh:function(e){this.element.style[e]=this.bindings.style[e].get()||""}}),A.enabled=v.extend({refresh:function(){this.bindings.enabled.get()?this.element.removeAttribute("disabled"):this.element.setAttribute("disabled","disabled")}}),A.readonly=v.extend({refresh:function(){this.bindings.readonly.get()?this.element.setAttribute("readonly","readonly"):this.element.removeAttribute("readonly")}}),A.disabled=v.extend({refresh:function(){this.bindings.disabled.get()?this.element.setAttribute("disabled","disabled"):this.element.removeAttribute("disabled")}}),A.events=v.extend({init:function(e,t,n){v.fn.init.call(this,e,t,n),this.handlers={}},refresh:function(t){var n=e(this.element),i=this.bindings.events[t],r=this.handlers[t];r&&n.off(t,r),r=this.handlers[t]=i.get(),n.on(t,i.source,r)},destroy:function(){var t,n=e(this.element);for(t in this.handlers)n.off(t,this.handlers[t])}}),A.text=v.extend({refresh:function(){var e=this.bindings.text.get();null==e&&(e=""),this.element[p]=e}}),A.visible=v.extend({refresh:function(){this.element.style.display=this.bindings.visible.get()?"":"none"}}),A.invisible=v.extend({refresh:function(){this.element.style.display=this.bindings.invisible.get()?"none":""}}),A.html=v.extend({refresh:function(){this.element.innerHTML=this.bindings.html.get()}}),A.value=v.extend({init:function(t,n,i){v.fn.init.call(this,t,n,i),this._change=M(this.change,this),this.eventName=i.valueUpdate||B,e(this.element).on(this.eventName,this._change),this._initChange=!1},change:function(){var e,t;this._initChange=this.eventName!=B,e=this.element.value,t=this.element.type,"date"==t?e=x.parseDate(e,"yyyy-MM-dd"):"datetime-local"==t?e=x.parseDate(e,["yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm"]):"number"==t&&(e=x.parseFloat(e)),this.bindings[P].set(e),this._initChange=!1},refresh:function(){var e,t;this._initChange||(e=this.bindings[P].get(),null==e&&(e=""),t=this.element.type,"date"==t?e=x.toString(e,"yyyy-MM-dd"):"datetime-local"==t&&(e=x.toString(e,"yyyy-MM-ddTHH:mm:ss")),this.element.value=e),this._initChange=!1},destroy:function(){e(this.element).off(this.eventName,this._change)}}),A.source=v.extend({init:function(e,t,n){v.fn.init.call(this,e,t,n);var i=this.bindings.source.get();i instanceof x.data.DataSource&&n.autoBind!==!1&&i.fetch()},refresh:function(e){var t=this,n=t.bindings.source.get();n instanceof T||n instanceof x.data.DataSource?(e=e||{},"add"==e.action?t.add(e.index,e.items):"remove"==e.action?t.remove(e.index,e.items):"itemchange"!=e.action&&t.render()):t.render()},container:function(){var e=this.element;return"table"==e.nodeName.toLowerCase()&&(e.tBodies[0]||e.appendChild(document.createElement("tbody")),e=e.tBodies[0]),e},template:function(){var e=this.options,t=e.template,n=this.container().nodeName.toLowerCase();return t||(t="select"==n?e.valueField||e.textField?x.format('<option value="#:{0}#">#:{1}#</option>',e.valueField||e.textField,e.textField||e.valueField):"<option>#:data#</option>":"tbody"==n?"<tr><td>#:data#</td></tr>":"ul"==n||"ol"==n?"<li>#:data#</li>":"#:data#",t=x.template(t)),t},add:function(t,n){var i,r,o,s,l=this.container(),c=l.cloneNode(!1),d=l.children[t];if(e(c).html(x.render(this.template(),n)),c.children.length)for(i=this.bindings.source._parents(),r=0,o=n.length;o>r;r++)s=c.children[0],l.insertBefore(s,d||null),a(s,n[r],this.options.roles,[n[r]].concat(i))},remove:function(e,t){var n,i,r=this.container();for(n=0;t.length>n;n++)i=r.children[e],c(i),r.removeChild(i)},render:function(){var t,n,i,r=this.bindings.source.get(),o=this.container(),s=this.template();if(r instanceof x.data.DataSource&&(r=r.view()),r instanceof T||"[object Array]"===D.call(r)||(r=[r]),this.bindings.template){if(d(o),e(o).html(this.bindings.template.render(r)),o.children.length)for(t=this.bindings.source._parents(),n=0,i=r.length;i>n;n++)a(o.children[n],r[n],this.options.roles,[r[n]].concat(t))}else e(o).html(x.render(s,r))}}),A.input={checked:v.extend({init:function(t,n,i){v.fn.init.call(this,t,n,i),this._change=M(this.change,this),e(this.element).change(this._change)},change:function(){var e,t,n=this.element,i=this.value();"radio"==n.type?this.bindings[F].set(i):"checkbox"==n.type&&(e=this.bindings[F].get(),e instanceof T?(i=this.element.value,"on"!==i&&"off"!==i&&(t=e.indexOf(i),t>-1?e.splice(t,1):e.push(i))):this.bindings[F].set(i))},refresh:function(){var e=this.bindings[F].get(),t=e,n=this.element;"checkbox"==n.type?(t instanceof T&&(e=this.element.value,t.indexOf(e)>=0&&(e=!0)),n.checked=e===!0):"radio"==n.type&&null!=e&&n.value===""+e&&(n.checked=!0)},value:function(){var e=this.element,t=e.value;return"checkbox"==e.type&&(t=e.checked),t},destroy:function(){e(this.element).off(B,this._change)}})},A.select={value:v.extend({init:function(t,n,i){v.fn.init.call(this,t,n,i),this._change=M(this.change,this),e(this.element).change(this._change)},change:function(){var e,n,i,r,o,a,s=[],l=this.element,c=this.options.valueField||this.options.textField,d=this.options.valuePrimitive;for(o=0,a=l.options.length;a>o;o++)n=l.options[o],n.selected&&(r=n.attributes.value,r=r&&r.specified?n.value:n.text,s.push(r));if(c)for(e=this.bindings.source.get(),e instanceof x.data.DataSource&&(e=e.view()),i=0;s.length>i;i++)for(o=0,a=e.length;a>o;o++)if(e[o].get(c)==s[i]){s[i]=e[o];break}r=this.bindings[P].get(),r instanceof T?r.splice.apply(r,[0,r.length].concat(s)):this.bindings[P].set(d||!(r instanceof S||null===r||r===t)&&c?s[0].get(c):s[0])},refresh:function(){var e,t,n,i=this.element,r=i.options,o=this.bindings[P].get(),a=o,s=this.options.valueField||this.options.textField,l=!1;for(a instanceof T||(a=new T([o])),i.selectedIndex=-1,n=0;a.length>n;n++)for(o=a[n],s&&o instanceof S&&(o=o.get(s)),e=0;r.length>e;e++)t=r[e].value,""===t&&""!==o&&(t=r[e].text),t==o&&(r[e].selected=!0,l=!0)},destroy:function(){e(this.element).off(B,this._change)}})},A.widget={events:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e,this.handlers={}},refresh:function(e){var t=this.bindings.events[e],n=this.handlers[e];n&&this.widget.unbind(e,n),n=t.get(),this.handlers[e]=function(e){e.data=t.source,n(e),e.data===t.source&&delete e.data},this.widget.bind(e,this.handlers[e])},destroy:function(){var e;for(e in this.handlers)this.widget.unbind(e,this.handlers[e])}}),checked:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e,this._change=M(this.change,this),this.widget.bind(B,this._change)},change:function(){this.bindings[F].set(this.value())},refresh:function(){this.widget.check(this.bindings[F].get()===!0)},value:function(){var e=this.element,t=e.value;return("on"==t||"off"==t)&&(t=e.checked),t},destroy:function(){this.widget.unbind(B,this._change)}}),visible:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){var e=this.bindings.visible.get();this.widget.wrapper[0].style.display=e?"":"none"}}),invisible:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){var e=this.bindings.invisible.get();this.widget.wrapper[0].style.display=e?"none":""}}),enabled:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(this.bindings.enabled.get())}}),disabled:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(!this.bindings.disabled.get())}}),source:n("source","dataSource","setDataSource"),value:v.extend({init:function(t,n,i){v.fn.init.call(this,t.element[0],n,i),this.widget=t,this._change=e.proxy(this.change,this),this.widget.first(B,this._change);var r=this.bindings.value.get();this._valueIsObservableObject=!i.valuePrimitive&&(null==r||r instanceof S),this._valueIsObservableArray=r instanceof T,this._initChange=!1},change:function(){var e,t,n,i,r,o,a,s=this.widget.value(),l=this.options.dataValueField||this.options.dataTextField,c="[object Array]"===D.call(s),d=this._valueIsObservableObject,u=[];if(this._initChange=!0,l)if(this.bindings.source&&(a=this.bindings.source.get()),""===s&&(d||this.options.valuePrimitive))s=null;else{for((!a||a instanceof x.data.DataSource)&&(a=this.widget.dataSource.view()),c&&(t=s.length,u=s.slice(0)),r=0,o=a.length;o>r;r++)if(n=a[r],i=n.get(l),c){for(e=0;t>e;e++)if(i==u[e]){u[e]=n;break}}else if(i==s){s=d?n:i;break}u[0]&&(s=this._valueIsObservableArray?u:d||!l?u[0]:u[0].get(l))}this.bindings.value.set(s),this._initChange=!1},refresh:function(){if(!this._initChange){var e,n=this.options.dataValueField||this.options.dataTextField,i=this.bindings.value.get(),r=0,o=[];if(i===t&&(i=null),n)if(i instanceof T){for(e=i.length;e>r;r++)o[r]=i[r].get(n);i=o}else i instanceof S&&(i=i.get(n));this.widget.value(i)}this._initChange=!1},destroy:function(){this.widget.unbind(B,this._change)}}),gantt:{dependencies:n("dependencies","dependencies","setDependenciesDataSource")},multiselect:{value:v.extend({init:function(t,n,i){v.fn.init.call(this,t.element[0],n,i),this.widget=t,this._change=e.proxy(this.change,this),this.widget.first(B,this._change),this._initChange=!1},change:function(){var e,t,n,i,r,o,a,s,l,c=this,d=c.bindings[P].get(),u=c.options.valuePrimitive,h=u?c.widget.value():c.widget.dataItems(),p=this.options.dataValueField||this.options.dataTextField;if(h=h.slice(0),c._initChange=!0,d instanceof T){for(e=[],t=h.length,n=0,i=0,r=d[n],o=!1;r;){for(l=!1,i=0;t>i;i++)if(u?o=h[i]==r:(s=h[i],s=s.get?s.get(p):s,o=s==(r.get?r.get(p):r)),o){h.splice(i,1),t-=1,l=!0;break}l?n+=1:(e.push(r),_(d,n,1),a=n),r=d[n]}_(d,d.length,0,h),e.length&&d.trigger("change",{action:"remove",items:e,index:a}),h.length&&d.trigger("change",{action:"add",items:h,index:d.length-1})}else c.bindings[P].set(h);c._initChange=!1},refresh:function(){if(!this._initChange){var e,n,i=this.options.dataValueField||this.options.dataTextField,r=this.bindings.value.get(),o=0,a=[];if(r===t&&(r=null),i)if(r instanceof T){for(e=r.length;e>o;o++)n=r[o],a[o]=n.get?n.get(i):n;r=a}else r instanceof S&&(r=r.get(i));this.widget.value(r)}},destroy:function(){this.widget.unbind(B,this._change)}})},scheduler:{source:n("source","dataSource","setDataSource").extend({dataBound:function(e){{var t,n,i,r,o=this.widget,s=o.view(),l=e.addedItems||o.items(),c=o.dataSource;c.group()||[]}if(l.length)for(i=e.addedDataItems||c.expand(s.startDate(),s.endDate()),r=this.bindings.source._parents(),t=0,n=i.length;n>t;t++)a(l[t],i[t],this._ns(e.ns),[i[t]].concat(r))}})}},_=function(e,t,n,i){var r,o,a,s,l;if(i=i||[],n=n||0,r=i.length,o=e.length,a=[].slice.call(e,t+n),s=a.length,r){for(r=t+r,l=0;r>t;t++)e[t]=i[l],l++;e.length=r}else if(n)for(e.length=t,n+=t;n>t;)delete e[--n];if(s){for(s=t+s,l=0;s>t;t++)e[t]=a[l],l++;e.length=s}for(t=e.length;o>t;)delete e[t],t++},y=E.extend({init:function(e,t){this.target=e,this.options=t,this.toDestroy=[]},bind:function(e){var t,n,i,r,o=this.target.nodeName.toLowerCase(),a=A[o]||{};for(t in e)t==P?n=!0:t==I?i=!0:t==z?r=!0:this.applyBinding(t,e,a);i&&this.applyBinding(I,e,a),n&&this.applyBinding(P,e,a),r&&this.applyBinding(z,e,a)},applyBinding:function(e,t,n){var i,r=n[e]||A[e],o=this.toDestroy,a=t[e];if(r)if(r=new r(this.target,t,this.options),o.push(r),a instanceof f)r.bind(a),o.push(a);else for(i in a)r.bind(a,i),o.push(a[i]);else if("template"!==e)throw Error("The "+e+" binding is not supported by the "+this.target.nodeName.toLowerCase()+" element")},destroy:function(){var e,t,n=this.toDestroy;for(e=0,t=n.length;t>e;e++)n[e].destroy()}}),w=y.extend({bind:function(e){var t,n=this,i=!1,r=!1,o=A.widget[n.target.options.name.toLowerCase()]||{};for(t in e)t==P?i=!0:t==I?r=!0:n.applyBinding(t,e,o);r&&n.applyBinding(I,e,o),i&&n.applyBinding(P,e,o)},applyBinding:function(e,t,n){var i,r=n[e]||A.widget[e],o=this.toDestroy,a=t[e];if(!r)throw Error("The "+e+" binding is not supported by the "+this.target.options.name+" widget");if(r=new r(this.target,t,this.target.options),o.push(r),a instanceof f)r.bind(a),o.push(a);else for(i in a)r.bind(a,i),o.push(a[i])}}),b=/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g,k=/\s/g,x.unbind=u,x.bind=s,x.data.binders=A,x.data.Binder=v,x.notify=h,x.observable=function(e){return e instanceof S||(e=new S(e)),e},x.observableHierarchy=function(e){function t(e){var n,i;for(n=0;e.length>n;n++)e[n]._initChildren(),i=e[n].children,i.fetch(),e[n].items=i.data(),t(e[n].items)}var n=x.data.HierarchicalDataSource.create(e);return n.fetch(),t(n.data()),n._data._dataSource=n,n._data}}(window.kendo.jQuery),function(e,t){function n(e){return parseInt(e,10)}function i(e,t){return n(e.css(t))}function r(e){var t,n=[];for(t in e)n.push(t);return n}function o(e){for(var t in e)-1!=U.indexOf(t)&&-1==W.indexOf(t)&&delete e[t];return e}function a(e,t){var n,i,r,o,a=[],s={};for(i in t)n=i.toLowerCase(),o=P&&-1!=U.indexOf(n),!E.hasHW3D&&o&&-1==W.indexOf(n)?delete t[i]:(r=t[i],o?a.push(i+"("+r+")"):s[i]=r);return a.length&&(s[st]=a.join(" ")),s}function s(e,t){var i,r,o;return P?(i=e.css(st),i==K?"scale"==t?1:0:(r=i.match(RegExp(t+"\\s*\\(([\\d\\w\\.]+)")),o=0,r?o=n(r[1]):(r=i.match(B)||[0,0,0,0,0],t=t.toLowerCase(),O.test(t)?o=parseFloat(r[3]/r[2]):"translatey"==t?o=parseFloat(r[4]/r[2]):"scale"==t?o=parseFloat(r[2]):"rotate"==t&&(o=parseFloat(Math.atan2(r[2],r[1])))),o)):parseFloat(e.css(t))}function l(e){return e.charAt(0).toUpperCase()+e.substring(1)}function c(e,t){var n=f.extend(t),i=n.prototype.directions;S[l(e)]=n,S.Element.prototype[e]=function(e,t,i,r){return new n(this.element,e,t,i,r)},T(i,function(t,i){S.Element.prototype[e+l(i)]=function(e,t,r){return new n(this.element,i,e,t,r)}})}function d(e,n,i,r){c(e,{directions:m,startValue:function(e){return this._startValue=e,this},endValue:function(e){return this._endValue=e,this},shouldHide:function(){return this._shouldHide},prepare:function(e,o){var a,s,l=this,c="out"===this._direction,d=l.element.data(n),u=!(isNaN(d)||d==i);a=u?d:t!==this._startValue?this._startValue:c?i:r,s=t!==this._endValue?this._endValue:c?r:i,this._reverse?(e[n]=s,o[n]=a):(e[n]=a,o[n]=s),l._shouldHide=o[n]===r}})}function u(e,t){var n=C.directions[t].vertical,i=e[n?J:X]()/2+"px";return _[t].replace("$size",i)}var h,p,f,g,m,v,_,y,w,b,k,x,C=window.kendo,S=C.effects,T=e.each,D=e.extend,A=e.proxy,E=C.support,M=E.browser,P=E.transforms,I=E.transitions,z={scale:0,scalex:0,scaley:0,scale3d:0},F={translate:0,translatex:0,translatey:0,translate3d:0},R=t!==document.documentElement.style.zoom&&!P,B=/matrix3?d?\s*\(.*,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?/i,L=/^(-?[\d\.\-]+)?[\w\s]*,?\s*(-?[\d\.\-]+)?[\w\s]*/i,O=/translatex?$/i,H=/(zoom|fade|expand)(\w+)/,N=/(zoom|fade|expand)/,V=/[xy]$/i,U=["perspective","rotate","rotatex","rotatey","rotatez","rotate3d","scale","scalex","scaley","scalez","scale3d","skew","skewx","skewy","translate","translatex","translatey","translatez","translate3d","matrix","matrix3d"],W=["rotate","scale","scalex","scaley","skew","skewx","skewy","translate","translatex","translatey","matrix"],j={rotate:"deg",scale:"",skew:"px",translate:"px"},G=P.css,q=Math.round,$="",Y="px",K="none",Q="auto",X="width",J="height",Z="hidden",et="origin",tt="abortId",nt="overflow",it="translate",rt="position",ot="completeCallback",at=G+"transition",st=G+"transform",lt=G+"backface-visibility",ct=G+"perspective",dt="1500px",ut="perspective("+dt+")",ht={left:{reverse:"right",property:"left",transition:"translatex",vertical:!1,modifier:-1},right:{reverse:"left",property:"left",transition:"translatex",vertical:!1,modifier:1},down:{reverse:"up",property:"top",transition:"translatey",vertical:!0,modifier:1},up:{reverse:"down",property:"top",transition:"translatey",vertical:!0,modifier:-1},top:{reverse:"bottom"},bottom:{reverse:"top"},"in":{reverse:"out",modifier:-1},out:{reverse:"in",modifier:1},vertical:{reverse:"vertical"},horizontal:{reverse:"horizontal"}};C.directions=ht,D(e.fn,{kendoStop:function(e,t){return I?S.stopQueue(this,e||!1,t||!1):this.stop(e,t)}}),P&&!I&&(T(W,function(n,i){e.fn[i]=function(n){if(t===n)return s(this,i);var r=e(this)[0],o=i+"("+n+j[i.replace(V,"")]+")";return-1==r.style.cssText.indexOf(st)?e(this).css(st,o):r.style.cssText=r.style.cssText.replace(RegExp(i+"\\(.*?\\)","i"),o),this},e.fx.step[i]=function(t){e(t.elem)[i](t.now)}}),h=e.fx.prototype.cur,e.fx.prototype.cur=function(){return-1!=W.indexOf(this.prop)?parseFloat(e(this.elem)[this.prop]()):h.apply(this,arguments)}),C.toggleClass=function(e,t,n,i){return t&&(t=t.split(" "),I&&(n=D({exclusive:"all",duration:400,ease:"ease-out"},n),e.css(at,n.exclusive+" "+n.duration+"ms "+n.ease),setTimeout(function(){e.css(at,"").css(J)},n.duration)),T(t,function(t,n){e.toggleClass(n,i)})),e},C.parseEffects=function(e,t){var n={};return"string"==typeof e?T(e.split(" "),function(e,i){var r=!N.test(i),o=i.replace(H,function(e,t,n){return t+":"+n.toLowerCase()}),a=o.split(":"),s=a[1],l={};a.length>1&&(l.direction=t&&r?ht[s].reverse:s),n[a[0]]=l}):T(e,function(e){var i=this.direction;i&&t&&!N.test(e)&&(this.direction=ht[i].reverse),n[e]=this}),n},I&&D(S,{transition:function(t,n,i){var o,s,l,c,d=0,u=t.data("keys")||[];i=D({duration:200,ease:"ease-out",complete:null,exclusive:"all"},i),l=!1,c=function(){l||(l=!0,s&&(clearTimeout(s),s=null),t.removeData(tt).dequeue().css(at,"").css(at),i.complete.call(t))},i.duration=e.fx?e.fx.speeds[i.duration]||i.duration:i.duration,o=a(t,n),e.merge(u,r(o)),t.data("keys",e.unique(u)).height(),t.css(at,i.exclusive+" "+i.duration+"ms "+i.ease).css(at),t.css(o).css(st),I.event&&(t.one(I.event,c),0!==i.duration&&(d=500)),s=setTimeout(c,i.duration+d),t.data(tt,s),t.data(ot,c)
},stopQueue:function(e,t,n){var i,r=e.data("keys"),o=!n&&r,a=e.data(ot);return o&&(i=C.getComputedStyles(e[0],r)),a&&a(),o&&e.css(i),e.removeData("keys").stop(t)}}),p=C.Class.extend({init:function(e,t){var n=this;n.element=e,n.effects=[],n.options=t,n.restore=[]},run:function(t){var n,i,r,s,l,c,d,u=this,h=t.length,p=u.element,f=u.options,g=e.Deferred(),m={},v={};for(u.effects=t,g.then(e.proxy(u,"complete")),p.data("animating",!0),i=0;h>i;i++)for(n=t[i],n.setReverse(f.reverse),n.setOptions(f),u.addRestoreProperties(n.restore),n.prepare(m,v),l=n.children(),r=0,c=l.length;c>r;r++)l[r].duration(f.duration).run();for(d in f.effects)D(v,f.effects[d].properties);for(p.is(":visible")||D(m,{display:p.data("olddisplay")||"block"}),P&&!f.reset&&(s=p.data("targetTransform"),s&&(m=D(s,m))),m=a(p,m),P&&!I&&(m=o(m)),p.css(m).css(st),i=0;h>i;i++)t[i].setup();return f.init&&f.init(),p.data("targetTransform",v),S.animate(p,v,D({},f,{complete:g.resolve})),g.promise()},stop:function(){e(this.element).kendoStop(!0,!0)},addRestoreProperties:function(e){for(var t,n=this.element,i=0,r=e.length;r>i;i++)t=e[i],this.restore.push(t),n.data(t)||n.data(t,n.css(t))},restoreCallback:function(){var e,t,n,i=this.element;for(e=0,t=this.restore.length;t>e;e++)n=this.restore[e],i.css(n,i.data(n))},complete:function(){var t=this,n=0,i=t.element,r=t.options,o=t.effects,a=o.length;for(i.removeData("animating").dequeue(),r.hide&&i.data("olddisplay",i.css("display")).hide(),this.restoreCallback(),R&&!P&&setTimeout(e.proxy(this,"restoreCallback"),0);a>n;n++)o[n].teardown();r.completeCallback&&r.completeCallback(i)}}),S.promise=function(e,t){var n,i,r,o=[],a=new p(e,t),s=C.parseEffects(t.effects);t.effects=s;for(r in s)n=S[l(r)],n&&(i=new n(e,s[r].direction),o.push(i));o[0]?a.run(o):(e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.init&&t.init(),e.dequeue(),a.complete())},D(S,{animate:function(n,r,a){var s=a.transition!==!1;delete a.transition,I&&"transition"in S&&s?S.transition(n,r,a):P?n.animate(o(r),{queue:!1,show:!1,hide:!1,duration:a.duration,complete:a.complete}):n.each(function(){var n=e(this),o={};T(U,function(e,a){var s,l,c,d,u,h,p,f=r?r[a]+" ":null;f&&(l=r,a in z&&r[a]!==t?(s=f.match(L),P&&D(l,{scale:+s[0]})):a in F&&r[a]!==t&&(c=n.css(rt),d="absolute"==c||"fixed"==c,n.data(it)||(d?n.data(it,{top:i(n,"top")||0,left:i(n,"left")||0,bottom:i(n,"bottom"),right:i(n,"right")}):n.data(it,{top:i(n,"marginTop")||0,left:i(n,"marginLeft")||0})),u=n.data(it),s=f.match(L),s&&(h=a==it+"y"?0:+s[1],p=a==it+"y"?+s[1]:+s[2],d?(isNaN(u.right)?isNaN(h)||D(l,{left:u.left+h}):isNaN(h)||D(l,{right:u.right-h}),isNaN(u.bottom)?isNaN(p)||D(l,{top:u.top+p}):isNaN(p)||D(l,{bottom:u.bottom-p})):(isNaN(h)||D(l,{marginLeft:u.left+h}),isNaN(p)||D(l,{marginTop:u.top+p})))),!P&&"scale"!=a&&a in l&&delete l[a],l&&D(o,l))}),M.msie&&delete o.scale,n.animate(o,{queue:!1,show:!1,hide:!1,duration:a.duration,complete:a.complete})})}}),S.animatedPromise=S.promise,f=C.Class.extend({init:function(e,t){var n=this;n.element=e,n._direction=t,n.options={},n._additionalEffects=[],n.restore||(n.restore=[])},reverse:function(){return this._reverse=!0,this.run()},play:function(){return this._reverse=!1,this.run()},add:function(e){return this._additionalEffects.push(e),this},direction:function(e){return this._direction=e,this},duration:function(e){return this._duration=e,this},compositeRun:function(){var e=this,t=new p(e.element,{reverse:e._reverse,duration:e._duration}),n=e._additionalEffects.concat([e]);return t.run(n)},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var t,n,i=this,r=i.element,s=0,l=i.restore,c=l.length,d=e.Deferred(),u={},h={},p=i.children(),f=p.length;for(d.then(e.proxy(i,"_complete")),r.data("animating",!0),s=0;c>s;s++)t=l[s],r.data(t)||r.data(t,r.css(t));for(s=0;f>s;s++)p[s].duration(i._duration).run();return i.prepare(u,h),r.is(":visible")||D(u,{display:r.data("olddisplay")||"block"}),P&&(n=r.data("targetTransform"),n&&(u=D(n,u))),u=a(r,u),P&&!I&&(u=o(u)),r.css(u).css(st),i.setup(),r.data("targetTransform",h),S.animate(r,h,{duration:i._duration,complete:d.resolve}),d.promise()},stop:function(){var t=0,n=this.children(),i=n.length;for(t=0;i>t;t++)n[t].stop();return e(this.element).kendoStop(!0,!0),this},restoreCallback:function(){var e,t,n,i=this.element;for(e=0,t=this.restore.length;t>e;e++)n=this.restore[e],i.css(n,i.data(n))},_complete:function(){var t=this,n=t.element;n.removeData("animating").dequeue(),t.restoreCallback(),t.shouldHide()&&n.data("olddisplay",n.css("display")).hide(),R&&!P&&setTimeout(e.proxy(t,"restoreCallback"),0),t.teardown()},setOptions:function(e){D(!0,this.options,e)},children:function(){return[]},shouldHide:e.noop,setup:e.noop,prepare:e.noop,teardown:e.noop,directions:[],setReverse:function(e){return this._reverse=e,this}}),g=["left","right","up","down"],m=["in","out"],c("slideIn",{directions:g,divisor:function(e){return this.options.divisor=e,this},prepare:function(e,t){var n,i=this,r=i.element,o=ht[i._direction],a=-o.modifier*(o.vertical?r.outerHeight():r.outerWidth()),s=a/(i.options&&i.options.divisor||1)+Y,l="0px";i._reverse&&(n=e,e=t,t=n),P?(e[o.transition]=s,t[o.transition]=l):(e[o.property]=s,t[o.property]=l)}}),c("tile",{directions:g,init:function(e,t,n){f.prototype.init.call(this,e,t),this.options={previous:n}},previousDivisor:function(e){return this.options.previousDivisor=e,this},children:function(){var e=this,t=e._reverse,n=e.options.previous,i=e.options.previousDivisor||1,r=e._direction,o=[C.fx(e.element).slideIn(r).setReverse(t)];return n&&o.push(C.fx(n).slideIn(ht[r].reverse).divisor(i).setReverse(!t)),o}}),d("fade","opacity",1,0),d("zoom","scale",1,.01),c("slideMargin",{prepare:function(e,t){var n,i=this,r=i.element,o=i.options,a=r.data(et),s=o.offset,l=i._reverse;l||null!==a||r.data(et,parseFloat(r.css("margin-"+o.axis))),n=r.data(et)||0,t["margin-"+o.axis]=l?n:n+s}}),c("slideTo",{prepare:function(e,t){var n=this,i=n.element,r=n.options,o=r.offset.split(","),a=n._reverse;P?(t.translatex=a?0:o[0],t.translatey=a?0:o[1]):(t.left=a?0:o[0],t.top=a?0:o[1]),i.css("left")}}),c("expand",{directions:["horizontal","vertical"],restore:[nt],prepare:function(e,n){var i=this,r=i.element,o=i.options,a=i._reverse,s="vertical"===i._direction?J:X,l=r[0].style[s],c=r.data(s),d=parseFloat(c||l),u=q(r.css(s,Q)[s]());e.overflow=Z,d=o&&o.reset?u||d:d||u,n[s]=(a?0:d)+Y,e[s]=(a?d:0)+Y,c===t&&r.data(s,l)},shouldHide:function(){return this._reverse},teardown:function(){var e=this,t=e.element,n="vertical"===e._direction?J:X,i=t.data(n);(i==Q||i===$)&&setTimeout(function(){t.css(n,Q).css(n)},0)}}),v={position:"absolute",marginLeft:0,marginTop:0,scale:1},c("transfer",{init:function(e,t){this.element=e,this.options={target:t},this.restore=[]},setup:function(){this.element.appendTo(document.body)},prepare:function(e,t){var n=this,i=n.element,r=S.box(i),o=S.box(n.options.target),a=s(i,"scale"),l=S.fillScale(o,r),c=S.transformOrigin(o,r);D(e,v),t.scale=1,i.css(st,"scale(1)").css(st),i.css(st,"scale("+a+")"),e.top=r.top,e.left=r.left,e.transformOrigin=c.x+Y+" "+c.y+Y,n._reverse?e.scale=l:t.scale=l}}),_={top:"rect(auto auto $size auto)",bottom:"rect($size auto auto auto)",left:"rect(auto $size auto auto)",right:"rect(auto auto auto $size)"},y={top:{start:"rotatex(0deg)",end:"rotatex(180deg)"},bottom:{start:"rotatex(-180deg)",end:"rotatex(0deg)"},left:{start:"rotatey(0deg)",end:"rotatey(-180deg)"},right:{start:"rotatey(180deg)",end:"rotatey(0deg)"}},c("turningPage",{directions:g,init:function(e,t,n){f.prototype.init.call(this,e,t),this._container=n},prepare:function(e,t){var n=this,i=n._reverse,r=i?ht[n._direction].reverse:n._direction,o=y[r];e.zIndex=1,n._clipInHalf&&(e.clip=u(n._container,C.directions[r].reverse)),e[lt]=Z,t[st]=ut+(i?o.start:o.end),e[st]=ut+(i?o.end:o.start)},setup:function(){this._container.append(this.element)},face:function(e){return this._face=e,this},shouldHide:function(){var e=this,t=e._reverse,n=e._face;return t&&!n||!t&&n},clipInHalf:function(e){return this._clipInHalf=e,this},temporary:function(){return this.element.addClass("temp-page"),this}}),c("staticPage",{directions:g,init:function(e,t,n){f.prototype.init.call(this,e,t),this._container=n},restore:["clip"],prepare:function(e,t){var n=this,i=n._reverse?ht[n._direction].reverse:n._direction;e.clip=u(n._container,i),e.opacity=.999,t.opacity=1},shouldHide:function(){var e=this,t=e._reverse,n=e._face;return t&&!n||!t&&n},face:function(e){return this._face=e,this}}),c("pageturn",{directions:["horizontal","vertical"],init:function(e,t,n,i){f.prototype.init.call(this,e,t),this.options={},this.options.face=n,this.options.back=i},children:function(){var e,t=this,n=t.options,i="horizontal"===t._direction?"left":"top",r=C.directions[i].reverse,o=t._reverse,a=n.face.clone(!0).removeAttr("id"),s=n.back.clone(!0).removeAttr("id"),l=t.element;return o&&(e=i,i=r,r=e),[C.fx(n.face).staticPage(i,l).face(!0).setReverse(o),C.fx(n.back).staticPage(r,l).setReverse(o),C.fx(a).turningPage(i,l).face(!0).clipInHalf(!0).temporary().setReverse(o),C.fx(s).turningPage(r,l).clipInHalf(!0).temporary().setReverse(o)]},prepare:function(e,t){e[ct]=dt,e.transformStyle="preserve-3d",e.opacity=.999,t.opacity=1},teardown:function(){this.element.find(".temp-page").remove()}}),c("flip",{directions:["horizontal","vertical"],init:function(e,t,n,i){f.prototype.init.call(this,e,t),this.options={},this.options.face=n,this.options.back=i},children:function(){var e,t=this,n=t.options,i="horizontal"===t._direction?"left":"top",r=C.directions[i].reverse,o=t._reverse,a=t.element;return o&&(e=i,i=r,r=e),[C.fx(n.face).turningPage(i,a).face(!0).setReverse(o),C.fx(n.back).turningPage(r,a).setReverse(o)]},prepare:function(e){e[ct]=dt,e.transformStyle="preserve-3d"}}),w=!E.mobileOS.android,b=".km-touch-scrollbar, .km-actionsheet-wrapper",c("replace",{_before:e.noop,_after:e.noop,init:function(t,n,i){f.prototype.init.call(this,t),this._previous=e(n),this._transitionClass=i},duration:function(){throw Error("The replace effect does not support duration setting; the effect duration may be customized through the transition class rule")},beforeTransition:function(e){return this._before=e,this},afterTransition:function(e){return this._after=e,this},_both:function(){return e().add(this._element).add(this._previous)},_containerClass:function(){var e=this._direction,t="k-fx k-fx-start k-fx-"+this._transitionClass;return e&&(t+=" k-fx-"+e),this._reverse&&(t+=" k-fx-reverse"),t},complete:function(t){if(!(!this.deferred||t&&e(t.target).is(b))){var n=this.container;n.removeClass("k-fx-end").removeClass(this._containerClass()).off(I.event,this.completeProxy),this._previous.hide().removeClass("k-fx-current"),this.element.removeClass("k-fx-next"),w&&n.css(nt,""),this.isAbsolute||this._both().css(rt,""),this.deferred.resolve(),delete this.deferred}},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var t,n=this,i=n.element,r=n._previous,o=i.parents().filter(r.parents()).first(),a=n._both(),s=e.Deferred(),l=i.css(rt);return o.length||(o=i.parent()),this.container=o,this.deferred=s,this.isAbsolute="absolute"==l,this.isAbsolute||a.css(rt,"absolute"),w&&(t=o.css(nt),o.css(nt,"hidden")),I?(i.addClass("k-fx-hidden"),o.addClass(this._containerClass()),this.completeProxy=e.proxy(this,"complete"),o.on(I.event,this.completeProxy),C.animationFrame(function(){i.removeClass("k-fx-hidden").addClass("k-fx-next"),r.css("display","").addClass("k-fx-current"),n._before(r,i),C.animationFrame(function(){o.removeClass("k-fx-start").addClass("k-fx-end"),n._after(r,i)})})):this.complete(),s.promise()},stop:function(){this.complete()}}),k=C.Class.extend({init:function(){var e=this;e._tickProxy=A(e._tick,e),e._started=!1},tick:e.noop,done:e.noop,onEnd:e.noop,onCancel:e.noop,start:function(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,C.animationFrame(this._tickProxy)))},enabled:function(){return!0},cancel:function(){this._started=!1,this.onCancel()},_tick:function(){var e=this;e._started&&(e.tick(),e.done()?(e._started=!1,e.onEnd()):C.animationFrame(e._tickProxy))}}),x=k.extend({init:function(e){var t=this;D(t,e),k.fn.init.call(t)},done:function(){return this.timePassed()>=this.duration},timePassed:function(){return Math.min(this.duration,new Date-this.startDate)},moveTo:function(e){var t=this,n=t.movable;t.initial=n[t.axis],t.delta=e.location-t.initial,t.duration="number"==typeof e.duration?e.duration:300,t.tick=t._easeProxy(e.ease),t.startDate=new Date,t.start()},_easeProxy:function(e){var t=this;return function(){t.movable.moveAxis(t.axis,e(t.timePassed(),t.initial,t.delta,t.duration))}}}),D(x,{easeOutExpo:function(e,t,n,i){return e==i?t+n:n*(-Math.pow(2,-10*e/i)+1)+t},easeOutBack:function(e,t,n,i,r){return r=1.70158,n*((e=e/i-1)*e*((r+1)*e+r)+1)+t}}),S.Animation=k,S.Transition=x,S.createEffect=c,S.box=function(t){t=e(t);var n=t.offset();return n.width=t.outerWidth(),n.height=t.outerHeight(),n},S.transformOrigin=function(e,t){var n=(e.left-t.left)*t.width/(t.width-e.width),i=(e.top-t.top)*t.height/(t.height-e.height);return{x:isNaN(n)?0:n,y:isNaN(i)?0:i}},S.fillScale=function(e,t){return Math.min(e.width/t.width,e.height/t.height)},S.fitScale=function(e,t){return Math.max(e.width/t.width,e.height/t.height)}}(window.kendo.jQuery),function(e){function t(e){if(!e)return{};var t=e.match(v)||[];return{type:t[1],direction:t[3],reverse:"reverse"===t[5]}}var n=window.kendo,i=n.Observable,r="SCRIPT",o="init",a="show",s="hide",l="transitionStart",c="transitionEnd",d="attach",u="detach",h=/unrecognized expression/,p=i.extend({init:function(e,t){var r=this;t=t||{},i.fn.init.call(r),r.content=e,r.id=n.guid(),r.tagName=t.tagName||"div",r.model=t.model,r._wrap=t.wrap!==!1,this._evalTemplate=t.evalTemplate||!1,r._fragments={},r.bind([o,a,s,l,c],t)},render:function(t){var i=this,r=!i.element;return r&&(i.element=i._createElement()),t&&e(t).append(i.element),r&&(n.bind(i.element,i.model),i.trigger(o)),t&&(i._eachFragment(d),i.trigger(a)),i.element},clone:function(){return new f(this)},triggerBeforeShow:function(){return!0},showStart:function(){this.element.css("display","")},showEnd:function(){},hideStart:function(){},hideEnd:function(){this.hide()},beforeTransition:function(e){this.trigger(l,{type:e})},afterTransition:function(e){this.trigger(c,{type:e})},hide:function(){this._eachFragment(u),this.element.detach(),this.trigger(s)},destroy:function(){var e=this.element;e&&(n.unbind(e),n.destroy(e),e.remove())},fragments:function(t){e.extend(this._fragments,t)},_eachFragment:function(e){for(var t in this._fragments)this._fragments[t][e](this,t)},_createElement:function(){var t,i,o=this,a="<"+o.tagName+" />";try{i=e(document.getElementById(o.content)||o.content),i[0].tagName===r&&(i=i.html())}catch(s){h.test(s.message)&&(i=o.content)}return"string"==typeof i?(i=i.replace(/^\s+|\s+$/g,""),o._evalTemplate&&(i=n.template(i)(o.model||{})),t=e(a).append(i),o._wrap||(t=t.contents())):(t=i,o._wrap&&(t=t.wrapAll(a).parent())),t}}),f=n.Class.extend({init:function(t){e.extend(this,{element:t.element.clone(!0),transition:t.transition,id:t.id}),t.element.parent().append(this.element)},hideStart:e.noop,hideEnd:function(){this.element.remove()},beforeTransition:e.noop,afterTransition:e.noop}),g=p.extend({init:function(e,t){p.fn.init.call(this,e,t),this.containers={}},container:function(e){var t=this.containers[e];return t||(t=this._createContainer(e),this.containers[e]=t),t},showIn:function(e,t,n){this.container(e).show(t,n)},_createContainer:function(e){var t,n=this.render(),i=n.find(e);if(!i.length&&n.is(e)){if(!n.is(e))throw Error("can't find a container with the specified "+e+" selector");i=n}return t=new _(i),t.bind("accepted",function(e){e.view.render(i)}),t}}),m=p.extend({attach:function(e,t){e.element.find(t).replaceWith(this.render())},detach:function(){}}),v=/^(\w+)(:(\w+))?( (\w+))?$/,_=i.extend({init:function(e){i.fn.init.call(this),this.container=e,this.history=[],this.view=null,this.running=!1},after:function(){this.running=!1,this.trigger("complete",{view:this.view}),this.trigger("after")},end:function(){this.view.showEnd(),this.previous.hideEnd(),this.after()},show:function(e,i,r){if(!e.triggerBeforeShow())return this.trigger("after"),!1;r=r||e.id;var o=this,a=e===o.view?e.clone():o.view,s=o.history,l=s[s.length-2]||{},c=l.id===r,d=i||(c?s[s.length-1].transition:e.transition),u=t(d);return o.running&&o.effect.stop(),"none"===d&&(d=null),o.trigger("accepted",{view:e}),o.view=e,o.previous=a,o.running=!0,c?s.pop():s.push({id:r,transition:d}),a?(a.hideStart(),d&&n.effects.enabled?(e.element.addClass("k-fx-hidden"),e.showStart(),c&&!i&&(u.reverse=!u.reverse),o.effect=n.fx(e.element).replace(a.element,u.type).beforeTransition(function(){e.beforeTransition("show"),a.beforeTransition("hide")}).afterTransition(function(){e.afterTransition("show"),a.afterTransition("hide")}).direction(u.direction).setReverse(u.reverse),o.effect.run().then(function(){o.end()})):(e.showStart(),o.end()),!0):(e.showStart(),e.showEnd(),o.after(),!0)}});n.ViewContainer=_,n.Fragment=m,n.Layout=g,n.View=p,n.ViewClone=f}(window.kendo.jQuery),function(e){function t(){this.node=null}function n(e,t,n){this.nodeName=e,this.attr=t||{},this.cssText=null,this.children=n||[]}function i(e){this.nodeValue=e}function r(e){this.html=e}function o(e){return new r(e)}function a(e,t,i){return new n(e,t,i)}function s(e){return new i(e)}function l(e){this.root=e,this.children=[]}t.prototype={remove:function(){this.node.parentNode.removeChild(this.node)}},n.prototype=new t,n.prototype.render=function(e,t){var n,i,r,o,a,s,l,c,d=this.children,u=d.length;if(t&&t.nodeName===this.nodeName){if(n=t.node,r=t.children,Math.abs(r.length-u)>2)return void this.render({appendChild:function(n){e.replaceChild(n,t.node)}},null);for(i=0;u>i;i++)d[i].render(n,r[i]);for(i=u,u=r.length;u>i;i++)r[i].remove()}else{for(t&&(t.remove(),t=null),n=document.createElement(this.nodeName),i=0;u>i;i++)d[i].render(n,null);e.appendChild(n)}o=this.attr;for(a in o)if(!t||o[a]!==t.attr[a])if(void 0!==n[a])if("style"!==a)n[a]=o[a];else{s="",l=o[a];for(c in l)s+=c,s+=":",s+=l[c],s+=";";t&&t.cssText===s||(n.style.cssText=s),this.cssText=s}else n.setAttribute(a,o[a]);if(t)for(a in t.attr)void 0===o[a]&&(void 0!==n[a]?"style"===a?n.style.cssText="":"className"===a?n[a]="":n.removeAttribute(a):n.removeAttribute(a));this.node=n},i.prototype=new t,i.prototype.nodeName="#text",i.prototype.render=function(e,t){var n;t&&t.nodeName===this.nodeName?(n=t.node,this.nodeValue!==t.nodeValue&&(n.nodeValue=this.nodeValue)):(t&&t.remove(),n=document.createTextNode(this.nodeValue),e.appendChild(n)),this.node=n},r.prototype={nodeName:"#html",remove:function(){for(var e=0;this.nodes.length>e;e++)this.nodes[e].parentNode.removeChild(this.nodes[e])},render:function(e,t){var n,i;if(t&&t.nodeName===this.nodeName&&t.html===this.html)this.nodes=t.nodes.slice(0);else for(t&&t.remove(),n=e.lastChild,e.insertAdjacentHTML("beforeend",this.html),this.nodes=[],i=n?n.nextSibling:e.firstChild;i;i=i.nextSibling)this.nodes.push(i)}},l.prototype={html:o,element:a,text:s,render:function(e){var t,n,i=this.children;for(t=0,n=e.length;n>t;t++)e[t].render(this.root,i[t]);for(t=n;i.length>t;t++)i[t].remove();this.children=e}},e.dom={html:o,text:s,element:a,Tree:l}}(window.kendo),function(e){function t(e){var n=Math.floor(e/26)-1;return(n>=0?t(n):"")+String.fromCharCode(65+e%26)}function n(e,n){return t(n)+(e+1)}function i(e){return 6>e.length&&(e=e.replace(/(\w)/g,function(e,t){return t+t})),e=e.substring(1).toUpperCase(),8>e.length&&(e="FF"+e),e}var r='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',o=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>${creator}</dc:creator><cp:lastModifiedBy>${lastModifiedBy}</cp:lastModifiedBy><dcterms:created xsi:type="dcterms:W3CDTF">${created}</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">${modified}</dcterms:modified></cp:coreProperties>'),a=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>${sheets.length}</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="${sheets.length}" baseType="lpstr"># for (var idx = 0; idx < sheets.length; idx++) { ## if (sheets[idx].options.title) { #<vt:lpstr>${sheets[idx].options.title}</vt:lpstr># } else { #<vt:lpstr>Sheet${idx+1}</vt:lpstr># } ## } #</vt:vector></TitlesOfParts><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>14.0300</AppVersion></Properties>'),s=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="xml" ContentType="application/xml" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/># for (var idx = 1; idx <= count; idx++) { #<Override PartName="/xl/worksheets/sheet${idx}.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /># } #<Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml" /><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" /></Types>'),l=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="9303" /><workbookPr defaultThemeVersion="124226" /><bookViews><workbookView xWindow="240" yWindow="45" windowWidth="18195" windowHeight="7995" /></bookViews><sheets># for (var idx = 0; idx < sheets.length; idx++) { ## if (sheets[idx].options.title) { #<sheet name="${sheets[idx].options.title}" sheetId="${idx+1}" r:id="rId${idx+1}" /># } else { #<sheet name="Sheet${idx+1}" sheetId="${idx+1}" r:id="rId${idx+1}" /># } ## } #</sheets><calcPr calcId="145621" /></workbook>'),c=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" mc:Ignorable="x14ac"><dimension ref="A1" /><sheetViews><sheetView tabSelected="1" workbookViewId="0"># if (freezePane) { #<pane state="frozen"# if (freezePane.colSplit) { # xSplit="${freezePane.colSplit}"# } ## if (freezePane.rowSplit) { # ySplit="${freezePane.rowSplit}"# } # topLeftCell="${String.fromCharCode(65 + (freezePane.colSplit || 0))}${(freezePane.rowSplit || 0)+1}"/># } #</sheetView></sheetViews><sheetFormatPr defaultRowHeight="15" x14ac:dyDescent="0.25" /># if (columns) { #<cols># for (var ci = 0; ci < columns.length; ci++) { ## var column = columns[ci]; ## if (column.width) { #<col min="${ci+1}" max="${ci+1}" customWidth="1"# if (column.autoWidth) { # width="${((column.width*7+5)/7*256)/256}" bestFit="1"# } else { # width="${(((column.width)/7)*100+0.5)/100}" # } #/># } ## } #</cols># } #<sheetData># for (var ri = 0; ri < data.length; ri++) { ## var row = data[ri]; #<row r="${ri + 1}"># for (var ci = 0; ci < row.data.length; ci++) { ## var cell = row.data[ci];#<c r="${cell.ref}"# if (cell.style) { # s="${cell.style}" # } ## if (cell.type) { # t="${cell.type}"# } #># if (cell.value != null) { #<v>${cell.value}</v># } #</c># } #</row># } #</sheetData># if (filter) { #<autoFilter ref="${filter.from}:${filter.to}"/># } ## if (mergeCells.length) { #<mergeCells count="${mergeCells.length}"># for (var ci = 0; ci < mergeCells.length; ci++) { #<mergeCell ref="${mergeCells[ci]}"/># } #</mergeCells># } #<pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" /></worksheet>'),d=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"># for (var idx = 1; idx <= count; idx++) { #<Relationship Id="rId${idx}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet${idx}.xml" /># } #<Relationship Id="rId${count+1}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml" /><Relationship Id="rId${count+2}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml" /></Relationships>'),u=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="${count}" uniqueCount="${uniqueCount}"># for (var index in indexes) { #<si><t>${index.substring(1)}</t></si># } #</sst>'),h=e.template('<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="${formats.length}"># for (var fi = 0; fi < formats.length; fi++) { ## var format = formats[fi]; #<numFmt formatCode="${format.format}" numFmtId="${165+fi}" /># } #</numFmts><fonts count="${fonts.length+1}" x14ac:knownFonts="1"><font><sz val="11" /><color theme="1" /><name val="Calibri" /><family val="2" /><scheme val="minor" /></font># for (var fi = 0; fi < fonts.length; fi++) { ## var font = fonts[fi]; #<font># if (font.bold) { #<b/># } ## if (font.italic) { #<i/># } ## if (font.underline) { #<u/># } ## if (font.color) { #<color rgb="${font.color}" /># } else { #<color theme="1" /># } ## if (font.fontSize) { #<sz val="${font.fontSize}" /># } else { #<sz val="11" /># } ## if (font.fontName) { #<name val="${font.fontName}" /># } else { #<name val="Calibri" /><scheme val="minor" /># } #<family val="2" /></font># } #</fonts><fills count="${fills.length+1}"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill># for (var fi = 0; fi < fills.length; fi++) { ## var fill = fills[fi]; ## if (fill.background) { #<fill><patternFill patternType="solid"><fgColor rgb="${fill.background}"/></patternFill></fill># } ## } #</fills><borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellXfs count="${styles.length+1}"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/># for (var si = 0; si < styles.length; si++) { ## var style = styles[si]; #<xf xfid="0"# if (style.fontId) { # fontId="${style.fontId}" applyFont="1"# } ## if (style.fillId) { # fillId="${style.fillId}" applyFill="1"# } ## if (style.numFmtId) { # numFmtId="${style.numFmtId}" applyNumberFormat="1"# } ## if (style.hAlign || style.vAlign) { # applyAlignment="1"# } #># if (style.hAlign || style.vAlign) { #<alignment# if (style.hAlign) { # horizontal="${style.hAlign}"# } ## if (style.vAlign) { # vertical="${style.vAlign}"# } #/># } #</xf># } #</cellXfs><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleMedium9" /></styleSheet>'),p=e.Class.extend({init:function(e,t,n){this.options=e,this._strings=t,this._styles=n,this._mergeCells=[]},toXML:function(){var e=this.options.rows||[],t=this.options.filter;return c({freezePane:this.options.freezePane,columns:this.options.columns,data:$.map(e,$.proxy(this._row,this,e)),mergeCells:this._mergeCells,filter:t?{from:n(0,t.from),to:n(0,t.to)}:null})},_row:function(e,t,n){return this._cellIndex=0,{data:$.map(t.cells,$.proxy(this._cell,this,e,n))}},_lookupString:function(e){var t="$"+e,n=this._strings.indexes[t];return void 0!==n?e=n:(e=this._strings.indexes[t]=this._strings.uniqueCount,this._strings.uniqueCount++),this._strings.count++,e},_lookupStyle:function(t){var n,i=e.stringify(t);return"{}"==i?0:(n=$.inArray(i,this._styles),0>n&&(n=this._styles.push(i)-1),n+1)},_cell:function(t,i,r){var o,a,s,l,c,d,u,h,p,f,g;if(!r)return void this._cellIndex++;if(o=r.value,a={bold:r.bold,color:r.color,background:r.background,italic:r.italic,underline:r.underline,fontName:r.fontName,fontSize:r.fontSize,format:r.format,hAlign:r.hAlign,vAlign:r.vAlign},s=this.options.columns||[],l=s[this._cellIndex],l&&l.autoWidth&&(l.width=Math.max(l.width||0,(""+o).length)),c=typeof o,"string"===c?(o=this._lookupString(o),c="s"):"number"===c?c="n":"boolean"===c?(c="b",o=+o):o&&o.getTime?(c="d",o=e.timezone.remove(o,"Etc/UTC").toJSON(),a.format||(a.format="mm-dd-yy")):(c=null,o=""),a=this._lookupStyle(a),d={value:o,type:c,style:a,ref:n(i,this._cellIndex)},u=r.colSpan||1,h=r.rowSpan||1,u>1||h>1){for(p=[d],f=1;u>f;f++)this._cellIndex++,p[f]={ref:n(i,this._cellIndex)};for(g=1;h>g;g++)t[i+g]&&t[i+g].cells.splice(this._cellIndex,0,{});this._mergeCells.push(d.ref+":"+n(i+h-1,this._cellIndex)),d=p}return this._cellIndex++,d}}),f={General:0,0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49,"[$-404]e/m/d":27,"m/d/yy":30,t0:59,"t0.00":60,"t#,##0":61,"t#,##0.00":62,"t0%":67,"t0.00%":68,"t# ?/?":69,"t# ??/??":70},g=e.Class.extend({init:function(e){this.options=e||{},this._strings={indexes:{},count:0,uniqueCount:0},this._styles=[],this._sheets=$.map(this.options.sheets||[],$.proxy(function(e){return new p(e,this._strings,this._styles)},this))},toDataURL:function(){var t,n,c,p,g,m,v,_,y,w,b,k,x;if("undefined"==typeof JSZip)throw Error("JSZip not found. Check http://docs.telerik.com/kendo-ui/framework/excel/introduction#requirements for more details.");for(t=new JSZip,n=t.folder("docProps"),n.file("core.xml",o({creator:this.options.creator||"Kendo UI",lastModifiedBy:this.options.creator||"Kendo UI",created:this.options.date||(new Date).toJSON(),modified:this.options.date||(new Date).toJSON()})),c=this._sheets.length,n.file("app.xml",a({sheets:this._sheets})),p=t.folder("_rels"),p.file(".rels",r),g=t.folder("xl"),m=g.folder("_rels"),m.file("workbook.xml.rels",d({count:c})),g.file("workbook.xml",l({sheets:this._sheets})),v=g.folder("worksheets"),_=0;c>_;_++)v.file(e.format("sheet{0}.xml",_+1),this._sheets[_].toXML());
return y=$.map(this._styles,$.parseJSON),w=function(e){return e.underline||e.bold||e.italic||e.color||e.fontName||e.fontSize},b=$.map(y,function(e){return e.color&&(e.color=i(e.color)),w(e)?e:void 0}),k=$.map(y,function(e){return e.format&&void 0===f[e.format]?e:void 0}),x=$.map(y,function(e){return e.background?(e.background=i(e.background),e):void 0}),g.file("styles.xml",h({fonts:b,fills:x,formats:k,styles:$.map(y,function(e){var t={};return w(e)&&(t.fontId=$.inArray(e,b)+1),e.background&&(t.fillId=$.inArray(e,x)+2),t.hAlign=e.hAlign,t.vAlign=e.vAlign,e.format&&(t.numFmtId=void 0!==f[e.format]?f[e.format]:165+$.inArray(e,k)),t})})),g.file("sharedStrings.xml",u(this._strings)),t.file("[Content_Types].xml",s({count:c})),"data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,"+t.generate({compression:"DEFLATE"})}});e.ooxml={Workbook:g,Worksheet:p}}(kendo),function(e,t){t.ExcelExporter=t.Class.extend({init:function(n){n.columns=this._trimColumns(n.columns||[]),this.columns=e.map(this._leafColumns(n.columns||[]),this._prepareColumn),this.options=n;var i=n.dataSource;this.dataSource=i instanceof t.data.DataSource?new i.constructor(e.extend({},i.options,{page:n.allPages?0:i.page(),filter:i.filter(),pageSize:n.allPages?i.total():i.pageSize(),sort:i.sort(),group:i.group(),aggregate:i.aggregate()})):t.data.DataSource.create(i),i instanceof t.data.TreeListDataSource&&this.dataSource.data(i.view().toJSON())},_trimColumns:function(t){var n=this;return e.grep(t,function(e){var t=!(!e.field||e.hidden);return!t&&e.columns&&(t=n._trimColumns(e.columns).length>0),t})},_leafColumns:function(e){var t,n=[];for(t=0;e.length>t;t++)e[t].columns?n=n.concat(this._leafColumns(e[t].columns)):n.push(e[t]);return n},workbook:function(){var t=this.dataSource.fetch();return t.then(e.proxy(function(){return{sheets:[{columns:this._columns(),rows:this._rows(),freezePane:this._freezePane(),filter:this._filter()}]}},this))},_prepareColumn:function(n){return n.field&&!n.hidden?e.extend({},n,{groupHeaderTemplate:t.template(n.groupHeaderTemplate||"${title}: ${value}"),groupFooterTemplate:n.groupFooterTemplate?t.template(n.groupFooterTemplate):null,footerTemplate:n.footerTemplate?t.template(n.footerTemplate):null}):void 0},_filter:function(){if(!this.options.filterable)return null;var e=this._depth();return{from:e,to:e+this.columns.length-1}},_dataRows:function(t,n){var i=this._depth(),r=e.map(t,e.proxy(function(t){var r,o,a,s,l,c,d,u;return this._hierarchical()&&(n=this.dataSource.level(t)+1),r=e.map(Array(n),function(){return{background:"#dfdfdf",color:"#333"}}),i&&t.items?(o=e.grep(this.columns,function(e){return e.field==t.field})[0],a=o&&o.title?o.title:t.field,s=o?o.groupHeaderTemplate:null,l=a+": "+t.value,c=e.extend({title:a,field:t.field,value:t.value,aggregates:t.aggregates},t.aggregates[t.field]),s&&(l=s(c)),r.push({value:l,background:"#dfdfdf",color:"#333",colSpan:this.columns.length+i-n}),d=this._dataRows(t.items,n+1),d.unshift({type:"group-header",cells:r}),d.concat(this._footer(t,n+1))):(u=e.map(this.columns,e.proxy(this._cell,this,t)),this._hierarchical()&&(u[0].colSpan=i-n+1),{type:"data",cells:r.concat(u)})},this));return r},_footer:function(t,n){var i=[],r=!1,o=e.map(this.columns,function(e){return e.groupFooterTemplate?(r=!0,{background:"#dfdfdf",color:"#333",value:e.groupFooterTemplate(t.aggregates[e.field])}):{background:"#dfdfdf",color:"#333"}});return r&&i.push({type:"group-footer",cells:e.map(Array(n),function(){return{background:"#dfdfdf",color:"#333"}}).concat(o)}),i},_isColumnVisible:function(e){return this._visibleColumns([e]).length>0&&(e.field||e.columns)},_visibleColumns:function(t){var n=this;return e.grep(t,function(e){var t=!e.hidden;return t&&e.columns&&(t=n._visibleColumns(e.columns).length>0),t})},_headerRow:function(t,n){var i=e.map(t.cells,function(e){return{background:"#7a7a7a",color:"#fff",value:e.title,colSpan:e.colSpan>1?e.colSpan:1,rowSpan:t.rowSpan>1&&!e.colSpan?t.rowSpan:1}});return this._hierarchical()&&(i[0].colSpan=this._depth()+1),{type:"header",cells:e.map(Array(n.length),function(){return{background:"#7a7a7a",color:"#fff"}}).concat(i)}},_prependHeaderRows:function(e){var t,n=this.dataSource.group(),i=[{rowSpan:1,cells:[],index:0}];for(this._prepareHeaderRows(i,this.options.columns),t=i.length-1;t>=0;t--)e.unshift(this._headerRow(i[t],n))},_prepareHeaderRows:function(e,t,n,i){var r,o,a,s=i||e[e.length-1],l=e[s.index+1],c=0;for(a=0;t.length>a;a++)r=t[a],this._isColumnVisible(r)&&(o={title:r.title||r.field,colSpan:0},s.cells.push(o),r.columns&&r.columns.length&&(l||(l={rowSpan:0,cells:[],index:e.length},e.push(l)),o.colSpan=this._trimColumns(this._visibleColumns(r.columns)).length,this._prepareHeaderRows(e,r.columns,o,l),c+=o.colSpan-1,s.rowSpan=e.length-s.index));n&&(n.colSpan+=c)},_rows:function(){var t,n,i=this.dataSource.group(),r=this._dataRows(this.dataSource.view(),0);return this.columns.length&&(this._prependHeaderRows(r),t=!1,n=e.map(this.columns,e.proxy(function(e){return e.footerTemplate?(t=!0,{background:"#dfdfdf",color:"#333",value:e.footerTemplate(this.dataSource.aggregates()[e.field])}):{background:"#dfdfdf",color:"#333"}},this)),t&&r.push({type:"footer",cells:e.map(Array(i.length),function(){return{background:"#dfdfdf",color:"#333"}}).concat(n)})),r},_headerDepth:function(e){var t,n,i=1,r=0;for(t=0;e.length>t;t++)e[t].columns&&(n=this._headerDepth(e[t].columns),n>r&&(r=n));return i+r},_freezePane:function(){var t=this._visibleColumns(this.options.columns||[]),n=this._trimColumns(this._leafColumns(e.grep(t,function(e){return e.locked}))).length;return{rowSplit:this._headerDepth(t),colSplit:n?n+this.dataSource.group().length:0}},_cell:function(e,t){return t.field?{value:e.get(t.field)}:void 0},_hierarchical:function(){return this.options.hierarchy&&this.dataSource.level},_depth:function(){var e,t,n,i=this.dataSource,r=0;if(this._hierarchical()){for(e=i.view(),t=0;e.length>t;t++)n=i.level(e[t]),n>r&&(r=n);r++}else r=i.group().length;return r},_columns:function(){var t=this._depth(),n=e.map(Array(t),function(){return{width:20}});return n.concat(e.map(this.columns,function(e){return{width:parseInt(e.width,10),autoWidth:e.width?!1:!0}}))}}),t.ExcelMixin={extend:function(t){t.events.push("excelExport"),t.options.excel=e.extend(t.options.excel,this.options),t.saveAsExcel=this.saveAsExcel},options:{proxyURL:"",allPages:!1,filterable:!1,fileName:"Export.xlsx"},saveAsExcel:function(){var n=this.options.excel||{},i=new t.ExcelExporter({columns:this.columns,dataSource:this.dataSource,allPages:n.allPages,filterable:n.filterable,hierarchy:n.hierarchy});i.workbook().then(e.proxy(function(e){if(!this.trigger("excelExport",{workbook:e})){var i=new t.ooxml.Workbook(e);t.saveAs({dataURI:i.toDataURL(),fileName:e.fileName||n.fileName,proxyURL:n.proxyURL,forceProxy:n.forceProxy})}},this))}}}(kendo.jQuery,kendo),function(){kendo.data.transports.signalr=kendo.data.RemoteTransport.extend({init:function(e){var t,n=e&&e.signalr?e.signalr:{},i=n.promise;if(!i)throw Error('The "promise" option must be set.');if("function"!=typeof i.done||"function"!=typeof i.fail)throw Error('The "promise" option must be a Promise.');if(this.promise=i,t=n.hub,!t)throw Error('The "hub" option must be set.');if("function"!=typeof t.on||"function"!=typeof t.invoke)throw Error('The "hub" option is not a valid SignalR hub proxy.');this.hub=t,kendo.data.RemoteTransport.fn.init.call(this,e)},push:function(e){var t=this.options.signalr.client||{};t.create&&this.hub.on(t.create,e.pushCreate),t.update&&this.hub.on(t.update,e.pushUpdate),t.destroy&&this.hub.on(t.destroy,e.pushDestroy)},_crud:function(e,t){var n,i,r=this.hub,o=this.options.signalr.server;if(!o||!o[t])throw Error(kendo.format('The "server.{0}" option must be set.',t));n=[o[t]],i=this.parameterMap(e.data,t),$.isEmptyObject(i)||n.push(i),this.promise.done(function(){r.invoke.apply(r,n).done(e.success).fail(e.error)})},read:function(e){this._crud(e,"read")},create:function(e){this._crud(e,"create")},update:function(e){this._crud(e,"update")},destroy:function(e){this._crud(e,"destroy")}})}(),function(e,t,n){function i(e,r){var a,d;if(null==e||"none"==e)return null;if(e instanceof s)return e;if(e=e.toLowerCase(),a=o.exec(e))return e="transparent"==a[1]?new l(1,1,1,0):i(u.namedColors[a[1]],r),e.match=[a[1]],e;if((a=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i.exec(e))?d=new c(n(a[1],16),n(a[2],16),n(a[3],16),1):(a=/^#?([0-9a-f])([0-9a-f])([0-9a-f])/i.exec(e))?d=new c(n(a[1]+a[1],16),n(a[2]+a[2],16),n(a[3]+a[3],16),1):(a=/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(e))?d=new c(n(a[1],10),n(a[2],10),n(a[3],10),1):(a=/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(e))?d=new c(n(a[1],10),n(a[2],10),n(a[3],10),t(a[4])):(a=/^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(e))?d=new l(t(a[1])/100,t(a[2])/100,t(a[3])/100,1):(a=/^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(e))&&(d=new l(t(a[1])/100,t(a[2])/100,t(a[3])/100,t(a[4]))),d)d.match=a;else if(!r)throw Error("Cannot parse color: "+e);return d}function r(e,t,n){for(n||(n="0"),e=e.toString(16);t>e.length;)e="0"+e;return e}var o,a,s,l,c,d,u=function(e){var t,n,i,r,o,a=this,s=u.formats;if(1===arguments.length)for(e=a.resolveColor(e),r=0;s.length>r;r++)t=s[r].re,n=s[r].process,i=t.exec(e),i&&(o=n(i),a.r=o[0],a.g=o[1],a.b=o[2]);else a.r=arguments[0],a.g=arguments[1],a.b=arguments[2];a.r=a.normalizeByte(a.r),a.g=a.normalizeByte(a.g),a.b=a.normalizeByte(a.b)};u.prototype={toHex:function(){var e=this,t=e.padDigit,n=e.r.toString(16),i=e.g.toString(16),r=e.b.toString(16);return"#"+t(n)+t(i)+t(r)},resolveColor:function(e){return e=e||"black","#"==e.charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase(),e=u.namedColors[e]||e},normalizeByte:function(e){return 0>e||isNaN(e)?0:e>255?255:e},padDigit:function(e){return 1===e.length?"0"+e:e},brightness:function(e){var t=this,n=Math.round;return t.r=n(t.normalizeByte(t.r*e)),t.g=n(t.normalizeByte(t.g*e)),t.b=n(t.normalizeByte(t.b*e)),t},percBrightness:function(){var e=this;return Math.sqrt(.241*e.r*e.r+.691*e.g*e.g+.068*e.b*e.b)}},u.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[n(e[1],10),n(e[2],10),n(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[n(e[1],16),n(e[2],16),n(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[n(e[1]+e[1],16),n(e[2]+e[2],16),n(e[3]+e[3],16)]}}],u.namedColors={aqua:"00ffff",azure:"f0ffff",beige:"f5f5dc",black:"000000",blue:"0000ff",brown:"a52a2a",coral:"ff7f50",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgray:"a9a9a9",darkgreen:"006400",darkorange:"ff8c00",darkred:"8b0000",dimgray:"696969",fuchsia:"ff00ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lightblue:"add8e6",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumblue:"0000cd",navy:"000080",olive:"808000",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",pink:"ffc0cb",plum:"dda0dd",purple:"800080",red:"ff0000",royalblue:"4169e1",salmon:"fa8072",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",steelblue:"4682b4",tan:"d2b48c",teal:"008080",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},o=["transparent"];for(a in u.namedColors)u.namedColors.hasOwnProperty(a)&&o.push(a);o=RegExp("^("+o.join("|")+")(\\W|$)","i"),s=kendo.Class.extend({toHSV:function(){return this},toRGB:function(){return this},toHex:function(){return this.toBytes().toHex()},toBytes:function(){return this},toCss:function(){return"#"+this.toHex()},toCssRgba:function(){var e=this.toBytes();return"rgba("+e.r+", "+e.g+", "+e.b+", "+t((+this.a).toFixed(3))+")"},toDisplay:function(){return kendo.support.browser.msie&&9>kendo.support.browser.version?this.toCss():this.toCssRgba()},equals:function(e){return e===this||null!==e&&this.toCssRgba()==i(e).toCssRgba()},diff:function(e){if(null==e)return 0/0;var t=this.toBytes();return e=e.toBytes(),Math.sqrt(Math.pow(.3*(t.r-e.r),2)+Math.pow(.59*(t.g-e.g),2)+Math.pow(.11*(t.b-e.b),2))},clone:function(){var e=this.toBytes();return e===this&&(e=new c(e.r,e.g,e.b,e.a)),e}}),l=s.extend({init:function(e,t,n,i){this.r=e,this.g=t,this.b=n,this.a=i},toHSV:function(){var e,t,n=this.r,i=this.g,r=this.b,o=Math.min(n,i,r),a=Math.max(n,i,r),s=a,l=a-o;return 0===l?new d(0,0,s,this.a):(0!==a?(t=l/a,e=n==a?(i-r)/l:i==a?2+(r-n)/l:4+(n-i)/l,e*=60,0>e&&(e+=360)):(t=0,e=-1),new d(e,t,s,this.a))},toBytes:function(){return new c(255*this.r,255*this.g,255*this.b,this.a)}}),c=l.extend({init:function(e,t,n,i){this.r=Math.round(e),this.g=Math.round(t),this.b=Math.round(n),this.a=i},toRGB:function(){return new l(this.r/255,this.g/255,this.b/255,this.a)},toHSV:function(){return this.toRGB().toHSV()},toHex:function(){return r(this.r,2)+r(this.g,2)+r(this.b,2)},toBytes:function(){return this}}),d=s.extend({init:function(e,t,n,i){this.h=e,this.s=t,this.v=n,this.a=i},toRGB:function(){var e,t,n,i,r,o,a,s,c=this.h,d=this.s,u=this.v;if(0===d)t=n=i=u;else switch(c/=60,e=Math.floor(c),r=c-e,o=u*(1-d),a=u*(1-d*r),s=u*(1-d*(1-r)),e){case 0:t=u,n=s,i=o;break;case 1:t=a,n=u,i=o;break;case 2:t=o,n=u,i=s;break;case 3:t=o,n=a,i=u;break;case 4:t=s,n=o,i=u;break;default:t=u,n=o,i=a}return new l(t,n,i,this.a)},toBytes:function(){return this.toRGB().toBytes()}}),u.fromBytes=function(e,t,n,i){return new c(e,t,n,null!=i?i:1)},u.fromRGB=function(e,t,n,i){return new l(e,t,n,null!=i?i:1)},u.fromHSV=function(e,t,n,i){return new d(e,t,n,null!=i?i:1)},kendo.Color=u,kendo.parseColor=i}(window.kendo.jQuery,parseFloat,parseInt),function(e){function t(e){return typeof e!==F}function n(e,t){var n=i(t);return A.round(e*n)/n}function i(e){return e?A.pow(10,e):1}function r(e,t,n){return A.max(A.min(e,n),t)}function o(e){return e*P}function a(e){return e/P}function s(e){return"number"==typeof e&&!isNaN(e)}function l(e,n){return t(e)?e:n}function c(e){return e*e}function d(e){var t,n=[];for(t in e)n.push(t+e[t]);return n.sort().join("")}function u(e){var t,n=2166136261;for(t=0;e.length>t;++t)n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24),n^=e.charCodeAt(t);return n>>>0}function h(e){return u(d(e))}function p(e){var t,n=e.length,i=I,r=z;for(t=0;n>t;t++)r=A.max(r,e[t]),i=A.min(i,e[t]);return{min:i,max:r}}function f(e){return p(e).min}function g(e){return p(e).max}function m(e){return _(e).min}function v(e){return _(e).max}function _(e){var t,n,i,r=I,o=z;for(t=0,n=e.length;n>t;t++)i=e[t],null!==i&&isFinite(i)&&(r=A.min(r,i),o=A.max(o,i));return{min:r===I?void 0:r,max:o===z?void 0:o}}function y(e){return e?e[e.length-1]:void 0}function w(e,t){return e.push.apply(e,t),e}function b(e){return E.template(e,{useWithBlock:!1,paramName:"d"})}function k(e,n){return t(n)&&null!==n?" "+e+"='"+n+"' ":""}function x(e){var t,n="";for(t=0;e.length>t;t++)n+=k(e[t][0],e[t][1]);return n}function C(e){var n,i,r="";for(n=0;e.length>n;n++)i=e[n][1],t(i)&&(r+=e[n][0]+":"+i+";");return""!==r?r:void 0}function S(e){return"string"!=typeof e&&(e+="px"),e}function T(e){var t,n,i=[];if(e)for(t=E.toHyphens(e).split("-"),n=0;t.length>n;n++)i.push("k-pos-"+t[n]);return i.join(" ")}function D(e){return""===e||null===e||"none"===e||"transparent"===e||!t(e)}var A=Math,E=window.kendo,M=E.deepExtend,P=A.PI/180,I=Number.MAX_VALUE,z=-Number.MAX_VALUE,F="undefined",R=Date.now;R||(R=function(){return(new Date).getTime()}),M(E,{util:{MAX_NUM:I,MIN_NUM:z,append:w,arrayLimits:p,arrayMin:f,arrayMax:g,defined:t,deg:a,hashKey:u,hashObject:h,isNumber:s,isTransparent:D,last:y,limitValue:r,now:R,objectKey:d,round:n,rad:o,renderAttr:k,renderAllAttr:x,renderPos:T,renderSize:S,renderStyle:C,renderTemplate:b,sparseArrayLimits:_,sparseArrayMin:m,sparseArrayMax:v,sqr:c,valueOrDefault:l}}),E.dataviz.util=E.util}(window.kendo.jQuery),function(){function e(e){var n,i,r,a,s,l,c,d="",u=0;for(e=t(e);e.length>u;)n=e.charCodeAt(u++),i=e.charCodeAt(u++),r=e.charCodeAt(u++),a=n>>2,s=(3&n)<<4|i>>4,l=(15&i)<<2|r>>6,c=63&r,isNaN(i)?l=c=64:isNaN(r)&&(c=64),d=d+o.charAt(a)+o.charAt(s)+o.charAt(l)+o.charAt(c);return d}function t(e){var t,n,i;for(e=e.replace(/\r\n/g,"\n"),t="",n=0;e.length>n;n++)i=e.charCodeAt(n),128>i?t+=r(i):2048>i?(t+=r(192|i>>>6),t+=r(128|63&i)):65536>i&&(t+=r(224|i>>>12),t+=r(128|i>>>6&63),t+=r(128|63&i));return t}var n=window.kendo,i=n.deepExtend,r=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i(n.util,{encodeBase64:e,encodeUTF8:t})}(window.kendo.jQuery),function(e){var t=Math,n=window.kendo,i=n.deepExtend,r=e.inArray,o={observers:function(){return this._observers=this._observers||[]},addObserver:function(e){return this._observers?this._observers.push(e):this._observers=[e],this},removeObserver:function(e){var t=this.observers(),n=r(e,t);return-1!=n&&t.splice(n,1),this},trigger:function(e,t){var n,i,r=this._observers;if(r&&!this._suspended)for(i=0;r.length>i;i++)n=r[i],n[e]&&n[e](t);return this},optionsChange:function(e){this.trigger("optionsChange",e)},geometryChange:function(e){this.trigger("geometryChange",e)},suspend:function(){return this._suspended=(this._suspended||0)+1,this},resume:function(){return this._suspended=t.max((this._suspended||0)-1,0),this},_observerField:function(e,t){this[e]&&this[e].removeObserver(this),this[e]=t,t.addObserver(this)}};i(n,{mixins:{ObserversMixin:o}})}(window.kendo.jQuery),function(e){function t(e){return null===e?null:e instanceof m?e:new m(e)}function n(e){return e&&y.isFunction(e.matrix)?e.matrix():e}function i(e,t,n,i){var r=0,o=0;return i&&(r=v.atan2(i.c*n,i.a*t),0!==i.b&&(o=v.atan2(i.d*n,i.b*t))),{x:r,y:o}}function r(e,t){for(;t>e;)e+=90;return e}function o(e,t){var n,i,r;for(n=0;t.length>n;n++)i=t[n],r=i.charAt(0).toUpperCase()+i.substring(1,i.length),e["set"+r]=a(i),e["get"+r]=s(i)}function a(e){return function(t){return this[e]!==t&&(this[e]=t,this.geometryChange()),this}}function s(e){return function(){return this[e]}}function l(e,t,n){e>t&&(t+=360);var i=v.abs(t-e);return n||(i=360-i),i}function c(e,t,n,i,r,o){var a=D((r-e)/n,3),s=D((o-t)/i,3);return D(T(v.atan2(s,a)))}function d(e,t,n,i,r,o,a,s){var d,u,h,p,f,g,m,y,w,b,k,x,C,S,T,D,A,E;if(t!==i)w=n-e,b=i-t,k=_(r,2),x=_(o,2),C=(x*w*(e+n)+k*b*(t+i))/(2*k*b),S=C-i,T=-(w*x)/(k*b),f=1/k+_(T,2)/x,g=2*(T*S/x-n/k),m=_(n,2)/k+_(S,2)/x-1,y=v.sqrt(_(g,2)-4*f*m),d=(-g-y)/(2*f),u=C+T*d,h=(-g+y)/(2*f),p=C+T*h;else{if(e===n)return!1;g=-2*i,m=_((n-e)*o/(2*r),2)+_(i,2)-_(o,2),y=v.sqrt(_(g,2)-4*m),d=h=(e+n)/2,u=(-g-y)/2,p=(-g+y)/2}return D=c(d,u,r,o,e,t),A=c(d,u,r,o,n,i),E=l(D,A,s),(a&&180>=E||!a&&E>180)&&(d=h,u=p,D=c(d,u,r,o,e,t),A=c(d,u,r,o,n,i)),{center:new P(d,u),startAngle:D,endAngle:A}}var u,h,p,f,g,m,v=Math,_=v.pow,y=window.kendo,w=y.Class,b=y.deepExtend,k=y.mixins.ObserversMixin,x=y.util,C=x.defined,S=x.rad,T=x.deg,D=x.round,A=v.PI/2,E=x.MIN_NUM,M=x.MAX_NUM,P=w.extend({init:function(e,t){this.x=e||0,this.y=t||0},equals:function(e){return e&&e.x===this.x&&e.y===this.y},clone:function(){return new P(this.x,this.y)},rotate:function(e,n){return this.transform(t().rotate(e,n))},translate:function(e,t){return this.x+=e,this.y+=t,this.geometryChange(),this},translateWith:function(e){return this.translate(e.x,e.y)},move:function(e,t){return this.x=this.y=0,this.translate(e,t)},scale:function(e,t){return C(t)||(t=e),this.x*=e,this.y*=t,this.geometryChange(),this},scaleCopy:function(e,t){return this.clone().scale(e,t)},transform:function(e){var t=n(e),i=this.x,r=this.y;return this.x=t.a*i+t.c*r+t.e,this.y=t.b*i+t.d*r+t.f,this.geometryChange(),this},transformCopy:function(e){var t=this.clone();return e&&t.transform(e),t},distanceTo:function(e){var t=this.x-e.x,n=this.y-e.y;return v.sqrt(t*t+n*n)},round:function(e){return this.x=D(this.x,e),this.y=D(this.y,e),this.geometryChange(),this},toArray:function(e){var t=C(e),n=t?D(this.x,e):this.x,i=t?D(this.y,e):this.y;return[n,i]}});o(P.fn,["x","y"]),b(P.fn,k),P.fn.toString=function(e,t){var n=this.x,i=this.y;return C(e)&&(n=D(n,e),i=D(i,e)),t=t||" ",n+t+i},P.create=function(e,t){return C(e)?e instanceof P?e:1===arguments.length&&2===e.length?new P(e[0],e[1]):new P(e,t):void 0},P.min=function(){var e,t,n=x.MAX_NUM,i=x.MAX_NUM;for(e=0;arguments.length>e;e++)t=arguments[e],n=v.min(t.x,n),i=v.min(t.y,i);return new P(n,i)},P.max=function(){var e,t,n=x.MIN_NUM,i=x.MIN_NUM;for(e=0;arguments.length>e;e++)t=arguments[e],n=v.max(t.x,n),i=v.max(t.y,i);return new P(n,i)},P.minPoint=function(){return new P(E,E)},P.maxPoint=function(){return new P(M,M)},P.ZERO=new P(0,0),u=w.extend({init:function(e,t){this.width=e||0,this.height=t||0},equals:function(e){return e&&e.width===this.width&&e.height===this.height},clone:function(){return new u(this.width,this.height)},toArray:function(e){var t=C(e),n=t?D(this.width,e):this.width,i=t?D(this.height,e):this.height;return[n,i]}}),o(u.fn,["width","height"]),b(u.fn,k),u.create=function(e,t){return C(e)?e instanceof u?e:1===arguments.length&&2===e.length?new u(e[0],e[1]):new u(e,t):void 0},u.ZERO=new u(0,0),h=w.extend({init:function(e,t){this.setOrigin(e||new P),this.setSize(t||new u)},clone:function(){return new h(this.origin.clone(),this.size.clone())},equals:function(e){return e&&e.origin.equals(this.origin)&&e.size.equals(this.size)},setOrigin:function(e){return this._observerField("origin",P.create(e)),this.geometryChange(),this},getOrigin:function(){return this.origin},setSize:function(e){return this._observerField("size",u.create(e)),this.geometryChange(),this},getSize:function(){return this.size},width:function(){return this.size.width},height:function(){return this.size.height},topLeft:function(){return this.origin.clone()},bottomRight:function(){return this.origin.clone().translate(this.width(),this.height())},topRight:function(){return this.origin.clone().translate(this.width(),0)},bottomLeft:function(){return this.origin.clone().translate(0,this.height())},center:function(){return this.origin.clone().translate(this.width()/2,this.height()/2)},bbox:function(e){var t=this.topLeft().transformCopy(e),n=this.topRight().transformCopy(e),i=this.bottomRight().transformCopy(e),r=this.bottomLeft().transformCopy(e);return h.fromPoints(t,n,i,r)}}),b(h.fn,k),h.fromPoints=function(){var e=P.min.apply(this,arguments),t=P.max.apply(this,arguments),n=new u(t.x-e.x,t.y-e.y);return new h(e,n)},h.union=function(e,t){return h.fromPoints(P.min(e.topLeft(),t.topLeft()),P.max(e.bottomRight(),t.bottomRight()))},h.intersect=function(e,t){return e={left:e.topLeft().x,top:e.topLeft().y,right:e.bottomRight().x,bottom:e.bottomRight().y},t={left:t.topLeft().x,top:t.topLeft().y,right:t.bottomRight().x,bottom:t.bottomRight().y},t.right>=e.left&&e.right>=t.left&&t.bottom>=e.top&&e.bottom>=t.top?h.fromPoints(new P(v.max(e.left,t.left),v.max(e.top,t.top)),new P(v.min(e.right,t.right),v.min(e.bottom,t.bottom))):void 0},p=w.extend({init:function(e,t){this.setCenter(e||new P),this.setRadius(t||0)},setCenter:function(e){return this._observerField("center",P.create(e)),this.geometryChange(),this},getCenter:function(){return this.center},equals:function(e){return e&&e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return new p(this.center.clone(),this.radius)},pointAt:function(e){return this._pointAt(S(e))},bbox:function(e){var t,n,r,o,a=P.maxPoint(),s=P.minPoint(),l=i(this.center,this.radius,this.radius,e);for(t=0;4>t;t++)n=this._pointAt(l.x+t*A).transformCopy(e),r=this._pointAt(l.y+t*A).transformCopy(e),o=new P(n.x,r.y),a=P.min(a,o),s=P.max(s,o);return h.fromPoints(a,s)},_pointAt:function(e){var t=this.center,n=this.radius;return new P(t.x-n*v.cos(e),t.y-n*v.sin(e))}}),o(p.fn,["radius"]),b(p.fn,k),f=w.extend({init:function(e,t){this.setCenter(e||new P),t=t||{},this.radiusX=t.radiusX,this.radiusY=t.radiusY||t.radiusX,this.startAngle=t.startAngle,this.endAngle=t.endAngle,this.anticlockwise=t.anticlockwise||!1},clone:function(){return new f(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})},setCenter:function(e){return this._observerField("center",P.create(e)),this.geometryChange(),this},getCenter:function(){return this.center},MAX_INTERVAL:45,pointAt:function(e){var t=this.center,n=S(e);return new P(t.x+this.radiusX*v.cos(n),t.y+this.radiusY*v.sin(n))},curvePoints:function(){var e,t,n,i=this.startAngle,r=this.anticlockwise?-1:1,o=[this.pointAt(i)],a=i,s=this._arcInterval(),l=s.endAngle-s.startAngle,c=v.ceil(l/this.MAX_INTERVAL),d=l/c;for(e=1;c>=e;e++)t=a+r*d,n=this._intervalCurvePoints(a,t),o.push(n.cp1,n.cp2,n.p2),a=t;return o},bbox:function(e){for(var t,n,o=this,a=o._arcInterval(),s=a.startAngle,l=a.endAngle,c=i(this.center,this.radiusX,this.radiusY,e),d=T(c.x),u=T(c.y),p=o.pointAt(s).transformCopy(e),f=o.pointAt(l).transformCopy(e),g=P.min(p,f),m=P.max(p,f),v=r(d,s),_=r(u,s);l>v||l>_;)l>v&&(t=o.pointAt(v).transformCopy(e),v+=90),l>_&&(n=o.pointAt(_).transformCopy(e),_+=90),p=new P(t.x,n.y),g=P.min(g,p),m=P.max(m,p);return h.fromPoints(g,m)},_arcInterval:function(){var e,t=this.startAngle,n=this.endAngle,i=this.anticlockwise;return i&&(e=t,t=n,n=e),(t>n||i&&t===n)&&(n+=360),{startAngle:t,endAngle:n}},_intervalCurvePoints:function(e,t){var n=this,i=n.pointAt(e),r=n.pointAt(t),o=n._derivativeAt(e),a=n._derivativeAt(t),s=(S(t)-S(e))/3,l=new P(i.x+s*o.x,i.y+s*o.y),c=new P(r.x-s*a.x,r.y-s*a.y);return{p1:i,cp1:l,cp2:c,p2:r}},_derivativeAt:function(e){var t=this,n=S(e);return new P(-t.radiusX*v.sin(n),t.radiusY*v.cos(n))}}),o(f.fn,["radiusX","radiusY","startAngle","endAngle","anticlockwise"]),b(f.fn,k),f.fromPoints=function(e,t,n,i,r,o){var a=d(e.x,e.y,t.x,t.y,n,i,r,o);return new f(a.center,{startAngle:a.startAngle,endAngle:a.endAngle,radiusX:n,radiusY:i,anticlockwise:0===o})},g=w.extend({init:function(e,t,n,i,r,o){this.a=e||0,this.b=t||0,this.c=n||0,this.d=i||0,this.e=r||0,this.f=o||0},multiplyCopy:function(e){return new g(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.e+this.c*e.f+this.e,this.b*e.e+this.d*e.f+this.f)},clone:function(){return new g(this.a,this.b,this.c,this.d,this.e,this.f)},equals:function(e){return e?this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f:!1},round:function(e){return this.a=D(this.a,e),this.b=D(this.b,e),this.c=D(this.c,e),this.d=D(this.d,e),this.e=D(this.e,e),this.f=D(this.f,e),this},toArray:function(e){var t,n=[this.a,this.b,this.c,this.d,this.e,this.f];if(C(e))for(t=0;n.length>t;t++)n[t]=D(n[t],e);return n}}),g.fn.toString=function(e,t){return this.toArray(e).join(t||",")},g.translate=function(e,t){return new g(1,0,0,1,e,t)},g.unit=function(){return new g(1,0,0,1,0,0)},g.rotate=function(e,t,n){var i=new g;return i.a=v.cos(S(e)),i.b=v.sin(S(e)),i.c=-i.b,i.d=i.a,i.e=t-t*i.a+n*i.b||0,i.f=n-n*i.a-t*i.b||0,i},g.scale=function(e,t){return new g(e,0,0,t,0,0)},g.IDENTITY=g.unit(),m=w.extend({init:function(e){this._matrix=e||g.unit()},clone:function(){return new m(this._matrix.clone())},equals:function(e){return e&&e._matrix.equals(this._matrix)},_optionsChange:function(){this.optionsChange({field:"transform",value:this})},translate:function(e,t){return this._matrix=this._matrix.multiplyCopy(g.translate(e,t)),this._optionsChange(),this},scale:function(e,t,n){return C(t)||(t=e),n&&(n=P.create(n),this._matrix=this._matrix.multiplyCopy(g.translate(n.x,n.y))),this._matrix=this._matrix.multiplyCopy(g.scale(e,t)),n&&(this._matrix=this._matrix.multiplyCopy(g.translate(-n.x,-n.y))),this._optionsChange(),this},rotate:function(e,t){return t=P.create(t)||P.ZERO,this._matrix=this._matrix.multiplyCopy(g.rotate(e,t.x,t.y)),this._optionsChange(),this},multiply:function(e){var t=n(e);return this._matrix=this._matrix.multiplyCopy(t),this._optionsChange(),this},matrix:function(){return this._matrix}}),b(m.fn,k),b(y,{geometry:{Arc:f,Circle:p,Matrix:g,Point:P,Rect:h,Size:u,Transformation:m,transform:t,toMatrix:n}}),y.dataviz.geometry=y.geometry}(window.kendo.jQuery),function(e){var t,n,i,r=e.noop,o=Object.prototype.toString,a=window.kendo,s=a.Class,l=a.ui.Widget,c=a.deepExtend,d=a.util,u=d.defined,h=a.Observable.extend({init:function(t,n){a.Observable.fn.init.call(this),this.options=c({},this.options,n),this.bind(this.events,this.options),this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this.element=e(t),this.options.width&&this.element.css("width",this.options.width),this.options.height&&this.element.css("height",this.options.height)},options:{},events:["click","mouseenter","mouseleave","resize"],draw:r,clear:r,destroy:r,resize:l.fn.resize,size:l.fn.size,getSize:function(){return{width:this.element.width(),height:this.element.height()}},setSize:function(e){this.element.css({width:e.width,height:e.height}),this._size=e,this._resize()},eventTarget:function(t){for(var n,i=e(t.touch?t.touch.initialTouch:t.target);!n&&i.length>0&&(n=i[0]._kendoNode,!i.is(this.element)&&0!==i.length);)i=i.parent();return n?n.srcElement:void 0},_resize:r,_handler:function(e){var t=this;return function(n){var i=t.eventTarget(n);i&&t.trigger(e,{element:i,originalEvent:n})}}});h.create=function(e,t){return i.current.create(e,t)},t=s.extend({init:function(e){this.childNodes=[],this.parent=null,e&&(this.srcElement=e,this.observe())},destroy:function(){var e,t;for(this.srcElement&&this.srcElement.removeObserver(this),e=this.childNodes,t=0;e.length>t;t++)this.childNodes[t].destroy();this.parent=null},load:r,observe:function(){this.srcElement&&this.srcElement.addObserver(this)},append:function(e){this.childNodes.push(e),e.parent=this},insertAt:function(e,t){this.childNodes.splice(t,0,e),e.parent=this},remove:function(e,t){var n,i=e+t;for(n=e;i>n;n++)this.childNodes[n].removeSelf();this.childNodes.splice(e,t)},removeSelf:function(){this.clear(),this.destroy()},clear:function(){this.remove(0,this.childNodes.length)},invalidate:function(){this.parent&&this.parent.invalidate()},geometryChange:function(){this.invalidate()},optionsChange:function(){this.invalidate()},childrenChange:function(e){"add"===e.action?this.load(e.items,e.index):"remove"===e.action&&this.remove(e.index,e.items.length),this.invalidate()}}),n=s.extend({init:function(e,t){var n,i;this.prefix=t||"";for(n in e)i=e[n],i=this._wrap(i,n),this[n]=i},get:function(e){return a.getter(e,!0)(this)},set:function(e,t){var n,i=a.getter(e,!0)(this);i!==t&&(n=this._set(e,this._wrap(t,e)),n||this.optionsChange({field:this.prefix+e,value:t}))},_set:function(e,t){var i,r,o,s=e.indexOf(".")>=0;if(s)for(i=e.split("."),r="";i.length>1;){if(r+=i.shift(),o=a.getter(r,!0)(this),o||(o=new n({},r+"."),o.addObserver(this),this[r]=o),o instanceof n)return o.set(i.join("."),t),s;r+="."}return this._clear(e),a.setter(e)(this,t),s},_clear:function(e){var t=a.getter(e,!0)(this);t&&t.removeObserver&&t.removeObserver(this)},_wrap:function(e,t){var i=o.call(e);return null!==e&&u(e)&&"[object Object]"===i&&(e instanceof n||e instanceof s||(e=new n(e,this.prefix+t+".")),e.addObserver(this)),e}}),c(n.fn,a.mixins.ObserversMixin),i=function(){this._items=[]},i.prototype={register:function(e,t,n){var i=this._items,r=i[0],o={name:e,type:t,order:n};!r||r.order>n?i.unshift(o):i.push(o)},create:function(e,t){var n,i,r=this._items,o=r[0];if(t&&t.type)for(n=t.type.toLowerCase(),i=0;r.length>i;i++)if(r[i].name===n){o=r[i];break}return o?new o.type(e,t):void a.logToConsole("Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\n- The browser does not support SVG, VML and Canvas. User agent: "+navigator.userAgent+"\n- The Kendo UI scripts are not fully loaded")}},i.current=new i,c(a,{drawing:{DASH_ARRAYS:{dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]},Color:a.Color,BaseNode:t,OptionsStore:n,Surface:h,SurfaceFactory:i}}),a.dataviz.drawing=a.drawing
}(window.kendo.jQuery),function(){var e=window.kendo,t=e.deepExtend,n=e.util.defined,i="gradient",r={extend:function(e){e.fill=this.fill,e.stroke=this.stroke},fill:function(e,t){var r,o=this.options;return n(e)?(e&&e.nodeType!=i?(r={color:e},n(t)&&(r.opacity=t),o.set("fill",r)):o.set("fill",e),this):o.get("fill")},stroke:function(e,t,i){return n(e)?(this.options.set("stroke.color",e),n(t)&&this.options.set("stroke.width",t),n(i)&&this.options.set("stroke.opacity",i),this):this.options.get("stroke")}},o={extend:function(e,t){e.traverse=function(e){var n,i,r=this[t];for(n=0;r.length>n;n++)i=r[n],i.traverse?i.traverse(e):e(i);return this}}};t(e.drawing,{mixins:{Paintable:r,Traversable:o}})}(window.kendo.jQuery),function(e){function t(e,t){return d.current.measure(e,t)}var n=document,i=window.kendo,r=i.Class,o=i.deepExtend,a=i.util,s=a.defined,l=1,c=r.extend({init:function(e){this._size=e,this._length=0,this._map={}},put:function(e,t){var n=this,i=n._map,r={key:e,value:t};i[e]=r,n._head?(n._tail.newer=r,r.older=n._tail,n._tail=r):n._head=n._tail=r,n._length>=n._size?(i[n._head.key]=null,n._head=n._head.newer,n._head.older=null):n._length++},get:function(e){var t=this,n=t._map[e];return n?(n===t._head&&n!==t._tail&&(t._head=n.newer,t._head.older=null),n!==t._tail&&(n.older&&(n.older.newer=n.newer,n.newer.older=n.older),n.older=t._tail,n.newer=null,t._tail.newer=n,t._tail=n),n.value):void 0}}),d=r.extend({init:function(){this._cache=new c(1e3)},measure:function(e,t){var i,r,o,c,d,u=a.objectKey(t),h=a.hashKey(e+u),p=this._cache.get(h);if(p)return p;i={width:0,height:0,baseline:0},r=this._measureBox,o=this._baselineMarker.cloneNode(!1);for(c in t)d=t[c],s(d)&&(r.style[c]=d);return r.innerHTML=e,r.appendChild(o),n.body.appendChild(r),(e+"").length&&(i.width=r.offsetWidth-l,i.height=r.offsetHeight,i.baseline=o.offsetTop+l),this._cache.put(h,i),r.parentNode.removeChild(r),i}});d.fn._baselineMarker=e("<div class='k-baseline-marker' style='display: inline-block; vertical-align: baseline;width: "+l+"px; height: "+l+"px;overflow: hidden;' />")[0],d.fn._measureBox=e("<div style='position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space:nowrap !important;' />")[0],d.current=new d,o(i.drawing,{util:{TextMetrics:d,LRUCache:c,measureText:t}})}(window.kendo.jQuery),function(e){function t(e,t,n){var i,r,o,a;for(r=0;e.length>r;r++)o=e[r],o.visible()&&(a=t?o.bbox(n):o.rawBBox(),a&&(i=i?M.union(i,a):a));return i}function n(e,t,n){var i,r,o,a;for(r=0;e.length>r;r++)o=e[r],o.visible()&&(a=t?o.clippedBBox(n):o.rawBBox(),a&&(i=i?M.union(i,a):a));return i}function i(e,t){e.origin.x-=t,e.origin.y-=t,e.size.width+=2*t,e.size.height+=2*t}function r(e,t){for(var n=0;t.length>n;n++)e[t[n]]=o(t[n])}function o(e){var t="_"+e;return function(e){return V(e)?(this._observerField(t,e),this.geometryChange(),this):this[t]}}function a(e,t){for(var n=0;t.length>n;n++)e[t[n]]=s(t[n])}function s(e){var t="_"+e;return function(e){return V(e)?(this._observerField(t,E.create(e)),this.geometryChange(),this):this[t]}}function l(e,t){for(var n=0;t.length>n;n++)e[t[n]]=c(t[n])}function c(e){return function(t){return V(t)?(this.options.set(e,t),this):this.options.get(e)}}var d,u,h,p,f,g,m,v,_,y,w,b,k,x,C,S=window.kendo,T=S.Class,D=S.deepExtend,A=S.geometry,E=A.Point,M=A.Rect,P=A.Size,I=A.Matrix,z=A.toMatrix,F=S.drawing,R=F.OptionsStore,B=Math,L=B.pow,O=S.util,H=O.append,N=O.arrayLimits,V=O.defined,U=O.last,W=O.valueOrDefault,j=S.mixins.ObserversMixin,G=e.inArray,q=[].push,$=[].pop,Y=[].splice,K=[].shift,Q=[].slice,X=[].unshift,J=T.extend({nodeType:"Element",init:function(e){this._initOptions(e)},_initOptions:function(e){var t,n;e=e||{},t=e.transform,n=e.clip,t&&(e.transform=A.transform(t)),n&&!n.id&&(n.id=S.guid()),this.options=new R(e),this.options.addObserver(this)},transform:function(e){return V(e)?void this.options.set("transform",A.transform(e)):this.options.get("transform")},parentTransform:function(){for(var e,t,n=this;n.parent;)n=n.parent,e=n.transform(),e&&(t=e.matrix().multiplyCopy(t||I.unit()));return t?A.transform(t):void 0},currentTransform:function(e){var t,n,i=this.transform(),r=z(i);return V(e)||(e=this.parentTransform()),t=z(e),n=r&&t?t.multiplyCopy(r):r||t,n?A.transform(n):void 0},visible:function(e){return V(e)?(this.options.set("visible",e),this):this.options.get("visible")!==!1},clip:function(e){var t=this.options;return V(e)?(e&&!e.id&&(e.id=S.guid()),t.set("clip",e),this):t.get("clip")},opacity:function(e){return V(e)?(this.options.set("opacity",e),this):W(this.options.get("opacity"),1)},clippedBBox:function(e){var t,n=this._clippedBBox(e);return n?(t=this.clip(),t?M.intersect(n,t.bbox(e)):n):void 0},_clippedBBox:function(e){return this.bbox(e)}});D(J.fn,j),d=T.extend({init:function(e){e=e||[],this.length=0,this._splice(0,e.length,e)},elements:function(e){return e?(this._splice(0,this.length,e),this._change(),this):this.slice(0)},push:function(){var e=arguments,t=q.apply(this,e);return this._add(e),t},slice:Q,pop:function(){var e=this.length,t=$.apply(this);return e&&this._remove([t]),t},splice:function(e,t){var n=Q.call(arguments,2),i=this._splice(e,t,n);return this._change(),i},shift:function(){var e=this.length,t=K.apply(this);return e&&this._remove([t]),t},unshift:function(){var e=arguments,t=X.apply(this,e);return this._add(e),t},indexOf:function(e){var t,n,i=this;for(t=0,n=i.length;n>t;t++)if(i[t]===e)return t;return-1},_splice:function(e,t,n){var i=Y.apply(this,[e,t].concat(n));return this._clearObserver(i),this._setObserver(n),i},_add:function(e){this._setObserver(e),this._change()},_remove:function(e){this._clearObserver(e),this._change()},_setObserver:function(e){for(var t=0;e.length>t;t++)e[t].addObserver(this)},_clearObserver:function(e){for(var t=0;e.length>t;t++)e[t].removeObserver(this)},_change:function(){}}),D(d.fn,j),u=J.extend({nodeType:"Group",init:function(e){J.fn.init.call(this,e),this.children=[]},childrenChange:function(e,t,n){this.trigger("childrenChange",{action:e,items:t,index:n})},append:function(){return H(this.children,arguments),this._reparent(arguments,this),this.childrenChange("add",arguments),this},insertAt:function(e,t){return this.children.splice(t,0,e),e.parent=this,this.childrenChange("add",[e],t),this},remove:function(e){var t=G(e,this.children);return t>=0&&(this.children.splice(t,1),e.parent=null,this.childrenChange("remove",[e],t)),this},removeAt:function(e){if(e>=0&&this.children.length>e){var t=this.children[e];this.children.splice(e,1),t.parent=null,this.childrenChange("remove",[t],e)}return this},clear:function(){var e=this.children;return this.children=[],this._reparent(e,null),this.childrenChange("remove",e,0),this},bbox:function(e){return t(this.children,!0,this.currentTransform(e))},rawBBox:function(){return t(this.children,!1)},_clippedBBox:function(e){return n(this.children,this.currentTransform(e))},currentTransform:function(e){return J.fn.currentTransform.call(this,e)||null},_reparent:function(e,t){var n,i,r;for(n=0;e.length>n;n++)i=e[n],r=i.parent,r&&r!=this&&r.remove&&r.remove(i),i.parent=t}}),F.mixins.Traversable.extend(u.fn,"children"),h=J.extend({nodeType:"Text",init:function(e,t,n){J.fn.init.call(this,n),this.content(e),this.position(t||new A.Point),this.options.font||(this.options.font="12px sans-serif"),V(this.options.fill)||this.fill("#000")},content:function(e){return V(e)?(this.options.set("content",e),this):this.options.get("content")},measure:function(){var e=F.util.measureText(this.content(),{font:this.options.get("font")});return e},rect:function(){var e=this.measure(),t=this.position().clone();return new A.Rect(t,[e.width,e.height])},bbox:function(e){var t=z(this.currentTransform(e));return this.rect().bbox(t)},rawBBox:function(){return this.rect().bbox()}}),F.mixins.Paintable.extend(h.fn),a(h.fn,["position"]),p=J.extend({nodeType:"Circle",init:function(e,t){J.fn.init.call(this,t),this.geometry(e||new A.Circle),V(this.options.stroke)||this.stroke("#000")},bbox:function(e){var t=z(this.currentTransform(e)),n=this._geometry.bbox(t),r=this.options.get("stroke.width");return r&&i(n,r/2),n},rawBBox:function(){return this._geometry.bbox()}}),F.mixins.Paintable.extend(p.fn),r(p.fn,["geometry"]),f=J.extend({nodeType:"Arc",init:function(e,t){J.fn.init.call(this,t),this.geometry(e||new A.Arc),V(this.options.stroke)||this.stroke("#000")},bbox:function(e){var t=z(this.currentTransform(e)),n=this.geometry().bbox(t),r=this.options.get("stroke.width");return r&&i(n,r/2),n},rawBBox:function(){return this.geometry().bbox()},toPath:function(){var e,t=new v,n=this.geometry().curvePoints();if(n.length>0)for(t.moveTo(n[0].x,n[0].y),e=1;n.length>e;e+=3)t.curveTo(n[e],n[e+1],n[e+2]);return t}}),F.mixins.Paintable.extend(f.fn),r(f.fn,["geometry"]),g=d.extend({_change:function(){this.geometryChange()}}),m=T.extend({init:function(e,t,n){this.anchor(e||new E),this.controlIn(t),this.controlOut(n)},bboxTo:function(e,t){var n,i=this.anchor().transformCopy(t),r=e.anchor().transformCopy(t);return n=this.controlOut()&&e.controlIn()?this._curveBoundingBox(i,this.controlOut().transformCopy(t),e.controlIn().transformCopy(t),r):this._lineBoundingBox(i,r)},_lineBoundingBox:function(e,t){return M.fromPoints(e,t)},_curveBoundingBox:function(e,t,n,i){var r=[e,t,n,i],o=this._curveExtremesFor(r,"x"),a=this._curveExtremesFor(r,"y"),s=N([o.min,o.max,e.x,i.x]),l=N([a.min,a.max,e.y,i.y]);return M.fromPoints(new E(s.min,l.min),new E(s.max,l.max))},_curveExtremesFor:function(e,t){var n=this._curveExtremes(e[0][t],e[1][t],e[2][t],e[3][t]);return{min:this._calculateCurveAt(n.min,t,e),max:this._calculateCurveAt(n.max,t,e)}},_calculateCurveAt:function(e,t,n){var i=1-e;return L(i,3)*n[0][t]+3*L(i,2)*e*n[1][t]+3*L(e,2)*i*n[2][t]+L(e,3)*n[3][t]},_curveExtremes:function(e,t,n,i){var r,o,a=e-3*t+3*n-i,s=-2*(e-2*t+n),l=e-t,c=B.sqrt(s*s-4*a*l),d=0,u=1;return 0===a?0!==s&&(d=u=-l/s):isNaN(c)||(d=(-s+c)/(2*a),u=(-s-c)/(2*a)),r=B.max(B.min(d,u),0),(0>r||r>1)&&(r=0),o=B.min(B.max(d,u),1),(o>1||0>o)&&(o=1),{min:r,max:o}}}),a(m.fn,["anchor","controlIn","controlOut"]),D(m.fn,j),v=J.extend({nodeType:"Path",init:function(e){J.fn.init.call(this,e),this.segments=new g,this.segments.addObserver(this),V(this.options.stroke)||(this.stroke("#000"),V(this.options.stroke.lineJoin)||this.options.set("stroke.lineJoin","miter"))},moveTo:function(e,t){return this.suspend(),this.segments.elements([]),this.resume(),this.lineTo(e,t),this},lineTo:function(e,t){var n=V(t)?new E(e,t):e,i=new m(n);return this.segments.push(i),this},curveTo:function(e,t,n){var i,r;return this.segments.length>0&&(i=U(this.segments),r=new m(n,t),this.suspend(),i.controlOut(e),this.resume(),this.segments.push(r)),this},arc:function(e,t,n,i,r){var o,a,s,l,c;return this.segments.length>0&&(o=U(this.segments),a=o.anchor(),s=O.rad(e),l=new E(a.x-n*B.cos(s),a.y-i*B.sin(s)),c=new A.Arc(l,{startAngle:e,endAngle:t,radiusX:n,radiusY:i,anticlockwise:r}),this._addArcSegments(c)),this},arcTo:function(e,t,n,i,r){var o,a,s;return this.segments.length>0&&(o=U(this.segments),a=o.anchor(),s=A.Arc.fromPoints(a,e,t,n,i,r),this._addArcSegments(s)),this},_addArcSegments:function(e){var t,n;for(this.suspend(),t=e.curvePoints(),n=1;t.length>n;n+=3)this.curveTo(t[n],t[n+1],t[n+2]);this.resume(),this.geometryChange()},close:function(){return this.options.closed=!0,this.geometryChange(),this},bbox:function(e){var t=z(this.currentTransform(e)),n=this._bbox(t),r=this.options.get("stroke.width");return r&&i(n,r/2),n},rawBBox:function(){return this._bbox()},_bbox:function(e){var t,n,i,r,o=this.segments,a=o.length;if(1===a)n=o[0].anchor().transformCopy(e),t=new M(n,P.ZERO);else if(a>0)for(i=1;a>i;i++)r=o[i-1].bboxTo(o[i],e),t=t?M.union(t,r):r;return t}}),F.mixins.Paintable.extend(v.fn),v.fromRect=function(e,t){return new v(t).moveTo(e.topLeft()).lineTo(e.topRight()).lineTo(e.bottomRight()).lineTo(e.bottomLeft()).close()},v.fromPoints=function(e,t){var n,i,r;if(e){for(n=new v(t),i=0;e.length>i;i++)r=E.create(e[i]),r&&(0===i?n.moveTo(r):n.lineTo(r));return n}},v.fromArc=function(e,t){var n=new v(t),i=e.startAngle,r=e.pointAt(i);return n.moveTo(r.x,r.y),n.arc(i,e.endAngle,e.radiusX,e.radiusY,e.anticlockwise),n},_=J.extend({nodeType:"MultiPath",init:function(e){J.fn.init.call(this,e),this.paths=new g,this.paths.addObserver(this),V(this.options.stroke)||this.stroke("#000")},moveTo:function(e,t){var n=new v;return n.moveTo(e,t),this.paths.push(n),this},lineTo:function(e,t){return this.paths.length>0&&U(this.paths).lineTo(e,t),this},curveTo:function(e,t,n){return this.paths.length>0&&U(this.paths).curveTo(e,t,n),this},arc:function(e,t,n,i,r){return this.paths.length>0&&U(this.paths).arc(e,t,n,i,r),this},arcTo:function(e,t,n,i,r){return this.paths.length>0&&U(this.paths).arcTo(e,t,n,i,r),this},close:function(){return this.paths.length>0&&U(this.paths).close(),this},bbox:function(e){return t(this.paths,!0,this.currentTransform(e))},rawBBox:function(){return t(this.paths,!1)},_clippedBBox:function(e){return n(this.paths,this.currentTransform(e))}}),F.mixins.Paintable.extend(_.fn),y=J.extend({nodeType:"Image",init:function(e,t,n){J.fn.init.call(this,n),this.src(e),this.rect(t||new A.Rect)},src:function(e){return V(e)?(this.options.set("src",e),this):this.options.get("src")},bbox:function(e){var t=z(this.currentTransform(e));return this._rect.bbox(t)},rawBBox:function(){return this._rect.bbox()}}),r(y.fn,["rect"]),w=T.extend({init:function(e,t,n){this.options=new R({offset:e,color:t,opacity:V(n)?n:1}),this.options.addObserver(this)}}),l(w.fn,["offset","color","opacity"]),D(w.fn,j),w.create=function(e){if(V(e)){var t;return t=e instanceof w?e:e.length>1?new w(e[0],e[1],e[2]):new w(e.offset,e.color,e.opacity)}},b=d.extend({_change:function(){this.optionsChange({field:"stops"})}}),k=T.extend({nodeType:"gradient",init:function(e){this.stops=new b(this._createStops(e.stops)),this.stops.addObserver(this),this._userSpace=e.userSpace,this.id=S.guid()},userSpace:function(e){return V(e)?(this._userSpace=e,this.optionsChange(),this):this._userSpace},_createStops:function(e){var t,n=[];for(e=e||[],t=0;e.length>t;t++)n.push(w.create(e[t]));return n},addStop:function(e,t,n){this.stops.push(new w(e,t,n))},removeStop:function(e){var t=this.stops.indexOf(e);t>=0&&this.stops.splice(t,1)}}),D(k.fn,j,{optionsChange:function(e){this.trigger("optionsChange",{field:"gradient"+(e?"."+e.field:""),value:this})},geometryChange:function(){this.optionsChange()}}),x=k.extend({init:function(e){e=e||{},k.fn.init.call(this,e),this.start(e.start||new E),this.end(e.end||new E(1,0))}}),a(x.fn,["start","end"]),C=k.extend({init:function(e){e=e||{},k.fn.init.call(this,e),this.center(e.center||new E),this._radius=V(e.radius)?e.radius:1,this._fallbackFill=e.fallbackFill},radius:function(e){return V(e)?(this._radius=e,this.geometryChange(),this):this._radius},fallbackFill:function(e){return V(e)?(this._fallbackFill=e,this.optionsChange(),this):this._fallbackFill}}),a(C.fn,["center"]),D(F,{Arc:f,Circle:p,Element:J,ElementsArray:d,Gradient:k,GradientStop:w,Group:u,Image:y,LinearGradient:x,MultiPath:_,Path:v,RadialGradient:C,Segment:m,Text:h})}(window.kendo.jQuery),function(e){function t(e){var t=[];return e.replace(g,function(e,n){t.push(parseFloat(n))}),t}function n(e,t,n){var i,r=t?0:1;for(i=0;e.length>i;i+=2)e.splice(i+r,0,n)}function i(e,t){return e&&t?t.scaleCopy(2).translate(-e.x,-e.y):void 0}function r(e,t,n){var i=1/3;return t=t.clone().scale(2/3),{controlOut:t.clone().translateWith(e.scaleCopy(i)),controlIn:t.translateWith(n.scaleCopy(i))}}var o=window.kendo,a=o.drawing,s=o.geometry,l=o.Class,c=s.Point,d=o.deepExtend,u=e.trim,h=o.util,p=h.last,f=/([a-z]{1})([^a-z]*)(z)?/gi,g=/[,\s]?(-?(?:\d+\.)?\d+)/g,m="m",v="z",_=l.extend({parse:function(e,n){var i,r=new a.MultiPath(n),o=new c;return e.replace(f,function(e,n,a,s){var l=n.toLowerCase(),c=l===n,d=t(u(a));if(l===m&&(c?(o.x+=d[0],o.y+=d[1]):(o.x=d[0],o.y=d[1]),r.moveTo(o.x,o.y),d.length>2&&(l="l",d.splice(0,2))),y[l])y[l](r,{parameters:d,position:o,isRelative:c,previousCommand:i}),s&&s.toLowerCase()===v&&r.close();else if(l!==m)throw Error("Error while parsing SVG path. Unsupported command: "+l);i=l}),r}}),y={l:function(e,t){var n,i,r=t.parameters,o=t.position;for(n=0;r.length>n;n+=2)i=new c(r[n],r[n+1]),t.isRelative&&i.translateWith(o),e.lineTo(i.x,i.y),o.x=i.x,o.y=i.y},c:function(e,t){var n,i,r,o,a=t.parameters,s=t.position;for(o=0;a.length>o;o+=6)n=new c(a[o],a[o+1]),i=new c(a[o+2],a[o+3]),r=new c(a[o+4],a[o+5]),t.isRelative&&(i.translateWith(s),n.translateWith(s),r.translateWith(s)),e.curveTo(n,i,r),s.x=r.x,s.y=r.y},v:function(e,t){var i=t.isRelative?0:t.position.x;n(t.parameters,!0,i),this.l(e,t)},h:function(e,t){var i=t.isRelative?0:t.position.y;n(t.parameters,!1,i),this.l(e,t)},a:function(e,t){var n,i,r,o,a,s,l=t.parameters,d=t.position;for(n=0;l.length>n;n+=7)i=l[n],r=l[n+1],o=l[n+3],a=l[n+4],s=new c(l[n+5],l[n+6]),t.isRelative&&s.translateWith(d),e.arcTo(s,i,r,o,a),d.x=s.x,d.y=s.y},s:function(e,t){var n,r,o,a,s,l=t.parameters,d=t.position,u=t.previousCommand;for(("s"==u||"c"==u)&&(a=p(p(e.paths).segments).controlIn()),s=0;l.length>s;s+=4)o=new c(l[s],l[s+1]),r=new c(l[s+2],l[s+3]),t.isRelative&&(o.translateWith(d),r.translateWith(d)),n=a?i(a,d):d.clone(),a=o,e.curveTo(n,o,r),d.x=r.x,d.y=r.y},q:function(e,t){var n,i,o,a,s=t.parameters,l=t.position;for(a=0;s.length>a;a+=4)o=new c(s[a],s[a+1]),i=new c(s[a+2],s[a+3]),t.isRelative&&(o.translateWith(l),i.translateWith(l)),n=r(l,o,i),e.curveTo(n.controlOut,n.controlIn,i),l.x=i.x,l.y=i.y},t:function(e,t){var n,o,a,s,l,d=t.parameters,u=t.position,h=t.previousCommand;for(("q"==h||"t"==h)&&(s=p(p(e.paths).segments),o=s.controlIn().clone().translateWith(u.scaleCopy(-1/3)).scale(1.5)),l=0;d.length>l;l+=2)a=new c(d[l],d[l+1]),t.isRelative&&a.translateWith(u),o=o?i(o,u):u.clone(),n=r(u,o,a),e.curveTo(n.controlOut,n.controlIn,a),u.x=a.x,u.y=a.y}};_.current=new _,a.Path.parse=function(e,t){return _.current.parse(e,t)},d(a,{PathParser:_})}(window.kendo.jQuery),function(e){function t(e){var t,n,i,r;try{t=e.getScreenCTM?e.getScreenCTM():null}catch(o){}t&&(n=-t.e%1,i=-t.f%1,r=e.style,(0!==n||0!==i)&&(r.left=n+"px",r.top=i+"px"))}function n(){var e=document.getElementsByTagName("base")[0],t="",n=document.location.href,i=n.indexOf("#");return e&&!d.support.browser.msie&&(-1!==i&&(n=n.substring(0,i)),t=n),t}function i(e){return"url("+n()+"#"+e+")"}function r(e){var t,n,i,r=new F({encodeText:!0}),o=e.clippedBBox();return o&&(t=o.getOrigin(),n=new p.Group,n.transform(h.transform().translate(-t.x,-t.y)),n.children.push(e),e=n),r.load([e]),i="<?xml version='1.0' ?><svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='"+E+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>"+r.render()+"</svg>",r.destroy(),i}function o(t,n){var i=r(t);return n&&n.raw||(i="data:image/svg+xml;base64,"+g.encodeBase64(i)),e.Deferred().resolve(i).promise()}function a(e,t){return"clip"==e||"fill"==e&&(!t||t.nodeType==C)}function s(e){if(!e||!e.indexOf||e.indexOf("&")<0)return e;var t=s._element;return t.innerHTML=e,t.textContent||t.innerText}var l,c=document,d=window.kendo,u=d.deepExtend,h=d.geometry,p=d.drawing,f=p.BaseNode,g=d.util,m=g.defined,v=g.isTransparent,_=g.renderAttr,y=g.renderAllAttr,w=g.renderTemplate,b=e.inArray,k="butt",x=p.DASH_ARRAYS,C="gradient",S="none",T=".kendo",D="solid",A=" ",E="http://www.w3.org/2000/svg",M="transform",P="undefined",I=p.Surface.extend({init:function(e,n){p.Surface.fn.init.call(this,e,n),this._root=new F(this.options),K(this.element[0],this._template(this)),this._rootElement=this.element[0].firstElementChild,t(this._rootElement),this._root.attachTo(this._rootElement),this.element.on("click"+T,this._click),this.element.on("mouseover"+T,this._mouseenter),this.element.on("mouseout"+T,this._mouseleave),this.resize()},type:"svg",destroy:function(){this._root&&(this._root.destroy(),this._root=null,this._rootElement=null,this.element.off(T)),p.Surface.fn.destroy.call(this)},translate:function(e){var t=d.format("{0} {1} {2} {3}",Math.round(e.x),Math.round(e.y),this._size.width,this._size.height);this._offset=e,this._rootElement.setAttribute("viewBox",t)},draw:function(e){this._root.load([e])},clear:function(){this._root.clear()},svg:function(){return"<?xml version='1.0' ?>"+this._template(this)},_resize:function(){this._offset&&this.translate(this._offset)},_template:w("<svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='"+E+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>#= d._root.render() #</svg>")}),z=f.extend({init:function(e){f.fn.init.call(this,e),this.definitions={}},destroy:function(){this.element&&(this.element._kendoNode=null,this.element=null),this.clearDefinitions(),f.fn.destroy.call(this)},load:function(e,t){var n,i,r,o,a=this,s=a.element;for(o=0;e.length>o;o++)i=e[o],r=i.children,n=new Y[i.nodeType](i),m(t)?a.insertAt(n,t):a.append(n),n.createDefinitions(),r&&r.length>0&&n.load(r),s&&n.attachTo(s,t)},root:function(){for(var e=this;e.parent;)e=e.parent;return e},attachTo:function(e,t){var n,i=c.createElement("div");K(i,"<svg xmlns='"+E+"' version='1.1'>"+this.render()+"</svg>"),n=i.firstChild.firstChild,n&&(m(t)?e.insertBefore(n,e.childNodes[t]):e.appendChild(n),this.setElement(n))},setElement:function(e){var t,n,i=this.childNodes;for(this.element&&(this.element._kendoNode=null),this.element=e,this.element._kendoNode=this,n=0;i.length>n;n++)t=e.childNodes[n],i[n].setElement(t)},clear:function(){var e,t;for(this.clearDefinitions(),this.element&&(this.element.innerHTML=""),e=this.childNodes,t=0;e.length>t;t++)e[t].destroy();this.childNodes=[]},removeSelf:function(){this.element&&(this.element.parentNode.removeChild(this.element),this.element=null),f.fn.removeSelf.call(this)},template:w("#= d.renderChildren() #"),render:function(){return this.template(this)},renderChildren:function(){var e,t=this.childNodes,n="";for(e=0;t.length>e;e++)n+=t[e].render();return n},optionsChange:function(e){var t=e.field,n=e.value;"visible"===t?this.css("display",n?"":S):l[t]&&a(t,n)?this.updateDefinition(t,n):"opacity"===t&&this.attr("opacity",n),f.fn.optionsChange.call(this,e)},attr:function(e,t){this.element&&this.element.setAttribute(e,t)},allAttr:function(e){for(var t=0;e.length>t;t++)this.attr(e[t][0],e[t][1])},css:function(e,t){this.element&&(this.element.style[e]=t)},allCss:function(e){for(var t=0;e.length>t;t++)this.css(e[t][0],e[t][1])},removeAttr:function(e){this.element&&this.element.removeAttribute(e)},mapTransform:function(e){var t=[];return e&&t.push([M,"matrix("+e.matrix().toString(6)+")"]),t},renderTransform:function(){return y(this.mapTransform(this.srcElement.transform()))},transformChange:function(e){e?this.allAttr(this.mapTransform(e)):this.removeAttr(M)},mapStyle:function(){var e=this.srcElement.options,t=[["cursor",e.cursor]];return e.visible===!1&&t.push(["display",S]),t},renderStyle:function(){return _("style",g.renderStyle(this.mapStyle()))},renderOpacity:function(){return _("opacity",this.srcElement.options.opacity)},createDefinitions:function(){var e,t,n,i,r=this.srcElement,o=this.definitions;if(r){n=r.options;for(t in l)e=n.get(t),e&&a(t,e)&&(o[t]=e,i=!0);i&&this.definitionChange({action:"add",definitions:o})}},definitionChange:function(e){this.parent&&this.parent.definitionChange(e)},updateDefinition:function(e,t){var n=this.definitions,r=n[e],o=l[e],a={};r&&(a[e]=r,this.definitionChange({action:"remove",definitions:a}),delete n[e]),t?(a[e]=t,this.definitionChange({action:"add",definitions:a}),n[e]=t,this.attr(o,i(t.id))):r&&this.removeAttr(o)},clearDefinitions:function(){var e,t=this.definitions;for(e in t){this.definitionChange({action:"remove",definitions:t}),this.definitions={};break}},renderDefinitions:function(){return y(this.mapDefinitions())},mapDefinitions:function(){var e,t=this.definitions,n=[];for(e in t)n.push([l[e],i(t[e].id)]);return n}}),F=z.extend({init:function(e){z.fn.init.call(this),this.options=e,this.defs=new R},attachTo:function(e){this.element=e,this.defs.attachTo(e.firstElementChild)},clear:function(){f.fn.clear.call(this)},template:w("#=d.defs.render()##= d.renderChildren() #"),definitionChange:function(e){this.defs.definitionChange(e)}}),R=z.extend({init:function(){z.fn.init.call(this),this.definitionMap={}},attachTo:function(e){this.element=e},template:w("<defs>#= d.renderChildren()#</defs>"),definitionChange:function(e){var t=e.definitions,n=e.action;"add"==n?this.addDefinitions(t):"remove"==n&&this.removeDefinitions(t)},createDefinition:function(e,t){var n;return"clip"==e?n=B:"fill"==e&&(t instanceof p.LinearGradient?n=q:t instanceof p.RadialGradient&&(n=$)),new n(t)},addDefinitions:function(e){for(var t in e)this.addDefinition(t,e[t])},addDefinition:function(e,t){var n,i=this.definitionMap,r=t.id,o=this.element,a=i[r];a?a.count++:(n=this.createDefinition(e,t),i[r]={element:n,count:1},this.append(n),o&&n.attachTo(this.element))},removeDefinitions:function(e){for(var t in e)this.removeDefinition(e[t])},removeDefinition:function(e){var t=this.definitionMap,n=e.id,i=t[n];i&&(i.count--,0===i.count&&(this.remove(b(i.element,this.childNodes),1),delete t[n]))}}),B=z.extend({init:function(e){z.fn.init.call(this),this.srcElement=e,this.id=e.id,this.load([e])},template:w("<clipPath id='#=d.id#'>#= d.renderChildren()#</clipPath>")}),L=z.extend({template:w("<g#= d.renderTransform() + d.renderStyle() + d.renderOpacity() + d.renderDefinitions()#>#= d.renderChildren() #</g>"),optionsChange:function(e){e.field==M&&this.transformChange(e.value),z.fn.optionsChange.call(this,e)}}),O=z.extend({geometryChange:function(){this.attr("d",this.renderData()),this.invalidate()},optionsChange:function(e){switch(e.field){case"fill":e.value?this.allAttr(this.mapFill(e.value)):this.removeAttr("fill");break;case"fill.color":this.allAttr(this.mapFill({color:e.value}));break;case"stroke":e.value?this.allAttr(this.mapStroke(e.value)):this.removeAttr("stroke");break;case M:this.transformChange(e.value);break;default:var t=this.attributeMap[e.field];t&&this.attr(t,e.value)}z.fn.optionsChange.call(this,e)},attributeMap:{"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"},content:function(){this.element&&(this.element.textContent=this.srcElement.content())},renderData:function(){return this.printPath(this.srcElement)},printPath:function(e){var t,n,i,r,o,a=e.segments,s=a.length;if(s>0){for(t=[],o=1;s>o;o++)i=this.segmentType(a[o-1],a[o]),i!==r&&(r=i,t.push(i)),t.push("L"===i?this.printPoints(a[o].anchor()):this.printPoints(a[o-1].controlOut(),a[o].controlIn(),a[o].anchor()));return n="M"+this.printPoints(a[0].anchor())+A+t.join(A),e.options.closed&&(n+="Z"),n}},printPoints:function(){var e,t=arguments,n=t.length,i=[];for(e=0;n>e;e++)i.push(t[e].toString(3));return i.join(A)},segmentType:function(e,t){return e.controlOut()&&t.controlIn()?"C":"L"},mapStroke:function(e){var t=[];return e&&!v(e.color)?(t.push(["stroke",e.color]),t.push(["stroke-width",e.width]),t.push(["stroke-linecap",this.renderLinecap(e)]),t.push(["stroke-linejoin",e.lineJoin]),m(e.opacity)&&t.push(["stroke-opacity",e.opacity]),m(e.dashType)&&t.push(["stroke-dasharray",this.renderDashType(e)])):t.push(["stroke",S]),t},renderStroke:function(){return y(this.mapStroke(this.srcElement.options.stroke))},renderDashType:function(e){var t,n,i,r=e.width||1,o=e.dashType;if(o&&o!=D){for(t=x[o.toLowerCase()],n=[],i=0;t.length>i;i++)n.push(t[i]*r);return n.join(" ")}},renderLinecap:function(e){var t=e.dashType,n=e.lineCap;return t&&t!=D?k:n},mapFill:function(e){var t=[];return e&&e.nodeType==C||(e&&!v(e.color)?(t.push(["fill",e.color]),m(e.opacity)&&t.push(["fill-opacity",e.opacity])):t.push(["fill",S])),t},renderFill:function(){return y(this.mapFill(this.srcElement.options.fill))},template:w("<path #= d.renderStyle() # #= d.renderOpacity() # #= kendo.util.renderAttr('d', d.renderData()) # #= d.renderStroke() # #= d.renderFill() # #= d.renderDefinitions() # #= d.renderTransform() #></path>")}),H=O.extend({renderData:function(){return this.printPath(this.srcElement.toPath())}}),N=O.extend({renderData:function(){var e,t,n=this.srcElement.paths;if(n.length>0){for(e=[],t=0;n.length>t;t++)e.push(this.printPath(n[t]));return e.join(" ")}}}),V=O.extend({geometryChange:function(){var e=this.center();this.attr("cx",e.x),this.attr("cy",e.y),this.attr("r",this.radius()),this.invalidate()},center:function(){return this.srcElement.geometry().center},radius:function(){return this.srcElement.geometry().radius},template:w("<circle #= d.renderStyle() # #= d.renderOpacity() # cx='#= d.center().x #' cy='#= d.center().y #' r='#= d.radius() #' #= d.renderStroke() # #= d.renderFill() # #= d.renderDefinitions() # #= d.renderTransform() # ></circle>")}),U=O.extend({geometryChange:function(){var e=this.pos();this.attr("x",e.x),this.attr("y",e.y),this.invalidate()},optionsChange:function(e){"font"===e.field?(this.attr("style",g.renderStyle(this.mapStyle())),this.geometryChange()):"content"===e.field&&O.fn.content.call(this,this.srcElement.content()),O.fn.optionsChange.call(this,e)},mapStyle:function(){var e=O.fn.mapStyle.call(this),t=this.srcElement.options.font,n=this.root().options;return n&&n.encodeText&&(t=d.htmlEncode(t)),e.push(["font",t]),e},pos:function(){var e=this.srcElement.position(),t=this.srcElement.measure();return e.clone().setY(e.y+t.baseline)},content:function(){var e=this.srcElement.content(),t=this.root().options;return t&&t.encodeText&&(e=s(e),e=d.htmlEncode(e)),e},template:w("<text #= d.renderStyle() # #= d.renderOpacity() # x='#= this.pos().x #' y='#= this.pos().y #' #= d.renderStroke() # #= d.renderTransform() # #= d.renderDefinitions() # #= d.renderFill() #><tspan>#= d.content() #</tspan></text>")}),W=O.extend({geometryChange:function(){this.allAttr(this.mapPosition()),this.invalidate()},optionsChange:function(e){"src"===e.field&&this.allAttr(this.mapSource()),O.fn.optionsChange.call(this,e)},mapPosition:function(){var e=this.srcElement.rect(),t=e.topLeft();return[["x",t.x],["y",t.y],["width",e.width()+"px"],["height",e.height()+"px"]]},renderPosition:function(){return y(this.mapPosition())},mapSource:function(){return[["xlink:href",this.srcElement.src()]]},renderSource:function(){return y(this.mapSource())},template:w("<image preserveAspectRatio='none' #= d.renderStyle() # #= d.renderTransform()# #= d.renderOpacity() # #= d.renderPosition() # #= d.renderSource() # #= d.renderDefinitions()#></image>")}),j=z.extend({template:w("<stop #=d.renderOffset()# #=d.renderStyle()# />"),renderOffset:function(){return _("offset",this.srcElement.offset())},mapStyle:function(){var e=this.srcElement;return[["stop-color",e.color()],["stop-opacity",e.opacity()]]},optionsChange:function(e){"offset"==e.field?this.attr(e.field,e.value):("color"==e.field||"opacity"==e.field)&&this.css("stop-"+e.field,e.value)}}),G=z.extend({init:function(e){z.fn.init.call(this,e),this.id=e.id,this.loadStops()},loadStops:function(){var e,t,n=this.srcElement,i=n.stops,r=this.element;for(t=0;i.length>t;t++)e=new j(i[t]),this.append(e),r&&e.attachTo(r)},optionsChange:function(e){"gradient.stops"==e.field?(f.fn.clear.call(this),this.loadStops()):e.field==C&&this.allAttr(this.mapCoordinates())},renderCoordinates:function(){return y(this.mapCoordinates())},mapSpace:function(){return["gradientUnits",this.srcElement.userSpace()?"userSpaceOnUse":"objectBoundingBox"]}}),q=G.extend({template:w("<linearGradient id='#=d.id#' #=d.renderCoordinates()#>#= d.renderChildren()#</linearGradient>"),mapCoordinates:function(){var e=this.srcElement,t=e.start(),n=e.end(),i=[["x1",t.x],["y1",t.y],["x2",n.x],["y2",n.y],this.mapSpace()];return i}}),$=G.extend({template:w("<radialGradient id='#=d.id#' #=d.renderCoordinates()#>#= d.renderChildren()#</radialGradient>"),mapCoordinates:function(){var e=this.srcElement,t=e.center(),n=e.radius(),i=[["cx",t.x],["cy",t.y],["r",n],this.mapSpace()];
return i}}),Y={Group:L,Text:U,Path:O,MultiPath:N,Circle:V,Arc:H,Image:W},K=function(e,t){e.innerHTML=t};!function(){var e="<svg xmlns='"+E+"'></svg>",t=c.createElement("div"),n=typeof DOMParser!=P;t.innerHTML=e,n&&t.firstChild.namespaceURI!=E&&(K=function(e,t){var n=new DOMParser,i=n.parseFromString(t,"text/xml"),r=c.adoptNode(i.documentElement);e.innerHTML="",e.appendChild(r)})}(),s._element=document.createElement("span"),l={clip:"clip-path",fill:"fill"},d.support.svg=function(){return c.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),d.support.svg&&p.SurfaceFactory.current.register("svg",I,10),u(p,{exportSVG:o,svg:{ArcNode:H,CircleNode:V,ClipNode:B,DefinitionNode:R,GradientStopNode:j,GroupNode:L,ImageNode:W,LinearGradientNode:q,MultiPathNode:N,Node:z,PathNode:O,RadialGradientNode:$,RootNode:F,Surface:I,TextNode:U,_exportGroup:r}})}(window.kendo.jQuery),function(e){function t(t,n){var i,r,o,a,s,l,c={width:"800px",height:"600px",cors:"Anonymous"},d=t.clippedBBox();return d&&(i=d.getOrigin(),r=new w.Group,r.transform(y.transform().translate(-i.x,-i.y)),r.children.push(t),t=r,o=d.getSize(),c.width=o.width+"px",c.height=o.height+"px"),n=p(c,n),a=e("<div />").css({display:"none",width:n.width,height:n.height}).appendTo(document.body),s=new T(a,n),s.draw(t),l=s.image(),l.always(function(){s.destroy(),a.remove()}),l}function n(e,t){var n,i,r;for(r=0;t.length>r;r++)i=t[r],n=h.parseColor(i.color()),n.a*=i.opacity(),e.addColorStop(i.offset(),n.toCssRgba())}var i,r,o,a,s,l,c,d,u=document,h=window.kendo,p=h.deepExtend,f=h.util,g=f.defined,m=f.isTransparent,v=f.renderTemplate,_=f.valueOrDefault,y=h.geometry,w=h.drawing,b=w.BaseNode,k="butt",x=w.DASH_ARRAYS,C=1e3/60,S="solid",T=w.Surface.extend({init:function(t,n){w.Surface.fn.init.call(this,t,n),this.element[0].innerHTML=this._template(this);var r=this.element[0].firstElementChild;r.width=e(t).width(),r.height=e(t).height(),this._rootElement=r,this._root=new i(r)},destroy:function(){w.Surface.fn.destroy.call(this),this._root&&(this._root.destroy(),this._root=null)},type:"canvas",draw:function(e){this._root.load([e],void 0,this.options.cors)},clear:function(){this._root.clear()},image:function(){var t,n=this._root,i=this._rootElement,r=[];return n.traverse(function(e){e.loading&&r.push(e.loading)}),t=e.Deferred(),e.when.apply(e,r).done(function(){n._invalidate();try{var e=i.toDataURL();t.resolve(e)}catch(r){t.reject(r)}}).fail(function(e){t.reject(e)}),t.promise()},_resize:function(){this._rootElement.width=this._size.width,this._rootElement.height=this._size.height,this._root.invalidate()},_template:v("<canvas style='width: 100%; height: 100%;'></canvas>")}),D=b.extend({init:function(e){b.fn.init.call(this,e),e&&this.initClip()},initClip:function(){var e=this.srcElement.clip();e&&(this.clip=e,e.addObserver(this))},clear:function(){this.srcElement&&this.srcElement.removeObserver(this),this.clearClip(),b.fn.clear.call(this)},clearClip:function(){this.clip&&(this.clip.removeObserver(this),delete this.clip)},setClip:function(e){this.clip&&(e.beginPath(),r.fn.renderPoints(e,this.clip),e.clip())},optionsChange:function(e){"clip"==e.field&&(this.clearClip(),this.initClip()),b.fn.optionsChange.call(this,e)},setTransform:function(e){if(this.srcElement){var t=this.srcElement.transform();t&&e.transform.apply(e,t.matrix().toArray(6))}},load:function(e,t,n){var i,r,o,a,s=this;for(a=0;e.length>a;a++)r=e[a],o=r.children,i=new d[r.nodeType](r,n),o&&o.length>0&&i.load(o,t,n),g(t)?s.insertAt(i,t):s.append(i);s.invalidate()},setOpacity:function(e){if(this.srcElement){var t=this.srcElement.opacity();g(t)&&this.globalAlpha(e,t)}},globalAlpha:function(e,t){t&&e.globalAlpha&&(t*=e.globalAlpha),e.globalAlpha=t}}),A=D.extend({renderTo:function(e){var t,n=this.childNodes;for(e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e),t=0;n.length>t;t++)n[t].renderTo(e);e.restore()}});w.mixins.Traversable.extend(A.fn,"childNodes"),i=A.extend({init:function(t){A.fn.init.call(this),this.canvas=t,this.ctx=t.getContext("2d"),this.invalidate=h.throttle(e.proxy(this._invalidate,this),C)},destroy:function(){A.fn.destroy.call(this),this.canvas=null,this.ctx=null},_invalidate:function(){this.ctx&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderTo(this.ctx))}}),w.mixins.Traversable.extend(i.fn,"childNodes"),r=D.extend({renderTo:function(e){e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e),e.beginPath(),this.renderPoints(e,this.srcElement),this.setLineDash(e),this.setLineCap(e),this.setLineJoin(e),this.setFill(e),this.setStroke(e),e.restore()},setFill:function(e){var t=this.srcElement.options.fill,n=!1;return t&&("gradient"==t.nodeType?(this.setGradientFill(e,t),n=!0):m(t.color)||(e.fillStyle=t.color,e.save(),this.globalAlpha(e,t.opacity),e.fill(),e.restore(),n=!0)),n},setGradientFill:function(e,t){var i,r,o,a,s=this.srcElement.rawBBox();t instanceof w.LinearGradient?(r=t.start(),o=t.end(),i=e.createLinearGradient(r.x,r.y,o.x,o.y)):t instanceof w.RadialGradient&&(a=t.center(),i=e.createRadialGradient(a.x,a.y,0,a.x,a.y,t.radius())),n(i,t.stops),e.save(),t.userSpace()||e.transform(s.width(),0,0,s.height(),s.origin.x,s.origin.y),e.fillStyle=i,e.fill(),e.restore()},setStroke:function(e){var t=this.srcElement.options.stroke;return t&&!m(t.color)?(e.strokeStyle=t.color,e.lineWidth=_(t.width,1),e.save(),this.globalAlpha(e,t.opacity),e.stroke(),e.restore(),!0):void 0},dashType:function(){var e=this.srcElement.options.stroke;return e&&e.dashType?e.dashType.toLowerCase():void 0},setLineDash:function(e){var t,n=this.dashType();n&&n!=S&&(t=x[n],e.setLineDash?e.setLineDash(t):(e.mozDash=t,e.webkitLineDash=t))},setLineCap:function(e){var t=this.dashType(),n=this.srcElement.options.stroke;t&&t!==S?e.lineCap=k:n&&n.lineCap&&(e.lineCap=n.lineCap)},setLineJoin:function(e){var t=this.srcElement.options.stroke;t&&t.lineJoin&&(e.lineJoin=t.lineJoin)},renderPoints:function(e,t){var n,i,r,o,a,s,l=t.segments;if(0!==l.length){for(n=l[0],i=n.anchor(),e.moveTo(i.x,i.y),r=1;l.length>r;r++)n=l[r],i=n.anchor(),o=l[r-1],a=o.controlOut(),s=n.controlIn(),a&&s?e.bezierCurveTo(a.x,a.y,s.x,s.y,i.x,i.y):e.lineTo(i.x,i.y);t.options.closed&&e.closePath()}}}),o=r.extend({renderPoints:function(e){var t,n=this.srcElement.paths;for(t=0;n.length>t;t++)r.fn.renderPoints(e,n[t])}}),a=r.extend({renderPoints:function(e){var t=this.srcElement.geometry(),n=t.center,i=t.radius;e.arc(n.x,n.y,i,0,2*Math.PI)}}),s=r.extend({renderPoints:function(e){var t=this.srcElement.toPath();r.fn.renderPoints.call(this,e,t)}}),l=r.extend({renderTo:function(e){var t=this.srcElement,n=t.position(),i=t.measure();e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e),e.beginPath(),e.font=t.options.font,this.setFill(e)&&e.fillText(t.content(),n.x,n.y+i.baseline),this.setStroke(e)&&(this.setLineDash(e),e.strokeText(t.content(),n.x,n.y+i.baseline)),e.restore()}}),c=r.extend({init:function(t,n){var i,o;r.fn.init.call(this,t),this.onLoad=e.proxy(this.onLoad,this),this.onError=e.proxy(this.onError,this),i=this.img=new Image,n&&(i.crossOrigin=n),i.onload=this.onLoad,i.onerror=this.onError,o=i.src=t.src(),(i.complete||void 0===i.complete)&&(i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",i.src=o),this.loading=e.Deferred()},renderTo:function(e){"resolved"===this.loading.state()&&(e.save(),this.setTransform(e),this.setClip(e),this.drawImage(e),e.restore())},optionsChange:function(t){"src"===t.field?(this.loading=e.Deferred(),this.img.src=this.srcElement.src()):r.fn.optionsChange.call(this,t)},onLoad:function(){this.loading.resolve(),this.invalidate()},onError:function(){this.loading.reject(Error("Unable to load image '"+this.img.src+"'. Check for connectivity and verify CORS headers."))},drawImage:function(e){var t=this.srcElement.rect(),n=t.topLeft();e.drawImage(this.img,n.x,n.y,t.width(),t.height())}}),d={Group:A,Text:l,Path:r,MultiPath:o,Circle:a,Arc:s,Image:c},h.support.canvas=function(){return!!u.createElement("canvas").getContext}(),h.support.canvas&&w.SurfaceFactory.current.register("canvas",T,20),p(h.drawing,{exportImage:t,canvas:{ArcNode:s,CircleNode:a,GroupNode:A,ImageNode:c,MultiPathNode:o,Node:D,PathNode:r,RootNode:i,Surface:T,TextNode:l}})}(window.kendo.jQuery),function(e){function t(){if(u.namespaces&&!u.namespaces.kvml){u.namespaces.add("kvml","urn:schemas-microsoft-com:vml");var e=u.styleSheets.length>30?u.styleSheets[0]:u.createStyleSheet();e.addRule(".kvml","behavior:url(#default#VML)")}}function n(e){var t=u.createElement("kvml:"+e);return t.className="kvml",t}function i(e){var t,n=e.length,i=[];for(t=0;n>t;t++)i.push(e[t].scaleCopy(P).toString(0,","));return i.join(" ")}function r(e,t){var n,r,a,s,l,c=e.segments,d=c.length;if(d>0){for(n=[],l=1;d>l;l++)a=o(c[l-1],c[l]),a!==s&&(s=a,n.push(a)),n.push("l"===a?i([c[l].anchor()]):i([c[l-1].controlOut(),c[l].controlIn(),c[l].anchor()]));return r="m "+i([c[0].anchor()])+" "+n.join(" "),e.options.closed&&(r+=" x"),t!==!0&&(r+=" e"),r}}function o(e,t){return e.controlOut()&&t.controlIn()?"c":"l"}function a(e){return 0===e.indexOf("fill")||0===e.indexOf(z)}function s(e,t){var n;return n=e?l(e,t.color(),t.opacity()):l(t.color(),"#fff",1-t.opacity())}function l(e,t,n){var i=new k(e),r=new k(t),o=c(i.r,r.r,n),a=c(i.g,r.g,n),s=c(i.b,r.b,n);return new k(o,a,s).toHex()}function c(e,t,n){return h.round(n*t+(1-n)*e)}var d,u=document,h=Math,p=h.atan2,f=h.sqrt,g=window.kendo,m=g.deepExtend,v=e.noop,_=g.drawing,y=_.BaseNode,w=g.geometry,b=w.toMatrix,k=g.Color,x=g.util,C=x.isTransparent,S=x.defined,T=x.deg,D=x.round,A=x.valueOrDefault,E="none",M=".kendo",P=100,I=P*P,z="gradient",F=4,R=_.Surface.extend({init:function(e,n){_.Surface.fn.init.call(this,e,n),t(),this.element.empty(),this._root=new L,this._root.attachTo(this.element[0]),this.element.on("click"+M,this._click),this.element.on("mouseover"+M,this._mouseenter),this.element.on("mouseout"+M,this._mouseleave)},type:"vml",destroy:function(){this._root&&(this._root.destroy(),this._root=null,this.element.off(M)),_.Surface.fn.destroy.call(this)},draw:function(e){this._root.load([e],void 0,null)},clear:function(){this._root.clear()}}),B=y.extend({init:function(e){y.fn.init.call(this,e),this.createElement(),this.attachReference()},observe:v,destroy:function(){this.element&&(this.element._kendoNode=null,this.element=null),y.fn.destroy.call(this)},clear:function(){var e,t;for(this.element&&(this.element.innerHTML=""),e=this.childNodes,t=0;e.length>t;t++)e[t].destroy();this.childNodes=[]},removeSelf:function(){this.element&&(this.element.parentNode.removeChild(this.element),this.element=null),y.fn.removeSelf.call(this)},createElement:function(){this.element=u.createElement("div")},attachReference:function(){this.element._kendoNode=this},load:function(e,t,n,i){var r,o,a,s,l,c;for(i=A(i,1),this.srcElement&&(i*=A(this.srcElement.options.opacity,1)),r=0;e.length>r;r++)o=e[r],a=o.children,s=o.currentTransform(n),l=i*A(o.options.opacity,1),c=new ot[o.nodeType](o,s,l),a&&a.length>0&&c.load(a,t,s,i),S(t)?this.insertAt(c,t):this.append(c),c.attachTo(this.element,t)},attachTo:function(e,t){S(t)?e.insertBefore(this.element,e.children[t]||null):e.appendChild(this.element)},optionsChange:function(e){"visible"==e.field&&this.css("display",e.value!==!1?"":E)},setStyle:function(){this.allCss(this.mapStyle())},mapStyle:function(){var e=[];return this.srcElement&&this.srcElement.options.visible===!1&&e.push(["display",E]),e},mapOpacityTo:function(e,t){var n=A(this.opacity,1);n*=A(t,1),e.push(["opacity",n])},attr:function(e,t){this.element&&(this.element[e]=t)},allAttr:function(e){for(var t=0;e.length>t;t++)this.attr(e[t][0],e[t][1])},css:function(e,t){this.element&&(this.element.style[e]=t)},allCss:function(e){for(var t=0;e.length>t;t++)this.css(e[t][0],e[t][1])}}),L=B.extend({createElement:function(){B.fn.createElement.call(this),this.allCss([["width","100%"],["height","100%"],["position","relative"],["visibility","visible"]])},attachReference:v}),O=g.Class.extend({init:function(e,t){this.srcElement=e,this.observer=t,e.addObserver(this)},geometryChange:function(){this.observer.optionsChange({field:"clip",value:this.srcElement})},clear:function(){this.srcElement.removeObserver(this)}}),H=B.extend({init:function(e){B.fn.init.call(this,e),e&&this.initClip()},observe:function(){y.fn.observe.call(this)},mapStyle:function(){var e=B.fn.mapStyle.call(this);return this.srcElement&&this.srcElement.clip()&&e.push(["clip",this.clipRect()]),e},optionsChange:function(e){"clip"==e.field&&(this.clearClip(),this.initClip(),this.setClip()),B.fn.optionsChange.call(this,e)},clear:function(){this.clearClip(),B.fn.clear.call(this)},initClip:function(){this.srcElement.clip()&&(this.clip=new O(this.srcElement.clip(),this),this.clip.observer=this)},clearClip:function(){this.clip&&(this.clip.clear(),this.clip=null,this.css("clip",this.clipRect()))},setClip:function(){this.clip&&this.css("clip",this.clipRect())},clipRect:function(){var e,t,n,i=d,r=this.srcElement.clip();return r&&(e=this.clipBBox(r),t=e.topLeft(),n=e.bottomRight(),i=g.format("rect({0}px {1}px {2}px {3}px)",t.y,n.x,n.y,t.x)),i},clipBBox:function(e){var t=this.srcElement.rawBBox().topLeft(),n=e.rawBBox();return n.origin.translate(-t.x,-t.y),n}}),N=H.extend({createElement:function(){B.fn.createElement.call(this),this.setStyle()},attachTo:function(e,t){this.css("display",E),B.fn.attachTo.call(this,e,t),this.srcElement.options.visible!==!1&&this.css("display","")},_attachTo:function(e){var t=document.createDocumentFragment();t.appendChild(this.element),e.appendChild(t)},mapStyle:function(){var e=H.fn.mapStyle.call(this);return e.push(["position","absolute"]),e.push(["white-space","nowrap"]),e},optionsChange:function(e){"transform"===e.field&&this.refreshTransform(),"opacity"===e.field&&this.refreshOpacity(),H.fn.optionsChange.call(this,e)},refreshTransform:function(e){var t,n=this.srcElement.currentTransform(e),i=this.childNodes,r=i.length;for(this.setClip(),t=0;r>t;t++)i[t].refreshTransform(n)},currentOpacity:function(){var e=A(this.srcElement.options.opacity,1);return this.parent&&this.parent.currentOpacity&&(e*=this.parent.currentOpacity()),e},refreshOpacity:function(){var e,t=this.childNodes,n=t.length,i=this.currentOpacity();for(e=0;n>e;e++)t[e].refreshOpacity(i)},initClip:function(){if(H.fn.initClip.call(this),this.clip){var e=this.clip.srcElement.bbox(this.srcElement.currentTransform());e&&(this.css("width",e.width()+e.origin.x),this.css("height",e.height()+e.origin.y))}},clipBBox:function(e){return e.bbox(this.srcElement.currentTransform())},clearClip:function(){H.fn.clearClip.call(this)}}),V=B.extend({init:function(e,t){this.opacity=t,B.fn.init.call(this,e)},createElement:function(){this.element=n("stroke"),this.setOpacity()},optionsChange:function(e){0===e.field.indexOf("stroke")&&this.setStroke()},refreshOpacity:function(e){this.opacity=e,this.setStroke()},setStroke:function(){this.allAttr(this.mapStroke())},setOpacity:function(){this.setStroke()},mapStroke:function(){var e,t=this.srcElement.options.stroke,n=[];return t&&!C(t.color)&&0!==t.width?(n.push(["on","true"]),n.push(["color",t.color]),n.push(["weight",(t.width||1)+"px"]),this.mapOpacityTo(n,t.opacity),S(t.dashType)&&n.push(["dashstyle",t.dashType]),S(t.lineJoin)&&n.push(["joinstyle",t.lineJoin]),S(t.lineCap)&&(e=t.lineCap.toLowerCase(),"butt"===e&&(e="butt"===e?"flat":e),n.push(["endcap",e]))):n.push(["on","false"]),n}}),U=B.extend({init:function(e,t,n){this.opacity=n,B.fn.init.call(this,e)},createElement:function(){this.element=n("fill"),this.setFill()},optionsChange:function(e){a(e.field)&&this.setFill()},refreshOpacity:function(e){this.opacity=e,this.setOpacity()},setFill:function(){this.allAttr(this.mapFill())},setOpacity:function(){this.setFill()},attr:function(e,t){var n,i=this.element;if(i){for(n=e.split(".");n.length>1;)i=i[n.shift()];i[n[0]]=t}},mapFill:function(){var e=this.srcElement.fill(),t=[["on","false"]];return e&&(e.nodeType==z?t=this.mapGradient(e):C(e.color)||(t=this.mapFillColor(e))),t},mapFillColor:function(e){var t=[["on","true"],["color",e.color]];return this.mapOpacityTo(t,e.opacity),t},mapGradient:function(e){var t,n=this.srcElement.options,i=n.fallbackFill||e.fallbackFill&&e.fallbackFill();return t=e instanceof _.LinearGradient?this.mapLinearGradient(e):e instanceof _.RadialGradient&&e.supportVML?this.mapRadialGradient(e):i?this.mapFillColor(i):[["on","false"]]},mapLinearGradient:function(e){var t=e.start(),n=e.end(),i=x.deg(p(n.y-t.y,n.x-t.x)),r=[["on","true"],["type",z],["focus",0],["method","none"],["angle",270-i]];return this.addColors(r),r},mapRadialGradient:function(e){var t=this.srcElement.rawBBox(),n=e.center(),i=(n.x-t.origin.x)/t.width(),r=(n.y-t.origin.y)/t.height(),o=[["on","true"],["type","gradienttitle"],["focus","100%"],["focusposition",i+" "+r],["method","none"]];return this.addColors(o),o},addColors:function(e){var t,n,i=this.srcElement.options,r=[],o=i.fill.stops,a=i.baseColor,l=this.element.colors?"colors.value":"colors",c=s(a,o[0]),d=s(a,o[o.length-1]);for(n=0;o.length>n;n++)t=o[n],r.push(h.round(100*t.offset())+"% "+s(a,t));e.push([l,r.join(",")],["color",c],["color2",d])}}),W=B.extend({init:function(e,t){this.transform=t,B.fn.init.call(this,e)},createElement:function(){this.element=n("skew"),this.setTransform()},optionsChange:function(e){"transform"===e.field&&this.refresh(this.srcElement.currentTransform())},refresh:function(e){this.transform=e,this.setTransform()},transformOrigin:function(){return"-0.5,-0.5"},setTransform:function(){this.allAttr(this.mapTransform())},mapTransform:function(){var e=this.transform,t=[],n=b(e);return n?(n.round(F),t.push(["on","true"],["matrix",[n.a,n.c,n.b,n.d,0,0].join(",")],["offset",n.e+"px,"+n.f+"px"],["origin",this.transformOrigin()])):t.push(["on","false"]),t}}),j=H.extend({init:function(e,t,n){this.fill=this.createFillNode(e,t,n),this.stroke=new V(e,n),this.transform=this.createTransformNode(e,t),H.fn.init.call(this,e)},attachTo:function(e,t){this.fill.attachTo(this.element),this.stroke.attachTo(this.element),this.transform.attachTo(this.element),B.fn.attachTo.call(this,e,t)},createFillNode:function(e,t,n){return new U(e,t,n)},createTransformNode:function(e,t){return new W(e,t)},createElement:function(){this.element=n("shape"),this.setCoordsize(),this.setStyle()},optionsChange:function(e){a(e.field)?this.fill.optionsChange(e):0===e.field.indexOf("stroke")?this.stroke.optionsChange(e):"transform"===e.field?this.transform.optionsChange(e):"opacity"===e.field&&(this.fill.setOpacity(),this.stroke.setOpacity()),H.fn.optionsChange.call(this,e)},refreshTransform:function(e){this.transform.refresh(this.srcElement.currentTransform(e))},refreshOpacity:function(e){e*=A(this.srcElement.options.opacity,1),this.fill.refreshOpacity(e),this.stroke.refreshOpacity(e)},mapStyle:function(e,t){var n,i=H.fn.mapStyle.call(this);return e&&t||(e=t=P),i.push(["position","absolute"],["width",e+"px"],["height",t+"px"]),n=this.srcElement.options.cursor,n&&i.push(["cursor",n]),i},setCoordsize:function(){this.allAttr([["coordorigin","0 0"],["coordsize",I+" "+I]])}}),G=B.extend({createElement:function(){this.element=n("path"),this.setPathData()},geometryChange:function(){this.setPathData()},setPathData:function(){this.attr("v",this.renderData())},renderData:function(){return r(this.srcElement)}}),q=j.extend({init:function(e,t,n){this.pathData=this.createDataNode(e),j.fn.init.call(this,e,t,n)},attachTo:function(e,t){this.pathData.attachTo(this.element),j.fn.attachTo.call(this,e,t)},createDataNode:function(e){return new G(e)},geometryChange:function(){this.pathData.geometryChange(),j.fn.geometryChange.call(this)}}),$=G.extend({renderData:function(){var e,t,n,i=this.srcElement.paths;if(i.length>0){for(e=[],t=0;i.length>t;t++)n=i.length-1>t,e.push(r(i[t],n));return e.join(" ")}}}),Y=q.extend({createDataNode:function(e){return new $(e)}}),K=W.extend({transformOrigin:function(){var e=this.srcElement.geometry().bbox(),t=e.center(),n=-t.x/e.width(),i=-t.y/e.height();return n+","+i}}),Q=j.extend({createElement:function(){this.element=n("oval"),this.setStyle()},createTransformNode:function(e,t){return new K(e,t)},geometryChange:function(){j.fn.geometryChange.call(this),this.setStyle(),this.refreshTransform()},mapStyle:function(){var e=this.srcElement.geometry(),t=e.radius,n=e.center,i=2*t,r=j.fn.mapStyle.call(this,i,i);return r.push(["left",n.x-t+"px"],["top",n.y-t+"px"]),r}}),X=G.extend({renderData:function(){return r(this.srcElement.toPath())}}),J=q.extend({createDataNode:function(e){return new X(e)}}),Z=G.extend({createElement:function(){G.fn.createElement.call(this),this.attr("textpathok",!0)},renderData:function(){var e=this.srcElement.rect(),t=e.center();return"m "+i([new w.Point(e.topLeft().x,t.y)])+" l "+i([new w.Point(e.bottomRight().x,t.y)])}}),et=B.extend({createElement:function(){this.element=n("textpath"),this.attr("on",!0),this.attr("fitpath",!1),this.setStyle(),this.setString()},optionsChange:function(e){"content"===e.field?this.setString():this.setStyle(),B.fn.optionsChange.call(this,e)},mapStyle:function(){return[["font",this.srcElement.options.font]]},setString:function(){this.attr("string",this.srcElement.content())}}),tt=q.extend({init:function(e,t,n){this.path=new et(e),q.fn.init.call(this,e,t,n)},createDataNode:function(e){return new Z(e)},attachTo:function(e,t){this.path.attachTo(this.element),q.fn.attachTo.call(this,e,t)},optionsChange:function(e){("font"===e.field||"content"===e.field)&&(this.path.optionsChange(e),this.pathData.geometryChange(e)),q.fn.optionsChange.call(this,e)}}),nt=G.extend({renderData:function(){var e=this.srcElement.rect(),t=(new _.Path).moveTo(e.topLeft()).lineTo(e.topRight()).lineTo(e.bottomRight()).lineTo(e.bottomLeft()).close();return r(t)}}),it=W.extend({init:function(e,t,n){this.opacity=n,W.fn.init.call(this,e,t)},createElement:function(){this.element=n("fill"),this.attr("type","frame"),this.attr("rotate",!0),this.setOpacity(),this.setSrc(),this.setTransform()},optionsChange:function(e){"src"===e.field&&this.setSrc(),W.fn.optionsChange.call(this,e)},geometryChange:function(){this.refresh()},refreshOpacity:function(e){this.opacity=e,this.setOpacity()},setOpacity:function(){var e=[];this.mapOpacityTo(e,this.srcElement.options.opacity),this.allAttr(e)},setSrc:function(){this.attr("src",this.srcElement.src())},mapTransform:function(){var e,t,n,i,r,o,a,s,l=this.srcElement,c=l.rawBBox(),d=c.center(),u=P/2,h=P,g=c.width()/h,m=c.height()/h,v=0,_=this.transform;return _?(n=b(_),i=f(n.a*n.a+n.b*n.b),r=f(n.c*n.c+n.d*n.d),g*=i,m*=r,o=T(p(n.b,n.d)),a=T(p(-n.c,n.a)),v=(o+a)/2,0!==v?(s=l.bbox().center(),e=(s.x-u)/h,t=(s.y-u)/h):(e=(d.x*i+n.e-u)/h,t=(d.y*r+n.f-u)/h)):(e=(d.x-u)/h,t=(d.y-u)/h),g=D(g,F),m=D(m,F),e=D(e,F),t=D(t,F),v=D(v,F),[["size",g+","+m],["position",e+","+t],["angle",v]]}}),rt=q.extend({createFillNode:function(e,t,n){return new it(e,t,n)},createDataNode:function(e){return new nt(e)},optionsChange:function(e){("src"===e.field||"transform"===e.field)&&this.fill.optionsChange(e),q.fn.optionsChange.call(this,e)},geometryChange:function(){this.fill.geometryChange(),q.fn.geometryChange.call(this)},refreshTransform:function(e){q.fn.refreshTransform.call(this,e),this.fill.refresh(this.srcElement.currentTransform(e))}}),ot={Group:N,Text:tt,Path:q,MultiPath:Y,Circle:Q,Arc:J,Image:rt};g.support.vml=function(){var e=g.support.browser;return e.msie&&9>e.version}(),d="inherit",g.support.browser.msie&&8>g.support.browser.version&&(d="rect(auto auto auto auto)"),g.support.vml&&_.SurfaceFactory.current.register("vml",R,30),m(_,{vml:{ArcDataNode:X,ArcNode:J,CircleTransformNode:K,CircleNode:Q,FillNode:U,GroupNode:N,ImageNode:rt,ImageFillNode:it,ImagePathDataNode:nt,MultiPathDataNode:$,MultiPathNode:Y,Node:B,PathDataNode:G,PathNode:q,RootNode:L,StrokeNode:V,Surface:R,TextNode:tt,TextPathNode:et,TextPathDataNode:Z,TransformNode:W}})}(window.kendo.jQuery),function(e,t,n){"use strict";function i(){function e(){var t,r,o;for(t=0;arguments.length>t;++t){if(r=arguments[t],r===n)throw Error("Cannot output undefined to PDF");if(r instanceof w)r.beforeRender(e),r.render(e);else if(F(r))f(r,e);else if(p(r))g(r,e);else if("number"==typeof r){if(isNaN(r))throw Error("Cannot output NaN to PDF");o=r.toFixed(7),o.indexOf(".")>=0&&(o=o.replace(/\.?0+$/,"")),"-0"==o&&(o="0"),i.writeString(o)}else/string|boolean/.test(typeof r)?i.writeString(r+""):"function"==typeof r.get?i.write(r.get()):"object"==typeof r&&(r?e(new H(r)):i.writeString("null"))}}var t=0,i=D();return e.writeData=function(e){i.write(e)},e.withIndent=function(n){++t,n(e),--t},e.indent=function(){e(Q,d("",2*t,"  ")),e.apply(null,arguments)},e.offset=function(){return i.offset()},e.toString=function(){throw Error("FIX CALLER")},e.get=function(){return i.get()},e.stream=function(){return i},e}function r(e,t){var n=e.beforeRender,i=e.render;e.beforeRender=function(){},e.render=function(e){e(t," 0 R")},e.renderFull=function(r){e._offset=r.offset(),r(t," 0 obj "),n.call(e,r),i.call(e,r),r(" endobj")}}function o(e){function t(t,n){return e&&null!=e[t]?e[t]:n}var n,o,a,s,l,c,d=this,h=i(),p=0,f=[];if(d.getOption=t,d.attach=function(e){return f.indexOf(e)<0&&(r(e,++p),f.push(e)),e},d.FONTS={},d.IMAGES={},n=t("paperSize",Z.a4),"string"==typeof n&&(n=Z[n.toLowerCase()],null==n))throw Error("Unknown paper size");n[0]=y(n[0]),n[1]=y(n[1]),t("landscape",!1)&&(n=[Math.max(n[0],n[1]),Math.min(n[0],n[1])]),o=t("margin"),o&&(o.left=y(o.left,0),o.top=y(o.top,0),o.right=y(o.right,0),o.bottom=y(o.bottom,0),t("addMargin")&&(n[0]+=o.left+o.right,n[1]+=o.top+o.bottom)),a=n[0],s=n[1],o&&(a-=o.left+o.right,s-=o.top+o.bottom),l=d.attach(new V),c=d.attach(new U([0,0,n[0],n[1]])),l.setPages(c),d.addPage=function(){var e=new N(i(),null,!0),t=new q(d,{Contents:d.attach(e),Parent:c});return t._content=e,c.addPage(d.attach(t)),t.transform(1,0,0,-1,0,n[1]),o&&(t.translate(o.left,o.top),t.rect(0,0,a,s),t.clip()),t},d.render=function(){var e,n;for(h("%PDF-1.4",Q,"%ÂÁÚÏÎ",Q,Q),e=0;f.length>e;++e)f[e].renderFull(h),h(Q,Q);for(n=h.offset(),h("xref",Q,0," ",f.length+1,Q),h("0000000000 65535 f ",Q),e=0;f.length>e;++e)h(u(f[e]._offset,10)," 00000 n ",Q);return h(Q),h("trailer",Q),h(new H({Size:f.length+1,Root:l,Info:new H({Producer:new R("Kendo UI PDF Generator"),Title:new R(t("title","")),Author:new R(t("author","")),Subject:new R(t("subject","")),Keywords:new R(t("keywords","")),Creator:new R(t("creator","Kendo UI PDF Generator")),CreationDate:t("date",new Date)})}),Q,Q),h("startxref",Q,n,Q),h("%%EOF",Q),h.stream().offset(0)}}function a(t,n){function i(){e.console&&(e.console.error?e.console.error("Cannot load URL: %s",t):e.console.log("Cannot load URL: %s",t)),n(null)}var r=new XMLHttpRequest;r.open("GET",t,!0),K&&(r.responseType="arraybuffer"),r.onload=function(){200==r.status||304==r.status?n(K?new Uint8Array(r.response):new VBArray(r.responseBody).toArray()):i()},r.onerror=i,r.send(null)}function s(e,t){var n=et[e];n?t(n):a(e,function(n){if(null==n)throw Error("Cannot load font from "+e);var i=new Y.pdf.TTFFont(n);et[e]=i,t(i)})}function l(e,t){var i=tt[e];i?t(i):(i=new Image,i.onload=function(){var n,r,o,a,s,l,c,d,u,h,p=document.createElement("canvas");p.width=i.width,p.height=i.height,n=p.getContext("2d"),n.drawImage(i,0,0);try{r=n.getImageData(0,0,i.width,i.height)}catch(f){return t(tt[e]="TAINTED")}for(o=!1,a=D(),s=D(),l=r.data,c=0;l.length>c;)a.writeByte(l[c++]),a.writeByte(l[c++]),a.writeByte(l[c++]),d=l[c++],255>d&&(o=!0),s.writeByte(d);o?i=new C(i.width,i.height,a,s):(u=p.toDataURL("image/jpeg"),u=u.substr(u.indexOf(";base64,")+8),h=D(),h.writeBase64(u),h.offset(0),i=new x(i.width,i.height,h)),t(tt[e]=i)},i.onerror=function(){t(tt[e]="TAINTED")},i.crossOrigin="Anonymous",i.src=e,(i.complete||i.complete===n)&&(i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",i.src=e))}function c(e){return function(t,n){var i=t.length,r=i;if(0===i)return n();for(;r-->0;)e(t[r],function(){0===--i&&n()})}}function d(e,t,n){for(;t>e.length;)e=n+e;return e}function u(e,t){return d(e+"",t,"0")}function h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function p(e){return e instanceof Date}function f(e,t){t("["),e.length>0&&t.withIndent(function(){for(var n=0;e.length>n;++n)n>0&&n%8===0?t.indent(e[n]):t(" ",e[n])}),t(" ]")}function g(e,t){t("(D:",u(e.getUTCFullYear(),4),u(e.getUTCMonth()+1,2),u(e.getUTCDate(),2),u(e.getUTCHours(),2),u(e.getUTCMinutes(),2),u(e.getUTCSeconds(),2),"Z)")}function m(e){return e*(72/25.4)}function v(e){return m(10*e)}function _(e){return 72*e}function y(e,n){var i,r;if("number"==typeof e)return e;if("string"==typeof e&&(i=/^\s*([0-9.]+)\s*(mm|cm|in|pt)\s*$/.exec(e),i&&(r=t(i[1]),!isNaN(r))))return"pt"==i[2]?r:{mm:m,cm:v,"in":_}[i[2]](r);if(null!=n)return n;throw Error("Can't parse unit: "+e)}function w(){}function b(e,t,n){n||(n=w),e.prototype=new n;for(var i in t)h(t,i)&&(e.prototype[i]=t[i]);return e}function k(e){return h(O,e)?O[e]:O[e]=new L(e)}function x(e,t,n){this.asStream=function(){var i=new N(n,{Type:k("XObject"),Subtype:k("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:k("DeviceRGB"),Filter:k("DCTDecode")});return i._resourceName=k("I"+ ++X),i}}function C(e,t,n,i){this.asStream=function(r){var o=new N(i,{Type:k("XObject"),Subtype:k("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:k("DeviceGray")},!0),a=new N(n,{Type:k("XObject"),Subtype:k("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:k("DeviceRGB"),SMask:r.attach(o)},!0);return a._resourceName=k("I"+ ++X),a}}function S(e){function t(e){return 1==e.length?e[0]:{FunctionType:3,Functions:e,Domain:[0,1],Bounds:d,Encode:u}}var n,i,r,o,a,s=!1,l=[],c=[],d=[],u=[];for(n=1;e.length>n;++n)i=e[n-1],r=e[n],o=i.color,a=r.color,c.push({FunctionType:2,Domain:[0,1],Range:[0,1,0,1,0,1],N:1,C0:[o.r,o.g,o.b],C1:[a.r,a.g,a.b]}),l.push({FunctionType:2,Domain:[0,1],Range:[0,1],N:1,C0:[o.a],C1:[a.a]}),(1>o.a||1>a.a)&&(s=!0),d.push(r.offset),u.push(0,1);return d.pop(),{hasAlpha:s,colors:t(c),opacities:s?t(l):null}}function T(e,t,n){var i="radial"==t.type,r=S(t.stops),o=i?[t.start.x,t.start.y,t.start.r,t.end.x,t.end.y,t.end.r]:[t.start.x,t.start.y,t.end.x,t.end.y],a={Type:k("Shading"),ShadingType:i?3:2,ColorSpace:k("DeviceRGB"),Coords:o,Domain:[0,1],Function:r.colors,Extend:[!0,!0]},s=r.hasAlpha?{Type:k("ExtGState"),AIS:!1,CA:1,ca:1,SMask:{Type:k("Mask"),S:k("Luminosity"),G:e.attach(new N("/a0 gs /s0 sh",{Type:k("XObject"),Subtype:k("Form"),FormType:1,BBox:t.userSpace?[n.left,n.top+n.height,n.left+n.width,n.top]:[0,1,1,0],Group:{Type:k("Group"),S:k("Transparency"),CS:k("DeviceGray"),I:!0},Resources:{ExtGState:{a0:{CA:1,ca:1}},Shading:{s0:{ColorSpace:k("DeviceGray"),Coords:o,Domain:[0,1],ShadingType:i?3:2,Function:r.opacities,Extend:[!0,!0]}}}}))}}:null;return{hasAlpha:r.hasAlpha,shading:new H(a),opacity:new H(s)}}function D(e){function t(){return S>=T}function n(){return T>S?e[S++]:0}function i(t){w(S),e[S++]=255&t,S>T&&(T=S)}function r(){return n()<<8|n()}function o(e){i(e>>8),i(e)}function a(){var e=r();return e>=32768?e-65536:e}function s(e){o(0>e?e+65536:e)}function l(){return 65536*r()+r()}function c(e){o(e>>>16&65535),o(65535&e)}function d(){var e=l();return e>=2147483648?e-4294967296:e}function u(e){c(0>e?e+4294967296:e)}function h(){return l()/65536}function p(e){c(Math.round(65536*e))}function f(){return d()/65536}function g(e){u(Math.round(65536*e))}function m(e){return y(e,n)}function v(e){return String.fromCharCode.apply(String,m(e))}function _(e){for(var t=0;e.length>t;++t)i(e.charCodeAt(t))}function y(e,t){for(var n=Array(e),i=0;e>i;++i)n[i]=t();return n}var w,b,k,x,C,S=0,T=0;return null==e?e=K?new Uint8Array(256):[]:T=e.length,w=K?function(t){if(t>=e.length){var n=new Uint8Array(Math.max(t+256,2*e.length));n.set(e,0),e=n}}:function(){},b=K?function(){return new Uint8Array(e.buffer,0,T)}:function(){return e},k=K?function(t){if("string"==typeof t)return _(t);var n=t.length;w(S+n),e.set(t,S),S+=n,S>T&&(T=S)}:function(e){if("string"==typeof e)return _(e);
for(var t=0;e.length>t;++t)i(e[t])},x=K?function(t,n){if(e.buffer.slice)return new Uint8Array(e.buffer.slice(t,t+n));var i=new Uint8Array(n);return i.set(new Uint8Array(e.buffer,t,n)),i}:function(t,n){return e.slice(t,t+n)},C={eof:t,readByte:n,writeByte:i,readShort:r,writeShort:o,readLong:l,writeLong:c,readFixed:h,writeFixed:p,readShort_:a,writeShort_:s,readLong_:d,writeLong_:u,readFixed_:f,writeFixed_:g,read:m,write:k,readString:v,writeString:_,times:y,get:b,slice:x,offset:function(e){return null!=e?(S=e,C):S},skip:function(e){S+=e},toString:function(){throw Error("FIX CALLER.  BinaryStream is no longer convertible to string!")},length:function(){return T},saveExcursion:function(e){var t=S;try{return e()}finally{S=t}},writeBase64:function(e){window.atob?_(window.atob(e)):k(J.decode(e))},base64:function(){return J.encode(b())}}}function A(e){return e.replace(/^\s*(['"])(.*)\1\s*$/,"$2")}function E(e){var t,n=/^\s*((normal|italic)\s+)?((normal|small-caps)\s+)?((normal|bold|\d+)\s+)?(([0-9.]+)(px|pt))(\/(([0-9.]+)(px|pt)|normal))?\s+(.*?)\s*$/i,i=n.exec(e);return i?(t=i[8]?parseInt(i[8],10):12,{italic:i[2]&&"italic"==i[2].toLowerCase(),variant:i[4],bold:i[6]&&/bold|700/i.test(i[6]),fontSize:t,lineHeight:i[12]?"normal"==i[12]?t:parseInt(i[12],10):null,fontFamily:i[14].split(/\s*,\s*/g).map(A)}):{fontSize:12,fontFamily:"sans-serif"}}function M(e){function t(t){return e.bold&&(t+="|bold"),e.italic&&(t+="|italic"),t.toLowerCase()}var n,i,r,o=e.fontFamily;if(o instanceof Array){for(r=0;o.length>r;++r)if(n=t(o[r]),i=$[n])return i}else i=$[o.toLowerCase()];return i||(i="Times-Roman"),i}function P(e,t){if(1==arguments.length)for(var n in e)P(n,e[n]);else e=e.toLowerCase(),$[e]=t}function I(e,t){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=t[0],c=t[1],d=t[2],u=t[3],h=t[4],p=t[5];return[n*l+i*d,n*c+i*u,r*l+o*d,r*c+o*u,a*l+s*d+h,a*c+s*u+p]}function z(e){return 1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&0===e[4]&&0===e[5]}var F,R,B,L,O,H,N,V,U,W,j,G,q,$,Y=e.kendo,K=!!e.Uint8Array,Q="\n",X=0,J=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{decode:function(t){for(var n,i,r,o,a,s,l,c=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),d=0,u=c.length,h=[];u>d;)n=e.indexOf(c.charAt(d++)),i=e.indexOf(c.charAt(d++)),r=e.indexOf(c.charAt(d++)),o=e.indexOf(c.charAt(d++)),a=n<<2|i>>>4,s=(15&i)<<4|r>>>2,l=(3&r)<<6|o,h.push(a),64!=r&&h.push(s),64!=o&&h.push(l);return h},encode:function(t){for(var n,i,r,o,a,s,l,c=0,d=t.length,u="";d>c;)n=t[c++],i=t[c++],r=t[c++],o=n>>>2,a=(3&n)<<4|i>>>4,s=(15&i)<<2|r>>>6,l=63&r,c-d==2?s=l=64:c-d==1&&(l=64),u+=e.charAt(o)+e.charAt(a)+e.charAt(s)+e.charAt(l);return u}}}(),Z={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],executive:[521.86,756],folio:[612,936],legal:[612,1008],letter:[612,792],tabloid:[792,1224]},et={"Times-Roman":!0,"Times-Bold":!0,"Times-Italic":!0,"Times-BoldItalic":!0,Helvetica:!0,"Helvetica-Bold":!0,"Helvetica-Oblique":!0,"Helvetica-BoldOblique":!0,Courier:!0,"Courier-Bold":!0,"Courier-Oblique":!0,"Courier-BoldOblique":!0,Symbol:!0,ZapfDingbats:!0},tt={},nt=c(s),it=c(l);o.prototype={loadFonts:nt,loadImages:it,getFont:function(e){var t=this.FONTS[e];if(!t){if(t=et[e],!t)throw Error("Font "+e+" has not been loaded");t=this.attach(t===!0?new W(e):new j(this,t)),this.FONTS[e]=t}return t},getImage:function(e){var t=this.IMAGES[e];if(!t){if(t=tt[e],!t)throw Error("Image "+e+" has not been loaded");if("TAINTED"===t)return null;t=this.IMAGES[e]=this.attach(t.asStream(this))}return t},getOpacityGS:function(e,n){var i,r,o,a=t(e).toFixed(3);return e=t(a),a+=n?"S":"F",i=this._opacityGSCache||(this._opacityGSCache={}),r=i[a],r||(o={Type:k("ExtGState")},n?o.CA=e:o.ca=e,r=this.attach(new H(o)),r._resourceName=k("GS"+ ++X),i[a]=r),r},dict:function(e){return new H(e)},name:function(e){return k(e)},stream:function(e,t){return new N(t,e)}},F=Array.isArray||function(e){return e instanceof Array},w.prototype.beforeRender=function(){},R=b(function(e){this.value=e},{render:function(e){var t,n="",i=this.escape();for(t=0;i.length>t;++t)n+=String.fromCharCode(255&i.charCodeAt(t));e("(",n,")")},escape:function(){return this.value.replace(/([\(\)\\])/g,"\\$1")},toString:function(){return this.value}}),B=b(function(e){this.value=e},{render:function(e){e("<");for(var t=0;this.value.length>t;++t)e(u(this.value.charCodeAt(t).toString(16),4));e(">")}},R),L=b(function(e){this.name=e},{render:function(e){e("/"+this.escape())},escape:function(){return this.name.replace(/[^\x21-\x7E]/g,function(e){return"#"+u(e.charCodeAt(0).toString(16),2)})},toString:function(){return this.name}}),O={},L.get=k,H=b(function(e){this.props=e},{render:function(e){var t=this.props,n=!0;e("<<"),e.withIndent(function(){for(var i in t)h(t,i)&&!/^_/.test(i)&&(n=!1,e.indent(k(i)," ",t[i]))}),n||e.indent(),e(">>")}}),N=b(function(e,t,n){if("string"==typeof e){var i=D();i.write(e),e=i}this.data=e,this.props=t||{},this.compress=n},{render:function(t){var n=this.data.get(),i=this.props;this.compress&&e.pako&&"function"==typeof e.pako.deflate&&(i.Filter?i.Filter instanceof Array||(i.Filter=[i.Filter]):i.Filter=[],i.Filter.unshift(k("FlateDecode")),n=e.pako.deflate(n)),i.Length=n.length,t(new H(i)," stream",Q),t.writeData(n),t(Q,"endstream")}}),V=b(function(e){e=this.props=e||{},e.Type=k("Catalog")},{setPages:function(e){this.props.Pages=e}},H),U=b(function(e){this.props={Type:k("Pages"),Kids:[],Count:0,MediaBox:e}},{addPage:function(e){this.props.Kids.push(e),this.props.Count++}},H),W=b(function(e){this.props={Type:k("Font"),Subtype:k("Type1"),BaseFont:k(e)},this._resourceName=k("F"+ ++X)},{encodeText:function(e){return new R(e+"")}},H),j=b(function(e,t,n){var i,r;n=this.props=n||{},n.Type=k("Font"),n.Subtype=k("Type0"),n.Encoding=k("Identity-H"),this._pdf=e,this._font=t,this._sub=t.makeSubset(),this._resourceName=k("F"+ ++X),i=t.head,this.name=t.psName,r=this.scale=t.scale,this.bbox=[i.xMin*r,i.yMin*r,i.xMax*r,i.yMax*r],this.italicAngle=t.post.italicAngle,this.ascent=t.ascent*r,this.descent=t.descent*r,this.lineGap=t.lineGap*r,this.capHeight=t.os2.capHeight||this.ascent,this.xHeight=t.os2.xHeight||0,this.stemV=0,this.familyClass=(t.os2.familyClass||0)>>8,this.isSerif=this.familyClass>=1&&7>=this.familyClass,this.isScript=10==this.familyClass,this.flags=(t.post.isFixedPitch?1:0)|(this.isSerif?2:0)|(this.isScript?8:0)|(0!==this.italicAngle?64:0)|32},{encodeText:function(e){return new B(this._sub.encodeText(e+""))},beforeRender:function(){var e,t,n,r,o=this,a=o._sub,s=a.render(),l=new N(D(s),{Length1:s.length},!0),c=o._pdf.attach(new H({Type:k("FontDescriptor"),FontName:k(o._sub.psName),FontBBox:o.bbox,Flags:o.flags,StemV:o.stemV,ItalicAngle:o.italicAngle,Ascent:o.ascent,Descent:o.descent,CapHeight:o.capHeight,XHeight:o.xHeight,FontFile2:o._pdf.attach(l)})),d=a.ncid2ogid,u=a.firstChar,h=a.lastChar,p=[];!function f(e,t){if(h>=e){var n=d[e];null==n?f(e+1):(t||p.push(e,t=[]),t.push(o._font.widthOfGlyph(n)),f(e+1,t))}}(u),e=new H({Type:k("Font"),Subtype:k("CIDFontType2"),BaseFont:k(o._sub.psName),CIDSystemInfo:new H({Registry:new R("Adobe"),Ordering:new R("Identity"),Supplement:0}),FontDescriptor:c,FirstChar:u,LastChar:h,DW:Math.round(o._font.widthOfGlyph(0)),W:p,CIDToGIDMap:o._pdf.attach(o._makeCidToGidMap())}),t=o.props,t.BaseFont=k(o._sub.psName),t.DescendantFonts=[o._pdf.attach(e)],n=new G(u,h,a.subset),r=new N(i(),null,!0),r.data(n),t.ToUnicode=o._pdf.attach(r)},_makeCidToGidMap:function(){return new N(D(this._sub.cidToGidMap()),null,!0)}},H),G=b(function(e,t,n){this.firstChar=e,this.lastChar=t,this.map=n},{render:function(e){e.indent("/CIDInit /ProcSet findresource begin"),e.indent("12 dict begin"),e.indent("begincmap"),e.indent("/CIDSystemInfo <<"),e.indent("  /Registry (Adobe)"),e.indent("  /Ordering (UCS)"),e.indent("  /Supplement 0"),e.indent(">> def"),e.indent("/CMapName /Adobe-Identity-UCS def"),e.indent("/CMapType 2 def"),e.indent("1 begincodespacerange"),e.indent("  <0000><ffff>"),e.indent("endcodespacerange");var t=this;e.indent(t.lastChar-t.firstChar+1," beginbfchar"),e.withIndent(function(){var n,i;for(n=t.firstChar;t.lastChar>=n;++n)i=t.map[n],e.indent("<",u(n.toString(16),4),">","<",u(i.toString(16),4),">")}),e.indent("endbfchar"),e.indent("endcmap"),e.indent("CMapName currentdict /CMap defineresource pop"),e.indent("end"),e.indent("end")}}),q=b(function(e,t){this._pdf=e,this._rcount=0,this._textMode=!1,this._fontResources={},this._gsResources={},this._xResources={},this._patResources={},this._shResources={},this._opacity=1,this._matrix=[1,0,0,1,0,0],this._font=null,this._fontSize=null,this._contextStack=[],t=this.props=t||{},t.Type=k("Page"),t.ProcSet=[k("PDF"),k("Text"),k("ImageB"),k("ImageC"),k("ImageI")],t.Resources=new H({Font:new H(this._fontResources),ExtGState:new H(this._gsResources),XObject:new H(this._xResources),Pattern:new H(this._patResources),Shading:new H(this._shResources)})},{_out:function(){this._content.data.apply(null,arguments)},transform:function(e,t,n,i,r,o){z(arguments)||(this._matrix=I(this._matrix,arguments),this._out(e," ",t," ",n," ",i," ",r," ",o," cm"),this._out(Q))},translate:function(e,t){this.transform(1,0,0,1,e,t)},scale:function(e,t){this.transform(e,0,0,t,0,0)},rotate:function(e){var t=Math.cos(e),n=Math.sin(e);this.transform(t,n,-n,t,0,0)},beginText:function(){this._textMode=!0,this._out("BT",Q)},endText:function(){this._textMode=!1,this._out("ET",Q)},_requireTextMode:function(){if(!this._textMode)throw Error("Text mode required; call page.beginText() first")},_requireFont:function(){if(!this._font)throw Error("No font selected; call page.setFont() first")},setFont:function(e,t){this._requireTextMode(),null==e?e=this._font:e instanceof j||(e=this._pdf.getFont(e)),null==t&&(t=this._fontSize),this._fontResources[e._resourceName]=e,this._font=e,this._fontSize=t,this._out(e._resourceName," ",t," Tf",Q)},setTextLeading:function(e){this._requireTextMode(),this._out(e," TL",Q)},setTextRenderingMode:function(e){this._requireTextMode(),this._out(e," Tr",Q)},showText:function(e){this._requireFont(),this._out(this._font.encodeText(e)," Tj",Q)},showTextNL:function(e){this._requireFont(),this._out(this._font.encodeText(e)," '",Q)},setStrokeColor:function(e,t,n){this._out(e," ",t," ",n," RG",Q)},setOpacity:function(e){this.setFillOpacity(e),this.setStrokeOpacity(e),this._opacity*=e},setStrokeOpacity:function(e){if(1>e){var t=this._pdf.getOpacityGS(this._opacity*e,!0);this._gsResources[t._resourceName]=t,this._out(t._resourceName," gs",Q)}},setFillColor:function(e,t,n){this._out(e," ",t," ",n," rg",Q)},setFillOpacity:function(e){if(1>e){var t=this._pdf.getOpacityGS(this._opacity*e,!1);this._gsResources[t._resourceName]=t,this._out(t._resourceName," gs",Q)}},gradient:function(e,t){var n,i,r;this.save(),this.rect(t.left,t.top,t.width,t.height),this.clip(),e.userSpace||this.transform(t.width,0,0,t.height,t.left,t.top),n=T(this._pdf,e,t),i="S"+ ++X,this._shResources[i]=this._pdf.attach(n.shading),n.hasAlpha&&(r="O"+ ++X,this._gsResources[r]=this._pdf.attach(n.opacity),this._out("/"+r+" gs ")),this._out("/"+i+" sh",Q),this.restore()},setDashPattern:function(e,t){this._out(e," ",t," d",Q)},setLineWidth:function(e){this._out(e," w",Q)},setLineCap:function(e){this._out(e," J",Q)},setLineJoin:function(e){this._out(e," j",Q)},setMitterLimit:function(e){this._out(e," M",Q)},save:function(){this._contextStack.push(this._context()),this._out("q",Q)},restore:function(){this._out("Q",Q),this._context(this._contextStack.pop())},moveTo:function(e,t){this._out(e," ",t," m",Q)},lineTo:function(e,t){this._out(e," ",t," l",Q)},bezier:function(e,t,n,i,r,o){this._out(e," ",t," ",n," ",i," ",r," ",o," c",Q)},bezier1:function(e,t,n,i){this._out(e," ",t," ",n," ",i," y",Q)},bezier2:function(e,t,n,i){this._out(e," ",t," ",n," ",i," v",Q)},close:function(){this._out("h",Q)},rect:function(e,t,n,i){this._out(e," ",t," ",n," ",i," re",Q)},ellipse:function(e,t,n,i){function r(t){return e+t}function o(e){return t+e}var a=.5522847498307936;this.moveTo(r(0),o(i)),this.bezier(r(n*a),o(i),r(n),o(i*a),r(n),o(0)),this.bezier(r(n),o(-i*a),r(n*a),o(-i),r(0),o(-i)),this.bezier(r(-n*a),o(-i),r(-n),o(-i*a),r(-n),o(0)),this.bezier(r(-n),o(i*a),r(-n*a),o(i),r(0),o(i))},circle:function(e,t,n){this.ellipse(e,t,n,n)},stroke:function(){this._out("S",Q)},nop:function(){this._out("n",Q)},clip:function(){this._out("W n",Q)},closeStroke:function(){this._out("s",Q)},fill:function(){this._out("f",Q)},fillStroke:function(){this._out("B",Q)},drawImage:function(e){var t=this._pdf.getImage(e);t&&(this._xResources[t._resourceName]=t,this._out(t._resourceName," Do",Q))},comment:function(e){var t=this;e.split(/\r?\n/g).forEach(function(e){t._out("% ",e,Q)})},_context:function(e){return null==e?{opacity:this._opacity,matrix:this._matrix}:(this._opacity=e.opacity,this._matrix=e.matrix,n)}},H),$={serif:"Times-Roman","serif|bold":"Times-Bold","serif|italic":"Times-Italic","serif|bold|italic":"Times-BoldItalic","sans-serif":"Helvetica","sans-serif|bold":"Helvetica-Bold","sans-serif|italic":"Helvetica-Oblique","sans-serif|bold|italic":"Helvetica-BoldOblique",monospace:"Courier","monospace|bold":"Courier-Bold","monospace|italic":"Courier-Oblique","monospace|bold|italic":"Courier-BoldOblique"},Y.pdf={Document:o,BinaryStream:D,defineFont:P,parseFontDef:E,getFontURL:M,loadFonts:nt,loadImages:it,TEXT_RENDERING_MODE:{fill:0,stroke:1,fillAndStroke:2,invisible:3,fillAndClip:4,strokeAndClip:5,fillStrokeClip:6,clip:7}}}(this,parseFloat),function(e){"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function n(e){return Object.keys(e).sort(function(e,t){return e-t}).map(parseFloat)}function i(e){var t,n,i;for(this.raw=e,this.scalerType=e.readLong(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),t=this.tables={},n=0;this.tableCount>n;++n)i={tag:e.readString(4),checksum:e.readLong(),offset:e.readLong(),length:e.readLong()},t[i.tag]=i}function r(e){function n(e,t){this.definition=t,this.length=t.length,this.offset=t.offset,this.file=e,this.rawData=e.raw,this.parse(e.raw)}n.prototype.raw=function(){return this.rawData.slice(this.offset,this.length)};for(var i in e)t(e,i)&&(n[i]=n.prototype[i]=e[i]);return n}function o(){var e,t="",n=_+"";for(e=0;n.length>e;++e)t+=String.fromCharCode(n.charCodeAt(e)-48+65);return++_,t}function a(e){this.font=e,this.subset={},this.unicodes={},this.ogid2ngid={0:0},this.ngid2ogid={0:0},this.ncid2ogid={},this.next=this.firstChar=1,this.nextGid=1,this.psName=o()+"+"+this.font.psName}function s(e,t){var n,i,r,o,a=this,s=a.contents=w(e);if("ttcf"==s.readString(4)){if(!t)throw Error("Must specify a name for TTC files");for(n=s.readLong(),i=s.readLong(),r=0;i>r;++r)if(o=s.readLong(),s.saveExcursion(function(){s.offset(o),a.parse()}),a.psName==t)return;throw Error("Font "+t+" not found in collection")}s.offset(0),a.parse()}var l,c,d,u,h,p,f,g,m,v,_,y=e.kendo.pdf,w=y.BinaryStream;i.prototype={readTable:function(e,t){var n=this.tables[e];if(!n)throw Error("Table "+e+" not found in directory");return this[e]=n.table=new t(this,n)},render:function(e){var n,i,r,o,a,s,l,c,d=Object.keys(e).length,u=Math.pow(2,Math.floor(Math.log(d)/Math.LN2)),h=16*u,p=Math.floor(Math.log(u)/Math.LN2),f=16*d-h,g=w();g.writeLong(this.scalerType),g.writeShort(d),g.writeShort(h),g.writeShort(p),g.writeShort(f),n=16*d,i=g.offset()+n,r=null,o=w();for(a in e)if(t(e,a))for(s=e[a],g.writeString(a),g.writeLong(this.checksum(s)),g.writeLong(i),g.writeLong(s.length),o.write(s),"head"==a&&(r=i),i+=s.length;i%4;)o.writeByte(0),i++;return g.write(o.get()),l=this.checksum(g.get()),c=2981146554-l,g.offset(r+8),g.writeLong(c),g.get()},checksum:function(e){e=w(e);for(var t=0;!e.eof();)t+=e.readLong();return 4294967295&t}},l=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.revision=e.readLong(),this.checkSumAdjustment=e.readLong(),this.magicNumber=e.readLong(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.read(8),this.modified=e.read(8),this.xMin=e.readShort_(),this.yMin=e.readShort_(),this.xMax=e.readShort_(),this.yMax=e.readShort_(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort_(),this.indexToLocFormat=e.readShort_(),this.glyphDataFormat=e.readShort_()},render:function(e){var t=w();return t.writeLong(this.version),t.writeLong(this.revision),t.writeLong(0),t.writeLong(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.write(this.created),t.write(this.modified),t.writeShort_(this.xMin),t.writeShort_(this.yMin),t.writeShort_(this.xMax),t.writeShort_(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort_(this.fontDirectionHint),t.writeShort_(e),t.writeShort_(this.glyphDataFormat),t.get()}}),c=r({parse:function(e){e.offset(this.offset);var t=this.file.head.indexToLocFormat;this.offsets=0===t?e.times(this.length/2,function(){return 2*e.readShort()}):e.times(this.length/4,e.readLong)},offsetOf:function(e){return this.offsets[e]},lengthOf:function(e){return this.offsets[e+1]-this.offsets[e]},render:function(e){var t,n=w(),i=e[e.length-1]>65535;for(t=0;e.length>t;++t)i?n.writeLong(e[t]):n.writeShort(e[t]/2);return{format:i?1:0,table:n.get()}}}),d=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.ascent=e.readShort_(),this.descent=e.readShort_(),this.lineGap=e.readShort_(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort_(),this.minRightSideBearing=e.readShort_(),this.xMaxExtent=e.readShort_(),this.caretSlopeRise=e.readShort_(),this.caretSlopeRun=e.readShort_(),this.caretOffset=e.readShort_(),e.skip(8),this.metricDataFormat=e.readShort_(),this.numOfLongHorMetrics=e.readShort()},render:function(e){var t=w();return t.writeLong(this.version),t.writeShort_(this.ascent),t.writeShort_(this.descent),t.writeShort_(this.lineGap),t.writeShort(this.advanceWidthMax),t.writeShort_(this.minLeftSideBearing),t.writeShort_(this.minRightSideBearing),t.writeShort_(this.xMaxExtent),t.writeShort_(this.caretSlopeRise),t.writeShort_(this.caretSlopeRun),t.writeShort_(this.caretOffset),t.write([0,0,0,0,0,0,0,0]),t.writeShort_(this.metricDataFormat),t.writeShort(e.length),t.get()}}),u=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.numGlyphs=e.readShort(),this.maxPoints=e.readShort(),this.maxContours=e.readShort(),this.maxComponentPoints=e.readShort(),this.maxComponentContours=e.readShort(),this.maxZones=e.readShort(),this.maxTwilightPoints=e.readShort(),this.maxStorage=e.readShort(),this.maxFunctionDefs=e.readShort(),this.maxInstructionDefs=e.readShort(),this.maxStackElements=e.readShort(),this.maxSizeOfInstructions=e.readShort(),this.maxComponentElements=e.readShort(),this.maxComponentDepth=e.readShort()},render:function(e){var t=w();return t.writeLong(this.version),t.writeShort(e.length),t.writeShort(this.maxPoints),t.writeShort(this.maxContours),t.writeShort(this.maxComponentPoints),t.writeShort(this.maxComponentContours),t.writeShort(this.maxZones),t.writeShort(this.maxTwilightPoints),t.writeShort(this.maxStorage),t.writeShort(this.maxFunctionDefs),t.writeShort(this.maxInstructionDefs),t.writeShort(this.maxStackElements),t.writeShort(this.maxSizeOfInstructions),t.writeShort(this.maxComponentElements),t.writeShort(this.maxComponentDepth),t.get()}}),h=r({parse:function(e){var t,n,i;e.offset(this.offset),t=this.file,n=t.hhea,this.metrics=e.times(n.numOfLongHorMetrics,function(){return{advance:e.readShort(),lsb:e.readShort_()}}),i=t.maxp.numGlyphs-t.hhea.numOfLongHorMetrics,this.leftSideBearings=e.times(i,e.readShort_)},forGlyph:function(e){var t=this.metrics,n=t.length;return n>e?t[e]:{advance:t[n-1].advance,lsb:this.leftSideBearings[e-n]}},render:function(e){var t,n,i=w();for(t=0;e.length>t;++t)n=this.forGlyph(e[t]),i.writeShort(n.advance),i.writeShort_(n.lsb);return i.get()}}),p=function(){function e(e){this.raw=e}function n(e){var t,n,r;for(this.raw=e,t=this.glyphIds=[],n=this.idOffsets=[];;){if(r=e.readShort(),n.push(e.offset()),t.push(e.readShort()),!(r&a))break;e.skip(r&i?4:2),r&l?e.skip(8):r&s?e.skip(4):r&o&&e.skip(2)}}var i,o,a,s,l,c;return e.prototype={compound:!1,render:function(){return this.raw.get()}},i=1,o=8,a=32,s=64,l=128,c=256,n.prototype={compound:!0,render:function(e){var t,n,i=w(this.raw.get());for(t=0;this.glyphIds.length>t;++t)n=this.glyphIds[t],i.offset(this.idOffsets[t]),i.writeShort(e[n]);return i.get()}},r({parse:function(){this.cache={}},glyphFor:function(i){var r,o,a,s,l,c,d,u,h,p,f,g=this.cache;return t(g,i)?g[i]:(r=this.file.loca,o=r.lengthOf(i),0===o?g[i]=null:(a=this.rawData,s=this.offset+r.offsetOf(i),l=w(a.slice(s,o)),c=l.readShort_(),d=l.readShort_(),u=l.readShort_(),h=l.readShort_(),p=l.readShort_(),f=g[i]=-1==c?new n(l):new e(l),f.numberOfContours=c,f.xMin=d,f.yMin=u,f.xMax=h,f.yMax=p,f))},render:function(e,t,n){var i,r,o,a=w(),s=[];for(i=0;t.length>i;++i)r=t[i],o=e[r],s.push(a.offset()),o&&a.write(o.render(n));return s.push(a.offset()),{table:a.get(),offsets:s}}})}(),f=function(){function e(e,t){this.text=e,this.length=e.length,this.platformID=t.platformID,this.platformSpecificID=t.platformSpecificID,this.languageID=t.languageID,this.nameID=t.nameID}return r({parse:function(t){var n,i,r,o,a,s,l,c;for(t.offset(this.offset),n=t.readShort(),i=t.readShort(),r=this.offset+t.readShort(),o=t.times(i,function(){return{platformID:t.readShort(),platformSpecificID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:t.readShort()+r}}),a=this.strings={},s=0;o.length>s;++s)l=o[s],t.offset(l.offset),c=t.readString(l.length),a[l.nameID]||(a[l.nameID]=[]),a[l.nameID].push(new e(c,l));this.postscriptEntry=a[6][0],this.postscriptName=this.postscriptEntry.text.replace(/[^\x20-\x7F]/g,"")},render:function(n){var i,r,o,a,s,l,c=this.strings,d=0;for(i in c)t(c,i)&&(d+=c[i].length);r=w(),o=w(),r.writeShort(0),r.writeShort(d),r.writeShort(6+12*d);for(i in c)if(t(c,i))for(a=6==i?[new e(n,this.postscriptEntry)]:c[i],s=0;a.length>s;++s)l=a[s],r.writeShort(l.platformID),r.writeShort(l.platformSpecificID),r.writeShort(l.languageID),r.writeShort(l.nameID),r.writeShort(l.length),r.writeShort(o.offset()),o.writeString(l.text);return r.write(o.get()),r.get()}})}(),g=function(){var e=".notdef .null nonmarkingreturn space exclam quotedbl numbersign dollar percent ampersand quotesingle parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore grave a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde Adieresis Aring Ccedilla Eacute Ntilde Odieresis Udieresis aacute agrave acircumflex adieresis atilde aring ccedilla eacute egrave ecircumflex edieresis iacute igrave icircumflex idieresis ntilde oacute ograve ocircumflex odieresis otilde uacute ugrave ucircumflex udieresis dagger degree cent sterling section bullet paragraph germandbls registered copyright trademark acute dieresis notequal AE Oslash infinity plusminus lessequal greaterequal yen mu partialdiff summation product pi integral ordfeminine ordmasculine Omega ae oslash questiondown exclamdown logicalnot radical florin approxequal Delta guillemotleft guillemotright ellipsis nonbreakingspace Agrave Atilde Otilde OE oe endash emdash quotedblleft quotedblright quoteleft quoteright divide lozenge ydieresis Ydieresis fraction currency guilsinglleft guilsinglright fi fl daggerdbl periodcentered quotesinglbase quotedblbase perthousand Acircumflex Ecircumflex Aacute Edieresis Egrave Iacute Icircumflex Idieresis Igrave Oacute Ocircumflex apple Ograve Uacute Ucircumflex Ugrave dotlessi circumflex tilde macron breve dotaccent ring cedilla hungarumlaut ogonek caron Lslash lslash Scaron scaron Zcaron zcaron brokenbar Eth eth Yacute yacute Thorn thorn minus multiply onesuperior twosuperior threesuperior onehalf onequarter threequarters franc Gbreve gbreve Idotaccent Scedilla scedilla Cacute cacute Ccaron ccaron dcroat".split(/\s+/g);return r({parse:function(e){var t,n;switch(e.offset(this.offset),this.format=e.readLong(),this.italicAngle=e.readFixed_(),this.underlinePosition=e.readShort_(),this.underlineThickness=e.readShort_(),this.isFixedPitch=e.readLong(),this.minMemType42=e.readLong(),this.maxMemType42=e.readLong(),this.minMemType1=e.readLong(),this.maxMemType1=e.readLong(),this.format){case 65536:case 196608:break;case 131072:for(t=e.readShort(),this.glyphNameIndex=e.times(t,e.readShort),this.names=[],n=this.offset+this.length;e.offset()<n;)this.names.push(e.readString(e.readByte()));break;case 151552:t=e.readShort(),this.offsets=e.read(t);break;case 262144:this.map=e.times(this.file.maxp.numGlyphs,e.readShort)}},glyphFor:function(t){switch(this.format){case 65536:return e[t]||".notdef";case 131072:var n=this.glyphNameIndex[t];return e.length>n?e[n]:this.names[n-e.length]||".notdef";case 151552:case 196608:return".notdef";case 262144:return this.map[t]||65535}},render:function(t){var n,i,r,o,a,s,l;if(196608==this.format)return this.raw();for(n=w(this.rawData.slice(this.offset,32)),n.writeLong(131072),n.offset(32),i=[],r=[],o=0;t.length>o;++o)a=t[o],s=this.glyphFor(a),l=e.indexOf(s),l>=0?i.push(l):(i.push(e.length+r.length),r.push(s));for(n.writeShort(t.length),o=0;i.length>o;++o)n.writeShort(i[o]);for(o=0;r.length>o;++o)n.writeByte(r[o].length),n.writeString(r[o]);return n.get()}})}(),m=function(){function e(e,t){var n=this;n.platformID=e.readShort(),n.platformSpecificID=e.readShort(),n.offset=t+e.readLong(),e.saveExcursion(function(){var t,i,r,o,a,s,l,c,d,u,h,p,f;switch(e.offset(n.offset),n.format=e.readShort(),n.length=e.readShort(),n.language=e.readShort(),n.isUnicode=3==n.platformID&&1==n.platformSpecificID&&4==n.format||0===n.platformID&&4==n.format,n.codeMap={},n.format){case 0:for(t=0;256>t;++t)n.codeMap[t]=e.readByte();break;case 4:for(i=e.readShort()/2,e.skip(6),r=e.times(i,e.readShort),e.skip(2),o=e.times(i,e.readShort),a=e.times(i,e.readShort_),s=e.times(i,e.readShort),l=(n.length+n.offset-e.offset())/2,c=e.times(l,e.readShort),t=0;i>t;++t)for(d=o[t],u=r[t],h=d;u>=h;++h)0===s[t]?p=h+a[t]:(f=s[t]/2-(i-t)+(h-d),p=c[f]||0,0!==p&&(p+=a[t])),n.codeMap[h]=65535&p}})}function t(e,t){function i(n){return t[e[n]]}var r,o,a,s,l,c,d,u,h,p,f,g,m,v,_,y,b,k=n(e),x=[],C=[],S=null,T=null;for(r=0;k.length>r;++r)o=k[r],a=i(o),s=a-o,(null==S||s!==T)&&(S&&C.push(S),x.push(o),T=s),S=o;for(S&&C.push(S),C.push(65535),x.push(65535),l=x.length,c=2*l,d=2*Math.pow(2,Math.floor(Math.log(l)/Math.LN2)),u=Math.log(d/2)/Math.LN2,h=c-d,p=[],f=[],g=[],r=0;l>r;++r){if(m=x[r],v=C[r],65535==m){p.push(0),f.push(0);break}if(_=i(m),m-_>=32768)for(p.push(0),f.push(2*(g.length+l-r)),y=m;v>=y;++y)g.push(i(y));else p.push(_-m),f.push(0)}return b=w(),b.writeShort(3),b.writeShort(1),b.writeLong(12),b.writeShort(4),b.writeShort(16+8*l+2*g.length),b.writeShort(0),b.writeShort(c),b.writeShort(d),b.writeShort(u),b.writeShort(h),C.forEach(b.writeShort),b.writeShort(0),x.forEach(b.writeShort),p.forEach(b.writeShort_),f.forEach(b.writeShort),g.forEach(b.writeShort),b.get()}return r({parse:function(t){var n,i=this,r=i.offset;t.offset(r),i.version=t.readShort(),n=t.readShort(),i.unicodeEntry=null,i.tables=t.times(n,function(){var n=new e(t,r);return n.isUnicode&&(i.unicodeEntry=n),n})},render:function(e,n){var i=w();return i.writeShort(0),i.writeShort(1),i.write(t(e,n)),i.get()},getUnicodeEntry:function(){if(!this.unicodeEntry)throw Error("Font doesn't have an Unicode encoding");return this.unicodeEntry}})}(),v=r({parse:function(e){e.offset(this.offset),this.version=e.readShort(),this.averageCharWidth=e.readShort_(),this.weightClass=e.readShort(),this.widthClass=e.readShort(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort_(),this.ySubscriptYSize=e.readShort_(),this.ySubscriptXOffset=e.readShort_(),this.ySubscriptYOffset=e.readShort_(),this.ySuperscriptXSize=e.readShort_(),this.ySuperscriptYSize=e.readShort_(),this.ySuperscriptXOffset=e.readShort_(),this.ySuperscriptYOffset=e.readShort_(),this.yStrikeoutSize=e.readShort_(),this.yStrikeoutPosition=e.readShort_(),this.familyClass=e.readShort_(),this.panose=e.times(10,e.readByte),this.charRange=e.times(4,e.readLong),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort_(),this.descent=e.readShort_(),this.lineGap=e.readShort_(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=e.times(2,e.readLong),this.version>1&&(this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()))},render:function(){return this.raw()}}),_=1e5,a.prototype={use:function(e){var t,n,i,r,o;if("string"==typeof e){for(n="",i=0;e.length>i;++i)t=this.use(e.charCodeAt(i)),n+=String.fromCharCode(t);return n}return t=this.unicodes[e],t||(t=this.next++,this.subset[t]=e,this.unicodes[e]=t,r=this.font.cmap.getUnicodeEntry().codeMap[e],r&&(this.ncid2ogid[t]=r,null==this.ogid2ngid[r]&&(o=this.nextGid++,this.ogid2ngid[r]=o,this.ngid2ogid[o]=r))),t},encodeText:function(e){return this.use(e)},glyphIds:function(){return n(this.ogid2ngid)},glyphsFor:function(e,t){var n,i,r;for(t||(t={}),n=0;e.length>n;++n)i=e[n],t[i]||(r=t[i]=this.font.glyf.glyphFor(i),r&&r.compound&&this.glyphsFor(r.glyphIds,t));return t},render:function(){var e,i,r,o,a,s,l,c,d=this.glyphsFor(this.glyphIds());for(e in d)t(d,e)&&(e=parseInt(e,10),null==this.ogid2ngid[e]&&(i=this.nextGid++,this.ogid2ngid[e]=i,this.ngid2ogid[i]=e));return r=n(this.ngid2ogid),o=r.map(function(e){return this.ngid2ogid[e]},this),a=this.font,s=a.glyf.render(d,o,this.ogid2ngid),l=a.loca.render(s.offsets),this.lastChar=this.next-1,c={cmap:m.render(this.ncid2ogid,this.ogid2ngid),glyf:s.table,loca:l.table,hmtx:a.hmtx.render(o),hhea:a.hhea.render(o),maxp:a.maxp.render(o),post:a.post.render(o),name:a.name.render(this.psName),head:a.head.render(l.format),"OS/2":a.os2.render()},this.font.directory.render(c)},cidToGidMap:function(){var e,t,n,i=w(),r=0;for(e=this.firstChar;this.next>e;++e){for(;e>r;)i.writeShort(0),r++;t=this.ncid2ogid[e],t?(n=this.ogid2ngid[t],i.writeShort(n)):i.writeShort(0),r++}return i.get()}},s.prototype={parse:function(){var e=this.directory=new i(this.contents);this.head=e.readTable("head",l),this.loca=e.readTable("loca",c),this.hhea=e.readTable("hhea",d),this.maxp=e.readTable("maxp",u),this.hmtx=e.readTable("hmtx",h),this.glyf=e.readTable("glyf",p),this.name=e.readTable("name",f),this.post=e.readTable("post",g),this.cmap=e.readTable("cmap",m),this.os2=e.readTable("OS/2",v),this.psName=this.name.postscriptName,this.ascent=this.os2.ascent||this.hhea.ascent,this.descent=this.os2.descent||this.hhea.descent,this.lineGap=this.os2.lineGap||this.hhea.lineGap,this.scale=1e3/this.head.unitsPerEm},widthOfGlyph:function(e){return this.hmtx.forGlyph(e).advance*this.scale},makeSubset:function(){return new a(this)}},y.TTFFont=s}(this),function(e){e.PDFMixin={extend:function(e){e.events.push("pdfExport"),e.options.pdf=this.options,e.saveAsPDF=this.saveAsPDF},options:{fileName:"Export.pdf",proxyURL:"",paperSize:"auto",landscape:!1,margin:null,title:null,author:null,subject:null,keywords:null,creator:"Kendo UI PDF Generator",date:null},saveAsPDF:function(){if(!this.trigger("pdfExport")){var t=this.options.pdf;
e.drawing.drawDOM(this.wrapper[0]).then(function(n){return e.drawing.exportPDF(n,t)}).done(function(n){e.saveAs({dataURI:n,fileName:t.fileName,proxyURL:t.proxyURL,forceProxy:t.forceProxy})})}}}}(kendo),function(e,t){"use strict";function n(){if(!e.pdf)throw Error("kendo.pdf.js is not loaded");return e.pdf}function i(e,t){function i(e,t){return d.pdf&&null!=d.pdf[e]?d.pdf[e]:t}function r(){var r,a,s,c,d,u,p;--o>0||(r=i("paperSize","auto"),a=!1,"auto"==r&&(h?(s=h.getSize(),r=[s.width,s.height],a=!0,c=h.getOrigin(),d=new D.Group,d.transform(new A.Matrix(1,0,0,1,-c.x,-c.y)),d.append(e),e=d):r="A4"),u=new(n().Document)({paperSize:r,landscape:i("landscape",!1),margin:i("margin"),addMargin:a,title:i("title"),author:i("author"),subject:i("subject"),keywords:i("keywords"),creator:i("creator"),date:i("date")}),p=u.addPage(),l(e,p,u),t(u.render(),u,p))}var o,a=[],c=[],d=e.options,u=T(e),h=u.bbox;e=u.root,e.traverse(function(e){s({Image:function(e){c.indexOf(e.src())<0&&c.push(e.src())},Text:function(e){var t=n().parseFontDef(e.options.font),i=n().getFontURL(t);a.indexOf(i)<0&&a.push(i)}},e)}),o=2,n().loadFonts(a,r),n().loadImages(c,r)}function r(e,t){i(e,function(e){t("data:application/pdf;base64,"+e.base64())})}function o(e,t){i(e,function(e){t(new Blob([e.get()],{type:"application/pdf"}))})}function a(t,n,i,a){window.Blob&&!e.support.browser.safari?o(t,function(t){e.saveAs({dataURI:t,fileName:n}),a&&a(t)}):r(t,function(t){e.saveAs({dataURI:t,fileName:n,proxyURL:i}),a&&a(t)})}function s(e,t){var n=e[t.nodeType];return n?n.call.apply(n,arguments):t}function l(e,t,n){var i,r,o;e.DEBUG&&t.comment(e.DEBUG),i=e.transform(),r=e.opacity(),t.save(),null!=r&&1>r&&t.setOpacity(r),c(e,t,n),d(e,t,n),u(e,t,n),i&&(o=i.matrix(),t.transform(o.a,o.b,o.c,o.d,o.e,o.f)),s({Path:v,MultiPath:_,Circle:y,Arc:w,Text:b,Image:x,Group:k},e,t,n),t.restore()}function c(e,t){var n,i,r,o,a,s,l=e.stroke&&e.stroke();if(l){if(n=l.color){if(n=S(n),null==n)return;t.setStrokeColor(n.r,n.g,n.b),1!=n.a&&t.setStrokeOpacity(n.a)}if(i=l.width,null!=i){if(0===i)return;t.setLineWidth(i)}r=l.dashType,r&&t.setDashPattern(E[r],0),o=l.lineCap,o&&t.setLineCap(M[o]),a=l.lineJoin,a&&t.setLineJoin(P[a]),s=l.opacity,null!=s&&t.setStrokeOpacity(s)}}function d(e,t){var n,i,r=e.fill&&e.fill();if(r&&!(r instanceof D.Gradient)){if(n=r.color){if(n=S(n),null==n)return;t.setFillColor(n.r,n.g,n.b),1!=n.a&&t.setFillOpacity(n.a)}i=r.opacity,null!=i&&t.setFillOpacity(i)}}function u(e,t,n){var i=e.clip();i&&(m(i,t,n),t.clip())}function h(e){return e&&(e instanceof D.Gradient||e.color&&!/^(none|transparent)$/i.test(e.color)&&(null==e.width||e.width>0)&&(null==e.opacity||e.opacity>0))}function p(e,t,n,i){var r,o,a,s,l,c,d=e.fill();return d instanceof D.Gradient?(i?t.stroke():t.nop(),d instanceof D.LinearGradient?(r={x:d.start().x,y:d.start().y},o={x:d.end().x,y:d.end().y},a={type:"linear",start:r,end:o,userSpace:d.userSpace(),stops:d.stops.elements().map(function(e){var t,n=e.offset();return n=/%$/.test(n)?parseFloat(n)/100:parseFloat(n),t=S(e.color()),t.a*=e.opacity(),{offset:n,color:t}})},s=e.rawBBox(),l=s.topLeft(),c=s.getSize(),s={left:l.x,top:l.y,width:c.width,height:c.height},t.gradient(a,s),!0):void(window.console&&window.console.log&&window.console.log("Radial gradients are not yet supported in PDF output."))):void 0}function f(e,t,n){h(e.fill())&&h(e.stroke())?p(e,t,n,!0)||t.fillStroke():h(e.fill())?p(e,t,n,!1)||t.fill():h(e.stroke())?t.stroke():t.nop()}function g(e,t){var n,i,r,o=e.segments;if(4==o.length&&e.options.closed){for(n=[],i=0;o.length>i;++i){if(o[i].controlIn())return!1;n[i]=o[i].anchor()}if(r=n[0].y==n[1].y&&n[1].x==n[2].x&&n[2].y==n[3].y&&n[3].x==n[0].x||n[0].x==n[1].x&&n[1].y==n[2].y&&n[2].x==n[3].x&&n[3].y==n[0].y)return t.rect(n[0].x,n[0].y,n[2].x-n[0].x,n[2].y-n[0].y),!0}}function m(e,t,n){var i,r,o,a,s,l,c=e.segments;if(0!==c.length&&!g(e,t,n)){for(r=0;c.length>r;++r)o=c[r],a=o.anchor(),i?(s=i.controlOut(),l=o.controlIn(),s&&l?t.bezier(s.x,s.y,l.x,l.y,a.x,a.y):t.lineTo(a.x,a.y)):t.moveTo(a.x,a.y),i=o;e.options.closed&&t.close()}}function v(e,t,n){m(e,t,n),f(e,t,n)}function _(e,t,n){var i,r=e.paths;for(i=0;r.length>i;++i)m(r[i],t,n);f(e,t,n)}function y(e,t,n){var i=e.geometry();t.circle(i.center.x,i.center.y,i.radius),f(e,t,n)}function w(e,t,n){var i,r=e.geometry().curvePoints();for(t.moveTo(r[0].x,r[0].y),i=1;r.length>i;)t.bezier(r[i].x,r[i++].y,r[i].x,r[i++].y,r[i].x,r[i++].y);f(e,t,n)}function b(e,t){var i,r=n().parseFontDef(e.options.font),o=e._position;e.fill()&&e.stroke()?i=n().TEXT_RENDERING_MODE.fillAndStroke:e.fill()?i=n().TEXT_RENDERING_MODE.fill:e.stroke()&&(i=n().TEXT_RENDERING_MODE.stroke),t.transform(1,0,0,-1,o.x,o.y+r.fontSize),t.beginText(),t.setFont(n().getFontURL(r),r.fontSize),t.setTextRenderingMode(i),t.showText(e.content()),t.endText()}function k(e,t,n){var i,r=e.children;for(i=0;r.length>i;++i)l(r[i],t,n)}function x(e,t){var n=e.src(),i=e.rect(),r=i.getOrigin(),o=i.getSize();t.transform(o.width,0,0,-o.height,r.x,r.y+o.height),t.drawImage(n)}function C(e,n){var i=t.Deferred();return e.options.set("pdf",n),D.pdf.toDataURL(e,i.resolve),i.promise()}function S(t){var n=e.parseColor(t,!0);return n?n.toRGB():null}function T(e){function t(e){return l=!0,e}function n(e){return e.visible()&&e.opacity()>0&&(h(e.fill())||h(e.stroke()))}function i(e){var t,n,i=[];for(t=0;e.length>t;++t)n=a(e[t]),null!=n&&i.push(n);return i}function r(e,t){var n,i=c,r=d;e.transform()&&(d=d.multiplyCopy(e.transform().matrix())),n=e.clip(),n&&(n=n.bbox(),n&&(n=n.bbox(d),c=c?A.Rect.intersect(c,n):n));try{return t()}finally{c=i,d=r}}function o(e){if(null==c)return!1;var t=e.rawBBox().bbox(d);return c&&t&&(t=A.Rect.intersect(t,c)),t}function a(a){if(!(a instanceof D.Group||a instanceof D.MultiPath)){var l=o(a);if(!l)return t(null);u=u?A.Rect.union(u,l):l}return s({Path:function(e){return 0!==e.segments.length&&n(e)?e:t(null)},MultiPath:function(e){if(!n(e))return t(null);var r=new D.MultiPath(e.options);return r.paths=i(e.paths),0===r.paths.length?t(null):r},Circle:function(e){return n(e)?e:t(null)},Arc:function(e){return n(e)?e:t(null)},Text:function(e){return/\S/.test(e.content())&&n(e)?e:t(null)},Image:function(e){return e.visible()&&e.opacity()>0?e:t(null)},Group:function(n){return r(n,function(){var r=new D.Group(n.options);return r.children=i(n.children),n!==e&&0===r.children.length?t(null):r})}},a)}var l,c=!1,d=A.Matrix.unit(),u=null;do l=!1,e=a(e);while(e&&l);return{root:e,bbox:u}}var D=e.drawing,A=e.geometry,E={dash:[4],dashDot:[4,2,1,2],dot:[1,2],longDash:[8,2],longDashDot:[8,2,1,2],longDashDotDot:[8,2,1,2,1,2],solid:[]},M={butt:0,round:1,square:2},P={miter:0,round:1,bevel:2};e.deepExtend(D,{exportPDF:C,pdf:{toDataURL:r,toBlob:o,saveAs:a,toStream:i}})}(window.kendo,window.kendo.jQuery),function(e,t,n){"use strict";function i(e){function t(t){return i=t.exec(e.substr(a))}function n(e){return e.replace(/^\s+|\s+$/g,"")}for(var i,r=[],o=0,a=0,s=0,l=!1;e.length>a;)t(/^\s+/)?a+=i[0].length:t(/^[\(\[\{]/)?(s++,a++):t(/^[\)\]\}]/)?(s--,a++):!l&&t(/^[\"\']/)?(l=i[0],a++):"'"==l&&t(/^\\\'/)?a+=2:'"'==l&&t(/^\\\"/)?a+=2:"'"==l&&t(/^\'/)?(l=!1,a++):'"'==l&&t(/^\"/)?(l=!1,a++):t(/^\s*,\s*/)?(!l&&!s&&a>o&&(r.push(n(e.substring(o,a))),o=a+i[0].length),a+=i[0].length):a++;return a>o&&r.push(n(e.substring(o,a))),r}function r(e,t){var n=kendo.parseColor(e);return n&&(n=n.toRGB(),t?n=n.toCssRgba():0===n.a&&(n=null)),n}function o(e,t){function n(e){j[e]||(j[e]=!0,o.push(e))}function i(){--r<=0&&t()}var r,o=[];!function s(e){var t,i=a(h(u(e),"background-image"));for(/^img$/i.test(e.tagName)&&n(e.src),i&&n(i),t=e.firstChild;t;t=t.nextSibling)1==t.nodeType&&s(t)}(e),r=o.length,0===r&&i(),o.forEach(function(e){var t=j[e]=new Image;t.onload=i,t.onerror=function(){j[e]=null,i()},t.src=e,(t.complete||void 0===t.complete)&&(t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",t.src=e)})}function a(e){var t=/^\s*url\((['"]?)(.*?)\1\)\s*$/i.exec(e);return t?t[2]:void 0}function s(e,t,n){var i,r;O=Object.create(O),O[e.tagName.toLowerCase()]={element:e,style:t},i=h(t,"text-decoration"),i&&"none"!=i&&(r=h(t,"color"),i.split(/\s+/g).forEach(function(e){O[e]||(O[e]=r)})),d(e)&&(O._stackingContext={element:e,group:n})}function l(){O=Object.getPrototypeOf(O)}function c(e){if(null!=O._clipbox){var t=e.bbox(O._matrix);O._clipbox=O._clipbox?V.Rect.intersect(O._clipbox,t):t}}function d(e){function t(e){return h(n,e)}var n=u(e);return"none"!=t("transform")||"static"!=t("position")&&"auto"!=t("z-index")||t("opacity")<1?!0:void 0}function u(e){return window.getComputedStyle(e)}function h(e,t){return e.getPropertyValue(t)||W.webkit&&e.getPropertyValue("-webkit-"+t)||W.firefox&&e.getPropertyValue("-moz-"+t)||W.opera&&e.getPropertyValue("-o-"+t)||W.msie&&e.getPropertyValue("-ms-"+t)}function p(e,t,n,i){e.setProperty(t,n,i),W.webkit?e.setProperty("-webkit-"+t,n,i):W.firefox?e.setProperty("-moz-"+t,n,i):W.opera?e.setProperty("-o-"+t,n,i):W.msie&&(e.setProperty("-ms-"+t,n,i),t="ms"+t.replace(/(^|-)([a-z])/g,function(e,t,n){return t+n.toUpperCase()}),e[t]=n)}function f(e,n){return n="border-"+n,{width:t(h(e,n+"-width")),style:h(e,n+"-style"),color:r(h(e,n+"-color"),!0)}}function g(e,t){var n=e.style.cssText,i=t();return e.style.cssText=n,i}function m(e,n){var i=h(e,"border-"+n+"-radius").split(/\s+/g).map(t);return 1==i.length&&i.push(i[0]),S({x:i[0],y:i[1]})}function v(e){var t=e.getBoundingClientRect();return t=_(t,"border-*-width",e),t=_(t,"padding-*",e)}function _(e,n,i){var r,o,a,s,l;return"string"==typeof n?(r=u(i),o=t(h(r,n.replace("*","top"))),a=t(h(r,n.replace("*","right"))),s=t(h(r,n.replace("*","bottom"))),l=t(h(r,n.replace("*","left")))):"number"==typeof n&&(o=a=s=l=n),{top:e.top+o,right:e.right-a,bottom:e.bottom-s,left:e.left+l,width:e.right-e.left-a-l,height:e.bottom-e.top-s-o}}function y(e){var n,i,r=h(e,"transform");return"none"==r?null:(n=/^\s*matrix\(\s*(.*?)\s*\)\s*$/.exec(r),n?(i=h(e,"transform-origin"),n=n[1].split(/\s*,\s*/g).map(t),i=i.split(/\s+/g).map(t),{matrix:n,origin:i}):void 0)}function w(e){return 180*e/n.PI%360}function b(e){var i=t(e);return/grad$/.test(e)?n.PI*i/200:/rad$/.test(e)?i:/turn$/.test(e)?n.PI*i*2:/deg$/.test(e)?n.PI*i/180:void 0}function k(e,t){return t=new V.Matrix(t[0],t[1],t[2],t[3],t[4],t[5]),e.transform(t),t}function x(e,t){e.clip(t)}function C(e,t,n,i){for(var r=new V.Arc([t,n],i).curvePoints(),o=1;r.length>o;)e.curveTo(r[o++],r[o++],r[o++])}function S(e){return(0>=e.x||0>=e.y)&&(e.x=e.y=0),e}function T(e,n,i){var r,o,a,s,l,c,d,p,g=u(e),v=m(g,"top-left"),_=m(g,"top-right"),y=m(g,"bottom-left"),w=m(g,"bottom-right");return("padding"==i||"content"==i)&&(r=f(g,"top"),o=f(g,"right"),a=f(g,"bottom"),s=f(g,"left"),v.x-=s.width,v.y-=r.width,_.x-=o.width,_.y-=r.width,w.x-=o.width,w.y-=a.width,y.x-=s.width,y.y-=a.width,"content"==i&&(l=t(h(g,"padding-top")),c=t(h(g,"padding-right")),d=t(h(g,"padding-bottom")),p=t(h(g,"padding-left")),v.x-=p,v.y-=l,_.x-=c,_.y-=l,w.x-=c,w.y-=d,y.x-=p,y.y-=d)),"number"==typeof i&&(v.x-=i,v.y-=i,_.x-=i,_.y-=i,w.x-=i,w.y-=i,y.x-=i,y.y-=i),D(n,v,_,w,y)}function D(e,t,n,i,r){var o=new N.Path({fill:null,stroke:null});return S(t),S(n),S(i),S(r),o.moveTo(e.left,e.top+t.y),t.x&&C(o,e.left+t.x,e.top+t.y,{startAngle:-180,endAngle:-90,radiusX:t.x,radiusY:t.y}),o.lineTo(e.right-n.x,e.top),n.x&&C(o,e.right-n.x,e.top+n.y,{startAngle:-90,endAngle:0,radiusX:n.x,radiusY:n.y}),o.lineTo(e.right,e.bottom-i.y),i.x&&C(o,e.right-i.x,e.bottom-i.y,{startAngle:0,endAngle:90,radiusX:i.x,radiusY:i.y}),o.lineTo(e.left+r.x,e.bottom),r.x&&C(o,e.left+r.x,e.bottom-r.y,{startAngle:90,endAngle:180,radiusX:r.x,radiusY:r.y}),o.close()}function A(e,o){function s(t){var n,i,r,o,a,s;if(/^td$/i.test(e.tagName)&&(n=O.table,n&&"collapse"==h(n.style,"border-collapse"))){if(i=f(n.style,"left").width,r=f(n.style,"top").width,0===i&&0===r)return t;if(o=n.element.getBoundingClientRect(),a=n.element.rows[0].cells[0],s=a.getBoundingClientRect(),s.top==o.top||s.left==o.left)return U.call(t).map(function(e){return{left:e.left+i,top:e.top+r,right:e.right+i,bottom:e.bottom+r,height:e.height,width:e.width}})}return t}function l(e,t,i,r,a,s,l,c){function d(t,r,o){var a=n.PI/2*t/(t+i),s={x:r.x-t,y:r.y-i},l=new N.Path({fill:{color:e},stroke:null}).moveTo(0,0);k(l,o),C(l,0,r.y,{startAngle:-90,endAngle:-w(a),radiusX:r.x,radiusY:r.y}),s.x>0&&s.y>0?(l.lineTo(s.x*n.cos(a),r.y-s.y*n.sin(a)),C(l,0,r.y,{startAngle:-w(a),endAngle:-90,radiusX:s.x,radiusY:s.y,anticlockwise:!0})):s.x>0?l.lineTo(s.x,i).lineTo(0,i):l.lineTo(s.x,i).lineTo(s.x,0),h.append(l.close())}if(!(0>=i)){var u,h=new N.Group;k(h,c),o.append(h),S(s),S(l),u=new N.Path({fill:{color:e},stroke:null}),h.append(u),u.moveTo(s.x?n.max(s.x,r):0,0).lineTo(t-(l.x?n.max(l.x,a):0),0).lineTo(t-n.max(l.x,a),i).lineTo(n.max(s.x,r),i).close(),s.x&&d(r,s,[-1,0,0,1,s.x,0]),l.x&&d(a,l,[1,0,0,1,t-l.x,0])}}function d(e){var t,n,i,r,a,s,l,c=new N.Group;for(x(c,D(e,Y,K,X,Q)),o.append(c),Z&&(t=new N.Path({fill:{color:Z.toCssRgba()},stroke:null}),t.moveTo(e.left,e.top).lineTo(e.right,e.top).lineTo(e.right,e.bottom).lineTo(e.left,e.bottom).close(),c.append(t)),l=v.length;--l>=0;)n=v[l],i=y[l]||y[y.length-1],r=b[l]||b[b.length-1],a=A[l]||A[A.length-1],s=P[l]||P[P.length-1],p(c,e,n,i,r,a,s)}function p(n,i,r,o,s,l,c){function d(n,i,r,a,d){function u(){for(;m.origin.x>i.left;)m.origin.x-=r}function h(){for(;m.origin.y>i.top;)m.origin.y-=a}function p(){for(;i.right>m.origin.x;)d(n,m.clone()),m.origin.x+=r}var f,g,m,v,y=r/a,w=i;if("content-box"==l?(w=_(w,"border-*-width",e),w=_(w,"padding-*",e)):"padding-box"==l&&(w=_(w,"border-*-width",e)),/^\s*auto(\s+auto)?\s*$/.test(c)||(f=c.split(/\s+/g),r=/%$/.test(f[0])?w.width*t(f[0])/100:t(f[0]),a=1==f.length||"auto"==f[1]?r/y:/%$/.test(f[1])?w.height*t(f[1])/100:t(f[1])),g=(s+"").split(/\s+/),1==g.length&&(g[1]="50%"),g[0]=/%$/.test(g[0])?t(g[0])/100*(w.width-r):t(g[0]),g[1]=/%$/.test(g[1])?t(g[1])/100*(w.height-a):t(g[1]),m=new V.Rect([w.left+g[0],w.top+g[1]],[r,a]),"no-repeat"==o)d(n,m);else if("repeat-x"==o)u(),p();else if("repeat-y"==o)for(h();i.bottom>m.origin.y;)d(n,m.clone()),m.origin.y+=a;else if("repeat"==o)for(u(),h(),v=m.origin.clone();i.bottom>m.origin.y;)m.origin.x=v.x,p(),m.origin.y+=a}var u,h,p;r&&"none"!=r&&(/^url\(\"data:image\/svg/i.test(r)||(u=a(r),u?(h=j[u],h&&h.width>0&&h.height>0&&d(n,i,h.width,h.height,function(e,t){e.append(new N.Image(u,t))})):(p=H(r),p&&d(n,i,i.width,i.height,E(p)))))}function g(t,n,i){function r(e){return{x:e.y,y:e.x}}var a,s,c;if(0!==t.width&&0!==t.height&&(d(t),a=$.width>0&&(n&&"ltr"==J||i&&"rtl"==J),s=G.width>0&&(i&&"ltr"==J||n&&"rtl"==J),0!==L.width||0!==$.width||0!==G.width||0!==q.width)){if(L.color==G.color&&L.color==q.color&&L.color==$.color&&L.width==G.width&&L.width==q.width&&L.width==$.width&&a&&s)return t=_(t,L.width/2),c=T(e,t,L.width/2),c.options.stroke={color:L.color,width:L.width},void o.append(c);if(0===Y.x&&0===K.x&&0===X.x&&0===Q.x&&2>L.width&&2>$.width&&2>G.width&&2>q.width)return L.width>0&&o.append(new N.Path({stroke:{width:L.width,color:L.color}}).moveTo(t.left,t.top+L.width/2).lineTo(t.right,t.top+L.width/2)),q.width>0&&o.append(new N.Path({stroke:{width:q.width,color:q.color}}).moveTo(t.left,t.bottom-q.width/2).lineTo(t.right,t.bottom-q.width/2)),a&&o.append(new N.Path({stroke:{width:$.width,color:$.color}}).moveTo(t.left+$.width/2,t.top).lineTo(t.left+$.width/2,t.bottom)),void(s&&o.append(new N.Path({stroke:{width:G.width,color:G.color}}).moveTo(t.right-G.width/2,t.top).lineTo(t.right-G.width/2,t.bottom)));l(L.color,t.width,L.width,$.width,G.width,Y,K,[1,0,0,1,t.left,t.top]),l(q.color,t.width,q.width,G.width,$.width,X,Q,[-1,0,0,-1,t.right,t.bottom]),l($.color,t.height,$.width,q.width,L.width,r(Q),r(Y),[0,-1,1,0,t.left,t.bottom]),l(G.color,t.height,G.width,L.width,q.width,r(K),r(X),[0,1,-1,0,t.right,t.top])}}var v,y,b,A,P,I,F,R,B=u(e),L=f(B,"top"),G=f(B,"right"),q=f(B,"bottom"),$=f(B,"left"),Y=m(B,"top-left"),K=m(B,"top-right"),Q=m(B,"bottom-left"),X=m(B,"bottom-right"),J=h(B,"direction"),Z=h(B,"background-color");for(Z=r(Z),v=i(h(B,"background-image")),y=i(h(B,"background-repeat")),b=i(h(B,"background-position")),A=i(h(B,"background-origin")),P=i(h(B,"background-size")),W.msie&&10>W.version&&(b=i(e.currentStyle.backgroundPosition)),I=_(e.getBoundingClientRect(),"border-*-width",e),function(){var e,n,i,r,a,s,l,d=h(B,"clip"),u=/^\s*rect\((.*)\)\s*$/.exec(d);u&&(e=u[1].split(/[ ,]+/g),n="auto"==e[0]?I.top:t(e[0])+I.top,i="auto"==e[1]?I.right:t(e[1])+I.left,r="auto"==e[2]?I.bottom:t(e[2])+I.top,a="auto"==e[3]?I.left:t(e[3])+I.left,s=new N.Group,l=(new N.Path).moveTo(a,n).lineTo(i,n).lineTo(i,r).lineTo(a,r).close(),x(s,l),o.append(s),o=s,c(l))}(),F=e.getClientRects(),1==F.length&&(F=[e.getBoundingClientRect()]),F=s(F),R=0;F.length>R;++R)g(F[R],0===R,R==F.length-1);return function(){function t(){var t=T(e,I,"padding"),n=new N.Group;x(n,t),o.append(n),o=n,c(t)}/^(hidden|auto|scroll)/.test(h(B,"overflow"))?t():/^(hidden|auto|scroll)/.test(h(B,"overflow-x"))?t():/^(hidden|auto|scroll)/.test(h(B,"overflow-y"))&&t()}(),M(e,o)||z(e,o),o}function E(e){return function(i,r){{var o,a,s,l,c,d,u,h,p,f,g,m,v,_=r.width(),y=r.height();r.topLeft()}switch(e.type){case"linear":switch(o=null!=e.angle?e.angle:n.PI,e.to){case"top":o=0;break;case"left":o=-n.PI/2;break;case"bottom":o=n.PI;break;case"right":o=n.PI/2;break;case"top left":case"left top":o=-n.atan2(y,_);break;case"top right":case"right top":o=n.atan2(y,_);break;case"bottom left":case"left bottom":o=n.PI+n.atan2(y,_);break;case"bottom right":case"right bottom":o=n.PI-n.atan2(y,_)}e.reverse&&(o-=n.PI),o%=2*n.PI,0>o&&(o+=2*n.PI),a=n.abs(_*n.sin(o))+n.abs(y*n.cos(o)),s=n.atan(_*n.tan(o)/y),l=n.sin(s),c=n.cos(s),d=n.abs(l)+n.abs(c),u=d/2*l,h=d/2*c,o>n.PI/2&&3*n.PI/2>=o&&(u=-u,h=-h),p=[],f=0,g=e.stops.map(function(n,i){var r,o=n.percent;return o?o=t(o)/100:n.length?o=t(n.length)/a:0===i?o=0:i==e.stops.length-1&&(o=1),r={color:n.color.toCssRgba(),offset:o},null!=o?(f=o,p.forEach(function(e,t){var n=e.stop;n.offset=e.left+(f-e.left)*(t+1)/(p.length+1)}),p=[]):p.push({left:f,stop:r}),r}),m=[.5-u,.5+h],v=[.5+u,.5-h],i.append(N.Path.fromRect(r).stroke(null).fill(new N.LinearGradient({start:m,end:v,stops:g,userSpace:!1})));break;case"radial":window.console&&window.console.log&&window.console.log("Radial gradients are not yet supported in HTML renderer")}}}function M(t,n){var i,r,o,a;return t.getAttribute(kendo.attr("role"))&&(i=kendo.widgetInstance(e(t)),i&&(i.exportDOMVisual||i.exportVisual))?(r=i.exportDOMVisual?i.exportDOMVisual():i.exportVisual(),o=new N.Group,o.children.push(r),a=t.getBoundingClientRect(),o.transform(V.transform().translate(a.left,a.top)),n.append(o),!0):void 0}function P(e,t,n){var i=v(e),r=new V.Rect([i.left,i.top],[i.width,i.height]),o=new N.Image(t,r);x(o,T(e,i,"content")),n.append(o)}function I(e,n){var i=u(e),r=u(n),o=t(h(i,"z-index")),a=t(h(r,"z-index")),s=h(i,"position"),l=h(r,"position");return isNaN(o)&&isNaN(a)?/static|absolute/.test(s)&&/static|absolute/.test(l)?0:"static"==s?-1:"static"==l?1:0:isNaN(o)?0===a?0:a>0?-1:1:isNaN(a)?0===o?0:o>0?1:-1:t(o)-t(a)}function z(e,t){var n,i,r,o,a,s,l,c,d;switch(e.tagName.toLowerCase()){case"img":P(e,e.src,t);break;case"canvas":try{P(e,e.toDataURL("image/jpeg"),t)}catch(p){}break;case"textarea":case"input":break;default:for(n=[],i=[],r=[],o=[],a=e.firstChild;a;a=a.nextSibling)switch(a.nodeType){case 3:/\S/.test(a.data)&&F(e,a,t);break;case 1:s=u(a),l=h(s,"display"),c=h(s,"float"),d=h(s,"position"),"static"!=d?o.push(a):"inline"!=l?"none"!=c?i.push(a):n.push(a):r.push(a)}n.sort(I).forEach(function(e){B(e,t)}),i.sort(I).forEach(function(e){B(e,t)}),r.sort(I).forEach(function(e){B(e,t)}),o.sort(I).forEach(function(e){B(e,t)})}}function F(e,n,i){function r(){for(var e,t,i;!/\S/.test(s.charAt(p));){if(p>=f)return!0;p++}for(l.setStart(n,p),e=0;++p<=f;)if(++e,l.setEnd(n,p),e>1&&(d&&/\s/.test(s.charAt(p-1))||l.getClientRects().length>1)){l.setEnd(n,--p);break}t=l.getClientRects()[0],i=(""+l).replace(/\s+$/,""),o(i,t)}function o(e,t){var n,r,o;e=e.replace(/[\r\n ]+/g," "),W.msie&&!isNaN(m)&&(n=N.util.measureText(e,{font:v}),r=(t.top+t.bottom-n.height)/2,t={top:r,right:t.right,bottom:r+n.height,left:t.left,height:n.height,width:t.right-t.left}),o=new N.Text(e,new V.Point(t.left,t.top),{font:v,fill:{color:_}}),i.append(o),a(t)}function a(e){function t(t,n){var r,o;t&&(r=g/12,o=new N.Path({stroke:{width:r,color:t}}),n-=r,o.moveTo(e.left,n).lineTo(e.right,n),i.append(o))}t(O.underline,e.bottom),t(O["line-through"],e.bottom-e.height/2.7),t(O.overline,e.top)}var s,l,c,d,p,f,g,m,v,_,y=u(e);if(!(t(h(y,"text-indent"))<-500)&&(s=n.data,l=e.ownerDocument.createRange(),c=h(y,"text-align"),d="justify"==c,p=0,f=/\S\s*$/.exec(n.data).index+1,g=h(y,"font-size"),m=h(y,"line-height"),v=[h(y,"font-style"),h(y,"font-variant"),h(y,"font-weight"),g,h(y,"font-family")].join(" "),g=t(g),m=t(m),0!==g))for(_=h(y,"color");!r(););}function R(e,t){var n,i,r=O._stackingContext.group,o=r.children;for(n=0;o.length>n&&!(null!=o[n]._dom_zIndex&&o[n]._dom_zIndex>t);++n);return i=new N.Group,r.insertAt(i,n),i._dom_zIndex=t,O._clipbox&&i.clip(N.Path.fromRect(O._clipbox)),i}function B(n,i){var r,o,a,c,d,f,m;/^(style|script|link|meta|iframe|svg)$/i.test(n.tagName)||null!=O._clipbox&&(r=u(n),o=t(h(r,"opacity")),a=h(r,"visibility"),c=h(r,"display"),0!==o&&"hidden"!=a&&"none"!=c&&(d=y(r),m=h(r,"z-index"),(d||1>o)&&"auto"==m&&(m=0),"auto"!=m?f=R(i,m):(f=new N.Group,i.append(f)),f.DEBUG=e(n).data("debug"),1>o&&f.opacity(o*f.opacity()),s(n,r,f),d?g(n,function(){var e,t,i,o;p(n.style,"transform","none","important"),p(n.style,"transition","none","important"),"static"==h(r,"position")&&p(n.style,"position","relative","important"),e=n.getBoundingClientRect(),t=e.left+d.origin[0],i=e.top+d.origin[1],o=[1,0,0,1,-t,-i],o=L(o,d.matrix),o=L(o,[1,0,0,1,t,i]),o=k(f,o),O._matrix=O._matrix.multiplyCopy(o),A(n,f)}):A(n,f),l()))}function L(e,t){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=t[0],c=t[1],d=t[2],u=t[3],h=t[4],p=t[5];return[n*l+i*d,n*c+i*u,r*l+o*d,r*c+o*u,a*l+s*d+h,a*c+s*u+p]}var O,H,N=kendo.drawing,V=kendo.geometry,U=Array.prototype.slice,W=kendo.support.browser,j={};N.drawDOM=function(t){var n=e.Deferred();return t=e(t)[0],t?o(t,function(){var e=new N.Group,i=t.getBoundingClientRect();k(e,[1,0,0,1,-i.left,-i.top]),O._clipbox=!1,O._matrix=V.Matrix.unit(),O._stackingContext={element:t,group:e},B(t,e),n.resolve(e)}):n.reject("No element to export"),n.promise()},O={},H=function(){var e=/^((-webkit-|-moz-|-o-|-ms-)?linear-gradient\s*)\(/,t=/^([-0-9.]+%)/,n=/^([-0-9.]+px)/,i=/^(left|right|top|bottom|to|center)\W/,r=/^([-0-9.]+(deg|grad|rad|turn))/,o=/^(\s+)/,a=/^(\()/,s=/^(\))/,l=/^(,)/;return function(c){function d(){var e=o.exec(c);e&&(c=c.substr(e[1].length))}function u(e){d();var t=e.exec(c);return t?(c=c.substr(t[1].length),t[1]):void 0}function h(){var e,i,r=kendo.parseColor(c,!0);return r?(c=c.substr(r.match[0].length),r=r.toRGB(),(e=u(n))||(i=u(t)),{color:r,length:e,percent:i}):void 0}function p(e){var n,o,d,p,g,m,v=[],_=!1;if(u(a)){for(n=u(r),n?(n=b(n),u(l)):(o=u(i),"to"==o?o=u(i):o&&/^-/.test(e)&&(_=!0),d=u(i),u(l)),/-moz-/.test(e)&&null==n&&null==o&&(p=u(t),g=u(t),_=!0,"0%"==p?o="left":"100%"==p&&(o="right"),"0%"==g?d="top":"100%"==g&&(d="bottom"),u(l));c&&!u(s)&&(m=h());)v.push(m),u(l);return{type:"linear",angle:n,to:o&&d?o+" "+d:o?o:d?d:null,stops:v,reverse:_,orig:f}}}var f=c,g=u(e);return g?p(g):void 0}}()}(window.kendo.jQuery,parseFloat,Math),function(e){var t=e.noop,n=window.kendo,i=n.Class,r=n.util,o=n.animationFrame,a=n.deepExtend,s=i.extend({init:function(e,t){var n=this;n.options=a({},n.options,t),n.element=e},options:{duration:500,easing:"swing"},setup:t,step:t,play:function(){var t=this,n=t.options,i=e.easing[n.easing],a=n.duration,s=n.delay||0,l=r.now()+s,c=l+a;0===a?(t.step(1),t.abort()):setTimeout(function(){var e=function(){var n,s,d,u;t._stopped||(n=r.now(),s=r.limitValue(n-l,0,a),d=s/a,u=i(d,s,0,1,a),t.step(u),c>n?o(e):t.abort())};e()},s)},abort:function(){this._stopped=!0},destroy:function(){this.abort()}}),l=function(){this._items=[]};l.prototype={register:function(e,t){this._items.push({name:e,type:t})},create:function(e,t){var n,i,r,o=this._items;if(t&&t.type)for(i=t.type.toLowerCase(),r=0;o.length>r;r++)if(o[r].name.toLowerCase()===i){n=o[r];break}return n?new n.type(e,t):void 0}},l.current=new l,s.create=function(e,t,n){return l.current.create(e,t,n)},a(n.drawing,{Animation:s,AnimationFactory:l})}(window.kendo.jQuery,Math),function(e){function t(t){var n,i=s.ui.validator.ruleResolvers||{},r={};for(n in i)e.extend(!0,r,i[n].resolve(t));return r}function n(e){return e.replace(/&amp/g,"&amp;").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")}function i(e){return e=(e+"").split("."),e.length>1?e[1].length:0}function r(t){return e(e.parseHTML?e.parseHTML(t):t)}function o(t,n){var i,r,o,a,l=e();for(o=0,a=t.length;a>o;o++)i=t[o],u.test(i.className)&&(r=i.getAttribute(s.attr("for")),r===n&&(l=l.add(i)));return l}var a,s=window.kendo,l=s.ui.Widget,c=".kendoValidator",d="k-invalid-msg",u=RegExp(d,"i"),h="k-invalid",p=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,f=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,g=":input:not(:button,[type=submit],[type=reset],[disabled],[readonly])",m=":checkbox:not([disabled],[readonly])",v="[type=number],[type=range]",_="blur",y="name",w="form",b="novalidate",k=e.proxy,x=function(e,t){return"string"==typeof t&&(t=RegExp("^(?:"+t+")$")),t.test(e)},C=function(e,t,n){var i=e.val();return e.filter(t).length&&""!==i?x(i,n):!0},S=function(e,t){return e.length?null!=e[0].attributes[t]:!1};s.ui.validator||(s.ui.validator={rules:{},messages:{}}),a=l.extend({init:function(n,i){var r=this,o=t(n),a="["+s.attr("validate")+"!=false]";i=i||{},i.rules=e.extend({},s.ui.validator.rules,o.rules,i.rules),i.messages=e.extend({},s.ui.validator.messages,o.messages,i.messages),l.fn.init.call(r,n,i),r._errorTemplate=s.template(r.options.errorTemplate),r.element.is(w)&&r.element.attr(b,b),r._inputSelector=g+a,r._checkboxSelector=m+a,r._errors={},r._attachEvents(),r._isValidated=!1},events:["validate","change"],options:{name:"Validator",errorTemplate:'<span class="k-widget k-tooltip k-tooltip-validation"><span class="k-icon k-warning"> </span> #=message#</span>',messages:{required:"{0} is required",pattern:"{0} is not valid",min:"{0} should be greater than or equal to {1}",max:"{0} should be smaller than or equal to {1}",step:"{0} is not valid",email:"{0} is not valid email",url:"{0} is not valid URL",date:"{0} is not valid date"},rules:{required:function(e){var t=e.filter("[type=checkbox]").length&&!e.is(":checked"),n=e.val();return!(S(e,"required")&&(""===n||!n||t))},pattern:function(e){return e.filter("[type=text],[type=email],[type=url],[type=tel],[type=search],[type=password]").filter("[pattern]").length&&""!==e.val()?x(e.val(),e.attr("pattern")):!0},min:function(e){if(e.filter(v+",["+s.attr("type")+"=number]").filter("[min]").length&&""!==e.val()){var t=parseFloat(e.attr("min"))||0,n=s.parseFloat(e.val());return n>=t}return!0},max:function(e){if(e.filter(v+",["+s.attr("type")+"=number]").filter("[max]").length&&""!==e.val()){var t=parseFloat(e.attr("max"))||0,n=s.parseFloat(e.val());return t>=n}return!0},step:function(e){if(e.filter(v+",["+s.attr("type")+"=number]").filter("[step]").length&&""!==e.val()){var t,n=parseFloat(e.attr("min"))||0,r=parseFloat(e.attr("step"))||1,o=parseFloat(e.val()),a=i(r);return a?(t=Math.pow(10,a),(o-n)*t%(r*t)/Math.pow(100,a)===0):(o-n)%r===0}return!0},email:function(e){return C(e,"[type=email],["+s.attr("type")+"=email]",p)},url:function(e){return C(e,"[type=url],["+s.attr("type")+"=url]",f)},date:function(e){return e.filter("[type^=date],["+s.attr("type")+"=date]").length&&""!==e.val()?null!==s.parseDate(e.val(),e.attr(s.attr("format"))):!0}},validateOnBlur:!0},destroy:function(){l.fn.destroy.call(this),this.element.off(c)},value:function(){return this._isValidated?0===this.errors().length:!1},_submit:function(e){return this.validate()?!0:(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1)},_checkElement:function(e){var t=this.value();this.validateInput(e),this.value()!==t&&this.trigger("change")},_attachEvents:function(){var t=this;t.element.is(w)&&t.element.on("submit"+c,k(t._submit,t)),t.options.validateOnBlur&&(t.element.is(g)?(t.element.on(_+c,function(){t._checkElement(t.element)}),t.element.is(m)&&t.element.on("click"+c,function(){t._checkElement(t.element)})):(t.element.on(_+c,t._inputSelector,function(){t._checkElement(e(this))}),t.element.on("click"+c,t._checkboxSelector,function(){t._checkElement(e(this))})))},validate:function(){var e,t,n,i,r=!1,o=this.value();if(this._errors={},this.element.is(g))r=this.validateInput(this.element);else{for(i=!1,e=this.element.find(this._inputSelector),t=0,n=e.length;n>t;t++)this.validateInput(e.eq(t))||(i=!0);r=!i}return this.trigger("validate",{valid:r}),o!==r&&this.trigger("change"),r},validateInput:function(t){var i,o,a,l,c,u,p,f,g;return t=e(t),this._isValidated=!0,i=this,o=i._errorTemplate,a=i._checkValidity(t),l=a.valid,c="."+d,u=t.attr(y)||"",p=i._findMessageContainer(u).add(t.next(c).filter(function(){var t=e(this);return t.filter("["+s.attr("for")+"]").length?t.attr(s.attr("for"))===u:!0})).hide(),t.removeAttr("aria-invalid"),l?delete i._errors[u]:(f=i._extractMessage(t,a.key),i._errors[u]=f,g=r(o({message:n(f)})),i._decorateMessageContainer(g,u),p.replaceWith(g).length||g.insertAfter(t),g.show(),t.attr("aria-invalid",!0)),t.toggleClass(h,!l),l},hideMessages:function(){var e=this,t="."+d,n=e.element;n.is(g)?n.next(t).hide():n.find(t).hide()},_findMessageContainer:function(t){var n,i,r,a=s.ui.validator.messageLocators,l=e();for(i=0,r=this.element.length;r>i;i++)l=l.add(o(this.element[i].getElementsByTagName("*"),t));for(n in a)l=l.add(a[n].locate(this.element,t));return l},_decorateMessageContainer:function(e,t){var n,i=s.ui.validator.messageLocators;e.addClass(d).attr(s.attr("for"),t||"");for(n in i)i[n].decorate(e,t);e.attr("role","alert")
},_extractMessage:function(e,t){var n=this,i=n.options.messages[t],r=e.attr(y);return i=s.isFunction(i)?i(e):i,s.format(e.attr(s.attr(t+"-msg"))||e.attr("validationMessage")||e.attr("title")||i||"",r,e.attr(t))},_checkValidity:function(e){var t,n=this.options.rules;for(t in n)if(!n[t].call(this,e))return{valid:!1,key:t};return{valid:!0}},errors:function(){var e,t=[],n=this._errors;for(e in n)t.push(n[e]);return t}}),s.ui.plugin(a)}(window.kendo.jQuery),function(e){function t(e,t){var n=e.x.location,i=e.y.location,r=t.x.location,o=t.y.location,a=n-r,s=i-o;return{center:{x:(n+r)/2,y:(i+o)/2},distance:Math.sqrt(a*a+s*s)}}function n(e){var t,n,i,r=[],a=e.originalEvent,s=e.currentTarget,l=0;if(e.api)r.push({id:2,event:e,target:e.target,currentTarget:e.target,location:e,type:"api"});else if(e.type.match(/touch/))for(n=a?a.changedTouches:[],t=n.length;t>l;l++)i=n[l],r.push({location:i,event:e,target:i.target,currentTarget:s,id:i.identifier,type:"touch"});else r.push(o.pointers||o.msPointers?{location:a,event:e,target:e.target,currentTarget:s,id:a.pointerId,type:"pointer"}:{id:1,event:e,target:e.target,currentTarget:s,location:e,type:"mouse"});return r}function i(e){for(var t=r.eventMap.up.split(" "),n=0,i=t.length;i>n;n++)e(t[n])}var r=window.kendo,o=r.support,a=window.document,s=r.Class,l=r.Observable,c=e.now,d=e.extend,u=o.mobileOS,h=u&&u.android,p=800,f=o.browser.msie?5:0,g="press",m="hold",v="select",_="start",y="move",w="end",b="cancel",k="tap",x="release",C="gesturestart",S="gesturechange",T="gestureend",D="gesturetap",A={api:0,touch:0,mouse:9,pointer:9},E=s.extend({init:function(e,t){var n=this;n.axis=e,n._updateLocationData(t),n.startLocation=n.location,n.velocity=n.delta=0,n.timeStamp=c()},move:function(e){var t=this,n=e["page"+t.axis],i=c(),r=i-t.timeStamp||1;(n||!h)&&(t.delta=n-t.location,t._updateLocationData(e),t.initialDelta=n-t.startLocation,t.velocity=t.delta/r,t.timeStamp=i)},_updateLocationData:function(e){var t=this,n=t.axis;t.location=e["page"+n],t.client=e["client"+n],t.screen=e["screen"+n]}}),M=s.extend({init:function(e,t,n){d(this,{x:new E("X",n.location),y:new E("Y",n.location),type:n.type,threshold:e.threshold||A[n.type],userEvents:e,target:t,currentTarget:n.currentTarget,initialTouch:n.target,id:n.id,pressEvent:n,_moved:!1,_finished:!1})},press:function(){this._holdTimeout=setTimeout(e.proxy(this,"_hold"),this.userEvents.minHold),this._trigger(g,this.pressEvent)},_hold:function(){this._trigger(m,this.pressEvent)},move:function(e){var t=this;if(!t._finished){if(t.x.move(e.location),t.y.move(e.location),!t._moved){if(t._withinIgnoreThreshold())return;if(P.current&&P.current!==t.userEvents)return t.dispose();t._start(e)}t._finished||t._trigger(y,e)}},end:function(e){var t=this;t.endTime=c(),t._finished||(t._finished=!0,t._trigger(x,e),t._moved?t._trigger(w,e):t._trigger(k,e),clearTimeout(t._holdTimeout),t.dispose())},dispose:function(){var t=this.userEvents,n=t.touches;this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout),n.splice(e.inArray(this,n),1)},skip:function(){this.dispose()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(e){clearTimeout(this._holdTimeout),this.startTime=c(),this._moved=!0,this._trigger(_,e)},_trigger:function(e,t){var n=this,i=t.event,r={touch:n,x:n.x,y:n.y,target:n.target,event:i};n.userEvents.notify(e,r)&&i.preventDefault()},_withinIgnoreThreshold:function(){var e=this.x.initialDelta,t=this.y.initialDelta;return Math.sqrt(e*e+t*t)<=this.threshold}}),P=l.extend({init:function(t,n){var s,c,u,h=this,A=r.guid();n=n||{},s=h.filter=n.filter,h.threshold=n.threshold||f,h.minHold=n.minHold||p,h.touches=[],h._maxTouches=n.multiTouch?2:1,h.allowSelection=n.allowSelection,h.captureUpIfMoved=n.captureUpIfMoved,h.eventNS=A,t=e(t).handler(h),l.fn.init.call(h),d(h,{element:t,surface:e(n.global&&!o.touch?a.documentElement:n.surface||t),stopPropagation:n.stopPropagation,pressed:!1}),h.surface.handler(h).on(r.applyEventMap("move",A),"_move").on(r.applyEventMap("up cancel",A),"_end"),t.on(r.applyEventMap("down",A),s,"_start"),(o.pointers||o.msPointers)&&t.css("-ms-touch-action","pinch-zoom double-tap-zoom"),n.preventDragEvent&&t.on(r.applyEventMap("dragstart",A),r.preventDefault),t.on(r.applyEventMap("mousedown",A),s,{root:t},"_select"),h.captureUpIfMoved&&o.eventCapture&&(c=h.surface[0],u=e.proxy(h.preventIfMoving,h),i(function(e){c.addEventListener(e,u,!0)})),h.bind([g,m,k,_,y,w,x,b,C,S,T,D,v],n)},preventIfMoving:function(e){this._isMoved()&&e.preventDefault()},destroy:function(){var e,t=this;t._destroyed||(t._destroyed=!0,t.captureUpIfMoved&&o.eventCapture&&(e=t.surface[0],i(function(n){e.removeEventListener(n,t.preventIfMoving)})),t.element.kendoDestroy(t.eventNS),t.surface.kendoDestroy(t.eventNS),t.element.removeData("handler"),t.surface.removeData("handler"),t._disposeAll(),t.unbind(),delete t.surface,delete t.element,delete t.currentTarget)},capture:function(){P.current=this},cancel:function(){this._disposeAll(),this.trigger(b)},notify:function(e,n){var i=this,r=i.touches;if(this._isMultiTouch()){switch(e){case y:e=S;break;case w:e=T;break;case k:e=D}d(n,{touches:r},t(r[0],r[1]))}return this.trigger(e,d(n,{type:e}))},press:function(e,t,n){this._apiCall("_start",e,t,n)},move:function(e,t){this._apiCall("_move",e,t)},end:function(e,t){this._apiCall("_end",e,t)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){for(var e=this.touches;e.length>0;)e.pop().dispose()},_isMoved:function(){return e.grep(this.touches,function(e){return e.isMoved()}).length},_select:function(e){(!this.allowSelection||this.trigger(v,{event:e}))&&e.preventDefault()},_start:function(t){var i,r,o=this,a=0,s=o.filter,l=n(t),c=l.length,d=t.which;if(!(d&&d>1||o._maxTouchesReached()))for(P.current=null,o.currentTarget=t.currentTarget,o.stopPropagation&&t.stopPropagation();c>a&&!o._maxTouchesReached();a++)r=l[a],i=s?e(r.currentTarget):o.element,i.length&&(r=new M(o,i,r),o.touches.push(r),r.press(),o._isMultiTouch()&&o.notify("gesturestart",{}))},_move:function(e){this._eachTouch("move",e)},_end:function(e){this._eachTouch("end",e)},_eachTouch:function(e,t){var i,r,o,a,s=this,l={},c=n(t),d=s.touches;for(i=0;d.length>i;i++)r=d[i],l[r.id]=r;for(i=0;c.length>i;i++)o=c[i],a=l[o.id],a&&a[e](o)},_apiCall:function(t,n,i,r){this[t]({api:!0,pageX:n,pageY:i,clientX:n,clientY:i,target:e(r||this.element)[0],stopPropagation:e.noop,preventDefault:e.noop})}});P.defaultThreshold=function(e){f=e},P.minHold=function(e){p=e},r.getTouches=n,r.touchDelta=t,r.UserEvents=P}(window.kendo.jQuery),function(e,t){function n(t,n){try{return e.contains(t,n)||t==n}catch(i){return!1}}function i(e,t){return parseInt(e.css(t),10)||0}function r(e,t){return Math.min(Math.max(e,t.min),t.max)}function o(e,t){var n=k(e),r=n.left+i(e,"borderLeftWidth")+i(e,"paddingLeft"),o=n.top+i(e,"borderTopWidth")+i(e,"paddingTop"),a=r+e.width()-t.outerWidth(!0),s=o+e.height()-t.outerHeight(!0);return{x:{min:r,max:a},y:{min:o,max:s}}}function a(e,n,i){for(var r,o,a=0,s=n&&n.length,l=i&&i.length;e&&e.parentNode;){for(a=0;s>a;a++)if(r=n[a],r.element[0]===e)return{target:r,targetElement:e};for(a=0;l>a;a++)if(o=i[a],f.matchesSelector.call(e,o.options.filter))return{target:o,targetElement:e};e=e.parentNode}return t}var s,l,c,d,u,h,p=window.kendo,f=p.support,g=window.document,m=p.Class,v=p.ui.Widget,_=p.Observable,y=p.UserEvents,w=e.proxy,b=e.extend,k=p.getOffset,x={},C={},S={},T=p.elementUnderCursor,D="keyup",A="change",E="dragstart",M="hold",P="drag",I="dragend",z="dragcancel",F="dragenter",R="dragleave",B="drop",L=_.extend({init:function(t,n){var i=this,r=t[0];i.capture=!1,r.addEventListener?(e.each(p.eventMap.down.split(" "),function(){r.addEventListener(this,w(i._press,i),!0)}),e.each(p.eventMap.up.split(" "),function(){r.addEventListener(this,w(i._release,i),!0)})):(e.each(p.eventMap.down.split(" "),function(){r.attachEvent(this,w(i._press,i))}),e.each(p.eventMap.up.split(" "),function(){r.attachEvent(this,w(i._release,i))})),_.fn.init.call(i),i.bind(["press","release"],n||{})},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1},_press:function(e){var t=this;t.trigger("press"),t.capture&&e.preventDefault()},_release:function(e){var t=this;t.trigger("release"),t.capture&&(e.preventDefault(),t.cancelCapture())}}),O=_.extend({init:function(t){var n=this;_.fn.init.call(n),n.forcedEnabled=!1,e.extend(n,t),n.scale=1,n.horizontal?(n.measure="offsetWidth",n.scrollSize="scrollWidth",n.axis="x"):(n.measure="offsetHeight",n.scrollSize="scrollHeight",n.axis="y")},makeVirtual:function(){e.extend(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},virtualSize:function(e,t){(this._virtualMin!==e||this._virtualMax!==t)&&(this._virtualMin=e,this._virtualMax=t,this.update())},outOfBounds:function(e){return e>this.max||this.min>e},forceEnabled:function(){this.forcedEnabled=!0},getSize:function(){return this.container[0][this.measure]},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(e){this.scale=e},update:function(e){var t=this,n=t.virtual?t._virtualMax:t.getTotal(),i=n*t.scale,r=t.getSize();0!==n&&(t.max=t.virtual?-t._virtualMin:0,t.size=r,t.total=i,t.min=Math.min(t.max,r-i),t.minScale=r/n,t.centerOffset=(i-r)/2,t.enabled=t.forcedEnabled||i>r,e||t.trigger(A,t))}}),H=_.extend({init:function(e){var t=this;_.fn.init.call(t),t.x=new O(b({horizontal:!0},e)),t.y=new O(b({horizontal:!1},e)),t.container=e.container,t.forcedMinScale=e.minScale,t.maxScale=e.maxScale||100,t.bind(A,e)},rescale:function(e){this.x.rescale(e),this.y.rescale(e),this.refresh()},centerCoordinates:function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},refresh:function(){var e=this;e.x.update(),e.y.update(),e.enabled=e.x.enabled||e.y.enabled,e.minScale=e.forcedMinScale||Math.min(e.x.minScale,e.y.minScale),e.fitScale=Math.max(e.x.minScale,e.y.minScale),e.trigger(A)}}),N=_.extend({init:function(e){var t=this;b(t,e),_.fn.init.call(t)},outOfBounds:function(){return this.dimension.outOfBounds(this.movable[this.axis])},dragMove:function(e){var t=this,n=t.dimension,i=t.axis,r=t.movable,o=r[i]+e;n.enabled&&((n.min>o&&0>e||o>n.max&&e>0)&&(e*=t.resistance),r.translateAxis(i,e),t.trigger(A,t))}}),V=m.extend({init:function(e){var t,n,i,r,o=this;b(o,{elastic:!0},e),i=o.elastic?.5:0,r=o.movable,o.x=t=new N({axis:"x",dimension:o.dimensions.x,resistance:i,movable:r}),o.y=n=new N({axis:"y",dimension:o.dimensions.y,resistance:i,movable:r}),o.userEvents.bind(["move","end","gesturestart","gesturechange"],{gesturestart:function(e){o.gesture=e,o.offset=o.dimensions.container.offset()},gesturechange:function(e){var i,a,s,l=o.gesture,c=l.center,d=e.center,u=e.distance/l.distance,h=o.dimensions.minScale,p=o.dimensions.maxScale;h>=r.scale&&1>u&&(u+=.8*(1-u)),r.scale*u>=p&&(u=p/r.scale),a=r.x+o.offset.left,s=r.y+o.offset.top,i={x:(a-c.x)*u+d.x-a,y:(s-c.y)*u+d.y-s},r.scaleWith(u),t.dragMove(i.x),n.dragMove(i.y),o.dimensions.rescale(r.scale),o.gesture=e,e.preventDefault()},move:function(e){e.event.target.tagName.match(/textarea|input/i)||(t.dimension.enabled||n.dimension.enabled?(t.dragMove(e.x.delta),n.dragMove(e.y.delta),e.preventDefault()):e.touch.skip())},end:function(e){e.preventDefault()}})}}),U=f.transitions.prefix+"Transform";l=f.hasHW3D?function(e,t,n){return"translate3d("+e+"px,"+t+"px,0) scale("+n+")"}:function(e,t,n){return"translate("+e+"px,"+t+"px) scale("+n+")"},c=_.extend({init:function(t){var n=this;_.fn.init.call(n),n.element=e(t),n.element[0].style.webkitTransformOrigin="left top",n.x=0,n.y=0,n.scale=1,n._saveCoordinates(l(n.x,n.y,n.scale))},translateAxis:function(e,t){this[e]+=t,this.refresh()},scaleTo:function(e){this.scale=e,this.refresh()},scaleWith:function(e){this.scale*=e,this.refresh()},translate:function(e){this.x+=e.x,this.y+=e.y,this.refresh()},moveAxis:function(e,t){this[e]=t,this.refresh()},moveTo:function(e){b(this,e),this.refresh()},refresh:function(){var e,t=this,n=t.x,i=t.y;t.round&&(n=Math.round(n),i=Math.round(i)),e=l(n,i,t.scale),e!=t.coordinates&&(p.support.browser.msie&&10>p.support.browser.version?(t.element[0].style.position="absolute",t.element[0].style.left=t.x+"px",t.element[0].style.top=t.y+"px"):t.element[0].style[U]=e,t._saveCoordinates(e),t.trigger(A))},_saveCoordinates:function(e){this.coordinates=e}}),d=v.extend({init:function(e,t){var n,i=this;v.fn.init.call(i,e,t),n=i.options.group,n in C?C[n].push(i):C[n]=[i]},events:[F,R,B],options:{name:"DropTarget",group:"default"},destroy:function(){var e,t=this.options.group,n=C[t]||S[t];if(n.length>1){for(v.fn.destroy.call(this),e=0;n.length>e;e++)if(n[e]==this){n.splice(e,1);break}}else d.destroyGroup(t)},_trigger:function(e,n){var i=this,r=x[i.options.group];return r?i.trigger(e,b({},n.event,{draggable:r,dropTarget:n.dropTarget})):t},_over:function(e){this._trigger(F,e)},_out:function(e){this._trigger(R,e)},_drop:function(e){var t=this,n=x[t.options.group];n&&(n.dropped=!t._trigger(B,e))}}),d.destroyGroup=function(e){var t,n=C[e]||S[e];if(n){for(t=0;n.length>t;t++)v.fn.destroy.call(n[t]);n.length=0,delete C[e],delete S[e]}},d._cache=C,u=d.extend({init:function(e,t){var n,i=this;v.fn.init.call(i,e,t),n=i.options.group,n in S?S[n].push(i):S[n]=[i]},options:{name:"DropTargetArea",group:"default",filter:null}}),h=v.extend({init:function(e,t){var n=this;v.fn.init.call(n,e,t),n._activated=!1,n.userEvents=new y(n.element,{global:!0,allowSelection:!0,filter:n.options.filter,threshold:n.options.distance,start:w(n._start,n),hold:w(n._hold,n),move:w(n._drag,n),end:w(n._end,n),cancel:w(n._cancel,n),select:w(n._select,n)}),n._afterEndHandler=w(n._afterEnd,n),n._captureEscape=w(n._captureEscape,n)},events:[M,E,P,I,z],options:{name:"Draggable",distance:p.support.touch?0:5,group:"default",cursorOffset:null,axis:null,container:null,filter:null,ignore:null,holdToDrag:!1,dropped:!1},cancelHold:function(){this._activated=!1},_captureEscape:function(e){var t=this;e.keyCode===p.keys.ESC&&(t._trigger(z,{event:e}),t.userEvents.cancel())},_updateHint:function(t){var n,i=this,o=i.options,a=i.boundaries,s=o.axis,l=i.options.cursorOffset;l?n={left:t.x.location+l.left,top:t.y.location+l.top}:(i.hintOffset.left+=t.x.delta,i.hintOffset.top+=t.y.delta,n=e.extend({},i.hintOffset)),a&&(n.top=r(n.top,a.y),n.left=r(n.left,a.x)),"x"===s?delete n.top:"y"===s&&delete n.left,i.hint.css(n)},_shouldIgnoreTarget:function(t){var n=this.options.ignore;return n&&e(t).is(n)},_select:function(e){this._shouldIgnoreTarget(e.event.target)||e.preventDefault()},_start:function(n){var i,r=this,a=r.options,s=a.container,l=a.hint;return this._shouldIgnoreTarget(n.touch.initialTouch)||a.holdToDrag&&!r._activated?(r.userEvents.cancel(),t):(r.currentTarget=n.target,r.currentTargetOffset=k(r.currentTarget),l&&(r.hint&&r.hint.stop(!0,!0).remove(),r.hint=p.isFunction(l)?e(l.call(r,r.currentTarget)):l,i=k(r.currentTarget),r.hintOffset=i,r.hint.css({position:"absolute",zIndex:2e4,left:i.left,top:i.top}).appendTo(g.body),r.angular("compile",function(){return r.hint.removeAttr("ng-repeat"),{elements:r.hint.get(),scopeFrom:n.target}})),x[a.group]=r,r.dropped=!1,s&&(r.boundaries=o(s,r.hint)),r._trigger(E,n)&&(r.userEvents.cancel(),r._afterEnd()),r.userEvents.capture(),e(g).on(D,r._captureEscape),t)},_hold:function(e){this.currentTarget=e.target,this._trigger(M,e)?this.userEvents.cancel():this._activated=!0},_drag:function(n){var i=this;n.preventDefault(),i._withDropTarget(n,function(i,r){if(!i)return s&&(s._trigger(R,b(n,{dropTarget:e(s.targetElement)})),s=null),t;if(s){if(r===s.targetElement)return;s._trigger(R,b(n,{dropTarget:e(s.targetElement)}))}i._trigger(F,b(n,{dropTarget:e(r)})),s=b(i,{targetElement:r})}),i._trigger(P,b(n,{dropTarget:s})),i.hint&&i._updateHint(n)},_end:function(t){var n=this;n._withDropTarget(t,function(n,i){n&&(n._drop(b({},t,{dropTarget:e(i)})),s=null)}),n._trigger(I,t),n._cancel(t.event)},_cancel:function(){var e=this;e._activated=!1,e.hint&&!e.dropped?setTimeout(function(){e.hint.stop(!0,!0).animate(e.currentTargetOffset,"fast",e._afterEndHandler)},0):e._afterEnd()},_trigger:function(e,t){var n=this;return n.trigger(e,b({},t.event,{x:t.x,y:t.y,currentTarget:n.currentTarget,dropTarget:t.dropTarget}))},_withDropTarget:function(e,t){var i,r,o=this,s=o.options,l=C[s.group],c=S[s.group];(l&&l.length||c&&c.length)&&(i=T(e),o.hint&&n(o.hint[0],i)&&(o.hint.hide(),i=T(e),i||(i=T(e)),o.hint.show()),r=a(i,l,c),r?t(r.target,r.targetElement):t())},destroy:function(){var e=this;v.fn.destroy.call(e),e._afterEnd(),e.userEvents.destroy(),e.currentTarget=null},_afterEnd:function(){var t=this;t.hint&&t.hint.remove(),delete x[t.options.group],t.trigger("destroy"),e(g).off(D,t._captureEscape)}}),p.ui.plugin(d),p.ui.plugin(u),p.ui.plugin(h),p.TapCapture=L,p.containerBoundaries=o,b(p.ui,{Pane:V,PaneDimensions:H,Movable:c})}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.mobile,r=n.effects,o=i.ui,a=e.proxy,s=e.extend,l=o.Widget,c=n.Class,d=n.ui.Movable,u=n.ui.Pane,h=n.ui.PaneDimensions,p=r.Transition,f=r.Animation,g=Math.abs,m=500,v=.7,_=.96,y=10,w=55,b=.5,k=5,x="km-scroller-release",C="km-scroller-refresh",S="pull",T="change",D="resize",A="scroll",E=2,M=f.extend({init:function(e){var t=this;f.fn.init.call(t),s(t,e),t.userEvents.bind("gestureend",a(t.start,t)),t.tapCapture.bind("press",a(t.cancel,t))},enabled:function(){return this.dimensions.minScale>this.movable.scale},done:function(){return.01>this.dimensions.minScale-this.movable.scale},tick:function(){var e=this.movable;e.scaleWith(1.1),this.dimensions.rescale(e.scale)},onEnd:function(){var e=this.movable;e.scaleTo(this.dimensions.minScale),this.dimensions.rescale(e.scale)}}),P=f.extend({init:function(e){var t=this;f.fn.init.call(t),s(t,e,{transition:new p({axis:e.axis,movable:e.movable,onEnd:function(){t._end()}})}),t.tapCapture.bind("press",function(){t.cancel()}),t.userEvents.bind("end",a(t.start,t)),t.userEvents.bind("gestureend",a(t.start,t)),t.userEvents.bind("tap",a(t.onEnd,t))},onCancel:function(){this.transition.cancel()},freeze:function(e){var t=this;t.cancel(),t._moveTo(e)},onEnd:function(){var e=this;e.paneAxis.outOfBounds()?e._snapBack():e._end()},done:function(){return g(this.velocity)<1},start:function(e){var t,n=this;n.dimension.enabled&&(n.paneAxis.outOfBounds()?n._snapBack():(t=e.touch.id===E?0:e.touch[n.axis].velocity,n.velocity=Math.max(Math.min(t*n.velocityMultiplier,w),-w),n.tapCapture.captureNext(),f.fn.start.call(n)))},tick:function(){var e=this,t=e.dimension,n=e.paneAxis.outOfBounds()?b:e.friction,i=e.velocity*=n,r=e.movable[e.axis]+i;!e.elastic&&t.outOfBounds(r)&&(r=Math.max(Math.min(r,t.max),t.min),e.velocity=0),e.movable.moveAxis(e.axis,r)},_end:function(){this.tapCapture.cancelCapture(),this.end()},_snapBack:function(){var e=this,t=e.dimension,n=e.movable[e.axis]>t.max?t.max:t.min;e._moveTo(n)},_moveTo:function(e){this.transition.moveTo({location:e,duration:m,ease:p.easeOutExpo})}}),I=f.extend({init:function(e){var t=this;n.effects.Animation.fn.init.call(this),s(t,e,{origin:{},destination:{},offset:{}})},tick:function(){this._updateCoordinates(),this.moveTo(this.origin)},done:function(){return g(this.offset.y)<k&&g(this.offset.x)<k},onEnd:function(){this.moveTo(this.destination),this.callback&&this.callback.call()},setCoordinates:function(e,t){this.offset={},this.origin=e,this.destination=t},setCallback:function(e){e&&n.isFunction(e)?this.callback=e:e=t},_updateCoordinates:function(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}}}),z=c.extend({init:function(t){var n=this,i="x"===t.axis,r=e('<div class="km-touch-scrollbar km-'+(i?"horizontal":"vertical")+'-scrollbar" />');s(n,t,{element:r,elementSize:0,movable:new d(r),scrollMovable:t.movable,alwaysVisible:t.alwaysVisible,size:i?"width":"height"}),n.scrollMovable.bind(T,a(n.refresh,n)),n.container.append(r),t.alwaysVisible&&n.show()},refresh:function(){var e=this,t=e.axis,n=e.dimension,i=n.size,r=e.scrollMovable,o=i/n.total,a=Math.round(-r[t]*o),s=Math.round(i*o);o>=1?this.element.css("display","none"):this.element.css("display",""),a+s>i?s=i-a:0>a&&(s+=a,a=0),e.elementSize!=s&&(e.element.css(e.size,s+"px"),e.elementSize=s),e.movable.moveAxis(t,a)},show:function(){this.element.css({opacity:v,visibility:"visible"})},hide:function(){this.alwaysVisible||this.element.css({opacity:0})}}),F=l.extend({init:function(i,r){var o,c,p,f,m,v,_,y,w,b=this;return l.fn.init.call(b,i,r),i=b.element,(b._native=b.options.useNative&&n.support.hasNativeScrolling)?(i.addClass("km-native-scroller").prepend('<div class="km-scroll-header"/>'),s(b,{scrollElement:i,fixedContainer:i.children().first()}),t):(i.css("overflow","hidden").addClass("km-scroll-wrapper").wrapInner('<div class="km-scroll-container"/>').prepend('<div class="km-scroll-header"/>'),o=i.children().eq(1),c=new n.TapCapture(i),p=new d(o),f=new h({element:o,container:i,forcedEnabled:b.options.zoom}),m=this.options.avoidScrolling,v=new n.UserEvents(i,{allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:b.options.zoom,start:function(t){f.refresh();var n=g(t.x.velocity),i=g(t.y.velocity),r=2*n>=i,o=e.contains(b.fixedContainer[0],t.event.target),a=2*i>=n;!o&&!m(t)&&b.enabled&&(f.x.enabled&&r||f.y.enabled&&a)?v.capture():v.cancel()}}),_=new u({movable:p,dimensions:f,userEvents:v,elastic:b.options.elastic}),y=new M({movable:p,dimensions:f,userEvents:v,tapCapture:c}),w=new I({moveTo:function(e){b.scrollTo(e.x,e.y)}}),p.bind(T,function(){b.scrollTop=-p.y,b.scrollLeft=-p.x,b.trigger(A,{scrollTop:b.scrollTop,scrollLeft:b.scrollLeft})}),b.options.mousewheelScrolling&&i.on("DOMMouseScroll mousewheel",a(this,"_wheelScroll")),s(b,{movable:p,dimensions:f,zoomSnapBack:y,animatedScroller:w,userEvents:v,pane:_,tapCapture:c,pulled:!1,enabled:!0,scrollElement:o,scrollTop:0,scrollLeft:0,fixedContainer:i.children().first()}),b._initAxis("x"),b._initAxis("y"),b._wheelEnd=function(){b._wheel=!1,b.userEvents.end(0,b._wheelY)},f.refresh(),b.options.pullToRefresh&&b._initPullToRefresh(),t)},_wheelScroll:function(e){this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);var t=n.wheelDeltaY(e);t&&(this._wheelY+=t,this.userEvents.move(0,this._wheelY)),e.preventDefault()},makeVirtual:function(){this.dimensions.y.makeVirtual()},virtualSize:function(e,t){this.dimensions.y.virtualSize(e,t)},height:function(){return this.dimensions.y.size},scrollHeight:function(){return this.scrollElement[0].scrollHeight},scrollWidth:function(){return this.scrollElement[0].scrollWidth},options:{name:"Scroller",zoom:!1,pullOffset:140,visibleScrollHints:!1,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling:function(){return!1},pullToRefresh:!1,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}},events:[S,A,D],_resize:function(){this._native||this.contentResized()},setOptions:function(e){var t=this;l.fn.setOptions.call(t,e),e.pullToRefresh&&t._initPullToRefresh()},reset:function(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))},contentResized:function(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)},zoomOut:function(){var e=this.dimensions;e.refresh(),this._scale(e.fitScale),this.movable.moveTo(e.centerCoordinates())},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},scrollTo:function(e,t){this._native?(this.scrollElement.scrollLeft(g(e)),this.scrollElement.scrollTop(g(t))):(this.dimensions.refresh(),this.movable.moveTo({x:e,y:t}))},animatedScrollTo:function(e,t,n){var i,r;this._native?this.scrollTo(e,t):(i={x:this.movable.x,y:this.movable.y},r={x:e,y:t},this.animatedScroller.setCoordinates(i,r),this.animatedScroller.setCallback(n),this.animatedScroller.start())},pullHandled:function(){var e=this;e.refreshHint.removeClass(C),e.hintContainer.html(e.pullTemplate({})),e.yinertia.onEnd(),e.xinertia.onEnd(),e.userEvents.cancel()},destroy:function(){l.fn.destroy.call(this),this.userEvents&&this.userEvents.destroy()},_scale:function(e){this.dimensions.rescale(e),this.movable.scaleTo(e)},_initPullToRefresh:function(){var e=this;e.dimensions.y.forceEnabled(),e.pullTemplate=n.template(e.options.messages.pullTemplate),e.releaseTemplate=n.template(e.options.messages.releaseTemplate),e.refreshTemplate=n.template(e.options.messages.refreshTemplate),e.scrollElement.prepend('<span class="km-scroller-pull"><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span><span class="km-template">'+e.pullTemplate({})+"</span></span>"),e.refreshHint=e.scrollElement.children().first(),e.hintContainer=e.refreshHint.children(".km-template"),e.pane.y.bind("change",a(e._paneChange,e)),e.userEvents.bind("end",a(e._dragEnd,e))},_dragEnd:function(){var e=this;e.pulled&&(e.pulled=!1,e.refreshHint.removeClass(x).addClass(C),e.hintContainer.html(e.refreshTemplate({})),e.yinertia.freeze(e.options.pullOffset/2),e.trigger("pull"))},_paneChange:function(){var e=this;e.movable.y/b>e.options.pullOffset?e.pulled||(e.pulled=!0,e.refreshHint.removeClass(C).addClass(x),e.hintContainer.html(e.releaseTemplate({}))):e.pulled&&(e.pulled=!1,e.refreshHint.removeClass(x),e.hintContainer.html(e.pullTemplate({})))},_initAxis:function(e){var t=this,n=t.movable,i=t.dimensions[e],r=t.tapCapture,o=t.pane[e],a=new z({axis:e,movable:n,dimension:i,container:t.element,alwaysVisible:t.options.visibleScrollHints});i.bind(T,function(){a.refresh()}),o.bind(T,function(){a.show()}),t[e+"inertia"]=new P({axis:e,paneAxis:o,movable:n,tapCapture:r,userEvents:t.userEvents,dimension:i,elastic:t.options.elastic,friction:t.options.friction||_,velocityMultiplier:t.options.velocityMultiplier||y,end:function(){a.hide(),t.trigger("scrollEnd",{axis:e,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft})}})}});o.plugin(F)}(window.kendo.jQuery),function(e,t){function n(e){return e.position().top+3}var i=window.kendo,r=i.ui.Widget,o=e.proxy,a=!1,s=".kendoGroupable",l="change",c=i.template('<div class="k-group-indicator" data-#=data.ns#field="${data.field}" data-#=data.ns#title="${data.title || ""}" data-#=data.ns#dir="${data.dir || "asc"}"><a href="\\#" class="k-link"><span class="k-icon k-si-arrow-${(data.dir || "asc") == "asc" ? "n" : "s"}">(sorted ${(data.dir || "asc") == "asc" ? "ascending": "descending"})</span>${data.title ? data.title: data.field}</a><a class="k-button k-button-icon k-button-bare"><span class="k-icon k-group-delete"></span></a></div>',{useWithBlock:!1}),d=function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(i.attr("title"))||t.attr(i.attr("field"))).prepend('<span class="k-icon k-drag-status k-denied" />')},u=e('<div class="k-grouping-dropclue"/>'),h=/("|\%|'|\[|\]|\$|\.|\,|\:|\;|\+|\*|\&|\!|\#|\(|\)|<|>|\=|\?|\@|\^|\{|\}|\~|\/|\||`)/g,p=r.extend({init:function(c,h){var p,f,g=this,m=i.guid(),v=o(g._intializePositions,g),_=g._dropCuePositions=[];r.fn.init.call(g,c,h),a=i.support.isRtl(c),f=a?"right":"left",g.draggable=p=g.options.draggable||new i.ui.Draggable(g.element,{filter:g.options.draggableElements,hint:d,group:m}),g.groupContainer=e(g.options.groupContainer,g.element).kendoDropTarget({group:p.options.group,dragenter:function(e){g._canDrag(e.draggable.currentTarget)&&(e.draggable.hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add"),u.css("top",n(g.groupContainer)).css(f,0).appendTo(g.groupContainer))},dragleave:function(e){e.draggable.hint.find(".k-drag-status").removeClass("k-add").addClass("k-denied"),u.remove()},drop:function(t){var n,r=t.draggable.currentTarget,o=r.attr(i.attr("field")),s=r.attr(i.attr("title")),l=g.indicator(o),c=g._dropCuePositions,d=c[c.length-1];(r.hasClass("k-group-indicator")||g._canDrag(r))&&(d?(n=g._dropCuePosition(i.getOffset(u).left+parseInt(d.element.css("marginLeft"),10)*(a?-1:1)+parseInt(d.element.css("marginRight"),10)),n&&g._canDrop(e(l),n.element,n.left)&&(n.before?n.element.before(l||g.buildIndicator(o,s)):n.element.after(l||g.buildIndicator(o,s)),g._change())):(g.groupContainer.append(g.buildIndicator(o,s)),g._change()))}}).kendoDraggable({filter:"div.k-group-indicator",hint:d,group:p.options.group,dragcancel:o(g._dragCancel,g),dragstart:function(e){var t=e.currentTarget,i=parseInt(t.css("marginLeft"),10),r=t.position(),o=a?r.left-i:r.left+t.outerWidth();v(),u.css({top:n(g.groupContainer),left:o}).appendTo(g.groupContainer),this.hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add")},dragend:function(){g._dragEnd(this)},drag:o(g._drag,g)}).on("click"+s,".k-button",function(t){t.preventDefault(),g._removeIndicator(e(this).parent())}).on("click"+s,".k-link",function(t){var n=e(this).parent(),r=g.buildIndicator(n.attr(i.attr("field")),n.attr(i.attr("title")),"asc"==n.attr(i.attr("dir"))?"desc":"asc");n.before(r).remove(),g._change(),t.preventDefault()}),p.bind(["dragend","dragcancel","dragstart","drag"],{dragend:function(){g._dragEnd(this)},dragcancel:o(g._dragCancel,g),dragstart:function(e){var n,i,r;return g.options.allowDrag||g._canDrag(e.currentTarget)?(v(),_.length?(n=_[_.length-1].element,i=parseInt(n.css("marginRight"),10),r=n.position().left+n.outerWidth()+i):r=0,t):(e.preventDefault(),t)},drag:o(g._drag,g)}),g.dataSource=g.options.dataSource,g.dataSource&&g._refreshHandler?g.dataSource.unbind(l,g._refreshHandler):g._refreshHandler=o(g.refresh,g),g.dataSource&&(g.dataSource.bind("change",g._refreshHandler),g.refresh())},refresh:function(){var t=this,n=t.dataSource;t.groupContainer&&t.groupContainer.empty().append(e.map(n.group()||[],function(e){var n=e.field.replace(h,"\\$1"),r=t.element.find(t.options.filter).filter("["+i.attr("field")+"="+n+"]");return t.buildIndicator(e.field,r.attr(i.attr("title")),e.dir)}).join("")),t._invalidateGroupContainer()},destroy:function(){var e=this;r.fn.destroy.call(e),e.groupContainer.off(s),e.groupContainer.data("kendoDropTarget")&&e.groupContainer.data("kendoDropTarget").destroy(),e.groupContainer.data("kendoDraggable")&&e.groupContainer.data("kendoDraggable").destroy(),e.options.draggable||e.draggable.destroy(),e.dataSource&&e._refreshHandler&&(e.dataSource.unbind("change",e._refreshHandler),e._refreshHandler=null),e.groupContainer=e.element=e.draggable=null},options:{name:"Groupable",filter:"th",draggableElements:"th",messages:{empty:"Drag a column header and drop it here to group by that column"}},indicator:function(t){var n=e(".k-group-indicator",this.groupContainer);return e.grep(n,function(n){return e(n).attr(i.attr("field"))===t})[0]},buildIndicator:function(e,t,n){return c({field:e.replace(/"/g,"'"),dir:n,title:t,ns:i.ns})},descriptors:function(){var t,n,r,o,a,s=this,l=e(".k-group-indicator",s.groupContainer);return t=s.element.find(s.options.filter).map(function(){var t=e(this),r=t.attr(i.attr("aggregates")),s=t.attr(i.attr("field"));if(r&&""!==r)for(n=r.split(","),r=[],o=0,a=n.length;a>o;o++)r.push({field:s,aggregate:n[o]});return r}).toArray(),e.map(l,function(n){return n=e(n),r=n.attr(i.attr("field")),{field:r,dir:n.attr(i.attr("dir")),aggregates:t||[]}})},_removeIndicator:function(e){var t=this;e.remove(),t._invalidateGroupContainer(),t._change()},_change:function(){var e=this;e.dataSource&&e.dataSource.group(e.descriptors())},_dropCuePosition:function(t){var n,i,r,o,s,l=this._dropCuePositions;if(u.is(":visible")&&0!==l.length)return t=Math.ceil(t),n=l[l.length-1],i=n.left,r=n.right,o=parseInt(n.element.css("marginLeft"),10),s=parseInt(n.element.css("marginRight"),10),t>=r&&!a||i>t&&a?t={left:n.element.position().left+(a?-o:n.element.outerWidth()+s),element:n.element,before:!1}:(t=e.grep(l,function(e){return t>=e.left&&e.right>=t||a&&t>e.right
})[0],t&&(t={left:a?t.element.position().left+t.element.outerWidth()+s:t.element.position().left-o,element:t.element,before:!0})),t},_drag:function(e){var t=this._dropCuePosition(e.x.location);t&&u.css({left:t.left,right:"auto"})},_canDrag:function(e){var t=e.attr(i.attr("field"));return"false"!=e.attr(i.attr("groupable"))&&t&&(e.hasClass("k-group-indicator")||!this.indicator(t))},_canDrop:function(e,t,n){var i=e.next(),r=e[0]!==t[0]&&(!i[0]||t[0]!==i[0]||!a&&n>i.position().left||a&&n<i.position().left);return r},_dragEnd:function(t){var n=this,r=t.currentTarget.attr(i.attr("field")),o=n.indicator(r);t!==n.options.draggable&&!t.dropped&&o&&n._removeIndicator(e(o)),n._dragCancel()},_dragCancel:function(){u.remove(),this._dropCuePositions=[]},_intializePositions:function(){var t,n=this,r=e(".k-group-indicator",n.groupContainer);n._dropCuePositions=e.map(r,function(n){return n=e(n),t=i.getOffset(n).left,{left:parseInt(t,10),right:parseInt(t+n.outerWidth(),10),element:n}})},_invalidateGroupContainer:function(){var e=this.groupContainer;e&&e.is(":empty")&&e.html(this.options.messages.empty)}});i.ui.plugin(p)}(window.kendo.jQuery),function(e){function t(t,n){t=e(t),n?t.find(".k-drag-status").removeClass("k-add").addClass("k-denied"):t.find(".k-drag-status").removeClass("k-denied").addClass("k-add")}var n=window.kendo,i=n.getOffset,r=n.ui.Widget,o="change",a="k-reorderable",s=r.extend({init:function(s,l){var c,d=this,u=n.guid()+"-reorderable";r.fn.init.call(d,s,l),s=d.element.addClass(a),l=d.options,d.draggable=c=l.draggable||new n.ui.Draggable(s,{group:u,filter:l.filter,hint:l.hint}),d.reorderDropCue=e('<div class="k-reorder-cue"><div class="k-icon k-i-arrow-s"></div><div class="k-icon k-i-arrow-n"></div></div>'),s.find(c.options.filter).kendoDropTarget({group:c.options.group,dragenter:function(e){var n,r,o,a;d._draggable&&(n=this.element,o=!d._dropTargetAllowed(n)||d._isLastDraggable(),t(e.draggable.hint,o),o||(r=i(n),a=r.left,l.inSameContainer&&!l.inSameContainer({source:n,target:d._draggable,sourceIndex:d._index(n),targetIndex:d._index(d._draggable)})?d._dropTarget=n:d._index(n)>d._index(d._draggable)&&(a+=n.outerWidth()),d.reorderDropCue.css({height:n.outerHeight(),top:r.top,left:a}).appendTo(document.body)))},dragleave:function(e){t(e.draggable.hint,!0),d.reorderDropCue.remove(),d._dropTarget=null},drop:function(){var e,t,n;d._dropTarget=null,d._draggable&&(e=this.element,t=d._draggable,n=!1,d._dropTargetAllowed(e)&&!d._isLastDraggable()&&d.trigger(o,{element:d._draggable,target:e,oldIndex:d._index(t),newIndex:d._index(e),position:i(d.reorderDropCue).left>i(e).left?"after":"before"}))}}),c.bind(["dragcancel","dragend","dragstart","drag"],{dragcancel:function(){d.reorderDropCue.remove(),d._draggable=null,d._elements=null},dragend:function(){d.reorderDropCue.remove(),d._draggable=null,d._elements=null},dragstart:function(e){d._draggable=e.currentTarget,d._elements=d.element.find(d.draggable.options.filter)},drag:function(e){var t,n;d._dropTarget&&!this.hint.find(".k-drag-status").hasClass("k-denied")&&(t=i(d._dropTarget).left,n=d._dropTarget.outerWidth(),d.reorderDropCue.css(e.pageX>t+n/2?{left:t+n}:{left:t}))}})},options:{name:"Reorderable",filter:"*"},events:[o],_isLastDraggable:function(){var e,t=this.options.inSameContainer,n=this._draggable[0],i=this._elements.get(),r=!1;if(!t)return!1;for(;!r&&i.length>0;)e=i.pop(),r=n!==e&&t({source:n,target:e,sourceIndex:this._index(n),targetIndex:this._index(e)});return!r},_dropTargetAllowed:function(e){var t=this.options.inSameContainer,n=this.options.dragOverContainers,i=this._draggable;return i[0]===e[0]?!1:t&&n?t({source:i,target:e,sourceIndex:this._index(i),targetIndex:this._index(e)})?!0:n(this._index(i),this._index(e)):!0},_index:function(e){return this._elements.index(e)},destroy:function(){var t=this;r.fn.destroy.call(t),t.element.find(t.draggable.options.filter).each(function(){var t=e(this);t.data("kendoDropTarget")&&t.data("kendoDropTarget").destroy()}),t.draggable&&(t.draggable.destroy(),t.draggable.element=t.draggable=null),t.elements=t.reorderDropCue=t._elements=t._draggable=null}});n.ui.plugin(s)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.Widget,o=e.proxy,a=n.isFunction,s=e.extend,l="horizontal",c="vertical",d="start",u="resize",h="resizeend",p=r.extend({init:function(e,t){var n=this;r.fn.init.call(n,e,t),n.orientation=n.options.orientation.toLowerCase()!=c?l:c,n._positionMouse=n.orientation==l?"x":"y",n._position=n.orientation==l?"left":"top",n._sizingDom=n.orientation==l?"outerWidth":"outerHeight",n.draggable=new i.Draggable(e,{distance:0,filter:t.handle,drag:o(n._resize,n),dragcancel:o(n._cancel,n),dragstart:o(n._start,n),dragend:o(n._stop,n)}),n.userEvents=n.draggable.userEvents},events:[u,h,d],options:{name:"Resizable",orientation:l},resize:function(){},_max:function(e){var n=this,i=n.hint?n.hint[n._sizingDom]():0,r=n.options.max;return a(r)?r(e):r!==t?n._initialElementPosition+r-i:r},_min:function(e){var n=this,i=n.options.min;return a(i)?i(e):i!==t?n._initialElementPosition+i:i},_start:function(t){var n=this,i=n.options.hint,r=e(t.currentTarget);n._initialElementPosition=r.position()[n._position],n._initialMousePosition=t[n._positionMouse].startLocation,i&&(n.hint=a(i)?e(i(r)):i,n.hint.css({position:"absolute"}).css(n._position,n._initialElementPosition).appendTo(n.element)),n.trigger(d,t),n._maxPosition=n._max(t),n._minPosition=n._min(t),e(document.body).css("cursor",r.css("cursor"))},_resize:function(e){var n,i=this,r=i._maxPosition,o=i._minPosition,a=i._initialElementPosition+(e[i._positionMouse].location-i._initialMousePosition);n=o!==t?Math.max(o,a):a,i.position=n=r!==t?Math.min(r,n):n,i.hint&&i.hint.toggleClass(i.options.invalidClass||"",n==r||n==o).css(i._position,n),i.resizing=!0,i.trigger(u,s(e,{position:n}))},_stop:function(t){var n=this;n.hint&&n.hint.remove(),n.resizing=!1,n.trigger(h,s(t,{position:n.position})),e(document.body).css("cursor","")},_cancel:function(e){var n=this;n.hint&&(n.position=t,n.hint.css(n._position,n._initialElementPosition),n._stop(e))},destroy:function(){var e=this;r.fn.destroy.call(e),e.draggable&&e.draggable.destroy()},press:function(e){if(e){var t=e.position(),n=this;n.userEvents.press(t.left,t.top,e[0]),n.targetPosition=t,n.target=e}},move:function(e){var n=this,i=n._position,r=n.targetPosition,o=n.position;o===t&&(o=r[i]),r[i]=o+e,n.userEvents.move(r.left,r.top)},end:function(){this.userEvents.end(),this.target=this.position=t}});n.ui.plugin(p)}(window.kendo.jQuery),function(e,t){function n(t,n){try{return e.contains(t,n)||t==n}catch(i){return!1}}function i(e){return e.clone()}function r(e){return e.clone().removeAttr("id").css("visibility","hidden")}var o=window.kendo,a=o.ui.Widget,s="start",l="beforeMove",c="move",d="end",u="change",h="cancel",p="sort",f="remove",g="receive",m=">*",v=-1,_=a.extend({init:function(e,t){var n=this;a.fn.init.call(n,e,t),n.options.placeholder||(n.options.placeholder=r),n.options.hint||(n.options.hint=i),n._draggable=n._createDraggable()},events:[s,l,c,d,u,h],options:{name:"Sortable",hint:null,placeholder:null,filter:m,holdToDrag:!1,disabled:null,container:null,connectWith:null,handler:null,cursorOffset:null,axis:null,ignore:null,cursor:"auto"},destroy:function(){this._draggable.destroy(),a.fn.destroy.call(this)},_createDraggable:function(){var t=this,n=t.element,i=t.options;return new o.ui.Draggable(n,{filter:i.filter,hint:o.isFunction(i.hint)?i.hint:e(i.hint),holdToDrag:i.holdToDrag,container:i.container?e(i.container):null,cursorOffset:i.cursorOffset,axis:i.axis,ignore:i.ignore,dragstart:e.proxy(t._dragstart,t),dragcancel:e.proxy(t._dragcancel,t),drag:e.proxy(t._drag,t),dragend:e.proxy(t._dragend,t)})},_dragstart:function(t){var n=this.draggedElement=t.currentTarget,i=t.target||o.elementUnderCursor(t),r=this.options.disabled,a=this.options.handler,l=this.options.placeholder,c=this.placeholder=e(o.isFunction(l)?l.call(this,n):l);r&&n.is(r)?t.preventDefault():a&&!e(i).is(a)?t.preventDefault():this.trigger(s,{item:n,draggableEvent:t})?t.preventDefault():(n.css("display","none"),n.before(c),this._setCursor())},_dragcancel:function(){this._cancel(),this.trigger(h,{item:this.draggedElement}),this._resetCursor()},_drag:function(n){var i,r,o,a,s,l=this.draggedElement,c=this._findTarget(n),d={left:n.x.location,top:n.y.location},u={x:n.x.delta,y:n.y.delta},h=this.options.axis,p={item:l,list:this,draggableEvent:n};if("x"===h||"y"===h)return this._movementByAxis(h,d,u[h],p),t;if(c){if(i=this._getElementCenter(c.element),r={left:Math.round(d.left-i.left),top:Math.round(d.top-i.top)},e.extend(p,{target:c.element}),c.appendToBottom)return this._movePlaceholder(c,null,p),t;if(c.appendAfterHidden&&this._movePlaceholder(c,"next",p),this._isFloating(c.element)?0>u.x&&0>r.left?o="prev":u.x>0&&r.left>0&&(o="next"):0>u.y&&0>r.top?o="prev":u.y>0&&r.top>0&&(o="next"),o){for(s="prev"===o?jQuery.fn.prev:jQuery.fn.next,a=s.call(c.element);a.length&&!a.is(":visible");)a=s.call(a);a[0]!=this.placeholder[0]&&this._movePlaceholder(c,o,p)}}},_dragend:function(n){var i,r,o,a,s=this.placeholder,l=this.draggedElement,c=this.indexOf(l),h=this.indexOf(s),m=this.options.connectWith;return this._resetCursor(),o={action:p,item:l,oldIndex:c,newIndex:h,draggableEvent:n},h>=0?r=this.trigger(d,o):(i=s.parents(m).getKendoSortable(),o.action=f,a=e.extend({},o,{action:g,oldIndex:v,newIndex:i.indexOf(s)}),r=!(!this.trigger(d,o)&&!i.trigger(d,a))),r||h===c?(this._cancel(),t):(s.replaceWith(l),l.show(),this._draggable.dropped=!0,o={action:this.indexOf(l)!=v?p:f,item:l,oldIndex:c,newIndex:this.indexOf(l),draggableEvent:n},this.trigger(u,o),i&&(a=e.extend({},o,{action:g,oldIndex:v,newIndex:i.indexOf(l)}),i.trigger(u,a)),t)},_findTarget:function(n){var i,r,o=this._findElementUnderCursor(n),a=this.options.connectWith;return e.contains(this.element[0],o)?(i=this.items(),r=i.filter(o)[0]||i.has(o)[0],r?{element:e(r),sortable:this}:null):this.element[0]==o&&this._isEmpty()?{element:this.element,sortable:this,appendToBottom:!0}:this.element[0]==o&&this._isLastHidden()?(r=this.items().eq(0),{element:r,sortable:this,appendAfterHidden:!0}):a?this._searchConnectedTargets(o,n):t},_findElementUnderCursor:function(e){{var t=o.elementUnderCursor(e),i=e.sender;this.items()}return n(i.hint[0],t)&&(i.hint.hide(),t=o.elementUnderCursor(e),t||(t=o.elementUnderCursor(e)),i.hint.show()),t},_searchConnectedTargets:function(t,n){var i,r,o,a,s=e(this.options.connectWith);for(a=0;s.length>a;a++)if(i=s.eq(a).getKendoSortable(),e.contains(s[a],t)){if(i)return r=i.items(),o=r.filter(t)[0]||r.has(t)[0],o?(i.placeholder=this.placeholder,{element:e(o),sortable:i}):null}else if(s[a]==t){if(i&&i._isEmpty())return{element:s.eq(a),sortable:i,appendToBottom:!0};if(this._isCursorAfterLast(i,n))return o=i.items().last(),{element:o,sortable:i}}},_isCursorAfterLast:function(e,t){var n,i,r=e.items().last(),a={left:t.x.location,top:t.y.location};return n=o.getOffset(r),n.top+=r.outerHeight(),n.left+=r.outerWidth(),i=this._isFloating(r)?n.left-a.left:n.top-a.top,0>i?!0:!1},_movementByAxis:function(t,n,i,r){var o,a="x"===t?n.left:n.top,s=0>i?this.placeholder.prev():this.placeholder.next();s.length&&!s.is(":visible")&&(s=0>i?s.prev():s.next()),e.extend(r,{target:s}),o=this._getElementCenter(s),o&&(o="x"===t?o.left:o.top),s.length&&0>i&&0>a-o?this._movePlaceholder({element:s,sortable:this},"prev",r):s.length&&i>0&&a-o>0&&this._movePlaceholder({element:s,sortable:this},"next",r)},_movePlaceholder:function(e,t,n){var i=this.placeholder;e.sortable.trigger(l,n)||(t?"prev"===t?e.element.before(i):"next"===t&&e.element.after(i):e.element.append(i),e.sortable.trigger(c,n))},_setCursor:function(){var t,n=this.options.cursor;n&&"auto"!==n&&(t=e(document.body),this._originalCursorType=t.css("cursor"),t.css({cursor:n}),this._cursorStylesheet||(this._cursorStylesheet=e("<style>* { cursor: "+n+" !important; }</style>")),this._cursorStylesheet.appendTo(t))},_resetCursor:function(){this._originalCursorType&&(e(document.body).css("cursor",this._originalCursorType),this._originalCursorType=null,this._cursorStylesheet.remove())},_getElementCenter:function(e){var t=e.length?o.getOffset(e):null;return t&&(t.top+=e.outerHeight()/2,t.left+=e.outerWidth()/2),t},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_cancel:function(){this.draggedElement.show(),this.placeholder.remove()},_items:function(){var e,t=this.options.filter;return e=t?this.element.find(t):this.element.children()},indexOf:function(e){var t=this._items(),n=this.placeholder,i=this.draggedElement;return n&&e[0]==n[0]?t.not(i).index(e):t.not(n).index(e)},items:function(){var e=this.placeholder,t=this._items();return e&&(t=t.not(e)),t},_isEmpty:function(){return!this.items().length},_isLastHidden:function(){return 1===this.items().length&&this.items().is(":hidden")}});o.ui.plugin(_)}(window.kendo.jQuery),function(e,t){function n(e,t){var n=r.getOffset(e),i=t.left+t.width,o=t.top+t.height;return n.right=n.left+e.outerWidth(),n.bottom=n.top+e.outerHeight(),!(n.left>i||t.left>n.right||n.top>o||t.top>n.bottom)}var i,r=window.kendo,o=r.ui.Widget,a=e.proxy,s=Math.abs,l="aria-selected",c="k-state-selected",d="k-state-selecting",u="k-selectable",h="change",p=".kendoSelectable",f="k-state-unselecting",g="input,a,textarea,.k-multiselect-wrap,select,button",m=r.support.browser.msie,v=!1;!function(e){!function(){e('<div class="parent"><span /></div>').on("click",">*",function(){v=!0}).find("span").click().end().off()}()}(e),i=o.extend({init:function(t,n){var i,s=this;o.fn.init.call(s,t,n),s._marquee=e("<div class='k-marquee'><div class='k-marquee-color'></div></div>"),s._lastActive=null,s.element.addClass(u),s.relatedTarget=s.options.relatedTarget,i=s.options.multiple,this.options.aria&&i&&s.element.attr("aria-multiselectable",!0),s.userEvents=new r.UserEvents(s.element,{global:!0,allowSelection:!0,filter:(v?"":"."+u+" ")+s.options.filter,tap:a(s._tap,s)}),i&&s.userEvents.bind("start",a(s._start,s)).bind("move",a(s._move,s)).bind("end",a(s._end,s)).bind("select",a(s._select,s))},events:[h],options:{name:"Selectable",filter:">*",multiple:!1,relatedTarget:e.noop},_isElement:function(e){var t,n=this.element,i=n.length,r=!1;for(e=e[0],t=0;i>t;t++)if(n[t]===e){r=!0;break}return r},_tap:function(t){var n,i=e(t.target),r=this,o=t.event.ctrlKey||t.event.metaKey,a=r.options.multiple,s=a&&t.event.shiftKey,l=t.event.which,d=t.event.button;!r._isElement(i.closest("."+u))||l&&3==l||d&&2==d||this._allowSelection(t.event.target)&&(n=i.hasClass(c),a&&o||r.clear(),i=i.add(r.relatedTarget(i)),s?r.selectRange(r._firstSelectee(),i):(n&&o?(r._unselect(i),r._notify(h)):r.value(i),r._lastActive=r._downTarget=i))},_start:function(n){var i,r=this,o=e(n.target),a=o.hasClass(c),s=n.event.ctrlKey||n.event.metaKey;if(this._allowSelection(n.event.target)){if(r._downTarget=o,!r._isElement(o.closest("."+u)))return r.userEvents.cancel(),t;r.options.useAllItems?r._items=r.element.find(r.options.filter):(i=o.closest(r.element),r._items=i.find(r.options.filter)),n.sender.capture(),r._marquee.appendTo(document.body).css({left:n.x.client+1,top:n.y.client+1,width:0,height:0}),s||r.clear(),o=o.add(r.relatedTarget(o)),a&&(r._selectElement(o,!0),s&&o.addClass(f))}},_move:function(e){var t=this,n={left:e.x.startLocation>e.x.location?e.x.location:e.x.startLocation,top:e.y.startLocation>e.y.location?e.y.location:e.y.startLocation,width:s(e.x.initialDelta),height:s(e.y.initialDelta)};t._marquee.css(n),t._invalidateSelectables(n,e.event.ctrlKey||e.event.metaKey),e.preventDefault()},_end:function(){var e,t=this;t._marquee.remove(),t._unselect(t.element.find(t.options.filter+"."+f)).removeClass(f),e=t.element.find(t.options.filter+"."+d),e=e.add(t.relatedTarget(e)),t.value(e),t._lastActive=t._downTarget,t._items=null},_invalidateSelectables:function(e,t){var i,r,o,a,s=this._downTarget[0],l=this._items;for(i=0,r=l.length;r>i;i++)a=l.eq(i),o=a.add(this.relatedTarget(a)),n(a,e)?a.hasClass(c)?t&&s!==a[0]&&o.removeClass(c).addClass(f):a.hasClass(d)||a.hasClass(f)||o.addClass(d):a.hasClass(d)?o.removeClass(d):t&&a.hasClass(f)&&o.removeClass(f).addClass(c)},value:function(e){var n=this,i=a(n._selectElement,n);return e?(e.each(function(){i(this)}),n._notify(h),t):n.element.find(n.options.filter+"."+c)},_firstSelectee:function(){var e,t=this;return null!==t._lastActive?t._lastActive:(e=t.value(),e.length>0?e[0]:t.element.find(t.options.filter)[0])},_selectElement:function(t,n){var i=e(t),r=!n&&this._notify("select",{element:t});i.removeClass(d),r||(i.addClass(c),this.options.aria&&i.attr(l,!0))},_notify:function(e,t){return t=t||{},this.trigger(e,t)},_unselect:function(e){return e.removeClass(c),this.options.aria&&e.attr(l,!1),e},_select:function(t){this._allowSelection(t.event.target)&&(!m||m&&!e(r._activeElement()).is(g))&&t.preventDefault()},_allowSelection:function(t){return e(t).is(g)?(this.userEvents.cancel(),this._downTarget=null,!1):!0},resetTouchEvents:function(){this.userEvents.cancel()},clear:function(){var e=this.element.find(this.options.filter+"."+c);this._unselect(e)},selectRange:function(t,n){var i,r,o,a=this;for(a.clear(),a.element.length>1&&(o=a.options.continuousItems()),o&&o.length||(o=a.element.find(a.options.filter)),t=e.inArray(e(t)[0],o),n=e.inArray(e(n)[0],o),t>n&&(r=t,t=n,n=r),a.options.useAllItems||(n+=a.element.length-1),i=t;n>=i;i++)a._selectElement(o[i]);a._notify(h)},destroy:function(){var e=this;o.fn.destroy.call(e),e.element.off(p),e.userEvents.destroy(),e._marquee=e._lastActive=e.element=e.userEvents=null}}),i.parseOptions=function(e){var t="string"==typeof e&&e.toLowerCase();return{multiple:t&&t.indexOf("multiple")>-1,cell:t&&t.indexOf("cell")>-1}},r.ui.plugin(i)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui.Widget,r=e.proxy,o=n.keys,a="click",s="k-button",l="k-button-icon",c="k-button-icontext",d=".kendoButton",u="disabled",h="k-state-disabled",p="k-state-focused",f="k-state-selected",g=i.extend({init:function(e,t){var o=this;i.fn.init.call(o,e,t),e=o.wrapper=o.element,t=o.options,e.addClass(s).attr("role","button"),t.enable=t.enable&&!e.attr(u),o.enable(t.enable),o._tabindex(),o._graphics(),e.on(a+d,r(o._click,o)).on("focus"+d,r(o._focus,o)).on("blur"+d,r(o._blur,o)).on("keydown"+d,r(o._keydown,o)).on("keyup"+d,r(o._keyup,o)),n.notify(o)},destroy:function(){var e=this;e.wrapper.off(d),i.fn.destroy.call(e)},events:[a],options:{name:"Button",icon:"",spriteCssClass:"",imageUrl:"",enable:!0},_isNativeButton:function(){return"button"==this.element.prop("tagName").toLowerCase()},_click:function(e){this.options.enable&&this.trigger(a,{event:e})},_focus:function(){this.options.enable&&this.element.addClass(p)},_blur:function(){this.element.removeClass(p)},_keydown:function(e){var t=this;t._isNativeButton()||(e.keyCode==o.ENTER||e.keyCode==o.SPACEBAR)&&(e.keyCode==o.SPACEBAR&&(e.preventDefault(),t.options.enable&&t.element.addClass(f)),t._click(e))},_keyup:function(){this.element.removeClass(f)},_graphics:function(){var t,n,i,r=this,o=r.element,a=r.options,s=a.icon,d=a.spriteCssClass,u=a.imageUrl;(d||u||s)&&(i=!0,o.contents().not("span.k-sprite").not("span.k-icon").not("img.k-image").each(function(t,n){(1==n.nodeType||3==n.nodeType&&e.trim(n.nodeValue).length>0)&&(i=!1)}),o.addClass(i?l:c)),s?(t=o.children("span.k-icon").first(),t[0]||(t=e('<span class="k-icon"></span>').prependTo(o)),t.addClass("k-i-"+s)):d?(t=o.children("span.k-sprite").first(),t[0]||(t=e('<span class="k-sprite"></span>').prependTo(o)),t.addClass(d)):u&&(n=o.children("img.k-image").first(),n[0]||(n=e('<img alt="icon" class="k-image" />').prependTo(o)),n.attr("src",u))},enable:function(e){var n=this,i=n.element;e===t&&(e=!0),e=!!e,n.options.enable=e,i.toggleClass(h,!e).attr("aria-disabled",!e).attr(u,!e);try{i.blur()}catch(r){}}});n.ui.plugin(g)}(window.kendo.jQuery),function(e,t){function n(e,t,n,i,r){return e({idx:t,text:n,ns:c.ns,numeric:i,title:r||""})}function i(e,t,n){return k({className:e.substring(1),text:t,wrapClassName:n||""})}function r(e,t,n,i){e.find(t).parent().attr(c.attr("page"),n).attr("tabindex",-1).toggleClass("k-state-disabled",i)}function o(e,t){r(e,p,1,1>=t)}function a(e,t){r(e,g,Math.max(1,t-1),1>=t)}function s(e,t,n){r(e,m,Math.min(n,t+1),t>=n)}function l(e,t,n){r(e,f,n,t>=n)}var c=window.kendo,d=c.ui,u=d.Widget,h=e.proxy,p=".k-i-seek-w",f=".k-i-seek-e",g=".k-i-arrow-w",m=".k-i-arrow-e",v="change",_=".kendoPager",y="click",w="keydown",b="disabled",k=c.template('<a href="\\#" title="#=text#" class="k-link k-pager-nav #= wrapClassName #"><span class="k-icon #= className #">#=text#</span></a>'),x=u.extend({init:function(t,n){var r,d,b=this;u.fn.init.call(b,t,n),n=b.options,b.dataSource=c.data.DataSource.create(n.dataSource),b.linkTemplate=c.template(b.options.linkTemplate),b.selectTemplate=c.template(b.options.selectTemplate),r=b.page(),d=b.totalPages(),b._refreshHandler=h(b.refresh,b),b.dataSource.bind(v,b._refreshHandler),n.previousNext&&(b.element.find(p).length||(b.element.append(i(p,n.messages.first,"k-pager-first")),o(b.element,r,d)),b.element.find(g).length||(b.element.append(i(g,n.messages.previous)),a(b.element,r,d))),n.numeric&&(b.list=b.element.find(".k-pager-numbers"),b.list.length||(b.list=e('<ul class="k-pager-numbers k-reset" />').appendTo(b.element))),n.input&&(b.element.find(".k-pager-input").length||b.element.append('<span class="k-pager-input k-label">'+n.messages.page+'<input class="k-textbox">'+c.format(n.messages.of,d)+"</span>"),b.element.on(w+_,".k-pager-input input",h(b._keydown,b))),n.previousNext&&(b.element.find(m).length||(b.element.append(i(m,n.messages.next)),s(b.element,r,d)),b.element.find(f).length||(b.element.append(i(f,n.messages.last,"k-pager-last")),l(b.element,r,d))),n.pageSizes&&(b.element.find(".k-pager-sizes").length||e('<span class="k-pager-sizes k-label"><select/>'+n.messages.itemsPerPage+"</span>").appendTo(b.element).find("select").html(e.map(e.isArray(n.pageSizes)?n.pageSizes:[5,10,20],function(e){return"<option>"+e+"</option>"}).join("")).end().appendTo(b.element),b.element.find(".k-pager-sizes select").val(b.pageSize()),c.ui.DropDownList&&b.element.find(".k-pager-sizes select").show().kendoDropDownList(),b.element.on(v+_,".k-pager-sizes select",h(b._change,b))),n.refresh&&(b.element.find(".k-pager-refresh").length||b.element.append('<a href="#" class="k-pager-refresh k-link" title="'+n.messages.refresh+'"><span class="k-icon k-i-refresh">'+n.messages.refresh+"</span></a>"),b.element.on(y+_,".k-pager-refresh",h(b._refreshClick,b))),n.info&&(b.element.find(".k-pager-info").length||b.element.append('<span class="k-pager-info k-label" />')),b.element.on(y+_,"a",h(b._click,b)).addClass("k-pager-wrap k-widget"),n.autoBind&&b.refresh(),c.notify(b)},destroy:function(){var e=this;u.fn.destroy.call(e),e.element.off(_),e.dataSource.unbind(v,e._refreshHandler),e._refreshHandler=null,c.destroy(e.element),e.element=e.list=null},events:[v],options:{name:"Pager",selectTemplate:'<li><span class="k-state-selected">#=text#</span></li>',linkTemplate:'<li><a tabindex="-1" href="\\#" class="k-link" data-#=ns#page="#=idx#" #if (title !== "") {# title="#=title#" #}#>#=text#</a></li>',buttonCount:10,autoBind:!0,numeric:!0,info:!0,input:!1,previousNext:!0,pageSizes:!1,refresh:!1,messages:{display:"{0} - {1} of {2} items",empty:"No items to display",page:"Page",of:"of {0}",itemsPerPage:"items per page",first:"Go to the first page",previous:"Go to the previous page",next:"Go to the next page",last:"Go to the last page",refresh:"Refresh",morePages:"More pages"}},setDataSource:function(e){var t=this;t.dataSource.unbind(v,t._refreshHandler),t.dataSource=t.options.dataSource=e,e.bind(v,t._refreshHandler),t.options.autoBind&&e.fetch()},refresh:function(e){var t,i,r,d=this,u=1,h="",p=d.page(),f=d.options,g=d.pageSize(),m=d.dataSource.total(),v=d.totalPages(),_=d.linkTemplate,y=f.buttonCount;if(!e||"itemchange"!=e.action){if(f.numeric){for(p>y&&(r=p%y,u=0===r?p-y+1:p-r+1),i=Math.min(u+y-1,v),u>1&&(h+=n(_,u-1,"...",!1,f.messages.morePages)),t=u;i>=t;t++)h+=n(t==p?d.selectTemplate:_,t,t,!0);v>i&&(h+=n(_,t,"...",!1,f.messages.morePages)),""===h&&(h=d.selectTemplate({text:0})),d.list.html(h)}f.info&&(h=m>0?c.format(f.messages.display,(p-1)*g+1,Math.min(p*g,m),m):f.messages.empty,d.element.find(".k-pager-info").html(h)),f.input&&d.element.find(".k-pager-input").html(d.options.messages.page+'<input class="k-textbox">'+c.format(f.messages.of,v)).find("input").val(p).attr(b,1>m).toggleClass("k-state-disabled",1>m),f.previousNext&&(o(d.element,p,v),a(d.element,p,v),s(d.element,p,v),l(d.element,p,v)),f.pageSizes&&d.element.find(".k-pager-sizes select").val(g).filter("["+c.attr("role")+"=dropdownlist]").kendoDropDownList("value",g).kendoDropDownList("text",g)}},_keydown:function(e){if(e.keyCode===c.keys.ENTER){var t=this.element.find(".k-pager-input").find("input"),n=parseInt(t.val(),10);(isNaN(n)||1>n||n>this.totalPages())&&(n=this.page()),t.val(n),this.page(n)}},_refreshClick:function(e){e.preventDefault(),this.dataSource.read()},_change:function(e){var t=parseInt(e.currentTarget.value,10);isNaN(t)||this.dataSource.pageSize(t)},_click:function(t){var n=e(t.currentTarget);t.preventDefault(),n.is(".k-state-disabled")||this.page(n.attr(c.attr("page")))},totalPages:function(){return Math.ceil((this.dataSource.total()||0)/this.pageSize())},pageSize:function(){return this.dataSource.pageSize()||this.dataSource.total()},page:function(e){return e===t?this.dataSource.total()>0?this.dataSource.page():0:(this.dataSource.page(e),this.trigger(v,{index:e}),t)}});d.plugin(x)}(window.kendo.jQuery),function(e){function t(t,n){return t===n||e.contains(t,n)}var n=window.kendo,i=n.ui,r=i.Widget,o=n.support,a=n.getOffset,s=n._activeElement,l="open",c="close",d="deactivate",u="activate",h="center",p="left",f="right",g="top",m="bottom",v="absolute",_="hidden",y="body",w="location",b="position",k="visible",x="effects",C="k-state-active",S="k-state-border",T=/k-state-border-(\w+)/,D=".k-picker-wrap, .k-dropdown-wrap, .k-link",A="down",E=e(document.documentElement),M=e(window),P="scroll",I="resize scroll",z=o.transitions.css,F=z+"transform",R=e.extend,B=".kendoPopup",L=["font-size","font-family","font-stretch","font-style","font-weight","line-height"],O=r.extend({init:function(t,i){var o,a=this;i=i||{},i.isRtl&&(i.origin=i.origin||m+" "+f,i.position=i.position||g+" "+f),r.fn.init.call(a,t,i),t=a.element,i=a.options,a.collisions=i.collision?i.collision.split(" "):[],a.downEvent=n.applyEventMap(A,n.guid()),1===a.collisions.length&&a.collisions.push(a.collisions[0]),o=e(a.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])"),i.appendTo=e(e(i.appendTo)[0]||o[0]||y),a.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!i.isRtl).css({position:v}).appendTo(i.appendTo).on("mouseenter"+B,function(){a._hovered=!0}).on("mouseleave"+B,function(){a._hovered=!1}),a.wrapper=e(),i.animation===!1&&(i.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),R(i.animation.open,{complete:function(){a.wrapper.css({overflow:k}),a._trigger(u)}}),R(i.animation.close,{complete:function(){a._animationClose()}}),a._mousedownProxy=function(e){a._mousedown(e)},a._resizeProxy=function(e){a._resize(e)},i.toggleTarget&&e(i.toggleTarget).on(i.toggleEvent+B,e.proxy(a.toggle,a))},events:[l,u,c,d],options:{name:"Popup",toggleEvent:"click",origin:m+" "+p,position:g+" "+p,anchor:y,appendTo:null,collision:"flip fit",viewport:window,copyAnchorStyles:!0,autosize:!1,modal:!1,animation:{open:{effects:"slideIn:down",transition:!0,duration:200},close:{duration:100,hide:!0}}},_animationClose:function(){var t,i,r,o,a=this,s=a.options;a.wrapper.hide(),t=a.wrapper.data(w),i=e(s.anchor),t&&a.wrapper.css(t),s.anchor!=y&&(r=((i.attr("class")||"").match(T)||["","down"])[1],o=S+"-"+r,i.removeClass(o).children(D).removeClass(C).removeClass(o),a.element.removeClass(S+"-"+n.directions[r].reverse)),a._closing=!1,a._trigger(d)},destroy:function(){var t,i=this,o=i.options,a=i.element.off(B);r.fn.destroy.call(i),o.toggleTarget&&e(o.toggleTarget).off(B),o.modal||(E.unbind(i.downEvent,i._mousedownProxy),i._scrollableParents().unbind(P,i._resizeProxy),M.unbind(I,i._resizeProxy)),n.destroy(i.element.children()),a.removeData(),o.appendTo[0]===document.body&&(t=a.parent(".k-animation-container"),t[0]?t.remove():a.remove())},open:function(t,i){var r,a,s,c=this,d={isFixed:!isNaN(parseInt(i,10)),x:t,y:i},u=c.element,h=c.options,p="down",f=e(h.anchor),m=u[0]&&u.hasClass("km-widget");if(!c.visible()){if(h.copyAnchorStyles&&(m&&"font-size"==L[0]&&L.shift(),u.css(n.getComputedStyles(f[0],L))),u.data("animating")||c._trigger(l))return;h.modal||(E.unbind(c.downEvent,c._mousedownProxy).bind(c.downEvent,c._mousedownProxy),o.mobileOS.ios||o.mobileOS.android||(c._scrollableParents().unbind(P,c._resizeProxy).bind(P,c._resizeProxy),M.unbind(I,c._resizeProxy).bind(I,c._resizeProxy))),c.wrapper=a=n.wrap(u,h.autosize).css({overflow:_,display:"block",position:v}),o.mobileOS.android&&a.css(F,"translatez(0)"),a.css(b),e(h.appendTo)[0]==document.body&&a.css(g,"-10000px"),r=R(!0,{},h.animation.open),c.flipped=c._position(d),r.effects=n.parseEffects(r.effects,c.flipped),p=r.effects.slideIn?r.effects.slideIn.direction:p,h.anchor!=y&&(s=S+"-"+p,u.addClass(S+"-"+n.directions[p].reverse),f.addClass(s).children(D).addClass(C).addClass(s)),u.data(x,r.effects).kendoStop(!0).kendoAnimate(r)}},toggle:function(){var e=this;e[e.visible()?c:l]()},visible:function(){return this.element.is(":"+k)},close:function(t){var i,r,o,a,s=this,l=s.options;if(s.visible()){if(i=s.wrapper[0]?s.wrapper:n.wrap(s.element).hide(),s._closing||s._trigger(c))return;s.element.find(".k-popup").each(function(){var n=e(this),i=n.data("kendoPopup");i&&i.close(t)}),E.unbind(s.downEvent,s._mousedownProxy),s._scrollableParents().unbind(P,s._resizeProxy),M.unbind(I,s._resizeProxy),t?r={hide:!0,effects:{}}:(r=R(!0,{},l.animation.close),o=s.element.data(x),a=r.effects,!a&&!n.size(a)&&o&&n.size(o)&&(r.effects=o,r.reverse=!0),s._closing=!0),s.element.kendoStop(!0),i.css({overflow:_}),s.element.kendoAnimate(r)}},_trigger:function(e){return this.trigger(e,{type:e})},_resize:function(e){var n=this;"resize"===e.type?(clearTimeout(n._resizeTimeout),n._resizeTimeout=setTimeout(function(){n._position(),n._resizeTimeout=null},50)):n._hovered||t(n.element[0],s())||n.close()},_mousedown:function(i){var r=this,o=r.element[0],a=r.options,s=e(a.anchor)[0],l=a.toggleTarget,c=n.eventTarget(i),d=e(c).closest(".k-popup"),u=d.parent().parent(".km-shim").length;d=d[0],(u||!d||d===r.element[0])&&"popover"!==e(i.target).closest("a").data("rel")&&(t(o,c)||t(s,c)||l&&t(e(l)[0],c)||r.close())},_fit:function(e,t,n){var i=0;return e+t>n&&(i=n-(e+t)),0>e&&(i=-e),i},_flip:function(e,t,n,i,r,o,a){var s=0;return a=a||t,o!==r&&o!==h&&r!==h&&(e+a>i&&(s+=-(n+t)),0>e+s&&(s+=n+t)),s},_scrollableParents:function(){return e(this.options.anchor).parentsUntil("body").filter(function(e,t){var i=n.getComputedStyles(t,["overflow"]);return"visible"!=i.overflow})},_position:function(t){var n,i,r,s,l,c,d,u,h,p=this,f=p.element.css(b,""),g=p.wrapper,m=p.options,_=e(m.viewport),y=_.offset(),k=e(m.anchor),x=m.origin.toLowerCase().split(" "),C=m.position.toLowerCase().split(" "),S=p.collisions,T=o.zoomLevel(),D=10002,A=!!(_[0]==window&&window.innerWidth&&1.02>=T),E=0,M=A?window.innerWidth:_.width(),P=A?window.innerHeight:_.height(),I=k.parents().filter(g.siblings());if(I[0])if(i=Math.max(+I.css("zIndex"),0))D=i+10;else for(n=k.parentsUntil(I),r=n.length;r>E;E++)i=+e(n[E]).css("zIndex"),i&&i>D&&(D=i+10);return g.css("zIndex",D),g.css(t&&t.isFixed?{left:t.x,top:t.y}:p._align(x,C)),s=a(g,b,k[0]===g.offsetParent()[0]),l=a(g),c=k.offsetParent().parent(".k-animation-container,.k-popup,.k-group"),c.length&&(s=a(g,b,!0),l=a(g)),_[0]===window?(l.top-=window.pageYOffset||document.documentElement.scrollTop||0,l.left-=window.pageXOffset||document.documentElement.scrollLeft||0):(l.top-=y.top,l.left-=y.left),p.wrapper.data(w)||g.data(w,R({},s)),d=R({},l),u=R({},s),"fit"===S[0]&&(u.top+=p._fit(d.top,g.outerHeight(),P/T)),"fit"===S[1]&&(u.left+=p._fit(d.left,g.outerWidth(),M/T)),h=R({},u),"flip"===S[0]&&(u.top+=p._flip(d.top,f.outerHeight(),k.outerHeight(),P/T,x[0],C[0],g.outerHeight())),"flip"===S[1]&&(u.left+=p._flip(d.left,f.outerWidth(),k.outerWidth(),M/T,x[1],C[1],g.outerWidth())),f.css(b,v),g.css(u),u.left!=h.left||u.top!=h.top
},_align:function(t,n){var i,r=this,o=r.wrapper,s=e(r.options.anchor),l=t[0],c=t[1],d=n[0],u=n[1],p=a(s),g=e(r.options.appendTo),v=o.outerWidth(),_=o.outerHeight(),y=s.outerWidth(),w=s.outerHeight(),b=p.top,k=p.left,x=Math.round;return g[0]!=document.body&&(i=a(g),b-=i.top,k-=i.left),l===m&&(b+=w),l===h&&(b+=x(w/2)),d===m&&(b-=_),d===h&&(b-=x(_/2)),c===f&&(k+=y),c===h&&(k+=x(y/2)),u===f&&(k-=v),u===h&&(k-=x(v/2)),{top:b,left:k}}});i.plugin(O)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui.Widget,r=e.proxy,o=e.extend,a=window.setTimeout,s="click",l="show",c="hide",d="k-notification",u=".k-notification-wrap .k-i-close",h="info",p="success",f="warning",g="error",m="top",v="left",_="bottom",y="right",w="up",b=".kendoNotification",k='<div class="k-widget k-notification"></div>',x='<div class="k-notification-wrap"><span class="k-icon k-i-note">#=typeIcon#</span>#=content#<span class="k-icon k-i-close">Hide</span></div>',C=i.extend({init:function(t,r){var o=this;i.fn.init.call(o,t,r),r=o.options,r.appendTo&&e(r.appendTo).is(t)||o.element.hide(),o._compileTemplates(r.templates),o._guid="_"+n.guid(),o._isRtl=n.support.isRtl(t),o._compileStacking(r.stacking,r.position.top),n.notify(o)},events:[l,c],options:{name:"Notification",position:{pinned:!0,top:null,left:null,bottom:20,right:20},stacking:"default",hideOnClick:!0,button:!1,allowHideAfter:0,autoHideAfter:5e3,appendTo:null,width:null,height:null,templates:[],animation:{open:{effects:"fade:in",duration:300},close:{effects:"fade:out",duration:600,hide:!0}}},_compileTemplates:function(t){var i=this,r=n.template;i._compiled={},e.each(t,function(t,n){i._compiled[n.type]=r(n.template||e("#"+n.templateId).html())}),i._defaultCompiled=r(x)},_getCompiled:function(e){var t=this,n=t._defaultCompiled;return e?t._compiled[e]||n:n},_compileStacking:function(e,t){var n,i,r=this,o={paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0};switch(e){case"down":n=_+" "+v,i=m+" "+v,delete o.paddingBottom;break;case y:n=m+" "+y,i=m+" "+v,delete o.paddingRight;break;case v:n=m+" "+v,i=m+" "+y,delete o.paddingLeft;break;case w:n=m+" "+v,i=_+" "+v,delete o.paddingTop;break;default:null!==t?(n=_+" "+v,i=m+" "+v,delete o.paddingBottom):(n=m+" "+v,i=_+" "+v,delete o.paddingTop)}r._popupOrigin=n,r._popupPosition=i,r._popupPaddings=o},_attachPopupEvents:function(e,t){function n(e){e.on(s+b,function(){t.close()})}var i,r=e.allowHideAfter,o=!isNaN(r)&&r>0;e.hideOnClick?t.bind("activate",function(){o?a(function(){n(t.element)},r):n(t.element)}):e.button&&(i=t.element.find(u),o?a(function(){n(i)},r):n(i))},_showPopup:function(t,i){var r,s,l=this,c=i.autoHideAfter,d=i.position.left,h=i.position.top;s=e("."+l._guid).last(),r=new n.ui.Popup(t,{anchor:s[0]?s:document.body,origin:l._popupOrigin,position:l._popupPosition,animation:i.animation,modal:!0,collision:"",isRtl:l._isRtl,close:function(){l._triggerHide(this.element)},deactivate:function(e){e.sender.element.off(b),e.sender.element.find(u).off(b),e.sender.destroy()}}),l._attachPopupEvents(i,r),s[0]?r.open():(null===d&&(d=e(window).width()-t.width()-i.position.right),null===h&&(h=e(window).height()-t.height()-i.position.bottom),r.open(d,h)),r.wrapper.addClass(l._guid).css(o({margin:0},l._popupPaddings)),i.position.pinned?(r.wrapper.css("position","fixed"),s[0]&&l._togglePin(r.wrapper,!0)):s[0]||l._togglePin(r.wrapper,!1),c>0&&a(function(){r.close()},c)},_togglePin:function(t,n){var i=e(window),r=n?-1:1;t.css({top:parseInt(t.css(m),10)+r*i.scrollTop(),left:parseInt(t.css(v),10)+r*i.scrollLeft()})},_attachStaticEvents:function(e,t){function n(e){e.on(s+b,r(i._hideStatic,i,t))}var i=this,o=e.allowHideAfter,l=!isNaN(o)&&o>0;e.hideOnClick?l?a(function(){n(t)},o):n(t):e.button&&(l?a(function(){n(t.find(u))},o):n(t.find(u)))},_showStatic:function(e,t){var n=this,i=t.autoHideAfter,r=t.animation,o=t.stacking==w||t.stacking==v?"prependTo":"appendTo";e.addClass(n._guid)[o](t.appendTo).hide().kendoAnimate(r.open||!1),n._attachStaticEvents(t,e),i>0&&a(function(){n._hideStatic(e)},i)},_hideStatic:function(e){e.kendoAnimate(o(this.options.animation.close||!1,{complete:function(){e.off(b).find(u).off(b),e.remove()}})),this._triggerHide(e)},_triggerHide:function(e){this.trigger(c,{element:e}),this.angular("cleanup",function(){return{elements:e}})},show:function(i,r){var a,s,c=this,u=c.options,p=e(k);return r||(r=h),null!==i&&i!==t&&""!==i&&(n.isFunction(i)&&(i=i()),s={typeIcon:r,content:""},a=e.isPlainObject(i)?o(s,i):o(s,{content:i}),p.addClass(d+"-"+r).toggleClass(d+"-button",u.button).attr("data-role","alert").css({width:u.width,height:u.height}).append(c._getCompiled(r)(a)),c.angular("compile",function(){return{elements:p,data:[{dataItem:a}]}}),e(u.appendTo)[0]?c._showStatic(p,u):c._showPopup(p,u),c.trigger(l,{element:p})),c},info:function(e){return this.show(e,h)},success:function(e){return this.show(e,p)},warning:function(e){return this.show(e,f)},error:function(e){return this.show(e,g)},hide:function(){var t=this,n=t.getNotifications();return n.each(t.options.appendTo?function(n,i){t._hideStatic(e(i))}:function(t,n){var i=e(n).data("kendoPopup");i&&i.close()}),t},getNotifications:function(){var t=this,n=e("."+t._guid);return t.options.appendTo?n:n.children("."+d)},setOptions:function(e){var n,r=this;i.fn.setOptions.call(r,e),n=r.options,e.templates!==t&&r._compileTemplates(n.templates),(e.stacking!==t||e.position!==t)&&r._compileStacking(n.stacking,n.position.top)},destroy:function(){i.fn.destroy.call(this),this.getNotifications().off(b).find(u).off(b)}});n.ui.plugin(C)}(window.kendo.jQuery),function(e){function t(e){for(;e.length;)n(e),e=e.parent()}function n(e){var t=e.data(o.ns+"title");t&&(e.attr("title",t),e.removeData(o.ns+"title"))}function i(e){var t=e.attr("title");t&&(e.data(o.ns+"title",t),e.attr("title",""))}function r(e){for(;e.length&&!e.is("body");)i(e),e=e.parent()}var o=window.kendo,a=o.ui.Widget,s=o.ui.Popup,l=o.isFunction,c=e.isPlainObject,d=e.extend,u=e.proxy,h=e(document),p=o.isLocalUrl,f="_tt_active",g="aria-describedby",m="show",v="hide",_="error",y="contentLoad",w="requestStart",b="k-content-frame",k='<div role="tooltip" class="k-widget k-tooltip#if (!autoHide) {# k-tooltip-closable#}#">#if (!autoHide) {# <div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close">close</a></div> #}#<div class="k-tooltip-content"></div>#if (callout){ #<div class="k-callout k-callout-#=dir#"></div>#}#</div>',x=o.template("<iframe frameborder='0' class='"+b+"' src='#= content.url #'>This page requires frames in order to show content</iframe>"),C=".kendoTooltip",S={bottom:{origin:"bottom center",position:"top center"},top:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"},center:{position:"center center",origin:"center center"}},T={top:"bottom",bottom:"top",left:"right",right:"left",center:"center"},D={bottom:"n",top:"s",left:"e",right:"w",center:"n"},A={horizontal:{offset:"top",size:"outerHeight"},vertical:{offset:"left",size:"outerWidth"}},E=function(e){return e.target.data(o.ns+"title")},M=a.extend({init:function(e,t){var n,i=this;a.fn.init.call(i,e,t),n=i.options.position.match(/left|right/)?"horizontal":"vertical",i.dimensions=A[n],i._documentKeyDownHandler=u(i._documentKeyDown,i),i.element.on(i.options.showOn+C,i.options.filter,u(i._showOn,i)).on("mouseenter"+C,i.options.filter,u(i._mouseenter,i)),this.options.autoHide&&i.element.on("mouseleave"+C,i.options.filter,u(i._mouseleave,i))},options:{name:"Tooltip",filter:"",content:E,showAfter:100,callout:!0,position:"bottom",showOn:"mouseenter",autoHide:!0,width:null,height:null,animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:40,hide:!0}}},events:[m,v,y,_,w],_mouseenter:function(t){r(e(t.currentTarget))},_showOn:function(t){var n=this,i=e(t.currentTarget);n.options.showOn&&n.options.showOn.match(/click|focus/)?n._show(i):(clearTimeout(n.timeout),n.timeout=setTimeout(function(){n._show(i)},n.options.showAfter))},_appendContent:function(e){var t,n=this,i=n.options.content,r=n.content,a=n.options.iframe;c(i)&&i.url?("iframe"in n.options||(a=!p(i.url)),n.trigger(w,{options:i,target:e}),a?(r.hide(),t=r.find("."+b)[0],t?t.src=i.url||t.src:r.html(x({content:i})),r.find("."+b).off("load"+C).on("load"+C,function(){n.trigger(y),r.show()})):(r.empty(),o.ui.progress(r,!0),n._ajaxRequest(i))):i&&l(i)?(i=i({sender:this,target:e}),r.html(i||"")):r.html(i),n.angular("compile",function(){return{elements:r}})},_ajaxRequest:function(e){var t=this;jQuery.ajax(d({type:"GET",dataType:"html",cache:!1,error:function(e,n){o.ui.progress(t.content,!1),t.trigger(_,{status:n,xhr:e})},success:u(function(e){o.ui.progress(t.content,!1),t.content.html(e),t.trigger(y)},t)},e))},_documentKeyDown:function(e){e.keyCode===o.keys.ESC&&this.hide()},refresh:function(){var e=this,t=e.popup;t&&t.options.anchor&&e._appendContent(t.options.anchor)},hide:function(){this.popup&&this.popup.close()},show:function(e){e=e||this.element,r(e),this._show(e)},_show:function(e){var n=this,i=n.target();n.popup||n._initPopup(),i&&i[0]!=e[0]&&(n.popup.close(),n.popup.element.kendoStop(!0,!0)),i&&i[0]==e[0]||(n._appendContent(e),n.popup.options.anchor=e),n.popup.one("deactivate",function(){t(e),e.removeAttr(g),this.element.removeAttr("id").attr("aria-hidden",!0),h.off("keydown"+C,n._documentKeyDownHandler)}),n.popup.open()},_initPopup:function(){var t=this,n=t.options,i=e(o.template(k)({callout:n.callout&&"center"!==n.position,dir:D[n.position],autoHide:n.autoHide}));t.popup=new s(i,d({activate:function(){var e=this.options.anchor,i=e[0].id||t.element[0].id;i&&(e.attr(g,i+f),this.element.attr("id",i+f)),n.callout&&t._positionCallout(),this.element.removeAttr("aria-hidden"),h.on("keydown"+C,t._documentKeyDownHandler),t.trigger(m)},close:function(){t.trigger(v)},copyAnchorStyles:!1,animation:n.animation},S[n.position])),i.css({width:n.width,height:n.height}),t.content=i.find(".k-tooltip-content"),t.arrow=i.find(".k-callout"),n.autoHide?i.on("mouseleave"+C,u(t._mouseleave,t)):i.on("click"+C,".k-tooltip-button",u(t._closeButtonClick,t))},_closeButtonClick:function(e){e.preventDefault(),this.hide()},_mouseleave:function(n){if(this.popup){var i=e(n.currentTarget),r=i.offset(),o=n.pageX,a=n.pageY;if(r.right=r.left+i.outerWidth(),r.bottom=r.top+i.outerHeight(),o>r.left&&r.right>o&&a>r.top&&r.bottom>a)return;this.popup.close()}else t(e(n.currentTarget));clearTimeout(this.timeout)},_positionCallout:function(){var t=this,n=t.options.position,i=t.dimensions,r=i.offset,o=t.popup,a=o.options.anchor,s=e(a).offset(),l=parseInt(t.arrow.css("border-top-width"),10),c=e(o.element).offset(),d=D[o.flipped?T[n]:n],u=s[r]-c[r]+e(a)[i.size]()/2-l;t.arrow.removeClass("k-callout-n k-callout-s k-callout-w k-callout-e").addClass("k-callout-"+d).css(r,u)},target:function(){return this.popup?this.popup.options.anchor:null},destroy:function(){var e=this.popup;e&&(e.element.off(C),e.destroy()),this.element.off(C),h.off("keydown"+C,this._documentKeyDownHandler),a.fn.destroy.call(this)}});o.ui.plugin(M)}(window.kendo.jQuery),function(e,t){function n(t,i){var r,o=!1;return t.filters&&(r=e.grep(t.filters,function(e){return o=n(e,i),e.filters?e.filters.length:e.field!=i}),o||t.filters.length===r.length||(o=!0),t.filters=r),o}var i=window.kendo,r=i.ui,o=r.Widget,a=i.keys,s=i.support,l=i.htmlEncode,c=i._activeElement,d="id",u="li",h="change",p="k-state-focused",f="k-state-hover",g="k-loading",m="open",v="close",_="select",y="selected",w="progress",b="requestEnd",k="width",x=e.extend,C=e.proxy,S=s.browser,T=S.msie&&9>S.version,D=/"/g,A={ComboBox:"DropDownList",DropDownList:"ComboBox"},E=i.ui.DataBoundWidget.extend({init:function(t,n){var i,r=this,a=r.ns;o.fn.init.call(r,t,n),t=r.element,r._isSelect=t.is(_),r._template(),r.ul=e('<ul unselectable="on" class="k-list k-reset"/>').css({overflow:s.kineticScrollNeeded?"":"auto"}).on("mouseenter"+a,u,function(){e(this).addClass(f)}).on("mouseleave"+a,u,function(){e(this).removeClass(f)}).on("click"+a,u,C(r._click,r)).attr({tabIndex:-1,role:"listbox","aria-hidden":!0}),r.list=e("<div class='k-list-container'/>").append(r.ul).on("mousedown"+a,C(r._listMousedown,r)),i=t.attr(d),i&&(r.list.attr(d,i+"-list"),r.ul.attr(d,i+"_listbox"),r._optionID=i+"_option_selected"),r._header(),r._accessors(),r._initValue()},options:{valuePrimitive:!1,headerTemplate:""},setOptions:function(e){o.fn.setOptions.call(this,e),e&&e.enable!==t&&(e.enabled=e.enable)},focus:function(){this._focused.focus()},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},_listMousedown:function(e){this.filterInput&&this.filterInput[0]===e.target||e.preventDefault()},_filterSource:function(e,t){var i=this,r=i.options,o=i.dataSource,a=x({},o.filter()||{}),s=n(a,r.dataTextField);(e||s)&&i.trigger("filtering",{filter:e})||(e&&(a=a.filters||[],a.push(e)),t?o.read(a):o.filter(a))},_header:function(){var t,n=this,i=n.options.headerTemplate;e.isFunction(i)&&(i=i({})),i&&(n.list.prepend(i),t=n.ul.prev(),n.header=t[0]?t:null,n.header&&n.angular("compile",function(){return{elements:n.header}}))},_initValue:function(){var e=this,t=e.options.value;null!==t?e.element.val(t):(t=e._accessor(),e.options.value=t),e._old=t},_ignoreCase:function(){var e,t=this,n=t.dataSource.reader.model;n&&n.fields&&(e=n.fields[t.options.dataTextField],e&&e.type&&"string"!==e.type&&(t.options.ignoreCase=!1))},items:function(){return this.ul[0].children},current:function(e){var n=this,i=n._focused.add(n.filterInput),r=n._optionID;return e===t?n._current:(n._current&&(n._current.removeClass(p).removeAttr("aria-selected").removeAttr(d),i.removeAttr("aria-activedescendant")),e&&(e.addClass(p),n._scroll(e),r&&(e.attr("id",r),i.attr("aria-activedescendant",r))),n._current=e,t)},destroy:function(){var e=this,t=e.ns;o.fn.destroy.call(e),e._unbindDataSource(),e.ul.off(t),e.list.off(t),e._touchScroller&&e._touchScroller.destroy(),e.popup.destroy(),e._form&&e._form.off("reset",e._resetHandler)},dataItem:function(n){var i=this;return n===t?n=i.selectedIndex:"number"!=typeof n&&(n=e(i.items()).index(n)),i._data()[n]},_accessors:function(){var e=this,t=e.element,n=e.options,r=i.getter,o=t.attr(i.attr("text-field")),a=t.attr(i.attr("value-field"));!n.dataTextField&&o&&(n.dataTextField=o),!n.dataValueField&&a&&(n.dataValueField=a),e._text=r(n.dataTextField),e._value=r(n.dataValueField)},_aria:function(e){var n=this,i=n.options,r=n._focused.add(n.filterInput);i.suggest!==t&&r.attr("aria-autocomplete",i.suggest?"both":"list"),e=e?e+" "+n.ul[0].id:n.ul[0].id,r.attr("aria-owns",e),n.ul.attr("aria-live",i.filter&&"none"!==i.filter?"polite":"off")},_blur:function(){var e=this;e._change(),e.close()},_change:function(){var e,n=this,i=n.selectedIndex,r=n.options.value,o=n.value();n._isSelect&&!n._bound&&r&&(o=r),o!==n._old?e=!0:i!==t&&i!==n._oldIndex&&(e=!0),e&&(n._old=o,n._oldIndex=i,n.element.trigger(h),n.trigger(h))},_click:function(t){t.isDefaultPrevented()||this._accept(e(t.currentTarget))},_data:function(){return this.dataSource.view()},_enable:function(){var e=this,n=e.options,i=e.element.is("[disabled]");n.enable!==t&&(n.enabled=n.enable),!n.enabled||i?e.enable(!1):e.readonly(e.element.is("[readonly]"))},_focus:function(e){var n=this,i=!0;return n.popup.visible()&&e&&n.trigger(_,{item:e})?(n.close(),t):(n._select(e),n._triggerCascade(i),n._blur(),t)},_index:function(e){var t,n,i=this,r=i._data();for(t=0,n=r.length;n>t;t++)if(i._dataValue(r[t])==e)return t;return-1},_dataValue:function(e){var n=this._value(e);return n===t&&(n=this._text(e)),n},_height:function(e){if(e){var t,n,i=this,r=i.list,o=i.options.height,a=i.popup.visible();n=r.add(r.parent(".k-animation-container")).show(),o=i.ul[0].scrollHeight>o?o:"auto",n.height(o),"auto"!==o&&(t=i.ul[0].offsetTop,t&&(o=r.height()-t)),i.ul.height(o),a||n.hide()}},_adjustListWidth:function(){var e,t,n=this.list,i=n[0].style.width,r=this.wrapper;if(n.data(k)||!i)return e=window.getComputedStyle?window.getComputedStyle(r[0],null):0,t=e?parseFloat(e.width):r.outerWidth(),e&&S.msie&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),i="border-box"!==n.css("box-sizing")?t-(n.outerWidth()-n.width()):t,n.css({fontFamily:r.css("font-family"),width:i}).data(k,i),!0},_openHandler:function(e){this._adjustListWidth(),this.trigger(m)?e.preventDefault():(this._focused.attr("aria-expanded",!0),this.ul.attr("aria-hidden",!1))},_closeHandler:function(e){this.trigger(v)?e.preventDefault():(this._focused.attr("aria-expanded",!1),this.ul.attr("aria-hidden",!0))},_firstOpen:function(){this._height(this._data().length)},_popup:function(){var e=this;e.popup=new r.Popup(e.list,x({},e.options.popup,{anchor:e.wrapper,open:C(e._openHandler,e),close:C(e._closeHandler,e),animation:e.options.animation,isRtl:s.isRtl(e.wrapper)})),e.popup.one(m,C(e._firstOpen,e)),e._touchScroller=i.touchScroller(e.popup.element)},_makeUnselectable:function(){T&&this.list.find("*").not(".k-textbox").attr("unselectable","on")},_toggleHover:function(t){e(t.currentTarget).toggleClass(f,"mouseenter"===t.type)},_toggle:function(e,n){var i=this,r=s.touch&&s.MSPointers&&s.pointers;e=e!==t?e:!i.popup.visible(),n||r||i._focused[0]===c()||i._focused.focus(),i[e?m:v]()},_scroll:function(e){if(e){e[0]&&(e=e[0]);var t,n,i=this.ul[0],r=e.offsetTop,o=e.offsetHeight,a=i.scrollTop,s=i.clientHeight,l=r+o,c=this._touchScroller;c?(t=c.dimensions.y,t.enabled&&r>t.size&&(r=r-t.size+o+4,c.scrollTo(0,-r))):(n=this.header?this.header.outerHeight():0,n+=this.filterInput?this.filterInput.outerHeight():0,i.scrollTop=a>r?r-n:l>a+s?l-s-n:a)}},_template:function(){var e=this,t=e.options,n=t.template,r=t.dataSource;e._isSelect&&e.element[0].length&&(r||(t.dataTextField=t.dataTextField||"text",t.dataValueField=t.dataValueField||"value")),n?(n=i.template(n),e.template=function(e){return'<li tabindex="-1" role="option" unselectable="on" class="k-item">'+n(e)+"</li>"}):e.template=i.template('<li tabindex="-1" role="option" unselectable="on" class="k-item">${'+i.expr(t.dataTextField,"data")+"}</li>",{useWithBlock:!1})},_triggerCascade:function(e){var t=this,n=t.value();(!t._bound&&n||t._old!==n)&&t.trigger("cascade",{userTriggered:e})},_unbindDataSource:function(){var e=this;e.dataSource.unbind(h,e._refreshHandler).unbind(w,e._progressHandler).unbind(b,e._requestEndHandler).unbind("error",e._errorHandler)}});x(E,{inArray:function(e,t){var n,i,r=t.children;if(!e||e.parentNode!==t)return-1;for(n=0,i=r.length;i>n;n++)if(e===r[n])return n;return-1}}),i.ui.List=E,r.Select=E.extend({init:function(e,t){E.fn.init.call(this,e,t),this._initial=this.element.val()},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this._bound=!1,this.options.autoBind&&this.dataSource.fetch()},close:function(){this.popup.close()},select:function(e){var n=this;return e===t?n.selectedIndex:(n._select(e),n._triggerCascade(),n._old=n._accessor(),n._oldIndex=n.selectedIndex,t)},search:function(e){var t,n,i,r,o,a;e="string"==typeof e?e:this.text(),t=this,n=e.length,i=t.options,r=i.ignoreCase,o=i.filter,a=i.dataTextField,clearTimeout(t._typing),(!n||n>=i.minLength)&&(t._state="filter","none"===o?t._filter(e):(t._open=!0,t._filterSource({value:r?e.toLowerCase():e,field:a,operator:o,ignoreCase:r})))},_accessor:function(e,n){var i,r=this.element[0],o=this._isSelect,a=r.selectedIndex;return e===t?(o?a>-1&&(i=r.options[a],i&&(e=i.value)):e=r.value,e):(o?(a>-1&&r.options[a].removeAttribute(y),r.selectedIndex=n,i=r.options[n],i&&i.setAttribute(y,y)):r.value=e,t)},_hideBusy:function(){var e=this;clearTimeout(e._busy),e._arrow.removeClass(g),e._focused.attr("aria-busy",!1),e._busy=null},_showBusy:function(){var e=this;e._request=!0,e._busy||(e._busy=setTimeout(function(){e._arrow&&(e._focused.attr("aria-busy",!0),e._arrow.addClass(g))},100))},_requestEnd:function(){this._request=!1},_dataSource:function(){var t,n=this,r=n.element,o=n.options,a=o.dataSource||{};a=e.isArray(a)?{data:a}:a,n._isSelect&&(t=r[0].selectedIndex,t>-1&&(o.index=t),a.select=r,a.fields=[{field:o.dataTextField},{field:o.dataValueField}]),n.dataSource&&n._refreshHandler?n._unbindDataSource():(n._refreshHandler=C(n.refresh,n),n._progressHandler=C(n._showBusy,n),n._requestEndHandler=C(n._requestEnd,n),n._errorHandler=C(n._hideBusy,n)),n.dataSource=i.data.DataSource.create(a).bind(h,n._refreshHandler).bind(w,n._progressHandler).bind(b,n._requestEndHandler).bind("error",n._errorHandler)},_get:function(t){var n,i,r=this,o=r._data();if("function"==typeof t)for(n=0,i=o.length;i>n;n++)if(t(o[n])){t=n;break}if("number"==typeof t){if(0>t)return e();t=e(r.ul[0].children[t])}return t&&t.nodeType&&(t=e(t)),t},_move:function(e){var t,n,i=this,r=e.keyCode,o=i.ul[0],s=i.popup.visible()?"_select":"_accept",l=i._current,c=r===a.DOWN;if(r===a.UP||c){if(e.altKey)i.toggle(c);else{if(t=o.firstChild,!t&&!i._accessor()&&"filter"!==i._state)return i._fetch||(i.dataSource.one(h,function(){i._move(e),i._fetch=!1}),i._fetch=!0,i._filterSource()),e.preventDefault(),!0;c?(!l||-1===i.selectedIndex&&!i.value()&&l[0]===t?l=t:(l=l[0].nextSibling,l||t!==o.lastChild||(l=t)),i[s](l)):(l=l?l[0].previousSibling:o.lastChild,l||t!==o.lastChild||(l=t),i[s](l))}e.preventDefault(),n=!0}else r===a.ENTER||r===a.TAB?(i.popup.visible()&&e.preventDefault(),i.popup.visible()||l&&l.hasClass("k-state-selected")||(l=null),i._accept(l,r),n=!0):r===a.ESC&&(i.popup.visible()&&e.preventDefault(),i.close(),n=!0);return n},_selectItem:function(){var e,n,i=this,r=i._bound===t,o=i.options;e=i._isSelect&&!i._initial&&!o.value&&o.index&&!i._bound,e||(n=i._selectedValue||r&&o.value||i._accessor()),n?i.value(n):r&&i.select(o.index)},_fetchItems:function(e){var n=this,i=n.ul[0].firstChild;return n._request?!0:n._bound||n._fetch||i?t:n.options.cascadeFrom?!i:(n.dataSource.one(h,function(){n._old=t,n.value(e),n._fetch=!1}),n._fetch=!0,n.dataSource.fetch(),!0)},_options:function(e,n){var i,r,o,a,s=this,c=s.element,d=e.length,u="",h=0;for(n&&(h=1,u=n);d>h;h++)i="<option",r=e[h],o=s._text(r),a=s._value(r),a!==t&&(a+="",-1!==a.indexOf('"')&&(a=a.replace(D,"&quot;")),i+=' value="'+a+'"'),i+=">",o!==t&&(i+=l(o)),i+="</option>",u+=i;c.html(u)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(t._initial)})},t._form=r.on("reset",t._resetHandler))},_cascade:function(){var t,i,r,o,a,s=this,l=s.options,c=l.cascadeFrom;if(c){if(s._selectedValue=l.value||s._accessor(),i=e("#"+c),t=i.data("kendo"+l.name),t||(t=i.data("kendo"+A[l.name])),!t)return;l.autoBind=!1,o=l.cascadeFromField||t.options.dataValueField,a=function(){s.dataSource.unbind(h,a);var e=s._selectedValue||s.value();s._userTriggered?s._clearSelection(t,!0):e?(s.value(e),s.dataSource.view()[0]&&-1!==s.selectedIndex||s._clearSelection(t,!0)):s.select(l.index),s.enable(),s._triggerCascade(s._userTriggered),s._userTriggered=!1},r=function(){var e,i,r,l=t.dataItem(),c=l?t._value(l):null;c||0===c?(e=s.dataSource.filter()||{},n(e,o),i=e.filters||[],i.push({field:o,operator:"eq",value:c}),r=function(){s.unbind("dataBound",r),a.apply(s,arguments)},s.first("dataBound",r),s.dataSource.filter(i)):(s.enable(!1),s._clearSelection(t),s._triggerCascade(s._userTriggered),s._userTriggered=!1)},t.first("cascade",function(e){s._userTriggered=e.userTriggered,r()}),t._bound?r():t.value()||s.enable(!1)}}})}(window.kendo.jQuery),function(e,t){function n(e,t,n,i){var r,o=e.getFullYear(),a=t.getFullYear(),s=n.getFullYear();return o-=o%i,r=o+(i-1),a>o&&(o=a),r>s&&(r=s),o+"-"+r}function i(e){for(var t,n=0,i=e.min,r=e.max,o=e.start,a=e.setter,l=e.build,c=e.cells||12,d=e.perRow||4,u=e.content||P,h=e.empty||I,p=e.html||'<table tabindex="0" role="grid" class="k-content k-meta-view" cellspacing="0"><tbody><tr role="row">';c>n;n++)n>0&&n%d===0&&(p+='</tr><tr role="row">'),t=l(o,n),p+=s(o,i,r)?u(t):h(t),a(o,1);return p+"</tr></tbody></table>"}function r(e,t,n){var i=e.getFullYear(),r=t.getFullYear(),o=r,a=0;return n&&(r-=r%n,o=r-r%n+n-1),i>o?a=1:r>i&&(a=-1),a}function o(){var e=new ft;return new ft(e.getFullYear(),e.getMonth(),e.getDate())}function a(e,t,n){var i=o();return e&&(i=new ft(+e)),t>i?i=new ft(+t):i>n&&(i=new ft(+n)),i}function s(e,t,n){return+e>=+t&&+n>=+e}function l(e,t){return e.slice(t).concat(e.slice(0,t))}function c(e,t,n){t=t instanceof ft?t.getFullYear():e.getFullYear()+n*t,e.setFullYear(t)}function d(t){e(this).toggleClass($,it.indexOf(t.type)>-1||t.type==tt)}function u(e){e.preventDefault()}function h(e){return A(e).calendars.standard}function p(e){var n=gt[e.start],i=gt[e.depth],r=A(e.culture);e.format=T(e.format||r.calendars.standard.patterns.d),isNaN(n)&&(n=0,e.start=U),(i===t||i>n)&&(e.depth=U),e.dates||(e.dates=[])}function f(e){F&&e.find("*").attr("unselectable","on")}function g(e,t){for(var n=0,i=t.length;i>n;n++)if(e===+t[n])return!0;return!1}function m(e,t){return e?e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate():!1}function v(e,t){return e?e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth():!1}var _,y=window.kendo,w=y.support,b=y.ui,k=b.Widget,x=y.keys,C=y.parseDate,S=y.date.adjustDST,T=y._extractFormat,D=y.template,A=y.getCulture,E=y.support.transitions,M=E?E.css+"transform-origin":"",P=D('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link" href="\\#" data-#=data.ns#value="#=data.dateString#">#=data.value#</a></td>',{useWithBlock:!1}),I=D('<td role="gridcell">&nbsp;</td>',{useWithBlock:!1}),z=y.support.browser,F=z.msie&&9>z.version,R=".kendoCalendar",B="click"+R,L="keydown"+R,O="id",H="min",N="left",V="slideIn",U="month",W="century",j="change",G="navigate",q="value",$="k-state-hover",Y="k-state-disabled",K="k-state-focused",Q="k-other-month",X=' class="'+Q+'"',J="k-nav-today",Z="td:has(.k-link)",et="blur"+R,tt="focus",nt=tt+R,it=w.touch?"touchstart":"mouseenter",rt=w.touch?"touchstart"+R:"mouseenter"+R,ot=w.touch?"touchend"+R+" touchmove"+R:"mouseleave"+R,at=6e4,st=864e5,lt="_prevArrow",ct="_nextArrow",dt="aria-disabled",ut="aria-selected",ht=e.proxy,pt=e.extend,ft=Date,gt={month:0,year:1,decade:2,century:3},mt=k.extend({init:function(t,n){var i,r,o=this;k.fn.init.call(o,t,n),t=o.wrapper=o.element,n=o.options,n.url=window.unescape(n.url),o._templates(),o._header(),o._footer(o.footer),r=t.addClass("k-widget k-calendar").on(rt+" "+ot,Z,d).on(L,"table.k-content",ht(o._move,o)).on(B,Z,function(t){var n=t.currentTarget.firstChild;-1!=n.href.indexOf("#")&&t.preventDefault(),o._click(e(n))}).on("mouseup"+R,"table.k-content, .k-footer",function(){o._focusView(o.options.focusOnNav!==!1)}).attr(O),r&&(o._cellID=r+"_cell_selected"),p(n),i=C(n.value,n.format,n.culture),o._index=gt[n.start],o._current=new ft(+a(i,n.min,n.max)),o._addClassProxy=function(){o._active=!0,o._cell.addClass(K)},o._removeClassProxy=function(){o._active=!1,o._cell.removeClass(K)},o.value(i),y.notify(o)},options:{name:"Calendar",value:null,min:new ft(1900,0,1),max:new ft(2099,11,31),dates:[],url:"",culture:"",footer:"",format:"",month:{},start:U,depth:U,animation:{horizontal:{effects:V,reverse:!0,duration:500,divisor:2},vertical:{effects:"zoomIn",duration:400}}},events:[j,G],setOptions:function(e){var t=this;p(e),e.dates[0]||(e.dates=t.options.dates),k.fn.setOptions.call(t,e),t._templates(),t._footer(t.footer),t._index=gt[t.options.start],t.navigate()},destroy:function(){var e=this,t=e._today;e.element.off(R),e._title.off(R),e[lt].off(R),e[ct].off(R),y.destroy(e._table),t&&y.destroy(t.off(R)),k.fn.destroy.call(e)},current:function(){return this._current},view:function(){return this._view},focus:function(e){e=e||this._table,this._bindTable(e),e.focus()},min:function(e){return this._option(H,e)},max:function(e){return this._option("max",e)},navigateToPast:function(){this._navigate(lt,-1)},navigateToFuture:function(){this._navigate(ct,1)},navigateUp:function(){var e=this,t=e._index;e._title.hasClass(Y)||e.navigate(e._current,++t)},navigateDown:function(e){var n=this,i=n._index,r=n.options.depth;if(e)return i===gt[r]?(+n._value!=+e&&(n.value(e),n.trigger(j)),t):(n.navigate(e,--i),t)},navigate:function(n,i){i=isNaN(i)?gt[i]:i;var r,o,s,l,c=this,d=c.options,u=d.culture,h=d.min,p=d.max,g=c._title,m=c._table,v=c._oldTable,y=c._value,w=c._current,b=n&&+n>+w,k=i!==t&&i!==c._index;n||(n=w),c._current=n=new ft(+a(n,h,p)),i===t?i=c._index:c._index=i,c._view=o=_.views[i],s=o.compare,l=i===gt[W],g.toggleClass(Y,l).attr(dt,l),l=s(n,h)<1,c[lt].toggleClass(Y,l).attr(dt,l),l=s(n,p)>-1,c[ct].toggleClass(Y,l).attr(dt,l),m&&v&&v.data("animating")&&(v.kendoStop(!0,!0),m.kendoStop(!0,!0)),c._oldTable=m,(!m||c._changeView)&&(g.html(o.title(n,h,p,u)),c._table=r=e(o.content(pt({min:h,max:p,date:n,url:d.url,dates:d.dates,format:d.format,culture:u},c[o.name]))),f(r),c._animate({from:m,to:r,vertical:k,future:b}),c._focus(n),c.trigger(G)),i===gt[d.depth]&&y&&c._class("k-state-selected",o.toDateString(y)),c._class(K,o.toDateString(n)),!m&&c._cell&&c._cell.removeClass(K),c._changeView=!0},value:function(e){var n=this,i=n._view,r=n.options,o=n._view,a=r.min,l=r.max;return e===t?n._value:(e=C(e,r.format,r.culture),null!==e&&(e=new ft(+e),s(e,a,l)||(e=null)),n._value=e,o&&null===e&&n._cell?n._cell.removeClass("k-state-selected"):(n._changeView=!e||i&&0!==i.compare(e,n._current),n.navigate(e)),t)},_move:function(t){var n,i,r,o,s=this,l=s.options,c=t.keyCode,d=s._view,u=s._index,h=new ft(+s._current),p=y.support.isRtl(s.wrapper);return t.target===s._table[0]&&(s._active=!0),t.ctrlKey?c==x.RIGHT&&!p||c==x.LEFT&&p?(s.navigateToFuture(),i=!0):c==x.LEFT&&!p||c==x.RIGHT&&p?(s.navigateToPast(),i=!0):c==x.UP?(s.navigateUp(),i=!0):c==x.DOWN&&(s._click(e(s._cell[0].firstChild)),i=!0):(c==x.RIGHT&&!p||c==x.LEFT&&p?(n=1,i=!0):c==x.LEFT&&!p||c==x.RIGHT&&p?(n=-1,i=!0):c==x.UP?(n=0===u?-7:-4,i=!0):c==x.DOWN?(n=0===u?7:4,i=!0):c==x.ENTER?(s._click(e(s._cell[0].firstChild)),i=!0):c==x.HOME||c==x.END?(r=c==x.HOME?"first":"last",o=d[r](h),h=new ft(o.getFullYear(),o.getMonth(),o.getDate(),h.getHours(),h.getMinutes(),h.getSeconds(),h.getMilliseconds()),i=!0):c==x.PAGEUP?(i=!0,s.navigateToPast()):c==x.PAGEDOWN&&(i=!0,s.navigateToFuture()),(n||r)&&(r||d.setDate(h,n),s._focus(a(h,l.min,l.max)))),i&&t.preventDefault(),s._current},_animate:function(e){var t=this,n=e.from,i=e.to,r=t._active;n?n.parent().data("animating")?(n.off(R),n.parent().kendoStop(!0,!0).remove(),n.remove(),i.insertAfter(t.element[0].firstChild),t._focusView(r)):n.is(":visible")&&t.options.animation!==!1?t[e.vertical?"_vertical":"_horizontal"](n,i,e.future):(i.insertAfter(n),n.off(R).remove(),t._focusView(r)):(i.insertAfter(t.element[0].firstChild),t._bindTable(i))},_horizontal:function(e,t,n){var i=this,r=i._active,o=i.options.animation.horizontal,a=o.effects,s=e.outerWidth();a&&-1!=a.indexOf(V)&&(e.add(t).css({width:s}),e.wrap("<div/>"),i._focusView(r,e),e.parent().css({position:"relative",width:2*s,"float":N,"margin-left":n?0:-s}),t[n?"insertAfter":"insertBefore"](e),pt(o,{effects:V+":"+(n?"right":N),complete:function(){e.off(R).remove(),i._oldTable=null,t.unwrap(),i._focusView(r)}}),e.parent().kendoStop(!0,!0).kendoAnimate(o))},_vertical:function(e,t){var n,i,r=this,o=r.options.animation.vertical,a=o.effects,s=r._active;a&&-1!=a.indexOf("zoom")&&(t.css({position:"absolute",top:e.prev().outerHeight(),left:0}).insertBefore(e),M&&(n=r._cellByDate(r._view.toDateString(r._current)),i=n.position(),i=i.left+parseInt(n.width()/2,10)+"px "+(i.top+parseInt(n.height()/2,10)+"px"),t.css(M,i)),e.kendoStop(!0,!0).kendoAnimate({effects:"fadeOut",duration:600,complete:function(){e.off(R).remove(),r._oldTable=null,t.css({position:"static",top:0,left:0}),r._focusView(s)}}),t.kendoStop(!0,!0).kendoAnimate(o))},_cellByDate:function(t){return this._table.find("td:not(."+Q+")").filter(function(){return e(this.firstChild).attr(y.attr(q))===t})},_class:function(t,n){var i=this,r=i._cellID,o=i._cell;
o&&o.removeAttr(ut).removeAttr("aria-label").removeAttr(O),o=i._table.find("td:not(."+Q+")").removeClass(t).filter(function(){return e(this.firstChild).attr(y.attr(q))===n}).attr(ut,!0),t!==K||i._active||i.options.focusOnNav===!1||(t=""),o.addClass(t),o[0]&&(i._cell=o),r&&(o.attr(O,r),i._table.removeAttr("aria-activedescendant").attr("aria-activedescendant",r))},_bindTable:function(e){e.on(nt,this._addClassProxy).on(et,this._removeClassProxy)},_click:function(e){var t=this,n=t.options,i=new Date(+t._current),r=e.attr(y.attr(q)).split("/");r=new ft(r[0],r[1],r[2]),S(r,0),t._view.setDate(i,r),t.navigateDown(a(i,n.min,n.max))},_focus:function(e){var t=this,n=t._view;0!==n.compare(e,t._current)?t.navigate(e):(t._current=e,t._class(K,n.toDateString(e)))},_focusView:function(e,t){e&&this.focus(t)},_footer:function(n){var i=this,r=o(),a=i.element,s=a.find(".k-footer");return n?(s[0]||(s=e('<div class="k-footer"><a href="#" class="k-link k-nav-today"></a></div>').appendTo(a)),i._today=s.show().find(".k-link").html(n(r)).attr("title",y.toString(r,"D",i.options.culture)),i._toggle(),t):(i._toggle(!1),s.hide(),t)},_header:function(){var e,t=this,n=t.element;n.find(".k-header")[0]||n.html('<div class="k-header"><a href="#" role="button" class="k-link k-nav-prev"><span class="k-icon k-i-arrow-w"></span></a><a href="#" role="button" aria-live="assertive" aria-atomic="true" class="k-link k-nav-fast"></a><a href="#" role="button" class="k-link k-nav-next"><span class="k-icon k-i-arrow-e"></span></a></div>'),e=n.find(".k-link").on(rt+" "+ot+" "+nt+" "+et,d).click(!1),t._title=e.eq(1).on(B,function(){t._active=t.options.focusOnNav!==!1,t.navigateUp()}),t[lt]=e.eq(0).on(B,function(){t._active=t.options.focusOnNav!==!1,t.navigateToPast()}),t[ct]=e.eq(2).on(B,function(){t._active=t.options.focusOnNav!==!1,t.navigateToFuture()})},_navigate:function(e,t){var n=this,i=n._index+1,r=new ft(+n._current);e=n[e],e.hasClass(Y)||(i>3?r.setFullYear(r.getFullYear()+100*t):_.views[i].setDate(r,t),n.navigate(r))},_option:function(e,n){var i,r=this,o=r.options,a=r._value||r._current;return n===t?o[e]:(n=C(n,o.format,o.culture),n&&(o[e]=new ft(+n),i=e===H?n>a:a>n,(i||v(a,n))&&(i&&(r._value=null),r._changeView=!0),r._changeView||(r._changeView=!(!o.month.content&&!o.month.empty)),r.navigate(r._value),r._toggle()),t)},_toggle:function(e){var n=this,i=n.options,r=n._today;e===t&&(e=s(o(),i.min,i.max)),r&&(r.off(B),e?r.addClass(J).removeClass(Y).on(B,ht(n._todayClick,n)):r.removeClass(J).addClass(Y).on(B,u))},_todayClick:function(e){var t=this,n=gt[t.options.depth],i=o();e.preventDefault(),0===t._view.compare(t._current,i)&&t._index==n&&(t._changeView=!1),t._value=i,t.navigate(i,n),t.trigger(j)},_templates:function(){var e=this,t=e.options,n=t.footer,i=t.month,r=i.content,o=i.empty;e.month={content:D('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link#=data.linkClass#" href="#=data.url#" '+y.attr("value")+'="#=data.dateString#" title="#=data.title#">'+(r||"#=data.value#")+"</a></td>",{useWithBlock:!!r}),empty:D('<td role="gridcell">'+(o||"&nbsp;")+"</td>",{useWithBlock:!!o})},e.footer=n!==!1?D(n||'#= kendo.toString(data,"D","'+t.culture+'") #',{useWithBlock:!1}):null}});b.plugin(mt),_={firstDayOfMonth:function(e){return new ft(e.getFullYear(),e.getMonth(),1)},firstVisibleDay:function(e,t){t=t||y.culture().calendar;for(var n=t.firstDay,i=new ft(e.getFullYear(),e.getMonth(),0,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());i.getDay()!=n;)_.setTime(i,-1*st);return i},setTime:function(e,t){var n=e.getTimezoneOffset(),i=new ft(e.getTime()+t),r=i.getTimezoneOffset()-n;e.setTime(i.getTime()+r*at)},views:[{name:U,title:function(e,t,n,i){return h(i).months.names[e.getMonth()]+" "+e.getFullYear()},content:function(e){for(var t=this,n=0,r=e.min,o=e.max,a=e.date,s=e.dates,c=e.format,d=e.culture,u=e.url,p=u&&s[0],f=h(d),m=f.firstDay,v=f.days,w=l(v.names,m),b=l(v.namesShort,m),k=_.firstVisibleDay(a,f),x=t.first(a),C=t.last(a),T=t.toDateString,D=new ft,A='<table tabindex="0" role="grid" class="k-content" cellspacing="0"><thead><tr role="row">';7>n;n++)A+='<th scope="col" title="'+w[n]+'">'+b[n]+"</th>";return D=new ft(D.getFullYear(),D.getMonth(),D.getDate()),S(D,0),D=+D,i({cells:42,perRow:7,html:A+='</tr></thead><tbody><tr role="row">',start:new ft(k.getFullYear(),k.getMonth(),k.getDate()),min:new ft(r.getFullYear(),r.getMonth(),r.getDate()),max:new ft(o.getFullYear(),o.getMonth(),o.getDate()),content:e.content,empty:e.empty,setter:t.setDate,build:function(e){var t=[],n=e.getDay(),i="",r="#";return(x>e||e>C)&&t.push(Q),+e===D&&t.push("k-today"),(0===n||6===n)&&t.push("k-weekend"),p&&g(+e,s)&&(r=u.replace("{0}",y.toString(e,c,d)),i=" k-action-link"),{date:e,dates:s,ns:y.ns,title:y.toString(e,"D",d),value:e.getDate(),dateString:T(e),cssClass:t[0]?' class="'+t.join(" ")+'"':"",linkClass:i,url:r}}})},first:function(e){return _.firstDayOfMonth(e)},last:function(e){var t=new ft(e.getFullYear(),e.getMonth()+1,0),n=_.firstDayOfMonth(e),i=Math.abs(t.getTimezoneOffset()-n.getTimezoneOffset());return i&&t.setHours(n.getHours()+i/60),t},compare:function(e,t){var n,i=e.getMonth(),r=e.getFullYear(),o=t.getMonth(),a=t.getFullYear();return n=r>a?1:a>r?-1:i==o?0:i>o?1:-1},setDate:function(e,t){var n=e.getHours();t instanceof ft?e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()):_.setTime(e,t*st),S(e,n)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/"+e.getDate()}},{name:"year",title:function(e){return e.getFullYear()},content:function(e){var t=h(e.culture).months.namesAbbr,n=this.toDateString,r=e.min,o=e.max;return i({min:new ft(r.getFullYear(),r.getMonth(),1),max:new ft(o.getFullYear(),o.getMonth(),1),start:new ft(e.date.getFullYear(),0,1),setter:this.setDate,build:function(e){return{value:t[e.getMonth()],ns:y.ns,dateString:n(e),cssClass:""}}})},first:function(e){return new ft(e.getFullYear(),0,e.getDate())},last:function(e){return new ft(e.getFullYear(),11,e.getDate())},compare:function(e,t){return r(e,t)},setDate:function(e,t){var n,i=e.getHours();t instanceof ft?(n=t.getMonth(),e.setFullYear(t.getFullYear(),n,e.getDate()),n!==e.getMonth()&&e.setDate(0)):(n=e.getMonth()+t,e.setMonth(n),n>11&&(n-=12),n>0&&e.getMonth()!=n&&e.setDate(0)),S(e,i)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/1"}},{name:"decade",title:function(e,t,i){return n(e,t,i,10)},content:function(e){var t=e.date.getFullYear(),n=this.toDateString;return i({start:new ft(t-t%10-1,0,1),min:new ft(e.min.getFullYear(),0,1),max:new ft(e.max.getFullYear(),0,1),setter:this.setDate,build:function(e,t){return{value:e.getFullYear(),ns:y.ns,dateString:n(e),cssClass:0===t||11==t?X:""}}})},first:function(e){var t=e.getFullYear();return new ft(t-t%10,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return new ft(t-t%10+9,e.getMonth(),e.getDate())},compare:function(e,t){return r(e,t,10)},setDate:function(e,t){c(e,t,1)},toDateString:function(e){return e.getFullYear()+"/0/1"}},{name:W,title:function(e,t,i){return n(e,t,i,100)},content:function(e){var t=e.date.getFullYear(),n=e.min.getFullYear(),r=e.max.getFullYear(),o=this.toDateString,a=n,s=r;return a-=a%10,s-=s%10,10>s-a&&(s=a+9),i({start:new ft(t-t%100-10,0,1),min:new ft(a,0,1),max:new ft(s,0,1),setter:this.setDate,build:function(e,t){var i=e.getFullYear(),a=i+9;return n>i&&(i=n),a>r&&(a=r),{ns:y.ns,value:i+" - "+a,dateString:o(e),cssClass:0===t||11==t?X:""}}})},first:function(e){var t=e.getFullYear();return new ft(t-t%100,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return new ft(t-t%100+99,e.getMonth(),e.getDate())},compare:function(e,t){return r(e,t,100)},setDate:function(e,t){c(e,t,10)},toDateString:function(e){var t=e.getFullYear();return t-t%10+"/0/1"}}]},_.isEqualDatePart=m,_.makeUnselectable=f,_.restrictValue=a,_.isInRange=s,_.normalize=p,_.viewsEnum=gt,y.calendar=_}(window.kendo.jQuery),function(e,t){function n(t){var n=t.parseFormats,i=t.format;B.normalize(t),n=e.isArray(n)?n:[n],-1===e.inArray(i,n)&&n.splice(0,0,t.format),t.parseFormats=n}function i(e){e.preventDefault()}var r,o=window.kendo,a=o.ui,s=a.Widget,l=o.parseDate,c=o.keys,d=o.template,u=o._activeElement,h="<div />",p="<span />",f=".kendoDatePicker",g="click"+f,m="open",v="close",_="change",y="disabled",w="readonly",b="k-state-default",k="k-state-focused",x="k-state-selected",C="k-state-disabled",S="k-state-hover",T="mouseenter"+f+" mouseleave"+f,D="mousedown"+f,A="id",E="min",M="max",P="month",I="aria-disabled",z="aria-expanded",F="aria-hidden",R="aria-readonly",B=o.calendar,L=B.isInRange,O=B.restrictValue,H=B.isEqualDatePart,N=e.extend,V=e.proxy,U=Date,W=function(t){var n,i=this,r=document.body,s=e(h).attr(F,"true").addClass("k-calendar-container").appendTo(r);i.options=t=t||{},n=t.id,n&&(n+="_dateview",s.attr(A,n),i._dateViewID=n),i.popup=new a.Popup(s,N(t.popup,t,{name:"Popup",isRtl:o.support.isRtl(t.anchor)})),i.div=s,i.value(t.value)};W.prototype={_calendar:function(){var t,n=this,r=n.calendar,s=n.options;r||(t=e(h).attr(A,o.guid()).appendTo(n.popup.element).on(D,i).on(g,"td:has(.k-link)",V(n._click,n)),n.calendar=r=new a.Calendar(t),n._setOptions(s),o.calendar.makeUnselectable(r.element),r.navigate(n._value||n._current,s.start),n.value(n._value))},_setOptions:function(e){this.calendar.setOptions({focusOnNav:!1,change:e.change,culture:e.culture,dates:e.dates,depth:e.depth,footer:e.footer,format:e.format,max:e.max,min:e.min,month:e.month,start:e.start})},setOptions:function(e){var t=this.options;this.options=N(t,e,{change:t.change,close:t.close,open:t.open}),this.calendar&&this._setOptions(this.options)},destroy:function(){this.popup.destroy()},open:function(){var e=this;e._calendar(),e.popup.open()},close:function(){this.popup.close()},min:function(e){this._option(E,e)},max:function(e){this._option(M,e)},toggle:function(){var e=this;e[e.popup.visible()?v:m]()},move:function(e){var n=this,i=e.keyCode,r=n.calendar,o=e.ctrlKey&&i==c.DOWN||i==c.ENTER;if(i==c.ESC)return n.close(),t;if(e.altKey)return i==c.DOWN?(n.open(),e.preventDefault()):i==c.UP&&(n.close(),e.preventDefault()),t;if(n.popup.visible())return o&&r._cell.hasClass(x)?(n.close(),e.preventDefault(),t):(n._current=r._move(e),t)},current:function(e){this._current=e,this.calendar._focus(e)},value:function(e){var t=this,n=t.calendar,i=t.options;t._value=e,t._current=new U(+O(e,i.min,i.max)),n&&n.value(e)},_click:function(e){-1!==e.currentTarget.className.indexOf(x)&&this.close()},_option:function(e,t){var n=this,i=n.calendar;n.options[e]=t,i&&i[e](t)}},W.normalize=n,o.DateView=W,r=s.extend({init:function(e,t){var i,r,a=this;s.fn.init.call(a,e,t),e=a.element,t=a.options,t.min=l(e.attr("min"))||l(t.min),t.max=l(e.attr("max"))||l(t.max),n(t),a._wrapper(),a.dateView=new W(N({},t,{id:e.attr(A),anchor:a.wrapper,change:function(){a._change(this.value()),a.close()},close:function(t){a.trigger(v)?t.preventDefault():(e.attr(z,!1),r.attr(F,!0))},open:function(t){var n,i=a.options;a.trigger(m)?t.preventDefault():(a.element.val()!==a._oldText&&(n=l(e.val(),i.parseFormats,i.culture),a.dateView[n?"current":"value"](n)),e.attr(z,!0),r.attr(F,!1),a._updateARIA(n))}})),r=a.dateView.div,a._icon();try{e[0].setAttribute("type","text")}catch(c){e[0].type="text"}e.addClass("k-input").attr({role:"combobox","aria-expanded":!1,"aria-owns":a.dateView._dateViewID}),a._reset(),a._template(),i=e.is("[disabled]"),i?a.enable(!1):a.readonly(e.is("[readonly]")),a._old=a._update(t.value||a.element.val()),a._oldText=e.val(),o.notify(a)},events:[m,v,_],options:{name:"DatePicker",value:null,footer:"",format:"",culture:"",parseFormats:[],min:new Date(1900,0,1),max:new Date(2099,11,31),start:P,depth:P,animation:{},month:{},dates:[],ARIATemplate:'Current focused date is #=kendo.toString(data.current, "D")#'},setOptions:function(e){var t=this,i=t._value;s.fn.setOptions.call(t,e),e=t.options,e.min=l(e.min),e.max=l(e.max),n(e),t.dateView.setOptions(e),i&&(t.element.val(o.toString(i,e.format,e.culture)),t._updateARIA(i))},_editable:function(e){var t=this,n=t._dateIcon.off(f),r=t.element.off(f),o=t._inputWrapper.off(f),a=e.readonly,s=e.disable;a||s?(o.addClass(s?C:b).removeClass(s?b:C),r.attr(y,s).attr(w,a).attr(I,s).attr(R,a)):(o.addClass(b).removeClass(C).on(T,t._toggleHover),r.removeAttr(y).removeAttr(w).attr(I,!1).attr(R,!1).on("keydown"+f,V(t._keydown,t)).on("focusout"+f,V(t._blur,t)).on("focus"+f,function(){t._inputWrapper.addClass(k)}),n.on(g,V(t._click,t)).on(D,i))},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},destroy:function(){var e=this;s.fn.destroy.call(e),e.dateView.destroy(),e.element.off(f),e._dateIcon.off(f),e._inputWrapper.off(f),e._form&&e._form.off("reset",e._resetHandler)},open:function(){this.dateView.open()},close:function(){this.dateView.close()},min:function(e){return this._option(E,e)},max:function(e){return this._option(M,e)},value:function(e){var n=this;return e===t?n._value:(n._old=n._update(e),null===n._old&&n.element.val(""),n._oldText=n.element.val(),t)},_toggleHover:function(t){e(t.currentTarget).toggleClass(S,"mouseenter"===t.type)},_blur:function(){var e=this,t=e.element.val();e.close(),t!==e._oldText&&e._change(t),e._inputWrapper.removeClass(k)},_click:function(){var e=this,t=e.element;e.dateView.toggle(),o.support.touch||t[0]===u()||t.focus()},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t.element.trigger(_),t.trigger(_))},_keydown:function(e){var t=this,n=t.dateView,i=t.element.val();n.popup.visible()||e.keyCode!=c.ENTER||i===t._oldText?(n.move(e),t._updateARIA(n._current)):t._change(i)},_icon:function(){var t,n=this,i=n.element;t=i.next("span.k-select"),t[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span></span>').insertAfter(i)),n._dateIcon=t.attr({role:"button","aria-controls":n.dateView._dateViewID})},_option:function(e,n){var i=this,r=i.options;return n===t?r[e]:(n=l(n,r.parseFormats,r.culture),n&&(r[e]=new U(+n),i.dateView[e](n)),t)},_update:function(e){var t,n=this,i=n.options,r=i.min,a=i.max,s=n._value,c=l(e,i.parseFormats,i.culture),d=null===c&&null===s||c instanceof Date&&s instanceof Date;return+c===+s&&d?(t=o.toString(c,i.format,i.culture),t!==e&&n.element.val(null===c?e:t),c):(null!==c&&H(c,r)?c=O(c,r,a):L(c,r,a)||(c=null),n._value=c,n.dateView.value(c),n.element.val(c?o.toString(c,i.format,i.culture):e),n._updateARIA(c),c)},_wrapper:function(){var t,n=this,i=n.element;t=i.parents(".k-datepicker"),t[0]||(t=i.wrap(p).parent().addClass("k-picker-wrap k-state-default"),t=t.wrap(p).parent()),t[0].style.cssText=i[0].style.cssText,i.css({width:"100%",height:i[0].style.height}),n.wrapper=t.addClass("k-widget k-datepicker k-header").addClass(i[0].className),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){t.value(n[0].defaultValue)},t._form=r.on("reset",t._resetHandler))},_template:function(){this._ariaTemplate=d(this.options.ARIATemplate)},_updateARIA:function(e){var t,n=this,i=n.dateView.calendar;n.element.removeAttr("aria-activedescendant"),i&&(t=i._cell,t.attr("aria-label",n._ariaTemplate({current:e||i.current()})),n.element.attr("aria-activedescendant",t.attr("id")))}}),a.plugin(r)}(window.kendo.jQuery),function(e,t){function n(e,t,n){return n?t.substring(0,e).split(n).length-1:0}function i(e,t,i){return t.split(i)[n(e,t,i)]}function r(e,t,i,r){var o=t.split(r);return o.splice(n(e,t,r),1,i),r&&""!==o[o.length-1]&&o.push(""),o.join(r)}var o=window.kendo,a=o.support,s=o.caret,l=o._activeElement,c=a.placeholder,d=o.ui,u=d.List,h=o.keys,p=o.data.DataSource,f="aria-disabled",g="aria-readonly",m="k-state-default",v="disabled",_="readonly",y="k-state-focused",w="k-state-selected",b="k-state-disabled",k="k-state-hover",x=".kendoAutoComplete",C="mouseenter"+x+" mouseleave"+x,S=e.proxy,T=u.extend({init:function(t,n){var i,r=this;r.ns=x,n=e.isArray(n)?{dataSource:n}:n,u.fn.init.call(r,t,n),t=r.element,n=r.options,n.placeholder=n.placeholder||t.attr("placeholder"),c&&t.attr("placeholder",n.placeholder),r._wrapper(),r._loader(),r._dataSource(),r._ignoreCase(),t[0].type="text",i=r.wrapper,r._popup(),t.addClass("k-input").on("keydown"+x,S(r._keydown,r)).on("paste"+x,S(r._search,r)).on("focus"+x,function(){r._prev=r._accessor(),r._placeholder(!1),i.addClass(y)}).on("focusout"+x,function(){r._change(),r._placeholder(),i.removeClass(y)}).attr({autocomplete:"off",role:"textbox","aria-haspopup":!0}),r._enable(),r._old=r._accessor(),t[0].id&&t.attr("aria-owns",r.ul[0].id),r._aria(),r._placeholder(),o.notify(r)},options:{name:"AutoComplete",enabled:!0,suggest:!1,template:"",dataTextField:"",minLength:1,delay:200,height:200,filter:"startswith",ignoreCase:!0,highlightFirst:!1,separator:null,placeholder:"",animation:{},value:null},_dataSource:function(){var e=this;e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._refreshHandler=S(e.refresh,e),e._progressHandler=S(e._showBusy,e)),e.dataSource=p.create(e.options.dataSource).bind("change",e._refreshHandler).bind("progress",e._progressHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource()},events:["open","close","change","select","filtering","dataBinding","dataBound"],setOptions:function(e){u.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria()},_editable:function(e){var t=this,n=t.element,i=t.wrapper.off(x),r=e.readonly,o=e.disable;r||o?(i.addClass(o?b:m).removeClass(o?m:b),n.attr(v,o).attr(_,r).attr(f,o).attr(g,r)):(i.addClass(m).removeClass(b).on(C,t._toggleHover),n.removeAttr(v).removeAttr(_).attr(f,!1).attr(g,!1))},close:function(){var e=this,t=e._current;t&&t.removeClass(w),e.current(null),e.popup.close()},destroy:function(){var e=this;e.element.off(x),e.wrapper.off(x),u.fn.destroy.call(e)},refresh:function(){var n,i=this,r=i.ul[0],a=i.popup,s=i.options,c=i._data(),d=c.length,u=i.element[0]===l();i._angularItems("cleanup"),i.trigger("dataBinding"),r.innerHTML=o.render(i.template,c),i._height(d),a.visible()&&a._position(),d&&(s.highlightFirst&&i.current(e(r.firstChild)),s.suggest&&u&&i.suggest(e(r.firstChild))),i._open&&(i._open=!1,n=d?"open":"close",i._typing&&!u&&(n="close"),a[n](),i._typing=t),i._touchScroller&&i._touchScroller.reset(),i._makeUnselectable(),i._hideBusy(),i._angularItems("compile"),i.trigger("dataBound")},select:function(e){this._select(e)},search:function(e){var t,n=this,r=n.options,o=r.ignoreCase,a=r.separator;e=e||n._accessor(),n._current=null,clearTimeout(n._typing),a&&(e=i(s(n.element)[0],e,a)),t=e.length,(!t||t>=r.minLength)&&(n._open=!0,n._filterSource({value:o?e.toLowerCase():e,operator:r.filter,field:r.dataTextField,ignoreCase:o}))},suggest:function(e){var i,r=this,o=r._last,a=r._accessor(),c=r.element[0],d=s(c)[0],p=r.options.separator,f=a.split(p),g=n(d,a,p),m=d;return o==h.BACKSPACE||o==h.DELETE?(r._last=t,t):(e=e||"","string"!=typeof e&&(i=u.inArray(e[0],r.ul[0]),e=i>-1?r._text(r._data()[i]):""),0>=d&&(d=a.toLowerCase().indexOf(e.toLowerCase())+1),i=a.substring(0,d).lastIndexOf(p),i=i>-1?d-(i+p.length):d,a=f[g].substring(0,i),e&&(i=e.toLowerCase().indexOf(a.toLowerCase()),i>-1&&(e=e.substring(i+a.length),m=d+e.length,a+=e),p&&""!==f[f.length-1]&&f.push("")),f[g]=a,r._accessor(f.join(p||"")),c===l()&&s(c,d,m),t)},value:function(e){return e===t?this._accessor():(this._accessor(e),this._old=this._accessor(),t)},_accessor:function(e){var n=this,i=n.element[0];return e===t?(e=i.value,i.className.indexOf("k-readonly")>-1&&e===n.options.placeholder?"":e):(i.value=null===e?"":e,n._placeholder(),t)},_accept:function(e){var t=this.element;this._focus(e),s(t,t.val().length)},_keydown:function(t){var n=this,i=n.ul[0],r=t.keyCode,o=n._current,a=n.popup.visible();n._last=r,r===h.DOWN?(a&&n._move(o?o.next():e(i.firstChild)),t.preventDefault()):r===h.UP?(a&&n._move(o?o.prev():e(i.lastChild)),t.preventDefault()):r===h.ENTER||r===h.TAB?(r===h.ENTER&&n.popup.visible()&&t.preventDefault(),n._accept(o)):r===h.ESC?(n.popup.visible()&&t.preventDefault(),n.close()):n._search()},_move:function(e){var t=this;e=e[0]?e:null,t.current(e),t.options.suggest&&t.suggest(e)},_hideBusy:function(){var e=this;clearTimeout(e._busy),e._loading.hide(),e.element.attr("aria-busy",!1),e._busy=null},_showBusy:function(){var e=this;e._busy||(e._busy=setTimeout(function(){e.element.attr("aria-busy",!0),e._loading.show()},100))},_placeholder:function(e){if(!c){var n,i=this,r=i.element,o=i.options.placeholder;if(o){if(n=r.val(),e===t&&(e=!n),e||(o=n!==o?n:""),n===i._old&&!e)return;r.toggleClass("k-readonly",e).val(o),o||r[0]!==document.activeElement||s(r[0],0,0)}}},_search:function(){var e=this;clearTimeout(e._typing),e._typing=setTimeout(function(){e._prev!==e._accessor()&&(e._prev=e._accessor(),e.search())},e.options.delay)},_select:function(t){var n,i,o=this,a=o.options.separator,l=o._data();t=e(t),t[0]&&!t.hasClass(w)&&(i=u.inArray(t[0],o.ul[0]),i>-1&&(l=l[i],n=o._text(l),a&&(n=r(s(o.element)[0],o._accessor(),n,a)),o._accessor(n),o._prev=o._accessor(),o.current(t.addClass(w))))},_loader:function(){this._loading=e('<span class="k-icon k-loading" style="display:none"></span>').insertAfter(this.element)},_toggleHover:function(t){e(t.currentTarget).toggleClass(k,"mouseenter"===t.type)},_wrapper:function(){var e,t=this,n=t.element,i=n[0];e=n.parent(),e.is("span.k-widget")||(e=n.wrap("<span />").parent()),e.attr("tabindex",-1),e.attr("role","presentation"),e[0].style.cssText=i.style.cssText,n.css({width:"100%",height:i.style.height}),t._focused=t.element,t.wrapper=e.addClass("k-widget k-autocomplete k-header").addClass(i.className)}});d.plugin(T)}(window.kendo.jQuery),function(e,t){function n(e,t,n){for(var i,r=0,o=t.length-1;o>r;++r)i=t[r],i in e||(e[i]={}),e=e[i];e[t[o]]=n}var i=window.kendo,r=i.ui,o=r.Select,a=i.support.mobileOS,s=i._activeElement,l=i.keys,c=".kendoDropDownList",d="disabled",u="readonly",h="change",p="k-state-focused",f="k-state-default",g="k-state-disabled",m="aria-disabled",v="aria-readonly",_="k-state-selected",y="mouseenter"+c+" mouseleave"+c,w="tabindex",b="filter",k="accept",x=e.proxy,C=o.extend({init:function(n,r){var a,s,l,d=this,u=r&&r.index;d.ns=c,r=e.isArray(r)?{dataSource:r}:r,o.fn.init.call(d,n,r),r=d.options,n=d.element.on("focus"+c,x(d._focusHandler,d)),d._inputTemplate(),d._reset(),d._prev="",d._word="",d._wrapper(),d._tabindex(),d.wrapper.data(w,d.wrapper.attr(w)),d._span(),d._popup(),d._mobile(),d._dataSource(),d._ignoreCase(),d._filterHeader(),d._aria(),d._enable(),d._oldIndex=d.selectedIndex=-1,d._cascade(),u!==t&&(r.index=u),r.autoBind?d.dataSource.fetch():-1===d.selectedIndex&&(l=r.text||"",l||(a=r.optionLabel,s=a&&0===r.index,d._isSelect?l=s?a:n.children(":selected").text():!n[0].value&&s&&(l=a)),d._textAccessor(l)),i.notify(d)},options:{name:"DropDownList",enabled:!0,autoBind:!0,index:0,text:null,value:null,template:"",valueTemplate:"",delay:500,height:200,dataTextField:"",dataValueField:"",optionLabel:"",cascadeFrom:"",cascadeFromField:"",ignoreCase:!0,animation:{},filter:"none",minLength:1},events:["open","close",h,"select","filtering","dataBinding","dataBound","cascade"],setOptions:function(e){o.fn.setOptions.call(this,e),this._template(),this._inputTemplate(),this._accessors(),this._filterHeader(),this._enable(),this._aria()},destroy:function(){var e=this;e.wrapper.off(c),e.element.off(c),e._inputWrapper.off(c),e._arrow.off(),e._arrow=null,o.fn.destroy.call(e)},open:function(){var e=this;e.popup.visible()||(e.ul[0].firstChild&&e._state!==k?(e.popup.open(),e._focusElement(e.filterInput),e._scroll(e._current)):(e._open=!0,e._state="rebind",e.filterInput&&e.filterInput.val(""),e._filterSource()))},toggle:function(e){this._toggle(e,!0)},refresh:function(){var t,n,r=this,o=r._data(),a=o.length,s=r.options.optionLabel,l=r._state===b,c=r.element[0];r.trigger("dataBinding"),r._current&&r.current(null),r._angularItems("cleanup"),r.ul[0].innerHTML=i.render(r.template,o),r._angularItems("compile"),r._height(l?a||1:a),r.popup.visible()&&r.popup._position(),r._isSelect&&(t=c.selectedIndex,n=r.value(),a?s&&(s=r._option("",r._optionLabelText(s))):n&&(t=0,s=r._option(n,r.text())),r._options(o,s),c.selectedIndex=-1===t?0:t),r._hideBusy(),r._makeUnselectable(),l?r.current(e(r.ul[0].firstChild)):(r._open&&r.toggle(!!a),r._open=!1,r._fetch||(a?r._selectItem():r._textAccessor()!==s&&(r.element.val(""),r._textAccessor("")))),r._bound=!!a,r.trigger("dataBound")},text:function(e){var n,i,r=this,o=r.options.ignoreCase;return e=null===e?"":e,e===t?r._textAccessor():("string"==typeof e&&(i=o?e.toLowerCase():e,n=r._select(function(e){return e=r._text(e),o&&(e=(e+"").toLowerCase()),e===i}),n&&(e=n)),r._textAccessor(e),t)},value:function(e){var n,i,r=this;return e===t?r._accessor():(null!==e&&(e=""+e),r._selectedValue=e,i=e||r.options.optionLabel&&!r.element[0].disabled&&""===e,i&&r._fetchItems(e)||(n=r._index(e),r.select(n>-1?n:0)),t)},_focusHandler:function(){this.wrapper.focus()},_focusinHandler:function(){this._inputWrapper.addClass(p),this._prevent=!1},_focusoutHandler:function(){var e=this,t=e._state===b,n=window.self!==window.top;e._prevent||(t&&e._select(e._current),(!t||e.dataItem())&&e._triggerCascade(),i.support.mobileOS.ios&&n?e._change():e._blur(),e._inputWrapper.removeClass(p),e._prevent=!0,e._open=!1,e.element.blur())},_wrapperMousedown:function(){this._prevent=!!this.filterInput},_wrapperClick:function(e){e.preventDefault(),this._focused=this.wrapper,this._toggle()},_editable:function(e){var t=this,n=t.element,i=e.disable,r=e.readonly,o=t.wrapper.add(t.filterInput).off(c),a=t._inputWrapper.off(y);r||i?i?(o.removeAttr(w),a.addClass(g).removeClass(f)):(a.addClass(f).removeClass(g),o.on("focusin"+c,x(t._focusinHandler,t)).on("focusout"+c,x(t._focusoutHandler,t))):(n.removeAttr(d).removeAttr(u),a.addClass(f).removeClass(g).on(y,t._toggleHover),o.attr(w,o.data(w)).attr(m,!1).attr(v,!1).on("keydown"+c,x(t._keydown,t)).on("focusin"+c,x(t._focusinHandler,t)).on("focusout"+c,x(t._focusoutHandler,t)).on("mousedown"+c,x(t._wrapperMousedown,t)),t.wrapper.on("click"+c,x(t._wrapperClick,t)),t.filterInput||o.on("keypress"+c,x(t._keypress,t))),n.attr(d,i).attr(u,r),o.attr(m,i).attr(v,r)},_accept:function(e,t){var n=this,i=n.filterInput&&n.filterInput[0]===s();n._focus(e),n._focusElement(n.wrapper),i&&t===l.TAB&&n.wrapper.focusout()},_option:function(e,t){return'<option value="'+e+'">'+t+"</option>"},_optionLabelText:function(){var e=this.options,t=e.dataTextField,n=e.optionLabel;return n&&t&&"object"==typeof n?this._text(n):n},_data:function(){var e=this,t=e.options,r=t.optionLabel,o=t.dataTextField,a=t.dataValueField,s=e.dataSource.view(),l=s.length,c=r,d=0;if(r&&l){for("object"==typeof r?c=r:o&&(c={},o=o.split("."),a=a.split("."),n(c,a,""),n(c,o,r)),c=new i.data.ObservableArray([c]);l>d;d++)c.push(s[d]);s=c}return s},_selectItem:function(){o.fn._selectItem.call(this),this.current()||this.select(0)},_keydown:function(e){var t,n=this,i=e.keyCode,r=e.altKey,o=n.ul[0];i===l.LEFT?i=l.UP:i===l.RIGHT&&(i=l.DOWN),e.keyCode=i,t=n._move(e),n.popup.visible()&&n.filterInput||(i===l.HOME?(t=!0,e.preventDefault(),n._select(o.firstChild)):i===l.END&&(t=!0,e.preventDefault(),n._select(o.lastChild))),r&&i===l.UP&&n._focusElement(n.wrapper),r||t||!n.filterInput||n._search()},_selectNext:function(e,n){for(var i,r=this,o=n,a=r._data(),s=a.length,l=r.options.ignoreCase,c=function(n,i){return n+="",l&&(n=n.toLowerCase()),0===n.indexOf(e)?(r._select(i),r._triggerEvents(),!0):t};s>n;n++)if(i=r._text(a[n]),i&&c(i,n))return!0;if(o>0&&s>o)for(n=0;o>=n;n++)if(i=r._text(a[n]),i&&c(i,n))return!0;return!1},_keypress:function(e){var t,n,r,o=this;0!==e.which&&e.keyCode!==i.keys.ENTER&&(t=String.fromCharCode(e.charCode||e.keyCode),n=o.selectedIndex,r=o._word,o.options.ignoreCase&&(t=t.toLowerCase())," "===t&&e.preventDefault(),o._last===t&&1>=r.length&&n>-1&&(r||(r=t),o._selectNext(r,n+1))||(o._word=r+t,o._last=t,o._search()))},_popupOpen:function(){var e=this.popup;e.wrapper=i.wrap(e.element),e.element.closest(".km-root")[0]&&(e.wrapper.addClass("km-popup km-widget"),this.wrapper.addClass("km-widget"))},_popup:function(){o.fn._popup.call(this),this.popup.one("open",x(this._popupOpen,this))},_focusElement:function(e){var t=s(),n=this.wrapper,i=this.filterInput,r=e===i?n:i;i&&r[0]===t&&(this._prevent=!0,this._focused=e.focus())},_filter:function(e){var n,i;e&&(n=this,i=n.options.ignoreCase,i&&(e=e.toLowerCase()),n._select(function(r){var o=n._text(r);return o!==t?(o+="",i&&(o=o.toLowerCase()),0===o.indexOf(e)):t}))},_search:function(){var e=this,n=e.dataSource,i=e.selectedIndex,r=e._word;if(clearTimeout(e._typing),"none"!==e.options.filter)e._typing=setTimeout(function(){var t=e.filterInput.val();e._prev!==t&&(e._prev=t,e.search(t)),e._typing=null},e.options.delay);else{if(e._typing=setTimeout(function(){e._word=""},e.options.delay),-1===i&&(i=0),!e.ul[0].firstChild)return n.one(h,function(){n.data()[0]&&i>-1&&e._selectNext(r,i)}).fetch(),t;e._selectNext(r,i),e._triggerEvents()}},_select:function(e){var n,i,o=this,a=o._current,s=null;return e=o._get(e),e&&e[0]&&!e.hasClass(_)&&(o._state===b&&(o._state=k),a&&a.removeClass(_),i=r.List.inArray(e[0],o.ul[0]),i>-1&&(o.selectedIndex=i,s=o._data()[i],n=o._value(s),null===n&&(n=""),o._textAccessor(s),o._accessor(n!==t?n:o._text(s),i),o._selectedValue=o._accessor(),o.current(e.addClass(_)),o._optionID&&o._current.attr("aria-selected",!0))),s},_triggerEvents:function(){this.popup.visible()||(this._triggerCascade(),this._change())},_mobile:function(){var e=this,t=e.popup,n=t.element.parents(".km-root").eq(0);n.length&&a&&(t.options.animation.open.effects=a.android||a.meego?"fadeIn":a.ios||a.wp?"slideIn:up":t.options.animation.open.effects)},_filterHeader:function(){var t,n=this.options,i="none"!==n.filter;this.filterInput&&(this.filterInput.off(c).parent().remove(),this.filterInput=null),i&&(t='<span unselectable="on" class="k-icon k-i-search">select</span>',this.filterInput=e('<input class="k-textbox"/>').attr({role:"listbox","aria-haspopup":!0,"aria-expanded":!1}),this.list.prepend(e('<span class="k-list-filter" />').append(this.filterInput.add(t))))},_span:function(){var t,n=this,i=n.wrapper,r="span.k-input";t=i.find(r),t[0]||(i.append('<span unselectable="on" class="k-dropdown-wrap k-state-default"><span unselectable="on" class="k-input">&nbsp;</span><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(n.element),t=i.find(r)),n.span=t,n._inputWrapper=e(i[0].firstChild),n._arrow=i.find(".k-icon")},_wrapper:function(){var e,t=this,n=t.element,i=n[0];e=n.parent(),e.is("span.k-widget")||(e=n.wrap("<span />").parent(),e[0].style.cssText=i.style.cssText),n.hide(),t._focused=t.wrapper=e.addClass("k-widget k-dropdown k-header").addClass(i.className).css("display","").attr({unselectable:"on",role:"listbox","aria-haspopup":!0,"aria-expanded":!1})},_clearSelection:function(){var e=this,n=e.options.optionLabel;return e.options.value="",e._selectedValue="",e.dataSource.view()[0]&&(n||e._userTriggered)?(e.select(0),t):(e.selectedIndex=-1,e.element.val(""),e._textAccessor(e.options.optionLabel),t)},_inputTemplate:function(){var t=this,n=t.options.valueTemplate;n=n?i.template(n):e.proxy(i.template("#:this._text(data)#",{useWithBlock:!1}),t),t.valueTemplate=n},_textAccessor:function(r){var o,a=this.dataItem(),s=this.options,l=this.span;return r===t?l.text():(e.isPlainObject(r)||r instanceof i.data.ObservableObject?a=r:a&&this._text(a)===r||(s.dataTextField?(a={},n(a,s.dataTextField.split("."),r),n(a,s.dataValueField.split("."),this._accessor())):a=r),o=function(){return{elements:l.get(),data:[{dataItem:a}]}},this.angular("cleanup",o),l.html(this.valueTemplate(a)),this.angular("compile",o),t)}});r.plugin(C)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.List,o=i.Select,a=n.caret,s=n.support,l=s.placeholder,c=n._activeElement,d=n.keys,u=".kendoComboBox",h="click"+u,p="mousedown"+u,f="disabled",g="readonly",m="change",v="k-state-default",_="k-state-focused",y="k-state-disabled",w="aria-disabled",b="aria-readonly",k="k-state-selected",x="filter",C="accept",S="rebind",T="mouseenter"+u+" mouseleave"+u,D=null,A=e.proxy,E=o.extend({init:function(t,i){var r,a=this;
a.ns=u,i=e.isArray(i)?{dataSource:i}:i,o.fn.init.call(a,t,i),i=a.options,t=a.element.on("focus"+u,A(a._focusHandler,a)),i.placeholder=i.placeholder||t.attr("placeholder"),a._reset(),a._wrapper(),a._input(),a._tabindex(a.input),a._popup(),a._dataSource(),a._ignoreCase(),a._enable(),a._oldIndex=a.selectedIndex=-1,a._cascade(),a._aria(),i.autoBind?a._filterSource():(r=i.text,!r&&a._isSelect&&(r=t.children(":selected").text()),r&&(a.input.val(r),a._prev=r)),r||a._placeholder(),n.notify(a)},options:{name:"ComboBox",enabled:!0,index:-1,text:null,value:null,autoBind:!0,delay:200,dataTextField:"",dataValueField:"",minLength:0,height:200,highlightFirst:!0,template:"",filter:"none",placeholder:"",suggest:!1,cascadeFrom:"",cascadeFromField:"",ignoreCase:!0,animation:{}},events:["open","close",m,"select","filtering","dataBinding","dataBound","cascade"],setOptions:function(e){o.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria()},current:function(e){var n=this,i=n._current;return e===t?i:(i&&i.removeClass(k),o.fn.current.call(n,e),t)},destroy:function(){var e=this;e.input.off(u),e.element.off(u),e._inputWrapper.off(u),o.fn.destroy.call(e)},_focusHandler:function(){this.input.focus()},_arrowClick:function(){this._toggle()},_inputFocus:function(){this._inputWrapper.addClass(_),this._placeholder(!1)},_inputFocusout:function(){var e=this;e._inputWrapper.removeClass(_),clearTimeout(e._typing),e._typing=null,e.options.text!==e.input.val()&&e.text(e.text()),e._placeholder(),e._blur(),e.element.blur()},_editable:function(e){var t=this,n=e.disable,i=e.readonly,r=t._inputWrapper.off(u),o=t.element.add(t.input.off(u)),a=t._arrow.parent().off(h+" "+p);i||n?(r.addClass(n?y:v).removeClass(n?v:y),o.attr(f,n).attr(g,i).attr(w,n).attr(b,i)):(r.addClass(v).removeClass(y).on(T,t._toggleHover),o.removeAttr(f).removeAttr(g).attr(w,!1).attr(b,!1),a.on(h,A(t._arrowClick,t)).on(p,function(e){e.preventDefault()}),t.input.on("keydown"+u,A(t._keydown,t)).on("focus"+u,A(t._inputFocus,t)).on("focusout"+u,A(t._inputFocusout,t)))},open:function(){var e=this,t=e._state,n=e.dataSource.options.serverFiltering;e.popup.visible()||(!e.ul[0].firstChild&&t!==x||t===C&&!n?(e._open=!0,e._state=S,e._filterSource()):(e.popup.open(),e._scroll(e._current)))},refresh:function(){var i,r,o=this,a=o.ul[0],s=o.options,l=o._state,d=o._data(),u=d.length,h=!0;o._angularItems("cleanup"),o.trigger("dataBinding"),a.innerHTML=n.render(o.template,d),o._height(u),o.popup.visible()&&o.popup._position(),o._isSelect&&(i=o.element[0].children[0],l===S&&(o._state=""),r=o._option,o._option=t,o._options(d),r&&r[0].selected?o._custom(r.val(),h):o._bound||i||o._custom("",h)),u&&(s.highlightFirst&&o.current(e(a.firstChild)),s.suggest&&o.input.val()&&o._request!==t&&o.suggest(e(a.firstChild))),l===x||o._fetch||o._selectItem(),o._open&&(o._open=!1,o._typing&&o.input[0]!==c()?o.popup.close():o.toggle(!!u),o._typing=null),o._touchScroller&&o._touchScroller.reset(),o._makeUnselectable(),o._hideBusy(),o._bound=!0,o._angularItems("compile"),o.trigger("dataBound")},suggest:function(e){var n,i=this,o=i.input[0],s=i.text(),l=a(o)[0],u=i._last;return u==d.BACKSPACE||u==d.DELETE?(i._last=t,t):(e=e||"","string"!=typeof e&&(n=r.inArray(e[0],i.ul[0]),e=n>-1?i._text(i.dataSource.view()[n]):""),0>=l&&(l=s.toLowerCase().indexOf(e.toLowerCase())+1),e?(n=e.toLowerCase().indexOf(s.toLowerCase()),n>-1&&(s+=e.substring(n+s.length))):s=s.substring(0,l),s.length===l&&e||(o.value=s,o===c()&&a(o,l,s.length)),t)},text:function(e){var n,i,r,o,a,s;return e=null===e?"":e,n=this,i=n.input[0],r=n.options.ignoreCase,o=e,e===t?i.value:(a=n.dataItem(),a&&n._text(a)===e&&(s=n._value(a),null===s?s="":s+="",s===n._old)?(n._triggerCascade(),t):(r&&(o=o.toLowerCase()),n._select(function(e){return e=n._text(e),r&&(e=(e+"").toLowerCase()),e===o}),0>n.selectedIndex&&(n._custom(e),i.value=e),n._prev=i.value,n._triggerCascade(),t))},toggle:function(e){this._toggle(e,!0)},value:function(e){var n,i=this,r=i.options;return e===t?i._accessor():(null!==e&&(e=""+e),i._selectedValue=e,!i._open&&e&&i._fetchItems(e)||(n=i._index(e),n>-1?i.select(n):(i.current(D),i._custom(e),(r.value!==e||r.text!==i.input.val())&&(i.text(e),i._placeholder())),i._old=i._accessor(),i._oldIndex=i.selectedIndex),t)},_accept:function(e){var t=this;e?t._focus(e):(t.text(t.text()),t._change())},_custom:function(t,n){var i=this,r=i.element,o=i._option;i._state!==x||n||(i._state=C),i._isSelect?(o||(o=i._option=e("<option/>"),r.append(o)),o.text(t),o[0].selected=!0):r.val(t),i._selectedValue=t},_filter:function(e){var n=this,i=n.options,r=n.dataSource,o=i.ignoreCase,a=function(i){var r=n._text(i);return r!==t?(r+="",""!==r&&""===e?!1:(o&&(r=r.toLowerCase()),0===r.indexOf(e))):t};return o&&(e=e.toLowerCase()),n.ul[0].firstChild?(-1!==n._highlight(a)&&(i.suggest&&n._current&&n.suggest(n._current),n.open()),n._hideBusy(),t):(r.one(m,function(){r.view()[0]&&n.search(e)}).fetch(),t)},_highlight:function(n){var i,o=this;return n===t||null===n?-1:(n=o._get(n),i=r.inArray(n[0],o.ul[0]),-1==i&&(o.options.highlightFirst&&!o.text()?(n=o.ul[0].firstChild,n&&(n=e(n))):n=D),o.current(n),i)},_input:function(){var t,n=this,i=n.element.removeClass("k-input")[0],r=i.accessKey,o=n.wrapper,a="input.k-input",s=i.name||"";s&&(s='name="'+s+'_input" '),t=o.find(a),t[0]||(o.append('<span tabindex="-1" unselectable="on" class="k-dropdown-wrap k-state-default"><input '+s+'class="k-input" type="text" autocomplete="off"/><span tabindex="-1" unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(n.element),t=o.find(a)),t[0].style.cssText=i.style.cssText,i.maxLength>-1&&(t[0].maxLength=i.maxLength),t.addClass(i.className).val(this.options.text||i.value).css({width:"100%",height:i.style.height}).attr({role:"combobox","aria-expanded":!1}).show(),l&&t.attr("placeholder",n.options.placeholder),r&&(i.accessKey="",t[0].accessKey=r),n._focused=n.input=t,n._inputWrapper=e(o[0].firstChild),n._arrow=o.find(".k-icon").attr({role:"button",tabIndex:-1}),i.id&&n._arrow.attr("aria-controls",n.ul[0].id)},_keydown:function(e){var t=this,n=e.keyCode;t._last=n,clearTimeout(t._typing),t._typing=null,n==d.TAB||t._move(e)||t._search()},_placeholder:function(e){if(!l){var n,i=this,r=i.input,o=i.options.placeholder;if(o){if(n=i.value(),e===t&&(e=!n),r.toggleClass("k-readonly",e),!e){if(n)return;o=""}r.val(o),o||r[0]!==c()||a(r[0],0,0)}}},_search:function(){var e=this;e._typing=setTimeout(function(){var t=e.text();e._prev!==t&&(e._prev=t,e.search(t)),e._typing=null},e.options.delay)},_select:function(e){var n,i,r=this,o=r._data(),a=r._highlight(e);r.selectedIndex=a,-1!==a&&(r._state===x&&(r._state=C),r._current.addClass(k),o=o[a],n=r._text(o),i=r._value(o),null===i&&(i=""),r._prev=r.input[0].value=n,r._accessor(i!==t?i:n,a),r._selectedValue=r._accessor(),r._placeholder(),r._optionID&&r._current.attr("aria-selected",!0))},_wrapper:function(){var e=this,t=e.element,n=t.parent();n.is("span.k-widget")||(n=t.hide().wrap("<span />").parent(),n[0].style.cssText=t[0].style.cssText),e.wrapper=n.addClass("k-widget k-combobox k-header").addClass(t[0].className).css("display","")},_clearSelection:function(e,t){var n=this,i=e._selectedValue||e.value(),r=i&&-1===e.selectedIndex;(t||!i||r)&&(n.value(""),n.options.value="")}});i.plugin(E)}(window.kendo.jQuery),function(e,t){function n(e,t){var n;if(null===e&&null!==t||null!==e&&null===t)return!1;if(n=e.length,n!==t.length)return!1;for(;n--;)if(e[n]!==t[n])return!1;return!0}function i(t){var n=t.firstChild;return n&&"none"===n.style.display&&(n=o(n,k)),n?e(n):n}function r(t){var n=t.lastChild;return n&&"none"===n.style.display&&(n=o(n,x)),n?e(n):n}function o(e,t){return e=e[t],e&&"none"===e.style.display&&(e=o(e,t)),e}var a=window.kendo,s=a.ui,l=s.List,c=a.keys,d=a._activeElement,u=a.data.ObservableArray,h=e.proxy,p="id",f="li",g="accept",m="filter",v="open",_="close",y="change",w="progress",b="select",k="nextSibling",x="previousSibling",C=' style="display:none"',S="aria-disabled",T="aria-readonly",D="k-state-focused",A="k-loading-hidden",E="k-state-hover",M="k-state-disabled",P="disabled",I="readonly",z=".kendoMultiSelect",F="click"+z,R="keydown"+z,B="mouseenter"+z,L="mouseleave"+z,O=B+" "+L,H=/"/g,N=e.isArray,V=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"],U=l.extend({init:function(t,n){var i,r,o=this;o.ns=z,l.fn.init.call(o,t,n),o._wrapper(),o._tagList(),o._input(),o._textContainer(),o._loader(),o._tabindex(o.input),t=o.element.attr("multiple","multiple").hide(),n=o.options,r=n.value,n.placeholder||(n.placeholder=t.data("placeholder")),i=t.attr(p),i&&(o._tagID=i+"_tag_active",i+="_taglist",o.tagList.attr(p,i)),o._aria(i),o._dataSource(),o._ignoreCase(),o._popup(),o._values=[],o._dataItems=[],o._reset(),o._enable(),o._placeholder(),n.autoBind?o.dataSource.fetch():r&&(N(r)||(r=[r]),(e.isPlainObject(r[0])||!n.dataValueField)&&(o._retrieveData=!0,o.dataSource.data(r),o.value(o._initialValues))),a.notify(o)},options:{name:"MultiSelect",enabled:!0,autoBind:!0,autoClose:!0,highlightFirst:!0,dataTextField:"",dataValueField:"",filter:"startswith",ignoreCase:!0,minLength:0,delay:100,value:null,maxSelectedItems:null,itemTemplate:"",tagTemplate:"",placeholder:"",height:200,animation:{}},events:[v,_,y,b,"filtering","dataBinding","dataBound"],setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&this.dataSource.fetch()},setOptions:function(e){l.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria(this.tagList.attr(p))},current:function(e){return this.currentTag(null),l.fn.current.call(this,e)},currentTag:function(e){var n=this;return e===t?n._currentTag:(n._currentTag&&(n._currentTag.removeClass(D).removeAttr(p),n.input.removeAttr("aria-activedescendant")),e&&(e.addClass(D).attr(p,n._tagID),n.input.attr("aria-activedescendant",n._tagID)),n._currentTag=e,t)},dataItems:function(){return this._dataItems},destroy:function(){var e=this,t=e.ns;clearTimeout(e._busy),clearTimeout(e._typing),e.wrapper.off(t),e.tagList.off(t),e.input.off(t),l.fn.destroy.call(e)},_wrapperMousedown:function(e){var t=this,n="input"!==e.target.nodeName.toLowerCase();n&&e.preventDefault(),-1===e.target.className.indexOf("k-delete")&&(t.input[0]!==d()&&n&&t.input.focus(),0===t.options.minLength&&t.open())},_inputFocus:function(){this._placeholder(!1),this.wrapper.addClass(D)},_inputFocusout:function(){var e=this;clearTimeout(e._typing),e.wrapper.removeClass(D),e._placeholder(!e._dataItems[0],!0),e.close(),e._state===m&&(e._state=g),e.element.blur()},_tagListClick:function(t){this._unselect(e(t.target).closest(f)),this._change(),this.close()},_editable:function(t){var n=this,i=t.disable,r=t.readonly,o=n.wrapper.off(z),a=n.tagList.off(z),s=n.element.add(n.input.off(z));r||i?(i?o.addClass(M):o.removeClass(M),s.attr(P,i).attr(I,r).attr(S,i).attr(T,r)):(o.removeClass(M).on(O,n._toggleHover).on("mousedown"+z,h(n._wrapperMousedown,n)),n.input.on(R,h(n._keydown,n)).on("paste"+z,h(n._search,n)).on("focus"+z,h(n._inputFocus,n)).on("focusout"+z,h(n._inputFocusout,n)),s.removeAttr(P).removeAttr(I).attr(S,!1).attr(T,!1),a.on(B,f,function(){e(this).addClass(E)}).on(L,f,function(){e(this).removeClass(E)}).on(F,".k-delete",h(n._tagListClick,n)))},_close:function(){var e=this;e.options.autoClose||!e._visibleItems?e.close():(e.current(e.options.highlightFirst?i(e.ul[0]):null),e.popup._position())},close:function(){this.popup.close(),this.current(null)},open:function(){var e=this;e._request&&(e._retrieveData=!1),!e.ul[0].firstChild||e._state===g||e._retrieveData?(e._state="",e._open=!0,e._retrieveData=!1,e._filterSource()):e._visibleItems&&e._allowSelection()&&(e.popup.open(),e.current(e.options.highlightFirst?i(e.ul[0]):null))},toggle:function(e){e=e!==t?e:!this.popup.visible(),this[e?v:_]()},refresh:function(){var e,t=this,n=null;t.trigger("dataBinding"),e=t._render(t.dataSource.view()),t._height(e),t._setInitialValues&&(t._setInitialValues=!1,t.value(t._initialValues)),t._open&&(t._open=!1,t.toggle(e)),t.popup.visible()&&(t.popup._position(),t.options.highlightFirst&&(n=i(t.ul[0]))),t.current(n),t._touchScroller&&t._touchScroller.reset(),t._makeUnselectable(),t._hideBusy(),t.trigger("dataBound")},search:function(e){var t,n,i=this,r=i.options,o=r.ignoreCase,a=r.filter,s=r.dataTextField,l=i.input.val();r.placeholder===l&&(l=""),clearTimeout(i._typing),e="string"==typeof e?e:l,n=e.length,(!n||n>=r.minLength)&&(i._state=m,i._open=!0,t={value:o?e.toLowerCase():e,field:s,operator:a,ignoreCase:o},i._filterSource(t,i._retrieveData),i._retrieveData=!1)},value:function(n){var i,r=this,o=e(r.tagList[0].children),a=o.length,s=0;if(n===t)return r._values;if(!r._fetchItems(n)){for(;a>s;s++)r._unselect(o.eq(s));if(null!==n){for(n=N(n)||n instanceof u?n:[n],s=0,a=n.length;a>s;s++)i=r._index(n[s]),i>-1&&r._select(i);r._old=r._values.slice()}}},_dataSource:function(){var e=this,t=e.element,n=e.options,i=n.dataSource||{};i=N(i)?{data:i}:i,i.select=t,i.fields=[{field:n.dataTextField},{field:n.dataValueField}],e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._refreshHandler=h(e.refresh,e),e._progressHandler=h(e._showBusy,e)),e.dataSource=a.data.DataSource.create(i).bind(y,e._refreshHandler).bind(w,e._progressHandler)},_fetchItems:function(n){var i=this,r=e.isArray(n)&&0===n.length;if(!r&&n)return i._fetch||i.ul[0].firstChild?t:(i.dataSource.one(y,function(){i.value(n),i._fetch=!1}),i._fetch=!0,i.dataSource.fetch(),!0)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(t._initialValues),t._placeholder()})},t._form=r.on("reset",t._resetHandler))},_initValue:function(){var e=this,n=e.options.value||e.element.val();null===n?n=[]:(N(n)||(n=[n]),n=e._mapValues(n)),e._old=e._initialValues=n,e._setInitialValues=n[0]!==t},_mapValues:function(t){var n=this;return t&&e.isPlainObject(t[0])&&(t=e.map(t,function(e){return n._value(e)})),t},_change:function(){var e=this,t=e.value();n(t,e._old)||(e._old=t.slice(),e.trigger(y),e.element.trigger(y))},_click:function(n){var i=this,r=e(n.currentTarget);if(!n.isDefaultPrevented()){if(i.trigger(b,{item:r}))return i._close(),t;i._select(r),i._change(),i._close()}},_item:function(e,t){return e=e[t](),e[0]&&!e.is(":visible")&&(e=this._item(e,t)),e},_keydown:function(n){var s=this,l=n.keyCode,d=s._currentTag,u=s._current,h=s.input.val(),p=a.support.isRtl(s.wrapper),f=s.popup.visible();if(l===c.DOWN){if(n.preventDefault(),!f)return s.open(),t;u=u?o(u[0],k):i(s.ul[0]),u&&s.current(e(u))}else if(l===c.UP)f&&(u=u?o(u[0],x):r(s.ul[0]),s.current(e(u)),s._current[0]||s.close()),n.preventDefault();else if(l===c.LEFT&&!p||l===c.RIGHT&&p)h||(d=d?d.prev():e(s.tagList[0].lastChild),d[0]&&s.currentTag(d));else if(l===c.RIGHT&&!p||l===c.LEFT&&p)!h&&d&&(d=d.next(),s.currentTag(d[0]?d:null));else if(l===c.ENTER&&f){if(u){if(s.trigger(b,{item:u}))return s._close(),t;s._select(u)}s._change(),s._close(),n.preventDefault()}else l===c.ESC?(f?n.preventDefault():s.currentTag(null),s.close()):l===c.HOME?f?s.current(i(s.ul[0])):h||(d=s.tagList[0].firstChild,d&&s.currentTag(e(d))):l===c.END?f?s.current(r(s.ul[0])):h||(d=s.tagList[0].lastChild,d&&s.currentTag(e(d))):l!==c.DELETE&&l!==c.BACKSPACE||h?(clearTimeout(s._typing),setTimeout(function(){s._scale()}),s._search()):(l!==c.BACKSPACE||d||(d=e(s.tagList[0].lastChild)),d&&d[0]&&(s._unselect(d),s._change(),s._close()))},_hideBusy:function(){var e=this;clearTimeout(e._busy),e.input.attr("aria-busy",!1),e._loading.addClass(A),e._request=!1,e._busy=null},_showBusyHandler:function(){this.input.attr("aria-busy",!0),this._loading.removeClass(A)},_showBusy:function(){var e=this;e._request=!0,e._busy||(e._busy=setTimeout(h(e._showBusyHandler,e),100))},_placeholder:function(e,n){var i=this,r=i.input,o=d();e===t&&(e=!1,r[0]!==o&&(e=!i._dataItems[0])),i._prev="",r.toggleClass("k-readonly",e).val(e?i.options.placeholder:""),r[0]!==o||n||a.caret(r[0],0,0),i._scale()},_scale:function(){var e,t=this,n=t.wrapper,i=n.width(),r=t._span.text(t.input.val());n.is(":visible")?e=r.width()+25:(r.appendTo(document.documentElement),i=e=r.width()+25,r.appendTo(n)),t.input.width(e>i?i:e)},_option:function(e,n){var i="<option",r=this._text(e),o=this._value(e);return o!==t&&(o+="",-1!==o.indexOf('"')&&(o=o.replace(H,"&quot;")),i+=' value="'+o+'"'),n&&(i+=' selected="selected"'),i+=">",r!==t&&(i+=a.htmlEncode(r)),i+="</option>"},_render:function(e){for(var t,n,i=this,r=e.length,o=i.itemTemplate,a=i._dataItems.slice(0),s=0,l=0,c="",d="";r>l;l++)t=e[l],n=i._selected(a,t),d+=o(t,l,n),c+=i._option(t,n),n||(s+=1);if(r=a.length)for(l=0;r>l;l++)c+=i._option(a[l],!0);return i.ul[0].innerHTML=d,i.element.html(c),i._visibleItems=s,s},_selected:function(e,n){var i,r=this,o=r._text,a=r._value,s=a(n),l=e.length,c=!1,d=0;for(s===t&&(s=o(n));l>d;d++)if(n=e[d],i=a(n),i===t&&(i=o(n)),i!==t&&i===s){c=!0;break}return c&&e.splice(d,1),c},_search:function(){var e=this;e._typing=setTimeout(function(){var t=e.input.val();e._prev!==t&&(e._prev=t,e.search(t))},e.options.delay)},_allowSelection:function(){var e=this.options.maxSelectedItems;return null===e||e>this._values.length},_select:function(e){var t,n,i=this,r=i._values;i._allowSelection()&&(isNaN(e)?n=e.hide().data("idx"):(n=e,i.ul[0].children[n].style.display="none"),i.element[0].children[n].selected=!0,t=i.dataSource.view()[n],i.tagList.append(i.tagTemplate(t)),i._dataItems.push(t),r.push(i._dataValue(t)),i._visibleItems-=1,i.currentTag(null),i._placeholder(),i._height(i._visibleItems),i._state===m&&(i._state=g))},_unselect:function(t){var n,i,r,o,a,s=this,l=t.index();if(t.remove(),s.currentTag(null),s._values.splice(l,1),n=s._dataItems.splice(l,1)[0],i=s._dataValue(n),l=s._index(i),-1!==l)e(s.ul[0].children[l]).show(),s.element[0].children[l].selected=!1,s._visibleItems+=1,s._height(s._visibleItems);else for(l=s.dataSource.view().length,r=s.element[0].children,a=r.length;a>l;l++)if(o=r[l],o.value==i){o.selected=!1;break}s._placeholder()},_template:function(){var e,t=this,n=t.options,i=n.itemTemplate,r=n.tagTemplate,o=n.dataSource;t.element[0].length&&!o&&(n.dataTextField=n.dataTextField||"text",n.dataValueField=n.dataValueField||"value"),e=a.template("#:"+a.expr(n.dataTextField,"data")+"#",{useWithBlock:!1}),i=i?a.template(i):e,r=r?a.template(r):e,t.itemTemplate=function(e,t,n){return'<li tabindex="-1" role="option" data-idx="'+t+'" unselectable="on" class="k-item"'+(n?C:"")+">"+i(e)+"</li>"},t.tagTemplate=function(e){return'<li class="k-button" unselectable="on"><span unselectable="on">'+r(e)+'</span><span unselectable="on" class="k-icon k-delete">delete</span></li>'}},_input:function(){var t=this,n=t.element[0].accessKey,i=t._innerWrapper.children("input.k-input");i[0]||(i=e('<input class="k-input" style="width: 25px" />').appendTo(t._innerWrapper)),t.element.removeAttr("accesskey"),t._focused=t.input=i.attr({accesskey:n,autocomplete:"off",role:"listbox","aria-expanded":!1})},_tagList:function(){var t=this,n=t._innerWrapper.children("ul");n[0]||(n=e('<ul role="listbox" unselectable="on" class="k-reset"/>').appendTo(t._innerWrapper)),t.tagList=n},_loader:function(){this._loading=e('<span class="k-icon k-loading '+A+'"></span>').insertAfter(this.input)},_textContainer:function(){var t=a.getComputedStyles(this.input[0],V);t.position="absolute",t.visibility="hidden",t.top=-3333,t.left=-3333,this._span=e("<span/>").css(t).appendTo(this.wrapper)},_wrapper:function(){var t=this,n=t.element,i=n.parent("span.k-multiselect");i[0]||(i=n.wrap('<div class="k-widget k-multiselect k-header" unselectable="on" />').parent(),i[0].style.cssText=n[0].style.cssText,e('<div class="k-multiselect-wrap k-floatwrap" unselectable="on" />').insertBefore(n)),t.wrapper=i.addClass(n[0].className).css("display",""),t._innerWrapper=e(i[0].firstChild)}});s.plugin(U)}(window.kendo.jQuery),function(e,t){function n(e,t,n){var i=n?" k-slider-horizontal":" k-slider-vertical",r=e.style?e.style:t.attr("style"),o=t.attr("class")?" "+t.attr("class"):"",a="";return"bottomRight"==e.tickPlacement?a=" k-slider-bottomright":"topLeft"==e.tickPlacement&&(a=" k-slider-topleft"),r=r?" style='"+r+"'":"","<div class='k-widget k-slider"+i+o+"'"+r+"><div class='k-slider-wrap"+(e.showButtons?" k-slider-buttons":"")+a+"'></div></div>"}function i(e,t,n){var i="";return i="increase"==t?n?"k-i-arrow-e":"k-i-arrow-n":n?"k-i-arrow-w":"k-i-arrow-s","<a class='k-button k-button-"+t+"'><span class='k-icon "+i+"' title='"+e[t+"ButtonTitle"]+"'>"+e[t+"ButtonTitle"]+"</span></a>"}function r(e,t){var n,i="<ul class='k-reset k-slider-items'>",r=k.floor(c(t/e.smallStep))+1;for(n=0;r>n;n++)i+="<li class='k-tick' role='presentation'>&nbsp;</li>";return i+="</ul>"}function o(e,t){var n=t.is("input")?1:2,i=2==n?e.leftDragHandleTitle:e.dragHandleTitle;return"<div class='k-slider-track'><div class='k-slider-selection'><!-- --></div><a href='#' class='k-draghandle' title='"+i+"' role='slider' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+(n>1?e.selectionStart||e.min:e.value||e.min)+"'>Drag</a>"+(n>1?"<a href='#' class='k-draghandle' title='"+e.rightDragHandleTitle+"'role='slider' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+(e.selectionEnd||e.max)+"'>Drag</a>":"")+"</div>"}function a(e){return function(t){return t+e}}function s(e){return function(){return e}}function l(e){return(e+"").replace(".",f.cultures.current.numberFormat["."])}function c(e){e=parseFloat(e,10);var t=k.pow(10,q||0);return k.round(e*t)/t}function d(e,n){var i=y(e.getAttribute(n));return null===i&&(i=t),i}function u(e){return typeof e!==Y}function h(e){return 1e4*e}var p,f=window.kendo,g=f.ui.Widget,m=f.ui.Draggable,v=e.extend,_=f.format,y=f.parseFloat,w=e.proxy,b=e.isArray,k=Math,x=f.support,C=x.pointers,S=x.msPointers,T="change",D="slide",A=".slider",E="touchstart"+A+" mousedown"+A,M=C?"pointerdown"+A:S?"MSPointerDown"+A:E,P="touchend"+A+" mouseup"+A,I=C?"pointerup":S?"MSPointerUp"+A:P,z="moveSelection",F="keydown"+A,R="click"+A,B="mouseover"+A,L="focus"+A,O="blur"+A,H=".k-draghandle",N=".k-slider-track",V=".k-tick",U="k-state-selected",W="k-state-focused",j="k-state-default",G="k-state-disabled",q=3,$="disabled",Y="undefined",K="tabindex",Q=f.getTouches,X=g.extend({init:function(e,t){var n,i=this;g.fn.init.call(i,e,t),t=i.options,i._distance=c(t.max-t.min),i._isHorizontal="horizontal"==t.orientation,i._isRtl=i._isHorizontal&&f.support.isRtl(e),i._position=i._isHorizontal?"left":"bottom",i._sizeFn=i._isHorizontal?"width":"height",i._outerSize=i._isHorizontal?"outerWidth":"outerHeight",t.tooltip.format=t.tooltip.enabled?t.tooltip.format||"{0}":"{0}",i._createHtml(),i.wrapper=i.element.closest(".k-slider"),i._trackDiv=i.wrapper.find(N),i._setTrackDivWidth(),i._maxSelection=i._trackDiv[i._sizeFn](),i._sliderItemsInit(),i._tabindex(i.wrapper.find(H)),i[t.enabled?"enable":"disable"](),n=f.support.isRtl(i.wrapper)?-1:1,i._keyMap={37:a(-1*n*t.smallStep),40:a(-t.smallStep),39:a(1*n*t.smallStep),38:a(+t.smallStep),35:s(t.max),36:s(t.min),33:a(+t.largeStep),34:a(-t.largeStep)},f.notify(i)},events:[T,D],options:{enabled:!0,min:0,max:10,smallStep:1,largeStep:5,orientation:"horizontal",tickPlacement:"both",tooltip:{enabled:!0,format:"{0}"}},_resize:function(){this._setTrackDivWidth(),this.wrapper.find(".k-slider-items").remove(),this._maxSelection=this._trackDiv[this._sizeFn](),this._sliderItemsInit(),this._refresh()},_sliderItemsInit:function(){var e=this,t=e.options,n=e._maxSelection/((t.max-t.min)/t.smallStep),i=e._calculateItemsWidth(k.floor(e._distance/t.smallStep));"none"!=t.tickPlacement&&n>=2&&(e._trackDiv.before(r(t,e._distance)),e._setItemsWidth(i),e._setItemsTitle()),e._calculateSteps(i),"none"!=t.tickPlacement&&n>=2&&t.largeStep>=t.smallStep&&e._setItemsLargeTick()},getSize:function(){return f.dimensions(this.wrapper)},_setTrackDivWidth:function(){var e=this,t=2*parseFloat(e._trackDiv.css(e._isRtl?"right":e._position),10);e._trackDiv[e._sizeFn](e.wrapper[e._sizeFn]()-2-t)},_setItemsWidth:function(t){var n,i=this,r=i.options,o=0,a=t.length-1,s=i.wrapper.find(V),l=0,c=2,d=s.length,u=0;for(n=0;d-2>n;n++)e(s[n+1])[i._sizeFn](t[n]);if(i._isHorizontal?(e(s[o]).addClass("k-first")[i._sizeFn](t[a-1]),e(s[a]).addClass("k-last")[i._sizeFn](t[a])):(e(s[a]).addClass("k-first")[i._sizeFn](t[a]),e(s[o]).addClass("k-last")[i._sizeFn](t[a-1])),i._distance%r.smallStep!==0&&!i._isHorizontal){for(n=0;t.length>n;n++)u+=t[n];l=i._maxSelection-u,l+=parseFloat(i._trackDiv.css(i._position),10)+c,i.wrapper.find(".k-slider-items").css("padding-top",l)}},_setItemsTitle:function(){for(var t=this,n=t.options,i=t.wrapper.find(V),r=n.min,o=i.length,a=t._isHorizontal&&!t._isRtl?0:o-1,s=t._isHorizontal&&!t._isRtl?o:-1,l=t._isHorizontal&&!t._isRtl?1:-1;a-s!==0;a+=l)e(i[a]).attr("title",_(n.tooltip.format,c(r))),r+=n.smallStep},_setItemsLargeTick:function(){var t,n,i,r=this,o=r.options,a=r.wrapper.find(V),s=0;if(h(o.largeStep)%h(o.smallStep)===0||r._distance/o.largeStep>=3)for(r._isHorizontal||r._isRtl||(a=e.makeArray(a).reverse()),s=0;a.length>s;s++)t=e(a[s]),n=r._values[s],i=h(n-this.options.min),i%h(o.smallStep)===0&&i%h(o.largeStep)===0&&(t.addClass("k-tick-large").html("<span class='k-label'>"+t.attr("title")+"</span>"),0!==s&&s!==a.length-1&&t.css("line-height",t[r._sizeFn]()+"px"))},_calculateItemsWidth:function(e){var t,n,i,r=this,o=r.options,a=parseFloat(r._trackDiv.css(r._sizeFn))+1,s=a/r._distance;for(r._distance/o.smallStep-k.floor(r._distance/o.smallStep)>0&&(a-=r._distance%o.smallStep*s),t=a/e,n=[],i=0;e-1>i;i++)n[i]=t;return n[e-1]=n[e]=t/2,r._roundWidths(n)},_roundWidths:function(e){var t,n=0,i=e.length;for(t=0;i>t;t++)n+=e[t]-k.floor(e[t]),e[t]=k.floor(e[t]);return n=k.round(n),this._addAdditionalSize(n,e)},_addAdditionalSize:function(e,t){if(0===e)return t;var n,i=parseFloat(t.length-1)/parseFloat(1==e?e:e-1);for(n=0;e>n;n++)t[parseInt(k.round(i*n),10)]+=1;return t},_calculateSteps:function(e){var t,n=this,i=n.options,r=i.min,o=0,a=k.ceil(n._distance/i.smallStep),s=1;if(a+=n._distance/i.smallStep%1===0?1:0,e.splice(0,0,2*e[a-2]),e.splice(a-1,1,2*e.pop()),n._pixelSteps=[o],n._values=[r],0!==a){for(;a>s;)o+=(e[s-1]+e[s])/2,n._pixelSteps[s]=o,r+=i.smallStep,n._values[s]=c(r),s++;t=n._distance%i.smallStep===0?a-1:a,n._pixelSteps[t]=n._maxSelection,n._values[t]=i.max,n._isRtl&&(n._pixelSteps.reverse(),n._values.reverse())}},_getValueFromPosition:function(e,t){var n,i=this,r=i.options,o=k.max(r.smallStep*(i._maxSelection/i._distance),0),a=0,s=o/2;if(i._isHorizontal?(a=e-t.startPoint,i._isRtl&&(a=i._maxSelection-a)):a=t.startPoint-e,i._maxSelection-(parseInt(i._maxSelection%o,10)-3)/2<a)return r.max;for(n=0;i._pixelSteps.length>n;n++)if(k.abs(i._pixelSteps[n]-a)-1<=s)return c(i._values[n])},_getFormattedValue:function(e,t){var n,i,r,o=this,a="",s=o.options.tooltip;return b(e)?(i=e[0],r=e[1]):t&&t.type&&(i=t.selectionStart,r=t.selectionEnd),t&&(n=t.tooltipTemplate),!n&&s.template&&(n=f.template(s.template)),b(e)||t&&t.type?n?a=n({selectionStart:i,selectionEnd:r}):(i=_(s.format,i),r=_(s.format,r),a=i+" - "+r):(t&&(t.val=e),a=n?n({value:e}):_(s.format,e)),a},_getDraggableArea:function(){var e=this,t=f.getOffset(e._trackDiv);return{startPoint:e._isHorizontal?t.left:t.top+e._maxSelection,endPoint:e._isHorizontal?t.left+e._maxSelection:t.top}},_createHtml:function(){var e=this,t=e.element,r=e.options,a=t.find("input");2==a.length?(a.eq(0).prop("value",l(r.selectionStart)),a.eq(1).prop("value",l(r.selectionEnd))):t.prop("value",l(r.value)),t.wrap(n(r,t,e._isHorizontal)).hide(),r.showButtons&&t.before(i(r,"increase",e._isHorizontal)).before(i(r,"decrease",e._isHorizontal)),t.before(o(r,t))},_focus:function(t){var n=this,i=t.target,r=n.value(),o=n._drag;o||(i==n.wrapper.find(H).eq(0)[0]?(o=n._firstHandleDrag,n._activeHandle=0):(o=n._lastHandleDrag,n._activeHandle=1),r=r[n._activeHandle]),e(i).addClass(W+" "+U),o&&(n._activeHandleDrag=o,o.selectionStart=n.options.selectionStart,o.selectionEnd=n.options.selectionEnd,o._updateTooltip(r))},_focusWithMouse:function(t){t=e(t);var n=this,i=t.is(H)?t.index():0;window.setTimeout(function(){n.wrapper.find(H)[2==i?1:0].focus()},1),n._setTooltipTimeout()},_blur:function(t){var n=this,i=n._activeHandleDrag;e(t.target).removeClass(W+" "+U),i&&(i._removeTooltip(),delete n._activeHandleDrag,delete n._activeHandle)},_setTooltipTimeout:function(){var e=this;e._tooltipTimeout=window.setTimeout(function(){var t=e._drag||e._activeHandleDrag;t&&t._removeTooltip()},300)},_clearTooltipTimeout:function(){var e,t=this;window.clearTimeout(this._tooltipTimeout),e=t._drag||t._activeHandleDrag,e&&e.tooltipDiv&&e.tooltipDiv.stop(!0,!1).css("opacity",1)}}),J=X.extend({init:function(n,i){var r,o=this;n.type="text",i=v({},{value:d(n,"value"),min:d(n,"min"),max:d(n,"max"),smallStep:d(n,"step")},i),n=e(n),i&&i.enabled===t&&(i.enabled=!n.is("[disabled]")),X.fn.init.call(o,n,i),i=o.options,u(i.value)&&null!==i.value||(i.value=i.min,n.prop("value",l(i.min))),i.value=k.max(k.min(i.value,i.max),i.min),r=o.wrapper.find(H),new J.Selection(r,o,i),o._drag=new J.Drag(r,"",o,i)},options:{name:"Slider",showButtons:!0,increaseButtonTitle:"Increase",decreaseButtonTitle:"Decrease",dragHandleTitle:"drag",tooltip:{format:"{0:#,#.##}"},value:null},enable:function(n){var i,r,o,a=this,s=a.options;a.disable(),n!==!1&&(a.wrapper.removeClass(G).addClass(j),a.wrapper.find("input").removeAttr($),i=function(n){var i,r,o,s=Q(n)[0];if(s){if(i=a._isHorizontal?s.location.pageX:s.location.pageY,r=a._getDraggableArea(),o=e(n.target),o.hasClass("k-draghandle"))return o.addClass(W+" "+U),t;a._update(a._getValueFromPosition(i,r)),a._focusWithMouse(n.target),a._drag.dragstart(n),n.preventDefault()}},a.wrapper.find(V+", "+N).on(M,i).end().on(M,function(){e(document.documentElement).one("selectstart",f.preventDefault)}).on(I,function(){a._drag._end()}),a.wrapper.find(H).attr(K,0).on(P,function(){a._setTooltipTimeout()}).on(R,function(e){a._focusWithMouse(e.target),e.preventDefault()}).on(L,w(a._focus,a)).on(O,w(a._blur,a)),r=w(function(e){var t=a._nextValueByIndex(a._valueIndex+1*e);a._setValueInRange(t),a._drag._updateTooltip(t)},a),s.showButtons&&(o=w(function(e,t){this._clearTooltipTimeout(),(1===e.which||x.touch&&0===e.which)&&(r(t),this.timeout=setTimeout(w(function(){this.timer=setInterval(function(){r(t)},60)},this),200))},a),a.wrapper.find(".k-button").on(P,w(function(e){this._clearTimer(),a._focusWithMouse(e.target)},a)).on(B,function(t){e(t.currentTarget).addClass("k-state-hover")}).on("mouseout"+A,w(function(t){e(t.currentTarget).removeClass("k-state-hover"),this._clearTimer()},a)).eq(0).on(E,w(function(e){o(e,1)},a)).click(!1).end().eq(1).on(E,w(function(e){o(e,-1)},a)).click(f.preventDefault)),a.wrapper.find(H).off(F,!1).on(F,w(this._keydown,a)),s.enabled=!0)},disable:function(){var t=this;t.wrapper.removeClass(j).addClass(G),e(t.element).prop($,$),t.wrapper.find(".k-button").off(E).on(E,f.preventDefault).off(P).on(P,f.preventDefault).off("mouseleave"+A).on("mouseleave"+A,f.preventDefault).off(B).on(B,f.preventDefault),t.wrapper.find(V+", "+N).off(M).off(I),t.wrapper.find(H).attr(K,-1).off(P).off(F).off(R).off(L).off(O),t.options.enabled=!1},_update:function(e){var t=this,n=t.value()!=e;t.value(e),n&&t.trigger(T,{value:t.options.value})},value:function(e){var n=this,i=n.options;return e=c(e),isNaN(e)?i.value:(e>=i.min&&i.max>=e&&i.value!=e&&(n.element.prop("value",l(e)),i.value=e,n._refreshAriaAttr(e),n._refresh()),t)},_refresh:function(){this.trigger(z,{value:this.options.value})},_refreshAriaAttr:function(e){var t,n=this,i=n._drag;t=i&&i._tooltipDiv?i._tooltipDiv.text():n._getFormattedValue(e,null),this.wrapper.find(H).attr("aria-valuenow",e).attr("aria-valuetext",t)},_clearTimer:function(){clearTimeout(this.timeout),clearInterval(this.timer)},_keydown:function(e){var t=this;e.keyCode in t._keyMap&&(t._clearTooltipTimeout(),t._setValueInRange(t._keyMap[e.keyCode](t.options.value)),t._drag._updateTooltip(t.value()),e.preventDefault())
},_setValueInRange:function(e){var n=this,i=n.options;return e=c(e),isNaN(e)?(n._update(i.min),t):(e=k.max(k.min(e,i.max),i.min),n._update(e),t)},_nextValueByIndex:function(e){var t=this._values.length;return this._isRtl&&(e=t-1-e),this._values[k.max(0,k.min(e,t-1))]},destroy:function(){var e=this;g.fn.destroy.call(e),e.wrapper.off(A).find(".k-button").off(A).end().find(H).off(A).end().find(V+", "+N).off(A).end(),e._drag.draggable.destroy(),e._drag._removeTooltip(!0)}});J.Selection=function(e,t,n){function i(i){var r=i-n.min,o=t._valueIndex=k.ceil(c(r/n.smallStep)),a=parseInt(t._pixelSteps[o],10),s=t._trackDiv.find(".k-slider-selection"),l=parseInt(e[t._outerSize]()/2,10),d=t._isRtl?2:0;s[t._sizeFn](t._isRtl?t._maxSelection-a:a),e.css(t._position,a-l-d)}i(n.value),t.bind([T,D,z],function(e){i(parseFloat(e.value,10))})},J.Drag=function(e,t,n,i){var r=this;r.owner=n,r.options=i,r.element=e,r.type=t,r.draggable=new m(e,{distance:0,dragstart:w(r._dragstart,r),drag:w(r.drag,r),dragend:w(r.dragend,r),dragcancel:w(r.dragcancel,r)}),e.click(!1)},J.Drag.prototype={dragstart:function(e){this.owner._activeDragHandle=this,this.draggable.userEvents.cancel(),this.draggable.userEvents._start(e)},_dragstart:function(n){var i=this,r=i.owner,o=i.options;return o.enabled?(this.owner._activeDragHandle=this,r.element.off(B),r.wrapper.find("."+W).removeClass(W+" "+U),i.element.addClass(W+" "+U),e(document.documentElement).css("cursor","pointer"),i.dragableArea=r._getDraggableArea(),i.step=k.max(o.smallStep*(r._maxSelection/r._distance),0),i.type?(i.selectionStart=o.selectionStart,i.selectionEnd=o.selectionEnd,r._setZIndex(i.type)):i.oldVal=i.val=o.value,i._removeTooltip(!0),i._createTooltip(),t):(n.preventDefault(),t)},_createTooltip:function(){var t,n,i=this,r=i.owner,o=i.options.tooltip,a="",s=e(window);o.enabled&&(o.template&&(t=i.tooltipTemplate=f.template(o.template)),e(".k-slider-tooltip").remove(),i.tooltipDiv=e("<div class='k-widget k-tooltip k-slider-tooltip'><!-- --></div>").appendTo(document.body),a=r._getFormattedValue(i.val||r.value(),i),i.type||(n="k-callout-"+(r._isHorizontal?"s":"e"),i.tooltipInnerDiv="<div class='k-callout "+n+"'><!-- --></div>",a+=i.tooltipInnerDiv),i.tooltipDiv.html(a),i._scrollOffset={top:s.scrollTop(),left:s.scrollLeft()},i.moveTooltip())},drag:function(e){var t,n=this,i=n.owner,r=e.x.location,o=e.y.location,a=n.dragableArea.startPoint,s=n.dragableArea.endPoint;e.preventDefault(),n.val=i._isHorizontal?i._isRtl?n.constrainValue(r,a,s,s>r):n.constrainValue(r,a,s,r>=s):n.constrainValue(o,s,a,s>=o),n.oldVal!=n.val&&(n.oldVal=n.val,n.type?("firstHandle"==n.type?n.selectionStart=n.selectionEnd>n.val?n.val:n.selectionEnd=n.val:n.val>n.selectionStart?n.selectionEnd=n.val:n.selectionStart=n.selectionEnd=n.val,t={values:[n.selectionStart,n.selectionEnd],value:[n.selectionStart,n.selectionEnd]}):t={value:n.val},i.trigger(D,t)),n._updateTooltip(n.val)},_updateTooltip:function(e){var t=this,n=t.options,i=n.tooltip,r="";i.enabled&&(t.tooltipDiv||t._createTooltip(),r=t.owner._getFormattedValue(c(e),t),t.type||(r+=t.tooltipInnerDiv),t.tooltipDiv.html(r),t.moveTooltip())},dragcancel:function(){return this.owner._refresh(),e(document.documentElement).css("cursor",""),this._end()},dragend:function(){var t=this,n=t.owner;return e(document.documentElement).css("cursor",""),t.type?n._update(t.selectionStart,t.selectionEnd):(n._update(t.val),t.draggable.userEvents._disposeAll()),t._end()},_end:function(){var e=this,t=e.owner;return t._focusWithMouse(e.element),t.element.on(B),!1},_removeTooltip:function(t){var n=this,i=n.owner;n.tooltipDiv&&i.options.tooltip.enabled&&i.options.enabled&&(t?(n.tooltipDiv.remove(),n.tooltipDiv=null):n.tooltipDiv.fadeOut("slow",function(){e(this).remove(),n.tooltipDiv=null}))},moveTooltip:function(){var t,n,i,r,o=this,a=o.owner,s=0,l=0,c=o.element,d=f.getOffset(c),u=8,h=e(window),p=o.tooltipDiv.find(".k-callout"),g=o.tooltipDiv.outerWidth(),m=o.tooltipDiv.outerHeight();o.type?(t=a.wrapper.find(H),d=f.getOffset(t.eq(0)),n=f.getOffset(t.eq(1)),a._isHorizontal?(s=n.top,l=d.left+(n.left-d.left)/2):(s=d.top+(n.top-d.top)/2,l=n.left),r=t.eq(0).outerWidth()+2*u):(s=d.top,l=d.left,r=c.outerWidth()+2*u),a._isHorizontal?(l-=parseInt((g-c[a._outerSize]())/2,10),s-=m+p.height()+u):(s-=parseInt((m-c[a._outerSize]())/2,10),l-=g+p.width()+u),a._isHorizontal?(i=o._flip(s,m,r,h.outerHeight()+o._scrollOffset.top),s+=i,l+=o._fit(l,g,h.outerWidth()+o._scrollOffset.left)):(i=o._flip(l,g,r,h.outerWidth()+o._scrollOffset.left),s+=o._fit(s,m,h.outerHeight()+o._scrollOffset.top),l+=i),i>0&&p&&(p.removeClass(),p.addClass("k-callout k-callout-"+(a._isHorizontal?"n":"w"))),o.tooltipDiv.css({top:s,left:l})},_fit:function(e,t,n){var i=0;return e+t>n&&(i=n-(e+t)),0>e&&(i=-e),i},_flip:function(e,t,n,i){var r=0;return e+t>i&&(r+=-(n+t)),0>e+r&&(r+=n+t),r},constrainValue:function(e,t,n,i){var r=this,o=0;return o=e>t&&n>e?r.owner._getValueFromPosition(e,r.dragableArea):i?r.options.max:r.options.min}},f.ui.plugin(J),p=X.extend({init:function(n,i){var r,o=this,a=e(n).find("input"),s=a.eq(0)[0],c=a.eq(1)[0];s.type="text",c.type="text",i=v({},{selectionStart:d(s,"value"),min:d(s,"min"),max:d(s,"max"),smallStep:d(s,"step")},{selectionEnd:d(c,"value"),min:d(c,"min"),max:d(c,"max"),smallStep:d(c,"step")},i),i&&i.enabled===t&&(i.enabled=!a.is("[disabled]")),X.fn.init.call(o,n,i),i=o.options,u(i.selectionStart)&&null!==i.selectionStart||(i.selectionStart=i.min,a.eq(0).prop("value",l(i.min))),u(i.selectionEnd)&&null!==i.selectionEnd||(i.selectionEnd=i.max,a.eq(1).prop("value",l(i.max))),r=o.wrapper.find(H),new p.Selection(r,o,i),o._firstHandleDrag=new J.Drag(r.eq(0),"firstHandle",o,i),o._lastHandleDrag=new J.Drag(r.eq(1),"lastHandle",o,i)},options:{name:"RangeSlider",leftDragHandleTitle:"drag",rightDragHandleTitle:"drag",tooltip:{format:"{0:#,#.##}"},selectionStart:null,selectionEnd:null},enable:function(n){var i,r=this,o=r.options;r.disable(),n!==!1&&(r.wrapper.removeClass(G).addClass(j),r.wrapper.find("input").removeAttr($),i=function(n){var i,a,s,l,c,d,u,h=Q(n)[0];if(h){if(i=r._isHorizontal?h.location.pageX:h.location.pageY,a=r._getDraggableArea(),s=r._getValueFromPosition(i,a),l=e(n.target),l.hasClass("k-draghandle"))return r.wrapper.find("."+W).removeClass(W+" "+U),l.addClass(W+" "+U),t;o.selectionStart>s?(c=s,d=o.selectionEnd,u=r._firstHandleDrag):s>r.selectionEnd?(c=o.selectionStart,d=s,u=r._lastHandleDrag):o.selectionEnd-s>=s-o.selectionStart?(c=s,d=o.selectionEnd,u=r._firstHandleDrag):(c=o.selectionStart,d=s,u=r._lastHandleDrag),u.dragstart(n),r._setValueInRange(c,d),r._focusWithMouse(u.element)}},r.wrapper.find(V+", "+N).on(M,i).end().on(M,function(){e(document.documentElement).one("selectstart",f.preventDefault)}).on(I,function(){r._activeDragHandle&&r._activeDragHandle._end()}),r.wrapper.find(H).attr(K,0).on(P,function(){r._setTooltipTimeout()}).on(R,function(e){r._focusWithMouse(e.target),e.preventDefault()}).on(L,w(r._focus,r)).on(O,w(r._blur,r)),r.wrapper.find(H).off(F,f.preventDefault).eq(0).on(F,w(function(e){this._keydown(e,"firstHandle")},r)).end().eq(1).on(F,w(function(e){this._keydown(e,"lastHandle")},r)),r.options.enabled=!0)},disable:function(){var e=this;e.wrapper.removeClass(j).addClass(G),e.wrapper.find("input").prop($,$),e.wrapper.find(V+", "+N).off(M).off(I),e.wrapper.find(H).attr(K,-1).off(P).off(F).off(R).off(L).off(O),e.options.enabled=!1},_keydown:function(e,t){var n,i,r,o=this,a=o.options.selectionStart,s=o.options.selectionEnd;e.keyCode in o._keyMap&&(o._clearTooltipTimeout(),"firstHandle"==t?(r=o._activeHandleDrag=o._firstHandleDrag,a=o._keyMap[e.keyCode](a),a>s&&(s=a)):(r=o._activeHandleDrag=o._lastHandleDrag,s=o._keyMap[e.keyCode](s),a>s&&(a=s)),o._setValueInRange(a,s),n=Math.max(a,o.options.selectionStart),i=Math.min(s,o.options.selectionEnd),r.selectionEnd=Math.max(i,o.options.selectionStart),r.selectionStart=Math.min(n,o.options.selectionEnd),r._updateTooltip(o.value()[o._activeHandle]),e.preventDefault())},_update:function(e,t){var n=this,i=n.value(),r=i[0]!=e||i[1]!=t;n.value([e,t]),r&&n.trigger(T,{values:[e,t],value:[e,t]})},value:function(e){return e&&e.length?this._value(e[0],e[1]):this._value()},_value:function(e,n){var i=this,r=i.options,o=r.selectionStart,a=r.selectionEnd;return isNaN(e)&&isNaN(n)?[o,a]:(e=c(e),n=c(n),e>=r.min&&r.max>=e&&n>=r.min&&r.max>=n&&n>=e&&(o!=e||a!=n)&&(i.element.find("input").eq(0).prop("value",l(e)).end().eq(1).prop("value",l(n)),r.selectionStart=e,r.selectionEnd=n,i._refresh(),i._refreshAriaAttr(e,n)),t)},values:function(e,t){return b(e)?this._value(e[0],e[1]):this._value(e,t)},_refresh:function(){var e=this,t=e.options;e.trigger(z,{values:[t.selectionStart,t.selectionEnd],value:[t.selectionStart,t.selectionEnd]}),t.selectionStart==t.max&&t.selectionEnd==t.max&&e._setZIndex("firstHandle")},_refreshAriaAttr:function(e,t){var n,i=this,r=i.wrapper.find(H),o=i._activeHandleDrag;n=i._getFormattedValue([e,t],o),r.eq(0).attr("aria-valuenow",e),r.eq(1).attr("aria-valuenow",t),r.attr("aria-valuetext",n)},_setValueInRange:function(e,t){var n=this.options;e=k.max(k.min(e,n.max),n.min),t=k.max(k.min(t,n.max),n.min),e==n.max&&t==n.max&&this._setZIndex("firstHandle"),this._update(k.min(e,t),k.max(e,t))},_setZIndex:function(t){this.wrapper.find(H).each(function(n){e(this).css("z-index","firstHandle"==t?1-n:n)})},destroy:function(){var e=this;g.fn.destroy.call(e),e.wrapper.off(A).find(V+", "+N).off(A).end().find(H).off(A),e._firstHandleDrag.draggable.destroy(),e._lastHandleDrag.draggable.destroy()}}),p.Selection=function(e,t,n){function i(i){i=i||[];var o=i[0]-n.min,a=i[1]-n.min,s=k.ceil(c(o/n.smallStep)),l=k.ceil(c(a/n.smallStep)),d=t._pixelSteps[s],u=t._pixelSteps[l],h=parseInt(e.eq(0)[t._outerSize]()/2,10),p=t._isRtl?2:0;e.eq(0).css(t._position,d-h-p).end().eq(1).css(t._position,u-h-p),r(d,u)}function r(e,n){var i,r,o=t._trackDiv.find(".k-slider-selection");i=k.abs(e-n),o[t._sizeFn](i),t._isRtl?(r=k.max(e,n),o.css("right",t._maxSelection-r-1)):(r=k.min(e,n),o.css(t._position,r-1))}i(t.value()),t.bind([T,D,z],function(e){i(e.values)})},f.ui.plugin(p)}(window.kendo.jQuery),function(e,t,n){function i(e,t,n){n=d(n),n&&!n.equals(e.color())&&("change"==t&&(e._value=n),n=1!=n.a?n.toCssRgba():n.toCss(),e.trigger(t,{value:n}))}function r(e,t,n){var i,r;return e=Array.prototype.slice.call(e),i=e.length,r=e.indexOf(t),0>r?0>n?e[i-1]:e[0]:(r+=n,0>r?r+=i:r%=i,e[r])}function o(e){e.preventDefault()}function a(e,t){return function(){return e.apply(t,arguments)}}var s=window.kendo,l=s.ui,c=l.Widget,d=s.parseColor,u=s.Color,h=s.keys,p="background-color",f="k-state-selected",g="000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7",m="FFFFFF,FFCCFF,FF99FF,FF66FF,FF33FF,FF00FF,CCFFFF,CCCCFF,CC99FF,CC66FF,CC33FF,CC00FF,99FFFF,99CCFF,9999FF,9966FF,9933FF,9900FF,FFFFCC,FFCCCC,FF99CC,FF66CC,FF33CC,FF00CC,CCFFCC,CCCCCC,CC99CC,CC66CC,CC33CC,CC00CC,99FFCC,99CCCC,9999CC,9966CC,9933CC,9900CC,FFFF99,FFCC99,FF9999,FF6699,FF3399,FF0099,CCFF99,CCCC99,CC9999,CC6699,CC3399,CC0099,99FF99,99CC99,999999,996699,993399,990099,FFFF66,FFCC66,FF9966,FF6666,FF3366,FF0066,CCFF66,CCCC66,CC9966,CC6666,CC3366,CC0066,99FF66,99CC66,999966,996666,993366,990066,FFFF33,FFCC33,FF9933,FF6633,FF3333,FF0033,CCFF33,CCCC33,CC9933,CC6633,CC3333,CC0033,99FF33,99CC33,999933,996633,993333,990033,FFFF00,FFCC00,FF9900,FF6600,FF3300,FF0000,CCFF00,CCCC00,CC9900,CC6600,CC3300,CC0000,99FF00,99CC00,999900,996600,993300,990000,66FFFF,66CCFF,6699FF,6666FF,6633FF,6600FF,33FFFF,33CCFF,3399FF,3366FF,3333FF,3300FF,00FFFF,00CCFF,0099FF,0066FF,0033FF,0000FF,66FFCC,66CCCC,6699CC,6666CC,6633CC,6600CC,33FFCC,33CCCC,3399CC,3366CC,3333CC,3300CC,00FFCC,00CCCC,0099CC,0066CC,0033CC,0000CC,66FF99,66CC99,669999,666699,663399,660099,33FF99,33CC99,339999,336699,333399,330099,00FF99,00CC99,009999,006699,003399,000099,66FF66,66CC66,669966,666666,663366,660066,33FF66,33CC66,339966,336666,333366,330066,00FF66,00CC66,009966,006666,003366,000066,66FF33,66CC33,669933,666633,663333,660033,33FF33,33CC33,339933,336633,333333,330033,00FF33,00CC33,009933,006633,003333,000033,66FF00,66CC00,669900,666600,663300,660000,33FF00,33CC00,339900,336600,333300,330000,00FF00,00CC00,009900,006600,003300,000000",v={apply:"Apply",cancel:"Cancel"},_=".kendoColorTools",y="click"+_,w="keydown"+_,b=s.support.browser,k=b.msie&&9>b.version,x=c.extend({init:function(e,t){var n,i=this;c.fn.init.call(i,e,t),e=i.element,t=i.options,i._value=t.value=d(t.value),i._tabIndex=e.attr("tabIndex")||0,n=i._ariaId=t.ariaId,n&&e.attr("aria-labelledby",n),t._standalone&&(i._triggerSelect=i._triggerChange)},options:{name:"ColorSelector",value:null,_standalone:!0},events:["change","select","cancel"],color:function(e){return e!==n&&(this._value=d(e),this._updateUI(this._value)),this._value},value:function(e){return e=this.color(e),e&&(e=this.options.opacity?e.toCssRgba():e.toCss()),e||null},enable:function(t){0===arguments.length&&(t=!0),e(".k-disabled-overlay",this.wrapper).remove(),t||this.wrapper.append("<div class='k-disabled-overlay'></div>"),this._onEnable(t)},_select:function(e,t){var n=this._value;e=this.color(e),t||(this.element.trigger("change"),e.equals(n)?this._standalone||this.trigger("cancel"):this.trigger("change",{value:this.value()}))},_triggerSelect:function(e){i(this,"select",e)},_triggerChange:function(e){i(this,"change",e)},destroy:function(){this.element&&this.element.off(_),this.wrapper&&this.wrapper.off(_).find("*").off(_),this.wrapper=null,c.fn.destroy.call(this)},_updateUI:e.noop,_selectOnHide:function(){return null},_cancel:function(){this.trigger("cancel")}}),C=x.extend({init:function(t,n){var i,r,o,l,c=this;if(x.fn.init.call(c,t,n),t=c.wrapper=c.element,n=c.options,i=n.palette,"websafe"==i?(i=m,n.columns=18):"basic"==i&&(i=g),"string"==typeof i&&(i=i.split(",")),e.isArray(i)&&(i=e.map(i,function(e){return d(e)})),c._selectedID=(n.ariaId||s.guid())+"_selected",t.addClass("k-widget k-colorpalette").attr("role","grid").attr("aria-readonly","true").append(e(c._template({colors:i,columns:n.columns,tileSize:n.tileSize,value:c._value,id:n.ariaId}))).on(y,".k-item",function(t){c._select(e(t.currentTarget).css(p))}).attr("tabIndex",c._tabIndex).on(w,a(c._keydown,c)),r=n.tileSize){if(/number|string/.test(typeof r))o=l=parseFloat(r);else{if("object"!=typeof r)throw Error("Unsupported value for the 'tileSize' argument");o=parseFloat(r.width),l=parseFloat(r.height)}t.find(".k-item").css({width:o,height:l})}},focus:function(){this.wrapper.focus()},options:{name:"ColorPalette",columns:10,tileSize:null,palette:"basic"},_onEnable:function(e){e?this.wrapper.attr("tabIndex",this._tabIndex):this.wrapper.removeAttr("tabIndex")},_keydown:function(t){var n,i,a=this.wrapper,s=a.find(".k-item"),l=s.filter("."+f).get(0),c=t.keyCode;if(c==h.LEFT?n=r(s,l,-1):c==h.RIGHT?n=r(s,l,1):c==h.DOWN?n=r(s,l,this.options.columns):c==h.UP?n=r(s,l,-this.options.columns):c==h.ENTER?(o(t),l&&this._select(e(l).css(p))):c==h.ESC&&this._cancel(),n){o(t),this._current(n);try{i=d(n.css(p)),this._triggerSelect(i)}catch(u){}}},_current:function(t){this.wrapper.find("."+f).removeClass(f).attr("aria-selected",!1).removeAttr("id"),e(t).addClass(f).attr("aria-selected",!0).attr("id",this._selectedID),this.element.removeAttr("aria-activedescendant").attr("aria-activedescendant",this._selectedID)},_updateUI:function(t){var i=null;this.wrapper.find(".k-item").each(function(){var r=d(e(this).css(p));return r&&r.equals(t)?(i=this,!1):n}),this._current(i)},_template:s.template('<table class="k-palette k-reset" role="presentation"><tr role="row"># for (var i = 0; i < colors.length; ++i) { ## var selected = colors[i].equals(value); ## if (i && i % columns == 0) { # </tr><tr role="row"> # } #<td role="gridcell" unselectable="on" style="background-color:#= colors[i].toCss() #"#= selected ? " aria-selected=true" : "" # #=(id && i === 0) ? "id=\\""+id+"\\" " : "" # class="k-item#= selected ? " '+f+'" : "" #" aria-label="#= colors[i].toCss() #"></td># } #</tr></table>')}),S=x.extend({init:function(t,n){var i=this;x.fn.init.call(i,t,n),n=i.options,t=i.element,i.wrapper=t.addClass("k-widget k-flatcolorpicker").append(i._template(n)),i._hueElements=e(".k-hsv-rectangle, .k-transparency-slider .k-slider-track",t),i._selectedColor=e(".k-selected-color-display",t),i._colorAsText=e("input.k-color-value",t),i._sliders(),i._hsvArea(),i._updateUI(i._value||d("#f00")),t.find("input.k-color-value").on(w,function(t){var n,r,o=this;if(t.keyCode==h.ENTER)try{n=d(o.value),r=i.color(),i._select(n,n.equals(r))}catch(a){e(o).addClass("k-state-error")}else i.options.autoupdate&&setTimeout(function(){var e=d(o.value,!0);e&&i._updateUI(e,!0)},10)}).end().on(y,".k-controls button.apply",function(){i._select(i._getHSV())}).on(y,".k-controls button.cancel",function(){i._updateUI(i.color()),i._cancel()}),k&&i._applyIEFilter()},destroy:function(){this._hueSlider.destroy(),this._opacitySlider&&this._opacitySlider.destroy(),this._hueSlider=this._opacitySlider=this._hsvRect=this._hsvHandle=this._hueElements=this._selectedColor=this._colorAsText=null,x.fn.destroy.call(this)},options:{name:"FlatColorPicker",opacity:!1,buttons:!1,input:!0,preview:!0,autoupdate:!0,messages:v},_applyIEFilter:function(){var e=this.element.find(".k-hue-slider .k-slider-track")[0],t=e.currentStyle.backgroundImage;t=t.replace(/^url\([\'\"]?|[\'\"]?\)$/g,""),e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"', sizingMethod='scale')"},_sliders:function(){function e(e){n._updateUI(n._getHSV(e.value,null,null,null))}function t(e){n._updateUI(n._getHSV(null,null,null,e.value/100))}var n=this,i=n.element;n._hueSlider=i.find(".k-hue-slider").kendoSlider({min:0,max:359,tickPlacement:"none",showButtons:!1,slide:e,change:e}).data("kendoSlider"),n._opacitySlider=i.find(".k-transparency-slider").kendoSlider({min:0,max:100,tickPlacement:"none",showButtons:!1,slide:t,change:t}).data("kendoSlider")},_hsvArea:function(){function e(e,n){var i=this.offset,r=e-i.left,o=n-i.top,a=this.width,s=this.height;r=0>r?0:r>a?a:r,o=0>o?0:o>s?s:o,t._svChange(r/a,1-o/s)}var t=this,n=t.element,i=n.find(".k-hsv-rectangle"),r=i.find(".k-draghandle").attr("tabIndex",0).on(w,a(t._keydown,t));t._hsvEvents=new s.UserEvents(i,{global:!0,press:function(t){this.offset=s.getOffset(i),this.width=i.width(),this.height=i.height(),r.focus(),e.call(this,t.x.location,t.y.location)},start:function(){i.addClass("k-dragging"),r.focus()},move:function(t){t.preventDefault(),e.call(this,t.x.location,t.y.location)},end:function(){i.removeClass("k-dragging")}}),t._hsvRect=i,t._hsvHandle=r},_onEnable:function(e){this._hueSlider.enable(e),this._opacitySlider&&this._opacitySlider.enable(e),this.wrapper.find("input").attr("disabled",!e);var t=this._hsvRect.find(".k-draghandle");e?t.attr("tabIndex",this._tabIndex):t.removeAttr("tabIndex")},_keydown:function(e){function t(t,n){var r=i._getHSV();r[t]+=n*(e.shiftKey?.01:.05),0>r[t]&&(r[t]=0),r[t]>1&&(r[t]=1),i._updateUI(r),o(e)}function n(t){var n=i._getHSV();n.h+=t*(e.shiftKey?1:5),0>n.h&&(n.h=0),n.h>359&&(n.h=359),i._updateUI(n),o(e)}var i=this;switch(e.keyCode){case h.LEFT:e.ctrlKey?n(-1):t("s",-1);break;case h.RIGHT:e.ctrlKey?n(1):t("s",1);break;case h.UP:t(e.ctrlKey&&i._opacitySlider?"a":"v",1);break;case h.DOWN:t(e.ctrlKey&&i._opacitySlider?"a":"v",-1);break;case h.ENTER:i._select(i._getHSV());break;case h.F2:i.wrapper.find("input.k-color-value").focus().select();break;case h.ESC:i._cancel()}},focus:function(){this._hsvHandle.focus()},_getHSV:function(e,t,n,i){var r=this._hsvRect,o=r.width(),a=r.height(),s=this._hsvHandle.position();return null==e&&(e=this._hueSlider.value()),null==t&&(t=s.left/o),null==n&&(n=1-s.top/a),null==i&&(i=this._opacitySlider?this._opacitySlider.value()/100:1),u.fromHSV(e,t,n,i)},_svChange:function(e,t){var n=this._getHSV(null,e,t,null);this._updateUI(n)},_updateUI:function(e,t){var n=this,i=n._hsvRect;e&&(this._colorAsText.removeClass("k-state-error"),n._selectedColor.css(p,e.toDisplay()),t||n._colorAsText.val(n._opacitySlider?e.toCssRgba():e.toCss()),n._triggerSelect(e),e=e.toHSV(),n._hsvHandle.css({left:e.s*i.width()+"px",top:(1-e.v)*i.height()+"px"}),n._hueElements.css(p,u.fromHSV(e.h,1,1,1).toCss()),n._hueSlider.value(e.h),n._opacitySlider&&n._opacitySlider.value(100*e.a))},_selectOnHide:function(){return this.options.buttons?null:this._getHSV()},_template:s.template('# if (preview) { #<div class="k-selected-color"><div class="k-selected-color-display"><input class="k-color-value" #= !data.input ? \'style="visibility: hidden;"\' : "" #></div></div># } #<div class="k-hsv-rectangle"><div class="k-hsv-gradient"></div><div class="k-draghandle"></div></div><input class="k-hue-slider" /># if (opacity) { #<input class="k-transparency-slider" /># } ## if (buttons) { #<div unselectable="on" class="k-controls"><button class="k-button k-primary apply">#: messages.apply #</button> <button class="k-button cancel">#: messages.cancel #</button></div># } #')}),T=c.extend({init:function(t,n){var i,r,o,a,s,l=this;c.fn.init.call(l,t,n),n=l.options,t=l.element,i=t.attr("value")||t.val(),i=i?d(i,!0):d(n.value,!0),l._value=n.value=i,r=l.wrapper=e(l._template(n)),t.hide().after(r),t.is("input")&&(t.appendTo(r),o=t.closest("label"),a=t.attr("id"),a&&(o=o.add('label[for="'+a+'"]')),o.click(function(e){l.open(),e.preventDefault()})),l._tabIndex=t.attr("tabIndex")||0,l.enable(!t.attr("disabled")),s=t.attr("accesskey"),s&&(t.attr("accesskey",null),r.attr("accesskey",s)),l.bind("activate",function(e){e.isDefaultPrevented()||l.toggle()}),l._updateUI(i)},destroy:function(){this.wrapper.off(_).find("*").off(_),this._popup&&(this._selector.destroy(),this._popup.destroy()),this._selector=this._popup=this.wrapper=null,c.fn.destroy.call(this)},enable:function(e){var t=this,n=t.wrapper,i=n.children(".k-picker-wrap"),r=i.find(".k-select");0===arguments.length&&(e=!0),t.element.attr("disabled",!e),n.attr("aria-disabled",!e),r.off(_).on("mousedown"+_,o),n.addClass("k-state-disabled").removeAttr("tabIndex").add("*",n).off(_),e&&n.removeClass("k-state-disabled").attr("tabIndex",t._tabIndex).on("mouseenter"+_,function(){i.addClass("k-state-hover")}).on("mouseleave"+_,function(){i.removeClass("k-state-hover")}).on("focus"+_,function(){i.addClass("k-state-focused")}).on("blur"+_,function(){i.removeClass("k-state-focused")}).on(w,a(t._keydown,t)).on(y,".k-icon",a(t.toggle,t)).on(y,t.options.toolIcon?".k-tool-icon":".k-selected-color",function(){t.trigger("activate")})},_template:s.template('<span role="textbox" aria-haspopup="true" class="k-widget k-colorpicker k-header"><span class="k-picker-wrap k-state-default"># if (toolIcon) { #<span class="k-tool-icon #= toolIcon #"><span class="k-selected-color"></span></span># } else { #<span class="k-selected-color"></span># } #<span class="k-select" unselectable="on"><span class="k-icon k-i-arrow-s" unselectable="on"></span></span></span></span>'),options:{name:"ColorPicker",palette:null,columns:10,toolIcon:null,value:null,messages:v,opacity:!1,buttons:!0,preview:!0,ARIATemplate:'Current selected color is #=data || ""#'},events:["activate","change","select","open","close"],open:function(){this._getPopup().open()},close:function(){this._getPopup().close()},toggle:function(){this._getPopup().toggle()},color:x.fn.color,value:x.fn.value,_select:x.fn._select,_triggerSelect:x.fn._triggerSelect,_isInputTypeColor:function(){var e=this.element[0];return/^input$/i.test(e.tagName)&&/^color$/i.test(e.type)},_updateUI:function(e){var t="";e&&(t=this._isInputTypeColor()||1==e.a?e.toCss():e.toCssRgba(),this.element.val(t)),this._ariaTemplate||(this._ariaTemplate=s.template(this.options.ARIATemplate)),this.wrapper.attr("aria-label",this._ariaTemplate(t)),this._triggerSelect(e),this.wrapper.find(".k-selected-color").css(p,e?e.toDisplay():"transparent")},_keydown:function(e){var t=e.keyCode;this._getPopup().visible()?(t==h.ESC?this._selector._cancel():this._selector._keydown(e),o(e)):(t==h.ENTER||t==h.DOWN)&&(this.open(),o(e))},_getPopup:function(){var t,i,r,o,a=this,l=a._popup;return l||(t=a.options,i=t.palette?C:S,t._standalone=!1,delete t.select,delete t.change,delete t.cancel,r=s.guid(),o=a._selector=new i(e('<div id="'+r+'"/>').appendTo(document.body),t),a.wrapper.attr("aria-owns",r),a._popup=l=o.wrapper.kendoPopup({anchor:a.wrapper}).data("kendoPopup"),o.bind({select:function(e){a._updateUI(d(e.value))},change:function(){a._select(o.color()),a.close()},cancel:function(){a.close()}}),l.bind({close:function(e){if(a.trigger("close"))return e.preventDefault(),n;a.wrapper.children(".k-picker-wrap").removeClass("k-state-focused");var t=o._selectOnHide();t?a._select(t):(a.wrapper.focus(),a._updateUI(a.color()))},open:function(e){a.trigger("open")?e.preventDefault():a.wrapper.children(".k-picker-wrap").addClass("k-state-focused")},activate:function(){o._select(a.color(),!0),o.focus(),a.wrapper.children(".k-picker-wrap").addClass("k-state-focused")}})),l}});l.plugin(C),l.plugin(S),l.plugin(T)}(jQuery,parseInt),function(e,t){function n(e,t){return'<span unselectable="on" class="k-link"><span unselectable="on" class="k-icon k-i-arrow-'+e+'" title="'+t+'">'+t+"</span></span>"}var i=window.kendo,r=i.caret,o=i.keys,a=i.ui,s=a.Widget,l=i._activeElement,c=i._extractFormat,d=i.parseFloat,u=i.support.placeholder,h=i.getCulture,p=i._round,f="change",g="disabled",m="readonly",v="k-input",_="spin",y=".kendoNumericTextBox",w="touchend",b="mouseleave"+y,k="mouseenter"+y+" "+b,x="k-state-default",C="k-state-focused",S="k-state-hover",T="focus",D=".",A="k-state-selected",E="k-state-disabled",M="aria-disabled",P="aria-readonly",I=/^(-)?(\d*)$/,z=null,F=e.proxy,R=s.extend({init:function(e,n){var r,o,a,l,d,u=this,h=n&&n.step!==t;s.fn.init.call(u,e,n),n=u.options,e=u.element.on("focusout"+y,F(u._focusout,u)).attr("role","spinbutton"),n.placeholder=n.placeholder||e.attr("placeholder"),u._reset(),u._wrapper(),u._arrows(),u._input(),i.support.mobileOS?u._text.on(w+y+" "+T+y,function(t){u._toggleText(!1),t.type===T&&e.focus()}):u._text.on(T+y,F(u._click,u)),r=u.min(e.attr("min")),o=u.max(e.attr("max")),a=u._parse(e.attr("step")),n.min===z&&r!==z&&(n.min=r),n.max===z&&o!==z&&(n.max=o),h||a===z||(n.step=a),e.attr("aria-valuemin",n.min).attr("aria-valuemax",n.max),n.format=c(n.format),l=n.value,u.value(l!==z?l:e.val()),d=e.is("[disabled]"),d?u.enable(!1):u.readonly(e.is("[readonly]")),i.notify(u)},options:{name:"NumericTextBox",decimals:z,min:z,max:z,value:z,step:1,culture:"",format:"n",spinners:!0,placeholder:"",upArrowText:"Increase value",downArrowText:"Decrease value"},events:[f,_],_editable:function(e){var t=this,n=t.element,i=e.disable,r=e.readonly,o=t._text.add(n),a=t._inputWrapper.off(k);t._toggleText(!0),t._upArrowEventHandler.unbind("press"),t._downArrowEventHandler.unbind("press"),n.off("keydown"+y).off("keypress"+y).off("paste"+y),r||i?(a.addClass(i?E:x).removeClass(i?x:E),o.attr(g,i).attr(m,r).attr(M,i).attr(P,r)):(a.addClass(x).removeClass(E).on(k,t._toggleHover),o.removeAttr(g).removeAttr(m).attr(M,!1).attr(P,!1),t._upArrowEventHandler.bind("press",function(e){e.preventDefault(),t._spin(1),t._upArrow.addClass(A)}),t._downArrowEventHandler.bind("press",function(e){e.preventDefault(),t._spin(-1),t._downArrow.addClass(A)}),t.element.on("keydown"+y,F(t._keydown,t)).on("keypress"+y,F(t._keypress,t)).on("paste"+y,F(t._paste,t)))},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},destroy:function(){var e=this;e.element.add(e._text).add(e._upArrow).add(e._downArrow).add(e._inputWrapper).off(y),e._upArrowEventHandler.destroy(),e._downArrowEventHandler.destroy(),e._form&&e._form.off("reset",e._resetHandler),s.fn.destroy.call(e)},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},step:function(e){return this._option("step",e)},value:function(e){var n,i=this;return e===t?i._value:(e=i._parse(e),n=i._adjust(e),e===n&&(i._update(e),i._old=i._value),t)},focus:function(){this._focusin()},_adjust:function(e){var t=this,n=t.options,i=n.min,r=n.max;return e===z?e:(i!==z&&i>e?e=i:r!==z&&e>r&&(e=r),e)},_arrows:function(){var t,r=this,o=function(){clearTimeout(r._spinning),t.removeClass(A)},a=r.options,s=a.spinners,l=r.element;t=l.siblings(".k-icon"),t[0]||(t=e(n("n",a.upArrowText)+n("s",a.downArrowText)).insertAfter(l),t.wrapAll('<span class="k-select"/>')),s||(t.parent().toggle(s),r._inputWrapper.addClass("k-expand-padding")),r._upArrow=t.eq(0),r._upArrowEventHandler=new i.UserEvents(r._upArrow,{release:o}),r._downArrow=t.eq(1),r._downArrowEventHandler=new i.UserEvents(r._downArrow,{release:o})},_blur:function(){var e=this;e._toggleText(!0),e._change(e.element.val())},_click:function(e){var t=this;clearTimeout(t._focusing),t._focusing=setTimeout(function(){var n,i,o,a=e.target,s=r(a)[0],l=a.value.substring(0,s),c=t._format(t.options.format),d=c[","],u=0;d&&(i=RegExp("\\"+d,"g"),o=RegExp("([\\d\\"+d+"]+)(\\"+c[D]+")?(\\d+)?")),o&&(n=o.exec(l)),n&&(u=n[0].replace(i,"").length,-1!=l.indexOf("(")&&0>t._value&&u++),t._focusin(),r(t.element[0],u)})},_change:function(e){var t=this;t._update(e),e=t._value,t._old!=e&&(t._old=e,t.element.trigger(f),t.trigger(f))},_culture:function(e){return e||h(this.options.culture)},_focusin:function(){var e=this;e._inputWrapper.addClass(C),e._toggleText(!1),e.element[0].focus()},_focusout:function(){var e=this;clearTimeout(e._focusing),e._inputWrapper.removeClass(C).removeClass(S),e._blur()},_format:function(e,t){var n=this._culture(t).numberFormat;return e=e.toLowerCase(),e.indexOf("c")>-1?n=n.currency:e.indexOf("p")>-1&&(n=n.percent),n},_input:function(){var t,n=this,i="k-formatted-value",r=n.element.addClass(v).show()[0],o=r.accessKey,a=n.wrapper;t=a.find(D+i),t[0]||(t=e('<input type="text"/>').insertBefore(r).addClass(i));try{r.setAttribute("type","text")}catch(s){r.type="text"}t[0].tabIndex=r.tabIndex,t[0].style.cssText=r.style.cssText,t.prop("placeholder",n.options.placeholder),o&&(t.attr("accesskey",o),r.accessKey=""),n._text=t.addClass(r.className)},_keydown:function(e){var t=this,n=e.keyCode;t._key=n,n==o.DOWN?t._step(-1):n==o.UP?t._step(1):n==o.ENTER&&t._change(t.element.val())},_keypress:function(e){var t,n,i,a,s,l,c,d,u,h,p;0===e.which||e.ctrlKey||e.keyCode===o.BACKSPACE||e.keyCode===o.ENTER||(t=this,n=t.options.min,i=t.element,a=r(i),s=a[0],l=a[1],c=String.fromCharCode(e.which),d=t._format(t.options.format),u=t._key===o.NUMPAD_DOT,h=i.val(),u&&(c=d[D]),h=h.substring(0,s)+c+h.substring(l),p=t._numericRegex(d).test(h),p&&u?(i.val(h),r(i,s+c.length),e.preventDefault()):(null!==n&&n>=0&&"-"===h.charAt(0)||!p)&&e.preventDefault(),t._key=0)},_numericRegex:function(e){var t=this,n=e[D],i=t.options.decimals;return n===D&&(n="\\"+n),i===z&&(i=e.decimals),0===i?I:(t._separator!==n&&(t._separator=n,t._floatRegExp=RegExp("^(-)?(((\\d+("+n+"\\d*)?)|("+n+"\\d*)))?$")),t._floatRegExp)},_paste:function(e){var t=this,n=e.target,i=n.value;setTimeout(function(){t._parse(n.value)===z&&t._update(i)})},_option:function(e,n){var i=this,r=i.options;return n===t?r[e]:(n=i._parse(n),(n||"step"!==e)&&(r[e]=n,i.element.attr("aria-value"+e,n).attr(e,n)),t)},_spin:function(e,t){var n=this;t=t||500,clearTimeout(n._spinning),n._spinning=setTimeout(function(){n._spin(e,50)},t),n._step(e)},_step:function(e){var t=this,n=t.element,i=t._parse(n.val())||0;l()!=n[0]&&t._focusin(),i+=t.options.step*e,t._update(t._adjust(i)),t.trigger(_)},_toggleHover:function(t){e(t.currentTarget).toggleClass(S,"mouseenter"===t.type)},_toggleText:function(e){var t=this;t._text.toggle(e),t.element.toggle(!e)},_parse:function(e,t){return d(e,this._culture(t),this.options.format)},_update:function(e){var t,n=this,r=n.options,o=r.format,a=r.decimals,s=n._culture(),l=n._format(o,s);a===z&&(a=l.decimals),e=n._parse(e,s),t=e!==z,t&&(e=parseFloat(p(e,a))),n._value=e=n._adjust(e),n._placeholder(i.toString(e,o,s)),t?(e=""+e,-1!==e.indexOf("e")&&(e=p(+e,a)),e=e.replace(D,l[D])):e="",n.element.val(e).attr("aria-valuenow",e)
},_placeholder:function(e){this._text.val(e),u||e||this._text.val(this.options.placeholder)},_wrapper:function(){var t,n=this,i=n.element,r=i[0];t=i.parents(".k-numerictextbox"),t.is("span.k-numerictextbox")||(t=i.hide().wrap('<span class="k-numeric-wrap k-state-default" />').parent(),t=t.wrap("<span/>").parent()),t[0].style.cssText=r.style.cssText,r.style.width="",n.wrapper=t.addClass("k-widget k-numerictextbox").addClass(r.className).css("display",""),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(n[0].value)})},t._form=r.on("reset",t._resetHandler))}});a.plugin(R)}(window.kendo.jQuery),function(e){function t(n,i){n.filters&&(n.filters=e.grep(n.filters,function(e){return t(e,i),e.filters?e.filters.length:e.field!=i}))}function n(e){var t,n,i,r,o,a;if(e&&e.length)for(a=[],t=0,n=e.length;n>t;t++)i=e[t],o=i.text||i.value||i,r=null==i.value?i.text||i:i.value,a[t]={text:o,value:r};return a}function i(t,n){return e.grep(t,function(t){return t.filters?(t.filters=e.grep(t.filters,function(e){return e.field!=n}),t.filters.length):t.field!=n})}var r=window.kendo,o=r.ui,a=e.proxy,s="kendoPopup",l="init",c=".kendoFilterMenu",d="Is equal to",u="Is not equal to",h={number:"numerictextbox",date:"datepicker"},p={string:"text",number:"number",date:"date"},f=r.isFunction,g=o.Widget,m='<div><div class="k-filter-help-text">#=messages.info#</div><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label><div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>',v='<div><div class="k-filter-help-text">#=messages.info#</div><select data-#=ns#bind="value: filters[0].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[0].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#"></select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}##if(extra){#<select class="k-filter-and" data-#=ns#bind="value: logic" data-#=ns#role="dropdownlist"><option value="and">#=messages.and#</option><option value="or">#=messages.or#</option></select><select data-#=ns#bind="value: filters[1].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[1].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#"></select>#}else{#<input data-#=ns#bind="value: filters[1].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""#/>#}##}#<div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>',_='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=field#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[0].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[0].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#if(extra){#</ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="and" />#=messages.and#</label></li><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="or" />#=messages.or#</label></li></ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[1].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[1].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[1].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#}#</ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></div></form></div>',y='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=field#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label></li><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label></li></ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></form></div>',w=g.extend({init:function(t,n){var i,o,s,l,d=this,u="string";g.fn.init.call(d,t,n),i=d.operators=n.operators||{},t=d.element,n=d.options,n.appendToElement||(s=t.addClass("k-with-icon k-filterable").find(".k-grid-filter"),s[0]||(s=t.prepend('<a class="k-grid-filter" href="#"><span class="k-icon k-filter"/></a>').find(".k-grid-filter")),s.attr("tabindex",-1).on("click"+c,a(d._click,d))),d.link=s||e(),d.dataSource=n.dataSource,d.field=n.field||t.attr(r.attr("field")),d.model=d.dataSource.reader.model,d._parse=function(e){return e+""},d.model&&d.model.fields&&(l=d.model.fields[d.field],l&&(u=l.type||"string",l.parse&&(d._parse=a(l.parse,l)))),n.values&&(u="enums"),d.type=u,i=i[u]||n.operators[u];for(o in i)break;d._defaultFilter=function(){return{field:d.field,operator:o||"eq",value:""}},d._refreshHandler=a(d.refresh,d),d.dataSource.bind("change",d._refreshHandler),n.appendToElement?d._init():d.refresh()},_init:function(){var t,n=this,i=n.options.ui,o=f(i);n.pane=n.options.pane,n.pane&&(n._isMobile=!0),o||(t=i||h[n.type]),n._isMobile?n._createMobileForm(t):n._createForm(t),n.form.on("submit"+c,a(n._submit,n)).on("reset"+c,a(n._reset,n)),o&&n.form.find(".k-textbox").removeClass("k-textbox").each(function(){i(e(this))}),n.form.find("["+r.attr("role")+"=numerictextbox]").removeClass("k-textbox").end().find("["+r.attr("role")+"=datetimepicker]").removeClass("k-textbox").end().find("["+r.attr("role")+"=timepicker]").removeClass("k-textbox").end().find("["+r.attr("role")+"=datepicker]").removeClass("k-textbox"),n.refresh(),n.trigger(l,{field:n.field,container:n.form})},_createForm:function(t){var i=this,o=i.options,l=i.operators||{},d=i.type;l=l[d]||o.operators[d],i.form=e('<form class="k-filter-menu"/>').html(r.template("boolean"===d?m:v)({field:i.field,format:o.format,ns:r.ns,messages:o.messages,extra:o.extra,operators:l,type:d,role:t,values:n(o.values)})),o.appendToElement?(i.element.append(i.form),i.popup=i.element.closest(".k-popup").data(s)):i.popup=i.form[s]({anchor:i.link,open:a(i._open,i),activate:a(i._activate,i),close:function(){i.options.closeCallback&&i.options.closeCallback(i.element)}}).data(s),i.form.on("keydown"+c,a(i._keydown,i))},_createMobileForm:function(t){var i=this,o=i.options,a=i.operators||{},s=i.type;a=a[s]||o.operators[s],i.form=e("<div />").html(r.template("boolean"===s?y:_)({field:i.field,format:o.format,ns:r.ns,messages:o.messages,extra:o.extra,operators:a,type:s,role:t,useRole:!r.support.input.date&&"date"===s||"number"===s,inputType:p[s],values:n(o.values)})),i.view=i.pane.append(i.form.html()),i.form=i.view.element.find("form"),i.view.element.on("click",".k-submit",function(e){i.form.submit(),e.preventDefault()}).on("click",".k-cancel",function(e){i._closeForm(),e.preventDefault()})},refresh:function(){var e=this,t=e.dataSource.filter()||{filters:[],logic:"and"};e.filterModel=r.observable({logic:"and",filters:[e._defaultFilter(),e._defaultFilter()]}),e.form&&r.bind(e.form.children().first(),e.filterModel),e._bind(t)?e.link.addClass("k-state-active"):e.link.removeClass("k-state-active")},destroy:function(){var e=this;g.fn.destroy.call(e),e.form&&(r.unbind(e.form),r.destroy(e.form),e.form.unbind(c),e.popup&&(e.popup.destroy(),e.popup=null),e.form=null),e.view&&(e.view.purge(),e.view=null),e.link.unbind(c),e._refreshHandler&&(e.dataSource.unbind("change",e._refreshHandler),e.dataSource=null),e.element=e.link=e._refreshHandler=e.filterModel=null},_bind:function(e){var t,n,i,r,o=this,a=e.filters,s=!1,l=0,c=o.filterModel;for(t=0,n=a.length;n>t;t++)r=a[t],r.field==o.field?(c.set("logic",e.logic),i=c.filters[l],i||(c.filters.push({field:o.field}),i=c.filters[l]),i.set("value",o._parse(r.value)),i.set("operator",r.operator),l++,s=!0):r.filters&&(s=s||o._bind(r));return s},_merge:function(n){var i,r,o,a=this,s=n.logic||"and",l=n.filters,c=a.dataSource.filter()||{filters:[],logic:"and"};for(t(c,a.field),l=e.grep(l,function(e){return""!==e.value&&null!=e.value}),r=0,o=l.length;o>r;r++)i=l[r],i.value=a._parse(i.value);return l.length&&(c.filters.length?(n.filters=l,"and"!==c.logic&&(c.filters=[{logic:c.logic,filters:c.filters}],c.logic="and"),c.filters.push(l.length>1?n:l[0])):(c.filters=l,c.logic=s)),c},filter:function(e){e=this._merge(e),e.filters.length&&this.dataSource.filter(e)},clear:function(){var t=this,n=t.dataSource.filter()||{filters:[]};n.filters=e.grep(n.filters,function(e){return e.filters?(e.filters=i(e.filters,t.field),e.filters.length):e.field!=t.field}),n.filters.length||(n=null),t.dataSource.filter(n)},_submit:function(e){e.preventDefault(),e.stopPropagation(),this.filter(this.filterModel.toJSON()),this._closeForm()},_reset:function(){this.clear(),this._closeForm()},_closeForm:function(){this._isMobile?this.pane.navigate("",this.options.animations.right):this.popup.close()},_click:function(e){e.preventDefault(),e.stopPropagation(),this.popup||this.pane||this._init(),this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle()},_open:function(){var t;e(".k-filter-menu").not(this.form).each(function(){t=e(this).data(s),t&&t.close()})},_activate:function(){this.form.find(":kendoFocusable:first").focus()},_keydown:function(e){e.keyCode==r.keys.ESC&&this.popup.close()},events:[l],options:{name:"FilterMenu",extra:!0,appendToElement:!1,type:"string",operators:{string:{eq:d,neq:u,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{eq:d,neq:u,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"},date:{eq:d,neq:u,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},enums:{eq:d,neq:u}},messages:{info:"Show items with value that:",isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",and:"And",or:"Or",selectValue:"-Select value-",operator:"Operator",value:"Value",cancel:"Cancel"},animations:{left:"slide",right:"slide:right"}}});o.plugin(w)}(window.kendo.jQuery),function(e,t){function n(e,t){return e=e.split(" ")[!t+0]||e,e.replace("top","up").replace("bottom","down")}function i(e,t,n){e=e.split(" ")[!t+0]||e;var i={origin:["bottom",n?"right":"left"],position:["top",n?"right":"left"]},r=/left|right/.test(e);return r?(i.origin=["top",e],i.position[1]=c.directions[e].reverse):(i.origin[0]=e,i.position[0]=c.directions[e].reverse),i.origin=i.origin.join(" "),i.position=i.position.join(" "),i}function r(t,n){try{return e.contains(t,n)}catch(i){return!1}}function o(t){t=e(t),t.addClass("k-item").children(x).addClass(P),t.children("a").addClass(T).children(x).addClass(P),t.filter(":not([disabled])").addClass(G),t.filter(".k-separator:empty").append("&nbsp;"),t.filter("li[disabled]").addClass(Y).removeAttr("disabled").attr("aria-disabled",!0),t.filter("[role]").length||t.attr("role","menuitem"),t.children("."+T).length||t.contents().filter(function(){return!(this.nodeName.match(b)||3==this.nodeType&&!e.trim(this.nodeValue))}).wrapAll("<span class='"+T+"'/>"),a(t),s(t)}function a(t){t=e(t),t.find("> .k-link > [class*=k-i-arrow]:not(.k-sprite)").remove(),t.filter(":has(.k-menu-group)").children(".k-link:not(:has([class*=k-i-arrow]:not(.k-sprite)))").each(function(){var t=e(this),n=t.parent().parent();t.append("<span class='k-icon "+(n.hasClass(S+"-horizontal")?"k-i-arrow-s":"k-i-arrow-e")+"'/>")})}function s(t){t=e(t),t.filter(".k-first:not(:first-child)").removeClass(M),t.filter(".k-last:not(:last-child)").removeClass(D),t.filter(":first-child").addClass(M),t.filter(":last-child").addClass(D)}var l,c=window.kendo,d=c.ui,u=c._activeElement,h=c.support.touch&&c.support.mobileOS,p="mousedown",f="click",g=e.extend,m=e.proxy,v=e.each,_=c.template,y=c.keys,w=d.Widget,b=/^(ul|a|div)$/i,k=".kendoMenu",x="img",C="open",S="k-menu",T="k-link",D="k-last",A="close",E="timer",M="k-first",P="k-image",I="select",z="zIndex",F="activate",R="deactivate",B="touchstart"+k+" MSPointerDown"+k+" pointerdown"+k,L=c.support.pointers,O=c.support.msPointers,H=O||L,N=L?"pointerover":O?"MSPointerOver":"mouseenter",V=L?"pointerout":O?"MSPointerOut":"mouseleave",U=h||H,W=e(document.documentElement),j="kendoPopup",G="k-state-default",q="k-state-hover",$="k-state-focused",Y="k-state-disabled",K=".k-menu",Q=".k-menu-group",X=Q+",.k-animation-container",J=":not(.k-list) > .k-item",Z=".k-item.k-state-disabled",et=".k-item:not(.k-state-disabled)",tt=".k-item:not(.k-state-disabled) > .k-link",nt=":not(.k-item.k-separator)",it=nt+":eq(0)",rt=nt+":last",ot="div:not(.k-animation-container,.k-list-container)",at={2:1,touch:1},st={content:_("<div class='k-content #= groupCssClass() #' tabindex='-1'>#= content(item) #</div>"),group:_("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) # role='menu' aria-hidden='true'>#= renderItems(data) #</ul>"),itemWrapper:_("<#= tag(item) # class='#= textClass(item) #'#= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:_("<li class='#= wrapperCssClass(group, item) #' role='menuitem' #=item.items ? \"aria-haspopup='true'\": \"\"##=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:_("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:_("<span class='#= arrowClass(item, group) #'></span>"),sprite:_("<span class='k-sprite #= spriteCssClass #'></span>"),empty:_("")},lt={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return n+=t.enabled===!1?" k-state-disabled":" k-state-default",e.firstLevel&&0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),t.cssClass&&(n+=" "+t.cssClass),n},textClass:function(){return T},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e,t){var n="k-icon";return n+=t.horizontal?" k-i-arrow-s":" k-i-arrow-e"},text:function(e){return e.encoded===!1?e.text:c.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},groupAttributes:function(e){return e.expanded!==!0?" style='display:none'":""},groupCssClass:function(){return"k-group k-menu-group"},content:function(e){return e.content?e.content:"&nbsp;"}},ct=w.extend({init:function(t,n){var i=this;w.fn.init.call(i,t,n),t=i.wrapper=i.element,n=i.options,i._initData(n),i._updateClasses(),i._animations(n),i.nextItemZIndex=100,i._tabindex(),i._focusProxy=m(i._focusHandler,i),t.on(B,i._focusProxy).on(f+k,Z,!1).on(f+k,et,m(i._click,i)).on("keydown"+k,m(i._keydown,i)).on("focus"+k,m(i._focus,i)).on("focus"+k,".k-content",m(i._focus,i)).on(B+" "+p+k,".k-content",m(i._preventClose,i)).on("blur"+k,m(i._removeHoverItem,i)).on("blur"+k,"[tabindex]",m(i._checkActiveElement,i)).on(N+k,et,m(i._mouseenter,i)).on(V+k,et,m(i._mouseleave,i)).on(N+k+" "+V+k+" "+p+k+" "+f+k,tt,m(i._toggleHover,i)),n.openOnClick&&(i.clicked=!1,i._documentClickHandler=m(i._documentClick,i),e(document).click(i._documentClickHandler)),t.attr("role","menubar"),t[0].id&&(i._ariaId=c.format("{0}_mn_active",t[0].id)),c.notify(i)},events:[C,A,F,R,I],options:{name:"Menu",animation:{open:{duration:200},close:{duration:100}},orientation:"horizontal",direction:"default",openOnClick:!1,closeOnClick:!0,hoverDelay:100,popupCollision:t},_initData:function(e){var t=this;e.dataSource&&(t.angular("cleanup",function(){return{elements:t.element.children()}}),t.element.empty(),t.append(e.dataSource,t.element),t.angular("compile",function(){return{elements:t.element.children()}}))},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=g(!0,t,e.animation),"dataSource"in e&&this._initData(e),this._updateClasses(),w.fn.setOptions.call(this,e)},destroy:function(){var t=this;w.fn.destroy.call(t),t.element.off(k),t._documentClickHandler&&e(document).unbind("click",t._documentClickHandler),c.destroy(t.element)},enable:function(e,t){return this._toggleDisabled(e,t!==!1),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.length?t.find("> .k-menu-group, > .k-animation-container > .k-menu-group"):null);return v(n.items,function(){n.group.append(this),a(this)}),a(t),s(n.group.find(".k-first, .k-last").add(n.items)),this},insertBefore:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return v(n.items,function(){t.before(this),a(this),s(this)}),s(t),this},insertAfter:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return v(n.items,function(){t.after(this),a(this),s(this)}),s(t),this},_insert:function(t,n,i){var r,a,s,l,c=this;return n&&n.length||(i=c.element),s=e.isPlainObject(t),l={firstLevel:i.hasClass(S),horizontal:i.hasClass(S+"-horizontal"),expanded:!0,length:i.children().length},n&&!i.length&&(i=e(ct.renderGroup({group:l})).appendTo(n)),s||e.isArray(t)?r=e(e.map(s?[t]:t,function(t,n){return"string"==typeof t?e(t).get():e(ct.renderItem({group:l,item:g(t,{index:n})})).get()})):(r="string"==typeof t&&"<"!=t[0]?c.element.find(t):e(t),a=r.find("> ul").addClass("k-menu-group").attr("role","menu"),r=r.filter("li"),r.add(a.find("> li")).each(function(){o(this)})),{items:r,group:i}},remove:function(e){var t,n,i,r;return e=this.element.find(e),t=this,n=e.parentsUntil(t.element,J),i=e.parent("ul:not(.k-menu)"),e.remove(),i&&!i.children(J).length&&(r=i.parent(".k-animation-container"),r.length?r.remove():i.remove()),n.length&&(n=n.eq(0),a(n),s(n)),t},open:function(r){var o=this,a=o.options,s="horizontal"==a.orientation,l=a.direction,d=c.support.isRtl(o.wrapper);return r=o.element.find(r),/^(top|bottom|default)$/.test(l)&&(l=d?s?(l+" left").replace("default","bottom"):"left":s?(l+" right").replace("default","bottom"):"right"),r.siblings().find(">.k-popup:visible,>.k-animation-container>.k-popup:visible").each(function(){var t=e(this).data("kendoPopup");t&&t.close()}),r.each(function(){var r=e(this);clearTimeout(r.data(E)),r.data(E,setTimeout(function(){var u,h,p,f,m,v,_,y,w=r.find(".k-menu-group:first:hidden");w[0]&&o._triggerEvent({item:r[0],type:C})===!1&&(!w.find(".k-menu-group")[0]&&w.children(".k-item").length>1?(h=e(window).height(),p=function(){w.css({maxHeight:h-(w.outerHeight()-w.height())-c.getShadows(w).bottom,overflow:"auto"})},c.support.browser.msie&&7>=c.support.browser.version?setTimeout(p,0):p()):w.css({maxHeight:"",overflow:""}),r.data(z,r.css(z)),r.css(z,o.nextItemZIndex++),u=w.data(j),f=r.parent().hasClass(S),m=f&&s,v=i(l,f,d),_=a.animation.open.effects,y=_!==t?_:"slideIn:"+n(l,f),u?(u=w.data(j),u.options.origin=v.origin,u.options.position=v.position,u.options.animation.open.effects=y):u=w.kendoPopup({activate:function(){o._triggerEvent({item:this.wrapper.parent(),type:F})},deactivate:function(e){e.sender.element.removeData("targetTransform").css({opacity:""}),o._triggerEvent({item:this.wrapper.parent(),type:R})},origin:v.origin,position:v.position,collision:a.popupCollision!==t?a.popupCollision:m?"fit":"fit flip",anchor:r,appendTo:r,animation:{open:g(!0,{effects:y},a.animation.open),close:a.animation.close},close:function(e){var t=e.sender.wrapper.parent();o._triggerEvent({item:t[0],type:A})?e.preventDefault():(t.css(z,t.data(z)),t.removeData(z),U&&(t.removeClass(q),o._removeHoverItem()))}}).data(j),w.removeAttr("aria-hidden"),u.open())},o.options.hoverDelay))}),o},close:function(t,n){var i=this,r=i.element;return t=r.find(t),t.length||(t=r.find(">.k-item")),t.each(function(){var t=e(this);!n&&i._isRootItem(t)&&(i.clicked=!1),clearTimeout(t.data(E)),t.data(E,setTimeout(function(){var e=t.find(".k-menu-group:not(.k-list-container):not(.k-calendar-container):first:visible").data(j);e&&(e.close(),e.element.attr("aria-hidden",!0))},i.options.hoverDelay))}),i},_toggleDisabled:function(t,n){this.element.find(t).each(function(){e(this).toggleClass(G,n).toggleClass(Y,!n).attr("aria-disabled",!n)})},_toggleHover:function(t){var n=e(c.eventTarget(t)||t.target).closest(J),i=t.type==N||-1!==p.indexOf(t.type);n.parents("li."+Y).length||n.toggleClass(q,i||"mousedown"==t.type||"click"==t.type),this._removeHoverItem()},_preventClose:function(){this.options.closeOnClick||(this._closurePrevented=!0)},_checkActiveElement:function(t){var n=this,i=e(t?t.currentTarget:this._hoverItem()),o=n._findRootParent(i)[0];this._closurePrevented||setTimeout(function(){(!document.hasFocus()||!r(o,c._activeElement())&&t&&!r(o,t.currentTarget))&&n.close(o)},0),this._closurePrevented=!1},_removeHoverItem:function(){var e=this._hoverItem();e&&e.hasClass($)&&(e.removeClass($),this._oldHoverItem=null)},_updateClasses:function(){var e,t=this.element,n=".k-menu-init div ul";t.removeClass("k-menu-horizontal k-menu-vertical"),t.addClass("k-widget k-reset k-header k-menu-init "+S).addClass(S+"-"+this.options.orientation),t.find("li > ul").filter(function(){return!c.support.matchesSelector.call(this,n)}).addClass("k-group k-menu-group").attr("role","menu").attr("aria-hidden",t.is(":visible")).end().find("li > div").addClass("k-content").attr("tabindex","-1"),e=t.find("> li,.k-menu-group > li"),t.removeClass("k-menu-init"),e.each(function(){o(this)})},_mouseenter:function(t){var n=this,i=e(t.currentTarget),o=i.children(".k-animation-container").length||i.children(Q).length;t.delegateTarget==i.parents(K)[0]&&(n.options.openOnClick&&!n.clicked||h||(L||O)&&t.originalEvent.pointerType in at&&n._isRootItem(i.closest(J))||!r(t.currentTarget,t.relatedTarget)&&o&&n.open(i),(n.options.openOnClick&&n.clicked||U)&&i.siblings().each(m(function(e,t){n.close(t,!0)},n)))},_mouseleave:function(n){var i=this,o=e(n.currentTarget),a=o.children(".k-animation-container").length||o.children(Q).length;return o.parentsUntil(".k-animation-container",".k-list-container,.k-calendar-container")[0]?(n.stopImmediatePropagation(),t):(i.options.openOnClick||h||(L||O)&&n.originalEvent.pointerType in at||r(n.currentTarget,n.relatedTarget||n.target)||!a||r(n.currentTarget,c._activeElement())||i.close(o),t)},_click:function(n){var i,r,o,a=this,s=a.options,l=e(c.eventTarget(n)),d=l[0]?l[0].nodeName.toUpperCase():"",u="INPUT"==d||"SELECT"==d||"BUTTON"==d||"LABEL"==d,h=l.closest("."+T),p=l.closest(J),f=h.attr("href"),g=l.attr("href"),m=e("<a href='#' />").attr("href"),v=!!f&&f!==m,_=v&&!!f.match(/^#/),y=!!g&&g!==m,w=s.openOnClick&&o&&a._isRootItem(p);if(s.openOnClick||!p.children(ot)[0]){if(p.hasClass(Y))return n.preventDefault(),t;if(n.handled||!a._triggerEvent({item:p[0],type:I})||u||n.preventDefault(),n.handled=!0,r=p.children(X),o=r.is(":visible"),s.closeOnClick&&(!v||_)&&(!r.length||w))return p.removeClass(q).css("height"),a._oldHoverItem=a._findRootParent(p),a.close(h.parentsUntil(a.element,J)),a.clicked=!1,-1!="MSPointerUp".indexOf(n.type)&&n.preventDefault(),t;v&&n.enterKey&&h[0].click(),(a._isRootItem(p)&&s.openOnClick||c.support.touch||(L||O)&&a._isRootItem(p.closest(J)))&&(v||u||y||n.preventDefault(),a.clicked=!0,i=r.is(":visible")?A:C,(s.closeOnClick||i!=A)&&a[i](p))}},_documentClick:function(e){r(this.element[0],e.target)||(this.clicked=!1)},_focus:function(n){var i=this,r=n.target,o=i._hoverItem(),a=u();return r==i.wrapper[0]||e(r).is(":kendoFocusable")?(a===n.currentTarget&&(o.length?i._moveHover([],o):i._oldHoverItem||i._moveHover([],i.wrapper.children().first())),t):(n.stopPropagation(),e(r).closest(".k-content").closest(".k-menu-group").closest(".k-item").addClass($),i.wrapper.focus(),t)},_keydown:function(e){var n,i,r,o=this,a=e.keyCode,s=o._oldHoverItem,l=c.support.isRtl(o.wrapper);if(e.target==e.currentTarget||a==y.ESC){if(s||(s=o._oldHoverItem=o._hoverItem()),i=o._itemBelongsToVertival(s),r=o._itemHasChildren(s),a==y.RIGHT)n=o[l?"_itemLeft":"_itemRight"](s,i,r);else if(a==y.LEFT)n=o[l?"_itemRight":"_itemLeft"](s,i,r);else if(a==y.DOWN)n=o._itemDown(s,i,r);else if(a==y.UP)n=o._itemUp(s,i,r);else if(a==y.ESC)n=o._itemEsc(s,i);else if(a==y.ENTER||a==y.SPACEBAR)n=s.children(".k-link"),n.length>0&&(o._click({target:n[0],preventDefault:function(){},enterKey:!0}),o._moveHover(s,o._findRootParent(s)));else if(a==y.TAB)return n=o._findRootParent(s),o._moveHover(s,n),o._checkActiveElement(),t;n&&n[0]&&(e.preventDefault(),e.stopPropagation())}},_hoverItem:function(){return this.wrapper.find(".k-item.k-state-hover,.k-item.k-state-focused").filter(":visible")},_itemBelongsToVertival:function(e){var t=this.wrapper.hasClass("k-menu-vertical");return e.length?e.parent().hasClass("k-menu-group")||t:t},_itemHasChildren:function(e){return e.length?e.children("ul.k-menu-group, div.k-animation-container").length>0:!1},_moveHover:function(t,n){var i=this,r=i._ariaId;t.length&&n.length&&t.removeClass($),n.length&&(n[0].id&&(r=n[0].id),n.addClass($),i._oldHoverItem=n,r&&(i.element.removeAttr("aria-activedescendant"),e("#"+r).removeAttr("id"),n.attr("id",r),i.element.attr("aria-activedescendant",r)))},_findRootParent:function(e){return this._isRootItem(e)?e:e.parentsUntil(K,"li.k-item").last()},_isRootItem:function(e){return e.parent().hasClass(S)},_itemRight:function(e,t,n){var i,r,o=this;if(!e.hasClass(Y))return t?n?(o.open(e),i=e.find(".k-menu-group").children().first()):"horizontal"==o.options.orientation&&(r=o._findRootParent(e),o.close(r),i=r.nextAll(it)):(i=e.nextAll(it),i.length||(i=e.prevAll(rt))),i&&!i.length?i=o.wrapper.children(".k-item").first():i||(i=[]),o._moveHover(e,i),i},_itemLeft:function(e,t){var n,i=this;return t?(n=e.parent().closest(".k-item"),i.close(n),i._isRootItem(n)&&"horizontal"==i.options.orientation&&(n=n.prevAll(it))):(n=e.prevAll(it),n.length||(n=e.nextAll(rt))),n.length||(n=i.wrapper.children(".k-item").last()),i._moveHover(e,n),n},_itemDown:function(e,t,n){var i,r=this;if(t)i=e.nextAll(it);else{if(!n||e.hasClass(Y))return;r.open(e),i=e.find(".k-menu-group").children().first()}return!i.length&&e.length?i=e.parent().children().first():e.length||(i=r.wrapper.children(".k-item").first()),r._moveHover(e,i),i},_itemUp:function(e,t){var n,i=this;if(t)return n=e.prevAll(it),!n.length&&e.length?n=e.parent().children().last():e.length||(n=i.wrapper.children(".k-item").last()),i._moveHover(e,n),n},_itemEsc:function(e,t){var n,i=this;return t?(n=e.parent().closest(".k-item"),i.close(n),i._moveHover(e,n),n):e},_triggerEvent:function(e){var t=this;return t.trigger(e.type,{type:e.type,item:e.item})},_focusHandler:function(t){var n=this,i=e(c.eventTarget(t)).closest(J);setTimeout(function(){n._moveHover([],i),i.children(".k-content")[0]&&i.parent().closest(".k-item").removeClass($)},200)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{}},close:{hide:!0,effects:{}}})}});g(ct,{renderItem:function(e){e=g({menu:{},group:{}},e);var t=st.empty,n=e.item;return st.item(g(e,{image:n.imageUrl?st.image:t,sprite:n.spriteCssClass?st.sprite:t,itemWrapper:st.itemWrapper,renderContent:ct.renderContent,arrow:n.items||n.content?st.arrow:t,subGroup:ct.renderGroup},lt))},renderGroup:function(e){return st.group(g({renderItems:function(e){for(var t="",n=0,i=e.items,r=i?i.length:0,o=g({length:r},e.group);r>n;n++)t+=ct.renderItem(g(e,{group:o,item:g({index:n},i[n])}));return t}},e,lt))},renderContent:function(e){return st.content(g(e,lt))}}),l=ct.extend({init:function(t,n){var i=this;ct.fn.init.call(i,t,n),i.target=e(i.options.target),i._popup(),i._wire()},options:{name:"ContextMenu",filter:null,showOn:"contextmenu",orientation:"vertical",alignToAnchor:!1,target:"body"},events:[C,A,F,R,I],setOptions:function(t){var n=this;ct.fn.setOptions.call(n,t),n.target.off(n.showOn+k,n._showProxy),n.userEvents&&n.userEvents.destroy(),n.target=e(n.options.target),t.orientation&&n.popup.wrapper[0]&&n.popup.element.unwrap(),n._wire(),ct.fn.setOptions.call(this,t)},destroy:function(){var e=this;e.target.off(e.options.showOn+k),W.off(c.support.mousedown+k,e._closeProxy),e.userEvents&&e.userEvents.destroy(),ct.fn.destroy.call(e)},open:function(n,i){var o=this;return n=e(n)[0],r(o.element[0],e(n)[0])?ct.fn.open.call(o,n):o._triggerEvent({item:o.element,type:C})===!1&&(o.popup.visible()&&o.options.filter&&o.popup.close(!0),i!==t?(o.popup.wrapper.hide(),o.popup.open(n,i)):(o.popup.options.anchor=(n?n:o.popup.anchor)||o.target,o.popup.open()),W.off(o.popup.downEvent,o.popup._mousedownProxy),W.on(c.support.mousedown+k,o._closeProxy)),o},close:function(){var t=this;r(t.element[0],e(arguments[0])[0])?ct.fn.close.call(t,arguments[0]):t.popup.visible()&&t._triggerEvent({item:t.element,type:A})===!1&&(t.popup.close(),W.off(c.support.mousedown+k,t._closeProxy),t.unbind(I,t._closeTimeoutProxy))},_showHandler:function(e){var t,n=e,i=this,o=i.options;e.event&&(n=e.event,n.pageX=e.x.location,n.pageY=e.y.location),r(i.element[0],e.relatedTarget||e.target)||(i._eventOrigin=n,n.preventDefault(),n.stopImmediatePropagation(),i.element.find("."+$).removeClass($),(o.filter&&c.support.matchesSelector.call(n.currentTarget,o.filter)||!o.filter)&&(o.alignToAnchor?i.open(n.currentTarget):(i.popup.options.anchor=n.currentTarget,i._targetChild?(t=i.target.offset(),i.open(n.pageX-t.left,n.pageY-t.top)):i.open(n.pageX,n.pageY))))},_closeHandler:function(t){var n=this,i=e(t.relatedTarget||t.target),o=i.closest(n.target.selector)[0]==n.target[0],a=i.closest(et).children(X),s=r(n.element[0],i[0]);n._eventOrigin=t,!n.popup.visible()||(3===t.which||!o)&&o||(!n.options.closeOnClick||h||(L||O)&&t.originalEvent.pointerType in at||a[0]||!s)&&s||(s?(this.unbind(I,this._closeTimeoutProxy),n.bind(I,n._closeTimeoutProxy)):n.close())
},_wire:function(){var e=this,t=e.options,n=e.target;e._showProxy=m(e._showHandler,e),e._closeProxy=m(e._closeHandler,e),e._closeTimeoutProxy=m(e.close,e),n[0]&&(c.support.mobileOS&&"contextmenu"==t.showOn?(e.userEvents=new c.UserEvents(n,{filter:t.filter,allowSelection:!1}),n.on(t.showOn+k,!1),e.userEvents.bind("hold",e._showProxy)):t.filter?n.on(t.showOn+k,t.filter,e._showProxy):n.on(t.showOn+k,e._showProxy))},_triggerEvent:function(n){var i=this,r=e(i.popup.options.anchor)[0],o=i._eventOrigin;return i._eventOrigin=t,i.trigger(n.type,g({type:n.type,item:n.item||this.element[0],target:r},o?{event:o}:{}))},_popup:function(){var e=this;e._triggerProxy=m(e._triggerEvent,e),e.popup=e.element.addClass("k-context-menu").kendoPopup({anchor:e.target||"body",copyAnchorStyles:e.options.copyAnchorStyles,collision:e.options.popupCollision||"fit",animation:e.options.animation,activate:e._triggerProxy,deactivate:e._triggerProxy}).data("kendoPopup"),e._targetChild=r(e.target[0],e.popup.element[0])}}),d.plugin(ct),d.plugin(l)}(window.kendo.jQuery),function(e,t){function n(t){return e.trim(t).replace(/&nbsp;/gi,"")}function i(e,t){var n,i,r,o={};for(n=0,i=e.length;i>n;n++)r=e[n],o[r[t]]=r;return o}function r(e){var t,n=[];for(t=0;e.length>t;t++)e[t].columns?n=n.concat(r(e[t].columns)):n.push(e[t]);return n}var o=window.kendo,a=o.ui,s=e.proxy,l=e.extend,c=e.grep,d=e.map,u=e.inArray,h="k-state-selected",p="asc",f="desc",g="change",m="init",v="select",_="kendoPopup",y="kendoFilterMenu",w="kendoMenu",b=".kendoColumnMenu",k=a.Widget,x=k.extend({init:function(t,n){var i,r=this;k.fn.init.call(r,t,n),t=r.element,n=r.options,r.owner=n.owner,r.dataSource=n.dataSource,r.field=t.attr(o.attr("field")),r.title=t.attr(o.attr("title")),i=t.find(".k-header-column-menu"),i[0]||(i=t.addClass("k-with-icon").prepend('<a class="k-header-column-menu" href="#"><span class="k-icon k-i-arrowhead-s"/></a>').find(".k-header-column-menu")),r.link=i.attr("tabindex",-1).on("click"+b,s(r._click,r)),r.wrapper=e('<div class="k-column-menu"/>')},_init:function(){var e=this;e.pane=e.options.pane,e.pane&&(e._isMobile=!0),e._isMobile?e._createMobileMenu():e._createMenu(),e._angularItems("compile"),e._sort(),e._columns(),e._filter(),e._lockColumns(),e.trigger(m,{field:e.field,container:e.wrapper})},events:[m],options:{name:"ColumnMenu",messages:{sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filter:"Filter",columns:"Columns",done:"Done",settings:"Column Settings",lock:"Lock",unlock:"Unlock"},filter:"",columns:!0,sortable:!0,filterable:!0,animations:{left:"slide"}},_createMenu:function(){var e=this,t=e.options;e.wrapper.html(o.template(C)({ns:o.ns,messages:t.messages,sortable:t.sortable,filterable:t.filterable,columns:e._ownerColumns(),showColumns:t.columns,lockedColumns:t.lockedColumns})),e.popup=e.wrapper[_]({anchor:e.link,open:s(e._open,e),activate:s(e._activate,e),close:function(){e.options.closeCallback&&e.options.closeCallback(e.element)}}).data(_),e.menu=e.wrapper.children()[w]({orientation:"vertical",closeOnClick:!1}).data(w)},_createMobileMenu:function(){var e=this,t=e.options,n=o.template(S)({ns:o.ns,field:e.field,title:e.title||e.field,messages:t.messages,sortable:t.sortable,filterable:t.filterable,columns:e._ownerColumns(),showColumns:t.columns,lockedColumns:t.lockedColumns});e.view=e.pane.append(n),e.wrapper=e.view.element.find(".k-column-menu"),e.menu=new T(e.wrapper.children(),{pane:e.pane}),e.view.element.on("click",".k-done",function(t){e.close(),t.preventDefault()}),e.options.lockedColumns&&e.view.bind("show",function(){e._updateLockedColumns()})},_angularItems:function(t){var n=this;n.angular(t,function(){var t=n.wrapper.find(".k-columns-item input["+o.attr("field")+"]").map(function(){return e(this).closest("li")}),i=d(n._ownerColumns(),function(e){return{column:e._originalObject}});return{elements:t,data:i}})},destroy:function(){var e=this;e._angularItems("cleanup"),k.fn.destroy.call(e),e.filterMenu&&e.filterMenu.destroy(),e._refreshHandler&&e.dataSource.unbind(g,e._refreshHandler),e.options.columns&&e.owner&&e._updateColumnsMenuHandler&&(e.owner.unbind("columnShow",e._updateColumnsMenuHandler),e.owner.unbind("columnHide",e._updateColumnsMenuHandler)),e.menu&&(e.menu.element.off(b),e.menu.destroy()),e.wrapper.off(b),e.popup&&e.popup.destroy(),e.view&&e.view.purge(),e.link.off(b),e.owner=null,e.wrapper=null,e.element=null},close:function(){this.menu.close(),this.popup&&(this.popup.close(),this.popup.element.off("keydown"+b))},_click:function(e){e.preventDefault(),e.stopPropagation();var t=this.options;t.filter&&this.element.is(!t.filter)||(this.popup||this.pane||this._init(),this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle())},_open:function(){var t=this;e(".k-column-menu").not(t.wrapper).each(function(){e(this).data(_).close()}),t.popup.element.on("keydown"+b,function(e){e.keyCode==o.keys.ESC&&t.close()}),t.options.lockedColumns&&t._updateLockedColumns()},_activate:function(){this.menu.element.focus()},_ownerColumns:function(){var e=r(this.owner.columns),t=c(e,function(e){var t=!0,i=n(e.title||"");return(e.menu===!1||!e.field&&!i.length)&&(t=!1),t});return d(t,function(t){return{originalField:t.field,field:t.field||t.title,title:t.title||t.field,hidden:t.hidden,index:u(t,e),locked:!!t.locked,_originalObject:t}})},_sort:function(){var t=this;t.options.sortable&&(t.refresh(),t._refreshHandler=s(t.refresh,t),t.dataSource.bind(g,t._refreshHandler),t.menu.bind(v,function(n){var i,r=e(n.item);r.hasClass("k-sort-asc")?i=p:r.hasClass("k-sort-desc")&&(i=f),i&&(r.parent().find(".k-sort-"+(i==p?f:p)).removeClass(h),t._sortDataSource(r,i),t.close())}))},_sortDataSource:function(e,n){var i,r,o=this,a=o.options.sortable,s=null===a.compare?t:a.compare,l=o.dataSource,c=l.sort()||[];if(e.hasClass(h)&&a&&a.allowUnsort!==!1?(e.removeClass(h),n=t):e.addClass(h),a===!0||"single"===a.mode)c=[{field:o.field,dir:n,compare:s}];else{for(i=0,r=c.length;r>i;i++)if(c[i].field===o.field){c.splice(i,1);break}c.push({field:o.field,dir:n,compare:s})}l.sort(c)},_columns:function(){var t=this;t.options.columns&&(t._updateColumnsMenu(),t._updateColumnsMenuHandler=s(t._updateColumnsMenu,t),t.owner.bind(["columnHide","columnShow"],t._updateColumnsMenuHandler),t.menu.bind(v,function(n){var i,a,s,l=e(n.item),d=r(t.owner.columns);t._isMobile&&n.preventDefault(),l.parent().closest("li.k-columns-item")[0]&&(i=l.find(":checkbox"),i.attr("disabled")||(s=i.attr(o.attr("field")),a=c(d,function(e){return e.field==s||e.title==s})[0],a.hidden===!0?t.owner.showColumn(a):t.owner.hideColumn(a)))}))},_updateColumnsMenu:function(){var e,t,n,i,r,a,s=o.attr("field"),l=o.attr("locked"),h=c(this._ownerColumns(),function(e){return!e.hidden}),p=c(h,function(e){return e.originalField}),f=c(p,function(e){return e.locked===!0}).length,g=c(p,function(e){return e.locked!==!0}).length;for(h=d(h,function(e){return e.field}),a=this.wrapper.find(".k-columns-item input["+s+"]").prop("disabled",!1).prop("checked",!1),e=0,t=a.length;t>e;e++)n=a.eq(e),r="true"===n.attr(l),i=!1,u(n.attr(s),h)>-1&&(i=!0,n.prop("checked",i)),i&&(1==f&&r&&n.prop("disabled",!0),1!=g||r||n.prop("disabled",!0))},_updateColumnsLockedState:function(){var e,t,n,r,a=o.attr("field"),s=o.attr("locked"),l=i(this._ownerColumns(),"field"),c=this.wrapper.find(".k-columns-item input[type=checkbox]");for(e=0,t=c.length;t>e;e++)n=c.eq(e),r=l[n.attr(a)],r&&n.attr(s,r.locked);this._updateColumnsMenu()},_filter:function(){var t=this,n=t.options;n.filterable!==!1&&(t.filterMenu=t.wrapper.find(".k-filterable")[y](l(!0,{},{appendToElement:!0,dataSource:n.dataSource,values:n.values,field:t.field},n.filterable)).data(y),t._isMobile&&t.menu.bind(v,function(n){var i=e(n.item);i.hasClass("k-filter-item")&&t.pane.navigate(t.filterMenu.view,t.options.animations.left)}))},_lockColumns:function(){var t=this;t.menu.bind(v,function(n){var i=e(n.item);i.hasClass("k-lock")?(t.owner.lockColumn(t.field),t.close()):i.hasClass("k-unlock")&&(t.owner.unlockColumn(t.field),t.close())})},_updateLockedColumns:function(){var e,t,n,i,r=this.field,o=this.owner.columns,a=c(o,function(e){return e.field==r||e.title==r})[0];a&&(e=a.locked===!0,t=c(o,function(t){return!t.hidden&&(t.locked&&e||!t.locked&&!e)}).length,n=this.wrapper.find(".k-lock").removeClass("k-state-disabled"),i=this.wrapper.find(".k-unlock").removeClass("k-state-disabled"),(e||1==t)&&n.addClass("k-state-disabled"),e&&1!=t||i.addClass("k-state-disabled"),this._updateColumnsLockedState())},refresh:function(){var e,t,n,i=this,r=i.options.dataSource.sort()||[],o=i.field;for(i.wrapper.find(".k-sort-asc, .k-sort-desc").removeClass(h),t=0,n=r.length;n>t;t++)e=r[t],o==e.field&&i.wrapper.find(".k-sort-"+e.dir).addClass(h)}}),C='<ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-sprite k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-sprite k-i-sort-desc"></span>${messages.sortDescending}</span></li>#if(showColumns || filterable){#<li class="k-separator"></li>#}##}##if(showColumns){#<li class="k-item k-columns-item"><span class="k-link"><span class="k-sprite k-i-columns"></span>${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li><input type="checkbox" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</li>#}#</ul></li>#if(filterable || lockedColumns){#<li class="k-separator"></li>#}##}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link"><span class="k-sprite k-filter"></span>${messages.filter}</span><ul><li><div class="k-filterable"></div></li></ul></li>#if(lockedColumns){#<li class="k-separator"></li>#}##}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-sprite k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-sprite k-i-unlock"></span>${messages.unlock}</span></li>#}#</ul>',S='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-column-menu"><div data-#=ns#role="header" class="k-header">${messages.settings}<button class="k-button k-done">#=messages.done#</button></div><div class="k-column-menu k-mobile-list"><ul><li><span class="k-link">${title}</span><ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-sprite k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-sprite k-i-sort-desc"></span>${messages.sortDescending}</span></li>#}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-sprite k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-sprite k-i-unlock"></span>${messages.unlock}</span></li>#}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link k-filterable"><span class="k-sprite k-filter"></span>${messages.filter}</span></li>#}#</ul></li>#if(showColumns){#<li class="k-columns-item"><span class="k-link">${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li class="k-item"><label class="k-label"><input type="checkbox" class="k-check" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</label></li>#}#</ul></li>#}#</ul></div></div>',T=k.extend({init:function(e,t){k.fn.init.call(this,e,t),this.element.on("click"+b,"li:not(.k-separator):not(.k-state-disabled)","_click")},events:[v],_click:function(e){e.preventDefault(),this.trigger(v,{item:e.currentTarget})},close:function(){this.options.pane.navigate("")},destroy:function(){k.fn.destroy.call(this),this.element.off(b)}});a.plugin(x)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.Widget,o="dir",a="asc",s="single",l="field",c="desc",d=".kendoColumnSorter",u=".k-link",h="aria-sort",p=e.proxy,f=r.extend({init:function(e,t){var n,i=this;r.fn.init.call(i,e,t),i._refreshHandler=p(i.refresh,i),i.dataSource=i.options.dataSource.bind("change",i._refreshHandler),n=i.element.find(u),n[0]||(n=i.element.wrapInner('<a class="k-link" href="#"/>').find(u)),i.link=n,i.element.on("click"+d,p(i._click,i))},options:{name:"ColumnSorter",mode:s,allowUnsort:!0,compare:null,filter:""},destroy:function(){var e=this;r.fn.destroy.call(e),e.element.off(d),e.dataSource.unbind("change",e._refreshHandler),e._refreshHandler=e.element=e.link=e.dataSource=null},refresh:function(){var t,i,r,s,d=this,u=d.dataSource.sort()||[],p=d.element,f=p.attr(n.attr(l));for(p.removeAttr(n.attr(o)),p.removeAttr(h),t=0,i=u.length;i>t;t++)r=u[t],f==r.field&&p.attr(n.attr(o),r.dir);s=p.attr(n.attr(o)),p.find(".k-i-arrow-n,.k-i-arrow-s").remove(),s===a?(e('<span class="k-icon k-i-arrow-n" />').appendTo(d.link),p.attr(h,"ascending")):s===c&&(e('<span class="k-icon k-i-arrow-s" />').appendTo(d.link),p.attr(h,"descending"))},_click:function(e){var i,r,d=this,u=d.element,h=u.attr(n.attr(l)),p=u.attr(n.attr(o)),f=d.options,g=null===d.options.compare?t:d.options.compare,m=d.dataSource.sort()||[];if(e.preventDefault(),!f.filter||u.is(f.filter)){if(p=p===a?c:p===c&&f.allowUnsort?t:a,f.mode===s)m=[{field:h,dir:p,compare:g}];else if("multiple"===f.mode){for(i=0,r=m.length;r>i;i++)if(m[i].field===h){m.splice(i,1);break}m.push({field:h,dir:p,compare:g})}this.dataSource.sort(m)}}});i.plugin(f)}(window.kendo.jQuery),function(e,t){function n(t){return t=null!=t?t:"",t.type||e.type(t)||"string"}function i(t){t.find(":input:not(:button, ["+s.attr("role")+"=upload], ["+s.attr("skip")+"], [type=file]), select").each(function(){var t=s.attr("bind"),n=this.getAttribute(t)||"",i="checkbox"===this.type||"radio"===this.type?"checked:":"value:",r=this.name;-1===n.indexOf(i)&&r&&(n+=(n.length?",":"")+i+r,e(this).attr(t,n))})}function r(e){var t,i,r=(e.model.fields||e.model)[e.field],o=n(r),a=r?r.validation:{},l=s.attr("type"),c=s.attr("bind"),d={name:e.field};for(t in a)i=a[t],f(t,_)>=0?d[l]=t:h(i)||(d[t]=p(i)?i.value||t:i),d[s.attr(t+"-msg")]=i.message;return f(o,_)>=0&&(d[l]=o),d[c]=("boolean"===o?"checked:":"value:")+e.field,d}function o(e){var t,n,i,r,o,a;if(e&&e.length)for(a=[],t=0,n=e.length;n>t;t++)i=e[t],o=i.text||i.value||i,r=null==i.value?i.text||i:i.value,a[t]={text:o,value:r};return a}function a(e,t){var n,i,r=e?e.validation||{}:{};for(n in r)i=r[n],p(i)&&i.value&&(i=i.value),h(i)&&(t[n]=i)}var s=window.kendo,l=s.ui,c=l.Widget,d=e.extend,u=s.support.browser.msie&&9>s.support.browser.version,h=s.isFunction,p=e.isPlainObject,f=e.inArray,g=/("|\%|'|\[|\]|\$|\.|\,|\:|\;|\+|\*|\&|\!|\#|\(|\)|<|>|\=|\?|\@|\^|\{|\}|\~|\/|\||`)/g,m='<div class="k-widget k-tooltip k-tooltip-validation" style="margin:0.5em"><span class="k-icon k-warning"> </span>#=message#<div class="k-callout k-callout-n"></div></div>',v="change",_=["url","email","number","date","boolean"],y={number:function(t,n){var i=r(n);e('<input type="text"/>').attr(i).appendTo(t).kendoNumericTextBox({format:n.format}),e("<span "+s.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},date:function(t,n){var i=r(n),o=n.format;o&&(o=s._extractFormat(o)),i[s.attr("format")]=o,e('<input type="text"/>').attr(i).appendTo(t).kendoDatePicker({format:n.format}),e("<span "+s.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},string:function(t,n){var i=r(n);e('<input type="text" class="k-input k-textbox"/>').attr(i).appendTo(t)},"boolean":function(t,n){var i=r(n);e('<input type="checkbox" />').attr(i).appendTo(t)},values:function(t,n){var i=r(n);e("<select "+s.attr("text-field")+'="text"'+s.attr("value-field")+'="value"'+s.attr("source")+"='"+s.stringify(o(n.values)).replace(/\'/g,"&apos;")+"'"+s.attr("role")+'="dropdownlist"/>').attr(i).appendTo(t),e("<span "+s.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)}},w=c.extend({init:function(t,n){var i=this;n.target&&(n.$angular=n.target.options.$angular),c.fn.init.call(i,t,n),i._validateProxy=e.proxy(i._validate,i),i.refresh()},events:[v],options:{name:"Editable",editors:y,clearContainer:!0,errorTemplate:m},editor:function(e,t){var i=this,r=i.options.editors,o=p(e),a=o?e.field:e,l=i.options.model||{},c=o&&e.values,u=c?"values":n(t),h=o&&e.editor,f=h?e.editor:r[u],m=i.element.find("["+s.attr("container-for")+"="+a.replace(g,"\\$1")+"]");f=f?f:r.string,h&&"string"==typeof e.editor&&(f=function(t){t.append(e.editor)}),m=m.length?m:i.element,f(m,d(!0,{},o?e:{field:a},{model:l}))},_validate:function(t){var n,i=this,r=t.value,o=i._validationEventInProgress,a={},l=s.attr("bind"),c=t.field.replace(g,"\\$1"),d="checked:"+c,u="value:"+c;a[t.field]=t.value,n=e(":input["+l+'*="'+u+'"],:input['+l+'*="'+d+'"]',i.element).filter("["+s.attr("validate")+"!='false']"),n.length>1&&(n=n.filter(function(){var t=e(this),n=t.attr(l).split(","),i=f(u,n)>=0||f(d,n)>=0;return i&&(!t.is(":radio")||t.val()==r)}));try{i._validationEventInProgress=!0,(!i.validatable.validateInput(n)||!o&&i.trigger(v,{values:a}))&&t.preventDefault()}finally{i._validationEventInProgress=!1}},end:function(){return this.validatable.validate()},destroy:function(){var e=this;e.angular("cleanup",function(){return{elements:e.element}}),c.fn.destroy.call(e),e.options.model.unbind("set",e._validateProxy),s.unbind(e.element),e.validatable&&e.validatable.destroy(),s.destroy(e.element),e.element.removeData("kendoValidator")},refresh:function(){var n,r,o,l,c,d,h,f,g=this,m=g.options.fields||[],v=g.options.clearContainer?g.element.empty():g.element,_=g.options.model||{},y={};for(e.isArray(m)||(m=[m]),n=0,r=m.length;r>n;n++)o=m[n],l=p(o),c=l?o.field:o,d=(_.fields||_)[c],a(d,y),g.editor(o,d);if(g.options.target&&g.angular("compile",function(){return{elements:v,data:[{dataItem:_}]}}),!r){h=_.fields||_;for(c in h)a(h[c],y)}i(v),g.validatable&&g.validatable.destroy(),s.bind(v,g.options.model),g.options.model.unbind("set",g._validateProxy),g.options.model.bind("set",g._validateProxy),g.validatable=new s.ui.Validator(v,{validateOnBlur:!1,errorTemplate:g.options.errorTemplate||t,rules:y}),f=v.find(":kendoFocusable").eq(0).focus(),u&&f.focus()}});l.plugin(w)}(window.kendo.jQuery),function(e,t){function n(e){return t!==e}function i(e,t,n){return Math.max(Math.min(parseInt(e,10),1/0===n?n:parseInt(n,10)),parseInt(t,10))}function r(e,t){return function(){var n=this,i=n.wrapper,r=i[0].style,o=n.options;if(!o.isMaximized&&!o.isMinimized)return n.restoreOptions={width:r.width,height:r.height},i.children(x).hide().end().children(b).find(G).parent().hide().eq(0).before(Z.action({name:"Restore"})),t.call(n),"maximize"==e?n.wrapper.children(b).find(Y).parent().hide():n.wrapper.children(b).find(Y).parent().show(),n}}function o(){return!this.type||this.type.toLowerCase().indexOf("script")>=0}function a(e){var t=this;t.owner=e,t._draggable=new d(e.wrapper,{filter:">"+x,group:e.wrapper.id+"-resizing",dragstart:p(t.dragstart,t),drag:p(t.drag,t),dragend:p(t.dragend,t)}),t._draggable.userEvents.bind("press",p(t.addOverlay,t)),t._draggable.userEvents.bind("release",p(t.removeOverlay,t))}function s(e,t){var n=this;n.owner=e,n._draggable=new d(e.wrapper,{filter:t,group:e.wrapper.id+"-moving",dragstart:p(n.dragstart,n),drag:p(n.drag,n),dragend:p(n.dragend,n),dragcancel:p(n.dragcancel,n)}),n._draggable.userEvents.stopPropagation=!1}var l=window.kendo,c=l.ui.Widget,d=l.ui.Draggable,u=e.isPlainObject,h=l._activeElement,p=e.proxy,f=e.extend,g=e.each,m=l.template,v="body",_=".kendoWindow",y=".k-window",w=".k-window-title",b=w+"bar",k=".k-window-content",x=".k-resize-handle",C=".k-overlay",S="k-content-frame",T="k-loading",D="k-state-hover",A="k-state-focused",E="k-window-maximized",M=":visible",P="hidden",I="cursor",z="open",F="activate",R="deactivate",B="close",L="refresh",O="resize",H="resizeEnd",N="dragstart",V="dragend",U="error",W="overflow",j="zIndex",G=".k-window-actions .k-i-minimize,.k-window-actions .k-i-maximize",q=".k-i-pin",$=".k-i-unpin",Y=q+","+$,K=".k-window-titlebar .k-window-action",Q=".k-window-titlebar .k-i-refresh",X=l.isLocalUrl,J=c.extend({init:function(i,r){var a,s,d,h,f,g,m,v=this,x={},C=!1,S=r&&r.actions&&!r.actions.length;c.fn.init.call(v,i,r),r=v.options,h=r.position,i=v.element,f=r.content,S&&(r.actions=[]),v.appendTo=e(r.appendTo),v._animations(),f&&!u(f)&&(f=r.content={url:f}),i.find("script").filter(o).remove(),i.parent().is(v.appendTo)||h.top!==t&&h.left!==t||(i.is(M)?(x=i.offset(),C=!0):(s=i.css("visibility"),d=i.css("display"),i.css({visibility:P,display:""}),x=i.offset(),i.css({visibility:s,display:d})),h.top===t&&(h.top=x.top),h.left===t&&(h.left=x.left)),n(r.visible)&&null!==r.visible||(r.visible=i.is(M)),a=v.wrapper=i.closest(y),i.is(".k-content")&&a[0]||(i.addClass("k-window-content k-content"),v._createWindow(i,r),a=v.wrapper=i.closest(y),v._dimensions()),v._position(),r.pinned&&v.pin(!0),f&&v.refresh(f),r.visible&&v.toFront(),g=a.children(k),v._tabindex(g),r.visible&&r.modal&&v._overlay(a.is(M)).css({opacity:.5}),a.on("mouseenter"+_,K,p(v._buttonEnter,v)).on("mouseleave"+_,K,p(v._buttonLeave,v)).on("click"+_,"> "+K,p(v._windowActionHandler,v)),g.on("keydown"+_,p(v._keydown,v)).on("focus"+_,p(v._focus,v)).on("blur"+_,p(v._blur,v)),this._resizable(),this._draggable(),m=i.attr("id"),m&&(m+="_wnd_title",a.children(b).children(w).attr("id",m),g.attr({role:"dialog","aria-labelledby":m})),a.add(a.children(".k-resize-handle,"+b)).on("mousedown"+_,p(v.toFront,v)),v.touchScroller=l.touchScroller(i),v._resizeHandler=p(v._onDocumentResize,v),v._marker=l.guid().substring(0,8),e(window).on("resize"+_+v._marker,v._resizeHandler),r.visible&&(v.trigger(z),v.trigger(F)),l.notify(v)},_buttonEnter:function(t){e(t.currentTarget).addClass(D)},_buttonLeave:function(t){e(t.currentTarget).removeClass(D)},_focus:function(){this.wrapper.addClass(A)},_blur:function(){this.wrapper.removeClass(A)},_dimensions:function(){var e,t,n=this.wrapper,r=this.options,o=r.width,a=r.height,s=r.maxHeight,l=["minWidth","minHeight","maxWidth","maxHeight"];for(this.title(r.title),e=0;l.length>e;e++)t=r[l[e]],t&&1/0!=t&&n.css(l[e],t);s&&1/0!=s&&this.element.css("maxHeight",s),o&&n.width((""+o).indexOf("%")>0?o:i(o,r.minWidth,r.maxWidth)),a&&n.height((""+a).indexOf("%")>0?a:i(a,r.minHeight,r.maxHeight)),r.visible||n.hide()},_position:function(){var e=this.wrapper,t=this.options.position;0===t.top&&(t.top=""+t.top),0===t.left&&(t.left=""+t.left),e.css({top:t.top||"",left:t.left||""})},_animations:function(){var e=this.options;e.animation===!1&&(e.animation={open:{effects:{}},close:{hide:!0,effects:{}}})},_resize:function(){l.resize(this.element.children())},_resizable:function(){var t=this.options.resizable,n=this.wrapper;this.resizing&&(n.off("dblclick"+_).children(x).remove(),this.resizing.destroy(),this.resizing=null),t&&(n.on("dblclick"+_,b,p(function(t){e(t.target).closest(".k-window-action").length||this.toggleMaximization()},this)),g("n e s w se sw ne nw".split(" "),function(e,t){n.append(Z.resizeHandle(t))}),this.resizing=new a(this)),n=null},_draggable:function(){var e=this.options.draggable;this.dragging&&(this.dragging.destroy(),this.dragging=null),e&&(this.dragging=new s(this,e.dragHandle||b))},_actions:function(){var t=this.options.actions,n=this.wrapper.children(b),i=n.find(".k-window-actions");t=e.map(t,function(e){return{name:e}}),i.html(l.render(Z.action,t))},setOptions:function(e){c.fn.setOptions.call(this,e),this._animations(),this._dimensions(),this._position(),this._resizable(),this._draggable(),this._actions()},events:[z,F,R,B,L,O,H,N,V,U],options:{name:"Window",animation:{open:{effects:{zoom:{direction:"in"},fade:{direction:"in"}},duration:350},close:{effects:{zoom:{direction:"out",properties:{scale:.7}},fade:{direction:"out"}},duration:350,hide:!0}},title:"",actions:["Close"],autoFocus:!0,modal:!1,resizable:!0,draggable:!0,minWidth:90,minHeight:50,maxWidth:1/0,maxHeight:1/0,pinned:!1,position:{},content:null,visible:null,height:null,width:null,appendTo:"body"},_closable:function(){return e.inArray("close",e.map(this.options.actions,function(e){return e.toLowerCase()}))>-1},_keydown:function(e){var t,n,r,o,a,s,c=this,d=c.options,u=l.keys,h=e.keyCode,p=c.wrapper,f=10,g=c.options.isMaximized;e.target!=e.currentTarget||c._closing||(h==u.ESC&&c._closable()&&c._close(!1),!d.draggable||e.ctrlKey||g||(t=l.getOffset(p),h==u.UP?n=p.css("top",t.top-f):h==u.DOWN?n=p.css("top",t.top+f):h==u.LEFT?n=p.css("left",t.left-f):h==u.RIGHT&&(n=p.css("left",t.left+f))),d.resizable&&e.ctrlKey&&!g&&(h==u.UP?(n=!0,o=p.height()-f):h==u.DOWN&&(n=!0,o=p.height()+f),h==u.LEFT?(n=!0,r=p.width()-f):h==u.RIGHT&&(n=!0,r=p.width()+f),n&&(a=i(r,d.minWidth,d.maxWidth),s=i(o,d.minHeight,d.maxHeight),isNaN(a)||(p.width(a),c.options.width=a+"px"),isNaN(s)||(p.height(s),c.options.height=s+"px"),c.resize())),n&&e.preventDefault())},_overlay:function(t){var n=this.appendTo.children(C),i=this.wrapper;return n.length||(n=e("<div class='k-overlay' />")),n.insertBefore(i[0]).toggle(t).css(j,parseInt(i.css(j),10)-1),n},_actionForIcon:function(e){var t=/\bk-i-\w+\b/.exec(e[0].className)[0];return{"k-i-close":"_close","k-i-maximize":"maximize","k-i-minimize":"minimize","k-i-restore":"restore","k-i-refresh":"refresh","k-i-pin":"pin","k-i-unpin":"unpin"}[t]},_windowActionHandler:function(n){var i,r;if(!this._closing)return i=e(n.target).closest(".k-window-action").find(".k-icon"),r=this._actionForIcon(i),r?(n.preventDefault(),this[r](),!1):t},_modals:function(){var t=this,n=e(y).filter(function(){var n=e(this),i=t._object(n),r=i&&i.options;return r&&r.modal&&r.visible&&n.is(M)}).sort(function(t,n){return+e(t).css("zIndex")-+e(n).css("zIndex")});return t=null,n},_object:function(e){var t=e.children(k);return t.data("kendoWindow")||t.data("kendo"+this.options.name)},center:function(){var t,n,i=this,r=i.options.position,o=i.wrapper,a=e(window),s=0,l=0;return i.options.isMaximized?i:(i.options.pinned||(s=a.scrollTop(),l=a.scrollLeft()),n=l+Math.max(0,(a.width()-o.width())/2),t=s+Math.max(0,(a.height()-o.height()-parseInt(o.css("paddingTop"),10))/2),o.css({left:n,top:t}),r.top=t,r.left=n,i)},title:function(e){var t,n=this,i=n.wrapper,r=n.options,o=i.children(b),a=o.children(w);return arguments.length?(e===!1?(i.addClass("k-window-titleless"),o.remove()):(o.length?a.html(e):(i.prepend(Z.titlebar(r)),n._actions(),o=i.children(b)),t=o.outerHeight(),i.css("padding-top",t),o.css("margin-top",-t)),n.options.title=e,n):a.text()},content:function(e,t){var i=this.wrapper.children(k),r=i.children(".km-scroll-container");return i=r[0]?r:i,n(e)?(this.angular("cleanup",function(){return{elements:i.children()}}),l.destroy(this.element.children()),i.empty().html(e),this.angular("compile",function(){var e,n=[];for(e=i.length;--e>=0;)n.push({dataItem:t});return{elements:i.children(),data:n}}),this):i.html()},open:function(){var t,n,i=this,r=i.wrapper,o=i.options,a=o.animation.open,s=r.children(k);return i.trigger(z)||(i._closing&&r.kendoStop(!0,!0),i._closing=!1,i.toFront(),o.autoFocus&&i.element.focus(),o.visible=!0,o.modal&&(t=i._overlay(!1),t.kendoStop(!0,!0),a.duration&&l.effects.Fade?(n=l.fx(t).fadeIn(),n.duration(a.duration||0),n.endValue(.5),n.play()):t.css("opacity",.5),t.show()),r.is(M)||(s.css(W,P),r.show().kendoStop().kendoAnimate({effects:a.effects,duration:a.duration,complete:p(this._activate,this)}))),o.isMaximized&&(i._documentScrollTop=e(document).scrollTop(),e("html, body").css(W,P)),i},_activate:function(){this.options.autoFocus&&this.element.focus(),this.trigger(F),this.wrapper.children(k).css(W,"")},_removeOverlay:function(n){var i,r=this._modals(),o=this.options,a=o.modal&&!r.length,s=o.modal?this._overlay(!0):e(t),c=o.animation.close;a?!n&&c.duration&&l.effects.Fade?(i=l.fx(s).fadeOut(),i.duration(c.duration||0),i.startValue(.5),i.play()):this._overlay(!1).remove():r.length&&this._object(r.last())._overlay(!0)},_close:function(t){var n=this,i=n.wrapper,r=n.options,o=r.animation.open,a=r.animation.close;if(i.is(M)&&!n.trigger(B,{userTriggered:!t})){if(n._closing)return;n._closing=!0,r.visible=!1,e(y).each(function(t,n){var r=e(n).children(k);n!=i&&r.find("> ."+S).length>0&&r.children(C).remove()}),this._removeOverlay(),i.kendoStop().kendoAnimate({effects:a.effects||o.effects,reverse:a.reverse===!0,duration:a.duration,complete:p(this._deactivate,this)})}n.options.isMaximized&&(e("html, body").css(W,""),n._documentScrollTop&&n._documentScrollTop>0&&e(document).scrollTop(n._documentScrollTop))},_deactivate:function(){this.wrapper.hide().css("opacity",""),this.trigger(R);var e=this._object(this._modals().last());e&&e.toFront()},close:function(){return this._close(!0),this},_actionable:function(t){return e(t).is(K+","+K+" .k-icon,:input,a")},_shouldFocus:function(t){var n=h(),i=this.element;return!(!this.options.autoFocus||e(n).is(i)||this._actionable(t)||i.find(n).length&&i.find(t).length)},toFront:function(t){var n,i,r=this,o=r.wrapper,a=o[0],s=+o.css(j),l=s,c=t&&t.target||null;return e(y).each(function(t,n){var i=e(n),r=i.css(j),o=i.children(k);isNaN(r)||(s=Math.max(+r,s)),n!=a&&o.find("> ."+S).length>0&&o.append(Z.overlay)}),(!o[0].style.zIndex||s>l)&&o.css(j,s+2),r.element.find("> .k-overlay").remove(),r._shouldFocus(c)&&(r.element.focus(),n=e(window).scrollTop(),i=parseInt(o.position().top,10),i>0&&n>i&&(n>0?e(window).scrollTop(i):o.css("top",n))),o=null,r},toggleMaximization:function(){return this._closing?this:this[this.options.isMaximized?"restore":"maximize"]()},restore:function(){var t=this,n=t.options,i=n.minHeight,r=t.restoreOptions;return n.isMaximized||n.isMinimized?(i&&1/0!=i&&t.wrapper.css("min-height",i),t.wrapper.css({position:n.pinned?"fixed":"absolute",left:r.left,top:r.top,width:r.width,height:r.height}).removeClass(E).find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-restore").parent().remove().end().end().find(G).parent().show().end().end().find(Y).parent().show(),t.options.width=r.width,t.options.height=r.height,e("html, body").css(W,""),this._documentScrollTop&&this._documentScrollTop>0&&e(document).scrollTop(this._documentScrollTop),n.isMaximized=n.isMinimized=!1,t.resize(),t):t},maximize:r("maximize",function(){var t=this,n=t.wrapper,i=n.position();f(t.restoreOptions,{left:i.left,top:i.top}),n.css({left:0,top:0,position:"fixed"}).addClass(E),this._documentScrollTop=e(document).scrollTop(),e("html, body").css(W,P),t.options.isMaximized=!0,t._onDocumentResize()}),minimize:r("minimize",function(){var e=this;e.wrapper.css({height:"",minHeight:""}),e.element.hide(),e.options.isMinimized=!0}),pin:function(t){var n=this,i=e(window),r=n.wrapper,o=parseInt(r.css("top"),10),a=parseInt(r.css("left"),10);(t||!n.options.pinned&&!n.options.isMaximized)&&(r.css({position:"fixed",top:o-i.scrollTop(),left:a-i.scrollLeft()}),r.children(b).find(q).addClass("k-i-unpin").removeClass("k-i-pin"),n.options.pinned=!0)},unpin:function(){var t=this,n=e(window),i=t.wrapper,r=parseInt(i.css("top"),10),o=parseInt(i.css("left"),10);t.options.pinned&&!t.options.isMaximized&&(i.css({position:"",top:r+n.scrollTop(),left:o+n.scrollLeft()}),i.children(b).find($).addClass("k-i-pin").removeClass("k-i-unpin"),t.options.pinned=!1)},_onDocumentResize:function(){var t,n,i=this,r=i.wrapper,o=e(window);i.options.isMaximized&&(t=o.width(),n=o.height()-parseInt(r.css("padding-top"),10),r.css({width:t,height:n}),i.options.width=t,i.options.height=n,i.resize())},refresh:function(t){var i,r,o,a=this,s=a.options,l=e(a.element);return u(t)||(t={url:t}),t=f({},s.content,t),r=n(s.iframe)?s.iframe:t.iframe,o=t.url,o?(n(r)||(r=!X(o)),r?(i=l.find("."+S)[0],i?i.src=o||i.src:l.html(Z.contentFrame(f({},s,{content:t}))),l.find("."+S).unbind("load"+_).on("load"+_,p(this._triggerRefresh,this))):a._ajaxRequest(t)):(t.template&&a.content(m(t.template)({})),a.trigger(L)),l.toggleClass("k-window-iframecontent",!!r),a},_triggerRefresh:function(){this.trigger(L)},_ajaxComplete:function(){clearTimeout(this._loadingIconTimeout),this.wrapper.find(Q).removeClass(T)
},_ajaxError:function(e,t){this.trigger(U,{status:t,xhr:e})},_ajaxSuccess:function(e){return function(t){var n=t;e&&(n=m(e)(t||{})),this.content(n,t),this.element.prop("scrollTop",0),this.trigger(L)}},_showLoading:function(){this.wrapper.find(Q).addClass(T)},_ajaxRequest:function(t){this._loadingIconTimeout=setTimeout(p(this._showLoading,this),100),e.ajax(f({type:"GET",dataType:"html",cache:!1,error:p(this._ajaxError,this),complete:p(this._ajaxComplete,this),success:p(this._ajaxSuccess(t.template),this)},t))},destroy:function(){var n=this;n.resizing&&n.resizing.destroy(),n.dragging&&n.dragging.destroy(),n.wrapper.off(_).children(k).off(_).end().find(".k-resize-handle,.k-window-titlebar").off(_),e(window).off("resize"+_+n._marker),clearTimeout(n._loadingIconTimeout),c.fn.destroy.call(n),n.unbind(t),l.destroy(n.wrapper),n._removeOverlay(!0),n.wrapper.empty().remove(),n.wrapper=n.appendTo=n.element=e()},_createWindow:function(){var t,n,i=this.element,r=this.options,o=l.support.isRtl(i);r.scrollable===!1&&i.attr("style","overflow:hidden;"),n=e(Z.wrapper(r)),t=i.find("iframe:not(.k-content)").map(function(){var e=this.getAttribute("src");return this.src="",e}),n.toggleClass("k-rtl",o).appendTo(this.appendTo).append(i).find("iframe:not(.k-content)").each(function(e){this.src=t[e]}),n.find(".k-window-title").css(o?"left":"right",n.find(".k-window-actions").outerWidth()+10),i.css("visibility","").show(),i.find("[data-role=editor]").each(function(){var t=e(this).data("kendoEditor");t&&t.refresh()}),n=i=null}}),Z={wrapper:m("<div class='k-widget k-window' />"),action:m("<a role='button' href='\\#' class='k-window-action k-link'><span role='presentation' class='k-icon k-i-#= name.toLowerCase() #'>#= name #</span></a>"),titlebar:m("<div class='k-window-titlebar k-header'>&nbsp;<span class='k-window-title'>#= title #</span><div class='k-window-actions' /></div>"),overlay:"<div class='k-overlay' />",contentFrame:m("<iframe frameborder='0' title='#= title #' class='"+S+"' src='#= content.url #'>This page requires frames in order to show content</iframe>"),resizeHandle:m("<div class='k-resize-handle k-resize-#= data #'></div>")};a.prototype={addOverlay:function(){this.owner.wrapper.append(Z.overlay)},removeOverlay:function(){this.owner.wrapper.find(C).remove()},dragstart:function(t){var n=this,i=n.owner,r=i.wrapper;n.elementPadding=parseInt(r.css("padding-top"),10),n.initialPosition=l.getOffset(r,"position"),n.resizeDirection=t.currentTarget.prop("className").replace("k-resize-handle k-resize-",""),n.initialSize={width:r.width(),height:r.height()},n.containerOffset=l.getOffset(i.appendTo,"position"),r.children(x).not(t.currentTarget).hide(),e(v).css(I,t.currentTarget.css(I))},drag:function(e){var t,n,r,o,a=this,s=a.owner,l=s.wrapper,c=s.options,d=a.resizeDirection,u=a.containerOffset,h=a.initialPosition,p=a.initialSize,f=Math.max(e.x.location,u.left),g=Math.max(e.y.location,u.top);d.indexOf("e")>=0?(t=f-h.left,l.width(i(t,c.minWidth,c.maxWidth))):d.indexOf("w")>=0&&(o=h.left+p.width,t=i(o-f,c.minWidth,c.maxWidth),l.css({left:o-t-u.left,width:t})),d.indexOf("s")>=0?(n=g-h.top-a.elementPadding,l.height(i(n,c.minHeight,c.maxHeight))):d.indexOf("n")>=0&&(r=h.top+p.height,n=i(r-g,c.minHeight,c.maxHeight),l.css({top:r-n-u.top,height:n})),t&&(s.options.width=t+"px"),n&&(s.options.height=n+"px"),s.resize()},dragend:function(t){var n=this,i=n.owner,r=i.wrapper;return r.children(x).not(t.currentTarget).show(),e(v).css(I,""),i.touchScroller&&i.touchScroller.reset(),27==t.keyCode&&r.css(n.initialPosition).css(n.initialSize),i.trigger(H),!1},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},s.prototype={dragstart:function(t){var n=this.owner,i=n.element,r=i.find(".k-window-actions"),o=l.getOffset(n.appendTo);n.trigger(N),n.initialWindowPosition=l.getOffset(n.wrapper,"position"),n.startPosition={left:t.x.client-n.initialWindowPosition.left,top:t.y.client-n.initialWindowPosition.top},n.minLeftPosition=r.length>0?r.outerWidth()+parseInt(r.css("right"),10)-i.outerWidth():20-i.outerWidth(),n.minLeftPosition-=o.left,n.minTopPosition=-o.top,n.wrapper.append(Z.overlay).children(x).hide(),e(v).css(I,t.currentTarget.css(I))},drag:function(t){var n=this.owner,i=n.options.position,r=Math.max(t.y.client-n.startPosition.top,n.minTopPosition),o=Math.max(t.x.client-n.startPosition.left,n.minLeftPosition),a={left:o,top:r};e(n.wrapper).css(a),i.top=r,i.left=o},_finishDrag:function(){var t=this.owner;t.wrapper.children(x).toggle(!t.options.isMinimized).end().find(C).remove(),e(v).css(I,"")},dragcancel:function(e){this._finishDrag(),e.currentTarget.closest(y).css(this.owner.initialWindowPosition)},dragend:function(){return this._finishDrag(),this.owner.trigger(V),!1},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},l.ui.plugin(J)}(window.kendo.jQuery),function(e,t){function n(e){var t,n,i=e.find(k("popover")),r=s.roles;for(t=0,n=i.length;n>t;t++)o.initWidget(i[t],{},r)}function i(e){o.triggeredByInput(e)||e.preventDefault()}function r(t){t.each(function(){o.initWidget(e(this),{},s.roles)})}var o=window.kendo,a=o.mobile,s=a.ui,l=o.attr,c=s.Widget,d=o.ViewClone,u="init",h='<div style="height: 100%; width: 100%; position: absolute; top: 0; left: 0; z-index: 20000; display: none" />',p="beforeShow",f="show",g="afterShow",m="beforeHide",v="transitionEnd",_="transitionStart",y="hide",w="destroy",b=o.attrValue,k=o.roleSelector,x=o.directiveSelector,C=o.compileMobileDirective,S=c.extend({init:function(t,n){c.fn.init.call(this,t,n),this.params={},e.extend(this,n),this.transition=this.transition||this.defaultTransition,this._id(),this.options.$angular?this._overlay():(this._layout(),this._overlay(),this._scroller(),this._model())},events:[u,p,f,g,m,y,w,_,v],options:{name:"View",title:"",layout:null,getLayout:e.noop,reload:!1,transition:"",defaultTransition:"",useNativeScrolling:!1,stretch:!1,zoom:!1,model:null,modelScope:window,scroller:{},initWidgets:!0},enable:function(e){t===e&&(e=!0),e?this.overlay.hide():this.overlay.show()},destroy:function(){this.layout&&this.layout.detach(this),this.trigger(w),c.fn.destroy.call(this),this.scroller&&this.scroller.destroy(),this.options.$angular&&this.element.scope().$destroy(),o.destroy(this.element)},purge:function(){this.destroy(),this.element.remove()},triggerBeforeShow:function(){return this.trigger(p,{view:this})?!1:!0},showStart:function(){var e=this.element;e.css("display",""),this.inited?this._invokeNgController():(this.inited=!0,this.trigger(u,{view:this})),this.layout&&this.layout.attach(this),this._padIfNativeScrolling(),this.trigger(f,{view:this}),o.resize(e)},showEnd:function(){this.trigger(g,{view:this}),this._padIfNativeScrolling()},hideStart:function(){this.trigger(m,{view:this})},hideEnd:function(){var e=this;e.element.hide(),e.trigger(y,{view:e}),e.layout&&e.layout.trigger(y,{view:e,layout:e.layout})},beforeTransition:function(e){this.trigger(_,{type:e})},afterTransition:function(e){this.trigger(v,{type:e})},_padIfNativeScrolling:function(){if(a.appLevelNativeScrolling()){var e=o.support.mobileOS&&o.support.mobileOS.android,t=a.application.os.android||a.application.skin().indexOf("android")>-1,n=e||t?"footer":"header",i=e||t?"header":"footer";this.content.css({paddingTop:this[n].height(),paddingBottom:this[i].height()})}},contentElement:function(){var e=this;return e.options.stretch?e.content:e.scrollerContent},clone:function(){return new d(this)},_scroller:function(){var t=this;a.appLevelNativeScrolling()||(t.options.stretch?t.content.addClass("km-stretched-view"):(t.content.kendoMobileScroller(e.extend(t.options.scroller,{zoom:t.options.zoom,useNative:t.options.useNativeScrolling})),t.scroller=t.content.data("kendoMobileScroller"),t.scrollerContent=t.scroller.scrollElement),o.support.kineticScrollNeeded&&(e(t.element).on("touchmove",".km-header",i),t.options.useNativeScrolling||e(t.element).on("touchmove",".km-content",i)))},_model:function(){var e=this,t=e.element,i=e.options.model;"string"==typeof i&&(i=o.getter(i)(e.options.modelScope)),e.model=i,n(t),e.element.css("display",""),e.options.initWidgets&&(i?o.bind(t,i,s,o.ui,o.dataviz.ui):a.init(t.children())),e.element.css("display","none")},_id:function(){var e=this.element,t=e.attr("id")||"";this.id=b(e,"url")||"#"+t,"#"==this.id&&(this.id=o.guid(),e.attr("id",this.id))},_layout:function(){var e=k("content"),t=this.element;t.addClass("km-view"),this.header=t.children(k("header")).addClass("km-header"),this.footer=t.children(k("footer")).addClass("km-footer"),t.children(e)[0]||t.wrapInner("<div "+l("role")+'="content"></div>'),this.content=t.children(k("content")).addClass("km-content"),this.element.prepend(this.header).append(this.footer),this.layout=this.options.getLayout(this.layout),this.layout&&this.layout.setup(this)},_overlay:function(){this.overlay=e(h).appendTo(this.element)},_invokeNgController:function(){var e,t,n=this.element;this.options.$angular&&(e=n.controller(),t=n.scope(),e&&t.$apply(function(){n.injector().invoke(e.constructor,null,{$scope:t})}))}}),T=c.extend({init:function(e,t){c.fn.init.call(this,e,t),e=this.element,this.header=e.children(this._locate("header")).addClass("km-header"),this.footer=e.children(this._locate("footer")).addClass("km-footer"),this.elements=this.header.add(this.footer),n(e),this.options.$angular||o.mobile.init(this.element.children()),this.element.detach(),this.trigger(u,{layout:this})},_locate:function(e){return this.options.$angular?x(e):k(e)},options:{name:"Layout",id:null,platform:null},events:[u,f,y],setup:function(e){e.header[0]||(e.header=this.header),e.footer[0]||(e.footer=this.footer)},detach:function(e){var t=this;e.header===t.header&&t.header[0]&&e.element.prepend(t.header.detach()[0].cloneNode(!0)),e.footer===t.footer&&t.footer.length&&e.element.append(t.footer.detach()[0].cloneNode(!0))},attach:function(e){var t=this,n=t.currentView;n&&t.detach(n),e.header===t.header&&(t.header.detach(),e.element.children(k("header")).remove(),e.element.prepend(t.header)),e.footer===t.footer&&(t.footer.detach(),e.element.children(k("footer")).remove(),e.element.append(t.footer)),t.trigger(f,{layout:t,view:e}),t.currentView=e}}),D=o.Observable,A=/<body[^>]*>(([\u000a\u000d\u2028\u2029]|.)*)<\/body>/i,E="loadStart",M="loadComplete",P="showStart",I="sameViewRequested",z="viewShow",F="viewTypeDetermined",R="after",B=D.extend({init:function(t){var n,i,a,s,l=this;if(D.fn.init.call(l),e.extend(l,t),l.sandbox=e("<div />"),a=l.container,n=l._hideViews(a),l.rootView=n.first(),!l.rootView[0]&&t.rootNeeded)throw i=a[0]==o.mobile.application.element[0]?'Your kendo mobile application element does not contain any direct child elements with data-role="view" attribute set. Make sure that you instantiate the mobile application using the correct container.':'Your pane element does not contain any direct child elements with data-role="view" attribute set.',Error(i);l.layouts={},l.viewContainer=new o.ViewContainer(l.container),l.viewContainer.bind("accepted",function(e){e.view.params=l.params}),l.viewContainer.bind("complete",function(e){l.trigger(z,{view:e.view})}),l.viewContainer.bind(R,function(){l.trigger(R)}),this.getLayoutProxy=e.proxy(this,"_getLayout"),l._setupLayouts(a),s=a.children(l._locate("modalview drawer")),l.$angular?s.each(function(t,n){C(e(n),function(){})}):r(s),this.bind(this.events,t)},events:[P,R,z,E,M,I,F],destroy:function(){o.destroy(this.container);for(var e in this.layouts)this.layouts[e].destroy()},view:function(){return this.viewContainer.view},showView:function(e,t,n){if(e=e.replace(RegExp("^"+this.remoteViewURLPrefix),""),""===e&&this.remoteViewURLPrefix&&(e="/"),e===this.url)return this.trigger(I),!1;this.trigger(P);var i=this,r=function(n){return i.viewContainer.show(n,t,e)},a=i._findViewElement(e),s=o.widgetInstance(a);return i.url=e,i.params=n,s&&s.reload&&(s.purge(),a=[]),this.trigger(F,{remote:0===a.length,url:e}),a[0]?(s||(s=i._createView(a)),r(s)):(this.serverNavigation?location.href=e:i._loadView(e,r),!0)},append:function(e,t){var n,i,o,a=this.sandbox,s=(t||"").split("?")[0],c=this.container;return A.test(e)&&(e=RegExp.$1),a[0].innerHTML=e,c.append(a.children("script, style")),n=this._hideViews(a),o=n.first(),o.length||(n=o=a.wrapInner("<div data-role=view />").children()),s&&o.hide().attr(l("url"),s),this._setupLayouts(a),i=a.children(this._locate("modalview drawer")),c.append(a.children(this._locate("layout modalview drawer")).add(n)),r(i),this._createView(o)},_locate:function(e){return this.$angular?x(e):k(e)},_findViewElement:function(e){var t,n=e.split("?")[0];return n?(t=this.container.children("["+l("url")+"='"+n+"']"),t[0]||-1!==n.indexOf("/")||(t=this.container.children("#"===n.charAt(0)?n:"#"+n)),t):this.rootView},_createView:function(e){if(this.$angular){var t=this;return C(e,function(e){e.viewOptions={defaultTransition:t.transition,loader:t.loader,container:t.container,getLayout:t.getLayoutProxy}})}return o.initWidget(e,{defaultTransition:this.transition,loader:this.loader,container:this.container,getLayout:this.getLayoutProxy,modelScope:this.modelScope,reload:b(e,"reload")},s.roles)},_getLayout:function(e){return""===e?null:e?this.layouts[e]:this.layouts[this.layout]},_loadView:function(t,n){this._xhr&&this._xhr.abort(),this.trigger(E),this._xhr=e.get(o.absoluteURL(t,this.remoteViewURLPrefix),"html").always(e.proxy(this,"_xhrComplete",n,t))},_xhrComplete:function(e,t,n){var i=!0;"object"==typeof n&&(i=0===n.status&&n.responseText.length>0,n=n.responseText),this.trigger(M),i&&e(this.append(n,t))},_hideViews:function(e){return e.children(this._locate("view splitview")).hide()},_setupLayouts:function(t){var n,i=this;t.children(i._locate("layout")).each(function(){n=i.$angular?C(e(this)):o.initWidget(e(this),{},s.roles);var t=n.options.platform;t&&t!==a.application.os.name?n.destroy():i.layouts[n.options.id]=n})}});o.mobile.ViewEngine=B,s.plugin(S),s.plugin(T)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.mobile.ui,i=n.Widget,r=e.map(t.eventMap,function(e){return e}).join(" ").split(" "),o=i.extend({init:function(t,n){var r=this,o=e('<div class="km-loader"><span class="km-loading km-spin"></span><span class="km-loading-left"></span><span class="km-loading-right"></span></div>');i.fn.init.call(r,o,n),r.container=t,r.captureEvents=!1,r._attachCapture(),o.append(r.options.loading).hide().appendTo(t)},options:{name:"Loader",loading:"<h1>Loading...</h1>",timeout:100},show:function(){var e=this;clearTimeout(e._loading),e.options.loading!==!1&&(e.captureEvents=!0,e._loading=setTimeout(function(){e.element.show()},e.options.timeout))},hide:function(){this.captureEvents=!1,clearTimeout(this._loading),this.element.hide()},changeMessage:function(e){this.options.loading=e,this.element.find(">h1").html(e)},transition:function(){this.captureEvents=!0,this.container.css("pointer-events","none")},transitionDone:function(){this.captureEvents=!1,this.container.css("pointer-events","")},_attachCapture:function(){function e(e){n.captureEvents&&e.preventDefault()}var t,n=this;for(n.captureEvents=!1,t=0;r.length>t;t++)n.container[0].addEventListener(r[t],e,!0)}});n.plugin(o)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.mobile,r=n.roleSelector,o=i.ui,a=o.Widget,s=i.ViewEngine,l=o.View,c=i.ui.Loader,d="external",u="href",h="#!",p="navigate",f="viewShow",g="sameViewRequested",m=n.support.mobileOS,v=m.ios&&!m.appMode&&m.flatVersion>=700,_=/popover|actionsheet|modalview|drawer/,y="#:back",w=n.attrValue,b="button backbutton detailbutton listview-link",k="tab",x=a.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t),t=i.options,e=i.element,e.addClass("km-pane"),i.options.collapsible&&e.addClass("km-collapsible-pane"),this.history=[],this.historyCallback=function(e,t,n){var r=i.transition;return i.transition=null,v&&n&&(r="none"),i.viewEngine.showView(e,r,t)},this._historyNavigate=function(e){if(e===y){if(1===i.history.length)return;i.history.pop(),e=i.history[i.history.length-1]}else i.history.push(e);i.historyCallback(e,n.parseQueryStringParams(e))},this._historyReplace=function(e){var t=n.parseQueryStringParams(e);i.history[i.history.length-1]=e,i.historyCallback(e,t)},i.loader=new c(e,{loading:i.options.loading}),i.viewEngine=new s({container:e,transition:t.transition,modelScope:t.modelScope,rootNeeded:!t.initial,serverNavigation:t.serverNavigation,remoteViewURLPrefix:t.root||"",layout:t.layout,$angular:t.$angular,loader:i.loader,showStart:function(){i.loader.transition(),i.closeActiveDialogs()},after:function(){i.loader.transitionDone()},viewShow:function(e){i.trigger(f,e)},loadStart:function(){i.loader.show()},loadComplete:function(){i.loader.hide()},sameViewRequested:function(){i.trigger(g)},viewTypeDetermined:function(e){e.remote&&i.options.serverNavigation||i.trigger(p,{url:e.url})}}),this._setPortraitWidth(),n.onResize(function(){i._setPortraitWidth()}),i._setupAppLinks()},closeActiveDialogs:function(){var t=this.element.find(r("actionsheet popover modalview")).filter(":visible");t.each(function(){n.widgetInstance(e(this),o).close()})},navigateToInitial:function(){var e=this.options.initial;e&&this.navigate(e)},options:{name:"Pane",portraitWidth:"",transition:"",layout:"",collapsible:!1,initial:null,modelScope:window,loading:"<h1>Loading...</h1>"},events:[p,f,g],append:function(e){return this.viewEngine.append(e)},destroy:function(){a.fn.destroy.call(this),this.viewEngine.destroy(),this.userEvents.destroy()},navigate:function(e,t){e instanceof l&&(e=e.id),this.transition=t,this._historyNavigate(e)},replace:function(e,t){e instanceof l&&(e=e.id),this.transition=t,this._historyReplace(e)},bindToRouter:function(e){var t=this,i=this.history,r=this.viewEngine;e.bind("init",function(t){var o,a=t.url,s=e.pushState?a:"/";r.rootView.attr(n.attr("url"),s),o=i.length,"/"===a&&o&&(e.navigate(i[o-1],!0),t.preventDefault())}),e.bind("routeMissing",function(e){t.historyCallback(e.url,e.params,e.backButtonPressed)||e.preventDefault()}),e.bind("same",function(){t.trigger(g)}),t._historyNavigate=function(t){e.navigate(t)},t._historyReplace=function(t){e.replace(t)}},hideLoading:function(){this.loader.hide()},showLoading:function(){this.loader.show()},changeLoadingMessage:function(e){this.loader.changeMessage(e)},view:function(){return this.viewEngine.view()},_setPortraitWidth:function(){var e,t=this.options.portraitWidth;t&&(e=n.mobile.application.element.is(".km-vertical")?t:"auto",this.element.css("width",e))},_setupAppLinks:function(){var e=this;this.element.handler(this).on("down",r(k),"_mouseup").on("click",r(k+" "+b),"_appLinkClick"),this.userEvents=new n.UserEvents(this.element,{filter:r(b),tap:function(t){t.event.currentTarget=t.touch.currentTarget,e._mouseup(t.event)}})},_appLinkClick:function(t){var n=e(t.currentTarget).attr("href"),i=n&&"#"!==n[0]&&this.options.serverNavigation;i||w(e(t.currentTarget),"rel")==d||t.preventDefault()},_mouseup:function(r){if(!(r.which>1||r.isDefaultPrevented())){var a=this,s=e(r.currentTarget),l=w(s,"transition"),c=w(s,"rel")||"",p=w(s,"target"),f=s.attr(u),g=v&&0===s[0].offsetHeight,m=f&&"#"!==f[0]&&this.options.serverNavigation;g||m||c===d||t===f||f===h||(s.attr(u,h),setTimeout(function(){s.attr(u,f)}),c.match(_)?(n.widgetInstance(e(f),o).openFor(s),("actionsheet"===c||"drawer"===c)&&r.stopPropagation()):("_top"===p?a=i.application.pane:p&&(a=e("#"+p).data("kendoMobilePane")),a.navigate(f,l)),r.preventDefault())}}});x.wrap=function(e){e.is(r("view"))||(e=e.wrap("<div data-"+n.ns+'role="view" data-stretch="true"></div>').parent());var t=e.wrap('<div class="km-pane-wrapper"><div></div></div>').parent(),i=new x(t);return i.navigate(""),i},o.plugin(x)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.mobile,i=n.ui,r="hide",o="open",a="close",s='<div class="km-popup-wrapper" />',l='<div class="km-popup-arrow" />',c='<div class="km-popup-overlay" />',d="km-up km-down km-left km-right",u=i.Widget,h={down:{origin:"bottom center",position:"top center"},up:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"}},p={animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:400}}},f={horizontal:{offset:"top",size:"height"},vertical:{offset:"left",size:"width"}},g={up:"down",down:"up",left:"right",right:"left"},m=u.extend({init:function(n,i){var o,a,d=this,g=n.closest(".km-modalview-wrapper"),m=n.closest(".km-root").children(".km-pane").first(),v=g[0]?g:m;i.viewport?m=i.viewport:m[0]||(m=window),i.container?v=i.container:v[0]||(v=document.body),o={viewport:m,copyAnchorStyles:!1,autosize:!0,open:function(){d.overlay.show()},activate:e.proxy(d._activate,d),deactivate:function(){d.overlay.hide(),d._apiCall||d.trigger(r),d._apiCall=!1}},u.fn.init.call(d,n,i),n=d.element,i=d.options,n.wrap(s).addClass("km-popup").show(),a=d.options.direction.match(/left|right/)?"horizontal":"vertical",d.dimensions=f[a],d.wrapper=n.parent().css({width:i.width,height:i.height}).addClass("km-popup-wrapper km-"+i.direction).hide(),d.arrow=e(l).prependTo(d.wrapper).hide(),d.overlay=e(c).appendTo(v).hide(),o.appendTo=d.overlay,i.className&&d.overlay.addClass(i.className),d.popup=new t.ui.Popup(d.wrapper,e.extend(!0,o,p,h[i.direction]))},options:{name:"Popup",width:240,height:"",direction:"down",container:null,viewport:null},events:[r],show:function(t){this.popup.options.anchor=e(t),this.popup.open()},hide:function(){this._apiCall=!0,this.popup.close()},destroy:function(){u.fn.destroy.call(this),this.popup.destroy(),this.overlay.remove()},target:function(){return this.popup.options.anchor},_activate:function(){var t=this,n=t.options.direction,i=t.dimensions,r=i.offset,o=t.popup,a=o.options.anchor,s=e(a).offset(),l=e(o.element).offset(),c=o.flipped?g[n]:n,u=2*t.arrow[i.size](),h=t.element[i.size]()-t.arrow[i.size](),p=e(a)[i.size](),f=s[r]-l[r]+p/2;u>f&&(f=u),f>h&&(f=h),t.wrapper.removeClass(d).addClass("km-"+c),t.arrow.css(r,f).show()}}),v=u.extend({init:function(n,r){var o,s=this;s.initialOpen=!1,u.fn.init.call(s,n,r),o=e.extend({className:"km-popover-root",hide:function(){s.trigger(a)}},this.options.popup),s.popup=new m(s.element,o),s.popup.overlay.on("move",function(e){e.target==s.popup.overlay[0]&&e.preventDefault()}),s.pane=new i.Pane(s.element,e.extend(this.options.pane,{$angular:this.options.$angular})),s.pane.navigateToInitial(),t.notify(s,i)},options:{name:"PopOver",popup:{},pane:{}},events:[o,a],open:function(e){this.popup.show(e),this.initialOpen?this.pane.view()._invokeNgController():(this.pane.navigate(""),this.popup.popup._position(),this.initialOpen=!0)},openFor:function(e){this.open(e),this.trigger(o,{target:this.popup.target()})},close:function(){this.popup.hide()},destroy:function(){u.fn.destroy.call(this),this.pane.destroy(),this.popup.destroy(),t.destroy(this.element)}});i.plugin(m),i.plugin(v)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.mobile.ui,r=n.ui.Popup,o='<div class="km-shim"/>',a="hide",s=i.Widget,l=s.extend({init:function(t,i){var l=this,c=n.mobile.application,d=n.support.mobileOS,u=c?c.os.name:d?d.name:"ios",h="ios"===u||"wp"===u||(c?c.os.skin:!1),p="blackberry"===u,f=i.align||(h?"bottom center":p?"center right":"center center"),g=i.position||(h?"bottom center":p?"center right":"center center"),m=i.effect||(h?"slideIn:up":p?"slideIn:left":"fade:in"),v=e(o).handler(l).hide();s.fn.init.call(l,t,i),l.shim=v,t=l.element,i=l.options,i.className&&l.shim.addClass(i.className),i.modal||l.shim.on("up","_hide"),(c?c.element:e(document.body)).append(v),l.popup=new r(l.element,{anchor:v,modal:!0,appendTo:v,origin:f,position:g,animation:{open:{effects:m,duration:i.duration},close:{duration:i.duration}},close:function(e){var t=!1;l._apiCall||(t=l.trigger(a)),t&&e.preventDefault(),l._apiCall=!1},deactivate:function(){v.hide()},open:function(){v.show()}}),n.notify(l)},events:[a],options:{name:"Shim",modal:!1,align:t,position:t,effect:t,duration:200},show:function(){this.popup.open()},hide:function(){this._apiCall=!0,this.popup.close()},destroy:function(){s.fn.destroy.call(this),this.shim.kendoDestroy(),this.popup.destroy(),this.shim.remove()},_hide:function(t){t&&e.contains(this.shim.children().children(".k-popup")[0],t.target)||this.popup.close()}});i.plugin(l)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.support,i=t.mobile.ui,r=i.Shim,o=i.Popup,a=i.Widget,s="open",l="close",c="command",d="li>a",u="actionsheetContext",h='<div class="km-actionsheet-wrapper" />',p=t.template('<li class="km-actionsheet-cancel"><a href="\\#">#:cancel#</a></li>'),f=a.extend({init:function(s,l){var c,u,f,g=this,m=n.mobileOS;a.fn.init.call(g,s,l),l=g.options,f=l.type,s=g.element,u="auto"===f?m&&m.tablet:"tablet"===f,c=u?o:r,l.cancelTemplate&&(p=t.template(l.cancelTemplate)),s.addClass("km-actionsheet").append(p({cancel:g.options.cancel})).wrap(h).on("up",d,"_click").on("click",d,t.preventDefault),g.view().bind("destroy",function(){g.destroy()}),g.wrapper=s.parent().addClass(f?" km-actionsheet-"+f:""),g.shim=new c(g.wrapper,e.extend({modal:m.ios&&7>m.majorVersion,className:"km-actionsheet-root"},g.options.popup)),g._closeProxy=e.proxy(g,"_close"),g.shim.bind("hide",g._closeProxy),u&&t.onResize(g._closeProxy),t.notify(g,i)},events:[s,l,c],options:{name:"ActionSheet",cancel:"Cancel",type:"auto",popup:{height:"auto"}},open:function(t,n){var i=this;i.target=e(t),i.context=n,i.shim.show(t)},close:function(){this.context=this.target=null,this.shim.hide()},openFor:function(e){var t=this,n=e.data(u);t.open(e,n),t.trigger(s,{target:e,context:n})},destroy:function(){a.fn.destroy.call(this),t.unbindResize(this._closeProxy),this.shim.destroy()},_click:function(n){var i,r,o,a;n.isDefaultPrevented()||(i=e(n.currentTarget),r=i.data("action"),r&&(o={target:this.target,context:this.context},a=this.options.$angular,a?this.element.injector().get("$parse")(r)(a[0])(o):t.getter(r)(window)(o)),this.trigger(c,{target:this.target,context:this.context,currentTarget:i}),n.preventDefault(),this._close())},_close:function(e){this.trigger(l)?e.preventDefault():this.close()}});i.plugin(f)}(window.kendo.jQuery),function(e,t){function n(e){return Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function i(e){var t,n=" ";if(e){if(typeof e===cn)return e;for(t in e)n+=t+'="'+e[t]+'"'}return n}function r(t,n){e("th, th .k-grid-filter, th .k-link",t).add(document.body).css("cursor",n)}function o(e){var t,n,i={},r={};if(!At(e))for(xt(e)||(e=[e]),t=0,n=e.length;n>t;t++)i[e[t].aggregate]=0,r[e[t].field]=i;return r}function a(t,n,i,r,o){var a,s=n;for(n=e(),o=o||1,a=0;o>a;a++)n=n.add(t.eq(s+a));"number"==typeof i?n[r?"insertBefore":"insertAfter"](t.eq(i)):n.appendTo(i)}function s(t,n,i){return e(t).add(n).find(i)}function l(e,t,n){var i,r,o,a;for(n=xt(n)?n:[n],i=0,r=n.length;r>i;i++)o=n[i],yt(o)&&o.click&&(a=o.name||o.text,t.on(on+Ot,"a.k-grid-"+(a||"").replace(/\s/g,""),{commandName:a},Tt(o.click,e)))}function c(e,t,n){return bt(e,function(e){e=typeof e===cn?{field:e}:e;var i;return(!p(e)||n)&&(e.attributes=U(e.attributes),e.footerAttributes=U(e.footerAttributes),e.headerAttributes=U(e.headerAttributes),i=!0),e.columns&&(e.columns=c(e.columns,t,i)),wt({encoded:t,hidden:i},e)})}function d(e,t){var n=[];return u(e,t,n),n[n.length-1]}function u(e,t,n){var i,r;for(n=n||[],i=0;t.length>i;i++){if(e===t[i])return!0;if(t[i].columns){if(r=n.length,n.push(t[i]),u(e,t[i].columns,n))return!0;n.splice(r,n.length-r)}}return!1}function h(e,t){var n=t?W:U;e.hidden=!t,e.attributes=n(e.attributes),e.footerAttributes=n(e.footerAttributes),e.headerAttributes=n(e.headerAttributes)}function p(e){return f([e]).length>0}function f(e){return kt(e,function(e){var t=!e.hidden;return t&&e.columns&&(t=f(e.columns).length>0),t})}function g(t){return e(t).map(function(){return this.toArray()})}function m(e,t,n){var i=y(I(t)),r=y(z(t)),o=e.rowSpan;e.rowSpan=n?i>r?o-(i-r)||1:o+(r-i):i>r?o+(i-r):o-(r-i)||1}function v(t,n,i,r,o,a,s){var l,c,d=y(t),u=y([n]);d>u&&(l=Array(s+1).join('<th class="k-group-cell k-header">&nbsp;</th>'),c=a.children(":not(.k-filter-row)"),e(Array(d-u+1).join("<tr>"+l+"</tr>")).insertAfter(c.last())),E(a,d-u),w(i,r,o,a)}function _(e,t,n){var i,r,o,a,s;for(n=n||0,o=t,t=L(t),a=0,s=t.length;s>a;a++)i=b(t[a],o),r=e.find(">tr:not(.k-filter-row)").eq(i.row).find(".k-header:not(.k-group-cell,.k-hierarchy-cell)").eq(i.cell),r.attr(ut.attr("index"),n+a);return t.length}function y(e){var t,n,i=1,r=0;for(t=0;e.length>t;t++)e[t].columns&&(n=y(e[t].columns),n>r&&(r=n));return i+r}function w(t,n,i,r){var o,a,s=x(t[0],n),l=i.find(">tr:not(.k-filter-row):eq("+s.row+")>th.k-header"),c=e(),d=s.cell;for(o=0;t.length>o;o++)c=c.add(l.eq(d+o));for(r.find(">tr:not(.k-filter-row)").eq(s.row).append(c),a=[],o=0;t.length>o;o++)t[o].columns&&(a=a.concat(t[o].columns));a.length&&w(a,n,i,r)}function b(e,t,n,i){var r,o;for(n=n||0,i=i||{},i[n]=i[n]||0,o=0;t.length>o;o++){if(t[o]==e){r={cell:i[n],row:n};break}if(t[o].columns&&(r=b(e,t[o].columns,n+1,i)))break;i[n]++}return r}function k(e,t,n,i){var r,o,a;return t.columns?(t=t.columns,t[i?0:t.length-1]):(r=d(t,e),o=r?r.columns:e,a=Ct(t,o),0===a&&i?a++:a!=o.length-1||i?(a>0||0===a&&!i)&&(a+=i?-1:1):a--,t=o[Math.max(a,0)],t&&t!=n&&t.columns?k(e,t,n,i):null)}function x(e,t,n,i){var r,o;for(n=n||0,i=i||{},i[n]=i[n]||0,o=0;t.length>o;o++){if(t[o]==e){r={cell:i[n],row:n};break}if(t[o].columns&&(r=x(e,t[o].columns,n+1,i)))break;t[o].hidden||i[n]++}return r}function C(e){var t=S(I(e));return t.concat(S(z(e)))}function S(e){var t,n=[],i=[];for(t=0;e.length>t;t++)n.push(e[t]),e[t].columns&&(i=i.concat(e[t].columns));return i.length&&(n=n.concat(S(i))),n}function T(e){var t,n,i=0;for(n=0;e.length>n;n++)t=e[n],t.columns?i+=T(t.columns):t.hidden&&i++;return i}function D(e){var t,n,i,r=0;for(n=0,i=e.length;i>n;n++)t=e[n].style.width,t&&-1==t.indexOf("%")&&(r+=parseInt(t,10));return r}function A(e,t){var n,i,r=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(i=0;r.length>i;i++)n=r[i].rowSpan,n>1&&(r[i].rowSpan=n-t||1)}function E(e,t){var n,i=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(n=0;i.length>n;n++)i[n].rowSpan+=t}function M(t){var n,i=t.find("tr:not(.k-filter-row)"),r=i.filter(function(){return!e(this).children().length}).remove().length,o=i.find("th:not(.k-group-cell,.k-hierarchy-cell)");for(n=0;o.length>n;n++)o[n].rowSpan>1&&(o[n].rowSpan-=r);return i.length-r}function P(e,t,n,i,r){var o,a,s,l=[];for(o=0,s=e.length;s>o;o++)a=n[i]||[],a.push(t.eq(r+o)),n[i]=a,e[o].columns&&(l=l.concat(e[o].columns));l.length&&P(l,t,n,i+1,r+e.length)}function I(e){return kt(e,function(e){return e.locked})}function z(e){return kt(e,function(e){return!e.locked})}function F(e){return kt(e,function(e){return!e.locked&&p(e)})}function R(e){return kt(e,function(e){return e.locked&&p(e)})}function B(e){var t,n=[];for(t=0;e.length>t;t++)e[t].hidden||(e[t].columns?n=n.concat(B(e[t].columns)):n.push(e[t]));return n}function L(e){var t,n=[];for(t=0;e.length>t;t++)e[t].columns?n=n.concat(L(e[t].columns)):n.push(e[t]);return n}function O(t){var n,i=t.find(">tr:not(.k-filter-row)"),r=e();return i.length>1&&(r=i.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.rowSpan>1})),r=r.add(i.last().find("th:not(.k-group-cell,.k-hierarchy-cell)")),n=ut.attr("index"),r.sort(function(t,i){return t=parseInt(e(t).attr(n),10),i=parseInt(e(i).attr(n),10),t>i?1:i>t?-1:0}),r}function H(t){var n,i,r,o,a,s,l,c=t.closest("table"),d=e().add(t),u=t.closest("tr"),h=c.find("tr:not(.k-filter-row)"),p=h.index(u);if(p>0){for(n=h.eq(p-1),i=n.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return!e(this).attr("rowspan")}),r=0,o=u.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),a=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1}),s=0;a.length>s;s++)r+=a[s].colSpan||1;for(o+=Math.max(r-1,0),r=0,s=0;i.length>s;s++)if(l=i.eq(s),r+=l.attr("colSpan")?l[0].colSpan:1,o>=s&&r>o){d=H(l).add(d);
break}}return d}function N(t){var n,i,r,o,a,s,l,c,d=t.closest("table"),u=e().add(t),h=t.closest("tr"),p=d.find("tr:not(.k-filter-row)"),f=p.index(h)+t[0].rowSpan,g=ut.attr("colspan");if(p.length-1>=f){for(n=h.next(),i=h.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),r=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)"),r=r.filter(function(){return!this.rowSpan||1===this.rowSpan}),a=0,o=0;r.length>o;o++)a+=parseInt(r.eq(o).attr(g),10)||1;for(s=n.find("th:not(.k-group-cell,.k-hierarchy-cell)"),l=parseInt(t.attr(g),10)||1,o=0;l>o;)n=s.eq(o+a),u=u.add(N(n)),c=parseInt(n.attr(g),10),c>1&&(l-=c-1),o++}return u}function V(t,n,i){var r,o=t;return gt?t[0].innerHTML=i:(r=document.createElement("div"),r.innerHTML="<table><tbody>"+i+"</tbody></table>",t=r.firstChild.firstChild,n[0].replaceChild(t,o[0]),t=e(t)),t}function U(e){e=e||{};var t=e.style;return t?(t=t.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none"),t===e.style&&(t=t.replace(/(.*)?/i,"display:none;$1"))):t="display:none",wt({},e,{style:t})}function W(e){e=e||{};var t=e.style;return t&&(e.style=t.replace(/(display\s*:\s*none\s*;?)*/gi,"")),e}function j(t,n,i,r){var o,a=t.find(">colgroup"),s=bt(n,function(e){return o=e.width,o&&0!==parseInt(o,10)?ut.format('<col style="width:{0}"/>',typeof o===cn?o:o+"px"):"<col />"});(i||a.find(".k-hierarchy-col").length)&&s.splice(0,0,'<col class="k-hierarchy-col" />'),a.length&&a.remove(),a=e(Array(r+1).join('<col class="k-group-col">')+s.join("")),a.is("colgroup")||(a=e("<colgroup/>").append(a)),t.prepend(a),wn.msie&&8==wn.version&&(t.css("display","inline-table"),window.setTimeout(function(){t.css("display","")},1))}function G(e,t){var n,i,r=0;for(n=0,i=t.length;i>n;n++)t[n].locked&&(e.eq(n).insertBefore(e.eq(r)),r++)}function q(e){var t,n,i,r={};for(n=0,i=e.length;i>n;n++)t=e[n],r[t.value]=t.text;return r}function $(e,t,n){var i=n&&n.length&&yt(n[0])&&"value"in n[0],r=i?q(n)[e]:e;return r=null!=r?r:"",t?ut.format(t,r):r}function Y(e,t,n){for(var i,r=0,o=e[r];o;){if(i=n?!0:"none"!==o.style.display,i&&!mn.test(o.className)&&--t<0){o.style.display=n?"":"none";break}o=e[++r]}}function K(t,n){for(var i,r,o=0,a=t.length;a>o;o+=1)r=t.eq(o),r.is(".k-grouping-row,.k-detail-row")?(i=r.children(":not(.k-group-cell):first,.k-detail-cell").last(),i.attr("colspan",parseInt(i.attr("colspan"),10)-1)):(r.hasClass("k-grid-edit-row")&&(i=r.children(".k-edit-container")[0])&&(i=e(i),i.attr("colspan",parseInt(i.attr("colspan"),10)-1),i.find("col").eq(n).remove(),r=i.find("tr:first")),Y(r[0].cells,n,!1))}function Q(t,n){for(var i,r,o,a=0,s=t.length;s>a;a+=1)r=t.eq(a),r.is(".k-grouping-row,.k-detail-row")?(i=r.children(":not(.k-group-cell):first,.k-detail-cell").last(),i.attr("colspan",parseInt(i.attr("colspan"),10)+1)):(r.hasClass("k-grid-edit-row")&&(i=r.children(".k-edit-container")[0])&&(i=e(i),i.attr("colspan",parseInt(i.attr("colspan"),10)+1),j(i.find(">form>table"),f(o),!1,0),r=i.find("tr:first")),Y(r[0].cells,n,!0))}function X(e,t,n){n=n||1;var i,r,o;for(r=0,o=e.length;o>r;r++)i=e.eq(r).children().last(),i.attr("colspan",parseInt(i.attr("colspan"),10)+n),i=t.eq(r).children().last(),i.attr("colspan",parseInt(i.attr("colspan"),10)-n)}function J(e){var t,n,i=0,r=e.find(">colgroup>col");for(t=0,n=r.length;n>t;t+=1)i+=parseInt(r[t].style.width,10);return i}function Z(e,t){var n,i,r,o;e=e[0],t=t[0],e.rows.length!==t.rows.length&&(n=e.offsetHeight,i=t.offsetHeight,n>i?(r=t.rows[t.rows.length-1],vn.test(r.className)&&(r=t.rows[t.rows.length-2]),o=n-i):(r=e.rows[e.rows.length-1],vn.test(r.className)&&(r=e.rows[e.rows.length-2]),o=i-n),r.style.height=r.offsetHeight+o+"px")}function et(e,t){var n,i=e.offsetHeight,r=t.offsetHeight;i>r?n=i+"px":r>i&&(n=r+"px"),n&&(e.style.height=t.style.height=n)}function tt(e,t){var n,i,r;if(typeof e===cn&&e===t)return e;if(yt(e)&&e.name===t)return e;if(xt(e))for(n=0,i=e.length;i>n;n++)if(r=e[n],typeof r===cn&&r===t||r.name===t)return r;return null}function nt(t,n){var i,r,o,a=wn.msie;if(n===!0){if(t=e(t),i=!0,i&&(r=t.parent().scrollTop(),o=t.parent().scrollLeft()),a)try{t[0].setActive()}catch(s){t[0].focus()}else t[0].focus();i&&(t.parent().scrollTop(r),t.parent().scrollLeft(o))}else e(t).one("focusin",function(e){e.preventDefault()}).focus()}function it(t){var n=e(t.currentTarget),i=n.is("th"),r=this.table.add(this.lockedTable),o=this.thead.parent().add(e(">table",this.lockedHeader)),a=e(t.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap"),s=n.closest("table")[0];ut.support.touch||a&&n.find(ut.roleSelector("filtercell")).length||(s===r[0]||s===r[1]||s===o[0]||s===o[1])&&(e(t.target).is("a.k-i-collapse, a.k-i-expand")||(this.current(n),(i||!a)&&setTimeout(function(){kn&&e(ut._activeElement()).hasClass("k-widget")||nt(s,!0)}),i&&t.preventDefault()))}function rt(t,n,i,r){if(t=e(t),r){var o=n;n=i,i=o}return n.not(t).length!=n.length?t:n.eq(t[0]==i[0]?0:1)}function ot(e,n,i,r,o){var a,s,l,c=o?"prevAll":"nextAll";if(e){if(a=e.parent()[c](Ft).first(),!a[0]&&(o||e.is("th"))||!o&&e[0].rowSpan>1){if(n=rt(n,i,r,o),nt(n),o&&!e.is(".k-header"))return O(n.find("thead:first")).eq(e.index());a=n.find((o?">thead>":">tbody>")+Ft).first()}!o&&e[0].colSpan>1&&e.is(".k-header")?e=N(e).eq(1):e.is(".k-header")&&o?(l=H(e),e=l.eq(l.length-2)):(s=e.attr(ut.attr("index")),(s===t||o)&&(s=e.index()),e=a.children().eq(s)),e[0]&&e.is(Rt)||(e=a.children(Rt).first())}else e=i.find(Bt);return e}function at(e,t,n,i,r){var o=n.length>1;return e?e.prevAll(":visible")[0]?e=e.prevAll(It).first():o&&(t==n[1]?(nt(n[0]),e=r(e.parent()).children(It).last()):t==i[1]&&(nt(i[0]),e=i.eq(0).find("tr>"+It).last())):e=n.find(Bt),e}function st(e,t,n,i,r){var o=n.length>1;return e?e.nextAll(":visible")[0]?e=e.nextAll(It).first():o&&(t==n[0]?(nt(n[1]),e=r(e.parent()).children(It).first()):t==i[0]&&(nt(i[1]),e=i.eq(1).find("tr>"+It).first())):e=n.find(Bt),e}function lt(e,t,n,i,r){var o=2==n.length,a=!0,s=r?e.prevAll(It+":first"):e.nextAll(":visible:first");return s.length||(s=e.parent(),o&&(a=r&&t==n[0]||!r&&t==n[1],s=i(s)),a&&(s=s[r?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")),s=s.children(It+(r?":last":":first"))),s}function ct(e,t,i){return'<tr class="k-grouping-row">'+n(t)+'<td colspan="'+e+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1"></a>'+i+"</p></td></tr>"}function dt(e){return'<tr class="k-grouping-row"><td colspan="'+e+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>'}var ut=window.kendo,ht=ut.ui,pt=ut.data.DataSource,ft=ht.Groupable,gt=ut.support.tbodyInnerHtml,mt=ut._activeElement,vt=ht.Widget,_t=ut.keys,yt=e.isPlainObject,wt=e.extend,bt=e.map,kt=e.grep,xt=e.isArray,Ct=e.inArray,St=Array.prototype.push,Tt=e.proxy,Dt=ut.isFunction,At=e.isEmptyObject,Et=Math,Mt="progress",Pt="error",It=":not(.k-group-cell):not(.k-hierarchy-cell):visible",zt="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",Ft="tr:not(.k-footer-template):visible",Rt=":not(.k-group-cell):not(.k-hierarchy-cell):visible",Bt=Ft+":first>"+Rt+":first",Lt="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",Ot=".kendoGrid",Ht="edit",Nt="save",Vt="remove",Ut="detailInit",Wt="filterMenuInit",jt="columnMenuInit",Gt="change",qt="columnHide",$t="columnShow",Yt="saveChanges",Kt="dataBound",Qt="detailExpand",Xt="detailCollapse",Jt="k-state-focused",Zt="k-state-selected",en="columnResize",tn="columnReorder",nn="columnLock",rn="columnUnlock",on="click",an="height",sn="tabIndex",ln="function",cn="string",dn="Are you sure you want to delete this record?",un="Delete",hn="Cancel",pn=/(\}|\#)/gi,fn=/#/gi,gn="[\\x20\\t\\r\\n\\f]",mn=RegExp("(^|"+gn+")(k-group-cell|k-hierarchy-cell)("+gn+"|$)"),vn=RegExp("(^|"+gn+")(k-filter-row)("+gn+"|$)"),_n='<a class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',yn=!1,wn=ut.support.browser,bn=wn.msie&&7==wn.version,kn=wn.msie&&8==wn.version,xn=vt.extend({init:function(e,t){var n=this;vt.fn.init.call(n,e,t),n._refreshHandler=Tt(n.refresh,n),n.setDataSource(t.dataSource),n.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(Gt,t._refreshHandler),t.dataSource=e,t.dataSource.bind(Gt,t._refreshHandler)},options:{name:"VirtualScrollable",itemHeight:e.noop},destroy:function(){var e=this;vt.fn.destroy.call(e),e.dataSource.unbind(Gt,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(Ot),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,n=this,i=ut.support.scrollbar()+1,r=n.element;r.css({width:"auto",overflow:"hidden"}).css(yn?"padding-left":"padding-right",i),n.content=r.children().first(),t=n.wrapper=n.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+Ot+" mousewheel"+Ot,Tt(n._wheelScroll,n)),ut.support.kineticScrollNeeded&&(n.drag=new ut.UserEvents(n.wrapper,{global:!0,start:function(e){e.sender.capture()},move:function(e){n.verticalScrollbar.scrollTop(n.verticalScrollbar.scrollTop()-e.y.delta),t.scrollLeft(t.scrollLeft()-e.x.delta),e.preventDefault()}})),n.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:i}).appendTo(r).bind("scroll"+Ot,Tt(n._scroll,n))},_wheelScroll:function(t){if(!t.ctrlKey){var n=this.verticalScrollbar.scrollTop(),i=ut.wheelDeltaY(t);i&&(t.preventDefault(),e(t.currentTarget).one("wheel"+Ot,!1),this.verticalScrollbar.scrollTop(n+-i))}},_scroll:function(e){var t=this,n=e.currentTarget.scrollTop,i=t.dataSource,r=t.itemHeight,o=i.skip()||0,a=t._rangeStart||o,s=t.element.innerHeight(),l=!!(t._scrollbarTop&&t._scrollbarTop>n),c=Et.max(Et.floor(n/r),0),d=Et.max(c+Et.floor(s/r),0);t._scrollTop=n-a*r,t._scrollbarTop=n,t._fetch(c,d,l)||(t.wrapper[0].scrollTop=t._scrollTop)},_fetch:function(e,t,n){var i=this,r=i.dataSource,o=i.itemHeight,a=r.take(),s=i._rangeStart||r.skip()||0,l=Et.floor(e/a)*a,c=!1,d=.33;return s>e?(c=!0,s=Et.max(0,t-a),i._scrollTop=(e-s)*o,i._page(s,a)):t>=s+a&&!n?(c=!0,s=e,i._scrollTop=o,i._page(s,a)):i._fetching||(l+a-a*d>e&&e>a&&r.prefetch(l-a,a),t>l+a*d&&r.prefetch(l+a,a)),c},_page:function(e,t){var n=this,i=n.dataSource;clearTimeout(n._timeout),n._fetching=!0,n._rangeStart=e,i.inRange(e,t)?i.range(e,t):(ut.ui.progress(n.wrapper.parent(),!0),n._timeout=setTimeout(function(){i.range(e,t)},100))},refresh:function(){var e,t,n,i,r=this,o="",a=25e4,s=r.dataSource,l=r._rangeStart,c=ut.support.kineticScrollNeeded?0:ut.support.scrollbar(),d=r.wrapper[0];for(ut.ui.progress(r.wrapper.parent(),!1),clearTimeout(r._timeout),n=r.itemHeight=r.options.itemHeight()||0,i=d.scrollWidth>d.offsetWidth?c:0,e=s.total()*n+i,t=0;t<Et.floor(e/a);t++)o+='<div style="width:1px;height:'+a+'px"></div>';e%a&&(o+='<div style="width:1px;height:'+e%a+'px"></div>'),r.verticalScrollbar.html(o),d.scrollTop=r._scrollTop,r.drag&&r.drag.cancel(),l&&!r._fetching&&(r._rangeStart=s.skip(),1===s.page()&&(r.verticalScrollbar[0].scrollTop=0)),r._fetching=!1}}),Cn={create:{text:"Add new record",imageClass:"k-add",className:"k-grid-add",iconClass:"k-icon"},cancel:{text:"Cancel changes",imageClass:"k-cancel",className:"k-grid-cancel-changes",iconClass:"k-icon"},save:{text:"Save changes",imageClass:"k-update",className:"k-grid-save-changes",iconClass:"k-icon"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-grid-delete",iconClass:"k-icon"},edit:{text:"Edit",imageClass:"k-edit",className:"k-grid-edit",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-update",className:"k-primary k-grid-update",iconClass:"k-icon"},canceledit:{text:"Cancel",imageClass:"k-cancel",className:"k-grid-cancel",iconClass:"k-icon"},excel:{text:"Export to Excel",imageClass:"k-i-excel",className:"k-grid-excel",iconClass:"k-icon"},pdf:{text:"Export to PDF",imageClass:"k-i-pdf",className:"k-grid-pdf",iconClass:"k-icon"}},Sn=ut.ui.DataBoundWidget.extend({init:function(t,n,i){var r=this;n=xt(n)?{dataSource:n}:n,vt.fn.init.call(r,t,n),i&&(r._events=i),yn=ut.support.isRtl(t),r._element(),r._aria(),r._columns(r.options.columns),r._dataSource(),r._tbody(),r._pageable(),r._thead(),r._groupable(),r._toolbar(),r._setContentHeight(),r._templates(),r._navigatable(),r._selectable(),r._details(),r._editable(),r._attachCustomCommandsEvent(),r.options.autoBind?r.dataSource.fetch():r._footer(),r.lockedContent&&(r.wrapper.addClass("k-grid-lockedcolumns"),r._resizeHandler=function(){r.resize()},e(window).on("resize"+Ot,r._resizeHandler)),ut.notify(r)},events:[Gt,"dataBinding","cancel","pdfExport",Kt,Qt,Xt,Ut,Wt,jt,Ht,Nt,Vt,Yt,en,tn,$t,qt,nn,rn],setDataSource:function(e){var t=this,n=t.options.scrollable;t.options.dataSource=e,t._dataSource(),t._pageable(),t._thead(),n&&(n.virtual?t.content.find(">.k-virtual-scrollable-wrap").scrollLeft(0):t.content.scrollLeft(0)),t.options.groupable&&t._groupable(),t.virtualScrollable&&t.virtualScrollable.setDataSource(t.options.dataSource),t.options.navigatable&&t._navigatable(),t.options.selectable&&t._selectable(),t.options.autoBind&&e.fetch()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,navigatable:!1,pageable:!1,editable:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:hn,confirmation:dn,confirmDelete:un},commands:{create:Cn.create.text,cancel:Cn.cancel.text,save:Cn.save.text,destroy:Cn.destroy.text,edit:Cn.edit.text,update:Cn.update.text,canceledit:Cn.canceledit.text,excel:Cn.excel.text,pdf:Cn.pdf.text}}},destroy:function(){var t,n=this;vt.fn.destroy.call(n),n._resizeHandler&&e(window).off("resize"+Ot,n._resizeHandler),n.pager&&n.pager.element&&n.pager.destroy(),n.pager=null,n.groupable&&n.groupable.element&&n.groupable.element.kendoGroupable("destroy"),n.groupable=null,n.options.reorderable&&n.wrapper.data("kendoReorderable").destroy(),n.selectable&&n.selectable.element&&n.selectable.destroy(),n.selectable=null,n.resizable&&(n.resizable.destroy(),n._resizeUserEvents&&(n._resizeHandleDocumentClickHandler&&e(document).off("click",n._resizeHandleDocumentClickHandler),n._resizeUserEvents.destroy(),n._resizeUserEvents=null),n.resizable=null),n.virtualScrollable&&n.virtualScrollable.element&&n.virtualScrollable.destroy(),n.virtualScrollable=null,n._destroyColumnAttachments(),n._destroyEditable(),n.dataSource&&(n.dataSource.unbind(Gt,n._refreshHandler).unbind(Mt,n._progressHandler).unbind(Pt,n._errorHandler),n._refreshHandler=n._progressHandler=n._errorHandler=null),t=n.element.add(n.wrapper).add(n.table).add(n.thead).add(n.wrapper.find(">.k-grid-toolbar")),n.content&&(t=t.add(n.content).add(n.content.find(">.k-virtual-scrollable-wrap"))),n.lockedHeader&&n._removeLockedContainers(),n.pane&&n.pane.destroy(),n._draggableInstance&&n._draggableInstance.element&&n._draggableInstance.destroy(),n._draggableInstance=null,t.off(Ot),ut.destroy(n.wrapper),n.scrollables=n.thead=n.tbody=n.element=n.table=n.content=n.footer=n.wrapper=n._groupableClickHandler=n._setContentWidthHandler=null},getOptions:function(){var n,i=wt(!0,{},this.options);return i.columns=ut.deepExtend([],this.columns),n=this.dataSource,i.dataSource=e.extend(!0,{},n.options),i.dataSource.page=n.page(),i.dataSource.filter=n.filter(),i.dataSource.pageSize=n.pageSize(),i.dataSource.sort=n.sort(),i.dataSource.group=n.group(),i.dataSource.aggregate=n.aggregate(),i.$angular=t,i},setOptions:function(e){var t,n,i,r=this.getOptions();ut.deepExtend(r,e),t=this.wrapper,n=this._events,i=this.element,this.destroy(),this.options=null,t[0]!==i[0]&&(t.before(i),t.remove()),i.empty(),this.init(i,r,n),this._setEvents(r)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t){return t.children().filter(function(){var t=e(this);return!t.hasClass("k-grouping-row")&&!t.hasClass("k-detail-row")&&!t.hasClass("k-group-footer")})},dataItems:function(){var e,t,n,i=ut.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(e=i.length,t=Array(2*e),n=e;--n>=0;)t[n]=t[n+e]=i[n];i=t}return i},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&(this.angular("cleanup",function(){return{elements:t.thead.get()}}),t.thead.find("th").each(function(){var t=e(this),n=t.data("kendoFilterMenu"),i=t.data("kendoColumnSorter"),r=t.data("kendoColumnMenu");n&&n.destroy(),i&&i.destroy(),r&&r.destroy()}))},_attachCustomCommandsEvent:function(){var e,t,n,i=this,r=L(i.columns||[]);for(t=0,n=r.length;n>t;t++)e=r[t].command,e&&l(i,i.wrapper,e)},_aria:function(){var e=this.element.attr("id")||"aria";e&&(this._cellId=e+"_active_cell")},_element:function(){var t=this,n=t.element;n.is("table")||(n=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table"),n.length||(n=e("<table />").appendTo(t.element))),bn&&n.attr("cellspacing",0),t.table=n.attr("role",t._hasDetails()?"treegrid":"grid"),t._wrapper()},_createResizeHandle:function(t,n){var i,r,o,a,s,l,c,d=this,u=d.options.columnResizeHandleWidth,h=d.options.scrollable,p=d.resizeHandle,f=this._groups();if(p&&d.lockedContent&&p.data("th")[0]!==n[0]&&(p.remove(),p=null),p||(p=d.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(p)),yn)i=n.position().left,h&&(a=n.closest(".k-grid-header-wrap, .k-grid-header-locked"),s=wn.msie?a.scrollLeft():0,l=wn.webkit?a[0].scrollWidth-a[0].offsetWidth-a.scrollLeft():0,c=wn.mozilla?a[0].scrollWidth-a[0].offsetWidth-(a[0].scrollWidth-a[0].offsetWidth-a.scrollLeft()):0,i-=l-c+s);else{for(i=n[0].offsetWidth,r=O(n.closest("thead")),o=0;r.length>o&&r[o]!=n[0];o++)i+=r[o].offsetWidth;f>0&&(i+=t.find(".k-group-cell:first").outerWidth()*f)}p.css({top:n.position().top,left:i-u,height:n.outerHeight(),width:3*u}).data("th",n).show()},_positionColumnResizeHandle:function(){var t=this,n=t.options.columnResizeHandleWidth,i=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t.thead.add(i).on("mousemove"+Ot,"th",function(i){var o,a,s,l=e(this);l.hasClass("k-group-cell")||l.hasClass("k-hierarchy-cell")||(o=i.clientX,a=e(window).scrollLeft(),s=l.offset().left+(yn?0:this.offsetWidth),o+a>s-n&&s+n>o+a?t._createResizeHandle(l.closest("div"),l):t.resizeHandle?t.resizeHandle.hide():r(t.wrapper,""))})},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._hideResizeHandle())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,n=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t._resizeUserEvents=new ut.UserEvents(n.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,hold:function(n){var i=e(n.target);n.preventDefault(),i.addClass("k-column-active"),t._createResizeHandle(i.closest("div"),i),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=Tt(t._resizeHandleDocumentClick,t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},_resizable:function(){var t,n,i,o,a,s,l,c=this,d=c.options,u=this._isMobile,h=ut.support.mobileOS?0:ut.support.scrollbar();d.resizable&&(t=d.scrollable?c.wrapper.find(".k-grid-header-wrap:first"):c.wrapper,u?c._positionColumnResizeHandleTouch(t):c._positionColumnResizeHandle(t),c.resizable&&c.resizable.destroy(),c.resizable=new ht.Resizable(t.add(c.lockedHeader),{handle:".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:t.data("th").outerHeight()+c.tbody.attr("clientHeight")})},start:function(t){var h,p,f,g;l=e(t.currentTarget).data("th"),u&&c._hideResizeHandle(),h=l.closest("table"),p=e.inArray(l[0],O(l.closest("thead")).filter(":visible")),a=h.parent().hasClass("k-grid-header-locked"),f=a?c.lockedTable:c.table,g=c.footer||e(),c.footer&&c.lockedContent&&(g=c.footer.children(a?".k-grid-footer-locked":".k-grid-footer-wrap")),r(c.wrapper,"col-resize"),s=d.scrollable?h.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")").add(f.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")")).add(g.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")")):f.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")"),n=t.x.location,i=l.outerWidth(),o=a?f.children("tbody").outerWidth():c.tbody.outerWidth()},resize:function(t){var r,u,p,f,g,m,v=yn?-1:1,_=i+t.x.location*v-n*v;d.scrollable?(a&&c.lockedFooter?r=c.lockedFooter.children("table"):c.footer&&(r=c.footer.find(">.k-grid-footer-wrap>table")),r&&r[0]||(r=e()),u=l.closest("table"),p=a?c.lockedTable:c.table,f=!1,g=c.wrapper.width()-h,m=_,a&&o-i+m>g&&(m=i+(g-o-2*h),0>m&&(m=_),f=!0),m>10&&(s.css("width",m),o&&(m=f?g-2*h:o+t.x.location*v-n*v,p.add(u).add(r).css("width",m),a||(c._footerWidth=m)))):_>10&&s.css("width",_)},resizeend:function(){var e,t,n,o=l.outerWidth();r(c.wrapper,""),i!=o&&(t=c.lockedHeader?c.lockedHeader.find("thead:first tr:first").add(c.thead.find("tr:first")):l.parent(),n=l.attr(ut.attr("index")),n||(n=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(l)),e=L(c.columns)[n],e.width=o,c.trigger(en,{column:e,oldWidth:i,newWidth:o}),c._applyLockedContainersWidth(),c._syncLockedContentHeight(),c._syncLockedHeaderHeight()),c._hideResizeHandle(),l=null}}))},_draggable:function(){var t=this;t.options.reorderable&&(t._draggableInstance&&t._draggableInstance.destroy(),t._draggableInstance=t.wrapper.kendoDraggable({group:ut.guid(),filter:t.content?".k-grid-header:first "+Lt:"table:first>.k-grid-header "+Lt,drag:function(){t._hideResizeHandle()},hint:function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(ut.attr("title"))||t.attr(ut.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-denied" />')}}).data("kendoDraggable"))},_reorderable:function(){var t,n=this;n.options.reorderable&&(n.wrapper.data("kendoReorderable")&&n.wrapper.data("kendoReorderable").destroy(),t=function(e,t,i){var r=e[t],o=e[i],a=d(r,n.columns);return e=a?a.columns:n.columns,Ct(o,e)},n.wrapper.kendoReorderable({draggable:n._draggableInstance,dragOverContainers:function(e,i){var r=C(n.columns);return r[e].lockable!==!1&&t(r,e,i)>-1},inSameContainer:function(i){return e(i.source).parent()[0]===e(i.target).parent()[0]&&t(C(n.columns),i.sourceIndex,i.targetIndex)>-1},change:function(e){var i=C(n.columns),r=i[e.oldIndex],o=t(i,e.oldIndex,e.newIndex);n.trigger(tn,{newIndex:o,oldIndex:Ct(r,i),column:r}),n.reorderColumn(o,r,"before"===e.position)}}))},_reorderHeader:function(e,t,n){var i,r,o,l,c=this,d=x(e[0],c.columns),u=x(t,c.columns),h=[];for(i=0;e.length>i;i++)e[i].columns&&(h=h.concat(e[i].columns));r=s(c.lockedHeader,c.thead,"tr:eq("+d.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"),o=I(e).length,l=I([t]).length,h.length?(o>0&&0===l?v(e,t,h,c.columns,c.lockedHeader.find("thead"),c.thead,this._groups()):0===o&&l>0&&v(e,t,h,c.columns,c.thead,c.lockedHeader.find("thead"),this._groups()),t=k(c.columns,t,e[0],n),t&&c._reorderHeader(h,t,n)):o!==l&&m(r[d.cell],c.columns,o),a(r,d.cell,u.cell,n,e.length)},_reorderContent:function(t,n,i){var r,o,l,c,d=this,u=e(),h=t[0],p=Ct(h,L(d.columns)),f=Ct(n,L(d.columns)),g=Ct(h,B(d.columns)),m=Ct(n,B(d.columns)),v=I(d.columns).length,_=!!n.locked,y=d.footer||d.wrapper.find(".k-grid-footer"),w=r=m;for(n.hidden&&(_?(m=d.lockedTable.find("colgroup"),w=d.lockedHeader.find("colgroup"),r=e(d.lockedFooter).find(">table>colgroup")):(m=d.tbody.prev(),w=d.thead.prev(),r=y.find(".k-grid-footer-wrap").find(">table>colgroup"))),d._hasFilterRow()&&a(d.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),p,f,i,t.length),a(s(d.lockedHeader,d.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),g,w,i,t.length),d.options.scrollable&&a(s(d.lockedTable,d.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),g,m,i,t.length),y&&y.length&&(a(s(d.lockedFooter,y.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),g,r,i,t.length),a(y.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),p,f,i,t.length)),o=d.tbody.children(":not(.k-grouping-row,.k-detail-row)"),d.lockedTable&&(v>f?p>=v&&X(d.lockedTable.find(">tbody>tr.k-grouping-row"),d.table.find(">tbody>tr.k-grouping-row"),t.length):v>p&&X(d.table.find(">tbody>tr.k-grouping-row"),d.lockedTable.find(">tbody>tr.k-grouping-row"),t.length),u=d.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)")),l=0,c=o.length;c>l;l+=1)a(s(u[l],o[l],">td:not(.k-group-cell,.k-hierarchy-cell)"),p,f,i,t.length)},reorderColumn:function(e,n,i){var r,o,a=this,s=d(n,a.columns),l=s?s.columns:a.columns,c=Ct(n,l),u=l[e],h=!!u.locked,p=I(a.columns).length;c!==e&&(n.locked||!h||1!=z(a.columns).length)&&(!n.locked||h||1!=p)&&(a._hideResizeHandle(),i===t&&(i=c>e),o=[n],a._reorderHeader(o,u,i),a.lockedHeader&&(M(a.thead),M(a.lockedHeader)),u.columns&&(u=L(u.columns),u=u[i?0:u.length-1]),n.columns&&(o=L(n.columns)),a._reorderContent(o,u,i),r=!!n.locked,r=r!=h,n.locked=h,l.splice(i?e:e+1,0,n),l.splice(e>c?c:c+1,1),a._templates(),a._updateColumnCellIndex(),a._updateTablesWidth(),a._applyLockedContainersWidth(),a._syncLockedHeaderHeight(),a._syncLockedContentHeight(),a._updateFirstColumnClass(),r&&(h?a.trigger(nn,{column:n}):a.trigger(rn,{column:n})))},_updateColumnCellIndex:function(){var e,t=0;this.lockedHeader&&(e=this.lockedHeader.find("thead"),t=_(e,I(this.columns))),_(this.thead,z(this.columns),t)},lockColumn:function(e){var t,n=this.columns;e="number"==typeof e?n[e]:kt(n,function(t){return t.field===e})[0],!e||e.locked||e.hidden||(t=I(n).length-1,this.reorderColumn(t,e,!1))},unlockColumn:function(e){var t,n=this.columns;e="number"==typeof e?n[e]:kt(n,function(t){return t.field===e})[0],e&&e.locked&&!e.hidden&&(t=I(n).length,this.reorderColumn(t,e,!0))},cellIndex:function(t){var n=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(n=L(I(this.columns)).length),e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+n},_modelForContainer:function(t){t=e(t),t.is("tr")||"popup"===this._editMode()||(t=t.closest("tr"));var n=t.attr(ut.attr("uid"));return this.dataSource.getByUid(n)},_editable:function(){var t,n=this,i=n.selectable&&n.selectable.options.multiple,r=n.options.editable,o=function(){var t=mt(),i=n._editContainer;!i||e.contains(i[0],t)||i[0]===t||e(t).closest(".k-animation-container").length||n.editable.end()&&n.closeCell()};r&&(t=n._editMode(),"incell"===t?r.update!==!1&&n.wrapper.on(on+Ot,"tr:not(.k-grouping-row) > td",function(t){var r=e(this),o=n.lockedTable&&r.closest("table")[0]===n.lockedTable[0];r.hasClass("k-hierarchy-cell")||r.hasClass("k-detail-cell")||r.hasClass("k-group-cell")||r.hasClass("k-edit-cell")||r.has("a.k-grid-delete").length||r.has("button.k-grid-delete").length||r.closest("tbody")[0]!==n.tbody[0]&&!o||e(t.target).is(":input")||(n.editable?n.editable.end()&&(i&&e(mt()).blur(),n.closeCell(),n.editCell(r)):n.editCell(r))}).on("focusin"+Ot,function(){clearTimeout(n.timer),n.timer=null}).on("focusout"+Ot,function(){n.timer=setTimeout(o,1)}):r.update!==!1&&n.wrapper.on(on+Ot,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(t){t.preventDefault(),n.editRow(e(this).closest("tr"))}),r.destroy!==!1?n.wrapper.on(on+Ot,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(t){t.preventDefault(),t.stopPropagation(),n.removeRow(e(this).closest("tr"))}):n.wrapper.on(on+Ot,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(e){e.stopPropagation(),n._confirmation()||e.preventDefault()}))},editCell:function(t){var n,i,r,o;t=e(t),n=this,i=L(n.columns)[n.cellIndex(t)],r=n._modelForContainer(t),n.closeCell(),!r||r.editable&&!r.editable(i.field)||i.command||!i.field||(n._attachModelChange(r),n._editContainer=t,n.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:i.field,format:i.format,editor:i.editor,values:i.values},model:r,target:n,change:function(e){n.trigger(Nt,{values:e.values,container:t,model:r})&&e.preventDefault()}}).data("kendoEditable"),o=t.parent().addClass("k-grid-edit-row"),n.lockedContent&&et(o[0],n._relatedRow(o).addClass("k-grid-edit-row")[0]),n.trigger(Ht,{container:t,model:r}))},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),n=e[0].offsetWidth>t[0].clientWidth?ut.support.scrollbar():0;this.lockedContent.height(t.height()-n)},_syncLockedContentHeight:function(){this.lockedTable&&(this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){var e,t;this.lockedHeader&&(e=this.lockedHeader.children("table"),t=this.thead.parent(),this._adjustRowsHeight(e,t),Z(e,t))},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var e=this,t=function(){if(e.editable){var t=e.editView?e.editView.element:e._editContainer;t&&(t.off(on+Ot,"a.k-grid-cancel",e._editCancelClickHandler),t.off(on+Ot,"a.k-grid-update",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,e._editContainer=null,e._destroyEditView()}};e.editable&&("popup"!==e._editMode()||e._isMobile?t():e._editContainer.data("kendoWindow").bind("deactivate",t).close()),e._actionSheet&&(e._actionSheet.destroy(),e._actionSheet=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t);n&&n.unbind(Gt,e._modelChangeHandler)},closeCell:function(t){var n,i,r,o,a=this,s=a._editContainer;s&&(n=s.closest("tr").attr(ut.attr("uid")),o=a.dataSource.getByUid(n),t&&a.trigger("cancel",{container:s,model:o})||(s.removeClass("k-edit-cell"),i=L(a.columns)[a.cellIndex(s)],r=s.parent().removeClass("k-grid-edit-row"),a._destroyEditable(),a._displayCell(s,i,o),s.hasClass("k-dirty-cell")&&e('<span class="k-dirty"/>').prependTo(s),a.lockedContent&&et(r.css("height","")[0],a._relatedRow(r).css("height","")[0])))},_displayCell:function(e,t,n){var i=this,r={storage:{},count:0},o=wt({},ut.Template,i.options.templateSettings),a=ut.template(i._cellTmpl(t,r),o);r.count>0&&(a=Tt(a,r.storage)),e.empty().html(a(n)),i.angular("compile",function(){return{elements:e,data:[{dataItem:n}]}})},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(t){var n,i=this,r=i._editMode();"incell"!==r&&i.cancelRow(),t=e(t).hide(),n=i._modelForContainer(t),n&&!i.trigger(Vt,{row:t,model:n})?(i.dataSource.remove(n),("inline"===r||"popup"===r)&&i.dataSource.sync()):"incell"===r&&i._destroyEditable()},_editMode:function(){var e="incell",t=this.options.editable;return t!==!0&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(n){var i,r,o,a=this;n instanceof ut.data.ObservableObject?i=n:(n=e(n),i=a._modelForContainer(n)),r=a._editMode(),a.cancelRow(),i&&(a._attachModelChange(i),"popup"===r?a._createPopupEditor(i):"inline"===r?a._createInlineEditor(n,i):"incell"===r&&e(n).children(It).each(function(){var n=e(this),r=L(a.columns)[n.index()];return i=a._modelForContainer(n),i&&(!i.editable||i.editable(r.field))&&r.field?(a.editCell(n),!1):t}),o=a.editView?a.editView.element:a._editContainer,o&&(this._editCancelClickHandler||(this._editCancelClickHandler=Tt(this._editCancelClick,this)),o.on(on+Ot,"a.k-grid-cancel",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=Tt(this._editUpdateClick,this)),o.on(on+Ot,"a.k-grid-update",this._editUpdateClickHandler)))
},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation(),this.saveRow()},_editCancelClick:function(t){var n,i=this,r=i.options.navigatable,o=i.editable.options.model,a=i.editView?i.editView.element:i._editContainer;t.preventDefault(),t.stopPropagation(),i.trigger("cancel",{container:a,model:o})||(n=i.items().index(e(i.current()).parent()),i.cancelRow(),r&&(i.current(i.items().eq(n).children().filter(Rt).first()),nt(i.table,!0)))},_createPopupEditor:function(n){var i,r,o,a,s,l,c,d,u,h,p,f=this,g="<div "+ut.attr("uid")+'="'+n.uid+'" class="k-popup-edit-form'+(f._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container">',m=[],v=L(f.columns),_=f.options.editable,y=_.template,w=yt(_)?_.window:{},b=wt({},ut.Template,f.options.templateSettings);if(w=w||{},y)for(typeof y===cn&&(y=window.unescape(y)),g+=ut.template(y,b)(n),o=0,a=v.length;a>o;o++)i=v[o],i.command&&(d=tt(i.command,"edit"),d&&(r=d));else for(o=0,a=v.length;a>o;o++)i=v[o],i.command?i.command&&(d=tt(i.command,"edit"),d&&(r=d)):(g+='<div class="k-edit-label"><label for="'+i.field+'">'+(i.title||i.field||"")+"</label></div>",n.editable&&!n.editable(i.field)||!i.field?(h={storage:{},count:0},s=ut.template(f._cellTmpl(i,h),b),h.count>0&&(s=Tt(s,h.storage)),g+='<div class="k-edit-field">'+s(n)+"</div>"):(m.push({field:i.field,format:i.format,editor:i.editor,values:i.values}),g+="<div "+ut.attr("container-for")+'="'+i.field+'" class="k-edit-field"></div>'));r&&yt(r)&&(r.text&&yt(r.text)&&(l=r.text.update,c=r.text.cancel),r.attr&&(u=r.attr)),f._isMobile?(g+="</div></div>",f.editView=f.pane.append("<div data-"+ut.ns+'role="view" data-'+ut.ns+'init-widgets="false" class="k-grid-edit-form"><div data-'+ut.ns+'role="header" class="k-header">'+f._createButton({name:"update",text:l,attr:u})+(w.title||"Edit")+f._createButton({name:"canceledit",text:c,attr:u})+"</div>"+g+"</div>"),p=f._editContainer=f.editView.element.find(".k-popup-edit-form")):(g+='<div class="k-edit-buttons k-state-default">',g+=f._createButton({name:"update",text:l,attr:u})+f._createButton({name:"canceledit",text:c,attr:u}),g+="</div></div></div>",p=f._editContainer=e(g).appendTo(f.wrapper).eq(0).kendoWindow(wt({modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1,close:function(i){if(i.userTriggered){if(i.sender.element.focus(),f.trigger("cancel",{container:p,model:n}))return i.preventDefault(),t;var r=f.items().index(e(f.current()).parent());f.cancelRow(),f.options.navigatable&&(f.current(f.items().eq(r).children().filter(Rt).first()),nt(f.table,!0))}}},w))),f.editable=f._editContainer.kendoEditable({fields:m,model:n,clearContainer:!1,target:f}).data("kendoEditable"),f._isMobile&&p.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){e(this).next().children("input").click()}),f._openPopUpEditor(),f.trigger(Ht,{container:p,model:n})},_openPopUpEditor:function(){this._isMobile?this.pane.navigate(this.editView,this._editAnimation):this._editContainer.data("kendoWindow").center().open()},_createInlineEditor:function(t,n){var i,r,o,a=this,s=[];a.lockedContent&&(t=t.add(a._relatedRow(t))),t.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){if(r=e(this),i=L(a.columns)[a.cellIndex(r)],i.command||!i.field||n.editable&&!n.editable(i.field)){if(i.command&&(o=tt(i.command,"edit"))){r.empty();var t,l,c;yt(o)&&(o.text&&yt(o.text)&&(t=o.text.update,l=o.text.cancel),o.attr&&(c=o.attr)),e(a._createButton({name:"update",text:t,attr:c})+a._createButton({name:"canceledit",text:l,attr:c})).appendTo(r)}}else s.push({field:i.field,format:i.format,editor:i.editor,values:i.values}),r.attr(ut.attr("container-for"),i.field),r.empty()}),a._editContainer=t,a.editable=new ut.ui.Editable(t.addClass("k-grid-edit-row"),{target:a,fields:s,model:n,clearContainer:!1}),t.length>1&&(et(t[0],t[1]),a._applyLockedContainersWidth()),a.trigger(Ht,{container:t,model:n})},cancelRow:function(){var e,t=this,n=t._editContainer;n&&(e=t._modelForContainer(n),t._destroyEditable(),t.dataSource.cancelChanges(e),t._displayRow("popup"!==t._editMode()?n:t.tbody.find("["+ut.attr("uid")+"="+e.uid+"]")))},saveRow:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t),i=e.editable;t&&i&&i.end()&&!e.trigger(Nt,{container:t,model:n})&&e.dataSource.sync()},_displayRow:function(t){var n,i,r,o=this,a=o._modelForContainer(t),s=t.hasClass("k-state-selected"),l=t.hasClass("k-alt");a&&(o.lockedContent&&(n=e((l?o.lockedAltRowTemplate:o.lockedRowTemplate)(a)),o._relatedRow(t.last()).replaceWith(n)),o.angular("cleanup",function(){return{elements:t.get()}}),i=e((l?o.altRowTemplate:o.rowTemplate)(a)),t.replaceWith(i),o.angular("compile",function(){return{elements:i.get(),data:[{dataItem:a}]}}),s&&o.options.selectable&&o.select(i.add(n)),n&&et(i[0],n[0]),r=i.next(),r.hasClass("k-detail-row")&&r.is(":visible")&&i.find(".k-hierarchy-cell .k-icon").removeClass("k-plus").addClass("k-minus"))},_showMessage:function(t,n){var i,r,o,a=this;return a._isMobile?(i=ut.template('<ul><li class="km-actionsheet-title">#:title#</li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#</a></li></ul>'),r=e(i(t)).appendTo(a.view.element),o=a._actionSheet=new ut.mobile.ui.ActionSheet(r,{cancel:t.cancelDelete,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(t){var i=e(t.currentTarget).parent();i.hasClass("km-actionsheet-cancel")||a._removeRow(n)},popup:a._actionSheetPopupOptions}),o.open(n),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,n=t.options.editable,i=n===!0||typeof n===cn?t.options.messages.editable.confirmation:n.confirmation;return i!==!1&&null!=i?(typeof i===ln&&(i=i(t._modelForContainer(e))),t._showMessage({confirmDelete:n.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:n.cancelDelete||t.options.messages.editable.cancelDelete,title:i===!0?t.options.messages.editable.confirmation:i},e)):!0},cancelChanges:function(){this.dataSource.cancelChanges()},saveChanges:function(){var e=this;(e.editable&&e.editable.end()||!e.editable)&&!e.trigger(Yt)&&e.dataSource.sync()},addRow:function(){var e,t,n,i,r,o,a=this,s=a.dataSource,l=a._editMode(),c=a.options.editable.createAt||"",d=s.pageSize(),u=s.view()||[];(a.editable&&a.editable.end()||!a.editable)&&("incell"!=l&&a.cancelRow(),e=s.indexOf(u[0]),"bottom"==c.toLowerCase()&&(e+=u.length,d&&!s.options.serverPaging&&u.length>=d&&(e-=1)),0>e&&(e=s.page()>s.totalPages()?(s.page()-1)*d:0),t=s.insert(e,{}),n=t.uid,i=a.lockedContent?a.lockedTable:a.table,r=i.find("tr["+ut.attr("uid")+"="+n+"]"),o=r.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(a._firstEditableColumnIndex(r)),"inline"===l&&r.length?a.editRow(r):"popup"===l?a.editRow(t):o.length&&a.editCell(o),"bottom"==c.toLowerCase()&&a.lockedContent&&(a.lockedContent[0].scrollTop=a.content[0].scrollTop=a.content[0].offsetHeight))},_firstEditableColumnIndex:function(e){var t,n,i,r=this,o=L(r.columns),a=r._modelForContainer(e);for(n=0,i=o.length;i>n;n++)if(t=o[n],a&&(!a.editable||a.editable(t.field))&&!t.command&&t.field)return n;return-1},_toolbar:function(){var t,n=this,i=n.wrapper,r=n.options.toolbar,o=n.options.editable;r&&(t=n.wrapper.find(".k-grid-toolbar"),t.length||(Dt(r)||(r=typeof r===cn?r:n._toolbarTmpl(r).replace(fn,"\\#"),r=Tt(ut.template(r),n)),t=e('<div class="k-header k-grid-toolbar" />').html(r({})).prependTo(i),n.angular("compile",function(){return{elements:t.get()}})),o&&o.create!==!1&&t.on(on+Ot,".k-grid-add",function(e){e.preventDefault(),n.addRow()}).on(on+Ot,".k-grid-cancel-changes",function(e){e.preventDefault(),n.cancelChanges()}).on(on+Ot,".k-grid-save-changes",function(e){e.preventDefault(),n.saveChanges()}),t.on(on+Ot,".k-grid-excel",function(e){e.preventDefault(),n.saveAsExcel()}),t.on(on+Ot,".k-grid-pdf",function(e){e.preventDefault(),n.saveAsPDF()}))},_toolbarTmpl:function(e){var t,n,i=this,r="";if(xt(e))for(t=0,n=e.length;n>t;t++)r+=i._createButton(e[t]);return r},_createButton:function(e){var n,r=e.template||_n,o=typeof e===cn?e:e.name||e.text,a=Cn[o]?Cn[o].className:"k-grid-"+(o||"").replace(/\s/g,""),s={className:a,text:o,imageClass:"",attr:"",iconClass:""},l=this.options.messages.commands;if(!(o||yt(e)&&e.template))throw Error("Custom commands should have name specified");return yt(e)?(e.className&&Ct(s.className,e.className.split(" "))<0?e.className+=" "+s.className:e.className===t&&(e.className=s.className),"edit"===o&&yt(e.text)&&(e=wt(!0,{},e),e.text=e.text.edit),e.attr&&(yt(e.attr)&&(e.attr=i(e.attr)),typeof e.attr===cn&&(n=e.attr.match(/class="(.+?)"/),n&&Ct(n[1],e.className.split(" "))<0&&(e.className+=" "+n[1]))),s=wt(!0,s,Cn[o],{text:l[o]},e)):s=wt(!0,s,Cn[o],{text:l[o]}),ut.template(r)(s)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(on+Ot,t._groupableClickHandler):t._groupableClickHandler=function(n){var i=e(this),r=i.closest("tr");i.hasClass("k-i-collapse")?t.collapseGroup(r):t.expandGroup(r),n.preventDefault(),n.stopPropagation()},t._isLocked()?t.lockedTable.on(on+Ot,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler):t.table.on(on+Ot,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this,n=t.wrapper,i=t.options.groupable,r=Lt+"["+ut.attr("field")+"]",o=t.content?".k-grid-header:first "+r:"table:first>.k-grid-header "+r;i&&i.enabled!==!1&&(n.has("div.k-grouping-header")[0]||e("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(n),t.groupable&&t.groupable.destroy(),t.groupable=new ft(n,wt({},i,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:o,filter:o,allowDrag:t.options.reorderable})))},_continuousItems:function(t,n){var i,r,o,a,s,l,c,d;if(this.lockedContent){for(i=this,r=i.table.add(i.lockedTable),o=e(t,r[0]),a=e(t,r[1]),s=n?I(i.columns).length:1,l=n?i.columns.length-s:1,c=[],d=0;o.length>d;d+=s)St.apply(c,o.slice(d,d+s)),St.apply(c,a.splice(0,l));return c}},_selectable:function(){var n,i,r,o,a=this,s=[],l=a._isLocked(),c=a.options.selectable;c&&(a.selectable&&a.selectable.destroy(),c=ut.ui.Selectable.parseOptions(c),n=c.multiple,i=c.cell,a._hasDetails()&&(s[s.length]=".k-detail-row"),(a.options.groupable||a._hasFooters())&&(s[s.length]=".k-grouping-row,.k-group-footer"),s=s.join(","),""!==s&&(s=":not("+s+")"),r=a.table,l&&(r=r.add(a.lockedTable)),o=">"+(i?zt:"tbody>tr"+s),a.selectable=new ut.ui.Selectable(r,{filter:o,aria:!0,multiple:n,change:function(){a.trigger(Gt)},useAllItems:l&&n&&i,relatedTarget:function(t){var n,r,o,s;if(!i&&l){for(r=e(),o=0,s=t.length;s>o;o++)n=a._relatedRow(t[o]),Ct(n[0],t)<0&&(r=r.add(n));return r}},continuousItems:function(){return a._continuousItems(o,i)}}),a.options.navigatable&&r.on("keydown"+Ot,function(o){var s=a.current(),c=o.target;if(o.keyCode===_t.SPACEBAR&&e.inArray(c,r)>-1&&!s.is(".k-edit-cell,.k-header")&&s.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(o.preventDefault(),o.stopPropagation(),s=i?s:s.parent(),l&&!i&&(s=s.add(a._relatedRow(s))),n)if(o.ctrlKey){if(s.hasClass(Zt))return s.removeClass(Zt),a.trigger(Gt),t}else a.selectable.clear();else a.selectable.clear();a.selectable.value(s)}}))},_relatedRow:function(t){var n,i,r=this.lockedTable;return t=e(t),r?(n=t.closest(this.table.add(this.lockedTable)),i=n.find(">tbody>tr").index(t),n=n[0]===this.table[0]?r:this.table,n.find(">tbody>tr").eq(i)):t},clearSelection:function(){var e=this;e.selectable.clear(),e.trigger(Gt)},select:function(n){var i=this,r=i.selectable;return n=e(n),n.length?(r.options.multiple||(r.clear(),n=n.first()),i._isLocked()&&(n=n.add(n.map(function(){return i._relatedRow(this)}))),r.value(n),t):r.value()},current:function(e){var n,i=this,r=i.options.scrollable,o=i._current,a=i.table.add(i.thead.parent());return e!==t&&e.length&&(o&&o[0]===e[0]||(o&&(o.removeClass(Jt).removeAttr("id"),a.removeAttr("aria-activedescendant")),e.attr("id",i._cellId),i._current=e.addClass(Jt),a.attr("aria-activedescendant",i._cellId),e.length&&r&&(n=e.closest("table").parent(),n.is(".k-grid-content")?i._scrollTo(e.parent()[0],i.content[0]):n.is(".k-grid-content-locked")&&(i._scrollTo(i._relatedRow(e.parent())[0],i.content[0]),i.lockedContent[0].scrollTop=i.content[0].scrollTop),n.is(".k-grid-content-locked,.k-grid-header-locked")||(r.virtual?i._scrollTo(e[0],i.content.find(">.k-virtual-scrollable-wrap")[0]):i._scrollTo(e[0],i.content[0]))))),i._current},_removeCurrent:function(){this._current&&(this._current.removeClass(Jt),this._current=null)},_scrollTo:function(e,t){var n=e.tagName.toLowerCase(),i="td"===n||"th"===n,r=e[i?"offsetLeft":"offsetTop"],o=e[i?"offsetWidth":"offsetHeight"],a=t[i?"scrollLeft":"scrollTop"],s=t[i?"clientWidth":"clientHeight"],l=r+o,c=0;c=a>r?r:l>a+s?s>=o?l-s:r:a,t[i?"scrollLeft":"scrollTop"]=c},_navigatable:function(){var t=this,n=Tt(t.current,t),i=t.table.add(t.lockedTable),r=t.thead.parent().add(e(">table",t.lockedHeader)),o=(t._isLocked(),i),a=ut.support.isRtl(t.element);t.options.navigatable&&(t.options.scrollable&&(o=i.add(r),r.attr(sn,-1)),o.off("mousedown"+Ot+" focus"+Ot+" focusout"+Ot+" keydown"+Ot),r.on("keydown"+Ot,function(e){e.altKey&&e.keyCode==_t.DOWN&&(n().find(".k-grid-filter, .k-header-column-menu").click(),e.stopImmediatePropagation())}).find("a.k-link").attr("tabIndex",-1),i.attr(sn,Et.max(i.attr(sn)||0,0)).on("mousedown"+Ot+" keydown"+Ot,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}),o.on(ut.support.touch?"touchstart"+Ot:"mousedown"+Ot,Ft+">"+Rt,Tt(it,t)).on("focus"+Ot,function(){if(!ut.support.touch){var t=n();t&&t.is(":visible")?t.addClass(Jt):n(e(this).find(Bt)),i.attr(sn,-1),r.attr(sn,-1),e(this).attr(sn,0)}}).on("focusout"+Ot,function(){var e=n();e&&e.removeClass(Jt)}).on("keydown"+Ot,function(o){var s,l,c,d,u,h=o.keyCode,p=!1,f=!o.isDefaultPrevented()&&!e(o.target).is(":button,a,:input,a>.k-icon"),g=t.options.pageable,m=t.dataSource,v="incell"==t._editMode(),_=o.shiftKey,y=Tt(t._relatedRow,t),w=n();if(w&&w.is("th")&&(f=!0),f&&h==_t.UP)n(ot(w,o.currentTarget,i,r,!0)),p=!0;else if(f&&h==_t.DOWN)n(ot(w,o.currentTarget,i,r)),p=!0;else if(f&&h==(a?_t.RIGHT:_t.LEFT))n(at(w,o.currentTarget,i,r,y)),p=!0;else if(f&&h==(a?_t.LEFT:_t.RIGHT))n(st(w,o.currentTarget,i,r,y)),p=!0;else if(f&&g&&_t.PAGEDOWN==h)m.page(m.page()+1),p=!0;else if(f&&g&&_t.PAGEUP==h)m.page(m.page()-1),p=!0;else if(h==_t.ENTER||_t.F2==h){if(w=w?w:i.find(Bt),!w.length)return;e(o.target).is("table")||e.contains(w[0],o.target)||(w=e(o.target).closest("[role=gridcell]")),w.is("th")?(w.find(".k-link").click(),p=!0):w.parent().is(".k-master-row,.k-grouping-row")?(w.parent().find(".k-icon:first").click(),p=!0):(c=w.find(":kendoFocusable:first"),!w.hasClass("k-edit-cell")&&c[0]&&w.hasClass("k-state-focused")?(c.focus(),p=!0):t.options.editable&&!e(o.target).is(":button,.k-button,textarea")&&(d=e(o.target).closest("[role=gridcell]"),d[0]||(d=w),t._handleEditing(d,!1,v?o.currentTarget:i[0]),p=!0))}else _t.ESC==h?(s=mt(),w&&e.contains(w[0],s)&&!w.hasClass("k-edit-cell")&&!w.parent().hasClass("k-grid-edit-row")?(nt(o.currentTarget,!0),p=!0):!t._editContainer||w&&!t._editContainer.has(w[0])&&w[0]!==t._editContainer[0]||(v?t.closeCell(!0):(l=e(w).parent().index(),s&&s.blur(),t.cancelRow(),l>=0&&t.current(i.find(">tbody>tr").eq(l).children().filter(Rt).first())),wn.msie&&9>wn.version&&document.body.focus(),nt(v?o.currentTarget:i[0],!0),p=!0)):_t.TAB==h&&(w=e(w),t.options.editable&&v&&(u=e(mt()).closest(".k-edit-cell"),u[0]&&u[0]!==w[0]&&(w=u)),u=lt(w,o.currentTarget,i,y,_),!w.is("th")&&u.length&&t.options.editable&&v&&(t._handleEditing(w,u,u.closest(i)),p=!0));p&&(o.preventDefault(),o.stopPropagation())}))},_handleEditing:function(n,i,r){var o,a,s=this,l=e(mt()),c=s._editMode(),d=wn.msie,u=d&&9>wn.version,h=s._editContainer;if(r=e(r),a="incell"==c?n.hasClass("k-edit-cell"):n.parent().hasClass("k-grid-edit-row"),s.editable){if(e.contains(h[0],l[0])&&(wn.opera||u?l.change().triggerHandler("blur"):(l.blur(),d&&l.blur())),!s.editable)return nt(r),t;if(!s.editable.end())return s.current("incell"==c?h:h.children().filter(It).first()),o=h.find(":kendoFocusable:first")[0],o&&o.focus(),t;"incell"==c?s.closeCell():(s.saveRow(),a=!0)}i&&s.current(i),u&&document.body.focus(),nt(r,!0),(!a&&!i||i)&&("incell"==c?s.editCell(s.current()):s.editRow(s.current().parent()))},_wrapper:function(){var e=this,t=e.table,n=e.options.height,i=e.element;i.is("div")||(i=i.wrap("<div/>").parent()),e.wrapper=i.addClass("k-grid k-widget"),n&&(e.wrapper.css(an,n),t.css(an,"auto")),e._initMobile()},_initMobile:function(){var t,n=this.options,i=this;this._isMobile=n.mobile===!0&&ut.support.mobileOS||"phone"===n.mobile||"tablet"===n.mobile,this._isMobile&&(t=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+ut.ns+'role="view" data-'+ut.ns+'init-widgets="false"></div>').parent(),this.pane=ut.mobile.ui.Pane.wrap(t),this.view=this.pane.view(),this._actionSheetPopupOptions=e(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"},n.height&&this.pane.element.parent().css(an,n.height),this._editAnimation="slide",this.view.bind("show",function(){i._isLocked()&&(i._updateTablesWidth(),i._applyLockedContainersWidth(),i._syncLockedContentHeight(),i._syncLockedHeaderHeight(),i._syncLockedFooterHeight())}))},_tbody:function(){var t,n=this,i=n.table;t=i.find(">tbody"),t.length||(t=e("<tbody/>").appendTo(i)),n.tbody=t.attr("role","rowgroup")},_scrollable:function(){var t,n,i,r,o=this,a=o.options,s=a.scrollable,l=s!==!0&&s.virtual&&!o.virtualScrollable,c=!ut.support.kineticScrollNeeded||l?ut.support.scrollbar():0;s&&(t=o.wrapper.children(".k-grid-header"),t[0]||(t=e('<div class="k-grid-header" />').insertBefore(o.table)),t.css(yn?"padding-left":"padding-right",s.virtual?c+1:c),n=e('<table role="grid" />'),bn&&n.attr("cellspacing",0),n.append(o.thead),t.empty().append(e('<div class="k-grid-header-wrap" />').append(n)),o.content=o.table.parent(),o.content.is(".k-virtual-scrollable-wrap, .km-scroll-container")&&(o.content=o.content.parent()),o.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(o.content=o.table.wrap('<div class="k-grid-content" />').parent()),l&&(o.virtualScrollable=new xn(o.content,{dataSource:o.dataSource,itemHeight:function(){return o._averageRowHeight()}})),o.scrollables=t.children(".k-grid-header-wrap"),i=o.wrapper.find(".k-grid-footer"),i.length&&(o.scrollables=o.scrollables.add(i.children(".k-grid-footer-wrap"))),s.virtual?o.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+Ot).bind("scroll"+Ot,function(){o.scrollables.scrollLeft(this.scrollLeft),o.lockedContent&&(o.lockedContent[0].scrollTop=this.scrollTop)}):(o.content.unbind("scroll"+Ot).bind("scroll"+Ot,function(){o.scrollables.scrollLeft(this.scrollLeft),o.lockedContent&&(o.lockedContent[0].scrollTop=this.scrollTop)}),r=o.content.data("kendoTouchScroller"),r&&r.destroy(),r=ut.touchScroller(o.content),r&&r.movable&&(o.touchScroller=r,r.movable.bind("change",function(e){o.scrollables.scrollLeft(-e.sender.x),o.lockedContent&&o.lockedContent.scrollTop(-e.sender.y)}),o.one(Kt,function(e){e.sender.wrapper.addClass("k-grid-backface")}))))},_setContentWidth:function(){var t,n=this,i="k-grid-content-expander",r='<div class="'+i+'"></div>',o=n.resizable;n.options.scrollable&&n.wrapper.is(":visible")&&(t=n.table.parent().children("."+i),n._setContentWidthHandler=Tt(n._setContentWidth,n),n.dataSource&&n.dataSource.view().length?t[0]&&(t.remove(),o&&o.unbind("resize",n._setContentWidthHandler)):(t[0]||(t=e(r).appendTo(n.table.parent()),o&&o.bind("resize",n._setContentWidthHandler)),n.thead&&t.width(n.thead.width())),n._applyLockedContainersWidth())},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var e,t=this.thead.parent(),n=t.parent(),i=this.wrapper[0].clientWidth,r=this._groups(),o=ut.support.scrollbar(),a=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),s=t.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),l=D(a),c=D(s);r>0&&(l+=this.lockedHeader.find(".k-group-cell:first").outerWidth()*r),l>=i&&(l=i-3*o),this.lockedHeader.add(this.lockedContent).width(l),n[0].style.width=n.parent().width()-l-2+"px",t.add(this.table).width(c),this.virtualScrollable&&(i-=o),this.content[0].style.width=i-l-2+"px",this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(l),e=this.footer.find(".k-grid-footer-wrap"),e[0].style.width=n[0].clientWidth+"px",e.children().first().width(c))}},_setContentHeight:function(){var e,t=this,n=t.options,i=t.wrapper.innerHeight(),r=t.wrapper.children(".k-grid-header"),o=ut.support.scrollbar();n.scrollable&&t.wrapper.is(":visible")&&(i-=r.outerHeight(),t.pager&&(i-=t.pager.element.outerHeight()),n.groupable&&(i-=t.wrapper.children(".k-grouping-header").outerHeight()),n.toolbar&&(i-=t.wrapper.children(".k-grid-toolbar").outerHeight()),t.footerTemplate&&(i-=t.wrapper.children(".k-grid-footer").outerHeight()),e=function(e){var t,n;return e[0].style.height?!0:(t=e.height(),e.height("auto"),n=e.height(),t!=n?(e.height(""),!0):(e.height(""),!1))},e(t.wrapper)&&(i>2*o?(t.lockedContent&&(o=t.table[0].offsetWidth>t.table.parent()[0].clientWidth?o:0,t.lockedContent.height(i-o)),t.content.height(i)):t.content.height(2*o+1)))},_averageRowHeight:function(){var e,t=this,n=t._items(t.tbody).length,i=t._rowHeight;return 0===n?i:(t._rowHeight||(t._rowHeight=i=t.table.outerHeight()/n,t._sum=i,t._measures=1),e=t.table.outerHeight()/n,i!==e&&(t._measures++,t._sum+=e,t._rowHeight=t._sum/t._measures),i)},_dataSource:function(){var e,n=this,i=n.options,r=i.dataSource;r=xt(r)?{data:r}:r,yt(r)&&(wt(r,{table:n.table,fields:n.columns}),e=i.pageable,yt(e)&&e.pageSize!==t&&(r.pageSize=e.pageSize)),n.dataSource&&n._refreshHandler?n.dataSource.unbind(Gt,n._refreshHandler).unbind(Mt,n._progressHandler).unbind(Pt,n._errorHandler):(n._refreshHandler=Tt(n.refresh,n),n._progressHandler=Tt(n._requestStart,n),n._errorHandler=Tt(n._error,n)),n.dataSource=pt.create(r).bind(Gt,n._refreshHandler).bind(Mt,n._progressHandler).bind(Pt,n._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var n,i,r,o,a,s,l,c,d,u=this,h=u.tbody,p=t.model,f=u.tbody.find("tr["+ut.attr("uid")+"="+p.uid+"]"),g=f.hasClass("k-alt"),m=u._items(h).index(f),v=u.lockedContent;if(v&&(n=u._relatedRow(f)),f.add(n).children(".k-edit-cell").length&&!u.options.rowTemplate)f.add(n).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){i=e(this),r=L(u.columns)[u.cellIndex(i)],r.field===t.field&&(i.hasClass("k-edit-cell")?i.addClass("k-dirty-cell"):(u._displayCell(i,r,p),e('<span class="k-dirty"/>').prependTo(i)))});else if(!f.hasClass("k-grid-edit-row")){for(s=e().add(f),v&&(o=(g?u.lockedAltRowTemplate:u.lockedRowTemplate)(p),s=s.add(n),n.replaceWith(o)),o=(g?u.altRowTemplate:u.rowTemplate)(p),f.replaceWith(o),o=u._items(h).eq(m),v&&(f=f.add(n),n=u._relatedRow(o)[0],et(o[0],n),o=o.add(n)),a=u.options.selectable,a&&f.hasClass("k-state-selected")&&u.select(o),c=s.children(":not(.k-group-cell,.k-hierarchy-cell)"),l=o.children(":not(.k-group-cell,.k-hierarchy-cell)"),m=0,d=u.columns.length;d>m;m++)r=u.columns[m],i=l.eq(m),a&&c.eq(m).hasClass("k-state-selected")&&i.addClass("k-state-selected"),r.field===t.field&&e('<span class="k-dirty"/>').prependTo(i);u.trigger("itemChange",{item:o,data:p,ns:ht})}},_pageable:function(){var t,n=this,i=n.options.pageable;i&&(t=n.wrapper.children("div.k-grid-pager"),t.length||(t=e('<div class="k-pager-wrap k-grid-pager"/>').appendTo(n.wrapper)),n.pager&&n.pager.destroy(),n.pager="object"==typeof i&&i instanceof ut.ui.Pager?i:new ut.ui.Pager(t,wt({},i,{dataSource:n.dataSource})))},_footer:function(){var t,n,i,r,a=this,s=a.dataSource.aggregates(),l="",c=a.footerTemplate,d=a.options,u=a.footer||a.wrapper.find(".k-grid-footer");c?(s=At(s)?o(a.dataSource.aggregate()):s,l=e(a._wrapFooter(c(s))),u.length?(n=l,a.angular("cleanup",function(){return{elements:u.get()}}),u.replaceWith(n),u=a.footer=n):u=a.footer=d.scrollable?d.pageable?l.insertBefore(a.wrapper.children("div.k-grid-pager")):l.appendTo(a.wrapper):l.insertBefore(a.tbody),a.angular("compile",function(){return{elements:u.find("td").get(),data:bt(a.columns,function(e){return{column:e,aggregate:s[e.field]}})}})):u&&!a.footer&&(a.footer=u),u.length&&(d.scrollable&&(t=u.attr("tabindex",-1).children(".k-grid-footer-wrap"),a.scrollables=a.scrollables.filter(function(){return!e(this).is(".k-grid-footer-wrap")}).add(t)),a._footerWidth&&u.find("table").css("width",a._footerWidth),t&&(i=a.content.scrollLeft(),r=d.scrollable!==!0&&d.scrollable.virtual&&!a.virtualScrollable,r&&(i=a.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft()),t.scrollLeft(i))),a.lockedContent&&(a._appendLockedColumnFooter(),a._applyLockedContainersWidth(),a._syncLockedFooterHeight())},_wrapFooter:function(t){var n=this,i="",r=ut.support.mobileOS?0:ut.support.scrollbar();return n.options.scrollable?(i=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(bn?' cellspacing="0"':"")+"><tbody>"+t+"</tbody></table></div></div>"),n._appendCols(i.find("table")),i.css(yn?"padding-left":"padding-right",r),i):'<tfoot class="k-grid-footer">'+t+"</tfoot>"},_columnMenu:function(){var e,n,i,r,o,a,s,l,c,d=this,u=L(d.columns),h=d.options,p=h.columnMenu,f=kt(d.columns,function(e){return e.columns!==t}).length>0,g=this._isMobile,m=function(e){d.trigger(jt,{field:e.field,container:e.container})},v=function(e){nt(e.closest("table"),!0)},_=h.$angular;if(p)for("boolean"==typeof p&&(p={}),a=O(d.thead),s=0,l=a.length;l>s;s++)n=u[s],c=a.eq(s),n.command||!n.field&&!c.attr("data-"+ut.ns+"field")||(e=c.data("kendoColumnMenu"),e&&e.destroy(),r=n.sortable!==!1&&p.sortable!==!1&&h.sortable!==!1?wt({},h.sortable,{compare:(n.sortable||{}).compare}):!1,o=h.filterable&&n.filterable!==!1&&p.filterable!==!1?wt({pane:d.pane},n.filterable,h.filterable):!1,i={dataSource:d.dataSource,values:n.values,columns:p.columns,sortable:r,filterable:o,messages:p.messages,owner:d,closeCallback:v,init:m,pane:d.pane,filter:g?":not(.k-column-active)":"",lockedColumns:!f&&n.lockable!==!1&&I(u).length>0},_&&(i.$angular=_),c.kendoColumnMenu(i))},_headerCells:function(){return this.thead.find("th").filter(function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")})},_filterable:function(){var e,t,n,i,r,o,a,s=this,l=L(s.columns),c=function(e){s.trigger(Wt,{field:e.field,container:e.container})},d=function(e){nt(e.closest("table"),!0)},u=s.options.filterable;if(u&&typeof u.mode==cn&&-1==u.mode.indexOf("menu")&&(u=!1),u&&!s.options.columnMenu)for(t=O(s.thead),i=0,r=t.length;r>i;i++)n=t.eq(i),l[i].filterable===!1||l[i].command||!l[i].field&&!n.attr("data-"+ut.ns+"field")||(e=n.data("kendoFilterMenu"),e&&e.destroy(),o=l[i].filterable,a=wt({},u,o,{dataSource:s.dataSource,values:l[i].values,closeCallback:d,init:c,pane:s.pane}),o&&o.messages&&(a.messages=wt(!0,{},u.messages,o.messages)),n.kendoFilterMenu(a))},_filterRow:function(){var t,n,i,r,o,a,s,l,c,d,u,h,p=this;if(p._hasFilterRow())for(t=L(p.columns),n=p.options.filterable,i=p.thead.find(".k-filter-row"),this._updateHeader(this.dataSource.group().length),r=0;t.length>r;r++)if(a=t[r],s=p.options.filterable.operators,l=!1,c=e("<th/>"),d=a.field,a.hidden&&c.hide(),i.append(c),d&&a.filterable!==!1){if(u=a.filterable&&a.filterable.cell||{},o=p.options.dataSource,o instanceof pt&&(o=p.options.dataSource.options),h=wt(!0,{},n.messages),a.filterable&&wt(!0,h,a.filterable.messages),u.enabled===!1){c.html("&nbsp;");continue}u.dataSource&&(o=u.dataSource,l=!0),a.filterable&&a.filterable.operators&&(s=a.filterable.operators),e("<span/>").attr(ut.attr("field"),d).kendoFilterCell({dataSource:p.dataSource,suggestDataSource:o,customDataSource:l,field:d,messages:h,values:a.values,template:u.template,delay:u.delay,inputWidth:u.inputWidth,suggestionOperator:u.suggestionOperator,minLength:u.minLength,dataTextField:u.dataTextField,operator:u.operator,operators:s,showOperators:u.showOperators}).appendTo(c)}else c.html("&nbsp;")},_sortable:function(){var e,t,n,i,r,o,a=this,s=L(a.columns),l=a.options.sortable;if(l){for(i=O(a.thead),r=0,o=i.length;o>r;r++)e=s[r],e.sortable!==!1&&!e.command&&e.field&&(n=i.eq(r),t=n.data("kendoColumnSorter"),t&&t.destroy(),n.attr("data-"+ut.ns+"field",e.field).kendoColumnSorter(wt({},l,e.sortable,{dataSource:a.dataSource,aria:!0,filter:":not(.k-column-active)"})));i=null}},_columns:function(t){var n,i,r,o=this,a=o.table,s=a.find("col"),l=o.options.dataSource;if(t=t.length?t:bt(a.find("th"),function(t,n){t=e(t);var i=t.attr(ut.attr("sortable")),r=t.attr(ut.attr("filterable")),o=t.attr(ut.attr("type")),a=t.attr(ut.attr("groupable")),l=t.attr(ut.attr("field")),c=t.attr(ut.attr("menu"));return l||(l=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:l,type:o,sortable:"false"!==i,filterable:"false"!==r,groupable:"false"!==a,menu:c,template:t.attr(ut.attr("template")),width:s.eq(n).css("width")}}),n=!(o.table.find("tbody tr").length>0&&(!l||!l.transport)),o.options.scrollable){if(r=t,i=I(t),t=z(t),i.length>0&&0===t.length)throw Error("There should be at least one non locked columns");G(o.element.find("tr:has(th):first").find("th:not(.k-group-cell)"),r),t=i.concat(t)}o.columns=c(t,n)},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(e,t,r,o){var a,s,l,c,d=this,u=wt({},ut.Template,d.options.templateSettings),h=t.length,p={storage:{},count:0},f=d._hasDetails(),g=[],m=d._groups();if(!e){for(e="<tr",r&&g.push("k-alt"),f&&g.push("k-master-row"),g.length&&(e+=' class="'+g.join(" ")+'"'),h&&(e+=" "+ut.attr("uid")+'="#='+ut.expr("uid",u.paramName)+'#"'),e+=" role='row'>",m>0&&!o&&(e+=n(m)),f&&(e+='<td class="k-hierarchy-cell"><a class="k-icon k-plus" href="\\#" tabindex="-1"></a></td>'),a=0;h>a;a++)l=t[a],s=l.template,c=typeof s,e+="<td"+i(l.attributes)+" role='gridcell'>",e+=d._cellTmpl(l,p),e+="</td>";e+="</tr>"}return e=ut.template(e,u),p.count>0?Tt(e,p.storage):e},_headerCellText:function(e){var t=this,n=wt({},ut.Template,t.options.templateSettings),i=e.headerTemplate,r=typeof i,o=e.title||e.field||"";return r===ln?o=ut.template(i,n)({}):r===cn&&(o=i),o},_cellTmpl:function(e,t){var n,i,r=this,o=wt({},ut.Template,r.options.templateSettings),a=e.template,s=o.paramName,l=e.field,c="",d=e.format,u=typeof a,h=e.values;if(e.command){if(xt(e.command)){for(n=0,i=e.command.length;i>n;n++)c+=r._createButton(e.command[n]);return c.replace(fn,"\\#")}return r._createButton(e.command).replace(fn,"\\#")}return u===ln?(t.storage["tmpl"+t.count]=a,c+="#=this.tmpl"+t.count+"("+s+")#",t.count++):u===cn?c+=a:h&&h.length&&yt(h[0])&&"value"in h[0]&&l?(c+="#var v ="+ut.stringify(q(h)).replace(fn,"\\#")+"#",c+="#var f = v[",o.useWithBlock||(c+=s+"."),c+=l+"]#",c+="${f != null ? f : ''}"):(c+=e.encoded?"#:":"#=",d&&(c+='kendo.format("'+d.replace(pn,"\\$1")+'",'),l?(l=ut.expr(l,s),c+=l+"==null?'':"+l):c+="''",d&&(c+=")"),c+="#"),c},_templates:function(){var t=this,n=t.options,i=t.dataSource,r=i.group(),o=t.footer||t.wrapper.find(".k-grid-footer"),a=i.aggregate(),s=L(t.columns),l=L(I(t.columns)),c=n.scrollable?L(z(t.columns)):s;if(n.scrollable&&l.length){if(n.rowTemplate||n.altRowTemplate)throw Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(n.rowTemplate,c,!1,!0),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,c,!0,!0),t.lockedRowTemplate=t._tmpl(n.rowTemplate,l),t.lockedAltRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,l,!0)}else t.rowTemplate=t._tmpl(n.rowTemplate,c),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,c,!0);
t._hasDetails()&&(t.detailTemplate=t._detailTmpl(n.detailTemplate||"")),(t._group&&!At(a)||!At(a)&&!o.length||kt(s,function(e){return e.footerTemplate}).length)&&(t.footerTemplate=t._footerTmpl(s,a,"footerTemplate","k-footer-template")),r&&kt(s,function(e){return e.groupFooterTemplate}).length&&(a=e.map(r,function(e){return e.aggregates}),t.groupFooterTemplate=t._footerTmpl(c,a,"groupFooterTemplate","k-group-footer",l.length),n.scrollable&&l.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(l,a,"groupFooterTemplate","k-group-footer")))},_footerTmpl:function(e,t,r,a,s){var l,c,d,u,h,p=this,f=wt({},ut.Template,p.options.templateSettings),g=f.paramName,m="",v={},_=0,y={},w=p._groups(),b=o(t);for(m+='<tr class="'+a+'">',w>0&&!s&&(m+=n(w)),p._hasDetails()&&(m+='<td class="k-hierarchy-cell">&nbsp;</td>'),l=0,c=e.length;c>l;l++)h=e[l],d=h[r],u=typeof d,m+="<td"+i(h.footerAttributes)+">",d?(u!==ln&&(y=b[h.field]?wt({},f,{paramName:g+"['"+h.field+"']"}):{},d=ut.template(d,y)),v["tmpl"+_]=d,m+="#=this.tmpl"+_+"("+g+")#",_++):m+="&nbsp;",m+="</td>";return m+="</tr>",m=ut.template(m,f),_>0?Tt(m,v):m},_detailTmpl:function(e){var t=this,i="",r=wt({},ut.Template,t.options.templateSettings),o=r.paramName,a={},s=0,l=t._groups(),c=f(L(t.columns)).length,d=typeof e;return i+='<tr class="k-detail-row">',l>0&&(i+=n(l)),i+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(c?' colspan="'+c+'"':"")+">",d===ln?(a["tmpl"+s]=e,i+="#=this.tmpl"+s+"("+o+")#",s++):i+=e,i+="</td></tr>",i=ut.template(i,r),s>0?Tt(i,a):i},_hasDetails:function(){var e=this;return null!==e.options.detailTemplate||(e._events[Ut]||[]).length},_hasFilterRow:function(){var t=this.options.filterable,n=t&&typeof t.mode==cn&&-1!=t.mode.indexOf("row"),i=this.columns,r=e.grep(i,function(e){return e.filterable===!1});return i.length&&r.length==i.length&&(n=!1),n},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&I(t.columns).length)throw Error("Having both detail template and locked columns is not supported");t.table.on(on+Ot,".k-hierarchy-cell .k-plus, .k-hierarchy-cell .k-minus",function(n){var i,r,o=e(this),a=o.hasClass("k-plus"),s=o.closest("tr.k-master-row"),l=t.detailTemplate,c=t._hasDetails();return o.toggleClass("k-plus",!a).toggleClass("k-minus",a),i=s.next(),c&&!i.hasClass("k-detail-row")&&(r=t.dataItem(s),i=e(l(r)).addClass(s.hasClass("k-alt")?"k-alt":"").insertAfter(s),t.angular("compile",function(){return{elements:i.get(),data:[{dataItem:r}]}}),t.trigger(Ut,{masterRow:s,detailRow:i,data:r,detailCell:i.find(".k-detail-cell")})),t.trigger(a?Qt:Xt,{masterRow:s,detailRow:i}),i.toggle(a),t._current&&t._current.attr("aria-expanded",a),n.preventDefault(),!1})},dataItem:function(t){if(t=e(t)[0],!t)return null;var n,i,r=this.tbody.children(),o=/k-grouping-row|k-detail-row|k-group-footer/,a=t.sectionRowIndex;for(i=a,n=0;a>n;n++)o.test(r[n].className)&&i--;return this._data[i]},expandRow:function(t){e(t).find("> td .k-plus, > td .k-i-expand").click()},collapseRow:function(t){e(t).find("> td .k-minus, > td .k-i-collapse").click()},_createHeaderCells:function(e,n){var r,o,a,s,l,c=this,d="",u=L(c.columns);for(r=0,s=e.length;s>r;r++)o=e[r].column||e[r],a=c._headerCellText(o),l=Ct(o,u),o.command?(d+="<th"+i(o.headerAttributes),n&&!e[r].colSpan&&(d+=" rowspan='"+n+"'"),l>-1&&(d+=ut.attr("index")+"='"+l+"'"),d+=">"+a+"</th>"):(d+="<th role='columnheader' "+ut.attr("field")+"='"+(o.field||"")+"' ",n&&!e[r].colSpan&&(d+=" rowspan='"+n+"'"),e[r].colSpan>1&&(d+='colspan="'+(e[r].colSpan-T(o.columns))+'" ',d+=ut.attr("colspan")+"='"+e[r].colSpan+"'"),o.title&&(d+=ut.attr("title")+'="'+o.title.replace(/'/g,"'")+'" '),o.groupable!==t&&(d+=ut.attr("groupable")+"='"+o.groupable+"' "),o.aggregates&&o.aggregates.length&&(d+=ut.attr("aggregates")+"='"+o.aggregates+"'"),l>-1&&(d+=ut.attr("index")+"='"+l+"'"),d+=i(o.headerAttributes),d+=">"+a+"</th>");return d},_appendLockedColumnContent:function(){var t,n,i,r,o,a=this.columns,s=this.table.find("colgroup"),l=s.find("col:not(.k-group-col,.k-hierarchy-col)"),c=e(),d=0,u=0;for(t=0,n=a.length;n>t;t++)if(a[t].locked)if(p(a[t])){for(r=1,a[t].columns&&(r=L(a[t].columns).length-T(a[t].columns)),r=r||1,o=0;r>o;o++)c=c.add(l.eq(t+u+o-d));u+=r-1}else d++;i=e('<div class="k-grid-content-locked"><table'+(bn?' cellspacing="0"':"")+"><colgroup/><tbody></tbody></table></div>"),s.detach(),i.find("colgroup").append(c),s.insertBefore(this.table.find("tbody")),this.lockedContent=i.insertBefore(this.content),this.lockedTable=i.children("table")},_appendLockedColumnFooter:function(){var t,n,i=this,r=i.footer,o=r.find(".k-footer-template>td"),a=r.find(".k-grid-footer-wrap>table>colgroup>col"),s=e('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>'),l=i._groups(),c=e(),d=e();for(c=c.add(o.filter(".k-group-cell")),t=0,n=L(I(i.columns)).length;n>t;t++)c=c.add(o.eq(t+l));for(d=d.add(a.filter(".k-group-col")),t=0,n=L(R(i.columns)).length;n>t;t++)d=d.add(a.eq(t+l));c.appendTo(s.find("tr")),d.appendTo(s.find("colgroup")),i.lockedFooter=s.prependTo(r)},_appendLockedColumnHeader:function(t){var n,i,r,o,a,s,l,c,d,u,h,f=this,m=this.columns,v=[],_=0,y=e(),w=f._hasFilterRow(),b=0,k=e(),x=0,C=e(),S=f.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)"),D=f.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)"),E=f.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)"),I=0;for(n=0,r=m.length;r>n;n++){if(m[n].locked){if(l=D.eq(n),x=L(m[n].columns||[]).length,p(m[n])){for(m[n].columns&&(c=x-T(m[n].columns)),c=c||1,d=0;c>d;d++)y=y.add(S.eq(n+I+d-_));I+=c-1}for(P([m[n]],N(l),v,0,0),x=x||1,u=0;x>u;u++)k=k.add(E.eq(b+u));b+=x}m[n].columns&&(_+=T(m[n].columns)),p(m[n])||_++}if(v.length){for(i='<div class="k-grid-header-locked" style="width:1px"><table'+(bn?' cellspacing="0"':"")+"><colgroup/><thead>",i+=Array(v.length+1).join("<tr></tr>"),i+=(w?'<tr class="k-filter-row" />':"")+"</thead></table></div>",s=e(i),S=s.find("colgroup"),S.append(f.thead.prev().find("col.k-group-col").add(y)),o=s.find("thead tr:not(.k-filter-row)"),n=0,r=v.length;r>n;n++)C=g(v[n]),o.eq(n).append(f.thead.find("tr:eq("+n+") .k-group-cell").add(C));h=M(this.thead),h>v.length&&A(s,h),a=s.find(".k-filter-row"),a.append(f.thead.find(".k-filter-row .k-group-cell").add(k)),this.lockedHeader=s.prependTo(t),this._syncLockedHeaderHeight()}},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);ut.destroy(e),e.off(Ot).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,n,i,r,o=this,a=o.columns,s=o._hasDetails()&&a.length,l=o._hasFilterRow(),c="",d=o.table.find(">thead"),u=o.element.find("thead:first").length>0;if(d.length||(d=e("<thead/>").insertBefore(o.tbody)),o.lockedHeader&&o.thead?(n=o.thead.find("tr:has(th):not(.k-filter-row)").html(""),o._removeLockedContainers()):n=o.element.find(u?"thead:first tr:has(th):not(.k-filter-row)":"tr:has(th):first"),!n.length&&(n=d.children().first(),!n.length)){for(i=[{rowSpan:1,cells:[],index:0}],o._prepareColumns(i,a),t=0;i.length>t;t++)c+="<tr>",s&&(c+='<th class="k-hierarchy-cell">&nbsp;</th>'),c+=o._createHeaderCells(i[t].cells,i[t].rowSpan),c+="</tr>";n=e(c)}l&&(r=e("<tr/>"),r.addClass("k-filter-row"),s&&r.prepend('<th class="k-hierarchy-cell">&nbsp;</th>'),d.append(r)),n.children().length?s&&!n.find(".k-hierarchy-cell")[0]&&n.prepend('<th class="k-hierarchy-cell">&nbsp;</th>'):(c="",s&&(c+='<th class="k-hierarchy-cell">&nbsp;</th>'),c+=o._createHeaderCells(a),n.html(c)),n.attr("role","row").find("th").addClass("k-header"),o.options.scrollable||d.addClass("k-grid-header"),n.find("script").remove().end().prependTo(d),o.thead&&o._destroyColumnAttachments(),this.angular("cleanup",function(){return{elements:d.find("th").get()}}),this.angular("compile",function(){return{elements:d.find("th").get(),data:bt(a,function(e){return{column:e}})}}),o.thead=d.attr("role","rowgroup"),o._sortable(),o._filterable(),o._filterRow(),o._scrollable(),o._updateCols(),o._columnMenu(),this.options.scrollable&&I(this.columns).length&&(o._appendLockedColumnHeader(o.thead.closest(".k-grid-header")),o._appendLockedColumnContent(),o.lockedContent.bind("DOMMouseScroll"+Ot+" mousewheel"+Ot,Tt(o._wheelScroll,o)),o._applyLockedContainersWidth()),o._updateFirstColumnClass(),o._resizable(),o._draggable(),o._reorderable(),o.groupable&&o._attachGroupable()},_updateFirstColumnClass:function(){var t,n,i=this,r=i.columns||[],o=i._hasDetails()&&r.length;o||i._groups()||(t=e(),n=i.thead.find(">tr:not(.k-filter-row):not(:first)"),r=z(r),n.length&&r[0]&&!r[0].columns&&(t=t.add(n)),i._isLocked()&&(n=i.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),r=I(i.columns),n.length&&r[0]&&!r[0].columns&&(t=t.add(n))),t.each(function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")}))},_prepareColumns:function(e,t,n,i){var r,o,a=i||e[e.length-1],s=e[a.index+1],l=0;for(r=0;t.length>r;r++)o={column:t[r],colSpan:0},a.cells.push(o),t[r].columns&&t[r].columns.length&&(s||(s={rowSpan:0,cells:[],index:e.length},e.push(s)),o.colSpan=t[r].columns.length,this._prepareColumns(e,t[r].columns,o,s),l+=o.colSpan-1,a.rowSpan=e.length-a.index);n&&(n.colSpan+=l)},_wheelScroll:function(t){var n,i,r;t.ctrlKey||(n=this.content,this.options.scrollable.virtual&&(n=this.virtualScrollable.verticalScrollbar),i=n.scrollTop(),r=ut.wheelDeltaY(t),r&&(t.preventDefault(),e(t.currentTarget).one("wheel"+Ot,!1),n.scrollTop(i+-r)))},_isLocked:function(){return null!=this.lockedHeader},_updateCols:function(e){e=e||this.thead.parent().add(this.table),this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&(e=e||this.lockedHeader.find("table").add(this.lockedTable),j(e,B(R(this.columns)),this._hasDetails(),this._groups()))},_appendCols:function(e,t){t?j(e,B(F(this.columns)),this._hasDetails(),0):j(e,B(f(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,n=this;e=e.toJSON();for(t in e)n.columns.push({field:t});n._thead(),n._templates()}},_rowsHtml:function(e,t){var n,i,r=this,o="",a=t.rowTemplate,s=t.altRowTemplate;for(n=0,i=e.length;i>n;n++)o+=n%2?s(e[n]):a(e[n]),r._data.push(e[n]);return o},_groupRowHtml:function(e,t,n,i,r,o){var a,s,l=this,c="",d=e.field,u=kt(l.columns,function(e){return e.field==d})[0]||{},h=u.groupHeaderTemplate,p=(u.title||d)+": "+$(e.value,u.format,u.values),f=l._groupAggregatesDefaultObject||{},g=wt(f,e.aggregates),m=wt({},{field:e.field,value:e.value,aggregates:g},e.aggregates[e.field]),v=r.groupFooterTemplate,_=e.items;if(h&&(p=typeof h===ln?h(m):ut.template(h)(m)),c+=i(t,n,p),e.hasSubgroups)for(a=0,s=_.length;s>a;a++)c+=l._groupRowHtml(_[a],o?t:t-1,n+1,i,r,o);else c+=l._rowsHtml(_,r);return v&&(c+=v(g)),c},collapseGroup:function(t){t=e(t);var n,i,r,o,a,s=this.options.groupable,l=s.showFooter,c=l?0:1,d=e();for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?d=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(d=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),n=t.find(".k-group-cell").length,t.find(".k-icon").addClass("k-i-expand").removeClass("k-i-collapse"),t.find("td:first").attr("aria-expanded",!1),t=t.nextAll("tr"),r=0,o=t.length;o>r&&(a=t.eq(r),i=a.find(".k-group-cell").length,a.hasClass("k-grouping-row")?c++:a.hasClass("k-group-footer")&&c--,!(n>=i||a.hasClass("k-group-footer")&&0>c));r++)a.hide(),d.eq(r).hide()},expandGroup:function(t){t=e(t);var n,i,r,o,a,s=this,l=e(),c=1;for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?l=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(l=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),n=t.find(".k-group-cell").length,t.find(".k-icon").addClass("k-i-collapse").removeClass("k-i-expand"),t.find("td:first").attr("aria-expanded",!0),t=t.nextAll("tr"),o=0,a=t.length;a>o&&(i=t.eq(o),r=i.find(".k-group-cell").length,!(n>=r));o++)r!=n+1||i.hasClass("k-detail-row")||(i.show(),l.eq(o).show(),i.hasClass("k-grouping-row")&&i.find(".k-icon").hasClass("k-i-collapse")&&s.expandGroup(i),i.hasClass("k-master-row")&&i.find(".k-icon").hasClass("k-minus")&&(i.next().show(),l.eq(o+1).show())),i.hasClass("k-grouping-row")&&c++,i.hasClass("k-group-footer")&&(1==c?(i.show(),l.eq(o).show()):c--)},_updateHeader:function(t){var n=this,i=n._isLocked()?n.lockedHeader.find("thead"):n.thead,r=i.find("tr.k-filter-row").find("th.k-group-cell").length,o=i.find("tr:first").find("th.k-group-cell").length,a=i.children("tr:not(:first)").filter(function(){return!e(this).children(":visible").length});t>o?(e(Array(t-o+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(i.children("tr:not(.k-filter-row)")),n.element.is(":visible")&&a.find("th.k-group-cell").hide()):o>t&&i.find("tr").each(function(){e(this).find("th.k-group-cell").filter(":eq("+t+"),:gt("+t+")").remove()}),t>r&&e(Array(t-r+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(i.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,n=this;n._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",n.wrapper).add(n.thead.parent()).add(n.table),n._footerWidth=J(t.eq(0)),t.width(n._footerWidth),t=e(">.k-grid-footer>.k-grid-footer-locked>table",n.wrapper).add(n.lockedHeader.find(">table")).add(n.lockedTable),t.width(J(t.eq(0))))},hideColumn:function(n){var i,r,o,a,l,c,d,u,g,m,v=this,_=0,y=v.footer||v.wrapper.find(".k-grid-footer"),w=v.columns,b=v.lockedHeader?O(v.lockedHeader.find(">table>thead")).filter(":visible").length:0;if(n="number"==typeof n?w[n]:yt(n)?kt(S(w),function(e){return e===n})[0]:kt(S(w),function(e){return e.field===n})[0],n&&p(n)){if(n.columns&&n.columns.length){for(c=x(n,w),h(n,!1),Y(s(e(">table>thead",v.lockedHeader),v.thead,">tr:eq("+c.row+")>th"),c.cell,!1),o=0;n.columns.length>o;o++)this.hideColumn(n.columns[o]);return v.trigger(qt,{column:n}),t}if(g=Ct(n,f(L(w))),h(n,!1),v._setParentsVisibility(n,!1),v._templates(),v._updateCols(),v._updateLockedCols(),m=v.thead,d=g,v.lockedHeader&&b>g?m=v.lockedHeader.find(">table>thead"):d-=b,i=O(m).filter(":visible").eq(d),i[0].style.display="none",Y(s(e(">table>thead",v.lockedHeader),v.thead,">tr.k-filter-row>th"),g,!1),y[0]&&(v._updateCols(y.find(">.k-grid-footer-wrap>table")),v._updateLockedCols(y.find(">.k-grid-footer-locked>table")),Y(y.find(".k-footer-template>td"),g,!1)),v.lockedTable&&b>g?K(v.lockedTable.find(">tbody>tr"),g):K(v.tbody.children(),g-b),v.lockedTable)v._updateTablesWidth(),v._applyLockedContainersWidth(),v._syncLockedContentHeight(),v._syncLockedHeaderHeight(),v._syncLockedFooterHeight();else{for(a=v.thead.prev().find("col"),o=0,u=a.length;u>o;o+=1){if(l=a[o].style.width,!l||-1!=l.indexOf("%")){_=0;break}_+=parseInt(l,10)}r=e(">.k-grid-header table:first,>.k-grid-footer table:first",v.wrapper).add(v.table),v._footerWidth=null,_&&(r.width(_),v._footerWidth=_),wn.msie&&8==wn.version&&(r.css("display","inline-table"),setTimeout(function(){r.css("display","table")},1))}v._updateFirstColumnClass(),v.trigger(qt,{column:n})}},_setParentsVisibility:function(t,n){var i,r,o,a,l,c=this.columns,d=[],p=n?function(e){return f(e.columns).length&&e.hidden}:function(e){return!f(e.columns).length&&!e.hidden};if(u(t,c,d)&&d.length)for(i=d.length-1;i>=0;i--)r=d[i],o=b(r,c),a=s(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+o.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(o.cell),p(r)&&(h(r,n),a[0].style.display=n?"":"none"),a.filter("["+ut.attr("colspan")+"]").length&&(l=parseInt(a.attr(ut.attr("colspan")),10),a[0].colSpan=l-T(r.columns)||1)},showColumn:function(n){var i,r,o,a,l,c,d,u,f,g,m,v=this,_=v.columns,y=v.footer||v.wrapper.find(".k-grid-footer"),w=v.lockedHeader?O(v.lockedHeader.find(">table>thead")).length:0;if(n="number"==typeof n?_[n]:yt(n)?kt(S(_),function(e){return e===n})[0]:kt(S(_),function(e){return e.field===n})[0],n&&!p(n)){if(n.columns&&n.columns.length){for(d=x(n,_),h(n,!0),Y(s(e(">table>thead",v.lockedHeader),v.thead,">tr:eq("+d.row+")>th"),d.cell,!0),i=0;n.columns.length>i;i++)this.showColumn(n.columns[i]);return v.trigger($t,{column:n}),t}if(g=Ct(n,L(_)),h(n,!0),v._setParentsVisibility(n,!0),v._templates(),v._updateCols(),v._updateLockedCols(),m=v.thead,c=g,v.lockedHeader&&w>g?m=v.lockedHeader.find(">table>thead"):c-=w,o=O(m).eq(c),o[0].style.display="",Y(s(e(">table>thead",v.lockedHeader),v.thead,">tr.k-filter-row>th"),g,!0),y[0]&&(v._updateCols(y.find(">.k-grid-footer-wrap>table")),v._updateLockedCols(y.find(">.k-grid-footer-locked>table")),Y(y.find(".k-footer-template>td"),g,!0)),v.lockedTable&&w>g?Q(v.lockedTable.find(">tbody>tr"),g):Q(v.tbody.children(),g-w),v.lockedTable)v._updateTablesWidth(),v._applyLockedContainersWidth(),v._syncLockedContentHeight(),v._syncLockedHeaderHeight();else if(a=e(">.k-grid-header table:first,>.k-grid-footer table:first",v.wrapper).add(v.table),n.width){for(l=0,f=v.thead.prev().find("col"),i=0,r=f.length;r>i;i+=1){if(u=f[i].style.width,u.indexOf("%")>-1){l=0;break}l+=parseInt(u,10)}v._footerWidth=null,l&&(a.width(l),v._footerWidth=l)}else a.width("");v._updateFirstColumnClass(),v.trigger($t,{column:n})}},_progress:function(e){var t=this.element;this.lockedContent?t=this.wrapper:this.element.is("table")?t=this.element.parent():this.content&&this.content.length&&(t=this.content),ut.ui.progress(t,e)},_resize:function(){this.content&&(this._setContentHeight(),this._setContentWidth())},_isActiveInTable:function(){var t=mt();return this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t))},refresh:function(t){var n,i=this,r=i.dataSource.view(),o=i.options.navigatable,a=e(i.current()),s=!1,l=(i.dataSource.group()||[]).length,c=l+B(f(i.columns)).length;t&&"itemchange"===t.action&&i.editable||(t=t||{},i.trigger("dataBinding",{action:t.action||"rebind",index:t.index,items:t.items})||(i._angularItems("cleanup"),o&&(i._isActiveInTable()||i._editContainer&&i._editContainer.data("kendoWindow"))&&(s=a.is("th"),n=0,s&&(n=i.thead.find("th:not(.k-group-cell)").index(a))),i._destroyEditable(),i._progress(!1),i._hideResizeHandle(),i._data=[],i.columns.length||(i._autoColumns(i._firstDataItem(r[0],l)),c=l+i.columns.length),i._group=l>0||i._group,i._group&&(i._templates(),i._updateCols(),i._updateLockedCols(),i._updateHeader(l),i._group=l>0),i._renderContent(r,c,l),i._renderLockedContent(r,c,l),i._footer(),i._setContentHeight(),i._setContentWidth(),i.lockedTable&&(i.options.scrollable.virtual?i.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):i.content.trigger("scroll")),n>=0&&(i._removeCurrent(),i.current(s?i.thead.find("th:not(.k-group-cell)").eq(n):i.table.add(i.lockedTable).find(Bt).first()),i._current&&nt(i._current.closest("table")[0],!0)),i.touchScroller&&i.touchScroller.contentResized(),i.selectable&&i.selectable.resetTouchEvents(),i._angularItems("compile"),i.trigger(Kt)))},_renderContent:function(e,t,n){var i,r,a=this,s="",l=null!=a.lockedContent,c={rowTemplate:a.rowTemplate,altRowTemplate:a.altRowTemplate,groupFooterTemplate:a.groupFooterTemplate};if(t=l?t-B(R(a.columns)).length:t,n>0)for(t=l?t-n:t,a.detailTemplate&&t++,a.groupFooterTemplate&&(a._groupAggregatesDefaultObject=o(a.dataSource.aggregate())),i=0,r=e.length;r>i;i++)s+=a._groupRowHtml(e[i],t,0,l?dt:ct,c,l);else s+=a._rowsHtml(e,c);a.tbody=V(a.tbody,a.table,s)},_renderLockedContent:function(e,t,n){var i,r,o,a="",s={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate};if(this.lockedContent){if(o=this.lockedTable,n>0)for(t-=f(L(z(this.columns))).length,i=0,r=e.length;r>i;i++)a+=this._groupRowHtml(e[i],t,0,ct,s);else a=this._rowsHtml(e,s);V(o.children("tbody"),o,a),this._syncLockedContentHeight()}},_adjustRowsHeight:function(e,t){var n,i,r,o,a=e[0].rows,s=a.length,l=t[0].rows,c=e.add(t),d=c.length,u=[];for(n=0;s>n&&l[n];n++)a[n].style.height&&(a[n].style.height=l[n].style.height=""),i=a[n].offsetHeight,r=l[n].offsetHeight,o=0,i>r?o=i:r>i&&(o=r),u.push(o);for(n=0;d>n;n++)c[n].style.display="none";for(n=0;s>n;n++)u[n]&&(a[n].style.height=l[n].style.height=u[n]+"px");for(n=0;d>n;n++)c[n].style.display=""}});ut.ExcelMixin&&ut.ExcelMixin.extend(Sn.prototype),ut.PDFMixin&&ut.PDFMixin.extend(Sn.prototype),ht.plugin(Sn),ht.plugin(xn)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i="change",r="cancel",o="dataBound",a="dataBinding",s=n.ui.Widget,l=n.keys,c=">*",d="progress",u="error",h="k-state-focused",p="k-state-selected",f="k-edit-item",g="edit",m="remove",v="save",_="click",y=".kendoListView",w=e.proxy,b=n._activeElement,k=n.ui.progress,x=n.data.DataSource,C=n.ui.DataBoundWidget.extend({init:function(t,i){var r=this;i=e.isArray(i)?{dataSource:i}:i,s.fn.init.call(r,t,i),i=r.options,r.wrapper=t=r.element,t[0].id&&(r._itemId=t[0].id+"_lv_active"),r._element(),r._dataSource(),r._templates(),r._navigatable(),r._selectable(),r._pageable(),r._crudHandlers(),r.options.autoBind&&r.dataSource.fetch(),n.notify(r)},events:[i,r,a,o,g,m,v],options:{name:"ListView",autoBind:!0,selectable:!1,navigatable:!1,template:"",altTemplate:"",editTemplate:""},setOptions:function(e){s.fn.setOptions.call(this,e),this._templates()},_templates:function(){var e=this.options;this.template=n.template(e.template||""),this.altTemplate=n.template(e.altTemplate||e.template),this.editTemplate=n.template(e.editTemplate||"")},_item:function(e){return this.element.children()[e]()},items:function(){return this.element.children()},dataItem:function(t){var i=n.attr("uid"),r=e(t).closest("["+i+"]").attr(i);return this.dataSource.getByUid(r)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch()},_unbindDataSource:function(){var e=this;e.dataSource.unbind(i,e._refreshHandler).unbind(d,e._progressHandler).unbind(u,e._errorHandler)},_dataSource:function(){var e=this;e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._refreshHandler=w(e.refresh,e),e._progressHandler=w(e._progress,e),e._errorHandler=w(e._error,e)),e.dataSource=x.create(e.options.dataSource).bind(i,e._refreshHandler).bind(d,e._progressHandler).bind(u,e._errorHandler)},_progress:function(){k(this.element,!0)},_error:function(){k(this.element,!1)},_element:function(){this.element.addClass("k-widget k-listview").attr("role","listbox")},refresh:function(e){var i,r,s,l,c,d=this,u=d.dataSource.view(),h="",p=d.template,f=d.altTemplate,g=b();if(e=e||{},"itemchange"===e.action)return d._hasBindingTarget()||d.editable||(i=e.items[0],s=d.items().filter("["+n.attr("uid")+"="+i.uid+"]"),s.length>0&&(l=s.index(),d.angular("cleanup",function(){return{elements:[s]}}),s.replaceWith(p(i)),s=d.items().eq(l),s.attr(n.attr("uid"),i.uid),d.angular("compile",function(){return{elements:[s],data:[{dataItem:i}]}}),d.trigger("itemChange",{item:s,data:i}))),t;if(!d.trigger(a,{action:e.action||"rebind",items:e.items,index:e.index})){for(d._angularItems("cleanup"),d._destroyEditable(),l=0,c=u.length;c>l;l++)h+=l%2?f(u[l]):p(u[l]);for(d.element.html(h),r=d.items(),l=0,c=u.length;c>l;l++)r.eq(l).attr(n.attr("uid"),u[l].uid).attr("role","option").attr("aria-selected","false");d.element[0]===g&&d.options.navigatable&&d.current(r.eq(0)),d._angularItems("compile"),d.trigger(o)}},_pageable:function(){var t,i,r=this,o=r.options.pageable;e.isPlainObject(o)&&(i=o.pagerId,t=e.extend({},o,{dataSource:r.dataSource,pagerId:null}),r.pager=new n.ui.Pager(e("#"+i),t))},_selectable:function(){var e,r,o=this,a=o.options.selectable,s=o.options.navigatable;a&&(e=n.ui.Selectable.parseOptions(a).multiple,o.selectable=new n.ui.Selectable(o.element,{aria:!0,multiple:e,filter:c,change:function(){o.trigger(i)}}),s&&o.element.on("keydown"+y,function(n){if(n.keyCode===l.SPACEBAR){if(r=o.current(),n.target==n.currentTarget&&n.preventDefault(),e)if(n.ctrlKey){if(r&&r.hasClass(p))return r.removeClass(p),t}else o.selectable.clear();else o.selectable.clear();o.selectable.value(r)}}))},current:function(e){var n=this,i=n.element,r=n._current,o=n._itemId;return e===t?r:(r&&r[0]&&(r[0].id===o&&r.removeAttr("id"),r.removeClass(h),i.removeAttr("aria-activedescendant")),e&&e[0]&&(o=e[0].id||o,n._scrollTo(e[0]),i.attr("aria-activedescendant",o),e.addClass(h).attr("id",o)),n._current=e,t)},_scrollTo:function(t){var n,i,r=this,o=!1,a="scroll";"auto"==r.wrapper.css("overflow")||r.wrapper.css("overflow")==a?n=r.wrapper[0]:(n=window,o=!0),i=function(i,r){var s=o?e(t).offset()[i.toLowerCase()]:t["offset"+i],l=t["client"+r],c=e(n)[a+i](),d=e(n)[r.toLowerCase()]();s+l>c+d?e(n)[a+i](s+l-d):c>s&&e(n)[a+i](s)},i("Top","Height"),i("Left","Width")},_navigatable:function(){var t=this,i=t.options.navigatable,r=t.element,o=function(n){t.current(e(n.currentTarget)),e(n.target).is(":button,a,:input,a>.k-icon,textarea")||r.focus()};i&&(t._tabindex(),r.on("focus"+y,function(){var e=t._current;e&&e.is(":visible")||(e=t._item("first")),t.current(e)}).on("focusout"+y,function(){t._current&&t._current.removeClass(h)}).on("keydown"+y,function(i){var o,a,s=i.keyCode,c=t.current(),d=e(i.target),u=!d.is(":button,textarea,a,a>.t-icon,input"),h=d.is(":text"),p=n.preventDefault,g=r.find("."+f),m=b();if(!(!u&&!h&&l.ESC!=s||h&&l.ESC!=s&&l.ENTER!=s))if(l.UP===s||l.LEFT===s)c&&(c=c.prev()),t.current(c&&c[0]?c:t._item("last")),p(i);else if(l.DOWN===s||l.RIGHT===s)c&&(c=c.next()),t.current(c&&c[0]?c:t._item("first")),p(i);else if(l.PAGEUP===s)t.current(null),t.dataSource.page(t.dataSource.page()-1),p(i);else if(l.PAGEDOWN===s)t.current(null),t.dataSource.page(t.dataSource.page()+1),p(i);else if(l.HOME===s)t.current(t._item("first")),p(i);else if(l.END===s)t.current(t._item("last")),p(i);else if(l.ENTER===s)0!==g.length&&(u||h)?(o=t.items().index(g),m&&m.blur(),t.save(),a=function(){t.element.trigger("focus"),t.current(t.items().eq(o))},t.one("dataBound",a)):""!==t.options.editTemplate&&t.edit(c);else if(l.ESC===s){if(g=r.find("."+f),0===g.length)return;o=t.items().index(g),t.cancel(),t.element.trigger("focus"),t.current(t.items().eq(o))}}),r.on("mousedown"+y+" touchstart"+y,c,w(o,t)))},clearSelection:function(){var e=this;e.selectable.clear(),e.trigger(i)},select:function(n){var i=this,r=i.selectable;return n=e(n),n.length?(r.options.multiple||(r.clear(),n=n.first()),r.value(n),t):r.value()},_destroyEditable:function(){var e=this;e.editable&&(e.editable.destroy(),delete e.editable)},_modelFromElement:function(e){var t=e.attr(n.attr("uid"));return this.dataSource.getByUid(t)},_closeEditable:function(e){var t,i,r,o=this,a=o.editable,s=o.template,l=!0;return a&&(e&&(l=a.end()),l&&(a.element.index()%2&&(s=o.altTemplate),t=o._modelFromElement(a.element),o._destroyEditable(),r=a.element.index(),a.element.replaceWith(s(t)),i=o.items().eq(r),i.attr(n.attr("uid"),t.uid),o._hasBindingTarget()&&n.bind(i,t))),l},edit:function(e){var t,i,r=this,o=r._modelFromElement(e),a=o.uid;r.cancel(),e=r.items().filter("["+n.attr("uid")+"="+a+"]"),i=e.index(),e.replaceWith(r.editTemplate(o)),t=r.items().eq(i).addClass(f).attr(n.attr("uid"),o.uid),r.editable=t.kendoEditable({model:o,clearContainer:!1,errorTemplate:!1,target:r}).data("kendoEditable"),r.trigger(g,{model:o,item:t})},save:function(){var e,t=this,n=t.editable;n&&(n=n.element,e=t._modelFromElement(n),!t.trigger(v,{model:e,item:n})&&t._closeEditable(!0)&&t.dataSource.sync())},remove:function(e){var t=this,n=t.dataSource,i=t._modelFromElement(e);t.trigger(m,{model:i,item:e})||(e.hide(),n.remove(i),n.sync())},add:function(){var e=this,t=e.dataSource,n=t.indexOf((t.view()||[])[0]);0>n&&(n=0),e.cancel(),t.insert(n,{}),e.edit(e.element.children().first())},cancel:function(){var e,t,n=this,i=n.dataSource;n.editable&&(e=n.editable.element,t=n._modelFromElement(e),n.trigger(r,{model:t,container:e})||(i.cancelChanges(t),n._closeEditable(!1)))},_crudHandlers:function(){var t=this,i=_+y;t.element.on(i,".k-edit-button",function(i){var r=e(this).closest("["+n.attr("uid")+"]");t.edit(r),i.preventDefault()}),t.element.on(i,".k-delete-button",function(i){var r=e(this).closest("["+n.attr("uid")+"]");t.remove(r),i.preventDefault()}),t.element.on(i,".k-update-button",function(e){t.save(),e.preventDefault()}),t.element.on(i,".k-cancel-button",function(e){t.cancel(),e.preventDefault()})},destroy:function(){var e=this;s.fn.destroy.call(e),e._unbindDataSource(),e._destroyEditable(),e.element.off(y),e.pager&&e.pager.destroy(),n.destroy(e.element)}});n.ui.plugin(C)}(window.kendo.jQuery),function(e,t){function n(t){return e.map(i(t),function(e){return e.name}).join(", ")}function i(e){var t=e[0];return t.files?r(t.files):[{name:s(t.value),extension:a(t.value),size:null}]}function r(t){return e.map(t,function(e){return o(e)})}function o(e){var t=e.name||e.fileName;return{name:y.htmlEncode(t),extension:a(t),size:e.size||e.fileSize,rawFile:e}}function a(e){var t=e.match(k);return t?t[0]:""}function s(e){var t=e.lastIndexOf("\\");return-1!=t?e.substr(t+1):e}function l(t,n){var i=y.guid();return e.map(t,function(e){return e.uid=n?y.guid():i,e})}function c(t,n,i){var r,o;n._supportsRemove()&&(r=t.data("fileNames"),o=e.map(r,function(e){return e.name}),n._submitRemove(o,i,function(e,i,o){n._removeFileEntry(t),n.trigger(T,{operation:"remove",files:r,response:e,XMLHttpRequest:o})},function(e){n.trigger(D,{operation:"remove",files:r,XMLHttpRequest:e}),b("Server response: "+e.responseText)}))}function d(t,n,i){var r=!1,o="";try{o=e.parseJSON(u(t)),r=!0}catch(a){i()}r&&n(o)}function u(e){return(t===e||""===e)&&(e="{}"),e}function h(e){e.stopPropagation(),e.preventDefault()}function p(e,t,n,i){var r,o;e.on("dragenter"+t,function(){n(),o=new Date,r||(r=setInterval(function(){var e=new Date-o;e>100&&(i(),clearInterval(r),r=null)},100))}).on("dragover"+t,function(){o=new Date})}function f(e){return e.is(".k-file-progress, .k-file-success, .k-file-error")}function g(t){return e(t.target).closest(".k-file")}function m(){var n={},i=e("meta[name=csrf-token]").attr("content"),r=e("meta[name=csrf-param]").attr("content");return e("input[name^='__RequestVerificationToken']").each(function(){n[this.name]=this.value}),r!==t&&i!==t&&(n[r]=i),n}var v,_,y=window.kendo,w=y.ui.Widget,b=y.logToConsole,k=/\.([^\.]+)$/,x=".kendoUpload",C="select",S="upload",T="success",D="error",A="complete",E="cancel",M="progress",P="remove",I=w.extend({init:function(t,n){var i,r,o,a=this;w.fn.init.call(a,t,n),a.name=t.name,a.multiple=a.options.multiple,a.localization=a.options.localization,i=a.element,a.wrapper=i.closest(".k-upload"),0===a.wrapper.length&&(a.wrapper=a._wrapInput(i)),a._activeInput(i),a.toggle(a.options.enabled),r=a._ns=x+"-"+y.guid(),i.closest("form").on("submit"+r,e.proxy(a._onParentFormSubmit,a)).on("reset"+r,e.proxy(a._onParentFormReset,a)),a.options.async.saveUrl?(a._module=a._supportsFormData()?new _(a):new v(a),a._async=!0,o=a.options.files,o.length>0&&a._renderInitialFiles(o)):a._module=new z(a),a._supportsDrop()&&a._setupDropZone(),a.wrapper.on("click",".k-upload-action",e.proxy(a._onFileAction,a)).on("click",".k-upload-selected",e.proxy(a._onUploadSelected,a)),a.element.val()&&a._onInputChange({target:a.element})},events:[C,S,T,D,A,E,M,P],options:{name:"Upload",enabled:!0,multiple:!0,showFileList:!0,template:"",files:[],async:{removeVerb:"POST",autoUpload:!0,withCredentials:!0},localization:{select:"Select files...",cancel:"Cancel",retry:"Retry",remove:"Remove",uploadSelectedFiles:"Upload files",dropFilesHere:"drop files here to upload",statusUploading:"uploading",statusUploaded:"uploaded",statusWarning:"warning",statusFailed:"failed",headerStatusUploading:"Uploading...",headerStatusUploaded:"Done"}},setOptions:function(e){var t=this,n=t.element;w.fn.setOptions.call(t,e),t.multiple=t.options.multiple,n.attr("multiple",t._supportsMultiple()?t.multiple:!1),t.toggle(t.options.enabled)},enable:function(e){e=t===e?!0:e,this.toggle(e)
},disable:function(){this.toggle(!1)},toggle:function(e){e=t===e?e:!e,this.wrapper.toggleClass("k-state-disabled",e),this.element.prop("disabled",e)},destroy:function(){var t=this;e(document).add(e(".k-dropzone",t.wrapper)).add(t.wrapper.closest("form")).off(t._ns),e(t.element).off(x),w.fn.destroy.call(t)},_addInput:function(t){if(t[0].nodeType){var n=this,i=t.clone().val("");i.insertAfter(n.element).data("kendoUpload",n),e(n.element).hide().attr("tabindex","-1").removeAttr("id").off(x),n._activeInput(i),n.element.focus()}},_activeInput:function(t){var n=this,i=n.wrapper;n.element=t,t.attr("multiple",n._supportsMultiple()?n.multiple:!1).attr("autocomplete","off").on("click"+x,function(e){i.hasClass("k-state-disabled")&&e.preventDefault()}).on("focus"+x,function(){e(this).parent().addClass("k-state-focused")}).on("blur"+x,function(){e(this).parent().removeClass("k-state-focused")}).on("change"+x,e.proxy(n._onInputChange,n)).on("keydown"+x,e.proxy(n._onInputKeyDown,n))},_onInputKeyDown:function(e){var t=this,n=t.wrapper.find(".k-upload-action:first");e.keyCode===y.keys.TAB&&n.length>0&&(e.preventDefault(),n.focus())},_onInputChange:function(t){var n=this,i=e(t.target),r=l(n._inputFiles(i),n._isAsyncNonBatch()),o=n.trigger(C,{files:r});o?(n._addInput(i),i.remove()):n._module.onSelect({target:i},r)},_onDrop:function(t){var n,i=t.originalEvent.dataTransfer,o=this,a=i.files,s=l(r(a),o._isAsyncNonBatch());h(t),a.length>0&&(n=o.trigger(C,{files:s}),n||o._module.onSelect({target:e(".k-dropzone",o.wrapper)},s))},_isAsyncNonBatch:function(){return this._async&&!this.options.async.batch||!1},_renderInitialFiles:function(t){var n,i,r=this,o=0;for(t=l(t,!0),o=0;t.length>o;o++)n=t[o],i=r._enqueueFile(n.name,{fileNames:[n]}),i.addClass("k-file-success").data("files",[t[o]]),e(".k-progress",i).width("100%"),e(".k-upload-status",i).prepend("<span class='k-upload-pct'>100%</span>"),r._fileAction(i,P)},_prepareTemplateData:function(e,t){var n=t.fileNames,i={},r=0,o=0;for(o=0;n.length>o;o++)r+=n[o].size;return i.name=e,i.size=r,i.files=t.fileNames,i},_prepareDefaultFileEntryTemplate:function(t,n){var i="",r=e("<li class='k-file'><span class='k-progress'></span><span class='k-icon'></span><span class='k-filename' title='"+t+"'>"+t+"</span><strong class='k-upload-status'></strong></li>");return 1==n.fileNames.length&&n.fileNames[0].extension&&(i=n.fileNames[0].extension.substring(1),e(".k-icon",r).addClass("k-i-"+i)),r},_enqueueFile:function(t,n){var i,r,o,a=this,s=n.fileNames[0].uid,l=e(".k-upload-files",a.wrapper),c=a.options,d=c.template;return 0===l.length&&(l=e("<ul class='k-upload-files k-reset'></ul>").appendTo(a.wrapper),a.options.showFileList||l.hide(),a.wrapper.removeClass("k-upload-empty")),i=e(".k-file",l),d?(o=a._prepareTemplateData(t,n),d=y.template(d),r=e("<li class='k-file'>"+d(o)+"</li>"),r.find(".k-upload-action").addClass("k-button k-button-bare")):r=a._prepareDefaultFileEntryTemplate(t,n),r.attr(y.attr("uid"),s).appendTo(l).data(n),a._async||e(".k-progress",r).width("100%"),!a.multiple&&i.length>0&&a._module.onRemove({target:e(i,a.wrapper)}),r},_removeFileEntry:function(t){var n,i,r=this,o=t.closest(".k-upload-files");t.remove(),n=e(".k-file",o),i=e(".k-file-success, .k-file-error",o),i.length===n.length&&this._hideUploadButton(),0===n.length&&(o.remove(),r.wrapper.addClass("k-upload-empty"),r._hideHeaderUploadstatus())},_fileAction:function(e,t){var n={remove:"k-delete",cancel:"k-cancel",retry:"k-retry"},i={remove:"k-i-close",cancel:"k-i-close",retry:"k-i-refresh"};n.hasOwnProperty(t)&&(this._clearFileAction(e),this.options.template?e.find(".k-upload-action").addClass("k-button k-button-bare").append("<span class='k-icon "+i[t]+" "+n[t]+"' title='"+this.localization[t]+"'></span>").show():(e.find(".k-upload-status .k-upload-action").remove(),e.find(".k-upload-status").append(this._renderAction(n[t],this.localization[t],i[t]))))},_fileState:function(t,n){var i=this.localization,r={uploading:{text:i.statusUploading},uploaded:{text:i.statusUploaded},failed:{text:i.statusFailed}},o=r[n];o&&e(".k-icon:not(.k-delete, .k-cancel, .k-retry)",t).text(o.text)},_renderAction:function(t,n,i){return e(""!==t?"<button type='button' class='k-button k-button-bare k-upload-action'><span class='k-icon "+i+" "+t+"' title='"+n+"'></span></button>":"<button type='button' class='k-button'>"+n+"</button>")},_clearFileAction:function(t){e(".k-upload-action",t).empty().hide()},_onFileAction:function(t){var n,i,r,o,a=this;return a.wrapper.hasClass("k-state-disabled")||(n=e(t.target).closest(".k-upload-action"),i=n.find(".k-icon"),r=n.closest(".k-file"),o={files:r.data("fileNames")},i.hasClass("k-delete")?a.trigger(P,o)||a._module.onRemove({target:e(r,a.wrapper)},o.data):i.hasClass("k-cancel")?(a.trigger(E,o),a._module.onCancel({target:e(r,a.wrapper)}),this._checkAllComplete(),a._updateHeaderUploadStatus()):i.hasClass("k-retry")&&(e(".k-warning",r).remove(),a._module.onRetry({target:e(r,a.wrapper)}))),!1},_onUploadSelected:function(){var e=this,t=e.wrapper;return t.hasClass("k-state-disabled")||this._module.onSaveSelected(),!1},_onFileProgress:function(t,n){var i;this.options.template?e(".k-progress",t.target).width(n+"%"):(i=e(".k-upload-pct",t.target),0===i.length&&e(".k-upload-status",t.target).prepend("<span class='k-upload-pct'></span>"),e(".k-upload-pct",t.target).text(n+"%"),e(".k-progress",t.target).width(n+"%")),this.trigger(M,{files:g(t).data("fileNames"),percentComplete:n})},_onUploadSuccess:function(e,t,n){var i=g(e);this._fileState(i,"uploaded"),i.removeClass("k-file-progress").addClass("k-file-success"),this._updateHeaderUploadStatus(),this.trigger(T,{files:i.data("fileNames"),response:t,operation:"upload",XMLHttpRequest:n}),this._supportsRemove()?this._fileAction(i,P):this._clearFileAction(i),this._checkAllComplete()},_onUploadError:function(t,n){var i=g(t),r=e(".k-upload-pct",i);this._fileState(i,"failed"),i.removeClass("k-file-progress").addClass("k-file-error"),e(".k-progress",i).width("100%"),r.length>0?r.empty().removeClass("k-upload-pct").addClass("k-icon k-warning"):e(".k-upload-status",i).prepend("<span class='k-icon k-warning'></span>"),this._updateHeaderUploadStatus(),this._fileAction(i,"retry"),this.trigger(D,{operation:"upload",files:i.data("fileNames"),XMLHttpRequest:n}),b("Server response: "+n.responseText),this._checkAllComplete()},_showUploadButton:function(){var t=e(".k-upload-selected",this.wrapper);0===t.length&&(t=this._renderAction("",this.localization.uploadSelectedFiles).addClass("k-upload-selected")),this.wrapper.append(t)},_hideUploadButton:function(){e(".k-upload-selected",this.wrapper).remove()},_showHeaderUploadStatus:function(){var t=this.localization,n=e(".k-dropzone",this.wrapper),i=e(".k-upload-status-total",this.wrapper);0!==i.length&&i.remove(),i='<strong class="k-upload-status k-upload-status-total">'+t.headerStatusUploading+'<span class="k-icon k-loading">'+t.statusUploading+"</span></strong>",n.length>0?n.append(i):e(".k-upload-button",this.wrapper).after(i)},_updateHeaderUploadStatus:function(){var t,n,i,r=this,o=r.localization,a=e(".k-file",r.wrapper).not(".k-file-success, .k-file-error");0===a.length&&(t=e(".k-file.k-file-error",r.wrapper),n=e(".k-upload-status-total",r.wrapper),i=e(".k-icon",n).removeClass("k-loading").addClass(0!==t.length?"k-warning":"k-i-tick").text(0!==t.length?o.statusWarning:o.statusUploaded),n.text(r.localization.headerStatusUploaded).append(i))},_hideHeaderUploadstatus:function(){e(".k-upload-status-total",this.wrapper).remove()},_onParentFormSubmit:function(){var n,i=this,r=i.element;t!==this._module.onAbort&&this._module.onAbort(),r.value||(n=e(r),n.attr("disabled","disabled"),window.setTimeout(function(){n.removeAttr("disabled")},0))},_onParentFormReset:function(){e(".k-upload-files",this.wrapper).remove()},_supportsFormData:function(){return"undefined"!=typeof FormData},_supportsMultiple:function(){var e=this._userAgent().indexOf("Windows")>-1;return!(y.support.browser.opera||y.support.browser.safari&&e)},_supportsDrop:function(){var e=this._userAgent().toLowerCase(),t=/chrome/.test(e),n=!t&&/safari/.test(e),i=n&&/windows/.test(e);return!i&&this._supportsFormData()&&this.options.async.saveUrl},_userAgent:function(){return navigator.userAgent},_setupDropZone:function(){var t,n,i=this;e(".k-upload-button",this.wrapper).wrap("<div class='k-dropzone'></div>"),t=i._ns,n=e(".k-dropzone",i.wrapper).append(e("<em>"+i.localization.dropFilesHere+"</em>")).on("dragenter"+t,h).on("dragover"+t,function(e){e.preventDefault()}).on("drop"+t,e.proxy(this._onDrop,this)),p(n,t,function(){n.addClass("k-dropzone-hovered")},function(){n.removeClass("k-dropzone-hovered")}),p(e(document),t,function(){n.addClass("k-dropzone-active"),n.closest(".k-upload").removeClass("k-upload-empty")},function(){n.removeClass("k-dropzone-active"),0===e("li.k-file",n.closest(".k-upload")).length&&n.closest(".k-upload").addClass("k-upload-empty")})},_supportsRemove:function(){return!!this.options.async.removeUrl},_submitRemove:function(t,n,i,r){var o=this,a=o.options.async.removeField||"fileNames",s=e.extend(n,m());s[a]=t,jQuery.ajax({type:this.options.async.removeVerb,dataType:"json",dataFilter:u,url:this.options.async.removeUrl,traditional:!0,data:s,success:i,error:r})},_wrapInput:function(e){var t=this,n=t.options;return e.wrap("<div class='k-widget k-upload k-header'><div class='k-button k-upload-button'></div></div>"),n.async.saveUrl||e.closest(".k-upload").addClass("k-upload-sync"),e.closest(".k-upload").addClass("k-upload-empty"),e.closest(".k-button").append("<span>"+this.localization.select+"</span>"),e.closest(".k-upload")},_checkAllComplete:function(){0===e(".k-file.k-file-progress",this.wrapper).length&&this.trigger(A)},_inputFiles:function(e){return i(e)}}),z=function(e){this.name="syncUploadModule",this.element=e.wrapper,this.upload=e,this.element.closest("form").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data")};z.prototype={onSelect:function(t,i){var r,o=this.upload,a=e(t.target);o._addInput(a),r=o._enqueueFile(n(a),{relatedInput:a,fileNames:i}),o._fileAction(r,P)},onRemove:function(e){var t=g(e);t.data("relatedInput").remove(),this.upload._removeFileEntry(t)}},v=function(e){this.name="iframeUploadModule",this.element=e.wrapper,this.upload=e,this.iframes=[]},I._frameId=0,v.prototype={onSelect:function(t,n){var i=this.upload,r=e(t.target),o=this.prepareUpload(r,n);i.options.async.autoUpload?this.performUpload(o):(i._supportsRemove()&&this.upload._fileAction(o,P),i._showUploadButton())},prepareUpload:function(t,i){var r,o,a,s=this.upload,l=e(s.element),c=s.options.async.saveField||t.attr("name");return s._addInput(t),t.attr("name",c),r=this.createFrame(s.name+"_"+I._frameId++),this.registerFrame(r),o=this.createForm(s.options.async.saveUrl,r.attr("name")).append(l),a=s._enqueueFile(n(t),{frame:r,relatedInput:l,fileNames:i}),r.data({form:o,file:a}),a},performUpload:function(t){var n,i,r,o={files:t.data("fileNames")},a=t.data("frame"),s=this.upload;if(s.trigger(S,o))s._removeFileEntry(a.data("file")),this.cleanupFrame(a),this.unregisterFrame(a);else{s._hideUploadButton(),s._showHeaderUploadStatus(),a.appendTo(document.body),n=a.data("form").attr("action",s.options.async.saveUrl).appendTo(document.body),o.data=e.extend({},o.data,m());for(i in o.data)r=n.find("input[name='"+i+"']"),0===r.length&&(r=e("<input>",{type:"hidden",name:i}).prependTo(n)),r.val(o.data[i]);s._fileAction(t,E),s._fileState(t,"uploading"),e(t).removeClass("k-file-error").addClass("k-file-progress"),a.one("load",e.proxy(this.onIframeLoad,this)),n[0].submit()}},onSaveSelected:function(){var t=this;e(".k-file",this.element).each(function(){var n=e(this),i=f(n);i||t.performUpload(n)})},onIframeLoad:function(t){var n,i=e(t.target);try{n=i.contents().text()}catch(r){n="Error trying to get server response: "+r}this.processResponse(i,n)},processResponse:function(t,n){var i=t.data("file"),r=this,o={responseText:n};d(n,function(n){e.extend(o,{statusText:"OK",status:"200"}),r.upload._onFileProgress({target:e(i,r.upload.wrapper)},100),r.upload._onUploadSuccess({target:e(i,r.upload.wrapper)},n,o),r.cleanupFrame(t),r.unregisterFrame(t)},function(){e.extend(o,{statusText:"error",status:"500"}),r.upload._onUploadError({target:e(i,r.upload.wrapper)},o)})},onCancel:function(t){var n=e(t.target).data("frame");this.stopFrameSubmit(n),this.cleanupFrame(n),this.unregisterFrame(n),this.upload._removeFileEntry(n.data("file"))},onRetry:function(e){var t=g(e);this.performUpload(t)},onRemove:function(e,t){var n=g(e),i=n.data("frame");i?(this.unregisterFrame(i),this.upload._removeFileEntry(n),this.cleanupFrame(i)):c(n,this.upload,t)},onAbort:function(){var t=this.element,n=this;e.each(this.iframes,function(){e("input",this.data("form")).appendTo(t),n.stopFrameSubmit(this[0]),this.data("form").remove(),this.remove()}),this.iframes=[]},createFrame:function(t){return e("<iframe name='"+t+"' id='"+t+"' style='display:none;' />")},createForm:function(t,n){return e("<form enctype='multipart/form-data' method='POST' action='"+t+"' target='"+n+"'/>")},stopFrameSubmit:function(e){t!==e.stop?e.stop():e.document&&e.document.execCommand("Stop")},registerFrame:function(e){this.iframes.push(e)},unregisterFrame:function(t){this.iframes=e.grep(this.iframes,function(e){return e.attr("name")!=t.attr("name")})},cleanupFrame:function(e){var t=e.data("form");e.data("file").data("frame",null),setTimeout(function(){t.remove(),e.remove()},1)}},_=function(e){this.name="formDataUploadModule",this.element=e.wrapper,this.upload=e},_.prototype={onSelect:function(t,n){var i=this.upload,r=this,o=e(t.target),a=this.prepareUpload(o,n);e.each(a,function(){i.options.async.autoUpload?r.performUpload(this):(i._supportsRemove()&&i._fileAction(this,P),i._showUploadButton())})},prepareUpload:function(t,n){var i=this.enqueueFiles(n);return t.is("input")&&(e.each(i,function(){e(this).data("relatedInput",t)}),t.data("relatedFileEntries",i),this.upload._addInput(t)),i},enqueueFiles:function(t){var n,i,r,o,a=this.upload,s=t.length,l=[];if(a.options.async.batch===!0)n=e.map(t,function(e){return e.name}).join(", "),o=a._enqueueFile(n,{fileNames:t}),o.data("files",t),l.push(o);else for(i=0;s>i;i++)r=t[i],n=r.name,o=a._enqueueFile(n,{fileNames:[r]}),o.data("files",[r]),l.push(o);return l},performUpload:function(t){var n,i=this.upload,r=this.createFormData(),o=this.createXHR(),a={files:t.data("fileNames"),XMLHttpRequest:o};if(i.trigger(S,a))this.removeFileEntry(t);else{i._fileAction(t,E),i._hideUploadButton(),i._showHeaderUploadStatus(),a.data=e.extend({},a.data,m());for(n in a.data)r.append(n,a.data[n]);this.populateFormData(r,t.data("files")),i._fileState(t,"uploading"),e(t).removeClass("k-file-error").addClass("k-file-progress"),this.postFormData(i.options.async.saveUrl,r,t,o)}},onSaveSelected:function(){var t=this;e(".k-file",this.element).each(function(){var n=e(this),i=f(n);i||t.performUpload(n)})},onCancel:function(e){var t=g(e);this.stopUploadRequest(t),this.removeFileEntry(t)},onRetry:function(e){var t=g(e);this.performUpload(t)},onRemove:function(e,t){var n=g(e);n.hasClass("k-file-success")?c(n,this.upload,t):this.removeFileEntry(n)},createXHR:function(){return new XMLHttpRequest},postFormData:function(e,t,n,i){var r=this;n.data("request",i),i.addEventListener("load",function(e){r.onRequestSuccess.call(r,e,n)},!1),i.addEventListener(D,function(e){r.onRequestError.call(r,e,n)},!1),i.upload.addEventListener("progress",function(e){r.onRequestProgress.call(r,e,n)},!1),i.open("POST",e,!0),i.withCredentials=this.upload.options.async.withCredentials,i.send(t)},createFormData:function(){return new FormData},populateFormData:function(e,t){var n,i=this.upload,r=t.length;for(n=0;r>n;n++)e.append(i.options.async.saveField||i.name,t[n].rawFile);return e},onRequestSuccess:function(t,n){function i(){o.upload._onUploadError({target:e(n,o.upload.wrapper)},r)}var r=t.target,o=this;r.status>=200&&299>=r.status?d(r.responseText,function(t){o.upload._onFileProgress({target:e(n,o.upload.wrapper)},100),o.upload._onUploadSuccess({target:e(n,o.upload.wrapper)},t,r),o.cleanupFileEntry(n)},i):i()},onRequestError:function(t,n){var i=t.target;this.upload._onUploadError({target:e(n,this.upload.wrapper)},i)},cleanupFileEntry:function(t){var n=t.data("relatedInput"),i=!0;n&&(e.each(n.data("relatedFileEntries")||[],function(){this.parent().length>0&&this[0]!=t[0]&&(i=i&&this.hasClass("k-file-success"))}),i&&n.remove())},removeFileEntry:function(e){this.cleanupFileEntry(e),this.upload._removeFileEntry(e)},onRequestProgress:function(t,n){var i=Math.round(100*t.loaded/t.total);this.upload._onFileProgress({target:e(n,this.upload.wrapper)},i)},stopUploadRequest:function(e){e.data("request").abort()}},y.ui.plugin(I)}(window.kendo.jQuery),function(e,t){function n(e,t,n){var i,r;e.on("dragenter"+x,function(){t(),r=new Date,i||(i=setInterval(function(){var e=new Date-r;e>100&&(n(),clearInterval(i),i=null)},100))}).on("dragover"+x,function(){r=new Date})}function i(e,n){return e!==t&&e.match(/\/$/)||(e=(e||"")+"/"),e+n}function r(e){if(!e)return"";var t=" bytes";return e>=1073741824?(t=" GB",e/=1073741824):e>=1048576?(t=" MB",e/=1048576):e>=1024&&(t=" KB",e/=1024),Math.round(100*e)/100+t}function o(e,t){var n=e[t];return h(n)?n.from||n.field||t:n}var a,s,l,c,d=window.kendo,u=d.ui.Widget,h=e.isPlainObject,p=e.proxy,f=e.extend,g=d.support.placeholder,m=d.support.browser,v=d.isFunction,_=/(^\/|\/$)/g,y="change",w="apply",b="error",k="click",x=".kendoFileBrowser",C=".kendoBreadcrumbs",S=".kendoSearchBox",T="name",D="size",A="type",E={field:A,dir:"asc"},M=d.template('<li class="k-tile-empty"><strong>${text}</strong></li>'),P='<div class="k-widget k-filebrowser-toolbar k-header k-floatwrap"><div class="k-toolbar-wrap"># if (showUpload) { # <div class="k-widget k-upload"><div class="k-button k-button-icontext k-upload-button"><span class="k-icon k-add"></span>#=messages.uploadFile#<input type="file" name="file" /></div></div># } ## if (showCreate) { #<button type="button" class="k-button k-button-icon"><span class="k-icon k-addfolder" /></button># } ## if (showDelete) { #<button type="button" class="k-button k-button-icon k-state-disabled"><span class="k-icon k-delete" /></button>&nbsp;# } #</div><div class="k-tiles-arrange"><label>#=messages.orderBy#: <select /></label></a></div></div>';f(!0,d.data,{schemas:{filebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}}),f(!0,d.data,{transports:{filebrowser:d.data.RemoteTransport.extend({init:function(t){d.data.RemoteTransport.fn.init.call(this,e.extend(!0,{},this.options,t))},_call:function(t,n){n.data=e.extend({},n.data,{path:this.options.path()}),v(this.options[t])?this.options[t].call(this,n):d.data.RemoteTransport.fn[t].call(this,n)},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}}),a=m.msie&&8>m.version?function(e){return e.offsetTop}:function(t){return t.offsetTop-e(t).height()},s=u.extend({init:function(e,t){var n=this;t=t||{},u.fn.init.call(n,e,t),n.element.addClass("k-filebrowser"),n.element.on(k+x,".k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-delete)",p(n._deleteClick,n)).on(k+x,".k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-addfolder)",p(n._addClick,n)).on("keydown"+x,"li.k-state-selected input",p(n._directoryKeyDown,n)).on("blur"+x,"li.k-state-selected input",p(n._directoryBlur,n)),n._dataSource(),n.refresh(),n.path(n.options.path)},options:{name:"FileBrowser",messages:{uploadFile:"Upload",orderBy:"Arrange by",orderByName:"Name",orderBySize:"Size",directoryNotFound:"A directory with this name was not found.",emptyFolder:"Empty Folder",deleteFile:'Are you sure you want to delete "{0}"?',invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',dropFilesHere:"drop file here to upload",search:"Search"},transport:{},path:"/",fileTypes:"*.*"},events:[b,y,w],destroy:function(){var e=this;u.fn.destroy.call(e),e.dataSource.unbind(b,e._errorHandler),e.element.add(e.list).add(e.toolbar).off(x),d.destroy(e.element)},value:function(){var e,n=this,r=n._selectedItem(),o=n.options.transport.fileUrl;return r&&"f"===r.get(A)?(e=i(n.path(),r.get(T)).replace(_,""),o&&(e=v(o)?o(e):d.format(o,encodeURIComponent(e))),e):t},_selectedItem:function(){var e=this.listView,n=e.select();return n.length?this.dataSource.getByUid(n.attr(d.attr("uid"))):t},_toolbar:function(){var t=this,n=d.template(P),i=t.options.messages,r=[{text:i.orderByName,value:"name"},{text:i.orderBySize,value:"size"}];t.toolbar=e(n({messages:i,showUpload:t.options.transport.uploadUrl,showCreate:t.options.transport.create,showDelete:t.options.transport.destroy})).appendTo(t.element).find(".k-upload input").kendoUpload({multiple:!1,localization:{dropFilesHere:i.dropFilesHere},async:{saveUrl:t.options.transport.uploadUrl,autoUpload:!0},upload:p(t._fileUpload,t),error:function(e){t._error({xhr:e.XMLHttpRequest,status:"error"})}}).end(),t.upload=t.toolbar.find(".k-upload input").data("kendoUpload"),t.arrangeBy=t.toolbar.find(".k-tiles-arrange select").kendoDropDownList({dataSource:r,dataTextField:"text",dataValueField:"value",change:function(){t.orderBy(this.value())}}).data("kendoDropDownList"),t._attachDropzoneEvents()},_attachDropzoneEvents:function(){var t=this;t.options.transport.uploadUrl&&(n(e(document.documentElement),e.proxy(t._dropEnter,t),e.proxy(t._dropLeave,t)),t._scrollHandler=p(t._positionDropzone,t))},_dropEnter:function(){this._positionDropzone(),e(document).on("scroll"+x,this._scrollHandler)},_dropLeave:function(){this._removeDropzone(),e(document).off("scroll"+x,this._scrollHandler)},_positionDropzone:function(){var e=this,t=e.element,n=t.offset();e.toolbar.find(".k-dropzone").addClass("k-filebrowser-dropzone").offset(n).css({width:t[0].clientWidth,height:t[0].clientHeight,lineHeight:t[0].clientHeight+"px"})},_removeDropzone:function(){this.toolbar.find(".k-dropzone").removeClass("k-filebrowser-dropzone").css({width:"",height:"",lineHeight:"",top:"",left:""})},_deleteClick:function(){var e=this,t=e.listView.select(),n=d.format(e.options.messages.deleteFile,t.find("strong").text());t.length&&e._showMessage(n,"confirm")&&e.listView.remove(t)},_addClick:function(){this.createDirectory()},_getFieldName:function(e){return o(this.dataSource.reader.model.fields,e)},_fileUpload:function(e){var t,n=this,i=n.options,r=i.fileTypes,o=RegExp(("("+r.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),a=e.files[0].name,s=T,l=D;o.test(a)?(e.data={path:n.path()},t=n._createFile(a),t?n.upload.one("success",function(e){t.set(s,e.response[n._getFieldName(s)]),t.set(l,e.response[n._getFieldName(l)]),n._tiles=n.listView.items().filter("["+d.attr("type")+"=f]")}):e.preventDefault()):(e.preventDefault(),n._showMessage(d.format(i.messages.invalidFileType,a,r)))},_findFile:function(e){var t,n,i,r=this.dataSource.data(),o=A,a=T;for(e=e.toLowerCase(),t=0,i=r.length;i>t;t++)if("f"===r[t].get(o)&&r[t].get(a).toLowerCase()===e){n=r[t];break}return n},_createFile:function(e){var t,n,i=this,r=0,o={},a=A,s=i.dataSource.view(),l=i._findFile(e);if(l&&!i._showMessage(d.format(i.options.messages.overwriteFile,e),"confirm"))return null;if(l)return l;for(t=0,n=s.length;n>t;t++)if("f"===s[t].get(a)){r=t;break}return o[a]="f",o[T]=e,o[D]=0,i.dataSource.insert(++r,o)},createDirectory:function(){var e,t,n=this,i=0,r=A,o=T,a=n.dataSource.data(),s=n._nameDirectory(),l=new n.dataSource.reader.model;for(e=0,t=a.length;t>e;e++)"d"===a[e].get(r)&&(i=e);l.set(r,"d"),l.set(o,s),n.listView.one("dataBound",function(){var e=n.listView.items().filter("["+d.attr("uid")+"="+l.uid+"]"),t=e.find("input");e.length&&this.edit(e),this.element.scrollTop(e.attr("offsetTop")-this.element[0].offsetHeight),setTimeout(function(){t.select()})}).one("save",function(e){var t=e.model.get(o);t?e.model.set(o,n._nameExists(t,l.uid)?n._nameDirectory():t):e.model.set(o,s)}),n.dataSource.insert(++i,l)},_directoryKeyDown:function(e){13==e.keyCode&&e.currentTarget.blur()},_directoryBlur:function(){this.listView.save()},_nameExists:function(e,t){var n,i,r=this.dataSource.data(),o=A,a=T;for(n=0,i=r.length;i>n;n++)if("d"===r[n].get(o)&&r[n].get(a).toLowerCase()===e.toLowerCase()&&r[n].uid!==t)return!0;return!1},_nameDirectory:function(){var t,n,i,r="New folder",o=this.dataSource.data(),a=[],s=A,l=T;for(n=0,i=o.length;i>n;n++)"d"===o[n].get(s)&&o[n].get(l).toLowerCase().indexOf(r.toLowerCase())>-1&&a.push(o[n].get(l));if(e.inArray(r,a)>-1){n=2;do t=r+" ("+n+")",n++;while(e.inArray(t,a)>-1);r=t}return r},orderBy:function(e){this.dataSource.sort([{field:A,dir:"asc"},{field:e,dir:"asc"}])},search:function(e){this.dataSource.filter({field:T,operator:"contains",value:e})},_content:function(){var t=this;t.list=e('<ul class="k-reset k-floats k-tiles" />').appendTo(t.element).on("dblclick"+x,"li",p(t._dblClick,t)),t.listView=new d.ui.ListView(t.list,{dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:!0,autoBind:!1,dataBinding:function(e){t.toolbar.find(".k-delete").parent().addClass("k-state-disabled"),("remove"===e.action||"sync"===e.action)&&e.preventDefault()},dataBound:function(){t.dataSource.view().length?t._tiles=this.items().filter("["+d.attr("type")+"=f]"):this.wrapper.append(M({text:t.options.messages.emptyFolder}))},change:p(t._listViewChange,t)})},_dblClick:function(t){var n,r=this,o=e(t.currentTarget);o.hasClass("k-edit-item")&&r._directoryBlur(),o.filter("["+d.attr("type")+"=d]").length?(n=r.dataSource.getByUid(o.attr(d.attr("uid"))),n&&(r.path(i(r.path(),n.get(T))),r.breadcrumbs.value(r.path()))):o.filter("["+d.attr("type")+"=f]").length&&r.trigger(w)},_listViewChange:function(){var e=this._selectedItem();e&&(this.toolbar.find(".k-delete").parent().removeClass("k-state-disabled"),"f"===e.get(A)&&this.trigger(y))},_dataSource:function(){var e,t=this,n=t.options,i=n.transport,r=f({},E),o={field:T,dir:"asc"},a={type:i.type||"filebrowser",sort:[r,o]};h(i)&&(i.path=p(t.path,t),a.transport=i),h(n.schema)?a.schema=n.schema:i.type&&h(d.data.schemas[i.type])&&(e=d.data.schemas[i.type]),t.dataSource&&t._errorHandler?t.dataSource.unbind(b,t._errorHandler):t._errorHandler=p(t._error,t),t.dataSource=d.data.DataSource.create(a).bind(b,t._errorHandler)},_navigation:function(){var t=this,n=e('<div class="k-floatwrap"><input/><input/></div>').appendTo(this.element);t.breadcrumbs=n.find("input:first").kendoBreadcrumbs({value:t.options.path,change:function(){t.path(this.value())}}).data("kendoBreadcrumbs"),t.searchBox=n.parent().find("input:last").kendoSearchBox({label:t.options.messages.search,change:function(){t.search(this.value())}}).data("kendoSearchBox")},_error:function(e){var t,n=this;n.trigger(b,e)||(t=e.xhr.status,"error"==e.status?"404"==t?n._showMessage(n.options.messages.directoryNotFound):"0"!=t&&n._showMessage("Error! The requested URL returned "+t+" - "+e.xhr.statusText):"timeout"==t&&n._showMessage("Error! Server timeout."))},_showMessage:function(e,t){return window[t||"alert"](e)},refresh:function(){var e=this;e._navigation(),e._toolbar(),e._content()},_editTmpl:function(){var e='<li class="k-tile k-state-selected" '+d.attr("uid")+'="#=uid#" ';return e+=d.attr("type")+'="${'+A+'}">',e+="#if("+A+' == "d") { #',e+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',e+="#}else{#",e+='<div class="k-thumb"><span class="k-icon k-loading"></span></div>',e+="#}#",e+="#if("+A+' == "d") { #',e+='<input class="k-input" '+d.attr("bind")+'="value:'+T+'"/>',e+="#}#",e+="</li>",p(d.template(e),{sizeFormatter:r})},_itemTmpl:function(){var e='<li class="k-tile" '+d.attr("uid")+'="#=uid#" ';return e+=d.attr("type")+'="${'+A+'}">',e+="#if("+A+' == "d") { #',e+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',e+="#}else{#",e+='<div class="k-thumb"><span class="k-icon k-file"></span></div>',e+="#}#",e+="<strong>${"+T+"}</strong>",e+="#if("+A+' == "f") { # <span class="k-filesize">${this.sizeFormatter('+D+")}</span> #}#",e+="</li>",p(d.template(e),{sizeFormatter:r})},path:function(e){var n=this,i=n._path||"";return e!==t?(n._path=e.replace(_,"")+"/",n.dataSource.read({path:n._path}),t):(i&&(i=i.replace(_,"")),"/"===i||""===i?"":i+"/")}}),l=u.extend({init:function(e,t){var n=this;t=t||{},u.fn.init.call(n,e,t),g&&n.element.attr("placeholder",n.options.label),n._wrapper(),n.element.on("keydown"+S,p(n._keydown,n)).on("change"+S,p(n._updateValue,n)),n.wrapper.on(k+S,"a",p(n._click,n)),g||n.element.on("focus"+S,p(n._focus,n)).on("blur"+S,p(n._blur,n))},options:{name:"SearchBox",label:"Search",value:""},events:[y],destroy:function(){var e=this;e.wrapper.add(e.element).add(e.label).off(S),u.fn.destroy.call(e)},_keydown:function(e){13===e.keyCode&&this._updateValue()},_click:function(e){e.preventDefault(),this._updateValue()},_updateValue:function(){var e=this,t=e.element.val();t!==e.value()&&(e.value(t),e.trigger(y))},_blur:function(){this._updateValue(),this._toggleLabel()},_toggleLabel:function(){g||this.label.toggle(!this.element.val())},_focus:function(){this.label.hide()},_wrapper:function(){var t=this.element,n=t.parents(".k-search-wrap");t[0].style.width="",t.addClass("k-input"),n.length||(n=t.wrap(e('<div class="k-widget k-search-wrap k-textbox"/>')).parent(),g||e('<label style="display:block">'+this.options.label+"</label>").insertBefore(t),e('<a href="#" class="k-icon k-i-search k-search"/>').appendTo(n)),this.wrapper=n,this.label=n.find(">label")},value:function(e){var n=this;return e!==t?(n.options.value=e,n.element.val(e),n._toggleLabel(),t):n.options.value}}),c=u.extend({init:function(e,t){var n=this;t=t||{},u.fn.init.call(n,e,t),n._wrapper(),n.wrapper.on("focus"+C,"input",p(n._focus,n)).on("blur"+C,"input",p(n._blur,n)).on("keydown"+C,"input",p(n._keydown,n)).on(k+C,"a.k-i-arrow-n:first",p(n._rootClick,n)).on(k+C,"a:not(.k-i-arrow-n)",p(n._click,n)),n.value(n.options.value)},options:{name:"Breadcrumbs",gap:50},events:[y],destroy:function(){var e=this;u.fn.destroy.call(e),e.wrapper.add(e.wrapper.find("input")).add(e.wrapper.find("a")).off(C)},_update:function(e){e="/"===(e||"").charAt(0)?e:"/"+(e||""),e!==this.value()&&(this.value(e),this.trigger(y))},_click:function(t){t.preventDefault(),this._update(this._path(e(t.target).prevAll("a:not(.k-i-arrow-n)").addBack()))},_rootClick:function(e){e.preventDefault(),this._update("")},_focus:function(){var e=this,t=e.element;e.overlay.hide(),e.element.val(e.value()),setTimeout(function(){t.select()})},_blur:function(){if(!this.overlay.is(":visible")){var e=this,t=e.element,n=t.val().replace(/\/{2,}/g,"/");e.overlay.show(),t.val(""),e._update(n)}},_keydown:function(e){var t=this;13===e.keyCode&&(t._blur(),setTimeout(function(){t.overlay.find("a:first").focus()}))},_wrapper:function(){var t,n=this.element,i=n.parents(".k-breadcrumbs");n[0].style.width="",n.addClass("k-input"),i.length||(i=n.wrap(e('<div class="k-widget k-breadcrumbs k-textbox"/>')).parent()),t=i.find(".k-breadcrumbs-wrap"),t.length||(t=e('<div class="k-breadcrumbs-wrap"/>').appendTo(i)),this.wrapper=i,this.overlay=t},refresh:function(){var n,i,r,o,a="",s=this.value();for(s!==t&&s.match(/^\//)||(s="/"+(s||"")),n=s.split("/"),r=0,o=n.length;o>r;r++)i=n[r],i&&(a||(a+='<a href="#" class="k-icon k-i-arrow-n">root</a>'),a+='<a class="k-link" href="#">'+n[r]+"</a>",a+='<span class="k-icon k-i-arrow-e">&gt;</span>');this.overlay.empty().append(e(a)),this._adjustSectionWidth()},_adjustSectionWidth:function(){var t,n=this,i=n.wrapper,r=i.width()-n.options.gap,o=n.overlay.find("a");o.each(function(n){t=e(this),t.parent().width()>r&&(n==o.length-1?t.width(r):t.prev().addBack().hide())})},value:function(e){return e!==t?(this._value=e.replace(/\/{2,}/g,"/"),this.refresh(),t):this._value
},_path:function(t){return"/"+e.map(t,function(t){return e(t).text()}).join("/")}}),d.ui.plugin(s),d.ui.plugin(c),d.ui.plugin(l)}(window.kendo.jQuery),function(e,t){function n(e,n){return e!==t&&e.match(/\/$/)||(e=(e||"")+"/"),e+n}function i(e){if(!e)return"";var t=" bytes";return e>=1073741824?(t=" GB",e/=1073741824):e>=1048576?(t=" MB",e/=1048576):e>=1024&&(t=" KB",e/=1024),Math.round(100*e)/100+t}var r,o,a=window.kendo,s=a.ui.FileBrowser,l=e.isPlainObject,c=e.proxy,d=e.extend,u=a.support.browser,h=a.isFunction,p=/(^\/|\/$)/g,f="error",g=".kendoImageBrowser",m="name",v="size",_="type",y={field:_,dir:"asc"},w=a.template('<li class="k-tile-empty"><strong>${text}</strong></li>');d(!0,a.data,{schemas:{imagebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}}),d(!0,a.data,{transports:{imagebrowser:a.data.RemoteTransport.extend({init:function(t){a.data.RemoteTransport.fn.init.call(this,e.extend(!0,{},this.options,t))},_call:function(t,n){n.data=e.extend({},n.data,{path:this.options.path()}),h(this.options[t])?this.options[t].call(this,n):a.data.RemoteTransport.fn[t].call(this,n)},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}}),r=u.msie&&8>u.version?function(e){return e.offsetTop}:function(t){return t.offsetTop-e(t).height()},o=s.extend({init:function(e,t){var n=this;t=t||{},s.fn.init.call(n,e,t),n.element.addClass("k-imagebrowser")},options:{name:"ImageBrowser",fileTypes:"*.png,*.gif,*.jpg,*.jpeg"},value:function(){var e,i=this,r=i._selectedItem(),o=i.options.transport.imageUrl;return r&&"f"===r.get(_)?(e=n(i.path(),r.get(m)).replace(p,""),o&&(e=h(o)?o(e):a.format(o,encodeURIComponent(e))),e):t},_fileUpload:function(e){var t,n=this,i=n.options,r=i.fileTypes,o=RegExp(("("+r.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),s=e.files[0].name,l=m,c=v;o.test(s)?(e.data={path:n.path()},t=n._createFile(s),t?(t._uploading=!0,n.upload.one("success",function(e){delete t._uploading,t.set(l,e.response[n._getFieldName(l)]),t.set(c,e.response[n._getFieldName(c)]),n._tiles=n.listView.items().filter("["+a.attr("type")+"=f]"),n._scroll()})):e.preventDefault()):(e.preventDefault(),n._showMessage(a.format(i.messages.invalidFileType,s,r)))},_content:function(){var t=this;t.list=e('<ul class="k-reset k-floats k-tiles" />').appendTo(t.element).on("scroll"+g,c(t._scroll,t)).on("dblclick"+g,"li",c(t._dblClick,t)),t.listView=new a.ui.ListView(t.list,{dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:!0,autoBind:!1,dataBinding:function(e){t.toolbar.find(".k-delete").parent().addClass("k-state-disabled"),("remove"===e.action||"sync"===e.action)&&e.preventDefault()},dataBound:function(){t.dataSource.view().length?(t._tiles=this.items().filter("["+a.attr("type")+"=f]"),t._scroll()):this.wrapper.append(w({text:t.options.messages.emptyFolder}))},change:c(t._listViewChange,t)})},_dataSource:function(){var e,t=this,n=t.options,i=n.transport,r=d({},y),o={field:m,dir:"asc"},s={type:i.type||"imagebrowser",sort:[r,o]};l(i)&&(i.path=c(t.path,t),s.transport=i),l(n.schema)?s.schema=n.schema:i.type&&l(a.data.schemas[i.type])&&(e=a.data.schemas[i.type]),t.dataSource&&t._errorHandler?t.dataSource.unbind(f,t._errorHandler):t._errorHandler=c(t._error,t),t.dataSource=a.data.DataSource.create(s).bind(f,t._errorHandler)},_loadImage:function(t){var n=this,i=e(t),r=n.dataSource.getByUid(i.attr(a.attr("uid"))),o=r.get(m),s=n.options.transport.thumbnailUrl,l=e("<img />",{alt:o}),c="?";r._uploading||(l.hide().on("load"+g,function(){e(this).prev().remove().end().addClass("k-image").fadeIn()}),i.find(".k-loading").after(l),h(s)?s=s(n.path(),encodeURIComponent(o)):(s.indexOf("?")>=0&&(c="&"),s=s+c+"path="+n.path()+encodeURIComponent(o)),l.attr("src",s),t.loaded=!0)},_scroll:function(){var e=this;e.options.transport&&e.options.transport.thumbnailUrl&&(clearTimeout(e._timeout),e._timeout=setTimeout(function(){var n=e.list.outerHeight(),i=e.list.scrollTop(),o=i+n;e._tiles.each(function(){var n=r(this),a=n+this.offsetHeight;return(n>=i&&o>n||a>=i&&o>a)&&e._loadImage(this),n>o?!1:t}),e._tiles=e._tiles.filter(function(){return!this.loaded})},250))},_itemTmpl:function(){var e=this,t='<li class="k-tile" '+a.attr("uid")+'="#=uid#" ';return t+=a.attr("type")+'="${'+_+'}">',t+="#if("+_+' == "d") { #',t+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',t+="#}else{#",t+=e.options.transport&&e.options.transport.thumbnailUrl?'<div class="k-thumb"><span class="k-icon k-loading"></span></div>':'<div class="k-thumb"><span class="k-icon k-file"></span></div>',t+="#}#",t+="<strong>${"+m+"}</strong>",t+="#if("+_+' == "f") { # <span class="k-filesize">${this.sizeFormatter('+v+")}</span> #}#",t+="</li>",c(a.template(t),{sizeFormatter:i})}}),a.ui.plugin(o)}(window.kendo.jQuery),function(e,t){var n,i,r,o,a=window.kendo,s=a.Class,l=a.ui.Widget,c=a.support.mobileOS,d=a.support.browser,u=e.extend,h=e.proxy,p=a.deepExtend,f=".kendoEditor",g=a.keys,m=s.extend({init:function(e){this.options=e},getHtml:function(){var e=this.options;return a.template(e.template,{useWithBlock:!1})(e)}}),v={editorWrapperTemplate:'<table cellspacing="4" cellpadding="0" class="k-widget k-editor k-header" role="presentation"><tbody><tr role="presentation"><td class="k-editor-toolbar-wrap" role="presentation"><ul class="k-editor-toolbar" role="toolbar" /></td></tr><tr><td class="k-editable-area" /></tr></tbody></table>',buttonTemplate:'<a href="" role="button" class="k-tool"#= data.popup ? " data-popup" : "" # unselectable="on" title="#= data.title #"><span unselectable="on" class="k-tool-icon #= data.cssClass #">#= data.title #</span></a>',colorPickerTemplate:'<div class="k-colorpicker #= data.cssClass #" />',comboBoxTemplate:'<select title="#= data.title #" class="#= data.cssClass #" />',dropDownListTemplate:'<span class="k-editor-dropdown"><select title="#= data.title #" class="#= data.cssClass #" /></span>',separatorTemplate:'<span class="k-separator" />',formatByName:function(t,n){for(var i=0;n.length>i;i++)if(e.inArray(t,n[i].tags)>=0)return n[i]},registerTool:function(e,t){var n=t.options;n&&n.template&&(n.template.options.cssClass="k-"+e),t.name||(t.options.name=e,t.name=e.toLowerCase()),b.defaultTools[e]=t},registerFormat:function(e,t){b.fn.options.formats[e]=t}},_={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyCenter:"Center text",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",insertUnorderedList:"Insert unordered list",insertOrderedList:"Insert ordered list",indent:"Indent",outdent:"Outdent",createLink:"Insert hyperlink",unlink:"Remove hyperlink",insertImage:"Insert image",insertFile:"Insert file",insertHtml:"Insert HTML",viewHtml:"View HTML",fontName:"Select font family",fontNameInherit:"(inherited font)",fontSize:"Select font size",fontSizeInherit:"(inherited size)",formatBlock:"Format",formatting:"Format",foreColor:"Color",backColor:"Background color",style:"Styles",emptyFolder:"Empty Folder",uploadFile:"Upload",orderBy:"Arrange by:",orderBySize:"Size",orderByName:"Name",invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',deleteFile:'Are you sure you want to delete "{0}"?',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',directoryNotFound:"A directory with this name was not found.",imageWebAddress:"Web address",imageAltText:"Alternate text",imageWidth:"Width (px)",imageHeight:"Height (px)",fileWebAddress:"Web address",fileTitle:"Title",linkWebAddress:"Web address",linkText:"Text",linkToolTip:"ToolTip",linkOpenInNewWindow:"Open link in new window",dialogUpdate:"Update",dialogInsert:"Insert",dialogCancel:"Cancel",createTable:"Create table",createTableHint:"Create a {0} x {1} table",addColumnLeft:"Add column on the left",addColumnRight:"Add column on the right",addRowAbove:"Add row above",addRowBelow:"Add row below",deleteRow:"Delete row",deleteColumn:"Delete column"},y=!c||c.ios&&c.flatVersion>=500||!c.ios&&t!==document.documentElement.contentEditable,w={basic:["bold","italic","underline"],alignment:["justifyLeft","justifyCenter","justifyRight"],lists:["insertUnorderedList","insertOrderedList"],indenting:["indent","outdent"],links:["createLink","unlink"],tables:["createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"]},b=l.extend({init:function(t,n){var i,r,o,s,c=this,d=a.ui.editor;y&&(l.fn.init.call(c,t,n),c.options=p({},c.options,n),t=c.element,s=d.Dom.name(t[0]),t.closest("form").on("submit"+f,function(){c.update()}),o=u({},c.options),o.editor=c,"textarea"==s?(c._wrapTextarea(),r=c.wrapper.find(".k-editor-toolbar"),t[0].id&&r.attr("aria-controls",t[0].id)):(c.element.attr("contenteditable",!0).addClass("k-widget k-editor k-editor-inline"),o.popup=!0,r=e('<ul class="k-editor-toolbar" role="toolbar" />').insertBefore(t)),c.toolbar=new d.Toolbar(r[0],o),c.toolbar.bindTo(c),"textarea"==s&&setTimeout(function(){var e=c.wrapper[0].style.height,t=parseInt(e,10),n=c.wrapper.height();e.indexOf("px")>0&&!isNaN(t)&&n>t&&c.wrapper.height(t-(n-t))}),c._initializeContentElement(c),c.keyboard=new d.Keyboard([new d.TypingHandler(c),new d.BackspaceHandler(c),new d.SystemHandler(c)]),c.clipboard=new d.Clipboard(this),c.undoRedoStack=new d.UndoRedoStack,i=n&&n.value?n.value:c.textarea?t.val().replace(/[\r\n\v\f\t ]+/gi," "):t[0].innerHTML,c.value(i),e(document).on("mousedown",h(c._endTyping,c)).on("mouseup",h(c._mouseup,c)),a.notify(c))},_endTyping:function(){var e=this.keyboard;try{e.isTypingInProgress()&&(e.endTyping(!0),this.saveSelection())}catch(t){}},_selectionChange:function(){d.msie||a.ui.editor.Dom.ensureTrailingBreaks(this.body),this._selectionStarted=!1,this.saveSelection(),this.trigger("select",{})},_wrapTextarea:function(){var t=this,n=t.element,i=n[0].style.width,r=n[0].style.height,o=v.editorWrapperTemplate,a=e(o).insertBefore(n).width(i).height(r),s=a.find(".k-editable-area");n.attr("autocomplete","off").appendTo(s).addClass("k-content k-raw-content").css("display","none"),t.textarea=n,t.wrapper=a},_createContentElement:function(t){var n,i,r,o=this,s=o.textarea,l=o.options.domain,c=l||document.domain,d="",u='javascript:""';return(l||c!=location.hostname)&&(d='<script>document.domain="'+c+'"</script>',u="javascript:document.write('"+d+"')"),s.hide(),n=e("<iframe />",{frameBorder:"0"})[0],e(n).css("display","").addClass("k-content").insertBefore(s),n.src=u,i=n.contentWindow||n,r=i.document||n.contentDocument,e(n).one("load",function(){o.toolbar.decorateFrom(r.body)}),r.open(),r.write("<!DOCTYPE html><html><head><meta charset='utf-8' /><style>html,body{padding:0;margin:0;height:100%;min-height:100%;}body{font-size:12px;font-family:Verdana,Geneva,sans-serif;padding-top:1px;margin-top:-1px;word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;"+(a.support.isRtl(s)?"direction:rtl;":"")+"}h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}p{margin:0 0 1em;padding:0 .2em}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}ul,ol{padding-left:2.5em}span{-ms-high-contrast-adjust:none;}a{color:#00a}code{font-size:1.23em}telerik\\3Ascript{display: none;}.k-table{table-layout:fixed;width:100%;border-spacing:0;margin: 0 0 1em;}.k-table td{min-width:1px;padding:.2em .3em;}.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}.k-table p{margin:0;padding:0;}</style>"+d+"<script>(function(d,c){d[c]('header'),d[c]('article'),d[c]('nav'),d[c]('section'),d[c]('footer');})(document, 'createElement');</script>"+e.map(t,function(e){return"<link rel='stylesheet' href='"+e+"'>"}).join("")+"</head><body autocorrect='off' contenteditable='true'></body></html>"),r.close(),i},_blur:function(){var e=this.textarea,t=e?e.val():this._oldValue,n=this.options.encoded?this.encodedValue():this.value();this.update(),e&&e.trigger("blur"),n!=t&&this.trigger("change")},_initializeContentElement:function(){var n,i,r=this;r.textarea?(r.window=r._createContentElement(r.options.stylesheets),n=r.document=r.window.contentDocument||r.window.document,r.body=n.body,i=r.window,e(n).on("mouseup"+f,h(r._mouseup,r))):(r.window=window,n=r.document=document,r.body=r.element[0],i=r.body,r.toolbar.decorateFrom(r.body)),e(i).on("blur"+f,h(this._blur,this));try{n.execCommand("enableInlineTableEditing",null,!1)}catch(o){}a.support.touch&&e(n).on("selectionchange"+f,h(this._selectionChange,this)).on("keydown"+f,function(){a._activeElement()!=n.body&&r.window.focus()}),e(r.body).on("keydown"+f,function(e){var n,i,o,a,s,l;return e.keyCode===g.F10?(setTimeout(h(r.toolbar.focus,r.toolbar),100),e.preventDefault(),t):((e.keyCode==g.LEFT||e.keyCode==g.RIGHT)&&(n=r.getRange(),i=e.keyCode==g.LEFT,o=n[i?"startContainer":"endContainer"],a=n[i?"startOffset":"endOffset"],s=i?-1:1,i&&(a-=1),a+s>0&&3==o.nodeType&&"﻿"==o.nodeValue[a]&&(n.setStart(o,a+s),n.collapse(!0),r.selectRange(n))),(l=r.keyboard.toolFromShortcut(r.toolbar.tools,e))?(e.preventDefault(),/^(undo|redo)$/.test(l)||r.keyboard.endTyping(!0),r.trigger("keydown",e),r.exec(l),!1):(r.keyboard.clearTimeout(),r.keyboard.keydown(e),t))}).on("keyup"+f,function(t){var n=[8,9,33,34,35,36,37,38,39,40,40,45,46];(e.inArray(t.keyCode,n)>-1||65==t.keyCode&&t.ctrlKey&&!t.altKey&&!t.shiftKey)&&r._selectionChange(),r.keyboard.keyup(t)}).on("mousedown"+f,function(t){if(r._selectionStarted=!0,!d.gecko){var n=e(t.target);(2==t.which||1==t.which&&t.ctrlKey)&&n.is("a[href]")&&window.open(n.attr("href"),"_new")}}).on("click"+f,function(e){var t,n=a.ui.editor.Dom;"img"===n.name(e.target)&&(t=r.createRange(),t.selectNode(e.target),r.selectRange(t))}).on("cut"+f+" paste"+f,function(e){r.clipboard["on"+e.type](e)}).on("focusin"+f,function(){e(this).addClass("k-state-active"),r.toolbar.show(),r.textarea&&r.selectRange(r.getRange())}).on("focusout"+f,function(){setTimeout(function(){var t=a._activeElement(),n=r.body,i=r.toolbar;t==n||e.contains(n,t)||e(t).is(".k-editortoolbar-dragHandle")||i.focused()||(e(n).removeClass("k-state-active"),i.hide())},10)})},_mouseup:function(){var e=this;e._selectionStarted&&setTimeout(function(){e._selectionChange()},1)},refresh:function(){var e=this;e.textarea&&(e.textarea.val(e.value()),e.wrapper.find("iframe").remove(),e._initializeContentElement(e),e.value(e.textarea.val()))},events:["select","change","execute","error","paste","keydown","keyup"],options:{name:"Editor",messages:_,formats:{},encoded:!0,domain:null,serialization:{entities:!0,scripts:!1},stylesheets:[],dialogOptions:{modal:!0,resizable:!1,draggable:!0,animation:!1},fontName:[{text:"Arial",value:"Arial,Helvetica,sans-serif"},{text:"Courier New",value:"'Courier New',Courier,monospace"},{text:"Georgia",value:"Georgia,serif"},{text:"Impact",value:"Impact,Charcoal,sans-serif"},{text:"Lucida Console",value:"'Lucida Console',Monaco,monospace"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"Times New Roman",value:"'Times New Roman',Times,serif"},{text:"Trebuchet MS",value:"'Trebuchet MS',Helvetica,sans-serif"},{text:"Verdana",value:"Verdana,Geneva,sans-serif"}],fontSize:[{text:"1 (8pt)",value:"xx-small"},{text:"2 (10pt)",value:"x-small"},{text:"3 (12pt)",value:"small"},{text:"4 (14pt)",value:"medium"},{text:"5 (18pt)",value:"large"},{text:"6 (24pt)",value:"x-large"},{text:"7 (36pt)",value:"xx-large"}],formatBlock:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],tools:[].concat.call(["formatting"],w.basic,w.alignment,w.lists,w.indenting,w.links,["insertImage"],w.tables)},destroy:function(){var t=this;l.fn.destroy.call(t),e(t.window).add(t.document).add(t.body).add(t.wrapper).add(t.element.closest("form")).off(f),e(document).off("mousedown",h(t._endTyping,t)).off("mouseup",h(t._mouseup,t)),t._focusOutside(),t.toolbar.destroy(),a.destroy(t.wrapper)},_focusOutside:function(){if(a.support.browser.msie&&this.textarea){var t=e("<input style='position:absolute;left:-10px;top:-10px;width:1px;height:1px;font-size:0;border:0;' />").appendTo(document.body).focus();t.blur().remove()}},state:function(e){var t,n,i=b.defaultTools[e],r=i&&(i.options.finder||i.finder),o=a.ui.editor.RangeUtils;return r?(t=this.getRange(),n=o.textNodes(t),!n.length&&t.collapsed&&(n=[t.startContainer]),r.getFormat?r.getFormat(n):r.isFormatted(n)):!1},value:function(e){var n=this.body,i=a.ui.editor,r=i.Serializer.domToXhtml(n,this.options.serialization);return e===t?r:(e!=r&&(i.Serializer.htmlToDom(e,n),d.msie||a.ui.editor.Dom.ensureTrailingBreaks(this.body),this.selectionRestorePoint=null,this.update(),this.toolbar.refreshTools()),t)},saveSelection:function(t){t=t||this.getRange();var n=t.commonAncestorContainer,i=this.body;(n==i||e.contains(i,n))&&(this.selectionRestorePoint=new a.ui.editor.RestorePoint(t))},_focusBody:function(){var e,t=this.body,n=this.wrapper&&this.wrapper.find("iframe")[0],i=this.document.documentElement,r=a._activeElement();r!=t&&r!=n&&(e=i.scrollTop,t.focus(),i.scrollTop=e)},restoreSelection:function(){this._focusBody(),this.selectionRestorePoint&&this.selectRange(this.selectionRestorePoint.toRange())},focus:function(){this.restoreSelection()},update:function(e){e=e||this.options.encoded?this.encodedValue():this.value(),this.textarea?this.textarea.val(e):this._oldValue=e},encodedValue:function(){return a.ui.editor.Dom.encode(this.value())},createRange:function(e){return a.ui.editor.RangeUtils.createRange(e||this.document)},getSelection:function(){return a.ui.editor.SelectionUtils.selectionFromDocument(this.document)},selectRange:function(e){this._focusBody();var t=this.getSelection();t.removeAllRanges(),t.addRange(e),this.saveSelection(e)},getRange:function(){var e=this.getSelection(),t=e&&e.rangeCount>0?e.getRangeAt(0):this.createRange(),n=this.document;return t.startContainer!=n||t.endContainer!=n||t.startOffset||t.endOffset||(t.setStart(this.body,0),t.collapse(!0)),t},selectedHtml:function(){return a.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents())},paste:function(e,t){this.clipboard.paste(e,t)},exec:function(e,n){var i,r,o,a=this,s=null;if(!e)throw Error("kendoEditor.exec(): `name` parameter cannot be empty");if(e=e.toLowerCase(),a.keyboard.isTypingInProgress()||a.restoreSelection(),r=a.toolbar.toolById(e),!r)for(o in b.defaultTools)if(o.toLowerCase()==e){r=b.defaultTools[o];break}if(r){if(i=a.getRange(),r.command&&(s=r.command(u({range:i},n))),a.trigger("execute",{name:e,command:s}),/^(undo|redo)$/i.test(e))a.undoRedoStack[e]();else if(s&&(s.managesUndoRedo||a.undoRedoStack.push(s),s.editor=a,s.exec(),s.async))return s.change=h(a._selectionChange,a),t;a._selectionChange()}}});b.defaultTools={undo:{options:{key:"Z",ctrl:!0}},redo:{options:{key:"Y",ctrl:!0}}},a.ui.plugin(b),n=s.extend({init:function(e){this.options=e},initialize:function(e,t){e.attr({unselectable:"on",title:t.title})},command:function(e){return new this.options.command(e)},update:e.noop}),n.exec=function(e,t,n){e.exec(t,{value:n})},i=n.extend({init:function(e){n.fn.init.call(this,e)},command:function(e){var t=this;return new a.ui.editor.FormatCommand(u(e,{formatter:t.options.formatter}))},update:function(e,t){var n=this.options.finder.isFormatted(t);e.toggleClass("k-state-selected",n),e.attr("aria-pressed",n)}}),v.registerTool("separator",new n({template:new m({template:v.separatorTemplate})})),r=d.msie&&9>d.version?"﻿":"",o='<br class="k-br" />',d.msie&&(10>d.version?o="﻿":11>d.version&&(o=" ")),u(a.ui,{editor:{ToolTemplate:m,EditorUtils:v,Tool:n,FormatTool:i,_bomFill:r,emptyElementContent:o}})}(window.jQuery),function(e){function t(e){var t,n,i={};for(t=0,n=e.length;n>t;t++)i[e[t]]=!0;return i}var n,i,r,o,a,s,l,c,d,u,h=window.kendo,p=e.map,f=e.extend,g=h.support.browser,m="style",v="float",_="cssFloat",y="styleFloat",w="class",b="k-marker",k=t("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed".split(",")),x="div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption".split(","),C=x.concat(["ul","ol","li"]),S=t(C),T="span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby".split(","),D=t(T),A=t("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected".split(",")),E=function(e){1==e.nodeType&&e.normalize()};g.msie&&g.version>=8&&(E=function(e){if(1==e.nodeType&&e.firstChild)for(var t=e.firstChild,n=t;;){if(n=n.nextSibling,!n)break;3==n.nodeType&&3==t.nodeType&&(n.nodeValue=t.nodeValue+n.nodeValue,u.remove(t)),t=n}}),n=/^\s+$/,i=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,r=/\ufeff/g,o=/^(\s+|\ufeff)$/,s="color,padding-left,padding-right,padding-top,padding-bottom,background-color,background-attachment,background-image,background-position,background-repeat,border-top-style,border-top-width,border-top-color,border-bottom-style,border-bottom-width,border-bottom-color,border-left-style,border-left-width,border-left-color,border-right-style,border-right-width,border-right-color,font-family,font-size,font-style,font-variant,font-weight,line-height".split(","),l=/[<>\&]/g,c=/[\u00A0-\u2666<>\&]/g,d={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",402:"fnof",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",978:"upsih",982:"piv",8226:"bull",8230:"hellip",8242:"prime",8243:"Prime",8254:"oline",8260:"frasl",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"},u={block:S,inline:D,findNodeIndex:function(e,t){var n=0;if(!e)return-1;for(;;){if(e=e.previousSibling,!e)break;t&&3==e.nodeType||n++}return n},isDataNode:function(e){return e&&null!==e.nodeValue&&null!==e.data},isAncestorOf:function(t,n){try{return!u.isDataNode(t)&&(e.contains(t,u.isDataNode(n)?n.parentNode:n)||n.parentNode==t)}catch(i){return!1}},isAncestorOrSelf:function(e,t){return u.isAncestorOf(e,t)||e==t},findClosestAncestor:function(e,t){if(u.isAncestorOf(e,t))for(;t&&t.parentNode!=e;)t=t.parentNode;return t},getNodeLength:function(e){return u.isDataNode(e)?e.length:e.childNodes.length},splitDataNode:function(e,t){for(var n=e.cloneNode(!1),i="",r=e;r.nextSibling&&3==r.nextSibling.nodeType&&r.nextSibling.nodeValue;)i+=r.nextSibling.nodeValue,r=r.nextSibling;e.deleteData(t,e.length),n.deleteData(0,t),n.nodeValue+=i,u.insertAfter(n,e)},attrEquals:function(e,t){var n,i;for(n in t)if(i=e[n],n==v&&(i=e[h.support.cssFloat?_:y]),"object"==typeof i){if(!u.attrEquals(i,t[n]))return!1}else if(i!=t[n])return!1;return!0},blockParentOrBody:function(e){return u.parentOfType(e,C)||e.ownerDocument.body},blockParents:function(t){var n,i,r,o=[];for(n=0,i=t.length;i>n;n++)r=u.parentOfType(t[n],u.blockElements),r&&e.inArray(r,o)<0&&o.push(r);return o},windowFromDocument:function(e){return e.defaultView||e.parentWindow},normalize:E,blockElements:C,nonListBlockElements:x,inlineElements:T,empty:k,fillAttrs:A,toHex:function(e){var t=i.exec(e);return t?"#"+p(t.slice(1),function(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}).join(""):e},encode:function(e,t){var n=!t||t.entities?c:l;return e.replace(n,function(e){var t=e.charCodeAt(0),n=d[t];return n?"&"+n+";":e})},stripBom:function(e){return(e||"").replace(r,"")},insignificant:function(e){var t=e.attributes;return"k-marker"==e.className||u.is(e,"br")&&("k-br"==e.className||t._moz_dirty||t._moz_editor_bogus_node)},emptyNode:function(t){var n=e.grep(t.childNodes,function(e){return u.is(e,"br")?!1:u.insignificant(e)?!1:3==e.nodeType&&o.test(e.nodeValue)?!1:u.is(e,"p")&&u.emptyNode(e)?!1:!0});return!n.length},name:function(e){return e.nodeName.toLowerCase()},significantChildNodes:function(t){return e.grep(t.childNodes,function(e){return 3!=e.nodeType||!u.isWhitespace(e)})},lastTextNode:function(e){var t,n=null;if(3==e.nodeType)return e;for(t=e.lastChild;t;t=t.previousSibling)if(n=u.lastTextNode(t))return n;return n},is:function(e,t){return u.name(e)==t},isMarker:function(e){return e.className==b},isWhitespace:function(e){return n.test(e.nodeValue)},isBlock:function(e){return S[u.name(e)]},isEmpty:function(e){return k[u.name(e)]},isInline:function(e){return D[u.name(e)]},scrollContainer:function(e){var t=u.windowFromDocument(e),n=(t.contentWindow||t).document||t.ownerDocument||t;return n=h.support.browser.webkit||"BackCompat"==n.compatMode?n.body:n.documentElement},scrollTo:function(t){var n,i,r=e(u.isDataNode(t)?t.parentNode:t),o=u.windowFromDocument(t.ownerDocument),a=o.innerHeight,s=u.scrollContainer(t.ownerDocument);"br"==u.name(r[0])&&(r=r.parent()),n=r.offset().top,i=r[0].offsetHeight,i+n>s.scrollTop+a&&(s.scrollTop=i+n-a)},persistScrollTop:function(e){a=u.scrollContainer(e).scrollTop},restoreScrollTop:function(e){u.scrollContainer(e).scrollTop=a},insertAt:function(e,t,n){e.insertBefore(t,e.childNodes[n]||null)},insertBefore:function(e,t){return t.parentNode?t.parentNode.insertBefore(e,t):t},insertAfter:function(e,t){return t.parentNode.insertBefore(e,t.nextSibling)},remove:function(e){e.parentNode.removeChild(e)},removeTextSiblings:function(e){for(var t=e.parentNode;e.nextSibling&&3==e.nextSibling.nodeType;)t.removeChild(e.nextSibling);for(;e.previousSibling&&3==e.previousSibling.nodeType;)t.removeChild(e.previousSibling)},trim:function(e){var t,n;for(t=e.childNodes.length-1;t>=0;t--)n=e.childNodes[t],u.isDataNode(n)?(u.stripBom(n.nodeValue).length||u.remove(n),u.isWhitespace(n)&&u.insertBefore(n,e)):n.className!=b&&(u.trim(n),n.childNodes.length||u.isEmpty(n)||u.remove(n));return e},closest:function(e,t){for(;e&&u.name(e)!=t;)e=e.parentNode;return e},sibling:function(e,t){do e=e[t];while(e&&1!=e.nodeType);return e},next:function(e){return u.sibling(e,"nextSibling")},prev:function(e){return u.sibling(e,"previousSibling")},parentOfType:function(e,t){do e=e.parentNode;while(e&&!u.ofType(e,t));return e},ofType:function(t,n){return e.inArray(u.name(t),n)>=0},changeTag:function(e,t,n){var i,r,o,a,s,l=u.create(e.ownerDocument,t),c=e.attributes;if(!n)for(i=0,r=c.length;r>i;i++)s=c[i],s.specified&&(o=s.nodeName,a=s.nodeValue,o==w?l.className=a:o==m?l.style.cssText=e.style.cssText:l.setAttribute(o,a));for(;e.firstChild;)l.appendChild(e.firstChild);return u.insertBefore(l,e),u.remove(e),l},editableParent:function(e){for(;e&&(3==e.nodeType||"true"!==e.contentEditable);)e=e.parentNode;return e},wrap:function(e,t){return u.insertBefore(t,e),t.appendChild(e),t},unwrap:function(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)},create:function(e,t,n){return u.attr(e.createElement(t),n)},attr:function(e,t){t=f({},t),t&&m in t&&(u.style(e,t.style),delete t.style);for(var n in t)null===t[n]?(e.removeAttribute(n),delete t[n]):"className"==n&&(e[n]=t[n]);return f(e,t)},style:function(t,n){e(t).css(n||{})},unstyle:function(e,t){for(var n in t)n==v&&(n=h.support.cssFloat?_:y),e.style[n]="";""===e.style.cssText&&e.removeAttribute(m)},inlineStyle:function(t,n,i){var r,o=e(u.create(t.ownerDocument,n,i));return t.appendChild(o[0]),r=p(s,function(e){return g.msie&&"line-height"==e&&"1px"==o.css(e)?"line-height:1.5":e+":"+o.css(e)}).join(";"),o.remove(),r},getEffectiveBackground:function(e){var t=e.css("background-color");return t.indexOf("rgba(0, 0, 0, 0")<0&&"transparent"!==t?t:"html"===e[0].tagName.toLowerCase()?"Window":u.getEffectiveBackground(e.parent())},removeClass:function(t,n){var i,r,o=" "+t.className+" ",a=n.split(" ");for(i=0,r=a.length;r>i;i++)o=o.replace(" "+a[i]+" "," ");o=e.trim(o),o.length?t.className=o:t.removeAttribute(w)},commonAncestor:function(){var e,t,n,i,r,o=arguments.length,a=[],s=1/0,l=null;if(!o)return null;if(1==o)return arguments[0];for(e=0;o>e;e++){for(t=[],n=arguments[e];n;)t.push(n),n=n.parentNode;a.push(t.reverse()),s=Math.min(s,t.length)}if(1==o)return a[0][0];for(e=0;s>e;e++){for(i=a[0][e],r=1;o>r;r++)if(i!=a[r][e])return l;l=i}return l},closestSplittableParent:function(t){var n,i,r;return n=1==t.length?u.parentOfType(t[0],["ul","ol"]):u.commonAncestor.apply(null,t),n||(n=u.parentOfType(t[0],["p","td"])||t[0].ownerDocument.body),u.isInline(n)&&(n=u.blockParentOrBody(n)),i=p(t,u.editableParent),r=u.commonAncestor(i)[0],e.contains(n,r)&&(n=r),n},closestEditable:function(t,n){var i=u.parentOfType(t,n),r=u.editableParent(t);return i&&r&&e.contains(i,r)?i=r:!i&&r&&(i=r),i},closestEditableOfType:function(e,t){var n=u.closestEditable(e,t);return n&&u.ofType(n,t)?n:void 0},filter:function(e,t,n){for(var i,r=0,o=t.length,a=[];o>r;r++)i=u.name(t[r]),(!n&&i==e||n&&i!=e)&&a.push(t[r]);return a},ensureTrailingBreaks:function(t){var n=e(t).find("p,td,th"),i=n.length,r=0;
if(i)for(;i>r;r++)u.ensureTrailingBreak(n[r]);else u.ensureTrailingBreak(t)},ensureTrailingBreak:function(e){var t,n=e.lastChild,i=n&&u.name(n);(!i||"br"!=i&&"img"!=i||"br"==i&&"k-br"!=n.className)&&(t=e.ownerDocument.createElement("br"),t.className="k-br",e.appendChild(t))}},h.ui.editor.Dom=u}(window.kendo.jQuery),function(e,t){var n,i,r=window.kendo,o=r.ui.editor,a=o.Dom,s=e.extend,l="xx-small,x-small,small,medium,large,x-large,xx-large".split(","),c=/"/g,d=/<br[^>]*>/i,u=/^\d+(\.\d*)?(px)?$/i,h=/<p><\/p>/i,p=/([\w|\-]+)\s*:\s*([^;]+);?/i,f=/^sizzle-\d+/i,g=/^k-script-/i,m=/\s*onerror\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/i,v=document.createElement("div");v.innerHTML=" <hr>",n=3===v.firstChild.nodeType,v=null,i={toEditableHtml:function(e){var t='<br class="k-br">';return e=e||"",e.replace(/<!\[CDATA\[(.*)?\]\]>/g,"<!--[CDATA[$1]]-->").replace(/<script([^>]*)>(.*)?<\/script>/gi,"<telerik:script$1>$2</telerik:script>").replace(/<img([^>]*)>/gi,function(e){return e.replace(m,"")}).replace(/(<\/?img[^>]*>)[\r\n\v\f\t ]+/gi,"$1").replace(/^<(table|blockquote)/i,t+"<$1").replace(/<\/(table|blockquote)>$/i,"</$1>"+t)},_fillEmptyElements:function(t){e(t).find("p").each(function(){var t,n=e(this);if(/^\s*$/g.test(n.text())&&!n.find("img,input").length){for(t=this;t.firstChild&&3!=t.firstChild.nodeType;)t=t.firstChild;1!=t.nodeType||a.empty[a.name(t)]||(t.innerHTML=r.ui.editor.emptyElementContent)}})},_removeSystemElements:function(t){e(".k-paste-container",t).remove()},_resetOrderedLists:function(e){var t,n,i,r=e.getElementsByTagName("ol");for(t=0;r.length>t;t++)n=r[t],i=n.getAttribute("start"),n.setAttribute("start",1),i?n.setAttribute("start",i):n.removeAttribute(i)},_preventScriptExecution:function(t){e(t).find("*").each(function(){var e,t,n,i,r=this.attributes;for(t=0,n=r.length;n>t;t++)e=r[t],i=e.nodeName,e.specified&&/^on/i.test(i)&&(this.removeAttribute(i),this.setAttribute("k-script-"+i,e.nodeValue))})},htmlToDom:function(t,n){var o,s,l=r.support.browser,c=l.msie,d=c&&9>l.version;return t=i.toEditableHtml(t),d&&(t="<br/>"+t,o="originalsrc",s="originalhref",t=t.replace(/href\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,s+'="$1"'),t=t.replace(/src\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,o+'="$1"')),n.innerHTML=t,d?(a.remove(n.firstChild),e(n).find("telerik\\:script,script,link,img,a").each(function(){var e=this;e[s]&&(e.setAttribute("href",e[s]),e.removeAttribute(s)),e[o]&&(e.setAttribute("src",e[o]),e.removeAttribute(o))})):c&&(a.normalize(n),i._resetOrderedLists(n)),i._preventScriptExecution(n),i._fillEmptyElements(n),i._removeSystemElements(n),e("table",n).addClass("k-table"),n},domToXhtml:function(i,o){function s(t){var n,i,r,o,s=e.trim,l=s(t).split(";"),d=l.length;for(n=0,d=l.length;d>n;n++)l[n].length&&(i=p.exec(l[n]),i&&(r=s(i[1].toLowerCase()),o=s(i[2]),"font-size-adjust"!=r&&"font-stretch"!=r&&(r.indexOf("color")>=0?o=a.toHex(o):r.indexOf("font")>=0?o=o.replace(c,"'"):/\burl\(/g.test(o)&&(o=o.replace(c,"")),b.push(r),b.push(":"),b.push(o),b.push(";"))))}function m(n){var i,l,c,d,h,p,m,v,_,y=[],w=n.attributes;for(a.is(n,"img")&&(m=n.style.width,v=n.style.height,_=e(n),m&&u.test(m)&&(_.attr("width",parseInt(m,10)),a.unstyle(n,{width:t})),v&&u.test(v)&&(_.attr("height",parseInt(v,10)),a.unstyle(n,{height:t}))),l=0,c=w.length;c>l;l++)i=w[l],d=i.nodeName,h=i.nodeValue,p=i.specified,"value"==d&&"value"in n&&n.value?p=!0:"type"==d&&"text"==h?p=!0:"class"!=d||h?f.test(d)?p=!1:"complete"==d?p=!1:"altHtml"==d?p=!1:"start"==d&&(a.is(n,"ul")||a.is(n,"ol"))?p=!1:d.indexOf("_moz")>=0?p=!1:g.test(d)&&(p=!!o.scripts):p=!1,p&&y.push(i);if(y.length)for(y.sort(function(e,t){return e.nodeName>t.nodeName?1:t.nodeName>e.nodeName?-1:0}),l=0,c=y.length;c>l;l++)i=y[l],d=i.nodeName,h=i.nodeValue,("class"!=d||"k-table"!=h)&&(d=d.replace(g,""),b.push(" "),b.push(d),b.push('="'),"style"==d?s(h||n.style.cssText):b.push("src"==d||"href"==d?r.htmlEncode(n.getAttribute(d,2)):a.fillAttrs[d]?d:h),b.push('"'))}function v(e,t,n){for(var i=e.firstChild;i;i=i.nextSibling)y(i,t,n)}function _(e){return e.nodeValue.replace(/\ufeff/g,"")}function y(e,i,r){var s,l,c,d,u,h=e.nodeType;if(1==h){if(s=a.name(e),!s||a.insignificant(e))return;if(a.isInline(e)&&1==e.childNodes.length&&3==e.firstChild.nodeType&&!_(e.firstChild))return;if(!o.scripts&&"telerik:script"==s)return;if(l=k[s])return l.start(e),v(e,!1,l.skipEncoding),l.end(e),t;b.push("<"),b.push(s),m(e),a.empty[s]?b.push(" />"):(b.push(">"),v(e,i||a.is(e,"pre")),b.push("</"),b.push(s),b.push(">"))}else 3==h?(d=_(e),!i&&n&&(c=e.parentNode,u=e.previousSibling,u||(u=(a.isInline(c)?c:e).previousSibling),(!u||""===u.innerHTML||a.isBlock(u))&&(d=d.replace(/^[\r\n\v\f\t ]+/,"")),d=d.replace(/ +/," ")),b.push(r?d:a.encode(d,o))):4==h?(b.push("<![CDATA["),b.push(e.data),b.push("]]>")):8==h&&(e.data.indexOf("[CDATA[")<0?(b.push("<!--"),b.push(e.data),b.push("-->")):(b.push("<!"),b.push(e.data),b.push(">")))}function w(e){var t=e.childNodes.length,n=t&&3==e.firstChild.nodeType;return n&&(1==t||2==t&&a.insignificant(e.lastChild))}var b=[],k={"telerik:script":{start:function(e){b.push("<script"),m(e),b.push(">")},end:function(){b.push("</script>")},skipEncoding:!0},b:{start:function(){b.push("<strong>")},end:function(){b.push("</strong>")}},i:{start:function(){b.push("<em>")},end:function(){b.push("</em>")}},u:{start:function(){b.push('<span style="text-decoration:underline;">')},end:function(){b.push("</span>")}},iframe:{start:function(e){b.push("<iframe"),m(e),b.push(">")},end:function(){b.push("</iframe>")}},font:{start:function(e){var t,n,i;b.push('<span style="'),t=e.getAttribute("color"),n=l[e.getAttribute("size")],i=e.getAttribute("face"),t&&(b.push("color:"),b.push(a.toHex(t)),b.push(";")),i&&(b.push("font-face:"),b.push(i),b.push(";")),n&&(b.push("font-size:"),b.push(n),b.push(";")),b.push('">')},end:function(){b.push("</span>")}}};return o=o||{},w(i)?a.encode(_(i.firstChild).replace(/[\r\n\v\f\t ]+/," "),o):(v(i),b=b.join(""),""===b.replace(d,"").replace(h,"")?"":b)}},s(o,{Serializer:i})}(window.kendo.jQuery),function(e){function t(e,t,n,i){var r,o,a,s;if(e==t)return i-n;for(r=t;r&&r.parentNode!=e;)r=r.parentNode;if(r)return p(r)-n;for(r=e;r&&r.parentNode!=t;)r=r.parentNode;if(r)return i-p(r)-1;for(o=h.commonAncestor(e,t),a=e;a&&a.parentNode!=o;)a=a.parentNode;for(a||(a=o),s=t;s&&s.parentNode!=o;)s=s.parentNode;return s||(s=o),a==s?0:p(s)-p(a)}function n(e,n){function i(e){try{return t(e.startContainer,e.endContainer,e.startOffset,e.endOffset)<0}catch(n){return!0}}i(e)&&(n?(e.commonAncestorContainer=e.endContainer=e.startContainer,e.endOffset=e.startOffset):(e.commonAncestorContainer=e.startContainer=e.endContainer,e.startOffset=e.endOffset),e.collapsed=!0)}function i(e){e.collapsed=e.startContainer==e.endContainer&&e.startOffset==e.endOffset;for(var t=e.startContainer;t&&t!=e.endContainer&&!h.isAncestorOf(t,e.endContainer);)t=t.parentNode;e.commonAncestorContainer=t}function r(e){var t=e.duplicate(),n=e.duplicate();return t.collapse(!0),n.collapse(!1),h.commonAncestor(e.parentElement(),t.parentElement(),n.parentElement())}function o(e,t,n){var i,r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],a=0,s=f(r),l=s?r:r.childNodes[o]||null,c=s?r.parentNode:r,d=t.ownerDocument,u=d.body.createTextRange();(3==r.nodeType||4==r.nodeType)&&(a=o),c||(c=d.body),"img"==c.nodeName.toLowerCase()?(u.moveToElementText(c),u.collapse(!1),e.setEndPoint(n?"StartToStart":"EndToStart",u)):(i=c.insertBefore(h.create(d,"a"),l),u.moveToElementText(i),h.remove(i),u[n?"moveStart":"moveEnd"]("character",a),u.collapse(!1),e.setEndPoint(n?"StartToStart":"EndToStart",u))}function a(e,t,n,i){var r,o,a,s,l,c,d,u=h.create(t.ownerDocument,"a"),g=e.duplicate(),m=i?"StartToStart":"StartToEnd",v=!1;u.innerHTML="﻿",g.collapse(i),o=g.parentElement(),h.isAncestorOrSelf(n,o)||(o=n);do v?o.insertBefore(u,u.previousSibling):(o.appendChild(u),v=!0),g.moveToElementText(u);while((r=g.compareEndPoints(m,e))>0&&u.previousSibling);a=u.nextSibling,-1==r&&f(a)?(g.setEndPoint(i?"EndToStart":"EndToEnd",e),h.remove(u),c=[a,g.text.length]):(s=!i&&u.previousSibling,l=i&&u.nextSibling,f(l)?c=[l,0]:f(s)?c=[s,s.length]:(d=p(u),c=o.nextSibling&&d==o.childNodes.length-1?[o.nextSibling,0]:[o,d]),h.remove(u)),t[i?"setStart":"setEnd"].apply(t,c)}var s=window.kendo,l=s.Class,c=e.extend,d=s.ui.editor,u=s.support.browser,h=d.Dom,p=h.findNodeIndex,f=h.isDataNode,g=h.findClosestAncestor,m=h.getNodeLength,v=h.normalize,_={selectionFromWindow:function(e){return"getSelection"in e?e.getSelection():new b(e.document)},selectionFromRange:function(e){var t=T.documentFromRange(e);return _.selectionFromDocument(t)},selectionFromDocument:function(e){return _.selectionFromWindow(h.windowFromDocument(e))}},y=l.extend({init:function(t){e.extend(this,{ownerDocument:t,startContainer:t,endContainer:t,commonAncestorContainer:t,startOffset:0,endOffset:0,collapsed:!0})},setStart:function(e,t){this.startContainer=e,this.startOffset=t,i(this),n(this,!0)},setEnd:function(e,t){this.endContainer=e,this.endOffset=t,i(this),n(this,!1)},setStartBefore:function(e){this.setStart(e.parentNode,p(e))},setStartAfter:function(e){this.setStart(e.parentNode,p(e)+1)},setEndBefore:function(e){this.setEnd(e.parentNode,p(e))},setEndAfter:function(e){this.setEnd(e.parentNode,p(e)+1)},selectNode:function(e){this.setStartBefore(e),this.setEndAfter(e)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e[1===e.nodeType?"childNodes":"nodeValue"].length)},collapse:function(e){var t=this;e?t.setEnd(t.startContainer,t.startOffset):t.setStart(t.endContainer,t.endOffset)},deleteContents:function(){var e=this,t=e.cloneRange();e.startContainer!=e.commonAncestorContainer&&e.setStartAfter(g(e.commonAncestorContainer,e.startContainer)),e.collapse(!0),function n(e){for(;e.next();)e.hasPartialSubtree()?n(e.getSubtreeIterator()):e.remove()}(new w(t))},cloneContents:function(){var e=T.documentFromRange(this);return function t(n){for(var i,r=e.createDocumentFragment();i=n.next();)i=i.cloneNode(!n.hasPartialSubtree()),n.hasPartialSubtree()&&i.appendChild(t(n.getSubtreeIterator())),r.appendChild(i);return r}(new w(this))},extractContents:function(){var e,t=this,n=t.cloneRange();return t.startContainer!=t.commonAncestorContainer&&t.setStartAfter(g(t.commonAncestorContainer,t.startContainer)),t.collapse(!0),e=T.documentFromRange(t),function i(n){for(var r,o=e.createDocumentFragment();r=n.next();)n.hasPartialSubtree()?(r=r.cloneNode(!1),r.appendChild(i(n.getSubtreeIterator()))):n.remove(t.originalRange),o.appendChild(r);return o}(new w(n))},insertNode:function(e){var t=this;f(t.startContainer)?(t.startOffset!=t.startContainer.nodeValue.length&&h.splitDataNode(t.startContainer,t.startOffset),h.insertAfter(e,t.startContainer)):h.insertAt(t.startContainer,e,t.startOffset),t.setStart(t.startContainer,t.startOffset)},cloneRange:function(){return e.extend(new y(this.ownerDocument),{startContainer:this.startContainer,endContainer:this.endContainer,commonAncestorContainer:this.commonAncestorContainer,startOffset:this.startOffset,endOffset:this.endOffset,collapsed:this.collapsed,originalRange:this})},toString:function(){var e=this.startContainer.nodeName,t=this.endContainer.nodeName;return("#text"==e?this.startContainer.nodeValue:e)+"("+this.startOffset+") : "+("#text"==t?this.endContainer.nodeValue:t)+"("+this.endOffset+")"}}),w=l.extend({init:function(t){if(e.extend(this,{range:t,_current:null,_next:null,_end:null}),!t.collapsed){var n=t.commonAncestorContainer;this._next=t.startContainer!=n||f(t.startContainer)?g(n,t.startContainer):t.startContainer.childNodes[t.startOffset],this._end=t.endContainer!=n||f(t.endContainer)?g(n,t.endContainer).nextSibling:t.endContainer.childNodes[t.endOffset]}},hasNext:function(){return!!this._next},next:function(){var e=this,t=e._current=e._next;return e._next=e._current&&e._current.nextSibling!=e._end?e._current.nextSibling:null,f(e._current)&&(e.range.endContainer==e._current&&(t=t.cloneNode(!0),t.deleteData(e.range.endOffset,t.length-e.range.endOffset)),e.range.startContainer==e._current&&(t=t.cloneNode(!0),t.deleteData(0,e.range.startOffset))),t},traverse:function(e){function t(){return i._current=i._next,i._next=i._current&&i._current.nextSibling!=i._end?i._current.nextSibling:null,i._current}for(var n,i=this;n=t();)i.hasPartialSubtree()?i.getSubtreeIterator().traverse(e):e(n);return n},remove:function(e){var t,n,i,r,o,a=this,s=a.range.startContainer==a._current,l=a.range.endContainer==a._current;f(a._current)&&(s||l)?(t=s?a.range.startOffset:0,n=l?a.range.endOffset:a._current.length,i=n-t,e&&(s||l)&&(a._current==e.startContainer&&e.startOffset>=t&&(e.startOffset-=i),a._current==e.endContainer&&e.endOffset>=n&&(e.endOffset-=i)),a._current.deleteData(t,i)):(r=a._current.parentNode,!e||a.range.startContainer!=r&&a.range.endContainer!=r||(o=p(a._current),r==e.startContainer&&e.startOffset>=o&&(e.startOffset-=1),r==e.endContainer&&e.endOffset>o&&(e.endOffset-=1)),h.remove(a._current))},hasPartialSubtree:function(){return!f(this._current)&&(h.isAncestorOrSelf(this._current,this.range.startContainer)||h.isAncestorOrSelf(this._current,this.range.endContainer))},getSubtreeIterator:function(){var e=this,t=e.range.cloneRange();return t.selectNodeContents(e._current),h.isAncestorOrSelf(e._current,e.range.startContainer)&&t.setStart(e.range.startContainer,e.range.startOffset),h.isAncestorOrSelf(e._current,e.range.endContainer)&&t.setEnd(e.range.endContainer,e.range.endOffset),new w(t)}}),b=l.extend({init:function(e){this.ownerDocument=e,this.rangeCount=1},addRange:function(e){var t=this.ownerDocument.body.createTextRange();o(t,e,!1),o(t,e,!0),t.select()},removeAllRanges:function(){var e=this.ownerDocument.selection;"None"!=e.type&&e.empty()},getRangeAt:function(){var e,t,n,i,o,s,l,c,d=new y(this.ownerDocument),u=this.ownerDocument.selection;try{if(e=u.createRange(),t=e.item?e.item(0):e.parentElement(),t.ownerDocument!=this.ownerDocument)return d}catch(h){return d}if("Control"==u.type)d.selectNode(e.item(0));else if(n=r(e),a(e,d,n,!0),a(e,d,n,!1),9==d.startContainer.nodeType&&d.setStart(d.endContainer,d.startOffset),9==d.endContainer.nodeType&&d.setEnd(d.startContainer,d.endOffset),0===e.compareEndPoints("StartToEnd",e)&&d.collapse(!1),i=d.startContainer,o=d.endContainer,s=this.ownerDocument.body,!(d.collapsed||0!==d.startOffset||d.endOffset!=m(d.endContainer)||i==o&&f(i)&&i.parentNode==s)){for(l=!1,c=!1;0===p(i)&&i==i.parentNode.firstChild&&i!=s;)i=i.parentNode,l=!0;for(;p(o)==m(o.parentNode)-1&&o==o.parentNode.lastChild&&o!=s;)o=o.parentNode,c=!0;i==s&&o==s&&l&&c&&(d.setStart(i,0),d.setEnd(o,m(s)))}return d}}),k=l.extend({init:function(e){this.enumerate=function(){function t(e){if(h.is(e,"img")||3==e.nodeType&&(!h.isWhitespace(e)||"﻿"==e.nodeValue))n.push(e);else for(e=e.firstChild;e;)t(e),e=e.nextSibling}var n=[];return new w(e).traverse(t),n}}}),x=l.extend({init:function(e,t){var n=this;n.range=e,n.rootNode=T.documentFromRange(e),n.body=t||n.getEditable(e),"body"!=h.name(n.body)&&(n.rootNode=n.body),n.html=n.body.innerHTML,n.startContainer=n.nodeToPath(e.startContainer),n.endContainer=n.nodeToPath(e.endContainer),n.startOffset=n.offset(e.startContainer,e.startOffset),n.endOffset=n.offset(e.endContainer,e.endOffset)},index:function(e){for(var t,n=0,i=e.nodeType;e=e.previousSibling;)t=e.nodeType,(3!=t||i!=t)&&n++,i=t;return n},getEditable:function(e){for(var t=e.commonAncestorContainer;t&&(3==t.nodeType||t.attributes&&!t.attributes.contentEditable);)t=t.parentNode;return t},restoreHtml:function(){this.body.innerHTML=this.html},offset:function(e,t){if(3==e.nodeType)for(;(e=e.previousSibling)&&3==e.nodeType;)t+=e.nodeValue.length;return t},nodeToPath:function(e){for(var t=[];e!=this.rootNode;)t.push(this.index(e)),e=e.parentNode;return t},toRangePoint:function(e,t,n,i){for(var r=this.rootNode,o=n.length,a=i;o--;)r=r.childNodes[n[o]];for(;r&&3==r.nodeType&&a>r.nodeValue.length;)a-=r.nodeValue.length,r=r.nextSibling;r&&a>=0&&e[t?"setStart":"setEnd"](r,a)},toRange:function(){var e=this,t=e.range.cloneRange();return e.toRangePoint(t,!0,e.startContainer,e.startOffset),e.toRangePoint(t,!1,e.endContainer,e.endOffset),t}}),C=l.extend({init:function(){this.caret=null},addCaret:function(e){var t=this;return t.caret=h.create(T.documentFromRange(e),"span",{className:"k-marker"}),e.insertNode(t.caret),e.selectNode(t.caret),t.caret},removeCaret:function(e){var t,n,i,r,o=this,a=o.caret.previousSibling,s=0;a&&(s=f(a)?a.nodeValue.length:p(a)),t=o.caret.parentNode,n=a?p(a):0,h.remove(o.caret),v(t),i=t.childNodes[n],f(i)?e.setStart(i,s):i?(r=h.lastTextNode(i),r?e.setStart(r,r.nodeValue.length):e[a?"setStartAfter":"setStartBefore"](i)):(u.msie||t.innerHTML||(t.innerHTML='<br _moz_dirty="" />'),e.selectNodeContents(t)),e.collapse(!0)},add:function(e,t){var n,i,r=this,o=e.collapsed&&!T.isExpandable(e),a=T.documentFromRange(e);return t&&e.collapsed&&(r.addCaret(e),e=T.expand(e)),n=e.cloneRange(),n.collapse(!1),r.end=h.create(a,"span",{className:"k-marker"}),n.insertNode(r.end),n=e.cloneRange(),n.collapse(!0),r.start=r.end.cloneNode(!0),n.insertNode(r.start),r._removeDeadMarkers(r.start,r.end),o&&(i=a.createTextNode("﻿"),h.insertAfter(i.cloneNode(),r.start),h.insertBefore(i,r.end)),e.setStartBefore(r.start),e.setEndAfter(r.end),v(e.commonAncestorContainer),e},_removeDeadMarkers:function(e,t){e.previousSibling&&"﻿"==e.previousSibling.nodeValue&&h.remove(e.previousSibling),t.nextSibling&&"﻿"==t.nextSibling.nodeValue&&h.remove(t.nextSibling)},remove:function(e){var t,n,i,r,o,a,s,l,c,d,u,g,m,_=this,y=_.start,w=_.end;for(v(e.commonAncestorContainer);!y.nextSibling&&y.parentNode;)y=y.parentNode;for(;!w.previousSibling&&w.parentNode;)w=w.parentNode;if(t=y.previousSibling&&3==y.previousSibling.nodeType&&y.nextSibling&&3==y.nextSibling.nodeType,n=w.previousSibling&&3==w.previousSibling.nodeType&&w.nextSibling&&3==w.nextSibling.nodeType,i=t&&n,y=y.nextSibling,w=w.previousSibling,r=!1,o=!1,y==_.end&&(o=!!_.start.previousSibling,y=w=_.start.previousSibling||_.end.nextSibling,r=!0),h.remove(_.start),h.remove(_.end),!y||!w)return e.selectNodeContents(e.commonAncestorContainer),void e.collapse(!0);if(a=r?f(y)?y.nodeValue.length:y.childNodes.length:0,s=f(w)?w.nodeValue.length:w.childNodes.length,3==y.nodeType)for(;y.previousSibling&&3==y.previousSibling.nodeType;)y=y.previousSibling,a+=y.nodeValue.length;if(3==w.nodeType)for(;w.previousSibling&&3==w.previousSibling.nodeType;)w=w.previousSibling,s+=w.nodeValue.length;for(l=p(y),c=y.parentNode,d=p(w),u=w.parentNode,g=y;g.previousSibling;g=g.previousSibling)3==g.nodeType&&3==g.previousSibling.nodeType&&l--;for(m=w;m.previousSibling;m=m.previousSibling)3==m.nodeType&&3==m.previousSibling.nodeType&&d--;v(c),3==y.nodeType&&(y=c.childNodes[l]),v(u),3==w.nodeType&&(w=u.childNodes[d]),r?(3==y.nodeType?e.setStart(y,a):e[o?"setStartAfter":"setStartBefore"](y),e.collapse(!0)):(3==y.nodeType?e.setStart(y,a):e.setStartBefore(y),3==w.nodeType?e.setEnd(w,s):e.setEndAfter(w)),_.caret&&_.removeCaret(e)}}),S=/[\u0009-\u000d]|\u0020|\u00a0|\ufeff|\.|,|;|:|!|\(|\)|\?/,T={nodes:function(e){var t=T.textNodes(e);return t.length||(e.selectNodeContents(e.commonAncestorContainer),t=T.textNodes(e),t.length||(t=h.significantChildNodes(e.commonAncestorContainer))),t},textNodes:function(e){return new k(e).enumerate()},documentFromRange:function(e){var t=e.startContainer;return 9==t.nodeType?t:t.ownerDocument},createRange:function(e){return u.msie&&9>u.version?new y(e):e.createRange()},selectRange:function(e){var t,n=T.image(e);n&&(e.setStartAfter(n),e.setEndAfter(n)),t=_.selectionFromRange(e),t.removeAllRanges(),t.addRange(e)},stringify:function(e){return s.format("{0}:{1} - {2}:{3}",h.name(e.startContainer),e.startOffset,h.name(e.endContainer),e.endOffset)},split:function(e,t,n){function i(i){var r,o=e.cloneRange();o.collapse(i),o[i?"setStartBefore":"setEndAfter"](t),r=o.extractContents(),n&&(r=h.trim(r)),h[i?"insertBefore":"insertAfter"](r,t)}i(!0),i(!1)},mapAll:function(t,n){var i=[];return new w(t).traverse(function(t){var r=n(t);r&&e.inArray(r,i)<0&&i.push(r)}),i},getAll:function(e,t){var n=t;return"string"==typeof t&&(t=function(e){return h.is(e,n)}),T.mapAll(e,function(e){return t(e)?e:void 0})},getMarkers:function(e){return T.getAll(e,function(e){return"k-marker"==e.className})},image:function(e){var t=T.getAll(e,"img");return 1==t.length?t[0]:void 0},wrapSelectedElements:function(e){function t(e,t){var n,i=h.getNodeLength(t);if(e==i)return!0;for(n=e;i>n;n++)if(!h.insignificant(t.childNodes[n]))return!1;return!0}for(var n=h.editableParent(e.startContainer),i=h.editableParent(e.endContainer);0===e.startOffset&&e.startContainer!=n;)e.setStart(e.startContainer.parentNode,h.findNodeIndex(e.startContainer));for(;t(e.endOffset,e.endContainer)&&e.endContainer!=i;)e.setEnd(e.endContainer.parentNode,h.findNodeIndex(e.endContainer)+1);return e},expand:function(e){var t,n,i,r,o=e.cloneRange(),a=o.startContainer.childNodes[0===o.startOffset?0:o.startOffset-1],s=o.endContainer.childNodes[o.endOffset];return f(a)&&f(s)?(t=a.nodeValue,n=s.nodeValue,t&&n?(i=t.split("").reverse().join("").search(S),r=n.search(S),i&&r?(r=-1==r?n.length:r,i=-1==i?0:t.length-i,o.setStart(a,i),o.setEnd(s,r),o):o):o):o},isExpandable:function(e){var t,n,i,r,o,a,s=e.startContainer,l=T.documentFromRange(e);return s==l||s==l.body?!1:(t=e.cloneRange(),(n=s.nodeValue)?(i=n.substring(0,t.startOffset),r=n.substring(t.startOffset),o=0,a=0,i&&(o=i.split("").reverse().join("").search(S)),r&&(a=r.search(S)),o&&a):!1)}};c(d,{SelectionUtils:_,W3CRange:y,RangeIterator:w,W3CSelection:b,RangeEnumerator:k,RestorePoint:x,Marker:C,RangeUtils:T})}(window.kendo.jQuery),function(e){function t(e,t){var n=e.selectionRestorePoint=new d(e.getRange()),i=new f(t,n);return i.editor=e,e.undoRedoStack.push(i),n}var n=window.kendo,i=n.Class,r=n.ui.editor,o=r.EditorUtils,a=o.registerTool,s=r.Dom,l=r.Tool,c=r.ToolTemplate,d=r.RestorePoint,u=r.Marker,h=e.extend,p=i.extend({init:function(e){this.options=e,this.restorePoint=new d(e.range),this.marker=new u,this.formatter=e.formatter},getRange:function(){return this.restorePoint.toRange()},lockRange:function(e){return this.marker.add(this.getRange(),e)},releaseRange:function(e){this.marker.remove(e),this.editor.selectRange(e)},undo:function(){var e=this.restorePoint;e.restoreHtml(),this.editor.selectRange(e.toRange())},redo:function(){this.exec()},createDialog:function(t,i){var r=this.editor;return e(t).appendTo(document.body).kendoWindow(h({},r.options.dialogOptions,i)).closest(".k-window").toggleClass("k-rtl",n.support.isRtl(r.wrapper)).end()},exec:function(){var e=this.lockRange(!0);this.formatter.editor=this.editor,this.formatter.toggle(e),this.releaseRange(e)}}),f=i.extend({init:function(e,t){this.body=e.body,this.startRestorePoint=e,this.endRestorePoint=t},redo:function(){this.body.innerHTML=this.endRestorePoint.html,this.editor.selectRange(this.endRestorePoint.toRange())},undo:function(){this.body.innerHTML=this.startRestorePoint.html,this.editor.selectRange(this.startRestorePoint.toRange())}}),g=p.extend({init:function(e){p.fn.init.call(this,e),this.managesUndoRedo=!0},exec:function(){var e,t=this.editor,n=this.options,i=n.range,r=t.body,o=new d(i,r),a=n.html||n.value||"";t.selectRange(i),t.clipboard.paste(a,n),n.postProcess&&n.postProcess(t,t.getRange()),e=new f(o,new d(t.getRange(),r)),e.editor=t,t.undoRedoStack.push(e),t.focus()}}),m=l.extend({initialize:function(e,t){var n=t.editor,i=this.options,o=i.items?i.items:n.options.insertHtml;new r.SelectBox(e,{dataSource:o,dataTextField:"text",dataValueField:"value",change:function(){l.exec(n,"insertHtml",this.value())},title:n.options.messages.insertHtml,highlightFirst:!1})},command:function(e){return new g(e)},update:function(e){var t=e.data("kendoSelectBox")||e.find("select").data("kendoSelectBox");t.close(),t.value(t.options.title)}}),v=i.extend({init:function(){this.stack=[],this.currentCommandIndex=-1},push:function(e){this.stack=this.stack.slice(0,this.currentCommandIndex+1),this.currentCommandIndex=this.stack.push(e)-1},undo:function(){this.canUndo()&&this.stack[this.currentCommandIndex--].undo()},redo:function(){this.canRedo()&&this.stack[++this.currentCommandIndex].redo()},canUndo:function(){return this.currentCommandIndex>=0},canRedo:function(){return this.currentCommandIndex!=this.stack.length-1}}),_=i.extend({init:function(e){this.editor=e},keydown:function(n){var i,r=this,o=r.editor,a=o.keyboard,s=a.isTypingKey(n),l=h(e.Event(),n);return r.editor.trigger("keydown",l),l.isDefaultPrevented()?(n.preventDefault(),!0):l.isDefaultPrevented()||!s||a.isTypingInProgress()?!1:(i=o.getRange(),r.startRestorePoint=new d(i),a.startTyping(function(){r.endRestorePoint=t(o,r.startRestorePoint)}),!0)},keyup:function(e){var t=this.editor.keyboard;return this.editor.trigger("keyup",e),t.isTypingInProgress()?(t.endTyping(),!0):!1}}),y=i.extend({init:function(e){this.editor=e},keydown:function(e){var i,r,o,a,l;if(e.keyCode===n.keys.BACKSPACE){if(i=this.editor,r=i.getRange(),o=n.support.browser.msie?"":'<br _moz_dirty="" />',r.collapsed)return;e.preventDefault(),a=new d(r),l=r.commonAncestorContainer,/t(able|body|r)/i.test(s.name(l))&&r.selectNode(s.closest(l,"table")),r.deleteContents(),l=r.commonAncestorContainer,"p"===s.name(l)&&""===l.innerHTML&&(l.innerHTML=o,r.setStart(l,0),r.collapse(!0),i.selectRange(r)),t(i,a)}},keyup:function(){}}),w=i.extend({init:function(e){this.editor=e,this.systemCommandIsInProgress=!1},createUndoCommand:function(){this.startRestorePoint=this.endRestorePoint=t(this.editor,this.startRestorePoint)},changed:function(){return this.startRestorePoint?this.startRestorePoint.html!=this.editor.body.innerHTML:!1},keydown:function(e){var t=this,n=t.editor,i=n.keyboard;return i.isModifierKey(e)?(i.isTypingInProgress()&&i.endTyping(!0),t.startRestorePoint=new d(n.getRange()),!0):i.isSystem(e)?(t.systemCommandIsInProgress=!0,t.changed()&&(t.systemCommandIsInProgress=!1,t.createUndoCommand()),!0):!1},keyup:function(){var e=this;return e.systemCommandIsInProgress&&e.changed()?(e.systemCommandIsInProgress=!1,e.createUndoCommand(),!0):!1}}),b=i.extend({init:function(e){this.handlers=e,this.typingInProgress=!1},isCharacter:function(e){return e>=48&&90>=e||e>=96&&111>=e||e>=186&&192>=e||e>=219&&222>=e||229==e},toolFromShortcut:function(t,n){var i,r,o=String.fromCharCode(n.keyCode);for(i in t)if(r=e.extend({ctrl:!1,alt:!1,shift:!1},t[i].options),(r.key==o||r.key==n.keyCode)&&r.ctrl==n.ctrlKey&&r.alt==n.altKey&&r.shift==n.shiftKey)return i},isTypingKey:function(e){var t=e.keyCode;return this.isCharacter(t)&&!e.ctrlKey&&!e.altKey||32==t||13==t||8==t||46==t&&!e.shiftKey&&!e.ctrlKey&&!e.altKey},isModifierKey:function(e){var t=e.keyCode;return 17==t&&!e.shiftKey&&!e.altKey||16==t&&!e.ctrlKey&&!e.altKey||18==t&&!e.ctrlKey&&!e.shiftKey},isSystem:function(e){return 46==e.keyCode&&e.ctrlKey&&!e.altKey&&!e.shiftKey},startTyping:function(e){this.onEndTyping=e,this.typingInProgress=!0},stopTyping:function(){this.typingInProgress&&this.onEndTyping&&this.onEndTyping(),this.typingInProgress=!1},endTyping:function(t){var n=this;n.clearTimeout(),t?n.stopTyping():n.timeout=window.setTimeout(e.proxy(n.stopTyping,n),1e3)},isTypingInProgress:function(){return this.typingInProgress},clearTimeout:function(){window.clearTimeout(this.timeout)},notify:function(e,t){var n,i=this.handlers;for(n=0;i.length>n&&!i[n][t](e);n++);},keydown:function(e){this.notify(e,"keydown")},keyup:function(e){this.notify(e,"keyup")}}),k=i.extend({init:function(e){this.editor=e,this.cleaners=[new C,new S,new T]},htmlToFragment:function(e){var t=this.editor,n=t.document,i=s.create(n,"div"),r=n.createDocumentFragment();for(i.innerHTML=e;i.firstChild;)r.appendChild(i.firstChild);return r},isBlock:function(e){return/<(div|p|ul|ol|table|h[1-6])/i.test(e)},_startModification:function(){var e,t,n=this.editor;if(!this._inProgress)return this._inProgress=!0,e=n.getRange(),t=new d(e),s.persistScrollTop(n.document),{range:e,restorePoint:t}},_endModification:function(e){t(this.editor,e.restorePoint),this.editor._selectionChange(),this._inProgress=!1},_contentModification:function(e,t){var n=this,i=n.editor,r=n._startModification();r&&(e.call(n,i,r.range),setTimeout(function(){t.call(n,i,r.range),n._endModification(r)}))},oncut:function(){this._contentModification(e.noop,e.noop)},_fileToDataURL:function(t,n){var i=t.getAsFile(),r=new FileReader;r.onload=n||e.noop,r.readAsDataURL(i)},_triggerPaste:function(e,t){var n={html:e||""};n.html=n.html.replace(/\ufeff/g,""),this.editor.trigger("paste",n),this.paste(n.html,t||{})},_handleImagePaste:function(e){var t,n,i,r;if("FileReader"in window&&(t=this,n=e.clipboardData||e.originalEvent.clipboardData,i=n&&(n.items||n.files),i&&i.length&&/^image\//i.test(i[0].type)&&(r=t._startModification())))return this._fileToDataURL(i[0],function(e){t._triggerPaste('<img src="'+e.target.result+'" />'),t._endModification(r)}),!0},onpaste:function(t){this._handleImagePaste(t)||this._contentModification(function(i,r){var o,a,l,c=s.create(i.document,"div",{className:"k-paste-container",innerHTML:"﻿"}),d=n.support.browser;i.body.appendChild(c),d.msie&&11>d.version?(t.preventDefault(),o=i.createRange(),o.selectNodeContents(c),i.selectRange(o),a=i.document.body.createTextRange(),a.moveToElementText(c),e(i.body).unbind("paste"),a.execCommand("Paste"),e(i.body).bind("paste",e.proxy(this.onpaste,this))):(l=i.createRange(),l.selectNodeContents(c),i.selectRange(l)),r.deleteContents()},function(t,n){var i,r="";t.selectRange(n),i=e(t.body).children(".k-paste-container"),i.each(function(){var e=this.lastChild;e&&s.is(e,"br")&&s.remove(e),r+=this.innerHTML}),i.remove(),this._triggerPaste(r,{clean:!0})})},splittableParent:function(e,t){var n,i;if(e)return s.closestEditableOfType(t,["p","ul","ol"])||t.parentNode;if(n=t.parentNode,i=t.ownerDocument.body,s.isInline(n))for(;n.parentNode!=i&&!s.isBlock(n.parentNode);)n=n.parentNode;return n},paste:function(t,n){var i,o,a,l,c,d,p,f,g,m,v,_=this.editor;for(n=h({clean:!1,split:!0},n),i=0,o=this.cleaners.length;o>i;i++)this.cleaners[i].applicable(t)&&(t=this.cleaners[i].clean(t));if(n.clean&&(t=t.replace(/(<br>(\s|&nbsp;)*)+(<\/?(div|p|li|col|t))/gi,"$3"),t=t.replace(/<(a|span)[^>]*><\/\1>/gi,"")),t=t.replace(/^<li/i,"<ul><li").replace(/li>$/g,"li></ul>"),a=this.isBlock(t),_.focus(),l=_.getRange(),l.deleteContents(),l.startContainer==_.document&&l.selectNodeContents(_.body),c=new u,d=c.addCaret(l),p=this.splittableParent(a,d),f=!1,g=p!=_.body&&!s.is(p,"td"),n.split&&g&&(a||s.isInline(p))&&(l.selectNode(d),r.RangeUtils.split(l,p,!0),f=!0),m=this.htmlToFragment(t),m.firstChild&&"k-paste-container"===m.firstChild.className){for(v=[],i=0,o=m.childNodes.length;o>i;i++)v.push(m.childNodes[i].innerHTML);m=this.htmlToFragment(v.join("<br />"))}if(e(m.childNodes).filter("table").addClass("k-table").end().find("table").addClass("k-table"),l.insertNode(m),p=this.splittableParent(a,d),f){for(;d.parentNode!=p;)s.unwrap(d.parentNode);s.unwrap(d.parentNode)}s.normalize(l.commonAncestorContainer),d.style.display="inline",s.restoreScrollTop(_.document),s.scrollTo(d),c.removeCaret(l),_.selectRange(l)}}),x=i.extend({clean:function(e){var t,n,i=this,r=i.replacements;for(t=0,n=r.length;n>t;t+=2)e=e.replace(r[t],r[t+1]);return e}}),C=x.extend({init:function(){this.replacements=[/<(\/?)script([^>]*)>/i,"<$1telerik:script$2>"]},applicable:function(e){return/<script[^>]*>/i.test(e)}}),S=x.extend({init:function(){this.replacements=[/<\?xml[^>]*>/gi,"",/<!--(.|\n)*?-->/g,"",/&quot;/g,"'",/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1",/<br><br>/g,"<BR><BR>",/<br>(?!\n)/g," ",/<table([^>]*)>(\s|&nbsp;)+<t/gi,"<table$1><t",/<tr[^>]*>(\s|&nbsp;)*<\/tr>/gi,"",/<tbody[^>]*>(\s|&nbsp;)*<\/tbody>/gi,"",/<table[^>]*>(\s|&nbsp;)*<\/table>/gi,"",/<BR><BR>/g,"<br>",/^\s*(&nbsp;)+/gi,"",/(&nbsp;|<br[^>]*>)+\s*$/gi,"",/mso-[^;"]*;?/gi,"",/<(\/?)b(\s[^>]*)?>/gi,"<$1strong$2>",/<(\/?)i(\s[^>]*)?>/gi,"<$1em$2>",/<o:p>&nbsp;<\/o:p>/gi,"&nbsp;",/<\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\n)*?<\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,"",/<\/o>/g,"",/style=(["|'])\s*\1/g,"",/(<br[^>]*>)?\n/g,function(e,t){return t?e:" "
}]},applicable:function(e){return/class="?Mso|style="[^"]*mso-/i.test(e)||/urn:schemas-microsoft-com:office/.test(e)},stripEmptyAnchors:function(e){return e.replace(/<a([^>]*)>\s*<\/a>/gi,function(e,t){return!t||t.indexOf("href")<0?"":e})},listType:function(e){var t;return/^(<span [^>]*texhtml[^>]*>)?<span [^>]*(Symbol|Wingdings)[^>]*>/i.test(e)&&(t=!0),e=e.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g," "),!t&&/^[\u2022\u00b7\u00a7\u00d8o]\u00a0+/.test(e)||t&&/^.\u00a0+/.test(e)?"ul":/^\s*\w+[\.\)]\u00a0{2,}/.test(e)?"ol":void 0},_convertToLi:function(e){var t;return 1==e.childNodes.length?t=e.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,""):(s.remove(e.firstChild),3==e.firstChild.nodeType&&/^[ivx]+\.$/i.test(e.firstChild.nodeValue)&&s.remove(e.firstChild),/^(&nbsp;|\s)+$/i.test(e.firstChild.innerHTML)&&s.remove(e.firstChild),t=e.innerHTML),s.remove(e),s.create(document,"li",{innerHTML:t})},lists:function(t){var n,i,r,o,a,l,c,d,u,h=e(s.blockElements.join(","),t),p=-1,f={ul:{},ol:{}},g=t;for(r=0;h.length>r;r++)if(o=h[r],a=this.listType(o.innerHTML),i=s.name(o),"td"!=i)if(a&&"p"==i){if(l=parseFloat(o.style.marginLeft||0),c=f[a][l],(l>p||!c)&&(c=s.create(document,a),g==t?s.insertBefore(c,o):g.appendChild(c),f[a][l]=c),n!=a)for(d in f)for(u in f[d])e.contains(c,f[d][u])&&delete f[d][u];g=this._convertToLi(o),c.appendChild(g),p=l,n=a}else o.innerHTML?(f={ul:{},ol:{}},g=t,p=-1):s.remove(o)},removeAttributes:function(e){for(var t=e.attributes,n=t.length;n--;)"colspan"!=s.name(t[n])&&e.removeAttributeNode(t[n])},createColGroup:function(t){var i=t.cells,r=e(t).closest("table"),o=r.children("colgroup");2>i.length||(o.length&&(i=o.children(),o[0].parentNode.removeChild(o[0])),o=e(e.map(i,function(e){var t=e.width;return t&&0!==parseInt(t,10)?n.format('<col style="width:{0}px;"/>',t):"<col />"}).join("")),o.is("colgroup")||(o=e("<colgroup/>").append(o)),o.prependTo(r))},convertHeaders:function(t){var n,i=t.cells,r=e.map(i,function(t){var n=e(t).children("p").children("strong")[0];return n&&"strong"==s.name(n)?n:void 0});if(r.length==i.length){for(n=0;r.length>n;n++)s.unwrap(r[n]);for(e(t).closest("table").find("colgroup").after("<thead></thead>").end().find("thead").append(t),n=0;i.length>n;n++)s.changeTag(i[n],"th")}},removeParagraphs:function(t){var n,i,r,o,a;for(n=0;t.length>n;n++)for(this.removeAttributes(t[n]),o=e(t[n]),a=o.children("p"),i=0,r=a.length;r>i;i++)r-1>i&&s.insertAfter(s.create(document,"br"),a[i]),s.unwrap(a[i])},removeDefaultColors:function(e){for(var t=0;e.length>t;t++)/^\s*color:\s*[^;]*;?$/i.test(e[t].style.cssText)&&s.unwrap(e[t])},tables:function(t){var n,i,r,o,a,s=e(t).find("table"),l=this;for(o=0;s.length>o;o++){for(n=s[o].rows,r=i=n[0],a=1;n.length>a;a++)n[a].cells.length>r.cells.length&&(r=n[a]);l.createColGroup(r),l.convertHeaders(i),l.removeAttributes(s[o]),l.removeParagraphs(s.eq(o).find("td,th")),l.removeDefaultColors(s.eq(o).find("span"))}},headers:function(t){var n,i=e(t).find("p.MsoTitle");for(n=0;i.length>n;n++)s.changeTag(i[n],"h1")},clean:function(e){var t,n=this;return e=x.fn.clean.call(n,e),e=n.stripEmptyAnchors(e),t=s.create(document,"div",{innerHTML:e}),n.headers(t),n.lists(t),n.tables(t),e=t.innerHTML.replace(/(<[^>]*)\s+class="?[^"\s>]*"?/gi,"$1")}}),T=x.extend({init:function(){this.replacements=[/\s+class="Apple-style-span[^"]*"/gi,"",/<(div|p|h[1-6])\s+style="[^"]*"/gi,"<$1",/^<div>(.*)<\/div>$/,"$1"]},applicable:function(e){return/class="?Apple-style-span|style="[^"]*-webkit-nbsp-mode/i.test(e)}});h(r,{Command:p,GenericCommand:f,InsertHtmlCommand:g,InsertHtmlTool:m,UndoRedoStack:v,TypingHandler:_,SystemHandler:w,BackspaceHandler:y,Keyboard:b,Clipboard:k,Cleaner:x,MSWordFormatCleaner:S,WebkitFormatCleaner:T}),a("insertHtml",new m({template:new c({template:o.dropDownListTemplate,title:"Insert HTML",initialValue:"Insert HTML"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Class,i=t.ui.editor,r=t.ui.Editor.fn.options.formats,o=i.EditorUtils,a=i.Tool,s=i.ToolTemplate,l=i.FormatTool,c=i.Dom,d=i.RangeUtils,u=e.extend,h=i.EditorUtils.registerTool,p=i.EditorUtils.registerFormat,f="k-marker",g=n.extend({init:function(e){this.format=e},numberOfSiblings:function(e){var t,n=0,i=0,r=0,o=e.parentNode;for(t=o.firstChild;t;t=t.nextSibling)t!=e&&(t.className==f?r++:3==t.nodeType?n++:i++);return r>1&&o.firstChild.className==f&&o.lastChild.className==f?0:i+n},findSuitable:function(e,t){return!t&&this.numberOfSiblings(e)>0?null:c.parentOfType(e,this.format[0].tags)},findFormat:function(e){var t,n,i,r,o,a=this.format,s=c.attrEquals;for(t=0,n=a.length;n>t;t++){if(i=e,r=a[t].tags,o=a[t].attr,i&&c.ofType(i,r)&&s(i,o))return i;for(;i;)if(i=c.parentOfType(i,r),i&&s(i,o))return i}return null},isFormatted:function(e){var t,n;for(t=0,n=e.length;n>t;t++)if(this.findFormat(e[t]))return!0;return!1}}),m=n.extend({init:function(e,t){this.finder=new g(e),this.attributes=u({},e[0].attr,t),this.tag=e[0].tags[0]},wrap:function(e){return c.wrap(e,c.create(e.ownerDocument,this.tag,this.attributes))},activate:function(e,t){this.finder.isFormatted(t)?(this.split(e),this.remove(t)):this.apply(t)},toggle:function(e){var t=d.textNodes(e);t.length>0&&this.activate(e,t)},apply:function(e){var t,n,i,r,o=[];for(t=0,n=e.length;n>t;t++)i=e[t],r=this.finder.findSuitable(i),r?c.attr(r,this.attributes):r=this.wrap(i),o.push(r);this.consolidate(o)},remove:function(e){var t,n,i;for(t=0,n=e.length;n>t;t++)i=this.finder.findFormat(e[t]),i&&(this.attributes&&this.attributes.style?(c.unstyle(i,this.attributes.style),i.style.cssText||i.attributes["class"]||c.unwrap(i)):c.unwrap(i))},split:function(e){var t,n,i=d.textNodes(e),r=i.length;if(r>0)for(t=0;r>t;t++)n=this.finder.findFormat(i[t]),n&&d.split(e,n,!0)},consolidate:function(e){for(var t,n;e.length>1;)if(t=e.pop(),n=e[e.length-1],t.previousSibling&&t.previousSibling.className==f&&n.appendChild(t.previousSibling),t.tagName==n.tagName&&t.previousSibling==n&&t.style.cssText==n.style.cssText){for(;t.firstChild;)n.appendChild(t.firstChild);c.remove(t)}}}),v=g.extend({init:function(e,t){this.format=e,this.greedyProperty=t,g.fn.init.call(this,e)},getInlineCssValue:function(t){var n,i,r,o,a,s,l,d,u,h,p,f,g=t.attributes,m=e.trim;if(g)for(n=0,i=g.length;i>n;n++)if(r=g[n],o=r.nodeName,a=r.nodeValue,r.specified&&"style"==o)for(s=m(a||t.style.cssText).split(";"),d=0,u=s.length;u>d;d++)if(l=s[d],l.length){if(h=l.split(":"),p=m(h[0].toLowerCase()),f=m(h[1]),p!=this.greedyProperty)continue;return p.indexOf("color")>=0?c.toHex(f):f}},getFormatInner:function(t){var n,i,r,o=e(c.isDataNode(t)?t.parentNode:t),a=o.parentsUntil("[contentEditable]").addBack().toArray().reverse();for(n=0,i=a.length;i>n;n++)if(r="className"==this.greedyProperty?a[n].className:this.getInlineCssValue(a[n]))return r;return"inherit"},getFormat:function(e){var t,n,i=this.getFormatInner(e[0]);for(t=1,n=e.length;n>t;t++)if(i!=this.getFormatInner(e[t]))return"";return i},isFormatted:function(e){return""!==this.getFormat(e)}}),_=m.extend({init:function(e,n,i){m.fn.init.call(this,e,n),this.values=n,this.finder=new v(e,i),i&&(this.greedyProperty=t.toCamelCase(i))},activate:function(e,t){var n=this.greedyProperty,i="apply";this.split(e),n&&"inherit"==this.values.style[n]&&(i="remove"),this[i](t)}}),y=l.extend({init:function(e){l.fn.init.call(this,u(e,{finder:new g(e.format),formatter:function(){return new m(e.format)}}))}}),w=a.extend({update:function(e,t){var n=e.data(this.type);n.close(),n.value(this.finder.getFormat(t))}}),b=w.extend({init:function(e){a.fn.init.call(this,e),this.type=t.support.browser.msie||t.support.touch?"kendoDropDownList":"kendoComboBox",this.format=[{tags:["span"]}],this.finder=new v(this.format,e.cssAttr)},command:function(e){var t=this.options,n=this.format,r={};return new i.FormatCommand(u(e,{formatter:function(){return r[t.domAttr]=e.value,new _(n,{style:r},t.cssAttr)}}))},initialize:function(e,t){var n,i=t.editor,r=this.options,o=r.name,s=[];r.defaultValue&&(s=[{text:i.options.messages[r.defaultValue[0].text],value:r.defaultValue[0].value}]),n=s.concat(r.items?r.items:i.options[o]||[]),e[this.type]({dataTextField:"text",dataValueField:"value",dataSource:n,change:function(){a.exec(i,o,this.value())},highlightFirst:!1}),e.closest(".k-widget").removeClass("k-"+o).find("*").addBack().attr("unselectable","on"),e.data(this.type).value("inherit")}}),k=a.extend({init:function(e){a.fn.init.call(this,e),this.format=[{tags:["span"]}],this.finder=new v(this.format,e.cssAttr)},options:{palette:"websafe"},update:function(){this._widget.close()},command:function(e){var t=this.options,n=this.format,r={};return new i.FormatCommand(u(e,{formatter:function(){return r[t.domAttr]=e.value,new _(n,{style:r},t.cssAttr)}}))},initialize:function(n,i){var r=i.editor,o=this.name,s=u({},k.fn.options,this.options),l=s.palette;n=this._widget=new t.ui.ColorPicker(n,{value:e.isArray(l)?l[0]:"#000",toolIcon:"k-"+s.name,palette:l,change:function(){var e=n.value();e&&a.exec(r,o,e),r.focus()},activate:function(e){e.preventDefault(),n.trigger("change")}}),n.wrapper.attr({title:i.title,unselectable:"on"}).find("*").attr("unselectable","on")}});u(i,{InlineFormatFinder:g,InlineFormatter:m,DelayedExecutionTool:w,GreedyInlineFormatFinder:v,GreedyInlineFormatter:_,InlineFormatTool:y,FontTool:b,ColorTool:k}),p("bold",[{tags:["strong","b"]},{tags:["span"],attr:{style:{fontWeight:"bold"}}}]),h("bold",new y({key:"B",ctrl:!0,format:r.bold,template:new s({template:o.buttonTemplate,title:"Bold"})})),p("italic",[{tags:["em","i"]},{tags:["span"],attr:{style:{fontStyle:"italic"}}}]),h("italic",new y({key:"I",ctrl:!0,format:r.italic,template:new s({template:o.buttonTemplate,title:"Italic"})})),p("underline",[{tags:["span"],attr:{style:{textDecoration:"underline"}}},{tags:["u"]}]),h("underline",new y({key:"U",ctrl:!0,format:r.underline,template:new s({template:o.buttonTemplate,title:"Underline"})})),p("strikethrough",[{tags:["del","strike"]},{tags:["span"],attr:{style:{textDecoration:"line-through"}}}]),h("strikethrough",new y({format:r.strikethrough,template:new s({template:o.buttonTemplate,title:"Strikethrough"})})),p("superscript",[{tags:["sup"]}]),h("superscript",new y({format:r.superscript,template:new s({template:o.buttonTemplate,title:"Superscript"})})),p("subscript",[{tags:["sub"]}]),h("subscript",new y({format:r.subscript,template:new s({template:o.buttonTemplate,title:"Subscript"})})),h("foreColor",new k({cssAttr:"color",domAttr:"color",name:"foreColor",template:new s({template:o.colorPickerTemplate,title:"Color"})})),h("backColor",new k({cssAttr:"background-color",domAttr:"backgroundColor",name:"backColor",template:new s({template:o.colorPickerTemplate,title:"Background Color"})})),h("fontName",new b({cssAttr:"font-family",domAttr:"fontFamily",name:"fontName",defaultValue:[{text:"fontNameInherit",value:"inherit"}],template:new s({template:o.comboBoxTemplate,title:"Font Name"})})),h("fontSize",new b({cssAttr:"font-size",domAttr:"fontSize",name:"fontSize",defaultValue:[{text:"fontSizeInherit",value:"inherit"}],template:new s({template:o.comboBoxTemplate,title:"Font Size"})}))}(window.kendo.jQuery),function(e){var t,n=window.kendo,i=n.Class,r=e.extend,o=n.ui.editor,a=n.ui.Editor.fn.options.formats,s=o.Dom,l=o.Command,c=o.ToolTemplate,d=o.FormatTool,u=o.EditorUtils,h=u.registerTool,p=u.registerFormat,f=o.RangeUtils,g=i.extend({init:function(e){this.format=e},contains:function(e,t){var n,i,r;for(n=0,i=t.length;i>n;n++)if(r=t[n],!r||!s.isAncestorOrSelf(e,r))return!1;return!0},findSuitable:function(t){var n,i,r,o,a=this.format,l=[];for(n=0,i=t.length;i>n;n++){for(o=a.length-1;o>=0&&!(r=s.ofType(t[n],a[o].tags)?t[n]:s.parentOfType(t[n],a[o].tags));o--);if(!r||"true"===r.contentEditable)return[];e.inArray(r,l)<0&&l.push(r)}for(n=0,i=l.length;i>n;n++)if(this.contains(l[n],l))return[l[n]];return l},findFormat:function(e){var t,n,i,r,o,a=this.format,l=s.editableParent(e);for(t=0,n=a.length;n>t;t++)for(i=e,r=a[t].tags,o=a[t].attr;i&&s.isAncestorOf(l,i);){if(s.ofType(i,r)&&s.attrEquals(i,o))return i;i=i.parentNode}return null},getFormat:function(e){var t,n,i=this,r=function(e){return i.findFormat(s.isDataNode(e)?e.parentNode:e)},o=r(e[0]);if(!o)return"";for(t=1,n=e.length;n>t;t++)if(o!=r(e[t]))return"";return o.nodeName.toLowerCase()},isFormatted:function(e){for(var t=0,n=e.length;n>t;t++)if(!this.findFormat(e[t]))return!1;return!0}}),m=i.extend({init:function(e,t){this.format=e,this.values=t,this.finder=new g(e)},wrap:function(e,t,n){var i,r,o,a,l,c=1==n.length?s.blockParentOrBody(n[0]):s.commonAncestor.apply(null,n);for(s.isInline(c)&&(c=s.blockParentOrBody(c)),i=s.significantChildNodes(c),r=s.findNodeIndex(i[0]),o=s.create(c.ownerDocument,e,t),a=0;i.length>a;a++)l=i[a],s.isBlock(l)?(s.attr(l,t),o.childNodes.length&&(s.insertBefore(o,l),o=o.cloneNode(!1)),r=s.findNodeIndex(l)+1):o.appendChild(l);o.firstChild&&s.insertAt(c,o,r)},apply:function(t){function n(e){return r({},e&&e.attr,d)}var i,o,a,l,c,d=this.values,h=s.filter("img",t),p=u.formatByName("img",this.format),f=n(p);if(e.each(h,function(){s.attr(this,f)}),h.length!=t.length)if(o=s.filter("img",t,!0),a=this.finder.findSuitable(o),a.length)for(l=0,c=a.length;c>l;l++)i=u.formatByName(s.name(a[l]),this.format),s.attr(a[l],n(i));else i=this.format[0],this.wrap(i.tags[0],n(i),o)},remove:function(e){var t,n,i,r,o;for(t=0,n=e.length;n>t;t++)i=this.finder.findFormat(e[t]),i&&(o=s.name(i),"div"!=o||i.getAttribute("class")?(r=u.formatByName(o,this.format),r.attr.style&&s.unstyle(i,r.attr.style),r.attr.className&&s.removeClass(i,r.attr.className)):s.unwrap(i))},toggle:function(e){var t=this,n=f.nodes(e);t.finder.isFormatted(n)?t.remove(n):t.apply(n)}}),v=i.extend({init:function(e,t){var n=this;n.format=e,n.values=t,n.finder=new g(e)},apply:function(e){var t,n,i,r,a,l,c,d=this.format,u=s.blockParents(e),h=d[0].tags[0];if(u.length)for(t=0,n=u.length;n>t;t++)c=s.name(u[t]),"li"==c?(i=u[t].parentNode,r=new o.ListFormatter(i.nodeName.toLowerCase(),h),a=this.editor.createRange(),a.selectNode(u[t]),r.toggle(a)):h&&("td"==c||u[t].attributes.contentEditable)?new m(d,this.values).apply(u[t].childNodes):(l=s.changeTag(u[t],h),s.attr(l,d[0].attr));else new m(d,this.values).apply(e)},toggle:function(e){var t=f.textNodes(e);t.length||(e.selectNodeContents(e.commonAncestorContainer),t=f.textNodes(e),t.length||(t=s.significantChildNodes(e.commonAncestorContainer))),this.apply(t)}}),_=l.extend({init:function(e){e.formatter=e.formatter(),l.fn.init.call(this,e)}}),y=d.extend({init:function(e){d.fn.init.call(this,r(e,{finder:new g(e.format),formatter:function(){return new m(e.format)}}))}});r(o,{BlockFormatFinder:g,BlockFormatter:m,GreedyBlockFormatter:v,FormatCommand:_,BlockFormatTool:y}),t=["ul","ol","li"],p("justifyLeft",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"left"}}},{tags:["img"],attr:{style:{"float":"left",display:"",marginLeft:"",marginRight:""}}},{tags:t,attr:{style:{textAlign:"left",listStylePosition:""}}}]),h("justifyLeft",new y({format:a.justifyLeft,template:new c({template:u.buttonTemplate,title:"Justify Left"})})),p("justifyCenter",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"center"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto","float":""}}},{tags:t,attr:{style:{textAlign:"center",listStylePosition:"inside"}}}]),h("justifyCenter",new y({format:a.justifyCenter,template:new c({template:u.buttonTemplate,title:"Justify Center"})})),p("justifyRight",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"right"}}},{tags:["img"],attr:{style:{"float":"right",display:"",marginLeft:"",marginRight:""}}},{tags:t,attr:{style:{textAlign:"right",listStylePosition:"inside"}}}]),h("justifyRight",new y({format:a.justifyRight,template:new c({template:u.buttonTemplate,title:"Justify Right"})})),p("justifyFull",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"justify"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto","float":""}}},{tags:t,attr:{style:{textAlign:"justify",listStylePosition:""}}}]),h("justifyFull",new y({format:a.justifyFull,template:new c({template:u.buttonTemplate,title:"Justify Full"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=e.extend,i=t.ui.editor,r=i.Dom,o=i.Command,a=i.Tool,s=i.BlockFormatter,l=r.normalize,c=i.RangeUtils,d=i.EditorUtils.registerTool,u=o.extend({init:function(e){this.options=e,o.fn.init.call(this,e)},_insertMarker:function(e,t){var n,i=r.create(e,"a");return i.className="k-marker",t.insertNode(i),i.parentNode||(n=t.commonAncestorContainer,n.innerHTML="",n.appendChild(i)),l(i.parentNode),i},_moveFocus:function(e,t){if(r.is(t,"img"))e.setStartBefore(t);else{e.selectNodeContents(t);var n=c.textNodes(e)[0];if(n)r.is(n,"img")?e.setStartBefore(n):e.selectNodeContents(n);else{for(;t.childNodes.length&&!r.is(t.firstChild,"br");)t=t.firstChild;e.selectNodeContents(t)}}},shouldTrim:function(e){var t="p,h1,h2,h3,h4,h5,h6".split(","),n=r.parentOfType(e.startContainer,t),i=r.parentOfType(e.endContainer,t);return n&&!i||!n&&i},_blankAfter:function(e){for(;e&&(r.isMarker(e)||""===r.stripBom(e.nodeValue));)e=e.nextSibling;return!e},exec:function(){var e,t,n,o,a,d,u,h,p=this.getRange(),f=c.documentFromRange(p),g=i.emptyElementContent,m=this.shouldTrim(p);p.deleteContents(),a=this._insertMarker(f,p),d=r.closestEditableOfType(a,["li"]),u=r.closestEditableOfType(a,"h1,h2,h3,h4,h5,h6".split(",")),d?r.emptyNode(d)&&(o=r.create(f,"p"),d.nextSibling&&(h=p.cloneRange(),h.selectNode(d),c.split(h,d.parentNode)),r.insertAfter(o,d.parentNode),r.remove(1==d.parentNode.childNodes.length?d.parentNode:d),o.innerHTML=g,n=o):u&&this._blankAfter(a)&&(o=r.create(f,"p"),r.insertAfter(o,u),o.innerHTML=g,r.remove(a),n=o),n||(d||u||new s([{tags:["p"]}]).apply([a]),p.selectNode(a),e=r.parentOfType(a,[d?"li":u?r.name(u):"p"]),c.split(p,e,m),t=e.previousSibling,r.is(t,"li")&&t.firstChild&&!r.is(t.firstChild,"br")&&(t=t.firstChild),n=e.nextSibling,r.is(n,"li")&&n.firstChild&&!r.is(n.firstChild,"br")&&(n=n.firstChild),r.remove(e),this.clean(t),this.clean(n,{links:!0}),l(t)),l(n),this._moveFocus(p,n),p.collapse(!0),r.scrollTo(n),c.selectRange(p)},clean:function(e,t){var n=e;if(e.firstChild&&r.is(e.firstChild,"br")&&r.remove(e.firstChild),r.isDataNode(e)&&!e.nodeValue&&(e=e.parentNode),e){for(;e.firstChild&&1==e.firstChild.nodeType;)e=e.firstChild;if(!r.isEmpty(e)&&/^\s*$/.test(e.innerHTML)&&(e.innerHTML=i.emptyElementContent),t&&t.links)for(;e!=n;){if(r.is(e,"a")&&r.emptyNode(e)){r.unwrap(e);break}e=e.parentNode}}}}),h=o.extend({init:function(e){this.options=e,o.fn.init.call(this,e)},exec:function(){var e,n=this.getRange(),i=r.create(c.documentFromRange(n),"br"),o=t.support.browser,a=o.msie&&11>o.version;n.deleteContents(),n.insertNode(i),l(i.parentNode),a||i.nextSibling&&!r.isWhitespace(i.nextSibling)||(e=i.cloneNode(!0),e.className="k-br",r.insertAfter(e,i)),n.setStartAfter(i),n.collapse(!0),r.scrollTo(i.nextSibling||i),c.selectRange(n)}});n(i,{ParagraphCommand:u,NewLineCommand:h}),d("insertLineBreak",new a({key:13,shift:!0,command:h})),d("insertParagraph",new a({key:13,command:u}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Class,i=e.extend,r=t.ui.editor,o=r.Dom,a=r.RangeUtils,s=r.EditorUtils,l=r.Command,c=r.ToolTemplate,d=r.FormatTool,u=r.BlockFormatFinder,h=a.textNodes,p=r.EditorUtils.registerTool,f=u.extend({init:function(e){this.tag=e;var t=this.tags=["ul"==e?"ol":"ul",e];u.fn.init.call(this,[{tags:t}])},isFormatted:function(e){var t,n,i=[];for(n=0;e.length>n;n++)(t=this.findFormat(e[n]))&&o.name(t)==this.tag&&i.push(t);if(1>i.length)return!1;if(i.length!=e.length)return!1;for(n=0;i.length>n&&i[n].parentNode==t.parentNode;n++)if(i[n]!=t)return!1;return!0},findSuitable:function(e){var t=o.parentOfType(e[0],this.tags);return t&&o.name(t)==this.tag?t:null}}),g=n.extend({init:function(e,t){var n=this;n.finder=new f(e),n.tag=e,n.unwrapTag=t},isList:function(e){var t=o.name(e);return"ul"==t||"ol"==t||"dl"==t},wrap:function(e,t){var n,i,r=o.create(e.ownerDocument,"li");for(n=0;t.length>n;n++)if(i=t[n],o.is(i,"li"))e.appendChild(i);else if(this.isList(i))for(;i.firstChild;)e.appendChild(i.firstChild);else if(o.is(i,"td")){for(;i.firstChild;)r.appendChild(i.firstChild);e.appendChild(r),i.appendChild(e),e=e.cloneNode(!1),r=r.cloneNode(!1)}else r.appendChild(i),o.isBlock(i)&&(e.appendChild(r),o.unwrap(i),r=r.cloneNode(!1));r.firstChild&&e.appendChild(r)},containsAny:function(e,t){for(var n=0;t.length>n;n++)if(o.isAncestorOrSelf(e,t[n]))return!0;return!1},suitable:function(e,t){if("k-marker"==e.className){var n=e.nextSibling;if(n&&o.isBlock(n))return!1;if(n=e.previousSibling,n&&o.isBlock(n))return!1}return this.containsAny(e,t)||o.isInline(e)||3==e.nodeType},split:function(t){var n,i,r,s,l,c,d=h(t);if(d.length)for(n=o.parentOfType(d[0],["li"]),i=o.parentOfType(d[d.length-1],["li"]),t.setStartBefore(n),t.setEndAfter(i),r=0,s=d.length;s>r;r++)l=this.finder.findFormat(d[r]),l&&(c=e(l).parents("ul,ol"),c[0]?a.split(t,c.last()[0],!0):a.split(t,l,!0))},merge:function(e,t){for(var n,i=t.previousSibling;i&&("k-marker"==i.className||3==i.nodeType&&o.isWhitespace(i));)i=i.previousSibling;if(i&&o.name(i)==e){for(;t.firstChild;)i.appendChild(t.firstChild);o.remove(t),t=i}for(n=t.nextSibling;n&&("k-marker"==n.className||3==n.nodeType&&o.isWhitespace(n));)n=n.nextSibling;if(n&&o.name(n)==e){for(;t.lastChild;)n.insertBefore(t.lastChild,n.firstChild);o.remove(t)}},breakable:function(e){return e!=e.ownerDocument.body&&!/table|tbody|tr|td/.test(o.name(e))&&!e.attributes.contentEditable},applyOnSection:function(t,n){function i(){u.push(this)}var r,a,s,l,c=this.tag,d=o.closestSplittableParent(n),u=[],h=this.finder.findSuitable(n);for(h||(h=new f("ul"==c?"ol":"ul").findSuitable(n)),/table|tbody/.test(o.name(d))?r=e.map(n,function(e){return o.parentOfType(e,["td"])}):(r=o.significantChildNodes(d),e.grep(r,o.isBlock).length&&(r=e.grep(r,e.proxy(function(e){return this.containsAny(e,n)},this))),r.length||(r=n)),a=0;r.length>a;a++)s=r[a],l=(!h||!o.isAncestorOrSelf(h,s))&&this.suitable(s,n),l&&(h&&this.isList(s)?(e.each(s.childNodes,i),o.remove(s)):u.push(s));u.length==r.length&&this.breakable(d)&&(u=[d]),h||(h=o.create(d.ownerDocument,c),o.insertBefore(h,u[0])),this.wrap(h,u),o.is(h,c)||o.changeTag(h,c),this.merge(c,h)},apply:function(e){var t,n,i,r=0,a=[];do i=o.closestEditable(e[r],["td","body"]),t&&i==t?n.push(e[r]):(t&&a.push({section:t,nodes:n}),n=[e[r]],t=i),r++;while(e.length>r);for(a.push({section:t,nodes:n}),r=0;a.length>r;r++)this.applyOnSection(a[r].section,a[r].nodes)},unwrap:function(t){var n,i,r,a,s=t.ownerDocument.createDocumentFragment(),l=this.unwrapTag;for(i=t.firstChild;i;i=i.nextSibling){for(r=o.create(t.ownerDocument,l||"p");i.firstChild;)a=i.firstChild,o.isBlock(a)?(r.firstChild&&(s.appendChild(r),r=o.create(t.ownerDocument,l||"p")),s.appendChild(a)):r.appendChild(a);r.firstChild&&s.appendChild(r)}n=e(t).parents("ul,ol"),n[0]?(o.insertAfter(s,n.last()[0]),n.last().remove()):o.insertAfter(s,t),o.remove(t)},remove:function(e){var t,n,i;for(n=0,i=e.length;i>n;n++)t=this.finder.findFormat(e[n]),t&&this.unwrap(t)},toggle:function(e){var t,n=this,i=h(e),r=e.commonAncestorContainer;i.length||(e.selectNodeContents(r),i=h(e),i.length||(t=r.ownerDocument.createTextNode(""),e.startContainer.appendChild(t),i=[t],e.selectNode(t.parentNode))),n.finder.isFormatted(i)?(n.split(e),n.remove(i)):n.apply(i)}}),m=l.extend({init:function(e){e.formatter=new g(e.tag),l.fn.init.call(this,e)}}),v=d.extend({init:function(e){this.options=e,d.fn.init.call(this,i(e,{finder:new f(e.tag)}))},command:function(e){return new m(i(e,{tag:this.options.tag}))}});i(r,{ListFormatFinder:f,ListFormatter:g,ListCommand:m,ListTool:v}),p("insertUnorderedList",new v({tag:"ul",template:new c({template:s.buttonTemplate,title:"Insert unordered list"})})),p("insertOrderedList",new v({tag:"ol",template:new c({template:s.buttonTemplate,title:"Insert ordered list"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Class,i=e.extend,r=e.proxy,o=t.ui.editor,a=o.Dom,s=o.RangeUtils,l=o.EditorUtils,c=o.Command,d=o.Tool,u=o.ToolTemplate,h=o.InlineFormatter,p=o.InlineFormatFinder,f=s.textNodes,g=o.EditorUtils.registerTool,m=n.extend({findSuitable:function(e){return a.parentOfType(e,["a"])}}),v=n.extend({init:function(){this.finder=new m},apply:function(e,t){var n,i,r,o,l,c=f(e);t.innerHTML?(n=s.getMarkers(e),i=s.documentFromRange(e),e.deleteContents(),o=a.create(i,"a",t),e.insertNode(o),l=o.parentNode,"a"==a.name(l)&&a.insertAfter(o,l),a.emptyNode(l)&&a.remove(l),n.length>1&&(a.insertAfter(n[n.length-1],o),a.insertAfter(n[1],o),a[c.length>0?"insertBefore":"insertAfter"](n[0],o))):(r=new h([{tags:["a"]}],t),r.finder=this.finder,r.apply(c))}}),_=c.extend({init:function(e){e.formatter={toggle:function(e){new h([{tags:["a"]}]).remove(f(e))}},this.options=e,c.fn.init.call(this,e)}}),y=c.extend({init:function(e){var t=this;t.options=e,c.fn.init.call(t,e),t.formatter=new v,e.url?this.exec=function(){this.formatter.apply(e.range,{href:e.url,innerHTML:e.text||e.url,target:e.target})}:(t.attributes=null,t.async=!0)},_dialogTemplate:function(){return t.template("<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\"><div class='k-edit-label'><label for='k-editor-link-url'>#: messages.linkWebAddress #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-url'></div><div class='k-edit-label k-editor-link-text-row'><label for='k-editor-link-text'>#: messages.linkText #</label></div><div class='k-edit-field k-editor-link-text-row'><input type='text' class='k-input k-textbox' id='k-editor-link-text'></div><div class='k-edit-label'><label for='k-editor-link-title'>#: messages.linkToolTip #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-title'></div><div class='k-edit-label'></div><div class='k-edit-field'><input type='checkbox' class='k-checkbox' id='k-editor-link-target'><label for='k-editor-link-target'>#: messages.linkOpenInNewWindow #</label></div><div class='k-edit-buttons k-state-default'><button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button><button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button></div></div>")({messages:this.editor.options.messages})},exec:function(){var t,n,i,o,s=this.getRange().collapsed,l=this.editor.options.messages;this._initialText="",this._range=this.lockRange(!0),t=f(this._range),n=t.length?this.formatter.finder.findSuitable(t[0]):null,i=t.length&&"img"==a.name(t[0]),o=this.createDialog(this._dialogTemplate(),{title:l.createLink,close:r(this._close,this),visible:!1}),o.find(".k-dialog-insert").click(r(this._apply,this)).end().find(".k-dialog-close").click(r(this._close,this)).end().find(".k-edit-field input").keydown(r(this._keydown,this)).end().find("#k-editor-link-url").val(this.linkUrl(n)).end().find("#k-editor-link-text").val(this.linkText(t)).end().find("#k-editor-link-title").val(n?n.title:"").end().find("#k-editor-link-target").attr("checked",n?"_blank"==n.target:!1).end().find(".k-editor-link-text-row").toggle(!i),t.length>0&&!s&&(this._initialText=e("#k-editor-link-text",o).val()),this._dialog=o.data("kendoWindow").center().open(),e("#k-editor-link-url",o).focus().select()},_keydown:function(e){var n=t.keys;e.keyCode==n.ENTER?this._apply(e):e.keyCode==n.ESC&&this._close(e)},_apply:function(t){var n,i,r,o=this._dialog.element,s=e("#k-editor-link-url",o).val(),l=e("#k-editor-link-text",o);s&&"http://"!=s&&(s.indexOf("@")>0&&!/^(\w+:)|(\/\/)/i.test(s)&&(s="mailto:"+s),this.attributes={href:s},n=e("#k-editor-link-title",o).val(),n&&(this.attributes.title=n),l.is(":visible")&&(i=l.val(),i||this._initialText?i&&i!==this._initialText&&(this.attributes.innerHTML=a.stripBom(i)):this.attributes.innerHTML=s),r=e("#k-editor-link-target",o).is(":checked"),this.attributes.target=r?"_blank":null,this.formatter.apply(this._range,this.attributes)),this._close(t),this.change&&this.change()},_close:function(e){e.preventDefault(),this._dialog.destroy(),a.windowFromDocument(s.documentFromRange(this._range)).focus(),this.releaseRange(this._range)},linkUrl:function(e){return e?e.getAttribute("href",2):"http://"},linkText:function(e){var t="";return 1==e.length?t=e[0].nodeValue:e.length&&(t=e[0].nodeValue+e[1].nodeValue),a.stripBom(t||"")},redo:function(){var e=this.lockRange(!0);this.formatter.apply(e,this.attributes),this.releaseRange(e)}}),w=d.extend({init:function(t){this.options=t,this.finder=new p([{tags:["a"]}]),d.fn.init.call(this,e.extend(t,{command:_}))},initialize:function(e,t){d.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(e,t){e.toggleClass("k-state-disabled",!this.finder.isFormatted(t)).removeClass("k-state-hover")}});i(t.ui.editor,{LinkFormatFinder:m,LinkFormatter:v,UnlinkCommand:_,LinkCommand:y,UnlinkTool:w}),g("createLink",new d({key:"K",ctrl:!0,command:y,template:new u({template:l.buttonTemplate,title:"Create Link"})})),g("unlink",new w({key:"K",ctrl:!0,shift:!0,template:new u({template:l.buttonTemplate,title:"Remove Link"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=e.extend,r=n.ui.editor,o=r.EditorUtils,a=r.Dom,s=o.registerTool,l=r.ToolTemplate,c=r.RangeUtils,d=r.Command,u=r.LinkFormatter,h=c.textNodes,p=n.keys,f="#k-editor-file-url",g="#k-editor-file-title",m=d.extend({init:function(e){var t=this;d.fn.init.call(t,e),t.formatter=new u,t.async=!0,t.attributes={}},insertFile:function(e,t){var n=this.attributes,i=c.documentFromRange(t);if(n.href&&"http://"!=n.href){if(!e)return e=a.create(i,"a",{href:n.href}),e.innerHTML=n.innerHTML,t.deleteContents(),t.insertNode(e),e.nextSibling||a.insertAfter(i.createTextNode("﻿"),e),t.setStartAfter(e),t.setEndAfter(e),c.selectRange(t),!0;a.attr(e,n)}return!1},_dialogTemplate:function(e){return n.template('<div class="k-editor-dialog k-popup-edit-form k-edit-form-container"># if (showBrowser) { #<div class="k-filebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-file-url">#: messages.fileWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-url"></div><div class=\'k-edit-label\'><label for="k-editor-file-title">#: messages.fileTitle #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-title"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button><button class="k-dialog-close k-button">#: messages.dialogCancel #</button></div></div>')({messages:this.editor.options.messages,showBrowser:e})},redo:function(){var e=this,t=e.lockRange();this.formatter.apply(t,this.attributes),e.releaseRange(t)},exec:function(){function e(e){var t=s.element,n=t.find(f).val().replace(/ /g,"%20"),i=t.find(g).val();l.attributes={href:n,innerHTML:""!==i?i:n},m=l.insertFile(v,d),r(e),l.change&&l.change()}function r(e){e.preventDefault(),s.destroy(),a.windowFromDocument(c.documentFromRange(d)).focus(),m||l.releaseRange(d)}function o(t){t.keyCode==p.ENTER?e(t):t.keyCode==p.ESC&&r(t)}var s,l=this,d=l.lockRange(),u=h(d),m=!1,v=u.length?this.formatter.finder.findSuitable(u[0]):null,_=l.editor.options,y=_.messages,w=_.fileBrowser,b=!!(n.ui.FileBrowser&&w&&w.transport&&w.transport.read!==t),k={title:y.insertFile,visible:!1,resizable:b};k.close=r,b&&(k.width=750),s=this.createDialog(l._dialogTemplate(b),k).toggleClass("k-filebrowser-dialog",b).find(".k-dialog-insert").click(e).end().find(".k-dialog-close").click(r).end().find(".k-edit-field input").keydown(o).end().find(f).val(v?v.getAttribute("href",2):"http://").end().find(g).val(v?v.title:"").end().data("kendoWindow"),b&&new n.ui.FileBrowser(s.element.find(".k-filebrowser"),i({},w,{change:function(){s.element.find(f).val(this.value())},apply:e})),s.center().open(),s.element.find(f).focus().select()}});n.ui.editor.FileCommand=m,s("insertFile",new r.Tool({command:m,template:new l({template:o.buttonTemplate,title:"Insert File"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=e.extend,r=n.ui.editor,o=r.EditorUtils,a=r.Dom,s=o.registerTool,l=r.ToolTemplate,c=r.RangeUtils,d=r.Command,u=n.keys,h="#k-editor-image-url",p="#k-editor-image-title",f="#k-editor-image-width",g="#k-editor-image-height",m=d.extend({init:function(e){var t=this;
d.fn.init.call(t,e),t.async=!0,t.attributes={}},insertImage:function(e,t){var n,i=this.attributes,r=c.documentFromRange(t);if(i.src&&"http://"!=i.src){if(n=function(){setTimeout(function(){i.width||e.removeAttribute("width"),i.height||e.removeAttribute("height"),e.removeAttribute("complete")})},!e)return e=a.create(r,"img",i),e.onload=e.onerror=function(){n()},t.deleteContents(),t.insertNode(e),e.nextSibling||a.insertAfter(r.createTextNode("﻿"),e),n(),t.setStartAfter(e),t.setEndAfter(e),c.selectRange(t),!0;a.attr(e,i),n()}return!1},_dialogTemplate:function(e){return n.template('<div class="k-editor-dialog k-popup-edit-form k-edit-form-container"># if (showBrowser) { #<div class="k-filebrowser k-imagebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-image-url">#: messages.imageWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-url"></div><div class=\'k-edit-label\'><label for="k-editor-image-title">#: messages.imageAltText #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-title"></div><div class=\'k-edit-label\'><label for="k-editor-image-width">#: messages.imageWidth #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-width"></div><div class=\'k-edit-label\'><label for="k-editor-image-height">#: messages.imageHeight #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-height"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button><button class="k-dialog-close k-button">#: messages.dialogCancel #</button></div></div>')({messages:this.editor.options.messages,showBrowser:e})},redo:function(){var e=this,t=e.lockRange();e.insertImage(c.image(t),t)||e.releaseRange(t)},exec:function(){function e(e){var t=s.element,n=parseInt(t.find(f).val(),10),i=parseInt(t.find(g).val(),10);l.attributes={src:t.find(h).val().replace(/ /g,"%20"),alt:t.find(p).val()},l.attributes.width=null,l.attributes.height=null,!isNaN(n)&&n>0&&(l.attributes.width=n),!isNaN(i)&&i>0&&(l.attributes.height=i),m=l.insertImage(v,d),r(e),l.change&&l.change()}function r(e){e.preventDefault(),s.destroy(),a.windowFromDocument(c.documentFromRange(d)).focus(),m||l.releaseRange(d)}function o(t){t.keyCode==u.ENTER?e(t):t.keyCode==u.ESC&&r(t)}var s,l=this,d=l.lockRange(),m=!1,v=c.image(d),_=v&&v.getAttribute("width")||"",y=v&&v.getAttribute("height")||"",w=l.editor.options,b=w.messages,k=w.imageBrowser,x=!!(n.ui.ImageBrowser&&k&&k.transport&&k.transport.read!==t),C={title:b.insertImage,visible:!1,resizable:x};C.close=r,x&&(C.width=750),s=this.createDialog(l._dialogTemplate(x),C).toggleClass("k-filebrowser-dialog",x).find(".k-dialog-insert").click(e).end().find(".k-dialog-close").click(r).end().find(".k-edit-field input").keydown(o).end().find(h).val(v?v.getAttribute("src",2):"http://").end().find(p).val(v?v.alt:"").end().find(f).val(_).end().find(g).val(y).end().data("kendoWindow"),x&&new n.ui.ImageBrowser(s.element.find(".k-imagebrowser"),i({},k,{change:function(){s.element.find(h).val(this.value())},apply:e})),s.center().open(),s.element.find(h).focus().select()}});n.ui.editor.ImageCommand=m,s("insertImage",new r.Tool({command:m,template:new l({template:o.buttonTemplate,title:"Insert Image"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui.DropDownList,r=n.ui.editor.Dom,o=i.extend({init:function(t,r){var o=this;i.fn.init.call(o,t,r),n.support.mobileOS.ios&&(this._initSelectOverlay(),this.bind("dataBound",e.proxy(this._initSelectOverlay,this))),o.value(o.options.title),o.bind("open",function(){if(o.options.autoSize){var e,t=o.list;t.css({whiteSpace:"nowrap",width:"auto"}),e=t.width(),e?e+=20:e=o._listWidth,t.css("width",e+n.support.scrollbar()),o._listWidth=e}})},options:{name:"SelectBox"},_initSelectOverlay:function(){var t,i,r,o,a=this,s=a.value(),l=this.dataSource.view(),c="",d=n.htmlEncode;for(i=0;l.length>i;i++)t=l[i],c+="<option value='"+d(t.value)+"'",t.value==s&&(c+=" selected"),c+=">"+d(t.text)+"</option>";r=e("<select class='k-select-overlay'>"+c+"</select>"),o=e(this.element).closest(".k-widget"),o.next(".k-select-overlay").remove(),r.insertAfter(o),r.on("change",function(){a.value(this.value),a.trigger("change")})},value:function(e){var n=this,r=i.fn.value.call(n,e);return e===t?r:(e!==i.fn.value.call(n)&&(n.text(n.options.title),n._current&&n._current.removeClass("k-state-selected"),n.current(null),n._oldIndex=n.selectedIndex=-1),t)},decorate:function(t){var n,i,o,a,s=this,l=s.dataSource,c=l.data();for(t&&s.list.css("background-color",r.getEffectiveBackground(e(t))),n=0;c.length>n;n++)i=c[n].tag||"span",o=c[n].className,a=r.inlineStyle(t,i,{className:o}),a=a.replace(/"/g,"'"),c[n].style=a+";display:inline-block";l.trigger("change")}});n.ui.plugin(o),n.ui.editor.SelectBox=o}(window.kendo.jQuery),function(e,t){function n(n,i){var r="rtl"==e(n).css("direction"),o=r?"Right":"Left",a="td"!=s.name(n)?"margin"+o:"padding"+o;return i===t?n.style[a]||0:(i>0?n.style[a]=i+"px":(n.style[a]="",n.style.cssText||n.removeAttribute("style")),t)}var i=window.kendo,r=i.Class,o=e.extend,a=i.ui.editor,s=a.Dom,l=a.EditorUtils,c=l.registerTool,d=a.Command,u=a.Tool,h=a.ToolTemplate,p=a.RangeUtils,f=s.blockElements,g=a.BlockFormatFinder,m=a.BlockFormatter,v=r.extend({init:function(){this.finder=new g([{tags:s.blockElements}])},apply:function(t){var i,r,o,a,l,c,d,u,h,p,f=this.finder.findSuitable(t),g=[];if(f.length){for(i=0,r=f.length;r>i;i++)s.is(f[i],"li")?e(f[i]).index()?e.inArray(f[i].parentNode,g)<0&&g.push(f[i]):g.push(f[i].parentNode):g.push(f[i]);for(;g.length;)if(o=g.shift(),s.is(o,"li"))if(a=o.parentNode,l=e(o).prev("li"),c=l.find("ul,ol").last(),d=e(o).children("ul,ol")[0],d&&l[0])c[0]?(c.append(o),c.append(e(d).children()),s.remove(d)):(l.append(d),d.insertBefore(o,d.firstChild));else for(d=l.children("ul,ol")[0],d||(d=s.create(o.ownerDocument,s.name(a)),l.append(d));o&&o.parentNode==a;)d.appendChild(o),o=g.shift();else for(u=parseInt(n(o),10)+30,n(o,u),h=0;g.length>h;h++)e.contains(o,g[h])&&g.splice(h,1)}else p=new m([{tags:["p"]}],{style:{marginLeft:30}}),p.apply(t)},remove:function(t){var i,r,o,a,s,l,c,d,u=this.finder.findSuitable(t);for(r=0,o=u.length;o>r;r++){if(c=e(u[r]),c.is("li")){if(a=c.parent(),s=a.parent(),s.is("li,ul,ol")&&!n(a[0])){if(i&&e.contains(i,s[0]))continue;l=c.nextAll("li"),l.length&&e(a[0].cloneNode(!1)).appendTo(c).append(l),s.is("li")?c.insertAfter(s):c.appendTo(s),a.children("li").length||a.remove();continue}if(i==a[0])continue;i=a[0]}else i=u[r];d=parseInt(n(i),10)-30,n(i,d)}}}),_=d.extend({init:function(e){e.formatter={toggle:function(e){(new v).apply(p.nodes(e))}},d.fn.init.call(this,e)}}),y=d.extend({init:function(e){e.formatter={toggle:function(e){(new v).remove(p.nodes(e))}},d.fn.init.call(this,e)}}),w=u.extend({init:function(e){u.fn.init.call(this,e),this.finder=new g([{tags:f}])},initialize:function(e,t){u.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(i,r){var o,a,l,c,d=this.finder.findSuitable(r);for(l=0,c=d.length;c>l;l++)if(o=n(d[l]),o||(a=e(d[l]).parents("ul,ol").length,o=s.is(d[l],"li")&&(a>1||n(d[l].parentNode))||s.ofType(d[l],["ul","ol"])&&a>0),o)return i.removeClass("k-state-disabled"),t;i.addClass("k-state-disabled").removeClass("k-state-hover")}});o(a,{IndentFormatter:v,IndentCommand:_,OutdentCommand:y,OutdentTool:w}),c("indent",new u({command:_,template:new h({template:l.buttonTemplate,title:"Indent"})})),c("outdent",new w({command:y,template:new h({template:l.buttonTemplate,title:"Outdent"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=e.extend,i=t.ui.editor,r=i.EditorUtils,o=i.Command,a=i.Tool,s=i.ToolTemplate,l=o.extend({init:function(e){var t=this;t.options=e,o.fn.init.call(t,e),t.attributes=null,t.async=!0},exec:function(){function n(e){o.value(s.find(d).val()),i(e),r.change&&r.change(),o.trigger("change")}function i(e){e.preventDefault(),s.data("kendoWindow").destroy(),o.focus()}var r=this,o=r.editor,a=o.options.messages,s=e(t.template(l.template)(a)).appendTo(document.body),c=l.indent(o.value()),d=".k-editor-textarea";this.createDialog(s,{title:a.viewHtml,close:i,visible:!1}).find(d).val(c).end().find(".k-dialog-update").click(n).end().find(".k-dialog-close").click(i).end().data("kendoWindow").center().open(),s.find(d).focus()}});n(l,{template:"<div class='k-editor-dialog k-popup-edit-form k-edit-form-container k-viewhtml-dialog'><textarea class='k-editor-textarea k-input'></textarea><div class='k-edit-buttons k-state-default'><button class='k-dialog-update k-button k-primary'>#: dialogUpdate #</button><button class='k-dialog-close k-button'>#: dialogCancel #</button></div></div>",indent:function(e){return e.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")}}),t.ui.editor.ViewHtmlCommand=l,i.EditorUtils.registerTool("viewHtml",new a({command:l,template:new s({template:r.buttonTemplate,title:"View HTML"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.ui.editor,i=n.Tool,r=n.ToolTemplate,o=n.DelayedExecutionTool,a=n.Command,s=n.Dom,l=n.EditorUtils,c=n.RangeUtils,d=l.registerTool,u=o.extend({init:function(e){var n=this;i.fn.init.call(n,t.deepExtend({},n.options,e)),n.type="kendoSelectBox",n.finder={getFormat:function(){return""}}},options:{items:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],width:110},toFormattingItem:function(e){var t,n=e.value;return n?e.tag||e.className?e:(t=n.indexOf("."),0===t?e.className=n.substring(1):-1==t?e.tag=n:(e.tag=n.substring(0,t),e.className=n.substring(t+1)),e):e},command:function(t){var i=t.value;return i=this.toFormattingItem(i),new n.FormatCommand({range:t.range,formatter:function(){var t,r=(i.tag||i.context||"span").split(","),o=[{tags:r,attr:{className:i.className||""}}];return t=e.inArray(r[0],s.inlineElements)>=0?new n.GreedyInlineFormatter(o):new n.GreedyBlockFormatter(o)}})},initialize:function(e,n){var r=n.editor,o=this.options,a=o.name,s=this;e.width(o.width),e.kendoSelectBox({dataTextField:"text",dataValueField:"value",dataSource:o.items||r.options[a],title:r.options.messages[a],autoSize:!0,change:function(){i.exec(r,a,this.dataItem().toJSON())},dataBound:function(){var e,t=this.dataSource.data();for(e=0;t.length>e;e++)t[e]=s.toFormattingItem(t[e])},highlightFirst:!1,template:t.template('<span unselectable="on" style="display:block;#=(data.style||"")#">#:data.text#</span>')}),e.addClass("k-decorated").closest(".k-widget").removeClass("k-"+a).find("*").addBack().attr("unselectable","on")},getFormattingValue:function(t,n){var i,r,o,a,s,l,c;for(i=0;t.length>i;i++)if(r=t[i],o=r.tag||r.context||"",a=r.className?"."+r.className:"",s=o+a,l=e(n[0]).closest(s)[0]){if(1==n.length)return r.value;for(c=1;n.length>c&&e(n[c]).closest(s)[0];c++)if(c==n.length-1)return r.value}return""},update:function(t,n){var i,r,a,l,c,d=e(t).data(this.type);if(d){for(i=d.dataSource,r=i.data(),c=s.commonAncestor.apply(null,n),a=0;r.length>a;a++)l=r[a].context,r[a].visible=!l||!!e(c).closest(l).length;i.filter([{field:"visible",operator:"eq",value:!0}]),o.fn.update.call(this,t,n),d.value(this.getFormattingValue(i.view(),n)),d.wrapper.toggleClass("k-state-disabled",!i.view().length)}}}),h=a.extend({exec:function(){var e,t=this.lockRange(!0),i=this.options.remove||"strong,em,span".split(",");c.wrapSelectedElements(t),e=new n.RangeIterator(t),e.traverse(function r(e){if(e&&!s.isMarker(e)){if(1==e.nodeType&&!s.insignificant(e)){for(var t=e.childNodes.length-1;t>=0;t--)r(e.childNodes[t]);e.removeAttribute("style"),e.removeAttribute("class")}i.indexOf(s.name(e))>-1&&s.unwrap(e)}}),this.releaseRange(t)}});e.extend(n,{FormattingTool:u,CleanFormatCommand:h}),d("formatting",new u({template:new r({template:l.dropDownListTemplate,title:"Format"})})),d("cleanFormatting",new i({command:h,template:new r({template:l.buttonTemplate,title:"Clean formatting"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.ui,i=n.editor,r=n.Widget,o=e.extend,a=e.proxy,s=t.keys,l=".kendoEditor",c="a.k-tool:not(.k-state-disabled),.k-widget.k-colorpicker,.k-selectbox,.k-dropdown,.k-combobox .k-input",d=r.extend({init:function(e,t){var n=this;t=o({},t,{name:"EditorToolbar"}),r.fn.init.call(n,e,t),t.popup&&n._initPopup()},events:["execute"],groups:{basic:["bold","italic","underline","strikethrough"],scripts:["subscript","superscript"],alignment:["justifyLeft","justifyCenter","justifyRight","justifyFull"],links:["insertImage","insertFile","createLink","unlink"],lists:["insertUnorderedList","insertOrderedList","indent","outdent"],tables:["createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"],advanced:["viewHtml","cleanFormatting"]},_initPopup:function(){this.window=e(this.element).wrap("<div class='editorToolbarWindow k-header' />").parent().prepend("<button class='k-button k-button-bare k-editortoolbar-dragHandle'><span class='k-icon k-i-move' /></button>").kendoWindow({title:!1,resizable:!1,draggable:{dragHandle:".k-editortoolbar-dragHandle"},animation:{open:{effects:"fade:in"},close:{effects:"fade:out"}},minHeight:42,visible:!1,autoFocus:!1,actions:[],dragend:function(){this._moved=!0}}).on("mousedown",function(t){e(t.target).is(".k-icon")||t.preventDefault()}).data("kendoWindow")},items:function(){return this.element.children().find("> *, select")},focused:function(){return this.element.find(".k-state-focused").length>0},toolById:function(e){var t,n=this.tools;for(t in n)if(t.toLowerCase()==e)return n[t]},toolGroupFor:function(t){var n,i=this.groups;if(this.isCustomTool(t))return"custom";for(n in i)if(e.inArray(t,i[n])>=0)return n},bindTo:function(t){var n=this,i=n.window;n._editor&&n._editor.unbind("select",a(n.refreshTools,n)),n._editor=t,n.tools=n.expandTools(t.options.tools),n.render(),n.element.find(".k-combobox .k-input").keydown(function(t){var n=e(this).closest(".k-combobox").data("kendoComboBox"),i=t.keyCode;i==s.RIGHT||i==s.LEFT?n.close():i==s.DOWN&&(n.dropDown.isOpened()||(t.stopImmediatePropagation(),n.open()))}),n._attachEvents(),n.items().each(function(){var i,r=n._toolName(this),o=n.tools[r],a=o&&o.options,s=t.options.messages,l=a&&a.tooltip||s[r],c=e(this);o&&o.initialize&&(("fontSize"==r||"fontName"==r)&&(i=s[r+"Inherit"],c.find("input").val(i).end().find("span.k-input").text(i).end()),o.initialize(c,{title:n._appendShortcutSequence(l,o),editor:n._editor}),c.closest(".k-widget",n.element).addClass("k-editor-widget"),c.closest(".k-colorpicker",n.element).next(".k-colorpicker").addClass("k-editor-widget"))}),t.bind("select",a(n.refreshTools,n)),n.update(),i&&i.wrapper.css({top:"",left:"",width:""})},show:function(){var e,t,n,i=this,r=i.window,o=i.options.editor;r&&(e=r.wrapper,t=o.element,e.is(":visible")&&i.window.options.visible||(e[0].style.width||e.width(t.outerWidth()-parseInt(e.css("border-left-width"),10)-parseInt(e.css("border-right-width"),10)),r._moved||(n=t.offset(),e.css({top:Math.max(0,parseInt(n.top,10)-e.outerHeight()-parseInt(i.window.element.css("padding-bottom"),10)),left:Math.max(0,parseInt(n.left,10))})),r.open()))},hide:function(){this.window&&this.window.close()},focus:function(){var e="tabIndex",t=this.element,n=this._editor.element.attr(e);t.attr(e,n||0).focus().find(c).first().focus(),n||0===n||t.removeAttr(e)},_appendShortcutSequence:function(e,t){if(!t.key)return e;var n=e+" (";return t.ctrl&&(n+="Ctrl + "),t.shift&&(n+="Shift + "),t.alt&&(n+="Alt + "),n+=t.key+")"},_nativeTools:["insertLineBreak","insertParagraph","redo","undo"],tools:{},isCustomTool:function(e){return!(e in t.ui.Editor.defaultTools)},expandTools:function(n){var r,a,s,l,c=this._nativeTools,d=t.deepExtend({},t.ui.Editor.defaultTools),u={};for(a=0;n.length>a;a++)r=n[a],l=r.name,e.isPlainObject(r)?l&&d[l]?(u[l]=o({},d[l]),o(u[l].options,r)):(s=o({cssClass:"k-i-custom",type:"button",title:""},r),s.name||(s.name="custom"),s.cssClass="k-"+("custom"==s.name?"i-custom":s.name),s.template||"button"!=s.type||(s.template=i.EditorUtils.buttonTemplate,s.title=s.title||s.tooltip),u[l]={options:s}):d[r]&&(u[r]=d[r]);for(a=0;c.length>a;a++)u[c[a]]||(u[c[a]]=d[c[a]]);return u},render:function(){function n(n){var i;return n.getHtml?i=n.getHtml():(e.isFunction(n)||(n=t.template(n)),i=n(o)),e.trim(i)}function i(){h.children().length&&h.appendTo(v)}function r(){h=e("<li class='k-tool-group' role='presentation' />")}var o,s,l,c,d,u,h,p,f=this,g=f.tools,m=f._editor.element,v=f.element.empty(),_=f._editor.options.tools,y=t.support.browser;for(v.empty(),r(),p=0;_.length>p;p++)c=_[p].name||_[p],o=g[c]&&g[c].options,!o&&e.isPlainObject(c)&&(o=c),s=o&&o.template,"break"==c&&(i(),e("<li class='k-row-break' />").appendTo(f.element),r()),s&&(u=f.toolGroupFor(c),d!=u&&(i(),r(),d=u),s=n(s),l=e(s).appendTo(h),"custom"==u&&(i(),r()),o.exec&&l.hasClass("k-tool")&&l.click(a(o.exec,m[0])));i(),e(f.element).children(":has(> .k-tool)").addClass("k-button-group"),f.options.popup&&y.msie&&9>y.version&&f.window.wrapper.find("*").attr("unselectable","on"),f.updateGroups(),f.angular("compile",function(){return{elements:f.element}})},updateGroups:function(){e(this.element).children().each(function(){e(this).children().filter(function(){return"none"!==this.style.display}).removeClass("k-group-end").first().addClass("k-group-start").end().last().addClass("k-group-end").end()})},decorateFrom:function(t){this.items().filter(".k-decorated").each(function(){var n=e(this).data("kendoSelectBox");n&&n.decorate(t)})},destroy:function(){r.fn.destroy.call(this);var e,t=this.tools;for(e in t)t[e].destroy&&t[e].destroy();this.window&&this.window.destroy()},_attachEvents:function(){var t=this,n="[role=button].k-tool",i=n+":not(.k-state-disabled)",r=n+".k-state-disabled";t.element.off(l).on("mouseenter"+l,i,function(){e(this).addClass("k-state-hover")}).on("mouseleave"+l,i,function(){e(this).removeClass("k-state-hover")}).on("mousedown"+l,n,function(e){e.preventDefault()}).on("keydown"+l,c,function(n){function i(e,n){var i=t.element.find(c),r=i.index(o)+e;return n&&(r=Math.max(0,Math.min(i.length-1,r))),i[r]}var r,o=this,a=n.keyCode;a==s.RIGHT||a==s.LEFT?e(o).hasClass(".k-dropdown")||(r=i(a==s.RIGHT?1:-1,!0)):a==s.ESC?r=t._editor:a!=s.TAB||n.ctrlKey||n.altKey||(n.shiftKey?r=i(-1):(r=i(1),r||(r=t._editor))),r&&(n.preventDefault(),r.focus())}).on("click"+l,i,function(n){var i=e(this);n.preventDefault(),n.stopPropagation(),i.removeClass("k-state-hover"),i.is("[data-popup]")||t._editor.exec(t._toolName(this))}).on("click"+l,r,function(e){e.preventDefault()})},_toolName:function(t){var n,i;if(t)return n=t.className,/k-tool\b/i.test(n)&&(n=t.firstChild.className),i=e.grep(n.split(" "),function(e){return!/^k-(widget|tool|tool-icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(e)}),i[0]?i[0].substring(i[0].lastIndexOf("-")+1):"custom"},refreshTools:function(){var n=this,i=n._editor,r=i.getRange(),o=t.ui.editor.RangeUtils.textNodes(r);o.length||(o=[r.startContainer]),n.items().each(function(){var t=n.tools[n._toolName(this)];t&&t.update&&t.update(e(this),o)}),this.update()},update:function(){this.element.children().children().each(function(){var t=e(this);t.css("display",t.hasClass("k-state-disabled")?"none":"")}),this.updateGroups()}});e.extend(i,{Toolbar:d})}(window.jQuery),function(e){var t=window.kendo,n=e.extend,i=e.proxy,r=t.ui.editor,o=r.Dom,a=r.EditorUtils,s=r.RangeUtils,l=r.Command,c=".kendoEditor",d="k-state-active",u="k-state-selected",h=r.Tool,p=r.ToolTemplate,f=r.InsertHtmlCommand,g=r.BlockFormatFinder,m=r.EditorUtils.registerTool,v="<td>"+r.emptyElementContent+"</td>",_=new g([{tags:["table"]}]),y=f.extend({_tableHtml:function(e,t){return e=e||1,t=t||1,"<table class='k-table' data-last>"+Array(e+1).join("<tr>"+Array(t+1).join(v)+"</tr>")+"</table>"},postProcess:function(t,n){var i=e("table[data-last]",t.document).removeAttr("data-last");n.selectNodeContents(i.find("td")[0]),t.selectRange(n)},exec:function(){var e=this.options;e.html=this._tableHtml(e.rows,e.columns),e.postProcess=this.postProcess,f.fn.exec.call(this)}}),w=h.extend({initialize:function(t,n){h.fn.initialize.call(this,t,n);var r=e(this.options.popupTemplate).appendTo("body").kendoPopup({anchor:t,copyAnchorStyles:!1,open:i(this._open,this),activate:i(this._activate,this),close:i(this._close,this)}).data("kendoPopup");t.click(i(this._toggle,this)).keydown(i(this._keydown,this)),this._editor=n.editor,this._popup=r},popup:function(){return this._popup},_activate:e.noop,_open:function(){this._popup.options.anchor.addClass(d)},_close:function(){this._popup.options.anchor.removeClass(d)},_keydown:function(e){var n=t.keys,i=e.keyCode;i==n.DOWN&&e.altKey?this._popup.open():i==n.ESC&&this._popup.close()},_toggle:function(t){var n=e(t.target).closest(".k-tool");n.hasClass("k-state-disabled")||this.popup().toggle()},update:function(e){this.popup().close(),e.removeClass("k-state-hover")},destroy:function(){this._popup.destroy()}}),b=w.extend({init:function(t){this.cols=8,this.rows=6,w.fn.init.call(this,e.extend(t,{command:y,popupTemplate:"<div class='k-ct-popup'>"+Array(this.cols*this.rows+1).join("<span class='k-ct-cell k-state-disabled' />")+"<div class='k-status'></div></div>"}))},_activate:function(){function n(t){var n=e(window);return{row:Math.floor((t.clientY+n.scrollTop()-u.top)/r)+1,col:Math.floor((t.clientX+n.scrollLeft()-u.left)/i)+1}}var i,r,o=this,a=o._popup.element,s=a.find(".k-ct-cell"),l=s.eq(0),d=s.eq(s.length-1),u=t.getOffset(l),h=t.getOffset(d),p=o.cols,f=o.rows;h.left+=d[0].offsetWidth,h.top+=d[0].offsetHeight,i=(h.left-u.left)/p,r=(h.top-u.top)/f,a.on("mousemove"+c,function(e){o._setTableSize(n(e))}).on("mouseleave"+c,function(){o._setTableSize()}).on("mouseup"+c,function(e){o._exec(n(e))})},_valid:function(e){return e&&e.row>0&&e.col>0&&this.rows>=e.row&&this.cols>=e.col},_exec:function(e){this._valid(e)&&(this._editor.exec("createTable",{rows:e.row,columns:e.col}),this._popup.close())},_setTableSize:function(n){var i=this._popup.element,r=i.find(".k-status"),o=i.find(".k-ct-cell"),a=this.cols,s=this._editor.options.messages;this._valid(n)?(r.text(t.format(s.createTableHint,n.row,n.col)),o.each(function(t){e(this).toggleClass(u,n.col>t%a&&n.row>t/a)})):(r.text(s.dialogCancel),o.removeClass(u))},_keydown:function(e){var n,i,r,o,a,s,l,c;w.fn._keydown.call(this,e),n=t.keys,i=e.keyCode,r=this._popup.element.find(".k-ct-cell"),o=Math.max(r.filter(".k-state-selected").last().index(),0),a=Math.floor(o/this.cols),s=o%this.cols,l=!1,i!=n.DOWN||e.altKey?i==n.UP?(l=!0,a--):i==n.RIGHT?(l=!0,s++):i==n.LEFT&&(l=!0,s--):(l=!0,a++),c={row:Math.max(1,Math.min(this.rows,a+1)),col:Math.max(1,Math.min(this.cols,s+1))},i==n.ENTER?this._exec(c):this._setTableSize(c),l&&(e.preventDefault(),e.stopImmediatePropagation())},_open:function(){var e=this._editor.options.messages;w.fn._open.call(this),this.popup().element.find(".k-status").text(e.dialogCancel).end().find(".k-ct-cell").removeClass(u)},_close:function(){w.fn._close.call(this),this.popup().element.off(c)},update:function(e,t){var n;w.fn.update.call(this,e),n=_.isFormatted(t),e.toggleClass("k-state-disabled",n)}}),k=l.extend({exec:function(){for(var e,t,n,i,a=this.lockRange(!0),s=a.endContainer;"td"!=o.name(s);)s=s.parentNode;for(t=s.parentNode,e=t.children.length,n=t.cloneNode(!0),i=0;t.cells.length>i;i++)n.cells[i].innerHTML=r.emptyElementContent;"before"==this.options.position?o.insertBefore(n,t):o.insertAfter(n,t),this.releaseRange(a)}}),x=l.extend({exec:function(){var e,t,n,i,a=this.lockRange(!0),s=o.closest(a.endContainer,"td"),l=o.closest(s,"table"),c=l.rows,d=this.options.position;for(e=o.findNodeIndex(s),t=0;c.length>t;t++)n=c[t].cells[e],i=n.cloneNode(),i.innerHTML=r.emptyElementContent,"before"==d?o.insertBefore(i,n):o.insertAfter(i,n);this.releaseRange(a)}}),C=l.extend({exec:function(){var t,n,i,r=this.lockRange(),a=s.mapAll(r,function(t){return e(t).closest("tr")[0]}),l=o.closest(a[0],"table");if(a.length>=l.rows.length)t=o.next(l),(!t||o.insignificant(t))&&(t=o.prev(l)),o.remove(l);else for(n=0;a.length>n;n++)i=a[n],o.removeTextSiblings(i),t=o.next(i)||o.prev(i),t=t.cells[0],o.remove(i);t&&(r.setStart(t,0),r.collapse(!0),this.editor.selectRange(r))}}),S=l.extend({exec:function(){var e,t,n=this.lockRange(),i=o.closest(n.endContainer,"td"),r=o.closest(i,"table"),a=r.rows,s=o.findNodeIndex(i,!0),l=a[0].cells.length;if(1==l)e=o.next(r),(!e||o.insignificant(e))&&(e=o.prev(r)),o.remove(r);else for(o.removeTextSiblings(i),e=o.next(i)||o.prev(i),t=0;a.length>t;t++)o.remove(a[t].cells[s]);e&&(n.setStart(e,0),n.collapse(!0),this.editor.selectRange(n))}}),T=h.extend({command:function(e){return e=n(e,this.options),"delete"==e.action?"row"==e.type?new C(e):new S(e):"row"==e.type?new k(e):new x(e)},initialize:function(e,t){h.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(e,t){var n=!_.isFormatted(t);e.toggleClass("k-state-disabled",n)}});n(t.ui.editor,{PopupTool:w,TableCommand:y,InsertTableTool:b,TableModificationTool:T,InsertRowCommand:k,InsertColumnCommand:x,DeleteRowCommand:C,DeleteColumnCommand:S}),m("createTable",new b({template:new p({template:a.buttonTemplate,popup:!0,title:"Create table"})})),m("addColumnLeft",new T({type:"column",position:"before",template:new p({template:a.buttonTemplate,title:"Add column on the left"})})),m("addColumnRight",new T({type:"column",template:new p({template:a.buttonTemplate,title:"Add column on the right"})})),m("addRowAbove",new T({type:"row",position:"before",template:new p({template:a.buttonTemplate,title:"Add row above"})})),m("addRowBelow",new T({type:"row",template:new p({template:a.buttonTemplate,title:"Add row below"})})),m("deleteRow",new T({type:"row",action:"delete",template:new p({template:a.buttonTemplate,title:"Delete row"})})),m("deleteColumn",new T({type:"column",action:"delete",template:new p({template:a.buttonTemplate,title:"Delete column"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.caret,r=n.keys,o=n.ui,a=o.Widget,s=".kendoMaskedTextBox",l=e.proxy,c=(n.support.propertyChangeEvent?"propertychange":"input")+s,d="k-state-disabled",u="disabled",h="readonly",p="change",f=a.extend({init:function(t,r){var o,l,c=this;a.fn.init.call(c,t,r),c._rules=e.extend({},c.rules,c.options.rules),t=c.element,o=t[0],c.wrapper=t,c._tokenize(),c._reset(),c.element.addClass("k-textbox").attr("autocomplete","off").on("focus"+s,function(){var e=o.value;e?c._togglePrompt(!0):o.value=c._old=c._emptyMask,c._oldValue=e,c._timeoutId=setTimeout(function(){i(t,0,e?c._maskLength:0)})}).on("focusout"+s,function(){var e=t.val();clearTimeout(c._timeoutId),o.value=c._old="",e!==c._emptyMask&&(o.value=c._old=e),c._change(),c._togglePrompt()}),l=t.is("[disabled]"),l?c.enable(!1):c.readonly(t.is("[readonly]")),c.value(c.options.value||t.val()),n.notify(c)},options:{name:"MaskedTextBox",promptChar:"_",clearPromptChar:!1,culture:"",rules:{},value:"",mask:""},events:[p],rules:{0:/\d/,9:/\d|\s/,"#":/\d|\s|\+|\-/,L:/[a-zA-Z]/,"?":/[a-zA-Z]|\s/,"&":/\S/,C:/./,A:/[a-zA-Z0-9]/,a:/[a-zA-Z0-9]|\s/},setOptions:function(t){var n=this;a.fn.setOptions.call(n,t),n._rules=e.extend({},n.rules,n.options.rules),n._tokenize(),this._unbindInput(),this._bindInput(),n.value(n.element.val())},destroy:function(){var e=this;e.element.off(s),e._form&&e._form.off("reset",e._resetHandler),a.fn.destroy.call(e)},value:function(e){var i=this.element,r=this._emptyMask;return e===t?this.element.val():(null===e&&(e=""),r?(e=this._unmask(e+""),i.val(e?r:""),this._mask(0,this._maskLength,e),e=i.val(),this._oldValue=e,n._activeElement()!==i&&(e===r?i.val(""):this._togglePrompt()),t):(i.val(e),t))},_togglePrompt:function(e){var t=this.element[0],n=t.value;this.options.clearPromptChar&&(n=e?this._oldValue:n.replace(RegExp(this.options.promptChar,"g")," "),t.value=this._old=n)},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},_bindInput:function(){var e=this;e._maskLength&&e.element.on("keydown"+s,l(e._keydown,e)).on("keypress"+s,l(e._keypress,e)).on("paste"+s,l(e._paste,e)).on(c,l(e._propertyChange,e))},_unbindInput:function(){this.element.off("keydown"+s).off("keypress"+s).off("paste"+s).off(c)},_editable:function(e){var t=this,n=t.element,i=e.disable,r=e.readonly;t._unbindInput(),r||i?n.attr(u,i).attr(h,r).toggleClass(d,i):(n.removeAttr(u).removeAttr(h).removeClass(d),t._bindInput())},_change:function(){var e=this,t=e.value();t!==e._oldValue&&(e._oldValue=t,e.trigger(p),e.element.trigger(p))},_propertyChange:function(){var e,t,n=this,r=n.element[0],o=r.value;o===n._old||n._pasting||(t=i(r)[0],e=n._unmask(o.substring(t),t),r.value=n._old=o.substring(0,t)+n._emptyMask.substring(t),n._mask(t,t,e),i(r,t))},_paste:function(e){var t=this,n=e.target,r=i(n),o=r[0],a=r[1],s=t._unmask(n.value.substring(a),a);t._pasting=!0,setTimeout(function(){var e=n.value,r=e.substring(o,i(n)[0]);n.value=t._old=e.substring(0,o)+t._emptyMask.substring(o),t._mask(o,o,r),o=i(n)[0],t._mask(o,o,s),i(n,o),t._pasting=!1})},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(n[0].value)})},t._form=r.on("reset",t._resetHandler))},_keydown:function(e){var n,o=e.keyCode,a=this.element[0],s=i(a),l=s[0],c=s[1],d=o===r.BACKSPACE;d||o===r.DELETE?(l===c&&(d?l-=1:c+=1,n=this._find(l,d)),n!==t&&n!==l?(d&&(n+=1),i(a,n)):l>-1&&this._mask(l,c,"",d),e.preventDefault()):o===r.ENTER&&this._change()},_keypress:function(e){var t,n;0===e.which||e.ctrlKey||e.keyCode===r.ENTER||(t=String.fromCharCode(e.which),n=i(this.element),this._mask(n[0],n[1],t),(e.keyCode===r.BACKSPACE||t)&&e.preventDefault())},_find:function(e,t){var n=this.element.val()||this._emptyMask,i=1;for(t===!0&&(i=-1);e>-1||this._maskLength>=e;){if(n.charAt(e)!==this.tokens[e])return e;e+=i}return-1},_mask:function(e,r,o,a){var s,l,c,d,u=this.element[0],h=u.value||this._emptyMask,p=this.options.promptChar,f=0;for(e=this._find(e,a),e>r&&(r=e),l=this._unmask(h.substring(r),r),o=this._unmask(o,e),s=o.length,o&&(l=l.replace(RegExp("^_{0,"+s+"}"),"")),o+=l,h=h.split(""),c=o.charAt(f);this._maskLength>e;)h[e]=c||p,c=o.charAt(++f),d===t&&f>s&&(d=e),e=this._find(e+1);u.value=this._old=h.join(""),n._activeElement()===u&&(d===t&&(d=this._maskLength),i(u,d))},_unmask:function(t,n){var i,r,o,a,s,l,c,d;if(!t)return"";for(t=(t+"").split(""),o=0,a=n||0,s=this.options.promptChar,l=t.length,c=this.tokens.length,d="";c>a&&(i=t[o],r=this.tokens[a],i===r||i===s?(d+=i===s?s:"",o+=1,a+=1):"string"!=typeof r?((r.test&&r.test(i)||e.isFunction(r)&&r(i))&&(d+=i,a+=1),o+=1):a+=1,!(o>=l)););return d},_tokenize:function(){for(var e,t,i,r,o=[],a=0,s=this.options.mask||"",l=s.split(""),c=l.length,d=0,u="",h=this.options.promptChar,p=n.getCulture(this.options.culture).numberFormat,f=this._rules;c>d;d++)if(e=l[d],t=f[e])o[a]=t,u+=h,a+=1;else for("."===e||","===e?e=p[e]:"$"===e?e=p.currency.symbol:"\\"===e&&(d+=1,e=l[d]),e=e.split(""),i=0,r=e.length;r>i;i++)o[a]=e[i],u+=e[i],a+=1;this.tokens=o,this._emptyMask=u,this._maskLength=u.length}});o.plugin(f)}(window.kendo.jQuery),function(e,t){function n(e){var n="string"==typeof e?[{name:e}]:e,i="[object Array]"===_t.call(n)?n:n!==t?[n]:[];return wt(i,function(e){return"string"==typeof e?{name:e}:{name:e.name,type:e.type}})}function i(e){var n="string"==typeof e?[{name:[e],expand:!1}]:e,i="[object Array]"===_t.call(n)?n:n!==t?[n]:[];return wt(i,function(e){return"string"==typeof e?{name:[e],expand:!1}:{name:"[object Array]"===_t.call(e.name)?e.name.slice():[e.name],expand:e.expand}})}function r(e,t,n,i){var o,a,s,l;if(n||(n=t),i||(i=0),l=n.members[i],l&&!l.measure){if(s=l.children,a=s.length,n===t?e[pt.stringify([l.name])]=!!a:a&&(e[pt.stringify(lt(n,i))]=!0),a)for(o=0;a>o;o++)r(e,t,s[o],i);
r(e,t,n,i+1)}}function o(t){var n,i,o={};t.length&&r(o,t[0]),n=[];for(i in o)n.push({name:e.parseJSON(i),expand:o[i]});return n}function a(e,t){var n,i,r,o,a=t.tuples||[],s=a[0];if(s&&s.members.length>e.length)for(n=s.members,i=0;n.length>i;i++)if(!n[i].measure){for(r=!1,o=0;e.length>o;o++)if(0===O(e[o]).indexOf(n[i].hierarchy)){r=!0;break}r||e.push({name:[n[i].name],expand:!1})}}function s(e){var t,n=[],i=e.members;for(t=0;i.length>t;t++)i[t].measure||n.push({name:[i[t].name],expand:i[t].children.length>0});return n}function l(e,t,n){var r,o;return e=e||{},a(t,e),n.length>1&&t.push({name:"Measures",measure:!0,children:i(n)}),r={members:t},e.tuples&&(o=x(e.tuples,r),o.tuple&&(t=s(o.tuple))),t}function c(e,t,n,i,r,o,a){var s,l,c,d,u,h,p,f=0,g=t;for(l in n[i].aggregates)s=n[i].aggregates[l],d=r[l],u=o[l],s=d?d(s):s.accumulator,e[g]={ordinal:g,value:s,fmtValue:u?pt.format(u,s):s},++f,g+=a;h=n[i].items;for(c in h){p=h[c].index*f,p=g+p*a;for(l in h[c].aggregates)s=h[c].aggregates[l],d=r[l],u=o[l],s=d?d(s):s.accumulator,e[p]={ordinal:p,value:s,fmtValue:u?pt.format(u,s):s},p+=a}}function d(e,t,n,i,r,o){var a,s,l,c,d,u,h,p=0;for(s in n[i].aggregates)a=n[i].aggregates[s],c=r[s],d=o[s],a=c?c(a):a.accumulator,e[e.length]={ordinal:t++,value:a,fmtValue:d?pt.format(d,a):a},++p;u=n[i].items;for(l in u){h=u[l].index*p;for(s in u[l].aggregates)a=u[l].aggregates[s],c=r[s],d=o[s],a=c?c(a):a.accumulator,e[e.length]={ordinal:t+h++,value:a,fmtValue:d?pt.format(d,a):a}}}function u(e){var t=pt.getter(e.field,!0);return function(n,i){return e.aggregate(t(n.dataItem),i,n)}}function h(e){return"number"==typeof e&&!isNaN(e)}function p(e){return e&&e.getTime}function f(e,n,i){return e.tuples.length<_(n.tuples,i)?n:t}function g(e,t,n,i,r){var o,a,s,l=e.length,c=_(t,i),d=i.length||1;for(a=0;n>a;a++)for(o=0;l>o;o++)s=v(e[o],t)*d,s+=o%d,r[a*l+o].ordinal=a*c+s}function m(e,t,n,i,r){var o,a,s,l=e.length,c=(_(t,i),i.length||1);for(a=0;l>a;a++)for(s=v(e[a],t),s*=c,s+=a%c,o=0;n>o;o++)r[a*n+o].ordinal=s*n+o}function v(e,t){return x(t,e).index}function _(e,t){var n,i,r;if(!e.length)return 0;for(n=e.slice(),i=n.shift(),r=1;i;)i.members?[].push.apply(n,i.members):i.children&&(i.measure||(r+=i.children.length),[].push.apply(n,i.children)),i=n.shift();return t.length&&(r*=t.length),r}function y(e){return e||(e={tuples:[]}),e.tuples||(e.tuples=[]),e}function w(e,t,n){var i,r,o;if(!e)return 0;for(i=Math.max(n.length,1),r=e.members.slice(0,t),o=r.shift();o;)o.children?[].push.apply(r,o.children):(i++,[].push.apply(r,o.members)),o=r.shift();return i}function b(e,t,n){var i,r,o,a,s,l;if(!t[0])return{parsedRoot:null,tuples:e,memberIndex:0,index:0};if(i=x(e,t[0]),!i.tuple)return{parsedRoot:null,tuples:t,memberIndex:0,index:0};if(r=i.tuple.members,o=t[0].members,a=-1,r.length!==o.length)return{parsedRoot:null,tuples:t,memberIndex:0,index:0};for(s=0,l=r.length;l>s;s++)!r[s].measure&&o[s].children[0]&&(-1==a&&o[s].children.length&&(a=s),r[s].children=o[s].children);return n=Math.max(n.length,1),{parsedRoot:i.tuple,index:i.index*n,memberIndex:a,tuples:e}}function k(e,t){var n,i,r=!0;for(e=e.members,t=t.members,n=0,i=e.length;i>n;n++)e[n].measure||t[n].measure||(r=r&&O(e[n])===O(t[n]));return r}function x(e,t){var n,i,r,o,a,s,l,c=0;for(n=0,i=e.length;i>n;n++){if(r=e[n],k(r,t))return{tuple:r,index:c};for(c++,a=0,s=r.members.length;s>a;a++)if(l=r.members[a],!l.measure&&(o=x(l.children,t),c+=o.index,o.tuple))return{tuple:o.tuple,index:c}}return{index:c}}function C(e,t){var n,i,r,o="";for(i=0,r=e.length;r>i;i++)n=e[i],o+=n.name,t[o]||(t[o]=n)}function S(e,t){var n,i,r,o,a=e.members,s="",l="";for(n=0,i=a.length;i>n;n++){if(r=a[n],o){if(t[s+r.name]){s+=r.name,o=t[s];continue}return t[s+r.parentName]?t[s+r.parentName]:(r.parentName&&(l+=r.parentName),t[l])}if(s+=r.name,o=t[r.parentName],!o&&(o=t[s],!o))return null;o&&(l+=o.name)}return o}function T(e,t){var n,i,r,o;if(0===t.length)return-1;for(n=t[0],i=e.members,r=0,o=i.length;o>r;r++)if(i[r].name==n.name)return r}function D(n,i){if(!(0>i)){var r={name:"Measures",measure:!0,children:[e.extend({members:[],dataIndex:n.dataIndex},n.members[i])]};n.members.splice(i,1,r),n.dataIndex=t}}function A(e,t){var n,i,r,o,a,s;if(1>e.length)return[];for(n=[],i={},r=T(e[0],t),o=0;e.length>o;o++)a=e[o],a.dataIndex=o,D(a,r),s=S(a,i),s?s.children.push(0>r||!s.measure?a:a.members[r].children[0]):n.push(a),C(a.members,i);return n}function E(e,t){var n,i,r,o,a,s,l,c,d;if(!e||!e.length)return t;for(n=[],i=P(e),r=i.length,o=Math.max(t.length/r,1),a=0;r>a;a++)for(l=o*a,c=o*i[a],s=0;o>s;s++)d=parseInt(c+s,10),n[parseInt(l+s,10)]=t[d]||{value:"",fmtValue:"",ordinal:d};return n}function M(e,t){var n,i,r,o,a,s,l,c;if(!e||!e.length)return t;for(n=[],i=P(e),r=i.length,o=Math.max(t.length/r,1),s=0;o>s;s++)for(l=r*s,a=0;r>a;a++)c=i[a]+l,n[l+a]=t[c]||{value:"",fmtValue:"",ordinal:c};return n}function P(e){var n,i,r,o,a,s,l;for(e=e.slice(),n=[],i=e.shift();i;){for(i.dataIndex!==t&&n.push(i.dataIndex),a=0,r=0,o=i.members.length;o>r;r++)l=i.members[r],s=l.children,l.measure?[].splice.apply(e,[0,0].concat(s)):[].splice.apply(e,[a,0].concat(s)),a+=s.length;i=e.shift()}return n}function I(e){var t=e.split(".");return t.length>2?t[0]+"."+t[1]:e}function z(e,t){var n=e.length-1,i=e[n],r=F(t,i);return r&&r.dir?i="ORDER("+i+".Children,"+r.field+".CurrentMember.MEMBER_CAPTION,"+r.dir+")":i+=".Children",e[n]=i,e}function F(e,t){for(var n=0,i=e.length;i>n;n++)if(0===t.indexOf(e[n].field))return e[n];return null}function R(e){var t,n="CROSSJOIN({";return e.length>2?(t=e.pop(),n+=R(e)):(n+=e.shift(),t=e.pop()),n+="},{",n+=t,n+="})"}function B(e,t){var n=e.slice(0);return t.length>1&&n.push("{"+L(t).join(",")+"}"),R(n)}function L(e){for(var n,i=0,r=e.length,o=[];r>i;i++)n=e[i],o.push(n.name!==t?n.name:n);return o}function O(e){return e=e.name||e,"[object Array]"===_t.call(e)&&(e=e[e.length-1]),e}function H(e){for(var t=e.length,n=[],i=0;t>i;i++)n.push(e[i].name[0]);return n}function N(e,t){var n,i,r,o=0,a=e.length,s=t.length;for(t=t.slice(0);a>o;o++)for(n=e[o],r=0;s>r;r++)if(i=I(t[r]),-1!==n.indexOf(i)){t[r]=n;break}return t}function V(e){for(var t,n,i,r,o,a,s=[],l=[],c=[],d=0,u=e.length;u>d;d++)if(t=e[d],r=t.name,a=!1,"[object Array]"!==_t.call(r)&&(t.name=r=[r]),r.length>1)l.push(t);else{for(o=I(r[0]),n=0,i=c.length;i>n;n++)if(0===c[n].name[0].indexOf(o)){a=!0;break}a||c.push(t),t.expand&&s.push(t)}return s=s.concat(l),{root:c,expanded:s}}function U(e,t,n){var i,r,o,a,s,l,c,d,u="";if(e=e||[],i=V(e),r=i.root,o=H(r),a=[],i=i.expanded,s=i.length,l=0,d=[],o.length>1||t.length>1){for(a.push(B(o,t));s>l;l++)c=z(i[l].name,n),d=N(c,o),a.push(B(d,t));u+=a.join(",")}else{for(;s>l;l++)c=z(i[l].name,n),d.push(c[0]);u+=o.concat(d).join(",")}return u}function W(e){var t="",n=e.value,i=e.field,r=e.operator;return"in"==r?(t+="{",t+=n,t+="}"):(t+="Filter(",t+=i+".Children",t+=pt.format(Y[r],i,n),t+=")"),t}function j(e,t){var n,i,r="",o=e.filters,a=o.length;for(i=a-1;i>=0;i--)n="SELECT (",n+=W(o[i]),n+=") ON 0",i==a-1?(n+=" FROM ["+t+"]",r=n):r=n+" FROM ( "+r+" )";return r}function G(e,t,n){var i,r,o="";if(t){o+="<"+e+">";for(r in t)i=t[r],n&&(r=r.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g,"$1_").toUpperCase().replace(/_$/,"")),o+="<"+r+">"+i+"</"+r+">";o+="</"+e+">"}else o+="<"+e+"/>";return o}function q(e){if(null==e)return[];var t=_t.call(e);return"[object Array]"!==t?[e]:e}function $(e){var t,n,i,r,o={tuples:[]},a=q(pt.getter("Tuples.Tuple",!0)(e)),s=pt.getter("Caption['#text']"),l=pt.getter("UName['#text']"),c=pt.getter("LName['#text']"),d=pt.getter("LNum['#text']"),u=pt.getter("CHILDREN_CARDINALITY['#text']",!0),h=pt.getter("['@Hierarchy']"),p=pt.getter("PARENT_UNIQUE_NAME['#text']",!0);for(t=0;a.length>t;t++){for(n=[],i=q(a[t].Member),r=0;i.length>r;r++)n.push({children:[],caption:s(i[r]),name:l(i[r]),levelName:c(i[r]),levelNum:d(i[r]),hasChildren:parseInt(u(i[r]),10)>0,parentName:p(i[r]),hierarchy:h(i[r])});o.tuples.push({members:n})}return o}var Y,K,Q,X,J,Z,et,tt,nt,it,rt,ot,at,st,lt,ct,dt,ut,ht,pt=window.kendo,ft=pt.ui,gt=pt.Class,mt=ft.Widget,vt=pt.data.DataSource,_t={}.toString,yt=function(e){return e},wt=e.map,bt=e.extend,kt=pt.isFunction,xt="change",Ct="error",St="progress",Tt="stateReset",Dt="auto",At="<div/>",Et=".kendoPivotGrid",Mt="__row_total__",Pt="dataBinding",It="dataBound",zt="expandMember",Ft="collapseMember",Rt="k-i-arrow-s",Bt="k-i-arrow-e",Lt="#: data.member.caption || data.member.name #",Ot='<span class="k-icon k-i-kpi-#=data.dataItem.value > 0 ? "open" : data.dataItem.value < 0 ? "denied" : "hold"#">#:data.dataItem.value#</span>',Ht='<span class="k-icon k-i-kpi-#=data.dataItem.value > 0 ? "increase" : data.dataItem.value < 0 ? "decrease" : "equal"#">#:data.dataItem.value#</span>',Nt='#= data.dataItem ? kendo.htmlEncode(data.dataItem.fmtValue || data.dataItem.value) || "&nbsp;" : "&nbsp;" #',Vt='<table class="k-pivot-layout"><tr><td><div class="k-pivot-rowheaders"></div></td><td><div class="k-pivot-table k-state-default"></div></td></tr></table>',Ut={sum:function(e,t){var n=t.accumulator;return h(n)?h(e)&&(n+=e):n=e,n},count:function(e,t){return(t.accumulator||0)+1},average:{aggregate:function(e,n){var i=n.accumulator;return n.count===t&&(n.count=0),h(i)?h(e)&&(i+=e):i=e,h(e)&&n.count++,i},result:function(e){var t=e.accumulator;return h(t)&&(t/=e.count),t}},max:function(e,t){var n=t.accumulator;return h(n)||p(n)||(n=e),e>n&&(h(e)||p(e))&&(n=e),n},min:function(e,t){var n=t.accumulator;return h(n)||p(n)||(n=e),n>e&&(h(e)||p(e))&&(n=e),n}},Wt=gt.extend({init:function(e){this.options=bt({},this.options,e),this.dimensions=this._normalizeDescriptors("field",this.options.dimensions),this.measures=this._normalizeDescriptors("name",this.options.measures)},_normalizeDescriptors:function(e,t){var n,i,r,o;if(t=t||{},n={},"[object Array]"===_t.call(t)){for(r=0,o=t.length;o>r;r++)i=t[r],"string"==typeof i?n[i]={}:i[e]&&(n[i[e]]=i);t=n}return t},_asTuples:function(e,n,i){var r,o,a,s,l,c,d,u,h,p;if(i=i||[],r=this.dimensions||[],o=[],h=i.length||1,n.length||i.length)for(c=0;h>c;c++){for(a={members:[]},s=0,l=n.length;l>s;s++)u=O(n[s].name),a.members[a.members.length]={children:[],caption:(r[u]||{}).caption||"All",name:u,levelName:u,levelNum:"0",hasChildren:!0,parentName:t,hierarchy:u};h>1&&(a.members[a.members.length]={children:[],caption:i[c].caption,name:i[c].descriptor.name,levelName:"MEASURES",levelNum:"0",hasChildren:!1,parentName:t,hierarchy:"MEASURES"}),o[o.length]=a}for(p in e)for(c=0;h>c;c++){for(d={members:[]},s=0,l=n.length;l>s;s++)u=O(n[s].name),d.members[d.members.length]=0===e[p].parentName.indexOf(u)?{children:[],caption:e[p].value,name:e[p].name,levelName:e[p].name,levelNum:1,hasChildren:!1,parentName:u,hierarchy:u}:{children:[],caption:(r[u]||{}).caption||"All",name:u,levelName:u,levelNum:"0",hasChildren:!0,parentName:t,hierarchy:u};h>1&&(d.members[d.members.length]={children:[],caption:i[c].caption,name:i[c].descriptor.name,levelName:"MEASURES",levelNum:"0",hasChildren:!0,parentName:t,hierarchy:"MEASURES"}),o[o.length]=d}return o},_toDataArray:function(e,t,n,i,r){var o,a,s,l,c,d,u={},h={},p=0,f=n&&n.length;if(f)for(o=this.measures||{};f>p;p++)s=n[p].name,a=o[s],a.result&&(h[s]=a.result),a.format&&(u[s]=a.format);l=[],c=0,r(l,c,e,Mt,h,u,t);for(d in e)d!==Mt&&(c+=i,r(l,c,e,d,h,u,t));return l},_matchDescriptors:function(e,t,n,i){for(var r,o,a,s,l;i>0;)if(r=t[--i],o=O(r).split("&"),o.length>1&&(a=o[0],s=o[1],l=n[a],l(e)!=s))return!1;return!0},_isExpanded:function(e){for(var t=0,n=e.length;n>t;t++)if(e[t].expand)return!0;return!1},_calculateAggregate:function(e,t,n){var i,r,o,a={};for(o=0;e.length>o;o++)r=e[o].descriptor.name,i=n.aggregates[r]||{},i.accumulator=e[o].aggregator(t,i),a[r]=i;return a},_processColumns:function(e,n,i,r,o,a,s,l){var c,d,u,h,p,f,g=o.dataItem;for(f=0;n.length>f;f++)if(d=n[f],d.expand){if(!this._matchDescriptors(g,n,i,f))continue;u=O(d),c=i[u](g),c=c!==t?""+c:c,u=u+"&"+c,h=r[u]||{index:s.columnIndex,name:u,parentName:u,value:c},p=a.items[u]||{aggregates:{}},a.items[u]={index:h.index,aggregates:this._calculateAggregate(e,o,p)},l&&(r[u]||s.columnIndex++,r[u]=h)}},_measureAggregators:function(e){var t,n,i,r,o,a,s=e.measures||[],l=this.measures||{},c=[];if(s.length){for(i=0,r=s.length;r>i;i++)if(t=s[i],n=l[t.name],o=null,n){if(a=n.aggregate,"string"==typeof a){if(o=Ut[a.toLowerCase()],!o)throw Error("There is no such aggregate function");n.aggregate=o.aggregate||o,n.result=o.result}c.push({descriptor:t,caption:n.caption,result:n.result,aggregator:u(n)})}}else c.push({descriptor:{name:"default"},caption:"default",aggregator:function(){return 1}});return c},_buildGetters:function(e){var t,n,i,r,o,a={};for(r=0,o=e.length;o>r;r++)t=e[r],i=O(t),n=i.split("&"),n.length>1?a[n[0]]=pt.getter(n[0],!0):a[i]=pt.getter(i,!0);return a},process:function(e,n){var r,o,a,s,l,u,h,p,f,g,m,v,_,y,w,b,k,x,C,S,T,D,A,E,M,P;if(e=e||[],n=n||{},r=n.measures||[],o="rows"===n.measuresAxis,a=(o?n.rows:n.columns)||[],s=(o?n.columns:n.rows)||[],!a.length&&s.length&&(!r.length||r.length&&o)&&(a=s,s=[],o=!1),a.length||s.length||(o=!1),!a.length&&r.length&&(a=i(n.measures)),l={},u={},h={},f={columnIndex:0},g=this._measureAggregators(n),m=this._buildGetters(a),v=this._buildGetters(s),_=!1,a.length||s.length)for(b=this._isExpanded(s),_=!0,k=0,x=e.length;x>k;k++)for(y=e[k],w={dataItem:y,index:k},C=l[Mt]||{items:{},aggregates:{}},this._processColumns(g,a,m,u,w,C,f,!b),C.aggregates=this._calculateAggregate(g,w,C),l[Mt]=C,S=0,T=s.length;T>S;S++)if(D=s[S],D.expand){if(!this._matchDescriptors(y,s,v,S))continue;A=O(D),p=v[A](y),p=p!==t?""+p:p,h[p]={name:A+"&"+p,parentName:A,value:p},E=l[p]||{items:{},aggregates:{}},this._processColumns(g,a,m,u,w,E,f,!0),E.aggregates=this._calculateAggregate(g,w,E),l[p]=E}return _&&e.length?(!(g.length>1)||n.columns&&n.columns.length||(a=[]),u=this._asTuples(u,a,g),h=this._asTuples(h,s,[]),M=u.length,o&&(M=1,P=u,u=h,h=P),l=this._toDataArray(l,u.length,n.measures,M,o?c:d),l=this._normalizeData(l,u.length,h.length)):l=u=h=[],{axes:{columns:{tuples:u},rows:{tuples:h}},data:l}},_normalizeData:function(e,t,n){var i,r,o=(t||1)*(n||1),a=Array(o),s=e.length;if(s===o)return e;for(r=0;o>r;r++)a[r]={value:"",fmtValue:"",ordinal:r};for(r=0;s>r;r++)i=e[r],i&&(a[i.ordinal]=i);return a}}),jt=gt.extend({init:function(e,t){this.transport=t,this.options=t.options||{},this.transport.discover||kt(e.discover)&&(this.discover=e.discover)},read:function(e){return this.transport.read(e)},update:function(e){return this.transport.update(e)},create:function(e){return this.transport.create(e)},destroy:function(e){return this.transport.destroy(e)},discover:function(e){return this.transport.discover?this.transport.discover(e):(e.success({}),t)},catalog:function(n){var i,r=this.options||{};return n===t?(r.connection||{}).catalog:(i=r.connection||{},i.catalog=n,this.options.connection=i,e.extend(this.transport.options,{connection:i}),t)},cube:function(e){var n,i=this.options||{};return e===t?(i.connection||{}).cube:(n=i.connection||{},n.cube=e,this.options.connection=n,bt(!0,this.transport.options,{connection:n}),t)}}),Gt=vt.extend({init:function(t){var r,o=((t||{}).schema||{}).cube,a="columns",s={axes:yt,cubes:yt,catalogs:yt,measures:yt,dimensions:yt,hierarchies:yt,levels:yt,members:yt};o&&(s=e.extend(s,this._cubeSchema(o)),this.cubeBuilder=new Wt(o)),vt.fn.init.call(this,bt(!0,{},{schema:s},t)),this.transport=new jt(this.options.transport||{},this.transport),this._columns=i(this.options.columns),this._rows=i(this.options.rows),r=this.options.measures||[],null!==this.options.measures&&"[object Object]"===_t.call(this.options.measures)&&(r=this.options.measures.values||[],a=this.options.measures.axis||"columns"),this._measures=n(r||[]),this._measuresAxis=a,this._axes={}},_cubeSchema:function(e){return{dimensions:function(){var t,n=[],i=e.dimensions;for(t in i)n.push({name:t,caption:i[t].caption||t,uniqueName:t,defaultHierarchy:t,type:1});return e.measures&&n.push({name:"Measures",caption:"Measures",uniqueName:"Measures",type:2}),n},hierarchies:function(){return[]},measures:function(){var t,n=[],i=e.measures;for(t in i)n.push({name:t,caption:t,uniqueName:t,aggregator:t});return n}}},options:{serverSorting:!0,serverPaging:!0,serverFiltering:!0,serverGrouping:!0,serverAggregates:!0},catalog:function(e){return e===t?this.transport.catalog():(this.transport.catalog(e),this._mergeState({}),this._axes={},this.data([]),t)},cube:function(e){return e===t?this.transport.cube():(this.transport.cube(e),this._axes={},this._mergeState({}),this.data([]),t)},axes:function(){return this._axes},columns:function(e){return e===t?this._columns:(this._clearAxesData=!0,this._columns=i(e),this.query({columns:e,rows:this.rowsAxisDescriptors(),measures:this.measures()}),t)},rows:function(e){return e===t?this._rows:(this._clearAxesData=!0,this._rows=i(e),this.query({columns:this.columnsAxisDescriptors(),rows:e,measures:this.measures()}),t)},measures:function(e){return e===t?this._measures:(this._clearAxesData=!0,this.query({columns:this.columnsAxisDescriptors(),rows:this.rowsAxisDescriptors(),measures:n(e)}),t)},measuresAxis:function(){return this._measuresAxis||"columns"},_expandPath:function(e,t){var n,r,o,a="columns"===t?"columns":"rows",s="columns"===t?"rows":"columns",c=i(e),d=O(c[c.length-1]);for(this._lastExpanded=a,c=l(this.axes()[a],c,this.measures()),n=0;c.length>n;n++)if(r=O(c[n]),r===d){if(c[n].expand)return;c[n].expand=!0}else c[n].expand=!1;o={},o[a]=c,o[s]=this._descriptorsForAxis(s),this._query(o)},_descriptorsForAxis:function(e){var t=this.axes(),n=this[e]()||[];return t&&t[e]&&t[e].tuples&&t[e].tuples[0]&&(n=o(t[e].tuples||[])),n},columnsAxisDescriptors:function(){return this._descriptorsForAxis("columns")},rowsAxisDescriptors:function(){return this._descriptorsForAxis("rows")},_process:function(e,t){this._view=e,t=t||{},t.items=t.items||this._view,this.trigger(xt,t)},_query:function(e){var t=this;return e||(this._clearAxesData=!0),t.query(bt({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate(),columns:this.columnsAxisDescriptors(),rows:this.rowsAxisDescriptors(),measures:this.measures()},e))},query:function(t){var n=this._mergeState(t);return this._data.length&&this.cubeBuilder?(this._params(n),this._updateLocalData(this._pristineData),e.Deferred().resolve().promise()):this.read(n)},_mergeState:function(e){return e=vt.fn._mergeState.call(this,e),e!==t&&(this._measures=n(e.measures),e.columns?e.columns=i(e.columns):e.columns||(this._columns=[]),e.rows?e.rows=i(e.rows):e.rows||(this._rows=[])),e},filter:function(e){return e===t?this._filter:(this._clearAxesData=!0,this._query({filter:e,page:1}),t)},expandColumn:function(e){this._expandPath(e,"columns")},expandRow:function(e){this._expandPath(e,"rows")},success:function(e){var t;this.cubeBuilder&&(t=(this.reader.data(e)||[]).slice(0)),vt.fn.success.call(this,e),t&&(this._pristineData=t)},_processResult:function(e,t){var n,i,r,o,a,s,l,c,d,u,h;return this.cubeBuilder&&(n=this.cubeBuilder.process(e,this._requestData),e=n.data,t=n.axes),c=this.columns().length,d=this.rows().length,u=t.columns&&t.columns.tuples,c||!d||!u||!this._rowMeasures().length&&this.measures().length||(t={columns:{},rows:t.columns}),c||d||"rows"!==this.measuresAxis()||!u||(t={columns:{},rows:t.columns}),this._axes={columns:y(this._axes.columns),rows:y(this._axes.rows)},t={columns:y(t.columns),rows:y(t.rows)},i=this._normalizeTuples(t.columns.tuples,this._axes.columns.tuples,this._columnMeasures()),r=this._normalizeTuples(t.rows.tuples,this._axes.rows.tuples,this._rowMeasures()),this.cubeBuilder||(e=this._normalizeData({columnsLength:t.columns.tuples.length,rowsLength:t.rows.tuples.length,columnIndexes:i,rowIndexes:r,data:e})),"rows"==this._lastExpanded?(o=t.columns.tuples,s=this._columnMeasures(),a=f(t.columns,this._axes.columns,s),a&&(l="columns",t.columns=a,g(o,a.tuples,t.rows.tuples.length,s,e),e=this._normalizeData({columnsLength:_(t.columns.tuples,s),rowsLength:t.rows.tuples.length,data:e}))):"columns"==this._lastExpanded&&(o=t.rows.tuples,s=this._rowMeasures(),a=f(t.rows,this._axes.rows,s),a&&(l="rows",t.rows=a,m(o,a.tuples,t.columns.tuples.length,s,e),e=this._normalizeData({columnsLength:_(t.rows.tuples,s),rowsLength:t.columns.tuples.length,data:e}))),this._lastExpanded=null,h=this._mergeAxes(t,e,l),this._axes=h.axes,h.data},_readData:function(e){var t=this.reader.axes(e),n=this.reader.data(e);return this._processResult(n,t)},_createTuple:function(e,t,n){var i,r,o,a,s,l=e.members,c=l.length,d={members:[]},u=0;for(t&&(c-=1);c>u;u++)r=l[u],a=+r.levelNum,i=r.name,o=r.parentName,s=r.caption||i,n&&(s="All",0===a?o=r.name:a-=1,i=o),d.members.push({name:i,children:[],caption:s,levelName:o,levelNum:""+a,hasChildren:n,hierarchy:o,parentName:n?"":o});return t&&d.members.push({name:t.name,children:[]}),d},_hasRoot:function(e,t){var n,i,r,o,a,s;if(t.length)return x(t,e).tuple;for(n=e.members,r=!0,a=0,s=n.length;s>a;a++)if(i=n[a],o=+i.levelNum||0,0!==o){r=!1;break}return r},_mergeAxes:function(e,t,n){var i,r,o,a,s,l=this._columnMeasures(),c=this._rowMeasures(),d=this.axes(),u=e.rows.tuples.length,h=_(d.columns.tuples,l),p=e.columns.tuples.length;return"columns"==n?(p=h,r=e.columns.tuples):(r=A(e.columns.tuples,l),t=M(r,t)),o=b(d.columns.tuples,r,l),"rows"==n?(u=_(e.rows.tuples,c),r=e.rows.tuples):(r=A(e.rows.tuples,c),t=E(r,t)),a=b(d.rows.tuples,r,c),d.columns.tuples=o.tuples,d.rows.tuples=a.tuples,h!==_(d.columns.tuples,l)?(i=o.index+w(o.parsedRoot,o.memberIndex,l),s=h+p,t=this._mergeColumnData(t,i,u,p,s)):(i=a.index+w(a.parsedRoot,a.memberIndex,c),t=this._mergeRowData(t,i,u,p)),{axes:d,data:t}},_mergeColumnData:function(e,t,n,i,r){var o,a,s,l=this.data().toJSON(),c=0,d=Math.max(this._columnMeasures().length,1);for(n=Math.max(n,1),l.length>0&&(c=d,r-=d),o=0;n>o;o++)a=t+o*r,s=e.splice(0,i),s.splice(0,c),[].splice.apply(l,[a,0].concat(s));return l},_mergeRowData:function(e,t,n,i){var r,o,a,s=this.data().toJSON(),l=Math.max(this._rowMeasures().length,1);for(i=Math.max(i,1),s.length>0&&(n-=l,e.splice(0,i*l)),r=0;n>r;r++)a=e.splice(0,i),o=t*i+r*i,[].splice.apply(s,[o,0].concat(a));return s},_columnMeasures:function(){var e=this.measures(),t=[];return"columns"===this.measuresAxis()&&(0===this.columns().length?t=e:e.length>1&&(t=e)),t},_rowMeasures:function(){var e=this.measures(),t=[];return"rows"===this.measuresAxis()&&(0===this.rows().length?t=e:e.length>1&&(t=e)),t},_updateLocalData:function(e,t){this.cubeBuilder&&(t&&(this._requestData=t),e=this._processResult(e)),this._data=this._observe(e),this._ranges=[],this._addRange(this._data),this._total=this._data.length,this._pristineTotal=this._total,this._process(this._data)},data:function(e){var n=this;return e===t?n._data:(this._pristineData=e.slice(0),this._updateLocalData(e,{columns:this.columns(),rows:this.rows(),measures:this.measures()}),t)},_normalizeTuples:function(e,t,n){var i,r,o,a=n.length||1,s=0,l=[],c={},d=0;if(e.length){if(!this._hasRoot(e[0],t)){for(;a>s;s++)l.push(this._createTuple(e[0],n[s],!0)),c[s]=s;e.splice.apply(e,[0,e.length].concat(l).concat(e)),s=a}if(n.length)for(o=i=e[s],r=i.members.length-1;i;){if(d>=a&&(d=0),i.members[r].name!==n[d].name&&(e.splice(s,0,this._createTuple(i,n[d])),c[s]=s),s+=1,d+=1,i=e[s],a>d&&(!i||ct(o,r-1)!==ct(i,r-1))){for(;a>d;d++)e.splice(s,0,this._createTuple(o,n[d])),c[s]=s,s+=1;i=e[s]}o=i}return c}},_normalizeData:function(e){var n,i,r=e.data,o=e.columnIndexes||{},a=e.rowIndexes||{},s=e.columnsLength||1,l=s*(e.rowsLength||1),c=0,d=0,u=0,h=Array(l);if(r.length===l)return r;for(;l>c;c++){if(a[parseInt(c/s,10)]!==t)for(i=0;s>i;i++)h[c]={value:"",fmtValue:"",ordinal:c},c+=1;if(o[c%s]!==t&&(h[c]={value:"",fmtValue:"",ordinal:c},c+=1),n=r[d]){if(n.ordinal-u>1)for(u+=1;n.ordinal>u;u++)h[c]={value:"",fmtValue:"",ordinal:c},c+=1;u=n.ordinal,n.ordinal=c,h[c]=n,d+=1}else h[c]={value:"",fmtValue:"",ordinal:c}}return h},discover:function(t,n){var i=this,r=i.transport;return e.Deferred(function(e){r.discover(bt({success:function(t){t=i.reader.parse(t),i._handleCustomErrors(t)||(n&&(t=n(t)),e.resolve(t))},error:function(t,n,r){e.reject(t),i.error(t,n,r)}},t))}).promise().done(function(){i.trigger("schemaChange")})},schemaMeasures:function(){var e=this;return e.discover({data:{command:"schemaMeasures",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.measures(t)})},schemaKPIs:function(){var e=this;return e.discover({data:{command:"schemaKPIs",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.kpis(t)})},schemaDimensions:function(){var e=this;return e.discover({data:{command:"schemaDimensions",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.dimensions(t)})},schemaHierarchies:function(e){var t=this;return t.discover({data:{command:"schemaHierarchies",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube(),dimensionUniqueName:e}}},function(e){return t.reader.hierarchies(e)})},schemaLevels:function(e){var t=this;return t.discover({data:{command:"schemaLevels",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube(),hierarchyUniqueName:e}}},function(e){return t.reader.levels(e)})},schemaCubes:function(){var e=this;return e.discover({data:{command:"schemaCubes",restrictions:{catalogName:e.transport.catalog()}}},function(t){return e.reader.cubes(t)})},schemaCatalogs:function(){var e=this;return e.discover({data:{command:"schemaCatalogs"}},function(t){return e.reader.catalogs(t)})},schemaMembers:function(e){var t=this;return t.discover({data:{command:"schemaMembers",restrictions:bt({catalogName:t.transport.catalog(),cubeName:t.transport.cube()},e)}},function(e){return t.reader.members(e)})},_params:function(e){this._clearAxesData&&(this._axes={},this._data=this._observe([]),this._clearAxesData=!1,this.trigger(Tt));var t=vt.fn._params.call(this,e);return t=bt({measures:this.measures(),measuresAxis:this.measuresAxis(),columns:this.columns(),rows:this.rows()},t),this.cubeBuilder&&(this._requestData=t),t}});Gt.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},n=t.data;if(t.data=n,!(t instanceof Gt)&&t instanceof pt.data.DataSource)throw Error("Incorrect DataSource type. Only PivotDataSource instances are supported");return t instanceof Gt?t:new Gt(t)},Y={contains:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") > 0',doesnotcontain:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") = 0',startswith:', Left({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',endswith:', Right({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',eq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',neq:', NOT {0}.CurrentMember.MEMBER_CAPTION = "{1}"'},K={schemaCubes:"MDSCHEMA_CUBES",schemaCatalogs:"DBSCHEMA_CATALOGS",schemaMeasures:"MDSCHEMA_MEASURES",schemaDimensions:"MDSCHEMA_DIMENSIONS",schemaHierarchies:"MDSCHEMA_HIERARCHIES",schemaLevels:"MDSCHEMA_LEVELS",schemaMembers:"MDSCHEMA_MEMBERS",schemaKPIs:"MDSCHEMA_KPIS"},Q={read:function(e){var t,n,i,r,o,a='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement>';return a+="SELECT NON EMPTY {",t=e.columns||[],n=e.rows||[],i=e.measures||[],r="rows"===e.measuresAxis,o=e.sort||[],!t.length&&n.length&&(!i.length||i.length&&r)&&(t=n,n=[],r=!1),t.length||n.length||(r=!1),t.length?a+=U(t,r?[]:i,o):i.length&&!r&&(a+=L(i).join(",")),a+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS",(n.length||r&&i.length>1)&&(a+=", NON EMPTY {",a+=n.length?U(n,r?i:[],o):L(i).join(","),a+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS"),e.filter?(a+=" FROM ",a+="(",a+=j(e.filter,e.connection.cube),a+=")"):a+=" FROM ["+e.connection.cube+"]",1==i.length&&t.length&&(a+=" WHERE ("+L(i).join(",")+")"),a+="</Statement></Command><Properties><PropertyList><Catalog>"+e.connection.catalog+"</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>",a.replace(/\&/g,"&amp;")},discover:function(t){t=t||{};var n='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis">';return n+="<RequestType>"+(K[t.command]||t.command)+"</RequestType>",n+="<Restrictions>"+G("RestrictionList",t.restrictions,!0)+"</Restrictions>",t.connection&&t.connection.catalog&&(t.properties=e.extend({},{Catalog:t.connection.catalog},t.properties)),n+="<Properties>"+G("PropertyList",t.properties)+"</Properties>",n+="</Discover></Body></Envelope>"}},X=pt.data.RemoteTransport.extend({init:function(e){var t=e;e=this.options=bt(!0,{},this.options,e),pt.data.RemoteTransport.call(this,e),kt(t.discover)?this.discover=t.discover:"string"==typeof t.discover?this.options.discover={url:t.discover}:t.discover||(this.options.discover=this.options.read)},setup:function(t,n){return t.data=t.data||{},e.extend(!0,t.data,{connection:this.options.connection}),pt.data.RemoteTransport.fn.setup.call(this,t,n)},options:{read:{dataType:"text",contentType:"text/xml",type:"POST"},discover:{dataType:"text",contentType:"text/xml",type:"POST"},parameterMap:function(e,t){return Q[t](e,t)}},discover:function(t){return e.ajax(this.setup(t,"discover"))}}),J={cubes:{name:pt.getter("CUBE_NAME['#text']",!0),caption:pt.getter("CUBE_CAPTION['#text']",!0),description:pt.getter("DESCRIPTION['#text']",!0),type:pt.getter("CUBE_TYPE['#text']",!0)},catalogs:{name:pt.getter("CATALOG_NAME['#text']",!0),description:pt.getter("DESCRIPTION['#text']",!0)},measures:{name:pt.getter("MEASURE_NAME['#text']",!0),caption:pt.getter("MEASURE_CAPTION['#text']",!0),uniqueName:pt.getter("MEASURE_UNIQUE_NAME['#text']",!0),description:pt.getter("DESCRIPTION['#text']",!0),aggregator:pt.getter("MEASURE_AGGREGATOR['#text']",!0),groupName:pt.getter("MEASUREGROUP_NAME['#text']",!0),displayFolder:pt.getter("MEASURE_DISPLAY_FOLDER['#text']",!0),defaultFormat:pt.getter("DEFAULT_FORMAT_STRING['#text']",!0)},kpis:{name:pt.getter("KPI_NAME['#text']",!0),caption:pt.getter("KPI_CAPTION['#text']",!0),value:pt.getter("KPI_VALUE['#text']",!0),goal:pt.getter("KPI_GOAL['#text']",!0),status:pt.getter("KPI_STATUS['#text']",!0),trend:pt.getter("KPI_TREND['#text']",!0),statusGraphic:pt.getter("KPI_STATUS_GRAPHIC['#text']",!0),trendGraphic:pt.getter("KPI_TREND_GRAPHIC['#text']",!0),description:pt.getter("KPI_DESCRIPTION['#text']",!0),groupName:pt.getter("MEASUREGROUP_NAME['#text']",!0)},dimensions:{name:pt.getter("DIMENSION_NAME['#text']",!0),caption:pt.getter("DIMENSION_CAPTION['#text']",!0),description:pt.getter("DESCRIPTION['#text']",!0),uniqueName:pt.getter("DIMENSION_UNIQUE_NAME['#text']",!0),defaultHierarchy:pt.getter("DEFAULT_HIERARCHY['#text']",!0),type:pt.getter("DIMENSION_TYPE['#text']",!0)},hierarchies:{name:pt.getter("HIERARCHY_NAME['#text']",!0),caption:pt.getter("HIERARCHY_CAPTION['#text']",!0),description:pt.getter("DESCRIPTION['#text']",!0),uniqueName:pt.getter("HIERARCHY_UNIQUE_NAME['#text']",!0),dimensionUniqueName:pt.getter("DIMENSION_UNIQUE_NAME['#text']",!0),displayFolder:pt.getter("HIERARCHY_DISPLAY_FOLDER['#text']",!0),origin:pt.getter("HIERARCHY_ORIGIN['#text']",!0),defaultMember:pt.getter("DEFAULT_MEMBER['#text']",!0)},levels:{name:pt.getter("LEVEL_NAME['#text']",!0),caption:pt.getter("LEVEL_CAPTION['#text']",!0),description:pt.getter("DESCRIPTION['#text']",!0),uniqueName:pt.getter("LEVEL_UNIQUE_NAME['#text']",!0),dimensionUniqueName:pt.getter("DIMENSION_UNIQUE_NAME['#text']",!0),displayFolder:pt.getter("LEVEL_DISPLAY_FOLDER['#text']",!0),orderingProperty:pt.getter("LEVEL_ORDERING_PROPERTY['#text']",!0),origin:pt.getter("LEVEL_ORIGIN['#text']",!0),hierarchyUniqueName:pt.getter("HIERARCHY_UNIQUE_NAME['#text']",!0)},members:{name:pt.getter("MEMBER_NAME['#text']",!0),caption:pt.getter("MEMBER_CAPTION['#text']",!0),uniqueName:pt.getter("MEMBER_UNIQUE_NAME['#text']",!0),dimensionUniqueName:pt.getter("DIMENSION_UNIQUE_NAME['#text']",!0),hierarchyUniqueName:pt.getter("HIERARCHY_UNIQUE_NAME['#text']",!0),levelUniqueName:pt.getter("LEVEL_UNIQUE_NAME['#text']",!0),childrenCardinality:pt.getter("CHILDREN_CARDINALITY['#text']",!0)}},Z=["axes","catalogs","cubes","dimensions","hierarchies","levels","measures"],et=pt.data.XmlDataReader.extend({init:function(e){pt.data.XmlDataReader.call(this,e),this._extend(e)
},_extend:function(e){for(var t,n,i=0,r=Z.length;r>i;i++)t=Z[i],n=e[t],n&&n!==yt&&(this[t]=n)},parse:function(e){var t=pt.data.XmlDataReader.fn.parse(e.replace(/<(\/?)(\w|-)+:/g,"<$1"));return pt.getter("['Envelope']['Body']",!0)(t)},errors:function(e){var t=pt.getter("['Fault']",!0)(e);return t?[{faultstring:pt.getter("faultstring['#text']",!0)(t),faultcode:pt.getter("faultcode['#text']",!0)(t)}]:null},axes:function(e){var t,n,i;return e=pt.getter("ExecuteResponse.return.root",!0)(e),t=q(pt.getter("Axes.Axis",!0)(e)),n=$(t[0]),i={},t.length>2&&(i=$(t[1])),{columns:n,rows:i}},data:function(e){var t,n,i,r,o,a;for(e=pt.getter("ExecuteResponse.return.root",!0)(e),t=q(pt.getter("CellData.Cell",!0)(e)),n=[],i=pt.getter("['@CellOrdinal']"),r=pt.getter("Value['#text']"),o=pt.getter("FmtValue['#text']"),a=0;t.length>a;a++)n.push({value:r(t[a]),fmtValue:o(t[a]),ordinal:parseInt(i(t[a]),10)});return n},_mapSchema:function(e,t){var n,i,r,o,a;for(e=pt.getter("DiscoverResponse.return.root",!0)(e),n=q(pt.getter("row",!0)(e)),i=[],r=0;n.length>r;r++){o={};for(a in t)o[a]=t[a](n[r]);i.push(o)}return i},measures:function(e){return this._mapSchema(e,J.measures)},kpis:function(e){return this._mapSchema(e,J.kpis)},hierarchies:function(e){return this._mapSchema(e,J.hierarchies)},levels:function(e){return this._mapSchema(e,J.levels)},dimensions:function(e){return this._mapSchema(e,J.dimensions)},cubes:function(e){return this._mapSchema(e,J.cubes)},catalogs:function(e){return this._mapSchema(e,J.catalogs)},members:function(e){return this._mapSchema(e,J.members)}}),bt(!0,pt.data,{PivotDataSource:Gt,XmlaTransport:X,XmlaDataReader:et,PivotCubeBuilder:Wt,transports:{xmla:X},readers:{xmla:et}}),tt=function(e,t){if(!e)return null;for(var n=0,i=e.length;i>n;n++)if(e[n].field===t)return e[n];return null},nt=function(e,t){var n,i,r=[];for(n=0,i=e.length;i>n;n++)e[n].field!==t&&r.push(e[n]);return r},pt.ui.PivotSettingTarget=mt.extend({init:function(t,n){var i=this;mt.fn.init.call(i,t,n),i.element.addClass("k-pivot-setting"),i.dataSource=pt.data.PivotDataSource.create(n.dataSource),i._refreshHandler=e.proxy(i.refresh,i),i.dataSource.first(xt,i._refreshHandler),n.template||(i.options.template="<div data-"+pt.ns+'name="${data.name || data}">${data.name || data}'+(i.options.enabled?'<a class="k-button k-button-icon k-button-bare"><span class="k-icon k-setting-delete"></span></a>':"")+"</div>"),i.template=pt.template(i.options.template),i.emptyTemplate=pt.template(i.options.emptyTemplate),i._sortable(),i.element.on("click"+Et,".k-button,.k-item",function(t){var n=e(t.target),r=n.closest("["+pt.attr("name")+"]").attr(pt.attr("name"));r&&(n.hasClass("k-setting-delete")?i.remove(r):i.options.sortable&&n[0]===t.currentTarget&&i.sort({field:r,dir:n.find(".k-i-sort-asc")[0]?"desc":"asc"}))}),(n.filterable||n.sortable)&&(i.fieldMenu=new ft.PivotFieldMenu(i.element,{messages:i.options.messages.fieldMenu,filter:".k-setting-fieldmenu",filterable:n.filterable,sortable:n.sortable,dataSource:i.dataSource})),i.refresh()},options:{name:"PivotSettingTarget",template:null,filterable:!1,sortable:!1,emptyTemplate:"<div class='k-empty'>${data}</div>",setting:"columns",enabled:!0,messages:{empty:"Drop Fields Here"}},setDataSource:function(e){this.dataSource.unbind(xt,this._refreshHandler),this.dataSource=this.options.dataSource=e,this.fieldMenu&&this.fieldMenu.setDataSource(e),e.first(xt,this._refreshHandler),this.refresh()},_sortable:function(){var e=this;e.options.enabled&&(this.sortable=this.element.kendoSortable({connectWith:this.options.connectWith,filter:">:not(.k-empty)",hint:e.options.hint,cursor:"move",start:function(e){e.item.focus().blur()},change:function(t){var n=t.item.attr(pt.attr("name"));"receive"==t.action?e.add(n):"remove"==t.action?e.remove(n):"sort"==t.action&&e.move(n,t.newIndex)}}).data("kendoSortable"))},_indexOf:function(e,t){var n,i,r=-1;for(n=0,i=t.length;i>n;n++)if(O(t[n])===e){r=n;break}return r},_isKPI:function(e){return"kpi"===e.type||e.measure},validate:function(e){var t,n,i=2==e.type||"aggregator"in e||this._isKPI(e);return i?"measures"===this.options.setting:"measures"===this.options.setting?i:(t=this.dataSource[this.options.setting](),n=e.defaultHierarchy||e.uniqueName,this._indexOf(n,t)>-1?!1:(t=this.dataSource["columns"===this.options.setting?"rows":"columns"](),this._indexOf(n,t)>-1?!1:!0))},add:function(t){var n,i,r=this.dataSource[this.options.setting]();for(t=e.isArray(t)?t.slice(0):[t],n=0,i=t.length;i>n;n++)-1!==this._indexOf(t[n],r)&&(t.splice(n,1),n-=1,i-=1);t.length&&(r=r.concat(t),this.dataSource[this.options.setting](r))},move:function(e,t){var n=this.dataSource[this.options.setting](),i=this._indexOf(e,n);i>-1&&(e=n.splice(i,1)[0],n.splice(t,0,e),this.dataSource[this.options.setting](n))},remove:function(e){var t=this.dataSource[this.options.setting](),n=this._indexOf(e,t);n>-1&&(t.splice(n,1),this.dataSource[this.options.setting](t))},sort:function(e){var t=this.options.sortable,n=t===!0||t.allowUnsort,i=n&&"asc"===e.dir,r=this.dataSource.sort()||[],o=nt(r,e.field);i&&r.length!==o.length&&(e=null),e&&o.push(e),this.dataSource.sort(o)},refresh:function(){var e,n="",i=this.dataSource[this.options.setting](),r=i.length,o=0;if(r)for(;r>o;o++)e=i[o],e=e.name===t?{name:e}:e,n+=this.template(bt({sortIcon:this._sortIcon(e.name)},e));else n=this.emptyTemplate(this.options.messages.empty);this.element.html(n)},destroy:function(){mt.fn.destroy.call(this),this.dataSource.unbind(xt,this._refreshHandler),this.element.off(Et),this.sortable&&this.sortable.destroy(),this.fieldMenu&&this.fieldMenu.destroy(),this.element=null,this._refreshHandler=null},_sortIcon:function(e){var t=this.dataSource.sort(),n=tt(t,O(e)),i="";return n&&(i="k-i-sort-"+n.dir),i}}),it=mt.extend({init:function(n,i){var r,o,a=this;mt.fn.init.call(a,n,i),a._dataSource(),a._bindConfigurator(),a._wrapper(),a._createLayout(),a._columnBuilder=r=new dt,a._rowBuilder=o=new ut,a._contentBuilder=new ht,a._templates(),a.columnsHeader.add(a.rowsHeader).on("click","span.k-icon",function(){var n,i,s,l,c=e(this),d=r,u="expandColumn",h=c.attr(pt.attr("path")),p={axis:"columns",path:e.parseJSON(h)};c.parent().is("td")&&(d=o,u="expandRow",p.axis="rows"),i=c.hasClass(Rt),s=d.metadata[h],l=s.expanded===t,n=i?Ft:zt,a.trigger(n,p)||(d.metadata[h].expanded=!i,c.toggleClass(Rt,!i).toggleClass(Bt,i),!i&&l?a.dataSource[u](p.path):a.refresh())}),a._scrollable(),a.options.autoBind&&a.dataSource.fetch(),pt.notify(a)},events:[Pt,It,zt,Ft],options:{name:"PivotGrid",autoBind:!0,reorderable:!0,filterable:!1,sortable:!1,height:null,columnWidth:100,configurator:"",columnHeaderTemplate:null,rowHeaderTemplate:null,dataCellTemplate:null,kpiStatusTemplate:null,kpiTrendTemplate:null,messages:{measureFields:"Drop Data Fields Here",columnFields:"Drop Column Fields Here",rowFields:"Drop Rows Fields Here"}},_templates:function(){var e=this.options.columnHeaderTemplate,t=this.options.rowHeaderTemplate,n=this.options.dataCellTemplate,i=this.options.kpiStatusTemplate,r=this.options.kpiTrendTemplate;this._columnBuilder.template=pt.template(e||Lt,{useWithBlock:!!e}),this._contentBuilder.dataTemplate=pt.template(n||Nt,{useWithBlock:!!n}),this._contentBuilder.kpiStatusTemplate=pt.template(i||Ot,{useWithBlock:!!i}),this._contentBuilder.kpiTrendTemplate=pt.template(r||Ht,{useWithBlock:!!r}),this._rowBuilder.template=pt.template(t||Lt,{useWithBlock:!!t})},_bindConfigurator:function(){var t=this.options.configurator;t&&e(t).kendoPivotConfigurator("setDataSource",this.dataSource)},cellInfoByElement:function(t){return t=e(t),this.cellInfo(t.index(),t.parent("tr").index())},cellInfo:function(e,t){var n,i=this._contentBuilder,r=i.columnIndexes[e||0],o=i.rowIndexes[t||0];return r&&o?(n=o.index*i.rowLength+r.index,{columnTuple:r.tuple,rowTuple:o.tuple,measure:r.measure||o.measure,dataItem:this.dataSource.view()[n]}):null},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.measuresTarget&&this.measuresTarget.setDataSource(e),this.rowsTarget&&this.rowsTarget.setDataSource(e),this.columnsTarget&&this.columnsTarget.setDataSource(e),this._bindConfigurator(),this.options.autoBind&&e.fetch()},setOptions:function(e){mt.fn.setOptions.call(this,e),this._templates()},_dataSource:function(){var t=this,n=t.options.dataSource;n=e.isArray(n)?{data:n}:n,t.dataSource&&this._refreshHandler?t.dataSource.unbind(xt,t._refreshHandler).unbind(Tt,t._stateResetHandler).unbind(St,t._progressHandler).unbind(Ct,t._errorHandler):(t._refreshHandler=e.proxy(t.refresh,t),t._progressHandler=e.proxy(t._requestStart,t),t._stateResetHandler=e.proxy(t._stateReset,t),t._errorHandler=e.proxy(t._error,t)),t.dataSource=pt.data.PivotDataSource.create(n).bind(xt,t._refreshHandler).bind(St,t._progressHandler).bind(Tt,t._stateResetHandler).bind(Ct,t._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_stateReset:function(){this._columnBuilder.reset(),this._rowBuilder.reset()},_wrapper:function(){var e=this.options.height;this.wrapper=this.element.addClass("k-widget k-pivot"),e&&this.wrapper.css("height",e)},_measureFields:function(){this.measureFields=e(At).addClass("k-pivot-toolbar k-header k-settings-measures"),this.measuresTarget=this._createSettingTarget(this.measureFields,{setting:"measures",messages:{empty:this.options.messages.measureFields}})},_createSettingTarget:function(t,n){var i='<span tabindex="0" class="k-button" data-'+pt.ns+'name="${data.name}">${data.name}',r=n.sortable,o="";return r&&(o+="#if (data.sortIcon) {#",o+='<span class="k-icon ${data.sortIcon} k-setting-sort"></span>',o+="#}#"),(n.filterable||r)&&(o+='<span class="k-icon k-i-arrowhead-s k-setting-fieldmenu"></span>'),this.options.reorderable&&(o+='<span class="k-icon k-si-close k-setting-delete"></span>'),o&&(i+='<span class="k-field-actions">'+o+"</span>"),i+="</span>",new pt.ui.PivotSettingTarget(t,e.extend({template:i,emptyTemplate:'<span class="k-empty">${data}</span>',enabled:this.options.reorderable,dataSource:this.dataSource},n))},_initSettingTargets:function(){this.columnsTarget=this._createSettingTarget(this.columnFields,{connectWith:this.rowFields,setting:"columns",filterable:this.options.filterable,sortable:this.options.sortable,messages:{empty:this.options.messages.columnFields,fieldMenu:this.options.messages.fieldMenu}}),this.rowsTarget=this._createSettingTarget(this.rowFields,{connectWith:this.columnFields,setting:"rows",filterable:this.options.filterable,sortable:this.options.sortable,messages:{empty:this.options.messages.rowFields,fieldMenu:this.options.messages.fieldMenu}})},_createLayout:function(){var t=this,n=e(Vt),i=n.find(".k-pivot-rowheaders"),r=n.find(".k-pivot-table"),o=e(At).addClass("k-grid k-widget");t._measureFields(),t.columnFields=e(At).addClass("k-pivot-toolbar k-header k-settings-columns"),t.rowFields=e(At).addClass("k-pivot-toolbar k-header k-settings-rows"),t.columnsHeader=e('<div class="k-grid-header-wrap" />').wrap('<div class="k-grid-header" />'),t.columnsHeader.parent().css("padding-right",pt.support.scrollbar()),t.rowsHeader=e('<div class="k-grid k-widget k-alt"/>'),t.content=e('<div class="k-grid-content" />'),i.append(t.measureFields),i.append(t.rowFields),i.append(t.rowsHeader),o.append(t.columnsHeader.parent()),o.append(t.content),r.append(t.columnFields),r.append(o),t.wrapper.append(n),t.columnsHeaderTree=new pt.dom.Tree(t.columnsHeader[0]),t.rowsHeaderTree=new pt.dom.Tree(t.rowsHeader[0]),t.contentTree=new pt.dom.Tree(t.content[0]),t._initSettingTargets()},_progress:function(e){pt.ui.progress(this.wrapper,e)},_resize:function(){var e=this.columnsHeader.children("table");this.content[0].firstChild&&(this._setSectionsWidth(),this._setSectionsHeight(),this._setContentWidth(),this._setContentHeight(),e.css("table-layout",Dt),clearTimeout(this._layoutTimeout),this._layoutTimeout=setTimeout(function(){e.css("table-layout","fixed")}))},_setSectionsWidth:function(){var e=this.rowsHeader,t=e.parent(".k-pivot-rowheaders").width(Dt),n=Math.max(this.measureFields.outerWidth(),this.rowFields.outerWidth());n=Math.max(e.children("table").width(),n),t.width(n)},_setSectionsHeight:function(){var e=this.measureFields.height(Dt).height(),t=this.columnFields.height(Dt).height(),n=this.rowFields.height(Dt).innerHeight(),i=this.columnsHeader.height(Dt).innerHeight(),r=n-this.rowFields.height(),o=t>e?t:e,a=i>n?i:n;this.measureFields.height(o),this.columnFields.height(o),this.rowFields.height(a-r),this.columnsHeader.height(a)},_setContentWidth:function(){var e=this.content.find("table"),t=this.content.width(),n=e.children("colgroup").children().length,i=100,r=n*this.options.columnWidth;r>t&&(i=Math.ceil(r/t*100)),e.add(this.columnsHeader.children("table")).css("min-width",i+"%")},_setContentHeight:function(){var e=this,n=e.content,i=e.rowsHeader,r=e.wrapper.innerHeight(),o=pt.support.scrollbar(),a=n[0].offsetHeight===n[0].clientHeight;if(e.wrapper.is(":visible")){if(!r)return a&&(o=0),i.height(n.height()-o),t;r-=e.columnFields.outerHeight(),r-=e.columnsHeader.outerHeight(),2*o>=r&&(r=2*o+1,a||(r+=o)),n.height(r),a&&(o=0),i.height(r-o)}},_axisMeasures:function(e){var t=[],n=this.dataSource,i=n.measures(),r=i.length>1||i[0]&&i[0].type;return n.measuresAxis()===e&&(0===n[e]().length||r)&&(t=i),t},refresh:function(){var e,t=this,n=t.dataSource,i=n.axes(),r=(i.columns||{}).tuples||[],o=(i.rows||{}).tuples||[],a=t._columnBuilder,s=t._rowBuilder,l={},c={};t.trigger(Pt,{action:"rebind"})||(a.measures=this._axisMeasures("columns"),t.columnsHeaderTree.render(a.build(r)),t.rowsHeaderTree.render(s.build(o)),l={indexes:a._indexes,measures:a.measures,metadata:a.metadata},c={indexes:s._indexes,measures:this._axisMeasures("rows"),metadata:s.metadata},t.contentTree.render(t._contentBuilder.build(n.view(),l,c)),t._resize(),t.touchScroller?t.touchScroller.contentResized():(e=pt.touchScroller(t.content),e&&e.movable&&(t.touchScroller=e,e.movable.bind("change",function(e){t.columnsHeader.scrollLeft(-e.sender.x),t.rowsHeader.scrollTop(-e.sender.y)}))),t._progress(!1),t.trigger(It))},_scrollable:function(){var t=this,n=t.columnsHeader,i=t.rowsHeader;t.content.scroll(function(){n.scrollLeft(this.scrollLeft),i.scrollTop(this.scrollTop)}),i.bind("DOMMouseScroll"+Et+" mousewheel"+Et,e.proxy(t._wheelScroll,t))},_wheelScroll:function(t){var n,i;t.ctrlKey||(n=pt.wheelDeltaY(t),i=this.content.scrollTop(),n&&(t.preventDefault(),e(t.currentTarget).one("wheel"+Et,!1),this.rowsHeader.scrollTop(i+-n),this.content.scrollTop(i+-n)))}}),rt=pt.dom.element,ot=pt.dom.html,at=pt.dom.text,st=function(e,t){return{maxChildren:0,children:0,maxMembers:0,members:0,measures:1,levelNum:e,parentMember:0!==t}},lt=function(e,t){for(var n=[],i=0;t>=i;i++)n.push(e.members[i].name);return n},ct=function(e,t){for(var n="",i=0;t>=i;i++)n+=e.members[i].name;return n},dt=gt.extend({init:function(){this.measures=1,this.metadata={}},build:function(e){var t=this._tbody(e),n=this._colGroup();return[rt("table",null,[n,t])]},reset:function(){this.metadata={}},_colGroup:function(){for(var e=this._rowLength(),t=[],n=0;e>n;n++)t.push(rt("col",null));return rt("colgroup",null,t)},_tbody:function(e){var t=e[0];return this.map={},this.rows=[],this.rootTuple=t,this._indexes=[],t?(this._buildRows(t,0),this._normalize()):this.rows.push(rt("tr",null,[rt("th",null,[ot("&nbsp;")])])),rt("tbody",null,this.rows)},_normalize:function(){for(var e,t,n,i,r,o=this.rows,a=o.length,s=0;a>s;s++)if(e=o[s],1!==e.rowSpan)for(i=e.children,n=0,t=i.length;t>n;n++)r=i[n],r.tupleAll&&(r.attr.rowSpan=e.rowSpan)},_rowIndex:function(e){for(var t=this.rows,n=t.length,i=0;n>i&&t[i]!==e;i++);return i},_rowLength:function(){var e=this.rows[0]?this.rows[0].children:[],t=e.length,n=0,i=0;if(t)for(;t>i;i++)n+=e[i].attr.colSpan||1;return n||(n=this.measures),n},_row:function(e,t,n){var i,r,o=this.rootTuple.members[t].name,a=e.members[t].levelNum,s=o+a,l=this.map,c=l[s];return c?(c.notFirst=!1,c.parentMember&&c.parentMember===n||(c.parentMember=n,c.colSpan=0)):(c=rt("tr",null,[]),c.parentMember=n,c.colSpan=0,c.rowSpan=1,l[s]=c,i=l[o+(+a-1)],i&&(r=i.children,c.notFirst=r[1]&&-1===r[1].attr.className.indexOf("k-alt")?!0:i.notFirst),this.rows.splice(this._rowIndex(i)+1,0,c)),c},_measures:function(e,t,n){var i,r,o,a=this.map,s=a.measureRow;for(s||(s=rt("tr",null,[]),a.measureRow=s,this.rows.push(s)),r=0,o=e.length;o>r;r++)i=e[r],s.children.push(rt("th",{className:"k-header"+(n||"")},[this._content(i,t)]));return o},_content:function(e,t){return ot(this.template({member:e,tuple:t}))},_cell:function(e,t){return rt("th",{className:"k-header"+e},t)},_buildRows:function(e,n,i){var r,o,a,s,l,c,d,u,h,p,f=e.members,g=f[n],m=f[n+1],v=[],_=0;if(g.measure)return this._measures(g.children,e),t;if(u=pt.stringify(lt(e,n)),r=this._row(e,n,i),a=g.children,s=a.length,p=this.metadata[u],p||(this.metadata[u]=p=st(+g.levelNum,n)),this._indexes.push({path:u,tuple:e}),g.hasChildren&&(p.expanded===!1&&(s=0,p.children=0),d={className:"k-icon "+(s?Rt:Bt)},d[pt.attr("path")]=u,v.push(rt("span",d))),v.push(this._content(g,e)),l=this._cell(r.notFirst?" k-first":"",v),r.children.push(l),r.colSpan+=1,s){for(c=this._cell(" k-alt",[this._content(g,e)]),r.children.push(c);s>_;_++)o=this._buildRows(a[_],n,g);h=o.colSpan,l.attr.colSpan=h,p.children=h,p.members=1,r.colSpan+=h,r.rowSpan=o.rowSpan+1,m&&(h=m.measure?this._measures(m.children,e," k-alt"):this._buildRows(e,n+1).colSpan,c.attr.colSpan=h,h-=1,p.members+=h,r.colSpan+=h)}else m&&(h=m.measure?this._measures(m.children,e):this._buildRows(e,n+1).colSpan,p.members=h,h>1&&(l.attr.colSpan=h,r.colSpan+=h-1));return p.children>p.maxChildren&&(p.maxChildren=p.children),p.members>p.maxMembers&&(p.maxMembers=p.members),(c||l).tupleAll=!0,r}}),ut=gt.extend({init:function(){this.metadata={}},build:function(e){var t=this._tbody(e),n=this._colGroup();return[rt("table",null,[n,t])]},reset:function(){this.metadata={}},_colGroup:function(){for(var e=this.rows[0].children.length,t=[],n=0;e>n;n++)t.push(rt("col",null));return rt("colgroup",null,t)},_tbody:function(e){var t=e[0];return this.rootTuple=t,this.rows=[],this.map={},this._indexes=[],t?(this._buildRows(t,0),this._normalize()):this.rows.push(rt("tr",null,[rt("td",null,[ot("&nbsp;")])])),rt("tbody",null,this.rows)},_normalize:function(){for(var e,t,n,i,r=this.rows,o=r.length,a=0,s=this.rootTuple.members,l=s[0].name,c=s.length,d=0,u=this.map;o>a;a++)for(e=r[a],d=0;c>d;d++)n=this[s[d].name],t=e.colSpan["dim"+d],t&&n>t.levelNum&&(t.attr.colSpan=n-t.levelNum+1);e=u[l],i=u[l+"all"],e&&(e.children[0].attr.className="k-first"),i&&(i.children[0].attr.className+=" k-first")},_row:function(e){var t=rt("tr",null,e);return t.rowSpan=1,t.colSpan={},this.rows.push(t),t},_content:function(e,t){return ot(this.template({member:e,tuple:t}))},_buildRows:function(e,t){var n,i,r,o,a,s,l,c,d,u=this.map,h=e.members,p=h[t],f=h[t+1],g=p.children,m=g.length,v=+p.levelNum+1,_=this.rootTuple.members[t].name,y=lt(e,t-1).join(""),w=y+(p.parentName||""),b=u[w+"all"]||u[w],k=[];if(!b||b.hasChild?b=this._row():b.hasChild=!0,p.measure){for(c={className:b.allCell?"k-grid-footer":""},b.children.push(rt("td",c,[this._content(g[0],e)])),b.rowSpan=m,d=1;m>d;d++)this._row([rt("td",c,[this._content(g[d],e)])]);return b}if(u[y+p.name]=b,n=pt.stringify(lt(e,t)),o=this.metadata[n],o||(this.metadata[n]=o=st(v-1,t)),this._indexes.push({path:n,tuple:e}),p.hasChildren&&(o.expanded===!1&&(m=0,o.children=0),a={className:"k-icon "+(m?Rt:Bt)},a[pt.attr("path")]=n,k.push(rt("span",a))),k.push(this._content(p,e)),l=rt("td",{className:b.allCell&&!m?"k-grid-footer":""},k),l.levelNum=v,b.children.push(l),b.colSpan["dim"+t]=l,(!this[_]||v>this[_])&&(this[_]=v),m){for(b.allCell=!1,b.hasChild=!1,d=0;m>d;d++)i=this._buildRows(g[d],t),b!==i&&(b.rowSpan+=i.rowSpan);b.rowSpan>1&&(l.attr.rowSpan=b.rowSpan),o.children=b.rowSpan,s=rt("td",{className:"k-grid-footer"},[this._content(p,e)]),s.levelNum=v,r=this._row([s]),r.colSpan["dim"+t]=s,r.allCell=!0,u[y+p.name+"all"]=r,f&&(i=this._buildRows(e,t+1),s.attr.rowSpan=i.rowSpan),b.rowSpan+=r.rowSpan,o.members=r.rowSpan}else f&&(b.hasChild=!1,this._buildRows(e,t+1),(s||l).attr.rowSpan=b.rowSpan,o.members=b.rowSpan);return o.children>o.maxChildren&&(o.maxChildren=o.children),o.members>o.maxMembers&&(o.maxMembers=o.members),b}}),ht=gt.extend({init:function(){this.columnAxis={},this.rowAxis={}},build:function(e,n,i){var r,o,a=n.indexes[0],s=n.metadata[a?a.path:t];return this.columnAxis=n,this.rowAxis=i,this.data=e,this.rowLength=s?s.maxChildren+s.maxMembers:n.measures.length||1,this.rowLength||(this.rowLength=1),r=this._tbody(),o=this._colGroup(),[rt("table",null,[o,r])]},_colGroup:function(){var e=this.columnAxis.measures.length||1,t=[],n=0;for(this.rows[0]&&(e=this.rows[0].children.length);e>n;n++)t.push(rt("col",null));return rt("colgroup",null,t)},_tbody:function(){return this.rows=[],this.data[0]?(this.columnIndexes=this._indexes(this.columnAxis),this.rowIndexes=this._indexes(this.rowAxis),this._buildRows()):this.rows.push(rt("tr",null,[rt("td",null,[ot("&nbsp;")])])),rt("tbody",null,this.rows)},_indexes:function(e){var n,i,r,o,a,s=[],l=e.indexes,c=e.metadata,d=e.measures,u=d.length||1,h=0,p=0,f=0,g=l.length;if(!g){for(r=0;u>r;r++)s[r]={index:r,measure:d[r],tuple:null};return s}for(;g>f;f++){if(n=l[f],i=c[n.path],o=i.children+i.members,a=0,o&&(o-=u),i.expanded===!1&&i.children!==i.maxChildren&&(a=i.maxChildren),i.parentMember&&0===i.levelNum&&(o=-1),o>-1){for(r=0;u>r;r++)s[o+p+r]={children:o,index:h,measure:d[r],tuple:n.tuple},h+=1;for(;s[p]!==t;)p+=1}h+=a}return s},_buildRows:function(){for(var e=this.rowIndexes,t=e.length,n=0;t>n;n++)this.rows.push(this._buildRow(e[n]))},_buildRow:function(e){for(var t,n,i,r,o,a,s=e.index*this.rowLength,l=this.columnIndexes,c=l.length,d=[],u=0;c>u;u++)t=l[u],r={},t.children&&(r.className="k-alt"),i="",o=this.data[s+t.index],a=t.measure||e.measure,n={columnTuple:t.tuple,rowTuple:e.tuple,measure:a,dataItem:o},""!==o.value&&a&&a.type&&("status"===a.type?i=this.kpiStatusTemplate(n):"trend"===a.type&&(i=this.kpiTrendTemplate(n))),i||(i=this.dataTemplate(n)),d.push(rt("td",r,[ot(i)]));return r={},e.children&&(r.className="k-grid-footer"),rt("tr",r,d)}}),ft.plugin(it)}(window.kendo.jQuery),function(e,t){function n(e){return function(t){var n=t.children(".k-animation-container");return n.length||(n=t),n.children(e)}}function i(e){return f.template(e,{useWithBlock:!1})}function r(e){return e.find("> div .k-checkbox [type=checkbox]")}function o(e){return function(t,n){n=n.closest(G);var i,r=n.parent();return r.parent().is("li")&&(i=r.parent()),this._dataSourceMove(t,r,i,function(t,i){return this._insert(t.data(),i,n.index()+e)})}}function a(t,n){for(var i;t&&"ul"!=t.nodeName.toLowerCase();)i=t,t=t.nextSibling,3==i.nodeType&&(i.nodeValue=e.trim(i.nodeValue)),p.test(i.className)?n.insertBefore(i,n.firstChild):n.appendChild(i)}function s(t){var n=t.children("div"),i=t.children("ul"),r=n.children(".k-icon"),o=t.children(":checkbox"),s=n.children(".k-in");t.hasClass("k-treeview")||(n.length||(n=e("<div />").prependTo(t)),!r.length&&i.length?r=e("<span class='k-icon' />").prependTo(n):i.length&&i.children().length||(r.remove(),i.remove()),o.length&&e("<span class='k-checkbox' />").appendTo(n).append(o),s.length||(s=t.children("a").eq(0).addClass("k-in"),s.length||(s=e("<span class='k-in' />")),s.appendTo(n),n.length&&a(n[0].nextSibling,s[0])))}function l(e){var t=this;t.treeview=e,t.hovered=e.element,t._draggable=new g.Draggable(e.element,{filter:"div:not(.k-state-disabled) .k-in",hint:function(t){return e.templates.dragClue({item:e.dataItem(t),treeview:e.options})},cursorOffset:{left:10,top:f.support.mobileOS?-40/f.support.zoomLevel():10},dragstart:k(t.dragstart,t),dragcancel:k(t.dragcancel,t),drag:k(t.drag,t),dragend:k(t.dragend,t),$angular:e.options.$angular})}var c,d,u,h,p,f=window.kendo,g=f.ui,m=f.data,v=e.extend,_=f.template,y=e.isArray,w=g.Widget,b=m.HierarchicalDataSource,k=e.proxy,x=f.keys,C=".kendoTreeView",S="select",T="check",D="navigate",A="expand",E="change",M="error",P="checked",I="indeterminate",z="collapse",F="dragstart",R="drag",B="drop",L="dragend",O="dataBound",H="click",N="visibility",V="undefined",U="k-state-hover",W="k-treeview",j=":visible",G=".k-item",q="string",$="aria-selected",Y="aria-disabled",K={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},Q=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&typeof e.nodeName===q};d=n(".k-group"),u=n(".k-group,.k-content"),h=function(e){return e.children("div").children(".k-icon")},p=/k-sprite/,c=f.ui.DataBoundWidget.extend({init:function(e,t){var n,i,r=this,o=!1,a=t&&!!t.dataSource;y(t)&&(n=!0,t={dataSource:t}),t&&typeof t.loadOnDemand==V&&y(t.dataSource)&&(t.loadOnDemand=!1),w.prototype.init.call(r,e,t),e=r.element,t=r.options,i=e.is("ul")&&e||e.hasClass(W)&&e.children("ul"),o=!a&&i.length,o&&(t.dataSource.list=i),r._animation(),r._accessors(),r._templates(),e.hasClass(W)?(r.wrapper=e,r.root=e.children("ul").eq(0)):(r._wrapper(),i&&(r.root=e,r._group(r.wrapper))),r._tabindex(),r.root.attr("role","tree"),r._dataSource(o),r._attachEvents(),r._dragging(),o?r._syncHtmlAndDataSource():t.autoBind&&(r._progress(!0),r.dataSource.fetch()),t.checkboxes&&t.checkboxes.checkChildren&&r.updateIndeterminate(),r.element[0].id&&(r._ariaId=f.format("{0}_tv_active",r.element[0].id)),f.notify(r)},_attachEvents:function(){var t=this,n=".k-in:not(.k-state-selected,.k-state-disabled)",i="mouseenter";t.wrapper.on(i+C,".k-in.k-state-selected",function(e){e.preventDefault()}).on(i+C,n,function(){e(this).addClass(U)}).on("mouseleave"+C,n,function(){e(this).removeClass(U)}).on(H+C,n,k(t._click,t)).on("dblclick"+C,".k-in:not(.k-state-disabled)",k(t._toggleButtonClick,t)).on(H+C,".k-plus,.k-minus",k(t._toggleButtonClick,t)).on("keydown"+C,k(t._keydown,t)).on("focus"+C,k(t._focus,t)).on("blur"+C,k(t._blur,t)).on("mousedown"+C,".k-in,.k-checkbox :checkbox,.k-plus,.k-minus",k(t._mousedown,t)).on("change"+C,".k-checkbox :checkbox",k(t._checkboxChange,t)).on("click"+C,".k-checkbox :checkbox",k(t._checkboxClick,t)).on("click"+C,".k-request-retry",k(t._retryRequest,t)).on("click"+C,function(n){e(n.target).is(":kendoFocusable")||t.focus()})},_checkboxClick:function(t){var n=e(t.target);n.data(I)&&(n.data(I,!1).prop(I,!1).prop(P,!0),this._checkboxChange(t))},_syncHtmlAndDataSource:function(e,t){var n,i,o,a,s,l,c,d;for(e=e||this.root,t=t||this.dataSource,n=t.view(),i=f.attr("uid"),o=f.attr("expanded"),a=this.options.checkboxes,s=e.children("li"),l=0;s.length>l;l++)d=n[l],c=s.eq(l),c.attr("role","treeitem").attr(i,d.uid),d.expanded="true"===c.attr(o),a&&(d.checked=r(c).prop(P)),this._syncHtmlAndDataSource(c.children("ul"),d.children)},_animation:function(){var e=this.options,t=e.animation;t===!1?t={expand:{effects:{}},collapse:{hide:!0,effects:{}}}:t.collapse&&"effects"in t.collapse||(t.collapse=v({reverse:!0},t.expand)),v(t.collapse,{hide:!0}),e.animation=t},_dragging:function(){var e=this.options.dragAndDrop,t=this.dragging;e&&!t?this.dragging=new l(this):!e&&t&&(t.destroy(),this.dragging=null)},_templates:function(){var e=this,t=e.options,n=k(e._fieldAccessor,e);t.template&&typeof t.template==q?t.template=_(t.template):t.template||(t.template=i("# var text = "+n("text")+"(data.item); ## if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {##= text ## } else { ##: text ## } #")),e._checkboxes(),e.templates={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return e.firstLevel&&0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),n},cssClass:function(e,t){var n="",i=t.index,r=e.length-1;return e.firstLevel&&0===i&&(n+="k-top "),n+=0===i&&i!=r?"k-top":i==r?"k-bot":"k-mid"},textClass:function(e){var t="k-in";return e.enabled===!1&&(t+=" k-state-disabled"),e.selected===!0&&(t+=" k-state-selected"),t},toggleButtonClass:function(e){var t="k-icon";return t+=e.expanded!==!0?" k-plus":" k-minus",e.enabled===!1&&(t+="-disabled"),t},groupAttributes:function(e){var t="";return e.firstLevel||(t="role='group'"),t+(e.expanded!==!0?" style='display:none'":"")},groupCssClass:function(e){var t="k-group";return e.firstLevel&&(t+=" k-treeview-lines"),t},dragClue:i("<div class='k-header k-drag-clue'><span class='k-icon k-drag-status' />#= data.treeview.template(data) #</div>"),group:i("<ul class='#= data.r.groupCssClass(data.group) #'#= data.r.groupAttributes(data.group) #>#= data.renderItems(data) #</ul>"),itemContent:i("# var imageUrl = "+n("imageUrl")+"(data.item); ## var spriteCssClass = "+n("spriteCssClass")+"(data.item); ## if (imageUrl) { #<img class='k-image' alt='' src='#= imageUrl #'># } ## if (spriteCssClass) { #<span class='k-sprite #= spriteCssClass #' /># } ##= data.treeview.template(data) #"),itemElement:i("# var item = data.item, r = data.r; ## var url = "+n("url")+"(item); #<div class='#= r.cssClass(data.group, item) #'># if (item.hasChildren) { #<span class='#= r.toggleButtonClass(item) #' role='presentation' /># } ## if (data.treeview.checkboxes) { #<span class='k-checkbox' role='presentation'>#= data.treeview.checkboxes.template(data) #</span># } ## var tag = url ? 'a' : 'span'; ## var textAttr = url ? ' href=\\'' + url + '\\'' : ''; #<#=tag#  class='#= r.textClass(item) #'#= textAttr #>#= r.itemContent(data) #</#=tag#></div>"),item:i("# var item = data.item, r = data.r; #<li role='treeitem' class='#= r.wrapperCssClass(data.group, item) #' "+f.attr("uid")+"='#= item.uid #' aria-selected='#= item.selected ? \"true\" : \"false \" #' #=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= r.itemElement(data) #</li>"),loading:i("<div class='k-icon k-loading' /> #: data.messages.loading #"),retry:i("#: data.messages.requestFailed # <button class='k-button k-request-retry'>#: data.messages.retry #</button>")}},items:function(){return this.element.find(".k-item div:first-child")},setDataSource:function(e){var t=this.options;t.dataSource=e,this._dataSource(),this.dataSource.fetch(),t.checkboxes&&t.checkboxes.checkChildren&&this.updateIndeterminate()},_bindDataSource:function(){this._refreshHandler=k(this.refresh,this),this._errorHandler=k(this._error,this),this.dataSource.bind(E,this._refreshHandler),this.dataSource.bind(M,this._errorHandler)},_unbindDataSource:function(){var e=this.dataSource;e&&(e.unbind(E,this._refreshHandler),e.unbind(M,this._errorHandler))},_dataSource:function(e){function t(e){for(var n=0;e.length>n;n++)e[n]._initChildren(),e[n].children.fetch(),t(e[n].children.view())}var n=this,i=n.options,r=i.dataSource;r=y(r)?{data:r}:r,n._unbindDataSource(),r.fields||(r.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]),n.dataSource=r=b.create(r),e&&(r.fetch(),t(r.view())),n._bindDataSource()},events:[F,R,B,L,O,A,z,S,E,D,T],options:{name:"TreeView",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:100}},messages:{loading:"Loading...",requestFailed:"Request failed.",retry:"Retry"},dragAndDrop:!1,checkboxes:!1,autoBind:!0,loadOnDemand:!0,template:"",dataTextField:null},_accessors:function(){var e,t,n,i=this,r=i.options,o=i.element;for(e in K)t=r[K[e]],n=o.attr(f.attr(e+"-field")),!t&&n&&(t=n),t||(t=e),y(t)||(t=[t]),r[K[e]]=t},_fieldAccessor:function(t){var n=this.options[K[t]],i=n.length,r="(function(item) {";return 0===i?r+="return item['"+t+"'];":(r+="var levels = ["+e.map(n,function(e){return"function(d){ return "+f.expr(e)+"}"}).join(",")+"];",r+="return levels[Math.min(item.level(), "+i+"-1)](item)"),r+="})"},setOptions:function(e){w.fn.setOptions.call(this,e),this._animation(),this._dragging(),this._templates()},_trigger:function(e,t){return this.trigger(e,{node:t.closest(G)[0]})},_setChecked:function(t,n){if(t&&e.isFunction(t.view))for(var i=0,r=t.view();r.length>i;i++)r[i][P]=n,r[i].children&&this._setChecked(r[i].children,n)},_setIndeterminate:function(e){var t,n,i,o=d(e),a=!0;if(o.length&&(t=r(o.children()),n=t.length)){if(n>1){for(i=1;n>i;i++)if(t[i].checked!=t[i-1].checked||t[i].indeterminate||t[i-1].indeterminate){a=!1;
break}}else a=!t[0].indeterminate;return r(e).data(I,!a).prop(I,!a).prop(P,a&&t[0].checked)}},updateIndeterminate:function(e){var t,n,i;if(e=e||this.wrapper,t=d(e).children(),t.length){for(n=0;t.length>n;n++)this.updateIndeterminate(t.eq(n));i=this._setIndeterminate(e),i&&i.prop(P)&&(this.dataItem(e).checked=!0)}},_bubbleIndeterminate:function(e){if(e.length){var t,n=this.parent(e);n.length&&(this._setIndeterminate(n),t=n.children("div").find(".k-checkbox :checkbox"),t.prop(I)===!1?this.dataItem(n).set(P,t.prop(P)):this.dataItem(n).checked=!1,this._bubbleIndeterminate(n))}},_checkboxChange:function(t){var n=e(t.target),i=n.prop(P),r=n.closest(G);this.dataItem(r).set(P,i),this._trigger(T,r)},_toggleButtonClick:function(t){this.toggle(e(t.target).closest(G))},_mousedown:function(t){var n=e(t.currentTarget).closest(G);this._clickTarget=n,this.current(n)},_focusable:function(e){return e&&e.length&&e.is(":visible")&&!e.find(".k-in:first").hasClass("k-state-disabled")},_focus:function(){var t=this.select(),n=this._clickTarget;f.support.touch||(n&&n.length&&(t=n),this._focusable(t)||(t=this.current()),this._focusable(t)||(t=this._nextVisible(e())),this.current(t))},focus:function(){var e,t=this.wrapper,n=t[0],i=[],r=[],o=document.documentElement;do n=n.parentNode,n.scrollHeight>n.clientHeight&&(i.push(n),r.push(n.scrollTop));while(n!=o);for(t.focus(),e=0;i.length>e;e++)i[e].scrollTop=r[e]},_blur:function(){this.current().find(".k-in:first").removeClass("k-state-focused")},_enabled:function(e){return!e.children("div").children(".k-in").hasClass("k-state-disabled")},parent:function(t){var n,i,r=/\bk-treeview\b/,o=/\bk-item\b/;typeof t==q&&(t=this.element.find(t)),Q(t)||(t=t[0]),i=o.test(t.className);do t=t.parentNode,o.test(t.className)&&(i?n=t:i=!0);while(!r.test(t.className)&&!n);return e(n)},_nextVisible:function(e){function t(e){for(;e.length&&!e.next().length;)e=i.parent(e);return e.next().length?e.next():e}var n,i=this,r=i._expanded(e);return e.length&&e.is(":visible")?r?(n=d(e).children().first(),n.length||(n=t(e))):n=t(e):n=i.root.children().eq(0),i._enabled(n)||(n=i._nextVisible(n)),n},_previousVisible:function(e){var t,n,i=this;if(!e.length||e.prev().length)for(n=e.length?e.prev():i.root.children().last();i._expanded(n)&&(t=d(n).children().last(),t.length);)n=t;else n=i.parent(e)||e;return i._enabled(n)||(n=i._previousVisible(n)),n},_keydown:function(n){var i,r=this,o=n.keyCode,a=r.current(),s=r._expanded(a),l=a.find(".k-checkbox:first :checkbox"),c=f.support.isRtl(r.element);n.target==n.currentTarget&&(!c&&o==x.RIGHT||c&&o==x.LEFT?s?i=r._nextVisible(a):r.expand(a):!c&&o==x.LEFT||c&&o==x.RIGHT?s?r.collapse(a):(i=r.parent(a),r._enabled(i)||(i=t)):o==x.DOWN?i=r._nextVisible(a):o==x.UP?i=r._previousVisible(a):o==x.HOME?i=r._nextVisible(e()):o==x.END?i=r._previousVisible(e()):o==x.ENTER?a.find(".k-in:first").hasClass("k-state-selected")||r._trigger(S,a)||r.select(a):o==x.SPACEBAR&&l.length&&(l.prop(P,!l.prop(P)).data(I,!1).prop(I,!1),r._checkboxChange({target:l}),i=a),i&&(n.preventDefault(),a[0]!=i[0]&&(r._trigger(D,i),r.current(i))))},_click:function(t){var n,i=this,r=e(t.currentTarget),o=u(r.closest(G)),a=r.attr("href");n=a?"#"==a||a.indexOf("#"+this.element.id+"-")>=0:o.length&&!o.children().length,n&&t.preventDefault(),r.hasClass(".k-state-selected")||i._trigger(S,r)||i.select(r)},_wrapper:function(){var e,t,n=this,i=n.element,r="k-widget k-treeview";i.is("ul")?(e=i.wrap("<div />").parent(),t=i):(e=i,t=e.children("ul").eq(0)),n.wrapper=e.addClass(r),n.root=t},_group:function(e){var t=this,n=e.hasClass(W),i={firstLevel:n,expanded:n||t._expanded(e)},r=e.children("ul");r.addClass(t.templates.groupCssClass(i)).css("display",i.expanded?"":"none"),t._nodes(r,i)},_nodes:function(t,n){var i,r=this,o=t.children("li");n=v({length:o.length},n),o.each(function(t,o){o=e(o),i={index:t,expanded:r._expanded(o)},s(o),r._updateNodeClasses(o,n,i),r._group(o)})},_checkboxes:function(){var e,t=this.options,n=t.checkboxes;n&&(e="<input type='checkbox' #= (item.enabled === false) ? 'disabled' : '' # #= item.checked ? 'checked' : '' #",n.name&&(e+=" name='"+n.name+"'"),e+=" />",n=v({template:e},t.checkboxes),typeof n.template==q&&(n.template=_(n.template)),t.checkboxes=n)},_updateNodeClasses:function(e,t,n){var i=e.children("div"),r=e.children("ul"),o=this.templates;e.hasClass("k-treeview")||(n=n||{},n.expanded=typeof n.expanded!=V?n.expanded:this._expanded(e),n.index=typeof n.index!=V?n.index:e.index(),n.enabled=typeof n.enabled!=V?n.enabled:!i.children(".k-in").hasClass("k-state-disabled"),t=t||{},t.firstLevel=typeof t.firstLevel!=V?t.firstLevel:e.parent().parent().hasClass(W),t.length=typeof t.length!=V?t.length:e.parent().children().length,e.removeClass("k-first k-last").addClass(o.wrapperCssClass(t,n)),i.removeClass("k-top k-mid k-bot").addClass(o.cssClass(t,n)),i.children(".k-in").removeClass("k-in k-state-default k-state-disabled").addClass(o.textClass(n)),(r.length||"true"==e.attr("data-hasChildren"))&&(i.children(".k-icon").removeClass("k-plus k-minus k-plus-disabled k-minus-disabled").addClass(o.toggleButtonClass(n)),r.addClass("k-group")))},_processNodes:function(t,n){var i=this;i.element.find(t).each(function(t,r){n.call(i,t,e(r).closest(G))})},dataItem:function(t){var n=e(t).closest(G).attr(f.attr("uid")),i=this.dataSource;return i&&i.getByUid(n)},_insertNode:function(t,n,i,r,o){var a,l,c,u,h=this,p=d(i),f=p.children().length+1,g={firstLevel:i.hasClass(W),expanded:!o,length:f},m="",v=function(e,t){e.appendTo(t)};for(c=0;t.length>c;c++)u=t[c],u.index=n+c,m+=h._renderItem({group:g,item:u});if(l=e(m),l.length){for(h.angular("compile",function(){return{elements:l.get(),data:t.map(function(e){return{dataItem:e}})}}),p.length||(p=e(h._renderGroup({group:g})).appendTo(i)),r(l,p),i.hasClass("k-item")&&(s(i),h._updateNodeClasses(i)),h._updateNodeClasses(l.prev().first()),h._updateNodeClasses(l.next().last()),c=0;t.length>c;c++)u=t[c],u.hasChildren&&(a=u.children.data(),a.length&&h._insertNode(a,u.index,l.eq(c),v,!h._expanded(l.eq(c))));return l}},_updateNode:function(t,n){function i(){p=!0}function r(e,t){e.find(".k-checkbox :checkbox").prop(P,t).data(I,!1).prop(I,!1)}var o,a,s,l,c,d=this,h={treeview:d.options,item:s},p=!1;if("selected"==t)s=n[0],a=d.findByUid(s.uid).find(".k-in:first").removeClass("k-state-hover").toggleClass("k-state-selected",s[t]).end(),s[t]?(d.current(a),a.attr($,!0)):a.attr($,!1);else for(e.inArray(t,d.options.dataTextField)>=0?p=!0:(h.item=n[0],h.item.bind("get",i),d.templates.itemContent(h),h.item.unbind("set",i)),o=0;n.length>o;o++)h.item=s=n[o],("spriteCssClass"==t||"imageUrl"==t||p)&&d.findByUid(s.uid).find(">div>.k-in").html(d.templates.itemContent(h)),t==P?(a=d.findByUid(s.uid),l=s[t],r(a.children("div"),l),d.options.checkboxes.checkChildren&&(r(a.children(".k-group"),l),d._setChecked(s.children,l),d._bubbleIndeterminate(a))):"expanded"==t?d._toggle(d.findByUid(s.uid),s,s[t]):"enabled"==t&&(a=d.findByUid(s.uid),a.find(".k-checkbox :checkbox").prop("disabled",!s[t]),c=!u(a).is(j),a.removeAttr(Y),s[t]||(s.selected&&s.set("selected",!1),s.expanded&&s.set("expanded",!1),c=!0,a.attr($,!1).attr(Y,!0)),d._updateNodeClasses(a,{},{enabled:s[t],expanded:!c}))},_appendItems:function(e,t,n){var i=d(n),r=i.children(),o=!this._expanded(n);typeof e==V&&(e=r.length),this._insertNode(t,e,n,function(t,n){e>=r.length?t.appendTo(n):t.insertBefore(r.eq(e))},o),this._expanded(n)&&(this._updateNodeClasses(n),d(n).css("display","block"))},refresh:function(n){var i,r,o,a,l,c,u=this.wrapper,h=n.node,p=n.action,f=n.items,m=this.options,v=m.loadOnDemand,_=m.checkboxes&&m.checkboxes.checkChildren;if(n.field){if(!f[0]||!f[0].level)return;return this._updateNode(n.field,f)}if(h&&(u=this.findByUid(h.uid),this._progress(u,!1)),_&&"remove"!=p){for(r=!1,i=0;f.length>i;i++)if("checked"in f[i]){r=!0;break}if(!r&&h&&h.checked)for(i=0;f.length>i;i++)f[i].checked=!0}if("add"==p)this._appendItems(n.index,f,u);else if("remove"==p)this._remove(this.findByUid(f[0].uid),!1);else if(h)if(d(u).empty(),f.length)for(this._appendItems(n.index,f,u),o=d(u).children(),v&&_&&this._bubbleIndeterminate(o.last()),i=0;o.length>i;i++)a=o.eq(i),this.trigger("itemChange",{item:a,data:this.dataItem(a),ns:g});else s(u),this.trigger("itemChange",{item:u,data:h,ns:g});else l=this._renderGroup({items:f,group:{firstLevel:!0,expanded:!0}}),this.root.length?(this._angularItems("cleanup"),c=e(l),this.root.attr("class",c.attr("class")).html(c.html())):this.root=this.wrapper.html(l).children("ul"),this.root.attr("role","tree"),this._angularItems("compile");for(i=0;f.length>i;i++)(!v||f[i].expanded)&&f[i].load();this.trigger(O,{node:h?u:t})},_error:function(e){var t=e.node&&this.findByUid(e.node.uid),n=this.templates.retry({messages:this.options.messages});t?(this._progress(t,!1),this._expanded(t,!1),h(t).addClass("k-i-refresh"),e.node.loaded(!1)):(this._progress(!1),this.element.html(n))},_retryRequest:function(e){e.preventDefault(),this.dataSource.fetch()},expand:function(e){this._processNodes(e,function(e,t){this.toggle(t,!0)})},collapse:function(e){this._processNodes(e,function(e,t){this.toggle(t,!1)})},enable:function(e,t){t=2==arguments.length?!!t:!0,this._processNodes(e,function(e,n){this.dataItem(n).set("enabled",t)})},current:function(n){var i=this,r=i._current,o=i.element,a=i._ariaId;return arguments.length>0&&n&&n.length?(r&&(r[0].id===a&&r.removeAttr("id"),r.find(".k-in:first").removeClass("k-state-focused")),r=i._current=e(n,o).closest(G),r.find(".k-in:first").addClass("k-state-focused"),a=r[0].id||a,a&&(i.wrapper.removeAttr("aria-activedescendant"),r.attr("id",a),i.wrapper.attr("aria-activedescendant",a)),t):(r||(r=i._nextVisible(e())),r)},select:function(n){var i=this,r=i.element;return arguments.length?(n=e(n,r).closest(G),r.find(".k-state-selected").each(function(){var e=i.dataItem(this);e.set("selected",!1),delete e.selected}),n.length&&i.dataItem(n).set("selected",!0),i.trigger(E),t):r.find(".k-state-selected").closest(G)},_toggle:function(e,t,n){var i,r,o=this.options,a=u(e),s=n?"expand":"collapse";if(!a.data("animating")&&!this._trigger(s,e))if(this._expanded(e,n),i=t&&t.loaded(),r=!a.children().length,!n||i&&!r){if(this._updateNodeClasses(e,{},{expanded:n}),a.css("display")==(n?"block":"none"))return;n||a.css("height",a.height()).css("height"),a.kendoStop(!0,!0).kendoAnimate(v({reset:!0},o.animation[s],{complete:function(){n&&a.css("height","")}}))}else o.loadOnDemand&&this._progress(e,!0),a.remove(),t.load()},toggle:function(t,n){t=e(t),h(t).is(".k-minus,.k-plus,.k-minus-disabled,.k-plus-disabled")&&(1==arguments.length&&(n=!this._expanded(t)),this._expanded(t,n))},destroy:function(){var e=this;w.fn.destroy.call(e),e.wrapper.off(C),e._unbindDataSource(),e.dragging&&e.dragging.destroy(),f.destroy(e.element),e.root=e.wrapper=e.element=null},_expanded:function(e,n){var i=f.attr("expanded"),r=this.dataItem(e);return 1==arguments.length?"true"===e.attr(i)||r&&r.expanded:(u(e).data("animating")||(r&&(r.set("expanded",n),n=r.expanded),n?(e.attr(i,"true"),e.attr("aria-expanded","true")):(e.removeAttr(i),e.attr("aria-expanded","false"))),t)},_progress:function(e,t){var n=this.element,i=this.templates.loading({messages:this.options.messages});1==arguments.length?(t=e,t?n.html(i):n.empty()):h(e).toggleClass("k-loading",t).removeClass("k-i-refresh")},text:function(e,n){var i=this.dataItem(e),r=this.options[K.text],o=i.level(),a=r.length,s=r[Math.min(o,a-1)];return n?(i.set(s,n),t):i[s]},_objectOrSelf:function(t){return e(t).closest("[data-role=treeview]").data("kendoTreeView")||this},_dataSourceMove:function(e,t,n,i){var r,o=this._objectOrSelf(n||t),a=o.dataSource;return n&&n[0]!=o.element[0]&&(r=o.dataItem(n),r.loaded()||(o._progress(n,!0),r.load()),n!=this.root&&(a=r.children,a&&a instanceof b||(r._initChildren(),r.loaded(!0),a=r.children))),e=this._toObservableData(e),i.call(this,a,e)},_toObservableData:function(t){var n,i,r=t;return(t instanceof window.jQuery||Q(t))&&(n=this._objectOrSelf(t).dataSource,i=e(t).attr(f.attr("uid")),r=n.getByUid(i),r&&(r=n.remove(r))),r},_insert:function(e,t,n){t instanceof f.data.ObservableArray?t=t.toJSON():y(t)||(t=[t]);var i=e.parent();return i&&i._initChildren&&(i.hasChildren=!0,i._initChildren()),e.splice.apply(e,[n,0].concat(t)),this.findByUid(e[n].uid)},insertAfter:o(1),insertBefore:o(0),append:function(t,n,i){var r=this,o=r.root;return i=i||e.noop,n&&(o=d(n)),r._dataSourceMove(t,o,n,function(e,t){function o(){n&&r._expanded(n,!0);var i=e.data(),o=Math.max(i.length,0);return r._insert(i,t,o)}var a;return e.data()?(a=o(),i(a),a):(e.one(E,function(){i(o())}),null)})},_remove:function(t,n){var i,r,o,a=this;return t=e(t,a.element),this.angular("cleanup",function(){return{elements:t.get()}}),i=t.parent().parent(),r=t.prev(),o=t.next(),t[n?"detach":"remove"](),i.hasClass("k-item")&&(s(i),a._updateNodeClasses(i)),a._updateNodeClasses(r),a._updateNodeClasses(o),t},remove:function(e){var t=this.dataItem(e);t&&this.dataSource.remove(t)},detach:function(e){return this._remove(e,!0)},findByText:function(t){return e(this.element).find(".k-in").filter(function(n,i){return e(i).text()==t}).closest(G)},findByUid:function(e){return this.element.find(".k-item["+f.attr("uid")+"="+e+"]")},expandPath:function(n,i){var r,o,a;for(n=n.slice(0),r=this,o=this.dataSource,a=o.get(n[0]),i=i||e.noop;n.length>0&&(a.expanded||a.loaded());)a.set("expanded",!0),n.shift(),a=o.get(n[0]);return n.length?(o.bind("change",function(e){var t=e.node&&e.node.id;t&&t===n[0]&&(n.shift(),n.length?o.get(n[0]).set("expanded",!0):i.call(r))}),a.set("expanded",!0),t):i.call(r)},_parents:function(e){for(var t=e&&e.parentNode(),n=[];t;)n.push(t),t=t.parentNode();return n},expandTo:function(e){var t,n;for(e instanceof f.data.Node||(e=this.dataSource.get(e)),t=this._parents(e),n=0;t.length>n;n++)t[n].set("expanded",!0)},_renderItem:function(e){return e.group||(e.group={}),e.treeview=this.options,e.r=this.templates,this.templates.item(e)},_renderGroup:function(e){var t=this;return e.renderItems=function(e){var n="",i=0,r=e.items,o=r?r.length:0,a=e.group;for(a.length=o;o>i;i++)e.group=a,e.item=r[i],e.item.index=i,n+=t._renderItem(e);return n},e.r=t.templates,t.templates.group(e)}}),l.prototype={_removeTouchHover:function(){var e=this;f.support.touch&&e.hovered&&(e.hovered.find("."+U).removeClass(U),e.hovered=!1)},_hintStatus:function(n){var i=this._draggable.hint.find(".k-drag-status")[0];return n?(i.className="k-icon k-drag-status "+n,t):e.trim(i.className.replace(/k-(icon|drag-status)/g,""))},dragstart:function(t){var n=this,i=n.treeview,r=n.sourceNode=t.currentTarget.closest(G);i.trigger(F,{sourceNode:r[0]})&&t.preventDefault(),n.dropHint=e("<div class='k-drop-hint' />").css(N,"hidden").appendTo(i.element)},drag:function(t){var n,i,r,o,a,s,l,c,d,u,h=this,p=h.treeview,g=h.sourceNode,m=h.dropTarget=e(f.eventTarget(t)),v=m.closest(".k-treeview");v.length?e.contains(g[0],m[0])?n="k-denied":(n="k-insert-middle",i=m.closest(".k-top,.k-mid,.k-bot"),i.length?(o=i.outerHeight(),a=f.getOffset(i).top,s=m.closest(".k-in"),l=o/(s.length>0?4:2),c=a+l>t.y.location,d=t.y.location>a+o-l,h._removeTouchHover(),u=s.length&&!c&&!d,h.hovered=u?v:!1,h.dropHint.css(N,u?"hidden":"visible"),s.toggleClass(U,u),u?n="k-add":(r=i.position(),r.top+=c?0:o,h.dropHint.css(r)[c?"prependTo":"appendTo"](m.closest(G).children("div:first")),c&&i.hasClass("k-top")&&(n="k-insert-top"),d&&i.hasClass("k-bot")&&(n="k-insert-bottom"))):m[0]!=h.dropHint[0]&&(n=v[0]!=p.element[0]?"k-add":"k-denied")):(n="k-denied",h._removeTouchHover()),p.trigger(R,{sourceNode:g[0],dropTarget:m[0],pageY:t.y.location,pageX:t.x.location,statusClass:n.substring(2),setStatusClass:function(e){n=e}}),0!==n.indexOf("k-insert")&&h.dropHint.css(N,"hidden"),h._hintStatus(n)},dragcancel:function(){this.dropHint.remove()},dragend:function(){function e(e){a.updateIndeterminate(),a.trigger(L,{sourceNode:e&&e[0],destinationNode:n[0],dropPosition:s})}var n,i,r,o=this,a=o.treeview,s="over",l=o.sourceNode,c=o.dropHint,d=o.dropTarget;return"visible"==c.css(N)?(s=c.prevAll(".k-in").length>0?"after":"before",n=c.closest(G)):d&&(n=d.closest(".k-treeview .k-item"),n.length||(n=d.closest(".k-treeview"))),i={sourceNode:l[0],destinationNode:n[0],valid:"k-denied"!=o._hintStatus(),setValid:function(e){this.valid=e},dropTarget:d[0],dropPosition:s},r=a.trigger(B,i),c.remove(),o._removeTouchHover(),!i.valid||r?(o._draggable.dropped=i.valid,t):(o._draggable.dropped=!0,"over"==s?a.append(l,n,e):("before"==s?l=a.insertBefore(l,n):"after"==s&&(l=a.insertAfter(l,n)),e(l)),t)},destroy:function(){this._draggable.destroy()}},g.plugin(c)}(window.kendo.jQuery),function(e,t){function n(e,t){var n,i,r=[];for(n=0,i=e.length;i>n;n++)e[n].field!==t&&r.push(e[n]);return r}function i(e,t,n){var i,r,o,a;if(!e)return[];for(e=e.filters,i=0,r=[],o=e.length;o>i;i++)a=e[i].operator,(n||"in"===a)&&a!==n||e[i].field!==t||r.push(e[i]);return r}function r(t,n,r){var o,a=0,s=r.length;if(t=i(t,n,"in")[0])for(o=t.value.split(",");s>a;a++)r[a].checked=e.inArray(r[a].uniqueName,o)>=0;else for(;s>a;a++)r[a].checked=!0}function o(e,t){var n,i=e.length;for(n=0;i>n;n++)e[n].checked&&0!==e[n].level()&&t.push(e[n].uniqueName),e[n].hasChildren&&o(e[n].children.view(),t)}var a=window.kendo,s=a.ui,l="kendoContextMenu",c=e.proxy,d=".kendoPivotFieldMenu",u=s.Widget,h=u.extend({init:function(e,t){u.fn.init.call(this,e,t),this._dataSource(),this._layout(),a.notify(this)},events:[],options:{name:"PivotFieldMenu",filter:null,filterable:!0,sortable:!0,messages:{info:"Show items with value that:",sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filterFields:"Fields Filter",filter:"Filter",include:"Include Fields...",title:"Fields to include",clear:"Clear",ok:"OK",cancel:"Cancel",operators:{contains:"Contains",doesnotcontain:"Does not contain",startswith:"Starts with",endswith:"Ends with",eq:"Is equal to",neq:"Is not equal to"}}},_layout:function(){var t=this.options;this.wrapper=e(a.template(f)({ns:a.ns,filterable:t.filterable,sortable:t.sortable,messages:t.messages})),this.menu=this.wrapper[l]({filter:t.filter,target:this.element,orientation:"vertical",showOn:"click",closeOnClick:!1,open:c(this._menuOpen,this),select:c(this._select,this),copyAnchorStyles:!1}).data(l),this._createWindow(),t.filterable&&this._initFilterForm()},_initFilterForm:function(){var e=this.menu.element.find(".k-filter-item"),t=c(this._filter,this);this._filterOperator=new a.ui.DropDownList(e.find("select")),this._filterValue=e.find(".k-textbox"),e.on("submit"+d,t).on("click"+d,".k-button-filter",t).on("click"+d,".k-button-clear",c(this._reset,this))},_setFilterForm:function(e){var t="",n="";e&&(t=e.operator,n=e.value),this._filterOperator.value(t),this._filterValue.val(n)},_clearFilters:function(e){var t,n,r=this.dataSource.filter()||{},o=0;for(r.filters=r.filters||[],t=i(r,e),n=t.length;n>o;o++)r.filters.splice(r.filters.indexOf(t[o]),1);return r},_filter:function(e){var n,i,r=this,o=r._filterValue.val();return e.preventDefault(),o?(n={field:r.currentMember,operator:r._filterOperator.value(),value:o},i=r._clearFilters(r.currentMember),i.filters.push(n),r.dataSource.filter(i),r.menu.close(),t):(r.menu.close(),t)},_reset:function(e){var t=this,n=t._clearFilters(t.currentMember);e.preventDefault(),n.filters[0]||(n={}),t.dataSource.filter(n),t._setFilterForm(null),t.menu.close()},_sort:function(e){var t=this.currentMember,i=this.dataSource.sort()||[];i=n(i,t),i.push({field:t,dir:e}),this.dataSource.sort(i),this.menu.close()},setDataSource:function(e){this.options.dataSource=e,this._dataSource()},_dataSource:function(){this.dataSource=a.data.PivotDataSource.create(this.options.dataSource)},_createWindow:function(){var t=this.options.messages;this.includeWindow=e(a.template(g)({messages:t})).on("click"+d,".k-button-ok",c(this._applyIncludes,this)).on("click"+d,".k-button-cancel",c(this._closeWindow,this)),this.includeWindow=new s.Window(this.includeWindow,{title:t.title,visible:!1,resizable:!1,open:c(this._windowOpen,this)})},_applyIncludes:function(e){var t,n=[],r=this.treeView.dataSource.view(),a=r[0].checked,s=this.dataSource.filter(),l=i(s,this.currentMember,"in")[0];o(r,n),l&&(a?(s.filters.splice(s.filters.indexOf(l),1),s.filters.length||(s={})):l.value=n.join(","),t=s),n.length&&(t||a||(t={field:this.currentMember,operator:"in",value:n.join(",")},s&&(s.filters.push(t),t=s))),t&&this.dataSource.filter(t),this._closeWindow(e)},_closeWindow:function(e){e.preventDefault(),this.includeWindow.close()},_treeViewDataSource:function(){var e=this;return a.data.HierarchicalDataSource.create({schema:{model:{id:"uniqueName",hasChildren:function(e){return parseInt(e.childrenCardinality,10)>0}}},transport:{read:function(t){var n={},i=e.treeView.dataSource.get(t.data.uniqueName),o=t.data.uniqueName;o?(n.memberUniqueName=i.uniqueName.replace(/\&/g,"&amp;"),n.treeOp=1):n.levelUniqueName=e.currentMember+".[(ALL)]",e.dataSource.schemaMembers(n).done(function(n){r(e.dataSource.filter(),e.currentMember,n),t.success(n)}).fail(t.error)}}})},_createTreeView:function(e){var t=this;t.treeView=new s.TreeView(e,{autoBind:!1,dataSource:t._treeViewDataSource(),dataTextField:"name",checkboxes:{checkChildren:!0},dataBound:function(){s.progress(t.includeWindow.element,!1)}})},_menuOpen:function(t){var n;t.event&&(n=a.attr("name"),this.currentMember=e(t.event.target).closest("["+n+"]").attr(n),this.options.filterable&&this._setFilterForm(i(this.dataSource.filter(),this.currentMember)[0]))},_select:function(t){var n=e(t.item);e(".k-pivot-filter-window").not(this.includeWindow.element).kendoWindow("close"),n.hasClass("k-include-item")?this.includeWindow.center().open():n.hasClass("k-sort-asc")?this._sort("asc"):n.hasClass("k-sort-desc")&&this._sort("desc")},_windowOpen:function(){this.treeView||this._createTreeView(this.includeWindow.element.find(".k-treeview")),s.progress(this.includeWindow.element,!0),this.treeView.dataSource.read()},destroy:function(){u.fn.destroy.call(this),this.menu&&(this.menu.destroy(),this.menu=null),this.reeeView&&(this.treeView.destroy(),this.treeView=null),this.includeWindow&&(this.includeWindow.destroy(),this.includeWindow=null),this.wrapper=null,this.element=null}}),p='<div class="k-filterable k-content" tabindex="-1" data-role="fieldmenu"><form class="k-filter-menu"><div><div class="k-filter-help-text">#=messages.info#</div><select>#for(var op in messages.operators){#<option value="#=op#">#=messages.operators[op]#</option>#}#</select><input class="k-textbox" type="text" /><div><a class="k-button k-primary k-button-filter" href="\\#">#=messages.filter#</a><a class="k-button k-button-clear" href="\\#">#=messages.clear#</a></div></div></form></div>',f='<ul class="k-pivot-fieldmenu"># if (sortable) {#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-icon k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-icon k-i-sort-desc"></span>${messages.sortDescending}</span></li># if (filterable) {#<li class="k-separator"></li># } ## } ## if (filterable) {#<li class="k-item k-include-item"><span class="k-link"><span class="k-icon k-filter"></span>${messages.include}</span></li><li class="k-separator"></li><li class="k-item k-filter-item"><span class="k-link"><span class="k-icon k-filter"></span>${messages.filterFields}</span><ul><li>'+p+"</li></ul></li># } #</ul>",g='<div class="k-popup-edit-form k-pivot-filter-window"><div class="k-edit-form-container"><div class="k-treeview"></div><div class="k-edit-buttons k-state-default"><a class="k-button k-primary k-button-ok" href="\\#">${messages.ok}</a><a class="k-button k-button-cancel" href="\\#">${messages.cancel}</a></div></div>';s.plugin(h)}(window.kendo.jQuery),function(e,t){function n(t,i){var r,o,a=[];if(e.isPlainObject(t))if(t.hasOwnProperty("filters"))a=t.filters;else if(t.field==i)return t;for(e.isArray(t)&&(a=t),r=0;a.length>r;r++)if(o=n(a[r],i))return o}function i(t,n){t.filters&&(t.filters=e.grep(t.filters,function(e){return i(e,n),e.filters?e.filters.length:e.field!=n}))}function r(e,t){var n=o.getter(t,!0);return function(t){for(var i,r,o=e(t),a=[],s=0,l={};o.length>s;)i=o[s++],r=n(i),l.hasOwnProperty(r)||(a.push(i),l[r]=!0);return a}}var o=window.kendo,a=o.ui,s=o.data.DataSource,l=a.Widget,c="change",d="boolean",u="enums",h="string",p="Is equal to",f="Is not equal to",g=e.proxy,m=l.extend({init:function(n,i){var r,a,s,p,f,m,v,_,y,w;n=e(n).addClass("k-filtercell"),r=this.wrapper=e("<span/>").appendTo(n),a=this,m=a.operators=i.operators||{},v=a.input=e("<input/>").attr(o.attr("bind"),"value: value").appendTo(r),l.fn.init.call(a,n[0],i),i=a.options,s=a.dataSource=i.dataSource,a.model=s.reader.model,f=i.type=h,_=o.getter("reader.model.fields",!0)(s)||{},y=_[i.field],y&&y.type&&(f=i.type=y.type),i.values&&(i.type=f=u),m=m[f]||i.operators[f],a._parse=function(e){return e+""},a.model&&a.model.fields&&(w=a.model.fields[i.field],w&&w.parse&&(a._parse=g(w.parse,w))),a.viewModel=p=o.observable({operator:i.operator,value:null,operatorVisible:function(){var e=this.get("value");return null!==e&&e!==t&&"undefined"!=e}}),p.bind(c,g(a.updateDsFilter,a)),f==h&&a.initSuggestDataSource(i),null!==i.inputWidth&&v.width(i.inputWidth),a._setInputType(i,f),f!=d&&i.showOperators!==!1?a._createOperatorDropDown(m):r.addClass("k-operator-hidden"),a._createClearIcon(),o.bind(this.wrapper,p),f==h&&(i.template||a.setAutoCompleteSource()),f==u&&a.setComboBoxSource(a.options.values),a._refreshUI(),a._refreshHandler=g(a._refreshUI,a),a.dataSource.bind(c,a._refreshHandler)},_setInputType:function(t,n){var i,r,a,s,l,c=this,p=c.input;"function"==typeof t.template?t.template.call(c.viewModel,{element:c.input,dataSource:c.suggestDataSource}):n==h?p.attr(o.attr("role"),"autocomplete").attr(o.attr("text-field"),t.dataTextField||t.field).attr(o.attr("filter"),t.suggestionOperator).attr(o.attr("delay"),t.delay).attr(o.attr("min-length"),t.minLength).attr(o.attr("value-primitive"),!0):"date"==n?p.attr(o.attr("role"),"datepicker"):n==d?(p.remove(),i=e("<input type='radio'/>"),r=c.wrapper,a=o.guid(),s=e("<label/>").text(t.messages.isTrue).append(i),i.attr(o.attr("bind"),"checked:value").attr("name",a).val("true"),l=s.clone().text(t.messages.isFalse),i.clone().val("false").appendTo(l),r.append([s,l])):"number"==n?p.attr(o.attr("role"),"numerictextbox"):n==u&&p.attr(o.attr("role"),"combobox").attr(o.attr("text-field"),"text").attr(o.attr("suggest"),!0).attr(o.attr("filter"),"contains").attr(o.attr("value-field"),"value").attr(o.attr("value-primitive"),!0)},_createOperatorDropDown:function(t){var n,i,r=[];for(n in t)r.push({text:t[n],value:n});i=e('<input class="k-dropdown-operator" '+o.attr("bind")+'="value: operator"/>').appendTo(this.wrapper),this.operatorDropDown=i.kendoDropDownList({dataSource:r,dataTextField:"text",dataValueField:"value",open:function(){this.popup.element.width(150)},valuePrimitive:!0}).data("kendoDropDownList"),this.operatorDropDown.wrapper.find(".k-i-arrow-s").removeClass("k-i-arrow-s").addClass("k-filter")},initSuggestDataSource:function(e){var n=e.suggestDataSource;n instanceof s||(!e.customDataSource&&n&&(n.group=t),n=this.suggestDataSource=s.create(n)),e.customDataSource||(n._pageSize=t,n.reader.data=r(n.reader.data,this.options.field)),this.suggestDataSource=n},setAutoCompleteSource:function(){var e=this.input.data("kendoAutoComplete");e&&e.setDataSource(this.suggestDataSource)},setComboBoxSource:function(e){var t=s.create({data:e}),n=this.input.data("kendoComboBox");n&&n.setDataSource(t)},_refreshUI:function(){var t=this,i=n(t.dataSource.filter(),this.options.field)||{},r=t.viewModel;t.manuallyUpdatingVM=!0,i=e.extend(!0,{},i),t.options.type==d&&r.value!==i.value&&t.wrapper.find(":radio").prop("checked",!1),i.operator&&r.set("operator",i.operator),r.set("value",i.value),t.manuallyUpdatingVM=!1},updateDsFilter:function(n){var i,r,o,a=this,s=a.viewModel;a.manuallyUpdatingVM||"operator"==n.field&&s.value===t||(i=e.extend({},a.viewModel.toJSON(),{field:a.options.field}),r={logic:"and",filters:[]},i.value!==t&&null!==i.value&&r.filters.push(i),o=a._merge(r),a.dataSource.filter(o.filters.length?o:{}))},_merge:function(t){var n,r,o,a=this,s=t.logic||"and",l=t.filters,c=a.dataSource.filter()||{filters:[],logic:"and"};for(i(c,a.options.field),r=0,o=l.length;o>r;r++)n=l[r],n.value=a._parse(n.value);return l=e.grep(l,function(e){return""!==e.value&&null!==e.value}),l.length&&(c.filters.length?(t.filters=l,"and"!==c.logic&&(c.filters=[{logic:c.logic,filters:c.filters}],c.logic="and"),c.filters.push(l.length>1?t:l[0])):(c.filters=l,c.logic=s)),c},_createClearIcon:function(){var t=this;e("<button type='button' class='k-button k-button-icon'/>").attr(o.attr("bind"),"visible:operatorVisible").html("<span class='k-icon k-i-close'/>").click(g(t.clearFilter,t)).appendTo(t.wrapper)},clearFilter:function(){this.viewModel.set("value",null)},destroy:function(){var e=this;e.filterModel=null,l.fn.destroy.call(e),o.destroy(e.element)},events:[c],options:{name:"FilterCell",delay:200,minLength:1,inputWidth:null,values:t,customDataSource:!1,field:"",dataTextField:"",type:"string",suggestDataSource:null,suggestionOperator:"startswith",operator:"eq",showOperators:!0,template:null,messages:{isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",operator:"Operator"},operators:{string:{eq:p,neq:f,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{eq:p,neq:f,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"},date:{eq:p,neq:f,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},enums:{eq:p,neq:f}}}});a.plugin(m)}(window.kendo.jQuery),function(e,t){function n(t){t=e(t),t.children(v).children(".k-icon").remove(),t.filter(":has(.k-panel),:has(.k-content)").children(".k-link:not(:has([class*=k-i-arrow]))").each(function(){var t=e(this),n=t.parent();t.append("<span class='k-icon "+(n.hasClass(I)?"k-i-arrow-n k-panelbar-collapse":"k-i-arrow-s k-panelbar-expand")+"'/>")})}function i(t){t=e(t),t.filter(".k-first:not(:first-child)").removeClass(x),t.filter(".k-last:not(:last-child)").removeClass(g),t.filter(":first-child").addClass(x),t.filter(":last-child").addClass(g)}var r=window.kendo,o=r.ui,a=r.keys,s=e.extend,l=e.each,c=r.template,d=o.Widget,u=/^(ul|a|div)$/i,h=".kendoPanelBar",p="img",f="href",g="k-last",m="k-link",v="."+m,_="error",y=".k-item",w=".k-group",b=w+":visible",k="k-image",x="k-first",C="expand",S="select",T="k-content",D="activate",A="collapse",E="mouseenter",M="mouseleave",P="contentLoad",I="k-state-active",z="> .k-panel",F="> .k-content",R="k-state-focused",B="k-state-disabled",L="k-state-selected",O="."+L,H="k-state-highlight",N=y+":not(.k-state-disabled)",V=N+" > .k-link",U=y+".k-state-disabled > .k-link",W="> li > "+O+", .k-panel > li > "+O,j="k-state-default",G="aria-disabled",q="aria-expanded",$="aria-hidden",Y="aria-selected",K=":visible",Q=":empty",X="single",J={content:c("<div role='region' class='k-content'#= contentAttributes(data) #>#= content(item) #</div>"),group:c("<ul role='group' aria-hidden='true' class='#= groupCssClass(group) #'#= groupAttributes(group) #>#= renderItems(data) #</ul>"),itemWrapper:c("<#= tag(item) # class='#= textClass(item, group) #' #= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:c("<li role='menuitem' #=aria(item)#class='#= wrapperCssClass(group, item) #'>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, panelBar: panelBar, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:c("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:c("<span class='#= arrowClass(item) #'></span>"),sprite:c("<span class='k-sprite #= spriteCssClass #'></span>"),empty:c("")},Z={aria:function(e){var t="";return(e.items||e.content||e.contentUrl)&&(t+=q+"='"+(e.expanded?"true":"false")+"' "),e.enabled===!1&&(t+=G+"='true'"),t
},wrapperCssClass:function(e,t){var n="k-item",i=t.index;return n+=t.enabled===!1?" "+B:t.expanded===!0?" "+I:" k-state-default",0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),t.cssClass&&(n+=" "+t.cssClass),n},textClass:function(e,t){var n=m;return t.firstLevel&&(n+=" k-header"),n},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e){var t="k-icon";return t+=e.expanded?" k-i-arrow-n k-panelbar-collapse":" k-i-arrow-s k-panelbar-expand"},text:function(e){return e.encoded===!1?e.text:r.htmlEncode(e.text)},tag:function(e){return e.url||e.contentUrl?"a":"span"},groupAttributes:function(e){return e.expanded!==!0?" style='display:none'":""},groupCssClass:function(){return"k-group k-panel"},contentAttributes:function(e){return e.item.expanded!==!0?" style='display:none'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?'href="'+e.contentUrl+'"':""}},et=d.extend({init:function(t,n){var i,o=this;d.fn.init.call(o,t,n),t=o.wrapper=o.element.addClass("k-widget k-reset k-header k-panelbar"),n=o.options,t[0].id&&(o._itemId=t[0].id+"_pb_active"),o._tabindex(),o._initData(n),o._updateClasses(),o._animations(n),t.on("click"+h,V,function(t){o._click(e(t.currentTarget))&&t.preventDefault()}).on(E+h+" "+M+h,V,o._toggleHover).on("click"+h,U,!1).on("keydown"+h,e.proxy(o._keydown,o)).on("focus"+h,function(){var e=o.select();o._current(e[0]?e:o._first())}).on("blur"+h,function(){o._current(null)}).attr("role","menu"),i=t.find("li."+I+" > ."+T),i[0]&&o.expand(i.parent(),!1),r.notify(o)},events:[C,A,S,D,_,P],options:{name:"PanelBar",animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:200}},expandMode:"multiple"},destroy:function(){d.fn.destroy.call(this),this.element.off(h),r.destroy(this.element)},_initData:function(e){var t=this;e.dataSource&&(t.element.empty(),t.append(e.dataSource,t.element))},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=s(!0,t,e.animation),"dataSource"in e&&this._initData(e),d.fn.setOptions.call(this,e)},expand:function(t,n){var i=this,r={};return n=n!==!1,t=this.element.find(t),t.each(function(o,a){a=e(a);var s=a.find(z).add(a.find(F));if(!a.hasClass(B)&&s.length>0){if(i.options.expandMode==X&&i._collapseAllExpanded(a))return i;t.find("."+H).removeClass(H),a.addClass(H),n||(r=i.options.animation,i.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),i._triggerEvent(C,a)||i._toggleItem(a,!1),n||(i.options.animation=r)}}),i},collapse:function(t,n){var i=this,r={};return n=n!==!1,t=i.element.find(t),t.each(function(t,o){o=e(o);var a=o.find(z).add(o.find(F));!o.hasClass(B)&&a.is(K)&&(o.removeClass(H),n||(r=i.options.animation,i.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),i._triggerEvent(A,o)||i._toggleItem(o,!0),n||(i.options.animation=r))}),i},_toggleDisabled:function(e,t){e=this.element.find(e),e.toggleClass(j,t).toggleClass(B,!t).attr(G,!t)},select:function(n){var i=this;return n===t?i.element.find(W).parent():(n=i.element.find(n),n.length?n.each(function(){var n=e(this),r=n.children(v);return n.hasClass(B)?i:(i._triggerEvent(S,n)||i._updateSelected(r),t)}):this._updateSelected(n),i)},clearSelection:function(){this.select(e())},enable:function(e,t){return this._toggleDisabled(e,t!==!1),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(e,t){t=this.element.find(t);var r=this._insert(e,t,t.length?t.find(z):null);return l(r.items,function(){r.group.append(this),i(this)}),n(t),i(r.group.find(".k-first, .k-last")),r.group.height("auto"),this},insertBefore:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return l(n.items,function(){t.before(this),i(this)}),i(t),n.group.height("auto"),this},insertAfter:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return l(n.items,function(){t.after(this),i(this)}),i(t),n.group.height("auto"),this},remove:function(e){e=this.element.find(e);var t=this,r=e.parentsUntil(t.element,y),o=e.parent("ul");return e.remove(),!o||o.hasClass("k-panelbar")||o.children(y).length||o.remove(),r.length&&(r=r.eq(0),n(r),i(r)),t},reload:function(t){var n=this;t=n.element.find(t),t.each(function(){var t=e(this);n._ajaxRequest(t,t.children("."+T),!t.is(K))})},_first:function(){return this.element.children(N).first()},_last:function(){var e=this.element.children(N).last(),t=e.children(b);return t[0]?t.children(N).last():e},_current:function(e){var n=this,i=n._focused,r=n._itemId;return e===t?i:(n.element.removeAttr("aria-activedescendant"),i&&(i[0].id===r&&i.removeAttr("id"),i.children(v).removeClass(R)),e&&(r=e[0].id||r,e.attr("id",r).children(v).addClass(R),n.element.attr("aria-activedescendant",r)),n._focused=e,t)},_keydown:function(e){var t=this,n=e.keyCode,i=t._current();e.target==e.currentTarget&&(n==a.DOWN||n==a.RIGHT?(t._current(t._nextItem(i)),e.preventDefault()):n==a.UP||n==a.LEFT?(t._current(t._prevItem(i)),e.preventDefault()):n==a.ENTER||n==a.SPACEBAR?(t._click(i.children(v)),e.preventDefault()):n==a.HOME?(t._current(t._first()),e.preventDefault()):n==a.END&&(t._current(t._last()),e.preventDefault()))},_nextItem:function(e){if(!e)return this._first();var t=e.children(b),n=e.nextAll(":visible").first();return t[0]&&(n=t.children("."+x)),n[0]||(n=e.parent(b).parent(y).next()),n[0]||(n=this._first()),n.hasClass(B)&&(n=this._nextItem(n)),n},_prevItem:function(e){if(!e)return this._last();var t,n=e.prevAll(":visible").first();if(n[0])for(t=n;t[0];)t=t.children(b).children("."+g),t[0]&&(n=t);else n=e.parent(b).parent(y),n[0]||(n=this._last());return n.hasClass(B)&&(n=this._prevItem(n)),n},_insert:function(t,n,i){var r,o,a=this,l=e.isPlainObject(t),c=n&&n[0];return c||(i=a.element),o={firstLevel:i.hasClass("k-panelbar"),expanded:i.parent().hasClass(I),length:i.children().length},c&&!i.length&&(i=e(et.renderGroup({group:o})).appendTo(n)),l||e.isArray(t)?(r=e.map(l?[t]:t,function(t,n){return e("string"==typeof t?t:et.renderItem({group:o,item:s(t,{index:n})}))}),c&&n.attr(q,!1)):(r="string"==typeof t&&"<"!=t[0]?a.element.find(t):e(t),a._updateItemsClasses(r)),{items:r,group:i}},_toggleHover:function(t){var n=e(t.currentTarget);n.parents("li."+B).length||n.toggleClass("k-state-hover",t.type==E)},_updateClasses:function(){var t,r,o=this;t=o.element.find("li > ul").not(function(){return e(this).parentsUntil(".k-panelbar","div").length}).addClass("k-group k-panel").attr("role","group"),t.parent().attr(q,!1).not("."+I).children("ul").attr($,!0).hide(),r=o.element.add(t).children(),o._updateItemsClasses(r),n(r),i(r)},_updateItemsClasses:function(e){for(var t=e.length,n=0;t>n;n++)this._updateItemClasses(e[n],n)},_updateItemClasses:function(t,n){var i,o,a=this._selected,s=this.options.contentUrls,l=s&&s[n],c=this.element[0];t=e(t).addClass("k-item").attr("role","menuitem"),r.support.browser.msie&&t.css("list-style-position","inside").css("list-style-position",""),t.children(p).addClass(k),o=t.children("a").addClass(m),o[0]&&(o.attr("href",l),o.children(p).addClass(k)),t.filter(":not([disabled]):not([class*=k-state])").addClass("k-state-default"),t.filter("li[disabled]").addClass("k-state-disabled").attr(G,!0).removeAttr("disabled"),t.children("div").addClass(T).attr("role","region").attr($,!0).hide().parent().attr(q,!1),o=t.children(O),o[0]&&(a&&a.removeAttr(Y).children(O).removeClass(L),o.addClass(L),this._selected=t.attr(Y,!0)),t.children(v)[0]||(i="<span class='"+m+"'/>",s&&s[n]&&t[0].parentNode==c&&(i='<a class="k-link k-header" href="'+s[n]+'"/>'),t.contents().filter(function(){return!(this.nodeName.match(u)||3==this.nodeType&&!e.trim(this.nodeValue))}).wrapAll(i)),t.parent(".k-panelbar")[0]&&t.children(v).addClass("k-header")},_click:function(e){var t,n,i,r,o,a,s,l=this,c=l.element;if(!e.parents("li."+B).length&&e.closest(".k-widget")[0]==c[0]){if(o=e.closest(v),a=o.closest(y),l._updateSelected(o),n=a.find(z).add(a.find(F)),i=o.attr(f),r=i&&("#"==i.charAt(i.length-1)||-1!=i.indexOf("#"+l.element[0].id+"-")),t=!(!r&&!n.length),n.data("animating"))return t;if(l._triggerEvent(S,a)&&(t=!0),t!==!1)return l.options.expandMode==X&&l._collapseAllExpanded(a)?t:(n.length&&(s=n.is(K),l._triggerEvent(s?A:C,a)||(t=l._toggleItem(a,s))),t)}},_toggleItem:function(e,n){var i,r,o=this,a=e.find(z),s=e.find(v),l=s.attr(f);return a.length?(this._toggleGroup(a,n),i=!0):(r=e.children("."+T),r.length&&(i=!0,r.is(Q)&&l!==t?o._ajaxRequest(e,r,n):o._toggleGroup(r,n))),i},_toggleGroup:function(e,t){var n=this,i=n.options.animation,r=i.expand,o=s({},i.collapse),a=o&&"effects"in o;e.is(K)==t&&(e.parent().attr(q,!t).attr($,t).toggleClass(I,!t).find("> .k-link > .k-icon").toggleClass("k-i-arrow-n",!t).toggleClass("k-panelbar-collapse",!t).toggleClass("k-i-arrow-s",t).toggleClass("k-panelbar-expand",t),r=t?s(a?o:s({reverse:!0},r),{hide:!0}):s({complete:function(e){n._triggerEvent(D,e.closest(y))}},r),e.kendoStop(!0,!0).kendoAnimate(r))},_collapseAllExpanded:function(t){var n,i=this,r=!1,o=t.find(z).add(t.find(F));return o.is(K)&&(r=!0),o.is(K)||0===o.length||(n=t.siblings(),n.find(z).add(n.find(F)).filter(function(){return e(this).is(K)}).each(function(t,n){n=e(n),r=i._triggerEvent(A,n.closest(y)),r||i._toggleGroup(n,!0)})),r},_ajaxRequest:function(t,n,i){var r=this,o=t.find(".k-panelbar-collapse, .k-panelbar-expand"),a=t.find(v),s=setTimeout(function(){o.addClass("k-loading")},100),l={},c=a.attr(f);e.ajax({type:"GET",cache:!1,url:c,dataType:"html",data:l,error:function(e,t){o.removeClass("k-loading"),r.trigger(_,{xhr:e,status:t})&&this.complete()},complete:function(){clearTimeout(s),o.removeClass("k-loading")},success:function(e){function o(){return{elements:n.get()}}try{r.angular("cleanup",o),n.html(e),r.angular("compile",o)}catch(a){var s=window.console;s&&s.error&&s.error(a.name+": "+a.message+" in "+c),this.error(this.xhr,"error")}r._toggleGroup(n,i),r.trigger(P,{item:t[0],contentElement:n[0]})}})},_triggerEvent:function(e,t){var n=this;return n.trigger(e,{item:t[0]})},_updateSelected:function(e){var t=this,n=t.element,i=e.parent(y),r=t._selected;r&&r.removeAttr(Y),t._selected=i.attr(Y,!0),n.find(W).removeClass(L),n.find("> ."+H+", .k-panel > ."+H).removeClass(H),e.addClass(L),e.parentsUntil(n,y).filter(":has(.k-header)").addClass(H),t._current(i[0]?i:null)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}})}});s(et,{renderItem:function(e){e=s({panelBar:{},group:{}},e);var t=J.empty,n=e.item;return J.item(s(e,{image:n.imageUrl?J.image:t,sprite:n.spriteCssClass?J.sprite:t,itemWrapper:J.itemWrapper,renderContent:et.renderContent,arrow:n.items||n.content||n.contentUrl?J.arrow:t,subGroup:et.renderGroup},Z))},renderGroup:function(e){return J.group(s({renderItems:function(e){for(var t="",n=0,i=e.items,r=i?i.length:0,o=s({length:r},e.group);r>n;n++)t+=et.renderItem(s(e,{group:o,item:s({index:n},i[n])}));return t}},e,Z))},renderContent:function(e){return J.content(s(e,Z))}}),r.ui.plugin(et)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.Widget,o="horizontal",a="vertical",s=0,l=100,c=0,d=5,u="k-progressbar",h="k-progressbar-reverse",p="k-progressbar-indeterminate",f="k-complete",g="k-state-selected",m="k-progress-status",v="k-state-selected",_="k-state-default",y="k-state-disabled",w={VALUE:"value",PERCENT:"percent",CHUNK:"chunk"},b="change",k="complete",x="boolean",C=Math,S=e.extend,T=e.proxy,D=100,A=400,E=3,M={progressStatus:"<span class='k-progress-status-wrap'><span class='k-progress-status'></span></span>"},P=r.extend({init:function(e,t){var n=this;r.fn.init.call(this,e,t),t=n.options,n._progressProperty=t.orientation===o?"width":"height",n._fields(),t.value=n._validateValue(t.value),n._validateType(t.type),n._wrapper(),n._progressAnimation(),t.value!==t.min&&t.value!==!1&&n._updateProgress()},setOptions:function(e){var t=this;r.fn.setOptions.call(t,e),e.hasOwnProperty("reverse")&&t.wrapper.toggleClass("k-progressbar-reverse",e.reverse),e.hasOwnProperty("enable")&&t.enable(e.enable),t._progressAnimation(),t._validateValue(),t._updateProgress()},events:[b,k],options:{name:"ProgressBar",orientation:o,reverse:!1,min:s,max:l,value:c,enable:!0,type:w.VALUE,chunkCount:d,showStatus:!0,animation:{}},_fields:function(){var t=this;t._isStarted=!1,t.progressWrapper=t.progressStatus=e()},_validateType:function(i){var r=!1;if(e.each(w,function(e,n){return n===i?(r=!0,!1):t}),!r)throw Error(n.format("Invalid ProgressBar type '{0}'",i))},_wrapper:function(){var e,t=this,n=t.wrapper=t.element,i=t.options,r=i.orientation;n.addClass("k-widget "+u),n.addClass(u+"-"+(r===o?o:a)),i.enable===!1&&n.addClass(y),i.reverse&&n.addClass(h),i.value===!1&&n.addClass(p),i.type===w.CHUNK?t._addChunkProgressWrapper():i.showStatus&&(t.progressStatus=t.wrapper.prepend(M.progressStatus).find("."+m),e=i.value!==!1?i.value:i.min,t.progressStatus.text(i.type===w.VALUE?e:t._calculatePercentage(e)+"%"))},value:function(e){return this._value(e)},_value:function(e){var n,i=this,r=i.options;return e===t?r.value:(typeof e!==x?(e=i._roundValue(e),isNaN(e)||(n=i._validateValue(e),n!==r.value&&(i.wrapper.removeClass(p),r.value=n,i._isStarted=!0,i._updateProgress()))):e||(i.wrapper.addClass(p),r.value=!1),t)},_roundValue:function(e){e=parseFloat(e);var t=C.pow(10,E);return C.floor(e*t)/t},_validateValue:function(e){var t=this,n=t.options;if(e!==!1){if(n.min>=e||e===!0)return n.min;if(e>=n.max)return n.max}else if(e===!1)return!1;return isNaN(t._roundValue(e))?n.min:e},_updateProgress:function(){var e=this,t=e.options,n=e._calculatePercentage();t.type===w.CHUNK?(e._updateChunks(n),e._onProgressUpdateAlways(t.value)):e._updateProgressWrapper(n)},_updateChunks:function(e){var t,n=this,i=n.options,r=i.chunkCount,s=parseInt(D/r*100,10)/100,l=parseInt(100*e,10)/100,c=C.floor(l/s);t=n.wrapper.find(i.orientation===o&&!i.reverse||i.orientation===a&&i.reverse?"li.k-item:lt("+c+")":"li.k-item:gt(-"+(c+1)+")"),n.wrapper.find("."+v).removeClass(v).addClass(_),t.removeClass(_).addClass(v)},_updateProgressWrapper:function(e){var t=this,n=t.options,i=t.wrapper.find("."+g),r=t._isStarted?t._animation.duration:0,o={};0===i.length&&t._addRegularProgressWrapper(),o[t._progressProperty]=e+"%",t.progressWrapper.animate(o,{duration:r,start:T(t._onProgressAnimateStart,t),progress:T(t._onProgressAnimate,t),complete:T(t._onProgressAnimateComplete,t,n.value),always:T(t._onProgressUpdateAlways,t,n.value)})},_onProgressAnimateStart:function(){this.progressWrapper.show()},_onProgressAnimate:function(e){var t,n=this,i=n.options,r=parseFloat(e.elem.style[n._progressProperty],10);i.showStatus&&(t=1e4/parseFloat(n.progressWrapper[0].style[n._progressProperty]),n.progressWrapper.find(".k-progress-status-wrap").css(n._progressProperty,t+"%")),i.type!==w.CHUNK&&98>=r&&n.progressWrapper.removeClass(f)},_onProgressAnimateComplete:function(e){var t=this,n=t.options,i=parseFloat(t.progressWrapper[0].style[t._progressProperty]);n.type!==w.CHUNK&&i>98&&t.progressWrapper.addClass(f),n.showStatus&&t.progressStatus.text(n.type===w.VALUE?e:C.floor(t._calculatePercentage(e))+"%"),e===n.min&&t.progressWrapper.hide()},_onProgressUpdateAlways:function(e){var t=this,n=t.options;t._isStarted&&t.trigger(b,{value:e}),e===n.max&&t._isStarted&&t.trigger(k,{value:n.max})},enable:function(e){var n=this,i=n.options;i.enable=t===e?!0:e,n.wrapper.toggleClass(y,!i.enable)},destroy:function(){var e=this;r.fn.destroy.call(e)},_addChunkProgressWrapper:function(){var e,t=this,n=t.options,i=t.wrapper,r=D/n.chunkCount,o="";for(1>=n.chunkCount&&(n.chunkCount=d),o+="<ul class='k-reset'>",e=n.chunkCount-1;e>=0;e--)o+="<li class='k-item k-state-default'></li>";o+="</ul>",i.append(o).find(".k-item").css(t._progressProperty,r+"%").first().addClass("k-first").end().last().addClass("k-last"),t._normalizeChunkSize()},_normalizeChunkSize:function(){var e=this,t=e.options,n=e.wrapper.find(".k-item:last"),i=parseFloat(n[0].style[e._progressProperty]),r=D-t.chunkCount*i;r>0&&n.css(e._progressProperty,i+r+"%")},_addRegularProgressWrapper:function(){var t=this;t.progressWrapper=e("<div class='"+g+"'></div>").appendTo(t.wrapper),t.options.showStatus&&(t.progressWrapper.append(M.progressStatus),t.progressStatus=t.wrapper.find("."+m))},_calculateChunkSize:function(){var e=this,t=e.options.chunkCount,n=e.wrapper.find("ul.k-reset");return(parseInt(n.css(e._progressProperty),10)-(t-1))/t},_calculatePercentage:function(e){var n=this,i=n.options,r=e!==t?e:i.value,o=i.min,a=i.max;return n._onePercent=C.abs((a-o)/100),C.abs((r-o)/n._onePercent)},_progressAnimation:function(){var e=this,t=e.options,n=t.animation;e._animation=n===!1?{duration:0}:S({duration:A},t.animation)}});n.ui.plugin(P)}(window.kendo.jQuery),function(e,t){function n(t){t.children(g).addClass(C),t.children("a").addClass(y).children(g).addClass(C),t.filter(":not([disabled]):not([class*=k-state-disabled])").addClass(F),t.filter("li[disabled]").addClass(z).removeAttr("disabled"),t.filter(":not([class*=k-state])").children("a").filter(":focus").parent().addClass(R+" "+O),t.attr("role","tab"),t.filter("."+R).attr("aria-selected",!0),t.each(function(){var t=e(this);t.children("."+y).length||t.contents().filter(function(){return!(this.nodeName.match(p)||3==this.nodeType&&!c(this.nodeValue))}).wrapAll("<a class='"+y+"'/>")})}function i(e){var t=e.children(".k-item");t.filter(".k-first:not(:first-child)").removeClass(S),t.filter(".k-last:not(:last-child)").removeClass(w),t.filter(":first-child").addClass(S),t.filter(":last-child").addClass(w)}var r=window.kendo,o=r.ui,a=r.keys,s=e.map,l=e.each,c=e.trim,d=e.extend,u=r.template,h=o.Widget,p=/^(a|div)$/i,f=".kendoTabStrip",g="img",m="href",v="prev",_="show",y="k-link",w="k-last",b="click",k="error",x=":empty",C="k-image",S="k-first",T="select",D="activate",A="k-content",E="contentUrl",M="mouseenter",P="mouseleave",I="contentLoad",z="k-state-disabled",F="k-state-default",R="k-state-active",B="k-state-focused",L="k-state-hover",O="k-tab-on-top",H=".k-item:not(."+z+")",N=".k-tabstrip-items > "+H+":not(."+R+")",V={content:u("<div class='k-content'#= contentAttributes(data) # role='tabpanel'>#= content(item) #</div>"),itemWrapper:u("<#= tag(item) # class='k-link'#= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) #</#= tag(item) #>"),item:u("<li class='#= wrapperCssClass(group, item) #' role='tab' #=item.active ? \"aria-selected='true'\" : ''#>#= itemWrapper(data) #</li>"),image:u("<img class='k-image' alt='' src='#= imageUrl #' />"),sprite:u("<span class='k-sprite #= spriteCssClass #'></span>"),empty:u("")},U={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return n+=t.enabled===!1?" k-state-disabled":" k-state-default",0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),n},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},text:function(e){return e.encoded===!1?e.text:r.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},contentAttributes:function(e){return e.active!==!0?" style='display:none' aria-hidden='true' aria-expanded='false'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?r.attr("content-url")+'="'+e.contentUrl+'"':""}},W=h.extend({init:function(t,n){var i,o,a=this;h.fn.init.call(a,t,n),a._animations(a.options),n=a.options,a._wrapper(),a._isRtl=r.support.isRtl(a.wrapper),a._tabindex(),a._updateClasses(),a._dataSource(),n.dataSource&&a.dataSource.fetch(),a.options.contentUrls&&a.wrapper.find(".k-tabstrip-items > .k-item").each(function(t,n){e(n).find(">."+y).data(E,a.options.contentUrls[t])}),a.wrapper.on(M+f+" "+P+f,N,a._toggleHover).on("focus"+f,e.proxy(a._active,a)).on("blur"+f,function(){a._current(null)}),a._keyDownProxy=e.proxy(a._keydown,a),n.navigatable&&a.wrapper.on("keydown"+f,a._keyDownProxy),a.wrapper.children(".k-tabstrip-items").on(b+f,".k-state-disabled .k-link",!1).on(b+f," > "+H,function(t){var n,i=a.wrapper[0];if(i!==document.activeElement)if(n=r.support.browser.msie)try{i.setActive()}catch(o){i.focus()}else i.focus();a._click(e(t.currentTarget))&&t.preventDefault()}),i=a.tabGroup.children("li."+R),o=a.contentHolder(i.index()),i[0]&&o.length>0&&0===o[0].childNodes.length&&a.activateTab(i.eq(0)),a.element.attr("role","tablist"),a.element[0].id&&(a._ariaId=a.element[0].id+"_ts_active"),r.notify(a)},_active:function(){var e=this.tabGroup.children().filter("."+R);e=e[0]?e:this._endItem("first"),e[0]&&this._current(e)},_endItem:function(e){return this.tabGroup.children(H)[e]()},_item:function(e,t){var n;return n=t===v?"last":"first",e?(e=e[t](),e[0]||(e=this._endItem(n)),e.hasClass(z)&&(e=this._item(e,t)),e):this._endItem(n)},_current:function(e){var n=this,i=n._focused,r=n._ariaId;return e===t?i:(i&&(i[0].id===r&&i.removeAttr("id"),i.removeClass(B)),e&&(e.hasClass(R)||e.addClass(B),n.element.removeAttr("aria-activedescendant"),r=e[0].id||r,r&&(e.attr("id",r),n.element.attr("aria-activedescendant",r))),n._focused=e,t)},_keydown:function(e){var n,i=this,r=e.keyCode,o=i._current(),s=i._isRtl;if(e.target==e.currentTarget){if(r==a.DOWN||r==a.RIGHT)n=s?v:"next";else if(r==a.UP||r==a.LEFT)n=s?"next":v;else if(r==a.ENTER||r==a.SPACEBAR)i._click(o),e.preventDefault();else{if(r==a.HOME)return i._click(i._endItem("first")),e.preventDefault(),t;if(r==a.END)return i._click(i._endItem("last")),e.preventDefault(),t}n&&(i._click(i._item(o,n)),e.preventDefault())}},_dataSource:function(){var t=this;t.dataSource&&t._refreshHandler?t.dataSource.unbind("change",t._refreshHandler):t._refreshHandler=e.proxy(t.refresh,t),t.dataSource=r.data.DataSource.create(t.options.dataSource).bind("change",t._refreshHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),e.fetch()},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{}},close:{effects:{}}})},refresh:function(e){var t,n,i,o,a=this,s=a.options,l=r.getter(s.dataTextField),c=r.getter(s.dataContentField),d=r.getter(s.dataContentUrlField),u=r.getter(s.dataImageUrlField),h=r.getter(s.dataUrlField),p=r.getter(s.dataSpriteCssClass),f=[],g=a.dataSource.view();for(e=e||{},i=e.action,i&&(g=e.items),t=0,o=g.length;o>t;t++)n={text:l(g[t])},s.dataContentField&&(n.content=c(g[t])),s.dataContentUrlField&&(n.contentUrl=d(g[t])),s.dataUrlField&&(n.url=h(g[t])),s.dataImageUrlField&&(n.imageUrl=u(g[t])),s.dataSpriteCssClass&&(n.spriteCssClass=p(g[t])),f[t]=n;if("add"==e.action)e.index<a.tabGroup.children().length?a.insertBefore(f,a.tabGroup.children().eq(e.index)):a.append(f);else if("remove"==e.action)for(t=0;g.length>t;t++)a.remove(e.index);else"itemchange"==e.action?(t=a.dataSource.view().indexOf(g[0]),e.field===s.dataTextField&&a.tabGroup.children().eq(t).find(".k-link").text(g[0].get(e.field))):(a.trigger("dataBinding"),a.remove("li"),a.append(f),a.trigger("dataBound"))},value:function(n){var i=this;return n===t?i.select().text():(n!=i.value()&&i.tabGroup.children().each(function(){e.trim(e(this).text())==n&&i.select(this)}),t)},items:function(){return this.tabGroup[0].children},setOptions:function(e){var t=this,n=t.options.animation;t._animations(e),e.animation=d(!0,n,e.animation),e.navigatable?t.wrapper.on("keydown"+f,t._keyDownProxy):t.wrapper.off("keydown"+f,t._keyDownProxy),h.fn.setOptions.call(t,e)},events:[T,D,_,k,I,"change","dataBinding","dataBound"],options:{name:"TabStrip",dataTextField:"",dataContentField:"",dataImageUrlField:"",dataUrlField:"",dataSpriteCssClass:"",dataContentUrlField:"",animation:{open:{effects:"expand:vertical fadeIn",duration:200},close:{duration:200}},collapsible:!1,navigatable:!0,contentUrls:!1},destroy:function(){var e=this;h.fn.destroy.call(e),e._refreshHandler&&e.dataSource.unbind("change",e._refreshHandler),e.wrapper.off(f),e.wrapper.children(".k-tabstrip-items").off(f),e.scrollWrap.children(".k-tabstrip").unwrap(),r.destroy(e.wrapper)},select:function(t){var n=this;return 0===arguments.length?n.tabGroup.children("li."+R):(isNaN(t)||(t=n.tabGroup.children().get(t)),t=n.tabGroup.find(t),e(t).each(function(t,i){i=e(i),i.hasClass(R)||n.trigger(T,{item:i[0],contentElement:n.contentHolder(i.index())[0]})||n.activateTab(i)}),n)},enable:function(e,t){return this._toggleDisabled(e,t!==!1),this},disable:function(e){return this._toggleDisabled(e,!1),this},reload:function(t){t=this.tabGroup.find(t);var n=this;return t.each(function(){var t=e(this),i=t.find("."+y).data(E),r=n.contentHolder(t.index());i&&n.ajaxRequest(t,r,null,i)}),n},append:function(e){var t=this,n=t._create(e);return l(n.tabs,function(e){t.tabGroup.append(this),t.wrapper.append(n.contents[e])}),i(t.tabGroup),t._updateContentElements(),t},insertBefore:function(t,n){n=this.tabGroup.find(n);var r=this,o=r._create(t),a=e(r.contentElement(n.index()));return l(o.tabs,function(e){n.before(this),a.before(o.contents[e])}),i(r.tabGroup),r._updateContentElements(),r},insertAfter:function(t,n){n=this.tabGroup.find(n);var r=this,o=r._create(t),a=e(r.contentElement(n.index()));return l(o.tabs,function(e){n.after(this),a.after(o.contents[e])}),i(r.tabGroup),r._updateContentElements(),r},remove:function(t){var n,i=this,o=typeof t;return"string"===o?t=i.tabGroup.find(t):"number"===o&&(t=i.tabGroup.children().eq(t)),n=t.map(function(){var t=i.contentElement(e(this).index());return r.destroy(t),t}),t.remove(),n.remove(),i._updateContentElements(),i},_create:function(i){var r,o,a,l=e.isPlainObject(i),c=this;return l||e.isArray(i)?(i=e.isArray(i)?i:[i],r=s(i,function(t,n){return e(W.renderItem({group:c.tabGroup,item:d(t,{index:n})}))}),o=s(i,function(n,i){return"string"==typeof n.content||n.contentUrl?e(W.renderContent({item:d(n,{index:i})})):t})):(r="string"==typeof i&&"<"!=i[0]?c.element.find(i):e(i),o=e(),r.each(function(){if(a=e("<div class='"+A+"'/>"),/k-tabstrip-items/.test(this.parentNode.className)){var t=parseInt(this.getAttribute("aria-controls").replace(/^.*-/,""),10)-1;a=e(c.contentElement(t))}o=o.add(a)}),n(r)),{tabs:r,contents:o}},_toggleDisabled:function(t,n){t=this.tabGroup.find(t),t.each(function(){e(this).toggleClass(F,n).toggleClass(z,!n)})},_updateClasses:function(){var r,o,a,s=this;s.wrapper.addClass("k-widget k-header k-tabstrip"),s.tabGroup=s.wrapper.children("ul").addClass("k-tabstrip-items k-reset"),s.tabGroup[0]||(s.tabGroup=e("<ul class='k-tabstrip-items k-reset'/>").appendTo(s.wrapper)),r=s.tabGroup.find("li").addClass("k-item"),r.length&&(o=r.filter("."+R).index(),a=o>=0?o:t,s.tabGroup.contents().filter(function(){return 3==this.nodeType&&!c(this.nodeValue)}).remove()),o>=0&&r.eq(o).addClass(O),s.contentElements=s.wrapper.children("div"),s.contentElements.addClass(A).eq(a).addClass(R).css({display:"block"}),r.length&&(n(r),i(s.tabGroup),s._updateContentElements())},_updateContentElements:function(){var t=this,n=t.options.contentUrls||[],i=t.tabGroup.find(".k-item"),o=(t.element.attr("id")||r.guid())+"-",a=t.wrapper.children("div");a.length&&i.length>a.length?(a.each(function(e){var t=parseInt(this.id.replace(o,""),10),n=i.filter("[aria-controls="+o+t+"]"),r=o+(e+1);n.data("aria",r),this.setAttribute("id",r)}),i.each(function(){var t=e(this);this.setAttribute("aria-controls",t.data("aria")),t.removeData("aria")})):i.each(function(i){var r=a.eq(i),s=o+(i+1);this.setAttribute("aria-controls",s),!r.length&&n[i]?e("<div class='"+A+"'/>").appendTo(t.wrapper).attr("id",s):(r.attr("id",s),e(this).children(".k-loading")[0]||n[i]||e("<span class='k-loading k-complete'/>").prependTo(this)),r.attr("role","tabpanel"),r.filter(":not(."+R+")").attr("aria-hidden",!0).attr("aria-expanded",!1),r.filter("."+R).attr("aria-expanded",!0)}),t.contentElements=t.contentAnimators=t.wrapper.children("div"),t.tabsHeight=t.tabGroup.outerHeight()+parseInt(t.wrapper.css("border-top-width"),10)+parseInt(t.wrapper.css("border-bottom-width"),10),r.kineticScrollNeeded&&r.mobile.ui.Scroller&&(r.touchScroller(t.contentElements),t.contentElements=t.contentElements.children(".km-scroll-container"))},_wrapper:function(){var e=this;e.wrapper=e.element.is("ul")?e.element.wrapAll("<div />").parent():e.element,e.scrollWrap=e.wrapper.parent(".k-tabstrip-wrapper"),e.scrollWrap[0]||(e.scrollWrap=e.wrapper.wrapAll("<div class='k-tabstrip-wrapper' />").parent())},_sizeScrollWrap:function(e){this.scrollWrap.css("height",Math.floor(e.outerHeight(!0))+this.tabsHeight).css("height")},_toggleHover:function(t){e(t.currentTarget).toggleClass(L,t.type==M)},_click:function(e){var t,n,i=this,r=e.find("."+y),o=r.attr(m),a=i.options.collapsible,s=i.contentHolder(e.index());if(e.closest(".k-widget")[0]==i.wrapper[0]){if(e.is("."+z+(a?"":",."+R)))return!0;if(n=r.data(E)||o&&("#"==o.charAt(o.length-1)||-1!=o.indexOf("#"+i.element[0].id+"-")),t=!o||n,i.tabGroup.children("[data-animating]").length)return t;if(i.trigger(T,{item:e[0],contentElement:s[0]}))return!0;if(t!==!1)return a&&e.is("."+R)?(i.deactivateTab(e),!0):(i.activateTab(e)&&(t=!0),t)}},deactivateTab:function(e){var t=this,n=t.options.animation,i=n.open,o=d({},n.close),a=o&&"effects"in o;e=t.tabGroup.find(e),o=d(a?o:d({reverse:!0},i),{hide:!0}),r.size(i.effects)?(e.kendoAddClass(F,{duration:i.duration}),e.kendoRemoveClass(R,{duration:i.duration})):(e.addClass(F),e.removeClass(R)),e.removeAttr("aria-selected"),t.contentAnimators.filter("."+R).kendoStop(!0,!0).kendoAnimate(o).removeClass(R).attr("aria-hidden",!0)},activateTab:function(e){var t,n,i,o,a,s,l,c,u,h,p,f,g,m,v;if(!this.tabGroup.children("[data-animating]").length)return e=this.tabGroup.find(e),t=this,n=t.options.animation,i=n.open,o=d({},n.close),a=o&&"effects"in o,s=e.parent().children(),l=s.filter("."+R),c=s.index(e),o=d(a?o:d({reverse:!0},i),{hide:!0}),r.size(i.effects)?(l.kendoRemoveClass(R,{duration:o.duration}),e.kendoRemoveClass(L,{duration:o.duration})):(l.removeClass(R),e.removeClass(L)),u=t.contentAnimators,t.inRequest&&(t.xhr.abort(),t.inRequest=!1),0===u.length?(l.removeClass(O),e.addClass(O).css("z-index"),e.addClass(R),t._current(e),t.trigger("change"),!1):(h=u.filter("."+R),p=t.contentHolder(c),f=p.closest(".k-content"),t.tabsHeight=t.tabGroup.outerHeight()+parseInt(t.wrapper.css("border-top-width"),10)+parseInt(t.wrapper.css("border-bottom-width"),10),t._sizeScrollWrap(h),0===p.length?(h.removeClass(R).attr("aria-hidden",!0).kendoStop(!0,!0).kendoAnimate(o),!1):(e.attr("data-animating",!0),g=(e.children("."+y).data(E)||!1)&&p.is(x),m=function(){l.removeClass(O),e.addClass(O).css("z-index"),r.size(i.effects)?(l.kendoAddClass(F,{duration:i.duration}),e.kendoAddClass(R,{duration:i.duration})):(l.addClass(F),e.addClass(R)),l.removeAttr("aria-selected"),e.attr("aria-selected",!0),t._current(e),t._sizeScrollWrap(f),f.addClass(R).removeAttr("aria-hidden").kendoStop(!0,!0).attr("aria-expanded",!0).kendoAnimate(d({init:function(){t.trigger(_,{item:e[0],contentElement:p[0]}),r.resize(p)}},i,{complete:function(){e.removeAttr("data-animating"),t.trigger(D,{item:e[0],contentElement:p[0]}),r.resize(p),t.scrollWrap.css("height","").css("height")}}))},v=function(){g?(e.removeAttr("data-animating"),t.ajaxRequest(e,p,function(){e.attr("data-animating",!0),m(),t.trigger("change")})):(m(),t.trigger("change"))},h.removeClass(R),h.attr("aria-hidden",!0),h.attr("aria-expanded",!1),h.length?h.kendoStop(!0,!0).kendoAnimate(d({complete:v},o)):v(),!0))},contentElement:function(e){var n,i,o,a;if(isNaN(e-0))return t;if(n=this.contentElements&&this.contentElements[0]&&!r.kineticScrollNeeded?this.contentElements:this.contentAnimators,e=n&&0>e?n.length+e:e,i=RegExp("-"+(e+1)+"$"),n)for(o=0,a=n.length;a>o;o++)if(i.test(n.eq(o).closest(".k-content")[0].id))return n[o];return t},contentHolder:function(t){var n=e(this.contentElement(t)),i=n.children(".km-scroll-container");return r.support.touch&&i[0]?i:n},ajaxRequest:function(t,n,i,o){var a,s,l,c,d,u,h,p,f;t=this.tabGroup.find(t),a=this,s=e.ajaxSettings.xhr,l=t.find("."+y),c={},d=t.width()/2,u=!1,h=t.find(".k-loading").removeClass("k-complete"),h[0]||(h=e("<span class='k-loading'/>").prependTo(t)),p=2*d-h.width(),f=function(){h.animate({marginLeft:(parseInt(h.css("marginLeft"),10)||0)<d?p:0},500,f)
},r.support.browser.msie&&10>r.support.browser.version&&setTimeout(f,40),o=o||l.data(E)||l.attr(m),a.inRequest=!0,a.xhr=e.ajax({type:"GET",cache:!1,url:o,dataType:"html",data:c,xhr:function(){var t=this,n=s(),i=t.progressUpload?"progressUpload":t.progress?"progress":!1;return n&&e.each([n,n.upload],function(){this.addEventListener&&this.addEventListener("progress",function(e){i&&t[i](e)},!1)}),t.noProgress=!(window.XMLHttpRequest&&"upload"in new XMLHttpRequest),n},progress:function(e){if(e.lengthComputable){var t=parseInt(e.loaded/e.total*100,10)+"%";h.stop(!0).addClass("k-progress").css({width:t,marginLeft:0})}},error:function(e,t){a.trigger("error",{xhr:e,status:t})&&this.complete()},stopProgress:function(){clearInterval(u),h.stop(!0).addClass("k-progress")[0].style.cssText=""},complete:function(e){a.inRequest=!1,this.noProgress?setTimeout(this.stopProgress,500):this.stopProgress(),"abort"==e.statusText&&h.remove()},success:function(e){var s,l,c;h.addClass("k-complete");try{s=this,l=10,s.noProgress&&(h.width(l+"%"),u=setInterval(function(){s.progress({lengthComputable:!0,loaded:Math.min(l,100),total:100}),l+=10},40)),a.angular("cleanup",function(){return{elements:n.get()}}),r.destroy(n),n.html(e)}catch(d){c=window.console,c&&c.error&&c.error(d.name+": "+d.message+" in "+o),this.error(this.xhr,"error")}i&&i.call(a,n),a.angular("compile",function(){return{elements:n.get()}}),a.trigger(I,{item:t[0],contentElement:n[0]})}})}});d(W,{renderItem:function(e){e=d({tabStrip:{},group:{}},e);var t=V.empty,n=e.item;return V.item(d(e,{image:n.imageUrl?V.image:t,sprite:n.spriteCssClass?V.sprite:t,itemWrapper:V.itemWrapper},U))},renderContent:function(e){return V.content(d(e,U))}}),r.ui.plugin(W)}(window.kendo.jQuery),function(e,t){function n(e,t,n){var i,r=e.getTimezoneOffset();e.setTime(e.getTime()+t),n||(i=e.getTimezoneOffset()-r,e.setTime(e.getTime()+i*z))}function i(){var e=new $,t=new $(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),n=new $(e.getFullYear(),e.getMonth(),e.getDate(),12,0,0);return-1*(t.getTimezoneOffset()-n.getTimezoneOffset())}function r(e){return 60*e.getHours()*z+e.getMinutes()*z+1e3*e.getSeconds()+e.getMilliseconds()}function o(e,t,n){var i,o=r(t),a=r(n);return e&&o!=a?(i=r(e),o>i&&(i+=F),o>a&&(a+=F),i>=o&&a>=i):!0}function a(e){var t=e.parseFormats;e.format=f(e.format||d.getCulture(e.culture).calendars.standard.patterns.t),t=j(t)?t:[t],t.splice(0,0,e.format),e.parseFormats=t}function s(e){e.preventDefault()}var l,c,d=window.kendo,u=d.keys,h=d.parseDate,p=d._activeElement,f=d._extractFormat,g=d.support,m=g.browser,v=d.ui,_=v.Widget,y="open",w="close",b="change",k=".kendoTimePicker",x="click"+k,C="k-state-default",S="disabled",T="readonly",D="li",A="<span/>",E="k-state-focused",M="k-state-hover",P="mouseenter"+k+" mouseleave"+k,I="mousedown"+k,z=6e4,F=864e5,R="k-state-selected",B="k-state-disabled",L="aria-selected",O="aria-expanded",H="aria-hidden",N="aria-disabled",V="aria-readonly",U="aria-activedescendant",W="id",j=e.isArray,G=e.extend,q=e.proxy,$=Date,Y=new $;Y=new $(Y.getFullYear(),Y.getMonth(),Y.getDate(),0,0,0),l=function(t){var n=this,i=t.id;n.options=t,n.ul=e('<ul tabindex="-1" role="listbox" aria-hidden="true" unselectable="on" class="k-list k-reset"/>').css({overflow:g.kineticScrollNeeded?"":"auto"}).on(x,D,q(n._click,n)).on("mouseenter"+k,D,function(){e(this).addClass(M)}).on("mouseleave"+k,D,function(){e(this).removeClass(M)}),n.list=e("<div class='k-list-container'/>").append(n.ul).on(I,s),i&&(n._timeViewID=i+"_timeview",n._optionID=i+"_option_selected",n.ul.attr(W,n._timeViewID)),n._popup(),n._heightHandler=q(n._height,n),n.template=d.template('<li tabindex="-1" role="option" class="k-item" unselectable="on">#=data#</li>',{useWithBlock:!1})},l.prototype={current:function(n){var i=this,r=i.options.active;return n===t?i._current:(i._current&&i._current.removeClass(R).removeAttr(L).removeAttr(W),n&&(n=e(n).addClass(R).attr(W,i._optionID).attr(L,!0),i.scroll(n[0])),i._current=n,r&&r(n),t)},close:function(){this.popup.close()},destroy:function(){var e=this;e.ul.off(k),e.list.off(k),e._touchScroller&&e._touchScroller.destroy(),e.popup.destroy()},open:function(){var e=this;e.ul[0].firstChild||e.bind(),e.popup.open(),e._current&&e.scroll(e._current[0])},dataBind:function(e){for(var t,n=this,i=n.options,r=i.format,a=d.toString,s=n.template,l=e.length,c=0,u="";l>c;c++)t=e[c],o(t,i.min,i.max)&&(u+=s(a(t,r,i.culture)));n._html(u)},refresh:function(){var e,t,o,a=this,s=a.options,l=s.format,c=i(),u=0>c,h=s.min,p=s.max,f=r(h),g=r(p),m=s.interval*z,v=d.toString,_=a.template,y=new $(+h),w=y.getDate(),b=0,k="";for(o=u?(F+c*z)/m:F/m,f!=g&&(f>g&&(g+=F),o=(g-f)/m+1),t=parseInt(o,10);o>b;b++)b&&n(y,m,u),g&&t==b&&(e=r(y),w<y.getDate()&&(e+=F),e>g&&(y=new $(+p))),k+=_(v(y,l,s.culture));a._html(k)},bind:function(){var e=this,t=e.options.dates;t&&t[0]?e.dataBind(t):e.refresh()},_html:function(e){var t=this;t.ul[0].innerHTML=e,t.popup.unbind(y,t._heightHandler),t.popup.one(y,t._heightHandler),t.current(null),t.select(t._value)},scroll:function(e){if(e){var t,n=this.ul[0],i=e.offsetTop,r=e.offsetHeight,o=n.scrollTop,a=n.clientHeight,s=i+r,l=this._touchScroller;l?(t=this.list.height(),i>t&&(i=i-t+r),l.scrollTo(0,-i)):n.scrollTop=o>i?i:s>o+a?s-a:o}},select:function(t){var n=this,i=n.options,r=n._current;t instanceof Date&&(t=d.toString(t,i.format,i.culture)),"string"==typeof t&&(r&&r.text()===t?t=r:(t=e.grep(n.ul[0].childNodes,function(e){return(e.textContent||e.innerText)==t}),t=t[0]?t:null)),n.current(t)},setOptions:function(e){var t=this.options;e.min=h(e.min),e.max=h(e.max),this.options=G(t,e,{active:t.active,change:t.change,close:t.close,open:t.open}),this.bind()},toggle:function(){var e=this;e.popup.visible()?e.close():e.open()},value:function(e){var t=this;t._value=e,t.ul[0].firstChild&&t.select(e)},_click:function(t){var n=this,i=e(t.currentTarget);t.isDefaultPrevented()||(n.select(i),n.options.change(i.text(),!0),n.close())},_height:function(){var e=this,t=e.list,n=t.parent(".k-animation-container"),i=e.options.height;e.ul[0].children.length&&t.add(n).show().height(e.ul[0].scrollHeight>i?i:"auto").hide()},_parse:function(e){var t=this,n=t.options,i=t._value||Y;return e instanceof $?e:(e=h(e,n.parseFormats,n.culture),e&&(e=new $(i.getFullYear(),i.getMonth(),i.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())),e)},_adjustListWidth:function(){var e,t,n=this.list,i=n[0].style.width,r=this.options.anchor;(n.data("width")||!i)&&(e=window.getComputedStyle?window.getComputedStyle(r[0],null):0,t=e?parseFloat(e.width):r.outerWidth(),e&&(m.mozilla||m.msie)&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),i=t-(n.outerWidth()-n.width()),n.css({fontFamily:r.css("font-family"),width:i}).data("width",i))},_popup:function(){var e=this,t=e.list,n=e.options,i=n.anchor;e.popup=new v.Popup(t,G(n.popup,{anchor:i,open:n.open,close:n.close,animation:n.animation,isRtl:g.isRtl(n.anchor)})),e._touchScroller=d.touchScroller(e.popup.element)},move:function(e){var n=this,i=e.keyCode,r=n.ul[0],o=n._current,a=i===u.DOWN;if(i===u.UP||a){if(e.altKey)return n.toggle(a),t;o=a?o?o[0].nextSibling:r.firstChild:o?o[0].previousSibling:r.lastChild,o&&n.select(o),n.options.change(n._current.text()),e.preventDefault()}else(i===u.ENTER||i===u.TAB||i===u.ESC)&&(e.preventDefault(),o&&n.options.change(o.text(),!0),n.close())}},l.getMilliseconds=r,d.TimeView=l,c=_.extend({init:function(e,t){var n,i,r,o=this;_.fn.init.call(o,e,t),e=o.element,t=o.options,t.min=h(e.attr("min"))||h(t.min),t.max=h(e.attr("max"))||h(t.max),a(t),o._wrapper(),o.timeView=i=new l(G({},t,{id:e.attr(W),anchor:o.wrapper,format:t.format,change:function(t,n){n?o._change(t):e.val(t)},open:function(t){o.timeView._adjustListWidth(),o.trigger(y)?t.preventDefault():(e.attr(O,!0),n.attr(H,!1))},close:function(t){o.trigger(w)?t.preventDefault():(e.attr(O,!1),n.attr(H,!0))},active:function(t){e.removeAttr(U),t&&e.attr(U,i._optionID)}})),n=i.ul,o._icon(),o._reset();try{e[0].setAttribute("type","text")}catch(s){e[0].type="text"}e.addClass("k-input").attr({role:"combobox","aria-expanded":!1,"aria-owns":i._timeViewID}),r=e.is("[disabled]"),r?o.enable(!1):o.readonly(e.is("[readonly]")),o._old=o._update(t.value||o.element.val()),o._oldText=e.val(),d.notify(o)},options:{name:"TimePicker",min:Y,max:Y,format:"",dates:[],parseFormats:[],value:null,interval:30,height:200,animation:{}},events:[y,w,b],setOptions:function(e){var t=this,n=t._value;_.fn.setOptions.call(t,e),e=t.options,a(e),t.timeView.setOptions(e),n&&t.element.val(d.toString(n,e.format,e.culture))},dataBind:function(e){j(e)&&this.timeView.dataBind(e)},_editable:function(e){var t=this,n=e.disable,i=e.readonly,r=t._arrow.off(k),o=t.element.off(k),a=t._inputWrapper.off(k);i||n?(a.addClass(n?B:C).removeClass(n?C:B),o.attr(S,n).attr(T,i).attr(N,n).attr(V,i)):(a.addClass(C).removeClass(B).on(P,t._toggleHover),o.removeAttr(S).removeAttr(T).attr(N,!1).attr(V,!1).on("keydown"+k,q(t._keydown,t)).on("focusout"+k,q(t._blur,t)).on("focus"+k,function(){t._inputWrapper.addClass(E)}),r.on(x,q(t._click,t)).on(I,s))},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},destroy:function(){var e=this;_.fn.destroy.call(e),e.timeView.destroy(),e.element.off(k),e._arrow.off(k),e._inputWrapper.off(k),e._form&&e._form.off("reset",e._resetHandler)},close:function(){this.timeView.close()},open:function(){this.timeView.open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},value:function(e){var n=this;return e===t?n._value:(n._old=n._update(e),null===n._old&&n.element.val(""),n._oldText=n.element.val(),t)},_blur:function(){var e=this,t=e.element.val();e.close(),t!==e._oldText&&e._change(t),e._inputWrapper.removeClass(E)},_click:function(){var e=this,t=e.element;e.timeView.toggle(),g.touch||t[0]===p()||t.focus()},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t.element.trigger(b),t.trigger(b))},_icon:function(){var t,n=this,i=n.element;t=i.next("span.k-select"),t[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(i)),n._arrow=t.attr({role:"button","aria-controls":n.timeView._timeViewID})},_keydown:function(e){var t=this,n=e.keyCode,i=t.timeView,r=t.element.val();i.popup.visible()||e.altKey?i.move(e):n===u.ENTER&&r!==t._oldText&&t._change(r)},_option:function(e,n){var i=this,r=i.options;return n===t?r[e]:(n=i.timeView._parse(n),n&&(n=new $(+n),r[e]=n,i.timeView.options[e]=n,i.timeView.bind()),t)},_toggleHover:function(t){e(t.currentTarget).toggleClass(M,"mouseenter"===t.type)},_update:function(e){var t=this,n=t.options,i=t.timeView,r=i._parse(e);return o(r,n.min,n.max)||(r=null),t._value=r,t.element.val(r?d.toString(r,n.format,n.culture):e),i.value(r),r},_wrapper:function(){var t,n=this,i=n.element;t=i.parents(".k-timepicker"),t[0]||(t=i.wrap(A).parent().addClass("k-picker-wrap k-state-default"),t=t.wrap(A).parent()),t[0].style.cssText=i[0].style.cssText,n.wrapper=t.addClass("k-widget k-timepicker k-header").addClass(i[0].className),i.css({width:"100%",height:i[0].style.height}),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){t.value(n[0].defaultValue)},t._form=r.on("reset",t._resetHandler))}}),v.plugin(c)}(window.kendo.jQuery),function(e,t){function n(n){var i=e(n.useButtonTag?"<button></button>":"<a></a>");return i.data({type:"button"}),i.attr($,n.uid),n.attributes&&i.attr(n.attributes),n.togglable&&(i.addClass(m),n.selected&&i.addClass(k)),n.enable===!1&&i.addClass(x),n.url===t||n.useButtonTag||(i.attr("href",n.url),n.mobile&&i.attr(c.attr("role"),"button")),n.group&&i.attr(c.attr("group"),n.group),!n.togglable&&n.click&&h(n.click)&&i.data("click",n.click),n.togglable&&n.toggle&&h(n.toggle)&&i.data("toggle",n.toggle),i}function i(e){var t,n=Y.button.base(e);return n.addClass(f),e.primary&&n.addClass(T),e.align&&n.addClass("k-align-"+e.align),e.id&&n.attr("id",e.id),"overflow"!=e.showText&&e.text&&n.html(e.mobile?'<span class="km-text">'+e.text+"</span>":e.text),t="overflow"!=e.showIcon&&(e.icon||e.spriteCssClass||e.imageUrl),t&&o(e,n),n}function r(e){var t,n=Y.button.base(e);return n.addClass(g+" "+f),e.primary&&n.addClass(T),e.id&&n.attr("id",e.id+"_overflow"),"toolbar"!=e.showText&&e.text&&n.html(e.mobile?'<span class="km-text">'+e.text+"</span>":e.text),t="toolbar"!=e.showIcon&&(e.icon||e.spriteCssClass||e.imageUrl),t&&o(e,n),n}function o(t,n){var i,r,o,a=t.icon,s=t.spriteCssClass,l=t.imageUrl;(s||l||a)&&(i=!0,n.contents().not("span.k-sprite,span."+D+",img.k-image").each(function(t,n){(1==n.nodeType||3==n.nodeType&&e.trim(n.nodeValue).length>0)&&(i=!1)}),n.addClass(i?E:M)),a?(r=n.children("span."+D).first(),r[0]||(r=e('<span class="'+D+'"></span>').prependTo(n)),r.addClass(A+a)):s?(r=n.children("span.k-sprite").first(),r[0]||(r=e('<span class="k-sprite"></span>').prependTo(n)),r.addClass(s)):l&&(o=n.children("img.k-image").first(),o[0]||(o=e('<img alt="icon" class="k-image" />').prependTo(n)),o.attr("src",l))}function a(){var e,t=this.options.anchor,n=t.outerWidth();c.wrap(this.element).addClass("k-split-wrapper"),e="border-box"!==this.element.css("box-sizing")?n-(this.element.outerWidth()-this.element.width()):n,this.element.css({fontFamily:t.css("font-family"),"min-width":e})}function s(e){e.target.is(".k-toggle-button")||e.target.toggleClass(k,"press"==e.type)}function l(t){return t=e(t),t.hasClass("km-actionsheet")?t.closest(".km-popup-wrapper"):t.addClass("km-widget km-actionsheet").wrap('<div class="km-actionsheet-wrapper km-actionsheet-tablet km-widget km-popup"></div>').parent().wrap('<div class="km-popup-wrapper k-popup"></div>').parent()}var c=window.kendo,d=c.ui.Widget,u=e.proxy,h=c.isFunction,p="k-toolbar",f="k-button",g="k-overflow-button",m="k-toggle-button",v="k-button-group",_="k-split-button",y="k-separator",w="k-popup",b="k-toolbar-resizable",k="k-state-active",x="k-state-disabled",C="k-group-start",S="k-group-end",T="k-primary",D="k-icon",A="k-i-",E="k-button-icon",M="k-button-icontext",P="k-list-container k-split-container",I="k-split-button-arrow",z="k-overflow-anchor",F="k-overflow-container",R="k-toolbar-first-visible",B="k-toolbar-last-visible",L="click",O="toggle",H="open",N="close",V="overflowOpen",U="overflowClose",W="never",j="auto",G="always",q="k-overflow-hidden",$=c.attr("uid"),Y={button:{base:n,toolbar:i,overflow:r},buttonGroup:{base:function(t,n,i){var r,o,a=t.buttons;if(a){for(t.attributes&&i.attr(t.attributes),i.data({type:"buttonGroup"}),i.attr($,t.uid),o=0;a.length>o;o++)a[o].uid||(a[o].uid=c.guid()),r=n(e.extend({mobile:t.mobile},a[o])),r.appendTo(i);i.children().first().addClass(C),i.children().last().addClass(S)}},toolbar:function(t){var n=e("<div></div>");return Y.buttonGroup.base(t,Y.button.toolbar,n),n.addClass(v),t.align&&n.addClass("k-align-"+t.align),t.id&&n.attr("id",t.id),n},overflow:function(t){var n=e("<li></li>");return Y.buttonGroup.base(t,Y.button.overflow,n),n.addClass((t.mobile?"":v)+" k-overflow-group"),t.id&&n.attr("id",t.id+"_overflow"),n}},splitButton:{toolbar:function(t){var n,i,r,o=e('<div class="'+_+'"></div>'),s=Y.button.toolbar(t),c=e('<a class="'+f+" "+I+'"><span class="'+(t.mobile?"km-icon km-arrowdown":"k-icon k-i-arrow-s")+'"></span></a>'),d=e('<ul class="'+P+'"></ul>'),u=t.menuButtons;for(s.appendTo(o),c.appendTo(o),d.appendTo(o),r=0;u.length>r;r++)i=Y.button.toolbar(e.extend({mobile:t.mobile,click:t.click},u[r])),i.wrap("<li></li>").parent().appendTo(d);return t.align&&o.addClass("k-align-"+t.align),t.id||(t.id=t.uid),o.attr("id",t.id+"_wrapper"),d.attr("id",t.id+"_optionlist").attr($,t.rootUid),t.mobile&&(d=l(d)),n=d.kendoPopup({appendTo:t.mobile?e(t.mobile).children(".km-pane"):null,anchor:o,copyAnchorStyles:!1,animation:t.animation,open:a}).data("kendoPopup"),o.data({type:"splitButton",kendoPopup:n}),o.attr($,t.uid),o},overflow:function(t){var n,i,r=e('<li class="'+_+'"></li>'),o=Y.button.overflow(t),a=t.menuButtons;for(o.appendTo(r),i=0;a.length>i;i++)n=Y.button.overflow(e.extend({mobile:t.mobile},a[i])),n.appendTo(r);return t.id&&r.attr("id",t.id+"_overflow"),r.data({type:"splitButton"}),r.attr($,t.uid),r}},separator:{base:function(t,n){var i=e(n?"<li>&nbsp;</li>":"<div>&nbsp;</div>");return i.data({type:"separator"}),i.attr($,t.uid),t.attributes&&i.attr(t.attributes),i.addClass(y),i},toolbar:function(e){return Y.separator.base(e,!1)},overflow:function(e){return Y.separator.base(e,!0)}},overflowAnchor:'<div class="k-overflow-anchor"></div>',overflowContainer:'<ul class="k-overflow-container k-list-container"></ul>'},K=d.extend({init:function(t,n){var i,r=this;if(d.fn.init.call(r,t,n),n=r.options,t=r.wrapper=r.element,t.addClass(p+" k-widget"),this.uid=c.guid(),t.attr($,this.uid),r.isMobile="boolean"==typeof n.mobile?n.mobile:r.element.closest(".km-root")[0],r.animation=r.isMobile?{open:{effects:"fade"}}:{},r.isMobile&&(t.addClass("km-widget"),D="km-icon",A="km-",f="km-button",v="km-buttongroup km-widget",k="km-state-active",x="km-state-disabled"),n.resizable?(r._renderOverflow(),t.addClass(b),r.overflowUserEvents=new c.UserEvents(r.element,{threshold:5,allowSelection:!0,filter:"."+z,tap:u(r._toggleOverflow,r)}),c.onResize(function(){r.resize()})):r.popup={element:e([])},n.items&&n.items.length)for(i=0;n.items.length>i;i++)r.add(n.items[i]);r.userEvents=new c.UserEvents(document,{threshold:5,allowSelection:!0,filter:"["+$+"="+this.uid+"] ."+f+", ["+$+"="+this.uid+"] ."+g,tap:u(r._buttonClick,r),press:s,release:s}),n.resizable&&this._toggleOverflowAnchor(),c.notify(r)},events:[L,O,H,N,V,U],options:{name:"ToolBar",items:[],resizable:!0,mobile:null},destroy:function(){var t=this;t.element.find("."+_).each(function(t,n){e(n).data("kendoPopup").destroy()}),t.userEvents.destroy(),t.options.resizable&&(t.overflowUserEvents.destroy(),t.popup.destroy()),d.fn.destroy.call(t)},add:function(t){var n,i,r=Y[t.type],o=t.template,a=this,s=a.isMobile?"":"k-item k-state-default",l=t.overflowTemplate;e.extend(t,{uid:c.guid(),animation:a.animation,mobile:a.isMobile,rootUid:a.uid}),o&&!l&&(t.overflow=W),t.overflow!==W&&a.options.resizable&&(l?i=e(h(l)?l(t):l):r&&(i=(r.overflow||e.noop)(t)),i&&i.length&&("LI"!==i.prop("tagName")&&(i.removeAttr($),i=i.wrap("<li></li>").parent(),i.attr($,t.uid)),a._attributes(i,t),i.addClass(s).appendTo(a.popup.container),i.data("overflow")===j&&i.addClass(q),a.angular("compile",function(){return{elements:i.get()}}))),t.overflow!==G&&(o?(n=h(o)?o(t):o,n instanceof jQuery||(n=e(n.replace(/^\s+|\s+$/g,""))),n=n.wrap("<div></div>").parent(),n.attr($,t.uid)):r&&(n=(r.toolbar||e.noop)(t)),n&&n.length&&(a._attributes(n,t),a.options.resizable?(n.appendTo(a.element).css("visibility","hidden"),a._shrink(a.element.innerWidth()),n.css("visibility","visible")):n.appendTo(a.element),a.angular("compile",function(){return{elements:n.get()}})))},remove:function(e){var t,n,i=this.element.find(e);!i.length&&this.options.resizable?(i=this.popup.element.find(e),n=i.parent().attr($)):n=i.attr($),t=i.data("type"),i.parent("."+_).data("type")&&(t="splitButton",i=i.parent()),"splitButton"===t&&i.data("kendoPopup").destroy(),i.add(this.popup.element.find("["+$+"='"+n+"']")).remove()},enable:function(n,i){var r=this.element.find(n).attr($);!r&&this.popup&&(r=this.popup.element.find(n).parent("li").attr($)),t===i&&(i=!0),i?e("["+$+"='"+r+"']").removeClass(x):e("["+$+"='"+r+"']").addClass(x)},getSelectedFromGroup:function(e){return this.element.find("."+m+"[data-group='"+e+"']").filter("."+k)},toggle:function(t,n){var i,r=e(t),o=r.data("uid"),a=r.data("group");r.hasClass(m)&&(a&&this.element.add(this.popup.element).find("."+m+"[data-group='"+a+"']").filter("."+k).removeClass(k),e.contains(this.element[0],r[0])?(i=this.popup.element.find("["+$+"='"+o+"']"),"LI"===i.prop("tagName")&&(i=i.find("."+m+":first"))):(o=o?o:r.parent().data("uid"),i=this.element.find("["+$+"='"+o+"']")),r.add(i).toggleClass(k,n))},_attributes:function(e,t){e.attr(c.attr("overflow"),t.overflow||j)},_renderOverflow:function(){var t=this,n=Y.overflowContainer;t.overflowAnchor=e(Y.overflowAnchor).addClass(f),t.element.append(t.overflowAnchor),t.isMobile?(t.overflowAnchor.append('<span class="km-icon km-more"></span>'),n=l(n)):t.overflowAnchor.append('<span class="k-icon k-i-more"></span>'),t.popup=new c.ui.Popup(n,{origin:"bottom right",position:"top right",anchor:t.overflowAnchor,animation:t.animation,appendTo:t.isMobile?e(t.isMobile).children(".km-pane"):null,copyAnchorStyles:!1,open:function(n){var i=c.wrap(t.popup.element).addClass("k-overflow-wrapper");t.isMobile?t.popup.container.css("max-height",parseFloat(e(".km-content:visible").innerHeight())-15+"px"):i.css("margin-left",(i.outerWidth()-i.width())/2+1),t.trigger(V)&&n.preventDefault()},close:function(e){t.trigger(U)&&e.preventDefault()}}),t.popup.container=t.isMobile?t.popup.element.find("."+F):t.popup.element,t.popup.container.attr($,this.uid)},_toggleOverflowAnchor:function(){this.overflowAnchor.css(this.popup.element.children(":not(."+q+", ."+w+")").length>0?{visibility:"visible",width:""}:{visibility:"hidden",width:"1px"})},_buttonClick:function(n){var i,r,o,a,s,l,c,d,u,p=this;if(n.preventDefault(),r=e(n.target).closest("."+f,p.element),!r.hasClass(z)&&(!r.length&&p.popup&&(r=e(n.target).closest("."+g,p.popup.container)),a=r.hasClass(g)?r.parent("li").hasClass(x):r.hasClass(x),!a)){if(n.target.closest("."+I).length)return p._toggle(n),t;u=r.attr("id")?r.attr("id").replace(/(_overflow$)/,""):t,r.hasClass(m)?(l=r.data("group"),c=h(r.data("toggle"))?r.data("toggle"):null,p.toggle(r),s=r.hasClass(k),d={target:r,group:l,checked:s,id:u},c&&c.call(p,d),p.trigger(O,d)):(c=h(r.data("click"))?r.data("click"):null,d={target:r,id:u},c&&c.call(p,d),p.trigger(L,d)),r.hasClass(g)&&p.popup.close(),o=r.closest(".k-split-container"),o[0]&&(i=o.data("kendoPopup"),(i?i:o.parents(".km-popup-wrapper").data("kendoPopup")).close())}},_toggle:function(t){var n,i=e(t.target).closest("."+_),r=i.data("kendoPopup");t.preventDefault(),i.hasClass(x)||(n=r.element.is(":visible")?this.trigger(N,{target:i}):this.trigger(H,{target:i}),n||r.toggle())},_toggleOverflow:function(){this.popup.toggle()},_resize:function(e){var t=e.width;this.options.resizable&&(this.popup.close(),this._shrink(t),this._stretch(t),this._markVisibles(),this._toggleOverflowAnchor())},_childrenWidth:function(){var t=0;return this.element.children(":visible").each(function(){t+=e(this).outerWidth(!0)}),Math.ceil(t)},_shrink:function(e){var t,n,i;if(e<this._childrenWidth())for(n=this.element.children(":visible:not([data-overflow='never'], ."+z+")"),i=n.length-1;i>=0&&(t=n.eq(i),!(e>this._childrenWidth()));i--)this._hideItem(t)},_stretch:function(e){var t,n,i;if(e>this._childrenWidth())for(n=this.element.children(":hidden"),i=0;n.length>i&&(t=n.eq(i),!(e<this._childrenWidth())&&this._showItem(t,e));i++);},_hideItem:function(e){e.hide(),this.popup&&this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").removeClass(q)},_showItem:function(e,t){return e.length&&t>this._childrenWidth()+e.outerWidth(!0)?(e.show(),this.popup&&this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").addClass(q),!0):!1},_markVisibles:function(){var e=this.popup.container.children(),t=this.element.children(":not(.k-overflow-anchor)"),n=e.filter(":not(.k-overflow-hidden)"),i=t.filter(":visible");e.add(t).removeClass(R+" "+B),n.first().add(i.first()).addClass(R),n.last().add(i.last()).addClass(B)}});c.ui.plugin(K)}(window.kendo.jQuery),function(e,t){function n(e){var t=new Date(2100,0,1);return t.setMinutes(-e),t}function i(e){e.preventDefault()}function r(t){var n,i=o.getCulture(t.culture).calendars.standard.patterns;t.format=c(t.format||i.g),t.timeFormat=n=c(t.timeFormat||i.t),o.DateView.normalize(t),-1===e.inArray(n,t.parseFormats)&&t.parseFormats.splice(1,0,n)}var o=window.kendo,a=o.TimeView,s=o.parseDate,l=o._activeElement,c=o._extractFormat,d=o.calendar,u=d.isInRange,h=d.restrictValue,p=d.isEqualDatePart,f=a.getMilliseconds,g=o.ui,m=g.Widget,v="open",_="close",y="change",w=".kendoDateTimePicker",b="click"+w,k="disabled",x="readonly",C="k-state-default",S="k-state-focused",T="k-state-hover",D="k-state-disabled",A="mouseenter"+w+" mouseleave"+w,E="mousedown"+w,M="month",P="<span/>",I="aria-activedescendant",z="aria-expanded",F="aria-hidden",R="aria-owns",B="aria-disabled",L="aria-readonly",O=Date,H=new O(1900,0,1),N=new O(2099,11,31),V={view:"date"},U={view:"time"},W=e.extend,j=m.extend({init:function(e,t){var n,i=this;m.fn.init.call(i,e,t),e=i.element,t=i.options,t.min=s(e.attr("min"))||s(t.min),t.max=s(e.attr("max"))||s(t.max),r(t),i._wrapper(),i._views(),i._icons(),i._reset(),i._template();try{e[0].setAttribute("type","text")}catch(a){e[0].type="text"}e.addClass("k-input").attr({role:"combobox","aria-expanded":!1}),i._midnight=f(t.min)+f(t.max)===0,n=e.is("[disabled]"),n?i.enable(!1):i.readonly(e.is("[readonly]")),i._old=i._update(t.value||i.element.val()),i._oldText=e.val(),o.notify(i)},options:{name:"DateTimePicker",value:null,format:"",timeFormat:"",culture:"",parseFormats:[],dates:[],min:new O(H),max:new O(N),interval:30,height:200,footer:"",start:M,depth:M,animation:{},month:{},ARIATemplate:'Current focused date is #=kendo.toString(data.current, "d")#'},events:[v,_,y],setOptions:function(e){var t,n,i,a=this,l=a._value;m.fn.setOptions.call(a,e),e=a.options,e.min=t=s(e.min),e.max=n=s(e.max),r(e),i=e.value||a._value||a.dateView._current,t&&!p(t,i)&&(t=new O(H)),n&&!p(n,i)&&(n=new O(N)),a.dateView.setOptions(e),a.timeView.setOptions(W({},e,{format:e.timeFormat,min:t,max:n})),l&&(a.element.val(o.toString(l,e.format,e.culture)),a._updateARIA(l))},_editable:function(t){var n=this,r=n.element.off(w),a=n._dateIcon.off(w),s=n._timeIcon.off(w),c=n._inputWrapper.off(w),d=t.readonly,u=t.disable;d||u?(c.addClass(u?D:C).removeClass(u?C:D),r.attr(k,u).attr(x,d).attr(B,u).attr(L,d)):(c.addClass(C).removeClass(D).on(A,n._toggleHover),r.removeAttr(k).removeAttr(x).attr(B,!1).attr(L,!1).on("keydown"+w,e.proxy(n._keydown,n)).on("focus"+w,function(){n._inputWrapper.addClass(S)}).on("focusout"+w,function(){n._inputWrapper.removeClass(S),r.val()!==n._oldText&&n._change(r.val()),n.close("date"),n.close("time")}),a.on(E,i).on(b,function(){n.toggle("date"),o.support.touch||r[0]===l()||r.focus()}),s.on(E,i).on(b,function(){n.toggle("time"),o.support.touch||r[0]===l()||r.focus()}))},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},destroy:function(){var e=this;m.fn.destroy.call(e),e.dateView.destroy(),e.timeView.destroy(),e.element.off(w),e._dateIcon.off(w),e._timeIcon.off(w),e._inputWrapper.off(w),e._form&&e._form.off("reset",e._resetHandler)},close:function(e){"time"!==e&&(e="date"),this[e+"View"].close()},open:function(e){"time"!==e&&(e="date"),this[e+"View"].open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},toggle:function(e){var t="timeView";"time"!==e?e="date":t="dateView",this[e+"View"].toggle(),this[t].close()},value:function(e){var n=this;return e===t?n._value:(n._old=n._update(e),null===n._old&&n.element.val(""),n._oldText=n.element.val(),t)},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t.trigger(y),t.element.trigger(y))},_option:function(e,i){var r,o,a=this,l=a.options,c=a.timeView,d=c.options,u=a._value||a._old;if(i===t)return l[e];if(i=s(i,l.parseFormats,l.culture)){if(l.min.getTime()===l.max.getTime()&&(d.dates=[]),l[e]=new O(i.getTime()),a.dateView[e](i),a._midnight=f(l.min)+f(l.max)===0,u&&(r=p(l.min,u),o=p(l.max,u)),r||o){if(d[e]=i,r&&!o&&(d.max=n(l.interval)),o){if(a._midnight)return c.dataBind([N]),t;r||(d.min=H)}}else d.max=N,d.min=H;c.bind()}},_toggleHover:function(t){e(t.currentTarget).toggleClass(T,"mouseenter"===t.type)},_update:function(t){var i,r,a,l,c,d=this,f=d.options,g=f.min,m=f.max,v=f.dates,_=d.timeView,y=d._value,w=s(t,f.parseFormats,f.culture),b=null===w&&null===y||w instanceof Date&&y instanceof Date;return+w===+y&&b?(c=o.toString(w,f.format,f.culture),c!==t&&d.element.val(null===w?t:c),w):(null!==w&&p(w,g)?w=h(w,g,m):u(w,g,m)||(w=null),d._value=w,_.value(w),d.dateView.value(w),w&&(a=d._old,r=_.options,v[0]&&(v=e.grep(v,function(e){return p(w,e)}),v[0]&&(_.dataBind(v),l=!0)),l||(p(w,g)&&(r.min=g,r.max=n(f.interval),i=!0),p(w,m)&&(d._midnight?(_.dataBind([N]),l=!0):(r.max=m,i||(r.min=H),i=!0))),!l&&(!a&&i||a&&!p(a,w))&&(i||(r.max=N,r.min=H),_.bind())),d.element.val(w?o.toString(w,f.format,f.culture):t),d._updateARIA(w),w)},_keydown:function(e){var t=this,n=t.dateView,i=t.timeView,r=t.element.val(),a=n.popup.visible();e.altKey&&e.keyCode===o.keys.DOWN?t.toggle(a?"time":"date"):a?(n.move(e),t._updateARIA(n._current)):i.popup.visible()?i.move(e):e.keyCode===o.keys.ENTER&&r!==t._oldText&&t._change(r)},_views:function(){var e,t,n,i,r,l,c=this,d=c.element,h=c.options,p=d.attr("id");c.dateView=e=new o.DateView(W({},h,{id:p,anchor:c.wrapper,change:function(){var t,n=e.calendar.value(),i=+n,r=+h.min,o=+h.max;(i===r||i===o)&&(t=new O(+c._value),t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),u(t,r,o)&&(n=t)),c._change(n),c.close("date")},close:function(e){c.trigger(_,V)?e.preventDefault():(d.attr(z,!1),n.attr(F,!0),t.popup.visible()||d.removeAttr(R))},open:function(t){c.trigger(v,V)?t.preventDefault():(c.element.val()!==c._oldText&&(l=s(d.val(),h.parseFormats,h.culture),c.dateView[l?"current":"value"](l)),n.attr(F,!1),d.attr(z,!0).attr(R,e._dateViewID),c._updateARIA(l))}})),n=e.div,r=h.min.getTime(),c.timeView=t=new a({id:p,value:h.value,anchor:c.wrapper,animation:h.animation,format:h.timeFormat,culture:h.culture,height:h.height,interval:h.interval,min:new O(H),max:new O(N),dates:r===h.max.getTime()?[new Date(r)]:[],parseFormats:h.parseFormats,change:function(n,i){n=t._parse(n),h.min>n?(n=new O(+h.min),t.options.min=n):n>h.max&&(n=new O(+h.max),t.options.max=n),i?(c._timeSelected=!0,c._change(n)):(d.val(o.toString(n,h.format,h.culture)),e.value(n),c._updateARIA(n))},close:function(t){c.trigger(_,U)?t.preventDefault():(i.attr(F,!0),d.attr(z,!1),e.popup.visible()||d.removeAttr(R))},open:function(e){t._adjustListWidth(),c.trigger(v,U)?e.preventDefault():(i.attr(F,!1),d.attr(z,!0).attr(R,t._timeViewID),t.options.active(t.current()))},active:function(e){d.removeAttr(I),e&&d.attr(I,t._optionID)}}),i=t.ul},_icons:function(){var t,n=this,i=n.element;t=i.next("span.k-select"),t[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(i)),t=t.children(),n._dateIcon=t.eq(0).attr({role:"button","aria-controls":n.dateView._dateViewID}),n._timeIcon=t.eq(1).attr({role:"button","aria-controls":n.timeView._timeViewID})},_wrapper:function(){var t,n=this,i=n.element;t=i.parents(".k-datetimepicker"),t[0]||(t=i.wrap(P).parent().addClass("k-picker-wrap k-state-default"),t=t.wrap(P).parent()),t[0].style.cssText=i[0].style.cssText,i.css({width:"100%",height:i[0].style.height}),n.wrapper=t.addClass("k-widget k-datetimepicker k-header").addClass(i[0].className),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){t.value(n[0].defaultValue)},t._form=r.on("reset",t._resetHandler))},_template:function(){this._ariaTemplate=o.template(this.options.ARIATemplate)},_updateARIA:function(e){var t,n=this,i=n.dateView.calendar;n.element.removeAttr(I),i&&(t=i._cell,t.attr("aria-label",n._ariaTemplate({current:e||i.current()})),n.element.attr(I,t.attr("id")))}});g.plugin(j)}(window.kendo.jQuery),function(e,t){function n(e){return v.test(e)}function i(e){return m.test(e)||/^\d+$/.test(e)
}function r(e){return!n(e)&&!i(e)}function o(e,t){var i=parseInt(e,10);return n(e)&&(i=Math.floor(i*t/100)),i}function a(e,n){return function(i,r){var o,a=this.element.find(i).data(E);return 1==arguments.length?a[e]:(a[e]=r,n&&(o=this.element.data("kendo"+this.options.name),o.resize(!0)),t)}}function s(e){var t=this,n=e.orientation;t.owner=e,t._element=e.element,t.orientation=n,p(t,n===S?c:l),t._resizable=new d.ui.Resizable(e.element,{orientation:n,handle:".k-splitbar-draggable-"+n+"[data-marker="+e._marker+"]",hint:f(t._createHint,t),start:f(t._start,t),max:f(t._max,t),min:f(t._min,t),invalidClass:"k-restricted-size-"+n,resizeend:f(t._stop,t)})}var l,c,d=window.kendo,u=d.ui,h=d.keys,p=e.extend,f=e.proxy,g=u.Widget,m=/^\d+(\.\d+)?px$/i,v=/^\d+(\.\d+)?%$/i,_=".kendoSplitter",y="expand",w="collapse",b="contentLoad",k="error",x="resize",C="layoutChange",S="horizontal",T="vertical",D="mouseenter",A="click",E="pane",M="mouseleave",P="k-state-focused",I="k-"+E,z="."+I,F=g.extend({init:function(e,t){var n,i=this;g.fn.init.call(i,e,t),i.wrapper=i.element,n=i.options.orientation.toLowerCase()!=T,i.orientation=n?S:T,i._dimension=n?"width":"height",i._keys={decrease:n?h.LEFT:h.UP,increase:n?h.RIGHT:h.DOWN},i._resizeStep=10,i._marker=d.guid().substring(0,8),i._initPanes(),i.resizing=new s(i),i.element.triggerHandler("init"+_)},events:[y,w,b,k,x,C],_attachEvents:function(){var t=this,n=t.options.orientation;t.element.children(".k-splitbar-draggable-"+n).on("keydown"+_,e.proxy(t._keydown,t)).on("mousedown"+_,function(e){e.currentTarget.focus()}).on("focus"+_,function(t){e(t.currentTarget).addClass(P)}).on("blur"+_,function(n){e(n.currentTarget).removeClass(P),t.resizing&&t.resizing.end()}).on(D+_,function(){e(this).addClass("k-splitbar-"+t.orientation+"-hover")}).on(M+_,function(){e(this).removeClass("k-splitbar-"+t.orientation+"-hover")}).on("mousedown"+_,function(){t._panes().append("<div class='k-splitter-overlay k-overlay' />")}).on("mouseup"+_,function(){t._panes().children(".k-splitter-overlay").remove()}).end().children(".k-splitbar").on("dblclick"+_,f(t._togglePane,t)).children(".k-collapse-next, .k-collapse-prev").on(A+_,t._arrowClick(w)).end().children(".k-expand-next, .k-expand-prev").on(A+_,t._arrowClick(y)).end().end(),e(window).on("resize"+_+t._marker,f(t.resize,t))},_detachEvents:function(){var t=this;t.element.children(".k-splitbar-draggable-"+t.orientation).off(_).end().children(".k-splitbar").off("dblclick"+_).children(".k-collapse-next, .k-collapse-prev, .k-expand-next, .k-expand-prev").off(_),e(window).off("resize"+_+t._marker)},options:{name:"Splitter",orientation:S,panes:[]},destroy:function(){g.fn.destroy.call(this),this._detachEvents(),this.resizing&&this.resizing.destroy(),d.destroy(this.element),this.wrapper=this.element=null},_keydown:function(t){var n,i=this,r=t.keyCode,o=i.resizing,a=e(t.currentTarget),s=i._keys,l=r===s.increase,c=r===s.decrease;l||c?(t.ctrlKey?(n=a[c?"next":"prev"](),o&&o.isResizing()&&o.end(),n[i._dimension]()?i._triggerAction(w,a[c?"prev":"next"]()):i._triggerAction(y,n)):o&&o.move((c?-1:1)*i._resizeStep,a),t.preventDefault()):r===h.ENTER&&o&&(o.end(),t.preventDefault())},_initPanes:function(){var e=this.options.panes||[],t=this;this.element.addClass("k-widget").addClass("k-splitter").children().each(function(n,i){"script"!=i.nodeName.toLowerCase()&&t._initPane(i,e[n])}),this.resize()},_initPane:function(t,n){t=e(t).attr("role","group").addClass(I),t.data(E,n?n:{}).toggleClass("k-scrollable",n?n.scrollable!==!1:!0),this.ajaxRequest(t)},ajaxRequest:function(e,t,n){var i,r=this;e=r.element.find(e),i=e.data(E),t=t||i.contentUrl,t&&(e.append("<span class='k-icon k-loading k-pane-loading' />"),d.isLocalUrl(t)?jQuery.ajax({url:t,data:n||{},type:"GET",dataType:"html",success:function(t){r.angular("cleanup",function(){return{elements:e.get()}}),e.html(t),r.angular("compile",function(){return{elements:e.get()}}),r.trigger(b,{pane:e[0]})},error:function(t,n){r.trigger(k,{pane:e[0],status:n,xhr:t})}}):e.removeClass("k-scrollable").html("<iframe src='"+t+"' frameborder='0' class='k-content-frame'>This page requires frames in order to show content</iframe>"))},_triggerAction:function(e,t){this.trigger(e,{pane:t[0]})||this[e](t[0])},_togglePane:function(t){var n,i=this,r=e(t.target);r.closest(".k-splitter")[0]==i.element[0]&&(n=r.children(".k-icon:not(.k-resize-handle)"),1===n.length&&(n.is(".k-collapse-prev")?i._triggerAction(w,r.prev()):n.is(".k-collapse-next")?i._triggerAction(w,r.next()):n.is(".k-expand-prev")?i._triggerAction(y,r.prev()):n.is(".k-expand-next")&&i._triggerAction(y,r.next())))},_arrowClick:function(t){var n=this;return function(i){var r,o=e(i.target);o.closest(".k-splitter")[0]==n.element[0]&&(r=o.is(".k-"+t+"-prev")?o.parent().prev():o.parent().next(),n._triggerAction(t,r))}},_updateSplitBar:function(e,t,n){var i=function(e,t){return t?"<div class='k-icon "+e+"' />":""},r=this.orientation,o=t.resizable!==!1&&n.resizable!==!1,a=t.collapsible,s=t.collapsed,l=n.collapsible,c=n.collapsed;e.addClass("k-splitbar k-state-default k-splitbar-"+r).attr("role","separator").attr("aria-expanded",!(s||c)).removeClass("k-splitbar-"+r+"-hover").toggleClass("k-splitbar-draggable-"+r,o&&!s&&!c).toggleClass("k-splitbar-static-"+r,!o&&!a&&!l).html(i("k-collapse-prev",a&&!s&&!c)+i("k-expand-prev",a&&s&&!c)+i("k-resize-handle",o)+i("k-collapse-next",l&&!c&&!s)+i("k-expand-next",l&&c&&!s)),o||a||l||e.removeAttr("tabindex")},_updateSplitBars:function(){var t=this;this.element.children(".k-splitbar").each(function(){var n=e(this),i=n.prevAll(z).first().data(E),r=n.nextAll(z).first().data(E);r&&t._updateSplitBar(n,i,r)})},_removeSplitBars:function(){this.element.children(".k-splitbar").remove()},_panes:function(){return this.element.children(z)},_resize:function(){var n,i,a,s,l,c,u,h,p,f,g=this,m=g.element,v=m.children(z),_=g.orientation==S,y=m.children(".k-splitbar"),w=y.length,b=_?"width":"height",k=m[b]();0===w?(w=v.length-1,v.slice(0,w).after("<div tabindex='0' class='k-splitbar' data-marker='"+g._marker+"' />"),g._updateSplitBars(),y=m.children(".k-splitbar")):g._updateSplitBars(),y.each(function(){k-=this[_?"offsetWidth":"offsetHeight"]}),n=0,i=0,a=e(),v.css({position:"absolute",top:0})[b](function(){var s,l=e(this),c=l.data(E)||{};if(l.removeClass("k-state-collapsed"),c.collapsed)s=c.collapsedSize?o(c.collapsedSize,k):0,l.css("overflow","hidden").addClass("k-state-collapsed");else{if(r(c.size))return a=a.add(this),t;s=o(c.size,k)}return i++,n+=s,s}),k-=n,s=a.length,l=Math.floor(k/s),a.slice(0,s-1).css(b,l).end().eq(s-1).css(b,k-(s-1)*l),c=0,u=_?"height":"width",h=_?"left":"top",p=_?"offsetWidth":"offsetHeight",0===s&&(f=v.filter(function(){return!(e(this).data(E)||{}).collapsed}).last(),f[b](k+f[0][p])),m.children().css(u,m[u]()).each(function(e,t){"script"!=t.tagName.toLowerCase()&&(t.style[h]=Math.floor(c)+"px",c+=t[p])}),g._detachEvents(),g._attachEvents(),d.resize(v),g.trigger(C)},toggle:function(e,n){var i,r=this;e=r.element.find(e),i=e.data(E),(n||i.collapsible)&&(1==arguments.length&&(n=i.collapsed===t?!1:i.collapsed),i.collapsed=!n,i.collapsed?e.css("overflow","hidden"):e.css("overflow",""),r.resize(!0))},collapse:function(e){this.toggle(e,!1)},expand:function(e){this.toggle(e,!0)},_addPane:function(e,t,n){var i=this;return n.length&&(i.options.panes.splice(t,0,e),i._initPane(n,e),i._removeSplitBars(),i.resize(!0)),n},append:function(t){t=t||{};var n=this,i=e("<div />").appendTo(n.element);return n._addPane(t,n.options.panes.length,i)},insertBefore:function(t,n){n=e(n),t=t||{};var i=this,r=i.wrapper.children(".k-pane").index(n),o=e("<div />").insertBefore(e(n));return i._addPane(t,r,o)},insertAfter:function(t,n){n=e(n),t=t||{};var i=this,r=i.wrapper.children(".k-pane").index(n),o=e("<div />").insertAfter(e(n));return i._addPane(t,r+1,o)},remove:function(t){t=e(t);var n=this;return t.length&&(d.destroy(t),t.each(function(t,i){n.options.panes.splice(n.wrapper.children(".k-pane").index(i),1),e(i).remove()}),n._removeSplitBars(),n.options.panes.length&&n.resize(!0)),n},size:a("size",!0),min:a("min"),max:a("max")});u.plugin(F),l={sizingProperty:"height",sizingDomProperty:"offsetHeight",alternateSizingProperty:"width",positioningProperty:"top",mousePositioningProperty:"pageY"},c={sizingProperty:"width",sizingDomProperty:"offsetWidth",alternateSizingProperty:"height",positioningProperty:"left",mousePositioningProperty:"pageX"},s.prototype={press:function(e){this._resizable.press(e)},move:function(e,t){this.pressed||(this.press(t),this.pressed=!0),this._resizable.target||this._resizable.press(t),this._resizable.move(e)},end:function(){this._resizable.end(),this.pressed=!1},destroy:function(){this._resizable.destroy(),this._resizable=this._element=this.owner=null},isResizing:function(){return this._resizable.resizing},_createHint:function(t){var n=this;return e("<div class='k-ghost-splitbar k-ghost-splitbar-"+n.orientation+" k-state-default' />").css(n.alternateSizingProperty,t[n.alternateSizingProperty]())},_start:function(t){var n=this,r=e(t.currentTarget),o=r.prev(),a=r.next(),s=o.data(E),l=a.data(E),c=parseInt(o[0].style[n.positioningProperty],10),d=parseInt(a[0].style[n.positioningProperty],10)+a[0][n.sizingDomProperty]-r[0][n.sizingDomProperty],u=parseInt(n._element.css(n.sizingProperty),10),h=function(e){var t=parseInt(e,10);return(i(e)?t:u*t/100)||0},p=h(s.min),f=h(s.max)||d-c,g=h(l.min),m=h(l.max)||d-c;n.previousPane=o,n.nextPane=a,n._maxPosition=Math.min(d-g,c+f),n._minPosition=Math.max(c+p,d-m)},_max:function(){return this._maxPosition},_min:function(){return this._minPosition},_stop:function(t){var n,i,o,a,s,l,c,u,h=this,p=e(t.currentTarget),f=h.owner;return f._panes().children(".k-splitter-overlay").remove(),t.keyCode!==d.keys.ESC&&(n=t.position,i=p.prev(),o=p.next(),a=i.data(E),s=o.data(E),l=n-parseInt(i[0].style[h.positioningProperty],10),c=parseInt(o[0].style[h.positioningProperty],10)+o[0][h.sizingDomProperty]-n-p[0][h.sizingDomProperty],u=h._element.children(z).filter(function(){return r(e(this).data(E).size)}).length,(!r(a.size)||u>1)&&(r(a.size)&&u--,a.size=l+"px"),(!r(s.size)||u>1)&&(s.size=c+"px"),f.resize(!0)),!1}}}(window.kendo.jQuery),function(e){function t(e,t){function n(e,r){var o,a;if(r=r[t])for(o=i[e]=i[e]||[],a=0;r.length>a;a++)o.push(r[a]),n(e+1,r[a])}var i=[];return n(0,e),i}function n(){return M.support.cssBorderSpacing?"":'cellspacing="0"'}function i(t,i){return t.length?"<table "+n()+' class="'+e.trim("k-scheduler-table "+(i||""))+'"><tr>'+t.join("</tr><tr>")+"</tr></table>":""}function r(e,t){return e.length?"<div style='position:relative'>"+i(e,t)+"</div>":""}function o(t,n,r){var o,a=[];if(r>0)for(o=0;t>o;o++)a.push("<th>&nbsp;</th>");return n&&a.push('<th class="k-scheduler-times-all-day">'+n.text+"</th>"),1>r?e():e('<div class="k-scheduler-times">'+i(a)+"</div>")}function a(t,n,o){var a,s,l,c,d,u,h,p,f,g,m=[];for(s=0;t.length>s;s++){for(l=t[s],c=[],d=n/l.length,a=0;l.length>a;a++)u=l[a],c.push('<th colspan="'+(u.colspan||d)+'" class="'+(u.className||"")+'">'+u.text+"</th>");m.push(c.join(""))}if(h=[],o){for(p=t[t.length-1],f=[],g=o.cellContent,a=0;p.length>a;a++)f.push('<td class="'+(p[a].className||"")+'">'+(g?g(a):"&nbsp;")+"</th>");h.push(f.join(""))}return e('<div class="k-scheduler-header k-state-default"><div class="k-scheduler-header-wrap">'+i(m)+r(h,"k-scheduler-header-all-day")+"</div></div>")}function s(t,n){var r,o,a,s,l,c=Array(n).join().split(","),d=[];for(o=0;t.length>o;o++)for(a=t[o],s=n/a.length,r=0;a.length>r;r++)l=a[r].className||"",a[r].allDay&&(l="k-scheduler-times-all-day"),c[s*r]+='<th class="'+l+'" rowspan="'+s+'">'+a[r].text+"</th>";for(r=0;n>r;r++)d.push(c[r]);return 1>n?e():e('<div class="k-scheduler-times">'+i(d)+"</div>")}function l(){return e('<div class="k-scheduler-content"><table '+n()+' class="k-scheduler-table"/></div>')}function c(){return D=D?D:M.support.scrollbar()}function d(e,t,n){var i,r,o,a,s;for(i=e.length-1;i>=0;i--)r=u(e[i]),o=r.start,s=r.end,a=t>=o&&s>=t,(a||o>=t&&n>=s||o>=t&&n>=o)&&(t>o&&(t=o),s>n&&(n=s));return h(e,t,n)}function u(e){return{start:e.start,end:e.end}}function h(e,t,n){var i,r,o=[];for(i=0;e.length>i;i++)r=u(e[i]),(t>r.start&&r.end>t||r.start>=t&&n>=r.end)&&o.push(e[i]);return o}function p(e){return g(e)}function f(e){return g(e)}function g(e){var t,n,i,r,o,a,s,l=[];for(t=0;e.length>t;t++){for(n=e[t],i=u(n),r=null,o=0,a=l.length;a>o;o++)if(s=i.start>l[o].end,l[o].start>i.start||s){r=l[o],i.end>r.end&&(r.end=i.end);break}r||(r={start:i.start,end:i.end,events:[]},l.push(r)),r.events.push(n)}return l}function m(e,t,n,i){var r,o,a,s,l=t[0];if(l){for(r=[],o=l.dataSource.view(),a=0;o.length>a;a++)s={text:i({text:M.htmlEncode(M.getter(l.dataTextField)(o[a])),color:M.getter(l.dataColorField)(o[a]),field:l.field,title:l.title,name:l.name,value:M.getter(l.dataValueField)(o[a])}),className:"k-slot-cell"},s[e]=m(e,t.slice(1),n,i),r.push(s);return r}return n}function v(t){return function(n){if(e.isArray(n)||n instanceof M.data.ObservableArray){for(var i=0;n.length>i;i++)if(n[i]==t)return!0;return!1}return n==t}}function _(e){e.className=e.className.replace(E,"")+" k-state-selected"}var y,w,b,k,x,C,S,T,D,A,E,M=window.kendo,P=M.ui,I=P.Widget,z=M.keys,F=".kendoSchedulerView",R=Math,B='<div class="k-marquee k-scheduler-marquee"><div class="k-marquee-color"></div><div class="k-marquee-text"><div class="k-label-top"></div><div class="k-label-bottom"></div></div></div>';M.ui.scheduler={},y=M.Class.extend({init:function(e){this._index=e,this._timeSlotCollections=[],this._daySlotCollections=[]},addTimeSlotCollection:function(e,t){return this._addCollection(e,t,this._timeSlotCollections)},addDaySlotCollection:function(e,t){return this._addCollection(e,t,this._daySlotCollections)},_addCollection:function(e,t,n){var i=new x(e,t,this._index,n.length);return n.push(i),i},timeSlotCollectionCount:function(){return this._timeSlotCollections.length},daySlotCollectionCount:function(){return this._daySlotCollections.length},daySlotByPosition:function(e,t){return this._slotByPosition(e,t,this._daySlotCollections)},timeSlotByPosition:function(e,t){return this._slotByPosition(e,t,this._timeSlotCollections)},_slotByPosition:function(e,t,n){var i,r,o,a;for(i=0;n.length>i;i++)for(r=n[i],o=0;o<r.count();o++)if(a=r.at(o),e>=a.offsetLeft&&a.offsetLeft+a.clientWidth>e&&t>=a.offsetTop&&a.offsetTop+a.clientHeight>=t)return a},refresh:function(){var e;for(e=0;this._daySlotCollections.length>e;e++)this._daySlotCollections[e].refresh();for(e=0;this._timeSlotCollections.length>e;e++)this._timeSlotCollections[e].refresh()},timeSlotRanges:function(e,t){var n,i=this._timeSlotCollections,r=this._startSlot(e,i);return!r.inRange&&e>=r.slot.end&&(r=null),n=r,t>e&&(n=this._endSlot(t,i)),n&&!n.inRange&&n.slot.start>=t&&(n=null),null===r&&null===n?[]:(null===r&&(r={inRange:!0,slot:i[n.slot.collectionIndex].first()}),null===n&&(n={inRange:!0,slot:i[r.slot.collectionIndex].last()}),this._continuousRange(b,i,r,n))},daySlotRanges:function(e,t,n){var i,r=this._daySlotCollections,o=this._startSlot(e,r,n);if(!o.inRange&&e>=o.slot.end&&(o=null),i=o,t>e&&(i=this._endSlot(t,r,n)),i&&!i.inRange&&i.slot.start>=t&&(i=null),null===o&&null===i)return[];if(null===o)do e+=M.date.MS_PER_DAY,o=this._startSlot(e,r,n);while(!o.inRange&&e>=o.slot.end);if(null===i)do t-=M.date.MS_PER_DAY,i=this._endSlot(t,r,n);while(!i.inRange&&i.slot.start>=t);return this._continuousRange(k,r,o,i)},_continuousRange:function(e,t,n,i){var r,o,a,s,l,c,d=n.slot,u=i.slot,h=d.collectionIndex,p=u.collectionIndex,f=[];for(r=h;p>=r;r++)o=t[r],a=o.first(),s=o.last(),l=!1,c=!1,r==h&&(c=!n.inRange),r==p&&(l=!i.inRange),d.start>a.start&&(a=d),s.start>u.start&&(s=u),p>h&&(r==h?l=!0:r==p?c=!0:l=c=!0),f.push(new e({start:a,end:s,collection:o,head:l,tail:c}));return f},slotRanges:function(e,t){var n=e.startTime||M.date.toUtcTime(e.start),i=e.endTime||M.date.toUtcTime(e.end);return void 0===t&&(t=e.isMultiDay()),t?this.daySlotRanges(n,i,e.isAllDay):this.timeSlotRanges(n,i)},ranges:function(e,t,n,i){return"number"!=typeof e&&(e=M.date.toUtcTime(e)),"number"!=typeof t&&(t=M.date.toUtcTime(t)),n?this.daySlotRanges(e,t,i):this.timeSlotRanges(e,t)},_startCollection:function(e,t){var n,i;for(n=0;t.length>n;n++)if(i=t[n],i.startInRange(e))return i;return null},_endCollection:function(e,t,n){var i,r;for(i=0;t.length>i;i++)if(r=t[i],r.endInRange(e,n))return r;return null},_getCollections:function(e){return e?this._daySlotCollections:this._timeSlotCollections},continuousSlot:function(e,t){var n=t?-1:1,i=this._getCollections(e.isDaySlot),r=i[e.collectionIndex+n];return r?r[t?"last":"first"]():void 0},firstSlot:function(){var e=this._getCollections(this.daySlotCollectionCount());return e[0].first()},lastSlot:function(){var e=this._getCollections(this.daySlotCollectionCount());return e[e.length-1].last()},upSlot:function(e,t){var n=this,i=function(e,i,r){var o=0===r;return!t&&!e&&o&&n.daySlotCollectionCount()?n._daySlotCollections[0].at(i):void 0};return this.timeSlotCollectionCount()||(t=!0),this._verticalSlot(e,-1,i)},downSlot:function(e,t){var n=this,i=function(e,i,r){return!t&&e&&n.timeSlotCollectionCount()?n._timeSlotCollections[r].at(0):void 0};return this.timeSlotCollectionCount()||(t=!0),this._verticalSlot(e,1,i)},leftSlot:function(e){return this._horizontalSlot(e,-1)},rightSlot:function(e){return this._horizontalSlot(e,1)},_horizontalSlot:function(e,t){var n,i=e.index,r=e.isDaySlot,o=e.collectionIndex,a=this._getCollections(r);return r?i+=t:o+=t,n=a[o],n?n.at(i):void 0},_verticalSlot:function(e,t,n){var i,r=e.index,o=e.isDaySlot,a=e.collectionIndex,s=this._getCollections(o);return(e=n(o,a,r))?e:(o?a+=t:r+=t,i=s[a],i?i.at(r):void 0)},_collection:function(e,t){var n=t?this._daySlotCollections:this._timeSlotCollections;return n[e]},_startSlot:function(e,t,n){var i,r=this._startCollection(e,t),o=!0;return r||(r=t[0],o=!1),i=r.slotByStartDate(e,n),i||(i=r.first(),o=!1),{slot:i,inRange:o}},_endSlot:function(e,t,n){var i,r=this._endCollection(e,t,n),o=!0;return r||(r=t[t.length-1],o=!1),i=r.slotByEndDate(e,n),i||(i=r.last(),o=!1),{slot:i,inRange:o}},getSlotCollection:function(e,t){return this[t?"getDaySlotCollection":"getTimeSlotCollection"](e)},getTimeSlotCollection:function(e){return this._timeSlotCollections[e]},getDaySlotCollection:function(e){return this._daySlotCollections[e]}}),w=M.Class.extend({init:function(t){e.extend(this,t)},innerHeight:function(){var e,t=this.collection,n=this.start.index,i=this.end.index,r=0;for(e=n;i>=e;e++)r+=t.at(e).offsetHeight;return r},events:function(){return this.collection.events()},addEvent:function(e){this.events().push(e)},startSlot:function(){return this.start.offsetLeft>this.end.offsetLeft?this.end:this.start},endSlot:function(){return this.start.offsetLeft>this.end.offsetLeft?this.start:this.end}}),b=w.extend({innerHeight:function(){var e,t=this.collection,n=this.start.index,i=this.end.index,r=0;for(e=n;i>=e;e++)r+=t.at(e).offsetHeight;return r},outerRect:function(e,t,n){return this._rect("offset",e,t,n)},_rect:function(e,t,n,i){var r,o,a,s,l,c,d,u,h=this.start,p=this.end,f=M.support.isRtl(h.element);return"number"!=typeof t&&(t=M.date.toUtcTime(t)),"number"!=typeof n&&(n=M.date.toUtcTime(n)),i?(r=h.offsetTop,o=p.offsetTop+p[e+"Height"],f?(a=p.offsetLeft,s=h.offsetLeft+h[e+"Width"]):(a=h.offsetLeft,s=p.offsetLeft+p[e+"Width"])):(l=t-h.start,0>l&&(l=0),c=h.end-h.start,r=h.offsetTop+h[e+"Height"]*l/c,d=p.end-n,0>d&&(d=0),u=p.end-p.start,o=p.offsetTop+p[e+"Height"]-p[e+"Height"]*d/u,f?(a=Math.round(p.offsetLeft+p[e+"Width"]*d/u),s=Math.round(h.offsetLeft+h[e+"Width"]-h[e+"Width"]*l/c)):(a=Math.round(h.offsetLeft+h[e+"Width"]*l/c),s=Math.round(p.offsetLeft+p[e+"Width"]-p[e+"Width"]*d/u))),{top:r,bottom:o,left:0===a?a:a+1,right:s}},innerRect:function(e,t,n){return this._rect("client",e,t,n)}}),k=w.extend({innerWidth:function(){var e,t=this.collection,n=this.start.index,i=this.end.index,r=0,o=n!==i?"offsetWidth":"clientWidth";for(e=n;i>=e;e++)r+=t.at(e)[o];return r}}),x=M.Class.extend({init:function(e,t,n,i){this._slots=[],this._events=[],this._start=M.date.toUtcTime(e),this._end=M.date.toUtcTime(t),this._groupIndex=n,this._collectionIndex=i},refresh:function(){for(var e=0;this._slots.length>e;e++)this._slots[e].refresh()},startInRange:function(e){return e>=this._start&&this._end>e},endInRange:function(e,t){var n=t?this._end>e:this._end>=e;return e>=this._start&&n},slotByStartDate:function(e){var t,n,i=e;for("number"!=typeof i&&(i=M.date.toUtcTime(e)),t=0;this._slots.length>t;t++)if(n=this._slots[t],n.startInRange(i))return n;return null},slotByEndDate:function(e,t){var n,i,r=e;if("number"!=typeof r&&(r=M.date.toUtcTime(e)),t)return this.slotByStartDate(e,!1);for(n=0;this._slots.length>n;n++)if(i=this._slots[n],i.endInRange(r))return i;return null},count:function(){return this._slots.length},events:function(){return this._events},addTimeSlot:function(e,t,n,i){var r=new S(e,t,n,this._groupIndex,this._collectionIndex,this._slots.length,i);this._slots.push(r)},addDaySlot:function(e,t,n,i){var r=new T(e,t,n,this._groupIndex,this._collectionIndex,this._slots.length,i);this._slots.push(r)},first:function(){return this._slots[0]},last:function(){return this._slots[this._slots.length-1]},at:function(e){return this._slots[e]}}),C=M.Class.extend({init:function(e,t,n,i,r,o){this.element=e,this.clientWidth=e.clientWidth,this.clientHeight=e.clientHeight,this.offsetWidth=e.offsetWidth,this.offsetHeight=e.offsetHeight,this.offsetTop=e.offsetTop,this.offsetLeft=e.offsetLeft,this.start=t,this.end=n,this.element=e,this.groupIndex=i,this.collectionIndex=r,this.index=o,this.isDaySlot=!1},startDate:function(){return M.timezone.toLocalDate(this.start)},endDate:function(){return M.timezone.toLocalDate(this.end)},startInRange:function(e){return e>=this.start&&this.end>e},endInRange:function(e){return e>this.start&&this.end>=e},startOffset:function(){return this.start},endOffset:function(){return this.end}}),S=C.extend({init:function(e,t,n,i,r,o,a){C.fn.init.apply(this,arguments),this.isHorizontal=a?!0:!1},refresh:function(){var e=this.element;this.clientWidth=e.clientWidth,this.clientHeight=e.clientHeight,this.offsetWidth=e.offsetWidth,this.offsetHeight=e.offsetHeight,this.offsetTop=e.offsetTop,this.offsetLeft=e.offsetLeft},offsetX:function(e,t){return e?this.offsetLeft+t:this.offsetLeft+t},startInRange:function(e){return e>=this.start&&this.end>e},endInRange:function(e){return e>this.start&&this.end>=e},startOffset:function(t,n,i){var r,o,a,s,l;if(i)return this.start;if(r=e(this.element).offset(),o=this.end-this.start,this.isHorizontal){if(l=M.support.isRtl(this.element),a=t-r.left,s=Math.floor(o*(a/this.offsetWidth)),l)return this.start+o-s}else a=n-r.top,s=Math.floor(o*(a/this.offsetHeight));return this.start+s},endOffset:function(t,n,i){var r,o,a,s,l;if(i)return this.end;if(r=e(this.element).offset(),o=this.end-this.start,this.isHorizontal){if(l=M.support.isRtl(this.element),a=t-r.left,s=Math.floor(o*(a/this.offsetWidth)),l)return this.start+o-s}else a=n-r.top,s=Math.floor(o*(a/this.offsetHeight));return this.start+s}}),T=C.extend({init:function(e,t,n,i,r,o,a){C.fn.init.apply(this,arguments),this.eventCount=a,this.isDaySlot=!0,this.element.children.length?(this.firstChildHeight=this.element.children[0].offsetHeight+3,this.firstChildTop=this.element.children[0].offsetTop):(this.firstChildHeight=3,this.firstChildTop=0)},refresh:function(){this.clientHeight=this.element.clientHeight,this.offsetTop=this.element.offsetTop},startDate:function(){var e=new Date(this.start);return M.timezone.apply(e,"Etc/UTC")},endDate:function(){var e=new Date(this.end);return M.timezone.apply(e,"Etc/UTC")},startInRange:function(e){return e>=this.start&&this.end>e},endInRange:function(e){return e>this.start&&this.end>=e}}),M.ui.SchedulerView=I.extend({init:function(t,n){I.fn.init.call(this,t,n),this._scrollbar=c(),this._isRtl=M.support.isRtl(t),this._resizeHint=e(),this._moveHint=e(),this._cellId=M.guid(),this._resourcesForGroups(),this._selectedSlots=[]},_isMobile:function(){var e=this.options;return e.mobile===!0&&M.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile},_isMobilePhoneView:function(){var e=this.options;return e.mobile===!0&&M.support.mobileOS&&!M.support.mobileOS.tablet||"phone"===e.mobile},_addResourceView:function(){var e=new y(this.groups.length);return this.groups.push(e),e},dateForTitle:function(){return M.format(this.options.selectedDateFormat,this.startDate(),this.endDate())},_changeGroup:function(e,t){var n=t?"prevGroupSlot":"nextGroupSlot",i=this[n](e.start,e.groupIndex,e.isAllDay);return i&&(e.groupIndex+=t?-1:1),i},_changeGroupContinuously:function(){return null},_changeViewPeriod:function(){return!1},_horizontalSlots:function(e,t,n,i){var r,o,a=i?"leftSlot":"rightSlot",s=t[0].start,l=t[t.length-1].end,c=this.groups[e.groupIndex];return n||(r=this._normalizeHorizontalSelection(e,t,i),r&&(s=l=r)),s=c[a](s),l=c[a](l),n||this._isVerticallyGrouped()||s&&l||(s=l=this._changeGroup(e,i)),s&&l||(o=this._continuousSlot(e,t,i),o=this._changeGroupContinuously(e,o,n,i),o&&(s=l=o)),{startSlot:s,endSlot:l}},_verticalSlots:function(e,t,n,i){var r,o,a=t[0].start,s=t[t.length-1].end,l=this.groups[e.groupIndex];return n||(r=this._normalizeVerticalSelection(e,t,i),r&&(a=s=r)),o=i?"upSlot":"downSlot",a=l[o](a,n),s=l[o](s,n),n||!this._isVerticallyGrouped()||a&&s||(a=s=this._changeGroup(e,i)),{startSlot:a,endSlot:s}},_normalizeHorizontalSelection:function(){return null},_normalizeVerticalSelection:function(e,t,n){var i;return i=n?t[0].start:t[t.length-1].end},_continuousSlot:function(){return null},constrainSelection:function(e){var t,n=this.groups[0];this.inRange(e)?n.daySlotCollectionCount()||(e.isAllDay=!1):(t=n.firstSlot(),e.isAllDay=t.isDaySlot,e.start=t.startDate(),e.end=t.endDate()),this.groups[e.groupIndex]||(e.groupIndex=0)},move:function(e,t,n){var i,r,o,a,s,l,c=!1,d=this.groups[e.groupIndex];if(d.timeSlotCollectionCount()||(e.isAllDay=!0),i=d.ranges(e.start,e.end,e.isAllDay,!1),t===z.DOWN||t===z.UP){if(c=!0,a=t===z.UP,this._updateDirection(e,i,n,a,!0),s=this._verticalSlots(e,i,n,a),!s.startSlot&&!n&&this._changeViewPeriod(e,a,!0))return c}else if((t===z.LEFT||t===z.RIGHT)&&(c=!0,a=t===z.LEFT,this._updateDirection(e,i,n,a,!1),s=this._horizontalSlots(e,i,n,a),!s.startSlot&&!n&&this._changeViewPeriod(e,a,!1)))return c;return c&&(r=s.startSlot,o=s.endSlot,n?(l=e.backward,l&&r?e.start=r.startDate():!l&&o&&(e.end=o.endDate())):r&&o&&(e.isAllDay=r.isDaySlot,e.start=r.startDate(),e.end=o.endDate()),e.events=[]),c},moveToEventInGroup:function(t,n,i,r){for(var o,a,s=t._continuousEvents||[],l=r?-1:1,c=s.length,d=r?c-1:0;c>d&&d>-1;){if(a=s[d],(!r&&a.start.startDate()>=n.startDate()||r&&a.start.startDate()<=n.startDate())&&(i.length&&(a=s[d+l]),a&&-1===e.inArray(a.uid,i))){o=!!a;break}d+=l}return a},moveToEvent:function(e,t){for(var n,i=e.groupIndex,r=this.groups[i],o=r.ranges(e.start,e.end,e.isAllDay,!1)[0].start,a=this.groups.length,s=t?-1:1,l=e.events;a>i&&i>-1&&(n=this.moveToEventInGroup(r,o,l,t),i+=s,r=this.groups[i],r&&!n);)l=[],o=t?r.lastSlot():r.firstSlot(!0);return n&&(e.events=[n.uid],e.start=n.start.startDate(),e.end=n.end.endDate(),e.isAllDay=n.start.isDaySlot,e.groupIndex=n.start.groupIndex),!!n},current:function(e){return void 0===e?this._current:(this._current=e,void this._scrollTo(e,this.content[0]))},select:function(e){this.clearSelection(),this._selectEvents(e)||this._selectSlots(e)},_selectSlots:function(e){var t,n,i,r,o,a,s,l=e.isAllDay,c=this.groups[e.groupIndex];for(c.timeSlotCollectionCount()||(l=!0),this._selectedSlots=[],t=c.ranges(e.start,e.end,l,!1),r=0;t.length>r;r++)for(o=t[r],a=o.collection,s=o.start.index;o.end.index>=s;s++)i=a.at(s),n=i.element,n.setAttribute("aria-selected",!0),_(n),this._selectedSlots.push({start:i.startDate(),end:i.endDate(),element:n});e.backward&&(n=t[0].start.element),this.current(n)},_selectEvents:function(t){var n,i,r=!1,o=t.events,a=this.groups[t.groupIndex]._continuousEvents||[],s=a.length;if(!o[0]||!a[0])return r;for(i=e(),t.events=[],n=0;s>n;n++)e.inArray(a[n].uid,o)>-1&&(i=i.add(a[n].element),t.events.push(a[n].uid));return i[0]&&(i.addClass("k-state-selected").attr("aria-selected",!0),this.current(i.last()[0]),this._selectedSlots=[],r=!0),r},inRange:function(e){var t=this.startDate(),n=M.date.addDays(this.endDate(),1),i=e.start,r=e.end;return i>=t&&n>i&&r>t&&n>=r},_resourceValue:function(e,t){return e.valuePrimitive&&(t=M.getter(e.dataValueField)(t)),t},_resourceBySlot:function(e){var t,n,i,r,o,a=this.groupedResources,s={};if(a.length)for(t=e.groupIndex,n=a.length-1;n>=0;n--)i=a[n],r=this._resourceValue(i,i.dataSource.view()[t%i.dataSource.total()]),i.multiple&&(r=[r]),o=M.setter(i.field),o(s,r),t=Math.floor(t/i.dataSource.total());return s},_createResizeHint:function(t,n,i,r){return e(B).css({left:t,top:n,width:i,height:r})},_removeResizeHint:function(){this._resizeHint.remove(),this._resizeHint=e()},_removeMoveHint:function(){this._moveHint.remove(),this._moveHint=e()},_scrollTo:function(e,t){var n=e.offsetTop,i=e.offsetHeight,r=t.scrollTop,o=t.clientHeight,a=n+i,s=0;s=r>n?n:a>r+o?o>=i?a-o:n:r,t.scrollTop=s},_shouldInverseResourceColor:function(e){var t=new A(e.color).isDark(),n=this.element.css("color"),i=new A(n).isDark();return t==i},_eventTmpl:function(t,n){var i,r=this.options,o=e.extend({},M.Template,r.templateSettings),a=o.paramName,s="",l=typeof t,c={storage:{},count:0};return"function"===l?(c.storage["tmpl"+c.count]=t,s+="#=this.tmpl"+c.count+"("+a+")#",c.count++):"string"===l&&(s+=t),i=M.template(M.format(n,s),o),c.count>0&&(i=e.proxy(i,c.storage)),i},eventResources:function(e){var t,n,i,r,o,a,s,l,c,d,u=[],h=this.options;if(!h.resources)return u;for(t=0;h.resources.length>t;t++)if(n=h.resources[t],i=n.field,r=M.getter(i)(e))for(n.multiple||(r=[r]),o=n.dataSource.view(),a=0;r.length>a;a++){for(s=null,l=r[a],n.valuePrimitive||(l=M.getter(n.dataValueField)(l)),c=0;o.length>c;c++)if(o[c].get(n.dataValueField)==l){s=o[c];break}null!==s&&(d=M.getter(n.dataColorField)(s),u.push({field:n.field,title:n.title,name:n.name,text:M.getter(n.dataTextField)(s),value:l,color:d}))}return u},createLayout:function(i){var r,o,a,s,l,c=-1;for(i.rows||(i.rows=[]),r=0;i.rows.length>r;r++)if(i.rows[r].allDay){c=r;break}o=i.rows[c],c>=0&&i.rows.splice(c,1),a=this.columnLevels=t(i,"columns"),s=this.rowLevels=t(i,"rows"),this.table=e("<table "+n()+' class="k-scheduler-layout k-scheduler-'+this.name+'view"/>'),l=s[s.length-1].length,this.table.append(this._topSection(a,o,l)),this.table.append(this._bottomSection(a,s,l)),this.element.append(this.table),this._scroller()},refreshLayout:function(){var t,n,i,r,o,a,s=this,l=s.element.find(">.k-scheduler-toolbar"),c=s.element.innerHeight(),d=this._scrollbar,u=0,h=this._isRtl?"left":"right";for(t=0;l.length>t;t++)c-=l.eq(t).outerHeight();s.datesHeader&&(u=s.datesHeader.outerHeight()),s.timesHeader&&s.timesHeader.outerHeight()>u&&(u=s.timesHeader.outerHeight()),s.datesHeader&&s.timesHeader&&(n=s.datesHeader.find("table:first tr"),s.timesHeader.find("tr").height(function(t){e(this).height(n.eq(t).height())})),u&&(c-=u),s.footer&&(c-=s.footer.outerHeight()),i=function(e){var t,n;return e[0].style.height?!0:(t=e.height(),e.height("auto"),n=e.height(),t!=n?(e.height(""),!0):(e.height(""),!1))},r=s.content[0],o=M.support.kineticScrollNeeded?0:d,i(s.element)&&(s.content.height(c>2*d?c:2*d+1),s.times.height(r.clientHeight),a=s.times.find("table"),a.length&&a.height(s.content.find("table")[0].clientHeight)),r.offsetWidth-r.clientWidth>0?(s.table.addClass("k-scrollbar-v"),s.datesHeader.css("padding-"+h,o-parseInt(s.datesHeader.children().css("border-"+h+"-width"),10))):s.datesHeader.css("padding-"+h,""),r.offsetHeight-r.clientHeight>0||r.clientHeight>s.content.children(".k-scheduler-table").height()?s.table.addClass("k-scrollbar-h"):s.table.removeClass("k-scrollbar-h")},_topSection:function(t,n,i){this.timesHeader=o(t.length,n,i);var r=t[t.length-1].length;return this.datesHeader=a(t,r,n),e("<tr>").append(this.timesHeader.add(this.datesHeader).wrap("<td>").parent())
},_bottomSection:function(t,n,i){return this.times=s(n,i),this.content=l(t[t.length-1],n[n.length-1]),e("<tr>").append(this.times.add(this.content).wrap("<td>").parent())},_scroller:function(){var t,n=this;this.content.bind("scroll"+F,function(){n.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(this.scrollLeft),n.times.scrollTop(this.scrollTop)}),t=M.touchScroller(this.content,{avoidScrolling:function(t){return e(t.event.target).closest(".k-event.k-event-active").length>0}}),t&&t.movable&&(this._touchScroller=t,this.content=t.scrollElement,t.movable.bind("change",function(e){n.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(-e.sender.x),n.times.scrollTop(-e.sender.y)}))},_resourcesForGroups:function(){var e,t,n,i,r=[],o=this.options.group,a=this.options.resources;if(o=o&&o.resources?o.resources:[],a&&o.length)for(e=0,t=a.length;t>e;e++)for(n=0,i=o.length;i>n;n++)a[e].name===o[n]&&r.push(a[e]);this.groupedResources=r},_createColumnsLayout:function(e,t,n){return m("columns",e,t,n)},_groupOrientation:function(){var e=this.options.group;return e&&e.resources?e.orientation:"horizontal"},_isVerticallyGrouped:function(){return this.groupedResources.length&&"vertical"===this._groupOrientation()},_createRowsLayout:function(e,t,n){return m("rows",e,t,n)},selectionByElement:function(){return null},clearSelection:function(){this.content.find(".k-state-selected").removeAttr("id").attr("aria-selected",!1).removeClass("k-state-selected")},destroy:function(){var e=this;I.fn.destroy.call(this),e.table&&(M.destroy(e.table),e.table.remove()),e.groups=null,e.table=null,e.content=null,e.times=null,e.datesHeader=null,e.timesHeader=null,e.footer=null,e._resizeHint=null,e._moveHint=null},calendarInfo:function(){return M.getCulture().calendars.standard},prevGroupSlot:function(e,t,n){var i,r=this.groups[t],o=r.ranges(e,e,n,!1)[0].start;if(!(0>=t))return this._isVerticallyGrouped()?r.timeSlotCollectionCount()?(i=r._collection(n?o.index:o.collectionIndex,!1),i.last()):(i=r._collection(r.daySlotCollectionCount()-1,!0),i.at(o.index)):r.timeSlotCollectionCount()?(i=r._collection(n?0:r.timeSlotCollectionCount()-1,n),n?i.last():i.at(o.index)):(i=r._collection(o.collectionIndex,!0),i.last())},nextGroupSlot:function(e,t,n){var i,r,o=this.groups[t],a=o.ranges(e,e,n,!1)[0].start;if(!(t>=this.groups.length-1))return this._isVerticallyGrouped()?o.timeSlotCollectionCount()?(r=o.daySlotCollectionCount(),i=o._collection(r?0:a.collectionIndex,r),n?i.first():i.at(a.collectionIndex)):(i=o._collection(0,!0),i.at(a.index)):o.timeSlotCollectionCount()?(i=o._collection(0,n),n?i.first():i.at(a.index)):(i=o._collection(a.collectionIndex,!0),i.first())},_updateEventForMove:function(){},_updateEventForResize:function(){},_updateEventForSelection:function(e){return e}}),A=function(e){var t,n,i,r,o,a=this,s=A.formats;if(1===arguments.length)for(e=a.resolveColor(e),r=0;s.length>r;r++)t=s[r].re,n=s[r].process,i=t.exec(e),i&&(o=n(i),a.r=o[0],a.g=o[1],a.b=o[2]);else a.r=arguments[0],a.g=arguments[1],a.b=arguments[2];a.r=a.normalizeByte(a.r),a.g=a.normalizeByte(a.g),a.b=a.normalizeByte(a.b)},A.prototype={resolveColor:function(e){return e=e||"#000","#"==e.charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase(),e=A.namedColors[e]||e},normalizeByte:function(e){return 0>e||isNaN(e)?0:e>255?255:e},percBrightness:function(){var e=this;return R.sqrt(.241*e.r*e.r+.691*e.g*e.g+.068*e.b*e.b)},isDark:function(){var e=this,t=e.percBrightness();return 180>t}},A.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],A.namedColors={aqua:"00ffff",azure:"f0ffff",beige:"f5f5dc",black:"000000",blue:"0000ff",brown:"a52a2a",coral:"ff7f50",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgray:"a9a9a9",darkgreen:"006400",darkorange:"ff8c00",darkred:"8b0000",dimgray:"696969",fuchsia:"ff00ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lightblue:"add8e6",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumblue:"0000cd",navy:"000080",olive:"808000",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",pink:"ffc0cb",plum:"dda0dd",purple:"800080",red:"ff0000",royalblue:"4169e1",salmon:"fa8072",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",steelblue:"4682b4",tan:"d2b48c",teal:"008080",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},E=/\s*k-state-selected/,e.extend(P.SchedulerView,{createColumns:p,createRows:f,rangeIndex:u,collidingEvents:d,groupEqFilter:v})}(window.kendo.jQuery),function(e,t){function n(e){var t=new Date(1980,1,1,0,0,0);return c(t,m(e)),t}function i(e,t,n){return e>=t&&n>=e}function r(e,t,n,i){return i=i?n>=e:n>e,e>t&&i}function o(e,t,n,i){var r,o=e._continuousEvents,a=o[o.length-1],l=p(t.start.startDate()).getTime();if(i&&a&&p(a.start.startDate()).getTime()==l){for(r=o.length-1;r>-1&&!(o[r].isAllDay||p(o[r].start.startDate()).getTime()<l);r--);o.splice(r+1,0,{element:n,isAllDay:!0,uid:n.attr(s.attr("uid")),start:t.start,end:t.end})}else o.push({element:n,isAllDay:i,uid:n.attr(s.attr("uid")),start:t.start,end:t.end})}function a(e){var t=[],n=e.workWeekStart;for(t.push(n);e.workWeekEnd!=n;)n>6?n-=7:n++,t.push(n);return t}var s=window.kendo,l=s.ui,c=s.date.setTime,d=l.SchedulerView,u=e.extend,h=e.proxy,p=s.date.getDate,f=s.date.MS_PER_MINUTE,g=s.date.MS_PER_DAY,m=s.date.getMilliseconds,v=".kendoMultiDayView",_=s.template('<div title="(#=kendo.format("{0:t} - {1:t}", start, end)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),y=s.template('<div title="(#=kendo.format("{0:t}", start)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">${title}</div></div>'),w=s.template("<span class='k-link k-nav-day'>#=kendo.toString(date, 'ddd M/dd')#</span>"),b='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-e"></span>#}#</span>#if(resizable && !singleDay && !data.tail && !data.middle){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !singleDay && !data.head && !data.middle){#<span class="k-resize-handle k-resize-e"></span>#}#</div>',k='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#" #if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}#</span><span class="k-event-top-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-n"></span># } #</span><span class="k-event-bottom-actions"># if(data.head || data.middle) {#<span class="k-icon k-i-arrow-s"></span># } #</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-n"></span># } ## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-s"></span># } #</div>',x=d.extend({init:function(e,t){var n=this;d.fn.init.call(n,e,t),n.title=n.options.title||n.options.name,n._workDays=a(n.options),n._templates(),n._editable(),n.calculateDateRange(),n._groups(),n._currentTime()},_currentTimeMarkerUpdater:function(){var t,n,i,r,o,a,l,c,d,u,h=new Date,p=this.options;for(p.currentTimeMarker.useLocalTimezone===!1&&(t=p.dataSource.options.schema.timezone,p.dataSource&&t&&(n=s.timezone.offset(h,t),h=s.timezone.convert(h,h.getTimezoneOffset(),n))),this.times.find(".k-current-time").remove(),i=p.group&&"horizontal"!=p.group.orientation?this.groups.length:1,r=0;i>r;r++){if(o=this.groups[r],a=s.date.toUtcTime(h),l=o.timeSlotRanges(a,a+1),0===l.length)return;c=l[0].collection,d=c.slotByStartDate(h),d&&(u=e("<div class='k-current-time'></div>"),u.appendTo(this.times).css({top:Math.round(l[0].innerRect(h,new Date(h.getTime()+1),!1).top),height:"1px",right:"1px",left:0}))}},_currentTime:function(){var e,n=this,i=n.options.currentTimeMarker;i!==!1&&i.updateInterval!==t&&(e=i.updateInterval,n._currentTimeMarkerUpdater(),n._currentTimeUpdateTimer=setInterval(h(this._currentTimeMarkerUpdater,n),e))},_updateResizeHint:function(e,t,n,i){var r,o,a,l,c,u,h,p,f,g,m=e.isMultiDay(),v=this.groups[t],_=v.ranges(n,i,m,e.isAllDay);for(this._removeResizeHint(),r=0;_.length>r;r++)o=_[r],a=o.startSlot(),l=a.offsetWidth,c=a.clientHeight,u=a.offsetTop,m?l=o.innerWidth():(h=o.outerRect(n,i,this.options.snap),u=h.top,c=h.bottom-h.top),p=d.fn._createResizeHint.call(this,a.offsetLeft,u,l,c),this._resizeHint=this._resizeHint.add(p);f="t",g=this.content,m&&(f="M/dd",g=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div"),g.length||(g=this.content)),this._resizeHint.appendTo(g),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(s.toString(s.timezone.toLocalDate(n),f)),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(s.toString(s.timezone.toLocalDate(i),f))},_updateMoveHint:function(e,t,n){var i,r,o,a,l,c,d,u=e.isMultiDay(),h=this.groups[t],p=s.date.toUtcTime(e.start)+n,f=p+e.duration(),g=h.ranges(p,f,u,e.isAllDay);for(p=s.timezone.toLocalDate(p),f=s.timezone.toLocalDate(f),this._removeMoveHint(),!u&&(0===m(f)||m(f)<m(this.startTime()))&&g.length>1&&g.pop(),i=0;g.length>i;i++)r=g[i],o=r.start,a=this._createEventElement(e.clone({start:p,end:f}),!u),a.addClass("k-event-drag-hint"),l={left:o.offsetLeft+2,top:o.offsetTop},this._isRtl&&(l.left=.1*o.clientWidth+o.offsetLeft+2),u?l.width=r.innerWidth()-4:(c=r.outerRect(p,f,this.options.snap),l.top=c.top,l.height=c.bottom-c.top,l.width=.9*o.clientWidth-4),a.css(l),this._moveHint=this._moveHint.add(a);d=this.content,u&&(d=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div"),d.length||(d=this.content)),this._moveHint.appendTo(d)},_slotByPosition:function(e,t){var n,i,r,o;for(this._isVerticallyGrouped()?(i=this.content.offset(),t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft):i=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day)").find(">div").offset(),i&&(e-=i.left,t-=i.top),e=Math.ceil(e),t=Math.ceil(t),o=0;this.groups.length>o;o++)if(r=this.groups[o],n=r.daySlotByPosition(e,t))return n;for(i&&(e+=i.left,t+=i.top),i=this.content.offset(),e-=i.left,t-=i.top,this._isVerticallyGrouped()||(t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft),e=Math.ceil(e),t=Math.ceil(t),o=0;this.groups.length>o;o++)if(r=this.groups[o],n=r.timeSlotByPosition(e,t))return n;return null},_groupCount:function(){var e=this.groupedResources;return e.length?"vertical"===this._groupOrientation()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length):1},_columnCountInResourceView:function(){var e=this.groupedResources;return!e.length||this._isVerticallyGrouped()?this._columnCountForLevel(0):this._columnOffsetForResource(e.length)},_timeSlotGroups:function(e,t){var n,i,r,o,a,s,l,c,d,u,h,p,f,g,v,_,y=this._timeSlotInterval(),w=this.content.find("tr:not(.k-scheduler-header-all-day)");for(w.attr("role","row"),n=w.length,this._isVerticallyGrouped()&&(n=Math.floor(n/e)),i=0;e>i;i++)for(r=0,this._isVerticallyGrouped()&&(r=i),o=r*n,s=0,this._isVerticallyGrouped()||(s=i);(r+1)*n>o;){for(l=w[o].children,c=this.groups[i],o%n===0&&(a=m(new Date(+this.startTime()))),d=s*t;(s+1)*t>d;d++)u=l[d],h=d%t,p=c.getTimeSlotCollection(h),f=this._dates[h],g=Date.UTC(f.getFullYear(),f.getMonth(),f.getDate()),v=g+a,_=v+y,u.setAttribute("role","gridcell"),u.setAttribute("aria-selected",!1),p.addTimeSlot(u,v,_);a+=y,o++}},_daySlotGroups:function(e,t){var n,i,r,o,a,l,c,d,u,h,p,f;for(n=this.element.find(this._isVerticallyGrouped()?".k-scheduler-header-all-day":".k-scheduler-header-all-day tr"),n.attr("role","row"),i=0;e>i;i++)for(r=0,this._isVerticallyGrouped()&&(r=i),o=this.groups[i],a=o.getDaySlotCollection(0),l=n[r].children,c=0,this._isVerticallyGrouped()||(c=i),d=0,u=c*t;(c+1)*t>u;u++)h=l[u],u%t===0&&(d=0),p=this._dates[d],f=Date.UTC(p.getFullYear(),p.getMonth(),p.getDate()),d++,h.setAttribute("role","gridcell"),h.setAttribute("aria-selected",!1),a.addDaySlot(h,f,f+s.date.MS_PER_DAY)},_groups:function(){var e,t,n,i=this._groupCount(),r=this._columnCountInResourceView();for(this.groups=[],e=0;i>e;e++){for(t=this._addResourceView(e),n=0;r>n;n++)t.addTimeSlotCollection(this._dates[n],s.date.addDays(this._dates[n],1));this.options.allDaySlot&&t.addDaySlotCollection(this._dates[0],s.date.addDays(this._dates[this._dates.length-1],1))}this._timeSlotGroups(i,r),this.options.allDaySlot&&this._daySlotGroups(i,r)},options:{name:"MultiDayView",selectedDateFormat:"{0:D}",allDaySlot:!0,showWorkHours:!1,title:"",startTime:s.date.today(),endTime:s.date.today(),minorTickCount:2,majorTick:60,majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",minorTimeHeaderTemplate:"&nbsp;",groupHeaderTemplate:"#=text#",slotTemplate:"&nbsp;",allDaySlotTemplate:"&nbsp;",eventTemplate:_,allDayEventTemplate:y,dateHeaderTemplate:w,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,footer:{command:"workDay"},messages:{allDay:"all day",showFullDay:"Show full day",showWorkDay:"Show business hours"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=u({},s.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,k),this.allDayEventTemplate=this._eventTmpl(e.allDayEventTemplate,b),this.majorTimeHeaderTemplate=s.template(e.majorTimeHeaderTemplate,t),this.minorTimeHeaderTemplate=s.template(e.minorTimeHeaderTemplate,t),this.dateHeaderTemplate=s.template(e.dateHeaderTemplate,t),this.slotTemplate=s.template(e.slotTemplate,t),this.allDaySlotTemplate=s.template(e.allDaySlotTemplate,t),this.groupHeaderTemplate=s.template(e.groupHeaderTemplate,t)},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+v,".k-event a:has(.k-si-close)",function(n){t.trigger("remove",{uid:e(this).closest(".k-event").attr(s.attr("uid"))}),n.preventDefault()}),t.options.editable.create!==!1&&t.element.on("dblclick"+v,".k-scheduler-content td",function(n){var i,r;e(this).parent().hasClass("k-scheduler-header-all-day")||(i=t._slotByPosition(n.pageX,n.pageY),i&&(r=t._resourceBySlot(i),t.trigger("add",{eventInfo:u({start:i.startDate(),end:i.endDate()},r)})),n.preventDefault())}).on("dblclick"+v,".k-scheduler-header-all-day td",function(e){var n,i=t._slotByPosition(e.pageX,e.pageY);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:u({},{isAllDay:!0,start:s.date.getDate(i.startDate()),end:s.date.getDate(i.startDate())},n)})),e.preventDefault()}),t.options.editable.update!==!1&&t.element.on("dblclick"+v,".k-event",function(n){t.trigger("edit",{uid:e(this).closest(".k-event").attr(s.attr("uid"))}),n.preventDefault()})},_touchEditable:function(){var t=this;t.options.editable.create!==!1&&(t._addUserEvents=new s.UserEvents(t.element,{filter:".k-scheduler-content td",tap:function(n){var i,r;e(n.target).parent().hasClass("k-scheduler-header-all-day")||(i=t._slotByPosition(n.x.location,n.y.location),i&&(r=t._resourceBySlot(i),t.trigger("add",{eventInfo:u({start:i.startDate(),end:i.endDate()},r)})),n.preventDefault())}}),t._allDayUserEvents=new s.UserEvents(t.element,{filter:".k-scheduler-header-all-day td",tap:function(e){var n,i=t._slotByPosition(e.x.location,e.y.location);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:u({},{isAllDay:!0,start:s.date.getDate(i.startDate()),end:s.date.getDate(i.startDate())},n)})),e.preventDefault()}})),t.options.editable.update!==!1&&(t._editUserEvents=new s.UserEvents(t.element,{filter:".k-event",tap:function(n){var i=e(n.target).closest(".k-event");i.hasClass("k-event-active")||t.trigger("edit",{uid:i.attr(s.attr("uid"))}),n.preventDefault()}}))},_layout:function(e){var t,n,i,r=[],o=[],a=this.options,l=this;for(t=0;e.length>t;t++)n={},n.text=l.dateHeaderTemplate({date:e[t]}),s.date.isToday(e[t])&&(n.className="k-today"),r.push(n);return i=this.groupedResources,a.allDaySlot&&o.push({text:a.messages.allDay,allDay:!0,cellContent:function(t){var n=t;return t=i.length&&"vertical"!==l._groupOrientation()?t%e.length:t,l.allDaySlotTemplate({date:e[t],resources:function(){return l._resourceBySlot({groupIndex:n})}})}}),this._forTimeRange(this.startTime(),this.endTime(),function(e,t,n,i){var r=t?l.majorTimeHeaderTemplate:l.minorTimeHeaderTemplate,a={text:r({date:e}),className:i?"k-slot-cell":""};o.push(a)}),i.length&&("vertical"===this._groupOrientation()?o=this._createRowsLayout(i,o,this.groupHeaderTemplate):r=this._createColumnsLayout(i,r,this.groupHeaderTemplate)),{columns:r,rows:o}},_footer:function(){var t,n,i,r=this.options;r.footer!==!1&&(t='<div class="k-header k-scheduler-footer">',n=r.footer.command,n&&"workDay"===n?(t+='<ul class="k-reset k-header">',t+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>',t+=(r.showWorkHours?r.messages.showFullDay:r.messages.showWorkDay)+"</a></li>",t+="</ul>"):t+="&nbsp;",t+="</div>",this.footer=e(t).appendTo(this.element),i=this,this.footer.on("click"+v,".k-scheduler-fullday",function(e){e.preventDefault(),i.trigger("navigate",{view:i.name||r.name,date:i.startDate(),isWorkDay:!r.showWorkHours})}))},_forTimeRange:function(e,t,i,r){var o,a,s,l,d,u,h,p,v,_,y,w,b,k,x,C;for(e=n(e),t=n(t),o=this,a=m(e),s=m(t),l=o.options.minorTickCount,d=o.options.majorTick*f,u=d/l||1,h=new Date(+e),p=h.getDate(),_=0,w="",y=g/u,a!=s&&(a>s&&(s+=g),y=(s-a)/u),y=Math.round(y);y>_;_++)b=_%(d/u),k=0===b,x=l-1>b,C=b===l-1,w+=i(h,k,x,C),c(h,u,!1);return s&&(v=m(h),p<h.getDate()&&(v+=g),v>s&&(h=new Date(+t))),r&&(w+=r(h)),w},_content:function(e){var t,n,i,r=this,o=r.options,a=r.startTime(),l=this.endTime(),c=1,d=1,u=e.length,h="",p=this.groupedResources,f=this.slotTemplate,g=this.allDaySlotTemplate,m=!1;for(p.length&&(m="vertical"===r._groupOrientation(),m?(d=this._rowCountForLevel(this.rowLevels.length-2),o.allDaySlot&&(t=function(t){var n,i,o='<tr class="k-scheduler-header-all-day">',a=function(){return r._resourceBySlot({groupIndex:t})};for(n=0,i=e.length;i>n;n++)o+="<td>"+g({date:e[n],resources:a})+"</td>";return o+"</tr>"})):c=this._columnCountForLevel(this.columnLevels.length-2)),h+="<tbody>",n=function(t,n){var o,a,l,d,h="",p="",g=0;for(h="<tr"+(n?' class="k-middle-row"':"")+">",d=function(e){return function(){return r._resourceBySlot({groupIndex:e})}};c>g;g++)for(o=0,a=u;a>o;o++)p="",s.date.isToday(e[o])&&(p+="k-today"),(s.date.getMilliseconds(t)<s.date.getMilliseconds(r.options.workDayStart)||s.date.getMilliseconds(t)>=s.date.getMilliseconds(r.options.workDayEnd)||!r._isWorkDay(e[o]))&&(p+=" k-nonwork-hour"),h+="<td"+(""!==p?' class="'+p+'"':"")+">",l=s.date.getDate(e[o]),s.date.setTime(l,s.date.getMilliseconds(t)),h+=f({date:l,resources:d(m?i:g)}),h+="</td>";return h+="</tr>"},i=0;d>i;i++)h+=t?t(i):"",h+=this._forTimeRange(a,l,n);h+="</tbody>",this.content.find("table").append(h)},_isWorkDay:function(e){var t,n=e.getDay(),i=this._workDays;for(t=0;i.length>t;t++)if(i[t]===n)return!0;return!1},_render:function(t){var n,i=this;t=t||[],this._dates=t,this._startDate=t[0],this._endDate=t[t.length-1||0],this.createLayout(this._layout(t)),this._content(t),this._footer(),this.refreshLayout(),n=this.element.find(".k-scheduler-header-all-day td"),n.length&&(this._allDayHeaderHeight=n.first()[0].clientHeight),i.datesHeader.on("click"+v,".k-nav-day",function(t){var n=e(t.currentTarget).closest("th"),r=n.offset(),o=i._slotByPosition(r.left,r.top+n.outerHeight());i.trigger("navigate",{view:"day",date:o.startDate()})})},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_end:function(e){var t=m(this.endTime())||g;return e&&(t=0),new Date(this._endDate.getTime()+t)},nextDate:function(){return s.date.nextDay(this.endDate())},previousDate:function(){return s.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},destroy:function(){var e=this;e._currentTimeUpdateTimer&&clearInterval(e._currentTimeUpdateTimer),e.datesHeader&&e.datesHeader.off(v),e.element&&e.element.off(v),e.footer&&e.footer.remove(),d.fn.destroy.call(this),this._isMobile()&&e.options.editable&&(e.options.editable.create!==!1&&(e._addUserEvents.destroy(),e._allDayUserEvents.destroy()),e.options.editable.update!==!1&&e._editUserEvents.destroy())},inRange:function(e){var t=d.fn.inRange.call(this,e),n=m(this.startTime()),i=m(this.endTime())||s.date.MS_PER_DAY,r=m(e.start),o=m(e.end)||s.date.MS_PER_DAY;return t&&r>=n&&i>=o},selectionByElement:function(e){var t=e.offset();return this._slotByPosition(t.left,t.top)},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*f},_timeSlotIndex:function(e){var t=this.options,n=m(e),i=m(this.startTime()),r=t.majorTick/t.minorTickCount*f;return(n-i)/r},_slotIndex:function(e,t){return t?this._dateSlotIndex(e):this._timeSlotIndex(e)},_dateSlotIndex:function(e,t){var n,r,o,a,l=this._dates||[],c=1;for(n=0,r=l.length;r>n;n++)if(o=s.date.getDate(l[n]),a=new Date(s.date.getDate(l[n]).getTime()+g-(t?0:1)),i(e,o,a))return n*c;return-1},_positionAllDayEvent:function(t,n){var i,r,o,a,s,l,c,u=n.innerWidth(),h=n.start.index,p=n.end.index,f=d.collidingEvents(n.events(),h,p),g=this._headerColumnCount||0,m=2,v=h!==p?5:4,_=this._allDayHeaderHeight,y=n.startSlot();for(t.css({left:y.offsetLeft+m,width:u-v}),n.addEvent({slotIndex:h,start:h,end:p,element:t}),f.push({slotIndex:h,start:h,end:p,element:t}),i=d.createRows(f),i.length&&i.length>g&&(this._headerColumnCount=i.length),r=n.start.offsetTop,o=0,a=i.length;a>o;o++)for(s=i[o].events,l=0,c=s.length;c>l;l++)e(s[l].element).css({top:r+o*_})},_arrangeColumns:function(e,t,n,i){var r,o,a,s,l,c,u,h,p,f,g,m=i.start;for(e={element:e,slotIndex:m.index,start:t,end:t+n},o=m.clientWidth,a=.1*o,l=i.events(),c=d.collidingEvents(l,e.start,e.end),i.addEvent(e),c.push(e),r=d.createColumns(c),u=(o-a)/r.length,h=0,p=r.length;p>h;h++)for(s=r[h].events,f=0,g=s.length;g>f;f++)s[f].element[0].style.width=u-4+"px",s[f].element[0].style.left=(this._isRtl?a:0)+m.offsetLeft+h*u+2+"px"},_positionEvent:function(e,t,n){var i=e.startTime||e.start,r=e.endTime||e.end,o=n.innerRect(i,r,!1),a=o.bottom-o.top-2;0>a&&(a=0),t.css({top:o.top,height:a}),this._arrangeColumns(t,o.top,t[0].clientHeight,n)},_createEventElement:function(t,n,r,o){var a,l,c,d,h,f,v=n?this.eventTemplate:this.allDayEventTemplate,_=this.options,y=_.editable,w=this._isMobile(),b=y&&y.destroy!==!1&&!w,k=y&&y.resize!==!1,x=p(this.startDate()),C=p(this.endDate()),S=m(this.startTime()),T=m(this.endTime()),D=t._time("start"),A=t._time("end");return S>=T&&(T=m(new Date(this.endTime().getTime()+g-1))),n||t.isAllDay||(C=new Date(C.getTime()+g)),l=t.start,c=t.end,t.isAllDay&&(c=p(t.end)),!i(p(l),x,C)&&!i(c,x,C)||n&&S>D&&A>T?a=!0:p(l)<x||n&&S>D?o=!0:(c>C&&!n||n&&A>T)&&(r=!0),d=this.eventResources(t),t.startTime&&(l=new Date(D),l=s.timezone.apply(l,"Etc/UTC")),t.endTime&&(c=new Date(A),c=s.timezone.apply(c,"Etc/UTC")),h=u({},{ns:s.ns,resizable:k,showDelete:b,middle:a,head:r,tail:o,singleDay:1==this._dates.length,resources:d,inverseColor:d&&d[0]?this._shouldInverseResourceColor(d[0]):!1},t,{start:l,end:c}),f=e(v(h)),this.angular("compile",function(){return{elements:f,data:[{dataItem:h}]}}),f},_isInTimeSlot:function(e){var t,n=this.startTime(),i=this.endTime(),o=e.startTime||e.start,a=e.endTime||e.end;return m(i)===m(s.date.getDate(i))&&(i=s.date.getDate(i),c(i,g-1)),e._date("end")>e._date("start")&&(a=+e._date("end")+(g-1)),a-=e._date("end"),o-=e._date("start"),i=m(i),n=m(n),n===o&&o===a?!0:(t=o!==i,r(o,n,i,t)||r(a,n,i,t)||r(n,o,a)||r(i,o,a))},_isInDateSlot:function(e){var t=this.groups[0],n=t.firstSlot().start,r=t.lastSlot().end-1,o=s.date.toUtcTime(e.start),a=s.date.toUtcTime(e.end);return(i(o,n,r)||i(a,n,r)||i(n,o,a)||i(r,o,a))&&(!i(a,n,n)||i(a,o,o)||e.isAllDay)},_updateAllDayHeaderHeight:function(e){var t,n;if(this._height!==e&&(this._height=e,t=this.element.find(".k-scheduler-header-all-day td"),t.length))for(t.parent().add(this.element.find(".k-scheduler-times-all-day").parent()).height(e),n=0;this.groups.length>n;n++)this.groups[n].refresh()},_renderEvents:function(e,t){var n,i,r,a,s,l,c,d,u,h,p,f,m,v,_,y=this.datesHeader.find(".k-scheduler-header-wrap > div");for(i=0,r=e.length;r>i;i++)if(n=e[i],this._isInDateSlot(n))if(a=n.isAllDay||n.end.getTime()-n.start.getTime()>=g,s=a&&!this._isVerticallyGrouped()?y:this.content,a)this.options.allDaySlot&&(d=this.groups[t],d._continuousEvents||(d._continuousEvents=[]),c=d.slotRanges(n),c.length&&(l=this._createEventElement(n,!a),this._positionAllDayEvent(l,c[0]),o(d,c[0],l,!0),l.appendTo(s)));else if(this._isInTimeSlot(n))for(d=this.groups[t],d._continuousEvents||(d._continuousEvents=[]),c=d.slotRanges(n),u=c.length,h=0;u>h;h++)p=c[h],f=n.start,m=n.end,u>1&&(0===h?m=p.end.endDate():h==u-1?f=p.start.startDate():(f=p.start.startDate(),m=p.end.endDate())),v=n.clone({start:f,end:m,startTime:n.startTime,endTime:n.endTime}),this._isInTimeSlot(v)&&(_=p.head,l=this._createEventElement(n,!a,_,p.tail),l.appendTo(s),this._positionEvent(v,l,p),o(d,p,l,!1))},render:function(t){var n,r,o,a,l;for(this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),t=new s.data.Query(t).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray(),n=[],this._eventsByResource(t,this.groupedResources,n),r=this,o=e.map(this._dates,function(t){return Math.max.apply(null,e.map(n,function(n){return e.grep(n,function(e){return e.isMultiDay()&&i(t,p(e.start),p(e.end))}).length}))}),a=Math.max.apply(null,o),this._updateAllDayHeaderHeight((a+1)*this._allDayHeaderHeight),l=0;n.length>l;l++)this._renderEvents(n[l],l);this.refreshLayout(),this.trigger("activate")},_eventsByResource:function(e,t,n){var i,r,o,a,l=t[0];if(l)for(i=l.dataSource.view(),r=0;i.length>r;r++)o=this._resourceValue(l,i[r]),a=new s.data.Query(e).filter({field:l.field,operator:d.groupEqFilter(o)}).toArray(),t.length>1?this._eventsByResource(a,t.slice(1),n):n.push(a);else n.push(e)},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},clearSelection:function(){this.content.add(this.datesHeader).find(".k-state-selected").removeAttr("id").attr("aria-selected",!1).removeClass("k-state-selected")},_updateDirection:function(e,t,n,i,r){var o=e.isAllDay,a=t[0].start,s=t[t.length-1].end;n&&(r?o||a.index!==s.index||a.collectionIndex!==s.collectionIndex||(e.backward=i):(o&&a.index===s.index||!o&&a.collectionIndex===s.collectionIndex)&&(e.backward=i))},_changeViewPeriod:function(e,n,i){var r,o,a,s;return i?t:(r=n?this.previousDate():this.nextDate(),o=e.start,a=e.end,e.start=new Date(r),e.end=new Date(r),s=e.isAllDay?g:m(a),c(e.start,m(o)),c(e.end,s),this._isVerticallyGrouped()||(e.groupIndex=n?this.groups.length-1:0),e.events=[],!0)}});u(!0,l,{MultiDayView:x,DayView:x.extend({options:{name:"DayView",title:"Day"},name:"day"}),WeekView:x.extend({options:{name:"WeekView",title:"Week",selectedDateFormat:"{0:D} - {1:D}"},name:"week",calculateDateRange:function(){var e,t,n=this.options.date,i=s.date.dayOfWeek(n,this.calendarInfo().firstDay,-1),r=[];for(e=0,t=7;t>e;e++)r.push(i),i=s.date.nextDay(i);this._render(r)}}),WorkWeekView:x.extend({options:{name:"WorkWeekView",title:"Work Week",selectedDateFormat:"{0:D} - {1:D}"},name:"workWeek",nextDate:function(){return s.date.dayOfWeek(s.date.nextDay(this.endDate()),this.options.workWeekStart,1)},previousDate:function(){return s.date.previousDay(this.startDate())},calculateDateRange:function(){for(var e=this.options.date,t=s.date.dayOfWeek(e,this.options.workWeekStart,-1),n=s.date.dayOfWeek(t,this.options.workWeekEnd,1),i=[];n>=t;)i.push(t),t=s.date.nextDay(t);this._render(i)}})})}(window.kendo.jQuery),function(e){function t(e){var t,n,i=0;for(t=0,n=e.length;n>t;t++)i+=e[t].items.length;return i}function n(e,t){return e.valuePrimitive&&(t=o.getter(e.dataValueField)(t)),t}function i(e){for(var t,n=0,i=e.length,o=[];i>n;n++)t=e[n],t.groups?(t=r(t.groups),o=o.concat(t)):o=o.concat(r(t.items));return o}function r(e){for(var t=[].concat(e),n=t.shift(),i=[],r=[].push;n;)n.groups?r.apply(t,n.groups):n.items?r.apply(t,n.items):r.call(i,n),n=t.shift();return i}var o=window.kendo,a=o.ui,s=".kendoAgendaView",l='<div class="k-task" title="#:title.replace(/"/g,"\'")#" data-#=kendo.ns#uid="#=uid#"># if (resources[0]) {#<span class="k-scheduler-mark" style="background-color:#=resources[0].color#"></span># } ## if (data.isException()) { #<span class="k-icon k-i-exception"></span># } else if (data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #{0}#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}#</div>';a.AgendaView=a.SchedulerView.extend({init:function(t,n){a.SchedulerView.fn.init.call(this,t,n),n=this.options,n.editable&&(n.editable=e.extend({"delete":!0},n.editable,{create:!1,update:!1})),this.title=n.title,this.name="agenda",this._eventTemplate=this._eventTmpl(n.eventTemplate,l),this._dateTemplate=o.template(n.eventDateTemplate),this._groupTemplate=o.template(n.eventGroupTemplate),this._timeTemplate=o.template(n.eventTimeTemplate),this.element.on("mouseenter"+s,".k-scheduler-agenda .k-scheduler-content tr","_mouseenter").on("mouseleave"+s,".k-scheduler-agenda .k-scheduler-content tr","_mouseleave").on("click"+s,".k-scheduler-agenda .k-scheduler-content .k-link:has(.k-si-close)","_remove"),this._renderLayout(n.date)},_mouseenter:function(t){e(t.currentTarget).addClass("k-state-hover")},_mouseleave:function(t){e(t.currentTarget).removeClass("k-state-hover")},_remove:function(t){t.preventDefault(),this.trigger("remove",{uid:e(t.currentTarget).closest(".k-task").attr(o.attr("uid"))})},nextDate:function(){return o.date.nextDay(this.startDate())},startDate:function(){return this._startDate},endDate:function(){return this._endDate},previousDate:function(){return o.date.previousDay(this.startDate())},_renderLayout:function(e){this._startDate=e,this._endDate=o.date.addDays(e,7),this.createLayout(this._layout()),this.table.addClass("k-scheduler-agenda")
},_layout:function(){var e,t,n,i=[{text:this.options.messages.time,className:"k-scheduler-timecolumn"},{text:this.options.messages.event}];if(this._isMobilePhoneView()||i.splice(0,0,{text:this.options.messages.date,className:"k-scheduler-datecolumn"}),e=this.groupedResources,e.length){for(t=[],n=0;e.length>n;n++)t.push({text:"",className:"k-scheduler-groupcolumn"});i=t.concat(i)}return{columns:i}},_tasks:function(e){var t,n,i,r,a,s,l,c=[];for(t=0;e.length>t;t++)if(n=e[t],i=n.start,r=n.end,a=(o.date.getDate(r)-o.date.getDate(i))/o.date.MS_PER_DAY+1,s=n.clone(),s.startDate=o.date.getDate(i),s.startDate>=this.startDate()&&c.push(s),a>1)for(s.end=o.date.nextDay(i),s.head=!0,l=1;a>l;l++)i=s.end,s=n.clone(),s.start=i,s.startDate=o.date.getDate(i),s.end=o.date.nextDay(i),l==a-1?(s.end=new Date(s.start.getFullYear(),s.start.getMonth(),s.start.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),s.tail=!0):(s.isAllDay=!0,s.middle=!0),s.end<=this.endDate()&&s.start>=this.startDate()&&c.push(s);return new o.data.Query(c).sort([{field:"start",dir:"asc"},{field:"end",dir:"asc"}]).groupBy({field:"startDate"}).toArray()},_renderTaskGroups:function(e,t){var n,i,r,a,s,l,c,d,u,h=[],p=this.options.editable,f=p&&p.destroy!==!1&&!this._isMobile(),g=this._isMobilePhoneView();for(n=0;e.length>n;n++)for(i=e[n].value,r=e[n].items,a=o.date.isToday(i),s=0;r.length>s;s++){if(l=r[s],c=[],d=g?[]:c,0===n&&0===s&&t.length)for(u=0;t.length>u;u++)d.push(o.format('<td class="k-scheduler-groupcolumn{2}" rowspan="{0}">{1}</td>',t[u].rowSpan,this._groupTemplate({value:t[u].text}),t[u].className));0===s&&(g?(d.push(o.format('<td class="k-scheduler-datecolumn" colspan="2">{0}</td>',this._dateTemplate({date:i}))),h.push('<tr role="row" aria-selected="false"'+(a?' class="k-today">':">")+d.join("")+"</tr>")):c.push(o.format('<td class="k-scheduler-datecolumn{3}{2}" rowspan="{0}">{1}</td>',r.length,this._dateTemplate({date:i}),n!=e.length-1||t.length?"":" k-last",t.length?"":" k-first"))),l.format=l.head?"{0:t}":l.tail?"{1:t}":"{0:t}-{1:t}",l.resources=this.eventResources(l),c.push(o.format('<td class="k-scheduler-timecolumn"><div>{0}{1}{2}</div></td><td>{3}</td>',l.tail||l.middle?'<span class="k-icon k-i-arrow-w"></span>':"",this._timeTemplate(l.clone({start:l.startTime||l.start,end:l.endTime||l.end})),l.head||l.middle?'<span class="k-icon k-i-arrow-e"></span>':"",this._eventTemplate(l.clone({showDelete:f})))),h.push('<tr role="row" aria-selected="false"'+(a?' class="k-today">':">")+c.join("")+"</tr>")}return h.join("")},render:function(e){var t,n,r=this.content.find("table").empty(),o=[];e.length>0&&(t=this.groupedResources,t.length?(o=this._createGroupConfiguration(e,t,null),this._renderGroups(o,r,[])):(o=this._tasks(e),r.append(this._renderTaskGroups(o,[])))),n=this._eventsList=i(o),this._angularItems(r,n),this.refreshLayout(),this.trigger("activate")},_angularItems:function(e,t){this.angular("compile",function(){var n=[],i=t.map(function(t){return n.push({dataItem:t}),e.find(".k-task["+o.attr("uid")+"="+t.uid+"]")});return{elements:i,data:n}})},_renderGroups:function(e,t,n){var i,r,o;for(i=0,r=e.length;r>i;i++)o=n.splice(0),o.push(e[i]),e[i].groups?this._renderGroups(e[i].groups,t,o):t.append(this._renderTaskGroups(e[i].items,o))},_createGroupConfiguration:function(e,i,r){var s,l,c,d,u,h,p,f=i[0],g=[],m=f.dataSource.view(),v=this._isMobilePhoneView();for(s=0;m.length>s;s++)l=n(f,m[s]),c=new o.data.Query(e).filter({field:f.field,operator:a.SchedulerView.groupEqFilter(l)}).toArray(),c.length&&(d=this._tasks(c),u=r?"":" k-first",s===m.length-1&&(!r||r.className.indexOf("k-last")>-1)&&(u+=" k-last"),h={text:o.getter(f.dataTextField)(m[s]),value:l,rowSpan:0,className:u},i.length>1?(h.groups=this._createGroupConfiguration(c,i.slice(1),h),r&&(r.rowSpan+=h.rowSpan)):(h.items=d,p=t(h.items),v&&(p+=h.items.length),h.rowSpan=p,r&&(r.rowSpan+=p)),g.push(h));return g},selectionByElement:function(t){var n,i,r;return t=e(t),t.hasClass("k-scheduler-datecolumn")?void 0:(this._isMobile()?(r=t.parent(),n=r.parent().children().filter(function(){return e(this).children(":not(.k-scheduler-datecolumn)").length}).index(r)):n=t.parent().index(),i=this._eventsList[n],{index:n,start:i.start,end:i.end,isAllDay:i.isAllDay,uid:i.uid})},select:function(e){this.clearSelection();var t=this.table.find(".k-task").eq(e.index).closest("tr").addClass("k-state-selected").attr("aria-selected",!0)[0];this.current(t)},move:function(e,t){var n,i=!1,r=e.index;return t==o.keys.UP?(r--,i=!0):t==o.keys.DOWN&&(r++,i=!0),i&&(n=this._eventsList[r],n&&(e.start=n.start,e.end=n.end,e.isAllDay=n.isAllDay,e.events=[n.uid],e.index=r)),i},moveToEvent:function(){return!1},constrainSelection:function(e){var t=this._eventsList[0];t&&(e.start=t.start,e.end=t.end,e.isAllDay=t.isAllDay,e.events=[t.uid],e.index=0)},isInRange:function(){return!0},destroy:function(){this.element&&this.element.off(s),a.SchedulerView.fn.destroy.call(this)},options:{title:"Agenda",name:"agenda",editable:!0,selectedDateFormat:"{0:D}-{1:D}",eventTemplate:"#:title#",eventTimeTemplate:"#if(data.isAllDay) {##=this.options.messages.allDay##} else { ##=kendo.format(format, start, end)## } #",eventDateTemplate:'<strong class="k-scheduler-agendaday">#=kendo.toString(date, "dd")#</strong><em class="k-scheduler-agendaweek">#=kendo.toString(date,"dddd")#</em><span class="k-scheduler-agendadate">#=kendo.toString(date, "y")#</span>',eventGroupTemplate:'<strong class="k-scheduler-adgendagroup">#=value#</strong>',messages:{event:"Event",date:"Date",time:"Time",allDay:"all day"}}})}(window.kendo.jQuery),function(e){function t(e,t){return e.slice(t).concat(e.slice(0,t))}function n(e,t){for(var n=t.firstDay,i=new Date(e.getFullYear(),e.getMonth(),0,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());i.getDay()!=n;)r.date.setTime(i,-1*d);return i}function i(e,t,n){var i,r=t,o=n;return i=e,i>=r&&o>=i}var r=window.kendo,o=r.ui,a=o.SchedulerView,s=".kendoMonthView",l=e.extend,c=r.date.getDate,d=r.date.MS_PER_DAY,u=6,h=7,p=r.template('<span class="k-link k-nav-day">#:kendo.toString(date, "dd")#</span>'),f='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span>#}#</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-e"></span>#}#</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-w"></span>#}## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-e"></span>#}#</div>',g=r.template('<div title="#=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">#:title#</div></div>'),m=r.template('<div style="width:#=width#px;left:#=left#px;top:#=top#px" class="k-more-events k-button"><span>...</span></div>');o.MonthView=a.extend({init:function(e,t){var n=this;a.fn.init.call(n,e,t),n.title=n.options.title,n.name="month",n._templates(),n._editable(),n._renderLayout(n.options.date),n._groups()},_updateDirection:function(e,t,n,i,r){var o,a,s,l,c;n&&(o=t[0].start,a=t[t.length-1].end,s=o.index===a.index,l=o.collectionIndex===a.collectionIndex,c=r?s&&l||l:s&&l,c&&(e.backward=i))},_changeViewPeriod:function(e,t,n){var i=n?7:1;return t&&(i*=-1),e.start=r.date.addDays(e.start,i),e.end=r.date.addDays(e.end,i),(!n||n&&this._isVerticallyGrouped())&&(e.groupIndex=t?this.groups.length-1:0),e.events=[],!0},_continuousSlot:function(e,t,n){var i=e.backward?0:t.length-1,r=this.groups[e.groupIndex];return r.continuousSlot(t[i].start,n)},_changeGroupContinuously:function(e,t,n,i){var r,o,a,s;return n||(r=e.groupIndex,o=this.groups.length-1,a=this._isVerticallyGrouped(),s=this.groups[r],!t&&a?(t=s[i?"lastSlot":"firstSlot"](),r+=i?-1:1):t&&!a&&(r=i?o:0),(0>r||r>o)&&(r=i?o:0,t=null),e.groupIndex=r),t},_normalizeHorizontalSelection:function(e,t,n){var i;return i=n?t[0].start:t[t.length-1].end},_normalizeVerticalSelection:function(e,t){var n;return n=e.backward?t[0].start:t[t.length-1].end},_templates:function(){var e=this.options,t=l({},r.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,f),this.dayTemplate=r.template(e.dayTemplate,t),this.groupHeaderTemplate=r.template(e.groupHeaderTemplate,t)},dateForTitle:function(){return r.format(this.options.selectedDateFormat,this._firstDayOfMonth,this._lastDayOfMonth)},nextDate:function(){return r.date.nextDay(this._lastDayOfMonth)},previousDate:function(){return r.date.previousDay(this._firstDayOfMonth)},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_renderLayout:function(t){var i=this;this._firstDayOfMonth=r.date.firstDayOfMonth(t),this._lastDayOfMonth=r.date.lastDayOfMonth(t),this._startDate=n(t,this.calendarInfo()),this.createLayout(this._layout()),this._content(),this.refreshLayout(),this.content.on("click"+s,".k-nav-day,.k-more-events",function(t){var n=e(t.currentTarget).offset(),r=i._slotByPosition(n.left,n.top);t.preventDefault(),i.trigger("navigate",{view:"day",date:r.startDate()})})},_editable:function(){this.options.editable&&!this._isMobilePhoneView()&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+s,".k-scheduler-monthview .k-event a:has(.k-si-close)",function(n){t.trigger("remove",{uid:e(this).closest(".k-event").attr(r.attr("uid"))}),n.preventDefault()}),t.options.editable.create!==!1&&t.element.on("dblclick"+s,".k-scheduler-monthview .k-scheduler-content td",function(n){var i,r=e(n.currentTarget).offset(),o=t._slotByPosition(r.left,r.top);o&&(i=t._resourceBySlot(o),t.trigger("add",{eventInfo:l({isAllDay:!0,start:o.startDate(),end:o.startDate()},i)})),n.preventDefault()}),t.options.editable.update!==!1&&t.element.on("dblclick"+s,".k-scheduler-monthview .k-event",function(n){t.trigger("edit",{uid:e(this).closest(".k-event").attr(r.attr("uid"))}),n.preventDefault()})},_touchEditable:function(){var t=this;t.options.editable.create!==!1&&(t._addUserEvents=new r.UserEvents(t.element,{filter:".k-scheduler-monthview .k-scheduler-content td",tap:function(n){var i,r=e(n.target).offset(),o=t._slotByPosition(r.left,r.top);o&&(i=t._resourceBySlot(o),t.trigger("add",{eventInfo:l({isAllDay:!0,start:o.startDate(),end:o.startDate()},i)})),n.preventDefault()}})),t.options.editable.update!==!1&&(t._editUserEvents=new r.UserEvents(t.element,{filter:".k-scheduler-monthview .k-event",tap:function(n){0===e(n.event.target).closest("a:has(.k-si-close)").length&&(t.trigger("edit",{uid:e(n.target).closest(".k-event").attr(r.attr("uid"))}),n.preventDefault())}}))},selectionByElement:function(t){var n=e(t).offset();return this._slotByPosition(n.left,n.top)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},_content:function(){var e,t="<tbody>",n=1,i=this.groupedResources;for(i.length&&this._isVerticallyGrouped()&&(n=this._rowCountForLevel(i.length-1)),e=0;n>e;e++)t+=this._createCalendar(e);t+="</tbody>",this.content.find("table").html(t)},_createCalendar:function(e){var t,n,i,o,a=this.startDate(),s=h*u,l=h,c=[a],d="",p=1,f=this._isVerticallyGrouped(),g=this.groupedResources;for(g.length&&(f||(p=this._columnCountForLevel(g.length-1))),this._slotIndices={},t=0,n=s/l;n>t;t++){for(d+="<tr>",c.push(a),i=t*l,o=0;p>o;o++)d+=this._createRow(a,i,l,f?e:o);a=r.date.addDays(a,l),d+="</tr>"}return this._weekStartDates=c,this._endDate=r.date.previousDay(a),d},_createRow:function(e,t,n,i){var o,a=this,s=a._firstDayOfMonth,l=a._lastDayOfMonth,d=a.dayTemplate,u="",h="",p=function(){return a._resourceBySlot({groupIndex:i})};for(o=0;n>o;o++)u="",r.date.isToday(e)&&(u+="k-today"),r.date.isInDateRange(e,s,l)||(u+=" k-other-month"),h+="<td ",""!==u&&(h+='class="'+u+'"'),h+=">",h+=d({date:e,resources:p}),h+="</td>",a._slotIndices[c(e).getTime()]=t+o,e=r.date.nextDay(e);return h},_layout:function(){var n,i,r,o=this.calendarInfo(),a=this._isMobile()?o.days.namesShort:o.days.names,s=t(a,o.firstDay),l=e.map(s,function(e){return{text:e}}),c=this.groupedResources;if(c.length)if(this._isVerticallyGrouped()){for(i=[],r=0;6>r;r++)i.push({text:"<div>&nbsp;</div>",className:"k-hidden k-slot-cell"});n=this._createRowsLayout(c,i,this.groupHeaderTemplate)}else l=this._createColumnsLayout(c,l,this.groupHeaderTemplate);return{columns:l,rows:n}},_createEventElement:function(t){var n,i=this.options,o=i.editable,a=this._isMobile();return t.showDelete=o&&o.destroy!==!1&&!a,t.resizable=o&&o.resize!==!1&&!a,t.ns=r.ns,t.resources=this.eventResources(t),t.inverseColor=t.resources&&t.resources[0]?this._shouldInverseResourceColor(t.resources[0]):!1,n=e(this.eventTemplate(t)),this.angular("compile",function(){return{elements:n,data:[{dataItem:t}]}}),n},_isInDateSlot:function(e){var t=this.groups[0],n=t.firstSlot().start,o=t.lastSlot().end-1,a=r.date.toUtcTime(e.start),s=r.date.toUtcTime(e.end);return(i(a,n,o)||i(s,n,o)||i(n,a,s)||i(o,a,s))&&(!i(s,n,n)||i(s,a,a)||e.isAllDay)},_slotIndex:function(e){return this._slotIndices[c(e).getTime()]},_positionMobileEvent:function(t,n,i){var o,s,l,c,d,u,h,p=t.start;t.start.offsetLeft>t.end.offsetLeft&&(p=t.end),o=t.start.index,s=o,l=3,c=a.collidingEvents(t.events(),o,s),c.push({element:n,start:o,end:s}),d=a.createRows(c),u=t.collection.at(o),h=u.container,h||(h=e(r.format('<div class="k-events-container" style="top:{0};left:{1};width:{2}"/>',p.offsetTop+p.firstChildTop+p.firstChildHeight-3+"px",p.offsetLeft+"px",p.offsetWidth+"px")),u.container=h,this.content[0].appendChild(h[0])),l>=d.length&&(t.addEvent({element:n,start:o,end:s,groupIndex:p.groupIndex}),i._continuousEvents.push({element:n,uid:n.attr(r.attr("uid")),start:t.start,end:t.end}),h[0].appendChild(n[0]))},_positionEvent:function(t,n,i){var o,s,l,c,d,u,h,p,f,g,v,_,y,w,b,k=this.options.eventHeight,x=t.start;for(t.start.offsetLeft>t.end.offsetLeft&&(x=t.end),o=t.start.index,s=t.end.index,l=x.eventCount,c=a.collidingEvents(t.events(),o,s),d=o!==s?5:4,c.push({element:n,start:o,end:s}),u=a.createRows(c),h=0,p=Math.min(u.length,l);p>h;h++)for(f=u[h].events,g=x.offsetTop+x.firstChildHeight+h*k+3*h+"px",v=0,_=f.length;_>v;v++)f[v].element[0].style.top=g;if(u.length>l)for(y=o;s>=y;y++){if(w=t.collection,b=w.at(y),b.more)return;b.more=e(m({ns:r.ns,start:y,end:y,width:b.clientWidth-2,left:b.offsetLeft+2,top:b.offsetTop+b.firstChildHeight+l*k+3*l})),this.content[0].appendChild(b.more[0])}else t.addEvent({element:n,start:o,end:s,groupIndex:x.groupIndex}),n[0].style.width=t.innerWidth()-d+"px",n[0].style.left=x.offsetLeft+2+"px",n[0].style.height=k+"px",i._continuousEvents.push({element:n,uid:n.attr(r.attr("uid")),start:t.start,end:t.end}),this.content[0].appendChild(n[0])},_slotByPosition:function(e,t){var n,i,r=this.content.offset();for(e-=r.left,t-=r.top,t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft,e=Math.ceil(e),t=Math.ceil(t),n=0;this.groups.length>n;n++)if(i=this.groups[n].daySlotByPosition(e,t))return i;return null},_createResizeHint:function(e){var t=e.startSlot().offsetLeft,n=e.start.offsetTop,i=e.innerWidth(),r=e.start.clientHeight-2,o=a.fn._createResizeHint.call(this,t,n,i,r);o.appendTo(this.content),this._resizeHint=this._resizeHint.add(o)},_updateResizeHint:function(e,t,n,i){var o,a,s;for(this._removeResizeHint(),o=this.groups[t],a=o.ranges(n,i,!0,e.isAllDay),s=0;a.length>s;s++)this._createResizeHint(a[s]);this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(r.toString(r.timezone.toLocalDate(n),"M/dd")),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(r.toString(r.timezone.toLocalDate(i),"M/dd"))},_updateMoveHint:function(e,t,n){var i,o,a,s,l,c=r.date.toUtcTime(e.start)+n,d=c+e.duration(),u=this.groups[t],h=u.ranges(c,d,!0,e.isAllDay);for(this._removeMoveHint(),i=0;h.length>i;i++)o=h[i],a=o.startSlot(),s=o.endSlot(),l=this._createEventElement(e.clone({head:o.head,tail:o.tail})),l.css({left:a.offsetLeft+2,top:a.offsetTop+a.firstChildHeight,height:this.options.eventHeight,width:o.innerWidth()-(a.index!==s.index?5:4)}),l.addClass("k-event-drag-hint"),l.appendTo(this.content),this._moveHint=this._moveHint.add(l)},_groups:function(){var e,t,n,i,o,a,s,l,c,d,p,f,g,m,v,_,y,w=this._groupCount(),b=h,k=u;for(this.groups=[],e=0;w>e;e++)this._addResourceView(e);for(t=this.content[0].getElementsByTagName("tr"),n=0;w>n;n++)for(i=0,o=0,this._isVerticallyGrouped()&&(o=n),a=o*k;(o+1)*k>a;a++)for(s=this.groups[n],l=s.addDaySlotCollection(r.date.addDays(this.startDate(),i),r.date.addDays(this.startDate(),i+b)),c=t[a],d=c.children,p=0,c.setAttribute("role","row"),this._isVerticallyGrouped()||(p=n),f=p*b;(p+1)*b>f;f++)g=d[f],m=g.clientHeight,v=g.children.length?g.children[0].offsetHeight+3:0,_=r.date.toUtcTime(r.date.addDays(this.startDate(),i)),i++,y=Math.floor((m-v-this.options.moreButtonHeight)/(this.options.eventHeight+3)),g.setAttribute("role","gridcell"),g.setAttribute("aria-selected",!1),l.addDaySlot(g,_,_+r.date.MS_PER_DAY,y)},render:function(e){this.content.children(".k-event,.k-more-events,.k-events-container").remove(),this._groups(),e=new r.data.Query(e).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var t=this.groupedResources;t.length?this._renderGroups(e,t,0,1):this._renderEvents(e,0),this.refreshLayout(),this.trigger("activate")},_renderEvents:function(e,t){var n,i,r,o,a,s,l,c,d,u,h,p=this._isMobilePhoneView();for(i=0,r=e.length;r>i;i++)if(n=e[i],this._isInDateSlot(n))for(o=this.groups[t],o._continuousEvents||(o._continuousEvents=[]),a=o.slotRanges(n,!0),s=a.length,l=0;s>l;l++)c=a[l],d=n.start,u=n.end,s>1&&(0===l?u=c.end.endDate():l==s-1?d=c.start.startDate():(d=c.start.startDate(),u=c.end.endDate())),h=n.clone({start:d,end:u,head:c.head,tail:c.tail}),p?this._positionMobileEvent(c,this._createEventElement(h),o):this._positionEvent(c,this._createEventElement(h),o)},_renderGroups:function(e,t,n,i){var o,s,l,c,d=t[0];if(d)for(o=d.dataSource.view(),s=0;o.length>s;s++)l=this._resourceValue(d,o[s]),c=new r.data.Query(e).filter({field:d.field,operator:a.groupEqFilter(l)}).toArray(),t.length>1?n=this._renderGroups(c,t.slice(1),n++,i+1):this._renderEvents(c,n++);return n},_groupCount:function(){var e=this.groupedResources;return e.length?this._isVerticallyGrouped()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length):1},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},destroy:function(){this.table&&this.table.removeClass("k-scheduler-monthview"),this.content&&this.content.off(s),this.element&&this.element.off(s),a.fn.destroy.call(this),this._isMobile()&&!this._isMobilePhoneView()&&this.options.editable&&(this.options.editable.create!==!1&&this._addUserEvents.destroy(),this.options.editable.update!==!1&&this._editUserEvents.destroy())},events:["remove","add","edit","navigate"],options:{title:"Month",name:"month",eventHeight:25,moreButtonHeight:13,editable:!0,selectedDateFormat:"{0:y}",groupHeaderTemplate:"#=text#",dayTemplate:p,eventTemplate:g}})}(window.kendo.jQuery),function(e,t){function n(e,t){var n;return 0!==e&&t>e?n=t-e:(n=e%t,n&&(n=t-n)),n}function i(e){var t=e.getMonth(),n=m(e)?et[t]:tt[t];return n+e.getDate()}function r(e,n){var i,r;return e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),X(e,0),i=e.getFullYear(),n!==t?(Q(e,n,-1),e.setDate(e.getDate()+4)):e.setDate(e.getDate()+(4-(e.getDay()||7))),X(e,0),r=Math.floor((e.getTime()-new Date(i,0,1,-6))/864e5),1+Math.floor(r/7)}function o(e,t){var n=J(e).getDay(),i=7-(n+7-(t||7))||7;return 0>i&&(i+=7),Math.ceil((e.getDate()-i)/7)+1}function a(e,t){return e+(t>e?7:0)}function s(e,t,n){var i,r,s,l,c,d=t.offset;return d?(i=new Date(e.getFullYear(),e.getMonth()+1,0),r=o(i,n),s=a(t.day,n),l=s<a(new Date(e.getFullYear(),e.getMonth(),1).getDay(),n),c=s>a(i.getDay(),n),0>d?d=r+(d+1-(c?1:0)):l&&(d+=1),r-=c?1:0,(l?1:0)>d||d>r?null:d):o(e,n)}function l(e,t){return o(new Date(e.getFullYear(),e.getMonth()+1,0),t)}function c(e,t,n){return o(e,n)===s(e,t,n)}function d(e,t,n){for(var i,r,l,c,d=a(t.getDay(),n),u=e.length,h=[],p=0;u>p;p++)if(r=e[p],c=o(t,n),i=s(t,r,n),null!==i)if(i>c)h.push(r);else if(c===i)if(l=a(r.day,n),l>d)h.push(r);else if(d===l)return null;return h}function u(e,t,n){for(var i,r=0,o=e.length,a=[];o>r;r++){if(i=e[r],n&&(i=n(i)),t===i)return null;i>t&&a.push(i)}return a}function h(e,t){for(var n,i=0,r=e.length;r>i;i++){if(n=parseInt(e[i],10),isNaN(n)||t.start>n||n>t.end||0===n&&0>t.start)return null;e[i]=n}return e.sort(v)}function p(e){for(var n,i,r,o=0,a=e.length;a>o;o++){if(n=e[o],i=n.length,r=n.substring(i-2).toUpperCase(),r=rt[r],r===t)return null;e[o]={offset:parseInt(n.substring(0,i-2),10)||0,day:r}}return e}function f(e){for(var t,n,i=0,r=e.length,o=[];r>i;i++)t=e[i],"string"==typeof t?n=t:(n=""+it[t.day],t.offset&&(n=t.offset+n)),o.push(n);return""+o}function g(e){var t=e.getMonth();return 1===t?1===new Date(e.getFullYear(),1,29).getMonth()?29:28:nt[t]}function m(e){return e=e.getFullYear(),e%4===0&&e%100!==0||e%400===0}function v(e,t){return e-t}function _(e,t){var n,i,r=0,o=[];if(e)for(e=e.split(";"),n=e.length;n>r;r++)i=S(e[r],t),i&&o.push(i);return o}function y(t,n,i){for(var r=e.isArray(t)?t:_(t,i),o=n.getTime()-n.getMilliseconds(),a=0,s=r.length;s>a;a++)if(r[a].getTime()===o)return!0;return!1}function w(e,t){var n,i,r=0,o=[].concat(e);for(n=o.length;n>r;r++)i=o[r],i=U.timezone.convert(i,t||i.getTimezoneOffset(),"Etc/UTC"),o[r]=U.toString(i,lt);return o.join(";")+";"}function b(e,t){var n=new Date(e);switch(t.freq){case"yearly":n.setFullYear(n.getFullYear(),0,1);break;case"monthly":n.setFullYear(n.getFullYear(),n.getMonth(),1);break;case"weekly":Q(n,t.weekStart,-1)}return t.hours&&n.setHours(0),t.minutes&&n.setMinutes(0),t.seconds&&n.setSeconds(0),n}function k(e,t){var n=new Date(e);switch(t.freq){case"yearly":n.setFullYear(n.getFullYear(),11,31);break;case"monthly":n.setFullYear(n.getFullYear(),n.getMonth()+1,0);break;case"weekly":Q(n,t.weekStart,-1),n.setDate(n.getDate()+6)}return t.hours&&n.setHours(23),t.minutes&&n.setMinutes(59),t.seconds&&n.setSeconds(59),n}function x(e,t,n){var i,r,o,a,s=e.slice(n._startIdx),l=s.length,c=n.positions,d=[];for(o=0,a=c.length;a>o;o++)i=c[o],0>i?i=l+i:i-=1,r=s[i],r&&r.start>=t&&d.push(r);return e=e.slice(0,n._startIdx).concat(d),n._startIdx=e.length,e}function C(e,n,i,r){var o,a,s,l,c,d,u,h,p,f,g,m,v,C,S,T,A,E,M,P,I,z,F=D(e.recurrenceRule,r),R=[];if(!F)return[e];for(P=F.positions,I=P?0:1,f=F.start,g=F.end,(f||g)&&(e=e.clone({start:f?new Date(f.value[0]):t,end:g?new Date(g.value[0]):t})),A=e.start,T=A.getTime(),S=Z(A),C=_(e.recurrenceException,r),!C[0]&&F.exdates&&(C=F.exdates.value,e.set("recurrenceException",w(C,r))),h=n=new Date(n),i=new Date(i),v=F.freq,M=mt[v],E=F.count,F.until&&i>F.until&&(i=new Date(F.until)),m="yearly"===v||"monthly"===v||"weekly"===v,T>n||E||F.interval>1||m?n=new Date(T):(l=n.getHours(),c=n.getMinutes(),d=n.getSeconds(),F.hours||(l=A.getHours()),F.minutes||(c=A.getMinutes()),F.seconds||(d=A.getSeconds()),n.setHours(l,c,d,A.getMilliseconds())),F._startPeriod=new Date(n),P&&(n=b(n,F),i=k(i,F),z=Z(i)-Z(n),0>z&&(l=n.getHours(),i.setHours(l,n.getMinutes(),n.getSeconds(),n.getMilliseconds()),Y.adjustDST(i,l)),F._startPeriod=new Date(n),F._endPeriod=k(n,F),F._startIdx=0),u=e.duration(),F._startTime=o=Y.toInvariantTime(n),M.setup&&M.setup(F,A,n),M.limit(n,i,F);i>=n;)if(s=new Date(n),K(s,u),p=n>=h||s>h,(p&&!y(C,n,r)||P)&&(o=Y.toUtcTime(Y.getDate(n))+Z(F._startTime),a=o+u,T!==n.getTime()||S!==Z(F._startTime)?R.push(e.toOccurrence({start:new Date(n),end:s,startTime:o,endTime:a})):(e.startTime=o,e.endTime=a,R.push(e))),P){if(M.next(n,F),M.limit(n,i,F),n>F._endPeriod&&(R=x(R,A,F),F._endPeriod=k(n,F),I=R.length),E&&E===I)break}else{if(E&&E===I)break;I++,M.next(n,F),M.limit(n,i,F)}return R}function S(e,t){return e=U.parseDate(e,ot),e&&t&&(e=W.convert(e,e.getTimezoneOffset(),t)),e}function T(e,n){var i,r,o,a,s,l,c,d,u=e.split(";");for(c=0,d=u.length;d>c;c++)if(i=u[c].split(":"),r=i[0],o=i[1],-1!==r.indexOf("TZID")&&(a=r.substring(r.indexOf("TZID")).split("=")[1]),o)for(o=o.split(","),s=0,l=o.length;l>s;s++)o[s]=S(o[s],a||n);return o?{value:o,tzid:a}:t}function D(n,i){var r,o,a,s,l,c,d,u,f,g={},m=0,v=!1,_=function(e,t){var n=e.day,i=t.day;return u>n&&(n+=7),u>i&&(i+=7),n-i};if(!n)return null;for(c=n.split("\n"),c[1]||-1===n.indexOf("DTSTART")&&-1===n.indexOf("DTEND")&&-1===n.indexOf("EXDATE")||(c=n.split(" ")),m=0,a=c.length;a>m;m++)l=c[m],-1!==l.indexOf("DTSTART")?g.start=T(l,i):-1!==l.indexOf("DTEND")?g.end=T(l,i):-1!==l.indexOf("EXDATE")?g.exdates=T(l,i):s=-1!==l.indexOf("RRULE")?l.substring(6):l;for(s=s.split(";"),m=0,a=s.length;a>m;m++)switch(d=s[m],r=d.split("="),o=e.trim(r[1]).split(","),e.trim(r[0]).toUpperCase()){case"FREQ":g.freq=o[0].toLowerCase();break;case"UNTIL":g.until=S(o[0],i);break;case"COUNT":g.count=parseInt(o[0],10);break;case"INTERVAL":g.interval=parseInt(o[0],10);break;case"BYSECOND":g.seconds=h(o,{start:0,end:60}),v=!0;break;case"BYMINUTE":g.minutes=h(o,{start:0,end:59}),v=!0;break;case"BYHOUR":g.hours=h(o,{start:0,end:23}),v=!0;break;case"BYMONTHDAY":g.monthDays=h(o,{start:-31,end:31}),v=!0;break;case"BYYEARDAY":g.yearDays=h(o,{start:-366,end:366}),v=!0;break;case"BYMONTH":g.months=h(o,{start:1,end:12}),v=!0;break;case"BYDAY":g.weekDays=f=p(o),v=!0;break;case"BYWEEKNO":g.weeks=h(o,{start:-53,end:53}),v=!0;break;case"BYSETPOS":g.positions=h(o,{start:-366,end:366});break;case"WKST":g.weekStart=u=rt[o[0]]}return g.freq===t||g.count!==t&&g.until?null:(g.interval||(g.interval=1),u===t&&(g.weekStart=u=U.culture().calendar.firstDay),f&&(g.weekDays=f.sort(_)),g.positions&&!v&&(g.positions=null),g._hasRuleValue=v,g)}function A(e,t){for(var n,i=e.value,r=e.tzid||"",o=i.length,a=0;o>a;a++)n=i[a],n=W.convert(n,r||t||n.getTimezoneOffset(),"Etc/UTC"),i[a]=U.toString(n,"yyyyMMddTHHmmssZ");return r&&(r=";TZID="+r),r+":"+i.join(",")+" "}function E(e,n){var i=e.weekStart,r="FREQ="+e.freq.toUpperCase(),o=e.exdates||"",a=e.start||"",s=e.end||"",l=e.until;return e.interval>1&&(r+=";INTERVAL="+e.interval),e.count&&(r+=";COUNT="+e.count),l&&(l=W.convert(l,n||l.getTimezoneOffset(),"Etc/UTC"),r+=";UNTIL="+U.toString(l,"yyyyMMddTHHmmssZ")),e.months&&(r+=";BYMONTH="+e.months),e.weeks&&(r+=";BYWEEKNO="+e.weeks),e.yearDays&&(r+=";BYYEARDAY="+e.yearDays),e.monthDays&&(r+=";BYMONTHDAY="+e.monthDays),e.weekDays&&(r+=";BYDAY="+f(e.weekDays)),e.hours&&(r+=";BYHOUR="+e.hours),e.minutes&&(r+=";BYMINUTE="+e.minutes),e.seconds&&(r+=";BYSECOND="+e.seconds),e.positions&&(r+=";BYSETPOS="+e.positions),i!==t&&(r+=";WKST="+it[i]),a&&(a="DTSTART"+A(a,n)),s&&(s="DTEND"+A(s,n)),o&&(o="EXDATE"+A(o,n)),(a||s||o)&&(r=a+s+o+"RRULE:"+r),r}var M,P,I,z,F,R,B,L,O,H,N,V,U=window.kendo,W=U.timezone,j=U.Class,G=U.ui,q=G.Widget,$=G.DropDownList,Y=U.date,K=Y.setTime,Q=Y.setDayOfWeek,X=Y.adjustDST,J=Y.firstDayOfMonth,Z=Y.getMilliseconds,et=[0,31,60,91,121,152,182,213,244,274,305,335,366],tt=[0,31,59,90,120,151,181,212,243,273,304,334,365],nt=[31,28,30,31,30,31,30,31,30,31,30,31],it={0:"SU",1:"MO",2:"TU",3:"WE",4:"TH",5:"FR",6:"SA"},rt={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},ot=["yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-ddTHH","yyyy-MM-dd","yyyyMMddTHHmmssfffzzz","yyyyMMddTHHmmsszzz","yyyyMMddTHHmmss","yyyyMMddTHHmm","yyyyMMddTHH","yyyyMMdd"],at=["months","weeks","yearDays","monthDays","weekDays","hours","minutes","seconds"],st=at.length,lt="yyyyMMddTHHmmssZ",ct={months:function(e,t,n){var i=n.months,r=u(i,e.getMonth()+1),o=!1;return null!==r&&(r.length?e.setMonth(r[0]-1,1):e.setFullYear(e.getFullYear()+1,i[0]-1,1),o=!0),o},monthDays:function(e,t,n){for(var i,r,o,a=!1,s=e.getHours(),l=function(e){return 0>e&&(e=i+e),e};t>=e;){if(r=e.getMonth(),i=g(e),o=u(n.monthDays,e.getDate(),l),null===o)return a;if(a=!0,o.length){if(e.setMonth(r,o.sort(v)[0]),X(e,s),r===e.getMonth())break}else e.setMonth(r+1,1)}return a},yearDays:function(e,t,n){for(var r,o,a=!1,s=e.getHours(),l=function(e){return 0>e&&(e=r+e),e};t>e;){if(r=m(e)?366:365,o=u(n.yearDays,i(e),l),null===o)return a;if(a=!0,r=e.getFullYear(),o.length){e.setFullYear(r,0,o.sort(v)[0]),X(e,s);break}e.setFullYear(r+1,0,1)}return a},weeks:function(e,t,n){for(var i,o,a,s=n.weekStart,l=!1,c=e.getHours(),d=function(e){return 0>e&&(e=53+e),e};t>e;){if(o=u(n.weeks,r(e,s),d),null===o)return l;if(l=!0,i=e.getFullYear(),o.length){a=7*o.sort(v)[0]-1,e.setFullYear(i,0,a),Q(e,s,-1),X(e,c);break}e.setFullYear(i+1,0,1)}return l},weekDays:function(e,t,n){var i,r,a=n.weekDays,s=n.weekStart,u=d(a,e,s),h=e.getHours();if(null===u)return!1;if(i=u[0],i||(i=a[0],Q(e,s)),r=i.day,i.offset)for(;t>=e&&!c(e,i,s);)o(e,s)===l(e,s)?(e.setMonth(e.getMonth()+1,1),X(e,h)):(e.setDate(e.getDate()+7),X(e,h),Q(e,s,-1));return e.getDay()!==r&&Q(e,r),!0},hours:function(e,t,n){var i=n.hours,r=n._startTime,o=r.getHours(),a=u(i,o),s=!1;return null!==a&&(s=!0,e.setHours(o),X(e,o),a.length?(a=a[0],e.setHours(a)):(a=e.getHours(),e.setDate(e.getDate()+1),X(e,a),a=i[0],e.setHours(a),X(e,a)),n.minutes&&e.setMinutes(0),r.setHours(a,e.getMinutes())),s},minutes:function(e,t,n){var i=n.minutes,r=e.getMinutes(),o=u(i,r),a=n._startTime.getHours(),s=!1;return null!==o&&(s=!0,o.length?o=o[0]:(a+=1,o=i[0]),n.seconds&&e.setSeconds(0),e.setHours(a,o),a%=24,X(e,a),n._startTime.setHours(a,o,e.getSeconds())),s},seconds:function(e,t,n){var i=n.seconds,r=n._startTime.getHours(),o=u(i,e.getSeconds()),a=e.getMinutes(),s=!1;return null!==o&&(s=!0,o.length?e.setSeconds(o[0]):(a+=1,e.setMinutes(a,i[0]),a>59&&(a%=60,r=(r+1)%24)),n._startTime.setHours(r,a,e.getSeconds())),s}},dt=j.extend({next:function(e,t){var n,i,r=t._startTime,o=r.getDate();if(t.seconds)i=e.getSeconds()+1,e.setSeconds(i),r.setSeconds(i),r.setDate(o);else{if(!t.minutes)return!1;n=e.getMinutes()+1,e.setMinutes(n),r.setMinutes(n),r.setDate(o)}return!0},normalize:function(e){var t=e.rule;4===e.idx&&t.hours&&(t._startTime.setHours(0),this._hour(e.date,t))},limit:function(e,n,i){for(var r,o,a,s,l,c=i.interval;n>=e;){for(a=o=t,l=e.getDate(),s=0;st>s;s++){if(r=at[s],i[r]){if(a=ct[r](e,n,i),o!==t&&a)break;o=a}a&&this.normalize({date:e,rule:i,day:l,idx:s})}if((1===c||!this.interval(i,e))&&s===st)break}},interval:function(e,t){var i,o,a=new Date(e._startPeriod),s=new Date(t),l=t.getHours(),c=e.weekStart,d=e.interval,u=e.freq,h=!1,p=0,f=0,g=1;return"hourly"===u?(i=s.getTimezoneOffset()-a.getTimezoneOffset(),o=e._startTime.getHours(),s=s.getTime(),l!==o&&(s+=(o-l)*Y.MS_PER_HOUR),s-=a,i&&(s-=i*Y.MS_PER_MINUTE),i=Math.floor(s/Y.MS_PER_HOUR),p=n(i,d),0!==p&&(this._hour(t,e,p),h=!0)):"daily"===u?(Y.setTime(s,-a),i=Math.floor(s/Y.MS_PER_DAY),p=n(i,d),0!==p&&(this._date(t,e,p),h=!0)):"weekly"===u?(i=52*(t.getFullYear()-a.getFullYear()),p=r(t,c)-r(a,c)+i,p=n(p,d),0!==p&&(Y.setDayOfWeek(t,e.weekStart,-1),t.setDate(t.getDate()+7*p),X(t,l),h=!0)):"monthly"===u?(i=t.getFullYear()-a.getFullYear(),i=t.getMonth()-a.getMonth()+12*i,p=n(i,d),0!==p&&(g=e._hasRuleValue?1:t.getDate(),t.setFullYear(t.getFullYear(),t.getMonth()+p,g),X(t,l),h=!0)):"yearly"===u&&(i=t.getFullYear()-a.getFullYear(),p=n(i,d),e.months||(f=t.getMonth()),e.yearDays||e.monthDays||e.weekDays||(g=t.getDate()),0!==p&&(t.setFullYear(t.getFullYear()+p,f,g),X(t,l),h=!0)),h},_hour:function(e,t,n){var i=t._startTime,r=i.getHours();n&&(r+=n),e.setHours(r),r%=24,i.setHours(r),X(e,r)},_date:function(e,t,n){var i=e.getHours();e.setDate(e.getDate()+n),X(e,i)||this._hour(e,t)}}),ut=dt.extend({next:function(e,t){dt.fn.next(e,t)||this._hour(e,t,1)
},normalize:function(e){var t=e.rule;4===e.idx&&(t._startTime.setHours(0),this._hour(e.date,t))}}),ht=dt.extend({next:function(e,t){dt.fn.next(e,t)||this[t.hours?"_hour":"_date"](e,t,1)}}),pt=ht.extend({setup:function(e,t){e.weekDays||(e.weekDays=[{day:t.getDay(),offset:0}])}}),ft=dt.extend({next:function(e,t){var n,i;if(!dt.fn.next(e,t))if(t.hours)this._hour(e,t,1);else if(t.monthDays||t.weekDays||t.yearDays||t.weeks)this._date(e,t,1);else{for(n=e.getDate(),i=e.getHours(),e.setMonth(e.getMonth()+1),X(e,i);e.getDate()!==n;)e.setDate(n),X(e,i);this._hour(e,t)}},normalize:function(e){var t=e.rule,n=e.date,i=n.getHours();0!==e.idx||t.monthDays||t.weekDays?dt.fn.normalize(e):(n.setDate(e.day),X(n,i))},setup:function(e,t,n){e.monthDays||e.weekDays||n.setDate(t.getDate())}}),gt=ft.extend({next:function(e,t){var n,i=e.getHours();if(!dt.fn.next(e,t))if(t.hours)this._hour(e,t,1);else if(t.monthDays||t.weekDays||t.yearDays||t.weeks)this._date(e,t,1);else if(t.months){for(n=e.getDate(),e.setMonth(e.getMonth()+1),X(e,i);e.getDate()!==n;)e.setDate(n),X(e,i);this._hour(e,t)}else e.setFullYear(e.getFullYear()+1),X(e,i),this._hour(e,t)},setup:function(){}}),mt={hourly:new ut,daily:new ht,weekly:new pt,monthly:new ft,yearly:new gt},vt="click";U.recurrence={rule:{parse:D,serialize:E},expand:C,dayInYear:i,weekInYear:r,weekInMonth:o,numberOfWeeks:l,isException:y,toExceptionString:w},M=function(e){for(var t=U.culture().calendar.days.namesShort,n=t.length,i="",r=0,o=[];n>r;r++)o.push(r);for(t=t.slice(e).concat(t.slice(0,e)),o=o.slice(e).concat(o.slice(0,e)),r=0;n>r;r++)i+='<label class="k-check"><input class="k-recur-weekday-checkbox" type="checkbox" value="'+o[r]+'" /> '+t[r]+"</label>";return i},P=U.template('# if (frequency !== "never") { #<div class="k-edit-label"><label>#:messages.repeatEvery#</label></div><div class="k-edit-field"><input class="k-recur-interval"/>#:messages.interval#</div># } ## if (frequency === "weekly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field">#=weekDayCheckBoxes(firstWeekDay)#</div># } else if (frequency === "monthly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field"><ul class="k-reset"><li><label><input class="k-recur-month-radio" type="radio" name="month" value="monthday" />#:messages.day#</label><input class="k-recur-monthday" /></li><li><input class="k-recur-month-radio" type="radio" name="month" value="weekday" /><input class="k-recur-weekday-offset" /><input class="k-recur-weekday" /></li></ul></div># } else if (frequency === "yearly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field"><ul class="k-reset"><li><input class="k-recur-year-radio" type="radio" name="year" value="monthday" /><input class="k-recur-month" /><input class="k-recur-monthday" /></li><li><input class="k-recur-year-radio" type="radio" name="year" value="weekday" /><input class="k-recur-weekday-offset" /><input class="k-recur-weekday" />#:messages.of#<input class="k-recur-month" /></li></ul></div># } ## if (frequency !== "never") { #<div class="k-edit-label"><label>#:end.label#</label></div><div class="k-edit-field"><ul class="k-reset"><li><label><input class="k-recur-end-never" type="radio" name="end" value="never" />#:end.never#</label></li><li><label><input class="k-recur-end-count" type="radio" name="end" value="count" />#:end.after#</label><input class="k-recur-count" />#:end.occurrence#</li><li><label><input class="k-recur-end-until" type="radio" name="end" value="until" />#:end.on#</label><input class="k-recur-until" /></li></ul></div># } #'),I=[{day:0,offset:0},{day:1,offset:0},{day:2,offset:0},{day:3,offset:0},{day:4,offset:0},{day:5,offset:0},{day:6,offset:0}],z=[{day:1,offset:0},{day:2,offset:0},{day:3,offset:0},{day:4,offset:0},{day:5,offset:0}],F=[{day:0,offset:0},{day:6,offset:0}],R=q.extend({init:function(e,t){var n,i=this,r=t&&t.frequencies;q.fn.init.call(i,e,t),i.wrapper=i.element,t=i.options,t.start=n=t.start||Y.today(),r&&(t.frequencies=r),"string"==typeof n&&(t.start=U.parseDate(n,"yyyyMMddTHHmmss")),null===t.firstWeekDay&&(t.firstWeekDay=U.culture().calendar.firstDay),i._namespace="."+t.name},options:{value:"",start:"",timezone:"",spinners:!0,firstWeekDay:null,frequencies:["never","daily","weekly","monthly","yearly"],mobile:!1,messages:{frequencies:{never:"Never",hourly:"Hourly",daily:"Daily",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly"},hourly:{repeatEvery:"Repeat every: ",interval:" hour(s)"},daily:{repeatEvery:"Repeat every: ",interval:" day(s)"},weekly:{interval:" week(s)",repeatEvery:"Repeat every: ",repeatOn:"Repeat on: "},monthly:{repeatEvery:"Repeat every: ",repeatOn:"Repeat on: ",interval:" month(s)",day:"Day "},yearly:{repeatEvery:"Repeat every: ",repeatOn:"Repeat on: ",interval:" year(s)",of:" of "},end:{label:"End:",mobileLabel:"Ends",never:"Never",after:"After ",occurrence:" occurrence(s)",on:"On "},offsetPositions:{first:"first",second:"second",third:"third",fourth:"fourth",last:"last"},weekdays:{day:"day",weekday:"weekday",weekend:"weekend day"}}},events:["change"],_initInterval:function(){var e=this,t=e._value;e._container.find(".k-recur-interval").kendoNumericTextBox({spinners:e.options.spinners,value:t.interval||1,decimals:0,format:"#",min:1,change:function(){t.interval=this.value(),e._trigger()}})},_weekDayRule:function(e){var t=this,n=(t._weekDay.element||t._weekDay).val(),i=+(t._weekDayOffset.element||t._weekDayOffset).val(),r=null,o=null;e||("day"===n?(r=I,o=i):"weekday"===n?(r=z,o=i):"weekend"===n?(r=F,o=i):r=[{offset:i,day:+n}]),t._value.weekDays=r,t._value.positions=o},_weekDayView:function(){var e,t,n,i,r=this,o=r._value.weekDays,a=r._value.positions,s=r._weekDayOffset;o&&(n=o.length,a&&(7===n?(t="day",e=a):5===n?(t="weekday",e=a):2===n&&(t="weekend",e=a)),t||(o=o[0],t=o.day,e=o.offset||""),i=s.value?"value":"val",s[i](e),r._weekDay[i](t))},_initWeekDay:function(){var t,n=this,i=n.options.messages.weekdays,r=n.options.messages.offsetPositions,o=n._container.find(".k-recur-weekday"),a=function(){n._weekDayRule(),n._trigger()};o[0]&&(n._weekDayOffset=new $(n._container.find(".k-recur-weekday-offset"),{change:a,dataTextField:"text",dataValueField:"value",dataSource:[{text:r.first,value:"1"},{text:r.second,value:"2"},{text:r.third,value:"3"},{text:r.fourth,value:"4"},{text:r.last,value:"-1"}]}),t=[{text:i.day,value:"day"},{text:i.weekday,value:"weekday"},{text:i.weekend,value:"weekend"}],n._weekDay=new $(o,{value:n.options.start.getDay(),change:a,dataTextField:"text",dataValueField:"value",dataSource:t.concat(e.map(U.culture().calendar.days.names,function(e,t){return{text:e,value:t}}))}),n._weekDayView())},_initWeekDays:function(){var t,n,i,r,o,a=this,s=a._value,l=a._container.find(".k-recur-weekday-checkbox");if(l[0]&&(l.on(vt+a._namespace,function(){s.weekDays=e.map(l.filter(":checked"),function(e){return{day:+e.value,offset:0}}),a.options.mobile||a._trigger()}),s.weekDays))for(i=0,r=l.length,o=s.weekDays.length;r>i;i++)for(n=l[i],t=0;o>t;t++)n.value==s.weekDays[t].day&&(n.checked=!0)},_initMonthDay:function(){var e=this,t=e._value,n=e._container.find(".k-recur-monthday");n[0]&&(e._monthDay=new U.ui.NumericTextBox(n,{spinners:e.options.spinners,min:1,max:31,decimals:0,format:"#",value:t.monthDays?t.monthDays[0]:e.options.start.getDate(),change:function(){var n=this.value();t.monthDays=n?[n]:n,e._trigger()}}))},_initCount:function(){var e=this,t=e._container.find(".k-recur-count"),n=e._value;e._count=t.kendoNumericTextBox({spinners:e.options.spinners,value:n.count||1,decimals:0,format:"#",min:1,change:function(){n.count=this.value(),e._trigger()}}).data("kendoNumericTextBox")},_initUntil:function(){var e=this,t=e._container.find(".k-recur-until"),n=e.options.start,i=e._value,r=i.until;e._until=t.kendoDatePicker({min:r&&n>r?r:n,value:r||n,change:function(){i.until=this.value(),e._trigger()}}).data("kendoDatePicker")},_trigger:function(){this.options.mobile||this.trigger("change")}}),B=R.extend({init:function(e,t){var n=this;R.fn.init.call(n,e,t),n._initFrequency(),n._initContainer(),n.value(n.options.value)},options:{name:"RecurrenceEditor"},events:["change"],destroy:function(){var e=this;e._frequency.destroy(),e._container.find("input[type=radio],input[type=checkbox]").off(vt+e._namespace),U.destroy(e._container),R.fn.destroy.call(e)},value:function(e){var n=this,i=n.options.timezone;return e===t?n._value.freq?E(n._value,i):"":(n._value=D(e,i)||{},n._frequency.value(n._value.freq||""),n._initView(n._frequency.value()),t)},_initContainer:function(){var t=this.element,n=e('<div class="k-recur-view" />'),i=t.parent(".k-edit-field");i[0]?n.insertAfter(i):t.append(n),this._container=n},_initFrequency:function(){var t,n=this,i=n.options,r=i.frequencies,o=i.messages.frequencies,a=e("<input />");r=e.map(r,function(e){return{text:o[e],value:e}}),t=r[0],t&&"never"===t.value&&(t.value=""),n.element.append(a),n._frequency=new $(a,{dataTextField:"text",dataValueField:"value",dataSource:r,change:function(){n._value={},n._initView(n._frequency.value()),n.trigger("change")}})},_initView:function(e){var n=this,i=n._value,r=n.options,o={frequency:e||"never",weekDayCheckBoxes:M,firstWeekDay:r.firstWeekDay,messages:r.messages[e],end:r.messages.end};return U.destroy(n._container),n._container.html(P(o)),e?(i.freq=e,"weekly"!==e||i.weekDays||(i.weekDays=[{day:r.start.getDay(),offset:0}]),n._initInterval(),n._initWeekDays(),n._initMonthDay(),n._initWeekDay(),n._initMonth(),n._initCount(),n._initUntil(),n._period(),n._end(),t):(n._value={},t)},_initMonth:function(){var t,n=this,i=n._value,r=i.months||[n.options.start.getMonth()+1],o=n._container.find(".k-recur-month");o[0]&&(t={change:function(){i.months=[+this.value()],n.trigger("change")},dataTextField:"text",dataValueField:"value",dataSource:e.map(U.culture().calendar.months.names,function(e,t){return{text:e,value:t+1}})},n._month1=new $(o[0],t),n._month2=new $(o[1],t),r&&(r=r[0],n._month1.value(r),n._month2.value(r)))},_end:function(){var e,t=this,n=t._value,i=t._container,r=t._namespace,o=function(e){t._toggleEnd(e.currentTarget.value),t.trigger("change")};t._buttonNever=i.find(".k-recur-end-never").on(vt+r,o),t._buttonCount=i.find(".k-recur-end-count").on(vt+r,o),t._buttonUntil=i.find(".k-recur-end-until").on(vt+r,o),n.count?e="count":n.until&&(e="until"),t._toggleEnd(e)},_period:function(){var e=this,t=e._value,n="monthly"===t.freq,i=n?e._toggleMonthDay:e._toggleYear,r=".k-recur-"+(n?"month":"year")+"-radio",o=e._container.find(r);(n||"yearly"===t.freq)&&(o.on(vt+e._namespace,function(t){i.call(e,t.currentTarget.value),e.trigger("change")}),e._buttonMonthDay=o.eq(0),e._buttonWeekDay=o.eq(1),i.call(e,t.weekDays?"weekday":"monthday"))},_toggleEnd:function(e){var t,n,i,r,o=this;"count"===e?(o._buttonCount.prop("checked",!0),i=!0,r=!1,t=o._count.value(),n=null):"until"===e?(o._buttonUntil.prop("checked",!0),i=!1,r=!0,t=null,n=o._until.value()):(o._buttonNever.prop("checked",!0),i=r=!1,t=n=null),o._count.enable(i),o._until.enable(r),o._value.count=t,o._value.until=n},_toggleMonthDay:function(e){var t,n=this,i=!1,r=!0,o=!1;"monthday"===e?(n._buttonMonthDay.prop("checked",!0),t=[n._monthDay.value()],i=!0,r=!1,o=!0):(n._buttonWeekDay.prop("checked",!0),t=null),n._weekDay.enable(r),n._weekDayOffset.enable(r),n._monthDay.enable(i),n._value.monthDays=t,n._weekDayRule(o)},_toggleYear:function(e){var t,n=this,i=!1,r=!0;"monthday"===e?(i=!0,r=!1,t=n._month1.value()):t=n._month2.value(),n._month1.enable(i),n._month2.enable(r),n._value.months=[t],n._toggleMonthDay(e)}}),G.plugin(B),L=U.template('<div class="k-edit-label"><label>#:headerTitle#</label></div><div class="k-edit-field k-recur-pattern k-scheduler-toolbar"></div><div class="k-recur-view"></div>'),O=U.template('# if (frequency !== "never") { #<div class="k-edit-label"><label>#:messages.repeatEvery#</label></div><div class="k-edit-field"><input class="k-recur-interval" pattern="\\\\d*"/>#:messages.interval#</div># } ## if (frequency === "weekly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field">#=weekDayCheckBoxes(firstWeekDay)#</div># } else if (frequency === "monthly") { #<div class="k-edit-label"><label>#:messages.repeatBy#</label></div><div class="k-edit-field k-scheduler-toolbar k-repeat-rule"></div><div class="k-monthday-view" style="display:none"><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><input class="k-recur-monthday" pattern="\\\\d*"/></div></div><div class="k-weekday-view" style="display:none"><div class="k-edit-label"><label>#:messages.every#</label></div><div class="k-edit-field"><select class="k-recur-weekday-offset"></select></div><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><select class="k-recur-weekday"></select></div></div># } else if (frequency === "yearly") { #<div class="k-edit-label"><label>#:messages.repeatBy#</label></div><div class="k-edit-field k-scheduler-toolbar k-repeat-rule"></div><div class="k-monthday-view" style="display:none"><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><input class="k-recur-monthday" pattern="\\\\d*"/></div></div><div class="k-weekday-view" style="display:none"><div class="k-edit-label"><label>#:messages.every#</label></div><div class="k-edit-field"><select class="k-recur-weekday-offset"></select></div><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><select class="k-recur-weekday"></select></div></div><div class="k-edit-label"><label>#:messages.month#</label></div><div class="k-edit-field"><select class="k-recur-month"></select></div># } #'),H=U.template('# if (endPattern === "count") { #<div class="k-edit-label"><label>#:messages.after#</label></div><div class="k-edit-field"><input class="k-recur-count" pattern="\\\\d*" /></div># } else if (endPattern === "until") { #<div class="k-edit-label"><label>#:messages.on#</label></div><div class="k-edit-field"><input type="date" class="k-recur-until" /></div># } #'),N=U.template('<ul class="k-reset k-header k-scheduler-navigation">#for (var i = 0, length = dataSource.length; i < length; i++) {#<li class="k-state-default #= value === dataSource[i].value ? "k-state-selected" : "" #"><a role="button" href="\\#" class="k-link" data-#=ns#value="#=dataSource[i].value#">#:dataSource[i].text#</a></li>#}#</ul>'),V=R.extend({init:function(e,t){var n=this;R.fn.init.call(n,e,t),t=n.options,n._optionTemplate=U.template('<option value="#:value#">#:text#</option>'),n.value(t.value),n._pane=t.pane,n._initRepeatButton(),n._initRepeatEnd(),n._defaultValue=n._value},options:{name:"MobileRecurrenceEditor",animations:{left:"slide",right:"slide:right"},mobile:!0,messages:{cancel:"Cancel",update:"Save",endTitle:"Repeat ends",repeatTitle:"Repeat pattern",headerTitle:"Repeat event",end:{patterns:{never:"Never",after:"After...",on:"On..."},never:"Never",after:"End repeat after",on:"End repeat on"},daily:{interval:""},hourly:{interval:""},weekly:{interval:""},monthly:{interval:"",repeatBy:"Repeat by: ",dayOfMonth:"Day of the month",dayOfWeek:"Day of the week",repeatEvery:"Repeat every",every:"Every",day:"Day "},yearly:{interval:"",repeatBy:"Repeat by: ",dayOfMonth:"Day of the month",dayOfWeek:"Day of the week",repeatEvery:"Repeat every: ",every:"Every",month:"Month",day:"Day"}}},events:["change"],value:function(e){var n=this,i=n.options.timezone;return e===t?n._value.freq?E(n._value,i):"":(n._value=D(e,i)||{},t)},destroy:function(){this._destroyView(),U.destroy(this._endFields),this._repeatButton.off(vt+this._namespace),R.fn.destroy.call(this)},_initRepeatButton:function(){var t=this,n=t.options.messages.frequencies[this._value.freq||"never"];t._repeatButton=e('<a href="#" class="k-button k-scheduler-recur">'+n+"</a>").on(vt+t._namespace,function(e){e.preventDefault(),t._createView("repeat"),t._pane.navigate("recurrence",t.options.animations.left)}),t.element.append(t._repeatButton)},_initRepeatEnd:function(){var t=this,n=e('<div class="k-edit-label"><label>'+t.options.messages.end.mobileLabel+"</label></div>").insertAfter(t.element.parent(".k-edit-field")),i=e('<div class="k-edit-field"><a href="#" class="k-button k-scheduler-recur-end"></a></div>').on(vt+t._namespace,function(e){e.preventDefault(),t._value.freq&&(t._createView("end"),t._pane.navigate("recurrence",t.options.animations.left))}).insertAfter(n);t._endFields=n.add(i).toggleClass("k-state-disabled",!t._value.freq),t._endButton=i.find(".k-scheduler-recur-end").text(t._endText())},_endText:function(){var e=this._value,t=this.options.messages.end,n=t.never;return e.count?n=U.format("{0} {1}",t.after,e.count):e.until&&(n=U.format("{0} {1:d}",t.on,e.until)),n},_initFrequency:function(){var t=this,n=t.options.messages.frequencies,i=N({dataSource:e.map(this.options.frequencies,function(e){return{text:n[e],value:"never"!==e?e:""}}),value:t._value.freq||"",ns:U.ns});t._view.element.find(".k-recur-pattern").append(i).on(vt+t._namespace,".k-scheduler-navigation li",function(n){var i=e(this);n.preventDefault(),i.addClass("k-state-selected").siblings().removeClass("k-state-selected"),t._value={freq:i.children("a").attr(U.attr("value"))},t._initRepeatView()})},_initEndNavigation:function(){var t,n=this,i=n.options.messages.end.patterns,r=n._value,o="";r.count?o="count":r.until&&(o="until"),t=N({dataSource:[{text:i.never,value:""},{text:i.after,value:"count"},{text:i.on,value:"until"}],value:o,ns:U.ns}),n._view.element.find(".k-recur-pattern").append(t).on(vt+n._namespace,".k-scheduler-navigation li",function(t){var i=e(this),o=null,a=null;t.preventDefault(),i.addClass("k-state-selected").siblings().removeClass("k-state-selected"),n._initEndView(i.children("a").attr(U.attr("value"))),n._count?(o=n._count.value(),a=null):n._until&&(o=null,a=n._until.val?U.parseDate(n._until.val(),"yyyy-MM-dd"):n._until.value()),r.count=o,r.until=a})},_createView:function(t){var n=this,i=n.options,r=i.messages,o=r["repeat"===t?"repeatTitle":"endTitle"],a='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list" id="recurrence"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+r.cancel+"</a>"+r.headerTitle+'<a href="#" class="k-button k-scheduler-update">'+r.update+"</a></div>",s=n._pane.view().id;n._view=n._pane.append(a+L({headerTitle:o})),n._view.element.on(vt+n._namespace,"a.k-scheduler-cancel, a.k-scheduler-update",function(t){t.preventDefault(),t.stopPropagation(),e(this).hasClass("k-scheduler-update")?(n.trigger("change"),n._defaultValue=e.extend({},n._value)):n._value=n._defaultValue;var i=n._value.freq;n._endButton.text(n._endText()),n._endFields.toggleClass("k-state-disabled",!i),n._repeatButton.text(r.frequencies[i||"never"]),n._pane.one("viewShow",function(){n._destroyView()}),n._pane.navigate(s,n.options.animations.right)}),n._container=n._view.element.find(".k-recur-view"),"repeat"===t?(n._initFrequency(),n._initRepeatView()):(n._initEndNavigation(),n._initEndView())},_destroyView:function(){this._view&&(this._view.destroy(),this._view.element.remove()),this._view=null},_initRepeatView:function(){var e=this,n=e._value.freq||"never",i={frequency:n,weekDayCheckBoxes:M,firstWeekDay:e.options.firstWeekDay,messages:e.options.messages[n]},r=O(i),o=e._container,a=e._value;return U.destroy(o),o.html(r),r?("weekly"!==n||a.weekDays||(a.weekDays=[{day:e.options.start.getDay(),offset:0}]),e._initInterval(),e._initMonthDay(),e._initWeekDays(),e._initWeekDay(),e._initMonth(),e._period(),t):(e._value={},t)},_initEndView:function(e){var n,i=this,r=i._value;e===t&&(r.count?e="count":r.until&&(e="until")),n={endPattern:e,messages:i.options.messages.end},U.destroy(i._container),i._container.html(H(n)),i._initCount(),i._initUntil()},_initWeekDay:function(){var t,n=this,i=n.options.messages.weekdays,r=n.options.messages.offsetPositions,o=n._container.find(".k-recur-weekday"),a=function(){n._weekDayRule(),n.trigger("change")};o[0]&&(n._weekDayOffset=n._container.find(".k-recur-weekday-offset").html(n._options([{text:r.first,value:"1"},{text:r.second,value:"2"},{text:r.third,value:"3"},{text:r.fourth,value:"4"},{text:r.last,value:"-1"}])).change(a),t=[{text:i.day,value:"day"},{text:i.weekday,value:"weekday"},{text:i.weekend,value:"weekend"}],t=t.concat(e.map(U.culture().calendar.days.names,function(e,t){return{text:e,value:t}})),n._weekDay=o.html(n._options(t)).change(a).val(n.options.start.getDay()),n._weekDayView())},_initMonth:function(){var t,n=this,i=n._value,r=n.options.start,o=i.months||[r.getMonth()+1],a=n._container.find(".k-recur-month"),s=U.culture().calendar.months.names;a[0]&&(t=e.map(s,function(e,t){return{text:e,value:t+1}}),a.html(n._options(t)).change(function(){i.months=[+this.value]}),n._monthSelect=a,o&&a.val(o[0]))},_period:function(){var t,n,i,r=this,o=r._value,a=r._container,s=r.options.messages[o.freq],l=a.find(".k-repeat-rule"),c=a.find(".k-weekday-view"),d=a.find(".k-monthday-view");l[0]&&(t=o.weekDays?"weekday":"monthday",n=N({value:t,dataSource:[{text:s.dayOfMonth,value:"monthday"},{text:s.dayOfWeek,value:"weekday"}],ns:U.ns}),i=function(e){var t=r._weekDay.val(),n=r._weekDayOffset.val(),i=r._monthDay.value(),a=r._monthSelect?r._monthSelect.val():null;"monthday"===e?(o.weekDays=null,o.monthDays=i?[i]:i,o.months=a?[+a]:a,c.hide(),d.show()):(o.monthDays=null,o.months=a?[+a]:a,o.weekDays=[{offset:+n,day:+t}],c.show(),d.hide())},l.append(n).on(vt+r._namespace,".k-scheduler-navigation li",function(t){var n,r=e(this).addClass("k-state-selected");t.preventDefault(),r.siblings().removeClass("k-state-selected"),n=r.children("a").attr(U.attr("value")),i(n)}),i(t))},_initUntil:function(){var e=this,t=e._container.find(".k-recur-until"),n=e.options.start,i=e._value,r=i.until,o=r&&n>r?r:n;e._until=U.support.input.date?t.attr("min",U.toString(o,"yyyy-MM-dd")).val(U.toString(r||n,"yyyy-MM-dd")).on("change",function(){i.until=U.parseDate(this.value,"yyyy-MM-dd")}):t.kendoDatePicker({min:o,value:r||n,change:function(){i.until=this.value()}}).data("kendoDatePicker")},_options:function(e,t){var n=0,i="",r=e.length,o=this._optionTemplate;for(t&&(i+=o({value:"",text:t}));r>n;n++)i+=o(e[n]);return i}}),G.plugin(V)}(window.kendo.jQuery),function(e,t){function n(e){var t=new Date(1980,1,1,0,0,0);return l(t,p(e)),t}function i(e,t,n){return e>=t&&n>=e}function r(e){var t=[],n=e.workWeekStart;for(t.push(n);e.workWeekEnd!=n;)n>6?n-=7:n++,t.push(n);return t}function o(e){var t,n=0;if(e.columns){for(t=0;e.columns.length>t;t++)n+=o(e.columns[t]);return e.colspan=n,n}return e.colspan=1,1}var a=window.kendo,s=a.ui,l=a.date.setTime,c=s.SchedulerView,d=e.extend,u=e.proxy,h=a.date.getDate,p=a.date.getMilliseconds,f=a.date.MS_PER_DAY,g=a.date.MS_PER_MINUTE,m=".kendoTimelineView",v=a.template('<div><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),_=a.template("<span class='k-link k-nav-day'>#=kendo.toString(date, 'ddd M/dd')#</span>"),y='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head) {#<span class="k-icon k-i-arrow-e"></span>#}#</span>#if(resizable && !data.tail){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !data.head){#<span class="k-resize-handle k-resize-e"></span>#}#</div>',w=c.extend({init:function(e,t){var n=this;c.fn.init.call(n,e,t),n.title=n.options.title||n.options.name,n._workDays=r(n.options),n._templates(),n._editable(),n.calculateDateRange(),n._groups(),n._currentTime()},name:"timeline",_currentTimeMarkerUpdater:function(){var t,n,i,r,o,s,l,c,d,u,h,p=new Date,f=this.options;if(this.datesHeader.find(".k-current-time").remove(),this._isInDateSlot({start:p,end:p}))for(f.currentTimeMarker.useLocalTimezone===!1&&(t=f.dataSource.options.schema.timezone,f.dataSource&&t&&(n=a.timezone.offset(p,t),p=a.timezone.convert(p,p.getTimezoneOffset(),n))),i=f.group&&"vertical"!=f.group.orientation?this.groups.length:1,r=0;i>r;r++){if(o=this.groups[r],s=a.date.toUtcTime(p),l=o.timeSlotRanges(s,s+1),0===l.length)return;c=l[0].collection,d=c.slotByStartDate(p),d&&(u=e("<div class='k-current-time'></div>"),h=this.datesHeader,u.appendTo(h.find(".k-scheduler-header-wrap")).css({left:Math.round(l[0].innerRect(p,new Date(p.getTime()+1),!1).left),width:"1px",bottom:"1px",top:0}))}},_currentTime:function(){var e,n=this,i=n.options.currentTimeMarker;i!==!1&&i.updateInterval!==t&&(e=i.updateInterval,n._currentTimeMarkerUpdater(),n._currentTimeUpdateTimer=setInterval(u(this._currentTimeMarkerUpdater,n),e))},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+m,".k-event a:has(.k-si-close)",function(n){t.trigger("remove",{uid:e(this).closest(".k-event").attr(a.attr("uid"))}),n.preventDefault()}),t.options.editable.create!==!1&&t.element.on("dblclick"+m,".k-scheduler-content td",function(e){var n,i=t._slotByPosition(e.pageX,e.pageY);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:d({start:i.startDate(),end:i.endDate()},n)})),e.preventDefault()}),t.options.editable.update!==!1&&t.element.on("dblclick"+m,".k-event",function(n){t.trigger("edit",{uid:e(this).closest(".k-event").attr(a.attr("uid"))}),n.preventDefault()})},_touchEditable:function(){var t=this;t.options.editable.create!==!1&&(t._addUserEvents=new a.UserEvents(t.element,{filter:".k-scheduler-content td",tap:function(e){var n,i=t._slotByPosition(e.x.location,e.y.location);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:d({start:i.startDate(),end:i.endDate()},n)})),e.preventDefault()}})),t.options.editable.update!==!1&&(t._editUserEvents=new a.UserEvents(t.element,{filter:".k-event",tap:function(n){var i=e(n.target).closest(".k-event");i.hasClass("k-event-active")||t.trigger("edit",{uid:i.attr(a.attr("uid"))}),n.preventDefault()}}))},_slotByPosition:function(e,t){var n,i,r,o,s=this.content,l=s.offset();for(e-=l.left,t-=l.top,this._isRtl?(o=a.support.browser,o.mozilla?(e+=s[0].scrollWidth-s[0].offsetWidth,e+=s[0].scrollLeft):o.msie?(e-=s.scrollLeft(),e+=s[0].scrollWidth-this.content[0].offsetWidth):o.webkit&&(e+=s[0].scrollLeft)):e+=s[0].scrollLeft,t+=s[0].scrollTop,e=Math.ceil(e),t=Math.ceil(t),r=0;this.groups.length>r;r++)if(i=this.groups[r],n=i.timeSlotByPosition(e,t))return n;return null},options:{name:"TimelineView",title:"Timeline",selectedDateFormat:"{0:D}",date:a.date.today(),startTime:a.date.today(),endTime:a.date.today(),showWorkHours:!1,minorTickCount:2,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,majorTick:60,eventHeight:25,columnWidth:100,groupHeaderTemplate:"#=text#",majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",slotTemplate:"&nbsp;",eventTemplate:v,dateHeaderTemplate:_,footer:{command:"workDay"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0},messages:{defaultRowText:"All events",showFullDay:"Show full day",showWorkDay:"Show business hours"}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=d({},a.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,y),this.majorTimeHeaderTemplate=a.template(e.majorTimeHeaderTemplate,t),this.dateHeaderTemplate=a.template(e.dateHeaderTemplate,t),this.slotTemplate=a.template(e.slotTemplate,t),this.groupHeaderTemplate=a.template(e.groupHeaderTemplate,t)},_render:function(e){var t=this;e=e||[],t._dates=e,t._startDate=e[0],t._endDate=e[e.length-1||0],t._calculateSlotRanges(),t.createLayout(t._layout(e)),t._content(e),t._footer(),t._setContentWidth(),t.refreshLayout(),this.timesHeader.find("table tr:last").hide(),this.datesHeader.find("table tr:last").hide()},_setContentWidth:function(){var e=this.content,t=e.width(),n=this.content.find("table"),i=n.find("tr:first").children().length,r=100,o=i*this.options.columnWidth;o>t&&(r=Math.ceil(o/t*100)),n.add(this.datesHeader.find("table")).css("width",r+"%")},_calculateSlotRanges:function(){var e,t,n,i,r=this._dates,o=this.startTime(),s=this.endTime();for(p(s)===p(a.date.getDate(s))&&(s=a.date.getDate(s),l(s,f-1)),s=p(s),o=p(o),e=[],t=0;r.length>t;t++)n=h(r[t]),l(n,o),i=h(r[t]),l(i,s),e.push({start:a.date.toUtcTime(n),end:a.date.toUtcTime(i)});this._slotRanges=e},_forTimeRange:function(e,t,i,r){var o,a,s,c,d,u,h,m,v,_,y,w,b,k,x,C,S,T;for(e=n(e),t=n(t),o=this,a=p(e),s=p(t),c=o.options.minorTickCount,d=o.options.majorTick*g,u=d/c||1,h=new Date(+e),m=h.getDate(),_=0,w="",y=f/u,a!=s&&(a>s&&(s+=f),y=(s-a)/u),y=Math.round(y);y>_;_++)b=_%(d/u),k=0===b,x=c-1>b,C=b===c-1,S=c,y%c!==0&&(T=c>y-(_+1),k&&T&&(S=y%c)),w+=i(h,k,x,C,S),l(h,u,!1);return s&&(v=p(h),m<h.getDate()&&(v+=f),v>s&&(h=new Date(+t))),r&&(w+=r(h)),w},_layout:function(e){var t,n,i,r=[],s=[],l=this,c=[{text:l.options.messages.defaultRowText}],d=[];for(t=0;l.options.minorTickCount>t;t++)d.push({text:"",className:""});for(this._forTimeRange(l.startTime(),l.endTime(),function(e,t,n,i,a){var s,c=l.majorTimeHeaderTemplate;t&&(s={text:c({date:e}),className:i?"k-slot-cell":"",columns:d.slice(0,a)},o(s),r.push(s))}),n=0;e.length>n;n++)s.push({text:a.format("{0:m}",e[n]),className:"k-slot-cell",columns:r.slice(0)});return i=this.groupedResources,i.length&&("vertical"===this._groupOrientation()?c=l._createRowsLayout(i,null,this.groupHeaderTemplate):s=l._createColumnsLayout(i,s,this.groupHeaderTemplate)),{columns:s,rows:c}},_footer:function(){var t,n,i,r=this.options;r.footer!==!1&&(t='<div class="k-header k-scheduler-footer">',n=r.footer.command,n&&"workDay"===n?(t+='<ul class="k-reset k-header">',t+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>',t+=(r.showWorkHours?r.messages.showFullDay:r.messages.showWorkDay)+"</a></li>",t+="</ul>"):t+="&nbsp;",t+="</div>",this.footer=e(t).appendTo(this.element),i=this,this.footer.on("click"+m,".k-scheduler-fullday",function(e){e.preventDefault(),i.trigger("navigate",{view:i.name||r.name,date:i.startDate(),isWorkDay:!r.showWorkHours})}))},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},_isWorkDay:function(e){var t,n=e.getDay(),i=this._workDays;for(t=0;i.length>t;t++)if(i[t]===n)return!0;return!1},_content:function(e){var t,n,i,r,o,s=this,l=s.options,c=s.startTime(),d=this.endTime(),u=1,h=1,p=e.length,f="",g=this.groupedResources,m=this.slotTemplate,v=!1;for(g.length&&(v="vertical"===s._groupOrientation(),v?h=s._groupCount():u=s._groupCount()),f+="<tbody>",t=function(t){var o,c="",d="",u=function(e){return function(){return s._resourceBySlot({groupIndex:e})}};return a.date.isToday(e[r])&&(d+="k-today"),(a.date.getMilliseconds(t)<a.date.getMilliseconds(l.workDayStart)||a.date.getMilliseconds(t)>=a.date.getMilliseconds(l.workDayEnd)||!s._isWorkDay(e[r]))&&(d+=" k-nonwork-hour"),c+="<td"+(""!==d?' class="'+d+'"':"")+">",o=a.date.getDate(e[r]),a.date.setTime(o,a.date.getMilliseconds(t)),c+=m({date:o,resources:u(v?n:i)}),c+="</td>"},n=0;h>n;n++){for(f+="<tr>",i=0;u>i;i++)for(r=0,o=p;o>r;r++)f+=this._forTimeRange(c,d,t);f+="</tr>"}f+="</tbody>",this.content.find("table").append(f)},_groups:function(){var e,t,n,i,r=this._groupCount(),o=this._dates,s=o.length;for(this.groups=[],e=0;r>e;e++)t=this._addResourceView(e),n=o[0],i=o[o.length-1||0],t.addTimeSlotCollection(n,a.date.addDays(i,1));
this._timeSlotGroups(r,s)},_isVerticallyGrouped:function(){return this.groupedResources.length&&"vertical"===this._groupOrientation()},_isHorizontallyGrouped:function(){return this.groupedResources.length&&"horizontal"===this._groupOrientation()},_timeSlotGroups:function(e,t){var n,i,r,o,a,s,l,c,d,u,h,f,g,m,v,_,y,w,b=this._timeSlotInterval(),k=this._isVerticallyGrouped(),x=this.content.find("tr"),C=x.length;for(x.attr("role","row"),k&&(C=Math.floor(C/e)),n=0;e>n;n++)for(i=0,r=this.groups[n],k&&(i=n),a=i*C,s=0,k||(s=n),l=x[a].children,c=l.length/(k?1:e),d=c/t,u=0;t>u;u++)for(h=u*d+c*s,o=p(new Date(+this.startTime())),f=0;d>f;f++)g=l[f+h],m=r.getTimeSlotCollection(0),v=this._dates[u],_=Date.UTC(v.getFullYear(),v.getMonth(),v.getDate()),y=_+o,w=y+b,g.setAttribute("role","gridcell"),g.setAttribute("aria-selected",!1),m.addTimeSlot(g,y,w,!0),o+=b},startDate:function(){return this._startDate},endDate:function(){return this._endDate},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*g},nextDate:function(){return a.date.nextDay(this.endDate())},previousDate:function(){return a.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},render:function(t){var n,r,o,s,l,c;for(this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),t=new a.data.Query(t).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray(),n=[],this._eventsByResource(t,this.groupedResources,n),r=e.map(this._dates,function(t){return Math.max.apply(null,e.map(n,function(n){return e.grep(n,function(e){return i(t,h(e.start),h(e.end))}).length}))}),o=[],s=0,l=0;n.length>l;l++)c={groupIndex:l,maxRowCount:0,events:{}},o.push(c),this._renderEvents(n[l],l,c),c.maxRowCount>s&&(s=c.maxRowCount);this._setRowsHeight(o,n.length,s),this._positionEvents(o,n.length),this.trigger("activate")},_positionEvents:function(e,t){var n,i,r,o;for(n=0;t>n;n++){i=e[n].events;for(r in i)o=i[r],this._positionEvent(o)}},_setRowsHeight:function(e,t,n){var i,r,o,s,l,c=this.options.eventHeight+2,d=this._getBottomRowOffset();for(t=this._isVerticallyGrouped()?t:1,i=0;t>i;i++)r=this._isVerticallyGrouped()?e[i].maxRowCount:n,r=r?r:1,o=(c+2)*r+d,s=this.times.find(a.format("tr:nth-child({0})",i+1)),l=this.content.find(a.format("tr:nth-child({0})",i+1)),s.height(o),l.height(o);this._setContentWidth(),this.refreshLayout(),this._refreshSlots()},_getBottomRowOffset:function(){var e,t,n=.5*this.options.eventHeight,i=this._isMobile();return i?(e=30,t=60):(e=15,t=30),n>t?n=t:e>n&&(n=e),n},_positionEvent:function(e){var t,n,i=this.options.eventHeight+2,r=e.slotRange.innerRect(e.start,e.end,!1);r.top=e.slotRange.start.offsetTop,t=r.right-r.left-2,0>t&&(t=0),n=r.left,this._isRtl&&(n-=this.content[0].scrollWidth-this.content[0].offsetWidth),e.element.css({top:e.slotRange.start.offsetTop+e.rowIndex*(i+2)+"px",left:n,width:t})},_refreshSlots:function(){for(var e=0;this.groups.length>e;e++)this.groups[e].refresh()},_eventsByResource:function(e,t,n){var i,r,o,s,l=t[0];if(l)for(i=l.dataSource.view(),r=0;i.length>r;r++)o=this._resourceValue(l,i[r]),s=new a.data.Query(e).filter({field:l.field,operator:c.groupEqFilter(o)}).toArray(),t.length>1?this._eventsByResource(s,t.slice(1),n):n.push(s);else n.push(e)},_isInDateSlot:function(e){var t=e.start,n=e.end,i=h(this._startDate),r=a.date.addDays(h(this._endDate),1);return r>t&&n>=i?!0:!1},_isInTimeSlot:function(e){var t,n=e.startTime||a.date.toUtcTime(e.start),i=e.endTime||a.date.toUtcTime(e.end),r=this._slotRanges;for(n===i&&(i+=1),t=0;r.length>t;t++)if(r[t].end>n&&i>r[t].start)return!0;return!1},_adjustEvent:function(e){var t,n=e.start,i=e.end,r=e._time("start"),o=e._time("end"),s=p(this.startTime()),c=p(this.endTime()),d=null,u=null,g=!1,m=!1;return e.isAllDay?(d=h(n),s>r&&(l(d,s),m=!0),u=h(i),c===p(h(this.endTime()))?u=a.date.addDays(u,1):(l(u,c),g=!0)):(c=0===c?f:c,s>r?(d=h(n),l(d,s),m=!0):r>c&&(d=h(n),d=a.date.addDays(d,1),l(d,s),m=!0),o>c?(u=h(i),l(u,c),g=!0):s>o&&(u=h(i),u=a.date.addDays(u,-1),l(u,c),g=!0)),t=e.clone({start:d?d:n,end:u?u:i,startTime:d?a.date.toUtcTime(d):e.startTime,endTime:u?a.date.toUtcTime(u):e.endTime,isAllDay:!1}),{occurrence:t,head:g,tail:m}},_renderEvents:function(e,t,n){var i,r,o,a,s,l,c,d,u,h,p;for(r=0,o=e.length;o>r;r++)i=e[r],this._isInDateSlot(i)&&(a=i.isAllDay||i.end.getTime()-i.start.getTime()>=f,s=this.content,(a||this._isInTimeSlot(i))&&(l=this._adjustEvent(i),c=this.groups[t],c._continuousEvents||(c._continuousEvents=[]),d=c.slotRanges(l.occurrence,!1),u=d[0],this._isInTimeSlot(l.occurrence)&&(h=this._createEventElement(l.occurrence,i,u.head||l.head,u.tail||l.tail),h.appendTo(s).css({top:0,height:this.options.eventHeight}),p={start:l.occurrence.startTime||l.occurrence.start,end:l.occurrence.endTime||l.occurrence.end,element:h,uid:i.uid,slotRange:u,rowIndex:0,offsetTop:0},n.events[i.uid]=p,this.addContinuousEvent(c,u,h,i.isAllDay),this._arrangeRows(p,u,n))))},addContinuousEvent:function(e,t,n,i){var r=e._continuousEvents;r.push({element:n,isAllDay:i,uid:n.attr(a.attr("uid")),start:t.start,end:t.end})},_createEventElement:function(t,n,i,r){var o,s,l=this.eventTemplate,c=this.options.editable,u=this._isMobile(),h=c&&c.destroy!==!1&&!u,p=c&&c.resize!==!1,f=n._time("start"),g=n._time("end"),m=n.start,v=n.end,_=this.eventResources(n);return n.startTime&&(m=new Date(f),m=a.timezone.apply(m,"Etc/UTC")),n.endTime&&(v=new Date(g),v=a.timezone.apply(v,"Etc/UTC")),o=d({},{ns:a.ns,resizable:p,showDelete:h,head:i,tail:r,singleDay:1==this._dates.length,resources:_,inverseColor:_&&_[0]?this._shouldInverseResourceColor(_[0]):!1},n,{start:m,end:v}),s=e(l(o)),this.angular("compile",function(){return{elements:s,data:[{dataItem:o}]}}),s},_arrangeRows:function(e,t,n){var i,r,o,a,s,l,d=t.start.index,u=t.end.index,h=c.collidingEvents(t.events(),d,u);for(t.addEvent({slotIndex:d,start:d,end:u,element:e.element,uid:e.uid}),h.push({slotIndex:d,start:d,end:u,element:e.element,uid:e.uid}),i=c.createRows(h),i.length>n.maxRowCount&&(n.maxRowCount=i.length),r=0,o=i.length;o>r;r++)for(a=i[r].events,s=0,l=a.length;l>s;s++)n.events[a[s].uid].rowIndex=r},_groupCount:function(){var e=this.groupedResources;return e.length?"vertical"===this._groupOrientation()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length-1):1},_updateEventForSelection:function(e){var t=this._adjustEvent(e.clone());return t.occurrence},_updateEventForMove:function(e){e.isAllDay&&e.set("isAllDay",!1)},_updateEventForResize:function(e){e.isAllDay&&e.set("isAllDay",!1)},_updateMoveHint:function(e,t,n){var i,r,o,a,s,l,c,d,u,h,p,f=this.groups[t],g=e.clone({start:e.start,end:e.end}),m=g.duration();for(g.start=new Date(g.start.getTime()+n),g.end=new Date(+g.start+m),i=this._adjustEvent(g),r=f.slotRanges(i.occurrence,!1),this._removeMoveHint(),o=0;r.length>o;o++)a=r[o],s=a.start,l=this._createEventElement(i.occurrence,i.occurrence,!1,!1),l.addClass("k-event-drag-hint"),c=a.innerRect(i.occurrence.start,i.occurrence.end,this.options.snap),d=c.right-c.left-2,0>d&&(d=0),u=c.left,this._isRtl&&(u-=this.content[0].scrollWidth-this.content[0].offsetWidth),h={left:u,top:s.offsetTop,height:s.offsetHeight-2,width:d},l.css(h),this._moveHint=this._moveHint.add(l);p=this.content,this._moveHint.appendTo(p)},_updateResizeHint:function(e,t,n,i){var r,o,s,l,d,u,h,p,f,g,m,v=this.groups[t],_=v.ranges(n,i,!1,!1);for(this._removeResizeHint(),r=0;_.length>r;r++)o=_[r],s=o.startSlot(),l=o.innerRect(n,i,!1),l.top=s.offsetTop,d=l.right-l.left,u=s.offsetHeight,h=l.left,p=this.content,this._isRtl&&(h-=p[0].scrollWidth-p[0].offsetWidth),f=c.fn._createResizeHint.call(this,h,l.top,d,u),this._resizeHint=this._resizeHint.add(f);g="t",m=this.content,this._resizeHint.appendTo(m),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(a.toString(a.timezone.toLocalDate(n),g)),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(a.toString(a.timezone.toLocalDate(i),g))},selectionByElement:function(e){var t=e.offset();return this._slotByPosition(t.left,t.top)},_updateDirection:function(e,t,n,i,r){var o=t[0].start,a=t[t.length-1].end;n&&!r&&o.index===a.index&&o.collectionIndex===a.collectionIndex&&(e.backward=i)},_changeGroup:function(e,t){var n=t?"prevGroupSlot":"nextGroupSlot",i=this[n](e.start,e.groupIndex,!1);return i&&(e.groupIndex+=t?-1:1),i},prevGroupSlot:function(e,t,n){var i,r=this.groups[t],o=r.ranges(e,e,n,!1)[0].start;if(!(0>=t))return this._isVerticallyGrouped()?o:(i=r._collection(0,n),i.last())},nextGroupSlot:function(e,t,n){var i,r=this.groups[t],o=r.ranges(e,e,n,!1)[0].start;if(!(t>=this.groups.length-1))return this._isVerticallyGrouped()?o:(i=r._collection(0,n),i.first())},_verticalSlots:function(e,t,n,i){var r=i?"leftSlot":"rightSlot",o=t[0].start,a=t[t.length-1].end,s=this.groups[e.groupIndex];return o=s[r](o),a=s[r](a),n||!this._isVerticallyGrouped()||o&&a||(o=a=this._changeGroup(e,i)),{startSlot:o,endSlot:a}},_horizontalSlots:function(e,t,n,i){var r=i?"upSlot":"downSlot",o=t[0].start,a=t[t.length-1].end,s=this.groups[e.groupIndex];return o=s[r](o),a=s[r](a),n||!this._isHorizontallyGrouped()||o&&a||(o=a=this._changeGroup(e,i)),{startSlot:o,endSlot:a}},_changeViewPeriod:function(e,t){var n,i=t?this.previousDate():this.nextDate(),r=e.start,o=e.end;return e.start=new Date(i),e.end=new Date(i),this._isHorizontallyGrouped()&&(e.groupIndex=t?this.groups.length-1:0),n=o-r,t?(o=p(this.endTime()),o=0===o?f:o,l(e.start,o-n),l(e.end,o)):(r=p(this.startTime()),l(e.start,r),l(e.end,r+n)),e.events=[],!0},move:function(e,t,n){var i,r,o,s,l,c=!1,d=this.groups[e.groupIndex],u=a.keys,h=d.ranges(e.start,e.end,!1,!1);if(t===u.DOWN||t===u.UP)c=!0,o=t===u.UP,this._updateDirection(e,h,n,o,!0),s=this._verticalSlots(e,h,n,o);else if(!(t!==u.LEFT&&t!==u.RIGHT||(c=!0,o=t===u.LEFT,this._updateDirection(e,h,n,o,!1),s=this._horizontalSlots(e,h,n,o),s.startSlot&&s.endSlot||n||!this._changeViewPeriod(e,o,!1))))return c;return c&&(i=s.startSlot,r=s.endSlot,n?(l=e.backward,l&&i?e.start=i.startDate():!l&&r&&(e.end=r.endDate())):i&&r&&(e.start=i.startDate(),e.end=r.endDate()),e.events=[]),c},destroy:function(){var e=this;e.element&&e.element.off(m),e.footer&&e.footer.remove(),e._currentTimeUpdateTimer&&clearInterval(e._currentTimeUpdateTimer),c.fn.destroy.call(this),this._isMobile()&&e.options.editable&&(e.options.editable.create!==!1&&(e._addUserEvents.destroy(),e._allDayUserEvents.destroy()),e.options.editable.update!==!1&&e._editUserEvents.destroy())}});d(!0,s,{TimelineView:w,TimelineWeekView:w.extend({options:{name:"TimelineWeekView",title:"Timeline Week",selectedDateFormat:"{0:D} - {1:D}",majorTick:120},name:"timelineWeek",calculateDateRange:function(){var e,t,n=this.options.date,i=a.date.dayOfWeek(n,this.calendarInfo().firstDay,-1),r=[];for(e=0,t=7;t>e;e++)r.push(i),i=a.date.nextDay(i);this._render(r)}}),TimelineWorkWeekView:w.extend({options:{name:"TimelineWorkWeekView",title:"Timeline Work Week",selectedDateFormat:"{0:D} - {1:D}",majorTick:120},name:"timelineWorkWeek",nextDate:function(){return a.date.dayOfWeek(a.date.nextDay(this.endDate()),this.options.workWeekStart,1)},previousDate:function(){return a.date.previousDay(this.startDate())},calculateDateRange:function(){for(var e=this.options.date,t=a.date.dayOfWeek(e,this.options.workWeekStart,-1),n=a.date.dayOfWeek(t,this.options.workWeekEnd,1),i=[];n>=t;)i.push(t),t=a.date.nextDay(t);this._render(i)}}),TimelineMonthView:w.extend({options:{name:"TimelineMonthView",title:"Timeline Month",selectedDateFormat:"{0:D} - {1:D}",workDayStart:new Date(1980,1,1,0,0,0),workDayEnd:new Date(1980,1,1,0,0,0),footer:!1,majorTick:1440,minorTickCount:1},name:"timelineWeek",calculateDateRange:function(){var e,t,n=this.options.date,i=a.date.firstDayOfMonth(n),r=a.date.lastDayOfMonth(n),o=[];for(e=0,t=r.getDate();t>e;e++)o.push(i),i=a.date.nextDay(i);this._render(o)}})})}(window.kendo.jQuery),function(e,t){function n(e,t){return t=t||"",e.startTimezone&&(t=e.startTimezone,e.endTimezone&&(t+=" | "+e.endTimezone)),t}function i(e,t){var n=t.timezone;n&&(e[A.attr("timezone")]=n)}function r(e,t){var n,i=t.model.fields[t.field].validation;i&&(n=i.dateCompare,n&&U(n)&&n.message&&(e[A.attr("dateCompare-msg")]=n.message))}function o(e,t){return function(n){return n=e(n),s(n,"apply",t),n||[]}}function a(e,t){return function(n){return n&&("[object Array]"===G.call(n)||n instanceof A.data.ObservableArray||(n=[n])),s(n,"remove",t,!0),n=e(n),n||[]}}function s(e,t,n,i){var r,o,a;for(e=e||[],o=0,a=e.length;a>o;o++)r=e[o],i?r.startTimezone||r.endTimezone?n?(r.start=A.timezone.convert(r.start,r.startTimezone||r.endTimezone,n),r.end=A.timezone.convert(r.end,r.endTimezone||r.startTimezone,n),r.start=A.timezone[t](r.start,n),r.end=A.timezone[t](r.end,n)):(r.start=A.timezone[t](r.start,r.startTimezone||r.endTimezone),r.end=A.timezone[t](r.end,r.endTimezone||r.startTimezone)):n&&(r.start=A.timezone[t](r.start,n),r.end=A.timezone[t](r.end,n)):r.startTimezone||r.endTimezone?(r.start=A.timezone[t](r.start,r.startTimezone||r.endTimezone),r.end=A.timezone[t](r.end,r.endTimezone||r.startTimezone),n&&(r.start=A.timezone.convert(r.start,r.startTimezone||r.endTimezone,n),r.end=A.timezone.convert(r.end,r.endTimezone||r.startTimezone,n))):n&&(r.start=A.timezone[t](r.start,n),r.end=A.timezone[t](r.end,n)),i&&delete r.uid;return e}function l(e,t){for(var n,i=e.length,r=0;i>r;r++)if(n=e[r],n.uid===t)return n}function c(e,t,n){return e=n?A.timezone.convert(e,t,n):A.timezone.remove(e,t)}function d(e){var t,n,i,r,o,a,s,l,d,u,h,p;return e.filter("[name=end]").length&&(t=e.closest(".k-scheduler-edit-form"),n=t.find("[name=start]:visible"),i=t.find("[name=end]:visible"),i[0]&&n[0]&&(a=A.widgetInstance(n,A.ui),s=A.widgetInstance(i,A.ui),l=t.data("kendoEditable"),d=l?l.options.model:null,a&&s?(r=a.value(),o=s.value()):(r=A.parseDate(n.val()),o=A.parseDate(i.val())),r&&o))?(d&&(u=n.attr(A.attr("timezone")),h=d.startTimezone,p=d.endTimezone,h=h||p,p=p||h,h&&(r=c(r,h,u),o=c(o,p,u))),o>=r):!0}function u(e,t,n,i){for(var r=e.length,o=[],a=0;r>a;a++)o=o.concat(e[a].expand(t,n,i));return o}function h(e){return delete e.name,delete e.prefix,delete e.remove,delete e.edit,delete e.add,delete e.navigate,e}function p(t){return function(n){e(A.format('<select data-{0}bind="value:{1}">',A.ns,t.field)).appendTo(n).kendoDropDownList({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,optionLabel:"None",template:A.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}}function f(t){return function(n){e(A.format('<select data-{0}bind="value:{1}">',A.ns,t.field)).appendTo(n).kendoMultiSelect({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,itemTemplate:A.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField),tagTemplate:A.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}}function g(t){return function(n){var i,r,o="",a=t.dataSource.view();for(i=0,r=a.length;r>i;i++)o+=A.format('<option value="{0}">{1}</option>',A.getter(t.dataValueField)(a[i]),A.getter(t.dataTextField)(a[i]));e(A.format('<select data-{0}bind="value:{1}" multiple="multiple" data-{0}value-primitive="{3}">{2}</select>',A.ns,t.field,o,t.valuePrimitive)).appendTo(n)}}function m(e,t){var n,i=e.end.getTime()-e.start.getTime(),r=new Date(e.start.getTime());return A.date.setTime(r,t),n=new Date(r.getTime()),A.date.setTime(n,i,!0),{start:r,end:n}}var v,_,y,w,b,k,x,C,S,T,D,A=window.kendo,E=A.date,M=A.support.input,P=E.MS_PER_DAY,I=E.getDate,z=A.date.getMilliseconds,F=A.recurrence,R=A.keys,B=A.ui,L=B.Widget,O="string",H=B.Popup,N=B.Calendar,V=A.data.DataSource,U=e.isPlainObject,W=e.extend,j=e.proxy,G=Object.prototype.toString,q=e.isArray,$=".kendoScheduler",Y="click",K="change",Q="cancel",X="remove",J="save",Z="add",et="edit",tt=/(?:value:start|value:end)(?:,|$)/,nt=I(new Date),it="recurrenceException",rt="Are you sure you want to delete this event?",ot="Do you want to delete only this event occurrence or the whole series?",at="Do you want to edit only this event occurrence or the whole series?",st='<a class="k-button #=className#" #=attr# href="\\#">#=text#</a>',lt=A.template('<div class="k-floatwrap k-header k-scheduler-toolbar"># if (pdf) { #<ul class="k-reset k-scheduler-tools"><li><a role="button" href="\\#" class="k-button k-pdf"><span class="k-icon k-i-pdf"></span>${messages.pdf}</a></li></ul># } #<ul class="k-reset k-scheduler-navigation"><li class="k-state-default k-header k-nav-today"><a role="button" href="\\#" class="k-link">${messages.today}</a></li><li class="k-state-default k-header k-nav-prev"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-w"></span></a></li><li class="k-state-default k-header k-nav-next"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-e"></span></a></li><li class="k-state-default k-nav-current"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-calendar"></span><span data-#=ns#bind="text: formattedDate"></span></a></li></ul><ul class="k-reset k-header k-scheduler-views">#for(var view in views){#<li class="k-state-default k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>#}#</ul></div>'),ct=A.template('<div class="k-floatwrap k-header k-scheduler-toolbar"><ul class="k-reset k-header k-scheduler-navigation"><li class="k-state-default k-nav-today"><a role="button" href="\\#" class="k-link">${messages.today}</a></li></ul><ul class="k-reset k-header k-scheduler-views">#for(var view in views){#<li class="k-state-default k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>#}#</ul></div><div class="k-floatwrap k-header k-scheduler-toolbar"><ul class="k-reset k-header k-scheduler-navigation"><li class="k-state-default k-nav-prev"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-w"></span></a></li><li class="k-state-default k-nav-current"><span data-#=ns#bind="text: formattedDate"></span></li><li class="k-state-default k-nav-next"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-e"></span></a></li></ul></div>'),dt=function(t,n){var o={name:n.field},a=M.date?"":A.attr("role")+'="datepicker" ',s=A.attr("role")+'="datetimepicker" ',l=n.model.isAllDay,c=A.attr("validate")+"='"+!l+"'",d=A.attr("validate")+"='"+l+"'";i(o,n),r(o,n),e('<input type="datetime-local" required '+A.attr("type")+'="date" '+s+A.attr("bind")+'="value:'+n.field+',invisible:isAllDay" '+c+"/>").attr(o).appendTo(t),e('<input type="date" required '+A.attr("type")+'="date" '+a+A.attr("bind")+'="value:'+n.field+',visible:isAllDay" '+d+"/>").attr(o).appendTo(t),e("<span "+A.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},ut=function(t,n){var o={name:n.field},a=n.model.isAllDay,s=A.attr("validate")+"='"+!a+"' ",l=A.attr("validate")+"='"+a+"' ";i(o,n),r(o,n),e('<input type="text" required '+A.attr("type")+'="date" '+A.attr("role")+'="datetimepicker" '+A.attr("bind")+'="value:'+n.field+',invisible:isAllDay" '+s+"/>").attr(o).appendTo(t),e('<input type="text" required '+A.attr("type")+'="date" '+A.attr("role")+'="datepicker" '+A.attr("bind")+'="value:'+n.field+',visible:isAllDay" '+l+"/>").attr(o).appendTo(t),e("<span "+A.attr("bind")+'="text: '+n.field+'Timezone"></span>').appendTo(t),"end"===n.field&&e("<span "+A.attr("bind")+'="text: startTimezone, invisible: endTimezone"></span>').appendTo(t),e("<span "+A.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},ht=function(t,n){e("<div "+A.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).appendTo(t).kendoRecurrenceEditor({start:n.model.start,timezone:n.timezone,messages:n.messages})},pt=function(t,n){e("<div "+A.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).appendTo(t).kendoMobileRecurrenceEditor({start:n.model.start,timezone:n.timezone,messages:n.messages,pane:n.pane,value:n.model[n.field]})},ft=function(t,i){var r=n(i.model,i.messages.noTimezone);e('<a href="#" class="k-button k-timezone-button" data-bind="invisible:isAllDay">'+r+"</a>").click(i.click).appendTo(t)},gt=function(t,n){e('<a href="#" class="k-button" data-bind="invisible:isAllDay">'+n.messages.timezoneEditorButton+"</a>").click(n.click).appendTo(t)},mt=function(t,n){e("<div "+A.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).toggle(n.visible).appendTo(t).kendoMobileTimezoneEditor({optionLabel:n.noTimezone})},vt=function(t,n){e("<div "+A.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).toggle(n.visible).appendTo(t).kendoTimezoneEditor({optionLabel:n.noTimezone})},_t=A.Class.extend({init:function(t,n){var i=t.timezone;this.reader=n,n.model&&(this.model=n.model),this.timezone=i,this.data=o(e.proxy(this.data,this),i),this.serialize=a(e.proxy(this.serialize,this),i)},errors:function(e){return this.reader.errors(e)},parse:function(e){return this.reader.parse(e)},data:function(e){return this.reader.data(e)},total:function(e){return this.reader.total(e)},groups:function(e){return this.reader.groups(e)},aggregates:function(e){return this.reader.aggregates(e)},serialize:function(e){return this.reader.serialize(e)}}),yt=A.data.Model.define({init:function(e){var t=this;A.data.Model.fn.init.call(t,e),t._defaultId=t.defaults[t.idField]},_time:function(e){var t=this[e],n=e+"Time";return this[n]?this[n]-A.date.toUtcTime(A.date.getDate(t)):z(t)},_date:function(e){var t=e+"Time";return this[t]?this[t]-this._time(e):A.date.getDate(this[e])},clone:function(t,n){var i=this.uid,r=new this.constructor(e.extend({},this.toJSON(),t));return n||(r.uid=i),r},duration:function(){var e=this.end,t=this.start,n=(e.getTimezoneOffset()-t.getTimezoneOffset())*A.date.MS_PER_MINUTE;return e-t-n},expand:function(e,t,n){return F?F.expand(this,e,t,n):[this]},update:function(e){for(var t in e)this.set(t,e[t]);this.startTime&&this.set("startTime",A.date.toUtcTime(this.start)),this.endTime&&this.set("endTime",A.date.toUtcTime(this.end))},isMultiDay:function(){return this.isAllDay||this.duration()>=A.date.MS_PER_DAY},isException:function(){return!this.isNew()&&this.recurrenceId},isOccurrence:function(){return this.isNew()&&this.recurrenceId},isRecurring:function(){return!(!this.recurrenceRule&&!this.recurrenceId)},isRecurrenceHead:function(){return!(!this.id||!this.recurrenceRule)},toOccurrence:function(t){return t=e.extend(t,{recurrenceException:null,recurrenceRule:null,recurrenceId:this.id||this.recurrenceId}),t[this.idField]=this.defaults[this.idField],this.clone(t,!0)},toJSON:function(){var e=A.data.Model.fn.toJSON.call(this);return e.uid=this.uid,delete e.startTime,delete e.endTime,e},shouldSerialize:function(e){return A.data.Model.fn.shouldSerialize.call(this,e)&&"_defaultId"!==e},set:function(e,t){var n,i,r,o=this.isAllDay||!1;A.data.Model.fn.set.call(this,e,t),"isAllDay"==e&&t!=o&&(n=A.date.getDate(this.start),i=new Date(this.end),r=A.date.getMilliseconds(i),0===r&&t&&(r=P),this.set("start",n),t===!0?(A.date.setTime(i,-r),n>i&&(i=n)):A.date.setTime(i,P-r),this.set("end",i))},id:"id",fields:{id:{type:"number"},title:{defaultValue:"",type:"string"},start:{type:"date",validation:{required:!0}},startTimezone:{type:"string"},end:{type:"date",validation:{required:!0,dateCompare:{value:d,message:"End date should be greater than or equal to the start date"}}},endTimezone:{type:"string"},recurrenceRule:{defaultValue:"",type:"string"},recurrenceException:{defaultValue:"",type:"string"},isAllDay:{type:"boolean",defaultValue:!1},description:{type:"string"}}}),wt=V.extend({init:function(e){V.fn.init.call(this,W(!0,{},{schema:{modelBase:yt,model:yt}},e)),this.reader=new _t(this.options.schema,this.reader)},expand:function(e,t){var n=this.view(),i={};return e&&t&&(t=new Date(t.getTime()+P-1),i={logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lte",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:new Date(e.getTime()+P-1)},{field:"end",operator:"gte",value:e}]}]},n=new A.data.Query(u(n,e,t,this.reader.timezone)).filter(i).toArray()),n},cancelChanges:function(e){e&&e.isOccurrence()&&this._removeExceptionDate(e),V.fn.cancelChanges.call(this,e)},insert:function(e,t){if(t){if(!(t instanceof yt)){var n=t;t=this._createNewModel(),t.accept(n)}return(t.isRecurrenceHead()||t.recurrenceId)&&(t=t.recurrenceId?t:t.toOccurrence(),this._addExceptionDate(t)),V.fn.insert.call(this,e,t)}},remove:function(e){return e.isRecurrenceHead()?this._removeExceptions(e):e.isRecurring()&&this._addExceptionDate(e),V.fn.remove.call(this,e)},_removeExceptions:function(e){for(var t=this.data().slice(0),n=t.shift(),i=e.id;n;)n.recurrenceId===i&&V.fn.remove.call(this,n),n=t.shift();e.set(it,"")},_removeExceptionDate:function(e){var t,n;e.recurrenceId&&(t=this.get(e.recurrenceId),t&&(n=e.start,t.set(it,t.recurrenceException.replace(F.toExceptionString(n,this.reader.timezone),""))))},_addExceptionDate:function(e){var t=e.start,n=this.reader.timezone,i=this.get(e.recurrenceId),r=i.recurrenceException||"";F.isException(r,t,n)||i.set(it,r+F.toExceptionString(t,n))}});wt.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},n=t.data;if(t.data=n,!(t instanceof wt)&&t instanceof A.data.DataSource)throw Error("Incorrect DataSource type. Only SchedulerDataSource instances are supported");return t instanceof wt?t:new wt(t)},W(!0,A.data,{SchedulerDataSource:wt,SchedulerDataReader:_t,SchedulerEvent:yt}),v={update:{text:"Save",className:"k-primary k-scheduler-update"},canceledit:{text:"Cancel",className:"k-scheduler-cancel"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-primary k-scheduler-delete",iconClass:"k-icon"}},_={mobile:{dateRange:dt,timezonePopUp:ft,timezone:mt,recurrence:pt,description:'<textarea name="description" class="k-textbox"/>',multipleResources:g,resources:p},desktop:{dateRange:ut,timezonePopUp:gt,timezone:vt,recurrence:ht,description:'<textarea name="description" class="k-textbox"/>',multipleResources:f,resources:p}},y=A.Observable.extend({init:function(e,t){A.Observable.fn.init.call(this),this.element=e,this.options=W(!0,{},this.options,t),this.createButton=this.options.createButton,this.toggleDateValidationHandler=j(this._toggleDateValidation,this)},_toggleDateValidation:function(t){if("isAllDay"==t.field){var n,i,r,o=this.container,a=this.editable.options.model.isAllDay,s=A.attr("bind");o.find("["+s+"*=end],["+s+"*=start]").each(function(){n=e(this),tt.test(n.attr(s))&&(i=n.is("["+A.attr("role")+"=datetimepicker],[type*=datetime]"),r=a!==i,n.attr(A.attr("validate"),r))})}},fields:function(e,t){var n,i,r=this,o=r.options.messages,a=r.options.timezone,s=function(e){e.preventDefault(),r._initTimezoneEditor(t,this)},l=[{field:"title",title:o.editor.title},{field:"start",title:o.editor.start,editor:e.dateRange,timezone:a},{field:"end",title:o.editor.end,editor:e.dateRange,timezone:a},{field:"isAllDay",title:o.editor.allDayEvent}];A.timezone.windows_zones&&(l.push({field:"timezone",title:o.editor.timezone,editor:e.timezonePopUp,click:s,messages:o.editor,model:t}),l.push({field:"startTimezone",title:o.editor.startTimezone,editor:e.timezone,noTimezone:o.editor.noTimezone}),l.push({field:"endTimezone",title:o.editor.endTimezone,editor:e.timezone,noTimezone:o.editor.noTimezone})),t.recurrenceId||l.push({field:"recurrenceRule",title:o.editor.repeat,editor:e.recurrence,timezone:a,messages:o.recurrenceEditor,pane:this.pane}),"description"in t&&l.push({field:"description",title:o.editor.description,editor:e.description});for(n=0;this.options.resources.length>n;n++)i=this.options.resources[n],l.push({field:i.field,title:i.title,editor:i.multiple?e.multipleResources(i):e.resources(i)});return l},end:function(){return this.editable.end()},_buildEditTemplate:function(e,t,n){var i,r,o,a,s=this.options.messages,l=W({},A.Template,this.options.templateSettings),c=l.paramName,d=this.options.editable.template,u="";if(d)typeof d===O&&(d=window.unescape(d)),u+=A.template(d,l)(e);else for(i=0,r=t.length;r>i;i++)o=t[i],"startTimezone"===o.field&&(u+='<div class="k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones" style="display:none">',u+='<div class="k-edit-form-container">',u+='<div class="k-edit-label"></div>',u+='<div class="k-edit-field"><label class="k-check"><input class="k-timezone-toggle" type="checkbox" />'+s.editor.separateTimezones+"</label></div>"),u+='<div class="k-edit-label"><label for="'+o.field+'">'+(o.title||o.field||"")+"</label></div>",!e.editable||e.editable(o.field)?(n.push(o),u+="<div "+A.attr("container-for")+'="'+o.field+'" class="k-edit-field"></div>'):(a="#:",o.field?(o=A.expr(o.field,c),a+=o+"==null?'':"+o):a+="''",a+="#",a=A.template(a,l),u+='<div class="k-edit-field">'+a(e)+"</div>"),"endTimezone"===o.field&&(u+=this._createEndTimezoneButton());return u},_createEndTimezoneButton:function(){return"</div></div>"},_revertTimezones:function(e){e.set("startTimezone",this._startTimezone),e.set("endTimezone",this._endTimezone),delete this._startTimezone,delete this._endTimezone}}),w=y.extend({init:function(){y.fn.init.apply(this,arguments),this.pane=A.mobile.ui.Pane.wrap(this.element),this.pane.element.parent().css("height",this.options.height),this.view=this.pane.view(),this._actionSheetButtonTemplate=A.template('<li><a #=attr# class="k-button #=className#" href="\\#">#:text#</a></li>'),this._actionSheetPopupOptions=e(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"}},options:{animations:{left:"slide",right:"slide:right"}},destroy:function(){this.close(),this.unbind(),this.pane.destroy()},_initTimezoneEditor:function(t){var i,r=this,o=r.pane,a=r.options.messages,s=r.timezoneView,l=r.container.find(".k-scheduler-timezones"),c=l.find(".k-timezone-toggle"),d=l.find(".k-edit-label:last").add(l.find(".k-edit-field:last")),u=function(e){if("startTimezone"===e.field){var n=t.startTimezone;c.prop("disabled",!n),n||(d.hide(),t.set("endTimezone",""),c.prop("checked",!1))}};r._startTimezone=t.startTimezone||"",r._endTimezone=t.endTimezone||"",s||(i='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+a.cancel+"</a>"+a.editor.timezoneTitle+'<a href="#" class="k-button k-scheduler-update">'+a.save+"</a></div></div>",this.timezoneView=s=o.append(i),s.contentElement().append(l.show()),s.element.on(Y+$,".k-scheduler-cancel, .k-scheduler-update",function(i){var s,l;i.preventDefault(),i.stopPropagation(),e(this).hasClass("k-scheduler-cancel")&&r._revertTimezones(t),t.unbind("change",u),s=o.element.find("#edit").data("kendoMobileView"),l=n(t,a.editor.noTimezone),s.contentElement().find(".k-timezone-button").text(l),o.navigate(s,r.options.animations.right)}),c.click(function(){d.toggle(c.prop("checked")),t.set("endTimezone","")}),t.bind("change",u)),c.prop("checked",t.endTimezone).prop("disabled",!t.startTimezone),t.endTimezone?d.show():d.hide(),o.navigate(s,r.options.animations.left)},_createActionSheetButton:function(e){return e.template=this._actionSheetButtonTemplate,this.createButton(e)},showDialog:function(t){var n,i,r="",o='<ul><li class="km-actionsheet-title">'+t.title+"</li>",a=this.element.find(".k-event["+A.attr("uid")+"='"+t.model.uid+"']");for(this.container&&(a=this.container.find(".k-scheduler-delete"),a[0]&&(r="phone")),n=0;t.buttons.length>n;n++)o+=this._createActionSheetButton(t.buttons[n]);
o+="</ul>",i=e(o).appendTo(this.pane.view().element).kendoMobileActionSheet({type:r,cancel:this.options.messages.cancel,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(n){var r=i.element.find("li:not(.km-actionsheet-cancel) > .k-button").index(e(n.currentTarget));r>-1&&(i.close(),t.buttons[r].click())},popup:this._actionSheetPopupOptions}).data("kendoMobileActionSheet"),i.open(a)},editEvent:function(t){var n,i,r,o,a,s=this.pane,l="",c=this.options.messages,d=c.save,u=c.destroy,h=c.cancel,p=c.editor.editorTitle;return l+='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list" id="edit" '+A.attr("uid")+'="'+t.uid+'"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+h+"</a>"+p+'<a href="#" class="k-button k-scheduler-update">'+d+"</a></div>",n=this.fields(_.mobile,t),i=this,r=[],l+=this._buildEditTemplate(t,n,r),!t.isNew()&&this.options.editable&&this.options.editable.destroy!==!1&&(l+='<div class="k-edit-buttons"><a href="#" class="k-scheduler-delete k-button">'+u+"</a></div>"),l+="</div>",o=s.append(l),a=this.container=o.element,this.editable=a.kendoEditable({fields:r,model:t,clearContainer:!1,target:i.options.target,validateOnBlur:!0}).data("kendoEditable"),a.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){e(this).next().children("input").click()}),this.trigger("edit",{container:a,model:t})?this.trigger("cancel",{container:a,model:t}):(a.on(Y+$,"a.k-scheduler-edit, a.k-scheduler-cancel, a.k-scheduler-update, a.k-scheduler-delete",function(n){var r,o;n.preventDefault(),n.stopPropagation(),r=e(this),r.hasClass("k-scheduler-edit")?s.navigate("#edit",i.options.animations.right):(o="cancel",r.hasClass("k-scheduler-update")?o="save":r.hasClass("k-scheduler-delete")&&(o="remove"),i.trigger(o,{container:a,model:t}))}),s.navigate(o,i.options.animations.left),t.bind("change",i.toggleDateValidationHandler)),this.editable},_views:function(){return this.pane.element.find(A.roleSelector("view")).not(this.view.element)},close:function(){var e,t,n,i;if(this.container){for(this.pane.navigate("",this.options.animations.right),e=this._views(),n=0,i=e.length;i>n;n++)t=e.eq(n).data("kendoMobileView"),t&&t.purge();e.remove(),this.container=null,this.editable&&(this.editable.options.model.unbind("change",this.toggleDateValidationHandler),this.editable.destroy(),this.editable=null),this.timezoneView=null}}}),b=y.extend({destroy:function(){this.close(),this.unbind()},editEvent:function(t){var n,i,r,o=this,a=o.options.editable,s="<div "+A.attr("uid")+'="'+t.uid+'" class="k-popup-edit-form k-scheduler-edit-form"><div class="k-edit-form-container">',l=o.options.messages,c=l.save,d=l.cancel,u=l.destroy,h=this.fields(_.desktop,t),p=[];return s+=this._buildEditTemplate(t,h,p),i=U(a)?a.window:{},s+='<div class="k-edit-buttons k-state-default">',s+=this.createButton({name:"update",text:c,attr:n})+this.createButton({name:"canceledit",text:d,attr:n}),t.isNew()||a.destroy===!1||(s+=this.createButton({name:"delete",text:u,attr:n})),s+="</div></div></div>",r=this.container=e(s).appendTo(o.element).eq(0).kendoWindow(W({modal:!0,resizable:!1,draggable:!0,title:l.editor.editorTitle,visible:!1,close:function(e){e.userTriggered&&o.trigger(Q,{container:r,model:t})&&e.preventDefault()}},i)),o.editable=r.kendoEditable({fields:p,model:t,clearContainer:!1,validateOnBlur:!0,target:o.options.target}).data("kendoEditable"),o.trigger(et,{container:r,model:t})?o.trigger(Q,{container:r,model:t}):(r.data("kendoWindow").center().open(),r.on(Y+$,"a.k-scheduler-cancel",function(e){e.preventDefault(),e.stopPropagation(),o.trigger(Q,{container:r,model:t})}),r.on(Y+$,"a.k-scheduler-update",function(e){e.preventDefault(),e.stopPropagation(),o.trigger("save",{container:r,model:t})}),r.on(Y+$,"a.k-scheduler-delete",function(e){e.preventDefault(),e.stopPropagation(),o.trigger(X,{container:r,model:t})}),t.bind("change",o.toggleDateValidationHandler)),o.editable},close:function(){var e=this,t=function(){e.editable&&(e.editable.options.model.unbind("change",e.toggleDateValidationHandler),e.editable.destroy(),e.editable=null,e.container=null),e.popup&&(e.popup.destroy(),e.popup=null)};e.editable?(e._timezonePopup&&e._timezonePopup.data("kendoWindow")&&(e._timezonePopup.data("kendoWindow").destroy(),e._timezonePopup=null),e.container.is(":visible")?e.container.data("kendoWindow").bind("deactivate",t).close():t()):t()},_createEndTimezoneButton:function(){var e=this.options.messages,t="";return t+='<div class="k-edit-buttons k-state-default">',t+=this.createButton({name:"savetimezone",text:e.save})+this.createButton({name:"canceltimezone",text:e.cancel}),t+="</div></div></div>"},showDialog:function(t){var n,i,r,o=A.format("<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>",t.text);for(o+='<div class="k-edit-buttons k-state-default">',n=0;t.buttons.length>n;n++)o+=this.createButton(t.buttons[n]);o+="</div></div></div>",i=this.element,this.popup&&this.popup.destroy(),r=this.popup=e(o).appendTo(i).eq(0).on("click",".k-button",function(n){n.preventDefault(),r.close();var i=e(n.currentTarget).index();t.buttons[i].click()}).kendoWindow({modal:!0,resizable:!1,draggable:!1,title:t.title,visible:!1,close:function(){this.destroy(),i.focus()}}).getKendoWindow(),r.center().open()},_initTimezoneEditor:function(e,t){var n,i=this,r=i.container.find(".k-scheduler-timezones"),o=r.find(".k-timezone-toggle"),a=r.find(".k-edit-label:last").add(r.find(".k-edit-field:last")),s=r.find(".k-scheduler-savetimezone"),l=r.find(".k-scheduler-canceltimezone"),c=i._timezonePopup,d=function(t){if("startTimezone"===t.field){var n=e.startTimezone;o.prop("disabled",!n),n||(a.hide(),e.set("endTimezone",""),o.prop("checked",!1))}};i._startTimezone=e.startTimezone,i._endTimezone=e.endTimezone,c||(i._timezonePopup=c=r.kendoWindow({modal:!0,resizable:!1,draggable:!0,title:i.options.messages.editor.timezoneEditorTitle,visible:!1,close:function(n){e.unbind("change",d),n.userTriggered&&i._revertTimezones(e),t&&t.focus()}}),o.click(function(){a.toggle(o.prop("checked")),e.set("endTimezone","")}),s.click(function(e){e.preventDefault(),n.close()}),l.click(function(t){t.preventDefault(),i._revertTimezones(e),n.close()}),e.bind("change",d)),o.prop("checked",e.endTimezone).prop("disabled",!e.startTimezone),e.endTimezone?a.show():a.hide(),n=c.data("kendoWindow"),n.center().open()}}),k=L.extend({init:function(t,n){var i=this;L.fn.init.call(i,t,n),i.options.views&&i.options.views.length||(i.options.views=["day","week"]),i.resources=[],i._initModel(),i._wrapper(),i._views(),i._toolbar(),i._dataSource(),i._resources(),i._resizeHandler=j(i.resize,i),i.wrapper.on("mousedown"+$+" selectstart"+$,function(e){e.preventDefault()}),i.options.editable&&i.options.editable.resize!==!1&&i._resizable(),i._movable(),e(window).on("resize"+$,i._resizeHandler),i.options.messages&&i.options.messages.recurrence&&(F.options=i.options.messages.recurrence),i._selectable(),i._ariaId=A.guid(),i._createEditor()},_isMobile:function(){var e=this.options;return e.mobile===!0&&A.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile},_isMobilePhoneView:function(){var e=this.options;return e.mobile===!0&&A.support.mobileOS&&!A.support.mobileOS.tablet||"phone"===e.mobile},_selectable:function(){var t,n=this,i=n.wrapper,r=A.support.mobileOS?"touchend":"mousedown";n.options.selectable&&(n._tabindex(),i.on(r+$,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",function(e){var t=e.which,r=e.button,o=A.support.browser,a=t&&3===t||r&&2==r;A.support.mobileOS&&e.isDefaultPrevented()||(a||n._createSelection(e.currentTarget),i.focus(),o.msie&&9>o.version&&setTimeout(function(){i.focus()}))}),t=e.proxy(n._mouseMove,n),i.on("mousedown"+$,".k-scheduler-header-all-day td, .k-scheduler-content td",function(e){var n=e.which,r=e.button,o=n&&3===n||r&&2==r;o||i.on("mousemove"+$,".k-scheduler-header-all-day td, .k-scheduler-content td",t)}),i.on("mouseup"+$+" mouseleave"+$,function(){i.off("mousemove"+$,".k-scheduler-header-all-day td, .k-scheduler-content td",t)}),i.on("focus"+$,function(){n._selection||n._createSelection(e(".k-scheduler-content").find("td:first")),n._select()}),i.on("focusout"+$,function(){n.view().clearSelection(),n._ctrlKey=n._shiftKey=!1}),i.on("keydown"+$,j(n._keydown,n)),i.on("keyup"+$,function(e){n._ctrlKey=e.ctrlKey,n._shiftKey=e.shiftKey}))},_select:function(){var e,t,n,i,r=this,o=r.view(),a=r.wrapper,s=o.current(),l=r._selection;s&&(s.removeAttribute("id"),s.removeAttribute("aria-label"),a.removeAttr("aria-activedescendant")),o.select(l),s=o.current(),s&&r._old!==s&&(t=l,n=r._selectedEvents(),i=o._selectedSlots,n[0]?(t=n[0]||l,e=A.format(r.options.messages.ariaEventLabel,t.title,t.start,t.start)):e=A.format(r.options.messages.ariaSlotLabel,t.start,t.end),s.setAttribute("id",r._ariaId),s.setAttribute("aria-label",e),a.attr("aria-activedescendant",r._ariaId),r._old=s,r.trigger("change",{start:l.start,end:l.end,events:n,slots:i,resources:o._resourceBySlot(l)}))},_selectedEvents:function(){for(var e,t=this._selection.events,n=t.length,i=0,r=[];n>i;i++)e=this.occurrenceByUid(t[i]),e&&r.push(e);return r},_mouseMove:function(t){var n=this;clearTimeout(n._moveTimer),n._moveTimer=setTimeout(function(){var i,r,o,a=n.view(),s=n._selection;s&&(i=a.selectionByElement(e(t.currentTarget)),i&&s.groupIndex===i.groupIndex&&(r=i.startDate(),o=i.endDate(),r>=s.end?s.backward=!1:s.start>=o&&(s.backward=!0),s.backward?s.start=r:s.end=o,n._select()))},5)},_viewByIndex:function(e){var t,n=this.views;for(t in n){if(!e)return t;e--}},_keydown:function(t){var n=this,i=t.keyCode,r=n.view(),o=r.options.editable,a=n._selection,s=t.shiftKey;n._ctrlKey=t.ctrlKey,n._shiftKey=t.shiftKey,i===R.TAB?r.moveToEvent(a,s)&&(n._select(),t.preventDefault()):o&&i===R.ENTER?a.events.length?o.update!==!1&&n.editEvent(a.events[0]):o.create!==!1&&(a.isAllDay&&(a=e.extend({},a,{end:A.date.addDays(a.end,-1)})),n.addEvent(W({},a,r._resourceBySlot(a)))):i===R.DELETE&&o!==!1&&o.destroy!==!1?n.removeEvent(a.events[0]):i>=49&&57>=i?n.view(n._viewByIndex(i-49)):r.move(a,i,s)&&(r.inRange(a)?n._select():n.date(a.start),t.preventDefault()),n._adjustSelectedDate()},_createSelection:function(t){var n,i,r;this._selection&&(this._ctrlKey||this._shiftKey)||(this._selection={events:[],groupIndex:0}),t=e(t),r=this._selection,n=t.attr(A.attr("uid")),i=this.view().selectionByElement(t),i&&(r.groupIndex=i.groupIndex||0),n&&(i=l(this._data,n)),i&&i.uid&&(n=[i.uid]),this._updateSelection(i,n),this._adjustSelectedDate()},_updateSelection:function(e,t){var n,i,r=this._selection;e&&r&&(n=this.view(),e.uid&&(e=n._updateEventForSelection(e)),this._shiftKey&&r.start&&r.end?(i=r.end>e.end,r.end=e.endDate?e.endDate():e.end,i&&n._timeSlotInterval&&A.date.setTime(r.end,-n._timeSlotInterval())):(r.start=e.startDate?e.startDate():e.start,r.end=e.endDate?e.endDate():e.end),r.isAllDay="isDaySlot"in e?e.isDaySlot:e.isAllDay,r.index=e.index,r.events=this._ctrlKey?r.events.concat(t||[]):t||[])},options:{name:"Scheduler",date:nt,editable:!0,autoBind:!0,snap:!0,mobile:!1,timezone:"",allDaySlot:!0,min:new Date(1900,0,1),max:new Date(2099,11,31),toolbar:null,messages:{today:"Today",pdf:"Export to PDF",save:"Save",cancel:"Cancel",destroy:"Delete",deleteWindowTitle:"Delete event",ariaSlotLabel:"Selected from {0:t} to {1:t}",ariaEventLabel:"{0} on {1:D} at {2:t}",views:{day:"Day",week:"Week",workWeek:"Work Week",agenda:"Agenda",month:"Month",timeline:"Timeline",timelineWeek:"Timeline Week",timelineWorkWeek:"Timeline Work Week",timelineMonth:"Timeline Month"},recurrenceMessages:{deleteWindowTitle:"Delete Recurring Item",deleteWindowOccurrence:"Delete current occurrence",deleteWindowSeries:"Delete the series",editWindowTitle:"Edit Recurring Item",editWindowOccurrence:"Edit current occurrence",editWindowSeries:"Edit the series"},editor:{title:"Title",start:"Start",end:"End",allDayEvent:"All day event",description:"Description",repeat:"Repeat",timezone:" ",startTimezone:"Start timezone",endTimezone:"End timezone",separateTimezones:"Use separate start and end time zones",timezoneEditorTitle:"Timezones",timezoneEditorButton:"Time zone",timezoneTitle:"Time zones",noTimezone:"No timezone",editorTitle:"Event"}},height:null,width:null,resources:[],group:{resources:[],direction:"horizontal"},views:[],selectable:!1},events:[X,et,Q,J,"add","dataBinding","dataBound","moveStart","move","moveEnd","resizeStart","resize","resizeEnd","navigate","change"],destroy:function(){var t,n=this;L.fn.destroy.call(n),n.dataSource&&(n.dataSource.unbind(K,n._refreshHandler),n.dataSource.unbind("progress",n._progressHandler),n.dataSource.unbind("error",n._errorHandler)),n.calendar&&(n.calendar.destroy(),n.popup.destroy()),n.view()&&n.view().destroy(),n._editor&&n._editor.destroy(),this._moveDraggable&&this._moveDraggable.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),t=n.element.add(n.wrapper).add(n.toolbar).add(n.popup),t.off($),clearTimeout(n._moveTimer),n._model=null,n.toolbar=null,n.element=null,e(window).off("resize"+$,n._resizeHandler),A.destroy(n.wrapper)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch()},items:function(){return this.wrapper.find(".k-event, .k-task")},_movable:function(){var n,i,r,o,a,s,l=this,c=l._isMobile(),d=l.options.editable&&l.options.editable.move!==!1,u=l.options.editable&&l.options.editable.resize!==!1;(d||u&&c)&&(l._moveDraggable=new A.ui.Draggable(l.element,{distance:0,filter:".k-event",ignore:".k-resize-handle",holdToDrag:c}),d&&l._moveDraggable.bind("dragstart",function(e){var o=l.view(),d=e.currentTarget;return o.options.editable&&o.options.editable.move!==!1?c&&!d.hasClass("k-event-active")?(l.element.find(".k-event-active").removeClass("k-event-active"),e.preventDefault(),t):(a=l.occurrenceByUid(d.attr(A.attr("uid"))),s=a.clone(),o._updateEventForMove(s),n=o._slotByPosition(e.x.startLocation,e.y.startLocation),r=n.startOffset(e.x.startLocation,e.y.startLocation,l.options.snap),i=n,(!n||l.trigger("moveStart",{event:a}))&&e.preventDefault(),t):(e.preventDefault(),t)}).bind("drag",function(e){var t,n,c=l.view(),d=c._slotByPosition(e.x.location,e.y.location);d&&(o=d.startOffset(e.x.location,e.y.location,l.options.snap),t=o-r,c._updateMoveHint(s,d.groupIndex,t),n=m(s,t),l.trigger("move",{event:a,slot:{element:d.element,start:d.startDate(),end:d.endDate()},resources:c._resourceBySlot(d),start:n.start,end:n.end})?c._updateMoveHint(s,d.groupIndex,t):i=d)}).bind("dragend",function(t){var c,d,u,h,p,f,g;l.view()._removeMoveHint(),c=o-r,d=m(s,c),u=d.start,h=d.end,p=l.view()._resourceBySlot(i),f=l.view()._resourceBySlot(n),g=l.trigger("moveEnd",{event:a,slot:{element:i.element,start:i.startDate(),end:i.endDate()},start:u,end:h,resources:p}),g||s.start.getTime()==u.getTime()&&s.end.getTime()==h.getTime()&&A.stringify(p)==A.stringify(f)||(l.view()._updateEventForMove(a),l._updateEvent(null,a,e.extend({start:u,end:h},p))),t.currentTarget.removeClass("k-event-active"),this.cancelHold()}).bind("dragcancel",function(){l.view()._removeMoveHint(),this.cancelHold()}),c&&(l._moveDraggable.bind("hold",function(e){l.element.find(".k-scheduler-monthview").length&&e.preventDefault(),l.element.find(".k-event-active").removeClass("k-event-active"),e.currentTarget.addClass("k-event-active")}),l._moveDraggable.userEvents.bind("press",function(e){e.preventDefault()})))},_resizable:function(){function t(e){var t,n={"k-resize-e":"east","k-resize-w":"west","k-resize-n":"north","k-resize-s":"south"};for(t in n)if(e.hasClass(t))return n[t]}var n,i,r,o,a,s=this;s._resizeDraggable=new A.ui.Draggable(s.element,{distance:0,filter:".k-resize-handle",dragstart:function(t){var l=e(t.currentTarget),c=l.closest(".k-event"),d=c.attr(A.attr("uid")),u=s.view();r=s.occurrenceByUid(d),o=r.clone(),u._updateEventForResize(o),a=u._slotByPosition(t.x.startLocation,t.y.startLocation),s.trigger("resizeStart",{event:r})&&t.preventDefault(),n=A.date.toUtcTime(o.start),i=A.date.toUtcTime(o.end)},drag:function(l){var c,d,u,h,p,f;a&&(c=e(l.currentTarget),d=t(c),u=s.view(),h=u._slotByPosition(l.x.location,l.y.location),h&&a.groupIndex==h.groupIndex&&(a=h,p=n,f=i,"south"==d?!a.isDaySlot&&a.end-A.date.toUtcTime(o.start)>=u._timeSlotInterval()&&(i=o.isAllDay?a.startOffset(l.x.location,l.y.location,s.options.snap):a.endOffset(l.x.location,l.y.location,s.options.snap)):"north"==d?!a.isDaySlot&&A.date.toUtcTime(o.end)-a.start>=u._timeSlotInterval()&&(n=a.startOffset(l.x.location,l.y.location,s.options.snap)):"east"==d?a.isDaySlot&&A.date.toUtcTime(A.date.getDate(a.endDate()))>=A.date.toUtcTime(A.date.getDate(o.start))?i=o.isAllDay?a.startOffset(l.x.location,l.y.location,s.options.snap):a.endOffset(l.x.location,l.y.location,s.options.snap):!a.isDaySlot&&a.end-A.date.toUtcTime(o.start)>=u._timeSlotInterval()&&(i=a.endOffset(l.x.location,l.y.location,s.options.snap)):"west"==d&&(a.isDaySlot&&A.date.toUtcTime(A.date.getDate(o.end))>=A.date.toUtcTime(A.date.getDate(a.startDate()))?n=a.startOffset(l.x.location,l.y.location,s.options.snap):!a.isDaySlot&&A.date.toUtcTime(o.end)-a.start>=u._timeSlotInterval()&&(n=a.startOffset(l.x.location,l.y.location,s.options.snap))),s.trigger("resize",{event:r,slot:{element:a.element,start:a.startDate(),end:a.endDate()},start:A.timezone.toLocalDate(n),end:A.timezone.toLocalDate(i),resources:u._resourceBySlot(a)})?(n=p,i=f):u._updateResizeHint(o,a.groupIndex,n,i)))},dragend:function(l){var c,d=e(l.currentTarget),u=new Date(o.start.getTime()),h=new Date(o.end.getTime()),p=t(d);s.view()._removeResizeHint(),"south"==p?h=A.timezone.toLocalDate(i):"north"==p?u=A.timezone.toLocalDate(n):"east"==p?h=a.isDaySlot?A.date.getDate(A.timezone.toLocalDate(i)):A.timezone.toLocalDate(i):"west"==p&&(a.isDaySlot?(u=new Date(A.timezone.toLocalDate(n)),u.setHours(0),u.setMinutes(0)):u=A.timezone.toLocalDate(n)),c=s.trigger("resizeEnd",{event:r,slot:{element:a.element,start:a.startDate(),end:a.endDate()},start:u,end:h,resources:s.view()._resourceBySlot(a)}),!c&&h.getTime()>=u.getTime()&&(o.start.getTime()!=u.getTime()||o.end.getTime()!=h.getTime())&&(s.view()._updateEventForResize(r),s._updateEvent(p,r,{start:u,end:h})),a=null,r=null},dragcancel:function(){s.view()._removeResizeHint(),a=null,r=null}})},_updateEvent:function(e,t,n){var i=this,r=function(e,t){try{i._preventRefresh=!0,e.update(n),i._convertDates(e)}finally{i._preventRefresh=!1}i.trigger(J,{event:e})||(t&&t(),i._updateSelection(e),i.dataSource.sync())},o=function(e){return e.recurrenceRule?i.dataSource.getByUid(e.uid):i.dataSource.get(e.recurrenceId)},a=function(){var a,s,l=o(t);("south"==e||"north"==e)&&(n.start&&(a=A.date.getDate(l.start),A.date.setTime(a,z(n.start)),n.start=a),n.end&&(s=A.date.getDate(l.end),A.date.setTime(s,z(n.end)),n.end=s)),i.dataSource._removeExceptions(l),r(l)},s=function(){var e=o(t),n=function(){i._convertDates(e)},a=e.toOccurrence({start:t.start,end:t.end});r(i.dataSource.add(a),n)},l=i.options.messages.recurrenceMessages;t.recurrenceRule||t.isOccurrence()?i.showDialog({model:t,title:l.editWindowTitle,text:l.editRecurring?l.editRecurring:at,buttons:[{text:l.editWindowOccurrence,click:s},{text:l.editWindowSeries,click:a}]}):r(i.dataSource.getByUid(t.uid))},_modelForContainer:function(t){return t=e(t).closest("["+A.attr("uid")+"]"),this.dataSource.getByUid(t.attr(A.attr("uid")))},showDialog:function(e){this._editor.showDialog(e)},focus:function(){this.wrapper.focus()},_confirmation:function(e,t){var n,i,r,o=this.options.editable;o===!0||o.confirmation!==!1?(n=this.options.messages,i=typeof o.confirmation===O?o.confirmation:rt,r=[{name:"destroy",text:n.destroy,click:function(){e()}}],this._isMobile()&&A.mobile.ui.Pane||r.push({name:"canceledit",text:n.cancel,click:function(){e(!0)}}),this.showDialog({model:t,text:i,title:n.deleteWindowTitle,buttons:r})):e()},addEvent:function(e){var t,n,i=this._editor.editable,r=this.dataSource;e=e||{},n=this.trigger("add",{event:e}),!n&&(i&&i.end()||!i)&&(this.cancelEvent(),e&&e.toJSON&&(e=e.toJSON()),t=r.add(e),t&&(this.cancelEvent(),this._editEvent(t)))},saveEvent:function(){var e,t,n,i=this._editor;i&&(e=i.editable,t=i.container,n=this._modelForContainer(t),t&&e&&e.end()&&!this.trigger(J,{container:t,event:n})&&(n.isRecurrenceHead()&&this.dataSource._removeExceptions(n),n.dirty||n.isOccurrence()||this._convertDates(n,"remove"),this.dataSource.sync()))},cancelEvent:function(){var e,t=this._editor,n=t.container;n&&(e=this._modelForContainer(n),e&&e.isOccurrence()&&(this._convertDates(e,"remove"),this._convertDates(this.dataSource.get(e.recurrenceId),"remove")),this.dataSource.cancelChanges(e),t.close())},editEvent:function(e){var t="string"==typeof e?this.occurrenceByUid(e):e;t&&(this.cancelEvent(),t.isRecurring()?this._editRecurringDialog(t):this._editEvent(t))},_editEvent:function(e){this._createPopupEditor(e)},_editRecurringDialog:function(e){var t=this,n=function(){e.isException()?t._editEvent(e):t.addEvent(e)},i=function(){e.recurrenceId&&(e=t.dataSource.get(e.recurrenceId)),t._editEvent(e)},r=t.options.messages.recurrenceMessages;t.showDialog({model:e,title:r.editWindowTitle,text:r.editRecurring?r.editRecurring:at,buttons:[{text:r.editWindowOccurrence,click:n},{text:r.editWindowSeries,click:i}]})},_createButton:function(e){var t=e.template||st,n=typeof e===O?e:e.name||e.text,i={className:"k-scheduler-"+(n||"").replace(/\s/g,""),text:n,attr:""};if(!(n||U(e)&&e.template))throw Error("Custom commands should have name specified");return U(e)?(e.className&&(e.className+=" "+i.className),"edit"===n&&U(e.text)&&(e=W(!0,{},e),e.text=e.text.edit),i=W(!0,i,v[n],e)):i=W(!0,i,v[n]),A.template(t)(i)},_convertDates:function(e,t){var n=this.dataSource.reader.timezone,i=e.startTimezone,r=e.endTimezone,o=e.start,a=e.start;t=t||"apply",i=i||r,r=r||i,i&&(n?"apply"===t?(o=A.timezone.convert(e.start,n,i),a=A.timezone.convert(e.end,n,r)):(o=A.timezone.convert(e.start,i,n),a=A.timezone.convert(e.end,r,n)):(o=A.timezone[t](e.start,i),a=A.timezone[t](e.end,r)),e._set("start",o),e._set("end",a))},_createEditor:function(){var e,n=this;e=n._editor=this._isMobile()&&A.mobile.ui.Pane?new w(this.wrapper,W({},this.options,{target:this,timezone:n.dataSource.reader.timezone,resources:n.resources,createButton:j(this._createButton,this)})):new b(this.wrapper,W({},this.options,{target:this,createButton:j(this._createButton,this),timezone:n.dataSource.reader.timezone,resources:n.resources})),e.bind("cancel",function(e){return n.trigger("cancel",{container:e.container,event:e.model})?(e.preventDefault(),t):(n.cancelEvent(),n.focus(),t)}),e.bind("edit",function(e){n.trigger(et,{container:e.container,event:e.model})&&e.preventDefault()}),e.bind("save",function(){n.saveEvent()}),e.bind("remove",function(e){n.removeEvent(e.model)})},_createPopupEditor:function(e){var t=this._editor;(!e.isNew()||e.isOccurrence())&&(e.isOccurrence()&&this._convertDates(e.recurrenceId?this.dataSource.get(e.recurrenceId):e),this._convertDates(e)),this.editable=t.editEvent(e)},removeEvent:function(e){var t=this,n="string"==typeof e?t.occurrenceByUid(e):e;n&&(n.isRecurring()?t._deleteRecurringDialog(n):t._confirmation(function(e){e||t._removeEvent(n)},n))},occurrenceByUid:function(e){var t=this.dataSource.getByUid(e);return t||(t=l(this._data,e)),t},occurrencesInRange:function(e,t){return new A.data.Query(this._data).filter({logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lt",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:e},{field:"end",operator:"gt",value:e}]}]}).toArray()},_removeEvent:function(e){this.trigger(X,{event:e})||this.dataSource.remove(e)&&this.dataSource.sync()},_deleteRecurringDialog:function(e){var t=this,n=e,i=function(){var e=n.recurrenceId?n:n.toOccurrence(),i=t.dataSource.get(e.recurrenceId);t._convertDates(i),t._removeEvent(e)},r=function(){n.recurrenceId&&(n=t.dataSource.get(n.recurrenceId)),t._removeEvent(n)},o=t.options.messages.recurrenceMessages;t.showDialog({model:e,title:o.deleteWindowTitle,text:o.deleteRecurring?o.deleteRecurring:ot,buttons:[{text:o.deleteWindowOccurrence,click:i},{text:o.deleteWindowSeries,click:r}]})},_unbindView:function(e){var t=this;t.angular("cleanup",function(){return{elements:t.items()}}),e.destroy()},_bindView:function(e){var t=this;t.options.editable&&(t._viewRemoveHandler&&e.unbind(X,t._viewRemoveHandler),t._viewRemoveHandler=function(e){t.removeEvent(e.uid)},e.bind(X,t._viewRemoveHandler),t._viewAddHandler&&e.unbind(Z,t._viewAddHandler),t._viewAddHandler=function(e){t.addEvent(e.eventInfo)},e.bind(Z,this._viewAddHandler),t._viewEditHandler&&e.unbind(et,t._viewEditHandler),t._viewEditHandler=function(e){t.editEvent(e.uid)},e.bind(et,this._viewEditHandler)),t._viewNavigateHandler&&e.unbind("navigate",t._viewNavigateHandler),t._viewNavigateHandler=function(e){var n,i;e.view&&(n="isWorkDay"in e,i=n?"changeWorkDay":"changeView",t.trigger("navigate",{view:e.view,isWorkDay:e.isWorkDay,action:i,date:e.date})||(n&&(t._workDayMode=e.isWorkDay),t._selectView(e.view),t.date(e.date)))},e.bind("navigate",t._viewNavigateHandler),t._viewActivateHandler&&e.unbind("activate",t._viewActivateHandler),t._viewActivateHandler=function(){var e=this;t._selection&&(e.constrainSelection(t._selection),t._select(),t._adjustSelectedDate())},e.bind("activate",t._viewActivateHandler)},_selectView:function(e){var t=this;e&&t.views[e]&&(t._selectedView&&t._unbindView(t._selectedView),t._selectedView=t._renderView(e),t._selectedViewName=e,t.toolbar.find(".k-scheduler-views li").removeClass("k-state-selected").end().find(".k-view-"+e.replace(/\./g,"\\.").toLowerCase()).addClass("k-state-selected"))},view:function(e){var n=this;return e?(n._selectView(e),n.rebind(),t):n._selectedView},_renderView:function(e){var t=this._initializeView(e);return this._bindView(t),this._model.set("formattedDate",t.dateForTitle()),t},resize:function(e){var t=this.getSize(),n=this._size,i=this.view();i&&i.groups&&(e||!n||t.width!==n.width||t.height!==n.height)&&(this.refresh({action:"resize"}),this._size=t)},_adjustSelectedDate:function(){var e=this._model.selectedDate,t=this._selection,n=t.start;n&&!A.date.isInDateRange(e,I(n),I(t.end))&&e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate())},_initializeView:function(e){var t,n,i=this.views[e];if(i){if(t=U(i),n=i.type,typeof n===O&&(n=A.getter(i.type)(window)),!n)throw Error("There is no such view");i=new n(this.wrapper,h(W(!0,{},this.options,t?i:{},{resources:this.resources,date:this.date(),showWorkHours:this._workDayMode})))}return i},_views:function(){var e,t,n,i,r,o,a,s,l,c=this.options.views;for(this.views={},a=0,s=c.length;s>a;a++)l=!1,e=c[a],i=U(e),i?(o=r=e.type?e.type:e,typeof o!==O&&(r=e.title,l=!0)):o=r=e,t=x[r],t&&!l&&(e.type=t.type,t.title=this.options.messages.views[r],"day"===t.type?t.messages={allDay:this.options.messages.allDay}:"agenda"===t.type&&(t.messages={event:this.options.messages.event,date:this.options.messages.date,time:this.options.messages.time})),e=W({title:r},t,i?e:{}),r&&(this.views[r]=e,(!n||e.selected)&&(n=r));n&&(this._selectedViewName=n)},rebind:function(){this.dataSource.fetch()},_dataSource:function(){var e=this,t=e.options,n=t.dataSource;n=q(n)?{data:n}:n,!t.timezone||n instanceof wt?n instanceof wt&&(t.timezone=n.schema?n.schema.timezone:""):n=W(!0,n,{schema:{timezone:t.timezone}}),e.dataSource&&e._refreshHandler?e.dataSource.unbind(K,e._refreshHandler).unbind("progress",e._progressHandler).unbind("error",e._errorHandler):(e._refreshHandler=j(e.refresh,e),e._progressHandler=j(e._requestStart,e),e._errorHandler=j(e._error,e)),e.dataSource=A.data.SchedulerDataSource.create(n).bind(K,e._refreshHandler).bind("progress",e._progressHandler).bind("error",e._errorHandler),e.options.dataSource=e.dataSource},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_progress:function(e){var t=this.element.find(".k-scheduler-content");A.ui.progress(t,e)},_resources:function(){var t,n,i,r,o,a=this,s=a.options.resources;for(t=0;s.length>t;t++){if(n=s[t],i=n.field,r=n.dataSource,!i||!r)throw Error('The "field" and "dataSource" options of the scheduler resource are mandatory.');a.resources.push({field:i,name:n.name||i,title:n.title||i,dataTextField:n.dataTextField||"text",dataValueField:n.dataValueField||"value",dataColorField:n.dataColorField||"color",valuePrimitive:null!=n.valuePrimitive?n.valuePrimitive:!0,multiple:n.multiple||!1,dataSource:A.data.DataSource.create(r)})}o=e.map(a.resources,function(e){return e.dataSource.fetch()}),e.when.apply(null,o).then(function(){a.options.autoBind?a.view(a._selectedViewName):a._selectView(a._selectedViewName)})},_initModel:function(){var e=this;e._model=A.observable({selectedDate:new Date(this.options.date),formattedDate:""}),e._model.bind("change",function(t){"selectedDate"===t.field&&e.view(e._selectedViewName)})},_wrapper:function(){var e=this,t=e.options,n=t.height,i=t.width;e.wrapper=e.element.addClass("k-widget k-scheduler k-floatwrap").attr("role","grid").attr("aria-multiselectable",!0),e._isMobile()&&e.wrapper.addClass("k-scheduler-mobile"),e._isMobilePhoneView()&&e.wrapper.addClass("k-scheduler-phone"),n&&e.wrapper.height(n),i&&e.wrapper.width(i)},date:function(e){return null!=e&&I(e)>=I(this.options.min)&&I(e)<=I(this.options.max)&&this._model.set("selectedDate",e),I(this._model.get("selectedDate"))},_toolbar:function(){var n,i,r=this,o=r.options,a=[];o.toolbar&&(a=e.isArray(o.toolbar)?o.toolbar:[o.toolbar]),n=this._isMobilePhoneView()?ct:lt,i=e(n({messages:o.messages,pdf:e.grep(a,function(e){return"pdf"==e||"pdf"==e.name}).length>0,ns:A.ns,views:r.views})),r.wrapper.append(i),r.toolbar=i,A.bind(r.toolbar,r._model),i.on(Y+$,".k-pdf",function(e){e.preventDefault(),r.saveAsPDF()}),i.on(Y+$,".k-scheduler-navigation li",function(n){var i=e(this),o=new Date(r.date()),a="";if(n.preventDefault(),i.hasClass("k-nav-today"))a="today",o=new Date;else if(i.hasClass("k-nav-next"))a="next",o=r.view().nextDate();else if(i.hasClass("k-nav-prev"))a="previous",o=r.view().previousDate();else if(i.hasClass("k-nav-current")&&!r._isMobilePhoneView())return r._showCalendar(),t;r.trigger("navigate",{view:r._selectedViewName,action:a,date:o})||r.date(o)}),i.on(Y+$,".k-scheduler-views li",function(t){t.preventDefault();var n=e(this).attr(A.attr("name"));r.trigger("navigate",{view:n,action:"changeView",date:r.date()})||r.view(n)}),i.find("li").hover(function(){e(this).addClass("k-state-hover")},function(){e(this).removeClass("k-state-hover")})},_showCalendar:function(){var t=this,n=t.toolbar.find(".k-nav-current"),i=e('<div class="k-calendar-container"><div class="k-scheduler-calendar"/></div>');t.popup||(t.popup=new H(i,{anchor:n,activate:function(){t.calendar||(t.calendar=new N(this.element.find(".k-scheduler-calendar"),{change:function(){var e=this.value();t.trigger("navigate",{view:t._selectedViewName,action:"changeDate",date:e})||(t.date(e),t.popup.close())},min:t.options.min,max:t.options.max})),t.calendar.value(t.date())},copyAnchorStyles:!1})),t.popup.open()},refresh:function(e){var t=this,n=this.view();this._progress(!1),this.angular("cleanup",function(){return{elements:t.items()}}),e=e||{},n&&(e&&"itemchange"===e.action&&(this._editor.editable||this._preventRefresh)||this.trigger("dataBinding",{action:e.action||"rebind",index:e.index,items:e.items})||(e&&"resize"===e.action||!this._editor||this._editor.close(),this._data=this.dataSource.expand(n.startDate(),n.endDate()),n.render(this._data),this.trigger("dataBound")))},slotByPosition:function(e,t){var n,i=this.view();return i._slotByPosition?(n=i._slotByPosition(e,t),n?{startDate:n.startDate(),endDate:n.endDate(),groupIndex:n.groupIndex,element:n.element,isDaySlot:n.isDaySlot}:null):null},slotByElement:function(t){var n=e(t).offset();
return this.slotByPosition(n.left,n.top)},resourcesBySlot:function(e){return this.view()._resourceBySlot(e)}}),x={day:{type:"kendo.ui.DayView"},week:{type:"kendo.ui.WeekView"},workWeek:{type:"kendo.ui.WorkWeekView"},agenda:{type:"kendo.ui.AgendaView"},month:{type:"kendo.ui.MonthView"},timeline:{type:"kendo.ui.TimelineView"},timelineWeek:{type:"kendo.ui.TimelineWeekView"},timelineWorkWeek:{type:"kendo.ui.TimelineWorkWeekView"},timelineMonth:{type:"kendo.ui.TimelineMonthView"}},B.plugin(k),A.PDFMixin&&A.PDFMixin.extend(k.prototype),C=L.extend({init:function(e,t){var n=this,i=A.timezone.windows_zones;if(!i||!A.timezone.zones_titles)throw Error("kendo.timezones.min.js is not included.");L.fn.init.call(n,e,t),n.wrapper=n.element,n._zonesQuery=new A.data.Query(i),n._zoneTitleId=A.guid(),n._zoneTitlePicker(),n._zonePicker(),n.value(n.options.value)},options:{name:"TimezoneEditor",value:"",optionLabel:"No timezone"},events:["change"],_zoneTitlePicker:function(){var t=this,n=e('<input id="'+t._zoneTitleId+'"/>').appendTo(t.wrapper);t._zoneTitle=new A.ui.DropDownList(n,{dataSource:A.timezone.zones_titles,dataValueField:"other_zone",dataTextField:"name",optionLabel:t.options.optionLabel,cascade:function(){this.value()||t._zone.wrapper.hide()}})},_zonePicker:function(){var t=this,n=e("<input />").appendTo(this.wrapper);t._zone=new A.ui.DropDownList(n,{dataValueField:"zone",dataTextField:"territory",dataSource:t._zonesQuery.data,cascadeFrom:t._zoneTitleId,cascade:function(){t._value=this.value(),t.trigger("change")},dataBound:function(){t._value=this.value(),this.wrapper.toggle(this.dataSource.view().length>1)}}),t._zone.wrapper.hide()},destroy:function(){L.fn.destroy.call(this),A.destroy(this.wrapper)},value:function(e){var n,i=this;return e===t?i._value:(n=i._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0],n?(i._zoneTitle.value(n.other_zone),i._zone.value(n.zone)):i._zoneTitle.value(""),t)}}),B.plugin(C),S=A.template('<option value="#=other_zone#">#=name#</option>'),T=A.template('<option value="#=zone#">#=territory#</option>'),D=L.extend({init:function(e,t){var n=this,i=A.timezone.windows_zones;if(!i||!A.timezone.zones_titles)throw Error("kendo.timezones.min.js is not included.");L.fn.init.call(n,e,t),n.wrapper=n.element,n._zonesQuery=new A.data.Query(i),n._zoneTitlePicker(),n._zonePicker(),n.value(n.options.value)},options:{name:"MobileTimezoneEditor",optionLabel:"No timezone",value:""},events:["change"],_bindZones:function(e){var t=e?this._filter(e):[];this._zone.html(this._options(t,T))},_filter:function(e){return this._zonesQuery.filter({field:"other_zone",operator:"eq",value:e}).data},_options:function(e,t,n){var i=0,r="",o=e.length;for(n&&(r+=t({other_zone:"",name:n}));o>i;i++)r+=t(e[i]);return r},_zoneTitlePicker:function(){var t=this,n=t._options(A.timezone.zones_titles,S,t.options.optionLabel);t._zoneTitle=e("<select>"+n+"</select>").appendTo(t.wrapper).change(function(){var e=this.value,n=t._zone;t._bindZones(e),e&&n[0].children.length>1?n.show():n.hide(),t._value=n[0].value,t.trigger("change")})},_zonePicker:function(){var t=this;t._zone=e('<select style="display:none"></select>').appendTo(this.wrapper).change(function(){t._value=this.value,t.trigger("change")}),t._bindZones(t._zoneTitle.val()),t._value=t._zone[0].value},destroy:function(){L.fn.destroy.call(this),A.destroy(this.wrapper)},value:function(e){var n,i=this,r=i._zone,o="",a="";return e===t?i._value:(n=i._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0],n&&(a=n.zone,o=n.other_zone),i._zoneTitle.val(o),i._bindZones(o),r.val(a),a=r[0].value,a&&r[0].children.length>1?r.show():r.hide(),i._value=a,t)}}),B.plugin(D)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.ui.Widget,i=e.proxy,r=Math.abs,o=20,a=t.Class.extend({init:function(n,i,o){o=e.extend({minXDelta:30,maxYDelta:20,maxDuration:1e3},o),new t.UserEvents(n,{surface:o.surface,allowSelection:!0,start:function(e){2*r(e.x.velocity)>=r(e.y.velocity)&&e.sender.capture()},move:function(e){var t=e.touch,n=e.event.timeStamp-t.startTime,a=t.x.initialDelta>0?"right":"left";r(t.x.initialDelta)>=o.minXDelta&&r(t.y.initialDelta)<o.maxYDelta&&o.maxDuration>n&&(i({direction:a,touch:t,target:t.target}),t.cancel())}})}}),s=n.extend({init:function(e,r){function o(e){return function(t){s._triggerTouch(e,t)}}function a(e){return function(t){s.trigger(e,{touches:t.touches,distance:t.distance,center:t.center,event:t.event})}}var s=this;n.fn.init.call(s,e,r),r=s.options,e=s.element,s.events=new t.UserEvents(e,{filter:r.filter,surface:r.surface,minHold:r.minHold,multiTouch:r.multiTouch,allowSelection:!0,press:o("touchstart"),hold:o("hold"),tap:i(s,"_tap"),gesturestart:a("gesturestart"),gesturechange:a("gesturechange"),gestureend:a("gestureend")}),r.enableSwipe?(s.events.bind("start",i(s,"_swipestart")),s.events.bind("move",i(s,"_swipemove"))):(s.events.bind("start",i(s,"_dragstart")),s.events.bind("move",o("drag")),s.events.bind("end",o("dragend"))),t.notify(s)},events:["touchstart","dragstart","drag","dragend","tap","doubletap","hold","swipe","gesturestart","gesturechange","gestureend"],options:{name:"Touch",surface:null,global:!1,multiTouch:!1,enableSwipe:!1,minXDelta:30,maxYDelta:20,maxDuration:1e3,minHold:800,doubleTapTimeout:800},cancel:function(){this.events.cancel()},_triggerTouch:function(e,t){this.trigger(e,{touch:t.touch,event:t.event})&&t.preventDefault()},_tap:function(e){var n=this,i=n.lastTap,r=e.touch;i&&n.options.doubleTapTimeout>r.endTime-i.endTime&&t.touchDelta(r,i).distance<o?(n._triggerTouch("doubletap",e),n.lastTap=null):(n._triggerTouch("tap",e),n.lastTap=r)},_dragstart:function(e){this._triggerTouch("dragstart",e)},_swipestart:function(e){2*r(e.x.velocity)>=r(e.y.velocity)&&e.sender.capture()},_swipemove:function(e){var t=this,n=t.options,i=e.touch,o=e.event.timeStamp-i.startTime,a=i.x.initialDelta>0?"right":"left";r(i.x.initialDelta)>=n.minXDelta&&r(i.y.initialDelta)<n.maxYDelta&&n.maxDuration>o&&(t.trigger("swipe",{direction:a,touch:e.touch}),i.cancel())}});window.jQuery.fn.kendoMobileSwipe=function(e,t){this.each(function(){new a(this,e,t)})},t.ui.plugin(s)}(window.kendo.jQuery),function(e){function t(e){var t,n,i=[],r=e.className;for(t=0,n=e.level;n>t;t++)i.push(o("span",{className:r}));return i}function n(){var t=i._activeElement();"body"!==t.nodeName.toLowerCase()&&e(t).blur()}var i=window.kendo,r=i.dom,o=r.element,a=r.text,s=i.support.mobileOS,l=i.ui,c=l.Widget,d=e.extend,u=e.map,h=e.isFunction,p=i.keys,f={title:"Title",start:"Start Time",end:"End Time",percentComplete:"% Done",parentId:"Predecessor ID",id:"ID",orderId:"Order ID"},g="string",m=".kendoGanttList",v="click",_=".",y={wrapper:"k-treelist k-grid k-widget",header:"k-header",alt:"k-alt",editCell:"k-edit-cell",group:"k-treelist-group",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",selected:"k-state-selected",icon:"k-icon",iconCollapse:"k-i-collapse",iconExpand:"k-i-expand",iconHidden:"k-i-none",iconPlaceHolder:"k-icon k-i-none",input:"k-input",dropPositions:"k-insert-top k-insert-bottom k-add k-insert-middle",dropTop:"k-insert-top",dropBottom:"k-insert-bottom",dropAdd:"k-add",dropMiddle:"k-insert-middle",dropDenied:"k-denied",dragStatus:"k-drag-status",dragClue:"k-drag-clue",dragClueText:"k-clue-text"},w=l.GanttList=c.extend({init:function(e,t){c.fn.init.call(this,e,t),0===this.options.columns.length&&this.options.columns.push("title"),this.dataSource=this.options.dataSource,this._columns(),this._layout(),this._domTrees(),this._header(),this._sortable(),this._editable(),this._selectable(),this._draggable(),this._attachEvents(),this._adjustHeight()},_adjustHeight:function(){this.content.height(this.element.height()-this.header.parent().outerHeight())},destroy:function(){c.fn.destroy.call(this),this._reorderDraggable&&this._reorderDraggable.destroy(),this._tableDropArea&&this._tableDropArea.destroy(),this._contentDropArea&&this._contentDropArea.destroy(),this.touch&&this.touch.destroy(),this.content.off(m),this.header=null,this.content=null,this.levels=null,i.destroy(this.element)},options:{name:"GanttList",selectable:!0,editable:!0},_attachEvents:function(){var t=this,n=w.styles;t.content.on(v+m,"td > span."+n.icon+":not(."+n.iconHidden+")",function(n){var i=e(this),r=t._modelFromElement(i);r.set("expanded",!r.get("expanded")),n.stopPropagation()})},_domTrees:function(){this.headerTree=new r.Tree(this.header[0]),this.contentTree=new r.Tree(this.content[0])},_columns:function(){var e=this.options.columns,t=function(){this.field="",this.title="",this.editable=!1,this.sortable=!1};this.columns=u(e,function(e){return e="string"==typeof e?{field:e,title:f[e]}:e,d(new t,e)})},_layout:function(){var e=this.element,t=w.styles;e.addClass(t.wrapper).append("<div class='"+t.gridHeader+"'><div class='"+t.gridHeaderWrap+"'></div></div>").append("<div class='"+t.gridContentWrap+"'></div>"),this.header=e.find(_+t.gridHeaderWrap),this.content=e.find(_+t.gridContent)},_header:function(){var e=this.headerTree,t=o("colgroup",null,this._cols()),n=o("thead",{role:"rowgroup"},[o("tr",{role:"row"},this._ths())]),i=o("table",{style:{"min-width":this.options.listWidth+"px"},role:"grid"},[t,n]);e.render([i])},_render:function(e){var t,n,i;this.levels=[{field:null,value:0}],t=o("colgroup",null,this._cols()),n=o("tbody",{role:"rowgroup"},this._trs(e)),i=o("table",{style:{"min-width":this.options.listWidth+"px"},tabIndex:0,role:"treegrid"},[t,n]),this.contentTree.render([i]),this.trigger("render")},_ths:function(){var e,t,n,i,r=this.columns,s=[];for(n=0,i=r.length;i>n;n++)e=r[n],t={"data-field":e.field,"data-title":e.title,className:w.styles.header,role:"columnheader"},s.push(o("th",t,[a(e.title)]));return s},_cols:function(){var e,t,n,i,r,a=this.columns,s=[];for(i=0,r=a.length;r>i;i++)e=a[i],n=e.width,t=n&&0!==parseInt(n,10)?{style:{width:typeof n===g?n:n+"px"}}:null,s.push(o("col",t,[]));return s},_trs:function(e){var t,n,i,r,o,a=[],s=[],l=w.styles;for(r=0,o=e.length;o>r;r++)t=e[r],i=this._levels({idx:t.parentId,id:t.id,summary:t.summary}),n={"data-uid":t.uid,"data-level":i,role:"row"},t.summary&&(n["aria-expanded"]=t.expanded),r%2!==0&&s.push(l.alt),t.summary&&s.push(l.group),s.length&&(n.className=s.join(" ")),a.push(this._tds({task:t,attr:n,level:i})),s=[];return a},_tds:function(e){var t,n,i,r=[],a=this.columns;for(n=0,i=a.length;i>n;n++)t=a[n],r.push(this._td({task:e.task,column:t,level:e.level}));return o("tr",e.attr,r)},_td:function(e){var n,r,s=[],l=this.options.resourcesField,c=w.styles,d=e.task,u=e.column,h=d.get(u.field)||[];if(u.field==l){for(n=[],r=0;h.length>r;r++)n.push(i.format("{0} [{1}]",h[r].get("name"),h[r].get("formatedValue")));n=n.join(", ")}else n=u.format?i.format(u.format,h):h;return"title"===u.field&&(s=t({level:e.level,className:c.iconPlaceHolder}),s.push(o("span",{className:c.icon+" "+(d.summary?d.expanded?c.iconCollapse:c.iconExpand:c.iconHidden)}))),s.push(o("span",null,[a(n)])),o("td",{role:"gridcell"},s)},_levels:function(e){var t,n,i,r=this.levels,o=e.summary,a=e.idx,s=e.id;for(n=0,i=r.length;i>n;n++)if(t=r[n],t.field==a)return o&&r.push({field:s,value:t.value+1}),t.value},_sortable:function(){var e,t,n,r,o,a=this.options.resourcesField,s=this.columns,l=this.header.find("th");for(r=0,o=l.length;o>r;r++)e=s[r],e.sortable&&e.field!==a&&(n=l.eq(r),t=n.data("kendoColumnSorter"),t&&t.destroy(),n.attr("data-"+i.ns+"field",e.field).kendoColumnSorter({dataSource:this.dataSource}));l=null},_selectable:function(){var t=this,n=this.options.selectable;n&&this.content.on(v+m,"tr",function(n){var i=e(this);n.ctrlKey?t.clearSelection():t.select(i)})},select:function(e){var t=this.content.find(e),n=w.styles.selected;return t.length?(t.siblings(_+n).removeClass(n).attr("aria-selected",!1).end().addClass(n).attr("aria-selected",!0),void this.trigger("change")):this.content.find(_+n)},clearSelection:function(){var e=this.select();e.length&&(e.removeClass(w.styles.selected),this.trigger("change"))},_setDataSource:function(e){this.dataSource=e},_editable:function(){var t=this,i=w.styles,r="span."+i.icon+":not("+i.iconHidden+")",o=function(){t.editable&&t.editable.end()&&t._closeCell()},a=function(t){var r=e(t.currentTarget);r.hasClass(i.editCell)||n()};this.options.editable&&(this._startEditHandler=function(n){var i=n.currentTarget?e(n.currentTarget):n,r=t._columnFromElement(i);t.editable||r.editable&&t._editCell({cell:i,column:r})},t.content.on("focusin"+m,function(){clearTimeout(t.timer),t.timer=null}).on("focusout"+m,function(){t.timer=setTimeout(o,1)}).on("keydown"+m,function(e){var i,r,a=e.keyCode;switch(a){case p.ENTER:n(),o();break;case p.ESC:t.editable&&(i=t._editableContainer,r=t._modelFromElement(i),t.trigger("cancel",{model:r,cell:i})||t._closeCell(!0))}}),s?t.touch=t.content.kendoTouch({filter:"td",touchstart:function(e){a(e.touch)},doubletap:function(n){e(n.touch.initialTouch).is(r)||t._startEditHandler(n.touch)}}).data("kendoTouch"):t.content.on("mousedown"+m,"td",function(e){a(e)}).on("dblclick"+m,"td",function(n){e(n.target).is(r)||t._startEditHandler(n)}))},_editCell:function(t){var n,r=this.options.resourcesField,o=w.styles,a=t.cell,s=t.column,l=this._modelFromElement(a),c=this.dataSource._createNewModel(l.toJSON()),d=c.fields[s.field]||c[s.field],u=d.validation,p=i.attr("type"),f=i.attr("bind"),g={name:s.field,required:d.validation?d.validation.required===!0:!1};return s.field===r?void s.editor(a,c):(this._editableContent=a.children().detach(),this._editableContainer=a,a.data("modelCopy",c),"date"!==d.type&&"date"!==e.type(d)||!/H|m|s|F|g|u/.test(s.format)||("start"===s.field&&delete d.validation.dateCompare,g[f]="value:"+s.field,g[p]="date",n=function(t,n){e('<input type="text"/>').attr(g).appendTo(t).kendoDateTimePicker({format:n.format})}),this.editable=a.addClass(o.editCell).kendoEditable({fields:{field:s.field,format:s.format,editor:s.editor||n},model:c,clearContainer:!1}).data("kendoEditable"),u&&u.dateCompare&&h(u.dateCompare)&&u.message&&(e("<span "+i.attr("for")+'="'+s.field+'" class="k-invalid-msg"/>').hide().appendTo(a),a.find("[name="+s.field+"]").attr(i.attr("dateCompare-msg"),u.message)),void(this.trigger("edit",{model:l,cell:a})&&this._closeCell(!0)))},_closeCell:function(e){var t=w.styles,n=this._editableContainer,i=this._modelFromElement(n),r=this._columnFromElement(n),o=r.field,a=n.data("modelCopy"),s={};s[o]=a.get(o),n.empty().removeData("modelCopy").removeClass(t.editCell).append(this._editableContent),this.editable.destroy(),this.editable=null,this._editableContainer=null,this._editableContent=null,e||("start"===o&&(s.end=new Date(s.start.getTime()+i.duration())),this.trigger("update",{task:i,updateInfo:s}))},_draggable:function(){var t,n=this,r=null,o=!0,a=w.styles,l="tr["+i.attr("level")+" = 0]:last",c={},u=function(){r=null,t=null,o=!0,c={}},h=function(e){for(var t=e;t;){if(r.get("id")===t.get("id")){o=!1;break}t=n.dataSource.taskParent(t)}},p=function(){var n=e(t).height(),r=i.getOffset(t).top;d(t,{beforeLimit:r+.25*n,afterLimit:r+.75*n})},f=function(e){var n,r=e.location,o=a.dropAdd,s="add",l=parseInt(t.attr(i.attr("level")),10);t.beforeLimit>=r?(n=t.prev(),o=a.dropTop,s="insert-before"):r>=t.afterLimit&&(n=t.next(),o=a.dropBottom,s="insert-after"),n&&parseInt(n.attr(i.attr("level")),10)===l&&(o=a.dropMiddle),c.className=o,c.command=s},g=function(){return n._reorderDraggable.hint.children(_+a.dragStatus).removeClass(a.dropPositions)};this.options.editable&&(this._reorderDraggable=this.content.kendoDraggable({distance:10,holdToDrag:s,group:"listGroup",filter:"tr[data-uid]",ignore:_+a.input,hint:function(t){return e('<div class="'+a.header+" "+a.dragClue+'"/>').css({width:300,paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).append('<span class="'+a.icon+" "+a.dragStatus+'" /><span class="'+a.dragClueText+'"/>')},cursorOffset:{top:-20,left:0},container:this.content,dragstart:function(e){n.editable&&e.preventDefault(),r=n._modelFromElement(e.currentTarget),this.hint.children(_+a.dragClueText).text(r.get("title"))},drag:function(e){o&&(f(e.y),g().addClass(c.className))},dragend:function(){u()},dragcancel:function(){u()}}).data("kendoDraggable"),this._tableDropArea=this.content.kendoDropTargetArea({distance:0,group:"listGroup",filter:"tr[data-uid]",dragenter:function(e){t=e.dropTarget,h(n._modelFromElement(t)),p(),g().toggleClass(a.dropDenied,!o)},dragleave:function(){o=!0,g()},drop:function(){var e=n._modelFromElement(t),i=e.orderId,a={parentId:e.parentId};if(o){switch(c.command){case"add":a.parentId=e.id;break;case"insert-before":a.orderId=e.parentId===r.parentId&&e.orderId>r.orderId?i-1:i;break;case"insert-after":a.orderId=e.parentId===r.parentId&&e.orderId>r.orderId?i:i+1}n.trigger("update",{task:r,updateInfo:a})}}}).data("kendoDropTargetArea"),this._contentDropArea=this.element.kendoDropTargetArea({distance:0,group:"listGroup",filter:_+a.gridContent,drop:function(){var e=n._modelFromElement(n.content.find(l)),t=e.orderId,i={parentId:null,orderId:null!==r.parentId?t+1:t};n.trigger("update",{task:r,updateInfo:i})}}).data("kendoDropTargetArea"))},_modelFromElement:function(e){var t=e.closest("tr"),n=this.dataSource.getByUid(t.attr(i.attr("uid")));return n},_columnFromElement:function(e){var t=e.closest("td"),n=t.parent(),i=n.children().index(t);return this.columns[i]}});d(!0,l.GanttList,{styles:y})}(window.kendo.jQuery),function(e){function t(e){return delete e.name,delete e.prefix,delete e.views,e}function n(e){var t=[],n=e.workWeekStart;for(t.push(n);e.workWeekEnd!=n;)n>6?n-=7:n++,t.push(n);return t}function i(){var t=kendo._activeElement();"body"!==t.nodeName.toLowerCase()&&e(t).blur()}var r,o,a=kendo.ui.Widget,s=kendo.dom.element,l=kendo.dom.text,c=e.isPlainObject,d=e.extend,u=kendo.support.browser,h=kendo.keys,p=kendo.data.Query,f=".kendoGanttTimeline",g="click",m="dblclick",v="keydown",_=".",y=kendo.template("#=kendo.toString(start, 't')#"),w=kendo.template("#=kendo.toString(start, 'ddd M/dd')#"),b=kendo.template("#=kendo.toString(start, 'ddd M/dd')# - #=kendo.toString(kendo.date.addDays(end, -1), 'ddd M/dd')#"),k=kendo.template("#=kendo.toString(start, 'MMM')#"),x=kendo.template("#=kendo.toString(start, 'yyyy')#"),C=kendo.template('<div class="#=styles.marquee#"><div class="#=styles.marqueeColor#"></div></div>'),S=kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper#"><div class="#=styles.tooltipContent#"><div>Start: #=kendo.toString(start, "ddd M/dd HH:mm")#</div><div>End: #=kendo.toString(end, "ddd M/dd HH:mm")#</div></div></div>'),T=kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper#" ><div class="#=styles.tooltipContent#">#=text#%</div><div class="#=styles.tooltipCallout#" style="left:13px;"></div></div>'),D={day:{type:"kendo.ui.GanttDayView"},week:{type:"kendo.ui.GanttWeekView"},month:{type:"kendo.ui.GanttMonthView"},year:{type:"kendo.ui.GanttYearView"}},A={alt:"k-alt",nonWorking:"k-nonwork-hour",header:"k-header",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",rowsTable:"k-gantt-rows",columnsTable:"k-gantt-columns",tasksTable:"k-gantt-tasks",resource:"k-resource",resourceAlt:"k-resource k-alt",task:"k-task",taskSingle:"k-task-single",taskMilestone:"k-task-milestone",taskSummary:"k-task-summary",taskWrap:"k-task-wrap",taskMilestoneWrap:"k-milestone-wrap",resourcesWrap:"k-resources-wrap",taskDot:"k-task-dot",taskDotStart:"k-task-start",taskDotEnd:"k-task-end",taskDragHandle:"k-task-draghandle",taskContent:"k-task-content",taskTemplate:"k-task-template",taskActions:"k-task-actions",taskDelete:"k-task-delete",taskComplete:"k-task-complete",link:"k-link",icon:"k-icon",iconDelete:"k-si-close",taskResizeHandle:"k-resize-handle",taskResizeHandleWest:"k-resize-w",taskResizeHandleEast:"k-resize-e",taskSummaryProgress:"k-task-summary-progress",taskSummaryComplete:"k-task-summary-complete",line:"k-line",lineHorizontal:"k-line-h",lineVertical:"k-line-v",arrowWest:"k-arrow-w",arrowEast:"k-arrow-e",dragHint:"k-drag-hint",dependencyHint:"k-dependency-hint",tooltipWrapper:"k-widget k-tooltip k-popup k-group k-reset",tooltipContent:"k-tooltip-content",tooltipCallout:"k-callout k-callout-s",callout:"k-callout",marquee:"k-marquee k-gantt-marquee",marqueeColor:"k-marquee-color"},E=kendo.ui.GanttView=a.extend({init:function(e,t){a.fn.init.call(this,e,t),this.title=this.options.title||this.options.name,this.header=this.element.find(_+E.styles.gridHeader),this.content=this.element.find(_+E.styles.gridContent),this.contentWidth=this.content.width(),this._workDays=n(this.options),this._headerTree=t.headerTree,this._taskTree=t.taskTree,this._dependencyTree=t.dependencyTree,this._taskCoordinates={}},destroy:function(){a.fn.destroy.call(this),this.headerRow=null,this.header=null,this.content=null,this._dragHint=null,this._resizeHint=null,this._resizeTooltip=null,this._percentCompleteResizeTooltip=null,this._headerTree=null,this._taskTree=null,this._dependencyTree=null},options:{showWorkHours:!1,showWorkDays:!1,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,slotSize:100},renderLayout:function(){this._slots=this._createSlots(),this._tableWidth=this._calculateTableWidth(),this.createLayout(this._layout()),this._slotDimensions(),this._adjustHeight()},_adjustHeight:function(){this.content.height(this.element.height()-this.header.outerHeight())},createLayout:function(e){var t=this._headers(e),n=this._colgroup(),i=this._headerTree,r=s("thead",null,t),o=s("table",{style:{width:this._tableWidth+"px"}},[n,r]);i.render([o]),this.headerRow=this.header.find("table:first tr").last()},_slotDimensions:function(){var e,t,n,i,r=this.headerRow[0].children,o=this._timeSlots();for(n=0,i=r.length;i>n;n++)t=r[n],e=o[n],e.offsetLeft=t.offsetLeft,e.offsetWidth=t.offsetWidth},render:function(e){var t,n=e.length,i=E.styles,r=this._rowsTable(n),o=this._columnsTable(n),a=this._tasksTable(e);this._taskTree.render([r,o,a]),t=this.content.find(_+i.rowsTable),this._contentHeight=t.height(),this._rowHeight=t.find("tr").height(),this.content.find(_+i.columnsTable).height(this._contentHeight)},_rowsTable:function(e){var t,n,i=[],r=E.styles,o=[null,{className:r.alt}];for(n=0;e>n;n++)t=s("tr",o[n%2],[s("td",null,[l(" ")])]),i.push(t);return this._createTable(1,i,{className:r.rowsTable})},_columnsTable:function(){var e,t,n,i,r,o=[],a=E.styles,c=this._timeSlots(),d=c.length,u=0;for(r=0;d>r;r++)t=c[r],i={},n=t.span,u+=n,1!==n&&(i.colspan=n),t.isNonWorking&&(i.className=a.nonWorking),o.push(s("td",i,[l(" ")]));return e=s("tr",null,o),this._createTable(u,[e],{className:a.columnsTable})},_tasksTable:function(e){var t,n,i,r,o,a,l,c=[],d=E.styles,u=this._taskCoordinates={},h=this._calculateMilestoneWidth(),p=Math.round(h.width),f=this.options.resourcesField,g=[d.resource,d.resourceAlt],m=this._calculateResourcesMargin(),v=function(e){var t=i.left,n=t+i.width;r.isMilestone()&&(t-=p/2,n=t+p),u[r.id]={start:t,end:n,rowIndex:e}};for(a=0,l=e.length;l>a;a++)r=e[a],i=this._taskPosition(r),t=s("tr",null),n=s("td",null,[this._renderTask(e[a],i)]),r[f]&&r[f].length&&(o=Math.max(i.width||h.clientWidth,0)+i.left,n.children.push(s("div",{className:d.resourcesWrap,style:{left:o+"px",width:this._tableWidth-(o+m)+"px"}},this._renderResources(r[f],g[a%2])))),t.children.push(n),c.push(t),v(a);return this._createTable(1,c,{className:E.styles.tasksTable})},_createTable:function(e,t,n){var i,r,o,a=[];for(o=0;e>o;o++)a.push(s("col"));return i=s("colgroup",null,a),r=s("tbody",null,t),n.style||(n.style={}),n.style.width=this._tableWidth+"px",s("table",n,[i,r])},_calculateTableWidth:function(){var e,t,n,i,r=this._timeSlots(),o=0,a=0;for(n=0,i=r.length;i>n;n++)e=r[n].span,a+=e,e>o&&(o=e);return t=Math.round(a*this.options.slotSize/o)},_calculateMilestoneWidth:function(){var t,n=E.styles.task+" "+E.styles.taskMilestone,i=e("<div class='"+n+"' style='visibility: hidden; position: absolute'>");return this.content.append(i),t={width:i[0].getBoundingClientRect().width,clientWidth:i[0].clientWidth},i.remove(),t},_calculateResourcesMargin:function(){var t,n=e("<div class='"+E.styles.resourcesWrap+"' style='visibility: hidden; position: absolute'>");return this.content.append(n),t=parseInt(n.css("margin-left"),10),n.remove(),t},_renderTask:function(e,t){var n,i,r,o=this.options.editable,a=t.left,l=E.styles,c=l.taskWrap;return e.summary?i=this._renderSummary(e,t):e.isMilestone()?(i=this._renderMilestone(e,t),c+=" "+l.taskMilestoneWrap):i=this._renderSingleTask(e,t),n=s("div",{className:c,style:{left:a+"px"}},[i]),o&&(n.children.push(s("div",{className:l.taskDot+" "+l.taskDotStart})),n.children.push(s("div",{className:l.taskDot+" "+l.taskDotEnd}))),e.summary||e.isMilestone()||!o||(r=Math.round(t.width*e.percentComplete),n.children.push(s("div",{className:l.taskDragHandle,style:{left:r+"px"}}))),n},_renderSingleTask:function(e,t){var n,i=E.styles,r=Math.round(t.width*e.percentComplete),o=s("div",{className:i.taskContent},[s("div",{className:i.taskTemplate},[l(e.title)])]);return this.options.editable&&(o.children.push(s("span",{className:i.taskActions},[s("a",{className:i.link+" "+i.taskDelete,href:"#"},[s("span",{className:i.icon+" "+i.iconDelete})])])),o.children.push(s("span",{className:i.taskResizeHandle+" "+i.taskResizeHandleWest})),o.children.push(s("span",{className:i.taskResizeHandle+" "+i.taskResizeHandleEast}))),n=s("div",{className:i.task+" "+i.taskSingle,"data-uid":e.uid,style:{width:Math.max(t.width-2,0)+"px"}},[s("div",{className:i.taskComplete,style:{width:r+"px"}}),o])},_renderMilestone:function(e){var t=E.styles,n=s("div",{className:t.task+" "+t.taskMilestone,"data-uid":e.uid});return n},_renderSummary:function(e,t){var n=E.styles,i=Math.round(t.width*e.percentComplete),r=s("div",{className:n.task+" "+n.taskSummary,"data-uid":e.uid,style:{width:t.width+"px"}},[s("div",{className:n.taskSummaryProgress,style:{width:i+"px"}},[s("div",{className:n.taskSummaryComplete,style:{width:t.width+"px"}})])]);return r},_renderResources:function(e,t){var n,i,r,o=[];for(i=0,r=e.length;r>i;i++)n=e[i],o.push(s("span",{className:t,style:{color:n.get("color")}},[l(n.get("name"))]));return o},_taskPosition:function(e){var t=Math.round,n=t(this._offset(e.start)),i=t(this._offset(e.end));return{left:n,width:i-n}},_offset:function(e){var t,n,i,r=this._timeSlots(),o=this._slotIndex("start",e),a=r[o];return e>a.end?a.offsetLeft+a.offsetWidth:a.start>e?a.offsetLeft:(t=e-a.start,n=a.end-a.start,i=t/n*a.offsetWidth,a.offsetLeft+i)},_slotIndex:function(e,t){var n,i=this._timeSlots(),r=0,o=i.length-1;do n=Math.ceil((o+r)/2),t>i[n][e]?r=n:(n===o&&n--,o=n);while(r!==o);return r},_timeByPosition:function(e,t,n){var i,r,o,a=this._slotByPosition(e);return t?n?a.end:a.start:(i=e-(this.content.offset().left-this.content.scrollLeft()),r=a.end-a.start,o=r*((i-a.offsetLeft)/a.offsetWidth),new Date(a.start.getTime()+o))},_slotByPosition:function(e){var t=e-(this.content.offset().left-this.content.scrollLeft()),n=this._slotIndex("offsetLeft",t);return this._timeSlots()[n]},_renderDependencies:function(e){var t,n,i=[],r=this._dependencyTree;for(t=0,n=e.length;n>t;t++)i.push.apply(i,this._renderDependency(e[t]));r.render(i)},_renderDependency:function(e){var t,n,i,r,o=this._taskCoordinates[e.predecessorId],a=this._taskCoordinates[e.successorId];if(!o||!a)return[];for(n="_render"+["FF","FS","SF","SS"][e.type],t=this[n](o,a),i=0,r=t.length;r>i;i++)t[i].attr["data-uid"]=e.uid;return t},_renderFF:function(e,t){var n=this._dependencyFF(e,t,!1);return n[n.length-1].children[0]=this._arrow(!0),n},_renderSS:function(e,t){var n=this._dependencyFF(t,e,!0);return n[0].children[0]=this._arrow(!1),n.reverse()},_renderFS:function(e,t){var n=this._dependencyFS(e,t,!1);return n[n.length-1].children[0]=this._arrow(!1),n},_renderSF:function(e,t){var n=this._dependencyFS(t,e,!0);return n[0].children[0]=this._arrow(!0),n.reverse()},_dependencyFF:function(e,t,n){var i,r=this,o=[],a=0,s=0,l=0,c=0,d=n?"start":"end",u=2,h=1,p=this._rowHeight,f=10,g=e.rowIndex*p+Math.floor(p/2)-1,m=t.rowIndex*p+Math.floor(p/2)-1,v=E.styles,_=function(){o.push(r._line(v.line+" "+v.lineHorizontal,{left:a+"px",top:s+"px",width:l+"px"}))},y=function(){o.push(r._line(v.line+" "+v.lineVertical,{left:a+"px",top:s+"px",height:c+"px"}))};return a=e[d],s=g,l=f,i=t[d]-e[d],i>0!==n&&(l=Math.abs(i)+f),n?(a-=l,l-=h,_()):(_(),a+=l-u),s>m?(c=s-m,c+=u,s=m,y()):(c=m-s,c+=u,y(),s+=c-u),l=Math.abs(a-t[d]),n||(l-=h,a-=l),_(),o},_dependencyFS:function(e,t,n){var i=this,r=[],o=0,a=0,s=0,l=0,c=this._rowHeight,d=Math.floor(c/2),u=10,h=2*u,p=t.start-e.end,f=2,g=1,m=e.rowIndex*c+Math.floor(c/2)-1,v=t.rowIndex*c+Math.floor(c/2)-1,_=E.styles,y=function(){r.push(i._line(_.line+" "+_.lineHorizontal,{left:o+"px",top:a+"px",width:s+"px"}))},w=function(){r.push(i._line(_.line+" "+_.lineVertical,{left:o+"px",top:a+"px",height:l+"px"}))};return o=e.end,a=m,s=u,n&&(o+=g,p>h&&(s=p-(u-f)),s-=g),y(),o+=s-f,h>=p&&(l=n?Math.abs(v-m)-d:d,m>v?(a-=l,l+=f,w()):(w(),a+=l),s=e.end-t.start+h,u>s&&(s=u),o-=s-f,y()),m>v?(l=a-v,a=v,l+=f,w()):(l=v-a,w(),a+=l),s=t.start-o,n||(s-=g),y(),r},_line:function(e,t){return s("div",{className:e,style:t})},_arrow:function(e){return s("span",{className:e?E.styles.arrowWest:E.styles.arrowEast})},_colgroup:function(){var e,t,n,i=this._timeSlots(),r=i.length,o=[];for(e=0;r>e;e++)for(t=0,n=i[e].span;n>t;t++)o.push(s("col"));return s("colgroup",null,o)},_createDragHint:function(e){this._dragHint=e.clone().addClass(E.styles.dragHint).css("cursor","move"),e.parent().append(this._dragHint)},_updateDragHint:function(e){var t=this._offset(e);this._dragHint.css({left:t})},_removeDragHint:function(){this._dragHint.remove(),this._dragHint=null},_createResizeHint:function(t){var n,i,r=E.styles,o=this._taskCoordinates[t.id].rowIndex*this._rowHeight;this._resizeHint=e(C({styles:r})).css({top:0,height:this._contentHeight}),this.content.append(this._resizeHint),this._resizeTooltip=e(S({styles:r,start:t.start,end:t.end})).css({top:0,left:0}),this.content.append(this._resizeTooltip),this._resizeTooltipWidth=this._resizeTooltip.outerWidth(),n=this._resizeTooltip.outerHeight(),i=o-n,0>i&&(i=o+this._rowHeight),this._resizeTooltipTop=i},_updateResizeHint:function(t,n,i){var r=this._offset(t),o=this._offset(n),a=o-r,s=i?r:o,l=this._tableWidth-17,c=this._resizeTooltipWidth;this._resizeHint.css({left:r,width:a}),this._resizeTooltip&&this._resizeTooltip.remove(),s-=Math.round(c/2),0>s?s=0:s+c>l&&(s=l-c),this._resizeTooltip=e(S({styles:E.styles,start:t,end:n})).css({top:this._resizeTooltipTop,left:s,"min-width":c}),this.content.append(this._resizeTooltip)},_removeResizeHint:function(){this._resizeHint.remove(),this._resizeHint=null,this._resizeTooltip.remove(),this._resizeTooltip=null},_updatePercentCompleteTooltip:function(t,n,i){var r,o,a,s;this._removePercentCompleteTooltip(),r=this._percentCompleteResizeTooltip=e(T({styles:E.styles,text:i})).appendTo(this.element),o=Math.round(r.outerWidth()/2),a=r.find(_+E.styles.callout),s=Math.round(a.outerWidth()/2),r.css({top:t-(r.outerHeight()+s),left:n-o}),a.css("left",o-s)},_removePercentCompleteTooltip:function(){this._percentCompleteResizeTooltip&&this._percentCompleteResizeTooltip.remove(),this._percentCompleteResizeTooltip=null},_updateDependencyDragHint:function(e,t,n){this._removeDependencyDragHint(),n?this._creteVmlDependencyDragHint(e,t):this._creteDependencyDragHint(e,t)},_creteDependencyDragHint:function(t,n){var i=E.styles,r=n.x-t.x,o=n.y-t.y,a=Math.sqrt(r*r+o*o),s=Math.atan(o/r);0>r&&(s+=Math.PI),e("<div class='"+i.line+" "+i.lineHorizontal+" "+i.dependencyHint+"'></div>").css({top:t.y,left:t.x,width:a,"transform-origin":"0% 0","-ms-transform-origin":"0% 0","-webkit-transform-origin":"0% 0",transform:"rotate("+s+"rad)","-ms-transform":"rotate("+s+"rad)","-webkit-transform":"rotate("+s+"rad)"}).appendTo(this.content)},_creteVmlDependencyDragHint:function(t,n){var i=e("<kvml:line class='"+E.styles.dependencyHint+"' style='position:absolute; top: 0px;' strokecolor='black' strokeweight='2px' from='"+t.x+"px,"+t.y+"px' to='"+n.x+"px,"+n.y+"px'></kvml:line>").appendTo(this.content);
i[0].outerHTML=i[0].outerHTML},_removeDependencyDragHint:function(){this.content.find(_+E.styles.dependencyHint).remove()},_scrollTo:function(e){var t=e.offset().left,n=e.width(),i=t+n,r=e.closest("tr"),o=r.offset().top,a=r.height(),s=o+a,l=this.content,c=l.offset(),d=c.top,u=l.height(),h=d+u,p=c.left,f=l.width(),g=p+f,m=kendo.support.scrollbar();d>o?l.scrollTop(l.scrollTop()+(o-d)):s>h&&l.scrollTop(l.scrollTop()+(s+m-h)),p>t&&n>f&&g>i||i>g&&f>n?l.scrollLeft(l.scrollLeft()+(i+m-g)):(i>g&&n>f&&t>p||p>t&&f>n)&&l.scrollLeft(l.scrollLeft()+(t-p))},_timeSlots:function(){return this._slots[this._slots.length-1]},_headers:function(e){var t,n,i,r,o,a,c,d,u=[],h=E.styles;for(o=0,a=e.length;a>o;o++){for(t=e[o],n=[],c=0,d=t.length;d>c;c++)i=t[c],r=l(i.text),n.push(s("th",{colspan:i.span,className:h.header+(i.isNonWorking?" "+h.nonWorking:"")},[r]));u.push(s("tr",null,n))}return u},_hours:function(e,t){var n,i,r,o=[],a=this.options,s=a.workDayStart.getHours(),l=a.workDayEnd.getHours(),c=a.hourSpan;for(e=new Date(e),t=new Date(t);t>e;)n=new Date(e),r=n.getHours(),i=r>=s&&l>r,n.setHours(n.getHours()+c),r==n.getHours()&&n.setHours(n.getHours()+2*c),(!a.showWorkHours||i)&&o.push({start:e,end:n,isNonWorking:!i,span:1}),e=n;return o},_days:function(e,t){var n,i,r=[];for(e=new Date(e),t=new Date(t);t>e;)n=kendo.date.nextDay(e),i=this._isWorkDay(e),(!this.options.showWorkDays||i)&&r.push({start:e,end:n,isNonWorking:!i,span:1}),e=n;return r},_weeks:function(e,t){var n,i,r,o=[],a=this.calendarInfo().firstDay;for(e=new Date(e),t=new Date(t);t>e;)n=kendo.date.dayOfWeek(kendo.date.addDays(e,1),a,1),n>t&&(n=t),i=this._days(e,n),r=i.length,r>0&&o.push({start:i[0].start,end:i[r-1].end,span:r}),e=n;return o},_months:function(e,t){var n,i,r,o=[];for(e=new Date(e),t=new Date(t);t>e;)n=new Date(e),n.setMonth(n.getMonth()+1),i=this._days(e,n),r=i.length,r>0&&o.push({start:i[0].start,end:i[r-1].end,span:r}),e=n;return o},_years:function(e,t){var n,i=[];for(e=new Date(e),t=new Date(t);t>e;)n=new Date(e),n.setFullYear(n.getFullYear()+1),i.push({start:e,end:n,span:12}),e=n;return i},_slotHeaders:function(e,t){var n,i,r,o=[];for(i=0,r=e.length;r>i;i++)n=e[i],o.push({text:t(n),isNonWorking:!!n.isNonWorking,span:n.span});return o},_isWorkDay:function(e){var t,n,i=e.getDay(),r=this._workDays;for(t=0,n=r.length;n>t;t++)if(r[t]===i)return!0;return!1},calendarInfo:function(){return kendo.getCulture().calendars.standard}});d(!0,E,{styles:A}),kendo.ui.GanttDayView=E.extend({name:"day",options:{timeHeaderTemplate:y,dayHeaderTemplate:w},range:function(e){this.start=kendo.date.getDate(e.start),this.end=kendo.date.getDate(e.end),(kendo.date.getMilliseconds(e.end)>0||this.end.getTime()===this.start.getTime())&&(this.end=kendo.date.addDays(this.end,1))},_createSlots:function(){var e,t,n,i,r=[],o=this._days(this.start,this.end),a=[];for(n=0,i=o.length;i>n;n++)e=o[n],t=this._hours(e.start,e.end),e.span=t.length,a.push.apply(a,t);return r.push(o),r.push(a),r},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.dayHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.timeHeaderTemplate))),e}}),kendo.ui.GanttWeekView=E.extend({name:"week",options:{dayHeaderTemplate:w,weekHeaderTemplate:b},range:function(e){var t=this.calendarInfo(),n=t.firstDay;this.start=kendo.date.getDate(kendo.date.dayOfWeek(e.start,n,-1)),this.end=kendo.date.getDate(kendo.date.dayOfWeek(e.end,n,1))},_createSlots:function(){var e=[];return e.push(this._weeks(this.start,this.end)),e.push(this._days(this.start,this.end)),e},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.weekHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.dayHeaderTemplate))),e}}),kendo.ui.GanttMonthView=E.extend({name:"month",options:{weekHeaderTemplate:b,monthHeaderTemplate:k},range:function(e){this.start=kendo.date.firstDayOfMonth(e.start),this.end=kendo.date.addDays(kendo.date.getDate(kendo.date.lastDayOfMonth(e.end)),1)},_createSlots:function(){var e=[];return e.push(this._months(this.start,this.end)),e.push(this._weeks(this.start,this.end)),e},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.monthHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.weekHeaderTemplate))),e}}),kendo.ui.GanttYearView=E.extend({name:"year",options:{yearHeaderTemplate:x,monthHeaderTemplate:k},range:function(e){this.start=kendo.date.firstDayOfMonth(new Date(e.start.setMonth(0))),this.end=kendo.date.firstDayOfMonth(new Date(e.end.setMonth(12)))},_createSlots:function(){var t=[],n=this._months(this.start,this.end);return e(n).each(function(e,t){t.span=1}),t.push(this._years(this.start,this.end)),t.push(n),t},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.yearHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.monthHeaderTemplate))),e}}),r={wrapper:"k-timeline k-grid k-widget",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",tasksWrapper:"k-gantt-tables",dependenciesWrapper:"k-gantt-dependencies",task:"k-task",line:"k-line",taskResizeHandle:"k-resize-handle",taskResizeHandleWest:"k-resize-w",taskDragHandle:"k-task-draghandle",taskComplete:"k-task-complete",taskDelete:"k-task-delete",taskWrapActive:"k-task-wrap-active",taskWrap:"k-task-wrap",taskDot:"k-task-dot",taskDotStart:"k-task-start",taskDotEnd:"k-task-end",hovered:"k-state-hover",selected:"k-state-selected",origin:"k-origin"},o=kendo.ui.GanttTimeline=a.extend({init:function(e,t){a.fn.init.call(this,e,t),this.options.views&&this.options.views.length||(this.options.views=["day","week","month"]),this._wrapper(),this._domTrees(),this._views(),this._selectable(),this._draggable(),this._resizable(),this._percentResizeDraggable(),this._createDependencyDraggable(),this._attachEvents()},options:{name:"GanttTimeline",messages:{views:{day:"Day",week:"Week",month:"Month",year:"Year"}},snap:!0,selectable:!0,editable:!0},destroy:function(){a.fn.destroy.call(this),this._unbindView(this._selectedView),this._moveDraggable&&this._moveDraggable.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),this._percentDraggable&&this._percentDraggable.destroy(),this._dependencyDraggable&&this._dependencyDraggable.destroy(),this._headerTree=null,this._taskTree=null,this._dependencyTree=null,this.wrapper.off(f),kendo.destroy(this.wrapper)},_wrapper:function(){var e=o.styles;this.wrapper=this.element.addClass(e.wrapper).append("<div class='"+e.gridHeader+"'><div class='"+e.gridHeaderWrap+"'></div></div>").append("<div class='"+e.gridContentWrap+"'><div class='"+e.tasksWrapper+"'></div><div class='"+e.dependenciesWrapper+"'></div></div>")},_domTrees:function(){var e=o.styles,t=kendo.dom.Tree,n=this.wrapper;this._headerTree=new t(n.find(_+e.gridHeaderWrap)[0]),this._taskTree=new t(n.find(_+e.tasksWrapper)[0]),this._dependencyTree=new t(n.find(_+e.dependenciesWrapper)[0])},_views:function(){var e,t,n,i,r,o,a,s=this.options.views;for(this.views={},o=0,a=s.length;a>o;o++)e=s[o],t=c(e),t&&e.selectable===!1||(n=t?"string"!=typeof e.type?e.title:e.type:e,i=D[n],i&&(t&&(e.type=i.type),i.title=this.options.messages.views[n]),e=d({title:n},i,t?e:{}),n&&(this.views[n]=e,(!r||e.selected)&&(r=n)));r&&(this._selectedViewName=r)},view:function(e){return e&&(this._selectView(e),this.trigger("navigate",{view:e,action:"changeView"})),this._selectedView},_selectView:function(e){e&&this.views[e]&&(this._selectedView&&this._unbindView(this._selectedView),this._selectedView=this._initializeView(e),this._selectedViewName=e)},_viewByIndex:function(e){var t,n=this.views;for(t in n){if(!e)return t;e--}},_initializeView:function(e){var n,i=this.views[e];if(i){if(n=i.type,"string"==typeof n&&(n=kendo.getter(i.type)(window)),!n)throw Error("There is no such view");i=new n(this.wrapper,t(d(!0,{headerTree:this._headerTree,taskTree:this._taskTree,dependencyTree:this._dependencyTree},i,this.options)))}return i},_unbindView:function(e){e&&e.destroy()},_range:function(e){var t,n,i={field:"start",dir:"asc"},r={field:"end",dir:"desc"};return e&&e.length?(t=new p(e).sort(i).toArray()[0].start||new Date,n=new p(e).sort(r).toArray()[0].end||new Date,{start:new Date(t),end:new Date(n)}):{start:new Date,end:new Date}},_render:function(e){var t=this.view(),n=this._range(e);this._tasks=e,t.range(n),t.renderLayout(),t.render(e)},_renderDependencies:function(e){this.view()._renderDependencies(e)},_taskByUid:function(e){var t,n,i=this._tasks,r=i.length;for(n=0;r>n;n++)if(t=i[n],t.uid===e)return t},_draggable:function(){var e,t,n,r,a,s=this,l=this.options.snap,c=o.styles,d=function(){s.view()._removeDragHint(),e&&e.css("opacity",1),e=null,t=null,a=!1};this.options.editable&&(this._moveDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:_+c.task,holdToDrag:kendo.support.mobileOS,ignore:_+c.taskResizeHandle}),this._moveDraggable.bind("dragstart",function(i){var o=s.view();return e=i.currentTarget.parent(),t=s._taskByUid(i.currentTarget.attr("data-uid")),s.trigger("moveStart",{task:t})?void i.preventDefault():(n=t.start,r=o._timeByPosition(i.x.location,l)-n,o._createDragHint(e),e.css("opacity",.5),void(a=!0))}).bind("drag",kendo.throttle(function(e){var i,o;a&&(i=s.view(),o=new Date(i._timeByPosition(e.x.location,l)-r),s.trigger("move",{task:t,start:o})||(n=o,i._updateDragHint(n)))},15)).bind("dragend",function(){s.trigger("moveEnd",{task:t,start:n}),d()}).bind("dragcancel",function(){d()}).userEvents.bind("select",function(){i()}))},_resizable:function(){var e,t,n,r,a,s,l=this,c=this.options.snap,d=o.styles,u=function(){l.view()._removeResizeHint(),e=null,t=null,s=!1};this.options.editable&&(this._resizeDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:_+d.taskResizeHandle,holdToDrag:!1}),this._resizeDraggable.bind("dragstart",function(i){return a=i.currentTarget.hasClass(d.taskResizeHandleWest),e=i.currentTarget.closest(_+d.task),t=l._taskByUid(e.attr("data-uid")),l.trigger("resizeStart",{task:t})?void i.preventDefault():(n=t.start,r=t.end,l.view()._createResizeHint(t),void(s=!0))}).bind("drag",kendo.throttle(function(e){var i,o;s&&(i=l.view(),o=i._timeByPosition(e.x.location,c,!a),a?n=r>o?o:r:r=o>n?o:n,l.trigger("resize",{task:t,start:n,end:r})||i._updateResizeHint(n,r,a))},15)).bind("dragend",function(){l.trigger("resizeEnd",{task:t,resizeStart:a,start:n,end:r}),u()}).bind("dragcancel",function(){u()}).userEvents.bind("select",function(){i()}))},_percentResizeDraggable:function(){var e,t,n,r,a,s,l,c,d,u,h=this,p=o.styles,f=function(){h.view()._removePercentCompleteTooltip(),t=null,e=null,u=!1},g=function(e){t.find(_+p.taskComplete).width(e).end().siblings(_+p.taskDragHandle).css("left",e)};this.options.editable&&(this._percentDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:_+p.taskDragHandle,holdToDrag:!1}),this._percentDraggable.bind("dragstart",function(i){t=i.currentTarget.siblings(_+p.task),e=h._taskByUid(t.attr("data-uid")),l=e.percentComplete,n=t.offset(),r=this.element.offset(),a=t.find(_+p.taskComplete).width(),s=t.outerWidth(),u=!0}).bind("drag",kendo.throttle(function(e){if(u){var t=Math.max(0,Math.min(s,a+e.x.initialDelta));l=Math.round(t/s*100),g(t),c=n.top-r.top,d=n.left+t-r.left,h.view()._updatePercentCompleteTooltip(c,d,l)}},15)).bind("dragend",function(){h.trigger("percentResizeEnd",{task:e,percentComplete:l/100}),f()}).bind("dragcancel",function(){g(a),f()}).userEvents.bind("select",function(){i()}))},_createDependencyDraggable:function(){var t,n,r,a,s,l,c=this,d=e(),h=e(),p=u.msie&&9>u.version,f=o.styles,g=function(){t.css("display","").removeClass(f.hovered),t.parent().removeClass(f.origin),t=null,m(!1),h=e(),d=e(),c.view()._removeDependencyDragHint(),n=!1},m=function(e){h.hasClass(f.origin)||(h.find(_+f.taskDot).css("display",e?"block":""),d.toggleClass(f.hovered,e))};this.options.editable&&(p&&document.namespaces&&document.namespaces.add("kvml","urn:schemas-microsoft-com:vml","#default#VML"),this._dependencyDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:_+f.taskDot,holdToDrag:!1}),this._dependencyDraggable.bind("dragstart",function(e){t=e.currentTarget.css("display","block").addClass(f.hovered),t.parent().addClass(f.origin);var i=t.offset();s=c.view().content,l=s.offset(),r=Math.round(i.left+s.scrollLeft()-l.left+t.outerHeight()/2),a=Math.round(i.top+s.scrollTop()-l.top+t.outerWidth()/2),n=!0}).bind("drag",kendo.throttle(function(t){var i,o,u;n&&(c.view()._removeDependencyDragHint(),i=e(kendo.elementUnderCursor(t)),o=t.x.location+s.scrollLeft()-l.left,u=t.y.location+s.scrollTop()-l.top,c.view()._updateDependencyDragHint({x:r,y:a},{x:o,y:u},p),m(!1),d=i.hasClass(f.taskDot)?i:e(),h=i.closest(_+f.taskWrap),m(!0))},15)).bind("dragend",function(){var e,n,i,r,o;d.length&&(e=t.hasClass(f.taskDotStart),n=d.hasClass(f.taskDotStart),i=e?n?3:2:n?1:0,r=c._taskByUid(t.siblings(_+f.task).attr("data-uid")),o=c._taskByUid(d.siblings(_+f.task).attr("data-uid")),r!==o&&c.trigger("dependencyDragEnd",{type:i,predecessor:r,successor:o})),g()}).bind("dragcancel",function(){g()}).userEvents.bind("select",function(){i()}))},_selectable:function(){var t=this,n=o.styles;this.options.selectable&&this.wrapper.on(g+f,_+n.task,function(n){n.stopPropagation(),n.ctrlKey?t.trigger("clear"):t.trigger("select",{uid:e(this).attr("data-uid")})}).on(g+f,_+n.tasksWrapper,function(){t.selectDependency().length>0?t.clearSelection():t.trigger("clear")}).on(g+f,_+n.line,function(e){e.stopPropagation(),t.selectDependency(this)})},select:function(e){var t=this.wrapper.find(e),n=o.styles;return t.length?(this.clearSelection(),t.addClass(n.selected),void(kendo.support.mobileOS&&t.parent().addClass(n.taskWrapActive))):this.wrapper.find(_+n.task+_+n.selected)},selectDependency:function(t){var n,i=this.wrapper.find(t),r=o.styles;return i.length?(this.clearSelection(),this.trigger("clear"),n=e(i).attr("data-uid"),void this.wrapper.find(_+r.line+"[data-uid='"+n+"']").addClass(r.selected)):this.wrapper.find(_+r.line+_+r.selected)},clearSelection:function(){var e=o.styles;this.wrapper.find(_+e.selected).removeClass(e.selected),kendo.support.mobileOS&&this.wrapper.find(_+e.taskWrapActive).removeClass(e.taskWrapActive)},_attachEvents:function(){var t=this,n=o.styles;this.options.editable&&(this._tabindex(),this.wrapper.on(g+f,_+n.taskDelete,function(i){t.trigger("removeTask",{uid:e(this).closest(_+n.task).attr("data-uid")}),i.stopPropagation(),i.preventDefault()}).on(m+f,_+n.task,function(n){t.trigger("editTask",{uid:e(this).attr("data-uid")}),n.stopPropagation(),n.preventDefault()}).on(v+f,function(e){var n;e.keyCode===h.DELETE&&(n=t.selectDependency(),n.length&&(t.trigger("removeDependency",{uid:n.attr("data-uid")}),t.clearSelection()))}))}}),d(!0,o,{styles:r})}(window.kendo.jQuery),function(e,t){function n(e){return"["+f.attr("uid")+(e?"='"+e+"']":"]")}function i(e){return delete e.name,delete e.prefix,delete e.remove,delete e.edit,delete e.add,delete e.navigate,e}function r(e){var t,n,i,r,o,a;if(e.filter("[name=end], [name=start]").length){for(t=e.attr("name"),n=f.widgetInstance(e,f.ui),i={},r=e;r!==window&&!o;)r=r.parent(),o=r.data("kendoEditable");return(a=o?o.options.model:null)?(i.start=a.start,i.end=a.end,i[t]=n?n.value():f.parseDate(e.value()),i.end>=i.start):!0}return!0}function o(t,n){var i=t.parents("["+f.attr("role")+'="gantt"]'),r=[],o=a(i);t.attr(I,0),n&&o.each(function(t,n){r[t]=e(n).scrollTop()});try{t[0].setActive()}catch(s){t[0].focus()}n&&o.each(function(t,n){e(n).scrollTop(r[t])})}function a(t){return e(t).parentsUntil("body").filter(function(e,t){var n=f.getComputedStyles(t,["overflow"]);return"visible"!=n.overflow}).add(window)}var s,l,c,d,u,h,p,f=window.kendo,g=f.support.browser,m=f.Observable,v=f.ui.Widget,_=f.data.DataSource,y=f.data.ObservableObject,w=f.data.ObservableArray,b=f.data.Query,k=e.isArray,x=e.inArray,C=f.isFunction,S=e.proxy,T=e.extend,D=e.isPlainObject,A=e.map,E=f.keys,M=".kendoGantt",P="p0",I="tabIndex",z="click",F="width",R="string",B={down:{origin:"bottom center",position:"top center"},up:{origin:"top center",position:"bottom center"}},L="aria-activedescendant",O="gantt_active_cell",H="action-option-focused",N=".",V="Are you sure you want to delete this task?",U="Are you sure you want to delete this dependency?",W='<button class="#=styles.button# #=className#" #if (action) {#data-action="#=action#"#}#><span class="#=iconClass#"></span>#=text#</button>',j='<a class="#=className#" #=attr# href="\\#">#=text#</a>',G=f.template('<ul class="#=styles.viewsWrapper#">#for(var view in views){#<li class="#=styles.viewButtonDefault# #=styles.viewButton#-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a href="\\#" class="#=styles.link#">#=views[view].title#</a></li>#}#</ul>'),q=f.template('<div class="#=styles.popupWrapper#"><ul class="#=styles.popupList#" role="listbox">#for(var i = 0, l = actions.length; i < l; i++){#<li class="#=styles.item#" data-action="#=actions[i].data#" role="option">#=actions[i].text#</span>#}#</ul></div>'),$=f.template('<div class="#=styles.footerWrapper#"><div class="#=styles.actions#"><button class="#=styles.button#" data-action="#=action.data#"><span class="#=styles.iconPlus#"></span>#=action.title#</button></div></div>'),Y=function(t,n){var i={name:n.field},r=n.model.fields[n.field].validation;r&&D(r)&&r.message&&(i[f.attr("dateCompare-msg")]=r.message),e('<input type="text" required '+f.attr("type")+'="date" '+f.attr("role")+'="datetimepicker" '+f.attr("bind")+'="value:'+n.field+'" '+f.attr("validate")+"='true' />").attr(i).appendTo(t),e("<span "+f.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},K=function(t,n){e('<a href="#" class="'+n.styles.button+'">'+n.messages.assingButton+"</a>").click(n.click).appendTo(t)},Q={wrapper:"k-widget k-gantt",listWrapper:"k-gantt-layout k-gantt-treelist",list:"k-gantt-treelist",timelineWrapper:"k-gantt-layout k-gantt-timeline",timeline:"k-gantt-timeline",splitBarWrapper:"k-splitbar k-state-default k-splitbar-horizontal k-splitbar-draggable-horizontal k-gantt-layout",splitBar:"k-splitbar",splitBarHover:"k-splitbar-horizontal-hover",popupWrapper:"k-list-container",popupList:"k-list k-reset",resizeHandle:"k-resize-handle",icon:"k-icon",item:"k-item",line:"k-line",buttonDelete:"k-gantt-delete",buttonCancel:"k-gantt-cancel",buttonSave:"k-gantt-update",primary:"k-primary",hovered:"k-state-hover",selected:"k-state-selected",focused:"k-state-focused",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",popup:{form:"k-popup-edit-form",editForm:"k-gantt-edit-form",formContainer:"k-edit-form-container",resourcesFormContainer:"k-resources-form-container",message:"k-popup-message",buttonsContainer:"k-edit-buttons k-state-default",button:"k-button",editField:"k-edit-field",editLabel:"k-edit-label",resourcesField:"k-gantt-resources"},toolbar:{headerWrapper:"k-floatwrap k-header k-gantt-toolbar",footerWrapper:"k-floatwrap k-header k-gantt-toolbar",toolbar:"k-gantt-toolbar",views:"k-gantt-views",viewsWrapper:"k-reset k-header k-gantt-views",actions:"k-gantt-actions",button:"k-button k-button-icontext",iconPlus:"k-icon k-i-plus",iconPdf:"k-icon k-i-pdf",viewButtonDefault:"k-state-default",viewButton:"k-view",link:"k-link",pdfButton:"k-gantt-pdf",appendButton:"k-gantt-create"}},X={append:{text:"Add Task",action:"add",className:Q.toolbar.appendButton,iconClass:Q.toolbar.iconPlus},pdf:{text:"Export to PDF",className:Q.toolbar.pdfButton,iconClass:Q.toolbar.iconPdf}},J=m.extend({init:function(e,t){m.fn.init.call(this),this.element=e,this.options=T(!0,{},this.options,t),this._popup()},options:{direction:"down",navigatable:!1},_current:function(e){var t=p.styles,n=this.list.find(N+t.focused),i=n[e]();i.length&&(n.removeClass(t.focused).removeAttr("id"),i.addClass(t.focused).attr("id",H),this.list.find("ul").removeAttr(L).attr(L,H))},_popup:function(){var t=this,n=p.styles,i="li"+N+n.item,r=this.options.messages.actions,o=this.options.navigatable;this.list=e(q({styles:n,actions:[{data:"add",text:r.addChild},{data:"insert-before",text:r.insertBefore},{data:"insert-after",text:r.insertAfter}]})),this.element.append(this.list),this.popup=new f.ui.Popup(this.list,T({anchor:this.element,open:function(){t._adjustListWidth()},animation:this.options.animation},B[this.options.direction])),this.element.on(z+M,N+n.toolbar.appendButton,function(i){var r=e(this),a=r.attr(f.attr("action"));i.preventDefault(),a?t.trigger("command",{type:a}):(t.popup.open(),o&&t.list.find("li:first").addClass(n.focused).attr("id",H).end().find("ul").attr({TABINDEX:0,"aria-activedescendant":H}).focus())}),this.list.find(i).hover(function(){e(this).addClass(n.hovered)},function(){e(this).removeClass(n.hovered)}).end().on(z+M,i,function(){t.trigger("command",{type:e(this).attr(f.attr("action"))}),t.popup.close()}),o&&(this.popup.bind("close",function(){t.list.find(i).removeClass(n.focused).end().find("ul").attr(I,0),t.element.parents("["+f.attr("role")+'="gantt"]').find(N+n.gridContent+" > table:first").focus()}),this.list.find("ul").on("keydown"+M,function(e){var i=e.keyCode;switch(i){case E.UP:e.preventDefault(),t._current("prev");break;case E.DOWN:e.preventDefault(),t._current("next");break;case E.ENTER:t.list.find(N+n.focused).click();break;case E.ESC:e.preventDefault(),t.popup.close()}}))},_adjustListWidth:function(){var e,t,n=this.list,i=n[0].style.width,r=this.element;(n.data(F)||!i)&&(e=window.getComputedStyle?window.getComputedStyle(r[0],null):0,t=e?parseFloat(e.width):r.outerWidth(),e&&(g.mozilla||g.msie)&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),i="border-box"!==n.css("box-sizing")?t-(n.outerWidth()-n.width()):t,n.css({fontFamily:r.css("font-family"),width:i}).data(F,i))},destroy:function(){this.popup.destroy(),this.element.off(M),this.list.off(M),this.unbind()}}),Z=function(e,t){return function(n){var i,r;if(n=k(i)?{data:n}:n,i=n||{},r=i.data,i.data=r,!(i instanceof e)&&i instanceof _)throw Error("Incorrect DataSource type. Only "+t+" instances are supported");return i instanceof e?i:new e(i)}},et=f.data.Model.define({id:"id",fields:{id:{type:"number"},predecessorId:{type:"number"},successorId:{type:"number"},type:{type:"number"}}}),tt=_.extend({init:function(e){_.fn.init.call(this,T(!0,{},{schema:{modelBase:et,model:et}},e))},successors:function(e){return this._dependencies("predecessorId",e)},predecessors:function(e){return this._dependencies("successorId",e)},dependencies:function(e){var t=this.predecessors(e),n=this.successors(e);return t.push.apply(t,n),t},_dependencies:function(e,t){var n=this.view(),i={field:e,operator:"eq",value:t};return n=new b(n).filter(i).toArray()}});tt.create=Z(tt,"GanttDependencyDataSource"),s=f.data.Model.define({duration:function(){var e=this.end,t=this.start;return e-t},isMilestone:function(){return 0===this.duration()},_offset:function(e){var t,n,i=["start","end"];for(n=0;i.length>n;n++)t=new Date(this.get(i[n]).getTime()+e),this.set(i[n],t)},id:"id",fields:{id:{type:"number"},parentId:{type:"number",defaultValue:null,validation:{required:!0}},orderId:{type:"number",validation:{required:!0}},title:{type:"string",defaultValue:""},start:{type:"date",validation:{required:!0,dateCompare:r,message:"Start date should be before or equal to the end date"}},end:{type:"date",validation:{required:!0,dateCompare:r,message:"End date should be after or equal to the start date"}},percentComplete:{type:"number",validation:{required:!0,min:0,max:1,step:.01}},summary:{type:"boolean"},expanded:{type:"boolean",defaultValue:!0}}}),l=_.extend({init:function(e){_.fn.init.call(this,T(!0,{},{schema:{modelBase:s,model:s}},e))},remove:function(e){var t=e.get("parentId"),n=this.taskAllChildren(e);return this._removeItems(n),e=_.fn.remove.call(this,e),this._childRemoved(t,e.get("orderId")),e},add:function(e){return e?(e=this._toGanttTask(e),this.insert(this.taskSiblings(e).length,e)):t},insert:function(e,n){return n?(n=this._toGanttTask(n),n.set("orderId",e),n=_.fn.insert.call(this,e,n),this._reorderSiblings(n,this.taskSiblings(n).length-1),this._resolveSummaryFields(this.taskParent(n)),n):t},taskChildren:function(e){var n,i=this.view(),r={field:"parentId",operator:"eq",value:null},o=this._sort||{field:"orderId",dir:"asc"};if(e){if(n=e.get("id"),n===t||null===n)return[];r.value=n}return i=new b(i).filter(r).sort(o).toArray()},taskAllChildren:function(e){var t=[],n=this,i=function(e){var r=n.taskChildren(e);t.push.apply(t,r),A(r,i)};return e?i(e):t=this.view(),t},taskSiblings:function(e){if(!e)return null;var t=this.taskParent(e);return this.taskChildren(t)},taskParent:function(e){return e&&null!==e.get("parentId")?this.get(e.parentId):null},taskLevel:function(e){for(var t=0,n=this.taskParent(e);null!==n;)t+=1,n=this.taskParent(n);return t},taskTree:function(e){var t,n,i,r,o=[],a=this.taskChildren(e);for(n=0,i=a.length;i>n;n++)t=a[n],o.push(t),t.get("expanded")&&(r=this.taskTree(t),o.push.apply(o,r));return o},update:function(e,n){var i,r,o=this,a=function(e,t){var n,i,r=o.taskAllChildren(e);for(n=0,i=r.length;i>n;n++)r[n]._offset(t)},s=function(e){var t=e.field,n=e.sender;switch(t){case"start":o._resolveSummaryStart(o.taskParent(n)),a(n,n.get(t).getTime()-i.getTime());break;case"end":o._resolveSummaryEnd(o.taskParent(n));break;case"percentComplete":o._resolveSummaryPercentComplete(o.taskParent(n));break;case"orderId":o._reorderSiblings(n,i)}};n.parentId!==t&&(i=e.get("parentId"),i!==n.parentId&&(e.set("parentId",n.parentId),o._childRemoved(i,e.get("orderId")),e.set("orderId",o.taskSiblings(e).length-1),o._resolveSummaryFields(o.taskParent(e))),delete n.parentId),e.bind("change",s);for(r in n)i=e.get(r),e.set(r,n[r]);e.unbind("change",s)},_resolveSummaryFields:function(e){e&&(this._updateSummary(e),this.taskChildren(e).length&&(this._resolveSummaryStart(e),this._resolveSummaryEnd(e),this._resolveSummaryPercentComplete(e)))},_resolveSummaryStart:function(e){var t=this,n=function(e){var n,i,r,o=t.taskChildren(e),a=o[0].start.getTime();for(i=1,r=o.length;r>i;i++)n=o[i].start.getTime(),a>n&&(a=n);return new Date(a)};this._updateSummaryRecursive(e,"start",n)},_resolveSummaryEnd:function(e){var t=this,n=function(e){var n,i,r,o=t.taskChildren(e),a=o[0].end.getTime();for(i=1,r=o.length;r>i;i++)n=o[i].end.getTime(),n>a&&(a=n);return new Date(a)};this._updateSummaryRecursive(e,"end",n)},_resolveSummaryPercentComplete:function(e){var t=this,n=function(e){var n=t.taskChildren(e),i=new b(n).aggregate([{field:"percentComplete",aggregate:"average"}]);return i.percentComplete.average};this._updateSummaryRecursive(e,"percentComplete",n)},_updateSummaryRecursive:function(e,t,n){var i,r;e&&(i=n(e),e.set(t,i),r=this.taskParent(e),r&&this._updateSummaryRecursive(r,t,n))},_childRemoved:function(e,t){var n,i,r=null===e?null:this.get(e),o=this.taskChildren(r);for(n=t,i=o.length;i>n;n++)o[n].set("orderId",n);this._resolveSummaryFields(r)},_reorderSiblings:function(e,t){var n,i=e.get("orderId"),r=i>t,o=r?t:i,a=r?i:t,s=r?o:o+1,l=this.taskSiblings(e);for(a=Math.min(a,l.length-1),n=o;a>=n;n++)l[n]!==e&&(l[n].set("orderId",s),s+=1)},_updateSummary:function(e){if(null!==e){var t=this.taskChildren(e).length;e.set("summary",t>0)}},_toGanttTask:function(e){if(!(e instanceof s)){var t=e;e=this._createNewModel(),e.accept(t)}return e}}),l.create=Z(l,"GanttDataSource"),T(!0,f.data,{GanttDataSource:l,GanttTask:s,GanttDependencyDataSource:tt,GanttDependency:et}),c={desktop:{dateRange:Y,resources:K}},d=f.Observable.extend({init:function(e,t){f.Observable.fn.init.call(this),this.element=e,this.options=T(!0,{},this.options,t),this.createButton=this.options.createButton},fields:function(e,t){var n=this,i=this.options.messages.editor,r=this.options.resources,o=function(e){e.preventDefault(),r.editor(n.container.find(N+p.styles.popup.resourcesField),t)},a=[{field:"title",title:i.title},{field:"start",title:i.start,editor:e.dateRange},{field:"end",title:i.end,editor:e.dateRange},{field:"percentComplete",title:i.percentComplete,format:P}];return t.get(r.field)&&a.push({field:r.field,title:i.resources,messages:i,editor:e.resources,click:o,styles:p.styles.popup}),a},_buildEditTemplate:function(e,t,n){var i,r,o,a,s=this.options.resources,l=this.options.editable.template,c=T({},f.Template,this.options.templateSettings),d=c.paramName,u=p.styles.popup,h="";if(l)typeof l===R&&(l=window.unescape(l)),h+=f.template(l,c)(e);else for(i=0,r=t.length;r>i;i++)o=t[i],h+='<div class="'+u.editLabel+'"><label for="'+o.field+'">'+(o.title||o.field||"")+"</label></div>",o.field===s.field&&(h+='<div class="'+u.resourcesField+'" style="display:none"></div>'),!e.editable||e.editable(o.field)?(n.push(o),h+="<div "+f.attr("container-for")+'="'+o.field+'" class="'+u.editField+'"></div>'):(a="#:",o.field?(o=f.expr(o.field,d),a+=o+"==null?'':"+o):a+="''",a+="#",a=f.template(a,c),h+='<div class="'+u.editField+'">'+a(e)+"</div>");return h}}),u=d.extend({destroy:function(){this.close(),this.unbind()},editTask:function(e){this.editable=this._createPopupEditor(e)},close:function(){var e=this,t=function(){e.editable&&(e.editable.destroy(),e.editable=null,e.container=null),e.popup&&(e.popup.destroy(),e.popup=null)};this.editable&&this.container.is(":visible")?this.container.data("kendoWindow").bind("deactivate",t).close():t()},showDialog:function(t){var n,i,r,o,a=t.buttons,s=p.styles.popup,l=f.format('<div class="{0}"><div class="{1}"><p class="{2}">{3}</p><div class="{4}">',s.form,s.formContainer,s.message,t.text,s.buttonsContainer);for(n=0,i=a.length;i>n;n++)l+=this.createButton(a[n]);l+="</div></div></div>",r=this.element,this.popup&&this.popup.destroy(),o=this.popup=e(l).appendTo(r).eq(0).on("click",N+s.button,function(t){t.preventDefault(),o.close();var n=e(t.currentTarget).index();a[n].click()}).kendoWindow({modal:!0,resizable:!1,draggable:!1,title:t.title,visible:!1,close:function(){this.destroy(),r.focus()}}).getKendoWindow(),o.center().open()},_createPopupEditor:function(t){var n,i,r=this,o={},a=this.options.messages,s=p.styles,l=s.popup,d=f.format('<div {0}="{1}" class="{2} {3}"><div class="{4}">',f.attr("uid"),t.uid,l.form,l.editForm,l.formContainer),u=this.fields(c.desktop,t),h=[];return d+=this._buildEditTemplate(t,u,h),d+='<div class="'+l.buttonsContainer+'">',d+=this.createButton({name:"update",text:a.save,className:p.styles.primary}),d+=this.createButton({name:"cancel",text:a.cancel}),d+=this.createButton({name:"delete",text:a.destroy}),d+="</div></div></div>",n=this.container=e(d).appendTo(this.element).eq(0).kendoWindow(T({modal:!0,resizable:!1,draggable:!0,title:a.editor.editorTitle,visible:!1,close:function(e){e.userTriggered&&r.trigger("cancel",{container:n,model:t})&&e.preventDefault()}},o)),i=n.kendoEditable({fields:h,model:t,clearContainer:!1,validateOnBlur:!0,target:r.options.target}).data("kendoEditable"),this.trigger("edit",{container:n,model:t})?r.trigger("cancel",{container:n,model:t}):(n.data("kendoWindow").center().open(),n.on(z+M,N+s.buttonCancel,function(e){e.preventDefault(),e.stopPropagation(),r.trigger("cancel",{container:n,model:t})}),n.on(z+M,N+s.buttonSave,function(e){var i,o,a,s,l;for(e.preventDefault(),e.stopPropagation(),i=r.fields(c.desktop,t),o={},s=0,l=i.length;l>s;s++)a=i[s].field,o[a]=t.get(a);r.trigger("save",{container:n,model:t,updateInfo:o})}),n.on(z+M,N+s.buttonDelete,function(e){e.preventDefault(),e.stopPropagation(),r.trigger("remove",{container:n,model:t})})),i}}),h=v.extend({init:function(e,t){v.fn.init.call(this,e,t),this.wrapper=this.element,this.model=this.options.model,this.resourcesField=this.options.resourcesField,this.createButton=this.options.createButton,this._initContainer(),this._attachHandlers()},events:["save"],open:function(){this.window.center().open(),this.grid.resize(!0)},close:function(){this.window.bind("deactivate",S(this.destroy,this)).close()
},destroy:function(){this._dettachHandlers(),this.grid.destroy(),this.grid=null,this.window.destroy(),this.window=null,v.fn.destroy.call(this),f.destroy(this.wrapper),this.element=this.wrapper=null},_attachHandlers:function(){var t=p.styles,n=this.grid,i=this._cancelProxy=S(this._cancel,this);this.container.on(z+M,N+t.buttonCancel,this._cancelProxy),this._saveProxy=S(this._save,this),this.container.on(z+M,N+t.buttonSave,this._saveProxy),this.window.bind("close",function(e){e.userTriggered&&i(e)}),n.wrapper.on(z+M,"input[type='checkbox']",function(){var t=e(this),i=e(t).closest("tr"),r=n.dataSource.getByUid(i.attr(f.attr("uid"))),o=e(t).is(":checked")?1:"";r.set("value",o)})},_dettachHandlers:function(){this._cancelProxy=null,this._saveProxy=null,this.container.off(M),this.grid.wrapper.off()},_cancel:function(e){e.preventDefault(),this.close()},_save:function(e){e.preventDefault(),this._updateModel(),this.wrapper.is(N+p.styles.popup.resourcesField)||this.trigger("save",{container:this.wrapper,model:this.model}),this.close()},_initContainer:function(){var t=p.styles.popup,n=f.format('<div class="{0} {1}"><div class="{2} {3}"/></div>"',t.form,t.editForm,t.formContainer,t.resourcesFormContainer);n=e(n),this.container=n.find(N+t.resourcesFormContainer),this.window=n.kendoWindow({modal:!0,resizable:!1,draggable:!0,visible:!1,title:this.options.messages.resourcesEditorTitle}).data("kendoWindow"),this._resourceGrid(),this._createButtons()},_resourceGrid:function(){var t=this,n=this.options.messages,i=e('<div id="resources-grid"/>').appendTo(this.container);this.grid=new f.ui.Grid(i,{columns:[{field:"name",title:n.resourcesHeader,template:"<label><input type='checkbox' value='#=name#'# if (value > 0 && value !== null) {#checked='checked'# } #/>#=name#</labe>"},{field:"value",title:n.unitsHeader,template:function(e){var t=e.format,n=null!==e.value?e.value:"";return t?f.toString(n,t):n}}],height:280,sortable:!0,editable:!0,filterable:!0,dataSource:{data:t.options.data,schema:{model:{id:"id",fields:{id:{from:"id",type:"number"},name:{from:"name",type:"string",editable:!1},value:{from:"value",type:"number",defaultValue:""},format:{from:"format",type:"string"}}}}},save:function(e){var t=!!e.values.value;e.container.parent().find("input[type='checkbox']").prop("checked",t)}})},_createButtons:function(){var e,t,n=this.options.buttons,i='<div class="'+p.styles.popup.buttonsContainer+'">';for(e=0,t=n.length;t>e;e++)i+=this.createButton(n[e]);i+="</div>",this.container.append(i)},_updateModel:function(){var e,t,n,i=[],r=this.grid.dataSource.data();for(t=0,n=r.length;n>t;t++)e=r[t].get("value"),null!==e&&e>0&&i.push(r[t]);this.model[this.resourcesField]=i}}),p=v.extend({init:function(e,t){k(t)&&(t={dataSource:t}),v.fn.init.call(this,e,t),this._wrapper(),this._resources(),this._timeline(),this._toolbar(),this._footer(),this._adjustDimensions(),this._preventRefresh=!0,this.view(this.timeline._selectedViewName),this._preventRefresh=!1,this._dataSource(),this._assignments(),this._dropDowns(),this._list(),this._dependencies(),this._resizable(),this._scrollable(),this._dataBind(),this._attachEvents(),this._createEditor(),f.notify(this)},events:["dataBinding","dataBound","add","edit","remove","cancel","save","change","navigate","moveStart","move","moveEnd","resizeStart","resize","resizeEnd"],options:{name:"Gantt",autoBind:!0,navigatable:!1,selectable:!0,editable:!0,columns:[],views:[],dataSource:{},dependencies:{},resources:{},assignments:{},messages:{save:"Save",cancel:"Cancel",destroy:"Delete",deleteTaskWindowTitle:"Delete task",deleteDependencyWindowTitle:"Delete dependency",views:{day:"Day",week:"Week",month:"Month",year:"Year"},actions:{append:"Add Task",addChild:"Add Child",insertBefore:"Add Above",insertAfter:"Add Below",pdf:"Export to PDF"},editor:{editorTitle:"Task",resourcesEditorTitle:"Resources",title:"Title",start:"Start",end:"End",percentComplete:"Complete",resources:"Resources",assingButton:"Assign",resourcesHeader:"Resources",unitsHeader:"Units"}},showWorkHours:!0,showWorkDays:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,snap:!0,height:600,listWidth:"30%"},select:function(e){var n=this.list;return e?(n.select(e),t):n.select()},clearSelection:function(){this.list.clearSelection()},destroy:function(){v.fn.destroy.call(this),this.dataSource&&(this.dataSource.unbind("change",this._refreshHandler),this.dataSource.unbind("progress",this._progressHandler),this.dataSource.unbind("error",this._errorHandler)),this.dependencies&&(this.dependencies.unbind("change",this._dependencyRefreshHandler),this.dependencies.unbind("error",this._dependencyErrorHandler)),this.timeline&&(this.timeline.unbind(),this.timeline.destroy()),this.list&&(this.list.unbind(),this.list.destroy()),this.footerDropDown&&this.footerDropDown.destroy(),this.headerDropDown&&this.headerDropDown.destroy(),this._editor&&this._editor.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),this.toolbar.off(M),e(window).off("resize"+M,this._resizeHandler),e(this.wrapper).off(M),this.toolbar=null,this.footer=null},_attachEvents:function(){this._resizeHandler=S(this.resize,this),e(window).on("resize"+M,this._resizeHandler)},_wrapper:function(){var e=p.styles,t=[e.icon,e.resizeHandle].join(" "),n=this.options,i=n.height,r=n.width;this.wrapper=this.element.addClass(e.wrapper).append("<div class='"+e.listWrapper+"'><div></div></div>").append("<div class='"+e.splitBarWrapper+"'><div class='"+t+"'></div></div>").append("<div class='"+e.timelineWrapper+"'><div></div></div>"),this.wrapper.find(N+e.list).width(n.listWidth),i&&this.wrapper.height(i),r&&this.wrapper.width(r)},_toolbar:function(){var t,n,i=this,r=p.styles,o=N+r.toolbar.views+" > li",a=N+r.toolbar.pdfButton,s=r.hovered,l=this.options.toolbar,c=e("<div class='"+r.toolbar.actions+"'>");C(l)||(l=typeof l===R?l:this._actions(l),l=S(f.template(l),this)),n=e(G({ns:f.ns,views:this.timeline.views,styles:r.toolbar})),c.append(l({})),t=e("<div class='"+r.toolbar.headerWrapper+"'>").append(c).append(n),this.wrapper.prepend(t),this.toolbar=t,t.on(z+M,o,function(t){t.preventDefault();var n=e(this).attr(f.attr("name"));i.trigger("navigate",{view:n})||i.view(n)}).on(z+M,a,function(){i.saveAsPDF()}),this.wrapper.find(N+r.toolbar.toolbar+" li").hover(function(){e(this).addClass(s)},function(){e(this).removeClass(s)})},_actions:function(){var e,t,n=this.options,i=n.toolbar,r="";if(!k(i)){if(!n.editable)return r;i=["append"]}for(e=0,t=i.length;t>e;e++)r+=this._createButton(i[e]);return r},_footer:function(){if(this.options.editable){var t=e($({styles:p.styles.toolbar,action:{data:"add",title:this.options.messages.actions.append}}));this.wrapper.append(t),this.footer=t}},_createButton:function(e){var t=e.template||W,n=this.options.messages.actions,i=typeof e===R?e:e.name||e.text,r=X[i]?X[i].className:"k-gantt-"+(i||"").replace(/\s/g,""),o={iconClass:"",action:"",text:i,className:r,styles:p.styles.toolbar};if(!(i||D(e)&&e.template))throw Error("Custom commands should have name specified");return o=T(!0,o,X[i],{text:n[i]}),D(e)&&(e.className&&x(o.className,e.className.split(" "))<0&&(e.className+=" "+o.className),o=T(!0,o,e)),f.template(t)(o)},_adjustDimensions:function(){var e=this.element,t=p.styles,n=N+t.list,i=N+t.timeline,r=N+t.splitBar,o=this.toolbar.outerHeight(),a=this.footer?this.footer.outerHeight():0,s=e.height(),l=e.width(),c=e.find(r).outerWidth(),d=e.find(n).outerWidth();e.children([n,i,r].join(",")).height(s-(o+a)).end().children(i).width(l-(c+d))},_scrollTo:function(e){var t=this.timeline.view(),i=f.attr("uid"),r="string"==typeof e?e:e.closest("tr"+n()).attr(i),o=t.content.find(n(r));0!==o.length&&t._scrollTo(o)},_dropDowns:function(){var e=this,t=N+p.styles.toolbar.actions,n=this.options.messages.actions,i=this.dataSource,r=this.timeline,o=function(t){var n,o=t.type,a=i._createNewModel(),s=e.dataItem(e.select()),l=i.taskParent(s),c=r.view()._timeSlots()[0],d="add"===o?s:l;a.set("title","New task"),d?(a.set("parentId",d.get("id")),a.set("start",d.get("start")),a.set("end",d.get("end"))):(a.set("start",c.start),a.set("end",c.end)),"add"!==o&&(n=s.get("orderId"),n="insert-before"===o?n:n+1),e._createTask(a,n)};this.options.editable&&(this.footerDropDown=new J(this.footer.children(t).eq(0),{messages:{actions:n},direction:"up",animation:{open:{effects:"slideIn:up"}},navigatable:e.options.navigatable}),this.headerDropDown=new J(this.toolbar.children(t).eq(0),{messages:{actions:n},navigatable:e.options.navigatable}),this.footerDropDown.bind("command",o),this.headerDropDown.bind("command",o))},_list:function(){var e,t,n=this,i=n.options.navigatable,r=p.styles,a=this.wrapper.find(N+r.list),s=a.find("> div"),l=this.wrapper.find(N+r.toolbar.actions+" > button"),c={columns:this.options.columns||[],dataSource:this.dataSource,selectable:this.options.selectable,editable:this.options.editable,listWidth:a.outerWidth(),resourcesField:this.resources.field},d=c.columns,u=function(){i&&(n._current(n._cachedCurrent),o(n.list.content.find("table"),!0)),delete n._cachedCurrent};for(t=0;d.length>t;t++)e=d[t],e.field===this.resources.field&&"function"!=typeof e.editor&&(e.editor=S(this._createResourceEditor,this));this.list=new f.ui.GanttList(s,c),this.list.bind("render",function(){n._navigatable()},!0).bind("edit",function(e){n._cachedCurrent=e.cell,n.trigger("edit",{task:e.model,container:e.cell})&&e.preventDefault()}).bind("cancel",function(e){n.trigger("cancel",{task:e.model,container:e.cell})&&e.preventDefault(),u()}).bind("update",function(e){n._updateTask(e.task,e.updateInfo),u()}).bind("change",function(){n.trigger("change");var e=n.list.select();e.length?(l.removeAttr("data-action","add"),n.timeline.select("[data-uid='"+e.attr("data-uid")+"']")):(l.attr("data-action","add"),n.timeline.clearSelection())})},_timeline:function(){var e=this,t=p.styles,n=i(T(!0,{resourcesField:this.resources.field},this.options)),r=this.wrapper.find(N+t.timeline+" > div");this.timeline=new f.ui.GanttTimeline(r,n),this.timeline.bind("navigate",function(n){e.toolbar.find(N+t.toolbar.views+" > li").removeClass(t.selected).end().find(N+t.toolbar.viewButton+"-"+n.view.replace(/\./g,"\\.").toLowerCase()).addClass(t.selected),e.refresh()}).bind("moveStart",function(t){e.trigger("moveStart",{task:t.task})&&t.preventDefault()}).bind("move",function(t){var n=t.task,i=t.start,r=new Date(i.getTime()+n.duration());e.trigger("move",{task:n,start:i,end:r})&&t.preventDefault()}).bind("moveEnd",function(t){var n=t.task,i=t.start,r=new Date(i.getTime()+n.duration());e.trigger("moveEnd",{task:n,start:i,end:r})||e._updateTask(e.dataSource.getByUid(n.uid),{start:i,end:r})}).bind("resizeStart",function(t){e.trigger("resizeStart",{task:t.task})&&t.preventDefault()}).bind("resize",function(t){e.trigger("resize",{task:t.task,start:t.start,end:t.end})&&t.preventDefault()}).bind("resizeEnd",function(t){var n=t.task,i={};t.resizeStart?i.start=t.start:i.end=t.end,e.trigger("resizeEnd",{task:n,start:t.start,end:t.end})||e._updateTask(e.dataSource.getByUid(n.uid),i)}).bind("percentResizeEnd",function(t){e._updateTask(e.dataSource.getByUid(t.task.uid),{percentComplete:t.percentComplete})}).bind("dependencyDragEnd",function(t){var n=e.dependencies._createNewModel({type:t.type,predecessorId:t.predecessor.id,successorId:t.successor.id});e._createDependency(n)}).bind("select",function(t){e.select("[data-uid='"+t.uid+"']")}).bind("editTask",function(t){e.editTask(t.uid)}).bind("clear",function(){e.clearSelection()}).bind("removeTask",function(t){e.removeTask(e.dataSource.getByUid(t.uid))}).bind("removeDependency",function(t){e.removeDependency(e.dependencies.getByUid(t.uid))})},_dataSource:function(){var e=this.options,t=e.dataSource;t=k(t)?{data:t}:t,this.dataSource&&this._refreshHandler?this.dataSource.unbind("change",this._refreshHandler).unbind("progress",this._progressHandler).unbind("error",this._errorHandler):(this._refreshHandler=S(this.refresh,this),this._progressHandler=S(this._requestStart,this),this._errorHandler=S(this._error,this)),this.dataSource=f.data.GanttDataSource.create(t).bind("change",this._refreshHandler).bind("progress",this._progressHandler).bind("error",this._errorHandler)},_dependencies:function(){var e=this.options.dependencies||{},t=k(e)?{data:e}:e;this.dependencies&&this._dependencyRefreshHandler?this.dependencies.unbind("change",this._dependencyRefreshHandler).unbind("error",this._dependencyErrorHandler):(this._dependencyRefreshHandler=S(this.refreshDependencies,this),this._dependencyErrorHandler=S(this._error,this)),this.dependencies=f.data.GanttDependencyDataSource.create(t).bind("change",this._dependencyRefreshHandler).bind("error",this._dependencyErrorHandler)},_resources:function(){var e=this.options.resources,t=e.dataSource||{};this.resources={field:"resources",dataTextField:"name",dataColorField:"color",dataFormatField:"format"},T(this.resources,e),this.resources.dataSource=f.data.DataSource.create(t)},_assignments:function(){var e=this.options.assignments,t=e.dataSource||{};this.assignments?this.assignments.dataSource.unbind("change",this._assignmentsRefreshHandler):this._assignmentsRefreshHandler=S(this.refresh,this),this.assignments={dataTaskIdField:"taskId",dataResourceIdField:"resourceId",dataValueField:"value"},T(this.assignments,e),this.assignments.dataSource=f.data.DataSource.create(t),this.assignments.dataSource.bind("change",this._assignmentsRefreshHandler)},_createEditor:function(){var e=this,n=this._editor=new u(this.wrapper,T({},this.options,{target:this,resources:{field:this.resources.field,editor:S(this._createResourceEditor,this)},createButton:S(this._createPopupButton,this)}));n.bind("cancel",function(n){var i=e.dataSource.getByUid(n.model.uid);return e.trigger("cancel",{container:n.container,task:i})?(n.preventDefault(),t):(e.cancelTask(),t)}).bind("edit",function(t){var n=e.dataSource.getByUid(t.model.uid);e.trigger("edit",{container:t.container,task:n})&&t.preventDefault()}).bind("save",function(t){var n=e.dataSource.getByUid(t.model.uid);e.saveTask(n,t.updateInfo)}).bind("remove",function(t){e.removeTask(t.model.uid)})},_createResourceEditor:function(e,t){var n=this,i=t instanceof y?t:t.model,r=i.get("id"),o=this.options.messages,a=n.resources.field,s=this._resourceEditor=new h(e,{resourcesField:a,data:this._wrapResourceData(r),model:i,messages:T({},o.editor),buttons:[{name:"update",text:o.save,className:p.styles.primary},{name:"cancel",text:o.cancel}],createButton:S(this._createPopupButton,this),save:function(e){n._updateAssignments(e.model.get("id"),e.model.get(a))}});s.open()},_createPopupButton:function(e){var t=e.name||e.text,n={className:p.styles.popup.button+" k-gantt-"+(t||"").replace(/\s/g,""),text:t,attr:""};if(!(t||D(e)&&e.template))throw Error("Custom commands should have name specified");return D(e)&&(e.className&&(e.className+=" "+n.className),n=T(!0,n,e)),f.template(j)(n)},view:function(e){return this.timeline.view(e)},dataItem:function(e){var t,n;return e?(t=this.list,n=t.content.find(e),t._modelFromElement(n)):null},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.list._setDataSource(this.dataSource),this.options.autoBind&&e.fetch()},setDependenciesDataSource:function(e){this.options.dependencies=e,this._dependencies(),this.options.autoBind&&e.fetch()},items:function(){return this.wrapper.children(".k-task")},_updateAssignments:function(e,t){for(var n,i,r,o,a,s,l,c=this.assignments.dataSource,d=this.assignments.dataTaskIdField,u=this.assignments.dataResourceIdField,h=this.assignments.dataValueField,p=!1,f=new b(c.view()).filter({field:d,operator:"eq",value:e}).toArray();f.length;){for(n=f[0],o=0,a=t.length;a>o;o++)if(i=t[o],n.get(u)===i.get("id")){r=t[o].get("value"),n.set(h,r),t.splice(o,1),p=!0;break}p||c.remove(n),p=!1,f.shift()}for(s=0,l=t.length;l>s;s++)i=t[s],n=c._createNewModel(),n[d]=e,n[u]=i.get("id"),n[h]=i.get("value"),c.add(n);c.sync()},cancelTask:function(){var e=this._editor,t=e.container;t&&e.close()},editTask:function(e){var t,n="string"==typeof e?this.dataSource.getByUid(e):e;n&&(t=this.dataSource._createNewModel(n.toJSON()),t.uid=n.uid,this.cancelTask(),this._editTask(t))},_editTask:function(e){this._editor.editTask(e)},saveTask:function(e,t){var n=this._editor,i=n.container,r=n.editable;i&&r&&r.end()&&this._updateTask(e,t)},_updateTask:function(e,t){var n=this.resources.field;this.trigger("save",{task:e,values:t})||(this._preventRefresh=!0,this.dataSource.update(e,t),t[n]&&this._updateAssignments(e.get("id"),t[n]),this._syncDataSource())},removeTask:function(e){var t=this,n="string"==typeof e?this.dataSource.getByUid(e):e;n&&this._taskConfirm(function(e){e||t._removeTask(n)},n)},_createTask:function(e,n){if(!this.trigger("add",{task:e,dependency:null})){var i=this.dataSource;this._preventRefresh=!0,n===t?i.add(e):i.insert(n,e),this._scrollToUid=e.uid,this._syncDataSource()}},_createDependency:function(e){this.trigger("add",{task:null,dependency:e})||(this._preventDependencyRefresh=!0,this.dependencies.add(e),this._preventDependencyRefresh=!1,this.dependencies.sync())},removeDependency:function(e){var t=this,n="string"==typeof e?this.dependencies.getByUid(e):e;n&&this._dependencyConfirm(function(e){e||t._removeDependency(n)},n)},_removeTaskDependencies:function(e,t){this._preventDependencyRefresh=!0;for(var n=0,i=t.length;i>n;n++)this.dependencies.remove(t[n]);this._preventDependencyRefresh=!1,this.dependencies.sync()},_removeResourceAssignments:function(e){var t,n,i=this.assignments.dataSource,r=i.view(),o={field:this.assignments.dataTaskIdField,operator:"eq",value:e.get("id")};for(r=new b(r).filter(o).toArray(),this._preventRefresh=!0,t=0,n=r.length;n>t;t++)i.remove(r[t]);this._preventRefresh=!1,i.sync()},_removeTask:function(e){var t=this.dependencies.dependencies(e.id);this.trigger("remove",{task:e,dependencies:t})||(this._removeTaskDependencies(e,t),this._removeResourceAssignments(e),this._preventRefresh=!0,this.dataSource.remove(e)&&this._syncDataSource(),this._preventRefresh=!1)},_removeDependency:function(e){this.trigger("remove",{task:null,dependencies:[e]})||this.dependencies.remove(e)&&this.dependencies.sync()},_taskConfirm:function(e,t){this._confirm(e,{model:t,text:V,title:this.options.messages.deleteTaskWindowTitle})},_dependencyConfirm:function(e,t){this._confirm(e,{model:t,text:U,title:this.options.messages.deleteDependencyWindowTitle})},_confirm:function(e,t){var n,i,r=this.options.editable;r===!0||r.confirmation!==!1?(n=this.options.messages,i=[{name:"delete",text:n.destroy,className:p.styles.primary,click:function(){e()}},{name:"cancel",text:n.cancel,click:function(){e(!0)}}],this.showDialog(T(!0,{},t,{buttons:i}))):e()},showDialog:function(e){this._editor.showDialog(e)},refresh:function(){var e,t,i,r,o,a;this._preventRefresh||this.list.editable||(this._progress(!1),e=this.dataSource,t=e.taskTree(),i=this._scrollToUid,a=-1,this.current&&(o=this.current.closest("tr").attr(f.attr("uid")),a=this.current.index()),this.trigger("dataBinding")||(0!==this.resources.dataSource.data().length&&this._assignResources(t),this._editor&&this._editor.close(),this.clearSelection(),this.list._render(t),this.timeline._render(t),this.timeline._renderDependencies(this.dependencies.view()),i&&(this._scrollTo(i),this.select(n(i))),(i||o)&&a>=0&&(r=this.list.content.find("tr"+n(i||o)+" > td:eq("+a+")"),this._current(r)),this._scrollToUid=null,this.trigger("dataBound")))},refreshDependencies:function(){this._preventDependencyRefresh||this.trigger("dataBinding")||(this.timeline._renderDependencies(this.dependencies.view()),this.trigger("dataBound"))},_assignResources:function(e){var t,n,i=this.resources,r=this.assignments,o=function(){var e=r.dataSource.view(),t={field:r.dataTaskIdField};return e=new b(e).group(t).toArray()},a=o(),s=function(e,t){var n,r,o=e.get("id");for(f.setter(i.field)(e,new w([])),n=0,r=a.length;r>n;n++)a[n].value===o&&t(e,a[n].items)},l=function(e,t){var n,o,a,s,l,c,d,u;for(n=0,o=t.length;o>n;n++)a=t[n],s=i.dataSource.get(a.get(r.dataResourceIdField)),l=a.get(r.dataValueField),c=a.get(r.dataResourceIdField),d=s.get(i.dataFormatField)||P,u=f.toString(l,d),e[i.field].push(new y({id:c,name:s.get(i.dataTextField),color:s.get(i.dataColorField),value:l,formatedValue:u}))};for(t=0,n=e.length;n>t;t++)s(e[t],l)},_wrapResourceData:function(e){var t,n,i,r=this,o=[],a=this.resources.dataSource.view(),s=this.assignments.dataSource.view(),l=new b(s).filter({field:r.assignments.dataTaskIdField,operator:"eq",value:e}).toArray(),c=function(e){var t=null;return new b(l).filter({field:r.assignments.dataResourceIdField,operator:"eq",value:e}).select(function(e){t+=e.get(r.assignments.dataValueField)}),t};for(n=0,i=a.length;i>n;n++)t=a[n],o.push({id:t.get("id"),name:t.get(r.resources.dataTextField),format:t.get(r.resources.dataFormatField)||P,value:c(t.id)});return o},_syncDataSource:function(){this._preventRefresh=!1,this._requestStart(),this.dataSource.sync()},_requestStart:function(){this._progress(!0)},_error:function(){this._progress(!1)},_progress:function(e){f.ui.progress(this.element,e)},_resizable:function(){var t,n,i,r=this.wrapper,o=p.styles,a=N+o.gridContent,s=r.find(N+o.list),l=r.find(N+o.timeline);this._resizeDraggable=r.find(N+o.splitBar).height(s.height()).hover(function(){e(this).addClass(o.splitBarHover)},function(){e(this).removeClass(o.splitBarHover)}).end().kendoResizable({orientation:"horizontal",handle:N+o.splitBar,start:function(){t=s.width(),n=l.width(),i=l.find(a).scrollLeft()},resize:function(e){var r=e.x.initialDelta;0>t+r||0>n-r||(s.width(t+r),l.width(n-r),l.find(a).scrollLeft(i+r))}}).data("kendoResizable")},_scrollable:function(){var t=p.styles,n=N+t.gridContent,i=N+t.gridHeaderWrap,r=this.timeline.element,o=this.list.element;r.find(n).on("scroll",function(){r.find(i).scrollLeft(this.scrollLeft),o.find(n).scrollTop(this.scrollTop)}),o.find(n).on("scroll",function(){o.find(i).scrollLeft(this.scrollLeft)}).on("DOMMouseScroll"+M+" mousewheel"+M,function(t){var i=r.find(n),o=i.scrollTop(),a=f.wheelDeltaY(t);a&&(t.preventDefault(),e(t.currentTarget).one("wheel"+M,!1),i.scrollTop(o+-a))})},_navigatable:function(){var i,r=this,a=this.options.navigatable,s=this.options.editable,l=this.list.header.find("table"),c=this.list.content.find("table"),d=p.styles,u=this.timeline.element.find(N+d.gridContent),h=l.add(c),g=n(),m={collapse:!1,expand:!0},v=function(e){var t=r.timeline.view()._timeSlots()[0].offsetWidth;u.scrollLeft(u.scrollLeft()+(e?-t:t))},_=function(e){var t=r.current.parent("tr"+n()),i=r.current.index(),a=t[e]();0!==r.select().length&&r.clearSelection(),0!==a.length?(r._current(a.children("td:eq("+i+")")),r._scrollTo(r.current)):r.current.is("td")&&"prev"==e?o(l):r.current.is("th")&&"next"==e&&o(c)},y=function(e){var t=r.current[e]();0!==t.length&&(r._current(t),i=r.current.index())},w=function(e){var t=r.dataItem(r.current);t.summary&&t.expanded!==e&&t.set("expanded",e)},b=function(){var e,t;r.options.editable&&!r.list.editable&&(e=r.select(),t=f.attr("uid"),e.length&&r.removeTask(e.attr(t)))};return e(this.wrapper).on("mousedown"+M,"tr"+g+", div"+g+":not("+N+d.line+")",function(t){var i,l=e(t.currentTarget),c=e(t.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap");t.ctrlKey||(a&&(i=l.is("tr")?e(t.target).closest("td"):r.list.content.find("tr"+n(l.attr(f.attr("uid")))+" > td:first"),r._current(i)),!a&&!s||c||setTimeout(function(){o(r.list.content.find("table"),!0)},2))}),a!==!0?(c.on("keydown"+M,function(e){e.keyCode==E.DELETE&&b()}),t):(h.on("focus"+M,function(){var t=this===c.get(0)?"td":"th",n=(e(this),r.select()),o=r.current||e(n.length?n:this).find(t+":eq("+(i||0)+")");r._current(o)}).on("blur"+M,function(){r._current(),this==l&&e(this).attr(I,-1)}).on("keydown"+M,function(e){var t,n=e.keyCode;if(r.current)switch(t=r.current.is("td"),n){case E.RIGHT:e.preventDefault(),e.altKey?v():e.ctrlKey?w(m.expand):y("next");break;case E.LEFT:e.preventDefault(),e.altKey?v(!0):e.ctrlKey?w(m.collapse):y("prev");break;case E.UP:e.preventDefault(),_("prev");break;case E.DOWN:e.preventDefault(),_("next");break;case E.SPACEBAR:e.preventDefault(),t&&r.select(r.current.closest("tr"));break;case E.ENTER:e.preventDefault(),t?r.options.editable&&(r._cachedCurrent=r.current,r.list._startEditHandler(r.current),e.stopPropagation()):r.current.children("a.k-link").click();break;case E.ESC:e.stopPropagation();break;case E.DELETE:t&&b();break;default:n>=49&&57>=n&&r.view(r.timeline._viewByIndex(n-49))}}),t)},_current:function(t){var n,i=p.styles;this.current&&this.current.length&&this.current.removeClass(i.focused).removeAttr("id"),t&&t.length?(this.current=t.addClass(i.focused).attr("id",O),n=e(f._activeElement()),n.is("table")&&this.wrapper.find(n).length>0&&n.removeAttr(L).attr(L,O)):this.current=null},_dataBind:function(){var t,n=this;n.options.autoBind&&(this._preventRefresh=!0,this._preventDependencyRefresh=!0,t=e.map([this.dataSource,this.dependencies,this.resources.dataSource,this.assignments.dataSource],function(e){return e.fetch()}),e.when.apply(null,t).done(function(){n._preventRefresh=!1,n._preventDependencyRefresh=!1,n.refresh()}))},_resize:function(){this._adjustDimensions(),this.timeline.view()._adjustHeight(),this.list._adjustHeight()}}),f.PDFMixin&&f.PDFMixin.extend(p.prototype),f.ui.plugin(p),T(!0,p,{styles:Q})}(window.kendo.jQuery),function(e,t){function n(e){var t,n,i=[],r=e.className;for(t=0,n=e.level;n>t;t++)i.push(c("span",{className:r}));return i}var i,r,o,a=kendo.data,s=e.extend,l=kendo.dom,c=l.element,d=l.text,u=l.html,h=kendo.ui,p=h.DataBoundWidget,f=a.DataSource,g=a.ObservableArray,m=a.Query,v=a.Model,_=e.proxy,y=e.map,w=e.grep,b="string",k="change",x="error",C="progress",S=".",T=".kendoTreeList",D="click",A="mousedown",E="edit",M="save",P="expand",I="collapse",z="remove",F="dataBinding",R="dataBound",B="cancel",L="filterMenuInit",O={wrapper:"k-treelist k-grid k-widget",header:"k-header",button:"k-button",alt:"k-alt",editCell:"k-edit-cell",group:"k-treelist-group",gridToolbar:"k-grid-toolbar",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",gridFilter:"k-grid-filter",footerTemplate:"k-footer-template",loading:"k-loading",refresh:"k-i-refresh",retry:"k-request-retry",selected:"k-state-selected",status:"k-status",link:"k-link",withIcon:"k-with-icon",filterable:"k-filterable",icon:"k-icon",iconFilter:"k-filter",iconCollapse:"k-i-collapse",iconExpand:"k-i-expand",iconHidden:"k-i-none",iconPlaceHolder:"k-icon k-i-none",input:"k-input",dropPositions:"k-insert-top k-insert-bottom k-add k-insert-middle",dropTop:"k-insert-top",dropBottom:"k-insert-bottom",dropAdd:"k-add",dropMiddle:"k-insert-middle",dropDenied:"k-denied",dragStatus:"k-drag-status",dragClue:"k-drag-clue",dragClueText:"k-clue-text"},H={create:{imageClass:"k-add",className:"k-grid-add",methodName:"addRow"},createchild:{imageClass:"k-add",className:"k-grid-add",methodName:"addRow"},destroy:{imageClass:"k-delete",className:"k-grid-delete",methodName:"removeRow"},edit:{imageClass:"k-edit",className:"k-grid-edit",methodName:"editRow"},update:{imageClass:"k-update",className:"k-primary k-grid-update",methodName:"saveRow"},canceledit:{imageClass:"k-cancel",className:"k-grid-cancel",methodName:"_cancelEdit"},excel:{imageClass:"k-i-excel",className:"k-grid-excel",methodName:"saveAsExcel"},pdf:{imageClass:"k-i-pdf",className:"k-grid-pdf",methodName:"saveAsPDF"}},N=v.define({id:"id",fields:{id:{type:"number"},parentId:{type:"number",nullable:!0}},init:function(e){v.fn.init.call(this,e),this._loaded=!1},loaded:function(e){return e===t?this._loaded:(this._loaded=e,t)},shouldSerialize:function(e){return v.fn.shouldSerialize.call(this,e)&&"_loaded"!==e&&"_error"!=e&&"_edit"!=e}}),V=f.extend({init:function(e){f.fn.init.call(this,s(!0,{},{schema:{modelBase:N,model:N}},e))},_readData:function(e){var t,n,i=[],r=this.data();for(t=0,n=r.length;n>t;t++)i.push(r[t]);return i.concat(f.fn._readData.call(this,e))},_readAggregates:function(e){var t=s(this._aggregateResult,this.reader.aggregates(e));return""in t&&(t[this._defaultParentId()]=t[""],delete t[""]),t},remove:function(e){var t=this._subtree(this._childrenMap(this.data()),e.id);this._removeItems(t),f.fn.remove.call(this,e)},_filterCallback:function(e){var t,n,i=[],r=e.toArray(),o={};for(t=0;r.length>t;t++)for(n=r[t];n&&(o[n.id]=!0,!o[n.parentId]);)o[n.parentId]=!0,n=this.parentNode(n),n&&i.push(n);return new m(r.concat(i))},_subtree:function(e,t){var n,i,r=e[t]||[],o=this._defaultParentId();for(n=0,i=r.length;i>n;n++)r[n].id!==o&&(r=r.concat(this._subtree(e,r[n].id)));return r},_childrenMap:function(e){var t,n,i,r,o={};for(e=this._observeView(e),t=0;e.length>t;t++)n=e[t],i=n.id,r=n.parentId,o[i]=o[i]||[],o[r]=o[r]||[],o[r].push(n);return o},_calculateAggregates:function(e,t){var n,i,r,o,a,s;for(t=t||{},n={},a=t.filter,a&&(e=m.process(e,{filter:a,filterCallback:_(this._filterCallback,this)}).data),s=this._childrenMap(e),n[this._defaultParentId()]=new m(this._subtree(s,this._defaultParentId())).aggregate(t.aggregate),o=0;e.length>o;o++)i=e[o],r=this._subtree(s,i.id),n[i.id]=new m(r).aggregate(t.aggregate);return n},_queryProcess:function(e,t){var n,i,r,o,a,s,l;for(t=t||{},t.filterCallback=_(this._filterCallback,this),n=this._defaultParentId(),i=m.process(e,t),r=this._childrenMap(i.data),e=r[n]||[],a=0;e.length>a;a++)s=e[a],s.id!==n&&(l=r[s.id],o=!(!l||!l.length),s.loaded()||s.loaded(o),(s.loaded()||s.hasChildren!==!0)&&(s.hasChildren=o),o&&e.splice.apply(e,[a+1,0].concat(l)));return i.data=e,i},_queueRequest:function(e,t){t.call(this)},_modelLoaded:function(e){var t=this.get(e);t.loaded(!0),t.hasChildren=this.childNodes(t).length>0},_modelError:function(e,t){this.get(e)._error=t},read:function(e){return e&&e.id||(this._data=this._observe([])),f.fn.read.call(this,e)},load:function(e){var t="_query";return!e.loaded()&&e.hasChildren&&(t="read"),this[t]({id:e.id}).then(_(this._modelLoaded,this,e.id),_(this._modelError,this,e.id))},_byParentId:function(e,t){var n,i,r=[],o=this.view();if(e===t)return[];for(i=0;o.length>i;i++)n=o.at(i),n.parentId==e&&r.push(n);return r},_defaultParentId:function(){return this.reader.model.fn.defaults.parentId},childNodes:function(e){return this._byParentId(e.id,this._defaultParentId())},rootNodes:function(){return this._byParentId(this._defaultParentId())},parentNode:function(e){return this.get(e.parentId)},level:function(e){var t=-1;e instanceof N||(e=this.get(e));do e=this.parentNode(e),t++;while(e);return t},filter:function(e){var n=f.fn.filter;return e===t?n.call(this,e):(n.call(this,e),t)}});V.create=function(t){return e.isArray(t)?t={data:t}:t instanceof g&&(t={data:t.toJSON()}),t instanceof V?t:new V(t)},i=kendo.Observable.extend({init:function(e,t){kendo.Observable.fn.init.call(this),t=this.options=s(!0,{},this.options,t),this.element=e,this.bind(this.events,t),this.model=this.options.model,this.fields=this._fields(this.options.columns),this._initContainer(),this.createEditable()},events:[],_initContainer:function(){this.wrapper=this.element},createEditable:function(){var e=this.options;this.editable=new h.Editable(this.wrapper,{fields:this.fields,target:e.target,clearContainer:e.clearContainer,model:this.model})},_isEditable:function(e){return e.field&&this.model.editable(e.field)},_fields:function(e){var t,n,i,r=[];for(t=0,n=e.length;n>t;t++)i=e[t],this._isEditable(i)&&r.push({field:i.field,format:i.format,editor:i.editor});return r},end:function(){return this.editable.end()},close:function(){this.destroy()},destroy:function(){this.editable.destroy(),this.editable.element.find("["+kendo.attr("container-for")+"]").empty(),this.model=this.wrapper=this.element=this.columns=this.editable=null}}),r=i.extend({init:function(e,t){i.fn.init.call(this,e,t),this._attachHandlers(),this.open()},events:[B,M],options:{window:{modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1}},_initContainer:function(){var t=this.options,n=[];
this.wrapper=e('<div class="k-popup-edit-form"/>').attr(kendo.attr("uid"),this.model.uid).append('<div class="k-edit-form-container"/>'),t.template?(this._appendTemplate(n),this.fields=[]):this._appendFields(n),this._appendButtons(n),new l.Tree(this.wrapper.children()[0]).render(n),this.wrapper.appendTo(t.appendTo),this.window=new h.Window(this.wrapper,t.window)},_appendTemplate:function(e){var t=this.options.template;typeof t===b&&(t=window.unescape(t)),t=kendo.template(t)(this.model),e.push(u(t))},_appendFields:function(e){var t,n,i,r=this.options.columns;for(t=0,n=r.length;n>t;t++)i=r[t],i.command||(e.push(u('<div class="k-edit-label"><label for="'+i.field+'">'+(i.title||i.field||"")+"</label></div>")),e.push(this._isEditable(i)?u("<div "+kendo.attr("container-for")+'="'+i.field+'" class="k-edit-field"></div>'):c("div",{"class":"k-edit-field"},[this.options.fieldRenderer(i,this.model)])))},_appendButtons:function(e){e.push(c("div",{"class":"k-edit-buttons k-state-default"},this.options.commandRenderer()))},_attachHandlers:function(){var e=this._cancelProxy=_(this._cancel,this);this.wrapper.on(D+T,".k-grid-cancel",this._cancelProxy),this._saveProxy=_(this._save,this),this.wrapper.on(D+T,".k-grid-update",this._saveProxy),this.window.bind("close",function(t){t.userTriggered&&e(t)})},_dettachHandlers:function(){this._cancelProxy=null,this._saveProxy=null,this.wrapper.off(T)},_cancel:function(e){this.trigger(B,e)},_save:function(){this.trigger(M)},open:function(){this.window.center().open()},close:function(){this.window.bind("deactivate",_(this.destroy,this)).close()},destroy:function(){this.window.destroy(),this.window=null,this._dettachHandlers(),i.fn.destroy.call(this)}}),o=p.extend({init:function(e,t){p.fn.init.call(this,e,t),this._dataSource(this.options.dataSource),this._columns(),this._layout(),this._sortable(),this._filterable(),this._selectable(),this._attachEvents(),this._toolbar(),this._scrollable(),this.options.autoBind&&this.dataSource.fetch(),this._adjustHeight(),kendo.notify(this)},_scrollable:function(){var e,t;this.options.scrollable&&(e=this.header.closest(".k-grid-header-wrap"),this.content.closest(".k-grid-content").bind("scroll"+T,function(){e.scrollLeft(this.scrollLeft)}),t=kendo.touchScroller(this.content.closest("div")),t&&t.movable&&(this._touchScroller=t))},_progress:function(){var e=this.options.messages;this.content.find("tr").length||this._showStatus(kendo.template("<span class='#= className #' /> #: messages.loading #")({className:O.icon+" "+O.loading,messages:e}))},_error:function(e){this.dataSource.rootNodes().length||this._render({error:e})},refresh:function(e){e=e||{},"itemchange"==e.action&&this.editor||this.trigger(F)||(this._angularItems("cleanup"),this._angularFooters("cleanup"),this._cancelEditor(),this._render(),this._adjustHeight(),this._angularItems("compile"),this._angularFooters("compile"),this.trigger(R))},_angularFooters:function(t){var n,i,r,o=this.dataSource.aggregates(),a=this.content.find("tr").filter(function(){return e(this).hasClass(O.footerTemplate)});for(n=0;a.length>n;n++)i=a.eq(n),r=o[i.attr("data-parentId")],this._angularFooter(t,i.find("td").get(),r)},_angularFooter:function(e,t,n){var i=this.columns;this.angular(e,function(){return{elements:t,data:y(i,function(e){return{column:e,aggregate:n&&n[e.field]}})}})},items:function(){return this.content.find("tr").filter(function(){return!e(this).hasClass(O.footerTemplate)})},_showStatus:function(t){var n=this.element.find(".k-status");n.length||(n=e("<div class='k-status' />").appendTo(this.element)),this._contentTree.render([]),this.content.closest(S+O.gridContent).hide(),n.html(t)},_hideStatus:function(){this.element.find(".k-status").remove(),this.content.closest(S+O.gridContent).show()},_adjustHeight:function(){var e,t=this.element,n=t.find(S+O.gridContentWrap),i=t.find(S+O.gridHeader),r=t.find(S+O.gridToolbar);t.height(this.options.height),e=function(e){var t,n;return e[0].style.height?!0:(t=e.height(),e.height("auto"),n=e.height(),e.height(""),t!=n)},e(t)&&n.height(t.height()-i.outerHeight()-r.outerHeight())},destroy:function(){p.fn.destroy.call(this);var e=this.dataSource;e.unbind(k,this._refreshHandler),e.unbind(x,this._errorHandler),e.unbind(C,this._progressHandler),this._destroyEditor(),this.element.off(T),this._touchScroller&&this._touchScroller.destroy(),this._refreshHandler=this._errorHandler=this._progressHandler=null,this.header=this.content=this.element=null,this._statusTree=this._headerTree=this._contentTree=null},options:{name:"TreeList",columns:[],autoBind:!0,scrollable:!0,selectable:!1,sortable:!1,toolbar:null,height:null,messages:{noRows:"No records to display",loading:"Loading...",requestFailed:"Request failed.",retry:"Retry",commands:{edit:"Edit",update:"Update",canceledit:"Cancel",create:"Add new record",createchild:"Add child record",destroy:"Delete",excel:"Export to Excel",pdf:"Export to PDF"}},excel:{hierarchy:!0},filterable:!1,editable:!1},events:[k,E,M,z,P,I,F,R,B,L],_toggle:function(e,n){var i=e.loaded();e._error&&(e.expanded=!1,e._error=t),(i||!e.expanded)&&(t===n&&(n=!e.expanded),e.expanded=n,i||this.dataSource.load(e).always(_(this.refresh,this)),this.refresh())},expand:function(e){this._toggle(this.dataItem(e),!0)},collapse:function(e){this._toggle(this.dataItem(e),!1)},_toggleChildren:function(t){var n=e(t.currentTarget),i=this.dataItem(n),r=i.expanded?I:P;this.trigger(r,{model:i})||this._toggle(i),t.preventDefault()},_attachEvents:function(){var e=S+O.iconCollapse+", ."+O.iconExpand+", ."+O.refresh,t=S+O.retry,n=this.dataSource;this.element.on(A+T,e,_(this._toggleChildren,this)).on(D+T,t,_(n.fetch,n)).on(D+T,".k-button[data-command]",_(this._commandClick,this))},_commandByName:function(e){var t,n,i,r=this.columns;if(e=e.toLowerCase(),H[e])return H[e];for(t=0;r.length>t;t++)if(i=r[t].command)for(n=0;i.length>n;n++)if(i[n].name.toLowerCase()==e)return i[n]},_commandClick:function(n){var i=e(n.currentTarget),r=i.attr("data-command"),o=this._commandByName(r),a=i.closest("tr");a=a.length?a:t,o&&(o.methodName?this[o.methodName](a):o.click&&o.click.call(this,n))},_columns:function(){var e,t=this.options.columns||[];this.columns=y(t,function(e){return e="string"==typeof e?{field:e}:e,s({encoded:!0},e)}),e=w(this.columns,function(e){return e.expandable}),this.columns.length&&!e.length&&(this.columns[0].expandable=!0),this._columnTemplates(),this._columnAttributes()},_columnTemplates:function(){var e,t,n,i=this.columns;for(e=0,t=i.length;t>e;e++)n=i[e],n.template&&(n.template=kendo.template(n.template)),n.headerTemplate&&(n.headerTemplate=kendo.template(n.headerTemplate)),n.footerTemplate&&(n.footerTemplate=kendo.template(n.footerTemplate))},_columnAttributes:function(){var e,t,n,i,r,o,a=this.columns;for(e=0,t=a.length;t>e;e++)if(n=a[e].attributes,n&&n.style)for(i=n.style.split(";"),n.style={},r=0;i.length>r;r++)o=i[r].split(":"),n.style[o[0]]=o[1]},_layout:function(){var e,t,n=this.element,i=this._colgroup(),r="";this.wrapper=n.addClass(O.wrapper),r="<div class='#= gridHeader #' style=\"padding-right: "+kendo.support.scrollbar()+"px;\"><div class='#= gridHeaderWrap #'><table role='grid'>"+i+"<thead role='rowgroup' /></table></div></div><div class='#= gridContentWrap #'><table role='treegrid' tabindex='0'>"+i+"<tbody /></table></div>",this.options.scrollable||(r="<table role='treegrid' tabindex='0'>"+i+"<thead class='#= gridHeader #' role='rowgroup' /><tbody /></table>"),this.options.toolbar&&(r="<div class='#= header # #= gridToolbar #' />"+r),n.append(kendo.template(r)(O)+"<div class='k-status' />"),this.toolbar=n.find(S+O.gridToolbar),e=this.header=n.find(S+O.gridHeader).find("thead").addBack().filter("thead"),this._headerTree=new l.Tree(this.header[0]),this._headerTree.render([c("tr",{role:"row"},this._ths())]),t=this.columns,this.angular("compile",function(){return{elements:e.find("th.k-header").get(),data:y(t,function(e){return{column:e}})}}),this.content=n.find(S+O.gridContentWrap).find("tbody"),this.content.length||(this.content=n.find("tbody")),this._contentTree=new l.Tree(this.content[0]),this._statusTree=new l.Tree(this.element.children(".k-status")[0])},_toolbar:function(){var t,n=this.options.toolbar,i=this.toolbar;n&&(e.isArray(n)?(t=this._buildCommands(n),new l.Tree(i[0]).render(t)):i.append(kendo.template(n)({})),this.angular("compile",function(){return{elements:i.get()}}))},_render:function(e){var t,n,i;e=e||{},t=this.options.messages,n=this.dataSource.rootNodes(),i=this.dataSource.aggregates(),this._absoluteIndex=0,e.error?this._showStatus(kendo.template("#: messages.requestFailed # <button class='#= buttonClass #'>#: messages.retry #</button>")({buttonClass:[O.button,O.retry].join(" "),messages:t})):n.length?(this._hideStatus(),this._contentTree.render(this._trs({aggregates:e.aggregates,data:n,visible:!0,level:0}))):this._showStatus(kendo.htmlEncode(t.noRows))},_ths:function(){var e,t,n,i,r,o,a=this.columns,s=[];for(r=0,o=a.length;o>r;r++)e=a[r],n=[],i=[O.header],t=e.headerTemplate?e.headerTemplate({}):e.title||e.field||"",n.push(e.sortable?c("a",{href:"#",className:O.link},[d(t)]):e.headerTemplate?u(t):d(t)),s.push(c("th",{"data-field":e.field,"data-title":e.title,className:i.join(" "),role:"columnheader"},n));return s},_colgroup:function(){var e,t,n,i=this.columns,r=[];for(t=0,n=i.length;n>t;t++)r.push("<col "),e=i[t].width,e&&0!==parseInt(e,10)&&(r.push("style='width:"),r.push("string"==typeof e?e:e+"px"),r.push("'")),r.push("/>");return"<colgroup>"+r.join("")+"</colgroup>"},_trs:function(e){var n,i,r,o,a,s,l,c,d=[],u=e.level,h=e.data,p=this.dataSource,f=p.aggregates()||{};for(s=0,l=h.length;l>s;s++)r=[],n=h[s],a=n.loaded()&&p.childNodes(n),o=a&&a.length,i={"data-uid":n.uid,role:"row"},o&&(i["aria-expanded"]=!!n.expanded),this._absoluteIndex%2!==0&&r.push(O.alt),e.visible?this._absoluteIndex++:i.style={display:"none"},o&&r.push(O.group),n._edit&&r.push("k-grid-edit-row"),i.className=r.join(" ")||t,d.push(this._tds({model:n,attr:i,level:u},_(this._td,this))),o&&(d=d.concat(this._trs({parentId:n.id,aggregates:f,visible:e.visible&&!!n.expanded,data:a,level:u+1})));return this._hasFooterTemplate()&&(c=e.parentId||null,i={className:O.footerTemplate,"data-parentId":c},e.visible||(i.style={display:"none"}),d.push(this._tds({model:f[c],attr:i,level:u},this._footerTd))),d},_footerTd:function(t){var i=[],r=t.column,o=t.column.footerTemplate||e.noop,a=t.model[r.field]||{},l={role:"gridcell"};return r.expandable&&(i=i.concat(n({level:t.level+1,className:O.iconPlaceHolder}))),r.attributes&&s(l,r.attributes),i.push(d(o(a)||"")),c("td",l,i)},_hasFooterTemplate:function(){return!!w(this.columns,function(e){return e.footerTemplate}).length},_tds:function(e,t){var n,i,r,o=[],a=this.columns;for(i=0,r=a.length;r>i;i++)n=a[i],o.push(t({model:e.model,column:n,level:e.level}));return c("tr",e.attr,o)},_td:function(e){var t,i=[],r=e.model,o=e.column,a={role:"gridcell"};return r._edit&&o.field&&r.editable(o.field)?a[kendo.attr("container-for")]=o.field:(o.expandable&&(i=n({level:e.level,className:O.iconPlaceHolder}),t=[O.icon],t.push(r.hasChildren?r.expanded?O.iconCollapse:O.iconExpand:O.iconHidden),r._error?t.push(O.refresh):!r.loaded()&&r.expanded&&t.push(O.loading),i.push(c("span",{className:t.join(" ")}))),o.attributes&&s(a,o.attributes),o.command?i=this._buildCommands(r._edit?["update","canceledit"]:o.command):i.push(this._cellContent(o,r))),c("td",a,i)},_cellContent:function(e,n){var i;return e.template?i=e.template(n):e.field&&(i=n.get(e.field),e.format&&(i=kendo.format(e.format,i))),t===i&&(i=""),e.template||!e.encoded?u(i):d(i)},_buildCommands:function(e){var t,n=[];for(t=0;e.length>t;t++)n.push(this._button(e[t]));return n},_button:function(e){var t=(e.name||e).toLowerCase(),n=this.options.messages.commands[t],i=[];return e=s({},H[t],{text:n},e),e.imageClass&&i.push(c("span",{className:["k-icon",e.imageClass].join(" ")})),c("button",{"data-command":t,className:["k-button k-button-icontext",e.className].join(" ")},i.concat([d(e.text||e.name)]))},_sortable:function(){var e,t,n,i,r,o=this.columns,a=this.header.find("th"),l=kendo.attr("field"),c=this.options.sortable;if(c)for(i=0,r=a.length;r>i;i++)e=o[i],e.sortable!==!1&&!e.command&&e.field&&(n=a.eq(i),t=n.data("kendoColumnSorter"),t&&t.destroy(),n.attr(l,e.field).kendoColumnSorter(s({},c,e.sortable,{dataSource:this.dataSource})))},_filterable:function(){var e,t,n,i,r=this.header.find("th"),o=this.options.filterable;if(o)for(i=_(function(e){this.trigger(L,{field:e.field,container:e.container})},this),e=0,t=r.length;t>e;e++)n=this.columns[e],n.command||n.filterable===!1||r.eq(e).kendoFilterMenu(s(!0,{},o,n.filterable,{dataSource:this.dataSource,init:i}))},_change:function(){this.trigger(k)},_selectable:function(){var e,t=this.options.selectable;t&&(t=kendo.ui.Selectable.parseOptions(t),e=">tr:not(.k-footer-template)",t.cell&&(e+=">td"),this.selectable=new kendo.ui.Selectable(this.content,{filter:e,aria:!0,multiple:t.multiple,change:_(this._change,this)}))},select:function(e){var n=this.selectable;return t===e||n.options.multiple||(n.clear(),e=e.first()),n.value(e)},clearSelection:function(){var e=this.select();e.length&&(this.selectable.clear(),this.trigger(k))},_dataSource:function(e){var t=this.dataSource;t&&(t.unbind(k,this._refreshHandler),t.unbind(x,this._errorHandler),t.unbind(C,this._progressHandler)),this._refreshHandler=_(this.refresh,this),this._errorHandler=_(this._error,this),this._progressHandler=_(this._progress,this),t=this.dataSource=V.create(e),t.bind(k,this._refreshHandler),t.bind(x,this._errorHandler),t.bind(C,this._progressHandler)},setDataSource:function(e){this._dataSource(e),this.options.autoBind&&this.dataSource.fetch()},dataItem:function(t){var n=e(t).closest("tr"),i=this.dataSource.getByUid(n.attr(kendo.attr("uid")));return i},editRow:function(e){var t;typeof e===b&&(e=this.content.find(e)),t=this.dataItem(e),t&&("popup"!=this._editMode()&&(t._edit=!0),this._cancelEditor(),this._render(),this._createEditor(t),this.trigger(E,{container:this.editor.element,model:t}))},_cancelEdit:function(e){e=s(e,{container:this.editor.wrapper,model:this.editor.model}),this.trigger(B,e)||this.cancelRow()},cancelRow:function(){this._cancelEditor(),this._render()},saveRow:function(){var e,t=this.editor;t&&(e={model:t.model,container:t.element},t.end()&&!this.trigger(M,e)&&this.dataSource.sync())},addRow:function(e){var n=this.editor,i=0,r={};if(!n||n.end())return e?(e instanceof N||(e=this.dataItem(e)),r.parentId=e.id,i=this.dataSource.indexOf(e)+1,e.set("expanded",!0),this.dataSource.load(e).then(_(this._insertAt,this,r,i)),t):(this._insertAt(r,i),t)},_insertAt:function(e,t){e=this.dataSource.insert(t,e);var n=this.content.find("["+kendo.attr("uid")+"="+e.uid+"]");this.editRow(n)},removeRow:function(e){var t=this.dataItem(e),n={model:t,row:e};t&&!this.trigger(z,n)&&(this.dataSource.remove(t),this.dataSource.sync())},_cancelEditor:function(){var e,t=this.editor;t&&(e=t.model,this._destroyEditor(),this.dataSource.cancelChanges(e),e._edit=!1)},_destroyEditor:function(){this.editor&&(this.editor.close(),this.editor=null)},_createEditor:function(e){var t=this.content.find("["+kendo.attr("uid")+"="+e.uid+"]"),n=this._editMode(),o={columns:this.columns,model:e,target:this,clearContainer:!1,template:this.options.editable.template};"inline"==n?this.editor=new i(t,o):(s(o,{window:this.options.editable.window,commandRenderer:_(function(){return this._buildCommands(["update","canceledit"])},this),fieldRenderer:this._cellContent,save:_(this.saveRow,this),cancel:_(this._cancelEdit,this),appendTo:this.wrapper}),this.editor=new r(t,o))},_editMode:function(){var e="inline",t=this.options.editable;return t!==!0&&(e="string"==typeof t?t:t.mode||e),e.toLowerCase()}}),kendo.ExcelMixin&&kendo.ExcelMixin.extend(o.prototype),kendo.PDFMixin&&kendo.PDFMixin.extend(o.prototype),s(!0,kendo.data,{TreeListDataSource:V,TreeListModel:N}),s(!0,kendo.ui,{TreeList:o}),h.plugin(o)}(window.kendo.jQuery),function(e){function t(e){for(var t,n=0,i=e.length;i>n;n++)if(2==e[n].type){t=!0;break}t&&e.splice(n+1,0,{caption:"KPIs",defaultHierarchy:"[KPIs]",name:"KPIs",uniqueName:"[KPIs]"})}function n(e){return{name:e.uniqueName,type:e.type}}function i(e){for(var t=0,n=e.length;n>t;t++)e[t].uniqueName=e[t].name,e[t].type="kpi";return e}function r(t){var n=e(t).closest(".k-pivot-setting");return n.length?n.data("kendoPivotSettingTarget"):null}function o(e,t,n){return{hierarchyUniqueName:e,uniqueName:t,caption:t,measure:t,name:t,type:n}}function a(e){var t=e.name;return[o(t,e.value,"value"),o(t,e.goal,"goal"),o(t,e.status,"status"),o(t,e.trend,"trend")]}var s=window.kendo,l=s.ui,c=l.Widget,d=".kendoPivotConfigurator",u="mouseenter"+d+" mouseleave"+d,h=s.template('<p class="k-reset"><span class="k-icon #=icon#"></span>${name}</p><div class="k-list-container k-reset"/>'),p=c.extend({init:function(e,t){c.fn.init.call(this,e,t),this.element.addClass("k-widget k-fieldselector k-alt k-edit-form-container"),this._dataSource(),this._layout(),this.refresh(),s.notify(this)},events:[],options:{name:"PivotConfigurator",filterable:!1,sortable:!1,messages:{measures:"Drop Data Fields Here",columns:"Drop Column Fields Here",rows:"Drop Rows Fields Here",measuresLabel:"Measures",columnsLabel:"Columns",rowsLabel:"Rows",fieldsLabel:"Fields"}},_dataSource:function(){this.dataSource&&this._refreshHandler?this.dataSource.unbind("change",this._refreshHandler):this._refreshHandler=e.proxy(this.refresh,this),this.dataSource=s.data.PivotDataSource.create(this.options.dataSource),this.dataSource.bind("change",this._refreshHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.measures&&this.measures.setDataSource(e),this.rows&&this.rows.setDataSource(e),this.columns&&this.columns.setDataSource(e),this.refresh()},_treeViewDataSource:function(){var n=this;return s.data.HierarchicalDataSource.create({schema:{model:{id:"uniqueName",hasChildren:function(e){return!("hierarchyUniqueName"in e||"aggregator"in e)}}},transport:{read:function(r){var o,s,l;e.isEmptyObject(r.data)?(o=n.dataSource.schemaDimensions(),o.done(function(e){n.dataSource.cubeBuilder||t(e),r.success(e)}).fail(r.error)):(s=n.treeView.dataSource.get(r.data.uniqueName),"[KPIs]"===s.uniqueName?(l=!0,o=n.dataSource.schemaKPIs(),o.done(function(e){r.success(i(e))}).fail(r.error)):"kpi"==s.type&&(l=!0,r.success(a(s))),l||(o=2==s.type?n.dataSource.schemaMeasures():s.dimensionUniqueName?n.dataSource.schemaLevels(r.data.uniqueName):n.dataSource.schemaHierarchies(r.data.uniqueName),o.done(r.success).fail(r.error)))}}})},_layout:function(){this.form=e('<div class="k-columns k-state-default k-floatwrap"/>').appendTo(this.element),this._fields(),this._targets()},_fields:function(){var t=e('<div class="k-state-default"><p class="k-reset"><span class="k-icon k-i-group"></span>'+this.options.messages.fieldsLabel+"</p></div>").appendTo(this.form),i='# if (item.type == 2 || item.uniqueName == "[KPIs]") { #<span class="k-icon k-i-#= (item.type == 2 ? "sum" : "kpi") #"></span># } else if (item.type && item.type !== "kpi") { #<span class="k-icon k-i-dimension"></span># } ##: item.name #';this.treeView=e("<div/>").appendTo(t).kendoTreeView({template:i,dataTextField:"name",dragAndDrop:!0,autoBind:!1,dataSource:this._treeViewDataSource(),dragstart:function(e){var t=this.dataItem(e.sourceNode);(t.hasChildren||t.aggregator||t.measure)&&2!=t.type&&"[KPIs]"!==t.uniqueName||e.preventDefault()},drag:function(e){var t="k-denied",n=r(e.dropTarget);n&&n.validate(this.dataItem(e.sourceNode))&&(t="k-add"),e.setStatusClass(t)},drop:function(e){var t,i,o,s,l,c;if(e.preventDefault(),t=r(e.dropTarget),i=this.dataItem(e.sourceNode),t&&t.validate(i)){if(c=i.defaultHierarchy||i.uniqueName,"kpi"===i.type)for(l=a(i),s=l.length,c=[],o=0;s>o;o++)c.push(n(l[o]));else i.type&&(c=[n(i)]);t.add(c)}}}).data("kendoTreeView")},_createTarget:function(t,n){var i='<li class="k-item k-header" data-'+s.ns+'name="${data.name}">${data.name}',r=n.sortable,o="";return r&&(o+="#if (data.sortIcon) {#",o+='<span class="k-icon ${data.sortIcon} k-setting-sort"></span>',o+="#}#"),(n.filterable||r)&&(o+='<span class="k-icon k-i-arrowhead-s k-setting-fieldmenu"></span>'),o+='<span class="k-icon k-si-close k-setting-delete"></span>',i+='<span class="k-field-actions">'+o+"</span></li>",new s.ui.PivotSettingTarget(t,e.extend({dataSource:this.dataSource,hint:function(t){var n=e('<div class="k-fieldselector"><ul class="k-list k-reset"></ul></div>');return n.find(".k-list").append(t.clone()),n},template:i,emptyTemplate:'<li class="k-item k-empty">${data}</li>'},n))},_targets:function(){var t=e('<div class="k-state-default"/>').appendTo(this.form),n=e(h({name:this.options.messages.columnsLabel,icon:"k-i-vbars"})).appendTo(t),i=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(n.last()),r=e(h({name:this.options.messages.rowsLabel,icon:"k-i-hbars"})).appendTo(t),o=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(r.last()),a=e(h({name:this.options.messages.measuresLabel,icon:"k-i-sum"})).appendTo(t),s=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(a.last()),l=this.options;this.columns=this._createTarget(i,{filterable:l.filterable,sortable:l.sortable,connectWith:o,messages:{empty:l.messages.columns,fieldMenu:l.messages.fieldMenu}}),this.rows=this._createTarget(o,{filterable:l.filterable,setting:"rows",connectWith:i,messages:{empty:this.options.messages.rows,fieldMenu:this.options.messages.fieldMenu}}),this.measures=this._createTarget(s,{setting:"measures",messages:{empty:l.messages.measures}}),i.add(o).add(s).on(u,".k-item:not(.k-empty)",this._toggleHover)},_toggleHover:function(t){e(t.currentTarget).toggleClass("k-state-hover","mouseenter"===t.type)},_resize:function(){var e,t,n=this.element,i=this.options.height;i&&n.is(":visible")&&(n.height(i),t=n.children(".k-columns").children("div.k-state-default"),e=(n.outerHeight()-n.innerHeight())/2,i=i-(t.outerHeight(!0)-t.height())-e,t.height(i))},refresh:function(){var e=this.dataSource;(e.cubeBuilder||this._cube!==e.cube()||this._catalog!==e.catalog())&&this.treeView.dataSource.fetch(),this._catalog=this.dataSource.catalog(),this._cube=this.dataSource.cube(),this._resize()},destroy:function(){c.fn.destroy.call(this),this.dataSource.unbind("change",this._refreshHandler),this.form.find(".k-list").off(d),this.rows.destroy(),this.columns.destroy(),this.measures.destroy(),this.treeView.destroy(),this.element=null,this._refreshHandler=null}});l.plugin(p)}(window.kendo.jQuery),function(e,t,n){"use strict";function i(e){var t=k;try{return k=function(e){return e()},e()}finally{k=t}}function r(e,i,r,o){i[r]=t.copy(e.$eval(o)),i[r]===n&&o.match(/^\w*$/)&&C.warn(r+" attribute resolved to undefined. Maybe you meant to use a string literal like: '"+o+"'?")}function o(i,o,s,l,c){function d(){var n,d,h,f,g,m,v,_,y;return s.kRebind&&(n=e(e(o)[0].cloneNode(!0))),d=l.replace(/^kendo/,""),h=t.extend({},s.defaultOptions,i.$eval(s.kOptions||s.options)),(f=e(o)[l])?(g=f.widget.prototype.options,m=f.widget.prototype.events,e.each(s,function(e,t){var n,o,a,s;"source"!==e&&"kDataSource"!==e&&(n="data"+e.charAt(0).toUpperCase()+e.slice(1),0===e.indexOf("on")&&(o=e.replace(/^on./,function(e){return e.charAt(2).toLowerCase()}),m.indexOf(o)>-1&&(h[o]=t)),g.hasOwnProperty(n)?r(i,h,n,t):g.hasOwnProperty(e)&&!A[e]?r(i,h,e,t):D[e]||(a=e.match(/^k(On)?([A-Z].*)/),a&&(s=a[2].charAt(0).toLowerCase()+a[2].slice(1),a[1]&&"kOnLabel"!=e?h[s]=t:("kOnLabel"==e&&(s="onLabel"),r(i,h,s,t)))))}),v=s.kDataSource||s.source,v&&(h.dataSource=T(i,o,d,v)),h.$angular=[i],o.is("select")&&!function(t){if(t.length>0){var n=e(t[0]);!/\S/.test(n.text())&&/^\?/.test(n.val())&&n.remove()}}(o[0].options),_=f.call(o,S=h).data(l),a(_,i,s,l,c),i.$emit("kendoWidgetCreated",_),y=u(i,_),s.kRebind&&p(_,i,o,n,s.kRebind,y),_):(window.console.error("Could not find: "+l),null)}var h,f=s.kNgDelay,g=i.$eval(f);return f&&!g?(h=i.$watch(f,function(e,t){e!==t&&(h(),o.removeAttr(s.$attr.kNgDelay),f=null,k(d))}),n):d()}function a(e,t,n,i,r){if(n[r]){var o=b(n[r]).assign;if(!o)throw Error(r+" attribute used but expression in it is not assignable: "+n[i]);o(t,e)}}function s(e){return/checkbox|radio/i.test(e.attr("type"))?e.prop("checked"):e.val()}function l(e){return E.test(e[0].tagName)}function c(e,t,i,r,o){var a,c,d,u;e.value&&(a=l(i)?function(){return s(i)}:function(){return e.value()},r.$render=function(){var t=r.$viewValue;t===n&&(t=r.$modelValue),setTimeout(function(){e&&e.value(t)},0)},c=!1,l(i)&&i.on("change",function(){c=!0}),d=function(e){return function(){var n;c||(c=!1,e&&o&&(n=o.$pristine),r.$setViewValue(a()),e&&(r.$setPristine(),n&&o.$setPristine()),m(t))}},e.first("change",d(!1)),e.first("dataBound",d(!0)),u=a(),u!=r.$viewValue&&(r.$isEmpty(r.$viewValue)?null!=u&&""!==u&&u!=r.$viewValue&&r.$setViewValue(u):e.value(r.$viewValue)),r.$setPristine())}function d(e,t,i){var r,o,a;return"function"!=typeof e.value?(C.warn("k-ng-model specified on a widget that does not have the value() method: "+e.options.name),n):(r=b(i),o=r.assign,a=!1,e.$angular_setLogicValue(r(t)),t.$watch(i,function(t,i){t===n&&(t=null),a||t!==i&&e.$angular_setLogicValue(t)}),e.first("change",function(){a=!0,t.$apply(function(){o(t,e.$angular_getLogicValue())}),a=!1}),n)}function u(e,t){var n=e.$on("$destroy",function(){n(),t&&(t.element&&(t=g(t.element),t&&t.destroy()),t=null)});return n}function h(t,n){function i(){a.disconnect()}function r(){a.observe(e(n)[0],{attributes:!0})}var o,a;window.MutationObserver&&t.wrapper&&(o=[].slice.call(e(n)[0].classList),a=new MutationObserver(function(n){i(),t&&(n.forEach(function(n){var i,r=e(t.wrapper)[0];switch(n.attributeName){case"class":i=[].slice.call(n.target.classList),i.forEach(function(e){o.indexOf(e)<0&&(r.classList.add(e),kendo.ui.ComboBox&&t instanceof kendo.ui.ComboBox&&t.input[0].classList.add(e))}),o.forEach(function(e){i.indexOf(e)<0&&(r.classList.remove(e),kendo.ui.ComboBox&&t instanceof kendo.ui.ComboBox&&t.input[0].classList.remove(e))}),o=i;break;case"disabled":"function"==typeof t.enable&&t.enable(!e(n.target).attr("disabled"));break;case"readonly":"function"==typeof t.readonly&&t.readonly(!!e(n.target).attr("readonly"))}}),r())}),r(),t.first("destroy",i))}function p(t,n,i,r,o,a){var s=n.$watch(o,function(o,l){var c,d,u;o!==l&&(s(),c=e(t.wrapper)[0],d=e(t.element)[0],u=i.injector().get("$compile"),t.destroy(),a&&a(),t=null,c&&d&&(c.parentNode.replaceChild(d,c),e(i).replaceWith(r)),u(r)(n))},!0);m(n)}function f(e,n){function i(e,t){y.directive(e,["directiveFactory",function(n){return n.create(t,e)}])}var r,o,a,s,l=n?"Mobile":"";l+=e.fn.options.name,r=l,o="kendo"+l.charAt(0)+l.substr(1).toLowerCase(),l="kendo"+l,a=l.replace(/([A-Z])/g,"-$1"),-1==P.indexOf(l.replace("kendo",""))&&(s=l===o?[l]:[l,o],t.forEach(s,function(e){y.directive(e,function(){return{restrict:"E",replace:!0,template:function(e){var t=M[r]||"div";return"<"+t+" "+a+">"+e.html()+"</"+t+">"}}})})),I.indexOf(l.replace("kendo",""))>-1||(i(l,l),o!=l&&i(o,l))}function g(t){return t=e(t),kendo.widgetInstance(t,kendo.ui)||kendo.widgetInstance(t,kendo.mobile.ui)||kendo.widgetInstance(t,kendo.dataviz.ui)}function m(e,t){var n=e.$root||e,i=/^\$(digest|apply)$/.test(n.$$phase);t?i?t():n.$apply(t):i||n.$digest()}function v(t,n){t.$destroy(),n&&e(n).removeData("$scope").removeData("$isolateScope").removeData("$isolateScopeNoTemplate").removeClass("ng-scope")}function _(n,i,r){var o,a,s;if(e.isArray(n))return t.forEach(n,function(e){_(e,i,r)});if("string"==typeof n){for(o=n.split("."),a=kendo;a&&o.length>0;)a=a[o.shift()];if(!a)return z.push([n,i,r]),!1;n=a.prototype}return s=n[i],n[i]=function(){var e=this,t=arguments;return r.apply({self:e,next:function(){return s.apply(e,arguments.length>0?arguments:t)}},t)},!0}var y,w,b,k,x,C,S,T,D,A,E,M,P,I,z,F;t&&(y=t.module("kendo.directives",[]),w=t.injector(["ng"]),b=w.get("$parse"),k=w.get("$timeout"),C=w.get("$log"),T=function(){var e={TreeList:"TreeListDataSource",TreeView:"HierarchicalDataSource",Scheduler:"SchedulerDataSource",PanelBar:"$PLAIN",Menu:"$PLAIN",ContextMenu:"$PLAIN"},t=function(e,t){return"$PLAIN"==t?e:kendo.data[t].create(e)};return function(n,i,r,o){var a=e[r]||"DataSource",s=t(n.$eval(o),a);return n.$watch(o,function(e,n){var r,o;e!==n&&(r=t(e,a),o=g(i),o&&"function"==typeof o.setDataSource&&o.setDataSource(r))}),s}}(),D={kDataSource:!0,kOptions:!0,kRebind:!0,kNgModel:!0,kNgDelay:!0},A={name:!0,title:!0,style:!0},E=/^(input|select|textarea)$/i,y.factory("directiveFactory",["$compile",function(t){var n,i=0,r=!1;return x=t,n=function(t,n){return{restrict:"AC",require:["?ngModel","^?form"],scope:!1,controller:["$scope","$attrs","$element",function(e,t){this.template=function(e,n){t[e]=kendo.stringify(n)}}],link:function(a,s,l,u){var p=u[0],f=u[1],g=e(s),m=t.replace(/([A-Z])/g,"-$1"),v="hidden"!==g.css("visibility");g.attr(m,g.attr("data-"+m)),g[0].removeAttribute("data-"+m),v&&g.css("visibility","hidden"),++i,k(function(){v&&g.css("visibility","");var u=o(a,s,l,t,n);u&&(p&&c(u,a,s,p,f),l.kNgModel&&d(u,a,l.kNgModel),h(u,s),--i,0===i&&(r||(r=!0,a.$emit("kendoRendered"),e("form").each(function(){var t=e(this).controller("form");t&&t.$setPristine()}))))})}}},{create:n}}]),M={Editor:"textarea",NumericTextBox:"input",DatePicker:"input",DateTimePicker:"input",TimePicker:"input",AutoComplete:"input",ColorPicker:"input",MaskedTextBox:"input",MultiSelect:"input",Upload:"input",Validator:"form",Button:"button",MobileButton:"a",MobileBackButton:"a",MobileDetailButton:"a",ListView:"ul",MobileListView:"ul",TreeView:"ul",Menu:"ul",ContextMenu:"ul",ActionSheet:"ul"},P=["MobileView","MobileLayout","MobileSplitView","MobilePane","MobileModalView"],I=["MobileApplication","MobileView","MobileModalView","MobileLayout","MobileActionSheet","MobileDrawer","MobileSplitView","MobilePane","MobileScrollView","MobilePopOver"],t.forEach(["MobileNavBar","MobileButton","MobileBackButton","MobileDetailButton","MobileTabStrip","MobileScrollView"],function(e){I.push(e),e="kendo"+e,y.directive(e,function(){return{restrict:"A",link:function(t,n,i){o(t,n,i,e,e)}}})}),function(){function e(e){return function(n){t.forEach(n,function(t){t.fn&&t.fn.options&&t.fn.options.name&&/^[A-Z]/.test(t.fn.options.name)&&f(t,e)})}}t.forEach([kendo.ui,kendo.dataviz&&kendo.dataviz.ui],e(!1)),t.forEach([kendo.mobile&&kendo.mobile.ui],e(!0))}(),z=[],_(kendo.ui,"plugin",function(t,n,i){this.next(),z=e.grep(z,function(e){return!_.apply(null,e)}),f(t,"Mobile"==i)}),_(["ui.Widget","mobile.ui.Widget"],"angular",function(r,o){var a,s=this.self;return"init"==r?(!o&&S&&(o=S),S=null,o&&o.$angular&&(s.$angular_scope=o.$angular[0],s.$angular_init(s.element,o)),n):(a=s.$angular_scope,a&&i(function(){var i,l,c=o(),d=c.elements,u=c.data;if(d.length>0)switch(r){case"cleanup":t.forEach(d,function(e){var n=t.element(e).scope();n&&n!==a&&n.$$kendoScope&&v(n,e)});break;case"compile":i=s.element.injector(),l=i?i.get("$compile"):x,t.forEach(d,function(i,r){var o,s;c.scopeFrom?o=t.element(c.scopeFrom).scope():(s=u&&u[r],s!==n&&(o=e.extend(a.$new(),s),o.$$kendoScope=!0)),l(i)(o||a)}),m(a)}}),n)}),_("ui.Widget","$angular_getLogicValue",function(){return this.self.value()}),_("ui.Widget","$angular_setLogicValue",function(e){this.self.value(e)}),_("ui.Select","$angular_getLogicValue",function(){var e=this.self.dataItem();return e?this.self.options.valuePrimitive?e[this.self.options.dataValueField]:e.toJSON():null}),_("ui.Select","$angular_setLogicValue",function(e){var t=this.self,n=t.options,i=n.dataValueField;i&&!n.valuePrimitive&&(e=null!=e?e[n.dataValueField||n.dataTextField]:null),t.value(e)}),_("ui.MultiSelect","$angular_getLogicValue",function(){var t=this.self.dataItems(),n=this.self.options.dataValueField;return n&&this.self.options.valuePrimitive&&(t=e.map(t,function(e){return e[n]})),t}),_("ui.MultiSelect","$angular_setLogicValue",function(t){null==t&&(t=[]);var n=this.self,i=n.options.dataValueField;i&&!n.options.valuePrimitive&&(t=e.map(t,function(e){return e[i]
})),n.value(t)}),_("ui.AutoComplete","$angular_getLogicValue",function(){var e,t,n,i,r,o=this.self.options,a=this.self.value().split(o.separator),s=o.valuePrimitive,l=this.self.dataSource.data(),c=[];for(e=0,t=l.length;t>e;e++)for(n=l[e],i=o.dataTextField?n[o.dataTextField]:n,r=0;a.length>r;r++)if(i===a[r]){c.push(s?i:n.toJSON());break}return c}),_("ui.AutoComplete","$angular_setLogicValue",function(t){null==t&&(t=[]);var n=this.self,i=n.options.dataTextField;i&&!n.options.valuePrimitive&&(t=e.map(t,function(e){return e[i]})),n.value(t)}),_("ui.Widget","$angular_init",function(t,n){var i,r,o,a,s=this.self;if(n&&!e.isArray(n))for(i=s.$angular_scope,r=s.events.length;--r>=0;)o=s.events[r],a=n[o],a&&"string"==typeof a&&(n[o]=s.$angular_makeEventHandler(o,i,a))}),_("ui.Widget","$angular_makeEventHandler",function(e,t,n){return n=b(n),function(e){m(t,function(){n(t,{kendoEvent:e})})}}),_(["ui.Grid","ui.ListView","ui.TreeView"],"$angular_makeEventHandler",function(e,n,i){return"change"!=e?this.next():(i=b(i),function(e){var r,o,a,s,l,c,d,u,h,p=e.sender,f=p.options,g={kendoEvent:e};for(t.isString(f.selectable)&&(r=-1!==f.selectable.indexOf("cell"),o=-1!==f.selectable.indexOf("multiple")),a=g.selected=this.select(),s=g.data=[],l=g.columns=[],d=0;a.length>d;d++)u=r?a[d].parentNode:a[d],h=p.dataItem(u),r?(t.element.inArray(h,s)<0&&s.push(h),c=t.element(a[d]).index(),t.element.inArray(c,l)<0&&l.push(c)):s.push(h);o||(g.dataItem=g.data=s[0],g.selected=a[0]),m(n,function(){i(n,g)})})}),_("ui.Grid","$angular_init",function(i,r){if(this.next(),r.columns){var o=e.extend({},kendo.Template,r.templateSettings);t.forEach(r.columns,function(e){!e.field||e.template||e.format||e.values||e.encoded!==n&&!e.encoded||(e.template="<span ng-bind='"+kendo.expr(e.field,"dataItem")+"'>#: "+kendo.expr(e.field,o.paramName)+"#</span>")})}}),_("mobile.ui.ButtonGroup","value",function(e){var t=this.self;return null!=e&&(t.select(t.element.children("li.km-button").eq(e)),t.trigger("change"),t.trigger("select",{index:t.selectedIndex})),t.selectedIndex}),_("mobile.ui.ButtonGroup","_select",function(){this.next(),this.self.trigger("change")}),y.directive("kendoMobileApplication",function(){return{terminal:!0,link:function(e,t,n){o(e,t,n,"kendoMobileApplication","kendoMobileApplication")}}}).directive("kendoMobileView",function(){return{scope:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,n._instance=o(e,t,n,"kendoMobileView","kendoMobileView")},post:function(e,t,n){n._instance._layout(),n._instance._scroller()}}}}).directive("kendoMobileDrawer",function(){return{scope:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,n._instance=o(e,t,n,"kendoMobileDrawer","kendoMobileDrawer")},post:function(e,t,n){n._instance._layout(),n._instance._scroller()}}}}).directive("kendoMobileModalView",function(){return{scope:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,n._instance=o(e,t,n,"kendoMobileModalView","kendoMobileModalView")},post:function(e,t,n){n._instance._layout(),n._instance._scroller()}}}}).directive("kendoMobileSplitView",function(){return{terminal:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,n._instance=o(e,t,n,"kendoMobileSplitView","kendoMobileSplitView")},post:function(e,t,n){n._instance._layout()}}}}).directive("kendoMobilePane",function(){return{terminal:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,o(e,t,n,"kendoMobilePane","kendoMobilePane")}}}}).directive("kendoMobileLayout",function(){return{link:{pre:function(e,t,n){o(e,t,n,"kendoMobileLayout","kendoMobileLayout")}}}}).directive("kendoMobileActionSheet",function(){return{restrict:"A",link:function(t,n,i){n.find("a[k-action]").each(function(){e(this).attr("data-"+kendo.ns+"action",e(this).attr("k-action"))}),o(t,n,i,"kendoMobileActionSheet","kendoMobileActionSheet")}}}).directive("kendoMobilePopOver",function(){return{terminal:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,o(e,t,n,"kendoMobilePopOver","kendoMobilePopOver")}}}}).directive("kendoViewTitle",function(){return{restrict:"E",replace:!0,template:function(e){return"<span data-"+kendo.ns+"role='view-title'>"+e.html()+"</span>"}}}).directive("kendoMobileHeader",function(){return{restrict:"E",link:function(e,t){t.addClass("km-header").attr("data-role","header")}}}).directive("kendoMobileFooter",function(){return{restrict:"E",link:function(e,t){t.addClass("km-footer").attr("data-role","footer")}}}).directive("kendoMobileScrollViewPage",function(){return{restrict:"E",replace:!0,template:function(e){return"<div data-"+kendo.ns+"role='page'>"+e.html()+"</div>"}}}),t.forEach(["align","icon","rel","transition","actionsheetContext"],function(e){var t="k"+e.slice(0,1).toUpperCase()+e.slice(1);y.directive(t,function(){return{restrict:"A",priority:2,link:function(n,i,r){i.attr(kendo.attr(kendo.toHyphens(e)),n.$eval(r[t]))}}})}),F={TreeMap:["Template"],MobileListView:["HeaderTemplate","Template"],MobileScrollView:["EmptyTemplate","Template"],Grid:["AltRowTemplate","DetailTemplate","RowTemplate"],ListView:["EditTemplate","Template","AltTemplate"],Pager:["SelectTemplate","LinkTemplate"],PivotGrid:["ColumnHeaderTemplate","DataCellTemplate","RowHeaderTemplate"],Scheduler:["AllDayEventTemplate","DateHeaderTemplate","EventTemplate","MajorTimeHeaderTemplate","MinorTimeHeaderTemplate"],TreeView:["Template"],Validator:["ErrorTemplate"]},function(){var e={};t.forEach(F,function(n,i){t.forEach(n,function(t){e[t]||(e[t]=[]),e[t].push("?^^kendo"+i)})}),t.forEach(e,function(e,t){var n="k"+t,i=kendo.toHyphens(n);y.directive(n,function(){return{restrict:"A",require:e,terminal:!0,compile:function(t,r){if(""===r[n]){t.removeAttr(i);var o=t[0].outerHTML;return function(r,a,s,l){for(var c;!c&&l.length;)c=l.shift();c?(c.template(n,o),t.remove()):C.warn(i+" without a matching parent widget found. It can be one of the following: "+e.join(", "))}}}}})})}())}(window.kendo.jQuery,window.angular);return window.kendo},typeof define=="function"&&define.amd?define:function(_,f){f()});
},{}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\layout.js":[function(require,module,exports){
//  This function is trigger the Right SideMenu
var layouts = function () {
    //Properties
    this.menuRight = document.getElementById('right-menu');
    this.menuRightButton = document.getElementById('right-menu-button');
    this.hasClass, this.addClass, this.removeClass;

    this.menuRightButton.onclick = function () {
        debugger;
        alert('hi');
        right_menu.toggle(this, 'active');
        right_menu.toggle(menuRight, 'cbp-spmenu-open');
        right_menu.toggle(menuRightButton, 'right-menu-button-open');
    };

    ////Initializer
    //if ('classList' in document.documentElement) {
    //    this.hasClass = function (elem, c) {
    //        return elem.classList.contains(c);
    //    };
    //    this.addClass = function (elem, c) {
    //        elem.classList.add(c);
    //    };
    //    this.removeClass = function (elem, c) {
    //        elem.classList.remove(c);
    //    };
    //}
    //else {
    //    this.hasClass = function (elem, c) {
    //        return classReg(c).test(elem.className);
    //    };
    //    this.addClass = function (elem, c) {
    //        if (!hasClass(elem, c)) {
    //            elem.className = elem.className + ' ' + c;
    //        }
    //    };
    //    this.removeClass = function (elem, c) {
    //        elem.className = elem.className.replace(classReg(c), ' ');
    //    };
    //}

    ////Methods
    //function toggleClass(elem, c) {
    //    var fn = hasClass(elem, c) ? removeClass : addClass;
    //    fn(elem, c);
    //}

    //function classReg(className) {
    //    return new RegExp("(^|\\s+)" + className + "(\\s+|$)");
    //}

    ////Child Object
    //this.right_menu = {
    //    // full names
    //    hasClass: this.hasClass,
    //    addClass: this.addClass,
    //    removeClass: this.removeClass,
    //    toggleClass: this.toggleClass,
    //    // short names
    //    has: this.hasClass,
    //    add: this.addClass,
    //    remove: this.removeClass,
    //    toggle: this.toggleClass
    //};
}

module.exports = layouts;
},{}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\main.js":[function(require,module,exports){
(function (process){
﻿process.env.BROWSERIFYSHIM_DIAGNOSTICS = 1
// Start loading the main app file. Put all of
// your application logic in there.
var $ = jQuery = require('./kendo/2014.3.1119/jquery.min.js');
var m = require('./mithril.js');
//require('./bootstrap.min.js');
require("./ripples.min.js");
require("./material.min.js");
require('./kendo/2014.3.1119/kendo.web.min.js');
require('./jquery.hotkeys.js');
require('./velocity.js');
//        <!-- Top level Mithril References -->
require('./app/app.route.js');
//        <!-- App References -->
require('./core.js');
require('./layout.js');
require('./controls.js');

$(document).ready(function () {
    $.material.init();
});
}).call(this,require('_process'))
},{"./app/app.route.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.route.js","./controls.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\controls.js","./core.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\core.js","./jquery.hotkeys.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\jquery.hotkeys.js","./kendo/2014.3.1119/jquery.min.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\kendo\\2014.3.1119\\jquery.min.js","./kendo/2014.3.1119/kendo.web.min.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\kendo\\2014.3.1119\\kendo.web.min.js","./layout.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\layout.js","./material.min.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\material.min.js","./mithril.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js","./ripples.min.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\ripples.min.js","./velocity.js":"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\velocity.js","_process":"C:\\Users\\MNguyen\\AppData\\Roaming\\npm\\node_modules\\watchify\\node_modules\\browserify\\node_modules\\process\\browser.js"}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\material.min.js":[function(require,module,exports){
(function(n){function t(n){return typeof n.which=="undefined"?!0:typeof n.which=="number"&&n.which>0?!n.ctrlKey&&!n.metaKey&&!n.altKey&&n.which!=8:!1}n.expr[":"].notmdproc=function(t){return n(t).data("mdproc")?!1:!0};n.material={options:{withRipples:".tile,.btn:not(.btn-link),.card-image,.navbar a:not(.withoutripple),.dropdown-menu a,.nav-tabs a:not(.withoutripple),.withripple",inputElements:"input.form-control, textarea.form-control, select.form-control",checkboxElements:".checkbox > label > input[type=checkbox]",radioElements:".radio > label > input[type=radio]"},checkbox:function(t){n(t?t:this.options.checkboxElements).filter(":notmdproc").data("mdproc",!0).after("<span class=ripple><\/span><span class=check><\/span>")},radio:function(t){n(t?t:this.options.radioElements).filter(":notmdproc").data("mdproc",!0).after("<span class=circle><\/span><span class=check><\/span>")},input:function(i){n(i?i:this.options.inputElements).filter(":notmdproc").data("mdproc",!0).each(function(){var t=n(this),i,r;t.wrap("<div class=form-control-wrapper><\/div>");t.after("<span class=material-input><\/span>");t.hasClass("floating-label")&&(i=t.attr("placeholder"),t.attr("placeholder",null).removeClass("floating-label"),t.after("<div class=floating-label>"+i+"<\/div>"));(t.val()===null||t.val()=="undefined"||t.val()==="")&&t.addClass("empty");t.parent().next().is("[type=file]")&&(t.parent().addClass("fileinput"),r=t.parent().next().detach(),t.after(r))});n(document).on("change",".checkbox input",function(){n(this).blur()}).on("keydown paste",".form-control",function(i){t(i)&&n(this).removeClass("empty")}).on("keyup change",".form-control",function(){var t=n(this);t.val()===""?t.addClass("empty"):t.removeClass("empty")}).on("focus",".form-control-wrapper.fileinput",function(){n(this).find("input").addClass("focus")}).on("blur",".form-control-wrapper.fileinput",function(){n(this).find("input").removeClass("focus")}).on("change",".form-control-wrapper.fileinput [type=file]",function(){var t="";n.each(n(this)[0].files,function(n,i){console.log(i);t+=i.name+", "});t=t.substring(0,t.length-2);t?n(this).prev().removeClass("empty"):n(this).prev().addClass("empty");n(this).prev().val(t)})},ripples:function(n){ripples.init(n?n:this.options.withRipples)},init:function(){this.ripples();this.input();this.checkbox();this.radio();document.arrive&&document.arrive("input, textarea, select",function(){n.material.init()}),function(){var i=setInterval(function(){n("input").each(function(){n(this).val()!==n(this).attr("value")&&n(this).trigger("change")})},100),t;setTimeout(function(){clearInterval(i)},1e4);n(document).on("focus","input",function(){var i=n(this).parents("form").find("input");t=setInterval(function(){i.each(function(){n(this).val()!==n(this).attr("value")&&n(this).trigger("change")})},100)}).on("blur","input",function(){clearInterval(t)})}()}}})(jQuery);
/*
//# sourceMappingURL=material.min.js.map
*/
},{}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js":[function(require,module,exports){
var m = (function app(window, undefined) {
	var OBJECT = "[object Object]", ARRAY = "[object Array]", STRING = "[object String]", FUNCTION = "function";
	var type = {}.toString;
	var parser = /(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g, attrParser = /\[(.+?)(?:=("|'|)(.*?)\2)?\]/;
	var voidElements = /^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/;

	// caching commonly used variables
	var $document, $location, $requestAnimationFrame, $cancelAnimationFrame;

	// self invoking function needed because of the way mocks work
	function initialize(window){
		$document = window.document;
		$location = window.location;
		$cancelAnimationFrame = window.cancelAnimationFrame || window.clearTimeout;
		$requestAnimationFrame = window.requestAnimationFrame || window.setTimeout;
	}

	initialize(window);


	/*
	 * @typedef {String} Tag
	 * A string that looks like -> div.classname#id[param=one][param2=two]
	 * Which describes a DOM node
	 */

	/*
	 *
	 * @param {Tag} The DOM node tag
	 * @param {Object=[]} optional key-value pairs to be mapped to DOM attrs
	 * @param {...mNode=[]} Zero or more Mithril child nodes. Can be an array, or splat (optional)
	 *
	 */
	function m() {
		var args = [].slice.call(arguments);
		var hasAttrs = args[1] != null && type.call(args[1]) == OBJECT && !("tag" in args[1]) && !("subtree" in args[1]);
		var attrs = hasAttrs ? args[1] : {};
		var classAttrName = "class" in attrs ? "class" : "className";
		var cell = {tag: "div", attrs: {}};
		var match, classes = [];
		if (type.call(args[0]) != STRING) throw new Error("selector in m(selector, attrs, children) should be a string")
		while (match = parser.exec(args[0])) {
			if (match[1] == "" && match[2]) cell.tag = match[2];
			else if (match[1] == "#") cell.attrs.id = match[2];
			else if (match[1] == ".") classes.push(match[2]);
			else if (match[3][0] == "[") {
				var pair = attrParser.exec(match[3]);
				cell.attrs[pair[1]] = pair[3] || (pair[2] ? "" :true)
			}
		}
		if (classes.length > 0) cell.attrs[classAttrName] = classes.join(" ");


		var children = hasAttrs ? args[2] : args[1];
		if (type.call(children) == ARRAY) {
			cell.children = children
		}
		else {
			cell.children = hasAttrs ? args.slice(2) : args.slice(1)
		}

		for (var attrName in attrs) {
			if (attrName == classAttrName) cell.attrs[attrName] = (cell.attrs[attrName] || "") + " " + attrs[attrName];
			else cell.attrs[attrName] = attrs[attrName]
		}
		return cell
	}
	function build(parentElement, parentTag, parentCache, parentIndex, data, cached, shouldReattach, index, editable, namespace, configs) {
		//`build` is a recursive function that manages creation/diffing/removal of DOM elements based on comparison between `data` and `cached`
		//the diff algorithm can be summarized as this:
		//1 - compare `data` and `cached`
		//2 - if they are different, copy `data` to `cached` and update the DOM based on what the difference is
		//3 - recursively apply this algorithm for every array and for the children of every virtual element

		//the `cached` data structure is essentially the same as the previous redraw's `data` data structure, with a few additions:
		//- `cached` always has a property called `nodes`, which is a list of DOM elements that correspond to the data represented by the respective virtual element
		//- in order to support attaching `nodes` as a property of `cached`, `cached` is *always* a non-primitive object, i.e. if the data was a string, then cached is a String instance. If data was `null` or `undefined`, cached is `new String("")`
		//- `cached also has a `configContext` property, which is the state storage object exposed by config(element, isInitialized, context)
		//- when `cached` is an Object, it represents a virtual element; when it's an Array, it represents a list of elements; when it's a String, Number or Boolean, it represents a text node

		//`parentElement` is a DOM element used for W3C DOM API calls
		//`parentTag` is only used for handling a corner case for textarea values
		//`parentCache` is used to remove nodes in some multi-node cases
		//`parentIndex` and `index` are used to figure out the offset of nodes. They're artifacts from before arrays started being flattened and are likely refactorable
		//`data` and `cached` are, respectively, the new and old nodes being diffed
		//`shouldReattach` is a flag indicating whether a parent node was recreated (if so, and if this node is reused, then this node must reattach itself to the new parent)
		//`editable` is a flag that indicates whether an ancestor is contenteditable
		//`namespace` indicates the closest HTML namespace as it cascades down from an ancestor
		//`configs` is a list of config functions to run after the topmost `build` call finishes running

		//there's logic that relies on the assumption that null and undefined data are equivalent to empty strings
		//- this prevents lifecycle surprises from procedural helpers that mix implicit and explicit return statements (e.g. function foo() {if (cond) return m("div")}
		//- it simplifies diffing code
		if (data == null) data = "";
		if (data.subtree === "retain") return cached;
		var cachedType = type.call(cached), dataType = type.call(data);
		if (cached == null || cachedType != dataType) {
			if (cached != null) {
				if (parentCache && parentCache.nodes) {
					var offset = index - parentIndex;
					var end = offset + (dataType == ARRAY ? data : cached.nodes).length;
					clear(parentCache.nodes.slice(offset, end), parentCache.slice(offset, end))
				}
				else if (cached.nodes) clear(cached.nodes, cached)
			}
			cached = new data.constructor;
			if (cached.tag) cached = {}; //if constructor creates a virtual dom element, use a blank object as the base cached node instead of copying the virtual el (#277)
			cached.nodes = []
		}

		if (dataType == ARRAY) {
			//recursively flatten array
			for (var i = 0; i < data.length; i++) {
				if (type.call(data[i]) == ARRAY) {
					data = data.concat.apply([], data);
					i-- //check current index again and flatten until there are no more nested arrays at that index
				}
			}
			
			var nodes = [], intact = cached.length === data.length, subArrayCount = 0;

			//keys algorithm: sort elements without recreating them if keys are present
			//1) create a map of all existing keys, and mark all for deletion
			//2) add new keys to map and mark them for addition
			//3) if key exists in new list, change action from deletion to a move
			//4) for each key, handle its corresponding action as marked in previous steps
			//5) copy unkeyed items into their respective gaps
			var DELETION = 1, INSERTION = 2 , MOVE = 3;
			var existing = {}, unkeyed = [], shouldMaintainIdentities = false;
			for (var i = 0; i < cached.length; i++) {
				if (cached[i] && cached[i].attrs && cached[i].attrs.key != null) {
					shouldMaintainIdentities = true;
					existing[cached[i].attrs.key] = {action: DELETION, index: i}
				}
			}
			if (shouldMaintainIdentities) {
				for (var i = 0; i < data.length; i++) {
					if (data[i] && data[i].attrs) {
						if (data[i].attrs.key != null) {
							var key = data[i].attrs.key;
							if (!existing[key]) existing[key] = {action: INSERTION, index: i};
							else existing[key] = {
								action: MOVE,
								index: i,
								from: existing[key].index,
								element: parentElement.childNodes[existing[key].index] || $document.createElement("div")
							}
						}
						else unkeyed.push({index: i, element: parentElement.childNodes[i] || $document.createElement("div")})
					}
				}
				var actions = Object.keys(existing).map(function(key) {return existing[key]});
				var changes = actions.sort(function(a, b) {return a.action - b.action || a.index - b.index});
				var newCached = cached.slice();

				for (var i = 0, change; change = changes[i]; i++) {
					if (change.action == DELETION) {
						clear(cached[change.index].nodes, cached[change.index]);
						newCached.splice(change.index, 1)
					}
					if (change.action == INSERTION) {
						var dummy = $document.createElement("div");
						dummy.key = data[change.index].attrs.key;
						parentElement.insertBefore(dummy, parentElement.childNodes[change.index] || null);
						newCached.splice(change.index, 0, {attrs: {key: data[change.index].attrs.key}, nodes: [dummy]})
					}

					if (change.action == MOVE) {
						if (parentElement.childNodes[change.index] !== change.element && change.element !== null) {
							parentElement.insertBefore(change.element, parentElement.childNodes[change.index] || null)
						}
						newCached[change.index] = cached[change.from]
					}
				}
				for (var i = 0; i < unkeyed.length; i++) {
					var change = unkeyed[i];
					parentElement.insertBefore(change.element, parentElement.childNodes[change.index] || null);
					newCached[change.index] = cached[change.index]
				}
				cached = newCached;
				cached.nodes = [];
				for (var i = 0, child; child = parentElement.childNodes[i]; i++) cached.nodes.push(child)
			}
			//end key algorithm

			for (var i = 0, cacheCount = 0; i < data.length; i++) {
				//diff each item in the array
				var item = build(parentElement, parentTag, cached, index, data[i], cached[cacheCount], shouldReattach, index + subArrayCount || subArrayCount, editable, namespace, configs);
				if (item === undefined) continue;
				if (!item.nodes.intact) intact = false;
				if (item.$trusted) {
					//fix offset of next element if item was a trusted string w/ more than one html element
					//the first clause in the regexp matches elements
					//the second clause (after the pipe) matches text nodes
					subArrayCount += (item.match(/<[^\/]|\>\s*[^<]/g) || []).length
				}
				else subArrayCount += type.call(item) == ARRAY ? item.length : 1;
				cached[cacheCount++] = item
			}
			if (!intact) {
				//diff the array itself
				
				//update the list of DOM nodes by collecting the nodes from each item
				for (var i = 0; i < data.length; i++) {
					if (cached[i] != null) nodes.push.apply(nodes, cached[i].nodes)
				}
				//remove items from the end of the array if the new array is shorter than the old one
				//if errors ever happen here, the issue is most likely a bug in the construction of the `cached` data structure somewhere earlier in the program
				for (var i = 0, node; node = cached.nodes[i]; i++) {
					if (node.parentNode != null && nodes.indexOf(node) < 0) clear([node], [cached[i]])
				}
				if (data.length < cached.length) cached.length = data.length;
				cached.nodes = nodes
			}
		}
		else if (data != null && dataType == OBJECT) {
			if (!data.attrs) data.attrs = {};
			if (!cached.attrs) cached.attrs = {};

			var dataAttrKeys = Object.keys(data.attrs);
			var hasKeys = dataAttrKeys.length > ("key" in data.attrs ? 1 : 0)
			//if an element is different enough from the one in cache, recreate it
			if (data.tag != cached.tag || dataAttrKeys.join() != Object.keys(cached.attrs).join() || data.attrs.id != cached.attrs.id) {
				if (cached.nodes.length) clear(cached.nodes);
				if (cached.configContext && typeof cached.configContext.onunload == FUNCTION) cached.configContext.onunload()
			}
			if (type.call(data.tag) != STRING) return;

			var node, isNew = cached.nodes.length === 0;
			if (data.attrs.xmlns) namespace = data.attrs.xmlns;
			else if (data.tag === "svg") namespace = "http://www.w3.org/2000/svg";
			else if (data.tag === "math") namespace = "http://www.w3.org/1998/Math/MathML";
			if (isNew) {
				if (data.attrs.is) node = namespace === undefined ? $document.createElement(data.tag, data.attrs.is) : $document.createElementNS(namespace, data.tag, data.attrs.is);
				else node = namespace === undefined ? $document.createElement(data.tag) : $document.createElementNS(namespace, data.tag);
				cached = {
					tag: data.tag,
					//set attributes first, then create children
					attrs: dataAttrKeys.length ? setAttributes(node, data.tag, data.attrs, {}, namespace) : {},
					children: data.children != null && data.children.length > 0 ?
						build(node, data.tag, undefined, undefined, data.children, cached.children, true, 0, data.attrs.contenteditable ? node : editable, namespace, configs) :
						data.children,
					nodes: [node]
				};
				if (cached.children && !cached.children.nodes) cached.children.nodes = [];
				//edge case: setting value on <select> doesn't work before children exist, so set it again after children have been created
				if (data.tag == "select" && data.attrs.value) setAttributes(node, data.tag, {value: data.attrs.value}, {}, namespace);
				parentElement.insertBefore(node, parentElement.childNodes[index] || null)
			}
			else {
				node = cached.nodes[0];
				if (dataAttrKeys.length) setAttributes(node, data.tag, data.attrs, cached.attrs, namespace);
				cached.children = build(node, data.tag, undefined, undefined, data.children, cached.children, false, 0, data.attrs.contenteditable ? node : editable, namespace, configs);
				cached.nodes.intact = true;
				if (shouldReattach === true && node != null) parentElement.insertBefore(node, parentElement.childNodes[index] || null)
			}
			//schedule configs to be called. They are called after `build` finishes running
			if (typeof data.attrs["config"] == FUNCTION) {
				var context = cached.configContext = cached.configContext || {};

				// bind
				var callback = function(data, args) {
					return function() {
						return data.attrs["config"].apply(data, args)
					}
				};
				configs.push(callback(data, [node, !isNew, context, cached]))
			}
		}
		else if (typeof dataType != FUNCTION) {
			//handle text nodes
			var nodes;
			if (cached.nodes.length === 0) {
				if (data.$trusted) {
					nodes = injectHTML(parentElement, index, data)
				}
				else {
					nodes = [$document.createTextNode(data)];
					if (!parentElement.nodeName.match(voidElements)) parentElement.insertBefore(nodes[0], parentElement.childNodes[index] || null)
				}
				cached = "string number boolean".indexOf(typeof data) > -1 ? new data.constructor(data) : data;
				cached.nodes = nodes
			}
			else if (cached.valueOf() !== data.valueOf() || shouldReattach === true) {
				nodes = cached.nodes;
				if (!editable || editable !== $document.activeElement) {
					if (data.$trusted) {
						clear(nodes, cached);
						nodes = injectHTML(parentElement, index, data)
					}
					else {
						//corner case: replacing the nodeValue of a text node that is a child of a textarea/contenteditable doesn't work
						//we need to update the value property of the parent textarea or the innerHTML of the contenteditable element instead
						if (parentTag === "textarea") parentElement.value = data;
						else if (editable) editable.innerHTML = data;
						else {
							if (nodes[0].nodeType == 1 || nodes.length > 1) { //was a trusted string
								clear(cached.nodes, cached);
								nodes = [$document.createTextNode(data)]
							}
							parentElement.insertBefore(nodes[0], parentElement.childNodes[index] || null);
							nodes[0].nodeValue = data
						}
					}
				}
				cached = new data.constructor(data);
				cached.nodes = nodes
			}
			else cached.nodes.intact = true
		}

		return cached
	}
	function setAttributes(node, tag, dataAttrs, cachedAttrs, namespace) {
		for (var attrName in dataAttrs) {
			var dataAttr = dataAttrs[attrName];
			var cachedAttr = cachedAttrs[attrName];
			if (!(attrName in cachedAttrs) || (cachedAttr !== dataAttr)) {
				cachedAttrs[attrName] = dataAttr;
				try {
					//`config` isn't a real attributes, so ignore it
					//we don't ignore `key` because it must be unique and having it on the DOM helps debugging
					if (attrName === "config") continue;
					//hook event handlers to the auto-redrawing system
					else if (typeof dataAttr == FUNCTION && attrName.indexOf("on") == 0) {
						node[attrName] = autoredraw(dataAttr, node)
					}
					//handle `style: {...}`
					else if (attrName === "style" && dataAttr != null && type.call(dataAttr) == OBJECT) {
						for (var rule in dataAttr) {
							if (cachedAttr == null || cachedAttr[rule] !== dataAttr[rule]) node.style[rule] = dataAttr[rule]
						}
						for (var rule in cachedAttr) {
							if (!(rule in dataAttr)) node.style[rule] = ""
						}
					}
					//handle SVG
					else if (namespace != null) {
						if (attrName === "href") node.setAttributeNS("http://www.w3.org/1999/xlink", "href", dataAttr);
						else if (attrName === "className") node.setAttribute("class", dataAttr);
						else node.setAttribute(attrName, dataAttr)
					}
					//handle cases that are properties (but ignore cases where we should use setAttribute instead)
					//- list and form are typically used as strings, but are DOM element references in js
					//- when using CSS selectors (e.g. `m("[style='']")`), style is used as a string, but it's an object in js
					else if (attrName in node && !(attrName == "list" || attrName == "style" || attrName == "form")) {
						//#348 don't set the value if not needed otherwise cursor placement breaks in Chrome
						if (node[attrName] != dataAttr) node[attrName] = dataAttr
					}
					else node.setAttribute(attrName, dataAttr)
				}
				catch (e) {
					//swallow IE's invalid argument errors to mimic HTML's fallback-to-doing-nothing-on-invalid-attributes behavior
					if (e.message.indexOf("Invalid argument") < 0) throw e
				}
			}
			//#348 dataAttr may not be a string, so use loose comparison (double equal) instead of strict (triple equal)
			else if (attrName === "value" && tag === "input" && node.value != dataAttr) {
				node.value = dataAttr
			}
		}
		return cachedAttrs
	}
	function clear(nodes, cached) {
		for (var i = nodes.length - 1; i > -1; i--) {
			if (nodes[i] && nodes[i].parentNode) {
				try {nodes[i].parentNode.removeChild(nodes[i])}
				catch (e) {} //ignore if this fails due to order of events (see http://stackoverflow.com/questions/21926083/failed-to-execute-removechild-on-node)
				cached = [].concat(cached);
				if (cached[i]) unload(cached[i])
			}
		}
		if (nodes.length != 0) nodes.length = 0
	}
	function unload(cached) {
		if (cached.configContext && typeof cached.configContext.onunload == FUNCTION) cached.configContext.onunload();
		if (cached.children) {
			if (type.call(cached.children) == ARRAY) {
				for (var i = 0; i < cached.children.length; i++) unload(cached.children[i])
			}
			else if (cached.children.tag) unload(cached.children)
		}
	}
	function injectHTML(parentElement, index, data) {
		var nextSibling = parentElement.childNodes[index];
		if (nextSibling) {
			var isElement = nextSibling.nodeType != 1;
			var placeholder = $document.createElement("span");
			if (isElement) {
				parentElement.insertBefore(placeholder, nextSibling || null);
				placeholder.insertAdjacentHTML("beforebegin", data);
				parentElement.removeChild(placeholder)
			}
			else nextSibling.insertAdjacentHTML("beforebegin", data)
		}
		else parentElement.insertAdjacentHTML("beforeend", data);
		var nodes = [];
		while (parentElement.childNodes[index] !== nextSibling) {
			nodes.push(parentElement.childNodes[index]);
			index++
		}
		return nodes
	}
	function autoredraw(callback, object) {
		return function(e) {
			e = e || event;
			m.redraw.strategy("diff");
			m.startComputation();
			try {return callback.call(object, e)}
			finally {
				m.endComputation()
			}
		}
	}

	var html;
	var documentNode = {
		appendChild: function(node) {
			if (html === undefined) html = $document.createElement("html");
			if ($document.documentElement && $document.documentElement !== node) {
				$document.replaceChild(node, $document.documentElement)
			}
			else $document.appendChild(node);
			this.childNodes = $document.childNodes
		},
		insertBefore: function(node) {
			this.appendChild(node)
		},
		childNodes: []
	};
	var nodeCache = [], cellCache = {};
	m.render = function(root, cell, forceRecreation) {
		var configs = [];
		if (!root) throw new Error("Please ensure the DOM element exists before rendering a template into it.");
		var id = getCellCacheKey(root);
		var isDocumentRoot = root == $document;
		var node = isDocumentRoot || root == $document.documentElement ? documentNode : root;
		if (isDocumentRoot && cell.tag != "html") cell = {tag: "html", attrs: {}, children: cell};
		if (cellCache[id] === undefined) clear(node.childNodes);
		if (forceRecreation === true) reset(root);
		cellCache[id] = build(node, null, undefined, undefined, cell, cellCache[id], false, 0, null, undefined, configs);
		for (var i = 0; i < configs.length; i++) configs[i]()
	};
	function getCellCacheKey(element) {
		var index = nodeCache.indexOf(element);
		return index < 0 ? nodeCache.push(element) - 1 : index
	}

	m.trust = function(value) {
		value = new String(value);
		value.$trusted = true;
		return value
	};

	function gettersetter(store) {
		var prop = function() {
			if (arguments.length) store = arguments[0];
			return store
		};

		prop.toJSON = function() {
			return store
		};

		return prop
	}

	m.prop = function (store) {
		//note: using non-strict equality check here because we're checking if store is null OR undefined
		if (((store != null && type.call(store) == OBJECT) || typeof store == FUNCTION) && typeof store.then == FUNCTION) {
			return propify(store)
		}

		return gettersetter(store)
	};

	var roots = [], modules = [], controllers = [], lastRedrawId = null, lastRedrawCallTime = 0, computePostRedrawHook = null, prevented = false, topModule;
	var FRAME_BUDGET = 16; //60 frames per second = 1 call per 16 ms
	m.module = function(root, module) {
		var index = roots.indexOf(root);
		if (index < 0) index = roots.length;
		var isPrevented = false;
		if (controllers[index] && typeof controllers[index].onunload == FUNCTION) {
			var event = {
				preventDefault: function() {isPrevented = true}
			};
			controllers[index].onunload(event)
		}
		if (!isPrevented) {
			m.redraw.strategy("all");
			m.startComputation();
			roots[index] = root;
			var currentModule = topModule = module;
			var controller = new module.controller;
			//controllers may call m.module recursively (via m.route redirects, for example)
			//this conditional ensures only the last recursive m.module call is applied
			if (currentModule == topModule) {
				controllers[index] = controller;
				modules[index] = module
			}
			m.endComputation();
			return controllers[index]
		}
	};
	m.redraw = function(force) {
		//lastRedrawId is a positive number if a second redraw is requested before the next animation frame
		//lastRedrawID is null if it's the first redraw and not an event handler
		if (lastRedrawId && force !== true) {
			//when setTimeout: only reschedule redraw if time between now and previous redraw is bigger than a frame, otherwise keep currently scheduled timeout
			//when rAF: always reschedule redraw
			if (new Date - lastRedrawCallTime > FRAME_BUDGET || $requestAnimationFrame == window.requestAnimationFrame) {
				if (lastRedrawId > 0) $cancelAnimationFrame(lastRedrawId);
				lastRedrawId = $requestAnimationFrame(redraw, FRAME_BUDGET)
			}
		}
		else {
			redraw();
			lastRedrawId = $requestAnimationFrame(function() {lastRedrawId = null}, FRAME_BUDGET)
		}
	};
	m.redraw.strategy = m.prop();
	function redraw() {
		var mode = m.redraw.strategy();
		for (var i = 0; i < roots.length; i++) {
			if (controllers[i] && mode != "none") {
				m.render(roots[i], modules[i].view(controllers[i]), mode == "all")
			}
		}
		//after rendering within a routed context, we need to scroll back to the top, and fetch the document title for history.pushState
		if (computePostRedrawHook) {
			computePostRedrawHook();
			computePostRedrawHook = null
		}
		lastRedrawId = null;
		lastRedrawCallTime = new Date;
		m.redraw.strategy("diff")
	}

	var pendingRequests = 0;
	m.startComputation = function() {pendingRequests++};
	m.endComputation = function() {
		pendingRequests = Math.max(pendingRequests - 1, 0);
		if (pendingRequests == 0) m.redraw()
	};

	m.withAttr = function(prop, withAttrCallback) {
		return function(e) {
			e = e || event;
			var currentTarget = e.currentTarget || this;
			withAttrCallback(prop in currentTarget ? currentTarget[prop] : currentTarget.getAttribute(prop))
		}
	};

	//routing
	var modes = {pathname: "", hash: "#", search: "?"};
	var redirect = function() {}, routeParams = {}, currentRoute;
	m.route = function() {
		//m.route()
		if (arguments.length === 0) return currentRoute;
		else if (arguments.length === 3 && type.call(arguments[1]) == STRING) {
			var root = arguments[0], defaultRoute = arguments[1], router = arguments[2];
			redirect = function(source) {
				var path = currentRoute = normalizeRoute(source);
				if (!routeByValue(root, router, path)) {
					m.route(defaultRoute, true)
				}
			};
			var listener = m.route.mode == "hash" ? "onhashchange" : "onpopstate";
			window[listener] = function() {
				if (currentRoute != normalizeRoute($location[m.route.mode])) {
					redirect($location[m.route.mode])
				}
			};
			computePostRedrawHook = setScroll;
			window[listener]()
		}
		//config: m.route
		else if (arguments[0].addEventListener) {
			var element = arguments[0];
			var isInitialized = arguments[1];
			var context = arguments[2];
			element.href = (m.route.mode !== 'pathname' ? $location.pathname : '') + modes[m.route.mode] + this.attrs.href;
			element.removeEventListener("click", routeUnobtrusive);
			element.addEventListener("click", routeUnobtrusive)
		}
		//m.route(route, params)
		else if (type.call(arguments[0]) == STRING) {
			currentRoute = arguments[0];
			var args = arguments[1] || {}
			var queryIndex = currentRoute.indexOf("?")
			var params = queryIndex > -1 ? parseQueryString(currentRoute.slice(queryIndex + 1)) : {}
			for (var i in args) params[i] = args[i]
			var querystring = buildQueryString(params)
			var currentPath = queryIndex > -1 ? currentRoute.slice(0, queryIndex) : currentRoute
			if (querystring) currentRoute = currentPath + (currentPath.indexOf("?") === -1 ? "?" : "&") + querystring;

			var shouldReplaceHistoryEntry = (arguments.length == 3 ? arguments[2] : arguments[1]) === true;

			if (window.history.pushState) {
				computePostRedrawHook = function() {
					window.history[shouldReplaceHistoryEntry ? "replaceState" : "pushState"](null, $document.title, modes[m.route.mode] + currentRoute);
					setScroll()
				};
				redirect(modes[m.route.mode] + currentRoute)
			}
			else $location[m.route.mode] = currentRoute
		}
	};
	m.route.param = function(key) {return routeParams[key]};
	m.route.mode = "search";
	function normalizeRoute(route) {return route.slice(modes[m.route.mode].length)}
	function routeByValue(root, router, path) {
		routeParams = {};

		var queryStart = path.indexOf("?");
		if (queryStart !== -1) {
			routeParams = parseQueryString(path.substr(queryStart + 1, path.length));
			path = path.substr(0, queryStart)
		}

		for (var route in router) {
			if (route == path) {
				m.module(root, router[route]);
				return true
			}

			var matcher = new RegExp("^" + route.replace(/:[^\/]+?\.{3}/g, "(.*?)").replace(/:[^\/]+/g, "([^\\/]+)") + "\/?$");

			if (matcher.test(path)) {
				path.replace(matcher, function() {
					var keys = route.match(/:[^\/]+/g) || [];
					var values = [].slice.call(arguments, 1, -2);
					for (var i = 0; i < keys.length; i++) routeParams[keys[i].replace(/:|\./g, "")] = decodeURIComponent(values[i])
					m.module(root, router[route])
				});
				return true
			}
		}
	}
	function routeUnobtrusive(e) {
		e = e || event;
		if (e.ctrlKey || e.metaKey || e.which == 2) return;
		if (e.preventDefault) e.preventDefault();
		else e.returnValue = false;
		var currentTarget = e.currentTarget || this;
		var args = m.route.mode == "pathname" && currentTarget.search ? parseQueryString(currentTarget.search.slice(1)) : {};
		m.route(currentTarget[m.route.mode].slice(modes[m.route.mode].length), args)
	}
	function setScroll() {
		if (m.route.mode != "hash" && $location.hash) $location.hash = $location.hash;
		else window.scrollTo(0, 0)
	}
	function buildQueryString(object, prefix) {
		var str = [];
		for(var prop in object) {
			var key = prefix ? prefix + "[" + prop + "]" : prop, value = object[prop];
			str.push(value != null && type.call(value) == OBJECT ? buildQueryString(value, key) : encodeURIComponent(key) + "=" + encodeURIComponent(value))
		}
		return str.join("&")
	}
	function parseQueryString(str) {
		var pairs = str.split("&"), params = {};
		for (var i = 0; i < pairs.length; i++) {
			var pair = pairs[i].split("=");
			params[decodeSpace(pair[0])] = pair[1] ? decodeSpace(pair[1]) : ""
		}
		return params
	}
	function decodeSpace(string) {
		return decodeURIComponent(string.replace(/\+/g, " "))
	}
	function reset(root) {
		var cacheKey = getCellCacheKey(root);
		clear(root.childNodes, cellCache[cacheKey]);
		cellCache[cacheKey] = undefined
	}

	m.deferred = function () {
		var deferred = new Deferred();
		deferred.promise = propify(deferred.promise);
		return deferred
	};
	function propify(promise) {
		var prop = m.prop();
		promise.then(prop);
		prop.then = function(resolve, reject) {
			return propify(promise.then(resolve, reject))
		};
		return prop
	}
	//Promiz.mithril.js | Zolmeister | MIT
	//a modified version of Promiz.js, which does not conform to Promises/A+ for two reasons:
	//1) `then` callbacks are called synchronously (because setTimeout is too slow, and the setImmediate polyfill is too big
	//2) throwing subclasses of Error cause the error to be bubbled up instead of triggering rejection (because the spec does not account for the important use case of default browser error handling, i.e. message w/ line number)
	function Deferred(successCallback, failureCallback) {
		var RESOLVING = 1, REJECTING = 2, RESOLVED = 3, REJECTED = 4;
		var self = this, state = 0, promiseValue = 0, next = [];

		self["promise"] = {};

		self["resolve"] = function(value) {
			if (!state) {
				promiseValue = value;
				state = RESOLVING;

				fire()
			}
			return this
		};

		self["reject"] = function(value) {
			if (!state) {
				promiseValue = value;
				state = REJECTING;

				fire()
			}
			return this
		};

		self.promise["then"] = function(successCallback, failureCallback) {
			var deferred = new Deferred(successCallback, failureCallback);
			if (state == RESOLVED) {
				deferred.resolve(promiseValue)
			}
			else if (state == REJECTED) {
				deferred.reject(promiseValue)
			}
			else {
				next.push(deferred)
			}
			return deferred.promise
		};

		function finish(type) {
			state = type || REJECTED;
			next.map(function(deferred) {
				state == RESOLVED && deferred.resolve(promiseValue) || deferred.reject(promiseValue)
			})
		}

		function thennable(then, successCallback, failureCallback, notThennableCallback) {
			if (((promiseValue != null && type.call(promiseValue) == OBJECT) || typeof promiseValue == FUNCTION) && typeof then == FUNCTION) {
				try {
					// count protects against abuse calls from spec checker
					var count = 0;
					then.call(promiseValue, function(value) {
						if (count++) return;
						promiseValue = value;
						successCallback()
					}, function (value) {
						if (count++) return;
						promiseValue = value;
						failureCallback()
					})
				}
				catch (e) {
					m.deferred.onerror(e);
					promiseValue = e;
					failureCallback()
				}
			} else {
				notThennableCallback()
			}
		}

		function fire() {
			// check if it's a thenable
			var then;
			try {
				then = promiseValue && promiseValue.then
			}
			catch (e) {
				m.deferred.onerror(e);
				promiseValue = e;
				state = REJECTING;
				return fire()
			}
			thennable(then, function() {
				state = RESOLVING;
				fire()
			}, function() {
				state = REJECTING;
				fire()
			}, function() {
				try {
					if (state == RESOLVING && typeof successCallback == FUNCTION) {
						promiseValue = successCallback(promiseValue)
					}
					else if (state == REJECTING && typeof failureCallback == "function") {
						promiseValue = failureCallback(promiseValue);
						state = RESOLVING
					}
				}
				catch (e) {
					m.deferred.onerror(e);
					promiseValue = e;
					return finish()
				}

				if (promiseValue == self) {
					promiseValue = TypeError();
					finish()
				}
				else {
					thennable(then, function () {
						finish(RESOLVED)
					}, finish, function () {
						finish(state == RESOLVING && RESOLVED)
					})
				}
			})
		}
	}
	m.deferred.onerror = function(e) {
		if (type.call(e) == "[object Error]" && !e.constructor.toString().match(/ Error/)) throw e
	};

	m.sync = function(args) {
		var method = "resolve";
		function synchronizer(pos, resolved) {
			return function(value) {
				results[pos] = value;
				if (!resolved) method = "reject";
				if (--outstanding == 0) {
					deferred.promise(results);
					deferred[method](results)
				}
				return value
			}
		}

		var deferred = m.deferred();
		var outstanding = args.length;
		var results = new Array(outstanding);
		if (args.length > 0) {
			for (var i = 0; i < args.length; i++) {
				args[i].then(synchronizer(i, true), synchronizer(i, false))
			}
		}
		else deferred.resolve([]);

		return deferred.promise
	};
	function identity(value) {return value}

	function ajax(options) {
		if (options.dataType && options.dataType.toLowerCase() === "jsonp") {
			var callbackKey = "mithril_callback_" + new Date().getTime() + "_" + (Math.round(Math.random() * 1e16)).toString(36);
			var script = $document.createElement("script");

			window[callbackKey] = function(resp) {
				$document.body.removeChild(script);
				options.onload({
					type: "load",
					target: {
						responseText: resp
					}
				});
				window[callbackKey] = undefined
			};

			script.onerror = function(e) {
				$document.body.removeChild(script);

				options.onerror({
					type: "error",
					target: {
						status: 500,
						responseText: JSON.stringify({error: "Error making jsonp request"})
					}
				});
				window[callbackKey] = undefined;

				return false
			};

			script.onload = function(e) {
				return false
			};

			script.src = options.url
				+ (options.url.indexOf("?") > 0 ? "&" : "?")
				+ (options.callbackKey ? options.callbackKey : "callback")
				+ "=" + callbackKey
				+ "&" + buildQueryString(options.data || {});
			$document.body.appendChild(script)
		}
		else {
			var xhr = new window.XMLHttpRequest;
			xhr.open(options.method, options.url, true, options.user, options.password);
			xhr.onreadystatechange = function() {
				if (xhr.readyState === 4) {
					if (xhr.status >= 200 && xhr.status < 300) options.onload({type: "load", target: xhr});
					else options.onerror({type: "error", target: xhr})
				}
			};
			if (options.serialize == JSON.stringify && options.data && options.method != "GET") {
				xhr.setRequestHeader("Content-Type", "application/json; charset=utf-8")
			}
			if (options.deserialize == JSON.parse) {
				xhr.setRequestHeader("Accept", "application/json, text/*");
			}
			if (typeof options.config == FUNCTION) {
				var maybeXhr = options.config(xhr, options);
				if (maybeXhr != null) xhr = maybeXhr
			}

			var data = options.method == "GET" || !options.data ? "" : options.data
			if (data && (type.call(data) != STRING && data.constructor != window.FormData)) {
				throw "Request data should be either be a string or FormData. Check the `serialize` option in `m.request`";
			}
			xhr.send(data);
			return xhr
		}
	}
	function bindData(xhrOptions, data, serialize) {
		if (xhrOptions.method == "GET" && xhrOptions.dataType != "jsonp") {
			var prefix = xhrOptions.url.indexOf("?") < 0 ? "?" : "&";
			var querystring = buildQueryString(data);
			xhrOptions.url = xhrOptions.url + (querystring ? prefix + querystring : "")
		}
		else xhrOptions.data = serialize(data);
		return xhrOptions
	}
	function parameterizeUrl(url, data) {
		var tokens = url.match(/:[a-z]\w+/gi);
		if (tokens && data) {
			for (var i = 0; i < tokens.length; i++) {
				var key = tokens[i].slice(1);
				url = url.replace(tokens[i], data[key]);
				delete data[key]
			}
		}
		return url
	}

	m.request = function(xhrOptions) {
		if (xhrOptions.background !== true) m.startComputation();
		var deferred = m.deferred();
		var isJSONP = xhrOptions.dataType && xhrOptions.dataType.toLowerCase() === "jsonp";
		var serialize = xhrOptions.serialize = isJSONP ? identity : xhrOptions.serialize || JSON.stringify;
		var deserialize = xhrOptions.deserialize = isJSONP ? identity : xhrOptions.deserialize || JSON.parse;
		var extract = xhrOptions.extract || function(xhr) {
			return xhr.responseText.length === 0 && deserialize === JSON.parse ? null : xhr.responseText
		};
		xhrOptions.url = parameterizeUrl(xhrOptions.url, xhrOptions.data);
		xhrOptions = bindData(xhrOptions, xhrOptions.data, serialize);
		xhrOptions.onload = xhrOptions.onerror = function(e) {
			try {
				e = e || event;
				var unwrap = (e.type == "load" ? xhrOptions.unwrapSuccess : xhrOptions.unwrapError) || identity;
				var response = unwrap(deserialize(extract(e.target, xhrOptions)));
				if (e.type == "load") {
					if (type.call(response) == ARRAY && xhrOptions.type) {
						for (var i = 0; i < response.length; i++) response[i] = new xhrOptions.type(response[i])
					}
					else if (xhrOptions.type) response = new xhrOptions.type(response)
				}
				deferred[e.type == "load" ? "resolve" : "reject"](response)
			}
			catch (e) {
				m.deferred.onerror(e);
				deferred.reject(e)
			}
			if (xhrOptions.background !== true) m.endComputation()
		};
		ajax(xhrOptions);
		deferred.promise(xhrOptions.initialValue);
		return deferred.promise
	};

	//testing API
	m.deps = function(mock) {
		initialize(window = mock || window);
		return window;
	};
	//for internal testing only, do not use `m.deps.factory`
	m.deps.factory = app;

	return m
})(typeof window != "undefined" ? window : {});

if (typeof module != "undefined" && module !== null && module.exports) module.exports = m;
else if (typeof define == "function" && define.amd) define(function() {return m});

},{}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\ripples.min.js":[function(require,module,exports){
window.ripples={init:function(n){"use strict";function o(n,t){var i=n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;return i.call(n,t)}var s=100,h=500,t=function(n,t,i){typeof n=="string"&&(n=[n]);n.forEach(function(n){document.addEventListener(n,function(n){var r=typeof n.detail!="number"?n.detail:n.target;o(r,t)&&i(n,r)})})},r=function(n,t,i){var s=t,l=s.parentNode,r=document.createElement("div"),u=l.getBoundingClientRect(),c={x:n.clientX-u.left,y:(window.ontouchstart?n.clientY-window.scrollY:n.clientY)-u.top},f="scale("+Math.round(s.offsetWidth/5)+")",v=new CustomEvent("rippleEnd",{detail:r}),y,o,a;n.touches&&(c={x:n.touches[0].clientX-u.left,y:n.touches[0].clientY-u.top});e=r;r.className="ripple";r.setAttribute("style","left:"+c.x+"px; top:"+c.y+"px;");o=window.getComputedStyle(l).color;o=o.replace("rgb","rgba").replace(")",", "+.3+")");s.appendChild(r);y=window.getComputedStyle(r).opacity;r.dataset.animating=1;r.className="ripple ripple-on";a=[r.getAttribute("style"),"background-color: "+o,"-ms-transform: "+f,"-moz-transform"+f,"-webkit-transform"+f,"transform: "+f];r.setAttribute("style",a.join(";"));setTimeout(function(){r.dataset.animating=0;document.dispatchEvent(v);i&&i()},h)},u=function(n){n.className="ripple ripple-on ripple-out";setTimeout(function(){n.remove()},s)},i=!1,f,e;t(["mousedown","touchstart"],"*",function(){i=!0});t(["mouseup","touchend","mouseout"],"*",function(){i=!1});f=function(n,t){if(t.getElementsByClassName("ripple-wrapper").length===0){t.className+=" withripple";var i=document.createElement("div");i.className="ripple-wrapper";t.appendChild(i);window.ontouchstart===null&&r(n,i,function(){i.getElementsByClassName("ripple")[0].remove()})}};t(["mouseover","touchstart"],n,f);t(["mousedown","touchstart"],".ripple-wrapper",function(n,t){(n.which===0||n.which===1||n.which===2)&&r(n,t)});t("rippleEnd",".ripple-wrapper .ripple",function(n,t){var r=t.parentNode.getElementsByClassName("ripple");(!i||r[0]==t&&r.length>1)&&u(t)});t(["mouseup","touchend","mouseout"],".ripple-wrapper",function(){var n=e;n&&n.dataset.animating!=1&&u(n)})}};
/*
//# sourceMappingURL=ripples.min.js.map
*/
},{}],"C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\velocity.js":[function(require,module,exports){
/*! VelocityJS.org (1.1.0). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License */

/*************************
   Velocity jQuery Shim
*************************/

/*! VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. */

/* This file contains the jQuery functions that Velocity relies on, thereby removing Velocity's dependency on a full copy of jQuery, and allowing it to work in any environment. */
/* These shimmed functions are only used if jQuery isn't present. If both this shim and jQuery are loaded, Velocity defaults to jQuery proper. */
/* Browser support: Using this shim instead of jQuery proper removes support for IE8. */

;(function (window) {
    /***************
         Setup
    ***************/

    /* If jQuery is already loaded, there's no point in loading this shim. */
    if (window.jQuery) {
        return;
    }

    /* jQuery base. */
    var $ = function (selector, context) {
        return new $.fn.init(selector, context);
    };

    /********************
       Private Methods
    ********************/

    /* jQuery */
    $.isWindow = function (obj) {
        /* jshint eqeqeq: false */
        return obj != null && obj == obj.window;
    };

    /* jQuery */
    $.type = function (obj) {
        if (obj == null) {
            return obj + "";
        }

        return typeof obj === "object" || typeof obj === "function" ?
            class2type[toString.call(obj)] || "object" :
            typeof obj;
    };

    /* jQuery */
    $.isArray = Array.isArray || function (obj) {
        return $.type(obj) === "array";
    };

    /* jQuery */
    function isArraylike (obj) {
        var length = obj.length,
            type = $.type(obj);

        if (type === "function" || $.isWindow(obj)) {
            return false;
        }

        if (obj.nodeType === 1 && length) {
            return true;
        }

        return type === "array" || length === 0 || typeof length === "number" && length > 0 && (length - 1) in obj;
    }

    /***************
       $ Methods
    ***************/

    /* jQuery: Support removed for IE<9. */
    $.isPlainObject = function (obj) {
        var key;

        if (!obj || $.type(obj) !== "object" || obj.nodeType || $.isWindow(obj)) {
            return false;
        }

        try {
            if (obj.constructor &&
                !hasOwn.call(obj, "constructor") &&
                !hasOwn.call(obj.constructor.prototype, "isPrototypeOf")) {
                return false;
            }
        } catch (e) {
            return false;
        }

        for (key in obj) {}

        return key === undefined || hasOwn.call(obj, key);
    };

    /* jQuery */
    $.each = function(obj, callback, args) {
        var value,
            i = 0,
            length = obj.length,
            isArray = isArraylike(obj);

        if (args) {
            if (isArray) {
                for (; i < length; i++) {
                    value = callback.apply(obj[i], args);

                    if (value === false) {
                        break;
                    }
                }
            } else {
                for (i in obj) {
                    value = callback.apply(obj[i], args);

                    if (value === false) {
                        break;
                    }
                }
            }

        } else {
            if (isArray) {
                for (; i < length; i++) {
                    value = callback.call(obj[i], i, obj[i]);

                    if (value === false) {
                        break;
                    }
                }
            } else {
                for (i in obj) {
                    value = callback.call(obj[i], i, obj[i]);

                    if (value === false) {
                        break;
                    }
                }
            }
        }

        return obj;
    };

    /* Custom */
    $.data = function (node, key, value) {
        /* $.getData() */
        if (value === undefined) {
            var id = node[$.expando],
                store = id && cache[id];

            if (key === undefined) {
                return store;
            } else if (store) {
                if (key in store) {
                    return store[key];
                }
            }
        /* $.setData() */
        } else if (key !== undefined) {
            var id = node[$.expando] || (node[$.expando] = ++$.uuid);

            cache[id] = cache[id] || {};
            cache[id][key] = value;

            return value;
        }
    };

    /* Custom */
    $.removeData = function (node, keys) {
        var id = node[$.expando],
            store = id && cache[id];

        if (store) {
            $.each(keys, function(_, key) {
                delete store[key];
            });
        }
    };

    /* jQuery */
    $.extend = function () {
        var src, copyIsArray, copy, name, options, clone,
            target = arguments[0] || {},
            i = 1,
            length = arguments.length,
            deep = false;

        if (typeof target === "boolean") {
            deep = target;

            target = arguments[i] || {};
            i++;
        }

        if (typeof target !== "object" && $.type(target) !== "function") {
            target = {};
        }

        if (i === length) {
            target = this;
            i--;
        }

        for (; i < length; i++) {
            if ((options = arguments[i]) != null) {
                for (name in options) {
                    src = target[name];
                    copy = options[name];

                    if (target === copy) {
                        continue;
                    }

                    if (deep && copy && ($.isPlainObject(copy) || (copyIsArray = $.isArray(copy)))) {
                        if (copyIsArray) {
                            copyIsArray = false;
                            clone = src && $.isArray(src) ? src : [];

                        } else {
                            clone = src && $.isPlainObject(src) ? src : {};
                        }

                        target[name] = $.extend(deep, clone, copy);

                    } else if (copy !== undefined) {
                        target[name] = copy;
                    }
                }
            }
        }

        return target;
    };

    /* jQuery 1.4.3 */
    $.queue = function (elem, type, data) {
        function $makeArray (arr, results) {
            var ret = results || [];

            if (arr != null) {
                if (isArraylike(Object(arr))) {
                    /* $.merge */
                    (function(first, second) {
                        var len = +second.length,
                            j = 0,
                            i = first.length;

                        while (j < len) {
                            first[i++] = second[j++];
                        }

                        if (len !== len) {
                            while (second[j] !== undefined) {
                                first[i++] = second[j++];
                            }
                        }

                        first.length = i;

                        return first;
                    })(ret, typeof arr === "string" ? [arr] : arr);
                } else {
                    [].push.call(ret, arr);
                }
            }

            return ret;
        }

        if (!elem) {
            return;
        }

        type = (type || "fx") + "queue";

        var q = $.data(elem, type);

        if (!data) {
            return q || [];
        }

        if (!q || $.isArray(data)) {
            q = $.data(elem, type, $makeArray(data));
        } else {
            q.push(data);
        }

        return q;
    };

    /* jQuery 1.4.3 */
    $.dequeue = function (elems, type) {
        /* Custom: Embed element iteration. */
        $.each(elems.nodeType ? [ elems ] : elems, function(i, elem) {
            type = type || "fx";

            var queue = $.queue(elem, type),
                fn = queue.shift();

            if (fn === "inprogress") {
                fn = queue.shift();
            }

            if (fn) {
                if (type === "fx") {
                    queue.unshift("inprogress");
                }

                fn.call(elem, function() {
                    $.dequeue(elem, type);
                });
            }
        });
    };

    /******************
       $.fn Methods
    ******************/

    /* jQuery */
    $.fn = $.prototype = {
        init: function (selector) {
            /* Just return the element wrapped inside an array; don't proceed with the actual jQuery node wrapping process. */
            if (selector.nodeType) {
                this[0] = selector;

                return this;
            } else {
                throw new Error("Not a DOM node.");
            }
        },

        offset: function () {
            /* jQuery altered code: Dropped disconnected DOM node checking. */
            var box = this[0].getBoundingClientRect ? this[0].getBoundingClientRect() : { top: 0, left: 0 };

            return {
                top: box.top + (window.pageYOffset || document.scrollTop  || 0)  - (document.clientTop  || 0),
                left: box.left + (window.pageXOffset || document.scrollLeft  || 0) - (document.clientLeft || 0)
            };
        },

        position: function () {
            /* jQuery */
            function offsetParent() {
                var offsetParent = this.offsetParent || document;

                while (offsetParent && (!offsetParent.nodeType.toLowerCase === "html" && offsetParent.style.position === "static")) {
                    offsetParent = offsetParent.offsetParent;
                }

                return offsetParent || document;
            }

            /* Zepto */
            var elem = this[0],
                offsetParent = offsetParent.apply(elem),
                offset = this.offset(),
                parentOffset = /^(?:body|html)$/i.test(offsetParent.nodeName) ? { top: 0, left: 0 } : $(offsetParent).offset()

            offset.top -= parseFloat(elem.style.marginTop) || 0;
            offset.left -= parseFloat(elem.style.marginLeft) || 0;

            if (offsetParent.style) {
                parentOffset.top += parseFloat(offsetParent.style.borderTopWidth) || 0
                parentOffset.left += parseFloat(offsetParent.style.borderLeftWidth) || 0
            }

            return {
                top: offset.top - parentOffset.top,
                left: offset.left - parentOffset.left
            };
        }
    };

    /**********************
       Private Variables
    **********************/

    /* For $.data() */
    var cache = {};
    $.expando = "velocity" + (new Date().getTime());
    $.uuid = 0;

    /* For $.queue() */
    var class2type = {},
        hasOwn = class2type.hasOwnProperty,
        toString = class2type.toString;

    var types = "Boolean Number String Function Array Date RegExp Object Error".split(" ");
    for (var i = 0; i < types.length; i++) {
        class2type["[object " + types[i] + "]"] = types[i].toLowerCase();
    }

    /* Makes $(node) possible, without having to call init. */
    $.fn.init.prototype = $.fn;

    /* Globalize Velocity onto the window, and assign its Utilities property. */
    window.Velocity = { Utilities: $ };
})(window);

/******************
    Velocity.js
******************/

;(function (factory) {
    /* CommonJS module. */
    if (typeof module === "object" && typeof module.exports === "object") {
        module.exports = factory();
    /* AMD module. */
    } else if (typeof define === "function" && define.amd) {
        define(factory);
    /* Browser globals. */
    } else {
        factory();
    }
}(function() {
return function (global, window, document, undefined) {

    /***************
        Summary
    ***************/

    /*
    - CSS: CSS stack that works independently from the rest of Velocity.
    - animate(): Core animation method that iterates over the targeted elements and queues the incoming call onto each element individually.
      - Pre-Queueing: Prepare the element for animation by instantiating its data cache and processing the call's options.
      - Queueing: The logic that runs once the call has reached its point of execution in the element's $.queue() stack.
                  Most logic is placed here to avoid risking it becoming stale (if the element's properties have changed).
      - Pushing: Consolidation of the tween data followed by its push onto the global in-progress calls container.
    - tick(): The single requestAnimationFrame loop responsible for tweening all in-progress calls.
    - completeCall(): Handles the cleanup process for each Velocity call.
    */

    /*********************
       Helper Functions
    *********************/

    /* IE detection. Gist: https://gist.github.com/julianshapiro/9098609 */
    var IE = (function() {
        if (document.documentMode) {
            return document.documentMode;
        } else {
            for (var i = 7; i > 4; i--) {
                var div = document.createElement("div");

                div.innerHTML = "<!--[if IE " + i + "]><span></span><![endif]-->";

                if (div.getElementsByTagName("span").length) {
                    div = null;

                    return i;
                }
            }
        }

        return undefined;
    })();

    /* rAF shim. Gist: https://gist.github.com/julianshapiro/9497513 */
    var rAFShim = (function() {
        var timeLast = 0;

        return window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function(callback) {
            var timeCurrent = (new Date()).getTime(),
                timeDelta;

            /* Dynamically set delay on a per-tick basis to match 60fps. */
            /* Technique by Erik Moller. MIT license: https://gist.github.com/paulirish/1579671 */
            timeDelta = Math.max(0, 16 - (timeCurrent - timeLast));
            timeLast = timeCurrent + timeDelta;

            return setTimeout(function() { callback(timeCurrent + timeDelta); }, timeDelta);
        };
    })();

    /* Array compacting. Copyright Lo-Dash. MIT License: https://github.com/lodash/lodash/blob/master/LICENSE.txt */
    function compactSparseArray (array) {
        var index = -1,
            length = array ? array.length : 0,
            result = [];

        while (++index < length) {
            var value = array[index];

            if (value) {
                result.push(value);
            }
        }

        return result;
    }

    function sanitizeElements (elements) {
        /* Unwrap jQuery/Zepto objects. */
        if (Type.isWrapped(elements)) {
            elements = [].slice.call(elements);
        /* Wrap a single element in an array so that $.each() can iterate with the element instead of its node's children. */
        } else if (Type.isNode(elements)) {
            elements = [ elements ];
        }

        return elements;
    }

    var Type = {
        isString: function (variable) {
            return (typeof variable === "string");
        },
        isArray: Array.isArray || function (variable) {
            return Object.prototype.toString.call(variable) === "[object Array]";
        },
        isFunction: function (variable) {
            return Object.prototype.toString.call(variable) === "[object Function]";
        },
        isNode: function (variable) {
            return variable && variable.nodeType;
        },
        /* Copyright Martin Bohm. MIT License: https://gist.github.com/Tomalak/818a78a226a0738eaade */
        isNodeList: function (variable) {
            return typeof variable === "object" &&
                /^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(variable)) &&
                variable.length !== undefined &&
                (variable.length === 0 || (typeof variable[0] === "object" && variable[0].nodeType > 0));
        },
        /* Determine if variable is a wrapped jQuery or Zepto element. */
        isWrapped: function (variable) {
            return variable && (variable.jquery || (window.Zepto && window.Zepto.zepto.isZ(variable)));
        },
        isSVG: function (variable) {
            return window.SVGElement && (variable instanceof window.SVGElement);
        },
        isEmptyObject: function (variable) {
            for (var name in variable) {
                return false;
            }

            return true;
        }
    };

    /*****************
       Dependencies
    *****************/

    var $,
        isJQuery = false;

    if (global.fn && global.fn.jquery) {
        $ = global;
        isJQuery = true;
    } else {
        $ = window.Velocity.Utilities;
    }

    if (IE <= 8 && !isJQuery) {
        throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");
    } else if (IE <= 7) {
        /* Revert to jQuery's $.animate(), and lose Velocity's extra features. */
        jQuery.fn.velocity = jQuery.fn.animate;

        /* Now that $.fn.velocity is aliased, abort this Velocity declaration. */
        return;
    }

    /*****************
        Constants
    *****************/

    var DURATION_DEFAULT = 400,
        EASING_DEFAULT = "swing";

    /*************
        State
    *************/

    /* Note: The global object also doubles as a publicly-accessible data store for the purposes of unit testing. */
    /* Note: Alias the lowercase and uppercase variants of "velocity" to minimize user confusion due to the lowercase nature of the $.fn extension. */
    var Velocity = {
        /* Container for page-wide Velocity state data. */
        State: {
            /* Detect mobile devices to determine if mobileHA should be turned on. */
            isMobile: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),
            /* The mobileHA option's behavior changes on older Android devices (Gingerbread, versions 2.3.3-2.3.7). */
            isAndroid: /Android/i.test(navigator.userAgent),
            isGingerbread: /Android 2\.3\.[3-7]/i.test(navigator.userAgent),
            isChrome: window.chrome,
            isFirefox: /Firefox/i.test(navigator.userAgent),
            /* Create a cached element for re-use when checking for CSS property prefixes. */
            prefixElement: document.createElement("div"),
            /* Cache every prefix match to avoid repeating lookups. */
            prefixMatches: {},
            /* Cache the anchor used for animating window scrolling. */
            scrollAnchor: null,
            /* Cache the property names associated with the scroll anchor. */
            scrollPropertyLeft: null,
            scrollPropertyTop: null,
            /* Keep track of whether our RAF tick is running. */
            isTicking: false,
            /* Container for every in-progress call to Velocity. */
            calls: []
        },
        /* Velocity's custom CSS stack. Made global for unit testing. */
        CSS: { /* Defined below. */ },
        /* Defined by Velocity's optional jQuery shim. */
        Utilities: $,
        /* Container for the user's custom animation redirects that are referenced by name in place of a properties map object. */
        Redirects: { /* Manually registered by the user. */ },
        Easings: { /* Defined below. */ },
        /* Attempt to use ES6 Promises by default. Users can override this with a third-party promises library. */
        Promise: window.Promise,
        /* Page-wide option defaults, which can be overriden by the user. */
        defaults: {
            queue: "",
            duration: DURATION_DEFAULT,
            easing: EASING_DEFAULT,
            begin: undefined,
            complete: undefined,
            progress: undefined,
            display: undefined,
            visibility: undefined,
            loop: false,
            delay: false,
            mobileHA: true,
            /* Set to false to prevent property values from being cached between consecutive Velocity-initiated chain calls. */
            _cacheValues: true
        },
        /* A design goal of Velocity is to cache data wherever possible in order to avoid DOM requerying.
           Accordingly, each element has a data cache instantiated on it. */
        init: function (element) {
            $.data(element, "velocity", {
                /* Store whether this is an SVG element, since its properties are retrieved and updated differently than standard HTML elements. */
                isSVG: Type.isSVG(element),
                /* Keep track of whether the element is currently being animated by Velocity.
                   This is used to ensure that property values are not transferred between non-consecutive (stale) calls. */
                isAnimating: false,
                /* A reference to the element's live computedStyle object. Learn more here: https://developer.mozilla.org/en/docs/Web/API/window.getComputedStyle */
                computedStyle: null,
                /* Tween data is cached for each animation on the element so that data can be passed across calls --
                   in particular, end values are used as subsequent start values in consecutive Velocity calls. */
                tweensContainer: null,
                /* The full root property values of each CSS hook being animated on this element are cached so that:
                   1) Concurrently-animating hooks sharing the same root can have their root values' merged into one while tweening.
                   2) Post-hook-injection root values can be transferred over to consecutively chained Velocity calls as starting root values. */
                rootPropertyValueCache: {},
                /* A cache for transform updates, which must be manually flushed via CSS.flushTransformCache(). */
                transformCache: {}
            });
        },
        /* A parallel to jQuery's $.css(), used for getting/setting Velocity's hooked CSS properties. */
        hook: null, /* Defined below. */
        /* Velocity-wide animation time remapping for testing purposes. */
        mock: false,
        version: { major: 1, minor: 1, patch: 0 },
        /* Set to 1 or 2 (most verbose) to output debug info to console. */
        debug: false
    };

    /* Retrieve the appropriate scroll anchor and property name for the browser: https://developer.mozilla.org/en-US/docs/Web/API/Window.scrollY */
    if (window.pageYOffset !== undefined) {
        Velocity.State.scrollAnchor = window;
        Velocity.State.scrollPropertyLeft = "pageXOffset";
        Velocity.State.scrollPropertyTop = "pageYOffset";
    } else {
        Velocity.State.scrollAnchor = document.documentElement || document.body.parentNode || document.body;
        Velocity.State.scrollPropertyLeft = "scrollLeft";
        Velocity.State.scrollPropertyTop = "scrollTop";
    }

    /* Shorthand alias for jQuery's $.data() utility. */
    function Data (element) {
        /* Hardcode a reference to the plugin name. */
        var response = $.data(element, "velocity");

        /* jQuery <=1.4.2 returns null instead of undefined when no match is found. We normalize this behavior. */
        return response === null ? undefined : response;
    };

    /**************
        Easing
    **************/

    /* Step easing generator. */
    function generateStep (steps) {
        return function (p) {
            return Math.round(p * steps) * (1 / steps);
        };
    }

    /* Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */
    function generateBezier (mX1, mY1, mX2, mY2) {
        var NEWTON_ITERATIONS = 4,
            NEWTON_MIN_SLOPE = 0.001,
            SUBDIVISION_PRECISION = 0.0000001,
            SUBDIVISION_MAX_ITERATIONS = 10,
            kSplineTableSize = 11,
            kSampleStepSize = 1.0 / (kSplineTableSize - 1.0),
            float32ArraySupported = "Float32Array" in window;

        /* Must contain four arguments. */
        if (arguments.length !== 4) {
            return false;
        }

        /* Arguments must be numbers. */
        for (var i = 0; i < 4; ++i) {
            if (typeof arguments[i] !== "number" || isNaN(arguments[i]) || !isFinite(arguments[i])) {
                return false;
            }
        }

        /* X values must be in the [0, 1] range. */
        mX1 = Math.min(mX1, 1);
        mX2 = Math.min(mX2, 1);
        mX1 = Math.max(mX1, 0);
        mX2 = Math.max(mX2, 0);

        var mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);

        function A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }
        function B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }
        function C (aA1)      { return 3.0 * aA1; }

        function calcBezier (aT, aA1, aA2) {
            return ((A(aA1, aA2)*aT + B(aA1, aA2))*aT + C(aA1))*aT;
        }

        function getSlope (aT, aA1, aA2) {
            return 3.0 * A(aA1, aA2)*aT*aT + 2.0 * B(aA1, aA2) * aT + C(aA1);
        }

        function newtonRaphsonIterate (aX, aGuessT) {
            for (var i = 0; i < NEWTON_ITERATIONS; ++i) {
                var currentSlope = getSlope(aGuessT, mX1, mX2);

                if (currentSlope === 0.0) return aGuessT;

                var currentX = calcBezier(aGuessT, mX1, mX2) - aX;
                aGuessT -= currentX / currentSlope;
            }

            return aGuessT;
        }

        function calcSampleValues () {
            for (var i = 0; i < kSplineTableSize; ++i) {
                mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);
            }
        }

        function binarySubdivide (aX, aA, aB) {
            var currentX, currentT, i = 0;

            do {
                currentT = aA + (aB - aA) / 2.0;
                currentX = calcBezier(currentT, mX1, mX2) - aX;
                if (currentX > 0.0) {
                  aB = currentT;
                } else {
                  aA = currentT;
                }
            } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);

            return currentT;
        }

        function getTForX (aX) {
            var intervalStart = 0.0,
                currentSample = 1,
                lastSample = kSplineTableSize - 1;

            for (; currentSample != lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {
                intervalStart += kSampleStepSize;
            }

            --currentSample;

            var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample+1] - mSampleValues[currentSample]),
                guessForT = intervalStart + dist * kSampleStepSize,
                initialSlope = getSlope(guessForT, mX1, mX2);

            if (initialSlope >= NEWTON_MIN_SLOPE) {
                return newtonRaphsonIterate(aX, guessForT);
            } else if (initialSlope == 0.0) {
                return guessForT;
            } else {
                return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize);
            }
        }

        var _precomputed = false;

        function precompute() {
            _precomputed = true;
            if (mX1 != mY1 || mX2 != mY2) calcSampleValues();
        }

        var f = function (aX) {
            if (!_precomputed) precompute();
            if (mX1 === mY1 && mX2 === mY2) return aX;
            if (aX === 0) return 0;
            if (aX === 1) return 1;

            return calcBezier(getTForX(aX), mY1, mY2);
        };

        f.getControlPoints = function() { return [{ x: mX1, y: mY1 }, { x: mX2, y: mY2 }]; };

        var str = "generateBezier(" + [mX1, mY1, mX2, mY2] + ")";
        f.toString = function () { return str; };

        return f;
    }

    /* Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */
    /* Given a tension, friction, and duration, a simulation at 60FPS will first run without a defined duration in order to calculate the full path. A second pass
       then adjusts the time delta -- using the relation between actual time and duration -- to calculate the path for the duration-constrained animation. */
    var generateSpringRK4 = (function () {
        function springAccelerationForState (state) {
            return (-state.tension * state.x) - (state.friction * state.v);
        }

        function springEvaluateStateWithDerivative (initialState, dt, derivative) {
            var state = {
                x: initialState.x + derivative.dx * dt,
                v: initialState.v + derivative.dv * dt,
                tension: initialState.tension,
                friction: initialState.friction
            };

            return { dx: state.v, dv: springAccelerationForState(state) };
        }

        function springIntegrateState (state, dt) {
            var a = {
                    dx: state.v,
                    dv: springAccelerationForState(state)
                },
                b = springEvaluateStateWithDerivative(state, dt * 0.5, a),
                c = springEvaluateStateWithDerivative(state, dt * 0.5, b),
                d = springEvaluateStateWithDerivative(state, dt, c),
                dxdt = 1.0 / 6.0 * (a.dx + 2.0 * (b.dx + c.dx) + d.dx),
                dvdt = 1.0 / 6.0 * (a.dv + 2.0 * (b.dv + c.dv) + d.dv);

            state.x = state.x + dxdt * dt;
            state.v = state.v + dvdt * dt;

            return state;
        }

        return function springRK4Factory (tension, friction, duration) {

            var initState = {
                    x: -1,
                    v: 0,
                    tension: null,
                    friction: null
                },
                path = [0],
                time_lapsed = 0,
                tolerance = 1 / 10000,
                DT = 16 / 1000,
                have_duration, dt, last_state;

            tension = parseFloat(tension) || 500;
            friction = parseFloat(friction) || 20;
            duration = duration || null;

            initState.tension = tension;
            initState.friction = friction;

            have_duration = duration !== null;

            /* Calculate the actual time it takes for this animation to complete with the provided conditions. */
            if (have_duration) {
                /* Run the simulation without a duration. */
                time_lapsed = springRK4Factory(tension, friction);
                /* Compute the adjusted time delta. */
                dt = time_lapsed / duration * DT;
            } else {
                dt = DT;
            }

            while (true) {
                /* Next/step function .*/
                last_state = springIntegrateState(last_state || initState, dt);
                /* Store the position. */
                path.push(1 + last_state.x);
                time_lapsed += 16;
                /* If the change threshold is reached, break. */
                if (!(Math.abs(last_state.x) > tolerance && Math.abs(last_state.v) > tolerance)) {
                    break;
                }
            }

            /* If duration is not defined, return the actual time required for completing this animation. Otherwise, return a closure that holds the
               computed path and returns a snapshot of the position according to a given percentComplete. */
            return !have_duration ? time_lapsed : function(percentComplete) { return path[ (percentComplete * (path.length - 1)) | 0 ]; };
        };
    }());

    /* jQuery easings. */
    Velocity.Easings = {
        linear: function(p) { return p; },
        swing: function(p) { return 0.5 - Math.cos( p * Math.PI ) / 2 },
        /* Bonus "spring" easing, which is a less exaggerated version of easeInOutElastic. */
        spring: function(p) { return 1 - (Math.cos(p * 4.5 * Math.PI) * Math.exp(-p * 6)); }
    };

    /* CSS3 and Robert Penner easings. */
    $.each(
        [
            [ "ease", [ 0.25, 0.1, 0.25, 1.0 ] ],
            [ "ease-in", [ 0.42, 0.0, 1.00, 1.0 ] ],
            [ "ease-out", [ 0.00, 0.0, 0.58, 1.0 ] ],
            [ "ease-in-out", [ 0.42, 0.0, 0.58, 1.0 ] ],
            [ "easeInSine", [ 0.47, 0, 0.745, 0.715 ] ],
            [ "easeOutSine", [ 0.39, 0.575, 0.565, 1 ] ],
            [ "easeInOutSine", [ 0.445, 0.05, 0.55, 0.95 ] ],
            [ "easeInQuad", [ 0.55, 0.085, 0.68, 0.53 ] ],
            [ "easeOutQuad", [ 0.25, 0.46, 0.45, 0.94 ] ],
            [ "easeInOutQuad", [ 0.455, 0.03, 0.515, 0.955 ] ],
            [ "easeInCubic", [ 0.55, 0.055, 0.675, 0.19 ] ],
            [ "easeOutCubic", [ 0.215, 0.61, 0.355, 1 ] ],
            [ "easeInOutCubic", [ 0.645, 0.045, 0.355, 1 ] ],
            [ "easeInQuart", [ 0.895, 0.03, 0.685, 0.22 ] ],
            [ "easeOutQuart", [ 0.165, 0.84, 0.44, 1 ] ],
            [ "easeInOutQuart", [ 0.77, 0, 0.175, 1 ] ],
            [ "easeInQuint", [ 0.755, 0.05, 0.855, 0.06 ] ],
            [ "easeOutQuint", [ 0.23, 1, 0.32, 1 ] ],
            [ "easeInOutQuint", [ 0.86, 0, 0.07, 1 ] ],
            [ "easeInExpo", [ 0.95, 0.05, 0.795, 0.035 ] ],
            [ "easeOutExpo", [ 0.19, 1, 0.22, 1 ] ],
            [ "easeInOutExpo", [ 1, 0, 0, 1 ] ],
            [ "easeInCirc", [ 0.6, 0.04, 0.98, 0.335 ] ],
            [ "easeOutCirc", [ 0.075, 0.82, 0.165, 1 ] ],
            [ "easeInOutCirc", [ 0.785, 0.135, 0.15, 0.86 ] ]
        ], function(i, easingArray) {
            Velocity.Easings[easingArray[0]] = generateBezier.apply(null, easingArray[1]);
        });

    /* Determine the appropriate easing type given an easing input. */
    function getEasing(value, duration) {
        var easing = value;

        /* The easing option can either be a string that references a pre-registered easing,
           or it can be a two-/four-item array of integers to be converted into a bezier/spring function. */
        if (Type.isString(value)) {
            /* Ensure that the easing has been assigned to jQuery's Velocity.Easings object. */
            if (!Velocity.Easings[value]) {
                easing = false;
            }
        } else if (Type.isArray(value) && value.length === 1) {
            easing = generateStep.apply(null, value);
        } else if (Type.isArray(value) && value.length === 2) {
            /* springRK4 must be passed the animation's duration. */
            /* Note: If the springRK4 array contains non-numbers, generateSpringRK4() returns an easing
               function generated with default tension and friction values. */
            easing = generateSpringRK4.apply(null, value.concat([ duration ]));
        } else if (Type.isArray(value) && value.length === 4) {
            /* Note: If the bezier array contains non-numbers, generateBezier() returns false. */
            easing = generateBezier.apply(null, value);
        } else {
            easing = false;
        }

        /* Revert to the Velocity-wide default easing type, or fall back to "swing" (which is also jQuery's default)
           if the Velocity-wide default has been incorrectly modified. */
        if (easing === false) {
            if (Velocity.Easings[Velocity.defaults.easing]) {
                easing = Velocity.defaults.easing;
            } else {
                easing = EASING_DEFAULT;
            }
        }

        return easing;
    }

    /*****************
        CSS Stack
    *****************/

    /* The CSS object is a highly condensed and performant CSS stack that fully replaces jQuery's.
       It handles the validation, getting, and setting of both standard CSS properties and CSS property hooks. */
    /* Note: A "CSS" shorthand is aliased so that our code is easier to read. */
    var CSS = Velocity.CSS = {

        /*************
            RegEx
        *************/

        RegEx: {
            isHex: /^#([A-f\d]{3}){1,2}$/i,
            /* Unwrap a property value's surrounding text, e.g. "rgba(4, 3, 2, 1)" ==> "4, 3, 2, 1" and "rect(4px 3px 2px 1px)" ==> "4px 3px 2px 1px". */
            valueUnwrap: /^[A-z]+\((.*)\)$/i,
            wrappedValueAlreadyExtracted: /[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,
            /* Split a multi-value property into an array of subvalues, e.g. "rgba(4, 3, 2, 1) 4px 3px 2px 1px" ==> [ "rgba(4, 3, 2, 1)", "4px", "3px", "2px", "1px" ]. */
            valueSplit: /([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/ig
        },

        /************
            Lists
        ************/

        Lists: {
            colors: [ "fill", "stroke", "stopColor", "color", "backgroundColor", "borderColor", "borderTopColor", "borderRightColor", "borderBottomColor", "borderLeftColor", "outlineColor" ],
            transformsBase: [ "translateX", "translateY", "scale", "scaleX", "scaleY", "skewX", "skewY", "rotateZ" ],
            transforms3D: [ "transformPerspective", "translateZ", "scaleZ", "rotateX", "rotateY" ]
        },

        /************
            Hooks
        ************/

        /* Hooks allow a subproperty (e.g. "boxShadowBlur") of a compound-value CSS property
           (e.g. "boxShadow: X Y Blur Spread Color") to be animated as if it were a discrete property. */
        /* Note: Beyond enabling fine-grained property animation, hooking is necessary since Velocity only
           tweens properties with single numeric values; unlike CSS transitions, Velocity does not interpolate compound-values. */
        Hooks: {
            /********************
                Registration
            ********************/

            /* Templates are a concise way of indicating which subproperties must be individually registered for each compound-value CSS property. */
            /* Each template consists of the compound-value's base name, its constituent subproperty names, and those subproperties' default values. */
            templates: {
                "textShadow": [ "Color X Y Blur", "black 0px 0px 0px" ],
                /* Todo: Add support for inset boxShadows. (webkit places it last whereas IE places it first.) */
                "boxShadow": [ "Color X Y Blur Spread", "black 0px 0px 0px 0px" ],
                "clip": [ "Top Right Bottom Left", "0px 0px 0px 0px" ],
                "backgroundPosition": [ "X Y", "0% 0%" ],
                "transformOrigin": [ "X Y Z", "50% 50% 0px" ],
                "perspectiveOrigin": [ "X Y", "50% 50%" ]
            },

            /* A "registered" hook is one that has been converted from its template form into a live,
               tweenable property. It contains data to associate it with its root property. */
            registered: {
                /* Note: A registered hook looks like this ==> textShadowBlur: [ "textShadow", 3 ],
                   which consists of the subproperty's name, the associated root property's name,
                   and the subproperty's position in the root's value. */
            },
            /* Convert the templates into individual hooks then append them to the registered object above. */
            register: function () {
                /* Color hooks registration: Colors are defaulted to white -- as opposed to black -- since colors that are
                   currently set to "transparent" default to their respective template below when color-animated,
                   and white is typically a closer match to transparent than black is. An exception is made for text ("color"),
                   which is almost always set closer to black than white. */
                for (var i = 0; i < CSS.Lists.colors.length; i++) {
                    var rgbComponents = (CSS.Lists.colors[i] === "color") ? "0 0 0 1" : "255 255 255 1";
                    CSS.Hooks.templates[CSS.Lists.colors[i]] = [ "Red Green Blue Alpha", rgbComponents ];
                }

                var rootProperty,
                    hookTemplate,
                    hookNames;

                /* In IE, color values inside compound-value properties are positioned at the end the value instead of at the beginning.
                   Thus, we re-arrange the templates accordingly. */
                if (IE) {
                    for (rootProperty in CSS.Hooks.templates) {
                        hookTemplate = CSS.Hooks.templates[rootProperty];
                        hookNames = hookTemplate[0].split(" ");

                        var defaultValues = hookTemplate[1].match(CSS.RegEx.valueSplit);

                        if (hookNames[0] === "Color") {
                            /* Reposition both the hook's name and its default value to the end of their respective strings. */
                            hookNames.push(hookNames.shift());
                            defaultValues.push(defaultValues.shift());

                            /* Replace the existing template for the hook's root property. */
                            CSS.Hooks.templates[rootProperty] = [ hookNames.join(" "), defaultValues.join(" ") ];
                        }
                    }
                }

                /* Hook registration. */
                for (rootProperty in CSS.Hooks.templates) {
                    hookTemplate = CSS.Hooks.templates[rootProperty];
                    hookNames = hookTemplate[0].split(" ");

                    for (var i in hookNames) {
                        var fullHookName = rootProperty + hookNames[i],
                            hookPosition = i;

                        /* For each hook, register its full name (e.g. textShadowBlur) with its root property (e.g. textShadow)
                           and the hook's position in its template's default value string. */
                        CSS.Hooks.registered[fullHookName] = [ rootProperty, hookPosition ];
                    }
                }
            },

            /*****************************
               Injection and Extraction
            *****************************/

            /* Look up the root property associated with the hook (e.g. return "textShadow" for "textShadowBlur"). */
            /* Since a hook cannot be set directly (the browser won't recognize it), style updating for hooks is routed through the hook's root property. */
            getRoot: function (property) {
                var hookData = CSS.Hooks.registered[property];

                if (hookData) {
                    return hookData[0];
                } else {
                    /* If there was no hook match, return the property name untouched. */
                    return property;
                }
            },
            /* Convert any rootPropertyValue, null or otherwise, into a space-delimited list of hook values so that
               the targeted hook can be injected or extracted at its standard position. */
            cleanRootPropertyValue: function(rootProperty, rootPropertyValue) {
                /* If the rootPropertyValue is wrapped with "rgb()", "clip()", etc., remove the wrapping to normalize the value before manipulation. */
                if (CSS.RegEx.valueUnwrap.test(rootPropertyValue)) {
                    rootPropertyValue = rootPropertyValue.match(CSS.RegEx.valueUnwrap)[1];
                }

                /* If rootPropertyValue is a CSS null-value (from which there's inherently no hook value to extract),
                   default to the root's default value as defined in CSS.Hooks.templates. */
                /* Note: CSS null-values include "none", "auto", and "transparent". They must be converted into their
                   zero-values (e.g. textShadow: "none" ==> textShadow: "0px 0px 0px black") for hook manipulation to proceed. */
                if (CSS.Values.isCSSNullValue(rootPropertyValue)) {
                    rootPropertyValue = CSS.Hooks.templates[rootProperty][1];
                }

                return rootPropertyValue;
            },
            /* Extracted the hook's value from its root property's value. This is used to get the starting value of an animating hook. */
            extractValue: function (fullHookName, rootPropertyValue) {
                var hookData = CSS.Hooks.registered[fullHookName];

                if (hookData) {
                    var hookRoot = hookData[0],
                        hookPosition = hookData[1];

                    rootPropertyValue = CSS.Hooks.cleanRootPropertyValue(hookRoot, rootPropertyValue);

                    /* Split rootPropertyValue into its constituent hook values then grab the desired hook at its standard position. */
                    return rootPropertyValue.toString().match(CSS.RegEx.valueSplit)[hookPosition];
                } else {
                    /* If the provided fullHookName isn't a registered hook, return the rootPropertyValue that was passed in. */
                    return rootPropertyValue;
                }
            },
            /* Inject the hook's value into its root property's value. This is used to piece back together the root property
               once Velocity has updated one of its individually hooked values through tweening. */
            injectValue: function (fullHookName, hookValue, rootPropertyValue) {
                var hookData = CSS.Hooks.registered[fullHookName];

                if (hookData) {
                    var hookRoot = hookData[0],
                        hookPosition = hookData[1],
                        rootPropertyValueParts,
                        rootPropertyValueUpdated;

                    rootPropertyValue = CSS.Hooks.cleanRootPropertyValue(hookRoot, rootPropertyValue);

                    /* Split rootPropertyValue into its individual hook values, replace the targeted value with hookValue,
                       then reconstruct the rootPropertyValue string. */
                    rootPropertyValueParts = rootPropertyValue.toString().match(CSS.RegEx.valueSplit);
                    rootPropertyValueParts[hookPosition] = hookValue;
                    rootPropertyValueUpdated = rootPropertyValueParts.join(" ");

                    return rootPropertyValueUpdated;
                } else {
                    /* If the provided fullHookName isn't a registered hook, return the rootPropertyValue that was passed in. */
                    return rootPropertyValue;
                }
            }
        },

        /*******************
           Normalizations
        *******************/

        /* Normalizations standardize CSS property manipulation by pollyfilling browser-specific implementations (e.g. opacity)
           and reformatting special properties (e.g. clip, rgba) to look like standard ones. */
        Normalizations: {
            /* Normalizations are passed a normalization target (either the property's name, its extracted value, or its injected value),
               the targeted element (which may need to be queried), and the targeted property value. */
            registered: {
                clip: function (type, element, propertyValue) {
                    switch (type) {
                        case "name":
                            return "clip";
                        /* Clip needs to be unwrapped and stripped of its commas during extraction. */
                        case "extract":
                            var extracted;

                            /* If Velocity also extracted this value, skip extraction. */
                            if (CSS.RegEx.wrappedValueAlreadyExtracted.test(propertyValue)) {
                                extracted = propertyValue;
                            } else {
                                /* Remove the "rect()" wrapper. */
                                extracted = propertyValue.toString().match(CSS.RegEx.valueUnwrap);

                                /* Strip off commas. */
                                extracted = extracted ? extracted[1].replace(/,(\s+)?/g, " ") : propertyValue;
                            }

                            return extracted;
                        /* Clip needs to be re-wrapped during injection. */
                        case "inject":
                            return "rect(" + propertyValue + ")";
                    }
                },

                blur: function(type, element, propertyValue) {
                    switch (type) {
                        case "name":
                            return "-webkit-filter";
                        case "extract":
                            var extracted = parseFloat(propertyValue);

                            /* If extracted is NaN, meaning the value isn't already extracted. */
                            if (!(extracted || extracted === 0)) {
                                var blurComponent = propertyValue.toString().match(/blur\(([0-9]+[A-z]+)\)/i);

                                /* If the filter string had a blur component, return just the blur value and unit type. */
                                if (blurComponent) {
                                    extracted = blurComponent[1];
                                /* If the component doesn't exist, default blur to 0. */
                                } else {
                                    extracted = 0;
                                }
                            }

                            return extracted;
                        /* Blur needs to be re-wrapped during injection. */
                        case "inject":
                            /* For the blur effect to be fully de-applied, it needs to be set to "none" instead of 0. */
                            if (!parseFloat(propertyValue)) {
                                return "none";
                            } else {
                                return "blur(" + propertyValue + ")";
                            }
                    }
                },

                /* <=IE8 do not support the standard opacity property. They use filter:alpha(opacity=INT) instead. */
                opacity: function (type, element, propertyValue) {
                    if (IE <= 8) {
                        switch (type) {
                            case "name":
                                return "filter";
                            case "extract":
                                /* <=IE8 return a "filter" value of "alpha(opacity=\d{1,3})".
                                   Extract the value and convert it to a decimal value to match the standard CSS opacity property's formatting. */
                                var extracted = propertyValue.toString().match(/alpha\(opacity=(.*)\)/i);

                                if (extracted) {
                                    /* Convert to decimal value. */
                                    propertyValue = extracted[1] / 100;
                                } else {
                                    /* When extracting opacity, default to 1 since a null value means opacity hasn't been set. */
                                    propertyValue = 1;
                                }

                                return propertyValue;
                            case "inject":
                                /* Opacified elements are required to have their zoom property set to a non-zero value. */
                                element.style.zoom = 1;

                                /* Setting the filter property on elements with certain font property combinations can result in a
                                   highly unappealing ultra-bolding effect. There's no way to remedy this throughout a tween, but dropping the
                                   value altogether (when opacity hits 1) at leasts ensures that the glitch is gone post-tweening. */
                                if (parseFloat(propertyValue) >= 1) {
                                    return "";
                                } else {
                                  /* As per the filter property's spec, convert the decimal value to a whole number and wrap the value. */
                                  return "alpha(opacity=" + parseInt(parseFloat(propertyValue) * 100, 10) + ")";
                                }
                        }
                    /* With all other browsers, normalization is not required; return the same values that were passed in. */
                    } else {
                        switch (type) {
                            case "name":
                                return "opacity";
                            case "extract":
                                return propertyValue;
                            case "inject":
                                return propertyValue;
                        }
                    }
                }
            },

            /*****************************
                Batched Registrations
            *****************************/

            /* Note: Batched normalizations extend the CSS.Normalizations.registered object. */
            register: function () {

                /*****************
                    Transforms
                *****************/

                /* Transforms are the subproperties contained by the CSS "transform" property. Transforms must undergo normalization
                   so that they can be referenced in a properties map by their individual names. */
                /* Note: When transforms are "set", they are actually assigned to a per-element transformCache. When all transform
                   setting is complete complete, CSS.flushTransformCache() must be manually called to flush the values to the DOM.
                   Transform setting is batched in this way to improve performance: the transform style only needs to be updated
                   once when multiple transform subproperties are being animated simultaneously. */
                /* Note: IE9 and Android Gingerbread have support for 2D -- but not 3D -- transforms. Since animating unsupported
                   transform properties results in the browser ignoring the *entire* transform string, we prevent these 3D values
                   from being normalized for these browsers so that tweening skips these properties altogether
                   (since it will ignore them as being unsupported by the browser.) */
                if (!(IE <= 9) && !Velocity.State.isGingerbread) {
                    /* Note: Since the standalone CSS "perspective" property and the CSS transform "perspective" subproperty
                    share the same name, the latter is given a unique token within Velocity: "transformPerspective". */
                    CSS.Lists.transformsBase = CSS.Lists.transformsBase.concat(CSS.Lists.transforms3D);
                }

                for (var i = 0; i < CSS.Lists.transformsBase.length; i++) {
                    /* Wrap the dynamically generated normalization function in a new scope so that transformName's value is
                    paired with its respective function. (Otherwise, all functions would take the final for loop's transformName.) */
                    (function() {
                        var transformName = CSS.Lists.transformsBase[i];

                        CSS.Normalizations.registered[transformName] = function (type, element, propertyValue) {
                            switch (type) {
                                /* The normalized property name is the parent "transform" property -- the property that is actually set in CSS. */
                                case "name":
                                    return "transform";
                                /* Transform values are cached onto a per-element transformCache object. */
                                case "extract":
                                    /* If this transform has yet to be assigned a value, return its null value. */
                                    if (Data(element) === undefined || Data(element).transformCache[transformName] === undefined) {
                                        /* Scale CSS.Lists.transformsBase default to 1 whereas all other transform properties default to 0. */
                                        return /^scale/i.test(transformName) ? 1 : 0;
                                    /* When transform values are set, they are wrapped in parentheses as per the CSS spec.
                                       Thus, when extracting their values (for tween calculations), we strip off the parentheses. */
                                    } else {
                                        return Data(element).transformCache[transformName].replace(/[()]/g, "");
                                    }
                                case "inject":
                                    var invalid = false;

                                    /* If an individual transform property contains an unsupported unit type, the browser ignores the *entire* transform property.
                                       Thus, protect users from themselves by skipping setting for transform values supplied with invalid unit types. */
                                    /* Switch on the base transform type; ignore the axis by removing the last letter from the transform's name. */
                                    switch (transformName.substr(0, transformName.length - 1)) {
                                        /* Whitelist unit types for each transform. */
                                        case "translate":
                                            invalid = !/(%|px|em|rem|vw|vh|\d)$/i.test(propertyValue);
                                            break;
                                        /* Since an axis-free "scale" property is supported as well, a little hack is used here to detect it by chopping off its last letter. */
                                        case "scal":
                                        case "scale":
                                            /* Chrome on Android has a bug in which scaled elements blur if their initial scale
                                               value is below 1 (which can happen with forcefeeding). Thus, we detect a yet-unset scale property
                                               and ensure that its first value is always 1. More info: http://stackoverflow.com/questions/10417890/css3-animations-with-transform-causes-blurred-elements-on-webkit/10417962#10417962 */
                                            if (Velocity.State.isAndroid && Data(element).transformCache[transformName] === undefined && propertyValue < 1) {
                                                propertyValue = 1;
                                            }

                                            invalid = !/(\d)$/i.test(propertyValue);
                                            break;
                                        case "skew":
                                            invalid = !/(deg|\d)$/i.test(propertyValue);
                                            break;
                                        case "rotate":
                                            invalid = !/(deg|\d)$/i.test(propertyValue);
                                            break;
                                    }

                                    if (!invalid) {
                                        /* As per the CSS spec, wrap the value in parentheses. */
                                        Data(element).transformCache[transformName] = "(" + propertyValue + ")";
                                    }

                                    /* Although the value is set on the transformCache object, return the newly-updated value for the calling code to process as normal. */
                                    return Data(element).transformCache[transformName];
                            }
                        };
                    })();
                }

                /*************
                    Colors
                *************/

                /* Since Velocity only animates a single numeric value per property, color animation is achieved by hooking the individual RGBA components of CSS color properties.
                   Accordingly, color values must be normalized (e.g. "#ff0000", "red", and "rgb(255, 0, 0)" ==> "255 0 0 1") so that their components can be injected/extracted by CSS.Hooks logic. */
                for (var i = 0; i < CSS.Lists.colors.length; i++) {
                    /* Wrap the dynamically generated normalization function in a new scope so that colorName's value is paired with its respective function.
                       (Otherwise, all functions would take the final for loop's colorName.) */
                    (function () {
                        var colorName = CSS.Lists.colors[i];

                        /* Note: In IE<=8, which support rgb but not rgba, color properties are reverted to rgb by stripping off the alpha component. */
                        CSS.Normalizations.registered[colorName] = function(type, element, propertyValue) {
                            switch (type) {
                                case "name":
                                    return colorName;
                                /* Convert all color values into the rgb format. (Old IE can return hex values and color names instead of rgb/rgba.) */
                                case "extract":
                                    var extracted;

                                    /* If the color is already in its hookable form (e.g. "255 255 255 1") due to having been previously extracted, skip extraction. */
                                    if (CSS.RegEx.wrappedValueAlreadyExtracted.test(propertyValue)) {
                                        extracted = propertyValue;
                                    } else {
                                        var converted,
                                            colorNames = {
                                                black: "rgb(0, 0, 0)",
                                                blue: "rgb(0, 0, 255)",
                                                gray: "rgb(128, 128, 128)",
                                                green: "rgb(0, 128, 0)",
                                                red: "rgb(255, 0, 0)",
                                                white: "rgb(255, 255, 255)"
                                            };

                                        /* Convert color names to rgb. */
                                        if (/^[A-z]+$/i.test(propertyValue)) {
                                            if (colorNames[propertyValue] !== undefined) {
                                                converted = colorNames[propertyValue]
                                            } else {
                                                /* If an unmatched color name is provided, default to black. */
                                                converted = colorNames.black;
                                            }
                                        /* Convert hex values to rgb. */
                                        } else if (CSS.RegEx.isHex.test(propertyValue)) {
                                            converted = "rgb(" + CSS.Values.hexToRgb(propertyValue).join(" ") + ")";
                                        /* If the provided color doesn't match any of the accepted color formats, default to black. */
                                        } else if (!(/^rgba?\(/i.test(propertyValue))) {
                                            converted = colorNames.black;
                                        }

                                        /* Remove the surrounding "rgb/rgba()" string then replace commas with spaces and strip
                                           repeated spaces (in case the value included spaces to begin with). */
                                        extracted = (converted || propertyValue).toString().match(CSS.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g, " ");
                                    }

                                    /* So long as this isn't <=IE8, add a fourth (alpha) component if it's missing and default it to 1 (visible). */
                                    if (!(IE <= 8) && extracted.split(" ").length === 3) {
                                        extracted += " 1";
                                    }

                                    return extracted;
                                case "inject":
                                    /* If this is IE<=8 and an alpha component exists, strip it off. */
                                    if (IE <= 8) {
                                        if (propertyValue.split(" ").length === 4) {
                                            propertyValue = propertyValue.split(/\s+/).slice(0, 3).join(" ");
                                        }
                                    /* Otherwise, add a fourth (alpha) component if it's missing and default it to 1 (visible). */
                                    } else if (propertyValue.split(" ").length === 3) {
                                        propertyValue += " 1";
                                    }

                                    /* Re-insert the browser-appropriate wrapper("rgb/rgba()"), insert commas, and strip off decimal units
                                       on all values but the fourth (R, G, and B only accept whole numbers). */
                                    return (IE <= 8 ? "rgb" : "rgba") + "(" + propertyValue.replace(/\s+/g, ",").replace(/\.(\d)+(?=,)/g, "") + ")";
                            }
                        };
                    })();
                }
            }
        },

        /************************
           CSS Property Names
        ************************/

        Names: {
            /* Camelcase a property name into its JavaScript notation (e.g. "background-color" ==> "backgroundColor").
               Camelcasing is used to normalize property names between and across calls. */
            camelCase: function (property) {
                return property.replace(/-(\w)/g, function (match, subMatch) {
                    return subMatch.toUpperCase();
                });
            },

            /* For SVG elements, some properties (namely, dimensional ones) are GET/SET via the element's HTML attributes (instead of via CSS styles). */
            SVGAttribute: function (property) {
                var SVGAttributes = "width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";

                /* Certain browsers require an SVG transform to be applied as an attribute. (Otherwise, application via CSS is preferable due to 3D support.) */
                if (IE || (Velocity.State.isAndroid && !Velocity.State.isChrome)) {
                    SVGAttributes += "|transform";
                }

                return new RegExp("^(" + SVGAttributes + ")$", "i").test(property);
            },

            /* Determine whether a property should be set with a vendor prefix. */
            /* If a prefixed version of the property exists, return it. Otherwise, return the original property name.
               If the property is not at all supported by the browser, return a false flag. */
            prefixCheck: function (property) {
                /* If this property has already been checked, return the cached value. */
                if (Velocity.State.prefixMatches[property]) {
                    return [ Velocity.State.prefixMatches[property], true ];
                } else {
                    var vendors = [ "", "Webkit", "Moz", "ms", "O" ];

                    for (var i = 0, vendorsLength = vendors.length; i < vendorsLength; i++) {
                        var propertyPrefixed;

                        if (i === 0) {
                            propertyPrefixed = property;
                        } else {
                            /* Capitalize the first letter of the property to conform to JavaScript vendor prefix notation (e.g. webkitFilter). */
                            propertyPrefixed = vendors[i] + property.replace(/^\w/, function(match) { return match.toUpperCase(); });
                        }

                        /* Check if the browser supports this property as prefixed. */
                        if (Type.isString(Velocity.State.prefixElement.style[propertyPrefixed])) {
                            /* Cache the match. */
                            Velocity.State.prefixMatches[property] = propertyPrefixed;

                            return [ propertyPrefixed, true ];
                        }
                    }

                    /* If the browser doesn't support this property in any form, include a false flag so that the caller can decide how to proceed. */
                    return [ property, false ];
                }
            }
        },

        /************************
           CSS Property Values
        ************************/

        Values: {
            /* Hex to RGB conversion. Copyright Tim Down: http://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb */
            hexToRgb: function (hex) {
                var shortformRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i,
                    longformRegex = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,
                    rgbParts;

                hex = hex.replace(shortformRegex, function (m, r, g, b) {
                    return r + r + g + g + b + b;
                });

                rgbParts = longformRegex.exec(hex);

                return rgbParts ? [ parseInt(rgbParts[1], 16), parseInt(rgbParts[2], 16), parseInt(rgbParts[3], 16) ] : [ 0, 0, 0 ];
            },

            isCSSNullValue: function (value) {
                /* The browser defaults CSS values that have not been set to either 0 or one of several possible null-value strings.
                   Thus, we check for both falsiness and these special strings. */
                /* Null-value checking is performed to default the special strings to 0 (for the sake of tweening) or their hook
                   templates as defined as CSS.Hooks (for the sake of hook injection/extraction). */
                /* Note: Chrome returns "rgba(0, 0, 0, 0)" for an undefined color whereas IE returns "transparent". */
                return (value == 0 || /^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(value));
            },

            /* Retrieve a property's default unit type. Used for assigning a unit type when one is not supplied by the user. */
            getUnitType: function (property) {
                if (/^(rotate|skew)/i.test(property)) {
                    return "deg";
                } else if (/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(property)) {
                    /* The above properties are unitless. */
                    return "";
                } else {
                    /* Default to px for all other properties. */
                    return "px";
                }
            },

            /* HTML elements default to an associated display type when they're not set to display:none. */
            /* Note: This function is used for correctly setting the non-"none" display value in certain Velocity redirects, such as fadeIn/Out. */
            getDisplayType: function (element) {
                var tagName = element && element.tagName.toString().toLowerCase();

                if (/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(tagName)) {
                    return "inline";
                } else if (/^(li)$/i.test(tagName)) {
                    return "list-item";
                } else if (/^(tr)$/i.test(tagName)) {
                    return "table-row";
                /* Default to "block" when no match is found. */
                } else {
                    return "block";
                }
            },

            /* The class add/remove functions are used to temporarily apply a "velocity-animating" class to elements while they're animating. */
            addClass: function (element, className) {
                if (element.classList) {
                    element.classList.add(className);
                } else {
                    element.className += (element.className.length ? " " : "") + className;
                }
            },

            removeClass: function (element, className) {
                if (element.classList) {
                    element.classList.remove(className);
                } else {
                    element.className = element.className.toString().replace(new RegExp("(^|\\s)" + className.split(" ").join("|") + "(\\s|$)", "gi"), " ");
                }
            }
        },

        /****************************
           Style Getting & Setting
        ****************************/

        /* The singular getPropertyValue, which routes the logic for all normalizations, hooks, and standard CSS properties. */
        getPropertyValue: function (element, property, rootPropertyValue, forceStyleLookup) {
            /* Get an element's computed property value. */
            /* Note: Retrieving the value of a CSS property cannot simply be performed by checking an element's
               style attribute (which only reflects user-defined values). Instead, the browser must be queried for a property's
               *computed* value. You can read more about getComputedStyle here: https://developer.mozilla.org/en/docs/Web/API/window.getComputedStyle */
            function computePropertyValue (element, property) {
                /* When box-sizing isn't set to border-box, height and width style values are incorrectly computed when an
                   element's scrollbars are visible (which expands the element's dimensions). Thus, we defer to the more accurate
                   offsetHeight/Width property, which includes the total dimensions for interior, border, padding, and scrollbar.
                   We subtract border and padding to get the sum of interior + scrollbar. */
                var computedValue = 0;

                /* IE<=8 doesn't support window.getComputedStyle, thus we defer to jQuery, which has an extensive array
                   of hacks to accurately retrieve IE8 property values. Re-implementing that logic here is not worth bloating the
                   codebase for a dying browser. The performance repercussions of using jQuery here are minimal since
                   Velocity is optimized to rarely (and sometimes never) query the DOM. Further, the $.css() codepath isn't that slow. */
                if (IE <= 8) {
                    computedValue = $.css(element, property); /* GET */
                /* All other browsers support getComputedStyle. The returned live object reference is cached onto its
                   associated element so that it does not need to be refetched upon every GET. */
                } else {
                    /* Browsers do not return height and width values for elements that are set to display:"none". Thus, we temporarily
                       toggle display to the element type's default value. */
                    var toggleDisplay = false;

                    if (/^(width|height)$/.test(property) && CSS.getPropertyValue(element, "display") === 0) {
                        toggleDisplay = true;
                        CSS.setPropertyValue(element, "display", CSS.Values.getDisplayType(element));
                    }

                    function revertDisplay () {
                        if (toggleDisplay) {
                            CSS.setPropertyValue(element, "display", "none");
                        }
                    }

                    if (!forceStyleLookup) {
                        if (property === "height" && CSS.getPropertyValue(element, "boxSizing").toString().toLowerCase() !== "border-box") {
                            var contentBoxHeight = element.offsetHeight - (parseFloat(CSS.getPropertyValue(element, "borderTopWidth")) || 0) - (parseFloat(CSS.getPropertyValue(element, "borderBottomWidth")) || 0) - (parseFloat(CSS.getPropertyValue(element, "paddingTop")) || 0) - (parseFloat(CSS.getPropertyValue(element, "paddingBottom")) || 0);
                            revertDisplay();

                            return contentBoxHeight;
                        } else if (property === "width" && CSS.getPropertyValue(element, "boxSizing").toString().toLowerCase() !== "border-box") {
                            var contentBoxWidth = element.offsetWidth - (parseFloat(CSS.getPropertyValue(element, "borderLeftWidth")) || 0) - (parseFloat(CSS.getPropertyValue(element, "borderRightWidth")) || 0) - (parseFloat(CSS.getPropertyValue(element, "paddingLeft")) || 0) - (parseFloat(CSS.getPropertyValue(element, "paddingRight")) || 0);
                            revertDisplay();

                            return contentBoxWidth;
                        }
                    }

                    var computedStyle;

                    /* For elements that Velocity hasn't been called on directly (e.g. when Velocity queries the DOM on behalf
                       of a parent of an element its animating), perform a direct getComputedStyle lookup since the object isn't cached. */
                    if (Data(element) === undefined) {
                        computedStyle = window.getComputedStyle(element, null); /* GET */
                    /* If the computedStyle object has yet to be cached, do so now. */
                    } else if (!Data(element).computedStyle) {
                        computedStyle = Data(element).computedStyle = window.getComputedStyle(element, null); /* GET */
                    /* If computedStyle is cached, use it. */
                    } else {
                        computedStyle = Data(element).computedStyle;
                    }

                    /* IE and Firefox do not return a value for the generic borderColor -- they only return individual values for each border side's color.
                       As a polyfill for querying individual border side colors, just return the top border's color. */
                    if ((IE || Velocity.State.isFirefox) && property === "borderColor") {
                        property = "borderTopColor";
                    }

                    /* IE9 has a bug in which the "filter" property must be accessed from computedStyle using the getPropertyValue method
                       instead of a direct property lookup. The getPropertyValue method is slower than a direct lookup, which is why we avoid it by default. */
                    if (IE === 9 && property === "filter") {
                        computedValue = computedStyle.getPropertyValue(property); /* GET */
                    } else {
                        computedValue = computedStyle[property];
                    }

                    /* Fall back to the property's style value (if defined) when computedValue returns nothing,
                       which can happen when the element hasn't been painted. */
                    if (computedValue === "" || computedValue === null) {
                        computedValue = element.style[property];
                    }

                    revertDisplay();
                }

                /* For top, right, bottom, and left (TRBL) values that are set to "auto" on elements of "fixed" or "absolute" position,
                   defer to jQuery for converting "auto" to a numeric value. (For elements with a "static" or "relative" position, "auto" has the same
                   effect as being set to 0, so no conversion is necessary.) */
                /* An example of why numeric conversion is necessary: When an element with "position:absolute" has an untouched "left"
                   property, which reverts to "auto", left's value is 0 relative to its parent element, but is often non-zero relative
                   to its *containing* (not parent) element, which is the nearest "position:relative" ancestor or the viewport (and always the viewport in the case of "position:fixed"). */
                if (computedValue === "auto" && /^(top|right|bottom|left)$/i.test(property)) {
                    var position = computePropertyValue(element, "position"); /* GET */

                    /* For absolute positioning, jQuery's $.position() only returns values for top and left;
                       right and bottom will have their "auto" value reverted to 0. */
                    /* Note: A jQuery object must be created here since jQuery doesn't have a low-level alias for $.position().
                       Not a big deal since we're currently in a GET batch anyway. */
                    if (position === "fixed" || (position === "absolute" && /top|left/i.test(property))) {
                        /* Note: jQuery strips the pixel unit from its returned values; we re-add it here to conform with computePropertyValue's behavior. */
                        computedValue = $(element).position()[property] + "px"; /* GET */
                    }
                }

                return computedValue;
            }

            var propertyValue;

            /* If this is a hooked property (e.g. "clipLeft" instead of the root property of "clip"),
               extract the hook's value from a normalized rootPropertyValue using CSS.Hooks.extractValue(). */
            if (CSS.Hooks.registered[property]) {
                var hook = property,
                    hookRoot = CSS.Hooks.getRoot(hook);

                /* If a cached rootPropertyValue wasn't passed in (which Velocity always attempts to do in order to avoid requerying the DOM),
                   query the DOM for the root property's value. */
                if (rootPropertyValue === undefined) {
                    /* Since the browser is now being directly queried, use the official post-prefixing property name for this lookup. */
                    rootPropertyValue = CSS.getPropertyValue(element, CSS.Names.prefixCheck(hookRoot)[0]); /* GET */
                }

                /* If this root has a normalization registered, peform the associated normalization extraction. */
                if (CSS.Normalizations.registered[hookRoot]) {
                    rootPropertyValue = CSS.Normalizations.registered[hookRoot]("extract", element, rootPropertyValue);
                }

                /* Extract the hook's value. */
                propertyValue = CSS.Hooks.extractValue(hook, rootPropertyValue);

            /* If this is a normalized property (e.g. "opacity" becomes "filter" in <=IE8) or "translateX" becomes "transform"),
               normalize the property's name and value, and handle the special case of transforms. */
            /* Note: Normalizing a property is mutually exclusive from hooking a property since hook-extracted values are strictly
               numerical and therefore do not require normalization extraction. */
            } else if (CSS.Normalizations.registered[property]) {
                var normalizedPropertyName,
                    normalizedPropertyValue;

                normalizedPropertyName = CSS.Normalizations.registered[property]("name", element);

                /* Transform values are calculated via normalization extraction (see below), which checks against the element's transformCache.
                   At no point do transform GETs ever actually query the DOM; initial stylesheet values are never processed.
                   This is because parsing 3D transform matrices is not always accurate and would bloat our codebase;
                   thus, normalization extraction defaults initial transform values to their zero-values (e.g. 1 for scaleX and 0 for translateX). */
                if (normalizedPropertyName !== "transform") {
                    normalizedPropertyValue = computePropertyValue(element, CSS.Names.prefixCheck(normalizedPropertyName)[0]); /* GET */

                    /* If the value is a CSS null-value and this property has a hook template, use that zero-value template so that hooks can be extracted from it. */
                    if (CSS.Values.isCSSNullValue(normalizedPropertyValue) && CSS.Hooks.templates[property]) {
                        normalizedPropertyValue = CSS.Hooks.templates[property][1];
                    }
                }

                propertyValue = CSS.Normalizations.registered[property]("extract", element, normalizedPropertyValue);
            }

            /* If a (numeric) value wasn't produced via hook extraction or normalization, query the DOM. */
            if (!/^[\d-]/.test(propertyValue)) {
                /* For SVG elements, dimensional properties (which SVGAttribute() detects) are tweened via
                   their HTML attribute values instead of their CSS style values. */
                if (Data(element) && Data(element).isSVG && CSS.Names.SVGAttribute(property)) {
                    /* Since the height/width attribute values must be set manually, they don't reflect computed values.
                       Thus, we use use getBBox() to ensure we always get values for elements with undefined height/width attributes. */
                    if (/^(height|width)$/i.test(property)) {
                        propertyValue = element.getBBox()[property];
                    /* Otherwise, access the attribute value directly. */
                    } else {
                        propertyValue = element.getAttribute(property);
                    }
                } else {
                    propertyValue = computePropertyValue(element, CSS.Names.prefixCheck(property)[0]); /* GET */
                }
            }

            /* Since property lookups are for animation purposes (which entails computing the numeric delta between start and end values),
               convert CSS null-values to an integer of value 0. */
            if (CSS.Values.isCSSNullValue(propertyValue)) {
                propertyValue = 0;
            }

            if (Velocity.debug >= 2) console.log("Get " + property + ": " + propertyValue);

            return propertyValue;
        },

        /* The singular setPropertyValue, which routes the logic for all normalizations, hooks, and standard CSS properties. */
        setPropertyValue: function(element, property, propertyValue, rootPropertyValue, scrollData) {
            var propertyName = property;

            /* In order to be subjected to call options and element queueing, scroll animation is routed through Velocity as if it were a standard CSS property. */
            if (property === "scroll") {
                /* If a container option is present, scroll the container instead of the browser window. */
                if (scrollData.container) {
                    scrollData.container["scroll" + scrollData.direction] = propertyValue;
                /* Otherwise, Velocity defaults to scrolling the browser window. */
                } else {
                    if (scrollData.direction === "Left") {
                        window.scrollTo(propertyValue, scrollData.alternateValue);
                    } else {
                        window.scrollTo(scrollData.alternateValue, propertyValue);
                    }
                }
            } else {
                /* Transforms (translateX, rotateZ, etc.) are applied to a per-element transformCache object, which is manually flushed via flushTransformCache().
                   Thus, for now, we merely cache transforms being SET. */
                if (CSS.Normalizations.registered[property] && CSS.Normalizations.registered[property]("name", element) === "transform") {
                    /* Perform a normalization injection. */
                    /* Note: The normalization logic handles the transformCache updating. */
                    CSS.Normalizations.registered[property]("inject", element, propertyValue);

                    propertyName = "transform";
                    propertyValue = Data(element).transformCache[property];
                } else {
                    /* Inject hooks. */
                    if (CSS.Hooks.registered[property]) {
                        var hookName = property,
                            hookRoot = CSS.Hooks.getRoot(property);

                        /* If a cached rootPropertyValue was not provided, query the DOM for the hookRoot's current value. */
                        rootPropertyValue = rootPropertyValue || CSS.getPropertyValue(element, hookRoot); /* GET */

                        propertyValue = CSS.Hooks.injectValue(hookName, propertyValue, rootPropertyValue);
                        property = hookRoot;
                    }

                    /* Normalize names and values. */
                    if (CSS.Normalizations.registered[property]) {
                        propertyValue = CSS.Normalizations.registered[property]("inject", element, propertyValue);
                        property = CSS.Normalizations.registered[property]("name", element);
                    }

                    /* Assign the appropriate vendor prefix before performing an official style update. */
                    propertyName = CSS.Names.prefixCheck(property)[0];

                    /* A try/catch is used for IE<=8, which throws an error when "invalid" CSS values are set, e.g. a negative width.
                       Try/catch is avoided for other browsers since it incurs a performance overhead. */
                    if (IE <= 8) {
                        try {
                            element.style[propertyName] = propertyValue;
                        } catch (error) { if (Velocity.debug) console.log("Browser does not support [" + propertyValue + "] for [" + propertyName + "]"); }
                    /* SVG elements have their dimensional properties (width, height, x, y, cx, etc.) applied directly as attributes instead of as styles. */
                    /* Note: IE8 does not support SVG elements, so it's okay that we skip it for SVG animation. */
                    } else if (Data(element) && Data(element).isSVG && CSS.Names.SVGAttribute(property)) {
                        /* Note: For SVG attributes, vendor-prefixed property names are never used. */
                        /* Note: Not all CSS properties can be animated via attributes, but the browser won't throw an error for unsupported properties. */
                        element.setAttribute(property, propertyValue);
                    } else {
                        element.style[propertyName] = propertyValue;
                    }

                    if (Velocity.debug >= 2) console.log("Set " + property + " (" + propertyName + "): " + propertyValue);
                }
            }

            /* Return the normalized property name and value in case the caller wants to know how these values were modified before being applied to the DOM. */
            return [ propertyName, propertyValue ];
        },

        /* To increase performance by batching transform updates into a single SET, transforms are not directly applied to an element until flushTransformCache() is called. */
        /* Note: Velocity applies transform properties in the same order that they are chronogically introduced to the element's CSS styles. */
        flushTransformCache: function(element) {
            var transformString = "";

            /* Certain browsers require that SVG transforms be applied as an attribute. However, the SVG transform attribute takes a modified version of CSS's transform string
               (units are dropped and, except for skewX/Y, subproperties are merged into their master property -- e.g. scaleX and scaleY are merged into scale(X Y). */
            if ((IE || (Velocity.State.isAndroid && !Velocity.State.isChrome)) && Data(element).isSVG) {
                /* Since transform values are stored in their parentheses-wrapped form, we use a helper function to strip out their numeric values.
                   Further, SVG transform properties only take unitless (representing pixels) values, so it's okay that parseFloat() strips the unit suffixed to the float value. */
                function getTransformFloat (transformProperty) {
                    return parseFloat(CSS.getPropertyValue(element, transformProperty));
                }

                /* Create an object to organize all the transforms that we'll apply to the SVG element. To keep the logic simple,
                   we process *all* transform properties -- even those that may not be explicitly applied (since they default to their zero-values anyway). */
                var SVGTransforms = {
                    translate: [ getTransformFloat("translateX"), getTransformFloat("translateY") ],
                    skewX: [ getTransformFloat("skewX") ], skewY: [ getTransformFloat("skewY") ],
                    /* If the scale property is set (non-1), use that value for the scaleX and scaleY values
                       (this behavior mimics the result of animating all these properties at once on HTML elements). */
                    scale: getTransformFloat("scale") !== 1 ? [ getTransformFloat("scale"), getTransformFloat("scale") ] : [ getTransformFloat("scaleX"), getTransformFloat("scaleY") ],
                    /* Note: SVG's rotate transform takes three values: rotation degrees followed by the X and Y values
                       defining the rotation's origin point. We ignore the origin values (default them to 0). */
                    rotate: [ getTransformFloat("rotateZ"), 0, 0 ]
                };

                /* Iterate through the transform properties in the user-defined property map order.
                   (This mimics the behavior of non-SVG transform animation.) */
                $.each(Data(element).transformCache, function(transformName) {
                    /* Except for with skewX/Y, revert the axis-specific transform subproperties to their axis-free master
                       properties so that they match up with SVG's accepted transform properties. */
                    if (/^translate/i.test(transformName)) {
                        transformName = "translate";
                    } else if (/^scale/i.test(transformName)) {
                        transformName = "scale";
                    } else if (/^rotate/i.test(transformName)) {
                        transformName = "rotate";
                    }

                    /* Check that we haven't yet deleted the property from the SVGTransforms container. */
                    if (SVGTransforms[transformName]) {
                        /* Append the transform property in the SVG-supported transform format. As per the spec, surround the space-delimited values in parentheses. */
                        transformString += transformName + "(" + SVGTransforms[transformName].join(" ") + ")" + " ";

                        /* After processing an SVG transform property, delete it from the SVGTransforms container so we don't
                           re-insert the same master property if we encounter another one of its axis-specific properties. */
                        delete SVGTransforms[transformName];
                    }
                });
            } else {
                var transformValue,
                    perspective;

                /* Transform properties are stored as members of the transformCache object. Concatenate all the members into a string. */
                $.each(Data(element).transformCache, function(transformName) {
                    transformValue = Data(element).transformCache[transformName];

                    /* Transform's perspective subproperty must be set first in order to take effect. Store it temporarily. */
                    if (transformName === "transformPerspective") {
                        perspective = transformValue;
                        return true;
                    }

                    /* IE9 only supports one rotation type, rotateZ, which it refers to as "rotate". */
                    if (IE === 9 && transformName === "rotateZ") {
                        transformName = "rotate";
                    }

                    transformString += transformName + transformValue + " ";
                });

                /* If present, set the perspective subproperty first. */
                if (perspective) {
                    transformString = "perspective" + perspective + " " + transformString;
                }
            }

            CSS.setPropertyValue(element, "transform", transformString);
        }
    };

    /* Register hooks and normalizations. */
    CSS.Hooks.register();
    CSS.Normalizations.register();

    /* Allow hook setting in the same fashion as jQuery's $.css(). */
    Velocity.hook = function (elements, arg2, arg3) {
        var value = undefined;

        elements = sanitizeElements(elements);

        $.each(elements, function(i, element) {
            /* Initialize Velocity's per-element data cache if this element hasn't previously been animated. */
            if (Data(element) === undefined) {
                Velocity.init(element);
            }

            /* Get property value. If an element set was passed in, only return the value for the first element. */
            if (arg3 === undefined) {
                if (value === undefined) {
                    value = Velocity.CSS.getPropertyValue(element, arg2);
                }
            /* Set property value. */
            } else {
                /* sPV returns an array of the normalized propertyName/propertyValue pair used to update the DOM. */
                var adjustedSet = Velocity.CSS.setPropertyValue(element, arg2, arg3);

                /* Transform properties don't automatically set. They have to be flushed to the DOM. */
                if (adjustedSet[0] === "transform") {
                    Velocity.CSS.flushTransformCache(element);
                }

                value = adjustedSet;
            }
        });

        return value;
    };

    /*****************
        Animation
    *****************/

    var animate = function() {

        /******************
            Call Chain
        ******************/

        /* Logic for determining what to return to the call stack when exiting out of Velocity. */
        function getChain () {
            /* If we are using the utility function, attempt to return this call's promise. If no promise library was detected,
               default to null instead of returning the targeted elements so that utility function's return value is standardized. */
            if (isUtility) {
                return promiseData.promise || null;
            /* Otherwise, if we're using $.fn, return the jQuery-/Zepto-wrapped element set. */
            } else {
                return elementsWrapped;
            }
        }

        /*************************
           Arguments Assignment
        *************************/

        /* To allow for expressive CoffeeScript code, Velocity supports an alternative syntax in which "properties" and "options"
           objects are defined on a container object that's passed in as Velocity's sole argument. */
        /* Note: Some browsers automatically populate arguments with a "properties" object. We detect it by checking for its default "names" property. */
        var syntacticSugar = (arguments[0] && (($.isPlainObject(arguments[0].properties) && !arguments[0].properties.names) || Type.isString(arguments[0].properties))),
            /* Whether Velocity was called via the utility function (as opposed to on a jQuery/Zepto object). */
            isUtility,
            /* When Velocity is called via the utility function ($.Velocity()/Velocity()), elements are explicitly
               passed in as the first parameter. Thus, argument positioning varies. We normalize them here. */
            elementsWrapped,
            argumentIndex;

        var elements,
            propertiesMap,
            options;

        /* Detect jQuery/Zepto elements being animated via the $.fn method. */
        if (Type.isWrapped(this)) {
            isUtility = false;

            argumentIndex = 0;
            elements = this;
            elementsWrapped = this;
        /* Otherwise, raw elements are being animated via the utility function. */
        } else {
            isUtility = true;

            argumentIndex = 1;
            elements = syntacticSugar ? arguments[0].elements : arguments[0];
        }

        elements = sanitizeElements(elements);

        if (!elements) {
            return;
        }

        if (syntacticSugar) {
            propertiesMap = arguments[0].properties;
            options = arguments[0].options;
        } else {
            propertiesMap = arguments[argumentIndex];
            options = arguments[argumentIndex + 1];
        }

        /* The length of the element set (in the form of a nodeList or an array of elements) is defaulted to 1 in case a
           single raw DOM element is passed in (which doesn't contain a length property). */
        var elementsLength = elements.length,
            elementsIndex = 0;

        /***************************
            Argument Overloading
        ***************************/

        /* Support is included for jQuery's argument overloading: $.animate(propertyMap [, duration] [, easing] [, complete]).
           Overloading is detected by checking for the absence of an object being passed into options. */
        /* Note: The stop action does not accept animation options, and is therefore excluded from this check. */
        if (propertiesMap !== "stop" && !$.isPlainObject(options)) {
            /* The utility function shifts all arguments one position to the right, so we adjust for that offset. */
            var startingArgumentPosition = argumentIndex + 1;

            options = {};

            /* Iterate through all options arguments */
            for (var i = startingArgumentPosition; i < arguments.length; i++) {
                /* Treat a number as a duration. Parse it out. */
                /* Note: The following RegEx will return true if passed an array with a number as its first item.
                   Thus, arrays are skipped from this check. */
                if (!Type.isArray(arguments[i]) && (/^(fast|normal|slow)$/i.test(arguments[i]) || /^\d/.test(arguments[i]))) {
                    options.duration = arguments[i];
                /* Treat strings and arrays as easings. */
                } else if (Type.isString(arguments[i]) || Type.isArray(arguments[i])) {
                    options.easing = arguments[i];
                /* Treat a function as a complete callback. */
                } else if (Type.isFunction(arguments[i])) {
                    options.complete = arguments[i];
                }
            }
        }

        /***************
            Promises
        ***************/

        var promiseData = {
                promise: null,
                resolver: null,
                rejecter: null
            };

        /* If this call was made via the utility function (which is the default method of invocation when jQuery/Zepto are not being used), and if
           promise support was detected, create a promise object for this call and store references to its resolver and rejecter methods. The resolve
           method is used when a call completes naturally or is prematurely stopped by the user. In both cases, completeCall() handles the associated
           call cleanup and promise resolving logic. The reject method is used when an invalid set of arguments is passed into a Velocity call. */
        /* Note: Velocity employs a call-based queueing architecture, which means that stopping an animating element actually stops the full call that
           triggered it -- not that one element exclusively. Similarly, there is one promise per call, and all elements targeted by a Velocity call are
           grouped together for the purposes of resolving and rejecting a promise. */
        if (isUtility && Velocity.Promise) {
            promiseData.promise = new Velocity.Promise(function (resolve, reject) {
                promiseData.resolver = resolve;
                promiseData.rejecter = reject;
            });
        }

        /*********************
           Action Detection
        *********************/

        /* Velocity's behavior is categorized into "actions": Elements can either be specially scrolled into view,
           or they can be started, stopped, or reversed. If a literal or referenced properties map is passed in as Velocity's
           first argument, the associated action is "start". Alternatively, "scroll", "reverse", or "stop" can be passed in instead of a properties map. */
        var action;

        switch (propertiesMap) {
            case "scroll":
                action = "scroll";
                break;

            case "reverse":
                action = "reverse";
                break;

            case "stop":
                /*******************
                    Action: Stop
                *******************/

                /* Clear the currently-active delay on each targeted element. */
                $.each(elements, function(i, element) {
                    if (Data(element) && Data(element).delayTimer) {
                        /* Stop the timer from triggering its cached next() function. */
                        clearTimeout(Data(element).delayTimer.setTimeout);

                        /* Manually call the next() function so that the subsequent queue items can progress. */
                        if (Data(element).delayTimer.next) {
                            Data(element).delayTimer.next();
                        }

                        delete Data(element).delayTimer;
                    }
                });

                var callsToStop = [];

                /* When the stop action is triggered, the elements' currently active call is immediately stopped. The active call might have
                   been applied to multiple elements, in which case all of the call's elements will be subjected to stopping. When an element
                   is stopped, the next item in its animation queue is immediately triggered. */
                /* An additional argument may be passed in to clear an element's remaining queued calls. Either true (which defaults to the "fx" queue)
                   or a custom queue string can be passed in. */
                /* Note: The stop command runs prior to Queueing since its behavior is intended to take effect *immediately*,
                   regardless of the element's current queue state. */

                /* Iterate through every active call. */
                $.each(Velocity.State.calls, function(i, activeCall) {
                    /* Inactive calls are set to false by the logic inside completeCall(). Skip them. */
                    if (activeCall) {
                        /* Iterate through the active call's targeted elements. */
                        $.each(activeCall[1], function(k, activeElement) {
                            var queueName = Type.isString(options) ? options : "";

                            if (options !== undefined && activeCall[2].queue !== queueName) {
                                return true;
                            }

                            /* Iterate through the calls targeted by the stop command. */
                            $.each(elements, function(l, element) {
                                /* Check that this call was applied to the target element. */
                                if (element === activeElement) {
                                    /* Optionally clear the remaining queued calls. */
                                    if (options !== undefined) {
                                        /* Iterate through the items in the element's queue. */
                                        $.each($.queue(element, queueName), function(_, item) {
                                            /* The queue array can contain an "inprogress" string, which we skip. */
                                            if (Type.isFunction(item)) {
                                                /* Pass the item's callback a flag indicating that we want to abort from the queue call.
                                                   (Specifically, the queue will resolve the call's associated promise then abort.)  */
                                                item(null, true);
                                            }
                                        });

                                        /* Clearing the $.queue() array is achieved by resetting it to []. */
                                        $.queue(element, queueName, []);
                                    }

                                    if (Data(element) && queueName === "") {
                                        /* Since "reverse" uses cached start values (the previous call's endValues),
                                           these values must be changed to reflect the final value that the elements were actually tweened to. */
                                        $.each(Data(element).tweensContainer, function(m, activeTween) {
                                            activeTween.endValue = activeTween.currentValue;
                                        });
                                    }

                                    callsToStop.push(i);
                                }
                            });
                        });
                    }
                });

                /* Prematurely call completeCall() on each matched active call, passing an additional flag to indicate
                   that the complete callback and display:none setting should be skipped since we're completing prematurely. */
                $.each(callsToStop, function(i, j) {
                    completeCall(j, true);
                });

                if (promiseData.promise) {
                    /* Immediately resolve the promise associated with this stop call since stop runs synchronously. */
                    promiseData.resolver(elements);
                }

                /* Since we're stopping, and not proceeding with queueing, exit out of Velocity. */
                return getChain();

            default:
                /* Treat a non-empty plain object as a literal properties map. */
                if ($.isPlainObject(propertiesMap) && !Type.isEmptyObject(propertiesMap)) {
                    action = "start";

                /****************
                    Redirects
                ****************/

                /* Check if a string matches a registered redirect (see Redirects above). */
                } else if (Type.isString(propertiesMap) && Velocity.Redirects[propertiesMap]) {
                    var opts = $.extend({}, options),
                        durationOriginal = opts.duration,
                        delayOriginal = opts.delay || 0;

                    /* If the backwards option was passed in, reverse the element set so that elements animate from the last to the first. */
                    if (opts.backwards === true) {
                        elements = $.extend(true, [], elements).reverse();
                    }

                    /* Individually trigger the redirect for each element in the set to prevent users from having to handle iteration logic in their redirect. */
                    $.each(elements, function(elementIndex, element) {
                        /* If the stagger option was passed in, successively delay each element by the stagger value (in ms). Retain the original delay value. */
                        if (parseFloat(opts.stagger)) {
                            opts.delay = delayOriginal + (parseFloat(opts.stagger) * elementIndex);
                        } else if (Type.isFunction(opts.stagger)) {
                            opts.delay = delayOriginal + opts.stagger.call(element, elementIndex, elementsLength);
                        }

                        /* If the drag option was passed in, successively increase/decrease (depending on the presense of opts.backwards)
                           the duration of each element's animation, using floors to prevent producing very short durations. */
                        if (opts.drag) {
                            /* Default the duration of UI pack effects (callouts and transitions) to 1000ms instead of the usual default duration of 400ms. */
                            opts.duration = parseFloat(durationOriginal) || (/^(callout|transition)/.test(propertiesMap) ? 1000 : DURATION_DEFAULT);

                            /* For each element, take the greater duration of: A) animation completion percentage relative to the original duration,
                               B) 75% of the original duration, or C) a 200ms fallback (in case duration is already set to a low value).
                               The end result is a baseline of 75% of the redirect's duration that increases/decreases as the end of the element set is approached. */
                            opts.duration = Math.max(opts.duration * (opts.backwards ? 1 - elementIndex/elementsLength : (elementIndex + 1) / elementsLength), opts.duration * 0.75, 200);
                        }

                        /* Pass in the call's opts object so that the redirect can optionally extend it. It defaults to an empty object instead of null to
                           reduce the opts checking logic required inside the redirect. */
                        Velocity.Redirects[propertiesMap].call(element, element, opts || {}, elementIndex, elementsLength, elements, promiseData.promise ? promiseData : undefined);
                    });

                    /* Since the animation logic resides within the redirect's own code, abort the remainder of this call.
                       (The performance overhead up to this point is virtually non-existant.) */
                    /* Note: The jQuery call chain is kept intact by returning the complete element set. */
                    return getChain();
                } else {
                    var abortError = "Velocity: First argument (" + propertiesMap + ") was not a property map, a known action, or a registered redirect. Aborting.";

                    if (promiseData.promise) {
                        promiseData.rejecter(new Error(abortError));
                    } else {
                        console.log(abortError);
                    }

                    return getChain();
                }
        }

        /**************************
            Call-Wide Variables
        **************************/

        /* A container for CSS unit conversion ratios (e.g. %, rem, and em ==> px) that is used to cache ratios across all elements
           being animated in a single Velocity call. Calculating unit ratios necessitates DOM querying and updating, and is therefore
           avoided (via caching) wherever possible. This container is call-wide instead of page-wide to avoid the risk of using stale
           conversion metrics across Velocity animations that are not immediately consecutively chained. */
        var callUnitConversionData = {
                lastParent: null,
                lastPosition: null,
                lastFontSize: null,
                lastPercentToPxWidth: null,
                lastPercentToPxHeight: null,
                lastEmToPx: null,
                remToPx: null,
                vwToPx: null,
                vhToPx: null
            };

        /* A container for all the ensuing tween data and metadata associated with this call. This container gets pushed to the page-wide
           Velocity.State.calls array that is processed during animation ticking. */
        var call = [];

        /************************
           Element Processing
        ************************/

        /* Element processing consists of three parts -- data processing that cannot go stale and data processing that *can* go stale (i.e. third-party style modifications):
           1) Pre-Queueing: Element-wide variables, including the element's data storage, are instantiated. Call options are prepared. If triggered, the Stop action is executed.
           2) Queueing: The logic that runs once this call has reached its point of execution in the element's $.queue() stack. Most logic is placed here to avoid risking it becoming stale.
           3) Pushing: Consolidation of the tween data followed by its push onto the global in-progress calls container.
        */

        function processElement () {

            /*************************
               Part I: Pre-Queueing
            *************************/

            /***************************
               Element-Wide Variables
            ***************************/

            var element = this,
                /* The runtime opts object is the extension of the current call's options and Velocity's page-wide option defaults. */
                opts = $.extend({}, Velocity.defaults, options),
                /* A container for the processed data associated with each property in the propertyMap.
                   (Each property in the map produces its own "tween".) */
                tweensContainer = {},
                elementUnitConversionData;

            /******************
               Element Init
            ******************/

            if (Data(element) === undefined) {
                Velocity.init(element);
            }

            /******************
               Option: Delay
            ******************/

            /* Since queue:false doesn't respect the item's existing queue, we avoid injecting its delay here (it's set later on). */
            /* Note: Velocity rolls its own delay function since jQuery doesn't have a utility alias for $.fn.delay()
               (and thus requires jQuery element creation, which we avoid since its overhead includes DOM querying). */
            if (parseFloat(opts.delay) && opts.queue !== false) {
                $.queue(element, opts.queue, function(next) {
                    /* This is a flag used to indicate to the upcoming completeCall() function that this queue entry was initiated by Velocity. See completeCall() for further details. */
                    Velocity.velocityQueueEntryFlag = true;

                    /* The ensuing queue item (which is assigned to the "next" argument that $.queue() automatically passes in) will be triggered after a setTimeout delay.
                       The setTimeout is stored so that it can be subjected to clearTimeout() if this animation is prematurely stopped via Velocity's "stop" command. */
                    Data(element).delayTimer = {
                        setTimeout: setTimeout(next, parseFloat(opts.delay)),
                        next: next
                    };
                });
            }

            /*********************
               Option: Duration
            *********************/

            /* Support for jQuery's named durations. */
            switch (opts.duration.toString().toLowerCase()) {
                case "fast":
                    opts.duration = 200;
                    break;

                case "normal":
                    opts.duration = DURATION_DEFAULT;
                    break;

                case "slow":
                    opts.duration = 600;
                    break;

                default:
                    /* Remove the potential "ms" suffix and default to 1 if the user is attempting to set a duration of 0 (in order to produce an immediate style change). */
                    opts.duration = parseFloat(opts.duration) || 1;
            }

            /************************
               Global Option: Mock
            ************************/

            if (Velocity.mock !== false) {
                /* In mock mode, all animations are forced to 1ms so that they occur immediately upon the next rAF tick.
                   Alternatively, a multiplier can be passed in to time remap all delays and durations. */
                if (Velocity.mock === true) {
                    opts.duration = opts.delay = 1;
                } else {
                    opts.duration *= parseFloat(Velocity.mock) || 1;
                    opts.delay *= parseFloat(Velocity.mock) || 1;
                }
            }

            /*******************
               Option: Easing
            *******************/

            opts.easing = getEasing(opts.easing, opts.duration);

            /**********************
               Option: Callbacks
            **********************/

            /* Callbacks must functions. Otherwise, default to null. */
            if (opts.begin && !Type.isFunction(opts.begin)) {
                opts.begin = null;
            }

            if (opts.progress && !Type.isFunction(opts.progress)) {
                opts.progress = null;
            }

            if (opts.complete && !Type.isFunction(opts.complete)) {
                opts.complete = null;
            }

            /*********************************
               Option: Display & Visibility
            *********************************/

            /* Refer to Velocity's documentation (VelocityJS.org/#displayAndVisibility) for a description of the display and visibility options' behavior. */
            /* Note: We strictly check for undefined instead of falsiness because display accepts an empty string value. */
            if (opts.display !== undefined && opts.display !== null) {
                opts.display = opts.display.toString().toLowerCase();

                /* Users can pass in a special "auto" value to instruct Velocity to set the element to its default display value. */
                if (opts.display === "auto") {
                    opts.display = Velocity.CSS.Values.getDisplayType(element);
                }
            }

            if (opts.visibility !== undefined && opts.visibility !== null) {
                opts.visibility = opts.visibility.toString().toLowerCase();
            }

            /**********************
               Option: mobileHA
            **********************/

            /* When set to true, and if this is a mobile device, mobileHA automatically enables hardware acceleration (via a null transform hack)
               on animating elements. HA is removed from the element at the completion of its animation. */
            /* Note: Android Gingerbread doesn't support HA. If a null transform hack (mobileHA) is in fact set, it will prevent other tranform subproperties from taking effect. */
            /* Note: You can read more about the use of mobileHA in Velocity's documentation: VelocityJS.org/#mobileHA. */
            opts.mobileHA = (opts.mobileHA && Velocity.State.isMobile && !Velocity.State.isGingerbread);

            /***********************
               Part II: Queueing
            ***********************/

            /* When a set of elements is targeted by a Velocity call, the set is broken up and each element has the current Velocity call individually queued onto it.
               In this way, each element's existing queue is respected; some elements may already be animating and accordingly should not have this current Velocity call triggered immediately. */
            /* In each queue, tween data is processed for each animating property then pushed onto the call-wide calls array. When the last element in the set has had its tweens processed,
               the call array is pushed to Velocity.State.calls for live processing by the requestAnimationFrame tick. */
            function buildQueue (next) {

                /*******************
                   Option: Begin
                *******************/

                /* The begin callback is fired once per call -- not once per elemenet -- and is passed the full raw DOM element set as both its context and its first argument. */
                if (opts.begin && elementsIndex === 0) {
                    /* We throw callbacks in a setTimeout so that thrown errors don't halt the execution of Velocity itself. */
                    try {
                        opts.begin.call(elements, elements);
                    } catch (error) {
                        setTimeout(function() { throw error; }, 1);
                    }
                }

                /*****************************************
                   Tween Data Construction (for Scroll)
                *****************************************/

                /* Note: In order to be subjected to chaining and animation options, scroll's tweening is routed through Velocity as if it were a standard CSS property animation. */
                if (action === "scroll") {
                    /* The scroll action uniquely takes an optional "offset" option -- specified in pixels -- that offsets the targeted scroll position. */
                    var scrollDirection = (/^x$/i.test(opts.axis) ? "Left" : "Top"),
                        scrollOffset = parseFloat(opts.offset) || 0,
                        scrollPositionCurrent,
                        scrollPositionCurrentAlternate,
                        scrollPositionEnd;

                    /* Scroll also uniquely takes an optional "container" option, which indicates the parent element that should be scrolled --
                       as opposed to the browser window itself. This is useful for scrolling toward an element that's inside an overflowing parent element. */
                    if (opts.container) {
                        /* Ensure that either a jQuery object or a raw DOM element was passed in. */
                        if (Type.isWrapped(opts.container) || Type.isNode(opts.container)) {
                            /* Extract the raw DOM element from the jQuery wrapper. */
                            opts.container = opts.container[0] || opts.container;
                            /* Note: Unlike other properties in Velocity, the browser's scroll position is never cached since it so frequently changes
                               (due to the user's natural interaction with the page). */
                            scrollPositionCurrent = opts.container["scroll" + scrollDirection]; /* GET */

                            /* $.position() values are relative to the container's currently viewable area (without taking into account the container's true dimensions
                               -- say, for example, if the container was not overflowing). Thus, the scroll end value is the sum of the child element's position *and*
                               the scroll container's current scroll position. */
                            /* Note: jQuery does not offer a utility alias for $.position(), so we have to incur jQuery object conversion here.
                               This syncs up with an ensuing batch of GETs, so it fortunately does not trigger layout thrashing. */
                            scrollPositionEnd = (scrollPositionCurrent + $(element).position()[scrollDirection.toLowerCase()]) + scrollOffset; /* GET */
                        /* If a value other than a jQuery object or a raw DOM element was passed in, default to null so that this option is ignored. */
                        } else {
                            opts.container = null;
                        }
                    } else {
                        /* If the window itself is being scrolled -- not a containing element -- perform a live scroll position lookup using
                           the appropriate cached property names (which differ based on browser type). */
                        scrollPositionCurrent = Velocity.State.scrollAnchor[Velocity.State["scrollProperty" + scrollDirection]]; /* GET */
                        /* When scrolling the browser window, cache the alternate axis's current value since window.scrollTo() doesn't let us change only one value at a time. */
                        scrollPositionCurrentAlternate = Velocity.State.scrollAnchor[Velocity.State["scrollProperty" + (scrollDirection === "Left" ? "Top" : "Left")]]; /* GET */

                        /* Unlike $.position(), $.offset() values are relative to the browser window's true dimensions -- not merely its currently viewable area --
                           and therefore end values do not need to be compounded onto current values. */
                        scrollPositionEnd = $(element).offset()[scrollDirection.toLowerCase()] + scrollOffset; /* GET */
                    }

                    /* Since there's only one format that scroll's associated tweensContainer can take, we create it manually. */
                    tweensContainer = {
                        scroll: {
                            rootPropertyValue: false,
                            startValue: scrollPositionCurrent,
                            currentValue: scrollPositionCurrent,
                            endValue: scrollPositionEnd,
                            unitType: "",
                            easing: opts.easing,
                            scrollData: {
                                container: opts.container,
                                direction: scrollDirection,
                                alternateValue: scrollPositionCurrentAlternate
                            }
                        },
                        element: element
                    };

                    if (Velocity.debug) console.log("tweensContainer (scroll): ", tweensContainer.scroll, element);

                /******************************************
                   Tween Data Construction (for Reverse)
                ******************************************/

                /* Reverse acts like a "start" action in that a property map is animated toward. The only difference is
                   that the property map used for reverse is the inverse of the map used in the previous call. Thus, we manipulate
                   the previous call to construct our new map: use the previous map's end values as our new map's start values. Copy over all other data. */
                /* Note: Reverse can be directly called via the "reverse" parameter, or it can be indirectly triggered via the loop option. (Loops are composed of multiple reverses.) */
                /* Note: Reverse calls do not need to be consecutively chained onto a currently-animating element in order to operate on cached values;
                   there is no harm to reverse being called on a potentially stale data cache since reverse's behavior is simply defined
                   as reverting to the element's values as they were prior to the previous *Velocity* call. */
                } else if (action === "reverse") {
                    /* Abort if there is no prior animation data to reverse to. */
                    if (!Data(element).tweensContainer) {
                        /* Dequeue the element so that this queue entry releases itself immediately, allowing subsequent queue entries to run. */
                        $.dequeue(element, opts.queue);

                        return;
                    } else {
                        /*********************
                           Options Parsing
                        *********************/

                        /* If the element was hidden via the display option in the previous call,
                           revert display to "auto" prior to reversal so that the element is visible again. */
                        if (Data(element).opts.display === "none") {
                            Data(element).opts.display = "auto";
                        }

                        if (Data(element).opts.visibility === "hidden") {
                            Data(element).opts.visibility = "visible";
                        }

                        /* If the loop option was set in the previous call, disable it so that "reverse" calls aren't recursively generated.
                           Further, remove the previous call's callback options; typically, users do not want these to be refired. */
                        Data(element).opts.loop = false;
                        Data(element).opts.begin = null;
                        Data(element).opts.complete = null;

                        /* Since we're extending an opts object that has already been extended with the defaults options object,
                           we remove non-explicitly-defined properties that are auto-assigned values. */
                        if (!options.easing) {
                            delete opts.easing;
                        }

                        if (!options.duration) {
                            delete opts.duration;
                        }

                        /* The opts object used for reversal is an extension of the options object optionally passed into this
                           reverse call plus the options used in the previous Velocity call. */
                        opts = $.extend({}, Data(element).opts, opts);

                        /*************************************
                           Tweens Container Reconstruction
                        *************************************/

                        /* Create a deepy copy (indicated via the true flag) of the previous call's tweensContainer. */
                        var lastTweensContainer = $.extend(true, {}, Data(element).tweensContainer);

                        /* Manipulate the previous tweensContainer by replacing its end values and currentValues with its start values. */
                        for (var lastTween in lastTweensContainer) {
                            /* In addition to tween data, tweensContainers contain an element property that we ignore here. */
                            if (lastTween !== "element") {
                                var lastStartValue = lastTweensContainer[lastTween].startValue;

                                lastTweensContainer[lastTween].startValue = lastTweensContainer[lastTween].currentValue = lastTweensContainer[lastTween].endValue;
                                lastTweensContainer[lastTween].endValue = lastStartValue;

                                /* Easing is the only option that embeds into the individual tween data (since it can be defined on a per-property basis).
                                   Accordingly, every property's easing value must be updated when an options object is passed in with a reverse call.
                                   The side effect of this extensibility is that all per-property easing values are forcefully reset to the new value. */
                                if (!Type.isEmptyObject(options)) {
                                    lastTweensContainer[lastTween].easing = opts.easing;
                                }

                                if (Velocity.debug) console.log("reverse tweensContainer (" + lastTween + "): " + JSON.stringify(lastTweensContainer[lastTween]), element);
                            }
                        }

                        tweensContainer = lastTweensContainer;
                    }

                /*****************************************
                   Tween Data Construction (for Start)
                *****************************************/

                } else if (action === "start") {

                    /*************************
                        Value Transferring
                    *************************/

                    /* If this queue entry follows a previous Velocity-initiated queue entry *and* if this entry was created
                       while the element was in the process of being animated by Velocity, then this current call is safe to use
                       the end values from the prior call as its start values. Velocity attempts to perform this value transfer
                       process whenever possible in order to avoid requerying the DOM. */
                    /* If values aren't transferred from a prior call and start values were not forcefed by the user (more on this below),
                       then the DOM is queried for the element's current values as a last resort. */
                    /* Note: Conversely, animation reversal (and looping) *always* perform inter-call value transfers; they never requery the DOM. */
                    var lastTweensContainer;

                    /* The per-element isAnimating flag is used to indicate whether it's safe (i.e. the data isn't stale)
                       to transfer over end values to use as start values. If it's set to true and there is a previous
                       Velocity call to pull values from, do so. */
                    if (Data(element).tweensContainer && Data(element).isAnimating === true) {
                        lastTweensContainer = Data(element).tweensContainer;
                    }

                    /***************************
                       Tween Data Calculation
                    ***************************/

                    /* This function parses property data and defaults endValue, easing, and startValue as appropriate. */
                    /* Property map values can either take the form of 1) a single value representing the end value,
                       or 2) an array in the form of [ endValue, [, easing] [, startValue] ].
                       The optional third parameter is a forcefed startValue to be used instead of querying the DOM for
                       the element's current value. Read Velocity's docmentation to learn more about forcefeeding: VelocityJS.org/#forcefeeding */
                    function parsePropertyValue (valueData, skipResolvingEasing) {
                        var endValue = undefined,
                            easing = undefined,
                            startValue = undefined;

                        /* Handle the array format, which can be structured as one of three potential overloads:
                           A) [ endValue, easing, startValue ], B) [ endValue, easing ], or C) [ endValue, startValue ] */
                        if (Type.isArray(valueData)) {
                            /* endValue is always the first item in the array. Don't bother validating endValue's value now
                               since the ensuing property cycling logic does that. */
                            endValue = valueData[0];

                            /* Two-item array format: If the second item is a number, function, or hex string, treat it as a
                               start value since easings can only be non-hex strings or arrays. */
                            if ((!Type.isArray(valueData[1]) && /^[\d-]/.test(valueData[1])) || Type.isFunction(valueData[1]) || CSS.RegEx.isHex.test(valueData[1])) {
                                startValue = valueData[1];
                            /* Two or three-item array: If the second item is a non-hex string or an array, treat it as an easing. */
                            } else if ((Type.isString(valueData[1]) && !CSS.RegEx.isHex.test(valueData[1])) || Type.isArray(valueData[1])) {
                                easing = skipResolvingEasing ? valueData[1] : getEasing(valueData[1], opts.duration);

                                /* Don't bother validating startValue's value now since the ensuing property cycling logic inherently does that. */
                                if (valueData[2] !== undefined) {
                                    startValue = valueData[2];
                                }
                            }
                        /* Handle the single-value format. */
                        } else {
                            endValue = valueData;
                        }

                        /* Default to the call's easing if a per-property easing type was not defined. */
                        if (!skipResolvingEasing) {
                            easing = easing || opts.easing;
                        }

                        /* If functions were passed in as values, pass the function the current element as its context,
                           plus the element's index and the element set's size as arguments. Then, assign the returned value. */
                        if (Type.isFunction(endValue)) {
                            endValue = endValue.call(element, elementsIndex, elementsLength);
                        }

                        if (Type.isFunction(startValue)) {
                            startValue = startValue.call(element, elementsIndex, elementsLength);
                        }

                        /* Allow startValue to be left as undefined to indicate to the ensuing code that its value was not forcefed. */
                        return [ endValue || 0, easing, startValue ];
                    }

                    /* Cycle through each property in the map, looking for shorthand color properties (e.g. "color" as opposed to "colorRed"). Inject the corresponding
                       colorRed, colorGreen, and colorBlue RGB component tweens into the propertiesMap (which Velocity understands) and remove the shorthand property. */
                    $.each(propertiesMap, function(property, value) {
                        /* Find shorthand color properties that have been passed a hex string. */
                        if (RegExp("^" + CSS.Lists.colors.join("$|^") + "$").test(property)) {
                            /* Parse the value data for each shorthand. */
                            var valueData = parsePropertyValue(value, true),
                                endValue = valueData[0],
                                easing = valueData[1],
                                startValue = valueData[2];

                            if (CSS.RegEx.isHex.test(endValue)) {
                                /* Convert the hex strings into their RGB component arrays. */
                                var colorComponents = [ "Red", "Green", "Blue" ],
                                    endValueRGB = CSS.Values.hexToRgb(endValue),
                                    startValueRGB = startValue ? CSS.Values.hexToRgb(startValue) : undefined;

                                /* Inject the RGB component tweens into propertiesMap. */
                                for (var i = 0; i < colorComponents.length; i++) {
                                    var dataArray = [ endValueRGB[i] ];

                                    if (easing) {
                                        dataArray.push(easing);
                                    }

                                    if (startValueRGB !== undefined) {
                                        dataArray.push(startValueRGB[i]);
                                    }

                                    propertiesMap[property + colorComponents[i]] = dataArray;
                                }

                                /* Remove the intermediary shorthand property entry now that we've processed it. */
                                delete propertiesMap[property];
                            }
                        }
                    });

                    /* Create a tween out of each property, and append its associated data to tweensContainer. */
                    for (var property in propertiesMap) {

                        /**************************
                           Start Value Sourcing
                        **************************/

                        /* Parse out endValue, easing, and startValue from the property's data. */
                        var valueData = parsePropertyValue(propertiesMap[property]),
                            endValue = valueData[0],
                            easing = valueData[1],
                            startValue = valueData[2];

                        /* Now that the original property name's format has been used for the parsePropertyValue() lookup above,
                           we force the property to its camelCase styling to normalize it for manipulation. */
                        property = CSS.Names.camelCase(property);

                        /* In case this property is a hook, there are circumstances where we will intend to work on the hook's root property and not the hooked subproperty. */
                        var rootProperty = CSS.Hooks.getRoot(property),
                            rootPropertyValue = false;

                        /* Properties that are not supported by the browser (and do not have an associated normalization) will
                           inherently produce no style changes when set, so they are skipped in order to decrease animation tick overhead.
                           Property support is determined via prefixCheck(), which returns a false flag when no supported is detected. */
                        /* Note: Since SVG elements have some of their properties directly applied as HTML attributes,
                           there is no way to check for their explicit browser support, and so we skip skip this check for them. */
                        if (!Data(element).isSVG && CSS.Names.prefixCheck(rootProperty)[1] === false && CSS.Normalizations.registered[rootProperty] === undefined) {
                            if (Velocity.debug) console.log("Skipping [" + rootProperty + "] due to a lack of browser support.");

                            continue;
                        }

                        /* If the display option is being set to a non-"none" (e.g. "block") and opacity (filter on IE<=8) is being
                           animated to an endValue of non-zero, the user's intention is to fade in from invisible, thus we forcefeed opacity
                           a startValue of 0 if its startValue hasn't already been sourced by value transferring or prior forcefeeding. */
                        if (((opts.display !== undefined && opts.display !== null && opts.display !== "none") || (opts.visibility !== undefined && opts.visibility !== "hidden")) && /opacity|filter/.test(property) && !startValue && endValue !== 0) {
                            startValue = 0;
                        }

                        /* If values have been transferred from the previous Velocity call, extract the endValue and rootPropertyValue
                           for all of the current call's properties that were *also* animated in the previous call. */
                        /* Note: Value transferring can optionally be disabled by the user via the _cacheValues option. */
                        if (opts._cacheValues && lastTweensContainer && lastTweensContainer[property]) {
                            if (startValue === undefined) {
                                startValue = lastTweensContainer[property].endValue + lastTweensContainer[property].unitType;
                            }

                            /* The previous call's rootPropertyValue is extracted from the element's data cache since that's the
                               instance of rootPropertyValue that gets freshly updated by the tweening process, whereas the rootPropertyValue
                               attached to the incoming lastTweensContainer is equal to the root property's value prior to any tweening. */
                            rootPropertyValue = Data(element).rootPropertyValueCache[rootProperty];
                        /* If values were not transferred from a previous Velocity call, query the DOM as needed. */
                        } else {
                            /* Handle hooked properties. */
                            if (CSS.Hooks.registered[property]) {
                               if (startValue === undefined) {
                                    rootPropertyValue = CSS.getPropertyValue(element, rootProperty); /* GET */
                                    /* Note: The following getPropertyValue() call does not actually trigger a DOM query;
                                       getPropertyValue() will extract the hook from rootPropertyValue. */
                                    startValue = CSS.getPropertyValue(element, property, rootPropertyValue);
                                /* If startValue is already defined via forcefeeding, do not query the DOM for the root property's value;
                                   just grab rootProperty's zero-value template from CSS.Hooks. This overwrites the element's actual
                                   root property value (if one is set), but this is acceptable since the primary reason users forcefeed is
                                   to avoid DOM queries, and thus we likewise avoid querying the DOM for the root property's value. */
                                } else {
                                    /* Grab this hook's zero-value template, e.g. "0px 0px 0px black". */
                                    rootPropertyValue = CSS.Hooks.templates[rootProperty][1];
                                }
                            /* Handle non-hooked properties that haven't already been defined via forcefeeding. */
                            } else if (startValue === undefined) {
                                startValue = CSS.getPropertyValue(element, property); /* GET */
                            }
                        }

                        /**************************
                           Value Data Extraction
                        **************************/

                        var separatedValue,
                            endValueUnitType,
                            startValueUnitType,
                            operator = false;

                        /* Separates a property value into its numeric value and its unit type. */
                        function separateValue (property, value) {
                            var unitType,
                                numericValue;

                            numericValue = (value || "0")
                                .toString()
                                .toLowerCase()
                                /* Match the unit type at the end of the value. */
                                .replace(/[%A-z]+$/, function(match) {
                                    /* Grab the unit type. */
                                    unitType = match;

                                    /* Strip the unit type off of value. */
                                    return "";
                                });

                            /* If no unit type was supplied, assign one that is appropriate for this property (e.g. "deg" for rotateZ or "px" for width). */
                            if (!unitType) {
                                unitType = CSS.Values.getUnitType(property);
                            }

                            return [ numericValue, unitType ];
                        }

                        /* Separate startValue. */
                        separatedValue = separateValue(property, startValue);
                        startValue = separatedValue[0];
                        startValueUnitType = separatedValue[1];

                        /* Separate endValue, and extract a value operator (e.g. "+=", "-=") if one exists. */
                        separatedValue = separateValue(property, endValue);
                        endValue = separatedValue[0].replace(/^([+-\/*])=/, function(match, subMatch) {
                            operator = subMatch;

                            /* Strip the operator off of the value. */
                            return "";
                        });
                        endValueUnitType = separatedValue[1];

                        /* Parse float values from endValue and startValue. Default to 0 if NaN is returned. */
                        startValue = parseFloat(startValue) || 0;
                        endValue = parseFloat(endValue) || 0;

                        /***************************************
                           Property-Specific Value Conversion
                        ***************************************/

                        /* Custom support for properties that don't actually accept the % unit type, but where pollyfilling is trivial and relatively foolproof. */
                        if (endValueUnitType === "%") {
                            /* A %-value fontSize/lineHeight is relative to the parent's fontSize (as opposed to the parent's dimensions),
                               which is identical to the em unit's behavior, so we piggyback off of that. */
                            if (/^(fontSize|lineHeight)$/.test(property)) {
                                /* Convert % into an em decimal value. */
                                endValue = endValue / 100;
                                endValueUnitType = "em";
                            /* For scaleX and scaleY, convert the value into its decimal format and strip off the unit type. */
                            } else if (/^scale/.test(property)) {
                                endValue = endValue / 100;
                                endValueUnitType = "";
                            /* For RGB components, take the defined percentage of 255 and strip off the unit type. */
                            } else if (/(Red|Green|Blue)$/i.test(property)) {
                                endValue = (endValue / 100) * 255;
                                endValueUnitType = "";
                            }
                        }

                        /***************************
                           Unit Ratio Calculation
                        ***************************/

                        /* When queried, the browser returns (most) CSS property values in pixels. Therefore, if an endValue with a unit type of
                           %, em, or rem is animated toward, startValue must be converted from pixels into the same unit type as endValue in order
                           for value manipulation logic (increment/decrement) to proceed. Further, if the startValue was forcefed or transferred
                           from a previous call, startValue may also not be in pixels. Unit conversion logic therefore consists of two steps:
                           1) Calculating the ratio of %/em/rem/vh/vw relative to pixels
                           2) Converting startValue into the same unit of measurement as endValue based on these ratios. */
                        /* Unit conversion ratios are calculated by inserting a sibling node next to the target node, copying over its position property,
                           setting values with the target unit type then comparing the returned pixel value. */
                        /* Note: Even if only one of these unit types is being animated, all unit ratios are calculated at once since the overhead
                           of batching the SETs and GETs together upfront outweights the potential overhead
                           of layout thrashing caused by re-querying for uncalculated ratios for subsequently-processed properties. */
                        /* Todo: Shift this logic into the calls' first tick instance so that it's synced with RAF. */
                        function calculateUnitRatios () {

                            /************************
                                Same Ratio Checks
                            ************************/

                            /* The properties below are used to determine whether the element differs sufficiently from this call's
                               previously iterated element to also differ in its unit conversion ratios. If the properties match up with those
                               of the prior element, the prior element's conversion ratios are used. Like most optimizations in Velocity,
                               this is done to minimize DOM querying. */
                            var sameRatioIndicators = {
                                    myParent: element.parentNode || document.body, /* GET */
                                    position: CSS.getPropertyValue(element, "position"), /* GET */
                                    fontSize: CSS.getPropertyValue(element, "fontSize") /* GET */
                                },
                                /* Determine if the same % ratio can be used. % is based on the element's position value and its parent's width and height dimensions. */
                                samePercentRatio = ((sameRatioIndicators.position === callUnitConversionData.lastPosition) && (sameRatioIndicators.myParent === callUnitConversionData.lastParent)),
                                /* Determine if the same em ratio can be used. em is relative to the element's fontSize. */
                                sameEmRatio = (sameRatioIndicators.fontSize === callUnitConversionData.lastFontSize);

                            /* Store these ratio indicators call-wide for the next element to compare against. */
                            callUnitConversionData.lastParent = sameRatioIndicators.myParent;
                            callUnitConversionData.lastPosition = sameRatioIndicators.position;
                            callUnitConversionData.lastFontSize = sameRatioIndicators.fontSize;

                            /***************************
                               Element-Specific Units
                            ***************************/

                            /* Note: IE8 rounds to the nearest pixel when returning CSS values, thus we perform conversions using a measurement
                               of 100 (instead of 1) to give our ratios a precision of at least 2 decimal values. */
                            var measurement = 100,
                                unitRatios = {};

                            if (!sameEmRatio || !samePercentRatio) {
                                var dummy = Data(element).isSVG ? document.createElementNS("http://www.w3.org/2000/svg", "rect") : document.createElement("div");

                                Velocity.init(dummy);
                                sameRatioIndicators.myParent.appendChild(dummy);

                                /* To accurately and consistently calculate conversion ratios, the element's cascaded overflow and box-sizing are stripped.
                                   Similarly, since width/height can be artificially constrained by their min-/max- equivalents, these are controlled for as well. */
                                /* Note: Overflow must be also be controlled for per-axis since the overflow property overwrites its per-axis values. */
                                $.each([ "overflow", "overflowX", "overflowY" ], function(i, property) {
                                    Velocity.CSS.setPropertyValue(dummy, property, "hidden");
                                });
                                Velocity.CSS.setPropertyValue(dummy, "position", sameRatioIndicators.position);
                                Velocity.CSS.setPropertyValue(dummy, "fontSize", sameRatioIndicators.fontSize);
                                Velocity.CSS.setPropertyValue(dummy, "boxSizing", "content-box");

                                /* width and height act as our proxy properties for measuring the horizontal and vertical % ratios. */
                                $.each([ "minWidth", "maxWidth", "width", "minHeight", "maxHeight", "height" ], function(i, property) {
                                    Velocity.CSS.setPropertyValue(dummy, property, measurement + "%");
                                });
                                /* paddingLeft arbitrarily acts as our proxy property for the em ratio. */
                                Velocity.CSS.setPropertyValue(dummy, "paddingLeft", measurement + "em");

                                /* Divide the returned value by the measurement to get the ratio between 1% and 1px. Default to 1 since working with 0 can produce Infinite. */
                                unitRatios.percentToPxWidth = callUnitConversionData.lastPercentToPxWidth = (parseFloat(CSS.getPropertyValue(dummy, "width", null, true)) || 1) / measurement; /* GET */
                                unitRatios.percentToPxHeight = callUnitConversionData.lastPercentToPxHeight = (parseFloat(CSS.getPropertyValue(dummy, "height", null, true)) || 1) / measurement; /* GET */
                                unitRatios.emToPx = callUnitConversionData.lastEmToPx = (parseFloat(CSS.getPropertyValue(dummy, "paddingLeft")) || 1) / measurement; /* GET */

                                sameRatioIndicators.myParent.removeChild(dummy);
                            } else {
                                unitRatios.emToPx = callUnitConversionData.lastEmToPx;
                                unitRatios.percentToPxWidth = callUnitConversionData.lastPercentToPxWidth;
                                unitRatios.percentToPxHeight = callUnitConversionData.lastPercentToPxHeight;
                            }

                            /***************************
                               Element-Agnostic Units
                            ***************************/

                            /* Whereas % and em ratios are determined on a per-element basis, the rem unit only needs to be checked
                               once per call since it's exclusively dependant upon document.body's fontSize. If this is the first time
                               that calculateUnitRatios() is being run during this call, remToPx will still be set to its default value of null,
                               so we calculate it now. */
                            if (callUnitConversionData.remToPx === null) {
                                /* Default to browsers' default fontSize of 16px in the case of 0. */
                                callUnitConversionData.remToPx = parseFloat(CSS.getPropertyValue(document.body, "fontSize")) || 16; /* GET */
                            }

                            /* Similarly, viewport units are %-relative to the window's inner dimensions. */
                            if (callUnitConversionData.vwToPx === null) {
                                callUnitConversionData.vwToPx = parseFloat(window.innerWidth) / 100; /* GET */
                                callUnitConversionData.vhToPx = parseFloat(window.innerHeight) / 100; /* GET */
                            }

                            unitRatios.remToPx = callUnitConversionData.remToPx;
                            unitRatios.vwToPx = callUnitConversionData.vwToPx;
                            unitRatios.vhToPx = callUnitConversionData.vhToPx;

                            if (Velocity.debug >= 1) console.log("Unit ratios: " + JSON.stringify(unitRatios), element);

                            return unitRatios;
                        }

                        /********************
                           Unit Conversion
                        ********************/

                        /* The * and / operators, which are not passed in with an associated unit, inherently use startValue's unit. Skip value and unit conversion. */
                        if (/[\/*]/.test(operator)) {
                            endValueUnitType = startValueUnitType;
                        /* If startValue and endValue differ in unit type, convert startValue into the same unit type as endValue so that if endValueUnitType
                           is a relative unit (%, em, rem), the values set during tweening will continue to be accurately relative even if the metrics they depend
                           on are dynamically changing during the course of the animation. Conversely, if we always normalized into px and used px for setting values, the px ratio
                           would become stale if the original unit being animated toward was relative and the underlying metrics change during the animation. */
                        /* Since 0 is 0 in any unit type, no conversion is necessary when startValue is 0 -- we just start at 0 with endValueUnitType. */
                        } else if ((startValueUnitType !== endValueUnitType) && startValue !== 0) {
                            /* Unit conversion is also skipped when endValue is 0, but *startValueUnitType* must be used for tween values to remain accurate. */
                            /* Note: Skipping unit conversion here means that if endValueUnitType was originally a relative unit, the animation won't relatively
                               match the underlying metrics if they change, but this is acceptable since we're animating toward invisibility instead of toward visibility,
                               which remains past the point of the animation's completion. */
                            if (endValue === 0) {
                                endValueUnitType = startValueUnitType;
                            } else {
                                /* By this point, we cannot avoid unit conversion (it's undesirable since it causes layout thrashing).
                                   If we haven't already, we trigger calculateUnitRatios(), which runs once per element per call. */
                                elementUnitConversionData = elementUnitConversionData || calculateUnitRatios();

                                /* The following RegEx matches CSS properties that have their % values measured relative to the x-axis. */
                                /* Note: W3C spec mandates that all of margin and padding's properties (even top and bottom) are %-relative to the *width* of the parent element. */
                                var axis = (/margin|padding|left|right|width|text|word|letter/i.test(property) || /X$/.test(property) || property === "x") ? "x" : "y";

                                /* In order to avoid generating n^2 bespoke conversion functions, unit conversion is a two-step process:
                                   1) Convert startValue into pixels. 2) Convert this new pixel value into endValue's unit type. */
                                switch (startValueUnitType) {
                                    case "%":
                                        /* Note: translateX and translateY are the only properties that are %-relative to an element's own dimensions -- not its parent's dimensions.
                                           Velocity does not include a special conversion process to account for this behavior. Therefore, animating translateX/Y from a % value
                                           to a non-% value will produce an incorrect start value. Fortunately, this sort of cross-unit conversion is rarely done by users in practice. */
                                        startValue *= (axis === "x" ? elementUnitConversionData.percentToPxWidth : elementUnitConversionData.percentToPxHeight);
                                        break;

                                    case "px":
                                        /* px acts as our midpoint in the unit conversion process; do nothing. */
                                        break;

                                    default:
                                        startValue *= elementUnitConversionData[startValueUnitType + "ToPx"];
                                }

                                /* Invert the px ratios to convert into to the target unit. */
                                switch (endValueUnitType) {
                                    case "%":
                                        startValue *= 1 / (axis === "x" ? elementUnitConversionData.percentToPxWidth : elementUnitConversionData.percentToPxHeight);
                                        break;

                                    case "px":
                                        /* startValue is already in px, do nothing; we're done. */
                                        break;

                                    default:
                                        startValue *= 1 / elementUnitConversionData[endValueUnitType + "ToPx"];
                                }
                            }
                        }

                        /*********************
                           Relative Values
                        *********************/

                        /* Operator logic must be performed last since it requires unit-normalized start and end values. */
                        /* Note: Relative *percent values* do not behave how most people think; while one would expect "+=50%"
                           to increase the property 1.5x its current value, it in fact increases the percent units in absolute terms:
                           50 points is added on top of the current % value. */
                        switch (operator) {
                            case "+":
                                endValue = startValue + endValue;
                                break;

                            case "-":
                                endValue = startValue - endValue;
                                break;

                            case "*":
                                endValue = startValue * endValue;
                                break;

                            case "/":
                                endValue = startValue / endValue;
                                break;
                        }

                        /**************************
                           tweensContainer Push
                        **************************/

                        /* Construct the per-property tween object, and push it to the element's tweensContainer. */
                        tweensContainer[property] = {
                            rootPropertyValue: rootPropertyValue,
                            startValue: startValue,
                            currentValue: startValue,
                            endValue: endValue,
                            unitType: endValueUnitType,
                            easing: easing
                        };

                        if (Velocity.debug) console.log("tweensContainer (" + property + "): " + JSON.stringify(tweensContainer[property]), element);
                    }

                    /* Along with its property data, store a reference to the element itself onto tweensContainer. */
                    tweensContainer.element = element;
                }

                /*****************
                    Call Push
                *****************/

                /* Note: tweensContainer can be empty if all of the properties in this call's property map were skipped due to not
                   being supported by the browser. The element property is used for checking that the tweensContainer has been appended to. */
                if (tweensContainer.element) {
                    /* Apply the "velocity-animating" indicator class. */
                    CSS.Values.addClass(element, "velocity-animating");

                    /* The call array houses the tweensContainers for each element being animated in the current call. */
                    call.push(tweensContainer);

                    /* Store the tweensContainer and options if we're working on the default effects queue, so that they can be used by the reverse command. */
                    if (opts.queue === "") {
                        Data(element).tweensContainer = tweensContainer;
                        Data(element).opts = opts;
                    }

                    /* Switch on the element's animating flag. */
                    Data(element).isAnimating = true;

                    /* Once the final element in this call's element set has been processed, push the call array onto
                       Velocity.State.calls for the animation tick to immediately begin processing. */
                    if (elementsIndex === elementsLength - 1) {
                        /* To speed up iterating over this array, it is compacted (falsey items -- calls that have completed -- are removed)
                           when its length has ballooned to a point that can impact tick performance. This only becomes necessary when animation
                           has been continuous with many elements over a long period of time; whenever all active calls are completed, completeCall() clears Velocity.State.calls. */
                        if (Velocity.State.calls.length > 10000) {
                            Velocity.State.calls = compactSparseArray(Velocity.State.calls);
                        }

                        /* Add the current call plus its associated metadata (the element set and the call's options) onto the global call container.
                           Anything on this call container is subjected to tick() processing. */
                        Velocity.State.calls.push([ call, elements, opts, null, promiseData.resolver ]);

                        /* If the animation tick isn't running, start it. (Velocity shuts it off when there are no active calls to process.) */
                        if (Velocity.State.isTicking === false) {
                            Velocity.State.isTicking = true;

                            /* Start the tick loop. */
                            tick();
                        }
                    } else {
                        elementsIndex++;
                    }
                }
            }

            /* When the queue option is set to false, the call skips the element's queue and fires immediately. */
            if (opts.queue === false) {
                /* Since this buildQueue call doesn't respect the element's existing queue (which is where a delay option would have been appended),
                   we manually inject the delay property here with an explicit setTimeout. */
                if (opts.delay) {
                    setTimeout(buildQueue, opts.delay);
                } else {
                    buildQueue();
                }
            /* Otherwise, the call undergoes element queueing as normal. */
            /* Note: To interoperate with jQuery, Velocity uses jQuery's own $.queue() stack for queuing logic. */
            } else {
                $.queue(element, opts.queue, function(next, clearQueue) {
                    /* If the clearQueue flag was passed in by the stop command, resolve this call's promise. (Promises can only be resolved once,
                       so it's fine if this is repeatedly triggered for each element in the associated call.) */
                    if (clearQueue === true) {
                        if (promiseData.promise) {
                            promiseData.resolver(elements);
                        }

                        /* Do not continue with animation queueing. */
                        return true;
                    }

                    /* This flag indicates to the upcoming completeCall() function that this queue entry was initiated by Velocity.
                       See completeCall() for further details. */
                    Velocity.velocityQueueEntryFlag = true;

                    buildQueue(next);
                });
            }

            /*********************
                Auto-Dequeuing
            *********************/

            /* As per jQuery's $.queue() behavior, to fire the first non-custom-queue entry on an element, the element
               must be dequeued if its queue stack consists *solely* of the current call. (This can be determined by checking
               for the "inprogress" item that jQuery prepends to active queue stack arrays.) Regardless, whenever the element's
               queue is further appended with additional items -- including $.delay()'s or even $.animate() calls, the queue's
               first entry is automatically fired. This behavior contrasts that of custom queues, which never auto-fire. */
            /* Note: When an element set is being subjected to a non-parallel Velocity call, the animation will not begin until
               each one of the elements in the set has reached the end of its individually pre-existing queue chain. */
            /* Note: Unfortunately, most people don't fully grasp jQuery's powerful, yet quirky, $.queue() function.
               Lean more here: http://stackoverflow.com/questions/1058158/can-somebody-explain-jquery-queue-to-me */
            if ((opts.queue === "" || opts.queue === "fx") && $.queue(element)[0] !== "inprogress") {
                $.dequeue(element);
            }
        }

        /**************************
           Element Set Iteration
        **************************/

        /* If the "nodeType" property exists on the elements variable, we're animating a single element.
           Place it in an array so that $.each() can iterate over it. */
        $.each(elements, function(i, element) {
            /* Ensure each element in a set has a nodeType (is a real element) to avoid throwing errors. */
            if (Type.isNode(element)) {
                processElement.call(element);
            }
        });

        /******************
           Option: Loop
        ******************/

        /* The loop option accepts an integer indicating how many times the element should loop between the values in the
           current call's properties map and the element's property values prior to this call. */
        /* Note: The loop option's logic is performed here -- after element processing -- because the current call needs
           to undergo its queue insertion prior to the loop option generating its series of constituent "reverse" calls,
           which chain after the current call. Two reverse calls (two "alternations") constitute one loop. */
        var opts = $.extend({}, Velocity.defaults, options),
            reverseCallsCount;

        opts.loop = parseInt(opts.loop);
        reverseCallsCount = (opts.loop * 2) - 1;

        if (opts.loop) {
            /* Double the loop count to convert it into its appropriate number of "reverse" calls.
               Subtract 1 from the resulting value since the current call is included in the total alternation count. */
            for (var x = 0; x < reverseCallsCount; x++) {
                /* Since the logic for the reverse action occurs inside Queueing and therefore this call's options object
                   isn't parsed until then as well, the current call's delay option must be explicitly passed into the reverse
                   call so that the delay logic that occurs inside *Pre-Queueing* can process it. */
                var reverseOptions = {
                    delay: opts.delay,
                    progress: opts.progress
                };

                /* If a complete callback was passed into this call, transfer it to the loop redirect's final "reverse" call
                   so that it's triggered when the entire redirect is complete (and not when the very first animation is complete). */
                if (x === reverseCallsCount - 1) {
                    reverseOptions.display = opts.display;
                    reverseOptions.visibility = opts.visibility;
                    reverseOptions.complete = opts.complete;
                }

                animate(elements, "reverse", reverseOptions);
            }
        }

        /***************
            Chaining
        ***************/

        /* Return the elements back to the call chain, with wrapped elements taking precedence in case Velocity was called via the $.fn. extension. */
        return getChain();
    };

    /* Turn Velocity into the animation function, extended with the pre-existing Velocity object. */
    Velocity = $.extend(animate, Velocity);
    /* For legacy support, also expose the literal animate method. */
    Velocity.animate = animate;

    /**************
        Timing
    **************/

    /* Ticker function. */
    var ticker = window.requestAnimationFrame || rAFShim;

    /* Inactive browser tabs pause rAF, which results in all active animations immediately sprinting to their completion states when the tab refocuses.
       To get around this, we dynamically switch rAF to setTimeout (which the browser *doesn't* pause) when the tab loses focus. We skip this for mobile
       devices to avoid wasting battery power on inactive tabs. */
    /* Note: Tab focus detection doesn't work on older versions of IE, but that's okay since they don't support rAF to begin with. */
    if (!Velocity.State.isMobile && document.hidden !== undefined) {
        document.addEventListener("visibilitychange", function() {
            /* Reassign the rAF function (which the global tick() function uses) based on the tab's focus state. */
            if (document.hidden) {
                ticker = function(callback) {
                    /* The tick function needs a truthy first argument in order to pass its internal timestamp check. */
                    return setTimeout(function() { callback(true) }, 16);
                };

                /* The rAF loop has been paused by the browser, so we manually restart the tick. */
                tick();
            } else {
                ticker = window.requestAnimationFrame || rAFShim;
            }
        });
    }

    /************
        Tick
    ************/

    /* Note: All calls to Velocity are pushed to the Velocity.State.calls array, which is fully iterated through upon each tick. */
    function tick (timestamp) {
        /* An empty timestamp argument indicates that this is the first tick occurence since ticking was turned on.
           We leverage this metadata to fully ignore the first tick pass since RAF's initial pass is fired whenever
           the browser's next tick sync time occurs, which results in the first elements subjected to Velocity
           calls being animated out of sync with any elements animated immediately thereafter. In short, we ignore
           the first RAF tick pass so that elements being immediately consecutively animated -- instead of simultaneously animated
           by the same Velocity call -- are properly batched into the same initial RAF tick and consequently remain in sync thereafter. */
        if (timestamp) {
            /* We ignore RAF's high resolution timestamp since it can be significantly offset when the browser is
               under high stress; we opt for choppiness over allowing the browser to drop huge chunks of frames. */
            var timeCurrent = (new Date).getTime();

            /********************
               Call Iteration
            ********************/

            /* Iterate through each active call. */
            for (var i = 0, callsLength = Velocity.State.calls.length; i < callsLength; i++) {
                /* When a Velocity call is completed, its Velocity.State.calls entry is set to false. Continue on to the next call. */
                if (!Velocity.State.calls[i]) {
                    continue;
                }

                /************************
                   Call-Wide Variables
                ************************/

                var callContainer = Velocity.State.calls[i],
                    call = callContainer[0],
                    opts = callContainer[2],
                    timeStart = callContainer[3],
                    firstTick = !!timeStart;

                /* If timeStart is undefined, then this is the first time that this call has been processed by tick().
                   We assign timeStart now so that its value is as close to the real animation start time as possible.
                   (Conversely, had timeStart been defined when this call was added to Velocity.State.calls, the delay
                   between that time and now would cause the first few frames of the tween to be skipped since
                   percentComplete is calculated relative to timeStart.) */
                /* Further, subtract 16ms (the approximate resolution of RAF) from the current time value so that the
                   first tick iteration isn't wasted by animating at 0% tween completion, which would produce the
                   same style value as the element's current value. */
                if (!timeStart) {
                    timeStart = Velocity.State.calls[i][3] = timeCurrent - 16;
                }

                /* The tween's completion percentage is relative to the tween's start time, not the tween's start value
                   (which would result in unpredictable tween durations since JavaScript's timers are not particularly accurate).
                   Accordingly, we ensure that percentComplete does not exceed 1. */
                var percentComplete = Math.min((timeCurrent - timeStart) / opts.duration, 1);

                /**********************
                   Element Iteration
                **********************/

                /* For every call, iterate through each of the elements in its set. */
                for (var j = 0, callLength = call.length; j < callLength; j++) {
                    var tweensContainer = call[j],
                        element = tweensContainer.element;

                    /* Check to see if this element has been deleted midway through the animation by checking for the
                       continued existence of its data cache. If it's gone, skip animating this element. */
                    if (!Data(element)) {
                        continue;
                    }

                    var transformPropertyExists = false;

                    /**********************************
                       Display & Visibility Toggling
                    **********************************/

                    /* If the display option is set to non-"none", set it upfront so that the element can become visible before tweening begins.
                       (Otherwise, display's "none" value is set in completeCall() once the animation has completed.) */
                    if (opts.display !== undefined && opts.display !== null && opts.display !== "none") {
                        if (opts.display === "flex") {
                            var flexValues = [ "-webkit-box", "-moz-box", "-ms-flexbox", "-webkit-flex" ];

                            $.each(flexValues, function(i, flexValue) {
                                CSS.setPropertyValue(element, "display", flexValue);
                            });
                        }

                        CSS.setPropertyValue(element, "display", opts.display);
                    }

                    /* Same goes with the visibility option, but its "none" equivalent is "hidden". */
                    if (opts.visibility !== undefined && opts.visibility !== "hidden") {
                        CSS.setPropertyValue(element, "visibility", opts.visibility);
                    }

                    /************************
                       Property Iteration
                    ************************/

                    /* For every element, iterate through each property. */
                    for (var property in tweensContainer) {
                        /* Note: In addition to property tween data, tweensContainer contains a reference to its associated element. */
                        if (property !== "element") {
                            var tween = tweensContainer[property],
                                currentValue,
                                /* Easing can either be a pre-genereated function or a string that references a pre-registered easing
                                   on the Velocity.Easings object. In either case, return the appropriate easing *function*. */
                                easing = Type.isString(tween.easing) ? Velocity.Easings[tween.easing] : tween.easing;

                            /******************************
                               Current Value Calculation
                            ******************************/

                            /* If this is the last tick pass (if we've reached 100% completion for this tween),
                               ensure that currentValue is explicitly set to its target endValue so that it's not subjected to any rounding. */
                            if (percentComplete === 1) {
                                currentValue = tween.endValue;
                            /* Otherwise, calculate currentValue based on the current delta from startValue. */
                            } else {
                                currentValue = tween.startValue + ((tween.endValue - tween.startValue) * easing(percentComplete));

                                /* If no value change is occurring, don't proceed with DOM updating. */
                                if (!firstTick && (currentValue === tween.currentValue)) {
                                    continue;
                                }
                            }

                            tween.currentValue = currentValue;

                            /******************
                               Hooks: Part I
                            ******************/

                            /* For hooked properties, the newly-updated rootPropertyValueCache is cached onto the element so that it can be used
                               for subsequent hooks in this call that are associated with the same root property. If we didn't cache the updated
                               rootPropertyValue, each subsequent update to the root property in this tick pass would reset the previous hook's
                               updates to rootPropertyValue prior to injection. A nice performance byproduct of rootPropertyValue caching is that
                               subsequently chained animations using the same hookRoot but a different hook can use this cached rootPropertyValue. */
                            if (CSS.Hooks.registered[property]) {
                                var hookRoot = CSS.Hooks.getRoot(property),
                                    rootPropertyValueCache = Data(element).rootPropertyValueCache[hookRoot];

                                if (rootPropertyValueCache) {
                                    tween.rootPropertyValue = rootPropertyValueCache;
                                }
                            }

                            /*****************
                                DOM Update
                            *****************/

                            /* setPropertyValue() returns an array of the property name and property value post any normalization that may have been performed. */
                            /* Note: To solve an IE<=8 positioning bug, the unit type is dropped when setting a property value of 0. */
                            var adjustedSetData = CSS.setPropertyValue(element, /* SET */
                                                                       property,
                                                                       tween.currentValue + (parseFloat(currentValue) === 0 ? "" : tween.unitType),
                                                                       tween.rootPropertyValue,
                                                                       tween.scrollData);

                            /*******************
                               Hooks: Part II
                            *******************/

                            /* Now that we have the hook's updated rootPropertyValue (the post-processed value provided by adjustedSetData), cache it onto the element. */
                            if (CSS.Hooks.registered[property]) {
                                /* Since adjustedSetData contains normalized data ready for DOM updating, the rootPropertyValue needs to be re-extracted from its normalized form. ?? */
                                if (CSS.Normalizations.registered[hookRoot]) {
                                    Data(element).rootPropertyValueCache[hookRoot] = CSS.Normalizations.registered[hookRoot]("extract", null, adjustedSetData[1]);
                                } else {
                                    Data(element).rootPropertyValueCache[hookRoot] = adjustedSetData[1];
                                }
                            }

                            /***************
                               Transforms
                            ***************/

                            /* Flag whether a transform property is being animated so that flushTransformCache() can be triggered once this tick pass is complete. */
                            if (adjustedSetData[0] === "transform") {
                                transformPropertyExists = true;
                            }
                        }
                    }

                    /****************
                        mobileHA
                    ****************/

                    /* If mobileHA is enabled, set the translate3d transform to null to force hardware acceleration.
                       It's safe to override this property since Velocity doesn't actually support its animation (hooks are used in its place). */
                    if (opts.mobileHA) {
                        /* Don't set the null transform hack if we've already done so. */
                        if (Data(element).transformCache.translate3d === undefined) {
                            /* All entries on the transformCache object are later concatenated into a single transform string via flushTransformCache(). */
                            Data(element).transformCache.translate3d = "(0px, 0px, 0px)";

                            transformPropertyExists = true;
                        }
                    }

                    if (transformPropertyExists) {
                        CSS.flushTransformCache(element);
                    }
                }

                /* The non-"none" display value is only applied to an element once -- when its associated call is first ticked through.
                   Accordingly, it's set to false so that it isn't re-processed by this call in the next tick. */
                if (opts.display !== undefined && opts.display !== "none") {
                    Velocity.State.calls[i][2].display = false;
                }
                if (opts.visibility !== undefined && opts.visibility !== "hidden") {
                    Velocity.State.calls[i][2].visibility = false;
                }


                /* Pass the elements and the timing data (percentComplete, msRemaining, and timeStart) into the progress callback. */
                if (opts.progress) {
                    opts.progress.call(callContainer[1],
                                       callContainer[1],
                                       percentComplete,
                                       Math.max(0, (timeStart + opts.duration) - timeCurrent),
                                       timeStart);
                }

                /* If this call has finished tweening, pass its index to completeCall() to handle call cleanup. */
                if (percentComplete === 1) {
                    completeCall(i);
                }
            }
        }

        /* Note: completeCall() sets the isTicking flag to false when the last call on Velocity.State.calls has completed. */
        if (Velocity.State.isTicking) {
            ticker(tick);
        }
    }

    /**********************
        Call Completion
    **********************/

    /* Note: Unlike tick(), which processes all active calls at once, call completion is handled on a per-call basis. */
    function completeCall (callIndex, isStopped) {
        /* Ensure the call exists. */
        if (!Velocity.State.calls[callIndex]) {
            return false;
        }

        /* Pull the metadata from the call. */
        var call = Velocity.State.calls[callIndex][0],
            elements = Velocity.State.calls[callIndex][1],
            opts = Velocity.State.calls[callIndex][2],
            resolver = Velocity.State.calls[callIndex][4];

        var remainingCallsExist = false;

        /*************************
           Element Finalization
        *************************/

        for (var i = 0, callLength = call.length; i < callLength; i++) {
            var element = call[i].element;

            /* If the user set display to "none" (intending to hide the element), set it now that the animation has completed. */
            /* Note: display:none isn't set when calls are manually stopped (via Velocity("stop"). */
            /* Note: Display gets ignored with "reverse" calls and infinite loops, since this behavior would be undesirable. */
            if (!isStopped && !opts.loop) {
                if (opts.display === "none") {
                    CSS.setPropertyValue(element, "display", opts.display);
                }

                if (opts.visibility === "hidden") {
                    CSS.setPropertyValue(element, "visibility", opts.visibility);
                }
            }

            /* If the element's queue is empty (if only the "inprogress" item is left at position 0) or if its queue is about to run
               a non-Velocity-initiated entry, turn off the isAnimating flag. A non-Velocity-initiatied queue entry's logic might alter
               an element's CSS values and thereby cause Velocity's cached value data to go stale. To detect if a queue entry was initiated by Velocity,
               we check for the existence of our special Velocity.queueEntryFlag declaration, which minifiers won't rename since the flag
               is assigned to jQuery's global $ object and thus exists out of Velocity's own scope. */
            if (opts.loop !== true && ($.queue(element)[1] === undefined || !/\.velocityQueueEntryFlag/i.test($.queue(element)[1]))) {
                /* The element may have been deleted. Ensure that its data cache still exists before acting on it. */
                if (Data(element)) {
                    Data(element).isAnimating = false;
                    /* Clear the element's rootPropertyValueCache, which will become stale. */
                    Data(element).rootPropertyValueCache = {};

                    var transformHAPropertyExists = false;
                    /* If any 3D transform subproperty is at its default value (regardless of unit type), remove it. */
                    $.each(CSS.Lists.transforms3D, function(i, transformName) {
                        var defaultValue = /^scale/.test(transformName) ? 1 : 0,
                            currentValue = Data(element).transformCache[transformName];

                        if (Data(element).transformCache[transformName] !== undefined && new RegExp("^\\(" + defaultValue + "[^.]").test(currentValue)) {
                            transformHAPropertyExists = true;

                            delete Data(element).transformCache[transformName];
                        }
                    });

                    /* Mobile devices have hardware acceleration removed at the end of the animation in order to avoid hogging the GPU's memory. */
                    if (opts.mobileHA) {
                        transformHAPropertyExists = true;
                        delete Data(element).transformCache.translate3d;
                    }

                    /* Flush the subproperty removals to the DOM. */
                    if (transformHAPropertyExists) {
                        CSS.flushTransformCache(element);
                    }

                    /* Remove the "velocity-animating" indicator class. */
                    CSS.Values.removeClass(element, "velocity-animating");
                }
            }

            /*********************
               Option: Complete
            *********************/

            /* Complete is fired once per call (not once per element) and is passed the full raw DOM element set as both its context and its first argument. */
            /* Note: Callbacks aren't fired when calls are manually stopped (via Velocity("stop"). */
            if (!isStopped && opts.complete && !opts.loop && (i === callLength - 1)) {
                /* We throw callbacks in a setTimeout so that thrown errors don't halt the execution of Velocity itself. */
                try {
                    opts.complete.call(elements, elements);
                } catch (error) {
                    setTimeout(function() { throw error; }, 1);
                }
            }

            /**********************
               Promise Resolving
            **********************/

            /* Note: Infinite loops don't return promises. */
            if (resolver && opts.loop !== true) {
                resolver(elements);
            }

            /****************************
               Option: Loop (Infinite)
            ****************************/

            if (opts.loop === true && !isStopped) {
                /* If a rotateX/Y/Z property is being animated to 360 deg with loop:true, swap tween start/end values to enable
                   continuous iterative rotation looping. (Otherise, the element would just rotate back and forth.) */
                $.each(Data(element).tweensContainer, function(propertyName, tweenContainer) {
                    if (/^rotate/.test(propertyName) && parseFloat(tweenContainer.endValue) === 360) {
                        tweenContainer.endValue = 0;
                        tweenContainer.startValue = 360;
                    }
                });

                Velocity(element, "reverse", { loop: true, delay: opts.delay });
            }

            /***************
               Dequeueing
            ***************/

            /* Fire the next call in the queue so long as this call's queue wasn't set to false (to trigger a parallel animation),
               which would have already caused the next call to fire. Note: Even if the end of the animation queue has been reached,
               $.dequeue() must still be called in order to completely clear jQuery's animation queue. */
            if (opts.queue !== false) {
                $.dequeue(element, opts.queue);
            }
        }

        /************************
           Calls Array Cleanup
        ************************/

        /* Since this call is complete, set it to false so that the rAF tick skips it. This array is later compacted via compactSparseArray().
          (For performance reasons, the call is set to false instead of being deleted from the array: http://www.html5rocks.com/en/tutorials/speed/v8/) */
        Velocity.State.calls[callIndex] = false;

        /* Iterate through the calls array to determine if this was the final in-progress animation.
           If so, set a flag to end ticking and clear the calls array. */
        for (var j = 0, callsLength = Velocity.State.calls.length; j < callsLength; j++) {
            if (Velocity.State.calls[j] !== false) {
                remainingCallsExist = true;

                break;
            }
        }

        if (remainingCallsExist === false) {
            /* tick() will detect this flag upon its next iteration and subsequently turn itself off. */
            Velocity.State.isTicking = false;

            /* Clear the calls array so that its length is reset. */
            delete Velocity.State.calls;
            Velocity.State.calls = [];
        }
    }

    /******************
        Frameworks
    ******************/

    /* Both jQuery and Zepto allow their $.fn object to be extended to allow wrapped elements to be subjected to plugin calls.
       If either framework is loaded, register a "velocity" extension pointing to Velocity's core animate() method.  Velocity
       also registers itself onto a global container (window.jQuery || window.Zepto || window) so that certain features are
       accessible beyond just a per-element scope. This master object contains an .animate() method, which is later assigned to $.fn
       (if jQuery or Zepto are present). Accordingly, Velocity can both act on wrapped DOM elements and stand alone for targeting raw DOM elements. */
    global.Velocity = Velocity;

    if (global !== window) {
        /* Assign the element function to Velocity's core animate() method. */
        global.fn.velocity = animate;
        /* Assign the object function's defaults to Velocity's global defaults object. */
        global.fn.velocity.defaults = Velocity.defaults;
    }

    /***********************
       Packaged Redirects
    ***********************/

    /* slideUp, slideDown */
    $.each([ "Down", "Up" ], function(i, direction) {
        Velocity.Redirects["slide" + direction] = function (element, options, elementsIndex, elementsSize, elements, promiseData) {
            var opts = $.extend({}, options),
                begin = opts.begin,
                complete = opts.complete,
                computedValues = { height: "", marginTop: "", marginBottom: "", paddingTop: "", paddingBottom: "" },
                inlineValues = {};

            if (opts.display === undefined) {
                /* Show the element before slideDown begins and hide the element after slideUp completes. */
                /* Note: Inline elements cannot have dimensions animated, so they're reverted to inline-block. */
                opts.display = (direction === "Down" ? (Velocity.CSS.Values.getDisplayType(element) === "inline" ? "inline-block" : "block") : "none");
            }

            opts.begin = function() {
                /* If the user passed in a begin callback, fire it now. */
                begin && begin.call(elements, elements);

                /* Cache the elements' original vertical dimensional property values so that we can animate back to them. */
                for (var property in computedValues) {
                    /* Cache all inline values, we reset to upon animation completion. */
                    inlineValues[property] = element.style[property];

                    /* For slideDown, use forcefeeding to animate all vertical properties from 0. For slideUp,
                       use forcefeeding to start from computed values and animate down to 0. */
                    var propertyValue = Velocity.CSS.getPropertyValue(element, property);
                    computedValues[property] = (direction === "Down") ? [ propertyValue, 0 ] : [ 0, propertyValue ];
                }

                /* Force vertical overflow content to clip so that sliding works as expected. */
                inlineValues.overflow = element.style.overflow;
                element.style.overflow = "hidden";
            }

            opts.complete = function() {
                /* Reset element to its pre-slide inline values once its slide animation is complete. */
                for (var property in inlineValues) {
                    element.style[property] = inlineValues[property];
                }

                /* If the user passed in a complete callback, fire it now. */
                complete && complete.call(elements, elements);
                promiseData && promiseData.resolver(elements);
            };

            Velocity(element, computedValues, opts);
        };
    });

    /* fadeIn, fadeOut */
    $.each([ "In", "Out" ], function(i, direction) {
        Velocity.Redirects["fade" + direction] = function (element, options, elementsIndex, elementsSize, elements, promiseData) {
            var opts = $.extend({}, options),
                propertiesMap = { opacity: (direction === "In") ? 1 : 0 },
                originalComplete = opts.complete;

            /* Since redirects are triggered individually for each element in the animated set, avoid repeatedly triggering
               callbacks by firing them only when the final element has been reached. */
            if (elementsIndex !== elementsSize - 1) {
                opts.complete = opts.begin = null;
            } else {
                opts.complete = function() {
                    if (originalComplete) {
                        originalComplete.call(elements, elements);
                    }

                    promiseData && promiseData.resolver(elements);
                }
            }

            /* If a display was passed in, use it. Otherwise, default to "none" for fadeOut or the element-specific default for fadeIn. */
            /* Note: We allow users to pass in "null" to skip display setting altogether. */
            if (opts.display === undefined) {
                opts.display = (direction === "In" ? "auto" : "none");
            }

            Velocity(this, propertiesMap, opts);
        };
    });

    return Velocity;
}((window.jQuery || window.Zepto || window), window, document);
}));

/******************
   Known Issues
******************/

/* The CSS spec mandates that the translateX/Y/Z transforms are %-relative to the element itself -- not its parent.
Velocity, however, doesn't make this distinction. Thus, converting to or from the % unit with these subproperties
will produce an inaccurate conversion value. The same issue exists with the cx/cy attributes of SVG circles and ellipses. */

},{}]},{},["C:\\Users\\MNguyen\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\main.js"])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXEFwcERhdGFcXFJvYW1pbmdcXG5wbVxcbm9kZV9tb2R1bGVzXFx3YXRjaGlmeVxcbm9kZV9tb2R1bGVzXFxicm93c2VyaWZ5XFxub2RlX21vZHVsZXNcXGJyb3dzZXItcGFja1xcX3ByZWx1ZGUuanMiLCIuLlxcLi5cXC4uXFxBcHBEYXRhXFxSb2FtaW5nXFxucG1cXG5vZGVfbW9kdWxlc1xcd2F0Y2hpZnlcXG5vZGVfbW9kdWxlc1xcYnJvd3NlcmlmeVxcbm9kZV9tb2R1bGVzXFxwcm9jZXNzXFxicm93c2VyLmpzIiwiU2NyaXB0c1xcYXBwXFxhcHAuY29udHJvbGxlci5qcyIsIlNjcmlwdHNcXGFwcFxcYXBwLm1vZGVsLmpzIiwiU2NyaXB0c1xcYXBwXFxhcHAucm91dGUuanMiLCJTY3JpcHRzXFxhcHBcXGFwcC5zZXR0aW5ncy5qcyIsIlNjcmlwdHNcXGFwcFxcY29udHJvbGxlcnNcXHRvZG8uY29udHJvbGxlci5qcyIsIlNjcmlwdHNcXGFwcFxcbW9kZWxzXFx0b2RvLm1vZGVsLmpzIiwiU2NyaXB0c1xcYXBwXFxtb2R1bGVzXFxib2R5Lm1vZHVsZS5qcyIsIlNjcmlwdHNcXGFwcFxcbW9kdWxlc1xcY2xlYXJzY3JlZW4ubW9kdWxlLmpzIiwiU2NyaXB0c1xcYXBwXFxtb2R1bGVzXFxsZWZ0bWVudS5tb2R1bGUuanMiLCJTY3JpcHRzXFxhcHBcXG1vZHVsZXNcXHJpZ2h0bWVudS5tb2R1bGUuanMiLCJTY3JpcHRzXFxhcHBcXHZpZXdzXFxhcHAudmlldy5qcyIsIlNjcmlwdHNcXGFwcFxcdmlld3NcXHRvZG8udmlldy5qcyIsIlNjcmlwdHNcXGNvbnRyb2xzLmpzIiwiU2NyaXB0c1xcY29yZS5qcyIsIlNjcmlwdHNcXGpxdWVyeS5ob3RrZXlzLmpzIiwiU2NyaXB0c1xca2VuZG9cXDIwMTQuMy4xMTE5XFxqcXVlcnkubWluLmpzIiwiU2NyaXB0c1xca2VuZG9cXDIwMTQuMy4xMTE5XFxrZW5kby53ZWIubWluLmpzIiwiU2NyaXB0c1xcbGF5b3V0LmpzIiwiU2NyaXB0c1xcbWFpbi5qcyIsIlNjcmlwdHNcXG1hdGVyaWFsLm1pbi5qcyIsIlNjcmlwdHNcXG1pdGhyaWwuanMiLCJTY3JpcHRzXFxyaXBwbGVzLm1pbi5qcyIsIlNjcmlwdHNcXHZlbG9jaXR5LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDejlCQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcblxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG5wcm9jZXNzLm5leHRUaWNrID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2FuU2V0SW1tZWRpYXRlID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCdcbiAgICAmJiB3aW5kb3cuc2V0SW1tZWRpYXRlO1xuICAgIHZhciBjYW5NdXRhdGlvbk9ic2VydmVyID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCdcbiAgICAmJiB3aW5kb3cuTXV0YXRpb25PYnNlcnZlcjtcbiAgICB2YXIgY2FuUG9zdCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgJiYgd2luZG93LnBvc3RNZXNzYWdlICYmIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyXG4gICAgO1xuXG4gICAgaWYgKGNhblNldEltbWVkaWF0ZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHdpbmRvdy5zZXRJbW1lZGlhdGUoZikgfTtcbiAgICB9XG5cbiAgICB2YXIgcXVldWUgPSBbXTtcblxuICAgIGlmIChjYW5NdXRhdGlvbk9ic2VydmVyKSB7XG4gICAgICAgIHZhciBoaWRkZW5EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcXVldWVMaXN0ID0gcXVldWUuc2xpY2UoKTtcbiAgICAgICAgICAgIHF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICBxdWV1ZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUoaGlkZGVuRGl2LCB7IGF0dHJpYnV0ZXM6IHRydWUgfSk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5leHRUaWNrKGZuKSB7XG4gICAgICAgICAgICBpZiAoIXF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGhpZGRlbkRpdi5zZXRBdHRyaWJ1dGUoJ3llcycsICdubycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcXVldWUucHVzaChmbik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKGNhblBvc3QpIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBldi5zb3VyY2U7XG4gICAgICAgICAgICBpZiAoKHNvdXJjZSA9PT0gd2luZG93IHx8IHNvdXJjZSA9PT0gbnVsbCkgJiYgZXYuZGF0YSA9PT0gJ3Byb2Nlc3MtdGljaycpIHtcbiAgICAgICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBpZiAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm4gPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5leHRUaWNrKGZuKSB7XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKGZuKTtcbiAgICAgICAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSgncHJvY2Vzcy10aWNrJywgJyonKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gbmV4dFRpY2soZm4pIHtcbiAgICAgICAgc2V0VGltZW91dChmbiwgMCk7XG4gICAgfTtcbn0pKCk7XG5cbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxuLy8gVE9ETyhzaHR5bG1hbilcbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuIiwiLy9hcHAuY29udHJvbGxlci5qc1xyXG52YXIgYXBwID0gcmVxdWlyZSgnLi9hcHAubW9kZWwuanMnKTtcclxuXHJcbmFwcC5jb250cm9sbGVyID0gZnVuY3Rpb24gKCkge1xyXG59XHJcblxyXG4vL0Jyb3dzZXJpZnkgRGlyZWN0aXZlc1xyXG5tb2R1bGUuZXhwb3J0cyA9IGFwcC5jb250cm9sbGVyIiwiLy9hcHAubW9kZWwuanNcclxudmFyIGFwcCA9IHtcclxufVxyXG5cclxuYXBwLkFwcCA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbn1cclxuXHJcbmFwcC5jb250cm9sbGVyID0gcmVxdWlyZSgnLi9hcHAuY29udHJvbGxlci5qcycpO1xyXG5cclxuYXBwLnZpZXcgPSByZXF1aXJlKCcuL3ZpZXdzL2FwcC52aWV3LmpzJyk7XHJcblxyXG4vL0Jyb3dzZXJpZnkgRGlyZWN0aXZlc1xyXG5tb2R1bGUuZXhwb3J0cyA9IGFwcDsiLCJ2YXIgbSA9IHJlcXVpcmUoJy4uL21pdGhyaWwuanMnKTtcclxudmFyIGFwcCA9IHJlcXVpcmUoJy4vYXBwLm1vZGVsLmpzJyk7XHJcbnZhciBzZXR0aW5ncyA9IHJlcXVpcmUoJy4vYXBwLnNldHRpbmdzLmpzJyk7XHJcbnZhciBib2R5ID0gcmVxdWlyZSgnLi9tb2R1bGVzL2JvZHkubW9kdWxlLmpzJyk7XHJcbnZhciBsZWZ0bWVudSA9IHJlcXVpcmUoJy4vbW9kdWxlcy9sZWZ0bWVudS5tb2R1bGUuanMnKTtcclxudmFyIHJpZ2h0bWVudSA9IHJlcXVpcmUoJy4vbW9kdWxlcy9yaWdodG1lbnUubW9kdWxlLmpzJyk7XHJcbnZhciBjbGVhcnNjcmVlbiA9IHJlcXVpcmUoJy4vbW9kdWxlcy9jbGVhcnNjcmVlbi5tb2R1bGUuanMnKTtcclxudmFyIHRvZG8gPSByZXF1aXJlKCcuL21vZGVscy90b2RvLm1vZGVsLmpzJyk7XHJcblxyXG5tLnJvdXRlLm1vZGUgPSBcImhhc2hcIjtcclxuXHJcbi8vc2V0dXAgcm91dGVzIGZvciBtYWluIGNvbnRlbnQgdG8gc3RhcnQgdy8gdGhlIGAvYCBzeW1ib2xcclxubS5yb3V0ZShzZXR0aW5ncy5yb290Q29udGFpbmVyLCBcIi9cIiwge1xyXG4gICAgXCIvXCI6IGJvZHksXHJcbiAgICBcIi9ob21lXCI6IGFwcCxcclxuICAgIFwiL3Byb2ZpbGVcIjogYXBwLFxyXG4gICAgXCIvdG9kb1wiOiB0b2RvXHJcbn0pO1xyXG5cclxuLy9TZXQgdXAgc2lkZSBtZW51c1xyXG5tLm1vZHVsZShzZXR0aW5ncy5sZWZ0TWVudSwgbGVmdG1lbnUpO1xyXG5tLm1vZHVsZShzZXR0aW5ncy5yaWdodE1lbnUsIHJpZ2h0bWVudSk7XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vYSBzYW1wbGUgbW9kdWxlXHJcbi8vdmFyIGRhc2hib2FyZCA9IHtcclxuLy8gICAgY29udHJvbGxlcjogZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgICAgdGhpcy5pZCA9IG0ucm91dGUucGFyYW0oXCJ1c2VySURcIik7XHJcbi8vICAgIH0sXHJcbi8vICAgIHZpZXc6IGZ1bmN0aW9uIChjb250cm9sbGVyKSB7XHJcbi8vICAgICAgICByZXR1cm4gbShcImRpdlwiLCBjb250cm9sbGVyLmlkKTtcclxuLy8gICAgfVxyXG4vL31cclxuXHJcbi8vdmFyIHByb2ZpbGUgPSB7XHJcbi8vICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uICgpIHtcclxuLy8gICAgICAgIHRoaXMuaWQgPSBtLnJvdXRlLnBhcmFtKFwidXNlcklEXCIpO1xyXG4vLyAgICB9LFxyXG4vLyAgICB2aWV3OiBmdW5jdGlvbiAoY29udHJvbGxlcikge1xyXG4vLyAgICAgICAgcmV0dXJuIG0oXCJkaXZcIik7XHJcbi8vICAgIH1cclxuLy99XHJcblxyXG4vL2RlZmluZSBhIHJvdXRlXHJcbi8vbS5yb3V0ZSgkcm9vdENvbnRhaW5lciwgXCIvcHJvZmlsZS9qb2huZG9lXCIsIHtcclxuLy8gICAgXCIvcHJvZmlsZS86dXNlcklEXCI6IGRhc2hib2FyZFxyXG4vL30pOyIsInZhciBzZXR0aW5ncyA9IHtcclxuICAgIHJvb3RDb250YWluZXI6IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjb250YWluZXJcIilbMF0sXHJcbiAgICBsZWZ0TWVudTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsZWZ0LW1lbnVcIiksXHJcbiAgICByaWdodE1lbnU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmlnaHQtbWVudVwiKVxyXG59O1xyXG4vL0Jyb3dzZXJpZnkgRGlyZWN0aXZlc1xyXG5tb2R1bGUuZXhwb3J0cyA9IHNldHRpbmdzOyIsInZhciBtID0gcmVxdWlyZSgnLi4vLi4vbWl0aHJpbC5qcycpO1xyXG52YXIgdG9kbyA9IHJlcXVpcmUoJy4uL21vZGVscy90b2RvLm1vZGVsLmpzJyk7XHJcblxyXG50b2RvLmNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmxpc3QgPSBuZXcgdG9kby5Ub2RvTGlzdCgpO1xyXG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IG0ucHJvcChcIlwiKTtcclxuXHJcbiAgICB0aGlzLmFkZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5kZXNjcmlwdGlvbigpKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdC5wdXNoKG5ldyB0b2RvLlRvZG8oeyBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbigpIH0pKTtcclxuICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbihcIlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9LmJpbmQodGhpcyk7XHJcbn1cclxuXHJcbi8vQnJvd3NlcmlmeSBEaXJlY3RpdmVzXHJcbm1vZHVsZS5leHBvcnRzID0gdG9kby5jb250cm9sbGVyIiwidmFyIG0gPSByZXF1aXJlKCcuLi8uLi9taXRocmlsLmpzJyk7XHJcbnZhciB0b2RvID0ge31cclxuXHJcbnRvZG8uVG9kbyA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gbS5wcm9wKGRhdGEuZGVzY3JpcHRpb24pO1xyXG4gICAgdGhpcy5kb25lID0gbS5wcm9wKGZhbHNlKTtcclxufVxyXG5cclxudG9kby5Ub2RvTGlzdCA9IEFycmF5O1xyXG5cclxuLy9Ccm93c2VyaWZ5IERpcmVjdGl2ZXNcclxubW9kdWxlLmV4cG9ydHMgPSB0b2RvOyAvLzwtLSBUaGlzIGV4cG9ydCBoYXMgdG8gYmUgYmVmb3JlIHRoZSByZXF1aXJlcyBmb3IgdG9kby5jb250cm9sbGVyLCBiZWNhdXNlIHRvZG8uY29udHJvbGxlciByZWxpZXMgb24gdG9kbyBtb2R1bGUgKGNpcmN1bGFyIGRlcGVuZGVuY3kpXHJcblxyXG50b2RvLmNvbnRyb2xsZXIgPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy90b2RvLmNvbnRyb2xsZXIuanMnKTtcclxuXHJcbnRvZG8udmlldyA9IHJlcXVpcmUoJy4uL3ZpZXdzL3RvZG8udmlldy5qcycpOyIsInZhciBtID0gcmVxdWlyZSgnLi4vLi4vbWl0aHJpbC5qcycpO1xyXG52YXIgYm9keSA9IHt9XHJcblxyXG5ib2R5LkJvZHkgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG59XHJcblxyXG5ib2R5LmNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbn1cclxuXHJcbmJvZHkudmlldyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgW20oXCIubWFpblwiLCBbICAgICAgICAgICAgXHJcblx0XHQgICAgICAgIG0oXCJ1bC50aWxlLWdyaWQuY2xlYXJmaXhbaWQ9J3RpbGUtZ3JpZCddXCIsIFtcclxuXHRcdFx0ICAgICAgICBtKFwibGkudGlsZS5pY29uLWNsaW1hLTJcIiwgW1xyXG5cdFx0XHRcdCAgICAgICAgbShcImgzXCIsIFwiUmVnaXN0ZXJcIiksXHJcblx0XHRcdFx0ICAgICAgICBtKFwiLnRpbGUtb3ZlcmxheVwiLCBbXHJcblx0XHRcdFx0XHQgICAgICAgIG0oXCJzcGFuLnRpbGUtY2xvc2VcIiwgXCJjbG9zZVwiKVxyXG5cdFx0XHRcdCAgICAgICAgXSlcclxuXHRcdFx0ICAgICAgICBdKSxcclxuXHRcdFx0ICAgICAgICBtKFwibGkudGlsZS5pY29uLWNsaW1hLTFcIiwgeyBvbmNsaWNrOiBmdW5jdGlvbiAoKSB7IHdpbmRvdy5sb2NhdGlvbiA9ICcvIy9ob21lJzsgfSB9LCBbXHJcblx0XHRcdFx0ICAgICAgICBtKFwiaDNcIiwgXCJEYXNoYm9hcmRcIiksXHJcblx0XHRcdFx0ICAgICAgICBtKFwiLnRpbGUtb3ZlcmxheVwiLCBbXHJcblx0XHRcdFx0XHQgICAgICAgIG0oXCJzcGFuLnRpbGUtY2xvc2VcIiwgXCJjbG9zZVwiKVxyXG5cdFx0XHRcdCAgICAgICAgXSlcclxuXHRcdFx0ICAgICAgICBdKSxcclxuXHRcdFx0ICAgICAgICBtKFwibGkudGlsZS5pY29uLWNsaW1hLTRcIiwgW1xyXG5cdFx0XHRcdCAgICAgICAgbShcImgzXCIsIFwiQWRtaW5cIiksXHJcblx0XHRcdFx0ICAgICAgICBtKFwiLnRpbGUtb3ZlcmxheVwiLCBbXHJcblx0XHRcdFx0XHQgICAgICAgIG0oXCJzcGFuLnRpbGUtY2xvc2VcIiwgXCJjbG9zZVwiKVxyXG5cdFx0XHRcdCAgICAgICAgXSlcclxuXHRcdFx0ICAgICAgICBdKSxcclxuXHRcdFx0ICAgICAgICBtKFwibGkudGlsZS5pY29uLWNsaW1hLTFcIiwgeyBvbmNsaWNrOiBmdW5jdGlvbiAoKSB7IHdpbmRvdy5sb2NhdGlvbiA9ICcvIy90b2RvJzt9IH0sIFtcclxuXHRcdFx0XHQgICAgICAgIG0oXCJoM1wiLCBcInRvZG9cIiksXHJcblx0XHRcdFx0ICAgICAgICBtKFwiLnRpbGUtb3ZlcmxheVwiLCBbXHJcblx0XHRcdFx0XHQgICAgICAgIG0oXCJzcGFuLnRpbGUtY2xvc2VcIiwgXCJjbG9zZVwiKVxyXG5cdFx0XHRcdCAgICAgICAgXSlcclxuXHRcdFx0ICAgICAgICBdKSxcclxuXHRcdFx0ICAgICAgICBtKFwibGkudGlsZS5pY29uLWNsaW1hLTEudGlsZS1zcGFuLTJcIiwgW1xyXG5cdFx0XHRcdCAgICAgICAgbShcImgzXCIpLFxyXG5cdFx0XHRcdCAgICAgICAgbShcInNwYW4udGlsZS10ZW1wXCIpLFxyXG5cdFx0XHRcdCAgICAgICAgbShcIi50aWxlLW92ZXJsYXlcIiwgW1xyXG5cdFx0XHRcdFx0ICAgICAgICBtKFwic3Bhbi50aWxlLWNsb3NlXCIsIFwiY2xvc2VcIilcclxuXHRcdFx0XHQgICAgICAgIF0pXHJcblx0XHRcdCAgICAgICAgXSksXHJcblx0XHRcdCAgICAgICAgbShcImxpLnRpbGUuaWNvbi1jbGltYS0xXCIsIFtcclxuXHRcdFx0XHQgICAgICAgIG0oXCJoM1wiKSxcclxuXHRcdFx0XHQgICAgICAgIG0oXCJzcGFuLnRpbGUtdGVtcFwiKSxcclxuXHRcdFx0XHQgICAgICAgIG0oXCIudGlsZS1vdmVybGF5XCIsIFtcclxuXHRcdFx0XHRcdCAgICAgICAgbShcInNwYW4udGlsZS1jbG9zZVwiLCBcImNsb3NlXCIpXHJcblx0XHRcdFx0ICAgICAgICBdKVxyXG5cdFx0XHQgICAgICAgIF0pLFxyXG5cdFx0XHQgICAgICAgIG0oXCJsaS50aWxlLmljb24tY2xpbWEtMlwiLCBbXHJcblx0XHRcdFx0ICAgICAgICBtKFwiaDNcIiksXHJcblx0XHRcdFx0ICAgICAgICBtKFwic3Bhbi50aWxlLXRlbXBcIiksXHJcblx0XHRcdFx0ICAgICAgICBtKFwiLnRpbGUtb3ZlcmxheVwiLCBbXHJcblx0XHRcdFx0XHQgICAgICAgIG0oXCJzcGFuLnRpbGUtY2xvc2VcIiwgXCJjbG9zZVwiKVxyXG5cdFx0XHRcdCAgICAgICAgXSlcclxuXHRcdFx0ICAgICAgICBdKSxcclxuXHRcdFx0ICAgICAgICBtKFwibGkudGlsZS5pY29uLWNsaW1hLTExXCIsIFtcclxuXHRcdFx0XHQgICAgICAgIG0oXCJoM1wiKSxcclxuXHRcdFx0XHQgICAgICAgIG0oXCJzcGFuLnRpbGUtdGVtcFwiKSxcclxuXHRcdFx0XHQgICAgICAgIG0oXCIudGlsZS1vdmVybGF5XCIsIFtcclxuXHRcdFx0XHRcdCAgICAgICAgbShcInNwYW4udGlsZS1jbG9zZVwiLCBcImNsb3NlXCIpXHJcblx0XHRcdFx0ICAgICAgICBdKVxyXG5cdFx0XHQgICAgICAgIF0pLFxyXG5cdFx0XHQgICAgICAgIG0oXCJsaS50aWxlLmljb24tY2xpbWEtMlwiLCBbXHJcblx0XHRcdFx0ICAgICAgICBtKFwiaDNcIiksXHJcblx0XHRcdFx0ICAgICAgICBtKFwic3Bhbi50aWxlLXRlbXBcIiksXHJcblx0XHRcdFx0ICAgICAgICBtKFwiLnRpbGUtb3ZlcmxheVwiLCBbXHJcblx0XHRcdFx0XHQgICAgICAgIG0oXCJzcGFuLnRpbGUtY2xvc2VcIiwgXCJjbG9zZVwiKVxyXG5cdFx0XHRcdCAgICAgICAgXSlcclxuXHRcdFx0ICAgICAgICBdKSxcclxuXHRcdFx0ICAgICAgICBtKFwibGkudGlsZS5pY29uLWNsaW1hLTIudGlsZS1zcGFuLTJcIiwgW1xyXG5cdFx0XHRcdCAgICAgICAgbShcImgzXCIpLFxyXG5cdFx0XHRcdCAgICAgICAgbShcInNwYW4udGlsZS10ZW1wXCIpLFxyXG5cdFx0XHRcdCAgICAgICAgbShcIi50aWxlLW92ZXJsYXlcIiwgW1xyXG5cdFx0XHRcdFx0ICAgICAgICBtKFwic3Bhbi50aWxlLWNsb3NlXCIsIFwiY2xvc2VcIilcclxuXHRcdFx0XHQgICAgICAgIF0pXHJcblx0XHRcdCAgICAgICAgXSksXHJcblx0XHRcdCAgICAgICAgbShcImxpLnRpbGUuaWNvbi1jbGltYS00LnRpbGUtc3Bhbi00XCIsIFtcclxuXHRcdFx0XHQgICAgICAgIG0oXCJoM1wiKSxcclxuXHRcdFx0XHQgICAgICAgIG0oXCJzcGFuLnRpbGUtdGVtcFwiKSxcclxuXHRcdFx0XHQgICAgICAgIG0oXCIudGlsZS1vdmVybGF5XCIsIFtcclxuXHRcdFx0XHRcdCAgICAgICAgbShcInNwYW4udGlsZS1jbG9zZVwiLCBcImNsb3NlXCIpXHJcblx0XHRcdFx0ICAgICAgICBdKVxyXG5cdFx0XHQgICAgICAgIF0pXHJcblx0XHQgICAgICAgIF0pXHJcbiAgICAgICAgXSldXHJcbiAgICBdO1xyXG59XHJcblxyXG4vL0Jyb3dzZXJpZnkgRGlyZWN0aXZlc1xyXG5tb2R1bGUuZXhwb3J0cyA9IGJvZHkiLCJ2YXIgY2xlYXJTY3JlZW4gPSB7fVxyXG5jbGVhclNjcmVlbi5jb250cm9sbGVyID0gZnVuY3Rpb24gKCkge1xyXG5cclxufVxyXG5jbGVhclNjcmVlbi52aWV3ID0gZnVuY3Rpb24gKCkgeyB9XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGNsZWFyU2NyZWVuIiwidmFyIG0gPSByZXF1aXJlKCcuLi8uLi9taXRocmlsLmpzJyk7XHJcbnZhciBsZWZ0bWVudSA9IHt9XHJcblxyXG5sZWZ0bWVudS5MZWZ0TWVudSA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbn1cclxuXHJcbmxlZnRtZW51LmNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbn1cclxuXHJcbmxlZnRtZW51LnZpZXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gW1xyXG5cdFx0bShcInVsXCIsIFtcclxuXHRcdFx0bShcImxpXCIsIFtcclxuXHRcdFx0XHRtKFwiYVtocmVmPScjJ11cIiwgW1xyXG5cdFx0XHRcdFx0bShcImkuZmEuZmEtaG9tZS5mYS0yeFwiKSxcclxuXHRcdFx0XHRcdG0oXCJzcGFuLm5hdi10ZXh0XCIsIFwiRGFzaGJvYXJkXCIpXHJcblx0XHRcdFx0XSlcclxuXHRcdFx0XSksXHJcblx0XHRcdG0oXCJsaS5oYXMtc3VibmF2XCIsIFtcclxuXHRcdFx0XHRtKFwiYVtocmVmPScjJ11cIiwgW1xyXG5cdFx0XHRcdFx0bShcImkuZmEuZmEtbGFwdG9wLmZhLTJ4XCIpLFxyXG5cdFx0XHRcdFx0bShcInNwYW4ubmF2LXRleHRcIiwgXCJVSSBDb21wb25lbnRzXCIpXHJcblx0XHRcdFx0XSlcclxuXHRcdFx0XSksXHJcblx0XHRcdG0oXCJsaS5oYXMtc3VibmF2XCIsIFtcclxuXHRcdFx0XHRtKFwiYVtocmVmPScjJ11cIiwgW1xyXG5cdFx0XHRcdFx0bShcImkuZmEuZmEtbGlzdC5mYS0yeFwiKSxcclxuXHRcdFx0XHRcdG0oXCJzcGFuLm5hdi10ZXh0XCIsIFwiRm9ybXNcIilcclxuXHRcdFx0XHRdKVxyXG5cdFx0XHRdKSxcclxuXHRcdFx0bShcImxpLmhhcy1zdWJuYXZcIiwgW1xyXG5cdFx0XHRcdG0oXCJhW2hyZWY9JyMnXVwiLCBbXHJcblx0XHRcdFx0XHRtKFwiaS5mYS5mYS1mb2xkZXItb3Blbi5mYS0yeFwiKSxcclxuXHRcdFx0XHRcdG0oXCJzcGFuLm5hdi10ZXh0XCIsIFwiUGFnZXNcIilcclxuXHRcdFx0XHRdKVxyXG5cdFx0XHRdKSxcclxuXHRcdFx0bShcImxpXCIsIFtcclxuXHRcdFx0XHRtKFwiYVtocmVmPScjJ11cIiwgW1xyXG5cdFx0XHRcdFx0bShcImkuZmEuZmEtYmFyLWNoYXJ0LW8uZmEtMnhcIiksXHJcblx0XHRcdFx0XHRtKFwic3Bhbi5uYXYtdGV4dFwiLCBcIkdyYXBocyBhbmQgU3RhdGlzdGljc1wiKVxyXG5cdFx0XHRcdF0pXHJcblx0XHRcdF0pLFxyXG5cdFx0XHRtKFwibGlcIiwgW1xyXG5cdFx0XHRcdG0oXCJhW2hyZWY9JyMnXVwiLCBbXHJcblx0XHRcdFx0XHRtKFwiaS5mYS5mYS1mb250LmZhLTJ4XCIpLFxyXG5cdFx0XHRcdFx0bShcInNwYW4ubmF2LXRleHRcIiwgXCJUeXBvZ3JhcGh5IGFuZCBJY29uc1wiKVxyXG5cdFx0XHRcdF0pXHJcblx0XHRcdF0pLFxyXG5cdFx0XHRtKFwibGlcIiwgW1xyXG5cdFx0XHRcdG0oXCJhW2hyZWY9JyMnXVwiLCBbXHJcblx0XHRcdFx0XHRtKFwiaS5mYS5mYS10YWJsZS5mYS0yeFwiKSxcclxuXHRcdFx0XHRcdG0oXCJzcGFuLm5hdi10ZXh0XCIsIFwiVGFibGVzXCIpXHJcblx0XHRcdFx0XSlcclxuXHRcdFx0XSksXHJcblx0XHRcdG0oXCJsaVwiLCBbXHJcblx0XHRcdFx0bShcImFbaHJlZj0nIyddXCIsIFtcclxuXHRcdFx0XHRcdG0oXCJpLmZhLmZhLW1hcC1tYXJrZXIuZmEtMnhcIiksXHJcblx0XHRcdFx0XHRtKFwic3Bhbi5uYXYtdGV4dFwiLCBcIk1hcHNcIilcclxuXHRcdFx0XHRdKVxyXG5cdFx0XHRdKSxcclxuXHRcdFx0bShcImxpXCIsIFtcclxuXHRcdFx0XHRtKFwiYVtocmVmPScjJ11cIiwgW1xyXG5cdFx0XHRcdFx0bShcImkuZmEuZmEtaW5mby5mYS0yeFwiKSxcclxuXHRcdFx0XHRcdG0oXCJzcGFuLm5hdi10ZXh0XCIsIFwiRG9jdW1lbnRhdGlvblwiKVxyXG5cdFx0XHRcdF0pXHJcblx0XHRcdF0pXHJcblx0XHRdKSxcclxuXHRcdG0oXCJ1bC5sb2dvdXRcIiwgW1xyXG5cdFx0XHRtKFwibGlcIiwgW1xyXG5cdFx0XHRcdG0oXCJhW2hyZWY9JyMnXVwiLCBbXHJcblx0XHRcdFx0XHRtKFwiaS5mYS5mYS1wb3dlci1vZmYuZmEtMnhcIiksXHJcblx0XHRcdFx0XHRtKFwic3Bhbi5uYXYtdGV4dFwiLCBcIkxvZ291dFwiKVxyXG5cdFx0XHRcdF0pXHJcblx0XHRcdF0pXHJcblx0XHRdKVxyXG4gICAgXTtcclxufVxyXG5cclxuLy9Ccm93c2VyaWZ5IERpcmVjdGl2ZXNcclxubW9kdWxlLmV4cG9ydHMgPSBsZWZ0bWVudSIsInZhciBtID0gcmVxdWlyZSgnLi4vLi4vbWl0aHJpbC5qcycpO1xyXG52YXIgcmlnaHRtZW51ID0ge31cclxuXHJcbnJpZ2h0bWVudS5yaWdodG1lbnUgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG59XHJcblxyXG5yaWdodG1lbnUuY29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcclxufVxyXG5cclxucmlnaHRtZW51LnZpZXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gW1xyXG5cdFx0bShcImgzXCIsIFwiTWVudVwiKSxcclxuXHRcdG0oXCJhW2hyZWY9JyMnXVwiLCBcIlJlZ2lzdGVyXCIpLFxyXG5cdFx0bShcImFbaHJlZj0nIyddXCIsIFwiQWRtaW5pc3RyYXRpb25cIilcclxuICAgIF07XHJcbn1cclxuXHJcbi8vQnJvd3NlcmlmeSBEaXJlY3RpdmVzXHJcbm1vZHVsZS5leHBvcnRzID0gcmlnaHRtZW51IiwiLy9hcHAudmlldy5qc1xyXG52YXIgbSA9IHJlcXVpcmUoJy4uLy4uL21pdGhyaWwuanMnKTtcclxudmFyIGFwcCA9IHJlcXVpcmUoJy4uL2FwcC5tb2RlbC5qcycpO1xyXG52YXIgQ29udHJvbHMgPSByZXF1aXJlKCcuLi8uLi9jb250cm9scy5qcycpO1xyXG5jb250cm9scyA9IG5ldyBDb250cm9scygpO1xyXG5cclxuYXBwLnZpZXcgPSBmdW5jdGlvbiAoY3RybCkge1xyXG4gICAgcmV0dXJuIFtcclxuXHRtKFwiLmp1bWJvdHJvblwiLCBbXHJcblx0XHRtKFwiaDFcIiwgXCJBU1AuTkVUXCIpLFxyXG5cdFx0bShcInAubGVhZFwiLCBcIkFTUC5ORVQgaXMgYSBmcmVlIHdlYiBmcmFtZXdvcmsgZm9yIGJ1aWxkaW5nIGdyZWF0IFdlYiBzaXRlcyBhbmQgV2ViIGFwcGxpY2F0aW9ucyB1c2luZyBIVE1MLCBDU1MsIGFuZCBKYXZhU2NyaXB0LlwiKSxcclxuXHRcdG0oXCJwXCIsIFtcclxuICAgICAgICAgICAgW20oXCJidXR0b24uYnRuLmJ0bi1wcmltYXJ5LmJ0bi1sZ1tpZD0naGl0bWUnXVwiLCB7IG9uY2xpY2sgOiBmdW5jdGlvbiAoKSB7IG5ldyBjb250cm9scy5Qb3B1cERpYWxvZygpLnNob3cobnVsbCwgJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjb250aW51ZT8nLCAnQ29uZmlybWF0aW9uIE5lZWRlZCcsIGZ1bmN0aW9uICgpIHsgYWxlcnQoJ1lvdSBwcmVzc2VkIFllcyBeXicpO30sIGZ1bmN0aW9uICgpIHsgYWxlcnQoJ1lvdSBwcmVzc2VkIE5vIFRUJyk7fSk7fSB9LCBcIkhpdCBNZSFcIiksIFwiXFxuXCIsXHJcbiAgICAgICAgICAgICBtKFwiYnV0dG9uLmJ0bi5idG4tcHJpbWFyeS5idG4tbGdbaWQ9J3llcyddXCIsIHsgb25jbGljazogZnVuY3Rpb24gKCkgeyBjb250cm9scy5zaG93Tm90aWZpY2F0aW9uKCdZRVMhIScsICdKdXN0IGEgVGVzdCcsICdTdWNjZXNzJywgNTAwMCwgMzAsIDMwLCBudWxsKTsgfSB9LCBcIlllc1wiKSwgXCJcXG5cIixcclxuICAgICAgICAgICAgIG0oXCJidXR0b24uYnRuLmJ0bi1wcmltYXJ5LmJ0bi1sZ1tpZD0nbm8nXVwiLCB7IG9uY2xpY2s6IGZ1bmN0aW9uICgpIHsgY29udHJvbHMuc2hvd05vdGlmaWNhdGlvbignTk8hIScsICdKdXN0IGEgVGVzdCcsICdFcnJvcicsIDUwMDAsIGNvbnRyb2xzLm5vdGlmaWNhdGlvblJpZ2h0UG9zLCBjb250cm9scy5ub3RpZmljYXRpb25Ub3BQb3MsIG51bGwpOyB9IH0sIFwiTm9cIiksIFwiXFxuXCIsXHJcbiAgICAgICAgICAgICBtKFwiYnV0dG9uLmJ0bi5idG4tcHJpbWFyeS5idG4tbGdbaWQ9J21heWJlJ11cIiwgeyBvbmNsaWNrOiBmdW5jdGlvbiAoKSB7IGNvbnRyb2xzLnNob3dOb3RpZmljYXRpb24oJ01BWUJFIFNPLi4uJywgJ0p1c3QgYSBUZXN0JywgJ1dhcm5pbmcnLCA1MDAwLCBjb250cm9scy5ub3RpZmljYXRpb25SaWdodFBvcywgY29udHJvbHMubm90aWZpY2F0aW9uVG9wUG9zLCBudWxsKTsgfSB9LCBcIk1heWJlIFNvXCIpXVxyXG5cdFx0XSlcclxuXHRdKSxcclxuXHRtKFwiLnJvd1wiLCBbXHJcblx0XHRtKFwiLmNvbC1tZC00XCIsIFtcclxuXHRcdFx0bShcImgyXCIsIFwiWW91ciBpbmZvcm1hdGlvblwiKSxcclxuXHRcdFx0bShcInBcIiwgXCJUaGlzIHNlY3Rpb24gc2hvd3MgaG93IHlvdSBjYW4gY2FsbCBBU1AuTkVUIFdlYiBBUEkgdG8gZ2V0IHRoZSB1c2VyIGRldGFpbHMuXCIpLFxyXG5cdFx0XHRtKFwicFtkYXRhLWJpbmQ9J3RleHQ6IG15SG9tZXRvd24nXVwiKSxcclxuXHRcdFx0bShcInBcIiwgW20oXCJhLmJ0bi5idG4tZGVmYXVsdFtocmVmPSdodHRwOi8vZ28ubWljcm9zb2Z0LmNvbS9md2xpbmsvP0xpbmtJZD0yNzM3MzInXVwiLCBcIkxlYXJuIG1vcmUgwrtcIildKVxyXG5cdFx0XSksXHJcblx0XHRtKFwiLmNvbC1tZC00XCIsIFtcclxuXHRcdFx0bShcImgyXCIsIFwiR2V0dGluZyBzdGFydGVkXCIpLFxyXG5cdFx0XHRtKFwicFwiLCBcIlxcbiAgICAgICAgICAgICAgICAgICAgQVNQLk5FVCBTaW5nbGUgUGFnZSBBcHBsaWNhdGlvbiAoU1BBKSBoZWxwcyB5b3UgYnVpbGQgYXBwbGljYXRpb25zIHRoYXQgaW5jbHVkZSBzaWduaWZpY2FudCBjbGllbnQtc2lkZSBpbnRlcmFjdGlvbnMgdXNpbmcgSFRNTCwgQ1NTLCBhbmQgSmF2YVNjcmlwdC5cXG4gICAgICAgICAgICAgICAgICAgIEl0J3Mgbm93IGVhc2llciB0aGFuIGV2ZXIgYmVmb3JlIHRvIGdldHRpbmcgc3RhcnRlZCB3cml0aW5nIGhpZ2hseSBpbnRlcmFjdGl2ZSB3ZWIgYXBwbGljYXRpb25zLlxcbiAgICAgICAgICAgICAgICBcIiksXHJcblx0XHRcdG0oXCJwXCIsIFttKFwiYS5idG4uYnRuLWRlZmF1bHRbaHJlZj0naHR0cDovL2dvLm1pY3Jvc29mdC5jb20vZndsaW5rLz9MaW5rSWQ9MjczNzMyJ11cIiwgXCJMZWFybiBtb3JlIMK7XCIpXSlcclxuXHRcdF0pLFxyXG5cdFx0bShcIi5jb2wtbWQtNFwiLCBbXHJcblx0XHRcdG0oXCJoMlwiLCBcIldlYiBIb3N0aW5nXCIpLFxyXG5cdFx0XHRtKFwicFwiLCBcIllvdSBjYW4gZWFzaWx5IGZpbmQgYSB3ZWIgaG9zdGluZyBjb21wYW55IHRoYXQgb2ZmZXJzIHRoZSByaWdodCBtaXggb2YgZmVhdHVyZXMgYW5kIHByaWNlIGZvciB5b3VyIGFwcGxpY2F0aW9ucy5cIiksXHJcblx0XHRcdG0oXCJwXCIsIFttKFwiYS5idG4uYnRuLWRlZmF1bHRbaHJlZj0naHR0cDovL2dvLm1pY3Jvc29mdC5jb20vZndsaW5rLz9MaW5rSWQ9MzAxODY3J11cIiwgXCJMZWFybiBtb3JlIMK7XCIpXSlcclxuXHRcdF0pXHJcblx0XSlcclxuICAgIF07XHJcbn1cclxuXHJcbi8vQnJvd3NlcmlmeSBEaXJlY3RpdmVzXHJcbm1vZHVsZS5leHBvcnRzID0gYXBwLnZpZXciLCIvKipcclxuICogSlNYIHZlcnNpb24gb2YgdGhlIE1pdGhyaWwgR2V0dGluZyBTdGFydGVkIGRvY3VtZW50YXRpb24ncyBUT0RPIGV4YW1wbGUuXHJcbiAqIGh0dHA6Ly9saG9yaWUuZ2l0aHViLmlvL21pdGhyaWwvZ2V0dGluZy1zdGFydGVkLmh0bWxcclxuICogQGpzeCBtXHJcbiAqL1xyXG52YXIgbSA9IHJlcXVpcmUoJy4uLy4uL21pdGhyaWwuanMnKTtcclxudmFyIHRvZG8gPSByZXF1aXJlKCcuLi9tb2RlbHMvdG9kby5tb2RlbC5qcycpO1xyXG5cclxudG9kby52aWV3ID0gZnVuY3Rpb24gKGN0cmwpIHtcclxuICAgIHJldHVybiBtKFwiaHRtbFwiLCBbXHJcbiAgICAgICAgbShcImJvZHlcIiwgW1xyXG4gICAgICAgICAgICBtKFwiaW5wdXRcIiwgIHtvbmNoYW5nZTptLndpdGhBdHRyKCd2YWx1ZScsIGN0cmwuZGVzY3JpcHRpb24pLCB2YWx1ZTogY3RybC5kZXNjcmlwdGlvbigpfSksICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG0oXCJidXR0b25cIiwge29uY2xpY2s6Y3RybC5hZGR9LCBbXCJBZGRcIl0pLFxyXG4gICAgICAgICAgICBtKFwidGFibGVcIiwgWyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY3RybC5saXN0Lm1hcChmdW5jdGlvbiAodGFzaywgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbShcInRyXCIsIFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbShcInRkXCIsIFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0oXCJpbnB1dFwiLCAge3R5cGU6J2NoZWNrYm94Jywgb25jbGljazogbS53aXRoQXR0cignY2hlY2tlZCcsIHRhc2suZG9uZSksIGNoZWNrZWQ6IHRhc2suZG9uZSgpfSkgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgXSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0oXCJ0ZFwiLCB7c3R5bGU6e3RleHREZWNvcmF0aW9uOiB0YXNrLmRvbmUoKSA/ICdsaW5lLXRocm91Z2gnIDogJ25vbmUnfX0sIFt0YXNrLmRlc2NyaXB0aW9uKCldKVxyXG4gICAgICAgICAgICAgICAgICAgIF0pXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBdKVxyXG4gICAgICAgIF0pXHJcbiAgICBdKVxyXG59XHJcbi8vQnJvd3NlcmlmeSBEaXJlY3RpdmVzXHJcbm1vZHVsZS5leHBvcnRzID0gdG9kby52aWV3IiwiLy8qKioqKioqKioqKioqKioqKioqKioqKlxyXG4vLyNyZWdpb24gS2VuZG8gVUkgQ29udHJvbHNcclxuLy8qKioqKioqKioqKioqKioqKioqKioqKlxyXG52YXIgY29udHJvbHMgPSBmdW5jdGlvbigpe1xyXG4gICAgdGhpcy5ub3RpZmljYXRpb25SaWdodFBvcyA9IDMwO1xyXG4gICAgdGhpcy5ub3RpZmljYXRpb25Ub3BQb3MgPSAzMDtcclxuICAgIC8vI3JlZ2lvbiBOb3RpZmljYXRpb24gTWVzc2FnZXNcclxuICAgIHRoaXMuZ2V0RGlhbG9nQ3JpdGljYWxpdHkgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgIGlmIChtZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignc3VjY2VzcycpID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJTdWNjZXNzXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignZXJyb3InKSA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiRXJyb3JcIjtcclxuICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdmYWlsJykgPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIkVycm9yXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiV2FybmluZ1wiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuc2hvd05vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uIChtZXNzYWdlVGV4dCwgdGl0bGVUZXh0LCBtb2RlLCB0aW1lT3V0LCBwb3NSaWdodCwgcG9zVG9wLCBhcHBlbmRUbykge1xyXG4gICAgICAgIHZhciBhcHBlbmRUYXJnZXQgPSBhcHBlbmRUbztcclxuICAgICAgICBpZiAodHlwZW9mIChub3RpZmljYXRpb25IYW5kbGUpID09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9uSGFuZGxlID0gJChcIiNub3RpZmljYXRpb25TcGFuXCIpLmtlbmRvTm90aWZpY2F0aW9uKHtcclxuICAgICAgICAgICAgICAgIFwicG9zaXRpb25cIjogeyBcInJpZ2h0XCI6IHBvc1JpZ2h0LCBcInRvcFwiOiBwb3NUb3AgfSxcclxuICAgICAgICAgICAgICAgIFwiYXV0b0hpZGVBZnRlclwiOiB0aW1lT3V0LFxyXG4gICAgICAgICAgICAgICAgXCJzdGFja2luZ1wiOiBcImRvd25cIixcclxuICAgICAgICAgICAgICAgIFwidGVtcGxhdGVzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IFwidHlwZVwiOiBcImVycm9yXCIsIFwidGVtcGxhdGVJZFwiOiBcImVycm9yVGVtcGxhdGVcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgXCJ0eXBlXCI6IFwid2FybmluZ1wiLCBcInRlbXBsYXRlSWRcIjogXCJ3YXJuaW5nVGVtcGxhdGVcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgXCJ0eXBlXCI6IFwic3VjY2Vzc1wiLCBcInRlbXBsYXRlSWRcIjogXCJzdWNjZXNzVGVtcGxhdGVcIiB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbm90aWZpY2F0aW9uID0gJChcIiNub3RpZmljYXRpb25TcGFuXCIpLmRhdGEoXCJrZW5kb05vdGlmaWNhdGlvblwiKTtcclxuICAgICAgICBub3RpZmljYXRpb24uc2hvdyh7XHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VUZXh0LFxyXG4gICAgICAgICAgICB0aXRsZTogdGl0bGVUZXh0LFxyXG4gICAgICAgIH0sIG1vZGUudG9Mb3dlckNhc2UoKSk7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb24gTm90aWZpY2F0aW9uIE1lc3NhZ2VzXHJcbiAgICAvLyNyZWdpb24gUG9wdXAgRGlhbG9nXHJcbiAgICB0aGlzLlBvcHVwRGlhbG9nID0gZnVuY3Rpb24gKG11dGUpIHtcclxuICAgICAgICB0aGlzLm11dGUgPSBtdXRlO1xyXG5cclxuICAgICAgICB0aGlzLnNob3cgPSBmdW5jdGlvbiAoZSwgbWVzc2FnZVRleHQsIHRpdGxlVGV4dCwgY29uZmlybUNhbGxiYWNrLCBjYW5jZWxDYWxsYmFjaykge1xyXG4gICAgICAgICAgICB2YXIgZGZkID0gbmV3ICQuRGVmZXJyZWQoKTsgLy9Qcm9taXNlIG9iamVjdCB0byBwZXJmb3JtIGFjdGlvbnMgYmFzZWQgb24gdXNlciBpbnB1dCAgICAgICAgXHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5tdXRlID09IGZhbHNlICYmIGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlLnByZXZlbnREZWZhdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZSA9ICQuZXZlbnQuZml4KGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobWVzc2FnZVRleHQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgJChcIiNtb2RhbC1jb25maXJtYXRpb25cIikuaHRtbChcIjxkaXYgY2xhc3M9XFxcImNvbmZpcm1Db250ZW50XFxcIj48cCBjbGFzcz1cXFwibW9kYWwtbWVzc2FnZVxcXCI+XCIgKyBtZXNzYWdlVGV4dCArIFwiPC9wPjxidXR0b24gY2xhc3M9XFxcIm1vZGFsLWNvbmZpcm0gay1idXR0b25cXFwiPlllczwvYnV0dG9uPiZuYnNwOzxidXR0b24gY2xhc3M9XFxcIm1vZGFsLWNhbmNlbCBrLWJ1dHRvblxcXCI+Tm88L2J1dHRvbj48L2Rpdj5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGtlbmRvV2luZG93ID0gJChcIjxkaXYgLz5cIikua2VuZG9XaW5kb3coe1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDQwMCxcclxuICAgICAgICAgICAgICAgIC8vaGVpZ2h0OiAxMjAsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGVUZXh0LFxyXG4gICAgICAgICAgICAgICAgcmVzaXphYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIG1vZGFsOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubXV0ZSA9PSBmYWxzZSB8fCB0aGlzLm11dGUgPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBrZW5kb1dpbmRvdy5kYXRhKFwia2VuZG9XaW5kb3dcIilcclxuICAgICAgICAgICAgICAgICAgICAuY29udGVudCgkKFwiI21vZGFsLWNvbmZpcm1hdGlvblwiKS5odG1sKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNlbnRlcigpLm9wZW4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBrZW5kb1dpbmRvdy5maW5kKFwiLm1vZGFsLWNvbmZpcm0sLm1vZGFsLWNhbmNlbFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoXCJtb2RhbC1jb25maXJtXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRmZC5yZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQuY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maXJtQ2FsbGJhY2sgIT09IHVuZGVmaW5lZCAmJiBjb25maXJtQ2FsbGJhY2sgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1DYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKFwibW9kYWwtY2FuY2VsXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYW5jZWxDYWxsYmFjayAhPT0gdW5kZWZpbmVkICYmIGNhbmNlbENhbGxiYWNrICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbENhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGZkLnJlc29sdmUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBrZW5kb1dpbmRvdy5kYXRhKFwia2VuZG9XaW5kb3dcIikuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1DYWxsYmFjayAhPT0gdW5kZWZpbmVkICYmIGNvbmZpcm1DYWxsYmFjayAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlybUNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkZmQucmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGRmZC5wcm9taXNlKCk7IC8vUmV0dXJucyBhIHByb21pc2VcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb24gUG9wdXAgRGlhbG9nIFNlY3Rpb25cclxufVxyXG5tb2R1bGUuZXhwb3J0cyA9IGNvbnRyb2xzO1xyXG5cclxuLy8qKioqKioqKioqKioqKioqKioqKioqKlxyXG4vLyNlbmRyZWdpb24gXHJcbi8vKioqKioqKioqKioqKioqKioqKioqKioiLCIvLyNyZWdpb24gS2V5Ym9hcmQgU2hvcnRjdXRzXHJcbiAgICBqUXVlcnkoZG9jdW1lbnQpLmJpbmQoJ2tleXByZXNzJywgJ2QnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAkKFwiI0Ryb3Bkb3duXCIpLnRyaWdnZXIoXCJjbGlja1wiKTtcclxuICAgIH0pO1xyXG4gICAgalF1ZXJ5KGRvY3VtZW50KS5iaW5kKCdrZXlwcmVzcycsICdoJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgJChcIiNoaXRtZVwiKS50cmlnZ2VyKFwiY2xpY2tcIik7XHJcbiAgICB9KTtcclxuICAgIGpRdWVyeShkb2N1bWVudCkuYmluZCgna2V5cHJlc3MnLCAneScsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICQoXCIjeWVzXCIpLnRyaWdnZXIoXCJjbGlja1wiKTtcclxuICAgIH0pO1xyXG4gICAgalF1ZXJ5KGRvY3VtZW50KS5iaW5kKCdrZXlwcmVzcycsICduJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgJChcIiNub1wiKS50cmlnZ2VyKFwiY2xpY2tcIik7XHJcbiAgICB9KTtcclxuICAgIGpRdWVyeShkb2N1bWVudCkuYmluZCgna2V5cHJlc3MnLCAnbScsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICQoXCIjbWF5YmVcIikudHJpZ2dlcihcImNsaWNrXCIpO1xyXG4gICAgfSk7XHJcbi8vI2VuZHJlZ2lvbiBLZXlib2FyZCBTaG9ydGN1dHMiLCIvKmpzbGludCBicm93c2VyOiB0cnVlKi9cclxuLypqc2xpbnQganF1ZXJ5OiB0cnVlKi9cclxuXHJcbi8qXHJcbiAqIGpRdWVyeSBIb3RrZXlzIFBsdWdpblxyXG4gKiBDb3B5cmlnaHQgMjAxMCwgSm9obiBSZXNpZ1xyXG4gKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy5cclxuICpcclxuICogQmFzZWQgdXBvbiB0aGUgcGx1Z2luIGJ5IFR6dXJ5IEJhciBZb2NoYXk6XHJcbiAqIGh0dHA6Ly9naXRodWIuY29tL3R6dXJ5YnkvaG90a2V5c1xyXG4gKlxyXG4gKiBPcmlnaW5hbCBpZGVhIGJ5OlxyXG4gKiBCaW5ueSBWIEEsIGh0dHA6Ly93d3cub3BlbmpzLmNvbS9zY3JpcHRzL2V2ZW50cy9rZXlib2FyZF9zaG9ydGN1dHMvXHJcbiAqL1xyXG5cclxuLypcclxuICogT25lIHNtYWxsIGNoYW5nZSBpczogbm93IGtleXMgYXJlIHBhc3NlZCBieSBvYmplY3QgeyBrZXlzOiAnLi4uJyB9XHJcbiAqIE1pZ2h0IGJlIHVzZWZ1bCwgd2hlbiB5b3Ugd2FudCB0byBwYXNzIHNvbWUgb3RoZXIgZGF0YSB0byB5b3VyIGhhbmRsZXJcclxuICovXHJcbnZhciBqUXVlcnkgPSByZXF1aXJlKCcuL2tlbmRvLzIwMTQuMy4xMTE5L2pxdWVyeS5taW4uanMnKTtcclxuKGZ1bmN0aW9uKGpRdWVyeSkge1xyXG5cclxuICBqUXVlcnkuaG90a2V5cyA9IHtcclxuICAgIHZlcnNpb246IFwiMC44XCIsXHJcblxyXG4gICAgc3BlY2lhbEtleXM6IHtcclxuICAgICAgODogXCJiYWNrc3BhY2VcIixcclxuICAgICAgOTogXCJ0YWJcIixcclxuICAgICAgMTA6IFwicmV0dXJuXCIsXHJcbiAgICAgIDEzOiBcInJldHVyblwiLFxyXG4gICAgICAxNjogXCJzaGlmdFwiLFxyXG4gICAgICAxNzogXCJjdHJsXCIsXHJcbiAgICAgIDE4OiBcImFsdFwiLFxyXG4gICAgICAxOTogXCJwYXVzZVwiLFxyXG4gICAgICAyMDogXCJjYXBzbG9ja1wiLFxyXG4gICAgICAyNzogXCJlc2NcIixcclxuICAgICAgMzI6IFwic3BhY2VcIixcclxuICAgICAgMzM6IFwicGFnZXVwXCIsXHJcbiAgICAgIDM0OiBcInBhZ2Vkb3duXCIsXHJcbiAgICAgIDM1OiBcImVuZFwiLFxyXG4gICAgICAzNjogXCJob21lXCIsXHJcbiAgICAgIDM3OiBcImxlZnRcIixcclxuICAgICAgMzg6IFwidXBcIixcclxuICAgICAgMzk6IFwicmlnaHRcIixcclxuICAgICAgNDA6IFwiZG93blwiLFxyXG4gICAgICA0NTogXCJpbnNlcnRcIixcclxuICAgICAgNDY6IFwiZGVsXCIsXHJcbiAgICAgIDU5OiBcIjtcIixcclxuICAgICAgNjE6IFwiPVwiLFxyXG4gICAgICA5NjogXCIwXCIsXHJcbiAgICAgIDk3OiBcIjFcIixcclxuICAgICAgOTg6IFwiMlwiLFxyXG4gICAgICA5OTogXCIzXCIsXHJcbiAgICAgIDEwMDogXCI0XCIsXHJcbiAgICAgIDEwMTogXCI1XCIsXHJcbiAgICAgIDEwMjogXCI2XCIsXHJcbiAgICAgIDEwMzogXCI3XCIsXHJcbiAgICAgIDEwNDogXCI4XCIsXHJcbiAgICAgIDEwNTogXCI5XCIsXHJcbiAgICAgIDEwNjogXCIqXCIsXHJcbiAgICAgIDEwNzogXCIrXCIsXHJcbiAgICAgIDEwOTogXCItXCIsXHJcbiAgICAgIDExMDogXCIuXCIsXHJcbiAgICAgIDExMTogXCIvXCIsXHJcbiAgICAgIDExMjogXCJmMVwiLFxyXG4gICAgICAxMTM6IFwiZjJcIixcclxuICAgICAgMTE0OiBcImYzXCIsXHJcbiAgICAgIDExNTogXCJmNFwiLFxyXG4gICAgICAxMTY6IFwiZjVcIixcclxuICAgICAgMTE3OiBcImY2XCIsXHJcbiAgICAgIDExODogXCJmN1wiLFxyXG4gICAgICAxMTk6IFwiZjhcIixcclxuICAgICAgMTIwOiBcImY5XCIsXHJcbiAgICAgIDEyMTogXCJmMTBcIixcclxuICAgICAgMTIyOiBcImYxMVwiLFxyXG4gICAgICAxMjM6IFwiZjEyXCIsXHJcbiAgICAgIDE0NDogXCJudW1sb2NrXCIsXHJcbiAgICAgIDE0NTogXCJzY3JvbGxcIixcclxuICAgICAgMTczOiBcIi1cIixcclxuICAgICAgMTg2OiBcIjtcIixcclxuICAgICAgMTg3OiBcIj1cIixcclxuICAgICAgMTg4OiBcIixcIixcclxuICAgICAgMTg5OiBcIi1cIixcclxuICAgICAgMTkwOiBcIi5cIixcclxuICAgICAgMTkxOiBcIi9cIixcclxuICAgICAgMTkyOiBcImBcIixcclxuICAgICAgMjE5OiBcIltcIixcclxuICAgICAgMjIwOiBcIlxcXFxcIixcclxuICAgICAgMjIxOiBcIl1cIixcclxuICAgICAgMjIyOiBcIidcIlxyXG4gICAgfSxcclxuXHJcbiAgICBzaGlmdE51bXM6IHtcclxuICAgICAgXCJgXCI6IFwiflwiLFxyXG4gICAgICBcIjFcIjogXCIhXCIsXHJcbiAgICAgIFwiMlwiOiBcIkBcIixcclxuICAgICAgXCIzXCI6IFwiI1wiLFxyXG4gICAgICBcIjRcIjogXCIkXCIsXHJcbiAgICAgIFwiNVwiOiBcIiVcIixcclxuICAgICAgXCI2XCI6IFwiXlwiLFxyXG4gICAgICBcIjdcIjogXCImXCIsXHJcbiAgICAgIFwiOFwiOiBcIipcIixcclxuICAgICAgXCI5XCI6IFwiKFwiLFxyXG4gICAgICBcIjBcIjogXCIpXCIsXHJcbiAgICAgIFwiLVwiOiBcIl9cIixcclxuICAgICAgXCI9XCI6IFwiK1wiLFxyXG4gICAgICBcIjtcIjogXCI6IFwiLFxyXG4gICAgICBcIidcIjogXCJcXFwiXCIsXHJcbiAgICAgIFwiLFwiOiBcIjxcIixcclxuICAgICAgXCIuXCI6IFwiPlwiLFxyXG4gICAgICBcIi9cIjogXCI/XCIsXHJcbiAgICAgIFwiXFxcXFwiOiBcInxcIlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBleGNsdWRlczogYnV0dG9uLCBjaGVja2JveCwgZmlsZSwgaGlkZGVuLCBpbWFnZSwgcGFzc3dvcmQsIHJhZGlvLCByZXNldCwgc2VhcmNoLCBzdWJtaXQsIHVybFxyXG4gICAgdGV4dEFjY2VwdGluZ0lucHV0VHlwZXM6IFtcclxuICAgICAgXCJ0ZXh0XCIsIFwicGFzc3dvcmRcIiwgXCJudW1iZXJcIiwgXCJlbWFpbFwiLCBcInVybFwiLCBcInJhbmdlXCIsIFwiZGF0ZVwiLCBcIm1vbnRoXCIsIFwid2Vla1wiLCBcInRpbWVcIiwgXCJkYXRldGltZVwiLFxyXG4gICAgICBcImRhdGV0aW1lLWxvY2FsXCIsIFwic2VhcmNoXCIsIFwiY29sb3JcIiwgXCJ0ZWxcIl0sXHJcblxyXG4gICAgb3B0aW9uczoge1xyXG4gICAgICBmaWx0ZXJUZXh0SW5wdXRzOiB0cnVlXHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24ga2V5SGFuZGxlcihoYW5kbGVPYmopIHtcclxuICAgIGlmICh0eXBlb2YgaGFuZGxlT2JqLmRhdGEgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgaGFuZGxlT2JqLmRhdGEgPSB7XHJcbiAgICAgICAga2V5czogaGFuZGxlT2JqLmRhdGFcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBPbmx5IGNhcmUgd2hlbiBhIHBvc3NpYmxlIGlucHV0IGhhcyBiZWVuIHNwZWNpZmllZFxyXG4gICAgaWYgKCFoYW5kbGVPYmouZGF0YSB8fCAhaGFuZGxlT2JqLmRhdGEua2V5cyB8fCB0eXBlb2YgaGFuZGxlT2JqLmRhdGEua2V5cyAhPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG9yaWdIYW5kbGVyID0gaGFuZGxlT2JqLmhhbmRsZXIsXHJcbiAgICAgIGtleXMgPSBoYW5kbGVPYmouZGF0YS5rZXlzLnRvTG93ZXJDYXNlKCkuc3BsaXQoXCIgXCIpO1xyXG5cclxuICAgIGhhbmRsZU9iai5oYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgLy8gICAgICBEb24ndCBmaXJlIGluIHRleHQtYWNjZXB0aW5nIGlucHV0cyB0aGF0IHdlIGRpZG4ndCBkaXJlY3RseSBiaW5kIHRvXHJcbiAgICAgIGlmICh0aGlzICE9PSBldmVudC50YXJnZXQgJiYgKC90ZXh0YXJlYXxzZWxlY3QvaS50ZXN0KGV2ZW50LnRhcmdldC5ub2RlTmFtZSkgfHxcclxuICAgICAgICAgIChqUXVlcnkuaG90a2V5cy5vcHRpb25zLmZpbHRlclRleHRJbnB1dHMgJiZcclxuICAgICAgICAgICAgalF1ZXJ5LmluQXJyYXkoZXZlbnQudGFyZ2V0LnR5cGUsIGpRdWVyeS5ob3RrZXlzLnRleHRBY2NlcHRpbmdJbnB1dFR5cGVzKSA+IC0xKSkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBzcGVjaWFsID0gZXZlbnQudHlwZSAhPT0gXCJrZXlwcmVzc1wiICYmIGpRdWVyeS5ob3RrZXlzLnNwZWNpYWxLZXlzW2V2ZW50LndoaWNoXSxcclxuICAgICAgICBjaGFyYWN0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGV2ZW50LndoaWNoKS50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgIG1vZGlmID0gXCJcIixcclxuICAgICAgICBwb3NzaWJsZSA9IHt9O1xyXG5cclxuICAgICAgalF1ZXJ5LmVhY2goW1wiYWx0XCIsIFwiY3RybFwiLCBcInNoaWZ0XCJdLCBmdW5jdGlvbihpbmRleCwgc3BlY2lhbEtleSkge1xyXG5cclxuICAgICAgICBpZiAoZXZlbnRbc3BlY2lhbEtleSArICdLZXknXSAmJiBzcGVjaWFsICE9PSBzcGVjaWFsS2V5KSB7XHJcbiAgICAgICAgICBtb2RpZiArPSBzcGVjaWFsS2V5ICsgJysnO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBtZXRhS2V5IGlzIHRyaWdnZXJlZCBvZmYgY3RybEtleSBlcnJvbm91c2x5XHJcbiAgICAgIGlmIChldmVudC5tZXRhS2V5ICYmICFldmVudC5jdHJsS2V5ICYmIHNwZWNpYWwgIT09IFwibWV0YVwiKSB7XHJcbiAgICAgICAgbW9kaWYgKz0gXCJtZXRhK1wiO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZXZlbnQubWV0YUtleSAmJiBzcGVjaWFsICE9PSBcIm1ldGFcIiAmJiBtb2RpZi5pbmRleE9mKFwiYWx0K2N0cmwrc2hpZnQrXCIpID4gLTEpIHtcclxuICAgICAgICBtb2RpZiA9IG1vZGlmLnJlcGxhY2UoXCJhbHQrY3RybCtzaGlmdCtcIiwgXCJoeXBlcitcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChzcGVjaWFsKSB7XHJcbiAgICAgICAgcG9zc2libGVbbW9kaWYgKyBzcGVjaWFsXSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgcG9zc2libGVbbW9kaWYgKyBjaGFyYWN0ZXJdID0gdHJ1ZTtcclxuICAgICAgICBwb3NzaWJsZVttb2RpZiArIGpRdWVyeS5ob3RrZXlzLnNoaWZ0TnVtc1tjaGFyYWN0ZXJdXSA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vIFwiJFwiIGNhbiBiZSB0cmlnZ2VyZWQgYXMgXCJTaGlmdCs0XCIgb3IgXCJTaGlmdCskXCIgb3IganVzdCBcIiRcIlxyXG4gICAgICAgIGlmIChtb2RpZiA9PT0gXCJzaGlmdCtcIikge1xyXG4gICAgICAgICAgcG9zc2libGVbalF1ZXJ5LmhvdGtleXMuc2hpZnROdW1zW2NoYXJhY3Rlcl1dID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBpZiAocG9zc2libGVba2V5c1tpXV0pIHtcclxuICAgICAgICAgIHJldHVybiBvcmlnSGFuZGxlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGpRdWVyeS5lYWNoKFtcImtleWRvd25cIiwgXCJrZXl1cFwiLCBcImtleXByZXNzXCJdLCBmdW5jdGlvbigpIHtcclxuICAgIGpRdWVyeS5ldmVudC5zcGVjaWFsW3RoaXNdID0ge1xyXG4gICAgICBhZGQ6IGtleUhhbmRsZXJcclxuICAgIH07XHJcbiAgfSk7XHJcblxyXG59KShqUXVlcnkgfHwgdGhpcy5qUXVlcnkgfHwgd2luZG93LmpRdWVyeSk7XHJcbiIsIihmdW5jdGlvbiAoZ2xvYmFsKXtcbjtfX2Jyb3dzZXJpZnlfc2hpbV9yZXF1aXJlX189cmVxdWlyZTsoZnVuY3Rpb24gYnJvd3NlcmlmeVNoaW0obW9kdWxlLCBleHBvcnRzLCByZXF1aXJlLCBkZWZpbmUsIGJyb3dzZXJpZnlfc2hpbV9fZGVmaW5lX19tb2R1bGVfX2V4cG9ydF9fKSB7XG4vKiEgalF1ZXJ5IHYxLjkuMSB8IChjKSAyMDA1LCAyMDEyIGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIHwganF1ZXJ5Lm9yZy9saWNlbnNlXHJcbi8vQCBzb3VyY2VNYXBwaW5nVVJMPWpxdWVyeS5taW4ubWFwXHJcbiovKGZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPXR5cGVvZiB0LG89ZS5kb2N1bWVudCxhPWUubG9jYXRpb24scz1lLmpRdWVyeSx1PWUuJCxsPXt9LGM9W10scD1cIjEuOS4xXCIsZj1jLmNvbmNhdCxkPWMucHVzaCxoPWMuc2xpY2UsZz1jLmluZGV4T2YsbT1sLnRvU3RyaW5nLHk9bC5oYXNPd25Qcm9wZXJ0eSx2PXAudHJpbSxiPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBiLmZuLmluaXQoZSx0LHIpfSx4PS9bKy1dPyg/OlxcZCpcXC58KVxcZCsoPzpbZUVdWystXT9cXGQrfCkvLnNvdXJjZSx3PS9cXFMrL2csVD0vXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csTj0vXig/Oig8W1xcd1xcV10rPilbXj5dKnwjKFtcXHctXSopKSQvLEM9L148KFxcdyspXFxzKlxcLz8+KD86PFxcL1xcMT58KSQvLGs9L15bXFxdLDp7fVxcc10qJC8sRT0vKD86Xnw6fCwpKD86XFxzKlxcWykrL2csUz0vXFxcXCg/OltcIlxcXFxcXC9iZm5ydF18dVtcXGRhLWZBLUZdezR9KS9nLEE9L1wiW15cIlxcXFxcXHJcXG5dKlwifHRydWV8ZmFsc2V8bnVsbHwtPyg/OlxcZCtcXC58KVxcZCsoPzpbZUVdWystXT9cXGQrfCkvZyxqPS9eLW1zLS8sRD0vLShbXFxkYS16XSkvZ2ksTD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9LEg9ZnVuY3Rpb24oZSl7KG8uYWRkRXZlbnRMaXN0ZW5lcnx8XCJsb2FkXCI9PT1lLnR5cGV8fFwiY29tcGxldGVcIj09PW8ucmVhZHlTdGF0ZSkmJihxKCksYi5yZWFkeSgpKX0scT1mdW5jdGlvbigpe28uYWRkRXZlbnRMaXN0ZW5lcj8oby5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLEgsITEpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIixILCExKSk6KG8uZGV0YWNoRXZlbnQoXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIixIKSxlLmRldGFjaEV2ZW50KFwib25sb2FkXCIsSCkpfTtiLmZuPWIucHJvdG90eXBlPXtqcXVlcnk6cCxjb25zdHJ1Y3RvcjpiLGluaXQ6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpLGE7aWYoIWUpcmV0dXJuIHRoaXM7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpe2lmKGk9XCI8XCI9PT1lLmNoYXJBdCgwKSYmXCI+XCI9PT1lLmNoYXJBdChlLmxlbmd0aC0xKSYmZS5sZW5ndGg+PTM/W251bGwsZSxudWxsXTpOLmV4ZWMoZSksIWl8fCFpWzFdJiZuKXJldHVybiFufHxuLmpxdWVyeT8obnx8cikuZmluZChlKTp0aGlzLmNvbnN0cnVjdG9yKG4pLmZpbmQoZSk7aWYoaVsxXSl7aWYobj1uIGluc3RhbmNlb2YgYj9uWzBdOm4sYi5tZXJnZSh0aGlzLGIucGFyc2VIVE1MKGlbMV0sbiYmbi5ub2RlVHlwZT9uLm93bmVyRG9jdW1lbnR8fG46bywhMCkpLEMudGVzdChpWzFdKSYmYi5pc1BsYWluT2JqZWN0KG4pKWZvcihpIGluIG4pYi5pc0Z1bmN0aW9uKHRoaXNbaV0pP3RoaXNbaV0obltpXSk6dGhpcy5hdHRyKGksbltpXSk7cmV0dXJuIHRoaXN9aWYoYT1vLmdldEVsZW1lbnRCeUlkKGlbMl0pLGEmJmEucGFyZW50Tm9kZSl7aWYoYS5pZCE9PWlbMl0pcmV0dXJuIHIuZmluZChlKTt0aGlzLmxlbmd0aD0xLHRoaXNbMF09YX1yZXR1cm4gdGhpcy5jb250ZXh0PW8sdGhpcy5zZWxlY3Rvcj1lLHRoaXN9cmV0dXJuIGUubm9kZVR5cGU/KHRoaXMuY29udGV4dD10aGlzWzBdPWUsdGhpcy5sZW5ndGg9MSx0aGlzKTpiLmlzRnVuY3Rpb24oZSk/ci5yZWFkeShlKTooZS5zZWxlY3RvciE9PXQmJih0aGlzLnNlbGVjdG9yPWUuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWUuY29udGV4dCksYi5tYWtlQXJyYXkoZSx0aGlzKSl9LHNlbGVjdG9yOlwiXCIsbGVuZ3RoOjAsc2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBoLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT90aGlzLnRvQXJyYXkoKTowPmU/dGhpc1t0aGlzLmxlbmd0aCtlXTp0aGlzW2VdfSxwdXNoU3RhY2s6ZnVuY3Rpb24oZSl7dmFyIHQ9Yi5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksZSk7cmV0dXJuIHQucHJldk9iamVjdD10aGlzLHQuY29udGV4dD10aGlzLmNvbnRleHQsdH0sZWFjaDpmdW5jdGlvbihlLHQpe3JldHVybiBiLmVhY2godGhpcyxlLHQpfSxyZWFkeTpmdW5jdGlvbihlKXtyZXR1cm4gYi5yZWFkeS5wcm9taXNlKCkuZG9uZShlKSx0aGlzfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhoLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGVxOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubGVuZ3RoLG49K2UrKDA+ZT90OjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhuPj0wJiZ0Pm4/W3RoaXNbbl1dOltdKX0sbWFwOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhiLm1hcCh0aGlzLGZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuY2FsbCh0LG4sdCl9KSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IobnVsbCl9LHB1c2g6ZCxzb3J0OltdLnNvcnQsc3BsaWNlOltdLnNwbGljZX0sYi5mbi5pbml0LnByb3RvdHlwZT1iLmZuLGIuZXh0ZW5kPWIuZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGUsbixyLGksbyxhLHM9YXJndW1lbnRzWzBdfHx7fSx1PTEsbD1hcmd1bWVudHMubGVuZ3RoLGM9ITE7Zm9yKFwiYm9vbGVhblwiPT10eXBlb2YgcyYmKGM9cyxzPWFyZ3VtZW50c1sxXXx8e30sdT0yKSxcIm9iamVjdFwiPT10eXBlb2Ygc3x8Yi5pc0Z1bmN0aW9uKHMpfHwocz17fSksbD09PXUmJihzPXRoaXMsLS11KTtsPnU7dSsrKWlmKG51bGwhPShvPWFyZ3VtZW50c1t1XSkpZm9yKGkgaW4gbyllPXNbaV0scj1vW2ldLHMhPT1yJiYoYyYmciYmKGIuaXNQbGFpbk9iamVjdChyKXx8KG49Yi5pc0FycmF5KHIpKSk/KG4/KG49ITEsYT1lJiZiLmlzQXJyYXkoZSk/ZTpbXSk6YT1lJiZiLmlzUGxhaW5PYmplY3QoZSk/ZTp7fSxzW2ldPWIuZXh0ZW5kKGMsYSxyKSk6ciE9PXQmJihzW2ldPXIpKTtyZXR1cm4gc30sYi5leHRlbmQoe25vQ29uZmxpY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIGUuJD09PWImJihlLiQ9dSksdCYmZS5qUXVlcnk9PT1iJiYoZS5qUXVlcnk9cyksYn0saXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oZSl7ZT9iLnJlYWR5V2FpdCsrOmIucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihlKXtpZihlPT09ITA/IS0tYi5yZWFkeVdhaXQ6IWIuaXNSZWFkeSl7aWYoIW8uYm9keSlyZXR1cm4gc2V0VGltZW91dChiLnJlYWR5KTtiLmlzUmVhZHk9ITAsZSE9PSEwJiYtLWIucmVhZHlXYWl0PjB8fChuLnJlc29sdmVXaXRoKG8sW2JdKSxiLmZuLnRyaWdnZXImJmIobykudHJpZ2dlcihcInJlYWR5XCIpLm9mZihcInJlYWR5XCIpKX19LGlzRnVuY3Rpb246ZnVuY3Rpb24oZSl7cmV0dXJuXCJmdW5jdGlvblwiPT09Yi50eXBlKGUpfSxpc0FycmF5OkFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVyblwiYXJyYXlcIj09PWIudHlwZShlKX0saXNXaW5kb3c6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWUmJmU9PWUud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oZSl7cmV0dXJuIWlzTmFOKHBhcnNlRmxvYXQoZSkpJiZpc0Zpbml0ZShlKX0sdHlwZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT9lK1wiXCI6XCJvYmplY3RcIj09dHlwZW9mIGV8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGU/bFttLmNhbGwoZSldfHxcIm9iamVjdFwiOnR5cGVvZiBlfSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGUpe2lmKCFlfHxcIm9iamVjdFwiIT09Yi50eXBlKGUpfHxlLm5vZGVUeXBlfHxiLmlzV2luZG93KGUpKXJldHVybiExO3RyeXtpZihlLmNvbnN0cnVjdG9yJiYheS5jYWxsKGUsXCJjb25zdHJ1Y3RvclwiKSYmIXkuY2FsbChlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSxcImlzUHJvdG90eXBlT2ZcIikpcmV0dXJuITF9Y2F0Y2gobil7cmV0dXJuITF9dmFyIHI7Zm9yKHIgaW4gZSk7cmV0dXJuIHI9PT10fHx5LmNhbGwoZSxyKX0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihlKXt2YXIgdDtmb3IodCBpbiBlKXJldHVybiExO3JldHVybiEwfSxlcnJvcjpmdW5jdGlvbihlKXt0aHJvdyBFcnJvcihlKX0scGFyc2VIVE1MOmZ1bmN0aW9uKGUsdCxuKXtpZighZXx8XCJzdHJpbmdcIiE9dHlwZW9mIGUpcmV0dXJuIG51bGw7XCJib29sZWFuXCI9PXR5cGVvZiB0JiYobj10LHQ9ITEpLHQ9dHx8bzt2YXIgcj1DLmV4ZWMoZSksaT0hbiYmW107cmV0dXJuIHI/W3QuY3JlYXRlRWxlbWVudChyWzFdKV06KHI9Yi5idWlsZEZyYWdtZW50KFtlXSx0LGkpLGkmJmIoaSkucmVtb3ZlKCksYi5tZXJnZShbXSxyLmNoaWxkTm9kZXMpKX0scGFyc2VKU09OOmZ1bmN0aW9uKG4pe3JldHVybiBlLkpTT04mJmUuSlNPTi5wYXJzZT9lLkpTT04ucGFyc2Uobik6bnVsbD09PW4/bjpcInN0cmluZ1wiPT10eXBlb2YgbiYmKG49Yi50cmltKG4pLG4mJmsudGVzdChuLnJlcGxhY2UoUyxcIkBcIikucmVwbGFjZShBLFwiXVwiKS5yZXBsYWNlKEUsXCJcIikpKT9GdW5jdGlvbihcInJldHVybiBcIituKSgpOihiLmVycm9yKFwiSW52YWxpZCBKU09OOiBcIituKSx0KX0scGFyc2VYTUw6ZnVuY3Rpb24obil7dmFyIHIsaTtpZighbnx8XCJzdHJpbmdcIiE9dHlwZW9mIG4pcmV0dXJuIG51bGw7dHJ5e2UuRE9NUGFyc2VyPyhpPW5ldyBET01QYXJzZXIscj1pLnBhcnNlRnJvbVN0cmluZyhuLFwidGV4dC94bWxcIikpOihyPW5ldyBBY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTERPTVwiKSxyLmFzeW5jPVwiZmFsc2VcIixyLmxvYWRYTUwobikpfWNhdGNoKG8pe3I9dH1yZXR1cm4gciYmci5kb2N1bWVudEVsZW1lbnQmJiFyLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGFyc2VyZXJyb3JcIikubGVuZ3RofHxiLmVycm9yKFwiSW52YWxpZCBYTUw6IFwiK24pLHJ9LG5vb3A6ZnVuY3Rpb24oKXt9LGdsb2JhbEV2YWw6ZnVuY3Rpb24odCl7dCYmYi50cmltKHQpJiYoZS5leGVjU2NyaXB0fHxmdW5jdGlvbih0KXtlLmV2YWwuY2FsbChlLHQpfSkodCl9LGNhbWVsQ2FzZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKGosXCJtcy1cIikucmVwbGFjZShELEwpfSxub2RlTmFtZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLm5vZGVOYW1lJiZlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT10LnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9MCxvPWUubGVuZ3RoLGE9TShlKTtpZihuKXtpZihhKXtmb3IoO28+aTtpKyspaWYocj10LmFwcGx5KGVbaV0sbikscj09PSExKWJyZWFrfWVsc2UgZm9yKGkgaW4gZSlpZihyPXQuYXBwbHkoZVtpXSxuKSxyPT09ITEpYnJlYWt9ZWxzZSBpZihhKXtmb3IoO28+aTtpKyspaWYocj10LmNhbGwoZVtpXSxpLGVbaV0pLHI9PT0hMSlicmVha31lbHNlIGZvcihpIGluIGUpaWYocj10LmNhbGwoZVtpXSxpLGVbaV0pLHI9PT0hMSlicmVhaztyZXR1cm4gZX0sdHJpbTp2JiYhdi5jYWxsKFwiXFx1ZmVmZlxcdTAwYTBcIik/ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/XCJcIjp2LmNhbGwoZSl9OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP1wiXCI6KGUrXCJcIikucmVwbGFjZShULFwiXCIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oZSx0KXt2YXIgbj10fHxbXTtyZXR1cm4gbnVsbCE9ZSYmKE0oT2JqZWN0KGUpKT9iLm1lcmdlKG4sXCJzdHJpbmdcIj09dHlwZW9mIGU/W2VdOmUpOmQuY2FsbChuLGUpKSxufSxpbkFycmF5OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtpZih0KXtpZihnKXJldHVybiBnLmNhbGwodCxlLG4pO2ZvcihyPXQubGVuZ3RoLG49bj8wPm4/TWF0aC5tYXgoMCxyK24pOm46MDtyPm47bisrKWlmKG4gaW4gdCYmdFtuXT09PWUpcmV0dXJuIG59cmV0dXJuLTF9LG1lcmdlOmZ1bmN0aW9uKGUsbil7dmFyIHI9bi5sZW5ndGgsaT1lLmxlbmd0aCxvPTA7aWYoXCJudW1iZXJcIj09dHlwZW9mIHIpZm9yKDtyPm87bysrKWVbaSsrXT1uW29dO2Vsc2Ugd2hpbGUobltvXSE9PXQpZVtpKytdPW5bbysrXTtyZXR1cm4gZS5sZW5ndGg9aSxlfSxncmVwOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPVtdLG89MCxhPWUubGVuZ3RoO2ZvcihuPSEhbjthPm87bysrKXI9ISF0KGVbb10sbyksbiE9PXImJmkucHVzaChlW29dKTtyZXR1cm4gaX0sbWFwOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPTAsbz1lLmxlbmd0aCxhPU0oZSkscz1bXTtpZihhKWZvcig7bz5pO2krKylyPXQoZVtpXSxpLG4pLG51bGwhPXImJihzW3MubGVuZ3RoXT1yKTtlbHNlIGZvcihpIGluIGUpcj10KGVbaV0saSxuKSxudWxsIT1yJiYoc1tzLmxlbmd0aF09cik7cmV0dXJuIGYuYXBwbHkoW10scyl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihlLG4pe3ZhciByLGksbztyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgbiYmKG89ZVtuXSxuPWUsZT1vKSxiLmlzRnVuY3Rpb24oZSk/KHI9aC5jYWxsKGFyZ3VtZW50cywyKSxpPWZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkobnx8dGhpcyxyLmNvbmNhdChoLmNhbGwoYXJndW1lbnRzKSkpfSxpLmd1aWQ9ZS5ndWlkPWUuZ3VpZHx8Yi5ndWlkKyssaSk6dH0sYWNjZXNzOmZ1bmN0aW9uKGUsbixyLGksbyxhLHMpe3ZhciB1PTAsbD1lLmxlbmd0aCxjPW51bGw9PXI7aWYoXCJvYmplY3RcIj09PWIudHlwZShyKSl7bz0hMDtmb3IodSBpbiByKWIuYWNjZXNzKGUsbix1LHJbdV0sITAsYSxzKX1lbHNlIGlmKGkhPT10JiYobz0hMCxiLmlzRnVuY3Rpb24oaSl8fChzPSEwKSxjJiYocz8obi5jYWxsKGUsaSksbj1udWxsKTooYz1uLG49ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBjLmNhbGwoYihlKSxuKX0pKSxuKSlmb3IoO2w+dTt1KyspbihlW3VdLHIscz9pOmkuY2FsbChlW3VdLHUsbihlW3VdLHIpKSk7cmV0dXJuIG8/ZTpjP24uY2FsbChlKTpsP24oZVswXSxyKTphfSxub3c6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX19KSxiLnJlYWR5LnByb21pc2U9ZnVuY3Rpb24odCl7aWYoIW4paWYobj1iLkRlZmVycmVkKCksXCJjb21wbGV0ZVwiPT09by5yZWFkeVN0YXRlKXNldFRpbWVvdXQoYi5yZWFkeSk7ZWxzZSBpZihvLmFkZEV2ZW50TGlzdGVuZXIpby5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLEgsITEpLGUuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixILCExKTtlbHNle28uYXR0YWNoRXZlbnQoXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIixIKSxlLmF0dGFjaEV2ZW50KFwib25sb2FkXCIsSCk7dmFyIHI9ITE7dHJ5e3I9bnVsbD09ZS5mcmFtZUVsZW1lbnQmJm8uZG9jdW1lbnRFbGVtZW50fWNhdGNoKGkpe31yJiZyLmRvU2Nyb2xsJiZmdW5jdGlvbiBhKCl7aWYoIWIuaXNSZWFkeSl7dHJ5e3IuZG9TY3JvbGwoXCJsZWZ0XCIpfWNhdGNoKGUpe3JldHVybiBzZXRUaW1lb3V0KGEsNTApfXEoKSxiLnJlYWR5KCl9fSgpfXJldHVybiBuLnByb21pc2UodCl9LGIuZWFjaChcIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3JcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oZSx0KXtsW1wiW29iamVjdCBcIit0K1wiXVwiXT10LnRvTG93ZXJDYXNlKCl9KTtmdW5jdGlvbiBNKGUpe3ZhciB0PWUubGVuZ3RoLG49Yi50eXBlKGUpO3JldHVybiBiLmlzV2luZG93KGUpPyExOjE9PT1lLm5vZGVUeXBlJiZ0PyEwOlwiYXJyYXlcIj09PW58fFwiZnVuY3Rpb25cIiE9PW4mJigwPT09dHx8XCJudW1iZXJcIj09dHlwZW9mIHQmJnQ+MCYmdC0xIGluIGUpfXI9YihvKTt2YXIgXz17fTtmdW5jdGlvbiBGKGUpe3ZhciB0PV9bZV09e307cmV0dXJuIGIuZWFjaChlLm1hdGNoKHcpfHxbXSxmdW5jdGlvbihlLG4pe3Rbbl09ITB9KSx0fWIuQ2FsbGJhY2tzPWZ1bmN0aW9uKGUpe2U9XCJzdHJpbmdcIj09dHlwZW9mIGU/X1tlXXx8RihlKTpiLmV4dGVuZCh7fSxlKTt2YXIgbixyLGksbyxhLHMsdT1bXSxsPSFlLm9uY2UmJltdLGM9ZnVuY3Rpb24odCl7Zm9yKHI9ZS5tZW1vcnkmJnQsaT0hMCxhPXN8fDAscz0wLG89dS5sZW5ndGgsbj0hMDt1JiZvPmE7YSsrKWlmKHVbYV0uYXBwbHkodFswXSx0WzFdKT09PSExJiZlLnN0b3BPbkZhbHNlKXtyPSExO2JyZWFrfW49ITEsdSYmKGw/bC5sZW5ndGgmJmMobC5zaGlmdCgpKTpyP3U9W106cC5kaXNhYmxlKCkpfSxwPXthZGQ6ZnVuY3Rpb24oKXtpZih1KXt2YXIgdD11Lmxlbmd0aDsoZnVuY3Rpb24gaSh0KXtiLmVhY2godCxmdW5jdGlvbih0LG4pe3ZhciByPWIudHlwZShuKTtcImZ1bmN0aW9uXCI9PT1yP2UudW5pcXVlJiZwLmhhcyhuKXx8dS5wdXNoKG4pOm4mJm4ubGVuZ3RoJiZcInN0cmluZ1wiIT09ciYmaShuKX0pfSkoYXJndW1lbnRzKSxuP289dS5sZW5ndGg6ciYmKHM9dCxjKHIpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIHUmJmIuZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oZSx0KXt2YXIgcjt3aGlsZSgocj1iLmluQXJyYXkodCx1LHIpKT4tMSl1LnNwbGljZShyLDEpLG4mJihvPj1yJiZvLS0sYT49ciYmYS0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihlKXtyZXR1cm4gZT9iLmluQXJyYXkoZSx1KT4tMTohKCF1fHwhdS5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiB1PVtdLHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdT1sPXI9dCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiF1fSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGw9dCxyfHxwLmRpc2FibGUoKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hbH0sZmlyZVdpdGg6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD10fHxbXSx0PVtlLHQuc2xpY2U/dC5zbGljZSgpOnRdLCF1fHxpJiYhbHx8KG4/bC5wdXNoKHQpOmModCkpLHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXtyZXR1cm4gcC5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyksdGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWl9fTtyZXR1cm4gcH0sYi5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGUpe3ZhciB0PVtbXCJyZXNvbHZlXCIsXCJkb25lXCIsYi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxcInJlc29sdmVkXCJdLFtcInJlamVjdFwiLFwiZmFpbFwiLGIuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXCJyZWplY3RlZFwiXSxbXCJub3RpZnlcIixcInByb2dyZXNzXCIsYi5DYWxsYmFja3MoXCJtZW1vcnlcIildXSxuPVwicGVuZGluZ1wiLHI9e3N0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIG59LGFsd2F5czpmdW5jdGlvbigpe3JldHVybiBpLmRvbmUoYXJndW1lbnRzKS5mYWlsKGFyZ3VtZW50cyksdGhpc30sdGhlbjpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cztyZXR1cm4gYi5EZWZlcnJlZChmdW5jdGlvbihuKXtiLmVhY2godCxmdW5jdGlvbih0LG8pe3ZhciBhPW9bMF0scz1iLmlzRnVuY3Rpb24oZVt0XSkmJmVbdF07aVtvWzFdXShmdW5jdGlvbigpe3ZhciBlPXMmJnMuYXBwbHkodGhpcyxhcmd1bWVudHMpO2UmJmIuaXNGdW5jdGlvbihlLnByb21pc2UpP2UucHJvbWlzZSgpLmRvbmUobi5yZXNvbHZlKS5mYWlsKG4ucmVqZWN0KS5wcm9ncmVzcyhuLm5vdGlmeSk6blthK1wiV2l0aFwiXSh0aGlzPT09cj9uLnByb21pc2UoKTp0aGlzLHM/W2VdOmFyZ3VtZW50cyl9KX0pLGU9bnVsbH0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT9iLmV4dGVuZChlLHIpOnJ9fSxpPXt9O3JldHVybiByLnBpcGU9ci50aGVuLGIuZWFjaCh0LGZ1bmN0aW9uKGUsbyl7dmFyIGE9b1syXSxzPW9bM107cltvWzFdXT1hLmFkZCxzJiZhLmFkZChmdW5jdGlvbigpe249c30sdFsxXmVdWzJdLmRpc2FibGUsdFsyXVsyXS5sb2NrKSxpW29bMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIGlbb1swXStcIldpdGhcIl0odGhpcz09PWk/cjp0aGlzLGFyZ3VtZW50cyksdGhpc30saVtvWzBdK1wiV2l0aFwiXT1hLmZpcmVXaXRofSksci5wcm9taXNlKGkpLGUmJmUuY2FsbChpLGkpLGl9LHdoZW46ZnVuY3Rpb24oZSl7dmFyIHQ9MCxuPWguY2FsbChhcmd1bWVudHMpLHI9bi5sZW5ndGgsaT0xIT09cnx8ZSYmYi5pc0Z1bmN0aW9uKGUucHJvbWlzZSk/cjowLG89MT09PWk/ZTpiLkRlZmVycmVkKCksYT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3RbZV09dGhpcyxuW2VdPWFyZ3VtZW50cy5sZW5ndGg+MT9oLmNhbGwoYXJndW1lbnRzKTpyLG49PT1zP28ubm90aWZ5V2l0aCh0LG4pOi0taXx8by5yZXNvbHZlV2l0aCh0LG4pfX0scyx1LGw7aWYocj4xKWZvcihzPUFycmF5KHIpLHU9QXJyYXkociksbD1BcnJheShyKTtyPnQ7dCsrKW5bdF0mJmIuaXNGdW5jdGlvbihuW3RdLnByb21pc2UpP25bdF0ucHJvbWlzZSgpLmRvbmUoYSh0LGwsbikpLmZhaWwoby5yZWplY3QpLnByb2dyZXNzKGEodCx1LHMpKTotLWk7cmV0dXJuIGl8fG8ucmVzb2x2ZVdpdGgobCxuKSxvLnByb21pc2UoKX19KSxiLnN1cHBvcnQ9ZnVuY3Rpb24oKXt2YXIgdCxuLHIsYSxzLHUsbCxjLHAsZixkPW8uY3JlYXRlRWxlbWVudChcImRpdlwiKTtpZihkLnNldEF0dHJpYnV0ZShcImNsYXNzTmFtZVwiLFwidFwiKSxkLmlubmVySFRNTD1cIiAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9Jy9hJz5hPC9hPjxpbnB1dCB0eXBlPSdjaGVja2JveCcvPlwiLG49ZC5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikscj1kLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYVwiKVswXSwhbnx8IXJ8fCFuLmxlbmd0aClyZXR1cm57fTtzPW8uY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKSxsPXMuYXBwZW5kQ2hpbGQoby5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpKSxhPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKVswXSxyLnN0eWxlLmNzc1RleHQ9XCJ0b3A6MXB4O2Zsb2F0OmxlZnQ7b3BhY2l0eTouNVwiLHQ9e2dldFNldEF0dHJpYnV0ZTpcInRcIiE9PWQuY2xhc3NOYW1lLGxlYWRpbmdXaGl0ZXNwYWNlOjM9PT1kLmZpcnN0Q2hpbGQubm9kZVR5cGUsdGJvZHk6IWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0Ym9keVwiKS5sZW5ndGgsaHRtbFNlcmlhbGl6ZTohIWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJsaW5rXCIpLmxlbmd0aCxzdHlsZTovdG9wLy50ZXN0KHIuZ2V0QXR0cmlidXRlKFwic3R5bGVcIikpLGhyZWZOb3JtYWxpemVkOlwiL2FcIj09PXIuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSxvcGFjaXR5Oi9eMC41Ly50ZXN0KHIuc3R5bGUub3BhY2l0eSksY3NzRmxvYXQ6ISFyLnN0eWxlLmNzc0Zsb2F0LGNoZWNrT246ISFhLnZhbHVlLG9wdFNlbGVjdGVkOmwuc2VsZWN0ZWQsZW5jdHlwZTohIW8uY3JlYXRlRWxlbWVudChcImZvcm1cIikuZW5jdHlwZSxodG1sNUNsb25lOlwiPDpuYXY+PC86bmF2PlwiIT09by5jcmVhdGVFbGVtZW50KFwibmF2XCIpLmNsb25lTm9kZSghMCkub3V0ZXJIVE1MLGJveE1vZGVsOlwiQ1NTMUNvbXBhdFwiPT09by5jb21wYXRNb2RlLGRlbGV0ZUV4cGFuZG86ITAsbm9DbG9uZUV2ZW50OiEwLGlubGluZUJsb2NrTmVlZHNMYXlvdXQ6ITEsc2hyaW5rV3JhcEJsb2NrczohMSxyZWxpYWJsZU1hcmdpblJpZ2h0OiEwLGJveFNpemluZ1JlbGlhYmxlOiEwLHBpeGVsUG9zaXRpb246ITF9LGEuY2hlY2tlZD0hMCx0Lm5vQ2xvbmVDaGVja2VkPWEuY2xvbmVOb2RlKCEwKS5jaGVja2VkLHMuZGlzYWJsZWQ9ITAsdC5vcHREaXNhYmxlZD0hbC5kaXNhYmxlZDt0cnl7ZGVsZXRlIGQudGVzdH1jYXRjaChoKXt0LmRlbGV0ZUV4cGFuZG89ITF9YT1vLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxhLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsXCJcIiksdC5pbnB1dD1cIlwiPT09YS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSxhLnZhbHVlPVwidFwiLGEuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwicmFkaW9cIiksdC5yYWRpb1ZhbHVlPVwidFwiPT09YS52YWx1ZSxhLnNldEF0dHJpYnV0ZShcImNoZWNrZWRcIixcInRcIiksYS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJ0XCIpLHU9by5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksdS5hcHBlbmRDaGlsZChhKSx0LmFwcGVuZENoZWNrZWQ9YS5jaGVja2VkLHQuY2hlY2tDbG9uZT11LmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxkLmF0dGFjaEV2ZW50JiYoZC5hdHRhY2hFdmVudChcIm9uY2xpY2tcIixmdW5jdGlvbigpe3Qubm9DbG9uZUV2ZW50PSExfSksZC5jbG9uZU5vZGUoITApLmNsaWNrKCkpO2ZvcihmIGlue3N1Ym1pdDohMCxjaGFuZ2U6ITAsZm9jdXNpbjohMH0pZC5zZXRBdHRyaWJ1dGUoYz1cIm9uXCIrZixcInRcIiksdFtmK1wiQnViYmxlc1wiXT1jIGluIGV8fGQuYXR0cmlidXRlc1tjXS5leHBhbmRvPT09ITE7cmV0dXJuIGQuc3R5bGUuYmFja2dyb3VuZENsaXA9XCJjb250ZW50LWJveFwiLGQuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD1cIlwiLHQuY2xlYXJDbG9uZVN0eWxlPVwiY29udGVudC1ib3hcIj09PWQuc3R5bGUuYmFja2dyb3VuZENsaXAsYihmdW5jdGlvbigpe3ZhciBuLHIsYSxzPVwicGFkZGluZzowO21hcmdpbjowO2JvcmRlcjowO2Rpc3BsYXk6YmxvY2s7Ym94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7LXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O1wiLHU9by5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF07dSYmKG49by5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLG4uc3R5bGUuY3NzVGV4dD1cImJvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDotOTk5OXB4O21hcmdpbi10b3A6MXB4XCIsdS5hcHBlbmRDaGlsZChuKS5hcHBlbmRDaGlsZChkKSxkLmlubmVySFRNTD1cIjx0YWJsZT48dHI+PHRkPjwvdGQ+PHRkPnQ8L3RkPjwvdHI+PC90YWJsZT5cIixhPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0ZFwiKSxhWzBdLnN0eWxlLmNzc1RleHQ9XCJwYWRkaW5nOjA7bWFyZ2luOjA7Ym9yZGVyOjA7ZGlzcGxheTpub25lXCIscD0wPT09YVswXS5vZmZzZXRIZWlnaHQsYVswXS5zdHlsZS5kaXNwbGF5PVwiXCIsYVsxXS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHQucmVsaWFibGVIaWRkZW5PZmZzZXRzPXAmJjA9PT1hWzBdLm9mZnNldEhlaWdodCxkLmlubmVySFRNTD1cIlwiLGQuc3R5bGUuY3NzVGV4dD1cImJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDstd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDtwYWRkaW5nOjFweDtib3JkZXI6MXB4O2Rpc3BsYXk6YmxvY2s7d2lkdGg6NHB4O21hcmdpbi10b3A6MSU7cG9zaXRpb246YWJzb2x1dGU7dG9wOjElO1wiLHQuYm94U2l6aW5nPTQ9PT1kLm9mZnNldFdpZHRoLHQuZG9lc05vdEluY2x1ZGVNYXJnaW5JbkJvZHlPZmZzZXQ9MSE9PXUub2Zmc2V0VG9wLGUuZ2V0Q29tcHV0ZWRTdHlsZSYmKHQucGl4ZWxQb3NpdGlvbj1cIjElXCIhPT0oZS5nZXRDb21wdXRlZFN0eWxlKGQsbnVsbCl8fHt9KS50b3AsdC5ib3hTaXppbmdSZWxpYWJsZT1cIjRweFwiPT09KGUuZ2V0Q29tcHV0ZWRTdHlsZShkLG51bGwpfHx7d2lkdGg6XCI0cHhcIn0pLndpZHRoLHI9ZC5hcHBlbmRDaGlsZChvLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLHIuc3R5bGUuY3NzVGV4dD1kLnN0eWxlLmNzc1RleHQ9cyxyLnN0eWxlLm1hcmdpblJpZ2h0PXIuc3R5bGUud2lkdGg9XCIwXCIsZC5zdHlsZS53aWR0aD1cIjFweFwiLHQucmVsaWFibGVNYXJnaW5SaWdodD0hcGFyc2VGbG9hdCgoZS5nZXRDb21wdXRlZFN0eWxlKHIsbnVsbCl8fHt9KS5tYXJnaW5SaWdodCkpLHR5cGVvZiBkLnN0eWxlLnpvb20hPT1pJiYoZC5pbm5lckhUTUw9XCJcIixkLnN0eWxlLmNzc1RleHQ9cytcIndpZHRoOjFweDtwYWRkaW5nOjFweDtkaXNwbGF5OmlubGluZTt6b29tOjFcIix0LmlubGluZUJsb2NrTmVlZHNMYXlvdXQ9Mz09PWQub2Zmc2V0V2lkdGgsZC5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIixkLmlubmVySFRNTD1cIjxkaXY+PC9kaXY+XCIsZC5maXJzdENoaWxkLnN0eWxlLndpZHRoPVwiNXB4XCIsdC5zaHJpbmtXcmFwQmxvY2tzPTMhPT1kLm9mZnNldFdpZHRoLHQuaW5saW5lQmxvY2tOZWVkc0xheW91dCYmKHUuc3R5bGUuem9vbT0xKSksdS5yZW1vdmVDaGlsZChuKSxuPWQ9YT1yPW51bGwpfSksbj1zPXU9bD1yPWE9bnVsbCx0fSgpO3ZhciBPPS8oPzpcXHtbXFxzXFxTXSpcXH18XFxbW1xcc1xcU10qXFxdKSQvLEI9LyhbQS1aXSkvZztmdW5jdGlvbiBQKGUsbixyLGkpe2lmKGIuYWNjZXB0RGF0YShlKSl7dmFyIG8sYSxzPWIuZXhwYW5kbyx1PVwic3RyaW5nXCI9PXR5cGVvZiBuLGw9ZS5ub2RlVHlwZSxwPWw/Yi5jYWNoZTplLGY9bD9lW3NdOmVbc10mJnM7aWYoZiYmcFtmXSYmKGl8fHBbZl0uZGF0YSl8fCF1fHxyIT09dClyZXR1cm4gZnx8KGw/ZVtzXT1mPWMucG9wKCl8fGIuZ3VpZCsrOmY9cykscFtmXXx8KHBbZl09e30sbHx8KHBbZl0udG9KU09OPWIubm9vcCkpLChcIm9iamVjdFwiPT10eXBlb2Ygbnx8XCJmdW5jdGlvblwiPT10eXBlb2YgbikmJihpP3BbZl09Yi5leHRlbmQocFtmXSxuKTpwW2ZdLmRhdGE9Yi5leHRlbmQocFtmXS5kYXRhLG4pKSxvPXBbZl0saXx8KG8uZGF0YXx8KG8uZGF0YT17fSksbz1vLmRhdGEpLHIhPT10JiYob1tiLmNhbWVsQ2FzZShuKV09ciksdT8oYT1vW25dLG51bGw9PWEmJihhPW9bYi5jYW1lbENhc2UobildKSk6YT1vLGF9fWZ1bmN0aW9uIFIoZSx0LG4pe2lmKGIuYWNjZXB0RGF0YShlKSl7dmFyIHIsaSxvLGE9ZS5ub2RlVHlwZSxzPWE/Yi5jYWNoZTplLHU9YT9lW2IuZXhwYW5kb106Yi5leHBhbmRvO2lmKHNbdV0pe2lmKHQmJihvPW4/c1t1XTpzW3VdLmRhdGEpKXtiLmlzQXJyYXkodCk/dD10LmNvbmNhdChiLm1hcCh0LGIuY2FtZWxDYXNlKSk6dCBpbiBvP3Q9W3RdOih0PWIuY2FtZWxDYXNlKHQpLHQ9dCBpbiBvP1t0XTp0LnNwbGl0KFwiIFwiKSk7Zm9yKHI9MCxpPXQubGVuZ3RoO2k+cjtyKyspZGVsZXRlIG9bdFtyXV07aWYoIShuPyQ6Yi5pc0VtcHR5T2JqZWN0KShvKSlyZXR1cm59KG58fChkZWxldGUgc1t1XS5kYXRhLCQoc1t1XSkpKSYmKGE/Yi5jbGVhbkRhdGEoW2VdLCEwKTpiLnN1cHBvcnQuZGVsZXRlRXhwYW5kb3x8cyE9cy53aW5kb3c/ZGVsZXRlIHNbdV06c1t1XT1udWxsKX19fWIuZXh0ZW5kKHtjYWNoZTp7fSxleHBhbmRvOlwialF1ZXJ5XCIrKHArTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXFxEL2csXCJcIiksbm9EYXRhOntlbWJlZDohMCxvYmplY3Q6XCJjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDBcIixhcHBsZXQ6ITB9LGhhc0RhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZS5ub2RlVHlwZT9iLmNhY2hlW2VbYi5leHBhbmRvXV06ZVtiLmV4cGFuZG9dLCEhZSYmISQoZSl9LGRhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBQKGUsdCxuKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlLHQpe3JldHVybiBSKGUsdCl9LF9kYXRhOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gUChlLHQsbiwhMCl9LF9yZW1vdmVEYXRhOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIFIoZSx0LCEwKX0sYWNjZXB0RGF0YTpmdW5jdGlvbihlKXtpZihlLm5vZGVUeXBlJiYxIT09ZS5ub2RlVHlwZSYmOSE9PWUubm9kZVR5cGUpcmV0dXJuITE7dmFyIHQ9ZS5ub2RlTmFtZSYmYi5ub0RhdGFbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXTtyZXR1cm4hdHx8dCE9PSEwJiZlLmdldEF0dHJpYnV0ZShcImNsYXNzaWRcIik9PT10fX0pLGIuZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGUsbil7dmFyIHIsaSxvPXRoaXNbMF0sYT0wLHM9bnVsbDtpZihlPT09dCl7aWYodGhpcy5sZW5ndGgmJihzPWIuZGF0YShvKSwxPT09by5ub2RlVHlwZSYmIWIuX2RhdGEobyxcInBhcnNlZEF0dHJzXCIpKSl7Zm9yKHI9by5hdHRyaWJ1dGVzO3IubGVuZ3RoPmE7YSsrKWk9clthXS5uYW1lLGkuaW5kZXhPZihcImRhdGEtXCIpfHwoaT1iLmNhbWVsQ2FzZShpLnNsaWNlKDUpKSxXKG8saSxzW2ldKSk7Yi5fZGF0YShvLFwicGFyc2VkQXR0cnNcIiwhMCl9cmV0dXJuIHN9cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGU/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yi5kYXRhKHRoaXMsZSl9KTpiLmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKG4pe3JldHVybiBuPT09dD9vP1cobyxlLGIuZGF0YShvLGUpKTpudWxsOih0aGlzLmVhY2goZnVuY3Rpb24oKXtiLmRhdGEodGhpcyxlLG4pfSksdCl9LG51bGwsbixhcmd1bWVudHMubGVuZ3RoPjEsbnVsbCwhMCl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2IucmVtb3ZlRGF0YSh0aGlzLGUpfSl9fSk7ZnVuY3Rpb24gVyhlLG4scil7aWYocj09PXQmJjE9PT1lLm5vZGVUeXBlKXt2YXIgaT1cImRhdGEtXCIrbi5yZXBsYWNlKEIsXCItJDFcIikudG9Mb3dlckNhc2UoKTtpZihyPWUuZ2V0QXR0cmlidXRlKGkpLFwic3RyaW5nXCI9PXR5cGVvZiByKXt0cnl7cj1cInRydWVcIj09PXI/ITA6XCJmYWxzZVwiPT09cj8hMTpcIm51bGxcIj09PXI/bnVsbDorcitcIlwiPT09cj8rcjpPLnRlc3Qocik/Yi5wYXJzZUpTT04ocik6cn1jYXRjaChvKXt9Yi5kYXRhKGUsbixyKX1lbHNlIHI9dH1yZXR1cm4gcn1mdW5jdGlvbiAkKGUpe3ZhciB0O2Zvcih0IGluIGUpaWYoKFwiZGF0YVwiIT09dHx8IWIuaXNFbXB0eU9iamVjdChlW3RdKSkmJlwidG9KU09OXCIhPT10KXJldHVybiExO3JldHVybiEwfWIuZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLG4scil7dmFyIGk7cmV0dXJuIGU/KG49KG58fFwiZnhcIikrXCJxdWV1ZVwiLGk9Yi5fZGF0YShlLG4pLHImJighaXx8Yi5pc0FycmF5KHIpP2k9Yi5fZGF0YShlLG4sYi5tYWtlQXJyYXkocikpOmkucHVzaChyKSksaXx8W10pOnR9LGRlcXVldWU6ZnVuY3Rpb24oZSx0KXt0PXR8fFwiZnhcIjt2YXIgbj1iLnF1ZXVlKGUsdCkscj1uLmxlbmd0aCxpPW4uc2hpZnQoKSxvPWIuX3F1ZXVlSG9va3MoZSx0KSxhPWZ1bmN0aW9uKCl7Yi5kZXF1ZXVlKGUsdCl9O1wiaW5wcm9ncmVzc1wiPT09aSYmKGk9bi5zaGlmdCgpLHItLSksby5jdXI9aSxpJiYoXCJmeFwiPT09dCYmbi51bnNoaWZ0KFwiaW5wcm9ncmVzc1wiKSxkZWxldGUgby5zdG9wLGkuY2FsbChlLGEsbykpLCFyJiZvJiZvLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10K1wicXVldWVIb29rc1wiO3JldHVybiBiLl9kYXRhKGUsbil8fGIuX2RhdGEoZSxuLHtlbXB0eTpiLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLmFkZChmdW5jdGlvbigpe2IuX3JlbW92ZURhdGEoZSx0K1wicXVldWVcIiksYi5fcmVtb3ZlRGF0YShlLG4pfSl9KX19KSxiLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oZSxuKXt2YXIgcj0yO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBlJiYobj1lLGU9XCJmeFwiLHItLSkscj5hcmd1bWVudHMubGVuZ3RoP2IucXVldWUodGhpc1swXSxlKTpuPT09dD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PWIucXVldWUodGhpcyxlLG4pO2IuX3F1ZXVlSG9va3ModGhpcyxlKSxcImZ4XCI9PT1lJiZcImlucHJvZ3Jlc3NcIiE9PXRbMF0mJmIuZGVxdWV1ZSh0aGlzLGUpfSl9LGRlcXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2IuZGVxdWV1ZSh0aGlzLGUpfSl9LGRlbGF5OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9Yi5meD9iLmZ4LnNwZWVkc1tlXXx8ZTplLHQ9dHx8XCJmeFwiLHRoaXMucXVldWUodCxmdW5jdGlvbih0LG4pe3ZhciByPXNldFRpbWVvdXQodCxlKTtuLnN0b3A9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQocil9fSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucXVldWUoZXx8XCJmeFwiLFtdKX0scHJvbWlzZTpmdW5jdGlvbihlLG4pe3ZhciByLGk9MSxvPWIuRGVmZXJyZWQoKSxhPXRoaXMscz10aGlzLmxlbmd0aCx1PWZ1bmN0aW9uKCl7LS1pfHxvLnJlc29sdmVXaXRoKGEsW2FdKX07XCJzdHJpbmdcIiE9dHlwZW9mIGUmJihuPWUsZT10KSxlPWV8fFwiZnhcIjt3aGlsZShzLS0pcj1iLl9kYXRhKGFbc10sZStcInF1ZXVlSG9va3NcIiksciYmci5lbXB0eSYmKGkrKyxyLmVtcHR5LmFkZCh1KSk7cmV0dXJuIHUoKSxvLnByb21pc2Uobil9fSk7dmFyIEkseixYPS9bXFx0XFxyXFxuXS9nLFU9L1xcci9nLFY9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkL2ksWT0vXig/OmF8YXJlYSkkL2ksSj0vXig/OmNoZWNrZWR8c2VsZWN0ZWR8YXV0b2ZvY3VzfGF1dG9wbGF5fGFzeW5jfGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkKSQvaSxHPS9eKD86Y2hlY2tlZHxzZWxlY3RlZCkkL2ksUT1iLnN1cHBvcnQuZ2V0U2V0QXR0cmlidXRlLEs9Yi5zdXBwb3J0LmlucHV0O2IuZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGIuYWNjZXNzKHRoaXMsYi5hdHRyLGUsdCxhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtiLnJlbW92ZUF0dHIodGhpcyxlKX0pfSxwcm9wOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGIuYWNjZXNzKHRoaXMsYi5wcm9wLGUsdCxhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKGUpe3JldHVybiBlPWIucHJvcEZpeFtlXXx8ZSx0aGlzLmVhY2goZnVuY3Rpb24oKXt0cnl7dGhpc1tlXT10LGRlbGV0ZSB0aGlzW2VdfWNhdGNoKG4pe319KX0sYWRkQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGksbyxhPTAscz10aGlzLmxlbmd0aCx1PVwic3RyaW5nXCI9PXR5cGVvZiBlJiZlO2lmKGIuaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe2IodGhpcykuYWRkQ2xhc3MoZS5jYWxsKHRoaXMsdCx0aGlzLmNsYXNzTmFtZSkpfSk7aWYodSlmb3IodD0oZXx8XCJcIikubWF0Y2godyl8fFtdO3M+YTthKyspaWYobj10aGlzW2FdLHI9MT09PW4ubm9kZVR5cGUmJihuLmNsYXNzTmFtZT8oXCIgXCIrbi5jbGFzc05hbWUrXCIgXCIpLnJlcGxhY2UoWCxcIiBcIik6XCIgXCIpKXtvPTA7d2hpbGUoaT10W28rK10pMD5yLmluZGV4T2YoXCIgXCIraStcIiBcIikmJihyKz1pK1wiIFwiKTtuLmNsYXNzTmFtZT1iLnRyaW0ocil9cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLG8sYT0wLHM9dGhpcy5sZW5ndGgsdT0wPT09YXJndW1lbnRzLmxlbmd0aHx8XCJzdHJpbmdcIj09dHlwZW9mIGUmJmU7aWYoYi5pc0Z1bmN0aW9uKGUpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24odCl7Yih0aGlzKS5yZW1vdmVDbGFzcyhlLmNhbGwodGhpcyx0LHRoaXMuY2xhc3NOYW1lKSl9KTtpZih1KWZvcih0PShlfHxcIlwiKS5tYXRjaCh3KXx8W107cz5hO2ErKylpZihuPXRoaXNbYV0scj0xPT09bi5ub2RlVHlwZSYmKG4uY2xhc3NOYW1lPyhcIiBcIituLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZShYLFwiIFwiKTpcIlwiKSl7bz0wO3doaWxlKGk9dFtvKytdKXdoaWxlKHIuaW5kZXhPZihcIiBcIitpK1wiIFwiKT49MClyPXIucmVwbGFjZShcIiBcIitpK1wiIFwiLFwiIFwiKTtuLmNsYXNzTmFtZT1lP2IudHJpbShyKTpcIlwifXJldHVybiB0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbihlLHQpe3ZhciBuPXR5cGVvZiBlLHI9XCJib29sZWFuXCI9PXR5cGVvZiB0O3JldHVybiBiLmlzRnVuY3Rpb24oZSk/dGhpcy5lYWNoKGZ1bmN0aW9uKG4pe2IodGhpcykudG9nZ2xlQ2xhc3MoZS5jYWxsKHRoaXMsbix0aGlzLmNsYXNzTmFtZSx0KSx0KX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe2lmKFwic3RyaW5nXCI9PT1uKXt2YXIgbyxhPTAscz1iKHRoaXMpLHU9dCxsPWUubWF0Y2godyl8fFtdO3doaWxlKG89bFthKytdKXU9cj91OiFzLmhhc0NsYXNzKG8pLHNbdT9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShvKX1lbHNlKG49PT1pfHxcImJvb2xlYW5cIj09PW4pJiYodGhpcy5jbGFzc05hbWUmJmIuX2RhdGEodGhpcyxcIl9fY2xhc3NOYW1lX19cIix0aGlzLmNsYXNzTmFtZSksdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGU9PT0hMT9cIlwiOmIuX2RhdGEodGhpcyxcIl9fY2xhc3NOYW1lX19cIil8fFwiXCIpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0PVwiIFwiK2UrXCIgXCIsbj0wLHI9dGhpcy5sZW5ndGg7Zm9yKDtyPm47bisrKWlmKDE9PT10aGlzW25dLm5vZGVUeXBlJiYoXCIgXCIrdGhpc1tuXS5jbGFzc05hbWUrXCIgXCIpLnJlcGxhY2UoWCxcIiBcIikuaW5kZXhPZih0KT49MClyZXR1cm4hMDtyZXR1cm4hMX0sdmFsOmZ1bmN0aW9uKGUpe3ZhciBuLHIsaSxvPXRoaXNbMF07e2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGk9Yi5pc0Z1bmN0aW9uKGUpLHRoaXMuZWFjaChmdW5jdGlvbihuKXt2YXIgbyxhPWIodGhpcyk7MT09PXRoaXMubm9kZVR5cGUmJihvPWk/ZS5jYWxsKHRoaXMsbixhLnZhbCgpKTplLG51bGw9PW8/bz1cIlwiOlwibnVtYmVyXCI9PXR5cGVvZiBvP28rPVwiXCI6Yi5pc0FycmF5KG8pJiYobz1iLm1hcChvLGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP1wiXCI6ZStcIlwifSkpLHI9Yi52YWxIb29rc1t0aGlzLnR5cGVdfHxiLnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sciYmXCJzZXRcImluIHImJnIuc2V0KHRoaXMsbyxcInZhbHVlXCIpIT09dHx8KHRoaXMudmFsdWU9bykpfSk7aWYobylyZXR1cm4gcj1iLnZhbEhvb2tzW28udHlwZV18fGIudmFsSG9va3Nbby5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxyJiZcImdldFwiaW4gciYmKG49ci5nZXQobyxcInZhbHVlXCIpKSE9PXQ/bjoobj1vLnZhbHVlLFwic3RyaW5nXCI9PXR5cGVvZiBuP24ucmVwbGFjZShVLFwiXCIpOm51bGw9PW4/XCJcIjpuKX19fSksYi5leHRlbmQoe3ZhbEhvb2tzOntvcHRpb246e2dldDpmdW5jdGlvbihlKXt2YXIgdD1lLmF0dHJpYnV0ZXMudmFsdWU7cmV0dXJuIXR8fHQuc3BlY2lmaWVkP2UudmFsdWU6ZS50ZXh0fX0sc2VsZWN0OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixyPWUub3B0aW9ucyxpPWUuc2VsZWN0ZWRJbmRleCxvPVwic2VsZWN0LW9uZVwiPT09ZS50eXBlfHwwPmksYT1vP251bGw6W10scz1vP2krMTpyLmxlbmd0aCx1PTA+aT9zOm8/aTowO2Zvcig7cz51O3UrKylpZihuPXJbdV0sISghbi5zZWxlY3RlZCYmdSE9PWl8fChiLnN1cHBvcnQub3B0RGlzYWJsZWQ/bi5kaXNhYmxlZDpudWxsIT09bi5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSl8fG4ucGFyZW50Tm9kZS5kaXNhYmxlZCYmYi5ub2RlTmFtZShuLnBhcmVudE5vZGUsXCJvcHRncm91cFwiKSkpe2lmKHQ9YihuKS52YWwoKSxvKXJldHVybiB0O2EucHVzaCh0KX1yZXR1cm4gYX0sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG49Yi5tYWtlQXJyYXkodCk7cmV0dXJuIGIoZSkuZmluZChcIm9wdGlvblwiKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5zZWxlY3RlZD1iLmluQXJyYXkoYih0aGlzKS52YWwoKSxuKT49MH0pLG4ubGVuZ3RofHwoZS5zZWxlY3RlZEluZGV4PS0xKSxufX19LGF0dHI6ZnVuY3Rpb24oZSxuLHIpe3ZhciBvLGEscyx1PWUubm9kZVR5cGU7aWYoZSYmMyE9PXUmJjghPT11JiYyIT09dSlyZXR1cm4gdHlwZW9mIGUuZ2V0QXR0cmlidXRlPT09aT9iLnByb3AoZSxuLHIpOihhPTEhPT11fHwhYi5pc1hNTERvYyhlKSxhJiYobj1uLnRvTG93ZXJDYXNlKCksbz1iLmF0dHJIb29rc1tuXXx8KEoudGVzdChuKT96OkkpKSxyPT09dD9vJiZhJiZcImdldFwiaW4gbyYmbnVsbCE9PShzPW8uZ2V0KGUsbikpP3M6KHR5cGVvZiBlLmdldEF0dHJpYnV0ZSE9PWkmJihzPWUuZ2V0QXR0cmlidXRlKG4pKSxudWxsPT1zP3Q6cyk6bnVsbCE9PXI/byYmYSYmXCJzZXRcImluIG8mJihzPW8uc2V0KGUscixuKSkhPT10P3M6KGUuc2V0QXR0cmlidXRlKG4scitcIlwiKSxyKTooYi5yZW1vdmVBdHRyKGUsbiksdCkpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPTAsbz10JiZ0Lm1hdGNoKHcpO2lmKG8mJjE9PT1lLm5vZGVUeXBlKXdoaWxlKG49b1tpKytdKXI9Yi5wcm9wRml4W25dfHxuLEoudGVzdChuKT8hUSYmRy50ZXN0KG4pP2VbYi5jYW1lbENhc2UoXCJkZWZhdWx0LVwiK24pXT1lW3JdPSExOmVbcl09ITE6Yi5hdHRyKGUsbixcIlwiKSxlLnJlbW92ZUF0dHJpYnV0ZShRP246cil9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGUsdCl7aWYoIWIuc3VwcG9ydC5yYWRpb1ZhbHVlJiZcInJhZGlvXCI9PT10JiZiLm5vZGVOYW1lKGUsXCJpbnB1dFwiKSl7dmFyIG49ZS52YWx1ZTtyZXR1cm4gZS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsdCksbiYmKGUudmFsdWU9biksdH19fX0scHJvcEZpeDp7dGFiaW5kZXg6XCJ0YWJJbmRleFwiLHJlYWRvbmx5OlwicmVhZE9ubHlcIixcImZvclwiOlwiaHRtbEZvclwiLFwiY2xhc3NcIjpcImNsYXNzTmFtZVwiLG1heGxlbmd0aDpcIm1heExlbmd0aFwiLGNlbGxzcGFjaW5nOlwiY2VsbFNwYWNpbmdcIixjZWxscGFkZGluZzpcImNlbGxQYWRkaW5nXCIscm93c3BhbjpcInJvd1NwYW5cIixjb2xzcGFuOlwiY29sU3BhblwiLHVzZW1hcDpcInVzZU1hcFwiLGZyYW1lYm9yZGVyOlwiZnJhbWVCb3JkZXJcIixjb250ZW50ZWRpdGFibGU6XCJjb250ZW50RWRpdGFibGVcIn0scHJvcDpmdW5jdGlvbihlLG4scil7dmFyIGksbyxhLHM9ZS5ub2RlVHlwZTtpZihlJiYzIT09cyYmOCE9PXMmJjIhPT1zKXJldHVybiBhPTEhPT1zfHwhYi5pc1hNTERvYyhlKSxhJiYobj1iLnByb3BGaXhbbl18fG4sbz1iLnByb3BIb29rc1tuXSksciE9PXQ/byYmXCJzZXRcImluIG8mJihpPW8uc2V0KGUscixuKSkhPT10P2k6ZVtuXT1yOm8mJlwiZ2V0XCJpbiBvJiZudWxsIT09KGk9by5nZXQoZSxuKSk/aTplW25dfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIG49ZS5nZXRBdHRyaWJ1dGVOb2RlKFwidGFiaW5kZXhcIik7cmV0dXJuIG4mJm4uc3BlY2lmaWVkP3BhcnNlSW50KG4udmFsdWUsMTApOlYudGVzdChlLm5vZGVOYW1lKXx8WS50ZXN0KGUubm9kZU5hbWUpJiZlLmhyZWY/MDp0fX19fSksej17Z2V0OmZ1bmN0aW9uKGUsbil7dmFyIHI9Yi5wcm9wKGUsbiksaT1cImJvb2xlYW5cIj09dHlwZW9mIHImJmUuZ2V0QXR0cmlidXRlKG4pLG89XCJib29sZWFuXCI9PXR5cGVvZiByP0smJlE/bnVsbCE9aTpHLnRlc3Qobik/ZVtiLmNhbWVsQ2FzZShcImRlZmF1bHQtXCIrbildOiEhaTplLmdldEF0dHJpYnV0ZU5vZGUobik7cmV0dXJuIG8mJm8udmFsdWUhPT0hMT9uLnRvTG93ZXJDYXNlKCk6dH0sc2V0OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdD09PSExP2IucmVtb3ZlQXR0cihlLG4pOksmJlF8fCFHLnRlc3Qobik/ZS5zZXRBdHRyaWJ1dGUoIVEmJmIucHJvcEZpeFtuXXx8bixuKTplW2IuY2FtZWxDYXNlKFwiZGVmYXVsdC1cIituKV09ZVtuXT0hMCxufX0sSyYmUXx8KGIuYXR0ckhvb2tzLnZhbHVlPXtnZXQ6ZnVuY3Rpb24oZSxuKXt2YXIgcj1lLmdldEF0dHJpYnV0ZU5vZGUobik7cmV0dXJuIGIubm9kZU5hbWUoZSxcImlucHV0XCIpP2UuZGVmYXVsdFZhbHVlOnImJnIuc3BlY2lmaWVkP3IudmFsdWU6dH0sc2V0OmZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gYi5ub2RlTmFtZShlLFwiaW5wdXRcIik/KGUuZGVmYXVsdFZhbHVlPW4sdCk6SSYmSS5zZXQoZSxuLHIpfX0pLFF8fChJPWIudmFsSG9va3MuYnV0dG9uPXtnZXQ6ZnVuY3Rpb24oZSxuKXt2YXIgcj1lLmdldEF0dHJpYnV0ZU5vZGUobik7cmV0dXJuIHImJihcImlkXCI9PT1ufHxcIm5hbWVcIj09PW58fFwiY29vcmRzXCI9PT1uP1wiXCIhPT1yLnZhbHVlOnIuc3BlY2lmaWVkKT9yLnZhbHVlOnR9LHNldDpmdW5jdGlvbihlLG4scil7dmFyIGk9ZS5nZXRBdHRyaWJ1dGVOb2RlKHIpO3JldHVybiBpfHxlLnNldEF0dHJpYnV0ZU5vZGUoaT1lLm93bmVyRG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKHIpKSxpLnZhbHVlPW4rPVwiXCIsXCJ2YWx1ZVwiPT09cnx8bj09PWUuZ2V0QXR0cmlidXRlKHIpP246dH19LGIuYXR0ckhvb2tzLmNvbnRlbnRlZGl0YWJsZT17Z2V0OkkuZ2V0LHNldDpmdW5jdGlvbihlLHQsbil7SS5zZXQoZSxcIlwiPT09dD8hMTp0LG4pfX0sYi5lYWNoKFtcIndpZHRoXCIsXCJoZWlnaHRcIl0sZnVuY3Rpb24oZSxuKXtiLmF0dHJIb29rc1tuXT1iLmV4dGVuZChiLmF0dHJIb29rc1tuXSx7c2V0OmZ1bmN0aW9uKGUscil7cmV0dXJuXCJcIj09PXI/KGUuc2V0QXR0cmlidXRlKG4sXCJhdXRvXCIpLHIpOnR9fSl9KSksYi5zdXBwb3J0LmhyZWZOb3JtYWxpemVkfHwoYi5lYWNoKFtcImhyZWZcIixcInNyY1wiLFwid2lkdGhcIixcImhlaWdodFwiXSxmdW5jdGlvbihlLG4pe2IuYXR0ckhvb2tzW25dPWIuZXh0ZW5kKGIuYXR0ckhvb2tzW25dLHtnZXQ6ZnVuY3Rpb24oZSl7dmFyIHI9ZS5nZXRBdHRyaWJ1dGUobiwyKTtyZXR1cm4gbnVsbD09cj90OnJ9fSl9KSxiLmVhY2goW1wiaHJlZlwiLFwic3JjXCJdLGZ1bmN0aW9uKGUsdCl7Yi5wcm9wSG9va3NbdF09e2dldDpmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUodCw0KX19fSkpLGIuc3VwcG9ydC5zdHlsZXx8KGIuYXR0ckhvb2tzLnN0eWxlPXtnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3R5bGUuY3NzVGV4dHx8dH0sc2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuc3R5bGUuY3NzVGV4dD10K1wiXCJ9fSksYi5zdXBwb3J0Lm9wdFNlbGVjdGVkfHwoYi5wcm9wSG9va3Muc2VsZWN0ZWQ9Yi5leHRlbmQoYi5wcm9wSG9va3Muc2VsZWN0ZWQse2dldDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJih0LnNlbGVjdGVkSW5kZXgsdC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCksbnVsbH19KSksYi5zdXBwb3J0LmVuY3R5cGV8fChiLnByb3BGaXguZW5jdHlwZT1cImVuY29kaW5nXCIpLGIuc3VwcG9ydC5jaGVja09ufHxiLmVhY2goW1wicmFkaW9cIixcImNoZWNrYm94XCJdLGZ1bmN0aW9uKCl7Yi52YWxIb29rc1t0aGlzXT17Z2V0OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT09ZS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKT9cIm9uXCI6ZS52YWx1ZX19fSksYi5lYWNoKFtcInJhZGlvXCIsXCJjaGVja2JveFwiXSxmdW5jdGlvbigpe2IudmFsSG9va3NbdGhpc109Yi5leHRlbmQoYi52YWxIb29rc1t0aGlzXSx7c2V0OmZ1bmN0aW9uKGUsbil7cmV0dXJuIGIuaXNBcnJheShuKT9lLmNoZWNrZWQ9Yi5pbkFycmF5KGIoZSkudmFsKCksbik+PTA6dH19KX0pO3ZhciBaPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhKSQvaSxldD0vXmtleS8sdHQ9L14oPzptb3VzZXxjb250ZXh0bWVudSl8Y2xpY2svLG50PS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxydD0vXihbXi5dKikoPzpcXC4oLispfCkkLztmdW5jdGlvbiBpdCgpe3JldHVybiEwfWZ1bmN0aW9uIG90KCl7cmV0dXJuITF9Yi5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihlLG4scixvLGEpe3ZhciBzLHUsbCxjLHAsZixkLGgsZyxtLHksdj1iLl9kYXRhKGUpO2lmKHYpe3IuaGFuZGxlciYmKGM9cixyPWMuaGFuZGxlcixhPWMuc2VsZWN0b3IpLHIuZ3VpZHx8KHIuZ3VpZD1iLmd1aWQrKyksKHU9di5ldmVudHMpfHwodT12LmV2ZW50cz17fSksKGY9di5oYW5kbGUpfHwoZj12LmhhbmRsZT1mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGI9PT1pfHxlJiZiLmV2ZW50LnRyaWdnZXJlZD09PWUudHlwZT90OmIuZXZlbnQuZGlzcGF0Y2guYXBwbHkoZi5lbGVtLGFyZ3VtZW50cyl9LGYuZWxlbT1lKSxuPShufHxcIlwiKS5tYXRjaCh3KXx8W1wiXCJdLGw9bi5sZW5ndGg7d2hpbGUobC0tKXM9cnQuZXhlYyhuW2xdKXx8W10sZz15PXNbMV0sbT0oc1syXXx8XCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSxwPWIuZXZlbnQuc3BlY2lhbFtnXXx8e30sZz0oYT9wLmRlbGVnYXRlVHlwZTpwLmJpbmRUeXBlKXx8ZyxwPWIuZXZlbnQuc3BlY2lhbFtnXXx8e30sZD1iLmV4dGVuZCh7dHlwZTpnLG9yaWdUeXBlOnksZGF0YTpvLGhhbmRsZXI6cixndWlkOnIuZ3VpZCxzZWxlY3RvcjphLG5lZWRzQ29udGV4dDphJiZiLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoYSksbmFtZXNwYWNlOm0uam9pbihcIi5cIil9LGMpLChoPXVbZ10pfHwoaD11W2ddPVtdLGguZGVsZWdhdGVDb3VudD0wLHAuc2V0dXAmJnAuc2V0dXAuY2FsbChlLG8sbSxmKSE9PSExfHwoZS5hZGRFdmVudExpc3RlbmVyP2UuYWRkRXZlbnRMaXN0ZW5lcihnLGYsITEpOmUuYXR0YWNoRXZlbnQmJmUuYXR0YWNoRXZlbnQoXCJvblwiK2csZikpKSxwLmFkZCYmKHAuYWRkLmNhbGwoZSxkKSxkLmhhbmRsZXIuZ3VpZHx8KGQuaGFuZGxlci5ndWlkPXIuZ3VpZCkpLGE/aC5zcGxpY2UoaC5kZWxlZ2F0ZUNvdW50KyssMCxkKTpoLnB1c2goZCksYi5ldmVudC5nbG9iYWxbZ109ITA7ZT1udWxsfX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIG8sYSxzLHUsbCxjLHAsZixkLGgsZyxtPWIuaGFzRGF0YShlKSYmYi5fZGF0YShlKTtpZihtJiYoYz1tLmV2ZW50cykpe3Q9KHR8fFwiXCIpLm1hdGNoKHcpfHxbXCJcIl0sbD10Lmxlbmd0aDt3aGlsZShsLS0paWYocz1ydC5leGVjKHRbbF0pfHxbXSxkPWc9c1sxXSxoPShzWzJdfHxcIlwiKS5zcGxpdChcIi5cIikuc29ydCgpLGQpe3A9Yi5ldmVudC5zcGVjaWFsW2RdfHx7fSxkPShyP3AuZGVsZWdhdGVUeXBlOnAuYmluZFR5cGUpfHxkLGY9Y1tkXXx8W10scz1zWzJdJiZSZWdFeHAoXCIoXnxcXFxcLilcIitoLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKStcIihcXFxcLnwkKVwiKSx1PW89Zi5sZW5ndGg7d2hpbGUoby0tKWE9ZltvXSwhaSYmZyE9PWEub3JpZ1R5cGV8fG4mJm4uZ3VpZCE9PWEuZ3VpZHx8cyYmIXMudGVzdChhLm5hbWVzcGFjZSl8fHImJnIhPT1hLnNlbGVjdG9yJiYoXCIqKlwiIT09cnx8IWEuc2VsZWN0b3IpfHwoZi5zcGxpY2UobywxKSxhLnNlbGVjdG9yJiZmLmRlbGVnYXRlQ291bnQtLSxwLnJlbW92ZSYmcC5yZW1vdmUuY2FsbChlLGEpKTt1JiYhZi5sZW5ndGgmJihwLnRlYXJkb3duJiZwLnRlYXJkb3duLmNhbGwoZSxoLG0uaGFuZGxlKSE9PSExfHxiLnJlbW92ZUV2ZW50KGUsZCxtLmhhbmRsZSksZGVsZXRlIGNbZF0pfWVsc2UgZm9yKGQgaW4gYyliLmV2ZW50LnJlbW92ZShlLGQrdFtsXSxuLHIsITApO2IuaXNFbXB0eU9iamVjdChjKSYmKGRlbGV0ZSBtLmhhbmRsZSxiLl9yZW1vdmVEYXRhKGUsXCJldmVudHNcIikpfX0sdHJpZ2dlcjpmdW5jdGlvbihuLHIsaSxhKXt2YXIgcyx1LGwsYyxwLGYsZCxoPVtpfHxvXSxnPXkuY2FsbChuLFwidHlwZVwiKT9uLnR5cGU6bixtPXkuY2FsbChuLFwibmFtZXNwYWNlXCIpP24ubmFtZXNwYWNlLnNwbGl0KFwiLlwiKTpbXTtpZihsPWY9aT1pfHxvLDMhPT1pLm5vZGVUeXBlJiY4IT09aS5ub2RlVHlwZSYmIW50LnRlc3QoZytiLmV2ZW50LnRyaWdnZXJlZCkmJihnLmluZGV4T2YoXCIuXCIpPj0wJiYobT1nLnNwbGl0KFwiLlwiKSxnPW0uc2hpZnQoKSxtLnNvcnQoKSksdT0wPmcuaW5kZXhPZihcIjpcIikmJlwib25cIitnLG49bltiLmV4cGFuZG9dP246bmV3IGIuRXZlbnQoZyxcIm9iamVjdFwiPT10eXBlb2YgbiYmbiksbi5pc1RyaWdnZXI9ITAsbi5uYW1lc3BhY2U9bS5qb2luKFwiLlwiKSxuLm5hbWVzcGFjZV9yZT1uLm5hbWVzcGFjZT9SZWdFeHAoXCIoXnxcXFxcLilcIittLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKStcIihcXFxcLnwkKVwiKTpudWxsLG4ucmVzdWx0PXQsbi50YXJnZXR8fChuLnRhcmdldD1pKSxyPW51bGw9PXI/W25dOmIubWFrZUFycmF5KHIsW25dKSxwPWIuZXZlbnQuc3BlY2lhbFtnXXx8e30sYXx8IXAudHJpZ2dlcnx8cC50cmlnZ2VyLmFwcGx5KGkscikhPT0hMSkpe2lmKCFhJiYhcC5ub0J1YmJsZSYmIWIuaXNXaW5kb3coaSkpe2ZvcihjPXAuZGVsZWdhdGVUeXBlfHxnLG50LnRlc3QoYytnKXx8KGw9bC5wYXJlbnROb2RlKTtsO2w9bC5wYXJlbnROb2RlKWgucHVzaChsKSxmPWw7Zj09PShpLm93bmVyRG9jdW1lbnR8fG8pJiZoLnB1c2goZi5kZWZhdWx0Vmlld3x8Zi5wYXJlbnRXaW5kb3d8fGUpfWQ9MDt3aGlsZSgobD1oW2QrK10pJiYhbi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKW4udHlwZT1kPjE/YzpwLmJpbmRUeXBlfHxnLHM9KGIuX2RhdGEobCxcImV2ZW50c1wiKXx8e30pW24udHlwZV0mJmIuX2RhdGEobCxcImhhbmRsZVwiKSxzJiZzLmFwcGx5KGwscikscz11JiZsW3VdLHMmJmIuYWNjZXB0RGF0YShsKSYmcy5hcHBseSYmcy5hcHBseShsLHIpPT09ITEmJm4ucHJldmVudERlZmF1bHQoKTtpZihuLnR5cGU9ZywhKGF8fG4uaXNEZWZhdWx0UHJldmVudGVkKCl8fHAuX2RlZmF1bHQmJnAuX2RlZmF1bHQuYXBwbHkoaS5vd25lckRvY3VtZW50LHIpIT09ITF8fFwiY2xpY2tcIj09PWcmJmIubm9kZU5hbWUoaSxcImFcIil8fCFiLmFjY2VwdERhdGEoaSl8fCF1fHwhaVtnXXx8Yi5pc1dpbmRvdyhpKSkpe2Y9aVt1XSxmJiYoaVt1XT1udWxsKSxiLmV2ZW50LnRyaWdnZXJlZD1nO3RyeXtpW2ddKCl9Y2F0Y2godil7fWIuZXZlbnQudHJpZ2dlcmVkPXQsZiYmKGlbdV09Zil9cmV0dXJuIG4ucmVzdWx0fX0sZGlzcGF0Y2g6ZnVuY3Rpb24oZSl7ZT1iLmV2ZW50LmZpeChlKTt2YXIgbixyLGksbyxhLHM9W10sdT1oLmNhbGwoYXJndW1lbnRzKSxsPShiLl9kYXRhKHRoaXMsXCJldmVudHNcIil8fHt9KVtlLnR5cGVdfHxbXSxjPWIuZXZlbnQuc3BlY2lhbFtlLnR5cGVdfHx7fTtpZih1WzBdPWUsZS5kZWxlZ2F0ZVRhcmdldD10aGlzLCFjLnByZURpc3BhdGNofHxjLnByZURpc3BhdGNoLmNhbGwodGhpcyxlKSE9PSExKXtzPWIuZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGUsbCksbj0wO3doaWxlKChvPXNbbisrXSkmJiFlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2UuY3VycmVudFRhcmdldD1vLmVsZW0sYT0wO3doaWxlKChpPW8uaGFuZGxlcnNbYSsrXSkmJiFlLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpKCFlLm5hbWVzcGFjZV9yZXx8ZS5uYW1lc3BhY2VfcmUudGVzdChpLm5hbWVzcGFjZSkpJiYoZS5oYW5kbGVPYmo9aSxlLmRhdGE9aS5kYXRhLHI9KChiLmV2ZW50LnNwZWNpYWxbaS5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fGkuaGFuZGxlcikuYXBwbHkoby5lbGVtLHUpLHIhPT10JiYoZS5yZXN1bHQ9cik9PT0hMSYmKGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGMucG9zdERpc3BhdGNoJiZjLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsZSksZS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihlLG4pe3ZhciByLGksbyxhLHM9W10sdT1uLmRlbGVnYXRlQ291bnQsbD1lLnRhcmdldDtpZih1JiZsLm5vZGVUeXBlJiYoIWUuYnV0dG9ufHxcImNsaWNrXCIhPT1lLnR5cGUpKWZvcig7bCE9dGhpcztsPWwucGFyZW50Tm9kZXx8dGhpcylpZigxPT09bC5ub2RlVHlwZSYmKGwuZGlzYWJsZWQhPT0hMHx8XCJjbGlja1wiIT09ZS50eXBlKSl7Zm9yKG89W10sYT0wO3U+YTthKyspaT1uW2FdLHI9aS5zZWxlY3RvcitcIiBcIixvW3JdPT09dCYmKG9bcl09aS5uZWVkc0NvbnRleHQ/YihyLHRoaXMpLmluZGV4KGwpPj0wOmIuZmluZChyLHRoaXMsbnVsbCxbbF0pLmxlbmd0aCksb1tyXSYmby5wdXNoKGkpO28ubGVuZ3RoJiZzLnB1c2goe2VsZW06bCxoYW5kbGVyczpvfSl9cmV0dXJuIG4ubGVuZ3RoPnUmJnMucHVzaCh7ZWxlbTp0aGlzLGhhbmRsZXJzOm4uc2xpY2UodSl9KSxzfSxmaXg6ZnVuY3Rpb24oZSl7aWYoZVtiLmV4cGFuZG9dKXJldHVybiBlO3ZhciB0LG4scixpPWUudHlwZSxhPWUscz10aGlzLmZpeEhvb2tzW2ldO3N8fCh0aGlzLmZpeEhvb2tzW2ldPXM9dHQudGVzdChpKT90aGlzLm1vdXNlSG9va3M6ZXQudGVzdChpKT90aGlzLmtleUhvb2tzOnt9KSxyPXMucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQocy5wcm9wcyk6dGhpcy5wcm9wcyxlPW5ldyBiLkV2ZW50KGEpLHQ9ci5sZW5ndGg7d2hpbGUodC0tKW49clt0XSxlW25dPWFbbl07cmV0dXJuIGUudGFyZ2V0fHwoZS50YXJnZXQ9YS5zcmNFbGVtZW50fHxvKSwzPT09ZS50YXJnZXQubm9kZVR5cGUmJihlLnRhcmdldD1lLnRhcmdldC5wYXJlbnROb2RlKSxlLm1ldGFLZXk9ISFlLm1ldGFLZXkscy5maWx0ZXI/cy5maWx0ZXIoZSxhKTplfSxwcm9wczpcImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaFwiLnNwbGl0KFwiIFwiKSxmaXhIb29rczp7fSxrZXlIb29rczp7cHJvcHM6XCJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlXCIuc3BsaXQoXCIgXCIpLGZpbHRlcjpmdW5jdGlvbihlLHQpe3JldHVybiBudWxsPT1lLndoaWNoJiYoZS53aGljaD1udWxsIT10LmNoYXJDb2RlP3QuY2hhckNvZGU6dC5rZXlDb2RlKSxlfX0sbW91c2VIb29rczp7cHJvcHM6XCJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgZnJvbUVsZW1lbnQgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnRcIi5zcGxpdChcIiBcIiksZmlsdGVyOmZ1bmN0aW9uKGUsbil7dmFyIHIsaSxhLHM9bi5idXR0b24sdT1uLmZyb21FbGVtZW50O3JldHVybiBudWxsPT1lLnBhZ2VYJiZudWxsIT1uLmNsaWVudFgmJihpPWUudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fG8sYT1pLmRvY3VtZW50RWxlbWVudCxyPWkuYm9keSxlLnBhZ2VYPW4uY2xpZW50WCsoYSYmYS5zY3JvbGxMZWZ0fHxyJiZyLnNjcm9sbExlZnR8fDApLShhJiZhLmNsaWVudExlZnR8fHImJnIuY2xpZW50TGVmdHx8MCksZS5wYWdlWT1uLmNsaWVudFkrKGEmJmEuc2Nyb2xsVG9wfHxyJiZyLnNjcm9sbFRvcHx8MCktKGEmJmEuY2xpZW50VG9wfHxyJiZyLmNsaWVudFRvcHx8MCkpLCFlLnJlbGF0ZWRUYXJnZXQmJnUmJihlLnJlbGF0ZWRUYXJnZXQ9dT09PWUudGFyZ2V0P24udG9FbGVtZW50OnUpLGUud2hpY2h8fHM9PT10fHwoZS53aGljaD0xJnM/MToyJnM/Mzo0JnM/MjowKSxlfX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGNsaWNrOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIGIubm9kZU5hbWUodGhpcyxcImlucHV0XCIpJiZcImNoZWNrYm94XCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2s/KHRoaXMuY2xpY2soKSwhMSk6dH19LGZvY3VzOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7aWYodGhpcyE9PW8uYWN0aXZlRWxlbWVudCYmdGhpcy5mb2N1cyl0cnl7cmV0dXJuIHRoaXMuZm9jdXMoKSwhMX1jYXRjaChlKXt9fSxkZWxlZ2F0ZVR5cGU6XCJmb2N1c2luXCJ9LGJsdXI6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcz09PW8uYWN0aXZlRWxlbWVudCYmdGhpcy5ibHVyPyh0aGlzLmJsdXIoKSwhMSk6dH0sZGVsZWdhdGVUeXBlOlwiZm9jdXNvdXRcIn0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oZSl7ZS5yZXN1bHQhPT10JiYoZS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWUucmVzdWx0KX19fSxzaW11bGF0ZTpmdW5jdGlvbihlLHQsbixyKXt2YXIgaT1iLmV4dGVuZChuZXcgYi5FdmVudCxuLHt0eXBlOmUsaXNTaW11bGF0ZWQ6ITAsb3JpZ2luYWxFdmVudDp7fX0pO3I/Yi5ldmVudC50cmlnZ2VyKGksbnVsbCx0KTpiLmV2ZW50LmRpc3BhdGNoLmNhbGwodCxpKSxpLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZuLnByZXZlbnREZWZhdWx0KCl9fSxiLnJlbW92ZUV2ZW50PW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcj9mdW5jdGlvbihlLHQsbil7ZS5yZW1vdmVFdmVudExpc3RlbmVyJiZlLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxuLCExKX06ZnVuY3Rpb24oZSx0LG4pe3ZhciByPVwib25cIit0O2UuZGV0YWNoRXZlbnQmJih0eXBlb2YgZVtyXT09PWkmJihlW3JdPW51bGwpLGUuZGV0YWNoRXZlbnQocixuKSl9LGIuRXZlbnQ9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGIuRXZlbnQ/KGUmJmUudHlwZT8odGhpcy5vcmlnaW5hbEV2ZW50PWUsdGhpcy50eXBlPWUudHlwZSx0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1lLmRlZmF1bHRQcmV2ZW50ZWR8fGUucmV0dXJuVmFsdWU9PT0hMXx8ZS5nZXRQcmV2ZW50RGVmYXVsdCYmZS5nZXRQcmV2ZW50RGVmYXVsdCgpP2l0Om90KTp0aGlzLnR5cGU9ZSxuJiZiLmV4dGVuZCh0aGlzLG4pLHRoaXMudGltZVN0YW1wPWUmJmUudGltZVN0YW1wfHxiLm5vdygpLHRoaXNbYi5leHBhbmRvXT0hMCx0KTpuZXcgYi5FdmVudChlLG4pfSxiLkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOm90LGlzUHJvcGFnYXRpb25TdG9wcGVkOm90LGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOm90LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPWl0LGUmJihlLnByZXZlbnREZWZhdWx0P2UucHJldmVudERlZmF1bHQoKTplLnJldHVyblZhbHVlPSExKX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9aXQsZSYmKGUuc3RvcFByb3BhZ2F0aW9uJiZlLnN0b3BQcm9wYWdhdGlvbigpLGUuY2FuY2VsQnViYmxlPSEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1pdCx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0sYi5lYWNoKHttb3VzZWVudGVyOlwibW91c2VvdmVyXCIsbW91c2VsZWF2ZTpcIm1vdXNlb3V0XCJ9LGZ1bmN0aW9uKGUsdCl7Yi5ldmVudC5zcGVjaWFsW2VdPXtkZWxlZ2F0ZVR5cGU6dCxiaW5kVHlwZTp0LGhhbmRsZTpmdW5jdGlvbihlKXt2YXIgbixyPXRoaXMsaT1lLnJlbGF0ZWRUYXJnZXQsbz1lLmhhbmRsZU9iajtcclxucmV0dXJuKCFpfHxpIT09ciYmIWIuY29udGFpbnMocixpKSkmJihlLnR5cGU9by5vcmlnVHlwZSxuPW8uaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksZS50eXBlPXQpLG59fX0pLGIuc3VwcG9ydC5zdWJtaXRCdWJibGVzfHwoYi5ldmVudC5zcGVjaWFsLnN1Ym1pdD17c2V0dXA6ZnVuY3Rpb24oKXtyZXR1cm4gYi5ub2RlTmFtZSh0aGlzLFwiZm9ybVwiKT8hMTooYi5ldmVudC5hZGQodGhpcyxcImNsaWNrLl9zdWJtaXQga2V5cHJlc3MuX3N1Ym1pdFwiLGZ1bmN0aW9uKGUpe3ZhciBuPWUudGFyZ2V0LHI9Yi5ub2RlTmFtZShuLFwiaW5wdXRcIil8fGIubm9kZU5hbWUobixcImJ1dHRvblwiKT9uLmZvcm06dDtyJiYhYi5fZGF0YShyLFwic3VibWl0QnViYmxlc1wiKSYmKGIuZXZlbnQuYWRkKHIsXCJzdWJtaXQuX3N1Ym1pdFwiLGZ1bmN0aW9uKGUpe2UuX3N1Ym1pdF9idWJibGU9ITB9KSxiLl9kYXRhKHIsXCJzdWJtaXRCdWJibGVzXCIsITApKX0pLHQpfSxwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oZSl7ZS5fc3VibWl0X2J1YmJsZSYmKGRlbGV0ZSBlLl9zdWJtaXRfYnViYmxlLHRoaXMucGFyZW50Tm9kZSYmIWUuaXNUcmlnZ2VyJiZiLmV2ZW50LnNpbXVsYXRlKFwic3VibWl0XCIsdGhpcy5wYXJlbnROb2RlLGUsITApKX0sdGVhcmRvd246ZnVuY3Rpb24oKXtyZXR1cm4gYi5ub2RlTmFtZSh0aGlzLFwiZm9ybVwiKT8hMTooYi5ldmVudC5yZW1vdmUodGhpcyxcIi5fc3VibWl0XCIpLHQpfX0pLGIuc3VwcG9ydC5jaGFuZ2VCdWJibGVzfHwoYi5ldmVudC5zcGVjaWFsLmNoYW5nZT17c2V0dXA6ZnVuY3Rpb24oKXtyZXR1cm4gWi50ZXN0KHRoaXMubm9kZU5hbWUpPygoXCJjaGVja2JveFwiPT09dGhpcy50eXBlfHxcInJhZGlvXCI9PT10aGlzLnR5cGUpJiYoYi5ldmVudC5hZGQodGhpcyxcInByb3BlcnR5Y2hhbmdlLl9jaGFuZ2VcIixmdW5jdGlvbihlKXtcImNoZWNrZWRcIj09PWUub3JpZ2luYWxFdmVudC5wcm9wZXJ0eU5hbWUmJih0aGlzLl9qdXN0X2NoYW5nZWQ9ITApfSksYi5ldmVudC5hZGQodGhpcyxcImNsaWNrLl9jaGFuZ2VcIixmdW5jdGlvbihlKXt0aGlzLl9qdXN0X2NoYW5nZWQmJiFlLmlzVHJpZ2dlciYmKHRoaXMuX2p1c3RfY2hhbmdlZD0hMSksYi5ldmVudC5zaW11bGF0ZShcImNoYW5nZVwiLHRoaXMsZSwhMCl9KSksITEpOihiLmV2ZW50LmFkZCh0aGlzLFwiYmVmb3JlYWN0aXZhdGUuX2NoYW5nZVwiLGZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0O1oudGVzdCh0Lm5vZGVOYW1lKSYmIWIuX2RhdGEodCxcImNoYW5nZUJ1YmJsZXNcIikmJihiLmV2ZW50LmFkZCh0LFwiY2hhbmdlLl9jaGFuZ2VcIixmdW5jdGlvbihlKXshdGhpcy5wYXJlbnROb2RlfHxlLmlzU2ltdWxhdGVkfHxlLmlzVHJpZ2dlcnx8Yi5ldmVudC5zaW11bGF0ZShcImNoYW5nZVwiLHRoaXMucGFyZW50Tm9kZSxlLCEwKX0pLGIuX2RhdGEodCxcImNoYW5nZUJ1YmJsZXNcIiwhMCkpfSksdCl9LGhhbmRsZTpmdW5jdGlvbihlKXt2YXIgbj1lLnRhcmdldDtyZXR1cm4gdGhpcyE9PW58fGUuaXNTaW11bGF0ZWR8fGUuaXNUcmlnZ2VyfHxcInJhZGlvXCIhPT1uLnR5cGUmJlwiY2hlY2tib3hcIiE9PW4udHlwZT9lLmhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0fSx0ZWFyZG93bjpmdW5jdGlvbigpe3JldHVybiBiLmV2ZW50LnJlbW92ZSh0aGlzLFwiLl9jaGFuZ2VcIiksIVoudGVzdCh0aGlzLm5vZGVOYW1lKX19KSxiLnN1cHBvcnQuZm9jdXNpbkJ1YmJsZXN8fGIuZWFjaCh7Zm9jdXM6XCJmb2N1c2luXCIsYmx1cjpcImZvY3Vzb3V0XCJ9LGZ1bmN0aW9uKGUsdCl7dmFyIG49MCxyPWZ1bmN0aW9uKGUpe2IuZXZlbnQuc2ltdWxhdGUodCxlLnRhcmdldCxiLmV2ZW50LmZpeChlKSwhMCl9O2IuZXZlbnQuc3BlY2lhbFt0XT17c2V0dXA6ZnVuY3Rpb24oKXswPT09bisrJiZvLmFkZEV2ZW50TGlzdGVuZXIoZSxyLCEwKX0sdGVhcmRvd246ZnVuY3Rpb24oKXswPT09LS1uJiZvLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxyLCEwKX19fSksYi5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGUsbixyLGksbyl7dmFyIGEscztpZihcIm9iamVjdFwiPT10eXBlb2YgZSl7XCJzdHJpbmdcIiE9dHlwZW9mIG4mJihyPXJ8fG4sbj10KTtmb3IoYSBpbiBlKXRoaXMub24oYSxuLHIsZVthXSxvKTtyZXR1cm4gdGhpc31pZihudWxsPT1yJiZudWxsPT1pPyhpPW4scj1uPXQpOm51bGw9PWkmJihcInN0cmluZ1wiPT10eXBlb2Ygbj8oaT1yLHI9dCk6KGk9cixyPW4sbj10KSksaT09PSExKWk9b3Q7ZWxzZSBpZighaSlyZXR1cm4gdGhpcztyZXR1cm4gMT09PW8mJihzPWksaT1mdW5jdGlvbihlKXtyZXR1cm4gYigpLm9mZihlKSxzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saS5ndWlkPXMuZ3VpZHx8KHMuZ3VpZD1iLmd1aWQrKykpLHRoaXMuZWFjaChmdW5jdGlvbigpe2IuZXZlbnQuYWRkKHRoaXMsZSxpLHIsbil9KX0sb25lOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLm9uKGUsdCxuLHIsMSl9LG9mZjpmdW5jdGlvbihlLG4scil7dmFyIGksbztpZihlJiZlLnByZXZlbnREZWZhdWx0JiZlLmhhbmRsZU9iailyZXR1cm4gaT1lLmhhbmRsZU9iaixiKGUuZGVsZWdhdGVUYXJnZXQpLm9mZihpLm5hbWVzcGFjZT9pLm9yaWdUeXBlK1wiLlwiK2kubmFtZXNwYWNlOmkub3JpZ1R5cGUsaS5zZWxlY3RvcixpLmhhbmRsZXIpLHRoaXM7aWYoXCJvYmplY3RcIj09dHlwZW9mIGUpe2ZvcihvIGluIGUpdGhpcy5vZmYobyxuLGVbb10pO3JldHVybiB0aGlzfXJldHVybihuPT09ITF8fFwiZnVuY3Rpb25cIj09dHlwZW9mIG4pJiYocj1uLG49dCkscj09PSExJiYocj1vdCksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yi5ldmVudC5yZW1vdmUodGhpcyxlLHIsbil9KX0sYmluZDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMub24oZSxudWxsLHQsbil9LHVuYmluZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm9mZihlLG51bGwsdCl9LGRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLm9uKHQsZSxuLHIpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vZmYoZSxcIioqXCIpOnRoaXMub2ZmKHQsZXx8XCIqKlwiLG4pfSx0cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2IuZXZlbnQudHJpZ2dlcihlLHQsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oZSxuKXt2YXIgcj10aGlzWzBdO3JldHVybiByP2IuZXZlbnQudHJpZ2dlcihlLG4sciwhMCk6dH19KSxmdW5jdGlvbihlLHQpe3ZhciBuLHIsaSxvLGEscyx1LGwsYyxwLGYsZCxoLGcsbSx5LHYseD1cInNpenpsZVwiKy1uZXcgRGF0ZSx3PWUuZG9jdW1lbnQsVD17fSxOPTAsQz0wLGs9aXQoKSxFPWl0KCksUz1pdCgpLEE9dHlwZW9mIHQsaj0xPDwzMSxEPVtdLEw9RC5wb3AsSD1ELnB1c2gscT1ELnNsaWNlLE09RC5pbmRleE9mfHxmdW5jdGlvbihlKXt2YXIgdD0wLG49dGhpcy5sZW5ndGg7Zm9yKDtuPnQ7dCsrKWlmKHRoaXNbdF09PT1lKXJldHVybiB0O3JldHVybi0xfSxfPVwiW1xcXFx4MjBcXFxcdFxcXFxyXFxcXG5cXFxcZl1cIixGPVwiKD86XFxcXFxcXFwufFtcXFxcdy1dfFteXFxcXHgwMC1cXFxceGEwXSkrXCIsTz1GLnJlcGxhY2UoXCJ3XCIsXCJ3I1wiKSxCPVwiKFsqXiR8IX5dPz0pXCIsUD1cIlxcXFxbXCIrXytcIiooXCIrRitcIilcIitfK1wiKig/OlwiK0IrXytcIiooPzooWydcXFwiXSkoKD86XFxcXFxcXFwufFteXFxcXFxcXFxdKSo/KVxcXFwzfChcIitPK1wiKXwpfClcIitfK1wiKlxcXFxdXCIsUj1cIjooXCIrRitcIikoPzpcXFxcKCgoWydcXFwiXSkoKD86XFxcXFxcXFwufFteXFxcXFxcXFxdKSo/KVxcXFwzfCgoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpW1xcXFxdXXxcIitQLnJlcGxhY2UoMyw4KStcIikqKXwuKilcXFxcKXwpXCIsVz1SZWdFeHAoXCJeXCIrXytcIit8KCg/Ol58W15cXFxcXFxcXF0pKD86XFxcXFxcXFwuKSopXCIrXytcIiskXCIsXCJnXCIpLCQ9UmVnRXhwKFwiXlwiK18rXCIqLFwiK18rXCIqXCIpLEk9UmVnRXhwKFwiXlwiK18rXCIqKFtcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGY+K35dKVwiK18rXCIqXCIpLHo9UmVnRXhwKFIpLFg9UmVnRXhwKFwiXlwiK08rXCIkXCIpLFU9e0lEOlJlZ0V4cChcIl4jKFwiK0YrXCIpXCIpLENMQVNTOlJlZ0V4cChcIl5cXFxcLihcIitGK1wiKVwiKSxOQU1FOlJlZ0V4cChcIl5cXFxcW25hbWU9WydcXFwiXT8oXCIrRitcIilbJ1xcXCJdP1xcXFxdXCIpLFRBRzpSZWdFeHAoXCJeKFwiK0YucmVwbGFjZShcIndcIixcIncqXCIpK1wiKVwiKSxBVFRSOlJlZ0V4cChcIl5cIitQKSxQU0VVRE86UmVnRXhwKFwiXlwiK1IpLENISUxEOlJlZ0V4cChcIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcXFwoXCIrXytcIiooZXZlbnxvZGR8KChbKy1dfCkoXFxcXGQqKW58KVwiK18rXCIqKD86KFsrLV18KVwiK18rXCIqKFxcXFxkKyl8KSlcIitfK1wiKlxcXFwpfClcIixcImlcIiksbmVlZHNDb250ZXh0OlJlZ0V4cChcIl5cIitfK1wiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFxcXChcIitfK1wiKigoPzotXFxcXGQpP1xcXFxkKilcIitfK1wiKlxcXFwpfCkoPz1bXi1dfCQpXCIsXCJpXCIpfSxWPS9bXFx4MjBcXHRcXHJcXG5cXGZdKlsrfl0vLFk9L15bXntdK1xce1xccypcXFtuYXRpdmUgY29kZS8sSj0vXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxHPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksUT0vXmhcXGQkL2ksSz0vJ3xcXFxcL2csWj0vXFw9W1xceDIwXFx0XFxyXFxuXFxmXSooW14nXCJcXF1dKilbXFx4MjBcXHRcXHJcXG5cXGZdKlxcXS9nLGV0PS9cXFxcKFtcXGRhLWZBLUZdezEsNn1bXFx4MjBcXHRcXHJcXG5cXGZdP3wuKS9nLHR0PWZ1bmN0aW9uKGUsdCl7dmFyIG49XCIweFwiK3QtNjU1MzY7cmV0dXJuIG4hPT1uP3Q6MD5uP1N0cmluZy5mcm9tQ2hhckNvZGUobis2NTUzNik6U3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NnxuPj4xMCw1NjMyMHwxMDIzJm4pfTt0cnl7cS5jYWxsKHcuZG9jdW1lbnRFbGVtZW50LmNoaWxkTm9kZXMsMClbMF0ubm9kZVR5cGV9Y2F0Y2gobnQpe3E9ZnVuY3Rpb24oZSl7dmFyIHQsbj1bXTt3aGlsZSh0PXRoaXNbZSsrXSluLnB1c2godCk7cmV0dXJuIG59fWZ1bmN0aW9uIHJ0KGUpe3JldHVybiBZLnRlc3QoZStcIlwiKX1mdW5jdGlvbiBpdCgpe3ZhciBlLHQ9W107cmV0dXJuIGU9ZnVuY3Rpb24obixyKXtyZXR1cm4gdC5wdXNoKG4rPVwiIFwiKT5pLmNhY2hlTGVuZ3RoJiZkZWxldGUgZVt0LnNoaWZ0KCldLGVbbl09cn19ZnVuY3Rpb24gb3QoZSl7cmV0dXJuIGVbeF09ITAsZX1mdW5jdGlvbiBhdChlKXt2YXIgdD1wLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dHJ5e3JldHVybiBlKHQpfWNhdGNoKG4pe3JldHVybiExfWZpbmFsbHl7dD1udWxsfX1mdW5jdGlvbiBzdChlLHQsbixyKXt2YXIgaSxvLGEscyx1LGwsZixnLG0sdjtpZigodD90Lm93bmVyRG9jdW1lbnR8fHQ6dykhPT1wJiZjKHQpLHQ9dHx8cCxuPW58fFtdLCFlfHxcInN0cmluZ1wiIT10eXBlb2YgZSlyZXR1cm4gbjtpZigxIT09KHM9dC5ub2RlVHlwZSkmJjkhPT1zKXJldHVybltdO2lmKCFkJiYhcil7aWYoaT1KLmV4ZWMoZSkpaWYoYT1pWzFdKXtpZig5PT09cyl7aWYobz10LmdldEVsZW1lbnRCeUlkKGEpLCFvfHwhby5wYXJlbnROb2RlKXJldHVybiBuO2lmKG8uaWQ9PT1hKXJldHVybiBuLnB1c2gobyksbn1lbHNlIGlmKHQub3duZXJEb2N1bWVudCYmKG89dC5vd25lckRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpKSYmeSh0LG8pJiZvLmlkPT09YSlyZXR1cm4gbi5wdXNoKG8pLG59ZWxzZXtpZihpWzJdKXJldHVybiBILmFwcGx5KG4scS5jYWxsKHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSksMCkpLG47aWYoKGE9aVszXSkmJlQuZ2V0QnlDbGFzc05hbWUmJnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gSC5hcHBseShuLHEuY2FsbCh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYSksMCkpLG59aWYoVC5xc2EmJiFoLnRlc3QoZSkpe2lmKGY9ITAsZz14LG09dCx2PTk9PT1zJiZlLDE9PT1zJiZcIm9iamVjdFwiIT09dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXtsPWZ0KGUpLChmPXQuZ2V0QXR0cmlidXRlKFwiaWRcIikpP2c9Zi5yZXBsYWNlKEssXCJcXFxcJCZcIik6dC5zZXRBdHRyaWJ1dGUoXCJpZFwiLGcpLGc9XCJbaWQ9J1wiK2crXCInXSBcIix1PWwubGVuZ3RoO3doaWxlKHUtLSlsW3VdPWcrZHQobFt1XSk7bT1WLnRlc3QoZSkmJnQucGFyZW50Tm9kZXx8dCx2PWwuam9pbihcIixcIil9aWYodil0cnl7cmV0dXJuIEguYXBwbHkobixxLmNhbGwobS5xdWVyeVNlbGVjdG9yQWxsKHYpLDApKSxufWNhdGNoKGIpe31maW5hbGx5e2Z8fHQucmVtb3ZlQXR0cmlidXRlKFwiaWRcIil9fX1yZXR1cm4gd3QoZS5yZXBsYWNlKFcsXCIkMVwiKSx0LG4scil9YT1zdC5pc1hNTD1mdW5jdGlvbihlKXt2YXIgdD1lJiYoZS5vd25lckRvY3VtZW50fHxlKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIHQ/XCJIVE1MXCIhPT10Lm5vZGVOYW1lOiExfSxjPXN0LnNldERvY3VtZW50PWZ1bmN0aW9uKGUpe3ZhciBuPWU/ZS5vd25lckRvY3VtZW50fHxlOnc7cmV0dXJuIG4hPT1wJiY5PT09bi5ub2RlVHlwZSYmbi5kb2N1bWVudEVsZW1lbnQ/KHA9bixmPW4uZG9jdW1lbnRFbGVtZW50LGQ9YShuKSxULnRhZ05hbWVOb0NvbW1lbnRzPWF0KGZ1bmN0aW9uKGUpe3JldHVybiBlLmFwcGVuZENoaWxkKG4uY3JlYXRlQ29tbWVudChcIlwiKSksIWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLmxlbmd0aH0pLFQuYXR0cmlidXRlcz1hdChmdW5jdGlvbihlKXtlLmlubmVySFRNTD1cIjxzZWxlY3Q+PC9zZWxlY3Q+XCI7dmFyIHQ9dHlwZW9mIGUubGFzdENoaWxkLmdldEF0dHJpYnV0ZShcIm11bHRpcGxlXCIpO3JldHVyblwiYm9vbGVhblwiIT09dCYmXCJzdHJpbmdcIiE9PXR9KSxULmdldEJ5Q2xhc3NOYW1lPWF0KGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD1cIjxkaXYgY2xhc3M9J2hpZGRlbiBlJz48L2Rpdj48ZGl2IGNsYXNzPSdoaWRkZW4nPjwvZGl2PlwiLGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZVwiKS5sZW5ndGg/KGUubGFzdENoaWxkLmNsYXNzTmFtZT1cImVcIiwyPT09ZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZVwiKS5sZW5ndGgpOiExfSksVC5nZXRCeU5hbWU9YXQoZnVuY3Rpb24oZSl7ZS5pZD14KzAsZS5pbm5lckhUTUw9XCI8YSBuYW1lPSdcIit4K1wiJz48L2E+PGRpdiBuYW1lPSdcIit4K1wiJz48L2Rpdj5cIixmLmluc2VydEJlZm9yZShlLGYuZmlyc3RDaGlsZCk7dmFyIHQ9bi5nZXRFbGVtZW50c0J5TmFtZSYmbi5nZXRFbGVtZW50c0J5TmFtZSh4KS5sZW5ndGg9PT0yK24uZ2V0RWxlbWVudHNCeU5hbWUoeCswKS5sZW5ndGg7cmV0dXJuIFQuZ2V0SWROb3ROYW1lPSFuLmdldEVsZW1lbnRCeUlkKHgpLGYucmVtb3ZlQ2hpbGQoZSksdH0pLGkuYXR0ckhhbmRsZT1hdChmdW5jdGlvbihlKXtyZXR1cm4gZS5pbm5lckhUTUw9XCI8YSBocmVmPScjJz48L2E+XCIsZS5maXJzdENoaWxkJiZ0eXBlb2YgZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSE9PUEmJlwiI1wiPT09ZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcImhyZWZcIil9KT97fTp7aHJlZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIsMil9LHR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKFwidHlwZVwiKX19LFQuZ2V0SWROb3ROYW1lPyhpLmZpbmQuSUQ9ZnVuY3Rpb24oZSx0KXtpZih0eXBlb2YgdC5nZXRFbGVtZW50QnlJZCE9PUEmJiFkKXt2YXIgbj10LmdldEVsZW1lbnRCeUlkKGUpO3JldHVybiBuJiZuLnBhcmVudE5vZGU/W25dOltdfX0saS5maWx0ZXIuSUQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKGV0LHR0KTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKFwiaWRcIik9PT10fX0pOihpLmZpbmQuSUQ9ZnVuY3Rpb24oZSxuKXtpZih0eXBlb2Ygbi5nZXRFbGVtZW50QnlJZCE9PUEmJiFkKXt2YXIgcj1uLmdldEVsZW1lbnRCeUlkKGUpO3JldHVybiByP3IuaWQ9PT1lfHx0eXBlb2Ygci5nZXRBdHRyaWJ1dGVOb2RlIT09QSYmci5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIikudmFsdWU9PT1lP1tyXTp0OltdfX0saS5maWx0ZXIuSUQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKGV0LHR0KTtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49dHlwZW9mIGUuZ2V0QXR0cmlidXRlTm9kZSE9PUEmJmUuZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpO3JldHVybiBuJiZuLnZhbHVlPT09dH19KSxpLmZpbmQuVEFHPVQudGFnTmFtZU5vQ29tbWVudHM/ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdHlwZW9mIG4uZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1BP24uZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk6dH06ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9MCxvPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk7aWYoXCIqXCI9PT1lKXt3aGlsZShuPW9baSsrXSkxPT09bi5ub2RlVHlwZSYmci5wdXNoKG4pO3JldHVybiByfXJldHVybiBvfSxpLmZpbmQuTkFNRT1ULmdldEJ5TmFtZSYmZnVuY3Rpb24oZSxuKXtyZXR1cm4gdHlwZW9mIG4uZ2V0RWxlbWVudHNCeU5hbWUhPT1BP24uZ2V0RWxlbWVudHNCeU5hbWUobmFtZSk6dH0saS5maW5kLkNMQVNTPVQuZ2V0QnlDbGFzc05hbWUmJmZ1bmN0aW9uKGUsbil7cmV0dXJuIHR5cGVvZiBuLmdldEVsZW1lbnRzQnlDbGFzc05hbWU9PT1BfHxkP3Q6bi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGUpfSxnPVtdLGg9W1wiOmZvY3VzXCJdLChULnFzYT1ydChuLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGF0KGZ1bmN0aW9uKGUpe2UuaW5uZXJIVE1MPVwiPHNlbGVjdD48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PlwiLGUucXVlcnlTZWxlY3RvckFsbChcIltzZWxlY3RlZF1cIikubGVuZ3RofHxoLnB1c2goXCJcXFxcW1wiK18rXCIqKD86Y2hlY2tlZHxkaXNhYmxlZHxpc21hcHxtdWx0aXBsZXxyZWFkb25seXxzZWxlY3RlZHx2YWx1ZSlcIiksZS5xdWVyeVNlbGVjdG9yQWxsKFwiOmNoZWNrZWRcIikubGVuZ3RofHxoLnB1c2goXCI6Y2hlY2tlZFwiKX0pLGF0KGZ1bmN0aW9uKGUpe2UuaW5uZXJIVE1MPVwiPGlucHV0IHR5cGU9J2hpZGRlbicgaT0nJy8+XCIsZS5xdWVyeVNlbGVjdG9yQWxsKFwiW2lePScnXVwiKS5sZW5ndGgmJmgucHVzaChcIlsqXiRdPVwiK18rXCIqKD86XFxcIlxcXCJ8JycpXCIpLGUucXVlcnlTZWxlY3RvckFsbChcIjplbmFibGVkXCIpLmxlbmd0aHx8aC5wdXNoKFwiOmVuYWJsZWRcIixcIjpkaXNhYmxlZFwiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqLDp4XCIpLGgucHVzaChcIiwuKjpcIil9KSksKFQubWF0Y2hlc1NlbGVjdG9yPXJ0KG09Zi5tYXRjaGVzU2VsZWN0b3J8fGYubW96TWF0Y2hlc1NlbGVjdG9yfHxmLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8Zi5vTWF0Y2hlc1NlbGVjdG9yfHxmLm1zTWF0Y2hlc1NlbGVjdG9yKSkmJmF0KGZ1bmN0aW9uKGUpe1QuZGlzY29ubmVjdGVkTWF0Y2g9bS5jYWxsKGUsXCJkaXZcIiksbS5jYWxsKGUsXCJbcyE9JyddOnhcIiksZy5wdXNoKFwiIT1cIixSKX0pLGg9UmVnRXhwKGguam9pbihcInxcIikpLGc9UmVnRXhwKGcuam9pbihcInxcIikpLHk9cnQoZi5jb250YWlucyl8fGYuY29tcGFyZURvY3VtZW50UG9zaXRpb24/ZnVuY3Rpb24oZSx0KXt2YXIgbj05PT09ZS5ub2RlVHlwZT9lLmRvY3VtZW50RWxlbWVudDplLHI9dCYmdC5wYXJlbnROb2RlO3JldHVybiBlPT09cnx8ISghcnx8MSE9PXIubm9kZVR5cGV8fCEobi5jb250YWlucz9uLmNvbnRhaW5zKHIpOmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24ocikpKX06ZnVuY3Rpb24oZSx0KXtpZih0KXdoaWxlKHQ9dC5wYXJlbnROb2RlKWlmKHQ9PT1lKXJldHVybiEwO3JldHVybiExfSx2PWYuY29tcGFyZURvY3VtZW50UG9zaXRpb24/ZnVuY3Rpb24oZSx0KXt2YXIgcjtyZXR1cm4gZT09PXQ/KHU9ITAsMCk6KHI9dC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0KSk/MSZyfHxlLnBhcmVudE5vZGUmJjExPT09ZS5wYXJlbnROb2RlLm5vZGVUeXBlP2U9PT1ufHx5KHcsZSk/LTE6dD09PW58fHkodyx0KT8xOjA6NCZyPy0xOjE6ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj8tMToxfTpmdW5jdGlvbihlLHQpe3ZhciByLGk9MCxvPWUucGFyZW50Tm9kZSxhPXQucGFyZW50Tm9kZSxzPVtlXSxsPVt0XTtpZihlPT09dClyZXR1cm4gdT0hMCwwO2lmKCFvfHwhYSlyZXR1cm4gZT09PW4/LTE6dD09PW4/MTpvPy0xOmE/MTowO2lmKG89PT1hKXJldHVybiB1dChlLHQpO3I9ZTt3aGlsZShyPXIucGFyZW50Tm9kZSlzLnVuc2hpZnQocik7cj10O3doaWxlKHI9ci5wYXJlbnROb2RlKWwudW5zaGlmdChyKTt3aGlsZShzW2ldPT09bFtpXSlpKys7cmV0dXJuIGk/dXQoc1tpXSxsW2ldKTpzW2ldPT09dz8tMTpsW2ldPT09dz8xOjB9LHU9ITEsWzAsMF0uc29ydCh2KSxULmRldGVjdER1cGxpY2F0ZXM9dSxwKTpwfSxzdC5tYXRjaGVzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHN0KGUsbnVsbCxudWxsLHQpfSxzdC5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oZSx0KXtpZigoZS5vd25lckRvY3VtZW50fHxlKSE9PXAmJmMoZSksdD10LnJlcGxhY2UoWixcIj0nJDEnXVwiKSwhKCFULm1hdGNoZXNTZWxlY3Rvcnx8ZHx8ZyYmZy50ZXN0KHQpfHxoLnRlc3QodCkpKXRyeXt2YXIgbj1tLmNhbGwoZSx0KTtpZihufHxULmRpc2Nvbm5lY3RlZE1hdGNofHxlLmRvY3VtZW50JiYxMSE9PWUuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIG59Y2F0Y2gocil7fXJldHVybiBzdCh0LHAsbnVsbCxbZV0pLmxlbmd0aD4wfSxzdC5jb250YWlucz1mdW5jdGlvbihlLHQpe3JldHVybihlLm93bmVyRG9jdW1lbnR8fGUpIT09cCYmYyhlKSx5KGUsdCl9LHN0LmF0dHI9ZnVuY3Rpb24oZSx0KXt2YXIgbjtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxlKSE9PXAmJmMoZSksZHx8KHQ9dC50b0xvd2VyQ2FzZSgpKSwobj1pLmF0dHJIYW5kbGVbdF0pP24oZSk6ZHx8VC5hdHRyaWJ1dGVzP2UuZ2V0QXR0cmlidXRlKHQpOigobj1lLmdldEF0dHJpYnV0ZU5vZGUodCkpfHxlLmdldEF0dHJpYnV0ZSh0KSkmJmVbdF09PT0hMD90Om4mJm4uc3BlY2lmaWVkP24udmFsdWU6bnVsbH0sc3QuZXJyb3I9ZnVuY3Rpb24oZSl7dGhyb3cgRXJyb3IoXCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiBcIitlKX0sc3QudW5pcXVlU29ydD1mdW5jdGlvbihlKXt2YXIgdCxuPVtdLHI9MSxpPTA7aWYodT0hVC5kZXRlY3REdXBsaWNhdGVzLGUuc29ydCh2KSx1KXtmb3IoO3Q9ZVtyXTtyKyspdD09PWVbci0xXSYmKGk9bi5wdXNoKHIpKTt3aGlsZShpLS0pZS5zcGxpY2UobltpXSwxKX1yZXR1cm4gZX07ZnVuY3Rpb24gdXQoZSx0KXt2YXIgbj10JiZlLHI9biYmKH50LnNvdXJjZUluZGV4fHxqKS0ofmUuc291cmNlSW5kZXh8fGopO2lmKHIpcmV0dXJuIHI7aWYobil3aGlsZShuPW4ubmV4dFNpYmxpbmcpaWYobj09PXQpcmV0dXJuLTE7cmV0dXJuIGU/MTotMX1mdW5jdGlvbiBsdChlKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PW4mJnQudHlwZT09PWV9fWZ1bmN0aW9uIGN0KGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKFwiaW5wdXRcIj09PW58fFwiYnV0dG9uXCI9PT1uKSYmdC50eXBlPT09ZX19ZnVuY3Rpb24gcHQoZSl7cmV0dXJuIG90KGZ1bmN0aW9uKHQpe3JldHVybiB0PSt0LG90KGZ1bmN0aW9uKG4scil7dmFyIGksbz1lKFtdLG4ubGVuZ3RoLHQpLGE9by5sZW5ndGg7d2hpbGUoYS0tKW5baT1vW2FdXSYmKG5baV09IShyW2ldPW5baV0pKX0pfSl9bz1zdC5nZXRUZXh0PWZ1bmN0aW9uKGUpe3ZhciB0LG49XCJcIixyPTAsaT1lLm5vZGVUeXBlO2lmKGkpe2lmKDE9PT1pfHw5PT09aXx8MTE9PT1pKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZS50ZXh0Q29udGVudClyZXR1cm4gZS50ZXh0Q29udGVudDtmb3IoZT1lLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpbis9byhlKX1lbHNlIGlmKDM9PT1pfHw0PT09aSlyZXR1cm4gZS5ub2RlVmFsdWV9ZWxzZSBmb3IoO3Q9ZVtyXTtyKyspbis9byh0KTtyZXR1cm4gbn0saT1zdC5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpvdCxtYXRjaDpVLGZpbmQ6e30scmVsYXRpdmU6e1wiPlwiOntkaXI6XCJwYXJlbnROb2RlXCIsZmlyc3Q6ITB9LFwiIFwiOntkaXI6XCJwYXJlbnROb2RlXCJ9LFwiK1wiOntkaXI6XCJwcmV2aW91c1NpYmxpbmdcIixmaXJzdDohMH0sXCJ+XCI6e2RpcjpcInByZXZpb3VzU2libGluZ1wifX0scHJlRmlsdGVyOntBVFRSOmZ1bmN0aW9uKGUpe3JldHVybiBlWzFdPWVbMV0ucmVwbGFjZShldCx0dCksZVszXT0oZVs0XXx8ZVs1XXx8XCJcIikucmVwbGFjZShldCx0dCksXCJ+PVwiPT09ZVsyXSYmKGVbM109XCIgXCIrZVszXStcIiBcIiksZS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnRvTG93ZXJDYXNlKCksXCJudGhcIj09PWVbMV0uc2xpY2UoMCwzKT8oZVszXXx8c3QuZXJyb3IoZVswXSksZVs0XT0rKGVbNF0/ZVs1XSsoZVs2XXx8MSk6MiooXCJldmVuXCI9PT1lWzNdfHxcIm9kZFwiPT09ZVszXSkpLGVbNV09KyhlWzddK2VbOF18fFwib2RkXCI9PT1lWzNdKSk6ZVszXSYmc3QuZXJyb3IoZVswXSksZX0sUFNFVURPOmZ1bmN0aW9uKGUpe3ZhciB0LG49IWVbNV0mJmVbMl07cmV0dXJuIFUuQ0hJTEQudGVzdChlWzBdKT9udWxsOihlWzRdP2VbMl09ZVs0XTpuJiZ6LnRlc3QobikmJih0PWZ0KG4sITApKSYmKHQ9bi5pbmRleE9mKFwiKVwiLG4ubGVuZ3RoLXQpLW4ubGVuZ3RoKSYmKGVbMF09ZVswXS5zbGljZSgwLHQpLGVbMl09bi5zbGljZSgwLHQpKSxlLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oZSl7cmV0dXJuXCIqXCI9PT1lP2Z1bmN0aW9uKCl7cmV0dXJuITB9OihlPWUucmVwbGFjZShldCx0dCkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbih0KXtyZXR1cm4gdC5ub2RlTmFtZSYmdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09ZX0pfSxDTEFTUzpmdW5jdGlvbihlKXt2YXIgdD1rW2UrXCIgXCJdO3JldHVybiB0fHwodD1SZWdFeHAoXCIoXnxcIitfK1wiKVwiK2UrXCIoXCIrXytcInwkKVwiKSkmJmsoZSxmdW5jdGlvbihlKXtyZXR1cm4gdC50ZXN0KGUuY2xhc3NOYW1lfHx0eXBlb2YgZS5nZXRBdHRyaWJ1dGUhPT1BJiZlLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKX0pfSxBVFRSOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIGk9c3QuYXR0cihyLGUpO3JldHVybiBudWxsPT1pP1wiIT1cIj09PXQ6dD8oaSs9XCJcIixcIj1cIj09PXQ/aT09PW46XCIhPVwiPT09dD9pIT09bjpcIl49XCI9PT10P24mJjA9PT1pLmluZGV4T2Yobik6XCIqPVwiPT09dD9uJiZpLmluZGV4T2Yobik+LTE6XCIkPVwiPT09dD9uJiZpLnNsaWNlKC1uLmxlbmd0aCk9PT1uOlwifj1cIj09PXQ/KFwiIFwiK2krXCIgXCIpLmluZGV4T2Yobik+LTE6XCJ8PVwiPT09dD9pPT09bnx8aS5zbGljZSgwLG4ubGVuZ3RoKzEpPT09bitcIi1cIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvPVwibnRoXCIhPT1lLnNsaWNlKDAsMyksYT1cImxhc3RcIiE9PWUuc2xpY2UoLTQpLHM9XCJvZi10eXBlXCI9PT10O3JldHVybiAxPT09ciYmMD09PWk/ZnVuY3Rpb24oZSl7cmV0dXJuISFlLnBhcmVudE5vZGV9OmZ1bmN0aW9uKHQsbix1KXt2YXIgbCxjLHAsZixkLGgsZz1vIT09YT9cIm5leHRTaWJsaW5nXCI6XCJwcmV2aW91c1NpYmxpbmdcIixtPXQucGFyZW50Tm9kZSx5PXMmJnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSx2PSF1JiYhcztpZihtKXtpZihvKXt3aGlsZShnKXtwPXQ7d2hpbGUocD1wW2ddKWlmKHM/cC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09eToxPT09cC5ub2RlVHlwZSlyZXR1cm4hMTtoPWc9XCJvbmx5XCI9PT1lJiYhaCYmXCJuZXh0U2libGluZ1wifXJldHVybiEwfWlmKGg9W2E/bS5maXJzdENoaWxkOm0ubGFzdENoaWxkXSxhJiZ2KXtjPW1beF18fChtW3hdPXt9KSxsPWNbZV18fFtdLGQ9bFswXT09PU4mJmxbMV0sZj1sWzBdPT09TiYmbFsyXSxwPWQmJm0uY2hpbGROb2Rlc1tkXTt3aGlsZShwPSsrZCYmcCYmcFtnXXx8KGY9ZD0wKXx8aC5wb3AoKSlpZigxPT09cC5ub2RlVHlwZSYmKytmJiZwPT09dCl7Y1tlXT1bTixkLGZdO2JyZWFrfX1lbHNlIGlmKHYmJihsPSh0W3hdfHwodFt4XT17fSkpW2VdKSYmbFswXT09PU4pZj1sWzFdO2Vsc2Ugd2hpbGUocD0rK2QmJnAmJnBbZ118fChmPWQ9MCl8fGgucG9wKCkpaWYoKHM/cC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09eToxPT09cC5ub2RlVHlwZSkmJisrZiYmKHYmJigocFt4XXx8KHBbeF09e30pKVtlXT1bTixmXSkscD09PXQpKWJyZWFrO3JldHVybiBmLT1pLGY9PT1yfHwwPT09ZiVyJiZmL3I+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1pLnBzZXVkb3NbZV18fGkuc2V0RmlsdGVyc1tlLnRvTG93ZXJDYXNlKCldfHxzdC5lcnJvcihcInVuc3VwcG9ydGVkIHBzZXVkbzogXCIrZSk7cmV0dXJuIHJbeF0/cih0KTpyLmxlbmd0aD4xPyhuPVtlLGUsXCJcIix0XSxpLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoZS50b0xvd2VyQ2FzZSgpKT9vdChmdW5jdGlvbihlLG4pe3ZhciBpLG89cihlLHQpLGE9by5sZW5ndGg7d2hpbGUoYS0tKWk9TS5jYWxsKGUsb1thXSksZVtpXT0hKG5baV09b1thXSl9KTpmdW5jdGlvbihlKXtyZXR1cm4gcihlLDAsbil9KTpyfX0scHNldWRvczp7bm90Om90KGZ1bmN0aW9uKGUpe3ZhciB0PVtdLG49W10scj1zKGUucmVwbGFjZShXLFwiJDFcIikpO3JldHVybiByW3hdP290KGZ1bmN0aW9uKGUsdCxuLGkpe3ZhciBvLGE9cihlLG51bGwsaSxbXSkscz1lLmxlbmd0aDt3aGlsZShzLS0pKG89YVtzXSkmJihlW3NdPSEodFtzXT1vKSl9KTpmdW5jdGlvbihlLGksbyl7cmV0dXJuIHRbMF09ZSxyKHQsbnVsbCxvLG4pLCFuLnBvcCgpfX0pLGhhczpvdChmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIHN0KGUsdCkubGVuZ3RoPjB9fSksY29udGFpbnM6b3QoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybih0LnRleHRDb250ZW50fHx0LmlubmVyVGV4dHx8byh0KSkuaW5kZXhPZihlKT4tMX19KSxsYW5nOm90KGZ1bmN0aW9uKGUpe3JldHVybiBYLnRlc3QoZXx8XCJcIil8fHN0LmVycm9yKFwidW5zdXBwb3J0ZWQgbGFuZzogXCIrZSksZT1lLnJlcGxhY2UoZXQsdHQpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24odCl7dmFyIG47ZG8gaWYobj1kP3QuZ2V0QXR0cmlidXRlKFwieG1sOmxhbmdcIil8fHQuZ2V0QXR0cmlidXRlKFwibGFuZ1wiKTp0LmxhbmcpcmV0dXJuIG49bi50b0xvd2VyQ2FzZSgpLG49PT1lfHwwPT09bi5pbmRleE9mKGUrXCItXCIpO3doaWxlKCh0PXQucGFyZW50Tm9kZSkmJjE9PT10Lm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24odCl7dmFyIG49ZS5sb2NhdGlvbiYmZS5sb2NhdGlvbi5oYXNoO3JldHVybiBuJiZuLnNsaWNlKDEpPT09dC5pZH0scm9vdDpmdW5jdGlvbihlKXtyZXR1cm4gZT09PWZ9LGZvY3VzOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09cC5hY3RpdmVFbGVtZW50JiYoIXAuaGFzRm9jdXN8fHAuaGFzRm9jdXMoKSkmJiEhKGUudHlwZXx8ZS5ocmVmfHx+ZS50YWJJbmRleCl9LGVuYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWQ9PT0hMX0sZGlzYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWQ9PT0hMH0sY2hlY2tlZDpmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09dCYmISFlLmNoZWNrZWR8fFwib3B0aW9uXCI9PT10JiYhIWUuc2VsZWN0ZWR9LHNlbGVjdGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLnBhcmVudE5vZGUmJmUucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LGUuc2VsZWN0ZWQ9PT0hMH0sZW1wdHk6ZnVuY3Rpb24oZSl7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWlmKGUubm9kZU5hbWU+XCJAXCJ8fDM9PT1lLm5vZGVUeXBlfHw0PT09ZS5ub2RlVHlwZSlyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGUpe3JldHVybiFpLnBzZXVkb3MuZW1wdHkoZSl9LGhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gUS50ZXN0KGUubm9kZU5hbWUpfSxpbnB1dDpmdW5jdGlvbihlKXtyZXR1cm4gRy50ZXN0KGUubm9kZU5hbWUpfSxidXR0b246ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PXQmJlwiYnV0dG9uXCI9PT1lLnR5cGV8fFwiYnV0dG9uXCI9PT10fSx0ZXh0OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVyblwiaW5wdXRcIj09PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmXCJ0ZXh0XCI9PT1lLnR5cGUmJihudWxsPT0odD1lLmdldEF0dHJpYnV0ZShcInR5cGVcIikpfHx0LnRvTG93ZXJDYXNlKCk9PT1lLnR5cGUpfSxmaXJzdDpwdChmdW5jdGlvbigpe3JldHVyblswXX0pLGxhc3Q6cHQoZnVuY3Rpb24oZSx0KXtyZXR1cm5bdC0xXX0pLGVxOnB0KGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm5bMD5uP24rdDpuXX0pLGV2ZW46cHQoZnVuY3Rpb24oZSx0KXt2YXIgbj0wO2Zvcig7dD5uO24rPTIpZS5wdXNoKG4pO3JldHVybiBlfSksb2RkOnB0KGZ1bmN0aW9uKGUsdCl7dmFyIG49MTtmb3IoO3Q+bjtuKz0yKWUucHVzaChuKTtyZXR1cm4gZX0pLGx0OnB0KGZ1bmN0aW9uKGUsdCxuKXt2YXIgcj0wPm4/bit0Om47Zm9yKDstLXI+PTA7KWUucHVzaChyKTtyZXR1cm4gZX0pLGd0OnB0KGZ1bmN0aW9uKGUsdCxuKXt2YXIgcj0wPm4/bit0Om47Zm9yKDt0PisrcjspZS5wdXNoKHIpO3JldHVybiBlfSl9fTtmb3IobiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlpLnBzZXVkb3Nbbl09bHQobik7Zm9yKG4gaW57c3VibWl0OiEwLHJlc2V0OiEwfSlpLnBzZXVkb3Nbbl09Y3Qobik7ZnVuY3Rpb24gZnQoZSx0KXt2YXIgbixyLG8sYSxzLHUsbCxjPUVbZStcIiBcIl07aWYoYylyZXR1cm4gdD8wOmMuc2xpY2UoMCk7cz1lLHU9W10sbD1pLnByZUZpbHRlcjt3aGlsZShzKXsoIW58fChyPSQuZXhlYyhzKSkpJiYociYmKHM9cy5zbGljZShyWzBdLmxlbmd0aCl8fHMpLHUucHVzaChvPVtdKSksbj0hMSwocj1JLmV4ZWMocykpJiYobj1yLnNoaWZ0KCksby5wdXNoKHt2YWx1ZTpuLHR5cGU6clswXS5yZXBsYWNlKFcsXCIgXCIpfSkscz1zLnNsaWNlKG4ubGVuZ3RoKSk7Zm9yKGEgaW4gaS5maWx0ZXIpIShyPVVbYV0uZXhlYyhzKSl8fGxbYV0mJiEocj1sW2FdKHIpKXx8KG49ci5zaGlmdCgpLG8ucHVzaCh7dmFsdWU6bix0eXBlOmEsbWF0Y2hlczpyfSkscz1zLnNsaWNlKG4ubGVuZ3RoKSk7aWYoIW4pYnJlYWt9cmV0dXJuIHQ/cy5sZW5ndGg6cz9zdC5lcnJvcihlKTpFKGUsdSkuc2xpY2UoMCl9ZnVuY3Rpb24gZHQoZSl7dmFyIHQ9MCxuPWUubGVuZ3RoLHI9XCJcIjtmb3IoO24+dDt0Kyspcis9ZVt0XS52YWx1ZTtyZXR1cm4gcn1mdW5jdGlvbiBodChlLHQsbil7dmFyIGk9dC5kaXIsbz1uJiZcInBhcmVudE5vZGVcIj09PWksYT1DKys7cmV0dXJuIHQuZmlyc3Q/ZnVuY3Rpb24odCxuLHIpe3doaWxlKHQ9dFtpXSlpZigxPT09dC5ub2RlVHlwZXx8bylyZXR1cm4gZSh0LG4scil9OmZ1bmN0aW9uKHQsbixzKXt2YXIgdSxsLGMscD1OK1wiIFwiK2E7aWYocyl7d2hpbGUodD10W2ldKWlmKCgxPT09dC5ub2RlVHlwZXx8bykmJmUodCxuLHMpKXJldHVybiEwfWVsc2Ugd2hpbGUodD10W2ldKWlmKDE9PT10Lm5vZGVUeXBlfHxvKWlmKGM9dFt4XXx8KHRbeF09e30pLChsPWNbaV0pJiZsWzBdPT09cCl7aWYoKHU9bFsxXSk9PT0hMHx8dT09PXIpcmV0dXJuIHU9PT0hMH1lbHNlIGlmKGw9Y1tpXT1bcF0sbFsxXT1lKHQsbixzKXx8cixsWzFdPT09ITApcmV0dXJuITB9fWZ1bmN0aW9uIGd0KGUpe3JldHVybiBlLmxlbmd0aD4xP2Z1bmN0aW9uKHQsbixyKXt2YXIgaT1lLmxlbmd0aDt3aGlsZShpLS0paWYoIWVbaV0odCxuLHIpKXJldHVybiExO3JldHVybiEwfTplWzBdfWZ1bmN0aW9uIG10KGUsdCxuLHIsaSl7dmFyIG8sYT1bXSxzPTAsdT1lLmxlbmd0aCxsPW51bGwhPXQ7Zm9yKDt1PnM7cysrKShvPWVbc10pJiYoIW58fG4obyxyLGkpKSYmKGEucHVzaChvKSxsJiZ0LnB1c2gocykpO3JldHVybiBhfWZ1bmN0aW9uIHl0KGUsdCxuLHIsaSxvKXtyZXR1cm4gciYmIXJbeF0mJihyPXl0KHIpKSxpJiYhaVt4XSYmKGk9eXQoaSxvKSksb3QoZnVuY3Rpb24obyxhLHMsdSl7dmFyIGwsYyxwLGY9W10sZD1bXSxoPWEubGVuZ3RoLGc9b3x8eHQodHx8XCIqXCIscy5ub2RlVHlwZT9bc106cyxbXSksbT0hZXx8IW8mJnQ/ZzptdChnLGYsZSxzLHUpLHk9bj9pfHwobz9lOmh8fHIpP1tdOmE6bTtpZihuJiZuKG0seSxzLHUpLHIpe2w9bXQoeSxkKSxyKGwsW10scyx1KSxjPWwubGVuZ3RoO3doaWxlKGMtLSkocD1sW2NdKSYmKHlbZFtjXV09IShtW2RbY11dPXApKX1pZihvKXtpZihpfHxlKXtpZihpKXtsPVtdLGM9eS5sZW5ndGg7d2hpbGUoYy0tKShwPXlbY10pJiZsLnB1c2gobVtjXT1wKTtpKG51bGwseT1bXSxsLHUpfWM9eS5sZW5ndGg7d2hpbGUoYy0tKShwPXlbY10pJiYobD1pP00uY2FsbChvLHApOmZbY10pPi0xJiYob1tsXT0hKGFbbF09cCkpfX1lbHNlIHk9bXQoeT09PWE/eS5zcGxpY2UoaCx5Lmxlbmd0aCk6eSksaT9pKG51bGwsYSx5LHUpOkguYXBwbHkoYSx5KX0pfWZ1bmN0aW9uIHZ0KGUpe3ZhciB0LG4scixvPWUubGVuZ3RoLGE9aS5yZWxhdGl2ZVtlWzBdLnR5cGVdLHM9YXx8aS5yZWxhdGl2ZVtcIiBcIl0sdT1hPzE6MCxjPWh0KGZ1bmN0aW9uKGUpe3JldHVybiBlPT09dH0scywhMCkscD1odChmdW5jdGlvbihlKXtyZXR1cm4gTS5jYWxsKHQsZSk+LTF9LHMsITApLGY9W2Z1bmN0aW9uKGUsbixyKXtyZXR1cm4hYSYmKHJ8fG4hPT1sKXx8KCh0PW4pLm5vZGVUeXBlP2MoZSxuLHIpOnAoZSxuLHIpKX1dO2Zvcig7bz51O3UrKylpZihuPWkucmVsYXRpdmVbZVt1XS50eXBlXSlmPVtodChndChmKSxuKV07ZWxzZXtpZihuPWkuZmlsdGVyW2VbdV0udHlwZV0uYXBwbHkobnVsbCxlW3VdLm1hdGNoZXMpLG5beF0pe2ZvcihyPSsrdTtvPnI7cisrKWlmKGkucmVsYXRpdmVbZVtyXS50eXBlXSlicmVhaztyZXR1cm4geXQodT4xJiZndChmKSx1PjEmJmR0KGUuc2xpY2UoMCx1LTEpKS5yZXBsYWNlKFcsXCIkMVwiKSxuLHI+dSYmdnQoZS5zbGljZSh1LHIpKSxvPnImJnZ0KGU9ZS5zbGljZShyKSksbz5yJiZkdChlKSl9Zi5wdXNoKG4pfXJldHVybiBndChmKX1mdW5jdGlvbiBidChlLHQpe3ZhciBuPTAsbz10Lmxlbmd0aD4wLGE9ZS5sZW5ndGg+MCxzPWZ1bmN0aW9uKHMsdSxjLGYsZCl7dmFyIGgsZyxtLHk9W10sdj0wLGI9XCIwXCIseD1zJiZbXSx3PW51bGwhPWQsVD1sLEM9c3x8YSYmaS5maW5kLlRBRyhcIipcIixkJiZ1LnBhcmVudE5vZGV8fHUpLGs9Tis9bnVsbD09VD8xOk1hdGgucmFuZG9tKCl8fC4xO2Zvcih3JiYobD11IT09cCYmdSxyPW4pO251bGwhPShoPUNbYl0pO2IrKyl7aWYoYSYmaCl7Zz0wO3doaWxlKG09ZVtnKytdKWlmKG0oaCx1LGMpKXtmLnB1c2goaCk7YnJlYWt9dyYmKE49ayxyPSsrbil9byYmKChoPSFtJiZoKSYmdi0tLHMmJngucHVzaChoKSl9aWYodis9YixvJiZiIT09dil7Zz0wO3doaWxlKG09dFtnKytdKW0oeCx5LHUsYyk7aWYocyl7aWYodj4wKXdoaWxlKGItLSl4W2JdfHx5W2JdfHwoeVtiXT1MLmNhbGwoZikpO3k9bXQoeSl9SC5hcHBseShmLHkpLHcmJiFzJiZ5Lmxlbmd0aD4wJiZ2K3QubGVuZ3RoPjEmJnN0LnVuaXF1ZVNvcnQoZil9cmV0dXJuIHcmJihOPWssbD1UKSx4fTtyZXR1cm4gbz9vdChzKTpzfXM9c3QuY29tcGlsZT1mdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT1bXSxvPVNbZStcIiBcIl07aWYoIW8pe3R8fCh0PWZ0KGUpKSxuPXQubGVuZ3RoO3doaWxlKG4tLSlvPXZ0KHRbbl0pLG9beF0/ci5wdXNoKG8pOmkucHVzaChvKTtvPVMoZSxidChpLHIpKX1yZXR1cm4gb307ZnVuY3Rpb24geHQoZSx0LG4pe3ZhciByPTAsaT10Lmxlbmd0aDtmb3IoO2k+cjtyKyspc3QoZSx0W3JdLG4pO3JldHVybiBufWZ1bmN0aW9uIHd0KGUsdCxuLHIpe3ZhciBvLGEsdSxsLGMscD1mdChlKTtpZighciYmMT09PXAubGVuZ3RoKXtpZihhPXBbMF09cFswXS5zbGljZSgwKSxhLmxlbmd0aD4yJiZcIklEXCI9PT0odT1hWzBdKS50eXBlJiY5PT09dC5ub2RlVHlwZSYmIWQmJmkucmVsYXRpdmVbYVsxXS50eXBlXSl7aWYodD1pLmZpbmQuSUQodS5tYXRjaGVzWzBdLnJlcGxhY2UoZXQsdHQpLHQpWzBdLCF0KXJldHVybiBuO2U9ZS5zbGljZShhLnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1vPVUubmVlZHNDb250ZXh0LnRlc3QoZSk/MDphLmxlbmd0aDt3aGlsZShvLS0pe2lmKHU9YVtvXSxpLnJlbGF0aXZlW2w9dS50eXBlXSlicmVhaztpZigoYz1pLmZpbmRbbF0pJiYocj1jKHUubWF0Y2hlc1swXS5yZXBsYWNlKGV0LHR0KSxWLnRlc3QoYVswXS50eXBlKSYmdC5wYXJlbnROb2RlfHx0KSkpe2lmKGEuc3BsaWNlKG8sMSksZT1yLmxlbmd0aCYmZHQoYSksIWUpcmV0dXJuIEguYXBwbHkobixxLmNhbGwociwwKSksbjticmVha319fXJldHVybiBzKGUscCkocix0LGQsbixWLnRlc3QoZSkpLG59aS5wc2V1ZG9zLm50aD1pLnBzZXVkb3MuZXE7ZnVuY3Rpb24gVHQoKXt9aS5maWx0ZXJzPVR0LnByb3RvdHlwZT1pLnBzZXVkb3MsaS5zZXRGaWx0ZXJzPW5ldyBUdCxjKCksc3QuYXR0cj1iLmF0dHIsYi5maW5kPXN0LGIuZXhwcj1zdC5zZWxlY3RvcnMsYi5leHByW1wiOlwiXT1iLmV4cHIucHNldWRvcyxiLnVuaXF1ZT1zdC51bmlxdWVTb3J0LGIudGV4dD1zdC5nZXRUZXh0LGIuaXNYTUxEb2M9c3QuaXNYTUwsYi5jb250YWlucz1zdC5jb250YWluc30oZSk7dmFyIGF0PS9VbnRpbCQvLHN0PS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLHV0PS9eLlteOiNcXFtcXC4sXSokLyxsdD1iLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LGN0PXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O2IuZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpPXRoaXMubGVuZ3RoO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXJldHVybiByPXRoaXMsdGhpcy5wdXNoU3RhY2soYihlKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodD0wO2k+dDt0KyspaWYoYi5jb250YWlucyhyW3RdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihuPVtdLHQ9MDtpPnQ7dCsrKWIuZmluZChlLHRoaXNbdF0sbik7cmV0dXJuIG49dGhpcy5wdXNoU3RhY2soaT4xP2IudW5pcXVlKG4pOm4pLG4uc2VsZWN0b3I9KHRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcitcIiBcIjpcIlwiKStlLG59LGhhczpmdW5jdGlvbihlKXt2YXIgdCxuPWIoZSx0aGlzKSxyPW4ubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih0PTA7cj50O3QrKylpZihiLmNvbnRhaW5zKHRoaXMsblt0XSkpcmV0dXJuITB9KX0sbm90OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhmdCh0aGlzLGUsITEpKX0sZmlsdGVyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhmdCh0aGlzLGUsITApKX0saXM6ZnVuY3Rpb24oZSl7cmV0dXJuISFlJiYoXCJzdHJpbmdcIj09dHlwZW9mIGU/bHQudGVzdChlKT9iKGUsdGhpcy5jb250ZXh0KS5pbmRleCh0aGlzWzBdKT49MDpiLmZpbHRlcihlLHRoaXMpLmxlbmd0aD4wOnRoaXMuZmlsdGVyKGUpLmxlbmd0aD4wKX0sY2xvc2VzdDpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MCxpPXRoaXMubGVuZ3RoLG89W10sYT1sdC50ZXN0KGUpfHxcInN0cmluZ1wiIT10eXBlb2YgZT9iKGUsdHx8dGhpcy5jb250ZXh0KTowO2Zvcig7aT5yO3IrKyl7bj10aGlzW3JdO3doaWxlKG4mJm4ub3duZXJEb2N1bWVudCYmbiE9PXQmJjExIT09bi5ub2RlVHlwZSl7aWYoYT9hLmluZGV4KG4pPi0xOmIuZmluZC5tYXRjaGVzU2VsZWN0b3IobixlKSl7by5wdXNoKG4pO2JyZWFrfW49bi5wYXJlbnROb2RlfX1yZXR1cm4gdGhpcy5wdXNoU3RhY2soby5sZW5ndGg+MT9iLnVuaXF1ZShvKTpvKX0saW5kZXg6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/XCJzdHJpbmdcIj09dHlwZW9mIGU/Yi5pbkFycmF5KHRoaXNbMF0sYihlKSk6Yi5pbkFycmF5KGUuanF1ZXJ5P2VbMF06ZSx0aGlzKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihlLHQpe3ZhciBuPVwic3RyaW5nXCI9PXR5cGVvZiBlP2IoZSx0KTpiLm1ha2VBcnJheShlJiZlLm5vZGVUeXBlP1tlXTplKSxyPWIubWVyZ2UodGhpcy5nZXQoKSxuKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soYi51bmlxdWUocikpfSxhZGRCYWNrOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmFkZChudWxsPT1lP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKGUpKX19KSxiLmZuLmFuZFNlbGY9Yi5mbi5hZGRCYWNrO2Z1bmN0aW9uIHB0KGUsdCl7ZG8gZT1lW3RdO3doaWxlKGUmJjEhPT1lLm5vZGVUeXBlKTtyZXR1cm4gZX1iLmVhY2goe3BhcmVudDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJjExIT09dC5ub2RlVHlwZT90Om51bGx9LHBhcmVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGIuZGlyKGUsXCJwYXJlbnROb2RlXCIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBiLmRpcihlLFwicGFyZW50Tm9kZVwiLG4pfSxuZXh0OmZ1bmN0aW9uKGUpe3JldHVybiBwdChlLFwibmV4dFNpYmxpbmdcIil9LHByZXY6ZnVuY3Rpb24oZSl7cmV0dXJuIHB0KGUsXCJwcmV2aW91c1NpYmxpbmdcIil9LG5leHRBbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIGIuZGlyKGUsXCJuZXh0U2libGluZ1wiKX0scHJldkFsbDpmdW5jdGlvbihlKXtyZXR1cm4gYi5kaXIoZSxcInByZXZpb3VzU2libGluZ1wiKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gYi5kaXIoZSxcIm5leHRTaWJsaW5nXCIsbil9LHByZXZVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGIuZGlyKGUsXCJwcmV2aW91c1NpYmxpbmdcIixuKX0sc2libGluZ3M6ZnVuY3Rpb24oZSl7cmV0dXJuIGIuc2libGluZygoZS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxlKX0sY2hpbGRyZW46ZnVuY3Rpb24oZSl7cmV0dXJuIGIuc2libGluZyhlLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihlKXtyZXR1cm4gYi5ub2RlTmFtZShlLFwiaWZyYW1lXCIpP2UuY29udGVudERvY3VtZW50fHxlLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ6Yi5tZXJnZShbXSxlLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24oZSx0KXtiLmZuW2VdPWZ1bmN0aW9uKG4scil7dmFyIGk9Yi5tYXAodGhpcyx0LG4pO3JldHVybiBhdC50ZXN0KGUpfHwocj1uKSxyJiZcInN0cmluZ1wiPT10eXBlb2YgciYmKGk9Yi5maWx0ZXIocixpKSksaT10aGlzLmxlbmd0aD4xJiYhY3RbZV0/Yi51bmlxdWUoaSk6aSx0aGlzLmxlbmd0aD4xJiZzdC50ZXN0KGUpJiYoaT1pLnJldmVyc2UoKSksdGhpcy5wdXNoU3RhY2soaSl9fSksYi5leHRlbmQoe2ZpbHRlcjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIG4mJihlPVwiOm5vdChcIitlK1wiKVwiKSwxPT09dC5sZW5ndGg/Yi5maW5kLm1hdGNoZXNTZWxlY3Rvcih0WzBdLGUpP1t0WzBdXTpbXTpiLmZpbmQubWF0Y2hlcyhlLHQpfSxkaXI6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpPVtdLG89ZVtuXTt3aGlsZShvJiY5IT09by5ub2RlVHlwZSYmKHI9PT10fHwxIT09by5ub2RlVHlwZXx8IWIobykuaXMocikpKTE9PT1vLm5vZGVUeXBlJiZpLnB1c2gobyksbz1vW25dO3JldHVybiBpfSxzaWJsaW5nOmZ1bmN0aW9uKGUsdCl7dmFyIG49W107Zm9yKDtlO2U9ZS5uZXh0U2libGluZykxPT09ZS5ub2RlVHlwZSYmZSE9PXQmJm4ucHVzaChlKTtyZXR1cm4gbn19KTtmdW5jdGlvbiBmdChlLHQsbil7aWYodD10fHwwLGIuaXNGdW5jdGlvbih0KSlyZXR1cm4gYi5ncmVwKGUsZnVuY3Rpb24oZSxyKXt2YXIgaT0hIXQuY2FsbChlLHIsZSk7cmV0dXJuIGk9PT1ufSk7aWYodC5ub2RlVHlwZSlyZXR1cm4gYi5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10PT09bn0pO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXt2YXIgcj1iLmdyZXAoZSxmdW5jdGlvbihlKXtyZXR1cm4gMT09PWUubm9kZVR5cGV9KTtpZih1dC50ZXN0KHQpKXJldHVybiBiLmZpbHRlcih0LHIsIW4pO3Q9Yi5maWx0ZXIodCxyKX1yZXR1cm4gYi5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGIuaW5BcnJheShlLHQpPj0wPT09bn0pfWZ1bmN0aW9uIGR0KGUpe3ZhciB0PWh0LnNwbGl0KFwifFwiKSxuPWUuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2lmKG4uY3JlYXRlRWxlbWVudCl3aGlsZSh0Lmxlbmd0aCluLmNyZWF0ZUVsZW1lbnQodC5wb3AoKSk7cmV0dXJuIG59dmFyIGh0PVwiYWJicnxhcnRpY2xlfGFzaWRlfGF1ZGlvfGJkaXxjYW52YXN8ZGF0YXxkYXRhbGlzdHxkZXRhaWxzfGZpZ2NhcHRpb258ZmlndXJlfGZvb3RlcnxoZWFkZXJ8aGdyb3VwfG1hcmt8bWV0ZXJ8bmF2fG91dHB1dHxwcm9ncmVzc3xzZWN0aW9ufHN1bW1hcnl8dGltZXx2aWRlb1wiLGd0PS8galF1ZXJ5XFxkKz1cIig/Om51bGx8XFxkKylcIi9nLG10PVJlZ0V4cChcIjwoPzpcIitodCtcIilbXFxcXHMvPl1cIixcImlcIikseXQ9L15cXHMrLyx2dD0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXFx3Ol0rKVtePl0qKVxcLz4vZ2ksYnQ9LzwoW1xcdzpdKykvLHh0PS88dGJvZHkvaSx3dD0vPHwmIz9cXHcrOy8sVHQ9LzwoPzpzY3JpcHR8c3R5bGV8bGluaykvaSxOdD0vXig/OmNoZWNrYm94fHJhZGlvKSQvaSxDdD0vY2hlY2tlZFxccyooPzpbXj1dfD1cXHMqLmNoZWNrZWQuKS9pLGt0PS9eJHxcXC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksRXQ9L150cnVlXFwvKC4qKS8sU3Q9L15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nLEF0PXtvcHRpb246WzEsXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsXCI8L3NlbGVjdD5cIl0sbGVnZW5kOlsxLFwiPGZpZWxkc2V0PlwiLFwiPC9maWVsZHNldD5cIl0sYXJlYTpbMSxcIjxtYXA+XCIsXCI8L21hcD5cIl0scGFyYW06WzEsXCI8b2JqZWN0PlwiLFwiPC9vYmplY3Q+XCJdLHRoZWFkOlsxLFwiPHRhYmxlPlwiLFwiPC90YWJsZT5cIl0sdHI6WzIsXCI8dGFibGU+PHRib2R5PlwiLFwiPC90Ym9keT48L3RhYmxlPlwiXSxjb2w6WzIsXCI8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPlwiLFwiPC9jb2xncm91cD48L3RhYmxlPlwiXSx0ZDpbMyxcIjx0YWJsZT48dGJvZHk+PHRyPlwiLFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCJdLF9kZWZhdWx0OmIuc3VwcG9ydC5odG1sU2VyaWFsaXplP1swLFwiXCIsXCJcIl06WzEsXCJYPGRpdj5cIixcIjwvZGl2PlwiXX0sanQ9ZHQobyksRHQ9anQuYXBwZW5kQ2hpbGQoby5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtBdC5vcHRncm91cD1BdC5vcHRpb24sQXQudGJvZHk9QXQudGZvb3Q9QXQuY29sZ3JvdXA9QXQuY2FwdGlvbj1BdC50aGVhZCxBdC50aD1BdC50ZCxiLmZuLmV4dGVuZCh7dGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gYi5hY2Nlc3ModGhpcyxmdW5jdGlvbihlKXtyZXR1cm4gZT09PXQ/Yi50ZXh0KHRoaXMpOnRoaXMuZW1wdHkoKS5hcHBlbmQoKHRoaXNbMF0mJnRoaXNbMF0ub3duZXJEb2N1bWVudHx8bykuY3JlYXRlVGV4dE5vZGUoZSkpfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LHdyYXBBbGw6ZnVuY3Rpb24oZSl7aWYoYi5pc0Z1bmN0aW9uKGUpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24odCl7Yih0aGlzKS53cmFwQWxsKGUuY2FsbCh0aGlzLHQpKX0pO2lmKHRoaXNbMF0pe3ZhciB0PWIoZSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKTt0aGlzWzBdLnBhcmVudE5vZGUmJnQuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLHQubWFwKGZ1bmN0aW9uKCl7dmFyIGU9dGhpczt3aGlsZShlLmZpcnN0Q2hpbGQmJjE9PT1lLmZpcnN0Q2hpbGQubm9kZVR5cGUpZT1lLmZpcnN0Q2hpbGQ7cmV0dXJuIGV9KS5hcHBlbmQodGhpcyl9cmV0dXJuIHRoaXN9LHdyYXBJbm5lcjpmdW5jdGlvbihlKXtyZXR1cm4gYi5pc0Z1bmN0aW9uKGUpP3RoaXMuZWFjaChmdW5jdGlvbih0KXtiKHRoaXMpLndyYXBJbm5lcihlLmNhbGwodGhpcyx0KSl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1iKHRoaXMpLG49dC5jb250ZW50cygpO24ubGVuZ3RoP24ud3JhcEFsbChlKTp0LmFwcGVuZChlKX0pfSx3cmFwOmZ1bmN0aW9uKGUpe3ZhciB0PWIuaXNGdW5jdGlvbihlKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKG4pe2IodGhpcykud3JhcEFsbCh0P2UuY2FsbCh0aGlzLG4pOmUpfSl9LHVud3JhcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudCgpLmVhY2goZnVuY3Rpb24oKXtiLm5vZGVOYW1lKHRoaXMsXCJib2R5XCIpfHxiKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLCEwLGZ1bmN0aW9uKGUpeygxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSkmJnRoaXMuYXBwZW5kQ2hpbGQoZSl9KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cywhMCxmdW5jdGlvbihlKXsoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpJiZ0aGlzLmluc2VydEJlZm9yZShlLHRoaXMuZmlyc3RDaGlsZCl9KX0sYmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLCExLGZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHRoaXMpfSl9LGFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLCExLGZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHRoaXMubmV4dFNpYmxpbmcpfSl9LHJlbW92ZTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MDtmb3IoO251bGwhPShuPXRoaXNbcl0pO3IrKykoIWV8fGIuZmlsdGVyKGUsW25dKS5sZW5ndGg+MCkmJih0fHwxIT09bi5ub2RlVHlwZXx8Yi5jbGVhbkRhdGEoT3QobikpLG4ucGFyZW50Tm9kZSYmKHQmJmIuY29udGFpbnMobi5vd25lckRvY3VtZW50LG4pJiZNdChPdChuLFwic2NyaXB0XCIpKSxuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobikpKTtyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXt2YXIgZSx0PTA7Zm9yKDtudWxsIT0oZT10aGlzW3RdKTt0KyspezE9PT1lLm5vZGVUeXBlJiZiLmNsZWFuRGF0YShPdChlLCExKSk7d2hpbGUoZS5maXJzdENoaWxkKWUucmVtb3ZlQ2hpbGQoZS5maXJzdENoaWxkKTtlLm9wdGlvbnMmJmIubm9kZU5hbWUoZSxcInNlbGVjdFwiKSYmKGUub3B0aW9ucy5sZW5ndGg9MCl9cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9bnVsbD09ZT8hMTplLHQ9bnVsbD09dD9lOnQsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gYi5jbG9uZSh0aGlzLGUsdCl9KX0saHRtbDpmdW5jdGlvbihlKXtyZXR1cm4gYi5hY2Nlc3ModGhpcyxmdW5jdGlvbihlKXt2YXIgbj10aGlzWzBdfHx7fSxyPTAsaT10aGlzLmxlbmd0aDtpZihlPT09dClyZXR1cm4gMT09PW4ubm9kZVR5cGU/bi5pbm5lckhUTUwucmVwbGFjZShndCxcIlwiKTp0O2lmKCEoXCJzdHJpbmdcIiE9dHlwZW9mIGV8fFR0LnRlc3QoZSl8fCFiLnN1cHBvcnQuaHRtbFNlcmlhbGl6ZSYmbXQudGVzdChlKXx8IWIuc3VwcG9ydC5sZWFkaW5nV2hpdGVzcGFjZSYmeXQudGVzdChlKXx8QXRbKGJ0LmV4ZWMoZSl8fFtcIlwiLFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpXSkpe2U9ZS5yZXBsYWNlKHZ0LFwiPCQxPjwvJDI+XCIpO3RyeXtmb3IoO2k+cjtyKyspbj10aGlzW3JdfHx7fSwxPT09bi5ub2RlVHlwZSYmKGIuY2xlYW5EYXRhKE90KG4sITEpKSxuLmlubmVySFRNTD1lKTtuPTB9Y2F0Y2gobyl7fX1uJiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGUpfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKGUpe3ZhciB0PWIuaXNGdW5jdGlvbihlKTtyZXR1cm4gdHx8XCJzdHJpbmdcIj09dHlwZW9mIGV8fChlPWIoZSkubm90KHRoaXMpLmRldGFjaCgpKSx0aGlzLmRvbU1hbmlwKFtlXSwhMCxmdW5jdGlvbihlKXt2YXIgdD10aGlzLm5leHRTaWJsaW5nLG49dGhpcy5wYXJlbnROb2RlO24mJihiKHRoaXMpLnJlbW92ZSgpLG4uaW5zZXJ0QmVmb3JlKGUsdCkpfSl9LGRldGFjaDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZW1vdmUoZSwhMCl9LGRvbU1hbmlwOmZ1bmN0aW9uKGUsbixyKXtlPWYuYXBwbHkoW10sZSk7dmFyIGksbyxhLHMsdSxsLGM9MCxwPXRoaXMubGVuZ3RoLGQ9dGhpcyxoPXAtMSxnPWVbMF0sbT1iLmlzRnVuY3Rpb24oZyk7aWYobXx8ISgxPj1wfHxcInN0cmluZ1wiIT10eXBlb2YgZ3x8Yi5zdXBwb3J0LmNoZWNrQ2xvbmUpJiZDdC50ZXN0KGcpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaSl7dmFyIG89ZC5lcShpKTttJiYoZVswXT1nLmNhbGwodGhpcyxpLG4/by5odG1sKCk6dCkpLG8uZG9tTWFuaXAoZSxuLHIpfSk7aWYocCYmKGw9Yi5idWlsZEZyYWdtZW50KGUsdGhpc1swXS5vd25lckRvY3VtZW50LCExLHRoaXMpLGk9bC5maXJzdENoaWxkLDE9PT1sLmNoaWxkTm9kZXMubGVuZ3RoJiYobD1pKSxpKSl7Zm9yKG49biYmYi5ub2RlTmFtZShpLFwidHJcIikscz1iLm1hcChPdChsLFwic2NyaXB0XCIpLEh0KSxhPXMubGVuZ3RoO3A+YztjKyspbz1sLGMhPT1oJiYobz1iLmNsb25lKG8sITAsITApLGEmJmIubWVyZ2UocyxPdChvLFwic2NyaXB0XCIpKSksci5jYWxsKG4mJmIubm9kZU5hbWUodGhpc1tjXSxcInRhYmxlXCIpP0x0KHRoaXNbY10sXCJ0Ym9keVwiKTp0aGlzW2NdLG8sYyk7aWYoYSlmb3IodT1zW3MubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQsYi5tYXAocyxxdCksYz0wO2E+YztjKyspbz1zW2NdLGt0LnRlc3Qoby50eXBlfHxcIlwiKSYmIWIuX2RhdGEobyxcImdsb2JhbEV2YWxcIikmJmIuY29udGFpbnModSxvKSYmKG8uc3JjP2IuYWpheCh7dXJsOm8uc3JjLHR5cGU6XCJHRVRcIixkYXRhVHlwZTpcInNjcmlwdFwiLGFzeW5jOiExLGdsb2JhbDohMSxcInRocm93c1wiOiEwfSk6Yi5nbG9iYWxFdmFsKChvLnRleHR8fG8udGV4dENvbnRlbnR8fG8uaW5uZXJIVE1MfHxcIlwiKS5yZXBsYWNlKFN0LFwiXCIpKSk7bD1pPW51bGx9cmV0dXJuIHRoaXN9fSk7ZnVuY3Rpb24gTHQoZSx0KXtyZXR1cm4gZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0KVswXXx8ZS5hcHBlbmRDaGlsZChlLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0KSl9ZnVuY3Rpb24gSHQoZSl7dmFyIHQ9ZS5nZXRBdHRyaWJ1dGVOb2RlKFwidHlwZVwiKTtyZXR1cm4gZS50eXBlPSh0JiZ0LnNwZWNpZmllZCkrXCIvXCIrZS50eXBlLGV9ZnVuY3Rpb24gcXQoZSl7dmFyIHQ9RXQuZXhlYyhlLnR5cGUpO3JldHVybiB0P2UudHlwZT10WzFdOmUucmVtb3ZlQXR0cmlidXRlKFwidHlwZVwiKSxlfWZ1bmN0aW9uIE10KGUsdCl7dmFyIG4scj0wO2Zvcig7bnVsbCE9KG49ZVtyXSk7cisrKWIuX2RhdGEobixcImdsb2JhbEV2YWxcIiwhdHx8Yi5fZGF0YSh0W3JdLFwiZ2xvYmFsRXZhbFwiKSl9ZnVuY3Rpb24gX3QoZSx0KXtpZigxPT09dC5ub2RlVHlwZSYmYi5oYXNEYXRhKGUpKXt2YXIgbixyLGksbz1iLl9kYXRhKGUpLGE9Yi5fZGF0YSh0LG8pLHM9by5ldmVudHM7aWYocyl7ZGVsZXRlIGEuaGFuZGxlLGEuZXZlbnRzPXt9O2ZvcihuIGluIHMpZm9yKHI9MCxpPXNbbl0ubGVuZ3RoO2k+cjtyKyspYi5ldmVudC5hZGQodCxuLHNbbl1bcl0pfWEuZGF0YSYmKGEuZGF0YT1iLmV4dGVuZCh7fSxhLmRhdGEpKX19ZnVuY3Rpb24gRnQoZSx0KXt2YXIgbixyLGk7aWYoMT09PXQubm9kZVR5cGUpe2lmKG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLCFiLnN1cHBvcnQubm9DbG9uZUV2ZW50JiZ0W2IuZXhwYW5kb10pe2k9Yi5fZGF0YSh0KTtmb3IociBpbiBpLmV2ZW50cyliLnJlbW92ZUV2ZW50KHQscixpLmhhbmRsZSk7dC5yZW1vdmVBdHRyaWJ1dGUoYi5leHBhbmRvKX1cInNjcmlwdFwiPT09biYmdC50ZXh0IT09ZS50ZXh0PyhIdCh0KS50ZXh0PWUudGV4dCxxdCh0KSk6XCJvYmplY3RcIj09PW4/KHQucGFyZW50Tm9kZSYmKHQub3V0ZXJIVE1MPWUub3V0ZXJIVE1MKSxiLnN1cHBvcnQuaHRtbDVDbG9uZSYmZS5pbm5lckhUTUwmJiFiLnRyaW0odC5pbm5lckhUTUwpJiYodC5pbm5lckhUTUw9ZS5pbm5lckhUTUwpKTpcImlucHV0XCI9PT1uJiZOdC50ZXN0KGUudHlwZSk/KHQuZGVmYXVsdENoZWNrZWQ9dC5jaGVja2VkPWUuY2hlY2tlZCx0LnZhbHVlIT09ZS52YWx1ZSYmKHQudmFsdWU9ZS52YWx1ZSkpOlwib3B0aW9uXCI9PT1uP3QuZGVmYXVsdFNlbGVjdGVkPXQuc2VsZWN0ZWQ9ZS5kZWZhdWx0U2VsZWN0ZWQ6KFwiaW5wdXRcIj09PW58fFwidGV4dGFyZWFcIj09PW4pJiYodC5kZWZhdWx0VmFsdWU9ZS5kZWZhdWx0VmFsdWUpfX1iLmVhY2goe2FwcGVuZFRvOlwiYXBwZW5kXCIscHJlcGVuZFRvOlwicHJlcGVuZFwiLGluc2VydEJlZm9yZTpcImJlZm9yZVwiLGluc2VydEFmdGVyOlwiYWZ0ZXJcIixyZXBsYWNlQWxsOlwicmVwbGFjZVdpdGhcIn0sZnVuY3Rpb24oZSx0KXtiLmZuW2VdPWZ1bmN0aW9uKGUpe3ZhciBuLHI9MCxpPVtdLG89YihlKSxhPW8ubGVuZ3RoLTE7Zm9yKDthPj1yO3IrKyluPXI9PT1hP3RoaXM6dGhpcy5jbG9uZSghMCksYihvW3JdKVt0XShuKSxkLmFwcGx5KGksbi5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGkpfX0pO2Z1bmN0aW9uIE90KGUsbil7dmFyIHIsbyxhPTAscz10eXBlb2YgZS5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PWk/ZS5nZXRFbGVtZW50c0J5VGFnTmFtZShufHxcIipcIik6dHlwZW9mIGUucXVlcnlTZWxlY3RvckFsbCE9PWk/ZS5xdWVyeVNlbGVjdG9yQWxsKG58fFwiKlwiKTp0O2lmKCFzKWZvcihzPVtdLHI9ZS5jaGlsZE5vZGVzfHxlO251bGwhPShvPXJbYV0pO2ErKykhbnx8Yi5ub2RlTmFtZShvLG4pP3MucHVzaChvKTpiLm1lcmdlKHMsT3QobyxuKSk7cmV0dXJuIG49PT10fHxuJiZiLm5vZGVOYW1lKGUsbik/Yi5tZXJnZShbZV0scyk6c31mdW5jdGlvbiBCdChlKXtOdC50ZXN0KGUudHlwZSkmJihlLmRlZmF1bHRDaGVja2VkPWUuY2hlY2tlZCl9Yi5leHRlbmQoe2Nsb25lOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYSxzLHU9Yi5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSk7aWYoYi5zdXBwb3J0Lmh0bWw1Q2xvbmV8fGIuaXNYTUxEb2MoZSl8fCFtdC50ZXN0KFwiPFwiK2Uubm9kZU5hbWUrXCI+XCIpP289ZS5jbG9uZU5vZGUoITApOihEdC5pbm5lckhUTUw9ZS5vdXRlckhUTUwsRHQucmVtb3ZlQ2hpbGQobz1EdC5maXJzdENoaWxkKSksIShiLnN1cHBvcnQubm9DbG9uZUV2ZW50JiZiLnN1cHBvcnQubm9DbG9uZUNoZWNrZWR8fDEhPT1lLm5vZGVUeXBlJiYxMSE9PWUubm9kZVR5cGV8fGIuaXNYTUxEb2MoZSkpKWZvcihyPU90KG8pLHM9T3QoZSksYT0wO251bGwhPShpPXNbYV0pOysrYSlyW2FdJiZGdChpLHJbYV0pO2lmKHQpaWYobilmb3Iocz1zfHxPdChlKSxyPXJ8fE90KG8pLGE9MDtudWxsIT0oaT1zW2FdKTthKyspX3QoaSxyW2FdKTtlbHNlIF90KGUsbyk7cmV0dXJuIHI9T3QobyxcInNjcmlwdFwiKSxyLmxlbmd0aD4wJiZNdChyLCF1JiZPdChlLFwic2NyaXB0XCIpKSxyPXM9aT1udWxsLG99LGJ1aWxkRnJhZ21lbnQ6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHMsdSxsLGMscD1lLmxlbmd0aCxmPWR0KHQpLGQ9W10saD0wO2Zvcig7cD5oO2grKylpZihvPWVbaF0sb3x8MD09PW8paWYoXCJvYmplY3RcIj09PWIudHlwZShvKSliLm1lcmdlKGQsby5ub2RlVHlwZT9bb106byk7ZWxzZSBpZih3dC50ZXN0KG8pKXtzPXN8fGYuYXBwZW5kQ2hpbGQodC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSx1PShidC5leGVjKG8pfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKSxjPUF0W3VdfHxBdC5fZGVmYXVsdCxzLmlubmVySFRNTD1jWzFdK28ucmVwbGFjZSh2dCxcIjwkMT48LyQyPlwiKStjWzJdLGk9Y1swXTt3aGlsZShpLS0pcz1zLmxhc3RDaGlsZDtpZighYi5zdXBwb3J0LmxlYWRpbmdXaGl0ZXNwYWNlJiZ5dC50ZXN0KG8pJiZkLnB1c2godC5jcmVhdGVUZXh0Tm9kZSh5dC5leGVjKG8pWzBdKSksIWIuc3VwcG9ydC50Ym9keSl7bz1cInRhYmxlXCIhPT11fHx4dC50ZXN0KG8pP1wiPHRhYmxlPlwiIT09Y1sxXXx8eHQudGVzdChvKT8wOnM6cy5maXJzdENoaWxkLGk9byYmby5jaGlsZE5vZGVzLmxlbmd0aDt3aGlsZShpLS0pYi5ub2RlTmFtZShsPW8uY2hpbGROb2Rlc1tpXSxcInRib2R5XCIpJiYhbC5jaGlsZE5vZGVzLmxlbmd0aCYmby5yZW1vdmVDaGlsZChsKVxyXG59Yi5tZXJnZShkLHMuY2hpbGROb2Rlcykscy50ZXh0Q29udGVudD1cIlwiO3doaWxlKHMuZmlyc3RDaGlsZClzLnJlbW92ZUNoaWxkKHMuZmlyc3RDaGlsZCk7cz1mLmxhc3RDaGlsZH1lbHNlIGQucHVzaCh0LmNyZWF0ZVRleHROb2RlKG8pKTtzJiZmLnJlbW92ZUNoaWxkKHMpLGIuc3VwcG9ydC5hcHBlbmRDaGVja2VkfHxiLmdyZXAoT3QoZCxcImlucHV0XCIpLEJ0KSxoPTA7d2hpbGUobz1kW2grK10paWYoKCFyfHwtMT09PWIuaW5BcnJheShvLHIpKSYmKGE9Yi5jb250YWlucyhvLm93bmVyRG9jdW1lbnQsbykscz1PdChmLmFwcGVuZENoaWxkKG8pLFwic2NyaXB0XCIpLGEmJk10KHMpLG4pKXtpPTA7d2hpbGUobz1zW2krK10pa3QudGVzdChvLnR5cGV8fFwiXCIpJiZuLnB1c2gobyl9cmV0dXJuIHM9bnVsbCxmfSxjbGVhbkRhdGE6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLG8sYSxzPTAsdT1iLmV4cGFuZG8sbD1iLmNhY2hlLHA9Yi5zdXBwb3J0LmRlbGV0ZUV4cGFuZG8sZj1iLmV2ZW50LnNwZWNpYWw7Zm9yKDtudWxsIT0obj1lW3NdKTtzKyspaWYoKHR8fGIuYWNjZXB0RGF0YShuKSkmJihvPW5bdV0sYT1vJiZsW29dKSl7aWYoYS5ldmVudHMpZm9yKHIgaW4gYS5ldmVudHMpZltyXT9iLmV2ZW50LnJlbW92ZShuLHIpOmIucmVtb3ZlRXZlbnQobixyLGEuaGFuZGxlKTtsW29dJiYoZGVsZXRlIGxbb10scD9kZWxldGUgblt1XTp0eXBlb2Ygbi5yZW1vdmVBdHRyaWJ1dGUhPT1pP24ucmVtb3ZlQXR0cmlidXRlKHUpOm5bdV09bnVsbCxjLnB1c2gobykpfX19KTt2YXIgUHQsUnQsV3QsJHQ9L2FscGhhXFwoW14pXSpcXCkvaSxJdD0vb3BhY2l0eVxccyo9XFxzKihbXildKikvLHp0PS9eKHRvcHxyaWdodHxib3R0b218bGVmdCkkLyxYdD0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sVXQ9L15tYXJnaW4vLFZ0PVJlZ0V4cChcIl4oXCIreCtcIikoLiopJFwiLFwiaVwiKSxZdD1SZWdFeHAoXCJeKFwiK3grXCIpKD8hcHgpW2EteiVdKyRcIixcImlcIiksSnQ9UmVnRXhwKFwiXihbKy1dKT0oXCIreCtcIilcIixcImlcIiksR3Q9e0JPRFk6XCJibG9ja1wifSxRdD17cG9zaXRpb246XCJhYnNvbHV0ZVwiLHZpc2liaWxpdHk6XCJoaWRkZW5cIixkaXNwbGF5OlwiYmxvY2tcIn0sS3Q9e2xldHRlclNwYWNpbmc6MCxmb250V2VpZ2h0OjQwMH0sWnQ9W1wiVG9wXCIsXCJSaWdodFwiLFwiQm90dG9tXCIsXCJMZWZ0XCJdLGVuPVtcIldlYmtpdFwiLFwiT1wiLFwiTW96XCIsXCJtc1wiXTtmdW5jdGlvbiB0bihlLHQpe2lmKHQgaW4gZSlyZXR1cm4gdDt2YXIgbj10LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3Quc2xpY2UoMSkscj10LGk9ZW4ubGVuZ3RoO3doaWxlKGktLSlpZih0PWVuW2ldK24sdCBpbiBlKXJldHVybiB0O3JldHVybiByfWZ1bmN0aW9uIG5uKGUsdCl7cmV0dXJuIGU9dHx8ZSxcIm5vbmVcIj09PWIuY3NzKGUsXCJkaXNwbGF5XCIpfHwhYi5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSl9ZnVuY3Rpb24gcm4oZSx0KXt2YXIgbixyLGksbz1bXSxhPTAscz1lLmxlbmd0aDtmb3IoO3M+YTthKyspcj1lW2FdLHIuc3R5bGUmJihvW2FdPWIuX2RhdGEocixcIm9sZGRpc3BsYXlcIiksbj1yLnN0eWxlLmRpc3BsYXksdD8ob1thXXx8XCJub25lXCIhPT1ufHwoci5zdHlsZS5kaXNwbGF5PVwiXCIpLFwiXCI9PT1yLnN0eWxlLmRpc3BsYXkmJm5uKHIpJiYob1thXT1iLl9kYXRhKHIsXCJvbGRkaXNwbGF5XCIsdW4oci5ub2RlTmFtZSkpKSk6b1thXXx8KGk9bm4ociksKG4mJlwibm9uZVwiIT09bnx8IWkpJiZiLl9kYXRhKHIsXCJvbGRkaXNwbGF5XCIsaT9uOmIuY3NzKHIsXCJkaXNwbGF5XCIpKSkpO2ZvcihhPTA7cz5hO2ErKylyPWVbYV0sci5zdHlsZSYmKHQmJlwibm9uZVwiIT09ci5zdHlsZS5kaXNwbGF5JiZcIlwiIT09ci5zdHlsZS5kaXNwbGF5fHwoci5zdHlsZS5kaXNwbGF5PXQ/b1thXXx8XCJcIjpcIm5vbmVcIikpO3JldHVybiBlfWIuZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gYi5hY2Nlc3ModGhpcyxmdW5jdGlvbihlLG4scil7dmFyIGksbyxhPXt9LHM9MDtpZihiLmlzQXJyYXkobikpe2ZvcihvPVJ0KGUpLGk9bi5sZW5ndGg7aT5zO3MrKylhW25bc11dPWIuY3NzKGUsbltzXSwhMSxvKTtyZXR1cm4gYX1yZXR1cm4gciE9PXQ/Yi5zdHlsZShlLG4scik6Yi5jc3MoZSxuKX0sZSxuLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gcm4odGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gcm4odGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihlKXt2YXIgdD1cImJvb2xlYW5cIj09dHlwZW9mIGU7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpeyh0P2U6bm4odGhpcykpP2IodGhpcykuc2hvdygpOmIodGhpcykuaGlkZSgpfSl9fSksYi5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oZSx0KXtpZih0KXt2YXIgbj1XdChlLFwib3BhY2l0eVwiKTtyZXR1cm5cIlwiPT09bj9cIjFcIjpufX19fSxjc3NOdW1iZXI6e2NvbHVtbkNvdW50OiEwLGZpbGxPcGFjaXR5OiEwLGZvbnRXZWlnaHQ6ITAsbGluZUhlaWdodDohMCxvcGFjaXR5OiEwLG9ycGhhbnM6ITAsd2lkb3dzOiEwLHpJbmRleDohMCx6b29tOiEwfSxjc3NQcm9wczp7XCJmbG9hdFwiOmIuc3VwcG9ydC5jc3NGbG9hdD9cImNzc0Zsb2F0XCI6XCJzdHlsZUZsb2F0XCJ9LHN0eWxlOmZ1bmN0aW9uKGUsbixyLGkpe2lmKGUmJjMhPT1lLm5vZGVUeXBlJiY4IT09ZS5ub2RlVHlwZSYmZS5zdHlsZSl7dmFyIG8sYSxzLHU9Yi5jYW1lbENhc2UobiksbD1lLnN0eWxlO2lmKG49Yi5jc3NQcm9wc1t1XXx8KGIuY3NzUHJvcHNbdV09dG4obCx1KSkscz1iLmNzc0hvb2tzW25dfHxiLmNzc0hvb2tzW3VdLHI9PT10KXJldHVybiBzJiZcImdldFwiaW4gcyYmKG89cy5nZXQoZSwhMSxpKSkhPT10P286bFtuXTtpZihhPXR5cGVvZiByLFwic3RyaW5nXCI9PT1hJiYobz1KdC5leGVjKHIpKSYmKHI9KG9bMV0rMSkqb1syXStwYXJzZUZsb2F0KGIuY3NzKGUsbikpLGE9XCJudW1iZXJcIiksIShudWxsPT1yfHxcIm51bWJlclwiPT09YSYmaXNOYU4ocil8fChcIm51bWJlclwiIT09YXx8Yi5jc3NOdW1iZXJbdV18fChyKz1cInB4XCIpLGIuc3VwcG9ydC5jbGVhckNsb25lU3R5bGV8fFwiXCIhPT1yfHwwIT09bi5pbmRleE9mKFwiYmFja2dyb3VuZFwiKXx8KGxbbl09XCJpbmhlcml0XCIpLHMmJlwic2V0XCJpbiBzJiYocj1zLnNldChlLHIsaSkpPT09dCkpKXRyeXtsW25dPXJ9Y2F0Y2goYyl7fX19LGNzczpmdW5jdGlvbihlLG4scixpKXt2YXIgbyxhLHMsdT1iLmNhbWVsQ2FzZShuKTtyZXR1cm4gbj1iLmNzc1Byb3BzW3VdfHwoYi5jc3NQcm9wc1t1XT10bihlLnN0eWxlLHUpKSxzPWIuY3NzSG9va3Nbbl18fGIuY3NzSG9va3NbdV0scyYmXCJnZXRcImluIHMmJihhPXMuZ2V0KGUsITAscikpLGE9PT10JiYoYT1XdChlLG4saSkpLFwibm9ybWFsXCI9PT1hJiZuIGluIEt0JiYoYT1LdFtuXSksXCJcIj09PXJ8fHI/KG89cGFyc2VGbG9hdChhKSxyPT09ITB8fGIuaXNOdW1lcmljKG8pP298fDA6YSk6YX0sc3dhcDpmdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvLGE9e307Zm9yKG8gaW4gdClhW29dPWUuc3R5bGVbb10sZS5zdHlsZVtvXT10W29dO2k9bi5hcHBseShlLHJ8fFtdKTtmb3IobyBpbiB0KWUuc3R5bGVbb109YVtvXTtyZXR1cm4gaX19KSxlLmdldENvbXB1dGVkU3R5bGU/KFJ0PWZ1bmN0aW9uKHQpe3JldHVybiBlLmdldENvbXB1dGVkU3R5bGUodCxudWxsKX0sV3Q9ZnVuY3Rpb24oZSxuLHIpe3ZhciBpLG8sYSxzPXJ8fFJ0KGUpLHU9cz9zLmdldFByb3BlcnR5VmFsdWUobil8fHNbbl06dCxsPWUuc3R5bGU7cmV0dXJuIHMmJihcIlwiIT09dXx8Yi5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSl8fCh1PWIuc3R5bGUoZSxuKSksWXQudGVzdCh1KSYmVXQudGVzdChuKSYmKGk9bC53aWR0aCxvPWwubWluV2lkdGgsYT1sLm1heFdpZHRoLGwubWluV2lkdGg9bC5tYXhXaWR0aD1sLndpZHRoPXUsdT1zLndpZHRoLGwud2lkdGg9aSxsLm1pbldpZHRoPW8sbC5tYXhXaWR0aD1hKSksdX0pOm8uZG9jdW1lbnRFbGVtZW50LmN1cnJlbnRTdHlsZSYmKFJ0PWZ1bmN0aW9uKGUpe3JldHVybiBlLmN1cnJlbnRTdHlsZX0sV3Q9ZnVuY3Rpb24oZSxuLHIpe3ZhciBpLG8sYSxzPXJ8fFJ0KGUpLHU9cz9zW25dOnQsbD1lLnN0eWxlO3JldHVybiBudWxsPT11JiZsJiZsW25dJiYodT1sW25dKSxZdC50ZXN0KHUpJiYhenQudGVzdChuKSYmKGk9bC5sZWZ0LG89ZS5ydW50aW1lU3R5bGUsYT1vJiZvLmxlZnQsYSYmKG8ubGVmdD1lLmN1cnJlbnRTdHlsZS5sZWZ0KSxsLmxlZnQ9XCJmb250U2l6ZVwiPT09bj9cIjFlbVwiOnUsdT1sLnBpeGVsTGVmdCtcInB4XCIsbC5sZWZ0PWksYSYmKG8ubGVmdD1hKSksXCJcIj09PXU/XCJhdXRvXCI6dX0pO2Z1bmN0aW9uIG9uKGUsdCxuKXt2YXIgcj1WdC5leGVjKHQpO3JldHVybiByP01hdGgubWF4KDAsclsxXS0obnx8MCkpKyhyWzJdfHxcInB4XCIpOnR9ZnVuY3Rpb24gYW4oZSx0LG4scixpKXt2YXIgbz1uPT09KHI/XCJib3JkZXJcIjpcImNvbnRlbnRcIik/NDpcIndpZHRoXCI9PT10PzE6MCxhPTA7Zm9yKDs0Pm87bys9MilcIm1hcmdpblwiPT09biYmKGErPWIuY3NzKGUsbitadFtvXSwhMCxpKSkscj8oXCJjb250ZW50XCI9PT1uJiYoYS09Yi5jc3MoZSxcInBhZGRpbmdcIitadFtvXSwhMCxpKSksXCJtYXJnaW5cIiE9PW4mJihhLT1iLmNzcyhlLFwiYm9yZGVyXCIrWnRbb10rXCJXaWR0aFwiLCEwLGkpKSk6KGErPWIuY3NzKGUsXCJwYWRkaW5nXCIrWnRbb10sITAsaSksXCJwYWRkaW5nXCIhPT1uJiYoYSs9Yi5jc3MoZSxcImJvcmRlclwiK1p0W29dK1wiV2lkdGhcIiwhMCxpKSkpO3JldHVybiBhfWZ1bmN0aW9uIHNuKGUsdCxuKXt2YXIgcj0hMCxpPVwid2lkdGhcIj09PXQ/ZS5vZmZzZXRXaWR0aDplLm9mZnNldEhlaWdodCxvPVJ0KGUpLGE9Yi5zdXBwb3J0LmJveFNpemluZyYmXCJib3JkZXItYm94XCI9PT1iLmNzcyhlLFwiYm94U2l6aW5nXCIsITEsbyk7aWYoMD49aXx8bnVsbD09aSl7aWYoaT1XdChlLHQsbyksKDA+aXx8bnVsbD09aSkmJihpPWUuc3R5bGVbdF0pLFl0LnRlc3QoaSkpcmV0dXJuIGk7cj1hJiYoYi5zdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlfHxpPT09ZS5zdHlsZVt0XSksaT1wYXJzZUZsb2F0KGkpfHwwfXJldHVybiBpK2FuKGUsdCxufHwoYT9cImJvcmRlclwiOlwiY29udGVudFwiKSxyLG8pK1wicHhcIn1mdW5jdGlvbiB1bihlKXt2YXIgdD1vLG49R3RbZV07cmV0dXJuIG58fChuPWxuKGUsdCksXCJub25lXCIhPT1uJiZufHwoUHQ9KFB0fHxiKFwiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPlwiKS5jc3MoXCJjc3NUZXh0XCIsXCJkaXNwbGF5OmJsb2NrICFpbXBvcnRhbnRcIikpLmFwcGVuZFRvKHQuZG9jdW1lbnRFbGVtZW50KSx0PShQdFswXS5jb250ZW50V2luZG93fHxQdFswXS5jb250ZW50RG9jdW1lbnQpLmRvY3VtZW50LHQud3JpdGUoXCI8IWRvY3R5cGUgaHRtbD48aHRtbD48Ym9keT5cIiksdC5jbG9zZSgpLG49bG4oZSx0KSxQdC5kZXRhY2goKSksR3RbZV09biksbn1mdW5jdGlvbiBsbihlLHQpe3ZhciBuPWIodC5jcmVhdGVFbGVtZW50KGUpKS5hcHBlbmRUbyh0LmJvZHkpLHI9Yi5jc3MoblswXSxcImRpc3BsYXlcIik7cmV0dXJuIG4ucmVtb3ZlKCkscn1iLmVhY2goW1wiaGVpZ2h0XCIsXCJ3aWR0aFwiXSxmdW5jdGlvbihlLG4pe2IuY3NzSG9va3Nbbl09e2dldDpmdW5jdGlvbihlLHIsaSl7cmV0dXJuIHI/MD09PWUub2Zmc2V0V2lkdGgmJlh0LnRlc3QoYi5jc3MoZSxcImRpc3BsYXlcIikpP2Iuc3dhcChlLFF0LGZ1bmN0aW9uKCl7cmV0dXJuIHNuKGUsbixpKX0pOnNuKGUsbixpKTp0fSxzZXQ6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXImJlJ0KGUpO3JldHVybiBvbihlLHQscj9hbihlLG4scixiLnN1cHBvcnQuYm94U2l6aW5nJiZcImJvcmRlci1ib3hcIj09PWIuY3NzKGUsXCJib3hTaXppbmdcIiwhMSxpKSxpKTowKX19fSksYi5zdXBwb3J0Lm9wYWNpdHl8fChiLmNzc0hvb2tzLm9wYWNpdHk9e2dldDpmdW5jdGlvbihlLHQpe3JldHVybiBJdC50ZXN0KCh0JiZlLmN1cnJlbnRTdHlsZT9lLmN1cnJlbnRTdHlsZS5maWx0ZXI6ZS5zdHlsZS5maWx0ZXIpfHxcIlwiKT8uMDEqcGFyc2VGbG9hdChSZWdFeHAuJDEpK1wiXCI6dD9cIjFcIjpcIlwifSxzZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnN0eWxlLHI9ZS5jdXJyZW50U3R5bGUsaT1iLmlzTnVtZXJpYyh0KT9cImFscGhhKG9wYWNpdHk9XCIrMTAwKnQrXCIpXCI6XCJcIixvPXImJnIuZmlsdGVyfHxuLmZpbHRlcnx8XCJcIjtuLnpvb209MSwodD49MXx8XCJcIj09PXQpJiZcIlwiPT09Yi50cmltKG8ucmVwbGFjZSgkdCxcIlwiKSkmJm4ucmVtb3ZlQXR0cmlidXRlJiYobi5yZW1vdmVBdHRyaWJ1dGUoXCJmaWx0ZXJcIiksXCJcIj09PXR8fHImJiFyLmZpbHRlcil8fChuLmZpbHRlcj0kdC50ZXN0KG8pP28ucmVwbGFjZSgkdCxpKTpvK1wiIFwiK2kpfX0pLGIoZnVuY3Rpb24oKXtiLnN1cHBvcnQucmVsaWFibGVNYXJnaW5SaWdodHx8KGIuY3NzSG9va3MubWFyZ2luUmlnaHQ9e2dldDpmdW5jdGlvbihlLG4pe3JldHVybiBuP2Iuc3dhcChlLHtkaXNwbGF5OlwiaW5saW5lLWJsb2NrXCJ9LFd0LFtlLFwibWFyZ2luUmlnaHRcIl0pOnR9fSksIWIuc3VwcG9ydC5waXhlbFBvc2l0aW9uJiZiLmZuLnBvc2l0aW9uJiZiLmVhY2goW1widG9wXCIsXCJsZWZ0XCJdLGZ1bmN0aW9uKGUsbil7Yi5jc3NIb29rc1tuXT17Z2V0OmZ1bmN0aW9uKGUscil7cmV0dXJuIHI/KHI9V3QoZSxuKSxZdC50ZXN0KHIpP2IoZSkucG9zaXRpb24oKVtuXStcInB4XCI6cik6dH19fSl9KSxiLmV4cHImJmIuZXhwci5maWx0ZXJzJiYoYi5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGUpe3JldHVybiAwPj1lLm9mZnNldFdpZHRoJiYwPj1lLm9mZnNldEhlaWdodHx8IWIuc3VwcG9ydC5yZWxpYWJsZUhpZGRlbk9mZnNldHMmJlwibm9uZVwiPT09KGUuc3R5bGUmJmUuc3R5bGUuZGlzcGxheXx8Yi5jc3MoZSxcImRpc3BsYXlcIikpfSxiLmV4cHIuZmlsdGVycy52aXNpYmxlPWZ1bmN0aW9uKGUpe3JldHVybiFiLmV4cHIuZmlsdGVycy5oaWRkZW4oZSl9KSxiLmVhY2goe21hcmdpbjpcIlwiLHBhZGRpbmc6XCJcIixib3JkZXI6XCJXaWR0aFwifSxmdW5jdGlvbihlLHQpe2IuY3NzSG9va3NbZSt0XT17ZXhwYW5kOmZ1bmN0aW9uKG4pe3ZhciByPTAsaT17fSxvPVwic3RyaW5nXCI9PXR5cGVvZiBuP24uc3BsaXQoXCIgXCIpOltuXTtmb3IoOzQ+cjtyKyspaVtlK1p0W3JdK3RdPW9bcl18fG9bci0yXXx8b1swXTtyZXR1cm4gaX19LFV0LnRlc3QoZSl8fChiLmNzc0hvb2tzW2UrdF0uc2V0PW9uKX0pO3ZhciBjbj0vJTIwL2cscG49L1xcW1xcXSQvLGZuPS9cXHI/XFxuL2csZG49L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLGhuPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtiLmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIGIucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgZT1iLnByb3AodGhpcyxcImVsZW1lbnRzXCIpO3JldHVybiBlP2IubWFrZUFycmF5KGUpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgZT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIWIodGhpcykuaXMoXCI6ZGlzYWJsZWRcIikmJmhuLnRlc3QodGhpcy5ub2RlTmFtZSkmJiFkbi50ZXN0KGUpJiYodGhpcy5jaGVja2VkfHwhTnQudGVzdChlKSl9KS5tYXAoZnVuY3Rpb24oZSx0KXt2YXIgbj1iKHRoaXMpLnZhbCgpO3JldHVybiBudWxsPT1uP251bGw6Yi5pc0FycmF5KG4pP2IubWFwKG4sZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6dC5uYW1lLHZhbHVlOmUucmVwbGFjZShmbixcIlxcclxcblwiKX19KTp7bmFtZTp0Lm5hbWUsdmFsdWU6bi5yZXBsYWNlKGZuLFwiXFxyXFxuXCIpfX0pLmdldCgpfX0pLGIucGFyYW09ZnVuY3Rpb24oZSxuKXt2YXIgcixpPVtdLG89ZnVuY3Rpb24oZSx0KXt0PWIuaXNGdW5jdGlvbih0KT90KCk6bnVsbD09dD9cIlwiOnQsaVtpLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGUpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudCh0KX07aWYobj09PXQmJihuPWIuYWpheFNldHRpbmdzJiZiLmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbCksYi5pc0FycmF5KGUpfHxlLmpxdWVyeSYmIWIuaXNQbGFpbk9iamVjdChlKSliLmVhY2goZSxmdW5jdGlvbigpe28odGhpcy5uYW1lLHRoaXMudmFsdWUpfSk7ZWxzZSBmb3IociBpbiBlKWduKHIsZVtyXSxuLG8pO3JldHVybiBpLmpvaW4oXCImXCIpLnJlcGxhY2UoY24sXCIrXCIpfTtmdW5jdGlvbiBnbihlLHQsbixyKXt2YXIgaTtpZihiLmlzQXJyYXkodCkpYi5lYWNoKHQsZnVuY3Rpb24odCxpKXtufHxwbi50ZXN0KGUpP3IoZSxpKTpnbihlK1wiW1wiKyhcIm9iamVjdFwiPT10eXBlb2YgaT90OlwiXCIpK1wiXVwiLGksbixyKX0pO2Vsc2UgaWYobnx8XCJvYmplY3RcIiE9PWIudHlwZSh0KSlyKGUsdCk7ZWxzZSBmb3IoaSBpbiB0KWduKGUrXCJbXCIraStcIl1cIix0W2ldLG4scil9Yi5lYWNoKFwiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudVwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihlLHQpe2IuZm5bdF09ZnVuY3Rpb24oZSxuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24odCxudWxsLGUsbik6dGhpcy50cmlnZ2VyKHQpfX0pLGIuZm4uaG92ZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGUpLm1vdXNlbGVhdmUodHx8ZSl9O3ZhciBtbix5bix2bj1iLm5vdygpLGJuPS9cXD8vLHhuPS8jLiokLyx3bj0vKFs/Jl0pXz1bXiZdKi8sVG49L14oLio/KTpbIFxcdF0qKFteXFxyXFxuXSopXFxyPyQvZ20sTm49L14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8sQ249L14oPzpHRVR8SEVBRCkkLyxrbj0vXlxcL1xcLy8sRW49L14oW1xcdy4rLV0rOikoPzpcXC9cXC8oW15cXC8/IzpdKikoPzo6KFxcZCspfCl8KS8sU249Yi5mbi5sb2FkLEFuPXt9LGpuPXt9LERuPVwiKi9cIi5jb25jYXQoXCIqXCIpO3RyeXt5bj1hLmhyZWZ9Y2F0Y2goTG4pe3luPW8uY3JlYXRlRWxlbWVudChcImFcIikseW4uaHJlZj1cIlwiLHluPXluLmhyZWZ9bW49RW4uZXhlYyh5bi50b0xvd2VyQ2FzZSgpKXx8W107ZnVuY3Rpb24gSG4oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbil7XCJzdHJpbmdcIiE9dHlwZW9mIHQmJihuPXQsdD1cIipcIik7dmFyIHIsaT0wLG89dC50b0xvd2VyQ2FzZSgpLm1hdGNoKHcpfHxbXTtpZihiLmlzRnVuY3Rpb24obikpd2hpbGUocj1vW2krK10pXCIrXCI9PT1yWzBdPyhyPXIuc2xpY2UoMSl8fFwiKlwiLChlW3JdPWVbcl18fFtdKS51bnNoaWZ0KG4pKTooZVtyXT1lW3JdfHxbXSkucHVzaChuKX19ZnVuY3Rpb24gcW4oZSxuLHIsaSl7dmFyIG89e30sYT1lPT09am47ZnVuY3Rpb24gcyh1KXt2YXIgbDtyZXR1cm4gb1t1XT0hMCxiLmVhY2goZVt1XXx8W10sZnVuY3Rpb24oZSx1KXt2YXIgYz11KG4scixpKTtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgY3x8YXx8b1tjXT9hPyEobD1jKTp0OihuLmRhdGFUeXBlcy51bnNoaWZ0KGMpLHMoYyksITEpfSksbH1yZXR1cm4gcyhuLmRhdGFUeXBlc1swXSl8fCFvW1wiKlwiXSYmcyhcIipcIil9ZnVuY3Rpb24gTW4oZSxuKXt2YXIgcixpLG89Yi5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnN8fHt9O2ZvcihpIGluIG4pbltpXSE9PXQmJigob1tpXT9lOnJ8fChyPXt9KSlbaV09bltpXSk7cmV0dXJuIHImJmIuZXh0ZW5kKCEwLGUsciksZX1iLmZuLmxvYWQ9ZnVuY3Rpb24oZSxuLHIpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlJiZTbilyZXR1cm4gU24uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBpLG8sYSxzPXRoaXMsdT1lLmluZGV4T2YoXCIgXCIpO3JldHVybiB1Pj0wJiYoaT1lLnNsaWNlKHUsZS5sZW5ndGgpLGU9ZS5zbGljZSgwLHUpKSxiLmlzRnVuY3Rpb24obik/KHI9bixuPXQpOm4mJlwib2JqZWN0XCI9PXR5cGVvZiBuJiYoYT1cIlBPU1RcIikscy5sZW5ndGg+MCYmYi5hamF4KHt1cmw6ZSx0eXBlOmEsZGF0YVR5cGU6XCJodG1sXCIsZGF0YTpufSkuZG9uZShmdW5jdGlvbihlKXtvPWFyZ3VtZW50cyxzLmh0bWwoaT9iKFwiPGRpdj5cIikuYXBwZW5kKGIucGFyc2VIVE1MKGUpKS5maW5kKGkpOmUpfSkuY29tcGxldGUociYmZnVuY3Rpb24oZSx0KXtzLmVhY2gocixvfHxbZS5yZXNwb25zZVRleHQsdCxlXSl9KSx0aGlzfSxiLmVhY2goW1wiYWpheFN0YXJ0XCIsXCJhamF4U3RvcFwiLFwiYWpheENvbXBsZXRlXCIsXCJhamF4RXJyb3JcIixcImFqYXhTdWNjZXNzXCIsXCJhamF4U2VuZFwiXSxmdW5jdGlvbihlLHQpe2IuZm5bdF09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub24odCxlKX19KSxiLmVhY2goW1wiZ2V0XCIsXCJwb3N0XCJdLGZ1bmN0aW9uKGUsbil7YltuXT1mdW5jdGlvbihlLHIsaSxvKXtyZXR1cm4gYi5pc0Z1bmN0aW9uKHIpJiYobz1vfHxpLGk9cixyPXQpLGIuYWpheCh7dXJsOmUsdHlwZTpuLGRhdGFUeXBlOm8sZGF0YTpyLHN1Y2Nlc3M6aX0pfX0pLGIuZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDp5bix0eXBlOlwiR0VUXCIsaXNMb2NhbDpObi50ZXN0KG1uWzFdKSxnbG9iYWw6ITAscHJvY2Vzc0RhdGE6ITAsYXN5bmM6ITAsY29udGVudFR5cGU6XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIixhY2NlcHRzOntcIipcIjpEbix0ZXh0OlwidGV4dC9wbGFpblwiLGh0bWw6XCJ0ZXh0L2h0bWxcIix4bWw6XCJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sXCIsanNvbjpcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdFwifSxjb250ZW50czp7eG1sOi94bWwvLGh0bWw6L2h0bWwvLGpzb246L2pzb24vfSxyZXNwb25zZUZpZWxkczp7eG1sOlwicmVzcG9uc2VYTUxcIix0ZXh0OlwicmVzcG9uc2VUZXh0XCJ9LGNvbnZlcnRlcnM6e1wiKiB0ZXh0XCI6ZS5TdHJpbmcsXCJ0ZXh0IGh0bWxcIjohMCxcInRleHQganNvblwiOmIucGFyc2VKU09OLFwidGV4dCB4bWxcIjpiLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD9NbihNbihlLGIuYWpheFNldHRpbmdzKSx0KTpNbihiLmFqYXhTZXR0aW5ncyxlKX0sYWpheFByZWZpbHRlcjpIbihBbiksYWpheFRyYW5zcG9ydDpIbihqbiksYWpheDpmdW5jdGlvbihlLG4pe1wib2JqZWN0XCI9PXR5cGVvZiBlJiYobj1lLGU9dCksbj1ufHx7fTt2YXIgcixpLG8sYSxzLHUsbCxjLHA9Yi5hamF4U2V0dXAoe30sbiksZj1wLmNvbnRleHR8fHAsZD1wLmNvbnRleHQmJihmLm5vZGVUeXBlfHxmLmpxdWVyeSk/YihmKTpiLmV2ZW50LGg9Yi5EZWZlcnJlZCgpLGc9Yi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxtPXAuc3RhdHVzQ29kZXx8e30seT17fSx2PXt9LHg9MCxUPVwiY2FuY2VsZWRcIixOPXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoMj09PXgpe2lmKCFjKXtjPXt9O3doaWxlKHQ9VG4uZXhlYyhhKSljW3RbMV0udG9Mb3dlckNhc2UoKV09dFsyXX10PWNbZS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbnVsbD09dD9udWxsOnR9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiAyPT09eD9hOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIHh8fChlPXZbbl09dltuXXx8ZSx5W2VdPXQpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHh8fChwLm1pbWVUeXBlPWUpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoZSlpZigyPngpZm9yKHQgaW4gZSltW3RdPVttW3RdLGVbdF1dO2Vsc2UgTi5hbHdheXMoZVtOLnN0YXR1c10pO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihlKXt2YXIgdD1lfHxUO3JldHVybiBsJiZsLmFib3J0KHQpLGsoMCx0KSx0aGlzfX07aWYoaC5wcm9taXNlKE4pLmNvbXBsZXRlPWcuYWRkLE4uc3VjY2Vzcz1OLmRvbmUsTi5lcnJvcj1OLmZhaWwscC51cmw9KChlfHxwLnVybHx8eW4pK1wiXCIpLnJlcGxhY2UoeG4sXCJcIikucmVwbGFjZShrbixtblsxXStcIi8vXCIpLHAudHlwZT1uLm1ldGhvZHx8bi50eXBlfHxwLm1ldGhvZHx8cC50eXBlLHAuZGF0YVR5cGVzPWIudHJpbShwLmRhdGFUeXBlfHxcIipcIikudG9Mb3dlckNhc2UoKS5tYXRjaCh3KXx8W1wiXCJdLG51bGw9PXAuY3Jvc3NEb21haW4mJihyPUVuLmV4ZWMocC51cmwudG9Mb3dlckNhc2UoKSkscC5jcm9zc0RvbWFpbj0hKCFyfHxyWzFdPT09bW5bMV0mJnJbMl09PT1tblsyXSYmKHJbM118fChcImh0dHA6XCI9PT1yWzFdPzgwOjQ0MykpPT0obW5bM118fChcImh0dHA6XCI9PT1tblsxXT84MDo0NDMpKSkpLHAuZGF0YSYmcC5wcm9jZXNzRGF0YSYmXCJzdHJpbmdcIiE9dHlwZW9mIHAuZGF0YSYmKHAuZGF0YT1iLnBhcmFtKHAuZGF0YSxwLnRyYWRpdGlvbmFsKSkscW4oQW4scCxuLE4pLDI9PT14KXJldHVybiBOO3U9cC5nbG9iYWwsdSYmMD09PWIuYWN0aXZlKysmJmIuZXZlbnQudHJpZ2dlcihcImFqYXhTdGFydFwiKSxwLnR5cGU9cC50eXBlLnRvVXBwZXJDYXNlKCkscC5oYXNDb250ZW50PSFDbi50ZXN0KHAudHlwZSksbz1wLnVybCxwLmhhc0NvbnRlbnR8fChwLmRhdGEmJihvPXAudXJsKz0oYm4udGVzdChvKT9cIiZcIjpcIj9cIikrcC5kYXRhLGRlbGV0ZSBwLmRhdGEpLHAuY2FjaGU9PT0hMSYmKHAudXJsPXduLnRlc3Qobyk/by5yZXBsYWNlKHduLFwiJDFfPVwiK3ZuKyspOm8rKGJuLnRlc3Qobyk/XCImXCI6XCI/XCIpK1wiXz1cIit2bisrKSkscC5pZk1vZGlmaWVkJiYoYi5sYXN0TW9kaWZpZWRbb10mJk4uc2V0UmVxdWVzdEhlYWRlcihcIklmLU1vZGlmaWVkLVNpbmNlXCIsYi5sYXN0TW9kaWZpZWRbb10pLGIuZXRhZ1tvXSYmTi5zZXRSZXF1ZXN0SGVhZGVyKFwiSWYtTm9uZS1NYXRjaFwiLGIuZXRhZ1tvXSkpLChwLmRhdGEmJnAuaGFzQ29udGVudCYmcC5jb250ZW50VHlwZSE9PSExfHxuLmNvbnRlbnRUeXBlKSYmTi5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIscC5jb250ZW50VHlwZSksTi5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIscC5kYXRhVHlwZXNbMF0mJnAuYWNjZXB0c1twLmRhdGFUeXBlc1swXV0/cC5hY2NlcHRzW3AuZGF0YVR5cGVzWzBdXSsoXCIqXCIhPT1wLmRhdGFUeXBlc1swXT9cIiwgXCIrRG4rXCI7IHE9MC4wMVwiOlwiXCIpOnAuYWNjZXB0c1tcIipcIl0pO2ZvcihpIGluIHAuaGVhZGVycylOLnNldFJlcXVlc3RIZWFkZXIoaSxwLmhlYWRlcnNbaV0pO2lmKHAuYmVmb3JlU2VuZCYmKHAuYmVmb3JlU2VuZC5jYWxsKGYsTixwKT09PSExfHwyPT09eCkpcmV0dXJuIE4uYWJvcnQoKTtUPVwiYWJvcnRcIjtmb3IoaSBpbntzdWNjZXNzOjEsZXJyb3I6MSxjb21wbGV0ZToxfSlOW2ldKHBbaV0pO2lmKGw9cW4oam4scCxuLE4pKXtOLnJlYWR5U3RhdGU9MSx1JiZkLnRyaWdnZXIoXCJhamF4U2VuZFwiLFtOLHBdKSxwLmFzeW5jJiZwLnRpbWVvdXQ+MCYmKHM9c2V0VGltZW91dChmdW5jdGlvbigpe04uYWJvcnQoXCJ0aW1lb3V0XCIpfSxwLnRpbWVvdXQpKTt0cnl7eD0xLGwuc2VuZCh5LGspfWNhdGNoKEMpe2lmKCEoMj54KSl0aHJvdyBDO2soLTEsQyl9fWVsc2UgaygtMSxcIk5vIFRyYW5zcG9ydFwiKTtmdW5jdGlvbiBrKGUsbixyLGkpe3ZhciBjLHksdix3LFQsQz1uOzIhPT14JiYoeD0yLHMmJmNsZWFyVGltZW91dChzKSxsPXQsYT1pfHxcIlwiLE4ucmVhZHlTdGF0ZT1lPjA/NDowLHImJih3PV9uKHAsTixyKSksZT49MjAwJiYzMDA+ZXx8MzA0PT09ZT8ocC5pZk1vZGlmaWVkJiYoVD1OLmdldFJlc3BvbnNlSGVhZGVyKFwiTGFzdC1Nb2RpZmllZFwiKSxUJiYoYi5sYXN0TW9kaWZpZWRbb109VCksVD1OLmdldFJlc3BvbnNlSGVhZGVyKFwiZXRhZ1wiKSxUJiYoYi5ldGFnW29dPVQpKSwyMDQ9PT1lPyhjPSEwLEM9XCJub2NvbnRlbnRcIik6MzA0PT09ZT8oYz0hMCxDPVwibm90bW9kaWZpZWRcIik6KGM9Rm4ocCx3KSxDPWMuc3RhdGUseT1jLmRhdGEsdj1jLmVycm9yLGM9IXYpKToodj1DLChlfHwhQykmJihDPVwiZXJyb3JcIiwwPmUmJihlPTApKSksTi5zdGF0dXM9ZSxOLnN0YXR1c1RleHQ9KG58fEMpK1wiXCIsYz9oLnJlc29sdmVXaXRoKGYsW3ksQyxOXSk6aC5yZWplY3RXaXRoKGYsW04sQyx2XSksTi5zdGF0dXNDb2RlKG0pLG09dCx1JiZkLnRyaWdnZXIoYz9cImFqYXhTdWNjZXNzXCI6XCJhamF4RXJyb3JcIixbTixwLGM/eTp2XSksZy5maXJlV2l0aChmLFtOLENdKSx1JiYoZC50cmlnZ2VyKFwiYWpheENvbXBsZXRlXCIsW04scF0pLC0tYi5hY3RpdmV8fGIuZXZlbnQudHJpZ2dlcihcImFqYXhTdG9wXCIpKSl9cmV0dXJuIE59LGdldFNjcmlwdDpmdW5jdGlvbihlLG4pe3JldHVybiBiLmdldChlLHQsbixcInNjcmlwdFwiKX0sZ2V0SlNPTjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGIuZ2V0KGUsdCxuLFwianNvblwiKX19KTtmdW5jdGlvbiBfbihlLG4scil7dmFyIGksbyxhLHMsdT1lLmNvbnRlbnRzLGw9ZS5kYXRhVHlwZXMsYz1lLnJlc3BvbnNlRmllbGRzO2ZvcihzIGluIGMpcyBpbiByJiYobltjW3NdXT1yW3NdKTt3aGlsZShcIipcIj09PWxbMF0pbC5zaGlmdCgpLG89PT10JiYobz1lLm1pbWVUeXBlfHxuLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpKTtpZihvKWZvcihzIGluIHUpaWYodVtzXSYmdVtzXS50ZXN0KG8pKXtsLnVuc2hpZnQocyk7YnJlYWt9aWYobFswXWluIHIpYT1sWzBdO2Vsc2V7Zm9yKHMgaW4gcil7aWYoIWxbMF18fGUuY29udmVydGVyc1tzK1wiIFwiK2xbMF1dKXthPXM7YnJlYWt9aXx8KGk9cyl9YT1hfHxpfXJldHVybiBhPyhhIT09bFswXSYmbC51bnNoaWZ0KGEpLHJbYV0pOnR9ZnVuY3Rpb24gRm4oZSx0KXt2YXIgbixyLGksbyxhPXt9LHM9MCx1PWUuZGF0YVR5cGVzLnNsaWNlKCksbD11WzBdO2lmKGUuZGF0YUZpbHRlciYmKHQ9ZS5kYXRhRmlsdGVyKHQsZS5kYXRhVHlwZSkpLHVbMV0pZm9yKGkgaW4gZS5jb252ZXJ0ZXJzKWFbaS50b0xvd2VyQ2FzZSgpXT1lLmNvbnZlcnRlcnNbaV07Zm9yKDtyPXVbKytzXTspaWYoXCIqXCIhPT1yKXtpZihcIipcIiE9PWwmJmwhPT1yKXtpZihpPWFbbCtcIiBcIityXXx8YVtcIiogXCIrcl0sIWkpZm9yKG4gaW4gYSlpZihvPW4uc3BsaXQoXCIgXCIpLG9bMV09PT1yJiYoaT1hW2wrXCIgXCIrb1swXV18fGFbXCIqIFwiK29bMF1dKSl7aT09PSEwP2k9YVtuXTphW25dIT09ITAmJihyPW9bMF0sdS5zcGxpY2Uocy0tLDAscikpO2JyZWFrfWlmKGkhPT0hMClpZihpJiZlW1widGhyb3dzXCJdKXQ9aSh0KTtlbHNlIHRyeXt0PWkodCl9Y2F0Y2goYyl7cmV0dXJue3N0YXRlOlwicGFyc2VyZXJyb3JcIixlcnJvcjppP2M6XCJObyBjb252ZXJzaW9uIGZyb20gXCIrbCtcIiB0byBcIityfX19bD1yfXJldHVybntzdGF0ZTpcInN1Y2Nlc3NcIixkYXRhOnR9fWIuYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6XCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwifSxjb250ZW50czp7c2NyaXB0Oi8oPzpqYXZhfGVjbWEpc2NyaXB0L30sY29udmVydGVyczp7XCJ0ZXh0IHNjcmlwdFwiOmZ1bmN0aW9uKGUpe3JldHVybiBiLmdsb2JhbEV2YWwoZSksZX19fSksYi5hamF4UHJlZmlsdGVyKFwic2NyaXB0XCIsZnVuY3Rpb24oZSl7ZS5jYWNoZT09PXQmJihlLmNhY2hlPSExKSxlLmNyb3NzRG9tYWluJiYoZS50eXBlPVwiR0VUXCIsZS5nbG9iYWw9ITEpfSksYi5hamF4VHJhbnNwb3J0KFwic2NyaXB0XCIsZnVuY3Rpb24oZSl7aWYoZS5jcm9zc0RvbWFpbil7dmFyIG4scj1vLmhlYWR8fGIoXCJoZWFkXCIpWzBdfHxvLmRvY3VtZW50RWxlbWVudDtyZXR1cm57c2VuZDpmdW5jdGlvbih0LGkpe249by5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpLG4uYXN5bmM9ITAsZS5zY3JpcHRDaGFyc2V0JiYobi5jaGFyc2V0PWUuc2NyaXB0Q2hhcnNldCksbi5zcmM9ZS51cmwsbi5vbmxvYWQ9bi5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oZSx0KXsodHx8IW4ucmVhZHlTdGF0ZXx8L2xvYWRlZHxjb21wbGV0ZS8udGVzdChuLnJlYWR5U3RhdGUpKSYmKG4ub25sb2FkPW4ub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsbi5wYXJlbnROb2RlJiZuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobiksbj1udWxsLHR8fGkoMjAwLFwic3VjY2Vzc1wiKSl9LHIuaW5zZXJ0QmVmb3JlKG4sci5maXJzdENoaWxkKX0sYWJvcnQ6ZnVuY3Rpb24oKXtuJiZuLm9ubG9hZCh0LCEwKX19fX0pO3ZhciBPbj1bXSxCbj0vKD0pXFw/KD89JnwkKXxcXD9cXD8vO2IuYWpheFNldHVwKHtqc29ucDpcImNhbGxiYWNrXCIsanNvbnBDYWxsYmFjazpmdW5jdGlvbigpe3ZhciBlPU9uLnBvcCgpfHxiLmV4cGFuZG8rXCJfXCIrdm4rKztyZXR1cm4gdGhpc1tlXT0hMCxlfX0pLGIuYWpheFByZWZpbHRlcihcImpzb24ganNvbnBcIixmdW5jdGlvbihuLHIsaSl7dmFyIG8sYSxzLHU9bi5qc29ucCE9PSExJiYoQm4udGVzdChuLnVybCk/XCJ1cmxcIjpcInN0cmluZ1wiPT10eXBlb2Ygbi5kYXRhJiYhKG4uY29udGVudFR5cGV8fFwiXCIpLmluZGV4T2YoXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIikmJkJuLnRlc3Qobi5kYXRhKSYmXCJkYXRhXCIpO3JldHVybiB1fHxcImpzb25wXCI9PT1uLmRhdGFUeXBlc1swXT8obz1uLmpzb25wQ2FsbGJhY2s9Yi5pc0Z1bmN0aW9uKG4uanNvbnBDYWxsYmFjayk/bi5qc29ucENhbGxiYWNrKCk6bi5qc29ucENhbGxiYWNrLHU/blt1XT1uW3VdLnJlcGxhY2UoQm4sXCIkMVwiK28pOm4uanNvbnAhPT0hMSYmKG4udXJsKz0oYm4udGVzdChuLnVybCk/XCImXCI6XCI/XCIpK24uanNvbnArXCI9XCIrbyksbi5jb252ZXJ0ZXJzW1wic2NyaXB0IGpzb25cIl09ZnVuY3Rpb24oKXtyZXR1cm4gc3x8Yi5lcnJvcihvK1wiIHdhcyBub3QgY2FsbGVkXCIpLHNbMF19LG4uZGF0YVR5cGVzWzBdPVwianNvblwiLGE9ZVtvXSxlW29dPWZ1bmN0aW9uKCl7cz1hcmd1bWVudHN9LGkuYWx3YXlzKGZ1bmN0aW9uKCl7ZVtvXT1hLG5bb10mJihuLmpzb25wQ2FsbGJhY2s9ci5qc29ucENhbGxiYWNrLE9uLnB1c2gobykpLHMmJmIuaXNGdW5jdGlvbihhKSYmYShzWzBdKSxzPWE9dH0pLFwic2NyaXB0XCIpOnR9KTt2YXIgUG4sUm4sV249MCwkbj1lLkFjdGl2ZVhPYmplY3QmJmZ1bmN0aW9uKCl7dmFyIGU7Zm9yKGUgaW4gUG4pUG5bZV0odCwhMCl9O2Z1bmN0aW9uIEluKCl7dHJ5e3JldHVybiBuZXcgZS5YTUxIdHRwUmVxdWVzdH1jYXRjaCh0KXt9fWZ1bmN0aW9uIHpuKCl7dHJ5e3JldHVybiBuZXcgZS5BY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTEhUVFBcIil9Y2F0Y2godCl7fX1iLmFqYXhTZXR0aW5ncy54aHI9ZS5BY3RpdmVYT2JqZWN0P2Z1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNMb2NhbCYmSW4oKXx8em4oKX06SW4sUm49Yi5hamF4U2V0dGluZ3MueGhyKCksYi5zdXBwb3J0LmNvcnM9ISFSbiYmXCJ3aXRoQ3JlZGVudGlhbHNcImluIFJuLFJuPWIuc3VwcG9ydC5hamF4PSEhUm4sUm4mJmIuYWpheFRyYW5zcG9ydChmdW5jdGlvbihuKXtpZighbi5jcm9zc0RvbWFpbnx8Yi5zdXBwb3J0LmNvcnMpe3ZhciByO3JldHVybntzZW5kOmZ1bmN0aW9uKGksbyl7dmFyIGEscyx1PW4ueGhyKCk7aWYobi51c2VybmFtZT91Lm9wZW4obi50eXBlLG4udXJsLG4uYXN5bmMsbi51c2VybmFtZSxuLnBhc3N3b3JkKTp1Lm9wZW4obi50eXBlLG4udXJsLG4uYXN5bmMpLG4ueGhyRmllbGRzKWZvcihzIGluIG4ueGhyRmllbGRzKXVbc109bi54aHJGaWVsZHNbc107bi5taW1lVHlwZSYmdS5vdmVycmlkZU1pbWVUeXBlJiZ1Lm92ZXJyaWRlTWltZVR5cGUobi5taW1lVHlwZSksbi5jcm9zc0RvbWFpbnx8aVtcIlgtUmVxdWVzdGVkLVdpdGhcIl18fChpW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXT1cIlhNTEh0dHBSZXF1ZXN0XCIpO3RyeXtmb3IocyBpbiBpKXUuc2V0UmVxdWVzdEhlYWRlcihzLGlbc10pfWNhdGNoKGwpe311LnNlbmQobi5oYXNDb250ZW50JiZuLmRhdGF8fG51bGwpLHI9ZnVuY3Rpb24oZSxpKXt2YXIgcyxsLGMscDt0cnl7aWYociYmKGl8fDQ9PT11LnJlYWR5U3RhdGUpKWlmKHI9dCxhJiYodS5vbnJlYWR5c3RhdGVjaGFuZ2U9Yi5ub29wLCRuJiZkZWxldGUgUG5bYV0pLGkpNCE9PXUucmVhZHlTdGF0ZSYmdS5hYm9ydCgpO2Vsc2V7cD17fSxzPXUuc3RhdHVzLGw9dS5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSxcInN0cmluZ1wiPT10eXBlb2YgdS5yZXNwb25zZVRleHQmJihwLnRleHQ9dS5yZXNwb25zZVRleHQpO3RyeXtjPXUuc3RhdHVzVGV4dH1jYXRjaChmKXtjPVwiXCJ9c3x8IW4uaXNMb2NhbHx8bi5jcm9zc0RvbWFpbj8xMjIzPT09cyYmKHM9MjA0KTpzPXAudGV4dD8yMDA6NDA0fX1jYXRjaChkKXtpfHxvKC0xLGQpfXAmJm8ocyxjLHAsbCl9LG4uYXN5bmM/ND09PXUucmVhZHlTdGF0ZT9zZXRUaW1lb3V0KHIpOihhPSsrV24sJG4mJihQbnx8KFBuPXt9LGIoZSkudW5sb2FkKCRuKSksUG5bYV09ciksdS5vbnJlYWR5c3RhdGVjaGFuZ2U9cik6cigpfSxhYm9ydDpmdW5jdGlvbigpe3ImJnIodCwhMCl9fX19KTt2YXIgWG4sVW4sVm49L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLFluPVJlZ0V4cChcIl4oPzooWystXSk9fCkoXCIreCtcIikoW2EteiVdKikkXCIsXCJpXCIpLEpuPS9xdWV1ZUhvb2tzJC8sR249W25yXSxRbj17XCIqXCI6W2Z1bmN0aW9uKGUsdCl7dmFyIG4scixpPXRoaXMuY3JlYXRlVHdlZW4oZSx0KSxvPVluLmV4ZWModCksYT1pLmN1cigpLHM9K2F8fDAsdT0xLGw9MjA7aWYobyl7aWYobj0rb1syXSxyPW9bM118fChiLmNzc051bWJlcltlXT9cIlwiOlwicHhcIiksXCJweFwiIT09ciYmcyl7cz1iLmNzcyhpLmVsZW0sZSwhMCl8fG58fDE7ZG8gdT11fHxcIi41XCIscy89dSxiLnN0eWxlKGkuZWxlbSxlLHMrcik7d2hpbGUodSE9PSh1PWkuY3VyKCkvYSkmJjEhPT11JiYtLWwpfWkudW5pdD1yLGkuc3RhcnQ9cyxpLmVuZD1vWzFdP3MrKG9bMV0rMSkqbjpufXJldHVybiBpfV19O2Z1bmN0aW9uIEtuKCl7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtYbj10fSksWG49Yi5ub3coKX1mdW5jdGlvbiBabihlLHQpe2IuZWFjaCh0LGZ1bmN0aW9uKHQsbil7dmFyIHI9KFFuW3RdfHxbXSkuY29uY2F0KFFuW1wiKlwiXSksaT0wLG89ci5sZW5ndGg7Zm9yKDtvPmk7aSsrKWlmKHJbaV0uY2FsbChlLHQsbikpcmV0dXJufSl9ZnVuY3Rpb24gZXIoZSx0LG4pe3ZhciByLGksbz0wLGE9R24ubGVuZ3RoLHM9Yi5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSB1LmVsZW19KSx1PWZ1bmN0aW9uKCl7aWYoaSlyZXR1cm4hMTt2YXIgdD1Ybnx8S24oKSxuPU1hdGgubWF4KDAsbC5zdGFydFRpbWUrbC5kdXJhdGlvbi10KSxyPW4vbC5kdXJhdGlvbnx8MCxvPTEtcixhPTAsdT1sLnR3ZWVucy5sZW5ndGg7Zm9yKDt1PmE7YSsrKWwudHdlZW5zW2FdLnJ1bihvKTtyZXR1cm4gcy5ub3RpZnlXaXRoKGUsW2wsbyxuXSksMT5vJiZ1P246KHMucmVzb2x2ZVdpdGgoZSxbbF0pLCExKX0sbD1zLnByb21pc2Uoe2VsZW06ZSxwcm9wczpiLmV4dGVuZCh7fSx0KSxvcHRzOmIuZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9fSxuKSxvcmlnaW5hbFByb3BlcnRpZXM6dCxvcmlnaW5hbE9wdGlvbnM6bixzdGFydFRpbWU6WG58fEtuKCksZHVyYXRpb246bi5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24odCxuKXt2YXIgcj1iLlR3ZWVuKGUsbC5vcHRzLHQsbixsLm9wdHMuc3BlY2lhbEVhc2luZ1t0XXx8bC5vcHRzLmVhc2luZyk7cmV0dXJuIGwudHdlZW5zLnB1c2gocikscn0sc3RvcDpmdW5jdGlvbih0KXt2YXIgbj0wLHI9dD9sLnR3ZWVucy5sZW5ndGg6MDtpZihpKXJldHVybiB0aGlzO2ZvcihpPSEwO3I+bjtuKyspbC50d2VlbnNbbl0ucnVuKDEpO3JldHVybiB0P3MucmVzb2x2ZVdpdGgoZSxbbCx0XSk6cy5yZWplY3RXaXRoKGUsW2wsdF0pLHRoaXN9fSksYz1sLnByb3BzO2Zvcih0cihjLGwub3B0cy5zcGVjaWFsRWFzaW5nKTthPm87bysrKWlmKHI9R25bb10uY2FsbChsLGUsYyxsLm9wdHMpKXJldHVybiByO3JldHVybiBabihsLGMpLGIuaXNGdW5jdGlvbihsLm9wdHMuc3RhcnQpJiZsLm9wdHMuc3RhcnQuY2FsbChlLGwpLGIuZngudGltZXIoYi5leHRlbmQodSx7ZWxlbTplLGFuaW06bCxxdWV1ZTpsLm9wdHMucXVldWV9KSksbC5wcm9ncmVzcyhsLm9wdHMucHJvZ3Jlc3MpLmRvbmUobC5vcHRzLmRvbmUsbC5vcHRzLmNvbXBsZXRlKS5mYWlsKGwub3B0cy5mYWlsKS5hbHdheXMobC5vcHRzLmFsd2F5cyl9ZnVuY3Rpb24gdHIoZSx0KXt2YXIgbixyLGksbyxhO2ZvcihpIGluIGUpaWYocj1iLmNhbWVsQ2FzZShpKSxvPXRbcl0sbj1lW2ldLGIuaXNBcnJheShuKSYmKG89blsxXSxuPWVbaV09blswXSksaSE9PXImJihlW3JdPW4sZGVsZXRlIGVbaV0pLGE9Yi5jc3NIb29rc1tyXSxhJiZcImV4cGFuZFwiaW4gYSl7bj1hLmV4cGFuZChuKSxkZWxldGUgZVtyXTtmb3IoaSBpbiBuKWkgaW4gZXx8KGVbaV09bltpXSx0W2ldPW8pfWVsc2UgdFtyXT1vfWIuQW5pbWF0aW9uPWIuZXh0ZW5kKGVyLHt0d2VlbmVyOmZ1bmN0aW9uKGUsdCl7Yi5pc0Z1bmN0aW9uKGUpPyh0PWUsZT1bXCIqXCJdKTplPWUuc3BsaXQoXCIgXCIpO3ZhciBuLHI9MCxpPWUubGVuZ3RoO2Zvcig7aT5yO3IrKyluPWVbcl0sUW5bbl09UW5bbl18fFtdLFFuW25dLnVuc2hpZnQodCl9LHByZWZpbHRlcjpmdW5jdGlvbihlLHQpe3Q/R24udW5zaGlmdChlKTpHbi5wdXNoKGUpfX0pO2Z1bmN0aW9uIG5yKGUsdCxuKXt2YXIgcixpLG8sYSxzLHUsbCxjLHAsZj10aGlzLGQ9ZS5zdHlsZSxoPXt9LGc9W10sbT1lLm5vZGVUeXBlJiZubihlKTtuLnF1ZXVlfHwoYz1iLl9xdWV1ZUhvb2tzKGUsXCJmeFwiKSxudWxsPT1jLnVucXVldWVkJiYoYy51bnF1ZXVlZD0wLHA9Yy5lbXB0eS5maXJlLGMuZW1wdHkuZmlyZT1mdW5jdGlvbigpe2MudW5xdWV1ZWR8fHAoKX0pLGMudW5xdWV1ZWQrKyxmLmFsd2F5cyhmdW5jdGlvbigpe2YuYWx3YXlzKGZ1bmN0aW9uKCl7Yy51bnF1ZXVlZC0tLGIucXVldWUoZSxcImZ4XCIpLmxlbmd0aHx8Yy5lbXB0eS5maXJlKCl9KX0pKSwxPT09ZS5ub2RlVHlwZSYmKFwiaGVpZ2h0XCJpbiB0fHxcIndpZHRoXCJpbiB0KSYmKG4ub3ZlcmZsb3c9W2Qub3ZlcmZsb3csZC5vdmVyZmxvd1gsZC5vdmVyZmxvd1ldLFwiaW5saW5lXCI9PT1iLmNzcyhlLFwiZGlzcGxheVwiKSYmXCJub25lXCI9PT1iLmNzcyhlLFwiZmxvYXRcIikmJihiLnN1cHBvcnQuaW5saW5lQmxvY2tOZWVkc0xheW91dCYmXCJpbmxpbmVcIiE9PXVuKGUubm9kZU5hbWUpP2Quem9vbT0xOmQuZGlzcGxheT1cImlubGluZS1ibG9ja1wiKSksbi5vdmVyZmxvdyYmKGQub3ZlcmZsb3c9XCJoaWRkZW5cIixiLnN1cHBvcnQuc2hyaW5rV3JhcEJsb2Nrc3x8Zi5hbHdheXMoZnVuY3Rpb24oKXtkLm92ZXJmbG93PW4ub3ZlcmZsb3dbMF0sZC5vdmVyZmxvd1g9bi5vdmVyZmxvd1sxXSxkLm92ZXJmbG93WT1uLm92ZXJmbG93WzJdfSkpO2ZvcihpIGluIHQpaWYoYT10W2ldLFZuLmV4ZWMoYSkpe2lmKGRlbGV0ZSB0W2ldLHU9dXx8XCJ0b2dnbGVcIj09PWEsYT09PShtP1wiaGlkZVwiOlwic2hvd1wiKSljb250aW51ZTtnLnB1c2goaSl9aWYobz1nLmxlbmd0aCl7cz1iLl9kYXRhKGUsXCJmeHNob3dcIil8fGIuX2RhdGEoZSxcImZ4c2hvd1wiLHt9KSxcImhpZGRlblwiaW4gcyYmKG09cy5oaWRkZW4pLHUmJihzLmhpZGRlbj0hbSksbT9iKGUpLnNob3coKTpmLmRvbmUoZnVuY3Rpb24oKXtiKGUpLmhpZGUoKX0pLGYuZG9uZShmdW5jdGlvbigpe3ZhciB0O2IuX3JlbW92ZURhdGEoZSxcImZ4c2hvd1wiKTtmb3IodCBpbiBoKWIuc3R5bGUoZSx0LGhbdF0pfSk7Zm9yKGk9MDtvPmk7aSsrKXI9Z1tpXSxsPWYuY3JlYXRlVHdlZW4ocixtP3Nbcl06MCksaFtyXT1zW3JdfHxiLnN0eWxlKGUsciksciBpbiBzfHwoc1tyXT1sLnN0YXJ0LG0mJihsLmVuZD1sLnN0YXJ0LGwuc3RhcnQ9XCJ3aWR0aFwiPT09cnx8XCJoZWlnaHRcIj09PXI/MTowKSl9fWZ1bmN0aW9uIHJyKGUsdCxuLHIsaSl7cmV0dXJuIG5ldyByci5wcm90b3R5cGUuaW5pdChlLHQsbixyLGkpfWIuVHdlZW49cnIscnIucHJvdG90eXBlPXtjb25zdHJ1Y3Rvcjpycixpbml0OmZ1bmN0aW9uKGUsdCxuLHIsaSxvKXt0aGlzLmVsZW09ZSx0aGlzLnByb3A9bix0aGlzLmVhc2luZz1pfHxcInN3aW5nXCIsdGhpcy5vcHRpb25zPXQsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5kPXIsdGhpcy51bml0PW98fChiLmNzc051bWJlcltuXT9cIlwiOlwicHhcIil9LGN1cjpmdW5jdGlvbigpe3ZhciBlPXJyLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBlJiZlLmdldD9lLmdldCh0aGlzKTpyci5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oZSl7dmFyIHQsbj1yci5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5wb3M9dD10aGlzLm9wdGlvbnMuZHVyYXRpb24/Yi5lYXNpbmdbdGhpcy5lYXNpbmddKGUsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmUsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6ZSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqdCt0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxuJiZuLnNldD9uLnNldCh0aGlzKTpyci5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSxyci5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9cnIucHJvdG90eXBlLHJyLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gbnVsbD09ZS5lbGVtW2UucHJvcF18fGUuZWxlbS5zdHlsZSYmbnVsbCE9ZS5lbGVtLnN0eWxlW2UucHJvcF0/KHQ9Yi5jc3MoZS5lbGVtLGUucHJvcCxcIlwiKSx0JiZcImF1dG9cIiE9PXQ/dDowKTplLmVsZW1bZS5wcm9wXX0sc2V0OmZ1bmN0aW9uKGUpe2IuZnguc3RlcFtlLnByb3BdP2IuZnguc3RlcFtlLnByb3BdKGUpOmUuZWxlbS5zdHlsZSYmKG51bGwhPWUuZWxlbS5zdHlsZVtiLmNzc1Byb3BzW2UucHJvcF1dfHxiLmNzc0hvb2tzW2UucHJvcF0pP2Iuc3R5bGUoZS5lbGVtLGUucHJvcCxlLm5vdytlLnVuaXQpOmUuZWxlbVtlLnByb3BdPWUubm93fX19LHJyLnByb3BIb29rcy5zY3JvbGxUb3A9cnIucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihlKXtlLmVsZW0ubm9kZVR5cGUmJmUuZWxlbS5wYXJlbnROb2RlJiYoZS5lbGVtW2UucHJvcF09ZS5ub3cpfX0sYi5lYWNoKFtcInRvZ2dsZVwiLFwic2hvd1wiLFwiaGlkZVwiXSxmdW5jdGlvbihlLHQpe3ZhciBuPWIuZm5bdF07Yi5mblt0XT1mdW5jdGlvbihlLHIsaSl7cmV0dXJuIG51bGw9PWV8fFwiYm9vbGVhblwiPT10eXBlb2YgZT9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUoaXIodCwhMCksZSxyLGkpfX0pLGIuZm4uZXh0ZW5kKHtmYWRlVG86ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMuZmlsdGVyKG5uKS5jc3MoXCJvcGFjaXR5XCIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6dH0sZSxuLHIpfSxhbmltYXRlOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpPWIuaXNFbXB0eU9iamVjdChlKSxvPWIuc3BlZWQodCxuLHIpLGE9ZnVuY3Rpb24oKXt2YXIgdD1lcih0aGlzLGIuZXh0ZW5kKHt9LGUpLG8pO2EuZmluaXNoPWZ1bmN0aW9uKCl7dC5zdG9wKCEwKX0sKGl8fGIuX2RhdGEodGhpcyxcImZpbmlzaFwiKSkmJnQuc3RvcCghMCl9O3JldHVybiBhLmZpbmlzaD1hLGl8fG8ucXVldWU9PT0hMT90aGlzLmVhY2goYSk6dGhpcy5xdWV1ZShvLnF1ZXVlLGEpfSxzdG9wOmZ1bmN0aW9uKGUsbixyKXt2YXIgaT1mdW5jdGlvbihlKXt2YXIgdD1lLnN0b3A7ZGVsZXRlIGUuc3RvcCx0KHIpfTtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgZSYmKHI9bixuPWUsZT10KSxuJiZlIT09ITEmJnRoaXMucXVldWUoZXx8XCJmeFwiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD0hMCxuPW51bGwhPWUmJmUrXCJxdWV1ZUhvb2tzXCIsbz1iLnRpbWVycyxhPWIuX2RhdGEodGhpcyk7aWYobilhW25dJiZhW25dLnN0b3AmJmkoYVtuXSk7ZWxzZSBmb3IobiBpbiBhKWFbbl0mJmFbbl0uc3RvcCYmSm4udGVzdChuKSYmaShhW25dKTtmb3Iobj1vLmxlbmd0aDtuLS07KW9bbl0uZWxlbSE9PXRoaXN8fG51bGwhPWUmJm9bbl0ucXVldWUhPT1lfHwob1tuXS5hbmltLnN0b3AociksdD0hMSxvLnNwbGljZShuLDEpKTsodHx8IXIpJiZiLmRlcXVldWUodGhpcyxlKX0pfSxmaW5pc2g6ZnVuY3Rpb24oZSl7cmV0dXJuIGUhPT0hMSYmKGU9ZXx8XCJmeFwiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdCxuPWIuX2RhdGEodGhpcykscj1uW2UrXCJxdWV1ZVwiXSxpPW5bZStcInF1ZXVlSG9va3NcIl0sbz1iLnRpbWVycyxhPXI/ci5sZW5ndGg6MDtmb3Iobi5maW5pc2g9ITAsYi5xdWV1ZSh0aGlzLGUsW10pLGkmJmkuY3VyJiZpLmN1ci5maW5pc2gmJmkuY3VyLmZpbmlzaC5jYWxsKHRoaXMpLHQ9by5sZW5ndGg7dC0tOylvW3RdLmVsZW09PT10aGlzJiZvW3RdLnF1ZXVlPT09ZSYmKG9bdF0uYW5pbS5zdG9wKCEwKSxvLnNwbGljZSh0LDEpKTtmb3IodD0wO2E+dDt0Kyspclt0XSYmclt0XS5maW5pc2gmJnJbdF0uZmluaXNoLmNhbGwodGhpcyk7ZGVsZXRlIG4uZmluaXNofSl9fSk7ZnVuY3Rpb24gaXIoZSx0KXt2YXIgbixyPXtoZWlnaHQ6ZX0saT0wO2Zvcih0PXQ/MTowOzQ+aTtpKz0yLXQpbj1adFtpXSxyW1wibWFyZ2luXCIrbl09cltcInBhZGRpbmdcIituXT1lO3JldHVybiB0JiYoci5vcGFjaXR5PXIud2lkdGg9ZSkscn1iLmVhY2goe3NsaWRlRG93bjppcihcInNob3dcIiksc2xpZGVVcDppcihcImhpZGVcIiksc2xpZGVUb2dnbGU6aXIoXCJ0b2dnbGVcIiksZmFkZUluOntvcGFjaXR5Olwic2hvd1wifSxmYWRlT3V0OntvcGFjaXR5OlwiaGlkZVwifSxmYWRlVG9nZ2xlOntvcGFjaXR5OlwidG9nZ2xlXCJ9fSxmdW5jdGlvbihlLHQpe2IuZm5bZV09ZnVuY3Rpb24oZSxuLHIpe3JldHVybiB0aGlzLmFuaW1hdGUodCxlLG4scil9fSksYi5zcGVlZD1mdW5jdGlvbihlLHQsbil7dmFyIHI9ZSYmXCJvYmplY3RcIj09dHlwZW9mIGU/Yi5leHRlbmQoe30sZSk6e2NvbXBsZXRlOm58fCFuJiZ0fHxiLmlzRnVuY3Rpb24oZSkmJmUsZHVyYXRpb246ZSxlYXNpbmc6biYmdHx8dCYmIWIuaXNGdW5jdGlvbih0KSYmdH07cmV0dXJuIHIuZHVyYXRpb249Yi5meC5vZmY/MDpcIm51bWJlclwiPT10eXBlb2Ygci5kdXJhdGlvbj9yLmR1cmF0aW9uOnIuZHVyYXRpb24gaW4gYi5meC5zcGVlZHM/Yi5meC5zcGVlZHNbci5kdXJhdGlvbl06Yi5meC5zcGVlZHMuX2RlZmF1bHQsKG51bGw9PXIucXVldWV8fHIucXVldWU9PT0hMCkmJihyLnF1ZXVlPVwiZnhcIiksci5vbGQ9ci5jb21wbGV0ZSxyLmNvbXBsZXRlPWZ1bmN0aW9uKCl7Yi5pc0Z1bmN0aW9uKHIub2xkKSYmci5vbGQuY2FsbCh0aGlzKSxyLnF1ZXVlJiZiLmRlcXVldWUodGhpcyxyLnF1ZXVlKX0scn0sYi5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihlKXtyZXR1cm4gZX0sc3dpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuLjUtTWF0aC5jb3MoZSpNYXRoLlBJKS8yfX0sYi50aW1lcnM9W10sYi5meD1yci5wcm90b3R5cGUuaW5pdCxiLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgZSxuPWIudGltZXJzLHI9MDtmb3IoWG49Yi5ub3coKTtuLmxlbmd0aD5yO3IrKyllPW5bcl0sZSgpfHxuW3JdIT09ZXx8bi5zcGxpY2Uoci0tLDEpO24ubGVuZ3RofHxiLmZ4LnN0b3AoKSxYbj10fSxiLmZ4LnRpbWVyPWZ1bmN0aW9uKGUpe2UoKSYmYi50aW1lcnMucHVzaChlKSYmYi5meC5zdGFydCgpfSxiLmZ4LmludGVydmFsPTEzLGIuZnguc3RhcnQ9ZnVuY3Rpb24oKXtVbnx8KFVuPXNldEludGVydmFsKGIuZngudGljayxiLmZ4LmludGVydmFsKSl9LGIuZnguc3RvcD1mdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwoVW4pLFVuPW51bGx9LGIuZnguc3BlZWRzPXtzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9LGIuZnguc3RlcD17fSxiLmV4cHImJmIuZXhwci5maWx0ZXJzJiYoYi5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGIuZ3JlcChiLnRpbWVycyxmdW5jdGlvbih0KXtyZXR1cm4gZT09PXQuZWxlbX0pLmxlbmd0aH0pLGIuZm4ub2Zmc2V0PWZ1bmN0aW9uKGUpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGU9PT10P3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe2Iub2Zmc2V0LnNldE9mZnNldCh0aGlzLGUsdCl9KTt2YXIgbixyLG89e3RvcDowLGxlZnQ6MH0sYT10aGlzWzBdLHM9YSYmYS5vd25lckRvY3VtZW50O2lmKHMpcmV0dXJuIG49cy5kb2N1bWVudEVsZW1lbnQsYi5jb250YWlucyhuLGEpPyh0eXBlb2YgYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QhPT1pJiYobz1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSxyPW9yKHMpLHt0b3A6by50b3ArKHIucGFnZVlPZmZzZXR8fG4uc2Nyb2xsVG9wKS0obi5jbGllbnRUb3B8fDApLGxlZnQ6by5sZWZ0KyhyLnBhZ2VYT2Zmc2V0fHxuLnNjcm9sbExlZnQpLShuLmNsaWVudExlZnR8fDApfSk6b30sYi5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihlLHQsbil7dmFyIHI9Yi5jc3MoZSxcInBvc2l0aW9uXCIpO1wic3RhdGljXCI9PT1yJiYoZS5zdHlsZS5wb3NpdGlvbj1cInJlbGF0aXZlXCIpO3ZhciBpPWIoZSksbz1pLm9mZnNldCgpLGE9Yi5jc3MoZSxcInRvcFwiKSxzPWIuY3NzKGUsXCJsZWZ0XCIpLHU9KFwiYWJzb2x1dGVcIj09PXJ8fFwiZml4ZWRcIj09PXIpJiZiLmluQXJyYXkoXCJhdXRvXCIsW2Esc10pPi0xLGw9e30sYz17fSxwLGY7dT8oYz1pLnBvc2l0aW9uKCkscD1jLnRvcCxmPWMubGVmdCk6KHA9cGFyc2VGbG9hdChhKXx8MCxmPXBhcnNlRmxvYXQocyl8fDApLGIuaXNGdW5jdGlvbih0KSYmKHQ9dC5jYWxsKGUsbixvKSksbnVsbCE9dC50b3AmJihsLnRvcD10LnRvcC1vLnRvcCtwKSxudWxsIT10LmxlZnQmJihsLmxlZnQ9dC5sZWZ0LW8ubGVmdCtmKSxcInVzaW5nXCJpbiB0P3QudXNpbmcuY2FsbChlLGwpOmkuY3NzKGwpfX0sYi5mbi5leHRlbmQoe3Bvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpc1swXSl7dmFyIGUsdCxuPXt0b3A6MCxsZWZ0OjB9LHI9dGhpc1swXTtyZXR1cm5cImZpeGVkXCI9PT1iLmNzcyhyLFwicG9zaXRpb25cIik/dD1yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihlPXRoaXMub2Zmc2V0UGFyZW50KCksdD10aGlzLm9mZnNldCgpLGIubm9kZU5hbWUoZVswXSxcImh0bWxcIil8fChuPWUub2Zmc2V0KCkpLG4udG9wKz1iLmNzcyhlWzBdLFwiYm9yZGVyVG9wV2lkdGhcIiwhMCksbi5sZWZ0Kz1iLmNzcyhlWzBdLFwiYm9yZGVyTGVmdFdpZHRoXCIsITApKSx7dG9wOnQudG9wLW4udG9wLWIuY3NzKHIsXCJtYXJnaW5Ub3BcIiwhMCksbGVmdDp0LmxlZnQtbi5sZWZ0LWIuY3NzKHIsXCJtYXJnaW5MZWZ0XCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXMub2Zmc2V0UGFyZW50fHxvLmRvY3VtZW50RWxlbWVudDt3aGlsZShlJiYhYi5ub2RlTmFtZShlLFwiaHRtbFwiKSYmXCJzdGF0aWNcIj09PWIuY3NzKGUsXCJwb3NpdGlvblwiKSllPWUub2Zmc2V0UGFyZW50O3JldHVybiBlfHxvLmRvY3VtZW50RWxlbWVudH0pfX0pLGIuZWFjaCh7c2Nyb2xsTGVmdDpcInBhZ2VYT2Zmc2V0XCIsc2Nyb2xsVG9wOlwicGFnZVlPZmZzZXRcIn0sZnVuY3Rpb24oZSxuKXt2YXIgcj0vWS8udGVzdChuKTtiLmZuW2VdPWZ1bmN0aW9uKGkpe3JldHVybiBiLmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKGUsaSxvKXt2YXIgYT1vcihlKTtyZXR1cm4gbz09PXQ/YT9uIGluIGE/YVtuXTphLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtpXTplW2ldOihhP2Euc2Nyb2xsVG8ocj9iKGEpLnNjcm9sbExlZnQoKTpvLHI/bzpiKGEpLnNjcm9sbFRvcCgpKTplW2ldPW8sdCl9LGUsaSxhcmd1bWVudHMubGVuZ3RoLG51bGwpfX0pO2Z1bmN0aW9uIG9yKGUpe3JldHVybiBiLmlzV2luZG93KGUpP2U6OT09PWUubm9kZVR5cGU/ZS5kZWZhdWx0Vmlld3x8ZS5wYXJlbnRXaW5kb3c6ITF9Yi5lYWNoKHtIZWlnaHQ6XCJoZWlnaHRcIixXaWR0aDpcIndpZHRoXCJ9LGZ1bmN0aW9uKGUsbil7Yi5lYWNoKHtwYWRkaW5nOlwiaW5uZXJcIitlLGNvbnRlbnQ6bixcIlwiOlwib3V0ZXJcIitlfSxmdW5jdGlvbihyLGkpe2IuZm5baV09ZnVuY3Rpb24oaSxvKXt2YXIgYT1hcmd1bWVudHMubGVuZ3RoJiYocnx8XCJib29sZWFuXCIhPXR5cGVvZiBpKSxzPXJ8fChpPT09ITB8fG89PT0hMD9cIm1hcmdpblwiOlwiYm9yZGVyXCIpO3JldHVybiBiLmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKG4scixpKXt2YXIgbztyZXR1cm4gYi5pc1dpbmRvdyhuKT9uLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtcImNsaWVudFwiK2VdOjk9PT1uLm5vZGVUeXBlPyhvPW4uZG9jdW1lbnRFbGVtZW50LE1hdGgubWF4KG4uYm9keVtcInNjcm9sbFwiK2VdLG9bXCJzY3JvbGxcIitlXSxuLmJvZHlbXCJvZmZzZXRcIitlXSxvW1wib2Zmc2V0XCIrZV0sb1tcImNsaWVudFwiK2VdKSk6aT09PXQ/Yi5jc3MobixyLHMpOmIuc3R5bGUobixyLGkscyl9LG4sYT9pOnQsYSxudWxsKX19KX0pLGUualF1ZXJ5PWUuJD1iLFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lLmFtZC5qUXVlcnkmJmRlZmluZShcImpxdWVyeVwiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGJ9KX0pKHdpbmRvdyk7XG47IGJyb3dzZXJpZnlfc2hpbV9fZGVmaW5lX19tb2R1bGVfX2V4cG9ydF9fKHR5cGVvZiAkICE9IFwidW5kZWZpbmVkXCIgPyAkIDogd2luZG93LiQpO1xuXG59KS5jYWxsKGdsb2JhbCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBmdW5jdGlvbiBkZWZpbmVFeHBvcnQoZXgpIHsgbW9kdWxlLmV4cG9ydHMgPSBleDsgfSk7XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KSIsIi8qXHJcbiogS2VuZG8gVUkgdjIwMTQuMy4xMTE5IChodHRwOi8vd3d3LnRlbGVyaWsuY29tL2tlbmRvLXVpKVxyXG4qIENvcHlyaWdodCAyMDE0IFRlbGVyaWsgQUQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbipcclxuKiBLZW5kbyBVSSBjb21tZXJjaWFsIGxpY2Vuc2VzIG1heSBiZSBvYnRhaW5lZCBhdFxyXG4qIGh0dHA6Ly93d3cudGVsZXJpay5jb20vcHVyY2hhc2UvbGljZW5zZS1hZ3JlZW1lbnQva2VuZG8tdWktY29tcGxldGVcclxuKiBJZiB5b3UgZG8gbm90IG93biBhIGNvbW1lcmNpYWwgbGljZW5zZSwgdGhpcyBmaWxlIHNoYWxsIGJlIGdvdmVybmVkIGJ5IHRoZSB0cmlhbCBsaWNlbnNlIHRlcm1zLlxyXG4qL1xyXG4oZnVuY3Rpb24oZixkZWZpbmUpe2RlZmluZShbXSxmKX0pKGZ1bmN0aW9uKCl7IWZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiBpKCl7fWZ1bmN0aW9uIHIoZSx0KXtpZih0KXJldHVyblwiJ1wiK2Uuc3BsaXQoXCInXCIpLmpvaW4oXCJcXFxcJ1wiKS5zcGxpdCgnXFxcXFwiJykuam9pbignXFxcXFxcXFxcXFxcXCInKS5yZXBsYWNlKC9cXG4vZyxcIlxcXFxuXCIpLnJlcGxhY2UoL1xcci9nLFwiXFxcXHJcIikucmVwbGFjZSgvXFx0L2csXCJcXFxcdFwiKStcIidcIjt2YXIgbj1lLmNoYXJBdCgwKSxpPWUuc3Vic3RyaW5nKDEpO3JldHVyblwiPVwiPT09bj9cIisoXCIraStcIikrXCI6XCI6XCI9PT1uP1wiK2UoXCIraStcIikrXCI6XCI7XCIrZStcIjtvKz1cIn1mdW5jdGlvbiBvKGUsdCxuKXtyZXR1cm4gZSs9XCJcIix0PXR8fDIsbj10LWUubGVuZ3RoLG4/Tlt0XS5zdWJzdHJpbmcoMCxuKStlOmV9ZnVuY3Rpb24gYShlKXt2YXIgdD1lLmNzcyhndC5zdXBwb3J0LnRyYW5zaXRpb25zLmNzcytcImJveC1zaGFkb3dcIil8fGUuY3NzKFwiYm94LXNoYWRvd1wiKSxuPXQ/dC5tYXRjaChUdCl8fFswLDAsMCwwLDBdOlswLDAsMCwwLDBdLGk9YnQubWF4KCtuWzNdLCsobls0XXx8MCkpO3JldHVybntsZWZ0Oi1uWzFdK2kscmlnaHQ6K25bMV0raSxib3R0b206K25bMl0raX19ZnVuY3Rpb24gcyh0LG4pe3ZhciBpLHIsbyxzLGwsYyxkLHUsaD14dC5icm93c2VyLHA9XCJydGxcIj09dC5jc3MoXCJkaXJlY3Rpb25cIik7cmV0dXJuIHQucGFyZW50KCkuaGFzQ2xhc3MoXCJrLWFuaW1hdGlvbi1jb250YWluZXJcIik/KGQ9dC5wYXJlbnQoXCIuay1hbmltYXRpb24tY29udGFpbmVyXCIpLHU9ZFswXS5zdHlsZSxkLmlzKFwiOmhpZGRlblwiKSYmZC5zaG93KCksaT1DdC50ZXN0KHUud2lkdGgpfHxDdC50ZXN0KHUuaGVpZ2h0KSxpfHxkLmNzcyh7d2lkdGg6dC5vdXRlcldpZHRoKCksaGVpZ2h0OnQub3V0ZXJIZWlnaHQoKSxib3hTaXppbmc6XCJjb250ZW50LWJveFwiLG1vekJveFNpemluZzpcImNvbnRlbnQtYm94XCIsd2Via2l0Qm94U2l6aW5nOlwiY29udGVudC1ib3hcIn0pKToocj1hKHQpLG89dFswXS5zdHlsZS53aWR0aCxzPXRbMF0uc3R5bGUuaGVpZ2h0LGw9Q3QudGVzdChvKSxjPUN0LnRlc3QocyksaC5vcGVyYSYmKHIubGVmdD1yLnJpZ2h0PXIuYm90dG9tPTUpLGk9bHx8YywhbCYmKCFufHxuJiZvKSYmKG89dC5vdXRlcldpZHRoKCkpLCFjJiYoIW58fG4mJnMpJiYocz10Lm91dGVySGVpZ2h0KCkpLHQud3JhcChlKFwiPGRpdi8+XCIpLmFkZENsYXNzKFwiay1hbmltYXRpb24tY29udGFpbmVyXCIpLmNzcyh7d2lkdGg6byxoZWlnaHQ6cyxtYXJnaW5MZWZ0OnIubGVmdCoocD8xOi0xKSxwYWRkaW5nTGVmdDpyLmxlZnQscGFkZGluZ1JpZ2h0OnIucmlnaHQscGFkZGluZ0JvdHRvbTpyLmJvdHRvbX0pKSxpJiZ0LmNzcyh7d2lkdGg6XCIxMDAlXCIsaGVpZ2h0OlwiMTAwJVwiLGJveFNpemluZzpcImJvcmRlci1ib3hcIixtb3pCb3hTaXppbmc6XCJib3JkZXItYm94XCIsd2Via2l0Qm94U2l6aW5nOlwiYm9yZGVyLWJveFwifSkpLGgubXNpZSYmYnQuZmxvb3IoaC52ZXJzaW9uKTw9NyYmKHQuY3NzKHt6b29tOjF9KSx0LmNoaWxkcmVuKFwiLmstbWVudVwiKS53aWR0aCh0LndpZHRoKCkpKSx0LnBhcmVudCgpfWZ1bmN0aW9uIGwoZSl7dmFyIHQ9MSxuPWFyZ3VtZW50cy5sZW5ndGg7Zm9yKHQ9MTtuPnQ7dCsrKWMoZSxhcmd1bWVudHNbdF0pO3JldHVybiBlfWZ1bmN0aW9uIGMoZSx0KXt2YXIgbixpLHIsbyxhLHM9Z3QuZGF0YS5PYnNlcnZhYmxlQXJyYXksbD1ndC5kYXRhLkxhenlPYnNlcnZhYmxlQXJyYXksZD1ndC5kYXRhLkRhdGFTb3VyY2UsdT1ndC5kYXRhLkhpZXJhcmNoaWNhbERhdGFTb3VyY2U7Zm9yKG4gaW4gdClpPXRbbl0scj10eXBlb2YgaSxvPXI9PT1QdCYmbnVsbCE9PWk/aS5jb25zdHJ1Y3RvcjpudWxsLG8mJm8hPT1BcnJheSYmbyE9PXMmJm8hPT1sJiZvIT09ZCYmbyE9PXU/aSBpbnN0YW5jZW9mIERhdGU/ZVtuXT1uZXcgRGF0ZShpLmdldFRpbWUoKSk6TShpLmNsb25lKT9lW25dPWkuY2xvbmUoKTooYT1lW25dLGVbbl09dHlwZW9mIGE9PT1QdD9hfHx7fTp7fSxjKGVbbl0saSkpOnIhPT1GdCYmKGVbbl09aSk7cmV0dXJuIGV9ZnVuY3Rpb24gZChlLHQsaSl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSYmdFtyXS50ZXN0KGUpKXJldHVybiByO3JldHVybiBpIT09bj9pOmV9ZnVuY3Rpb24gdShlKXtyZXR1cm4gZS5yZXBsYWNlKC8oW2Etel1bQS1aXSkvZyxmdW5jdGlvbihlKXtyZXR1cm4gZS5jaGFyQXQoMCkrXCItXCIrZS5jaGFyQXQoMSkudG9Mb3dlckNhc2UoKX0pfWZ1bmN0aW9uIGgoZSl7cmV0dXJuIGUucmVwbGFjZSgvXFwtKFxcdykvZyxmdW5jdGlvbihlLHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9KX1mdW5jdGlvbiBwKHQsbil7dmFyIGkscj17fTtyZXR1cm4gZG9jdW1lbnQuZGVmYXVsdFZpZXcmJmRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGU/KGk9ZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh0LFwiXCIpLG4mJmUuZWFjaChuLGZ1bmN0aW9uKGUsdCl7clt0XT1pLmdldFByb3BlcnR5VmFsdWUodCl9KSk6KGk9dC5jdXJyZW50U3R5bGUsbiYmZS5lYWNoKG4sZnVuY3Rpb24oZSx0KXtyW3RdPWlbaCh0KV19KSksZ3Quc2l6ZShyKXx8KHI9aSkscn1mdW5jdGlvbiBmKGUpe3ZhciB0LG49MDtmb3IodCBpbiBlKWUuaGFzT3duUHJvcGVydHkodCkmJlwidG9KU09OXCIhPXQmJm4rKztyZXR1cm4gbn1mdW5jdGlvbiBnKGUsbixpKXtufHwobj1cIm9mZnNldFwiKTt2YXIgcj1lW25dKCk7cmV0dXJuIHh0LmJyb3dzZXIubXNpZSYmKHh0LnBvaW50ZXJzfHx4dC5tc1BvaW50ZXJzKSYmIWkmJihyLnRvcC09dC5wYWdlWU9mZnNldC1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wLHIubGVmdC09dC5wYWdlWE9mZnNldC1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCkscn1mdW5jdGlvbiBtKGUpe3ZhciB0PXt9O3JldHVybiB2dChcInN0cmluZ1wiPT10eXBlb2YgZT9lLnNwbGl0KFwiIFwiKTplLGZ1bmN0aW9uKGUpe3RbZV09dGhpc30pLHR9ZnVuY3Rpb24gdihlKXtyZXR1cm4gbmV3IGd0LmVmZmVjdHMuRWxlbWVudChlKX1mdW5jdGlvbiBfKGUsdCxuLGkpe3JldHVybiB0eXBlb2YgZT09PUV0JiYoTSh0KSYmKGk9dCx0PTQwMCxuPSExKSxNKG4pJiYoaT1uLG49ITEpLHR5cGVvZiB0PT09enQmJihuPXQsdD00MDApLGU9e2VmZmVjdHM6ZSxkdXJhdGlvbjp0LHJldmVyc2U6bixjb21wbGV0ZTppfSksbXQoe2VmZmVjdHM6e30sZHVyYXRpb246NDAwLHJldmVyc2U6ITEsaW5pdDp3dCx0ZWFyZG93bjp3dCxoaWRlOiExfSxlLHtjb21wbGV0ZUNhbGxiYWNrOmUuY29tcGxldGUsY29tcGxldGU6d3R9KX1mdW5jdGlvbiB5KHQsbixpLHIsbyl7Zm9yKHZhciBhLHM9MCxsPXQubGVuZ3RoO2w+cztzKyspYT1lKHRbc10pLGEucXVldWUoZnVuY3Rpb24oKXtVLnByb21pc2UoYSxfKG4saSxyLG8pKX0pO3JldHVybiB0fWZ1bmN0aW9uIHcoZSx0LG4saSl7cmV0dXJuIHQmJih0PXQuc3BsaXQoXCIgXCIpLHZ0KHQsZnVuY3Rpb24odCxuKXtlLnRvZ2dsZUNsYXNzKG4saSl9KSksZX1mdW5jdGlvbiBiKGUpe3JldHVybihcIlwiK2UpLnJlcGxhY2UoVyxcIiZhbXA7XCIpLnJlcGxhY2UoaixcIiZsdDtcIikucmVwbGFjZSgkLFwiJmd0O1wiKS5yZXBsYWNlKEcsXCImcXVvdDtcIikucmVwbGFjZShxLFwiJiMzOTtcIil9ZnVuY3Rpb24gayhlLHQpe3ZhciBpO3JldHVybiAwPT09dC5pbmRleE9mKFwiZGF0YVwiKSYmKHQ9dC5zdWJzdHJpbmcoNCksdD10LmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpK3Quc3Vic3RyaW5nKDEpKSx0PXQucmVwbGFjZShudCxcIi0kMVwiKSxpPWUuZ2V0QXR0cmlidXRlKFwiZGF0YS1cIitndC5ucyt0KSxudWxsPT09aT9pPW46XCJudWxsXCI9PT1pP2k9bnVsbDpcInRydWVcIj09PWk/aT0hMDpcImZhbHNlXCI9PT1pP2k9ITE6RHQudGVzdChpKT9pPXBhcnNlRmxvYXQoaSk6ZXQudGVzdChpKSYmIXR0LnRlc3QoaSkmJihpPUZ1bmN0aW9uKFwicmV0dXJuIChcIitpK1wiKVwiKSgpKSxpfWZ1bmN0aW9uIHgodCxpKXt2YXIgcixvLGE9e307Zm9yKHIgaW4gaSlvPWsodCxyKSxvIT09biYmKFoudGVzdChyKSYmKG89Z3QudGVtcGxhdGUoZShcIiNcIitvKS5odG1sKCkpKSxhW3JdPW8pO3JldHVybiBhfWZ1bmN0aW9uIEModCxuKXtyZXR1cm4gZS5jb250YWlucyh0LG4pPy0xOjF9ZnVuY3Rpb24gUygpe3ZhciB0PWUodGhpcyk7cmV0dXJuIGUuaW5BcnJheSh0LmF0dHIoXCJkYXRhLVwiK2d0Lm5zK1wicm9sZVwiKSxbXCJzbGlkZXJcIixcInJhbmdlc2xpZGVyXCJdKT4tMXx8dC5pcyhcIjp2aXNpYmxlXCIpfWZ1bmN0aW9uIFQoZSx0KXt2YXIgbj1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKC9pbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdC8udGVzdChuKT8hZS5kaXNhYmxlZDpcImFcIj09PW4/ZS5ocmVmfHx0OnQpJiZEKGUpfWZ1bmN0aW9uIEQodCl7cmV0dXJuIWUodCkucGFyZW50cygpLmFkZEJhY2soKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm5cImhpZGRlblwiPT09ZS5jc3ModGhpcyxcInZpc2liaWxpdHlcIil8fGUuZXhwci5maWx0ZXJzLmhpZGRlbih0aGlzKX0pLmxlbmd0aH1mdW5jdGlvbiBBKGUsdCl7cmV0dXJuIG5ldyBBLmZuLmluaXQoZSx0KX12YXIgRSxNLFAsSSx6LEYsUixCLEwsTyxILE4sVixVLFcsaixHLHEsJCxZLEssUSxYLEosWixldCx0dCxudCxpdCxydCxvdCxhdCxzdCxsdCxjdCxkdCx1dCxodCxwdCxmdCxndD10LmtlbmRvPXQua2VuZG98fHtjdWx0dXJlczp7fX0sbXQ9ZS5leHRlbmQsdnQ9ZS5lYWNoLF90PWUuaXNBcnJheSx5dD1lLnByb3h5LHd0PWUubm9vcCxidD1NYXRoLGt0PXQuSlNPTnx8e30seHQ9e30sQ3Q9LyUvLFN0PS9cXHsoXFxkKykoOlteXFx9XSspP1xcfS9nLFR0PS8oXFxkKyg/OlxcLj8pXFxkKilweFxccyooXFxkKyg/OlxcLj8pXFxkKilweFxccyooXFxkKyg/OlxcLj8pXFxkKilweFxccyooXFxkKyk/L2ksRHQ9L14oXFwrfC0/KVxcZCsoXFwuPylcXGQqJC8sQXQ9XCJmdW5jdGlvblwiLEV0PVwic3RyaW5nXCIsTXQ9XCJudW1iZXJcIixQdD1cIm9iamVjdFwiLEl0PVwibnVsbFwiLHp0PVwiYm9vbGVhblwiLEZ0PVwidW5kZWZpbmVkXCIsUnQ9e30sQnQ9e30sTHQ9W10uc2xpY2UsT3Q9dC5HbG9iYWxpemU7Z3QudmVyc2lvbj1cIjIwMTQuMy4xMTE5XCIsaS5leHRlbmQ9ZnVuY3Rpb24oZSl7dmFyIHQsbixpPWZ1bmN0aW9uKCl7fSxyPXRoaXMsbz1lJiZlLmluaXQ/ZS5pbml0OmZ1bmN0aW9uKCl7ci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2kucHJvdG90eXBlPXIucHJvdG90eXBlLG49by5mbj1vLnByb3RvdHlwZT1uZXcgaTtmb3IodCBpbiBlKW5bdF09bnVsbCE9ZVt0XSYmZVt0XS5jb25zdHJ1Y3Rvcj09PU9iamVjdD9tdCghMCx7fSxpLnByb3RvdHlwZVt0XSxlW3RdKTplW3RdO3JldHVybiBuLmNvbnN0cnVjdG9yPW8sby5leHRlbmQ9ci5leHRlbmQsb30saS5wcm90b3R5cGUuX2luaXRPcHRpb25zPWZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucz1sKHt9LHRoaXMub3B0aW9ucyxlKX0sTT1ndC5pc0Z1bmN0aW9uPWZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGV9LFA9ZnVuY3Rpb24oKXt0aGlzLl9kZWZhdWx0UHJldmVudGVkPSEwfSxJPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlZmF1bHRQcmV2ZW50ZWQ9PT0hMH0sej1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbigpe3RoaXMuX2V2ZW50cz17fX0sYmluZDpmdW5jdGlvbihlLHQsaSl7dmFyIHIsbyxhLHMsbCxjPXRoaXMsZD10eXBlb2YgZT09PUV0P1tlXTplLHU9dHlwZW9mIHQ9PT1BdDtpZih0PT09bil7Zm9yKHIgaW4gZSljLmJpbmQocixlW3JdKTtyZXR1cm4gY31mb3Iocj0wLG89ZC5sZW5ndGg7bz5yO3IrKyllPWRbcl0scz11P3Q6dFtlXSxzJiYoaSYmKGE9cyxzPWZ1bmN0aW9uKCl7Yy51bmJpbmQoZSxzKSxhLmFwcGx5KGMsYXJndW1lbnRzKX0scy5vcmlnaW5hbD1hKSxsPWMuX2V2ZW50c1tlXT1jLl9ldmVudHNbZV18fFtdLGwucHVzaChzKSk7cmV0dXJuIGN9LG9uZTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmJpbmQoZSx0LCEwKX0sZmlyc3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxhPXRoaXMscz10eXBlb2YgZT09PUV0P1tlXTplLGw9dHlwZW9mIHQ9PT1BdDtmb3Iobj0wLGk9cy5sZW5ndGg7aT5uO24rKyllPXNbbl0scj1sP3Q6dFtlXSxyJiYobz1hLl9ldmVudHNbZV09YS5fZXZlbnRzW2VdfHxbXSxvLnVuc2hpZnQocikpO3JldHVybiBhfSx0cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMsbz1yLl9ldmVudHNbZV07aWYobyl7Zm9yKHQ9dHx8e30sdC5zZW5kZXI9cix0Ll9kZWZhdWx0UHJldmVudGVkPSExLHQucHJldmVudERlZmF1bHQ9UCx0LmlzRGVmYXVsdFByZXZlbnRlZD1JLG89by5zbGljZSgpLG49MCxpPW8ubGVuZ3RoO2k+bjtuKyspb1tuXS5jYWxsKHIsdCk7cmV0dXJuIHQuX2RlZmF1bHRQcmV2ZW50ZWQ9PT0hMH1yZXR1cm4hMX0sdW5iaW5kOmZ1bmN0aW9uKGUsdCl7dmFyIGkscj10aGlzLG89ci5fZXZlbnRzW2VdO2lmKGU9PT1uKXIuX2V2ZW50cz17fTtlbHNlIGlmKG8paWYodClmb3IoaT1vLmxlbmd0aC0xO2k+PTA7aS0tKShvW2ldPT09dHx8b1tpXS5vcmlnaW5hbD09PXQpJiZvLnNwbGljZShpLDEpO2Vsc2Ugci5fZXZlbnRzW2VdPVtdO3JldHVybiByfX0pLEY9L15cXHcrLyxSPS9cXCRcXHsoW159XSopXFx9L2csQj0vXFxcXFxcfS9nLEw9L19fQ1VSTFlfXy9nLE89L1xcXFwjL2csSD0vX19TSEFSUF9fL2csTj1bXCJcIixcIjBcIixcIjAwXCIsXCIwMDBcIixcIjAwMDBcIl0sRT17cGFyYW1OYW1lOlwiZGF0YVwiLHVzZVdpdGhCbG9jazohMCxyZW5kZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9XCJcIjtmb3Iobj0wLGk9dC5sZW5ndGg7aT5uO24rKylyKz1lKHRbbl0pO3JldHVybiByfSxjb21waWxlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxvLGE9bXQoe30sdGhpcyx0KSxzPWEucGFyYW1OYW1lLGw9cy5tYXRjaChGKVswXSxjPWEudXNlV2l0aEJsb2NrLGQ9XCJ2YXIgbyxlPWtlbmRvLmh0bWxFbmNvZGU7XCI7aWYoTShlKSlyZXR1cm4gZTtmb3IoZCs9Yz9cIndpdGgoXCIrcytcIil7XCI6XCJcIixkKz1cIm89XCIsaT1lLnJlcGxhY2UoQixcIl9fQ1VSTFlfX1wiKS5yZXBsYWNlKFIsXCIjPWUoJDEpI1wiKS5yZXBsYWNlKEwsXCJ9XCIpLnJlcGxhY2UoTyxcIl9fU0hBUlBfX1wiKS5zcGxpdChcIiNcIiksbz0wO2kubGVuZ3RoPm87bysrKWQrPXIoaVtvXSxvJTI9PT0wKTtkKz1jP1wiO31cIjpcIjtcIixkKz1cInJldHVybiBvO1wiLGQ9ZC5yZXBsYWNlKEgsXCIjXCIpO3RyeXtyZXR1cm4gbj1GdW5jdGlvbihsLGQpLG4uX3Nsb3RDb3VudD1NYXRoLmZsb29yKGkubGVuZ3RoLzIpLG59Y2F0Y2godSl7dGhyb3cgRXJyb3IoZ3QuZm9ybWF0KFwiSW52YWxpZCB0ZW1wbGF0ZTonezB9JyBHZW5lcmF0ZWQgY29kZTonezF9J1wiLGUsZCkpfX19LGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gYS5sYXN0SW5kZXg9MCxhLnRlc3QoZSk/J1wiJytlLnJlcGxhY2UoYSxmdW5jdGlvbihlKXt2YXIgdD1zW2VdO3JldHVybiB0eXBlb2YgdD09PUV0P3Q6XCJcXFxcdVwiKyhcIjAwMDBcIitlLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCl9KSsnXCInOidcIicrZSsnXCInfWZ1bmN0aW9uIHQobyxhKXt2YXIgcyxjLGQsdSxoLHAsZj1uLGc9YVtvXTtpZihnJiZ0eXBlb2YgZz09PVB0JiZ0eXBlb2YgZy50b0pTT049PT1BdCYmKGc9Zy50b0pTT04obykpLHR5cGVvZiByPT09QXQmJihnPXIuY2FsbChhLG8sZykpLHA9dHlwZW9mIGcscD09PUV0KXJldHVybiBlKGcpO2lmKHA9PT1NdClyZXR1cm4gaXNGaW5pdGUoZyk/ZytcIlwiOkl0O2lmKHA9PT16dHx8cD09PUl0KXJldHVybiBnK1wiXCI7aWYocD09PVB0KXtpZighZylyZXR1cm4gSXQ7aWYobis9aSxoPVtdLFwiW29iamVjdCBBcnJheV1cIj09PWwuYXBwbHkoZykpe2Zvcih1PWcubGVuZ3RoLHM9MDt1PnM7cysrKWhbc109dChzLGcpfHxJdDtyZXR1cm4gZD0wPT09aC5sZW5ndGg/XCJbXVwiOm4/XCJbXFxuXCIrbitoLmpvaW4oXCIsXFxuXCIrbikrXCJcXG5cIitmK1wiXVwiOlwiW1wiK2guam9pbihcIixcIikrXCJdXCIsbj1mLGR9aWYociYmdHlwZW9mIHI9PT1QdClmb3IodT1yLmxlbmd0aCxzPTA7dT5zO3MrKyl0eXBlb2YgcltzXT09PUV0JiYoYz1yW3NdLGQ9dChjLGcpLGQmJmgucHVzaChlKGMpKyhuP1wiOiBcIjpcIjpcIikrZCkpO2Vsc2UgZm9yKGMgaW4gZylPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChnLGMpJiYoZD10KGMsZyksZCYmaC5wdXNoKGUoYykrKG4/XCI6IFwiOlwiOlwiKStkKSk7cmV0dXJuIGQ9MD09PWgubGVuZ3RoP1wie31cIjpuP1wie1xcblwiK24raC5qb2luKFwiLFxcblwiK24pK1wiXFxuXCIrZitcIn1cIjpcIntcIitoLmpvaW4oXCIsXCIpK1wifVwiLG49ZixkfX12YXIgbixpLHIsYT0vW1xcXFxcXFwiXFx4MDAtXFx4MWZcXHg3Zi1cXHg5ZlxcdTAwYWRcXHUwNjAwLVxcdTA2MDRcXHUwNzBmXFx1MTdiNFxcdTE3YjVcXHUyMDBjLVxcdTIwMGZcXHUyMDI4LVxcdTIwMmZcXHUyMDYwLVxcdTIwNmZcXHVmZWZmXFx1ZmZmMC1cXHVmZmZmXS9nLHM9e1wiXFxiXCI6XCJcXFxcYlwiLFwiXHRcIjpcIlxcXFx0XCIsXCJcXG5cIjpcIlxcXFxuXCIsXCJcXGZcIjpcIlxcXFxmXCIsXCJcXHJcIjpcIlxcXFxyXCIsJ1wiJzonXFxcXFwiJyxcIlxcXFxcIjpcIlxcXFxcXFxcXCJ9LGw9e30udG9TdHJpbmc7dHlwZW9mIERhdGUucHJvdG90eXBlLnRvSlNPTiE9PUF0JiYoRGF0ZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gaXNGaW5pdGUoZS52YWx1ZU9mKCkpP28oZS5nZXRVVENGdWxsWWVhcigpLDQpK1wiLVwiK28oZS5nZXRVVENNb250aCgpKzEpK1wiLVwiK28oZS5nZXRVVENEYXRlKCkpK1wiVFwiK28oZS5nZXRVVENIb3VycygpKStcIjpcIitvKGUuZ2V0VVRDTWludXRlcygpKStcIjpcIitvKGUuZ2V0VVRDU2Vjb25kcygpKStcIlpcIjpudWxsfSxTdHJpbmcucHJvdG90eXBlLnRvSlNPTj1OdW1iZXIucHJvdG90eXBlLnRvSlNPTj1Cb29sZWFuLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZU9mKCl9KSx0eXBlb2Yga3Quc3RyaW5naWZ5IT09QXQmJihrdC5zdHJpbmdpZnk9ZnVuY3Rpb24oZSxvLGEpe3ZhciBzO2lmKG49XCJcIixpPVwiXCIsdHlwZW9mIGE9PT1NdClmb3Iocz0wO2E+cztzKz0xKWkrPVwiIFwiO2Vsc2UgdHlwZW9mIGE9PT1FdCYmKGk9YSk7aWYocj1vLG8mJnR5cGVvZiBvIT09QXQmJih0eXBlb2YgbyE9PVB0fHx0eXBlb2Ygby5sZW5ndGghPT1NdCkpdGhyb3cgRXJyb3IoXCJKU09OLnN0cmluZ2lmeVwiKTtyZXR1cm4gdChcIlwiLHtcIlwiOmV9KX0pfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZihlKXtpZihlLm51bWJlckZvcm1hdClyZXR1cm4gZTtpZih0eXBlb2YgZT09PUV0KXt2YXIgdD1ndC5jdWx0dXJlcztyZXR1cm4gdFtlXXx8dFtlLnNwbGl0KFwiLVwiKVswXV18fG51bGx9cmV0dXJuIG51bGx9cmV0dXJuIG51bGx9ZnVuY3Rpb24gaShlKXtyZXR1cm4gZSYmKGU9dChlKSksZXx8Z3QuY3VsdHVyZXMuY3VycmVudH1mdW5jdGlvbiByKGUpe2UuZ3JvdXBTaXplcz1lLmdyb3VwU2l6ZSxlLnBlcmNlbnQuZ3JvdXBTaXplcz1lLnBlcmNlbnQuZ3JvdXBTaXplLGUuY3VycmVuY3kuZ3JvdXBTaXplcz1lLmN1cnJlbmN5Lmdyb3VwU2l6ZX1mdW5jdGlvbiBhKGUsdCxyKXtyPWkocik7dmFyIGE9ci5jYWxlbmRhcnMuc3RhbmRhcmQscz1hLmRheXMsbD1hLm1vbnRocztyZXR1cm4gdD1hLnBhdHRlcm5zW3RdfHx0LHQucmVwbGFjZShkLGZ1bmN0aW9uKHQpe3ZhciBpLHIsYztyZXR1cm5cImRcIj09PXQ/cj1lLmdldERhdGUoKTpcImRkXCI9PT10P3I9byhlLmdldERhdGUoKSk6XCJkZGRcIj09PXQ/cj1zLm5hbWVzQWJicltlLmdldERheSgpXTpcImRkZGRcIj09PXQ/cj1zLm5hbWVzW2UuZ2V0RGF5KCldOlwiTVwiPT09dD9yPWUuZ2V0TW9udGgoKSsxOlwiTU1cIj09PXQ/cj1vKGUuZ2V0TW9udGgoKSsxKTpcIk1NTVwiPT09dD9yPWwubmFtZXNBYmJyW2UuZ2V0TW9udGgoKV06XCJNTU1NXCI9PT10P3I9bC5uYW1lc1tlLmdldE1vbnRoKCldOlwieXlcIj09PXQ/cj1vKGUuZ2V0RnVsbFllYXIoKSUxMDApOlwieXl5eVwiPT09dD9yPW8oZS5nZXRGdWxsWWVhcigpLDQpOlwiaFwiPT09dD9yPWUuZ2V0SG91cnMoKSUxMnx8MTI6XCJoaFwiPT09dD9yPW8oZS5nZXRIb3VycygpJTEyfHwxMik6XCJIXCI9PT10P3I9ZS5nZXRIb3VycygpOlwiSEhcIj09PXQ/cj1vKGUuZ2V0SG91cnMoKSk6XCJtXCI9PT10P3I9ZS5nZXRNaW51dGVzKCk6XCJtbVwiPT09dD9yPW8oZS5nZXRNaW51dGVzKCkpOlwic1wiPT09dD9yPWUuZ2V0U2Vjb25kcygpOlwic3NcIj09PXQ/cj1vKGUuZ2V0U2Vjb25kcygpKTpcImZcIj09PXQ/cj1idC5mbG9vcihlLmdldE1pbGxpc2Vjb25kcygpLzEwMCk6XCJmZlwiPT09dD8ocj1lLmdldE1pbGxpc2Vjb25kcygpLHI+OTkmJihyPWJ0LmZsb29yKHIvMTApKSxyPW8ocikpOlwiZmZmXCI9PT10P3I9byhlLmdldE1pbGxpc2Vjb25kcygpLDMpOlwidHRcIj09PXQ/cj1lLmdldEhvdXJzKCk8MTI/YS5BTVswXTphLlBNWzBdOlwienp6XCI9PT10PyhpPWUuZ2V0VGltZXpvbmVPZmZzZXQoKSxjPTA+aSxyPShcIlwiK2J0LmFicyhpLzYwKSkuc3BsaXQoXCIuXCIpWzBdLGk9YnQuYWJzKGkpLTYwKnIscj0oYz9cIitcIjpcIi1cIikrbyhyKSxyKz1cIjpcIitvKGkpKTooXCJ6elwiPT09dHx8XCJ6XCI9PT10KSYmKHI9ZS5nZXRUaW1lem9uZU9mZnNldCgpLzYwLGM9MD5yLHI9KFwiXCIrYnQuYWJzKHIpKS5zcGxpdChcIi5cIilbMF0scj0oYz9cIitcIjpcIi1cIikrKFwienpcIj09PXQ/byhyKTpyKSksciE9PW4/cjp0LnNsaWNlKDEsdC5sZW5ndGgtMSl9KX1mdW5jdGlvbiBzKGUsdCxyKXtyPWkocik7dmFyIG8sYSxzLGMsZCx3LGIsayx4LEMsUyxULEQsQSxFLE0sUCxJLHosRixSLEIsTCxPPXIubnVtYmVyRm9ybWF0LEg9Ty5ncm91cFNpemVbMF0sTj1PW21dLFY9T1tnXSxVPU8uZGVjaW1hbHMsVz1PLnBhdHRlcm5bMF0saj1bXSxHPTA+ZSxxPWYsJD1mLFk9LTE7aWYoZT09PW4pcmV0dXJuIGY7aWYoIWlzRmluaXRlKGUpKXJldHVybiBlO2lmKCF0KXJldHVybiByLm5hbWUubGVuZ3RoP2UudG9Mb2NhbGVTdHJpbmcoKTpcIlwiK2U7aWYoZD11LmV4ZWModCkpe2lmKHQ9ZFsxXS50b0xvd2VyQ2FzZSgpLGE9XCJjXCI9PT10LHM9XCJwXCI9PT10LChhfHxzKSYmKE89YT9PLmN1cnJlbmN5Ok8ucGVyY2VudCxIPU8uZ3JvdXBTaXplWzBdLE49T1ttXSxWPU9bZ10sVT1PLmRlY2ltYWxzLG89Ty5zeW1ib2wsVz1PLnBhdHRlcm5bRz8wOjFdKSxjPWRbMl0sYyYmKFU9K2MpLFwiZVwiPT09dClyZXR1cm4gYz9lLnRvRXhwb25lbnRpYWwoVSk6ZS50b0V4cG9uZW50aWFsKCk7aWYocyYmKGUqPTEwMCksZT1sKGUsVSksRz0wPmUsZT1lLnNwbGl0KGcpLHc9ZVswXSxiPWVbMV0sRyYmKHc9dy5zdWJzdHJpbmcoMSkpLCQ9dyxrPXcubGVuZ3RoLGs+PUgpZm9yKCQ9ZixDPTA7az5DO0MrKylDPjAmJihrLUMpJUg9PT0wJiYoJCs9TiksJCs9dy5jaGFyQXQoQyk7aWYoYiYmKCQrPVYrYiksXCJuXCI9PT10JiYhRylyZXR1cm4gJDtmb3IoZT1mLEM9MCxTPVcubGVuZ3RoO1M+QztDKyspVD1XLmNoYXJBdChDKSxlKz1cIm5cIj09PVQ/JDpcIiRcIj09PVR8fFwiJVwiPT09VD9vOlQ7cmV0dXJuIGV9aWYoRyYmKGU9LWUpLCh0LmluZGV4T2YoXCInXCIpPi0xfHx0LmluZGV4T2YoJ1wiJyk+LTF8fHQuaW5kZXhPZihcIlxcXFxcIik+LTEpJiYodD10LnJlcGxhY2UoaCxmdW5jdGlvbihlKXt2YXIgdD1lLmNoYXJBdCgwKS5yZXBsYWNlKFwiXFxcXFwiLFwiXCIpLG49ZS5zbGljZSgxKS5yZXBsYWNlKHQsXCJcIik7cmV0dXJuIGoucHVzaChuKSx5fSkpLHQ9dC5zcGxpdChcIjtcIiksRyYmdFsxXSl0PXRbMV0sQT0hMDtlbHNlIGlmKDA9PT1lKXtpZih0PXRbMl18fHRbMF0sLTE9PXQuaW5kZXhPZih2KSYmLTE9PXQuaW5kZXhPZihfKSlyZXR1cm4gdH1lbHNlIHQ9dFswXTtpZihGPXQuaW5kZXhPZihcIiVcIiksUj10LmluZGV4T2YoXCIkXCIpLHM9LTEhPUYsYT0tMSE9UixzJiYoZSo9MTAwKSxhJiZcIlxcXFxcIj09PXRbUi0xXSYmKHQ9dC5zcGxpdChcIlxcXFxcIikuam9pbihcIlwiKSxhPSExKSwoYXx8cykmJihPPWE/Ty5jdXJyZW5jeTpPLnBlcmNlbnQsSD1PLmdyb3VwU2l6ZVswXSxOPU9bbV0sVj1PW2ddLFU9Ty5kZWNpbWFscyxvPU8uc3ltYm9sKSxEPXQuaW5kZXhPZihtKT4tMSxEJiYodD10LnJlcGxhY2UocCxmKSksRT10LmluZGV4T2YoZyksUz10Lmxlbmd0aCwtMSE9RT8oYj0oXCJcIitlKS5zcGxpdChcImVcIiksYj1iWzFdP2woZSxNYXRoLmFicyhiWzFdKSk6YlswXSxiPWIuc3BsaXQoZylbMV18fGYsUD10Lmxhc3RJbmRleE9mKF8pLUUsTT10Lmxhc3RJbmRleE9mKHYpLUUsST1QPi0xLHo9TT4tMSxDPWIubGVuZ3RoLEl8fHp8fCh0PXQuc3Vic3RyaW5nKDAsRSkrdC5zdWJzdHJpbmcoRSsxKSxTPXQubGVuZ3RoLEU9LTEsQz0wKSxJJiZQPk0/Qz1QOk0+UCYmKHomJkM+TT9DPU06SSYmUD5DJiYoQz1QKSksQz4tMSYmKGU9bChlLEMpKSk6ZT1sKGUpLE09dC5pbmRleE9mKHYpLEI9UD10LmluZGV4T2YoXyksWT0tMT09TSYmLTEhPVA/UDotMSE9TSYmLTE9PVA/TTpNPlA/UDpNLE09dC5sYXN0SW5kZXhPZih2KSxQPXQubGFzdEluZGV4T2YoXyksTD0tMT09TSYmLTEhPVA/UDotMSE9TSYmLTE9PVA/TTpNPlA/TTpQLFk9PVMmJihMPVkpLC0xIT1ZKXtpZigkPShcIlwiK2UpLnNwbGl0KGcpLHc9JFswXSxiPSRbMV18fGYsaz13Lmxlbmd0aCx4PWIubGVuZ3RoLEcmJi0xKmU+PTAmJihHPSExKSxEKWlmKGs9PT1IJiZFLUI+ayl3PU4rdztlbHNlIGlmKGs+SCl7Zm9yKCQ9ZixDPTA7az5DO0MrKylDPjAmJihrLUMpJUg9PT0wJiYoJCs9TiksJCs9dy5jaGFyQXQoQyk7dz0kfWZvcihlPXQuc3Vic3RyaW5nKDAsWSksRyYmIUEmJihlKz1cIi1cIiksQz1ZO1M+QztDKyspe2lmKFQ9dC5jaGFyQXQoQyksLTE9PUUpe2lmKGs+TC1DKXtlKz13O2JyZWFrfX1lbHNlIGlmKC0xIT1QJiZDPlAmJihxPWYpLGs+PUUtQyYmRS1DPi0xJiYoZSs9dyxDPUUpLEU9PT1DKXtlKz0oYj9WOmYpK2IsQys9TC1FKzE7Y29udGludWV9VD09PV8/KGUrPVQscT1UKTpUPT09diYmKGUrPXEpfWlmKEw+PVkmJihlKz10LnN1YnN0cmluZyhMKzEpKSxhfHxzKXtmb3IoJD1mLEM9MCxTPWUubGVuZ3RoO1M+QztDKyspVD1lLmNoYXJBdChDKSwkKz1cIiRcIj09PVR8fFwiJVwiPT09VD9vOlQ7ZT0kfWlmKFM9ai5sZW5ndGgpZm9yKEM9MDtTPkM7QysrKWU9ZS5yZXBsYWNlKHksaltDXSl9cmV0dXJuIGV9dmFyIGwsYyxkPS9kZGRkfGRkZHxkZHxkfE1NTU18TU1NfE1NfE18eXl5eXx5eXxISHxIfGhofGh8bW18bXxmZmZ8ZmZ8Znx0dHxzc3xzfHp6enx6enx6fFwiW15cIl0qXCJ8J1teJ10qJy9nLHU9L14obnxjfHB8ZSkoXFxkKikkL2ksaD0vKFxcXFwuKXwoWyddW14nXSpbJ10/KXwoW1wiXVteXCJdKltcIl0/KS9nLHA9L1xcLC9nLGY9XCJcIixnPVwiLlwiLG09XCIsXCIsdj1cIiNcIixfPVwiMFwiLHk9XCI/P1wiLHc9XCJlbi1VU1wiLGI9e30udG9TdHJpbmc7Z3QuY3VsdHVyZXNbXCJlbi1VU1wiXT17bmFtZTp3LG51bWJlckZvcm1hdDp7cGF0dGVybjpbXCItblwiXSxkZWNpbWFsczoyLFwiLFwiOlwiLFwiLFwiLlwiOlwiLlwiLGdyb3VwU2l6ZTpbM10scGVyY2VudDp7cGF0dGVybjpbXCItbiAlXCIsXCJuICVcIl0sZGVjaW1hbHM6MixcIixcIjpcIixcIixcIi5cIjpcIi5cIixncm91cFNpemU6WzNdLHN5bWJvbDpcIiVcIn0sY3VycmVuY3k6e3BhdHRlcm46W1wiKCRuKVwiLFwiJG5cIl0sZGVjaW1hbHM6MixcIixcIjpcIixcIixcIi5cIjpcIi5cIixncm91cFNpemU6WzNdLHN5bWJvbDpcIiRcIn19LGNhbGVuZGFyczp7c3RhbmRhcmQ6e2RheXM6e25hbWVzOltcIlN1bmRheVwiLFwiTW9uZGF5XCIsXCJUdWVzZGF5XCIsXCJXZWRuZXNkYXlcIixcIlRodXJzZGF5XCIsXCJGcmlkYXlcIixcIlNhdHVyZGF5XCJdLG5hbWVzQWJicjpbXCJTdW5cIixcIk1vblwiLFwiVHVlXCIsXCJXZWRcIixcIlRodVwiLFwiRnJpXCIsXCJTYXRcIl0sbmFtZXNTaG9ydDpbXCJTdVwiLFwiTW9cIixcIlR1XCIsXCJXZVwiLFwiVGhcIixcIkZyXCIsXCJTYVwiXX0sbW9udGhzOntuYW1lczpbXCJKYW51YXJ5XCIsXCJGZWJydWFyeVwiLFwiTWFyY2hcIixcIkFwcmlsXCIsXCJNYXlcIixcIkp1bmVcIixcIkp1bHlcIixcIkF1Z3VzdFwiLFwiU2VwdGVtYmVyXCIsXCJPY3RvYmVyXCIsXCJOb3ZlbWJlclwiLFwiRGVjZW1iZXJcIl0sbmFtZXNBYmJyOltcIkphblwiLFwiRmViXCIsXCJNYXJcIixcIkFwclwiLFwiTWF5XCIsXCJKdW5cIixcIkp1bFwiLFwiQXVnXCIsXCJTZXBcIixcIk9jdFwiLFwiTm92XCIsXCJEZWNcIl19LEFNOltcIkFNXCIsXCJhbVwiLFwiQU1cIl0sUE06W1wiUE1cIixcInBtXCIsXCJQTVwiXSxwYXR0ZXJuczp7ZDpcIk0vZC95eXl5XCIsRDpcImRkZGQsIE1NTU0gZGQsIHl5eXlcIixGOlwiZGRkZCwgTU1NTSBkZCwgeXl5eSBoOm1tOnNzIHR0XCIsZzpcIk0vZC95eXl5IGg6bW0gdHRcIixHOlwiTS9kL3l5eXkgaDptbTpzcyB0dFwiLG06XCJNTU1NIGRkXCIsTTpcIk1NTU0gZGRcIixzOlwieXl5eSctJ01NJy0nZGRUSEgnOidtbSc6J3NzXCIsdDpcImg6bW0gdHRcIixUOlwiaDptbTpzcyB0dFwiLHU6XCJ5eXl5Jy0nTU0nLSdkZCBISCc6J21tJzonc3MnWidcIix5OlwiTU1NTSwgeXl5eVwiLFk6XCJNTU1NLCB5eXl5XCJ9LFwiL1wiOlwiL1wiLFwiOlwiOlwiOlwiLGZpcnN0RGF5OjAsdHdvRGlnaXRZZWFyTWF4OjIwMjl9fX0sZ3QuY3VsdHVyZT1mdW5jdGlvbihlKXt2YXIgaSxvPWd0LmN1bHR1cmVzO3JldHVybiBlPT09bj9vLmN1cnJlbnQ6KGk9dChlKXx8b1t3XSxpLmNhbGVuZGFyPWkuY2FsZW5kYXJzLnN0YW5kYXJkLG8uY3VycmVudD1pLE90JiYhT3QubG9hZCYmcihpLm51bWJlckZvcm1hdCksbil9LGd0LmZpbmRDdWx0dXJlPXQsZ3QuZ2V0Q3VsdHVyZT1pLGd0LmN1bHR1cmUodyksbD1mdW5jdGlvbihlLHQpe3JldHVybiB0PXR8fDAsZT0oXCJcIitlKS5zcGxpdChcImVcIiksZT1NYXRoLnJvdW5kKCsoZVswXStcImVcIisoZVsxXT8rZVsxXSt0OnQpKSksZT0oXCJcIitlKS5zcGxpdChcImVcIiksZT0rKGVbMF0rXCJlXCIrKGVbMV0/K2VbMV0tdDotdCkpLGUudG9GaXhlZCh0KX0sYz1mdW5jdGlvbihlLHQsaSl7aWYodCl7aWYoXCJbb2JqZWN0IERhdGVdXCI9PT1iLmNhbGwoZSkpcmV0dXJuIGEoZSx0LGkpO2lmKHR5cGVvZiBlPT09TXQpcmV0dXJuIHMoZSx0LGkpfXJldHVybiBlIT09bj9lOlwiXCJ9LE90JiYhT3QubG9hZCYmKGM9ZnVuY3Rpb24odCxuLGkpe3JldHVybiBlLmlzUGxhaW5PYmplY3QoaSkmJihpPWkubmFtZSksT3QuZm9ybWF0KHQsbixpKX0pLGd0LmZvcm1hdD1mdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHM7cmV0dXJuIGUucmVwbGFjZShTdCxmdW5jdGlvbihlLG4saSl7dmFyIHI9dFtwYXJzZUludChuLDEwKSsxXTtyZXR1cm4gYyhyLGk/aS5zdWJzdHJpbmcoMSk6XCJcIil9KX0sZ3QuX2V4dHJhY3RGb3JtYXQ9ZnVuY3Rpb24oZSl7cmV0dXJuXCJ7MDpcIj09PWUuc2xpY2UoMCwzKSYmKGU9ZS5zbGljZSgzLGUubGVuZ3RoLTEpKSxlfSxndC5fYWN0aXZlRWxlbWVudD1mdW5jdGlvbigpe3RyeXtyZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudH1jYXRjaChlKXtyZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFjdGl2ZUVsZW1lbnR9fSxndC5fcm91bmQ9bCxndC50b1N0cmluZz1jfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLHQsbil7cmV0dXJuIShlPj10JiZuPj1lKX1mdW5jdGlvbiBpKGUpe3JldHVybiBlLmNoYXJBdCgwKX1mdW5jdGlvbiByKHQpe3JldHVybiBlLm1hcCh0LGkpfWZ1bmN0aW9uIG8oZSx0KXt0fHwyMyE9PWUuZ2V0SG91cnMoKXx8ZS5zZXRIb3VycyhlLmdldEhvdXJzKCkrMil9ZnVuY3Rpb24gYShlKXtmb3IodmFyIHQ9MCxuPWUubGVuZ3RoLGk9W107bj50O3QrKylpW3RdPShlW3RdK1wiXCIpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGl9ZnVuY3Rpb24gcyhlKXt2YXIgdCxuPXt9O2Zvcih0IGluIGUpblt0XT1hKGVbdF0pO3JldHVybiBufWZ1bmN0aW9uIGwoZSxpLGEpe2lmKCFlKXJldHVybiBudWxsO3ZhciBsLGMsZCx1LGYsZyxtLF8seSx3LGIsayx4LEM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7aVtCXT09PWU7KXQrKyxCKys7cmV0dXJuIHQ+MCYmKEItPTEpLHR9LFM9ZnVuY3Rpb24odCl7dmFyIG49dlt0XXx8UmVnRXhwKFwiXlxcXFxkezEsXCIrdCtcIn1cIiksaT1lLnN1YnN0cihMLHQpLm1hdGNoKG4pO3JldHVybiBpPyhpPWlbMF0sTCs9aS5sZW5ndGgscGFyc2VJbnQoaSwxMCkpOm51bGx9LFQ9ZnVuY3Rpb24odCxuKXtmb3IodmFyIGkscixvLGE9MCxzPXQubGVuZ3RoO3M+YTthKyspaWYoaT10W2FdLHI9aS5sZW5ndGgsbz1lLnN1YnN0cihMLHIpLG4mJihvPW8udG9Mb3dlckNhc2UoKSksbz09aSlyZXR1cm4gTCs9cixhKzE7cmV0dXJuIG51bGx9LEQ9ZnVuY3Rpb24oKXt2YXIgdD0hMTtyZXR1cm4gZS5jaGFyQXQoTCk9PT1pW0JdJiYoTCsrLHQ9ITApLHR9LEE9YS5jYWxlbmRhcnMuc3RhbmRhcmQsRT1udWxsLE09bnVsbCxQPW51bGwsST1udWxsLHo9bnVsbCxGPW51bGwsUj1udWxsLEI9MCxMPTAsTz0hMSxIPW5ldyBEYXRlLE49QS50d29EaWdpdFllYXJNYXh8fDIwMjksVj1ILmdldEZ1bGxZZWFyKCk7Zm9yKGl8fChpPVwiZFwiKSx1PUEucGF0dGVybnNbaV0sdSYmKGk9dSksaT1pLnNwbGl0KFwiXCIpLGQ9aS5sZW5ndGg7ZD5CO0IrKylpZihsPWlbQl0sTylcIidcIj09PWw/Tz0hMTpEKCk7ZWxzZSBpZihcImRcIj09PWwpe2lmKGM9QyhcImRcIiksQS5fbG93ZXJEYXlzfHwoQS5fbG93ZXJEYXlzPXMoQS5kYXlzKSksUD0zPmM/UygyKTpUKEEuX2xvd2VyRGF5c1szPT1jP1wibmFtZXNBYmJyXCI6XCJuYW1lc1wiXSwhMCksbnVsbD09PVB8fHQoUCwxLDMxKSlyZXR1cm4gbnVsbH1lbHNlIGlmKFwiTVwiPT09bCl7aWYoYz1DKFwiTVwiKSxBLl9sb3dlck1vbnRoc3x8KEEuX2xvd2VyTW9udGhzPXMoQS5tb250aHMpKSxNPTM+Yz9TKDIpOlQoQS5fbG93ZXJNb250aHNbMz09Yz9cIm5hbWVzQWJiclwiOlwibmFtZXNcIl0sITApLG51bGw9PT1NfHx0KE0sMSwxMikpcmV0dXJuIG51bGw7TS09MX1lbHNlIGlmKFwieVwiPT09bCl7aWYoYz1DKFwieVwiKSxFPVMoYyksbnVsbD09PUUpcmV0dXJuIG51bGw7Mj09YyYmKFwic3RyaW5nXCI9PXR5cGVvZiBOJiYoTj1WK3BhcnNlSW50KE4sMTApKSxFPVYtViUxMDArRSxFPk4mJihFLT0xMDApKX1lbHNlIGlmKFwiaFwiPT09bCl7aWYoQyhcImhcIiksST1TKDIpLDEyPT1JJiYoST0wKSxudWxsPT09SXx8dChJLDAsMTEpKXJldHVybiBudWxsfWVsc2UgaWYoXCJIXCI9PT1sKXtpZihDKFwiSFwiKSxJPVMoMiksbnVsbD09PUl8fHQoSSwwLDIzKSlyZXR1cm4gbnVsbH1lbHNlIGlmKFwibVwiPT09bCl7aWYoQyhcIm1cIiksej1TKDIpLG51bGw9PT16fHx0KHosMCw1OSkpcmV0dXJuIG51bGx9ZWxzZSBpZihcInNcIj09PWwpe2lmKEMoXCJzXCIpLEY9UygyKSxudWxsPT09Rnx8dChGLDAsNTkpKXJldHVybiBudWxsfWVsc2UgaWYoXCJmXCI9PT1sKXtpZihjPUMoXCJmXCIpLHg9ZS5zdWJzdHIoTCxjKS5tYXRjaCh2WzNdKSxSPVMoYyksbnVsbCE9PVImJih4PXhbMF0ubGVuZ3RoLDM+eCYmKFIqPU1hdGgucG93KDEwLDMteCkpLGM+MyYmKFI9cGFyc2VJbnQoKFwiXCIrUikuc3Vic3RyaW5nKDAsMyksMTApKSksbnVsbD09PVJ8fHQoUiwwLDk5OSkpcmV0dXJuIG51bGx9ZWxzZSBpZihcInRcIj09PWwpe2lmKGM9QyhcInRcIiksXz1BLkFNLHk9QS5QTSwxPT09YyYmKF89cihfKSx5PXIoeSkpLGY9VCh5KSwhZiYmIVQoXykpcmV0dXJuIG51bGx9ZWxzZSBpZihcInpcIj09PWwpe2lmKGc9ITAsYz1DKFwielwiKSxcIlpcIj09PWUuc3Vic3RyKEwsMSkpe0QoKTtjb250aW51ZX1pZihtPWUuc3Vic3RyKEwsNikubWF0Y2goYz4yP3A6aCksIW0pcmV0dXJuIG51bGw7aWYobT1tWzBdLnNwbGl0KFwiOlwiKSx3PW1bMF0sYj1tWzFdLCFiJiZ3Lmxlbmd0aD4zJiYoTD13Lmxlbmd0aC0yLGI9dy5zdWJzdHJpbmcoTCksdz13LnN1YnN0cmluZygwLEwpKSx3PXBhcnNlSW50KHcsMTApLHQodywtMTIsMTMpKXJldHVybiBudWxsO2lmKGM+MiYmKGI9cGFyc2VJbnQoYiwxMCksaXNOYU4oYil8fHQoYiwwLDU5KSkpcmV0dXJuIG51bGx9ZWxzZSBpZihcIidcIj09PWwpTz0hMCxEKCk7ZWxzZSBpZighRCgpKXJldHVybiBudWxsO3JldHVybiBrPW51bGwhPT1JfHxudWxsIT09enx8Rnx8bnVsbCxudWxsPT09RSYmbnVsbD09PU0mJm51bGw9PT1QJiZrPyhFPVYsTT1ILmdldE1vbnRoKCksUD1ILmdldERhdGUoKSk6KG51bGw9PT1FJiYoRT1WKSxudWxsPT09UCYmKFA9MSkpLGYmJjEyPkkmJihJKz0xMiksZz8odyYmKEkrPS13KSxiJiYoeis9LWIpLGU9bmV3IERhdGUoRGF0ZS5VVEMoRSxNLFAsSSx6LEYsUikpKTooZT1uZXcgRGF0ZShFLE0sUCxJLHosRixSKSxvKGUsSSkpLDEwMD5FJiZlLnNldEZ1bGxZZWFyKEUpLGUuZ2V0RGF0ZSgpIT09UCYmZz09PW4/bnVsbDplfWZ1bmN0aW9uIGMoZSl7dmFyIHQ9XCItXCI9PT1lLnN1YnN0cigwLDEpPy0xOjE7cmV0dXJuIGU9ZS5zdWJzdHJpbmcoMSksZT02MCpwYXJzZUludChlLnN1YnN0cigwLDIpLDEwKStwYXJzZUludChlLnN1YnN0cmluZygyKSwxMCksdCplfXZhciBkPS9cXHUwMEEwL2csdT0vW2VFXVtcXC0rXT9bMC05XSsvLGg9L1srfFxcLV1cXGR7MSwyfS8scD0vWyt8XFwtXVxcZHsxLDJ9Oj9cXGR7Mn0vLGY9L15cXC9EYXRlXFwoKC4qPylcXClcXC8kLyxnPS9bKy1dXFxkKi8sbT1bXCJHXCIsXCJnXCIsXCJkXCIsXCJGXCIsXCJEXCIsXCJ5XCIsXCJtXCIsXCJUXCIsXCJ0XCJdLHY9ezI6L15cXGR7MSwyfS8sMzovXlxcZHsxLDN9Lyw0Oi9eXFxkezR9L30sXz17fS50b1N0cmluZztndC5wYXJzZURhdGU9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhLHM7aWYoXCJbb2JqZWN0IERhdGVdXCI9PT1fLmNhbGwoZSkpcmV0dXJuIGU7aWYoaT0wLHI9bnVsbCxlJiYwPT09ZS5pbmRleE9mKFwiL0RcIikmJihyPWYuZXhlYyhlKSkpcmV0dXJuIHI9clsxXSxzPWcuZXhlYyhyLnN1YnN0cmluZygxKSkscj1uZXcgRGF0ZShwYXJzZUludChyLDEwKSkscyYmKHM9YyhzWzBdKSxyPWd0LnRpbWV6b25lLmFwcGx5KHIsMCkscj1ndC50aW1lem9uZS5jb252ZXJ0KHIsMCwtMSpzKSkscjtpZihuPWd0LmdldEN1bHR1cmUobiksIXQpe2Zvcih0PVtdLGE9bi5jYWxlbmRhci5wYXR0ZXJucyxvPW0ubGVuZ3RoO28+aTtpKyspdFtpXT1hW21baV1dO2k9MCx0PVtcInl5eXkvTU0vZGQgSEg6bW06c3NcIixcInl5eXkvTU0vZGQgSEg6bW1cIixcInl5eXkvTU0vZGRcIixcImRkZCBNTU0gZGQgeXl5eSBISDptbTpzc1wiLFwieXl5eS1NTS1kZFRISDptbTpzcy5mZmZmZmZmenp6XCIsXCJ5eXl5LU1NLWRkVEhIOm1tOnNzLmZmZnp6elwiLFwieXl5eS1NTS1kZFRISDptbTpzc3p6elwiLFwieXl5eS1NTS1kZFRISDptbTpzcy5mZmZmZmZmXCIsXCJ5eXl5LU1NLWRkVEhIOm1tOnNzLmZmZlwiLFwieXl5eS1NTS1kZFRISDptbXp6elwiLFwieXl5eS1NTS1kZFRISDptbXp6XCIsXCJ5eXl5LU1NLWRkVEhIOm1tOnNzXCIsXCJ5eXl5LU1NLWRkVEhIOm1tXCIsXCJ5eXl5LU1NLWRkIEhIOm1tOnNzXCIsXCJ5eXl5LU1NLWRkIEhIOm1tXCIsXCJ5eXl5LU1NLWRkXCIsXCJISDptbTpzc1wiLFwiSEg6bW1cIl0uY29uY2F0KHQpfWZvcih0PV90KHQpP3Q6W3RdLG89dC5sZW5ndGg7bz5pO2krKylpZihyPWwoZSx0W2ldLG4pKXJldHVybiByO3JldHVybiByfSxndC5wYXJzZUludD1mdW5jdGlvbihlLHQpe3ZhciBuPWd0LnBhcnNlRmxvYXQoZSx0KTtyZXR1cm4gbiYmKG49MHxuKSxufSxndC5wYXJzZUZsb2F0PWZ1bmN0aW9uKGUsdCxuKXtpZighZSYmMCE9PWUpcmV0dXJuIG51bGw7aWYodHlwZW9mIGU9PT1NdClyZXR1cm4gZTtlPVwiXCIrZSx0PWd0LmdldEN1bHR1cmUodCk7dmFyIGkscixvPXQubnVtYmVyRm9ybWF0LGE9by5wZXJjZW50LHM9by5jdXJyZW5jeSxsPXMuc3ltYm9sLGM9YS5zeW1ib2wsaD1lLmluZGV4T2YoXCItXCIpO3JldHVybiB1LnRlc3QoZSk/KGU9cGFyc2VGbG9hdChlLnJlcGxhY2Uob1tcIi5cIl0sXCIuXCIpKSxpc05hTihlKSYmKGU9bnVsbCksZSk6aD4wP251bGw6KGg9aD4tMSxlLmluZGV4T2YobCk+LTF8fG4mJm4udG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiY1wiKT4tMT8obz1zLGk9by5wYXR0ZXJuWzBdLnJlcGxhY2UoXCIkXCIsbCkuc3BsaXQoXCJuXCIpLGUuaW5kZXhPZihpWzBdKT4tMSYmZS5pbmRleE9mKGlbMV0pPi0xJiYoZT1lLnJlcGxhY2UoaVswXSxcIlwiKS5yZXBsYWNlKGlbMV0sXCJcIiksaD0hMCkpOmUuaW5kZXhPZihjKT4tMSYmKHI9ITAsbz1hLGw9YyksZT1lLnJlcGxhY2UoXCItXCIsXCJcIikucmVwbGFjZShsLFwiXCIpLnJlcGxhY2UoZCxcIiBcIikuc3BsaXQob1tcIixcIl0ucmVwbGFjZShkLFwiIFwiKSkuam9pbihcIlwiKS5yZXBsYWNlKG9bXCIuXCJdLFwiLlwiKSxlPXBhcnNlRmxvYXQoZSksaXNOYU4oZSk/ZT1udWxsOmgmJihlKj0tMSksZSYmciYmKGUvPTEwMCksZSl9LE90JiYhT3QubG9hZCYmKGd0LnBhcnNlRGF0ZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuXCJbb2JqZWN0IERhdGVdXCI9PT1fLmNhbGwoZSk/ZTpPdC5wYXJzZURhdGUoZSx0LG4pfSxndC5wYXJzZUZsb2F0PWZ1bmN0aW9uKHQsaSl7cmV0dXJuIHR5cGVvZiB0PT09TXQ/dDp0PT09bnx8bnVsbD09PXQ/bnVsbDooZS5pc1BsYWluT2JqZWN0KGkpJiYoaT1pLm5hbWUpLHQ9T3QucGFyc2VGbG9hdCh0LGkpLGlzTmFOKHQpP251bGw6dCl9KX0oKSxmdW5jdGlvbigpe3ZhciBpLHIsbyxhLHMsbCxjO3h0Ll9zY3JvbGxiYXI9bix4dC5zY3JvbGxiYXI9ZnVuY3Rpb24oZSl7aWYoaXNOYU4oeHQuX3Njcm9sbGJhcil8fGUpe3ZhciB0LG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXR1cm4gbi5zdHlsZS5jc3NUZXh0PVwib3ZlcmZsb3c6c2Nyb2xsO292ZXJmbG93LXg6aGlkZGVuO3pvb206MTtjbGVhcjpib3RoO2Rpc3BsYXk6YmxvY2tcIixuLmlubmVySFRNTD1cIiZuYnNwO1wiLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobikseHQuX3Njcm9sbGJhcj10PW4ub2Zmc2V0V2lkdGgtbi5zY3JvbGxXaWR0aCxkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG4pLHR9cmV0dXJuIHh0Ll9zY3JvbGxiYXJ9LHh0LmlzUnRsPWZ1bmN0aW9uKHQpe3JldHVybiBlKHQpLmNsb3Nlc3QoXCIuay1ydGxcIikubGVuZ3RoPjB9LGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRhYmxlXCIpO3RyeXtpLmlubmVySFRNTD1cIjx0cj48dGQ+PC90ZD48L3RyPlwiLHh0LnRib2R5SW5uZXJIdG1sPSEwfWNhdGNoKHUpe3h0LnRib2R5SW5uZXJIdG1sPSExfXh0LnRvdWNoPVwib250b3VjaHN0YXJ0XCJpbiB0LHh0Lm1zUG9pbnRlcnM9dC5NU1BvaW50ZXJFdmVudCx4dC5wb2ludGVycz10LlBvaW50ZXJFdmVudCxyPXh0LnRyYW5zaXRpb25zPSExLG89eHQudHJhbnNmb3Jtcz0hMSxhPVwiSFRNTEVsZW1lbnRcImluIHQ/SFRNTEVsZW1lbnQucHJvdG90eXBlOltdLHh0Lmhhc0hXM0Q9XCJXZWJLaXRDU1NNYXRyaXhcImluIHQmJlwibTExXCJpbiBuZXcgdC5XZWJLaXRDU1NNYXRyaXh8fFwiTW96UGVyc3BlY3RpdmVcImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZXx8XCJtc1BlcnNwZWN0aXZlXCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUsdnQoW1wiTW96XCIsXCJ3ZWJraXRcIixcIk9cIixcIm1zXCJdLGZ1bmN0aW9uKCl7dmFyIGUsdD1cIlwiK3RoaXMsYT10eXBlb2YgaS5zdHlsZVt0K1wiVHJhbnNpdGlvblwiXT09PUV0O3JldHVybiBhfHx0eXBlb2YgaS5zdHlsZVt0K1wiVHJhbnNmb3JtXCJdPT09RXQ/KGU9dC50b0xvd2VyQ2FzZSgpLG89e2NzczpcIm1zXCIhPWU/XCItXCIrZStcIi1cIjpcIlwiLHByZWZpeDp0LGV2ZW50Olwib1wiPT09ZXx8XCJ3ZWJraXRcIj09PWU/ZTpcIlwifSxhJiYocj1vLHIuZXZlbnQ9ci5ldmVudD9yLmV2ZW50K1wiVHJhbnNpdGlvbkVuZFwiOlwidHJhbnNpdGlvbmVuZFwiKSwhMSk6bn0pLGk9bnVsbCx4dC50cmFuc2Zvcm1zPW8seHQudHJhbnNpdGlvbnM9cix4dC5kZXZpY2VQaXhlbFJhdGlvPXQuZGV2aWNlUGl4ZWxSYXRpbz09PW4/MTp0LmRldmljZVBpeGVsUmF0aW87dHJ5e3h0LnNjcmVlbldpZHRoPXQub3V0ZXJXaWR0aHx8dC5zY3JlZW4/dC5zY3JlZW4uYXZhaWxXaWR0aDp0LmlubmVyV2lkdGgseHQuc2NyZWVuSGVpZ2h0PXQub3V0ZXJIZWlnaHR8fHQuc2NyZWVuP3Quc2NyZWVuLmF2YWlsSGVpZ2h0OnQuaW5uZXJIZWlnaHR9Y2F0Y2godSl7eHQuc2NyZWVuV2lkdGg9dC5zY3JlZW4uYXZhaWxXaWR0aCx4dC5zY3JlZW5IZWlnaHQ9dC5zY3JlZW4uYXZhaWxIZWlnaHR9eHQuZGV0ZWN0T1M9ZnVuY3Rpb24oZSl7dmFyIG4saSxyPSExLG89W10sYT0hL21vYmlsZSBzYWZhcmkvaS50ZXN0KGUpLHM9e3dwOi8oV2luZG93cyBQaG9uZSg/OiBPUyk/KVxccyhcXGQrKVxcLihcXGQrKFxcLlxcZCspPykvLGZpcmU6LyhTaWxrKVxcLyhcXGQrKVxcLihcXGQrKFxcLlxcZCspPykvLGFuZHJvaWQ6LyhBbmRyb2lkfEFuZHJvaWQuKig/Ok9wZXJhfEZpcmVmb3gpLio/XFwvKVxccyooXFxkKylcXC4oXFxkKyhcXC5cXGQrKT8pLyxpcGhvbmU6LyhpUGhvbmV8aVBvZCkuKk9TXFxzKyhcXGQrKVtcXC5fXShbXFxkXFwuX10rKS8saXBhZDovKGlQYWQpLipPU1xccysoXFxkKylbXFwuX10oW1xcZF9dKykvLG1lZWdvOi8oTWVlR28pLitOb2tpYUJyb3dzZXJcXC8oXFxkKylcXC4oW1xcZFxcLl9dKykvLHdlYm9zOi8od2ViT1MpXFwvKFxcZCspXFwuKFxcZCsoXFwuXFxkKyk/KS8sYmxhY2tiZXJyeTovKEJsYWNrQmVycnl8QkIxMCkuKj9WZXJzaW9uXFwvKFxcZCspXFwuKFxcZCsoXFwuXFxkKyk/KS8scGxheWJvb2s6LyhQbGF5Qm9vaykuKj9UYWJsZXRcXHMqT1NcXHMqKFxcZCspXFwuKFxcZCsoXFwuXFxkKyk/KS8sd2luZG93czovKE1TSUUpXFxzKyhcXGQrKVxcLihcXGQrKFxcLlxcZCspPykvLHRpemVuOi8odGl6ZW4pLio/VmVyc2lvblxcLyhcXGQrKVxcLihcXGQrKFxcLlxcZCspPykvaSxzYWlsZmlzaDovKHNhaWxmaXNoKS4qcnY6KFxcZCspXFwuKFxcZCsoXFwuXFxkKyk/KS4qZmlyZWZveC9pLGZmb3M6LyhNb2JpbGUpLipydjooXFxkKylcXC4oXFxkKyhcXC5cXGQrKT8pLipGaXJlZm94L30sbD17aW9zOi9eaShwaG9uZXxwYWR8cG9kKSQvaSxhbmRyb2lkOi9eYW5kcm9pZHxmaXJlJC9pLGJsYWNrYmVycnk6L15ibGFja2JlcnJ5fHBsYXlib29rL2ksd2luZG93czovd2luZG93cy8sd3A6L3dwLyxmbGF0Oi9zYWlsZmlzaHxmZm9zfHRpemVuL2ksbWVlZ286L21lZWdvL30sYz17dGFibGV0Oi9wbGF5Ym9va3xpcGFkfGZpcmUvaX0sdT17b21pbmk6L09wZXJhXFxzTWluaS9pLG9tb2JpbGU6L09wZXJhXFxzTW9iaS9pLGZpcmVmb3g6L0ZpcmVmb3h8RmVubmVjL2ksbW9iaWxlc2FmYXJpOi92ZXJzaW9uXFwvLipzYWZhcmkvaSxpZTovTVNJRXxXaW5kb3dzXFxzUGhvbmUvaSxjaHJvbWU6L2Nocm9tZXxjcmlvcy9pLHdlYmtpdDovd2Via2l0L2l9O2ZvcihpIGluIHMpaWYocy5oYXNPd25Qcm9wZXJ0eShpKSYmKG89ZS5tYXRjaChzW2ldKSkpe2lmKFwid2luZG93c1wiPT1pJiZcInBsdWdpbnNcImluIG5hdmlnYXRvcilyZXR1cm4hMTtyPXt9LHIuZGV2aWNlPWksci50YWJsZXQ9ZChpLGMsITEpLHIuYnJvd3Nlcj1kKGUsdSxcImRlZmF1bHRcIiksci5uYW1lPWQoaSxsKSxyW3IubmFtZV09ITAsci5tYWpvclZlcnNpb249b1syXSxyLm1pbm9yVmVyc2lvbj1vWzNdLnJlcGxhY2UoXCJfXCIsXCIuXCIpLG49ci5taW5vclZlcnNpb24ucmVwbGFjZShcIi5cIixcIlwiKS5zdWJzdHIoMCwyKSxyLmZsYXRWZXJzaW9uPXIubWFqb3JWZXJzaW9uK24rQXJyYXkoMy0oMz5uLmxlbmd0aD9uLmxlbmd0aDoyKSkuam9pbihcIjBcIiksci5jb3Jkb3ZhPXR5cGVvZiB0LlBob25lR2FwIT09RnR8fHR5cGVvZiB0LmNvcmRvdmEhPT1GdCxyLmFwcE1vZGU9dC5uYXZpZ2F0b3Iuc3RhbmRhbG9uZXx8L2ZpbGV8bG9jYWx8d21hcHAvLnRlc3QodC5sb2NhdGlvbi5wcm90b2NvbCl8fHIuY29yZG92YSxyLmFuZHJvaWQmJigxLjU+eHQuZGV2aWNlUGl4ZWxSYXRpbyYmNDAwPnIuZmxhdFZlcnNpb258fGEpJiYoeHQuc2NyZWVuV2lkdGg+ODAwfHx4dC5zY3JlZW5IZWlnaHQ+ODAwKSYmKHIudGFibGV0PWkpO2JyZWFrfXJldHVybiByfSxzPXh0Lm1vYmlsZU9TPXh0LmRldGVjdE9TKG5hdmlnYXRvci51c2VyQWdlbnQpLHh0LndwRGV2aWNlUGl4ZWxSYXRpbz1zLndwP3NjcmVlbi53aWR0aC8zMjA6MCx4dC5raW5ldGljU2Nyb2xsTmVlZGVkPXMmJih4dC50b3VjaHx8eHQubXNQb2ludGVyc3x8eHQucG9pbnRlcnMpLHh0Lmhhc05hdGl2ZVNjcm9sbGluZz0hMSwocy5pb3N8fHMuYW5kcm9pZCYmcy5tYWpvclZlcnNpb24+Mnx8cy53cCkmJih4dC5oYXNOYXRpdmVTY3JvbGxpbmc9cykseHQubW91c2VBbmRUb3VjaFByZXNlbnQ9eHQudG91Y2gmJiEoeHQubW9iaWxlT1MuaW9zfHx4dC5tb2JpbGVPUy5hbmRyb2lkKSx4dC5kZXRlY3RCcm93c2VyPWZ1bmN0aW9uKGUpe3ZhciB0LG49ITEsaT1bXSxyPXt3ZWJraXQ6LyhjaHJvbWUpWyBcXC9dKFtcXHcuXSspL2ksc2FmYXJpOi8od2Via2l0KVsgXFwvXShbXFx3Ll0rKS9pLG9wZXJhOi8ob3BlcmEpKD86Lip2ZXJzaW9ufClbIFxcL10oW1xcdy5dKykvaSxtc2llOi8obXNpZVxcc3x0cmlkZW50Lio/IHJ2OikoW1xcdy5dKykvaSxtb3ppbGxhOi8obW96aWxsYSkoPzouKj8gcnY6KFtcXHcuXSspfCkvaX07Zm9yKHQgaW4gcilpZihyLmhhc093blByb3BlcnR5KHQpJiYoaT1lLm1hdGNoKHJbdF0pKSl7bj17fSxuW3RdPSEwLG5baVsxXS50b0xvd2VyQ2FzZSgpLnNwbGl0KFwiIFwiKVswXS5zcGxpdChcIi9cIilbMF1dPSEwLG4udmVyc2lvbj1wYXJzZUludChkb2N1bWVudC5kb2N1bWVudE1vZGV8fGlbMl0sMTApO2JyZWFrfXJldHVybiBufSx4dC5icm93c2VyPXh0LmRldGVjdEJyb3dzZXIobmF2aWdhdG9yLnVzZXJBZ2VudCkseHQuem9vbUxldmVsPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB4dC50b3VjaD9kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgvdC5pbm5lcldpZHRoOnh0LmJyb3dzZXIubXNpZSYmeHQuYnJvd3Nlci52ZXJzaW9uPj0xMD8odG9wfHx0KS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0V2lkdGgvKHRvcHx8dCkuaW5uZXJXaWR0aDoxfWNhdGNoKGUpe3JldHVybiAxfX0seHQuY3NzQm9yZGVyU3BhY2luZz1uIT09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLmJvcmRlclNwYWNpbmcmJiEoeHQuYnJvd3Nlci5tc2llJiY4Pnh0LmJyb3dzZXIudmVyc2lvbiksZnVuY3Rpb24odCl7dmFyIG49XCJcIixpPWUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSxyPXBhcnNlSW50KHQudmVyc2lvbiwxMCk7dC5tc2llP249XCJpZVwiOnQubW96aWxsYT9uPVwiZmZcIjp0LnNhZmFyaT9uPVwic2FmYXJpXCI6dC53ZWJraXQ/bj1cIndlYmtpdFwiOnQub3BlcmEmJihuPVwib3BlcmFcIiksbiYmKG49XCJrLVwiK24rXCIgay1cIituK3IpLHh0Lm1vYmlsZU9TJiYobis9XCIgay1tb2JpbGVcIiksaS5hZGRDbGFzcyhuKX0oeHQuYnJvd3NlcikseHQuZXZlbnRDYXB0dXJlPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyLGw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLHh0LnBsYWNlaG9sZGVyPVwicGxhY2Vob2xkZXJcImluIGwseHQucHJvcGVydHlDaGFuZ2VFdmVudD1cIm9ucHJvcGVydHljaGFuZ2VcImluIGwseHQuaW5wdXQ9ZnVuY3Rpb24oKXtmb3IodmFyIGUsdD1bXCJudW1iZXJcIixcImRhdGVcIixcInRpbWVcIixcIm1vbnRoXCIsXCJ3ZWVrXCIsXCJkYXRldGltZVwiLFwiZGF0ZXRpbWUtbG9jYWxcIl0sbj10Lmxlbmd0aCxpPVwidGVzdFwiLHI9e30sbz0wO24+bztvKyspZT10W29dLGwuc2V0QXR0cmlidXRlKFwidHlwZVwiLGUpLGwudmFsdWU9aSxyW2UucmVwbGFjZShcIi1cIixcIlwiKV09XCJ0ZXh0XCIhPT1sLnR5cGUmJmwudmFsdWUhPT1pO3JldHVybiByfSgpLGwuc3R5bGUuY3NzVGV4dD1cImZsb2F0OmxlZnQ7XCIseHQuY3NzRmxvYXQ9ISFsLnN0eWxlLmNzc0Zsb2F0LGw9bnVsbCx4dC5zdGFibGVTb3J0PWZ1bmN0aW9uKCl7dmFyIGUsdD01MTMsbj1be2luZGV4OjAsZmllbGQ6XCJiXCJ9XTtmb3IoZT0xO3Q+ZTtlKyspbi5wdXNoKHtpbmRleDplLGZpZWxkOlwiYVwifSk7cmV0dXJuIG4uc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBlLmZpZWxkPnQuZmllbGQ/MTp0LmZpZWxkPmUuZmllbGQ/LTE6MH0pLDE9PT1uWzBdLmluZGV4fSgpLHh0Lm1hdGNoZXNTZWxlY3Rvcj1hLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8YS5tb3pNYXRjaGVzU2VsZWN0b3J8fGEubXNNYXRjaGVzU2VsZWN0b3J8fGEub01hdGNoZXNTZWxlY3Rvcnx8YS5tYXRjaGVzU2VsZWN0b3J8fGEubWF0Y2hlc3x8ZnVuY3Rpb24odCl7Zm9yKHZhciBuPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw/KHRoaXMucGFyZW50Tm9kZXx8ZG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwodCl8fFtdOmUodCksaT1uLmxlbmd0aDtpLS07KWlmKG5baV09PXRoaXMpcmV0dXJuITA7cmV0dXJuITF9LHh0LnB1c2hTdGF0ZT10Lmhpc3RvcnkmJnQuaGlzdG9yeS5wdXNoU3RhdGUsYz1kb2N1bWVudC5kb2N1bWVudE1vZGUseHQuaGFzaENoYW5nZT1cIm9uaGFzaGNoYW5nZVwiaW4gdCYmISh4dC5icm93c2VyLm1zaWUmJighY3x8OD49YykpfSgpLFY9e2xlZnQ6e3JldmVyc2U6XCJyaWdodFwifSxyaWdodDp7cmV2ZXJzZTpcImxlZnRcIn0sZG93bjp7cmV2ZXJzZTpcInVwXCJ9LHVwOntyZXZlcnNlOlwiZG93blwifSx0b3A6e3JldmVyc2U6XCJib3R0b21cIn0sYm90dG9tOntyZXZlcnNlOlwidG9wXCJ9LFwiaW5cIjp7cmV2ZXJzZTpcIm91dFwifSxvdXQ6e3JldmVyc2U6XCJpblwifX0sVT17fSxlLmV4dGVuZChVLHtlbmFibGVkOiEwLEVsZW1lbnQ6ZnVuY3Rpb24odCl7dGhpcy5lbGVtZW50PWUodCl9LHByb21pc2U6ZnVuY3Rpb24oZSx0KXtlLmlzKFwiOnZpc2libGVcIil8fGUuY3NzKHtkaXNwbGF5OmUuZGF0YShcIm9sZGRpc3BsYXlcIil8fFwiYmxvY2tcIn0pLmNzcyhcImRpc3BsYXlcIiksdC5oaWRlJiZlLmRhdGEoXCJvbGRkaXNwbGF5XCIsZS5jc3MoXCJkaXNwbGF5XCIpKS5oaWRlKCksdC5pbml0JiZ0LmluaXQoKSx0LmNvbXBsZXRlQ2FsbGJhY2smJnQuY29tcGxldGVDYWxsYmFjayhlKSxlLmRlcXVldWUoKX0sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuZW5hYmxlZD0hMSx0aGlzLnByb21pc2U9dGhpcy5wcm9taXNlU2hpbX0sZW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy5lbmFibGVkPSEwLHRoaXMucHJvbWlzZT10aGlzLmFuaW1hdGVkUHJvbWlzZX19KSxVLnByb21pc2VTaGltPVUucHJvbWlzZSxcImtlbmRvQW5pbWF0ZVwiaW4gZS5mbnx8bXQoZS5mbix7a2VuZG9TdG9wOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuc3RvcChlLHQpfSxrZW5kb0FuaW1hdGU6ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIHkodGhpcyxlLHQsbixpKX0sa2VuZG9BZGRDbGFzczpmdW5jdGlvbihlLHQpe3JldHVybiBndC50b2dnbGVDbGFzcyh0aGlzLGUsdCwhMCl9LGtlbmRvUmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZ3QudG9nZ2xlQ2xhc3ModGhpcyxlLHQsITEpfSxrZW5kb1RvZ2dsZUNsYXNzOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZ3QudG9nZ2xlQ2xhc3ModGhpcyxlLHQsbil9fSksVz0vJi9nLGo9LzwvZyxHPS9cIi9nLHE9LycvZywkPS8+L2csWT1mdW5jdGlvbihlKXtyZXR1cm4gZS50YXJnZXR9LHh0LnRvdWNoJiYoWT1mdW5jdGlvbihlKXt2YXIgdD1cIm9yaWdpbmFsRXZlbnRcImluIGU/ZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzOlwiY2hhbmdlZFRvdWNoZXNcImluIGU/ZS5jaGFuZ2VkVG91Y2hlczpudWxsO3JldHVybiB0P2RvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQodFswXS5jbGllbnRYLHRbMF0uY2xpZW50WSk6ZS50YXJnZXR9LHZ0KFtcInN3aXBlXCIsXCJzd2lwZUxlZnRcIixcInN3aXBlUmlnaHRcIixcInN3aXBlVXBcIixcInN3aXBlRG93blwiLFwiZG91YmxlVGFwXCIsXCJ0YXBcIl0sZnVuY3Rpb24odCxuKXtlLmZuW25dPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmJpbmQobixlKX19KSkseHQudG91Y2g/eHQubW9iaWxlT1M/KHh0Lm1vdXNlZG93bj1cInRvdWNoc3RhcnRcIix4dC5tb3VzZXVwPVwidG91Y2hlbmRcIix4dC5tb3VzZW1vdmU9XCJ0b3VjaG1vdmVcIix4dC5tb3VzZWNhbmNlbD1cInRvdWNoY2FuY2VsXCIseHQuY2xpY2s9XCJ0b3VjaGVuZFwiLHh0LnJlc2l6ZT1cIm9yaWVudGF0aW9uY2hhbmdlXCIpOih4dC5tb3VzZWRvd249XCJtb3VzZWRvd24gdG91Y2hzdGFydFwiLHh0Lm1vdXNldXA9XCJtb3VzZXVwIHRvdWNoZW5kXCIseHQubW91c2Vtb3ZlPVwibW91c2Vtb3ZlIHRvdWNobW92ZVwiLHh0Lm1vdXNlY2FuY2VsPVwibW91c2VsZWF2ZSB0b3VjaGNhbmNlbFwiLHh0LmNsaWNrPVwiY2xpY2tcIix4dC5yZXNpemU9XCJyZXNpemVcIik6eHQucG9pbnRlcnM/KHh0Lm1vdXNlbW92ZT1cInBvaW50ZXJtb3ZlXCIseHQubW91c2Vkb3duPVwicG9pbnRlcmRvd25cIix4dC5tb3VzZXVwPVwicG9pbnRlcnVwXCIseHQubW91c2VjYW5jZWw9XCJwb2ludGVyY2FuY2VsXCIseHQuY2xpY2s9XCJwb2ludGVydXBcIix4dC5yZXNpemU9XCJvcmllbnRhdGlvbmNoYW5nZSByZXNpemVcIik6eHQubXNQb2ludGVycz8oeHQubW91c2Vtb3ZlPVwiTVNQb2ludGVyTW92ZVwiLHh0Lm1vdXNlZG93bj1cIk1TUG9pbnRlckRvd25cIix4dC5tb3VzZXVwPVwiTVNQb2ludGVyVXBcIix4dC5tb3VzZWNhbmNlbD1cIk1TUG9pbnRlckNhbmNlbFwiLHh0LmNsaWNrPVwiTVNQb2ludGVyVXBcIix4dC5yZXNpemU9XCJvcmllbnRhdGlvbmNoYW5nZSByZXNpemVcIik6KHh0Lm1vdXNlbW92ZT1cIm1vdXNlbW92ZVwiLHh0Lm1vdXNlZG93bj1cIm1vdXNlZG93blwiLHh0Lm1vdXNldXA9XCJtb3VzZXVwXCIseHQubW91c2VjYW5jZWw9XCJtb3VzZWxlYXZlXCIseHQuY2xpY2s9XCJjbGlja1wiLHh0LnJlc2l6ZT1cInJlc2l6ZVwiKSxLPWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYT10fHxcImRcIixzPTE7Zm9yKGk9MCxyPWUubGVuZ3RoO3I+aTtpKyspbz1lW2ldLFwiXCIhPT1vJiYobj1vLmluZGV4T2YoXCJbXCIpLDAhPT1uJiYoLTE9PW4/bz1cIi5cIitvOihzKyssbz1cIi5cIitvLnN1YnN0cmluZygwLG4pK1wiIHx8IHt9KVwiK28uc3Vic3RyaW5nKG4pKSkscysrLGErPW8rKHItMT5pP1wiIHx8IHt9KVwiOlwiKVwiKSk7cmV0dXJuIEFycmF5KHMpLmpvaW4oXCIoXCIpK2F9LFE9L14oW2Etel0rOik/XFwvXFwvL2ksbXQoZ3Qse3VpOmd0LnVpfHx7fSxmeDpndC5meHx8dixlZmZlY3RzOmd0LmVmZmVjdHN8fFUsbW9iaWxlOmd0Lm1vYmlsZXx8e30sZGF0YTpndC5kYXRhfHx7fSxkYXRhdml6Omd0LmRhdGF2aXp8fHt9LGtleXM6e0lOU0VSVDo0NSxERUxFVEU6NDYsQkFDS1NQQUNFOjgsVEFCOjksRU5URVI6MTMsRVNDOjI3LExFRlQ6MzcsVVA6MzgsUklHSFQ6MzksRE9XTjo0MCxFTkQ6MzUsSE9NRTozNixTUEFDRUJBUjozMixQQUdFVVA6MzMsUEFHRURPV046MzQsRjI6MTEzLEYxMDoxMjEsRjEyOjEyMyxOVU1QQURfUExVUzoxMDcsTlVNUEFEX01JTlVTOjEwOSxOVU1QQURfRE9UOjExMH0sc3VwcG9ydDpndC5zdXBwb3J0fHx4dCxhbmltYXRlOmd0LmFuaW1hdGV8fHksbnM6XCJcIixhdHRyOmZ1bmN0aW9uKGUpe3JldHVyblwiZGF0YS1cIitndC5ucytlfSxnZXRTaGFkb3dzOmEsd3JhcDpzLGRlZXBFeHRlbmQ6bCxnZXRDb21wdXRlZFN0eWxlczpwLHNpemU6Zix0b0NhbWVsQ2FzZTpoLHRvSHlwaGVuczp1LGdldE9mZnNldDpndC5nZXRPZmZzZXR8fGcscGFyc2VFZmZlY3RzOmd0LnBhcnNlRWZmZWN0c3x8bSx0b2dnbGVDbGFzczpndC50b2dnbGVDbGFzc3x8dyxkaXJlY3Rpb25zOmd0LmRpcmVjdGlvbnN8fFYsT2JzZXJ2YWJsZTp6LENsYXNzOmksVGVtcGxhdGU6RSx0ZW1wbGF0ZTp5dChFLmNvbXBpbGUsRSkscmVuZGVyOnl0KEUucmVuZGVyLEUpLHN0cmluZ2lmeTp5dChrdC5zdHJpbmdpZnksa3QpLGV2ZW50VGFyZ2V0OlksaHRtbEVuY29kZTpiLGlzTG9jYWxVcmw6ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJiFRLnRlc3QoZSl9LGV4cHI6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlPWV8fFwiXCIsdHlwZW9mIHQ9PUV0JiYobj10LHQ9ITEpLG49bnx8XCJkXCIsZSYmXCJbXCIhPT1lLmNoYXJBdCgwKSYmKGU9XCIuXCIrZSksZT10P0soZS5zcGxpdChcIi5cIiksbik6bitlfSxnZXR0ZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lK3Q7cmV0dXJuIFJ0W25dPVJ0W25dfHxGdW5jdGlvbihcImRcIixcInJldHVybiBcIitndC5leHByKGUsdCkpfSxzZXR0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIEJ0W2VdPUJ0W2VdfHxGdW5jdGlvbihcImQsdmFsdWVcIixndC5leHByKGUpK1wiPXZhbHVlXCIpfSxhY2Nlc3NvcjpmdW5jdGlvbihlKXtyZXR1cm57Z2V0Omd0LmdldHRlcihlKSxzZXQ6Z3Quc2V0dGVyKGUpfX0sZ3VpZDpmdW5jdGlvbigpe3ZhciBlLHQsbj1cIlwiO2ZvcihlPTA7MzI+ZTtlKyspdD0xNipidC5yYW5kb20oKXwwLCg4PT1lfHwxMj09ZXx8MTY9PWV8fDIwPT1lKSYmKG4rPVwiLVwiKSxuKz0oMTI9PWU/NDoxNj09ZT8zJnR8ODp0KS50b1N0cmluZygxNik7cmV0dXJuIG59LHJvbGVTZWxlY3RvcjpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKC8oXFxTKykvZyxcIltcIitndC5hdHRyKFwicm9sZVwiKStcIj0kMV0sXCIpLnNsaWNlKDAsLTEpfSxkaXJlY3RpdmVTZWxlY3RvcjpmdW5jdGlvbihlKXt2YXIgdCxuPWUuc3BsaXQoXCIgXCIpO2lmKG4pZm9yKHQ9MDtuLmxlbmd0aD50O3QrKylcInZpZXdcIiE9blt0XSYmKG5bdF09blt0XS5yZXBsYWNlKC8oXFx3Kikodmlld3xiYXJ8c3RyaXB8b3ZlcikkLyxcIiQxLSQyXCIpKTtyZXR1cm4gbi5qb2luKFwiIFwiKS5yZXBsYWNlKC8oXFxTKykvZyxcImtlbmRvLW1vYmlsZS0kMSxcIikuc2xpY2UoMCwtMSl9LHRyaWdnZXJlZEJ5SW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuL14obGFiZWx8aW5wdXR8dGV4dGFyZWF8c2VsZWN0KSQvaS50ZXN0KGUudGFyZ2V0LnRhZ05hbWUpfSxsb2dUb0NvbnNvbGU6ZnVuY3Rpb24oZSl7dmFyIGk9dC5jb25zb2xlOyFndC5zdXBwcmVzc0xvZyYmbiE9PWkmJmkubG9nJiZpLmxvZyhlKX19KSxYPXouZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzO2kuZWxlbWVudD1ndC5qUXVlcnkoZSkuaGFuZGxlcihpKSxpLmFuZ3VsYXIoXCJpbml0XCIsdCksei5mbi5pbml0LmNhbGwoaSksbj10P3QuZGF0YVNvdXJjZTpudWxsLG4mJih0PW10KHt9LHQse2RhdGFTb3VyY2U6e319KSksdD1pLm9wdGlvbnM9bXQoITAse30saS5vcHRpb25zLHQpLG4mJih0LmRhdGFTb3VyY2U9biksaS5lbGVtZW50LmF0dHIoZ3QuYXR0cihcInJvbGVcIikpfHxpLmVsZW1lbnQuYXR0cihndC5hdHRyKFwicm9sZVwiKSwodC5uYW1lfHxcIlwiKS50b0xvd2VyQ2FzZSgpKSxpLmVsZW1lbnQuZGF0YShcImtlbmRvXCIrdC5wcmVmaXgrdC5uYW1lLGkpLGkuYmluZChpLmV2ZW50cyx0KX0sZXZlbnRzOltdLG9wdGlvbnM6e3ByZWZpeDpcIlwifSxfaGFzQmluZGluZ1RhcmdldDpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5lbGVtZW50WzBdLmtlbmRvQmluZGluZ1RhcmdldH0sX3RhYmluZGV4OmZ1bmN0aW9uKGUpe2U9ZXx8dGhpcy53cmFwcGVyO3ZhciB0PXRoaXMuZWxlbWVudCxuPVwidGFiaW5kZXhcIixpPWUuYXR0cihuKXx8dC5hdHRyKG4pO3QucmVtb3ZlQXR0cihuKSxlLmF0dHIobixpc05hTihpKT8wOmkpfSxzZXRPcHRpb25zOmZ1bmN0aW9uKHQpe3RoaXMuX3NldEV2ZW50cyh0KSxlLmV4dGVuZCh0aGlzLm9wdGlvbnMsdCl9LF9zZXRFdmVudHM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49dGhpcyxpPTAscj1uLmV2ZW50cy5sZW5ndGg7cj5pO2krKyl0PW4uZXZlbnRzW2ldLG4ub3B0aW9uc1t0XSYmZVt0XSYmbi51bmJpbmQodCxuLm9wdGlvbnNbdF0pO24uYmluZChuLmV2ZW50cyxlKX0scmVzaXplOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0U2l6ZSgpLG49dGhpcy5fc2l6ZTsoZXx8IW58fHQud2lkdGghPT1uLndpZHRofHx0LmhlaWdodCE9PW4uaGVpZ2h0KSYmKHRoaXMuX3NpemU9dCx0aGlzLl9yZXNpemUodCksdGhpcy50cmlnZ2VyKFwicmVzaXplXCIsdCkpfSxnZXRTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIGd0LmRpbWVuc2lvbnModGhpcy5lbGVtZW50KX0sc2l6ZTpmdW5jdGlvbihlKXtyZXR1cm4gZT8odGhpcy5zZXRTaXplKGUpLG4pOnRoaXMuZ2V0U2l6ZSgpfSxzZXRTaXplOmUubm9vcCxfcmVzaXplOmUubm9vcCxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLmVsZW1lbnQucmVtb3ZlRGF0YShcImtlbmRvXCIrZS5vcHRpb25zLnByZWZpeCtlLm9wdGlvbnMubmFtZSksZS5lbGVtZW50LnJlbW92ZURhdGEoXCJoYW5kbGVyXCIpLGUudW5iaW5kKCl9LGFuZ3VsYXI6ZnVuY3Rpb24oKXt9fSksSj1YLmV4dGVuZCh7ZGF0YUl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YVNvdXJjZS5mbGF0VmlldygpfSxfYW5ndWxhckl0ZW1zOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7bi5hbmd1bGFyKHQsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6bi5pdGVtcygpLGRhdGE6ZS5tYXAobi5kYXRhSXRlbXMoKSxmdW5jdGlvbihlKXtyZXR1cm57ZGF0YUl0ZW06ZX19KX19KX19KSxndC5kaW1lbnNpb25zPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZVswXTtyZXR1cm4gdCYmZS5jc3ModCkse3dpZHRoOm4ub2Zmc2V0V2lkdGgsaGVpZ2h0Om4ub2Zmc2V0SGVpZ2h0fX0sZ3Qubm90aWZ5PXd0LFo9L3RlbXBsYXRlJC9pLGV0PS9eXFxzKig/Olxceyg/Oi58XFxyXFxufFxcbikqXFx9fFxcWyg/Oi58XFxyXFxufFxcbikqXFxdKVxccyokLyx0dD0vXlxceyhcXGQrKSg6W15cXH1dKyk/XFx9fF5cXFtbQS1aYS16X10qXFxdJC8sbnQ9LyhbQS1aXSkvZyxndC5pbml0V2lkZ2V0PWZ1bmN0aW9uKGkscixvKXt2YXIgYSxzLGwsYyxkLHUsaCxwLGYsZyxtLHYsXztpZihvP28ucm9sZXMmJihvPW8ucm9sZXMpOm89Z3QudWkucm9sZXMsaT1pLm5vZGVUeXBlP2k6aVswXSx1PWkuZ2V0QXR0cmlidXRlKFwiZGF0YS1cIitndC5ucytcInJvbGVcIikpe2Y9LTE9PT11LmluZGV4T2YoXCIuXCIpLGw9Zj9vW3VdOmd0LmdldHRlcih1KSh0KSxtPWUoaSkuZGF0YSgpLHY9bD9cImtlbmRvXCIrbC5mbi5vcHRpb25zLnByZWZpeCtsLmZuLm9wdGlvbnMubmFtZTpcIlwiLGc9Zj9SZWdFeHAoXCJea2VuZG8uKlwiK3UrXCIkXCIsXCJpXCIpOlJlZ0V4cChcIl5cIit2K1wiJFwiLFwiaVwiKTtcclxuZm9yKF8gaW4gbSlpZihfLm1hdGNoKGcpKXtpZihfIT09dilyZXR1cm4gbVtfXTthPW1bX119aWYobCl7Zm9yKHA9ayhpLFwiZGF0YVNvdXJjZVwiKSxyPWUuZXh0ZW5kKHt9LHgoaSxsLmZuLm9wdGlvbnMpLHIpLHAmJihyLmRhdGFTb3VyY2U9dHlwZW9mIHA9PT1FdD9ndC5nZXR0ZXIocCkodCk6cCksYz0wLGQ9bC5mbi5ldmVudHMubGVuZ3RoO2Q+YztjKyspcz1sLmZuLmV2ZW50c1tjXSxoPWsoaSxzKSxoIT09biYmKHJbc109Z3QuZ2V0dGVyKGgpKHQpKTtyZXR1cm4gYT9lLmlzRW1wdHlPYmplY3Qocil8fGEuc2V0T3B0aW9ucyhyKTphPW5ldyBsKGksciksYX19fSxndC5yb2xlc0Zyb21OYW1lc3BhY2VzPWZ1bmN0aW9uKGUpe3ZhciB0LG4saT1bXTtmb3IoZVswXXx8KGU9W2d0LnVpLGd0LmRhdGF2aXoudWldKSx0PTAsbj1lLmxlbmd0aDtuPnQ7dCsrKWlbdF09ZVt0XS5yb2xlcztyZXR1cm4gbXQuYXBwbHkobnVsbCxbe31dLmNvbmNhdChpLnJldmVyc2UoKSkpfSxndC5pbml0PWZ1bmN0aW9uKHQpe3ZhciBuPWd0LnJvbGVzRnJvbU5hbWVzcGFjZXMoTHQuY2FsbChhcmd1bWVudHMsMSkpO2UodCkuZmluZChcIltkYXRhLVwiK2d0Lm5zK1wicm9sZV1cIikuYWRkQmFjaygpLmVhY2goZnVuY3Rpb24oKXtndC5pbml0V2lkZ2V0KHRoaXMse30sbil9KX0sZ3QuZGVzdHJveT1mdW5jdGlvbih0KXtlKHQpLmZpbmQoXCJbZGF0YS1cIitndC5ucytcInJvbGVdXCIpLmFkZEJhY2soKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQsbj1lKHRoaXMpLmRhdGEoKTtmb3IodCBpbiBuKTA9PT10LmluZGV4T2YoXCJrZW5kb1wiKSYmdHlwZW9mIG5bdF0uZGVzdHJveT09PUF0JiZuW3RdLmRlc3Ryb3koKX0pfSxndC5yZXNpemU9ZnVuY3Rpb24odCxuKXt2YXIgaSxyPWUodCkuZmluZChcIltkYXRhLVwiK2d0Lm5zK1wicm9sZV1cIikuYWRkQmFjaygpLmZpbHRlcihTKTtyLmxlbmd0aCYmKGk9ZS5tYWtlQXJyYXkociksaS5zb3J0KEMpLGUuZWFjaChpLGZ1bmN0aW9uKCl7dmFyIHQ9Z3Qud2lkZ2V0SW5zdGFuY2UoZSh0aGlzKSk7dCYmdC5yZXNpemUobil9KSl9LGd0LnBhcnNlT3B0aW9ucz14LG10KGd0LnVpLHtXaWRnZXQ6WCxEYXRhQm91bmRXaWRnZXQ6Sixyb2xlczp7fSxwcm9ncmVzczpmdW5jdGlvbih0LG4pe3ZhciBpLHIsbyxhLHM9dC5maW5kKFwiLmstbG9hZGluZy1tYXNrXCIpLGw9Z3Quc3VwcG9ydCxjPWwuYnJvd3NlcjtuP3MubGVuZ3RofHwoaT1sLmlzUnRsKHQpLHI9aT9cInJpZ2h0XCI6XCJsZWZ0XCIsYT10LnNjcm9sbExlZnQoKSxvPWMud2Via2l0JiZpP3RbMF0uc2Nyb2xsV2lkdGgtdC53aWR0aCgpLTIqYTowLHM9ZShcIjxkaXYgY2xhc3M9J2stbG9hZGluZy1tYXNrJz48c3BhbiBjbGFzcz0nay1sb2FkaW5nLXRleHQnPkxvYWRpbmcuLi48L3NwYW4+PGRpdiBjbGFzcz0nay1sb2FkaW5nLWltYWdlJy8+PGRpdiBjbGFzcz0nay1sb2FkaW5nLWNvbG9yJy8+PC9kaXY+XCIpLndpZHRoKFwiMTAwJVwiKS5oZWlnaHQoXCIxMDAlXCIpLmNzcyhcInRvcFwiLHQuc2Nyb2xsVG9wKCkpLmNzcyhyLE1hdGguYWJzKGEpK28pLnByZXBlbmRUbyh0KSk6cyYmcy5yZW1vdmUoKX0scGx1Z2luOmZ1bmN0aW9uKHQsaSxyKXt2YXIgbyxhPXQuZm4ub3B0aW9ucy5uYW1lO2k9aXx8Z3QudWkscj1yfHxcIlwiLGlbYV09dCxpLnJvbGVzW2EudG9Mb3dlckNhc2UoKV09dCxvPVwiZ2V0S2VuZG9cIityK2EsYT1cImtlbmRvXCIrcithLGUuZm5bYV09ZnVuY3Rpb24oaSl7dmFyIHIsbz10aGlzO3JldHVybiB0eXBlb2YgaT09PUV0PyhyPUx0LmNhbGwoYXJndW1lbnRzLDEpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0LHMsbD1lLmRhdGEodGhpcyxhKTtpZighbCl0aHJvdyBFcnJvcihndC5mb3JtYXQoXCJDYW5ub3QgY2FsbCBtZXRob2QgJ3swfScgb2YgezF9IGJlZm9yZSBpdCBpcyBpbml0aWFsaXplZFwiLGksYSkpO2lmKHQ9bFtpXSx0eXBlb2YgdCE9PUF0KXRocm93IEVycm9yKGd0LmZvcm1hdChcIkNhbm5vdCBmaW5kIG1ldGhvZCAnezB9JyBvZiB7MX1cIixpLGEpKTtyZXR1cm4gcz10LmFwcGx5KGwscikscyE9PW4/KG89cywhMSk6bn0pKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtuZXcgdCh0aGlzLGkpfSksb30sZS5mblthXS53aWRnZXQ9dCxlLmZuW29dPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YShhKX19fSksaXQ9e2JpbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sbnVsbE9iamVjdDohMCxvcHRpb25zOnt9fSxydD1YLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe1guZm4uaW5pdC5jYWxsKHRoaXMsZSx0KSx0aGlzLmVsZW1lbnQuYXV0b0FwcGx5TlMoKSx0aGlzLndyYXBwZXI9dGhpcy5lbGVtZW50LHRoaXMuZWxlbWVudC5hZGRDbGFzcyhcImttLXdpZGdldFwiKX0sZGVzdHJveTpmdW5jdGlvbigpe1guZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuZWxlbWVudC5rZW5kb0Rlc3Ryb3koKX0sb3B0aW9uczp7cHJlZml4OlwiTW9iaWxlXCJ9LGV2ZW50czpbXSx2aWV3OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50LmNsb3Nlc3QoZ3Qucm9sZVNlbGVjdG9yKFwidmlldyBzcGxpdHZpZXcgbW9kYWx2aWV3IGRyYXdlclwiKSk7cmV0dXJuIGd0LndpZGdldEluc3RhbmNlKGUsZ3QubW9iaWxlLnVpKXx8aXR9LHZpZXdIYXNOYXRpdmVTY3JvbGxpbmc6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnZpZXcoKTtyZXR1cm4gZSYmZS5vcHRpb25zLnVzZU5hdGl2ZVNjcm9sbGluZ30sY29udGFpbmVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50LmNsb3Nlc3QoZ3Qucm9sZVNlbGVjdG9yKFwidmlldyBsYXlvdXQgbW9kYWx2aWV3IGRyYXdlciBzcGxpdHZpZXdcIikpO3JldHVybiBndC53aWRnZXRJbnN0YW5jZShlLmVxKDApLGd0Lm1vYmlsZS51aSl8fGl0fX0pLG10KGd0Lm1vYmlsZSx7aW5pdDpmdW5jdGlvbihlKXtndC5pbml0KGUsZ3QubW9iaWxlLnVpLGd0LnVpLGd0LmRhdGF2aXoudWkpfSxhcHBMZXZlbE5hdGl2ZVNjcm9sbGluZzpmdW5jdGlvbigpe3JldHVybiBndC5tb2JpbGUuYXBwbGljYXRpb24mJmd0Lm1vYmlsZS5hcHBsaWNhdGlvbi5vcHRpb25zJiZndC5tb2JpbGUuYXBwbGljYXRpb24ub3B0aW9ucy51c2VOYXRpdmVTY3JvbGxpbmd9LHJvbGVzOnt9LHVpOntXaWRnZXQ6cnQsRGF0YUJvdW5kV2lkZ2V0OkouZXh0ZW5kKHJ0LnByb3RvdHlwZSkscm9sZXM6e30scGx1Z2luOmZ1bmN0aW9uKGUpe2d0LnVpLnBsdWdpbihlLGd0Lm1vYmlsZS51aSxcIk1vYmlsZVwiKX19fSksbChndC5kYXRhdml6LHtpbml0OmZ1bmN0aW9uKGUpe2d0LmluaXQoZSxndC5kYXRhdml6LnVpKX0sdWk6e3JvbGVzOnt9LHRoZW1lczp7fSx2aWV3czpbXSxwbHVnaW46ZnVuY3Rpb24oZSl7Z3QudWkucGx1Z2luKGUsZ3QuZGF0YXZpei51aSl9fSxyb2xlczp7fX0pLGd0LnRvdWNoU2Nyb2xsZXI9ZnVuY3Rpb24odCxuKXtyZXR1cm4gZSh0KS5tYXAoZnVuY3Rpb24odCxpKXtyZXR1cm4gaT1lKGkpLHh0LmtpbmV0aWNTY3JvbGxOZWVkZWQmJmd0Lm1vYmlsZS51aS5TY3JvbGxlciYmIWkuZGF0YShcImtlbmRvTW9iaWxlU2Nyb2xsZXJcIik/KGkua2VuZG9Nb2JpbGVTY3JvbGxlcihuKSxpLmRhdGEoXCJrZW5kb01vYmlsZVNjcm9sbGVyXCIpKTohMX0pWzBdfSxndC5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCl9LGd0LndpZGdldEluc3RhbmNlPWZ1bmN0aW9uKGUsbil7dmFyIGkscixvLGEscz1lLmRhdGEoZ3QubnMrXCJyb2xlXCIpLGw9W107aWYocyl7aWYoXCJjb250ZW50XCI9PT1zJiYocz1cInNjcm9sbGVyXCIpLG4paWYoblswXSlmb3IoaT0wLHI9bi5sZW5ndGg7cj5pO2krKylsLnB1c2gobltpXS5yb2xlc1tzXSk7ZWxzZSBsLnB1c2gobi5yb2xlc1tzXSk7ZWxzZSBsPVtndC51aS5yb2xlc1tzXSxndC5kYXRhdml6LnVpLnJvbGVzW3NdLGd0Lm1vYmlsZS51aS5yb2xlc1tzXV07Zm9yKHMuaW5kZXhPZihcIi5cIik+PTAmJihsPVtndC5nZXR0ZXIocykodCldKSxpPTAscj1sLmxlbmd0aDtyPmk7aSsrKWlmKG89bFtpXSxvJiYoYT1lLmRhdGEoXCJrZW5kb1wiK28uZm4ub3B0aW9ucy5wcmVmaXgrby5mbi5vcHRpb25zLm5hbWUpKSlyZXR1cm4gYX19LGd0Lm9uUmVzaXplPWZ1bmN0aW9uKG4pe3ZhciBpPW47cmV0dXJuIHh0Lm1vYmlsZU9TLmFuZHJvaWQmJihpPWZ1bmN0aW9uKCl7c2V0VGltZW91dChuLDYwMCl9KSxlKHQpLm9uKHh0LnJlc2l6ZSxpKSxpfSxndC51bmJpbmRSZXNpemU9ZnVuY3Rpb24obil7ZSh0KS5vZmYoeHQucmVzaXplLG4pfSxndC5hdHRyVmFsdWU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5kYXRhKGd0Lm5zK3QpfSxndC5kYXlzPXtTdW5kYXk6MCxNb25kYXk6MSxUdWVzZGF5OjIsV2VkbmVzZGF5OjMsVGh1cnNkYXk6NCxGcmlkYXk6NSxTYXR1cmRheTo2fSxlLmV4dGVuZChlLmV4cHJbXCI6XCJdLHtrZW5kb0ZvY3VzYWJsZTpmdW5jdGlvbih0KXt2YXIgbj1lLmF0dHIodCxcInRhYmluZGV4XCIpO3JldHVybiBUKHQsIWlzTmFOKG4pJiZuPi0xKX19KSxvdD1bXCJtb3VzZWRvd25cIixcIm1vdXNlbW92ZVwiLFwibW91c2VlbnRlclwiLFwibW91c2VsZWF2ZVwiLFwibW91c2VvdmVyXCIsXCJtb3VzZW91dFwiLFwibW91c2V1cFwiLFwiY2xpY2tcIl0sYXQ9XCJsYWJlbCwgaW5wdXQsIFtkYXRhLXJlbD1leHRlcm5hbF1cIixzdD17c2V0dXBNb3VzZU11dGU6ZnVuY3Rpb24oKXt2YXIgdCxuPTAsaT1vdC5sZW5ndGgscj1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7aWYoIXN0Lm1vdXNlVHJhcCYmeHQuZXZlbnRDYXB0dXJlKWZvcihzdC5tb3VzZVRyYXA9ITAsc3QuYnVzdENsaWNrPSExLHN0LmNhcHR1cmVNb3VzZT0hMSx0PWZ1bmN0aW9uKHQpe3N0LmNhcHR1cmVNb3VzZSYmKFwiY2xpY2tcIj09PXQudHlwZT9zdC5idXN0Q2xpY2smJiFlKHQudGFyZ2V0KS5pcyhhdCkmJih0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSk6dC5zdG9wUHJvcGFnYXRpb24oKSl9O2k+bjtuKyspci5hZGRFdmVudExpc3RlbmVyKG90W25dLHQsITApfSxtdXRlTW91c2U6ZnVuY3Rpb24oZSl7c3QuY2FwdHVyZU1vdXNlPSEwLGUuZGF0YS5idXN0Q2xpY2smJihzdC5idXN0Q2xpY2s9ITApLGNsZWFyVGltZW91dChzdC5tb3VzZVRyYXBUaW1lb3V0SUQpfSx1bk11dGVNb3VzZTpmdW5jdGlvbigpe2NsZWFyVGltZW91dChzdC5tb3VzZVRyYXBUaW1lb3V0SUQpLHN0Lm1vdXNlVHJhcFRpbWVvdXRJRD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7c3QuY2FwdHVyZU1vdXNlPSExLHN0LmJ1c3RDbGljaz0hMX0sNDAwKX19LGx0PXtkb3duOlwidG91Y2hzdGFydCBtb3VzZWRvd25cIixtb3ZlOlwibW91c2Vtb3ZlIHRvdWNobW92ZVwiLHVwOlwibW91c2V1cCB0b3VjaGVuZCB0b3VjaGNhbmNlbFwiLGNhbmNlbDpcIm1vdXNlbGVhdmUgdG91Y2hjYW5jZWxcIn0seHQudG91Y2gmJih4dC5tb2JpbGVPUy5pb3N8fHh0Lm1vYmlsZU9TLmFuZHJvaWQpP2x0PXtkb3duOlwidG91Y2hzdGFydFwiLG1vdmU6XCJ0b3VjaG1vdmVcIix1cDpcInRvdWNoZW5kIHRvdWNoY2FuY2VsXCIsY2FuY2VsOlwidG91Y2hjYW5jZWxcIn06eHQucG9pbnRlcnM/bHQ9e2Rvd246XCJwb2ludGVyZG93blwiLG1vdmU6XCJwb2ludGVybW92ZVwiLHVwOlwicG9pbnRlcnVwXCIsY2FuY2VsOlwicG9pbnRlcmNhbmNlbCBwb2ludGVybGVhdmVcIn06eHQubXNQb2ludGVycyYmKGx0PXtkb3duOlwiTVNQb2ludGVyRG93blwiLG1vdmU6XCJNU1BvaW50ZXJNb3ZlXCIsdXA6XCJNU1BvaW50ZXJVcFwiLGNhbmNlbDpcIk1TUG9pbnRlckNhbmNlbCBNU1BvaW50ZXJMZWF2ZVwifSksIXh0Lm1zUG9pbnRlcnN8fFwib25tc3BvaW50ZXJlbnRlclwiaW4gdHx8ZS5lYWNoKHtNU1BvaW50ZXJFbnRlcjpcIk1TUG9pbnRlck92ZXJcIixNU1BvaW50ZXJMZWF2ZTpcIk1TUG9pbnRlck91dFwifSxmdW5jdGlvbih0LG4pe2UuZXZlbnQuc3BlY2lhbFt0XT17ZGVsZWdhdGVUeXBlOm4sYmluZFR5cGU6bixoYW5kbGU6ZnVuY3Rpb24odCl7dmFyIGkscj10aGlzLG89dC5yZWxhdGVkVGFyZ2V0LGE9dC5oYW5kbGVPYmo7cmV0dXJuKCFvfHxvIT09ciYmIWUuY29udGFpbnMocixvKSkmJih0LnR5cGU9YS5vcmlnVHlwZSxpPWEuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksdC50eXBlPW4pLGl9fX0pLGN0PWZ1bmN0aW9uKGUpe3JldHVybiBsdFtlXXx8ZX0sZHQ9LyhbXiBdKykvZyxndC5hcHBseUV2ZW50TWFwPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9ZS5yZXBsYWNlKGR0LGN0KSx0JiYoZT1lLnJlcGxhY2UoZHQsXCIkMS5cIit0KSksZX0sdXQ9ZS5mbi5vbixtdCghMCxBLGUpLEEuZm49QS5wcm90b3R5cGU9bmV3IGUsQS5mbi5jb25zdHJ1Y3Rvcj1BLEEuZm4uaW5pdD1mdW5jdGlvbih0LG4pe3JldHVybiBuJiZuIGluc3RhbmNlb2YgZSYmIShuIGluc3RhbmNlb2YgQSkmJihuPUEobikpLGUuZm4uaW5pdC5jYWxsKHRoaXMsdCxuLGh0KX0sQS5mbi5pbml0LnByb3RvdHlwZT1BLmZuLGh0PUEoZG9jdW1lbnQpLG10KEEuZm4se2hhbmRsZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZGF0YShcImhhbmRsZXJcIixlKSx0aGlzfSxhdXRvQXBwbHlOUzpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5kYXRhKFwia2VuZG9OU1wiLGV8fGd0Lmd1aWQoKSksdGhpc30sb246ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLG8sYT10aGlzLHM9YS5kYXRhKFwia2VuZG9OU1wiKTtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/dXQuY2FsbChhLGFyZ3VtZW50c1swXSk6KGU9YSx0PUx0LmNhbGwoYXJndW1lbnRzKSx0eXBlb2YgdFt0Lmxlbmd0aC0xXT09PUZ0JiZ0LnBvcCgpLG49dFt0Lmxlbmd0aC0xXSxpPWd0LmFwcGx5RXZlbnRNYXAodFswXSxzKSx4dC5tb3VzZUFuZFRvdWNoUHJlc2VudCYmaS5zZWFyY2goL21vdXNlfGNsaWNrLyk+LTEmJnRoaXNbMF0hPT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQmJihzdC5zZXR1cE1vdXNlTXV0ZSgpLHI9Mj09PXQubGVuZ3RoP251bGw6dFsxXSxvPWkuaW5kZXhPZihcImNsaWNrXCIpPi0xJiZpLmluZGV4T2YoXCJ0b3VjaGVuZFwiKT4tMSx1dC5jYWxsKHRoaXMse3RvdWNoc3RhcnQ6c3QubXV0ZU1vdXNlLHRvdWNoZW5kOnN0LnVuTXV0ZU1vdXNlfSxyLHtidXN0Q2xpY2s6b30pKSx0eXBlb2Ygbj09PUV0JiYoZT1hLmRhdGEoXCJoYW5kbGVyXCIpLG49ZVtuXSx0W3QubGVuZ3RoLTFdPWZ1bmN0aW9uKHQpe24uY2FsbChlLHQpfSksdFswXT1pLHV0LmFwcGx5KGEsdCksYSl9LGtlbmRvRGVzdHJveTpmdW5jdGlvbihlKXtyZXR1cm4gZT1lfHx0aGlzLmRhdGEoXCJrZW5kb05TXCIpLGUmJnRoaXMub2ZmKFwiLlwiK2UpLHRoaXN9fSksZ3QualF1ZXJ5PUEsZ3QuZXZlbnRNYXA9bHQsZ3QudGltZXpvbmU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dmFyIG4saSxyLG89dFszXSxhPXRbNF0scz10WzVdLGw9dFs4XTtyZXR1cm4gbHx8KHRbOF09bD17fSksbFtlXT9sW2VdOihpc05hTihhKT8wPT09YS5pbmRleE9mKFwibGFzdFwiKT8obj1uZXcgRGF0ZShEYXRlLlVUQyhlLGRbb10rMSwxLHNbMF0tMjQsc1sxXSxzWzJdLDApKSxpPXVbYS5zdWJzdHIoNCwzKV0scj1uLmdldFVUQ0RheSgpLG4uc2V0VVRDRGF0ZShuLmdldFVUQ0RhdGUoKStpLXItKGk+cj83OjApKSk6YS5pbmRleE9mKFwiPj1cIik+PTAmJihuPW5ldyBEYXRlKERhdGUuVVRDKGUsZFtvXSxhLnN1YnN0cig1KSxzWzBdLHNbMV0sc1syXSwwKSksaT11W2Euc3Vic3RyKDAsMyldLHI9bi5nZXRVVENEYXkoKSxuLnNldFVUQ0RhdGUobi5nZXRVVENEYXRlKCkraS1yKyhyPmk/NzowKSkpOm49bmV3IERhdGUoRGF0ZS5VVEMoZSxkW29dLGEsc1swXSxzWzFdLHNbMl0sMCkpLGxbZV09bil9ZnVuY3Rpb24gdCh0LG4saSl7dmFyIHIsbyxhLHM7cmV0dXJuKG49bltpXSk/KGE9bmV3IERhdGUodCkuZ2V0VVRDRnVsbFllYXIoKSxuPWpRdWVyeS5ncmVwKG4sZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxuPWVbMV07cmV0dXJuIGE+PXQmJihuPj1hfHx0PT1hJiZcIm9ubHlcIj09bnx8XCJtYXhcIj09bil9KSxuLnB1c2godCksbi5zb3J0KGZ1bmN0aW9uKHQsbil7cmV0dXJuXCJudW1iZXJcIiE9dHlwZW9mIHQmJih0PStlKGEsdCkpLFwibnVtYmVyXCIhPXR5cGVvZiBuJiYobj0rZShhLG4pKSx0LW59KSxzPW5balF1ZXJ5LmluQXJyYXkodCxuKS0xXXx8bltuLmxlbmd0aC0xXSxpc05hTihzKT9zOm51bGwpOihyPWkuc3BsaXQoXCI6XCIpLG89MCxyLmxlbmd0aD4xJiYobz02MCpyWzBdKyArclsxXSksWy0xZTYsXCJtYXhcIixcIi1cIixcIkphblwiLDEsWzAsMCwwXSxvLFwiLVwiXSl9ZnVuY3Rpb24gbihlLHQsbil7dmFyIGkscixvLGE9dFtuXTtpZihcInN0cmluZ1wiPT10eXBlb2YgYSYmKGE9dFthXSksIWEpdGhyb3cgRXJyb3IoJ1RpbWV6b25lIFwiJytuKydcIiBpcyBlaXRoZXIgaW5jb3JyZWN0LCBvciBrZW5kby50aW1lem9uZXMubWluLmpzIGlzIG5vdCBpbmNsdWRlZC4nKTtmb3IoaT1hLmxlbmd0aC0xO2k+PTAmJihyPWFbaV1bM10sIShyJiZlPnIpKTtpLS0pO2lmKG89YVtpKzFdLCFvKXRocm93IEVycm9yKCdUaW1lem9uZSBcIicrbisnXCIgbm90IGZvdW5kIG9uICcrZStcIi5cIik7cmV0dXJuIG99ZnVuY3Rpb24gaShlLGkscixvKXt0eXBlb2YgZSE9TXQmJihlPURhdGUuVVRDKGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCksZS5nZXREYXRlKCksZS5nZXRIb3VycygpLGUuZ2V0TWludXRlcygpLGUuZ2V0U2Vjb25kcygpLGUuZ2V0TWlsbGlzZWNvbmRzKCkpKTt2YXIgYT1uKGUsaSxvKTtyZXR1cm57em9uZTphLHJ1bGU6dChlLHIsYVsxXSl9fWZ1bmN0aW9uIHIoZSx0KXt2YXIgbixyLG87cmV0dXJuXCJFdGMvVVRDXCI9PXR8fFwiRXRjL0dNVFwiPT10PzA6KG49aShlLHRoaXMuem9uZXMsdGhpcy5ydWxlcyx0KSxyPW4uem9uZSxvPW4ucnVsZSxndC5wYXJzZUZsb2F0KG8/clswXS1vWzZdOnJbMF0pKX1mdW5jdGlvbiBvKGUsdCl7dmFyIG49aShlLHRoaXMuem9uZXMsdGhpcy5ydWxlcyx0KSxyPW4uem9uZSxvPW4ucnVsZSxhPXJbMl07cmV0dXJuIGEuaW5kZXhPZihcIi9cIik+PTA/YS5zcGxpdChcIi9cIilbbyYmK29bNl0/MTowXTphLmluZGV4T2YoXCIlc1wiKT49MD9hLnJlcGxhY2UoXCIlc1wiLG8mJlwiLVwiIT1vWzddP29bN106XCJcIik6YX1mdW5jdGlvbiBhKGUsdCxuKXt2YXIgaSxyO3JldHVybiB0eXBlb2YgdD09RXQmJih0PXRoaXMub2Zmc2V0KGUsdCkpLHR5cGVvZiBuPT1FdCYmKG49dGhpcy5vZmZzZXQoZSxuKSksaT1lLmdldFRpbWV6b25lT2Zmc2V0KCksZT1uZXcgRGF0ZShlLmdldFRpbWUoKSs2ZTQqKHQtbikpLHI9ZS5nZXRUaW1lem9uZU9mZnNldCgpLG5ldyBEYXRlKGUuZ2V0VGltZSgpKzZlNCooci1pKSl9ZnVuY3Rpb24gcyhlLHQpe3JldHVybiB0aGlzLmNvbnZlcnQoZSxlLmdldFRpbWV6b25lT2Zmc2V0KCksdCl9ZnVuY3Rpb24gbChlLHQpe3JldHVybiB0aGlzLmNvbnZlcnQoZSx0LGUuZ2V0VGltZXpvbmVPZmZzZXQoKSl9ZnVuY3Rpb24gYyhlKXtyZXR1cm4gdGhpcy5hcHBseShuZXcgRGF0ZShlKSxcIkV0Yy9VVENcIil9dmFyIGQ9e0phbjowLEZlYjoxLE1hcjoyLEFwcjozLE1heTo0LEp1bjo1LEp1bDo2LEF1Zzo3LFNlcDo4LE9jdDo5LE5vdjoxMCxEZWM6MTF9LHU9e1N1bjowLE1vbjoxLFR1ZToyLFdlZDozLFRodTo0LEZyaTo1LFNhdDo2fTtyZXR1cm57em9uZXM6e30scnVsZXM6e30sb2Zmc2V0OnIsY29udmVydDphLGFwcGx5OnMscmVtb3ZlOmwsYWJicjpvLHRvTG9jYWxEYXRlOmN9fSgpLGd0LmRhdGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7cmV0dXJuIDA9PT10JiYyMz09PWUuZ2V0SG91cnMoKT8oZS5zZXRIb3VycyhlLmdldEhvdXJzKCkrMiksITApOiExfWZ1bmN0aW9uIHQodCxuLGkpe3ZhciByPXQuZ2V0SG91cnMoKTtpPWl8fDEsbj0obi10LmdldERheSgpKzcqaSklNyx0LnNldERhdGUodC5nZXREYXRlKCkrbiksZSh0LHIpfWZ1bmN0aW9uIG4oZSxuLGkpe3JldHVybiBlPW5ldyBEYXRlKGUpLHQoZSxuLGkpLGV9ZnVuY3Rpb24gaShlKXtyZXR1cm4gbmV3IERhdGUoZS5nZXRGdWxsWWVhcigpLGUuZ2V0TW9udGgoKSwxKX1mdW5jdGlvbiByKGUpe3ZhciB0PW5ldyBEYXRlKGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCkrMSwwKSxuPWkoZSkscj1NYXRoLmFicyh0LmdldFRpbWV6b25lT2Zmc2V0KCktbi5nZXRUaW1lem9uZU9mZnNldCgpKTtyZXR1cm4gciYmdC5zZXRIb3VycyhuLmdldEhvdXJzKCkrci82MCksdH1mdW5jdGlvbiBvKHQpe3JldHVybiB0PW5ldyBEYXRlKHQuZ2V0RnVsbFllYXIoKSx0LmdldE1vbnRoKCksdC5nZXREYXRlKCksMCwwLDApLGUodCwwKSx0fWZ1bmN0aW9uIGEoZSl7cmV0dXJuIERhdGUuVVRDKGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCksZS5nZXREYXRlKCksZS5nZXRIb3VycygpLGUuZ2V0TWludXRlcygpLGUuZ2V0U2Vjb25kcygpLGUuZ2V0TWlsbGlzZWNvbmRzKCkpfWZ1bmN0aW9uIHMoZSl7cmV0dXJuIGUuZ2V0VGltZSgpLW8oZSl9ZnVuY3Rpb24gbChlLHQsbil7dmFyIGkscj1zKHQpLG89cyhuKTtyZXR1cm4gZSYmciE9bz8odD49biYmKG4rPW0pLGk9cyhlKSxyPmkmJihpKz1tKSxyPm8mJihvKz1tKSxpPj1yJiZvPj1pKTohMH1mdW5jdGlvbiBjKGUsdCxuKXt2YXIgaSxyPXQuZ2V0VGltZSgpLG89bi5nZXRUaW1lKCk7cmV0dXJuIHI+PW8mJihvKz1tKSxpPWUuZ2V0VGltZSgpLGk+PXImJm8+PWl9ZnVuY3Rpb24gZCh0LG4pe3ZhciBpPXQuZ2V0SG91cnMoKTtyZXR1cm4gdD1uZXcgRGF0ZSh0KSx1KHQsbiptKSxlKHQsaSksdH1mdW5jdGlvbiB1KGUsdCxuKXt2YXIgaSxyPWUuZ2V0VGltZXpvbmVPZmZzZXQoKTtlLnNldFRpbWUoZS5nZXRUaW1lKCkrdCksbnx8KGk9ZS5nZXRUaW1lem9uZU9mZnNldCgpLXIsZS5zZXRUaW1lKGUuZ2V0VGltZSgpK2kqZykpfWZ1bmN0aW9uIGgoKXtyZXR1cm4gbyhuZXcgRGF0ZSl9ZnVuY3Rpb24gcChlKXtyZXR1cm4gbyhlKS5nZXRUaW1lKCk9PWgoKS5nZXRUaW1lKCl9ZnVuY3Rpb24gZihlKXt2YXIgdD1uZXcgRGF0ZSgxOTgwLDEsMSwwLDAsMCk7cmV0dXJuIGUmJnQuc2V0SG91cnMoZS5nZXRIb3VycygpLGUuZ2V0TWludXRlcygpLGUuZ2V0U2Vjb25kcygpLGUuZ2V0TWlsbGlzZWNvbmRzKCkpLHR9dmFyIGc9NmU0LG09ODY0ZTU7cmV0dXJue2FkanVzdERTVDplLGRheU9mV2VlazpuLHNldERheU9mV2Vlazp0LGdldERhdGU6byxpc0luRGF0ZVJhbmdlOmMsaXNJblRpbWVSYW5nZTpsLGlzVG9kYXk6cCxuZXh0RGF5OmZ1bmN0aW9uKGUpe3JldHVybiBkKGUsMSl9LHByZXZpb3VzRGF5OmZ1bmN0aW9uKGUpe3JldHVybiBkKGUsLTEpfSx0b1V0Y1RpbWU6YSxNU19QRVJfREFZOm0sTVNfUEVSX0hPVVI6NjAqZyxNU19QRVJfTUlOVVRFOmcsc2V0VGltZTp1LGFkZERheXM6ZCx0b2RheTpoLHRvSW52YXJpYW50VGltZTpmLGZpcnN0RGF5T2ZNb250aDppLGxhc3REYXlPZk1vbnRoOnIsZ2V0TWlsbGlzZWNvbmRzOnN9fSgpLGd0LnN0cmlwV2hpdGVzcGFjZT1mdW5jdGlvbihlKXt2YXIgdCxuLGk7aWYoZG9jdW1lbnQuY3JlYXRlTm9kZUl0ZXJhdG9yKWZvcih0PWRvY3VtZW50LmNyZWF0ZU5vZGVJdGVyYXRvcihlLE5vZGVGaWx0ZXIuU0hPV19URVhULGZ1bmN0aW9uKHQpe3JldHVybiB0LnBhcmVudE5vZGU9PWU/Tm9kZUZpbHRlci5GSUxURVJfQUNDRVBUOk5vZGVGaWx0ZXIuRklMVEVSX1JFSkVDVH0sITEpO3QubmV4dE5vZGUoKTspdC5yZWZlcmVuY2VOb2RlJiYhdC5yZWZlcmVuY2VOb2RlLnRleHRDb250ZW50LnRyaW0oKSYmdC5yZWZlcmVuY2VOb2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodC5yZWZlcmVuY2VOb2RlKTtlbHNlIGZvcihuPTA7ZS5jaGlsZE5vZGVzLmxlbmd0aD5uO24rKylpPWUuY2hpbGROb2Rlc1tuXSwzIT1pLm5vZGVUeXBlfHwvXFxTLy50ZXN0KGkubm9kZVZhbHVlKXx8KGUucmVtb3ZlQ2hpbGQoaSksbi0tKSwxPT1pLm5vZGVUeXBlJiZndC5zdHJpcFdoaXRlc3BhY2UoaSl9LHB0PXQucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx0LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8dC5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHQub1JlcXVlc3RBbmltYXRpb25GcmFtZXx8dC5tc1JlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oZSl7c2V0VGltZW91dChlLDFlMy82MCl9LGd0LmFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKGUpe3B0LmNhbGwodCxlKX0sZnQ9W10sZ3QucXVldWVBbmltYXRpb249ZnVuY3Rpb24oZSl7ZnRbZnQubGVuZ3RoXT1lLDE9PT1mdC5sZW5ndGgmJmd0LnJ1bk5leHRBbmltYXRpb24oKX0sZ3QucnVuTmV4dEFuaW1hdGlvbj1mdW5jdGlvbigpe2d0LmFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7ZnRbMF0mJihmdC5zaGlmdCgpKCksZnRbMF0mJmd0LnJ1bk5leHRBbmltYXRpb24oKSl9KX0sZ3QucGFyc2VRdWVyeVN0cmluZ1BhcmFtcz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5zcGxpdChcIj9cIilbMV18fFwiXCIsbj17fSxpPXQuc3BsaXQoLyZ8PS8pLHI9aS5sZW5ndGgsbz0wO3I+bztvKz0yKVwiXCIhPT1pW29dJiYobltkZWNvZGVVUklDb21wb25lbnQoaVtvXSldPWRlY29kZVVSSUNvbXBvbmVudChpW28rMV0pKTtyZXR1cm4gbn0sZ3QuZWxlbWVudFVuZGVyQ3Vyc29yPWZ1bmN0aW9uKGUpe3JldHVybiBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGUueC5jbGllbnQsZS55LmNsaWVudCl9LGd0LndoZWVsRGVsdGFZPWZ1bmN0aW9uKGUpe3ZhciB0LGk9ZS5vcmlnaW5hbEV2ZW50LHI9aS53aGVlbERlbHRhWTtyZXR1cm4gaS53aGVlbERlbHRhPyhyPT09bnx8cikmJih0PWkud2hlZWxEZWx0YSk6aS5kZXRhaWwmJmkuYXhpcz09PWkuVkVSVElDQUxfQVhJUyYmKHQ9MTAqLWkuZGV0YWlsKSx0fSxndC50aHJvdHRsZT1mdW5jdGlvbihlLHQpe3ZhciBpLHI9MDtyZXR1cm4hdHx8MD49dD9lOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gbygpe2UuYXBwbHkoYSxsKSxyPStuZXcgRGF0ZX12YXIgYT10aGlzLHM9K25ldyBEYXRlLXIsbD1hcmd1bWVudHM7cmV0dXJuIHI/KGkmJmNsZWFyVGltZW91dChpKSxzPnQ/bygpOmk9c2V0VGltZW91dChvLHQtcyksbik6bygpfX0sZ3QuY2FyZXQ9ZnVuY3Rpb24odCxpLHIpe3ZhciBvLGEscyxsLGM9aSE9PW47aWYocj09PW4mJihyPWkpLHRbMF0mJih0PXRbMF0pLCFjfHwhdC5kaXNhYmxlZCl7dHJ5e3Quc2VsZWN0aW9uU3RhcnQhPT1uP2M/KHQuZm9jdXMoKSx0LnNldFNlbGVjdGlvblJhbmdlKGkscikpOmk9W3Quc2VsZWN0aW9uU3RhcnQsdC5zZWxlY3Rpb25FbmRdOmRvY3VtZW50LnNlbGVjdGlvbiYmKGUodCkuaXMoXCI6dmlzaWJsZVwiKSYmdC5mb2N1cygpLG89dC5jcmVhdGVUZXh0UmFuZ2UoKSxjPyhvLmNvbGxhcHNlKCEwKSxvLm1vdmVTdGFydChcImNoYXJhY3RlclwiLGkpLG8ubW92ZUVuZChcImNoYXJhY3RlclwiLHItaSksby5zZWxlY3QoKSk6KGE9by5kdXBsaWNhdGUoKSxvLm1vdmVUb0Jvb2ttYXJrKGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpLmdldEJvb2ttYXJrKCkpLGEuc2V0RW5kUG9pbnQoXCJFbmRUb1N0YXJ0XCIsbykscz1hLnRleHQubGVuZ3RoLGw9cytvLnRleHQubGVuZ3RoLGk9W3MsbF0pKX1jYXRjaChkKXtpPVtdfXJldHVybiBpfX0sZ3QuY29tcGlsZU1vYmlsZURpcmVjdGl2ZT1mdW5jdGlvbihlLG4pe3ZhciBpPXQuYW5ndWxhcjtyZXR1cm4gZS5hdHRyKFwiZGF0YS1cIitndC5ucytcInJvbGVcIixlWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKFwia2VuZG8tbW9iaWxlLVwiLFwiXCIpLnJlcGxhY2UoXCItXCIsXCJcIikpLGkuZWxlbWVudChlKS5pbmplY3RvcigpLmludm9rZShbXCIkY29tcGlsZVwiLGZ1bmN0aW9uKHQpe3ZhciByPWkuZWxlbWVudChlKS5zY29wZSgpO24mJm4ociksdChlKShyKSxyLiRkaWdlc3QoKX1dKSxndC53aWRnZXRJbnN0YW5jZShlLGd0Lm1vYmlsZS51aSl9LGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbih0LG4saSl7dmFyIHI9ZShcIjxmb3JtPlwiKS5hdHRyKHthY3Rpb246aSxtZXRob2Q6XCJQT1NUXCJ9KSxvPXQuc3BsaXQoXCI7YmFzZTY0LFwiKTtlKFwiPGlucHV0PlwiKS5hdHRyKHt2YWx1ZTpvWzBdLnJlcGxhY2UoXCJkYXRhOlwiLFwiXCIpLG5hbWU6XCJjb250ZW50VHlwZVwiLHR5cGU6XCJoaWRkZW5cIn0pLmFwcGVuZFRvKHIpLGUoXCI8aW5wdXQ+XCIpLmF0dHIoe3ZhbHVlOm9bMV0sbmFtZTpcImJhc2U2NFwiLHR5cGU6XCJoaWRkZW5cIn0pLmFwcGVuZFRvKHIpLGUoXCI8aW5wdXQ+XCIpLmF0dHIoe3ZhbHVlOm4sbmFtZTpcImZpbGVOYW1lXCIsdHlwZTpcImhpZGRlblwifSkuYXBwZW5kVG8ociksci5hcHBlbmRUbyhcImJvZHlcIikuc3VibWl0KCkucmVtb3ZlKCl9ZnVuY3Rpb24gaShlLHQpe3ZhciBuLGkscixvLGEscz1lO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXtmb3Iobj1lLnNwbGl0KFwiO2Jhc2U2NCxcIiksaT1uWzBdLHI9YXRvYihuWzFdKSxvPW5ldyBVaW50OEFycmF5KHIubGVuZ3RoKSxhPTA7ci5sZW5ndGg+YTthKyspb1thXT1yLmNoYXJDb2RlQXQoYSk7cz1uZXcgQmxvYihbby5idWZmZXJdLHt0eXBlOml9KX1uYXZpZ2F0b3IubXNTYXZlQmxvYihzLHQpfWZ1bmN0aW9uIHIoZSxuKXt0LkJsb2ImJmUgaW5zdGFuY2VvZiBCbG9iJiYoZT1VUkwuY3JlYXRlT2JqZWN0VVJMKGUpKSxvLmRvd25sb2FkPW4sby5ocmVmPWU7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJNb3VzZUV2ZW50c1wiKTtpLmluaXRNb3VzZUV2ZW50KFwiY2xpY2tcIiwhMCwhMSx0LDAsMCwwLDAsMCwhMSwhMSwhMSwhMSwwLG51bGwpLG8uZGlzcGF0Y2hFdmVudChpKX12YXIgbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKSxhPVwiZG93bmxvYWRcImluIG87Z3Quc2F2ZUFzPWZ1bmN0aW9uKGUpe3ZhciB0PW47ZS5mb3JjZVByb3h5fHwoYT90PXI6bmF2aWdhdG9yLm1zU2F2ZUJsb2ImJih0PWkpKSx0KGUuZGF0YVVSSSxlLmZpbGVOYW1lLGUucHJveHlVUkwpfX0oKX0oalF1ZXJ5LHdpbmRvdyksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsdCl7aWYoIXQpcmV0dXJuIGU7ZStcIi9cIj09PXQmJihlPXQpO3ZhciBuPVJlZ0V4cChcIl5cIit0LFwiaVwiKTtyZXR1cm4gbi50ZXN0KGUpfHwoZT10K1wiL1wiK2UpLHAucHJvdG9jb2wrXCIvL1wiKyhwLmhvc3QrXCIvXCIrZSkucmVwbGFjZSgvXFwvXFwvKy9nLFwiL1wiKX1mdW5jdGlvbiBpKGUpe3JldHVybiBlP1wiIyFcIjpcIiNcIn1mdW5jdGlvbiByKGUpe3ZhciB0PXAuaHJlZjtyZXR1cm5cIiMhXCI9PT1lJiZ0LmluZGV4T2YoXCIjXCIpPi0xJiZ0LmluZGV4T2YoXCIjIVwiKTwwP251bGw6dC5zcGxpdChlKVsxXXx8XCJcIn1mdW5jdGlvbiBvKGUsdCl7cmV0dXJuIDA9PT10LmluZGV4T2YoZSk/dC5zdWJzdHIoZS5sZW5ndGgpLnJlcGxhY2UoL1xcL1xcLy9nLFwiL1wiKTp0fWZ1bmN0aW9uIGEoZSl7cmV0dXJuIGUucmVwbGFjZSgvXigjKT8vLFwiI1wiKX1mdW5jdGlvbiBzKGUpe3JldHVybiBlLnJlcGxhY2UoL14oIyghKT8pPy8sXCIjIVwiKX12YXIgbD13aW5kb3cua2VuZG8sYz1cImNoYW5nZVwiLGQ9XCJiYWNrXCIsdT1cInNhbWVcIixoPWwuc3VwcG9ydCxwPXdpbmRvdy5sb2NhdGlvbixmPXdpbmRvdy5oaXN0b3J5LGc9NTAsbT1sLnN1cHBvcnQuYnJvd3Nlci5tc2llLHY9L14jKi8sXz13aW5kb3cuZG9jdW1lbnQseT1sLkNsYXNzLmV4dGVuZCh7YmFjazpmdW5jdGlvbigpe20/c2V0VGltZW91dChmdW5jdGlvbigpe2YuYmFjaygpfSk6Zi5iYWNrKCl9LGZvcndhcmQ6ZnVuY3Rpb24oKXttP3NldFRpbWVvdXQoZnVuY3Rpb24oKXtmLmZvcndhcmQoKX0pOmYuZm9yd2FyZCgpfSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gZi5sZW5ndGh9LHJlcGxhY2VMb2NhdGlvbjpmdW5jdGlvbihlKXtwLnJlcGxhY2UoZSl9fSksdz15LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLnJvb3Q9ZX0sbmF2aWdhdGU6ZnVuY3Rpb24oZSl7Zi5wdXNoU3RhdGUoe30sXy50aXRsZSxuKGUsdGhpcy5yb290KSl9LHJlcGxhY2U6ZnVuY3Rpb24oZSl7Zi5yZXBsYWNlU3RhdGUoe30sXy50aXRsZSxuKGUsdGhpcy5yb290KSl9LG5vcm1hbGl6ZTpmdW5jdGlvbihlKXtyZXR1cm4gbyh0aGlzLnJvb3QsZSl9LGN1cnJlbnQ6ZnVuY3Rpb24oKXt2YXIgZT1wLnBhdGhuYW1lO3JldHVybiBwLnNlYXJjaCYmKGUrPXAuc2VhcmNoKSxvKHRoaXMucm9vdCxlKX0sY2hhbmdlOmZ1bmN0aW9uKHQpe2Uod2luZG93KS5iaW5kKFwicG9wc3RhdGUua2VuZG9cIix0KX0sc3RvcDpmdW5jdGlvbigpe2Uod2luZG93KS51bmJpbmQoXCJwb3BzdGF0ZS5rZW5kb1wiKX0sbm9ybWFsaXplQ3VycmVudDpmdW5jdGlvbihlKXt2YXIgdCxvPWUucm9vdCxhPXAucGF0aG5hbWUscz1yKGkoZS5oYXNoQmFuZykpO289PT1hK1wiL1wiJiYodD1vKSxvPT09YSYmcyYmKHQ9bihzLnJlcGxhY2UodixcIlwiKSxvKSksdCYmZi5wdXNoU3RhdGUoe30sXy50aXRsZSx0KX19KSxiPXkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMuX2lkPWwuZ3VpZCgpLHRoaXMucHJlZml4PWkoZSksdGhpcy5maXg9ZT9zOmF9LG5hdmlnYXRlOmZ1bmN0aW9uKGUpe3AuaGFzaD10aGlzLmZpeChlKX0scmVwbGFjZTpmdW5jdGlvbihlKXt0aGlzLnJlcGxhY2VMb2NhdGlvbih0aGlzLmZpeChlKSl9LG5vcm1hbGl6ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5pbmRleE9mKHRoaXMucHJlZml4KTwwP2U6ZS5zcGxpdCh0aGlzLnByZWZpeClbMV19LGNoYW5nZTpmdW5jdGlvbih0KXtoLmhhc2hDaGFuZ2U/ZSh3aW5kb3cpLm9uKFwiaGFzaGNoYW5nZS5cIit0aGlzLl9pZCx0KTp0aGlzLl9pbnRlcnZhbD1zZXRJbnRlcnZhbCh0LGcpfSxzdG9wOmZ1bmN0aW9uKCl7ZSh3aW5kb3cpLm9mZihcImhhc2hjaGFuZ2UuXCIrdGhpcy5faWQpLGNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWwpfSxjdXJyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHIodGhpcy5wcmVmaXgpfSxub3JtYWxpemVDdXJyZW50OmZ1bmN0aW9uKGUpe3ZhciB0PXAucGF0aG5hbWUsbj1lLnJvb3Q7cmV0dXJuIGUucHVzaFN0YXRlJiZuIT09dD8odGhpcy5yZXBsYWNlTG9jYXRpb24obit0aGlzLnByZWZpeCtvKG4sdCkpLCEwKTohMX19KSxrPWwuT2JzZXJ2YWJsZS5leHRlbmQoe3N0YXJ0OmZ1bmN0aW9uKHQpe2lmKHQ9dHx8e30sdGhpcy5iaW5kKFtjLGQsdV0sdCksIXRoaXMuX3N0YXJ0ZWQpe3RoaXMuX3N0YXJ0ZWQ9ITAsdC5yb290PXQucm9vdHx8XCIvXCI7dmFyIG4saT10aGlzLmNyZWF0ZUFkYXB0ZXIodCk7aS5ub3JtYWxpemVDdXJyZW50KHQpfHwobj1pLmN1cnJlbnQoKSxlLmV4dGVuZCh0aGlzLHthZGFwdGVyOmkscm9vdDp0LnJvb3QsaGlzdG9yeUxlbmd0aDppLmxlbmd0aCgpLGN1cnJlbnQ6bixsb2NhdGlvbnM6W25dfSksaS5jaGFuZ2UoZS5wcm94eSh0aGlzLFwiX2NoZWNrVXJsXCIpKSl9fSxjcmVhdGVBZGFwdGVyOmZ1bmN0aW9uKGUpe3JldHVybiBoLnB1c2hTdGF0ZSYmZS5wdXNoU3RhdGU/bmV3IHcoZS5yb290KTpuZXcgYihlLmhhc2hCYW5nKX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuX3N0YXJ0ZWQmJih0aGlzLmFkYXB0ZXIuc3RvcCgpLHRoaXMudW5iaW5kKGMpLHRoaXMuX3N0YXJ0ZWQ9ITEpfSxjaGFuZ2U6ZnVuY3Rpb24oZSl7dGhpcy5iaW5kKGMsZSl9LHJlcGxhY2U6ZnVuY3Rpb24oZSx0KXt0aGlzLl9uYXZpZ2F0ZShlLHQsZnVuY3Rpb24odCl7dC5yZXBsYWNlKGUpLHRoaXMubG9jYXRpb25zW3RoaXMubG9jYXRpb25zLmxlbmd0aC0xXT10aGlzLmN1cnJlbnR9KX0sbmF2aWdhdGU6ZnVuY3Rpb24oZSxuKXtyZXR1cm5cIiM6YmFja1wiPT09ZT8odGhpcy5iYWNrQ2FsbGVkPSEwLHRoaXMuYWRhcHRlci5iYWNrKCksdCk6KHRoaXMuX25hdmlnYXRlKGUsbixmdW5jdGlvbih0KXt0Lm5hdmlnYXRlKGUpLHRoaXMubG9jYXRpb25zLnB1c2godGhpcy5jdXJyZW50KX0pLHQpfSxfbmF2aWdhdGU6ZnVuY3Rpb24oZSxuLGkpe3ZhciByPXRoaXMuYWRhcHRlcjtyZXR1cm4gZT1yLm5vcm1hbGl6ZShlKSx0aGlzLmN1cnJlbnQ9PT1lfHx0aGlzLmN1cnJlbnQ9PT1kZWNvZGVVUklDb21wb25lbnQoZSk/KHRoaXMudHJpZ2dlcih1KSx0KTooKG58fCF0aGlzLnRyaWdnZXIoYyx7dXJsOmV9KSkmJih0aGlzLmN1cnJlbnQ9ZSxpLmNhbGwodGhpcyxyKSx0aGlzLmhpc3RvcnlMZW5ndGg9ci5sZW5ndGgoKSksdCl9LF9jaGVja1VybDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuYWRhcHRlcixuPWUuY3VycmVudCgpLGk9ZS5sZW5ndGgoKSxyPXRoaXMuaGlzdG9yeUxlbmd0aD09PWksbz1uPT09dGhpcy5sb2NhdGlvbnNbdGhpcy5sb2NhdGlvbnMubGVuZ3RoLTJdJiZyLGE9dGhpcy5iYWNrQ2FsbGVkLHM9dGhpcy5jdXJyZW50O3JldHVybiBudWxsPT09bnx8dGhpcy5jdXJyZW50PT09bnx8dGhpcy5jdXJyZW50PT09ZGVjb2RlVVJJQ29tcG9uZW50KG4pPyEwOih0aGlzLmhpc3RvcnlMZW5ndGg9aSx0aGlzLmJhY2tDYWxsZWQ9ITEsdGhpcy5jdXJyZW50PW4sbyYmdGhpcy50cmlnZ2VyKFwiYmFja1wiLHt1cmw6cyx0bzpufSk/KGUuZm9yd2FyZCgpLHRoaXMuY3VycmVudD1zLHQpOnRoaXMudHJpZ2dlcihjLHt1cmw6bixiYWNrQnV0dG9uUHJlc3NlZDohYX0pPyhvP2UuZm9yd2FyZCgpOihlLmJhY2soKSx0aGlzLmhpc3RvcnlMZW5ndGgtLSksdGhpcy5jdXJyZW50PXMsdCk6KG8/dGhpcy5sb2NhdGlvbnMucG9wKCk6dGhpcy5sb2NhdGlvbnMucHVzaChuKSx0KSl9fSk7bC5IaXN0b3J5PWssbC5IaXN0b3J5Lkhpc3RvcnlBZGFwdGVyPXksbC5IaXN0b3J5Lkhhc2hBZGFwdGVyPWIsbC5IaXN0b3J5LlB1c2hTdGF0ZUFkYXB0ZXI9dyxsLmFic29sdXRlVVJMPW4sbC5oaXN0b3J5PW5ldyBrfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtyZXR1cm4gdD9lOlwiKFteL10rKVwifWZ1bmN0aW9uIHQodCxuKXtyZXR1cm4gUmVnRXhwKFwiXlwiK3QucmVwbGFjZShmLFwiXFxcXCQmXCIpLnJlcGxhY2UodSxcIig/OiQxKT9cIikucmVwbGFjZShoLGUpLnJlcGxhY2UocCxcIiguKj8pXCIpK1wiJFwiLG4/XCJpXCI6XCJcIil9ZnVuY3Rpb24gbihlKXtyZXR1cm4gZS5yZXBsYWNlKC8oXFw/LiopfCgjLiopL2csXCJcIil9dmFyIGk9d2luZG93LmtlbmRvLHI9aS5oaXN0b3J5LG89aS5PYnNlcnZhYmxlLGE9XCJpbml0XCIscz1cInJvdXRlTWlzc2luZ1wiLGw9XCJjaGFuZ2VcIixjPVwiYmFja1wiLGQ9XCJzYW1lXCIsdT0vXFwoKC4qPylcXCkvZyxoPS8oXFwoXFw/KT86XFx3Ky9nLHA9L1xcKlxcdysvZyxmPS9bXFwte31cXFtcXF0rPy4sXFxcXFxcXiR8I1xcc10vZyxnPWkuQ2xhc3MuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsbixpKXtlIGluc3RhbmNlb2YgUmVnRXhwfHwoZT10KGUsaSkpLHRoaXMucm91dGU9ZSx0aGlzLl9jYWxsYmFjaz1ufSxjYWxsYmFjazpmdW5jdGlvbihlKXt2YXIgdCxyLG89MCxhPWkucGFyc2VRdWVyeVN0cmluZ1BhcmFtcyhlKTtmb3IoZT1uKGUpLHQ9dGhpcy5yb3V0ZS5leGVjKGUpLnNsaWNlKDEpLHI9dC5sZW5ndGg7cj5vO28rKyl2b2lkIDAhPT10W29dJiYodFtvXT1kZWNvZGVVUklDb21wb25lbnQodFtvXSkpO3QucHVzaChhKSx0aGlzLl9jYWxsYmFjay5hcHBseShudWxsLHQpfSx3b3Jrc1dpdGg6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucm91dGUudGVzdChuKGUpKT8odGhpcy5jYWxsYmFjayhlKSwhMCk6ITF9fSksbT1vLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXtlfHwoZT17fSksby5mbi5pbml0LmNhbGwodGhpcyksdGhpcy5yb3V0ZXM9W10sdGhpcy5wdXNoU3RhdGU9ZS5wdXNoU3RhdGUsdGhpcy5oYXNoQmFuZz1lLmhhc2hCYW5nLHRoaXMucm9vdD1lLnJvb3QsdGhpcy5pZ25vcmVDYXNlPWUuaWdub3JlQ2FzZSE9PSExLHRoaXMuYmluZChbYSxzLGwsZF0sZSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtyLnVuYmluZChsLHRoaXMuX3VybENoYW5nZWRQcm94eSksci51bmJpbmQoZCx0aGlzLl9zYW1lUHJveHkpLHIudW5iaW5kKGMsdGhpcy5fYmFja1Byb3h5KSx0aGlzLnVuYmluZCgpfSxzdGFydDpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPWZ1bmN0aW9uKCl7dC5fc2FtZSgpfSxpPWZ1bmN0aW9uKGUpe3QuX2JhY2soZSl9LG89ZnVuY3Rpb24oZSl7dC5fdXJsQ2hhbmdlZChlKX07ci5zdGFydCh7c2FtZTpuLGNoYW5nZTpvLGJhY2s6aSxwdXNoU3RhdGU6dC5wdXNoU3RhdGUsaGFzaEJhbmc6dC5oYXNoQmFuZyxyb290OnQucm9vdH0pLGU9e3VybDpyLmN1cnJlbnR8fFwiL1wiLHByZXZlbnREZWZhdWx0OiQubm9vcH0sdC50cmlnZ2VyKGEsZSl8fHQuX3VybENoYW5nZWQoZSksdGhpcy5fdXJsQ2hhbmdlZFByb3h5PW8sdGhpcy5fYmFja1Byb3h5PWl9LHJvdXRlOmZ1bmN0aW9uKGUsdCl7dGhpcy5yb3V0ZXMucHVzaChuZXcgZyhlLHQsdGhpcy5pZ25vcmVDYXNlKSl9LG5hdmlnYXRlOmZ1bmN0aW9uKGUsdCl7aS5oaXN0b3J5Lm5hdmlnYXRlKGUsdCl9LHJlcGxhY2U6ZnVuY3Rpb24oZSx0KXtpLmhpc3RvcnkucmVwbGFjZShlLHQpfSxfYmFjazpmdW5jdGlvbihlKXt0aGlzLnRyaWdnZXIoYyx7dXJsOmUudXJsLHRvOmUudG99KSYmZS5wcmV2ZW50RGVmYXVsdCgpfSxfc2FtZTpmdW5jdGlvbigpe3RoaXMudHJpZ2dlcihkKX0sX3VybENoYW5nZWQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLG8sYT1lLnVybDtpZihhfHwoYT1cIi9cIiksdGhpcy50cmlnZ2VyKGwse3VybDplLnVybCxwYXJhbXM6aS5wYXJzZVF1ZXJ5U3RyaW5nUGFyYW1zKGUudXJsKSxiYWNrQnV0dG9uUHJlc3NlZDplLmJhY2tCdXR0b25QcmVzc2VkfSkpcmV0dXJuIHZvaWQgZS5wcmV2ZW50RGVmYXVsdCgpO2Zvcih0PTAsbj10aGlzLnJvdXRlcyxvPW4ubGVuZ3RoO28+dDt0KyspaWYocj1uW3RdLHIud29ya3NXaXRoKGEpKXJldHVybjt0aGlzLnRyaWdnZXIocyx7dXJsOmEscGFyYW1zOmkucGFyc2VRdWVyeVN0cmluZ1BhcmFtcyhhKSxiYWNrQnV0dG9uUHJlc3NlZDplLmJhY2tCdXR0b25QcmVzc2VkfSkmJmUucHJldmVudERlZmF1bHQoKX19KTtpLlJvdXRlcj1tfSgpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihyLHMpe3ZhciBsLGMsZCx1LGgscCxmLGcsbT1bXSx2PXIubG9naWN8fFwiYW5kXCIsXz1yLmZpbHRlcnM7Zm9yKGw9MCxjPV8ubGVuZ3RoO2M+bDtsKyspcj1fW2xdLGQ9ci5maWVsZCxmPXIudmFsdWUscD1yLm9wZXJhdG9yLHIuZmlsdGVycz9yPW4ocixzKTooZz1yLmlnbm9yZUNhc2UsZD1kLnJlcGxhY2UoL1xcLi9nLFwiL1wiKSxyPW9bcF0scyYmKHI9YVtwXSksciYmZiE9PXQmJih1PWUudHlwZShmKSxcInN0cmluZ1wiPT09dT8oaD1cIid7MX0nXCIsZj1mLnJlcGxhY2UoLycvZyxcIicnXCIpLGc9PT0hMCYmKGQ9XCJ0b2xvd2VyKFwiK2QrXCIpXCIpKTpoPVwiZGF0ZVwiPT09dT9zP1wiezE6eXl5eS1NTS1kZFRISDptbTpzcyswMDowMH1cIjpcImRhdGV0aW1lJ3sxOnl5eXktTU0tZGRUSEg6bW06c3N9J1wiOlwiezF9XCIsci5sZW5ndGg+Mz9cInN1YnN0cmluZ29mXCIhPT1yP2g9XCJ7MH0oezJ9LFwiK2grXCIpXCI6KGg9XCJ7MH0oXCIraCtcIix7Mn0pXCIsXCJkb2Vzbm90Y29udGFpblwiPT09cCYmKHM/KGg9XCJ7MH0oezJ9LCd7MX0nKSBlcSAtMVwiLHI9XCJpbmRleG9mXCIpOmgrPVwiIGVxIGZhbHNlXCIpKTpoPVwiezJ9IHswfSBcIitoLHI9aS5mb3JtYXQoaCxyLGYsZCkpKSxtLnB1c2gocik7cmV0dXJuIHI9bS5qb2luKFwiIFwiK3YrXCIgXCIpLG0ubGVuZ3RoPjEmJihyPVwiKFwiK3IrXCIpXCIpLHJ9dmFyIGk9d2luZG93LmtlbmRvLHI9ZS5leHRlbmQsbz17ZXE6XCJlcVwiLG5lcTpcIm5lXCIsZ3Q6XCJndFwiLGd0ZTpcImdlXCIsbHQ6XCJsdFwiLGx0ZTpcImxlXCIsY29udGFpbnM6XCJzdWJzdHJpbmdvZlwiLGRvZXNub3Rjb250YWluOlwic3Vic3RyaW5nb2ZcIixlbmRzd2l0aDpcImVuZHN3aXRoXCIsc3RhcnRzd2l0aDpcInN0YXJ0c3dpdGhcIn0sYT1yKHt9LG8se2NvbnRhaW5zOlwiY29udGFpbnNcIn0pLHM9e3BhZ2VTaXplOmUubm9vcCxwYWdlOmUubm9vcCxmaWx0ZXI6ZnVuY3Rpb24oZSx0LGkpe3QmJihlLiRmaWx0ZXI9bih0LGkpKX0sc29ydDpmdW5jdGlvbih0LG4pe3ZhciBpPWUubWFwKG4sZnVuY3Rpb24oZSl7dmFyIHQ9ZS5maWVsZC5yZXBsYWNlKC9cXC4vZyxcIi9cIik7cmV0dXJuXCJkZXNjXCI9PT1lLmRpciYmKHQrPVwiIGRlc2NcIiksdH0pLmpvaW4oXCIsXCIpO2kmJih0LiRvcmRlcmJ5PWkpfSxza2lwOmZ1bmN0aW9uKGUsdCl7dCYmKGUuJHNraXA9dCl9LHRha2U6ZnVuY3Rpb24oZSx0KXt0JiYoZS4kdG9wPXQpfX0sbD17cmVhZDp7ZGF0YVR5cGU6XCJqc29ucFwifX07cighMCxpLmRhdGEse3NjaGVtYXM6e29kYXRhOnt0eXBlOlwianNvblwiLGRhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZC5yZXN1bHRzfHxbZS5kXX0sdG90YWw6XCJkLl9fY291bnRcIn19LHRyYW5zcG9ydHM6e29kYXRhOntyZWFkOntjYWNoZTohMCxkYXRhVHlwZTpcImpzb25wXCIsanNvbnA6XCIkY2FsbGJhY2tcIn0sdXBkYXRlOntjYWNoZTohMCxkYXRhVHlwZTpcImpzb25cIixjb250ZW50VHlwZTpcImFwcGxpY2F0aW9uL2pzb25cIix0eXBlOlwiUFVUXCJ9LGNyZWF0ZTp7Y2FjaGU6ITAsZGF0YVR5cGU6XCJqc29uXCIsY29udGVudFR5cGU6XCJhcHBsaWNhdGlvbi9qc29uXCIsdHlwZTpcIlBPU1RcIn0sZGVzdHJveTp7Y2FjaGU6ITAsZGF0YVR5cGU6XCJqc29uXCIsdHlwZTpcIkRFTEVURVwifSxwYXJhbWV0ZXJNYXA6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLG8sYSxjO2lmKGU9ZXx8e30sdD10fHxcInJlYWRcIixjPSh0aGlzLm9wdGlvbnN8fGwpW3RdLGM9Yz9jLmRhdGFUeXBlOlwianNvblwiLFwicmVhZFwiPT09dCl7cj17JGlubGluZWNvdW50OlwiYWxscGFnZXNcIn0sXCJqc29uXCIhPWMmJihyLiRmb3JtYXQ9XCJqc29uXCIpO2ZvcihhIGluIGUpc1thXT9zW2FdKHIsZVthXSxuKTpyW2FdPWVbYV19ZWxzZXtpZihcImpzb25cIiE9PWMpdGhyb3cgRXJyb3IoXCJPbmx5IGpzb24gZGF0YVR5cGUgY2FuIGJlIHVzZWQgZm9yIFwiK3QrXCIgb3BlcmF0aW9uLlwiKTtpZihcImRlc3Ryb3lcIiE9PXQpe2ZvcihhIGluIGUpbz1lW2FdLFwibnVtYmVyXCI9PXR5cGVvZiBvJiYoZVthXT1vK1wiXCIpO3I9aS5zdHJpbmdpZnkoZSl9fXJldHVybiByfX19fSkscighMCxpLmRhdGEse3NjaGVtYXM6e1wib2RhdGEtdjRcIjp7dHlwZTpcImpzb25cIixkYXRhOmZ1bmN0aW9uKGUpe3JldHVybiBlLnZhbHVlP2UudmFsdWU6KGRlbGV0ZSBlW1wib2RhdGEubWV0YWRhdGFcIl0sW2VdKX0sdG90YWw6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbXCJAb2RhdGEuY291bnRcIl19fX0sdHJhbnNwb3J0czp7XCJvZGF0YS12NFwiOntyZWFkOntjYWNoZTohMCxkYXRhVHlwZTpcImpzb25cIn0sdXBkYXRlOntjYWNoZTohMCxkYXRhVHlwZTpcImpzb25cIixjb250ZW50VHlwZTpcImFwcGxpY2F0aW9uL2pzb247SUVFRTc1NENvbXBhdGlibGU9dHJ1ZVwiLHR5cGU6XCJQVVRcIn0sY3JlYXRlOntjYWNoZTohMCxkYXRhVHlwZTpcImpzb25cIixjb250ZW50VHlwZTpcImFwcGxpY2F0aW9uL2pzb247SUVFRTc1NENvbXBhdGlibGU9dHJ1ZVwiLHR5cGU6XCJQT1NUXCJ9LGRlc3Ryb3k6e2NhY2hlOiEwLGRhdGFUeXBlOlwianNvblwiLHR5cGU6XCJERUxFVEVcIn0scGFyYW1ldGVyTWFwOmZ1bmN0aW9uKGUsdCl7dmFyIG49aS5kYXRhLnRyYW5zcG9ydHMub2RhdGEucGFyYW1ldGVyTWFwKGUsdCwhMCk7cmV0dXJuXCJyZWFkXCI9PXQmJihuLiRjb3VudD0hMCxkZWxldGUgbi4kaW5saW5lY291bnQpLG59fX19KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXt2YXIgbj13aW5kb3cua2VuZG8saT1lLmlzQXJyYXkscj1lLmlzUGxhaW5PYmplY3Qsbz1lLm1hcCxhPWUuZWFjaCxzPWUuZXh0ZW5kLGw9bi5nZXR0ZXIsYz1uLkNsYXNzLGQ9Yy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbCxjLGQsdT10aGlzLGg9ZS50b3RhbCxwPWUubW9kZWwsZj1lLnBhcnNlLGc9ZS5lcnJvcnMsbT1lLnNlcmlhbGl6ZSx2PWUuZGF0YTtwJiYocihwKSYmKHQ9ZS5tb2RlbEJhc2V8fG4uZGF0YS5Nb2RlbCxwLmZpZWxkcyYmYShwLmZpZWxkcyxmdW5jdGlvbihlLHQpe3Q9cih0KSYmdC5maWVsZD9zKHQse2ZpZWxkOnUuZ2V0dGVyKHQuZmllbGQpfSk6e2ZpZWxkOnUuZ2V0dGVyKHQpfSxwLmZpZWxkc1tlXT10fSksbD1wLmlkLGwmJihjPXt9LGNbdS54cGF0aFRvTWVtYmVyKGwsITApXT17ZmllbGQ6dS5nZXR0ZXIobCl9LHAuZmllbGRzPXMoYyxwLmZpZWxkcykscC5pZD11LnhwYXRoVG9NZW1iZXIobCkpLHA9dC5kZWZpbmUocCkpLHUubW9kZWw9cCksaCYmKFwic3RyaW5nXCI9PXR5cGVvZiBoPyhoPXUuZ2V0dGVyKGgpLHUudG90YWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHBhcnNlSW50KGgoZSksMTApfSk6XCJmdW5jdGlvblwiPT10eXBlb2YgaCYmKHUudG90YWw9aCkpLGcmJihcInN0cmluZ1wiPT10eXBlb2YgZz8oZz11LmdldHRlcihnKSx1LmVycm9ycz1mdW5jdGlvbihlKXtyZXR1cm4gZyhlKXx8bnVsbH0pOlwiZnVuY3Rpb25cIj09dHlwZW9mIGcmJih1LmVycm9ycz1nKSksdiYmKFwic3RyaW5nXCI9PXR5cGVvZiB2Pyh2PXUueHBhdGhUb01lbWJlcih2KSx1LmRhdGE9ZnVuY3Rpb24oZSl7dmFyIHQsbj11LmV2YWx1YXRlKGUsdik7cmV0dXJuIG49aShuKT9uOltuXSx1Lm1vZGVsJiZwLmZpZWxkcz8odD1uZXcgdS5tb2RlbCxvKG4sZnVuY3Rpb24oZSl7aWYoZSl7dmFyIG4saT17fTtmb3IobiBpbiBwLmZpZWxkcylpW25dPXQuX3BhcnNlKG4scC5maWVsZHNbbl0uZmllbGQoZSkpO3JldHVybiBpfX0pKTpufSk6XCJmdW5jdGlvblwiPT10eXBlb2YgdiYmKHUuZGF0YT12KSksXCJmdW5jdGlvblwiPT10eXBlb2YgZiYmKGQ9dS5wYXJzZSx1LnBhcnNlPWZ1bmN0aW9uKGUpe3ZhciB0PWYuY2FsbCh1LGUpO3JldHVybiBkLmNhbGwodSx0KX0pLFwiZnVuY3Rpb25cIj09dHlwZW9mIG0mJih1LnNlcmlhbGl6ZT1tKX0sdG90YWw6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZGF0YShlKS5sZW5ndGh9LGVycm9yczpmdW5jdGlvbihlKXtyZXR1cm4gZT9lLmVycm9yczpudWxsfSxzZXJpYWxpemU6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHBhcnNlRE9NOmZ1bmN0aW9uKGUpe3ZhciBuLHIsbyxhLHMsbCxjLGQ9e30sdT1lLmF0dHJpYnV0ZXMsaD11Lmxlbmd0aDtmb3IoYz0wO2g+YztjKyspbD11W2NdLGRbXCJAXCIrbC5ub2RlTmFtZV09bC5ub2RlVmFsdWU7Zm9yKHI9ZS5maXJzdENoaWxkO3I7cj1yLm5leHRTaWJsaW5nKW89ci5ub2RlVHlwZSwzPT09b3x8ND09PW8/ZFtcIiN0ZXh0XCJdPXIubm9kZVZhbHVlOjE9PT1vJiYobj10aGlzLnBhcnNlRE9NKHIpLGE9ci5ub2RlTmFtZSxzPWRbYV0saShzKT9zLnB1c2gobik6cz1zIT09dD9bcyxuXTpuLGRbYV09cyk7cmV0dXJuIGR9LGV2YWx1YXRlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuLHIsbyxhLHMsbD10LnNwbGl0KFwiLlwiKTtuPWwuc2hpZnQoKTspaWYoZT1lW25dLGkoZSkpe2ZvcihyPVtdLHQ9bC5qb2luKFwiLlwiKSxzPTAsbz1lLmxlbmd0aDtvPnM7cysrKWE9dGhpcy5ldmFsdWF0ZShlW3NdLHQpLGE9aShhKT9hOlthXSxyLnB1c2guYXBwbHkocixhKTtyZXR1cm4gcn1yZXR1cm4gZX0scGFyc2U6ZnVuY3Rpb24odCl7dmFyIG4saSxyPXt9O3JldHVybiBuPXQuZG9jdW1lbnRFbGVtZW50fHxlLnBhcnNlWE1MKHQpLmRvY3VtZW50RWxlbWVudCxpPXRoaXMucGFyc2VET00obikscltuLm5vZGVOYW1lXT1pLHJ9LHhwYXRoVG9NZW1iZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT8oZT1lLnJlcGxhY2UoL15cXC8vLFwiXCIpLnJlcGxhY2UoL1xcLy9nLFwiLlwiKSxlLmluZGV4T2YoXCJAXCIpPj0wP2UucmVwbGFjZSgvXFwuPyhALiopLyx0P1wiJDFcIjonW1wiJDFcIl0nKTplLmluZGV4T2YoXCJ0ZXh0KClcIik+PTA/ZS5yZXBsYWNlKC8oXFwuP3RleHRcXChcXCkpLyx0P1wiI3RleHRcIjonW1wiI3RleHRcIl0nKTplKTpcIlwifSxnZXR0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGwodGhpcy54cGF0aFRvTWVtYmVyKGUpLCEwKX19KTtlLmV4dGVuZCghMCxuLmRhdGEse1htbERhdGFSZWFkZXI6ZCxyZWFkZXJzOnt4bWw6ZH19KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsdCxuLGkpe3JldHVybiBmdW5jdGlvbihyKXt2YXIgbyxhPXt9O2ZvcihvIGluIHIpYVtvXT1yW29dO2EuZmllbGQ9aT9uK1wiLlwiK3IuZmllbGQ6bix0PT13dCYmZS5fbm90aWZ5Q2hhbmdlJiZlLl9ub3RpZnlDaGFuZ2UoYSksZS50cmlnZ2VyKHQsYSl9fWZ1bmN0aW9uIGkodCxuKXtpZih0PT09bilyZXR1cm4hMDt2YXIgcixvPWUudHlwZSh0KSxhPWUudHlwZShuKTtpZihvIT09YSlyZXR1cm4hMTtpZihcImRhdGVcIj09PW8pcmV0dXJuIHQuZ2V0VGltZSgpPT09bi5nZXRUaW1lKCk7aWYoXCJvYmplY3RcIiE9PW8mJlwiYXJyYXlcIiE9PW8pcmV0dXJuITE7Zm9yKHIgaW4gdClpZighaSh0W3JdLG5bcl0pKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIHIoZSx0KXt2YXIgbixpO2ZvcihpIGluIGUpe2lmKG49ZVtpXSxpdChuKSYmbi5maWVsZCYmbi5maWVsZD09PXQpcmV0dXJuIG47aWYobj09PXQpcmV0dXJuIG59cmV0dXJuIG51bGx9ZnVuY3Rpb24gbyhlKXt0aGlzLmRhdGE9ZXx8W119ZnVuY3Rpb24gYShlLG4pe2lmKGUpe3ZhciBpPXR5cGVvZiBlPT09ZnQ/e2ZpZWxkOmUsZGlyOm59OmUscj1vdChpKT9pOmkhPT10P1tpXTpbXTtyZXR1cm4gYXQocixmdW5jdGlvbihlKXtyZXR1cm4hIWUuZGlyfSl9fWZ1bmN0aW9uIHMoZSl7dmFyIHQsbixpLHIsbz1lLmZpbHRlcnM7aWYobylmb3IodD0wLG49by5sZW5ndGg7bj50O3QrKylpPW9bdF0scj1pLm9wZXJhdG9yLHImJnR5cGVvZiByPT09ZnQmJihpLm9wZXJhdG9yPVdbci50b0xvd2VyQ2FzZSgpXXx8cikscyhpKX1mdW5jdGlvbiBsKGUpe3JldHVybiBlJiYhcnQoZSk/KChvdChlKXx8IWUuZmlsdGVycykmJihlPXtsb2dpYzpcImFuZFwiLGZpbHRlcnM6b3QoZSk/ZTpbZV19KSxzKGUpLGUpOnR9ZnVuY3Rpb24gYyhlKXtyZXR1cm4gb3QoZSk/ZTpbZV19ZnVuY3Rpb24gZChlLG4pe3ZhciBpPXR5cGVvZiBlPT09ZnQ/e2ZpZWxkOmUsZGlyOm59OmUscj1vdChpKT9pOmkhPT10P1tpXTpbXTtyZXR1cm4gSChyLGZ1bmN0aW9uKGUpe3JldHVybntmaWVsZDplLmZpZWxkLGRpcjplLmRpcnx8XCJhc2NcIixhZ2dyZWdhdGVzOmUuYWdncmVnYXRlc319KX1mdW5jdGlvbiB1KGUsdCl7cmV0dXJuIGUmJmUuZ2V0VGltZSYmdCYmdC5nZXRUaW1lP2UuZ2V0VGltZSgpPT09dC5nZXRUaW1lKCk6ZT09PXR9ZnVuY3Rpb24gaChlLHQsbixpLHIsbyl7dmFyIGEscyxsLGMsZDtmb3IodD10fHxbXSxjPXQubGVuZ3RoLGE9MDtjPmE7YSsrKXM9dFthXSxsPXMuYWdncmVnYXRlLGQ9cy5maWVsZCxlW2RdPWVbZF18fHt9LG9bZF09b1tkXXx8e30sb1tkXVtsXT1vW2RdW2xdfHx7fSxlW2RdW2xdPWpbbC50b0xvd2VyQ2FzZSgpXShlW2RdW2xdLG4sZHQuYWNjZXNzb3IoZCksaSxyLG9bZF1bbF0pfWZ1bmN0aW9uIHAoZSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGUmJiFpc05hTihlKX1mdW5jdGlvbiBmKGUpe3JldHVybiBlJiZlLmdldFRpbWV9ZnVuY3Rpb24gZyhlKXt2YXIgdCxuPWUubGVuZ3RoLGk9QXJyYXkobik7Zm9yKHQ9MDtuPnQ7dCsrKWlbdF09ZVt0XS50b0pTT04oKTtyZXR1cm4gaX1mdW5jdGlvbiBtKGUsdCxuLGkscil7dmFyIG8sYSxzLGwsYztmb3IobD0wLGM9ZS5sZW5ndGg7Yz5sO2wrKyl7bz1lW2xdO2ZvcihhIGluIHQpcz1yW2FdLHMmJnMhPT1hJiYob1tzXT10W2FdKG8pLGRlbGV0ZSBvW2FdKX19ZnVuY3Rpb24gdihlLHQsbixpLHIpe3ZhciBvLGEscyxsLGM7Zm9yKGw9MCxjPWUubGVuZ3RoO2M+bDtsKyspe289ZVtsXTtmb3IoYSBpbiB0KW9bYV09bi5fcGFyc2UoYSx0W2FdKG8pKSxzPXJbYV0scyYmcyE9PWEmJmRlbGV0ZSBvW3NdfX1mdW5jdGlvbiBfKGUsdCxuLGkscil7dmFyIG8sYSxzLGw7Zm9yKGE9MCxsPWUubGVuZ3RoO2w+YTthKyspbz1lW2FdLHM9aVtvLmZpZWxkXSxzJiZzIT1vLmZpZWxkJiYoby5maWVsZD1zKSxvLnZhbHVlPW4uX3BhcnNlKG8uZmllbGQsby52YWx1ZSksby5oYXNTdWJncm91cHM/XyhvLml0ZW1zLHQsbixpLHIpOnYoby5pdGVtcyx0LG4saSxyKX1mdW5jdGlvbiB5KGUsdCxuLGkscixvKXtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGE9ZShhKSxhJiYhcnQoaSkmJihcIltvYmplY3QgQXJyYXldXCI9PT1IdC5jYWxsKGEpfHxhIGluc3RhbmNlb2YganR8fChhPVthXSksbihhLGksbmV3IHQscixvKSksYXx8W119fWZ1bmN0aW9uIHcoZSx0LG4saSl7Zm9yKHZhciByLG8sYSxzPTA7dC5sZW5ndGgmJmkmJihyPXRbc10sbz1yLml0ZW1zLGE9by5sZW5ndGgsZSYmZS5maWVsZD09PXIuZmllbGQmJmUudmFsdWU9PT1yLnZhbHVlPyhlLmhhc1N1Ymdyb3VwcyYmZS5pdGVtcy5sZW5ndGg/dyhlLml0ZW1zW2UuaXRlbXMubGVuZ3RoLTFdLHIuaXRlbXMsbixpKToobz1vLnNsaWNlKG4sbitpKSxlLml0ZW1zPWUuaXRlbXMuY29uY2F0KG8pKSx0LnNwbGljZShzLS0sMSkpOnIuaGFzU3ViZ3JvdXBzJiZvLmxlbmd0aD93KHIsbyxuLGkpOihvPW8uc2xpY2UobixuK2kpLHIuaXRlbXM9byxyLml0ZW1zLmxlbmd0aHx8dC5zcGxpY2Uocy0tLDEpKSwwPT09by5sZW5ndGg/bi09YToobj0wLGktPW8ubGVuZ3RoKSwhKCsrcz49dC5sZW5ndGgpKTspO3QubGVuZ3RoPnMmJnQuc3BsaWNlKHMsdC5sZW5ndGgtcyl9ZnVuY3Rpb24gYihlKXt2YXIgdCxuLGkscixvLGE9W107Zm9yKHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspaWYobz1lLmF0KHQpLG8uaGFzU3ViZ3JvdXBzKWE9YS5jb25jYXQoYihvLml0ZW1zKSk7ZWxzZSBmb3IoaT1vLml0ZW1zLHI9MDtpLmxlbmd0aD5yO3IrKylhLnB1c2goaS5hdChyKSk7cmV0dXJuIGF9ZnVuY3Rpb24gayhlLHQpe3ZhciBuLGkscjtpZih0KWZvcihuPTAsaT1lLmxlbmd0aDtpPm47bisrKXI9ZS5hdChuKSxyLmhhc1N1Ymdyb3Vwcz9rKHIuaXRlbXMsdCk6ci5pdGVtcz1uZXcgR3Qoci5pdGVtcyx0KX1mdW5jdGlvbiB4KGUsdCl7Zm9yKHZhciBuPTAsaT1lLmxlbmd0aDtpPm47bisrKWlmKGVbbl0uaGFzU3ViZ3JvdXBzKXtpZih4KGVbbl0uaXRlbXMsdCkpcmV0dXJuITB9ZWxzZSBpZih0KGVbbl0uaXRlbXMsZVtuXSkpcmV0dXJuITB9ZnVuY3Rpb24gQyhlLHQsbixpKXtmb3IodmFyIHI9MDtlLmxlbmd0aD5yJiZlW3JdLmRhdGEhPT10JiYhUyhlW3JdLmRhdGEsbixpKTtyKyspO31mdW5jdGlvbiBTKGUsdCxuKXtmb3IodmFyIGk9MCxyPWUubGVuZ3RoO3I+aTtpKyspe2lmKGVbaV0mJmVbaV0uaGFzU3ViZ3JvdXBzKXJldHVybiBTKGVbaV0uaXRlbXMsdCxuKTtpZihlW2ldPT09dHx8ZVtpXT09PW4pcmV0dXJuIGVbaV09biwhMH19ZnVuY3Rpb24gVChlLG4saSxyKXt2YXIgbyxhLHMsbDtmb3Iobz0wLGE9ZS5sZW5ndGg7YT5vO28rKylpZihzPWVbb10scyYmIShzIGluc3RhbmNlb2YgcikpaWYocy5oYXNTdWJncm91cHMhPT10KVQocy5pdGVtcyxuLGkscik7ZWxzZSBmb3IobD0wO24ubGVuZ3RoPmw7bCsrKWlmKG5bbF09PT1zKXtlW29dPW4uYXQobCksQyhpLG4scyxlW29dKTticmVha319ZnVuY3Rpb24gRChlLHQpe3ZhciBuLGkscjtmb3Iobj0wLGk9ZS5sZW5ndGg7aT5uO24rKylpZihyPWUuYXQobiksci51aWQ9PXQudWlkKXJldHVybiBlLnNwbGljZShuLDEpLHJ9ZnVuY3Rpb24gQShlLHQpe3ZhciBuLGkscixvO2ZvcihyPWUubGVuZ3RoLTEsbz0wO3I+PW87ci0tKWk9ZVtyXSxuPXt2YWx1ZTp0LmdldChpLmZpZWxkKSxmaWVsZDppLmZpZWxkLGl0ZW1zOm4/W25dOlt0XSxoYXNTdWJncm91cHM6ISFuLGFnZ3JlZ2F0ZXM6e319O3JldHVybiBufWZ1bmN0aW9uIEUoZSx0KXtyZXR1cm4gdD9QKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGUudWlkP2UudWlkPT10LnVpZDplW3QuaWRGaWVsZF09PT10LmlkfSk6LTF9ZnVuY3Rpb24gTShlLHQpe3JldHVybiB0P1AoZSxmdW5jdGlvbihlKXtyZXR1cm4gZS51aWQ9PXQudWlkfSk6LTF9ZnVuY3Rpb24gUChlLHQpe3ZhciBuLGk7Zm9yKG49MCxpPWUubGVuZ3RoO2k+bjtuKyspaWYodChlW25dKSlyZXR1cm4gbjtyZXR1cm4tMX1mdW5jdGlvbiBJKGUsdCl7dmFyIG4saTtyZXR1cm4gZSYmIXJ0KGUpPyhuPWVbdF0saT1pdChuKT9uLmZyb218fG4uZmllbGR8fHQ6ZVt0XXx8dCx1dChpKT90OmkpOnR9ZnVuY3Rpb24geihlLHQpe3ZhciBuLGkscixvPXt9O2ZvcihyIGluIGUpXCJmaWx0ZXJzXCIhPT1yJiYob1tyXT1lW3JdKTtpZihlLmZpbHRlcnMpZm9yKG8uZmlsdGVycz1bXSxuPTAsaT1lLmZpbHRlcnMubGVuZ3RoO2k+bjtuKyspby5maWx0ZXJzW25dPXooZS5maWx0ZXJzW25dLHQpO2Vsc2Ugby5maWVsZD1JKHQuZmllbGRzLG8uZmllbGQpO3JldHVybiBvfWZ1bmN0aW9uIEYoZSx0KXt2YXIgbixpLHIsbyxhLHM9W107Zm9yKG49MCxpPWUubGVuZ3RoO2k+bjtuKyspe3I9e30sbz1lW25dO2ZvcihhIGluIG8pclthXT1vW2FdO3IuZmllbGQ9SSh0LmZpZWxkcyxyLmZpZWxkKSxyLmFnZ3JlZ2F0ZXMmJm90KHIuYWdncmVnYXRlcykmJihyLmFnZ3JlZ2F0ZXM9RihyLmFnZ3JlZ2F0ZXMsdCkpLHMucHVzaChyKX1yZXR1cm4gc31mdW5jdGlvbiBSKHQsbil7dmFyIGkscixvLGEscyxsPWUodClbMF0uY2hpbGRyZW4sYz1bXSxkPW5bMF0sdT1uWzFdO2ZvcihpPTAscj1sLmxlbmd0aDtyPmk7aSsrKW89e30scz1sW2ldLHMuZGlzYWJsZWR8fChvW2QuZmllbGRdPXMudGV4dCxhPXMuYXR0cmlidXRlcy52YWx1ZSxhPWEmJmEuc3BlY2lmaWVkP3MudmFsdWU6cy50ZXh0LG9bdS5maWVsZF09YSxjLnB1c2gobykpO3JldHVybiBjfWZ1bmN0aW9uIEIodCxuKXt2YXIgaSxyLG8sYSxzLGwsYyxkPWUodClbMF0udEJvZGllc1swXSx1PWQ/ZC5yb3dzOltdLGg9bi5sZW5ndGgscD1bXTtmb3IoaT0wLHI9dS5sZW5ndGg7cj5pO2krKyl7Zm9yKHM9e30sYz0hMCxhPXVbaV0uY2VsbHMsbz0wO2g+bztvKyspbD1hW29dLFwidGhcIiE9PWwubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmKGM9ITEsc1tuW29dLmZpZWxkXT1sLmlubmVySFRNTCk7Y3x8cC5wdXNoKHMpfXJldHVybiBwfWZ1bmN0aW9uIEwoZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZGF0YSxuPUsuZm5bZV0uYXBwbHkodGhpcyxMdC5jYWxsKGFyZ3VtZW50cykpO3JldHVybiB0aGlzLl9kYXRhIT10JiZ0aGlzLl9hdHRhY2hCdWJibGVIYW5kbGVycygpLG59fWZ1bmN0aW9uIE8odCxuKXtmdW5jdGlvbiBpKGUsdCl7cmV0dXJuIGUuZmlsdGVyKHQpLmFkZChlLmZpbmQodCkpfXZhciByLG8sYSxzLGwsYyxkLHUsaD1lKHQpLmNoaWxkcmVuKCkscD1bXSxmPW5bMF0uZmllbGQsZz1uWzFdJiZuWzFdLmZpZWxkLG09blsyXSYmblsyXS5maWVsZCx2PW5bM10mJm5bM10uZmllbGQ7Zm9yKHI9MCxvPWgubGVuZ3RoO28+cjtyKyspYT17X2xvYWRlZDohMH0scz1oLmVxKHIpLGM9c1swXS5maXJzdENoaWxkLHU9cy5jaGlsZHJlbigpLHQ9dS5maWx0ZXIoXCJ1bFwiKSx1PXUuZmlsdGVyKFwiOm5vdCh1bClcIiksbD1zLmF0dHIoXCJkYXRhLWlkXCIpLGwmJihhLmlkPWwpLGMmJihhW2ZdPTM9PWMubm9kZVR5cGU/Yy5ub2RlVmFsdWU6dS50ZXh0KCkpLGcmJihhW2ddPWkodSxcImFcIikuYXR0cihcImhyZWZcIikpLHYmJihhW3ZdPWkodSxcImltZ1wiKS5hdHRyKFwic3JjXCIpKSxtJiYoZD1pKHUsXCIuay1zcHJpdGVcIikucHJvcChcImNsYXNzTmFtZVwiKSxhW21dPWQmJmUudHJpbShkLnJlcGxhY2UoXCJrLXNwcml0ZVwiLFwiXCIpKSksdC5sZW5ndGgmJihhLml0ZW1zPU8odC5lcSgwKSxuKSksXCJ0cnVlXCI9PXMuYXR0cihcImRhdGEtaGFzQ2hpbGRyZW5cIikmJihhLmhhc0NoaWxkcmVuPSEwKSxwLnB1c2goYSk7cmV0dXJuIHB9dmFyIEgsTixWLFUsVyxqLEcscSwkLFksSyxRLFgsSixaLGV0LHR0PWUuZXh0ZW5kLG50PWUucHJveHksaXQ9ZS5pc1BsYWluT2JqZWN0LHJ0PWUuaXNFbXB0eU9iamVjdCxvdD1lLmlzQXJyYXksYXQ9ZS5ncmVwLHN0PWUuYWpheCxsdD1lLmVhY2gsY3Q9ZS5ub29wLGR0PXdpbmRvdy5rZW5kbyx1dD1kdC5pc0Z1bmN0aW9uLGh0PWR0Lk9ic2VydmFibGUscHQ9ZHQuQ2xhc3MsZnQ9XCJzdHJpbmdcIixndD1cImZ1bmN0aW9uXCIsbXQ9XCJjcmVhdGVcIix2dD1cInJlYWRcIixfdD1cInVwZGF0ZVwiLHl0PVwiZGVzdHJveVwiLHd0PVwiY2hhbmdlXCIsYnQ9XCJzeW5jXCIsa3Q9XCJnZXRcIix4dD1cImVycm9yXCIsQ3Q9XCJyZXF1ZXN0U3RhcnRcIixTdD1cInByb2dyZXNzXCIsVHQ9XCJyZXF1ZXN0RW5kXCIsRHQ9W210LHZ0LF90LHl0XSxBdD1mdW5jdGlvbihlKXtyZXR1cm4gZX0sRXQ9ZHQuZ2V0dGVyLE10PWR0LnN0cmluZ2lmeSxQdD1NYXRoLEl0PVtdLnB1c2gsenQ9W10uam9pbixGdD1bXS5wb3AsUnQ9W10uc3BsaWNlLEJ0PVtdLnNoaWZ0LEx0PVtdLnNsaWNlLE90PVtdLnVuc2hpZnQsSHQ9e30udG9TdHJpbmcsTnQ9ZHQuc3VwcG9ydC5zdGFibGVTb3J0LFZ0PS9eXFwvRGF0ZVxcKCguKj8pXFwpXFwvJC8sVXQ9LyhcXHIrfFxcbispL2csV3Q9Lyg/PVsnXFxcXF0pL2csanQ9aHQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztuLnR5cGU9dHx8cXQsaHQuZm4uaW5pdC5jYWxsKG4pLG4ubGVuZ3RoPWUubGVuZ3RoLG4ud3JhcEFsbChlLG4pfSxhdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpc1tlXX0sdG9KU09OOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMubGVuZ3RoLGk9QXJyYXkobik7XHJcbmZvcihlPTA7bj5lO2UrKyl0PXRoaXNbZV0sdCBpbnN0YW5jZW9mIHF0JiYodD10LnRvSlNPTigpKSxpW2VdPXQ7cmV0dXJuIGl9LHBhcmVudDpjdCx3cmFwQWxsOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMsbz1mdW5jdGlvbigpe3JldHVybiByfTtmb3IodD10fHxbXSxuPTAsaT1lLmxlbmd0aDtpPm47bisrKXRbbl09ci53cmFwKGVbbl0sbyk7cmV0dXJuIHR9LHdyYXA6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXM7cmV0dXJuIG51bGwhPT1lJiZcIltvYmplY3QgT2JqZWN0XVwiPT09SHQuY2FsbChlKSYmKG49ZSBpbnN0YW5jZW9mIGkudHlwZXx8ZSBpbnN0YW5jZW9mIEt0LG58fChlPWUgaW5zdGFuY2VvZiBxdD9lLnRvSlNPTigpOmUsZT1uZXcgaS50eXBlKGUpKSxlLnBhcmVudD10LGUuYmluZCh3dCxmdW5jdGlvbihlKXtpLnRyaWdnZXIod3Qse2ZpZWxkOmUuZmllbGQsbm9kZTplLm5vZGUsaW5kZXg6ZS5pbmRleCxpdGVtczplLml0ZW1zfHxbdGhpc10sYWN0aW9uOmUubm9kZT9lLmFjdGlvbnx8XCJpdGVtY2hhbmdlXCI6XCJpdGVtY2hhbmdlXCJ9KX0pKSxlfSxwdXNoOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLmxlbmd0aCxuPXRoaXMud3JhcEFsbChhcmd1bWVudHMpO3JldHVybiBlPUl0LmFwcGx5KHRoaXMsbiksdGhpcy50cmlnZ2VyKHd0LHthY3Rpb246XCJhZGRcIixpbmRleDp0LGl0ZW1zOm59KSxlfSxzbGljZTpMdCxzb3J0OltdLnNvcnQsam9pbjp6dCxwb3A6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxlbmd0aCx0PUZ0LmFwcGx5KHRoaXMpO3JldHVybiBlJiZ0aGlzLnRyaWdnZXIod3Qse2FjdGlvbjpcInJlbW92ZVwiLGluZGV4OmUtMSxpdGVtczpbdF19KSx0fSxzcGxpY2U6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhPXRoaXMud3JhcEFsbChMdC5jYWxsKGFyZ3VtZW50cywyKSk7aWYoaT1SdC5hcHBseSh0aGlzLFtlLHRdLmNvbmNhdChhKSksaS5sZW5ndGgpZm9yKHRoaXMudHJpZ2dlcih3dCx7YWN0aW9uOlwicmVtb3ZlXCIsaW5kZXg6ZSxpdGVtczppfSkscj0wLG89aS5sZW5ndGg7bz5yO3IrKylpW3JdLmNoaWxkcmVuJiZpW3JdLnVuYmluZCh3dCk7cmV0dXJuIG4mJnRoaXMudHJpZ2dlcih3dCx7YWN0aW9uOlwiYWRkXCIsaW5kZXg6ZSxpdGVtczphfSksaX0sc2hpZnQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxlbmd0aCx0PUJ0LmFwcGx5KHRoaXMpO3JldHVybiBlJiZ0aGlzLnRyaWdnZXIod3Qse2FjdGlvbjpcInJlbW92ZVwiLGluZGV4OjAsaXRlbXM6W3RdfSksdH0sdW5zaGlmdDpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy53cmFwQWxsKGFyZ3VtZW50cyk7cmV0dXJuIGU9T3QuYXBwbHkodGhpcyx0KSx0aGlzLnRyaWdnZXIod3Qse2FjdGlvbjpcImFkZFwiLGluZGV4OjAsaXRlbXM6dH0pLGV9LGluZGV4T2Y6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXM7Zm9yKHQ9MCxuPWkubGVuZ3RoO24+dDt0KyspaWYoaVt0XT09PWUpcmV0dXJuIHQ7cmV0dXJuLTF9LGZvckVhY2g6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj10aGlzLmxlbmd0aDtuPnQ7dCsrKWUodGhpc1t0XSx0LHRoaXMpfSxtYXA6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj1bXSxpPXRoaXMubGVuZ3RoO2k+dDt0Kyspblt0XT1lKHRoaXNbdF0sdCx0aGlzKTtyZXR1cm4gbn0sZmlsdGVyOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTAsaT1bXSxyPXRoaXMubGVuZ3RoO3I+bjtuKyspdD10aGlzW25dLGUodCxuLHRoaXMpJiYoaVtpLmxlbmd0aF09dCk7cmV0dXJuIGl9LGZpbmQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49MCxpPXRoaXMubGVuZ3RoO2k+bjtuKyspaWYodD10aGlzW25dLGUodCxuLHRoaXMpKXJldHVybiB0fSxldmVyeTpmdW5jdGlvbihlKXtmb3IodmFyIHQsbj0wLGk9dGhpcy5sZW5ndGg7aT5uO24rKylpZih0PXRoaXNbbl0sIWUodCxuLHRoaXMpKXJldHVybiExO3JldHVybiEwfSxzb21lOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTAsaT10aGlzLmxlbmd0aDtpPm47bisrKWlmKHQ9dGhpc1tuXSxlKHQsbix0aGlzKSlyZXR1cm4hMDtyZXR1cm4hMX0scmVtb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuaW5kZXhPZihlKTstMSE9PXQmJnRoaXMuc3BsaWNlKHQsMSl9LGVtcHR5OmZ1bmN0aW9uKCl7dGhpcy5zcGxpY2UoMCx0aGlzLmxlbmd0aCl9fSksR3Q9anQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7aHQuZm4uaW5pdC5jYWxsKHRoaXMpLHRoaXMudHlwZT10fHxxdDtmb3IodmFyIG49MDtlLmxlbmd0aD5uO24rKyl0aGlzW25dPWVbbl07dGhpcy5sZW5ndGg9bix0aGlzLl9wYXJlbnQ9bnQoZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sdGhpcyl9LGF0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXNbZV07cmV0dXJuIHQgaW5zdGFuY2VvZiB0aGlzLnR5cGU/dC5wYXJlbnQ9dGhpcy5fcGFyZW50OnQ9dGhpc1tlXT10aGlzLndyYXAodCx0aGlzLl9wYXJlbnQpLHR9fSkscXQ9aHQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLHI9ZnVuY3Rpb24oKXtyZXR1cm4gaX07aHQuZm4uaW5pdC5jYWxsKHRoaXMpO2ZvcihuIGluIGUpdD1lW25dLFwib2JqZWN0XCI9PXR5cGVvZiB0JiZ0JiYhdC5nZXRUaW1lJiZcIl9cIiE9bi5jaGFyQXQoMCkmJih0PWkud3JhcCh0LG4scikpLGlbbl09dDtpLnVpZD1kdC5ndWlkKCl9LHNob3VsZFNlcmlhbGl6ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5oYXNPd25Qcm9wZXJ0eShlKSYmXCJfZXZlbnRzXCIhPT1lJiZ0eXBlb2YgdGhpc1tlXSE9PWd0JiZcInVpZFwiIT09ZX0sZm9yRWFjaDpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gdGhpcyl0aGlzLnNob3VsZFNlcmlhbGl6ZSh0KSYmZSh0aGlzW3RdLHQpfSx0b0pTT046ZnVuY3Rpb24oKXt2YXIgZSx0LG49e307Zm9yKHQgaW4gdGhpcyl0aGlzLnNob3VsZFNlcmlhbGl6ZSh0KSYmKGU9dGhpc1t0XSwoZSBpbnN0YW5jZW9mIHF0fHxlIGluc3RhbmNlb2YganQpJiYoZT1lLnRvSlNPTigpKSxuW3RdPWUpO3JldHVybiBufSxnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzO3JldHVybiBuLnRyaWdnZXIoa3Qse2ZpZWxkOmV9KSx0PVwidGhpc1wiPT09ZT9uOmR0LmdldHRlcihlLCEwKShuKX0sX3NldDpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvPXRoaXMsYT1lLmluZGV4T2YoXCIuXCIpPj0wO2lmKGEpZm9yKG49ZS5zcGxpdChcIi5cIiksaT1cIlwiO24ubGVuZ3RoPjE7KXtpZihpKz1uLnNoaWZ0KCkscj1kdC5nZXR0ZXIoaSwhMCkobyksciBpbnN0YW5jZW9mIHF0KXJldHVybiByLnNldChuLmpvaW4oXCIuXCIpLHQpLGE7aSs9XCIuXCJ9cmV0dXJuIGR0LnNldHRlcihlKShvLHQpLGF9LHNldDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1lLmluZGV4T2YoXCIuXCIpPj0wLHI9ZHQuZ2V0dGVyKGUsITApKG4pO3IhPT10JiYobi50cmlnZ2VyKFwic2V0XCIse2ZpZWxkOmUsdmFsdWU6dH0pfHwoaXx8KHQ9bi53cmFwKHQsZSxmdW5jdGlvbigpe3JldHVybiBufSkpLCghbi5fc2V0KGUsdCl8fGUuaW5kZXhPZihcIihcIik+PTB8fGUuaW5kZXhPZihcIltcIik+PTApJiZuLnRyaWdnZXIod3Qse2ZpZWxkOmV9KSkpfSxwYXJlbnQ6Y3Qsd3JhcDpmdW5jdGlvbihlLHQsaSl7dmFyIHIsbyxhPXRoaXMscz1IdC5jYWxsKGUpO3JldHVybiBudWxsPT1lfHxcIltvYmplY3QgT2JqZWN0XVwiIT09cyYmXCJbb2JqZWN0IEFycmF5XVwiIT09c3x8KHI9ZSBpbnN0YW5jZW9mIGp0LG89ZSBpbnN0YW5jZW9mIEssXCJbb2JqZWN0IE9iamVjdF1cIiE9PXN8fG98fHI/KFwiW29iamVjdCBBcnJheV1cIj09PXN8fHJ8fG8pJiYocnx8b3x8KGU9bmV3IGp0KGUpKSxlLnBhcmVudCgpIT1pKCkmJmUuYmluZCh3dCxuKGEsd3QsdCwhMSkpKTooZSBpbnN0YW5jZW9mIHF0fHwoZT1uZXcgcXQoZSkpLGUucGFyZW50KCkhPWkoKSYmKGUuYmluZChrdCxuKGEsa3QsdCwhMCkpLGUuYmluZCh3dCxuKGEsd3QsdCwhMCkpKSksZS5wYXJlbnQ9aSksZX19KSwkdD17bnVtYmVyOmZ1bmN0aW9uKGUpe3JldHVybiBkdC5wYXJzZUZsb2F0KGUpfSxkYXRlOmZ1bmN0aW9uKGUpe3JldHVybiBkdC5wYXJzZURhdGUoZSl9LFwiYm9vbGVhblwiOmZ1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZT09PWZ0P1widHJ1ZVwiPT09ZS50b0xvd2VyQ2FzZSgpOm51bGwhPWU/ISFlOmV9LHN0cmluZzpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT9lK1wiXCI6ZX0sXCJkZWZhdWx0XCI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9fSxZdD17c3RyaW5nOlwiXCIsbnVtYmVyOjAsZGF0ZTpuZXcgRGF0ZSxcImJvb2xlYW5cIjohMSxcImRlZmF1bHRcIjpcIlwifSxLdD1xdC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24obil7dmFyIGkscixvPXRoaXM7aWYoKCFufHxlLmlzRW1wdHlPYmplY3QobikpJiYobj1lLmV4dGVuZCh7fSxvLmRlZmF1bHRzLG4pLG8uX2luaXRpYWxpemVycykpZm9yKGk9MDtvLl9pbml0aWFsaXplcnMubGVuZ3RoPmk7aSsrKXI9by5faW5pdGlhbGl6ZXJzW2ldLG5bcl09by5kZWZhdWx0c1tyXSgpO3F0LmZuLmluaXQuY2FsbChvLG4pLG8uZGlydHk9ITEsby5pZEZpZWxkJiYoby5pZD1vLmdldChvLmlkRmllbGQpLG8uaWQ9PT10JiYoby5pZD1vLl9kZWZhdWx0SWQpKX0sc2hvdWxkU2VyaWFsaXplOmZ1bmN0aW9uKGUpe3JldHVybiBxdC5mbi5zaG91bGRTZXJpYWxpemUuY2FsbCh0aGlzLGUpJiZcInVpZFwiIT09ZSYmIShcImlkXCIhPT10aGlzLmlkRmllbGQmJlwiaWRcIj09PWUpJiZcImRpcnR5XCIhPT1lJiZcIl9hY2Nlc3NvcnNcIiE9PWV9LF9wYXJzZTpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcyxvPWUsYT1pLmZpZWxkc3x8e307cmV0dXJuIGU9YVtlXSxlfHwoZT1yKGEsbykpLGUmJihuPWUucGFyc2UsIW4mJmUudHlwZSYmKG49JHRbZS50eXBlLnRvTG93ZXJDYXNlKCldKSksbj9uKHQpOnR9LF9ub3RpZnlDaGFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5hY3Rpb247KFwiYWRkXCI9PXR8fFwicmVtb3ZlXCI9PXQpJiYodGhpcy5kaXJ0eT0hMCl9LGVkaXRhYmxlOmZ1bmN0aW9uKGUpe3JldHVybiBlPSh0aGlzLmZpZWxkc3x8e30pW2VdLGU/ZS5lZGl0YWJsZSE9PSExOiEwfSxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRoaXM7ci5lZGl0YWJsZShlKSYmKHQ9ci5fcGFyc2UoZSx0KSxpKHQsci5nZXQoZSkpfHwoci5kaXJ0eT0hMCxxdC5mbi5zZXQuY2FsbChyLGUsdCxuKSkpfSxhY2NlcHQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMscj1mdW5jdGlvbigpe3JldHVybiBpfTtmb3IodCBpbiBlKW49ZVt0XSxcIl9cIiE9dC5jaGFyQXQoMCkmJihuPWkud3JhcChlW3RdLHQscikpLGkuX3NldCh0LG4pO2kuaWRGaWVsZCYmKGkuaWQ9aS5nZXQoaS5pZEZpZWxkKSksaS5kaXJ0eT0hMX0saXNOZXc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pZD09PXRoaXMuX2RlZmF1bHRJZH19KTtLdC5kZWZpbmU9ZnVuY3Rpb24oZSxuKXtuPT09dCYmKG49ZSxlPUt0KTt2YXIgaSxyLG8sYSxzLGwsYyxkLHU9dHQoe2RlZmF1bHRzOnt9fSxuKSxoPXt9LHA9dS5pZCxmPVtdO2lmKHAmJih1LmlkRmllbGQ9cCksdS5pZCYmZGVsZXRlIHUuaWQscCYmKHUuZGVmYXVsdHNbcF09dS5fZGVmYXVsdElkPVwiXCIpLFwiW29iamVjdCBBcnJheV1cIj09PUh0LmNhbGwodS5maWVsZHMpKXtmb3IobD0wLGM9dS5maWVsZHMubGVuZ3RoO2M+bDtsKyspbz11LmZpZWxkc1tsXSx0eXBlb2Ygbz09PWZ0P2hbb109e306by5maWVsZCYmKGhbby5maWVsZF09byk7dS5maWVsZHM9aH1mb3IociBpbiB1LmZpZWxkcylvPXUuZmllbGRzW3JdLGE9by50eXBlfHxcImRlZmF1bHRcIixzPW51bGwsZD1yLHI9dHlwZW9mIG8uZmllbGQ9PT1mdD9vLmZpZWxkOnIsby5udWxsYWJsZXx8KHM9dS5kZWZhdWx0c1tkIT09cj9kOnJdPW8uZGVmYXVsdFZhbHVlIT09dD9vLmRlZmF1bHRWYWx1ZTpZdFthLnRvTG93ZXJDYXNlKCldLFwiZnVuY3Rpb25cIj09dHlwZW9mIHMmJmYucHVzaChyKSksbi5pZD09PXImJih1Ll9kZWZhdWx0SWQ9cyksdS5kZWZhdWx0c1tkIT09cj9kOnJdPXMsby5wYXJzZT1vLnBhcnNlfHwkdFthXTtyZXR1cm4gZi5sZW5ndGg+MCYmKHUuX2luaXRpYWxpemVycz1mKSxpPWUuZXh0ZW5kKHUpLGkuZGVmaW5lPWZ1bmN0aW9uKGUpe3JldHVybiBLdC5kZWZpbmUoaSxlKX0sdS5maWVsZHMmJihpLmZpZWxkcz11LmZpZWxkcyxpLmlkRmllbGQ9dS5pZEZpZWxkKSxpfSxOPXtzZWxlY3RvcjpmdW5jdGlvbihlKXtyZXR1cm4gdXQoZSk/ZTpFdChlKX0sY29tcGFyZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnNlbGVjdG9yKGUpO3JldHVybiBmdW5jdGlvbihlLG4pe3JldHVybiBlPXQoZSksbj10KG4pLG51bGw9PWUmJm51bGw9PW4/MDpudWxsPT1lPy0xOm51bGw9PW4/MTplLmxvY2FsZUNvbXBhcmU/ZS5sb2NhbGVDb21wYXJlKG4pOmU+bj8xOm4+ZT8tMTowfX0sY3JlYXRlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29tcGFyZXx8dGhpcy5jb21wYXJlKGUuZmllbGQpO3JldHVyblwiZGVzY1wiPT1lLmRpcj9mdW5jdGlvbihlLG4pe3JldHVybiB0KG4sZSwhMCl9OnR9LGNvbWJpbmU6ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbil7dmFyIGkscixvPWVbMF0odCxuKTtmb3IoaT0xLHI9ZS5sZW5ndGg7cj5pO2krKylvPW98fGVbaV0odCxuKTtyZXR1cm4gb319fSxWPXR0KHt9LE4se2FzYzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnNlbGVjdG9yKGUpO3JldHVybiBmdW5jdGlvbihlLG4pe3ZhciBpPXQoZSkscj10KG4pO3JldHVybiBpJiZpLmdldFRpbWUmJnImJnIuZ2V0VGltZSYmKGk9aS5nZXRUaW1lKCkscj1yLmdldFRpbWUoKSksaT09PXI/ZS5fX3Bvc2l0aW9uLW4uX19wb3NpdGlvbjpudWxsPT1pPy0xOm51bGw9PXI/MTppLmxvY2FsZUNvbXBhcmU/aS5sb2NhbGVDb21wYXJlKHIpOmk+cj8xOi0xfX0sZGVzYzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnNlbGVjdG9yKGUpO3JldHVybiBmdW5jdGlvbihlLG4pe3ZhciBpPXQoZSkscj10KG4pO3JldHVybiBpJiZpLmdldFRpbWUmJnImJnIuZ2V0VGltZSYmKGk9aS5nZXRUaW1lKCkscj1yLmdldFRpbWUoKSksaT09PXI/ZS5fX3Bvc2l0aW9uLW4uX19wb3NpdGlvbjpudWxsPT1pPzE6bnVsbD09cj8tMTpyLmxvY2FsZUNvbXBhcmU/ci5sb2NhbGVDb21wYXJlKGkpOnI+aT8xOi0xfX0sY3JlYXRlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzW2UuZGlyXShlLmZpZWxkKX19KSxIPWZ1bmN0aW9uKGUsdCl7dmFyIG4saT1lLmxlbmd0aCxyPUFycmF5KGkpO2ZvcihuPTA7aT5uO24rKylyW25dPXQoZVtuXSxuLGUpO3JldHVybiByfSxVPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gZS5yZXBsYWNlKFd0LFwiXFxcXFwiKS5yZXBsYWNlKFV0LFwiXCIpfWZ1bmN0aW9uIHQodCxuLGkscil7dmFyIG87cmV0dXJuIG51bGwhPWkmJih0eXBlb2YgaT09PWZ0JiYoaT1lKGkpLG89VnQuZXhlYyhpKSxvP2k9bmV3IERhdGUoK29bMV0pOnI/KGk9XCInXCIraS50b0xvd2VyQ2FzZSgpK1wiJ1wiLG49XCIoXCIrbitcIiB8fCAnJykudG9Mb3dlckNhc2UoKVwiKTppPVwiJ1wiK2krXCInXCIpLGkuZ2V0VGltZSYmKG49XCIoXCIrbitcIj9cIituK1wiLmdldFRpbWUoKTpcIituK1wiKVwiLGk9aS5nZXRUaW1lKCkpKSxuK1wiIFwiK3QrXCIgXCIraX1yZXR1cm57ZXE6ZnVuY3Rpb24oZSxuLGkpe3JldHVybiB0KFwiPT1cIixlLG4saSl9LG5lcTpmdW5jdGlvbihlLG4saSl7cmV0dXJuIHQoXCIhPVwiLGUsbixpKX0sZ3Q6ZnVuY3Rpb24oZSxuLGkpe3JldHVybiB0KFwiPlwiLGUsbixpKX0sZ3RlOmZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gdChcIj49XCIsZSxuLGkpfSxsdDpmdW5jdGlvbihlLG4saSl7cmV0dXJuIHQoXCI8XCIsZSxuLGkpfSxsdGU6ZnVuY3Rpb24oZSxuLGkpe3JldHVybiB0KFwiPD1cIixlLG4saSl9LHN0YXJ0c3dpdGg6ZnVuY3Rpb24odCxuLGkpe3JldHVybiBpJiYodD1cIihcIit0K1wiIHx8ICcnKS50b0xvd2VyQ2FzZSgpXCIsbiYmKG49bi50b0xvd2VyQ2FzZSgpKSksbiYmKG49ZShuKSksdCtcIi5sYXN0SW5kZXhPZignXCIrbitcIicsIDApID09IDBcIn0sZW5kc3dpdGg6ZnVuY3Rpb24odCxuLGkpe3JldHVybiBpJiYodD1cIihcIit0K1wiIHx8ICcnKS50b0xvd2VyQ2FzZSgpXCIsbiYmKG49bi50b0xvd2VyQ2FzZSgpKSksbiYmKG49ZShuKSksdCtcIi5pbmRleE9mKCdcIituK1wiJywgXCIrdCtcIi5sZW5ndGggLSBcIisobnx8XCJcIikubGVuZ3RoK1wiKSA+PSAwXCJ9LGNvbnRhaW5zOmZ1bmN0aW9uKHQsbixpKXtyZXR1cm4gaSYmKHQ9XCIoXCIrdCtcIiB8fCAnJykudG9Mb3dlckNhc2UoKVwiLG4mJihuPW4udG9Mb3dlckNhc2UoKSkpLG4mJihuPWUobikpLHQrXCIuaW5kZXhPZignXCIrbitcIicpID49IDBcIn0sZG9lc25vdGNvbnRhaW46ZnVuY3Rpb24odCxuLGkpe3JldHVybiBpJiYodD1cIihcIit0K1wiIHx8ICcnKS50b0xvd2VyQ2FzZSgpXCIsbiYmKG49bi50b0xvd2VyQ2FzZSgpKSksbiYmKG49ZShuKSksdCtcIi5pbmRleE9mKCdcIituK1wiJykgPT0gLTFcIn19fSgpLG8uZmlsdGVyRXhwcj1mdW5jdGlvbihlKXt2YXIgbixpLHIsYSxzLGwsYz1bXSxkPXthbmQ6XCIgJiYgXCIsb3I6XCIgfHwgXCJ9LHU9W10saD1bXSxwPWUuZmlsdGVycztmb3Iobj0wLGk9cC5sZW5ndGg7aT5uO24rKylyPXBbbl0scz1yLmZpZWxkLGw9ci5vcGVyYXRvcixyLmZpbHRlcnM/KGE9by5maWx0ZXJFeHByKHIpLHI9YS5leHByZXNzaW9uLnJlcGxhY2UoL19fb1xcWyhcXGQrKVxcXS9nLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ9K3QsXCJfX29bXCIrKGgubGVuZ3RoK3QpK1wiXVwifSkucmVwbGFjZSgvX19mXFxbKFxcZCspXFxdL2csZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD0rdCxcIl9fZltcIisodS5sZW5ndGgrdCkrXCJdXCJ9KSxoLnB1c2guYXBwbHkoaCxhLm9wZXJhdG9ycyksdS5wdXNoLmFwcGx5KHUsYS5maWVsZHMpKToodHlwZW9mIHM9PT1ndD8oYT1cIl9fZltcIit1Lmxlbmd0aCtcIl0oZClcIix1LnB1c2gocykpOmE9ZHQuZXhwcihzKSx0eXBlb2YgbD09PWd0PyhyPVwiX19vW1wiK2gubGVuZ3RoK1wiXShcIithK1wiLCBcIityLnZhbHVlK1wiKVwiLGgucHVzaChsKSk6cj1VWyhsfHxcImVxXCIpLnRvTG93ZXJDYXNlKCldKGEsci52YWx1ZSxyLmlnbm9yZUNhc2UhPT10P3IuaWdub3JlQ2FzZTohMCkpLGMucHVzaChyKTtyZXR1cm57ZXhwcmVzc2lvbjpcIihcIitjLmpvaW4oZFtlLmxvZ2ljXSkrXCIpXCIsZmllbGRzOnUsb3BlcmF0b3JzOmh9fSxXPXtcIj09XCI6XCJlcVwiLGVxdWFsczpcImVxXCIsaXNlcXVhbHRvOlwiZXFcIixlcXVhbHRvOlwiZXFcIixlcXVhbDpcImVxXCIsXCIhPVwiOlwibmVxXCIsbmU6XCJuZXFcIixub3RlcXVhbHM6XCJuZXFcIixpc25vdGVxdWFsdG86XCJuZXFcIixub3RlcXVhbHRvOlwibmVxXCIsbm90ZXF1YWw6XCJuZXFcIixcIjxcIjpcImx0XCIsaXNsZXNzdGhhbjpcImx0XCIsbGVzc3RoYW46XCJsdFwiLGxlc3M6XCJsdFwiLFwiPD1cIjpcImx0ZVwiLGxlOlwibHRlXCIsaXNsZXNzdGhhbm9yZXF1YWx0bzpcImx0ZVwiLGxlc3N0aGFuZXF1YWw6XCJsdGVcIixcIj5cIjpcImd0XCIsaXNncmVhdGVydGhhbjpcImd0XCIsZ3JlYXRlcnRoYW46XCJndFwiLGdyZWF0ZXI6XCJndFwiLFwiPj1cIjpcImd0ZVwiLGlzZ3JlYXRlcnRoYW5vcmVxdWFsdG86XCJndGVcIixncmVhdGVydGhhbmVxdWFsOlwiZ3RlXCIsZ2U6XCJndGVcIixub3RzdWJzdHJpbmdvZjpcImRvZXNub3Rjb250YWluXCJ9LG8ubm9ybWFsaXplRmlsdGVyPWwsby5wcm90b3R5cGU9e3RvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhfSxyYW5nZTpmdW5jdGlvbihlLHQpe3JldHVybiBuZXcgbyh0aGlzLmRhdGEuc2xpY2UoZSxlK3QpKX0sc2tpcDpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IG8odGhpcy5kYXRhLnNsaWNlKGUpKX0sdGFrZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IG8odGhpcy5kYXRhLnNsaWNlKDAsZSkpfSxzZWxlY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBvKEgodGhpcy5kYXRhLGUpKX0sb3JkZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj17ZGlyOnR9O3JldHVybiBlJiYoZS5jb21wYXJlP24uY29tcGFyZT1lLmNvbXBhcmU6bi5maWVsZD1lKSxuZXcgbyh0aGlzLmRhdGEuc2xpY2UoMCkuc29ydChOLmNyZWF0ZShuKSkpfSxvcmRlckJ5OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9yZGVyKGUsXCJhc2NcIil9LG9yZGVyQnlEZXNjZW5kaW5nOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9yZGVyKGUsXCJkZXNjXCIpfSxzb3J0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG89YShlLHQpLHM9W107aWYobj1ufHxOLG8ubGVuZ3RoKXtmb3IoaT0wLHI9by5sZW5ndGg7cj5pO2krKylzLnB1c2gobi5jcmVhdGUob1tpXSkpO3JldHVybiB0aGlzLm9yZGVyQnkoe2NvbXBhcmU6bi5jb21iaW5lKHMpfSl9cmV0dXJuIHRoaXN9LGZpbHRlcjpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixhLHMsYyxkLHU9dGhpcy5kYXRhLGg9W107aWYoZT1sKGUpLCFlfHwwPT09ZS5maWx0ZXJzLmxlbmd0aClyZXR1cm4gdGhpcztmb3Iocj1vLmZpbHRlckV4cHIoZSkscz1yLmZpZWxkcyxjPXIub3BlcmF0b3JzLGE9ZD1GdW5jdGlvbihcImQsIF9fZiwgX19vXCIsXCJyZXR1cm4gXCIrci5leHByZXNzaW9uKSwocy5sZW5ndGh8fGMubGVuZ3RoKSYmKGQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGEoZSxzLGMpfSksdD0wLGk9dS5sZW5ndGg7aT50O3QrKyluPXVbdF0sZChuKSYmaC5wdXNoKG4pO3JldHVybiBuZXcgbyhoKX0sZ3JvdXA6ZnVuY3Rpb24oZSx0KXtlPWQoZXx8W10pLHQ9dHx8dGhpcy5kYXRhO3ZhciBuLGk9dGhpcyxyPW5ldyBvKGkuZGF0YSk7cmV0dXJuIGUubGVuZ3RoPjAmJihuPWVbMF0scj1yLmdyb3VwQnkobikuc2VsZWN0KGZ1bmN0aW9uKGkpe3ZhciByPW5ldyBvKHQpLmZpbHRlcihbe2ZpZWxkOmkuZmllbGQsb3BlcmF0b3I6XCJlcVwiLHZhbHVlOmkudmFsdWUsaWdub3JlQ2FzZTohMX1dKTtyZXR1cm57ZmllbGQ6aS5maWVsZCx2YWx1ZTppLnZhbHVlLGl0ZW1zOmUubGVuZ3RoPjE/bmV3IG8oaS5pdGVtcykuZ3JvdXAoZS5zbGljZSgxKSxyLnRvQXJyYXkoKSkudG9BcnJheSgpOmkuaXRlbXMsaGFzU3ViZ3JvdXBzOmUubGVuZ3RoPjEsYWdncmVnYXRlczpyLmFnZ3JlZ2F0ZShuLmFnZ3JlZ2F0ZXMpfX0pKSxyfSxncm91cEJ5OmZ1bmN0aW9uKGUpe2lmKHJ0KGUpfHwhdGhpcy5kYXRhLmxlbmd0aClyZXR1cm4gbmV3IG8oW10pO3ZhciB0LG4saSxyLGE9ZS5maWVsZCxzPXRoaXMuX3NvcnRGb3JHcm91cGluZyhhLGUuZGlyfHxcImFzY1wiKSxsPWR0LmFjY2Vzc29yKGEpLGM9bC5nZXQoc1swXSxhKSxkPXtmaWVsZDphLHZhbHVlOmMsaXRlbXM6W119LGg9W2RdO2ZvcihpPTAscj1zLmxlbmd0aDtyPmk7aSsrKXQ9c1tpXSxuPWwuZ2V0KHQsYSksdShjLG4pfHwoYz1uLGQ9e2ZpZWxkOmEsdmFsdWU6YyxpdGVtczpbXX0saC5wdXNoKGQpKSxkLml0ZW1zLnB1c2godCk7cmV0dXJuIG5ldyBvKGgpfSxfc29ydEZvckdyb3VwaW5nOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMuZGF0YTtpZighTnQpe2ZvcihuPTAsaT1yLmxlbmd0aDtpPm47bisrKXJbbl0uX19wb3NpdGlvbj1uO2ZvcihyPW5ldyBvKHIpLnNvcnQoZSx0LFYpLnRvQXJyYXkoKSxuPTAsaT1yLmxlbmd0aDtpPm47bisrKWRlbGV0ZSByW25dLl9fcG9zaXRpb247cmV0dXJuIHJ9cmV0dXJuIHRoaXMuc29ydChlLHQpLnRvQXJyYXkoKX0sYWdncmVnYXRlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT17fSxyPXt9O2lmKGUmJmUubGVuZ3RoKWZvcih0PTAsbj10aGlzLmRhdGEubGVuZ3RoO24+dDt0KyspaChpLGUsdGhpcy5kYXRhW3RdLHQsbixyKTtyZXR1cm4gaX19LGo9e3N1bTpmdW5jdGlvbihlLHQsbil7dmFyIGk9bi5nZXQodCk7cmV0dXJuIHAoZSk/cChpKSYmKGUrPWkpOmU9aSxlfSxjb3VudDpmdW5jdGlvbihlKXtyZXR1cm4oZXx8MCkrMX0sYXZlcmFnZTpmdW5jdGlvbihlLG4saSxyLG8sYSl7dmFyIHM9aS5nZXQobik7cmV0dXJuIGEuY291bnQ9PT10JiYoYS5jb3VudD0wKSxwKGUpP3AocykmJihlKz1zKTplPXMscChzKSYmYS5jb3VudCsrLHI9PW8tMSYmcChlKSYmKGUvPWEuY291bnQpLGV9LG1heDpmdW5jdGlvbihlLHQsbil7dmFyIGk9bi5nZXQodCk7cmV0dXJuIHAoZSl8fGYoZSl8fChlPWkpLGk+ZSYmKHAoaSl8fGYoaSkpJiYoZT1pKSxlfSxtaW46ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPW4uZ2V0KHQpO3JldHVybiBwKGUpfHxmKGUpfHwoZT1pKSxlPmkmJihwKGkpfHxmKGkpKSYmKGU9aSksZX19LG8ucHJvY2Vzcz1mdW5jdGlvbihlLG4pe249bnx8e307dmFyIGkscj1uZXcgbyhlKSxzPW4uZ3JvdXAsbD1kKHN8fFtdKS5jb25jYXQoYShuLnNvcnR8fFtdKSksYz1uLmZpbHRlckNhbGxiYWNrLHU9bi5maWx0ZXIsaD1uLnNraXAscD1uLnRha2U7cmV0dXJuIHUmJihyPXIuZmlsdGVyKHUpLGMmJihyPWMocikpLGk9ci50b0FycmF5KCkubGVuZ3RoKSxsJiYocj1yLnNvcnQobCkscyYmKGU9ci50b0FycmF5KCkpKSxoIT09dCYmcCE9PXQmJihyPXIucmFuZ2UoaCxwKSkscyYmKHI9ci5ncm91cChzLGUpKSx7dG90YWw6aSxkYXRhOnIudG9BcnJheSgpfX0sRz1wdC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5kYXRhPWUuZGF0YX0scmVhZDpmdW5jdGlvbihlKXtlLnN1Y2Nlc3ModGhpcy5kYXRhKX0sdXBkYXRlOmZ1bmN0aW9uKGUpe2Uuc3VjY2VzcyhlLmRhdGEpfSxjcmVhdGU6ZnVuY3Rpb24oZSl7ZS5zdWNjZXNzKGUuZGF0YSl9LGRlc3Ryb3k6ZnVuY3Rpb24oZSl7ZS5zdWNjZXNzKGUuZGF0YSl9fSkscT1wdC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzO2U9bi5vcHRpb25zPXR0KHt9LG4ub3B0aW9ucyxlKSxsdChEdCxmdW5jdGlvbih0LG4pe3R5cGVvZiBlW25dPT09ZnQmJihlW25dPXt1cmw6ZVtuXX0pfSksbi5jYWNoZT1lLmNhY2hlPyQuY3JlYXRlKGUuY2FjaGUpOntmaW5kOmN0LGFkZDpjdH0sdD1lLnBhcmFtZXRlck1hcCx1dChlLnB1c2gpJiYobi5wdXNoPWUucHVzaCksbi5wdXNofHwobi5wdXNoPUF0KSxuLnBhcmFtZXRlck1hcD11dCh0KT90OmZ1bmN0aW9uKGUpe3ZhciBuPXt9O3JldHVybiBsdChlLGZ1bmN0aW9uKGUsaSl7ZSBpbiB0JiYoZT10W2VdLGl0KGUpJiYoaT1lLnZhbHVlKGkpLGU9ZS5rZXkpKSxuW2VdPWl9KSxufX0sb3B0aW9uczp7cGFyYW1ldGVyTWFwOkF0fSxjcmVhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHN0KHRoaXMuc2V0dXAoZSxtdCkpfSxyZWFkOmZ1bmN0aW9uKG4pe3ZhciBpLHIsbyxhPXRoaXMscz1hLmNhY2hlO249YS5zZXR1cChuLHZ0KSxpPW4uc3VjY2Vzc3x8Y3Qscj1uLmVycm9yfHxjdCxvPXMuZmluZChuLmRhdGEpLG8hPT10P2kobyk6KG4uc3VjY2Vzcz1mdW5jdGlvbihlKXtzLmFkZChuLmRhdGEsZSksaShlKX0sZS5hamF4KG4pKX0sdXBkYXRlOmZ1bmN0aW9uKGUpe3JldHVybiBzdCh0aGlzLnNldHVwKGUsX3QpKX0sZGVzdHJveTpmdW5jdGlvbihlKXtyZXR1cm4gc3QodGhpcy5zZXR1cChlLHl0KSl9LHNldHVwOmZ1bmN0aW9uKGUsdCl7ZT1lfHx7fTt2YXIgbixpPXRoaXMscj1pLm9wdGlvbnNbdF0sbz11dChyLmRhdGEpP3IuZGF0YShlLmRhdGEpOnIuZGF0YTtyZXR1cm4gZT10dCghMCx7fSxyLGUpLG49dHQoITAse30sbyxlLmRhdGEpLGUuZGF0YT1pLnBhcmFtZXRlck1hcChuLHQpLHV0KGUudXJsKSYmKGUudXJsPWUudXJsKG4pKSxlfX0pLCQ9cHQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7dGhpcy5fc3RvcmU9e319LGFkZDpmdW5jdGlvbihlLG4pe2UhPT10JiYodGhpcy5fc3RvcmVbTXQoZSldPW4pfSxmaW5kOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zdG9yZVtNdChlKV19LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5fc3RvcmU9e319LHJlbW92ZTpmdW5jdGlvbihlKXtkZWxldGUgdGhpcy5fc3RvcmVbTXQoZSldfX0pLCQuY3JlYXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXtpbm1lbW9yeTpmdW5jdGlvbigpe3JldHVybiBuZXcgJH19O3JldHVybiBpdChlKSYmdXQoZS5maW5kKT9lOmU9PT0hMD9uZXcgJDp0W2VdKCl9LFk9cHQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYSxzLGwsYyxkLHUsaCxwLGY9dGhpcztlPWV8fHt9O2Zvcih0IGluIGUpbj1lW3RdLGZbdF09dHlwZW9mIG49PT1mdD9FdChuKTpuO3I9ZS5tb2RlbEJhc2V8fEt0LGl0KGYubW9kZWwpJiYoZi5tb2RlbD1pPXIuZGVmaW5lKGYubW9kZWwpKSxvPW50KGYuZGF0YSxmKSxmLl9kYXRhQWNjZXNzRnVuY3Rpb249byxmLm1vZGVsJiYoYT1udChmLmdyb3VwcyxmKSxzPW50KGYuc2VyaWFsaXplLGYpLGw9e30sYz17fSxkPXt9LHU9e30saD0hMSxpPWYubW9kZWwsaS5maWVsZHMmJihsdChpLmZpZWxkcyxmdW5jdGlvbihlLHQpe3ZhciBuO3A9ZSxpdCh0KSYmdC5maWVsZD9wPXQuZmllbGQ6dHlwZW9mIHQ9PT1mdCYmKHA9dCksaXQodCkmJnQuZnJvbSYmKG49dC5mcm9tKSxoPWh8fG4mJm4hPT1lfHxwIT09ZSxjW2VdPUV0KG58fHApLGRbZV09RXQoZSksbFtufHxwXT1lLHVbZV09bnx8cH0pLCFlLnNlcmlhbGl6ZSYmaCYmKGYuc2VyaWFsaXplPXkocyxpLG0sZCxsLHUpKSksZi5fZGF0YUFjY2Vzc0Z1bmN0aW9uPW8sZi5kYXRhPXkobyxpLHYsYyxsLHUpLGYuZ3JvdXBzPXkoYSxpLF8sYyxsLHUpKX0sZXJyb3JzOmZ1bmN0aW9uKGUpe3JldHVybiBlP2UuZXJyb3JzOm51bGx9LHBhcnNlOkF0LGRhdGE6QXQsdG90YWw6ZnVuY3Rpb24oZSl7cmV0dXJuIGUubGVuZ3RofSxncm91cHM6QXQsYWdncmVnYXRlczpmdW5jdGlvbigpe3JldHVybnt9fSxzZXJpYWxpemU6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9fSksSz1odC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIG4saSxyLG89dGhpcztlJiYoaT1lLmRhdGEpLGU9by5vcHRpb25zPXR0KHt9LG8ub3B0aW9ucyxlKSxvLl9tYXA9e30sby5fcHJlZmV0Y2g9e30sby5fZGF0YT1bXSxvLl9wcmlzdGluZURhdGE9W10sby5fcmFuZ2VzPVtdLG8uX3ZpZXc9W10sby5fcHJpc3RpbmVUb3RhbD0wLG8uX2Rlc3Ryb3llZD1bXSxvLl9wYWdlU2l6ZT1lLnBhZ2VTaXplLG8uX3BhZ2U9ZS5wYWdlfHwoZS5wYWdlU2l6ZT8xOnQpLG8uX3NvcnQ9YShlLnNvcnQpLG8uX2ZpbHRlcj1sKGUuZmlsdGVyKSxvLl9ncm91cD1kKGUuZ3JvdXApLG8uX2FnZ3JlZ2F0ZT1lLmFnZ3JlZ2F0ZSxvLl90b3RhbD1lLnRvdGFsLG8uX3Nob3VsZERldGFjaE9ic2VydmFibGVQYXJlbnRzPSEwLGh0LmZuLmluaXQuY2FsbChvKSxvLnRyYW5zcG9ydD1RLmNyZWF0ZShlLGkpLHV0KG8udHJhbnNwb3J0LnB1c2gpJiZvLnRyYW5zcG9ydC5wdXNoKHtwdXNoQ3JlYXRlOm50KG8uX3B1c2hDcmVhdGUsbykscHVzaFVwZGF0ZTpudChvLl9wdXNoVXBkYXRlLG8pLHB1c2hEZXN0cm95Om50KG8uX3B1c2hEZXN0cm95LG8pfSksbnVsbCE9ZS5vZmZsaW5lU3RvcmFnZSYmKFwic3RyaW5nXCI9PXR5cGVvZiBlLm9mZmxpbmVTdG9yYWdlPyhyPWUub2ZmbGluZVN0b3JhZ2Usby5fc3RvcmFnZT17Z2V0SXRlbTpmdW5jdGlvbigpe3JldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHIpKX0sc2V0SXRlbTpmdW5jdGlvbihlKXtsb2NhbFN0b3JhZ2Uuc2V0SXRlbShyLE10KGUpKX19KTpvLl9zdG9yYWdlPWUub2ZmbGluZVN0b3JhZ2UpLG8ucmVhZGVyPW5ldyBkdC5kYXRhLnJlYWRlcnNbZS5zY2hlbWEudHlwZXx8XCJqc29uXCJdKGUuc2NoZW1hKSxuPW8ucmVhZGVyLm1vZGVsfHx7fSxvLl9kZXRhY2hPYnNlcnZhYmxlUGFyZW50cygpLG8uX2RhdGE9by5fb2JzZXJ2ZShvLl9kYXRhKSxvLl9vbmxpbmU9ITAsby5iaW5kKFtcInB1c2hcIix4dCx3dCxDdCxidCxUdCxTdF0sZSl9LG9wdGlvbnM6e2RhdGE6bnVsbCxzY2hlbWE6e21vZGVsQmFzZTpLdH0sb2ZmbGluZVN0b3JhZ2U6bnVsbCxzZXJ2ZXJTb3J0aW5nOiExLHNlcnZlclBhZ2luZzohMSxzZXJ2ZXJGaWx0ZXJpbmc6ITEsc2VydmVyR3JvdXBpbmc6ITEsc2VydmVyQWdncmVnYXRlczohMSxiYXRjaDohMX0sb25saW5lOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD90aGlzLl9vbmxpbmU6KHRoaXMuX29ubGluZSE9ZSYmKHRoaXMuX29ubGluZT1lLGUmJnRoaXMuc3luYygpKSx0KX0sb2ZmbGluZURhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PXRoaXMub3B0aW9ucy5vZmZsaW5lU3RvcmFnZT9udWxsOmUhPT10P3RoaXMuX3N0b3JhZ2Uuc2V0SXRlbShlKTp0aGlzLl9zdG9yYWdlLmdldEl0ZW0oKXx8e319LF9pc1NlcnZlckdyb3VwZWQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdyb3VwKCl8fFtdO3JldHVybiB0aGlzLm9wdGlvbnMuc2VydmVyR3JvdXBpbmcmJmUubGVuZ3RofSxfcHVzaENyZWF0ZTpmdW5jdGlvbihlKXt0aGlzLl9wdXNoKGUsXCJwdXNoQ3JlYXRlXCIpfSxfcHVzaFVwZGF0ZTpmdW5jdGlvbihlKXt0aGlzLl9wdXNoKGUsXCJwdXNoVXBkYXRlXCIpfSxfcHVzaERlc3Ryb3k6ZnVuY3Rpb24oZSl7dGhpcy5fcHVzaChlLFwicHVzaERlc3Ryb3lcIil9LF9wdXNoOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fcmVhZERhdGEoZSk7bnx8KG49ZSksdGhpc1t0XShuKX0sX2ZsYXREYXRhOmZ1bmN0aW9uKGUsdCl7aWYoZSl7aWYodGhpcy5faXNTZXJ2ZXJHcm91cGVkKCkpcmV0dXJuIGIoZSk7aWYoIXQpZm9yKHZhciBuPTA7ZS5sZW5ndGg+bjtuKyspZS5hdChuKX1yZXR1cm4gZX0scGFyZW50OmN0LGdldDpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcy5fZmxhdERhdGEodGhpcy5fZGF0YSk7Zm9yKHQ9MCxuPWkubGVuZ3RoO24+dDt0KyspaWYoaVt0XS5pZD09ZSlyZXR1cm4gaVt0XX0sZ2V0QnlVaWQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMuX2ZsYXREYXRhKHRoaXMuX2RhdGEpO2lmKGkpZm9yKHQ9MCxuPWkubGVuZ3RoO24+dDt0KyspaWYoaVt0XS51aWQ9PWUpcmV0dXJuIGlbdF19LGluZGV4T2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcy5fZGF0YSxlKX0sYXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2RhdGEuYXQoZSl9LGRhdGE6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzO2lmKGU9PT10KXtpZihpLl9kYXRhKWZvcihuPTA7aS5fZGF0YS5sZW5ndGg+bjtuKyspaS5fZGF0YS5hdChuKTtyZXR1cm4gaS5fZGF0YX1pLl9kZXRhY2hPYnNlcnZhYmxlUGFyZW50cygpLGkuX2RhdGE9dGhpcy5fb2JzZXJ2ZShlKSxpLl9wcmlzdGluZURhdGE9ZS5zbGljZSgwKSxpLl9zdG9yZURhdGEoKSxpLl9yYW5nZXM9W10saS50cmlnZ2VyKFwicmVzZXRcIiksaS5fYWRkUmFuZ2UoaS5fZGF0YSksaS5fdG90YWw9aS5fZGF0YS5sZW5ndGgsaS5fcHJpc3RpbmVUb3RhbD1pLl90b3RhbCxpLl9wcm9jZXNzKGkuX2RhdGEpfSx2aWV3OmZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD90aGlzLl92aWV3Oih0aGlzLl92aWV3PXRoaXMuX29ic2VydmVWaWV3KGUpLHQpfSxfb2JzZXJ2ZVZpZXc6ZnVuY3Rpb24oZSl7cmV0dXJuIFQoZSx0aGlzLl9kYXRhLHRoaXMuX3Jhbmdlcyx0aGlzLnJlYWRlci5tb2RlbHx8cXQpLG5ldyBHdChlLHRoaXMucmVhZGVyLm1vZGVsKX0sZmxhdFZpZXc6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdyb3VwKCl8fFtdO3JldHVybiBlLmxlbmd0aD9iKHRoaXMuX3ZpZXcpOnRoaXMuX3ZpZXd9LGFkZDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pbnNlcnQodGhpcy5fZGF0YS5sZW5ndGgsZSl9LF9jcmVhdGVOZXdNb2RlbDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZWFkZXIubW9kZWw/bmV3IHRoaXMucmVhZGVyLm1vZGVsKGUpOmUgaW5zdGFuY2VvZiBxdD9lOm5ldyBxdChlKX0saW5zZXJ0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fCh0PWUsZT0wKSx0IGluc3RhbmNlb2YgS3R8fCh0PXRoaXMuX2NyZWF0ZU5ld01vZGVsKHQpKSx0aGlzLl9pc1NlcnZlckdyb3VwZWQoKT90aGlzLl9kYXRhLnNwbGljZShlLDAsQSh0aGlzLmdyb3VwKCksdCkpOnRoaXMuX2RhdGEuc3BsaWNlKGUsMCx0KSx0fSxwdXNoQ3JlYXRlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYTtvdChlKXx8KGU9W2VdKSx0PVtdLG49dGhpcy5vcHRpb25zLmF1dG9TeW5jLHRoaXMub3B0aW9ucy5hdXRvU3luYz0hMTt0cnl7Zm9yKGk9MDtlLmxlbmd0aD5pO2krKylyPWVbaV0sbz10aGlzLmFkZChyKSx0LnB1c2gobyksYT1vLnRvSlNPTigpLHRoaXMuX2lzU2VydmVyR3JvdXBlZCgpJiYoYT1BKHRoaXMuZ3JvdXAoKSxhKSksdGhpcy5fcHJpc3RpbmVEYXRhLnB1c2goYSl9ZmluYWxseXt0aGlzLm9wdGlvbnMuYXV0b1N5bmM9bn10Lmxlbmd0aCYmdGhpcy50cmlnZ2VyKFwicHVzaFwiLHt0eXBlOlwiY3JlYXRlXCIsaXRlbXM6dH0pfSxwdXNoVXBkYXRlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG87Zm9yKG90KGUpfHwoZT1bZV0pLHQ9W10sbj0wO2UubGVuZ3RoPm47bisrKWk9ZVtuXSxyPXRoaXMuX2NyZWF0ZU5ld01vZGVsKGkpLG89dGhpcy5nZXQoci5pZCksbz8odC5wdXNoKG8pLG8uYWNjZXB0KGkpLG8udHJpZ2dlcihcImNoYW5nZVwiKSx0aGlzLl91cGRhdGVQcmlzdGluZUZvck1vZGVsKG8saSkpOnRoaXMucHVzaENyZWF0ZShpKTt0Lmxlbmd0aCYmdGhpcy50cmlnZ2VyKFwicHVzaFwiLHt0eXBlOlwidXBkYXRlXCIsaXRlbXM6dH0pfSxwdXNoRGVzdHJveTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9yZW1vdmVJdGVtcyhlKTt0Lmxlbmd0aCYmdGhpcy50cmlnZ2VyKFwicHVzaFwiLHt0eXBlOlwiZGVzdHJveVwiLGl0ZW1zOnR9KX0sX3JlbW92ZUl0ZW1zOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYTtvdChlKXx8KGU9W2VdKSx0PVtdLG49dGhpcy5vcHRpb25zLmF1dG9TeW5jLHRoaXMub3B0aW9ucy5hdXRvU3luYz0hMTt0cnl7Zm9yKGk9MDtlLmxlbmd0aD5pO2krKylyPWVbaV0sbz10aGlzLl9jcmVhdGVOZXdNb2RlbChyKSxhPSExLHRoaXMuX2VhY2hJdGVtKHRoaXMuX2RhdGEsZnVuY3Rpb24oZSl7dmFyIG4saTtmb3Iobj0wO2UubGVuZ3RoPm47bisrKWlmKGk9ZS5hdChuKSxpLmlkPT09by5pZCl7dC5wdXNoKGkpLGUuc3BsaWNlKG4sMSksYT0hMDticmVha319KSxhJiYodGhpcy5fcmVtb3ZlUHJpc3RpbmVGb3JNb2RlbChvKSx0aGlzLl9kZXN0cm95ZWQucG9wKCkpfWZpbmFsbHl7dGhpcy5vcHRpb25zLmF1dG9TeW5jPW59cmV0dXJuIHR9LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgbixpPXRoaXMscj1pLl9pc1NlcnZlckdyb3VwZWQoKTtyZXR1cm4gdGhpcy5fZWFjaEl0ZW0oaS5fZGF0YSxmdW5jdGlvbihvKXtyZXR1cm4gbj1EKG8sZSksbiYmcj8obi5pc05ldyYmbi5pc05ldygpfHxpLl9kZXN0cm95ZWQucHVzaChuKSwhMCk6dH0pLHRoaXMuX3JlbW92ZU1vZGVsRnJvbVJhbmdlcyhlKSx0aGlzLl91cGRhdGVSYW5nZXNMZW5ndGgoKSxlfSxzeW5jOmZ1bmN0aW9uKCl7dmFyIHQsbixpLHIsbz10aGlzLGE9W10scz1bXSxsPW8uX2Rlc3Ryb3llZCxjPW8uX2ZsYXREYXRhKG8uX2RhdGEpO2lmKG8ub25saW5lKCkpe2lmKCFvLnJlYWRlci5tb2RlbClyZXR1cm47Zm9yKHQ9MCxuPWMubGVuZ3RoO24+dDt0KyspY1t0XS5pc05ldygpP2EucHVzaChjW3RdKTpjW3RdLmRpcnR5JiZzLnB1c2goY1t0XSk7cj1bXSxyLnB1c2guYXBwbHkocixvLl9zZW5kKFwiY3JlYXRlXCIsYSkpLHIucHVzaC5hcHBseShyLG8uX3NlbmQoXCJ1cGRhdGVcIixzKSksci5wdXNoLmFwcGx5KHIsby5fc2VuZChcImRlc3Ryb3lcIixsKSksaT1lLndoZW4uYXBwbHkobnVsbCxyKS50aGVuKGZ1bmN0aW9uKCl7dmFyIGUsdDtmb3IoZT0wLHQ9YXJndW1lbnRzLmxlbmd0aDt0PmU7ZSsrKW8uX2FjY2VwdChhcmd1bWVudHNbZV0pO28uX3N0b3JlRGF0YSghMCksby5fY2hhbmdlKHthY3Rpb246XCJzeW5jXCJ9KSxvLnRyaWdnZXIoYnQpfSl9ZWxzZSBvLl9zdG9yZURhdGEoITApLG8uX2NoYW5nZSh7YWN0aW9uOlwic3luY1wifSksaT1lLkRlZmVycmVkKCkucmVzb2x2ZSgpLnByb21pc2UoKTtyZXR1cm4gaX0sY2FuY2VsQ2hhbmdlczpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UgaW5zdGFuY2VvZiBkdC5kYXRhLk1vZGVsP3QuX2NhbmNlbE1vZGVsKGUpOih0Ll9kZXN0cm95ZWQ9W10sdC5fZGV0YWNoT2JzZXJ2YWJsZVBhcmVudHMoKSx0Ll9kYXRhPXQuX29ic2VydmUodC5fcHJpc3RpbmVEYXRhKSx0Lm9wdGlvbnMuc2VydmVyUGFnaW5nJiYodC5fdG90YWw9dC5fcHJpc3RpbmVUb3RhbCksdC5fY2hhbmdlKCkpfSxoYXNDaGFuZ2VzOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMuX2RhdGE7aWYodGhpcy5fZGVzdHJveWVkLmxlbmd0aClyZXR1cm4hMDtmb3IoZT0wLHQ9bi5sZW5ndGg7dD5lO2UrKylpZihuW2VdLmlzTmV3KCl8fG5bZV0uZGlydHkpcmV0dXJuITA7cmV0dXJuITF9LF9hY2NlcHQ6ZnVuY3Rpb24odCl7dmFyIG4saT10aGlzLHI9dC5tb2RlbHMsbz10LnJlc3BvbnNlLGE9MCxzPWkuX2lzU2VydmVyR3JvdXBlZCgpLGw9aS5fcHJpc3RpbmVEYXRhLGM9dC50eXBlO2lmKGkudHJpZ2dlcihUdCx7cmVzcG9uc2U6byx0eXBlOmN9KSxvJiYhcnQobykpe2lmKG89aS5yZWFkZXIucGFyc2UobyksaS5faGFuZGxlQ3VzdG9tRXJyb3JzKG8pKXJldHVybjtvPWkucmVhZGVyLmRhdGEobyksb3Qobyl8fChvPVtvXSl9ZWxzZSBvPWUubWFwKHIsZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9KU09OKCl9KTtmb3IoXCJkZXN0cm95XCI9PT1jJiYoaS5fZGVzdHJveWVkPVtdKSxhPTAsbj1yLmxlbmd0aDtuPmE7YSsrKVwiZGVzdHJveVwiIT09Yz8oclthXS5hY2NlcHQob1thXSksXCJjcmVhdGVcIj09PWM/bC5wdXNoKHM/QShpLmdyb3VwKCksclthXSk6b1thXSk6XCJ1cGRhdGVcIj09PWMmJmkuX3VwZGF0ZVByaXN0aW5lRm9yTW9kZWwoclthXSxvW2FdKSk6aS5fcmVtb3ZlUHJpc3RpbmVGb3JNb2RlbChyW2FdKX0sX3VwZGF0ZVByaXN0aW5lRm9yTW9kZWw6ZnVuY3Rpb24oZSx0KXt0aGlzLl9leGVjdXRlT25QcmlzdGluZUZvck1vZGVsKGUsZnVuY3Rpb24oZSxuKXtkdC5kZWVwRXh0ZW5kKG5bZV0sdCl9KX0sX2V4ZWN1dGVPblByaXN0aW5lRm9yTW9kZWw6ZnVuY3Rpb24oZSxuKXt0aGlzLl9lYWNoUHJpc3RpbmVJdGVtKGZ1bmN0aW9uKGkpe3ZhciByPUUoaSxlKTtyZXR1cm4gcj4tMT8obihyLGkpLCEwKTp0fSl9LF9yZW1vdmVQcmlzdGluZUZvck1vZGVsOmZ1bmN0aW9uKGUpe3RoaXMuX2V4ZWN1dGVPblByaXN0aW5lRm9yTW9kZWwoZSxmdW5jdGlvbihlLHQpe3Quc3BsaWNlKGUsMSl9KX0sX3JlYWREYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2lzU2VydmVyR3JvdXBlZCgpP3RoaXMucmVhZGVyLmdyb3Vwczp0aGlzLnJlYWRlci5kYXRhO3JldHVybiB0LmNhbGwodGhpcy5yZWFkZXIsZSl9LF9lYWNoUHJpc3RpbmVJdGVtOmZ1bmN0aW9uKGUpe3RoaXMuX2VhY2hJdGVtKHRoaXMuX3ByaXN0aW5lRGF0YSxlKX0sX2VhY2hJdGVtOmZ1bmN0aW9uKGUsdCl7ZSYmZS5sZW5ndGgmJih0aGlzLl9pc1NlcnZlckdyb3VwZWQoKT94KGUsdCk6dChlKSl9LF9wcmlzdGluZUZvck1vZGVsOmZ1bmN0aW9uKGUpe3ZhciBuLGkscj1mdW5jdGlvbihyKXtyZXR1cm4gaT1FKHIsZSksaT4tMT8obj1yW2ldLCEwKTp0fTtyZXR1cm4gdGhpcy5fZWFjaFByaXN0aW5lSXRlbShyKSxufSxfY2FuY2VsTW9kZWw6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fcHJpc3RpbmVGb3JNb2RlbChlKTt0aGlzLl9lYWNoSXRlbSh0aGlzLl9kYXRhLGZ1bmN0aW9uKG4pe3ZhciBpPU0obixlKTtpPj0wJiYoIXR8fGUuaXNOZXcoKSYmIXQuX19zdGF0ZV9fP24uc3BsaWNlKGksMSk6bltpXS5hY2NlcHQodCkpfSl9LF9wcm9taXNlOmZ1bmN0aW9uKHQsbixpKXt2YXIgcj10aGlzO3JldHVybiBlLkRlZmVycmVkKGZ1bmN0aW9uKGUpe3IudHJpZ2dlcihDdCx7dHlwZTppfSksci50cmFuc3BvcnRbaV0uY2FsbChyLnRyYW5zcG9ydCx0dCh7c3VjY2VzczpmdW5jdGlvbih0KXtlLnJlc29sdmUoe3Jlc3BvbnNlOnQsbW9kZWxzOm4sdHlwZTppfSl9LGVycm9yOmZ1bmN0aW9uKHQsbixpKXtlLnJlamVjdCh0KSxyLmVycm9yKHQsbixpKX19LHQpKX0pLnByb21pc2UoKX0sX3NlbmQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcyxvPVtdLGE9ci5yZWFkZXIuc2VyaWFsaXplKGcodCkpO2lmKHIub3B0aW9ucy5iYXRjaCl0Lmxlbmd0aCYmby5wdXNoKHIuX3Byb21pc2Uoe2RhdGE6e21vZGVsczphfX0sdCxlKSk7ZWxzZSBmb3Iobj0wLGk9dC5sZW5ndGg7aT5uO24rKylvLnB1c2goci5fcHJvbWlzZSh7ZGF0YTphW25dfSxbdFtuXV0sZSkpO3JldHVybiBvfSxyZWFkOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1uLl9wYXJhbXModCkscj1lLkRlZmVycmVkKCk7cmV0dXJuIG4uX3F1ZXVlUmVxdWVzdChpLGZ1bmN0aW9uKCl7bi50cmlnZ2VyKEN0LHt0eXBlOlwicmVhZFwifSk/KG4uX2RlcXVldWVSZXF1ZXN0KCksci5yZXNvbHZlKCkpOihuLnRyaWdnZXIoU3QpLG4uX3Jhbmdlcz1bXSxuLnRyaWdnZXIoXCJyZXNldFwiKSxuLm9ubGluZSgpP24udHJhbnNwb3J0LnJlYWQoe2RhdGE6aSxzdWNjZXNzOmZ1bmN0aW9uKGUpe24uc3VjY2VzcyhlKSxyLnJlc29sdmUoKX0sZXJyb3I6ZnVuY3Rpb24oKXt2YXIgZT1MdC5jYWxsKGFyZ3VtZW50cyk7bi5lcnJvci5hcHBseShuLGUpLHIucmVqZWN0LmFwcGx5KHIsZSl9fSk6bnVsbCE9bi5vcHRpb25zLm9mZmxpbmVTdG9yYWdlJiYobi5zdWNjZXNzKG4ub2ZmbGluZURhdGEoKSksci5yZXNvbHZlKCkpKX0pLHIucHJvbWlzZSgpfSxfcmVhZEFnZ3JlZ2F0ZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVhZGVyLmFnZ3JlZ2F0ZXMoZSl9LHN1Y2Nlc3M6ZnVuY3Rpb24oZSl7dmFyIG4saSxyLG8sYT10aGlzLHM9YS5vcHRpb25zO2lmKGEudHJpZ2dlcihUdCx7cmVzcG9uc2U6ZSx0eXBlOlwicmVhZFwifSksYS5vbmxpbmUoKSl7aWYoZT1hLnJlYWRlci5wYXJzZShlKSxhLl9oYW5kbGVDdXN0b21FcnJvcnMoZSkpcmV0dXJuIGEuX2RlcXVldWVSZXF1ZXN0KCksdDthLl90b3RhbD1hLnJlYWRlci50b3RhbChlKSxhLl9hZ2dyZWdhdGUmJnMuc2VydmVyQWdncmVnYXRlcyYmKGEuX2FnZ3JlZ2F0ZVJlc3VsdD1hLl9yZWFkQWdncmVnYXRlcyhlKSksZT1hLl9yZWFkRGF0YShlKX1lbHNle2ZvcihlPWEuX3JlYWREYXRhKGUpLG49W10saT0wO2UubGVuZ3RoPmk7aSsrKXI9ZVtpXSxvPXIuX19zdGF0ZV9fLFwiZGVzdHJveVwiPT1vP3RoaXMuX2Rlc3Ryb3llZC5wdXNoKHRoaXMuX2NyZWF0ZU5ld01vZGVsKHIpKTpuLnB1c2gocik7ZT1uLGEuX3RvdGFsPWUubGVuZ3RofWEuX3ByaXN0aW5lVG90YWw9YS5fdG90YWwsYS5fcHJpc3RpbmVEYXRhPWUuc2xpY2UoMCksYS5fZGV0YWNoT2JzZXJ2YWJsZVBhcmVudHMoKSxhLl9kYXRhPWEuX29ic2VydmUoZSksbnVsbCE9YS5vcHRpb25zLm9mZmxpbmVTdG9yYWdlJiZhLl9lYWNoSXRlbShhLl9kYXRhLGZ1bmN0aW9uKGUpe3ZhciB0LG47Zm9yKHQ9MDtlLmxlbmd0aD50O3QrKyluPWUuYXQodCksXCJ1cGRhdGVcIj09bi5fX3N0YXRlX18mJihuLmRpcnR5PSEwKX0pLGEuX3N0b3JlRGF0YSgpLGEuX2FkZFJhbmdlKGEuX2RhdGEpLGEuX3Byb2Nlc3MoYS5fZGF0YSksYS5fZGVxdWV1ZVJlcXVlc3QoKX0sX2RldGFjaE9ic2VydmFibGVQYXJlbnRzOmZ1bmN0aW9uKCl7aWYodGhpcy5fZGF0YSYmdGhpcy5fc2hvdWxkRGV0YWNoT2JzZXJ2YWJsZVBhcmVudHMpZm9yKHZhciBlPTA7dGhpcy5fZGF0YS5sZW5ndGg+ZTtlKyspdGhpcy5fZGF0YVtlXS5wYXJlbnQmJih0aGlzLl9kYXRhW2VdLnBhcmVudD1jdCl9LF9zdG9yZURhdGE6ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXt2YXIgbixpLHIscz1bXTtmb3Iobj0wO2UubGVuZ3RoPm47bisrKWk9ZS5hdChuKSxyPWkudG9KU09OKCksbyYmaS5pdGVtcz9yLml0ZW1zPXQoaS5pdGVtcyk6KHIudWlkPWkudWlkLGEmJihpLmlzTmV3KCk/ci5fX3N0YXRlX189XCJjcmVhdGVcIjppLmRpcnR5JiYoci5fX3N0YXRlX189XCJ1cGRhdGVcIikpKSxzLnB1c2gocik7cmV0dXJuIHN9dmFyIG4saSxyLG89dGhpcy5faXNTZXJ2ZXJHcm91cGVkKCksYT10aGlzLnJlYWRlci5tb2RlbDtpZihudWxsIT10aGlzLm9wdGlvbnMub2ZmbGluZVN0b3JhZ2Upe2ZvcihuPXQodGhpcy5fZGF0YSksaT0wO3RoaXMuX2Rlc3Ryb3llZC5sZW5ndGg+aTtpKyspcj10aGlzLl9kZXN0cm95ZWRbaV0udG9KU09OKCksci5fX3N0YXRlX189XCJkZXN0cm95XCIsbi5wdXNoKHIpO3RoaXMub2ZmbGluZURhdGEobiksZSYmKHRoaXMuX3ByaXN0aW5lRGF0YT1uKX19LF9hZGRSYW5nZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5fc2tpcHx8MCxpPW4rdC5fZmxhdERhdGEoZSwhMCkubGVuZ3RoO3QuX3Jhbmdlcy5wdXNoKHtzdGFydDpuLGVuZDppLGRhdGE6ZX0pLHQuX3Jhbmdlcy5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuc3RhcnQtdC5zdGFydH0pfSxlcnJvcjpmdW5jdGlvbihlLHQsbil7dGhpcy5fZGVxdWV1ZVJlcXVlc3QoKSx0aGlzLnRyaWdnZXIoVHQse30pLHRoaXMudHJpZ2dlcih4dCx7eGhyOmUsc3RhdHVzOnQsZXJyb3JUaHJvd246bn0pfSxfcGFyYW1zOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10dCh7dGFrZTp0LnRha2UoKSxza2lwOnQuc2tpcCgpLHBhZ2U6dC5wYWdlKCkscGFnZVNpemU6dC5wYWdlU2l6ZSgpLHNvcnQ6dC5fc29ydCxmaWx0ZXI6dC5fZmlsdGVyLGdyb3VwOnQuX2dyb3VwLGFnZ3JlZ2F0ZTp0Ll9hZ2dyZWdhdGV9LGUpO3JldHVybiB0Lm9wdGlvbnMuc2VydmVyUGFnaW5nfHwoZGVsZXRlIG4udGFrZSxkZWxldGUgbi5za2lwLGRlbGV0ZSBuLnBhZ2UsZGVsZXRlIG4ucGFnZVNpemUpLHQub3B0aW9ucy5zZXJ2ZXJHcm91cGluZz90LnJlYWRlci5tb2RlbCYmbi5ncm91cCYmKG4uZ3JvdXA9RihuLmdyb3VwLHQucmVhZGVyLm1vZGVsKSk6ZGVsZXRlIG4uZ3JvdXAsdC5vcHRpb25zLnNlcnZlckZpbHRlcmluZz90LnJlYWRlci5tb2RlbCYmbi5maWx0ZXImJihuLmZpbHRlcj16KG4uZmlsdGVyLHQucmVhZGVyLm1vZGVsKSk6ZGVsZXRlIG4uZmlsdGVyLHQub3B0aW9ucy5zZXJ2ZXJTb3J0aW5nP3QucmVhZGVyLm1vZGVsJiZuLnNvcnQmJihuLnNvcnQ9RihuLnNvcnQsdC5yZWFkZXIubW9kZWwpKTpkZWxldGUgbi5zb3J0LHQub3B0aW9ucy5zZXJ2ZXJBZ2dyZWdhdGVzP3QucmVhZGVyLm1vZGVsJiZuLmFnZ3JlZ2F0ZSYmKG4uYWdncmVnYXRlPUYobi5hZ2dyZWdhdGUsdC5yZWFkZXIubW9kZWwpKTpkZWxldGUgbi5hZ2dyZWdhdGUsbn0sX3F1ZXVlUmVxdWVzdDpmdW5jdGlvbihlLG4pe3ZhciBpPXRoaXM7aS5fcmVxdWVzdEluUHJvZ3Jlc3M/aS5fcGVuZGluZz17Y2FsbGJhY2s6bnQobixpKSxvcHRpb25zOmV9OihpLl9yZXF1ZXN0SW5Qcm9ncmVzcz0hMCxpLl9wZW5kaW5nPXQsbigpKX0sX2RlcXVldWVSZXF1ZXN0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9yZXF1ZXN0SW5Qcm9ncmVzcz0hMSxlLl9wZW5kaW5nJiZlLl9xdWV1ZVJlcXVlc3QoZS5fcGVuZGluZy5vcHRpb25zLGUuX3BlbmRpbmcuY2FsbGJhY2spfSxfaGFuZGxlQ3VzdG9tRXJyb3JzOmZ1bmN0aW9uKGUpe2lmKHRoaXMucmVhZGVyLmVycm9ycyl7dmFyIHQ9dGhpcy5yZWFkZXIuZXJyb3JzKGUpO2lmKHQpcmV0dXJuIHRoaXMudHJpZ2dlcih4dCx7eGhyOm51bGwsc3RhdHVzOlwiY3VzdG9tZXJyb3JcIixlcnJvclRocm93bjpcImN1c3RvbSBlcnJvclwiLGVycm9yczp0fSksITB9cmV0dXJuITF9LF9vYnNlcnZlOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxpPW4ucmVhZGVyLm1vZGVsLHI9ITE7cmV0dXJuIG4uX3Nob3VsZERldGFjaE9ic2VydmFibGVQYXJlbnRzPSEwLGkmJmUubGVuZ3RoJiYocj0hKGVbMF1pbnN0YW5jZW9mIGkpKSxlIGluc3RhbmNlb2YganQ/KG4uX3Nob3VsZERldGFjaE9ic2VydmFibGVQYXJlbnRzPSExLHImJihlLnR5cGU9bi5yZWFkZXIubW9kZWwsZS53cmFwQWxsKGUsZSkpKToodD1uLnBhZ2VTaXplKCk/R3Q6anQsZT1uZXcgdChlLG4ucmVhZGVyLm1vZGVsKSxlLnBhcmVudD1mdW5jdGlvbigpe3JldHVybiBuLnBhcmVudCgpfSksbi5faXNTZXJ2ZXJHcm91cGVkKCkmJmsoZSxpKSxuLl9jaGFuZ2VIYW5kbGVyJiZuLl9kYXRhJiZuLl9kYXRhIGluc3RhbmNlb2YganQ/bi5fZGF0YS51bmJpbmQod3Qsbi5fY2hhbmdlSGFuZGxlcik6bi5fY2hhbmdlSGFuZGxlcj1udChuLl9jaGFuZ2UsbiksZS5iaW5kKHd0LG4uX2NoYW5nZUhhbmRsZXIpfSxfY2hhbmdlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPXRoaXMsbz1lP2UuYWN0aW9uOlwiXCI7aWYoXCJyZW1vdmVcIj09PW8pZm9yKHQ9MCxuPWUuaXRlbXMubGVuZ3RoO24+dDt0KyspZS5pdGVtc1t0XS5pc05ldyYmZS5pdGVtc1t0XS5pc05ldygpfHxyLl9kZXN0cm95ZWQucHVzaChlLml0ZW1zW3RdKTshci5vcHRpb25zLmF1dG9TeW5jfHxcImFkZFwiIT09byYmXCJyZW1vdmVcIiE9PW8mJlwiaXRlbWNoYW5nZVwiIT09bz8oaT1wYXJzZUludChyLl90b3RhbCwxMCkscChyLl90b3RhbCl8fChpPXBhcnNlSW50KHIuX3ByaXN0aW5lVG90YWwsMTApKSxcImFkZFwiPT09bz9pKz1lLml0ZW1zLmxlbmd0aDpcInJlbW92ZVwiPT09bz9pLT1lLml0ZW1zLmxlbmd0aDpcIml0ZW1jaGFuZ2VcIj09PW98fFwic3luY1wiPT09b3x8ci5vcHRpb25zLnNlcnZlclBhZ2luZz9cInN5bmNcIj09PW8mJihpPXIuX3ByaXN0aW5lVG90YWw9cGFyc2VJbnQoci5fdG90YWwsMTApKTppPXIuX3ByaXN0aW5lVG90YWwsci5fdG90YWw9aSxyLl9wcm9jZXNzKHIuX2RhdGEsZSkpOnIuc3luYygpfSxfY2FsY3VsYXRlQWdncmVnYXRlczpmdW5jdGlvbihlLHQpe3Q9dHx8e307dmFyIG49bmV3IG8oZSksaT10LmFnZ3JlZ2F0ZSxyPXQuZmlsdGVyO3JldHVybiByJiYobj1uLmZpbHRlcihyKSksbi5hZ2dyZWdhdGUoaSl9LF9wcm9jZXNzOmZ1bmN0aW9uKGUsbil7dmFyIGkscj10aGlzLG89e307ci5vcHRpb25zLnNlcnZlclBhZ2luZyE9PSEwJiYoby5za2lwPXIuX3NraXAsby50YWtlPXIuX3Rha2V8fHIuX3BhZ2VTaXplLG8uc2tpcD09PXQmJnIuX3BhZ2UhPT10JiZyLl9wYWdlU2l6ZSE9PXQmJihvLnNraXA9KHIuX3BhZ2UtMSkqci5fcGFnZVNpemUpKSxyLm9wdGlvbnMuc2VydmVyU29ydGluZyE9PSEwJiYoby5zb3J0PXIuX3NvcnQpLHIub3B0aW9ucy5zZXJ2ZXJGaWx0ZXJpbmchPT0hMCYmKG8uZmlsdGVyPXIuX2ZpbHRlciksci5vcHRpb25zLnNlcnZlckdyb3VwaW5nIT09ITAmJihvLmdyb3VwPXIuX2dyb3VwKSxyLm9wdGlvbnMuc2VydmVyQWdncmVnYXRlcyE9PSEwJiYoby5hZ2dyZWdhdGU9ci5fYWdncmVnYXRlLHIuX2FnZ3JlZ2F0ZVJlc3VsdD1yLl9jYWxjdWxhdGVBZ2dyZWdhdGVzKGUsbykpLGk9ci5fcXVlcnlQcm9jZXNzKGUsbyksci52aWV3KGkuZGF0YSksaS50b3RhbD09PXR8fHIub3B0aW9ucy5zZXJ2ZXJGaWx0ZXJpbmd8fChyLl90b3RhbD1pLnRvdGFsKSxuPW58fHt9LG4uaXRlbXM9bi5pdGVtc3x8ci5fdmlldyxyLnRyaWdnZXIod3Qsbil9LF9xdWVyeVByb2Nlc3M6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gby5wcm9jZXNzKGUsdCl9LF9tZXJnZVN0YXRlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGUhPT10JiYobi5fcGFnZVNpemU9ZS5wYWdlU2l6ZSxuLl9wYWdlPWUucGFnZSxuLl9zb3J0PWUuc29ydCxuLl9maWx0ZXI9ZS5maWx0ZXIsbi5fZ3JvdXA9ZS5ncm91cCxuLl9hZ2dyZWdhdGU9ZS5hZ2dyZWdhdGUsbi5fc2tpcD1lLnNraXAsbi5fdGFrZT1lLnRha2Usbi5fc2tpcD09PXQmJihuLl9za2lwPW4uc2tpcCgpLGUuc2tpcD1uLnNraXAoKSksbi5fdGFrZT09PXQmJm4uX3BhZ2VTaXplIT09dCYmKG4uX3Rha2U9bi5fcGFnZVNpemUsZS50YWtlPW4uX3Rha2UpLGUuc29ydCYmKG4uX3NvcnQ9ZS5zb3J0PWEoZS5zb3J0KSksZS5maWx0ZXImJihuLl9maWx0ZXI9ZS5maWx0ZXI9bChlLmZpbHRlcikpLGUuZ3JvdXAmJihuLl9ncm91cD1lLmdyb3VwPWQoZS5ncm91cCkpLGUuYWdncmVnYXRlJiYobi5fYWdncmVnYXRlPWUuYWdncmVnYXRlPWMoZS5hZ2dyZWdhdGUpKSksZX0scXVlcnk6ZnVuY3Rpb24obil7dmFyIGkscj10aGlzLm9wdGlvbnMuc2VydmVyU29ydGluZ3x8dGhpcy5vcHRpb25zLnNlcnZlclBhZ2luZ3x8dGhpcy5vcHRpb25zLnNlcnZlckZpbHRlcmluZ3x8dGhpcy5vcHRpb25zLnNlcnZlckdyb3VwaW5nfHx0aGlzLm9wdGlvbnMuc2VydmVyQWdncmVnYXRlcztyZXR1cm4gcnx8KHRoaXMuX2RhdGE9PT10fHwwPT09dGhpcy5fZGF0YS5sZW5ndGgpJiYhdGhpcy5fZGVzdHJveWVkLmxlbmd0aD90aGlzLnJlYWQodGhpcy5fbWVyZ2VTdGF0ZShuKSk6KHRoaXMudHJpZ2dlcihDdCx7dHlwZTpcInJlYWRcIn0pfHwodGhpcy50cmlnZ2VyKFN0KSxpPXRoaXMuX3F1ZXJ5UHJvY2Vzcyh0aGlzLl9kYXRhLHRoaXMuX21lcmdlU3RhdGUobikpLHRoaXMub3B0aW9ucy5zZXJ2ZXJGaWx0ZXJpbmd8fCh0aGlzLl90b3RhbD1pLnRvdGFsIT09dD9pLnRvdGFsOnRoaXMuX2RhdGEubGVuZ3RoKSx0aGlzLl9hZ2dyZWdhdGVSZXN1bHQ9dGhpcy5fY2FsY3VsYXRlQWdncmVnYXRlcyh0aGlzLl9kYXRhLG4pLHRoaXMudmlldyhpLmRhdGEpLHRoaXMudHJpZ2dlcihUdCx7fSksdGhpcy50cmlnZ2VyKHd0LHtpdGVtczppLmRhdGF9KSksZS5EZWZlcnJlZCgpLnJlc29sdmUoKS5wcm9taXNlKCkpfSxmZXRjaDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcXVlcnkoKS50aGVuKG50KGUsdGhpcykpfSxfcXVlcnk6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gdC5xdWVyeSh0dCh7fSx7cGFnZTp0LnBhZ2UoKSxwYWdlU2l6ZTp0LnBhZ2VTaXplKCksc29ydDp0LnNvcnQoKSxmaWx0ZXI6dC5maWx0ZXIoKSxncm91cDp0Lmdyb3VwKCksYWdncmVnYXRlOnQuYWdncmVnYXRlKCl9LGUpKX0sbmV4dDpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5wYWdlKCkscj1uLnRvdGFsKCk7cmV0dXJuIGU9ZXx8e30sIWl8fHImJmkrMT5uLnRvdGFsUGFnZXMoKT90OihuLl9za2lwPWkqbi50YWtlKCksaSs9MSxlLnBhZ2U9aSxuLl9xdWVyeShlKSxpKX0scHJldjpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5wYWdlKCk7cmV0dXJuIGU9ZXx8e30saSYmMSE9PWk/KG4uX3NraXA9bi5fc2tpcC1uLnRha2UoKSxpLT0xLGUucGFnZT1pLG4uX3F1ZXJ5KGUpLGkpOnR9LHBhZ2U6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzO3JldHVybiBlIT09dD8oZT1QdC5tYXgoUHQubWluKFB0Lm1heChlLDEpLGkudG90YWxQYWdlcygpKSwxKSxpLl9xdWVyeSh7cGFnZTplfSksdCk6KG49aS5za2lwKCksbiE9PXQ/UHQucm91bmQoKG58fDApLyhpLnRha2UoKXx8MSkpKzE6dCl9LHBhZ2VTaXplOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGUhPT10PyhuLl9xdWVyeSh7cGFnZVNpemU6ZSxwYWdlOjF9KSx0KTpuLnRha2UoKX0sc29ydDpmdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiBlIT09dD8obi5fcXVlcnkoe3NvcnQ6ZX0pLHQpOm4uX3NvcnR9LGZpbHRlcjpmdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiBlPT09dD9uLl9maWx0ZXI6KG4uX3F1ZXJ5KHtmaWx0ZXI6ZSxwYWdlOjF9KSx0KX0sZ3JvdXA6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztyZXR1cm4gZSE9PXQ/KG4uX3F1ZXJ5KHtncm91cDplfSksdCk6bi5fZ3JvdXB9LHRvdGFsOmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHRoaXMuX3RvdGFsfHwwLDEwKX0sYWdncmVnYXRlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGUhPT10PyhuLl9xdWVyeSh7YWdncmVnYXRlOmV9KSx0KTpuLl9hZ2dyZWdhdGV9LGFnZ3JlZ2F0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWdncmVnYXRlUmVzdWx0fSx0b3RhbFBhZ2VzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUucGFnZVNpemUoKXx8ZS50b3RhbCgpO3JldHVybiBQdC5jZWlsKChlLnRvdGFsKCl8fDApL3QpfSxpblJhbmdlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPVB0Lm1pbihlK3Qsbi50b3RhbCgpKTtyZXR1cm4hbi5vcHRpb25zLnNlcnZlclBhZ2luZyYmbi5fZGF0YS5sZW5ndGg+MD8hMDpuLl9maW5kUmFuZ2UoZSxpKS5sZW5ndGg+MH0sbGFzdFJhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fcmFuZ2VzO3JldHVybiBlW2UubGVuZ3RoLTFdfHx7c3RhcnQ6MCxlbmQ6MCxkYXRhOltdfX0sZmlyc3RJdGVtVWlkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fcmFuZ2VzO3JldHVybiBlLmxlbmd0aCYmZVswXS5kYXRhLmxlbmd0aCYmZVswXS5kYXRhWzBdLnVpZH0sZW5hYmxlUmVxdWVzdHNJblByb2dyZXNzOmZ1bmN0aW9uKCl7dGhpcy5fc2tpcFJlcXVlc3RzSW5Qcm9ncmVzcz0hMX0scmFuZ2U6ZnVuY3Rpb24oZSxuKXt2YXIgaSxyLG8sYSxzLGwsYyxkO2lmKGU9UHQubWluKGV8fDAsdGhpcy50b3RhbCgpKSxpPXRoaXMscj1QdC5tYXgoUHQuZmxvb3IoZS9uKSwwKSpuLG89UHQubWluKHIrbixpLnRvdGFsKCkpLGkuX3NraXBSZXF1ZXN0c0luUHJvZ3Jlc3M9ITEsYT1pLl9maW5kUmFuZ2UoZSxQdC5taW4oZStuLGkudG90YWwoKSkpLGEubGVuZ3RoKXtpLl9za2lwUmVxdWVzdHNJblByb2dyZXNzPSEwLGkuX3BlbmRpbmc9dCxpLl9za2lwPWU+aS5za2lwKCk/UHQubWluKG8sKGkudG90YWxQYWdlcygpLTEpKmkudGFrZSgpKTpyLGkuX3Rha2U9bixzPWkub3B0aW9ucy5zZXJ2ZXJQYWdpbmcsbD1pLm9wdGlvbnMuc2VydmVyU29ydGluZyxjPWkub3B0aW9ucy5zZXJ2ZXJGaWx0ZXJpbmcsZD1pLm9wdGlvbnMuc2VydmVyQWdncmVnYXRlczt0cnl7aS5vcHRpb25zLnNlcnZlclBhZ2luZz0hMCxpLl9pc1NlcnZlckdyb3VwZWQoKXx8aS5ncm91cCgpJiZpLmdyb3VwKCkubGVuZ3RofHwoaS5vcHRpb25zLnNlcnZlclNvcnRpbmc9ITApLGkub3B0aW9ucy5zZXJ2ZXJGaWx0ZXJpbmc9ITAsaS5vcHRpb25zLnNlcnZlclBhZ2luZz0hMCxpLm9wdGlvbnMuc2VydmVyQWdncmVnYXRlcz0hMCxzJiYoaS5fZGV0YWNoT2JzZXJ2YWJsZVBhcmVudHMoKSxpLl9kYXRhPWE9aS5fb2JzZXJ2ZShhKSksaS5fcHJvY2VzcyhhKX1maW5hbGx5e2kub3B0aW9ucy5zZXJ2ZXJQYWdpbmc9cyxpLm9wdGlvbnMuc2VydmVyU29ydGluZz1sLGkub3B0aW9ucy5zZXJ2ZXJGaWx0ZXJpbmc9YyxpLm9wdGlvbnMuc2VydmVyQWdncmVnYXRlcz1kfX1lbHNlIG4hPT10JiYoaS5fcmFuZ2VFeGlzdHMocixvKT9lPnImJmkucHJlZmV0Y2gobyxuLGZ1bmN0aW9uKCl7aS5yYW5nZShlLG4pfSk6aS5wcmVmZXRjaChyLG4sZnVuY3Rpb24oKXtlPnImJm88aS50b3RhbCgpJiYhaS5fcmFuZ2VFeGlzdHMobyxQdC5taW4obytuLGkudG90YWwoKSkpP2kucHJlZmV0Y2gobyxuLGZ1bmN0aW9uKCl7aS5yYW5nZShlLG4pfSk6aS5yYW5nZShlLG4pfSkpfSxfZmluZFJhbmdlOmZ1bmN0aW9uKGUsbil7dmFyIGkscixvLHMsbCxjLHUsaCxwLGYsZyxtLHY9dGhpcyxfPXYuX3Jhbmdlcyx5PVtdLHc9di5vcHRpb25zLGI9dy5zZXJ2ZXJTb3J0aW5nfHx3LnNlcnZlclBhZ2luZ3x8dy5zZXJ2ZXJGaWx0ZXJpbmd8fHcuc2VydmVyR3JvdXBpbmd8fHcuc2VydmVyQWdncmVnYXRlcztmb3Iocj0wLGc9Xy5sZW5ndGg7Zz5yO3IrKylpZihpPV9bcl0sZT49aS5zdGFydCYmaS5lbmQ+PWUpe2ZvcihmPTAsbz1yO2c+bztvKyspaWYoaT1fW29dLHA9di5fZmxhdERhdGEoaS5kYXRhLCEwKSxwLmxlbmd0aCYmZStmPj1pLnN0YXJ0JiYoYz1pLmRhdGEsdT1pLmVuZCxifHwobT1kKHYuZ3JvdXAoKXx8W10pLmNvbmNhdChhKHYuc29ydCgpfHxbXSkpLGg9di5fcXVlcnlQcm9jZXNzKGkuZGF0YSx7c29ydDptLGZpbHRlcjp2LmZpbHRlcigpfSkscD1jPWguZGF0YSxoLnRvdGFsIT09dCYmKHU9aC50b3RhbCkpLHM9MCxlK2Y+aS5zdGFydCYmKHM9ZStmLWkuc3RhcnQpLGw9cC5sZW5ndGgsdT5uJiYobC09dS1uKSxmKz1sLXMseT12Ll9tZXJnZUdyb3Vwcyh5LGMscyxsKSxpLmVuZD49biYmZj09bi1lKSlyZXR1cm4geTticmVha31yZXR1cm5bXX0sX21lcmdlR3JvdXBzOmZ1bmN0aW9uKGUsdCxuLGkpe2lmKHRoaXMuX2lzU2VydmVyR3JvdXBlZCgpKXt2YXIgcixvPXQudG9KU09OKCk7cmV0dXJuIGUubGVuZ3RoJiYocj1lW2UubGVuZ3RoLTFdKSx3KHIsbyxuLGkpLGUuY29uY2F0KG8pfXJldHVybiBlLmNvbmNhdCh0LnNsaWNlKG4saSkpfSxza2lwOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gZS5fc2tpcD09PXQ/ZS5fcGFnZSE9PXQ/KGUuX3BhZ2UtMSkqKGUudGFrZSgpfHwxKTp0OmUuX3NraXB9LHRha2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGFrZXx8dGhpcy5fcGFnZVNpemV9LF9wcmVmZXRjaFN1Y2Nlc3NIYW5kbGVyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzO3JldHVybiBmdW5jdGlvbihyKXt2YXIgbyxhLHMsbD0hMSxjPXtzdGFydDplLGVuZDp0LGRhdGE6W119O2lmKGkuX2RlcXVldWVSZXF1ZXN0KCksaS50cmlnZ2VyKFR0LHtyZXNwb25zZTpyLHR5cGU6XCJyZWFkXCJ9KSxyPWkucmVhZGVyLnBhcnNlKHIpLHM9aS5fcmVhZERhdGEocikscy5sZW5ndGgpe2ZvcihvPTAsYT1pLl9yYW5nZXMubGVuZ3RoO2E+bztvKyspaWYoaS5fcmFuZ2VzW29dLnN0YXJ0PT09ZSl7bD0hMCxjPWkuX3Jhbmdlc1tvXTtcclxuYnJlYWt9bHx8aS5fcmFuZ2VzLnB1c2goYyl9Yy5kYXRhPWkuX29ic2VydmUocyksYy5lbmQ9Yy5zdGFydCtpLl9mbGF0RGF0YShjLmRhdGEsITApLmxlbmd0aCxpLl9yYW5nZXMuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBlLnN0YXJ0LXQuc3RhcnR9KSxpLl90b3RhbD1pLnJlYWRlci50b3RhbChyKSxpLl9za2lwUmVxdWVzdHNJblByb2dyZXNzfHwobiYmcy5sZW5ndGg/bigpOmkudHJpZ2dlcih3dCx7fSkpfX0scHJlZmV0Y2g6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMscj1QdC5taW4oZSt0LGkudG90YWwoKSksbz17dGFrZTp0LHNraXA6ZSxwYWdlOmUvdCsxLHBhZ2VTaXplOnQsc29ydDppLl9zb3J0LGZpbHRlcjppLl9maWx0ZXIsZ3JvdXA6aS5fZ3JvdXAsYWdncmVnYXRlOmkuX2FnZ3JlZ2F0ZX07aS5fcmFuZ2VFeGlzdHMoZSxyKT9uJiZuKCk6KGNsZWFyVGltZW91dChpLl90aW1lb3V0KSxpLl90aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpLl9xdWV1ZVJlcXVlc3QobyxmdW5jdGlvbigpe2kudHJpZ2dlcihDdCx7dHlwZTpcInJlYWRcIn0pP2kuX2RlcXVldWVSZXF1ZXN0KCk6aS50cmFuc3BvcnQucmVhZCh7ZGF0YTppLl9wYXJhbXMobyksc3VjY2VzczppLl9wcmVmZXRjaFN1Y2Nlc3NIYW5kbGVyKGUscixuKX0pfSl9LDEwMCkpfSxfcmFuZ2VFeGlzdHM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcyxvPXIuX3Jhbmdlcztmb3Iobj0wLGk9by5sZW5ndGg7aT5uO24rKylpZihlPj1vW25dLnN0YXJ0JiZvW25dLmVuZD49dClyZXR1cm4hMDtyZXR1cm4hMX0sX3JlbW92ZU1vZGVsRnJvbVJhbmdlczpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvO2ZvcihyPTAsbz10aGlzLl9yYW5nZXMubGVuZ3RoO28+ciYmKGk9dGhpcy5fcmFuZ2VzW3JdLHRoaXMuX2VhY2hJdGVtKGkuZGF0YSxmdW5jdGlvbihpKXt0PUQoaSxlKSx0JiYobj0hMCl9KSwhbik7cisrKTt9LF91cGRhdGVSYW5nZXNMZW5ndGg6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyPTA7Zm9yKG49MCxpPXRoaXMuX3Jhbmdlcy5sZW5ndGg7aT5uO24rKyllPXRoaXMuX3Jhbmdlc1tuXSxlLnN0YXJ0PWUuc3RhcnQtcix0PXRoaXMuX2ZsYXREYXRhKGUuZGF0YSwhMCkubGVuZ3RoLHI9ZS5lbmQtdCxlLmVuZD1lLnN0YXJ0K3R9fSksUT17fSxRLmNyZWF0ZT1mdW5jdGlvbihlLHQpe3ZhciBuLGk9ZS50cmFuc3BvcnQ7cmV0dXJuIGk/KGkucmVhZD10eXBlb2YgaS5yZWFkPT09ZnQ/e3VybDppLnJlYWR9OmkucmVhZCxlLnR5cGUmJihkdC5kYXRhLnRyYW5zcG9ydHM9ZHQuZGF0YS50cmFuc3BvcnRzfHx7fSxkdC5kYXRhLnNjaGVtYXM9ZHQuZGF0YS5zY2hlbWFzfHx7fSxkdC5kYXRhLnRyYW5zcG9ydHNbZS50eXBlXSYmIWl0KGR0LmRhdGEudHJhbnNwb3J0c1tlLnR5cGVdKT9uPW5ldyBkdC5kYXRhLnRyYW5zcG9ydHNbZS50eXBlXSh0dChpLHtkYXRhOnR9KSk6aT10dCghMCx7fSxkdC5kYXRhLnRyYW5zcG9ydHNbZS50eXBlXSxpKSxlLnNjaGVtYT10dCghMCx7fSxkdC5kYXRhLnNjaGVtYXNbZS50eXBlXSxlLnNjaGVtYSkpLG58fChuPXV0KGkucmVhZCk/aTpuZXcgcShpKSkpOm49bmV3IEcoe2RhdGE6ZS5kYXRhfHxbXX0pLG59LEsuY3JlYXRlPWZ1bmN0aW9uKGUpeyhvdChlKXx8ZSBpbnN0YW5jZW9mIGp0KSYmKGU9e2RhdGE6ZX0pO3ZhciB0LG4saSxyPWV8fHt9LG89ci5kYXRhLGE9ci5maWVsZHMscz1yLnRhYmxlLGw9ci5zZWxlY3QsYz17fTtpZihvfHwhYXx8ci50cmFuc3BvcnR8fChzP289QihzLGEpOmwmJihvPVIobCxhKSkpLGR0LmRhdGEuTW9kZWwmJmEmJighci5zY2hlbWF8fCFyLnNjaGVtYS5tb2RlbCkpe2Zvcih0PTAsbj1hLmxlbmd0aDtuPnQ7dCsrKWk9YVt0XSxpLnR5cGUmJihjW2kuZmllbGRdPWkpO3J0KGMpfHwoci5zY2hlbWE9dHQoITAsci5zY2hlbWEse21vZGVsOntmaWVsZHM6Y319KSl9cmV0dXJuIHIuZGF0YT1vLHM9bnVsbCxyLnRhYmxlPW51bGwsciBpbnN0YW5jZW9mIEs/cjpuZXcgSyhyKX0sWD1LdC5kZWZpbmUoe2lkOlwiaWRcIixpbml0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Lmhhc0NoaWxkcmVufHxlJiZlLmhhc0NoaWxkcmVuLGk9XCJpdGVtc1wiLHI9e307ZHQuZGF0YS5Nb2RlbC5mbi5pbml0LmNhbGwodCxlKSx0eXBlb2YgdC5jaGlsZHJlbj09PWZ0JiYoaT10LmNoaWxkcmVuKSxyPXtzY2hlbWE6e2RhdGE6aSxtb2RlbDp7aGFzQ2hpbGRyZW46bixpZDp0LmlkRmllbGQsZmllbGRzOnQuZmllbGRzfX19LHR5cGVvZiB0LmNoaWxkcmVuIT09ZnQmJnR0KHIsdC5jaGlsZHJlbiksci5kYXRhPWUsbnx8KG49ci5zY2hlbWEuZGF0YSksdHlwZW9mIG49PT1mdCYmKG49ZHQuZ2V0dGVyKG4pKSx1dChuKSYmKHQuaGFzQ2hpbGRyZW49ISFuLmNhbGwodCx0KSksdC5fY2hpbGRyZW5PcHRpb25zPXIsdC5oYXNDaGlsZHJlbiYmdC5faW5pdENoaWxkcmVuKCksdC5fbG9hZGVkPSEoIWV8fCFlW2ldJiYhZS5fbG9hZGVkKX0sX2luaXRDaGlsZHJlbjpmdW5jdGlvbigpe3ZhciBlLHQsbixpPXRoaXM7aS5jaGlsZHJlbiBpbnN0YW5jZW9mIEp8fChlPWkuY2hpbGRyZW49bmV3IEooaS5fY2hpbGRyZW5PcHRpb25zKSx0PWUudHJhbnNwb3J0LG49dC5wYXJhbWV0ZXJNYXAsdC5wYXJhbWV0ZXJNYXA9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZVtpLmlkRmllbGR8fFwiaWRcIl09aS5pZCxuJiYoZT1uKGUsdCkpLGV9LGUucGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIGl9LGUuYmluZCh3dCxmdW5jdGlvbihlKXtlLm5vZGU9ZS5ub2RlfHxpLGkudHJpZ2dlcih3dCxlKX0pLGUuYmluZCh4dCxmdW5jdGlvbihlKXt2YXIgdD1pLnBhcmVudCgpO3QmJihlLm5vZGU9ZS5ub2RlfHxpLHQudHJpZ2dlcih4dCxlKSl9KSxpLl91cGRhdGVDaGlsZHJlbkZpZWxkKCkpfSxhcHBlbmQ6ZnVuY3Rpb24oZSl7dGhpcy5faW5pdENoaWxkcmVuKCksdGhpcy5sb2FkZWQoITApLHRoaXMuY2hpbGRyZW4uYWRkKGUpfSxoYXNDaGlsZHJlbjohMSxsZXZlbDpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLnBhcmVudE5vZGUoKSx0PTA7ZSYmZS5wYXJlbnROb2RlOyl0KyssZT1lLnBhcmVudE5vZGU/ZS5wYXJlbnROb2RlKCk6bnVsbDtyZXR1cm4gdH0sX3VwZGF0ZUNoaWxkcmVuRmllbGQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9jaGlsZHJlbk9wdGlvbnMuc2NoZW1hLmRhdGE7dGhpc1tlfHxcIml0ZW1zXCJdPXRoaXMuY2hpbGRyZW4uZGF0YSgpfSxfY2hpbGRyZW5Mb2FkZWQ6ZnVuY3Rpb24oKXt0aGlzLl9sb2FkZWQ9ITAsdGhpcy5fdXBkYXRlQ2hpbGRyZW5GaWVsZCgpfSxsb2FkOmZ1bmN0aW9uKCl7dmFyIGUsbj17fSxpPVwiX3F1ZXJ5XCI7dGhpcy5oYXNDaGlsZHJlbj8odGhpcy5faW5pdENoaWxkcmVuKCksZT10aGlzLmNoaWxkcmVuLG5bdGhpcy5pZEZpZWxkfHxcImlkXCJdPXRoaXMuaWQsdGhpcy5fbG9hZGVkfHwoZS5fZGF0YT10LGk9XCJyZWFkXCIpLGUub25lKHd0LG50KHRoaXMuX2NoaWxkcmVuTG9hZGVkLHRoaXMpKSxlW2ldKG4pKTp0aGlzLmxvYWRlZCghMCl9LHBhcmVudE5vZGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnBhcmVudCgpO3JldHVybiBlLnBhcmVudCgpfSxsb2FkZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10P3RoaXMuX2xvYWRlZDoodGhpcy5fbG9hZGVkPWUsdCl9LHNob3VsZFNlcmlhbGl6ZTpmdW5jdGlvbihlKXtyZXR1cm4gS3QuZm4uc2hvdWxkU2VyaWFsaXplLmNhbGwodGhpcyxlKSYmXCJjaGlsZHJlblwiIT09ZSYmXCJfbG9hZGVkXCIhPT1lJiZcImhhc0NoaWxkcmVuXCIhPT1lJiZcIl9jaGlsZHJlbk9wdGlvbnNcIiE9PWV9fSksSj1LLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt2YXIgdD1YLmRlZmluZSh7Y2hpbGRyZW46ZX0pO0suZm4uaW5pdC5jYWxsKHRoaXMsdHQoITAse30se3NjaGVtYTp7bW9kZWxCYXNlOnQsbW9kZWw6dH19LGUpKSx0aGlzLl9hdHRhY2hCdWJibGVIYW5kbGVycygpfSxfYXR0YWNoQnViYmxlSGFuZGxlcnM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2RhdGEuYmluZCh4dCxmdW5jdGlvbih0KXtlLnRyaWdnZXIoeHQsdCl9KX0scmVtb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5wYXJlbnROb2RlKCksaT10aGlzO3JldHVybiBuJiZuLl9pbml0Q2hpbGRyZW4mJihpPW4uY2hpbGRyZW4pLHQ9Sy5mbi5yZW1vdmUuY2FsbChpLGUpLG4mJiFpLmRhdGEoKS5sZW5ndGgmJihuLmhhc0NoaWxkcmVuPSExKSx0fSxzdWNjZXNzOkwoXCJzdWNjZXNzXCIpLGRhdGE6TChcImRhdGFcIiksaW5zZXJ0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5wYXJlbnQoKTtyZXR1cm4gbiYmbi5faW5pdENoaWxkcmVuJiYobi5oYXNDaGlsZHJlbj0hMCxuLl9pbml0Q2hpbGRyZW4oKSksSy5mbi5pbnNlcnQuY2FsbCh0aGlzLGUsdCl9LF9maW5kOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYTtpZihyPUsuZm5bZV0uY2FsbCh0aGlzLHQpKXJldHVybiByO2lmKG89dGhpcy5fZmxhdERhdGEodGhpcy5fZGF0YSkpZm9yKG49MCxpPW8ubGVuZ3RoO2k+bjtuKyspaWYoYT1vW25dLmNoaWxkcmVuLGEgaW5zdGFuY2VvZiBKJiYocj1hW2VdKHQpKSlyZXR1cm4gcn0sZ2V0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9maW5kKFwiZ2V0XCIsZSl9LGdldEJ5VWlkOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9maW5kKFwiZ2V0QnlVaWRcIixlKX19KSxKLmNyZWF0ZT1mdW5jdGlvbihlKXtlPWUmJmUucHVzaD97ZGF0YTplfTplO3ZhciB0PWV8fHt9LG49dC5kYXRhLGk9dC5maWVsZHMscj10Lmxpc3Q7cmV0dXJuIG4mJm4uX2RhdGFTb3VyY2U/bi5fZGF0YVNvdXJjZToobnx8IWl8fHQudHJhbnNwb3J0fHxyJiYobj1PKHIsaSkpLHQuZGF0YT1uLHQgaW5zdGFuY2VvZiBKP3Q6bmV3IEoodCkpfSxaPWR0Lk9ic2VydmFibGUuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXtkdC5PYnNlcnZhYmxlLmZuLmluaXQuY2FsbCh0aGlzKSx0aGlzLl9wcmVmZXRjaGluZz0hMSx0aGlzLmRhdGFTb3VyY2U9ZSx0aGlzLnByZWZldGNoPSFuO3ZhciBpPXRoaXM7ZS5iaW5kKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXtpLl9jaGFuZ2UoKX0pLGUuYmluZChcInJlc2V0XCIsZnVuY3Rpb24oKXtpLl9yZXNldCgpfSksdGhpcy5fc3luY1dpdGhEYXRhU291cmNlKCksdGhpcy5zZXRWaWV3U2l6ZSh0KX0sc2V0Vmlld1NpemU6ZnVuY3Rpb24oZSl7dGhpcy52aWV3U2l6ZT1lLHRoaXMuX3JlY2FsY3VsYXRlKCl9LGF0OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMucGFnZVNpemUsaT0hMDtyZXR1cm4gZT49dGhpcy50b3RhbCgpPyh0aGlzLnRyaWdnZXIoXCJlbmRyZWFjaGVkXCIse2luZGV4OmV9KSx0KTp0aGlzLnVzZVJhbmdlcz90aGlzLnVzZVJhbmdlcz8oKHRoaXMuZGF0YU9mZnNldD5lfHxlPj10aGlzLnNraXArbikmJihpPXRoaXMucmFuZ2UoTWF0aC5mbG9vcihlL24pKm4pKSxlPT09dGhpcy5wcmVmZXRjaFRocmVzaG9sZCYmdGhpcy5fcHJlZmV0Y2goKSxlPT09dGhpcy5taWRQYWdlVGhyZXNob2xkP3RoaXMucmFuZ2UodGhpcy5uZXh0TWlkUmFuZ2UsITApOmU9PT10aGlzLm5leHRQYWdlVGhyZXNob2xkP3RoaXMucmFuZ2UodGhpcy5uZXh0RnVsbFJhbmdlKTplPT09dGhpcy5wdWxsQmFja1RocmVzaG9sZCYmdGhpcy5yYW5nZSh0aGlzLm9mZnNldD09PXRoaXMuc2tpcD90aGlzLnByZXZpb3VzTWlkUmFuZ2U6dGhpcy5wcmV2aW91c0Z1bGxSYW5nZSksaT90aGlzLmRhdGFTb3VyY2UuYXQoZS10aGlzLmRhdGFPZmZzZXQpOih0aGlzLnRyaWdnZXIoXCJlbmRyZWFjaGVkXCIse2luZGV4OmV9KSxudWxsKSk6dDp0aGlzLmRhdGFTb3VyY2UudmlldygpW2VdfSxpbmRleE9mOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmRhdGFTb3VyY2UuZGF0YSgpLmluZGV4T2YoZSkrdGhpcy5kYXRhT2Zmc2V0fSx0b3RhbDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUludCh0aGlzLmRhdGFTb3VyY2UudG90YWwoKSwxMCl9LG5leHQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5wYWdlU2l6ZSxuPWUuc2tpcC1lLnZpZXdTaXplK3QsaT1QdC5tYXgoUHQuZmxvb3Iobi90KSwwKSp0O3RoaXMub2Zmc2V0PW4sdGhpcy5kYXRhU291cmNlLnByZWZldGNoKGksdCxmdW5jdGlvbigpe2UuX2dvVG9SYW5nZShuLCEwKX0pfSxyYW5nZTpmdW5jdGlvbihlLHQpe2lmKHRoaXMub2Zmc2V0PT09ZSlyZXR1cm4hMDt2YXIgbj10aGlzLGk9dGhpcy5wYWdlU2l6ZSxyPVB0Lm1heChQdC5mbG9vcihlL2kpLDApKmksbz10aGlzLmRhdGFTb3VyY2U7cmV0dXJuIHQmJihyKz1pKSxvLmluUmFuZ2UoZSxpKT8odGhpcy5vZmZzZXQ9ZSx0aGlzLl9yZWNhbGN1bGF0ZSgpLHRoaXMuX2dvVG9SYW5nZShlKSwhMCk6dGhpcy5wcmVmZXRjaD8oby5wcmVmZXRjaChyLGksZnVuY3Rpb24oKXtuLm9mZnNldD1lLG4uX3JlY2FsY3VsYXRlKCksbi5fZ29Ub1JhbmdlKGUsITApfSksITEpOiEwfSxzeW5jRGF0YVNvdXJjZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMub2Zmc2V0O3RoaXMub2Zmc2V0PW51bGwsdGhpcy5yYW5nZShlKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMudW5iaW5kKCl9LF9wcmVmZXRjaDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLnBhZ2VTaXplLG49dGhpcy5za2lwK3QsaT10aGlzLmRhdGFTb3VyY2U7aS5pblJhbmdlKG4sdCl8fHRoaXMuX3ByZWZldGNoaW5nfHwhdGhpcy5wcmVmZXRjaHx8KHRoaXMuX3ByZWZldGNoaW5nPSEwLHRoaXMudHJpZ2dlcihcInByZWZldGNoaW5nXCIse3NraXA6bix0YWtlOnR9KSxpLnByZWZldGNoKG4sdCxmdW5jdGlvbigpe2UuX3ByZWZldGNoaW5nPSExLGUudHJpZ2dlcihcInByZWZldGNoZWRcIix7c2tpcDpuLHRha2U6dH0pfSkpfSxfZ29Ub1JhbmdlOmZ1bmN0aW9uKGUsdCl7dGhpcy5vZmZzZXQ9PT1lJiYodGhpcy5kYXRhT2Zmc2V0PWUsdGhpcy5fZXhwYW5kaW5nPXQsdGhpcy5kYXRhU291cmNlLnJhbmdlKGUsdGhpcy5wYWdlU2l6ZSksdGhpcy5kYXRhU291cmNlLmVuYWJsZVJlcXVlc3RzSW5Qcm9ncmVzcygpKX0sX3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fc3luY1BlbmRpbmc9ITB9LF9jaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRhdGFTb3VyY2U7dGhpcy5sZW5ndGg9dGhpcy51c2VSYW5nZXM/ZS5sYXN0UmFuZ2UoKS5lbmQ6ZS52aWV3KCkubGVuZ3RoLHRoaXMuX3N5bmNQZW5kaW5nJiYodGhpcy5fc3luY1dpdGhEYXRhU291cmNlKCksdGhpcy5fcmVjYWxjdWxhdGUoKSx0aGlzLl9zeW5jUGVuZGluZz0hMSx0aGlzLnRyaWdnZXIoXCJyZXNldFwiLHtvZmZzZXQ6dGhpcy5vZmZzZXR9KSksdGhpcy50cmlnZ2VyKFwicmVzaXplXCIpLHRoaXMuX2V4cGFuZGluZyYmdGhpcy50cmlnZ2VyKFwiZXhwYW5kXCIpLGRlbGV0ZSB0aGlzLl9leHBhbmRpbmd9LF9zeW5jV2l0aERhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRhdGFTb3VyY2U7dGhpcy5fZmlyc3RJdGVtVWlkPWUuZmlyc3RJdGVtVWlkKCksdGhpcy5kYXRhT2Zmc2V0PXRoaXMub2Zmc2V0PWUuc2tpcCgpfHwwLHRoaXMucGFnZVNpemU9ZS5wYWdlU2l6ZSgpLHRoaXMudXNlUmFuZ2VzPWUub3B0aW9ucy5zZXJ2ZXJQYWdpbmd9LF9yZWNhbGN1bGF0ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucGFnZVNpemUsdD10aGlzLm9mZnNldCxuPXRoaXMudmlld1NpemUsaT1NYXRoLmNlaWwodC9lKSplO3RoaXMuc2tpcD1pLHRoaXMubWlkUGFnZVRocmVzaG9sZD1pK2UtMSx0aGlzLm5leHRQYWdlVGhyZXNob2xkPWkrbi0xLHRoaXMucHJlZmV0Y2hUaHJlc2hvbGQ9aStNYXRoLmZsb29yKGUvMyoyKSx0aGlzLnB1bGxCYWNrVGhyZXNob2xkPXRoaXMub2Zmc2V0LTEsdGhpcy5uZXh0TWlkUmFuZ2U9aStlLW4sdGhpcy5uZXh0RnVsbFJhbmdlPWksdGhpcy5wcmV2aW91c01pZFJhbmdlPXQtbix0aGlzLnByZXZpb3VzRnVsbFJhbmdlPWktZX19KSxldD1kdC5PYnNlcnZhYmxlLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7ZHQuT2JzZXJ2YWJsZS5mbi5pbml0LmNhbGwobiksdGhpcy5kYXRhU291cmNlPWUsdGhpcy5iYXRjaFNpemU9dCx0aGlzLl90b3RhbD0wLHRoaXMuYnVmZmVyPW5ldyBaKGUsMyp0KSx0aGlzLmJ1ZmZlci5iaW5kKHtlbmRyZWFjaGVkOmZ1bmN0aW9uKGUpe24udHJpZ2dlcihcImVuZHJlYWNoZWRcIix7aW5kZXg6ZS5pbmRleH0pfSxwcmVmZXRjaGluZzpmdW5jdGlvbihlKXtuLnRyaWdnZXIoXCJwcmVmZXRjaGluZ1wiLHtza2lwOmUuc2tpcCx0YWtlOmUudGFrZX0pfSxwcmVmZXRjaGVkOmZ1bmN0aW9uKGUpe24udHJpZ2dlcihcInByZWZldGNoZWRcIix7c2tpcDplLnNraXAsdGFrZTplLnRha2V9KX0scmVzZXQ6ZnVuY3Rpb24oKXtuLl90b3RhbD0wLG4udHJpZ2dlcihcInJlc2V0XCIpfSxyZXNpemU6ZnVuY3Rpb24oKXtuLl90b3RhbD1NYXRoLmNlaWwodGhpcy5sZW5ndGgvbi5iYXRjaFNpemUpLG4udHJpZ2dlcihcInJlc2l6ZVwiLHt0b3RhbDpuLnRvdGFsKCksb2Zmc2V0OnRoaXMub2Zmc2V0fSl9fSl9LHN5bmNEYXRhU291cmNlOmZ1bmN0aW9uKCl7dGhpcy5idWZmZXIuc3luY0RhdGFTb3VyY2UoKX0sYXQ6ZnVuY3Rpb24oZSl7dmFyIG4saSxyPXRoaXMuYnVmZmVyLG89ZSp0aGlzLmJhdGNoU2l6ZSxhPXRoaXMuYmF0Y2hTaXplLHM9W107Zm9yKHIub2Zmc2V0Pm8mJnIuYXQoci5vZmZzZXQtMSksaT0wO2E+aSYmKG49ci5hdChvK2kpLG4hPT10KTtpKyspcy5wdXNoKG4pO3JldHVybiBzfSx0b3RhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b3RhbH0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuYnVmZmVyLmRlc3Ryb3koKSx0aGlzLnVuYmluZCgpfX0pLHR0KCEwLGR0LmRhdGEse3JlYWRlcnM6e2pzb246WX0sUXVlcnk6byxEYXRhU291cmNlOkssSGllcmFyY2hpY2FsRGF0YVNvdXJjZTpKLE5vZGU6WCxPYnNlcnZhYmxlT2JqZWN0OnF0LE9ic2VydmFibGVBcnJheTpqdCxMYXp5T2JzZXJ2YWJsZUFycmF5Okd0LExvY2FsVHJhbnNwb3J0OkcsUmVtb3RlVHJhbnNwb3J0OnEsQ2FjaGU6JCxEYXRhUmVhZGVyOlksTW9kZWw6S3QsQnVmZmVyOlosQmF0Y2hCdWZmZXI6ZXR9KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKHQsbixpKXtyZXR1cm4gdi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXM7di5mbi5pbml0LmNhbGwoaSxlLmVsZW1lbnRbMF0sdCxuKSxpLndpZGdldD1lLGkuX2RhdGFCaW5kaW5nPU0oaS5kYXRhQmluZGluZyxpKSxpLl9kYXRhQm91bmQ9TShpLmRhdGFCb3VuZCxpKSxpLl9pdGVtQ2hhbmdlPU0oaS5pdGVtQ2hhbmdlLGkpfSxpdGVtQ2hhbmdlOmZ1bmN0aW9uKGUpe2EoZS5pdGVtWzBdLGUuZGF0YSx0aGlzLl9ucyhlLm5zKSxbZS5kYXRhXS5jb25jYXQodGhpcy5iaW5kaW5nc1t0XS5fcGFyZW50cygpKSl9LGRhdGFCaW5kaW5nOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLndpZGdldCxyPWUucmVtb3ZlZEl0ZW1zfHxpLml0ZW1zKCk7Zm9yKHQ9MCxuPXIubGVuZ3RoO24+dDt0KyspYyhyW3RdKX0sX25zOmZ1bmN0aW9uKHQpe3Q9dHx8eC51aTt2YXIgbj1beC51aSx4LmRhdGF2aXoudWkseC5tb2JpbGUudWldO3JldHVybiBuLnNwbGljZShlLmluQXJyYXkodCxuKSwxKSxuLnVuc2hpZnQodCkseC5yb2xlc0Zyb21OYW1lc3BhY2VzKG4pfSxkYXRhQm91bmQ6ZnVuY3Rpb24oZSl7e3ZhciBpLHIsbyxzLGw9dGhpcy53aWRnZXQsYz1lLmFkZGVkSXRlbXN8fGwuaXRlbXMoKSxkPWxbbl07ZC5ncm91cCgpfHxbXX1pZihjLmxlbmd0aClmb3Iobz1lLmFkZGVkRGF0YUl0ZW1zfHxkLmZsYXRWaWV3KCkscz10aGlzLmJpbmRpbmdzW3RdLl9wYXJlbnRzKCksaT0wLHI9by5sZW5ndGg7cj5pO2krKylhKGNbaV0sb1tpXSx0aGlzLl9ucyhlLm5zKSxbb1tpXV0uY29uY2F0KHMpKX0scmVmcmVzaDpmdW5jdGlvbihlKXt2YXIgcixvPXRoaXMsYT1vLndpZGdldDtlPWV8fHt9LGUuYWN0aW9ufHwoby5kZXN0cm95KCksYS5iaW5kKFwiZGF0YUJpbmRpbmdcIixvLl9kYXRhQmluZGluZyksYS5iaW5kKFwiZGF0YUJvdW5kXCIsby5fZGF0YUJvdW5kKSxhLmJpbmQoXCJpdGVtQ2hhbmdlXCIsby5faXRlbUNoYW5nZSkscj1vLmJpbmRpbmdzW3RdLmdldCgpLGFbbl1pbnN0YW5jZW9mIHguZGF0YS5EYXRhU291cmNlJiZhW25dIT1yJiYociBpbnN0YW5jZW9mIHguZGF0YS5EYXRhU291cmNlP2FbaV0ocik6ciYmci5fZGF0YVNvdXJjZT9hW2ldKHIuX2RhdGFTb3VyY2UpOmFbbl0uZGF0YShyKSkpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy53aWRnZXQ7ZS51bmJpbmQoXCJkYXRhQmluZGluZ1wiLHRoaXMuX2RhdGFCaW5kaW5nKSxlLnVuYmluZChcImRhdGFCb3VuZFwiLHRoaXMuX2RhdGFCb3VuZCksZS51bmJpbmQoXCJpdGVtQ2hhbmdlXCIsdGhpcy5faXRlbUNoYW5nZSl9fSl9ZnVuY3Rpb24gaShlLG4pe3ZhciBpPXguaW5pdFdpZGdldChlLHt9LG4pO3JldHVybiBpP25ldyB3KGkpOnR9ZnVuY3Rpb24gcihlKXt2YXIgdCxuLGksbyxhLHMsbCxjPXt9O2ZvcihsPWUubWF0Y2goYiksdD0wLG49bC5sZW5ndGg7bj50O3QrKylpPWxbdF0sbz1pLmluZGV4T2YoXCI6XCIpLGE9aS5zdWJzdHJpbmcoMCxvKSxzPWkuc3Vic3RyaW5nKG8rMSksXCJ7XCI9PXMuY2hhckF0KDApJiYocz1yKHMpKSxjW2FdPXM7cmV0dXJuIGN9ZnVuY3Rpb24gbyhlLHQsbil7dmFyIGkscj17fTtmb3IoaSBpbiBlKXJbaV09bmV3IG4odCxlW2ldKTtyZXR1cm4gcn1mdW5jdGlvbiBhKGUsdCxuLHMpe3ZhciBjLGQsdSxoPWUuZ2V0QXR0cmlidXRlKFwiZGF0YS1cIit4Lm5zK1wicm9sZVwiKSxwPWUuZ2V0QXR0cmlidXRlKFwiZGF0YS1cIit4Lm5zK1wiYmluZFwiKSx2PWUuY2hpbGRyZW4sXz1bXSx3PSEwLGI9e307aWYocz1zfHxbdF0sKGh8fHApJiZsKGUpLGgmJih1PWkoZSxuKSkscCYmKHA9cihwLnJlcGxhY2UoayxcIlwiKSksdXx8KGI9eC5wYXJzZU9wdGlvbnMoZSx7dGV4dEZpZWxkOlwiXCIsdmFsdWVGaWVsZDpcIlwiLHRlbXBsYXRlOlwiXCIsdmFsdWVVcGRhdGU6Qix2YWx1ZVByaW1pdGl2ZTohMSxhdXRvQmluZDohMH0pLGIucm9sZXM9bix1PW5ldyB5KGUsYikpLHUuc291cmNlPXQsZD1vKHAscyxmKSxiLnRlbXBsYXRlJiYoZC50ZW1wbGF0ZT1uZXcgbShzLFwiXCIsYi50ZW1wbGF0ZSkpLGQuY2xpY2smJihwLmV2ZW50cz1wLmV2ZW50c3x8e30scC5ldmVudHMuY2xpY2s9cC5jbGljayxkLmNsaWNrLmRlc3Ryb3koKSxkZWxldGUgZC5jbGljayksZC5zb3VyY2UmJih3PSExKSxwLmF0dHImJihkLmF0dHI9byhwLmF0dHIscyxmKSkscC5zdHlsZSYmKGQuc3R5bGU9byhwLnN0eWxlLHMsZikpLHAuZXZlbnRzJiYoZC5ldmVudHM9byhwLmV2ZW50cyxzLGcpKSx1LmJpbmQoZCkpLHUmJihlLmtlbmRvQmluZGluZ1RhcmdldD11KSx3JiZ2KXtmb3IoYz0wO3YubGVuZ3RoPmM7YysrKV9bY109dltjXTtmb3IoYz0wO18ubGVuZ3RoPmM7YysrKWEoX1tjXSx0LG4scyl9fWZ1bmN0aW9uIHModCxuKXt2YXIgaSxyLG8scz14LnJvbGVzRnJvbU5hbWVzcGFjZXMoW10uc2xpY2UuY2FsbChhcmd1bWVudHMsMikpO2ZvcihuPXgub2JzZXJ2YWJsZShuKSx0PWUodCksaT0wLHI9dC5sZW5ndGg7cj5pO2krKylvPXRbaV0sMT09PW8ubm9kZVR5cGUmJmEobyxuLHMpfWZ1bmN0aW9uIGwoZSl7dmFyIHQ9ZS5rZW5kb0JpbmRpbmdUYXJnZXQ7dCYmKHQuZGVzdHJveSgpLFI/ZGVsZXRlIGUua2VuZG9CaW5kaW5nVGFyZ2V0OmUucmVtb3ZlQXR0cmlidXRlP2UucmVtb3ZlQXR0cmlidXRlKFwia2VuZG9CaW5kaW5nVGFyZ2V0XCIpOmUua2VuZG9CaW5kaW5nVGFyZ2V0PW51bGwpfWZ1bmN0aW9uIGMoZSl7bChlKSxkKGUpfWZ1bmN0aW9uIGQoZSl7dmFyIHQsbixpPWUuY2hpbGRyZW47aWYoaSlmb3IodD0wLG49aS5sZW5ndGg7bj50O3QrKyljKGlbdF0pfWZ1bmN0aW9uIHUodCl7dmFyIG4saTtmb3IodD1lKHQpLG49MCxpPXQubGVuZ3RoO2k+bjtuKyspYyh0W25dKX1mdW5jdGlvbiBoKGUsdCl7dmFyIG49ZS5lbGVtZW50LGk9blswXS5rZW5kb0JpbmRpbmdUYXJnZXQ7aSYmcyhuLGkuc291cmNlLHQpfXZhciBwLGYsZyxtLHYsXyx5LHcsYixrLHg9d2luZG93LmtlbmRvLEM9eC5PYnNlcnZhYmxlLFM9eC5kYXRhLk9ic2VydmFibGVPYmplY3QsVD14LmRhdGEuT2JzZXJ2YWJsZUFycmF5LEQ9e30udG9TdHJpbmcsQT17fSxFPXguQ2xhc3MsTT1lLnByb3h5LFA9XCJ2YWx1ZVwiLEk9XCJzb3VyY2VcIix6PVwiZXZlbnRzXCIsRj1cImNoZWNrZWRcIixSPSEwLEI9XCJjaGFuZ2VcIjshZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtlLmlubmVyVGV4dCE9PXQ/cD1cImlubmVyVGV4dFwiOmUudGV4dENvbnRlbnQhPT10JiYocD1cInRleHRDb250ZW50XCIpO3RyeXtkZWxldGUgZS50ZXN0fWNhdGNoKG4pe1I9ITF9fSgpLGY9Qy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO0MuZm4uaW5pdC5jYWxsKG4pLG4uc291cmNlPWVbMF0sbi5wYXJlbnRzPWUsbi5wYXRoPXQsbi5kZXBlbmRlbmNpZXM9e30sbi5kZXBlbmRlbmNpZXNbdF09ITAsbi5vYnNlcnZhYmxlPW4uc291cmNlIGluc3RhbmNlb2YgQyxuLl9hY2Nlc3M9ZnVuY3Rpb24oZSl7bi5kZXBlbmRlbmNpZXNbZS5maWVsZF09ITB9LG4ub2JzZXJ2YWJsZSYmKG4uX2NoYW5nZT1mdW5jdGlvbihlKXtuLmNoYW5nZShlKX0sbi5zb3VyY2UuYmluZChCLG4uX2NoYW5nZSkpfSxfcGFyZW50czpmdW5jdGlvbigpe3ZhciB0LG49dGhpcy5wYXJlbnRzLGk9dGhpcy5nZXQoKTtyZXR1cm4gaSYmXCJmdW5jdGlvblwiPT10eXBlb2YgaS5wYXJlbnQmJih0PWkucGFyZW50KCksZS5pbkFycmF5KHQsbik8MCYmKG49W3RdLmNvbmNhdChuKSkpLG59LGNoYW5nZTpmdW5jdGlvbihlKXt2YXIgdCxuLGk9ZS5maWVsZCxyPXRoaXM7aWYoXCJ0aGlzXCI9PT1yLnBhdGgpci50cmlnZ2VyKEIsZSk7ZWxzZSBmb3IodCBpbiByLmRlcGVuZGVuY2llcylpZigwPT09dC5pbmRleE9mKGkpJiYobj10LmNoYXJBdChpLmxlbmd0aCksIW58fFwiLlwiPT09bnx8XCJbXCI9PT1uKSl7ci50cmlnZ2VyKEIsZSk7YnJlYWt9fSxzdGFydDpmdW5jdGlvbihlKXtlLmJpbmQoXCJnZXRcIix0aGlzLl9hY2Nlc3MpfSxzdG9wOmZ1bmN0aW9uKGUpe2UudW5iaW5kKFwiZ2V0XCIsdGhpcy5fYWNjZXNzKX0sZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxuPWUuc291cmNlLGk9MCxyPWUucGF0aCxvPW47aWYoIWUub2JzZXJ2YWJsZSlyZXR1cm4gbztmb3IoZS5zdGFydChlLnNvdXJjZSksbz1uLmdldChyKTtvPT09dCYmbjspbj1lLnBhcmVudHNbKytpXSxuIGluc3RhbmNlb2YgUyYmKG89bi5nZXQocikpO2lmKG89PT10KWZvcihuPWUuc291cmNlO289PT10JiZuOyluPW4ucGFyZW50KCksbiBpbnN0YW5jZW9mIFMmJihvPW4uZ2V0KHIpKTtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBvJiYoaT1yLmxhc3RJbmRleE9mKFwiLlwiKSxpPjAmJihuPW4uZ2V0KHIuc3Vic3RyaW5nKDAsaSkpKSxlLnN0YXJ0KG4pLG89biE9PWUuc291cmNlP28uY2FsbChuLGUuc291cmNlKTpvLmNhbGwobiksZS5zdG9wKG4pKSxuJiZuIT09ZS5zb3VyY2UmJihlLmN1cnJlbnRTb3VyY2U9bixuLnVuYmluZChCLGUuX2NoYW5nZSkuYmluZChCLGUuX2NoYW5nZSkpLGUuc3RvcChlLnNvdXJjZSksb30sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY3VycmVudFNvdXJjZXx8dGhpcy5zb3VyY2Usbj14LmdldHRlcih0aGlzLnBhdGgpKHQpO1wiZnVuY3Rpb25cIj09dHlwZW9mIG4/dCE9PXRoaXMuc291cmNlP24uY2FsbCh0LHRoaXMuc291cmNlLGUpOm4uY2FsbCh0LGUpOnQuc2V0KHRoaXMucGF0aCxlKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMub2JzZXJ2YWJsZSYmKHRoaXMuc291cmNlLnVuYmluZChCLHRoaXMuX2NoYW5nZSksdGhpcy5jdXJyZW50U291cmNlJiZ0aGlzLmN1cnJlbnRTb3VyY2UudW5iaW5kKEIsdGhpcy5fY2hhbmdlKSksdGhpcy51bmJpbmQoKX19KSxnPWYuZXh0ZW5kKHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuc291cmNlLG49dGhpcy5wYXRoLGk9MDtmb3IoZT10LmdldChuKTshZSYmdDspdD10aGlzLnBhcmVudHNbKytpXSx0IGluc3RhbmNlb2YgUyYmKGU9dC5nZXQobikpO3JldHVybiBNKGUsdCl9fSksbT1mLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcztmLmZuLmluaXQuY2FsbChpLGUsdCksaS50ZW1wbGF0ZT1ufSxyZW5kZXI6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHRoaXMuc3RhcnQodGhpcy5zb3VyY2UpLHQ9eC5yZW5kZXIodGhpcy50ZW1wbGF0ZSxlKSx0aGlzLnN0b3AodGhpcy5zb3VyY2UpLHR9fSksdj1FLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbil7dGhpcy5lbGVtZW50PWUsdGhpcy5iaW5kaW5ncz10LHRoaXMub3B0aW9ucz1ufSxiaW5kOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztlPXQ/ZVt0XTplLGUuYmluZChCLGZ1bmN0aW9uKGUpe24ucmVmcmVzaCh0fHxlKX0pLG4ucmVmcmVzaCh0KX0sZGVzdHJveTpmdW5jdGlvbigpe319KSxBLmF0dHI9di5leHRlbmQoe3JlZnJlc2g6ZnVuY3Rpb24oZSl7dGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShlLHRoaXMuYmluZGluZ3MuYXR0cltlXS5nZXQoKSl9fSksQS5zdHlsZT12LmV4dGVuZCh7cmVmcmVzaDpmdW5jdGlvbihlKXt0aGlzLmVsZW1lbnQuc3R5bGVbZV09dGhpcy5iaW5kaW5ncy5zdHlsZVtlXS5nZXQoKXx8XCJcIn19KSxBLmVuYWJsZWQ9di5leHRlbmQoe3JlZnJlc2g6ZnVuY3Rpb24oKXt0aGlzLmJpbmRpbmdzLmVuYWJsZWQuZ2V0KCk/dGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpOnRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLFwiZGlzYWJsZWRcIil9fSksQS5yZWFkb25seT12LmV4dGVuZCh7cmVmcmVzaDpmdW5jdGlvbigpe3RoaXMuYmluZGluZ3MucmVhZG9ubHkuZ2V0KCk/dGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcInJlYWRvbmx5XCIsXCJyZWFkb25seVwiKTp0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwicmVhZG9ubHlcIil9fSksQS5kaXNhYmxlZD12LmV4dGVuZCh7cmVmcmVzaDpmdW5jdGlvbigpe3RoaXMuYmluZGluZ3MuZGlzYWJsZWQuZ2V0KCk/dGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsXCJkaXNhYmxlZFwiKTp0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIil9fSksQS5ldmVudHM9di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3YuZm4uaW5pdC5jYWxsKHRoaXMsZSx0LG4pLHRoaXMuaGFuZGxlcnM9e319LHJlZnJlc2g6ZnVuY3Rpb24odCl7dmFyIG49ZSh0aGlzLmVsZW1lbnQpLGk9dGhpcy5iaW5kaW5ncy5ldmVudHNbdF0scj10aGlzLmhhbmRsZXJzW3RdO3ImJm4ub2ZmKHQscikscj10aGlzLmhhbmRsZXJzW3RdPWkuZ2V0KCksbi5vbih0LGkuc291cmNlLHIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIHQsbj1lKHRoaXMuZWxlbWVudCk7Zm9yKHQgaW4gdGhpcy5oYW5kbGVycyluLm9mZih0LHRoaXMuaGFuZGxlcnNbdF0pfX0pLEEudGV4dD12LmV4dGVuZCh7cmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuYmluZGluZ3MudGV4dC5nZXQoKTtudWxsPT1lJiYoZT1cIlwiKSx0aGlzLmVsZW1lbnRbcF09ZX19KSxBLnZpc2libGU9di5leHRlbmQoe3JlZnJlc2g6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheT10aGlzLmJpbmRpbmdzLnZpc2libGUuZ2V0KCk/XCJcIjpcIm5vbmVcIn19KSxBLmludmlzaWJsZT12LmV4dGVuZCh7cmVmcmVzaDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5PXRoaXMuYmluZGluZ3MuaW52aXNpYmxlLmdldCgpP1wibm9uZVwiOlwiXCJ9fSksQS5odG1sPXYuZXh0ZW5kKHtyZWZyZXNoOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LmlubmVySFRNTD10aGlzLmJpbmRpbmdzLmh0bWwuZ2V0KCl9fSksQS52YWx1ZT12LmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4saSl7di5mbi5pbml0LmNhbGwodGhpcyx0LG4saSksdGhpcy5fY2hhbmdlPU0odGhpcy5jaGFuZ2UsdGhpcyksdGhpcy5ldmVudE5hbWU9aS52YWx1ZVVwZGF0ZXx8QixlKHRoaXMuZWxlbWVudCkub24odGhpcy5ldmVudE5hbWUsdGhpcy5fY2hhbmdlKSx0aGlzLl9pbml0Q2hhbmdlPSExfSxjaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZSx0O3RoaXMuX2luaXRDaGFuZ2U9dGhpcy5ldmVudE5hbWUhPUIsZT10aGlzLmVsZW1lbnQudmFsdWUsdD10aGlzLmVsZW1lbnQudHlwZSxcImRhdGVcIj09dD9lPXgucGFyc2VEYXRlKGUsXCJ5eXl5LU1NLWRkXCIpOlwiZGF0ZXRpbWUtbG9jYWxcIj09dD9lPXgucGFyc2VEYXRlKGUsW1wieXl5eS1NTS1kZFRISDptbTpzc1wiLFwieXl5eS1NTS1kZFRISDptbVwiXSk6XCJudW1iZXJcIj09dCYmKGU9eC5wYXJzZUZsb2F0KGUpKSx0aGlzLmJpbmRpbmdzW1BdLnNldChlKSx0aGlzLl9pbml0Q2hhbmdlPSExfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGUsdDt0aGlzLl9pbml0Q2hhbmdlfHwoZT10aGlzLmJpbmRpbmdzW1BdLmdldCgpLG51bGw9PWUmJihlPVwiXCIpLHQ9dGhpcy5lbGVtZW50LnR5cGUsXCJkYXRlXCI9PXQ/ZT14LnRvU3RyaW5nKGUsXCJ5eXl5LU1NLWRkXCIpOlwiZGF0ZXRpbWUtbG9jYWxcIj09dCYmKGU9eC50b1N0cmluZyhlLFwieXl5eS1NTS1kZFRISDptbTpzc1wiKSksdGhpcy5lbGVtZW50LnZhbHVlPWUpLHRoaXMuX2luaXRDaGFuZ2U9ITF9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtlKHRoaXMuZWxlbWVudCkub2ZmKHRoaXMuZXZlbnROYW1lLHRoaXMuX2NoYW5nZSl9fSksQS5zb3VyY2U9di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3YuZm4uaW5pdC5jYWxsKHRoaXMsZSx0LG4pO3ZhciBpPXRoaXMuYmluZGluZ3Muc291cmNlLmdldCgpO2kgaW5zdGFuY2VvZiB4LmRhdGEuRGF0YVNvdXJjZSYmbi5hdXRvQmluZCE9PSExJiZpLmZldGNoKCl9LHJlZnJlc2g6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuYmluZGluZ3Muc291cmNlLmdldCgpO24gaW5zdGFuY2VvZiBUfHxuIGluc3RhbmNlb2YgeC5kYXRhLkRhdGFTb3VyY2U/KGU9ZXx8e30sXCJhZGRcIj09ZS5hY3Rpb24/dC5hZGQoZS5pbmRleCxlLml0ZW1zKTpcInJlbW92ZVwiPT1lLmFjdGlvbj90LnJlbW92ZShlLmluZGV4LGUuaXRlbXMpOlwiaXRlbWNoYW5nZVwiIT1lLmFjdGlvbiYmdC5yZW5kZXIoKSk6dC5yZW5kZXIoKX0sY29udGFpbmVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50O3JldHVyblwidGFibGVcIj09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYoZS50Qm9kaWVzWzBdfHxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0Ym9keVwiKSksZT1lLnRCb2RpZXNbMF0pLGV9LHRlbXBsYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLHQ9ZS50ZW1wbGF0ZSxuPXRoaXMuY29udGFpbmVyKCkubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4gdHx8KHQ9XCJzZWxlY3RcIj09bj9lLnZhbHVlRmllbGR8fGUudGV4dEZpZWxkP3guZm9ybWF0KCc8b3B0aW9uIHZhbHVlPVwiIzp7MH0jXCI+Izp7MX0jPC9vcHRpb24+JyxlLnZhbHVlRmllbGR8fGUudGV4dEZpZWxkLGUudGV4dEZpZWxkfHxlLnZhbHVlRmllbGQpOlwiPG9wdGlvbj4jOmRhdGEjPC9vcHRpb24+XCI6XCJ0Ym9keVwiPT1uP1wiPHRyPjx0ZD4jOmRhdGEjPC90ZD48L3RyPlwiOlwidWxcIj09bnx8XCJvbFwiPT1uP1wiPGxpPiM6ZGF0YSM8L2xpPlwiOlwiIzpkYXRhI1wiLHQ9eC50ZW1wbGF0ZSh0KSksdH0sYWRkOmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLHMsbD10aGlzLmNvbnRhaW5lcigpLGM9bC5jbG9uZU5vZGUoITEpLGQ9bC5jaGlsZHJlblt0XTtpZihlKGMpLmh0bWwoeC5yZW5kZXIodGhpcy50ZW1wbGF0ZSgpLG4pKSxjLmNoaWxkcmVuLmxlbmd0aClmb3IoaT10aGlzLmJpbmRpbmdzLnNvdXJjZS5fcGFyZW50cygpLHI9MCxvPW4ubGVuZ3RoO28+cjtyKyspcz1jLmNoaWxkcmVuWzBdLGwuaW5zZXJ0QmVmb3JlKHMsZHx8bnVsbCksYShzLG5bcl0sdGhpcy5vcHRpb25zLnJvbGVzLFtuW3JdXS5jb25jYXQoaSkpfSxyZW1vdmU6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcy5jb250YWluZXIoKTtmb3Iobj0wO3QubGVuZ3RoPm47bisrKWk9ci5jaGlsZHJlbltlXSxjKGkpLHIucmVtb3ZlQ2hpbGQoaSl9LHJlbmRlcjpmdW5jdGlvbigpe3ZhciB0LG4saSxyPXRoaXMuYmluZGluZ3Muc291cmNlLmdldCgpLG89dGhpcy5jb250YWluZXIoKSxzPXRoaXMudGVtcGxhdGUoKTtpZihyIGluc3RhbmNlb2YgeC5kYXRhLkRhdGFTb3VyY2UmJihyPXIudmlldygpKSxyIGluc3RhbmNlb2YgVHx8XCJbb2JqZWN0IEFycmF5XVwiPT09RC5jYWxsKHIpfHwocj1bcl0pLHRoaXMuYmluZGluZ3MudGVtcGxhdGUpe2lmKGQobyksZShvKS5odG1sKHRoaXMuYmluZGluZ3MudGVtcGxhdGUucmVuZGVyKHIpKSxvLmNoaWxkcmVuLmxlbmd0aClmb3IodD10aGlzLmJpbmRpbmdzLnNvdXJjZS5fcGFyZW50cygpLG49MCxpPXIubGVuZ3RoO2k+bjtuKyspYShvLmNoaWxkcmVuW25dLHJbbl0sdGhpcy5vcHRpb25zLnJvbGVzLFtyW25dXS5jb25jYXQodCkpfWVsc2UgZShvKS5odG1sKHgucmVuZGVyKHMscikpfX0pLEEuaW5wdXQ9e2NoZWNrZWQ6di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuLGkpe3YuZm4uaW5pdC5jYWxsKHRoaXMsdCxuLGkpLHRoaXMuX2NoYW5nZT1NKHRoaXMuY2hhbmdlLHRoaXMpLGUodGhpcy5lbGVtZW50KS5jaGFuZ2UodGhpcy5fY2hhbmdlKX0sY2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMuZWxlbWVudCxpPXRoaXMudmFsdWUoKTtcInJhZGlvXCI9PW4udHlwZT90aGlzLmJpbmRpbmdzW0ZdLnNldChpKTpcImNoZWNrYm94XCI9PW4udHlwZSYmKGU9dGhpcy5iaW5kaW5nc1tGXS5nZXQoKSxlIGluc3RhbmNlb2YgVD8oaT10aGlzLmVsZW1lbnQudmFsdWUsXCJvblwiIT09aSYmXCJvZmZcIiE9PWkmJih0PWUuaW5kZXhPZihpKSx0Pi0xP2Uuc3BsaWNlKHQsMSk6ZS5wdXNoKGkpKSk6dGhpcy5iaW5kaW5nc1tGXS5zZXQoaSkpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5iaW5kaW5nc1tGXS5nZXQoKSx0PWUsbj10aGlzLmVsZW1lbnQ7XCJjaGVja2JveFwiPT1uLnR5cGU/KHQgaW5zdGFuY2VvZiBUJiYoZT10aGlzLmVsZW1lbnQudmFsdWUsdC5pbmRleE9mKGUpPj0wJiYoZT0hMCkpLG4uY2hlY2tlZD1lPT09ITApOlwicmFkaW9cIj09bi50eXBlJiZudWxsIT1lJiZuLnZhbHVlPT09XCJcIitlJiYobi5jaGVja2VkPSEwKX0sdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnQsdD1lLnZhbHVlO3JldHVyblwiY2hlY2tib3hcIj09ZS50eXBlJiYodD1lLmNoZWNrZWQpLHR9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtlKHRoaXMuZWxlbWVudCkub2ZmKEIsdGhpcy5fY2hhbmdlKX19KX0sQS5zZWxlY3Q9e3ZhbHVlOnYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbixpKXt2LmZuLmluaXQuY2FsbCh0aGlzLHQsbixpKSx0aGlzLl9jaGFuZ2U9TSh0aGlzLmNoYW5nZSx0aGlzKSxlKHRoaXMuZWxlbWVudCkuY2hhbmdlKHRoaXMuX2NoYW5nZSl9LGNoYW5nZTpmdW5jdGlvbigpe3ZhciBlLG4saSxyLG8sYSxzPVtdLGw9dGhpcy5lbGVtZW50LGM9dGhpcy5vcHRpb25zLnZhbHVlRmllbGR8fHRoaXMub3B0aW9ucy50ZXh0RmllbGQsZD10aGlzLm9wdGlvbnMudmFsdWVQcmltaXRpdmU7Zm9yKG89MCxhPWwub3B0aW9ucy5sZW5ndGg7YT5vO28rKyluPWwub3B0aW9uc1tvXSxuLnNlbGVjdGVkJiYocj1uLmF0dHJpYnV0ZXMudmFsdWUscj1yJiZyLnNwZWNpZmllZD9uLnZhbHVlOm4udGV4dCxzLnB1c2gocikpO2lmKGMpZm9yKGU9dGhpcy5iaW5kaW5ncy5zb3VyY2UuZ2V0KCksZSBpbnN0YW5jZW9mIHguZGF0YS5EYXRhU291cmNlJiYoZT1lLnZpZXcoKSksaT0wO3MubGVuZ3RoPmk7aSsrKWZvcihvPTAsYT1lLmxlbmd0aDthPm87bysrKWlmKGVbb10uZ2V0KGMpPT1zW2ldKXtzW2ldPWVbb107YnJlYWt9cj10aGlzLmJpbmRpbmdzW1BdLmdldCgpLHIgaW5zdGFuY2VvZiBUP3Iuc3BsaWNlLmFwcGx5KHIsWzAsci5sZW5ndGhdLmNvbmNhdChzKSk6dGhpcy5iaW5kaW5nc1tQXS5zZXQoZHx8IShyIGluc3RhbmNlb2YgU3x8bnVsbD09PXJ8fHI9PT10KSYmYz9zWzBdLmdldChjKTpzWzBdKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlLHQsbixpPXRoaXMuZWxlbWVudCxyPWkub3B0aW9ucyxvPXRoaXMuYmluZGluZ3NbUF0uZ2V0KCksYT1vLHM9dGhpcy5vcHRpb25zLnZhbHVlRmllbGR8fHRoaXMub3B0aW9ucy50ZXh0RmllbGQsbD0hMTtmb3IoYSBpbnN0YW5jZW9mIFR8fChhPW5ldyBUKFtvXSkpLGkuc2VsZWN0ZWRJbmRleD0tMSxuPTA7YS5sZW5ndGg+bjtuKyspZm9yKG89YVtuXSxzJiZvIGluc3RhbmNlb2YgUyYmKG89by5nZXQocykpLGU9MDtyLmxlbmd0aD5lO2UrKyl0PXJbZV0udmFsdWUsXCJcIj09PXQmJlwiXCIhPT1vJiYodD1yW2VdLnRleHQpLHQ9PW8mJihyW2VdLnNlbGVjdGVkPSEwLGw9ITApfSxkZXN0cm95OmZ1bmN0aW9uKCl7ZSh0aGlzLmVsZW1lbnQpLm9mZihCLHRoaXMuX2NoYW5nZSl9fSl9LEEud2lkZ2V0PXtldmVudHM6di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3YuZm4uaW5pdC5jYWxsKHRoaXMsZS5lbGVtZW50WzBdLHQsbiksdGhpcy53aWRnZXQ9ZSx0aGlzLmhhbmRsZXJzPXt9fSxyZWZyZXNoOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuYmluZGluZ3MuZXZlbnRzW2VdLG49dGhpcy5oYW5kbGVyc1tlXTtuJiZ0aGlzLndpZGdldC51bmJpbmQoZSxuKSxuPXQuZ2V0KCksdGhpcy5oYW5kbGVyc1tlXT1mdW5jdGlvbihlKXtlLmRhdGE9dC5zb3VyY2UsbihlKSxlLmRhdGE9PT10LnNvdXJjZSYmZGVsZXRlIGUuZGF0YX0sdGhpcy53aWRnZXQuYmluZChlLHRoaXMuaGFuZGxlcnNbZV0pfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU7Zm9yKGUgaW4gdGhpcy5oYW5kbGVycyl0aGlzLndpZGdldC51bmJpbmQoZSx0aGlzLmhhbmRsZXJzW2VdKX19KSxjaGVja2VkOnYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXt2LmZuLmluaXQuY2FsbCh0aGlzLGUuZWxlbWVudFswXSx0LG4pLHRoaXMud2lkZ2V0PWUsdGhpcy5fY2hhbmdlPU0odGhpcy5jaGFuZ2UsdGhpcyksdGhpcy53aWRnZXQuYmluZChCLHRoaXMuX2NoYW5nZSl9LGNoYW5nZTpmdW5jdGlvbigpe3RoaXMuYmluZGluZ3NbRl0uc2V0KHRoaXMudmFsdWUoKSl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt0aGlzLndpZGdldC5jaGVjayh0aGlzLmJpbmRpbmdzW0ZdLmdldCgpPT09ITApfSx2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudCx0PWUudmFsdWU7cmV0dXJuKFwib25cIj09dHx8XCJvZmZcIj09dCkmJih0PWUuY2hlY2tlZCksdH0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMud2lkZ2V0LnVuYmluZChCLHRoaXMuX2NoYW5nZSl9fSksdmlzaWJsZTp2LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbil7di5mbi5pbml0LmNhbGwodGhpcyxlLmVsZW1lbnRbMF0sdCxuKSx0aGlzLndpZGdldD1lfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5iaW5kaW5ncy52aXNpYmxlLmdldCgpO3RoaXMud2lkZ2V0LndyYXBwZXJbMF0uc3R5bGUuZGlzcGxheT1lP1wiXCI6XCJub25lXCJ9fSksaW52aXNpYmxlOnYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXt2LmZuLmluaXQuY2FsbCh0aGlzLGUuZWxlbWVudFswXSx0LG4pLHRoaXMud2lkZ2V0PWV9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmJpbmRpbmdzLmludmlzaWJsZS5nZXQoKTt0aGlzLndpZGdldC53cmFwcGVyWzBdLnN0eWxlLmRpc3BsYXk9ZT9cIm5vbmVcIjpcIlwifX0pLGVuYWJsZWQ6di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3YuZm4uaW5pdC5jYWxsKHRoaXMsZS5lbGVtZW50WzBdLHQsbiksdGhpcy53aWRnZXQ9ZX0scmVmcmVzaDpmdW5jdGlvbigpe3RoaXMud2lkZ2V0LmVuYWJsZSYmdGhpcy53aWRnZXQuZW5hYmxlKHRoaXMuYmluZGluZ3MuZW5hYmxlZC5nZXQoKSl9fSksZGlzYWJsZWQ6di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3YuZm4uaW5pdC5jYWxsKHRoaXMsZS5lbGVtZW50WzBdLHQsbiksdGhpcy53aWRnZXQ9ZX0scmVmcmVzaDpmdW5jdGlvbigpe3RoaXMud2lkZ2V0LmVuYWJsZSYmdGhpcy53aWRnZXQuZW5hYmxlKCF0aGlzLmJpbmRpbmdzLmRpc2FibGVkLmdldCgpKX19KSxzb3VyY2U6bihcInNvdXJjZVwiLFwiZGF0YVNvdXJjZVwiLFwic2V0RGF0YVNvdXJjZVwiKSx2YWx1ZTp2LmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4saSl7di5mbi5pbml0LmNhbGwodGhpcyx0LmVsZW1lbnRbMF0sbixpKSx0aGlzLndpZGdldD10LHRoaXMuX2NoYW5nZT1lLnByb3h5KHRoaXMuY2hhbmdlLHRoaXMpLHRoaXMud2lkZ2V0LmZpcnN0KEIsdGhpcy5fY2hhbmdlKTt2YXIgcj10aGlzLmJpbmRpbmdzLnZhbHVlLmdldCgpO3RoaXMuX3ZhbHVlSXNPYnNlcnZhYmxlT2JqZWN0PSFpLnZhbHVlUHJpbWl0aXZlJiYobnVsbD09cnx8ciBpbnN0YW5jZW9mIFMpLHRoaXMuX3ZhbHVlSXNPYnNlcnZhYmxlQXJyYXk9ciBpbnN0YW5jZW9mIFQsdGhpcy5faW5pdENoYW5nZT0hMX0sY2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixvLGEscz10aGlzLndpZGdldC52YWx1ZSgpLGw9dGhpcy5vcHRpb25zLmRhdGFWYWx1ZUZpZWxkfHx0aGlzLm9wdGlvbnMuZGF0YVRleHRGaWVsZCxjPVwiW29iamVjdCBBcnJheV1cIj09PUQuY2FsbChzKSxkPXRoaXMuX3ZhbHVlSXNPYnNlcnZhYmxlT2JqZWN0LHU9W107aWYodGhpcy5faW5pdENoYW5nZT0hMCxsKWlmKHRoaXMuYmluZGluZ3Muc291cmNlJiYoYT10aGlzLmJpbmRpbmdzLnNvdXJjZS5nZXQoKSksXCJcIj09PXMmJihkfHx0aGlzLm9wdGlvbnMudmFsdWVQcmltaXRpdmUpKXM9bnVsbDtlbHNle2ZvcigoIWF8fGEgaW5zdGFuY2VvZiB4LmRhdGEuRGF0YVNvdXJjZSkmJihhPXRoaXMud2lkZ2V0LmRhdGFTb3VyY2UudmlldygpKSxjJiYodD1zLmxlbmd0aCx1PXMuc2xpY2UoMCkpLHI9MCxvPWEubGVuZ3RoO28+cjtyKyspaWYobj1hW3JdLGk9bi5nZXQobCksYyl7Zm9yKGU9MDt0PmU7ZSsrKWlmKGk9PXVbZV0pe3VbZV09bjticmVha319ZWxzZSBpZihpPT1zKXtzPWQ/bjppO2JyZWFrfXVbMF0mJihzPXRoaXMuX3ZhbHVlSXNPYnNlcnZhYmxlQXJyYXk/dTpkfHwhbD91WzBdOnVbMF0uZ2V0KGwpKX10aGlzLmJpbmRpbmdzLnZhbHVlLnNldChzKSx0aGlzLl9pbml0Q2hhbmdlPSExfSxyZWZyZXNoOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2luaXRDaGFuZ2Upe3ZhciBlLG49dGhpcy5vcHRpb25zLmRhdGFWYWx1ZUZpZWxkfHx0aGlzLm9wdGlvbnMuZGF0YVRleHRGaWVsZCxpPXRoaXMuYmluZGluZ3MudmFsdWUuZ2V0KCkscj0wLG89W107aWYoaT09PXQmJihpPW51bGwpLG4paWYoaSBpbnN0YW5jZW9mIFQpe2ZvcihlPWkubGVuZ3RoO2U+cjtyKyspb1tyXT1pW3JdLmdldChuKTtpPW99ZWxzZSBpIGluc3RhbmNlb2YgUyYmKGk9aS5nZXQobikpO3RoaXMud2lkZ2V0LnZhbHVlKGkpfXRoaXMuX2luaXRDaGFuZ2U9ITF9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLndpZGdldC51bmJpbmQoQix0aGlzLl9jaGFuZ2UpfX0pLGdhbnR0OntkZXBlbmRlbmNpZXM6bihcImRlcGVuZGVuY2llc1wiLFwiZGVwZW5kZW5jaWVzXCIsXCJzZXREZXBlbmRlbmNpZXNEYXRhU291cmNlXCIpfSxtdWx0aXNlbGVjdDp7dmFsdWU6di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuLGkpe3YuZm4uaW5pdC5jYWxsKHRoaXMsdC5lbGVtZW50WzBdLG4saSksdGhpcy53aWRnZXQ9dCx0aGlzLl9jaGFuZ2U9ZS5wcm94eSh0aGlzLmNoYW5nZSx0aGlzKSx0aGlzLndpZGdldC5maXJzdChCLHRoaXMuX2NoYW5nZSksdGhpcy5faW5pdENoYW5nZT0hMX0sY2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixvLGEscyxsLGM9dGhpcyxkPWMuYmluZGluZ3NbUF0uZ2V0KCksdT1jLm9wdGlvbnMudmFsdWVQcmltaXRpdmUsaD11P2Mud2lkZ2V0LnZhbHVlKCk6Yy53aWRnZXQuZGF0YUl0ZW1zKCkscD10aGlzLm9wdGlvbnMuZGF0YVZhbHVlRmllbGR8fHRoaXMub3B0aW9ucy5kYXRhVGV4dEZpZWxkO2lmKGg9aC5zbGljZSgwKSxjLl9pbml0Q2hhbmdlPSEwLGQgaW5zdGFuY2VvZiBUKXtmb3IoZT1bXSx0PWgubGVuZ3RoLG49MCxpPTAscj1kW25dLG89ITE7cjspe2ZvcihsPSExLGk9MDt0Pmk7aSsrKWlmKHU/bz1oW2ldPT1yOihzPWhbaV0scz1zLmdldD9zLmdldChwKTpzLG89cz09KHIuZ2V0P3IuZ2V0KHApOnIpKSxvKXtoLnNwbGljZShpLDEpLHQtPTEsbD0hMDticmVha31sP24rPTE6KGUucHVzaChyKSxfKGQsbiwxKSxhPW4pLHI9ZFtuXX1fKGQsZC5sZW5ndGgsMCxoKSxlLmxlbmd0aCYmZC50cmlnZ2VyKFwiY2hhbmdlXCIse2FjdGlvbjpcInJlbW92ZVwiLGl0ZW1zOmUsaW5kZXg6YX0pLGgubGVuZ3RoJiZkLnRyaWdnZXIoXCJjaGFuZ2VcIix7YWN0aW9uOlwiYWRkXCIsaXRlbXM6aCxpbmRleDpkLmxlbmd0aC0xfSl9ZWxzZSBjLmJpbmRpbmdzW1BdLnNldChoKTtjLl9pbml0Q2hhbmdlPSExfSxyZWZyZXNoOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2luaXRDaGFuZ2Upe3ZhciBlLG4saT10aGlzLm9wdGlvbnMuZGF0YVZhbHVlRmllbGR8fHRoaXMub3B0aW9ucy5kYXRhVGV4dEZpZWxkLHI9dGhpcy5iaW5kaW5ncy52YWx1ZS5nZXQoKSxvPTAsYT1bXTtpZihyPT09dCYmKHI9bnVsbCksaSlpZihyIGluc3RhbmNlb2YgVCl7Zm9yKGU9ci5sZW5ndGg7ZT5vO28rKyluPXJbb10sYVtvXT1uLmdldD9uLmdldChpKTpuO3I9YX1lbHNlIHIgaW5zdGFuY2VvZiBTJiYocj1yLmdldChpKSk7dGhpcy53aWRnZXQudmFsdWUocil9fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy53aWRnZXQudW5iaW5kKEIsdGhpcy5fY2hhbmdlKX19KX0sc2NoZWR1bGVyOntzb3VyY2U6bihcInNvdXJjZVwiLFwiZGF0YVNvdXJjZVwiLFwic2V0RGF0YVNvdXJjZVwiKS5leHRlbmQoe2RhdGFCb3VuZDpmdW5jdGlvbihlKXt7dmFyIHQsbixpLHIsbz10aGlzLndpZGdldCxzPW8udmlldygpLGw9ZS5hZGRlZEl0ZW1zfHxvLml0ZW1zKCksYz1vLmRhdGFTb3VyY2U7Yy5ncm91cCgpfHxbXX1pZihsLmxlbmd0aClmb3IoaT1lLmFkZGVkRGF0YUl0ZW1zfHxjLmV4cGFuZChzLnN0YXJ0RGF0ZSgpLHMuZW5kRGF0ZSgpKSxyPXRoaXMuYmluZGluZ3Muc291cmNlLl9wYXJlbnRzKCksdD0wLG49aS5sZW5ndGg7bj50O3QrKylhKGxbdF0saVt0XSx0aGlzLl9ucyhlLm5zKSxbaVt0XV0uY29uY2F0KHIpKX19KX19LF89ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbyxhLHMsbDtpZihpPWl8fFtdLG49bnx8MCxyPWkubGVuZ3RoLG89ZS5sZW5ndGgsYT1bXS5zbGljZS5jYWxsKGUsdCtuKSxzPWEubGVuZ3RoLHIpe2ZvcihyPXQrcixsPTA7cj50O3QrKyllW3RdPWlbbF0sbCsrO2UubGVuZ3RoPXJ9ZWxzZSBpZihuKWZvcihlLmxlbmd0aD10LG4rPXQ7bj50OylkZWxldGUgZVstLW5dO2lmKHMpe2ZvcihzPXQrcyxsPTA7cz50O3QrKyllW3RdPWFbbF0sbCsrO2UubGVuZ3RoPXN9Zm9yKHQ9ZS5sZW5ndGg7bz50OylkZWxldGUgZVt0XSx0Kyt9LHk9RS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLnRhcmdldD1lLHRoaXMub3B0aW9ucz10LHRoaXMudG9EZXN0cm95PVtdfSxiaW5kOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG89dGhpcy50YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxhPUFbb118fHt9O2Zvcih0IGluIGUpdD09UD9uPSEwOnQ9PUk/aT0hMDp0PT16P3I9ITA6dGhpcy5hcHBseUJpbmRpbmcodCxlLGEpO2kmJnRoaXMuYXBwbHlCaW5kaW5nKEksZSxhKSxuJiZ0aGlzLmFwcGx5QmluZGluZyhQLGUsYSksciYmdGhpcy5hcHBseUJpbmRpbmcoeixlLGEpfSxhcHBseUJpbmRpbmc6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI9bltlXXx8QVtlXSxvPXRoaXMudG9EZXN0cm95LGE9dFtlXTtpZihyKWlmKHI9bmV3IHIodGhpcy50YXJnZXQsdCx0aGlzLm9wdGlvbnMpLG8ucHVzaChyKSxhIGluc3RhbmNlb2YgZilyLmJpbmQoYSksby5wdXNoKGEpO2Vsc2UgZm9yKGkgaW4gYSlyLmJpbmQoYSxpKSxvLnB1c2goYVtpXSk7ZWxzZSBpZihcInRlbXBsYXRlXCIhPT1lKXRocm93IEVycm9yKFwiVGhlIFwiK2UrXCIgYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBcIit0aGlzLnRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpK1wiIGVsZW1lbnRcIil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy50b0Rlc3Ryb3k7Zm9yKGU9MCx0PW4ubGVuZ3RoO3Q+ZTtlKyspbltlXS5kZXN0cm95KCl9fSksdz15LmV4dGVuZCh7YmluZDpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMsaT0hMSxyPSExLG89QS53aWRnZXRbbi50YXJnZXQub3B0aW9ucy5uYW1lLnRvTG93ZXJDYXNlKCldfHx7fTtmb3IodCBpbiBlKXQ9PVA/aT0hMDp0PT1JP3I9ITA6bi5hcHBseUJpbmRpbmcodCxlLG8pO3ImJm4uYXBwbHlCaW5kaW5nKEksZSxvKSxpJiZuLmFwcGx5QmluZGluZyhQLGUsbyl9LGFwcGx5QmluZGluZzpmdW5jdGlvbihlLHQsbil7dmFyIGkscj1uW2VdfHxBLndpZGdldFtlXSxvPXRoaXMudG9EZXN0cm95LGE9dFtlXTtpZighcil0aHJvdyBFcnJvcihcIlRoZSBcIitlK1wiIGJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgXCIrdGhpcy50YXJnZXQub3B0aW9ucy5uYW1lK1wiIHdpZGdldFwiKTtpZihyPW5ldyByKHRoaXMudGFyZ2V0LHQsdGhpcy50YXJnZXQub3B0aW9ucyksby5wdXNoKHIpLGEgaW5zdGFuY2VvZiBmKXIuYmluZChhKSxvLnB1c2goYSk7ZWxzZSBmb3IoaSBpbiBhKXIuYmluZChhLGkpLG8ucHVzaChhW2ldKX19KSxiPS9bQS1aYS16MC05X1xcLV0rOihcXHsoW159XSopXFx9fFteLH1dKykvZyxrPS9cXHMvZyx4LnVuYmluZD11LHguYmluZD1zLHguZGF0YS5iaW5kZXJzPUEseC5kYXRhLkJpbmRlcj12LHgubm90aWZ5PWgseC5vYnNlcnZhYmxlPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgU3x8KGU9bmV3IFMoZSkpLGV9LHgub2JzZXJ2YWJsZUhpZXJhcmNoeT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3ZhciBuLGk7Zm9yKG49MDtlLmxlbmd0aD5uO24rKyllW25dLl9pbml0Q2hpbGRyZW4oKSxpPWVbbl0uY2hpbGRyZW4saS5mZXRjaCgpLGVbbl0uaXRlbXM9aS5kYXRhKCksdChlW25dLml0ZW1zKX12YXIgbj14LmRhdGEuSGllcmFyY2hpY2FsRGF0YVNvdXJjZS5jcmVhdGUoZSk7cmV0dXJuIG4uZmV0Y2goKSx0KG4uZGF0YSgpKSxuLl9kYXRhLl9kYXRhU291cmNlPW4sbi5fZGF0YX19KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXtyZXR1cm4gcGFyc2VJbnQoZSwxMCl9ZnVuY3Rpb24gaShlLHQpe3JldHVybiBuKGUuY3NzKHQpKX1mdW5jdGlvbiByKGUpe3ZhciB0LG49W107Zm9yKHQgaW4gZSluLnB1c2godCk7cmV0dXJuIG59ZnVuY3Rpb24gbyhlKXtmb3IodmFyIHQgaW4gZSktMSE9VS5pbmRleE9mKHQpJiYtMT09Vy5pbmRleE9mKHQpJiZkZWxldGUgZVt0XTtyZXR1cm4gZX1mdW5jdGlvbiBhKGUsdCl7dmFyIG4saSxyLG8sYT1bXSxzPXt9O2ZvcihpIGluIHQpbj1pLnRvTG93ZXJDYXNlKCksbz1QJiYtMSE9VS5pbmRleE9mKG4pLCFFLmhhc0hXM0QmJm8mJi0xPT1XLmluZGV4T2Yobik/ZGVsZXRlIHRbaV06KHI9dFtpXSxvP2EucHVzaChpK1wiKFwiK3IrXCIpXCIpOnNbaV09cik7cmV0dXJuIGEubGVuZ3RoJiYoc1tzdF09YS5qb2luKFwiIFwiKSksc31mdW5jdGlvbiBzKGUsdCl7dmFyIGkscixvO3JldHVybiBQPyhpPWUuY3NzKHN0KSxpPT1LP1wic2NhbGVcIj09dD8xOjA6KHI9aS5tYXRjaChSZWdFeHAodCtcIlxcXFxzKlxcXFwoKFtcXFxcZFxcXFx3XFxcXC5dKylcIikpLG89MCxyP289bihyWzFdKToocj1pLm1hdGNoKEIpfHxbMCwwLDAsMCwwXSx0PXQudG9Mb3dlckNhc2UoKSxPLnRlc3QodCk/bz1wYXJzZUZsb2F0KHJbM10vclsyXSk6XCJ0cmFuc2xhdGV5XCI9PXQ/bz1wYXJzZUZsb2F0KHJbNF0vclsyXSk6XCJzY2FsZVwiPT10P289cGFyc2VGbG9hdChyWzJdKTpcInJvdGF0ZVwiPT10JiYobz1wYXJzZUZsb2F0KE1hdGguYXRhbjIoclsyXSxyWzFdKSkpKSxvKSk6cGFyc2VGbG9hdChlLmNzcyh0KSl9ZnVuY3Rpb24gbChlKXtyZXR1cm4gZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStlLnN1YnN0cmluZygxKX1mdW5jdGlvbiBjKGUsdCl7dmFyIG49Zi5leHRlbmQodCksaT1uLnByb3RvdHlwZS5kaXJlY3Rpb25zO1NbbChlKV09bixTLkVsZW1lbnQucHJvdG90eXBlW2VdPWZ1bmN0aW9uKGUsdCxpLHIpe3JldHVybiBuZXcgbih0aGlzLmVsZW1lbnQsZSx0LGkscil9LFQoaSxmdW5jdGlvbih0LGkpe1MuRWxlbWVudC5wcm90b3R5cGVbZStsKGkpXT1mdW5jdGlvbihlLHQscil7cmV0dXJuIG5ldyBuKHRoaXMuZWxlbWVudCxpLGUsdCxyKX19KX1mdW5jdGlvbiBkKGUsbixpLHIpe2MoZSx7ZGlyZWN0aW9uczptLHN0YXJ0VmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3N0YXJ0VmFsdWU9ZSx0aGlzfSxlbmRWYWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZW5kVmFsdWU9ZSx0aGlzfSxzaG91bGRIaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Nob3VsZEhpZGV9LHByZXBhcmU6ZnVuY3Rpb24oZSxvKXt2YXIgYSxzLGw9dGhpcyxjPVwib3V0XCI9PT10aGlzLl9kaXJlY3Rpb24sZD1sLmVsZW1lbnQuZGF0YShuKSx1PSEoaXNOYU4oZCl8fGQ9PWkpO2E9dT9kOnQhPT10aGlzLl9zdGFydFZhbHVlP3RoaXMuX3N0YXJ0VmFsdWU6Yz9pOnIscz10IT09dGhpcy5fZW5kVmFsdWU/dGhpcy5fZW5kVmFsdWU6Yz9yOmksdGhpcy5fcmV2ZXJzZT8oZVtuXT1zLG9bbl09YSk6KGVbbl09YSxvW25dPXMpLGwuX3Nob3VsZEhpZGU9b1tuXT09PXJ9fSl9ZnVuY3Rpb24gdShlLHQpe3ZhciBuPUMuZGlyZWN0aW9uc1t0XS52ZXJ0aWNhbCxpPWVbbj9KOlhdKCkvMitcInB4XCI7cmV0dXJuIF9bdF0ucmVwbGFjZShcIiRzaXplXCIsaSl9dmFyIGgscCxmLGcsbSx2LF8seSx3LGIsayx4LEM9d2luZG93LmtlbmRvLFM9Qy5lZmZlY3RzLFQ9ZS5lYWNoLEQ9ZS5leHRlbmQsQT1lLnByb3h5LEU9Qy5zdXBwb3J0LE09RS5icm93c2VyLFA9RS50cmFuc2Zvcm1zLEk9RS50cmFuc2l0aW9ucyx6PXtzY2FsZTowLHNjYWxleDowLHNjYWxleTowLHNjYWxlM2Q6MH0sRj17dHJhbnNsYXRlOjAsdHJhbnNsYXRleDowLHRyYW5zbGF0ZXk6MCx0cmFuc2xhdGUzZDowfSxSPXQhPT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuem9vbSYmIVAsQj0vbWF0cml4Mz9kP1xccypcXCguKixcXHMqKFtcXGRcXC5cXC1dKylcXHcqPyxcXHMqKFtcXGRcXC5cXC1dKylcXHcqPyxcXHMqKFtcXGRcXC5cXC1dKylcXHcqPyxcXHMqKFtcXGRcXC5cXC1dKylcXHcqPy9pLEw9L14oLT9bXFxkXFwuXFwtXSspP1tcXHdcXHNdKiw/XFxzKigtP1tcXGRcXC5cXC1dKyk/W1xcd1xcc10qL2ksTz0vdHJhbnNsYXRleD8kL2ksSD0vKHpvb218ZmFkZXxleHBhbmQpKFxcdyspLyxOPS8oem9vbXxmYWRlfGV4cGFuZCkvLFY9L1t4eV0kL2ksVT1bXCJwZXJzcGVjdGl2ZVwiLFwicm90YXRlXCIsXCJyb3RhdGV4XCIsXCJyb3RhdGV5XCIsXCJyb3RhdGV6XCIsXCJyb3RhdGUzZFwiLFwic2NhbGVcIixcInNjYWxleFwiLFwic2NhbGV5XCIsXCJzY2FsZXpcIixcInNjYWxlM2RcIixcInNrZXdcIixcInNrZXd4XCIsXCJza2V3eVwiLFwidHJhbnNsYXRlXCIsXCJ0cmFuc2xhdGV4XCIsXCJ0cmFuc2xhdGV5XCIsXCJ0cmFuc2xhdGV6XCIsXCJ0cmFuc2xhdGUzZFwiLFwibWF0cml4XCIsXCJtYXRyaXgzZFwiXSxXPVtcInJvdGF0ZVwiLFwic2NhbGVcIixcInNjYWxleFwiLFwic2NhbGV5XCIsXCJza2V3XCIsXCJza2V3eFwiLFwic2tld3lcIixcInRyYW5zbGF0ZVwiLFwidHJhbnNsYXRleFwiLFwidHJhbnNsYXRleVwiLFwibWF0cml4XCJdLGo9e3JvdGF0ZTpcImRlZ1wiLHNjYWxlOlwiXCIsc2tldzpcInB4XCIsdHJhbnNsYXRlOlwicHhcIn0sRz1QLmNzcyxxPU1hdGgucm91bmQsJD1cIlwiLFk9XCJweFwiLEs9XCJub25lXCIsUT1cImF1dG9cIixYPVwid2lkdGhcIixKPVwiaGVpZ2h0XCIsWj1cImhpZGRlblwiLGV0PVwib3JpZ2luXCIsdHQ9XCJhYm9ydElkXCIsbnQ9XCJvdmVyZmxvd1wiLGl0PVwidHJhbnNsYXRlXCIscnQ9XCJwb3NpdGlvblwiLG90PVwiY29tcGxldGVDYWxsYmFja1wiLGF0PUcrXCJ0cmFuc2l0aW9uXCIsc3Q9RytcInRyYW5zZm9ybVwiLGx0PUcrXCJiYWNrZmFjZS12aXNpYmlsaXR5XCIsY3Q9RytcInBlcnNwZWN0aXZlXCIsZHQ9XCIxNTAwcHhcIix1dD1cInBlcnNwZWN0aXZlKFwiK2R0K1wiKVwiLGh0PXtsZWZ0OntyZXZlcnNlOlwicmlnaHRcIixwcm9wZXJ0eTpcImxlZnRcIix0cmFuc2l0aW9uOlwidHJhbnNsYXRleFwiLHZlcnRpY2FsOiExLG1vZGlmaWVyOi0xfSxyaWdodDp7cmV2ZXJzZTpcImxlZnRcIixwcm9wZXJ0eTpcImxlZnRcIix0cmFuc2l0aW9uOlwidHJhbnNsYXRleFwiLHZlcnRpY2FsOiExLG1vZGlmaWVyOjF9LGRvd246e3JldmVyc2U6XCJ1cFwiLHByb3BlcnR5OlwidG9wXCIsdHJhbnNpdGlvbjpcInRyYW5zbGF0ZXlcIix2ZXJ0aWNhbDohMCxtb2RpZmllcjoxfSx1cDp7cmV2ZXJzZTpcImRvd25cIixwcm9wZXJ0eTpcInRvcFwiLHRyYW5zaXRpb246XCJ0cmFuc2xhdGV5XCIsdmVydGljYWw6ITAsbW9kaWZpZXI6LTF9LHRvcDp7cmV2ZXJzZTpcImJvdHRvbVwifSxib3R0b206e3JldmVyc2U6XCJ0b3BcIn0sXCJpblwiOntyZXZlcnNlOlwib3V0XCIsbW9kaWZpZXI6LTF9LG91dDp7cmV2ZXJzZTpcImluXCIsbW9kaWZpZXI6MX0sdmVydGljYWw6e3JldmVyc2U6XCJ2ZXJ0aWNhbFwifSxob3Jpem9udGFsOntyZXZlcnNlOlwiaG9yaXpvbnRhbFwifX07Qy5kaXJlY3Rpb25zPWh0LEQoZS5mbix7a2VuZG9TdG9wOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIEk/Uy5zdG9wUXVldWUodGhpcyxlfHwhMSx0fHwhMSk6dGhpcy5zdG9wKGUsdCl9fSksUCYmIUkmJihUKFcsZnVuY3Rpb24obixpKXtlLmZuW2ldPWZ1bmN0aW9uKG4pe2lmKHQ9PT1uKXJldHVybiBzKHRoaXMsaSk7dmFyIHI9ZSh0aGlzKVswXSxvPWkrXCIoXCIrbitqW2kucmVwbGFjZShWLFwiXCIpXStcIilcIjtyZXR1cm4tMT09ci5zdHlsZS5jc3NUZXh0LmluZGV4T2Yoc3QpP2UodGhpcykuY3NzKHN0LG8pOnIuc3R5bGUuY3NzVGV4dD1yLnN0eWxlLmNzc1RleHQucmVwbGFjZShSZWdFeHAoaStcIlxcXFwoLio/XFxcXClcIixcImlcIiksbyksdGhpc30sZS5meC5zdGVwW2ldPWZ1bmN0aW9uKHQpe2UodC5lbGVtKVtpXSh0Lm5vdyl9fSksaD1lLmZ4LnByb3RvdHlwZS5jdXIsZS5meC5wcm90b3R5cGUuY3VyPWZ1bmN0aW9uKCl7cmV0dXJuLTEhPVcuaW5kZXhPZih0aGlzLnByb3ApP3BhcnNlRmxvYXQoZSh0aGlzLmVsZW0pW3RoaXMucHJvcF0oKSk6aC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KSxDLnRvZ2dsZUNsYXNzPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB0JiYodD10LnNwbGl0KFwiIFwiKSxJJiYobj1EKHtleGNsdXNpdmU6XCJhbGxcIixkdXJhdGlvbjo0MDAsZWFzZTpcImVhc2Utb3V0XCJ9LG4pLGUuY3NzKGF0LG4uZXhjbHVzaXZlK1wiIFwiK24uZHVyYXRpb24rXCJtcyBcIituLmVhc2UpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLmNzcyhhdCxcIlwiKS5jc3MoSil9LG4uZHVyYXRpb24pKSxUKHQsZnVuY3Rpb24odCxuKXtlLnRvZ2dsZUNsYXNzKG4saSl9KSksZX0sQy5wYXJzZUVmZmVjdHM9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZT9UKGUuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGUsaSl7dmFyIHI9IU4udGVzdChpKSxvPWkucmVwbGFjZShILGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdCtcIjpcIituLnRvTG93ZXJDYXNlKCl9KSxhPW8uc3BsaXQoXCI6XCIpLHM9YVsxXSxsPXt9O2EubGVuZ3RoPjEmJihsLmRpcmVjdGlvbj10JiZyP2h0W3NdLnJldmVyc2U6cyksblthWzBdXT1sfSk6VChlLGZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMuZGlyZWN0aW9uO2kmJnQmJiFOLnRlc3QoZSkmJih0aGlzLmRpcmVjdGlvbj1odFtpXS5yZXZlcnNlKSxuW2VdPXRoaXN9KSxufSxJJiZEKFMse3RyYW5zaXRpb246ZnVuY3Rpb24odCxuLGkpe3ZhciBvLHMsbCxjLGQ9MCx1PXQuZGF0YShcImtleXNcIil8fFtdO2k9RCh7ZHVyYXRpb246MjAwLGVhc2U6XCJlYXNlLW91dFwiLGNvbXBsZXRlOm51bGwsZXhjbHVzaXZlOlwiYWxsXCJ9LGkpLGw9ITEsYz1mdW5jdGlvbigpe2x8fChsPSEwLHMmJihjbGVhclRpbWVvdXQocykscz1udWxsKSx0LnJlbW92ZURhdGEodHQpLmRlcXVldWUoKS5jc3MoYXQsXCJcIikuY3NzKGF0KSxpLmNvbXBsZXRlLmNhbGwodCkpfSxpLmR1cmF0aW9uPWUuZng/ZS5meC5zcGVlZHNbaS5kdXJhdGlvbl18fGkuZHVyYXRpb246aS5kdXJhdGlvbixvPWEodCxuKSxlLm1lcmdlKHUscihvKSksdC5kYXRhKFwia2V5c1wiLGUudW5pcXVlKHUpKS5oZWlnaHQoKSx0LmNzcyhhdCxpLmV4Y2x1c2l2ZStcIiBcIitpLmR1cmF0aW9uK1wibXMgXCIraS5lYXNlKS5jc3MoYXQpLHQuY3NzKG8pLmNzcyhzdCksSS5ldmVudCYmKHQub25lKEkuZXZlbnQsYyksMCE9PWkuZHVyYXRpb24mJihkPTUwMCkpLHM9c2V0VGltZW91dChjLGkuZHVyYXRpb24rZCksdC5kYXRhKHR0LHMpLHQuZGF0YShvdCxjKVxyXG59LHN0b3BRdWV1ZTpmdW5jdGlvbihlLHQsbil7dmFyIGkscj1lLmRhdGEoXCJrZXlzXCIpLG89IW4mJnIsYT1lLmRhdGEob3QpO3JldHVybiBvJiYoaT1DLmdldENvbXB1dGVkU3R5bGVzKGVbMF0scikpLGEmJmEoKSxvJiZlLmNzcyhpKSxlLnJlbW92ZURhdGEoXCJrZXlzXCIpLnN0b3AodCl9fSkscD1DLkNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7bi5lbGVtZW50PWUsbi5lZmZlY3RzPVtdLG4ub3B0aW9ucz10LG4ucmVzdG9yZT1bXX0scnVuOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixzLGwsYyxkLHU9dGhpcyxoPXQubGVuZ3RoLHA9dS5lbGVtZW50LGY9dS5vcHRpb25zLGc9ZS5EZWZlcnJlZCgpLG09e30sdj17fTtmb3IodS5lZmZlY3RzPXQsZy50aGVuKGUucHJveHkodSxcImNvbXBsZXRlXCIpKSxwLmRhdGEoXCJhbmltYXRpbmdcIiwhMCksaT0wO2g+aTtpKyspZm9yKG49dFtpXSxuLnNldFJldmVyc2UoZi5yZXZlcnNlKSxuLnNldE9wdGlvbnMoZiksdS5hZGRSZXN0b3JlUHJvcGVydGllcyhuLnJlc3RvcmUpLG4ucHJlcGFyZShtLHYpLGw9bi5jaGlsZHJlbigpLHI9MCxjPWwubGVuZ3RoO2M+cjtyKyspbFtyXS5kdXJhdGlvbihmLmR1cmF0aW9uKS5ydW4oKTtmb3IoZCBpbiBmLmVmZmVjdHMpRCh2LGYuZWZmZWN0c1tkXS5wcm9wZXJ0aWVzKTtmb3IocC5pcyhcIjp2aXNpYmxlXCIpfHxEKG0se2Rpc3BsYXk6cC5kYXRhKFwib2xkZGlzcGxheVwiKXx8XCJibG9ja1wifSksUCYmIWYucmVzZXQmJihzPXAuZGF0YShcInRhcmdldFRyYW5zZm9ybVwiKSxzJiYobT1EKHMsbSkpKSxtPWEocCxtKSxQJiYhSSYmKG09byhtKSkscC5jc3MobSkuY3NzKHN0KSxpPTA7aD5pO2krKyl0W2ldLnNldHVwKCk7cmV0dXJuIGYuaW5pdCYmZi5pbml0KCkscC5kYXRhKFwidGFyZ2V0VHJhbnNmb3JtXCIsdiksUy5hbmltYXRlKHAsdixEKHt9LGYse2NvbXBsZXRlOmcucmVzb2x2ZX0pKSxnLnByb21pc2UoKX0sc3RvcDpmdW5jdGlvbigpe2UodGhpcy5lbGVtZW50KS5rZW5kb1N0b3AoITAsITApfSxhZGRSZXN0b3JlUHJvcGVydGllczpmdW5jdGlvbihlKXtmb3IodmFyIHQsbj10aGlzLmVsZW1lbnQsaT0wLHI9ZS5sZW5ndGg7cj5pO2krKyl0PWVbaV0sdGhpcy5yZXN0b3JlLnB1c2godCksbi5kYXRhKHQpfHxuLmRhdGEodCxuLmNzcyh0KSl9LHJlc3RvcmVDYWxsYmFjazpmdW5jdGlvbigpe3ZhciBlLHQsbixpPXRoaXMuZWxlbWVudDtmb3IoZT0wLHQ9dGhpcy5yZXN0b3JlLmxlbmd0aDt0PmU7ZSsrKW49dGhpcy5yZXN0b3JlW2VdLGkuY3NzKG4saS5kYXRhKG4pKX0sY29tcGxldGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49MCxpPXQuZWxlbWVudCxyPXQub3B0aW9ucyxvPXQuZWZmZWN0cyxhPW8ubGVuZ3RoO2ZvcihpLnJlbW92ZURhdGEoXCJhbmltYXRpbmdcIikuZGVxdWV1ZSgpLHIuaGlkZSYmaS5kYXRhKFwib2xkZGlzcGxheVwiLGkuY3NzKFwiZGlzcGxheVwiKSkuaGlkZSgpLHRoaXMucmVzdG9yZUNhbGxiYWNrKCksUiYmIVAmJnNldFRpbWVvdXQoZS5wcm94eSh0aGlzLFwicmVzdG9yZUNhbGxiYWNrXCIpLDApO2E+bjtuKyspb1tuXS50ZWFyZG93bigpO3IuY29tcGxldGVDYWxsYmFjayYmci5jb21wbGV0ZUNhbGxiYWNrKGkpfX0pLFMucHJvbWlzZT1mdW5jdGlvbihlLHQpe3ZhciBuLGkscixvPVtdLGE9bmV3IHAoZSx0KSxzPUMucGFyc2VFZmZlY3RzKHQuZWZmZWN0cyk7dC5lZmZlY3RzPXM7Zm9yKHIgaW4gcyluPVNbbChyKV0sbiYmKGk9bmV3IG4oZSxzW3JdLmRpcmVjdGlvbiksby5wdXNoKGkpKTtvWzBdP2EucnVuKG8pOihlLmlzKFwiOnZpc2libGVcIil8fGUuY3NzKHtkaXNwbGF5OmUuZGF0YShcIm9sZGRpc3BsYXlcIil8fFwiYmxvY2tcIn0pLmNzcyhcImRpc3BsYXlcIiksdC5pbml0JiZ0LmluaXQoKSxlLmRlcXVldWUoKSxhLmNvbXBsZXRlKCkpfSxEKFMse2FuaW1hdGU6ZnVuY3Rpb24obixyLGEpe3ZhciBzPWEudHJhbnNpdGlvbiE9PSExO2RlbGV0ZSBhLnRyYW5zaXRpb24sSSYmXCJ0cmFuc2l0aW9uXCJpbiBTJiZzP1MudHJhbnNpdGlvbihuLHIsYSk6UD9uLmFuaW1hdGUobyhyKSx7cXVldWU6ITEsc2hvdzohMSxoaWRlOiExLGR1cmF0aW9uOmEuZHVyYXRpb24sY29tcGxldGU6YS5jb21wbGV0ZX0pOm4uZWFjaChmdW5jdGlvbigpe3ZhciBuPWUodGhpcyksbz17fTtUKFUsZnVuY3Rpb24oZSxhKXt2YXIgcyxsLGMsZCx1LGgscCxmPXI/clthXStcIiBcIjpudWxsO2YmJihsPXIsYSBpbiB6JiZyW2FdIT09dD8ocz1mLm1hdGNoKEwpLFAmJkQobCx7c2NhbGU6K3NbMF19KSk6YSBpbiBGJiZyW2FdIT09dCYmKGM9bi5jc3MocnQpLGQ9XCJhYnNvbHV0ZVwiPT1jfHxcImZpeGVkXCI9PWMsbi5kYXRhKGl0KXx8KGQ/bi5kYXRhKGl0LHt0b3A6aShuLFwidG9wXCIpfHwwLGxlZnQ6aShuLFwibGVmdFwiKXx8MCxib3R0b206aShuLFwiYm90dG9tXCIpLHJpZ2h0OmkobixcInJpZ2h0XCIpfSk6bi5kYXRhKGl0LHt0b3A6aShuLFwibWFyZ2luVG9wXCIpfHwwLGxlZnQ6aShuLFwibWFyZ2luTGVmdFwiKXx8MH0pKSx1PW4uZGF0YShpdCkscz1mLm1hdGNoKEwpLHMmJihoPWE9PWl0K1wieVwiPzA6K3NbMV0scD1hPT1pdCtcInlcIj8rc1sxXTorc1syXSxkPyhpc05hTih1LnJpZ2h0KT9pc05hTihoKXx8RChsLHtsZWZ0OnUubGVmdCtofSk6aXNOYU4oaCl8fEQobCx7cmlnaHQ6dS5yaWdodC1ofSksaXNOYU4odS5ib3R0b20pP2lzTmFOKHApfHxEKGwse3RvcDp1LnRvcCtwfSk6aXNOYU4ocCl8fEQobCx7Ym90dG9tOnUuYm90dG9tLXB9KSk6KGlzTmFOKGgpfHxEKGwse21hcmdpbkxlZnQ6dS5sZWZ0K2h9KSxpc05hTihwKXx8RChsLHttYXJnaW5Ub3A6dS50b3ArcH0pKSkpLCFQJiZcInNjYWxlXCIhPWEmJmEgaW4gbCYmZGVsZXRlIGxbYV0sbCYmRChvLGwpKX0pLE0ubXNpZSYmZGVsZXRlIG8uc2NhbGUsbi5hbmltYXRlKG8se3F1ZXVlOiExLHNob3c6ITEsaGlkZTohMSxkdXJhdGlvbjphLmR1cmF0aW9uLGNvbXBsZXRlOmEuY29tcGxldGV9KX0pfX0pLFMuYW5pbWF0ZWRQcm9taXNlPVMucHJvbWlzZSxmPUMuQ2xhc3MuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztuLmVsZW1lbnQ9ZSxuLl9kaXJlY3Rpb249dCxuLm9wdGlvbnM9e30sbi5fYWRkaXRpb25hbEVmZmVjdHM9W10sbi5yZXN0b3JlfHwobi5yZXN0b3JlPVtdKX0scmV2ZXJzZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXZlcnNlPSEwLHRoaXMucnVuKCl9LHBsYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmV2ZXJzZT0hMSx0aGlzLnJ1bigpfSxhZGQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2FkZGl0aW9uYWxFZmZlY3RzLnB1c2goZSksdGhpc30sZGlyZWN0aW9uOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9kaXJlY3Rpb249ZSx0aGlzfSxkdXJhdGlvbjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZHVyYXRpb249ZSx0aGlzfSxjb21wb3NpdGVSdW46ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bmV3IHAoZS5lbGVtZW50LHtyZXZlcnNlOmUuX3JldmVyc2UsZHVyYXRpb246ZS5fZHVyYXRpb259KSxuPWUuX2FkZGl0aW9uYWxFZmZlY3RzLmNvbmNhdChbZV0pO3JldHVybiB0LnJ1bihuKX0scnVuOmZ1bmN0aW9uKCl7aWYodGhpcy5fYWRkaXRpb25hbEVmZmVjdHMmJnRoaXMuX2FkZGl0aW9uYWxFZmZlY3RzWzBdKXJldHVybiB0aGlzLmNvbXBvc2l0ZVJ1bigpO3ZhciB0LG4saT10aGlzLHI9aS5lbGVtZW50LHM9MCxsPWkucmVzdG9yZSxjPWwubGVuZ3RoLGQ9ZS5EZWZlcnJlZCgpLHU9e30saD17fSxwPWkuY2hpbGRyZW4oKSxmPXAubGVuZ3RoO2ZvcihkLnRoZW4oZS5wcm94eShpLFwiX2NvbXBsZXRlXCIpKSxyLmRhdGEoXCJhbmltYXRpbmdcIiwhMCkscz0wO2M+cztzKyspdD1sW3NdLHIuZGF0YSh0KXx8ci5kYXRhKHQsci5jc3ModCkpO2ZvcihzPTA7Zj5zO3MrKylwW3NdLmR1cmF0aW9uKGkuX2R1cmF0aW9uKS5ydW4oKTtyZXR1cm4gaS5wcmVwYXJlKHUsaCksci5pcyhcIjp2aXNpYmxlXCIpfHxEKHUse2Rpc3BsYXk6ci5kYXRhKFwib2xkZGlzcGxheVwiKXx8XCJibG9ja1wifSksUCYmKG49ci5kYXRhKFwidGFyZ2V0VHJhbnNmb3JtXCIpLG4mJih1PUQobix1KSkpLHU9YShyLHUpLFAmJiFJJiYodT1vKHUpKSxyLmNzcyh1KS5jc3Moc3QpLGkuc2V0dXAoKSxyLmRhdGEoXCJ0YXJnZXRUcmFuc2Zvcm1cIixoKSxTLmFuaW1hdGUocixoLHtkdXJhdGlvbjppLl9kdXJhdGlvbixjb21wbGV0ZTpkLnJlc29sdmV9KSxkLnByb21pc2UoKX0sc3RvcDpmdW5jdGlvbigpe3ZhciB0PTAsbj10aGlzLmNoaWxkcmVuKCksaT1uLmxlbmd0aDtmb3IodD0wO2k+dDt0Kyspblt0XS5zdG9wKCk7cmV0dXJuIGUodGhpcy5lbGVtZW50KS5rZW5kb1N0b3AoITAsITApLHRoaXN9LHJlc3RvcmVDYWxsYmFjazpmdW5jdGlvbigpe3ZhciBlLHQsbixpPXRoaXMuZWxlbWVudDtmb3IoZT0wLHQ9dGhpcy5yZXN0b3JlLmxlbmd0aDt0PmU7ZSsrKW49dGhpcy5yZXN0b3JlW2VdLGkuY3NzKG4saS5kYXRhKG4pKX0sX2NvbXBsZXRlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudDtuLnJlbW92ZURhdGEoXCJhbmltYXRpbmdcIikuZGVxdWV1ZSgpLHQucmVzdG9yZUNhbGxiYWNrKCksdC5zaG91bGRIaWRlKCkmJm4uZGF0YShcIm9sZGRpc3BsYXlcIixuLmNzcyhcImRpc3BsYXlcIikpLmhpZGUoKSxSJiYhUCYmc2V0VGltZW91dChlLnByb3h5KHQsXCJyZXN0b3JlQ2FsbGJhY2tcIiksMCksdC50ZWFyZG93bigpfSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe0QoITAsdGhpcy5vcHRpb25zLGUpfSxjaGlsZHJlbjpmdW5jdGlvbigpe3JldHVybltdfSxzaG91bGRIaWRlOmUubm9vcCxzZXR1cDplLm5vb3AscHJlcGFyZTplLm5vb3AsdGVhcmRvd246ZS5ub29wLGRpcmVjdGlvbnM6W10sc2V0UmV2ZXJzZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcmV2ZXJzZT1lLHRoaXN9fSksZz1bXCJsZWZ0XCIsXCJyaWdodFwiLFwidXBcIixcImRvd25cIl0sbT1bXCJpblwiLFwib3V0XCJdLGMoXCJzbGlkZUluXCIse2RpcmVjdGlvbnM6ZyxkaXZpc29yOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9wdGlvbnMuZGl2aXNvcj1lLHRoaXN9LHByZXBhcmU6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXMscj1pLmVsZW1lbnQsbz1odFtpLl9kaXJlY3Rpb25dLGE9LW8ubW9kaWZpZXIqKG8udmVydGljYWw/ci5vdXRlckhlaWdodCgpOnIub3V0ZXJXaWR0aCgpKSxzPWEvKGkub3B0aW9ucyYmaS5vcHRpb25zLmRpdmlzb3J8fDEpK1ksbD1cIjBweFwiO2kuX3JldmVyc2UmJihuPWUsZT10LHQ9biksUD8oZVtvLnRyYW5zaXRpb25dPXMsdFtvLnRyYW5zaXRpb25dPWwpOihlW28ucHJvcGVydHldPXMsdFtvLnByb3BlcnR5XT1sKX19KSxjKFwidGlsZVwiLHtkaXJlY3Rpb25zOmcsaW5pdDpmdW5jdGlvbihlLHQsbil7Zi5wcm90b3R5cGUuaW5pdC5jYWxsKHRoaXMsZSx0KSx0aGlzLm9wdGlvbnM9e3ByZXZpb3VzOm59fSxwcmV2aW91c0Rpdmlzb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub3B0aW9ucy5wcmV2aW91c0Rpdmlzb3I9ZSx0aGlzfSxjaGlsZHJlbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl9yZXZlcnNlLG49ZS5vcHRpb25zLnByZXZpb3VzLGk9ZS5vcHRpb25zLnByZXZpb3VzRGl2aXNvcnx8MSxyPWUuX2RpcmVjdGlvbixvPVtDLmZ4KGUuZWxlbWVudCkuc2xpZGVJbihyKS5zZXRSZXZlcnNlKHQpXTtyZXR1cm4gbiYmby5wdXNoKEMuZngobikuc2xpZGVJbihodFtyXS5yZXZlcnNlKS5kaXZpc29yKGkpLnNldFJldmVyc2UoIXQpKSxvfX0pLGQoXCJmYWRlXCIsXCJvcGFjaXR5XCIsMSwwKSxkKFwiem9vbVwiLFwic2NhbGVcIiwxLC4wMSksYyhcInNsaWRlTWFyZ2luXCIse3ByZXBhcmU6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXMscj1pLmVsZW1lbnQsbz1pLm9wdGlvbnMsYT1yLmRhdGEoZXQpLHM9by5vZmZzZXQsbD1pLl9yZXZlcnNlO2x8fG51bGwhPT1hfHxyLmRhdGEoZXQscGFyc2VGbG9hdChyLmNzcyhcIm1hcmdpbi1cIitvLmF4aXMpKSksbj1yLmRhdGEoZXQpfHwwLHRbXCJtYXJnaW4tXCIrby5heGlzXT1sP246bitzfX0pLGMoXCJzbGlkZVRvXCIse3ByZXBhcmU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9bi5lbGVtZW50LHI9bi5vcHRpb25zLG89ci5vZmZzZXQuc3BsaXQoXCIsXCIpLGE9bi5fcmV2ZXJzZTtQPyh0LnRyYW5zbGF0ZXg9YT8wOm9bMF0sdC50cmFuc2xhdGV5PWE/MDpvWzFdKToodC5sZWZ0PWE/MDpvWzBdLHQudG9wPWE/MDpvWzFdKSxpLmNzcyhcImxlZnRcIil9fSksYyhcImV4cGFuZFwiLHtkaXJlY3Rpb25zOltcImhvcml6b250YWxcIixcInZlcnRpY2FsXCJdLHJlc3RvcmU6W250XSxwcmVwYXJlOmZ1bmN0aW9uKGUsbil7dmFyIGk9dGhpcyxyPWkuZWxlbWVudCxvPWkub3B0aW9ucyxhPWkuX3JldmVyc2Uscz1cInZlcnRpY2FsXCI9PT1pLl9kaXJlY3Rpb24/SjpYLGw9clswXS5zdHlsZVtzXSxjPXIuZGF0YShzKSxkPXBhcnNlRmxvYXQoY3x8bCksdT1xKHIuY3NzKHMsUSlbc10oKSk7ZS5vdmVyZmxvdz1aLGQ9byYmby5yZXNldD91fHxkOmR8fHUsbltzXT0oYT8wOmQpK1ksZVtzXT0oYT9kOjApK1ksYz09PXQmJnIuZGF0YShzLGwpfSxzaG91bGRIaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JldmVyc2V9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZWxlbWVudCxuPVwidmVydGljYWxcIj09PWUuX2RpcmVjdGlvbj9KOlgsaT10LmRhdGEobik7KGk9PVF8fGk9PT0kKSYmc2V0VGltZW91dChmdW5jdGlvbigpe3QuY3NzKG4sUSkuY3NzKG4pfSwwKX19KSx2PXtwb3NpdGlvbjpcImFic29sdXRlXCIsbWFyZ2luTGVmdDowLG1hcmdpblRvcDowLHNjYWxlOjF9LGMoXCJ0cmFuc2ZlclwiLHtpbml0OmZ1bmN0aW9uKGUsdCl7dGhpcy5lbGVtZW50PWUsdGhpcy5vcHRpb25zPXt0YXJnZXQ6dH0sdGhpcy5yZXN0b3JlPVtdfSxzZXR1cDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KX0scHJlcGFyZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1uLmVsZW1lbnQscj1TLmJveChpKSxvPVMuYm94KG4ub3B0aW9ucy50YXJnZXQpLGE9cyhpLFwic2NhbGVcIiksbD1TLmZpbGxTY2FsZShvLHIpLGM9Uy50cmFuc2Zvcm1PcmlnaW4obyxyKTtEKGUsdiksdC5zY2FsZT0xLGkuY3NzKHN0LFwic2NhbGUoMSlcIikuY3NzKHN0KSxpLmNzcyhzdCxcInNjYWxlKFwiK2ErXCIpXCIpLGUudG9wPXIudG9wLGUubGVmdD1yLmxlZnQsZS50cmFuc2Zvcm1PcmlnaW49Yy54K1krXCIgXCIrYy55K1ksbi5fcmV2ZXJzZT9lLnNjYWxlPWw6dC5zY2FsZT1sfX0pLF89e3RvcDpcInJlY3QoYXV0byBhdXRvICRzaXplIGF1dG8pXCIsYm90dG9tOlwicmVjdCgkc2l6ZSBhdXRvIGF1dG8gYXV0bylcIixsZWZ0OlwicmVjdChhdXRvICRzaXplIGF1dG8gYXV0bylcIixyaWdodDpcInJlY3QoYXV0byBhdXRvIGF1dG8gJHNpemUpXCJ9LHk9e3RvcDp7c3RhcnQ6XCJyb3RhdGV4KDBkZWcpXCIsZW5kOlwicm90YXRleCgxODBkZWcpXCJ9LGJvdHRvbTp7c3RhcnQ6XCJyb3RhdGV4KC0xODBkZWcpXCIsZW5kOlwicm90YXRleCgwZGVnKVwifSxsZWZ0OntzdGFydDpcInJvdGF0ZXkoMGRlZylcIixlbmQ6XCJyb3RhdGV5KC0xODBkZWcpXCJ9LHJpZ2h0OntzdGFydDpcInJvdGF0ZXkoMTgwZGVnKVwiLGVuZDpcInJvdGF0ZXkoMGRlZylcIn19LGMoXCJ0dXJuaW5nUGFnZVwiLHtkaXJlY3Rpb25zOmcsaW5pdDpmdW5jdGlvbihlLHQsbil7Zi5wcm90b3R5cGUuaW5pdC5jYWxsKHRoaXMsZSx0KSx0aGlzLl9jb250YWluZXI9bn0scHJlcGFyZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1uLl9yZXZlcnNlLHI9aT9odFtuLl9kaXJlY3Rpb25dLnJldmVyc2U6bi5fZGlyZWN0aW9uLG89eVtyXTtlLnpJbmRleD0xLG4uX2NsaXBJbkhhbGYmJihlLmNsaXA9dShuLl9jb250YWluZXIsQy5kaXJlY3Rpb25zW3JdLnJldmVyc2UpKSxlW2x0XT1aLHRbc3RdPXV0KyhpP28uc3RhcnQ6by5lbmQpLGVbc3RdPXV0KyhpP28uZW5kOm8uc3RhcnQpfSxzZXR1cDpmdW5jdGlvbigpe3RoaXMuX2NvbnRhaW5lci5hcHBlbmQodGhpcy5lbGVtZW50KX0sZmFjZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZmFjZT1lLHRoaXN9LHNob3VsZEhpZGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5fcmV2ZXJzZSxuPWUuX2ZhY2U7cmV0dXJuIHQmJiFufHwhdCYmbn0sY2xpcEluSGFsZjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY2xpcEluSGFsZj1lLHRoaXN9LHRlbXBvcmFyeTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJ0ZW1wLXBhZ2VcIiksdGhpc319KSxjKFwic3RhdGljUGFnZVwiLHtkaXJlY3Rpb25zOmcsaW5pdDpmdW5jdGlvbihlLHQsbil7Zi5wcm90b3R5cGUuaW5pdC5jYWxsKHRoaXMsZSx0KSx0aGlzLl9jb250YWluZXI9bn0scmVzdG9yZTpbXCJjbGlwXCJdLHByZXBhcmU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9bi5fcmV2ZXJzZT9odFtuLl9kaXJlY3Rpb25dLnJldmVyc2U6bi5fZGlyZWN0aW9uO2UuY2xpcD11KG4uX2NvbnRhaW5lcixpKSxlLm9wYWNpdHk9Ljk5OSx0Lm9wYWNpdHk9MX0sc2hvdWxkSGlkZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl9yZXZlcnNlLG49ZS5fZmFjZTtyZXR1cm4gdCYmIW58fCF0JiZufSxmYWNlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9mYWNlPWUsdGhpc319KSxjKFwicGFnZXR1cm5cIix7ZGlyZWN0aW9uczpbXCJob3Jpem9udGFsXCIsXCJ2ZXJ0aWNhbFwiXSxpbml0OmZ1bmN0aW9uKGUsdCxuLGkpe2YucHJvdG90eXBlLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy5vcHRpb25zPXt9LHRoaXMub3B0aW9ucy5mYWNlPW4sdGhpcy5vcHRpb25zLmJhY2s9aX0sY2hpbGRyZW46ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10Lm9wdGlvbnMsaT1cImhvcml6b250YWxcIj09PXQuX2RpcmVjdGlvbj9cImxlZnRcIjpcInRvcFwiLHI9Qy5kaXJlY3Rpb25zW2ldLnJldmVyc2Usbz10Ll9yZXZlcnNlLGE9bi5mYWNlLmNsb25lKCEwKS5yZW1vdmVBdHRyKFwiaWRcIikscz1uLmJhY2suY2xvbmUoITApLnJlbW92ZUF0dHIoXCJpZFwiKSxsPXQuZWxlbWVudDtyZXR1cm4gbyYmKGU9aSxpPXIscj1lKSxbQy5meChuLmZhY2UpLnN0YXRpY1BhZ2UoaSxsKS5mYWNlKCEwKS5zZXRSZXZlcnNlKG8pLEMuZngobi5iYWNrKS5zdGF0aWNQYWdlKHIsbCkuc2V0UmV2ZXJzZShvKSxDLmZ4KGEpLnR1cm5pbmdQYWdlKGksbCkuZmFjZSghMCkuY2xpcEluSGFsZighMCkudGVtcG9yYXJ5KCkuc2V0UmV2ZXJzZShvKSxDLmZ4KHMpLnR1cm5pbmdQYWdlKHIsbCkuY2xpcEluSGFsZighMCkudGVtcG9yYXJ5KCkuc2V0UmV2ZXJzZShvKV19LHByZXBhcmU6ZnVuY3Rpb24oZSx0KXtlW2N0XT1kdCxlLnRyYW5zZm9ybVN0eWxlPVwicHJlc2VydmUtM2RcIixlLm9wYWNpdHk9Ljk5OSx0Lm9wYWNpdHk9MX0sdGVhcmRvd246ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuZmluZChcIi50ZW1wLXBhZ2VcIikucmVtb3ZlKCl9fSksYyhcImZsaXBcIix7ZGlyZWN0aW9uczpbXCJob3Jpem9udGFsXCIsXCJ2ZXJ0aWNhbFwiXSxpbml0OmZ1bmN0aW9uKGUsdCxuLGkpe2YucHJvdG90eXBlLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy5vcHRpb25zPXt9LHRoaXMub3B0aW9ucy5mYWNlPW4sdGhpcy5vcHRpb25zLmJhY2s9aX0sY2hpbGRyZW46ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10Lm9wdGlvbnMsaT1cImhvcml6b250YWxcIj09PXQuX2RpcmVjdGlvbj9cImxlZnRcIjpcInRvcFwiLHI9Qy5kaXJlY3Rpb25zW2ldLnJldmVyc2Usbz10Ll9yZXZlcnNlLGE9dC5lbGVtZW50O3JldHVybiBvJiYoZT1pLGk9cixyPWUpLFtDLmZ4KG4uZmFjZSkudHVybmluZ1BhZ2UoaSxhKS5mYWNlKCEwKS5zZXRSZXZlcnNlKG8pLEMuZngobi5iYWNrKS50dXJuaW5nUGFnZShyLGEpLnNldFJldmVyc2UobyldfSxwcmVwYXJlOmZ1bmN0aW9uKGUpe2VbY3RdPWR0LGUudHJhbnNmb3JtU3R5bGU9XCJwcmVzZXJ2ZS0zZFwifX0pLHc9IUUubW9iaWxlT1MuYW5kcm9pZCxiPVwiLmttLXRvdWNoLXNjcm9sbGJhciwgLmttLWFjdGlvbnNoZWV0LXdyYXBwZXJcIixjKFwicmVwbGFjZVwiLHtfYmVmb3JlOmUubm9vcCxfYWZ0ZXI6ZS5ub29wLGluaXQ6ZnVuY3Rpb24odCxuLGkpe2YucHJvdG90eXBlLmluaXQuY2FsbCh0aGlzLHQpLHRoaXMuX3ByZXZpb3VzPWUobiksdGhpcy5fdHJhbnNpdGlvbkNsYXNzPWl9LGR1cmF0aW9uOmZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoXCJUaGUgcmVwbGFjZSBlZmZlY3QgZG9lcyBub3Qgc3VwcG9ydCBkdXJhdGlvbiBzZXR0aW5nOyB0aGUgZWZmZWN0IGR1cmF0aW9uIG1heSBiZSBjdXN0b21pemVkIHRocm91Z2ggdGhlIHRyYW5zaXRpb24gY2xhc3MgcnVsZVwiKX0sYmVmb3JlVHJhbnNpdGlvbjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYmVmb3JlPWUsdGhpc30sYWZ0ZXJUcmFuc2l0aW9uOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9hZnRlcj1lLHRoaXN9LF9ib3RoOmZ1bmN0aW9uKCl7cmV0dXJuIGUoKS5hZGQodGhpcy5fZWxlbWVudCkuYWRkKHRoaXMuX3ByZXZpb3VzKX0sX2NvbnRhaW5lckNsYXNzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZGlyZWN0aW9uLHQ9XCJrLWZ4IGstZngtc3RhcnQgay1meC1cIit0aGlzLl90cmFuc2l0aW9uQ2xhc3M7cmV0dXJuIGUmJih0Kz1cIiBrLWZ4LVwiK2UpLHRoaXMuX3JldmVyc2UmJih0Kz1cIiBrLWZ4LXJldmVyc2VcIiksdH0sY29tcGxldGU6ZnVuY3Rpb24odCl7aWYoISghdGhpcy5kZWZlcnJlZHx8dCYmZSh0LnRhcmdldCkuaXMoYikpKXt2YXIgbj10aGlzLmNvbnRhaW5lcjtuLnJlbW92ZUNsYXNzKFwiay1meC1lbmRcIikucmVtb3ZlQ2xhc3ModGhpcy5fY29udGFpbmVyQ2xhc3MoKSkub2ZmKEkuZXZlbnQsdGhpcy5jb21wbGV0ZVByb3h5KSx0aGlzLl9wcmV2aW91cy5oaWRlKCkucmVtb3ZlQ2xhc3MoXCJrLWZ4LWN1cnJlbnRcIiksdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwiay1meC1uZXh0XCIpLHcmJm4uY3NzKG50LFwiXCIpLHRoaXMuaXNBYnNvbHV0ZXx8dGhpcy5fYm90aCgpLmNzcyhydCxcIlwiKSx0aGlzLmRlZmVycmVkLnJlc29sdmUoKSxkZWxldGUgdGhpcy5kZWZlcnJlZH19LHJ1bjpmdW5jdGlvbigpe2lmKHRoaXMuX2FkZGl0aW9uYWxFZmZlY3RzJiZ0aGlzLl9hZGRpdGlvbmFsRWZmZWN0c1swXSlyZXR1cm4gdGhpcy5jb21wb3NpdGVSdW4oKTt2YXIgdCxuPXRoaXMsaT1uLmVsZW1lbnQscj1uLl9wcmV2aW91cyxvPWkucGFyZW50cygpLmZpbHRlcihyLnBhcmVudHMoKSkuZmlyc3QoKSxhPW4uX2JvdGgoKSxzPWUuRGVmZXJyZWQoKSxsPWkuY3NzKHJ0KTtyZXR1cm4gby5sZW5ndGh8fChvPWkucGFyZW50KCkpLHRoaXMuY29udGFpbmVyPW8sdGhpcy5kZWZlcnJlZD1zLHRoaXMuaXNBYnNvbHV0ZT1cImFic29sdXRlXCI9PWwsdGhpcy5pc0Fic29sdXRlfHxhLmNzcyhydCxcImFic29sdXRlXCIpLHcmJih0PW8uY3NzKG50KSxvLmNzcyhudCxcImhpZGRlblwiKSksST8oaS5hZGRDbGFzcyhcImstZngtaGlkZGVuXCIpLG8uYWRkQ2xhc3ModGhpcy5fY29udGFpbmVyQ2xhc3MoKSksdGhpcy5jb21wbGV0ZVByb3h5PWUucHJveHkodGhpcyxcImNvbXBsZXRlXCIpLG8ub24oSS5ldmVudCx0aGlzLmNvbXBsZXRlUHJveHkpLEMuYW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXtpLnJlbW92ZUNsYXNzKFwiay1meC1oaWRkZW5cIikuYWRkQ2xhc3MoXCJrLWZ4LW5leHRcIiksci5jc3MoXCJkaXNwbGF5XCIsXCJcIikuYWRkQ2xhc3MoXCJrLWZ4LWN1cnJlbnRcIiksbi5fYmVmb3JlKHIsaSksQy5hbmltYXRpb25GcmFtZShmdW5jdGlvbigpe28ucmVtb3ZlQ2xhc3MoXCJrLWZ4LXN0YXJ0XCIpLmFkZENsYXNzKFwiay1meC1lbmRcIiksbi5fYWZ0ZXIocixpKX0pfSkpOnRoaXMuY29tcGxldGUoKSxzLnByb21pc2UoKX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuY29tcGxldGUoKX19KSxrPUMuQ2xhc3MuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl90aWNrUHJveHk9QShlLl90aWNrLGUpLGUuX3N0YXJ0ZWQ9ITF9LHRpY2s6ZS5ub29wLGRvbmU6ZS5ub29wLG9uRW5kOmUubm9vcCxvbkNhbmNlbDplLm5vb3Asc3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQoKSYmKHRoaXMuZG9uZSgpP3RoaXMub25FbmQoKToodGhpcy5fc3RhcnRlZD0hMCxDLmFuaW1hdGlvbkZyYW1lKHRoaXMuX3RpY2tQcm94eSkpKX0sZW5hYmxlZDpmdW5jdGlvbigpe3JldHVybiEwfSxjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLl9zdGFydGVkPSExLHRoaXMub25DYW5jZWwoKX0sX3RpY2s6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3N0YXJ0ZWQmJihlLnRpY2soKSxlLmRvbmUoKT8oZS5fc3RhcnRlZD0hMSxlLm9uRW5kKCkpOkMuYW5pbWF0aW9uRnJhbWUoZS5fdGlja1Byb3h5KSl9fSkseD1rLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO0QodCxlKSxrLmZuLmluaXQuY2FsbCh0KX0sZG9uZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRpbWVQYXNzZWQoKT49dGhpcy5kdXJhdGlvbn0sdGltZVBhc3NlZDpmdW5jdGlvbigpe3JldHVybiBNYXRoLm1pbih0aGlzLmR1cmF0aW9uLG5ldyBEYXRlLXRoaXMuc3RhcnREYXRlKX0sbW92ZVRvOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Lm1vdmFibGU7dC5pbml0aWFsPW5bdC5heGlzXSx0LmRlbHRhPWUubG9jYXRpb24tdC5pbml0aWFsLHQuZHVyYXRpb249XCJudW1iZXJcIj09dHlwZW9mIGUuZHVyYXRpb24/ZS5kdXJhdGlvbjozMDAsdC50aWNrPXQuX2Vhc2VQcm94eShlLmVhc2UpLHQuc3RhcnREYXRlPW5ldyBEYXRlLHQuc3RhcnQoKX0sX2Vhc2VQcm94eTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBmdW5jdGlvbigpe3QubW92YWJsZS5tb3ZlQXhpcyh0LmF4aXMsZSh0LnRpbWVQYXNzZWQoKSx0LmluaXRpYWwsdC5kZWx0YSx0LmR1cmF0aW9uKSl9fX0pLEQoeCx7ZWFzZU91dEV4cG86ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIGU9PWk/dCtuOm4qKC1NYXRoLnBvdygyLC0xMCplL2kpKzEpK3R9LGVhc2VPdXRCYWNrOmZ1bmN0aW9uKGUsdCxuLGkscil7cmV0dXJuIHI9MS43MDE1OCxuKigoZT1lL2ktMSkqZSooKHIrMSkqZStyKSsxKSt0fX0pLFMuQW5pbWF0aW9uPWssUy5UcmFuc2l0aW9uPXgsUy5jcmVhdGVFZmZlY3Q9YyxTLmJveD1mdW5jdGlvbih0KXt0PWUodCk7dmFyIG49dC5vZmZzZXQoKTtyZXR1cm4gbi53aWR0aD10Lm91dGVyV2lkdGgoKSxuLmhlaWdodD10Lm91dGVySGVpZ2h0KCksbn0sUy50cmFuc2Zvcm1PcmlnaW49ZnVuY3Rpb24oZSx0KXt2YXIgbj0oZS5sZWZ0LXQubGVmdCkqdC53aWR0aC8odC53aWR0aC1lLndpZHRoKSxpPShlLnRvcC10LnRvcCkqdC5oZWlnaHQvKHQuaGVpZ2h0LWUuaGVpZ2h0KTtyZXR1cm57eDppc05hTihuKT8wOm4seTppc05hTihpKT8wOml9fSxTLmZpbGxTY2FsZT1mdW5jdGlvbihlLHQpe3JldHVybiBNYXRoLm1pbihlLndpZHRoL3Qud2lkdGgsZS5oZWlnaHQvdC5oZWlnaHQpfSxTLmZpdFNjYWxlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE1hdGgubWF4KGUud2lkdGgvdC53aWR0aCxlLmhlaWdodC90LmhlaWdodCl9fSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe2lmKCFlKXJldHVybnt9O3ZhciB0PWUubWF0Y2godil8fFtdO3JldHVybnt0eXBlOnRbMV0sZGlyZWN0aW9uOnRbM10scmV2ZXJzZTpcInJldmVyc2VcIj09PXRbNV19fXZhciBuPXdpbmRvdy5rZW5kbyxpPW4uT2JzZXJ2YWJsZSxyPVwiU0NSSVBUXCIsbz1cImluaXRcIixhPVwic2hvd1wiLHM9XCJoaWRlXCIsbD1cInRyYW5zaXRpb25TdGFydFwiLGM9XCJ0cmFuc2l0aW9uRW5kXCIsZD1cImF0dGFjaFwiLHU9XCJkZXRhY2hcIixoPS91bnJlY29nbml6ZWQgZXhwcmVzc2lvbi8scD1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7dD10fHx7fSxpLmZuLmluaXQuY2FsbChyKSxyLmNvbnRlbnQ9ZSxyLmlkPW4uZ3VpZCgpLHIudGFnTmFtZT10LnRhZ05hbWV8fFwiZGl2XCIsci5tb2RlbD10Lm1vZGVsLHIuX3dyYXA9dC53cmFwIT09ITEsdGhpcy5fZXZhbFRlbXBsYXRlPXQuZXZhbFRlbXBsYXRlfHwhMSxyLl9mcmFnbWVudHM9e30sci5iaW5kKFtvLGEscyxsLGNdLHQpfSxyZW5kZXI6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcyxyPSFpLmVsZW1lbnQ7cmV0dXJuIHImJihpLmVsZW1lbnQ9aS5fY3JlYXRlRWxlbWVudCgpKSx0JiZlKHQpLmFwcGVuZChpLmVsZW1lbnQpLHImJihuLmJpbmQoaS5lbGVtZW50LGkubW9kZWwpLGkudHJpZ2dlcihvKSksdCYmKGkuX2VhY2hGcmFnbWVudChkKSxpLnRyaWdnZXIoYSkpLGkuZWxlbWVudH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGYodGhpcyl9LHRyaWdnZXJCZWZvcmVTaG93OmZ1bmN0aW9uKCl7cmV0dXJuITB9LHNob3dTdGFydDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5jc3MoXCJkaXNwbGF5XCIsXCJcIil9LHNob3dFbmQ6ZnVuY3Rpb24oKXt9LGhpZGVTdGFydDpmdW5jdGlvbigpe30saGlkZUVuZDpmdW5jdGlvbigpe3RoaXMuaGlkZSgpfSxiZWZvcmVUcmFuc2l0aW9uOmZ1bmN0aW9uKGUpe3RoaXMudHJpZ2dlcihsLHt0eXBlOmV9KX0sYWZ0ZXJUcmFuc2l0aW9uOmZ1bmN0aW9uKGUpe3RoaXMudHJpZ2dlcihjLHt0eXBlOmV9KX0saGlkZTpmdW5jdGlvbigpe3RoaXMuX2VhY2hGcmFnbWVudCh1KSx0aGlzLmVsZW1lbnQuZGV0YWNoKCksdGhpcy50cmlnZ2VyKHMpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50O2UmJihuLnVuYmluZChlKSxuLmRlc3Ryb3koZSksZS5yZW1vdmUoKSl9LGZyYWdtZW50czpmdW5jdGlvbih0KXtlLmV4dGVuZCh0aGlzLl9mcmFnbWVudHMsdCl9LF9lYWNoRnJhZ21lbnQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIHRoaXMuX2ZyYWdtZW50cyl0aGlzLl9mcmFnbWVudHNbdF1bZV0odGhpcyx0KX0sX2NyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgdCxpLG89dGhpcyxhPVwiPFwiK28udGFnTmFtZStcIiAvPlwiO3RyeXtpPWUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoby5jb250ZW50KXx8by5jb250ZW50KSxpWzBdLnRhZ05hbWU9PT1yJiYoaT1pLmh0bWwoKSl9Y2F0Y2gocyl7aC50ZXN0KHMubWVzc2FnZSkmJihpPW8uY29udGVudCl9cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGk/KGk9aS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLFwiXCIpLG8uX2V2YWxUZW1wbGF0ZSYmKGk9bi50ZW1wbGF0ZShpKShvLm1vZGVsfHx7fSkpLHQ9ZShhKS5hcHBlbmQoaSksby5fd3JhcHx8KHQ9dC5jb250ZW50cygpKSk6KHQ9aSxvLl93cmFwJiYodD10LndyYXBBbGwoYSkucGFyZW50KCkpKSx0fX0pLGY9bi5DbGFzcy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCl7ZS5leHRlbmQodGhpcyx7ZWxlbWVudDp0LmVsZW1lbnQuY2xvbmUoITApLHRyYW5zaXRpb246dC50cmFuc2l0aW9uLGlkOnQuaWR9KSx0LmVsZW1lbnQucGFyZW50KCkuYXBwZW5kKHRoaXMuZWxlbWVudCl9LGhpZGVTdGFydDplLm5vb3AsaGlkZUVuZDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5yZW1vdmUoKX0sYmVmb3JlVHJhbnNpdGlvbjplLm5vb3AsYWZ0ZXJUcmFuc2l0aW9uOmUubm9vcH0pLGc9cC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXtwLmZuLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy5jb250YWluZXJzPXt9fSxjb250YWluZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jb250YWluZXJzW2VdO3JldHVybiB0fHwodD10aGlzLl9jcmVhdGVDb250YWluZXIoZSksdGhpcy5jb250YWluZXJzW2VdPXQpLHR9LHNob3dJbjpmdW5jdGlvbihlLHQsbil7dGhpcy5jb250YWluZXIoZSkuc2hvdyh0LG4pfSxfY3JlYXRlQ29udGFpbmVyOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5yZW5kZXIoKSxpPW4uZmluZChlKTtpZighaS5sZW5ndGgmJm4uaXMoZSkpe2lmKCFuLmlzKGUpKXRocm93IEVycm9yKFwiY2FuJ3QgZmluZCBhIGNvbnRhaW5lciB3aXRoIHRoZSBzcGVjaWZpZWQgXCIrZStcIiBzZWxlY3RvclwiKTtpPW59cmV0dXJuIHQ9bmV3IF8oaSksdC5iaW5kKFwiYWNjZXB0ZWRcIixmdW5jdGlvbihlKXtlLnZpZXcucmVuZGVyKGkpfSksdH19KSxtPXAuZXh0ZW5kKHthdHRhY2g6ZnVuY3Rpb24oZSx0KXtlLmVsZW1lbnQuZmluZCh0KS5yZXBsYWNlV2l0aCh0aGlzLnJlbmRlcigpKX0sZGV0YWNoOmZ1bmN0aW9uKCl7fX0pLHY9L14oXFx3KykoOihcXHcrKSk/KCAoXFx3KykpPyQvLF89aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7aS5mbi5pbml0LmNhbGwodGhpcyksdGhpcy5jb250YWluZXI9ZSx0aGlzLmhpc3Rvcnk9W10sdGhpcy52aWV3PW51bGwsdGhpcy5ydW5uaW5nPSExfSxhZnRlcjpmdW5jdGlvbigpe3RoaXMucnVubmluZz0hMSx0aGlzLnRyaWdnZXIoXCJjb21wbGV0ZVwiLHt2aWV3OnRoaXMudmlld30pLHRoaXMudHJpZ2dlcihcImFmdGVyXCIpfSxlbmQ6ZnVuY3Rpb24oKXt0aGlzLnZpZXcuc2hvd0VuZCgpLHRoaXMucHJldmlvdXMuaGlkZUVuZCgpLHRoaXMuYWZ0ZXIoKX0sc2hvdzpmdW5jdGlvbihlLGkscil7aWYoIWUudHJpZ2dlckJlZm9yZVNob3coKSlyZXR1cm4gdGhpcy50cmlnZ2VyKFwiYWZ0ZXJcIiksITE7cj1yfHxlLmlkO3ZhciBvPXRoaXMsYT1lPT09by52aWV3P2UuY2xvbmUoKTpvLnZpZXcscz1vLmhpc3RvcnksbD1zW3MubGVuZ3RoLTJdfHx7fSxjPWwuaWQ9PT1yLGQ9aXx8KGM/c1tzLmxlbmd0aC0xXS50cmFuc2l0aW9uOmUudHJhbnNpdGlvbiksdT10KGQpO3JldHVybiBvLnJ1bm5pbmcmJm8uZWZmZWN0LnN0b3AoKSxcIm5vbmVcIj09PWQmJihkPW51bGwpLG8udHJpZ2dlcihcImFjY2VwdGVkXCIse3ZpZXc6ZX0pLG8udmlldz1lLG8ucHJldmlvdXM9YSxvLnJ1bm5pbmc9ITAsYz9zLnBvcCgpOnMucHVzaCh7aWQ6cix0cmFuc2l0aW9uOmR9KSxhPyhhLmhpZGVTdGFydCgpLGQmJm4uZWZmZWN0cy5lbmFibGVkPyhlLmVsZW1lbnQuYWRkQ2xhc3MoXCJrLWZ4LWhpZGRlblwiKSxlLnNob3dTdGFydCgpLGMmJiFpJiYodS5yZXZlcnNlPSF1LnJldmVyc2UpLG8uZWZmZWN0PW4uZngoZS5lbGVtZW50KS5yZXBsYWNlKGEuZWxlbWVudCx1LnR5cGUpLmJlZm9yZVRyYW5zaXRpb24oZnVuY3Rpb24oKXtlLmJlZm9yZVRyYW5zaXRpb24oXCJzaG93XCIpLGEuYmVmb3JlVHJhbnNpdGlvbihcImhpZGVcIil9KS5hZnRlclRyYW5zaXRpb24oZnVuY3Rpb24oKXtlLmFmdGVyVHJhbnNpdGlvbihcInNob3dcIiksYS5hZnRlclRyYW5zaXRpb24oXCJoaWRlXCIpfSkuZGlyZWN0aW9uKHUuZGlyZWN0aW9uKS5zZXRSZXZlcnNlKHUucmV2ZXJzZSksby5lZmZlY3QucnVuKCkudGhlbihmdW5jdGlvbigpe28uZW5kKCl9KSk6KGUuc2hvd1N0YXJ0KCksby5lbmQoKSksITApOihlLnNob3dTdGFydCgpLGUuc2hvd0VuZCgpLG8uYWZ0ZXIoKSwhMCl9fSk7bi5WaWV3Q29udGFpbmVyPV8sbi5GcmFnbWVudD1tLG4uTGF5b3V0PWcsbi5WaWV3PXAsbi5WaWV3Q2xvbmU9Zn0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3RoaXMubm9kZT1udWxsfWZ1bmN0aW9uIG4oZSx0LG4pe3RoaXMubm9kZU5hbWU9ZSx0aGlzLmF0dHI9dHx8e30sdGhpcy5jc3NUZXh0PW51bGwsdGhpcy5jaGlsZHJlbj1ufHxbXX1mdW5jdGlvbiBpKGUpe3RoaXMubm9kZVZhbHVlPWV9ZnVuY3Rpb24gcihlKXt0aGlzLmh0bWw9ZX1mdW5jdGlvbiBvKGUpe3JldHVybiBuZXcgcihlKX1mdW5jdGlvbiBhKGUsdCxpKXtyZXR1cm4gbmV3IG4oZSx0LGkpfWZ1bmN0aW9uIHMoZSl7cmV0dXJuIG5ldyBpKGUpfWZ1bmN0aW9uIGwoZSl7dGhpcy5yb290PWUsdGhpcy5jaGlsZHJlbj1bXX10LnByb3RvdHlwZT17cmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5ub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5ub2RlKX19LG4ucHJvdG90eXBlPW5ldyB0LG4ucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGEscyxsLGMsZD10aGlzLmNoaWxkcmVuLHU9ZC5sZW5ndGg7aWYodCYmdC5ub2RlTmFtZT09PXRoaXMubm9kZU5hbWUpe2lmKG49dC5ub2RlLHI9dC5jaGlsZHJlbixNYXRoLmFicyhyLmxlbmd0aC11KT4yKXJldHVybiB2b2lkIHRoaXMucmVuZGVyKHthcHBlbmRDaGlsZDpmdW5jdGlvbihuKXtlLnJlcGxhY2VDaGlsZChuLHQubm9kZSl9fSxudWxsKTtmb3IoaT0wO3U+aTtpKyspZFtpXS5yZW5kZXIobixyW2ldKTtmb3IoaT11LHU9ci5sZW5ndGg7dT5pO2krKylyW2ldLnJlbW92ZSgpfWVsc2V7Zm9yKHQmJih0LnJlbW92ZSgpLHQ9bnVsbCksbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMubm9kZU5hbWUpLGk9MDt1Pmk7aSsrKWRbaV0ucmVuZGVyKG4sbnVsbCk7ZS5hcHBlbmRDaGlsZChuKX1vPXRoaXMuYXR0cjtmb3IoYSBpbiBvKWlmKCF0fHxvW2FdIT09dC5hdHRyW2FdKWlmKHZvaWQgMCE9PW5bYV0paWYoXCJzdHlsZVwiIT09YSluW2FdPW9bYV07ZWxzZXtzPVwiXCIsbD1vW2FdO2ZvcihjIGluIGwpcys9YyxzKz1cIjpcIixzKz1sW2NdLHMrPVwiO1wiO3QmJnQuY3NzVGV4dD09PXN8fChuLnN0eWxlLmNzc1RleHQ9cyksdGhpcy5jc3NUZXh0PXN9ZWxzZSBuLnNldEF0dHJpYnV0ZShhLG9bYV0pO2lmKHQpZm9yKGEgaW4gdC5hdHRyKXZvaWQgMD09PW9bYV0mJih2b2lkIDAhPT1uW2FdP1wic3R5bGVcIj09PWE/bi5zdHlsZS5jc3NUZXh0PVwiXCI6XCJjbGFzc05hbWVcIj09PWE/blthXT1cIlwiOm4ucmVtb3ZlQXR0cmlidXRlKGEpOm4ucmVtb3ZlQXR0cmlidXRlKGEpKTt0aGlzLm5vZGU9bn0saS5wcm90b3R5cGU9bmV3IHQsaS5wcm90b3R5cGUubm9kZU5hbWU9XCIjdGV4dFwiLGkucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbihlLHQpe3ZhciBuO3QmJnQubm9kZU5hbWU9PT10aGlzLm5vZGVOYW1lPyhuPXQubm9kZSx0aGlzLm5vZGVWYWx1ZSE9PXQubm9kZVZhbHVlJiYobi5ub2RlVmFsdWU9dGhpcy5ub2RlVmFsdWUpKToodCYmdC5yZW1vdmUoKSxuPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRoaXMubm9kZVZhbHVlKSxlLmFwcGVuZENoaWxkKG4pKSx0aGlzLm5vZGU9bn0sci5wcm90b3R5cGU9e25vZGVOYW1lOlwiI2h0bWxcIixyZW1vdmU6ZnVuY3Rpb24oKXtmb3IodmFyIGU9MDt0aGlzLm5vZGVzLmxlbmd0aD5lO2UrKyl0aGlzLm5vZGVzW2VdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5ub2Rlc1tlXSl9LHJlbmRlcjpmdW5jdGlvbihlLHQpe3ZhciBuLGk7aWYodCYmdC5ub2RlTmFtZT09PXRoaXMubm9kZU5hbWUmJnQuaHRtbD09PXRoaXMuaHRtbCl0aGlzLm5vZGVzPXQubm9kZXMuc2xpY2UoMCk7ZWxzZSBmb3IodCYmdC5yZW1vdmUoKSxuPWUubGFzdENoaWxkLGUuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsdGhpcy5odG1sKSx0aGlzLm5vZGVzPVtdLGk9bj9uLm5leHRTaWJsaW5nOmUuZmlyc3RDaGlsZDtpO2k9aS5uZXh0U2libGluZyl0aGlzLm5vZGVzLnB1c2goaSl9fSxsLnByb3RvdHlwZT17aHRtbDpvLGVsZW1lbnQ6YSx0ZXh0OnMscmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLmNoaWxkcmVuO2Zvcih0PTAsbj1lLmxlbmd0aDtuPnQ7dCsrKWVbdF0ucmVuZGVyKHRoaXMucm9vdCxpW3RdKTtmb3IodD1uO2kubGVuZ3RoPnQ7dCsrKWlbdF0ucmVtb3ZlKCk7dGhpcy5jaGlsZHJlbj1lfX0sZS5kb209e2h0bWw6byx0ZXh0OnMsZWxlbWVudDphLFRyZWU6bH19KHdpbmRvdy5rZW5kbyksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXt2YXIgbj1NYXRoLmZsb29yKGUvMjYpLTE7cmV0dXJuKG4+PTA/dChuKTpcIlwiKStTdHJpbmcuZnJvbUNoYXJDb2RlKDY1K2UlMjYpfWZ1bmN0aW9uIG4oZSxuKXtyZXR1cm4gdChuKSsoZSsxKX1mdW5jdGlvbiBpKGUpe3JldHVybiA2PmUubGVuZ3RoJiYoZT1lLnJlcGxhY2UoLyhcXHcpL2csZnVuY3Rpb24oZSx0KXtyZXR1cm4gdCt0fSkpLGU9ZS5zdWJzdHJpbmcoMSkudG9VcHBlckNhc2UoKSw4PmUubGVuZ3RoJiYoZT1cIkZGXCIrZSksZX12YXIgcj0nPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIiBzdGFuZGFsb25lPVwieWVzXCI/PlxcclxcbjxSZWxhdGlvbnNoaXBzIHhtbG5zPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9yZWxhdGlvbnNoaXBzXCI+PFJlbGF0aW9uc2hpcCBJZD1cInJJZDNcIiBUeXBlPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9leHRlbmRlZC1wcm9wZXJ0aWVzXCIgVGFyZ2V0PVwiZG9jUHJvcHMvYXBwLnhtbFwiLz48UmVsYXRpb25zaGlwIElkPVwicklkMlwiIFR5cGU9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvcGFja2FnZS8yMDA2L3JlbGF0aW9uc2hpcHMvbWV0YWRhdGEvY29yZS1wcm9wZXJ0aWVzXCIgVGFyZ2V0PVwiZG9jUHJvcHMvY29yZS54bWxcIi8+PFJlbGF0aW9uc2hpcCBJZD1cInJJZDFcIiBUeXBlPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9vZmZpY2VEb2N1bWVudFwiIFRhcmdldD1cInhsL3dvcmtib29rLnhtbFwiLz48L1JlbGF0aW9uc2hpcHM+JyxvPWUudGVtcGxhdGUoJzw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCIgc3RhbmRhbG9uZT1cInllc1wiPz5cXHJcXG48Y3A6Y29yZVByb3BlcnRpZXMgeG1sbnM6Y3A9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvcGFja2FnZS8yMDA2L21ldGFkYXRhL2NvcmUtcHJvcGVydGllc1wiIHhtbG5zOmRjPVwiaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS9cIiB4bWxuczpkY3Rlcm1zPVwiaHR0cDovL3B1cmwub3JnL2RjL3Rlcm1zL1wiIHhtbG5zOmRjbWl0eXBlPVwiaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1wiIHhtbG5zOnhzaT1cImh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlXCI+PGRjOmNyZWF0b3I+JHtjcmVhdG9yfTwvZGM6Y3JlYXRvcj48Y3A6bGFzdE1vZGlmaWVkQnk+JHtsYXN0TW9kaWZpZWRCeX08L2NwOmxhc3RNb2RpZmllZEJ5PjxkY3Rlcm1zOmNyZWF0ZWQgeHNpOnR5cGU9XCJkY3Rlcm1zOlczQ0RURlwiPiR7Y3JlYXRlZH08L2RjdGVybXM6Y3JlYXRlZD48ZGN0ZXJtczptb2RpZmllZCB4c2k6dHlwZT1cImRjdGVybXM6VzNDRFRGXCI+JHttb2RpZmllZH08L2RjdGVybXM6bW9kaWZpZWQ+PC9jcDpjb3JlUHJvcGVydGllcz4nKSxhPWUudGVtcGxhdGUoJzw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCIgc3RhbmRhbG9uZT1cInllc1wiPz5cXHJcXG48UHJvcGVydGllcyB4bWxucz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L2V4dGVuZGVkLXByb3BlcnRpZXNcIiB4bWxuczp2dD1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L2RvY1Byb3BzVlR5cGVzXCI+PEFwcGxpY2F0aW9uPk1pY3Jvc29mdCBFeGNlbDwvQXBwbGljYXRpb24+PERvY1NlY3VyaXR5PjA8L0RvY1NlY3VyaXR5PjxTY2FsZUNyb3A+ZmFsc2U8L1NjYWxlQ3JvcD48SGVhZGluZ1BhaXJzPjx2dDp2ZWN0b3Igc2l6ZT1cIjJcIiBiYXNlVHlwZT1cInZhcmlhbnRcIj48dnQ6dmFyaWFudD48dnQ6bHBzdHI+V29ya3NoZWV0czwvdnQ6bHBzdHI+PC92dDp2YXJpYW50Pjx2dDp2YXJpYW50Pjx2dDppND4ke3NoZWV0cy5sZW5ndGh9PC92dDppND48L3Z0OnZhcmlhbnQ+PC92dDp2ZWN0b3I+PC9IZWFkaW5nUGFpcnM+PFRpdGxlc09mUGFydHM+PHZ0OnZlY3RvciBzaXplPVwiJHtzaGVldHMubGVuZ3RofVwiIGJhc2VUeXBlPVwibHBzdHJcIj4jIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IHNoZWV0cy5sZW5ndGg7IGlkeCsrKSB7ICMjIGlmIChzaGVldHNbaWR4XS5vcHRpb25zLnRpdGxlKSB7ICM8dnQ6bHBzdHI+JHtzaGVldHNbaWR4XS5vcHRpb25zLnRpdGxlfTwvdnQ6bHBzdHI+IyB9IGVsc2UgeyAjPHZ0Omxwc3RyPlNoZWV0JHtpZHgrMX08L3Z0Omxwc3RyPiMgfSAjIyB9ICM8L3Z0OnZlY3Rvcj48L1RpdGxlc09mUGFydHM+PExpbmtzVXBUb0RhdGU+ZmFsc2U8L0xpbmtzVXBUb0RhdGU+PFNoYXJlZERvYz5mYWxzZTwvU2hhcmVkRG9jPjxIeXBlcmxpbmtzQ2hhbmdlZD5mYWxzZTwvSHlwZXJsaW5rc0NoYW5nZWQ+PEFwcFZlcnNpb24+MTQuMDMwMDwvQXBwVmVyc2lvbj48L1Byb3BlcnRpZXM+Jykscz1lLnRlbXBsYXRlKCc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiIHN0YW5kYWxvbmU9XCJ5ZXNcIj8+XFxyXFxuPFR5cGVzIHhtbG5zPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9jb250ZW50LXR5cGVzXCI+PERlZmF1bHQgRXh0ZW5zaW9uPVwicmVsc1wiIENvbnRlbnRUeXBlPVwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLXBhY2thZ2UucmVsYXRpb25zaGlwcyt4bWxcIiAvPjxEZWZhdWx0IEV4dGVuc2lvbj1cInhtbFwiIENvbnRlbnRUeXBlPVwiYXBwbGljYXRpb24veG1sXCIgLz48T3ZlcnJpZGUgUGFydE5hbWU9XCIveGwvd29ya2Jvb2sueG1sXCIgQ29udGVudFR5cGU9XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldC5tYWluK3htbFwiIC8+PE92ZXJyaWRlIFBhcnROYW1lPVwiL3hsL3N0eWxlcy54bWxcIiBDb250ZW50VHlwZT1cImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnN0eWxlcyt4bWxcIi8+PE92ZXJyaWRlIFBhcnROYW1lPVwiL3hsL3NoYXJlZFN0cmluZ3MueG1sXCIgQ29udGVudFR5cGU9XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGFyZWRTdHJpbmdzK3htbFwiLz4jIGZvciAodmFyIGlkeCA9IDE7IGlkeCA8PSBjb3VudDsgaWR4KyspIHsgIzxPdmVycmlkZSBQYXJ0TmFtZT1cIi94bC93b3Jrc2hlZXRzL3NoZWV0JHtpZHh9LnhtbFwiIENvbnRlbnRUeXBlPVwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwud29ya3NoZWV0K3htbFwiIC8+IyB9ICM8T3ZlcnJpZGUgUGFydE5hbWU9XCIvZG9jUHJvcHMvY29yZS54bWxcIiBDb250ZW50VHlwZT1cImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1wYWNrYWdlLmNvcmUtcHJvcGVydGllcyt4bWxcIiAvPjxPdmVycmlkZSBQYXJ0TmFtZT1cIi9kb2NQcm9wcy9hcHAueG1sXCIgQ29udGVudFR5cGU9XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuZXh0ZW5kZWQtcHJvcGVydGllcyt4bWxcIiAvPjwvVHlwZXM+JyksbD1lLnRlbXBsYXRlKCc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiIHN0YW5kYWxvbmU9XCJ5ZXNcIj8+XFxyXFxuPHdvcmtib29rIHhtbG5zPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3NwcmVhZHNoZWV0bWwvMjAwNi9tYWluXCIgeG1sbnM6cj1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHNcIj48ZmlsZVZlcnNpb24gYXBwTmFtZT1cInhsXCIgbGFzdEVkaXRlZD1cIjVcIiBsb3dlc3RFZGl0ZWQ9XCI1XCIgcnVwQnVpbGQ9XCI5MzAzXCIgLz48d29ya2Jvb2tQciBkZWZhdWx0VGhlbWVWZXJzaW9uPVwiMTI0MjI2XCIgLz48Ym9va1ZpZXdzPjx3b3JrYm9va1ZpZXcgeFdpbmRvdz1cIjI0MFwiIHlXaW5kb3c9XCI0NVwiIHdpbmRvd1dpZHRoPVwiMTgxOTVcIiB3aW5kb3dIZWlnaHQ9XCI3OTk1XCIgLz48L2Jvb2tWaWV3cz48c2hlZXRzPiMgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgc2hlZXRzLmxlbmd0aDsgaWR4KyspIHsgIyMgaWYgKHNoZWV0c1tpZHhdLm9wdGlvbnMudGl0bGUpIHsgIzxzaGVldCBuYW1lPVwiJHtzaGVldHNbaWR4XS5vcHRpb25zLnRpdGxlfVwiIHNoZWV0SWQ9XCIke2lkeCsxfVwiIHI6aWQ9XCJySWQke2lkeCsxfVwiIC8+IyB9IGVsc2UgeyAjPHNoZWV0IG5hbWU9XCJTaGVldCR7aWR4KzF9XCIgc2hlZXRJZD1cIiR7aWR4KzF9XCIgcjppZD1cInJJZCR7aWR4KzF9XCIgLz4jIH0gIyMgfSAjPC9zaGVldHM+PGNhbGNQciBjYWxjSWQ9XCIxNDU2MjFcIiAvPjwvd29ya2Jvb2s+JyksYz1lLnRlbXBsYXRlKCc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiIHN0YW5kYWxvbmU9XCJ5ZXNcIj8+XFxyXFxuPHdvcmtzaGVldCB4bWxucz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9zcHJlYWRzaGVldG1sLzIwMDYvbWFpblwiIHhtbG5zOm1jPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL21hcmt1cC1jb21wYXRpYmlsaXR5LzIwMDZcIiB4bWxuczpyPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwc1wiIHhtbG5zOngxNGFjPVwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9vZmZpY2Uvc3ByZWFkc2hlZXRtbC8yMDA5LzkvYWNcIiBtYzpJZ25vcmFibGU9XCJ4MTRhY1wiPjxkaW1lbnNpb24gcmVmPVwiQTFcIiAvPjxzaGVldFZpZXdzPjxzaGVldFZpZXcgdGFiU2VsZWN0ZWQ9XCIxXCIgd29ya2Jvb2tWaWV3SWQ9XCIwXCI+IyBpZiAoZnJlZXplUGFuZSkgeyAjPHBhbmUgc3RhdGU9XCJmcm96ZW5cIiMgaWYgKGZyZWV6ZVBhbmUuY29sU3BsaXQpIHsgIyB4U3BsaXQ9XCIke2ZyZWV6ZVBhbmUuY29sU3BsaXR9XCIjIH0gIyMgaWYgKGZyZWV6ZVBhbmUucm93U3BsaXQpIHsgIyB5U3BsaXQ9XCIke2ZyZWV6ZVBhbmUucm93U3BsaXR9XCIjIH0gIyB0b3BMZWZ0Q2VsbD1cIiR7U3RyaW5nLmZyb21DaGFyQ29kZSg2NSArIChmcmVlemVQYW5lLmNvbFNwbGl0IHx8IDApKX0keyhmcmVlemVQYW5lLnJvd1NwbGl0IHx8IDApKzF9XCIvPiMgfSAjPC9zaGVldFZpZXc+PC9zaGVldFZpZXdzPjxzaGVldEZvcm1hdFByIGRlZmF1bHRSb3dIZWlnaHQ9XCIxNVwiIHgxNGFjOmR5RGVzY2VudD1cIjAuMjVcIiAvPiMgaWYgKGNvbHVtbnMpIHsgIzxjb2xzPiMgZm9yICh2YXIgY2kgPSAwOyBjaSA8IGNvbHVtbnMubGVuZ3RoOyBjaSsrKSB7ICMjIHZhciBjb2x1bW4gPSBjb2x1bW5zW2NpXTsgIyMgaWYgKGNvbHVtbi53aWR0aCkgeyAjPGNvbCBtaW49XCIke2NpKzF9XCIgbWF4PVwiJHtjaSsxfVwiIGN1c3RvbVdpZHRoPVwiMVwiIyBpZiAoY29sdW1uLmF1dG9XaWR0aCkgeyAjIHdpZHRoPVwiJHsoKGNvbHVtbi53aWR0aCo3KzUpLzcqMjU2KS8yNTZ9XCIgYmVzdEZpdD1cIjFcIiMgfSBlbHNlIHsgIyB3aWR0aD1cIiR7KCgoY29sdW1uLndpZHRoKS83KSoxMDArMC41KS8xMDB9XCIgIyB9ICMvPiMgfSAjIyB9ICM8L2NvbHM+IyB9ICM8c2hlZXREYXRhPiMgZm9yICh2YXIgcmkgPSAwOyByaSA8IGRhdGEubGVuZ3RoOyByaSsrKSB7ICMjIHZhciByb3cgPSBkYXRhW3JpXTsgIzxyb3cgcj1cIiR7cmkgKyAxfVwiPiMgZm9yICh2YXIgY2kgPSAwOyBjaSA8IHJvdy5kYXRhLmxlbmd0aDsgY2krKykgeyAjIyB2YXIgY2VsbCA9IHJvdy5kYXRhW2NpXTsjPGMgcj1cIiR7Y2VsbC5yZWZ9XCIjIGlmIChjZWxsLnN0eWxlKSB7ICMgcz1cIiR7Y2VsbC5zdHlsZX1cIiAjIH0gIyMgaWYgKGNlbGwudHlwZSkgeyAjIHQ9XCIke2NlbGwudHlwZX1cIiMgfSAjPiMgaWYgKGNlbGwudmFsdWUgIT0gbnVsbCkgeyAjPHY+JHtjZWxsLnZhbHVlfTwvdj4jIH0gIzwvYz4jIH0gIzwvcm93PiMgfSAjPC9zaGVldERhdGE+IyBpZiAoZmlsdGVyKSB7ICM8YXV0b0ZpbHRlciByZWY9XCIke2ZpbHRlci5mcm9tfToke2ZpbHRlci50b31cIi8+IyB9ICMjIGlmIChtZXJnZUNlbGxzLmxlbmd0aCkgeyAjPG1lcmdlQ2VsbHMgY291bnQ9XCIke21lcmdlQ2VsbHMubGVuZ3RofVwiPiMgZm9yICh2YXIgY2kgPSAwOyBjaSA8IG1lcmdlQ2VsbHMubGVuZ3RoOyBjaSsrKSB7ICM8bWVyZ2VDZWxsIHJlZj1cIiR7bWVyZ2VDZWxsc1tjaV19XCIvPiMgfSAjPC9tZXJnZUNlbGxzPiMgfSAjPHBhZ2VNYXJnaW5zIGxlZnQ9XCIwLjdcIiByaWdodD1cIjAuN1wiIHRvcD1cIjAuNzVcIiBib3R0b209XCIwLjc1XCIgaGVhZGVyPVwiMC4zXCIgZm9vdGVyPVwiMC4zXCIgLz48L3dvcmtzaGVldD4nKSxkPWUudGVtcGxhdGUoJzw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCIgc3RhbmRhbG9uZT1cInllc1wiPz5cXHJcXG48UmVsYXRpb25zaGlwcyB4bWxucz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9wYWNrYWdlLzIwMDYvcmVsYXRpb25zaGlwc1wiPiMgZm9yICh2YXIgaWR4ID0gMTsgaWR4IDw9IGNvdW50OyBpZHgrKykgeyAjPFJlbGF0aW9uc2hpcCBJZD1cInJJZCR7aWR4fVwiIFR5cGU9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL3dvcmtzaGVldFwiIFRhcmdldD1cIndvcmtzaGVldHMvc2hlZXQke2lkeH0ueG1sXCIgLz4jIH0gIzxSZWxhdGlvbnNoaXAgSWQ9XCJySWQke2NvdW50KzF9XCIgVHlwZT1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMvc3R5bGVzXCIgVGFyZ2V0PVwic3R5bGVzLnhtbFwiIC8+PFJlbGF0aW9uc2hpcCBJZD1cInJJZCR7Y291bnQrMn1cIiBUeXBlPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9zaGFyZWRTdHJpbmdzXCIgVGFyZ2V0PVwic2hhcmVkU3RyaW5ncy54bWxcIiAvPjwvUmVsYXRpb25zaGlwcz4nKSx1PWUudGVtcGxhdGUoJzw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCIgc3RhbmRhbG9uZT1cInllc1wiPz5cXHJcXG48c3N0IHhtbG5zPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3NwcmVhZHNoZWV0bWwvMjAwNi9tYWluXCIgY291bnQ9XCIke2NvdW50fVwiIHVuaXF1ZUNvdW50PVwiJHt1bmlxdWVDb3VudH1cIj4jIGZvciAodmFyIGluZGV4IGluIGluZGV4ZXMpIHsgIzxzaT48dD4ke2luZGV4LnN1YnN0cmluZygxKX08L3Q+PC9zaT4jIH0gIzwvc3N0PicpLGg9ZS50ZW1wbGF0ZSgnPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIj8+PHN0eWxlU2hlZXQgeG1sbnM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvc3ByZWFkc2hlZXRtbC8yMDA2L21haW5cIiB4bWxuczptYz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9tYXJrdXAtY29tcGF0aWJpbGl0eS8yMDA2XCIgbWM6SWdub3JhYmxlPVwieDE0YWNcIiB4bWxuczp4MTRhYz1cImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vb2ZmaWNlL3NwcmVhZHNoZWV0bWwvMjAwOS85L2FjXCI+PG51bUZtdHMgY291bnQ9XCIke2Zvcm1hdHMubGVuZ3RofVwiPiMgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZvcm1hdHMubGVuZ3RoOyBmaSsrKSB7ICMjIHZhciBmb3JtYXQgPSBmb3JtYXRzW2ZpXTsgIzxudW1GbXQgZm9ybWF0Q29kZT1cIiR7Zm9ybWF0LmZvcm1hdH1cIiBudW1GbXRJZD1cIiR7MTY1K2ZpfVwiIC8+IyB9ICM8L251bUZtdHM+PGZvbnRzIGNvdW50PVwiJHtmb250cy5sZW5ndGgrMX1cIiB4MTRhYzprbm93bkZvbnRzPVwiMVwiPjxmb250PjxzeiB2YWw9XCIxMVwiIC8+PGNvbG9yIHRoZW1lPVwiMVwiIC8+PG5hbWUgdmFsPVwiQ2FsaWJyaVwiIC8+PGZhbWlseSB2YWw9XCIyXCIgLz48c2NoZW1lIHZhbD1cIm1pbm9yXCIgLz48L2ZvbnQ+IyBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZm9udHMubGVuZ3RoOyBmaSsrKSB7ICMjIHZhciBmb250ID0gZm9udHNbZmldOyAjPGZvbnQ+IyBpZiAoZm9udC5ib2xkKSB7ICM8Yi8+IyB9ICMjIGlmIChmb250Lml0YWxpYykgeyAjPGkvPiMgfSAjIyBpZiAoZm9udC51bmRlcmxpbmUpIHsgIzx1Lz4jIH0gIyMgaWYgKGZvbnQuY29sb3IpIHsgIzxjb2xvciByZ2I9XCIke2ZvbnQuY29sb3J9XCIgLz4jIH0gZWxzZSB7ICM8Y29sb3IgdGhlbWU9XCIxXCIgLz4jIH0gIyMgaWYgKGZvbnQuZm9udFNpemUpIHsgIzxzeiB2YWw9XCIke2ZvbnQuZm9udFNpemV9XCIgLz4jIH0gZWxzZSB7ICM8c3ogdmFsPVwiMTFcIiAvPiMgfSAjIyBpZiAoZm9udC5mb250TmFtZSkgeyAjPG5hbWUgdmFsPVwiJHtmb250LmZvbnROYW1lfVwiIC8+IyB9IGVsc2UgeyAjPG5hbWUgdmFsPVwiQ2FsaWJyaVwiIC8+PHNjaGVtZSB2YWw9XCJtaW5vclwiIC8+IyB9ICM8ZmFtaWx5IHZhbD1cIjJcIiAvPjwvZm9udD4jIH0gIzwvZm9udHM+PGZpbGxzIGNvdW50PVwiJHtmaWxscy5sZW5ndGgrMX1cIj48ZmlsbD48cGF0dGVybkZpbGwgcGF0dGVyblR5cGU9XCJub25lXCIvPjwvZmlsbD48ZmlsbD48cGF0dGVybkZpbGwgcGF0dGVyblR5cGU9XCJncmF5MTI1XCIvPjwvZmlsbD4jIGZvciAodmFyIGZpID0gMDsgZmkgPCBmaWxscy5sZW5ndGg7IGZpKyspIHsgIyMgdmFyIGZpbGwgPSBmaWxsc1tmaV07ICMjIGlmIChmaWxsLmJhY2tncm91bmQpIHsgIzxmaWxsPjxwYXR0ZXJuRmlsbCBwYXR0ZXJuVHlwZT1cInNvbGlkXCI+PGZnQ29sb3IgcmdiPVwiJHtmaWxsLmJhY2tncm91bmR9XCIvPjwvcGF0dGVybkZpbGw+PC9maWxsPiMgfSAjIyB9ICM8L2ZpbGxzPjxib3JkZXJzIGNvdW50PVwiMVwiPjxib3JkZXI+PGxlZnQvPjxyaWdodC8+PHRvcC8+PGJvdHRvbS8+PGRpYWdvbmFsLz48L2JvcmRlcj48L2JvcmRlcnM+PGNlbGxYZnMgY291bnQ9XCIke3N0eWxlcy5sZW5ndGgrMX1cIj48eGYgbnVtRm10SWQ9XCIwXCIgZm9udElkPVwiMFwiIGZpbGxJZD1cIjBcIiBib3JkZXJJZD1cIjBcIiB4ZklkPVwiMFwiLz4jIGZvciAodmFyIHNpID0gMDsgc2kgPCBzdHlsZXMubGVuZ3RoOyBzaSsrKSB7ICMjIHZhciBzdHlsZSA9IHN0eWxlc1tzaV07ICM8eGYgeGZpZD1cIjBcIiMgaWYgKHN0eWxlLmZvbnRJZCkgeyAjIGZvbnRJZD1cIiR7c3R5bGUuZm9udElkfVwiIGFwcGx5Rm9udD1cIjFcIiMgfSAjIyBpZiAoc3R5bGUuZmlsbElkKSB7ICMgZmlsbElkPVwiJHtzdHlsZS5maWxsSWR9XCIgYXBwbHlGaWxsPVwiMVwiIyB9ICMjIGlmIChzdHlsZS5udW1GbXRJZCkgeyAjIG51bUZtdElkPVwiJHtzdHlsZS5udW1GbXRJZH1cIiBhcHBseU51bWJlckZvcm1hdD1cIjFcIiMgfSAjIyBpZiAoc3R5bGUuaEFsaWduIHx8IHN0eWxlLnZBbGlnbikgeyAjIGFwcGx5QWxpZ25tZW50PVwiMVwiIyB9ICM+IyBpZiAoc3R5bGUuaEFsaWduIHx8IHN0eWxlLnZBbGlnbikgeyAjPGFsaWdubWVudCMgaWYgKHN0eWxlLmhBbGlnbikgeyAjIGhvcml6b250YWw9XCIke3N0eWxlLmhBbGlnbn1cIiMgfSAjIyBpZiAoc3R5bGUudkFsaWduKSB7ICMgdmVydGljYWw9XCIke3N0eWxlLnZBbGlnbn1cIiMgfSAjLz4jIH0gIzwveGY+IyB9ICM8L2NlbGxYZnM+PGR4ZnMgY291bnQ9XCIwXCIgLz48dGFibGVTdHlsZXMgY291bnQ9XCIwXCIgZGVmYXVsdFRhYmxlU3R5bGU9XCJUYWJsZVN0eWxlTWVkaXVtMlwiIGRlZmF1bHRQaXZvdFN0eWxlPVwiUGl2b3RTdHlsZU1lZGl1bTlcIiAvPjwvc3R5bGVTaGVldD4nKSxwPWUuQ2xhc3MuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXt0aGlzLm9wdGlvbnM9ZSx0aGlzLl9zdHJpbmdzPXQsdGhpcy5fc3R5bGVzPW4sdGhpcy5fbWVyZ2VDZWxscz1bXX0sdG9YTUw6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMucm93c3x8W10sdD10aGlzLm9wdGlvbnMuZmlsdGVyO3JldHVybiBjKHtmcmVlemVQYW5lOnRoaXMub3B0aW9ucy5mcmVlemVQYW5lLGNvbHVtbnM6dGhpcy5vcHRpb25zLmNvbHVtbnMsZGF0YTokLm1hcChlLCQucHJveHkodGhpcy5fcm93LHRoaXMsZSkpLG1lcmdlQ2VsbHM6dGhpcy5fbWVyZ2VDZWxscyxmaWx0ZXI6dD97ZnJvbTpuKDAsdC5mcm9tKSx0bzpuKDAsdC50byl9Om51bGx9KX0sX3JvdzpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX2NlbGxJbmRleD0wLHtkYXRhOiQubWFwKHQuY2VsbHMsJC5wcm94eSh0aGlzLl9jZWxsLHRoaXMsZSxuKSl9fSxfbG9va3VwU3RyaW5nOmZ1bmN0aW9uKGUpe3ZhciB0PVwiJFwiK2Usbj10aGlzLl9zdHJpbmdzLmluZGV4ZXNbdF07cmV0dXJuIHZvaWQgMCE9PW4/ZT1uOihlPXRoaXMuX3N0cmluZ3MuaW5kZXhlc1t0XT10aGlzLl9zdHJpbmdzLnVuaXF1ZUNvdW50LHRoaXMuX3N0cmluZ3MudW5pcXVlQ291bnQrKyksdGhpcy5fc3RyaW5ncy5jb3VudCsrLGV9LF9sb29rdXBTdHlsZTpmdW5jdGlvbih0KXt2YXIgbixpPWUuc3RyaW5naWZ5KHQpO3JldHVyblwie31cIj09aT8wOihuPSQuaW5BcnJheShpLHRoaXMuX3N0eWxlcyksMD5uJiYobj10aGlzLl9zdHlsZXMucHVzaChpKS0xKSxuKzEpfSxfY2VsbDpmdW5jdGlvbih0LGkscil7dmFyIG8sYSxzLGwsYyxkLHUsaCxwLGYsZztpZighcilyZXR1cm4gdm9pZCB0aGlzLl9jZWxsSW5kZXgrKztpZihvPXIudmFsdWUsYT17Ym9sZDpyLmJvbGQsY29sb3I6ci5jb2xvcixiYWNrZ3JvdW5kOnIuYmFja2dyb3VuZCxpdGFsaWM6ci5pdGFsaWMsdW5kZXJsaW5lOnIudW5kZXJsaW5lLGZvbnROYW1lOnIuZm9udE5hbWUsZm9udFNpemU6ci5mb250U2l6ZSxmb3JtYXQ6ci5mb3JtYXQsaEFsaWduOnIuaEFsaWduLHZBbGlnbjpyLnZBbGlnbn0scz10aGlzLm9wdGlvbnMuY29sdW1uc3x8W10sbD1zW3RoaXMuX2NlbGxJbmRleF0sbCYmbC5hdXRvV2lkdGgmJihsLndpZHRoPU1hdGgubWF4KGwud2lkdGh8fDAsKFwiXCIrbykubGVuZ3RoKSksYz10eXBlb2YgbyxcInN0cmluZ1wiPT09Yz8obz10aGlzLl9sb29rdXBTdHJpbmcobyksYz1cInNcIik6XCJudW1iZXJcIj09PWM/Yz1cIm5cIjpcImJvb2xlYW5cIj09PWM/KGM9XCJiXCIsbz0rbyk6byYmby5nZXRUaW1lPyhjPVwiZFwiLG89ZS50aW1lem9uZS5yZW1vdmUobyxcIkV0Yy9VVENcIikudG9KU09OKCksYS5mb3JtYXR8fChhLmZvcm1hdD1cIm1tLWRkLXl5XCIpKTooYz1udWxsLG89XCJcIiksYT10aGlzLl9sb29rdXBTdHlsZShhKSxkPXt2YWx1ZTpvLHR5cGU6YyxzdHlsZTphLHJlZjpuKGksdGhpcy5fY2VsbEluZGV4KX0sdT1yLmNvbFNwYW58fDEsaD1yLnJvd1NwYW58fDEsdT4xfHxoPjEpe2ZvcihwPVtkXSxmPTE7dT5mO2YrKyl0aGlzLl9jZWxsSW5kZXgrKyxwW2ZdPXtyZWY6bihpLHRoaXMuX2NlbGxJbmRleCl9O2ZvcihnPTE7aD5nO2crKyl0W2krZ10mJnRbaStnXS5jZWxscy5zcGxpY2UodGhpcy5fY2VsbEluZGV4LDAse30pO3RoaXMuX21lcmdlQ2VsbHMucHVzaChkLnJlZitcIjpcIituKGkraC0xLHRoaXMuX2NlbGxJbmRleCkpLGQ9cH1yZXR1cm4gdGhpcy5fY2VsbEluZGV4KyssZH19KSxmPXtHZW5lcmFsOjAsMDoxLFwiMC4wMFwiOjIsXCIjLCMjMFwiOjMsXCIjLCMjMC4wMFwiOjQsXCIwJVwiOjksXCIwLjAwJVwiOjEwLFwiMC4wMEUrMDBcIjoxMSxcIiMgPy8/XCI6MTIsXCIjID8/Lz8/XCI6MTMsXCJtbS1kZC15eVwiOjE0LFwiZC1tbW0teXlcIjoxNSxcImQtbW1tXCI6MTYsXCJtbW0teXlcIjoxNyxcImg6bW0gQU0vUE1cIjoxOCxcImg6bW06c3MgQU0vUE1cIjoxOSxcImg6bW1cIjoyMCxcImg6bW06c3NcIjoyMSxcIm0vZC95eSBoOm1tXCI6MjIsXCIjLCMjMCA7KCMsIyMwKVwiOjM3LFwiIywjIzAgO1tSZWRdKCMsIyMwKVwiOjM4LFwiIywjIzAuMDA7KCMsIyMwLjAwKVwiOjM5LFwiIywjIzAuMDA7W1JlZF0oIywjIzAuMDApXCI6NDAsXCJtbTpzc1wiOjQ1LFwiW2hdOm1tOnNzXCI6NDYsXCJtbXNzLjBcIjo0NyxcIiMjMC4wRSswXCI6NDgsXCJAXCI6NDksXCJbJC00MDRdZS9tL2RcIjoyNyxcIm0vZC95eVwiOjMwLHQwOjU5LFwidDAuMDBcIjo2MCxcInQjLCMjMFwiOjYxLFwidCMsIyMwLjAwXCI6NjIsXCJ0MCVcIjo2NyxcInQwLjAwJVwiOjY4LFwidCMgPy8/XCI6NjksXCJ0IyA/Py8/P1wiOjcwfSxnPWUuQ2xhc3MuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucz1lfHx7fSx0aGlzLl9zdHJpbmdzPXtpbmRleGVzOnt9LGNvdW50OjAsdW5pcXVlQ291bnQ6MH0sdGhpcy5fc3R5bGVzPVtdLHRoaXMuX3NoZWV0cz0kLm1hcCh0aGlzLm9wdGlvbnMuc2hlZXRzfHxbXSwkLnByb3h5KGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgcChlLHRoaXMuX3N0cmluZ3MsdGhpcy5fc3R5bGVzKX0sdGhpcykpfSx0b0RhdGFVUkw6ZnVuY3Rpb24oKXt2YXIgdCxuLGMscCxnLG0sdixfLHksdyxiLGsseDtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgSlNaaXApdGhyb3cgRXJyb3IoXCJKU1ppcCBub3QgZm91bmQuIENoZWNrIGh0dHA6Ly9kb2NzLnRlbGVyaWsuY29tL2tlbmRvLXVpL2ZyYW1ld29yay9leGNlbC9pbnRyb2R1Y3Rpb24jcmVxdWlyZW1lbnRzIGZvciBtb3JlIGRldGFpbHMuXCIpO2Zvcih0PW5ldyBKU1ppcCxuPXQuZm9sZGVyKFwiZG9jUHJvcHNcIiksbi5maWxlKFwiY29yZS54bWxcIixvKHtjcmVhdG9yOnRoaXMub3B0aW9ucy5jcmVhdG9yfHxcIktlbmRvIFVJXCIsbGFzdE1vZGlmaWVkQnk6dGhpcy5vcHRpb25zLmNyZWF0b3J8fFwiS2VuZG8gVUlcIixjcmVhdGVkOnRoaXMub3B0aW9ucy5kYXRlfHwobmV3IERhdGUpLnRvSlNPTigpLG1vZGlmaWVkOnRoaXMub3B0aW9ucy5kYXRlfHwobmV3IERhdGUpLnRvSlNPTigpfSkpLGM9dGhpcy5fc2hlZXRzLmxlbmd0aCxuLmZpbGUoXCJhcHAueG1sXCIsYSh7c2hlZXRzOnRoaXMuX3NoZWV0c30pKSxwPXQuZm9sZGVyKFwiX3JlbHNcIikscC5maWxlKFwiLnJlbHNcIixyKSxnPXQuZm9sZGVyKFwieGxcIiksbT1nLmZvbGRlcihcIl9yZWxzXCIpLG0uZmlsZShcIndvcmtib29rLnhtbC5yZWxzXCIsZCh7Y291bnQ6Y30pKSxnLmZpbGUoXCJ3b3JrYm9vay54bWxcIixsKHtzaGVldHM6dGhpcy5fc2hlZXRzfSkpLHY9Zy5mb2xkZXIoXCJ3b3Jrc2hlZXRzXCIpLF89MDtjPl87XysrKXYuZmlsZShlLmZvcm1hdChcInNoZWV0ezB9LnhtbFwiLF8rMSksdGhpcy5fc2hlZXRzW19dLnRvWE1MKCkpO1xyXG5yZXR1cm4geT0kLm1hcCh0aGlzLl9zdHlsZXMsJC5wYXJzZUpTT04pLHc9ZnVuY3Rpb24oZSl7cmV0dXJuIGUudW5kZXJsaW5lfHxlLmJvbGR8fGUuaXRhbGljfHxlLmNvbG9yfHxlLmZvbnROYW1lfHxlLmZvbnRTaXplfSxiPSQubWFwKHksZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29sb3ImJihlLmNvbG9yPWkoZS5jb2xvcikpLHcoZSk/ZTp2b2lkIDB9KSxrPSQubWFwKHksZnVuY3Rpb24oZSl7cmV0dXJuIGUuZm9ybWF0JiZ2b2lkIDA9PT1mW2UuZm9ybWF0XT9lOnZvaWQgMH0pLHg9JC5tYXAoeSxmdW5jdGlvbihlKXtyZXR1cm4gZS5iYWNrZ3JvdW5kPyhlLmJhY2tncm91bmQ9aShlLmJhY2tncm91bmQpLGUpOnZvaWQgMH0pLGcuZmlsZShcInN0eWxlcy54bWxcIixoKHtmb250czpiLGZpbGxzOngsZm9ybWF0czprLHN0eWxlczokLm1hcCh5LGZ1bmN0aW9uKGUpe3ZhciB0PXt9O3JldHVybiB3KGUpJiYodC5mb250SWQ9JC5pbkFycmF5KGUsYikrMSksZS5iYWNrZ3JvdW5kJiYodC5maWxsSWQ9JC5pbkFycmF5KGUseCkrMiksdC5oQWxpZ249ZS5oQWxpZ24sdC52QWxpZ249ZS52QWxpZ24sZS5mb3JtYXQmJih0Lm51bUZtdElkPXZvaWQgMCE9PWZbZS5mb3JtYXRdP2ZbZS5mb3JtYXRdOjE2NSskLmluQXJyYXkoZSxrKSksdH0pfSkpLGcuZmlsZShcInNoYXJlZFN0cmluZ3MueG1sXCIsdSh0aGlzLl9zdHJpbmdzKSksdC5maWxlKFwiW0NvbnRlbnRfVHlwZXNdLnhtbFwiLHMoe2NvdW50OmN9KSksXCJkYXRhOmFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0O2Jhc2U2NCxcIit0LmdlbmVyYXRlKHtjb21wcmVzc2lvbjpcIkRFRkxBVEVcIn0pfX0pO2Uub294bWw9e1dvcmtib29rOmcsV29ya3NoZWV0OnB9fShrZW5kbyksZnVuY3Rpb24oZSx0KXt0LkV4Y2VsRXhwb3J0ZXI9dC5DbGFzcy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24obil7bi5jb2x1bW5zPXRoaXMuX3RyaW1Db2x1bW5zKG4uY29sdW1uc3x8W10pLHRoaXMuY29sdW1ucz1lLm1hcCh0aGlzLl9sZWFmQ29sdW1ucyhuLmNvbHVtbnN8fFtdKSx0aGlzLl9wcmVwYXJlQ29sdW1uKSx0aGlzLm9wdGlvbnM9bjt2YXIgaT1uLmRhdGFTb3VyY2U7dGhpcy5kYXRhU291cmNlPWkgaW5zdGFuY2VvZiB0LmRhdGEuRGF0YVNvdXJjZT9uZXcgaS5jb25zdHJ1Y3RvcihlLmV4dGVuZCh7fSxpLm9wdGlvbnMse3BhZ2U6bi5hbGxQYWdlcz8wOmkucGFnZSgpLGZpbHRlcjppLmZpbHRlcigpLHBhZ2VTaXplOm4uYWxsUGFnZXM/aS50b3RhbCgpOmkucGFnZVNpemUoKSxzb3J0Omkuc29ydCgpLGdyb3VwOmkuZ3JvdXAoKSxhZ2dyZWdhdGU6aS5hZ2dyZWdhdGUoKX0pKTp0LmRhdGEuRGF0YVNvdXJjZS5jcmVhdGUoaSksaSBpbnN0YW5jZW9mIHQuZGF0YS5UcmVlTGlzdERhdGFTb3VyY2UmJnRoaXMuZGF0YVNvdXJjZS5kYXRhKGkudmlldygpLnRvSlNPTigpKX0sX3RyaW1Db2x1bW5zOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7cmV0dXJuIGUuZ3JlcCh0LGZ1bmN0aW9uKGUpe3ZhciB0PSEoIWUuZmllbGR8fGUuaGlkZGVuKTtyZXR1cm4hdCYmZS5jb2x1bW5zJiYodD1uLl90cmltQ29sdW1ucyhlLmNvbHVtbnMpLmxlbmd0aD4wKSx0fSl9LF9sZWFmQ29sdW1uczpmdW5jdGlvbihlKXt2YXIgdCxuPVtdO2Zvcih0PTA7ZS5sZW5ndGg+dDt0KyspZVt0XS5jb2x1bW5zP249bi5jb25jYXQodGhpcy5fbGVhZkNvbHVtbnMoZVt0XS5jb2x1bW5zKSk6bi5wdXNoKGVbdF0pO3JldHVybiBufSx3b3JrYm9vazpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZGF0YVNvdXJjZS5mZXRjaCgpO3JldHVybiB0LnRoZW4oZS5wcm94eShmdW5jdGlvbigpe3JldHVybntzaGVldHM6W3tjb2x1bW5zOnRoaXMuX2NvbHVtbnMoKSxyb3dzOnRoaXMuX3Jvd3MoKSxmcmVlemVQYW5lOnRoaXMuX2ZyZWV6ZVBhbmUoKSxmaWx0ZXI6dGhpcy5fZmlsdGVyKCl9XX19LHRoaXMpKX0sX3ByZXBhcmVDb2x1bW46ZnVuY3Rpb24obil7cmV0dXJuIG4uZmllbGQmJiFuLmhpZGRlbj9lLmV4dGVuZCh7fSxuLHtncm91cEhlYWRlclRlbXBsYXRlOnQudGVtcGxhdGUobi5ncm91cEhlYWRlclRlbXBsYXRlfHxcIiR7dGl0bGV9OiAke3ZhbHVlfVwiKSxncm91cEZvb3RlclRlbXBsYXRlOm4uZ3JvdXBGb290ZXJUZW1wbGF0ZT90LnRlbXBsYXRlKG4uZ3JvdXBGb290ZXJUZW1wbGF0ZSk6bnVsbCxmb290ZXJUZW1wbGF0ZTpuLmZvb3RlclRlbXBsYXRlP3QudGVtcGxhdGUobi5mb290ZXJUZW1wbGF0ZSk6bnVsbH0pOnZvaWQgMH0sX2ZpbHRlcjpmdW5jdGlvbigpe2lmKCF0aGlzLm9wdGlvbnMuZmlsdGVyYWJsZSlyZXR1cm4gbnVsbDt2YXIgZT10aGlzLl9kZXB0aCgpO3JldHVybntmcm9tOmUsdG86ZSt0aGlzLmNvbHVtbnMubGVuZ3RoLTF9fSxfZGF0YVJvd3M6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzLl9kZXB0aCgpLHI9ZS5tYXAodCxlLnByb3h5KGZ1bmN0aW9uKHQpe3ZhciByLG8sYSxzLGwsYyxkLHU7cmV0dXJuIHRoaXMuX2hpZXJhcmNoaWNhbCgpJiYobj10aGlzLmRhdGFTb3VyY2UubGV2ZWwodCkrMSkscj1lLm1hcChBcnJheShuKSxmdW5jdGlvbigpe3JldHVybntiYWNrZ3JvdW5kOlwiI2RmZGZkZlwiLGNvbG9yOlwiIzMzM1wifX0pLGkmJnQuaXRlbXM/KG89ZS5ncmVwKHRoaXMuY29sdW1ucyxmdW5jdGlvbihlKXtyZXR1cm4gZS5maWVsZD09dC5maWVsZH0pWzBdLGE9byYmby50aXRsZT9vLnRpdGxlOnQuZmllbGQscz1vP28uZ3JvdXBIZWFkZXJUZW1wbGF0ZTpudWxsLGw9YStcIjogXCIrdC52YWx1ZSxjPWUuZXh0ZW5kKHt0aXRsZTphLGZpZWxkOnQuZmllbGQsdmFsdWU6dC52YWx1ZSxhZ2dyZWdhdGVzOnQuYWdncmVnYXRlc30sdC5hZ2dyZWdhdGVzW3QuZmllbGRdKSxzJiYobD1zKGMpKSxyLnB1c2goe3ZhbHVlOmwsYmFja2dyb3VuZDpcIiNkZmRmZGZcIixjb2xvcjpcIiMzMzNcIixjb2xTcGFuOnRoaXMuY29sdW1ucy5sZW5ndGgraS1ufSksZD10aGlzLl9kYXRhUm93cyh0Lml0ZW1zLG4rMSksZC51bnNoaWZ0KHt0eXBlOlwiZ3JvdXAtaGVhZGVyXCIsY2VsbHM6cn0pLGQuY29uY2F0KHRoaXMuX2Zvb3Rlcih0LG4rMSkpKToodT1lLm1hcCh0aGlzLmNvbHVtbnMsZS5wcm94eSh0aGlzLl9jZWxsLHRoaXMsdCkpLHRoaXMuX2hpZXJhcmNoaWNhbCgpJiYodVswXS5jb2xTcGFuPWktbisxKSx7dHlwZTpcImRhdGFcIixjZWxsczpyLmNvbmNhdCh1KX0pfSx0aGlzKSk7cmV0dXJuIHJ9LF9mb290ZXI6ZnVuY3Rpb24odCxuKXt2YXIgaT1bXSxyPSExLG89ZS5tYXAodGhpcy5jb2x1bW5zLGZ1bmN0aW9uKGUpe3JldHVybiBlLmdyb3VwRm9vdGVyVGVtcGxhdGU/KHI9ITAse2JhY2tncm91bmQ6XCIjZGZkZmRmXCIsY29sb3I6XCIjMzMzXCIsdmFsdWU6ZS5ncm91cEZvb3RlclRlbXBsYXRlKHQuYWdncmVnYXRlc1tlLmZpZWxkXSl9KTp7YmFja2dyb3VuZDpcIiNkZmRmZGZcIixjb2xvcjpcIiMzMzNcIn19KTtyZXR1cm4gciYmaS5wdXNoKHt0eXBlOlwiZ3JvdXAtZm9vdGVyXCIsY2VsbHM6ZS5tYXAoQXJyYXkobiksZnVuY3Rpb24oKXtyZXR1cm57YmFja2dyb3VuZDpcIiNkZmRmZGZcIixjb2xvcjpcIiMzMzNcIn19KS5jb25jYXQobyl9KSxpfSxfaXNDb2x1bW5WaXNpYmxlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl92aXNpYmxlQ29sdW1ucyhbZV0pLmxlbmd0aD4wJiYoZS5maWVsZHx8ZS5jb2x1bW5zKX0sX3Zpc2libGVDb2x1bW5zOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7cmV0dXJuIGUuZ3JlcCh0LGZ1bmN0aW9uKGUpe3ZhciB0PSFlLmhpZGRlbjtyZXR1cm4gdCYmZS5jb2x1bW5zJiYodD1uLl92aXNpYmxlQ29sdW1ucyhlLmNvbHVtbnMpLmxlbmd0aD4wKSx0fSl9LF9oZWFkZXJSb3c6ZnVuY3Rpb24odCxuKXt2YXIgaT1lLm1hcCh0LmNlbGxzLGZ1bmN0aW9uKGUpe3JldHVybntiYWNrZ3JvdW5kOlwiIzdhN2E3YVwiLGNvbG9yOlwiI2ZmZlwiLHZhbHVlOmUudGl0bGUsY29sU3BhbjplLmNvbFNwYW4+MT9lLmNvbFNwYW46MSxyb3dTcGFuOnQucm93U3Bhbj4xJiYhZS5jb2xTcGFuP3Qucm93U3BhbjoxfX0pO3JldHVybiB0aGlzLl9oaWVyYXJjaGljYWwoKSYmKGlbMF0uY29sU3Bhbj10aGlzLl9kZXB0aCgpKzEpLHt0eXBlOlwiaGVhZGVyXCIsY2VsbHM6ZS5tYXAoQXJyYXkobi5sZW5ndGgpLGZ1bmN0aW9uKCl7cmV0dXJue2JhY2tncm91bmQ6XCIjN2E3YTdhXCIsY29sb3I6XCIjZmZmXCJ9fSkuY29uY2F0KGkpfX0sX3ByZXBlbmRIZWFkZXJSb3dzOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5kYXRhU291cmNlLmdyb3VwKCksaT1be3Jvd1NwYW46MSxjZWxsczpbXSxpbmRleDowfV07Zm9yKHRoaXMuX3ByZXBhcmVIZWFkZXJSb3dzKGksdGhpcy5vcHRpb25zLmNvbHVtbnMpLHQ9aS5sZW5ndGgtMTt0Pj0wO3QtLSllLnVuc2hpZnQodGhpcy5faGVhZGVyUm93KGlbdF0sbikpfSxfcHJlcGFyZUhlYWRlclJvd3M6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbyxhLHM9aXx8ZVtlLmxlbmd0aC0xXSxsPWVbcy5pbmRleCsxXSxjPTA7Zm9yKGE9MDt0Lmxlbmd0aD5hO2ErKylyPXRbYV0sdGhpcy5faXNDb2x1bW5WaXNpYmxlKHIpJiYobz17dGl0bGU6ci50aXRsZXx8ci5maWVsZCxjb2xTcGFuOjB9LHMuY2VsbHMucHVzaChvKSxyLmNvbHVtbnMmJnIuY29sdW1ucy5sZW5ndGgmJihsfHwobD17cm93U3BhbjowLGNlbGxzOltdLGluZGV4OmUubGVuZ3RofSxlLnB1c2gobCkpLG8uY29sU3Bhbj10aGlzLl90cmltQ29sdW1ucyh0aGlzLl92aXNpYmxlQ29sdW1ucyhyLmNvbHVtbnMpKS5sZW5ndGgsdGhpcy5fcHJlcGFyZUhlYWRlclJvd3MoZSxyLmNvbHVtbnMsbyxsKSxjKz1vLmNvbFNwYW4tMSxzLnJvd1NwYW49ZS5sZW5ndGgtcy5pbmRleCkpO24mJihuLmNvbFNwYW4rPWMpfSxfcm93czpmdW5jdGlvbigpe3ZhciB0LG4saT10aGlzLmRhdGFTb3VyY2UuZ3JvdXAoKSxyPXRoaXMuX2RhdGFSb3dzKHRoaXMuZGF0YVNvdXJjZS52aWV3KCksMCk7cmV0dXJuIHRoaXMuY29sdW1ucy5sZW5ndGgmJih0aGlzLl9wcmVwZW5kSGVhZGVyUm93cyhyKSx0PSExLG49ZS5tYXAodGhpcy5jb2x1bW5zLGUucHJveHkoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZm9vdGVyVGVtcGxhdGU/KHQ9ITAse2JhY2tncm91bmQ6XCIjZGZkZmRmXCIsY29sb3I6XCIjMzMzXCIsdmFsdWU6ZS5mb290ZXJUZW1wbGF0ZSh0aGlzLmRhdGFTb3VyY2UuYWdncmVnYXRlcygpW2UuZmllbGRdKX0pOntiYWNrZ3JvdW5kOlwiI2RmZGZkZlwiLGNvbG9yOlwiIzMzM1wifX0sdGhpcykpLHQmJnIucHVzaCh7dHlwZTpcImZvb3RlclwiLGNlbGxzOmUubWFwKEFycmF5KGkubGVuZ3RoKSxmdW5jdGlvbigpe3JldHVybntiYWNrZ3JvdW5kOlwiI2RmZGZkZlwiLGNvbG9yOlwiIzMzM1wifX0pLmNvbmNhdChuKX0pKSxyfSxfaGVhZGVyRGVwdGg6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPTEscj0wO2Zvcih0PTA7ZS5sZW5ndGg+dDt0KyspZVt0XS5jb2x1bW5zJiYobj10aGlzLl9oZWFkZXJEZXB0aChlW3RdLmNvbHVtbnMpLG4+ciYmKHI9bikpO3JldHVybiBpK3J9LF9mcmVlemVQYW5lOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fdmlzaWJsZUNvbHVtbnModGhpcy5vcHRpb25zLmNvbHVtbnN8fFtdKSxuPXRoaXMuX3RyaW1Db2x1bW5zKHRoaXMuX2xlYWZDb2x1bW5zKGUuZ3JlcCh0LGZ1bmN0aW9uKGUpe3JldHVybiBlLmxvY2tlZH0pKSkubGVuZ3RoO3JldHVybntyb3dTcGxpdDp0aGlzLl9oZWFkZXJEZXB0aCh0KSxjb2xTcGxpdDpuP24rdGhpcy5kYXRhU291cmNlLmdyb3VwKCkubGVuZ3RoOjB9fSxfY2VsbDpmdW5jdGlvbihlLHQpe3JldHVybiB0LmZpZWxkP3t2YWx1ZTplLmdldCh0LmZpZWxkKX06dm9pZCAwfSxfaGllcmFyY2hpY2FsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5oaWVyYXJjaHkmJnRoaXMuZGF0YVNvdXJjZS5sZXZlbH0sX2RlcHRoOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGk9dGhpcy5kYXRhU291cmNlLHI9MDtpZih0aGlzLl9oaWVyYXJjaGljYWwoKSl7Zm9yKGU9aS52aWV3KCksdD0wO2UubGVuZ3RoPnQ7dCsrKW49aS5sZXZlbChlW3RdKSxuPnImJihyPW4pO3IrK31lbHNlIHI9aS5ncm91cCgpLmxlbmd0aDtyZXR1cm4gcn0sX2NvbHVtbnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9kZXB0aCgpLG49ZS5tYXAoQXJyYXkodCksZnVuY3Rpb24oKXtyZXR1cm57d2lkdGg6MjB9fSk7cmV0dXJuIG4uY29uY2F0KGUubWFwKHRoaXMuY29sdW1ucyxmdW5jdGlvbihlKXtyZXR1cm57d2lkdGg6cGFyc2VJbnQoZS53aWR0aCwxMCksYXV0b1dpZHRoOmUud2lkdGg/ITE6ITB9fSkpfX0pLHQuRXhjZWxNaXhpbj17ZXh0ZW5kOmZ1bmN0aW9uKHQpe3QuZXZlbnRzLnB1c2goXCJleGNlbEV4cG9ydFwiKSx0Lm9wdGlvbnMuZXhjZWw9ZS5leHRlbmQodC5vcHRpb25zLmV4Y2VsLHRoaXMub3B0aW9ucyksdC5zYXZlQXNFeGNlbD10aGlzLnNhdmVBc0V4Y2VsfSxvcHRpb25zOntwcm94eVVSTDpcIlwiLGFsbFBhZ2VzOiExLGZpbHRlcmFibGU6ITEsZmlsZU5hbWU6XCJFeHBvcnQueGxzeFwifSxzYXZlQXNFeGNlbDpmdW5jdGlvbigpe3ZhciBuPXRoaXMub3B0aW9ucy5leGNlbHx8e30saT1uZXcgdC5FeGNlbEV4cG9ydGVyKHtjb2x1bW5zOnRoaXMuY29sdW1ucyxkYXRhU291cmNlOnRoaXMuZGF0YVNvdXJjZSxhbGxQYWdlczpuLmFsbFBhZ2VzLGZpbHRlcmFibGU6bi5maWx0ZXJhYmxlLGhpZXJhcmNoeTpuLmhpZXJhcmNoeX0pO2kud29ya2Jvb2soKS50aGVuKGUucHJveHkoZnVuY3Rpb24oZSl7aWYoIXRoaXMudHJpZ2dlcihcImV4Y2VsRXhwb3J0XCIse3dvcmtib29rOmV9KSl7dmFyIGk9bmV3IHQub294bWwuV29ya2Jvb2soZSk7dC5zYXZlQXMoe2RhdGFVUkk6aS50b0RhdGFVUkwoKSxmaWxlTmFtZTplLmZpbGVOYW1lfHxuLmZpbGVOYW1lLHByb3h5VVJMOm4ucHJveHlVUkwsZm9yY2VQcm94eTpuLmZvcmNlUHJveHl9KX19LHRoaXMpKX19fShrZW5kby5qUXVlcnksa2VuZG8pLGZ1bmN0aW9uKCl7a2VuZG8uZGF0YS50cmFuc3BvcnRzLnNpZ25hbHI9a2VuZG8uZGF0YS5SZW1vdGVUcmFuc3BvcnQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0LG49ZSYmZS5zaWduYWxyP2Uuc2lnbmFscjp7fSxpPW4ucHJvbWlzZTtpZighaSl0aHJvdyBFcnJvcignVGhlIFwicHJvbWlzZVwiIG9wdGlvbiBtdXN0IGJlIHNldC4nKTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBpLmRvbmV8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIGkuZmFpbCl0aHJvdyBFcnJvcignVGhlIFwicHJvbWlzZVwiIG9wdGlvbiBtdXN0IGJlIGEgUHJvbWlzZS4nKTtpZih0aGlzLnByb21pc2U9aSx0PW4uaHViLCF0KXRocm93IEVycm9yKCdUaGUgXCJodWJcIiBvcHRpb24gbXVzdCBiZSBzZXQuJyk7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdC5vbnx8XCJmdW5jdGlvblwiIT10eXBlb2YgdC5pbnZva2UpdGhyb3cgRXJyb3IoJ1RoZSBcImh1YlwiIG9wdGlvbiBpcyBub3QgYSB2YWxpZCBTaWduYWxSIGh1YiBwcm94eS4nKTt0aGlzLmh1Yj10LGtlbmRvLmRhdGEuUmVtb3RlVHJhbnNwb3J0LmZuLmluaXQuY2FsbCh0aGlzLGUpfSxwdXNoOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9ucy5zaWduYWxyLmNsaWVudHx8e307dC5jcmVhdGUmJnRoaXMuaHViLm9uKHQuY3JlYXRlLGUucHVzaENyZWF0ZSksdC51cGRhdGUmJnRoaXMuaHViLm9uKHQudXBkYXRlLGUucHVzaFVwZGF0ZSksdC5kZXN0cm95JiZ0aGlzLmh1Yi5vbih0LmRlc3Ryb3ksZS5wdXNoRGVzdHJveSl9LF9jcnVkOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMuaHViLG89dGhpcy5vcHRpb25zLnNpZ25hbHIuc2VydmVyO2lmKCFvfHwhb1t0XSl0aHJvdyBFcnJvcihrZW5kby5mb3JtYXQoJ1RoZSBcInNlcnZlci57MH1cIiBvcHRpb24gbXVzdCBiZSBzZXQuJyx0KSk7bj1bb1t0XV0saT10aGlzLnBhcmFtZXRlck1hcChlLmRhdGEsdCksJC5pc0VtcHR5T2JqZWN0KGkpfHxuLnB1c2goaSksdGhpcy5wcm9taXNlLmRvbmUoZnVuY3Rpb24oKXtyLmludm9rZS5hcHBseShyLG4pLmRvbmUoZS5zdWNjZXNzKS5mYWlsKGUuZXJyb3IpfSl9LHJlYWQ6ZnVuY3Rpb24oZSl7dGhpcy5fY3J1ZChlLFwicmVhZFwiKX0sY3JlYXRlOmZ1bmN0aW9uKGUpe3RoaXMuX2NydWQoZSxcImNyZWF0ZVwiKX0sdXBkYXRlOmZ1bmN0aW9uKGUpe3RoaXMuX2NydWQoZSxcInVwZGF0ZVwiKX0sZGVzdHJveTpmdW5jdGlvbihlKXt0aGlzLl9jcnVkKGUsXCJkZXN0cm95XCIpfX0pfSgpLGZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiBpKGUscil7dmFyIGEsZDtpZihudWxsPT1lfHxcIm5vbmVcIj09ZSlyZXR1cm4gbnVsbDtpZihlIGluc3RhbmNlb2YgcylyZXR1cm4gZTtpZihlPWUudG9Mb3dlckNhc2UoKSxhPW8uZXhlYyhlKSlyZXR1cm4gZT1cInRyYW5zcGFyZW50XCI9PWFbMV0/bmV3IGwoMSwxLDEsMCk6aSh1Lm5hbWVkQ29sb3JzW2FbMV1dLHIpLGUubWF0Y2g9W2FbMV1dLGU7aWYoKGE9L14jPyhbMC05YS1mXXsyfSkoWzAtOWEtZl17Mn0pKFswLTlhLWZdezJ9KS9pLmV4ZWMoZSkpP2Q9bmV3IGMobihhWzFdLDE2KSxuKGFbMl0sMTYpLG4oYVszXSwxNiksMSk6KGE9L14jPyhbMC05YS1mXSkoWzAtOWEtZl0pKFswLTlhLWZdKS9pLmV4ZWMoZSkpP2Q9bmV3IGMobihhWzFdK2FbMV0sMTYpLG4oYVsyXSthWzJdLDE2KSxuKGFbM10rYVszXSwxNiksMSk6KGE9L15yZ2JcXChcXHMqKFswLTldKylcXHMqLFxccyooWzAtOV0rKVxccyosXFxzKihbMC05XSspXFxzKlxcKS8uZXhlYyhlKSk/ZD1uZXcgYyhuKGFbMV0sMTApLG4oYVsyXSwxMCksbihhWzNdLDEwKSwxKTooYT0vXnJnYmFcXChcXHMqKFswLTldKylcXHMqLFxccyooWzAtOV0rKVxccyosXFxzKihbMC05XSspXFxzKixcXHMqKFswLTkuXSspXFxzKlxcKS8uZXhlYyhlKSk/ZD1uZXcgYyhuKGFbMV0sMTApLG4oYVsyXSwxMCksbihhWzNdLDEwKSx0KGFbNF0pKTooYT0vXnJnYlxcKFxccyooWzAtOV0qXFwuP1swLTldKyklXFxzKixcXHMqKFswLTldKlxcLj9bMC05XSspJVxccyosXFxzKihbMC05XSpcXC4/WzAtOV0rKSVcXHMqXFwpLy5leGVjKGUpKT9kPW5ldyBsKHQoYVsxXSkvMTAwLHQoYVsyXSkvMTAwLHQoYVszXSkvMTAwLDEpOihhPS9ecmdiYVxcKFxccyooWzAtOV0qXFwuP1swLTldKyklXFxzKixcXHMqKFswLTldKlxcLj9bMC05XSspJVxccyosXFxzKihbMC05XSpcXC4/WzAtOV0rKSVcXHMqLFxccyooWzAtOS5dKylcXHMqXFwpLy5leGVjKGUpKSYmKGQ9bmV3IGwodChhWzFdKS8xMDAsdChhWzJdKS8xMDAsdChhWzNdKS8xMDAsdChhWzRdKSkpLGQpZC5tYXRjaD1hO2Vsc2UgaWYoIXIpdGhyb3cgRXJyb3IoXCJDYW5ub3QgcGFyc2UgY29sb3I6IFwiK2UpO3JldHVybiBkfWZ1bmN0aW9uIHIoZSx0LG4pe2ZvcihufHwobj1cIjBcIiksZT1lLnRvU3RyaW5nKDE2KTt0PmUubGVuZ3RoOyllPVwiMFwiK2U7cmV0dXJuIGV9dmFyIG8sYSxzLGwsYyxkLHU9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhPXRoaXMscz11LmZvcm1hdHM7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKGU9YS5yZXNvbHZlQ29sb3IoZSkscj0wO3MubGVuZ3RoPnI7cisrKXQ9c1tyXS5yZSxuPXNbcl0ucHJvY2VzcyxpPXQuZXhlYyhlKSxpJiYobz1uKGkpLGEucj1vWzBdLGEuZz1vWzFdLGEuYj1vWzJdKTtlbHNlIGEucj1hcmd1bWVudHNbMF0sYS5nPWFyZ3VtZW50c1sxXSxhLmI9YXJndW1lbnRzWzJdO2Eucj1hLm5vcm1hbGl6ZUJ5dGUoYS5yKSxhLmc9YS5ub3JtYWxpemVCeXRlKGEuZyksYS5iPWEubm9ybWFsaXplQnl0ZShhLmIpfTt1LnByb3RvdHlwZT17dG9IZXg6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5wYWREaWdpdCxuPWUuci50b1N0cmluZygxNiksaT1lLmcudG9TdHJpbmcoMTYpLHI9ZS5iLnRvU3RyaW5nKDE2KTtyZXR1cm5cIiNcIit0KG4pK3QoaSkrdChyKX0scmVzb2x2ZUNvbG9yOmZ1bmN0aW9uKGUpe3JldHVybiBlPWV8fFwiYmxhY2tcIixcIiNcIj09ZS5jaGFyQXQoMCkmJihlPWUuc3Vic3RyKDEsNikpLGU9ZS5yZXBsYWNlKC8gL2csXCJcIiksZT1lLnRvTG93ZXJDYXNlKCksZT11Lm5hbWVkQ29sb3JzW2VdfHxlfSxub3JtYWxpemVCeXRlOmZ1bmN0aW9uKGUpe3JldHVybiAwPmV8fGlzTmFOKGUpPzA6ZT4yNTU/MjU1OmV9LHBhZERpZ2l0OmZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5sZW5ndGg/XCIwXCIrZTplfSxicmlnaHRuZXNzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1NYXRoLnJvdW5kO3JldHVybiB0LnI9bih0Lm5vcm1hbGl6ZUJ5dGUodC5yKmUpKSx0Lmc9bih0Lm5vcm1hbGl6ZUJ5dGUodC5nKmUpKSx0LmI9bih0Lm5vcm1hbGl6ZUJ5dGUodC5iKmUpKSx0fSxwZXJjQnJpZ2h0bmVzczpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIE1hdGguc3FydCguMjQxKmUuciplLnIrLjY5MSplLmcqZS5nKy4wNjgqZS5iKmUuYil9fSx1LmZvcm1hdHM9W3tyZTovXnJnYlxcKChcXGR7MSwzfSksXFxzKihcXGR7MSwzfSksXFxzKihcXGR7MSwzfSlcXCkkLyxwcm9jZXNzOmZ1bmN0aW9uKGUpe3JldHVybltuKGVbMV0sMTApLG4oZVsyXSwxMCksbihlWzNdLDEwKV19fSx7cmU6L14oXFx3ezJ9KShcXHd7Mn0pKFxcd3syfSkkLyxwcm9jZXNzOmZ1bmN0aW9uKGUpe3JldHVybltuKGVbMV0sMTYpLG4oZVsyXSwxNiksbihlWzNdLDE2KV19fSx7cmU6L14oXFx3ezF9KShcXHd7MX0pKFxcd3sxfSkkLyxwcm9jZXNzOmZ1bmN0aW9uKGUpe3JldHVybltuKGVbMV0rZVsxXSwxNiksbihlWzJdK2VbMl0sMTYpLG4oZVszXStlWzNdLDE2KV19fV0sdS5uYW1lZENvbG9ycz17YXF1YTpcIjAwZmZmZlwiLGF6dXJlOlwiZjBmZmZmXCIsYmVpZ2U6XCJmNWY1ZGNcIixibGFjazpcIjAwMDAwMFwiLGJsdWU6XCIwMDAwZmZcIixicm93bjpcImE1MmEyYVwiLGNvcmFsOlwiZmY3ZjUwXCIsY3lhbjpcIjAwZmZmZlwiLGRhcmtibHVlOlwiMDAwMDhiXCIsZGFya2N5YW46XCIwMDhiOGJcIixkYXJrZ3JheTpcImE5YTlhOVwiLGRhcmtncmVlbjpcIjAwNjQwMFwiLGRhcmtvcmFuZ2U6XCJmZjhjMDBcIixkYXJrcmVkOlwiOGIwMDAwXCIsZGltZ3JheTpcIjY5Njk2OVwiLGZ1Y2hzaWE6XCJmZjAwZmZcIixnb2xkOlwiZmZkNzAwXCIsZ29sZGVucm9kOlwiZGFhNTIwXCIsZ3JheTpcIjgwODA4MFwiLGdyZWVuOlwiMDA4MDAwXCIsZ3JlZW55ZWxsb3c6XCJhZGZmMmZcIixpbmRpZ286XCI0YjAwODJcIixpdm9yeTpcImZmZmZmMFwiLGtoYWtpOlwiZjBlNjhjXCIsbGlnaHRibHVlOlwiYWRkOGU2XCIsbGlnaHRncmV5OlwiZDNkM2QzXCIsbGlnaHRncmVlbjpcIjkwZWU5MFwiLGxpZ2h0cGluazpcImZmYjZjMVwiLGxpZ2h0eWVsbG93OlwiZmZmZmUwXCIsbGltZTpcIjAwZmYwMFwiLGxpbWVncmVlbjpcIjMyY2QzMlwiLGxpbmVuOlwiZmFmMGU2XCIsbWFnZW50YTpcImZmMDBmZlwiLG1hcm9vbjpcIjgwMDAwMFwiLG1lZGl1bWJsdWU6XCIwMDAwY2RcIixuYXZ5OlwiMDAwMDgwXCIsb2xpdmU6XCI4MDgwMDBcIixvcmFuZ2U6XCJmZmE1MDBcIixvcmFuZ2VyZWQ6XCJmZjQ1MDBcIixvcmNoaWQ6XCJkYTcwZDZcIixwaW5rOlwiZmZjMGNiXCIscGx1bTpcImRkYTBkZFwiLHB1cnBsZTpcIjgwMDA4MFwiLHJlZDpcImZmMDAwMFwiLHJveWFsYmx1ZTpcIjQxNjllMVwiLHNhbG1vbjpcImZhODA3MlwiLHNpbHZlcjpcImMwYzBjMFwiLHNreWJsdWU6XCI4N2NlZWJcIixzbGF0ZWJsdWU6XCI2YTVhY2RcIixzbGF0ZWdyYXk6XCI3MDgwOTBcIixzbm93OlwiZmZmYWZhXCIsc3RlZWxibHVlOlwiNDY4MmI0XCIsdGFuOlwiZDJiNDhjXCIsdGVhbDpcIjAwODA4MFwiLHRvbWF0bzpcImZmNjM0N1wiLHR1cnF1b2lzZTpcIjQwZTBkMFwiLHZpb2xldDpcImVlODJlZVwiLHdoZWF0OlwiZjVkZWIzXCIsd2hpdGU6XCJmZmZmZmZcIix3aGl0ZXNtb2tlOlwiZjVmNWY1XCIseWVsbG93OlwiZmZmZjAwXCIseWVsbG93Z3JlZW46XCI5YWNkMzJcIn0sbz1bXCJ0cmFuc3BhcmVudFwiXTtmb3IoYSBpbiB1Lm5hbWVkQ29sb3JzKXUubmFtZWRDb2xvcnMuaGFzT3duUHJvcGVydHkoYSkmJm8ucHVzaChhKTtvPVJlZ0V4cChcIl4oXCIrby5qb2luKFwifFwiKStcIikoXFxcXFd8JClcIixcImlcIikscz1rZW5kby5DbGFzcy5leHRlbmQoe3RvSFNWOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHRvUkdCOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHRvSGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9CeXRlcygpLnRvSGV4KCl9LHRvQnl0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sdG9Dc3M6ZnVuY3Rpb24oKXtyZXR1cm5cIiNcIit0aGlzLnRvSGV4KCl9LHRvQ3NzUmdiYTpmdW5jdGlvbigpe3ZhciBlPXRoaXMudG9CeXRlcygpO3JldHVyblwicmdiYShcIitlLnIrXCIsIFwiK2UuZytcIiwgXCIrZS5iK1wiLCBcIit0KCgrdGhpcy5hKS50b0ZpeGVkKDMpKStcIilcIn0sdG9EaXNwbGF5OmZ1bmN0aW9uKCl7cmV0dXJuIGtlbmRvLnN1cHBvcnQuYnJvd3Nlci5tc2llJiY5PmtlbmRvLnN1cHBvcnQuYnJvd3Nlci52ZXJzaW9uP3RoaXMudG9Dc3MoKTp0aGlzLnRvQ3NzUmdiYSgpfSxlcXVhbHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10aGlzfHxudWxsIT09ZSYmdGhpcy50b0Nzc1JnYmEoKT09aShlKS50b0Nzc1JnYmEoKX0sZGlmZjpmdW5jdGlvbihlKXtpZihudWxsPT1lKXJldHVybiAwLzA7dmFyIHQ9dGhpcy50b0J5dGVzKCk7cmV0dXJuIGU9ZS50b0J5dGVzKCksTWF0aC5zcXJ0KE1hdGgucG93KC4zKih0LnItZS5yKSwyKStNYXRoLnBvdyguNTkqKHQuZy1lLmcpLDIpK01hdGgucG93KC4xMSoodC5iLWUuYiksMikpfSxjbG9uZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMudG9CeXRlcygpO3JldHVybiBlPT09dGhpcyYmKGU9bmV3IGMoZS5yLGUuZyxlLmIsZS5hKSksZX19KSxsPXMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuLGkpe3RoaXMucj1lLHRoaXMuZz10LHRoaXMuYj1uLHRoaXMuYT1pfSx0b0hTVjpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLnIsaT10aGlzLmcscj10aGlzLmIsbz1NYXRoLm1pbihuLGksciksYT1NYXRoLm1heChuLGkscikscz1hLGw9YS1vO3JldHVybiAwPT09bD9uZXcgZCgwLDAscyx0aGlzLmEpOigwIT09YT8odD1sL2EsZT1uPT1hPyhpLXIpL2w6aT09YT8yKyhyLW4pL2w6NCsobi1pKS9sLGUqPTYwLDA+ZSYmKGUrPTM2MCkpOih0PTAsZT0tMSksbmV3IGQoZSx0LHMsdGhpcy5hKSl9LHRvQnl0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGMoMjU1KnRoaXMuciwyNTUqdGhpcy5nLDI1NSp0aGlzLmIsdGhpcy5hKX19KSxjPWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuLGkpe3RoaXMucj1NYXRoLnJvdW5kKGUpLHRoaXMuZz1NYXRoLnJvdW5kKHQpLHRoaXMuYj1NYXRoLnJvdW5kKG4pLHRoaXMuYT1pfSx0b1JHQjpmdW5jdGlvbigpe3JldHVybiBuZXcgbCh0aGlzLnIvMjU1LHRoaXMuZy8yNTUsdGhpcy5iLzI1NSx0aGlzLmEpfSx0b0hTVjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvUkdCKCkudG9IU1YoKX0sdG9IZXg6ZnVuY3Rpb24oKXtyZXR1cm4gcih0aGlzLnIsMikrcih0aGlzLmcsMikrcih0aGlzLmIsMil9LHRvQnl0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KSxkPXMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuLGkpe3RoaXMuaD1lLHRoaXMucz10LHRoaXMudj1uLHRoaXMuYT1pfSx0b1JHQjpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbyxhLHMsYz10aGlzLmgsZD10aGlzLnMsdT10aGlzLnY7aWYoMD09PWQpdD1uPWk9dTtlbHNlIHN3aXRjaChjLz02MCxlPU1hdGguZmxvb3IoYykscj1jLWUsbz11KigxLWQpLGE9dSooMS1kKnIpLHM9dSooMS1kKigxLXIpKSxlKXtjYXNlIDA6dD11LG49cyxpPW87YnJlYWs7Y2FzZSAxOnQ9YSxuPXUsaT1vO2JyZWFrO2Nhc2UgMjp0PW8sbj11LGk9czticmVhaztjYXNlIDM6dD1vLG49YSxpPXU7YnJlYWs7Y2FzZSA0OnQ9cyxuPW8saT11O2JyZWFrO2RlZmF1bHQ6dD11LG49byxpPWF9cmV0dXJuIG5ldyBsKHQsbixpLHRoaXMuYSl9LHRvQnl0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b1JHQigpLnRvQnl0ZXMoKX19KSx1LmZyb21CeXRlcz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3IGMoZSx0LG4sbnVsbCE9aT9pOjEpfSx1LmZyb21SR0I9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyBsKGUsdCxuLG51bGwhPWk/aToxKX0sdS5mcm9tSFNWPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcgZChlLHQsbixudWxsIT1pP2k6MSl9LGtlbmRvLkNvbG9yPXUsa2VuZG8ucGFyc2VDb2xvcj1pfSh3aW5kb3cua2VuZG8ualF1ZXJ5LHBhcnNlRmxvYXQscGFyc2VJbnQpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7cmV0dXJuIHR5cGVvZiBlIT09Rn1mdW5jdGlvbiBuKGUsdCl7dmFyIG49aSh0KTtyZXR1cm4gQS5yb3VuZChlKm4pL259ZnVuY3Rpb24gaShlKXtyZXR1cm4gZT9BLnBvdygxMCxlKToxfWZ1bmN0aW9uIHIoZSx0LG4pe3JldHVybiBBLm1heChBLm1pbihlLG4pLHQpfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIGUqUH1mdW5jdGlvbiBhKGUpe3JldHVybiBlL1B9ZnVuY3Rpb24gcyhlKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgZSYmIWlzTmFOKGUpfWZ1bmN0aW9uIGwoZSxuKXtyZXR1cm4gdChlKT9lOm59ZnVuY3Rpb24gYyhlKXtyZXR1cm4gZSplfWZ1bmN0aW9uIGQoZSl7dmFyIHQsbj1bXTtmb3IodCBpbiBlKW4ucHVzaCh0K2VbdF0pO3JldHVybiBuLnNvcnQoKS5qb2luKFwiXCIpfWZ1bmN0aW9uIHUoZSl7dmFyIHQsbj0yMTY2MTM2MjYxO2Zvcih0PTA7ZS5sZW5ndGg+dDsrK3Qpbis9KG48PDEpKyhuPDw0KSsobjw8NykrKG48PDgpKyhuPDwyNCksbl49ZS5jaGFyQ29kZUF0KHQpO3JldHVybiBuPj4+MH1mdW5jdGlvbiBoKGUpe3JldHVybiB1KGQoZSkpfWZ1bmN0aW9uIHAoZSl7dmFyIHQsbj1lLmxlbmd0aCxpPUkscj16O2Zvcih0PTA7bj50O3QrKylyPUEubWF4KHIsZVt0XSksaT1BLm1pbihpLGVbdF0pO3JldHVybnttaW46aSxtYXg6cn19ZnVuY3Rpb24gZihlKXtyZXR1cm4gcChlKS5taW59ZnVuY3Rpb24gZyhlKXtyZXR1cm4gcChlKS5tYXh9ZnVuY3Rpb24gbShlKXtyZXR1cm4gXyhlKS5taW59ZnVuY3Rpb24gdihlKXtyZXR1cm4gXyhlKS5tYXh9ZnVuY3Rpb24gXyhlKXt2YXIgdCxuLGkscj1JLG89ejtmb3IodD0wLG49ZS5sZW5ndGg7bj50O3QrKylpPWVbdF0sbnVsbCE9PWkmJmlzRmluaXRlKGkpJiYocj1BLm1pbihyLGkpLG89QS5tYXgobyxpKSk7cmV0dXJue21pbjpyPT09ST92b2lkIDA6cixtYXg6bz09PXo/dm9pZCAwOm99fWZ1bmN0aW9uIHkoZSl7cmV0dXJuIGU/ZVtlLmxlbmd0aC0xXTp2b2lkIDB9ZnVuY3Rpb24gdyhlLHQpe3JldHVybiBlLnB1c2guYXBwbHkoZSx0KSxlfWZ1bmN0aW9uIGIoZSl7cmV0dXJuIEUudGVtcGxhdGUoZSx7dXNlV2l0aEJsb2NrOiExLHBhcmFtTmFtZTpcImRcIn0pfWZ1bmN0aW9uIGsoZSxuKXtyZXR1cm4gdChuKSYmbnVsbCE9PW4/XCIgXCIrZStcIj0nXCIrbitcIicgXCI6XCJcIn1mdW5jdGlvbiB4KGUpe3ZhciB0LG49XCJcIjtmb3IodD0wO2UubGVuZ3RoPnQ7dCsrKW4rPWsoZVt0XVswXSxlW3RdWzFdKTtyZXR1cm4gbn1mdW5jdGlvbiBDKGUpe3ZhciBuLGkscj1cIlwiO2ZvcihuPTA7ZS5sZW5ndGg+bjtuKyspaT1lW25dWzFdLHQoaSkmJihyKz1lW25dWzBdK1wiOlwiK2krXCI7XCIpO3JldHVyblwiXCIhPT1yP3I6dm9pZCAwfWZ1bmN0aW9uIFMoZSl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGUmJihlKz1cInB4XCIpLGV9ZnVuY3Rpb24gVChlKXt2YXIgdCxuLGk9W107aWYoZSlmb3IodD1FLnRvSHlwaGVucyhlKS5zcGxpdChcIi1cIiksbj0wO3QubGVuZ3RoPm47bisrKWkucHVzaChcImstcG9zLVwiK3Rbbl0pO3JldHVybiBpLmpvaW4oXCIgXCIpfWZ1bmN0aW9uIEQoZSl7cmV0dXJuXCJcIj09PWV8fG51bGw9PT1lfHxcIm5vbmVcIj09PWV8fFwidHJhbnNwYXJlbnRcIj09PWV8fCF0KGUpfXZhciBBPU1hdGgsRT13aW5kb3cua2VuZG8sTT1FLmRlZXBFeHRlbmQsUD1BLlBJLzE4MCxJPU51bWJlci5NQVhfVkFMVUUsej0tTnVtYmVyLk1BWF9WQUxVRSxGPVwidW5kZWZpbmVkXCIsUj1EYXRlLm5vdztSfHwoUj1mdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfSksTShFLHt1dGlsOntNQVhfTlVNOkksTUlOX05VTTp6LGFwcGVuZDp3LGFycmF5TGltaXRzOnAsYXJyYXlNaW46ZixhcnJheU1heDpnLGRlZmluZWQ6dCxkZWc6YSxoYXNoS2V5OnUsaGFzaE9iamVjdDpoLGlzTnVtYmVyOnMsaXNUcmFuc3BhcmVudDpELGxhc3Q6eSxsaW1pdFZhbHVlOnIsbm93OlIsb2JqZWN0S2V5OmQscm91bmQ6bixyYWQ6byxyZW5kZXJBdHRyOmsscmVuZGVyQWxsQXR0cjp4LHJlbmRlclBvczpULHJlbmRlclNpemU6UyxyZW5kZXJTdHlsZTpDLHJlbmRlclRlbXBsYXRlOmIsc3BhcnNlQXJyYXlMaW1pdHM6XyxzcGFyc2VBcnJheU1pbjptLHNwYXJzZUFycmF5TWF4OnYsc3FyOmMsdmFsdWVPckRlZmF1bHQ6bH19KSxFLmRhdGF2aXoudXRpbD1FLnV0aWx9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2YXIgbixpLHIsYSxzLGwsYyxkPVwiXCIsdT0wO2ZvcihlPXQoZSk7ZS5sZW5ndGg+dTspbj1lLmNoYXJDb2RlQXQodSsrKSxpPWUuY2hhckNvZGVBdCh1KyspLHI9ZS5jaGFyQ29kZUF0KHUrKyksYT1uPj4yLHM9KDMmbik8PDR8aT4+NCxsPSgxNSZpKTw8MnxyPj42LGM9NjMmcixpc05hTihpKT9sPWM9NjQ6aXNOYU4ocikmJihjPTY0KSxkPWQrby5jaGFyQXQoYSkrby5jaGFyQXQocykrby5jaGFyQXQobCkrby5jaGFyQXQoYyk7cmV0dXJuIGR9ZnVuY3Rpb24gdChlKXt2YXIgdCxuLGk7Zm9yKGU9ZS5yZXBsYWNlKC9cXHJcXG4vZyxcIlxcblwiKSx0PVwiXCIsbj0wO2UubGVuZ3RoPm47bisrKWk9ZS5jaGFyQ29kZUF0KG4pLDEyOD5pP3QrPXIoaSk6MjA0OD5pPyh0Kz1yKDE5MnxpPj4+NiksdCs9cigxMjh8NjMmaSkpOjY1NTM2PmkmJih0Kz1yKDIyNHxpPj4+MTIpLHQrPXIoMTI4fGk+Pj42JjYzKSx0Kz1yKDEyOHw2MyZpKSk7cmV0dXJuIHR9dmFyIG49d2luZG93LmtlbmRvLGk9bi5kZWVwRXh0ZW5kLHI9U3RyaW5nLmZyb21DaGFyQ29kZSxvPVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cIjtpKG4udXRpbCx7ZW5jb2RlQmFzZTY0OmUsZW5jb2RlVVRGODp0fSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe3ZhciB0PU1hdGgsbj13aW5kb3cua2VuZG8saT1uLmRlZXBFeHRlbmQscj1lLmluQXJyYXksbz17b2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29ic2VydmVycz10aGlzLl9vYnNlcnZlcnN8fFtdfSxhZGRPYnNlcnZlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb2JzZXJ2ZXJzP3RoaXMuX29ic2VydmVycy5wdXNoKGUpOnRoaXMuX29ic2VydmVycz1bZV0sdGhpc30scmVtb3ZlT2JzZXJ2ZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5vYnNlcnZlcnMoKSxuPXIoZSx0KTtyZXR1cm4tMSE9biYmdC5zcGxpY2UobiwxKSx0aGlzfSx0cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMuX29ic2VydmVycztpZihyJiYhdGhpcy5fc3VzcGVuZGVkKWZvcihpPTA7ci5sZW5ndGg+aTtpKyspbj1yW2ldLG5bZV0mJm5bZV0odCk7cmV0dXJuIHRoaXN9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7dGhpcy50cmlnZ2VyKFwib3B0aW9uc0NoYW5nZVwiLGUpfSxnZW9tZXRyeUNoYW5nZTpmdW5jdGlvbihlKXt0aGlzLnRyaWdnZXIoXCJnZW9tZXRyeUNoYW5nZVwiLGUpfSxzdXNwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N1c3BlbmRlZD0odGhpcy5fc3VzcGVuZGVkfHwwKSsxLHRoaXN9LHJlc3VtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdXNwZW5kZWQ9dC5tYXgoKHRoaXMuX3N1c3BlbmRlZHx8MCktMSwwKSx0aGlzfSxfb2JzZXJ2ZXJGaWVsZDpmdW5jdGlvbihlLHQpe3RoaXNbZV0mJnRoaXNbZV0ucmVtb3ZlT2JzZXJ2ZXIodGhpcyksdGhpc1tlXT10LHQuYWRkT2JzZXJ2ZXIodGhpcyl9fTtpKG4se21peGluczp7T2JzZXJ2ZXJzTWl4aW46b319KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXtyZXR1cm4gbnVsbD09PWU/bnVsbDplIGluc3RhbmNlb2YgbT9lOm5ldyBtKGUpfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJnkuaXNGdW5jdGlvbihlLm1hdHJpeCk/ZS5tYXRyaXgoKTplfWZ1bmN0aW9uIGkoZSx0LG4saSl7dmFyIHI9MCxvPTA7cmV0dXJuIGkmJihyPXYuYXRhbjIoaS5jKm4saS5hKnQpLDAhPT1pLmImJihvPXYuYXRhbjIoaS5kKm4saS5iKnQpKSkse3g6cix5Om99fWZ1bmN0aW9uIHIoZSx0KXtmb3IoO3Q+ZTspZSs9OTA7cmV0dXJuIGV9ZnVuY3Rpb24gbyhlLHQpe3ZhciBuLGkscjtmb3Iobj0wO3QubGVuZ3RoPm47bisrKWk9dFtuXSxyPWkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkraS5zdWJzdHJpbmcoMSxpLmxlbmd0aCksZVtcInNldFwiK3JdPWEoaSksZVtcImdldFwiK3JdPXMoaSl9ZnVuY3Rpb24gYShlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIHRoaXNbZV0hPT10JiYodGhpc1tlXT10LHRoaXMuZ2VvbWV0cnlDaGFuZ2UoKSksdGhpc319ZnVuY3Rpb24gcyhlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tlXX19ZnVuY3Rpb24gbChlLHQsbil7ZT50JiYodCs9MzYwKTt2YXIgaT12LmFicyh0LWUpO3JldHVybiBufHwoaT0zNjAtaSksaX1mdW5jdGlvbiBjKGUsdCxuLGkscixvKXt2YXIgYT1EKChyLWUpL24sMykscz1EKChvLXQpL2ksMyk7cmV0dXJuIEQoVCh2LmF0YW4yKHMsYSkpKX1mdW5jdGlvbiBkKGUsdCxuLGkscixvLGEscyl7dmFyIGQsdSxoLHAsZixnLG0seSx3LGIsayx4LEMsUyxULEQsQSxFO2lmKHQhPT1pKXc9bi1lLGI9aS10LGs9XyhyLDIpLHg9XyhvLDIpLEM9KHgqdyooZStuKStrKmIqKHQraSkpLygyKmsqYiksUz1DLWksVD0tKHcqeCkvKGsqYiksZj0xL2srXyhULDIpL3gsZz0yKihUKlMveC1uL2spLG09XyhuLDIpL2srXyhTLDIpL3gtMSx5PXYuc3FydChfKGcsMiktNCpmKm0pLGQ9KC1nLXkpLygyKmYpLHU9QytUKmQsaD0oLWcreSkvKDIqZikscD1DK1QqaDtlbHNle2lmKGU9PT1uKXJldHVybiExO2c9LTIqaSxtPV8oKG4tZSkqby8oMipyKSwyKStfKGksMiktXyhvLDIpLHk9di5zcXJ0KF8oZywyKS00Km0pLGQ9aD0oZStuKS8yLHU9KC1nLXkpLzIscD0oLWcreSkvMn1yZXR1cm4gRD1jKGQsdSxyLG8sZSx0KSxBPWMoZCx1LHIsbyxuLGkpLEU9bChELEEscyksKGEmJjE4MD49RXx8IWEmJkU+MTgwKSYmKGQ9aCx1PXAsRD1jKGQsdSxyLG8sZSx0KSxBPWMoZCx1LHIsbyxuLGkpKSx7Y2VudGVyOm5ldyBQKGQsdSksc3RhcnRBbmdsZTpELGVuZEFuZ2xlOkF9fXZhciB1LGgscCxmLGcsbSx2PU1hdGgsXz12LnBvdyx5PXdpbmRvdy5rZW5kbyx3PXkuQ2xhc3MsYj15LmRlZXBFeHRlbmQsaz15Lm1peGlucy5PYnNlcnZlcnNNaXhpbix4PXkudXRpbCxDPXguZGVmaW5lZCxTPXgucmFkLFQ9eC5kZWcsRD14LnJvdW5kLEE9di5QSS8yLEU9eC5NSU5fTlVNLE09eC5NQVhfTlVNLFA9dy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLng9ZXx8MCx0aGlzLnk9dHx8MH0sZXF1YWxzOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLng9PT10aGlzLngmJmUueT09PXRoaXMueX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFAodGhpcy54LHRoaXMueSl9LHJvdGF0ZTpmdW5jdGlvbihlLG4pe3JldHVybiB0aGlzLnRyYW5zZm9ybSh0KCkucm90YXRlKGUsbikpfSx0cmFuc2xhdGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy54Kz1lLHRoaXMueSs9dCx0aGlzLmdlb21ldHJ5Q2hhbmdlKCksdGhpc30sdHJhbnNsYXRlV2l0aDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50cmFuc2xhdGUoZS54LGUueSl9LG1vdmU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy54PXRoaXMueT0wLHRoaXMudHJhbnNsYXRlKGUsdCl9LHNjYWxlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIEModCl8fCh0PWUpLHRoaXMueCo9ZSx0aGlzLnkqPXQsdGhpcy5nZW9tZXRyeUNoYW5nZSgpLHRoaXN9LHNjYWxlQ29weTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmNsb25lKCkuc2NhbGUoZSx0KX0sdHJhbnNmb3JtOmZ1bmN0aW9uKGUpe3ZhciB0PW4oZSksaT10aGlzLngscj10aGlzLnk7cmV0dXJuIHRoaXMueD10LmEqaSt0LmMqcit0LmUsdGhpcy55PXQuYippK3QuZCpyK3QuZix0aGlzLmdlb21ldHJ5Q2hhbmdlKCksdGhpc30sdHJhbnNmb3JtQ29weTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmNsb25lKCk7cmV0dXJuIGUmJnQudHJhbnNmb3JtKGUpLHR9LGRpc3RhbmNlVG86ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy54LWUueCxuPXRoaXMueS1lLnk7cmV0dXJuIHYuc3FydCh0KnQrbipuKX0scm91bmQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMueD1EKHRoaXMueCxlKSx0aGlzLnk9RCh0aGlzLnksZSksdGhpcy5nZW9tZXRyeUNoYW5nZSgpLHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oZSl7dmFyIHQ9QyhlKSxuPXQ/RCh0aGlzLngsZSk6dGhpcy54LGk9dD9EKHRoaXMueSxlKTp0aGlzLnk7cmV0dXJuW24saV19fSk7byhQLmZuLFtcInhcIixcInlcIl0pLGIoUC5mbixrKSxQLmZuLnRvU3RyaW5nPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy54LGk9dGhpcy55O3JldHVybiBDKGUpJiYobj1EKG4sZSksaT1EKGksZSkpLHQ9dHx8XCIgXCIsbit0K2l9LFAuY3JlYXRlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEMoZSk/ZSBpbnN0YW5jZW9mIFA/ZToxPT09YXJndW1lbnRzLmxlbmd0aCYmMj09PWUubGVuZ3RoP25ldyBQKGVbMF0sZVsxXSk6bmV3IFAoZSx0KTp2b2lkIDB9LFAubWluPWZ1bmN0aW9uKCl7dmFyIGUsdCxuPXguTUFYX05VTSxpPXguTUFYX05VTTtmb3IoZT0wO2FyZ3VtZW50cy5sZW5ndGg+ZTtlKyspdD1hcmd1bWVudHNbZV0sbj12Lm1pbih0LngsbiksaT12Lm1pbih0LnksaSk7cmV0dXJuIG5ldyBQKG4saSl9LFAubWF4PWZ1bmN0aW9uKCl7dmFyIGUsdCxuPXguTUlOX05VTSxpPXguTUlOX05VTTtmb3IoZT0wO2FyZ3VtZW50cy5sZW5ndGg+ZTtlKyspdD1hcmd1bWVudHNbZV0sbj12Lm1heCh0LngsbiksaT12Lm1heCh0LnksaSk7cmV0dXJuIG5ldyBQKG4saSl9LFAubWluUG9pbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFAoRSxFKX0sUC5tYXhQb2ludD1mdW5jdGlvbigpe3JldHVybiBuZXcgUChNLE0pfSxQLlpFUk89bmV3IFAoMCwwKSx1PXcuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dGhpcy53aWR0aD1lfHwwLHRoaXMuaGVpZ2h0PXR8fDB9LGVxdWFsczpmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS53aWR0aD09PXRoaXMud2lkdGgmJmUuaGVpZ2h0PT09dGhpcy5oZWlnaHR9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB1KHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpfSx0b0FycmF5OmZ1bmN0aW9uKGUpe3ZhciB0PUMoZSksbj10P0QodGhpcy53aWR0aCxlKTp0aGlzLndpZHRoLGk9dD9EKHRoaXMuaGVpZ2h0LGUpOnRoaXMuaGVpZ2h0O3JldHVybltuLGldfX0pLG8odS5mbixbXCJ3aWR0aFwiLFwiaGVpZ2h0XCJdKSxiKHUuZm4sayksdS5jcmVhdGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gQyhlKT9lIGluc3RhbmNlb2YgdT9lOjE9PT1hcmd1bWVudHMubGVuZ3RoJiYyPT09ZS5sZW5ndGg/bmV3IHUoZVswXSxlWzFdKTpuZXcgdShlLHQpOnZvaWQgMH0sdS5aRVJPPW5ldyB1KDAsMCksaD13LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3RoaXMuc2V0T3JpZ2luKGV8fG5ldyBQKSx0aGlzLnNldFNpemUodHx8bmV3IHUpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgaCh0aGlzLm9yaWdpbi5jbG9uZSgpLHRoaXMuc2l6ZS5jbG9uZSgpKX0sZXF1YWxzOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLm9yaWdpbi5lcXVhbHModGhpcy5vcmlnaW4pJiZlLnNpemUuZXF1YWxzKHRoaXMuc2l6ZSl9LHNldE9yaWdpbjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb2JzZXJ2ZXJGaWVsZChcIm9yaWdpblwiLFAuY3JlYXRlKGUpKSx0aGlzLmdlb21ldHJ5Q2hhbmdlKCksdGhpc30sZ2V0T3JpZ2luOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3JpZ2lufSxzZXRTaXplOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vYnNlcnZlckZpZWxkKFwic2l6ZVwiLHUuY3JlYXRlKGUpKSx0aGlzLmdlb21ldHJ5Q2hhbmdlKCksdGhpc30sZ2V0U2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemV9LHdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2l6ZS53aWR0aH0saGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2l6ZS5oZWlnaHR9LHRvcExlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcmlnaW4uY2xvbmUoKX0sYm90dG9tUmlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcmlnaW4uY2xvbmUoKS50cmFuc2xhdGUodGhpcy53aWR0aCgpLHRoaXMuaGVpZ2h0KCkpfSx0b3BSaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9yaWdpbi5jbG9uZSgpLnRyYW5zbGF0ZSh0aGlzLndpZHRoKCksMCl9LGJvdHRvbUxlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcmlnaW4uY2xvbmUoKS50cmFuc2xhdGUoMCx0aGlzLmhlaWdodCgpKX0sY2VudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3JpZ2luLmNsb25lKCkudHJhbnNsYXRlKHRoaXMud2lkdGgoKS8yLHRoaXMuaGVpZ2h0KCkvMil9LGJib3g6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy50b3BMZWZ0KCkudHJhbnNmb3JtQ29weShlKSxuPXRoaXMudG9wUmlnaHQoKS50cmFuc2Zvcm1Db3B5KGUpLGk9dGhpcy5ib3R0b21SaWdodCgpLnRyYW5zZm9ybUNvcHkoZSkscj10aGlzLmJvdHRvbUxlZnQoKS50cmFuc2Zvcm1Db3B5KGUpO3JldHVybiBoLmZyb21Qb2ludHModCxuLGkscil9fSksYihoLmZuLGspLGguZnJvbVBvaW50cz1mdW5jdGlvbigpe3ZhciBlPVAubWluLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0PVAubWF4LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxuPW5ldyB1KHQueC1lLngsdC55LWUueSk7cmV0dXJuIG5ldyBoKGUsbil9LGgudW5pb249ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaC5mcm9tUG9pbnRzKFAubWluKGUudG9wTGVmdCgpLHQudG9wTGVmdCgpKSxQLm1heChlLmJvdHRvbVJpZ2h0KCksdC5ib3R0b21SaWdodCgpKSl9LGguaW50ZXJzZWN0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9e2xlZnQ6ZS50b3BMZWZ0KCkueCx0b3A6ZS50b3BMZWZ0KCkueSxyaWdodDplLmJvdHRvbVJpZ2h0KCkueCxib3R0b206ZS5ib3R0b21SaWdodCgpLnl9LHQ9e2xlZnQ6dC50b3BMZWZ0KCkueCx0b3A6dC50b3BMZWZ0KCkueSxyaWdodDp0LmJvdHRvbVJpZ2h0KCkueCxib3R0b206dC5ib3R0b21SaWdodCgpLnl9LHQucmlnaHQ+PWUubGVmdCYmZS5yaWdodD49dC5sZWZ0JiZ0LmJvdHRvbT49ZS50b3AmJmUuYm90dG9tPj10LnRvcD9oLmZyb21Qb2ludHMobmV3IFAodi5tYXgoZS5sZWZ0LHQubGVmdCksdi5tYXgoZS50b3AsdC50b3ApKSxuZXcgUCh2Lm1pbihlLnJpZ2h0LHQucmlnaHQpLHYubWluKGUuYm90dG9tLHQuYm90dG9tKSkpOnZvaWQgMH0scD13LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3RoaXMuc2V0Q2VudGVyKGV8fG5ldyBQKSx0aGlzLnNldFJhZGl1cyh0fHwwKX0sc2V0Q2VudGVyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vYnNlcnZlckZpZWxkKFwiY2VudGVyXCIsUC5jcmVhdGUoZSkpLHRoaXMuZ2VvbWV0cnlDaGFuZ2UoKSx0aGlzfSxnZXRDZW50ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jZW50ZXJ9LGVxdWFsczpmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5jZW50ZXIuZXF1YWxzKHRoaXMuY2VudGVyKSYmZS5yYWRpdXM9PT10aGlzLnJhZGl1c30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHAodGhpcy5jZW50ZXIuY2xvbmUoKSx0aGlzLnJhZGl1cyl9LHBvaW50QXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3BvaW50QXQoUyhlKSl9LGJib3g6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLG8sYT1QLm1heFBvaW50KCkscz1QLm1pblBvaW50KCksbD1pKHRoaXMuY2VudGVyLHRoaXMucmFkaXVzLHRoaXMucmFkaXVzLGUpO2Zvcih0PTA7ND50O3QrKyluPXRoaXMuX3BvaW50QXQobC54K3QqQSkudHJhbnNmb3JtQ29weShlKSxyPXRoaXMuX3BvaW50QXQobC55K3QqQSkudHJhbnNmb3JtQ29weShlKSxvPW5ldyBQKG4ueCxyLnkpLGE9UC5taW4oYSxvKSxzPVAubWF4KHMsbyk7cmV0dXJuIGguZnJvbVBvaW50cyhhLHMpfSxfcG9pbnRBdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmNlbnRlcixuPXRoaXMucmFkaXVzO3JldHVybiBuZXcgUCh0Lngtbip2LmNvcyhlKSx0Lnktbip2LnNpbihlKSl9fSksbyhwLmZuLFtcInJhZGl1c1wiXSksYihwLmZuLGspLGY9dy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLnNldENlbnRlcihlfHxuZXcgUCksdD10fHx7fSx0aGlzLnJhZGl1c1g9dC5yYWRpdXNYLHRoaXMucmFkaXVzWT10LnJhZGl1c1l8fHQucmFkaXVzWCx0aGlzLnN0YXJ0QW5nbGU9dC5zdGFydEFuZ2xlLHRoaXMuZW5kQW5nbGU9dC5lbmRBbmdsZSx0aGlzLmFudGljbG9ja3dpc2U9dC5hbnRpY2xvY2t3aXNlfHwhMX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGYodGhpcy5jZW50ZXIse3JhZGl1c1g6dGhpcy5yYWRpdXNYLHJhZGl1c1k6dGhpcy5yYWRpdXNZLHN0YXJ0QW5nbGU6dGhpcy5zdGFydEFuZ2xlLGVuZEFuZ2xlOnRoaXMuZW5kQW5nbGUsYW50aWNsb2Nrd2lzZTp0aGlzLmFudGljbG9ja3dpc2V9KX0sc2V0Q2VudGVyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vYnNlcnZlckZpZWxkKFwiY2VudGVyXCIsUC5jcmVhdGUoZSkpLHRoaXMuZ2VvbWV0cnlDaGFuZ2UoKSx0aGlzfSxnZXRDZW50ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jZW50ZXJ9LE1BWF9JTlRFUlZBTDo0NSxwb2ludEF0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY2VudGVyLG49UyhlKTtyZXR1cm4gbmV3IFAodC54K3RoaXMucmFkaXVzWCp2LmNvcyhuKSx0LnkrdGhpcy5yYWRpdXNZKnYuc2luKG4pKX0sY3VydmVQb2ludHM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT10aGlzLnN0YXJ0QW5nbGUscj10aGlzLmFudGljbG9ja3dpc2U/LTE6MSxvPVt0aGlzLnBvaW50QXQoaSldLGE9aSxzPXRoaXMuX2FyY0ludGVydmFsKCksbD1zLmVuZEFuZ2xlLXMuc3RhcnRBbmdsZSxjPXYuY2VpbChsL3RoaXMuTUFYX0lOVEVSVkFMKSxkPWwvYztmb3IoZT0xO2M+PWU7ZSsrKXQ9YStyKmQsbj10aGlzLl9pbnRlcnZhbEN1cnZlUG9pbnRzKGEsdCksby5wdXNoKG4uY3AxLG4uY3AyLG4ucDIpLGE9dDtyZXR1cm4gb30sYmJveDpmdW5jdGlvbihlKXtmb3IodmFyIHQsbixvPXRoaXMsYT1vLl9hcmNJbnRlcnZhbCgpLHM9YS5zdGFydEFuZ2xlLGw9YS5lbmRBbmdsZSxjPWkodGhpcy5jZW50ZXIsdGhpcy5yYWRpdXNYLHRoaXMucmFkaXVzWSxlKSxkPVQoYy54KSx1PVQoYy55KSxwPW8ucG9pbnRBdChzKS50cmFuc2Zvcm1Db3B5KGUpLGY9by5wb2ludEF0KGwpLnRyYW5zZm9ybUNvcHkoZSksZz1QLm1pbihwLGYpLG09UC5tYXgocCxmKSx2PXIoZCxzKSxfPXIodSxzKTtsPnZ8fGw+XzspbD52JiYodD1vLnBvaW50QXQodikudHJhbnNmb3JtQ29weShlKSx2Kz05MCksbD5fJiYobj1vLnBvaW50QXQoXykudHJhbnNmb3JtQ29weShlKSxfKz05MCkscD1uZXcgUCh0Lngsbi55KSxnPVAubWluKGcscCksbT1QLm1heChtLHApO3JldHVybiBoLmZyb21Qb2ludHMoZyxtKX0sX2FyY0ludGVydmFsOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLnN0YXJ0QW5nbGUsbj10aGlzLmVuZEFuZ2xlLGk9dGhpcy5hbnRpY2xvY2t3aXNlO3JldHVybiBpJiYoZT10LHQ9bixuPWUpLCh0Pm58fGkmJnQ9PT1uKSYmKG4rPTM2MCkse3N0YXJ0QW5nbGU6dCxlbmRBbmdsZTpufX0sX2ludGVydmFsQ3VydmVQb2ludHM6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9bi5wb2ludEF0KGUpLHI9bi5wb2ludEF0KHQpLG89bi5fZGVyaXZhdGl2ZUF0KGUpLGE9bi5fZGVyaXZhdGl2ZUF0KHQpLHM9KFModCktUyhlKSkvMyxsPW5ldyBQKGkueCtzKm8ueCxpLnkrcypvLnkpLGM9bmV3IFAoci54LXMqYS54LHIueS1zKmEueSk7cmV0dXJue3AxOmksY3AxOmwsY3AyOmMscDI6cn19LF9kZXJpdmF0aXZlQXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVMoZSk7cmV0dXJuIG5ldyBQKC10LnJhZGl1c1gqdi5zaW4obiksdC5yYWRpdXNZKnYuY29zKG4pKX19KSxvKGYuZm4sW1wicmFkaXVzWFwiLFwicmFkaXVzWVwiLFwic3RhcnRBbmdsZVwiLFwiZW5kQW5nbGVcIixcImFudGljbG9ja3dpc2VcIl0pLGIoZi5mbixrKSxmLmZyb21Qb2ludHM9ZnVuY3Rpb24oZSx0LG4saSxyLG8pe3ZhciBhPWQoZS54LGUueSx0LngsdC55LG4saSxyLG8pO3JldHVybiBuZXcgZihhLmNlbnRlcix7c3RhcnRBbmdsZTphLnN0YXJ0QW5nbGUsZW5kQW5nbGU6YS5lbmRBbmdsZSxyYWRpdXNYOm4scmFkaXVzWTppLGFudGljbG9ja3dpc2U6MD09PW99KX0sZz13LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbixpLHIsbyl7dGhpcy5hPWV8fDAsdGhpcy5iPXR8fDAsdGhpcy5jPW58fDAsdGhpcy5kPWl8fDAsdGhpcy5lPXJ8fDAsdGhpcy5mPW98fDB9LG11bHRpcGx5Q29weTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGcodGhpcy5hKmUuYSt0aGlzLmMqZS5iLHRoaXMuYiplLmErdGhpcy5kKmUuYix0aGlzLmEqZS5jK3RoaXMuYyplLmQsdGhpcy5iKmUuYyt0aGlzLmQqZS5kLHRoaXMuYSplLmUrdGhpcy5jKmUuZit0aGlzLmUsdGhpcy5iKmUuZSt0aGlzLmQqZS5mK3RoaXMuZil9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBnKHRoaXMuYSx0aGlzLmIsdGhpcy5jLHRoaXMuZCx0aGlzLmUsdGhpcy5mKX0sZXF1YWxzOmZ1bmN0aW9uKGUpe3JldHVybiBlP3RoaXMuYT09PWUuYSYmdGhpcy5iPT09ZS5iJiZ0aGlzLmM9PT1lLmMmJnRoaXMuZD09PWUuZCYmdGhpcy5lPT09ZS5lJiZ0aGlzLmY9PT1lLmY6ITF9LHJvdW5kOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmE9RCh0aGlzLmEsZSksdGhpcy5iPUQodGhpcy5iLGUpLHRoaXMuYz1EKHRoaXMuYyxlKSx0aGlzLmQ9RCh0aGlzLmQsZSksdGhpcy5lPUQodGhpcy5lLGUpLHRoaXMuZj1EKHRoaXMuZixlKSx0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKGUpe3ZhciB0LG49W3RoaXMuYSx0aGlzLmIsdGhpcy5jLHRoaXMuZCx0aGlzLmUsdGhpcy5mXTtpZihDKGUpKWZvcih0PTA7bi5sZW5ndGg+dDt0Kyspblt0XT1EKG5bdF0sZSk7cmV0dXJuIG59fSksZy5mbi50b1N0cmluZz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnRvQXJyYXkoZSkuam9pbih0fHxcIixcIil9LGcudHJhbnNsYXRlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBnKDEsMCwwLDEsZSx0KX0sZy51bml0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBnKDEsMCwwLDEsMCwwKX0sZy5yb3RhdGU9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPW5ldyBnO3JldHVybiBpLmE9di5jb3MoUyhlKSksaS5iPXYuc2luKFMoZSkpLGkuYz0taS5iLGkuZD1pLmEsaS5lPXQtdCppLmErbippLmJ8fDAsaS5mPW4tbippLmEtdCppLmJ8fDAsaX0sZy5zY2FsZT1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgZyhlLDAsMCx0LDAsMCl9LGcuSURFTlRJVFk9Zy51bml0KCksbT13LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLl9tYXRyaXg9ZXx8Zy51bml0KCl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBtKHRoaXMuX21hdHJpeC5jbG9uZSgpKX0sZXF1YWxzOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9tYXRyaXguZXF1YWxzKHRoaXMuX21hdHJpeCl9LF9vcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zQ2hhbmdlKHtmaWVsZDpcInRyYW5zZm9ybVwiLHZhbHVlOnRoaXN9KX0sdHJhbnNsYXRlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX21hdHJpeD10aGlzLl9tYXRyaXgubXVsdGlwbHlDb3B5KGcudHJhbnNsYXRlKGUsdCkpLHRoaXMuX29wdGlvbnNDaGFuZ2UoKSx0aGlzfSxzY2FsZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIEModCl8fCh0PWUpLG4mJihuPVAuY3JlYXRlKG4pLHRoaXMuX21hdHJpeD10aGlzLl9tYXRyaXgubXVsdGlwbHlDb3B5KGcudHJhbnNsYXRlKG4ueCxuLnkpKSksdGhpcy5fbWF0cml4PXRoaXMuX21hdHJpeC5tdWx0aXBseUNvcHkoZy5zY2FsZShlLHQpKSxuJiYodGhpcy5fbWF0cml4PXRoaXMuX21hdHJpeC5tdWx0aXBseUNvcHkoZy50cmFuc2xhdGUoLW4ueCwtbi55KSkpLHRoaXMuX29wdGlvbnNDaGFuZ2UoKSx0aGlzfSxyb3RhdGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD1QLmNyZWF0ZSh0KXx8UC5aRVJPLHRoaXMuX21hdHJpeD10aGlzLl9tYXRyaXgubXVsdGlwbHlDb3B5KGcucm90YXRlKGUsdC54LHQueSkpLHRoaXMuX29wdGlvbnNDaGFuZ2UoKSx0aGlzfSxtdWx0aXBseTpmdW5jdGlvbihlKXt2YXIgdD1uKGUpO3JldHVybiB0aGlzLl9tYXRyaXg9dGhpcy5fbWF0cml4Lm11bHRpcGx5Q29weSh0KSx0aGlzLl9vcHRpb25zQ2hhbmdlKCksdGhpc30sbWF0cml4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hdHJpeH19KSxiKG0uZm4sayksYih5LHtnZW9tZXRyeTp7QXJjOmYsQ2lyY2xlOnAsTWF0cml4OmcsUG9pbnQ6UCxSZWN0OmgsU2l6ZTp1LFRyYW5zZm9ybWF0aW9uOm0sdHJhbnNmb3JtOnQsdG9NYXRyaXg6bn19KSx5LmRhdGF2aXouZ2VvbWV0cnk9eS5nZW9tZXRyeX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9ZS5ub29wLG89T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxhPXdpbmRvdy5rZW5kbyxzPWEuQ2xhc3MsbD1hLnVpLldpZGdldCxjPWEuZGVlcEV4dGVuZCxkPWEudXRpbCx1PWQuZGVmaW5lZCxoPWEuT2JzZXJ2YWJsZS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXthLk9ic2VydmFibGUuZm4uaW5pdC5jYWxsKHRoaXMpLHRoaXMub3B0aW9ucz1jKHt9LHRoaXMub3B0aW9ucyxuKSx0aGlzLmJpbmQodGhpcy5ldmVudHMsdGhpcy5vcHRpb25zKSx0aGlzLl9jbGljaz10aGlzLl9oYW5kbGVyKFwiY2xpY2tcIiksdGhpcy5fbW91c2VlbnRlcj10aGlzLl9oYW5kbGVyKFwibW91c2VlbnRlclwiKSx0aGlzLl9tb3VzZWxlYXZlPXRoaXMuX2hhbmRsZXIoXCJtb3VzZWxlYXZlXCIpLHRoaXMuZWxlbWVudD1lKHQpLHRoaXMub3B0aW9ucy53aWR0aCYmdGhpcy5lbGVtZW50LmNzcyhcIndpZHRoXCIsdGhpcy5vcHRpb25zLndpZHRoKSx0aGlzLm9wdGlvbnMuaGVpZ2h0JiZ0aGlzLmVsZW1lbnQuY3NzKFwiaGVpZ2h0XCIsdGhpcy5vcHRpb25zLmhlaWdodCl9LG9wdGlvbnM6e30sZXZlbnRzOltcImNsaWNrXCIsXCJtb3VzZWVudGVyXCIsXCJtb3VzZWxlYXZlXCIsXCJyZXNpemVcIl0sZHJhdzpyLGNsZWFyOnIsZGVzdHJveTpyLHJlc2l6ZTpsLmZuLnJlc2l6ZSxzaXplOmwuZm4uc2l6ZSxnZXRTaXplOmZ1bmN0aW9uKCl7cmV0dXJue3dpZHRoOnRoaXMuZWxlbWVudC53aWR0aCgpLGhlaWdodDp0aGlzLmVsZW1lbnQuaGVpZ2h0KCl9fSxzZXRTaXplOmZ1bmN0aW9uKGUpe3RoaXMuZWxlbWVudC5jc3Moe3dpZHRoOmUud2lkdGgsaGVpZ2h0OmUuaGVpZ2h0fSksdGhpcy5fc2l6ZT1lLHRoaXMuX3Jlc2l6ZSgpfSxldmVudFRhcmdldDpmdW5jdGlvbih0KXtmb3IodmFyIG4saT1lKHQudG91Y2g/dC50b3VjaC5pbml0aWFsVG91Y2g6dC50YXJnZXQpOyFuJiZpLmxlbmd0aD4wJiYobj1pWzBdLl9rZW5kb05vZGUsIWkuaXModGhpcy5lbGVtZW50KSYmMCE9PWkubGVuZ3RoKTspaT1pLnBhcmVudCgpO3JldHVybiBuP24uc3JjRWxlbWVudDp2b2lkIDB9LF9yZXNpemU6cixfaGFuZGxlcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBmdW5jdGlvbihuKXt2YXIgaT10LmV2ZW50VGFyZ2V0KG4pO2kmJnQudHJpZ2dlcihlLHtlbGVtZW50Omksb3JpZ2luYWxFdmVudDpufSl9fX0pO2guY3JlYXRlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkuY3VycmVudC5jcmVhdGUoZSx0KX0sdD1zLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLmNoaWxkTm9kZXM9W10sdGhpcy5wYXJlbnQ9bnVsbCxlJiYodGhpcy5zcmNFbGVtZW50PWUsdGhpcy5vYnNlcnZlKCkpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGUsdDtmb3IodGhpcy5zcmNFbGVtZW50JiZ0aGlzLnNyY0VsZW1lbnQucmVtb3ZlT2JzZXJ2ZXIodGhpcyksZT10aGlzLmNoaWxkTm9kZXMsdD0wO2UubGVuZ3RoPnQ7dCsrKXRoaXMuY2hpbGROb2Rlc1t0XS5kZXN0cm95KCk7dGhpcy5wYXJlbnQ9bnVsbH0sbG9hZDpyLG9ic2VydmU6ZnVuY3Rpb24oKXt0aGlzLnNyY0VsZW1lbnQmJnRoaXMuc3JjRWxlbWVudC5hZGRPYnNlcnZlcih0aGlzKX0sYXBwZW5kOmZ1bmN0aW9uKGUpe3RoaXMuY2hpbGROb2Rlcy5wdXNoKGUpLGUucGFyZW50PXRoaXN9LGluc2VydEF0OmZ1bmN0aW9uKGUsdCl7dGhpcy5jaGlsZE5vZGVzLnNwbGljZSh0LDAsZSksZS5wYXJlbnQ9dGhpc30scmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT1lK3Q7Zm9yKG49ZTtpPm47bisrKXRoaXMuY2hpbGROb2Rlc1tuXS5yZW1vdmVTZWxmKCk7dGhpcy5jaGlsZE5vZGVzLnNwbGljZShlLHQpfSxyZW1vdmVTZWxmOmZ1bmN0aW9uKCl7dGhpcy5jbGVhcigpLHRoaXMuZGVzdHJveSgpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMucmVtb3ZlKDAsdGhpcy5jaGlsZE5vZGVzLmxlbmd0aCl9LGludmFsaWRhdGU6ZnVuY3Rpb24oKXt0aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQuaW52YWxpZGF0ZSgpfSxnZW9tZXRyeUNoYW5nZTpmdW5jdGlvbigpe3RoaXMuaW52YWxpZGF0ZSgpfSxvcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5pbnZhbGlkYXRlKCl9LGNoaWxkcmVuQ2hhbmdlOmZ1bmN0aW9uKGUpe1wiYWRkXCI9PT1lLmFjdGlvbj90aGlzLmxvYWQoZS5pdGVtcyxlLmluZGV4KTpcInJlbW92ZVwiPT09ZS5hY3Rpb24mJnRoaXMucmVtb3ZlKGUuaW5kZXgsZS5pdGVtcy5sZW5ndGgpLHRoaXMuaW52YWxpZGF0ZSgpfX0pLG49cy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpO3RoaXMucHJlZml4PXR8fFwiXCI7Zm9yKG4gaW4gZSlpPWVbbl0saT10aGlzLl93cmFwKGksbiksdGhpc1tuXT1pfSxnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGEuZ2V0dGVyKGUsITApKHRoaXMpfSxzZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPWEuZ2V0dGVyKGUsITApKHRoaXMpO2khPT10JiYobj10aGlzLl9zZXQoZSx0aGlzLl93cmFwKHQsZSkpLG58fHRoaXMub3B0aW9uc0NoYW5nZSh7ZmllbGQ6dGhpcy5wcmVmaXgrZSx2YWx1ZTp0fSkpfSxfc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIGkscixvLHM9ZS5pbmRleE9mKFwiLlwiKT49MDtpZihzKWZvcihpPWUuc3BsaXQoXCIuXCIpLHI9XCJcIjtpLmxlbmd0aD4xOyl7aWYocis9aS5zaGlmdCgpLG89YS5nZXR0ZXIociwhMCkodGhpcyksb3x8KG89bmV3IG4oe30scitcIi5cIiksby5hZGRPYnNlcnZlcih0aGlzKSx0aGlzW3JdPW8pLG8gaW5zdGFuY2VvZiBuKXJldHVybiBvLnNldChpLmpvaW4oXCIuXCIpLHQpLHM7cis9XCIuXCJ9cmV0dXJuIHRoaXMuX2NsZWFyKGUpLGEuc2V0dGVyKGUpKHRoaXMsdCksc30sX2NsZWFyOmZ1bmN0aW9uKGUpe3ZhciB0PWEuZ2V0dGVyKGUsITApKHRoaXMpO3QmJnQucmVtb3ZlT2JzZXJ2ZXImJnQucmVtb3ZlT2JzZXJ2ZXIodGhpcyl9LF93cmFwOmZ1bmN0aW9uKGUsdCl7dmFyIGk9by5jYWxsKGUpO3JldHVybiBudWxsIT09ZSYmdShlKSYmXCJbb2JqZWN0IE9iamVjdF1cIj09PWkmJihlIGluc3RhbmNlb2Ygbnx8ZSBpbnN0YW5jZW9mIHN8fChlPW5ldyBuKGUsdGhpcy5wcmVmaXgrdCtcIi5cIikpLGUuYWRkT2JzZXJ2ZXIodGhpcykpLGV9fSksYyhuLmZuLGEubWl4aW5zLk9ic2VydmVyc01peGluKSxpPWZ1bmN0aW9uKCl7dGhpcy5faXRlbXM9W119LGkucHJvdG90eXBlPXtyZWdpc3RlcjpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcy5faXRlbXMscj1pWzBdLG89e25hbWU6ZSx0eXBlOnQsb3JkZXI6bn07IXJ8fHIub3JkZXI+bj9pLnVuc2hpZnQobyk6aS5wdXNoKG8pfSxjcmVhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcy5faXRlbXMsbz1yWzBdO2lmKHQmJnQudHlwZSlmb3Iobj10LnR5cGUudG9Mb3dlckNhc2UoKSxpPTA7ci5sZW5ndGg+aTtpKyspaWYocltpXS5uYW1lPT09bil7bz1yW2ldO2JyZWFrfXJldHVybiBvP25ldyBvLnR5cGUoZSx0KTp2b2lkIGEubG9nVG9Db25zb2xlKFwiV2FybmluZzogVW5hYmxlIHRvIGNyZWF0ZSBLZW5kbyBVSSBEcmF3aW5nIFN1cmZhY2UuIFBvc3NpYmxlIGNhdXNlczpcXG4tIFRoZSBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgU1ZHLCBWTUwgYW5kIENhbnZhcy4gVXNlciBhZ2VudDogXCIrbmF2aWdhdG9yLnVzZXJBZ2VudCtcIlxcbi0gVGhlIEtlbmRvIFVJIHNjcmlwdHMgYXJlIG5vdCBmdWxseSBsb2FkZWRcIil9fSxpLmN1cnJlbnQ9bmV3IGksYyhhLHtkcmF3aW5nOntEQVNIX0FSUkFZUzp7ZG90OlsxLjUsMy41XSxkYXNoOls0LDMuNV0sbG9uZ2Rhc2g6WzgsMy41XSxkYXNoZG90OlszLjUsMy41LDEuNSwzLjVdLGxvbmdkYXNoZG90Ols4LDMuNSwxLjUsMy41XSxsb25nZGFzaGRvdGRvdDpbOCwzLjUsMS41LDMuNSwxLjUsMy41XX0sQ29sb3I6YS5Db2xvcixCYXNlTm9kZTp0LE9wdGlvbnNTdG9yZTpuLFN1cmZhY2U6aCxTdXJmYWNlRmFjdG9yeTppfX0pLGEuZGF0YXZpei5kcmF3aW5nPWEuZHJhd2luZ1xyXG59KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKCl7dmFyIGU9d2luZG93LmtlbmRvLHQ9ZS5kZWVwRXh0ZW5kLG49ZS51dGlsLmRlZmluZWQsaT1cImdyYWRpZW50XCIscj17ZXh0ZW5kOmZ1bmN0aW9uKGUpe2UuZmlsbD10aGlzLmZpbGwsZS5zdHJva2U9dGhpcy5zdHJva2V9LGZpbGw6ZnVuY3Rpb24oZSx0KXt2YXIgcixvPXRoaXMub3B0aW9ucztyZXR1cm4gbihlKT8oZSYmZS5ub2RlVHlwZSE9aT8ocj17Y29sb3I6ZX0sbih0KSYmKHIub3BhY2l0eT10KSxvLnNldChcImZpbGxcIixyKSk6by5zZXQoXCJmaWxsXCIsZSksdGhpcyk6by5nZXQoXCJmaWxsXCIpfSxzdHJva2U6ZnVuY3Rpb24oZSx0LGkpe3JldHVybiBuKGUpPyh0aGlzLm9wdGlvbnMuc2V0KFwic3Ryb2tlLmNvbG9yXCIsZSksbih0KSYmdGhpcy5vcHRpb25zLnNldChcInN0cm9rZS53aWR0aFwiLHQpLG4oaSkmJnRoaXMub3B0aW9ucy5zZXQoXCJzdHJva2Uub3BhY2l0eVwiLGkpLHRoaXMpOnRoaXMub3B0aW9ucy5nZXQoXCJzdHJva2VcIil9fSxvPXtleHRlbmQ6ZnVuY3Rpb24oZSx0KXtlLnRyYXZlcnNlPWZ1bmN0aW9uKGUpe3ZhciBuLGkscj10aGlzW3RdO2ZvcihuPTA7ci5sZW5ndGg+bjtuKyspaT1yW25dLGkudHJhdmVyc2U/aS50cmF2ZXJzZShlKTplKGkpO3JldHVybiB0aGlzfX19O3QoZS5kcmF3aW5nLHttaXhpbnM6e1BhaW50YWJsZTpyLFRyYXZlcnNhYmxlOm99fSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXtyZXR1cm4gZC5jdXJyZW50Lm1lYXN1cmUoZSx0KX12YXIgbj1kb2N1bWVudCxpPXdpbmRvdy5rZW5kbyxyPWkuQ2xhc3Msbz1pLmRlZXBFeHRlbmQsYT1pLnV0aWwscz1hLmRlZmluZWQsbD0xLGM9ci5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5fc2l6ZT1lLHRoaXMuX2xlbmd0aD0wLHRoaXMuX21hcD17fX0scHV0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPW4uX21hcCxyPXtrZXk6ZSx2YWx1ZTp0fTtpW2VdPXIsbi5faGVhZD8obi5fdGFpbC5uZXdlcj1yLHIub2xkZXI9bi5fdGFpbCxuLl90YWlsPXIpOm4uX2hlYWQ9bi5fdGFpbD1yLG4uX2xlbmd0aD49bi5fc2l6ZT8oaVtuLl9oZWFkLmtleV09bnVsbCxuLl9oZWFkPW4uX2hlYWQubmV3ZXIsbi5faGVhZC5vbGRlcj1udWxsKTpuLl9sZW5ndGgrK30sZ2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Ll9tYXBbZV07cmV0dXJuIG4/KG49PT10Ll9oZWFkJiZuIT09dC5fdGFpbCYmKHQuX2hlYWQ9bi5uZXdlcix0Ll9oZWFkLm9sZGVyPW51bGwpLG4hPT10Ll90YWlsJiYobi5vbGRlciYmKG4ub2xkZXIubmV3ZXI9bi5uZXdlcixuLm5ld2VyLm9sZGVyPW4ub2xkZXIpLG4ub2xkZXI9dC5fdGFpbCxuLm5ld2VyPW51bGwsdC5fdGFpbC5uZXdlcj1uLHQuX3RhaWw9biksbi52YWx1ZSk6dm9pZCAwfX0pLGQ9ci5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt0aGlzLl9jYWNoZT1uZXcgYygxZTMpfSxtZWFzdXJlOmZ1bmN0aW9uKGUsdCl7dmFyIGkscixvLGMsZCx1PWEub2JqZWN0S2V5KHQpLGg9YS5oYXNoS2V5KGUrdSkscD10aGlzLl9jYWNoZS5nZXQoaCk7aWYocClyZXR1cm4gcDtpPXt3aWR0aDowLGhlaWdodDowLGJhc2VsaW5lOjB9LHI9dGhpcy5fbWVhc3VyZUJveCxvPXRoaXMuX2Jhc2VsaW5lTWFya2VyLmNsb25lTm9kZSghMSk7Zm9yKGMgaW4gdClkPXRbY10scyhkKSYmKHIuc3R5bGVbY109ZCk7cmV0dXJuIHIuaW5uZXJIVE1MPWUsci5hcHBlbmRDaGlsZChvKSxuLmJvZHkuYXBwZW5kQ2hpbGQociksKGUrXCJcIikubGVuZ3RoJiYoaS53aWR0aD1yLm9mZnNldFdpZHRoLWwsaS5oZWlnaHQ9ci5vZmZzZXRIZWlnaHQsaS5iYXNlbGluZT1vLm9mZnNldFRvcCtsKSx0aGlzLl9jYWNoZS5wdXQoaCxpKSxyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQociksaX19KTtkLmZuLl9iYXNlbGluZU1hcmtlcj1lKFwiPGRpdiBjbGFzcz0nay1iYXNlbGluZS1tYXJrZXInIHN0eWxlPSdkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHZlcnRpY2FsLWFsaWduOiBiYXNlbGluZTt3aWR0aDogXCIrbCtcInB4OyBoZWlnaHQ6IFwiK2wrXCJweDtvdmVyZmxvdzogaGlkZGVuOycgLz5cIilbMF0sZC5mbi5fbWVhc3VyZUJveD1lKFwiPGRpdiBzdHlsZT0ncG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7IHRvcDogLTQwMDBweCAhaW1wb3J0YW50OyB3aWR0aDogYXV0byAhaW1wb3J0YW50OyBoZWlnaHQ6IGF1dG8gIWltcG9ydGFudDtwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IG1hcmdpbjogMCAhaW1wb3J0YW50OyBib3JkZXI6IDAgIWltcG9ydGFudDtsaW5lLWhlaWdodDogbm9ybWFsICFpbXBvcnRhbnQ7IHZpc2liaWxpdHk6IGhpZGRlbiAhaW1wb3J0YW50OyB3aGl0ZS1zcGFjZTpub3dyYXAgIWltcG9ydGFudDsnIC8+XCIpWzBdLGQuY3VycmVudD1uZXcgZCxvKGkuZHJhd2luZyx7dXRpbDp7VGV4dE1ldHJpY3M6ZCxMUlVDYWNoZTpjLG1lYXN1cmVUZXh0OnR9fSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0LG4pe3ZhciBpLHIsbyxhO2ZvcihyPTA7ZS5sZW5ndGg+cjtyKyspbz1lW3JdLG8udmlzaWJsZSgpJiYoYT10P28uYmJveChuKTpvLnJhd0JCb3goKSxhJiYoaT1pP00udW5pb24oaSxhKTphKSk7cmV0dXJuIGl9ZnVuY3Rpb24gbihlLHQsbil7dmFyIGkscixvLGE7Zm9yKHI9MDtlLmxlbmd0aD5yO3IrKylvPWVbcl0sby52aXNpYmxlKCkmJihhPXQ/by5jbGlwcGVkQkJveChuKTpvLnJhd0JCb3goKSxhJiYoaT1pP00udW5pb24oaSxhKTphKSk7cmV0dXJuIGl9ZnVuY3Rpb24gaShlLHQpe2Uub3JpZ2luLngtPXQsZS5vcmlnaW4ueS09dCxlLnNpemUud2lkdGgrPTIqdCxlLnNpemUuaGVpZ2h0Kz0yKnR9ZnVuY3Rpb24gcihlLHQpe2Zvcih2YXIgbj0wO3QubGVuZ3RoPm47bisrKWVbdFtuXV09byh0W25dKX1mdW5jdGlvbiBvKGUpe3ZhciB0PVwiX1wiK2U7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBWKGUpPyh0aGlzLl9vYnNlcnZlckZpZWxkKHQsZSksdGhpcy5nZW9tZXRyeUNoYW5nZSgpLHRoaXMpOnRoaXNbdF19fWZ1bmN0aW9uIGEoZSx0KXtmb3IodmFyIG49MDt0Lmxlbmd0aD5uO24rKyllW3Rbbl1dPXModFtuXSl9ZnVuY3Rpb24gcyhlKXt2YXIgdD1cIl9cIitlO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gVihlKT8odGhpcy5fb2JzZXJ2ZXJGaWVsZCh0LEUuY3JlYXRlKGUpKSx0aGlzLmdlb21ldHJ5Q2hhbmdlKCksdGhpcyk6dGhpc1t0XX19ZnVuY3Rpb24gbChlLHQpe2Zvcih2YXIgbj0wO3QubGVuZ3RoPm47bisrKWVbdFtuXV09Yyh0W25dKX1mdW5jdGlvbiBjKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gVih0KT8odGhpcy5vcHRpb25zLnNldChlLHQpLHRoaXMpOnRoaXMub3B0aW9ucy5nZXQoZSl9fXZhciBkLHUsaCxwLGYsZyxtLHYsXyx5LHcsYixrLHgsQyxTPXdpbmRvdy5rZW5kbyxUPVMuQ2xhc3MsRD1TLmRlZXBFeHRlbmQsQT1TLmdlb21ldHJ5LEU9QS5Qb2ludCxNPUEuUmVjdCxQPUEuU2l6ZSxJPUEuTWF0cml4LHo9QS50b01hdHJpeCxGPVMuZHJhd2luZyxSPUYuT3B0aW9uc1N0b3JlLEI9TWF0aCxMPUIucG93LE89Uy51dGlsLEg9Ty5hcHBlbmQsTj1PLmFycmF5TGltaXRzLFY9Ty5kZWZpbmVkLFU9Ty5sYXN0LFc9Ty52YWx1ZU9yRGVmYXVsdCxqPVMubWl4aW5zLk9ic2VydmVyc01peGluLEc9ZS5pbkFycmF5LHE9W10ucHVzaCwkPVtdLnBvcCxZPVtdLnNwbGljZSxLPVtdLnNoaWZ0LFE9W10uc2xpY2UsWD1bXS51bnNoaWZ0LEo9VC5leHRlbmQoe25vZGVUeXBlOlwiRWxlbWVudFwiLGluaXQ6ZnVuY3Rpb24oZSl7dGhpcy5faW5pdE9wdGlvbnMoZSl9LF9pbml0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgdCxuO2U9ZXx8e30sdD1lLnRyYW5zZm9ybSxuPWUuY2xpcCx0JiYoZS50cmFuc2Zvcm09QS50cmFuc2Zvcm0odCkpLG4mJiFuLmlkJiYobi5pZD1TLmd1aWQoKSksdGhpcy5vcHRpb25zPW5ldyBSKGUpLHRoaXMub3B0aW9ucy5hZGRPYnNlcnZlcih0aGlzKX0sdHJhbnNmb3JtOmZ1bmN0aW9uKGUpe3JldHVybiBWKGUpP3ZvaWQgdGhpcy5vcHRpb25zLnNldChcInRyYW5zZm9ybVwiLEEudHJhbnNmb3JtKGUpKTp0aGlzLm9wdGlvbnMuZ2V0KFwidHJhbnNmb3JtXCIpfSxwYXJlbnRUcmFuc2Zvcm06ZnVuY3Rpb24oKXtmb3IodmFyIGUsdCxuPXRoaXM7bi5wYXJlbnQ7KW49bi5wYXJlbnQsZT1uLnRyYW5zZm9ybSgpLGUmJih0PWUubWF0cml4KCkubXVsdGlwbHlDb3B5KHR8fEkudW5pdCgpKSk7cmV0dXJuIHQ/QS50cmFuc2Zvcm0odCk6dm9pZCAwfSxjdXJyZW50VHJhbnNmb3JtOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLnRyYW5zZm9ybSgpLHI9eihpKTtyZXR1cm4gVihlKXx8KGU9dGhpcy5wYXJlbnRUcmFuc2Zvcm0oKSksdD16KGUpLG49ciYmdD90Lm11bHRpcGx5Q29weShyKTpyfHx0LG4/QS50cmFuc2Zvcm0obik6dm9pZCAwfSx2aXNpYmxlOmZ1bmN0aW9uKGUpe3JldHVybiBWKGUpPyh0aGlzLm9wdGlvbnMuc2V0KFwidmlzaWJsZVwiLGUpLHRoaXMpOnRoaXMub3B0aW9ucy5nZXQoXCJ2aXNpYmxlXCIpIT09ITF9LGNsaXA6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5vcHRpb25zO3JldHVybiBWKGUpPyhlJiYhZS5pZCYmKGUuaWQ9Uy5ndWlkKCkpLHQuc2V0KFwiY2xpcFwiLGUpLHRoaXMpOnQuZ2V0KFwiY2xpcFwiKX0sb3BhY2l0eTpmdW5jdGlvbihlKXtyZXR1cm4gVihlKT8odGhpcy5vcHRpb25zLnNldChcIm9wYWNpdHlcIixlKSx0aGlzKTpXKHRoaXMub3B0aW9ucy5nZXQoXCJvcGFjaXR5XCIpLDEpfSxjbGlwcGVkQkJveDpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMuX2NsaXBwZWRCQm94KGUpO3JldHVybiBuPyh0PXRoaXMuY2xpcCgpLHQ/TS5pbnRlcnNlY3Qobix0LmJib3goZSkpOm4pOnZvaWQgMH0sX2NsaXBwZWRCQm94OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmJib3goZSl9fSk7RChKLmZuLGopLGQ9VC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7ZT1lfHxbXSx0aGlzLmxlbmd0aD0wLHRoaXMuX3NwbGljZSgwLGUubGVuZ3RoLGUpfSxlbGVtZW50czpmdW5jdGlvbihlKXtyZXR1cm4gZT8odGhpcy5fc3BsaWNlKDAsdGhpcy5sZW5ndGgsZSksdGhpcy5fY2hhbmdlKCksdGhpcyk6dGhpcy5zbGljZSgwKX0scHVzaDpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cyx0PXEuYXBwbHkodGhpcyxlKTtyZXR1cm4gdGhpcy5fYWRkKGUpLHR9LHNsaWNlOlEscG9wOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZW5ndGgsdD0kLmFwcGx5KHRoaXMpO3JldHVybiBlJiZ0aGlzLl9yZW1vdmUoW3RdKSx0fSxzcGxpY2U6ZnVuY3Rpb24oZSx0KXt2YXIgbj1RLmNhbGwoYXJndW1lbnRzLDIpLGk9dGhpcy5fc3BsaWNlKGUsdCxuKTtyZXR1cm4gdGhpcy5fY2hhbmdlKCksaX0sc2hpZnQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxlbmd0aCx0PUsuYXBwbHkodGhpcyk7cmV0dXJuIGUmJnRoaXMuX3JlbW92ZShbdF0pLHR9LHVuc2hpZnQ6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMsdD1YLmFwcGx5KHRoaXMsZSk7cmV0dXJuIHRoaXMuX2FkZChlKSx0fSxpbmRleE9mOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzO2Zvcih0PTAsbj1pLmxlbmd0aDtuPnQ7dCsrKWlmKGlbdF09PT1lKXJldHVybiB0O3JldHVybi0xfSxfc3BsaWNlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1ZLmFwcGx5KHRoaXMsW2UsdF0uY29uY2F0KG4pKTtyZXR1cm4gdGhpcy5fY2xlYXJPYnNlcnZlcihpKSx0aGlzLl9zZXRPYnNlcnZlcihuKSxpfSxfYWRkOmZ1bmN0aW9uKGUpe3RoaXMuX3NldE9ic2VydmVyKGUpLHRoaXMuX2NoYW5nZSgpfSxfcmVtb3ZlOmZ1bmN0aW9uKGUpe3RoaXMuX2NsZWFyT2JzZXJ2ZXIoZSksdGhpcy5fY2hhbmdlKCl9LF9zZXRPYnNlcnZlcjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDtlLmxlbmd0aD50O3QrKyllW3RdLmFkZE9ic2VydmVyKHRoaXMpfSxfY2xlYXJPYnNlcnZlcjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDtlLmxlbmd0aD50O3QrKyllW3RdLnJlbW92ZU9ic2VydmVyKHRoaXMpfSxfY2hhbmdlOmZ1bmN0aW9uKCl7fX0pLEQoZC5mbixqKSx1PUouZXh0ZW5kKHtub2RlVHlwZTpcIkdyb3VwXCIsaW5pdDpmdW5jdGlvbihlKXtKLmZuLmluaXQuY2FsbCh0aGlzLGUpLHRoaXMuY2hpbGRyZW49W119LGNoaWxkcmVuQ2hhbmdlOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLnRyaWdnZXIoXCJjaGlsZHJlbkNoYW5nZVwiLHthY3Rpb246ZSxpdGVtczp0LGluZGV4Om59KX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIEgodGhpcy5jaGlsZHJlbixhcmd1bWVudHMpLHRoaXMuX3JlcGFyZW50KGFyZ3VtZW50cyx0aGlzKSx0aGlzLmNoaWxkcmVuQ2hhbmdlKFwiYWRkXCIsYXJndW1lbnRzKSx0aGlzfSxpbnNlcnRBdDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmNoaWxkcmVuLnNwbGljZSh0LDAsZSksZS5wYXJlbnQ9dGhpcyx0aGlzLmNoaWxkcmVuQ2hhbmdlKFwiYWRkXCIsW2VdLHQpLHRoaXN9LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgdD1HKGUsdGhpcy5jaGlsZHJlbik7cmV0dXJuIHQ+PTAmJih0aGlzLmNoaWxkcmVuLnNwbGljZSh0LDEpLGUucGFyZW50PW51bGwsdGhpcy5jaGlsZHJlbkNoYW5nZShcInJlbW92ZVwiLFtlXSx0KSksdGhpc30scmVtb3ZlQXQ6ZnVuY3Rpb24oZSl7aWYoZT49MCYmdGhpcy5jaGlsZHJlbi5sZW5ndGg+ZSl7dmFyIHQ9dGhpcy5jaGlsZHJlbltlXTt0aGlzLmNoaWxkcmVuLnNwbGljZShlLDEpLHQucGFyZW50PW51bGwsdGhpcy5jaGlsZHJlbkNoYW5nZShcInJlbW92ZVwiLFt0XSxlKX1yZXR1cm4gdGhpc30sY2xlYXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNoaWxkcmVuO3JldHVybiB0aGlzLmNoaWxkcmVuPVtdLHRoaXMuX3JlcGFyZW50KGUsbnVsbCksdGhpcy5jaGlsZHJlbkNoYW5nZShcInJlbW92ZVwiLGUsMCksdGhpc30sYmJveDpmdW5jdGlvbihlKXtyZXR1cm4gdCh0aGlzLmNoaWxkcmVuLCEwLHRoaXMuY3VycmVudFRyYW5zZm9ybShlKSl9LHJhd0JCb3g6ZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLmNoaWxkcmVuLCExKX0sX2NsaXBwZWRCQm94OmZ1bmN0aW9uKGUpe3JldHVybiBuKHRoaXMuY2hpbGRyZW4sdGhpcy5jdXJyZW50VHJhbnNmb3JtKGUpKX0sY3VycmVudFRyYW5zZm9ybTpmdW5jdGlvbihlKXtyZXR1cm4gSi5mbi5jdXJyZW50VHJhbnNmb3JtLmNhbGwodGhpcyxlKXx8bnVsbH0sX3JlcGFyZW50OmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyO2ZvcihuPTA7ZS5sZW5ndGg+bjtuKyspaT1lW25dLHI9aS5wYXJlbnQsciYmciE9dGhpcyYmci5yZW1vdmUmJnIucmVtb3ZlKGkpLGkucGFyZW50PXR9fSksRi5taXhpbnMuVHJhdmVyc2FibGUuZXh0ZW5kKHUuZm4sXCJjaGlsZHJlblwiKSxoPUouZXh0ZW5kKHtub2RlVHlwZTpcIlRleHRcIixpbml0OmZ1bmN0aW9uKGUsdCxuKXtKLmZuLmluaXQuY2FsbCh0aGlzLG4pLHRoaXMuY29udGVudChlKSx0aGlzLnBvc2l0aW9uKHR8fG5ldyBBLlBvaW50KSx0aGlzLm9wdGlvbnMuZm9udHx8KHRoaXMub3B0aW9ucy5mb250PVwiMTJweCBzYW5zLXNlcmlmXCIpLFYodGhpcy5vcHRpb25zLmZpbGwpfHx0aGlzLmZpbGwoXCIjMDAwXCIpfSxjb250ZW50OmZ1bmN0aW9uKGUpe3JldHVybiBWKGUpPyh0aGlzLm9wdGlvbnMuc2V0KFwiY29udGVudFwiLGUpLHRoaXMpOnRoaXMub3B0aW9ucy5nZXQoXCJjb250ZW50XCIpfSxtZWFzdXJlOmZ1bmN0aW9uKCl7dmFyIGU9Ri51dGlsLm1lYXN1cmVUZXh0KHRoaXMuY29udGVudCgpLHtmb250OnRoaXMub3B0aW9ucy5nZXQoXCJmb250XCIpfSk7cmV0dXJuIGV9LHJlY3Q6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1lYXN1cmUoKSx0PXRoaXMucG9zaXRpb24oKS5jbG9uZSgpO3JldHVybiBuZXcgQS5SZWN0KHQsW2Uud2lkdGgsZS5oZWlnaHRdKX0sYmJveDpmdW5jdGlvbihlKXt2YXIgdD16KHRoaXMuY3VycmVudFRyYW5zZm9ybShlKSk7cmV0dXJuIHRoaXMucmVjdCgpLmJib3godCl9LHJhd0JCb3g6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWN0KCkuYmJveCgpfX0pLEYubWl4aW5zLlBhaW50YWJsZS5leHRlbmQoaC5mbiksYShoLmZuLFtcInBvc2l0aW9uXCJdKSxwPUouZXh0ZW5kKHtub2RlVHlwZTpcIkNpcmNsZVwiLGluaXQ6ZnVuY3Rpb24oZSx0KXtKLmZuLmluaXQuY2FsbCh0aGlzLHQpLHRoaXMuZ2VvbWV0cnkoZXx8bmV3IEEuQ2lyY2xlKSxWKHRoaXMub3B0aW9ucy5zdHJva2UpfHx0aGlzLnN0cm9rZShcIiMwMDBcIil9LGJib3g6ZnVuY3Rpb24oZSl7dmFyIHQ9eih0aGlzLmN1cnJlbnRUcmFuc2Zvcm0oZSkpLG49dGhpcy5fZ2VvbWV0cnkuYmJveCh0KSxyPXRoaXMub3B0aW9ucy5nZXQoXCJzdHJva2Uud2lkdGhcIik7cmV0dXJuIHImJmkobixyLzIpLG59LHJhd0JCb3g6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2VvbWV0cnkuYmJveCgpfX0pLEYubWl4aW5zLlBhaW50YWJsZS5leHRlbmQocC5mbikscihwLmZuLFtcImdlb21ldHJ5XCJdKSxmPUouZXh0ZW5kKHtub2RlVHlwZTpcIkFyY1wiLGluaXQ6ZnVuY3Rpb24oZSx0KXtKLmZuLmluaXQuY2FsbCh0aGlzLHQpLHRoaXMuZ2VvbWV0cnkoZXx8bmV3IEEuQXJjKSxWKHRoaXMub3B0aW9ucy5zdHJva2UpfHx0aGlzLnN0cm9rZShcIiMwMDBcIil9LGJib3g6ZnVuY3Rpb24oZSl7dmFyIHQ9eih0aGlzLmN1cnJlbnRUcmFuc2Zvcm0oZSkpLG49dGhpcy5nZW9tZXRyeSgpLmJib3godCkscj10aGlzLm9wdGlvbnMuZ2V0KFwic3Ryb2tlLndpZHRoXCIpO3JldHVybiByJiZpKG4sci8yKSxufSxyYXdCQm94OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2VvbWV0cnkoKS5iYm94KCl9LHRvUGF0aDpmdW5jdGlvbigpe3ZhciBlLHQ9bmV3IHYsbj10aGlzLmdlb21ldHJ5KCkuY3VydmVQb2ludHMoKTtpZihuLmxlbmd0aD4wKWZvcih0Lm1vdmVUbyhuWzBdLngsblswXS55KSxlPTE7bi5sZW5ndGg+ZTtlKz0zKXQuY3VydmVUbyhuW2VdLG5bZSsxXSxuW2UrMl0pO3JldHVybiB0fX0pLEYubWl4aW5zLlBhaW50YWJsZS5leHRlbmQoZi5mbikscihmLmZuLFtcImdlb21ldHJ5XCJdKSxnPWQuZXh0ZW5kKHtfY2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5nZW9tZXRyeUNoYW5nZSgpfX0pLG09VC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3RoaXMuYW5jaG9yKGV8fG5ldyBFKSx0aGlzLmNvbnRyb2xJbih0KSx0aGlzLmNvbnRyb2xPdXQobil9LGJib3hUbzpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcy5hbmNob3IoKS50cmFuc2Zvcm1Db3B5KHQpLHI9ZS5hbmNob3IoKS50cmFuc2Zvcm1Db3B5KHQpO3JldHVybiBuPXRoaXMuY29udHJvbE91dCgpJiZlLmNvbnRyb2xJbigpP3RoaXMuX2N1cnZlQm91bmRpbmdCb3goaSx0aGlzLmNvbnRyb2xPdXQoKS50cmFuc2Zvcm1Db3B5KHQpLGUuY29udHJvbEluKCkudHJhbnNmb3JtQ29weSh0KSxyKTp0aGlzLl9saW5lQm91bmRpbmdCb3goaSxyKX0sX2xpbmVCb3VuZGluZ0JveDpmdW5jdGlvbihlLHQpe3JldHVybiBNLmZyb21Qb2ludHMoZSx0KX0sX2N1cnZlQm91bmRpbmdCb3g6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9W2UsdCxuLGldLG89dGhpcy5fY3VydmVFeHRyZW1lc0ZvcihyLFwieFwiKSxhPXRoaXMuX2N1cnZlRXh0cmVtZXNGb3IocixcInlcIikscz1OKFtvLm1pbixvLm1heCxlLngsaS54XSksbD1OKFthLm1pbixhLm1heCxlLnksaS55XSk7cmV0dXJuIE0uZnJvbVBvaW50cyhuZXcgRShzLm1pbixsLm1pbiksbmV3IEUocy5tYXgsbC5tYXgpKX0sX2N1cnZlRXh0cmVtZXNGb3I6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9jdXJ2ZUV4dHJlbWVzKGVbMF1bdF0sZVsxXVt0XSxlWzJdW3RdLGVbM11bdF0pO3JldHVybnttaW46dGhpcy5fY2FsY3VsYXRlQ3VydmVBdChuLm1pbix0LGUpLG1heDp0aGlzLl9jYWxjdWxhdGVDdXJ2ZUF0KG4ubWF4LHQsZSl9fSxfY2FsY3VsYXRlQ3VydmVBdDpmdW5jdGlvbihlLHQsbil7dmFyIGk9MS1lO3JldHVybiBMKGksMykqblswXVt0XSszKkwoaSwyKSplKm5bMV1bdF0rMypMKGUsMikqaSpuWzJdW3RdK0woZSwzKSpuWzNdW3RdfSxfY3VydmVFeHRyZW1lczpmdW5jdGlvbihlLHQsbixpKXt2YXIgcixvLGE9ZS0zKnQrMypuLWkscz0tMiooZS0yKnQrbiksbD1lLXQsYz1CLnNxcnQocypzLTQqYSpsKSxkPTAsdT0xO3JldHVybiAwPT09YT8wIT09cyYmKGQ9dT0tbC9zKTppc05hTihjKXx8KGQ9KC1zK2MpLygyKmEpLHU9KC1zLWMpLygyKmEpKSxyPUIubWF4KEIubWluKGQsdSksMCksKDA+cnx8cj4xKSYmKHI9MCksbz1CLm1pbihCLm1heChkLHUpLDEpLChvPjF8fDA+bykmJihvPTEpLHttaW46cixtYXg6b319fSksYShtLmZuLFtcImFuY2hvclwiLFwiY29udHJvbEluXCIsXCJjb250cm9sT3V0XCJdKSxEKG0uZm4saiksdj1KLmV4dGVuZCh7bm9kZVR5cGU6XCJQYXRoXCIsaW5pdDpmdW5jdGlvbihlKXtKLmZuLmluaXQuY2FsbCh0aGlzLGUpLHRoaXMuc2VnbWVudHM9bmV3IGcsdGhpcy5zZWdtZW50cy5hZGRPYnNlcnZlcih0aGlzKSxWKHRoaXMub3B0aW9ucy5zdHJva2UpfHwodGhpcy5zdHJva2UoXCIjMDAwXCIpLFYodGhpcy5vcHRpb25zLnN0cm9rZS5saW5lSm9pbil8fHRoaXMub3B0aW9ucy5zZXQoXCJzdHJva2UubGluZUpvaW5cIixcIm1pdGVyXCIpKX0sbW92ZVRvOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuc3VzcGVuZCgpLHRoaXMuc2VnbWVudHMuZWxlbWVudHMoW10pLHRoaXMucmVzdW1lKCksdGhpcy5saW5lVG8oZSx0KSx0aGlzfSxsaW5lVG86ZnVuY3Rpb24oZSx0KXt2YXIgbj1WKHQpP25ldyBFKGUsdCk6ZSxpPW5ldyBtKG4pO3JldHVybiB0aGlzLnNlZ21lbnRzLnB1c2goaSksdGhpc30sY3VydmVUbzpmdW5jdGlvbihlLHQsbil7dmFyIGkscjtyZXR1cm4gdGhpcy5zZWdtZW50cy5sZW5ndGg+MCYmKGk9VSh0aGlzLnNlZ21lbnRzKSxyPW5ldyBtKG4sdCksdGhpcy5zdXNwZW5kKCksaS5jb250cm9sT3V0KGUpLHRoaXMucmVzdW1lKCksdGhpcy5zZWdtZW50cy5wdXNoKHIpKSx0aGlzfSxhcmM6ZnVuY3Rpb24oZSx0LG4saSxyKXt2YXIgbyxhLHMsbCxjO3JldHVybiB0aGlzLnNlZ21lbnRzLmxlbmd0aD4wJiYobz1VKHRoaXMuc2VnbWVudHMpLGE9by5hbmNob3IoKSxzPU8ucmFkKGUpLGw9bmV3IEUoYS54LW4qQi5jb3MocyksYS55LWkqQi5zaW4ocykpLGM9bmV3IEEuQXJjKGwse3N0YXJ0QW5nbGU6ZSxlbmRBbmdsZTp0LHJhZGl1c1g6bixyYWRpdXNZOmksYW50aWNsb2Nrd2lzZTpyfSksdGhpcy5fYWRkQXJjU2VnbWVudHMoYykpLHRoaXN9LGFyY1RvOmZ1bmN0aW9uKGUsdCxuLGkscil7dmFyIG8sYSxzO3JldHVybiB0aGlzLnNlZ21lbnRzLmxlbmd0aD4wJiYobz1VKHRoaXMuc2VnbWVudHMpLGE9by5hbmNob3IoKSxzPUEuQXJjLmZyb21Qb2ludHMoYSxlLHQsbixpLHIpLHRoaXMuX2FkZEFyY1NlZ21lbnRzKHMpKSx0aGlzfSxfYWRkQXJjU2VnbWVudHM6ZnVuY3Rpb24oZSl7dmFyIHQsbjtmb3IodGhpcy5zdXNwZW5kKCksdD1lLmN1cnZlUG9pbnRzKCksbj0xO3QubGVuZ3RoPm47bis9Myl0aGlzLmN1cnZlVG8odFtuXSx0W24rMV0sdFtuKzJdKTt0aGlzLnJlc3VtZSgpLHRoaXMuZ2VvbWV0cnlDaGFuZ2UoKX0sY2xvc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLmNsb3NlZD0hMCx0aGlzLmdlb21ldHJ5Q2hhbmdlKCksdGhpc30sYmJveDpmdW5jdGlvbihlKXt2YXIgdD16KHRoaXMuY3VycmVudFRyYW5zZm9ybShlKSksbj10aGlzLl9iYm94KHQpLHI9dGhpcy5vcHRpb25zLmdldChcInN0cm9rZS53aWR0aFwiKTtyZXR1cm4gciYmaShuLHIvMiksbn0scmF3QkJveDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYm94KCl9LF9iYm94OmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG89dGhpcy5zZWdtZW50cyxhPW8ubGVuZ3RoO2lmKDE9PT1hKW49b1swXS5hbmNob3IoKS50cmFuc2Zvcm1Db3B5KGUpLHQ9bmV3IE0obixQLlpFUk8pO2Vsc2UgaWYoYT4wKWZvcihpPTE7YT5pO2krKylyPW9baS0xXS5iYm94VG8ob1tpXSxlKSx0PXQ/TS51bmlvbih0LHIpOnI7cmV0dXJuIHR9fSksRi5taXhpbnMuUGFpbnRhYmxlLmV4dGVuZCh2LmZuKSx2LmZyb21SZWN0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyB2KHQpLm1vdmVUbyhlLnRvcExlZnQoKSkubGluZVRvKGUudG9wUmlnaHQoKSkubGluZVRvKGUuYm90dG9tUmlnaHQoKSkubGluZVRvKGUuYm90dG9tTGVmdCgpKS5jbG9zZSgpfSx2LmZyb21Qb2ludHM9ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI7aWYoZSl7Zm9yKG49bmV3IHYodCksaT0wO2UubGVuZ3RoPmk7aSsrKXI9RS5jcmVhdGUoZVtpXSksciYmKDA9PT1pP24ubW92ZVRvKHIpOm4ubGluZVRvKHIpKTtyZXR1cm4gbn19LHYuZnJvbUFyYz1mdW5jdGlvbihlLHQpe3ZhciBuPW5ldyB2KHQpLGk9ZS5zdGFydEFuZ2xlLHI9ZS5wb2ludEF0KGkpO3JldHVybiBuLm1vdmVUbyhyLngsci55KSxuLmFyYyhpLGUuZW5kQW5nbGUsZS5yYWRpdXNYLGUucmFkaXVzWSxlLmFudGljbG9ja3dpc2UpLG59LF89Si5leHRlbmQoe25vZGVUeXBlOlwiTXVsdGlQYXRoXCIsaW5pdDpmdW5jdGlvbihlKXtKLmZuLmluaXQuY2FsbCh0aGlzLGUpLHRoaXMucGF0aHM9bmV3IGcsdGhpcy5wYXRocy5hZGRPYnNlcnZlcih0aGlzKSxWKHRoaXMub3B0aW9ucy5zdHJva2UpfHx0aGlzLnN0cm9rZShcIiMwMDBcIil9LG1vdmVUbzpmdW5jdGlvbihlLHQpe3ZhciBuPW5ldyB2O3JldHVybiBuLm1vdmVUbyhlLHQpLHRoaXMucGF0aHMucHVzaChuKSx0aGlzfSxsaW5lVG86ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5wYXRocy5sZW5ndGg+MCYmVSh0aGlzLnBhdGhzKS5saW5lVG8oZSx0KSx0aGlzfSxjdXJ2ZVRvOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5wYXRocy5sZW5ndGg+MCYmVSh0aGlzLnBhdGhzKS5jdXJ2ZVRvKGUsdCxuKSx0aGlzfSxhcmM6ZnVuY3Rpb24oZSx0LG4saSxyKXtyZXR1cm4gdGhpcy5wYXRocy5sZW5ndGg+MCYmVSh0aGlzLnBhdGhzKS5hcmMoZSx0LG4saSxyKSx0aGlzfSxhcmNUbzpmdW5jdGlvbihlLHQsbixpLHIpe3JldHVybiB0aGlzLnBhdGhzLmxlbmd0aD4wJiZVKHRoaXMucGF0aHMpLmFyY1RvKGUsdCxuLGksciksdGhpc30sY2xvc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXRocy5sZW5ndGg+MCYmVSh0aGlzLnBhdGhzKS5jbG9zZSgpLHRoaXN9LGJib3g6ZnVuY3Rpb24oZSl7cmV0dXJuIHQodGhpcy5wYXRocywhMCx0aGlzLmN1cnJlbnRUcmFuc2Zvcm0oZSkpfSxyYXdCQm94OmZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcy5wYXRocywhMSl9LF9jbGlwcGVkQkJveDpmdW5jdGlvbihlKXtyZXR1cm4gbih0aGlzLnBhdGhzLHRoaXMuY3VycmVudFRyYW5zZm9ybShlKSl9fSksRi5taXhpbnMuUGFpbnRhYmxlLmV4dGVuZChfLmZuKSx5PUouZXh0ZW5kKHtub2RlVHlwZTpcIkltYWdlXCIsaW5pdDpmdW5jdGlvbihlLHQsbil7Si5mbi5pbml0LmNhbGwodGhpcyxuKSx0aGlzLnNyYyhlKSx0aGlzLnJlY3QodHx8bmV3IEEuUmVjdCl9LHNyYzpmdW5jdGlvbihlKXtyZXR1cm4gVihlKT8odGhpcy5vcHRpb25zLnNldChcInNyY1wiLGUpLHRoaXMpOnRoaXMub3B0aW9ucy5nZXQoXCJzcmNcIil9LGJib3g6ZnVuY3Rpb24oZSl7dmFyIHQ9eih0aGlzLmN1cnJlbnRUcmFuc2Zvcm0oZSkpO3JldHVybiB0aGlzLl9yZWN0LmJib3godCl9LHJhd0JCb3g6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVjdC5iYm94KCl9fSkscih5LmZuLFtcInJlY3RcIl0pLHc9VC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3RoaXMub3B0aW9ucz1uZXcgUih7b2Zmc2V0OmUsY29sb3I6dCxvcGFjaXR5OlYobik/bjoxfSksdGhpcy5vcHRpb25zLmFkZE9ic2VydmVyKHRoaXMpfX0pLGwody5mbixbXCJvZmZzZXRcIixcImNvbG9yXCIsXCJvcGFjaXR5XCJdKSxEKHcuZm4saiksdy5jcmVhdGU9ZnVuY3Rpb24oZSl7aWYoVihlKSl7dmFyIHQ7cmV0dXJuIHQ9ZSBpbnN0YW5jZW9mIHc/ZTplLmxlbmd0aD4xP25ldyB3KGVbMF0sZVsxXSxlWzJdKTpuZXcgdyhlLm9mZnNldCxlLmNvbG9yLGUub3BhY2l0eSl9fSxiPWQuZXh0ZW5kKHtfY2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zQ2hhbmdlKHtmaWVsZDpcInN0b3BzXCJ9KX19KSxrPVQuZXh0ZW5kKHtub2RlVHlwZTpcImdyYWRpZW50XCIsaW5pdDpmdW5jdGlvbihlKXt0aGlzLnN0b3BzPW5ldyBiKHRoaXMuX2NyZWF0ZVN0b3BzKGUuc3RvcHMpKSx0aGlzLnN0b3BzLmFkZE9ic2VydmVyKHRoaXMpLHRoaXMuX3VzZXJTcGFjZT1lLnVzZXJTcGFjZSx0aGlzLmlkPVMuZ3VpZCgpfSx1c2VyU3BhY2U6ZnVuY3Rpb24oZSl7cmV0dXJuIFYoZSk/KHRoaXMuX3VzZXJTcGFjZT1lLHRoaXMub3B0aW9uc0NoYW5nZSgpLHRoaXMpOnRoaXMuX3VzZXJTcGFjZX0sX2NyZWF0ZVN0b3BzOmZ1bmN0aW9uKGUpe3ZhciB0LG49W107Zm9yKGU9ZXx8W10sdD0wO2UubGVuZ3RoPnQ7dCsrKW4ucHVzaCh3LmNyZWF0ZShlW3RdKSk7cmV0dXJuIG59LGFkZFN0b3A6ZnVuY3Rpb24oZSx0LG4pe3RoaXMuc3RvcHMucHVzaChuZXcgdyhlLHQsbikpfSxyZW1vdmVTdG9wOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc3RvcHMuaW5kZXhPZihlKTt0Pj0wJiZ0aGlzLnN0b3BzLnNwbGljZSh0LDEpfX0pLEQoay5mbixqLHtvcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKGUpe3RoaXMudHJpZ2dlcihcIm9wdGlvbnNDaGFuZ2VcIix7ZmllbGQ6XCJncmFkaWVudFwiKyhlP1wiLlwiK2UuZmllbGQ6XCJcIiksdmFsdWU6dGhpc30pfSxnZW9tZXRyeUNoYW5nZTpmdW5jdGlvbigpe3RoaXMub3B0aW9uc0NoYW5nZSgpfX0pLHg9ay5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7ZT1lfHx7fSxrLmZuLmluaXQuY2FsbCh0aGlzLGUpLHRoaXMuc3RhcnQoZS5zdGFydHx8bmV3IEUpLHRoaXMuZW5kKGUuZW5kfHxuZXcgRSgxLDApKX19KSxhKHguZm4sW1wic3RhcnRcIixcImVuZFwiXSksQz1rLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXtlPWV8fHt9LGsuZm4uaW5pdC5jYWxsKHRoaXMsZSksdGhpcy5jZW50ZXIoZS5jZW50ZXJ8fG5ldyBFKSx0aGlzLl9yYWRpdXM9VihlLnJhZGl1cyk/ZS5yYWRpdXM6MSx0aGlzLl9mYWxsYmFja0ZpbGw9ZS5mYWxsYmFja0ZpbGx9LHJhZGl1czpmdW5jdGlvbihlKXtyZXR1cm4gVihlKT8odGhpcy5fcmFkaXVzPWUsdGhpcy5nZW9tZXRyeUNoYW5nZSgpLHRoaXMpOnRoaXMuX3JhZGl1c30sZmFsbGJhY2tGaWxsOmZ1bmN0aW9uKGUpe3JldHVybiBWKGUpPyh0aGlzLl9mYWxsYmFja0ZpbGw9ZSx0aGlzLm9wdGlvbnNDaGFuZ2UoKSx0aGlzKTp0aGlzLl9mYWxsYmFja0ZpbGx9fSksYShDLmZuLFtcImNlbnRlclwiXSksRChGLHtBcmM6ZixDaXJjbGU6cCxFbGVtZW50OkosRWxlbWVudHNBcnJheTpkLEdyYWRpZW50OmssR3JhZGllbnRTdG9wOncsR3JvdXA6dSxJbWFnZTp5LExpbmVhckdyYWRpZW50OngsTXVsdGlQYXRoOl8sUGF0aDp2LFJhZGlhbEdyYWRpZW50OkMsU2VnbWVudDptLFRleHQ6aH0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3ZhciB0PVtdO3JldHVybiBlLnJlcGxhY2UoZyxmdW5jdGlvbihlLG4pe3QucHVzaChwYXJzZUZsb2F0KG4pKX0pLHR9ZnVuY3Rpb24gbihlLHQsbil7dmFyIGkscj10PzA6MTtmb3IoaT0wO2UubGVuZ3RoPmk7aSs9MillLnNwbGljZShpK3IsMCxuKX1mdW5jdGlvbiBpKGUsdCl7cmV0dXJuIGUmJnQ/dC5zY2FsZUNvcHkoMikudHJhbnNsYXRlKC1lLngsLWUueSk6dm9pZCAwfWZ1bmN0aW9uIHIoZSx0LG4pe3ZhciBpPTEvMztyZXR1cm4gdD10LmNsb25lKCkuc2NhbGUoMi8zKSx7Y29udHJvbE91dDp0LmNsb25lKCkudHJhbnNsYXRlV2l0aChlLnNjYWxlQ29weShpKSksY29udHJvbEluOnQudHJhbnNsYXRlV2l0aChuLnNjYWxlQ29weShpKSl9fXZhciBvPXdpbmRvdy5rZW5kbyxhPW8uZHJhd2luZyxzPW8uZ2VvbWV0cnksbD1vLkNsYXNzLGM9cy5Qb2ludCxkPW8uZGVlcEV4dGVuZCx1PWUudHJpbSxoPW8udXRpbCxwPWgubGFzdCxmPS8oW2Etel17MX0pKFteYS16XSopKHopPy9naSxnPS9bLFxcc10/KC0/KD86XFxkK1xcLik/XFxkKykvZyxtPVwibVwiLHY9XCJ6XCIsXz1sLmV4dGVuZCh7cGFyc2U6ZnVuY3Rpb24oZSxuKXt2YXIgaSxyPW5ldyBhLk11bHRpUGF0aChuKSxvPW5ldyBjO3JldHVybiBlLnJlcGxhY2UoZixmdW5jdGlvbihlLG4sYSxzKXt2YXIgbD1uLnRvTG93ZXJDYXNlKCksYz1sPT09bixkPXQodShhKSk7aWYobD09PW0mJihjPyhvLngrPWRbMF0sby55Kz1kWzFdKTooby54PWRbMF0sby55PWRbMV0pLHIubW92ZVRvKG8ueCxvLnkpLGQubGVuZ3RoPjImJihsPVwibFwiLGQuc3BsaWNlKDAsMikpKSx5W2xdKXlbbF0ocix7cGFyYW1ldGVyczpkLHBvc2l0aW9uOm8saXNSZWxhdGl2ZTpjLHByZXZpb3VzQ29tbWFuZDppfSkscyYmcy50b0xvd2VyQ2FzZSgpPT09diYmci5jbG9zZSgpO2Vsc2UgaWYobCE9PW0pdGhyb3cgRXJyb3IoXCJFcnJvciB3aGlsZSBwYXJzaW5nIFNWRyBwYXRoLiBVbnN1cHBvcnRlZCBjb21tYW5kOiBcIitsKTtpPWx9KSxyfX0pLHk9e2w6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dC5wYXJhbWV0ZXJzLG89dC5wb3NpdGlvbjtmb3Iobj0wO3IubGVuZ3RoPm47bis9MilpPW5ldyBjKHJbbl0scltuKzFdKSx0LmlzUmVsYXRpdmUmJmkudHJhbnNsYXRlV2l0aChvKSxlLmxpbmVUbyhpLngsaS55KSxvLng9aS54LG8ueT1pLnl9LGM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxhPXQucGFyYW1ldGVycyxzPXQucG9zaXRpb247Zm9yKG89MDthLmxlbmd0aD5vO28rPTYpbj1uZXcgYyhhW29dLGFbbysxXSksaT1uZXcgYyhhW28rMl0sYVtvKzNdKSxyPW5ldyBjKGFbbys0XSxhW28rNV0pLHQuaXNSZWxhdGl2ZSYmKGkudHJhbnNsYXRlV2l0aChzKSxuLnRyYW5zbGF0ZVdpdGgocyksci50cmFuc2xhdGVXaXRoKHMpKSxlLmN1cnZlVG8obixpLHIpLHMueD1yLngscy55PXIueX0sdjpmdW5jdGlvbihlLHQpe3ZhciBpPXQuaXNSZWxhdGl2ZT8wOnQucG9zaXRpb24ueDtuKHQucGFyYW1ldGVycywhMCxpKSx0aGlzLmwoZSx0KX0saDpmdW5jdGlvbihlLHQpe3ZhciBpPXQuaXNSZWxhdGl2ZT8wOnQucG9zaXRpb24ueTtuKHQucGFyYW1ldGVycywhMSxpKSx0aGlzLmwoZSx0KX0sYTpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGEscyxsPXQucGFyYW1ldGVycyxkPXQucG9zaXRpb247Zm9yKG49MDtsLmxlbmd0aD5uO24rPTcpaT1sW25dLHI9bFtuKzFdLG89bFtuKzNdLGE9bFtuKzRdLHM9bmV3IGMobFtuKzVdLGxbbis2XSksdC5pc1JlbGF0aXZlJiZzLnRyYW5zbGF0ZVdpdGgoZCksZS5hcmNUbyhzLGkscixvLGEpLGQueD1zLngsZC55PXMueX0sczpmdW5jdGlvbihlLHQpe3ZhciBuLHIsbyxhLHMsbD10LnBhcmFtZXRlcnMsZD10LnBvc2l0aW9uLHU9dC5wcmV2aW91c0NvbW1hbmQ7Zm9yKChcInNcIj09dXx8XCJjXCI9PXUpJiYoYT1wKHAoZS5wYXRocykuc2VnbWVudHMpLmNvbnRyb2xJbigpKSxzPTA7bC5sZW5ndGg+cztzKz00KW89bmV3IGMobFtzXSxsW3MrMV0pLHI9bmV3IGMobFtzKzJdLGxbcyszXSksdC5pc1JlbGF0aXZlJiYoby50cmFuc2xhdGVXaXRoKGQpLHIudHJhbnNsYXRlV2l0aChkKSksbj1hP2koYSxkKTpkLmNsb25lKCksYT1vLGUuY3VydmVUbyhuLG8sciksZC54PXIueCxkLnk9ci55fSxxOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxvLGEscz10LnBhcmFtZXRlcnMsbD10LnBvc2l0aW9uO2ZvcihhPTA7cy5sZW5ndGg+YTthKz00KW89bmV3IGMoc1thXSxzW2ErMV0pLGk9bmV3IGMoc1thKzJdLHNbYSszXSksdC5pc1JlbGF0aXZlJiYoby50cmFuc2xhdGVXaXRoKGwpLGkudHJhbnNsYXRlV2l0aChsKSksbj1yKGwsbyxpKSxlLmN1cnZlVG8obi5jb250cm9sT3V0LG4uY29udHJvbEluLGkpLGwueD1pLngsbC55PWkueX0sdDpmdW5jdGlvbihlLHQpe3ZhciBuLG8sYSxzLGwsZD10LnBhcmFtZXRlcnMsdT10LnBvc2l0aW9uLGg9dC5wcmV2aW91c0NvbW1hbmQ7Zm9yKChcInFcIj09aHx8XCJ0XCI9PWgpJiYocz1wKHAoZS5wYXRocykuc2VnbWVudHMpLG89cy5jb250cm9sSW4oKS5jbG9uZSgpLnRyYW5zbGF0ZVdpdGgodS5zY2FsZUNvcHkoLTEvMykpLnNjYWxlKDEuNSkpLGw9MDtkLmxlbmd0aD5sO2wrPTIpYT1uZXcgYyhkW2xdLGRbbCsxXSksdC5pc1JlbGF0aXZlJiZhLnRyYW5zbGF0ZVdpdGgodSksbz1vP2kobyx1KTp1LmNsb25lKCksbj1yKHUsbyxhKSxlLmN1cnZlVG8obi5jb250cm9sT3V0LG4uY29udHJvbEluLGEpLHUueD1hLngsdS55PWEueX19O18uY3VycmVudD1uZXcgXyxhLlBhdGgucGFyc2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gXy5jdXJyZW50LnBhcnNlKGUsdCl9LGQoYSx7UGF0aFBhcnNlcjpffSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dmFyIHQsbixpLHI7dHJ5e3Q9ZS5nZXRTY3JlZW5DVE0/ZS5nZXRTY3JlZW5DVE0oKTpudWxsfWNhdGNoKG8pe310JiYobj0tdC5lJTEsaT0tdC5mJTEscj1lLnN0eWxlLCgwIT09bnx8MCE9PWkpJiYoci5sZWZ0PW4rXCJweFwiLHIudG9wPWkrXCJweFwiKSl9ZnVuY3Rpb24gbigpe3ZhciBlPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYmFzZVwiKVswXSx0PVwiXCIsbj1kb2N1bWVudC5sb2NhdGlvbi5ocmVmLGk9bi5pbmRleE9mKFwiI1wiKTtyZXR1cm4gZSYmIWQuc3VwcG9ydC5icm93c2VyLm1zaWUmJigtMSE9PWkmJihuPW4uc3Vic3RyaW5nKDAsaSkpLHQ9biksdH1mdW5jdGlvbiBpKGUpe3JldHVyblwidXJsKFwiK24oKStcIiNcIitlK1wiKVwifWZ1bmN0aW9uIHIoZSl7dmFyIHQsbixpLHI9bmV3IEYoe2VuY29kZVRleHQ6ITB9KSxvPWUuY2xpcHBlZEJCb3goKTtyZXR1cm4gbyYmKHQ9by5nZXRPcmlnaW4oKSxuPW5ldyBwLkdyb3VwLG4udHJhbnNmb3JtKGgudHJhbnNmb3JtKCkudHJhbnNsYXRlKC10LngsLXQueSkpLG4uY2hpbGRyZW4ucHVzaChlKSxlPW4pLHIubG9hZChbZV0pLGk9XCI8P3htbCB2ZXJzaW9uPScxLjAnID8+PHN2ZyBzdHlsZT0nd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgb3ZlcmZsb3c6IGhpZGRlbjsnIHhtbG5zPSdcIitFK1wiJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycgdmVyc2lvbj0nMS4xJz5cIityLnJlbmRlcigpK1wiPC9zdmc+XCIsci5kZXN0cm95KCksaX1mdW5jdGlvbiBvKHQsbil7dmFyIGk9cih0KTtyZXR1cm4gbiYmbi5yYXd8fChpPVwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxcIitnLmVuY29kZUJhc2U2NChpKSksZS5EZWZlcnJlZCgpLnJlc29sdmUoaSkucHJvbWlzZSgpfWZ1bmN0aW9uIGEoZSx0KXtyZXR1cm5cImNsaXBcIj09ZXx8XCJmaWxsXCI9PWUmJighdHx8dC5ub2RlVHlwZT09Qyl9ZnVuY3Rpb24gcyhlKXtpZighZXx8IWUuaW5kZXhPZnx8ZS5pbmRleE9mKFwiJlwiKTwwKXJldHVybiBlO3ZhciB0PXMuX2VsZW1lbnQ7cmV0dXJuIHQuaW5uZXJIVE1MPWUsdC50ZXh0Q29udGVudHx8dC5pbm5lclRleHR9dmFyIGwsYz1kb2N1bWVudCxkPXdpbmRvdy5rZW5kbyx1PWQuZGVlcEV4dGVuZCxoPWQuZ2VvbWV0cnkscD1kLmRyYXdpbmcsZj1wLkJhc2VOb2RlLGc9ZC51dGlsLG09Zy5kZWZpbmVkLHY9Zy5pc1RyYW5zcGFyZW50LF89Zy5yZW5kZXJBdHRyLHk9Zy5yZW5kZXJBbGxBdHRyLHc9Zy5yZW5kZXJUZW1wbGF0ZSxiPWUuaW5BcnJheSxrPVwiYnV0dFwiLHg9cC5EQVNIX0FSUkFZUyxDPVwiZ3JhZGllbnRcIixTPVwibm9uZVwiLFQ9XCIua2VuZG9cIixEPVwic29saWRcIixBPVwiIFwiLEU9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLE09XCJ0cmFuc2Zvcm1cIixQPVwidW5kZWZpbmVkXCIsST1wLlN1cmZhY2UuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsbil7cC5TdXJmYWNlLmZuLmluaXQuY2FsbCh0aGlzLGUsbiksdGhpcy5fcm9vdD1uZXcgRih0aGlzLm9wdGlvbnMpLEsodGhpcy5lbGVtZW50WzBdLHRoaXMuX3RlbXBsYXRlKHRoaXMpKSx0aGlzLl9yb290RWxlbWVudD10aGlzLmVsZW1lbnRbMF0uZmlyc3RFbGVtZW50Q2hpbGQsdCh0aGlzLl9yb290RWxlbWVudCksdGhpcy5fcm9vdC5hdHRhY2hUbyh0aGlzLl9yb290RWxlbWVudCksdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIitULHRoaXMuX2NsaWNrKSx0aGlzLmVsZW1lbnQub24oXCJtb3VzZW92ZXJcIitULHRoaXMuX21vdXNlZW50ZXIpLHRoaXMuZWxlbWVudC5vbihcIm1vdXNlb3V0XCIrVCx0aGlzLl9tb3VzZWxlYXZlKSx0aGlzLnJlc2l6ZSgpfSx0eXBlOlwic3ZnXCIsZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX3Jvb3QmJih0aGlzLl9yb290LmRlc3Ryb3koKSx0aGlzLl9yb290PW51bGwsdGhpcy5fcm9vdEVsZW1lbnQ9bnVsbCx0aGlzLmVsZW1lbnQub2ZmKFQpKSxwLlN1cmZhY2UuZm4uZGVzdHJveS5jYWxsKHRoaXMpfSx0cmFuc2xhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZC5mb3JtYXQoXCJ7MH0gezF9IHsyfSB7M31cIixNYXRoLnJvdW5kKGUueCksTWF0aC5yb3VuZChlLnkpLHRoaXMuX3NpemUud2lkdGgsdGhpcy5fc2l6ZS5oZWlnaHQpO3RoaXMuX29mZnNldD1lLHRoaXMuX3Jvb3RFbGVtZW50LnNldEF0dHJpYnV0ZShcInZpZXdCb3hcIix0KX0sZHJhdzpmdW5jdGlvbihlKXt0aGlzLl9yb290LmxvYWQoW2VdKX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLl9yb290LmNsZWFyKCl9LHN2ZzpmdW5jdGlvbigpe3JldHVyblwiPD94bWwgdmVyc2lvbj0nMS4wJyA/PlwiK3RoaXMuX3RlbXBsYXRlKHRoaXMpfSxfcmVzaXplOmZ1bmN0aW9uKCl7dGhpcy5fb2Zmc2V0JiZ0aGlzLnRyYW5zbGF0ZSh0aGlzLl9vZmZzZXQpfSxfdGVtcGxhdGU6dyhcIjxzdmcgc3R5bGU9J3dpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IG92ZXJmbG93OiBoaWRkZW47JyB4bWxucz0nXCIrRStcIicgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnIHZlcnNpb249JzEuMSc+Iz0gZC5fcm9vdC5yZW5kZXIoKSAjPC9zdmc+XCIpfSksej1mLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXtmLmZuLmluaXQuY2FsbCh0aGlzLGUpLHRoaXMuZGVmaW5pdGlvbnM9e319LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQmJih0aGlzLmVsZW1lbnQuX2tlbmRvTm9kZT1udWxsLHRoaXMuZWxlbWVudD1udWxsKSx0aGlzLmNsZWFyRGVmaW5pdGlvbnMoKSxmLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKX0sbG9hZDpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGE9dGhpcyxzPWEuZWxlbWVudDtmb3Iobz0wO2UubGVuZ3RoPm87bysrKWk9ZVtvXSxyPWkuY2hpbGRyZW4sbj1uZXcgWVtpLm5vZGVUeXBlXShpKSxtKHQpP2EuaW5zZXJ0QXQobix0KTphLmFwcGVuZChuKSxuLmNyZWF0ZURlZmluaXRpb25zKCksciYmci5sZW5ndGg+MCYmbi5sb2FkKHIpLHMmJm4uYXR0YWNoVG8ocyx0KX0scm9vdDpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzO2UucGFyZW50OyllPWUucGFyZW50O3JldHVybiBlfSxhdHRhY2hUbzpmdW5jdGlvbihlLHQpe3ZhciBuLGk9Yy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO0soaSxcIjxzdmcgeG1sbnM9J1wiK0UrXCInIHZlcnNpb249JzEuMSc+XCIrdGhpcy5yZW5kZXIoKStcIjwvc3ZnPlwiKSxuPWkuZmlyc3RDaGlsZC5maXJzdENoaWxkLG4mJihtKHQpP2UuaW5zZXJ0QmVmb3JlKG4sZS5jaGlsZE5vZGVzW3RdKTplLmFwcGVuZENoaWxkKG4pLHRoaXMuc2V0RWxlbWVudChuKSl9LHNldEVsZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMuY2hpbGROb2Rlcztmb3IodGhpcy5lbGVtZW50JiYodGhpcy5lbGVtZW50Ll9rZW5kb05vZGU9bnVsbCksdGhpcy5lbGVtZW50PWUsdGhpcy5lbGVtZW50Ll9rZW5kb05vZGU9dGhpcyxuPTA7aS5sZW5ndGg+bjtuKyspdD1lLmNoaWxkTm9kZXNbbl0saVtuXS5zZXRFbGVtZW50KHQpfSxjbGVhcjpmdW5jdGlvbigpe3ZhciBlLHQ7Zm9yKHRoaXMuY2xlYXJEZWZpbml0aW9ucygpLHRoaXMuZWxlbWVudCYmKHRoaXMuZWxlbWVudC5pbm5lckhUTUw9XCJcIiksZT10aGlzLmNoaWxkTm9kZXMsdD0wO2UubGVuZ3RoPnQ7dCsrKWVbdF0uZGVzdHJveSgpO3RoaXMuY2hpbGROb2Rlcz1bXX0scmVtb3ZlU2VsZjpmdW5jdGlvbigpe3RoaXMuZWxlbWVudCYmKHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCksdGhpcy5lbGVtZW50PW51bGwpLGYuZm4ucmVtb3ZlU2VsZi5jYWxsKHRoaXMpfSx0ZW1wbGF0ZTp3KFwiIz0gZC5yZW5kZXJDaGlsZHJlbigpICNcIikscmVuZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGVtcGxhdGUodGhpcyl9LHJlbmRlckNoaWxkcmVuOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLmNoaWxkTm9kZXMsbj1cIlwiO2ZvcihlPTA7dC5sZW5ndGg+ZTtlKyspbis9dFtlXS5yZW5kZXIoKTtyZXR1cm4gbn0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXt2YXIgdD1lLmZpZWxkLG49ZS52YWx1ZTtcInZpc2libGVcIj09PXQ/dGhpcy5jc3MoXCJkaXNwbGF5XCIsbj9cIlwiOlMpOmxbdF0mJmEodCxuKT90aGlzLnVwZGF0ZURlZmluaXRpb24odCxuKTpcIm9wYWNpdHlcIj09PXQmJnRoaXMuYXR0cihcIm9wYWNpdHlcIixuKSxmLmZuLm9wdGlvbnNDaGFuZ2UuY2FsbCh0aGlzLGUpfSxhdHRyOmZ1bmN0aW9uKGUsdCl7dGhpcy5lbGVtZW50JiZ0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKGUsdCl9LGFsbEF0dHI6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7ZS5sZW5ndGg+dDt0KyspdGhpcy5hdHRyKGVbdF1bMF0sZVt0XVsxXSl9LGNzczpmdW5jdGlvbihlLHQpe3RoaXMuZWxlbWVudCYmKHRoaXMuZWxlbWVudC5zdHlsZVtlXT10KX0sYWxsQ3NzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO2UubGVuZ3RoPnQ7dCsrKXRoaXMuY3NzKGVbdF1bMF0sZVt0XVsxXSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSl7dGhpcy5lbGVtZW50JiZ0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGUpfSxtYXBUcmFuc2Zvcm06ZnVuY3Rpb24oZSl7dmFyIHQ9W107cmV0dXJuIGUmJnQucHVzaChbTSxcIm1hdHJpeChcIitlLm1hdHJpeCgpLnRvU3RyaW5nKDYpK1wiKVwiXSksdH0scmVuZGVyVHJhbnNmb3JtOmZ1bmN0aW9uKCl7cmV0dXJuIHkodGhpcy5tYXBUcmFuc2Zvcm0odGhpcy5zcmNFbGVtZW50LnRyYW5zZm9ybSgpKSl9LHRyYW5zZm9ybUNoYW5nZTpmdW5jdGlvbihlKXtlP3RoaXMuYWxsQXR0cih0aGlzLm1hcFRyYW5zZm9ybShlKSk6dGhpcy5yZW1vdmVBdHRyKE0pfSxtYXBTdHlsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3JjRWxlbWVudC5vcHRpb25zLHQ9W1tcImN1cnNvclwiLGUuY3Vyc29yXV07cmV0dXJuIGUudmlzaWJsZT09PSExJiZ0LnB1c2goW1wiZGlzcGxheVwiLFNdKSx0fSxyZW5kZXJTdHlsZTpmdW5jdGlvbigpe3JldHVybiBfKFwic3R5bGVcIixnLnJlbmRlclN0eWxlKHRoaXMubWFwU3R5bGUoKSkpfSxyZW5kZXJPcGFjaXR5OmZ1bmN0aW9uKCl7cmV0dXJuIF8oXCJvcGFjaXR5XCIsdGhpcy5zcmNFbGVtZW50Lm9wdGlvbnMub3BhY2l0eSl9LGNyZWF0ZURlZmluaXRpb25zOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscj10aGlzLnNyY0VsZW1lbnQsbz10aGlzLmRlZmluaXRpb25zO2lmKHIpe249ci5vcHRpb25zO2Zvcih0IGluIGwpZT1uLmdldCh0KSxlJiZhKHQsZSkmJihvW3RdPWUsaT0hMCk7aSYmdGhpcy5kZWZpbml0aW9uQ2hhbmdlKHthY3Rpb246XCJhZGRcIixkZWZpbml0aW9uczpvfSl9fSxkZWZpbml0aW9uQ2hhbmdlOmZ1bmN0aW9uKGUpe3RoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5kZWZpbml0aW9uQ2hhbmdlKGUpfSx1cGRhdGVEZWZpbml0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5kZWZpbml0aW9ucyxyPW5bZV0sbz1sW2VdLGE9e307ciYmKGFbZV09cix0aGlzLmRlZmluaXRpb25DaGFuZ2Uoe2FjdGlvbjpcInJlbW92ZVwiLGRlZmluaXRpb25zOmF9KSxkZWxldGUgbltlXSksdD8oYVtlXT10LHRoaXMuZGVmaW5pdGlvbkNoYW5nZSh7YWN0aW9uOlwiYWRkXCIsZGVmaW5pdGlvbnM6YX0pLG5bZV09dCx0aGlzLmF0dHIobyxpKHQuaWQpKSk6ciYmdGhpcy5yZW1vdmVBdHRyKG8pfSxjbGVhckRlZmluaXRpb25zOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLmRlZmluaXRpb25zO2ZvcihlIGluIHQpe3RoaXMuZGVmaW5pdGlvbkNoYW5nZSh7YWN0aW9uOlwicmVtb3ZlXCIsZGVmaW5pdGlvbnM6dH0pLHRoaXMuZGVmaW5pdGlvbnM9e307YnJlYWt9fSxyZW5kZXJEZWZpbml0aW9uczpmdW5jdGlvbigpe3JldHVybiB5KHRoaXMubWFwRGVmaW5pdGlvbnMoKSl9LG1hcERlZmluaXRpb25zOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLmRlZmluaXRpb25zLG49W107Zm9yKGUgaW4gdCluLnB1c2goW2xbZV0saSh0W2VdLmlkKV0pO3JldHVybiBufX0pLEY9ei5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7ei5mbi5pbml0LmNhbGwodGhpcyksdGhpcy5vcHRpb25zPWUsdGhpcy5kZWZzPW5ldyBSfSxhdHRhY2hUbzpmdW5jdGlvbihlKXt0aGlzLmVsZW1lbnQ9ZSx0aGlzLmRlZnMuYXR0YWNoVG8oZS5maXJzdEVsZW1lbnRDaGlsZCl9LGNsZWFyOmZ1bmN0aW9uKCl7Zi5mbi5jbGVhci5jYWxsKHRoaXMpfSx0ZW1wbGF0ZTp3KFwiIz1kLmRlZnMucmVuZGVyKCkjIz0gZC5yZW5kZXJDaGlsZHJlbigpICNcIiksZGVmaW5pdGlvbkNoYW5nZTpmdW5jdGlvbihlKXt0aGlzLmRlZnMuZGVmaW5pdGlvbkNoYW5nZShlKX19KSxSPXouZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7ei5mbi5pbml0LmNhbGwodGhpcyksdGhpcy5kZWZpbml0aW9uTWFwPXt9fSxhdHRhY2hUbzpmdW5jdGlvbihlKXt0aGlzLmVsZW1lbnQ9ZX0sdGVtcGxhdGU6dyhcIjxkZWZzPiM9IGQucmVuZGVyQ2hpbGRyZW4oKSM8L2RlZnM+XCIpLGRlZmluaXRpb25DaGFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kZWZpbml0aW9ucyxuPWUuYWN0aW9uO1wiYWRkXCI9PW4/dGhpcy5hZGREZWZpbml0aW9ucyh0KTpcInJlbW92ZVwiPT1uJiZ0aGlzLnJlbW92ZURlZmluaXRpb25zKHQpfSxjcmVhdGVEZWZpbml0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG47cmV0dXJuXCJjbGlwXCI9PWU/bj1COlwiZmlsbFwiPT1lJiYodCBpbnN0YW5jZW9mIHAuTGluZWFyR3JhZGllbnQ/bj1xOnQgaW5zdGFuY2VvZiBwLlJhZGlhbEdyYWRpZW50JiYobj0kKSksbmV3IG4odCl9LGFkZERlZmluaXRpb25zOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKXRoaXMuYWRkRGVmaW5pdGlvbih0LGVbdF0pfSxhZGREZWZpbml0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzLmRlZmluaXRpb25NYXAscj10LmlkLG89dGhpcy5lbGVtZW50LGE9aVtyXTthP2EuY291bnQrKzoobj10aGlzLmNyZWF0ZURlZmluaXRpb24oZSx0KSxpW3JdPXtlbGVtZW50Om4sY291bnQ6MX0sdGhpcy5hcHBlbmQobiksbyYmbi5hdHRhY2hUbyh0aGlzLmVsZW1lbnQpKX0scmVtb3ZlRGVmaW5pdGlvbnM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpdGhpcy5yZW1vdmVEZWZpbml0aW9uKGVbdF0pfSxyZW1vdmVEZWZpbml0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZGVmaW5pdGlvbk1hcCxuPWUuaWQsaT10W25dO2kmJihpLmNvdW50LS0sMD09PWkuY291bnQmJih0aGlzLnJlbW92ZShiKGkuZWxlbWVudCx0aGlzLmNoaWxkTm9kZXMpLDEpLGRlbGV0ZSB0W25dKSl9fSksQj16LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt6LmZuLmluaXQuY2FsbCh0aGlzKSx0aGlzLnNyY0VsZW1lbnQ9ZSx0aGlzLmlkPWUuaWQsdGhpcy5sb2FkKFtlXSl9LHRlbXBsYXRlOncoXCI8Y2xpcFBhdGggaWQ9JyM9ZC5pZCMnPiM9IGQucmVuZGVyQ2hpbGRyZW4oKSM8L2NsaXBQYXRoPlwiKX0pLEw9ei5leHRlbmQoe3RlbXBsYXRlOncoXCI8ZyM9IGQucmVuZGVyVHJhbnNmb3JtKCkgKyBkLnJlbmRlclN0eWxlKCkgKyBkLnJlbmRlck9wYWNpdHkoKSArIGQucmVuZGVyRGVmaW5pdGlvbnMoKSM+Iz0gZC5yZW5kZXJDaGlsZHJlbigpICM8L2c+XCIpLG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7ZS5maWVsZD09TSYmdGhpcy50cmFuc2Zvcm1DaGFuZ2UoZS52YWx1ZSksei5mbi5vcHRpb25zQ2hhbmdlLmNhbGwodGhpcyxlKX19KSxPPXouZXh0ZW5kKHtnZW9tZXRyeUNoYW5nZTpmdW5jdGlvbigpe3RoaXMuYXR0cihcImRcIix0aGlzLnJlbmRlckRhdGEoKSksdGhpcy5pbnZhbGlkYXRlKCl9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7c3dpdGNoKGUuZmllbGQpe2Nhc2VcImZpbGxcIjplLnZhbHVlP3RoaXMuYWxsQXR0cih0aGlzLm1hcEZpbGwoZS52YWx1ZSkpOnRoaXMucmVtb3ZlQXR0cihcImZpbGxcIik7YnJlYWs7Y2FzZVwiZmlsbC5jb2xvclwiOnRoaXMuYWxsQXR0cih0aGlzLm1hcEZpbGwoe2NvbG9yOmUudmFsdWV9KSk7YnJlYWs7Y2FzZVwic3Ryb2tlXCI6ZS52YWx1ZT90aGlzLmFsbEF0dHIodGhpcy5tYXBTdHJva2UoZS52YWx1ZSkpOnRoaXMucmVtb3ZlQXR0cihcInN0cm9rZVwiKTticmVhaztjYXNlIE06dGhpcy50cmFuc2Zvcm1DaGFuZ2UoZS52YWx1ZSk7YnJlYWs7ZGVmYXVsdDp2YXIgdD10aGlzLmF0dHJpYnV0ZU1hcFtlLmZpZWxkXTt0JiZ0aGlzLmF0dHIodCxlLnZhbHVlKX16LmZuLm9wdGlvbnNDaGFuZ2UuY2FsbCh0aGlzLGUpfSxhdHRyaWJ1dGVNYXA6e1wiZmlsbC5vcGFjaXR5XCI6XCJmaWxsLW9wYWNpdHlcIixcInN0cm9rZS5jb2xvclwiOlwic3Ryb2tlXCIsXCJzdHJva2Uud2lkdGhcIjpcInN0cm9rZS13aWR0aFwiLFwic3Ryb2tlLm9wYWNpdHlcIjpcInN0cm9rZS1vcGFjaXR5XCJ9LGNvbnRlbnQ6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQmJih0aGlzLmVsZW1lbnQudGV4dENvbnRlbnQ9dGhpcy5zcmNFbGVtZW50LmNvbnRlbnQoKSl9LHJlbmRlckRhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmludFBhdGgodGhpcy5zcmNFbGVtZW50KX0scHJpbnRQYXRoOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYT1lLnNlZ21lbnRzLHM9YS5sZW5ndGg7aWYocz4wKXtmb3IodD1bXSxvPTE7cz5vO28rKylpPXRoaXMuc2VnbWVudFR5cGUoYVtvLTFdLGFbb10pLGkhPT1yJiYocj1pLHQucHVzaChpKSksdC5wdXNoKFwiTFwiPT09aT90aGlzLnByaW50UG9pbnRzKGFbb10uYW5jaG9yKCkpOnRoaXMucHJpbnRQb2ludHMoYVtvLTFdLmNvbnRyb2xPdXQoKSxhW29dLmNvbnRyb2xJbigpLGFbb10uYW5jaG9yKCkpKTtyZXR1cm4gbj1cIk1cIit0aGlzLnByaW50UG9pbnRzKGFbMF0uYW5jaG9yKCkpK0ErdC5qb2luKEEpLGUub3B0aW9ucy5jbG9zZWQmJihuKz1cIlpcIiksbn19LHByaW50UG9pbnRzOmZ1bmN0aW9uKCl7dmFyIGUsdD1hcmd1bWVudHMsbj10Lmxlbmd0aCxpPVtdO2ZvcihlPTA7bj5lO2UrKylpLnB1c2godFtlXS50b1N0cmluZygzKSk7cmV0dXJuIGkuam9pbihBKX0sc2VnbWVudFR5cGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5jb250cm9sT3V0KCkmJnQuY29udHJvbEluKCk/XCJDXCI6XCJMXCJ9LG1hcFN0cm9rZTpmdW5jdGlvbihlKXt2YXIgdD1bXTtyZXR1cm4gZSYmIXYoZS5jb2xvcik/KHQucHVzaChbXCJzdHJva2VcIixlLmNvbG9yXSksdC5wdXNoKFtcInN0cm9rZS13aWR0aFwiLGUud2lkdGhdKSx0LnB1c2goW1wic3Ryb2tlLWxpbmVjYXBcIix0aGlzLnJlbmRlckxpbmVjYXAoZSldKSx0LnB1c2goW1wic3Ryb2tlLWxpbmVqb2luXCIsZS5saW5lSm9pbl0pLG0oZS5vcGFjaXR5KSYmdC5wdXNoKFtcInN0cm9rZS1vcGFjaXR5XCIsZS5vcGFjaXR5XSksbShlLmRhc2hUeXBlKSYmdC5wdXNoKFtcInN0cm9rZS1kYXNoYXJyYXlcIix0aGlzLnJlbmRlckRhc2hUeXBlKGUpXSkpOnQucHVzaChbXCJzdHJva2VcIixTXSksdH0scmVuZGVyU3Ryb2tlOmZ1bmN0aW9uKCl7cmV0dXJuIHkodGhpcy5tYXBTdHJva2UodGhpcy5zcmNFbGVtZW50Lm9wdGlvbnMuc3Ryb2tlKSl9LHJlbmRlckRhc2hUeXBlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPWUud2lkdGh8fDEsbz1lLmRhc2hUeXBlO2lmKG8mJm8hPUQpe2Zvcih0PXhbby50b0xvd2VyQ2FzZSgpXSxuPVtdLGk9MDt0Lmxlbmd0aD5pO2krKyluLnB1c2godFtpXSpyKTtyZXR1cm4gbi5qb2luKFwiIFwiKX19LHJlbmRlckxpbmVjYXA6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXNoVHlwZSxuPWUubGluZUNhcDtyZXR1cm4gdCYmdCE9RD9rOm59LG1hcEZpbGw6ZnVuY3Rpb24oZSl7dmFyIHQ9W107cmV0dXJuIGUmJmUubm9kZVR5cGU9PUN8fChlJiYhdihlLmNvbG9yKT8odC5wdXNoKFtcImZpbGxcIixlLmNvbG9yXSksbShlLm9wYWNpdHkpJiZ0LnB1c2goW1wiZmlsbC1vcGFjaXR5XCIsZS5vcGFjaXR5XSkpOnQucHVzaChbXCJmaWxsXCIsU10pKSx0fSxyZW5kZXJGaWxsOmZ1bmN0aW9uKCl7cmV0dXJuIHkodGhpcy5tYXBGaWxsKHRoaXMuc3JjRWxlbWVudC5vcHRpb25zLmZpbGwpKX0sdGVtcGxhdGU6dyhcIjxwYXRoICM9IGQucmVuZGVyU3R5bGUoKSAjICM9IGQucmVuZGVyT3BhY2l0eSgpICMgIz0ga2VuZG8udXRpbC5yZW5kZXJBdHRyKCdkJywgZC5yZW5kZXJEYXRhKCkpICMgIz0gZC5yZW5kZXJTdHJva2UoKSAjICM9IGQucmVuZGVyRmlsbCgpICMgIz0gZC5yZW5kZXJEZWZpbml0aW9ucygpICMgIz0gZC5yZW5kZXJUcmFuc2Zvcm0oKSAjPjwvcGF0aD5cIil9KSxIPU8uZXh0ZW5kKHtyZW5kZXJEYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJpbnRQYXRoKHRoaXMuc3JjRWxlbWVudC50b1BhdGgoKSl9fSksTj1PLmV4dGVuZCh7cmVuZGVyRGF0YTpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLnNyY0VsZW1lbnQucGF0aHM7aWYobi5sZW5ndGg+MCl7Zm9yKGU9W10sdD0wO24ubGVuZ3RoPnQ7dCsrKWUucHVzaCh0aGlzLnByaW50UGF0aChuW3RdKSk7cmV0dXJuIGUuam9pbihcIiBcIil9fX0pLFY9Ty5leHRlbmQoe2dlb21ldHJ5Q2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jZW50ZXIoKTt0aGlzLmF0dHIoXCJjeFwiLGUueCksdGhpcy5hdHRyKFwiY3lcIixlLnkpLHRoaXMuYXR0cihcInJcIix0aGlzLnJhZGl1cygpKSx0aGlzLmludmFsaWRhdGUoKX0sY2VudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3JjRWxlbWVudC5nZW9tZXRyeSgpLmNlbnRlcn0scmFkaXVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3JjRWxlbWVudC5nZW9tZXRyeSgpLnJhZGl1c30sdGVtcGxhdGU6dyhcIjxjaXJjbGUgIz0gZC5yZW5kZXJTdHlsZSgpICMgIz0gZC5yZW5kZXJPcGFjaXR5KCkgIyBjeD0nIz0gZC5jZW50ZXIoKS54ICMnIGN5PScjPSBkLmNlbnRlcigpLnkgIycgcj0nIz0gZC5yYWRpdXMoKSAjJyAjPSBkLnJlbmRlclN0cm9rZSgpICMgIz0gZC5yZW5kZXJGaWxsKCkgIyAjPSBkLnJlbmRlckRlZmluaXRpb25zKCkgIyAjPSBkLnJlbmRlclRyYW5zZm9ybSgpICMgPjwvY2lyY2xlPlwiKX0pLFU9Ty5leHRlbmQoe2dlb21ldHJ5Q2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wb3MoKTt0aGlzLmF0dHIoXCJ4XCIsZS54KSx0aGlzLmF0dHIoXCJ5XCIsZS55KSx0aGlzLmludmFsaWRhdGUoKX0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXtcImZvbnRcIj09PWUuZmllbGQ/KHRoaXMuYXR0cihcInN0eWxlXCIsZy5yZW5kZXJTdHlsZSh0aGlzLm1hcFN0eWxlKCkpKSx0aGlzLmdlb21ldHJ5Q2hhbmdlKCkpOlwiY29udGVudFwiPT09ZS5maWVsZCYmTy5mbi5jb250ZW50LmNhbGwodGhpcyx0aGlzLnNyY0VsZW1lbnQuY29udGVudCgpKSxPLmZuLm9wdGlvbnNDaGFuZ2UuY2FsbCh0aGlzLGUpfSxtYXBTdHlsZTpmdW5jdGlvbigpe3ZhciBlPU8uZm4ubWFwU3R5bGUuY2FsbCh0aGlzKSx0PXRoaXMuc3JjRWxlbWVudC5vcHRpb25zLmZvbnQsbj10aGlzLnJvb3QoKS5vcHRpb25zO3JldHVybiBuJiZuLmVuY29kZVRleHQmJih0PWQuaHRtbEVuY29kZSh0KSksZS5wdXNoKFtcImZvbnRcIix0XSksZX0scG9zOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zcmNFbGVtZW50LnBvc2l0aW9uKCksdD10aGlzLnNyY0VsZW1lbnQubWVhc3VyZSgpO3JldHVybiBlLmNsb25lKCkuc2V0WShlLnkrdC5iYXNlbGluZSl9LGNvbnRlbnQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNyY0VsZW1lbnQuY29udGVudCgpLHQ9dGhpcy5yb290KCkub3B0aW9ucztyZXR1cm4gdCYmdC5lbmNvZGVUZXh0JiYoZT1zKGUpLGU9ZC5odG1sRW5jb2RlKGUpKSxlfSx0ZW1wbGF0ZTp3KFwiPHRleHQgIz0gZC5yZW5kZXJTdHlsZSgpICMgIz0gZC5yZW5kZXJPcGFjaXR5KCkgIyB4PScjPSB0aGlzLnBvcygpLnggIycgeT0nIz0gdGhpcy5wb3MoKS55ICMnICM9IGQucmVuZGVyU3Ryb2tlKCkgIyAjPSBkLnJlbmRlclRyYW5zZm9ybSgpICMgIz0gZC5yZW5kZXJEZWZpbml0aW9ucygpICMgIz0gZC5yZW5kZXJGaWxsKCkgIz48dHNwYW4+Iz0gZC5jb250ZW50KCkgIzwvdHNwYW4+PC90ZXh0PlwiKX0pLFc9Ty5leHRlbmQoe2dlb21ldHJ5Q2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5hbGxBdHRyKHRoaXMubWFwUG9zaXRpb24oKSksdGhpcy5pbnZhbGlkYXRlKCl9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7XCJzcmNcIj09PWUuZmllbGQmJnRoaXMuYWxsQXR0cih0aGlzLm1hcFNvdXJjZSgpKSxPLmZuLm9wdGlvbnNDaGFuZ2UuY2FsbCh0aGlzLGUpfSxtYXBQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3JjRWxlbWVudC5yZWN0KCksdD1lLnRvcExlZnQoKTtyZXR1cm5bW1wieFwiLHQueF0sW1wieVwiLHQueV0sW1wid2lkdGhcIixlLndpZHRoKCkrXCJweFwiXSxbXCJoZWlnaHRcIixlLmhlaWdodCgpK1wicHhcIl1dfSxyZW5kZXJQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiB5KHRoaXMubWFwUG9zaXRpb24oKSl9LG1hcFNvdXJjZTpmdW5jdGlvbigpe3JldHVybltbXCJ4bGluazpocmVmXCIsdGhpcy5zcmNFbGVtZW50LnNyYygpXV19LHJlbmRlclNvdXJjZTpmdW5jdGlvbigpe3JldHVybiB5KHRoaXMubWFwU291cmNlKCkpfSx0ZW1wbGF0ZTp3KFwiPGltYWdlIHByZXNlcnZlQXNwZWN0UmF0aW89J25vbmUnICM9IGQucmVuZGVyU3R5bGUoKSAjICM9IGQucmVuZGVyVHJhbnNmb3JtKCkjICM9IGQucmVuZGVyT3BhY2l0eSgpICMgIz0gZC5yZW5kZXJQb3NpdGlvbigpICMgIz0gZC5yZW5kZXJTb3VyY2UoKSAjICM9IGQucmVuZGVyRGVmaW5pdGlvbnMoKSM+PC9pbWFnZT5cIil9KSxqPXouZXh0ZW5kKHt0ZW1wbGF0ZTp3KFwiPHN0b3AgIz1kLnJlbmRlck9mZnNldCgpIyAjPWQucmVuZGVyU3R5bGUoKSMgLz5cIikscmVuZGVyT2Zmc2V0OmZ1bmN0aW9uKCl7cmV0dXJuIF8oXCJvZmZzZXRcIix0aGlzLnNyY0VsZW1lbnQub2Zmc2V0KCkpfSxtYXBTdHlsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3JjRWxlbWVudDtyZXR1cm5bW1wic3RvcC1jb2xvclwiLGUuY29sb3IoKV0sW1wic3RvcC1vcGFjaXR5XCIsZS5vcGFjaXR5KCldXX0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXtcIm9mZnNldFwiPT1lLmZpZWxkP3RoaXMuYXR0cihlLmZpZWxkLGUudmFsdWUpOihcImNvbG9yXCI9PWUuZmllbGR8fFwib3BhY2l0eVwiPT1lLmZpZWxkKSYmdGhpcy5jc3MoXCJzdG9wLVwiK2UuZmllbGQsZS52YWx1ZSl9fSksRz16LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt6LmZuLmluaXQuY2FsbCh0aGlzLGUpLHRoaXMuaWQ9ZS5pZCx0aGlzLmxvYWRTdG9wcygpfSxsb2FkU3RvcHM6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy5zcmNFbGVtZW50LGk9bi5zdG9wcyxyPXRoaXMuZWxlbWVudDtmb3IodD0wO2kubGVuZ3RoPnQ7dCsrKWU9bmV3IGooaVt0XSksdGhpcy5hcHBlbmQoZSksciYmZS5hdHRhY2hUbyhyKX0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXtcImdyYWRpZW50LnN0b3BzXCI9PWUuZmllbGQ/KGYuZm4uY2xlYXIuY2FsbCh0aGlzKSx0aGlzLmxvYWRTdG9wcygpKTplLmZpZWxkPT1DJiZ0aGlzLmFsbEF0dHIodGhpcy5tYXBDb29yZGluYXRlcygpKX0scmVuZGVyQ29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4geSh0aGlzLm1hcENvb3JkaW5hdGVzKCkpfSxtYXBTcGFjZTpmdW5jdGlvbigpe3JldHVybltcImdyYWRpZW50VW5pdHNcIix0aGlzLnNyY0VsZW1lbnQudXNlclNwYWNlKCk/XCJ1c2VyU3BhY2VPblVzZVwiOlwib2JqZWN0Qm91bmRpbmdCb3hcIl19fSkscT1HLmV4dGVuZCh7dGVtcGxhdGU6dyhcIjxsaW5lYXJHcmFkaWVudCBpZD0nIz1kLmlkIycgIz1kLnJlbmRlckNvb3JkaW5hdGVzKCkjPiM9IGQucmVuZGVyQ2hpbGRyZW4oKSM8L2xpbmVhckdyYWRpZW50PlwiKSxtYXBDb29yZGluYXRlczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3JjRWxlbWVudCx0PWUuc3RhcnQoKSxuPWUuZW5kKCksaT1bW1wieDFcIix0LnhdLFtcInkxXCIsdC55XSxbXCJ4MlwiLG4ueF0sW1wieTJcIixuLnldLHRoaXMubWFwU3BhY2UoKV07cmV0dXJuIGl9fSksJD1HLmV4dGVuZCh7dGVtcGxhdGU6dyhcIjxyYWRpYWxHcmFkaWVudCBpZD0nIz1kLmlkIycgIz1kLnJlbmRlckNvb3JkaW5hdGVzKCkjPiM9IGQucmVuZGVyQ2hpbGRyZW4oKSM8L3JhZGlhbEdyYWRpZW50PlwiKSxtYXBDb29yZGluYXRlczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3JjRWxlbWVudCx0PWUuY2VudGVyKCksbj1lLnJhZGl1cygpLGk9W1tcImN4XCIsdC54XSxbXCJjeVwiLHQueV0sW1wiclwiLG5dLHRoaXMubWFwU3BhY2UoKV07XHJcbnJldHVybiBpfX0pLFk9e0dyb3VwOkwsVGV4dDpVLFBhdGg6TyxNdWx0aVBhdGg6TixDaXJjbGU6VixBcmM6SCxJbWFnZTpXfSxLPWZ1bmN0aW9uKGUsdCl7ZS5pbm5lckhUTUw9dH07IWZ1bmN0aW9uKCl7dmFyIGU9XCI8c3ZnIHhtbG5zPSdcIitFK1wiJz48L3N2Zz5cIix0PWMuY3JlYXRlRWxlbWVudChcImRpdlwiKSxuPXR5cGVvZiBET01QYXJzZXIhPVA7dC5pbm5lckhUTUw9ZSxuJiZ0LmZpcnN0Q2hpbGQubmFtZXNwYWNlVVJJIT1FJiYoSz1mdW5jdGlvbihlLHQpe3ZhciBuPW5ldyBET01QYXJzZXIsaT1uLnBhcnNlRnJvbVN0cmluZyh0LFwidGV4dC94bWxcIikscj1jLmFkb3B0Tm9kZShpLmRvY3VtZW50RWxlbWVudCk7ZS5pbm5lckhUTUw9XCJcIixlLmFwcGVuZENoaWxkKHIpfSl9KCkscy5fZWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSxsPXtjbGlwOlwiY2xpcC1wYXRoXCIsZmlsbDpcImZpbGxcIn0sZC5zdXBwb3J0LnN2Zz1mdW5jdGlvbigpe3JldHVybiBjLmltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUoXCJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0Jhc2ljU3RydWN0dXJlXCIsXCIxLjFcIil9KCksZC5zdXBwb3J0LnN2ZyYmcC5TdXJmYWNlRmFjdG9yeS5jdXJyZW50LnJlZ2lzdGVyKFwic3ZnXCIsSSwxMCksdShwLHtleHBvcnRTVkc6byxzdmc6e0FyY05vZGU6SCxDaXJjbGVOb2RlOlYsQ2xpcE5vZGU6QixEZWZpbml0aW9uTm9kZTpSLEdyYWRpZW50U3RvcE5vZGU6aixHcm91cE5vZGU6TCxJbWFnZU5vZGU6VyxMaW5lYXJHcmFkaWVudE5vZGU6cSxNdWx0aVBhdGhOb2RlOk4sTm9kZTp6LFBhdGhOb2RlOk8sUmFkaWFsR3JhZGllbnROb2RlOiQsUm9vdE5vZGU6RixTdXJmYWNlOkksVGV4dE5vZGU6VSxfZXhwb3J0R3JvdXA6cn19KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LG4pe3ZhciBpLHIsbyxhLHMsbCxjPXt3aWR0aDpcIjgwMHB4XCIsaGVpZ2h0OlwiNjAwcHhcIixjb3JzOlwiQW5vbnltb3VzXCJ9LGQ9dC5jbGlwcGVkQkJveCgpO3JldHVybiBkJiYoaT1kLmdldE9yaWdpbigpLHI9bmV3IHcuR3JvdXAsci50cmFuc2Zvcm0oeS50cmFuc2Zvcm0oKS50cmFuc2xhdGUoLWkueCwtaS55KSksci5jaGlsZHJlbi5wdXNoKHQpLHQ9cixvPWQuZ2V0U2l6ZSgpLGMud2lkdGg9by53aWR0aCtcInB4XCIsYy5oZWlnaHQ9by5oZWlnaHQrXCJweFwiKSxuPXAoYyxuKSxhPWUoXCI8ZGl2IC8+XCIpLmNzcyh7ZGlzcGxheTpcIm5vbmVcIix3aWR0aDpuLndpZHRoLGhlaWdodDpuLmhlaWdodH0pLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpLHM9bmV3IFQoYSxuKSxzLmRyYXcodCksbD1zLmltYWdlKCksbC5hbHdheXMoZnVuY3Rpb24oKXtzLmRlc3Ryb3koKSxhLnJlbW92ZSgpfSksbH1mdW5jdGlvbiBuKGUsdCl7dmFyIG4saSxyO2ZvcihyPTA7dC5sZW5ndGg+cjtyKyspaT10W3JdLG49aC5wYXJzZUNvbG9yKGkuY29sb3IoKSksbi5hKj1pLm9wYWNpdHkoKSxlLmFkZENvbG9yU3RvcChpLm9mZnNldCgpLG4udG9Dc3NSZ2JhKCkpfXZhciBpLHIsbyxhLHMsbCxjLGQsdT1kb2N1bWVudCxoPXdpbmRvdy5rZW5kbyxwPWguZGVlcEV4dGVuZCxmPWgudXRpbCxnPWYuZGVmaW5lZCxtPWYuaXNUcmFuc3BhcmVudCx2PWYucmVuZGVyVGVtcGxhdGUsXz1mLnZhbHVlT3JEZWZhdWx0LHk9aC5nZW9tZXRyeSx3PWguZHJhd2luZyxiPXcuQmFzZU5vZGUsaz1cImJ1dHRcIix4PXcuREFTSF9BUlJBWVMsQz0xZTMvNjAsUz1cInNvbGlkXCIsVD13LlN1cmZhY2UuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dy5TdXJmYWNlLmZuLmluaXQuY2FsbCh0aGlzLHQsbiksdGhpcy5lbGVtZW50WzBdLmlubmVySFRNTD10aGlzLl90ZW1wbGF0ZSh0aGlzKTt2YXIgcj10aGlzLmVsZW1lbnRbMF0uZmlyc3RFbGVtZW50Q2hpbGQ7ci53aWR0aD1lKHQpLndpZHRoKCksci5oZWlnaHQ9ZSh0KS5oZWlnaHQoKSx0aGlzLl9yb290RWxlbWVudD1yLHRoaXMuX3Jvb3Q9bmV3IGkocil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt3LlN1cmZhY2UuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuX3Jvb3QmJih0aGlzLl9yb290LmRlc3Ryb3koKSx0aGlzLl9yb290PW51bGwpfSx0eXBlOlwiY2FudmFzXCIsZHJhdzpmdW5jdGlvbihlKXt0aGlzLl9yb290LmxvYWQoW2VdLHZvaWQgMCx0aGlzLm9wdGlvbnMuY29ycyl9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5fcm9vdC5jbGVhcigpfSxpbWFnZTpmdW5jdGlvbigpe3ZhciB0LG49dGhpcy5fcm9vdCxpPXRoaXMuX3Jvb3RFbGVtZW50LHI9W107cmV0dXJuIG4udHJhdmVyc2UoZnVuY3Rpb24oZSl7ZS5sb2FkaW5nJiZyLnB1c2goZS5sb2FkaW5nKX0pLHQ9ZS5EZWZlcnJlZCgpLGUud2hlbi5hcHBseShlLHIpLmRvbmUoZnVuY3Rpb24oKXtuLl9pbnZhbGlkYXRlKCk7dHJ5e3ZhciBlPWkudG9EYXRhVVJMKCk7dC5yZXNvbHZlKGUpfWNhdGNoKHIpe3QucmVqZWN0KHIpfX0pLmZhaWwoZnVuY3Rpb24oZSl7dC5yZWplY3QoZSl9KSx0LnByb21pc2UoKX0sX3Jlc2l6ZTpmdW5jdGlvbigpe3RoaXMuX3Jvb3RFbGVtZW50LndpZHRoPXRoaXMuX3NpemUud2lkdGgsdGhpcy5fcm9vdEVsZW1lbnQuaGVpZ2h0PXRoaXMuX3NpemUuaGVpZ2h0LHRoaXMuX3Jvb3QuaW52YWxpZGF0ZSgpfSxfdGVtcGxhdGU6dihcIjxjYW52YXMgc3R5bGU9J3dpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7Jz48L2NhbnZhcz5cIil9KSxEPWIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe2IuZm4uaW5pdC5jYWxsKHRoaXMsZSksZSYmdGhpcy5pbml0Q2xpcCgpfSxpbml0Q2xpcDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3JjRWxlbWVudC5jbGlwKCk7ZSYmKHRoaXMuY2xpcD1lLGUuYWRkT2JzZXJ2ZXIodGhpcykpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuc3JjRWxlbWVudCYmdGhpcy5zcmNFbGVtZW50LnJlbW92ZU9ic2VydmVyKHRoaXMpLHRoaXMuY2xlYXJDbGlwKCksYi5mbi5jbGVhci5jYWxsKHRoaXMpfSxjbGVhckNsaXA6ZnVuY3Rpb24oKXt0aGlzLmNsaXAmJih0aGlzLmNsaXAucmVtb3ZlT2JzZXJ2ZXIodGhpcyksZGVsZXRlIHRoaXMuY2xpcCl9LHNldENsaXA6ZnVuY3Rpb24oZSl7dGhpcy5jbGlwJiYoZS5iZWdpblBhdGgoKSxyLmZuLnJlbmRlclBvaW50cyhlLHRoaXMuY2xpcCksZS5jbGlwKCkpfSxvcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKGUpe1wiY2xpcFwiPT1lLmZpZWxkJiYodGhpcy5jbGVhckNsaXAoKSx0aGlzLmluaXRDbGlwKCkpLGIuZm4ub3B0aW9uc0NoYW5nZS5jYWxsKHRoaXMsZSl9LHNldFRyYW5zZm9ybTpmdW5jdGlvbihlKXtpZih0aGlzLnNyY0VsZW1lbnQpe3ZhciB0PXRoaXMuc3JjRWxlbWVudC50cmFuc2Zvcm0oKTt0JiZlLnRyYW5zZm9ybS5hcHBseShlLHQubWF0cml4KCkudG9BcnJheSg2KSl9fSxsb2FkOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sYSxzPXRoaXM7Zm9yKGE9MDtlLmxlbmd0aD5hO2ErKylyPWVbYV0sbz1yLmNoaWxkcmVuLGk9bmV3IGRbci5ub2RlVHlwZV0ocixuKSxvJiZvLmxlbmd0aD4wJiZpLmxvYWQobyx0LG4pLGcodCk/cy5pbnNlcnRBdChpLHQpOnMuYXBwZW5kKGkpO3MuaW52YWxpZGF0ZSgpfSxzZXRPcGFjaXR5OmZ1bmN0aW9uKGUpe2lmKHRoaXMuc3JjRWxlbWVudCl7dmFyIHQ9dGhpcy5zcmNFbGVtZW50Lm9wYWNpdHkoKTtnKHQpJiZ0aGlzLmdsb2JhbEFscGhhKGUsdCl9fSxnbG9iYWxBbHBoYTpmdW5jdGlvbihlLHQpe3QmJmUuZ2xvYmFsQWxwaGEmJih0Kj1lLmdsb2JhbEFscGhhKSxlLmdsb2JhbEFscGhhPXR9fSksQT1ELmV4dGVuZCh7cmVuZGVyVG86ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLmNoaWxkTm9kZXM7Zm9yKGUuc2F2ZSgpLHRoaXMuc2V0VHJhbnNmb3JtKGUpLHRoaXMuc2V0Q2xpcChlKSx0aGlzLnNldE9wYWNpdHkoZSksdD0wO24ubGVuZ3RoPnQ7dCsrKW5bdF0ucmVuZGVyVG8oZSk7ZS5yZXN0b3JlKCl9fSk7dy5taXhpbnMuVHJhdmVyc2FibGUuZXh0ZW5kKEEuZm4sXCJjaGlsZE5vZGVzXCIpLGk9QS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCl7QS5mbi5pbml0LmNhbGwodGhpcyksdGhpcy5jYW52YXM9dCx0aGlzLmN0eD10LmdldENvbnRleHQoXCIyZFwiKSx0aGlzLmludmFsaWRhdGU9aC50aHJvdHRsZShlLnByb3h5KHRoaXMuX2ludmFsaWRhdGUsdGhpcyksQyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtBLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLmNhbnZhcz1udWxsLHRoaXMuY3R4PW51bGx9LF9pbnZhbGlkYXRlOmZ1bmN0aW9uKCl7dGhpcy5jdHgmJih0aGlzLmN0eC5jbGVhclJlY3QoMCwwLHRoaXMuY2FudmFzLndpZHRoLHRoaXMuY2FudmFzLmhlaWdodCksdGhpcy5yZW5kZXJUbyh0aGlzLmN0eCkpfX0pLHcubWl4aW5zLlRyYXZlcnNhYmxlLmV4dGVuZChpLmZuLFwiY2hpbGROb2Rlc1wiKSxyPUQuZXh0ZW5kKHtyZW5kZXJUbzpmdW5jdGlvbihlKXtlLnNhdmUoKSx0aGlzLnNldFRyYW5zZm9ybShlKSx0aGlzLnNldENsaXAoZSksdGhpcy5zZXRPcGFjaXR5KGUpLGUuYmVnaW5QYXRoKCksdGhpcy5yZW5kZXJQb2ludHMoZSx0aGlzLnNyY0VsZW1lbnQpLHRoaXMuc2V0TGluZURhc2goZSksdGhpcy5zZXRMaW5lQ2FwKGUpLHRoaXMuc2V0TGluZUpvaW4oZSksdGhpcy5zZXRGaWxsKGUpLHRoaXMuc2V0U3Ryb2tlKGUpLGUucmVzdG9yZSgpfSxzZXRGaWxsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc3JjRWxlbWVudC5vcHRpb25zLmZpbGwsbj0hMTtyZXR1cm4gdCYmKFwiZ3JhZGllbnRcIj09dC5ub2RlVHlwZT8odGhpcy5zZXRHcmFkaWVudEZpbGwoZSx0KSxuPSEwKTptKHQuY29sb3IpfHwoZS5maWxsU3R5bGU9dC5jb2xvcixlLnNhdmUoKSx0aGlzLmdsb2JhbEFscGhhKGUsdC5vcGFjaXR5KSxlLmZpbGwoKSxlLnJlc3RvcmUoKSxuPSEwKSksbn0sc2V0R3JhZGllbnRGaWxsOmZ1bmN0aW9uKGUsdCl7dmFyIGkscixvLGEscz10aGlzLnNyY0VsZW1lbnQucmF3QkJveCgpO3QgaW5zdGFuY2VvZiB3LkxpbmVhckdyYWRpZW50PyhyPXQuc3RhcnQoKSxvPXQuZW5kKCksaT1lLmNyZWF0ZUxpbmVhckdyYWRpZW50KHIueCxyLnksby54LG8ueSkpOnQgaW5zdGFuY2VvZiB3LlJhZGlhbEdyYWRpZW50JiYoYT10LmNlbnRlcigpLGk9ZS5jcmVhdGVSYWRpYWxHcmFkaWVudChhLngsYS55LDAsYS54LGEueSx0LnJhZGl1cygpKSksbihpLHQuc3RvcHMpLGUuc2F2ZSgpLHQudXNlclNwYWNlKCl8fGUudHJhbnNmb3JtKHMud2lkdGgoKSwwLDAscy5oZWlnaHQoKSxzLm9yaWdpbi54LHMub3JpZ2luLnkpLGUuZmlsbFN0eWxlPWksZS5maWxsKCksZS5yZXN0b3JlKCl9LHNldFN0cm9rZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnNyY0VsZW1lbnQub3B0aW9ucy5zdHJva2U7cmV0dXJuIHQmJiFtKHQuY29sb3IpPyhlLnN0cm9rZVN0eWxlPXQuY29sb3IsZS5saW5lV2lkdGg9Xyh0LndpZHRoLDEpLGUuc2F2ZSgpLHRoaXMuZ2xvYmFsQWxwaGEoZSx0Lm9wYWNpdHkpLGUuc3Ryb2tlKCksZS5yZXN0b3JlKCksITApOnZvaWQgMH0sZGFzaFR5cGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNyY0VsZW1lbnQub3B0aW9ucy5zdHJva2U7cmV0dXJuIGUmJmUuZGFzaFR5cGU/ZS5kYXNoVHlwZS50b0xvd2VyQ2FzZSgpOnZvaWQgMH0sc2V0TGluZURhc2g6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLmRhc2hUeXBlKCk7biYmbiE9UyYmKHQ9eFtuXSxlLnNldExpbmVEYXNoP2Uuc2V0TGluZURhc2godCk6KGUubW96RGFzaD10LGUud2Via2l0TGluZURhc2g9dCkpfSxzZXRMaW5lQ2FwOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZGFzaFR5cGUoKSxuPXRoaXMuc3JjRWxlbWVudC5vcHRpb25zLnN0cm9rZTt0JiZ0IT09Uz9lLmxpbmVDYXA9azpuJiZuLmxpbmVDYXAmJihlLmxpbmVDYXA9bi5saW5lQ2FwKX0sc2V0TGluZUpvaW46ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zcmNFbGVtZW50Lm9wdGlvbnMuc3Ryb2tlO3QmJnQubGluZUpvaW4mJihlLmxpbmVKb2luPXQubGluZUpvaW4pfSxyZW5kZXJQb2ludHM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxhLHMsbD10LnNlZ21lbnRzO2lmKDAhPT1sLmxlbmd0aCl7Zm9yKG49bFswXSxpPW4uYW5jaG9yKCksZS5tb3ZlVG8oaS54LGkueSkscj0xO2wubGVuZ3RoPnI7cisrKW49bFtyXSxpPW4uYW5jaG9yKCksbz1sW3ItMV0sYT1vLmNvbnRyb2xPdXQoKSxzPW4uY29udHJvbEluKCksYSYmcz9lLmJlemllckN1cnZlVG8oYS54LGEueSxzLngscy55LGkueCxpLnkpOmUubGluZVRvKGkueCxpLnkpO3Qub3B0aW9ucy5jbG9zZWQmJmUuY2xvc2VQYXRoKCl9fX0pLG89ci5leHRlbmQoe3JlbmRlclBvaW50czpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMuc3JjRWxlbWVudC5wYXRocztmb3IodD0wO24ubGVuZ3RoPnQ7dCsrKXIuZm4ucmVuZGVyUG9pbnRzKGUsblt0XSl9fSksYT1yLmV4dGVuZCh7cmVuZGVyUG9pbnRzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc3JjRWxlbWVudC5nZW9tZXRyeSgpLG49dC5jZW50ZXIsaT10LnJhZGl1cztlLmFyYyhuLngsbi55LGksMCwyKk1hdGguUEkpfX0pLHM9ci5leHRlbmQoe3JlbmRlclBvaW50czpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnNyY0VsZW1lbnQudG9QYXRoKCk7ci5mbi5yZW5kZXJQb2ludHMuY2FsbCh0aGlzLGUsdCl9fSksbD1yLmV4dGVuZCh7cmVuZGVyVG86ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zcmNFbGVtZW50LG49dC5wb3NpdGlvbigpLGk9dC5tZWFzdXJlKCk7ZS5zYXZlKCksdGhpcy5zZXRUcmFuc2Zvcm0oZSksdGhpcy5zZXRDbGlwKGUpLHRoaXMuc2V0T3BhY2l0eShlKSxlLmJlZ2luUGF0aCgpLGUuZm9udD10Lm9wdGlvbnMuZm9udCx0aGlzLnNldEZpbGwoZSkmJmUuZmlsbFRleHQodC5jb250ZW50KCksbi54LG4ueStpLmJhc2VsaW5lKSx0aGlzLnNldFN0cm9rZShlKSYmKHRoaXMuc2V0TGluZURhc2goZSksZS5zdHJva2VUZXh0KHQuY29udGVudCgpLG4ueCxuLnkraS5iYXNlbGluZSkpLGUucmVzdG9yZSgpfX0pLGM9ci5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxvO3IuZm4uaW5pdC5jYWxsKHRoaXMsdCksdGhpcy5vbkxvYWQ9ZS5wcm94eSh0aGlzLm9uTG9hZCx0aGlzKSx0aGlzLm9uRXJyb3I9ZS5wcm94eSh0aGlzLm9uRXJyb3IsdGhpcyksaT10aGlzLmltZz1uZXcgSW1hZ2UsbiYmKGkuY3Jvc3NPcmlnaW49biksaS5vbmxvYWQ9dGhpcy5vbkxvYWQsaS5vbmVycm9yPXRoaXMub25FcnJvcixvPWkuc3JjPXQuc3JjKCksKGkuY29tcGxldGV8fHZvaWQgMD09PWkuY29tcGxldGUpJiYoaS5zcmM9XCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQUFBQUFBUC8vL3l3QUFBQUFBUUFCQUFBQ0FVd0FPdz09XCIsaS5zcmM9byksdGhpcy5sb2FkaW5nPWUuRGVmZXJyZWQoKX0scmVuZGVyVG86ZnVuY3Rpb24oZSl7XCJyZXNvbHZlZFwiPT09dGhpcy5sb2FkaW5nLnN0YXRlKCkmJihlLnNhdmUoKSx0aGlzLnNldFRyYW5zZm9ybShlKSx0aGlzLnNldENsaXAoZSksdGhpcy5kcmF3SW1hZ2UoZSksZS5yZXN0b3JlKCkpfSxvcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKHQpe1wic3JjXCI9PT10LmZpZWxkPyh0aGlzLmxvYWRpbmc9ZS5EZWZlcnJlZCgpLHRoaXMuaW1nLnNyYz10aGlzLnNyY0VsZW1lbnQuc3JjKCkpOnIuZm4ub3B0aW9uc0NoYW5nZS5jYWxsKHRoaXMsdCl9LG9uTG9hZDpmdW5jdGlvbigpe3RoaXMubG9hZGluZy5yZXNvbHZlKCksdGhpcy5pbnZhbGlkYXRlKCl9LG9uRXJyb3I6ZnVuY3Rpb24oKXt0aGlzLmxvYWRpbmcucmVqZWN0KEVycm9yKFwiVW5hYmxlIHRvIGxvYWQgaW1hZ2UgJ1wiK3RoaXMuaW1nLnNyYytcIicuIENoZWNrIGZvciBjb25uZWN0aXZpdHkgYW5kIHZlcmlmeSBDT1JTIGhlYWRlcnMuXCIpKX0sZHJhd0ltYWdlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc3JjRWxlbWVudC5yZWN0KCksbj10LnRvcExlZnQoKTtlLmRyYXdJbWFnZSh0aGlzLmltZyxuLngsbi55LHQud2lkdGgoKSx0LmhlaWdodCgpKX19KSxkPXtHcm91cDpBLFRleHQ6bCxQYXRoOnIsTXVsdGlQYXRoOm8sQ2lyY2xlOmEsQXJjOnMsSW1hZ2U6Y30saC5zdXBwb3J0LmNhbnZhcz1mdW5jdGlvbigpe3JldHVybiEhdS5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLmdldENvbnRleHR9KCksaC5zdXBwb3J0LmNhbnZhcyYmdy5TdXJmYWNlRmFjdG9yeS5jdXJyZW50LnJlZ2lzdGVyKFwiY2FudmFzXCIsVCwyMCkscChoLmRyYXdpbmcse2V4cG9ydEltYWdlOnQsY2FudmFzOntBcmNOb2RlOnMsQ2lyY2xlTm9kZTphLEdyb3VwTm9kZTpBLEltYWdlTm9kZTpjLE11bHRpUGF0aE5vZGU6byxOb2RlOkQsUGF0aE5vZGU6cixSb290Tm9kZTppLFN1cmZhY2U6VCxUZXh0Tm9kZTpsfX0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7aWYodS5uYW1lc3BhY2VzJiYhdS5uYW1lc3BhY2VzLmt2bWwpe3UubmFtZXNwYWNlcy5hZGQoXCJrdm1sXCIsXCJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOnZtbFwiKTt2YXIgZT11LnN0eWxlU2hlZXRzLmxlbmd0aD4zMD91LnN0eWxlU2hlZXRzWzBdOnUuY3JlYXRlU3R5bGVTaGVldCgpO2UuYWRkUnVsZShcIi5rdm1sXCIsXCJiZWhhdmlvcjp1cmwoI2RlZmF1bHQjVk1MKVwiKX19ZnVuY3Rpb24gbihlKXt2YXIgdD11LmNyZWF0ZUVsZW1lbnQoXCJrdm1sOlwiK2UpO3JldHVybiB0LmNsYXNzTmFtZT1cImt2bWxcIix0fWZ1bmN0aW9uIGkoZSl7dmFyIHQsbj1lLmxlbmd0aCxpPVtdO2Zvcih0PTA7bj50O3QrKylpLnB1c2goZVt0XS5zY2FsZUNvcHkoUCkudG9TdHJpbmcoMCxcIixcIikpO3JldHVybiBpLmpvaW4oXCIgXCIpfWZ1bmN0aW9uIHIoZSx0KXt2YXIgbixyLGEscyxsLGM9ZS5zZWdtZW50cyxkPWMubGVuZ3RoO2lmKGQ+MCl7Zm9yKG49W10sbD0xO2Q+bDtsKyspYT1vKGNbbC0xXSxjW2xdKSxhIT09cyYmKHM9YSxuLnB1c2goYSkpLG4ucHVzaChcImxcIj09PWE/aShbY1tsXS5hbmNob3IoKV0pOmkoW2NbbC0xXS5jb250cm9sT3V0KCksY1tsXS5jb250cm9sSW4oKSxjW2xdLmFuY2hvcigpXSkpO3JldHVybiByPVwibSBcIitpKFtjWzBdLmFuY2hvcigpXSkrXCIgXCIrbi5qb2luKFwiIFwiKSxlLm9wdGlvbnMuY2xvc2VkJiYocis9XCIgeFwiKSx0IT09ITAmJihyKz1cIiBlXCIpLHJ9fWZ1bmN0aW9uIG8oZSx0KXtyZXR1cm4gZS5jb250cm9sT3V0KCkmJnQuY29udHJvbEluKCk/XCJjXCI6XCJsXCJ9ZnVuY3Rpb24gYShlKXtyZXR1cm4gMD09PWUuaW5kZXhPZihcImZpbGxcIil8fDA9PT1lLmluZGV4T2Yoeil9ZnVuY3Rpb24gcyhlLHQpe3ZhciBuO3JldHVybiBuPWU/bChlLHQuY29sb3IoKSx0Lm9wYWNpdHkoKSk6bCh0LmNvbG9yKCksXCIjZmZmXCIsMS10Lm9wYWNpdHkoKSl9ZnVuY3Rpb24gbChlLHQsbil7dmFyIGk9bmV3IGsoZSkscj1uZXcgayh0KSxvPWMoaS5yLHIucixuKSxhPWMoaS5nLHIuZyxuKSxzPWMoaS5iLHIuYixuKTtyZXR1cm4gbmV3IGsobyxhLHMpLnRvSGV4KCl9ZnVuY3Rpb24gYyhlLHQsbil7cmV0dXJuIGgucm91bmQobip0KygxLW4pKmUpfXZhciBkLHU9ZG9jdW1lbnQsaD1NYXRoLHA9aC5hdGFuMixmPWguc3FydCxnPXdpbmRvdy5rZW5kbyxtPWcuZGVlcEV4dGVuZCx2PWUubm9vcCxfPWcuZHJhd2luZyx5PV8uQmFzZU5vZGUsdz1nLmdlb21ldHJ5LGI9dy50b01hdHJpeCxrPWcuQ29sb3IseD1nLnV0aWwsQz14LmlzVHJhbnNwYXJlbnQsUz14LmRlZmluZWQsVD14LmRlZyxEPXgucm91bmQsQT14LnZhbHVlT3JEZWZhdWx0LEU9XCJub25lXCIsTT1cIi5rZW5kb1wiLFA9MTAwLEk9UCpQLHo9XCJncmFkaWVudFwiLEY9NCxSPV8uU3VyZmFjZS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSxuKXtfLlN1cmZhY2UuZm4uaW5pdC5jYWxsKHRoaXMsZSxuKSx0KCksdGhpcy5lbGVtZW50LmVtcHR5KCksdGhpcy5fcm9vdD1uZXcgTCx0aGlzLl9yb290LmF0dGFjaFRvKHRoaXMuZWxlbWVudFswXSksdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIitNLHRoaXMuX2NsaWNrKSx0aGlzLmVsZW1lbnQub24oXCJtb3VzZW92ZXJcIitNLHRoaXMuX21vdXNlZW50ZXIpLHRoaXMuZWxlbWVudC5vbihcIm1vdXNlb3V0XCIrTSx0aGlzLl9tb3VzZWxlYXZlKX0sdHlwZTpcInZtbFwiLGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl9yb290JiYodGhpcy5fcm9vdC5kZXN0cm95KCksdGhpcy5fcm9vdD1udWxsLHRoaXMuZWxlbWVudC5vZmYoTSkpLF8uU3VyZmFjZS5mbi5kZXN0cm95LmNhbGwodGhpcyl9LGRyYXc6ZnVuY3Rpb24oZSl7dGhpcy5fcm9vdC5sb2FkKFtlXSx2b2lkIDAsbnVsbCl9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5fcm9vdC5jbGVhcigpfX0pLEI9eS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7eS5mbi5pbml0LmNhbGwodGhpcyxlKSx0aGlzLmNyZWF0ZUVsZW1lbnQoKSx0aGlzLmF0dGFjaFJlZmVyZW5jZSgpfSxvYnNlcnZlOnYsZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudCYmKHRoaXMuZWxlbWVudC5fa2VuZG9Ob2RlPW51bGwsdGhpcy5lbGVtZW50PW51bGwpLHkuZm4uZGVzdHJveS5jYWxsKHRoaXMpfSxjbGVhcjpmdW5jdGlvbigpe3ZhciBlLHQ7Zm9yKHRoaXMuZWxlbWVudCYmKHRoaXMuZWxlbWVudC5pbm5lckhUTUw9XCJcIiksZT10aGlzLmNoaWxkTm9kZXMsdD0wO2UubGVuZ3RoPnQ7dCsrKWVbdF0uZGVzdHJveSgpO3RoaXMuY2hpbGROb2Rlcz1bXX0scmVtb3ZlU2VsZjpmdW5jdGlvbigpe3RoaXMuZWxlbWVudCYmKHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCksdGhpcy5lbGVtZW50PW51bGwpLHkuZm4ucmVtb3ZlU2VsZi5jYWxsKHRoaXMpfSxjcmVhdGVFbGVtZW50OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50PXUuY3JlYXRlRWxlbWVudChcImRpdlwiKX0sYXR0YWNoUmVmZXJlbmNlOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50Ll9rZW5kb05vZGU9dGhpc30sbG9hZDpmdW5jdGlvbihlLHQsbixpKXt2YXIgcixvLGEscyxsLGM7Zm9yKGk9QShpLDEpLHRoaXMuc3JjRWxlbWVudCYmKGkqPUEodGhpcy5zcmNFbGVtZW50Lm9wdGlvbnMub3BhY2l0eSwxKSkscj0wO2UubGVuZ3RoPnI7cisrKW89ZVtyXSxhPW8uY2hpbGRyZW4scz1vLmN1cnJlbnRUcmFuc2Zvcm0obiksbD1pKkEoby5vcHRpb25zLm9wYWNpdHksMSksYz1uZXcgb3Rbby5ub2RlVHlwZV0obyxzLGwpLGEmJmEubGVuZ3RoPjAmJmMubG9hZChhLHQscyxpKSxTKHQpP3RoaXMuaW5zZXJ0QXQoYyx0KTp0aGlzLmFwcGVuZChjKSxjLmF0dGFjaFRvKHRoaXMuZWxlbWVudCx0KX0sYXR0YWNoVG86ZnVuY3Rpb24oZSx0KXtTKHQpP2UuaW5zZXJ0QmVmb3JlKHRoaXMuZWxlbWVudCxlLmNoaWxkcmVuW3RdfHxudWxsKTplLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCl9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7XCJ2aXNpYmxlXCI9PWUuZmllbGQmJnRoaXMuY3NzKFwiZGlzcGxheVwiLGUudmFsdWUhPT0hMT9cIlwiOkUpfSxzZXRTdHlsZTpmdW5jdGlvbigpe3RoaXMuYWxsQ3NzKHRoaXMubWFwU3R5bGUoKSl9LG1hcFN0eWxlOmZ1bmN0aW9uKCl7dmFyIGU9W107cmV0dXJuIHRoaXMuc3JjRWxlbWVudCYmdGhpcy5zcmNFbGVtZW50Lm9wdGlvbnMudmlzaWJsZT09PSExJiZlLnB1c2goW1wiZGlzcGxheVwiLEVdKSxlfSxtYXBPcGFjaXR5VG86ZnVuY3Rpb24oZSx0KXt2YXIgbj1BKHRoaXMub3BhY2l0eSwxKTtuKj1BKHQsMSksZS5wdXNoKFtcIm9wYWNpdHlcIixuXSl9LGF0dHI6ZnVuY3Rpb24oZSx0KXt0aGlzLmVsZW1lbnQmJih0aGlzLmVsZW1lbnRbZV09dCl9LGFsbEF0dHI6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7ZS5sZW5ndGg+dDt0KyspdGhpcy5hdHRyKGVbdF1bMF0sZVt0XVsxXSl9LGNzczpmdW5jdGlvbihlLHQpe3RoaXMuZWxlbWVudCYmKHRoaXMuZWxlbWVudC5zdHlsZVtlXT10KX0sYWxsQ3NzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO2UubGVuZ3RoPnQ7dCsrKXRoaXMuY3NzKGVbdF1bMF0sZVt0XVsxXSl9fSksTD1CLmV4dGVuZCh7Y3JlYXRlRWxlbWVudDpmdW5jdGlvbigpe0IuZm4uY3JlYXRlRWxlbWVudC5jYWxsKHRoaXMpLHRoaXMuYWxsQ3NzKFtbXCJ3aWR0aFwiLFwiMTAwJVwiXSxbXCJoZWlnaHRcIixcIjEwMCVcIl0sW1wicG9zaXRpb25cIixcInJlbGF0aXZlXCJdLFtcInZpc2liaWxpdHlcIixcInZpc2libGVcIl1dKX0sYXR0YWNoUmVmZXJlbmNlOnZ9KSxPPWcuQ2xhc3MuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dGhpcy5zcmNFbGVtZW50PWUsdGhpcy5vYnNlcnZlcj10LGUuYWRkT2JzZXJ2ZXIodGhpcyl9LGdlb21ldHJ5Q2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZlci5vcHRpb25zQ2hhbmdlKHtmaWVsZDpcImNsaXBcIix2YWx1ZTp0aGlzLnNyY0VsZW1lbnR9KX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLnNyY0VsZW1lbnQucmVtb3ZlT2JzZXJ2ZXIodGhpcyl9fSksSD1CLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXtCLmZuLmluaXQuY2FsbCh0aGlzLGUpLGUmJnRoaXMuaW5pdENsaXAoKX0sb2JzZXJ2ZTpmdW5jdGlvbigpe3kuZm4ub2JzZXJ2ZS5jYWxsKHRoaXMpfSxtYXBTdHlsZTpmdW5jdGlvbigpe3ZhciBlPUIuZm4ubWFwU3R5bGUuY2FsbCh0aGlzKTtyZXR1cm4gdGhpcy5zcmNFbGVtZW50JiZ0aGlzLnNyY0VsZW1lbnQuY2xpcCgpJiZlLnB1c2goW1wiY2xpcFwiLHRoaXMuY2xpcFJlY3QoKV0pLGV9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7XCJjbGlwXCI9PWUuZmllbGQmJih0aGlzLmNsZWFyQ2xpcCgpLHRoaXMuaW5pdENsaXAoKSx0aGlzLnNldENsaXAoKSksQi5mbi5vcHRpb25zQ2hhbmdlLmNhbGwodGhpcyxlKX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmNsZWFyQ2xpcCgpLEIuZm4uY2xlYXIuY2FsbCh0aGlzKX0saW5pdENsaXA6ZnVuY3Rpb24oKXt0aGlzLnNyY0VsZW1lbnQuY2xpcCgpJiYodGhpcy5jbGlwPW5ldyBPKHRoaXMuc3JjRWxlbWVudC5jbGlwKCksdGhpcyksdGhpcy5jbGlwLm9ic2VydmVyPXRoaXMpfSxjbGVhckNsaXA6ZnVuY3Rpb24oKXt0aGlzLmNsaXAmJih0aGlzLmNsaXAuY2xlYXIoKSx0aGlzLmNsaXA9bnVsbCx0aGlzLmNzcyhcImNsaXBcIix0aGlzLmNsaXBSZWN0KCkpKX0sc2V0Q2xpcDpmdW5jdGlvbigpe3RoaXMuY2xpcCYmdGhpcy5jc3MoXCJjbGlwXCIsdGhpcy5jbGlwUmVjdCgpKX0sY2xpcFJlY3Q6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT1kLHI9dGhpcy5zcmNFbGVtZW50LmNsaXAoKTtyZXR1cm4gciYmKGU9dGhpcy5jbGlwQkJveChyKSx0PWUudG9wTGVmdCgpLG49ZS5ib3R0b21SaWdodCgpLGk9Zy5mb3JtYXQoXCJyZWN0KHswfXB4IHsxfXB4IHsyfXB4IHszfXB4KVwiLHQueSxuLngsbi55LHQueCkpLGl9LGNsaXBCQm94OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc3JjRWxlbWVudC5yYXdCQm94KCkudG9wTGVmdCgpLG49ZS5yYXdCQm94KCk7cmV0dXJuIG4ub3JpZ2luLnRyYW5zbGF0ZSgtdC54LC10LnkpLG59fSksTj1ILmV4dGVuZCh7Y3JlYXRlRWxlbWVudDpmdW5jdGlvbigpe0IuZm4uY3JlYXRlRWxlbWVudC5jYWxsKHRoaXMpLHRoaXMuc2V0U3R5bGUoKX0sYXR0YWNoVG86ZnVuY3Rpb24oZSx0KXt0aGlzLmNzcyhcImRpc3BsYXlcIixFKSxCLmZuLmF0dGFjaFRvLmNhbGwodGhpcyxlLHQpLHRoaXMuc3JjRWxlbWVudC5vcHRpb25zLnZpc2libGUhPT0hMSYmdGhpcy5jc3MoXCJkaXNwbGF5XCIsXCJcIil9LF9hdHRhY2hUbzpmdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7dC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpLGUuYXBwZW5kQ2hpbGQodCl9LG1hcFN0eWxlOmZ1bmN0aW9uKCl7dmFyIGU9SC5mbi5tYXBTdHlsZS5jYWxsKHRoaXMpO3JldHVybiBlLnB1c2goW1wicG9zaXRpb25cIixcImFic29sdXRlXCJdKSxlLnB1c2goW1wid2hpdGUtc3BhY2VcIixcIm5vd3JhcFwiXSksZX0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXtcInRyYW5zZm9ybVwiPT09ZS5maWVsZCYmdGhpcy5yZWZyZXNoVHJhbnNmb3JtKCksXCJvcGFjaXR5XCI9PT1lLmZpZWxkJiZ0aGlzLnJlZnJlc2hPcGFjaXR5KCksSC5mbi5vcHRpb25zQ2hhbmdlLmNhbGwodGhpcyxlKX0scmVmcmVzaFRyYW5zZm9ybTpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMuc3JjRWxlbWVudC5jdXJyZW50VHJhbnNmb3JtKGUpLGk9dGhpcy5jaGlsZE5vZGVzLHI9aS5sZW5ndGg7Zm9yKHRoaXMuc2V0Q2xpcCgpLHQ9MDtyPnQ7dCsrKWlbdF0ucmVmcmVzaFRyYW5zZm9ybShuKX0sY3VycmVudE9wYWNpdHk6ZnVuY3Rpb24oKXt2YXIgZT1BKHRoaXMuc3JjRWxlbWVudC5vcHRpb25zLm9wYWNpdHksMSk7cmV0dXJuIHRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5jdXJyZW50T3BhY2l0eSYmKGUqPXRoaXMucGFyZW50LmN1cnJlbnRPcGFjaXR5KCkpLGV9LHJlZnJlc2hPcGFjaXR5OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLmNoaWxkTm9kZXMsbj10Lmxlbmd0aCxpPXRoaXMuY3VycmVudE9wYWNpdHkoKTtmb3IoZT0wO24+ZTtlKyspdFtlXS5yZWZyZXNoT3BhY2l0eShpKX0saW5pdENsaXA6ZnVuY3Rpb24oKXtpZihILmZuLmluaXRDbGlwLmNhbGwodGhpcyksdGhpcy5jbGlwKXt2YXIgZT10aGlzLmNsaXAuc3JjRWxlbWVudC5iYm94KHRoaXMuc3JjRWxlbWVudC5jdXJyZW50VHJhbnNmb3JtKCkpO2UmJih0aGlzLmNzcyhcIndpZHRoXCIsZS53aWR0aCgpK2Uub3JpZ2luLngpLHRoaXMuY3NzKFwiaGVpZ2h0XCIsZS5oZWlnaHQoKStlLm9yaWdpbi55KSl9fSxjbGlwQkJveDpmdW5jdGlvbihlKXtyZXR1cm4gZS5iYm94KHRoaXMuc3JjRWxlbWVudC5jdXJyZW50VHJhbnNmb3JtKCkpfSxjbGVhckNsaXA6ZnVuY3Rpb24oKXtILmZuLmNsZWFyQ2xpcC5jYWxsKHRoaXMpfX0pLFY9Qi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLm9wYWNpdHk9dCxCLmZuLmluaXQuY2FsbCh0aGlzLGUpfSxjcmVhdGVFbGVtZW50OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50PW4oXCJzdHJva2VcIiksdGhpcy5zZXRPcGFjaXR5KCl9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7MD09PWUuZmllbGQuaW5kZXhPZihcInN0cm9rZVwiKSYmdGhpcy5zZXRTdHJva2UoKX0scmVmcmVzaE9wYWNpdHk6ZnVuY3Rpb24oZSl7dGhpcy5vcGFjaXR5PWUsdGhpcy5zZXRTdHJva2UoKX0sc2V0U3Ryb2tlOmZ1bmN0aW9uKCl7dGhpcy5hbGxBdHRyKHRoaXMubWFwU3Ryb2tlKCkpfSxzZXRPcGFjaXR5OmZ1bmN0aW9uKCl7dGhpcy5zZXRTdHJva2UoKX0sbWFwU3Ryb2tlOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLnNyY0VsZW1lbnQub3B0aW9ucy5zdHJva2Usbj1bXTtyZXR1cm4gdCYmIUModC5jb2xvcikmJjAhPT10LndpZHRoPyhuLnB1c2goW1wib25cIixcInRydWVcIl0pLG4ucHVzaChbXCJjb2xvclwiLHQuY29sb3JdKSxuLnB1c2goW1wid2VpZ2h0XCIsKHQud2lkdGh8fDEpK1wicHhcIl0pLHRoaXMubWFwT3BhY2l0eVRvKG4sdC5vcGFjaXR5KSxTKHQuZGFzaFR5cGUpJiZuLnB1c2goW1wiZGFzaHN0eWxlXCIsdC5kYXNoVHlwZV0pLFModC5saW5lSm9pbikmJm4ucHVzaChbXCJqb2luc3R5bGVcIix0LmxpbmVKb2luXSksUyh0LmxpbmVDYXApJiYoZT10LmxpbmVDYXAudG9Mb3dlckNhc2UoKSxcImJ1dHRcIj09PWUmJihlPVwiYnV0dFwiPT09ZT9cImZsYXRcIjplKSxuLnB1c2goW1wiZW5kY2FwXCIsZV0pKSk6bi5wdXNoKFtcIm9uXCIsXCJmYWxzZVwiXSksbn19KSxVPUIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXt0aGlzLm9wYWNpdHk9bixCLmZuLmluaXQuY2FsbCh0aGlzLGUpfSxjcmVhdGVFbGVtZW50OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50PW4oXCJmaWxsXCIpLHRoaXMuc2V0RmlsbCgpfSxvcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKGUpe2EoZS5maWVsZCkmJnRoaXMuc2V0RmlsbCgpfSxyZWZyZXNoT3BhY2l0eTpmdW5jdGlvbihlKXt0aGlzLm9wYWNpdHk9ZSx0aGlzLnNldE9wYWNpdHkoKX0sc2V0RmlsbDpmdW5jdGlvbigpe3RoaXMuYWxsQXR0cih0aGlzLm1hcEZpbGwoKSl9LHNldE9wYWNpdHk6ZnVuY3Rpb24oKXt0aGlzLnNldEZpbGwoKX0sYXR0cjpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcy5lbGVtZW50O2lmKGkpe2ZvcihuPWUuc3BsaXQoXCIuXCIpO24ubGVuZ3RoPjE7KWk9aVtuLnNoaWZ0KCldO2lbblswXV09dH19LG1hcEZpbGw6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNyY0VsZW1lbnQuZmlsbCgpLHQ9W1tcIm9uXCIsXCJmYWxzZVwiXV07cmV0dXJuIGUmJihlLm5vZGVUeXBlPT16P3Q9dGhpcy5tYXBHcmFkaWVudChlKTpDKGUuY29sb3IpfHwodD10aGlzLm1hcEZpbGxDb2xvcihlKSkpLHR9LG1hcEZpbGxDb2xvcjpmdW5jdGlvbihlKXt2YXIgdD1bW1wib25cIixcInRydWVcIl0sW1wiY29sb3JcIixlLmNvbG9yXV07cmV0dXJuIHRoaXMubWFwT3BhY2l0eVRvKHQsZS5vcGFjaXR5KSx0fSxtYXBHcmFkaWVudDpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMuc3JjRWxlbWVudC5vcHRpb25zLGk9bi5mYWxsYmFja0ZpbGx8fGUuZmFsbGJhY2tGaWxsJiZlLmZhbGxiYWNrRmlsbCgpO3JldHVybiB0PWUgaW5zdGFuY2VvZiBfLkxpbmVhckdyYWRpZW50P3RoaXMubWFwTGluZWFyR3JhZGllbnQoZSk6ZSBpbnN0YW5jZW9mIF8uUmFkaWFsR3JhZGllbnQmJmUuc3VwcG9ydFZNTD90aGlzLm1hcFJhZGlhbEdyYWRpZW50KGUpOmk/dGhpcy5tYXBGaWxsQ29sb3IoaSk6W1tcIm9uXCIsXCJmYWxzZVwiXV19LG1hcExpbmVhckdyYWRpZW50OmZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RhcnQoKSxuPWUuZW5kKCksaT14LmRlZyhwKG4ueS10Lnksbi54LXQueCkpLHI9W1tcIm9uXCIsXCJ0cnVlXCJdLFtcInR5cGVcIix6XSxbXCJmb2N1c1wiLDBdLFtcIm1ldGhvZFwiLFwibm9uZVwiXSxbXCJhbmdsZVwiLDI3MC1pXV07cmV0dXJuIHRoaXMuYWRkQ29sb3JzKHIpLHJ9LG1hcFJhZGlhbEdyYWRpZW50OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc3JjRWxlbWVudC5yYXdCQm94KCksbj1lLmNlbnRlcigpLGk9KG4ueC10Lm9yaWdpbi54KS90LndpZHRoKCkscj0obi55LXQub3JpZ2luLnkpL3QuaGVpZ2h0KCksbz1bW1wib25cIixcInRydWVcIl0sW1widHlwZVwiLFwiZ3JhZGllbnR0aXRsZVwiXSxbXCJmb2N1c1wiLFwiMTAwJVwiXSxbXCJmb2N1c3Bvc2l0aW9uXCIsaStcIiBcIityXSxbXCJtZXRob2RcIixcIm5vbmVcIl1dO3JldHVybiB0aGlzLmFkZENvbG9ycyhvKSxvfSxhZGRDb2xvcnM6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMuc3JjRWxlbWVudC5vcHRpb25zLHI9W10sbz1pLmZpbGwuc3RvcHMsYT1pLmJhc2VDb2xvcixsPXRoaXMuZWxlbWVudC5jb2xvcnM/XCJjb2xvcnMudmFsdWVcIjpcImNvbG9yc1wiLGM9cyhhLG9bMF0pLGQ9cyhhLG9bby5sZW5ndGgtMV0pO2ZvcihuPTA7by5sZW5ndGg+bjtuKyspdD1vW25dLHIucHVzaChoLnJvdW5kKDEwMCp0Lm9mZnNldCgpKStcIiUgXCIrcyhhLHQpKTtlLnB1c2goW2wsci5qb2luKFwiLFwiKV0sW1wiY29sb3JcIixjXSxbXCJjb2xvcjJcIixkXSl9fSksVz1CLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3RoaXMudHJhbnNmb3JtPXQsQi5mbi5pbml0LmNhbGwodGhpcyxlKX0sY3JlYXRlRWxlbWVudDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudD1uKFwic2tld1wiKSx0aGlzLnNldFRyYW5zZm9ybSgpfSxvcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKGUpe1widHJhbnNmb3JtXCI9PT1lLmZpZWxkJiZ0aGlzLnJlZnJlc2godGhpcy5zcmNFbGVtZW50LmN1cnJlbnRUcmFuc2Zvcm0oKSl9LHJlZnJlc2g6ZnVuY3Rpb24oZSl7dGhpcy50cmFuc2Zvcm09ZSx0aGlzLnNldFRyYW5zZm9ybSgpfSx0cmFuc2Zvcm1PcmlnaW46ZnVuY3Rpb24oKXtyZXR1cm5cIi0wLjUsLTAuNVwifSxzZXRUcmFuc2Zvcm06ZnVuY3Rpb24oKXt0aGlzLmFsbEF0dHIodGhpcy5tYXBUcmFuc2Zvcm0oKSl9LG1hcFRyYW5zZm9ybTpmdW5jdGlvbigpe3ZhciBlPXRoaXMudHJhbnNmb3JtLHQ9W10sbj1iKGUpO3JldHVybiBuPyhuLnJvdW5kKEYpLHQucHVzaChbXCJvblwiLFwidHJ1ZVwiXSxbXCJtYXRyaXhcIixbbi5hLG4uYyxuLmIsbi5kLDAsMF0uam9pbihcIixcIildLFtcIm9mZnNldFwiLG4uZStcInB4LFwiK24uZitcInB4XCJdLFtcIm9yaWdpblwiLHRoaXMudHJhbnNmb3JtT3JpZ2luKCldKSk6dC5wdXNoKFtcIm9uXCIsXCJmYWxzZVwiXSksdH19KSxqPUguZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXt0aGlzLmZpbGw9dGhpcy5jcmVhdGVGaWxsTm9kZShlLHQsbiksdGhpcy5zdHJva2U9bmV3IFYoZSxuKSx0aGlzLnRyYW5zZm9ybT10aGlzLmNyZWF0ZVRyYW5zZm9ybU5vZGUoZSx0KSxILmZuLmluaXQuY2FsbCh0aGlzLGUpfSxhdHRhY2hUbzpmdW5jdGlvbihlLHQpe3RoaXMuZmlsbC5hdHRhY2hUbyh0aGlzLmVsZW1lbnQpLHRoaXMuc3Ryb2tlLmF0dGFjaFRvKHRoaXMuZWxlbWVudCksdGhpcy50cmFuc2Zvcm0uYXR0YWNoVG8odGhpcy5lbGVtZW50KSxCLmZuLmF0dGFjaFRvLmNhbGwodGhpcyxlLHQpfSxjcmVhdGVGaWxsTm9kZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIG5ldyBVKGUsdCxuKX0sY3JlYXRlVHJhbnNmb3JtTm9kZTpmdW5jdGlvbihlLHQpe3JldHVybiBuZXcgVyhlLHQpfSxjcmVhdGVFbGVtZW50OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50PW4oXCJzaGFwZVwiKSx0aGlzLnNldENvb3Jkc2l6ZSgpLHRoaXMuc2V0U3R5bGUoKX0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXthKGUuZmllbGQpP3RoaXMuZmlsbC5vcHRpb25zQ2hhbmdlKGUpOjA9PT1lLmZpZWxkLmluZGV4T2YoXCJzdHJva2VcIik/dGhpcy5zdHJva2Uub3B0aW9uc0NoYW5nZShlKTpcInRyYW5zZm9ybVwiPT09ZS5maWVsZD90aGlzLnRyYW5zZm9ybS5vcHRpb25zQ2hhbmdlKGUpOlwib3BhY2l0eVwiPT09ZS5maWVsZCYmKHRoaXMuZmlsbC5zZXRPcGFjaXR5KCksdGhpcy5zdHJva2Uuc2V0T3BhY2l0eSgpKSxILmZuLm9wdGlvbnNDaGFuZ2UuY2FsbCh0aGlzLGUpfSxyZWZyZXNoVHJhbnNmb3JtOmZ1bmN0aW9uKGUpe3RoaXMudHJhbnNmb3JtLnJlZnJlc2godGhpcy5zcmNFbGVtZW50LmN1cnJlbnRUcmFuc2Zvcm0oZSkpfSxyZWZyZXNoT3BhY2l0eTpmdW5jdGlvbihlKXtlKj1BKHRoaXMuc3JjRWxlbWVudC5vcHRpb25zLm9wYWNpdHksMSksdGhpcy5maWxsLnJlZnJlc2hPcGFjaXR5KGUpLHRoaXMuc3Ryb2tlLnJlZnJlc2hPcGFjaXR5KGUpfSxtYXBTdHlsZTpmdW5jdGlvbihlLHQpe3ZhciBuLGk9SC5mbi5tYXBTdHlsZS5jYWxsKHRoaXMpO3JldHVybiBlJiZ0fHwoZT10PVApLGkucHVzaChbXCJwb3NpdGlvblwiLFwiYWJzb2x1dGVcIl0sW1wid2lkdGhcIixlK1wicHhcIl0sW1wiaGVpZ2h0XCIsdCtcInB4XCJdKSxuPXRoaXMuc3JjRWxlbWVudC5vcHRpb25zLmN1cnNvcixuJiZpLnB1c2goW1wiY3Vyc29yXCIsbl0pLGl9LHNldENvb3Jkc2l6ZTpmdW5jdGlvbigpe3RoaXMuYWxsQXR0cihbW1wiY29vcmRvcmlnaW5cIixcIjAgMFwiXSxbXCJjb29yZHNpemVcIixJK1wiIFwiK0ldXSl9fSksRz1CLmV4dGVuZCh7Y3JlYXRlRWxlbWVudDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudD1uKFwicGF0aFwiKSx0aGlzLnNldFBhdGhEYXRhKCl9LGdlb21ldHJ5Q2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5zZXRQYXRoRGF0YSgpfSxzZXRQYXRoRGF0YTpmdW5jdGlvbigpe3RoaXMuYXR0cihcInZcIix0aGlzLnJlbmRlckRhdGEoKSl9LHJlbmRlckRhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gcih0aGlzLnNyY0VsZW1lbnQpfX0pLHE9ai5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3RoaXMucGF0aERhdGE9dGhpcy5jcmVhdGVEYXRhTm9kZShlKSxqLmZuLmluaXQuY2FsbCh0aGlzLGUsdCxuKX0sYXR0YWNoVG86ZnVuY3Rpb24oZSx0KXt0aGlzLnBhdGhEYXRhLmF0dGFjaFRvKHRoaXMuZWxlbWVudCksai5mbi5hdHRhY2hUby5jYWxsKHRoaXMsZSx0KX0sY3JlYXRlRGF0YU5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBHKGUpfSxnZW9tZXRyeUNoYW5nZTpmdW5jdGlvbigpe3RoaXMucGF0aERhdGEuZ2VvbWV0cnlDaGFuZ2UoKSxqLmZuLmdlb21ldHJ5Q2hhbmdlLmNhbGwodGhpcyl9fSksJD1HLmV4dGVuZCh7cmVuZGVyRGF0YTpmdW5jdGlvbigpe3ZhciBlLHQsbixpPXRoaXMuc3JjRWxlbWVudC5wYXRocztpZihpLmxlbmd0aD4wKXtmb3IoZT1bXSx0PTA7aS5sZW5ndGg+dDt0Kyspbj1pLmxlbmd0aC0xPnQsZS5wdXNoKHIoaVt0XSxuKSk7cmV0dXJuIGUuam9pbihcIiBcIil9fX0pLFk9cS5leHRlbmQoe2NyZWF0ZURhdGFOb2RlOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgJChlKX19KSxLPVcuZXh0ZW5kKHt0cmFuc2Zvcm1PcmlnaW46ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNyY0VsZW1lbnQuZ2VvbWV0cnkoKS5iYm94KCksdD1lLmNlbnRlcigpLG49LXQueC9lLndpZHRoKCksaT0tdC55L2UuaGVpZ2h0KCk7cmV0dXJuIG4rXCIsXCIraX19KSxRPWouZXh0ZW5kKHtjcmVhdGVFbGVtZW50OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50PW4oXCJvdmFsXCIpLHRoaXMuc2V0U3R5bGUoKX0sY3JlYXRlVHJhbnNmb3JtTm9kZTpmdW5jdGlvbihlLHQpe3JldHVybiBuZXcgSyhlLHQpfSxnZW9tZXRyeUNoYW5nZTpmdW5jdGlvbigpe2ouZm4uZ2VvbWV0cnlDaGFuZ2UuY2FsbCh0aGlzKSx0aGlzLnNldFN0eWxlKCksdGhpcy5yZWZyZXNoVHJhbnNmb3JtKCl9LG1hcFN0eWxlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zcmNFbGVtZW50Lmdlb21ldHJ5KCksdD1lLnJhZGl1cyxuPWUuY2VudGVyLGk9Mip0LHI9ai5mbi5tYXBTdHlsZS5jYWxsKHRoaXMsaSxpKTtyZXR1cm4gci5wdXNoKFtcImxlZnRcIixuLngtdCtcInB4XCJdLFtcInRvcFwiLG4ueS10K1wicHhcIl0pLHJ9fSksWD1HLmV4dGVuZCh7cmVuZGVyRGF0YTpmdW5jdGlvbigpe3JldHVybiByKHRoaXMuc3JjRWxlbWVudC50b1BhdGgoKSl9fSksSj1xLmV4dGVuZCh7Y3JlYXRlRGF0YU5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBYKGUpfX0pLFo9Ry5leHRlbmQoe2NyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oKXtHLmZuLmNyZWF0ZUVsZW1lbnQuY2FsbCh0aGlzKSx0aGlzLmF0dHIoXCJ0ZXh0cGF0aG9rXCIsITApfSxyZW5kZXJEYXRhOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zcmNFbGVtZW50LnJlY3QoKSx0PWUuY2VudGVyKCk7cmV0dXJuXCJtIFwiK2koW25ldyB3LlBvaW50KGUudG9wTGVmdCgpLngsdC55KV0pK1wiIGwgXCIraShbbmV3IHcuUG9pbnQoZS5ib3R0b21SaWdodCgpLngsdC55KV0pfX0pLGV0PUIuZXh0ZW5kKHtjcmVhdGVFbGVtZW50OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50PW4oXCJ0ZXh0cGF0aFwiKSx0aGlzLmF0dHIoXCJvblwiLCEwKSx0aGlzLmF0dHIoXCJmaXRwYXRoXCIsITEpLHRoaXMuc2V0U3R5bGUoKSx0aGlzLnNldFN0cmluZygpfSxvcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKGUpe1wiY29udGVudFwiPT09ZS5maWVsZD90aGlzLnNldFN0cmluZygpOnRoaXMuc2V0U3R5bGUoKSxCLmZuLm9wdGlvbnNDaGFuZ2UuY2FsbCh0aGlzLGUpfSxtYXBTdHlsZTpmdW5jdGlvbigpe3JldHVybltbXCJmb250XCIsdGhpcy5zcmNFbGVtZW50Lm9wdGlvbnMuZm9udF1dfSxzZXRTdHJpbmc6ZnVuY3Rpb24oKXt0aGlzLmF0dHIoXCJzdHJpbmdcIix0aGlzLnNyY0VsZW1lbnQuY29udGVudCgpKX19KSx0dD1xLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbil7dGhpcy5wYXRoPW5ldyBldChlKSxxLmZuLmluaXQuY2FsbCh0aGlzLGUsdCxuKX0sY3JlYXRlRGF0YU5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBaKGUpfSxhdHRhY2hUbzpmdW5jdGlvbihlLHQpe3RoaXMucGF0aC5hdHRhY2hUbyh0aGlzLmVsZW1lbnQpLHEuZm4uYXR0YWNoVG8uY2FsbCh0aGlzLGUsdCl9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7KFwiZm9udFwiPT09ZS5maWVsZHx8XCJjb250ZW50XCI9PT1lLmZpZWxkKSYmKHRoaXMucGF0aC5vcHRpb25zQ2hhbmdlKGUpLHRoaXMucGF0aERhdGEuZ2VvbWV0cnlDaGFuZ2UoZSkpLHEuZm4ub3B0aW9uc0NoYW5nZS5jYWxsKHRoaXMsZSl9fSksbnQ9Ry5leHRlbmQoe3JlbmRlckRhdGE6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNyY0VsZW1lbnQucmVjdCgpLHQ9KG5ldyBfLlBhdGgpLm1vdmVUbyhlLnRvcExlZnQoKSkubGluZVRvKGUudG9wUmlnaHQoKSkubGluZVRvKGUuYm90dG9tUmlnaHQoKSkubGluZVRvKGUuYm90dG9tTGVmdCgpKS5jbG9zZSgpO3JldHVybiByKHQpfX0pLGl0PVcuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXt0aGlzLm9wYWNpdHk9bixXLmZuLmluaXQuY2FsbCh0aGlzLGUsdCl9LGNyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQ9bihcImZpbGxcIiksdGhpcy5hdHRyKFwidHlwZVwiLFwiZnJhbWVcIiksdGhpcy5hdHRyKFwicm90YXRlXCIsITApLHRoaXMuc2V0T3BhY2l0eSgpLHRoaXMuc2V0U3JjKCksdGhpcy5zZXRUcmFuc2Zvcm0oKX0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXtcInNyY1wiPT09ZS5maWVsZCYmdGhpcy5zZXRTcmMoKSxXLmZuLm9wdGlvbnNDaGFuZ2UuY2FsbCh0aGlzLGUpfSxnZW9tZXRyeUNoYW5nZTpmdW5jdGlvbigpe3RoaXMucmVmcmVzaCgpfSxyZWZyZXNoT3BhY2l0eTpmdW5jdGlvbihlKXt0aGlzLm9wYWNpdHk9ZSx0aGlzLnNldE9wYWNpdHkoKX0sc2V0T3BhY2l0eTpmdW5jdGlvbigpe3ZhciBlPVtdO3RoaXMubWFwT3BhY2l0eVRvKGUsdGhpcy5zcmNFbGVtZW50Lm9wdGlvbnMub3BhY2l0eSksdGhpcy5hbGxBdHRyKGUpfSxzZXRTcmM6ZnVuY3Rpb24oKXt0aGlzLmF0dHIoXCJzcmNcIix0aGlzLnNyY0VsZW1lbnQuc3JjKCkpfSxtYXBUcmFuc2Zvcm06ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLG8sYSxzLGw9dGhpcy5zcmNFbGVtZW50LGM9bC5yYXdCQm94KCksZD1jLmNlbnRlcigpLHU9UC8yLGg9UCxnPWMud2lkdGgoKS9oLG09Yy5oZWlnaHQoKS9oLHY9MCxfPXRoaXMudHJhbnNmb3JtO3JldHVybiBfPyhuPWIoXyksaT1mKG4uYSpuLmErbi5iKm4uYikscj1mKG4uYypuLmMrbi5kKm4uZCksZyo9aSxtKj1yLG89VChwKG4uYixuLmQpKSxhPVQocCgtbi5jLG4uYSkpLHY9KG8rYSkvMiwwIT09dj8ocz1sLmJib3goKS5jZW50ZXIoKSxlPShzLngtdSkvaCx0PShzLnktdSkvaCk6KGU9KGQueCppK24uZS11KS9oLHQ9KGQueSpyK24uZi11KS9oKSk6KGU9KGQueC11KS9oLHQ9KGQueS11KS9oKSxnPUQoZyxGKSxtPUQobSxGKSxlPUQoZSxGKSx0PUQodCxGKSx2PUQodixGKSxbW1wic2l6ZVwiLGcrXCIsXCIrbV0sW1wicG9zaXRpb25cIixlK1wiLFwiK3RdLFtcImFuZ2xlXCIsdl1dfX0pLHJ0PXEuZXh0ZW5kKHtjcmVhdGVGaWxsTm9kZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIG5ldyBpdChlLHQsbil9LGNyZWF0ZURhdGFOb2RlOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgbnQoZSl9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7KFwic3JjXCI9PT1lLmZpZWxkfHxcInRyYW5zZm9ybVwiPT09ZS5maWVsZCkmJnRoaXMuZmlsbC5vcHRpb25zQ2hhbmdlKGUpLHEuZm4ub3B0aW9uc0NoYW5nZS5jYWxsKHRoaXMsZSl9LGdlb21ldHJ5Q2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5maWxsLmdlb21ldHJ5Q2hhbmdlKCkscS5mbi5nZW9tZXRyeUNoYW5nZS5jYWxsKHRoaXMpfSxyZWZyZXNoVHJhbnNmb3JtOmZ1bmN0aW9uKGUpe3EuZm4ucmVmcmVzaFRyYW5zZm9ybS5jYWxsKHRoaXMsZSksdGhpcy5maWxsLnJlZnJlc2godGhpcy5zcmNFbGVtZW50LmN1cnJlbnRUcmFuc2Zvcm0oZSkpfX0pLG90PXtHcm91cDpOLFRleHQ6dHQsUGF0aDpxLE11bHRpUGF0aDpZLENpcmNsZTpRLEFyYzpKLEltYWdlOnJ0fTtnLnN1cHBvcnQudm1sPWZ1bmN0aW9uKCl7dmFyIGU9Zy5zdXBwb3J0LmJyb3dzZXI7cmV0dXJuIGUubXNpZSYmOT5lLnZlcnNpb259KCksZD1cImluaGVyaXRcIixnLnN1cHBvcnQuYnJvd3Nlci5tc2llJiY4Pmcuc3VwcG9ydC5icm93c2VyLnZlcnNpb24mJihkPVwicmVjdChhdXRvIGF1dG8gYXV0byBhdXRvKVwiKSxnLnN1cHBvcnQudm1sJiZfLlN1cmZhY2VGYWN0b3J5LmN1cnJlbnQucmVnaXN0ZXIoXCJ2bWxcIixSLDMwKSxtKF8se3ZtbDp7QXJjRGF0YU5vZGU6WCxBcmNOb2RlOkosQ2lyY2xlVHJhbnNmb3JtTm9kZTpLLENpcmNsZU5vZGU6USxGaWxsTm9kZTpVLEdyb3VwTm9kZTpOLEltYWdlTm9kZTpydCxJbWFnZUZpbGxOb2RlOml0LEltYWdlUGF0aERhdGFOb2RlOm50LE11bHRpUGF0aERhdGFOb2RlOiQsTXVsdGlQYXRoTm9kZTpZLE5vZGU6QixQYXRoRGF0YU5vZGU6RyxQYXRoTm9kZTpxLFJvb3ROb2RlOkwsU3Ryb2tlTm9kZTpWLFN1cmZhY2U6UixUZXh0Tm9kZTp0dCxUZXh0UGF0aE5vZGU6ZXQsVGV4dFBhdGhEYXRhTm9kZTpaLFRyYW5zZm9ybU5vZGU6V319KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkoKXtmdW5jdGlvbiBlKCl7dmFyIHQscixvO2Zvcih0PTA7YXJndW1lbnRzLmxlbmd0aD50OysrdCl7aWYocj1hcmd1bWVudHNbdF0scj09PW4pdGhyb3cgRXJyb3IoXCJDYW5ub3Qgb3V0cHV0IHVuZGVmaW5lZCB0byBQREZcIik7aWYociBpbnN0YW5jZW9mIHcpci5iZWZvcmVSZW5kZXIoZSksci5yZW5kZXIoZSk7ZWxzZSBpZihGKHIpKWYocixlKTtlbHNlIGlmKHAocikpZyhyLGUpO2Vsc2UgaWYoXCJudW1iZXJcIj09dHlwZW9mIHIpe2lmKGlzTmFOKHIpKXRocm93IEVycm9yKFwiQ2Fubm90IG91dHB1dCBOYU4gdG8gUERGXCIpO289ci50b0ZpeGVkKDcpLG8uaW5kZXhPZihcIi5cIik+PTAmJihvPW8ucmVwbGFjZSgvXFwuPzArJC8sXCJcIikpLFwiLTBcIj09byYmKG89XCIwXCIpLGkud3JpdGVTdHJpbmcobyl9ZWxzZS9zdHJpbmd8Ym9vbGVhbi8udGVzdCh0eXBlb2Ygcik/aS53cml0ZVN0cmluZyhyK1wiXCIpOlwiZnVuY3Rpb25cIj09dHlwZW9mIHIuZ2V0P2kud3JpdGUoci5nZXQoKSk6XCJvYmplY3RcIj09dHlwZW9mIHImJihyP2UobmV3IEgocikpOmkud3JpdGVTdHJpbmcoXCJudWxsXCIpKX19dmFyIHQ9MCxpPUQoKTtyZXR1cm4gZS53cml0ZURhdGE9ZnVuY3Rpb24oZSl7aS53cml0ZShlKX0sZS53aXRoSW5kZW50PWZ1bmN0aW9uKG4peysrdCxuKGUpLC0tdH0sZS5pbmRlbnQ9ZnVuY3Rpb24oKXtlKFEsZChcIlwiLDIqdCxcIiAgXCIpKSxlLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sZS5vZmZzZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gaS5vZmZzZXQoKX0sZS50b1N0cmluZz1mdW5jdGlvbigpe3Rocm93IEVycm9yKFwiRklYIENBTExFUlwiKX0sZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gaS5nZXQoKX0sZS5zdHJlYW09ZnVuY3Rpb24oKXtyZXR1cm4gaX0sZX1mdW5jdGlvbiByKGUsdCl7dmFyIG49ZS5iZWZvcmVSZW5kZXIsaT1lLnJlbmRlcjtlLmJlZm9yZVJlbmRlcj1mdW5jdGlvbigpe30sZS5yZW5kZXI9ZnVuY3Rpb24oZSl7ZSh0LFwiIDAgUlwiKX0sZS5yZW5kZXJGdWxsPWZ1bmN0aW9uKHIpe2UuX29mZnNldD1yLm9mZnNldCgpLHIodCxcIiAwIG9iaiBcIiksbi5jYWxsKGUsciksaS5jYWxsKGUscikscihcIiBlbmRvYmpcIil9fWZ1bmN0aW9uIG8oZSl7ZnVuY3Rpb24gdCh0LG4pe3JldHVybiBlJiZudWxsIT1lW3RdP2VbdF06bn12YXIgbixvLGEscyxsLGMsZD10aGlzLGg9aSgpLHA9MCxmPVtdO2lmKGQuZ2V0T3B0aW9uPXQsZC5hdHRhY2g9ZnVuY3Rpb24oZSl7cmV0dXJuIGYuaW5kZXhPZihlKTwwJiYocihlLCsrcCksZi5wdXNoKGUpKSxlfSxkLkZPTlRTPXt9LGQuSU1BR0VTPXt9LG49dChcInBhcGVyU2l6ZVwiLFouYTQpLFwic3RyaW5nXCI9PXR5cGVvZiBuJiYobj1aW24udG9Mb3dlckNhc2UoKV0sbnVsbD09bikpdGhyb3cgRXJyb3IoXCJVbmtub3duIHBhcGVyIHNpemVcIik7blswXT15KG5bMF0pLG5bMV09eShuWzFdKSx0KFwibGFuZHNjYXBlXCIsITEpJiYobj1bTWF0aC5tYXgoblswXSxuWzFdKSxNYXRoLm1pbihuWzBdLG5bMV0pXSksbz10KFwibWFyZ2luXCIpLG8mJihvLmxlZnQ9eShvLmxlZnQsMCksby50b3A9eShvLnRvcCwwKSxvLnJpZ2h0PXkoby5yaWdodCwwKSxvLmJvdHRvbT15KG8uYm90dG9tLDApLHQoXCJhZGRNYXJnaW5cIikmJihuWzBdKz1vLmxlZnQrby5yaWdodCxuWzFdKz1vLnRvcCtvLmJvdHRvbSkpLGE9blswXSxzPW5bMV0sbyYmKGEtPW8ubGVmdCtvLnJpZ2h0LHMtPW8udG9wK28uYm90dG9tKSxsPWQuYXR0YWNoKG5ldyBWKSxjPWQuYXR0YWNoKG5ldyBVKFswLDAsblswXSxuWzFdXSkpLGwuc2V0UGFnZXMoYyksZC5hZGRQYWdlPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IE4oaSgpLG51bGwsITApLHQ9bmV3IHEoZCx7Q29udGVudHM6ZC5hdHRhY2goZSksUGFyZW50OmN9KTtyZXR1cm4gdC5fY29udGVudD1lLGMuYWRkUGFnZShkLmF0dGFjaCh0KSksdC50cmFuc2Zvcm0oMSwwLDAsLTEsMCxuWzFdKSxvJiYodC50cmFuc2xhdGUoby5sZWZ0LG8udG9wKSx0LnJlY3QoMCwwLGEscyksdC5jbGlwKCkpLHR9LGQucmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGUsbjtmb3IoaChcIiVQREYtMS40XCIsUSxcIiXDgsOBw5rDj8OOXCIsUSxRKSxlPTA7Zi5sZW5ndGg+ZTsrK2UpZltlXS5yZW5kZXJGdWxsKGgpLGgoUSxRKTtmb3Iobj1oLm9mZnNldCgpLGgoXCJ4cmVmXCIsUSwwLFwiIFwiLGYubGVuZ3RoKzEsUSksaChcIjAwMDAwMDAwMDAgNjU1MzUgZiBcIixRKSxlPTA7Zi5sZW5ndGg+ZTsrK2UpaCh1KGZbZV0uX29mZnNldCwxMCksXCIgMDAwMDAgbiBcIixRKTtyZXR1cm4gaChRKSxoKFwidHJhaWxlclwiLFEpLGgobmV3IEgoe1NpemU6Zi5sZW5ndGgrMSxSb290OmwsSW5mbzpuZXcgSCh7UHJvZHVjZXI6bmV3IFIoXCJLZW5kbyBVSSBQREYgR2VuZXJhdG9yXCIpLFRpdGxlOm5ldyBSKHQoXCJ0aXRsZVwiLFwiXCIpKSxBdXRob3I6bmV3IFIodChcImF1dGhvclwiLFwiXCIpKSxTdWJqZWN0Om5ldyBSKHQoXCJzdWJqZWN0XCIsXCJcIikpLEtleXdvcmRzOm5ldyBSKHQoXCJrZXl3b3Jkc1wiLFwiXCIpKSxDcmVhdG9yOm5ldyBSKHQoXCJjcmVhdG9yXCIsXCJLZW5kbyBVSSBQREYgR2VuZXJhdG9yXCIpKSxDcmVhdGlvbkRhdGU6dChcImRhdGVcIixuZXcgRGF0ZSl9KX0pLFEsUSksaChcInN0YXJ0eHJlZlwiLFEsbixRKSxoKFwiJSVFT0ZcIixRKSxoLnN0cmVhbSgpLm9mZnNldCgwKX19ZnVuY3Rpb24gYSh0LG4pe2Z1bmN0aW9uIGkoKXtlLmNvbnNvbGUmJihlLmNvbnNvbGUuZXJyb3I/ZS5jb25zb2xlLmVycm9yKFwiQ2Fubm90IGxvYWQgVVJMOiAlc1wiLHQpOmUuY29uc29sZS5sb2coXCJDYW5ub3QgbG9hZCBVUkw6ICVzXCIsdCkpLG4obnVsbCl9dmFyIHI9bmV3IFhNTEh0dHBSZXF1ZXN0O3Iub3BlbihcIkdFVFwiLHQsITApLEsmJihyLnJlc3BvbnNlVHlwZT1cImFycmF5YnVmZmVyXCIpLHIub25sb2FkPWZ1bmN0aW9uKCl7MjAwPT1yLnN0YXR1c3x8MzA0PT1yLnN0YXR1cz9uKEs/bmV3IFVpbnQ4QXJyYXkoci5yZXNwb25zZSk6bmV3IFZCQXJyYXkoci5yZXNwb25zZUJvZHkpLnRvQXJyYXkoKSk6aSgpfSxyLm9uZXJyb3I9aSxyLnNlbmQobnVsbCl9ZnVuY3Rpb24gcyhlLHQpe3ZhciBuPWV0W2VdO24/dChuKTphKGUsZnVuY3Rpb24obil7aWYobnVsbD09bil0aHJvdyBFcnJvcihcIkNhbm5vdCBsb2FkIGZvbnQgZnJvbSBcIitlKTt2YXIgaT1uZXcgWS5wZGYuVFRGRm9udChuKTtldFtlXT1pLHQoaSl9KX1mdW5jdGlvbiBsKGUsdCl7dmFyIGk9dHRbZV07aT90KGkpOihpPW5ldyBJbWFnZSxpLm9ubG9hZD1mdW5jdGlvbigpe3ZhciBuLHIsbyxhLHMsbCxjLGQsdSxoLHA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtwLndpZHRoPWkud2lkdGgscC5oZWlnaHQ9aS5oZWlnaHQsbj1wLmdldENvbnRleHQoXCIyZFwiKSxuLmRyYXdJbWFnZShpLDAsMCk7dHJ5e3I9bi5nZXRJbWFnZURhdGEoMCwwLGkud2lkdGgsaS5oZWlnaHQpfWNhdGNoKGYpe3JldHVybiB0KHR0W2VdPVwiVEFJTlRFRFwiKX1mb3Iobz0hMSxhPUQoKSxzPUQoKSxsPXIuZGF0YSxjPTA7bC5sZW5ndGg+YzspYS53cml0ZUJ5dGUobFtjKytdKSxhLndyaXRlQnl0ZShsW2MrK10pLGEud3JpdGVCeXRlKGxbYysrXSksZD1sW2MrK10sMjU1PmQmJihvPSEwKSxzLndyaXRlQnl0ZShkKTtvP2k9bmV3IEMoaS53aWR0aCxpLmhlaWdodCxhLHMpOih1PXAudG9EYXRhVVJMKFwiaW1hZ2UvanBlZ1wiKSx1PXUuc3Vic3RyKHUuaW5kZXhPZihcIjtiYXNlNjQsXCIpKzgpLGg9RCgpLGgud3JpdGVCYXNlNjQodSksaC5vZmZzZXQoMCksaT1uZXcgeChpLndpZHRoLGkuaGVpZ2h0LGgpKSx0KHR0W2VdPWkpfSxpLm9uZXJyb3I9ZnVuY3Rpb24oKXt0KHR0W2VdPVwiVEFJTlRFRFwiKX0saS5jcm9zc09yaWdpbj1cIkFub255bW91c1wiLGkuc3JjPWUsKGkuY29tcGxldGV8fGkuY29tcGxldGU9PT1uKSYmKGkuc3JjPVwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95d0FBQUFBQVFBQkFBQUNBVXdBT3c9PVwiLGkuc3JjPWUpKX1mdW5jdGlvbiBjKGUpe3JldHVybiBmdW5jdGlvbih0LG4pe3ZhciBpPXQubGVuZ3RoLHI9aTtpZigwPT09aSlyZXR1cm4gbigpO2Zvcig7ci0tPjA7KWUodFtyXSxmdW5jdGlvbigpezA9PT0tLWkmJm4oKX0pfX1mdW5jdGlvbiBkKGUsdCxuKXtmb3IoO3Q+ZS5sZW5ndGg7KWU9bitlO3JldHVybiBlfWZ1bmN0aW9uIHUoZSx0KXtyZXR1cm4gZChlK1wiXCIsdCxcIjBcIil9ZnVuY3Rpb24gaChlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX1mdW5jdGlvbiBwKGUpe3JldHVybiBlIGluc3RhbmNlb2YgRGF0ZX1mdW5jdGlvbiBmKGUsdCl7dChcIltcIiksZS5sZW5ndGg+MCYmdC53aXRoSW5kZW50KGZ1bmN0aW9uKCl7Zm9yKHZhciBuPTA7ZS5sZW5ndGg+bjsrK24pbj4wJiZuJTg9PT0wP3QuaW5kZW50KGVbbl0pOnQoXCIgXCIsZVtuXSl9KSx0KFwiIF1cIil9ZnVuY3Rpb24gZyhlLHQpe3QoXCIoRDpcIix1KGUuZ2V0VVRDRnVsbFllYXIoKSw0KSx1KGUuZ2V0VVRDTW9udGgoKSsxLDIpLHUoZS5nZXRVVENEYXRlKCksMiksdShlLmdldFVUQ0hvdXJzKCksMiksdShlLmdldFVUQ01pbnV0ZXMoKSwyKSx1KGUuZ2V0VVRDU2Vjb25kcygpLDIpLFwiWilcIil9ZnVuY3Rpb24gbShlKXtyZXR1cm4gZSooNzIvMjUuNCl9ZnVuY3Rpb24gdihlKXtyZXR1cm4gbSgxMCplKX1mdW5jdGlvbiBfKGUpe3JldHVybiA3MiplfWZ1bmN0aW9uIHkoZSxuKXt2YXIgaSxyO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlKXJldHVybiBlO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlJiYoaT0vXlxccyooWzAtOS5dKylcXHMqKG1tfGNtfGlufHB0KVxccyokLy5leGVjKGUpLGkmJihyPXQoaVsxXSksIWlzTmFOKHIpKSkpcmV0dXJuXCJwdFwiPT1pWzJdP3I6e21tOm0sY206dixcImluXCI6X31baVsyXV0ocik7aWYobnVsbCE9bilyZXR1cm4gbjt0aHJvdyBFcnJvcihcIkNhbid0IHBhcnNlIHVuaXQ6IFwiK2UpfWZ1bmN0aW9uIHcoKXt9ZnVuY3Rpb24gYihlLHQsbil7bnx8KG49dyksZS5wcm90b3R5cGU9bmV3IG47Zm9yKHZhciBpIGluIHQpaCh0LGkpJiYoZS5wcm90b3R5cGVbaV09dFtpXSk7cmV0dXJuIGV9ZnVuY3Rpb24gayhlKXtyZXR1cm4gaChPLGUpP09bZV06T1tlXT1uZXcgTChlKX1mdW5jdGlvbiB4KGUsdCxuKXt0aGlzLmFzU3RyZWFtPWZ1bmN0aW9uKCl7dmFyIGk9bmV3IE4obix7VHlwZTprKFwiWE9iamVjdFwiKSxTdWJ0eXBlOmsoXCJJbWFnZVwiKSxXaWR0aDplLEhlaWdodDp0LEJpdHNQZXJDb21wb25lbnQ6OCxDb2xvclNwYWNlOmsoXCJEZXZpY2VSR0JcIiksRmlsdGVyOmsoXCJEQ1REZWNvZGVcIil9KTtyZXR1cm4gaS5fcmVzb3VyY2VOYW1lPWsoXCJJXCIrICsrWCksaX19ZnVuY3Rpb24gQyhlLHQsbixpKXt0aGlzLmFzU3RyZWFtPWZ1bmN0aW9uKHIpe3ZhciBvPW5ldyBOKGkse1R5cGU6ayhcIlhPYmplY3RcIiksU3VidHlwZTprKFwiSW1hZ2VcIiksV2lkdGg6ZSxIZWlnaHQ6dCxCaXRzUGVyQ29tcG9uZW50OjgsQ29sb3JTcGFjZTprKFwiRGV2aWNlR3JheVwiKX0sITApLGE9bmV3IE4obix7VHlwZTprKFwiWE9iamVjdFwiKSxTdWJ0eXBlOmsoXCJJbWFnZVwiKSxXaWR0aDplLEhlaWdodDp0LEJpdHNQZXJDb21wb25lbnQ6OCxDb2xvclNwYWNlOmsoXCJEZXZpY2VSR0JcIiksU01hc2s6ci5hdHRhY2gobyl9LCEwKTtyZXR1cm4gYS5fcmVzb3VyY2VOYW1lPWsoXCJJXCIrICsrWCksYX19ZnVuY3Rpb24gUyhlKXtmdW5jdGlvbiB0KGUpe3JldHVybiAxPT1lLmxlbmd0aD9lWzBdOntGdW5jdGlvblR5cGU6MyxGdW5jdGlvbnM6ZSxEb21haW46WzAsMV0sQm91bmRzOmQsRW5jb2RlOnV9fXZhciBuLGkscixvLGEscz0hMSxsPVtdLGM9W10sZD1bXSx1PVtdO2ZvcihuPTE7ZS5sZW5ndGg+bjsrK24paT1lW24tMV0scj1lW25dLG89aS5jb2xvcixhPXIuY29sb3IsYy5wdXNoKHtGdW5jdGlvblR5cGU6MixEb21haW46WzAsMV0sUmFuZ2U6WzAsMSwwLDEsMCwxXSxOOjEsQzA6W28ucixvLmcsby5iXSxDMTpbYS5yLGEuZyxhLmJdfSksbC5wdXNoKHtGdW5jdGlvblR5cGU6MixEb21haW46WzAsMV0sUmFuZ2U6WzAsMV0sTjoxLEMwOltvLmFdLEMxOlthLmFdfSksKDE+by5hfHwxPmEuYSkmJihzPSEwKSxkLnB1c2goci5vZmZzZXQpLHUucHVzaCgwLDEpO3JldHVybiBkLnBvcCgpLHtoYXNBbHBoYTpzLGNvbG9yczp0KGMpLG9wYWNpdGllczpzP3QobCk6bnVsbH19ZnVuY3Rpb24gVChlLHQsbil7dmFyIGk9XCJyYWRpYWxcIj09dC50eXBlLHI9Uyh0LnN0b3BzKSxvPWk/W3Quc3RhcnQueCx0LnN0YXJ0LnksdC5zdGFydC5yLHQuZW5kLngsdC5lbmQueSx0LmVuZC5yXTpbdC5zdGFydC54LHQuc3RhcnQueSx0LmVuZC54LHQuZW5kLnldLGE9e1R5cGU6ayhcIlNoYWRpbmdcIiksU2hhZGluZ1R5cGU6aT8zOjIsQ29sb3JTcGFjZTprKFwiRGV2aWNlUkdCXCIpLENvb3JkczpvLERvbWFpbjpbMCwxXSxGdW5jdGlvbjpyLmNvbG9ycyxFeHRlbmQ6WyEwLCEwXX0scz1yLmhhc0FscGhhP3tUeXBlOmsoXCJFeHRHU3RhdGVcIiksQUlTOiExLENBOjEsY2E6MSxTTWFzazp7VHlwZTprKFwiTWFza1wiKSxTOmsoXCJMdW1pbm9zaXR5XCIpLEc6ZS5hdHRhY2gobmV3IE4oXCIvYTAgZ3MgL3MwIHNoXCIse1R5cGU6ayhcIlhPYmplY3RcIiksU3VidHlwZTprKFwiRm9ybVwiKSxGb3JtVHlwZToxLEJCb3g6dC51c2VyU3BhY2U/W24ubGVmdCxuLnRvcCtuLmhlaWdodCxuLmxlZnQrbi53aWR0aCxuLnRvcF06WzAsMSwxLDBdLEdyb3VwOntUeXBlOmsoXCJHcm91cFwiKSxTOmsoXCJUcmFuc3BhcmVuY3lcIiksQ1M6ayhcIkRldmljZUdyYXlcIiksSTohMH0sUmVzb3VyY2VzOntFeHRHU3RhdGU6e2EwOntDQToxLGNhOjF9fSxTaGFkaW5nOntzMDp7Q29sb3JTcGFjZTprKFwiRGV2aWNlR3JheVwiKSxDb29yZHM6byxEb21haW46WzAsMV0sU2hhZGluZ1R5cGU6aT8zOjIsRnVuY3Rpb246ci5vcGFjaXRpZXMsRXh0ZW5kOlshMCwhMF19fX19KSl9fTpudWxsO3JldHVybntoYXNBbHBoYTpyLmhhc0FscGhhLHNoYWRpbmc6bmV3IEgoYSksb3BhY2l0eTpuZXcgSChzKX19ZnVuY3Rpb24gRChlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIFM+PVR9ZnVuY3Rpb24gbigpe3JldHVybiBUPlM/ZVtTKytdOjB9ZnVuY3Rpb24gaSh0KXt3KFMpLGVbUysrXT0yNTUmdCxTPlQmJihUPVMpfWZ1bmN0aW9uIHIoKXtyZXR1cm4gbigpPDw4fG4oKX1mdW5jdGlvbiBvKGUpe2koZT4+OCksaShlKX1mdW5jdGlvbiBhKCl7dmFyIGU9cigpO3JldHVybiBlPj0zMjc2OD9lLTY1NTM2OmV9ZnVuY3Rpb24gcyhlKXtvKDA+ZT9lKzY1NTM2OmUpfWZ1bmN0aW9uIGwoKXtyZXR1cm4gNjU1MzYqcigpK3IoKX1mdW5jdGlvbiBjKGUpe28oZT4+PjE2JjY1NTM1KSxvKDY1NTM1JmUpfWZ1bmN0aW9uIGQoKXt2YXIgZT1sKCk7cmV0dXJuIGU+PTIxNDc0ODM2NDg/ZS00Mjk0OTY3Mjk2OmV9ZnVuY3Rpb24gdShlKXtjKDA+ZT9lKzQyOTQ5NjcyOTY6ZSl9ZnVuY3Rpb24gaCgpe3JldHVybiBsKCkvNjU1MzZ9ZnVuY3Rpb24gcChlKXtjKE1hdGgucm91bmQoNjU1MzYqZSkpfWZ1bmN0aW9uIGYoKXtyZXR1cm4gZCgpLzY1NTM2fWZ1bmN0aW9uIGcoZSl7dShNYXRoLnJvdW5kKDY1NTM2KmUpKX1mdW5jdGlvbiBtKGUpe3JldHVybiB5KGUsbil9ZnVuY3Rpb24gdihlKXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsbShlKSl9ZnVuY3Rpb24gXyhlKXtmb3IodmFyIHQ9MDtlLmxlbmd0aD50OysrdClpKGUuY2hhckNvZGVBdCh0KSl9ZnVuY3Rpb24geShlLHQpe2Zvcih2YXIgbj1BcnJheShlKSxpPTA7ZT5pOysraSluW2ldPXQoKTtyZXR1cm4gbn12YXIgdyxiLGsseCxDLFM9MCxUPTA7cmV0dXJuIG51bGw9PWU/ZT1LP25ldyBVaW50OEFycmF5KDI1Nik6W106VD1lLmxlbmd0aCx3PUs/ZnVuY3Rpb24odCl7aWYodD49ZS5sZW5ndGgpe3ZhciBuPW5ldyBVaW50OEFycmF5KE1hdGgubWF4KHQrMjU2LDIqZS5sZW5ndGgpKTtuLnNldChlLDApLGU9bn19OmZ1bmN0aW9uKCl7fSxiPUs/ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoZS5idWZmZXIsMCxUKX06ZnVuY3Rpb24oKXtyZXR1cm4gZX0saz1LP2Z1bmN0aW9uKHQpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXJldHVybiBfKHQpO3ZhciBuPXQubGVuZ3RoO3coUytuKSxlLnNldCh0LFMpLFMrPW4sUz5UJiYoVD1TKX06ZnVuY3Rpb24oZSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpcmV0dXJuIF8oZSk7XHJcbmZvcih2YXIgdD0wO2UubGVuZ3RoPnQ7Kyt0KWkoZVt0XSl9LHg9Sz9mdW5jdGlvbih0LG4pe2lmKGUuYnVmZmVyLnNsaWNlKXJldHVybiBuZXcgVWludDhBcnJheShlLmJ1ZmZlci5zbGljZSh0LHQrbikpO3ZhciBpPW5ldyBVaW50OEFycmF5KG4pO3JldHVybiBpLnNldChuZXcgVWludDhBcnJheShlLmJ1ZmZlcix0LG4pKSxpfTpmdW5jdGlvbih0LG4pe3JldHVybiBlLnNsaWNlKHQsdCtuKX0sQz17ZW9mOnQscmVhZEJ5dGU6bix3cml0ZUJ5dGU6aSxyZWFkU2hvcnQ6cix3cml0ZVNob3J0Om8scmVhZExvbmc6bCx3cml0ZUxvbmc6YyxyZWFkRml4ZWQ6aCx3cml0ZUZpeGVkOnAscmVhZFNob3J0XzphLHdyaXRlU2hvcnRfOnMscmVhZExvbmdfOmQsd3JpdGVMb25nXzp1LHJlYWRGaXhlZF86Zix3cml0ZUZpeGVkXzpnLHJlYWQ6bSx3cml0ZTprLHJlYWRTdHJpbmc6dix3cml0ZVN0cmluZzpfLHRpbWVzOnksZ2V0OmIsc2xpY2U6eCxvZmZzZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWU/KFM9ZSxDKTpTfSxza2lwOmZ1bmN0aW9uKGUpe1MrPWV9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoXCJGSVggQ0FMTEVSLiAgQmluYXJ5U3RyZWFtIGlzIG5vIGxvbmdlciBjb252ZXJ0aWJsZSB0byBzdHJpbmchXCIpfSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gVH0sc2F2ZUV4Y3Vyc2lvbjpmdW5jdGlvbihlKXt2YXIgdD1TO3RyeXtyZXR1cm4gZSgpfWZpbmFsbHl7Uz10fX0sd3JpdGVCYXNlNjQ6ZnVuY3Rpb24oZSl7d2luZG93LmF0b2I/Xyh3aW5kb3cuYXRvYihlKSk6ayhKLmRlY29kZShlKSl9LGJhc2U2NDpmdW5jdGlvbigpe3JldHVybiBKLmVuY29kZShiKCkpfX19ZnVuY3Rpb24gQShlKXtyZXR1cm4gZS5yZXBsYWNlKC9eXFxzKihbJ1wiXSkoLiopXFwxXFxzKiQvLFwiJDJcIil9ZnVuY3Rpb24gRShlKXt2YXIgdCxuPS9eXFxzKigobm9ybWFsfGl0YWxpYylcXHMrKT8oKG5vcm1hbHxzbWFsbC1jYXBzKVxccyspPygobm9ybWFsfGJvbGR8XFxkKylcXHMrKT8oKFswLTkuXSspKHB4fHB0KSkoXFwvKChbMC05Ll0rKShweHxwdCl8bm9ybWFsKSk/XFxzKyguKj8pXFxzKiQvaSxpPW4uZXhlYyhlKTtyZXR1cm4gaT8odD1pWzhdP3BhcnNlSW50KGlbOF0sMTApOjEyLHtpdGFsaWM6aVsyXSYmXCJpdGFsaWNcIj09aVsyXS50b0xvd2VyQ2FzZSgpLHZhcmlhbnQ6aVs0XSxib2xkOmlbNl0mJi9ib2xkfDcwMC9pLnRlc3QoaVs2XSksZm9udFNpemU6dCxsaW5lSGVpZ2h0OmlbMTJdP1wibm9ybWFsXCI9PWlbMTJdP3Q6cGFyc2VJbnQoaVsxMl0sMTApOm51bGwsZm9udEZhbWlseTppWzE0XS5zcGxpdCgvXFxzKixcXHMqL2cpLm1hcChBKX0pOntmb250U2l6ZToxMixmb250RmFtaWx5Olwic2Fucy1zZXJpZlwifX1mdW5jdGlvbiBNKGUpe2Z1bmN0aW9uIHQodCl7cmV0dXJuIGUuYm9sZCYmKHQrPVwifGJvbGRcIiksZS5pdGFsaWMmJih0Kz1cInxpdGFsaWNcIiksdC50b0xvd2VyQ2FzZSgpfXZhciBuLGkscixvPWUuZm9udEZhbWlseTtpZihvIGluc3RhbmNlb2YgQXJyYXkpe2ZvcihyPTA7by5sZW5ndGg+cjsrK3IpaWYobj10KG9bcl0pLGk9JFtuXSlyZXR1cm4gaX1lbHNlIGk9JFtvLnRvTG93ZXJDYXNlKCldO3JldHVybiBpfHwoaT1cIlRpbWVzLVJvbWFuXCIpLGl9ZnVuY3Rpb24gUChlLHQpe2lmKDE9PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciBuIGluIGUpUChuLGVbbl0pO2Vsc2UgZT1lLnRvTG93ZXJDYXNlKCksJFtlXT10fWZ1bmN0aW9uIEkoZSx0KXt2YXIgbj1lWzBdLGk9ZVsxXSxyPWVbMl0sbz1lWzNdLGE9ZVs0XSxzPWVbNV0sbD10WzBdLGM9dFsxXSxkPXRbMl0sdT10WzNdLGg9dFs0XSxwPXRbNV07cmV0dXJuW24qbCtpKmQsbipjK2kqdSxyKmwrbypkLHIqYytvKnUsYSpsK3MqZCtoLGEqYytzKnUrcF19ZnVuY3Rpb24geihlKXtyZXR1cm4gMT09PWVbMF0mJjA9PT1lWzFdJiYwPT09ZVsyXSYmMT09PWVbM10mJjA9PT1lWzRdJiYwPT09ZVs1XX12YXIgRixSLEIsTCxPLEgsTixWLFUsVyxqLEcscSwkLFk9ZS5rZW5kbyxLPSEhZS5VaW50OEFycmF5LFE9XCJcXG5cIixYPTAsSj1mdW5jdGlvbigpe3ZhciBlPVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cIjtyZXR1cm57ZGVjb2RlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgbixpLHIsbyxhLHMsbCxjPXQucmVwbGFjZSgvW15BLVphLXowLTlcXCtcXC9cXD1dL2csXCJcIiksZD0wLHU9Yy5sZW5ndGgsaD1bXTt1PmQ7KW49ZS5pbmRleE9mKGMuY2hhckF0KGQrKykpLGk9ZS5pbmRleE9mKGMuY2hhckF0KGQrKykpLHI9ZS5pbmRleE9mKGMuY2hhckF0KGQrKykpLG89ZS5pbmRleE9mKGMuY2hhckF0KGQrKykpLGE9bjw8MnxpPj4+NCxzPSgxNSZpKTw8NHxyPj4+MixsPSgzJnIpPDw2fG8saC5wdXNoKGEpLDY0IT1yJiZoLnB1c2gocyksNjQhPW8mJmgucHVzaChsKTtyZXR1cm4gaH0sZW5jb2RlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgbixpLHIsbyxhLHMsbCxjPTAsZD10Lmxlbmd0aCx1PVwiXCI7ZD5jOyluPXRbYysrXSxpPXRbYysrXSxyPXRbYysrXSxvPW4+Pj4yLGE9KDMmbik8PDR8aT4+PjQscz0oMTUmaSk8PDJ8cj4+PjYsbD02MyZyLGMtZD09Mj9zPWw9NjQ6Yy1kPT0xJiYobD02NCksdSs9ZS5jaGFyQXQobykrZS5jaGFyQXQoYSkrZS5jaGFyQXQocykrZS5jaGFyQXQobCk7cmV0dXJuIHV9fX0oKSxaPXthMDpbMjM4My45NCwzMzcwLjM5XSxhMTpbMTY4My43OCwyMzgzLjk0XSxhMjpbMTE5MC41NSwxNjgzLjc4XSxhMzpbODQxLjg5LDExOTAuNTVdLGE0Ols1OTUuMjgsODQxLjg5XSxhNTpbNDE5LjUzLDU5NS4yOF0sYTY6WzI5Ny42NCw0MTkuNTNdLGE3OlsyMDkuNzYsMjk3LjY0XSxhODpbMTQ3LjQsMjA5Ljc2XSxhOTpbMTA0Ljg4LDE0Ny40XSxhMTA6WzczLjcsMTA0Ljg4XSxiMDpbMjgzNC42NSw0MDA4LjE5XSxiMTpbMjAwNC4wOSwyODM0LjY1XSxiMjpbMTQxNy4zMiwyMDA0LjA5XSxiMzpbMTAwMC42MywxNDE3LjMyXSxiNDpbNzA4LjY2LDEwMDAuNjNdLGI1Ols0OTguOSw3MDguNjZdLGI2OlszNTQuMzMsNDk4LjldLGI3OlsyNDkuNDUsMzU0LjMzXSxiODpbMTc1Ljc1LDI0OS40NV0sYjk6WzEyNC43MiwxNzUuNzVdLGIxMDpbODcuODcsMTI0LjcyXSxjMDpbMjU5OS4zNywzNjc2LjU0XSxjMTpbMTgzNi44NSwyNTk5LjM3XSxjMjpbMTI5OC4yNywxODM2Ljg1XSxjMzpbOTE4LjQzLDEyOTguMjddLGM0Ols2NDkuMTMsOTE4LjQzXSxjNTpbNDU5LjIxLDY0OS4xM10sYzY6WzMyMy4xNSw0NTkuMjFdLGM3OlsyMjkuNjEsMzIzLjE1XSxjODpbMTYxLjU3LDIyOS42MV0sYzk6WzExMy4zOSwxNjEuNTddLGMxMDpbNzkuMzcsMTEzLjM5XSxleGVjdXRpdmU6WzUyMS44Niw3NTZdLGZvbGlvOls2MTIsOTM2XSxsZWdhbDpbNjEyLDEwMDhdLGxldHRlcjpbNjEyLDc5Ml0sdGFibG9pZDpbNzkyLDEyMjRdfSxldD17XCJUaW1lcy1Sb21hblwiOiEwLFwiVGltZXMtQm9sZFwiOiEwLFwiVGltZXMtSXRhbGljXCI6ITAsXCJUaW1lcy1Cb2xkSXRhbGljXCI6ITAsSGVsdmV0aWNhOiEwLFwiSGVsdmV0aWNhLUJvbGRcIjohMCxcIkhlbHZldGljYS1PYmxpcXVlXCI6ITAsXCJIZWx2ZXRpY2EtQm9sZE9ibGlxdWVcIjohMCxDb3VyaWVyOiEwLFwiQ291cmllci1Cb2xkXCI6ITAsXCJDb3VyaWVyLU9ibGlxdWVcIjohMCxcIkNvdXJpZXItQm9sZE9ibGlxdWVcIjohMCxTeW1ib2w6ITAsWmFwZkRpbmdiYXRzOiEwfSx0dD17fSxudD1jKHMpLGl0PWMobCk7by5wcm90b3R5cGU9e2xvYWRGb250czpudCxsb2FkSW1hZ2VzOml0LGdldEZvbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5GT05UU1tlXTtpZighdCl7aWYodD1ldFtlXSwhdCl0aHJvdyBFcnJvcihcIkZvbnQgXCIrZStcIiBoYXMgbm90IGJlZW4gbG9hZGVkXCIpO3Q9dGhpcy5hdHRhY2godD09PSEwP25ldyBXKGUpOm5ldyBqKHRoaXMsdCkpLHRoaXMuRk9OVFNbZV09dH1yZXR1cm4gdH0sZ2V0SW1hZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5JTUFHRVNbZV07aWYoIXQpe2lmKHQ9dHRbZV0sIXQpdGhyb3cgRXJyb3IoXCJJbWFnZSBcIitlK1wiIGhhcyBub3QgYmVlbiBsb2FkZWRcIik7aWYoXCJUQUlOVEVEXCI9PT10KXJldHVybiBudWxsO3Q9dGhpcy5JTUFHRVNbZV09dGhpcy5hdHRhY2godC5hc1N0cmVhbSh0aGlzKSl9cmV0dXJuIHR9LGdldE9wYWNpdHlHUzpmdW5jdGlvbihlLG4pe3ZhciBpLHIsbyxhPXQoZSkudG9GaXhlZCgzKTtyZXR1cm4gZT10KGEpLGErPW4/XCJTXCI6XCJGXCIsaT10aGlzLl9vcGFjaXR5R1NDYWNoZXx8KHRoaXMuX29wYWNpdHlHU0NhY2hlPXt9KSxyPWlbYV0scnx8KG89e1R5cGU6ayhcIkV4dEdTdGF0ZVwiKX0sbj9vLkNBPWU6by5jYT1lLHI9dGhpcy5hdHRhY2gobmV3IEgobykpLHIuX3Jlc291cmNlTmFtZT1rKFwiR1NcIisgKytYKSxpW2FdPXIpLHJ9LGRpY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBIKGUpfSxuYW1lOmZ1bmN0aW9uKGUpe3JldHVybiBrKGUpfSxzdHJlYW06ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IE4odCxlKX19LEY9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBBcnJheX0sdy5wcm90b3R5cGUuYmVmb3JlUmVuZGVyPWZ1bmN0aW9uKCl7fSxSPWIoZnVuY3Rpb24oZSl7dGhpcy52YWx1ZT1lfSx7cmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG49XCJcIixpPXRoaXMuZXNjYXBlKCk7Zm9yKHQ9MDtpLmxlbmd0aD50OysrdCluKz1TdHJpbmcuZnJvbUNoYXJDb2RlKDI1NSZpLmNoYXJDb2RlQXQodCkpO2UoXCIoXCIsbixcIilcIil9LGVzY2FwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlLnJlcGxhY2UoLyhbXFwoXFwpXFxcXF0pL2csXCJcXFxcJDFcIil9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWV9fSksQj1iKGZ1bmN0aW9uKGUpe3RoaXMudmFsdWU9ZX0se3JlbmRlcjpmdW5jdGlvbihlKXtlKFwiPFwiKTtmb3IodmFyIHQ9MDt0aGlzLnZhbHVlLmxlbmd0aD50OysrdCllKHUodGhpcy52YWx1ZS5jaGFyQ29kZUF0KHQpLnRvU3RyaW5nKDE2KSw0KSk7ZShcIj5cIil9fSxSKSxMPWIoZnVuY3Rpb24oZSl7dGhpcy5uYW1lPWV9LHtyZW5kZXI6ZnVuY3Rpb24oZSl7ZShcIi9cIit0aGlzLmVzY2FwZSgpKX0sZXNjYXBlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZS5yZXBsYWNlKC9bXlxceDIxLVxceDdFXS9nLGZ1bmN0aW9uKGUpe3JldHVyblwiI1wiK3UoZS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSwyKX0pfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5hbWV9fSksTz17fSxMLmdldD1rLEg9YihmdW5jdGlvbihlKXt0aGlzLnByb3BzPWV9LHtyZW5kZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wcm9wcyxuPSEwO2UoXCI8PFwiKSxlLndpdGhJbmRlbnQoZnVuY3Rpb24oKXtmb3IodmFyIGkgaW4gdCloKHQsaSkmJiEvXl8vLnRlc3QoaSkmJihuPSExLGUuaW5kZW50KGsoaSksXCIgXCIsdFtpXSkpfSksbnx8ZS5pbmRlbnQoKSxlKFwiPj5cIil9fSksTj1iKGZ1bmN0aW9uKGUsdCxuKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl7dmFyIGk9RCgpO2kud3JpdGUoZSksZT1pfXRoaXMuZGF0YT1lLHRoaXMucHJvcHM9dHx8e30sdGhpcy5jb21wcmVzcz1ufSx7cmVuZGVyOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMuZGF0YS5nZXQoKSxpPXRoaXMucHJvcHM7dGhpcy5jb21wcmVzcyYmZS5wYWtvJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnBha28uZGVmbGF0ZSYmKGkuRmlsdGVyP2kuRmlsdGVyIGluc3RhbmNlb2YgQXJyYXl8fChpLkZpbHRlcj1baS5GaWx0ZXJdKTppLkZpbHRlcj1bXSxpLkZpbHRlci51bnNoaWZ0KGsoXCJGbGF0ZURlY29kZVwiKSksbj1lLnBha28uZGVmbGF0ZShuKSksaS5MZW5ndGg9bi5sZW5ndGgsdChuZXcgSChpKSxcIiBzdHJlYW1cIixRKSx0LndyaXRlRGF0YShuKSx0KFEsXCJlbmRzdHJlYW1cIil9fSksVj1iKGZ1bmN0aW9uKGUpe2U9dGhpcy5wcm9wcz1lfHx7fSxlLlR5cGU9ayhcIkNhdGFsb2dcIil9LHtzZXRQYWdlczpmdW5jdGlvbihlKXt0aGlzLnByb3BzLlBhZ2VzPWV9fSxIKSxVPWIoZnVuY3Rpb24oZSl7dGhpcy5wcm9wcz17VHlwZTprKFwiUGFnZXNcIiksS2lkczpbXSxDb3VudDowLE1lZGlhQm94OmV9fSx7YWRkUGFnZTpmdW5jdGlvbihlKXt0aGlzLnByb3BzLktpZHMucHVzaChlKSx0aGlzLnByb3BzLkNvdW50Kyt9fSxIKSxXPWIoZnVuY3Rpb24oZSl7dGhpcy5wcm9wcz17VHlwZTprKFwiRm9udFwiKSxTdWJ0eXBlOmsoXCJUeXBlMVwiKSxCYXNlRm9udDprKGUpfSx0aGlzLl9yZXNvdXJjZU5hbWU9ayhcIkZcIisgKytYKX0se2VuY29kZVRleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBSKGUrXCJcIil9fSxIKSxqPWIoZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI7bj10aGlzLnByb3BzPW58fHt9LG4uVHlwZT1rKFwiRm9udFwiKSxuLlN1YnR5cGU9ayhcIlR5cGUwXCIpLG4uRW5jb2Rpbmc9ayhcIklkZW50aXR5LUhcIiksdGhpcy5fcGRmPWUsdGhpcy5fZm9udD10LHRoaXMuX3N1Yj10Lm1ha2VTdWJzZXQoKSx0aGlzLl9yZXNvdXJjZU5hbWU9ayhcIkZcIisgKytYKSxpPXQuaGVhZCx0aGlzLm5hbWU9dC5wc05hbWUscj10aGlzLnNjYWxlPXQuc2NhbGUsdGhpcy5iYm94PVtpLnhNaW4qcixpLnlNaW4qcixpLnhNYXgqcixpLnlNYXgqcl0sdGhpcy5pdGFsaWNBbmdsZT10LnBvc3QuaXRhbGljQW5nbGUsdGhpcy5hc2NlbnQ9dC5hc2NlbnQqcix0aGlzLmRlc2NlbnQ9dC5kZXNjZW50KnIsdGhpcy5saW5lR2FwPXQubGluZUdhcCpyLHRoaXMuY2FwSGVpZ2h0PXQub3MyLmNhcEhlaWdodHx8dGhpcy5hc2NlbnQsdGhpcy54SGVpZ2h0PXQub3MyLnhIZWlnaHR8fDAsdGhpcy5zdGVtVj0wLHRoaXMuZmFtaWx5Q2xhc3M9KHQub3MyLmZhbWlseUNsYXNzfHwwKT4+OCx0aGlzLmlzU2VyaWY9dGhpcy5mYW1pbHlDbGFzcz49MSYmNz49dGhpcy5mYW1pbHlDbGFzcyx0aGlzLmlzU2NyaXB0PTEwPT10aGlzLmZhbWlseUNsYXNzLHRoaXMuZmxhZ3M9KHQucG9zdC5pc0ZpeGVkUGl0Y2g/MTowKXwodGhpcy5pc1NlcmlmPzI6MCl8KHRoaXMuaXNTY3JpcHQ/ODowKXwoMCE9PXRoaXMuaXRhbGljQW5nbGU/NjQ6MCl8MzJ9LHtlbmNvZGVUZXh0OmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgQih0aGlzLl9zdWIuZW5jb2RlVGV4dChlK1wiXCIpKX0sYmVmb3JlUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLHIsbz10aGlzLGE9by5fc3ViLHM9YS5yZW5kZXIoKSxsPW5ldyBOKEQocykse0xlbmd0aDE6cy5sZW5ndGh9LCEwKSxjPW8uX3BkZi5hdHRhY2gobmV3IEgoe1R5cGU6ayhcIkZvbnREZXNjcmlwdG9yXCIpLEZvbnROYW1lOmsoby5fc3ViLnBzTmFtZSksRm9udEJCb3g6by5iYm94LEZsYWdzOm8uZmxhZ3MsU3RlbVY6by5zdGVtVixJdGFsaWNBbmdsZTpvLml0YWxpY0FuZ2xlLEFzY2VudDpvLmFzY2VudCxEZXNjZW50Om8uZGVzY2VudCxDYXBIZWlnaHQ6by5jYXBIZWlnaHQsWEhlaWdodDpvLnhIZWlnaHQsRm9udEZpbGUyOm8uX3BkZi5hdHRhY2gobCl9KSksZD1hLm5jaWQyb2dpZCx1PWEuZmlyc3RDaGFyLGg9YS5sYXN0Q2hhcixwPVtdOyFmdW5jdGlvbiBmKGUsdCl7aWYoaD49ZSl7dmFyIG49ZFtlXTtudWxsPT1uP2YoZSsxKToodHx8cC5wdXNoKGUsdD1bXSksdC5wdXNoKG8uX2ZvbnQud2lkdGhPZkdseXBoKG4pKSxmKGUrMSx0KSl9fSh1KSxlPW5ldyBIKHtUeXBlOmsoXCJGb250XCIpLFN1YnR5cGU6ayhcIkNJREZvbnRUeXBlMlwiKSxCYXNlRm9udDprKG8uX3N1Yi5wc05hbWUpLENJRFN5c3RlbUluZm86bmV3IEgoe1JlZ2lzdHJ5Om5ldyBSKFwiQWRvYmVcIiksT3JkZXJpbmc6bmV3IFIoXCJJZGVudGl0eVwiKSxTdXBwbGVtZW50OjB9KSxGb250RGVzY3JpcHRvcjpjLEZpcnN0Q2hhcjp1LExhc3RDaGFyOmgsRFc6TWF0aC5yb3VuZChvLl9mb250LndpZHRoT2ZHbHlwaCgwKSksVzpwLENJRFRvR0lETWFwOm8uX3BkZi5hdHRhY2goby5fbWFrZUNpZFRvR2lkTWFwKCkpfSksdD1vLnByb3BzLHQuQmFzZUZvbnQ9ayhvLl9zdWIucHNOYW1lKSx0LkRlc2NlbmRhbnRGb250cz1bby5fcGRmLmF0dGFjaChlKV0sbj1uZXcgRyh1LGgsYS5zdWJzZXQpLHI9bmV3IE4oaSgpLG51bGwsITApLHIuZGF0YShuKSx0LlRvVW5pY29kZT1vLl9wZGYuYXR0YWNoKHIpfSxfbWFrZUNpZFRvR2lkTWFwOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBOKEQodGhpcy5fc3ViLmNpZFRvR2lkTWFwKCkpLG51bGwsITApfX0sSCksRz1iKGZ1bmN0aW9uKGUsdCxuKXt0aGlzLmZpcnN0Q2hhcj1lLHRoaXMubGFzdENoYXI9dCx0aGlzLm1hcD1ufSx7cmVuZGVyOmZ1bmN0aW9uKGUpe2UuaW5kZW50KFwiL0NJREluaXQgL1Byb2NTZXQgZmluZHJlc291cmNlIGJlZ2luXCIpLGUuaW5kZW50KFwiMTIgZGljdCBiZWdpblwiKSxlLmluZGVudChcImJlZ2luY21hcFwiKSxlLmluZGVudChcIi9DSURTeXN0ZW1JbmZvIDw8XCIpLGUuaW5kZW50KFwiICAvUmVnaXN0cnkgKEFkb2JlKVwiKSxlLmluZGVudChcIiAgL09yZGVyaW5nIChVQ1MpXCIpLGUuaW5kZW50KFwiICAvU3VwcGxlbWVudCAwXCIpLGUuaW5kZW50KFwiPj4gZGVmXCIpLGUuaW5kZW50KFwiL0NNYXBOYW1lIC9BZG9iZS1JZGVudGl0eS1VQ1MgZGVmXCIpLGUuaW5kZW50KFwiL0NNYXBUeXBlIDIgZGVmXCIpLGUuaW5kZW50KFwiMSBiZWdpbmNvZGVzcGFjZXJhbmdlXCIpLGUuaW5kZW50KFwiICA8MDAwMD48ZmZmZj5cIiksZS5pbmRlbnQoXCJlbmRjb2Rlc3BhY2VyYW5nZVwiKTt2YXIgdD10aGlzO2UuaW5kZW50KHQubGFzdENoYXItdC5maXJzdENoYXIrMSxcIiBiZWdpbmJmY2hhclwiKSxlLndpdGhJbmRlbnQoZnVuY3Rpb24oKXt2YXIgbixpO2ZvcihuPXQuZmlyc3RDaGFyO3QubGFzdENoYXI+PW47KytuKWk9dC5tYXBbbl0sZS5pbmRlbnQoXCI8XCIsdShuLnRvU3RyaW5nKDE2KSw0KSxcIj5cIixcIjxcIix1KGkudG9TdHJpbmcoMTYpLDQpLFwiPlwiKX0pLGUuaW5kZW50KFwiZW5kYmZjaGFyXCIpLGUuaW5kZW50KFwiZW5kY21hcFwiKSxlLmluZGVudChcIkNNYXBOYW1lIGN1cnJlbnRkaWN0IC9DTWFwIGRlZmluZXJlc291cmNlIHBvcFwiKSxlLmluZGVudChcImVuZFwiKSxlLmluZGVudChcImVuZFwiKX19KSxxPWIoZnVuY3Rpb24oZSx0KXt0aGlzLl9wZGY9ZSx0aGlzLl9yY291bnQ9MCx0aGlzLl90ZXh0TW9kZT0hMSx0aGlzLl9mb250UmVzb3VyY2VzPXt9LHRoaXMuX2dzUmVzb3VyY2VzPXt9LHRoaXMuX3hSZXNvdXJjZXM9e30sdGhpcy5fcGF0UmVzb3VyY2VzPXt9LHRoaXMuX3NoUmVzb3VyY2VzPXt9LHRoaXMuX29wYWNpdHk9MSx0aGlzLl9tYXRyaXg9WzEsMCwwLDEsMCwwXSx0aGlzLl9mb250PW51bGwsdGhpcy5fZm9udFNpemU9bnVsbCx0aGlzLl9jb250ZXh0U3RhY2s9W10sdD10aGlzLnByb3BzPXR8fHt9LHQuVHlwZT1rKFwiUGFnZVwiKSx0LlByb2NTZXQ9W2soXCJQREZcIiksayhcIlRleHRcIiksayhcIkltYWdlQlwiKSxrKFwiSW1hZ2VDXCIpLGsoXCJJbWFnZUlcIildLHQuUmVzb3VyY2VzPW5ldyBIKHtGb250Om5ldyBIKHRoaXMuX2ZvbnRSZXNvdXJjZXMpLEV4dEdTdGF0ZTpuZXcgSCh0aGlzLl9nc1Jlc291cmNlcyksWE9iamVjdDpuZXcgSCh0aGlzLl94UmVzb3VyY2VzKSxQYXR0ZXJuOm5ldyBIKHRoaXMuX3BhdFJlc291cmNlcyksU2hhZGluZzpuZXcgSCh0aGlzLl9zaFJlc291cmNlcyl9KX0se19vdXQ6ZnVuY3Rpb24oKXt0aGlzLl9jb250ZW50LmRhdGEuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0cmFuc2Zvcm06ZnVuY3Rpb24oZSx0LG4saSxyLG8pe3ooYXJndW1lbnRzKXx8KHRoaXMuX21hdHJpeD1JKHRoaXMuX21hdHJpeCxhcmd1bWVudHMpLHRoaXMuX291dChlLFwiIFwiLHQsXCIgXCIsbixcIiBcIixpLFwiIFwiLHIsXCIgXCIsbyxcIiBjbVwiKSx0aGlzLl9vdXQoUSkpfSx0cmFuc2xhdGU6ZnVuY3Rpb24oZSx0KXt0aGlzLnRyYW5zZm9ybSgxLDAsMCwxLGUsdCl9LHNjYWxlOmZ1bmN0aW9uKGUsdCl7dGhpcy50cmFuc2Zvcm0oZSwwLDAsdCwwLDApfSxyb3RhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9TWF0aC5jb3MoZSksbj1NYXRoLnNpbihlKTt0aGlzLnRyYW5zZm9ybSh0LG4sLW4sdCwwLDApfSxiZWdpblRleHQ6ZnVuY3Rpb24oKXt0aGlzLl90ZXh0TW9kZT0hMCx0aGlzLl9vdXQoXCJCVFwiLFEpfSxlbmRUZXh0OmZ1bmN0aW9uKCl7dGhpcy5fdGV4dE1vZGU9ITEsdGhpcy5fb3V0KFwiRVRcIixRKX0sX3JlcXVpcmVUZXh0TW9kZTpmdW5jdGlvbigpe2lmKCF0aGlzLl90ZXh0TW9kZSl0aHJvdyBFcnJvcihcIlRleHQgbW9kZSByZXF1aXJlZDsgY2FsbCBwYWdlLmJlZ2luVGV4dCgpIGZpcnN0XCIpfSxfcmVxdWlyZUZvbnQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fZm9udCl0aHJvdyBFcnJvcihcIk5vIGZvbnQgc2VsZWN0ZWQ7IGNhbGwgcGFnZS5zZXRGb250KCkgZmlyc3RcIil9LHNldEZvbnQ6ZnVuY3Rpb24oZSx0KXt0aGlzLl9yZXF1aXJlVGV4dE1vZGUoKSxudWxsPT1lP2U9dGhpcy5fZm9udDplIGluc3RhbmNlb2Yganx8KGU9dGhpcy5fcGRmLmdldEZvbnQoZSkpLG51bGw9PXQmJih0PXRoaXMuX2ZvbnRTaXplKSx0aGlzLl9mb250UmVzb3VyY2VzW2UuX3Jlc291cmNlTmFtZV09ZSx0aGlzLl9mb250PWUsdGhpcy5fZm9udFNpemU9dCx0aGlzLl9vdXQoZS5fcmVzb3VyY2VOYW1lLFwiIFwiLHQsXCIgVGZcIixRKX0sc2V0VGV4dExlYWRpbmc6ZnVuY3Rpb24oZSl7dGhpcy5fcmVxdWlyZVRleHRNb2RlKCksdGhpcy5fb3V0KGUsXCIgVExcIixRKX0sc2V0VGV4dFJlbmRlcmluZ01vZGU6ZnVuY3Rpb24oZSl7dGhpcy5fcmVxdWlyZVRleHRNb2RlKCksdGhpcy5fb3V0KGUsXCIgVHJcIixRKX0sc2hvd1RleHQ6ZnVuY3Rpb24oZSl7dGhpcy5fcmVxdWlyZUZvbnQoKSx0aGlzLl9vdXQodGhpcy5fZm9udC5lbmNvZGVUZXh0KGUpLFwiIFRqXCIsUSl9LHNob3dUZXh0Tkw6ZnVuY3Rpb24oZSl7dGhpcy5fcmVxdWlyZUZvbnQoKSx0aGlzLl9vdXQodGhpcy5fZm9udC5lbmNvZGVUZXh0KGUpLFwiICdcIixRKX0sc2V0U3Ryb2tlQ29sb3I6ZnVuY3Rpb24oZSx0LG4pe3RoaXMuX291dChlLFwiIFwiLHQsXCIgXCIsbixcIiBSR1wiLFEpfSxzZXRPcGFjaXR5OmZ1bmN0aW9uKGUpe3RoaXMuc2V0RmlsbE9wYWNpdHkoZSksdGhpcy5zZXRTdHJva2VPcGFjaXR5KGUpLHRoaXMuX29wYWNpdHkqPWV9LHNldFN0cm9rZU9wYWNpdHk6ZnVuY3Rpb24oZSl7aWYoMT5lKXt2YXIgdD10aGlzLl9wZGYuZ2V0T3BhY2l0eUdTKHRoaXMuX29wYWNpdHkqZSwhMCk7dGhpcy5fZ3NSZXNvdXJjZXNbdC5fcmVzb3VyY2VOYW1lXT10LHRoaXMuX291dCh0Ll9yZXNvdXJjZU5hbWUsXCIgZ3NcIixRKX19LHNldEZpbGxDb2xvcjpmdW5jdGlvbihlLHQsbil7dGhpcy5fb3V0KGUsXCIgXCIsdCxcIiBcIixuLFwiIHJnXCIsUSl9LHNldEZpbGxPcGFjaXR5OmZ1bmN0aW9uKGUpe2lmKDE+ZSl7dmFyIHQ9dGhpcy5fcGRmLmdldE9wYWNpdHlHUyh0aGlzLl9vcGFjaXR5KmUsITEpO3RoaXMuX2dzUmVzb3VyY2VzW3QuX3Jlc291cmNlTmFtZV09dCx0aGlzLl9vdXQodC5fcmVzb3VyY2VOYW1lLFwiIGdzXCIsUSl9fSxncmFkaWVudDpmdW5jdGlvbihlLHQpe3ZhciBuLGkscjt0aGlzLnNhdmUoKSx0aGlzLnJlY3QodC5sZWZ0LHQudG9wLHQud2lkdGgsdC5oZWlnaHQpLHRoaXMuY2xpcCgpLGUudXNlclNwYWNlfHx0aGlzLnRyYW5zZm9ybSh0LndpZHRoLDAsMCx0LmhlaWdodCx0LmxlZnQsdC50b3ApLG49VCh0aGlzLl9wZGYsZSx0KSxpPVwiU1wiKyArK1gsdGhpcy5fc2hSZXNvdXJjZXNbaV09dGhpcy5fcGRmLmF0dGFjaChuLnNoYWRpbmcpLG4uaGFzQWxwaGEmJihyPVwiT1wiKyArK1gsdGhpcy5fZ3NSZXNvdXJjZXNbcl09dGhpcy5fcGRmLmF0dGFjaChuLm9wYWNpdHkpLHRoaXMuX291dChcIi9cIityK1wiIGdzIFwiKSksdGhpcy5fb3V0KFwiL1wiK2krXCIgc2hcIixRKSx0aGlzLnJlc3RvcmUoKX0sc2V0RGFzaFBhdHRlcm46ZnVuY3Rpb24oZSx0KXt0aGlzLl9vdXQoZSxcIiBcIix0LFwiIGRcIixRKX0sc2V0TGluZVdpZHRoOmZ1bmN0aW9uKGUpe3RoaXMuX291dChlLFwiIHdcIixRKX0sc2V0TGluZUNhcDpmdW5jdGlvbihlKXt0aGlzLl9vdXQoZSxcIiBKXCIsUSl9LHNldExpbmVKb2luOmZ1bmN0aW9uKGUpe3RoaXMuX291dChlLFwiIGpcIixRKX0sc2V0TWl0dGVyTGltaXQ6ZnVuY3Rpb24oZSl7dGhpcy5fb3V0KGUsXCIgTVwiLFEpfSxzYXZlOmZ1bmN0aW9uKCl7dGhpcy5fY29udGV4dFN0YWNrLnB1c2godGhpcy5fY29udGV4dCgpKSx0aGlzLl9vdXQoXCJxXCIsUSl9LHJlc3RvcmU6ZnVuY3Rpb24oKXt0aGlzLl9vdXQoXCJRXCIsUSksdGhpcy5fY29udGV4dCh0aGlzLl9jb250ZXh0U3RhY2sucG9wKCkpfSxtb3ZlVG86ZnVuY3Rpb24oZSx0KXt0aGlzLl9vdXQoZSxcIiBcIix0LFwiIG1cIixRKX0sbGluZVRvOmZ1bmN0aW9uKGUsdCl7dGhpcy5fb3V0KGUsXCIgXCIsdCxcIiBsXCIsUSl9LGJlemllcjpmdW5jdGlvbihlLHQsbixpLHIsbyl7dGhpcy5fb3V0KGUsXCIgXCIsdCxcIiBcIixuLFwiIFwiLGksXCIgXCIscixcIiBcIixvLFwiIGNcIixRKX0sYmV6aWVyMTpmdW5jdGlvbihlLHQsbixpKXt0aGlzLl9vdXQoZSxcIiBcIix0LFwiIFwiLG4sXCIgXCIsaSxcIiB5XCIsUSl9LGJlemllcjI6ZnVuY3Rpb24oZSx0LG4saSl7dGhpcy5fb3V0KGUsXCIgXCIsdCxcIiBcIixuLFwiIFwiLGksXCIgdlwiLFEpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuX291dChcImhcIixRKX0scmVjdDpmdW5jdGlvbihlLHQsbixpKXt0aGlzLl9vdXQoZSxcIiBcIix0LFwiIFwiLG4sXCIgXCIsaSxcIiByZVwiLFEpfSxlbGxpcHNlOmZ1bmN0aW9uKGUsdCxuLGkpe2Z1bmN0aW9uIHIodCl7cmV0dXJuIGUrdH1mdW5jdGlvbiBvKGUpe3JldHVybiB0K2V9dmFyIGE9LjU1MjI4NDc0OTgzMDc5MzY7dGhpcy5tb3ZlVG8ocigwKSxvKGkpKSx0aGlzLmJlemllcihyKG4qYSksbyhpKSxyKG4pLG8oaSphKSxyKG4pLG8oMCkpLHRoaXMuYmV6aWVyKHIobiksbygtaSphKSxyKG4qYSksbygtaSkscigwKSxvKC1pKSksdGhpcy5iZXppZXIocigtbiphKSxvKC1pKSxyKC1uKSxvKC1pKmEpLHIoLW4pLG8oMCkpLHRoaXMuYmV6aWVyKHIoLW4pLG8oaSphKSxyKC1uKmEpLG8oaSkscigwKSxvKGkpKX0sY2lyY2xlOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLmVsbGlwc2UoZSx0LG4sbil9LHN0cm9rZTpmdW5jdGlvbigpe3RoaXMuX291dChcIlNcIixRKX0sbm9wOmZ1bmN0aW9uKCl7dGhpcy5fb3V0KFwiblwiLFEpfSxjbGlwOmZ1bmN0aW9uKCl7dGhpcy5fb3V0KFwiVyBuXCIsUSl9LGNsb3NlU3Ryb2tlOmZ1bmN0aW9uKCl7dGhpcy5fb3V0KFwic1wiLFEpfSxmaWxsOmZ1bmN0aW9uKCl7dGhpcy5fb3V0KFwiZlwiLFEpfSxmaWxsU3Ryb2tlOmZ1bmN0aW9uKCl7dGhpcy5fb3V0KFwiQlwiLFEpfSxkcmF3SW1hZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fcGRmLmdldEltYWdlKGUpO3QmJih0aGlzLl94UmVzb3VyY2VzW3QuX3Jlc291cmNlTmFtZV09dCx0aGlzLl9vdXQodC5fcmVzb3VyY2VOYW1lLFwiIERvXCIsUSkpfSxjb21tZW50OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5zcGxpdCgvXFxyP1xcbi9nKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuX291dChcIiUgXCIsZSxRKX0pfSxfY29udGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT97b3BhY2l0eTp0aGlzLl9vcGFjaXR5LG1hdHJpeDp0aGlzLl9tYXRyaXh9Oih0aGlzLl9vcGFjaXR5PWUub3BhY2l0eSx0aGlzLl9tYXRyaXg9ZS5tYXRyaXgsbil9fSxIKSwkPXtzZXJpZjpcIlRpbWVzLVJvbWFuXCIsXCJzZXJpZnxib2xkXCI6XCJUaW1lcy1Cb2xkXCIsXCJzZXJpZnxpdGFsaWNcIjpcIlRpbWVzLUl0YWxpY1wiLFwic2VyaWZ8Ym9sZHxpdGFsaWNcIjpcIlRpbWVzLUJvbGRJdGFsaWNcIixcInNhbnMtc2VyaWZcIjpcIkhlbHZldGljYVwiLFwic2Fucy1zZXJpZnxib2xkXCI6XCJIZWx2ZXRpY2EtQm9sZFwiLFwic2Fucy1zZXJpZnxpdGFsaWNcIjpcIkhlbHZldGljYS1PYmxpcXVlXCIsXCJzYW5zLXNlcmlmfGJvbGR8aXRhbGljXCI6XCJIZWx2ZXRpY2EtQm9sZE9ibGlxdWVcIixtb25vc3BhY2U6XCJDb3VyaWVyXCIsXCJtb25vc3BhY2V8Ym9sZFwiOlwiQ291cmllci1Cb2xkXCIsXCJtb25vc3BhY2V8aXRhbGljXCI6XCJDb3VyaWVyLU9ibGlxdWVcIixcIm1vbm9zcGFjZXxib2xkfGl0YWxpY1wiOlwiQ291cmllci1Cb2xkT2JsaXF1ZVwifSxZLnBkZj17RG9jdW1lbnQ6byxCaW5hcnlTdHJlYW06RCxkZWZpbmVGb250OlAscGFyc2VGb250RGVmOkUsZ2V0Rm9udFVSTDpNLGxvYWRGb250czpudCxsb2FkSW1hZ2VzOml0LFRFWFRfUkVOREVSSU5HX01PREU6e2ZpbGw6MCxzdHJva2U6MSxmaWxsQW5kU3Ryb2tlOjIsaW52aXNpYmxlOjMsZmlsbEFuZENsaXA6NCxzdHJva2VBbmRDbGlwOjUsZmlsbFN0cm9rZUNsaXA6NixjbGlwOjd9fX0odGhpcyxwYXJzZUZsb2F0KSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIE9iamVjdC5rZXlzKGUpLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS10fSkubWFwKHBhcnNlRmxvYXQpfWZ1bmN0aW9uIGkoZSl7dmFyIHQsbixpO2Zvcih0aGlzLnJhdz1lLHRoaXMuc2NhbGVyVHlwZT1lLnJlYWRMb25nKCksdGhpcy50YWJsZUNvdW50PWUucmVhZFNob3J0KCksdGhpcy5zZWFyY2hSYW5nZT1lLnJlYWRTaG9ydCgpLHRoaXMuZW50cnlTZWxlY3Rvcj1lLnJlYWRTaG9ydCgpLHRoaXMucmFuZ2VTaGlmdD1lLnJlYWRTaG9ydCgpLHQ9dGhpcy50YWJsZXM9e30sbj0wO3RoaXMudGFibGVDb3VudD5uOysrbilpPXt0YWc6ZS5yZWFkU3RyaW5nKDQpLGNoZWNrc3VtOmUucmVhZExvbmcoKSxvZmZzZXQ6ZS5yZWFkTG9uZygpLGxlbmd0aDplLnJlYWRMb25nKCl9LHRbaS50YWddPWl9ZnVuY3Rpb24gcihlKXtmdW5jdGlvbiBuKGUsdCl7dGhpcy5kZWZpbml0aW9uPXQsdGhpcy5sZW5ndGg9dC5sZW5ndGgsdGhpcy5vZmZzZXQ9dC5vZmZzZXQsdGhpcy5maWxlPWUsdGhpcy5yYXdEYXRhPWUucmF3LHRoaXMucGFyc2UoZS5yYXcpfW4ucHJvdG90eXBlLnJhdz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJhd0RhdGEuc2xpY2UodGhpcy5vZmZzZXQsdGhpcy5sZW5ndGgpfTtmb3IodmFyIGkgaW4gZSl0KGUsaSkmJihuW2ldPW4ucHJvdG90eXBlW2ldPWVbaV0pO3JldHVybiBufWZ1bmN0aW9uIG8oKXt2YXIgZSx0PVwiXCIsbj1fK1wiXCI7Zm9yKGU9MDtuLmxlbmd0aD5lOysrZSl0Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKG4uY2hhckNvZGVBdChlKS00OCs2NSk7cmV0dXJuKytfLHR9ZnVuY3Rpb24gYShlKXt0aGlzLmZvbnQ9ZSx0aGlzLnN1YnNldD17fSx0aGlzLnVuaWNvZGVzPXt9LHRoaXMub2dpZDJuZ2lkPXswOjB9LHRoaXMubmdpZDJvZ2lkPXswOjB9LHRoaXMubmNpZDJvZ2lkPXt9LHRoaXMubmV4dD10aGlzLmZpcnN0Q2hhcj0xLHRoaXMubmV4dEdpZD0xLHRoaXMucHNOYW1lPW8oKStcIitcIit0aGlzLmZvbnQucHNOYW1lfWZ1bmN0aW9uIHMoZSx0KXt2YXIgbixpLHIsbyxhPXRoaXMscz1hLmNvbnRlbnRzPXcoZSk7aWYoXCJ0dGNmXCI9PXMucmVhZFN0cmluZyg0KSl7aWYoIXQpdGhyb3cgRXJyb3IoXCJNdXN0IHNwZWNpZnkgYSBuYW1lIGZvciBUVEMgZmlsZXNcIik7Zm9yKG49cy5yZWFkTG9uZygpLGk9cy5yZWFkTG9uZygpLHI9MDtpPnI7KytyKWlmKG89cy5yZWFkTG9uZygpLHMuc2F2ZUV4Y3Vyc2lvbihmdW5jdGlvbigpe3Mub2Zmc2V0KG8pLGEucGFyc2UoKX0pLGEucHNOYW1lPT10KXJldHVybjt0aHJvdyBFcnJvcihcIkZvbnQgXCIrdCtcIiBub3QgZm91bmQgaW4gY29sbGVjdGlvblwiKX1zLm9mZnNldCgwKSxhLnBhcnNlKCl9dmFyIGwsYyxkLHUsaCxwLGYsZyxtLHYsXyx5PWUua2VuZG8ucGRmLHc9eS5CaW5hcnlTdHJlYW07aS5wcm90b3R5cGU9e3JlYWRUYWJsZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMudGFibGVzW2VdO2lmKCFuKXRocm93IEVycm9yKFwiVGFibGUgXCIrZStcIiBub3QgZm91bmQgaW4gZGlyZWN0b3J5XCIpO3JldHVybiB0aGlzW2VdPW4udGFibGU9bmV3IHQodGhpcyxuKX0scmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciBuLGkscixvLGEscyxsLGMsZD1PYmplY3Qua2V5cyhlKS5sZW5ndGgsdT1NYXRoLnBvdygyLE1hdGguZmxvb3IoTWF0aC5sb2coZCkvTWF0aC5MTjIpKSxoPTE2KnUscD1NYXRoLmZsb29yKE1hdGgubG9nKHUpL01hdGguTE4yKSxmPTE2KmQtaCxnPXcoKTtnLndyaXRlTG9uZyh0aGlzLnNjYWxlclR5cGUpLGcud3JpdGVTaG9ydChkKSxnLndyaXRlU2hvcnQoaCksZy53cml0ZVNob3J0KHApLGcud3JpdGVTaG9ydChmKSxuPTE2KmQsaT1nLm9mZnNldCgpK24scj1udWxsLG89dygpO2ZvcihhIGluIGUpaWYodChlLGEpKWZvcihzPWVbYV0sZy53cml0ZVN0cmluZyhhKSxnLndyaXRlTG9uZyh0aGlzLmNoZWNrc3VtKHMpKSxnLndyaXRlTG9uZyhpKSxnLndyaXRlTG9uZyhzLmxlbmd0aCksby53cml0ZShzKSxcImhlYWRcIj09YSYmKHI9aSksaSs9cy5sZW5ndGg7aSU0OylvLndyaXRlQnl0ZSgwKSxpKys7cmV0dXJuIGcud3JpdGUoby5nZXQoKSksbD10aGlzLmNoZWNrc3VtKGcuZ2V0KCkpLGM9Mjk4MTE0NjU1NC1sLGcub2Zmc2V0KHIrOCksZy53cml0ZUxvbmcoYyksZy5nZXQoKX0sY2hlY2tzdW06ZnVuY3Rpb24oZSl7ZT13KGUpO2Zvcih2YXIgdD0wOyFlLmVvZigpOyl0Kz1lLnJlYWRMb25nKCk7cmV0dXJuIDQyOTQ5NjcyOTUmdH19LGw9cih7cGFyc2U6ZnVuY3Rpb24oZSl7ZS5vZmZzZXQodGhpcy5vZmZzZXQpLHRoaXMudmVyc2lvbj1lLnJlYWRMb25nKCksdGhpcy5yZXZpc2lvbj1lLnJlYWRMb25nKCksdGhpcy5jaGVja1N1bUFkanVzdG1lbnQ9ZS5yZWFkTG9uZygpLHRoaXMubWFnaWNOdW1iZXI9ZS5yZWFkTG9uZygpLHRoaXMuZmxhZ3M9ZS5yZWFkU2hvcnQoKSx0aGlzLnVuaXRzUGVyRW09ZS5yZWFkU2hvcnQoKSx0aGlzLmNyZWF0ZWQ9ZS5yZWFkKDgpLHRoaXMubW9kaWZpZWQ9ZS5yZWFkKDgpLHRoaXMueE1pbj1lLnJlYWRTaG9ydF8oKSx0aGlzLnlNaW49ZS5yZWFkU2hvcnRfKCksdGhpcy54TWF4PWUucmVhZFNob3J0XygpLHRoaXMueU1heD1lLnJlYWRTaG9ydF8oKSx0aGlzLm1hY1N0eWxlPWUucmVhZFNob3J0KCksdGhpcy5sb3dlc3RSZWNQUEVNPWUucmVhZFNob3J0KCksdGhpcy5mb250RGlyZWN0aW9uSGludD1lLnJlYWRTaG9ydF8oKSx0aGlzLmluZGV4VG9Mb2NGb3JtYXQ9ZS5yZWFkU2hvcnRfKCksdGhpcy5nbHlwaERhdGFGb3JtYXQ9ZS5yZWFkU2hvcnRfKCl9LHJlbmRlcjpmdW5jdGlvbihlKXt2YXIgdD13KCk7cmV0dXJuIHQud3JpdGVMb25nKHRoaXMudmVyc2lvbiksdC53cml0ZUxvbmcodGhpcy5yZXZpc2lvbiksdC53cml0ZUxvbmcoMCksdC53cml0ZUxvbmcodGhpcy5tYWdpY051bWJlciksdC53cml0ZVNob3J0KHRoaXMuZmxhZ3MpLHQud3JpdGVTaG9ydCh0aGlzLnVuaXRzUGVyRW0pLHQud3JpdGUodGhpcy5jcmVhdGVkKSx0LndyaXRlKHRoaXMubW9kaWZpZWQpLHQud3JpdGVTaG9ydF8odGhpcy54TWluKSx0LndyaXRlU2hvcnRfKHRoaXMueU1pbiksdC53cml0ZVNob3J0Xyh0aGlzLnhNYXgpLHQud3JpdGVTaG9ydF8odGhpcy55TWF4KSx0LndyaXRlU2hvcnQodGhpcy5tYWNTdHlsZSksdC53cml0ZVNob3J0KHRoaXMubG93ZXN0UmVjUFBFTSksdC53cml0ZVNob3J0Xyh0aGlzLmZvbnREaXJlY3Rpb25IaW50KSx0LndyaXRlU2hvcnRfKGUpLHQud3JpdGVTaG9ydF8odGhpcy5nbHlwaERhdGFGb3JtYXQpLHQuZ2V0KCl9fSksYz1yKHtwYXJzZTpmdW5jdGlvbihlKXtlLm9mZnNldCh0aGlzLm9mZnNldCk7dmFyIHQ9dGhpcy5maWxlLmhlYWQuaW5kZXhUb0xvY0Zvcm1hdDt0aGlzLm9mZnNldHM9MD09PXQ/ZS50aW1lcyh0aGlzLmxlbmd0aC8yLGZ1bmN0aW9uKCl7cmV0dXJuIDIqZS5yZWFkU2hvcnQoKX0pOmUudGltZXModGhpcy5sZW5ndGgvNCxlLnJlYWRMb25nKX0sb2Zmc2V0T2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub2Zmc2V0c1tlXX0sbGVuZ3RoT2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub2Zmc2V0c1tlKzFdLXRoaXMub2Zmc2V0c1tlXX0scmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG49dygpLGk9ZVtlLmxlbmd0aC0xXT42NTUzNTtmb3IodD0wO2UubGVuZ3RoPnQ7Kyt0KWk/bi53cml0ZUxvbmcoZVt0XSk6bi53cml0ZVNob3J0KGVbdF0vMik7cmV0dXJue2Zvcm1hdDppPzE6MCx0YWJsZTpuLmdldCgpfX19KSxkPXIoe3BhcnNlOmZ1bmN0aW9uKGUpe2Uub2Zmc2V0KHRoaXMub2Zmc2V0KSx0aGlzLnZlcnNpb249ZS5yZWFkTG9uZygpLHRoaXMuYXNjZW50PWUucmVhZFNob3J0XygpLHRoaXMuZGVzY2VudD1lLnJlYWRTaG9ydF8oKSx0aGlzLmxpbmVHYXA9ZS5yZWFkU2hvcnRfKCksdGhpcy5hZHZhbmNlV2lkdGhNYXg9ZS5yZWFkU2hvcnQoKSx0aGlzLm1pbkxlZnRTaWRlQmVhcmluZz1lLnJlYWRTaG9ydF8oKSx0aGlzLm1pblJpZ2h0U2lkZUJlYXJpbmc9ZS5yZWFkU2hvcnRfKCksdGhpcy54TWF4RXh0ZW50PWUucmVhZFNob3J0XygpLHRoaXMuY2FyZXRTbG9wZVJpc2U9ZS5yZWFkU2hvcnRfKCksdGhpcy5jYXJldFNsb3BlUnVuPWUucmVhZFNob3J0XygpLHRoaXMuY2FyZXRPZmZzZXQ9ZS5yZWFkU2hvcnRfKCksZS5za2lwKDgpLHRoaXMubWV0cmljRGF0YUZvcm1hdD1lLnJlYWRTaG9ydF8oKSx0aGlzLm51bU9mTG9uZ0hvck1ldHJpY3M9ZS5yZWFkU2hvcnQoKX0scmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXcoKTtyZXR1cm4gdC53cml0ZUxvbmcodGhpcy52ZXJzaW9uKSx0LndyaXRlU2hvcnRfKHRoaXMuYXNjZW50KSx0LndyaXRlU2hvcnRfKHRoaXMuZGVzY2VudCksdC53cml0ZVNob3J0Xyh0aGlzLmxpbmVHYXApLHQud3JpdGVTaG9ydCh0aGlzLmFkdmFuY2VXaWR0aE1heCksdC53cml0ZVNob3J0Xyh0aGlzLm1pbkxlZnRTaWRlQmVhcmluZyksdC53cml0ZVNob3J0Xyh0aGlzLm1pblJpZ2h0U2lkZUJlYXJpbmcpLHQud3JpdGVTaG9ydF8odGhpcy54TWF4RXh0ZW50KSx0LndyaXRlU2hvcnRfKHRoaXMuY2FyZXRTbG9wZVJpc2UpLHQud3JpdGVTaG9ydF8odGhpcy5jYXJldFNsb3BlUnVuKSx0LndyaXRlU2hvcnRfKHRoaXMuY2FyZXRPZmZzZXQpLHQud3JpdGUoWzAsMCwwLDAsMCwwLDAsMF0pLHQud3JpdGVTaG9ydF8odGhpcy5tZXRyaWNEYXRhRm9ybWF0KSx0LndyaXRlU2hvcnQoZS5sZW5ndGgpLHQuZ2V0KCl9fSksdT1yKHtwYXJzZTpmdW5jdGlvbihlKXtlLm9mZnNldCh0aGlzLm9mZnNldCksdGhpcy52ZXJzaW9uPWUucmVhZExvbmcoKSx0aGlzLm51bUdseXBocz1lLnJlYWRTaG9ydCgpLHRoaXMubWF4UG9pbnRzPWUucmVhZFNob3J0KCksdGhpcy5tYXhDb250b3Vycz1lLnJlYWRTaG9ydCgpLHRoaXMubWF4Q29tcG9uZW50UG9pbnRzPWUucmVhZFNob3J0KCksdGhpcy5tYXhDb21wb25lbnRDb250b3Vycz1lLnJlYWRTaG9ydCgpLHRoaXMubWF4Wm9uZXM9ZS5yZWFkU2hvcnQoKSx0aGlzLm1heFR3aWxpZ2h0UG9pbnRzPWUucmVhZFNob3J0KCksdGhpcy5tYXhTdG9yYWdlPWUucmVhZFNob3J0KCksdGhpcy5tYXhGdW5jdGlvbkRlZnM9ZS5yZWFkU2hvcnQoKSx0aGlzLm1heEluc3RydWN0aW9uRGVmcz1lLnJlYWRTaG9ydCgpLHRoaXMubWF4U3RhY2tFbGVtZW50cz1lLnJlYWRTaG9ydCgpLHRoaXMubWF4U2l6ZU9mSW5zdHJ1Y3Rpb25zPWUucmVhZFNob3J0KCksdGhpcy5tYXhDb21wb25lbnRFbGVtZW50cz1lLnJlYWRTaG9ydCgpLHRoaXMubWF4Q29tcG9uZW50RGVwdGg9ZS5yZWFkU2hvcnQoKX0scmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXcoKTtyZXR1cm4gdC53cml0ZUxvbmcodGhpcy52ZXJzaW9uKSx0LndyaXRlU2hvcnQoZS5sZW5ndGgpLHQud3JpdGVTaG9ydCh0aGlzLm1heFBvaW50cyksdC53cml0ZVNob3J0KHRoaXMubWF4Q29udG91cnMpLHQud3JpdGVTaG9ydCh0aGlzLm1heENvbXBvbmVudFBvaW50cyksdC53cml0ZVNob3J0KHRoaXMubWF4Q29tcG9uZW50Q29udG91cnMpLHQud3JpdGVTaG9ydCh0aGlzLm1heFpvbmVzKSx0LndyaXRlU2hvcnQodGhpcy5tYXhUd2lsaWdodFBvaW50cyksdC53cml0ZVNob3J0KHRoaXMubWF4U3RvcmFnZSksdC53cml0ZVNob3J0KHRoaXMubWF4RnVuY3Rpb25EZWZzKSx0LndyaXRlU2hvcnQodGhpcy5tYXhJbnN0cnVjdGlvbkRlZnMpLHQud3JpdGVTaG9ydCh0aGlzLm1heFN0YWNrRWxlbWVudHMpLHQud3JpdGVTaG9ydCh0aGlzLm1heFNpemVPZkluc3RydWN0aW9ucyksdC53cml0ZVNob3J0KHRoaXMubWF4Q29tcG9uZW50RWxlbWVudHMpLHQud3JpdGVTaG9ydCh0aGlzLm1heENvbXBvbmVudERlcHRoKSx0LmdldCgpfX0pLGg9cih7cGFyc2U6ZnVuY3Rpb24oZSl7dmFyIHQsbixpO2Uub2Zmc2V0KHRoaXMub2Zmc2V0KSx0PXRoaXMuZmlsZSxuPXQuaGhlYSx0aGlzLm1ldHJpY3M9ZS50aW1lcyhuLm51bU9mTG9uZ0hvck1ldHJpY3MsZnVuY3Rpb24oKXtyZXR1cm57YWR2YW5jZTplLnJlYWRTaG9ydCgpLGxzYjplLnJlYWRTaG9ydF8oKX19KSxpPXQubWF4cC5udW1HbHlwaHMtdC5oaGVhLm51bU9mTG9uZ0hvck1ldHJpY3MsdGhpcy5sZWZ0U2lkZUJlYXJpbmdzPWUudGltZXMoaSxlLnJlYWRTaG9ydF8pfSxmb3JHbHlwaDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm1ldHJpY3Msbj10Lmxlbmd0aDtyZXR1cm4gbj5lP3RbZV06e2FkdmFuY2U6dFtuLTFdLmFkdmFuY2UsbHNiOnRoaXMubGVmdFNpZGVCZWFyaW5nc1tlLW5dfX0scmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT13KCk7Zm9yKHQ9MDtlLmxlbmd0aD50OysrdCluPXRoaXMuZm9yR2x5cGgoZVt0XSksaS53cml0ZVNob3J0KG4uYWR2YW5jZSksaS53cml0ZVNob3J0XyhuLmxzYik7cmV0dXJuIGkuZ2V0KCl9fSkscD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5yYXc9ZX1mdW5jdGlvbiBuKGUpe3ZhciB0LG4scjtmb3IodGhpcy5yYXc9ZSx0PXRoaXMuZ2x5cGhJZHM9W10sbj10aGlzLmlkT2Zmc2V0cz1bXTs7KXtpZihyPWUucmVhZFNob3J0KCksbi5wdXNoKGUub2Zmc2V0KCkpLHQucHVzaChlLnJlYWRTaG9ydCgpKSwhKHImYSkpYnJlYWs7ZS5za2lwKHImaT80OjIpLHImbD9lLnNraXAoOCk6ciZzP2Uuc2tpcCg0KTpyJm8mJmUuc2tpcCgyKX19dmFyIGksbyxhLHMsbCxjO3JldHVybiBlLnByb3RvdHlwZT17Y29tcG91bmQ6ITEscmVuZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmF3LmdldCgpfX0saT0xLG89OCxhPTMyLHM9NjQsbD0xMjgsYz0yNTYsbi5wcm90b3R5cGU9e2NvbXBvdW5kOiEwLHJlbmRlcjpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dyh0aGlzLnJhdy5nZXQoKSk7Zm9yKHQ9MDt0aGlzLmdseXBoSWRzLmxlbmd0aD50OysrdCluPXRoaXMuZ2x5cGhJZHNbdF0saS5vZmZzZXQodGhpcy5pZE9mZnNldHNbdF0pLGkud3JpdGVTaG9ydChlW25dKTtyZXR1cm4gaS5nZXQoKX19LHIoe3BhcnNlOmZ1bmN0aW9uKCl7dGhpcy5jYWNoZT17fX0sZ2x5cGhGb3I6ZnVuY3Rpb24oaSl7dmFyIHIsbyxhLHMsbCxjLGQsdSxoLHAsZixnPXRoaXMuY2FjaGU7cmV0dXJuIHQoZyxpKT9nW2ldOihyPXRoaXMuZmlsZS5sb2NhLG89ci5sZW5ndGhPZihpKSwwPT09bz9nW2ldPW51bGw6KGE9dGhpcy5yYXdEYXRhLHM9dGhpcy5vZmZzZXQrci5vZmZzZXRPZihpKSxsPXcoYS5zbGljZShzLG8pKSxjPWwucmVhZFNob3J0XygpLGQ9bC5yZWFkU2hvcnRfKCksdT1sLnJlYWRTaG9ydF8oKSxoPWwucmVhZFNob3J0XygpLHA9bC5yZWFkU2hvcnRfKCksZj1nW2ldPS0xPT1jP25ldyBuKGwpOm5ldyBlKGwpLGYubnVtYmVyT2ZDb250b3Vycz1jLGYueE1pbj1kLGYueU1pbj11LGYueE1heD1oLGYueU1heD1wLGYpKX0scmVuZGVyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sYT13KCkscz1bXTtmb3IoaT0wO3QubGVuZ3RoPmk7KytpKXI9dFtpXSxvPWVbcl0scy5wdXNoKGEub2Zmc2V0KCkpLG8mJmEud3JpdGUoby5yZW5kZXIobikpO3JldHVybiBzLnB1c2goYS5vZmZzZXQoKSkse3RhYmxlOmEuZ2V0KCksb2Zmc2V0czpzfX19KX0oKSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMudGV4dD1lLHRoaXMubGVuZ3RoPWUubGVuZ3RoLHRoaXMucGxhdGZvcm1JRD10LnBsYXRmb3JtSUQsdGhpcy5wbGF0Zm9ybVNwZWNpZmljSUQ9dC5wbGF0Zm9ybVNwZWNpZmljSUQsdGhpcy5sYW5ndWFnZUlEPXQubGFuZ3VhZ2VJRCx0aGlzLm5hbWVJRD10Lm5hbWVJRH1yZXR1cm4gcih7cGFyc2U6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG8sYSxzLGwsYztmb3IodC5vZmZzZXQodGhpcy5vZmZzZXQpLG49dC5yZWFkU2hvcnQoKSxpPXQucmVhZFNob3J0KCkscj10aGlzLm9mZnNldCt0LnJlYWRTaG9ydCgpLG89dC50aW1lcyhpLGZ1bmN0aW9uKCl7cmV0dXJue3BsYXRmb3JtSUQ6dC5yZWFkU2hvcnQoKSxwbGF0Zm9ybVNwZWNpZmljSUQ6dC5yZWFkU2hvcnQoKSxsYW5ndWFnZUlEOnQucmVhZFNob3J0KCksbmFtZUlEOnQucmVhZFNob3J0KCksbGVuZ3RoOnQucmVhZFNob3J0KCksb2Zmc2V0OnQucmVhZFNob3J0KCkrcn19KSxhPXRoaXMuc3RyaW5ncz17fSxzPTA7by5sZW5ndGg+czsrK3MpbD1vW3NdLHQub2Zmc2V0KGwub2Zmc2V0KSxjPXQucmVhZFN0cmluZyhsLmxlbmd0aCksYVtsLm5hbWVJRF18fChhW2wubmFtZUlEXT1bXSksYVtsLm5hbWVJRF0ucHVzaChuZXcgZShjLGwpKTt0aGlzLnBvc3RzY3JpcHRFbnRyeT1hWzZdWzBdLHRoaXMucG9zdHNjcmlwdE5hbWU9dGhpcy5wb3N0c2NyaXB0RW50cnkudGV4dC5yZXBsYWNlKC9bXlxceDIwLVxceDdGXS9nLFwiXCIpfSxyZW5kZXI6ZnVuY3Rpb24obil7dmFyIGkscixvLGEscyxsLGM9dGhpcy5zdHJpbmdzLGQ9MDtmb3IoaSBpbiBjKXQoYyxpKSYmKGQrPWNbaV0ubGVuZ3RoKTtyPXcoKSxvPXcoKSxyLndyaXRlU2hvcnQoMCksci53cml0ZVNob3J0KGQpLHIud3JpdGVTaG9ydCg2KzEyKmQpO2ZvcihpIGluIGMpaWYodChjLGkpKWZvcihhPTY9PWk/W25ldyBlKG4sdGhpcy5wb3N0c2NyaXB0RW50cnkpXTpjW2ldLHM9MDthLmxlbmd0aD5zOysrcylsPWFbc10sci53cml0ZVNob3J0KGwucGxhdGZvcm1JRCksci53cml0ZVNob3J0KGwucGxhdGZvcm1TcGVjaWZpY0lEKSxyLndyaXRlU2hvcnQobC5sYW5ndWFnZUlEKSxyLndyaXRlU2hvcnQobC5uYW1lSUQpLHIud3JpdGVTaG9ydChsLmxlbmd0aCksci53cml0ZVNob3J0KG8ub2Zmc2V0KCkpLG8ud3JpdGVTdHJpbmcobC50ZXh0KTtyZXR1cm4gci53cml0ZShvLmdldCgpKSxyLmdldCgpfX0pfSgpLGc9ZnVuY3Rpb24oKXt2YXIgZT1cIi5ub3RkZWYgLm51bGwgbm9ubWFya2luZ3JldHVybiBzcGFjZSBleGNsYW0gcXVvdGVkYmwgbnVtYmVyc2lnbiBkb2xsYXIgcGVyY2VudCBhbXBlcnNhbmQgcXVvdGVzaW5nbGUgcGFyZW5sZWZ0IHBhcmVucmlnaHQgYXN0ZXJpc2sgcGx1cyBjb21tYSBoeXBoZW4gcGVyaW9kIHNsYXNoIHplcm8gb25lIHR3byB0aHJlZSBmb3VyIGZpdmUgc2l4IHNldmVuIGVpZ2h0IG5pbmUgY29sb24gc2VtaWNvbG9uIGxlc3MgZXF1YWwgZ3JlYXRlciBxdWVzdGlvbiBhdCBBIEIgQyBEIEUgRiBHIEggSSBKIEsgTCBNIE4gTyBQIFEgUiBTIFQgVSBWIFcgWCBZIFogYnJhY2tldGxlZnQgYmFja3NsYXNoIGJyYWNrZXRyaWdodCBhc2NpaWNpcmN1bSB1bmRlcnNjb3JlIGdyYXZlIGEgYiBjIGQgZSBmIGcgaCBpIGogayBsIG0gbiBvIHAgcSByIHMgdCB1IHYgdyB4IHkgeiBicmFjZWxlZnQgYmFyIGJyYWNlcmlnaHQgYXNjaWl0aWxkZSBBZGllcmVzaXMgQXJpbmcgQ2NlZGlsbGEgRWFjdXRlIE50aWxkZSBPZGllcmVzaXMgVWRpZXJlc2lzIGFhY3V0ZSBhZ3JhdmUgYWNpcmN1bWZsZXggYWRpZXJlc2lzIGF0aWxkZSBhcmluZyBjY2VkaWxsYSBlYWN1dGUgZWdyYXZlIGVjaXJjdW1mbGV4IGVkaWVyZXNpcyBpYWN1dGUgaWdyYXZlIGljaXJjdW1mbGV4IGlkaWVyZXNpcyBudGlsZGUgb2FjdXRlIG9ncmF2ZSBvY2lyY3VtZmxleCBvZGllcmVzaXMgb3RpbGRlIHVhY3V0ZSB1Z3JhdmUgdWNpcmN1bWZsZXggdWRpZXJlc2lzIGRhZ2dlciBkZWdyZWUgY2VudCBzdGVybGluZyBzZWN0aW9uIGJ1bGxldCBwYXJhZ3JhcGggZ2VybWFuZGJscyByZWdpc3RlcmVkIGNvcHlyaWdodCB0cmFkZW1hcmsgYWN1dGUgZGllcmVzaXMgbm90ZXF1YWwgQUUgT3NsYXNoIGluZmluaXR5IHBsdXNtaW51cyBsZXNzZXF1YWwgZ3JlYXRlcmVxdWFsIHllbiBtdSBwYXJ0aWFsZGlmZiBzdW1tYXRpb24gcHJvZHVjdCBwaSBpbnRlZ3JhbCBvcmRmZW1pbmluZSBvcmRtYXNjdWxpbmUgT21lZ2EgYWUgb3NsYXNoIHF1ZXN0aW9uZG93biBleGNsYW1kb3duIGxvZ2ljYWxub3QgcmFkaWNhbCBmbG9yaW4gYXBwcm94ZXF1YWwgRGVsdGEgZ3VpbGxlbW90bGVmdCBndWlsbGVtb3RyaWdodCBlbGxpcHNpcyBub25icmVha2luZ3NwYWNlIEFncmF2ZSBBdGlsZGUgT3RpbGRlIE9FIG9lIGVuZGFzaCBlbWRhc2ggcXVvdGVkYmxsZWZ0IHF1b3RlZGJscmlnaHQgcXVvdGVsZWZ0IHF1b3RlcmlnaHQgZGl2aWRlIGxvemVuZ2UgeWRpZXJlc2lzIFlkaWVyZXNpcyBmcmFjdGlvbiBjdXJyZW5jeSBndWlsc2luZ2xsZWZ0IGd1aWxzaW5nbHJpZ2h0IGZpIGZsIGRhZ2dlcmRibCBwZXJpb2RjZW50ZXJlZCBxdW90ZXNpbmdsYmFzZSBxdW90ZWRibGJhc2UgcGVydGhvdXNhbmQgQWNpcmN1bWZsZXggRWNpcmN1bWZsZXggQWFjdXRlIEVkaWVyZXNpcyBFZ3JhdmUgSWFjdXRlIEljaXJjdW1mbGV4IElkaWVyZXNpcyBJZ3JhdmUgT2FjdXRlIE9jaXJjdW1mbGV4IGFwcGxlIE9ncmF2ZSBVYWN1dGUgVWNpcmN1bWZsZXggVWdyYXZlIGRvdGxlc3NpIGNpcmN1bWZsZXggdGlsZGUgbWFjcm9uIGJyZXZlIGRvdGFjY2VudCByaW5nIGNlZGlsbGEgaHVuZ2FydW1sYXV0IG9nb25layBjYXJvbiBMc2xhc2ggbHNsYXNoIFNjYXJvbiBzY2Fyb24gWmNhcm9uIHpjYXJvbiBicm9rZW5iYXIgRXRoIGV0aCBZYWN1dGUgeWFjdXRlIFRob3JuIHRob3JuIG1pbnVzIG11bHRpcGx5IG9uZXN1cGVyaW9yIHR3b3N1cGVyaW9yIHRocmVlc3VwZXJpb3Igb25laGFsZiBvbmVxdWFydGVyIHRocmVlcXVhcnRlcnMgZnJhbmMgR2JyZXZlIGdicmV2ZSBJZG90YWNjZW50IFNjZWRpbGxhIHNjZWRpbGxhIENhY3V0ZSBjYWN1dGUgQ2Nhcm9uIGNjYXJvbiBkY3JvYXRcIi5zcGxpdCgvXFxzKy9nKTtyZXR1cm4gcih7cGFyc2U6ZnVuY3Rpb24oZSl7dmFyIHQsbjtzd2l0Y2goZS5vZmZzZXQodGhpcy5vZmZzZXQpLHRoaXMuZm9ybWF0PWUucmVhZExvbmcoKSx0aGlzLml0YWxpY0FuZ2xlPWUucmVhZEZpeGVkXygpLHRoaXMudW5kZXJsaW5lUG9zaXRpb249ZS5yZWFkU2hvcnRfKCksdGhpcy51bmRlcmxpbmVUaGlja25lc3M9ZS5yZWFkU2hvcnRfKCksdGhpcy5pc0ZpeGVkUGl0Y2g9ZS5yZWFkTG9uZygpLHRoaXMubWluTWVtVHlwZTQyPWUucmVhZExvbmcoKSx0aGlzLm1heE1lbVR5cGU0Mj1lLnJlYWRMb25nKCksdGhpcy5taW5NZW1UeXBlMT1lLnJlYWRMb25nKCksdGhpcy5tYXhNZW1UeXBlMT1lLnJlYWRMb25nKCksdGhpcy5mb3JtYXQpe2Nhc2UgNjU1MzY6Y2FzZSAxOTY2MDg6YnJlYWs7Y2FzZSAxMzEwNzI6Zm9yKHQ9ZS5yZWFkU2hvcnQoKSx0aGlzLmdseXBoTmFtZUluZGV4PWUudGltZXModCxlLnJlYWRTaG9ydCksdGhpcy5uYW1lcz1bXSxuPXRoaXMub2Zmc2V0K3RoaXMubGVuZ3RoO2Uub2Zmc2V0KCk8bjspdGhpcy5uYW1lcy5wdXNoKGUucmVhZFN0cmluZyhlLnJlYWRCeXRlKCkpKTticmVhaztjYXNlIDE1MTU1Mjp0PWUucmVhZFNob3J0KCksdGhpcy5vZmZzZXRzPWUucmVhZCh0KTticmVhaztjYXNlIDI2MjE0NDp0aGlzLm1hcD1lLnRpbWVzKHRoaXMuZmlsZS5tYXhwLm51bUdseXBocyxlLnJlYWRTaG9ydCl9fSxnbHlwaEZvcjpmdW5jdGlvbih0KXtzd2l0Y2godGhpcy5mb3JtYXQpe2Nhc2UgNjU1MzY6cmV0dXJuIGVbdF18fFwiLm5vdGRlZlwiO2Nhc2UgMTMxMDcyOnZhciBuPXRoaXMuZ2x5cGhOYW1lSW5kZXhbdF07cmV0dXJuIGUubGVuZ3RoPm4/ZVtuXTp0aGlzLm5hbWVzW24tZS5sZW5ndGhdfHxcIi5ub3RkZWZcIjtjYXNlIDE1MTU1MjpjYXNlIDE5NjYwODpyZXR1cm5cIi5ub3RkZWZcIjtjYXNlIDI2MjE0NDpyZXR1cm4gdGhpcy5tYXBbdF18fDY1NTM1fX0scmVuZGVyOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvLGEscyxsO2lmKDE5NjYwOD09dGhpcy5mb3JtYXQpcmV0dXJuIHRoaXMucmF3KCk7Zm9yKG49dyh0aGlzLnJhd0RhdGEuc2xpY2UodGhpcy5vZmZzZXQsMzIpKSxuLndyaXRlTG9uZygxMzEwNzIpLG4ub2Zmc2V0KDMyKSxpPVtdLHI9W10sbz0wO3QubGVuZ3RoPm87KytvKWE9dFtvXSxzPXRoaXMuZ2x5cGhGb3IoYSksbD1lLmluZGV4T2YocyksbD49MD9pLnB1c2gobCk6KGkucHVzaChlLmxlbmd0aCtyLmxlbmd0aCksci5wdXNoKHMpKTtmb3Iobi53cml0ZVNob3J0KHQubGVuZ3RoKSxvPTA7aS5sZW5ndGg+bzsrK28pbi53cml0ZVNob3J0KGlbb10pO2ZvcihvPTA7ci5sZW5ndGg+bzsrK28pbi53cml0ZUJ5dGUocltvXS5sZW5ndGgpLG4ud3JpdGVTdHJpbmcocltvXSk7cmV0dXJuIG4uZ2V0KCl9fSl9KCksbT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt2YXIgbj10aGlzO24ucGxhdGZvcm1JRD1lLnJlYWRTaG9ydCgpLG4ucGxhdGZvcm1TcGVjaWZpY0lEPWUucmVhZFNob3J0KCksbi5vZmZzZXQ9dCtlLnJlYWRMb25nKCksZS5zYXZlRXhjdXJzaW9uKGZ1bmN0aW9uKCl7dmFyIHQsaSxyLG8sYSxzLGwsYyxkLHUsaCxwLGY7c3dpdGNoKGUub2Zmc2V0KG4ub2Zmc2V0KSxuLmZvcm1hdD1lLnJlYWRTaG9ydCgpLG4ubGVuZ3RoPWUucmVhZFNob3J0KCksbi5sYW5ndWFnZT1lLnJlYWRTaG9ydCgpLG4uaXNVbmljb2RlPTM9PW4ucGxhdGZvcm1JRCYmMT09bi5wbGF0Zm9ybVNwZWNpZmljSUQmJjQ9PW4uZm9ybWF0fHwwPT09bi5wbGF0Zm9ybUlEJiY0PT1uLmZvcm1hdCxuLmNvZGVNYXA9e30sbi5mb3JtYXQpe2Nhc2UgMDpmb3IodD0wOzI1Nj50OysrdCluLmNvZGVNYXBbdF09ZS5yZWFkQnl0ZSgpO2JyZWFrO2Nhc2UgNDpmb3IoaT1lLnJlYWRTaG9ydCgpLzIsZS5za2lwKDYpLHI9ZS50aW1lcyhpLGUucmVhZFNob3J0KSxlLnNraXAoMiksbz1lLnRpbWVzKGksZS5yZWFkU2hvcnQpLGE9ZS50aW1lcyhpLGUucmVhZFNob3J0Xykscz1lLnRpbWVzKGksZS5yZWFkU2hvcnQpLGw9KG4ubGVuZ3RoK24ub2Zmc2V0LWUub2Zmc2V0KCkpLzIsYz1lLnRpbWVzKGwsZS5yZWFkU2hvcnQpLHQ9MDtpPnQ7Kyt0KWZvcihkPW9bdF0sdT1yW3RdLGg9ZDt1Pj1oOysraCkwPT09c1t0XT9wPWgrYVt0XTooZj1zW3RdLzItKGktdCkrKGgtZCkscD1jW2ZdfHwwLDAhPT1wJiYocCs9YVt0XSkpLG4uY29kZU1hcFtoXT02NTUzNSZwfX0pfWZ1bmN0aW9uIHQoZSx0KXtmdW5jdGlvbiBpKG4pe3JldHVybiB0W2Vbbl1dfXZhciByLG8sYSxzLGwsYyxkLHUsaCxwLGYsZyxtLHYsXyx5LGIsaz1uKGUpLHg9W10sQz1bXSxTPW51bGwsVD1udWxsO2ZvcihyPTA7ay5sZW5ndGg+cjsrK3Ipbz1rW3JdLGE9aShvKSxzPWEtbywobnVsbD09U3x8cyE9PVQpJiYoUyYmQy5wdXNoKFMpLHgucHVzaChvKSxUPXMpLFM9bztmb3IoUyYmQy5wdXNoKFMpLEMucHVzaCg2NTUzNSkseC5wdXNoKDY1NTM1KSxsPXgubGVuZ3RoLGM9MipsLGQ9MipNYXRoLnBvdygyLE1hdGguZmxvb3IoTWF0aC5sb2cobCkvTWF0aC5MTjIpKSx1PU1hdGgubG9nKGQvMikvTWF0aC5MTjIsaD1jLWQscD1bXSxmPVtdLGc9W10scj0wO2w+cjsrK3Ipe2lmKG09eFtyXSx2PUNbcl0sNjU1MzU9PW0pe3AucHVzaCgwKSxmLnB1c2goMCk7YnJlYWt9aWYoXz1pKG0pLG0tXz49MzI3NjgpZm9yKHAucHVzaCgwKSxmLnB1c2goMiooZy5sZW5ndGgrbC1yKSkseT1tO3Y+PXk7Kyt5KWcucHVzaChpKHkpKTtlbHNlIHAucHVzaChfLW0pLGYucHVzaCgwKX1yZXR1cm4gYj13KCksYi53cml0ZVNob3J0KDMpLGIud3JpdGVTaG9ydCgxKSxiLndyaXRlTG9uZygxMiksYi53cml0ZVNob3J0KDQpLGIud3JpdGVTaG9ydCgxNis4KmwrMipnLmxlbmd0aCksYi53cml0ZVNob3J0KDApLGIud3JpdGVTaG9ydChjKSxiLndyaXRlU2hvcnQoZCksYi53cml0ZVNob3J0KHUpLGIud3JpdGVTaG9ydChoKSxDLmZvckVhY2goYi53cml0ZVNob3J0KSxiLndyaXRlU2hvcnQoMCkseC5mb3JFYWNoKGIud3JpdGVTaG9ydCkscC5mb3JFYWNoKGIud3JpdGVTaG9ydF8pLGYuZm9yRWFjaChiLndyaXRlU2hvcnQpLGcuZm9yRWFjaChiLndyaXRlU2hvcnQpLGIuZ2V0KCl9cmV0dXJuIHIoe3BhcnNlOmZ1bmN0aW9uKHQpe3ZhciBuLGk9dGhpcyxyPWkub2Zmc2V0O3Qub2Zmc2V0KHIpLGkudmVyc2lvbj10LnJlYWRTaG9ydCgpLG49dC5yZWFkU2hvcnQoKSxpLnVuaWNvZGVFbnRyeT1udWxsLGkudGFibGVzPXQudGltZXMobixmdW5jdGlvbigpe3ZhciBuPW5ldyBlKHQscik7cmV0dXJuIG4uaXNVbmljb2RlJiYoaS51bmljb2RlRW50cnk9biksbn0pfSxyZW5kZXI6ZnVuY3Rpb24oZSxuKXt2YXIgaT13KCk7cmV0dXJuIGkud3JpdGVTaG9ydCgwKSxpLndyaXRlU2hvcnQoMSksaS53cml0ZSh0KGUsbikpLGkuZ2V0KCl9LGdldFVuaWNvZGVFbnRyeTpmdW5jdGlvbigpe2lmKCF0aGlzLnVuaWNvZGVFbnRyeSl0aHJvdyBFcnJvcihcIkZvbnQgZG9lc24ndCBoYXZlIGFuIFVuaWNvZGUgZW5jb2RpbmdcIik7cmV0dXJuIHRoaXMudW5pY29kZUVudHJ5fX0pfSgpLHY9cih7cGFyc2U6ZnVuY3Rpb24oZSl7ZS5vZmZzZXQodGhpcy5vZmZzZXQpLHRoaXMudmVyc2lvbj1lLnJlYWRTaG9ydCgpLHRoaXMuYXZlcmFnZUNoYXJXaWR0aD1lLnJlYWRTaG9ydF8oKSx0aGlzLndlaWdodENsYXNzPWUucmVhZFNob3J0KCksdGhpcy53aWR0aENsYXNzPWUucmVhZFNob3J0KCksdGhpcy50eXBlPWUucmVhZFNob3J0KCksdGhpcy55U3Vic2NyaXB0WFNpemU9ZS5yZWFkU2hvcnRfKCksdGhpcy55U3Vic2NyaXB0WVNpemU9ZS5yZWFkU2hvcnRfKCksdGhpcy55U3Vic2NyaXB0WE9mZnNldD1lLnJlYWRTaG9ydF8oKSx0aGlzLnlTdWJzY3JpcHRZT2Zmc2V0PWUucmVhZFNob3J0XygpLHRoaXMueVN1cGVyc2NyaXB0WFNpemU9ZS5yZWFkU2hvcnRfKCksdGhpcy55U3VwZXJzY3JpcHRZU2l6ZT1lLnJlYWRTaG9ydF8oKSx0aGlzLnlTdXBlcnNjcmlwdFhPZmZzZXQ9ZS5yZWFkU2hvcnRfKCksdGhpcy55U3VwZXJzY3JpcHRZT2Zmc2V0PWUucmVhZFNob3J0XygpLHRoaXMueVN0cmlrZW91dFNpemU9ZS5yZWFkU2hvcnRfKCksdGhpcy55U3RyaWtlb3V0UG9zaXRpb249ZS5yZWFkU2hvcnRfKCksdGhpcy5mYW1pbHlDbGFzcz1lLnJlYWRTaG9ydF8oKSx0aGlzLnBhbm9zZT1lLnRpbWVzKDEwLGUucmVhZEJ5dGUpLHRoaXMuY2hhclJhbmdlPWUudGltZXMoNCxlLnJlYWRMb25nKSx0aGlzLnZlbmRvcklEPWUucmVhZFN0cmluZyg0KSx0aGlzLnNlbGVjdGlvbj1lLnJlYWRTaG9ydCgpLHRoaXMuZmlyc3RDaGFySW5kZXg9ZS5yZWFkU2hvcnQoKSx0aGlzLmxhc3RDaGFySW5kZXg9ZS5yZWFkU2hvcnQoKSx0aGlzLnZlcnNpb24+MCYmKHRoaXMuYXNjZW50PWUucmVhZFNob3J0XygpLHRoaXMuZGVzY2VudD1lLnJlYWRTaG9ydF8oKSx0aGlzLmxpbmVHYXA9ZS5yZWFkU2hvcnRfKCksdGhpcy53aW5Bc2NlbnQ9ZS5yZWFkU2hvcnQoKSx0aGlzLndpbkRlc2NlbnQ9ZS5yZWFkU2hvcnQoKSx0aGlzLmNvZGVQYWdlUmFuZ2U9ZS50aW1lcygyLGUucmVhZExvbmcpLHRoaXMudmVyc2lvbj4xJiYodGhpcy54SGVpZ2h0PWUucmVhZFNob3J0KCksdGhpcy5jYXBIZWlnaHQ9ZS5yZWFkU2hvcnQoKSx0aGlzLmRlZmF1bHRDaGFyPWUucmVhZFNob3J0KCksdGhpcy5icmVha0NoYXI9ZS5yZWFkU2hvcnQoKSx0aGlzLm1heENvbnRleHQ9ZS5yZWFkU2hvcnQoKSkpfSxyZW5kZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYXcoKX19KSxfPTFlNSxhLnByb3RvdHlwZT17dXNlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG87aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpe2ZvcihuPVwiXCIsaT0wO2UubGVuZ3RoPmk7KytpKXQ9dGhpcy51c2UoZS5jaGFyQ29kZUF0KGkpKSxuKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHQpO3JldHVybiBufXJldHVybiB0PXRoaXMudW5pY29kZXNbZV0sdHx8KHQ9dGhpcy5uZXh0KyssdGhpcy5zdWJzZXRbdF09ZSx0aGlzLnVuaWNvZGVzW2VdPXQscj10aGlzLmZvbnQuY21hcC5nZXRVbmljb2RlRW50cnkoKS5jb2RlTWFwW2VdLHImJih0aGlzLm5jaWQyb2dpZFt0XT1yLG51bGw9PXRoaXMub2dpZDJuZ2lkW3JdJiYobz10aGlzLm5leHRHaWQrKyx0aGlzLm9naWQybmdpZFtyXT1vLHRoaXMubmdpZDJvZ2lkW29dPXIpKSksdH0sZW5jb2RlVGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy51c2UoZSl9LGdseXBoSWRzOmZ1bmN0aW9uKCl7cmV0dXJuIG4odGhpcy5vZ2lkMm5naWQpfSxnbHlwaHNGb3I6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI7Zm9yKHR8fCh0PXt9KSxuPTA7ZS5sZW5ndGg+bjsrK24paT1lW25dLHRbaV18fChyPXRbaV09dGhpcy5mb250LmdseWYuZ2x5cGhGb3IoaSksciYmci5jb21wb3VuZCYmdGhpcy5nbHlwaHNGb3Ioci5nbHlwaElkcyx0KSk7cmV0dXJuIHR9LHJlbmRlcjpmdW5jdGlvbigpe3ZhciBlLGkscixvLGEscyxsLGMsZD10aGlzLmdseXBoc0Zvcih0aGlzLmdseXBoSWRzKCkpO2ZvcihlIGluIGQpdChkLGUpJiYoZT1wYXJzZUludChlLDEwKSxudWxsPT10aGlzLm9naWQybmdpZFtlXSYmKGk9dGhpcy5uZXh0R2lkKyssdGhpcy5vZ2lkMm5naWRbZV09aSx0aGlzLm5naWQyb2dpZFtpXT1lKSk7cmV0dXJuIHI9bih0aGlzLm5naWQyb2dpZCksbz1yLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5uZ2lkMm9naWRbZV19LHRoaXMpLGE9dGhpcy5mb250LHM9YS5nbHlmLnJlbmRlcihkLG8sdGhpcy5vZ2lkMm5naWQpLGw9YS5sb2NhLnJlbmRlcihzLm9mZnNldHMpLHRoaXMubGFzdENoYXI9dGhpcy5uZXh0LTEsYz17Y21hcDptLnJlbmRlcih0aGlzLm5jaWQyb2dpZCx0aGlzLm9naWQybmdpZCksZ2x5ZjpzLnRhYmxlLGxvY2E6bC50YWJsZSxobXR4OmEuaG10eC5yZW5kZXIobyksaGhlYTphLmhoZWEucmVuZGVyKG8pLG1heHA6YS5tYXhwLnJlbmRlcihvKSxwb3N0OmEucG9zdC5yZW5kZXIobyksbmFtZTphLm5hbWUucmVuZGVyKHRoaXMucHNOYW1lKSxoZWFkOmEuaGVhZC5yZW5kZXIobC5mb3JtYXQpLFwiT1MvMlwiOmEub3MyLnJlbmRlcigpfSx0aGlzLmZvbnQuZGlyZWN0b3J5LnJlbmRlcihjKX0sY2lkVG9HaWRNYXA6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT13KCkscj0wO2ZvcihlPXRoaXMuZmlyc3RDaGFyO3RoaXMubmV4dD5lOysrZSl7Zm9yKDtlPnI7KWkud3JpdGVTaG9ydCgwKSxyKys7dD10aGlzLm5jaWQyb2dpZFtlXSx0PyhuPXRoaXMub2dpZDJuZ2lkW3RdLGkud3JpdGVTaG9ydChuKSk6aS53cml0ZVNob3J0KDApLHIrK31yZXR1cm4gaS5nZXQoKX19LHMucHJvdG90eXBlPXtwYXJzZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZGlyZWN0b3J5PW5ldyBpKHRoaXMuY29udGVudHMpO3RoaXMuaGVhZD1lLnJlYWRUYWJsZShcImhlYWRcIixsKSx0aGlzLmxvY2E9ZS5yZWFkVGFibGUoXCJsb2NhXCIsYyksdGhpcy5oaGVhPWUucmVhZFRhYmxlKFwiaGhlYVwiLGQpLHRoaXMubWF4cD1lLnJlYWRUYWJsZShcIm1heHBcIix1KSx0aGlzLmhtdHg9ZS5yZWFkVGFibGUoXCJobXR4XCIsaCksdGhpcy5nbHlmPWUucmVhZFRhYmxlKFwiZ2x5ZlwiLHApLHRoaXMubmFtZT1lLnJlYWRUYWJsZShcIm5hbWVcIixmKSx0aGlzLnBvc3Q9ZS5yZWFkVGFibGUoXCJwb3N0XCIsZyksdGhpcy5jbWFwPWUucmVhZFRhYmxlKFwiY21hcFwiLG0pLHRoaXMub3MyPWUucmVhZFRhYmxlKFwiT1MvMlwiLHYpLHRoaXMucHNOYW1lPXRoaXMubmFtZS5wb3N0c2NyaXB0TmFtZSx0aGlzLmFzY2VudD10aGlzLm9zMi5hc2NlbnR8fHRoaXMuaGhlYS5hc2NlbnQsdGhpcy5kZXNjZW50PXRoaXMub3MyLmRlc2NlbnR8fHRoaXMuaGhlYS5kZXNjZW50LHRoaXMubGluZUdhcD10aGlzLm9zMi5saW5lR2FwfHx0aGlzLmhoZWEubGluZUdhcCx0aGlzLnNjYWxlPTFlMy90aGlzLmhlYWQudW5pdHNQZXJFbX0sd2lkdGhPZkdseXBoOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmhtdHguZm9yR2x5cGgoZSkuYWR2YW5jZSp0aGlzLnNjYWxlfSxtYWtlU3Vic2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBhKHRoaXMpfX0seS5UVEZGb250PXN9KHRoaXMpLGZ1bmN0aW9uKGUpe2UuUERGTWl4aW49e2V4dGVuZDpmdW5jdGlvbihlKXtlLmV2ZW50cy5wdXNoKFwicGRmRXhwb3J0XCIpLGUub3B0aW9ucy5wZGY9dGhpcy5vcHRpb25zLGUuc2F2ZUFzUERGPXRoaXMuc2F2ZUFzUERGfSxvcHRpb25zOntmaWxlTmFtZTpcIkV4cG9ydC5wZGZcIixwcm94eVVSTDpcIlwiLHBhcGVyU2l6ZTpcImF1dG9cIixsYW5kc2NhcGU6ITEsbWFyZ2luOm51bGwsdGl0bGU6bnVsbCxhdXRob3I6bnVsbCxzdWJqZWN0Om51bGwsa2V5d29yZHM6bnVsbCxjcmVhdG9yOlwiS2VuZG8gVUkgUERGIEdlbmVyYXRvclwiLGRhdGU6bnVsbH0sc2F2ZUFzUERGOmZ1bmN0aW9uKCl7aWYoIXRoaXMudHJpZ2dlcihcInBkZkV4cG9ydFwiKSl7dmFyIHQ9dGhpcy5vcHRpb25zLnBkZjtcclxuZS5kcmF3aW5nLmRyYXdET00odGhpcy53cmFwcGVyWzBdKS50aGVuKGZ1bmN0aW9uKG4pe3JldHVybiBlLmRyYXdpbmcuZXhwb3J0UERGKG4sdCl9KS5kb25lKGZ1bmN0aW9uKG4pe2Uuc2F2ZUFzKHtkYXRhVVJJOm4sZmlsZU5hbWU6dC5maWxlTmFtZSxwcm94eVVSTDp0LnByb3h5VVJMLGZvcmNlUHJveHk6dC5mb3JjZVByb3h5fSl9KX19fX0oa2VuZG8pLGZ1bmN0aW9uKGUsdCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbigpe2lmKCFlLnBkZil0aHJvdyBFcnJvcihcImtlbmRvLnBkZi5qcyBpcyBub3QgbG9hZGVkXCIpO3JldHVybiBlLnBkZn1mdW5jdGlvbiBpKGUsdCl7ZnVuY3Rpb24gaShlLHQpe3JldHVybiBkLnBkZiYmbnVsbCE9ZC5wZGZbZV0/ZC5wZGZbZV06dH1mdW5jdGlvbiByKCl7dmFyIHIsYSxzLGMsZCx1LHA7LS1vPjB8fChyPWkoXCJwYXBlclNpemVcIixcImF1dG9cIiksYT0hMSxcImF1dG9cIj09ciYmKGg/KHM9aC5nZXRTaXplKCkscj1bcy53aWR0aCxzLmhlaWdodF0sYT0hMCxjPWguZ2V0T3JpZ2luKCksZD1uZXcgRC5Hcm91cCxkLnRyYW5zZm9ybShuZXcgQS5NYXRyaXgoMSwwLDAsMSwtYy54LC1jLnkpKSxkLmFwcGVuZChlKSxlPWQpOnI9XCJBNFwiKSx1PW5ldyhuKCkuRG9jdW1lbnQpKHtwYXBlclNpemU6cixsYW5kc2NhcGU6aShcImxhbmRzY2FwZVwiLCExKSxtYXJnaW46aShcIm1hcmdpblwiKSxhZGRNYXJnaW46YSx0aXRsZTppKFwidGl0bGVcIiksYXV0aG9yOmkoXCJhdXRob3JcIiksc3ViamVjdDppKFwic3ViamVjdFwiKSxrZXl3b3JkczppKFwia2V5d29yZHNcIiksY3JlYXRvcjppKFwiY3JlYXRvclwiKSxkYXRlOmkoXCJkYXRlXCIpfSkscD11LmFkZFBhZ2UoKSxsKGUscCx1KSx0KHUucmVuZGVyKCksdSxwKSl9dmFyIG8sYT1bXSxjPVtdLGQ9ZS5vcHRpb25zLHU9VChlKSxoPXUuYmJveDtlPXUucm9vdCxlLnRyYXZlcnNlKGZ1bmN0aW9uKGUpe3Moe0ltYWdlOmZ1bmN0aW9uKGUpe2MuaW5kZXhPZihlLnNyYygpKTwwJiZjLnB1c2goZS5zcmMoKSl9LFRleHQ6ZnVuY3Rpb24oZSl7dmFyIHQ9bigpLnBhcnNlRm9udERlZihlLm9wdGlvbnMuZm9udCksaT1uKCkuZ2V0Rm9udFVSTCh0KTthLmluZGV4T2YoaSk8MCYmYS5wdXNoKGkpfX0sZSl9KSxvPTIsbigpLmxvYWRGb250cyhhLHIpLG4oKS5sb2FkSW1hZ2VzKGMscil9ZnVuY3Rpb24gcihlLHQpe2koZSxmdW5jdGlvbihlKXt0KFwiZGF0YTphcHBsaWNhdGlvbi9wZGY7YmFzZTY0LFwiK2UuYmFzZTY0KCkpfSl9ZnVuY3Rpb24gbyhlLHQpe2koZSxmdW5jdGlvbihlKXt0KG5ldyBCbG9iKFtlLmdldCgpXSx7dHlwZTpcImFwcGxpY2F0aW9uL3BkZlwifSkpfSl9ZnVuY3Rpb24gYSh0LG4saSxhKXt3aW5kb3cuQmxvYiYmIWUuc3VwcG9ydC5icm93c2VyLnNhZmFyaT9vKHQsZnVuY3Rpb24odCl7ZS5zYXZlQXMoe2RhdGFVUkk6dCxmaWxlTmFtZTpufSksYSYmYSh0KX0pOnIodCxmdW5jdGlvbih0KXtlLnNhdmVBcyh7ZGF0YVVSSTp0LGZpbGVOYW1lOm4scHJveHlVUkw6aX0pLGEmJmEodCl9KX1mdW5jdGlvbiBzKGUsdCl7dmFyIG49ZVt0Lm5vZGVUeXBlXTtyZXR1cm4gbj9uLmNhbGwuYXBwbHkobixhcmd1bWVudHMpOnR9ZnVuY3Rpb24gbChlLHQsbil7dmFyIGkscixvO2UuREVCVUcmJnQuY29tbWVudChlLkRFQlVHKSxpPWUudHJhbnNmb3JtKCkscj1lLm9wYWNpdHkoKSx0LnNhdmUoKSxudWxsIT1yJiYxPnImJnQuc2V0T3BhY2l0eShyKSxjKGUsdCxuKSxkKGUsdCxuKSx1KGUsdCxuKSxpJiYobz1pLm1hdHJpeCgpLHQudHJhbnNmb3JtKG8uYSxvLmIsby5jLG8uZCxvLmUsby5mKSkscyh7UGF0aDp2LE11bHRpUGF0aDpfLENpcmNsZTp5LEFyYzp3LFRleHQ6YixJbWFnZTp4LEdyb3VwOmt9LGUsdCxuKSx0LnJlc3RvcmUoKX1mdW5jdGlvbiBjKGUsdCl7dmFyIG4saSxyLG8sYSxzLGw9ZS5zdHJva2UmJmUuc3Ryb2tlKCk7aWYobCl7aWYobj1sLmNvbG9yKXtpZihuPVMobiksbnVsbD09bilyZXR1cm47dC5zZXRTdHJva2VDb2xvcihuLnIsbi5nLG4uYiksMSE9bi5hJiZ0LnNldFN0cm9rZU9wYWNpdHkobi5hKX1pZihpPWwud2lkdGgsbnVsbCE9aSl7aWYoMD09PWkpcmV0dXJuO3Quc2V0TGluZVdpZHRoKGkpfXI9bC5kYXNoVHlwZSxyJiZ0LnNldERhc2hQYXR0ZXJuKEVbcl0sMCksbz1sLmxpbmVDYXAsbyYmdC5zZXRMaW5lQ2FwKE1bb10pLGE9bC5saW5lSm9pbixhJiZ0LnNldExpbmVKb2luKFBbYV0pLHM9bC5vcGFjaXR5LG51bGwhPXMmJnQuc2V0U3Ryb2tlT3BhY2l0eShzKX19ZnVuY3Rpb24gZChlLHQpe3ZhciBuLGkscj1lLmZpbGwmJmUuZmlsbCgpO2lmKHImJiEociBpbnN0YW5jZW9mIEQuR3JhZGllbnQpKXtpZihuPXIuY29sb3Ipe2lmKG49UyhuKSxudWxsPT1uKXJldHVybjt0LnNldEZpbGxDb2xvcihuLnIsbi5nLG4uYiksMSE9bi5hJiZ0LnNldEZpbGxPcGFjaXR5KG4uYSl9aT1yLm9wYWNpdHksbnVsbCE9aSYmdC5zZXRGaWxsT3BhY2l0eShpKX19ZnVuY3Rpb24gdShlLHQsbil7dmFyIGk9ZS5jbGlwKCk7aSYmKG0oaSx0LG4pLHQuY2xpcCgpKX1mdW5jdGlvbiBoKGUpe3JldHVybiBlJiYoZSBpbnN0YW5jZW9mIEQuR3JhZGllbnR8fGUuY29sb3ImJiEvXihub25lfHRyYW5zcGFyZW50KSQvaS50ZXN0KGUuY29sb3IpJiYobnVsbD09ZS53aWR0aHx8ZS53aWR0aD4wKSYmKG51bGw9PWUub3BhY2l0eXx8ZS5vcGFjaXR5PjApKX1mdW5jdGlvbiBwKGUsdCxuLGkpe3ZhciByLG8sYSxzLGwsYyxkPWUuZmlsbCgpO3JldHVybiBkIGluc3RhbmNlb2YgRC5HcmFkaWVudD8oaT90LnN0cm9rZSgpOnQubm9wKCksZCBpbnN0YW5jZW9mIEQuTGluZWFyR3JhZGllbnQ/KHI9e3g6ZC5zdGFydCgpLngseTpkLnN0YXJ0KCkueX0sbz17eDpkLmVuZCgpLngseTpkLmVuZCgpLnl9LGE9e3R5cGU6XCJsaW5lYXJcIixzdGFydDpyLGVuZDpvLHVzZXJTcGFjZTpkLnVzZXJTcGFjZSgpLHN0b3BzOmQuc3RvcHMuZWxlbWVudHMoKS5tYXAoZnVuY3Rpb24oZSl7dmFyIHQsbj1lLm9mZnNldCgpO3JldHVybiBuPS8lJC8udGVzdChuKT9wYXJzZUZsb2F0KG4pLzEwMDpwYXJzZUZsb2F0KG4pLHQ9UyhlLmNvbG9yKCkpLHQuYSo9ZS5vcGFjaXR5KCkse29mZnNldDpuLGNvbG9yOnR9fSl9LHM9ZS5yYXdCQm94KCksbD1zLnRvcExlZnQoKSxjPXMuZ2V0U2l6ZSgpLHM9e2xlZnQ6bC54LHRvcDpsLnksd2lkdGg6Yy53aWR0aCxoZWlnaHQ6Yy5oZWlnaHR9LHQuZ3JhZGllbnQoYSxzKSwhMCk6dm9pZCh3aW5kb3cuY29uc29sZSYmd2luZG93LmNvbnNvbGUubG9nJiZ3aW5kb3cuY29uc29sZS5sb2coXCJSYWRpYWwgZ3JhZGllbnRzIGFyZSBub3QgeWV0IHN1cHBvcnRlZCBpbiBQREYgb3V0cHV0LlwiKSkpOnZvaWQgMH1mdW5jdGlvbiBmKGUsdCxuKXtoKGUuZmlsbCgpKSYmaChlLnN0cm9rZSgpKT9wKGUsdCxuLCEwKXx8dC5maWxsU3Ryb2tlKCk6aChlLmZpbGwoKSk/cChlLHQsbiwhMSl8fHQuZmlsbCgpOmgoZS5zdHJva2UoKSk/dC5zdHJva2UoKTp0Lm5vcCgpfWZ1bmN0aW9uIGcoZSx0KXt2YXIgbixpLHIsbz1lLnNlZ21lbnRzO2lmKDQ9PW8ubGVuZ3RoJiZlLm9wdGlvbnMuY2xvc2VkKXtmb3Iobj1bXSxpPTA7by5sZW5ndGg+aTsrK2kpe2lmKG9baV0uY29udHJvbEluKCkpcmV0dXJuITE7bltpXT1vW2ldLmFuY2hvcigpfWlmKHI9blswXS55PT1uWzFdLnkmJm5bMV0ueD09blsyXS54JiZuWzJdLnk9PW5bM10ueSYmblszXS54PT1uWzBdLnh8fG5bMF0ueD09blsxXS54JiZuWzFdLnk9PW5bMl0ueSYmblsyXS54PT1uWzNdLngmJm5bM10ueT09blswXS55KXJldHVybiB0LnJlY3QoblswXS54LG5bMF0ueSxuWzJdLngtblswXS54LG5bMl0ueS1uWzBdLnkpLCEwfX1mdW5jdGlvbiBtKGUsdCxuKXt2YXIgaSxyLG8sYSxzLGwsYz1lLnNlZ21lbnRzO2lmKDAhPT1jLmxlbmd0aCYmIWcoZSx0LG4pKXtmb3Iocj0wO2MubGVuZ3RoPnI7KytyKW89Y1tyXSxhPW8uYW5jaG9yKCksaT8ocz1pLmNvbnRyb2xPdXQoKSxsPW8uY29udHJvbEluKCkscyYmbD90LmJlemllcihzLngscy55LGwueCxsLnksYS54LGEueSk6dC5saW5lVG8oYS54LGEueSkpOnQubW92ZVRvKGEueCxhLnkpLGk9bztlLm9wdGlvbnMuY2xvc2VkJiZ0LmNsb3NlKCl9fWZ1bmN0aW9uIHYoZSx0LG4pe20oZSx0LG4pLGYoZSx0LG4pfWZ1bmN0aW9uIF8oZSx0LG4pe3ZhciBpLHI9ZS5wYXRocztmb3IoaT0wO3IubGVuZ3RoPmk7KytpKW0ocltpXSx0LG4pO2YoZSx0LG4pfWZ1bmN0aW9uIHkoZSx0LG4pe3ZhciBpPWUuZ2VvbWV0cnkoKTt0LmNpcmNsZShpLmNlbnRlci54LGkuY2VudGVyLnksaS5yYWRpdXMpLGYoZSx0LG4pfWZ1bmN0aW9uIHcoZSx0LG4pe3ZhciBpLHI9ZS5nZW9tZXRyeSgpLmN1cnZlUG9pbnRzKCk7Zm9yKHQubW92ZVRvKHJbMF0ueCxyWzBdLnkpLGk9MTtyLmxlbmd0aD5pOyl0LmJlemllcihyW2ldLngscltpKytdLnkscltpXS54LHJbaSsrXS55LHJbaV0ueCxyW2krK10ueSk7ZihlLHQsbil9ZnVuY3Rpb24gYihlLHQpe3ZhciBpLHI9bigpLnBhcnNlRm9udERlZihlLm9wdGlvbnMuZm9udCksbz1lLl9wb3NpdGlvbjtlLmZpbGwoKSYmZS5zdHJva2UoKT9pPW4oKS5URVhUX1JFTkRFUklOR19NT0RFLmZpbGxBbmRTdHJva2U6ZS5maWxsKCk/aT1uKCkuVEVYVF9SRU5ERVJJTkdfTU9ERS5maWxsOmUuc3Ryb2tlKCkmJihpPW4oKS5URVhUX1JFTkRFUklOR19NT0RFLnN0cm9rZSksdC50cmFuc2Zvcm0oMSwwLDAsLTEsby54LG8ueStyLmZvbnRTaXplKSx0LmJlZ2luVGV4dCgpLHQuc2V0Rm9udChuKCkuZ2V0Rm9udFVSTChyKSxyLmZvbnRTaXplKSx0LnNldFRleHRSZW5kZXJpbmdNb2RlKGkpLHQuc2hvd1RleHQoZS5jb250ZW50KCkpLHQuZW5kVGV4dCgpfWZ1bmN0aW9uIGsoZSx0LG4pe3ZhciBpLHI9ZS5jaGlsZHJlbjtmb3IoaT0wO3IubGVuZ3RoPmk7KytpKWwocltpXSx0LG4pfWZ1bmN0aW9uIHgoZSx0KXt2YXIgbj1lLnNyYygpLGk9ZS5yZWN0KCkscj1pLmdldE9yaWdpbigpLG89aS5nZXRTaXplKCk7dC50cmFuc2Zvcm0oby53aWR0aCwwLDAsLW8uaGVpZ2h0LHIueCxyLnkrby5oZWlnaHQpLHQuZHJhd0ltYWdlKG4pfWZ1bmN0aW9uIEMoZSxuKXt2YXIgaT10LkRlZmVycmVkKCk7cmV0dXJuIGUub3B0aW9ucy5zZXQoXCJwZGZcIixuKSxELnBkZi50b0RhdGFVUkwoZSxpLnJlc29sdmUpLGkucHJvbWlzZSgpfWZ1bmN0aW9uIFModCl7dmFyIG49ZS5wYXJzZUNvbG9yKHQsITApO3JldHVybiBuP24udG9SR0IoKTpudWxsfWZ1bmN0aW9uIFQoZSl7ZnVuY3Rpb24gdChlKXtyZXR1cm4gbD0hMCxlfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIGUudmlzaWJsZSgpJiZlLm9wYWNpdHkoKT4wJiYoaChlLmZpbGwoKSl8fGgoZS5zdHJva2UoKSkpfWZ1bmN0aW9uIGkoZSl7dmFyIHQsbixpPVtdO2Zvcih0PTA7ZS5sZW5ndGg+dDsrK3Qpbj1hKGVbdF0pLG51bGwhPW4mJmkucHVzaChuKTtyZXR1cm4gaX1mdW5jdGlvbiByKGUsdCl7dmFyIG4saT1jLHI9ZDtlLnRyYW5zZm9ybSgpJiYoZD1kLm11bHRpcGx5Q29weShlLnRyYW5zZm9ybSgpLm1hdHJpeCgpKSksbj1lLmNsaXAoKSxuJiYobj1uLmJib3goKSxuJiYobj1uLmJib3goZCksYz1jP0EuUmVjdC5pbnRlcnNlY3QoYyxuKTpuKSk7dHJ5e3JldHVybiB0KCl9ZmluYWxseXtjPWksZD1yfX1mdW5jdGlvbiBvKGUpe2lmKG51bGw9PWMpcmV0dXJuITE7dmFyIHQ9ZS5yYXdCQm94KCkuYmJveChkKTtyZXR1cm4gYyYmdCYmKHQ9QS5SZWN0LmludGVyc2VjdCh0LGMpKSx0fWZ1bmN0aW9uIGEoYSl7aWYoIShhIGluc3RhbmNlb2YgRC5Hcm91cHx8YSBpbnN0YW5jZW9mIEQuTXVsdGlQYXRoKSl7dmFyIGw9byhhKTtpZighbClyZXR1cm4gdChudWxsKTt1PXU/QS5SZWN0LnVuaW9uKHUsbCk6bH1yZXR1cm4gcyh7UGF0aDpmdW5jdGlvbihlKXtyZXR1cm4gMCE9PWUuc2VnbWVudHMubGVuZ3RoJiZuKGUpP2U6dChudWxsKX0sTXVsdGlQYXRoOmZ1bmN0aW9uKGUpe2lmKCFuKGUpKXJldHVybiB0KG51bGwpO3ZhciByPW5ldyBELk11bHRpUGF0aChlLm9wdGlvbnMpO3JldHVybiByLnBhdGhzPWkoZS5wYXRocyksMD09PXIucGF0aHMubGVuZ3RoP3QobnVsbCk6cn0sQ2lyY2xlOmZ1bmN0aW9uKGUpe3JldHVybiBuKGUpP2U6dChudWxsKX0sQXJjOmZ1bmN0aW9uKGUpe3JldHVybiBuKGUpP2U6dChudWxsKX0sVGV4dDpmdW5jdGlvbihlKXtyZXR1cm4vXFxTLy50ZXN0KGUuY29udGVudCgpKSYmbihlKT9lOnQobnVsbCl9LEltYWdlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnZpc2libGUoKSYmZS5vcGFjaXR5KCk+MD9lOnQobnVsbCl9LEdyb3VwOmZ1bmN0aW9uKG4pe3JldHVybiByKG4sZnVuY3Rpb24oKXt2YXIgcj1uZXcgRC5Hcm91cChuLm9wdGlvbnMpO3JldHVybiByLmNoaWxkcmVuPWkobi5jaGlsZHJlbiksbiE9PWUmJjA9PT1yLmNoaWxkcmVuLmxlbmd0aD90KG51bGwpOnJ9KX19LGEpfXZhciBsLGM9ITEsZD1BLk1hdHJpeC51bml0KCksdT1udWxsO2RvIGw9ITEsZT1hKGUpO3doaWxlKGUmJmwpO3JldHVybntyb290OmUsYmJveDp1fX12YXIgRD1lLmRyYXdpbmcsQT1lLmdlb21ldHJ5LEU9e2Rhc2g6WzRdLGRhc2hEb3Q6WzQsMiwxLDJdLGRvdDpbMSwyXSxsb25nRGFzaDpbOCwyXSxsb25nRGFzaERvdDpbOCwyLDEsMl0sbG9uZ0Rhc2hEb3REb3Q6WzgsMiwxLDIsMSwyXSxzb2xpZDpbXX0sTT17YnV0dDowLHJvdW5kOjEsc3F1YXJlOjJ9LFA9e21pdGVyOjAscm91bmQ6MSxiZXZlbDoyfTtlLmRlZXBFeHRlbmQoRCx7ZXhwb3J0UERGOkMscGRmOnt0b0RhdGFVUkw6cix0b0Jsb2I6byxzYXZlQXM6YSx0b1N0cmVhbTppfX0pfSh3aW5kb3cua2VuZG8sd2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkoZSl7ZnVuY3Rpb24gdCh0KXtyZXR1cm4gaT10LmV4ZWMoZS5zdWJzdHIoYSkpfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIGUucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKX1mb3IodmFyIGkscj1bXSxvPTAsYT0wLHM9MCxsPSExO2UubGVuZ3RoPmE7KXQoL15cXHMrLyk/YSs9aVswXS5sZW5ndGg6dCgvXltcXChcXFtcXHtdLyk/KHMrKyxhKyspOnQoL15bXFwpXFxdXFx9XS8pPyhzLS0sYSsrKTohbCYmdCgvXltcXFwiXFwnXS8pPyhsPWlbMF0sYSsrKTpcIidcIj09bCYmdCgvXlxcXFxcXCcvKT9hKz0yOidcIic9PWwmJnQoL15cXFxcXFxcIi8pP2ErPTI6XCInXCI9PWwmJnQoL15cXCcvKT8obD0hMSxhKyspOidcIic9PWwmJnQoL15cXFwiLyk/KGw9ITEsYSsrKTp0KC9eXFxzKixcXHMqLyk/KCFsJiYhcyYmYT5vJiYoci5wdXNoKG4oZS5zdWJzdHJpbmcobyxhKSkpLG89YStpWzBdLmxlbmd0aCksYSs9aVswXS5sZW5ndGgpOmErKztyZXR1cm4gYT5vJiZyLnB1c2gobihlLnN1YnN0cmluZyhvLGEpKSkscn1mdW5jdGlvbiByKGUsdCl7dmFyIG49a2VuZG8ucGFyc2VDb2xvcihlKTtyZXR1cm4gbiYmKG49bi50b1JHQigpLHQ/bj1uLnRvQ3NzUmdiYSgpOjA9PT1uLmEmJihuPW51bGwpKSxufWZ1bmN0aW9uIG8oZSx0KXtmdW5jdGlvbiBuKGUpe2pbZV18fChqW2VdPSEwLG8ucHVzaChlKSl9ZnVuY3Rpb24gaSgpey0tcjw9MCYmdCgpfXZhciByLG89W107IWZ1bmN0aW9uIHMoZSl7dmFyIHQsaT1hKGgodShlKSxcImJhY2tncm91bmQtaW1hZ2VcIikpO2ZvcigvXmltZyQvaS50ZXN0KGUudGFnTmFtZSkmJm4oZS5zcmMpLGkmJm4oaSksdD1lLmZpcnN0Q2hpbGQ7dDt0PXQubmV4dFNpYmxpbmcpMT09dC5ub2RlVHlwZSYmcyh0KX0oZSkscj1vLmxlbmd0aCwwPT09ciYmaSgpLG8uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1qW2VdPW5ldyBJbWFnZTt0Lm9ubG9hZD1pLHQub25lcnJvcj1mdW5jdGlvbigpe2pbZV09bnVsbCxpKCl9LHQuc3JjPWUsKHQuY29tcGxldGV8fHZvaWQgMD09PXQuY29tcGxldGUpJiYodC5zcmM9XCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQUFBQUFBUC8vL3l3QUFBQUFBUUFCQUFBQ0FVd0FPdz09XCIsdC5zcmM9ZSl9KX1mdW5jdGlvbiBhKGUpe3ZhciB0PS9eXFxzKnVybFxcKChbJ1wiXT8pKC4qPylcXDFcXClcXHMqJC9pLmV4ZWMoZSk7cmV0dXJuIHQ/dFsyXTp2b2lkIDB9ZnVuY3Rpb24gcyhlLHQsbil7dmFyIGkscjtPPU9iamVjdC5jcmVhdGUoTyksT1tlLnRhZ05hbWUudG9Mb3dlckNhc2UoKV09e2VsZW1lbnQ6ZSxzdHlsZTp0fSxpPWgodCxcInRleHQtZGVjb3JhdGlvblwiKSxpJiZcIm5vbmVcIiE9aSYmKHI9aCh0LFwiY29sb3JcIiksaS5zcGxpdCgvXFxzKy9nKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09bZV18fChPW2VdPXIpfSkpLGQoZSkmJihPLl9zdGFja2luZ0NvbnRleHQ9e2VsZW1lbnQ6ZSxncm91cDpufSl9ZnVuY3Rpb24gbCgpe089T2JqZWN0LmdldFByb3RvdHlwZU9mKE8pfWZ1bmN0aW9uIGMoZSl7aWYobnVsbCE9Ty5fY2xpcGJveCl7dmFyIHQ9ZS5iYm94KE8uX21hdHJpeCk7Ty5fY2xpcGJveD1PLl9jbGlwYm94P1YuUmVjdC5pbnRlcnNlY3QoTy5fY2xpcGJveCx0KTp0fX1mdW5jdGlvbiBkKGUpe2Z1bmN0aW9uIHQoZSl7cmV0dXJuIGgobixlKX12YXIgbj11KGUpO3JldHVyblwibm9uZVwiIT10KFwidHJhbnNmb3JtXCIpfHxcInN0YXRpY1wiIT10KFwicG9zaXRpb25cIikmJlwiYXV0b1wiIT10KFwiei1pbmRleFwiKXx8dChcIm9wYWNpdHlcIik8MT8hMDp2b2lkIDB9ZnVuY3Rpb24gdShlKXtyZXR1cm4gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZSl9ZnVuY3Rpb24gaChlLHQpe3JldHVybiBlLmdldFByb3BlcnR5VmFsdWUodCl8fFcud2Via2l0JiZlLmdldFByb3BlcnR5VmFsdWUoXCItd2Via2l0LVwiK3QpfHxXLmZpcmVmb3gmJmUuZ2V0UHJvcGVydHlWYWx1ZShcIi1tb3otXCIrdCl8fFcub3BlcmEmJmUuZ2V0UHJvcGVydHlWYWx1ZShcIi1vLVwiK3QpfHxXLm1zaWUmJmUuZ2V0UHJvcGVydHlWYWx1ZShcIi1tcy1cIit0KX1mdW5jdGlvbiBwKGUsdCxuLGkpe2Uuc2V0UHJvcGVydHkodCxuLGkpLFcud2Via2l0P2Uuc2V0UHJvcGVydHkoXCItd2Via2l0LVwiK3QsbixpKTpXLmZpcmVmb3g/ZS5zZXRQcm9wZXJ0eShcIi1tb3otXCIrdCxuLGkpOlcub3BlcmE/ZS5zZXRQcm9wZXJ0eShcIi1vLVwiK3QsbixpKTpXLm1zaWUmJihlLnNldFByb3BlcnR5KFwiLW1zLVwiK3QsbixpKSx0PVwibXNcIit0LnJlcGxhY2UoLyhefC0pKFthLXpdKS9nLGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdCtuLnRvVXBwZXJDYXNlKCl9KSxlW3RdPW4pfWZ1bmN0aW9uIGYoZSxuKXtyZXR1cm4gbj1cImJvcmRlci1cIituLHt3aWR0aDp0KGgoZSxuK1wiLXdpZHRoXCIpKSxzdHlsZTpoKGUsbitcIi1zdHlsZVwiKSxjb2xvcjpyKGgoZSxuK1wiLWNvbG9yXCIpLCEwKX19ZnVuY3Rpb24gZyhlLHQpe3ZhciBuPWUuc3R5bGUuY3NzVGV4dCxpPXQoKTtyZXR1cm4gZS5zdHlsZS5jc3NUZXh0PW4saX1mdW5jdGlvbiBtKGUsbil7dmFyIGk9aChlLFwiYm9yZGVyLVwiK24rXCItcmFkaXVzXCIpLnNwbGl0KC9cXHMrL2cpLm1hcCh0KTtyZXR1cm4gMT09aS5sZW5ndGgmJmkucHVzaChpWzBdKSxTKHt4OmlbMF0seTppWzFdfSl9ZnVuY3Rpb24gdihlKXt2YXIgdD1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3JldHVybiB0PV8odCxcImJvcmRlci0qLXdpZHRoXCIsZSksdD1fKHQsXCJwYWRkaW5nLSpcIixlKX1mdW5jdGlvbiBfKGUsbixpKXt2YXIgcixvLGEscyxsO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBuPyhyPXUoaSksbz10KGgocixuLnJlcGxhY2UoXCIqXCIsXCJ0b3BcIikpKSxhPXQoaChyLG4ucmVwbGFjZShcIipcIixcInJpZ2h0XCIpKSkscz10KGgocixuLnJlcGxhY2UoXCIqXCIsXCJib3R0b21cIikpKSxsPXQoaChyLG4ucmVwbGFjZShcIipcIixcImxlZnRcIikpKSk6XCJudW1iZXJcIj09dHlwZW9mIG4mJihvPWE9cz1sPW4pLHt0b3A6ZS50b3ArbyxyaWdodDplLnJpZ2h0LWEsYm90dG9tOmUuYm90dG9tLXMsbGVmdDplLmxlZnQrbCx3aWR0aDplLnJpZ2h0LWUubGVmdC1hLWwsaGVpZ2h0OmUuYm90dG9tLWUudG9wLXMtb319ZnVuY3Rpb24geShlKXt2YXIgbixpLHI9aChlLFwidHJhbnNmb3JtXCIpO3JldHVyblwibm9uZVwiPT1yP251bGw6KG49L15cXHMqbWF0cml4XFwoXFxzKiguKj8pXFxzKlxcKVxccyokLy5leGVjKHIpLG4/KGk9aChlLFwidHJhbnNmb3JtLW9yaWdpblwiKSxuPW5bMV0uc3BsaXQoL1xccyosXFxzKi9nKS5tYXAodCksaT1pLnNwbGl0KC9cXHMrL2cpLm1hcCh0KSx7bWF0cml4Om4sb3JpZ2luOml9KTp2b2lkIDApfWZ1bmN0aW9uIHcoZSl7cmV0dXJuIDE4MCplL24uUEklMzYwfWZ1bmN0aW9uIGIoZSl7dmFyIGk9dChlKTtyZXR1cm4vZ3JhZCQvLnRlc3QoZSk/bi5QSSppLzIwMDovcmFkJC8udGVzdChlKT9pOi90dXJuJC8udGVzdChlKT9uLlBJKmkqMjovZGVnJC8udGVzdChlKT9uLlBJKmkvMTgwOnZvaWQgMH1mdW5jdGlvbiBrKGUsdCl7cmV0dXJuIHQ9bmV3IFYuTWF0cml4KHRbMF0sdFsxXSx0WzJdLHRbM10sdFs0XSx0WzVdKSxlLnRyYW5zZm9ybSh0KSx0fWZ1bmN0aW9uIHgoZSx0KXtlLmNsaXAodCl9ZnVuY3Rpb24gQyhlLHQsbixpKXtmb3IodmFyIHI9bmV3IFYuQXJjKFt0LG5dLGkpLmN1cnZlUG9pbnRzKCksbz0xO3IubGVuZ3RoPm87KWUuY3VydmVUbyhyW28rK10scltvKytdLHJbbysrXSl9ZnVuY3Rpb24gUyhlKXtyZXR1cm4oMD49ZS54fHwwPj1lLnkpJiYoZS54PWUueT0wKSxlfWZ1bmN0aW9uIFQoZSxuLGkpe3ZhciByLG8sYSxzLGwsYyxkLHAsZz11KGUpLHY9bShnLFwidG9wLWxlZnRcIiksXz1tKGcsXCJ0b3AtcmlnaHRcIikseT1tKGcsXCJib3R0b20tbGVmdFwiKSx3PW0oZyxcImJvdHRvbS1yaWdodFwiKTtyZXR1cm4oXCJwYWRkaW5nXCI9PWl8fFwiY29udGVudFwiPT1pKSYmKHI9ZihnLFwidG9wXCIpLG89ZihnLFwicmlnaHRcIiksYT1mKGcsXCJib3R0b21cIikscz1mKGcsXCJsZWZ0XCIpLHYueC09cy53aWR0aCx2LnktPXIud2lkdGgsXy54LT1vLndpZHRoLF8ueS09ci53aWR0aCx3LngtPW8ud2lkdGgsdy55LT1hLndpZHRoLHkueC09cy53aWR0aCx5LnktPWEud2lkdGgsXCJjb250ZW50XCI9PWkmJihsPXQoaChnLFwicGFkZGluZy10b3BcIikpLGM9dChoKGcsXCJwYWRkaW5nLXJpZ2h0XCIpKSxkPXQoaChnLFwicGFkZGluZy1ib3R0b21cIikpLHA9dChoKGcsXCJwYWRkaW5nLWxlZnRcIikpLHYueC09cCx2LnktPWwsXy54LT1jLF8ueS09bCx3LngtPWMsdy55LT1kLHkueC09cCx5LnktPWQpKSxcIm51bWJlclwiPT10eXBlb2YgaSYmKHYueC09aSx2LnktPWksXy54LT1pLF8ueS09aSx3LngtPWksdy55LT1pLHkueC09aSx5LnktPWkpLEQobix2LF8sdyx5KX1mdW5jdGlvbiBEKGUsdCxuLGkscil7dmFyIG89bmV3IE4uUGF0aCh7ZmlsbDpudWxsLHN0cm9rZTpudWxsfSk7cmV0dXJuIFModCksUyhuKSxTKGkpLFMociksby5tb3ZlVG8oZS5sZWZ0LGUudG9wK3QueSksdC54JiZDKG8sZS5sZWZ0K3QueCxlLnRvcCt0Lnkse3N0YXJ0QW5nbGU6LTE4MCxlbmRBbmdsZTotOTAscmFkaXVzWDp0LngscmFkaXVzWTp0Lnl9KSxvLmxpbmVUbyhlLnJpZ2h0LW4ueCxlLnRvcCksbi54JiZDKG8sZS5yaWdodC1uLngsZS50b3Arbi55LHtzdGFydEFuZ2xlOi05MCxlbmRBbmdsZTowLHJhZGl1c1g6bi54LHJhZGl1c1k6bi55fSksby5saW5lVG8oZS5yaWdodCxlLmJvdHRvbS1pLnkpLGkueCYmQyhvLGUucmlnaHQtaS54LGUuYm90dG9tLWkueSx7c3RhcnRBbmdsZTowLGVuZEFuZ2xlOjkwLHJhZGl1c1g6aS54LHJhZGl1c1k6aS55fSksby5saW5lVG8oZS5sZWZ0K3IueCxlLmJvdHRvbSksci54JiZDKG8sZS5sZWZ0K3IueCxlLmJvdHRvbS1yLnkse3N0YXJ0QW5nbGU6OTAsZW5kQW5nbGU6MTgwLHJhZGl1c1g6ci54LHJhZGl1c1k6ci55fSksby5jbG9zZSgpfWZ1bmN0aW9uIEEoZSxvKXtmdW5jdGlvbiBzKHQpe3ZhciBuLGkscixvLGEscztpZigvXnRkJC9pLnRlc3QoZS50YWdOYW1lKSYmKG49Ty50YWJsZSxuJiZcImNvbGxhcHNlXCI9PWgobi5zdHlsZSxcImJvcmRlci1jb2xsYXBzZVwiKSkpe2lmKGk9ZihuLnN0eWxlLFwibGVmdFwiKS53aWR0aCxyPWYobi5zdHlsZSxcInRvcFwiKS53aWR0aCwwPT09aSYmMD09PXIpcmV0dXJuIHQ7aWYobz1uLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYT1uLmVsZW1lbnQucm93c1swXS5jZWxsc1swXSxzPWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscy50b3A9PW8udG9wfHxzLmxlZnQ9PW8ubGVmdClyZXR1cm4gVS5jYWxsKHQpLm1hcChmdW5jdGlvbihlKXtyZXR1cm57bGVmdDplLmxlZnQraSx0b3A6ZS50b3ArcixyaWdodDplLnJpZ2h0K2ksYm90dG9tOmUuYm90dG9tK3IsaGVpZ2h0OmUuaGVpZ2h0LHdpZHRoOmUud2lkdGh9fSl9cmV0dXJuIHR9ZnVuY3Rpb24gbChlLHQsaSxyLGEscyxsLGMpe2Z1bmN0aW9uIGQodCxyLG8pe3ZhciBhPW4uUEkvMip0Lyh0K2kpLHM9e3g6ci54LXQseTpyLnktaX0sbD1uZXcgTi5QYXRoKHtmaWxsOntjb2xvcjplfSxzdHJva2U6bnVsbH0pLm1vdmVUbygwLDApO2sobCxvKSxDKGwsMCxyLnkse3N0YXJ0QW5nbGU6LTkwLGVuZEFuZ2xlOi13KGEpLHJhZGl1c1g6ci54LHJhZGl1c1k6ci55fSkscy54PjAmJnMueT4wPyhsLmxpbmVUbyhzLngqbi5jb3MoYSksci55LXMueSpuLnNpbihhKSksQyhsLDAsci55LHtzdGFydEFuZ2xlOi13KGEpLGVuZEFuZ2xlOi05MCxyYWRpdXNYOnMueCxyYWRpdXNZOnMueSxhbnRpY2xvY2t3aXNlOiEwfSkpOnMueD4wP2wubGluZVRvKHMueCxpKS5saW5lVG8oMCxpKTpsLmxpbmVUbyhzLngsaSkubGluZVRvKHMueCwwKSxoLmFwcGVuZChsLmNsb3NlKCkpfWlmKCEoMD49aSkpe3ZhciB1LGg9bmV3IE4uR3JvdXA7ayhoLGMpLG8uYXBwZW5kKGgpLFMocyksUyhsKSx1PW5ldyBOLlBhdGgoe2ZpbGw6e2NvbG9yOmV9LHN0cm9rZTpudWxsfSksaC5hcHBlbmQodSksdS5tb3ZlVG8ocy54P24ubWF4KHMueCxyKTowLDApLmxpbmVUbyh0LShsLng/bi5tYXgobC54LGEpOjApLDApLmxpbmVUbyh0LW4ubWF4KGwueCxhKSxpKS5saW5lVG8obi5tYXgocy54LHIpLGkpLmNsb3NlKCkscy54JiZkKHIscyxbLTEsMCwwLDEscy54LDBdKSxsLngmJmQoYSxsLFsxLDAsMCwxLHQtbC54LDBdKX19ZnVuY3Rpb24gZChlKXt2YXIgdCxuLGkscixhLHMsbCxjPW5ldyBOLkdyb3VwO2Zvcih4KGMsRChlLFksSyxYLFEpKSxvLmFwcGVuZChjKSxaJiYodD1uZXcgTi5QYXRoKHtmaWxsOntjb2xvcjpaLnRvQ3NzUmdiYSgpfSxzdHJva2U6bnVsbH0pLHQubW92ZVRvKGUubGVmdCxlLnRvcCkubGluZVRvKGUucmlnaHQsZS50b3ApLmxpbmVUbyhlLnJpZ2h0LGUuYm90dG9tKS5saW5lVG8oZS5sZWZ0LGUuYm90dG9tKS5jbG9zZSgpLGMuYXBwZW5kKHQpKSxsPXYubGVuZ3RoOy0tbD49MDspbj12W2xdLGk9eVtsXXx8eVt5Lmxlbmd0aC0xXSxyPWJbbF18fGJbYi5sZW5ndGgtMV0sYT1BW2xdfHxBW0EubGVuZ3RoLTFdLHM9UFtsXXx8UFtQLmxlbmd0aC0xXSxwKGMsZSxuLGkscixhLHMpfWZ1bmN0aW9uIHAobixpLHIsbyxzLGwsYyl7ZnVuY3Rpb24gZChuLGkscixhLGQpe2Z1bmN0aW9uIHUoKXtmb3IoO20ub3JpZ2luLng+aS5sZWZ0OyltLm9yaWdpbi54LT1yfWZ1bmN0aW9uIGgoKXtmb3IoO20ub3JpZ2luLnk+aS50b3A7KW0ub3JpZ2luLnktPWF9ZnVuY3Rpb24gcCgpe2Zvcig7aS5yaWdodD5tLm9yaWdpbi54OylkKG4sbS5jbG9uZSgpKSxtLm9yaWdpbi54Kz1yfXZhciBmLGcsbSx2LHk9ci9hLHc9aTtpZihcImNvbnRlbnQtYm94XCI9PWw/KHc9Xyh3LFwiYm9yZGVyLSotd2lkdGhcIixlKSx3PV8odyxcInBhZGRpbmctKlwiLGUpKTpcInBhZGRpbmctYm94XCI9PWwmJih3PV8odyxcImJvcmRlci0qLXdpZHRoXCIsZSkpLC9eXFxzKmF1dG8oXFxzK2F1dG8pP1xccyokLy50ZXN0KGMpfHwoZj1jLnNwbGl0KC9cXHMrL2cpLHI9LyUkLy50ZXN0KGZbMF0pP3cud2lkdGgqdChmWzBdKS8xMDA6dChmWzBdKSxhPTE9PWYubGVuZ3RofHxcImF1dG9cIj09ZlsxXT9yL3k6LyUkLy50ZXN0KGZbMV0pP3cuaGVpZ2h0KnQoZlsxXSkvMTAwOnQoZlsxXSkpLGc9KHMrXCJcIikuc3BsaXQoL1xccysvKSwxPT1nLmxlbmd0aCYmKGdbMV09XCI1MCVcIiksZ1swXT0vJSQvLnRlc3QoZ1swXSk/dChnWzBdKS8xMDAqKHcud2lkdGgtcik6dChnWzBdKSxnWzFdPS8lJC8udGVzdChnWzFdKT90KGdbMV0pLzEwMCoody5oZWlnaHQtYSk6dChnWzFdKSxtPW5ldyBWLlJlY3QoW3cubGVmdCtnWzBdLHcudG9wK2dbMV1dLFtyLGFdKSxcIm5vLXJlcGVhdFwiPT1vKWQobixtKTtlbHNlIGlmKFwicmVwZWF0LXhcIj09byl1KCkscCgpO2Vsc2UgaWYoXCJyZXBlYXQteVwiPT1vKWZvcihoKCk7aS5ib3R0b20+bS5vcmlnaW4ueTspZChuLG0uY2xvbmUoKSksbS5vcmlnaW4ueSs9YTtlbHNlIGlmKFwicmVwZWF0XCI9PW8pZm9yKHUoKSxoKCksdj1tLm9yaWdpbi5jbG9uZSgpO2kuYm90dG9tPm0ub3JpZ2luLnk7KW0ub3JpZ2luLng9di54LHAoKSxtLm9yaWdpbi55Kz1hfXZhciB1LGgscDtyJiZcIm5vbmVcIiE9ciYmKC9edXJsXFwoXFxcImRhdGE6aW1hZ2VcXC9zdmcvaS50ZXN0KHIpfHwodT1hKHIpLHU/KGg9alt1XSxoJiZoLndpZHRoPjAmJmguaGVpZ2h0PjAmJmQobixpLGgud2lkdGgsaC5oZWlnaHQsZnVuY3Rpb24oZSx0KXtlLmFwcGVuZChuZXcgTi5JbWFnZSh1LHQpKX0pKToocD1IKHIpLHAmJmQobixpLGkud2lkdGgsaS5oZWlnaHQsRShwKSkpKSl9ZnVuY3Rpb24gZyh0LG4saSl7ZnVuY3Rpb24gcihlKXtyZXR1cm57eDplLnkseTplLnh9fXZhciBhLHMsYztpZigwIT09dC53aWR0aCYmMCE9PXQuaGVpZ2h0JiYoZCh0KSxhPSQud2lkdGg+MCYmKG4mJlwibHRyXCI9PUp8fGkmJlwicnRsXCI9PUopLHM9Ry53aWR0aD4wJiYoaSYmXCJsdHJcIj09Snx8biYmXCJydGxcIj09SiksMCE9PUwud2lkdGh8fDAhPT0kLndpZHRofHwwIT09Ry53aWR0aHx8MCE9PXEud2lkdGgpKXtpZihMLmNvbG9yPT1HLmNvbG9yJiZMLmNvbG9yPT1xLmNvbG9yJiZMLmNvbG9yPT0kLmNvbG9yJiZMLndpZHRoPT1HLndpZHRoJiZMLndpZHRoPT1xLndpZHRoJiZMLndpZHRoPT0kLndpZHRoJiZhJiZzKXJldHVybiB0PV8odCxMLndpZHRoLzIpLGM9VChlLHQsTC53aWR0aC8yKSxjLm9wdGlvbnMuc3Ryb2tlPXtjb2xvcjpMLmNvbG9yLHdpZHRoOkwud2lkdGh9LHZvaWQgby5hcHBlbmQoYyk7aWYoMD09PVkueCYmMD09PUsueCYmMD09PVgueCYmMD09PVEueCYmMj5MLndpZHRoJiYyPiQud2lkdGgmJjI+Ry53aWR0aCYmMj5xLndpZHRoKXJldHVybiBMLndpZHRoPjAmJm8uYXBwZW5kKG5ldyBOLlBhdGgoe3N0cm9rZTp7d2lkdGg6TC53aWR0aCxjb2xvcjpMLmNvbG9yfX0pLm1vdmVUbyh0LmxlZnQsdC50b3ArTC53aWR0aC8yKS5saW5lVG8odC5yaWdodCx0LnRvcCtMLndpZHRoLzIpKSxxLndpZHRoPjAmJm8uYXBwZW5kKG5ldyBOLlBhdGgoe3N0cm9rZTp7d2lkdGg6cS53aWR0aCxjb2xvcjpxLmNvbG9yfX0pLm1vdmVUbyh0LmxlZnQsdC5ib3R0b20tcS53aWR0aC8yKS5saW5lVG8odC5yaWdodCx0LmJvdHRvbS1xLndpZHRoLzIpKSxhJiZvLmFwcGVuZChuZXcgTi5QYXRoKHtzdHJva2U6e3dpZHRoOiQud2lkdGgsY29sb3I6JC5jb2xvcn19KS5tb3ZlVG8odC5sZWZ0KyQud2lkdGgvMix0LnRvcCkubGluZVRvKHQubGVmdCskLndpZHRoLzIsdC5ib3R0b20pKSx2b2lkKHMmJm8uYXBwZW5kKG5ldyBOLlBhdGgoe3N0cm9rZTp7d2lkdGg6Ry53aWR0aCxjb2xvcjpHLmNvbG9yfX0pLm1vdmVUbyh0LnJpZ2h0LUcud2lkdGgvMix0LnRvcCkubGluZVRvKHQucmlnaHQtRy53aWR0aC8yLHQuYm90dG9tKSkpO2woTC5jb2xvcix0LndpZHRoLEwud2lkdGgsJC53aWR0aCxHLndpZHRoLFksSyxbMSwwLDAsMSx0LmxlZnQsdC50b3BdKSxsKHEuY29sb3IsdC53aWR0aCxxLndpZHRoLEcud2lkdGgsJC53aWR0aCxYLFEsWy0xLDAsMCwtMSx0LnJpZ2h0LHQuYm90dG9tXSksbCgkLmNvbG9yLHQuaGVpZ2h0LCQud2lkdGgscS53aWR0aCxMLndpZHRoLHIoUSkscihZKSxbMCwtMSwxLDAsdC5sZWZ0LHQuYm90dG9tXSksbChHLmNvbG9yLHQuaGVpZ2h0LEcud2lkdGgsTC53aWR0aCxxLndpZHRoLHIoSykscihYKSxbMCwxLC0xLDAsdC5yaWdodCx0LnRvcF0pfX12YXIgdix5LGIsQSxQLEksRixSLEI9dShlKSxMPWYoQixcInRvcFwiKSxHPWYoQixcInJpZ2h0XCIpLHE9ZihCLFwiYm90dG9tXCIpLCQ9ZihCLFwibGVmdFwiKSxZPW0oQixcInRvcC1sZWZ0XCIpLEs9bShCLFwidG9wLXJpZ2h0XCIpLFE9bShCLFwiYm90dG9tLWxlZnRcIiksWD1tKEIsXCJib3R0b20tcmlnaHRcIiksSj1oKEIsXCJkaXJlY3Rpb25cIiksWj1oKEIsXCJiYWNrZ3JvdW5kLWNvbG9yXCIpO2ZvcihaPXIoWiksdj1pKGgoQixcImJhY2tncm91bmQtaW1hZ2VcIikpLHk9aShoKEIsXCJiYWNrZ3JvdW5kLXJlcGVhdFwiKSksYj1pKGgoQixcImJhY2tncm91bmQtcG9zaXRpb25cIikpLEE9aShoKEIsXCJiYWNrZ3JvdW5kLW9yaWdpblwiKSksUD1pKGgoQixcImJhY2tncm91bmQtc2l6ZVwiKSksVy5tc2llJiYxMD5XLnZlcnNpb24mJihiPWkoZS5jdXJyZW50U3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uKSksST1fKGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXCJib3JkZXItKi13aWR0aFwiLGUpLGZ1bmN0aW9uKCl7dmFyIGUsbixpLHIsYSxzLGwsZD1oKEIsXCJjbGlwXCIpLHU9L15cXHMqcmVjdFxcKCguKilcXClcXHMqJC8uZXhlYyhkKTt1JiYoZT11WzFdLnNwbGl0KC9bICxdKy9nKSxuPVwiYXV0b1wiPT1lWzBdP0kudG9wOnQoZVswXSkrSS50b3AsaT1cImF1dG9cIj09ZVsxXT9JLnJpZ2h0OnQoZVsxXSkrSS5sZWZ0LHI9XCJhdXRvXCI9PWVbMl0/SS5ib3R0b206dChlWzJdKStJLnRvcCxhPVwiYXV0b1wiPT1lWzNdP0kubGVmdDp0KGVbM10pK0kubGVmdCxzPW5ldyBOLkdyb3VwLGw9KG5ldyBOLlBhdGgpLm1vdmVUbyhhLG4pLmxpbmVUbyhpLG4pLmxpbmVUbyhpLHIpLmxpbmVUbyhhLHIpLmNsb3NlKCkseChzLGwpLG8uYXBwZW5kKHMpLG89cyxjKGwpKX0oKSxGPWUuZ2V0Q2xpZW50UmVjdHMoKSwxPT1GLmxlbmd0aCYmKEY9W2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCldKSxGPXMoRiksUj0wO0YubGVuZ3RoPlI7KytSKWcoRltSXSwwPT09UixSPT1GLmxlbmd0aC0xKTtyZXR1cm4gZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dmFyIHQ9VChlLEksXCJwYWRkaW5nXCIpLG49bmV3IE4uR3JvdXA7eChuLHQpLG8uYXBwZW5kKG4pLG89bixjKHQpfS9eKGhpZGRlbnxhdXRvfHNjcm9sbCkvLnRlc3QoaChCLFwib3ZlcmZsb3dcIikpP3QoKTovXihoaWRkZW58YXV0b3xzY3JvbGwpLy50ZXN0KGgoQixcIm92ZXJmbG93LXhcIikpP3QoKTovXihoaWRkZW58YXV0b3xzY3JvbGwpLy50ZXN0KGgoQixcIm92ZXJmbG93LXlcIikpJiZ0KCl9KCksTShlLG8pfHx6KGUsbyksb31mdW5jdGlvbiBFKGUpe3JldHVybiBmdW5jdGlvbihpLHIpe3t2YXIgbyxhLHMsbCxjLGQsdSxoLHAsZixnLG0sdixfPXIud2lkdGgoKSx5PXIuaGVpZ2h0KCk7ci50b3BMZWZ0KCl9c3dpdGNoKGUudHlwZSl7Y2FzZVwibGluZWFyXCI6c3dpdGNoKG89bnVsbCE9ZS5hbmdsZT9lLmFuZ2xlOm4uUEksZS50byl7Y2FzZVwidG9wXCI6bz0wO2JyZWFrO2Nhc2VcImxlZnRcIjpvPS1uLlBJLzI7YnJlYWs7Y2FzZVwiYm90dG9tXCI6bz1uLlBJO2JyZWFrO2Nhc2VcInJpZ2h0XCI6bz1uLlBJLzI7YnJlYWs7Y2FzZVwidG9wIGxlZnRcIjpjYXNlXCJsZWZ0IHRvcFwiOm89LW4uYXRhbjIoeSxfKTticmVhaztjYXNlXCJ0b3AgcmlnaHRcIjpjYXNlXCJyaWdodCB0b3BcIjpvPW4uYXRhbjIoeSxfKTticmVhaztjYXNlXCJib3R0b20gbGVmdFwiOmNhc2VcImxlZnQgYm90dG9tXCI6bz1uLlBJK24uYXRhbjIoeSxfKTticmVhaztjYXNlXCJib3R0b20gcmlnaHRcIjpjYXNlXCJyaWdodCBib3R0b21cIjpvPW4uUEktbi5hdGFuMih5LF8pfWUucmV2ZXJzZSYmKG8tPW4uUEkpLG8lPTIqbi5QSSwwPm8mJihvKz0yKm4uUEkpLGE9bi5hYnMoXypuLnNpbihvKSkrbi5hYnMoeSpuLmNvcyhvKSkscz1uLmF0YW4oXypuLnRhbihvKS95KSxsPW4uc2luKHMpLGM9bi5jb3MocyksZD1uLmFicyhsKStuLmFicyhjKSx1PWQvMipsLGg9ZC8yKmMsbz5uLlBJLzImJjMqbi5QSS8yPj1vJiYodT0tdSxoPS1oKSxwPVtdLGY9MCxnPWUuc3RvcHMubWFwKGZ1bmN0aW9uKG4saSl7dmFyIHIsbz1uLnBlcmNlbnQ7cmV0dXJuIG8/bz10KG8pLzEwMDpuLmxlbmd0aD9vPXQobi5sZW5ndGgpL2E6MD09PWk/bz0wOmk9PWUuc3RvcHMubGVuZ3RoLTEmJihvPTEpLHI9e2NvbG9yOm4uY29sb3IudG9Dc3NSZ2JhKCksb2Zmc2V0Om99LG51bGwhPW8/KGY9byxwLmZvckVhY2goZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnN0b3A7bi5vZmZzZXQ9ZS5sZWZ0KyhmLWUubGVmdCkqKHQrMSkvKHAubGVuZ3RoKzEpfSkscD1bXSk6cC5wdXNoKHtsZWZ0OmYsc3RvcDpyfSkscn0pLG09Wy41LXUsLjUraF0sdj1bLjUrdSwuNS1oXSxpLmFwcGVuZChOLlBhdGguZnJvbVJlY3Qocikuc3Ryb2tlKG51bGwpLmZpbGwobmV3IE4uTGluZWFyR3JhZGllbnQoe3N0YXJ0Om0sZW5kOnYsc3RvcHM6Zyx1c2VyU3BhY2U6ITF9KSkpO2JyZWFrO2Nhc2VcInJhZGlhbFwiOndpbmRvdy5jb25zb2xlJiZ3aW5kb3cuY29uc29sZS5sb2cmJndpbmRvdy5jb25zb2xlLmxvZyhcIlJhZGlhbCBncmFkaWVudHMgYXJlIG5vdCB5ZXQgc3VwcG9ydGVkIGluIEhUTUwgcmVuZGVyZXJcIil9fX1mdW5jdGlvbiBNKHQsbil7dmFyIGkscixvLGE7cmV0dXJuIHQuZ2V0QXR0cmlidXRlKGtlbmRvLmF0dHIoXCJyb2xlXCIpKSYmKGk9a2VuZG8ud2lkZ2V0SW5zdGFuY2UoZSh0KSksaSYmKGkuZXhwb3J0RE9NVmlzdWFsfHxpLmV4cG9ydFZpc3VhbCkpPyhyPWkuZXhwb3J0RE9NVmlzdWFsP2kuZXhwb3J0RE9NVmlzdWFsKCk6aS5leHBvcnRWaXN1YWwoKSxvPW5ldyBOLkdyb3VwLG8uY2hpbGRyZW4ucHVzaChyKSxhPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksby50cmFuc2Zvcm0oVi50cmFuc2Zvcm0oKS50cmFuc2xhdGUoYS5sZWZ0LGEudG9wKSksbi5hcHBlbmQobyksITApOnZvaWQgMH1mdW5jdGlvbiBQKGUsdCxuKXt2YXIgaT12KGUpLHI9bmV3IFYuUmVjdChbaS5sZWZ0LGkudG9wXSxbaS53aWR0aCxpLmhlaWdodF0pLG89bmV3IE4uSW1hZ2UodCxyKTt4KG8sVChlLGksXCJjb250ZW50XCIpKSxuLmFwcGVuZChvKX1mdW5jdGlvbiBJKGUsbil7dmFyIGk9dShlKSxyPXUobiksbz10KGgoaSxcInotaW5kZXhcIikpLGE9dChoKHIsXCJ6LWluZGV4XCIpKSxzPWgoaSxcInBvc2l0aW9uXCIpLGw9aChyLFwicG9zaXRpb25cIik7cmV0dXJuIGlzTmFOKG8pJiZpc05hTihhKT8vc3RhdGljfGFic29sdXRlLy50ZXN0KHMpJiYvc3RhdGljfGFic29sdXRlLy50ZXN0KGwpPzA6XCJzdGF0aWNcIj09cz8tMTpcInN0YXRpY1wiPT1sPzE6MDppc05hTihvKT8wPT09YT8wOmE+MD8tMToxOmlzTmFOKGEpPzA9PT1vPzA6bz4wPzE6LTE6dChvKS10KGEpfWZ1bmN0aW9uIHooZSx0KXt2YXIgbixpLHIsbyxhLHMsbCxjLGQ7c3dpdGNoKGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJpbWdcIjpQKGUsZS5zcmMsdCk7YnJlYWs7Y2FzZVwiY2FudmFzXCI6dHJ5e1AoZSxlLnRvRGF0YVVSTChcImltYWdlL2pwZWdcIiksdCl9Y2F0Y2gocCl7fWJyZWFrO2Nhc2VcInRleHRhcmVhXCI6Y2FzZVwiaW5wdXRcIjpicmVhaztkZWZhdWx0OmZvcihuPVtdLGk9W10scj1bXSxvPVtdLGE9ZS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKXN3aXRjaChhLm5vZGVUeXBlKXtjYXNlIDM6L1xcUy8udGVzdChhLmRhdGEpJiZGKGUsYSx0KTticmVhaztjYXNlIDE6cz11KGEpLGw9aChzLFwiZGlzcGxheVwiKSxjPWgocyxcImZsb2F0XCIpLGQ9aChzLFwicG9zaXRpb25cIiksXCJzdGF0aWNcIiE9ZD9vLnB1c2goYSk6XCJpbmxpbmVcIiE9bD9cIm5vbmVcIiE9Yz9pLnB1c2goYSk6bi5wdXNoKGEpOnIucHVzaChhKX1uLnNvcnQoSSkuZm9yRWFjaChmdW5jdGlvbihlKXtCKGUsdCl9KSxpLnNvcnQoSSkuZm9yRWFjaChmdW5jdGlvbihlKXtCKGUsdCl9KSxyLnNvcnQoSSkuZm9yRWFjaChmdW5jdGlvbihlKXtCKGUsdCl9KSxvLnNvcnQoSSkuZm9yRWFjaChmdW5jdGlvbihlKXtCKGUsdCl9KX19ZnVuY3Rpb24gRihlLG4saSl7ZnVuY3Rpb24gcigpe2Zvcih2YXIgZSx0LGk7IS9cXFMvLnRlc3Qocy5jaGFyQXQocCkpOyl7aWYocD49ZilyZXR1cm4hMDtwKyt9Zm9yKGwuc2V0U3RhcnQobixwKSxlPTA7KytwPD1mOylpZigrK2UsbC5zZXRFbmQobixwKSxlPjEmJihkJiYvXFxzLy50ZXN0KHMuY2hhckF0KHAtMSkpfHxsLmdldENsaWVudFJlY3RzKCkubGVuZ3RoPjEpKXtsLnNldEVuZChuLC0tcCk7YnJlYWt9dD1sLmdldENsaWVudFJlY3RzKClbMF0saT0oXCJcIitsKS5yZXBsYWNlKC9cXHMrJC8sXCJcIiksbyhpLHQpfWZ1bmN0aW9uIG8oZSx0KXt2YXIgbixyLG87ZT1lLnJlcGxhY2UoL1tcXHJcXG4gXSsvZyxcIiBcIiksVy5tc2llJiYhaXNOYU4obSkmJihuPU4udXRpbC5tZWFzdXJlVGV4dChlLHtmb250OnZ9KSxyPSh0LnRvcCt0LmJvdHRvbS1uLmhlaWdodCkvMix0PXt0b3A6cixyaWdodDp0LnJpZ2h0LGJvdHRvbTpyK24uaGVpZ2h0LGxlZnQ6dC5sZWZ0LGhlaWdodDpuLmhlaWdodCx3aWR0aDp0LnJpZ2h0LXQubGVmdH0pLG89bmV3IE4uVGV4dChlLG5ldyBWLlBvaW50KHQubGVmdCx0LnRvcCkse2ZvbnQ6dixmaWxsOntjb2xvcjpffX0pLGkuYXBwZW5kKG8pLGEodCl9ZnVuY3Rpb24gYShlKXtmdW5jdGlvbiB0KHQsbil7dmFyIHIsbzt0JiYocj1nLzEyLG89bmV3IE4uUGF0aCh7c3Ryb2tlOnt3aWR0aDpyLGNvbG9yOnR9fSksbi09cixvLm1vdmVUbyhlLmxlZnQsbikubGluZVRvKGUucmlnaHQsbiksaS5hcHBlbmQobykpfXQoTy51bmRlcmxpbmUsZS5ib3R0b20pLHQoT1tcImxpbmUtdGhyb3VnaFwiXSxlLmJvdHRvbS1lLmhlaWdodC8yLjcpLHQoTy5vdmVybGluZSxlLnRvcCl9dmFyIHMsbCxjLGQscCxmLGcsbSx2LF8seT11KGUpO2lmKCEodChoKHksXCJ0ZXh0LWluZGVudFwiKSk8LTUwMCkmJihzPW4uZGF0YSxsPWUub3duZXJEb2N1bWVudC5jcmVhdGVSYW5nZSgpLGM9aCh5LFwidGV4dC1hbGlnblwiKSxkPVwianVzdGlmeVwiPT1jLHA9MCxmPS9cXFNcXHMqJC8uZXhlYyhuLmRhdGEpLmluZGV4KzEsZz1oKHksXCJmb250LXNpemVcIiksbT1oKHksXCJsaW5lLWhlaWdodFwiKSx2PVtoKHksXCJmb250LXN0eWxlXCIpLGgoeSxcImZvbnQtdmFyaWFudFwiKSxoKHksXCJmb250LXdlaWdodFwiKSxnLGgoeSxcImZvbnQtZmFtaWx5XCIpXS5qb2luKFwiIFwiKSxnPXQoZyksbT10KG0pLDAhPT1nKSlmb3IoXz1oKHksXCJjb2xvclwiKTshcigpOyk7fWZ1bmN0aW9uIFIoZSx0KXt2YXIgbixpLHI9Ty5fc3RhY2tpbmdDb250ZXh0Lmdyb3VwLG89ci5jaGlsZHJlbjtmb3Iobj0wO28ubGVuZ3RoPm4mJiEobnVsbCE9b1tuXS5fZG9tX3pJbmRleCYmb1tuXS5fZG9tX3pJbmRleD50KTsrK24pO3JldHVybiBpPW5ldyBOLkdyb3VwLHIuaW5zZXJ0QXQoaSxuKSxpLl9kb21fekluZGV4PXQsTy5fY2xpcGJveCYmaS5jbGlwKE4uUGF0aC5mcm9tUmVjdChPLl9jbGlwYm94KSksaX1mdW5jdGlvbiBCKG4saSl7dmFyIHIsbyxhLGMsZCxmLG07L14oc3R5bGV8c2NyaXB0fGxpbmt8bWV0YXxpZnJhbWV8c3ZnKSQvaS50ZXN0KG4udGFnTmFtZSl8fG51bGwhPU8uX2NsaXBib3gmJihyPXUobiksbz10KGgocixcIm9wYWNpdHlcIikpLGE9aChyLFwidmlzaWJpbGl0eVwiKSxjPWgocixcImRpc3BsYXlcIiksMCE9PW8mJlwiaGlkZGVuXCIhPWEmJlwibm9uZVwiIT1jJiYoZD15KHIpLG09aChyLFwiei1pbmRleFwiKSwoZHx8MT5vKSYmXCJhdXRvXCI9PW0mJihtPTApLFwiYXV0b1wiIT1tP2Y9UihpLG0pOihmPW5ldyBOLkdyb3VwLGkuYXBwZW5kKGYpKSxmLkRFQlVHPWUobikuZGF0YShcImRlYnVnXCIpLDE+byYmZi5vcGFjaXR5KG8qZi5vcGFjaXR5KCkpLHMobixyLGYpLGQ/ZyhuLGZ1bmN0aW9uKCl7dmFyIGUsdCxpLG87cChuLnN0eWxlLFwidHJhbnNmb3JtXCIsXCJub25lXCIsXCJpbXBvcnRhbnRcIikscChuLnN0eWxlLFwidHJhbnNpdGlvblwiLFwibm9uZVwiLFwiaW1wb3J0YW50XCIpLFwic3RhdGljXCI9PWgocixcInBvc2l0aW9uXCIpJiZwKG4uc3R5bGUsXCJwb3NpdGlvblwiLFwicmVsYXRpdmVcIixcImltcG9ydGFudFwiKSxlPW4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksdD1lLmxlZnQrZC5vcmlnaW5bMF0saT1lLnRvcCtkLm9yaWdpblsxXSxvPVsxLDAsMCwxLC10LC1pXSxvPUwobyxkLm1hdHJpeCksbz1MKG8sWzEsMCwwLDEsdCxpXSksbz1rKGYsbyksTy5fbWF0cml4PU8uX21hdHJpeC5tdWx0aXBseUNvcHkobyksQShuLGYpfSk6QShuLGYpLGwoKSkpfWZ1bmN0aW9uIEwoZSx0KXt2YXIgbj1lWzBdLGk9ZVsxXSxyPWVbMl0sbz1lWzNdLGE9ZVs0XSxzPWVbNV0sbD10WzBdLGM9dFsxXSxkPXRbMl0sdT10WzNdLGg9dFs0XSxwPXRbNV07cmV0dXJuW24qbCtpKmQsbipjK2kqdSxyKmwrbypkLHIqYytvKnUsYSpsK3MqZCtoLGEqYytzKnUrcF19dmFyIE8sSCxOPWtlbmRvLmRyYXdpbmcsVj1rZW5kby5nZW9tZXRyeSxVPUFycmF5LnByb3RvdHlwZS5zbGljZSxXPWtlbmRvLnN1cHBvcnQuYnJvd3NlcixqPXt9O04uZHJhd0RPTT1mdW5jdGlvbih0KXt2YXIgbj1lLkRlZmVycmVkKCk7cmV0dXJuIHQ9ZSh0KVswXSx0P28odCxmdW5jdGlvbigpe3ZhciBlPW5ldyBOLkdyb3VwLGk9dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtrKGUsWzEsMCwwLDEsLWkubGVmdCwtaS50b3BdKSxPLl9jbGlwYm94PSExLE8uX21hdHJpeD1WLk1hdHJpeC51bml0KCksTy5fc3RhY2tpbmdDb250ZXh0PXtlbGVtZW50OnQsZ3JvdXA6ZX0sQih0LGUpLG4ucmVzb2x2ZShlKX0pOm4ucmVqZWN0KFwiTm8gZWxlbWVudCB0byBleHBvcnRcIiksbi5wcm9taXNlKCl9LE89e30sSD1mdW5jdGlvbigpe3ZhciBlPS9eKCgtd2Via2l0LXwtbW96LXwtby18LW1zLSk/bGluZWFyLWdyYWRpZW50XFxzKilcXCgvLHQ9L14oWy0wLTkuXSslKS8sbj0vXihbLTAtOS5dK3B4KS8saT0vXihsZWZ0fHJpZ2h0fHRvcHxib3R0b218dG98Y2VudGVyKVxcVy8scj0vXihbLTAtOS5dKyhkZWd8Z3JhZHxyYWR8dHVybikpLyxvPS9eKFxccyspLyxhPS9eKFxcKCkvLHM9L14oXFwpKS8sbD0vXigsKS87cmV0dXJuIGZ1bmN0aW9uKGMpe2Z1bmN0aW9uIGQoKXt2YXIgZT1vLmV4ZWMoYyk7ZSYmKGM9Yy5zdWJzdHIoZVsxXS5sZW5ndGgpKX1mdW5jdGlvbiB1KGUpe2QoKTt2YXIgdD1lLmV4ZWMoYyk7cmV0dXJuIHQ/KGM9Yy5zdWJzdHIodFsxXS5sZW5ndGgpLHRbMV0pOnZvaWQgMH1mdW5jdGlvbiBoKCl7dmFyIGUsaSxyPWtlbmRvLnBhcnNlQ29sb3IoYywhMCk7cmV0dXJuIHI/KGM9Yy5zdWJzdHIoci5tYXRjaFswXS5sZW5ndGgpLHI9ci50b1JHQigpLChlPXUobikpfHwoaT11KHQpKSx7Y29sb3I6cixsZW5ndGg6ZSxwZXJjZW50Oml9KTp2b2lkIDB9ZnVuY3Rpb24gcChlKXt2YXIgbixvLGQscCxnLG0sdj1bXSxfPSExO2lmKHUoYSkpe2ZvcihuPXUociksbj8obj1iKG4pLHUobCkpOihvPXUoaSksXCJ0b1wiPT1vP289dShpKTpvJiYvXi0vLnRlc3QoZSkmJihfPSEwKSxkPXUoaSksdShsKSksLy1tb3otLy50ZXN0KGUpJiZudWxsPT1uJiZudWxsPT1vJiYocD11KHQpLGc9dSh0KSxfPSEwLFwiMCVcIj09cD9vPVwibGVmdFwiOlwiMTAwJVwiPT1wJiYobz1cInJpZ2h0XCIpLFwiMCVcIj09Zz9kPVwidG9wXCI6XCIxMDAlXCI9PWcmJihkPVwiYm90dG9tXCIpLHUobCkpO2MmJiF1KHMpJiYobT1oKCkpOyl2LnB1c2gobSksdShsKTtyZXR1cm57dHlwZTpcImxpbmVhclwiLGFuZ2xlOm4sdG86byYmZD9vK1wiIFwiK2Q6bz9vOmQ/ZDpudWxsLHN0b3BzOnYscmV2ZXJzZTpfLG9yaWc6Zn19fXZhciBmPWMsZz11KGUpO3JldHVybiBnP3AoZyk6dm9pZCAwfX0oKX0od2luZG93LmtlbmRvLmpRdWVyeSxwYXJzZUZsb2F0LE1hdGgpLGZ1bmN0aW9uKGUpe3ZhciB0PWUubm9vcCxuPXdpbmRvdy5rZW5kbyxpPW4uQ2xhc3Mscj1uLnV0aWwsbz1uLmFuaW1hdGlvbkZyYW1lLGE9bi5kZWVwRXh0ZW5kLHM9aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO24ub3B0aW9ucz1hKHt9LG4ub3B0aW9ucyx0KSxuLmVsZW1lbnQ9ZX0sb3B0aW9uczp7ZHVyYXRpb246NTAwLGVhc2luZzpcInN3aW5nXCJ9LHNldHVwOnQsc3RlcDp0LHBsYXk6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLGk9ZS5lYXNpbmdbbi5lYXNpbmddLGE9bi5kdXJhdGlvbixzPW4uZGVsYXl8fDAsbD1yLm5vdygpK3MsYz1sK2E7MD09PWE/KHQuc3RlcCgxKSx0LmFib3J0KCkpOnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbigpe3ZhciBuLHMsZCx1O3QuX3N0b3BwZWR8fChuPXIubm93KCkscz1yLmxpbWl0VmFsdWUobi1sLDAsYSksZD1zL2EsdT1pKGQscywwLDEsYSksdC5zdGVwKHUpLGM+bj9vKGUpOnQuYWJvcnQoKSl9O2UoKX0scyl9LGFib3J0OmZ1bmN0aW9uKCl7dGhpcy5fc3RvcHBlZD0hMH0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuYWJvcnQoKX19KSxsPWZ1bmN0aW9uKCl7dGhpcy5faXRlbXM9W119O2wucHJvdG90eXBlPXtyZWdpc3RlcjpmdW5jdGlvbihlLHQpe3RoaXMuX2l0ZW1zLnB1c2goe25hbWU6ZSx0eXBlOnR9KX0sY3JlYXRlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG89dGhpcy5faXRlbXM7aWYodCYmdC50eXBlKWZvcihpPXQudHlwZS50b0xvd2VyQ2FzZSgpLHI9MDtvLmxlbmd0aD5yO3IrKylpZihvW3JdLm5hbWUudG9Mb3dlckNhc2UoKT09PWkpe249b1tyXTticmVha31yZXR1cm4gbj9uZXcgbi50eXBlKGUsdCk6dm9pZCAwfX0sbC5jdXJyZW50PW5ldyBsLHMuY3JlYXRlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbC5jdXJyZW50LmNyZWF0ZShlLHQsbil9LGEobi5kcmF3aW5nLHtBbmltYXRpb246cyxBbmltYXRpb25GYWN0b3J5Omx9KX0od2luZG93LmtlbmRvLmpRdWVyeSxNYXRoKSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciBuLGk9cy51aS52YWxpZGF0b3IucnVsZVJlc29sdmVyc3x8e30scj17fTtmb3IobiBpbiBpKWUuZXh0ZW5kKCEwLHIsaVtuXS5yZXNvbHZlKHQpKTtyZXR1cm4gcn1mdW5jdGlvbiBuKGUpe3JldHVybiBlLnJlcGxhY2UoLyZhbXAvZyxcIiZhbXA7XCIpLnJlcGxhY2UoLyZxdW90Oy9nLCdcIicpLnJlcGxhY2UoLyYjMzk7L2csXCInXCIpLnJlcGxhY2UoLyZsdDsvZyxcIjxcIikucmVwbGFjZSgvJmd0Oy9nLFwiPlwiKX1mdW5jdGlvbiBpKGUpe3JldHVybiBlPShlK1wiXCIpLnNwbGl0KFwiLlwiKSxlLmxlbmd0aD4xP2VbMV0ubGVuZ3RoOjB9ZnVuY3Rpb24gcih0KXtyZXR1cm4gZShlLnBhcnNlSFRNTD9lLnBhcnNlSFRNTCh0KTp0KX1mdW5jdGlvbiBvKHQsbil7dmFyIGkscixvLGEsbD1lKCk7Zm9yKG89MCxhPXQubGVuZ3RoO2E+bztvKyspaT10W29dLHUudGVzdChpLmNsYXNzTmFtZSkmJihyPWkuZ2V0QXR0cmlidXRlKHMuYXR0cihcImZvclwiKSkscj09PW4mJihsPWwuYWRkKGkpKSk7cmV0dXJuIGx9dmFyIGEscz13aW5kb3cua2VuZG8sbD1zLnVpLldpZGdldCxjPVwiLmtlbmRvVmFsaWRhdG9yXCIsZD1cImstaW52YWxpZC1tc2dcIix1PVJlZ0V4cChkLFwiaVwiKSxoPVwiay1pbnZhbGlkXCIscD0vXigoKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSsoXFwuKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSspKil8KChcXHgyMikoKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPygoW1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4N2ZdfFxceDIxfFtcXHgyMy1cXHg1Yl18W1xceDVkLVxceDdlXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KFxcXFwoW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBkLVxceDdmXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSkqKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPyhcXHgyMikpKUAoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkkL2ksZj0vXihodHRwcz98ZnRwKTpcXC9cXC8oKCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OikqQCk/KCgoXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pXFwuKFxcZHxbMS05XVxcZHwxXFxkXFxkfDJbMC00XVxcZHwyNVswLTVdKVxcLihcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSlcXC4oXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pKXwoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4/KSg6XFxkKik/KShcXC8oKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6fEApKyhcXC8oKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCkqKSopPyk/KFxcPygoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCl8W1xcdUUwMDAtXFx1RjhGRl18XFwvfFxcPykqKT8oXFwjKCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKXxcXC98XFw/KSopPyQvaSxnPVwiOmlucHV0Om5vdCg6YnV0dG9uLFt0eXBlPXN1Ym1pdF0sW3R5cGU9cmVzZXRdLFtkaXNhYmxlZF0sW3JlYWRvbmx5XSlcIixtPVwiOmNoZWNrYm94Om5vdChbZGlzYWJsZWRdLFtyZWFkb25seV0pXCIsdj1cIlt0eXBlPW51bWJlcl0sW3R5cGU9cmFuZ2VdXCIsXz1cImJsdXJcIix5PVwibmFtZVwiLHc9XCJmb3JtXCIsYj1cIm5vdmFsaWRhdGVcIixrPWUucHJveHkseD1mdW5jdGlvbihlLHQpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0JiYodD1SZWdFeHAoXCJeKD86XCIrdCtcIikkXCIpKSx0LnRlc3QoZSl9LEM9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPWUudmFsKCk7cmV0dXJuIGUuZmlsdGVyKHQpLmxlbmd0aCYmXCJcIiE9PWk/eChpLG4pOiEwfSxTPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubGVuZ3RoP251bGwhPWVbMF0uYXR0cmlidXRlc1t0XTohMX07cy51aS52YWxpZGF0b3J8fChzLnVpLnZhbGlkYXRvcj17cnVsZXM6e30sbWVzc2FnZXM6e319KSxhPWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKG4saSl7dmFyIHI9dGhpcyxvPXQobiksYT1cIltcIitzLmF0dHIoXCJ2YWxpZGF0ZVwiKStcIiE9ZmFsc2VdXCI7aT1pfHx7fSxpLnJ1bGVzPWUuZXh0ZW5kKHt9LHMudWkudmFsaWRhdG9yLnJ1bGVzLG8ucnVsZXMsaS5ydWxlcyksaS5tZXNzYWdlcz1lLmV4dGVuZCh7fSxzLnVpLnZhbGlkYXRvci5tZXNzYWdlcyxvLm1lc3NhZ2VzLGkubWVzc2FnZXMpLGwuZm4uaW5pdC5jYWxsKHIsbixpKSxyLl9lcnJvclRlbXBsYXRlPXMudGVtcGxhdGUoci5vcHRpb25zLmVycm9yVGVtcGxhdGUpLHIuZWxlbWVudC5pcyh3KSYmci5lbGVtZW50LmF0dHIoYixiKSxyLl9pbnB1dFNlbGVjdG9yPWcrYSxyLl9jaGVja2JveFNlbGVjdG9yPW0rYSxyLl9lcnJvcnM9e30sci5fYXR0YWNoRXZlbnRzKCksci5faXNWYWxpZGF0ZWQ9ITF9LGV2ZW50czpbXCJ2YWxpZGF0ZVwiLFwiY2hhbmdlXCJdLG9wdGlvbnM6e25hbWU6XCJWYWxpZGF0b3JcIixlcnJvclRlbXBsYXRlOic8c3BhbiBjbGFzcz1cImstd2lkZ2V0IGstdG9vbHRpcCBrLXRvb2x0aXAtdmFsaWRhdGlvblwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstd2FybmluZ1wiPiA8L3NwYW4+ICM9bWVzc2FnZSM8L3NwYW4+JyxtZXNzYWdlczp7cmVxdWlyZWQ6XCJ7MH0gaXMgcmVxdWlyZWRcIixwYXR0ZXJuOlwiezB9IGlzIG5vdCB2YWxpZFwiLG1pbjpcInswfSBzaG91bGQgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHsxfVwiLG1heDpcInswfSBzaG91bGQgYmUgc21hbGxlciB0aGFuIG9yIGVxdWFsIHRvIHsxfVwiLHN0ZXA6XCJ7MH0gaXMgbm90IHZhbGlkXCIsZW1haWw6XCJ7MH0gaXMgbm90IHZhbGlkIGVtYWlsXCIsdXJsOlwiezB9IGlzIG5vdCB2YWxpZCBVUkxcIixkYXRlOlwiezB9IGlzIG5vdCB2YWxpZCBkYXRlXCJ9LHJ1bGVzOntyZXF1aXJlZDpmdW5jdGlvbihlKXt2YXIgdD1lLmZpbHRlcihcIlt0eXBlPWNoZWNrYm94XVwiKS5sZW5ndGgmJiFlLmlzKFwiOmNoZWNrZWRcIiksbj1lLnZhbCgpO3JldHVybiEoUyhlLFwicmVxdWlyZWRcIikmJihcIlwiPT09bnx8IW58fHQpKX0scGF0dGVybjpmdW5jdGlvbihlKXtyZXR1cm4gZS5maWx0ZXIoXCJbdHlwZT10ZXh0XSxbdHlwZT1lbWFpbF0sW3R5cGU9dXJsXSxbdHlwZT10ZWxdLFt0eXBlPXNlYXJjaF0sW3R5cGU9cGFzc3dvcmRdXCIpLmZpbHRlcihcIltwYXR0ZXJuXVwiKS5sZW5ndGgmJlwiXCIhPT1lLnZhbCgpP3goZS52YWwoKSxlLmF0dHIoXCJwYXR0ZXJuXCIpKTohMH0sbWluOmZ1bmN0aW9uKGUpe2lmKGUuZmlsdGVyKHYrXCIsW1wiK3MuYXR0cihcInR5cGVcIikrXCI9bnVtYmVyXVwiKS5maWx0ZXIoXCJbbWluXVwiKS5sZW5ndGgmJlwiXCIhPT1lLnZhbCgpKXt2YXIgdD1wYXJzZUZsb2F0KGUuYXR0cihcIm1pblwiKSl8fDAsbj1zLnBhcnNlRmxvYXQoZS52YWwoKSk7cmV0dXJuIG4+PXR9cmV0dXJuITB9LG1heDpmdW5jdGlvbihlKXtpZihlLmZpbHRlcih2K1wiLFtcIitzLmF0dHIoXCJ0eXBlXCIpK1wiPW51bWJlcl1cIikuZmlsdGVyKFwiW21heF1cIikubGVuZ3RoJiZcIlwiIT09ZS52YWwoKSl7dmFyIHQ9cGFyc2VGbG9hdChlLmF0dHIoXCJtYXhcIikpfHwwLG49cy5wYXJzZUZsb2F0KGUudmFsKCkpO3JldHVybiB0Pj1ufXJldHVybiEwfSxzdGVwOmZ1bmN0aW9uKGUpe2lmKGUuZmlsdGVyKHYrXCIsW1wiK3MuYXR0cihcInR5cGVcIikrXCI9bnVtYmVyXVwiKS5maWx0ZXIoXCJbc3RlcF1cIikubGVuZ3RoJiZcIlwiIT09ZS52YWwoKSl7dmFyIHQsbj1wYXJzZUZsb2F0KGUuYXR0cihcIm1pblwiKSl8fDAscj1wYXJzZUZsb2F0KGUuYXR0cihcInN0ZXBcIikpfHwxLG89cGFyc2VGbG9hdChlLnZhbCgpKSxhPWkocik7cmV0dXJuIGE/KHQ9TWF0aC5wb3coMTAsYSksKG8tbikqdCUocip0KS9NYXRoLnBvdygxMDAsYSk9PT0wKTooby1uKSVyPT09MH1yZXR1cm4hMH0sZW1haWw6ZnVuY3Rpb24oZSl7cmV0dXJuIEMoZSxcIlt0eXBlPWVtYWlsXSxbXCIrcy5hdHRyKFwidHlwZVwiKStcIj1lbWFpbF1cIixwKX0sdXJsOmZ1bmN0aW9uKGUpe3JldHVybiBDKGUsXCJbdHlwZT11cmxdLFtcIitzLmF0dHIoXCJ0eXBlXCIpK1wiPXVybF1cIixmKX0sZGF0ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5maWx0ZXIoXCJbdHlwZV49ZGF0ZV0sW1wiK3MuYXR0cihcInR5cGVcIikrXCI9ZGF0ZV1cIikubGVuZ3RoJiZcIlwiIT09ZS52YWwoKT9udWxsIT09cy5wYXJzZURhdGUoZS52YWwoKSxlLmF0dHIocy5hdHRyKFwiZm9ybWF0XCIpKSk6ITB9fSx2YWxpZGF0ZU9uQmx1cjohMH0sZGVzdHJveTpmdW5jdGlvbigpe2wuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuZWxlbWVudC5vZmYoYyl9LHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzVmFsaWRhdGVkPzA9PT10aGlzLmVycm9ycygpLmxlbmd0aDohMX0sX3N1Ym1pdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy52YWxpZGF0ZSgpPyEwOihlLnN0b3BQcm9wYWdhdGlvbigpLGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksZS5wcmV2ZW50RGVmYXVsdCgpLCExKX0sX2NoZWNrRWxlbWVudDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnZhbHVlKCk7dGhpcy52YWxpZGF0ZUlucHV0KGUpLHRoaXMudmFsdWUoKSE9PXQmJnRoaXMudHJpZ2dlcihcImNoYW5nZVwiKX0sX2F0dGFjaEV2ZW50czpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5lbGVtZW50LmlzKHcpJiZ0LmVsZW1lbnQub24oXCJzdWJtaXRcIitjLGsodC5fc3VibWl0LHQpKSx0Lm9wdGlvbnMudmFsaWRhdGVPbkJsdXImJih0LmVsZW1lbnQuaXMoZyk/KHQuZWxlbWVudC5vbihfK2MsZnVuY3Rpb24oKXt0Ll9jaGVja0VsZW1lbnQodC5lbGVtZW50KX0pLHQuZWxlbWVudC5pcyhtKSYmdC5lbGVtZW50Lm9uKFwiY2xpY2tcIitjLGZ1bmN0aW9uKCl7dC5fY2hlY2tFbGVtZW50KHQuZWxlbWVudCl9KSk6KHQuZWxlbWVudC5vbihfK2MsdC5faW5wdXRTZWxlY3RvcixmdW5jdGlvbigpe3QuX2NoZWNrRWxlbWVudChlKHRoaXMpKX0pLHQuZWxlbWVudC5vbihcImNsaWNrXCIrYyx0Ll9jaGVja2JveFNlbGVjdG9yLGZ1bmN0aW9uKCl7dC5fY2hlY2tFbGVtZW50KGUodGhpcykpfSkpKX0sdmFsaWRhdGU6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyPSExLG89dGhpcy52YWx1ZSgpO2lmKHRoaXMuX2Vycm9ycz17fSx0aGlzLmVsZW1lbnQuaXMoZykpcj10aGlzLnZhbGlkYXRlSW5wdXQodGhpcy5lbGVtZW50KTtlbHNle2ZvcihpPSExLGU9dGhpcy5lbGVtZW50LmZpbmQodGhpcy5faW5wdXRTZWxlY3RvciksdD0wLG49ZS5sZW5ndGg7bj50O3QrKyl0aGlzLnZhbGlkYXRlSW5wdXQoZS5lcSh0KSl8fChpPSEwKTtyPSFpfXJldHVybiB0aGlzLnRyaWdnZXIoXCJ2YWxpZGF0ZVwiLHt2YWxpZDpyfSksbyE9PXImJnRoaXMudHJpZ2dlcihcImNoYW5nZVwiKSxyfSx2YWxpZGF0ZUlucHV0OmZ1bmN0aW9uKHQpe3ZhciBpLG8sYSxsLGMsdSxwLGYsZztyZXR1cm4gdD1lKHQpLHRoaXMuX2lzVmFsaWRhdGVkPSEwLGk9dGhpcyxvPWkuX2Vycm9yVGVtcGxhdGUsYT1pLl9jaGVja1ZhbGlkaXR5KHQpLGw9YS52YWxpZCxjPVwiLlwiK2QsdT10LmF0dHIoeSl8fFwiXCIscD1pLl9maW5kTWVzc2FnZUNvbnRhaW5lcih1KS5hZGQodC5uZXh0KGMpLmZpbHRlcihmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7cmV0dXJuIHQuZmlsdGVyKFwiW1wiK3MuYXR0cihcImZvclwiKStcIl1cIikubGVuZ3RoP3QuYXR0cihzLmF0dHIoXCJmb3JcIikpPT09dTohMH0pKS5oaWRlKCksdC5yZW1vdmVBdHRyKFwiYXJpYS1pbnZhbGlkXCIpLGw/ZGVsZXRlIGkuX2Vycm9yc1t1XTooZj1pLl9leHRyYWN0TWVzc2FnZSh0LGEua2V5KSxpLl9lcnJvcnNbdV09ZixnPXIobyh7bWVzc2FnZTpuKGYpfSkpLGkuX2RlY29yYXRlTWVzc2FnZUNvbnRhaW5lcihnLHUpLHAucmVwbGFjZVdpdGgoZykubGVuZ3RofHxnLmluc2VydEFmdGVyKHQpLGcuc2hvdygpLHQuYXR0cihcImFyaWEtaW52YWxpZFwiLCEwKSksdC50b2dnbGVDbGFzcyhoLCFsKSxsfSxoaWRlTWVzc2FnZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9XCIuXCIrZCxuPWUuZWxlbWVudDtuLmlzKGcpP24ubmV4dCh0KS5oaWRlKCk6bi5maW5kKHQpLmhpZGUoKX0sX2ZpbmRNZXNzYWdlQ29udGFpbmVyOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixhPXMudWkudmFsaWRhdG9yLm1lc3NhZ2VMb2NhdG9ycyxsPWUoKTtmb3IoaT0wLHI9dGhpcy5lbGVtZW50Lmxlbmd0aDtyPmk7aSsrKWw9bC5hZGQobyh0aGlzLmVsZW1lbnRbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLHQpKTtmb3IobiBpbiBhKWw9bC5hZGQoYVtuXS5sb2NhdGUodGhpcy5lbGVtZW50LHQpKTtyZXR1cm4gbH0sX2RlY29yYXRlTWVzc2FnZUNvbnRhaW5lcjpmdW5jdGlvbihlLHQpe3ZhciBuLGk9cy51aS52YWxpZGF0b3IubWVzc2FnZUxvY2F0b3JzO2UuYWRkQ2xhc3MoZCkuYXR0cihzLmF0dHIoXCJmb3JcIiksdHx8XCJcIik7Zm9yKG4gaW4gaSlpW25dLmRlY29yYXRlKGUsdCk7ZS5hdHRyKFwicm9sZVwiLFwiYWxlcnRcIilcclxufSxfZXh0cmFjdE1lc3NhZ2U6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9bi5vcHRpb25zLm1lc3NhZ2VzW3RdLHI9ZS5hdHRyKHkpO3JldHVybiBpPXMuaXNGdW5jdGlvbihpKT9pKGUpOmkscy5mb3JtYXQoZS5hdHRyKHMuYXR0cih0K1wiLW1zZ1wiKSl8fGUuYXR0cihcInZhbGlkYXRpb25NZXNzYWdlXCIpfHxlLmF0dHIoXCJ0aXRsZVwiKXx8aXx8XCJcIixyLGUuYXR0cih0KSl9LF9jaGVja1ZhbGlkaXR5OmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5vcHRpb25zLnJ1bGVzO2Zvcih0IGluIG4paWYoIW5bdF0uY2FsbCh0aGlzLGUpKXJldHVybnt2YWxpZDohMSxrZXk6dH07cmV0dXJue3ZhbGlkOiEwfX0sZXJyb3JzOmZ1bmN0aW9uKCl7dmFyIGUsdD1bXSxuPXRoaXMuX2Vycm9ycztmb3IoZSBpbiBuKXQucHVzaChuW2VdKTtyZXR1cm4gdH19KSxzLnVpLnBsdWdpbihhKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQpe3ZhciBuPWUueC5sb2NhdGlvbixpPWUueS5sb2NhdGlvbixyPXQueC5sb2NhdGlvbixvPXQueS5sb2NhdGlvbixhPW4tcixzPWktbztyZXR1cm57Y2VudGVyOnt4OihuK3IpLzIseTooaStvKS8yfSxkaXN0YW5jZTpNYXRoLnNxcnQoYSphK3Mqcyl9fWZ1bmN0aW9uIG4oZSl7dmFyIHQsbixpLHI9W10sYT1lLm9yaWdpbmFsRXZlbnQscz1lLmN1cnJlbnRUYXJnZXQsbD0wO2lmKGUuYXBpKXIucHVzaCh7aWQ6MixldmVudDplLHRhcmdldDplLnRhcmdldCxjdXJyZW50VGFyZ2V0OmUudGFyZ2V0LGxvY2F0aW9uOmUsdHlwZTpcImFwaVwifSk7ZWxzZSBpZihlLnR5cGUubWF0Y2goL3RvdWNoLykpZm9yKG49YT9hLmNoYW5nZWRUb3VjaGVzOltdLHQ9bi5sZW5ndGg7dD5sO2wrKylpPW5bbF0sci5wdXNoKHtsb2NhdGlvbjppLGV2ZW50OmUsdGFyZ2V0OmkudGFyZ2V0LGN1cnJlbnRUYXJnZXQ6cyxpZDppLmlkZW50aWZpZXIsdHlwZTpcInRvdWNoXCJ9KTtlbHNlIHIucHVzaChvLnBvaW50ZXJzfHxvLm1zUG9pbnRlcnM/e2xvY2F0aW9uOmEsZXZlbnQ6ZSx0YXJnZXQ6ZS50YXJnZXQsY3VycmVudFRhcmdldDpzLGlkOmEucG9pbnRlcklkLHR5cGU6XCJwb2ludGVyXCJ9OntpZDoxLGV2ZW50OmUsdGFyZ2V0OmUudGFyZ2V0LGN1cnJlbnRUYXJnZXQ6cyxsb2NhdGlvbjplLHR5cGU6XCJtb3VzZVwifSk7cmV0dXJuIHJ9ZnVuY3Rpb24gaShlKXtmb3IodmFyIHQ9ci5ldmVudE1hcC51cC5zcGxpdChcIiBcIiksbj0wLGk9dC5sZW5ndGg7aT5uO24rKyllKHRbbl0pfXZhciByPXdpbmRvdy5rZW5kbyxvPXIuc3VwcG9ydCxhPXdpbmRvdy5kb2N1bWVudCxzPXIuQ2xhc3MsbD1yLk9ic2VydmFibGUsYz1lLm5vdyxkPWUuZXh0ZW5kLHU9by5tb2JpbGVPUyxoPXUmJnUuYW5kcm9pZCxwPTgwMCxmPW8uYnJvd3Nlci5tc2llPzU6MCxnPVwicHJlc3NcIixtPVwiaG9sZFwiLHY9XCJzZWxlY3RcIixfPVwic3RhcnRcIix5PVwibW92ZVwiLHc9XCJlbmRcIixiPVwiY2FuY2VsXCIsaz1cInRhcFwiLHg9XCJyZWxlYXNlXCIsQz1cImdlc3R1cmVzdGFydFwiLFM9XCJnZXN0dXJlY2hhbmdlXCIsVD1cImdlc3R1cmVlbmRcIixEPVwiZ2VzdHVyZXRhcFwiLEE9e2FwaTowLHRvdWNoOjAsbW91c2U6OSxwb2ludGVyOjl9LEU9cy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO24uYXhpcz1lLG4uX3VwZGF0ZUxvY2F0aW9uRGF0YSh0KSxuLnN0YXJ0TG9jYXRpb249bi5sb2NhdGlvbixuLnZlbG9jaXR5PW4uZGVsdGE9MCxuLnRpbWVTdGFtcD1jKCl9LG1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWVbXCJwYWdlXCIrdC5heGlzXSxpPWMoKSxyPWktdC50aW1lU3RhbXB8fDE7KG58fCFoKSYmKHQuZGVsdGE9bi10LmxvY2F0aW9uLHQuX3VwZGF0ZUxvY2F0aW9uRGF0YShlKSx0LmluaXRpYWxEZWx0YT1uLXQuc3RhcnRMb2NhdGlvbix0LnZlbG9jaXR5PXQuZGVsdGEvcix0LnRpbWVTdGFtcD1pKX0sX3VwZGF0ZUxvY2F0aW9uRGF0YTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5heGlzO3QubG9jYXRpb249ZVtcInBhZ2VcIituXSx0LmNsaWVudD1lW1wiY2xpZW50XCIrbl0sdC5zY3JlZW49ZVtcInNjcmVlblwiK25dfX0pLE09cy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe2QodGhpcyx7eDpuZXcgRShcIlhcIixuLmxvY2F0aW9uKSx5Om5ldyBFKFwiWVwiLG4ubG9jYXRpb24pLHR5cGU6bi50eXBlLHRocmVzaG9sZDplLnRocmVzaG9sZHx8QVtuLnR5cGVdLHVzZXJFdmVudHM6ZSx0YXJnZXQ6dCxjdXJyZW50VGFyZ2V0Om4uY3VycmVudFRhcmdldCxpbml0aWFsVG91Y2g6bi50YXJnZXQsaWQ6bi5pZCxwcmVzc0V2ZW50Om4sX21vdmVkOiExLF9maW5pc2hlZDohMX0pfSxwcmVzczpmdW5jdGlvbigpe3RoaXMuX2hvbGRUaW1lb3V0PXNldFRpbWVvdXQoZS5wcm94eSh0aGlzLFwiX2hvbGRcIiksdGhpcy51c2VyRXZlbnRzLm1pbkhvbGQpLHRoaXMuX3RyaWdnZXIoZyx0aGlzLnByZXNzRXZlbnQpfSxfaG9sZDpmdW5jdGlvbigpe3RoaXMuX3RyaWdnZXIobSx0aGlzLnByZXNzRXZlbnQpfSxtb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoIXQuX2ZpbmlzaGVkKXtpZih0LngubW92ZShlLmxvY2F0aW9uKSx0LnkubW92ZShlLmxvY2F0aW9uKSwhdC5fbW92ZWQpe2lmKHQuX3dpdGhpbklnbm9yZVRocmVzaG9sZCgpKXJldHVybjtpZihQLmN1cnJlbnQmJlAuY3VycmVudCE9PXQudXNlckV2ZW50cylyZXR1cm4gdC5kaXNwb3NlKCk7dC5fc3RhcnQoZSl9dC5fZmluaXNoZWR8fHQuX3RyaWdnZXIoeSxlKX19LGVuZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuZW5kVGltZT1jKCksdC5fZmluaXNoZWR8fCh0Ll9maW5pc2hlZD0hMCx0Ll90cmlnZ2VyKHgsZSksdC5fbW92ZWQ/dC5fdHJpZ2dlcih3LGUpOnQuX3RyaWdnZXIoayxlKSxjbGVhclRpbWVvdXQodC5faG9sZFRpbWVvdXQpLHQuZGlzcG9zZSgpKX0sZGlzcG9zZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMudXNlckV2ZW50cyxuPXQudG91Y2hlczt0aGlzLl9maW5pc2hlZD0hMCx0aGlzLnByZXNzRXZlbnQ9bnVsbCxjbGVhclRpbWVvdXQodGhpcy5faG9sZFRpbWVvdXQpLG4uc3BsaWNlKGUuaW5BcnJheSh0aGlzLG4pLDEpfSxza2lwOmZ1bmN0aW9uKCl7dGhpcy5kaXNwb3NlKCl9LGNhbmNlbDpmdW5jdGlvbigpe3RoaXMuZGlzcG9zZSgpfSxpc01vdmVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vdmVkfSxfc3RhcnQ6ZnVuY3Rpb24oZSl7Y2xlYXJUaW1lb3V0KHRoaXMuX2hvbGRUaW1lb3V0KSx0aGlzLnN0YXJ0VGltZT1jKCksdGhpcy5fbW92ZWQ9ITAsdGhpcy5fdHJpZ2dlcihfLGUpfSxfdHJpZ2dlcjpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT10LmV2ZW50LHI9e3RvdWNoOm4seDpuLngseTpuLnksdGFyZ2V0Om4udGFyZ2V0LGV2ZW50Oml9O24udXNlckV2ZW50cy5ub3RpZnkoZSxyKSYmaS5wcmV2ZW50RGVmYXVsdCgpfSxfd2l0aGluSWdub3JlVGhyZXNob2xkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy54LmluaXRpYWxEZWx0YSx0PXRoaXMueS5pbml0aWFsRGVsdGE7cmV0dXJuIE1hdGguc3FydChlKmUrdCp0KTw9dGhpcy50aHJlc2hvbGR9fSksUD1sLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBzLGMsdSxoPXRoaXMsQT1yLmd1aWQoKTtuPW58fHt9LHM9aC5maWx0ZXI9bi5maWx0ZXIsaC50aHJlc2hvbGQ9bi50aHJlc2hvbGR8fGYsaC5taW5Ib2xkPW4ubWluSG9sZHx8cCxoLnRvdWNoZXM9W10saC5fbWF4VG91Y2hlcz1uLm11bHRpVG91Y2g/MjoxLGguYWxsb3dTZWxlY3Rpb249bi5hbGxvd1NlbGVjdGlvbixoLmNhcHR1cmVVcElmTW92ZWQ9bi5jYXB0dXJlVXBJZk1vdmVkLGguZXZlbnROUz1BLHQ9ZSh0KS5oYW5kbGVyKGgpLGwuZm4uaW5pdC5jYWxsKGgpLGQoaCx7ZWxlbWVudDp0LHN1cmZhY2U6ZShuLmdsb2JhbCYmIW8udG91Y2g/YS5kb2N1bWVudEVsZW1lbnQ6bi5zdXJmYWNlfHx0KSxzdG9wUHJvcGFnYXRpb246bi5zdG9wUHJvcGFnYXRpb24scHJlc3NlZDohMX0pLGguc3VyZmFjZS5oYW5kbGVyKGgpLm9uKHIuYXBwbHlFdmVudE1hcChcIm1vdmVcIixBKSxcIl9tb3ZlXCIpLm9uKHIuYXBwbHlFdmVudE1hcChcInVwIGNhbmNlbFwiLEEpLFwiX2VuZFwiKSx0Lm9uKHIuYXBwbHlFdmVudE1hcChcImRvd25cIixBKSxzLFwiX3N0YXJ0XCIpLChvLnBvaW50ZXJzfHxvLm1zUG9pbnRlcnMpJiZ0LmNzcyhcIi1tcy10b3VjaC1hY3Rpb25cIixcInBpbmNoLXpvb20gZG91YmxlLXRhcC16b29tXCIpLG4ucHJldmVudERyYWdFdmVudCYmdC5vbihyLmFwcGx5RXZlbnRNYXAoXCJkcmFnc3RhcnRcIixBKSxyLnByZXZlbnREZWZhdWx0KSx0Lm9uKHIuYXBwbHlFdmVudE1hcChcIm1vdXNlZG93blwiLEEpLHMse3Jvb3Q6dH0sXCJfc2VsZWN0XCIpLGguY2FwdHVyZVVwSWZNb3ZlZCYmby5ldmVudENhcHR1cmUmJihjPWguc3VyZmFjZVswXSx1PWUucHJveHkoaC5wcmV2ZW50SWZNb3ZpbmcsaCksaShmdW5jdGlvbihlKXtjLmFkZEV2ZW50TGlzdGVuZXIoZSx1LCEwKX0pKSxoLmJpbmQoW2csbSxrLF8seSx3LHgsYixDLFMsVCxELHZdLG4pfSxwcmV2ZW50SWZNb3Zpbmc6ZnVuY3Rpb24oZSl7dGhpcy5faXNNb3ZlZCgpJiZlLnByZXZlbnREZWZhdWx0KCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXM7dC5fZGVzdHJveWVkfHwodC5fZGVzdHJveWVkPSEwLHQuY2FwdHVyZVVwSWZNb3ZlZCYmby5ldmVudENhcHR1cmUmJihlPXQuc3VyZmFjZVswXSxpKGZ1bmN0aW9uKG4pe2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihuLHQucHJldmVudElmTW92aW5nKX0pKSx0LmVsZW1lbnQua2VuZG9EZXN0cm95KHQuZXZlbnROUyksdC5zdXJmYWNlLmtlbmRvRGVzdHJveSh0LmV2ZW50TlMpLHQuZWxlbWVudC5yZW1vdmVEYXRhKFwiaGFuZGxlclwiKSx0LnN1cmZhY2UucmVtb3ZlRGF0YShcImhhbmRsZXJcIiksdC5fZGlzcG9zZUFsbCgpLHQudW5iaW5kKCksZGVsZXRlIHQuc3VyZmFjZSxkZWxldGUgdC5lbGVtZW50LGRlbGV0ZSB0LmN1cnJlbnRUYXJnZXQpfSxjYXB0dXJlOmZ1bmN0aW9uKCl7UC5jdXJyZW50PXRoaXN9LGNhbmNlbDpmdW5jdGlvbigpe3RoaXMuX2Rpc3Bvc2VBbGwoKSx0aGlzLnRyaWdnZXIoYil9LG5vdGlmeTpmdW5jdGlvbihlLG4pe3ZhciBpPXRoaXMscj1pLnRvdWNoZXM7aWYodGhpcy5faXNNdWx0aVRvdWNoKCkpe3N3aXRjaChlKXtjYXNlIHk6ZT1TO2JyZWFrO2Nhc2UgdzplPVQ7YnJlYWs7Y2FzZSBrOmU9RH1kKG4se3RvdWNoZXM6cn0sdChyWzBdLHJbMV0pKX1yZXR1cm4gdGhpcy50cmlnZ2VyKGUsZChuLHt0eXBlOmV9KSl9LHByZXNzOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLl9hcGlDYWxsKFwiX3N0YXJ0XCIsZSx0LG4pfSxtb3ZlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fYXBpQ2FsbChcIl9tb3ZlXCIsZSx0KX0sZW5kOmZ1bmN0aW9uKGUsdCl7dGhpcy5fYXBpQ2FsbChcIl9lbmRcIixlLHQpfSxfaXNNdWx0aVRvdWNoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG91Y2hlcy5sZW5ndGg+MX0sX21heFRvdWNoZXNSZWFjaGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG91Y2hlcy5sZW5ndGg+PXRoaXMuX21heFRvdWNoZXN9LF9kaXNwb3NlQWxsOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMudG91Y2hlcztlLmxlbmd0aD4wOyllLnBvcCgpLmRpc3Bvc2UoKX0sX2lzTW92ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5ncmVwKHRoaXMudG91Y2hlcyxmdW5jdGlvbihlKXtyZXR1cm4gZS5pc01vdmVkKCl9KS5sZW5ndGh9LF9zZWxlY3Q6ZnVuY3Rpb24oZSl7KCF0aGlzLmFsbG93U2VsZWN0aW9ufHx0aGlzLnRyaWdnZXIodix7ZXZlbnQ6ZX0pKSYmZS5wcmV2ZW50RGVmYXVsdCgpfSxfc3RhcnQ6ZnVuY3Rpb24odCl7dmFyIGkscixvPXRoaXMsYT0wLHM9by5maWx0ZXIsbD1uKHQpLGM9bC5sZW5ndGgsZD10LndoaWNoO2lmKCEoZCYmZD4xfHxvLl9tYXhUb3VjaGVzUmVhY2hlZCgpKSlmb3IoUC5jdXJyZW50PW51bGwsby5jdXJyZW50VGFyZ2V0PXQuY3VycmVudFRhcmdldCxvLnN0b3BQcm9wYWdhdGlvbiYmdC5zdG9wUHJvcGFnYXRpb24oKTtjPmEmJiFvLl9tYXhUb3VjaGVzUmVhY2hlZCgpO2ErKylyPWxbYV0saT1zP2Uoci5jdXJyZW50VGFyZ2V0KTpvLmVsZW1lbnQsaS5sZW5ndGgmJihyPW5ldyBNKG8saSxyKSxvLnRvdWNoZXMucHVzaChyKSxyLnByZXNzKCksby5faXNNdWx0aVRvdWNoKCkmJm8ubm90aWZ5KFwiZ2VzdHVyZXN0YXJ0XCIse30pKX0sX21vdmU6ZnVuY3Rpb24oZSl7dGhpcy5fZWFjaFRvdWNoKFwibW92ZVwiLGUpfSxfZW5kOmZ1bmN0aW9uKGUpe3RoaXMuX2VhY2hUb3VjaChcImVuZFwiLGUpfSxfZWFjaFRvdWNoOmZ1bmN0aW9uKGUsdCl7dmFyIGkscixvLGEscz10aGlzLGw9e30sYz1uKHQpLGQ9cy50b3VjaGVzO2ZvcihpPTA7ZC5sZW5ndGg+aTtpKyspcj1kW2ldLGxbci5pZF09cjtmb3IoaT0wO2MubGVuZ3RoPmk7aSsrKW89Y1tpXSxhPWxbby5pZF0sYSYmYVtlXShvKX0sX2FwaUNhbGw6ZnVuY3Rpb24odCxuLGkscil7dGhpc1t0XSh7YXBpOiEwLHBhZ2VYOm4scGFnZVk6aSxjbGllbnRYOm4sY2xpZW50WTppLHRhcmdldDplKHJ8fHRoaXMuZWxlbWVudClbMF0sc3RvcFByb3BhZ2F0aW9uOmUubm9vcCxwcmV2ZW50RGVmYXVsdDplLm5vb3B9KX19KTtQLmRlZmF1bHRUaHJlc2hvbGQ9ZnVuY3Rpb24oZSl7Zj1lfSxQLm1pbkhvbGQ9ZnVuY3Rpb24oZSl7cD1lfSxyLmdldFRvdWNoZXM9bixyLnRvdWNoRGVsdGE9dCxyLlVzZXJFdmVudHM9UH0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKHQsbil7dHJ5e3JldHVybiBlLmNvbnRhaW5zKHQsbil8fHQ9PW59Y2F0Y2goaSl7cmV0dXJuITF9fWZ1bmN0aW9uIGkoZSx0KXtyZXR1cm4gcGFyc2VJbnQoZS5jc3ModCksMTApfHwwfWZ1bmN0aW9uIHIoZSx0KXtyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgoZSx0Lm1pbiksdC5tYXgpfWZ1bmN0aW9uIG8oZSx0KXt2YXIgbj1rKGUpLHI9bi5sZWZ0K2koZSxcImJvcmRlckxlZnRXaWR0aFwiKStpKGUsXCJwYWRkaW5nTGVmdFwiKSxvPW4udG9wK2koZSxcImJvcmRlclRvcFdpZHRoXCIpK2koZSxcInBhZGRpbmdUb3BcIiksYT1yK2Uud2lkdGgoKS10Lm91dGVyV2lkdGgoITApLHM9bytlLmhlaWdodCgpLXQub3V0ZXJIZWlnaHQoITApO3JldHVybnt4OnttaW46cixtYXg6YX0seTp7bWluOm8sbWF4OnN9fX1mdW5jdGlvbiBhKGUsbixpKXtmb3IodmFyIHIsbyxhPTAscz1uJiZuLmxlbmd0aCxsPWkmJmkubGVuZ3RoO2UmJmUucGFyZW50Tm9kZTspe2ZvcihhPTA7cz5hO2ErKylpZihyPW5bYV0sci5lbGVtZW50WzBdPT09ZSlyZXR1cm57dGFyZ2V0OnIsdGFyZ2V0RWxlbWVudDplfTtmb3IoYT0wO2w+YTthKyspaWYobz1pW2FdLGYubWF0Y2hlc1NlbGVjdG9yLmNhbGwoZSxvLm9wdGlvbnMuZmlsdGVyKSlyZXR1cm57dGFyZ2V0Om8sdGFyZ2V0RWxlbWVudDplfTtlPWUucGFyZW50Tm9kZX1yZXR1cm4gdH12YXIgcyxsLGMsZCx1LGgscD13aW5kb3cua2VuZG8sZj1wLnN1cHBvcnQsZz13aW5kb3cuZG9jdW1lbnQsbT1wLkNsYXNzLHY9cC51aS5XaWRnZXQsXz1wLk9ic2VydmFibGUseT1wLlVzZXJFdmVudHMsdz1lLnByb3h5LGI9ZS5leHRlbmQsaz1wLmdldE9mZnNldCx4PXt9LEM9e30sUz17fSxUPXAuZWxlbWVudFVuZGVyQ3Vyc29yLEQ9XCJrZXl1cFwiLEE9XCJjaGFuZ2VcIixFPVwiZHJhZ3N0YXJ0XCIsTT1cImhvbGRcIixQPVwiZHJhZ1wiLEk9XCJkcmFnZW5kXCIsej1cImRyYWdjYW5jZWxcIixGPVwiZHJhZ2VudGVyXCIsUj1cImRyYWdsZWF2ZVwiLEI9XCJkcm9wXCIsTD1fLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXMscj10WzBdO2kuY2FwdHVyZT0hMSxyLmFkZEV2ZW50TGlzdGVuZXI/KGUuZWFjaChwLmV2ZW50TWFwLmRvd24uc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKCl7ci5hZGRFdmVudExpc3RlbmVyKHRoaXMsdyhpLl9wcmVzcyxpKSwhMCl9KSxlLmVhY2gocC5ldmVudE1hcC51cC5zcGxpdChcIiBcIiksZnVuY3Rpb24oKXtyLmFkZEV2ZW50TGlzdGVuZXIodGhpcyx3KGkuX3JlbGVhc2UsaSksITApfSkpOihlLmVhY2gocC5ldmVudE1hcC5kb3duLnNwbGl0KFwiIFwiKSxmdW5jdGlvbigpe3IuYXR0YWNoRXZlbnQodGhpcyx3KGkuX3ByZXNzLGkpKX0pLGUuZWFjaChwLmV2ZW50TWFwLnVwLnNwbGl0KFwiIFwiKSxmdW5jdGlvbigpe3IuYXR0YWNoRXZlbnQodGhpcyx3KGkuX3JlbGVhc2UsaSkpfSkpLF8uZm4uaW5pdC5jYWxsKGkpLGkuYmluZChbXCJwcmVzc1wiLFwicmVsZWFzZVwiXSxufHx7fSl9LGNhcHR1cmVOZXh0OmZ1bmN0aW9uKCl7dGhpcy5jYXB0dXJlPSEwfSxjYW5jZWxDYXB0dXJlOmZ1bmN0aW9uKCl7dGhpcy5jYXB0dXJlPSExfSxfcHJlc3M6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LnRyaWdnZXIoXCJwcmVzc1wiKSx0LmNhcHR1cmUmJmUucHJldmVudERlZmF1bHQoKX0sX3JlbGVhc2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LnRyaWdnZXIoXCJyZWxlYXNlXCIpLHQuY2FwdHVyZSYmKGUucHJldmVudERlZmF1bHQoKSx0LmNhbmNlbENhcHR1cmUoKSl9fSksTz1fLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0KXt2YXIgbj10aGlzO18uZm4uaW5pdC5jYWxsKG4pLG4uZm9yY2VkRW5hYmxlZD0hMSxlLmV4dGVuZChuLHQpLG4uc2NhbGU9MSxuLmhvcml6b250YWw/KG4ubWVhc3VyZT1cIm9mZnNldFdpZHRoXCIsbi5zY3JvbGxTaXplPVwic2Nyb2xsV2lkdGhcIixuLmF4aXM9XCJ4XCIpOihuLm1lYXN1cmU9XCJvZmZzZXRIZWlnaHRcIixuLnNjcm9sbFNpemU9XCJzY3JvbGxIZWlnaHRcIixuLmF4aXM9XCJ5XCIpfSxtYWtlVmlydHVhbDpmdW5jdGlvbigpe2UuZXh0ZW5kKHRoaXMse3ZpcnR1YWw6ITAsZm9yY2VkRW5hYmxlZDohMCxfdmlydHVhbE1pbjowLF92aXJ0dWFsTWF4OjB9KX0sdmlydHVhbFNpemU6ZnVuY3Rpb24oZSx0KXsodGhpcy5fdmlydHVhbE1pbiE9PWV8fHRoaXMuX3ZpcnR1YWxNYXghPT10KSYmKHRoaXMuX3ZpcnR1YWxNaW49ZSx0aGlzLl92aXJ0dWFsTWF4PXQsdGhpcy51cGRhdGUoKSl9LG91dE9mQm91bmRzOmZ1bmN0aW9uKGUpe3JldHVybiBlPnRoaXMubWF4fHx0aGlzLm1pbj5lfSxmb3JjZUVuYWJsZWQ6ZnVuY3Rpb24oKXt0aGlzLmZvcmNlZEVuYWJsZWQ9ITB9LGdldFNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250YWluZXJbMF1bdGhpcy5tZWFzdXJlXX0sZ2V0VG90YWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50WzBdW3RoaXMuc2Nyb2xsU2l6ZV19LHJlc2NhbGU6ZnVuY3Rpb24oZSl7dGhpcy5zY2FsZT1lfSx1cGRhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQudmlydHVhbD90Ll92aXJ0dWFsTWF4OnQuZ2V0VG90YWwoKSxpPW4qdC5zY2FsZSxyPXQuZ2V0U2l6ZSgpOzAhPT1uJiYodC5tYXg9dC52aXJ0dWFsPy10Ll92aXJ0dWFsTWluOjAsdC5zaXplPXIsdC50b3RhbD1pLHQubWluPU1hdGgubWluKHQubWF4LHItaSksdC5taW5TY2FsZT1yL24sdC5jZW50ZXJPZmZzZXQ9KGktcikvMix0LmVuYWJsZWQ9dC5mb3JjZWRFbmFibGVkfHxpPnIsZXx8dC50cmlnZ2VyKEEsdCkpfX0pLEg9Xy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztfLmZuLmluaXQuY2FsbCh0KSx0Lng9bmV3IE8oYih7aG9yaXpvbnRhbDohMH0sZSkpLHQueT1uZXcgTyhiKHtob3Jpem9udGFsOiExfSxlKSksdC5jb250YWluZXI9ZS5jb250YWluZXIsdC5mb3JjZWRNaW5TY2FsZT1lLm1pblNjYWxlLHQubWF4U2NhbGU9ZS5tYXhTY2FsZXx8MTAwLHQuYmluZChBLGUpfSxyZXNjYWxlOmZ1bmN0aW9uKGUpe3RoaXMueC5yZXNjYWxlKGUpLHRoaXMueS5yZXNjYWxlKGUpLHRoaXMucmVmcmVzaCgpfSxjZW50ZXJDb29yZGluYXRlczpmdW5jdGlvbigpe3JldHVybnt4Ok1hdGgubWluKDAsLXRoaXMueC5jZW50ZXJPZmZzZXQpLHk6TWF0aC5taW4oMCwtdGhpcy55LmNlbnRlck9mZnNldCl9fSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLngudXBkYXRlKCksZS55LnVwZGF0ZSgpLGUuZW5hYmxlZD1lLnguZW5hYmxlZHx8ZS55LmVuYWJsZWQsZS5taW5TY2FsZT1lLmZvcmNlZE1pblNjYWxlfHxNYXRoLm1pbihlLngubWluU2NhbGUsZS55Lm1pblNjYWxlKSxlLmZpdFNjYWxlPU1hdGgubWF4KGUueC5taW5TY2FsZSxlLnkubWluU2NhbGUpLGUudHJpZ2dlcihBKX19KSxOPV8uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7Yih0LGUpLF8uZm4uaW5pdC5jYWxsKHQpfSxvdXRPZkJvdW5kczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpbWVuc2lvbi5vdXRPZkJvdW5kcyh0aGlzLm1vdmFibGVbdGhpcy5heGlzXSl9LGRyYWdNb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LmRpbWVuc2lvbixpPXQuYXhpcyxyPXQubW92YWJsZSxvPXJbaV0rZTtuLmVuYWJsZWQmJigobi5taW4+byYmMD5lfHxvPm4ubWF4JiZlPjApJiYoZSo9dC5yZXNpc3RhbmNlKSxyLnRyYW5zbGF0ZUF4aXMoaSxlKSx0LnRyaWdnZXIoQSx0KSl9fSksVj1tLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvPXRoaXM7YihvLHtlbGFzdGljOiEwfSxlKSxpPW8uZWxhc3RpYz8uNTowLHI9by5tb3ZhYmxlLG8ueD10PW5ldyBOKHtheGlzOlwieFwiLGRpbWVuc2lvbjpvLmRpbWVuc2lvbnMueCxyZXNpc3RhbmNlOmksbW92YWJsZTpyfSksby55PW49bmV3IE4oe2F4aXM6XCJ5XCIsZGltZW5zaW9uOm8uZGltZW5zaW9ucy55LHJlc2lzdGFuY2U6aSxtb3ZhYmxlOnJ9KSxvLnVzZXJFdmVudHMuYmluZChbXCJtb3ZlXCIsXCJlbmRcIixcImdlc3R1cmVzdGFydFwiLFwiZ2VzdHVyZWNoYW5nZVwiXSx7Z2VzdHVyZXN0YXJ0OmZ1bmN0aW9uKGUpe28uZ2VzdHVyZT1lLG8ub2Zmc2V0PW8uZGltZW5zaW9ucy5jb250YWluZXIub2Zmc2V0KCl9LGdlc3R1cmVjaGFuZ2U6ZnVuY3Rpb24oZSl7dmFyIGksYSxzLGw9by5nZXN0dXJlLGM9bC5jZW50ZXIsZD1lLmNlbnRlcix1PWUuZGlzdGFuY2UvbC5kaXN0YW5jZSxoPW8uZGltZW5zaW9ucy5taW5TY2FsZSxwPW8uZGltZW5zaW9ucy5tYXhTY2FsZTtoPj1yLnNjYWxlJiYxPnUmJih1Kz0uOCooMS11KSksci5zY2FsZSp1Pj1wJiYodT1wL3Iuc2NhbGUpLGE9ci54K28ub2Zmc2V0LmxlZnQscz1yLnkrby5vZmZzZXQudG9wLGk9e3g6KGEtYy54KSp1K2QueC1hLHk6KHMtYy55KSp1K2QueS1zfSxyLnNjYWxlV2l0aCh1KSx0LmRyYWdNb3ZlKGkueCksbi5kcmFnTW92ZShpLnkpLG8uZGltZW5zaW9ucy5yZXNjYWxlKHIuc2NhbGUpLG8uZ2VzdHVyZT1lLGUucHJldmVudERlZmF1bHQoKX0sbW92ZTpmdW5jdGlvbihlKXtlLmV2ZW50LnRhcmdldC50YWdOYW1lLm1hdGNoKC90ZXh0YXJlYXxpbnB1dC9pKXx8KHQuZGltZW5zaW9uLmVuYWJsZWR8fG4uZGltZW5zaW9uLmVuYWJsZWQ/KHQuZHJhZ01vdmUoZS54LmRlbHRhKSxuLmRyYWdNb3ZlKGUueS5kZWx0YSksZS5wcmV2ZW50RGVmYXVsdCgpKTplLnRvdWNoLnNraXAoKSl9LGVuZDpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCl9fSl9fSksVT1mLnRyYW5zaXRpb25zLnByZWZpeCtcIlRyYW5zZm9ybVwiO2w9Zi5oYXNIVzNEP2Z1bmN0aW9uKGUsdCxuKXtyZXR1cm5cInRyYW5zbGF0ZTNkKFwiK2UrXCJweCxcIit0K1wicHgsMCkgc2NhbGUoXCIrbitcIilcIn06ZnVuY3Rpb24oZSx0LG4pe3JldHVyblwidHJhbnNsYXRlKFwiK2UrXCJweCxcIit0K1wicHgpIHNjYWxlKFwiK24rXCIpXCJ9LGM9Xy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCl7dmFyIG49dGhpcztfLmZuLmluaXQuY2FsbChuKSxuLmVsZW1lbnQ9ZSh0KSxuLmVsZW1lbnRbMF0uc3R5bGUud2Via2l0VHJhbnNmb3JtT3JpZ2luPVwibGVmdCB0b3BcIixuLng9MCxuLnk9MCxuLnNjYWxlPTEsbi5fc2F2ZUNvb3JkaW5hdGVzKGwobi54LG4ueSxuLnNjYWxlKSl9LHRyYW5zbGF0ZUF4aXM6ZnVuY3Rpb24oZSx0KXt0aGlzW2VdKz10LHRoaXMucmVmcmVzaCgpfSxzY2FsZVRvOmZ1bmN0aW9uKGUpe3RoaXMuc2NhbGU9ZSx0aGlzLnJlZnJlc2goKX0sc2NhbGVXaXRoOmZ1bmN0aW9uKGUpe3RoaXMuc2NhbGUqPWUsdGhpcy5yZWZyZXNoKCl9LHRyYW5zbGF0ZTpmdW5jdGlvbihlKXt0aGlzLngrPWUueCx0aGlzLnkrPWUueSx0aGlzLnJlZnJlc2goKX0sbW92ZUF4aXM6ZnVuY3Rpb24oZSx0KXt0aGlzW2VdPXQsdGhpcy5yZWZyZXNoKCl9LG1vdmVUbzpmdW5jdGlvbihlKXtiKHRoaXMsZSksdGhpcy5yZWZyZXNoKCl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10LngsaT10Lnk7dC5yb3VuZCYmKG49TWF0aC5yb3VuZChuKSxpPU1hdGgucm91bmQoaSkpLGU9bChuLGksdC5zY2FsZSksZSE9dC5jb29yZGluYXRlcyYmKHAuc3VwcG9ydC5icm93c2VyLm1zaWUmJjEwPnAuc3VwcG9ydC5icm93c2VyLnZlcnNpb24/KHQuZWxlbWVudFswXS5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsdC5lbGVtZW50WzBdLnN0eWxlLmxlZnQ9dC54K1wicHhcIix0LmVsZW1lbnRbMF0uc3R5bGUudG9wPXQueStcInB4XCIpOnQuZWxlbWVudFswXS5zdHlsZVtVXT1lLHQuX3NhdmVDb29yZGluYXRlcyhlKSx0LnRyaWdnZXIoQSkpfSxfc2F2ZUNvb3JkaW5hdGVzOmZ1bmN0aW9uKGUpe3RoaXMuY29vcmRpbmF0ZXM9ZX19KSxkPXYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzO3YuZm4uaW5pdC5jYWxsKGksZSx0KSxuPWkub3B0aW9ucy5ncm91cCxuIGluIEM/Q1tuXS5wdXNoKGkpOkNbbl09W2ldfSxldmVudHM6W0YsUixCXSxvcHRpb25zOntuYW1lOlwiRHJvcFRhcmdldFwiLGdyb3VwOlwiZGVmYXVsdFwifSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLm9wdGlvbnMuZ3JvdXAsbj1DW3RdfHxTW3RdO2lmKG4ubGVuZ3RoPjEpe2Zvcih2LmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSxlPTA7bi5sZW5ndGg+ZTtlKyspaWYobltlXT09dGhpcyl7bi5zcGxpY2UoZSwxKTticmVha319ZWxzZSBkLmRlc3Ryb3lHcm91cCh0KX0sX3RyaWdnZXI6ZnVuY3Rpb24oZSxuKXt2YXIgaT10aGlzLHI9eFtpLm9wdGlvbnMuZ3JvdXBdO3JldHVybiByP2kudHJpZ2dlcihlLGIoe30sbi5ldmVudCx7ZHJhZ2dhYmxlOnIsZHJvcFRhcmdldDpuLmRyb3BUYXJnZXR9KSk6dH0sX292ZXI6ZnVuY3Rpb24oZSl7dGhpcy5fdHJpZ2dlcihGLGUpfSxfb3V0OmZ1bmN0aW9uKGUpe3RoaXMuX3RyaWdnZXIoUixlKX0sX2Ryb3A6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXhbdC5vcHRpb25zLmdyb3VwXTtuJiYobi5kcm9wcGVkPSF0Ll90cmlnZ2VyKEIsZSkpfX0pLGQuZGVzdHJveUdyb3VwPWZ1bmN0aW9uKGUpe3ZhciB0LG49Q1tlXXx8U1tlXTtpZihuKXtmb3IodD0wO24ubGVuZ3RoPnQ7dCsrKXYuZm4uZGVzdHJveS5jYWxsKG5bdF0pO24ubGVuZ3RoPTAsZGVsZXRlIENbZV0sZGVsZXRlIFNbZV19fSxkLl9jYWNoZT1DLHU9ZC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXM7di5mbi5pbml0LmNhbGwoaSxlLHQpLG49aS5vcHRpb25zLmdyb3VwLG4gaW4gUz9TW25dLnB1c2goaSk6U1tuXT1baV19LG9wdGlvbnM6e25hbWU6XCJEcm9wVGFyZ2V0QXJlYVwiLGdyb3VwOlwiZGVmYXVsdFwiLGZpbHRlcjpudWxsfX0pLGg9di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3YuZm4uaW5pdC5jYWxsKG4sZSx0KSxuLl9hY3RpdmF0ZWQ9ITEsbi51c2VyRXZlbnRzPW5ldyB5KG4uZWxlbWVudCx7Z2xvYmFsOiEwLGFsbG93U2VsZWN0aW9uOiEwLGZpbHRlcjpuLm9wdGlvbnMuZmlsdGVyLHRocmVzaG9sZDpuLm9wdGlvbnMuZGlzdGFuY2Usc3RhcnQ6dyhuLl9zdGFydCxuKSxob2xkOncobi5faG9sZCxuKSxtb3ZlOncobi5fZHJhZyxuKSxlbmQ6dyhuLl9lbmQsbiksY2FuY2VsOncobi5fY2FuY2VsLG4pLHNlbGVjdDp3KG4uX3NlbGVjdCxuKX0pLG4uX2FmdGVyRW5kSGFuZGxlcj13KG4uX2FmdGVyRW5kLG4pLG4uX2NhcHR1cmVFc2NhcGU9dyhuLl9jYXB0dXJlRXNjYXBlLG4pfSxldmVudHM6W00sRSxQLEksel0sb3B0aW9uczp7bmFtZTpcIkRyYWdnYWJsZVwiLGRpc3RhbmNlOnAuc3VwcG9ydC50b3VjaD8wOjUsZ3JvdXA6XCJkZWZhdWx0XCIsY3Vyc29yT2Zmc2V0Om51bGwsYXhpczpudWxsLGNvbnRhaW5lcjpudWxsLGZpbHRlcjpudWxsLGlnbm9yZTpudWxsLGhvbGRUb0RyYWc6ITEsZHJvcHBlZDohMX0sY2FuY2VsSG9sZDpmdW5jdGlvbigpe3RoaXMuX2FjdGl2YXRlZD0hMX0sX2NhcHR1cmVFc2NhcGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmtleUNvZGU9PT1wLmtleXMuRVNDJiYodC5fdHJpZ2dlcih6LHtldmVudDplfSksdC51c2VyRXZlbnRzLmNhbmNlbCgpKX0sX3VwZGF0ZUhpbnQ6ZnVuY3Rpb24odCl7dmFyIG4saT10aGlzLG89aS5vcHRpb25zLGE9aS5ib3VuZGFyaWVzLHM9by5heGlzLGw9aS5vcHRpb25zLmN1cnNvck9mZnNldDtsP249e2xlZnQ6dC54LmxvY2F0aW9uK2wubGVmdCx0b3A6dC55LmxvY2F0aW9uK2wudG9wfTooaS5oaW50T2Zmc2V0LmxlZnQrPXQueC5kZWx0YSxpLmhpbnRPZmZzZXQudG9wKz10LnkuZGVsdGEsbj1lLmV4dGVuZCh7fSxpLmhpbnRPZmZzZXQpKSxhJiYobi50b3A9cihuLnRvcCxhLnkpLG4ubGVmdD1yKG4ubGVmdCxhLngpKSxcInhcIj09PXM/ZGVsZXRlIG4udG9wOlwieVwiPT09cyYmZGVsZXRlIG4ubGVmdCxpLmhpbnQuY3NzKG4pfSxfc2hvdWxkSWdub3JlVGFyZ2V0OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMub3B0aW9ucy5pZ25vcmU7cmV0dXJuIG4mJmUodCkuaXMobil9LF9zZWxlY3Q6ZnVuY3Rpb24oZSl7dGhpcy5fc2hvdWxkSWdub3JlVGFyZ2V0KGUuZXZlbnQudGFyZ2V0KXx8ZS5wcmV2ZW50RGVmYXVsdCgpfSxfc3RhcnQ6ZnVuY3Rpb24obil7dmFyIGkscj10aGlzLGE9ci5vcHRpb25zLHM9YS5jb250YWluZXIsbD1hLmhpbnQ7cmV0dXJuIHRoaXMuX3Nob3VsZElnbm9yZVRhcmdldChuLnRvdWNoLmluaXRpYWxUb3VjaCl8fGEuaG9sZFRvRHJhZyYmIXIuX2FjdGl2YXRlZD8oci51c2VyRXZlbnRzLmNhbmNlbCgpLHQpOihyLmN1cnJlbnRUYXJnZXQ9bi50YXJnZXQsci5jdXJyZW50VGFyZ2V0T2Zmc2V0PWsoci5jdXJyZW50VGFyZ2V0KSxsJiYoci5oaW50JiZyLmhpbnQuc3RvcCghMCwhMCkucmVtb3ZlKCksci5oaW50PXAuaXNGdW5jdGlvbihsKT9lKGwuY2FsbChyLHIuY3VycmVudFRhcmdldCkpOmwsaT1rKHIuY3VycmVudFRhcmdldCksci5oaW50T2Zmc2V0PWksci5oaW50LmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHpJbmRleDoyZTQsbGVmdDppLmxlZnQsdG9wOmkudG9wfSkuYXBwZW5kVG8oZy5ib2R5KSxyLmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5oaW50LnJlbW92ZUF0dHIoXCJuZy1yZXBlYXRcIikse2VsZW1lbnRzOnIuaGludC5nZXQoKSxzY29wZUZyb206bi50YXJnZXR9fSkpLHhbYS5ncm91cF09cixyLmRyb3BwZWQ9ITEscyYmKHIuYm91bmRhcmllcz1vKHMsci5oaW50KSksci5fdHJpZ2dlcihFLG4pJiYoci51c2VyRXZlbnRzLmNhbmNlbCgpLHIuX2FmdGVyRW5kKCkpLHIudXNlckV2ZW50cy5jYXB0dXJlKCksZShnKS5vbihELHIuX2NhcHR1cmVFc2NhcGUpLHQpfSxfaG9sZDpmdW5jdGlvbihlKXt0aGlzLmN1cnJlbnRUYXJnZXQ9ZS50YXJnZXQsdGhpcy5fdHJpZ2dlcihNLGUpP3RoaXMudXNlckV2ZW50cy5jYW5jZWwoKTp0aGlzLl9hY3RpdmF0ZWQ9ITB9LF9kcmFnOmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXM7bi5wcmV2ZW50RGVmYXVsdCgpLGkuX3dpdGhEcm9wVGFyZ2V0KG4sZnVuY3Rpb24oaSxyKXtpZighaSlyZXR1cm4gcyYmKHMuX3RyaWdnZXIoUixiKG4se2Ryb3BUYXJnZXQ6ZShzLnRhcmdldEVsZW1lbnQpfSkpLHM9bnVsbCksdDtpZihzKXtpZihyPT09cy50YXJnZXRFbGVtZW50KXJldHVybjtzLl90cmlnZ2VyKFIsYihuLHtkcm9wVGFyZ2V0OmUocy50YXJnZXRFbGVtZW50KX0pKX1pLl90cmlnZ2VyKEYsYihuLHtkcm9wVGFyZ2V0OmUocil9KSkscz1iKGkse3RhcmdldEVsZW1lbnQ6cn0pfSksaS5fdHJpZ2dlcihQLGIobix7ZHJvcFRhcmdldDpzfSkpLGkuaGludCYmaS5fdXBkYXRlSGludChuKX0sX2VuZDpmdW5jdGlvbih0KXt2YXIgbj10aGlzO24uX3dpdGhEcm9wVGFyZ2V0KHQsZnVuY3Rpb24obixpKXtuJiYobi5fZHJvcChiKHt9LHQse2Ryb3BUYXJnZXQ6ZShpKX0pKSxzPW51bGwpfSksbi5fdHJpZ2dlcihJLHQpLG4uX2NhbmNlbCh0LmV2ZW50KX0sX2NhbmNlbDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fYWN0aXZhdGVkPSExLGUuaGludCYmIWUuZHJvcHBlZD9zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5oaW50LnN0b3AoITAsITApLmFuaW1hdGUoZS5jdXJyZW50VGFyZ2V0T2Zmc2V0LFwiZmFzdFwiLGUuX2FmdGVyRW5kSGFuZGxlcil9LDApOmUuX2FmdGVyRW5kKCl9LF90cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztyZXR1cm4gbi50cmlnZ2VyKGUsYih7fSx0LmV2ZW50LHt4OnQueCx5OnQueSxjdXJyZW50VGFyZ2V0Om4uY3VycmVudFRhcmdldCxkcm9wVGFyZ2V0OnQuZHJvcFRhcmdldH0pKX0sX3dpdGhEcm9wVGFyZ2V0OmZ1bmN0aW9uKGUsdCl7dmFyIGkscixvPXRoaXMscz1vLm9wdGlvbnMsbD1DW3MuZ3JvdXBdLGM9U1tzLmdyb3VwXTsobCYmbC5sZW5ndGh8fGMmJmMubGVuZ3RoKSYmKGk9VChlKSxvLmhpbnQmJm4oby5oaW50WzBdLGkpJiYoby5oaW50LmhpZGUoKSxpPVQoZSksaXx8KGk9VChlKSksby5oaW50LnNob3coKSkscj1hKGksbCxjKSxyP3Qoci50YXJnZXQsci50YXJnZXRFbGVtZW50KTp0KCkpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt2LmZuLmRlc3Ryb3kuY2FsbChlKSxlLl9hZnRlckVuZCgpLGUudXNlckV2ZW50cy5kZXN0cm95KCksZS5jdXJyZW50VGFyZ2V0PW51bGx9LF9hZnRlckVuZDpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5oaW50JiZ0LmhpbnQucmVtb3ZlKCksZGVsZXRlIHhbdC5vcHRpb25zLmdyb3VwXSx0LnRyaWdnZXIoXCJkZXN0cm95XCIpLGUoZykub2ZmKEQsdC5fY2FwdHVyZUVzY2FwZSl9fSkscC51aS5wbHVnaW4oZCkscC51aS5wbHVnaW4odSkscC51aS5wbHVnaW4oaCkscC5UYXBDYXB0dXJlPUwscC5jb250YWluZXJCb3VuZGFyaWVzPW8sYihwLnVpLHtQYW5lOlYsUGFuZURpbWVuc2lvbnM6SCxNb3ZhYmxlOmN9KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXt2YXIgbj13aW5kb3cua2VuZG8saT1uLm1vYmlsZSxyPW4uZWZmZWN0cyxvPWkudWksYT1lLnByb3h5LHM9ZS5leHRlbmQsbD1vLldpZGdldCxjPW4uQ2xhc3MsZD1uLnVpLk1vdmFibGUsdT1uLnVpLlBhbmUsaD1uLnVpLlBhbmVEaW1lbnNpb25zLHA9ci5UcmFuc2l0aW9uLGY9ci5BbmltYXRpb24sZz1NYXRoLmFicyxtPTUwMCx2PS43LF89Ljk2LHk9MTAsdz01NSxiPS41LGs9NSx4PVwia20tc2Nyb2xsZXItcmVsZWFzZVwiLEM9XCJrbS1zY3JvbGxlci1yZWZyZXNoXCIsUz1cInB1bGxcIixUPVwiY2hhbmdlXCIsRD1cInJlc2l6ZVwiLEE9XCJzY3JvbGxcIixFPTIsTT1mLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2YuZm4uaW5pdC5jYWxsKHQpLHModCxlKSx0LnVzZXJFdmVudHMuYmluZChcImdlc3R1cmVlbmRcIixhKHQuc3RhcnQsdCkpLHQudGFwQ2FwdHVyZS5iaW5kKFwicHJlc3NcIixhKHQuY2FuY2VsLHQpKX0sZW5hYmxlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpbWVuc2lvbnMubWluU2NhbGU+dGhpcy5tb3ZhYmxlLnNjYWxlfSxkb25lOmZ1bmN0aW9uKCl7cmV0dXJuLjAxPnRoaXMuZGltZW5zaW9ucy5taW5TY2FsZS10aGlzLm1vdmFibGUuc2NhbGV9LHRpY2s6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1vdmFibGU7ZS5zY2FsZVdpdGgoMS4xKSx0aGlzLmRpbWVuc2lvbnMucmVzY2FsZShlLnNjYWxlKX0sb25FbmQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1vdmFibGU7ZS5zY2FsZVRvKHRoaXMuZGltZW5zaW9ucy5taW5TY2FsZSksdGhpcy5kaW1lbnNpb25zLnJlc2NhbGUoZS5zY2FsZSl9fSksUD1mLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2YuZm4uaW5pdC5jYWxsKHQpLHModCxlLHt0cmFuc2l0aW9uOm5ldyBwKHtheGlzOmUuYXhpcyxtb3ZhYmxlOmUubW92YWJsZSxvbkVuZDpmdW5jdGlvbigpe3QuX2VuZCgpfX0pfSksdC50YXBDYXB0dXJlLmJpbmQoXCJwcmVzc1wiLGZ1bmN0aW9uKCl7dC5jYW5jZWwoKX0pLHQudXNlckV2ZW50cy5iaW5kKFwiZW5kXCIsYSh0LnN0YXJ0LHQpKSx0LnVzZXJFdmVudHMuYmluZChcImdlc3R1cmVlbmRcIixhKHQuc3RhcnQsdCkpLHQudXNlckV2ZW50cy5iaW5kKFwidGFwXCIsYSh0Lm9uRW5kLHQpKX0sb25DYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLnRyYW5zaXRpb24uY2FuY2VsKCl9LGZyZWV6ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuY2FuY2VsKCksdC5fbW92ZVRvKGUpfSxvbkVuZDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5wYW5lQXhpcy5vdXRPZkJvdW5kcygpP2UuX3NuYXBCYWNrKCk6ZS5fZW5kKCl9LGRvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gZyh0aGlzLnZlbG9jaXR5KTwxfSxzdGFydDpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXM7bi5kaW1lbnNpb24uZW5hYmxlZCYmKG4ucGFuZUF4aXMub3V0T2ZCb3VuZHMoKT9uLl9zbmFwQmFjaygpOih0PWUudG91Y2guaWQ9PT1FPzA6ZS50b3VjaFtuLmF4aXNdLnZlbG9jaXR5LG4udmVsb2NpdHk9TWF0aC5tYXgoTWF0aC5taW4odCpuLnZlbG9jaXR5TXVsdGlwbGllcix3KSwtdyksbi50YXBDYXB0dXJlLmNhcHR1cmVOZXh0KCksZi5mbi5zdGFydC5jYWxsKG4pKSl9LHRpY2s6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5kaW1lbnNpb24sbj1lLnBhbmVBeGlzLm91dE9mQm91bmRzKCk/YjplLmZyaWN0aW9uLGk9ZS52ZWxvY2l0eSo9bixyPWUubW92YWJsZVtlLmF4aXNdK2k7IWUuZWxhc3RpYyYmdC5vdXRPZkJvdW5kcyhyKSYmKHI9TWF0aC5tYXgoTWF0aC5taW4ocix0Lm1heCksdC5taW4pLGUudmVsb2NpdHk9MCksZS5tb3ZhYmxlLm1vdmVBeGlzKGUuYXhpcyxyKX0sX2VuZDpmdW5jdGlvbigpe3RoaXMudGFwQ2FwdHVyZS5jYW5jZWxDYXB0dXJlKCksdGhpcy5lbmQoKX0sX3NuYXBCYWNrOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZGltZW5zaW9uLG49ZS5tb3ZhYmxlW2UuYXhpc10+dC5tYXg/dC5tYXg6dC5taW47ZS5fbW92ZVRvKG4pfSxfbW92ZVRvOmZ1bmN0aW9uKGUpe3RoaXMudHJhbnNpdGlvbi5tb3ZlVG8oe2xvY2F0aW9uOmUsZHVyYXRpb246bSxlYXNlOnAuZWFzZU91dEV4cG99KX19KSxJPWYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7bi5lZmZlY3RzLkFuaW1hdGlvbi5mbi5pbml0LmNhbGwodGhpcykscyh0LGUse29yaWdpbjp7fSxkZXN0aW5hdGlvbjp7fSxvZmZzZXQ6e319KX0sdGljazpmdW5jdGlvbigpe3RoaXMuX3VwZGF0ZUNvb3JkaW5hdGVzKCksdGhpcy5tb3ZlVG8odGhpcy5vcmlnaW4pfSxkb25lOmZ1bmN0aW9uKCl7cmV0dXJuIGcodGhpcy5vZmZzZXQueSk8ayYmZyh0aGlzLm9mZnNldC54KTxrfSxvbkVuZDpmdW5jdGlvbigpe3RoaXMubW92ZVRvKHRoaXMuZGVzdGluYXRpb24pLHRoaXMuY2FsbGJhY2smJnRoaXMuY2FsbGJhY2suY2FsbCgpfSxzZXRDb29yZGluYXRlczpmdW5jdGlvbihlLHQpe3RoaXMub2Zmc2V0PXt9LHRoaXMub3JpZ2luPWUsdGhpcy5kZXN0aW5hdGlvbj10fSxzZXRDYWxsYmFjazpmdW5jdGlvbihlKXtlJiZuLmlzRnVuY3Rpb24oZSk/dGhpcy5jYWxsYmFjaz1lOmU9dH0sX3VwZGF0ZUNvb3JkaW5hdGVzOmZ1bmN0aW9uKCl7dGhpcy5vZmZzZXQ9e3g6KHRoaXMuZGVzdGluYXRpb24ueC10aGlzLm9yaWdpbi54KS80LHk6KHRoaXMuZGVzdGluYXRpb24ueS10aGlzLm9yaWdpbi55KS80fSx0aGlzLm9yaWdpbj17eTp0aGlzLm9yaWdpbi55K3RoaXMub2Zmc2V0LnkseDp0aGlzLm9yaWdpbi54K3RoaXMub2Zmc2V0Lnh9fX0pLHo9Yy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPVwieFwiPT09dC5heGlzLHI9ZSgnPGRpdiBjbGFzcz1cImttLXRvdWNoLXNjcm9sbGJhciBrbS0nKyhpP1wiaG9yaXpvbnRhbFwiOlwidmVydGljYWxcIikrJy1zY3JvbGxiYXJcIiAvPicpO3Mobix0LHtlbGVtZW50OnIsZWxlbWVudFNpemU6MCxtb3ZhYmxlOm5ldyBkKHIpLHNjcm9sbE1vdmFibGU6dC5tb3ZhYmxlLGFsd2F5c1Zpc2libGU6dC5hbHdheXNWaXNpYmxlLHNpemU6aT9cIndpZHRoXCI6XCJoZWlnaHRcIn0pLG4uc2Nyb2xsTW92YWJsZS5iaW5kKFQsYShuLnJlZnJlc2gsbikpLG4uY29udGFpbmVyLmFwcGVuZChyKSx0LmFsd2F5c1Zpc2libGUmJm4uc2hvdygpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuYXhpcyxuPWUuZGltZW5zaW9uLGk9bi5zaXplLHI9ZS5zY3JvbGxNb3ZhYmxlLG89aS9uLnRvdGFsLGE9TWF0aC5yb3VuZCgtclt0XSpvKSxzPU1hdGgucm91bmQoaSpvKTtvPj0xP3RoaXMuZWxlbWVudC5jc3MoXCJkaXNwbGF5XCIsXCJub25lXCIpOnRoaXMuZWxlbWVudC5jc3MoXCJkaXNwbGF5XCIsXCJcIiksYStzPmk/cz1pLWE6MD5hJiYocys9YSxhPTApLGUuZWxlbWVudFNpemUhPXMmJihlLmVsZW1lbnQuY3NzKGUuc2l6ZSxzK1wicHhcIiksZS5lbGVtZW50U2l6ZT1zKSxlLm1vdmFibGUubW92ZUF4aXModCxhKX0sc2hvdzpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5jc3Moe29wYWNpdHk6dix2aXNpYmlsaXR5OlwidmlzaWJsZVwifSl9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLmFsd2F5c1Zpc2libGV8fHRoaXMuZWxlbWVudC5jc3Moe29wYWNpdHk6MH0pfX0pLEY9bC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oaSxyKXt2YXIgbyxjLHAsZixtLHYsXyx5LHcsYj10aGlzO3JldHVybiBsLmZuLmluaXQuY2FsbChiLGksciksaT1iLmVsZW1lbnQsKGIuX25hdGl2ZT1iLm9wdGlvbnMudXNlTmF0aXZlJiZuLnN1cHBvcnQuaGFzTmF0aXZlU2Nyb2xsaW5nKT8oaS5hZGRDbGFzcyhcImttLW5hdGl2ZS1zY3JvbGxlclwiKS5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwia20tc2Nyb2xsLWhlYWRlclwiLz4nKSxzKGIse3Njcm9sbEVsZW1lbnQ6aSxmaXhlZENvbnRhaW5lcjppLmNoaWxkcmVuKCkuZmlyc3QoKX0pLHQpOihpLmNzcyhcIm92ZXJmbG93XCIsXCJoaWRkZW5cIikuYWRkQ2xhc3MoXCJrbS1zY3JvbGwtd3JhcHBlclwiKS53cmFwSW5uZXIoJzxkaXYgY2xhc3M9XCJrbS1zY3JvbGwtY29udGFpbmVyXCIvPicpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJrbS1zY3JvbGwtaGVhZGVyXCIvPicpLG89aS5jaGlsZHJlbigpLmVxKDEpLGM9bmV3IG4uVGFwQ2FwdHVyZShpKSxwPW5ldyBkKG8pLGY9bmV3IGgoe2VsZW1lbnQ6byxjb250YWluZXI6aSxmb3JjZWRFbmFibGVkOmIub3B0aW9ucy56b29tfSksbT10aGlzLm9wdGlvbnMuYXZvaWRTY3JvbGxpbmcsdj1uZXcgbi5Vc2VyRXZlbnRzKGkse2FsbG93U2VsZWN0aW9uOiEwLHByZXZlbnREcmFnRXZlbnQ6ITAsY2FwdHVyZVVwSWZNb3ZlZDohMCxtdWx0aVRvdWNoOmIub3B0aW9ucy56b29tLHN0YXJ0OmZ1bmN0aW9uKHQpe2YucmVmcmVzaCgpO3ZhciBuPWcodC54LnZlbG9jaXR5KSxpPWcodC55LnZlbG9jaXR5KSxyPTIqbj49aSxvPWUuY29udGFpbnMoYi5maXhlZENvbnRhaW5lclswXSx0LmV2ZW50LnRhcmdldCksYT0yKmk+PW47IW8mJiFtKHQpJiZiLmVuYWJsZWQmJihmLnguZW5hYmxlZCYmcnx8Zi55LmVuYWJsZWQmJmEpP3YuY2FwdHVyZSgpOnYuY2FuY2VsKCl9fSksXz1uZXcgdSh7bW92YWJsZTpwLGRpbWVuc2lvbnM6Zix1c2VyRXZlbnRzOnYsZWxhc3RpYzpiLm9wdGlvbnMuZWxhc3RpY30pLHk9bmV3IE0oe21vdmFibGU6cCxkaW1lbnNpb25zOmYsdXNlckV2ZW50czp2LHRhcENhcHR1cmU6Y30pLHc9bmV3IEkoe21vdmVUbzpmdW5jdGlvbihlKXtiLnNjcm9sbFRvKGUueCxlLnkpfX0pLHAuYmluZChULGZ1bmN0aW9uKCl7Yi5zY3JvbGxUb3A9LXAueSxiLnNjcm9sbExlZnQ9LXAueCxiLnRyaWdnZXIoQSx7c2Nyb2xsVG9wOmIuc2Nyb2xsVG9wLHNjcm9sbExlZnQ6Yi5zY3JvbGxMZWZ0fSl9KSxiLm9wdGlvbnMubW91c2V3aGVlbFNjcm9sbGluZyYmaS5vbihcIkRPTU1vdXNlU2Nyb2xsIG1vdXNld2hlZWxcIixhKHRoaXMsXCJfd2hlZWxTY3JvbGxcIikpLHMoYix7bW92YWJsZTpwLGRpbWVuc2lvbnM6Zix6b29tU25hcEJhY2s6eSxhbmltYXRlZFNjcm9sbGVyOncsdXNlckV2ZW50czp2LHBhbmU6Xyx0YXBDYXB0dXJlOmMscHVsbGVkOiExLGVuYWJsZWQ6ITAsc2Nyb2xsRWxlbWVudDpvLHNjcm9sbFRvcDowLHNjcm9sbExlZnQ6MCxmaXhlZENvbnRhaW5lcjppLmNoaWxkcmVuKCkuZmlyc3QoKX0pLGIuX2luaXRBeGlzKFwieFwiKSxiLl9pbml0QXhpcyhcInlcIiksYi5fd2hlZWxFbmQ9ZnVuY3Rpb24oKXtiLl93aGVlbD0hMSxiLnVzZXJFdmVudHMuZW5kKDAsYi5fd2hlZWxZKX0sZi5yZWZyZXNoKCksYi5vcHRpb25zLnB1bGxUb1JlZnJlc2gmJmIuX2luaXRQdWxsVG9SZWZyZXNoKCksdCl9LF93aGVlbFNjcm9sbDpmdW5jdGlvbihlKXt0aGlzLl93aGVlbHx8KHRoaXMuX3doZWVsPSEwLHRoaXMuX3doZWVsWT0wLHRoaXMudXNlckV2ZW50cy5wcmVzcygwLHRoaXMuX3doZWVsWSkpLGNsZWFyVGltZW91dCh0aGlzLl93aGVlbFRpbWVvdXQpLHRoaXMuX3doZWVsVGltZW91dD1zZXRUaW1lb3V0KHRoaXMuX3doZWVsRW5kLDUwKTt2YXIgdD1uLndoZWVsRGVsdGFZKGUpO3QmJih0aGlzLl93aGVlbFkrPXQsdGhpcy51c2VyRXZlbnRzLm1vdmUoMCx0aGlzLl93aGVlbFkpKSxlLnByZXZlbnREZWZhdWx0KCl9LG1ha2VWaXJ0dWFsOmZ1bmN0aW9uKCl7dGhpcy5kaW1lbnNpb25zLnkubWFrZVZpcnR1YWwoKX0sdmlydHVhbFNpemU6ZnVuY3Rpb24oZSx0KXt0aGlzLmRpbWVuc2lvbnMueS52aXJ0dWFsU2l6ZShlLHQpfSxoZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaW1lbnNpb25zLnkuc2l6ZX0sc2Nyb2xsSGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Nyb2xsRWxlbWVudFswXS5zY3JvbGxIZWlnaHR9LHNjcm9sbFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Nyb2xsRWxlbWVudFswXS5zY3JvbGxXaWR0aH0sb3B0aW9uczp7bmFtZTpcIlNjcm9sbGVyXCIsem9vbTohMSxwdWxsT2Zmc2V0OjE0MCx2aXNpYmxlU2Nyb2xsSGludHM6ITEsZWxhc3RpYzohMCx1c2VOYXRpdmU6ITEsbW91c2V3aGVlbFNjcm9sbGluZzohMCxhdm9pZFNjcm9sbGluZzpmdW5jdGlvbigpe3JldHVybiExfSxwdWxsVG9SZWZyZXNoOiExLG1lc3NhZ2VzOntwdWxsVGVtcGxhdGU6XCJQdWxsIHRvIHJlZnJlc2hcIixyZWxlYXNlVGVtcGxhdGU6XCJSZWxlYXNlIHRvIHJlZnJlc2hcIixyZWZyZXNoVGVtcGxhdGU6XCJSZWZyZXNoaW5nXCJ9fSxldmVudHM6W1MsQSxEXSxfcmVzaXplOmZ1bmN0aW9uKCl7dGhpcy5fbmF0aXZlfHx0aGlzLmNvbnRlbnRSZXNpemVkKCl9LHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztsLmZuLnNldE9wdGlvbnMuY2FsbCh0LGUpLGUucHVsbFRvUmVmcmVzaCYmdC5faW5pdFB1bGxUb1JlZnJlc2goKX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9uYXRpdmU/dGhpcy5zY3JvbGxFbGVtZW50LnNjcm9sbFRvcCgwKToodGhpcy5tb3ZhYmxlLm1vdmVUbyh7eDowLHk6MH0pLHRoaXMuX3NjYWxlKDEpKX0sY29udGVudFJlc2l6ZWQ6ZnVuY3Rpb24oKXt0aGlzLmRpbWVuc2lvbnMucmVmcmVzaCgpLHRoaXMucGFuZS54Lm91dE9mQm91bmRzKCkmJnRoaXMubW92YWJsZS5tb3ZlQXhpcyhcInhcIix0aGlzLmRpbWVuc2lvbnMueC5taW4pLHRoaXMucGFuZS55Lm91dE9mQm91bmRzKCkmJnRoaXMubW92YWJsZS5tb3ZlQXhpcyhcInlcIix0aGlzLmRpbWVuc2lvbnMueS5taW4pfSx6b29tT3V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kaW1lbnNpb25zO2UucmVmcmVzaCgpLHRoaXMuX3NjYWxlKGUuZml0U2NhbGUpLHRoaXMubW92YWJsZS5tb3ZlVG8oZS5jZW50ZXJDb29yZGluYXRlcygpKX0sZW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy5lbmFibGVkPSEwfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy5lbmFibGVkPSExfSxzY3JvbGxUbzpmdW5jdGlvbihlLHQpe3RoaXMuX25hdGl2ZT8odGhpcy5zY3JvbGxFbGVtZW50LnNjcm9sbExlZnQoZyhlKSksdGhpcy5zY3JvbGxFbGVtZW50LnNjcm9sbFRvcChnKHQpKSk6KHRoaXMuZGltZW5zaW9ucy5yZWZyZXNoKCksdGhpcy5tb3ZhYmxlLm1vdmVUbyh7eDplLHk6dH0pKX0sYW5pbWF0ZWRTY3JvbGxUbzpmdW5jdGlvbihlLHQsbil7dmFyIGkscjt0aGlzLl9uYXRpdmU/dGhpcy5zY3JvbGxUbyhlLHQpOihpPXt4OnRoaXMubW92YWJsZS54LHk6dGhpcy5tb3ZhYmxlLnl9LHI9e3g6ZSx5OnR9LHRoaXMuYW5pbWF0ZWRTY3JvbGxlci5zZXRDb29yZGluYXRlcyhpLHIpLHRoaXMuYW5pbWF0ZWRTY3JvbGxlci5zZXRDYWxsYmFjayhuKSx0aGlzLmFuaW1hdGVkU2Nyb2xsZXIuc3RhcnQoKSl9LHB1bGxIYW5kbGVkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLnJlZnJlc2hIaW50LnJlbW92ZUNsYXNzKEMpLGUuaGludENvbnRhaW5lci5odG1sKGUucHVsbFRlbXBsYXRlKHt9KSksZS55aW5lcnRpYS5vbkVuZCgpLGUueGluZXJ0aWEub25FbmQoKSxlLnVzZXJFdmVudHMuY2FuY2VsKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtsLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLnVzZXJFdmVudHMmJnRoaXMudXNlckV2ZW50cy5kZXN0cm95KCl9LF9zY2FsZTpmdW5jdGlvbihlKXt0aGlzLmRpbWVuc2lvbnMucmVzY2FsZShlKSx0aGlzLm1vdmFibGUuc2NhbGVUbyhlKX0sX2luaXRQdWxsVG9SZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLmRpbWVuc2lvbnMueS5mb3JjZUVuYWJsZWQoKSxlLnB1bGxUZW1wbGF0ZT1uLnRlbXBsYXRlKGUub3B0aW9ucy5tZXNzYWdlcy5wdWxsVGVtcGxhdGUpLGUucmVsZWFzZVRlbXBsYXRlPW4udGVtcGxhdGUoZS5vcHRpb25zLm1lc3NhZ2VzLnJlbGVhc2VUZW1wbGF0ZSksZS5yZWZyZXNoVGVtcGxhdGU9bi50ZW1wbGF0ZShlLm9wdGlvbnMubWVzc2FnZXMucmVmcmVzaFRlbXBsYXRlKSxlLnNjcm9sbEVsZW1lbnQucHJlcGVuZCgnPHNwYW4gY2xhc3M9XCJrbS1zY3JvbGxlci1wdWxsXCI+PHNwYW4gY2xhc3M9XCJrbS1pY29uXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwia20tbG9hZGluZy1sZWZ0XCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwia20tbG9hZGluZy1yaWdodFwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImttLXRlbXBsYXRlXCI+JytlLnB1bGxUZW1wbGF0ZSh7fSkrXCI8L3NwYW4+PC9zcGFuPlwiKSxlLnJlZnJlc2hIaW50PWUuc2Nyb2xsRWxlbWVudC5jaGlsZHJlbigpLmZpcnN0KCksZS5oaW50Q29udGFpbmVyPWUucmVmcmVzaEhpbnQuY2hpbGRyZW4oXCIua20tdGVtcGxhdGVcIiksZS5wYW5lLnkuYmluZChcImNoYW5nZVwiLGEoZS5fcGFuZUNoYW5nZSxlKSksZS51c2VyRXZlbnRzLmJpbmQoXCJlbmRcIixhKGUuX2RyYWdFbmQsZSkpfSxfZHJhZ0VuZDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5wdWxsZWQmJihlLnB1bGxlZD0hMSxlLnJlZnJlc2hIaW50LnJlbW92ZUNsYXNzKHgpLmFkZENsYXNzKEMpLGUuaGludENvbnRhaW5lci5odG1sKGUucmVmcmVzaFRlbXBsYXRlKHt9KSksZS55aW5lcnRpYS5mcmVlemUoZS5vcHRpb25zLnB1bGxPZmZzZXQvMiksZS50cmlnZ2VyKFwicHVsbFwiKSl9LF9wYW5lQ2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLm1vdmFibGUueS9iPmUub3B0aW9ucy5wdWxsT2Zmc2V0P2UucHVsbGVkfHwoZS5wdWxsZWQ9ITAsZS5yZWZyZXNoSGludC5yZW1vdmVDbGFzcyhDKS5hZGRDbGFzcyh4KSxlLmhpbnRDb250YWluZXIuaHRtbChlLnJlbGVhc2VUZW1wbGF0ZSh7fSkpKTplLnB1bGxlZCYmKGUucHVsbGVkPSExLGUucmVmcmVzaEhpbnQucmVtb3ZlQ2xhc3MoeCksZS5oaW50Q29udGFpbmVyLmh0bWwoZS5wdWxsVGVtcGxhdGUoe30pKSl9LF9pbml0QXhpczpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5tb3ZhYmxlLGk9dC5kaW1lbnNpb25zW2VdLHI9dC50YXBDYXB0dXJlLG89dC5wYW5lW2VdLGE9bmV3IHooe2F4aXM6ZSxtb3ZhYmxlOm4sZGltZW5zaW9uOmksY29udGFpbmVyOnQuZWxlbWVudCxhbHdheXNWaXNpYmxlOnQub3B0aW9ucy52aXNpYmxlU2Nyb2xsSGludHN9KTtpLmJpbmQoVCxmdW5jdGlvbigpe2EucmVmcmVzaCgpfSksby5iaW5kKFQsZnVuY3Rpb24oKXthLnNob3coKX0pLHRbZStcImluZXJ0aWFcIl09bmV3IFAoe2F4aXM6ZSxwYW5lQXhpczpvLG1vdmFibGU6bix0YXBDYXB0dXJlOnIsdXNlckV2ZW50czp0LnVzZXJFdmVudHMsZGltZW5zaW9uOmksZWxhc3RpYzp0Lm9wdGlvbnMuZWxhc3RpYyxmcmljdGlvbjp0Lm9wdGlvbnMuZnJpY3Rpb258fF8sdmVsb2NpdHlNdWx0aXBsaWVyOnQub3B0aW9ucy52ZWxvY2l0eU11bHRpcGxpZXJ8fHksZW5kOmZ1bmN0aW9uKCl7YS5oaWRlKCksdC50cmlnZ2VyKFwic2Nyb2xsRW5kXCIse2F4aXM6ZSxzY3JvbGxUb3A6dC5zY3JvbGxUb3Asc2Nyb2xsTGVmdDp0LnNjcm9sbExlZnR9KX19KX19KTtvLnBsdWdpbihGKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUpe3JldHVybiBlLnBvc2l0aW9uKCkudG9wKzN9dmFyIGk9d2luZG93LmtlbmRvLHI9aS51aS5XaWRnZXQsbz1lLnByb3h5LGE9ITEscz1cIi5rZW5kb0dyb3VwYWJsZVwiLGw9XCJjaGFuZ2VcIixjPWkudGVtcGxhdGUoJzxkaXYgY2xhc3M9XCJrLWdyb3VwLWluZGljYXRvclwiIGRhdGEtIz1kYXRhLm5zI2ZpZWxkPVwiJHtkYXRhLmZpZWxkfVwiIGRhdGEtIz1kYXRhLm5zI3RpdGxlPVwiJHtkYXRhLnRpdGxlIHx8IFwiXCJ9XCIgZGF0YS0jPWRhdGEubnMjZGlyPVwiJHtkYXRhLmRpciB8fCBcImFzY1wifVwiPjxhIGhyZWY9XCJcXFxcI1wiIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1zaS1hcnJvdy0keyhkYXRhLmRpciB8fCBcImFzY1wiKSA9PSBcImFzY1wiID8gXCJuXCIgOiBcInNcIn1cIj4oc29ydGVkICR7KGRhdGEuZGlyIHx8IFwiYXNjXCIpID09IFwiYXNjXCIgPyBcImFzY2VuZGluZ1wiOiBcImRlc2NlbmRpbmdcIn0pPC9zcGFuPiR7ZGF0YS50aXRsZSA/IGRhdGEudGl0bGU6IGRhdGEuZmllbGR9PC9hPjxhIGNsYXNzPVwiay1idXR0b24gay1idXR0b24taWNvbiBrLWJ1dHRvbi1iYXJlXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1ncm91cC1kZWxldGVcIj48L3NwYW4+PC9hPjwvZGl2Picse3VzZVdpdGhCbG9jazohMX0pLGQ9ZnVuY3Rpb24odCl7cmV0dXJuIGUoJzxkaXYgY2xhc3M9XCJrLWhlYWRlciBrLWRyYWctY2x1ZVwiIC8+JykuY3NzKHt3aWR0aDp0LndpZHRoKCkscGFkZGluZ0xlZnQ6dC5jc3MoXCJwYWRkaW5nTGVmdFwiKSxwYWRkaW5nUmlnaHQ6dC5jc3MoXCJwYWRkaW5nUmlnaHRcIiksbGluZUhlaWdodDp0LmhlaWdodCgpK1wicHhcIixwYWRkaW5nVG9wOnQuY3NzKFwicGFkZGluZ1RvcFwiKSxwYWRkaW5nQm90dG9tOnQuY3NzKFwicGFkZGluZ0JvdHRvbVwiKX0pLmh0bWwodC5hdHRyKGkuYXR0cihcInRpdGxlXCIpKXx8dC5hdHRyKGkuYXR0cihcImZpZWxkXCIpKSkucHJlcGVuZCgnPHNwYW4gY2xhc3M9XCJrLWljb24gay1kcmFnLXN0YXR1cyBrLWRlbmllZFwiIC8+Jyl9LHU9ZSgnPGRpdiBjbGFzcz1cImstZ3JvdXBpbmctZHJvcGNsdWVcIi8+JyksaD0vKFwifFxcJXwnfFxcW3xcXF18XFwkfFxcLnxcXCx8XFw6fFxcO3xcXCt8XFwqfFxcJnxcXCF8XFwjfFxcKHxcXCl8PHw+fFxcPXxcXD98XFxAfFxcXnxcXHt8XFx9fFxcfnxcXC98XFx8fGApL2cscD1yLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihjLGgpe3ZhciBwLGYsZz10aGlzLG09aS5ndWlkKCksdj1vKGcuX2ludGlhbGl6ZVBvc2l0aW9ucyxnKSxfPWcuX2Ryb3BDdWVQb3NpdGlvbnM9W107ci5mbi5pbml0LmNhbGwoZyxjLGgpLGE9aS5zdXBwb3J0LmlzUnRsKGMpLGY9YT9cInJpZ2h0XCI6XCJsZWZ0XCIsZy5kcmFnZ2FibGU9cD1nLm9wdGlvbnMuZHJhZ2dhYmxlfHxuZXcgaS51aS5EcmFnZ2FibGUoZy5lbGVtZW50LHtmaWx0ZXI6Zy5vcHRpb25zLmRyYWdnYWJsZUVsZW1lbnRzLGhpbnQ6ZCxncm91cDptfSksZy5ncm91cENvbnRhaW5lcj1lKGcub3B0aW9ucy5ncm91cENvbnRhaW5lcixnLmVsZW1lbnQpLmtlbmRvRHJvcFRhcmdldCh7Z3JvdXA6cC5vcHRpb25zLmdyb3VwLGRyYWdlbnRlcjpmdW5jdGlvbihlKXtnLl9jYW5EcmFnKGUuZHJhZ2dhYmxlLmN1cnJlbnRUYXJnZXQpJiYoZS5kcmFnZ2FibGUuaGludC5maW5kKFwiLmstZHJhZy1zdGF0dXNcIikucmVtb3ZlQ2xhc3MoXCJrLWRlbmllZFwiKS5hZGRDbGFzcyhcImstYWRkXCIpLHUuY3NzKFwidG9wXCIsbihnLmdyb3VwQ29udGFpbmVyKSkuY3NzKGYsMCkuYXBwZW5kVG8oZy5ncm91cENvbnRhaW5lcikpfSxkcmFnbGVhdmU6ZnVuY3Rpb24oZSl7ZS5kcmFnZ2FibGUuaGludC5maW5kKFwiLmstZHJhZy1zdGF0dXNcIikucmVtb3ZlQ2xhc3MoXCJrLWFkZFwiKS5hZGRDbGFzcyhcImstZGVuaWVkXCIpLHUucmVtb3ZlKCl9LGRyb3A6ZnVuY3Rpb24odCl7dmFyIG4scj10LmRyYWdnYWJsZS5jdXJyZW50VGFyZ2V0LG89ci5hdHRyKGkuYXR0cihcImZpZWxkXCIpKSxzPXIuYXR0cihpLmF0dHIoXCJ0aXRsZVwiKSksbD1nLmluZGljYXRvcihvKSxjPWcuX2Ryb3BDdWVQb3NpdGlvbnMsZD1jW2MubGVuZ3RoLTFdOyhyLmhhc0NsYXNzKFwiay1ncm91cC1pbmRpY2F0b3JcIil8fGcuX2NhbkRyYWcocikpJiYoZD8obj1nLl9kcm9wQ3VlUG9zaXRpb24oaS5nZXRPZmZzZXQodSkubGVmdCtwYXJzZUludChkLmVsZW1lbnQuY3NzKFwibWFyZ2luTGVmdFwiKSwxMCkqKGE/LTE6MSkrcGFyc2VJbnQoZC5lbGVtZW50LmNzcyhcIm1hcmdpblJpZ2h0XCIpLDEwKSksbiYmZy5fY2FuRHJvcChlKGwpLG4uZWxlbWVudCxuLmxlZnQpJiYobi5iZWZvcmU/bi5lbGVtZW50LmJlZm9yZShsfHxnLmJ1aWxkSW5kaWNhdG9yKG8scykpOm4uZWxlbWVudC5hZnRlcihsfHxnLmJ1aWxkSW5kaWNhdG9yKG8scykpLGcuX2NoYW5nZSgpKSk6KGcuZ3JvdXBDb250YWluZXIuYXBwZW5kKGcuYnVpbGRJbmRpY2F0b3IobyxzKSksZy5fY2hhbmdlKCkpKX19KS5rZW5kb0RyYWdnYWJsZSh7ZmlsdGVyOlwiZGl2LmstZ3JvdXAtaW5kaWNhdG9yXCIsaGludDpkLGdyb3VwOnAub3B0aW9ucy5ncm91cCxkcmFnY2FuY2VsOm8oZy5fZHJhZ0NhbmNlbCxnKSxkcmFnc3RhcnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jdXJyZW50VGFyZ2V0LGk9cGFyc2VJbnQodC5jc3MoXCJtYXJnaW5MZWZ0XCIpLDEwKSxyPXQucG9zaXRpb24oKSxvPWE/ci5sZWZ0LWk6ci5sZWZ0K3Qub3V0ZXJXaWR0aCgpO3YoKSx1LmNzcyh7dG9wOm4oZy5ncm91cENvbnRhaW5lciksbGVmdDpvfSkuYXBwZW5kVG8oZy5ncm91cENvbnRhaW5lciksdGhpcy5oaW50LmZpbmQoXCIuay1kcmFnLXN0YXR1c1wiKS5yZW1vdmVDbGFzcyhcImstZGVuaWVkXCIpLmFkZENsYXNzKFwiay1hZGRcIil9LGRyYWdlbmQ6ZnVuY3Rpb24oKXtnLl9kcmFnRW5kKHRoaXMpfSxkcmFnOm8oZy5fZHJhZyxnKX0pLm9uKFwiY2xpY2tcIitzLFwiLmstYnV0dG9uXCIsZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLGcuX3JlbW92ZUluZGljYXRvcihlKHRoaXMpLnBhcmVudCgpKX0pLm9uKFwiY2xpY2tcIitzLFwiLmstbGlua1wiLGZ1bmN0aW9uKHQpe3ZhciBuPWUodGhpcykucGFyZW50KCkscj1nLmJ1aWxkSW5kaWNhdG9yKG4uYXR0cihpLmF0dHIoXCJmaWVsZFwiKSksbi5hdHRyKGkuYXR0cihcInRpdGxlXCIpKSxcImFzY1wiPT1uLmF0dHIoaS5hdHRyKFwiZGlyXCIpKT9cImRlc2NcIjpcImFzY1wiKTtuLmJlZm9yZShyKS5yZW1vdmUoKSxnLl9jaGFuZ2UoKSx0LnByZXZlbnREZWZhdWx0KCl9KSxwLmJpbmQoW1wiZHJhZ2VuZFwiLFwiZHJhZ2NhbmNlbFwiLFwiZHJhZ3N0YXJ0XCIsXCJkcmFnXCJdLHtkcmFnZW5kOmZ1bmN0aW9uKCl7Zy5fZHJhZ0VuZCh0aGlzKX0sZHJhZ2NhbmNlbDpvKGcuX2RyYWdDYW5jZWwsZyksZHJhZ3N0YXJ0OmZ1bmN0aW9uKGUpe3ZhciBuLGkscjtyZXR1cm4gZy5vcHRpb25zLmFsbG93RHJhZ3x8Zy5fY2FuRHJhZyhlLmN1cnJlbnRUYXJnZXQpPyh2KCksXy5sZW5ndGg/KG49X1tfLmxlbmd0aC0xXS5lbGVtZW50LGk9cGFyc2VJbnQobi5jc3MoXCJtYXJnaW5SaWdodFwiKSwxMCkscj1uLnBvc2l0aW9uKCkubGVmdCtuLm91dGVyV2lkdGgoKStpKTpyPTAsdCk6KGUucHJldmVudERlZmF1bHQoKSx0KX0sZHJhZzpvKGcuX2RyYWcsZyl9KSxnLmRhdGFTb3VyY2U9Zy5vcHRpb25zLmRhdGFTb3VyY2UsZy5kYXRhU291cmNlJiZnLl9yZWZyZXNoSGFuZGxlcj9nLmRhdGFTb3VyY2UudW5iaW5kKGwsZy5fcmVmcmVzaEhhbmRsZXIpOmcuX3JlZnJlc2hIYW5kbGVyPW8oZy5yZWZyZXNoLGcpLGcuZGF0YVNvdXJjZSYmKGcuZGF0YVNvdXJjZS5iaW5kKFwiY2hhbmdlXCIsZy5fcmVmcmVzaEhhbmRsZXIpLGcucmVmcmVzaCgpKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LmRhdGFTb3VyY2U7dC5ncm91cENvbnRhaW5lciYmdC5ncm91cENvbnRhaW5lci5lbXB0eSgpLmFwcGVuZChlLm1hcChuLmdyb3VwKCl8fFtdLGZ1bmN0aW9uKGUpe3ZhciBuPWUuZmllbGQucmVwbGFjZShoLFwiXFxcXCQxXCIpLHI9dC5lbGVtZW50LmZpbmQodC5vcHRpb25zLmZpbHRlcikuZmlsdGVyKFwiW1wiK2kuYXR0cihcImZpZWxkXCIpK1wiPVwiK24rXCJdXCIpO3JldHVybiB0LmJ1aWxkSW5kaWNhdG9yKGUuZmllbGQsci5hdHRyKGkuYXR0cihcInRpdGxlXCIpKSxlLmRpcil9KS5qb2luKFwiXCIpKSx0Ll9pbnZhbGlkYXRlR3JvdXBDb250YWluZXIoKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ci5mbi5kZXN0cm95LmNhbGwoZSksZS5ncm91cENvbnRhaW5lci5vZmYocyksZS5ncm91cENvbnRhaW5lci5kYXRhKFwia2VuZG9Ecm9wVGFyZ2V0XCIpJiZlLmdyb3VwQ29udGFpbmVyLmRhdGEoXCJrZW5kb0Ryb3BUYXJnZXRcIikuZGVzdHJveSgpLGUuZ3JvdXBDb250YWluZXIuZGF0YShcImtlbmRvRHJhZ2dhYmxlXCIpJiZlLmdyb3VwQ29udGFpbmVyLmRhdGEoXCJrZW5kb0RyYWdnYWJsZVwiKS5kZXN0cm95KCksZS5vcHRpb25zLmRyYWdnYWJsZXx8ZS5kcmFnZ2FibGUuZGVzdHJveSgpLGUuZGF0YVNvdXJjZSYmZS5fcmVmcmVzaEhhbmRsZXImJihlLmRhdGFTb3VyY2UudW5iaW5kKFwiY2hhbmdlXCIsZS5fcmVmcmVzaEhhbmRsZXIpLGUuX3JlZnJlc2hIYW5kbGVyPW51bGwpLGUuZ3JvdXBDb250YWluZXI9ZS5lbGVtZW50PWUuZHJhZ2dhYmxlPW51bGx9LG9wdGlvbnM6e25hbWU6XCJHcm91cGFibGVcIixmaWx0ZXI6XCJ0aFwiLGRyYWdnYWJsZUVsZW1lbnRzOlwidGhcIixtZXNzYWdlczp7ZW1wdHk6XCJEcmFnIGEgY29sdW1uIGhlYWRlciBhbmQgZHJvcCBpdCBoZXJlIHRvIGdyb3VwIGJ5IHRoYXQgY29sdW1uXCJ9fSxpbmRpY2F0b3I6ZnVuY3Rpb24odCl7dmFyIG49ZShcIi5rLWdyb3VwLWluZGljYXRvclwiLHRoaXMuZ3JvdXBDb250YWluZXIpO3JldHVybiBlLmdyZXAobixmdW5jdGlvbihuKXtyZXR1cm4gZShuKS5hdHRyKGkuYXR0cihcImZpZWxkXCIpKT09PXR9KVswXX0sYnVpbGRJbmRpY2F0b3I6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBjKHtmaWVsZDplLnJlcGxhY2UoL1wiL2csXCInXCIpLGRpcjpuLHRpdGxlOnQsbnM6aS5uc30pfSxkZXNjcmlwdG9yczpmdW5jdGlvbigpe3ZhciB0LG4scixvLGEscz10aGlzLGw9ZShcIi5rLWdyb3VwLWluZGljYXRvclwiLHMuZ3JvdXBDb250YWluZXIpO3JldHVybiB0PXMuZWxlbWVudC5maW5kKHMub3B0aW9ucy5maWx0ZXIpLm1hcChmdW5jdGlvbigpe3ZhciB0PWUodGhpcykscj10LmF0dHIoaS5hdHRyKFwiYWdncmVnYXRlc1wiKSkscz10LmF0dHIoaS5hdHRyKFwiZmllbGRcIikpO2lmKHImJlwiXCIhPT1yKWZvcihuPXIuc3BsaXQoXCIsXCIpLHI9W10sbz0wLGE9bi5sZW5ndGg7YT5vO28rKylyLnB1c2goe2ZpZWxkOnMsYWdncmVnYXRlOm5bb119KTtyZXR1cm4gcn0pLnRvQXJyYXkoKSxlLm1hcChsLGZ1bmN0aW9uKG4pe3JldHVybiBuPWUobikscj1uLmF0dHIoaS5hdHRyKFwiZmllbGRcIikpLHtmaWVsZDpyLGRpcjpuLmF0dHIoaS5hdHRyKFwiZGlyXCIpKSxhZ2dyZWdhdGVzOnR8fFtdfX0pfSxfcmVtb3ZlSW5kaWNhdG9yOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5yZW1vdmUoKSx0Ll9pbnZhbGlkYXRlR3JvdXBDb250YWluZXIoKSx0Ll9jaGFuZ2UoKX0sX2NoYW5nZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5kYXRhU291cmNlJiZlLmRhdGFTb3VyY2UuZ3JvdXAoZS5kZXNjcmlwdG9ycygpKX0sX2Ryb3BDdWVQb3NpdGlvbjpmdW5jdGlvbih0KXt2YXIgbixpLHIsbyxzLGw9dGhpcy5fZHJvcEN1ZVBvc2l0aW9ucztpZih1LmlzKFwiOnZpc2libGVcIikmJjAhPT1sLmxlbmd0aClyZXR1cm4gdD1NYXRoLmNlaWwodCksbj1sW2wubGVuZ3RoLTFdLGk9bi5sZWZ0LHI9bi5yaWdodCxvPXBhcnNlSW50KG4uZWxlbWVudC5jc3MoXCJtYXJnaW5MZWZ0XCIpLDEwKSxzPXBhcnNlSW50KG4uZWxlbWVudC5jc3MoXCJtYXJnaW5SaWdodFwiKSwxMCksdD49ciYmIWF8fGk+dCYmYT90PXtsZWZ0Om4uZWxlbWVudC5wb3NpdGlvbigpLmxlZnQrKGE/LW86bi5lbGVtZW50Lm91dGVyV2lkdGgoKStzKSxlbGVtZW50Om4uZWxlbWVudCxiZWZvcmU6ITF9Oih0PWUuZ3JlcChsLGZ1bmN0aW9uKGUpe3JldHVybiB0Pj1lLmxlZnQmJmUucmlnaHQ+PXR8fGEmJnQ+ZS5yaWdodFxyXG59KVswXSx0JiYodD17bGVmdDphP3QuZWxlbWVudC5wb3NpdGlvbigpLmxlZnQrdC5lbGVtZW50Lm91dGVyV2lkdGgoKStzOnQuZWxlbWVudC5wb3NpdGlvbigpLmxlZnQtbyxlbGVtZW50OnQuZWxlbWVudCxiZWZvcmU6ITB9KSksdH0sX2RyYWc6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZHJvcEN1ZVBvc2l0aW9uKGUueC5sb2NhdGlvbik7dCYmdS5jc3Moe2xlZnQ6dC5sZWZ0LHJpZ2h0OlwiYXV0b1wifSl9LF9jYW5EcmFnOmZ1bmN0aW9uKGUpe3ZhciB0PWUuYXR0cihpLmF0dHIoXCJmaWVsZFwiKSk7cmV0dXJuXCJmYWxzZVwiIT1lLmF0dHIoaS5hdHRyKFwiZ3JvdXBhYmxlXCIpKSYmdCYmKGUuaGFzQ2xhc3MoXCJrLWdyb3VwLWluZGljYXRvclwiKXx8IXRoaXMuaW5kaWNhdG9yKHQpKX0sX2NhbkRyb3A6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPWUubmV4dCgpLHI9ZVswXSE9PXRbMF0mJighaVswXXx8dFswXSE9PWlbMF18fCFhJiZuPmkucG9zaXRpb24oKS5sZWZ0fHxhJiZuPGkucG9zaXRpb24oKS5sZWZ0KTtyZXR1cm4gcn0sX2RyYWdFbmQ6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxyPXQuY3VycmVudFRhcmdldC5hdHRyKGkuYXR0cihcImZpZWxkXCIpKSxvPW4uaW5kaWNhdG9yKHIpO3QhPT1uLm9wdGlvbnMuZHJhZ2dhYmxlJiYhdC5kcm9wcGVkJiZvJiZuLl9yZW1vdmVJbmRpY2F0b3IoZShvKSksbi5fZHJhZ0NhbmNlbCgpfSxfZHJhZ0NhbmNlbDpmdW5jdGlvbigpe3UucmVtb3ZlKCksdGhpcy5fZHJvcEN1ZVBvc2l0aW9ucz1bXX0sX2ludGlhbGl6ZVBvc2l0aW9uczpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxyPWUoXCIuay1ncm91cC1pbmRpY2F0b3JcIixuLmdyb3VwQ29udGFpbmVyKTtuLl9kcm9wQ3VlUG9zaXRpb25zPWUubWFwKHIsZnVuY3Rpb24obil7cmV0dXJuIG49ZShuKSx0PWkuZ2V0T2Zmc2V0KG4pLmxlZnQse2xlZnQ6cGFyc2VJbnQodCwxMCkscmlnaHQ6cGFyc2VJbnQodCtuLm91dGVyV2lkdGgoKSwxMCksZWxlbWVudDpufX0pfSxfaW52YWxpZGF0ZUdyb3VwQ29udGFpbmVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5ncm91cENvbnRhaW5lcjtlJiZlLmlzKFwiOmVtcHR5XCIpJiZlLmh0bWwodGhpcy5vcHRpb25zLm1lc3NhZ2VzLmVtcHR5KX19KTtpLnVpLnBsdWdpbihwKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LG4pe3Q9ZSh0KSxuP3QuZmluZChcIi5rLWRyYWctc3RhdHVzXCIpLnJlbW92ZUNsYXNzKFwiay1hZGRcIikuYWRkQ2xhc3MoXCJrLWRlbmllZFwiKTp0LmZpbmQoXCIuay1kcmFnLXN0YXR1c1wiKS5yZW1vdmVDbGFzcyhcImstZGVuaWVkXCIpLmFkZENsYXNzKFwiay1hZGRcIil9dmFyIG49d2luZG93LmtlbmRvLGk9bi5nZXRPZmZzZXQscj1uLnVpLldpZGdldCxvPVwiY2hhbmdlXCIsYT1cImstcmVvcmRlcmFibGVcIixzPXIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHMsbCl7dmFyIGMsZD10aGlzLHU9bi5ndWlkKCkrXCItcmVvcmRlcmFibGVcIjtyLmZuLmluaXQuY2FsbChkLHMsbCkscz1kLmVsZW1lbnQuYWRkQ2xhc3MoYSksbD1kLm9wdGlvbnMsZC5kcmFnZ2FibGU9Yz1sLmRyYWdnYWJsZXx8bmV3IG4udWkuRHJhZ2dhYmxlKHMse2dyb3VwOnUsZmlsdGVyOmwuZmlsdGVyLGhpbnQ6bC5oaW50fSksZC5yZW9yZGVyRHJvcEN1ZT1lKCc8ZGl2IGNsYXNzPVwiay1yZW9yZGVyLWN1ZVwiPjxkaXYgY2xhc3M9XCJrLWljb24gay1pLWFycm93LXNcIj48L2Rpdj48ZGl2IGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy1uXCI+PC9kaXY+PC9kaXY+Jykscy5maW5kKGMub3B0aW9ucy5maWx0ZXIpLmtlbmRvRHJvcFRhcmdldCh7Z3JvdXA6Yy5vcHRpb25zLmdyb3VwLGRyYWdlbnRlcjpmdW5jdGlvbihlKXt2YXIgbixyLG8sYTtkLl9kcmFnZ2FibGUmJihuPXRoaXMuZWxlbWVudCxvPSFkLl9kcm9wVGFyZ2V0QWxsb3dlZChuKXx8ZC5faXNMYXN0RHJhZ2dhYmxlKCksdChlLmRyYWdnYWJsZS5oaW50LG8pLG98fChyPWkobiksYT1yLmxlZnQsbC5pblNhbWVDb250YWluZXImJiFsLmluU2FtZUNvbnRhaW5lcih7c291cmNlOm4sdGFyZ2V0OmQuX2RyYWdnYWJsZSxzb3VyY2VJbmRleDpkLl9pbmRleChuKSx0YXJnZXRJbmRleDpkLl9pbmRleChkLl9kcmFnZ2FibGUpfSk/ZC5fZHJvcFRhcmdldD1uOmQuX2luZGV4KG4pPmQuX2luZGV4KGQuX2RyYWdnYWJsZSkmJihhKz1uLm91dGVyV2lkdGgoKSksZC5yZW9yZGVyRHJvcEN1ZS5jc3Moe2hlaWdodDpuLm91dGVySGVpZ2h0KCksdG9wOnIudG9wLGxlZnQ6YX0pLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpKSl9LGRyYWdsZWF2ZTpmdW5jdGlvbihlKXt0KGUuZHJhZ2dhYmxlLmhpbnQsITApLGQucmVvcmRlckRyb3BDdWUucmVtb3ZlKCksZC5fZHJvcFRhcmdldD1udWxsfSxkcm9wOmZ1bmN0aW9uKCl7dmFyIGUsdCxuO2QuX2Ryb3BUYXJnZXQ9bnVsbCxkLl9kcmFnZ2FibGUmJihlPXRoaXMuZWxlbWVudCx0PWQuX2RyYWdnYWJsZSxuPSExLGQuX2Ryb3BUYXJnZXRBbGxvd2VkKGUpJiYhZC5faXNMYXN0RHJhZ2dhYmxlKCkmJmQudHJpZ2dlcihvLHtlbGVtZW50OmQuX2RyYWdnYWJsZSx0YXJnZXQ6ZSxvbGRJbmRleDpkLl9pbmRleCh0KSxuZXdJbmRleDpkLl9pbmRleChlKSxwb3NpdGlvbjppKGQucmVvcmRlckRyb3BDdWUpLmxlZnQ+aShlKS5sZWZ0P1wiYWZ0ZXJcIjpcImJlZm9yZVwifSkpfX0pLGMuYmluZChbXCJkcmFnY2FuY2VsXCIsXCJkcmFnZW5kXCIsXCJkcmFnc3RhcnRcIixcImRyYWdcIl0se2RyYWdjYW5jZWw6ZnVuY3Rpb24oKXtkLnJlb3JkZXJEcm9wQ3VlLnJlbW92ZSgpLGQuX2RyYWdnYWJsZT1udWxsLGQuX2VsZW1lbnRzPW51bGx9LGRyYWdlbmQ6ZnVuY3Rpb24oKXtkLnJlb3JkZXJEcm9wQ3VlLnJlbW92ZSgpLGQuX2RyYWdnYWJsZT1udWxsLGQuX2VsZW1lbnRzPW51bGx9LGRyYWdzdGFydDpmdW5jdGlvbihlKXtkLl9kcmFnZ2FibGU9ZS5jdXJyZW50VGFyZ2V0LGQuX2VsZW1lbnRzPWQuZWxlbWVudC5maW5kKGQuZHJhZ2dhYmxlLm9wdGlvbnMuZmlsdGVyKX0sZHJhZzpmdW5jdGlvbihlKXt2YXIgdCxuO2QuX2Ryb3BUYXJnZXQmJiF0aGlzLmhpbnQuZmluZChcIi5rLWRyYWctc3RhdHVzXCIpLmhhc0NsYXNzKFwiay1kZW5pZWRcIikmJih0PWkoZC5fZHJvcFRhcmdldCkubGVmdCxuPWQuX2Ryb3BUYXJnZXQub3V0ZXJXaWR0aCgpLGQucmVvcmRlckRyb3BDdWUuY3NzKGUucGFnZVg+dCtuLzI/e2xlZnQ6dCtufTp7bGVmdDp0fSkpfX0pfSxvcHRpb25zOntuYW1lOlwiUmVvcmRlcmFibGVcIixmaWx0ZXI6XCIqXCJ9LGV2ZW50czpbb10sX2lzTGFzdERyYWdnYWJsZTpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5vcHRpb25zLmluU2FtZUNvbnRhaW5lcixuPXRoaXMuX2RyYWdnYWJsZVswXSxpPXRoaXMuX2VsZW1lbnRzLmdldCgpLHI9ITE7aWYoIXQpcmV0dXJuITE7Zm9yKDshciYmaS5sZW5ndGg+MDspZT1pLnBvcCgpLHI9biE9PWUmJnQoe3NvdXJjZTpuLHRhcmdldDplLHNvdXJjZUluZGV4OnRoaXMuX2luZGV4KG4pLHRhcmdldEluZGV4OnRoaXMuX2luZGV4KGUpfSk7cmV0dXJuIXJ9LF9kcm9wVGFyZ2V0QWxsb3dlZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnMuaW5TYW1lQ29udGFpbmVyLG49dGhpcy5vcHRpb25zLmRyYWdPdmVyQ29udGFpbmVycyxpPXRoaXMuX2RyYWdnYWJsZTtyZXR1cm4gaVswXT09PWVbMF0/ITE6dCYmbj90KHtzb3VyY2U6aSx0YXJnZXQ6ZSxzb3VyY2VJbmRleDp0aGlzLl9pbmRleChpKSx0YXJnZXRJbmRleDp0aGlzLl9pbmRleChlKX0pPyEwOm4odGhpcy5faW5kZXgoaSksdGhpcy5faW5kZXgoZSkpOiEwfSxfaW5kZXg6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VsZW1lbnRzLmluZGV4KGUpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyLmZuLmRlc3Ryb3kuY2FsbCh0KSx0LmVsZW1lbnQuZmluZCh0LmRyYWdnYWJsZS5vcHRpb25zLmZpbHRlcikuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7dC5kYXRhKFwia2VuZG9Ecm9wVGFyZ2V0XCIpJiZ0LmRhdGEoXCJrZW5kb0Ryb3BUYXJnZXRcIikuZGVzdHJveSgpfSksdC5kcmFnZ2FibGUmJih0LmRyYWdnYWJsZS5kZXN0cm95KCksdC5kcmFnZ2FibGUuZWxlbWVudD10LmRyYWdnYWJsZT1udWxsKSx0LmVsZW1lbnRzPXQucmVvcmRlckRyb3BDdWU9dC5fZWxlbWVudHM9dC5fZHJhZ2dhYmxlPW51bGx9fSk7bi51aS5wbHVnaW4ocyl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG49d2luZG93LmtlbmRvLGk9bi51aSxyPWkuV2lkZ2V0LG89ZS5wcm94eSxhPW4uaXNGdW5jdGlvbixzPWUuZXh0ZW5kLGw9XCJob3Jpem9udGFsXCIsYz1cInZlcnRpY2FsXCIsZD1cInN0YXJ0XCIsdT1cInJlc2l6ZVwiLGg9XCJyZXNpemVlbmRcIixwPXIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztyLmZuLmluaXQuY2FsbChuLGUsdCksbi5vcmllbnRhdGlvbj1uLm9wdGlvbnMub3JpZW50YXRpb24udG9Mb3dlckNhc2UoKSE9Yz9sOmMsbi5fcG9zaXRpb25Nb3VzZT1uLm9yaWVudGF0aW9uPT1sP1wieFwiOlwieVwiLG4uX3Bvc2l0aW9uPW4ub3JpZW50YXRpb249PWw/XCJsZWZ0XCI6XCJ0b3BcIixuLl9zaXppbmdEb209bi5vcmllbnRhdGlvbj09bD9cIm91dGVyV2lkdGhcIjpcIm91dGVySGVpZ2h0XCIsbi5kcmFnZ2FibGU9bmV3IGkuRHJhZ2dhYmxlKGUse2Rpc3RhbmNlOjAsZmlsdGVyOnQuaGFuZGxlLGRyYWc6byhuLl9yZXNpemUsbiksZHJhZ2NhbmNlbDpvKG4uX2NhbmNlbCxuKSxkcmFnc3RhcnQ6byhuLl9zdGFydCxuKSxkcmFnZW5kOm8obi5fc3RvcCxuKX0pLG4udXNlckV2ZW50cz1uLmRyYWdnYWJsZS51c2VyRXZlbnRzfSxldmVudHM6W3UsaCxkXSxvcHRpb25zOntuYW1lOlwiUmVzaXphYmxlXCIsb3JpZW50YXRpb246bH0scmVzaXplOmZ1bmN0aW9uKCl7fSxfbWF4OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLmhpbnQ/bi5oaW50W24uX3NpemluZ0RvbV0oKTowLHI9bi5vcHRpb25zLm1heDtyZXR1cm4gYShyKT9yKGUpOnIhPT10P24uX2luaXRpYWxFbGVtZW50UG9zaXRpb24rci1pOnJ9LF9taW46ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4ub3B0aW9ucy5taW47cmV0dXJuIGEoaSk/aShlKTppIT09dD9uLl9pbml0aWFsRWxlbWVudFBvc2l0aW9uK2k6aX0sX3N0YXJ0OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1uLm9wdGlvbnMuaGludCxyPWUodC5jdXJyZW50VGFyZ2V0KTtuLl9pbml0aWFsRWxlbWVudFBvc2l0aW9uPXIucG9zaXRpb24oKVtuLl9wb3NpdGlvbl0sbi5faW5pdGlhbE1vdXNlUG9zaXRpb249dFtuLl9wb3NpdGlvbk1vdXNlXS5zdGFydExvY2F0aW9uLGkmJihuLmhpbnQ9YShpKT9lKGkocikpOmksbi5oaW50LmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwifSkuY3NzKG4uX3Bvc2l0aW9uLG4uX2luaXRpYWxFbGVtZW50UG9zaXRpb24pLmFwcGVuZFRvKG4uZWxlbWVudCkpLG4udHJpZ2dlcihkLHQpLG4uX21heFBvc2l0aW9uPW4uX21heCh0KSxuLl9taW5Qb3NpdGlvbj1uLl9taW4odCksZShkb2N1bWVudC5ib2R5KS5jc3MoXCJjdXJzb3JcIixyLmNzcyhcImN1cnNvclwiKSl9LF9yZXNpemU6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLHI9aS5fbWF4UG9zaXRpb24sbz1pLl9taW5Qb3NpdGlvbixhPWkuX2luaXRpYWxFbGVtZW50UG9zaXRpb24rKGVbaS5fcG9zaXRpb25Nb3VzZV0ubG9jYXRpb24taS5faW5pdGlhbE1vdXNlUG9zaXRpb24pO249byE9PXQ/TWF0aC5tYXgobyxhKTphLGkucG9zaXRpb249bj1yIT09dD9NYXRoLm1pbihyLG4pOm4saS5oaW50JiZpLmhpbnQudG9nZ2xlQ2xhc3MoaS5vcHRpb25zLmludmFsaWRDbGFzc3x8XCJcIixuPT1yfHxuPT1vKS5jc3MoaS5fcG9zaXRpb24sbiksaS5yZXNpemluZz0hMCxpLnRyaWdnZXIodSxzKGUse3Bvc2l0aW9uOm59KSl9LF9zdG9wOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7bi5oaW50JiZuLmhpbnQucmVtb3ZlKCksbi5yZXNpemluZz0hMSxuLnRyaWdnZXIoaCxzKHQse3Bvc2l0aW9uOm4ucG9zaXRpb259KSksZShkb2N1bWVudC5ib2R5KS5jc3MoXCJjdXJzb3JcIixcIlwiKX0sX2NhbmNlbDpmdW5jdGlvbihlKXt2YXIgbj10aGlzO24uaGludCYmKG4ucG9zaXRpb249dCxuLmhpbnQuY3NzKG4uX3Bvc2l0aW9uLG4uX2luaXRpYWxFbGVtZW50UG9zaXRpb24pLG4uX3N0b3AoZSkpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyLmZuLmRlc3Ryb3kuY2FsbChlKSxlLmRyYWdnYWJsZSYmZS5kcmFnZ2FibGUuZGVzdHJveSgpfSxwcmVzczpmdW5jdGlvbihlKXtpZihlKXt2YXIgdD1lLnBvc2l0aW9uKCksbj10aGlzO24udXNlckV2ZW50cy5wcmVzcyh0LmxlZnQsdC50b3AsZVswXSksbi50YXJnZXRQb3NpdGlvbj10LG4udGFyZ2V0PWV9fSxtb3ZlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLl9wb3NpdGlvbixyPW4udGFyZ2V0UG9zaXRpb24sbz1uLnBvc2l0aW9uO289PT10JiYobz1yW2ldKSxyW2ldPW8rZSxuLnVzZXJFdmVudHMubW92ZShyLmxlZnQsci50b3ApfSxlbmQ6ZnVuY3Rpb24oKXt0aGlzLnVzZXJFdmVudHMuZW5kKCksdGhpcy50YXJnZXQ9dGhpcy5wb3NpdGlvbj10fX0pO24udWkucGx1Z2luKHApfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4odCxuKXt0cnl7cmV0dXJuIGUuY29udGFpbnModCxuKXx8dD09bn1jYXRjaChpKXtyZXR1cm4hMX19ZnVuY3Rpb24gaShlKXtyZXR1cm4gZS5jbG9uZSgpfWZ1bmN0aW9uIHIoZSl7cmV0dXJuIGUuY2xvbmUoKS5yZW1vdmVBdHRyKFwiaWRcIikuY3NzKFwidmlzaWJpbGl0eVwiLFwiaGlkZGVuXCIpfXZhciBvPXdpbmRvdy5rZW5kbyxhPW8udWkuV2lkZ2V0LHM9XCJzdGFydFwiLGw9XCJiZWZvcmVNb3ZlXCIsYz1cIm1vdmVcIixkPVwiZW5kXCIsdT1cImNoYW5nZVwiLGg9XCJjYW5jZWxcIixwPVwic29ydFwiLGY9XCJyZW1vdmVcIixnPVwicmVjZWl2ZVwiLG09XCI+KlwiLHY9LTEsXz1hLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7YS5mbi5pbml0LmNhbGwobixlLHQpLG4ub3B0aW9ucy5wbGFjZWhvbGRlcnx8KG4ub3B0aW9ucy5wbGFjZWhvbGRlcj1yKSxuLm9wdGlvbnMuaGludHx8KG4ub3B0aW9ucy5oaW50PWkpLG4uX2RyYWdnYWJsZT1uLl9jcmVhdGVEcmFnZ2FibGUoKX0sZXZlbnRzOltzLGwsYyxkLHUsaF0sb3B0aW9uczp7bmFtZTpcIlNvcnRhYmxlXCIsaGludDpudWxsLHBsYWNlaG9sZGVyOm51bGwsZmlsdGVyOm0saG9sZFRvRHJhZzohMSxkaXNhYmxlZDpudWxsLGNvbnRhaW5lcjpudWxsLGNvbm5lY3RXaXRoOm51bGwsaGFuZGxlcjpudWxsLGN1cnNvck9mZnNldDpudWxsLGF4aXM6bnVsbCxpZ25vcmU6bnVsbCxjdXJzb3I6XCJhdXRvXCJ9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl9kcmFnZ2FibGUuZGVzdHJveSgpLGEuZm4uZGVzdHJveS5jYWxsKHRoaXMpfSxfY3JlYXRlRHJhZ2dhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudCxpPXQub3B0aW9ucztyZXR1cm4gbmV3IG8udWkuRHJhZ2dhYmxlKG4se2ZpbHRlcjppLmZpbHRlcixoaW50Om8uaXNGdW5jdGlvbihpLmhpbnQpP2kuaGludDplKGkuaGludCksaG9sZFRvRHJhZzppLmhvbGRUb0RyYWcsY29udGFpbmVyOmkuY29udGFpbmVyP2UoaS5jb250YWluZXIpOm51bGwsY3Vyc29yT2Zmc2V0OmkuY3Vyc29yT2Zmc2V0LGF4aXM6aS5heGlzLGlnbm9yZTppLmlnbm9yZSxkcmFnc3RhcnQ6ZS5wcm94eSh0Ll9kcmFnc3RhcnQsdCksZHJhZ2NhbmNlbDplLnByb3h5KHQuX2RyYWdjYW5jZWwsdCksZHJhZzplLnByb3h5KHQuX2RyYWcsdCksZHJhZ2VuZDplLnByb3h5KHQuX2RyYWdlbmQsdCl9KX0sX2RyYWdzdGFydDpmdW5jdGlvbih0KXt2YXIgbj10aGlzLmRyYWdnZWRFbGVtZW50PXQuY3VycmVudFRhcmdldCxpPXQudGFyZ2V0fHxvLmVsZW1lbnRVbmRlckN1cnNvcih0KSxyPXRoaXMub3B0aW9ucy5kaXNhYmxlZCxhPXRoaXMub3B0aW9ucy5oYW5kbGVyLGw9dGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyLGM9dGhpcy5wbGFjZWhvbGRlcj1lKG8uaXNGdW5jdGlvbihsKT9sLmNhbGwodGhpcyxuKTpsKTtyJiZuLmlzKHIpP3QucHJldmVudERlZmF1bHQoKTphJiYhZShpKS5pcyhhKT90LnByZXZlbnREZWZhdWx0KCk6dGhpcy50cmlnZ2VyKHMse2l0ZW06bixkcmFnZ2FibGVFdmVudDp0fSk/dC5wcmV2ZW50RGVmYXVsdCgpOihuLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIiksbi5iZWZvcmUoYyksdGhpcy5fc2V0Q3Vyc29yKCkpfSxfZHJhZ2NhbmNlbDpmdW5jdGlvbigpe3RoaXMuX2NhbmNlbCgpLHRoaXMudHJpZ2dlcihoLHtpdGVtOnRoaXMuZHJhZ2dlZEVsZW1lbnR9KSx0aGlzLl9yZXNldEN1cnNvcigpfSxfZHJhZzpmdW5jdGlvbihuKXt2YXIgaSxyLG8sYSxzLGw9dGhpcy5kcmFnZ2VkRWxlbWVudCxjPXRoaXMuX2ZpbmRUYXJnZXQobiksZD17bGVmdDpuLngubG9jYXRpb24sdG9wOm4ueS5sb2NhdGlvbn0sdT17eDpuLnguZGVsdGEseTpuLnkuZGVsdGF9LGg9dGhpcy5vcHRpb25zLmF4aXMscD17aXRlbTpsLGxpc3Q6dGhpcyxkcmFnZ2FibGVFdmVudDpufTtpZihcInhcIj09PWh8fFwieVwiPT09aClyZXR1cm4gdGhpcy5fbW92ZW1lbnRCeUF4aXMoaCxkLHVbaF0scCksdDtpZihjKXtpZihpPXRoaXMuX2dldEVsZW1lbnRDZW50ZXIoYy5lbGVtZW50KSxyPXtsZWZ0Ok1hdGgucm91bmQoZC5sZWZ0LWkubGVmdCksdG9wOk1hdGgucm91bmQoZC50b3AtaS50b3ApfSxlLmV4dGVuZChwLHt0YXJnZXQ6Yy5lbGVtZW50fSksYy5hcHBlbmRUb0JvdHRvbSlyZXR1cm4gdGhpcy5fbW92ZVBsYWNlaG9sZGVyKGMsbnVsbCxwKSx0O2lmKGMuYXBwZW5kQWZ0ZXJIaWRkZW4mJnRoaXMuX21vdmVQbGFjZWhvbGRlcihjLFwibmV4dFwiLHApLHRoaXMuX2lzRmxvYXRpbmcoYy5lbGVtZW50KT8wPnUueCYmMD5yLmxlZnQ/bz1cInByZXZcIjp1Lng+MCYmci5sZWZ0PjAmJihvPVwibmV4dFwiKTowPnUueSYmMD5yLnRvcD9vPVwicHJldlwiOnUueT4wJiZyLnRvcD4wJiYobz1cIm5leHRcIiksbyl7Zm9yKHM9XCJwcmV2XCI9PT1vP2pRdWVyeS5mbi5wcmV2OmpRdWVyeS5mbi5uZXh0LGE9cy5jYWxsKGMuZWxlbWVudCk7YS5sZW5ndGgmJiFhLmlzKFwiOnZpc2libGVcIik7KWE9cy5jYWxsKGEpO2FbMF0hPXRoaXMucGxhY2Vob2xkZXJbMF0mJnRoaXMuX21vdmVQbGFjZWhvbGRlcihjLG8scCl9fX0sX2RyYWdlbmQ6ZnVuY3Rpb24obil7dmFyIGkscixvLGEscz10aGlzLnBsYWNlaG9sZGVyLGw9dGhpcy5kcmFnZ2VkRWxlbWVudCxjPXRoaXMuaW5kZXhPZihsKSxoPXRoaXMuaW5kZXhPZihzKSxtPXRoaXMub3B0aW9ucy5jb25uZWN0V2l0aDtyZXR1cm4gdGhpcy5fcmVzZXRDdXJzb3IoKSxvPXthY3Rpb246cCxpdGVtOmwsb2xkSW5kZXg6YyxuZXdJbmRleDpoLGRyYWdnYWJsZUV2ZW50Om59LGg+PTA/cj10aGlzLnRyaWdnZXIoZCxvKTooaT1zLnBhcmVudHMobSkuZ2V0S2VuZG9Tb3J0YWJsZSgpLG8uYWN0aW9uPWYsYT1lLmV4dGVuZCh7fSxvLHthY3Rpb246ZyxvbGRJbmRleDp2LG5ld0luZGV4OmkuaW5kZXhPZihzKX0pLHI9ISghdGhpcy50cmlnZ2VyKGQsbykmJiFpLnRyaWdnZXIoZCxhKSkpLHJ8fGg9PT1jPyh0aGlzLl9jYW5jZWwoKSx0KToocy5yZXBsYWNlV2l0aChsKSxsLnNob3coKSx0aGlzLl9kcmFnZ2FibGUuZHJvcHBlZD0hMCxvPXthY3Rpb246dGhpcy5pbmRleE9mKGwpIT12P3A6ZixpdGVtOmwsb2xkSW5kZXg6YyxuZXdJbmRleDp0aGlzLmluZGV4T2YobCksZHJhZ2dhYmxlRXZlbnQ6bn0sdGhpcy50cmlnZ2VyKHUsbyksaSYmKGE9ZS5leHRlbmQoe30sbyx7YWN0aW9uOmcsb2xkSW5kZXg6dixuZXdJbmRleDppLmluZGV4T2YobCl9KSxpLnRyaWdnZXIodSxhKSksdCl9LF9maW5kVGFyZ2V0OmZ1bmN0aW9uKG4pe3ZhciBpLHIsbz10aGlzLl9maW5kRWxlbWVudFVuZGVyQ3Vyc29yKG4pLGE9dGhpcy5vcHRpb25zLmNvbm5lY3RXaXRoO3JldHVybiBlLmNvbnRhaW5zKHRoaXMuZWxlbWVudFswXSxvKT8oaT10aGlzLml0ZW1zKCkscj1pLmZpbHRlcihvKVswXXx8aS5oYXMobylbMF0scj97ZWxlbWVudDplKHIpLHNvcnRhYmxlOnRoaXN9Om51bGwpOnRoaXMuZWxlbWVudFswXT09byYmdGhpcy5faXNFbXB0eSgpP3tlbGVtZW50OnRoaXMuZWxlbWVudCxzb3J0YWJsZTp0aGlzLGFwcGVuZFRvQm90dG9tOiEwfTp0aGlzLmVsZW1lbnRbMF09PW8mJnRoaXMuX2lzTGFzdEhpZGRlbigpPyhyPXRoaXMuaXRlbXMoKS5lcSgwKSx7ZWxlbWVudDpyLHNvcnRhYmxlOnRoaXMsYXBwZW5kQWZ0ZXJIaWRkZW46ITB9KTphP3RoaXMuX3NlYXJjaENvbm5lY3RlZFRhcmdldHMobyxuKTp0fSxfZmluZEVsZW1lbnRVbmRlckN1cnNvcjpmdW5jdGlvbihlKXt7dmFyIHQ9by5lbGVtZW50VW5kZXJDdXJzb3IoZSksaT1lLnNlbmRlcjt0aGlzLml0ZW1zKCl9cmV0dXJuIG4oaS5oaW50WzBdLHQpJiYoaS5oaW50LmhpZGUoKSx0PW8uZWxlbWVudFVuZGVyQ3Vyc29yKGUpLHR8fCh0PW8uZWxlbWVudFVuZGVyQ3Vyc29yKGUpKSxpLmhpbnQuc2hvdygpKSx0fSxfc2VhcmNoQ29ubmVjdGVkVGFyZ2V0czpmdW5jdGlvbih0LG4pe3ZhciBpLHIsbyxhLHM9ZSh0aGlzLm9wdGlvbnMuY29ubmVjdFdpdGgpO2ZvcihhPTA7cy5sZW5ndGg+YTthKyspaWYoaT1zLmVxKGEpLmdldEtlbmRvU29ydGFibGUoKSxlLmNvbnRhaW5zKHNbYV0sdCkpe2lmKGkpcmV0dXJuIHI9aS5pdGVtcygpLG89ci5maWx0ZXIodClbMF18fHIuaGFzKHQpWzBdLG8/KGkucGxhY2Vob2xkZXI9dGhpcy5wbGFjZWhvbGRlcix7ZWxlbWVudDplKG8pLHNvcnRhYmxlOml9KTpudWxsfWVsc2UgaWYoc1thXT09dCl7aWYoaSYmaS5faXNFbXB0eSgpKXJldHVybntlbGVtZW50OnMuZXEoYSksc29ydGFibGU6aSxhcHBlbmRUb0JvdHRvbTohMH07aWYodGhpcy5faXNDdXJzb3JBZnRlckxhc3QoaSxuKSlyZXR1cm4gbz1pLml0ZW1zKCkubGFzdCgpLHtlbGVtZW50Om8sc29ydGFibGU6aX19fSxfaXNDdXJzb3JBZnRlckxhc3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9ZS5pdGVtcygpLmxhc3QoKSxhPXtsZWZ0OnQueC5sb2NhdGlvbix0b3A6dC55LmxvY2F0aW9ufTtyZXR1cm4gbj1vLmdldE9mZnNldChyKSxuLnRvcCs9ci5vdXRlckhlaWdodCgpLG4ubGVmdCs9ci5vdXRlcldpZHRoKCksaT10aGlzLl9pc0Zsb2F0aW5nKHIpP24ubGVmdC1hLmxlZnQ6bi50b3AtYS50b3AsMD5pPyEwOiExfSxfbW92ZW1lbnRCeUF4aXM6ZnVuY3Rpb24odCxuLGkscil7dmFyIG8sYT1cInhcIj09PXQ/bi5sZWZ0Om4udG9wLHM9MD5pP3RoaXMucGxhY2Vob2xkZXIucHJldigpOnRoaXMucGxhY2Vob2xkZXIubmV4dCgpO3MubGVuZ3RoJiYhcy5pcyhcIjp2aXNpYmxlXCIpJiYocz0wPmk/cy5wcmV2KCk6cy5uZXh0KCkpLGUuZXh0ZW5kKHIse3RhcmdldDpzfSksbz10aGlzLl9nZXRFbGVtZW50Q2VudGVyKHMpLG8mJihvPVwieFwiPT09dD9vLmxlZnQ6by50b3ApLHMubGVuZ3RoJiYwPmkmJjA+YS1vP3RoaXMuX21vdmVQbGFjZWhvbGRlcih7ZWxlbWVudDpzLHNvcnRhYmxlOnRoaXN9LFwicHJldlwiLHIpOnMubGVuZ3RoJiZpPjAmJmEtbz4wJiZ0aGlzLl9tb3ZlUGxhY2Vob2xkZXIoe2VsZW1lbnQ6cyxzb3J0YWJsZTp0aGlzfSxcIm5leHRcIixyKX0sX21vdmVQbGFjZWhvbGRlcjpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcy5wbGFjZWhvbGRlcjtlLnNvcnRhYmxlLnRyaWdnZXIobCxuKXx8KHQ/XCJwcmV2XCI9PT10P2UuZWxlbWVudC5iZWZvcmUoaSk6XCJuZXh0XCI9PT10JiZlLmVsZW1lbnQuYWZ0ZXIoaSk6ZS5lbGVtZW50LmFwcGVuZChpKSxlLnNvcnRhYmxlLnRyaWdnZXIoYyxuKSl9LF9zZXRDdXJzb3I6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMub3B0aW9ucy5jdXJzb3I7biYmXCJhdXRvXCIhPT1uJiYodD1lKGRvY3VtZW50LmJvZHkpLHRoaXMuX29yaWdpbmFsQ3Vyc29yVHlwZT10LmNzcyhcImN1cnNvclwiKSx0LmNzcyh7Y3Vyc29yOm59KSx0aGlzLl9jdXJzb3JTdHlsZXNoZWV0fHwodGhpcy5fY3Vyc29yU3R5bGVzaGVldD1lKFwiPHN0eWxlPiogeyBjdXJzb3I6IFwiK24rXCIgIWltcG9ydGFudDsgfTwvc3R5bGU+XCIpKSx0aGlzLl9jdXJzb3JTdHlsZXNoZWV0LmFwcGVuZFRvKHQpKX0sX3Jlc2V0Q3Vyc29yOmZ1bmN0aW9uKCl7dGhpcy5fb3JpZ2luYWxDdXJzb3JUeXBlJiYoZShkb2N1bWVudC5ib2R5KS5jc3MoXCJjdXJzb3JcIix0aGlzLl9vcmlnaW5hbEN1cnNvclR5cGUpLHRoaXMuX29yaWdpbmFsQ3Vyc29yVHlwZT1udWxsLHRoaXMuX2N1cnNvclN0eWxlc2hlZXQucmVtb3ZlKCkpfSxfZ2V0RWxlbWVudENlbnRlcjpmdW5jdGlvbihlKXt2YXIgdD1lLmxlbmd0aD9vLmdldE9mZnNldChlKTpudWxsO3JldHVybiB0JiYodC50b3ArPWUub3V0ZXJIZWlnaHQoKS8yLHQubGVmdCs9ZS5vdXRlcldpZHRoKCkvMiksdH0sX2lzRmxvYXRpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuL2xlZnR8cmlnaHQvLnRlc3QoZS5jc3MoXCJmbG9hdFwiKSl8fC9pbmxpbmV8dGFibGUtY2VsbC8udGVzdChlLmNzcyhcImRpc3BsYXlcIikpfSxfY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5kcmFnZ2VkRWxlbWVudC5zaG93KCksdGhpcy5wbGFjZWhvbGRlci5yZW1vdmUoKX0sX2l0ZW1zOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLm9wdGlvbnMuZmlsdGVyO3JldHVybiBlPXQ/dGhpcy5lbGVtZW50LmZpbmQodCk6dGhpcy5lbGVtZW50LmNoaWxkcmVuKCl9LGluZGV4T2Y6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5faXRlbXMoKSxuPXRoaXMucGxhY2Vob2xkZXIsaT10aGlzLmRyYWdnZWRFbGVtZW50O3JldHVybiBuJiZlWzBdPT1uWzBdP3Qubm90KGkpLmluZGV4KGUpOnQubm90KG4pLmluZGV4KGUpfSxpdGVtczpmdW5jdGlvbigpe3ZhciBlPXRoaXMucGxhY2Vob2xkZXIsdD10aGlzLl9pdGVtcygpO3JldHVybiBlJiYodD10Lm5vdChlKSksdH0sX2lzRW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pdGVtcygpLmxlbmd0aH0sX2lzTGFzdEhpZGRlbjpmdW5jdGlvbigpe3JldHVybiAxPT09dGhpcy5pdGVtcygpLmxlbmd0aCYmdGhpcy5pdGVtcygpLmlzKFwiOmhpZGRlblwiKX19KTtvLnVpLnBsdWdpbihfKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsdCl7dmFyIG49ci5nZXRPZmZzZXQoZSksaT10LmxlZnQrdC53aWR0aCxvPXQudG9wK3QuaGVpZ2h0O3JldHVybiBuLnJpZ2h0PW4ubGVmdCtlLm91dGVyV2lkdGgoKSxuLmJvdHRvbT1uLnRvcCtlLm91dGVySGVpZ2h0KCksIShuLmxlZnQ+aXx8dC5sZWZ0Pm4ucmlnaHR8fG4udG9wPm98fHQudG9wPm4uYm90dG9tKX12YXIgaSxyPXdpbmRvdy5rZW5kbyxvPXIudWkuV2lkZ2V0LGE9ZS5wcm94eSxzPU1hdGguYWJzLGw9XCJhcmlhLXNlbGVjdGVkXCIsYz1cImstc3RhdGUtc2VsZWN0ZWRcIixkPVwiay1zdGF0ZS1zZWxlY3RpbmdcIix1PVwiay1zZWxlY3RhYmxlXCIsaD1cImNoYW5nZVwiLHA9XCIua2VuZG9TZWxlY3RhYmxlXCIsZj1cImstc3RhdGUtdW5zZWxlY3RpbmdcIixnPVwiaW5wdXQsYSx0ZXh0YXJlYSwuay1tdWx0aXNlbGVjdC13cmFwLHNlbGVjdCxidXR0b25cIixtPXIuc3VwcG9ydC5icm93c2VyLm1zaWUsdj0hMTshZnVuY3Rpb24oZSl7IWZ1bmN0aW9uKCl7ZSgnPGRpdiBjbGFzcz1cInBhcmVudFwiPjxzcGFuIC8+PC9kaXY+Jykub24oXCJjbGlja1wiLFwiPipcIixmdW5jdGlvbigpe3Y9ITB9KS5maW5kKFwic3BhblwiKS5jbGljaygpLmVuZCgpLm9mZigpfSgpfShlKSxpPW8uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIGkscz10aGlzO28uZm4uaW5pdC5jYWxsKHMsdCxuKSxzLl9tYXJxdWVlPWUoXCI8ZGl2IGNsYXNzPSdrLW1hcnF1ZWUnPjxkaXYgY2xhc3M9J2stbWFycXVlZS1jb2xvcic+PC9kaXY+PC9kaXY+XCIpLHMuX2xhc3RBY3RpdmU9bnVsbCxzLmVsZW1lbnQuYWRkQ2xhc3ModSkscy5yZWxhdGVkVGFyZ2V0PXMub3B0aW9ucy5yZWxhdGVkVGFyZ2V0LGk9cy5vcHRpb25zLm11bHRpcGxlLHRoaXMub3B0aW9ucy5hcmlhJiZpJiZzLmVsZW1lbnQuYXR0cihcImFyaWEtbXVsdGlzZWxlY3RhYmxlXCIsITApLHMudXNlckV2ZW50cz1uZXcgci5Vc2VyRXZlbnRzKHMuZWxlbWVudCx7Z2xvYmFsOiEwLGFsbG93U2VsZWN0aW9uOiEwLGZpbHRlcjoodj9cIlwiOlwiLlwiK3UrXCIgXCIpK3Mub3B0aW9ucy5maWx0ZXIsdGFwOmEocy5fdGFwLHMpfSksaSYmcy51c2VyRXZlbnRzLmJpbmQoXCJzdGFydFwiLGEocy5fc3RhcnQscykpLmJpbmQoXCJtb3ZlXCIsYShzLl9tb3ZlLHMpKS5iaW5kKFwiZW5kXCIsYShzLl9lbmQscykpLmJpbmQoXCJzZWxlY3RcIixhKHMuX3NlbGVjdCxzKSl9LGV2ZW50czpbaF0sb3B0aW9uczp7bmFtZTpcIlNlbGVjdGFibGVcIixmaWx0ZXI6XCI+KlwiLG11bHRpcGxlOiExLHJlbGF0ZWRUYXJnZXQ6ZS5ub29wfSxfaXNFbGVtZW50OmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5lbGVtZW50LGk9bi5sZW5ndGgscj0hMTtmb3IoZT1lWzBdLHQ9MDtpPnQ7dCsrKWlmKG5bdF09PT1lKXtyPSEwO2JyZWFrfXJldHVybiByfSxfdGFwOmZ1bmN0aW9uKHQpe3ZhciBuLGk9ZSh0LnRhcmdldCkscj10aGlzLG89dC5ldmVudC5jdHJsS2V5fHx0LmV2ZW50Lm1ldGFLZXksYT1yLm9wdGlvbnMubXVsdGlwbGUscz1hJiZ0LmV2ZW50LnNoaWZ0S2V5LGw9dC5ldmVudC53aGljaCxkPXQuZXZlbnQuYnV0dG9uOyFyLl9pc0VsZW1lbnQoaS5jbG9zZXN0KFwiLlwiK3UpKXx8bCYmMz09bHx8ZCYmMj09ZHx8dGhpcy5fYWxsb3dTZWxlY3Rpb24odC5ldmVudC50YXJnZXQpJiYobj1pLmhhc0NsYXNzKGMpLGEmJm98fHIuY2xlYXIoKSxpPWkuYWRkKHIucmVsYXRlZFRhcmdldChpKSkscz9yLnNlbGVjdFJhbmdlKHIuX2ZpcnN0U2VsZWN0ZWUoKSxpKToobiYmbz8oci5fdW5zZWxlY3QoaSksci5fbm90aWZ5KGgpKTpyLnZhbHVlKGkpLHIuX2xhc3RBY3RpdmU9ci5fZG93blRhcmdldD1pKSl9LF9zdGFydDpmdW5jdGlvbihuKXt2YXIgaSxyPXRoaXMsbz1lKG4udGFyZ2V0KSxhPW8uaGFzQ2xhc3MoYykscz1uLmV2ZW50LmN0cmxLZXl8fG4uZXZlbnQubWV0YUtleTtpZih0aGlzLl9hbGxvd1NlbGVjdGlvbihuLmV2ZW50LnRhcmdldCkpe2lmKHIuX2Rvd25UYXJnZXQ9bywhci5faXNFbGVtZW50KG8uY2xvc2VzdChcIi5cIit1KSkpcmV0dXJuIHIudXNlckV2ZW50cy5jYW5jZWwoKSx0O3Iub3B0aW9ucy51c2VBbGxJdGVtcz9yLl9pdGVtcz1yLmVsZW1lbnQuZmluZChyLm9wdGlvbnMuZmlsdGVyKTooaT1vLmNsb3Nlc3Qoci5lbGVtZW50KSxyLl9pdGVtcz1pLmZpbmQoci5vcHRpb25zLmZpbHRlcikpLG4uc2VuZGVyLmNhcHR1cmUoKSxyLl9tYXJxdWVlLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpLmNzcyh7bGVmdDpuLnguY2xpZW50KzEsdG9wOm4ueS5jbGllbnQrMSx3aWR0aDowLGhlaWdodDowfSksc3x8ci5jbGVhcigpLG89by5hZGQoci5yZWxhdGVkVGFyZ2V0KG8pKSxhJiYoci5fc2VsZWN0RWxlbWVudChvLCEwKSxzJiZvLmFkZENsYXNzKGYpKX19LF9tb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj17bGVmdDplLnguc3RhcnRMb2NhdGlvbj5lLngubG9jYXRpb24/ZS54LmxvY2F0aW9uOmUueC5zdGFydExvY2F0aW9uLHRvcDplLnkuc3RhcnRMb2NhdGlvbj5lLnkubG9jYXRpb24/ZS55LmxvY2F0aW9uOmUueS5zdGFydExvY2F0aW9uLHdpZHRoOnMoZS54LmluaXRpYWxEZWx0YSksaGVpZ2h0OnMoZS55LmluaXRpYWxEZWx0YSl9O3QuX21hcnF1ZWUuY3NzKG4pLHQuX2ludmFsaWRhdGVTZWxlY3RhYmxlcyhuLGUuZXZlbnQuY3RybEtleXx8ZS5ldmVudC5tZXRhS2V5KSxlLnByZXZlbnREZWZhdWx0KCl9LF9lbmQ6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXM7dC5fbWFycXVlZS5yZW1vdmUoKSx0Ll91bnNlbGVjdCh0LmVsZW1lbnQuZmluZCh0Lm9wdGlvbnMuZmlsdGVyK1wiLlwiK2YpKS5yZW1vdmVDbGFzcyhmKSxlPXQuZWxlbWVudC5maW5kKHQub3B0aW9ucy5maWx0ZXIrXCIuXCIrZCksZT1lLmFkZCh0LnJlbGF0ZWRUYXJnZXQoZSkpLHQudmFsdWUoZSksdC5fbGFzdEFjdGl2ZT10Ll9kb3duVGFyZ2V0LHQuX2l0ZW1zPW51bGx9LF9pbnZhbGlkYXRlU2VsZWN0YWJsZXM6ZnVuY3Rpb24oZSx0KXt2YXIgaSxyLG8sYSxzPXRoaXMuX2Rvd25UYXJnZXRbMF0sbD10aGlzLl9pdGVtcztmb3IoaT0wLHI9bC5sZW5ndGg7cj5pO2krKylhPWwuZXEoaSksbz1hLmFkZCh0aGlzLnJlbGF0ZWRUYXJnZXQoYSkpLG4oYSxlKT9hLmhhc0NsYXNzKGMpP3QmJnMhPT1hWzBdJiZvLnJlbW92ZUNsYXNzKGMpLmFkZENsYXNzKGYpOmEuaGFzQ2xhc3MoZCl8fGEuaGFzQ2xhc3MoZil8fG8uYWRkQ2xhc3MoZCk6YS5oYXNDbGFzcyhkKT9vLnJlbW92ZUNsYXNzKGQpOnQmJmEuaGFzQ2xhc3MoZikmJm8ucmVtb3ZlQ2xhc3MoZikuYWRkQ2xhc3MoYyl9LHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1hKG4uX3NlbGVjdEVsZW1lbnQsbik7cmV0dXJuIGU/KGUuZWFjaChmdW5jdGlvbigpe2kodGhpcyl9KSxuLl9ub3RpZnkoaCksdCk6bi5lbGVtZW50LmZpbmQobi5vcHRpb25zLmZpbHRlcitcIi5cIitjKX0sX2ZpcnN0U2VsZWN0ZWU6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXM7cmV0dXJuIG51bGwhPT10Ll9sYXN0QWN0aXZlP3QuX2xhc3RBY3RpdmU6KGU9dC52YWx1ZSgpLGUubGVuZ3RoPjA/ZVswXTp0LmVsZW1lbnQuZmluZCh0Lm9wdGlvbnMuZmlsdGVyKVswXSl9LF9zZWxlY3RFbGVtZW50OmZ1bmN0aW9uKHQsbil7dmFyIGk9ZSh0KSxyPSFuJiZ0aGlzLl9ub3RpZnkoXCJzZWxlY3RcIix7ZWxlbWVudDp0fSk7aS5yZW1vdmVDbGFzcyhkKSxyfHwoaS5hZGRDbGFzcyhjKSx0aGlzLm9wdGlvbnMuYXJpYSYmaS5hdHRyKGwsITApKX0sX25vdGlmeTpmdW5jdGlvbihlLHQpe3JldHVybiB0PXR8fHt9LHRoaXMudHJpZ2dlcihlLHQpfSxfdW5zZWxlY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVtb3ZlQ2xhc3MoYyksdGhpcy5vcHRpb25zLmFyaWEmJmUuYXR0cihsLCExKSxlfSxfc2VsZWN0OmZ1bmN0aW9uKHQpe3RoaXMuX2FsbG93U2VsZWN0aW9uKHQuZXZlbnQudGFyZ2V0KSYmKCFtfHxtJiYhZShyLl9hY3RpdmVFbGVtZW50KCkpLmlzKGcpKSYmdC5wcmV2ZW50RGVmYXVsdCgpfSxfYWxsb3dTZWxlY3Rpb246ZnVuY3Rpb24odCl7cmV0dXJuIGUodCkuaXMoZyk/KHRoaXMudXNlckV2ZW50cy5jYW5jZWwoKSx0aGlzLl9kb3duVGFyZ2V0PW51bGwsITEpOiEwfSxyZXNldFRvdWNoRXZlbnRzOmZ1bmN0aW9uKCl7dGhpcy51c2VyRXZlbnRzLmNhbmNlbCgpfSxjbGVhcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudC5maW5kKHRoaXMub3B0aW9ucy5maWx0ZXIrXCIuXCIrYyk7dGhpcy5fdW5zZWxlY3QoZSl9LHNlbGVjdFJhbmdlOmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLGE9dGhpcztmb3IoYS5jbGVhcigpLGEuZWxlbWVudC5sZW5ndGg+MSYmKG89YS5vcHRpb25zLmNvbnRpbnVvdXNJdGVtcygpKSxvJiZvLmxlbmd0aHx8KG89YS5lbGVtZW50LmZpbmQoYS5vcHRpb25zLmZpbHRlcikpLHQ9ZS5pbkFycmF5KGUodClbMF0sbyksbj1lLmluQXJyYXkoZShuKVswXSxvKSx0Pm4mJihyPXQsdD1uLG49ciksYS5vcHRpb25zLnVzZUFsbEl0ZW1zfHwobis9YS5lbGVtZW50Lmxlbmd0aC0xKSxpPXQ7bj49aTtpKyspYS5fc2VsZWN0RWxlbWVudChvW2ldKTthLl9ub3RpZnkoaCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO28uZm4uZGVzdHJveS5jYWxsKGUpLGUuZWxlbWVudC5vZmYocCksZS51c2VyRXZlbnRzLmRlc3Ryb3koKSxlLl9tYXJxdWVlPWUuX2xhc3RBY3RpdmU9ZS5lbGVtZW50PWUudXNlckV2ZW50cz1udWxsfX0pLGkucGFyc2VPcHRpb25zPWZ1bmN0aW9uKGUpe3ZhciB0PVwic3RyaW5nXCI9PXR5cGVvZiBlJiZlLnRvTG93ZXJDYXNlKCk7cmV0dXJue211bHRpcGxlOnQmJnQuaW5kZXhPZihcIm11bHRpcGxlXCIpPi0xLGNlbGw6dCYmdC5pbmRleE9mKFwiY2VsbFwiKT4tMX19LHIudWkucGx1Z2luKGkpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe3ZhciBuPXdpbmRvdy5rZW5kbyxpPW4udWkuV2lkZ2V0LHI9ZS5wcm94eSxvPW4ua2V5cyxhPVwiY2xpY2tcIixzPVwiay1idXR0b25cIixsPVwiay1idXR0b24taWNvblwiLGM9XCJrLWJ1dHRvbi1pY29udGV4dFwiLGQ9XCIua2VuZG9CdXR0b25cIix1PVwiZGlzYWJsZWRcIixoPVwiay1zdGF0ZS1kaXNhYmxlZFwiLHA9XCJrLXN0YXRlLWZvY3VzZWRcIixmPVwiay1zdGF0ZS1zZWxlY3RlZFwiLGc9aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbz10aGlzO2kuZm4uaW5pdC5jYWxsKG8sZSx0KSxlPW8ud3JhcHBlcj1vLmVsZW1lbnQsdD1vLm9wdGlvbnMsZS5hZGRDbGFzcyhzKS5hdHRyKFwicm9sZVwiLFwiYnV0dG9uXCIpLHQuZW5hYmxlPXQuZW5hYmxlJiYhZS5hdHRyKHUpLG8uZW5hYmxlKHQuZW5hYmxlKSxvLl90YWJpbmRleCgpLG8uX2dyYXBoaWNzKCksZS5vbihhK2QscihvLl9jbGljayxvKSkub24oXCJmb2N1c1wiK2QscihvLl9mb2N1cyxvKSkub24oXCJibHVyXCIrZCxyKG8uX2JsdXIsbykpLm9uKFwia2V5ZG93blwiK2QscihvLl9rZXlkb3duLG8pKS5vbihcImtleXVwXCIrZCxyKG8uX2tleXVwLG8pKSxuLm5vdGlmeShvKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS53cmFwcGVyLm9mZihkKSxpLmZuLmRlc3Ryb3kuY2FsbChlKX0sZXZlbnRzOlthXSxvcHRpb25zOntuYW1lOlwiQnV0dG9uXCIsaWNvbjpcIlwiLHNwcml0ZUNzc0NsYXNzOlwiXCIsaW1hZ2VVcmw6XCJcIixlbmFibGU6ITB9LF9pc05hdGl2ZUJ1dHRvbjpmdW5jdGlvbigpe3JldHVyblwiYnV0dG9uXCI9PXRoaXMuZWxlbWVudC5wcm9wKFwidGFnTmFtZVwiKS50b0xvd2VyQ2FzZSgpfSxfY2xpY2s6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zLmVuYWJsZSYmdGhpcy50cmlnZ2VyKGEse2V2ZW50OmV9KX0sX2ZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmVuYWJsZSYmdGhpcy5lbGVtZW50LmFkZENsYXNzKHApfSxfYmx1cjpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhwKX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9pc05hdGl2ZUJ1dHRvbigpfHwoZS5rZXlDb2RlPT1vLkVOVEVSfHxlLmtleUNvZGU9PW8uU1BBQ0VCQVIpJiYoZS5rZXlDb2RlPT1vLlNQQUNFQkFSJiYoZS5wcmV2ZW50RGVmYXVsdCgpLHQub3B0aW9ucy5lbmFibGUmJnQuZWxlbWVudC5hZGRDbGFzcyhmKSksdC5fY2xpY2soZSkpfSxfa2V5dXA6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoZil9LF9ncmFwaGljczpmdW5jdGlvbigpe3ZhciB0LG4saSxyPXRoaXMsbz1yLmVsZW1lbnQsYT1yLm9wdGlvbnMscz1hLmljb24sZD1hLnNwcml0ZUNzc0NsYXNzLHU9YS5pbWFnZVVybDsoZHx8dXx8cykmJihpPSEwLG8uY29udGVudHMoKS5ub3QoXCJzcGFuLmstc3ByaXRlXCIpLm5vdChcInNwYW4uay1pY29uXCIpLm5vdChcImltZy5rLWltYWdlXCIpLmVhY2goZnVuY3Rpb24odCxuKXsoMT09bi5ub2RlVHlwZXx8Mz09bi5ub2RlVHlwZSYmZS50cmltKG4ubm9kZVZhbHVlKS5sZW5ndGg+MCkmJihpPSExKX0pLG8uYWRkQ2xhc3MoaT9sOmMpKSxzPyh0PW8uY2hpbGRyZW4oXCJzcGFuLmstaWNvblwiKS5maXJzdCgpLHRbMF18fCh0PWUoJzxzcGFuIGNsYXNzPVwiay1pY29uXCI+PC9zcGFuPicpLnByZXBlbmRUbyhvKSksdC5hZGRDbGFzcyhcImstaS1cIitzKSk6ZD8odD1vLmNoaWxkcmVuKFwic3Bhbi5rLXNwcml0ZVwiKS5maXJzdCgpLHRbMF18fCh0PWUoJzxzcGFuIGNsYXNzPVwiay1zcHJpdGVcIj48L3NwYW4+JykucHJlcGVuZFRvKG8pKSx0LmFkZENsYXNzKGQpKTp1JiYobj1vLmNoaWxkcmVuKFwiaW1nLmstaW1hZ2VcIikuZmlyc3QoKSxuWzBdfHwobj1lKCc8aW1nIGFsdD1cImljb25cIiBjbGFzcz1cImstaW1hZ2VcIiAvPicpLnByZXBlbmRUbyhvKSksbi5hdHRyKFwic3JjXCIsdSkpfSxlbmFibGU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4uZWxlbWVudDtlPT09dCYmKGU9ITApLGU9ISFlLG4ub3B0aW9ucy5lbmFibGU9ZSxpLnRvZ2dsZUNsYXNzKGgsIWUpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsIWUpLmF0dHIodSwhZSk7dHJ5e2kuYmx1cigpfWNhdGNoKHIpe319fSk7bi51aS5wbHVnaW4oZyl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQsbixpLHIpe3JldHVybiBlKHtpZHg6dCx0ZXh0Om4sbnM6Yy5ucyxudW1lcmljOmksdGl0bGU6cnx8XCJcIn0pfWZ1bmN0aW9uIGkoZSx0LG4pe3JldHVybiBrKHtjbGFzc05hbWU6ZS5zdWJzdHJpbmcoMSksdGV4dDp0LHdyYXBDbGFzc05hbWU6bnx8XCJcIn0pfWZ1bmN0aW9uIHIoZSx0LG4saSl7ZS5maW5kKHQpLnBhcmVudCgpLmF0dHIoYy5hdHRyKFwicGFnZVwiKSxuKS5hdHRyKFwidGFiaW5kZXhcIiwtMSkudG9nZ2xlQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIsaSl9ZnVuY3Rpb24gbyhlLHQpe3IoZSxwLDEsMT49dCl9ZnVuY3Rpb24gYShlLHQpe3IoZSxnLE1hdGgubWF4KDEsdC0xKSwxPj10KX1mdW5jdGlvbiBzKGUsdCxuKXtyKGUsbSxNYXRoLm1pbihuLHQrMSksdD49bil9ZnVuY3Rpb24gbChlLHQsbil7cihlLGYsbix0Pj1uKX12YXIgYz13aW5kb3cua2VuZG8sZD1jLnVpLHU9ZC5XaWRnZXQsaD1lLnByb3h5LHA9XCIuay1pLXNlZWstd1wiLGY9XCIuay1pLXNlZWstZVwiLGc9XCIuay1pLWFycm93LXdcIixtPVwiLmstaS1hcnJvdy1lXCIsdj1cImNoYW5nZVwiLF89XCIua2VuZG9QYWdlclwiLHk9XCJjbGlja1wiLHc9XCJrZXlkb3duXCIsYj1cImRpc2FibGVkXCIsaz1jLnRlbXBsYXRlKCc8YSBocmVmPVwiXFxcXCNcIiB0aXRsZT1cIiM9dGV4dCNcIiBjbGFzcz1cImstbGluayBrLXBhZ2VyLW5hdiAjPSB3cmFwQ2xhc3NOYW1lICNcIj48c3BhbiBjbGFzcz1cImstaWNvbiAjPSBjbGFzc05hbWUgI1wiPiM9dGV4dCM8L3NwYW4+PC9hPicpLHg9dS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgcixkLGI9dGhpczt1LmZuLmluaXQuY2FsbChiLHQsbiksbj1iLm9wdGlvbnMsYi5kYXRhU291cmNlPWMuZGF0YS5EYXRhU291cmNlLmNyZWF0ZShuLmRhdGFTb3VyY2UpLGIubGlua1RlbXBsYXRlPWMudGVtcGxhdGUoYi5vcHRpb25zLmxpbmtUZW1wbGF0ZSksYi5zZWxlY3RUZW1wbGF0ZT1jLnRlbXBsYXRlKGIub3B0aW9ucy5zZWxlY3RUZW1wbGF0ZSkscj1iLnBhZ2UoKSxkPWIudG90YWxQYWdlcygpLGIuX3JlZnJlc2hIYW5kbGVyPWgoYi5yZWZyZXNoLGIpLGIuZGF0YVNvdXJjZS5iaW5kKHYsYi5fcmVmcmVzaEhhbmRsZXIpLG4ucHJldmlvdXNOZXh0JiYoYi5lbGVtZW50LmZpbmQocCkubGVuZ3RofHwoYi5lbGVtZW50LmFwcGVuZChpKHAsbi5tZXNzYWdlcy5maXJzdCxcImstcGFnZXItZmlyc3RcIikpLG8oYi5lbGVtZW50LHIsZCkpLGIuZWxlbWVudC5maW5kKGcpLmxlbmd0aHx8KGIuZWxlbWVudC5hcHBlbmQoaShnLG4ubWVzc2FnZXMucHJldmlvdXMpKSxhKGIuZWxlbWVudCxyLGQpKSksbi5udW1lcmljJiYoYi5saXN0PWIuZWxlbWVudC5maW5kKFwiLmstcGFnZXItbnVtYmVyc1wiKSxiLmxpc3QubGVuZ3RofHwoYi5saXN0PWUoJzx1bCBjbGFzcz1cImstcGFnZXItbnVtYmVycyBrLXJlc2V0XCIgLz4nKS5hcHBlbmRUbyhiLmVsZW1lbnQpKSksbi5pbnB1dCYmKGIuZWxlbWVudC5maW5kKFwiLmstcGFnZXItaW5wdXRcIikubGVuZ3RofHxiLmVsZW1lbnQuYXBwZW5kKCc8c3BhbiBjbGFzcz1cImstcGFnZXItaW5wdXQgay1sYWJlbFwiPicrbi5tZXNzYWdlcy5wYWdlKyc8aW5wdXQgY2xhc3M9XCJrLXRleHRib3hcIj4nK2MuZm9ybWF0KG4ubWVzc2FnZXMub2YsZCkrXCI8L3NwYW4+XCIpLGIuZWxlbWVudC5vbih3K18sXCIuay1wYWdlci1pbnB1dCBpbnB1dFwiLGgoYi5fa2V5ZG93bixiKSkpLG4ucHJldmlvdXNOZXh0JiYoYi5lbGVtZW50LmZpbmQobSkubGVuZ3RofHwoYi5lbGVtZW50LmFwcGVuZChpKG0sbi5tZXNzYWdlcy5uZXh0KSkscyhiLmVsZW1lbnQscixkKSksYi5lbGVtZW50LmZpbmQoZikubGVuZ3RofHwoYi5lbGVtZW50LmFwcGVuZChpKGYsbi5tZXNzYWdlcy5sYXN0LFwiay1wYWdlci1sYXN0XCIpKSxsKGIuZWxlbWVudCxyLGQpKSksbi5wYWdlU2l6ZXMmJihiLmVsZW1lbnQuZmluZChcIi5rLXBhZ2VyLXNpemVzXCIpLmxlbmd0aHx8ZSgnPHNwYW4gY2xhc3M9XCJrLXBhZ2VyLXNpemVzIGstbGFiZWxcIj48c2VsZWN0Lz4nK24ubWVzc2FnZXMuaXRlbXNQZXJQYWdlK1wiPC9zcGFuPlwiKS5hcHBlbmRUbyhiLmVsZW1lbnQpLmZpbmQoXCJzZWxlY3RcIikuaHRtbChlLm1hcChlLmlzQXJyYXkobi5wYWdlU2l6ZXMpP24ucGFnZVNpemVzOls1LDEwLDIwXSxmdW5jdGlvbihlKXtyZXR1cm5cIjxvcHRpb24+XCIrZStcIjwvb3B0aW9uPlwifSkuam9pbihcIlwiKSkuZW5kKCkuYXBwZW5kVG8oYi5lbGVtZW50KSxiLmVsZW1lbnQuZmluZChcIi5rLXBhZ2VyLXNpemVzIHNlbGVjdFwiKS52YWwoYi5wYWdlU2l6ZSgpKSxjLnVpLkRyb3BEb3duTGlzdCYmYi5lbGVtZW50LmZpbmQoXCIuay1wYWdlci1zaXplcyBzZWxlY3RcIikuc2hvdygpLmtlbmRvRHJvcERvd25MaXN0KCksYi5lbGVtZW50Lm9uKHYrXyxcIi5rLXBhZ2VyLXNpemVzIHNlbGVjdFwiLGgoYi5fY2hhbmdlLGIpKSksbi5yZWZyZXNoJiYoYi5lbGVtZW50LmZpbmQoXCIuay1wYWdlci1yZWZyZXNoXCIpLmxlbmd0aHx8Yi5lbGVtZW50LmFwcGVuZCgnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImstcGFnZXItcmVmcmVzaCBrLWxpbmtcIiB0aXRsZT1cIicrbi5tZXNzYWdlcy5yZWZyZXNoKydcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWktcmVmcmVzaFwiPicrbi5tZXNzYWdlcy5yZWZyZXNoK1wiPC9zcGFuPjwvYT5cIiksYi5lbGVtZW50Lm9uKHkrXyxcIi5rLXBhZ2VyLXJlZnJlc2hcIixoKGIuX3JlZnJlc2hDbGljayxiKSkpLG4uaW5mbyYmKGIuZWxlbWVudC5maW5kKFwiLmstcGFnZXItaW5mb1wiKS5sZW5ndGh8fGIuZWxlbWVudC5hcHBlbmQoJzxzcGFuIGNsYXNzPVwiay1wYWdlci1pbmZvIGstbGFiZWxcIiAvPicpKSxiLmVsZW1lbnQub24oeStfLFwiYVwiLGgoYi5fY2xpY2ssYikpLmFkZENsYXNzKFwiay1wYWdlci13cmFwIGstd2lkZ2V0XCIpLG4uYXV0b0JpbmQmJmIucmVmcmVzaCgpLGMubm90aWZ5KGIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt1LmZuLmRlc3Ryb3kuY2FsbChlKSxlLmVsZW1lbnQub2ZmKF8pLGUuZGF0YVNvdXJjZS51bmJpbmQodixlLl9yZWZyZXNoSGFuZGxlciksZS5fcmVmcmVzaEhhbmRsZXI9bnVsbCxjLmRlc3Ryb3koZS5lbGVtZW50KSxlLmVsZW1lbnQ9ZS5saXN0PW51bGx9LGV2ZW50czpbdl0sb3B0aW9uczp7bmFtZTpcIlBhZ2VyXCIsc2VsZWN0VGVtcGxhdGU6JzxsaT48c3BhbiBjbGFzcz1cImstc3RhdGUtc2VsZWN0ZWRcIj4jPXRleHQjPC9zcGFuPjwvbGk+JyxsaW5rVGVtcGxhdGU6JzxsaT48YSB0YWJpbmRleD1cIi0xXCIgaHJlZj1cIlxcXFwjXCIgY2xhc3M9XCJrLWxpbmtcIiBkYXRhLSM9bnMjcGFnZT1cIiM9aWR4I1wiICNpZiAodGl0bGUgIT09IFwiXCIpIHsjIHRpdGxlPVwiIz10aXRsZSNcIiAjfSM+Iz10ZXh0IzwvYT48L2xpPicsYnV0dG9uQ291bnQ6MTAsYXV0b0JpbmQ6ITAsbnVtZXJpYzohMCxpbmZvOiEwLGlucHV0OiExLHByZXZpb3VzTmV4dDohMCxwYWdlU2l6ZXM6ITEscmVmcmVzaDohMSxtZXNzYWdlczp7ZGlzcGxheTpcInswfSAtIHsxfSBvZiB7Mn0gaXRlbXNcIixlbXB0eTpcIk5vIGl0ZW1zIHRvIGRpc3BsYXlcIixwYWdlOlwiUGFnZVwiLG9mOlwib2YgezB9XCIsaXRlbXNQZXJQYWdlOlwiaXRlbXMgcGVyIHBhZ2VcIixmaXJzdDpcIkdvIHRvIHRoZSBmaXJzdCBwYWdlXCIscHJldmlvdXM6XCJHbyB0byB0aGUgcHJldmlvdXMgcGFnZVwiLG5leHQ6XCJHbyB0byB0aGUgbmV4dCBwYWdlXCIsbGFzdDpcIkdvIHRvIHRoZSBsYXN0IHBhZ2VcIixyZWZyZXNoOlwiUmVmcmVzaFwiLG1vcmVQYWdlczpcIk1vcmUgcGFnZXNcIn19LHNldERhdGFTb3VyY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmRhdGFTb3VyY2UudW5iaW5kKHYsdC5fcmVmcmVzaEhhbmRsZXIpLHQuZGF0YVNvdXJjZT10Lm9wdGlvbnMuZGF0YVNvdXJjZT1lLGUuYmluZCh2LHQuX3JlZnJlc2hIYW5kbGVyKSx0Lm9wdGlvbnMuYXV0b0JpbmQmJmUuZmV0Y2goKX0scmVmcmVzaDpmdW5jdGlvbihlKXt2YXIgdCxpLHIsZD10aGlzLHU9MSxoPVwiXCIscD1kLnBhZ2UoKSxmPWQub3B0aW9ucyxnPWQucGFnZVNpemUoKSxtPWQuZGF0YVNvdXJjZS50b3RhbCgpLHY9ZC50b3RhbFBhZ2VzKCksXz1kLmxpbmtUZW1wbGF0ZSx5PWYuYnV0dG9uQ291bnQ7aWYoIWV8fFwiaXRlbWNoYW5nZVwiIT1lLmFjdGlvbil7aWYoZi5udW1lcmljKXtmb3IocD55JiYocj1wJXksdT0wPT09cj9wLXkrMTpwLXIrMSksaT1NYXRoLm1pbih1K3ktMSx2KSx1PjEmJihoKz1uKF8sdS0xLFwiLi4uXCIsITEsZi5tZXNzYWdlcy5tb3JlUGFnZXMpKSx0PXU7aT49dDt0KyspaCs9bih0PT1wP2Quc2VsZWN0VGVtcGxhdGU6Xyx0LHQsITApO3Y+aSYmKGgrPW4oXyx0LFwiLi4uXCIsITEsZi5tZXNzYWdlcy5tb3JlUGFnZXMpKSxcIlwiPT09aCYmKGg9ZC5zZWxlY3RUZW1wbGF0ZSh7dGV4dDowfSkpLGQubGlzdC5odG1sKGgpfWYuaW5mbyYmKGg9bT4wP2MuZm9ybWF0KGYubWVzc2FnZXMuZGlzcGxheSwocC0xKSpnKzEsTWF0aC5taW4ocCpnLG0pLG0pOmYubWVzc2FnZXMuZW1wdHksZC5lbGVtZW50LmZpbmQoXCIuay1wYWdlci1pbmZvXCIpLmh0bWwoaCkpLGYuaW5wdXQmJmQuZWxlbWVudC5maW5kKFwiLmstcGFnZXItaW5wdXRcIikuaHRtbChkLm9wdGlvbnMubWVzc2FnZXMucGFnZSsnPGlucHV0IGNsYXNzPVwiay10ZXh0Ym94XCI+JytjLmZvcm1hdChmLm1lc3NhZ2VzLm9mLHYpKS5maW5kKFwiaW5wdXRcIikudmFsKHApLmF0dHIoYiwxPm0pLnRvZ2dsZUNsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiLDE+bSksZi5wcmV2aW91c05leHQmJihvKGQuZWxlbWVudCxwLHYpLGEoZC5lbGVtZW50LHAsdikscyhkLmVsZW1lbnQscCx2KSxsKGQuZWxlbWVudCxwLHYpKSxmLnBhZ2VTaXplcyYmZC5lbGVtZW50LmZpbmQoXCIuay1wYWdlci1zaXplcyBzZWxlY3RcIikudmFsKGcpLmZpbHRlcihcIltcIitjLmF0dHIoXCJyb2xlXCIpK1wiPWRyb3Bkb3dubGlzdF1cIikua2VuZG9Ecm9wRG93bkxpc3QoXCJ2YWx1ZVwiLGcpLmtlbmRvRHJvcERvd25MaXN0KFwidGV4dFwiLGcpfX0sX2tleWRvd246ZnVuY3Rpb24oZSl7aWYoZS5rZXlDb2RlPT09Yy5rZXlzLkVOVEVSKXt2YXIgdD10aGlzLmVsZW1lbnQuZmluZChcIi5rLXBhZ2VyLWlucHV0XCIpLmZpbmQoXCJpbnB1dFwiKSxuPXBhcnNlSW50KHQudmFsKCksMTApOyhpc05hTihuKXx8MT5ufHxuPnRoaXMudG90YWxQYWdlcygpKSYmKG49dGhpcy5wYWdlKCkpLHQudmFsKG4pLHRoaXMucGFnZShuKX19LF9yZWZyZXNoQ2xpY2s6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuZGF0YVNvdXJjZS5yZWFkKCl9LF9jaGFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9cGFyc2VJbnQoZS5jdXJyZW50VGFyZ2V0LnZhbHVlLDEwKTtpc05hTih0KXx8dGhpcy5kYXRhU291cmNlLnBhZ2VTaXplKHQpfSxfY2xpY2s6ZnVuY3Rpb24odCl7dmFyIG49ZSh0LmN1cnJlbnRUYXJnZXQpO3QucHJldmVudERlZmF1bHQoKSxuLmlzKFwiLmstc3RhdGUtZGlzYWJsZWRcIil8fHRoaXMucGFnZShuLmF0dHIoYy5hdHRyKFwicGFnZVwiKSkpfSx0b3RhbFBhZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguY2VpbCgodGhpcy5kYXRhU291cmNlLnRvdGFsKCl8fDApL3RoaXMucGFnZVNpemUoKSl9LHBhZ2VTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YVNvdXJjZS5wYWdlU2l6ZSgpfHx0aGlzLmRhdGFTb3VyY2UudG90YWwoKX0scGFnZTpmdW5jdGlvbihlKXtyZXR1cm4gZT09PXQ/dGhpcy5kYXRhU291cmNlLnRvdGFsKCk+MD90aGlzLmRhdGFTb3VyY2UucGFnZSgpOjA6KHRoaXMuZGF0YVNvdXJjZS5wYWdlKGUpLHRoaXMudHJpZ2dlcih2LHtpbmRleDplfSksdCl9fSk7ZC5wbHVnaW4oeCl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxuKXtyZXR1cm4gdD09PW58fGUuY29udGFpbnModCxuKX12YXIgbj13aW5kb3cua2VuZG8saT1uLnVpLHI9aS5XaWRnZXQsbz1uLnN1cHBvcnQsYT1uLmdldE9mZnNldCxzPW4uX2FjdGl2ZUVsZW1lbnQsbD1cIm9wZW5cIixjPVwiY2xvc2VcIixkPVwiZGVhY3RpdmF0ZVwiLHU9XCJhY3RpdmF0ZVwiLGg9XCJjZW50ZXJcIixwPVwibGVmdFwiLGY9XCJyaWdodFwiLGc9XCJ0b3BcIixtPVwiYm90dG9tXCIsdj1cImFic29sdXRlXCIsXz1cImhpZGRlblwiLHk9XCJib2R5XCIsdz1cImxvY2F0aW9uXCIsYj1cInBvc2l0aW9uXCIsaz1cInZpc2libGVcIix4PVwiZWZmZWN0c1wiLEM9XCJrLXN0YXRlLWFjdGl2ZVwiLFM9XCJrLXN0YXRlLWJvcmRlclwiLFQ9L2stc3RhdGUtYm9yZGVyLShcXHcrKS8sRD1cIi5rLXBpY2tlci13cmFwLCAuay1kcm9wZG93bi13cmFwLCAuay1saW5rXCIsQT1cImRvd25cIixFPWUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSxNPWUod2luZG93KSxQPVwic2Nyb2xsXCIsST1cInJlc2l6ZSBzY3JvbGxcIix6PW8udHJhbnNpdGlvbnMuY3NzLEY9eitcInRyYW5zZm9ybVwiLFI9ZS5leHRlbmQsQj1cIi5rZW5kb1BvcHVwXCIsTD1bXCJmb250LXNpemVcIixcImZvbnQtZmFtaWx5XCIsXCJmb250LXN0cmV0Y2hcIixcImZvbnQtc3R5bGVcIixcImZvbnQtd2VpZ2h0XCIsXCJsaW5lLWhlaWdodFwiXSxPPXIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsaSl7dmFyIG8sYT10aGlzO2k9aXx8e30saS5pc1J0bCYmKGkub3JpZ2luPWkub3JpZ2lufHxtK1wiIFwiK2YsaS5wb3NpdGlvbj1pLnBvc2l0aW9ufHxnK1wiIFwiK2YpLHIuZm4uaW5pdC5jYWxsKGEsdCxpKSx0PWEuZWxlbWVudCxpPWEub3B0aW9ucyxhLmNvbGxpc2lvbnM9aS5jb2xsaXNpb24/aS5jb2xsaXNpb24uc3BsaXQoXCIgXCIpOltdLGEuZG93bkV2ZW50PW4uYXBwbHlFdmVudE1hcChBLG4uZ3VpZCgpKSwxPT09YS5jb2xsaXNpb25zLmxlbmd0aCYmYS5jb2xsaXNpb25zLnB1c2goYS5jb2xsaXNpb25zWzBdKSxvPWUoYS5vcHRpb25zLmFuY2hvcikuY2xvc2VzdChcIi5rLXBvcHVwLC5rLWdyb3VwXCIpLmZpbHRlcihcIjpub3QoW2NsYXNzXj1rbS1dKVwiKSxpLmFwcGVuZFRvPWUoZShpLmFwcGVuZFRvKVswXXx8b1swXXx8eSksYS5lbGVtZW50LmhpZGUoKS5hZGRDbGFzcyhcImstcG9wdXAgay1ncm91cCBrLXJlc2V0XCIpLnRvZ2dsZUNsYXNzKFwiay1ydGxcIiwhIWkuaXNSdGwpLmNzcyh7cG9zaXRpb246dn0pLmFwcGVuZFRvKGkuYXBwZW5kVG8pLm9uKFwibW91c2VlbnRlclwiK0IsZnVuY3Rpb24oKXthLl9ob3ZlcmVkPSEwfSkub24oXCJtb3VzZWxlYXZlXCIrQixmdW5jdGlvbigpe2EuX2hvdmVyZWQ9ITF9KSxhLndyYXBwZXI9ZSgpLGkuYW5pbWF0aW9uPT09ITEmJihpLmFuaW1hdGlvbj17b3Blbjp7ZWZmZWN0czp7fX0sY2xvc2U6e2hpZGU6ITAsZWZmZWN0czp7fX19KSxSKGkuYW5pbWF0aW9uLm9wZW4se2NvbXBsZXRlOmZ1bmN0aW9uKCl7YS53cmFwcGVyLmNzcyh7b3ZlcmZsb3c6a30pLGEuX3RyaWdnZXIodSl9fSksUihpLmFuaW1hdGlvbi5jbG9zZSx7Y29tcGxldGU6ZnVuY3Rpb24oKXthLl9hbmltYXRpb25DbG9zZSgpfX0pLGEuX21vdXNlZG93blByb3h5PWZ1bmN0aW9uKGUpe2EuX21vdXNlZG93bihlKX0sYS5fcmVzaXplUHJveHk9ZnVuY3Rpb24oZSl7YS5fcmVzaXplKGUpfSxpLnRvZ2dsZVRhcmdldCYmZShpLnRvZ2dsZVRhcmdldCkub24oaS50b2dnbGVFdmVudCtCLGUucHJveHkoYS50b2dnbGUsYSkpfSxldmVudHM6W2wsdSxjLGRdLG9wdGlvbnM6e25hbWU6XCJQb3B1cFwiLHRvZ2dsZUV2ZW50OlwiY2xpY2tcIixvcmlnaW46bStcIiBcIitwLHBvc2l0aW9uOmcrXCIgXCIrcCxhbmNob3I6eSxhcHBlbmRUbzpudWxsLGNvbGxpc2lvbjpcImZsaXAgZml0XCIsdmlld3BvcnQ6d2luZG93LGNvcHlBbmNob3JTdHlsZXM6ITAsYXV0b3NpemU6ITEsbW9kYWw6ITEsYW5pbWF0aW9uOntvcGVuOntlZmZlY3RzOlwic2xpZGVJbjpkb3duXCIsdHJhbnNpdGlvbjohMCxkdXJhdGlvbjoyMDB9LGNsb3NlOntkdXJhdGlvbjoxMDAsaGlkZTohMH19fSxfYW5pbWF0aW9uQ2xvc2U6ZnVuY3Rpb24oKXt2YXIgdCxpLHIsbyxhPXRoaXMscz1hLm9wdGlvbnM7YS53cmFwcGVyLmhpZGUoKSx0PWEud3JhcHBlci5kYXRhKHcpLGk9ZShzLmFuY2hvciksdCYmYS53cmFwcGVyLmNzcyh0KSxzLmFuY2hvciE9eSYmKHI9KChpLmF0dHIoXCJjbGFzc1wiKXx8XCJcIikubWF0Y2goVCl8fFtcIlwiLFwiZG93blwiXSlbMV0sbz1TK1wiLVwiK3IsaS5yZW1vdmVDbGFzcyhvKS5jaGlsZHJlbihEKS5yZW1vdmVDbGFzcyhDKS5yZW1vdmVDbGFzcyhvKSxhLmVsZW1lbnQucmVtb3ZlQ2xhc3MoUytcIi1cIituLmRpcmVjdGlvbnNbcl0ucmV2ZXJzZSkpLGEuX2Nsb3Npbmc9ITEsYS5fdHJpZ2dlcihkKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciB0LGk9dGhpcyxvPWkub3B0aW9ucyxhPWkuZWxlbWVudC5vZmYoQik7ci5mbi5kZXN0cm95LmNhbGwoaSksby50b2dnbGVUYXJnZXQmJmUoby50b2dnbGVUYXJnZXQpLm9mZihCKSxvLm1vZGFsfHwoRS51bmJpbmQoaS5kb3duRXZlbnQsaS5fbW91c2Vkb3duUHJveHkpLGkuX3Njcm9sbGFibGVQYXJlbnRzKCkudW5iaW5kKFAsaS5fcmVzaXplUHJveHkpLE0udW5iaW5kKEksaS5fcmVzaXplUHJveHkpKSxuLmRlc3Ryb3koaS5lbGVtZW50LmNoaWxkcmVuKCkpLGEucmVtb3ZlRGF0YSgpLG8uYXBwZW5kVG9bMF09PT1kb2N1bWVudC5ib2R5JiYodD1hLnBhcmVudChcIi5rLWFuaW1hdGlvbi1jb250YWluZXJcIiksdFswXT90LnJlbW92ZSgpOmEucmVtb3ZlKCkpfSxvcGVuOmZ1bmN0aW9uKHQsaSl7dmFyIHIsYSxzLGM9dGhpcyxkPXtpc0ZpeGVkOiFpc05hTihwYXJzZUludChpLDEwKSkseDp0LHk6aX0sdT1jLmVsZW1lbnQsaD1jLm9wdGlvbnMscD1cImRvd25cIixmPWUoaC5hbmNob3IpLG09dVswXSYmdS5oYXNDbGFzcyhcImttLXdpZGdldFwiKTtpZighYy52aXNpYmxlKCkpe2lmKGguY29weUFuY2hvclN0eWxlcyYmKG0mJlwiZm9udC1zaXplXCI9PUxbMF0mJkwuc2hpZnQoKSx1LmNzcyhuLmdldENvbXB1dGVkU3R5bGVzKGZbMF0sTCkpKSx1LmRhdGEoXCJhbmltYXRpbmdcIil8fGMuX3RyaWdnZXIobCkpcmV0dXJuO2gubW9kYWx8fChFLnVuYmluZChjLmRvd25FdmVudCxjLl9tb3VzZWRvd25Qcm94eSkuYmluZChjLmRvd25FdmVudCxjLl9tb3VzZWRvd25Qcm94eSksby5tb2JpbGVPUy5pb3N8fG8ubW9iaWxlT1MuYW5kcm9pZHx8KGMuX3Njcm9sbGFibGVQYXJlbnRzKCkudW5iaW5kKFAsYy5fcmVzaXplUHJveHkpLmJpbmQoUCxjLl9yZXNpemVQcm94eSksTS51bmJpbmQoSSxjLl9yZXNpemVQcm94eSkuYmluZChJLGMuX3Jlc2l6ZVByb3h5KSkpLGMud3JhcHBlcj1hPW4ud3JhcCh1LGguYXV0b3NpemUpLmNzcyh7b3ZlcmZsb3c6XyxkaXNwbGF5OlwiYmxvY2tcIixwb3NpdGlvbjp2fSksby5tb2JpbGVPUy5hbmRyb2lkJiZhLmNzcyhGLFwidHJhbnNsYXRleigwKVwiKSxhLmNzcyhiKSxlKGguYXBwZW5kVG8pWzBdPT1kb2N1bWVudC5ib2R5JiZhLmNzcyhnLFwiLTEwMDAwcHhcIikscj1SKCEwLHt9LGguYW5pbWF0aW9uLm9wZW4pLGMuZmxpcHBlZD1jLl9wb3NpdGlvbihkKSxyLmVmZmVjdHM9bi5wYXJzZUVmZmVjdHMoci5lZmZlY3RzLGMuZmxpcHBlZCkscD1yLmVmZmVjdHMuc2xpZGVJbj9yLmVmZmVjdHMuc2xpZGVJbi5kaXJlY3Rpb246cCxoLmFuY2hvciE9eSYmKHM9UytcIi1cIitwLHUuYWRkQ2xhc3MoUytcIi1cIituLmRpcmVjdGlvbnNbcF0ucmV2ZXJzZSksZi5hZGRDbGFzcyhzKS5jaGlsZHJlbihEKS5hZGRDbGFzcyhDKS5hZGRDbGFzcyhzKSksdS5kYXRhKHgsci5lZmZlY3RzKS5rZW5kb1N0b3AoITApLmtlbmRvQW5pbWF0ZShyKX19LHRvZ2dsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZVtlLnZpc2libGUoKT9jOmxdKCl9LHZpc2libGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50LmlzKFwiOlwiK2spfSxjbG9zZTpmdW5jdGlvbih0KXt2YXIgaSxyLG8sYSxzPXRoaXMsbD1zLm9wdGlvbnM7aWYocy52aXNpYmxlKCkpe2lmKGk9cy53cmFwcGVyWzBdP3Mud3JhcHBlcjpuLndyYXAocy5lbGVtZW50KS5oaWRlKCkscy5fY2xvc2luZ3x8cy5fdHJpZ2dlcihjKSlyZXR1cm47cy5lbGVtZW50LmZpbmQoXCIuay1wb3B1cFwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49ZSh0aGlzKSxpPW4uZGF0YShcImtlbmRvUG9wdXBcIik7aSYmaS5jbG9zZSh0KX0pLEUudW5iaW5kKHMuZG93bkV2ZW50LHMuX21vdXNlZG93blByb3h5KSxzLl9zY3JvbGxhYmxlUGFyZW50cygpLnVuYmluZChQLHMuX3Jlc2l6ZVByb3h5KSxNLnVuYmluZChJLHMuX3Jlc2l6ZVByb3h5KSx0P3I9e2hpZGU6ITAsZWZmZWN0czp7fX06KHI9UighMCx7fSxsLmFuaW1hdGlvbi5jbG9zZSksbz1zLmVsZW1lbnQuZGF0YSh4KSxhPXIuZWZmZWN0cywhYSYmIW4uc2l6ZShhKSYmbyYmbi5zaXplKG8pJiYoci5lZmZlY3RzPW8sci5yZXZlcnNlPSEwKSxzLl9jbG9zaW5nPSEwKSxzLmVsZW1lbnQua2VuZG9TdG9wKCEwKSxpLmNzcyh7b3ZlcmZsb3c6X30pLHMuZWxlbWVudC5rZW5kb0FuaW1hdGUocil9fSxfdHJpZ2dlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50cmlnZ2VyKGUse3R5cGU6ZX0pfSxfcmVzaXplOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7XCJyZXNpemVcIj09PWUudHlwZT8oY2xlYXJUaW1lb3V0KG4uX3Jlc2l6ZVRpbWVvdXQpLG4uX3Jlc2l6ZVRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe24uX3Bvc2l0aW9uKCksbi5fcmVzaXplVGltZW91dD1udWxsfSw1MCkpOm4uX2hvdmVyZWR8fHQobi5lbGVtZW50WzBdLHMoKSl8fG4uY2xvc2UoKX0sX21vdXNlZG93bjpmdW5jdGlvbihpKXt2YXIgcj10aGlzLG89ci5lbGVtZW50WzBdLGE9ci5vcHRpb25zLHM9ZShhLmFuY2hvcilbMF0sbD1hLnRvZ2dsZVRhcmdldCxjPW4uZXZlbnRUYXJnZXQoaSksZD1lKGMpLmNsb3Nlc3QoXCIuay1wb3B1cFwiKSx1PWQucGFyZW50KCkucGFyZW50KFwiLmttLXNoaW1cIikubGVuZ3RoO2Q9ZFswXSwodXx8IWR8fGQ9PT1yLmVsZW1lbnRbMF0pJiZcInBvcG92ZXJcIiE9PWUoaS50YXJnZXQpLmNsb3Nlc3QoXCJhXCIpLmRhdGEoXCJyZWxcIikmJih0KG8sYyl8fHQocyxjKXx8bCYmdChlKGwpWzBdLGMpfHxyLmNsb3NlKCkpfSxfZml0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT0wO3JldHVybiBlK3Q+biYmKGk9bi0oZSt0KSksMD5lJiYoaT0tZSksaX0sX2ZsaXA6ZnVuY3Rpb24oZSx0LG4saSxyLG8sYSl7dmFyIHM9MDtyZXR1cm4gYT1hfHx0LG8hPT1yJiZvIT09aCYmciE9PWgmJihlK2E+aSYmKHMrPS0obit0KSksMD5lK3MmJihzKz1uK3QpKSxzfSxfc2Nyb2xsYWJsZVBhcmVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLm9wdGlvbnMuYW5jaG9yKS5wYXJlbnRzVW50aWwoXCJib2R5XCIpLmZpbHRlcihmdW5jdGlvbihlLHQpe3ZhciBpPW4uZ2V0Q29tcHV0ZWRTdHlsZXModCxbXCJvdmVyZmxvd1wiXSk7cmV0dXJuXCJ2aXNpYmxlXCIhPWkub3ZlcmZsb3d9KX0sX3Bvc2l0aW9uOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixzLGwsYyxkLHUsaCxwPXRoaXMsZj1wLmVsZW1lbnQuY3NzKGIsXCJcIiksZz1wLndyYXBwZXIsbT1wLm9wdGlvbnMsXz1lKG0udmlld3BvcnQpLHk9Xy5vZmZzZXQoKSxrPWUobS5hbmNob3IpLHg9bS5vcmlnaW4udG9Mb3dlckNhc2UoKS5zcGxpdChcIiBcIiksQz1tLnBvc2l0aW9uLnRvTG93ZXJDYXNlKCkuc3BsaXQoXCIgXCIpLFM9cC5jb2xsaXNpb25zLFQ9by56b29tTGV2ZWwoKSxEPTEwMDAyLEE9ISEoX1swXT09d2luZG93JiZ3aW5kb3cuaW5uZXJXaWR0aCYmMS4wMj49VCksRT0wLE09QT93aW5kb3cuaW5uZXJXaWR0aDpfLndpZHRoKCksUD1BP3dpbmRvdy5pbm5lckhlaWdodDpfLmhlaWdodCgpLEk9ay5wYXJlbnRzKCkuZmlsdGVyKGcuc2libGluZ3MoKSk7aWYoSVswXSlpZihpPU1hdGgubWF4KCtJLmNzcyhcInpJbmRleFwiKSwwKSlEPWkrMTA7ZWxzZSBmb3Iobj1rLnBhcmVudHNVbnRpbChJKSxyPW4ubGVuZ3RoO3I+RTtFKyspaT0rZShuW0VdKS5jc3MoXCJ6SW5kZXhcIiksaSYmaT5EJiYoRD1pKzEwKTtyZXR1cm4gZy5jc3MoXCJ6SW5kZXhcIixEKSxnLmNzcyh0JiZ0LmlzRml4ZWQ/e2xlZnQ6dC54LHRvcDp0Lnl9OnAuX2FsaWduKHgsQykpLHM9YShnLGIsa1swXT09PWcub2Zmc2V0UGFyZW50KClbMF0pLGw9YShnKSxjPWsub2Zmc2V0UGFyZW50KCkucGFyZW50KFwiLmstYW5pbWF0aW9uLWNvbnRhaW5lciwuay1wb3B1cCwuay1ncm91cFwiKSxjLmxlbmd0aCYmKHM9YShnLGIsITApLGw9YShnKSksX1swXT09PXdpbmRvdz8obC50b3AtPXdpbmRvdy5wYWdlWU9mZnNldHx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8MCxsLmxlZnQtPXdpbmRvdy5wYWdlWE9mZnNldHx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnR8fDApOihsLnRvcC09eS50b3AsbC5sZWZ0LT15LmxlZnQpLHAud3JhcHBlci5kYXRhKHcpfHxnLmRhdGEodyxSKHt9LHMpKSxkPVIoe30sbCksdT1SKHt9LHMpLFwiZml0XCI9PT1TWzBdJiYodS50b3ArPXAuX2ZpdChkLnRvcCxnLm91dGVySGVpZ2h0KCksUC9UKSksXCJmaXRcIj09PVNbMV0mJih1LmxlZnQrPXAuX2ZpdChkLmxlZnQsZy5vdXRlcldpZHRoKCksTS9UKSksaD1SKHt9LHUpLFwiZmxpcFwiPT09U1swXSYmKHUudG9wKz1wLl9mbGlwKGQudG9wLGYub3V0ZXJIZWlnaHQoKSxrLm91dGVySGVpZ2h0KCksUC9ULHhbMF0sQ1swXSxnLm91dGVySGVpZ2h0KCkpKSxcImZsaXBcIj09PVNbMV0mJih1LmxlZnQrPXAuX2ZsaXAoZC5sZWZ0LGYub3V0ZXJXaWR0aCgpLGsub3V0ZXJXaWR0aCgpLE0vVCx4WzFdLENbMV0sZy5vdXRlcldpZHRoKCkpKSxmLmNzcyhiLHYpLGcuY3NzKHUpLHUubGVmdCE9aC5sZWZ0fHx1LnRvcCE9aC50b3BcclxufSxfYWxpZ246ZnVuY3Rpb24odCxuKXt2YXIgaSxyPXRoaXMsbz1yLndyYXBwZXIscz1lKHIub3B0aW9ucy5hbmNob3IpLGw9dFswXSxjPXRbMV0sZD1uWzBdLHU9blsxXSxwPWEocyksZz1lKHIub3B0aW9ucy5hcHBlbmRUbyksdj1vLm91dGVyV2lkdGgoKSxfPW8ub3V0ZXJIZWlnaHQoKSx5PXMub3V0ZXJXaWR0aCgpLHc9cy5vdXRlckhlaWdodCgpLGI9cC50b3Asaz1wLmxlZnQseD1NYXRoLnJvdW5kO3JldHVybiBnWzBdIT1kb2N1bWVudC5ib2R5JiYoaT1hKGcpLGItPWkudG9wLGstPWkubGVmdCksbD09PW0mJihiKz13KSxsPT09aCYmKGIrPXgody8yKSksZD09PW0mJihiLT1fKSxkPT09aCYmKGItPXgoXy8yKSksYz09PWYmJihrKz15KSxjPT09aCYmKGsrPXgoeS8yKSksdT09PWYmJihrLT12KSx1PT09aCYmKGstPXgodi8yKSkse3RvcDpiLGxlZnQ6a319fSk7aS5wbHVnaW4oTyl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG49d2luZG93LmtlbmRvLGk9bi51aS5XaWRnZXQscj1lLnByb3h5LG89ZS5leHRlbmQsYT13aW5kb3cuc2V0VGltZW91dCxzPVwiY2xpY2tcIixsPVwic2hvd1wiLGM9XCJoaWRlXCIsZD1cImstbm90aWZpY2F0aW9uXCIsdT1cIi5rLW5vdGlmaWNhdGlvbi13cmFwIC5rLWktY2xvc2VcIixoPVwiaW5mb1wiLHA9XCJzdWNjZXNzXCIsZj1cIndhcm5pbmdcIixnPVwiZXJyb3JcIixtPVwidG9wXCIsdj1cImxlZnRcIixfPVwiYm90dG9tXCIseT1cInJpZ2h0XCIsdz1cInVwXCIsYj1cIi5rZW5kb05vdGlmaWNhdGlvblwiLGs9JzxkaXYgY2xhc3M9XCJrLXdpZGdldCBrLW5vdGlmaWNhdGlvblwiPjwvZGl2PicseD0nPGRpdiBjbGFzcz1cImstbm90aWZpY2F0aW9uLXdyYXBcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWktbm90ZVwiPiM9dHlwZUljb24jPC9zcGFuPiM9Y29udGVudCM8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktY2xvc2VcIj5IaWRlPC9zcGFuPjwvZGl2PicsQz1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LHIpe3ZhciBvPXRoaXM7aS5mbi5pbml0LmNhbGwobyx0LHIpLHI9by5vcHRpb25zLHIuYXBwZW5kVG8mJmUoci5hcHBlbmRUbykuaXModCl8fG8uZWxlbWVudC5oaWRlKCksby5fY29tcGlsZVRlbXBsYXRlcyhyLnRlbXBsYXRlcyksby5fZ3VpZD1cIl9cIituLmd1aWQoKSxvLl9pc1J0bD1uLnN1cHBvcnQuaXNSdGwodCksby5fY29tcGlsZVN0YWNraW5nKHIuc3RhY2tpbmcsci5wb3NpdGlvbi50b3ApLG4ubm90aWZ5KG8pfSxldmVudHM6W2wsY10sb3B0aW9uczp7bmFtZTpcIk5vdGlmaWNhdGlvblwiLHBvc2l0aW9uOntwaW5uZWQ6ITAsdG9wOm51bGwsbGVmdDpudWxsLGJvdHRvbToyMCxyaWdodDoyMH0sc3RhY2tpbmc6XCJkZWZhdWx0XCIsaGlkZU9uQ2xpY2s6ITAsYnV0dG9uOiExLGFsbG93SGlkZUFmdGVyOjAsYXV0b0hpZGVBZnRlcjo1ZTMsYXBwZW5kVG86bnVsbCx3aWR0aDpudWxsLGhlaWdodDpudWxsLHRlbXBsYXRlczpbXSxhbmltYXRpb246e29wZW46e2VmZmVjdHM6XCJmYWRlOmluXCIsZHVyYXRpb246MzAwfSxjbG9zZTp7ZWZmZWN0czpcImZhZGU6b3V0XCIsZHVyYXRpb246NjAwLGhpZGU6ITB9fX0sX2NvbXBpbGVUZW1wbGF0ZXM6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcyxyPW4udGVtcGxhdGU7aS5fY29tcGlsZWQ9e30sZS5lYWNoKHQsZnVuY3Rpb24odCxuKXtpLl9jb21waWxlZFtuLnR5cGVdPXIobi50ZW1wbGF0ZXx8ZShcIiNcIituLnRlbXBsYXRlSWQpLmh0bWwoKSl9KSxpLl9kZWZhdWx0Q29tcGlsZWQ9cih4KX0sX2dldENvbXBpbGVkOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Ll9kZWZhdWx0Q29tcGlsZWQ7cmV0dXJuIGU/dC5fY29tcGlsZWRbZV18fG46bn0sX2NvbXBpbGVTdGFja2luZzpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj10aGlzLG89e3BhZGRpbmdUb3A6MCxwYWRkaW5nUmlnaHQ6MCxwYWRkaW5nQm90dG9tOjAscGFkZGluZ0xlZnQ6MH07c3dpdGNoKGUpe2Nhc2VcImRvd25cIjpuPV8rXCIgXCIrdixpPW0rXCIgXCIrdixkZWxldGUgby5wYWRkaW5nQm90dG9tO2JyZWFrO2Nhc2UgeTpuPW0rXCIgXCIreSxpPW0rXCIgXCIrdixkZWxldGUgby5wYWRkaW5nUmlnaHQ7YnJlYWs7Y2FzZSB2Om49bStcIiBcIit2LGk9bStcIiBcIit5LGRlbGV0ZSBvLnBhZGRpbmdMZWZ0O2JyZWFrO2Nhc2UgdzpuPW0rXCIgXCIrdixpPV8rXCIgXCIrdixkZWxldGUgby5wYWRkaW5nVG9wO2JyZWFrO2RlZmF1bHQ6bnVsbCE9PXQ/KG49XytcIiBcIit2LGk9bStcIiBcIit2LGRlbGV0ZSBvLnBhZGRpbmdCb3R0b20pOihuPW0rXCIgXCIrdixpPV8rXCIgXCIrdixkZWxldGUgby5wYWRkaW5nVG9wKX1yLl9wb3B1cE9yaWdpbj1uLHIuX3BvcHVwUG9zaXRpb249aSxyLl9wb3B1cFBhZGRpbmdzPW99LF9hdHRhY2hQb3B1cEV2ZW50czpmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7ZS5vbihzK2IsZnVuY3Rpb24oKXt0LmNsb3NlKCl9KX12YXIgaSxyPWUuYWxsb3dIaWRlQWZ0ZXIsbz0haXNOYU4ocikmJnI+MDtlLmhpZGVPbkNsaWNrP3QuYmluZChcImFjdGl2YXRlXCIsZnVuY3Rpb24oKXtvP2EoZnVuY3Rpb24oKXtuKHQuZWxlbWVudCl9LHIpOm4odC5lbGVtZW50KX0pOmUuYnV0dG9uJiYoaT10LmVsZW1lbnQuZmluZCh1KSxvP2EoZnVuY3Rpb24oKXtuKGkpfSxyKTpuKGkpKX0sX3Nob3dQb3B1cDpmdW5jdGlvbih0LGkpe3ZhciByLHMsbD10aGlzLGM9aS5hdXRvSGlkZUFmdGVyLGQ9aS5wb3NpdGlvbi5sZWZ0LGg9aS5wb3NpdGlvbi50b3A7cz1lKFwiLlwiK2wuX2d1aWQpLmxhc3QoKSxyPW5ldyBuLnVpLlBvcHVwKHQse2FuY2hvcjpzWzBdP3M6ZG9jdW1lbnQuYm9keSxvcmlnaW46bC5fcG9wdXBPcmlnaW4scG9zaXRpb246bC5fcG9wdXBQb3NpdGlvbixhbmltYXRpb246aS5hbmltYXRpb24sbW9kYWw6ITAsY29sbGlzaW9uOlwiXCIsaXNSdGw6bC5faXNSdGwsY2xvc2U6ZnVuY3Rpb24oKXtsLl90cmlnZ2VySGlkZSh0aGlzLmVsZW1lbnQpfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKGUpe2Uuc2VuZGVyLmVsZW1lbnQub2ZmKGIpLGUuc2VuZGVyLmVsZW1lbnQuZmluZCh1KS5vZmYoYiksZS5zZW5kZXIuZGVzdHJveSgpfX0pLGwuX2F0dGFjaFBvcHVwRXZlbnRzKGksciksc1swXT9yLm9wZW4oKToobnVsbD09PWQmJihkPWUod2luZG93KS53aWR0aCgpLXQud2lkdGgoKS1pLnBvc2l0aW9uLnJpZ2h0KSxudWxsPT09aCYmKGg9ZSh3aW5kb3cpLmhlaWdodCgpLXQuaGVpZ2h0KCktaS5wb3NpdGlvbi5ib3R0b20pLHIub3BlbihkLGgpKSxyLndyYXBwZXIuYWRkQ2xhc3MobC5fZ3VpZCkuY3NzKG8oe21hcmdpbjowfSxsLl9wb3B1cFBhZGRpbmdzKSksaS5wb3NpdGlvbi5waW5uZWQ/KHIud3JhcHBlci5jc3MoXCJwb3NpdGlvblwiLFwiZml4ZWRcIiksc1swXSYmbC5fdG9nZ2xlUGluKHIud3JhcHBlciwhMCkpOnNbMF18fGwuX3RvZ2dsZVBpbihyLndyYXBwZXIsITEpLGM+MCYmYShmdW5jdGlvbigpe3IuY2xvc2UoKX0sYyl9LF90b2dnbGVQaW46ZnVuY3Rpb24odCxuKXt2YXIgaT1lKHdpbmRvdykscj1uPy0xOjE7dC5jc3Moe3RvcDpwYXJzZUludCh0LmNzcyhtKSwxMCkrcippLnNjcm9sbFRvcCgpLGxlZnQ6cGFyc2VJbnQodC5jc3ModiksMTApK3IqaS5zY3JvbGxMZWZ0KCl9KX0sX2F0dGFjaFN0YXRpY0V2ZW50czpmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7ZS5vbihzK2IscihpLl9oaWRlU3RhdGljLGksdCkpfXZhciBpPXRoaXMsbz1lLmFsbG93SGlkZUFmdGVyLGw9IWlzTmFOKG8pJiZvPjA7ZS5oaWRlT25DbGljaz9sP2EoZnVuY3Rpb24oKXtuKHQpfSxvKTpuKHQpOmUuYnV0dG9uJiYobD9hKGZ1bmN0aW9uKCl7bih0LmZpbmQodSkpfSxvKTpuKHQuZmluZCh1KSkpfSxfc2hvd1N0YXRpYzpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT10LmF1dG9IaWRlQWZ0ZXIscj10LmFuaW1hdGlvbixvPXQuc3RhY2tpbmc9PXd8fHQuc3RhY2tpbmc9PXY/XCJwcmVwZW5kVG9cIjpcImFwcGVuZFRvXCI7ZS5hZGRDbGFzcyhuLl9ndWlkKVtvXSh0LmFwcGVuZFRvKS5oaWRlKCkua2VuZG9BbmltYXRlKHIub3Blbnx8ITEpLG4uX2F0dGFjaFN0YXRpY0V2ZW50cyh0LGUpLGk+MCYmYShmdW5jdGlvbigpe24uX2hpZGVTdGF0aWMoZSl9LGkpfSxfaGlkZVN0YXRpYzpmdW5jdGlvbihlKXtlLmtlbmRvQW5pbWF0ZShvKHRoaXMub3B0aW9ucy5hbmltYXRpb24uY2xvc2V8fCExLHtjb21wbGV0ZTpmdW5jdGlvbigpe2Uub2ZmKGIpLmZpbmQodSkub2ZmKGIpLGUucmVtb3ZlKCl9fSkpLHRoaXMuX3RyaWdnZXJIaWRlKGUpfSxfdHJpZ2dlckhpZGU6ZnVuY3Rpb24oZSl7dGhpcy50cmlnZ2VyKGMse2VsZW1lbnQ6ZX0pLHRoaXMuYW5ndWxhcihcImNsZWFudXBcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czplfX0pfSxzaG93OmZ1bmN0aW9uKGkscil7dmFyIGEscyxjPXRoaXMsdT1jLm9wdGlvbnMscD1lKGspO3JldHVybiByfHwocj1oKSxudWxsIT09aSYmaSE9PXQmJlwiXCIhPT1pJiYobi5pc0Z1bmN0aW9uKGkpJiYoaT1pKCkpLHM9e3R5cGVJY29uOnIsY29udGVudDpcIlwifSxhPWUuaXNQbGFpbk9iamVjdChpKT9vKHMsaSk6byhzLHtjb250ZW50Oml9KSxwLmFkZENsYXNzKGQrXCItXCIrcikudG9nZ2xlQ2xhc3MoZCtcIi1idXR0b25cIix1LmJ1dHRvbikuYXR0cihcImRhdGEtcm9sZVwiLFwiYWxlcnRcIikuY3NzKHt3aWR0aDp1LndpZHRoLGhlaWdodDp1LmhlaWdodH0pLmFwcGVuZChjLl9nZXRDb21waWxlZChyKShhKSksYy5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOnAsZGF0YTpbe2RhdGFJdGVtOmF9XX19KSxlKHUuYXBwZW5kVG8pWzBdP2MuX3Nob3dTdGF0aWMocCx1KTpjLl9zaG93UG9wdXAocCx1KSxjLnRyaWdnZXIobCx7ZWxlbWVudDpwfSkpLGN9LGluZm86ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2hvdyhlLGgpfSxzdWNjZXNzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNob3coZSxwKX0sd2FybmluZzpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaG93KGUsZil9LGVycm9yOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNob3coZSxnKX0saGlkZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LmdldE5vdGlmaWNhdGlvbnMoKTtyZXR1cm4gbi5lYWNoKHQub3B0aW9ucy5hcHBlbmRUbz9mdW5jdGlvbihuLGkpe3QuX2hpZGVTdGF0aWMoZShpKSl9OmZ1bmN0aW9uKHQsbil7dmFyIGk9ZShuKS5kYXRhKFwia2VuZG9Qb3B1cFwiKTtpJiZpLmNsb3NlKCl9KSx0fSxnZXROb3RpZmljYXRpb25zOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPWUoXCIuXCIrdC5fZ3VpZCk7cmV0dXJuIHQub3B0aW9ucy5hcHBlbmRUbz9uOm4uY2hpbGRyZW4oXCIuXCIrZCl9LHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIG4scj10aGlzO2kuZm4uc2V0T3B0aW9ucy5jYWxsKHIsZSksbj1yLm9wdGlvbnMsZS50ZW1wbGF0ZXMhPT10JiZyLl9jb21waWxlVGVtcGxhdGVzKG4udGVtcGxhdGVzKSwoZS5zdGFja2luZyE9PXR8fGUucG9zaXRpb24hPT10KSYmci5fY29tcGlsZVN0YWNraW5nKG4uc3RhY2tpbmcsbi5wb3NpdGlvbi50b3ApfSxkZXN0cm95OmZ1bmN0aW9uKCl7aS5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5nZXROb3RpZmljYXRpb25zKCkub2ZmKGIpLmZpbmQodSkub2ZmKGIpfX0pO24udWkucGx1Z2luKEMpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe2Zvcig7ZS5sZW5ndGg7KW4oZSksZT1lLnBhcmVudCgpfWZ1bmN0aW9uIG4oZSl7dmFyIHQ9ZS5kYXRhKG8ubnMrXCJ0aXRsZVwiKTt0JiYoZS5hdHRyKFwidGl0bGVcIix0KSxlLnJlbW92ZURhdGEoby5ucytcInRpdGxlXCIpKX1mdW5jdGlvbiBpKGUpe3ZhciB0PWUuYXR0cihcInRpdGxlXCIpO3QmJihlLmRhdGEoby5ucytcInRpdGxlXCIsdCksZS5hdHRyKFwidGl0bGVcIixcIlwiKSl9ZnVuY3Rpb24gcihlKXtmb3IoO2UubGVuZ3RoJiYhZS5pcyhcImJvZHlcIik7KWkoZSksZT1lLnBhcmVudCgpfXZhciBvPXdpbmRvdy5rZW5kbyxhPW8udWkuV2lkZ2V0LHM9by51aS5Qb3B1cCxsPW8uaXNGdW5jdGlvbixjPWUuaXNQbGFpbk9iamVjdCxkPWUuZXh0ZW5kLHU9ZS5wcm94eSxoPWUoZG9jdW1lbnQpLHA9by5pc0xvY2FsVXJsLGY9XCJfdHRfYWN0aXZlXCIsZz1cImFyaWEtZGVzY3JpYmVkYnlcIixtPVwic2hvd1wiLHY9XCJoaWRlXCIsXz1cImVycm9yXCIseT1cImNvbnRlbnRMb2FkXCIsdz1cInJlcXVlc3RTdGFydFwiLGI9XCJrLWNvbnRlbnQtZnJhbWVcIixrPSc8ZGl2IHJvbGU9XCJ0b29sdGlwXCIgY2xhc3M9XCJrLXdpZGdldCBrLXRvb2x0aXAjaWYgKCFhdXRvSGlkZSkgeyMgay10b29sdGlwLWNsb3NhYmxlI30jXCI+I2lmICghYXV0b0hpZGUpIHsjIDxkaXYgY2xhc3M9XCJrLXRvb2x0aXAtYnV0dG9uXCI+PGEgaHJlZj1cIlxcXFwjXCIgY2xhc3M9XCJrLWljb24gay1pLWNsb3NlXCI+Y2xvc2U8L2E+PC9kaXY+ICN9IzxkaXYgY2xhc3M9XCJrLXRvb2x0aXAtY29udGVudFwiPjwvZGl2PiNpZiAoY2FsbG91dCl7ICM8ZGl2IGNsYXNzPVwiay1jYWxsb3V0IGstY2FsbG91dC0jPWRpciNcIj48L2Rpdj4jfSM8L2Rpdj4nLHg9by50ZW1wbGF0ZShcIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIGNsYXNzPSdcIitiK1wiJyBzcmM9JyM9IGNvbnRlbnQudXJsICMnPlRoaXMgcGFnZSByZXF1aXJlcyBmcmFtZXMgaW4gb3JkZXIgdG8gc2hvdyBjb250ZW50PC9pZnJhbWU+XCIpLEM9XCIua2VuZG9Ub29sdGlwXCIsUz17Ym90dG9tOntvcmlnaW46XCJib3R0b20gY2VudGVyXCIscG9zaXRpb246XCJ0b3AgY2VudGVyXCJ9LHRvcDp7b3JpZ2luOlwidG9wIGNlbnRlclwiLHBvc2l0aW9uOlwiYm90dG9tIGNlbnRlclwifSxsZWZ0OntvcmlnaW46XCJjZW50ZXIgbGVmdFwiLHBvc2l0aW9uOlwiY2VudGVyIHJpZ2h0XCIsY29sbGlzaW9uOlwiZml0IGZsaXBcIn0scmlnaHQ6e29yaWdpbjpcImNlbnRlciByaWdodFwiLHBvc2l0aW9uOlwiY2VudGVyIGxlZnRcIixjb2xsaXNpb246XCJmaXQgZmxpcFwifSxjZW50ZXI6e3Bvc2l0aW9uOlwiY2VudGVyIGNlbnRlclwiLG9yaWdpbjpcImNlbnRlciBjZW50ZXJcIn19LFQ9e3RvcDpcImJvdHRvbVwiLGJvdHRvbTpcInRvcFwiLGxlZnQ6XCJyaWdodFwiLHJpZ2h0OlwibGVmdFwiLGNlbnRlcjpcImNlbnRlclwifSxEPXtib3R0b206XCJuXCIsdG9wOlwic1wiLGxlZnQ6XCJlXCIscmlnaHQ6XCJ3XCIsY2VudGVyOlwiblwifSxBPXtob3Jpem9udGFsOntvZmZzZXQ6XCJ0b3BcIixzaXplOlwib3V0ZXJIZWlnaHRcIn0sdmVydGljYWw6e29mZnNldDpcImxlZnRcIixzaXplOlwib3V0ZXJXaWR0aFwifX0sRT1mdW5jdGlvbihlKXtyZXR1cm4gZS50YXJnZXQuZGF0YShvLm5zK1widGl0bGVcIil9LE09YS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXM7YS5mbi5pbml0LmNhbGwoaSxlLHQpLG49aS5vcHRpb25zLnBvc2l0aW9uLm1hdGNoKC9sZWZ0fHJpZ2h0Lyk/XCJob3Jpem9udGFsXCI6XCJ2ZXJ0aWNhbFwiLGkuZGltZW5zaW9ucz1BW25dLGkuX2RvY3VtZW50S2V5RG93bkhhbmRsZXI9dShpLl9kb2N1bWVudEtleURvd24saSksaS5lbGVtZW50Lm9uKGkub3B0aW9ucy5zaG93T24rQyxpLm9wdGlvbnMuZmlsdGVyLHUoaS5fc2hvd09uLGkpKS5vbihcIm1vdXNlZW50ZXJcIitDLGkub3B0aW9ucy5maWx0ZXIsdShpLl9tb3VzZWVudGVyLGkpKSx0aGlzLm9wdGlvbnMuYXV0b0hpZGUmJmkuZWxlbWVudC5vbihcIm1vdXNlbGVhdmVcIitDLGkub3B0aW9ucy5maWx0ZXIsdShpLl9tb3VzZWxlYXZlLGkpKX0sb3B0aW9uczp7bmFtZTpcIlRvb2x0aXBcIixmaWx0ZXI6XCJcIixjb250ZW50OkUsc2hvd0FmdGVyOjEwMCxjYWxsb3V0OiEwLHBvc2l0aW9uOlwiYm90dG9tXCIsc2hvd09uOlwibW91c2VlbnRlclwiLGF1dG9IaWRlOiEwLHdpZHRoOm51bGwsaGVpZ2h0Om51bGwsYW5pbWF0aW9uOntvcGVuOntlZmZlY3RzOlwiZmFkZTppblwiLGR1cmF0aW9uOjB9LGNsb3NlOntlZmZlY3RzOlwiZmFkZTpvdXRcIixkdXJhdGlvbjo0MCxoaWRlOiEwfX19LGV2ZW50czpbbSx2LHksXyx3XSxfbW91c2VlbnRlcjpmdW5jdGlvbih0KXtyKGUodC5jdXJyZW50VGFyZ2V0KSl9LF9zaG93T246ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPWUodC5jdXJyZW50VGFyZ2V0KTtuLm9wdGlvbnMuc2hvd09uJiZuLm9wdGlvbnMuc2hvd09uLm1hdGNoKC9jbGlja3xmb2N1cy8pP24uX3Nob3coaSk6KGNsZWFyVGltZW91dChuLnRpbWVvdXQpLG4udGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5fc2hvdyhpKX0sbi5vcHRpb25zLnNob3dBZnRlcikpfSxfYXBwZW5kQ29udGVudDpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMsaT1uLm9wdGlvbnMuY29udGVudCxyPW4uY29udGVudCxhPW4ub3B0aW9ucy5pZnJhbWU7YyhpKSYmaS51cmw/KFwiaWZyYW1lXCJpbiBuLm9wdGlvbnN8fChhPSFwKGkudXJsKSksbi50cmlnZ2VyKHcse29wdGlvbnM6aSx0YXJnZXQ6ZX0pLGE/KHIuaGlkZSgpLHQ9ci5maW5kKFwiLlwiK2IpWzBdLHQ/dC5zcmM9aS51cmx8fHQuc3JjOnIuaHRtbCh4KHtjb250ZW50Oml9KSksci5maW5kKFwiLlwiK2IpLm9mZihcImxvYWRcIitDKS5vbihcImxvYWRcIitDLGZ1bmN0aW9uKCl7bi50cmlnZ2VyKHkpLHIuc2hvdygpfSkpOihyLmVtcHR5KCksby51aS5wcm9ncmVzcyhyLCEwKSxuLl9hamF4UmVxdWVzdChpKSkpOmkmJmwoaSk/KGk9aSh7c2VuZGVyOnRoaXMsdGFyZ2V0OmV9KSxyLmh0bWwoaXx8XCJcIikpOnIuaHRtbChpKSxuLmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6cn19KX0sX2FqYXhSZXF1ZXN0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7alF1ZXJ5LmFqYXgoZCh7dHlwZTpcIkdFVFwiLGRhdGFUeXBlOlwiaHRtbFwiLGNhY2hlOiExLGVycm9yOmZ1bmN0aW9uKGUsbil7by51aS5wcm9ncmVzcyh0LmNvbnRlbnQsITEpLHQudHJpZ2dlcihfLHtzdGF0dXM6bix4aHI6ZX0pfSxzdWNjZXNzOnUoZnVuY3Rpb24oZSl7by51aS5wcm9ncmVzcyh0LmNvbnRlbnQsITEpLHQuY29udGVudC5odG1sKGUpLHQudHJpZ2dlcih5KX0sdCl9LGUpKX0sX2RvY3VtZW50S2V5RG93bjpmdW5jdGlvbihlKXtlLmtleUNvZGU9PT1vLmtleXMuRVNDJiZ0aGlzLmhpZGUoKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLnBvcHVwO3QmJnQub3B0aW9ucy5hbmNob3ImJmUuX2FwcGVuZENvbnRlbnQodC5vcHRpb25zLmFuY2hvcil9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLnBvcHVwJiZ0aGlzLnBvcHVwLmNsb3NlKCl9LHNob3c6ZnVuY3Rpb24oZSl7ZT1lfHx0aGlzLmVsZW1lbnQscihlKSx0aGlzLl9zaG93KGUpfSxfc2hvdzpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi50YXJnZXQoKTtuLnBvcHVwfHxuLl9pbml0UG9wdXAoKSxpJiZpWzBdIT1lWzBdJiYobi5wb3B1cC5jbG9zZSgpLG4ucG9wdXAuZWxlbWVudC5rZW5kb1N0b3AoITAsITApKSxpJiZpWzBdPT1lWzBdfHwobi5fYXBwZW5kQ29udGVudChlKSxuLnBvcHVwLm9wdGlvbnMuYW5jaG9yPWUpLG4ucG9wdXAub25lKFwiZGVhY3RpdmF0ZVwiLGZ1bmN0aW9uKCl7dChlKSxlLnJlbW92ZUF0dHIoZyksdGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoXCJpZFwiKS5hdHRyKFwiYXJpYS1oaWRkZW5cIiwhMCksaC5vZmYoXCJrZXlkb3duXCIrQyxuLl9kb2N1bWVudEtleURvd25IYW5kbGVyKX0pLG4ucG9wdXAub3BlbigpfSxfaW5pdFBvcHVwOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucyxpPWUoby50ZW1wbGF0ZShrKSh7Y2FsbG91dDpuLmNhbGxvdXQmJlwiY2VudGVyXCIhPT1uLnBvc2l0aW9uLGRpcjpEW24ucG9zaXRpb25dLGF1dG9IaWRlOm4uYXV0b0hpZGV9KSk7dC5wb3B1cD1uZXcgcyhpLGQoe2FjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLmFuY2hvcixpPWVbMF0uaWR8fHQuZWxlbWVudFswXS5pZDtpJiYoZS5hdHRyKGcsaStmKSx0aGlzLmVsZW1lbnQuYXR0cihcImlkXCIsaStmKSksbi5jYWxsb3V0JiZ0Ll9wb3NpdGlvbkNhbGxvdXQoKSx0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cihcImFyaWEtaGlkZGVuXCIpLGgub24oXCJrZXlkb3duXCIrQyx0Ll9kb2N1bWVudEtleURvd25IYW5kbGVyKSx0LnRyaWdnZXIobSl9LGNsb3NlOmZ1bmN0aW9uKCl7dC50cmlnZ2VyKHYpfSxjb3B5QW5jaG9yU3R5bGVzOiExLGFuaW1hdGlvbjpuLmFuaW1hdGlvbn0sU1tuLnBvc2l0aW9uXSkpLGkuY3NzKHt3aWR0aDpuLndpZHRoLGhlaWdodDpuLmhlaWdodH0pLHQuY29udGVudD1pLmZpbmQoXCIuay10b29sdGlwLWNvbnRlbnRcIiksdC5hcnJvdz1pLmZpbmQoXCIuay1jYWxsb3V0XCIpLG4uYXV0b0hpZGU/aS5vbihcIm1vdXNlbGVhdmVcIitDLHUodC5fbW91c2VsZWF2ZSx0KSk6aS5vbihcImNsaWNrXCIrQyxcIi5rLXRvb2x0aXAtYnV0dG9uXCIsdSh0Ll9jbG9zZUJ1dHRvbkNsaWNrLHQpKX0sX2Nsb3NlQnV0dG9uQ2xpY2s6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuaGlkZSgpfSxfbW91c2VsZWF2ZTpmdW5jdGlvbihuKXtpZih0aGlzLnBvcHVwKXt2YXIgaT1lKG4uY3VycmVudFRhcmdldCkscj1pLm9mZnNldCgpLG89bi5wYWdlWCxhPW4ucGFnZVk7aWYoci5yaWdodD1yLmxlZnQraS5vdXRlcldpZHRoKCksci5ib3R0b209ci50b3AraS5vdXRlckhlaWdodCgpLG8+ci5sZWZ0JiZyLnJpZ2h0Pm8mJmE+ci50b3AmJnIuYm90dG9tPmEpcmV0dXJuO3RoaXMucG9wdXAuY2xvc2UoKX1lbHNlIHQoZShuLmN1cnJlbnRUYXJnZXQpKTtjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KX0sX3Bvc2l0aW9uQ2FsbG91dDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMucG9zaXRpb24saT10LmRpbWVuc2lvbnMscj1pLm9mZnNldCxvPXQucG9wdXAsYT1vLm9wdGlvbnMuYW5jaG9yLHM9ZShhKS5vZmZzZXQoKSxsPXBhcnNlSW50KHQuYXJyb3cuY3NzKFwiYm9yZGVyLXRvcC13aWR0aFwiKSwxMCksYz1lKG8uZWxlbWVudCkub2Zmc2V0KCksZD1EW28uZmxpcHBlZD9UW25dOm5dLHU9c1tyXS1jW3JdK2UoYSlbaS5zaXplXSgpLzItbDt0LmFycm93LnJlbW92ZUNsYXNzKFwiay1jYWxsb3V0LW4gay1jYWxsb3V0LXMgay1jYWxsb3V0LXcgay1jYWxsb3V0LWVcIikuYWRkQ2xhc3MoXCJrLWNhbGxvdXQtXCIrZCkuY3NzKHIsdSl9LHRhcmdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBvcHVwP3RoaXMucG9wdXAub3B0aW9ucy5hbmNob3I6bnVsbH0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucG9wdXA7ZSYmKGUuZWxlbWVudC5vZmYoQyksZS5kZXN0cm95KCkpLHRoaXMuZWxlbWVudC5vZmYoQyksaC5vZmYoXCJrZXlkb3duXCIrQyx0aGlzLl9kb2N1bWVudEtleURvd25IYW5kbGVyKSxhLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKX19KTtvLnVpLnBsdWdpbihNKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKHQsaSl7dmFyIHIsbz0hMTtyZXR1cm4gdC5maWx0ZXJzJiYocj1lLmdyZXAodC5maWx0ZXJzLGZ1bmN0aW9uKGUpe3JldHVybiBvPW4oZSxpKSxlLmZpbHRlcnM/ZS5maWx0ZXJzLmxlbmd0aDplLmZpZWxkIT1pfSksb3x8dC5maWx0ZXJzLmxlbmd0aD09PXIubGVuZ3RofHwobz0hMCksdC5maWx0ZXJzPXIpLG99dmFyIGk9d2luZG93LmtlbmRvLHI9aS51aSxvPXIuV2lkZ2V0LGE9aS5rZXlzLHM9aS5zdXBwb3J0LGw9aS5odG1sRW5jb2RlLGM9aS5fYWN0aXZlRWxlbWVudCxkPVwiaWRcIix1PVwibGlcIixoPVwiY2hhbmdlXCIscD1cImstc3RhdGUtZm9jdXNlZFwiLGY9XCJrLXN0YXRlLWhvdmVyXCIsZz1cImstbG9hZGluZ1wiLG09XCJvcGVuXCIsdj1cImNsb3NlXCIsXz1cInNlbGVjdFwiLHk9XCJzZWxlY3RlZFwiLHc9XCJwcm9ncmVzc1wiLGI9XCJyZXF1ZXN0RW5kXCIsaz1cIndpZHRoXCIseD1lLmV4dGVuZCxDPWUucHJveHksUz1zLmJyb3dzZXIsVD1TLm1zaWUmJjk+Uy52ZXJzaW9uLEQ9L1wiL2csQT17Q29tYm9Cb3g6XCJEcm9wRG93bkxpc3RcIixEcm9wRG93bkxpc3Q6XCJDb21ib0JveFwifSxFPWkudWkuRGF0YUJvdW5kV2lkZ2V0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpLHI9dGhpcyxhPXIubnM7by5mbi5pbml0LmNhbGwocix0LG4pLHQ9ci5lbGVtZW50LHIuX2lzU2VsZWN0PXQuaXMoXyksci5fdGVtcGxhdGUoKSxyLnVsPWUoJzx1bCB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1saXN0IGstcmVzZXRcIi8+JykuY3NzKHtvdmVyZmxvdzpzLmtpbmV0aWNTY3JvbGxOZWVkZWQ/XCJcIjpcImF1dG9cIn0pLm9uKFwibW91c2VlbnRlclwiK2EsdSxmdW5jdGlvbigpe2UodGhpcykuYWRkQ2xhc3MoZil9KS5vbihcIm1vdXNlbGVhdmVcIithLHUsZnVuY3Rpb24oKXtlKHRoaXMpLnJlbW92ZUNsYXNzKGYpfSkub24oXCJjbGlja1wiK2EsdSxDKHIuX2NsaWNrLHIpKS5hdHRyKHt0YWJJbmRleDotMSxyb2xlOlwibGlzdGJveFwiLFwiYXJpYS1oaWRkZW5cIjohMH0pLHIubGlzdD1lKFwiPGRpdiBjbGFzcz0nay1saXN0LWNvbnRhaW5lcicvPlwiKS5hcHBlbmQoci51bCkub24oXCJtb3VzZWRvd25cIithLEMoci5fbGlzdE1vdXNlZG93bixyKSksaT10LmF0dHIoZCksaSYmKHIubGlzdC5hdHRyKGQsaStcIi1saXN0XCIpLHIudWwuYXR0cihkLGkrXCJfbGlzdGJveFwiKSxyLl9vcHRpb25JRD1pK1wiX29wdGlvbl9zZWxlY3RlZFwiKSxyLl9oZWFkZXIoKSxyLl9hY2Nlc3NvcnMoKSxyLl9pbml0VmFsdWUoKX0sb3B0aW9uczp7dmFsdWVQcmltaXRpdmU6ITEsaGVhZGVyVGVtcGxhdGU6XCJcIn0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXtvLmZuLnNldE9wdGlvbnMuY2FsbCh0aGlzLGUpLGUmJmUuZW5hYmxlIT09dCYmKGUuZW5hYmxlZD1lLmVuYWJsZSl9LGZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5fZm9jdXNlZC5mb2N1cygpfSxyZWFkb25seTpmdW5jdGlvbihlKXt0aGlzLl9lZGl0YWJsZSh7cmVhZG9ubHk6ZT09PXQ/ITA6ZSxkaXNhYmxlOiExfSl9LGVuYWJsZTpmdW5jdGlvbihlKXt0aGlzLl9lZGl0YWJsZSh7cmVhZG9ubHk6ITEsZGlzYWJsZTohKGU9ZT09PXQ/ITA6ZSl9KX0sX2xpc3RNb3VzZWRvd246ZnVuY3Rpb24oZSl7dGhpcy5maWx0ZXJJbnB1dCYmdGhpcy5maWx0ZXJJbnB1dFswXT09PWUudGFyZ2V0fHxlLnByZXZlbnREZWZhdWx0KCl9LF9maWx0ZXJTb3VyY2U6ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLHI9aS5vcHRpb25zLG89aS5kYXRhU291cmNlLGE9eCh7fSxvLmZpbHRlcigpfHx7fSkscz1uKGEsci5kYXRhVGV4dEZpZWxkKTsoZXx8cykmJmkudHJpZ2dlcihcImZpbHRlcmluZ1wiLHtmaWx0ZXI6ZX0pfHwoZSYmKGE9YS5maWx0ZXJzfHxbXSxhLnB1c2goZSkpLHQ/by5yZWFkKGEpOm8uZmlsdGVyKGEpKX0sX2hlYWRlcjpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4ub3B0aW9ucy5oZWFkZXJUZW1wbGF0ZTtlLmlzRnVuY3Rpb24oaSkmJihpPWkoe30pKSxpJiYobi5saXN0LnByZXBlbmQoaSksdD1uLnVsLnByZXYoKSxuLmhlYWRlcj10WzBdP3Q6bnVsbCxuLmhlYWRlciYmbi5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOm4uaGVhZGVyfX0pKX0sX2luaXRWYWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm9wdGlvbnMudmFsdWU7bnVsbCE9PXQ/ZS5lbGVtZW50LnZhbCh0KToodD1lLl9hY2Nlc3NvcigpLGUub3B0aW9ucy52YWx1ZT10KSxlLl9vbGQ9dH0sX2lnbm9yZUNhc2U6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10LmRhdGFTb3VyY2UucmVhZGVyLm1vZGVsO24mJm4uZmllbGRzJiYoZT1uLmZpZWxkc1t0Lm9wdGlvbnMuZGF0YVRleHRGaWVsZF0sZSYmZS50eXBlJiZcInN0cmluZ1wiIT09ZS50eXBlJiYodC5vcHRpb25zLmlnbm9yZUNhc2U9ITEpKX0saXRlbXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bFswXS5jaGlsZHJlbn0sY3VycmVudDpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5fZm9jdXNlZC5hZGQobi5maWx0ZXJJbnB1dCkscj1uLl9vcHRpb25JRDtyZXR1cm4gZT09PXQ/bi5fY3VycmVudDoobi5fY3VycmVudCYmKG4uX2N1cnJlbnQucmVtb3ZlQ2xhc3MocCkucmVtb3ZlQXR0cihcImFyaWEtc2VsZWN0ZWRcIikucmVtb3ZlQXR0cihkKSxpLnJlbW92ZUF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIikpLGUmJihlLmFkZENsYXNzKHApLG4uX3Njcm9sbChlKSxyJiYoZS5hdHRyKFwiaWRcIixyKSxpLmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixyKSkpLG4uX2N1cnJlbnQ9ZSx0KX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm5zO28uZm4uZGVzdHJveS5jYWxsKGUpLGUuX3VuYmluZERhdGFTb3VyY2UoKSxlLnVsLm9mZih0KSxlLmxpc3Qub2ZmKHQpLGUuX3RvdWNoU2Nyb2xsZXImJmUuX3RvdWNoU2Nyb2xsZXIuZGVzdHJveSgpLGUucG9wdXAuZGVzdHJveSgpLGUuX2Zvcm0mJmUuX2Zvcm0ub2ZmKFwicmVzZXRcIixlLl9yZXNldEhhbmRsZXIpfSxkYXRhSXRlbTpmdW5jdGlvbihuKXt2YXIgaT10aGlzO3JldHVybiBuPT09dD9uPWkuc2VsZWN0ZWRJbmRleDpcIm51bWJlclwiIT10eXBlb2YgbiYmKG49ZShpLml0ZW1zKCkpLmluZGV4KG4pKSxpLl9kYXRhKClbbl19LF9hY2Nlc3NvcnM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5lbGVtZW50LG49ZS5vcHRpb25zLHI9aS5nZXR0ZXIsbz10LmF0dHIoaS5hdHRyKFwidGV4dC1maWVsZFwiKSksYT10LmF0dHIoaS5hdHRyKFwidmFsdWUtZmllbGRcIikpOyFuLmRhdGFUZXh0RmllbGQmJm8mJihuLmRhdGFUZXh0RmllbGQ9byksIW4uZGF0YVZhbHVlRmllbGQmJmEmJihuLmRhdGFWYWx1ZUZpZWxkPWEpLGUuX3RleHQ9cihuLmRhdGFUZXh0RmllbGQpLGUuX3ZhbHVlPXIobi5kYXRhVmFsdWVGaWVsZCl9LF9hcmlhOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLm9wdGlvbnMscj1uLl9mb2N1c2VkLmFkZChuLmZpbHRlcklucHV0KTtpLnN1Z2dlc3QhPT10JiZyLmF0dHIoXCJhcmlhLWF1dG9jb21wbGV0ZVwiLGkuc3VnZ2VzdD9cImJvdGhcIjpcImxpc3RcIiksZT1lP2UrXCIgXCIrbi51bFswXS5pZDpuLnVsWzBdLmlkLHIuYXR0cihcImFyaWEtb3duc1wiLGUpLG4udWwuYXR0cihcImFyaWEtbGl2ZVwiLGkuZmlsdGVyJiZcIm5vbmVcIiE9PWkuZmlsdGVyP1wicG9saXRlXCI6XCJvZmZcIil9LF9ibHVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9jaGFuZ2UoKSxlLmNsb3NlKCl9LF9jaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZSxuPXRoaXMsaT1uLnNlbGVjdGVkSW5kZXgscj1uLm9wdGlvbnMudmFsdWUsbz1uLnZhbHVlKCk7bi5faXNTZWxlY3QmJiFuLl9ib3VuZCYmciYmKG89ciksbyE9PW4uX29sZD9lPSEwOmkhPT10JiZpIT09bi5fb2xkSW5kZXgmJihlPSEwKSxlJiYobi5fb2xkPW8sbi5fb2xkSW5kZXg9aSxuLmVsZW1lbnQudHJpZ2dlcihoKSxuLnRyaWdnZXIoaCkpfSxfY2xpY2s6ZnVuY3Rpb24odCl7dC5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8dGhpcy5fYWNjZXB0KGUodC5jdXJyZW50VGFyZ2V0KSl9LF9kYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YVNvdXJjZS52aWV3KCl9LF9lbmFibGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLG49ZS5vcHRpb25zLGk9ZS5lbGVtZW50LmlzKFwiW2Rpc2FibGVkXVwiKTtuLmVuYWJsZSE9PXQmJihuLmVuYWJsZWQ9bi5lbmFibGUpLCFuLmVuYWJsZWR8fGk/ZS5lbmFibGUoITEpOmUucmVhZG9ubHkoZS5lbGVtZW50LmlzKFwiW3JlYWRvbmx5XVwiKSl9LF9mb2N1czpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9ITA7cmV0dXJuIG4ucG9wdXAudmlzaWJsZSgpJiZlJiZuLnRyaWdnZXIoXyx7aXRlbTplfSk/KG4uY2xvc2UoKSx0KToobi5fc2VsZWN0KGUpLG4uX3RyaWdnZXJDYXNjYWRlKGkpLG4uX2JsdXIoKSx0KX0sX2luZGV4OmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLHI9aS5fZGF0YSgpO2Zvcih0PTAsbj1yLmxlbmd0aDtuPnQ7dCsrKWlmKGkuX2RhdGFWYWx1ZShyW3RdKT09ZSlyZXR1cm4gdDtyZXR1cm4tMX0sX2RhdGFWYWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLl92YWx1ZShlKTtyZXR1cm4gbj09PXQmJihuPXRoaXMuX3RleHQoZSkpLG59LF9oZWlnaHQ6ZnVuY3Rpb24oZSl7aWYoZSl7dmFyIHQsbixpPXRoaXMscj1pLmxpc3Qsbz1pLm9wdGlvbnMuaGVpZ2h0LGE9aS5wb3B1cC52aXNpYmxlKCk7bj1yLmFkZChyLnBhcmVudChcIi5rLWFuaW1hdGlvbi1jb250YWluZXJcIikpLnNob3coKSxvPWkudWxbMF0uc2Nyb2xsSGVpZ2h0Pm8/bzpcImF1dG9cIixuLmhlaWdodChvKSxcImF1dG9cIiE9PW8mJih0PWkudWxbMF0ub2Zmc2V0VG9wLHQmJihvPXIuaGVpZ2h0KCktdCkpLGkudWwuaGVpZ2h0KG8pLGF8fG4uaGlkZSgpfX0sX2FkanVzdExpc3RXaWR0aDpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLmxpc3QsaT1uWzBdLnN0eWxlLndpZHRoLHI9dGhpcy53cmFwcGVyO2lmKG4uZGF0YShrKXx8IWkpcmV0dXJuIGU9d2luZG93LmdldENvbXB1dGVkU3R5bGU/d2luZG93LmdldENvbXB1dGVkU3R5bGUoclswXSxudWxsKTowLHQ9ZT9wYXJzZUZsb2F0KGUud2lkdGgpOnIub3V0ZXJXaWR0aCgpLGUmJlMubXNpZSYmKHQrPXBhcnNlRmxvYXQoZS5wYWRkaW5nTGVmdCkrcGFyc2VGbG9hdChlLnBhZGRpbmdSaWdodCkrcGFyc2VGbG9hdChlLmJvcmRlckxlZnRXaWR0aCkrcGFyc2VGbG9hdChlLmJvcmRlclJpZ2h0V2lkdGgpKSxpPVwiYm9yZGVyLWJveFwiIT09bi5jc3MoXCJib3gtc2l6aW5nXCIpP3QtKG4ub3V0ZXJXaWR0aCgpLW4ud2lkdGgoKSk6dCxuLmNzcyh7Zm9udEZhbWlseTpyLmNzcyhcImZvbnQtZmFtaWx5XCIpLHdpZHRoOml9KS5kYXRhKGssaSksITB9LF9vcGVuSGFuZGxlcjpmdW5jdGlvbihlKXt0aGlzLl9hZGp1c3RMaXN0V2lkdGgoKSx0aGlzLnRyaWdnZXIobSk/ZS5wcmV2ZW50RGVmYXVsdCgpOih0aGlzLl9mb2N1c2VkLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApLHRoaXMudWwuYXR0cihcImFyaWEtaGlkZGVuXCIsITEpKX0sX2Nsb3NlSGFuZGxlcjpmdW5jdGlvbihlKXt0aGlzLnRyaWdnZXIodik/ZS5wcmV2ZW50RGVmYXVsdCgpOih0aGlzLl9mb2N1c2VkLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITEpLHRoaXMudWwuYXR0cihcImFyaWEtaGlkZGVuXCIsITApKX0sX2ZpcnN0T3BlbjpmdW5jdGlvbigpe3RoaXMuX2hlaWdodCh0aGlzLl9kYXRhKCkubGVuZ3RoKX0sX3BvcHVwOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLnBvcHVwPW5ldyByLlBvcHVwKGUubGlzdCx4KHt9LGUub3B0aW9ucy5wb3B1cCx7YW5jaG9yOmUud3JhcHBlcixvcGVuOkMoZS5fb3BlbkhhbmRsZXIsZSksY2xvc2U6QyhlLl9jbG9zZUhhbmRsZXIsZSksYW5pbWF0aW9uOmUub3B0aW9ucy5hbmltYXRpb24saXNSdGw6cy5pc1J0bChlLndyYXBwZXIpfSkpLGUucG9wdXAub25lKG0sQyhlLl9maXJzdE9wZW4sZSkpLGUuX3RvdWNoU2Nyb2xsZXI9aS50b3VjaFNjcm9sbGVyKGUucG9wdXAuZWxlbWVudCl9LF9tYWtlVW5zZWxlY3RhYmxlOmZ1bmN0aW9uKCl7VCYmdGhpcy5saXN0LmZpbmQoXCIqXCIpLm5vdChcIi5rLXRleHRib3hcIikuYXR0cihcInVuc2VsZWN0YWJsZVwiLFwib25cIil9LF90b2dnbGVIb3ZlcjpmdW5jdGlvbih0KXtlKHQuY3VycmVudFRhcmdldCkudG9nZ2xlQ2xhc3MoZixcIm1vdXNlZW50ZXJcIj09PXQudHlwZSl9LF90b2dnbGU6ZnVuY3Rpb24oZSxuKXt2YXIgaT10aGlzLHI9cy50b3VjaCYmcy5NU1BvaW50ZXJzJiZzLnBvaW50ZXJzO2U9ZSE9PXQ/ZTohaS5wb3B1cC52aXNpYmxlKCksbnx8cnx8aS5fZm9jdXNlZFswXT09PWMoKXx8aS5fZm9jdXNlZC5mb2N1cygpLGlbZT9tOnZdKCl9LF9zY3JvbGw6ZnVuY3Rpb24oZSl7aWYoZSl7ZVswXSYmKGU9ZVswXSk7dmFyIHQsbixpPXRoaXMudWxbMF0scj1lLm9mZnNldFRvcCxvPWUub2Zmc2V0SGVpZ2h0LGE9aS5zY3JvbGxUb3Ascz1pLmNsaWVudEhlaWdodCxsPXIrbyxjPXRoaXMuX3RvdWNoU2Nyb2xsZXI7Yz8odD1jLmRpbWVuc2lvbnMueSx0LmVuYWJsZWQmJnI+dC5zaXplJiYocj1yLXQuc2l6ZStvKzQsYy5zY3JvbGxUbygwLC1yKSkpOihuPXRoaXMuaGVhZGVyP3RoaXMuaGVhZGVyLm91dGVySGVpZ2h0KCk6MCxuKz10aGlzLmZpbHRlcklucHV0P3RoaXMuZmlsdGVySW5wdXQub3V0ZXJIZWlnaHQoKTowLGkuc2Nyb2xsVG9wPWE+cj9yLW46bD5hK3M/bC1zLW46YSl9fSxfdGVtcGxhdGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLG49dC50ZW1wbGF0ZSxyPXQuZGF0YVNvdXJjZTtlLl9pc1NlbGVjdCYmZS5lbGVtZW50WzBdLmxlbmd0aCYmKHJ8fCh0LmRhdGFUZXh0RmllbGQ9dC5kYXRhVGV4dEZpZWxkfHxcInRleHRcIix0LmRhdGFWYWx1ZUZpZWxkPXQuZGF0YVZhbHVlRmllbGR8fFwidmFsdWVcIikpLG4/KG49aS50ZW1wbGF0ZShuKSxlLnRlbXBsYXRlPWZ1bmN0aW9uKGUpe3JldHVybic8bGkgdGFiaW5kZXg9XCItMVwiIHJvbGU9XCJvcHRpb25cIiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1pdGVtXCI+JytuKGUpK1wiPC9saT5cIn0pOmUudGVtcGxhdGU9aS50ZW1wbGF0ZSgnPGxpIHRhYmluZGV4PVwiLTFcIiByb2xlPVwib3B0aW9uXCIgdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstaXRlbVwiPiR7JytpLmV4cHIodC5kYXRhVGV4dEZpZWxkLFwiZGF0YVwiKStcIn08L2xpPlwiLHt1c2VXaXRoQmxvY2s6ITF9KX0sX3RyaWdnZXJDYXNjYWRlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LnZhbHVlKCk7KCF0Ll9ib3VuZCYmbnx8dC5fb2xkIT09bikmJnQudHJpZ2dlcihcImNhc2NhZGVcIix7dXNlclRyaWdnZXJlZDplfSl9LF91bmJpbmREYXRhU291cmNlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLmRhdGFTb3VyY2UudW5iaW5kKGgsZS5fcmVmcmVzaEhhbmRsZXIpLnVuYmluZCh3LGUuX3Byb2dyZXNzSGFuZGxlcikudW5iaW5kKGIsZS5fcmVxdWVzdEVuZEhhbmRsZXIpLnVuYmluZChcImVycm9yXCIsZS5fZXJyb3JIYW5kbGVyKX19KTt4KEUse2luQXJyYXk6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dC5jaGlsZHJlbjtpZighZXx8ZS5wYXJlbnROb2RlIT09dClyZXR1cm4tMTtmb3Iobj0wLGk9ci5sZW5ndGg7aT5uO24rKylpZihlPT09cltuXSlyZXR1cm4gbjtyZXR1cm4tMX19KSxpLnVpLkxpc3Q9RSxyLlNlbGVjdD1FLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe0UuZm4uaW5pdC5jYWxsKHRoaXMsZSx0KSx0aGlzLl9pbml0aWFsPXRoaXMuZWxlbWVudC52YWwoKX0sc2V0RGF0YVNvdXJjZTpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZT1lLHRoaXMuX2RhdGFTb3VyY2UoKSx0aGlzLl9ib3VuZD0hMSx0aGlzLm9wdGlvbnMuYXV0b0JpbmQmJnRoaXMuZGF0YVNvdXJjZS5mZXRjaCgpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMucG9wdXAuY2xvc2UoKX0sc2VsZWN0OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGU9PT10P24uc2VsZWN0ZWRJbmRleDoobi5fc2VsZWN0KGUpLG4uX3RyaWdnZXJDYXNjYWRlKCksbi5fb2xkPW4uX2FjY2Vzc29yKCksbi5fb2xkSW5kZXg9bi5zZWxlY3RlZEluZGV4LHQpfSxzZWFyY2g6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhO2U9XCJzdHJpbmdcIj09dHlwZW9mIGU/ZTp0aGlzLnRleHQoKSx0PXRoaXMsbj1lLmxlbmd0aCxpPXQub3B0aW9ucyxyPWkuaWdub3JlQ2FzZSxvPWkuZmlsdGVyLGE9aS5kYXRhVGV4dEZpZWxkLGNsZWFyVGltZW91dCh0Ll90eXBpbmcpLCghbnx8bj49aS5taW5MZW5ndGgpJiYodC5fc3RhdGU9XCJmaWx0ZXJcIixcIm5vbmVcIj09PW8/dC5fZmlsdGVyKGUpOih0Ll9vcGVuPSEwLHQuX2ZpbHRlclNvdXJjZSh7dmFsdWU6cj9lLnRvTG93ZXJDYXNlKCk6ZSxmaWVsZDphLG9wZXJhdG9yOm8saWdub3JlQ2FzZTpyfSkpKX0sX2FjY2Vzc29yOmZ1bmN0aW9uKGUsbil7dmFyIGkscj10aGlzLmVsZW1lbnRbMF0sbz10aGlzLl9pc1NlbGVjdCxhPXIuc2VsZWN0ZWRJbmRleDtyZXR1cm4gZT09PXQ/KG8/YT4tMSYmKGk9ci5vcHRpb25zW2FdLGkmJihlPWkudmFsdWUpKTplPXIudmFsdWUsZSk6KG8/KGE+LTEmJnIub3B0aW9uc1thXS5yZW1vdmVBdHRyaWJ1dGUoeSksci5zZWxlY3RlZEluZGV4PW4saT1yLm9wdGlvbnNbbl0saSYmaS5zZXRBdHRyaWJ1dGUoeSx5KSk6ci52YWx1ZT1lLHQpfSxfaGlkZUJ1c3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2NsZWFyVGltZW91dChlLl9idXN5KSxlLl9hcnJvdy5yZW1vdmVDbGFzcyhnKSxlLl9mb2N1c2VkLmF0dHIoXCJhcmlhLWJ1c3lcIiwhMSksZS5fYnVzeT1udWxsfSxfc2hvd0J1c3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3JlcXVlc3Q9ITAsZS5fYnVzeXx8KGUuX2J1c3k9c2V0VGltZW91dChmdW5jdGlvbigpe2UuX2Fycm93JiYoZS5fZm9jdXNlZC5hdHRyKFwiYXJpYS1idXN5XCIsITApLGUuX2Fycm93LmFkZENsYXNzKGcpKX0sMTAwKSl9LF9yZXF1ZXN0RW5kOmZ1bmN0aW9uKCl7dGhpcy5fcmVxdWVzdD0hMX0sX2RhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMscj1uLmVsZW1lbnQsbz1uLm9wdGlvbnMsYT1vLmRhdGFTb3VyY2V8fHt9O2E9ZS5pc0FycmF5KGEpP3tkYXRhOmF9OmEsbi5faXNTZWxlY3QmJih0PXJbMF0uc2VsZWN0ZWRJbmRleCx0Pi0xJiYoby5pbmRleD10KSxhLnNlbGVjdD1yLGEuZmllbGRzPVt7ZmllbGQ6by5kYXRhVGV4dEZpZWxkfSx7ZmllbGQ6by5kYXRhVmFsdWVGaWVsZH1dKSxuLmRhdGFTb3VyY2UmJm4uX3JlZnJlc2hIYW5kbGVyP24uX3VuYmluZERhdGFTb3VyY2UoKToobi5fcmVmcmVzaEhhbmRsZXI9QyhuLnJlZnJlc2gsbiksbi5fcHJvZ3Jlc3NIYW5kbGVyPUMobi5fc2hvd0J1c3ksbiksbi5fcmVxdWVzdEVuZEhhbmRsZXI9QyhuLl9yZXF1ZXN0RW5kLG4pLG4uX2Vycm9ySGFuZGxlcj1DKG4uX2hpZGVCdXN5LG4pKSxuLmRhdGFTb3VyY2U9aS5kYXRhLkRhdGFTb3VyY2UuY3JlYXRlKGEpLmJpbmQoaCxuLl9yZWZyZXNoSGFuZGxlcikuYmluZCh3LG4uX3Byb2dyZXNzSGFuZGxlcikuYmluZChiLG4uX3JlcXVlc3RFbmRIYW5kbGVyKS5iaW5kKFwiZXJyb3JcIixuLl9lcnJvckhhbmRsZXIpfSxfZ2V0OmZ1bmN0aW9uKHQpe3ZhciBuLGkscj10aGlzLG89ci5fZGF0YSgpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQpZm9yKG49MCxpPW8ubGVuZ3RoO2k+bjtuKyspaWYodChvW25dKSl7dD1uO2JyZWFrfWlmKFwibnVtYmVyXCI9PXR5cGVvZiB0KXtpZigwPnQpcmV0dXJuIGUoKTt0PWUoci51bFswXS5jaGlsZHJlblt0XSl9cmV0dXJuIHQmJnQubm9kZVR5cGUmJih0PWUodCkpLHR9LF9tb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLHI9ZS5rZXlDb2RlLG89aS51bFswXSxzPWkucG9wdXAudmlzaWJsZSgpP1wiX3NlbGVjdFwiOlwiX2FjY2VwdFwiLGw9aS5fY3VycmVudCxjPXI9PT1hLkRPV047aWYocj09PWEuVVB8fGMpe2lmKGUuYWx0S2V5KWkudG9nZ2xlKGMpO2Vsc2V7aWYodD1vLmZpcnN0Q2hpbGQsIXQmJiFpLl9hY2Nlc3NvcigpJiZcImZpbHRlclwiIT09aS5fc3RhdGUpcmV0dXJuIGkuX2ZldGNofHwoaS5kYXRhU291cmNlLm9uZShoLGZ1bmN0aW9uKCl7aS5fbW92ZShlKSxpLl9mZXRjaD0hMX0pLGkuX2ZldGNoPSEwLGkuX2ZpbHRlclNvdXJjZSgpKSxlLnByZXZlbnREZWZhdWx0KCksITA7Yz8oIWx8fC0xPT09aS5zZWxlY3RlZEluZGV4JiYhaS52YWx1ZSgpJiZsWzBdPT09dD9sPXQ6KGw9bFswXS5uZXh0U2libGluZyxsfHx0IT09by5sYXN0Q2hpbGR8fChsPXQpKSxpW3NdKGwpKToobD1sP2xbMF0ucHJldmlvdXNTaWJsaW5nOm8ubGFzdENoaWxkLGx8fHQhPT1vLmxhc3RDaGlsZHx8KGw9dCksaVtzXShsKSl9ZS5wcmV2ZW50RGVmYXVsdCgpLG49ITB9ZWxzZSByPT09YS5FTlRFUnx8cj09PWEuVEFCPyhpLnBvcHVwLnZpc2libGUoKSYmZS5wcmV2ZW50RGVmYXVsdCgpLGkucG9wdXAudmlzaWJsZSgpfHxsJiZsLmhhc0NsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiKXx8KGw9bnVsbCksaS5fYWNjZXB0KGwsciksbj0hMCk6cj09PWEuRVNDJiYoaS5wb3B1cC52aXNpYmxlKCkmJmUucHJldmVudERlZmF1bHQoKSxpLmNsb3NlKCksbj0hMCk7cmV0dXJuIG59LF9zZWxlY3RJdGVtOmZ1bmN0aW9uKCl7dmFyIGUsbixpPXRoaXMscj1pLl9ib3VuZD09PXQsbz1pLm9wdGlvbnM7ZT1pLl9pc1NlbGVjdCYmIWkuX2luaXRpYWwmJiFvLnZhbHVlJiZvLmluZGV4JiYhaS5fYm91bmQsZXx8KG49aS5fc2VsZWN0ZWRWYWx1ZXx8ciYmby52YWx1ZXx8aS5fYWNjZXNzb3IoKSksbj9pLnZhbHVlKG4pOnImJmkuc2VsZWN0KG8uaW5kZXgpfSxfZmV0Y2hJdGVtczpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi51bFswXS5maXJzdENoaWxkO3JldHVybiBuLl9yZXF1ZXN0PyEwOm4uX2JvdW5kfHxuLl9mZXRjaHx8aT90Om4ub3B0aW9ucy5jYXNjYWRlRnJvbT8haToobi5kYXRhU291cmNlLm9uZShoLGZ1bmN0aW9uKCl7bi5fb2xkPXQsbi52YWx1ZShlKSxuLl9mZXRjaD0hMX0pLG4uX2ZldGNoPSEwLG4uZGF0YVNvdXJjZS5mZXRjaCgpLCEwKX0sX29wdGlvbnM6ZnVuY3Rpb24oZSxuKXt2YXIgaSxyLG8sYSxzPXRoaXMsYz1zLmVsZW1lbnQsZD1lLmxlbmd0aCx1PVwiXCIsaD0wO2ZvcihuJiYoaD0xLHU9bik7ZD5oO2grKylpPVwiPG9wdGlvblwiLHI9ZVtoXSxvPXMuX3RleHQociksYT1zLl92YWx1ZShyKSxhIT09dCYmKGErPVwiXCIsLTEhPT1hLmluZGV4T2YoJ1wiJykmJihhPWEucmVwbGFjZShELFwiJnF1b3Q7XCIpKSxpKz0nIHZhbHVlPVwiJythKydcIicpLGkrPVwiPlwiLG8hPT10JiYoaSs9bChvKSksaSs9XCI8L29wdGlvbj5cIix1Kz1pO2MuaHRtbCh1KX0sX3Jlc2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudCxpPW4uYXR0cihcImZvcm1cIikscj1pP2UoXCIjXCIraSk6bi5jbG9zZXN0KFwiZm9ybVwiKTtyWzBdJiYodC5fcmVzZXRIYW5kbGVyPWZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe3QudmFsdWUodC5faW5pdGlhbCl9KX0sdC5fZm9ybT1yLm9uKFwicmVzZXRcIix0Ll9yZXNldEhhbmRsZXIpKX0sX2Nhc2NhZGU6ZnVuY3Rpb24oKXt2YXIgdCxpLHIsbyxhLHM9dGhpcyxsPXMub3B0aW9ucyxjPWwuY2FzY2FkZUZyb207aWYoYyl7aWYocy5fc2VsZWN0ZWRWYWx1ZT1sLnZhbHVlfHxzLl9hY2Nlc3NvcigpLGk9ZShcIiNcIitjKSx0PWkuZGF0YShcImtlbmRvXCIrbC5uYW1lKSx0fHwodD1pLmRhdGEoXCJrZW5kb1wiK0FbbC5uYW1lXSkpLCF0KXJldHVybjtsLmF1dG9CaW5kPSExLG89bC5jYXNjYWRlRnJvbUZpZWxkfHx0Lm9wdGlvbnMuZGF0YVZhbHVlRmllbGQsYT1mdW5jdGlvbigpe3MuZGF0YVNvdXJjZS51bmJpbmQoaCxhKTt2YXIgZT1zLl9zZWxlY3RlZFZhbHVlfHxzLnZhbHVlKCk7cy5fdXNlclRyaWdnZXJlZD9zLl9jbGVhclNlbGVjdGlvbih0LCEwKTplPyhzLnZhbHVlKGUpLHMuZGF0YVNvdXJjZS52aWV3KClbMF0mJi0xIT09cy5zZWxlY3RlZEluZGV4fHxzLl9jbGVhclNlbGVjdGlvbih0LCEwKSk6cy5zZWxlY3QobC5pbmRleCkscy5lbmFibGUoKSxzLl90cmlnZ2VyQ2FzY2FkZShzLl91c2VyVHJpZ2dlcmVkKSxzLl91c2VyVHJpZ2dlcmVkPSExfSxyPWZ1bmN0aW9uKCl7dmFyIGUsaSxyLGw9dC5kYXRhSXRlbSgpLGM9bD90Ll92YWx1ZShsKTpudWxsO2N8fDA9PT1jPyhlPXMuZGF0YVNvdXJjZS5maWx0ZXIoKXx8e30sbihlLG8pLGk9ZS5maWx0ZXJzfHxbXSxpLnB1c2goe2ZpZWxkOm8sb3BlcmF0b3I6XCJlcVwiLHZhbHVlOmN9KSxyPWZ1bmN0aW9uKCl7cy51bmJpbmQoXCJkYXRhQm91bmRcIixyKSxhLmFwcGx5KHMsYXJndW1lbnRzKX0scy5maXJzdChcImRhdGFCb3VuZFwiLHIpLHMuZGF0YVNvdXJjZS5maWx0ZXIoaSkpOihzLmVuYWJsZSghMSkscy5fY2xlYXJTZWxlY3Rpb24odCkscy5fdHJpZ2dlckNhc2NhZGUocy5fdXNlclRyaWdnZXJlZCkscy5fdXNlclRyaWdnZXJlZD0hMSl9LHQuZmlyc3QoXCJjYXNjYWRlXCIsZnVuY3Rpb24oZSl7cy5fdXNlclRyaWdnZXJlZD1lLnVzZXJUcmlnZ2VyZWQscigpfSksdC5fYm91bmQ/cigpOnQudmFsdWUoKXx8cy5lbmFibGUoITEpfX19KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsdCxuLGkpe3ZhciByLG89ZS5nZXRGdWxsWWVhcigpLGE9dC5nZXRGdWxsWWVhcigpLHM9bi5nZXRGdWxsWWVhcigpO3JldHVybiBvLT1vJWkscj1vKyhpLTEpLGE+byYmKG89YSkscj5zJiYocj1zKSxvK1wiLVwiK3J9ZnVuY3Rpb24gaShlKXtmb3IodmFyIHQsbj0wLGk9ZS5taW4scj1lLm1heCxvPWUuc3RhcnQsYT1lLnNldHRlcixsPWUuYnVpbGQsYz1lLmNlbGxzfHwxMixkPWUucGVyUm93fHw0LHU9ZS5jb250ZW50fHxQLGg9ZS5lbXB0eXx8SSxwPWUuaHRtbHx8Jzx0YWJsZSB0YWJpbmRleD1cIjBcIiByb2xlPVwiZ3JpZFwiIGNsYXNzPVwiay1jb250ZW50IGstbWV0YS12aWV3XCIgY2VsbHNwYWNpbmc9XCIwXCI+PHRib2R5Pjx0ciByb2xlPVwicm93XCI+JztjPm47bisrKW4+MCYmbiVkPT09MCYmKHArPSc8L3RyPjx0ciByb2xlPVwicm93XCI+JyksdD1sKG8sbikscCs9cyhvLGkscik/dSh0KTpoKHQpLGEobywxKTtyZXR1cm4gcCtcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwifWZ1bmN0aW9uIHIoZSx0LG4pe3ZhciBpPWUuZ2V0RnVsbFllYXIoKSxyPXQuZ2V0RnVsbFllYXIoKSxvPXIsYT0wO3JldHVybiBuJiYoci09ciVuLG89ci1yJW4rbi0xKSxpPm8/YT0xOnI+aSYmKGE9LTEpLGF9ZnVuY3Rpb24gbygpe3ZhciBlPW5ldyBmdDtyZXR1cm4gbmV3IGZ0KGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCksZS5nZXREYXRlKCkpfWZ1bmN0aW9uIGEoZSx0LG4pe3ZhciBpPW8oKTtyZXR1cm4gZSYmKGk9bmV3IGZ0KCtlKSksdD5pP2k9bmV3IGZ0KCt0KTppPm4mJihpPW5ldyBmdCgrbikpLGl9ZnVuY3Rpb24gcyhlLHQsbil7cmV0dXJuK2U+PSt0JiYrbj49K2V9ZnVuY3Rpb24gbChlLHQpe3JldHVybiBlLnNsaWNlKHQpLmNvbmNhdChlLnNsaWNlKDAsdCkpfWZ1bmN0aW9uIGMoZSx0LG4pe3Q9dCBpbnN0YW5jZW9mIGZ0P3QuZ2V0RnVsbFllYXIoKTplLmdldEZ1bGxZZWFyKCkrbip0LGUuc2V0RnVsbFllYXIodCl9ZnVuY3Rpb24gZCh0KXtlKHRoaXMpLnRvZ2dsZUNsYXNzKCQsaXQuaW5kZXhPZih0LnR5cGUpPi0xfHx0LnR5cGU9PXR0KX1mdW5jdGlvbiB1KGUpe2UucHJldmVudERlZmF1bHQoKX1mdW5jdGlvbiBoKGUpe3JldHVybiBBKGUpLmNhbGVuZGFycy5zdGFuZGFyZH1mdW5jdGlvbiBwKGUpe3ZhciBuPWd0W2Uuc3RhcnRdLGk9Z3RbZS5kZXB0aF0scj1BKGUuY3VsdHVyZSk7ZS5mb3JtYXQ9VChlLmZvcm1hdHx8ci5jYWxlbmRhcnMuc3RhbmRhcmQucGF0dGVybnMuZCksaXNOYU4obikmJihuPTAsZS5zdGFydD1VKSwoaT09PXR8fGk+bikmJihlLmRlcHRoPVUpLGUuZGF0ZXN8fChlLmRhdGVzPVtdKX1mdW5jdGlvbiBmKGUpe0YmJmUuZmluZChcIipcIikuYXR0cihcInVuc2VsZWN0YWJsZVwiLFwib25cIil9ZnVuY3Rpb24gZyhlLHQpe2Zvcih2YXIgbj0wLGk9dC5sZW5ndGg7aT5uO24rKylpZihlPT09K3Rbbl0pcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gbShlLHQpe3JldHVybiBlP2UuZ2V0RnVsbFllYXIoKT09PXQuZ2V0RnVsbFllYXIoKSYmZS5nZXRNb250aCgpPT09dC5nZXRNb250aCgpJiZlLmdldERhdGUoKT09PXQuZ2V0RGF0ZSgpOiExfWZ1bmN0aW9uIHYoZSx0KXtyZXR1cm4gZT9lLmdldEZ1bGxZZWFyKCk9PT10LmdldEZ1bGxZZWFyKCkmJmUuZ2V0TW9udGgoKT09PXQuZ2V0TW9udGgoKTohMX12YXIgXyx5PXdpbmRvdy5rZW5kbyx3PXkuc3VwcG9ydCxiPXkudWksaz1iLldpZGdldCx4PXkua2V5cyxDPXkucGFyc2VEYXRlLFM9eS5kYXRlLmFkanVzdERTVCxUPXkuX2V4dHJhY3RGb3JtYXQsRD15LnRlbXBsYXRlLEE9eS5nZXRDdWx0dXJlLEU9eS5zdXBwb3J0LnRyYW5zaXRpb25zLE09RT9FLmNzcytcInRyYW5zZm9ybS1vcmlnaW5cIjpcIlwiLFA9RCgnPHRkIz1kYXRhLmNzc0NsYXNzIyByb2xlPVwiZ3JpZGNlbGxcIj48YSB0YWJpbmRleD1cIi0xXCIgY2xhc3M9XCJrLWxpbmtcIiBocmVmPVwiXFxcXCNcIiBkYXRhLSM9ZGF0YS5ucyN2YWx1ZT1cIiM9ZGF0YS5kYXRlU3RyaW5nI1wiPiM9ZGF0YS52YWx1ZSM8L2E+PC90ZD4nLHt1c2VXaXRoQmxvY2s6ITF9KSxJPUQoJzx0ZCByb2xlPVwiZ3JpZGNlbGxcIj4mbmJzcDs8L3RkPicse3VzZVdpdGhCbG9jazohMX0pLHo9eS5zdXBwb3J0LmJyb3dzZXIsRj16Lm1zaWUmJjk+ei52ZXJzaW9uLFI9XCIua2VuZG9DYWxlbmRhclwiLEI9XCJjbGlja1wiK1IsTD1cImtleWRvd25cIitSLE89XCJpZFwiLEg9XCJtaW5cIixOPVwibGVmdFwiLFY9XCJzbGlkZUluXCIsVT1cIm1vbnRoXCIsVz1cImNlbnR1cnlcIixqPVwiY2hhbmdlXCIsRz1cIm5hdmlnYXRlXCIscT1cInZhbHVlXCIsJD1cImstc3RhdGUtaG92ZXJcIixZPVwiay1zdGF0ZS1kaXNhYmxlZFwiLEs9XCJrLXN0YXRlLWZvY3VzZWRcIixRPVwiay1vdGhlci1tb250aFwiLFg9JyBjbGFzcz1cIicrUSsnXCInLEo9XCJrLW5hdi10b2RheVwiLFo9XCJ0ZDpoYXMoLmstbGluaylcIixldD1cImJsdXJcIitSLHR0PVwiZm9jdXNcIixudD10dCtSLGl0PXcudG91Y2g/XCJ0b3VjaHN0YXJ0XCI6XCJtb3VzZWVudGVyXCIscnQ9dy50b3VjaD9cInRvdWNoc3RhcnRcIitSOlwibW91c2VlbnRlclwiK1Isb3Q9dy50b3VjaD9cInRvdWNoZW5kXCIrUitcIiB0b3VjaG1vdmVcIitSOlwibW91c2VsZWF2ZVwiK1IsYXQ9NmU0LHN0PTg2NGU1LGx0PVwiX3ByZXZBcnJvd1wiLGN0PVwiX25leHRBcnJvd1wiLGR0PVwiYXJpYS1kaXNhYmxlZFwiLHV0PVwiYXJpYS1zZWxlY3RlZFwiLGh0PWUucHJveHkscHQ9ZS5leHRlbmQsZnQ9RGF0ZSxndD17bW9udGg6MCx5ZWFyOjEsZGVjYWRlOjIsY2VudHVyeTozfSxtdD1rLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpLHIsbz10aGlzO2suZm4uaW5pdC5jYWxsKG8sdCxuKSx0PW8ud3JhcHBlcj1vLmVsZW1lbnQsbj1vLm9wdGlvbnMsbi51cmw9d2luZG93LnVuZXNjYXBlKG4udXJsKSxvLl90ZW1wbGF0ZXMoKSxvLl9oZWFkZXIoKSxvLl9mb290ZXIoby5mb290ZXIpLHI9dC5hZGRDbGFzcyhcImstd2lkZ2V0IGstY2FsZW5kYXJcIikub24ocnQrXCIgXCIrb3QsWixkKS5vbihMLFwidGFibGUuay1jb250ZW50XCIsaHQoby5fbW92ZSxvKSkub24oQixaLGZ1bmN0aW9uKHQpe3ZhciBuPXQuY3VycmVudFRhcmdldC5maXJzdENoaWxkOy0xIT1uLmhyZWYuaW5kZXhPZihcIiNcIikmJnQucHJldmVudERlZmF1bHQoKSxvLl9jbGljayhlKG4pKX0pLm9uKFwibW91c2V1cFwiK1IsXCJ0YWJsZS5rLWNvbnRlbnQsIC5rLWZvb3RlclwiLGZ1bmN0aW9uKCl7by5fZm9jdXNWaWV3KG8ub3B0aW9ucy5mb2N1c09uTmF2IT09ITEpfSkuYXR0cihPKSxyJiYoby5fY2VsbElEPXIrXCJfY2VsbF9zZWxlY3RlZFwiKSxwKG4pLGk9QyhuLnZhbHVlLG4uZm9ybWF0LG4uY3VsdHVyZSksby5faW5kZXg9Z3Rbbi5zdGFydF0sby5fY3VycmVudD1uZXcgZnQoK2EoaSxuLm1pbixuLm1heCkpLG8uX2FkZENsYXNzUHJveHk9ZnVuY3Rpb24oKXtvLl9hY3RpdmU9ITAsby5fY2VsbC5hZGRDbGFzcyhLKX0sby5fcmVtb3ZlQ2xhc3NQcm94eT1mdW5jdGlvbigpe28uX2FjdGl2ZT0hMSxvLl9jZWxsLnJlbW92ZUNsYXNzKEspfSxvLnZhbHVlKGkpLHkubm90aWZ5KG8pfSxvcHRpb25zOntuYW1lOlwiQ2FsZW5kYXJcIix2YWx1ZTpudWxsLG1pbjpuZXcgZnQoMTkwMCwwLDEpLG1heDpuZXcgZnQoMjA5OSwxMSwzMSksZGF0ZXM6W10sdXJsOlwiXCIsY3VsdHVyZTpcIlwiLGZvb3RlcjpcIlwiLGZvcm1hdDpcIlwiLG1vbnRoOnt9LHN0YXJ0OlUsZGVwdGg6VSxhbmltYXRpb246e2hvcml6b250YWw6e2VmZmVjdHM6VixyZXZlcnNlOiEwLGR1cmF0aW9uOjUwMCxkaXZpc29yOjJ9LHZlcnRpY2FsOntlZmZlY3RzOlwiem9vbUluXCIsZHVyYXRpb246NDAwfX19LGV2ZW50czpbaixHXSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cChlKSxlLmRhdGVzWzBdfHwoZS5kYXRlcz10Lm9wdGlvbnMuZGF0ZXMpLGsuZm4uc2V0T3B0aW9ucy5jYWxsKHQsZSksdC5fdGVtcGxhdGVzKCksdC5fZm9vdGVyKHQuZm9vdGVyKSx0Ll9pbmRleD1ndFt0Lm9wdGlvbnMuc3RhcnRdLHQubmF2aWdhdGUoKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl90b2RheTtlLmVsZW1lbnQub2ZmKFIpLGUuX3RpdGxlLm9mZihSKSxlW2x0XS5vZmYoUiksZVtjdF0ub2ZmKFIpLHkuZGVzdHJveShlLl90YWJsZSksdCYmeS5kZXN0cm95KHQub2ZmKFIpKSxrLmZuLmRlc3Ryb3kuY2FsbChlKX0sY3VycmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50fSx2aWV3OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZpZXd9LGZvY3VzOmZ1bmN0aW9uKGUpe2U9ZXx8dGhpcy5fdGFibGUsdGhpcy5fYmluZFRhYmxlKGUpLGUuZm9jdXMoKX0sbWluOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vcHRpb24oSCxlKX0sbWF4OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vcHRpb24oXCJtYXhcIixlKX0sbmF2aWdhdGVUb1Bhc3Q6ZnVuY3Rpb24oKXt0aGlzLl9uYXZpZ2F0ZShsdCwtMSl9LG5hdmlnYXRlVG9GdXR1cmU6ZnVuY3Rpb24oKXt0aGlzLl9uYXZpZ2F0ZShjdCwxKX0sbmF2aWdhdGVVcDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl9pbmRleDtlLl90aXRsZS5oYXNDbGFzcyhZKXx8ZS5uYXZpZ2F0ZShlLl9jdXJyZW50LCsrdCl9LG5hdmlnYXRlRG93bjpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5faW5kZXgscj1uLm9wdGlvbnMuZGVwdGg7aWYoZSlyZXR1cm4gaT09PWd0W3JdPygrbi5fdmFsdWUhPStlJiYobi52YWx1ZShlKSxuLnRyaWdnZXIoaikpLHQpOihuLm5hdmlnYXRlKGUsLS1pKSx0KX0sbmF2aWdhdGU6ZnVuY3Rpb24obixpKXtpPWlzTmFOKGkpP2d0W2ldOmk7dmFyIHIsbyxzLGwsYz10aGlzLGQ9Yy5vcHRpb25zLHU9ZC5jdWx0dXJlLGg9ZC5taW4scD1kLm1heCxnPWMuX3RpdGxlLG09Yy5fdGFibGUsdj1jLl9vbGRUYWJsZSx5PWMuX3ZhbHVlLHc9Yy5fY3VycmVudCxiPW4mJituPit3LGs9aSE9PXQmJmkhPT1jLl9pbmRleDtufHwobj13KSxjLl9jdXJyZW50PW49bmV3IGZ0KCthKG4saCxwKSksaT09PXQ/aT1jLl9pbmRleDpjLl9pbmRleD1pLGMuX3ZpZXc9bz1fLnZpZXdzW2ldLHM9by5jb21wYXJlLGw9aT09PWd0W1ddLGcudG9nZ2xlQ2xhc3MoWSxsKS5hdHRyKGR0LGwpLGw9cyhuLGgpPDEsY1tsdF0udG9nZ2xlQ2xhc3MoWSxsKS5hdHRyKGR0LGwpLGw9cyhuLHApPi0xLGNbY3RdLnRvZ2dsZUNsYXNzKFksbCkuYXR0cihkdCxsKSxtJiZ2JiZ2LmRhdGEoXCJhbmltYXRpbmdcIikmJih2LmtlbmRvU3RvcCghMCwhMCksbS5rZW5kb1N0b3AoITAsITApKSxjLl9vbGRUYWJsZT1tLCghbXx8Yy5fY2hhbmdlVmlldykmJihnLmh0bWwoby50aXRsZShuLGgscCx1KSksYy5fdGFibGU9cj1lKG8uY29udGVudChwdCh7bWluOmgsbWF4OnAsZGF0ZTpuLHVybDpkLnVybCxkYXRlczpkLmRhdGVzLGZvcm1hdDpkLmZvcm1hdCxjdWx0dXJlOnV9LGNbby5uYW1lXSkpKSxmKHIpLGMuX2FuaW1hdGUoe2Zyb206bSx0bzpyLHZlcnRpY2FsOmssZnV0dXJlOmJ9KSxjLl9mb2N1cyhuKSxjLnRyaWdnZXIoRykpLGk9PT1ndFtkLmRlcHRoXSYmeSYmYy5fY2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIsby50b0RhdGVTdHJpbmcoeSkpLGMuX2NsYXNzKEssby50b0RhdGVTdHJpbmcobikpLCFtJiZjLl9jZWxsJiZjLl9jZWxsLnJlbW92ZUNsYXNzKEspLGMuX2NoYW5nZVZpZXc9ITB9LHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLl92aWV3LHI9bi5vcHRpb25zLG89bi5fdmlldyxhPXIubWluLGw9ci5tYXg7cmV0dXJuIGU9PT10P24uX3ZhbHVlOihlPUMoZSxyLmZvcm1hdCxyLmN1bHR1cmUpLG51bGwhPT1lJiYoZT1uZXcgZnQoK2UpLHMoZSxhLGwpfHwoZT1udWxsKSksbi5fdmFsdWU9ZSxvJiZudWxsPT09ZSYmbi5fY2VsbD9uLl9jZWxsLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiKToobi5fY2hhbmdlVmlldz0hZXx8aSYmMCE9PWkuY29tcGFyZShlLG4uX2N1cnJlbnQpLG4ubmF2aWdhdGUoZSkpLHQpfSxfbW92ZTpmdW5jdGlvbih0KXt2YXIgbixpLHIsbyxzPXRoaXMsbD1zLm9wdGlvbnMsYz10LmtleUNvZGUsZD1zLl92aWV3LHU9cy5faW5kZXgsaD1uZXcgZnQoK3MuX2N1cnJlbnQpLHA9eS5zdXBwb3J0LmlzUnRsKHMud3JhcHBlcik7cmV0dXJuIHQudGFyZ2V0PT09cy5fdGFibGVbMF0mJihzLl9hY3RpdmU9ITApLHQuY3RybEtleT9jPT14LlJJR0hUJiYhcHx8Yz09eC5MRUZUJiZwPyhzLm5hdmlnYXRlVG9GdXR1cmUoKSxpPSEwKTpjPT14LkxFRlQmJiFwfHxjPT14LlJJR0hUJiZwPyhzLm5hdmlnYXRlVG9QYXN0KCksaT0hMCk6Yz09eC5VUD8ocy5uYXZpZ2F0ZVVwKCksaT0hMCk6Yz09eC5ET1dOJiYocy5fY2xpY2soZShzLl9jZWxsWzBdLmZpcnN0Q2hpbGQpKSxpPSEwKTooYz09eC5SSUdIVCYmIXB8fGM9PXguTEVGVCYmcD8obj0xLGk9ITApOmM9PXguTEVGVCYmIXB8fGM9PXguUklHSFQmJnA/KG49LTEsaT0hMCk6Yz09eC5VUD8obj0wPT09dT8tNzotNCxpPSEwKTpjPT14LkRPV04/KG49MD09PXU/Nzo0LGk9ITApOmM9PXguRU5URVI/KHMuX2NsaWNrKGUocy5fY2VsbFswXS5maXJzdENoaWxkKSksaT0hMCk6Yz09eC5IT01FfHxjPT14LkVORD8ocj1jPT14LkhPTUU/XCJmaXJzdFwiOlwibGFzdFwiLG89ZFtyXShoKSxoPW5ldyBmdChvLmdldEZ1bGxZZWFyKCksby5nZXRNb250aCgpLG8uZ2V0RGF0ZSgpLGguZ2V0SG91cnMoKSxoLmdldE1pbnV0ZXMoKSxoLmdldFNlY29uZHMoKSxoLmdldE1pbGxpc2Vjb25kcygpKSxpPSEwKTpjPT14LlBBR0VVUD8oaT0hMCxzLm5hdmlnYXRlVG9QYXN0KCkpOmM9PXguUEFHRURPV04mJihpPSEwLHMubmF2aWdhdGVUb0Z1dHVyZSgpKSwobnx8cikmJihyfHxkLnNldERhdGUoaCxuKSxzLl9mb2N1cyhhKGgsbC5taW4sbC5tYXgpKSkpLGkmJnQucHJldmVudERlZmF1bHQoKSxzLl9jdXJyZW50fSxfYW5pbWF0ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5mcm9tLGk9ZS50byxyPXQuX2FjdGl2ZTtuP24ucGFyZW50KCkuZGF0YShcImFuaW1hdGluZ1wiKT8obi5vZmYoUiksbi5wYXJlbnQoKS5rZW5kb1N0b3AoITAsITApLnJlbW92ZSgpLG4ucmVtb3ZlKCksaS5pbnNlcnRBZnRlcih0LmVsZW1lbnRbMF0uZmlyc3RDaGlsZCksdC5fZm9jdXNWaWV3KHIpKTpuLmlzKFwiOnZpc2libGVcIikmJnQub3B0aW9ucy5hbmltYXRpb24hPT0hMT90W2UudmVydGljYWw/XCJfdmVydGljYWxcIjpcIl9ob3Jpem9udGFsXCJdKG4saSxlLmZ1dHVyZSk6KGkuaW5zZXJ0QWZ0ZXIobiksbi5vZmYoUikucmVtb3ZlKCksdC5fZm9jdXNWaWV3KHIpKTooaS5pbnNlcnRBZnRlcih0LmVsZW1lbnRbMF0uZmlyc3RDaGlsZCksdC5fYmluZFRhYmxlKGkpKX0sX2hvcml6b250YWw6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMscj1pLl9hY3RpdmUsbz1pLm9wdGlvbnMuYW5pbWF0aW9uLmhvcml6b250YWwsYT1vLmVmZmVjdHMscz1lLm91dGVyV2lkdGgoKTthJiYtMSE9YS5pbmRleE9mKFYpJiYoZS5hZGQodCkuY3NzKHt3aWR0aDpzfSksZS53cmFwKFwiPGRpdi8+XCIpLGkuX2ZvY3VzVmlldyhyLGUpLGUucGFyZW50KCkuY3NzKHtwb3NpdGlvbjpcInJlbGF0aXZlXCIsd2lkdGg6MipzLFwiZmxvYXRcIjpOLFwibWFyZ2luLWxlZnRcIjpuPzA6LXN9KSx0W24/XCJpbnNlcnRBZnRlclwiOlwiaW5zZXJ0QmVmb3JlXCJdKGUpLHB0KG8se2VmZmVjdHM6VitcIjpcIisobj9cInJpZ2h0XCI6TiksY29tcGxldGU6ZnVuY3Rpb24oKXtlLm9mZihSKS5yZW1vdmUoKSxpLl9vbGRUYWJsZT1udWxsLHQudW53cmFwKCksaS5fZm9jdXNWaWV3KHIpfX0pLGUucGFyZW50KCkua2VuZG9TdG9wKCEwLCEwKS5rZW5kb0FuaW1hdGUobykpfSxfdmVydGljYWw6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcyxvPXIub3B0aW9ucy5hbmltYXRpb24udmVydGljYWwsYT1vLmVmZmVjdHMscz1yLl9hY3RpdmU7YSYmLTEhPWEuaW5kZXhPZihcInpvb21cIikmJih0LmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDplLnByZXYoKS5vdXRlckhlaWdodCgpLGxlZnQ6MH0pLmluc2VydEJlZm9yZShlKSxNJiYobj1yLl9jZWxsQnlEYXRlKHIuX3ZpZXcudG9EYXRlU3RyaW5nKHIuX2N1cnJlbnQpKSxpPW4ucG9zaXRpb24oKSxpPWkubGVmdCtwYXJzZUludChuLndpZHRoKCkvMiwxMCkrXCJweCBcIisoaS50b3ArcGFyc2VJbnQobi5oZWlnaHQoKS8yLDEwKStcInB4XCIpLHQuY3NzKE0saSkpLGUua2VuZG9TdG9wKCEwLCEwKS5rZW5kb0FuaW1hdGUoe2VmZmVjdHM6XCJmYWRlT3V0XCIsZHVyYXRpb246NjAwLGNvbXBsZXRlOmZ1bmN0aW9uKCl7ZS5vZmYoUikucmVtb3ZlKCksci5fb2xkVGFibGU9bnVsbCx0LmNzcyh7cG9zaXRpb246XCJzdGF0aWNcIix0b3A6MCxsZWZ0OjB9KSxyLl9mb2N1c1ZpZXcocyl9fSksdC5rZW5kb1N0b3AoITAsITApLmtlbmRvQW5pbWF0ZShvKSl9LF9jZWxsQnlEYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl90YWJsZS5maW5kKFwidGQ6bm90KC5cIitRK1wiKVwiKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLmZpcnN0Q2hpbGQpLmF0dHIoeS5hdHRyKHEpKT09PXR9KX0sX2NsYXNzOmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpcyxyPWkuX2NlbGxJRCxvPWkuX2NlbGw7XHJcbm8mJm8ucmVtb3ZlQXR0cih1dCkucmVtb3ZlQXR0cihcImFyaWEtbGFiZWxcIikucmVtb3ZlQXR0cihPKSxvPWkuX3RhYmxlLmZpbmQoXCJ0ZDpub3QoLlwiK1ErXCIpXCIpLnJlbW92ZUNsYXNzKHQpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBlKHRoaXMuZmlyc3RDaGlsZCkuYXR0cih5LmF0dHIocSkpPT09bn0pLmF0dHIodXQsITApLHQhPT1LfHxpLl9hY3RpdmV8fGkub3B0aW9ucy5mb2N1c09uTmF2PT09ITF8fCh0PVwiXCIpLG8uYWRkQ2xhc3ModCksb1swXSYmKGkuX2NlbGw9byksciYmKG8uYXR0cihPLHIpLGkuX3RhYmxlLnJlbW92ZUF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIikuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLHIpKX0sX2JpbmRUYWJsZTpmdW5jdGlvbihlKXtlLm9uKG50LHRoaXMuX2FkZENsYXNzUHJveHkpLm9uKGV0LHRoaXMuX3JlbW92ZUNsYXNzUHJveHkpfSxfY2xpY2s6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucyxpPW5ldyBEYXRlKCt0Ll9jdXJyZW50KSxyPWUuYXR0cih5LmF0dHIocSkpLnNwbGl0KFwiL1wiKTtyPW5ldyBmdChyWzBdLHJbMV0sclsyXSksUyhyLDApLHQuX3ZpZXcuc2V0RGF0ZShpLHIpLHQubmF2aWdhdGVEb3duKGEoaSxuLm1pbixuLm1heCkpfSxfZm9jdXM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuX3ZpZXc7MCE9PW4uY29tcGFyZShlLHQuX2N1cnJlbnQpP3QubmF2aWdhdGUoZSk6KHQuX2N1cnJlbnQ9ZSx0Ll9jbGFzcyhLLG4udG9EYXRlU3RyaW5nKGUpKSl9LF9mb2N1c1ZpZXc6ZnVuY3Rpb24oZSx0KXtlJiZ0aGlzLmZvY3VzKHQpfSxfZm9vdGVyOmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMscj1vKCksYT1pLmVsZW1lbnQscz1hLmZpbmQoXCIuay1mb290ZXJcIik7cmV0dXJuIG4/KHNbMF18fChzPWUoJzxkaXYgY2xhc3M9XCJrLWZvb3RlclwiPjxhIGhyZWY9XCIjXCIgY2xhc3M9XCJrLWxpbmsgay1uYXYtdG9kYXlcIj48L2E+PC9kaXY+JykuYXBwZW5kVG8oYSkpLGkuX3RvZGF5PXMuc2hvdygpLmZpbmQoXCIuay1saW5rXCIpLmh0bWwobihyKSkuYXR0cihcInRpdGxlXCIseS50b1N0cmluZyhyLFwiRFwiLGkub3B0aW9ucy5jdWx0dXJlKSksaS5fdG9nZ2xlKCksdCk6KGkuX3RvZ2dsZSghMSkscy5oaWRlKCksdCl9LF9oZWFkZXI6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10LmVsZW1lbnQ7bi5maW5kKFwiLmstaGVhZGVyXCIpWzBdfHxuLmh0bWwoJzxkaXYgY2xhc3M9XCJrLWhlYWRlclwiPjxhIGhyZWY9XCIjXCIgcm9sZT1cImJ1dHRvblwiIGNsYXNzPVwiay1saW5rIGstbmF2LXByZXZcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctd1wiPjwvc3Bhbj48L2E+PGEgaHJlZj1cIiNcIiByb2xlPVwiYnV0dG9uXCIgYXJpYS1saXZlPVwiYXNzZXJ0aXZlXCIgYXJpYS1hdG9taWM9XCJ0cnVlXCIgY2xhc3M9XCJrLWxpbmsgay1uYXYtZmFzdFwiPjwvYT48YSBocmVmPVwiI1wiIHJvbGU9XCJidXR0b25cIiBjbGFzcz1cImstbGluayBrLW5hdi1uZXh0XCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LWVcIj48L3NwYW4+PC9hPjwvZGl2PicpLGU9bi5maW5kKFwiLmstbGlua1wiKS5vbihydCtcIiBcIitvdCtcIiBcIitudCtcIiBcIitldCxkKS5jbGljayghMSksdC5fdGl0bGU9ZS5lcSgxKS5vbihCLGZ1bmN0aW9uKCl7dC5fYWN0aXZlPXQub3B0aW9ucy5mb2N1c09uTmF2IT09ITEsdC5uYXZpZ2F0ZVVwKCl9KSx0W2x0XT1lLmVxKDApLm9uKEIsZnVuY3Rpb24oKXt0Ll9hY3RpdmU9dC5vcHRpb25zLmZvY3VzT25OYXYhPT0hMSx0Lm5hdmlnYXRlVG9QYXN0KCl9KSx0W2N0XT1lLmVxKDIpLm9uKEIsZnVuY3Rpb24oKXt0Ll9hY3RpdmU9dC5vcHRpb25zLmZvY3VzT25OYXYhPT0hMSx0Lm5hdmlnYXRlVG9GdXR1cmUoKX0pfSxfbmF2aWdhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9bi5faW5kZXgrMSxyPW5ldyBmdCgrbi5fY3VycmVudCk7ZT1uW2VdLGUuaGFzQ2xhc3MoWSl8fChpPjM/ci5zZXRGdWxsWWVhcihyLmdldEZ1bGxZZWFyKCkrMTAwKnQpOl8udmlld3NbaV0uc2V0RGF0ZShyLHQpLG4ubmF2aWdhdGUocikpfSxfb3B0aW9uOmZ1bmN0aW9uKGUsbil7dmFyIGkscj10aGlzLG89ci5vcHRpb25zLGE9ci5fdmFsdWV8fHIuX2N1cnJlbnQ7cmV0dXJuIG49PT10P29bZV06KG49QyhuLG8uZm9ybWF0LG8uY3VsdHVyZSksbiYmKG9bZV09bmV3IGZ0KCtuKSxpPWU9PT1IP24+YTphPm4sKGl8fHYoYSxuKSkmJihpJiYoci5fdmFsdWU9bnVsbCksci5fY2hhbmdlVmlldz0hMCksci5fY2hhbmdlVmlld3x8KHIuX2NoYW5nZVZpZXc9ISghby5tb250aC5jb250ZW50JiYhby5tb250aC5lbXB0eSkpLHIubmF2aWdhdGUoci5fdmFsdWUpLHIuX3RvZ2dsZSgpKSx0KX0sX3RvZ2dsZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5vcHRpb25zLHI9bi5fdG9kYXk7ZT09PXQmJihlPXMobygpLGkubWluLGkubWF4KSksciYmKHIub2ZmKEIpLGU/ci5hZGRDbGFzcyhKKS5yZW1vdmVDbGFzcyhZKS5vbihCLGh0KG4uX3RvZGF5Q2xpY2ssbikpOnIucmVtb3ZlQ2xhc3MoSikuYWRkQ2xhc3MoWSkub24oQix1KSl9LF90b2RheUNsaWNrOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1ndFt0Lm9wdGlvbnMuZGVwdGhdLGk9bygpO2UucHJldmVudERlZmF1bHQoKSwwPT09dC5fdmlldy5jb21wYXJlKHQuX2N1cnJlbnQsaSkmJnQuX2luZGV4PT1uJiYodC5fY2hhbmdlVmlldz0hMSksdC5fdmFsdWU9aSx0Lm5hdmlnYXRlKGksbiksdC50cmlnZ2VyKGopfSxfdGVtcGxhdGVzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUub3B0aW9ucyxuPXQuZm9vdGVyLGk9dC5tb250aCxyPWkuY29udGVudCxvPWkuZW1wdHk7ZS5tb250aD17Y29udGVudDpEKCc8dGQjPWRhdGEuY3NzQ2xhc3MjIHJvbGU9XCJncmlkY2VsbFwiPjxhIHRhYmluZGV4PVwiLTFcIiBjbGFzcz1cImstbGluayM9ZGF0YS5saW5rQ2xhc3MjXCIgaHJlZj1cIiM9ZGF0YS51cmwjXCIgJyt5LmF0dHIoXCJ2YWx1ZVwiKSsnPVwiIz1kYXRhLmRhdGVTdHJpbmcjXCIgdGl0bGU9XCIjPWRhdGEudGl0bGUjXCI+Jysocnx8XCIjPWRhdGEudmFsdWUjXCIpK1wiPC9hPjwvdGQ+XCIse3VzZVdpdGhCbG9jazohIXJ9KSxlbXB0eTpEKCc8dGQgcm9sZT1cImdyaWRjZWxsXCI+Jysob3x8XCImbmJzcDtcIikrXCI8L3RkPlwiLHt1c2VXaXRoQmxvY2s6ISFvfSl9LGUuZm9vdGVyPW4hPT0hMT9EKG58fCcjPSBrZW5kby50b1N0cmluZyhkYXRhLFwiRFwiLFwiJyt0LmN1bHR1cmUrJ1wiKSAjJyx7dXNlV2l0aEJsb2NrOiExfSk6bnVsbH19KTtiLnBsdWdpbihtdCksXz17Zmlyc3REYXlPZk1vbnRoOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgZnQoZS5nZXRGdWxsWWVhcigpLGUuZ2V0TW9udGgoKSwxKX0sZmlyc3RWaXNpYmxlRGF5OmZ1bmN0aW9uKGUsdCl7dD10fHx5LmN1bHR1cmUoKS5jYWxlbmRhcjtmb3IodmFyIG49dC5maXJzdERheSxpPW5ldyBmdChlLmdldEZ1bGxZZWFyKCksZS5nZXRNb250aCgpLDAsZS5nZXRIb3VycygpLGUuZ2V0TWludXRlcygpLGUuZ2V0U2Vjb25kcygpLGUuZ2V0TWlsbGlzZWNvbmRzKCkpO2kuZ2V0RGF5KCkhPW47KV8uc2V0VGltZShpLC0xKnN0KTtyZXR1cm4gaX0sc2V0VGltZTpmdW5jdGlvbihlLHQpe3ZhciBuPWUuZ2V0VGltZXpvbmVPZmZzZXQoKSxpPW5ldyBmdChlLmdldFRpbWUoKSt0KSxyPWkuZ2V0VGltZXpvbmVPZmZzZXQoKS1uO2Uuc2V0VGltZShpLmdldFRpbWUoKStyKmF0KX0sdmlld3M6W3tuYW1lOlUsdGl0bGU6ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIGgoaSkubW9udGhzLm5hbWVzW2UuZ2V0TW9udGgoKV0rXCIgXCIrZS5nZXRGdWxsWWVhcigpfSxjb250ZW50OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLG49MCxyPWUubWluLG89ZS5tYXgsYT1lLmRhdGUscz1lLmRhdGVzLGM9ZS5mb3JtYXQsZD1lLmN1bHR1cmUsdT1lLnVybCxwPXUmJnNbMF0sZj1oKGQpLG09Zi5maXJzdERheSx2PWYuZGF5cyx3PWwodi5uYW1lcyxtKSxiPWwodi5uYW1lc1Nob3J0LG0pLGs9Xy5maXJzdFZpc2libGVEYXkoYSxmKSx4PXQuZmlyc3QoYSksQz10Lmxhc3QoYSksVD10LnRvRGF0ZVN0cmluZyxEPW5ldyBmdCxBPSc8dGFibGUgdGFiaW5kZXg9XCIwXCIgcm9sZT1cImdyaWRcIiBjbGFzcz1cImstY29udGVudFwiIGNlbGxzcGFjaW5nPVwiMFwiPjx0aGVhZD48dHIgcm9sZT1cInJvd1wiPic7Nz5uO24rKylBKz0nPHRoIHNjb3BlPVwiY29sXCIgdGl0bGU9XCInK3dbbl0rJ1wiPicrYltuXStcIjwvdGg+XCI7cmV0dXJuIEQ9bmV3IGZ0KEQuZ2V0RnVsbFllYXIoKSxELmdldE1vbnRoKCksRC5nZXREYXRlKCkpLFMoRCwwKSxEPStELGkoe2NlbGxzOjQyLHBlclJvdzo3LGh0bWw6QSs9JzwvdHI+PC90aGVhZD48dGJvZHk+PHRyIHJvbGU9XCJyb3dcIj4nLHN0YXJ0Om5ldyBmdChrLmdldEZ1bGxZZWFyKCksay5nZXRNb250aCgpLGsuZ2V0RGF0ZSgpKSxtaW46bmV3IGZ0KHIuZ2V0RnVsbFllYXIoKSxyLmdldE1vbnRoKCksci5nZXREYXRlKCkpLG1heDpuZXcgZnQoby5nZXRGdWxsWWVhcigpLG8uZ2V0TW9udGgoKSxvLmdldERhdGUoKSksY29udGVudDplLmNvbnRlbnQsZW1wdHk6ZS5lbXB0eSxzZXR0ZXI6dC5zZXREYXRlLGJ1aWxkOmZ1bmN0aW9uKGUpe3ZhciB0PVtdLG49ZS5nZXREYXkoKSxpPVwiXCIscj1cIiNcIjtyZXR1cm4oeD5lfHxlPkMpJiZ0LnB1c2goUSksK2U9PT1EJiZ0LnB1c2goXCJrLXRvZGF5XCIpLCgwPT09bnx8Nj09PW4pJiZ0LnB1c2goXCJrLXdlZWtlbmRcIikscCYmZygrZSxzKSYmKHI9dS5yZXBsYWNlKFwiezB9XCIseS50b1N0cmluZyhlLGMsZCkpLGk9XCIgay1hY3Rpb24tbGlua1wiKSx7ZGF0ZTplLGRhdGVzOnMsbnM6eS5ucyx0aXRsZTp5LnRvU3RyaW5nKGUsXCJEXCIsZCksdmFsdWU6ZS5nZXREYXRlKCksZGF0ZVN0cmluZzpUKGUpLGNzc0NsYXNzOnRbMF0/JyBjbGFzcz1cIicrdC5qb2luKFwiIFwiKSsnXCInOlwiXCIsbGlua0NsYXNzOmksdXJsOnJ9fX0pfSxmaXJzdDpmdW5jdGlvbihlKXtyZXR1cm4gXy5maXJzdERheU9mTW9udGgoZSl9LGxhc3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGZ0KGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCkrMSwwKSxuPV8uZmlyc3REYXlPZk1vbnRoKGUpLGk9TWF0aC5hYnModC5nZXRUaW1lem9uZU9mZnNldCgpLW4uZ2V0VGltZXpvbmVPZmZzZXQoKSk7cmV0dXJuIGkmJnQuc2V0SG91cnMobi5nZXRIb3VycygpK2kvNjApLHR9LGNvbXBhcmU6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPWUuZ2V0TW9udGgoKSxyPWUuZ2V0RnVsbFllYXIoKSxvPXQuZ2V0TW9udGgoKSxhPXQuZ2V0RnVsbFllYXIoKTtyZXR1cm4gbj1yPmE/MTphPnI/LTE6aT09bz8wOmk+bz8xOi0xfSxzZXREYXRlOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5nZXRIb3VycygpO3QgaW5zdGFuY2VvZiBmdD9lLnNldEZ1bGxZZWFyKHQuZ2V0RnVsbFllYXIoKSx0LmdldE1vbnRoKCksdC5nZXREYXRlKCkpOl8uc2V0VGltZShlLHQqc3QpLFMoZSxuKX0sdG9EYXRlU3RyaW5nOmZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEZ1bGxZZWFyKCkrXCIvXCIrZS5nZXRNb250aCgpK1wiL1wiK2UuZ2V0RGF0ZSgpfX0se25hbWU6XCJ5ZWFyXCIsdGl0bGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0RnVsbFllYXIoKX0sY29udGVudDpmdW5jdGlvbihlKXt2YXIgdD1oKGUuY3VsdHVyZSkubW9udGhzLm5hbWVzQWJicixuPXRoaXMudG9EYXRlU3RyaW5nLHI9ZS5taW4sbz1lLm1heDtyZXR1cm4gaSh7bWluOm5ldyBmdChyLmdldEZ1bGxZZWFyKCksci5nZXRNb250aCgpLDEpLG1heDpuZXcgZnQoby5nZXRGdWxsWWVhcigpLG8uZ2V0TW9udGgoKSwxKSxzdGFydDpuZXcgZnQoZS5kYXRlLmdldEZ1bGxZZWFyKCksMCwxKSxzZXR0ZXI6dGhpcy5zZXREYXRlLGJ1aWxkOmZ1bmN0aW9uKGUpe3JldHVybnt2YWx1ZTp0W2UuZ2V0TW9udGgoKV0sbnM6eS5ucyxkYXRlU3RyaW5nOm4oZSksY3NzQ2xhc3M6XCJcIn19fSl9LGZpcnN0OmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgZnQoZS5nZXRGdWxsWWVhcigpLDAsZS5nZXREYXRlKCkpfSxsYXN0OmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgZnQoZS5nZXRGdWxsWWVhcigpLDExLGUuZ2V0RGF0ZSgpKX0sY29tcGFyZTpmdW5jdGlvbihlLHQpe3JldHVybiByKGUsdCl9LHNldERhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPWUuZ2V0SG91cnMoKTt0IGluc3RhbmNlb2YgZnQ/KG49dC5nZXRNb250aCgpLGUuc2V0RnVsbFllYXIodC5nZXRGdWxsWWVhcigpLG4sZS5nZXREYXRlKCkpLG4hPT1lLmdldE1vbnRoKCkmJmUuc2V0RGF0ZSgwKSk6KG49ZS5nZXRNb250aCgpK3QsZS5zZXRNb250aChuKSxuPjExJiYobi09MTIpLG4+MCYmZS5nZXRNb250aCgpIT1uJiZlLnNldERhdGUoMCkpLFMoZSxpKX0sdG9EYXRlU3RyaW5nOmZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEZ1bGxZZWFyKCkrXCIvXCIrZS5nZXRNb250aCgpK1wiLzFcIn19LHtuYW1lOlwiZGVjYWRlXCIsdGl0bGU6ZnVuY3Rpb24oZSx0LGkpe3JldHVybiBuKGUsdCxpLDEwKX0sY29udGVudDpmdW5jdGlvbihlKXt2YXIgdD1lLmRhdGUuZ2V0RnVsbFllYXIoKSxuPXRoaXMudG9EYXRlU3RyaW5nO3JldHVybiBpKHtzdGFydDpuZXcgZnQodC10JTEwLTEsMCwxKSxtaW46bmV3IGZ0KGUubWluLmdldEZ1bGxZZWFyKCksMCwxKSxtYXg6bmV3IGZ0KGUubWF4LmdldEZ1bGxZZWFyKCksMCwxKSxzZXR0ZXI6dGhpcy5zZXREYXRlLGJ1aWxkOmZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOmUuZ2V0RnVsbFllYXIoKSxuczp5Lm5zLGRhdGVTdHJpbmc6bihlKSxjc3NDbGFzczowPT09dHx8MTE9PXQ/WDpcIlwifX19KX0sZmlyc3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5nZXRGdWxsWWVhcigpO3JldHVybiBuZXcgZnQodC10JTEwLGUuZ2V0TW9udGgoKSxlLmdldERhdGUoKSl9LGxhc3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5nZXRGdWxsWWVhcigpO3JldHVybiBuZXcgZnQodC10JTEwKzksZS5nZXRNb250aCgpLGUuZ2V0RGF0ZSgpKX0sY29tcGFyZTpmdW5jdGlvbihlLHQpe3JldHVybiByKGUsdCwxMCl9LHNldERhdGU6ZnVuY3Rpb24oZSx0KXtjKGUsdCwxKX0sdG9EYXRlU3RyaW5nOmZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEZ1bGxZZWFyKCkrXCIvMC8xXCJ9fSx7bmFtZTpXLHRpdGxlOmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4gbihlLHQsaSwxMDApfSxjb250ZW50OmZ1bmN0aW9uKGUpe3ZhciB0PWUuZGF0ZS5nZXRGdWxsWWVhcigpLG49ZS5taW4uZ2V0RnVsbFllYXIoKSxyPWUubWF4LmdldEZ1bGxZZWFyKCksbz10aGlzLnRvRGF0ZVN0cmluZyxhPW4scz1yO3JldHVybiBhLT1hJTEwLHMtPXMlMTAsMTA+cy1hJiYocz1hKzkpLGkoe3N0YXJ0Om5ldyBmdCh0LXQlMTAwLTEwLDAsMSksbWluOm5ldyBmdChhLDAsMSksbWF4Om5ldyBmdChzLDAsMSksc2V0dGVyOnRoaXMuc2V0RGF0ZSxidWlsZDpmdW5jdGlvbihlLHQpe3ZhciBpPWUuZ2V0RnVsbFllYXIoKSxhPWkrOTtyZXR1cm4gbj5pJiYoaT1uKSxhPnImJihhPXIpLHtuczp5Lm5zLHZhbHVlOmkrXCIgLSBcIithLGRhdGVTdHJpbmc6byhlKSxjc3NDbGFzczowPT09dHx8MTE9PXQ/WDpcIlwifX19KX0sZmlyc3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5nZXRGdWxsWWVhcigpO3JldHVybiBuZXcgZnQodC10JTEwMCxlLmdldE1vbnRoKCksZS5nZXREYXRlKCkpfSxsYXN0OmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ2V0RnVsbFllYXIoKTtyZXR1cm4gbmV3IGZ0KHQtdCUxMDArOTksZS5nZXRNb250aCgpLGUuZ2V0RGF0ZSgpKX0sY29tcGFyZTpmdW5jdGlvbihlLHQpe3JldHVybiByKGUsdCwxMDApfSxzZXREYXRlOmZ1bmN0aW9uKGUsdCl7YyhlLHQsMTApfSx0b0RhdGVTdHJpbmc6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5nZXRGdWxsWWVhcigpO3JldHVybiB0LXQlMTArXCIvMC8xXCJ9fV19LF8uaXNFcXVhbERhdGVQYXJ0PW0sXy5tYWtlVW5zZWxlY3RhYmxlPWYsXy5yZXN0cmljdFZhbHVlPWEsXy5pc0luUmFuZ2U9cyxfLm5vcm1hbGl6ZT1wLF8udmlld3NFbnVtPWd0LHkuY2FsZW5kYXI9X30od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKHQpe3ZhciBuPXQucGFyc2VGb3JtYXRzLGk9dC5mb3JtYXQ7Qi5ub3JtYWxpemUodCksbj1lLmlzQXJyYXkobik/bjpbbl0sLTE9PT1lLmluQXJyYXkoaSxuKSYmbi5zcGxpY2UoMCwwLHQuZm9ybWF0KSx0LnBhcnNlRm9ybWF0cz1ufWZ1bmN0aW9uIGkoZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfXZhciByLG89d2luZG93LmtlbmRvLGE9by51aSxzPWEuV2lkZ2V0LGw9by5wYXJzZURhdGUsYz1vLmtleXMsZD1vLnRlbXBsYXRlLHU9by5fYWN0aXZlRWxlbWVudCxoPVwiPGRpdiAvPlwiLHA9XCI8c3BhbiAvPlwiLGY9XCIua2VuZG9EYXRlUGlja2VyXCIsZz1cImNsaWNrXCIrZixtPVwib3BlblwiLHY9XCJjbG9zZVwiLF89XCJjaGFuZ2VcIix5PVwiZGlzYWJsZWRcIix3PVwicmVhZG9ubHlcIixiPVwiay1zdGF0ZS1kZWZhdWx0XCIsaz1cImstc3RhdGUtZm9jdXNlZFwiLHg9XCJrLXN0YXRlLXNlbGVjdGVkXCIsQz1cImstc3RhdGUtZGlzYWJsZWRcIixTPVwiay1zdGF0ZS1ob3ZlclwiLFQ9XCJtb3VzZWVudGVyXCIrZitcIiBtb3VzZWxlYXZlXCIrZixEPVwibW91c2Vkb3duXCIrZixBPVwiaWRcIixFPVwibWluXCIsTT1cIm1heFwiLFA9XCJtb250aFwiLEk9XCJhcmlhLWRpc2FibGVkXCIsej1cImFyaWEtZXhwYW5kZWRcIixGPVwiYXJpYS1oaWRkZW5cIixSPVwiYXJpYS1yZWFkb25seVwiLEI9by5jYWxlbmRhcixMPUIuaXNJblJhbmdlLE89Qi5yZXN0cmljdFZhbHVlLEg9Qi5pc0VxdWFsRGF0ZVBhcnQsTj1lLmV4dGVuZCxWPWUucHJveHksVT1EYXRlLFc9ZnVuY3Rpb24odCl7dmFyIG4saT10aGlzLHI9ZG9jdW1lbnQuYm9keSxzPWUoaCkuYXR0cihGLFwidHJ1ZVwiKS5hZGRDbGFzcyhcImstY2FsZW5kYXItY29udGFpbmVyXCIpLmFwcGVuZFRvKHIpO2kub3B0aW9ucz10PXR8fHt9LG49dC5pZCxuJiYobis9XCJfZGF0ZXZpZXdcIixzLmF0dHIoQSxuKSxpLl9kYXRlVmlld0lEPW4pLGkucG9wdXA9bmV3IGEuUG9wdXAocyxOKHQucG9wdXAsdCx7bmFtZTpcIlBvcHVwXCIsaXNSdGw6by5zdXBwb3J0LmlzUnRsKHQuYW5jaG9yKX0pKSxpLmRpdj1zLGkudmFsdWUodC52YWx1ZSl9O1cucHJvdG90eXBlPXtfY2FsZW5kYXI6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMscj1uLmNhbGVuZGFyLHM9bi5vcHRpb25zO3J8fCh0PWUoaCkuYXR0cihBLG8uZ3VpZCgpKS5hcHBlbmRUbyhuLnBvcHVwLmVsZW1lbnQpLm9uKEQsaSkub24oZyxcInRkOmhhcyguay1saW5rKVwiLFYobi5fY2xpY2ssbikpLG4uY2FsZW5kYXI9cj1uZXcgYS5DYWxlbmRhcih0KSxuLl9zZXRPcHRpb25zKHMpLG8uY2FsZW5kYXIubWFrZVVuc2VsZWN0YWJsZShyLmVsZW1lbnQpLHIubmF2aWdhdGUobi5fdmFsdWV8fG4uX2N1cnJlbnQscy5zdGFydCksbi52YWx1ZShuLl92YWx1ZSkpfSxfc2V0T3B0aW9uczpmdW5jdGlvbihlKXt0aGlzLmNhbGVuZGFyLnNldE9wdGlvbnMoe2ZvY3VzT25OYXY6ITEsY2hhbmdlOmUuY2hhbmdlLGN1bHR1cmU6ZS5jdWx0dXJlLGRhdGVzOmUuZGF0ZXMsZGVwdGg6ZS5kZXB0aCxmb290ZXI6ZS5mb290ZXIsZm9ybWF0OmUuZm9ybWF0LG1heDplLm1heCxtaW46ZS5taW4sbW9udGg6ZS5tb250aCxzdGFydDplLnN0YXJ0fSl9LHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5vcHRpb25zO3RoaXMub3B0aW9ucz1OKHQsZSx7Y2hhbmdlOnQuY2hhbmdlLGNsb3NlOnQuY2xvc2Usb3Blbjp0Lm9wZW59KSx0aGlzLmNhbGVuZGFyJiZ0aGlzLl9zZXRPcHRpb25zKHRoaXMub3B0aW9ucyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnBvcHVwLmRlc3Ryb3koKX0sb3BlbjpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fY2FsZW5kYXIoKSxlLnBvcHVwLm9wZW4oKX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLnBvcHVwLmNsb3NlKCl9LG1pbjpmdW5jdGlvbihlKXt0aGlzLl9vcHRpb24oRSxlKX0sbWF4OmZ1bmN0aW9uKGUpe3RoaXMuX29wdGlvbihNLGUpfSx0b2dnbGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2VbZS5wb3B1cC52aXNpYmxlKCk/djptXSgpfSxtb3ZlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1lLmtleUNvZGUscj1uLmNhbGVuZGFyLG89ZS5jdHJsS2V5JiZpPT1jLkRPV058fGk9PWMuRU5URVI7aWYoaT09Yy5FU0MpcmV0dXJuIG4uY2xvc2UoKSx0O2lmKGUuYWx0S2V5KXJldHVybiBpPT1jLkRPV04/KG4ub3BlbigpLGUucHJldmVudERlZmF1bHQoKSk6aT09Yy5VUCYmKG4uY2xvc2UoKSxlLnByZXZlbnREZWZhdWx0KCkpLHQ7aWYobi5wb3B1cC52aXNpYmxlKCkpcmV0dXJuIG8mJnIuX2NlbGwuaGFzQ2xhc3MoeCk/KG4uY2xvc2UoKSxlLnByZXZlbnREZWZhdWx0KCksdCk6KG4uX2N1cnJlbnQ9ci5fbW92ZShlKSx0KX0sY3VycmVudDpmdW5jdGlvbihlKXt0aGlzLl9jdXJyZW50PWUsdGhpcy5jYWxlbmRhci5fZm9jdXMoZSl9LHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LmNhbGVuZGFyLGk9dC5vcHRpb25zO3QuX3ZhbHVlPWUsdC5fY3VycmVudD1uZXcgVSgrTyhlLGkubWluLGkubWF4KSksbiYmbi52YWx1ZShlKX0sX2NsaWNrOmZ1bmN0aW9uKGUpey0xIT09ZS5jdXJyZW50VGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKHgpJiZ0aGlzLmNsb3NlKCl9LF9vcHRpb246ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9bi5jYWxlbmRhcjtuLm9wdGlvbnNbZV09dCxpJiZpW2VdKHQpfX0sVy5ub3JtYWxpemU9bixvLkRhdGVWaWV3PVcscj1zLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBpLHIsYT10aGlzO3MuZm4uaW5pdC5jYWxsKGEsZSx0KSxlPWEuZWxlbWVudCx0PWEub3B0aW9ucyx0Lm1pbj1sKGUuYXR0cihcIm1pblwiKSl8fGwodC5taW4pLHQubWF4PWwoZS5hdHRyKFwibWF4XCIpKXx8bCh0Lm1heCksbih0KSxhLl93cmFwcGVyKCksYS5kYXRlVmlldz1uZXcgVyhOKHt9LHQse2lkOmUuYXR0cihBKSxhbmNob3I6YS53cmFwcGVyLGNoYW5nZTpmdW5jdGlvbigpe2EuX2NoYW5nZSh0aGlzLnZhbHVlKCkpLGEuY2xvc2UoKX0sY2xvc2U6ZnVuY3Rpb24odCl7YS50cmlnZ2VyKHYpP3QucHJldmVudERlZmF1bHQoKTooZS5hdHRyKHosITEpLHIuYXR0cihGLCEwKSl9LG9wZW46ZnVuY3Rpb24odCl7dmFyIG4saT1hLm9wdGlvbnM7YS50cmlnZ2VyKG0pP3QucHJldmVudERlZmF1bHQoKTooYS5lbGVtZW50LnZhbCgpIT09YS5fb2xkVGV4dCYmKG49bChlLnZhbCgpLGkucGFyc2VGb3JtYXRzLGkuY3VsdHVyZSksYS5kYXRlVmlld1tuP1wiY3VycmVudFwiOlwidmFsdWVcIl0obikpLGUuYXR0cih6LCEwKSxyLmF0dHIoRiwhMSksYS5fdXBkYXRlQVJJQShuKSl9fSkpLHI9YS5kYXRlVmlldy5kaXYsYS5faWNvbigpO3RyeXtlWzBdLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInRleHRcIil9Y2F0Y2goYyl7ZVswXS50eXBlPVwidGV4dFwifWUuYWRkQ2xhc3MoXCJrLWlucHV0XCIpLmF0dHIoe3JvbGU6XCJjb21ib2JveFwiLFwiYXJpYS1leHBhbmRlZFwiOiExLFwiYXJpYS1vd25zXCI6YS5kYXRlVmlldy5fZGF0ZVZpZXdJRH0pLGEuX3Jlc2V0KCksYS5fdGVtcGxhdGUoKSxpPWUuaXMoXCJbZGlzYWJsZWRdXCIpLGk/YS5lbmFibGUoITEpOmEucmVhZG9ubHkoZS5pcyhcIltyZWFkb25seV1cIikpLGEuX29sZD1hLl91cGRhdGUodC52YWx1ZXx8YS5lbGVtZW50LnZhbCgpKSxhLl9vbGRUZXh0PWUudmFsKCksby5ub3RpZnkoYSl9LGV2ZW50czpbbSx2LF9dLG9wdGlvbnM6e25hbWU6XCJEYXRlUGlja2VyXCIsdmFsdWU6bnVsbCxmb290ZXI6XCJcIixmb3JtYXQ6XCJcIixjdWx0dXJlOlwiXCIscGFyc2VGb3JtYXRzOltdLG1pbjpuZXcgRGF0ZSgxOTAwLDAsMSksbWF4Om5ldyBEYXRlKDIwOTksMTEsMzEpLHN0YXJ0OlAsZGVwdGg6UCxhbmltYXRpb246e30sbW9udGg6e30sZGF0ZXM6W10sQVJJQVRlbXBsYXRlOidDdXJyZW50IGZvY3VzZWQgZGF0ZSBpcyAjPWtlbmRvLnRvU3RyaW5nKGRhdGEuY3VycmVudCwgXCJEXCIpIyd9LHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxpPXQuX3ZhbHVlO3MuZm4uc2V0T3B0aW9ucy5jYWxsKHQsZSksZT10Lm9wdGlvbnMsZS5taW49bChlLm1pbiksZS5tYXg9bChlLm1heCksbihlKSx0LmRhdGVWaWV3LnNldE9wdGlvbnMoZSksaSYmKHQuZWxlbWVudC52YWwoby50b1N0cmluZyhpLGUuZm9ybWF0LGUuY3VsdHVyZSkpLHQuX3VwZGF0ZUFSSUEoaSkpfSxfZWRpdGFibGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuX2RhdGVJY29uLm9mZihmKSxyPXQuZWxlbWVudC5vZmYoZiksbz10Ll9pbnB1dFdyYXBwZXIub2ZmKGYpLGE9ZS5yZWFkb25seSxzPWUuZGlzYWJsZTthfHxzPyhvLmFkZENsYXNzKHM/QzpiKS5yZW1vdmVDbGFzcyhzP2I6Qyksci5hdHRyKHkscykuYXR0cih3LGEpLmF0dHIoSSxzKS5hdHRyKFIsYSkpOihvLmFkZENsYXNzKGIpLnJlbW92ZUNsYXNzKEMpLm9uKFQsdC5fdG9nZ2xlSG92ZXIpLHIucmVtb3ZlQXR0cih5KS5yZW1vdmVBdHRyKHcpLmF0dHIoSSwhMSkuYXR0cihSLCExKS5vbihcImtleWRvd25cIitmLFYodC5fa2V5ZG93bix0KSkub24oXCJmb2N1c291dFwiK2YsVih0Ll9ibHVyLHQpKS5vbihcImZvY3VzXCIrZixmdW5jdGlvbigpe3QuX2lucHV0V3JhcHBlci5hZGRDbGFzcyhrKX0pLG4ub24oZyxWKHQuX2NsaWNrLHQpKS5vbihELGkpKX0scmVhZG9ubHk6ZnVuY3Rpb24oZSl7dGhpcy5fZWRpdGFibGUoe3JlYWRvbmx5OmU9PT10PyEwOmUsZGlzYWJsZTohMX0pfSxlbmFibGU6ZnVuY3Rpb24oZSl7dGhpcy5fZWRpdGFibGUoe3JlYWRvbmx5OiExLGRpc2FibGU6IShlPWU9PT10PyEwOmUpfSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3MuZm4uZGVzdHJveS5jYWxsKGUpLGUuZGF0ZVZpZXcuZGVzdHJveSgpLGUuZWxlbWVudC5vZmYoZiksZS5fZGF0ZUljb24ub2ZmKGYpLGUuX2lucHV0V3JhcHBlci5vZmYoZiksZS5fZm9ybSYmZS5fZm9ybS5vZmYoXCJyZXNldFwiLGUuX3Jlc2V0SGFuZGxlcil9LG9wZW46ZnVuY3Rpb24oKXt0aGlzLmRhdGVWaWV3Lm9wZW4oKX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLmRhdGVWaWV3LmNsb3NlKCl9LG1pbjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb3B0aW9uKEUsZSl9LG1heDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb3B0aW9uKE0sZSl9LHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGU9PT10P24uX3ZhbHVlOihuLl9vbGQ9bi5fdXBkYXRlKGUpLG51bGw9PT1uLl9vbGQmJm4uZWxlbWVudC52YWwoXCJcIiksbi5fb2xkVGV4dD1uLmVsZW1lbnQudmFsKCksdCl9LF90b2dnbGVIb3ZlcjpmdW5jdGlvbih0KXtlKHQuY3VycmVudFRhcmdldCkudG9nZ2xlQ2xhc3MoUyxcIm1vdXNlZW50ZXJcIj09PXQudHlwZSl9LF9ibHVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZWxlbWVudC52YWwoKTtlLmNsb3NlKCksdCE9PWUuX29sZFRleHQmJmUuX2NoYW5nZSh0KSxlLl9pbnB1dFdyYXBwZXIucmVtb3ZlQ2xhc3Moayl9LF9jbGljazpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmVsZW1lbnQ7ZS5kYXRlVmlldy50b2dnbGUoKSxvLnN1cHBvcnQudG91Y2h8fHRbMF09PT11KCl8fHQuZm9jdXMoKX0sX2NoYW5nZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2U9dC5fdXBkYXRlKGUpLCt0Ll9vbGQhPStlJiYodC5fb2xkPWUsdC5fb2xkVGV4dD10LmVsZW1lbnQudmFsKCksdC5lbGVtZW50LnRyaWdnZXIoXyksdC50cmlnZ2VyKF8pKX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuZGF0ZVZpZXcsaT10LmVsZW1lbnQudmFsKCk7bi5wb3B1cC52aXNpYmxlKCl8fGUua2V5Q29kZSE9Yy5FTlRFUnx8aT09PXQuX29sZFRleHQ/KG4ubW92ZShlKSx0Ll91cGRhdGVBUklBKG4uX2N1cnJlbnQpKTp0Ll9jaGFuZ2UoaSl9LF9pY29uOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi5lbGVtZW50O3Q9aS5uZXh0KFwic3Bhbi5rLXNlbGVjdFwiKSx0WzBdfHwodD1lKCc8c3BhbiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1zZWxlY3RcIj48c3BhbiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1pY29uIGstaS1jYWxlbmRhclwiPnNlbGVjdDwvc3Bhbj48L3NwYW4+JykuaW5zZXJ0QWZ0ZXIoaSkpLG4uX2RhdGVJY29uPXQuYXR0cih7cm9sZTpcImJ1dHRvblwiLFwiYXJpYS1jb250cm9sc1wiOm4uZGF0ZVZpZXcuX2RhdGVWaWV3SUR9KX0sX29wdGlvbjpmdW5jdGlvbihlLG4pe3ZhciBpPXRoaXMscj1pLm9wdGlvbnM7cmV0dXJuIG49PT10P3JbZV06KG49bChuLHIucGFyc2VGb3JtYXRzLHIuY3VsdHVyZSksbiYmKHJbZV09bmV3IFUoK24pLGkuZGF0ZVZpZXdbZV0obikpLHQpfSxfdXBkYXRlOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxpPW4ub3B0aW9ucyxyPWkubWluLGE9aS5tYXgscz1uLl92YWx1ZSxjPWwoZSxpLnBhcnNlRm9ybWF0cyxpLmN1bHR1cmUpLGQ9bnVsbD09PWMmJm51bGw9PT1zfHxjIGluc3RhbmNlb2YgRGF0ZSYmcyBpbnN0YW5jZW9mIERhdGU7cmV0dXJuK2M9PT0rcyYmZD8odD1vLnRvU3RyaW5nKGMsaS5mb3JtYXQsaS5jdWx0dXJlKSx0IT09ZSYmbi5lbGVtZW50LnZhbChudWxsPT09Yz9lOnQpLGMpOihudWxsIT09YyYmSChjLHIpP2M9TyhjLHIsYSk6TChjLHIsYSl8fChjPW51bGwpLG4uX3ZhbHVlPWMsbi5kYXRlVmlldy52YWx1ZShjKSxuLmVsZW1lbnQudmFsKGM/by50b1N0cmluZyhjLGkuZm9ybWF0LGkuY3VsdHVyZSk6ZSksbi5fdXBkYXRlQVJJQShjKSxjKX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLmVsZW1lbnQ7dD1pLnBhcmVudHMoXCIuay1kYXRlcGlja2VyXCIpLHRbMF18fCh0PWkud3JhcChwKS5wYXJlbnQoKS5hZGRDbGFzcyhcImstcGlja2VyLXdyYXAgay1zdGF0ZS1kZWZhdWx0XCIpLHQ9dC53cmFwKHApLnBhcmVudCgpKSx0WzBdLnN0eWxlLmNzc1RleHQ9aVswXS5zdHlsZS5jc3NUZXh0LGkuY3NzKHt3aWR0aDpcIjEwMCVcIixoZWlnaHQ6aVswXS5zdHlsZS5oZWlnaHR9KSxuLndyYXBwZXI9dC5hZGRDbGFzcyhcImstd2lkZ2V0IGstZGF0ZXBpY2tlciBrLWhlYWRlclwiKS5hZGRDbGFzcyhpWzBdLmNsYXNzTmFtZSksbi5faW5wdXRXcmFwcGVyPWUodFswXS5maXJzdENoaWxkKX0sX3Jlc2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudCxpPW4uYXR0cihcImZvcm1cIikscj1pP2UoXCIjXCIraSk6bi5jbG9zZXN0KFwiZm9ybVwiKTtyWzBdJiYodC5fcmVzZXRIYW5kbGVyPWZ1bmN0aW9uKCl7dC52YWx1ZShuWzBdLmRlZmF1bHRWYWx1ZSl9LHQuX2Zvcm09ci5vbihcInJlc2V0XCIsdC5fcmVzZXRIYW5kbGVyKSl9LF90ZW1wbGF0ZTpmdW5jdGlvbigpe3RoaXMuX2FyaWFUZW1wbGF0ZT1kKHRoaXMub3B0aW9ucy5BUklBVGVtcGxhdGUpfSxfdXBkYXRlQVJJQTpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMsaT1uLmRhdGVWaWV3LmNhbGVuZGFyO24uZWxlbWVudC5yZW1vdmVBdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIpLGkmJih0PWkuX2NlbGwsdC5hdHRyKFwiYXJpYS1sYWJlbFwiLG4uX2FyaWFUZW1wbGF0ZSh7Y3VycmVudDplfHxpLmN1cnJlbnQoKX0pKSxuLmVsZW1lbnQuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLHQuYXR0cihcImlkXCIpKSl9fSksYS5wbHVnaW4ocil9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQsbil7cmV0dXJuIG4/dC5zdWJzdHJpbmcoMCxlKS5zcGxpdChuKS5sZW5ndGgtMTowfWZ1bmN0aW9uIGkoZSx0LGkpe3JldHVybiB0LnNwbGl0KGkpW24oZSx0LGkpXX1mdW5jdGlvbiByKGUsdCxpLHIpe3ZhciBvPXQuc3BsaXQocik7cmV0dXJuIG8uc3BsaWNlKG4oZSx0LHIpLDEsaSksciYmXCJcIiE9PW9bby5sZW5ndGgtMV0mJm8ucHVzaChcIlwiKSxvLmpvaW4ocil9dmFyIG89d2luZG93LmtlbmRvLGE9by5zdXBwb3J0LHM9by5jYXJldCxsPW8uX2FjdGl2ZUVsZW1lbnQsYz1hLnBsYWNlaG9sZGVyLGQ9by51aSx1PWQuTGlzdCxoPW8ua2V5cyxwPW8uZGF0YS5EYXRhU291cmNlLGY9XCJhcmlhLWRpc2FibGVkXCIsZz1cImFyaWEtcmVhZG9ubHlcIixtPVwiay1zdGF0ZS1kZWZhdWx0XCIsdj1cImRpc2FibGVkXCIsXz1cInJlYWRvbmx5XCIseT1cImstc3RhdGUtZm9jdXNlZFwiLHc9XCJrLXN0YXRlLXNlbGVjdGVkXCIsYj1cImstc3RhdGUtZGlzYWJsZWRcIixrPVwiay1zdGF0ZS1ob3ZlclwiLHg9XCIua2VuZG9BdXRvQ29tcGxldGVcIixDPVwibW91c2VlbnRlclwiK3grXCIgbW91c2VsZWF2ZVwiK3gsUz1lLnByb3h5LFQ9dS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxyPXRoaXM7ci5ucz14LG49ZS5pc0FycmF5KG4pP3tkYXRhU291cmNlOm59Om4sdS5mbi5pbml0LmNhbGwocix0LG4pLHQ9ci5lbGVtZW50LG49ci5vcHRpb25zLG4ucGxhY2Vob2xkZXI9bi5wbGFjZWhvbGRlcnx8dC5hdHRyKFwicGxhY2Vob2xkZXJcIiksYyYmdC5hdHRyKFwicGxhY2Vob2xkZXJcIixuLnBsYWNlaG9sZGVyKSxyLl93cmFwcGVyKCksci5fbG9hZGVyKCksci5fZGF0YVNvdXJjZSgpLHIuX2lnbm9yZUNhc2UoKSx0WzBdLnR5cGU9XCJ0ZXh0XCIsaT1yLndyYXBwZXIsci5fcG9wdXAoKSx0LmFkZENsYXNzKFwiay1pbnB1dFwiKS5vbihcImtleWRvd25cIit4LFMoci5fa2V5ZG93bixyKSkub24oXCJwYXN0ZVwiK3gsUyhyLl9zZWFyY2gscikpLm9uKFwiZm9jdXNcIit4LGZ1bmN0aW9uKCl7ci5fcHJldj1yLl9hY2Nlc3NvcigpLHIuX3BsYWNlaG9sZGVyKCExKSxpLmFkZENsYXNzKHkpfSkub24oXCJmb2N1c291dFwiK3gsZnVuY3Rpb24oKXtyLl9jaGFuZ2UoKSxyLl9wbGFjZWhvbGRlcigpLGkucmVtb3ZlQ2xhc3MoeSl9KS5hdHRyKHthdXRvY29tcGxldGU6XCJvZmZcIixyb2xlOlwidGV4dGJveFwiLFwiYXJpYS1oYXNwb3B1cFwiOiEwfSksci5fZW5hYmxlKCksci5fb2xkPXIuX2FjY2Vzc29yKCksdFswXS5pZCYmdC5hdHRyKFwiYXJpYS1vd25zXCIsci51bFswXS5pZCksci5fYXJpYSgpLHIuX3BsYWNlaG9sZGVyKCksby5ub3RpZnkocil9LG9wdGlvbnM6e25hbWU6XCJBdXRvQ29tcGxldGVcIixlbmFibGVkOiEwLHN1Z2dlc3Q6ITEsdGVtcGxhdGU6XCJcIixkYXRhVGV4dEZpZWxkOlwiXCIsbWluTGVuZ3RoOjEsZGVsYXk6MjAwLGhlaWdodDoyMDAsZmlsdGVyOlwic3RhcnRzd2l0aFwiLGlnbm9yZUNhc2U6ITAsaGlnaGxpZ2h0Rmlyc3Q6ITEsc2VwYXJhdG9yOm51bGwscGxhY2Vob2xkZXI6XCJcIixhbmltYXRpb246e30sdmFsdWU6bnVsbH0sX2RhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuZGF0YVNvdXJjZSYmZS5fcmVmcmVzaEhhbmRsZXI/ZS5fdW5iaW5kRGF0YVNvdXJjZSgpOihlLl9yZWZyZXNoSGFuZGxlcj1TKGUucmVmcmVzaCxlKSxlLl9wcm9ncmVzc0hhbmRsZXI9UyhlLl9zaG93QnVzeSxlKSksZS5kYXRhU291cmNlPXAuY3JlYXRlKGUub3B0aW9ucy5kYXRhU291cmNlKS5iaW5kKFwiY2hhbmdlXCIsZS5fcmVmcmVzaEhhbmRsZXIpLmJpbmQoXCJwcm9ncmVzc1wiLGUuX3Byb2dyZXNzSGFuZGxlcil9LHNldERhdGFTb3VyY2U6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zLmRhdGFTb3VyY2U9ZSx0aGlzLl9kYXRhU291cmNlKCl9LGV2ZW50czpbXCJvcGVuXCIsXCJjbG9zZVwiLFwiY2hhbmdlXCIsXCJzZWxlY3RcIixcImZpbHRlcmluZ1wiLFwiZGF0YUJpbmRpbmdcIixcImRhdGFCb3VuZFwiXSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe3UuZm4uc2V0T3B0aW9ucy5jYWxsKHRoaXMsZSksdGhpcy5fdGVtcGxhdGUoKSx0aGlzLl9hY2Nlc3NvcnMoKSx0aGlzLl9hcmlhKCl9LF9lZGl0YWJsZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5lbGVtZW50LGk9dC53cmFwcGVyLm9mZih4KSxyPWUucmVhZG9ubHksbz1lLmRpc2FibGU7cnx8bz8oaS5hZGRDbGFzcyhvP2I6bSkucmVtb3ZlQ2xhc3Mobz9tOmIpLG4uYXR0cih2LG8pLmF0dHIoXyxyKS5hdHRyKGYsbykuYXR0cihnLHIpKTooaS5hZGRDbGFzcyhtKS5yZW1vdmVDbGFzcyhiKS5vbihDLHQuX3RvZ2dsZUhvdmVyKSxuLnJlbW92ZUF0dHIodikucmVtb3ZlQXR0cihfKS5hdHRyKGYsITEpLmF0dHIoZywhMSkpfSxjbG9zZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl9jdXJyZW50O3QmJnQucmVtb3ZlQ2xhc3ModyksZS5jdXJyZW50KG51bGwpLGUucG9wdXAuY2xvc2UoKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5lbGVtZW50Lm9mZih4KSxlLndyYXBwZXIub2ZmKHgpLHUuZm4uZGVzdHJveS5jYWxsKGUpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIG4saT10aGlzLHI9aS51bFswXSxhPWkucG9wdXAscz1pLm9wdGlvbnMsYz1pLl9kYXRhKCksZD1jLmxlbmd0aCx1PWkuZWxlbWVudFswXT09PWwoKTtpLl9hbmd1bGFySXRlbXMoXCJjbGVhbnVwXCIpLGkudHJpZ2dlcihcImRhdGFCaW5kaW5nXCIpLHIuaW5uZXJIVE1MPW8ucmVuZGVyKGkudGVtcGxhdGUsYyksaS5faGVpZ2h0KGQpLGEudmlzaWJsZSgpJiZhLl9wb3NpdGlvbigpLGQmJihzLmhpZ2hsaWdodEZpcnN0JiZpLmN1cnJlbnQoZShyLmZpcnN0Q2hpbGQpKSxzLnN1Z2dlc3QmJnUmJmkuc3VnZ2VzdChlKHIuZmlyc3RDaGlsZCkpKSxpLl9vcGVuJiYoaS5fb3Blbj0hMSxuPWQ/XCJvcGVuXCI6XCJjbG9zZVwiLGkuX3R5cGluZyYmIXUmJihuPVwiY2xvc2VcIiksYVtuXSgpLGkuX3R5cGluZz10KSxpLl90b3VjaFNjcm9sbGVyJiZpLl90b3VjaFNjcm9sbGVyLnJlc2V0KCksaS5fbWFrZVVuc2VsZWN0YWJsZSgpLGkuX2hpZGVCdXN5KCksaS5fYW5ndWxhckl0ZW1zKFwiY29tcGlsZVwiKSxpLnRyaWdnZXIoXCJkYXRhQm91bmRcIil9LHNlbGVjdDpmdW5jdGlvbihlKXt0aGlzLl9zZWxlY3QoZSl9LHNlYXJjaDpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMscj1uLm9wdGlvbnMsbz1yLmlnbm9yZUNhc2UsYT1yLnNlcGFyYXRvcjtlPWV8fG4uX2FjY2Vzc29yKCksbi5fY3VycmVudD1udWxsLGNsZWFyVGltZW91dChuLl90eXBpbmcpLGEmJihlPWkocyhuLmVsZW1lbnQpWzBdLGUsYSkpLHQ9ZS5sZW5ndGgsKCF0fHx0Pj1yLm1pbkxlbmd0aCkmJihuLl9vcGVuPSEwLG4uX2ZpbHRlclNvdXJjZSh7dmFsdWU6bz9lLnRvTG93ZXJDYXNlKCk6ZSxvcGVyYXRvcjpyLmZpbHRlcixmaWVsZDpyLmRhdGFUZXh0RmllbGQsaWdub3JlQ2FzZTpvfSkpfSxzdWdnZXN0OmZ1bmN0aW9uKGUpe3ZhciBpLHI9dGhpcyxvPXIuX2xhc3QsYT1yLl9hY2Nlc3NvcigpLGM9ci5lbGVtZW50WzBdLGQ9cyhjKVswXSxwPXIub3B0aW9ucy5zZXBhcmF0b3IsZj1hLnNwbGl0KHApLGc9bihkLGEscCksbT1kO3JldHVybiBvPT1oLkJBQ0tTUEFDRXx8bz09aC5ERUxFVEU/KHIuX2xhc3Q9dCx0KTooZT1lfHxcIlwiLFwic3RyaW5nXCIhPXR5cGVvZiBlJiYoaT11LmluQXJyYXkoZVswXSxyLnVsWzBdKSxlPWk+LTE/ci5fdGV4dChyLl9kYXRhKClbaV0pOlwiXCIpLDA+PWQmJihkPWEudG9Mb3dlckNhc2UoKS5pbmRleE9mKGUudG9Mb3dlckNhc2UoKSkrMSksaT1hLnN1YnN0cmluZygwLGQpLmxhc3RJbmRleE9mKHApLGk9aT4tMT9kLShpK3AubGVuZ3RoKTpkLGE9ZltnXS5zdWJzdHJpbmcoMCxpKSxlJiYoaT1lLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihhLnRvTG93ZXJDYXNlKCkpLGk+LTEmJihlPWUuc3Vic3RyaW5nKGkrYS5sZW5ndGgpLG09ZCtlLmxlbmd0aCxhKz1lKSxwJiZcIlwiIT09ZltmLmxlbmd0aC0xXSYmZi5wdXNoKFwiXCIpKSxmW2ddPWEsci5fYWNjZXNzb3IoZi5qb2luKHB8fFwiXCIpKSxjPT09bCgpJiZzKGMsZCxtKSx0KX0sdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10P3RoaXMuX2FjY2Vzc29yKCk6KHRoaXMuX2FjY2Vzc29yKGUpLHRoaXMuX29sZD10aGlzLl9hY2Nlc3NvcigpLHQpfSxfYWNjZXNzb3I6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4uZWxlbWVudFswXTtyZXR1cm4gZT09PXQ/KGU9aS52YWx1ZSxpLmNsYXNzTmFtZS5pbmRleE9mKFwiay1yZWFkb25seVwiKT4tMSYmZT09PW4ub3B0aW9ucy5wbGFjZWhvbGRlcj9cIlwiOmUpOihpLnZhbHVlPW51bGw9PT1lP1wiXCI6ZSxuLl9wbGFjZWhvbGRlcigpLHQpfSxfYWNjZXB0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZWxlbWVudDt0aGlzLl9mb2N1cyhlKSxzKHQsdC52YWwoKS5sZW5ndGgpfSxfa2V5ZG93bjpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9bi51bFswXSxyPXQua2V5Q29kZSxvPW4uX2N1cnJlbnQsYT1uLnBvcHVwLnZpc2libGUoKTtuLl9sYXN0PXIscj09PWguRE9XTj8oYSYmbi5fbW92ZShvP28ubmV4dCgpOmUoaS5maXJzdENoaWxkKSksdC5wcmV2ZW50RGVmYXVsdCgpKTpyPT09aC5VUD8oYSYmbi5fbW92ZShvP28ucHJldigpOmUoaS5sYXN0Q2hpbGQpKSx0LnByZXZlbnREZWZhdWx0KCkpOnI9PT1oLkVOVEVSfHxyPT09aC5UQUI/KHI9PT1oLkVOVEVSJiZuLnBvcHVwLnZpc2libGUoKSYmdC5wcmV2ZW50RGVmYXVsdCgpLG4uX2FjY2VwdChvKSk6cj09PWguRVNDPyhuLnBvcHVwLnZpc2libGUoKSYmdC5wcmV2ZW50RGVmYXVsdCgpLG4uY2xvc2UoKSk6bi5fc2VhcmNoKCl9LF9tb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZT1lWzBdP2U6bnVsbCx0LmN1cnJlbnQoZSksdC5vcHRpb25zLnN1Z2dlc3QmJnQuc3VnZ2VzdChlKX0sX2hpZGVCdXN5OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztjbGVhclRpbWVvdXQoZS5fYnVzeSksZS5fbG9hZGluZy5oaWRlKCksZS5lbGVtZW50LmF0dHIoXCJhcmlhLWJ1c3lcIiwhMSksZS5fYnVzeT1udWxsfSxfc2hvd0J1c3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2J1c3l8fChlLl9idXN5PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLmVsZW1lbnQuYXR0cihcImFyaWEtYnVzeVwiLCEwKSxlLl9sb2FkaW5nLnNob3coKX0sMTAwKSl9LF9wbGFjZWhvbGRlcjpmdW5jdGlvbihlKXtpZighYyl7dmFyIG4saT10aGlzLHI9aS5lbGVtZW50LG89aS5vcHRpb25zLnBsYWNlaG9sZGVyO2lmKG8pe2lmKG49ci52YWwoKSxlPT09dCYmKGU9IW4pLGV8fChvPW4hPT1vP246XCJcIiksbj09PWkuX29sZCYmIWUpcmV0dXJuO3IudG9nZ2xlQ2xhc3MoXCJrLXJlYWRvbmx5XCIsZSkudmFsKG8pLG98fHJbMF0hPT1kb2N1bWVudC5hY3RpdmVFbGVtZW50fHxzKHJbMF0sMCwwKX19fSxfc2VhcmNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztjbGVhclRpbWVvdXQoZS5fdHlwaW5nKSxlLl90eXBpbmc9c2V0VGltZW91dChmdW5jdGlvbigpe2UuX3ByZXYhPT1lLl9hY2Nlc3NvcigpJiYoZS5fcHJldj1lLl9hY2Nlc3NvcigpLGUuc2VhcmNoKCkpfSxlLm9wdGlvbnMuZGVsYXkpfSxfc2VsZWN0OmZ1bmN0aW9uKHQpe3ZhciBuLGksbz10aGlzLGE9by5vcHRpb25zLnNlcGFyYXRvcixsPW8uX2RhdGEoKTt0PWUodCksdFswXSYmIXQuaGFzQ2xhc3ModykmJihpPXUuaW5BcnJheSh0WzBdLG8udWxbMF0pLGk+LTEmJihsPWxbaV0sbj1vLl90ZXh0KGwpLGEmJihuPXIocyhvLmVsZW1lbnQpWzBdLG8uX2FjY2Vzc29yKCksbixhKSksby5fYWNjZXNzb3Iobiksby5fcHJldj1vLl9hY2Nlc3NvcigpLG8uY3VycmVudCh0LmFkZENsYXNzKHcpKSkpfSxfbG9hZGVyOmZ1bmN0aW9uKCl7dGhpcy5fbG9hZGluZz1lKCc8c3BhbiBjbGFzcz1cImstaWNvbiBrLWxvYWRpbmdcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPjwvc3Bhbj4nKS5pbnNlcnRBZnRlcih0aGlzLmVsZW1lbnQpfSxfdG9nZ2xlSG92ZXI6ZnVuY3Rpb24odCl7ZSh0LmN1cnJlbnRUYXJnZXQpLnRvZ2dsZUNsYXNzKGssXCJtb3VzZWVudGVyXCI9PT10LnR5cGUpfSxfd3JhcHBlcjpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQuZWxlbWVudCxpPW5bMF07ZT1uLnBhcmVudCgpLGUuaXMoXCJzcGFuLmstd2lkZ2V0XCIpfHwoZT1uLndyYXAoXCI8c3BhbiAvPlwiKS5wYXJlbnQoKSksZS5hdHRyKFwidGFiaW5kZXhcIiwtMSksZS5hdHRyKFwicm9sZVwiLFwicHJlc2VudGF0aW9uXCIpLGVbMF0uc3R5bGUuY3NzVGV4dD1pLnN0eWxlLmNzc1RleHQsbi5jc3Moe3dpZHRoOlwiMTAwJVwiLGhlaWdodDppLnN0eWxlLmhlaWdodH0pLHQuX2ZvY3VzZWQ9dC5lbGVtZW50LHQud3JhcHBlcj1lLmFkZENsYXNzKFwiay13aWRnZXQgay1hdXRvY29tcGxldGUgay1oZWFkZXJcIikuYWRkQ2xhc3MoaS5jbGFzc05hbWUpfX0pO2QucGx1Z2luKFQpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSx0LG4pe2Zvcih2YXIgaSxyPTAsbz10Lmxlbmd0aC0xO28+cjsrK3IpaT10W3JdLGkgaW4gZXx8KGVbaV09e30pLGU9ZVtpXTtlW3Rbb11dPW59dmFyIGk9d2luZG93LmtlbmRvLHI9aS51aSxvPXIuU2VsZWN0LGE9aS5zdXBwb3J0Lm1vYmlsZU9TLHM9aS5fYWN0aXZlRWxlbWVudCxsPWkua2V5cyxjPVwiLmtlbmRvRHJvcERvd25MaXN0XCIsZD1cImRpc2FibGVkXCIsdT1cInJlYWRvbmx5XCIsaD1cImNoYW5nZVwiLHA9XCJrLXN0YXRlLWZvY3VzZWRcIixmPVwiay1zdGF0ZS1kZWZhdWx0XCIsZz1cImstc3RhdGUtZGlzYWJsZWRcIixtPVwiYXJpYS1kaXNhYmxlZFwiLHY9XCJhcmlhLXJlYWRvbmx5XCIsXz1cImstc3RhdGUtc2VsZWN0ZWRcIix5PVwibW91c2VlbnRlclwiK2MrXCIgbW91c2VsZWF2ZVwiK2Msdz1cInRhYmluZGV4XCIsYj1cImZpbHRlclwiLGs9XCJhY2NlcHRcIix4PWUucHJveHksQz1vLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihuLHIpe3ZhciBhLHMsbCxkPXRoaXMsdT1yJiZyLmluZGV4O2QubnM9YyxyPWUuaXNBcnJheShyKT97ZGF0YVNvdXJjZTpyfTpyLG8uZm4uaW5pdC5jYWxsKGQsbixyKSxyPWQub3B0aW9ucyxuPWQuZWxlbWVudC5vbihcImZvY3VzXCIrYyx4KGQuX2ZvY3VzSGFuZGxlcixkKSksZC5faW5wdXRUZW1wbGF0ZSgpLGQuX3Jlc2V0KCksZC5fcHJldj1cIlwiLGQuX3dvcmQ9XCJcIixkLl93cmFwcGVyKCksZC5fdGFiaW5kZXgoKSxkLndyYXBwZXIuZGF0YSh3LGQud3JhcHBlci5hdHRyKHcpKSxkLl9zcGFuKCksZC5fcG9wdXAoKSxkLl9tb2JpbGUoKSxkLl9kYXRhU291cmNlKCksZC5faWdub3JlQ2FzZSgpLGQuX2ZpbHRlckhlYWRlcigpLGQuX2FyaWEoKSxkLl9lbmFibGUoKSxkLl9vbGRJbmRleD1kLnNlbGVjdGVkSW5kZXg9LTEsZC5fY2FzY2FkZSgpLHUhPT10JiYoci5pbmRleD11KSxyLmF1dG9CaW5kP2QuZGF0YVNvdXJjZS5mZXRjaCgpOi0xPT09ZC5zZWxlY3RlZEluZGV4JiYobD1yLnRleHR8fFwiXCIsbHx8KGE9ci5vcHRpb25MYWJlbCxzPWEmJjA9PT1yLmluZGV4LGQuX2lzU2VsZWN0P2w9cz9hOm4uY2hpbGRyZW4oXCI6c2VsZWN0ZWRcIikudGV4dCgpOiFuWzBdLnZhbHVlJiZzJiYobD1hKSksZC5fdGV4dEFjY2Vzc29yKGwpKSxpLm5vdGlmeShkKX0sb3B0aW9uczp7bmFtZTpcIkRyb3BEb3duTGlzdFwiLGVuYWJsZWQ6ITAsYXV0b0JpbmQ6ITAsaW5kZXg6MCx0ZXh0Om51bGwsdmFsdWU6bnVsbCx0ZW1wbGF0ZTpcIlwiLHZhbHVlVGVtcGxhdGU6XCJcIixkZWxheTo1MDAsaGVpZ2h0OjIwMCxkYXRhVGV4dEZpZWxkOlwiXCIsZGF0YVZhbHVlRmllbGQ6XCJcIixvcHRpb25MYWJlbDpcIlwiLGNhc2NhZGVGcm9tOlwiXCIsY2FzY2FkZUZyb21GaWVsZDpcIlwiLGlnbm9yZUNhc2U6ITAsYW5pbWF0aW9uOnt9LGZpbHRlcjpcIm5vbmVcIixtaW5MZW5ndGg6MX0sZXZlbnRzOltcIm9wZW5cIixcImNsb3NlXCIsaCxcInNlbGVjdFwiLFwiZmlsdGVyaW5nXCIsXCJkYXRhQmluZGluZ1wiLFwiZGF0YUJvdW5kXCIsXCJjYXNjYWRlXCJdLHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7by5mbi5zZXRPcHRpb25zLmNhbGwodGhpcyxlKSx0aGlzLl90ZW1wbGF0ZSgpLHRoaXMuX2lucHV0VGVtcGxhdGUoKSx0aGlzLl9hY2Nlc3NvcnMoKSx0aGlzLl9maWx0ZXJIZWFkZXIoKSx0aGlzLl9lbmFibGUoKSx0aGlzLl9hcmlhKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Uud3JhcHBlci5vZmYoYyksZS5lbGVtZW50Lm9mZihjKSxlLl9pbnB1dFdyYXBwZXIub2ZmKGMpLGUuX2Fycm93Lm9mZigpLGUuX2Fycm93PW51bGwsby5mbi5kZXN0cm95LmNhbGwoZSl9LG9wZW46ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UucG9wdXAudmlzaWJsZSgpfHwoZS51bFswXS5maXJzdENoaWxkJiZlLl9zdGF0ZSE9PWs/KGUucG9wdXAub3BlbigpLGUuX2ZvY3VzRWxlbWVudChlLmZpbHRlcklucHV0KSxlLl9zY3JvbGwoZS5fY3VycmVudCkpOihlLl9vcGVuPSEwLGUuX3N0YXRlPVwicmViaW5kXCIsZS5maWx0ZXJJbnB1dCYmZS5maWx0ZXJJbnB1dC52YWwoXCJcIiksZS5fZmlsdGVyU291cmNlKCkpKX0sdG9nZ2xlOmZ1bmN0aW9uKGUpe3RoaXMuX3RvZ2dsZShlLCEwKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciB0LG4scj10aGlzLG89ci5fZGF0YSgpLGE9by5sZW5ndGgscz1yLm9wdGlvbnMub3B0aW9uTGFiZWwsbD1yLl9zdGF0ZT09PWIsYz1yLmVsZW1lbnRbMF07ci50cmlnZ2VyKFwiZGF0YUJpbmRpbmdcIiksci5fY3VycmVudCYmci5jdXJyZW50KG51bGwpLHIuX2FuZ3VsYXJJdGVtcyhcImNsZWFudXBcIiksci51bFswXS5pbm5lckhUTUw9aS5yZW5kZXIoci50ZW1wbGF0ZSxvKSxyLl9hbmd1bGFySXRlbXMoXCJjb21waWxlXCIpLHIuX2hlaWdodChsP2F8fDE6YSksci5wb3B1cC52aXNpYmxlKCkmJnIucG9wdXAuX3Bvc2l0aW9uKCksci5faXNTZWxlY3QmJih0PWMuc2VsZWN0ZWRJbmRleCxuPXIudmFsdWUoKSxhP3MmJihzPXIuX29wdGlvbihcIlwiLHIuX29wdGlvbkxhYmVsVGV4dChzKSkpOm4mJih0PTAscz1yLl9vcHRpb24obixyLnRleHQoKSkpLHIuX29wdGlvbnMobyxzKSxjLnNlbGVjdGVkSW5kZXg9LTE9PT10PzA6dCksci5faGlkZUJ1c3koKSxyLl9tYWtlVW5zZWxlY3RhYmxlKCksbD9yLmN1cnJlbnQoZShyLnVsWzBdLmZpcnN0Q2hpbGQpKTooci5fb3BlbiYmci50b2dnbGUoISFhKSxyLl9vcGVuPSExLHIuX2ZldGNofHwoYT9yLl9zZWxlY3RJdGVtKCk6ci5fdGV4dEFjY2Vzc29yKCkhPT1zJiYoci5lbGVtZW50LnZhbChcIlwiKSxyLl90ZXh0QWNjZXNzb3IoXCJcIikpKSksci5fYm91bmQ9ISFhLHIudHJpZ2dlcihcImRhdGFCb3VuZFwiKX0sdGV4dDpmdW5jdGlvbihlKXt2YXIgbixpLHI9dGhpcyxvPXIub3B0aW9ucy5pZ25vcmVDYXNlO3JldHVybiBlPW51bGw9PT1lP1wiXCI6ZSxlPT09dD9yLl90ZXh0QWNjZXNzb3IoKTooXCJzdHJpbmdcIj09dHlwZW9mIGUmJihpPW8/ZS50b0xvd2VyQ2FzZSgpOmUsbj1yLl9zZWxlY3QoZnVuY3Rpb24oZSl7cmV0dXJuIGU9ci5fdGV4dChlKSxvJiYoZT0oZStcIlwiKS50b0xvd2VyQ2FzZSgpKSxlPT09aX0pLG4mJihlPW4pKSxyLl90ZXh0QWNjZXNzb3IoZSksdCl9LHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuLGkscj10aGlzO3JldHVybiBlPT09dD9yLl9hY2Nlc3NvcigpOihudWxsIT09ZSYmKGU9XCJcIitlKSxyLl9zZWxlY3RlZFZhbHVlPWUsaT1lfHxyLm9wdGlvbnMub3B0aW9uTGFiZWwmJiFyLmVsZW1lbnRbMF0uZGlzYWJsZWQmJlwiXCI9PT1lLGkmJnIuX2ZldGNoSXRlbXMoZSl8fChuPXIuX2luZGV4KGUpLHIuc2VsZWN0KG4+LTE/bjowKSksdCl9LF9mb2N1c0hhbmRsZXI6ZnVuY3Rpb24oKXt0aGlzLndyYXBwZXIuZm9jdXMoKX0sX2ZvY3VzaW5IYW5kbGVyOmZ1bmN0aW9uKCl7dGhpcy5faW5wdXRXcmFwcGVyLmFkZENsYXNzKHApLHRoaXMuX3ByZXZlbnQ9ITF9LF9mb2N1c291dEhhbmRsZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5fc3RhdGU9PT1iLG49d2luZG93LnNlbGYhPT13aW5kb3cudG9wO2UuX3ByZXZlbnR8fCh0JiZlLl9zZWxlY3QoZS5fY3VycmVudCksKCF0fHxlLmRhdGFJdGVtKCkpJiZlLl90cmlnZ2VyQ2FzY2FkZSgpLGkuc3VwcG9ydC5tb2JpbGVPUy5pb3MmJm4/ZS5fY2hhbmdlKCk6ZS5fYmx1cigpLGUuX2lucHV0V3JhcHBlci5yZW1vdmVDbGFzcyhwKSxlLl9wcmV2ZW50PSEwLGUuX29wZW49ITEsZS5lbGVtZW50LmJsdXIoKSl9LF93cmFwcGVyTW91c2Vkb3duOmZ1bmN0aW9uKCl7dGhpcy5fcHJldmVudD0hIXRoaXMuZmlsdGVySW5wdXR9LF93cmFwcGVyQ2xpY2s6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX2ZvY3VzZWQ9dGhpcy53cmFwcGVyLHRoaXMuX3RvZ2dsZSgpfSxfZWRpdGFibGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudCxpPWUuZGlzYWJsZSxyPWUucmVhZG9ubHksbz10LndyYXBwZXIuYWRkKHQuZmlsdGVySW5wdXQpLm9mZihjKSxhPXQuX2lucHV0V3JhcHBlci5vZmYoeSk7cnx8aT9pPyhvLnJlbW92ZUF0dHIodyksYS5hZGRDbGFzcyhnKS5yZW1vdmVDbGFzcyhmKSk6KGEuYWRkQ2xhc3MoZikucmVtb3ZlQ2xhc3MoZyksby5vbihcImZvY3VzaW5cIitjLHgodC5fZm9jdXNpbkhhbmRsZXIsdCkpLm9uKFwiZm9jdXNvdXRcIitjLHgodC5fZm9jdXNvdXRIYW5kbGVyLHQpKSk6KG4ucmVtb3ZlQXR0cihkKS5yZW1vdmVBdHRyKHUpLGEuYWRkQ2xhc3MoZikucmVtb3ZlQ2xhc3MoZykub24oeSx0Ll90b2dnbGVIb3Zlciksby5hdHRyKHcsby5kYXRhKHcpKS5hdHRyKG0sITEpLmF0dHIodiwhMSkub24oXCJrZXlkb3duXCIrYyx4KHQuX2tleWRvd24sdCkpLm9uKFwiZm9jdXNpblwiK2MseCh0Ll9mb2N1c2luSGFuZGxlcix0KSkub24oXCJmb2N1c291dFwiK2MseCh0Ll9mb2N1c291dEhhbmRsZXIsdCkpLm9uKFwibW91c2Vkb3duXCIrYyx4KHQuX3dyYXBwZXJNb3VzZWRvd24sdCkpLHQud3JhcHBlci5vbihcImNsaWNrXCIrYyx4KHQuX3dyYXBwZXJDbGljayx0KSksdC5maWx0ZXJJbnB1dHx8by5vbihcImtleXByZXNzXCIrYyx4KHQuX2tleXByZXNzLHQpKSksbi5hdHRyKGQsaSkuYXR0cih1LHIpLG8uYXR0cihtLGkpLmF0dHIodixyKX0sX2FjY2VwdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1uLmZpbHRlcklucHV0JiZuLmZpbHRlcklucHV0WzBdPT09cygpO24uX2ZvY3VzKGUpLG4uX2ZvY3VzRWxlbWVudChuLndyYXBwZXIpLGkmJnQ9PT1sLlRBQiYmbi53cmFwcGVyLmZvY3Vzb3V0KCl9LF9vcHRpb246ZnVuY3Rpb24oZSx0KXtyZXR1cm4nPG9wdGlvbiB2YWx1ZT1cIicrZSsnXCI+Jyt0K1wiPC9vcHRpb24+XCJ9LF9vcHRpb25MYWJlbFRleHQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMsdD1lLmRhdGFUZXh0RmllbGQsbj1lLm9wdGlvbkxhYmVsO3JldHVybiBuJiZ0JiZcIm9iamVjdFwiPT10eXBlb2Ygbj90aGlzLl90ZXh0KG4pOm59LF9kYXRhOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUub3B0aW9ucyxyPXQub3B0aW9uTGFiZWwsbz10LmRhdGFUZXh0RmllbGQsYT10LmRhdGFWYWx1ZUZpZWxkLHM9ZS5kYXRhU291cmNlLnZpZXcoKSxsPXMubGVuZ3RoLGM9cixkPTA7aWYociYmbCl7Zm9yKFwib2JqZWN0XCI9PXR5cGVvZiByP2M9cjpvJiYoYz17fSxvPW8uc3BsaXQoXCIuXCIpLGE9YS5zcGxpdChcIi5cIiksbihjLGEsXCJcIiksbihjLG8scikpLGM9bmV3IGkuZGF0YS5PYnNlcnZhYmxlQXJyYXkoW2NdKTtsPmQ7ZCsrKWMucHVzaChzW2RdKTtzPWN9cmV0dXJuIHN9LF9zZWxlY3RJdGVtOmZ1bmN0aW9uKCl7by5mbi5fc2VsZWN0SXRlbS5jYWxsKHRoaXMpLHRoaXMuY3VycmVudCgpfHx0aGlzLnNlbGVjdCgwKX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLGk9ZS5rZXlDb2RlLHI9ZS5hbHRLZXksbz1uLnVsWzBdO2k9PT1sLkxFRlQ/aT1sLlVQOmk9PT1sLlJJR0hUJiYoaT1sLkRPV04pLGUua2V5Q29kZT1pLHQ9bi5fbW92ZShlKSxuLnBvcHVwLnZpc2libGUoKSYmbi5maWx0ZXJJbnB1dHx8KGk9PT1sLkhPTUU/KHQ9ITAsZS5wcmV2ZW50RGVmYXVsdCgpLG4uX3NlbGVjdChvLmZpcnN0Q2hpbGQpKTppPT09bC5FTkQmJih0PSEwLGUucHJldmVudERlZmF1bHQoKSxuLl9zZWxlY3Qoby5sYXN0Q2hpbGQpKSksciYmaT09PWwuVVAmJm4uX2ZvY3VzRWxlbWVudChuLndyYXBwZXIpLHJ8fHR8fCFuLmZpbHRlcklucHV0fHxuLl9zZWFyY2goKX0sX3NlbGVjdE5leHQ6ZnVuY3Rpb24oZSxuKXtmb3IodmFyIGkscj10aGlzLG89bixhPXIuX2RhdGEoKSxzPWEubGVuZ3RoLGw9ci5vcHRpb25zLmlnbm9yZUNhc2UsYz1mdW5jdGlvbihuLGkpe3JldHVybiBuKz1cIlwiLGwmJihuPW4udG9Mb3dlckNhc2UoKSksMD09PW4uaW5kZXhPZihlKT8oci5fc2VsZWN0KGkpLHIuX3RyaWdnZXJFdmVudHMoKSwhMCk6dH07cz5uO24rKylpZihpPXIuX3RleHQoYVtuXSksaSYmYyhpLG4pKXJldHVybiEwO2lmKG8+MCYmcz5vKWZvcihuPTA7bz49bjtuKyspaWYoaT1yLl90ZXh0KGFbbl0pLGkmJmMoaSxuKSlyZXR1cm4hMDtyZXR1cm4hMX0sX2tleXByZXNzOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixvPXRoaXM7MCE9PWUud2hpY2gmJmUua2V5Q29kZSE9PWkua2V5cy5FTlRFUiYmKHQ9U3RyaW5nLmZyb21DaGFyQ29kZShlLmNoYXJDb2RlfHxlLmtleUNvZGUpLG49by5zZWxlY3RlZEluZGV4LHI9by5fd29yZCxvLm9wdGlvbnMuaWdub3JlQ2FzZSYmKHQ9dC50b0xvd2VyQ2FzZSgpKSxcIiBcIj09PXQmJmUucHJldmVudERlZmF1bHQoKSxvLl9sYXN0PT09dCYmMT49ci5sZW5ndGgmJm4+LTEmJihyfHwocj10KSxvLl9zZWxlY3ROZXh0KHIsbisxKSl8fChvLl93b3JkPXIrdCxvLl9sYXN0PXQsby5fc2VhcmNoKCkpKX0sX3BvcHVwT3BlbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMucG9wdXA7ZS53cmFwcGVyPWkud3JhcChlLmVsZW1lbnQpLGUuZWxlbWVudC5jbG9zZXN0KFwiLmttLXJvb3RcIilbMF0mJihlLndyYXBwZXIuYWRkQ2xhc3MoXCJrbS1wb3B1cCBrbS13aWRnZXRcIiksdGhpcy53cmFwcGVyLmFkZENsYXNzKFwia20td2lkZ2V0XCIpKX0sX3BvcHVwOmZ1bmN0aW9uKCl7by5mbi5fcG9wdXAuY2FsbCh0aGlzKSx0aGlzLnBvcHVwLm9uZShcIm9wZW5cIix4KHRoaXMuX3BvcHVwT3Blbix0aGlzKSl9LF9mb2N1c0VsZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9cygpLG49dGhpcy53cmFwcGVyLGk9dGhpcy5maWx0ZXJJbnB1dCxyPWU9PT1pP246aTtpJiZyWzBdPT09dCYmKHRoaXMuX3ByZXZlbnQ9ITAsdGhpcy5fZm9jdXNlZD1lLmZvY3VzKCkpfSxfZmlsdGVyOmZ1bmN0aW9uKGUpe3ZhciBuLGk7ZSYmKG49dGhpcyxpPW4ub3B0aW9ucy5pZ25vcmVDYXNlLGkmJihlPWUudG9Mb3dlckNhc2UoKSksbi5fc2VsZWN0KGZ1bmN0aW9uKHIpe3ZhciBvPW4uX3RleHQocik7cmV0dXJuIG8hPT10PyhvKz1cIlwiLGkmJihvPW8udG9Mb3dlckNhc2UoKSksMD09PW8uaW5kZXhPZihlKSk6dH0pKX0sX3NlYXJjaDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsbj1lLmRhdGFTb3VyY2UsaT1lLnNlbGVjdGVkSW5kZXgscj1lLl93b3JkO2lmKGNsZWFyVGltZW91dChlLl90eXBpbmcpLFwibm9uZVwiIT09ZS5vcHRpb25zLmZpbHRlcillLl90eXBpbmc9c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0PWUuZmlsdGVySW5wdXQudmFsKCk7ZS5fcHJldiE9PXQmJihlLl9wcmV2PXQsZS5zZWFyY2godCkpLGUuX3R5cGluZz1udWxsfSxlLm9wdGlvbnMuZGVsYXkpO2Vsc2V7aWYoZS5fdHlwaW5nPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLl93b3JkPVwiXCJ9LGUub3B0aW9ucy5kZWxheSksLTE9PT1pJiYoaT0wKSwhZS51bFswXS5maXJzdENoaWxkKXJldHVybiBuLm9uZShoLGZ1bmN0aW9uKCl7bi5kYXRhKClbMF0mJmk+LTEmJmUuX3NlbGVjdE5leHQocixpKX0pLmZldGNoKCksdDtlLl9zZWxlY3ROZXh0KHIsaSksZS5fdHJpZ2dlckV2ZW50cygpfX0sX3NlbGVjdDpmdW5jdGlvbihlKXt2YXIgbixpLG89dGhpcyxhPW8uX2N1cnJlbnQscz1udWxsO3JldHVybiBlPW8uX2dldChlKSxlJiZlWzBdJiYhZS5oYXNDbGFzcyhfKSYmKG8uX3N0YXRlPT09YiYmKG8uX3N0YXRlPWspLGEmJmEucmVtb3ZlQ2xhc3MoXyksaT1yLkxpc3QuaW5BcnJheShlWzBdLG8udWxbMF0pLGk+LTEmJihvLnNlbGVjdGVkSW5kZXg9aSxzPW8uX2RhdGEoKVtpXSxuPW8uX3ZhbHVlKHMpLG51bGw9PT1uJiYobj1cIlwiKSxvLl90ZXh0QWNjZXNzb3Iocyksby5fYWNjZXNzb3IobiE9PXQ/bjpvLl90ZXh0KHMpLGkpLG8uX3NlbGVjdGVkVmFsdWU9by5fYWNjZXNzb3IoKSxvLmN1cnJlbnQoZS5hZGRDbGFzcyhfKSksby5fb3B0aW9uSUQmJm8uX2N1cnJlbnQuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMCkpKSxzfSxfdHJpZ2dlckV2ZW50czpmdW5jdGlvbigpe3RoaXMucG9wdXAudmlzaWJsZSgpfHwodGhpcy5fdHJpZ2dlckNhc2NhZGUoKSx0aGlzLl9jaGFuZ2UoKSl9LF9tb2JpbGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5wb3B1cCxuPXQuZWxlbWVudC5wYXJlbnRzKFwiLmttLXJvb3RcIikuZXEoMCk7bi5sZW5ndGgmJmEmJih0Lm9wdGlvbnMuYW5pbWF0aW9uLm9wZW4uZWZmZWN0cz1hLmFuZHJvaWR8fGEubWVlZ28/XCJmYWRlSW5cIjphLmlvc3x8YS53cD9cInNsaWRlSW46dXBcIjp0Lm9wdGlvbnMuYW5pbWF0aW9uLm9wZW4uZWZmZWN0cyl9LF9maWx0ZXJIZWFkZXI6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMub3B0aW9ucyxpPVwibm9uZVwiIT09bi5maWx0ZXI7dGhpcy5maWx0ZXJJbnB1dCYmKHRoaXMuZmlsdGVySW5wdXQub2ZmKGMpLnBhcmVudCgpLnJlbW92ZSgpLHRoaXMuZmlsdGVySW5wdXQ9bnVsbCksaSYmKHQ9JzxzcGFuIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLWljb24gay1pLXNlYXJjaFwiPnNlbGVjdDwvc3Bhbj4nLHRoaXMuZmlsdGVySW5wdXQ9ZSgnPGlucHV0IGNsYXNzPVwiay10ZXh0Ym94XCIvPicpLmF0dHIoe3JvbGU6XCJsaXN0Ym94XCIsXCJhcmlhLWhhc3BvcHVwXCI6ITAsXCJhcmlhLWV4cGFuZGVkXCI6ITF9KSx0aGlzLmxpc3QucHJlcGVuZChlKCc8c3BhbiBjbGFzcz1cImstbGlzdC1maWx0ZXJcIiAvPicpLmFwcGVuZCh0aGlzLmZpbHRlcklucHV0LmFkZCh0KSkpKX0sX3NwYW46ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLndyYXBwZXIscj1cInNwYW4uay1pbnB1dFwiO3Q9aS5maW5kKHIpLHRbMF18fChpLmFwcGVuZCgnPHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstZHJvcGRvd24td3JhcCBrLXN0YXRlLWRlZmF1bHRcIj48c3BhbiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1pbnB1dFwiPiZuYnNwOzwvc3Bhbj48c3BhbiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1zZWxlY3RcIj48c3BhbiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy1zXCI+c2VsZWN0PC9zcGFuPjwvc3Bhbj48L3NwYW4+JykuYXBwZW5kKG4uZWxlbWVudCksdD1pLmZpbmQocikpLG4uc3Bhbj10LG4uX2lucHV0V3JhcHBlcj1lKGlbMF0uZmlyc3RDaGlsZCksbi5fYXJyb3c9aS5maW5kKFwiLmstaWNvblwiKX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10LmVsZW1lbnQsaT1uWzBdO2U9bi5wYXJlbnQoKSxlLmlzKFwic3Bhbi5rLXdpZGdldFwiKXx8KGU9bi53cmFwKFwiPHNwYW4gLz5cIikucGFyZW50KCksZVswXS5zdHlsZS5jc3NUZXh0PWkuc3R5bGUuY3NzVGV4dCksbi5oaWRlKCksdC5fZm9jdXNlZD10LndyYXBwZXI9ZS5hZGRDbGFzcyhcImstd2lkZ2V0IGstZHJvcGRvd24gay1oZWFkZXJcIikuYWRkQ2xhc3MoaS5jbGFzc05hbWUpLmNzcyhcImRpc3BsYXlcIixcIlwiKS5hdHRyKHt1bnNlbGVjdGFibGU6XCJvblwiLHJvbGU6XCJsaXN0Ym94XCIsXCJhcmlhLWhhc3BvcHVwXCI6ITAsXCJhcmlhLWV4cGFuZGVkXCI6ITF9KX0sX2NsZWFyU2VsZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxuPWUub3B0aW9ucy5vcHRpb25MYWJlbDtyZXR1cm4gZS5vcHRpb25zLnZhbHVlPVwiXCIsZS5fc2VsZWN0ZWRWYWx1ZT1cIlwiLGUuZGF0YVNvdXJjZS52aWV3KClbMF0mJihufHxlLl91c2VyVHJpZ2dlcmVkKT8oZS5zZWxlY3QoMCksdCk6KGUuc2VsZWN0ZWRJbmRleD0tMSxlLmVsZW1lbnQudmFsKFwiXCIpLGUuX3RleHRBY2Nlc3NvcihlLm9wdGlvbnMub3B0aW9uTGFiZWwpLHQpfSxfaW5wdXRUZW1wbGF0ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMudmFsdWVUZW1wbGF0ZTtuPW4/aS50ZW1wbGF0ZShuKTplLnByb3h5KGkudGVtcGxhdGUoXCIjOnRoaXMuX3RleHQoZGF0YSkjXCIse3VzZVdpdGhCbG9jazohMX0pLHQpLHQudmFsdWVUZW1wbGF0ZT1ufSxfdGV4dEFjY2Vzc29yOmZ1bmN0aW9uKHIpe3ZhciBvLGE9dGhpcy5kYXRhSXRlbSgpLHM9dGhpcy5vcHRpb25zLGw9dGhpcy5zcGFuO3JldHVybiByPT09dD9sLnRleHQoKTooZS5pc1BsYWluT2JqZWN0KHIpfHxyIGluc3RhbmNlb2YgaS5kYXRhLk9ic2VydmFibGVPYmplY3Q/YT1yOmEmJnRoaXMuX3RleHQoYSk9PT1yfHwocy5kYXRhVGV4dEZpZWxkPyhhPXt9LG4oYSxzLmRhdGFUZXh0RmllbGQuc3BsaXQoXCIuXCIpLHIpLG4oYSxzLmRhdGFWYWx1ZUZpZWxkLnNwbGl0KFwiLlwiKSx0aGlzLl9hY2Nlc3NvcigpKSk6YT1yKSxvPWZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmwuZ2V0KCksZGF0YTpbe2RhdGFJdGVtOmF9XX19LHRoaXMuYW5ndWxhcihcImNsZWFudXBcIixvKSxsLmh0bWwodGhpcy52YWx1ZVRlbXBsYXRlKGEpKSx0aGlzLmFuZ3VsYXIoXCJjb21waWxlXCIsbyksdCl9fSk7ci5wbHVnaW4oQyl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG49d2luZG93LmtlbmRvLGk9bi51aSxyPWkuTGlzdCxvPWkuU2VsZWN0LGE9bi5jYXJldCxzPW4uc3VwcG9ydCxsPXMucGxhY2Vob2xkZXIsYz1uLl9hY3RpdmVFbGVtZW50LGQ9bi5rZXlzLHU9XCIua2VuZG9Db21ib0JveFwiLGg9XCJjbGlja1wiK3UscD1cIm1vdXNlZG93blwiK3UsZj1cImRpc2FibGVkXCIsZz1cInJlYWRvbmx5XCIsbT1cImNoYW5nZVwiLHY9XCJrLXN0YXRlLWRlZmF1bHRcIixfPVwiay1zdGF0ZS1mb2N1c2VkXCIseT1cImstc3RhdGUtZGlzYWJsZWRcIix3PVwiYXJpYS1kaXNhYmxlZFwiLGI9XCJhcmlhLXJlYWRvbmx5XCIsaz1cImstc3RhdGUtc2VsZWN0ZWRcIix4PVwiZmlsdGVyXCIsQz1cImFjY2VwdFwiLFM9XCJyZWJpbmRcIixUPVwibW91c2VlbnRlclwiK3UrXCIgbW91c2VsZWF2ZVwiK3UsRD1udWxsLEE9ZS5wcm94eSxFPW8uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsaSl7dmFyIHIsYT10aGlzO1xyXG5hLm5zPXUsaT1lLmlzQXJyYXkoaSk/e2RhdGFTb3VyY2U6aX06aSxvLmZuLmluaXQuY2FsbChhLHQsaSksaT1hLm9wdGlvbnMsdD1hLmVsZW1lbnQub24oXCJmb2N1c1wiK3UsQShhLl9mb2N1c0hhbmRsZXIsYSkpLGkucGxhY2Vob2xkZXI9aS5wbGFjZWhvbGRlcnx8dC5hdHRyKFwicGxhY2Vob2xkZXJcIiksYS5fcmVzZXQoKSxhLl93cmFwcGVyKCksYS5faW5wdXQoKSxhLl90YWJpbmRleChhLmlucHV0KSxhLl9wb3B1cCgpLGEuX2RhdGFTb3VyY2UoKSxhLl9pZ25vcmVDYXNlKCksYS5fZW5hYmxlKCksYS5fb2xkSW5kZXg9YS5zZWxlY3RlZEluZGV4PS0xLGEuX2Nhc2NhZGUoKSxhLl9hcmlhKCksaS5hdXRvQmluZD9hLl9maWx0ZXJTb3VyY2UoKToocj1pLnRleHQsIXImJmEuX2lzU2VsZWN0JiYocj10LmNoaWxkcmVuKFwiOnNlbGVjdGVkXCIpLnRleHQoKSksciYmKGEuaW5wdXQudmFsKHIpLGEuX3ByZXY9cikpLHJ8fGEuX3BsYWNlaG9sZGVyKCksbi5ub3RpZnkoYSl9LG9wdGlvbnM6e25hbWU6XCJDb21ib0JveFwiLGVuYWJsZWQ6ITAsaW5kZXg6LTEsdGV4dDpudWxsLHZhbHVlOm51bGwsYXV0b0JpbmQ6ITAsZGVsYXk6MjAwLGRhdGFUZXh0RmllbGQ6XCJcIixkYXRhVmFsdWVGaWVsZDpcIlwiLG1pbkxlbmd0aDowLGhlaWdodDoyMDAsaGlnaGxpZ2h0Rmlyc3Q6ITAsdGVtcGxhdGU6XCJcIixmaWx0ZXI6XCJub25lXCIscGxhY2Vob2xkZXI6XCJcIixzdWdnZXN0OiExLGNhc2NhZGVGcm9tOlwiXCIsY2FzY2FkZUZyb21GaWVsZDpcIlwiLGlnbm9yZUNhc2U6ITAsYW5pbWF0aW9uOnt9fSxldmVudHM6W1wib3BlblwiLFwiY2xvc2VcIixtLFwic2VsZWN0XCIsXCJmaWx0ZXJpbmdcIixcImRhdGFCaW5kaW5nXCIsXCJkYXRhQm91bmRcIixcImNhc2NhZGVcIl0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXtvLmZuLnNldE9wdGlvbnMuY2FsbCh0aGlzLGUpLHRoaXMuX3RlbXBsYXRlKCksdGhpcy5fYWNjZXNzb3JzKCksdGhpcy5fYXJpYSgpfSxjdXJyZW50OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLl9jdXJyZW50O3JldHVybiBlPT09dD9pOihpJiZpLnJlbW92ZUNsYXNzKGspLG8uZm4uY3VycmVudC5jYWxsKG4sZSksdCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuaW5wdXQub2ZmKHUpLGUuZWxlbWVudC5vZmYodSksZS5faW5wdXRXcmFwcGVyLm9mZih1KSxvLmZuLmRlc3Ryb3kuY2FsbChlKX0sX2ZvY3VzSGFuZGxlcjpmdW5jdGlvbigpe3RoaXMuaW5wdXQuZm9jdXMoKX0sX2Fycm93Q2xpY2s6ZnVuY3Rpb24oKXt0aGlzLl90b2dnbGUoKX0sX2lucHV0Rm9jdXM6ZnVuY3Rpb24oKXt0aGlzLl9pbnB1dFdyYXBwZXIuYWRkQ2xhc3MoXyksdGhpcy5fcGxhY2Vob2xkZXIoITEpfSxfaW5wdXRGb2N1c291dDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5faW5wdXRXcmFwcGVyLnJlbW92ZUNsYXNzKF8pLGNsZWFyVGltZW91dChlLl90eXBpbmcpLGUuX3R5cGluZz1udWxsLGUub3B0aW9ucy50ZXh0IT09ZS5pbnB1dC52YWwoKSYmZS50ZXh0KGUudGV4dCgpKSxlLl9wbGFjZWhvbGRlcigpLGUuX2JsdXIoKSxlLmVsZW1lbnQuYmx1cigpfSxfZWRpdGFibGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZGlzYWJsZSxpPWUucmVhZG9ubHkscj10Ll9pbnB1dFdyYXBwZXIub2ZmKHUpLG89dC5lbGVtZW50LmFkZCh0LmlucHV0Lm9mZih1KSksYT10Ll9hcnJvdy5wYXJlbnQoKS5vZmYoaCtcIiBcIitwKTtpfHxuPyhyLmFkZENsYXNzKG4/eTp2KS5yZW1vdmVDbGFzcyhuP3Y6eSksby5hdHRyKGYsbikuYXR0cihnLGkpLmF0dHIodyxuKS5hdHRyKGIsaSkpOihyLmFkZENsYXNzKHYpLnJlbW92ZUNsYXNzKHkpLm9uKFQsdC5fdG9nZ2xlSG92ZXIpLG8ucmVtb3ZlQXR0cihmKS5yZW1vdmVBdHRyKGcpLmF0dHIodywhMSkuYXR0cihiLCExKSxhLm9uKGgsQSh0Ll9hcnJvd0NsaWNrLHQpKS5vbihwLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX0pLHQuaW5wdXQub24oXCJrZXlkb3duXCIrdSxBKHQuX2tleWRvd24sdCkpLm9uKFwiZm9jdXNcIit1LEEodC5faW5wdXRGb2N1cyx0KSkub24oXCJmb2N1c291dFwiK3UsQSh0Ll9pbnB1dEZvY3Vzb3V0LHQpKSl9LG9wZW46ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5fc3RhdGUsbj1lLmRhdGFTb3VyY2Uub3B0aW9ucy5zZXJ2ZXJGaWx0ZXJpbmc7ZS5wb3B1cC52aXNpYmxlKCl8fCghZS51bFswXS5maXJzdENoaWxkJiZ0IT09eHx8dD09PUMmJiFuPyhlLl9vcGVuPSEwLGUuX3N0YXRlPVMsZS5fZmlsdGVyU291cmNlKCkpOihlLnBvcHVwLm9wZW4oKSxlLl9zY3JvbGwoZS5fY3VycmVudCkpKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBpLHIsbz10aGlzLGE9by51bFswXSxzPW8ub3B0aW9ucyxsPW8uX3N0YXRlLGQ9by5fZGF0YSgpLHU9ZC5sZW5ndGgsaD0hMDtvLl9hbmd1bGFySXRlbXMoXCJjbGVhbnVwXCIpLG8udHJpZ2dlcihcImRhdGFCaW5kaW5nXCIpLGEuaW5uZXJIVE1MPW4ucmVuZGVyKG8udGVtcGxhdGUsZCksby5faGVpZ2h0KHUpLG8ucG9wdXAudmlzaWJsZSgpJiZvLnBvcHVwLl9wb3NpdGlvbigpLG8uX2lzU2VsZWN0JiYoaT1vLmVsZW1lbnRbMF0uY2hpbGRyZW5bMF0sbD09PVMmJihvLl9zdGF0ZT1cIlwiKSxyPW8uX29wdGlvbixvLl9vcHRpb249dCxvLl9vcHRpb25zKGQpLHImJnJbMF0uc2VsZWN0ZWQ/by5fY3VzdG9tKHIudmFsKCksaCk6by5fYm91bmR8fGl8fG8uX2N1c3RvbShcIlwiLGgpKSx1JiYocy5oaWdobGlnaHRGaXJzdCYmby5jdXJyZW50KGUoYS5maXJzdENoaWxkKSkscy5zdWdnZXN0JiZvLmlucHV0LnZhbCgpJiZvLl9yZXF1ZXN0IT09dCYmby5zdWdnZXN0KGUoYS5maXJzdENoaWxkKSkpLGw9PT14fHxvLl9mZXRjaHx8by5fc2VsZWN0SXRlbSgpLG8uX29wZW4mJihvLl9vcGVuPSExLG8uX3R5cGluZyYmby5pbnB1dFswXSE9PWMoKT9vLnBvcHVwLmNsb3NlKCk6by50b2dnbGUoISF1KSxvLl90eXBpbmc9bnVsbCksby5fdG91Y2hTY3JvbGxlciYmby5fdG91Y2hTY3JvbGxlci5yZXNldCgpLG8uX21ha2VVbnNlbGVjdGFibGUoKSxvLl9oaWRlQnVzeSgpLG8uX2JvdW5kPSEwLG8uX2FuZ3VsYXJJdGVtcyhcImNvbXBpbGVcIiksby50cmlnZ2VyKFwiZGF0YUJvdW5kXCIpfSxzdWdnZXN0OmZ1bmN0aW9uKGUpe3ZhciBuLGk9dGhpcyxvPWkuaW5wdXRbMF0scz1pLnRleHQoKSxsPWEobylbMF0sdT1pLl9sYXN0O3JldHVybiB1PT1kLkJBQ0tTUEFDRXx8dT09ZC5ERUxFVEU/KGkuX2xhc3Q9dCx0KTooZT1lfHxcIlwiLFwic3RyaW5nXCIhPXR5cGVvZiBlJiYobj1yLmluQXJyYXkoZVswXSxpLnVsWzBdKSxlPW4+LTE/aS5fdGV4dChpLmRhdGFTb3VyY2UudmlldygpW25dKTpcIlwiKSwwPj1sJiYobD1zLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihlLnRvTG93ZXJDYXNlKCkpKzEpLGU/KG49ZS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yocy50b0xvd2VyQ2FzZSgpKSxuPi0xJiYocys9ZS5zdWJzdHJpbmcobitzLmxlbmd0aCkpKTpzPXMuc3Vic3RyaW5nKDAsbCkscy5sZW5ndGg9PT1sJiZlfHwoby52YWx1ZT1zLG89PT1jKCkmJmEobyxsLHMubGVuZ3RoKSksdCl9LHRleHQ6ZnVuY3Rpb24oZSl7dmFyIG4saSxyLG8sYSxzO3JldHVybiBlPW51bGw9PT1lP1wiXCI6ZSxuPXRoaXMsaT1uLmlucHV0WzBdLHI9bi5vcHRpb25zLmlnbm9yZUNhc2Usbz1lLGU9PT10P2kudmFsdWU6KGE9bi5kYXRhSXRlbSgpLGEmJm4uX3RleHQoYSk9PT1lJiYocz1uLl92YWx1ZShhKSxudWxsPT09cz9zPVwiXCI6cys9XCJcIixzPT09bi5fb2xkKT8obi5fdHJpZ2dlckNhc2NhZGUoKSx0KToociYmKG89by50b0xvd2VyQ2FzZSgpKSxuLl9zZWxlY3QoZnVuY3Rpb24oZSl7cmV0dXJuIGU9bi5fdGV4dChlKSxyJiYoZT0oZStcIlwiKS50b0xvd2VyQ2FzZSgpKSxlPT09b30pLDA+bi5zZWxlY3RlZEluZGV4JiYobi5fY3VzdG9tKGUpLGkudmFsdWU9ZSksbi5fcHJldj1pLnZhbHVlLG4uX3RyaWdnZXJDYXNjYWRlKCksdCkpfSx0b2dnbGU6ZnVuY3Rpb24oZSl7dGhpcy5fdG9nZ2xlKGUsITApfSx2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbixpPXRoaXMscj1pLm9wdGlvbnM7cmV0dXJuIGU9PT10P2kuX2FjY2Vzc29yKCk6KG51bGwhPT1lJiYoZT1cIlwiK2UpLGkuX3NlbGVjdGVkVmFsdWU9ZSwhaS5fb3BlbiYmZSYmaS5fZmV0Y2hJdGVtcyhlKXx8KG49aS5faW5kZXgoZSksbj4tMT9pLnNlbGVjdChuKTooaS5jdXJyZW50KEQpLGkuX2N1c3RvbShlKSwoci52YWx1ZSE9PWV8fHIudGV4dCE9PWkuaW5wdXQudmFsKCkpJiYoaS50ZXh0KGUpLGkuX3BsYWNlaG9sZGVyKCkpKSxpLl9vbGQ9aS5fYWNjZXNzb3IoKSxpLl9vbGRJbmRleD1pLnNlbGVjdGVkSW5kZXgpLHQpfSxfYWNjZXB0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZT90Ll9mb2N1cyhlKToodC50ZXh0KHQudGV4dCgpKSx0Ll9jaGFuZ2UoKSl9LF9jdXN0b206ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzLHI9aS5lbGVtZW50LG89aS5fb3B0aW9uO2kuX3N0YXRlIT09eHx8bnx8KGkuX3N0YXRlPUMpLGkuX2lzU2VsZWN0PyhvfHwobz1pLl9vcHRpb249ZShcIjxvcHRpb24vPlwiKSxyLmFwcGVuZChvKSksby50ZXh0KHQpLG9bMF0uc2VsZWN0ZWQ9ITApOnIudmFsKHQpLGkuX3NlbGVjdGVkVmFsdWU9dH0sX2ZpbHRlcjpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5vcHRpb25zLHI9bi5kYXRhU291cmNlLG89aS5pZ25vcmVDYXNlLGE9ZnVuY3Rpb24oaSl7dmFyIHI9bi5fdGV4dChpKTtyZXR1cm4gciE9PXQ/KHIrPVwiXCIsXCJcIiE9PXImJlwiXCI9PT1lPyExOihvJiYocj1yLnRvTG93ZXJDYXNlKCkpLDA9PT1yLmluZGV4T2YoZSkpKTp0fTtyZXR1cm4gbyYmKGU9ZS50b0xvd2VyQ2FzZSgpKSxuLnVsWzBdLmZpcnN0Q2hpbGQ/KC0xIT09bi5faGlnaGxpZ2h0KGEpJiYoaS5zdWdnZXN0JiZuLl9jdXJyZW50JiZuLnN1Z2dlc3Qobi5fY3VycmVudCksbi5vcGVuKCkpLG4uX2hpZGVCdXN5KCksdCk6KHIub25lKG0sZnVuY3Rpb24oKXtyLnZpZXcoKVswXSYmbi5zZWFyY2goZSl9KS5mZXRjaCgpLHQpfSxfaGlnaGxpZ2h0OmZ1bmN0aW9uKG4pe3ZhciBpLG89dGhpcztyZXR1cm4gbj09PXR8fG51bGw9PT1uPy0xOihuPW8uX2dldChuKSxpPXIuaW5BcnJheShuWzBdLG8udWxbMF0pLC0xPT1pJiYoby5vcHRpb25zLmhpZ2hsaWdodEZpcnN0JiYhby50ZXh0KCk/KG49by51bFswXS5maXJzdENoaWxkLG4mJihuPWUobikpKTpuPUQpLG8uY3VycmVudChuKSxpKX0sX2lucHV0OmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi5lbGVtZW50LnJlbW92ZUNsYXNzKFwiay1pbnB1dFwiKVswXSxyPWkuYWNjZXNzS2V5LG89bi53cmFwcGVyLGE9XCJpbnB1dC5rLWlucHV0XCIscz1pLm5hbWV8fFwiXCI7cyYmKHM9J25hbWU9XCInK3MrJ19pbnB1dFwiICcpLHQ9by5maW5kKGEpLHRbMF18fChvLmFwcGVuZCgnPHNwYW4gdGFiaW5kZXg9XCItMVwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLWRyb3Bkb3duLXdyYXAgay1zdGF0ZS1kZWZhdWx0XCI+PGlucHV0ICcrcysnY2xhc3M9XCJrLWlucHV0XCIgdHlwZT1cInRleHRcIiBhdXRvY29tcGxldGU9XCJvZmZcIi8+PHNwYW4gdGFiaW5kZXg9XCItMVwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLXNlbGVjdFwiPjxzcGFuIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLWljb24gay1pLWFycm93LXNcIj5zZWxlY3Q8L3NwYW4+PC9zcGFuPjwvc3Bhbj4nKS5hcHBlbmQobi5lbGVtZW50KSx0PW8uZmluZChhKSksdFswXS5zdHlsZS5jc3NUZXh0PWkuc3R5bGUuY3NzVGV4dCxpLm1heExlbmd0aD4tMSYmKHRbMF0ubWF4TGVuZ3RoPWkubWF4TGVuZ3RoKSx0LmFkZENsYXNzKGkuY2xhc3NOYW1lKS52YWwodGhpcy5vcHRpb25zLnRleHR8fGkudmFsdWUpLmNzcyh7d2lkdGg6XCIxMDAlXCIsaGVpZ2h0Omkuc3R5bGUuaGVpZ2h0fSkuYXR0cih7cm9sZTpcImNvbWJvYm94XCIsXCJhcmlhLWV4cGFuZGVkXCI6ITF9KS5zaG93KCksbCYmdC5hdHRyKFwicGxhY2Vob2xkZXJcIixuLm9wdGlvbnMucGxhY2Vob2xkZXIpLHImJihpLmFjY2Vzc0tleT1cIlwiLHRbMF0uYWNjZXNzS2V5PXIpLG4uX2ZvY3VzZWQ9bi5pbnB1dD10LG4uX2lucHV0V3JhcHBlcj1lKG9bMF0uZmlyc3RDaGlsZCksbi5fYXJyb3c9by5maW5kKFwiLmstaWNvblwiKS5hdHRyKHtyb2xlOlwiYnV0dG9uXCIsdGFiSW5kZXg6LTF9KSxpLmlkJiZuLl9hcnJvdy5hdHRyKFwiYXJpYS1jb250cm9sc1wiLG4udWxbMF0uaWQpfSxfa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5rZXlDb2RlO3QuX2xhc3Q9bixjbGVhclRpbWVvdXQodC5fdHlwaW5nKSx0Ll90eXBpbmc9bnVsbCxuPT1kLlRBQnx8dC5fbW92ZShlKXx8dC5fc2VhcmNoKCl9LF9wbGFjZWhvbGRlcjpmdW5jdGlvbihlKXtpZighbCl7dmFyIG4saT10aGlzLHI9aS5pbnB1dCxvPWkub3B0aW9ucy5wbGFjZWhvbGRlcjtpZihvKXtpZihuPWkudmFsdWUoKSxlPT09dCYmKGU9IW4pLHIudG9nZ2xlQ2xhc3MoXCJrLXJlYWRvbmx5XCIsZSksIWUpe2lmKG4pcmV0dXJuO289XCJcIn1yLnZhbChvKSxvfHxyWzBdIT09YygpfHxhKHJbMF0sMCwwKX19fSxfc2VhcmNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl90eXBpbmc9c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0PWUudGV4dCgpO2UuX3ByZXYhPT10JiYoZS5fcHJldj10LGUuc2VhcmNoKHQpKSxlLl90eXBpbmc9bnVsbH0sZS5vcHRpb25zLmRlbGF5KX0sX3NlbGVjdDpmdW5jdGlvbihlKXt2YXIgbixpLHI9dGhpcyxvPXIuX2RhdGEoKSxhPXIuX2hpZ2hsaWdodChlKTtyLnNlbGVjdGVkSW5kZXg9YSwtMSE9PWEmJihyLl9zdGF0ZT09PXgmJihyLl9zdGF0ZT1DKSxyLl9jdXJyZW50LmFkZENsYXNzKGspLG89b1thXSxuPXIuX3RleHQobyksaT1yLl92YWx1ZShvKSxudWxsPT09aSYmKGk9XCJcIiksci5fcHJldj1yLmlucHV0WzBdLnZhbHVlPW4sci5fYWNjZXNzb3IoaSE9PXQ/aTpuLGEpLHIuX3NlbGVjdGVkVmFsdWU9ci5fYWNjZXNzb3IoKSxyLl9wbGFjZWhvbGRlcigpLHIuX29wdGlvbklEJiZyLl9jdXJyZW50LmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITApKX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5lbGVtZW50LG49dC5wYXJlbnQoKTtuLmlzKFwic3Bhbi5rLXdpZGdldFwiKXx8KG49dC5oaWRlKCkud3JhcChcIjxzcGFuIC8+XCIpLnBhcmVudCgpLG5bMF0uc3R5bGUuY3NzVGV4dD10WzBdLnN0eWxlLmNzc1RleHQpLGUud3JhcHBlcj1uLmFkZENsYXNzKFwiay13aWRnZXQgay1jb21ib2JveCBrLWhlYWRlclwiKS5hZGRDbGFzcyh0WzBdLmNsYXNzTmFtZSkuY3NzKFwiZGlzcGxheVwiLFwiXCIpfSxfY2xlYXJTZWxlY3Rpb246ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9ZS5fc2VsZWN0ZWRWYWx1ZXx8ZS52YWx1ZSgpLHI9aSYmLTE9PT1lLnNlbGVjdGVkSW5kZXg7KHR8fCFpfHxyKSYmKG4udmFsdWUoXCJcIiksbi5vcHRpb25zLnZhbHVlPVwiXCIpfX0pO2kucGx1Z2luKEUpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSx0KXt2YXIgbjtpZihudWxsPT09ZSYmbnVsbCE9PXR8fG51bGwhPT1lJiZudWxsPT09dClyZXR1cm4hMTtpZihuPWUubGVuZ3RoLG4hPT10Lmxlbmd0aClyZXR1cm4hMTtmb3IoO24tLTspaWYoZVtuXSE9PXRbbl0pcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gaSh0KXt2YXIgbj10LmZpcnN0Q2hpbGQ7cmV0dXJuIG4mJlwibm9uZVwiPT09bi5zdHlsZS5kaXNwbGF5JiYobj1vKG4saykpLG4/ZShuKTpufWZ1bmN0aW9uIHIodCl7dmFyIG49dC5sYXN0Q2hpbGQ7cmV0dXJuIG4mJlwibm9uZVwiPT09bi5zdHlsZS5kaXNwbGF5JiYobj1vKG4seCkpLG4/ZShuKTpufWZ1bmN0aW9uIG8oZSx0KXtyZXR1cm4gZT1lW3RdLGUmJlwibm9uZVwiPT09ZS5zdHlsZS5kaXNwbGF5JiYoZT1vKGUsdCkpLGV9dmFyIGE9d2luZG93LmtlbmRvLHM9YS51aSxsPXMuTGlzdCxjPWEua2V5cyxkPWEuX2FjdGl2ZUVsZW1lbnQsdT1hLmRhdGEuT2JzZXJ2YWJsZUFycmF5LGg9ZS5wcm94eSxwPVwiaWRcIixmPVwibGlcIixnPVwiYWNjZXB0XCIsbT1cImZpbHRlclwiLHY9XCJvcGVuXCIsXz1cImNsb3NlXCIseT1cImNoYW5nZVwiLHc9XCJwcm9ncmVzc1wiLGI9XCJzZWxlY3RcIixrPVwibmV4dFNpYmxpbmdcIix4PVwicHJldmlvdXNTaWJsaW5nXCIsQz0nIHN0eWxlPVwiZGlzcGxheTpub25lXCInLFM9XCJhcmlhLWRpc2FibGVkXCIsVD1cImFyaWEtcmVhZG9ubHlcIixEPVwiay1zdGF0ZS1mb2N1c2VkXCIsQT1cImstbG9hZGluZy1oaWRkZW5cIixFPVwiay1zdGF0ZS1ob3ZlclwiLE09XCJrLXN0YXRlLWRpc2FibGVkXCIsUD1cImRpc2FibGVkXCIsST1cInJlYWRvbmx5XCIsej1cIi5rZW5kb011bHRpU2VsZWN0XCIsRj1cImNsaWNrXCIreixSPVwia2V5ZG93blwiK3osQj1cIm1vdXNlZW50ZXJcIit6LEw9XCJtb3VzZWxlYXZlXCIreixPPUIrXCIgXCIrTCxIPS9cIi9nLE49ZS5pc0FycmF5LFY9W1wiZm9udC1mYW1pbHlcIixcImZvbnQtc2l6ZVwiLFwiZm9udC1zdHJldGNoXCIsXCJmb250LXN0eWxlXCIsXCJmb250LXdlaWdodFwiLFwibGV0dGVyLXNwYWNpbmdcIixcInRleHQtdHJhbnNmb3JtXCIsXCJsaW5lLWhlaWdodFwiXSxVPWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIGkscixvPXRoaXM7by5ucz16LGwuZm4uaW5pdC5jYWxsKG8sdCxuKSxvLl93cmFwcGVyKCksby5fdGFnTGlzdCgpLG8uX2lucHV0KCksby5fdGV4dENvbnRhaW5lcigpLG8uX2xvYWRlcigpLG8uX3RhYmluZGV4KG8uaW5wdXQpLHQ9by5lbGVtZW50LmF0dHIoXCJtdWx0aXBsZVwiLFwibXVsdGlwbGVcIikuaGlkZSgpLG49by5vcHRpb25zLHI9bi52YWx1ZSxuLnBsYWNlaG9sZGVyfHwobi5wbGFjZWhvbGRlcj10LmRhdGEoXCJwbGFjZWhvbGRlclwiKSksaT10LmF0dHIocCksaSYmKG8uX3RhZ0lEPWkrXCJfdGFnX2FjdGl2ZVwiLGkrPVwiX3RhZ2xpc3RcIixvLnRhZ0xpc3QuYXR0cihwLGkpKSxvLl9hcmlhKGkpLG8uX2RhdGFTb3VyY2UoKSxvLl9pZ25vcmVDYXNlKCksby5fcG9wdXAoKSxvLl92YWx1ZXM9W10sby5fZGF0YUl0ZW1zPVtdLG8uX3Jlc2V0KCksby5fZW5hYmxlKCksby5fcGxhY2Vob2xkZXIoKSxuLmF1dG9CaW5kP28uZGF0YVNvdXJjZS5mZXRjaCgpOnImJihOKHIpfHwocj1bcl0pLChlLmlzUGxhaW5PYmplY3QoclswXSl8fCFuLmRhdGFWYWx1ZUZpZWxkKSYmKG8uX3JldHJpZXZlRGF0YT0hMCxvLmRhdGFTb3VyY2UuZGF0YShyKSxvLnZhbHVlKG8uX2luaXRpYWxWYWx1ZXMpKSksYS5ub3RpZnkobyl9LG9wdGlvbnM6e25hbWU6XCJNdWx0aVNlbGVjdFwiLGVuYWJsZWQ6ITAsYXV0b0JpbmQ6ITAsYXV0b0Nsb3NlOiEwLGhpZ2hsaWdodEZpcnN0OiEwLGRhdGFUZXh0RmllbGQ6XCJcIixkYXRhVmFsdWVGaWVsZDpcIlwiLGZpbHRlcjpcInN0YXJ0c3dpdGhcIixpZ25vcmVDYXNlOiEwLG1pbkxlbmd0aDowLGRlbGF5OjEwMCx2YWx1ZTpudWxsLG1heFNlbGVjdGVkSXRlbXM6bnVsbCxpdGVtVGVtcGxhdGU6XCJcIix0YWdUZW1wbGF0ZTpcIlwiLHBsYWNlaG9sZGVyOlwiXCIsaGVpZ2h0OjIwMCxhbmltYXRpb246e319LGV2ZW50czpbdixfLHksYixcImZpbHRlcmluZ1wiLFwiZGF0YUJpbmRpbmdcIixcImRhdGFCb3VuZFwiXSxzZXREYXRhU291cmNlOmZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucy5kYXRhU291cmNlPWUsdGhpcy5fZGF0YVNvdXJjZSgpLHRoaXMub3B0aW9ucy5hdXRvQmluZCYmdGhpcy5kYXRhU291cmNlLmZldGNoKCl9LHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7bC5mbi5zZXRPcHRpb25zLmNhbGwodGhpcyxlKSx0aGlzLl90ZW1wbGF0ZSgpLHRoaXMuX2FjY2Vzc29ycygpLHRoaXMuX2FyaWEodGhpcy50YWdMaXN0LmF0dHIocCkpfSxjdXJyZW50OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmN1cnJlbnRUYWcobnVsbCksbC5mbi5jdXJyZW50LmNhbGwodGhpcyxlKX0sY3VycmVudFRhZzpmdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiBlPT09dD9uLl9jdXJyZW50VGFnOihuLl9jdXJyZW50VGFnJiYobi5fY3VycmVudFRhZy5yZW1vdmVDbGFzcyhEKS5yZW1vdmVBdHRyKHApLG4uaW5wdXQucmVtb3ZlQXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKSksZSYmKGUuYWRkQ2xhc3MoRCkuYXR0cihwLG4uX3RhZ0lEKSxuLmlucHV0LmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixuLl90YWdJRCkpLG4uX2N1cnJlbnRUYWc9ZSx0KX0sZGF0YUl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGFJdGVtc30sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm5zO2NsZWFyVGltZW91dChlLl9idXN5KSxjbGVhclRpbWVvdXQoZS5fdHlwaW5nKSxlLndyYXBwZXIub2ZmKHQpLGUudGFnTGlzdC5vZmYodCksZS5pbnB1dC5vZmYodCksbC5mbi5kZXN0cm95LmNhbGwoZSl9LF93cmFwcGVyTW91c2Vkb3duOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cImlucHV0XCIhPT1lLnRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO24mJmUucHJldmVudERlZmF1bHQoKSwtMT09PWUudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKFwiay1kZWxldGVcIikmJih0LmlucHV0WzBdIT09ZCgpJiZuJiZ0LmlucHV0LmZvY3VzKCksMD09PXQub3B0aW9ucy5taW5MZW5ndGgmJnQub3BlbigpKX0sX2lucHV0Rm9jdXM6ZnVuY3Rpb24oKXt0aGlzLl9wbGFjZWhvbGRlcighMSksdGhpcy53cmFwcGVyLmFkZENsYXNzKEQpfSxfaW5wdXRGb2N1c291dDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7Y2xlYXJUaW1lb3V0KGUuX3R5cGluZyksZS53cmFwcGVyLnJlbW92ZUNsYXNzKEQpLGUuX3BsYWNlaG9sZGVyKCFlLl9kYXRhSXRlbXNbMF0sITApLGUuY2xvc2UoKSxlLl9zdGF0ZT09PW0mJihlLl9zdGF0ZT1nKSxlLmVsZW1lbnQuYmx1cigpfSxfdGFnTGlzdENsaWNrOmZ1bmN0aW9uKHQpe3RoaXMuX3Vuc2VsZWN0KGUodC50YXJnZXQpLmNsb3Nlc3QoZikpLHRoaXMuX2NoYW5nZSgpLHRoaXMuY2xvc2UoKX0sX2VkaXRhYmxlOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT10LmRpc2FibGUscj10LnJlYWRvbmx5LG89bi53cmFwcGVyLm9mZih6KSxhPW4udGFnTGlzdC5vZmYoeikscz1uLmVsZW1lbnQuYWRkKG4uaW5wdXQub2ZmKHopKTtyfHxpPyhpP28uYWRkQ2xhc3MoTSk6by5yZW1vdmVDbGFzcyhNKSxzLmF0dHIoUCxpKS5hdHRyKEkscikuYXR0cihTLGkpLmF0dHIoVCxyKSk6KG8ucmVtb3ZlQ2xhc3MoTSkub24oTyxuLl90b2dnbGVIb3Zlcikub24oXCJtb3VzZWRvd25cIit6LGgobi5fd3JhcHBlck1vdXNlZG93bixuKSksbi5pbnB1dC5vbihSLGgobi5fa2V5ZG93bixuKSkub24oXCJwYXN0ZVwiK3osaChuLl9zZWFyY2gsbikpLm9uKFwiZm9jdXNcIit6LGgobi5faW5wdXRGb2N1cyxuKSkub24oXCJmb2N1c291dFwiK3osaChuLl9pbnB1dEZvY3Vzb3V0LG4pKSxzLnJlbW92ZUF0dHIoUCkucmVtb3ZlQXR0cihJKS5hdHRyKFMsITEpLmF0dHIoVCwhMSksYS5vbihCLGYsZnVuY3Rpb24oKXtlKHRoaXMpLmFkZENsYXNzKEUpfSkub24oTCxmLGZ1bmN0aW9uKCl7ZSh0aGlzKS5yZW1vdmVDbGFzcyhFKX0pLm9uKEYsXCIuay1kZWxldGVcIixoKG4uX3RhZ0xpc3RDbGljayxuKSkpfSxfY2xvc2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Uub3B0aW9ucy5hdXRvQ2xvc2V8fCFlLl92aXNpYmxlSXRlbXM/ZS5jbG9zZSgpOihlLmN1cnJlbnQoZS5vcHRpb25zLmhpZ2hsaWdodEZpcnN0P2koZS51bFswXSk6bnVsbCksZS5wb3B1cC5fcG9zaXRpb24oKSl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5wb3B1cC5jbG9zZSgpLHRoaXMuY3VycmVudChudWxsKX0sb3BlbjpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fcmVxdWVzdCYmKGUuX3JldHJpZXZlRGF0YT0hMSksIWUudWxbMF0uZmlyc3RDaGlsZHx8ZS5fc3RhdGU9PT1nfHxlLl9yZXRyaWV2ZURhdGE/KGUuX3N0YXRlPVwiXCIsZS5fb3Blbj0hMCxlLl9yZXRyaWV2ZURhdGE9ITEsZS5fZmlsdGVyU291cmNlKCkpOmUuX3Zpc2libGVJdGVtcyYmZS5fYWxsb3dTZWxlY3Rpb24oKSYmKGUucG9wdXAub3BlbigpLGUuY3VycmVudChlLm9wdGlvbnMuaGlnaGxpZ2h0Rmlyc3Q/aShlLnVsWzBdKTpudWxsKSl9LHRvZ2dsZTpmdW5jdGlvbihlKXtlPWUhPT10P2U6IXRoaXMucG9wdXAudmlzaWJsZSgpLHRoaXNbZT92Ol9dKCl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj1udWxsO3QudHJpZ2dlcihcImRhdGFCaW5kaW5nXCIpLGU9dC5fcmVuZGVyKHQuZGF0YVNvdXJjZS52aWV3KCkpLHQuX2hlaWdodChlKSx0Ll9zZXRJbml0aWFsVmFsdWVzJiYodC5fc2V0SW5pdGlhbFZhbHVlcz0hMSx0LnZhbHVlKHQuX2luaXRpYWxWYWx1ZXMpKSx0Ll9vcGVuJiYodC5fb3Blbj0hMSx0LnRvZ2dsZShlKSksdC5wb3B1cC52aXNpYmxlKCkmJih0LnBvcHVwLl9wb3NpdGlvbigpLHQub3B0aW9ucy5oaWdobGlnaHRGaXJzdCYmKG49aSh0LnVsWzBdKSkpLHQuY3VycmVudChuKSx0Ll90b3VjaFNjcm9sbGVyJiZ0Ll90b3VjaFNjcm9sbGVyLnJlc2V0KCksdC5fbWFrZVVuc2VsZWN0YWJsZSgpLHQuX2hpZGVCdXN5KCksdC50cmlnZ2VyKFwiZGF0YUJvdW5kXCIpfSxzZWFyY2g6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMscj1pLm9wdGlvbnMsbz1yLmlnbm9yZUNhc2UsYT1yLmZpbHRlcixzPXIuZGF0YVRleHRGaWVsZCxsPWkuaW5wdXQudmFsKCk7ci5wbGFjZWhvbGRlcj09PWwmJihsPVwiXCIpLGNsZWFyVGltZW91dChpLl90eXBpbmcpLGU9XCJzdHJpbmdcIj09dHlwZW9mIGU/ZTpsLG49ZS5sZW5ndGgsKCFufHxuPj1yLm1pbkxlbmd0aCkmJihpLl9zdGF0ZT1tLGkuX29wZW49ITAsdD17dmFsdWU6bz9lLnRvTG93ZXJDYXNlKCk6ZSxmaWVsZDpzLG9wZXJhdG9yOmEsaWdub3JlQ2FzZTpvfSxpLl9maWx0ZXJTb3VyY2UodCxpLl9yZXRyaWV2ZURhdGEpLGkuX3JldHJpZXZlRGF0YT0hMSl9LHZhbHVlOmZ1bmN0aW9uKG4pe3ZhciBpLHI9dGhpcyxvPWUoci50YWdMaXN0WzBdLmNoaWxkcmVuKSxhPW8ubGVuZ3RoLHM9MDtpZihuPT09dClyZXR1cm4gci5fdmFsdWVzO2lmKCFyLl9mZXRjaEl0ZW1zKG4pKXtmb3IoO2E+cztzKyspci5fdW5zZWxlY3Qoby5lcShzKSk7aWYobnVsbCE9PW4pe2ZvcihuPU4obil8fG4gaW5zdGFuY2VvZiB1P246W25dLHM9MCxhPW4ubGVuZ3RoO2E+cztzKyspaT1yLl9pbmRleChuW3NdKSxpPi0xJiZyLl9zZWxlY3QoaSk7ci5fb2xkPXIuX3ZhbHVlcy5zbGljZSgpfX19LF9kYXRhU291cmNlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZWxlbWVudCxuPWUub3B0aW9ucyxpPW4uZGF0YVNvdXJjZXx8e307aT1OKGkpP3tkYXRhOml9OmksaS5zZWxlY3Q9dCxpLmZpZWxkcz1be2ZpZWxkOm4uZGF0YVRleHRGaWVsZH0se2ZpZWxkOm4uZGF0YVZhbHVlRmllbGR9XSxlLmRhdGFTb3VyY2UmJmUuX3JlZnJlc2hIYW5kbGVyP2UuX3VuYmluZERhdGFTb3VyY2UoKTooZS5fcmVmcmVzaEhhbmRsZXI9aChlLnJlZnJlc2gsZSksZS5fcHJvZ3Jlc3NIYW5kbGVyPWgoZS5fc2hvd0J1c3ksZSkpLGUuZGF0YVNvdXJjZT1hLmRhdGEuRGF0YVNvdXJjZS5jcmVhdGUoaSkuYmluZCh5LGUuX3JlZnJlc2hIYW5kbGVyKS5iaW5kKHcsZS5fcHJvZ3Jlc3NIYW5kbGVyKX0sX2ZldGNoSXRlbXM6ZnVuY3Rpb24obil7dmFyIGk9dGhpcyxyPWUuaXNBcnJheShuKSYmMD09PW4ubGVuZ3RoO2lmKCFyJiZuKXJldHVybiBpLl9mZXRjaHx8aS51bFswXS5maXJzdENoaWxkP3Q6KGkuZGF0YVNvdXJjZS5vbmUoeSxmdW5jdGlvbigpe2kudmFsdWUobiksaS5fZmV0Y2g9ITF9KSxpLl9mZXRjaD0hMCxpLmRhdGFTb3VyY2UuZmV0Y2goKSwhMCl9LF9yZXNldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LmVsZW1lbnQsaT1uLmF0dHIoXCJmb3JtXCIpLHI9aT9lKFwiI1wiK2kpOm4uY2xvc2VzdChcImZvcm1cIik7clswXSYmKHQuX3Jlc2V0SGFuZGxlcj1mdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnZhbHVlKHQuX2luaXRpYWxWYWx1ZXMpLHQuX3BsYWNlaG9sZGVyKCl9KX0sdC5fZm9ybT1yLm9uKFwicmVzZXRcIix0Ll9yZXNldEhhbmRsZXIpKX0sX2luaXRWYWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsbj1lLm9wdGlvbnMudmFsdWV8fGUuZWxlbWVudC52YWwoKTtudWxsPT09bj9uPVtdOihOKG4pfHwobj1bbl0pLG49ZS5fbWFwVmFsdWVzKG4pKSxlLl9vbGQ9ZS5faW5pdGlhbFZhbHVlcz1uLGUuX3NldEluaXRpYWxWYWx1ZXM9blswXSE9PXR9LF9tYXBWYWx1ZXM6ZnVuY3Rpb24odCl7dmFyIG49dGhpcztyZXR1cm4gdCYmZS5pc1BsYWluT2JqZWN0KHRbMF0pJiYodD1lLm1hcCh0LGZ1bmN0aW9uKGUpe3JldHVybiBuLl92YWx1ZShlKX0pKSx0fSxfY2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUudmFsdWUoKTtuKHQsZS5fb2xkKXx8KGUuX29sZD10LnNsaWNlKCksZS50cmlnZ2VyKHkpLGUuZWxlbWVudC50cmlnZ2VyKHkpKX0sX2NsaWNrOmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMscj1lKG4uY3VycmVudFRhcmdldCk7aWYoIW4uaXNEZWZhdWx0UHJldmVudGVkKCkpe2lmKGkudHJpZ2dlcihiLHtpdGVtOnJ9KSlyZXR1cm4gaS5fY2xvc2UoKSx0O2kuX3NlbGVjdChyKSxpLl9jaGFuZ2UoKSxpLl9jbG9zZSgpfX0sX2l0ZW06ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1lW3RdKCksZVswXSYmIWUuaXMoXCI6dmlzaWJsZVwiKSYmKGU9dGhpcy5faXRlbShlLHQpKSxlfSxfa2V5ZG93bjpmdW5jdGlvbihuKXt2YXIgcz10aGlzLGw9bi5rZXlDb2RlLGQ9cy5fY3VycmVudFRhZyx1PXMuX2N1cnJlbnQsaD1zLmlucHV0LnZhbCgpLHA9YS5zdXBwb3J0LmlzUnRsKHMud3JhcHBlciksZj1zLnBvcHVwLnZpc2libGUoKTtpZihsPT09Yy5ET1dOKXtpZihuLnByZXZlbnREZWZhdWx0KCksIWYpcmV0dXJuIHMub3BlbigpLHQ7dT11P28odVswXSxrKTppKHMudWxbMF0pLHUmJnMuY3VycmVudChlKHUpKX1lbHNlIGlmKGw9PT1jLlVQKWYmJih1PXU/byh1WzBdLHgpOnIocy51bFswXSkscy5jdXJyZW50KGUodSkpLHMuX2N1cnJlbnRbMF18fHMuY2xvc2UoKSksbi5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgaWYobD09PWMuTEVGVCYmIXB8fGw9PT1jLlJJR0hUJiZwKWh8fChkPWQ/ZC5wcmV2KCk6ZShzLnRhZ0xpc3RbMF0ubGFzdENoaWxkKSxkWzBdJiZzLmN1cnJlbnRUYWcoZCkpO2Vsc2UgaWYobD09PWMuUklHSFQmJiFwfHxsPT09Yy5MRUZUJiZwKSFoJiZkJiYoZD1kLm5leHQoKSxzLmN1cnJlbnRUYWcoZFswXT9kOm51bGwpKTtlbHNlIGlmKGw9PT1jLkVOVEVSJiZmKXtpZih1KXtpZihzLnRyaWdnZXIoYix7aXRlbTp1fSkpcmV0dXJuIHMuX2Nsb3NlKCksdDtzLl9zZWxlY3QodSl9cy5fY2hhbmdlKCkscy5fY2xvc2UoKSxuLnByZXZlbnREZWZhdWx0KCl9ZWxzZSBsPT09Yy5FU0M/KGY/bi5wcmV2ZW50RGVmYXVsdCgpOnMuY3VycmVudFRhZyhudWxsKSxzLmNsb3NlKCkpOmw9PT1jLkhPTUU/Zj9zLmN1cnJlbnQoaShzLnVsWzBdKSk6aHx8KGQ9cy50YWdMaXN0WzBdLmZpcnN0Q2hpbGQsZCYmcy5jdXJyZW50VGFnKGUoZCkpKTpsPT09Yy5FTkQ/Zj9zLmN1cnJlbnQocihzLnVsWzBdKSk6aHx8KGQ9cy50YWdMaXN0WzBdLmxhc3RDaGlsZCxkJiZzLmN1cnJlbnRUYWcoZShkKSkpOmwhPT1jLkRFTEVURSYmbCE9PWMuQkFDS1NQQUNFfHxoPyhjbGVhclRpbWVvdXQocy5fdHlwaW5nKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cy5fc2NhbGUoKX0pLHMuX3NlYXJjaCgpKToobCE9PWMuQkFDS1NQQUNFfHxkfHwoZD1lKHMudGFnTGlzdFswXS5sYXN0Q2hpbGQpKSxkJiZkWzBdJiYocy5fdW5zZWxlY3QoZCkscy5fY2hhbmdlKCkscy5fY2xvc2UoKSkpfSxfaGlkZUJ1c3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2NsZWFyVGltZW91dChlLl9idXN5KSxlLmlucHV0LmF0dHIoXCJhcmlhLWJ1c3lcIiwhMSksZS5fbG9hZGluZy5hZGRDbGFzcyhBKSxlLl9yZXF1ZXN0PSExLGUuX2J1c3k9bnVsbH0sX3Nob3dCdXN5SGFuZGxlcjpmdW5jdGlvbigpe3RoaXMuaW5wdXQuYXR0cihcImFyaWEtYnVzeVwiLCEwKSx0aGlzLl9sb2FkaW5nLnJlbW92ZUNsYXNzKEEpfSxfc2hvd0J1c3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3JlcXVlc3Q9ITAsZS5fYnVzeXx8KGUuX2J1c3k9c2V0VGltZW91dChoKGUuX3Nob3dCdXN5SGFuZGxlcixlKSwxMDApKX0sX3BsYWNlaG9sZGVyOmZ1bmN0aW9uKGUsbil7dmFyIGk9dGhpcyxyPWkuaW5wdXQsbz1kKCk7ZT09PXQmJihlPSExLHJbMF0hPT1vJiYoZT0haS5fZGF0YUl0ZW1zWzBdKSksaS5fcHJldj1cIlwiLHIudG9nZ2xlQ2xhc3MoXCJrLXJlYWRvbmx5XCIsZSkudmFsKGU/aS5vcHRpb25zLnBsYWNlaG9sZGVyOlwiXCIpLHJbMF0hPT1vfHxufHxhLmNhcmV0KHJbMF0sMCwwKSxpLl9zY2FsZSgpfSxfc2NhbGU6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10LndyYXBwZXIsaT1uLndpZHRoKCkscj10Ll9zcGFuLnRleHQodC5pbnB1dC52YWwoKSk7bi5pcyhcIjp2aXNpYmxlXCIpP2U9ci53aWR0aCgpKzI1OihyLmFwcGVuZFRvKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCksaT1lPXIud2lkdGgoKSsyNSxyLmFwcGVuZFRvKG4pKSx0LmlucHV0LndpZHRoKGU+aT9pOmUpfSxfb3B0aW9uOmZ1bmN0aW9uKGUsbil7dmFyIGk9XCI8b3B0aW9uXCIscj10aGlzLl90ZXh0KGUpLG89dGhpcy5fdmFsdWUoZSk7cmV0dXJuIG8hPT10JiYobys9XCJcIiwtMSE9PW8uaW5kZXhPZignXCInKSYmKG89by5yZXBsYWNlKEgsXCImcXVvdDtcIikpLGkrPScgdmFsdWU9XCInK28rJ1wiJyksbiYmKGkrPScgc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiJyksaSs9XCI+XCIsciE9PXQmJihpKz1hLmh0bWxFbmNvZGUocikpLGkrPVwiPC9vcHRpb24+XCJ9LF9yZW5kZXI6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG4saT10aGlzLHI9ZS5sZW5ndGgsbz1pLml0ZW1UZW1wbGF0ZSxhPWkuX2RhdGFJdGVtcy5zbGljZSgwKSxzPTAsbD0wLGM9XCJcIixkPVwiXCI7cj5sO2wrKyl0PWVbbF0sbj1pLl9zZWxlY3RlZChhLHQpLGQrPW8odCxsLG4pLGMrPWkuX29wdGlvbih0LG4pLG58fChzKz0xKTtpZihyPWEubGVuZ3RoKWZvcihsPTA7cj5sO2wrKyljKz1pLl9vcHRpb24oYVtsXSwhMCk7cmV0dXJuIGkudWxbMF0uaW5uZXJIVE1MPWQsaS5lbGVtZW50Lmh0bWwoYyksaS5fdmlzaWJsZUl0ZW1zPXMsc30sX3NlbGVjdGVkOmZ1bmN0aW9uKGUsbil7dmFyIGkscj10aGlzLG89ci5fdGV4dCxhPXIuX3ZhbHVlLHM9YShuKSxsPWUubGVuZ3RoLGM9ITEsZD0wO2ZvcihzPT09dCYmKHM9byhuKSk7bD5kO2QrKylpZihuPWVbZF0saT1hKG4pLGk9PT10JiYoaT1vKG4pKSxpIT09dCYmaT09PXMpe2M9ITA7YnJlYWt9cmV0dXJuIGMmJmUuc3BsaWNlKGQsMSksY30sX3NlYXJjaDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fdHlwaW5nPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdD1lLmlucHV0LnZhbCgpO2UuX3ByZXYhPT10JiYoZS5fcHJldj10LGUuc2VhcmNoKHQpKX0sZS5vcHRpb25zLmRlbGF5KX0sX2FsbG93U2VsZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLm1heFNlbGVjdGVkSXRlbXM7cmV0dXJuIG51bGw9PT1lfHxlPnRoaXMuX3ZhbHVlcy5sZW5ndGh9LF9zZWxlY3Q6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMscj1pLl92YWx1ZXM7aS5fYWxsb3dTZWxlY3Rpb24oKSYmKGlzTmFOKGUpP249ZS5oaWRlKCkuZGF0YShcImlkeFwiKToobj1lLGkudWxbMF0uY2hpbGRyZW5bbl0uc3R5bGUuZGlzcGxheT1cIm5vbmVcIiksaS5lbGVtZW50WzBdLmNoaWxkcmVuW25dLnNlbGVjdGVkPSEwLHQ9aS5kYXRhU291cmNlLnZpZXcoKVtuXSxpLnRhZ0xpc3QuYXBwZW5kKGkudGFnVGVtcGxhdGUodCkpLGkuX2RhdGFJdGVtcy5wdXNoKHQpLHIucHVzaChpLl9kYXRhVmFsdWUodCkpLGkuX3Zpc2libGVJdGVtcy09MSxpLmN1cnJlbnRUYWcobnVsbCksaS5fcGxhY2Vob2xkZXIoKSxpLl9oZWlnaHQoaS5fdmlzaWJsZUl0ZW1zKSxpLl9zdGF0ZT09PW0mJihpLl9zdGF0ZT1nKSl9LF91bnNlbGVjdDpmdW5jdGlvbih0KXt2YXIgbixpLHIsbyxhLHM9dGhpcyxsPXQuaW5kZXgoKTtpZih0LnJlbW92ZSgpLHMuY3VycmVudFRhZyhudWxsKSxzLl92YWx1ZXMuc3BsaWNlKGwsMSksbj1zLl9kYXRhSXRlbXMuc3BsaWNlKGwsMSlbMF0saT1zLl9kYXRhVmFsdWUobiksbD1zLl9pbmRleChpKSwtMSE9PWwpZShzLnVsWzBdLmNoaWxkcmVuW2xdKS5zaG93KCkscy5lbGVtZW50WzBdLmNoaWxkcmVuW2xdLnNlbGVjdGVkPSExLHMuX3Zpc2libGVJdGVtcys9MSxzLl9oZWlnaHQocy5fdmlzaWJsZUl0ZW1zKTtlbHNlIGZvcihsPXMuZGF0YVNvdXJjZS52aWV3KCkubGVuZ3RoLHI9cy5lbGVtZW50WzBdLmNoaWxkcmVuLGE9ci5sZW5ndGg7YT5sO2wrKylpZihvPXJbbF0sby52YWx1ZT09aSl7by5zZWxlY3RlZD0hMTticmVha31zLl9wbGFjZWhvbGRlcigpfSxfdGVtcGxhdGU6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10Lm9wdGlvbnMsaT1uLml0ZW1UZW1wbGF0ZSxyPW4udGFnVGVtcGxhdGUsbz1uLmRhdGFTb3VyY2U7dC5lbGVtZW50WzBdLmxlbmd0aCYmIW8mJihuLmRhdGFUZXh0RmllbGQ9bi5kYXRhVGV4dEZpZWxkfHxcInRleHRcIixuLmRhdGFWYWx1ZUZpZWxkPW4uZGF0YVZhbHVlRmllbGR8fFwidmFsdWVcIiksZT1hLnRlbXBsYXRlKFwiIzpcIithLmV4cHIobi5kYXRhVGV4dEZpZWxkLFwiZGF0YVwiKStcIiNcIix7dXNlV2l0aEJsb2NrOiExfSksaT1pP2EudGVtcGxhdGUoaSk6ZSxyPXI/YS50ZW1wbGF0ZShyKTplLHQuaXRlbVRlbXBsYXRlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4nPGxpIHRhYmluZGV4PVwiLTFcIiByb2xlPVwib3B0aW9uXCIgZGF0YS1pZHg9XCInK3QrJ1wiIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLWl0ZW1cIicrKG4/QzpcIlwiKStcIj5cIitpKGUpK1wiPC9saT5cIn0sdC50YWdUZW1wbGF0ZT1mdW5jdGlvbihlKXtyZXR1cm4nPGxpIGNsYXNzPVwiay1idXR0b25cIiB1bnNlbGVjdGFibGU9XCJvblwiPjxzcGFuIHVuc2VsZWN0YWJsZT1cIm9uXCI+JytyKGUpKyc8L3NwYW4+PHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstaWNvbiBrLWRlbGV0ZVwiPmRlbGV0ZTwvc3Bhbj48L2xpPid9fSxfaW5wdXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5lbGVtZW50WzBdLmFjY2Vzc0tleSxpPXQuX2lubmVyV3JhcHBlci5jaGlsZHJlbihcImlucHV0LmstaW5wdXRcIik7aVswXXx8KGk9ZSgnPGlucHV0IGNsYXNzPVwiay1pbnB1dFwiIHN0eWxlPVwid2lkdGg6IDI1cHhcIiAvPicpLmFwcGVuZFRvKHQuX2lubmVyV3JhcHBlcikpLHQuZWxlbWVudC5yZW1vdmVBdHRyKFwiYWNjZXNza2V5XCIpLHQuX2ZvY3VzZWQ9dC5pbnB1dD1pLmF0dHIoe2FjY2Vzc2tleTpuLGF1dG9jb21wbGV0ZTpcIm9mZlwiLHJvbGU6XCJsaXN0Ym94XCIsXCJhcmlhLWV4cGFuZGVkXCI6ITF9KX0sX3RhZ0xpc3Q6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5faW5uZXJXcmFwcGVyLmNoaWxkcmVuKFwidWxcIik7blswXXx8KG49ZSgnPHVsIHJvbGU9XCJsaXN0Ym94XCIgdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstcmVzZXRcIi8+JykuYXBwZW5kVG8odC5faW5uZXJXcmFwcGVyKSksdC50YWdMaXN0PW59LF9sb2FkZXI6ZnVuY3Rpb24oKXt0aGlzLl9sb2FkaW5nPWUoJzxzcGFuIGNsYXNzPVwiay1pY29uIGstbG9hZGluZyAnK0ErJ1wiPjwvc3Bhbj4nKS5pbnNlcnRBZnRlcih0aGlzLmlucHV0KX0sX3RleHRDb250YWluZXI6ZnVuY3Rpb24oKXt2YXIgdD1hLmdldENvbXB1dGVkU3R5bGVzKHRoaXMuaW5wdXRbMF0sVik7dC5wb3NpdGlvbj1cImFic29sdXRlXCIsdC52aXNpYmlsaXR5PVwiaGlkZGVuXCIsdC50b3A9LTMzMzMsdC5sZWZ0PS0zMzMzLHRoaXMuX3NwYW49ZShcIjxzcGFuLz5cIikuY3NzKHQpLmFwcGVuZFRvKHRoaXMud3JhcHBlcil9LF93cmFwcGVyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudCxpPW4ucGFyZW50KFwic3Bhbi5rLW11bHRpc2VsZWN0XCIpO2lbMF18fChpPW4ud3JhcCgnPGRpdiBjbGFzcz1cImstd2lkZ2V0IGstbXVsdGlzZWxlY3Qgay1oZWFkZXJcIiB1bnNlbGVjdGFibGU9XCJvblwiIC8+JykucGFyZW50KCksaVswXS5zdHlsZS5jc3NUZXh0PW5bMF0uc3R5bGUuY3NzVGV4dCxlKCc8ZGl2IGNsYXNzPVwiay1tdWx0aXNlbGVjdC13cmFwIGstZmxvYXR3cmFwXCIgdW5zZWxlY3RhYmxlPVwib25cIiAvPicpLmluc2VydEJlZm9yZShuKSksdC53cmFwcGVyPWkuYWRkQ2xhc3MoblswXS5jbGFzc05hbWUpLmNzcyhcImRpc3BsYXlcIixcIlwiKSx0Ll9pbm5lcldyYXBwZXI9ZShpWzBdLmZpcnN0Q2hpbGQpfX0pO3MucGx1Z2luKFUpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSx0LG4pe3ZhciBpPW4/XCIgay1zbGlkZXItaG9yaXpvbnRhbFwiOlwiIGstc2xpZGVyLXZlcnRpY2FsXCIscj1lLnN0eWxlP2Uuc3R5bGU6dC5hdHRyKFwic3R5bGVcIiksbz10LmF0dHIoXCJjbGFzc1wiKT9cIiBcIit0LmF0dHIoXCJjbGFzc1wiKTpcIlwiLGE9XCJcIjtyZXR1cm5cImJvdHRvbVJpZ2h0XCI9PWUudGlja1BsYWNlbWVudD9hPVwiIGstc2xpZGVyLWJvdHRvbXJpZ2h0XCI6XCJ0b3BMZWZ0XCI9PWUudGlja1BsYWNlbWVudCYmKGE9XCIgay1zbGlkZXItdG9wbGVmdFwiKSxyPXI/XCIgc3R5bGU9J1wiK3IrXCInXCI6XCJcIixcIjxkaXYgY2xhc3M9J2std2lkZ2V0IGstc2xpZGVyXCIraStvK1wiJ1wiK3IrXCI+PGRpdiBjbGFzcz0nay1zbGlkZXItd3JhcFwiKyhlLnNob3dCdXR0b25zP1wiIGstc2xpZGVyLWJ1dHRvbnNcIjpcIlwiKSthK1wiJz48L2Rpdj48L2Rpdj5cIn1mdW5jdGlvbiBpKGUsdCxuKXt2YXIgaT1cIlwiO3JldHVybiBpPVwiaW5jcmVhc2VcIj09dD9uP1wiay1pLWFycm93LWVcIjpcImstaS1hcnJvdy1uXCI6bj9cImstaS1hcnJvdy13XCI6XCJrLWktYXJyb3ctc1wiLFwiPGEgY2xhc3M9J2stYnV0dG9uIGstYnV0dG9uLVwiK3QrXCInPjxzcGFuIGNsYXNzPSdrLWljb24gXCIraStcIicgdGl0bGU9J1wiK2VbdCtcIkJ1dHRvblRpdGxlXCJdK1wiJz5cIitlW3QrXCJCdXR0b25UaXRsZVwiXStcIjwvc3Bhbj48L2E+XCJ9ZnVuY3Rpb24gcihlLHQpe3ZhciBuLGk9XCI8dWwgY2xhc3M9J2stcmVzZXQgay1zbGlkZXItaXRlbXMnPlwiLHI9ay5mbG9vcihjKHQvZS5zbWFsbFN0ZXApKSsxO2ZvcihuPTA7cj5uO24rKylpKz1cIjxsaSBjbGFzcz0nay10aWNrJyByb2xlPSdwcmVzZW50YXRpb24nPiZuYnNwOzwvbGk+XCI7cmV0dXJuIGkrPVwiPC91bD5cIn1mdW5jdGlvbiBvKGUsdCl7dmFyIG49dC5pcyhcImlucHV0XCIpPzE6MixpPTI9PW4/ZS5sZWZ0RHJhZ0hhbmRsZVRpdGxlOmUuZHJhZ0hhbmRsZVRpdGxlO3JldHVyblwiPGRpdiBjbGFzcz0nay1zbGlkZXItdHJhY2snPjxkaXYgY2xhc3M9J2stc2xpZGVyLXNlbGVjdGlvbic+PCEtLSAtLT48L2Rpdj48YSBocmVmPScjJyBjbGFzcz0nay1kcmFnaGFuZGxlJyB0aXRsZT0nXCIraStcIicgcm9sZT0nc2xpZGVyJyBhcmlhLXZhbHVlbWluPSdcIitlLm1pbitcIicgYXJpYS12YWx1ZW1heD0nXCIrZS5tYXgrXCInIGFyaWEtdmFsdWVub3c9J1wiKyhuPjE/ZS5zZWxlY3Rpb25TdGFydHx8ZS5taW46ZS52YWx1ZXx8ZS5taW4pK1wiJz5EcmFnPC9hPlwiKyhuPjE/XCI8YSBocmVmPScjJyBjbGFzcz0nay1kcmFnaGFuZGxlJyB0aXRsZT0nXCIrZS5yaWdodERyYWdIYW5kbGVUaXRsZStcIidyb2xlPSdzbGlkZXInIGFyaWEtdmFsdWVtaW49J1wiK2UubWluK1wiJyBhcmlhLXZhbHVlbWF4PSdcIitlLm1heCtcIicgYXJpYS12YWx1ZW5vdz0nXCIrKGUuc2VsZWN0aW9uRW5kfHxlLm1heCkrXCInPkRyYWc8L2E+XCI6XCJcIikrXCI8L2Rpdj5cIn1mdW5jdGlvbiBhKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gdCtlfX1mdW5jdGlvbiBzKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlfX1mdW5jdGlvbiBsKGUpe3JldHVybihlK1wiXCIpLnJlcGxhY2UoXCIuXCIsZi5jdWx0dXJlcy5jdXJyZW50Lm51bWJlckZvcm1hdFtcIi5cIl0pfWZ1bmN0aW9uIGMoZSl7ZT1wYXJzZUZsb2F0KGUsMTApO3ZhciB0PWsucG93KDEwLHF8fDApO3JldHVybiBrLnJvdW5kKGUqdCkvdH1mdW5jdGlvbiBkKGUsbil7dmFyIGk9eShlLmdldEF0dHJpYnV0ZShuKSk7cmV0dXJuIG51bGw9PT1pJiYoaT10KSxpfWZ1bmN0aW9uIHUoZSl7cmV0dXJuIHR5cGVvZiBlIT09WX1mdW5jdGlvbiBoKGUpe3JldHVybiAxZTQqZX12YXIgcCxmPXdpbmRvdy5rZW5kbyxnPWYudWkuV2lkZ2V0LG09Zi51aS5EcmFnZ2FibGUsdj1lLmV4dGVuZCxfPWYuZm9ybWF0LHk9Zi5wYXJzZUZsb2F0LHc9ZS5wcm94eSxiPWUuaXNBcnJheSxrPU1hdGgseD1mLnN1cHBvcnQsQz14LnBvaW50ZXJzLFM9eC5tc1BvaW50ZXJzLFQ9XCJjaGFuZ2VcIixEPVwic2xpZGVcIixBPVwiLnNsaWRlclwiLEU9XCJ0b3VjaHN0YXJ0XCIrQStcIiBtb3VzZWRvd25cIitBLE09Qz9cInBvaW50ZXJkb3duXCIrQTpTP1wiTVNQb2ludGVyRG93blwiK0E6RSxQPVwidG91Y2hlbmRcIitBK1wiIG1vdXNldXBcIitBLEk9Qz9cInBvaW50ZXJ1cFwiOlM/XCJNU1BvaW50ZXJVcFwiK0E6UCx6PVwibW92ZVNlbGVjdGlvblwiLEY9XCJrZXlkb3duXCIrQSxSPVwiY2xpY2tcIitBLEI9XCJtb3VzZW92ZXJcIitBLEw9XCJmb2N1c1wiK0EsTz1cImJsdXJcIitBLEg9XCIuay1kcmFnaGFuZGxlXCIsTj1cIi5rLXNsaWRlci10cmFja1wiLFY9XCIuay10aWNrXCIsVT1cImstc3RhdGUtc2VsZWN0ZWRcIixXPVwiay1zdGF0ZS1mb2N1c2VkXCIsaj1cImstc3RhdGUtZGVmYXVsdFwiLEc9XCJrLXN0YXRlLWRpc2FibGVkXCIscT0zLCQ9XCJkaXNhYmxlZFwiLFk9XCJ1bmRlZmluZWRcIixLPVwidGFiaW5kZXhcIixRPWYuZ2V0VG91Y2hlcyxYPWcuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzO2cuZm4uaW5pdC5jYWxsKGksZSx0KSx0PWkub3B0aW9ucyxpLl9kaXN0YW5jZT1jKHQubWF4LXQubWluKSxpLl9pc0hvcml6b250YWw9XCJob3Jpem9udGFsXCI9PXQub3JpZW50YXRpb24saS5faXNSdGw9aS5faXNIb3Jpem9udGFsJiZmLnN1cHBvcnQuaXNSdGwoZSksaS5fcG9zaXRpb249aS5faXNIb3Jpem9udGFsP1wibGVmdFwiOlwiYm90dG9tXCIsaS5fc2l6ZUZuPWkuX2lzSG9yaXpvbnRhbD9cIndpZHRoXCI6XCJoZWlnaHRcIixpLl9vdXRlclNpemU9aS5faXNIb3Jpem9udGFsP1wib3V0ZXJXaWR0aFwiOlwib3V0ZXJIZWlnaHRcIix0LnRvb2x0aXAuZm9ybWF0PXQudG9vbHRpcC5lbmFibGVkP3QudG9vbHRpcC5mb3JtYXR8fFwiezB9XCI6XCJ7MH1cIixpLl9jcmVhdGVIdG1sKCksaS53cmFwcGVyPWkuZWxlbWVudC5jbG9zZXN0KFwiLmstc2xpZGVyXCIpLGkuX3RyYWNrRGl2PWkud3JhcHBlci5maW5kKE4pLGkuX3NldFRyYWNrRGl2V2lkdGgoKSxpLl9tYXhTZWxlY3Rpb249aS5fdHJhY2tEaXZbaS5fc2l6ZUZuXSgpLGkuX3NsaWRlckl0ZW1zSW5pdCgpLGkuX3RhYmluZGV4KGkud3JhcHBlci5maW5kKEgpKSxpW3QuZW5hYmxlZD9cImVuYWJsZVwiOlwiZGlzYWJsZVwiXSgpLG49Zi5zdXBwb3J0LmlzUnRsKGkud3JhcHBlcik/LTE6MSxpLl9rZXlNYXA9ezM3OmEoLTEqbip0LnNtYWxsU3RlcCksNDA6YSgtdC5zbWFsbFN0ZXApLDM5OmEoMSpuKnQuc21hbGxTdGVwKSwzODphKCt0LnNtYWxsU3RlcCksMzU6cyh0Lm1heCksMzY6cyh0Lm1pbiksMzM6YSgrdC5sYXJnZVN0ZXApLDM0OmEoLXQubGFyZ2VTdGVwKX0sZi5ub3RpZnkoaSl9LGV2ZW50czpbVCxEXSxvcHRpb25zOntlbmFibGVkOiEwLG1pbjowLG1heDoxMCxzbWFsbFN0ZXA6MSxsYXJnZVN0ZXA6NSxvcmllbnRhdGlvbjpcImhvcml6b250YWxcIix0aWNrUGxhY2VtZW50OlwiYm90aFwiLHRvb2x0aXA6e2VuYWJsZWQ6ITAsZm9ybWF0OlwiezB9XCJ9fSxfcmVzaXplOmZ1bmN0aW9uKCl7dGhpcy5fc2V0VHJhY2tEaXZXaWR0aCgpLHRoaXMud3JhcHBlci5maW5kKFwiLmstc2xpZGVyLWl0ZW1zXCIpLnJlbW92ZSgpLHRoaXMuX21heFNlbGVjdGlvbj10aGlzLl90cmFja0Rpdlt0aGlzLl9zaXplRm5dKCksdGhpcy5fc2xpZGVySXRlbXNJbml0KCksdGhpcy5fcmVmcmVzaCgpfSxfc2xpZGVySXRlbXNJbml0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUub3B0aW9ucyxuPWUuX21heFNlbGVjdGlvbi8oKHQubWF4LXQubWluKS90LnNtYWxsU3RlcCksaT1lLl9jYWxjdWxhdGVJdGVtc1dpZHRoKGsuZmxvb3IoZS5fZGlzdGFuY2UvdC5zbWFsbFN0ZXApKTtcIm5vbmVcIiE9dC50aWNrUGxhY2VtZW50JiZuPj0yJiYoZS5fdHJhY2tEaXYuYmVmb3JlKHIodCxlLl9kaXN0YW5jZSkpLGUuX3NldEl0ZW1zV2lkdGgoaSksZS5fc2V0SXRlbXNUaXRsZSgpKSxlLl9jYWxjdWxhdGVTdGVwcyhpKSxcIm5vbmVcIiE9dC50aWNrUGxhY2VtZW50JiZuPj0yJiZ0LmxhcmdlU3RlcD49dC5zbWFsbFN0ZXAmJmUuX3NldEl0ZW1zTGFyZ2VUaWNrKCl9LGdldFNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gZi5kaW1lbnNpb25zKHRoaXMud3JhcHBlcil9LF9zZXRUcmFja0RpdldpZHRoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PTIqcGFyc2VGbG9hdChlLl90cmFja0Rpdi5jc3MoZS5faXNSdGw/XCJyaWdodFwiOmUuX3Bvc2l0aW9uKSwxMCk7ZS5fdHJhY2tEaXZbZS5fc2l6ZUZuXShlLndyYXBwZXJbZS5fc2l6ZUZuXSgpLTItdCl9LF9zZXRJdGVtc1dpZHRoOmZ1bmN0aW9uKHQpe3ZhciBuLGk9dGhpcyxyPWkub3B0aW9ucyxvPTAsYT10Lmxlbmd0aC0xLHM9aS53cmFwcGVyLmZpbmQoViksbD0wLGM9MixkPXMubGVuZ3RoLHU9MDtmb3Iobj0wO2QtMj5uO24rKyllKHNbbisxXSlbaS5fc2l6ZUZuXSh0W25dKTtpZihpLl9pc0hvcml6b250YWw/KGUoc1tvXSkuYWRkQ2xhc3MoXCJrLWZpcnN0XCIpW2kuX3NpemVGbl0odFthLTFdKSxlKHNbYV0pLmFkZENsYXNzKFwiay1sYXN0XCIpW2kuX3NpemVGbl0odFthXSkpOihlKHNbYV0pLmFkZENsYXNzKFwiay1maXJzdFwiKVtpLl9zaXplRm5dKHRbYV0pLGUoc1tvXSkuYWRkQ2xhc3MoXCJrLWxhc3RcIilbaS5fc2l6ZUZuXSh0W2EtMV0pKSxpLl9kaXN0YW5jZSVyLnNtYWxsU3RlcCE9PTAmJiFpLl9pc0hvcml6b250YWwpe2ZvcihuPTA7dC5sZW5ndGg+bjtuKyspdSs9dFtuXTtsPWkuX21heFNlbGVjdGlvbi11LGwrPXBhcnNlRmxvYXQoaS5fdHJhY2tEaXYuY3NzKGkuX3Bvc2l0aW9uKSwxMCkrYyxpLndyYXBwZXIuZmluZChcIi5rLXNsaWRlci1pdGVtc1wiKS5jc3MoXCJwYWRkaW5nLXRvcFwiLGwpfX0sX3NldEl0ZW1zVGl0bGU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcyxuPXQub3B0aW9ucyxpPXQud3JhcHBlci5maW5kKFYpLHI9bi5taW4sbz1pLmxlbmd0aCxhPXQuX2lzSG9yaXpvbnRhbCYmIXQuX2lzUnRsPzA6by0xLHM9dC5faXNIb3Jpem9udGFsJiYhdC5faXNSdGw/bzotMSxsPXQuX2lzSG9yaXpvbnRhbCYmIXQuX2lzUnRsPzE6LTE7YS1zIT09MDthKz1sKWUoaVthXSkuYXR0cihcInRpdGxlXCIsXyhuLnRvb2x0aXAuZm9ybWF0LGMocikpKSxyKz1uLnNtYWxsU3RlcH0sX3NldEl0ZW1zTGFyZ2VUaWNrOmZ1bmN0aW9uKCl7dmFyIHQsbixpLHI9dGhpcyxvPXIub3B0aW9ucyxhPXIud3JhcHBlci5maW5kKFYpLHM9MDtpZihoKG8ubGFyZ2VTdGVwKSVoKG8uc21hbGxTdGVwKT09PTB8fHIuX2Rpc3RhbmNlL28ubGFyZ2VTdGVwPj0zKWZvcihyLl9pc0hvcml6b250YWx8fHIuX2lzUnRsfHwoYT1lLm1ha2VBcnJheShhKS5yZXZlcnNlKCkpLHM9MDthLmxlbmd0aD5zO3MrKyl0PWUoYVtzXSksbj1yLl92YWx1ZXNbc10saT1oKG4tdGhpcy5vcHRpb25zLm1pbiksaSVoKG8uc21hbGxTdGVwKT09PTAmJmklaChvLmxhcmdlU3RlcCk9PT0wJiYodC5hZGRDbGFzcyhcImstdGljay1sYXJnZVwiKS5odG1sKFwiPHNwYW4gY2xhc3M9J2stbGFiZWwnPlwiK3QuYXR0cihcInRpdGxlXCIpK1wiPC9zcGFuPlwiKSwwIT09cyYmcyE9PWEubGVuZ3RoLTEmJnQuY3NzKFwibGluZS1oZWlnaHRcIix0W3IuX3NpemVGbl0oKStcInB4XCIpKX0sX2NhbGN1bGF0ZUl0ZW1zV2lkdGg6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9dGhpcyxvPXIub3B0aW9ucyxhPXBhcnNlRmxvYXQoci5fdHJhY2tEaXYuY3NzKHIuX3NpemVGbikpKzEscz1hL3IuX2Rpc3RhbmNlO2ZvcihyLl9kaXN0YW5jZS9vLnNtYWxsU3RlcC1rLmZsb29yKHIuX2Rpc3RhbmNlL28uc21hbGxTdGVwKT4wJiYoYS09ci5fZGlzdGFuY2Ulby5zbWFsbFN0ZXAqcyksdD1hL2Usbj1bXSxpPTA7ZS0xPmk7aSsrKW5baV09dDtyZXR1cm4gbltlLTFdPW5bZV09dC8yLHIuX3JvdW5kV2lkdGhzKG4pfSxfcm91bmRXaWR0aHM6ZnVuY3Rpb24oZSl7dmFyIHQsbj0wLGk9ZS5sZW5ndGg7Zm9yKHQ9MDtpPnQ7dCsrKW4rPWVbdF0tay5mbG9vcihlW3RdKSxlW3RdPWsuZmxvb3IoZVt0XSk7cmV0dXJuIG49ay5yb3VuZChuKSx0aGlzLl9hZGRBZGRpdGlvbmFsU2l6ZShuLGUpfSxfYWRkQWRkaXRpb25hbFNpemU6ZnVuY3Rpb24oZSx0KXtpZigwPT09ZSlyZXR1cm4gdDt2YXIgbixpPXBhcnNlRmxvYXQodC5sZW5ndGgtMSkvcGFyc2VGbG9hdCgxPT1lP2U6ZS0xKTtmb3Iobj0wO2U+bjtuKyspdFtwYXJzZUludChrLnJvdW5kKGkqbiksMTApXSs9MTtyZXR1cm4gdH0sX2NhbGN1bGF0ZVN0ZXBzOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxpPW4ub3B0aW9ucyxyPWkubWluLG89MCxhPWsuY2VpbChuLl9kaXN0YW5jZS9pLnNtYWxsU3RlcCkscz0xO2lmKGErPW4uX2Rpc3RhbmNlL2kuc21hbGxTdGVwJTE9PT0wPzE6MCxlLnNwbGljZSgwLDAsMiplW2EtMl0pLGUuc3BsaWNlKGEtMSwxLDIqZS5wb3AoKSksbi5fcGl4ZWxTdGVwcz1bb10sbi5fdmFsdWVzPVtyXSwwIT09YSl7Zm9yKDthPnM7KW8rPShlW3MtMV0rZVtzXSkvMixuLl9waXhlbFN0ZXBzW3NdPW8scis9aS5zbWFsbFN0ZXAsbi5fdmFsdWVzW3NdPWMocikscysrO3Q9bi5fZGlzdGFuY2UlaS5zbWFsbFN0ZXA9PT0wP2EtMTphLG4uX3BpeGVsU3RlcHNbdF09bi5fbWF4U2VsZWN0aW9uLG4uX3ZhbHVlc1t0XT1pLm1heCxuLl9pc1J0bCYmKG4uX3BpeGVsU3RlcHMucmV2ZXJzZSgpLG4uX3ZhbHVlcy5yZXZlcnNlKCkpfX0sX2dldFZhbHVlRnJvbVBvc2l0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzLHI9aS5vcHRpb25zLG89ay5tYXgoci5zbWFsbFN0ZXAqKGkuX21heFNlbGVjdGlvbi9pLl9kaXN0YW5jZSksMCksYT0wLHM9by8yO2lmKGkuX2lzSG9yaXpvbnRhbD8oYT1lLXQuc3RhcnRQb2ludCxpLl9pc1J0bCYmKGE9aS5fbWF4U2VsZWN0aW9uLWEpKTphPXQuc3RhcnRQb2ludC1lLGkuX21heFNlbGVjdGlvbi0ocGFyc2VJbnQoaS5fbWF4U2VsZWN0aW9uJW8sMTApLTMpLzI8YSlyZXR1cm4gci5tYXg7Zm9yKG49MDtpLl9waXhlbFN0ZXBzLmxlbmd0aD5uO24rKylpZihrLmFicyhpLl9waXhlbFN0ZXBzW25dLWEpLTE8PXMpcmV0dXJuIGMoaS5fdmFsdWVzW25dKX0sX2dldEZvcm1hdHRlZFZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG89dGhpcyxhPVwiXCIscz1vLm9wdGlvbnMudG9vbHRpcDtyZXR1cm4gYihlKT8oaT1lWzBdLHI9ZVsxXSk6dCYmdC50eXBlJiYoaT10LnNlbGVjdGlvblN0YXJ0LHI9dC5zZWxlY3Rpb25FbmQpLHQmJihuPXQudG9vbHRpcFRlbXBsYXRlKSwhbiYmcy50ZW1wbGF0ZSYmKG49Zi50ZW1wbGF0ZShzLnRlbXBsYXRlKSksYihlKXx8dCYmdC50eXBlP24/YT1uKHtzZWxlY3Rpb25TdGFydDppLHNlbGVjdGlvbkVuZDpyfSk6KGk9XyhzLmZvcm1hdCxpKSxyPV8ocy5mb3JtYXQsciksYT1pK1wiIC0gXCIrcik6KHQmJih0LnZhbD1lKSxhPW4/bih7dmFsdWU6ZX0pOl8ocy5mb3JtYXQsZSkpLGF9LF9nZXREcmFnZ2FibGVBcmVhOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWYuZ2V0T2Zmc2V0KGUuX3RyYWNrRGl2KTtyZXR1cm57c3RhcnRQb2ludDplLl9pc0hvcml6b250YWw/dC5sZWZ0OnQudG9wK2UuX21heFNlbGVjdGlvbixlbmRQb2ludDplLl9pc0hvcml6b250YWw/dC5sZWZ0K2UuX21heFNlbGVjdGlvbjp0LnRvcH19LF9jcmVhdGVIdG1sOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZWxlbWVudCxyPWUub3B0aW9ucyxhPXQuZmluZChcImlucHV0XCIpOzI9PWEubGVuZ3RoPyhhLmVxKDApLnByb3AoXCJ2YWx1ZVwiLGwoci5zZWxlY3Rpb25TdGFydCkpLGEuZXEoMSkucHJvcChcInZhbHVlXCIsbChyLnNlbGVjdGlvbkVuZCkpKTp0LnByb3AoXCJ2YWx1ZVwiLGwoci52YWx1ZSkpLHQud3JhcChuKHIsdCxlLl9pc0hvcml6b250YWwpKS5oaWRlKCksci5zaG93QnV0dG9ucyYmdC5iZWZvcmUoaShyLFwiaW5jcmVhc2VcIixlLl9pc0hvcml6b250YWwpKS5iZWZvcmUoaShyLFwiZGVjcmVhc2VcIixlLl9pc0hvcml6b250YWwpKSx0LmJlZm9yZShvKHIsdCkpfSxfZm9jdXM6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPXQudGFyZ2V0LHI9bi52YWx1ZSgpLG89bi5fZHJhZztvfHwoaT09bi53cmFwcGVyLmZpbmQoSCkuZXEoMClbMF0/KG89bi5fZmlyc3RIYW5kbGVEcmFnLG4uX2FjdGl2ZUhhbmRsZT0wKToobz1uLl9sYXN0SGFuZGxlRHJhZyxuLl9hY3RpdmVIYW5kbGU9MSkscj1yW24uX2FjdGl2ZUhhbmRsZV0pLGUoaSkuYWRkQ2xhc3MoVytcIiBcIitVKSxvJiYobi5fYWN0aXZlSGFuZGxlRHJhZz1vLG8uc2VsZWN0aW9uU3RhcnQ9bi5vcHRpb25zLnNlbGVjdGlvblN0YXJ0LG8uc2VsZWN0aW9uRW5kPW4ub3B0aW9ucy5zZWxlY3Rpb25FbmQsby5fdXBkYXRlVG9vbHRpcChyKSl9LF9mb2N1c1dpdGhNb3VzZTpmdW5jdGlvbih0KXt0PWUodCk7dmFyIG49dGhpcyxpPXQuaXMoSCk/dC5pbmRleCgpOjA7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLndyYXBwZXIuZmluZChIKVsyPT1pPzE6MF0uZm9jdXMoKX0sMSksbi5fc2V0VG9vbHRpcFRpbWVvdXQoKX0sX2JsdXI6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPW4uX2FjdGl2ZUhhbmRsZURyYWc7ZSh0LnRhcmdldCkucmVtb3ZlQ2xhc3MoVytcIiBcIitVKSxpJiYoaS5fcmVtb3ZlVG9vbHRpcCgpLGRlbGV0ZSBuLl9hY3RpdmVIYW5kbGVEcmFnLGRlbGV0ZSBuLl9hY3RpdmVIYW5kbGUpfSxfc2V0VG9vbHRpcFRpbWVvdXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3Rvb2x0aXBUaW1lb3V0PXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHQ9ZS5fZHJhZ3x8ZS5fYWN0aXZlSGFuZGxlRHJhZzt0JiZ0Ll9yZW1vdmVUb29sdGlwKCl9LDMwMCl9LF9jbGVhclRvb2x0aXBUaW1lb3V0OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzO3dpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fdG9vbHRpcFRpbWVvdXQpLGU9dC5fZHJhZ3x8dC5fYWN0aXZlSGFuZGxlRHJhZyxlJiZlLnRvb2x0aXBEaXYmJmUudG9vbHRpcERpdi5zdG9wKCEwLCExKS5jc3MoXCJvcGFjaXR5XCIsMSl9fSksSj1YLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihuLGkpe3ZhciByLG89dGhpcztuLnR5cGU9XCJ0ZXh0XCIsaT12KHt9LHt2YWx1ZTpkKG4sXCJ2YWx1ZVwiKSxtaW46ZChuLFwibWluXCIpLG1heDpkKG4sXCJtYXhcIiksc21hbGxTdGVwOmQobixcInN0ZXBcIil9LGkpLG49ZShuKSxpJiZpLmVuYWJsZWQ9PT10JiYoaS5lbmFibGVkPSFuLmlzKFwiW2Rpc2FibGVkXVwiKSksWC5mbi5pbml0LmNhbGwobyxuLGkpLGk9by5vcHRpb25zLHUoaS52YWx1ZSkmJm51bGwhPT1pLnZhbHVlfHwoaS52YWx1ZT1pLm1pbixuLnByb3AoXCJ2YWx1ZVwiLGwoaS5taW4pKSksaS52YWx1ZT1rLm1heChrLm1pbihpLnZhbHVlLGkubWF4KSxpLm1pbikscj1vLndyYXBwZXIuZmluZChIKSxuZXcgSi5TZWxlY3Rpb24ocixvLGkpLG8uX2RyYWc9bmV3IEouRHJhZyhyLFwiXCIsbyxpKX0sb3B0aW9uczp7bmFtZTpcIlNsaWRlclwiLHNob3dCdXR0b25zOiEwLGluY3JlYXNlQnV0dG9uVGl0bGU6XCJJbmNyZWFzZVwiLGRlY3JlYXNlQnV0dG9uVGl0bGU6XCJEZWNyZWFzZVwiLGRyYWdIYW5kbGVUaXRsZTpcImRyYWdcIix0b29sdGlwOntmb3JtYXQ6XCJ7MDojLCMuIyN9XCJ9LHZhbHVlOm51bGx9LGVuYWJsZTpmdW5jdGlvbihuKXt2YXIgaSxyLG8sYT10aGlzLHM9YS5vcHRpb25zO2EuZGlzYWJsZSgpLG4hPT0hMSYmKGEud3JhcHBlci5yZW1vdmVDbGFzcyhHKS5hZGRDbGFzcyhqKSxhLndyYXBwZXIuZmluZChcImlucHV0XCIpLnJlbW92ZUF0dHIoJCksaT1mdW5jdGlvbihuKXt2YXIgaSxyLG8scz1RKG4pWzBdO2lmKHMpe2lmKGk9YS5faXNIb3Jpem9udGFsP3MubG9jYXRpb24ucGFnZVg6cy5sb2NhdGlvbi5wYWdlWSxyPWEuX2dldERyYWdnYWJsZUFyZWEoKSxvPWUobi50YXJnZXQpLG8uaGFzQ2xhc3MoXCJrLWRyYWdoYW5kbGVcIikpcmV0dXJuIG8uYWRkQ2xhc3MoVytcIiBcIitVKSx0O2EuX3VwZGF0ZShhLl9nZXRWYWx1ZUZyb21Qb3NpdGlvbihpLHIpKSxhLl9mb2N1c1dpdGhNb3VzZShuLnRhcmdldCksYS5fZHJhZy5kcmFnc3RhcnQobiksbi5wcmV2ZW50RGVmYXVsdCgpfX0sYS53cmFwcGVyLmZpbmQoVitcIiwgXCIrTikub24oTSxpKS5lbmQoKS5vbihNLGZ1bmN0aW9uKCl7ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLm9uZShcInNlbGVjdHN0YXJ0XCIsZi5wcmV2ZW50RGVmYXVsdCl9KS5vbihJLGZ1bmN0aW9uKCl7YS5fZHJhZy5fZW5kKCl9KSxhLndyYXBwZXIuZmluZChIKS5hdHRyKEssMCkub24oUCxmdW5jdGlvbigpe2EuX3NldFRvb2x0aXBUaW1lb3V0KCl9KS5vbihSLGZ1bmN0aW9uKGUpe2EuX2ZvY3VzV2l0aE1vdXNlKGUudGFyZ2V0KSxlLnByZXZlbnREZWZhdWx0KCl9KS5vbihMLHcoYS5fZm9jdXMsYSkpLm9uKE8sdyhhLl9ibHVyLGEpKSxyPXcoZnVuY3Rpb24oZSl7dmFyIHQ9YS5fbmV4dFZhbHVlQnlJbmRleChhLl92YWx1ZUluZGV4KzEqZSk7YS5fc2V0VmFsdWVJblJhbmdlKHQpLGEuX2RyYWcuX3VwZGF0ZVRvb2x0aXAodCl9LGEpLHMuc2hvd0J1dHRvbnMmJihvPXcoZnVuY3Rpb24oZSx0KXt0aGlzLl9jbGVhclRvb2x0aXBUaW1lb3V0KCksKDE9PT1lLndoaWNofHx4LnRvdWNoJiYwPT09ZS53aGljaCkmJihyKHQpLHRoaXMudGltZW91dD1zZXRUaW1lb3V0KHcoZnVuY3Rpb24oKXt0aGlzLnRpbWVyPXNldEludGVydmFsKGZ1bmN0aW9uKCl7cih0KX0sNjApfSx0aGlzKSwyMDApKX0sYSksYS53cmFwcGVyLmZpbmQoXCIuay1idXR0b25cIikub24oUCx3KGZ1bmN0aW9uKGUpe3RoaXMuX2NsZWFyVGltZXIoKSxhLl9mb2N1c1dpdGhNb3VzZShlLnRhcmdldCl9LGEpKS5vbihCLGZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcyhcImstc3RhdGUtaG92ZXJcIil9KS5vbihcIm1vdXNlb3V0XCIrQSx3KGZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS5yZW1vdmVDbGFzcyhcImstc3RhdGUtaG92ZXJcIiksdGhpcy5fY2xlYXJUaW1lcigpfSxhKSkuZXEoMCkub24oRSx3KGZ1bmN0aW9uKGUpe28oZSwxKX0sYSkpLmNsaWNrKCExKS5lbmQoKS5lcSgxKS5vbihFLHcoZnVuY3Rpb24oZSl7byhlLC0xKX0sYSkpLmNsaWNrKGYucHJldmVudERlZmF1bHQpKSxhLndyYXBwZXIuZmluZChIKS5vZmYoRiwhMSkub24oRix3KHRoaXMuX2tleWRvd24sYSkpLHMuZW5hYmxlZD0hMCl9LGRpc2FibGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3Qud3JhcHBlci5yZW1vdmVDbGFzcyhqKS5hZGRDbGFzcyhHKSxlKHQuZWxlbWVudCkucHJvcCgkLCQpLHQud3JhcHBlci5maW5kKFwiLmstYnV0dG9uXCIpLm9mZihFKS5vbihFLGYucHJldmVudERlZmF1bHQpLm9mZihQKS5vbihQLGYucHJldmVudERlZmF1bHQpLm9mZihcIm1vdXNlbGVhdmVcIitBKS5vbihcIm1vdXNlbGVhdmVcIitBLGYucHJldmVudERlZmF1bHQpLm9mZihCKS5vbihCLGYucHJldmVudERlZmF1bHQpLHQud3JhcHBlci5maW5kKFYrXCIsIFwiK04pLm9mZihNKS5vZmYoSSksdC53cmFwcGVyLmZpbmQoSCkuYXR0cihLLC0xKS5vZmYoUCkub2ZmKEYpLm9mZihSKS5vZmYoTCkub2ZmKE8pLHQub3B0aW9ucy5lbmFibGVkPSExfSxfdXBkYXRlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LnZhbHVlKCkhPWU7dC52YWx1ZShlKSxuJiZ0LnRyaWdnZXIoVCx7dmFsdWU6dC5vcHRpb25zLnZhbHVlfSl9LHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLm9wdGlvbnM7cmV0dXJuIGU9YyhlKSxpc05hTihlKT9pLnZhbHVlOihlPj1pLm1pbiYmaS5tYXg+PWUmJmkudmFsdWUhPWUmJihuLmVsZW1lbnQucHJvcChcInZhbHVlXCIsbChlKSksaS52YWx1ZT1lLG4uX3JlZnJlc2hBcmlhQXR0cihlKSxuLl9yZWZyZXNoKCkpLHQpfSxfcmVmcmVzaDpmdW5jdGlvbigpe3RoaXMudHJpZ2dlcih6LHt2YWx1ZTp0aGlzLm9wdGlvbnMudmFsdWV9KX0sX3JlZnJlc2hBcmlhQXR0cjpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMsaT1uLl9kcmFnO3Q9aSYmaS5fdG9vbHRpcERpdj9pLl90b29sdGlwRGl2LnRleHQoKTpuLl9nZXRGb3JtYXR0ZWRWYWx1ZShlLG51bGwpLHRoaXMud3JhcHBlci5maW5kKEgpLmF0dHIoXCJhcmlhLXZhbHVlbm93XCIsZSkuYXR0cihcImFyaWEtdmFsdWV0ZXh0XCIsdCl9LF9jbGVhclRpbWVyOmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCksY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmtleUNvZGUgaW4gdC5fa2V5TWFwJiYodC5fY2xlYXJUb29sdGlwVGltZW91dCgpLHQuX3NldFZhbHVlSW5SYW5nZSh0Ll9rZXlNYXBbZS5rZXlDb2RlXSh0Lm9wdGlvbnMudmFsdWUpKSx0Ll9kcmFnLl91cGRhdGVUb29sdGlwKHQudmFsdWUoKSksZS5wcmV2ZW50RGVmYXVsdCgpKVxyXG59LF9zZXRWYWx1ZUluUmFuZ2U6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4ub3B0aW9ucztyZXR1cm4gZT1jKGUpLGlzTmFOKGUpPyhuLl91cGRhdGUoaS5taW4pLHQpOihlPWsubWF4KGsubWluKGUsaS5tYXgpLGkubWluKSxuLl91cGRhdGUoZSksdCl9LF9uZXh0VmFsdWVCeUluZGV4OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3ZhbHVlcy5sZW5ndGg7cmV0dXJuIHRoaXMuX2lzUnRsJiYoZT10LTEtZSksdGhpcy5fdmFsdWVzW2subWF4KDAsay5taW4oZSx0LTEpKV19LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2cuZm4uZGVzdHJveS5jYWxsKGUpLGUud3JhcHBlci5vZmYoQSkuZmluZChcIi5rLWJ1dHRvblwiKS5vZmYoQSkuZW5kKCkuZmluZChIKS5vZmYoQSkuZW5kKCkuZmluZChWK1wiLCBcIitOKS5vZmYoQSkuZW5kKCksZS5fZHJhZy5kcmFnZ2FibGUuZGVzdHJveSgpLGUuX2RyYWcuX3JlbW92ZVRvb2x0aXAoITApfX0pO0ouU2VsZWN0aW9uPWZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiBpKGkpe3ZhciByPWktbi5taW4sbz10Ll92YWx1ZUluZGV4PWsuY2VpbChjKHIvbi5zbWFsbFN0ZXApKSxhPXBhcnNlSW50KHQuX3BpeGVsU3RlcHNbb10sMTApLHM9dC5fdHJhY2tEaXYuZmluZChcIi5rLXNsaWRlci1zZWxlY3Rpb25cIiksbD1wYXJzZUludChlW3QuX291dGVyU2l6ZV0oKS8yLDEwKSxkPXQuX2lzUnRsPzI6MDtzW3QuX3NpemVGbl0odC5faXNSdGw/dC5fbWF4U2VsZWN0aW9uLWE6YSksZS5jc3ModC5fcG9zaXRpb24sYS1sLWQpfWkobi52YWx1ZSksdC5iaW5kKFtULEQsel0sZnVuY3Rpb24oZSl7aShwYXJzZUZsb2F0KGUudmFsdWUsMTApKX0pfSxKLkRyYWc9ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9dGhpcztyLm93bmVyPW4sci5vcHRpb25zPWksci5lbGVtZW50PWUsci50eXBlPXQsci5kcmFnZ2FibGU9bmV3IG0oZSx7ZGlzdGFuY2U6MCxkcmFnc3RhcnQ6dyhyLl9kcmFnc3RhcnQsciksZHJhZzp3KHIuZHJhZyxyKSxkcmFnZW5kOncoci5kcmFnZW5kLHIpLGRyYWdjYW5jZWw6dyhyLmRyYWdjYW5jZWwscil9KSxlLmNsaWNrKCExKX0sSi5EcmFnLnByb3RvdHlwZT17ZHJhZ3N0YXJ0OmZ1bmN0aW9uKGUpe3RoaXMub3duZXIuX2FjdGl2ZURyYWdIYW5kbGU9dGhpcyx0aGlzLmRyYWdnYWJsZS51c2VyRXZlbnRzLmNhbmNlbCgpLHRoaXMuZHJhZ2dhYmxlLnVzZXJFdmVudHMuX3N0YXJ0KGUpfSxfZHJhZ3N0YXJ0OmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMscj1pLm93bmVyLG89aS5vcHRpb25zO3JldHVybiBvLmVuYWJsZWQ/KHRoaXMub3duZXIuX2FjdGl2ZURyYWdIYW5kbGU9dGhpcyxyLmVsZW1lbnQub2ZmKEIpLHIud3JhcHBlci5maW5kKFwiLlwiK1cpLnJlbW92ZUNsYXNzKFcrXCIgXCIrVSksaS5lbGVtZW50LmFkZENsYXNzKFcrXCIgXCIrVSksZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmNzcyhcImN1cnNvclwiLFwicG9pbnRlclwiKSxpLmRyYWdhYmxlQXJlYT1yLl9nZXREcmFnZ2FibGVBcmVhKCksaS5zdGVwPWsubWF4KG8uc21hbGxTdGVwKihyLl9tYXhTZWxlY3Rpb24vci5fZGlzdGFuY2UpLDApLGkudHlwZT8oaS5zZWxlY3Rpb25TdGFydD1vLnNlbGVjdGlvblN0YXJ0LGkuc2VsZWN0aW9uRW5kPW8uc2VsZWN0aW9uRW5kLHIuX3NldFpJbmRleChpLnR5cGUpKTppLm9sZFZhbD1pLnZhbD1vLnZhbHVlLGkuX3JlbW92ZVRvb2x0aXAoITApLGkuX2NyZWF0ZVRvb2x0aXAoKSx0KToobi5wcmV2ZW50RGVmYXVsdCgpLHQpfSxfY3JlYXRlVG9vbHRpcDpmdW5jdGlvbigpe3ZhciB0LG4saT10aGlzLHI9aS5vd25lcixvPWkub3B0aW9ucy50b29sdGlwLGE9XCJcIixzPWUod2luZG93KTtvLmVuYWJsZWQmJihvLnRlbXBsYXRlJiYodD1pLnRvb2x0aXBUZW1wbGF0ZT1mLnRlbXBsYXRlKG8udGVtcGxhdGUpKSxlKFwiLmstc2xpZGVyLXRvb2x0aXBcIikucmVtb3ZlKCksaS50b29sdGlwRGl2PWUoXCI8ZGl2IGNsYXNzPSdrLXdpZGdldCBrLXRvb2x0aXAgay1zbGlkZXItdG9vbHRpcCc+PCEtLSAtLT48L2Rpdj5cIikuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSksYT1yLl9nZXRGb3JtYXR0ZWRWYWx1ZShpLnZhbHx8ci52YWx1ZSgpLGkpLGkudHlwZXx8KG49XCJrLWNhbGxvdXQtXCIrKHIuX2lzSG9yaXpvbnRhbD9cInNcIjpcImVcIiksaS50b29sdGlwSW5uZXJEaXY9XCI8ZGl2IGNsYXNzPSdrLWNhbGxvdXQgXCIrbitcIic+PCEtLSAtLT48L2Rpdj5cIixhKz1pLnRvb2x0aXBJbm5lckRpdiksaS50b29sdGlwRGl2Lmh0bWwoYSksaS5fc2Nyb2xsT2Zmc2V0PXt0b3A6cy5zY3JvbGxUb3AoKSxsZWZ0OnMuc2Nyb2xsTGVmdCgpfSxpLm1vdmVUb29sdGlwKCkpfSxkcmFnOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxpPW4ub3duZXIscj1lLngubG9jYXRpb24sbz1lLnkubG9jYXRpb24sYT1uLmRyYWdhYmxlQXJlYS5zdGFydFBvaW50LHM9bi5kcmFnYWJsZUFyZWEuZW5kUG9pbnQ7ZS5wcmV2ZW50RGVmYXVsdCgpLG4udmFsPWkuX2lzSG9yaXpvbnRhbD9pLl9pc1J0bD9uLmNvbnN0cmFpblZhbHVlKHIsYSxzLHM+cik6bi5jb25zdHJhaW5WYWx1ZShyLGEscyxyPj1zKTpuLmNvbnN0cmFpblZhbHVlKG8scyxhLHM+PW8pLG4ub2xkVmFsIT1uLnZhbCYmKG4ub2xkVmFsPW4udmFsLG4udHlwZT8oXCJmaXJzdEhhbmRsZVwiPT1uLnR5cGU/bi5zZWxlY3Rpb25TdGFydD1uLnNlbGVjdGlvbkVuZD5uLnZhbD9uLnZhbDpuLnNlbGVjdGlvbkVuZD1uLnZhbDpuLnZhbD5uLnNlbGVjdGlvblN0YXJ0P24uc2VsZWN0aW9uRW5kPW4udmFsOm4uc2VsZWN0aW9uU3RhcnQ9bi5zZWxlY3Rpb25FbmQ9bi52YWwsdD17dmFsdWVzOltuLnNlbGVjdGlvblN0YXJ0LG4uc2VsZWN0aW9uRW5kXSx2YWx1ZTpbbi5zZWxlY3Rpb25TdGFydCxuLnNlbGVjdGlvbkVuZF19KTp0PXt2YWx1ZTpuLnZhbH0saS50cmlnZ2VyKEQsdCkpLG4uX3VwZGF0ZVRvb2x0aXAobi52YWwpfSxfdXBkYXRlVG9vbHRpcDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLGk9bi50b29sdGlwLHI9XCJcIjtpLmVuYWJsZWQmJih0LnRvb2x0aXBEaXZ8fHQuX2NyZWF0ZVRvb2x0aXAoKSxyPXQub3duZXIuX2dldEZvcm1hdHRlZFZhbHVlKGMoZSksdCksdC50eXBlfHwocis9dC50b29sdGlwSW5uZXJEaXYpLHQudG9vbHRpcERpdi5odG1sKHIpLHQubW92ZVRvb2x0aXAoKSl9LGRyYWdjYW5jZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vd25lci5fcmVmcmVzaCgpLGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5jc3MoXCJjdXJzb3JcIixcIlwiKSx0aGlzLl9lbmQoKX0sZHJhZ2VuZDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10Lm93bmVyO3JldHVybiBlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuY3NzKFwiY3Vyc29yXCIsXCJcIiksdC50eXBlP24uX3VwZGF0ZSh0LnNlbGVjdGlvblN0YXJ0LHQuc2VsZWN0aW9uRW5kKToobi5fdXBkYXRlKHQudmFsKSx0LmRyYWdnYWJsZS51c2VyRXZlbnRzLl9kaXNwb3NlQWxsKCkpLHQuX2VuZCgpfSxfZW5kOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUub3duZXI7cmV0dXJuIHQuX2ZvY3VzV2l0aE1vdXNlKGUuZWxlbWVudCksdC5lbGVtZW50Lm9uKEIpLCExfSxfcmVtb3ZlVG9vbHRpcDpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9bi5vd25lcjtuLnRvb2x0aXBEaXYmJmkub3B0aW9ucy50b29sdGlwLmVuYWJsZWQmJmkub3B0aW9ucy5lbmFibGVkJiYodD8obi50b29sdGlwRGl2LnJlbW92ZSgpLG4udG9vbHRpcERpdj1udWxsKTpuLnRvb2x0aXBEaXYuZmFkZU91dChcInNsb3dcIixmdW5jdGlvbigpe2UodGhpcykucmVtb3ZlKCksbi50b29sdGlwRGl2PW51bGx9KSl9LG1vdmVUb29sdGlwOmZ1bmN0aW9uKCl7dmFyIHQsbixpLHIsbz10aGlzLGE9by5vd25lcixzPTAsbD0wLGM9by5lbGVtZW50LGQ9Zi5nZXRPZmZzZXQoYyksdT04LGg9ZSh3aW5kb3cpLHA9by50b29sdGlwRGl2LmZpbmQoXCIuay1jYWxsb3V0XCIpLGc9by50b29sdGlwRGl2Lm91dGVyV2lkdGgoKSxtPW8udG9vbHRpcERpdi5vdXRlckhlaWdodCgpO28udHlwZT8odD1hLndyYXBwZXIuZmluZChIKSxkPWYuZ2V0T2Zmc2V0KHQuZXEoMCkpLG49Zi5nZXRPZmZzZXQodC5lcSgxKSksYS5faXNIb3Jpem9udGFsPyhzPW4udG9wLGw9ZC5sZWZ0KyhuLmxlZnQtZC5sZWZ0KS8yKToocz1kLnRvcCsobi50b3AtZC50b3ApLzIsbD1uLmxlZnQpLHI9dC5lcSgwKS5vdXRlcldpZHRoKCkrMip1KToocz1kLnRvcCxsPWQubGVmdCxyPWMub3V0ZXJXaWR0aCgpKzIqdSksYS5faXNIb3Jpem9udGFsPyhsLT1wYXJzZUludCgoZy1jW2EuX291dGVyU2l6ZV0oKSkvMiwxMCkscy09bStwLmhlaWdodCgpK3UpOihzLT1wYXJzZUludCgobS1jW2EuX291dGVyU2l6ZV0oKSkvMiwxMCksbC09ZytwLndpZHRoKCkrdSksYS5faXNIb3Jpem9udGFsPyhpPW8uX2ZsaXAocyxtLHIsaC5vdXRlckhlaWdodCgpK28uX3Njcm9sbE9mZnNldC50b3ApLHMrPWksbCs9by5fZml0KGwsZyxoLm91dGVyV2lkdGgoKStvLl9zY3JvbGxPZmZzZXQubGVmdCkpOihpPW8uX2ZsaXAobCxnLHIsaC5vdXRlcldpZHRoKCkrby5fc2Nyb2xsT2Zmc2V0LmxlZnQpLHMrPW8uX2ZpdChzLG0saC5vdXRlckhlaWdodCgpK28uX3Njcm9sbE9mZnNldC50b3ApLGwrPWkpLGk+MCYmcCYmKHAucmVtb3ZlQ2xhc3MoKSxwLmFkZENsYXNzKFwiay1jYWxsb3V0IGstY2FsbG91dC1cIisoYS5faXNIb3Jpem9udGFsP1wiblwiOlwid1wiKSkpLG8udG9vbHRpcERpdi5jc3Moe3RvcDpzLGxlZnQ6bH0pfSxfZml0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT0wO3JldHVybiBlK3Q+biYmKGk9bi0oZSt0KSksMD5lJiYoaT0tZSksaX0sX2ZsaXA6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9MDtyZXR1cm4gZSt0PmkmJihyKz0tKG4rdCkpLDA+ZStyJiYocis9bit0KSxyfSxjb25zdHJhaW5WYWx1ZTpmdW5jdGlvbihlLHQsbixpKXt2YXIgcj10aGlzLG89MDtyZXR1cm4gbz1lPnQmJm4+ZT9yLm93bmVyLl9nZXRWYWx1ZUZyb21Qb3NpdGlvbihlLHIuZHJhZ2FibGVBcmVhKTppP3Iub3B0aW9ucy5tYXg6ci5vcHRpb25zLm1pbn19LGYudWkucGx1Z2luKEopLHA9WC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24obixpKXt2YXIgcixvPXRoaXMsYT1lKG4pLmZpbmQoXCJpbnB1dFwiKSxzPWEuZXEoMClbMF0sYz1hLmVxKDEpWzBdO3MudHlwZT1cInRleHRcIixjLnR5cGU9XCJ0ZXh0XCIsaT12KHt9LHtzZWxlY3Rpb25TdGFydDpkKHMsXCJ2YWx1ZVwiKSxtaW46ZChzLFwibWluXCIpLG1heDpkKHMsXCJtYXhcIiksc21hbGxTdGVwOmQocyxcInN0ZXBcIil9LHtzZWxlY3Rpb25FbmQ6ZChjLFwidmFsdWVcIiksbWluOmQoYyxcIm1pblwiKSxtYXg6ZChjLFwibWF4XCIpLHNtYWxsU3RlcDpkKGMsXCJzdGVwXCIpfSxpKSxpJiZpLmVuYWJsZWQ9PT10JiYoaS5lbmFibGVkPSFhLmlzKFwiW2Rpc2FibGVkXVwiKSksWC5mbi5pbml0LmNhbGwobyxuLGkpLGk9by5vcHRpb25zLHUoaS5zZWxlY3Rpb25TdGFydCkmJm51bGwhPT1pLnNlbGVjdGlvblN0YXJ0fHwoaS5zZWxlY3Rpb25TdGFydD1pLm1pbixhLmVxKDApLnByb3AoXCJ2YWx1ZVwiLGwoaS5taW4pKSksdShpLnNlbGVjdGlvbkVuZCkmJm51bGwhPT1pLnNlbGVjdGlvbkVuZHx8KGkuc2VsZWN0aW9uRW5kPWkubWF4LGEuZXEoMSkucHJvcChcInZhbHVlXCIsbChpLm1heCkpKSxyPW8ud3JhcHBlci5maW5kKEgpLG5ldyBwLlNlbGVjdGlvbihyLG8saSksby5fZmlyc3RIYW5kbGVEcmFnPW5ldyBKLkRyYWcoci5lcSgwKSxcImZpcnN0SGFuZGxlXCIsbyxpKSxvLl9sYXN0SGFuZGxlRHJhZz1uZXcgSi5EcmFnKHIuZXEoMSksXCJsYXN0SGFuZGxlXCIsbyxpKX0sb3B0aW9uczp7bmFtZTpcIlJhbmdlU2xpZGVyXCIsbGVmdERyYWdIYW5kbGVUaXRsZTpcImRyYWdcIixyaWdodERyYWdIYW5kbGVUaXRsZTpcImRyYWdcIix0b29sdGlwOntmb3JtYXQ6XCJ7MDojLCMuIyN9XCJ9LHNlbGVjdGlvblN0YXJ0Om51bGwsc2VsZWN0aW9uRW5kOm51bGx9LGVuYWJsZTpmdW5jdGlvbihuKXt2YXIgaSxyPXRoaXMsbz1yLm9wdGlvbnM7ci5kaXNhYmxlKCksbiE9PSExJiYoci53cmFwcGVyLnJlbW92ZUNsYXNzKEcpLmFkZENsYXNzKGopLHIud3JhcHBlci5maW5kKFwiaW5wdXRcIikucmVtb3ZlQXR0cigkKSxpPWZ1bmN0aW9uKG4pe3ZhciBpLGEscyxsLGMsZCx1LGg9UShuKVswXTtpZihoKXtpZihpPXIuX2lzSG9yaXpvbnRhbD9oLmxvY2F0aW9uLnBhZ2VYOmgubG9jYXRpb24ucGFnZVksYT1yLl9nZXREcmFnZ2FibGVBcmVhKCkscz1yLl9nZXRWYWx1ZUZyb21Qb3NpdGlvbihpLGEpLGw9ZShuLnRhcmdldCksbC5oYXNDbGFzcyhcImstZHJhZ2hhbmRsZVwiKSlyZXR1cm4gci53cmFwcGVyLmZpbmQoXCIuXCIrVykucmVtb3ZlQ2xhc3MoVytcIiBcIitVKSxsLmFkZENsYXNzKFcrXCIgXCIrVSksdDtvLnNlbGVjdGlvblN0YXJ0PnM/KGM9cyxkPW8uc2VsZWN0aW9uRW5kLHU9ci5fZmlyc3RIYW5kbGVEcmFnKTpzPnIuc2VsZWN0aW9uRW5kPyhjPW8uc2VsZWN0aW9uU3RhcnQsZD1zLHU9ci5fbGFzdEhhbmRsZURyYWcpOm8uc2VsZWN0aW9uRW5kLXM+PXMtby5zZWxlY3Rpb25TdGFydD8oYz1zLGQ9by5zZWxlY3Rpb25FbmQsdT1yLl9maXJzdEhhbmRsZURyYWcpOihjPW8uc2VsZWN0aW9uU3RhcnQsZD1zLHU9ci5fbGFzdEhhbmRsZURyYWcpLHUuZHJhZ3N0YXJ0KG4pLHIuX3NldFZhbHVlSW5SYW5nZShjLGQpLHIuX2ZvY3VzV2l0aE1vdXNlKHUuZWxlbWVudCl9fSxyLndyYXBwZXIuZmluZChWK1wiLCBcIitOKS5vbihNLGkpLmVuZCgpLm9uKE0sZnVuY3Rpb24oKXtlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkub25lKFwic2VsZWN0c3RhcnRcIixmLnByZXZlbnREZWZhdWx0KX0pLm9uKEksZnVuY3Rpb24oKXtyLl9hY3RpdmVEcmFnSGFuZGxlJiZyLl9hY3RpdmVEcmFnSGFuZGxlLl9lbmQoKX0pLHIud3JhcHBlci5maW5kKEgpLmF0dHIoSywwKS5vbihQLGZ1bmN0aW9uKCl7ci5fc2V0VG9vbHRpcFRpbWVvdXQoKX0pLm9uKFIsZnVuY3Rpb24oZSl7ci5fZm9jdXNXaXRoTW91c2UoZS50YXJnZXQpLGUucHJldmVudERlZmF1bHQoKX0pLm9uKEwsdyhyLl9mb2N1cyxyKSkub24oTyx3KHIuX2JsdXIscikpLHIud3JhcHBlci5maW5kKEgpLm9mZihGLGYucHJldmVudERlZmF1bHQpLmVxKDApLm9uKEYsdyhmdW5jdGlvbihlKXt0aGlzLl9rZXlkb3duKGUsXCJmaXJzdEhhbmRsZVwiKX0scikpLmVuZCgpLmVxKDEpLm9uKEYsdyhmdW5jdGlvbihlKXt0aGlzLl9rZXlkb3duKGUsXCJsYXN0SGFuZGxlXCIpfSxyKSksci5vcHRpb25zLmVuYWJsZWQ9ITApfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLndyYXBwZXIucmVtb3ZlQ2xhc3MoaikuYWRkQ2xhc3MoRyksZS53cmFwcGVyLmZpbmQoXCJpbnB1dFwiKS5wcm9wKCQsJCksZS53cmFwcGVyLmZpbmQoVitcIiwgXCIrTikub2ZmKE0pLm9mZihJKSxlLndyYXBwZXIuZmluZChIKS5hdHRyKEssLTEpLm9mZihQKS5vZmYoRikub2ZmKFIpLm9mZihMKS5vZmYoTyksZS5vcHRpb25zLmVuYWJsZWQ9ITF9LF9rZXlkb3duOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG89dGhpcyxhPW8ub3B0aW9ucy5zZWxlY3Rpb25TdGFydCxzPW8ub3B0aW9ucy5zZWxlY3Rpb25FbmQ7ZS5rZXlDb2RlIGluIG8uX2tleU1hcCYmKG8uX2NsZWFyVG9vbHRpcFRpbWVvdXQoKSxcImZpcnN0SGFuZGxlXCI9PXQ/KHI9by5fYWN0aXZlSGFuZGxlRHJhZz1vLl9maXJzdEhhbmRsZURyYWcsYT1vLl9rZXlNYXBbZS5rZXlDb2RlXShhKSxhPnMmJihzPWEpKToocj1vLl9hY3RpdmVIYW5kbGVEcmFnPW8uX2xhc3RIYW5kbGVEcmFnLHM9by5fa2V5TWFwW2Uua2V5Q29kZV0ocyksYT5zJiYoYT1zKSksby5fc2V0VmFsdWVJblJhbmdlKGEscyksbj1NYXRoLm1heChhLG8ub3B0aW9ucy5zZWxlY3Rpb25TdGFydCksaT1NYXRoLm1pbihzLG8ub3B0aW9ucy5zZWxlY3Rpb25FbmQpLHIuc2VsZWN0aW9uRW5kPU1hdGgubWF4KGksby5vcHRpb25zLnNlbGVjdGlvblN0YXJ0KSxyLnNlbGVjdGlvblN0YXJ0PU1hdGgubWluKG4sby5vcHRpb25zLnNlbGVjdGlvbkVuZCksci5fdXBkYXRlVG9vbHRpcChvLnZhbHVlKClbby5fYWN0aXZlSGFuZGxlXSksZS5wcmV2ZW50RGVmYXVsdCgpKX0sX3VwZGF0ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1uLnZhbHVlKCkscj1pWzBdIT1lfHxpWzFdIT10O24udmFsdWUoW2UsdF0pLHImJm4udHJpZ2dlcihULHt2YWx1ZXM6W2UsdF0sdmFsdWU6W2UsdF19KX0sdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUubGVuZ3RoP3RoaXMuX3ZhbHVlKGVbMF0sZVsxXSk6dGhpcy5fdmFsdWUoKX0sX3ZhbHVlOmZ1bmN0aW9uKGUsbil7dmFyIGk9dGhpcyxyPWkub3B0aW9ucyxvPXIuc2VsZWN0aW9uU3RhcnQsYT1yLnNlbGVjdGlvbkVuZDtyZXR1cm4gaXNOYU4oZSkmJmlzTmFOKG4pP1tvLGFdOihlPWMoZSksbj1jKG4pLGU+PXIubWluJiZyLm1heD49ZSYmbj49ci5taW4mJnIubWF4Pj1uJiZuPj1lJiYobyE9ZXx8YSE9bikmJihpLmVsZW1lbnQuZmluZChcImlucHV0XCIpLmVxKDApLnByb3AoXCJ2YWx1ZVwiLGwoZSkpLmVuZCgpLmVxKDEpLnByb3AoXCJ2YWx1ZVwiLGwobikpLHIuc2VsZWN0aW9uU3RhcnQ9ZSxyLnNlbGVjdGlvbkVuZD1uLGkuX3JlZnJlc2goKSxpLl9yZWZyZXNoQXJpYUF0dHIoZSxuKSksdCl9LHZhbHVlczpmdW5jdGlvbihlLHQpe3JldHVybiBiKGUpP3RoaXMuX3ZhbHVlKGVbMF0sZVsxXSk6dGhpcy5fdmFsdWUoZSx0KX0sX3JlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zO2UudHJpZ2dlcih6LHt2YWx1ZXM6W3Quc2VsZWN0aW9uU3RhcnQsdC5zZWxlY3Rpb25FbmRdLHZhbHVlOlt0LnNlbGVjdGlvblN0YXJ0LHQuc2VsZWN0aW9uRW5kXX0pLHQuc2VsZWN0aW9uU3RhcnQ9PXQubWF4JiZ0LnNlbGVjdGlvbkVuZD09dC5tYXgmJmUuX3NldFpJbmRleChcImZpcnN0SGFuZGxlXCIpfSxfcmVmcmVzaEFyaWFBdHRyOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzLHI9aS53cmFwcGVyLmZpbmQoSCksbz1pLl9hY3RpdmVIYW5kbGVEcmFnO249aS5fZ2V0Rm9ybWF0dGVkVmFsdWUoW2UsdF0sbyksci5lcSgwKS5hdHRyKFwiYXJpYS12YWx1ZW5vd1wiLGUpLHIuZXEoMSkuYXR0cihcImFyaWEtdmFsdWVub3dcIix0KSxyLmF0dHIoXCJhcmlhLXZhbHVldGV4dFwiLG4pfSxfc2V0VmFsdWVJblJhbmdlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5vcHRpb25zO2U9ay5tYXgoay5taW4oZSxuLm1heCksbi5taW4pLHQ9ay5tYXgoay5taW4odCxuLm1heCksbi5taW4pLGU9PW4ubWF4JiZ0PT1uLm1heCYmdGhpcy5fc2V0WkluZGV4KFwiZmlyc3RIYW5kbGVcIiksdGhpcy5fdXBkYXRlKGsubWluKGUsdCksay5tYXgoZSx0KSl9LF9zZXRaSW5kZXg6ZnVuY3Rpb24odCl7dGhpcy53cmFwcGVyLmZpbmQoSCkuZWFjaChmdW5jdGlvbihuKXtlKHRoaXMpLmNzcyhcInotaW5kZXhcIixcImZpcnN0SGFuZGxlXCI9PXQ/MS1uOm4pfSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2cuZm4uZGVzdHJveS5jYWxsKGUpLGUud3JhcHBlci5vZmYoQSkuZmluZChWK1wiLCBcIitOKS5vZmYoQSkuZW5kKCkuZmluZChIKS5vZmYoQSksZS5fZmlyc3RIYW5kbGVEcmFnLmRyYWdnYWJsZS5kZXN0cm95KCksZS5fbGFzdEhhbmRsZURyYWcuZHJhZ2dhYmxlLmRlc3Ryb3koKX19KSxwLlNlbGVjdGlvbj1mdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gaShpKXtpPWl8fFtdO3ZhciBvPWlbMF0tbi5taW4sYT1pWzFdLW4ubWluLHM9ay5jZWlsKGMoby9uLnNtYWxsU3RlcCkpLGw9ay5jZWlsKGMoYS9uLnNtYWxsU3RlcCkpLGQ9dC5fcGl4ZWxTdGVwc1tzXSx1PXQuX3BpeGVsU3RlcHNbbF0saD1wYXJzZUludChlLmVxKDApW3QuX291dGVyU2l6ZV0oKS8yLDEwKSxwPXQuX2lzUnRsPzI6MDtlLmVxKDApLmNzcyh0Ll9wb3NpdGlvbixkLWgtcCkuZW5kKCkuZXEoMSkuY3NzKHQuX3Bvc2l0aW9uLHUtaC1wKSxyKGQsdSl9ZnVuY3Rpb24gcihlLG4pe3ZhciBpLHIsbz10Ll90cmFja0Rpdi5maW5kKFwiLmstc2xpZGVyLXNlbGVjdGlvblwiKTtpPWsuYWJzKGUtbiksb1t0Ll9zaXplRm5dKGkpLHQuX2lzUnRsPyhyPWsubWF4KGUsbiksby5jc3MoXCJyaWdodFwiLHQuX21heFNlbGVjdGlvbi1yLTEpKToocj1rLm1pbihlLG4pLG8uY3NzKHQuX3Bvc2l0aW9uLHItMSkpfWkodC52YWx1ZSgpKSx0LmJpbmQoW1QsRCx6XSxmdW5jdGlvbihlKXtpKGUudmFsdWVzKX0pfSxmLnVpLnBsdWdpbihwKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIGkoZSx0LG4pe249ZChuKSxuJiYhbi5lcXVhbHMoZS5jb2xvcigpKSYmKFwiY2hhbmdlXCI9PXQmJihlLl92YWx1ZT1uKSxuPTEhPW4uYT9uLnRvQ3NzUmdiYSgpOm4udG9Dc3MoKSxlLnRyaWdnZXIodCx7dmFsdWU6bn0pKX1mdW5jdGlvbiByKGUsdCxuKXt2YXIgaSxyO3JldHVybiBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUpLGk9ZS5sZW5ndGgscj1lLmluZGV4T2YodCksMD5yPzA+bj9lW2ktMV06ZVswXToocis9biwwPnI/cis9aTpyJT1pLGVbcl0pfWZ1bmN0aW9uIG8oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfWZ1bmN0aW9uIGEoZSx0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LGFyZ3VtZW50cyl9fXZhciBzPXdpbmRvdy5rZW5kbyxsPXMudWksYz1sLldpZGdldCxkPXMucGFyc2VDb2xvcix1PXMuQ29sb3IsaD1zLmtleXMscD1cImJhY2tncm91bmQtY29sb3JcIixmPVwiay1zdGF0ZS1zZWxlY3RlZFwiLGc9XCIwMDAwMDAsN2Y3ZjdmLDg4MDAxNSxlZDFjMjQsZmY3ZjI3LGZmZjIwMCwyMmIxNGMsMDBhMmU4LDNmNDhjYyxhMzQ5YTQsZmZmZmZmLGMzYzNjMyxiOTdhNTcsZmZhZWM5LGZmYzkwZSxlZmU0YjAsYjVlNjFkLDk5ZDllYSw3MDkyYmUsYzhiZmU3XCIsbT1cIkZGRkZGRixGRkNDRkYsRkY5OUZGLEZGNjZGRixGRjMzRkYsRkYwMEZGLENDRkZGRixDQ0NDRkYsQ0M5OUZGLENDNjZGRixDQzMzRkYsQ0MwMEZGLDk5RkZGRiw5OUNDRkYsOTk5OUZGLDk5NjZGRiw5OTMzRkYsOTkwMEZGLEZGRkZDQyxGRkNDQ0MsRkY5OUNDLEZGNjZDQyxGRjMzQ0MsRkYwMENDLENDRkZDQyxDQ0NDQ0MsQ0M5OUNDLENDNjZDQyxDQzMzQ0MsQ0MwMENDLDk5RkZDQyw5OUNDQ0MsOTk5OUNDLDk5NjZDQyw5OTMzQ0MsOTkwMENDLEZGRkY5OSxGRkNDOTksRkY5OTk5LEZGNjY5OSxGRjMzOTksRkYwMDk5LENDRkY5OSxDQ0NDOTksQ0M5OTk5LENDNjY5OSxDQzMzOTksQ0MwMDk5LDk5RkY5OSw5OUNDOTksOTk5OTk5LDk5NjY5OSw5OTMzOTksOTkwMDk5LEZGRkY2NixGRkNDNjYsRkY5OTY2LEZGNjY2NixGRjMzNjYsRkYwMDY2LENDRkY2NixDQ0NDNjYsQ0M5OTY2LENDNjY2NixDQzMzNjYsQ0MwMDY2LDk5RkY2Niw5OUNDNjYsOTk5OTY2LDk5NjY2Niw5OTMzNjYsOTkwMDY2LEZGRkYzMyxGRkNDMzMsRkY5OTMzLEZGNjYzMyxGRjMzMzMsRkYwMDMzLENDRkYzMyxDQ0NDMzMsQ0M5OTMzLENDNjYzMyxDQzMzMzMsQ0MwMDMzLDk5RkYzMyw5OUNDMzMsOTk5OTMzLDk5NjYzMyw5OTMzMzMsOTkwMDMzLEZGRkYwMCxGRkNDMDAsRkY5OTAwLEZGNjYwMCxGRjMzMDAsRkYwMDAwLENDRkYwMCxDQ0NDMDAsQ0M5OTAwLENDNjYwMCxDQzMzMDAsQ0MwMDAwLDk5RkYwMCw5OUNDMDAsOTk5OTAwLDk5NjYwMCw5OTMzMDAsOTkwMDAwLDY2RkZGRiw2NkNDRkYsNjY5OUZGLDY2NjZGRiw2NjMzRkYsNjYwMEZGLDMzRkZGRiwzM0NDRkYsMzM5OUZGLDMzNjZGRiwzMzMzRkYsMzMwMEZGLDAwRkZGRiwwMENDRkYsMDA5OUZGLDAwNjZGRiwwMDMzRkYsMDAwMEZGLDY2RkZDQyw2NkNDQ0MsNjY5OUNDLDY2NjZDQyw2NjMzQ0MsNjYwMENDLDMzRkZDQywzM0NDQ0MsMzM5OUNDLDMzNjZDQywzMzMzQ0MsMzMwMENDLDAwRkZDQywwMENDQ0MsMDA5OUNDLDAwNjZDQywwMDMzQ0MsMDAwMENDLDY2RkY5OSw2NkNDOTksNjY5OTk5LDY2NjY5OSw2NjMzOTksNjYwMDk5LDMzRkY5OSwzM0NDOTksMzM5OTk5LDMzNjY5OSwzMzMzOTksMzMwMDk5LDAwRkY5OSwwMENDOTksMDA5OTk5LDAwNjY5OSwwMDMzOTksMDAwMDk5LDY2RkY2Niw2NkNDNjYsNjY5OTY2LDY2NjY2Niw2NjMzNjYsNjYwMDY2LDMzRkY2NiwzM0NDNjYsMzM5OTY2LDMzNjY2NiwzMzMzNjYsMzMwMDY2LDAwRkY2NiwwMENDNjYsMDA5OTY2LDAwNjY2NiwwMDMzNjYsMDAwMDY2LDY2RkYzMyw2NkNDMzMsNjY5OTMzLDY2NjYzMyw2NjMzMzMsNjYwMDMzLDMzRkYzMywzM0NDMzMsMzM5OTMzLDMzNjYzMywzMzMzMzMsMzMwMDMzLDAwRkYzMywwMENDMzMsMDA5OTMzLDAwNjYzMywwMDMzMzMsMDAwMDMzLDY2RkYwMCw2NkNDMDAsNjY5OTAwLDY2NjYwMCw2NjMzMDAsNjYwMDAwLDMzRkYwMCwzM0NDMDAsMzM5OTAwLDMzNjYwMCwzMzMzMDAsMzMwMDAwLDAwRkYwMCwwMENDMDAsMDA5OTAwLDAwNjYwMCwwMDMzMDAsMDAwMDAwXCIsdj17YXBwbHk6XCJBcHBseVwiLGNhbmNlbDpcIkNhbmNlbFwifSxfPVwiLmtlbmRvQ29sb3JUb29sc1wiLHk9XCJjbGlja1wiK18sdz1cImtleWRvd25cIitfLGI9cy5zdXBwb3J0LmJyb3dzZXIsaz1iLm1zaWUmJjk+Yi52ZXJzaW9uLHg9Yy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXM7Yy5mbi5pbml0LmNhbGwoaSxlLHQpLGU9aS5lbGVtZW50LHQ9aS5vcHRpb25zLGkuX3ZhbHVlPXQudmFsdWU9ZCh0LnZhbHVlKSxpLl90YWJJbmRleD1lLmF0dHIoXCJ0YWJJbmRleFwiKXx8MCxuPWkuX2FyaWFJZD10LmFyaWFJZCxuJiZlLmF0dHIoXCJhcmlhLWxhYmVsbGVkYnlcIixuKSx0Ll9zdGFuZGFsb25lJiYoaS5fdHJpZ2dlclNlbGVjdD1pLl90cmlnZ2VyQ2hhbmdlKX0sb3B0aW9uczp7bmFtZTpcIkNvbG9yU2VsZWN0b3JcIix2YWx1ZTpudWxsLF9zdGFuZGFsb25lOiEwfSxldmVudHM6W1wiY2hhbmdlXCIsXCJzZWxlY3RcIixcImNhbmNlbFwiXSxjb2xvcjpmdW5jdGlvbihlKXtyZXR1cm4gZSE9PW4mJih0aGlzLl92YWx1ZT1kKGUpLHRoaXMuX3VwZGF0ZVVJKHRoaXMuX3ZhbHVlKSksdGhpcy5fdmFsdWV9LHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlPXRoaXMuY29sb3IoZSksZSYmKGU9dGhpcy5vcHRpb25zLm9wYWNpdHk/ZS50b0Nzc1JnYmEoKTplLnRvQ3NzKCkpLGV8fG51bGx9LGVuYWJsZTpmdW5jdGlvbih0KXswPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9ITApLGUoXCIuay1kaXNhYmxlZC1vdmVybGF5XCIsdGhpcy53cmFwcGVyKS5yZW1vdmUoKSx0fHx0aGlzLndyYXBwZXIuYXBwZW5kKFwiPGRpdiBjbGFzcz0nay1kaXNhYmxlZC1vdmVybGF5Jz48L2Rpdj5cIiksdGhpcy5fb25FbmFibGUodCl9LF9zZWxlY3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl92YWx1ZTtlPXRoaXMuY29sb3IoZSksdHx8KHRoaXMuZWxlbWVudC50cmlnZ2VyKFwiY2hhbmdlXCIpLGUuZXF1YWxzKG4pP3RoaXMuX3N0YW5kYWxvbmV8fHRoaXMudHJpZ2dlcihcImNhbmNlbFwiKTp0aGlzLnRyaWdnZXIoXCJjaGFuZ2VcIix7dmFsdWU6dGhpcy52YWx1ZSgpfSkpfSxfdHJpZ2dlclNlbGVjdDpmdW5jdGlvbihlKXtpKHRoaXMsXCJzZWxlY3RcIixlKX0sX3RyaWdnZXJDaGFuZ2U6ZnVuY3Rpb24oZSl7aSh0aGlzLFwiY2hhbmdlXCIsZSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQmJnRoaXMuZWxlbWVudC5vZmYoXyksdGhpcy53cmFwcGVyJiZ0aGlzLndyYXBwZXIub2ZmKF8pLmZpbmQoXCIqXCIpLm9mZihfKSx0aGlzLndyYXBwZXI9bnVsbCxjLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKX0sX3VwZGF0ZVVJOmUubm9vcCxfc2VsZWN0T25IaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LF9jYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIoXCJjYW5jZWxcIil9fSksQz14LmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpLHIsbyxsLGM9dGhpcztpZih4LmZuLmluaXQuY2FsbChjLHQsbiksdD1jLndyYXBwZXI9Yy5lbGVtZW50LG49Yy5vcHRpb25zLGk9bi5wYWxldHRlLFwid2Vic2FmZVwiPT1pPyhpPW0sbi5jb2x1bW5zPTE4KTpcImJhc2ljXCI9PWkmJihpPWcpLFwic3RyaW5nXCI9PXR5cGVvZiBpJiYoaT1pLnNwbGl0KFwiLFwiKSksZS5pc0FycmF5KGkpJiYoaT1lLm1hcChpLGZ1bmN0aW9uKGUpe3JldHVybiBkKGUpfSkpLGMuX3NlbGVjdGVkSUQ9KG4uYXJpYUlkfHxzLmd1aWQoKSkrXCJfc2VsZWN0ZWRcIix0LmFkZENsYXNzKFwiay13aWRnZXQgay1jb2xvcnBhbGV0dGVcIikuYXR0cihcInJvbGVcIixcImdyaWRcIikuYXR0cihcImFyaWEtcmVhZG9ubHlcIixcInRydWVcIikuYXBwZW5kKGUoYy5fdGVtcGxhdGUoe2NvbG9yczppLGNvbHVtbnM6bi5jb2x1bW5zLHRpbGVTaXplOm4udGlsZVNpemUsdmFsdWU6Yy5fdmFsdWUsaWQ6bi5hcmlhSWR9KSkpLm9uKHksXCIuay1pdGVtXCIsZnVuY3Rpb24odCl7Yy5fc2VsZWN0KGUodC5jdXJyZW50VGFyZ2V0KS5jc3MocCkpfSkuYXR0cihcInRhYkluZGV4XCIsYy5fdGFiSW5kZXgpLm9uKHcsYShjLl9rZXlkb3duLGMpKSxyPW4udGlsZVNpemUpe2lmKC9udW1iZXJ8c3RyaW5nLy50ZXN0KHR5cGVvZiByKSlvPWw9cGFyc2VGbG9hdChyKTtlbHNle2lmKFwib2JqZWN0XCIhPXR5cGVvZiByKXRocm93IEVycm9yKFwiVW5zdXBwb3J0ZWQgdmFsdWUgZm9yIHRoZSAndGlsZVNpemUnIGFyZ3VtZW50XCIpO289cGFyc2VGbG9hdChyLndpZHRoKSxsPXBhcnNlRmxvYXQoci5oZWlnaHQpfXQuZmluZChcIi5rLWl0ZW1cIikuY3NzKHt3aWR0aDpvLGhlaWdodDpsfSl9fSxmb2N1czpmdW5jdGlvbigpe3RoaXMud3JhcHBlci5mb2N1cygpfSxvcHRpb25zOntuYW1lOlwiQ29sb3JQYWxldHRlXCIsY29sdW1uczoxMCx0aWxlU2l6ZTpudWxsLHBhbGV0dGU6XCJiYXNpY1wifSxfb25FbmFibGU6ZnVuY3Rpb24oZSl7ZT90aGlzLndyYXBwZXIuYXR0cihcInRhYkluZGV4XCIsdGhpcy5fdGFiSW5kZXgpOnRoaXMud3JhcHBlci5yZW1vdmVBdHRyKFwidGFiSW5kZXhcIil9LF9rZXlkb3duOmZ1bmN0aW9uKHQpe3ZhciBuLGksYT10aGlzLndyYXBwZXIscz1hLmZpbmQoXCIuay1pdGVtXCIpLGw9cy5maWx0ZXIoXCIuXCIrZikuZ2V0KDApLGM9dC5rZXlDb2RlO2lmKGM9PWguTEVGVD9uPXIocyxsLC0xKTpjPT1oLlJJR0hUP249cihzLGwsMSk6Yz09aC5ET1dOP249cihzLGwsdGhpcy5vcHRpb25zLmNvbHVtbnMpOmM9PWguVVA/bj1yKHMsbCwtdGhpcy5vcHRpb25zLmNvbHVtbnMpOmM9PWguRU5URVI/KG8odCksbCYmdGhpcy5fc2VsZWN0KGUobCkuY3NzKHApKSk6Yz09aC5FU0MmJnRoaXMuX2NhbmNlbCgpLG4pe28odCksdGhpcy5fY3VycmVudChuKTt0cnl7aT1kKG4uY3NzKHApKSx0aGlzLl90cmlnZ2VyU2VsZWN0KGkpfWNhdGNoKHUpe319fSxfY3VycmVudDpmdW5jdGlvbih0KXt0aGlzLndyYXBwZXIuZmluZChcIi5cIitmKS5yZW1vdmVDbGFzcyhmKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCExKS5yZW1vdmVBdHRyKFwiaWRcIiksZSh0KS5hZGRDbGFzcyhmKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKS5hdHRyKFwiaWRcIix0aGlzLl9zZWxlY3RlZElEKSx0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKS5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsdGhpcy5fc2VsZWN0ZWRJRCl9LF91cGRhdGVVSTpmdW5jdGlvbih0KXt2YXIgaT1udWxsO3RoaXMud3JhcHBlci5maW5kKFwiLmstaXRlbVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHI9ZChlKHRoaXMpLmNzcyhwKSk7cmV0dXJuIHImJnIuZXF1YWxzKHQpPyhpPXRoaXMsITEpOm59KSx0aGlzLl9jdXJyZW50KGkpfSxfdGVtcGxhdGU6cy50ZW1wbGF0ZSgnPHRhYmxlIGNsYXNzPVwiay1wYWxldHRlIGstcmVzZXRcIiByb2xlPVwicHJlc2VudGF0aW9uXCI+PHRyIHJvbGU9XCJyb3dcIj4jIGZvciAodmFyIGkgPSAwOyBpIDwgY29sb3JzLmxlbmd0aDsgKytpKSB7ICMjIHZhciBzZWxlY3RlZCA9IGNvbG9yc1tpXS5lcXVhbHModmFsdWUpOyAjIyBpZiAoaSAmJiBpICUgY29sdW1ucyA9PSAwKSB7ICMgPC90cj48dHIgcm9sZT1cInJvd1wiPiAjIH0gIzx0ZCByb2xlPVwiZ3JpZGNlbGxcIiB1bnNlbGVjdGFibGU9XCJvblwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojPSBjb2xvcnNbaV0udG9Dc3MoKSAjXCIjPSBzZWxlY3RlZCA/IFwiIGFyaWEtc2VsZWN0ZWQ9dHJ1ZVwiIDogXCJcIiAjICM9KGlkICYmIGkgPT09IDApID8gXCJpZD1cXFxcXCJcIitpZCtcIlxcXFxcIiBcIiA6IFwiXCIgIyBjbGFzcz1cImstaXRlbSM9IHNlbGVjdGVkID8gXCIgJytmKydcIiA6IFwiXCIgI1wiIGFyaWEtbGFiZWw9XCIjPSBjb2xvcnNbaV0udG9Dc3MoKSAjXCI+PC90ZD4jIH0gIzwvdHI+PC90YWJsZT4nKX0pLFM9eC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzO3guZm4uaW5pdC5jYWxsKGksdCxuKSxuPWkub3B0aW9ucyx0PWkuZWxlbWVudCxpLndyYXBwZXI9dC5hZGRDbGFzcyhcImstd2lkZ2V0IGstZmxhdGNvbG9ycGlja2VyXCIpLmFwcGVuZChpLl90ZW1wbGF0ZShuKSksaS5faHVlRWxlbWVudHM9ZShcIi5rLWhzdi1yZWN0YW5nbGUsIC5rLXRyYW5zcGFyZW5jeS1zbGlkZXIgLmstc2xpZGVyLXRyYWNrXCIsdCksaS5fc2VsZWN0ZWRDb2xvcj1lKFwiLmstc2VsZWN0ZWQtY29sb3ItZGlzcGxheVwiLHQpLGkuX2NvbG9yQXNUZXh0PWUoXCJpbnB1dC5rLWNvbG9yLXZhbHVlXCIsdCksaS5fc2xpZGVycygpLGkuX2hzdkFyZWEoKSxpLl91cGRhdGVVSShpLl92YWx1ZXx8ZChcIiNmMDBcIikpLHQuZmluZChcImlucHV0LmstY29sb3ItdmFsdWVcIikub24odyxmdW5jdGlvbih0KXt2YXIgbixyLG89dGhpcztpZih0LmtleUNvZGU9PWguRU5URVIpdHJ5e249ZChvLnZhbHVlKSxyPWkuY29sb3IoKSxpLl9zZWxlY3QobixuLmVxdWFscyhyKSl9Y2F0Y2goYSl7ZShvKS5hZGRDbGFzcyhcImstc3RhdGUtZXJyb3JcIil9ZWxzZSBpLm9wdGlvbnMuYXV0b3VwZGF0ZSYmc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBlPWQoby52YWx1ZSwhMCk7ZSYmaS5fdXBkYXRlVUkoZSwhMCl9LDEwKX0pLmVuZCgpLm9uKHksXCIuay1jb250cm9scyBidXR0b24uYXBwbHlcIixmdW5jdGlvbigpe2kuX3NlbGVjdChpLl9nZXRIU1YoKSl9KS5vbih5LFwiLmstY29udHJvbHMgYnV0dG9uLmNhbmNlbFwiLGZ1bmN0aW9uKCl7aS5fdXBkYXRlVUkoaS5jb2xvcigpKSxpLl9jYW5jZWwoKX0pLGsmJmkuX2FwcGx5SUVGaWx0ZXIoKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX2h1ZVNsaWRlci5kZXN0cm95KCksdGhpcy5fb3BhY2l0eVNsaWRlciYmdGhpcy5fb3BhY2l0eVNsaWRlci5kZXN0cm95KCksdGhpcy5faHVlU2xpZGVyPXRoaXMuX29wYWNpdHlTbGlkZXI9dGhpcy5faHN2UmVjdD10aGlzLl9oc3ZIYW5kbGU9dGhpcy5faHVlRWxlbWVudHM9dGhpcy5fc2VsZWN0ZWRDb2xvcj10aGlzLl9jb2xvckFzVGV4dD1udWxsLHguZm4uZGVzdHJveS5jYWxsKHRoaXMpfSxvcHRpb25zOntuYW1lOlwiRmxhdENvbG9yUGlja2VyXCIsb3BhY2l0eTohMSxidXR0b25zOiExLGlucHV0OiEwLHByZXZpZXc6ITAsYXV0b3VwZGF0ZTohMCxtZXNzYWdlczp2fSxfYXBwbHlJRUZpbHRlcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudC5maW5kKFwiLmstaHVlLXNsaWRlciAuay1zbGlkZXItdHJhY2tcIilbMF0sdD1lLmN1cnJlbnRTdHlsZS5iYWNrZ3JvdW5kSW1hZ2U7dD10LnJlcGxhY2UoL151cmxcXChbXFwnXFxcIl0/fFtcXCdcXFwiXT9cXCkkL2csXCJcIiksZS5zdHlsZS5maWx0ZXI9XCJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGFJbWFnZUxvYWRlcihzcmM9J1wiK3QrXCInLCBzaXppbmdNZXRob2Q9J3NjYWxlJylcIn0sX3NsaWRlcnM6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe24uX3VwZGF0ZVVJKG4uX2dldEhTVihlLnZhbHVlLG51bGwsbnVsbCxudWxsKSl9ZnVuY3Rpb24gdChlKXtuLl91cGRhdGVVSShuLl9nZXRIU1YobnVsbCxudWxsLG51bGwsZS52YWx1ZS8xMDApKX12YXIgbj10aGlzLGk9bi5lbGVtZW50O24uX2h1ZVNsaWRlcj1pLmZpbmQoXCIuay1odWUtc2xpZGVyXCIpLmtlbmRvU2xpZGVyKHttaW46MCxtYXg6MzU5LHRpY2tQbGFjZW1lbnQ6XCJub25lXCIsc2hvd0J1dHRvbnM6ITEsc2xpZGU6ZSxjaGFuZ2U6ZX0pLmRhdGEoXCJrZW5kb1NsaWRlclwiKSxuLl9vcGFjaXR5U2xpZGVyPWkuZmluZChcIi5rLXRyYW5zcGFyZW5jeS1zbGlkZXJcIikua2VuZG9TbGlkZXIoe21pbjowLG1heDoxMDAsdGlja1BsYWNlbWVudDpcIm5vbmVcIixzaG93QnV0dG9uczohMSxzbGlkZTp0LGNoYW5nZTp0fSkuZGF0YShcImtlbmRvU2xpZGVyXCIpfSxfaHN2QXJlYTpmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSxuKXt2YXIgaT10aGlzLm9mZnNldCxyPWUtaS5sZWZ0LG89bi1pLnRvcCxhPXRoaXMud2lkdGgscz10aGlzLmhlaWdodDtyPTA+cj8wOnI+YT9hOnIsbz0wPm8/MDpvPnM/czpvLHQuX3N2Q2hhbmdlKHIvYSwxLW8vcyl9dmFyIHQ9dGhpcyxuPXQuZWxlbWVudCxpPW4uZmluZChcIi5rLWhzdi1yZWN0YW5nbGVcIikscj1pLmZpbmQoXCIuay1kcmFnaGFuZGxlXCIpLmF0dHIoXCJ0YWJJbmRleFwiLDApLm9uKHcsYSh0Ll9rZXlkb3duLHQpKTt0Ll9oc3ZFdmVudHM9bmV3IHMuVXNlckV2ZW50cyhpLHtnbG9iYWw6ITAscHJlc3M6ZnVuY3Rpb24odCl7dGhpcy5vZmZzZXQ9cy5nZXRPZmZzZXQoaSksdGhpcy53aWR0aD1pLndpZHRoKCksdGhpcy5oZWlnaHQ9aS5oZWlnaHQoKSxyLmZvY3VzKCksZS5jYWxsKHRoaXMsdC54LmxvY2F0aW9uLHQueS5sb2NhdGlvbil9LHN0YXJ0OmZ1bmN0aW9uKCl7aS5hZGRDbGFzcyhcImstZHJhZ2dpbmdcIiksci5mb2N1cygpfSxtb3ZlOmZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSxlLmNhbGwodGhpcyx0LngubG9jYXRpb24sdC55LmxvY2F0aW9uKX0sZW5kOmZ1bmN0aW9uKCl7aS5yZW1vdmVDbGFzcyhcImstZHJhZ2dpbmdcIil9fSksdC5faHN2UmVjdD1pLHQuX2hzdkhhbmRsZT1yfSxfb25FbmFibGU6ZnVuY3Rpb24oZSl7dGhpcy5faHVlU2xpZGVyLmVuYWJsZShlKSx0aGlzLl9vcGFjaXR5U2xpZGVyJiZ0aGlzLl9vcGFjaXR5U2xpZGVyLmVuYWJsZShlKSx0aGlzLndyYXBwZXIuZmluZChcImlucHV0XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCFlKTt2YXIgdD10aGlzLl9oc3ZSZWN0LmZpbmQoXCIuay1kcmFnaGFuZGxlXCIpO2U/dC5hdHRyKFwidGFiSW5kZXhcIix0aGlzLl90YWJJbmRleCk6dC5yZW1vdmVBdHRyKFwidGFiSW5kZXhcIil9LF9rZXlkb3duOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxuKXt2YXIgcj1pLl9nZXRIU1YoKTtyW3RdKz1uKihlLnNoaWZ0S2V5Py4wMTouMDUpLDA+clt0XSYmKHJbdF09MCksclt0XT4xJiYoclt0XT0xKSxpLl91cGRhdGVVSShyKSxvKGUpfWZ1bmN0aW9uIG4odCl7dmFyIG49aS5fZ2V0SFNWKCk7bi5oKz10KihlLnNoaWZ0S2V5PzE6NSksMD5uLmgmJihuLmg9MCksbi5oPjM1OSYmKG4uaD0zNTkpLGkuX3VwZGF0ZVVJKG4pLG8oZSl9dmFyIGk9dGhpcztzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIGguTEVGVDplLmN0cmxLZXk/bigtMSk6dChcInNcIiwtMSk7YnJlYWs7Y2FzZSBoLlJJR0hUOmUuY3RybEtleT9uKDEpOnQoXCJzXCIsMSk7YnJlYWs7Y2FzZSBoLlVQOnQoZS5jdHJsS2V5JiZpLl9vcGFjaXR5U2xpZGVyP1wiYVwiOlwidlwiLDEpO2JyZWFrO2Nhc2UgaC5ET1dOOnQoZS5jdHJsS2V5JiZpLl9vcGFjaXR5U2xpZGVyP1wiYVwiOlwidlwiLC0xKTticmVhaztjYXNlIGguRU5URVI6aS5fc2VsZWN0KGkuX2dldEhTVigpKTticmVhaztjYXNlIGguRjI6aS53cmFwcGVyLmZpbmQoXCJpbnB1dC5rLWNvbG9yLXZhbHVlXCIpLmZvY3VzKCkuc2VsZWN0KCk7YnJlYWs7Y2FzZSBoLkVTQzppLl9jYW5jZWwoKX19LGZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5faHN2SGFuZGxlLmZvY3VzKCl9LF9nZXRIU1Y6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9dGhpcy5faHN2UmVjdCxvPXIud2lkdGgoKSxhPXIuaGVpZ2h0KCkscz10aGlzLl9oc3ZIYW5kbGUucG9zaXRpb24oKTtyZXR1cm4gbnVsbD09ZSYmKGU9dGhpcy5faHVlU2xpZGVyLnZhbHVlKCkpLG51bGw9PXQmJih0PXMubGVmdC9vKSxudWxsPT1uJiYobj0xLXMudG9wL2EpLG51bGw9PWkmJihpPXRoaXMuX29wYWNpdHlTbGlkZXI/dGhpcy5fb3BhY2l0eVNsaWRlci52YWx1ZSgpLzEwMDoxKSx1LmZyb21IU1YoZSx0LG4saSl9LF9zdkNoYW5nZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX2dldEhTVihudWxsLGUsdCxudWxsKTt0aGlzLl91cGRhdGVVSShuKX0sX3VwZGF0ZVVJOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPW4uX2hzdlJlY3Q7ZSYmKHRoaXMuX2NvbG9yQXNUZXh0LnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1lcnJvclwiKSxuLl9zZWxlY3RlZENvbG9yLmNzcyhwLGUudG9EaXNwbGF5KCkpLHR8fG4uX2NvbG9yQXNUZXh0LnZhbChuLl9vcGFjaXR5U2xpZGVyP2UudG9Dc3NSZ2JhKCk6ZS50b0NzcygpKSxuLl90cmlnZ2VyU2VsZWN0KGUpLGU9ZS50b0hTVigpLG4uX2hzdkhhbmRsZS5jc3Moe2xlZnQ6ZS5zKmkud2lkdGgoKStcInB4XCIsdG9wOigxLWUudikqaS5oZWlnaHQoKStcInB4XCJ9KSxuLl9odWVFbGVtZW50cy5jc3MocCx1LmZyb21IU1YoZS5oLDEsMSwxKS50b0NzcygpKSxuLl9odWVTbGlkZXIudmFsdWUoZS5oKSxuLl9vcGFjaXR5U2xpZGVyJiZuLl9vcGFjaXR5U2xpZGVyLnZhbHVlKDEwMCplLmEpKX0sX3NlbGVjdE9uSGlkZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMuYnV0dG9ucz9udWxsOnRoaXMuX2dldEhTVigpfSxfdGVtcGxhdGU6cy50ZW1wbGF0ZSgnIyBpZiAocHJldmlldykgeyAjPGRpdiBjbGFzcz1cImstc2VsZWN0ZWQtY29sb3JcIj48ZGl2IGNsYXNzPVwiay1zZWxlY3RlZC1jb2xvci1kaXNwbGF5XCI+PGlucHV0IGNsYXNzPVwiay1jb2xvci12YWx1ZVwiICM9ICFkYXRhLmlucHV0ID8gXFwnc3R5bGU9XCJ2aXNpYmlsaXR5OiBoaWRkZW47XCJcXCcgOiBcIlwiICM+PC9kaXY+PC9kaXY+IyB9ICM8ZGl2IGNsYXNzPVwiay1oc3YtcmVjdGFuZ2xlXCI+PGRpdiBjbGFzcz1cImstaHN2LWdyYWRpZW50XCI+PC9kaXY+PGRpdiBjbGFzcz1cImstZHJhZ2hhbmRsZVwiPjwvZGl2PjwvZGl2PjxpbnB1dCBjbGFzcz1cImstaHVlLXNsaWRlclwiIC8+IyBpZiAob3BhY2l0eSkgeyAjPGlucHV0IGNsYXNzPVwiay10cmFuc3BhcmVuY3ktc2xpZGVyXCIgLz4jIH0gIyMgaWYgKGJ1dHRvbnMpIHsgIzxkaXYgdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstY29udHJvbHNcIj48YnV0dG9uIGNsYXNzPVwiay1idXR0b24gay1wcmltYXJ5IGFwcGx5XCI+IzogbWVzc2FnZXMuYXBwbHkgIzwvYnV0dG9uPiA8YnV0dG9uIGNsYXNzPVwiay1idXR0b24gY2FuY2VsXCI+IzogbWVzc2FnZXMuY2FuY2VsICM8L2J1dHRvbj48L2Rpdj4jIH0gIycpfSksVD1jLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpLHIsbyxhLHMsbD10aGlzO2MuZm4uaW5pdC5jYWxsKGwsdCxuKSxuPWwub3B0aW9ucyx0PWwuZWxlbWVudCxpPXQuYXR0cihcInZhbHVlXCIpfHx0LnZhbCgpLGk9aT9kKGksITApOmQobi52YWx1ZSwhMCksbC5fdmFsdWU9bi52YWx1ZT1pLHI9bC53cmFwcGVyPWUobC5fdGVtcGxhdGUobikpLHQuaGlkZSgpLmFmdGVyKHIpLHQuaXMoXCJpbnB1dFwiKSYmKHQuYXBwZW5kVG8ociksbz10LmNsb3Nlc3QoXCJsYWJlbFwiKSxhPXQuYXR0cihcImlkXCIpLGEmJihvPW8uYWRkKCdsYWJlbFtmb3I9XCInK2ErJ1wiXScpKSxvLmNsaWNrKGZ1bmN0aW9uKGUpe2wub3BlbigpLGUucHJldmVudERlZmF1bHQoKX0pKSxsLl90YWJJbmRleD10LmF0dHIoXCJ0YWJJbmRleFwiKXx8MCxsLmVuYWJsZSghdC5hdHRyKFwiZGlzYWJsZWRcIikpLHM9dC5hdHRyKFwiYWNjZXNza2V5XCIpLHMmJih0LmF0dHIoXCJhY2Nlc3NrZXlcIixudWxsKSxyLmF0dHIoXCJhY2Nlc3NrZXlcIixzKSksbC5iaW5kKFwiYWN0aXZhdGVcIixmdW5jdGlvbihlKXtlLmlzRGVmYXVsdFByZXZlbnRlZCgpfHxsLnRvZ2dsZSgpfSksbC5fdXBkYXRlVUkoaSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLndyYXBwZXIub2ZmKF8pLmZpbmQoXCIqXCIpLm9mZihfKSx0aGlzLl9wb3B1cCYmKHRoaXMuX3NlbGVjdG9yLmRlc3Ryb3koKSx0aGlzLl9wb3B1cC5kZXN0cm95KCkpLHRoaXMuX3NlbGVjdG9yPXRoaXMuX3BvcHVwPXRoaXMud3JhcHBlcj1udWxsLGMuZm4uZGVzdHJveS5jYWxsKHRoaXMpfSxlbmFibGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQud3JhcHBlcixpPW4uY2hpbGRyZW4oXCIuay1waWNrZXItd3JhcFwiKSxyPWkuZmluZChcIi5rLXNlbGVjdFwiKTswPT09YXJndW1lbnRzLmxlbmd0aCYmKGU9ITApLHQuZWxlbWVudC5hdHRyKFwiZGlzYWJsZWRcIiwhZSksbi5hdHRyKFwiYXJpYS1kaXNhYmxlZFwiLCFlKSxyLm9mZihfKS5vbihcIm1vdXNlZG93blwiK18sbyksbi5hZGRDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIikucmVtb3ZlQXR0cihcInRhYkluZGV4XCIpLmFkZChcIipcIixuKS5vZmYoXyksZSYmbi5yZW1vdmVDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIikuYXR0cihcInRhYkluZGV4XCIsdC5fdGFiSW5kZXgpLm9uKFwibW91c2VlbnRlclwiK18sZnVuY3Rpb24oKXtpLmFkZENsYXNzKFwiay1zdGF0ZS1ob3ZlclwiKX0pLm9uKFwibW91c2VsZWF2ZVwiK18sZnVuY3Rpb24oKXtpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1ob3ZlclwiKX0pLm9uKFwiZm9jdXNcIitfLGZ1bmN0aW9uKCl7aS5hZGRDbGFzcyhcImstc3RhdGUtZm9jdXNlZFwiKX0pLm9uKFwiYmx1clwiK18sZnVuY3Rpb24oKXtpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1mb2N1c2VkXCIpfSkub24odyxhKHQuX2tleWRvd24sdCkpLm9uKHksXCIuay1pY29uXCIsYSh0LnRvZ2dsZSx0KSkub24oeSx0Lm9wdGlvbnMudG9vbEljb24/XCIuay10b29sLWljb25cIjpcIi5rLXNlbGVjdGVkLWNvbG9yXCIsZnVuY3Rpb24oKXt0LnRyaWdnZXIoXCJhY3RpdmF0ZVwiKX0pfSxfdGVtcGxhdGU6cy50ZW1wbGF0ZSgnPHNwYW4gcm9sZT1cInRleHRib3hcIiBhcmlhLWhhc3BvcHVwPVwidHJ1ZVwiIGNsYXNzPVwiay13aWRnZXQgay1jb2xvcnBpY2tlciBrLWhlYWRlclwiPjxzcGFuIGNsYXNzPVwiay1waWNrZXItd3JhcCBrLXN0YXRlLWRlZmF1bHRcIj4jIGlmICh0b29sSWNvbikgeyAjPHNwYW4gY2xhc3M9XCJrLXRvb2wtaWNvbiAjPSB0b29sSWNvbiAjXCI+PHNwYW4gY2xhc3M9XCJrLXNlbGVjdGVkLWNvbG9yXCI+PC9zcGFuPjwvc3Bhbj4jIH0gZWxzZSB7ICM8c3BhbiBjbGFzcz1cImstc2VsZWN0ZWQtY29sb3JcIj48L3NwYW4+IyB9ICM8c3BhbiBjbGFzcz1cImstc2VsZWN0XCIgdW5zZWxlY3RhYmxlPVwib25cIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctc1wiIHVuc2VsZWN0YWJsZT1cIm9uXCI+PC9zcGFuPjwvc3Bhbj48L3NwYW4+PC9zcGFuPicpLG9wdGlvbnM6e25hbWU6XCJDb2xvclBpY2tlclwiLHBhbGV0dGU6bnVsbCxjb2x1bW5zOjEwLHRvb2xJY29uOm51bGwsdmFsdWU6bnVsbCxtZXNzYWdlczp2LG9wYWNpdHk6ITEsYnV0dG9uczohMCxwcmV2aWV3OiEwLEFSSUFUZW1wbGF0ZTonQ3VycmVudCBzZWxlY3RlZCBjb2xvciBpcyAjPWRhdGEgfHwgXCJcIiMnfSxldmVudHM6W1wiYWN0aXZhdGVcIixcImNoYW5nZVwiLFwic2VsZWN0XCIsXCJvcGVuXCIsXCJjbG9zZVwiXSxvcGVuOmZ1bmN0aW9uKCl7dGhpcy5fZ2V0UG9wdXAoKS5vcGVuKCl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5fZ2V0UG9wdXAoKS5jbG9zZSgpfSx0b2dnbGU6ZnVuY3Rpb24oKXt0aGlzLl9nZXRQb3B1cCgpLnRvZ2dsZSgpfSxjb2xvcjp4LmZuLmNvbG9yLHZhbHVlOnguZm4udmFsdWUsX3NlbGVjdDp4LmZuLl9zZWxlY3QsX3RyaWdnZXJTZWxlY3Q6eC5mbi5fdHJpZ2dlclNlbGVjdCxfaXNJbnB1dFR5cGVDb2xvcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudFswXTtyZXR1cm4vXmlucHV0JC9pLnRlc3QoZS50YWdOYW1lKSYmL15jb2xvciQvaS50ZXN0KGUudHlwZSl9LF91cGRhdGVVSTpmdW5jdGlvbihlKXt2YXIgdD1cIlwiO2UmJih0PXRoaXMuX2lzSW5wdXRUeXBlQ29sb3IoKXx8MT09ZS5hP2UudG9Dc3MoKTplLnRvQ3NzUmdiYSgpLHRoaXMuZWxlbWVudC52YWwodCkpLHRoaXMuX2FyaWFUZW1wbGF0ZXx8KHRoaXMuX2FyaWFUZW1wbGF0ZT1zLnRlbXBsYXRlKHRoaXMub3B0aW9ucy5BUklBVGVtcGxhdGUpKSx0aGlzLndyYXBwZXIuYXR0cihcImFyaWEtbGFiZWxcIix0aGlzLl9hcmlhVGVtcGxhdGUodCkpLHRoaXMuX3RyaWdnZXJTZWxlY3QoZSksdGhpcy53cmFwcGVyLmZpbmQoXCIuay1zZWxlY3RlZC1jb2xvclwiKS5jc3MocCxlP2UudG9EaXNwbGF5KCk6XCJ0cmFuc3BhcmVudFwiKX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5rZXlDb2RlO3RoaXMuX2dldFBvcHVwKCkudmlzaWJsZSgpPyh0PT1oLkVTQz90aGlzLl9zZWxlY3Rvci5fY2FuY2VsKCk6dGhpcy5fc2VsZWN0b3IuX2tleWRvd24oZSksbyhlKSk6KHQ9PWguRU5URVJ8fHQ9PWguRE9XTikmJih0aGlzLm9wZW4oKSxvKGUpKX0sX2dldFBvcHVwOmZ1bmN0aW9uKCl7dmFyIHQsaSxyLG8sYT10aGlzLGw9YS5fcG9wdXA7cmV0dXJuIGx8fCh0PWEub3B0aW9ucyxpPXQucGFsZXR0ZT9DOlMsdC5fc3RhbmRhbG9uZT0hMSxkZWxldGUgdC5zZWxlY3QsZGVsZXRlIHQuY2hhbmdlLGRlbGV0ZSB0LmNhbmNlbCxyPXMuZ3VpZCgpLG89YS5fc2VsZWN0b3I9bmV3IGkoZSgnPGRpdiBpZD1cIicrcisnXCIvPicpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpLHQpLGEud3JhcHBlci5hdHRyKFwiYXJpYS1vd25zXCIsciksYS5fcG9wdXA9bD1vLndyYXBwZXIua2VuZG9Qb3B1cCh7YW5jaG9yOmEud3JhcHBlcn0pLmRhdGEoXCJrZW5kb1BvcHVwXCIpLG8uYmluZCh7c2VsZWN0OmZ1bmN0aW9uKGUpe2EuX3VwZGF0ZVVJKGQoZS52YWx1ZSkpfSxjaGFuZ2U6ZnVuY3Rpb24oKXthLl9zZWxlY3Qoby5jb2xvcigpKSxhLmNsb3NlKCl9LGNhbmNlbDpmdW5jdGlvbigpe2EuY2xvc2UoKX19KSxsLmJpbmQoe2Nsb3NlOmZ1bmN0aW9uKGUpe2lmKGEudHJpZ2dlcihcImNsb3NlXCIpKXJldHVybiBlLnByZXZlbnREZWZhdWx0KCksbjthLndyYXBwZXIuY2hpbGRyZW4oXCIuay1waWNrZXItd3JhcFwiKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtZm9jdXNlZFwiKTt2YXIgdD1vLl9zZWxlY3RPbkhpZGUoKTt0P2EuX3NlbGVjdCh0KTooYS53cmFwcGVyLmZvY3VzKCksYS5fdXBkYXRlVUkoYS5jb2xvcigpKSl9LG9wZW46ZnVuY3Rpb24oZSl7YS50cmlnZ2VyKFwib3BlblwiKT9lLnByZXZlbnREZWZhdWx0KCk6YS53cmFwcGVyLmNoaWxkcmVuKFwiLmstcGlja2VyLXdyYXBcIikuYWRkQ2xhc3MoXCJrLXN0YXRlLWZvY3VzZWRcIil9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7by5fc2VsZWN0KGEuY29sb3IoKSwhMCksby5mb2N1cygpLGEud3JhcHBlci5jaGlsZHJlbihcIi5rLXBpY2tlci13cmFwXCIpLmFkZENsYXNzKFwiay1zdGF0ZS1mb2N1c2VkXCIpfX0pKSxsfX0pO2wucGx1Z2luKEMpLGwucGx1Z2luKFMpLGwucGx1Z2luKFQpfShqUXVlcnkscGFyc2VJbnQpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQpe3JldHVybic8c3BhbiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctJytlKydcIiB0aXRsZT1cIicrdCsnXCI+Jyt0K1wiPC9zcGFuPjwvc3Bhbj5cIn12YXIgaT13aW5kb3cua2VuZG8scj1pLmNhcmV0LG89aS5rZXlzLGE9aS51aSxzPWEuV2lkZ2V0LGw9aS5fYWN0aXZlRWxlbWVudCxjPWkuX2V4dHJhY3RGb3JtYXQsZD1pLnBhcnNlRmxvYXQsdT1pLnN1cHBvcnQucGxhY2Vob2xkZXIsaD1pLmdldEN1bHR1cmUscD1pLl9yb3VuZCxmPVwiY2hhbmdlXCIsZz1cImRpc2FibGVkXCIsbT1cInJlYWRvbmx5XCIsdj1cImstaW5wdXRcIixfPVwic3BpblwiLHk9XCIua2VuZG9OdW1lcmljVGV4dEJveFwiLHc9XCJ0b3VjaGVuZFwiLGI9XCJtb3VzZWxlYXZlXCIreSxrPVwibW91c2VlbnRlclwiK3krXCIgXCIrYix4PVwiay1zdGF0ZS1kZWZhdWx0XCIsQz1cImstc3RhdGUtZm9jdXNlZFwiLFM9XCJrLXN0YXRlLWhvdmVyXCIsVD1cImZvY3VzXCIsRD1cIi5cIixBPVwiay1zdGF0ZS1zZWxlY3RlZFwiLEU9XCJrLXN0YXRlLWRpc2FibGVkXCIsTT1cImFyaWEtZGlzYWJsZWRcIixQPVwiYXJpYS1yZWFkb25seVwiLEk9L14oLSk/KFxcZCopJC8sej1udWxsLEY9ZS5wcm94eSxSPXMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsbil7dmFyIHIsbyxhLGwsZCx1PXRoaXMsaD1uJiZuLnN0ZXAhPT10O3MuZm4uaW5pdC5jYWxsKHUsZSxuKSxuPXUub3B0aW9ucyxlPXUuZWxlbWVudC5vbihcImZvY3Vzb3V0XCIreSxGKHUuX2ZvY3Vzb3V0LHUpKS5hdHRyKFwicm9sZVwiLFwic3BpbmJ1dHRvblwiKSxuLnBsYWNlaG9sZGVyPW4ucGxhY2Vob2xkZXJ8fGUuYXR0cihcInBsYWNlaG9sZGVyXCIpLHUuX3Jlc2V0KCksdS5fd3JhcHBlcigpLHUuX2Fycm93cygpLHUuX2lucHV0KCksaS5zdXBwb3J0Lm1vYmlsZU9TP3UuX3RleHQub24odyt5K1wiIFwiK1QreSxmdW5jdGlvbih0KXt1Ll90b2dnbGVUZXh0KCExKSx0LnR5cGU9PT1UJiZlLmZvY3VzKCl9KTp1Ll90ZXh0Lm9uKFQreSxGKHUuX2NsaWNrLHUpKSxyPXUubWluKGUuYXR0cihcIm1pblwiKSksbz11Lm1heChlLmF0dHIoXCJtYXhcIikpLGE9dS5fcGFyc2UoZS5hdHRyKFwic3RlcFwiKSksbi5taW49PT16JiZyIT09eiYmKG4ubWluPXIpLG4ubWF4PT09eiYmbyE9PXomJihuLm1heD1vKSxofHxhPT09enx8KG4uc3RlcD1hKSxlLmF0dHIoXCJhcmlhLXZhbHVlbWluXCIsbi5taW4pLmF0dHIoXCJhcmlhLXZhbHVlbWF4XCIsbi5tYXgpLG4uZm9ybWF0PWMobi5mb3JtYXQpLGw9bi52YWx1ZSx1LnZhbHVlKGwhPT16P2w6ZS52YWwoKSksZD1lLmlzKFwiW2Rpc2FibGVkXVwiKSxkP3UuZW5hYmxlKCExKTp1LnJlYWRvbmx5KGUuaXMoXCJbcmVhZG9ubHldXCIpKSxpLm5vdGlmeSh1KX0sb3B0aW9uczp7bmFtZTpcIk51bWVyaWNUZXh0Qm94XCIsZGVjaW1hbHM6eixtaW46eixtYXg6eix2YWx1ZTp6LHN0ZXA6MSxjdWx0dXJlOlwiXCIsZm9ybWF0OlwiblwiLHNwaW5uZXJzOiEwLHBsYWNlaG9sZGVyOlwiXCIsdXBBcnJvd1RleHQ6XCJJbmNyZWFzZSB2YWx1ZVwiLGRvd25BcnJvd1RleHQ6XCJEZWNyZWFzZSB2YWx1ZVwifSxldmVudHM6W2YsX10sX2VkaXRhYmxlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LmVsZW1lbnQsaT1lLmRpc2FibGUscj1lLnJlYWRvbmx5LG89dC5fdGV4dC5hZGQobiksYT10Ll9pbnB1dFdyYXBwZXIub2ZmKGspO3QuX3RvZ2dsZVRleHQoITApLHQuX3VwQXJyb3dFdmVudEhhbmRsZXIudW5iaW5kKFwicHJlc3NcIiksdC5fZG93bkFycm93RXZlbnRIYW5kbGVyLnVuYmluZChcInByZXNzXCIpLG4ub2ZmKFwia2V5ZG93blwiK3kpLm9mZihcImtleXByZXNzXCIreSkub2ZmKFwicGFzdGVcIit5KSxyfHxpPyhhLmFkZENsYXNzKGk/RTp4KS5yZW1vdmVDbGFzcyhpP3g6RSksby5hdHRyKGcsaSkuYXR0cihtLHIpLmF0dHIoTSxpKS5hdHRyKFAscikpOihhLmFkZENsYXNzKHgpLnJlbW92ZUNsYXNzKEUpLm9uKGssdC5fdG9nZ2xlSG92ZXIpLG8ucmVtb3ZlQXR0cihnKS5yZW1vdmVBdHRyKG0pLmF0dHIoTSwhMSkuYXR0cihQLCExKSx0Ll91cEFycm93RXZlbnRIYW5kbGVyLmJpbmQoXCJwcmVzc1wiLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0Ll9zcGluKDEpLHQuX3VwQXJyb3cuYWRkQ2xhc3MoQSl9KSx0Ll9kb3duQXJyb3dFdmVudEhhbmRsZXIuYmluZChcInByZXNzXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHQuX3NwaW4oLTEpLHQuX2Rvd25BcnJvdy5hZGRDbGFzcyhBKX0pLHQuZWxlbWVudC5vbihcImtleWRvd25cIit5LEYodC5fa2V5ZG93bix0KSkub24oXCJrZXlwcmVzc1wiK3ksRih0Ll9rZXlwcmVzcyx0KSkub24oXCJwYXN0ZVwiK3ksRih0Ll9wYXN0ZSx0KSkpfSxyZWFkb25seTpmdW5jdGlvbihlKXt0aGlzLl9lZGl0YWJsZSh7cmVhZG9ubHk6ZT09PXQ/ITA6ZSxkaXNhYmxlOiExfSl9LGVuYWJsZTpmdW5jdGlvbihlKXt0aGlzLl9lZGl0YWJsZSh7cmVhZG9ubHk6ITEsZGlzYWJsZTohKGU9ZT09PXQ/ITA6ZSl9KX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5lbGVtZW50LmFkZChlLl90ZXh0KS5hZGQoZS5fdXBBcnJvdykuYWRkKGUuX2Rvd25BcnJvdykuYWRkKGUuX2lucHV0V3JhcHBlcikub2ZmKHkpLGUuX3VwQXJyb3dFdmVudEhhbmRsZXIuZGVzdHJveSgpLGUuX2Rvd25BcnJvd0V2ZW50SGFuZGxlci5kZXN0cm95KCksZS5fZm9ybSYmZS5fZm9ybS5vZmYoXCJyZXNldFwiLGUuX3Jlc2V0SGFuZGxlcikscy5mbi5kZXN0cm95LmNhbGwoZSl9LG1pbjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb3B0aW9uKFwibWluXCIsZSl9LG1heDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb3B0aW9uKFwibWF4XCIsZSl9LHN0ZXA6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29wdGlvbihcInN0ZXBcIixlKX0sdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzO3JldHVybiBlPT09dD9pLl92YWx1ZTooZT1pLl9wYXJzZShlKSxuPWkuX2FkanVzdChlKSxlPT09biYmKGkuX3VwZGF0ZShlKSxpLl9vbGQ9aS5fdmFsdWUpLHQpfSxmb2N1czpmdW5jdGlvbigpe3RoaXMuX2ZvY3VzaW4oKX0sX2FkanVzdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLGk9bi5taW4scj1uLm1heDtyZXR1cm4gZT09PXo/ZTooaSE9PXomJmk+ZT9lPWk6ciE9PXomJmU+ciYmKGU9ciksZSl9LF9hcnJvd3M6ZnVuY3Rpb24oKXt2YXIgdCxyPXRoaXMsbz1mdW5jdGlvbigpe2NsZWFyVGltZW91dChyLl9zcGlubmluZyksdC5yZW1vdmVDbGFzcyhBKX0sYT1yLm9wdGlvbnMscz1hLnNwaW5uZXJzLGw9ci5lbGVtZW50O3Q9bC5zaWJsaW5ncyhcIi5rLWljb25cIiksdFswXXx8KHQ9ZShuKFwiblwiLGEudXBBcnJvd1RleHQpK24oXCJzXCIsYS5kb3duQXJyb3dUZXh0KSkuaW5zZXJ0QWZ0ZXIobCksdC53cmFwQWxsKCc8c3BhbiBjbGFzcz1cImstc2VsZWN0XCIvPicpKSxzfHwodC5wYXJlbnQoKS50b2dnbGUocyksci5faW5wdXRXcmFwcGVyLmFkZENsYXNzKFwiay1leHBhbmQtcGFkZGluZ1wiKSksci5fdXBBcnJvdz10LmVxKDApLHIuX3VwQXJyb3dFdmVudEhhbmRsZXI9bmV3IGkuVXNlckV2ZW50cyhyLl91cEFycm93LHtyZWxlYXNlOm99KSxyLl9kb3duQXJyb3c9dC5lcSgxKSxyLl9kb3duQXJyb3dFdmVudEhhbmRsZXI9bmV3IGkuVXNlckV2ZW50cyhyLl9kb3duQXJyb3cse3JlbGVhc2U6b30pfSxfYmx1cjpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fdG9nZ2xlVGV4dCghMCksZS5fY2hhbmdlKGUuZWxlbWVudC52YWwoKSl9LF9jbGljazpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2NsZWFyVGltZW91dCh0Ll9mb2N1c2luZyksdC5fZm9jdXNpbmc9c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBuLGksbyxhPWUudGFyZ2V0LHM9cihhKVswXSxsPWEudmFsdWUuc3Vic3RyaW5nKDAscyksYz10Ll9mb3JtYXQodC5vcHRpb25zLmZvcm1hdCksZD1jW1wiLFwiXSx1PTA7ZCYmKGk9UmVnRXhwKFwiXFxcXFwiK2QsXCJnXCIpLG89UmVnRXhwKFwiKFtcXFxcZFxcXFxcIitkK1wiXSspKFxcXFxcIitjW0RdK1wiKT8oXFxcXGQrKT9cIikpLG8mJihuPW8uZXhlYyhsKSksbiYmKHU9blswXS5yZXBsYWNlKGksXCJcIikubGVuZ3RoLC0xIT1sLmluZGV4T2YoXCIoXCIpJiYwPnQuX3ZhbHVlJiZ1KyspLHQuX2ZvY3VzaW4oKSxyKHQuZWxlbWVudFswXSx1KX0pfSxfY2hhbmdlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fdXBkYXRlKGUpLGU9dC5fdmFsdWUsdC5fb2xkIT1lJiYodC5fb2xkPWUsdC5lbGVtZW50LnRyaWdnZXIoZiksdC50cmlnZ2VyKGYpKX0sX2N1bHR1cmU6ZnVuY3Rpb24oZSl7cmV0dXJuIGV8fGgodGhpcy5vcHRpb25zLmN1bHR1cmUpfSxfZm9jdXNpbjpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5faW5wdXRXcmFwcGVyLmFkZENsYXNzKEMpLGUuX3RvZ2dsZVRleHQoITEpLGUuZWxlbWVudFswXS5mb2N1cygpfSxfZm9jdXNvdXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2NsZWFyVGltZW91dChlLl9mb2N1c2luZyksZS5faW5wdXRXcmFwcGVyLnJlbW92ZUNsYXNzKEMpLnJlbW92ZUNsYXNzKFMpLGUuX2JsdXIoKX0sX2Zvcm1hdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX2N1bHR1cmUodCkubnVtYmVyRm9ybWF0O3JldHVybiBlPWUudG9Mb3dlckNhc2UoKSxlLmluZGV4T2YoXCJjXCIpPi0xP249bi5jdXJyZW5jeTplLmluZGV4T2YoXCJwXCIpPi0xJiYobj1uLnBlcmNlbnQpLG59LF9pbnB1dDpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPVwiay1mb3JtYXR0ZWQtdmFsdWVcIixyPW4uZWxlbWVudC5hZGRDbGFzcyh2KS5zaG93KClbMF0sbz1yLmFjY2Vzc0tleSxhPW4ud3JhcHBlcjt0PWEuZmluZChEK2kpLHRbMF18fCh0PWUoJzxpbnB1dCB0eXBlPVwidGV4dFwiLz4nKS5pbnNlcnRCZWZvcmUocikuYWRkQ2xhc3MoaSkpO3RyeXtyLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInRleHRcIil9Y2F0Y2gocyl7ci50eXBlPVwidGV4dFwifXRbMF0udGFiSW5kZXg9ci50YWJJbmRleCx0WzBdLnN0eWxlLmNzc1RleHQ9ci5zdHlsZS5jc3NUZXh0LHQucHJvcChcInBsYWNlaG9sZGVyXCIsbi5vcHRpb25zLnBsYWNlaG9sZGVyKSxvJiYodC5hdHRyKFwiYWNjZXNza2V5XCIsbyksci5hY2Nlc3NLZXk9XCJcIiksbi5fdGV4dD10LmFkZENsYXNzKHIuY2xhc3NOYW1lKX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUua2V5Q29kZTt0Ll9rZXk9bixuPT1vLkRPV04/dC5fc3RlcCgtMSk6bj09by5VUD90Ll9zdGVwKDEpOm49PW8uRU5URVImJnQuX2NoYW5nZSh0LmVsZW1lbnQudmFsKCkpfSxfa2V5cHJlc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLGEscyxsLGMsZCx1LGgscDswPT09ZS53aGljaHx8ZS5jdHJsS2V5fHxlLmtleUNvZGU9PT1vLkJBQ0tTUEFDRXx8ZS5rZXlDb2RlPT09by5FTlRFUnx8KHQ9dGhpcyxuPXQub3B0aW9ucy5taW4saT10LmVsZW1lbnQsYT1yKGkpLHM9YVswXSxsPWFbMV0sYz1TdHJpbmcuZnJvbUNoYXJDb2RlKGUud2hpY2gpLGQ9dC5fZm9ybWF0KHQub3B0aW9ucy5mb3JtYXQpLHU9dC5fa2V5PT09by5OVU1QQURfRE9ULGg9aS52YWwoKSx1JiYoYz1kW0RdKSxoPWguc3Vic3RyaW5nKDAscykrYytoLnN1YnN0cmluZyhsKSxwPXQuX251bWVyaWNSZWdleChkKS50ZXN0KGgpLHAmJnU/KGkudmFsKGgpLHIoaSxzK2MubGVuZ3RoKSxlLnByZXZlbnREZWZhdWx0KCkpOihudWxsIT09biYmbj49MCYmXCItXCI9PT1oLmNoYXJBdCgwKXx8IXApJiZlLnByZXZlbnREZWZhdWx0KCksdC5fa2V5PTApfSxfbnVtZXJpY1JlZ2V4OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lW0RdLGk9dC5vcHRpb25zLmRlY2ltYWxzO3JldHVybiBuPT09RCYmKG49XCJcXFxcXCIrbiksaT09PXomJihpPWUuZGVjaW1hbHMpLDA9PT1pP0k6KHQuX3NlcGFyYXRvciE9PW4mJih0Ll9zZXBhcmF0b3I9bix0Ll9mbG9hdFJlZ0V4cD1SZWdFeHAoXCJeKC0pPygoKFxcXFxkKyhcIituK1wiXFxcXGQqKT8pfChcIituK1wiXFxcXGQqKSkpPyRcIikpLHQuX2Zsb2F0UmVnRXhwKX0sX3Bhc3RlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLnRhcmdldCxpPW4udmFsdWU7c2V0VGltZW91dChmdW5jdGlvbigpe3QuX3BhcnNlKG4udmFsdWUpPT09eiYmdC5fdXBkYXRlKGkpfSl9LF9vcHRpb246ZnVuY3Rpb24oZSxuKXt2YXIgaT10aGlzLHI9aS5vcHRpb25zO3JldHVybiBuPT09dD9yW2VdOihuPWkuX3BhcnNlKG4pLChufHxcInN0ZXBcIiE9PWUpJiYocltlXT1uLGkuZWxlbWVudC5hdHRyKFwiYXJpYS12YWx1ZVwiK2UsbikuYXR0cihlLG4pKSx0KX0sX3NwaW46ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3Q9dHx8NTAwLGNsZWFyVGltZW91dChuLl9zcGlubmluZyksbi5fc3Bpbm5pbmc9c2V0VGltZW91dChmdW5jdGlvbigpe24uX3NwaW4oZSw1MCl9LHQpLG4uX3N0ZXAoZSl9LF9zdGVwOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LmVsZW1lbnQsaT10Ll9wYXJzZShuLnZhbCgpKXx8MDtsKCkhPW5bMF0mJnQuX2ZvY3VzaW4oKSxpKz10Lm9wdGlvbnMuc3RlcCplLHQuX3VwZGF0ZSh0Ll9hZGp1c3QoaSkpLHQudHJpZ2dlcihfKX0sX3RvZ2dsZUhvdmVyOmZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS50b2dnbGVDbGFzcyhTLFwibW91c2VlbnRlclwiPT09dC50eXBlKX0sX3RvZ2dsZVRleHQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll90ZXh0LnRvZ2dsZShlKSx0LmVsZW1lbnQudG9nZ2xlKCFlKX0sX3BhcnNlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGQoZSx0aGlzLl9jdWx0dXJlKHQpLHRoaXMub3B0aW9ucy5mb3JtYXQpfSxfdXBkYXRlOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxyPW4ub3B0aW9ucyxvPXIuZm9ybWF0LGE9ci5kZWNpbWFscyxzPW4uX2N1bHR1cmUoKSxsPW4uX2Zvcm1hdChvLHMpO2E9PT16JiYoYT1sLmRlY2ltYWxzKSxlPW4uX3BhcnNlKGUscyksdD1lIT09eix0JiYoZT1wYXJzZUZsb2F0KHAoZSxhKSkpLG4uX3ZhbHVlPWU9bi5fYWRqdXN0KGUpLG4uX3BsYWNlaG9sZGVyKGkudG9TdHJpbmcoZSxvLHMpKSx0PyhlPVwiXCIrZSwtMSE9PWUuaW5kZXhPZihcImVcIikmJihlPXAoK2UsYSkpLGU9ZS5yZXBsYWNlKEQsbFtEXSkpOmU9XCJcIixuLmVsZW1lbnQudmFsKGUpLmF0dHIoXCJhcmlhLXZhbHVlbm93XCIsZSlcclxufSxfcGxhY2Vob2xkZXI6ZnVuY3Rpb24oZSl7dGhpcy5fdGV4dC52YWwoZSksdXx8ZXx8dGhpcy5fdGV4dC52YWwodGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyKX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLmVsZW1lbnQscj1pWzBdO3Q9aS5wYXJlbnRzKFwiLmstbnVtZXJpY3RleHRib3hcIiksdC5pcyhcInNwYW4uay1udW1lcmljdGV4dGJveFwiKXx8KHQ9aS5oaWRlKCkud3JhcCgnPHNwYW4gY2xhc3M9XCJrLW51bWVyaWMtd3JhcCBrLXN0YXRlLWRlZmF1bHRcIiAvPicpLnBhcmVudCgpLHQ9dC53cmFwKFwiPHNwYW4vPlwiKS5wYXJlbnQoKSksdFswXS5zdHlsZS5jc3NUZXh0PXIuc3R5bGUuY3NzVGV4dCxyLnN0eWxlLndpZHRoPVwiXCIsbi53cmFwcGVyPXQuYWRkQ2xhc3MoXCJrLXdpZGdldCBrLW51bWVyaWN0ZXh0Ym94XCIpLmFkZENsYXNzKHIuY2xhc3NOYW1lKS5jc3MoXCJkaXNwbGF5XCIsXCJcIiksbi5faW5wdXRXcmFwcGVyPWUodFswXS5maXJzdENoaWxkKX0sX3Jlc2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudCxpPW4uYXR0cihcImZvcm1cIikscj1pP2UoXCIjXCIraSk6bi5jbG9zZXN0KFwiZm9ybVwiKTtyWzBdJiYodC5fcmVzZXRIYW5kbGVyPWZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe3QudmFsdWUoblswXS52YWx1ZSl9KX0sdC5fZm9ybT1yLm9uKFwicmVzZXRcIix0Ll9yZXNldEhhbmRsZXIpKX19KTthLnBsdWdpbihSKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChuLGkpe24uZmlsdGVycyYmKG4uZmlsdGVycz1lLmdyZXAobi5maWx0ZXJzLGZ1bmN0aW9uKGUpe3JldHVybiB0KGUsaSksZS5maWx0ZXJzP2UuZmlsdGVycy5sZW5ndGg6ZS5maWVsZCE9aX0pKX1mdW5jdGlvbiBuKGUpe3ZhciB0LG4saSxyLG8sYTtpZihlJiZlLmxlbmd0aClmb3IoYT1bXSx0PTAsbj1lLmxlbmd0aDtuPnQ7dCsrKWk9ZVt0XSxvPWkudGV4dHx8aS52YWx1ZXx8aSxyPW51bGw9PWkudmFsdWU/aS50ZXh0fHxpOmkudmFsdWUsYVt0XT17dGV4dDpvLHZhbHVlOnJ9O3JldHVybiBhfWZ1bmN0aW9uIGkodCxuKXtyZXR1cm4gZS5ncmVwKHQsZnVuY3Rpb24odCl7cmV0dXJuIHQuZmlsdGVycz8odC5maWx0ZXJzPWUuZ3JlcCh0LmZpbHRlcnMsZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmllbGQhPW59KSx0LmZpbHRlcnMubGVuZ3RoKTp0LmZpZWxkIT1ufSl9dmFyIHI9d2luZG93LmtlbmRvLG89ci51aSxhPWUucHJveHkscz1cImtlbmRvUG9wdXBcIixsPVwiaW5pdFwiLGM9XCIua2VuZG9GaWx0ZXJNZW51XCIsZD1cIklzIGVxdWFsIHRvXCIsdT1cIklzIG5vdCBlcXVhbCB0b1wiLGg9e251bWJlcjpcIm51bWVyaWN0ZXh0Ym94XCIsZGF0ZTpcImRhdGVwaWNrZXJcIn0scD17c3RyaW5nOlwidGV4dFwiLG51bWJlcjpcIm51bWJlclwiLGRhdGU6XCJkYXRlXCJ9LGY9ci5pc0Z1bmN0aW9uLGc9by5XaWRnZXQsbT0nPGRpdj48ZGl2IGNsYXNzPVwiay1maWx0ZXItaGVscC10ZXh0XCI+Iz1tZXNzYWdlcy5pbmZvIzwvZGl2PjxsYWJlbD48aW5wdXQgdHlwZT1cInJhZGlvXCIgZGF0YS0jPW5zI2JpbmQ9XCJjaGVja2VkOiBmaWx0ZXJzWzBdLnZhbHVlXCIgdmFsdWU9XCJ0cnVlXCIgbmFtZT1cImZpbHRlcnNbMF0udmFsdWVcIi8+Iz1tZXNzYWdlcy5pc1RydWUjPC9sYWJlbD48bGFiZWw+PGlucHV0IHR5cGU9XCJyYWRpb1wiIGRhdGEtIz1ucyNiaW5kPVwiY2hlY2tlZDogZmlsdGVyc1swXS52YWx1ZVwiIHZhbHVlPVwiZmFsc2VcIiBuYW1lPVwiZmlsdGVyc1swXS52YWx1ZVwiLz4jPW1lc3NhZ2VzLmlzRmFsc2UjPC9sYWJlbD48ZGl2PjxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiay1idXR0b24gay1wcmltYXJ5XCI+Iz1tZXNzYWdlcy5maWx0ZXIjPC9idXR0b24+PGJ1dHRvbiB0eXBlPVwicmVzZXRcIiBjbGFzcz1cImstYnV0dG9uXCI+Iz1tZXNzYWdlcy5jbGVhciM8L2J1dHRvbj48L2Rpdj48L2Rpdj4nLHY9JzxkaXY+PGRpdiBjbGFzcz1cImstZmlsdGVyLWhlbHAtdGV4dFwiPiM9bWVzc2FnZXMuaW5mbyM8L2Rpdj48c2VsZWN0IGRhdGEtIz1ucyNiaW5kPVwidmFsdWU6IGZpbHRlcnNbMF0ub3BlcmF0b3JcIiBkYXRhLSM9bnMjcm9sZT1cImRyb3Bkb3dubGlzdFwiPiNmb3IodmFyIG9wIGluIG9wZXJhdG9ycyl7IzxvcHRpb24gdmFsdWU9XCIjPW9wI1wiPiM9b3BlcmF0b3JzW29wXSM8L29wdGlvbj4jfSM8L3NlbGVjdD4jaWYodmFsdWVzKXsjPHNlbGVjdCBkYXRhLSM9bnMjYmluZD1cInZhbHVlOmZpbHRlcnNbMF0udmFsdWVcIiBkYXRhLSM9bnMjdGV4dC1maWVsZD1cInRleHRcIiBkYXRhLSM9bnMjdmFsdWUtZmllbGQ9XCJ2YWx1ZVwiIGRhdGEtIz1ucyNzb3VyY2U9XFwnIz1rZW5kby5zdHJpbmdpZnkodmFsdWVzKS5yZXBsYWNlKC9cXCcvZyxcIiZcXFxcIzM5O1wiKSNcXCcgZGF0YS0jPW5zI3JvbGU9XCJkcm9wZG93bmxpc3RcIiBkYXRhLSM9bnMjb3B0aW9uLWxhYmVsPVwiIz1tZXNzYWdlcy5zZWxlY3RWYWx1ZSNcIj48L3NlbGVjdD4jfWVsc2V7IzxpbnB1dCBkYXRhLSM9bnMjYmluZD1cInZhbHVlOmZpbHRlcnNbMF0udmFsdWVcIiBjbGFzcz1cImstdGV4dGJveFwiIHR5cGU9XCJ0ZXh0XCIgIz1yb2xlID8gXCJkYXRhLVwiICsgbnMgKyBcInJvbGU9XFwnXCIgKyByb2xlICsgXCJcXCdcIiA6IFwiXCIjIC8+I30jI2lmKGV4dHJhKXsjPHNlbGVjdCBjbGFzcz1cImstZmlsdGVyLWFuZFwiIGRhdGEtIz1ucyNiaW5kPVwidmFsdWU6IGxvZ2ljXCIgZGF0YS0jPW5zI3JvbGU9XCJkcm9wZG93bmxpc3RcIj48b3B0aW9uIHZhbHVlPVwiYW5kXCI+Iz1tZXNzYWdlcy5hbmQjPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT1cIm9yXCI+Iz1tZXNzYWdlcy5vciM8L29wdGlvbj48L3NlbGVjdD48c2VsZWN0IGRhdGEtIz1ucyNiaW5kPVwidmFsdWU6IGZpbHRlcnNbMV0ub3BlcmF0b3JcIiBkYXRhLSM9bnMjcm9sZT1cImRyb3Bkb3dubGlzdFwiPiNmb3IodmFyIG9wIGluIG9wZXJhdG9ycyl7IzxvcHRpb24gdmFsdWU9XCIjPW9wI1wiPiM9b3BlcmF0b3JzW29wXSM8L29wdGlvbj4jfSM8L3NlbGVjdD4jaWYodmFsdWVzKXsjPHNlbGVjdCBkYXRhLSM9bnMjYmluZD1cInZhbHVlOmZpbHRlcnNbMV0udmFsdWVcIiBkYXRhLSM9bnMjdGV4dC1maWVsZD1cInRleHRcIiBkYXRhLSM9bnMjdmFsdWUtZmllbGQ9XCJ2YWx1ZVwiIGRhdGEtIz1ucyNzb3VyY2U9XFwnIz1rZW5kby5zdHJpbmdpZnkodmFsdWVzKS5yZXBsYWNlKC9cXCcvZyxcIiZcXFxcIzM5O1wiKSNcXCcgZGF0YS0jPW5zI3JvbGU9XCJkcm9wZG93bmxpc3RcIiBkYXRhLSM9bnMjb3B0aW9uLWxhYmVsPVwiIz1tZXNzYWdlcy5zZWxlY3RWYWx1ZSNcIj48L3NlbGVjdD4jfWVsc2V7IzxpbnB1dCBkYXRhLSM9bnMjYmluZD1cInZhbHVlOiBmaWx0ZXJzWzFdLnZhbHVlXCIgY2xhc3M9XCJrLXRleHRib3hcIiB0eXBlPVwidGV4dFwiICM9cm9sZSA/IFwiZGF0YS1cIiArIG5zICsgXCJyb2xlPVxcJ1wiICsgcm9sZSArIFwiXFwnXCIgOiBcIlwiIy8+I30jI30jPGRpdj48YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImstYnV0dG9uIGstcHJpbWFyeVwiPiM9bWVzc2FnZXMuZmlsdGVyIzwvYnV0dG9uPjxidXR0b24gdHlwZT1cInJlc2V0XCIgY2xhc3M9XCJrLWJ1dHRvblwiPiM9bWVzc2FnZXMuY2xlYXIjPC9idXR0b24+PC9kaXY+PC9kaXY+JyxfPSc8ZGl2IGRhdGEtIz1ucyNyb2xlPVwidmlld1wiIGRhdGEtIz1ucyNpbml0LXdpZGdldHM9XCJmYWxzZVwiIGNsYXNzPVwiay1ncmlkLWZpbHRlci1tZW51XCI+PGRpdiBkYXRhLSM9bnMjcm9sZT1cImhlYWRlclwiIGNsYXNzPVwiay1oZWFkZXJcIj48YnV0dG9uIGNsYXNzPVwiay1idXR0b24gay1jYW5jZWxcIj4jPW1lc3NhZ2VzLmNhbmNlbCM8L2J1dHRvbj4jPWZpZWxkIzxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiay1idXR0b24gay1zdWJtaXRcIj4jPW1lc3NhZ2VzLmZpbHRlciM8L2J1dHRvbj48L2Rpdj48Zm9ybSBjbGFzcz1cImstZmlsdGVyLW1lbnUgay1tb2JpbGUtbGlzdFwiPjx1bCBjbGFzcz1cImstZmlsdGVyLWhlbHAtdGV4dFwiPjxsaT48c3BhbiBjbGFzcz1cImstbGlua1wiPiM9bWVzc2FnZXMuaW5mbyM8L3NwYW4+PHVsPjxsaSBjbGFzcz1cImstaXRlbVwiPjxsYWJlbCBjbGFzcz1cImstbGFiZWxcIj4jPW1lc3NhZ2VzLm9wZXJhdG9yIzxzZWxlY3QgZGF0YS0jPW5zI2JpbmQ9XCJ2YWx1ZTogZmlsdGVyc1swXS5vcGVyYXRvclwiPiNmb3IodmFyIG9wIGluIG9wZXJhdG9ycyl7IzxvcHRpb24gdmFsdWU9XCIjPW9wI1wiPiM9b3BlcmF0b3JzW29wXSM8L29wdGlvbj4jfSM8L3NlbGVjdD48L2xhYmVsPjwvbGk+PGxpIGNsYXNzPVwiay1pdGVtXCI+PGxhYmVsIGNsYXNzPVwiay1sYWJlbFwiPiM9bWVzc2FnZXMudmFsdWUjI2lmKHZhbHVlcyl7IzxzZWxlY3QgZGF0YS0jPW5zI2JpbmQ9XCJ2YWx1ZTpmaWx0ZXJzWzBdLnZhbHVlXCI+PG9wdGlvbiB2YWx1ZT1cIlwiPiM9bWVzc2FnZXMuc2VsZWN0VmFsdWUjPC9vcHRpb24+I2Zvcih2YXIgdmFsIGluIHZhbHVlcyl7IzxvcHRpb24gdmFsdWU9XCIjPXZhbHVlc1t2YWxdLnZhbHVlI1wiPiM9dmFsdWVzW3ZhbF0udGV4dCM8L29wdGlvbj4jfSM8L3NlbGVjdD4jfWVsc2V7IzxpbnB1dCBkYXRhLSM9bnMjYmluZD1cInZhbHVlOmZpbHRlcnNbMF0udmFsdWVcIiBjbGFzcz1cImstdGV4dGJveFwiIHR5cGU9XCIjPWlucHV0VHlwZSNcIiAjPXVzZVJvbGUgPyBcImRhdGEtXCIgKyBucyArIFwicm9sZT1cXCdcIiArIHJvbGUgKyBcIlxcJ1wiIDogXCJcIiMgLz4jfSM8L2xhYmVsPjwvbGk+I2lmKGV4dHJhKXsjPC91bD48dWwgY2xhc3M9XCJrLWZpbHRlci1oZWxwLXRleHRcIj48bGk+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj48L3NwYW4+PGxpIGNsYXNzPVwiay1pdGVtXCI+PGxhYmVsIGNsYXNzPVwiay1sYWJlbFwiPjxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwibG9naWNcIiBjbGFzcz1cImstY2hlY2tcIiBkYXRhLSM9bnMjYmluZD1cImNoZWNrZWQ6IGxvZ2ljXCIgdmFsdWU9XCJhbmRcIiAvPiM9bWVzc2FnZXMuYW5kIzwvbGFiZWw+PC9saT48bGkgY2xhc3M9XCJrLWl0ZW1cIj48bGFiZWwgY2xhc3M9XCJrLWxhYmVsXCI+PGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJsb2dpY1wiIGNsYXNzPVwiay1jaGVja1wiIGRhdGEtIz1ucyNiaW5kPVwiY2hlY2tlZDogbG9naWNcIiB2YWx1ZT1cIm9yXCIgLz4jPW1lc3NhZ2VzLm9yIzwvbGFiZWw+PC9saT48L3VsPjx1bCBjbGFzcz1cImstZmlsdGVyLWhlbHAtdGV4dFwiPjxsaT48c3BhbiBjbGFzcz1cImstbGlua1wiPjwvc3Bhbj48bGkgY2xhc3M9XCJrLWl0ZW1cIj48bGFiZWwgY2xhc3M9XCJrLWxhYmVsXCI+Iz1tZXNzYWdlcy5vcGVyYXRvciM8c2VsZWN0IGRhdGEtIz1ucyNiaW5kPVwidmFsdWU6IGZpbHRlcnNbMV0ub3BlcmF0b3JcIj4jZm9yKHZhciBvcCBpbiBvcGVyYXRvcnMpeyM8b3B0aW9uIHZhbHVlPVwiIz1vcCNcIj4jPW9wZXJhdG9yc1tvcF0jPC9vcHRpb24+I30jPC9zZWxlY3Q+PC9sYWJlbD48L2xpPjxsaSBjbGFzcz1cImstaXRlbVwiPjxsYWJlbCBjbGFzcz1cImstbGFiZWxcIj4jPW1lc3NhZ2VzLnZhbHVlIyNpZih2YWx1ZXMpeyM8c2VsZWN0IGRhdGEtIz1ucyNiaW5kPVwidmFsdWU6ZmlsdGVyc1sxXS52YWx1ZVwiPjxvcHRpb24gdmFsdWU9XCJcIj4jPW1lc3NhZ2VzLnNlbGVjdFZhbHVlIzwvb3B0aW9uPiNmb3IodmFyIHZhbCBpbiB2YWx1ZXMpeyM8b3B0aW9uIHZhbHVlPVwiIz12YWx1ZXNbdmFsXS52YWx1ZSNcIj4jPXZhbHVlc1t2YWxdLnRleHQjPC9vcHRpb24+I30jPC9zZWxlY3Q+I31lbHNleyM8aW5wdXQgZGF0YS0jPW5zI2JpbmQ9XCJ2YWx1ZTpmaWx0ZXJzWzFdLnZhbHVlXCIgY2xhc3M9XCJrLXRleHRib3hcIiB0eXBlPVwiIz1pbnB1dFR5cGUjXCIgIz11c2VSb2xlID8gXCJkYXRhLVwiICsgbnMgKyBcInJvbGU9XFwnXCIgKyByb2xlICsgXCJcXCdcIiA6IFwiXCIjIC8+I30jPC9sYWJlbD48L2xpPiN9IzwvdWw+PC9saT48bGkgY2xhc3M9XCJrLWJ1dHRvbi1jb250YWluZXJcIj48YnV0dG9uIHR5cGU9XCJyZXNldFwiIGNsYXNzPVwiay1idXR0b25cIj4jPW1lc3NhZ2VzLmNsZWFyIzwvYnV0dG9uPjwvbGk+PC91bD48L2Rpdj48L2Zvcm0+PC9kaXY+Jyx5PSc8ZGl2IGRhdGEtIz1ucyNyb2xlPVwidmlld1wiIGRhdGEtIz1ucyNpbml0LXdpZGdldHM9XCJmYWxzZVwiIGNsYXNzPVwiay1ncmlkLWZpbHRlci1tZW51XCI+PGRpdiBkYXRhLSM9bnMjcm9sZT1cImhlYWRlclwiIGNsYXNzPVwiay1oZWFkZXJcIj48YnV0dG9uIGNsYXNzPVwiay1idXR0b24gay1jYW5jZWxcIj4jPW1lc3NhZ2VzLmNhbmNlbCM8L2J1dHRvbj4jPWZpZWxkIzxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiay1idXR0b24gay1zdWJtaXRcIj4jPW1lc3NhZ2VzLmZpbHRlciM8L2J1dHRvbj48L2Rpdj48Zm9ybSBjbGFzcz1cImstZmlsdGVyLW1lbnUgay1tb2JpbGUtbGlzdFwiPjx1bCBjbGFzcz1cImstZmlsdGVyLWhlbHAtdGV4dFwiPjxsaT48c3BhbiBjbGFzcz1cImstbGlua1wiPiM9bWVzc2FnZXMuaW5mbyM8L3NwYW4+PHVsPjxsaSBjbGFzcz1cImstaXRlbVwiPjxsYWJlbCBjbGFzcz1cImstbGFiZWxcIj48aW5wdXQgY2xhc3M9XCJrLWNoZWNrXCIgdHlwZT1cInJhZGlvXCIgZGF0YS0jPW5zI2JpbmQ9XCJjaGVja2VkOiBmaWx0ZXJzWzBdLnZhbHVlXCIgdmFsdWU9XCJ0cnVlXCIgbmFtZT1cImZpbHRlcnNbMF0udmFsdWVcIi8+Iz1tZXNzYWdlcy5pc1RydWUjPC9sYWJlbD48L2xpPjxsaSBjbGFzcz1cImstaXRlbVwiPjxsYWJlbCBjbGFzcz1cImstbGFiZWxcIj48aW5wdXQgY2xhc3M9XCJrLWNoZWNrXCIgdHlwZT1cInJhZGlvXCIgZGF0YS0jPW5zI2JpbmQ9XCJjaGVja2VkOiBmaWx0ZXJzWzBdLnZhbHVlXCIgdmFsdWU9XCJmYWxzZVwiIG5hbWU9XCJmaWx0ZXJzWzBdLnZhbHVlXCIvPiM9bWVzc2FnZXMuaXNGYWxzZSM8L2xhYmVsPjwvbGk+PC91bD48L2xpPjxsaSBjbGFzcz1cImstYnV0dG9uLWNvbnRhaW5lclwiPjxidXR0b24gdHlwZT1cInJlc2V0XCIgY2xhc3M9XCJrLWJ1dHRvblwiPiM9bWVzc2FnZXMuY2xlYXIjPC9idXR0b24+PC9saT48L3VsPjwvZm9ybT48L2Rpdj4nLHc9Zy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxvLHMsbCxkPXRoaXMsdT1cInN0cmluZ1wiO2cuZm4uaW5pdC5jYWxsKGQsdCxuKSxpPWQub3BlcmF0b3JzPW4ub3BlcmF0b3JzfHx7fSx0PWQuZWxlbWVudCxuPWQub3B0aW9ucyxuLmFwcGVuZFRvRWxlbWVudHx8KHM9dC5hZGRDbGFzcyhcImstd2l0aC1pY29uIGstZmlsdGVyYWJsZVwiKS5maW5kKFwiLmstZ3JpZC1maWx0ZXJcIiksc1swXXx8KHM9dC5wcmVwZW5kKCc8YSBjbGFzcz1cImstZ3JpZC1maWx0ZXJcIiBocmVmPVwiI1wiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstZmlsdGVyXCIvPjwvYT4nKS5maW5kKFwiLmstZ3JpZC1maWx0ZXJcIikpLHMuYXR0cihcInRhYmluZGV4XCIsLTEpLm9uKFwiY2xpY2tcIitjLGEoZC5fY2xpY2ssZCkpKSxkLmxpbms9c3x8ZSgpLGQuZGF0YVNvdXJjZT1uLmRhdGFTb3VyY2UsZC5maWVsZD1uLmZpZWxkfHx0LmF0dHIoci5hdHRyKFwiZmllbGRcIikpLGQubW9kZWw9ZC5kYXRhU291cmNlLnJlYWRlci5tb2RlbCxkLl9wYXJzZT1mdW5jdGlvbihlKXtyZXR1cm4gZStcIlwifSxkLm1vZGVsJiZkLm1vZGVsLmZpZWxkcyYmKGw9ZC5tb2RlbC5maWVsZHNbZC5maWVsZF0sbCYmKHU9bC50eXBlfHxcInN0cmluZ1wiLGwucGFyc2UmJihkLl9wYXJzZT1hKGwucGFyc2UsbCkpKSksbi52YWx1ZXMmJih1PVwiZW51bXNcIiksZC50eXBlPXUsaT1pW3VdfHxuLm9wZXJhdG9yc1t1XTtmb3IobyBpbiBpKWJyZWFrO2QuX2RlZmF1bHRGaWx0ZXI9ZnVuY3Rpb24oKXtyZXR1cm57ZmllbGQ6ZC5maWVsZCxvcGVyYXRvcjpvfHxcImVxXCIsdmFsdWU6XCJcIn19LGQuX3JlZnJlc2hIYW5kbGVyPWEoZC5yZWZyZXNoLGQpLGQuZGF0YVNvdXJjZS5iaW5kKFwiY2hhbmdlXCIsZC5fcmVmcmVzaEhhbmRsZXIpLG4uYXBwZW5kVG9FbGVtZW50P2QuX2luaXQoKTpkLnJlZnJlc2goKX0sX2luaXQ6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLm9wdGlvbnMudWksbz1mKGkpO24ucGFuZT1uLm9wdGlvbnMucGFuZSxuLnBhbmUmJihuLl9pc01vYmlsZT0hMCksb3x8KHQ9aXx8aFtuLnR5cGVdKSxuLl9pc01vYmlsZT9uLl9jcmVhdGVNb2JpbGVGb3JtKHQpOm4uX2NyZWF0ZUZvcm0odCksbi5mb3JtLm9uKFwic3VibWl0XCIrYyxhKG4uX3N1Ym1pdCxuKSkub24oXCJyZXNldFwiK2MsYShuLl9yZXNldCxuKSksbyYmbi5mb3JtLmZpbmQoXCIuay10ZXh0Ym94XCIpLnJlbW92ZUNsYXNzKFwiay10ZXh0Ym94XCIpLmVhY2goZnVuY3Rpb24oKXtpKGUodGhpcykpfSksbi5mb3JtLmZpbmQoXCJbXCIrci5hdHRyKFwicm9sZVwiKStcIj1udW1lcmljdGV4dGJveF1cIikucmVtb3ZlQ2xhc3MoXCJrLXRleHRib3hcIikuZW5kKCkuZmluZChcIltcIityLmF0dHIoXCJyb2xlXCIpK1wiPWRhdGV0aW1lcGlja2VyXVwiKS5yZW1vdmVDbGFzcyhcImstdGV4dGJveFwiKS5lbmQoKS5maW5kKFwiW1wiK3IuYXR0cihcInJvbGVcIikrXCI9dGltZXBpY2tlcl1cIikucmVtb3ZlQ2xhc3MoXCJrLXRleHRib3hcIikuZW5kKCkuZmluZChcIltcIityLmF0dHIoXCJyb2xlXCIpK1wiPWRhdGVwaWNrZXJdXCIpLnJlbW92ZUNsYXNzKFwiay10ZXh0Ym94XCIpLG4ucmVmcmVzaCgpLG4udHJpZ2dlcihsLHtmaWVsZDpuLmZpZWxkLGNvbnRhaW5lcjpuLmZvcm19KX0sX2NyZWF0ZUZvcm06ZnVuY3Rpb24odCl7dmFyIGk9dGhpcyxvPWkub3B0aW9ucyxsPWkub3BlcmF0b3JzfHx7fSxkPWkudHlwZTtsPWxbZF18fG8ub3BlcmF0b3JzW2RdLGkuZm9ybT1lKCc8Zm9ybSBjbGFzcz1cImstZmlsdGVyLW1lbnVcIi8+JykuaHRtbChyLnRlbXBsYXRlKFwiYm9vbGVhblwiPT09ZD9tOnYpKHtmaWVsZDppLmZpZWxkLGZvcm1hdDpvLmZvcm1hdCxuczpyLm5zLG1lc3NhZ2VzOm8ubWVzc2FnZXMsZXh0cmE6by5leHRyYSxvcGVyYXRvcnM6bCx0eXBlOmQscm9sZTp0LHZhbHVlczpuKG8udmFsdWVzKX0pKSxvLmFwcGVuZFRvRWxlbWVudD8oaS5lbGVtZW50LmFwcGVuZChpLmZvcm0pLGkucG9wdXA9aS5lbGVtZW50LmNsb3Nlc3QoXCIuay1wb3B1cFwiKS5kYXRhKHMpKTppLnBvcHVwPWkuZm9ybVtzXSh7YW5jaG9yOmkubGluayxvcGVuOmEoaS5fb3BlbixpKSxhY3RpdmF0ZTphKGkuX2FjdGl2YXRlLGkpLGNsb3NlOmZ1bmN0aW9uKCl7aS5vcHRpb25zLmNsb3NlQ2FsbGJhY2smJmkub3B0aW9ucy5jbG9zZUNhbGxiYWNrKGkuZWxlbWVudCl9fSkuZGF0YShzKSxpLmZvcm0ub24oXCJrZXlkb3duXCIrYyxhKGkuX2tleWRvd24saSkpfSxfY3JlYXRlTW9iaWxlRm9ybTpmdW5jdGlvbih0KXt2YXIgaT10aGlzLG89aS5vcHRpb25zLGE9aS5vcGVyYXRvcnN8fHt9LHM9aS50eXBlO2E9YVtzXXx8by5vcGVyYXRvcnNbc10saS5mb3JtPWUoXCI8ZGl2IC8+XCIpLmh0bWwoci50ZW1wbGF0ZShcImJvb2xlYW5cIj09PXM/eTpfKSh7ZmllbGQ6aS5maWVsZCxmb3JtYXQ6by5mb3JtYXQsbnM6ci5ucyxtZXNzYWdlczpvLm1lc3NhZ2VzLGV4dHJhOm8uZXh0cmEsb3BlcmF0b3JzOmEsdHlwZTpzLHJvbGU6dCx1c2VSb2xlOiFyLnN1cHBvcnQuaW5wdXQuZGF0ZSYmXCJkYXRlXCI9PT1zfHxcIm51bWJlclwiPT09cyxpbnB1dFR5cGU6cFtzXSx2YWx1ZXM6bihvLnZhbHVlcyl9KSksaS52aWV3PWkucGFuZS5hcHBlbmQoaS5mb3JtLmh0bWwoKSksaS5mb3JtPWkudmlldy5lbGVtZW50LmZpbmQoXCJmb3JtXCIpLGkudmlldy5lbGVtZW50Lm9uKFwiY2xpY2tcIixcIi5rLXN1Ym1pdFwiLGZ1bmN0aW9uKGUpe2kuZm9ybS5zdWJtaXQoKSxlLnByZXZlbnREZWZhdWx0KCl9KS5vbihcImNsaWNrXCIsXCIuay1jYW5jZWxcIixmdW5jdGlvbihlKXtpLl9jbG9zZUZvcm0oKSxlLnByZXZlbnREZWZhdWx0KCl9KX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmRhdGFTb3VyY2UuZmlsdGVyKCl8fHtmaWx0ZXJzOltdLGxvZ2ljOlwiYW5kXCJ9O2UuZmlsdGVyTW9kZWw9ci5vYnNlcnZhYmxlKHtsb2dpYzpcImFuZFwiLGZpbHRlcnM6W2UuX2RlZmF1bHRGaWx0ZXIoKSxlLl9kZWZhdWx0RmlsdGVyKCldfSksZS5mb3JtJiZyLmJpbmQoZS5mb3JtLmNoaWxkcmVuKCkuZmlyc3QoKSxlLmZpbHRlck1vZGVsKSxlLl9iaW5kKHQpP2UubGluay5hZGRDbGFzcyhcImstc3RhdGUtYWN0aXZlXCIpOmUubGluay5yZW1vdmVDbGFzcyhcImstc3RhdGUtYWN0aXZlXCIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztnLmZuLmRlc3Ryb3kuY2FsbChlKSxlLmZvcm0mJihyLnVuYmluZChlLmZvcm0pLHIuZGVzdHJveShlLmZvcm0pLGUuZm9ybS51bmJpbmQoYyksZS5wb3B1cCYmKGUucG9wdXAuZGVzdHJveSgpLGUucG9wdXA9bnVsbCksZS5mb3JtPW51bGwpLGUudmlldyYmKGUudmlldy5wdXJnZSgpLGUudmlldz1udWxsKSxlLmxpbmsudW5iaW5kKGMpLGUuX3JlZnJlc2hIYW5kbGVyJiYoZS5kYXRhU291cmNlLnVuYmluZChcImNoYW5nZVwiLGUuX3JlZnJlc2hIYW5kbGVyKSxlLmRhdGFTb3VyY2U9bnVsbCksZS5lbGVtZW50PWUubGluaz1lLl9yZWZyZXNoSGFuZGxlcj1lLmZpbHRlck1vZGVsPW51bGx9LF9iaW5kOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG89dGhpcyxhPWUuZmlsdGVycyxzPSExLGw9MCxjPW8uZmlsdGVyTW9kZWw7Zm9yKHQ9MCxuPWEubGVuZ3RoO24+dDt0Kyspcj1hW3RdLHIuZmllbGQ9PW8uZmllbGQ/KGMuc2V0KFwibG9naWNcIixlLmxvZ2ljKSxpPWMuZmlsdGVyc1tsXSxpfHwoYy5maWx0ZXJzLnB1c2goe2ZpZWxkOm8uZmllbGR9KSxpPWMuZmlsdGVyc1tsXSksaS5zZXQoXCJ2YWx1ZVwiLG8uX3BhcnNlKHIudmFsdWUpKSxpLnNldChcIm9wZXJhdG9yXCIsci5vcGVyYXRvciksbCsrLHM9ITApOnIuZmlsdGVycyYmKHM9c3x8by5fYmluZChyKSk7cmV0dXJuIHN9LF9tZXJnZTpmdW5jdGlvbihuKXt2YXIgaSxyLG8sYT10aGlzLHM9bi5sb2dpY3x8XCJhbmRcIixsPW4uZmlsdGVycyxjPWEuZGF0YVNvdXJjZS5maWx0ZXIoKXx8e2ZpbHRlcnM6W10sbG9naWM6XCJhbmRcIn07Zm9yKHQoYyxhLmZpZWxkKSxsPWUuZ3JlcChsLGZ1bmN0aW9uKGUpe3JldHVyblwiXCIhPT1lLnZhbHVlJiZudWxsIT1lLnZhbHVlfSkscj0wLG89bC5sZW5ndGg7bz5yO3IrKylpPWxbcl0saS52YWx1ZT1hLl9wYXJzZShpLnZhbHVlKTtyZXR1cm4gbC5sZW5ndGgmJihjLmZpbHRlcnMubGVuZ3RoPyhuLmZpbHRlcnM9bCxcImFuZFwiIT09Yy5sb2dpYyYmKGMuZmlsdGVycz1be2xvZ2ljOmMubG9naWMsZmlsdGVyczpjLmZpbHRlcnN9XSxjLmxvZ2ljPVwiYW5kXCIpLGMuZmlsdGVycy5wdXNoKGwubGVuZ3RoPjE/bjpsWzBdKSk6KGMuZmlsdGVycz1sLGMubG9naWM9cykpLGN9LGZpbHRlcjpmdW5jdGlvbihlKXtlPXRoaXMuX21lcmdlKGUpLGUuZmlsdGVycy5sZW5ndGgmJnRoaXMuZGF0YVNvdXJjZS5maWx0ZXIoZSl9LGNsZWFyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQuZGF0YVNvdXJjZS5maWx0ZXIoKXx8e2ZpbHRlcnM6W119O24uZmlsdGVycz1lLmdyZXAobi5maWx0ZXJzLGZ1bmN0aW9uKGUpe3JldHVybiBlLmZpbHRlcnM/KGUuZmlsdGVycz1pKGUuZmlsdGVycyx0LmZpZWxkKSxlLmZpbHRlcnMubGVuZ3RoKTplLmZpZWxkIT10LmZpZWxkfSksbi5maWx0ZXJzLmxlbmd0aHx8KG49bnVsbCksdC5kYXRhU291cmNlLmZpbHRlcihuKX0sX3N1Ym1pdDpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLmZpbHRlcih0aGlzLmZpbHRlck1vZGVsLnRvSlNPTigpKSx0aGlzLl9jbG9zZUZvcm0oKX0sX3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5jbGVhcigpLHRoaXMuX2Nsb3NlRm9ybSgpfSxfY2xvc2VGb3JtOmZ1bmN0aW9uKCl7dGhpcy5faXNNb2JpbGU/dGhpcy5wYW5lLm5hdmlnYXRlKFwiXCIsdGhpcy5vcHRpb25zLmFuaW1hdGlvbnMucmlnaHQpOnRoaXMucG9wdXAuY2xvc2UoKX0sX2NsaWNrOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpLHRoaXMucG9wdXB8fHRoaXMucGFuZXx8dGhpcy5faW5pdCgpLHRoaXMuX2lzTW9iaWxlP3RoaXMucGFuZS5uYXZpZ2F0ZSh0aGlzLnZpZXcsdGhpcy5vcHRpb25zLmFuaW1hdGlvbnMubGVmdCk6dGhpcy5wb3B1cC50b2dnbGUoKX0sX29wZW46ZnVuY3Rpb24oKXt2YXIgdDtlKFwiLmstZmlsdGVyLW1lbnVcIikubm90KHRoaXMuZm9ybSkuZWFjaChmdW5jdGlvbigpe3Q9ZSh0aGlzKS5kYXRhKHMpLHQmJnQuY2xvc2UoKX0pfSxfYWN0aXZhdGU6ZnVuY3Rpb24oKXt0aGlzLmZvcm0uZmluZChcIjprZW5kb0ZvY3VzYWJsZTpmaXJzdFwiKS5mb2N1cygpfSxfa2V5ZG93bjpmdW5jdGlvbihlKXtlLmtleUNvZGU9PXIua2V5cy5FU0MmJnRoaXMucG9wdXAuY2xvc2UoKX0sZXZlbnRzOltsXSxvcHRpb25zOntuYW1lOlwiRmlsdGVyTWVudVwiLGV4dHJhOiEwLGFwcGVuZFRvRWxlbWVudDohMSx0eXBlOlwic3RyaW5nXCIsb3BlcmF0b3JzOntzdHJpbmc6e2VxOmQsbmVxOnUsc3RhcnRzd2l0aDpcIlN0YXJ0cyB3aXRoXCIsY29udGFpbnM6XCJDb250YWluc1wiLGRvZXNub3Rjb250YWluOlwiRG9lcyBub3QgY29udGFpblwiLGVuZHN3aXRoOlwiRW5kcyB3aXRoXCJ9LG51bWJlcjp7ZXE6ZCxuZXE6dSxndGU6XCJJcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG9cIixndDpcIklzIGdyZWF0ZXIgdGhhblwiLGx0ZTpcIklzIGxlc3MgdGhhbiBvciBlcXVhbCB0b1wiLGx0OlwiSXMgbGVzcyB0aGFuXCJ9LGRhdGU6e2VxOmQsbmVxOnUsZ3RlOlwiSXMgYWZ0ZXIgb3IgZXF1YWwgdG9cIixndDpcIklzIGFmdGVyXCIsbHRlOlwiSXMgYmVmb3JlIG9yIGVxdWFsIHRvXCIsbHQ6XCJJcyBiZWZvcmVcIn0sZW51bXM6e2VxOmQsbmVxOnV9fSxtZXNzYWdlczp7aW5mbzpcIlNob3cgaXRlbXMgd2l0aCB2YWx1ZSB0aGF0OlwiLGlzVHJ1ZTpcImlzIHRydWVcIixpc0ZhbHNlOlwiaXMgZmFsc2VcIixmaWx0ZXI6XCJGaWx0ZXJcIixjbGVhcjpcIkNsZWFyXCIsYW5kOlwiQW5kXCIsb3I6XCJPclwiLHNlbGVjdFZhbHVlOlwiLVNlbGVjdCB2YWx1ZS1cIixvcGVyYXRvcjpcIk9wZXJhdG9yXCIsdmFsdWU6XCJWYWx1ZVwiLGNhbmNlbDpcIkNhbmNlbFwifSxhbmltYXRpb25zOntsZWZ0Olwic2xpZGVcIixyaWdodDpcInNsaWRlOnJpZ2h0XCJ9fX0pO28ucGx1Z2luKHcpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSx0KXtyZXR1cm4gZT1lLnNwbGl0KFwiIFwiKVshdCswXXx8ZSxlLnJlcGxhY2UoXCJ0b3BcIixcInVwXCIpLnJlcGxhY2UoXCJib3R0b21cIixcImRvd25cIil9ZnVuY3Rpb24gaShlLHQsbil7ZT1lLnNwbGl0KFwiIFwiKVshdCswXXx8ZTt2YXIgaT17b3JpZ2luOltcImJvdHRvbVwiLG4/XCJyaWdodFwiOlwibGVmdFwiXSxwb3NpdGlvbjpbXCJ0b3BcIixuP1wicmlnaHRcIjpcImxlZnRcIl19LHI9L2xlZnR8cmlnaHQvLnRlc3QoZSk7cmV0dXJuIHI/KGkub3JpZ2luPVtcInRvcFwiLGVdLGkucG9zaXRpb25bMV09Yy5kaXJlY3Rpb25zW2VdLnJldmVyc2UpOihpLm9yaWdpblswXT1lLGkucG9zaXRpb25bMF09Yy5kaXJlY3Rpb25zW2VdLnJldmVyc2UpLGkub3JpZ2luPWkub3JpZ2luLmpvaW4oXCIgXCIpLGkucG9zaXRpb249aS5wb3NpdGlvbi5qb2luKFwiIFwiKSxpfWZ1bmN0aW9uIHIodCxuKXt0cnl7cmV0dXJuIGUuY29udGFpbnModCxuKX1jYXRjaChpKXtyZXR1cm4hMX19ZnVuY3Rpb24gbyh0KXt0PWUodCksdC5hZGRDbGFzcyhcImstaXRlbVwiKS5jaGlsZHJlbih4KS5hZGRDbGFzcyhQKSx0LmNoaWxkcmVuKFwiYVwiKS5hZGRDbGFzcyhUKS5jaGlsZHJlbih4KS5hZGRDbGFzcyhQKSx0LmZpbHRlcihcIjpub3QoW2Rpc2FibGVkXSlcIikuYWRkQ2xhc3MoRyksdC5maWx0ZXIoXCIuay1zZXBhcmF0b3I6ZW1wdHlcIikuYXBwZW5kKFwiJm5ic3A7XCIpLHQuZmlsdGVyKFwibGlbZGlzYWJsZWRdXCIpLmFkZENsYXNzKFkpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKS5hdHRyKFwiYXJpYS1kaXNhYmxlZFwiLCEwKSx0LmZpbHRlcihcIltyb2xlXVwiKS5sZW5ndGh8fHQuYXR0cihcInJvbGVcIixcIm1lbnVpdGVtXCIpLHQuY2hpbGRyZW4oXCIuXCIrVCkubGVuZ3RofHx0LmNvbnRlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuISh0aGlzLm5vZGVOYW1lLm1hdGNoKGIpfHwzPT10aGlzLm5vZGVUeXBlJiYhZS50cmltKHRoaXMubm9kZVZhbHVlKSl9KS53cmFwQWxsKFwiPHNwYW4gY2xhc3M9J1wiK1QrXCInLz5cIiksYSh0KSxzKHQpfWZ1bmN0aW9uIGEodCl7dD1lKHQpLHQuZmluZChcIj4gLmstbGluayA+IFtjbGFzcyo9ay1pLWFycm93XTpub3QoLmstc3ByaXRlKVwiKS5yZW1vdmUoKSx0LmZpbHRlcihcIjpoYXMoLmstbWVudS1ncm91cClcIikuY2hpbGRyZW4oXCIuay1saW5rOm5vdCg6aGFzKFtjbGFzcyo9ay1pLWFycm93XTpub3QoLmstc3ByaXRlKSkpXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLG49dC5wYXJlbnQoKS5wYXJlbnQoKTt0LmFwcGVuZChcIjxzcGFuIGNsYXNzPSdrLWljb24gXCIrKG4uaGFzQ2xhc3MoUytcIi1ob3Jpem9udGFsXCIpP1wiay1pLWFycm93LXNcIjpcImstaS1hcnJvdy1lXCIpK1wiJy8+XCIpfSl9ZnVuY3Rpb24gcyh0KXt0PWUodCksdC5maWx0ZXIoXCIuay1maXJzdDpub3QoOmZpcnN0LWNoaWxkKVwiKS5yZW1vdmVDbGFzcyhNKSx0LmZpbHRlcihcIi5rLWxhc3Q6bm90KDpsYXN0LWNoaWxkKVwiKS5yZW1vdmVDbGFzcyhEKSx0LmZpbHRlcihcIjpmaXJzdC1jaGlsZFwiKS5hZGRDbGFzcyhNKSx0LmZpbHRlcihcIjpsYXN0LWNoaWxkXCIpLmFkZENsYXNzKEQpfXZhciBsLGM9d2luZG93LmtlbmRvLGQ9Yy51aSx1PWMuX2FjdGl2ZUVsZW1lbnQsaD1jLnN1cHBvcnQudG91Y2gmJmMuc3VwcG9ydC5tb2JpbGVPUyxwPVwibW91c2Vkb3duXCIsZj1cImNsaWNrXCIsZz1lLmV4dGVuZCxtPWUucHJveHksdj1lLmVhY2gsXz1jLnRlbXBsYXRlLHk9Yy5rZXlzLHc9ZC5XaWRnZXQsYj0vXih1bHxhfGRpdikkL2ksaz1cIi5rZW5kb01lbnVcIix4PVwiaW1nXCIsQz1cIm9wZW5cIixTPVwiay1tZW51XCIsVD1cImstbGlua1wiLEQ9XCJrLWxhc3RcIixBPVwiY2xvc2VcIixFPVwidGltZXJcIixNPVwiay1maXJzdFwiLFA9XCJrLWltYWdlXCIsST1cInNlbGVjdFwiLHo9XCJ6SW5kZXhcIixGPVwiYWN0aXZhdGVcIixSPVwiZGVhY3RpdmF0ZVwiLEI9XCJ0b3VjaHN0YXJ0XCIraytcIiBNU1BvaW50ZXJEb3duXCIraytcIiBwb2ludGVyZG93blwiK2ssTD1jLnN1cHBvcnQucG9pbnRlcnMsTz1jLnN1cHBvcnQubXNQb2ludGVycyxIPU98fEwsTj1MP1wicG9pbnRlcm92ZXJcIjpPP1wiTVNQb2ludGVyT3ZlclwiOlwibW91c2VlbnRlclwiLFY9TD9cInBvaW50ZXJvdXRcIjpPP1wiTVNQb2ludGVyT3V0XCI6XCJtb3VzZWxlYXZlXCIsVT1ofHxILFc9ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLGo9XCJrZW5kb1BvcHVwXCIsRz1cImstc3RhdGUtZGVmYXVsdFwiLHE9XCJrLXN0YXRlLWhvdmVyXCIsJD1cImstc3RhdGUtZm9jdXNlZFwiLFk9XCJrLXN0YXRlLWRpc2FibGVkXCIsSz1cIi5rLW1lbnVcIixRPVwiLmstbWVudS1ncm91cFwiLFg9UStcIiwuay1hbmltYXRpb24tY29udGFpbmVyXCIsSj1cIjpub3QoLmstbGlzdCkgPiAuay1pdGVtXCIsWj1cIi5rLWl0ZW0uay1zdGF0ZS1kaXNhYmxlZFwiLGV0PVwiLmstaXRlbTpub3QoLmstc3RhdGUtZGlzYWJsZWQpXCIsdHQ9XCIuay1pdGVtOm5vdCguay1zdGF0ZS1kaXNhYmxlZCkgPiAuay1saW5rXCIsbnQ9XCI6bm90KC5rLWl0ZW0uay1zZXBhcmF0b3IpXCIsaXQ9bnQrXCI6ZXEoMClcIixydD1udCtcIjpsYXN0XCIsb3Q9XCJkaXY6bm90KC5rLWFuaW1hdGlvbi1jb250YWluZXIsLmstbGlzdC1jb250YWluZXIpXCIsYXQ9ezI6MSx0b3VjaDoxfSxzdD17Y29udGVudDpfKFwiPGRpdiBjbGFzcz0nay1jb250ZW50ICM9IGdyb3VwQ3NzQ2xhc3MoKSAjJyB0YWJpbmRleD0nLTEnPiM9IGNvbnRlbnQoaXRlbSkgIzwvZGl2PlwiKSxncm91cDpfKFwiPHVsIGNsYXNzPScjPSBncm91cENzc0NsYXNzKGdyb3VwKSAjJyM9IGdyb3VwQXR0cmlidXRlcyhncm91cCkgIyByb2xlPSdtZW51JyBhcmlhLWhpZGRlbj0ndHJ1ZSc+Iz0gcmVuZGVySXRlbXMoZGF0YSkgIzwvdWw+XCIpLGl0ZW1XcmFwcGVyOl8oXCI8Iz0gdGFnKGl0ZW0pICMgY2xhc3M9JyM9IHRleHRDbGFzcyhpdGVtKSAjJyM9IHRleHRBdHRyaWJ1dGVzKGl0ZW0pICM+Iz0gaW1hZ2UoaXRlbSkgIyM9IHNwcml0ZShpdGVtKSAjIz0gdGV4dChpdGVtKSAjIz0gYXJyb3coZGF0YSkgIzwvIz0gdGFnKGl0ZW0pICM+XCIpLGl0ZW06XyhcIjxsaSBjbGFzcz0nIz0gd3JhcHBlckNzc0NsYXNzKGdyb3VwLCBpdGVtKSAjJyByb2xlPSdtZW51aXRlbScgIz1pdGVtLml0ZW1zID8gXFxcImFyaWEtaGFzcG9wdXA9J3RydWUnXFxcIjogXFxcIlxcXCIjIz1pdGVtLmVuYWJsZWQgPT09IGZhbHNlID8gXFxcImFyaWEtZGlzYWJsZWQ9J3RydWUnXFxcIiA6ICcnIz4jPSBpdGVtV3JhcHBlcihkYXRhKSAjIyBpZiAoaXRlbS5pdGVtcykgeyAjIz0gc3ViR3JvdXAoeyBpdGVtczogaXRlbS5pdGVtcywgbWVudTogbWVudSwgZ3JvdXA6IHsgZXhwYW5kZWQ6IGl0ZW0uZXhwYW5kZWQgfSB9KSAjIyB9IGVsc2UgaWYgKGl0ZW0uY29udGVudCB8fCBpdGVtLmNvbnRlbnRVcmwpIHsgIyM9IHJlbmRlckNvbnRlbnQoZGF0YSkgIyMgfSAjPC9saT5cIiksaW1hZ2U6XyhcIjxpbWcgY2xhc3M9J2staW1hZ2UnIGFsdD0nJyBzcmM9JyM9IGltYWdlVXJsICMnIC8+XCIpLGFycm93Ol8oXCI8c3BhbiBjbGFzcz0nIz0gYXJyb3dDbGFzcyhpdGVtLCBncm91cCkgIyc+PC9zcGFuPlwiKSxzcHJpdGU6XyhcIjxzcGFuIGNsYXNzPSdrLXNwcml0ZSAjPSBzcHJpdGVDc3NDbGFzcyAjJz48L3NwYW4+XCIpLGVtcHR5Ol8oXCJcIil9LGx0PXt3cmFwcGVyQ3NzQ2xhc3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj1cImstaXRlbVwiLGk9dC5pbmRleDtyZXR1cm4gbis9dC5lbmFibGVkPT09ITE/XCIgay1zdGF0ZS1kaXNhYmxlZFwiOlwiIGstc3RhdGUtZGVmYXVsdFwiLGUuZmlyc3RMZXZlbCYmMD09PWkmJihuKz1cIiBrLWZpcnN0XCIpLGk9PWUubGVuZ3RoLTEmJihuKz1cIiBrLWxhc3RcIiksdC5jc3NDbGFzcyYmKG4rPVwiIFwiK3QuY3NzQ2xhc3MpLG59LHRleHRDbGFzczpmdW5jdGlvbigpe3JldHVybiBUfSx0ZXh0QXR0cmlidXRlczpmdW5jdGlvbihlKXtyZXR1cm4gZS51cmw/XCIgaHJlZj0nXCIrZS51cmwrXCInXCI6XCJcIn0sYXJyb3dDbGFzczpmdW5jdGlvbihlLHQpe3ZhciBuPVwiay1pY29uXCI7cmV0dXJuIG4rPXQuaG9yaXpvbnRhbD9cIiBrLWktYXJyb3ctc1wiOlwiIGstaS1hcnJvdy1lXCJ9LHRleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZW5jb2RlZD09PSExP2UudGV4dDpjLmh0bWxFbmNvZGUoZS50ZXh0KX0sdGFnOmZ1bmN0aW9uKGUpe3JldHVybiBlLnVybD9cImFcIjpcInNwYW5cIn0sZ3JvdXBBdHRyaWJ1dGVzOmZ1bmN0aW9uKGUpe3JldHVybiBlLmV4cGFuZGVkIT09ITA/XCIgc3R5bGU9J2Rpc3BsYXk6bm9uZSdcIjpcIlwifSxncm91cENzc0NsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuXCJrLWdyb3VwIGstbWVudS1ncm91cFwifSxjb250ZW50OmZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnRlbnQ/ZS5jb250ZW50OlwiJm5ic3A7XCJ9fSxjdD13LmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXM7dy5mbi5pbml0LmNhbGwoaSx0LG4pLHQ9aS53cmFwcGVyPWkuZWxlbWVudCxuPWkub3B0aW9ucyxpLl9pbml0RGF0YShuKSxpLl91cGRhdGVDbGFzc2VzKCksaS5fYW5pbWF0aW9ucyhuKSxpLm5leHRJdGVtWkluZGV4PTEwMCxpLl90YWJpbmRleCgpLGkuX2ZvY3VzUHJveHk9bShpLl9mb2N1c0hhbmRsZXIsaSksdC5vbihCLGkuX2ZvY3VzUHJveHkpLm9uKGYrayxaLCExKS5vbihmK2ssZXQsbShpLl9jbGljayxpKSkub24oXCJrZXlkb3duXCIrayxtKGkuX2tleWRvd24saSkpLm9uKFwiZm9jdXNcIitrLG0oaS5fZm9jdXMsaSkpLm9uKFwiZm9jdXNcIitrLFwiLmstY29udGVudFwiLG0oaS5fZm9jdXMsaSkpLm9uKEIrXCIgXCIrcCtrLFwiLmstY29udGVudFwiLG0oaS5fcHJldmVudENsb3NlLGkpKS5vbihcImJsdXJcIitrLG0oaS5fcmVtb3ZlSG92ZXJJdGVtLGkpKS5vbihcImJsdXJcIitrLFwiW3RhYmluZGV4XVwiLG0oaS5fY2hlY2tBY3RpdmVFbGVtZW50LGkpKS5vbihOK2ssZXQsbShpLl9tb3VzZWVudGVyLGkpKS5vbihWK2ssZXQsbShpLl9tb3VzZWxlYXZlLGkpKS5vbihOK2srXCIgXCIrVitrK1wiIFwiK3AraytcIiBcIitmK2ssdHQsbShpLl90b2dnbGVIb3ZlcixpKSksbi5vcGVuT25DbGljayYmKGkuY2xpY2tlZD0hMSxpLl9kb2N1bWVudENsaWNrSGFuZGxlcj1tKGkuX2RvY3VtZW50Q2xpY2ssaSksZShkb2N1bWVudCkuY2xpY2soaS5fZG9jdW1lbnRDbGlja0hhbmRsZXIpKSx0LmF0dHIoXCJyb2xlXCIsXCJtZW51YmFyXCIpLHRbMF0uaWQmJihpLl9hcmlhSWQ9Yy5mb3JtYXQoXCJ7MH1fbW5fYWN0aXZlXCIsdFswXS5pZCkpLGMubm90aWZ5KGkpfSxldmVudHM6W0MsQSxGLFIsSV0sb3B0aW9uczp7bmFtZTpcIk1lbnVcIixhbmltYXRpb246e29wZW46e2R1cmF0aW9uOjIwMH0sY2xvc2U6e2R1cmF0aW9uOjEwMH19LG9yaWVudGF0aW9uOlwiaG9yaXpvbnRhbFwiLGRpcmVjdGlvbjpcImRlZmF1bHRcIixvcGVuT25DbGljazohMSxjbG9zZU9uQ2xpY2s6ITAsaG92ZXJEZWxheToxMDAscG9wdXBDb2xsaXNpb246dH0sX2luaXREYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5kYXRhU291cmNlJiYodC5hbmd1bGFyKFwiY2xlYW51cFwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOnQuZWxlbWVudC5jaGlsZHJlbigpfX0pLHQuZWxlbWVudC5lbXB0eSgpLHQuYXBwZW5kKGUuZGF0YVNvdXJjZSx0LmVsZW1lbnQpLHQuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czp0LmVsZW1lbnQuY2hpbGRyZW4oKX19KSl9LHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5vcHRpb25zLmFuaW1hdGlvbjt0aGlzLl9hbmltYXRpb25zKGUpLGUuYW5pbWF0aW9uPWcoITAsdCxlLmFuaW1hdGlvbiksXCJkYXRhU291cmNlXCJpbiBlJiZ0aGlzLl9pbml0RGF0YShlKSx0aGlzLl91cGRhdGVDbGFzc2VzKCksdy5mbi5zZXRPcHRpb25zLmNhbGwodGhpcyxlKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dy5mbi5kZXN0cm95LmNhbGwodCksdC5lbGVtZW50Lm9mZihrKSx0Ll9kb2N1bWVudENsaWNrSGFuZGxlciYmZShkb2N1bWVudCkudW5iaW5kKFwiY2xpY2tcIix0Ll9kb2N1bWVudENsaWNrSGFuZGxlciksYy5kZXN0cm95KHQuZWxlbWVudCl9LGVuYWJsZTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl90b2dnbGVEaXNhYmxlZChlLHQhPT0hMSksdGhpc30sZGlzYWJsZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fdG9nZ2xlRGlzYWJsZWQoZSwhMSksdGhpc30sYXBwZW5kOmZ1bmN0aW9uKGUsdCl7dD10aGlzLmVsZW1lbnQuZmluZCh0KTt2YXIgbj10aGlzLl9pbnNlcnQoZSx0LHQubGVuZ3RoP3QuZmluZChcIj4gLmstbWVudS1ncm91cCwgPiAuay1hbmltYXRpb24tY29udGFpbmVyID4gLmstbWVudS1ncm91cFwiKTpudWxsKTtyZXR1cm4gdihuLml0ZW1zLGZ1bmN0aW9uKCl7bi5ncm91cC5hcHBlbmQodGhpcyksYSh0aGlzKX0pLGEodCkscyhuLmdyb3VwLmZpbmQoXCIuay1maXJzdCwgLmstbGFzdFwiKS5hZGQobi5pdGVtcykpLHRoaXN9LGluc2VydEJlZm9yZTpmdW5jdGlvbihlLHQpe3Q9dGhpcy5lbGVtZW50LmZpbmQodCk7dmFyIG49dGhpcy5faW5zZXJ0KGUsdCx0LnBhcmVudCgpKTtyZXR1cm4gdihuLml0ZW1zLGZ1bmN0aW9uKCl7dC5iZWZvcmUodGhpcyksYSh0aGlzKSxzKHRoaXMpfSkscyh0KSx0aGlzfSxpbnNlcnRBZnRlcjpmdW5jdGlvbihlLHQpe3Q9dGhpcy5lbGVtZW50LmZpbmQodCk7dmFyIG49dGhpcy5faW5zZXJ0KGUsdCx0LnBhcmVudCgpKTtyZXR1cm4gdihuLml0ZW1zLGZ1bmN0aW9uKCl7dC5hZnRlcih0aGlzKSxhKHRoaXMpLHModGhpcyl9KSxzKHQpLHRoaXN9LF9pbnNlcnQ6ZnVuY3Rpb24odCxuLGkpe3ZhciByLGEscyxsLGM9dGhpcztyZXR1cm4gbiYmbi5sZW5ndGh8fChpPWMuZWxlbWVudCkscz1lLmlzUGxhaW5PYmplY3QodCksbD17Zmlyc3RMZXZlbDppLmhhc0NsYXNzKFMpLGhvcml6b250YWw6aS5oYXNDbGFzcyhTK1wiLWhvcml6b250YWxcIiksZXhwYW5kZWQ6ITAsbGVuZ3RoOmkuY2hpbGRyZW4oKS5sZW5ndGh9LG4mJiFpLmxlbmd0aCYmKGk9ZShjdC5yZW5kZXJHcm91cCh7Z3JvdXA6bH0pKS5hcHBlbmRUbyhuKSksc3x8ZS5pc0FycmF5KHQpP3I9ZShlLm1hcChzP1t0XTp0LGZ1bmN0aW9uKHQsbil7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQ/ZSh0KS5nZXQoKTplKGN0LnJlbmRlckl0ZW0oe2dyb3VwOmwsaXRlbTpnKHQse2luZGV4Om59KX0pKS5nZXQoKX0pKToocj1cInN0cmluZ1wiPT10eXBlb2YgdCYmXCI8XCIhPXRbMF0/Yy5lbGVtZW50LmZpbmQodCk6ZSh0KSxhPXIuZmluZChcIj4gdWxcIikuYWRkQ2xhc3MoXCJrLW1lbnUtZ3JvdXBcIikuYXR0cihcInJvbGVcIixcIm1lbnVcIikscj1yLmZpbHRlcihcImxpXCIpLHIuYWRkKGEuZmluZChcIj4gbGlcIikpLmVhY2goZnVuY3Rpb24oKXtvKHRoaXMpfSkpLHtpdGVtczpyLGdyb3VwOml9fSxyZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI7cmV0dXJuIGU9dGhpcy5lbGVtZW50LmZpbmQoZSksdD10aGlzLG49ZS5wYXJlbnRzVW50aWwodC5lbGVtZW50LEopLGk9ZS5wYXJlbnQoXCJ1bDpub3QoLmstbWVudSlcIiksZS5yZW1vdmUoKSxpJiYhaS5jaGlsZHJlbihKKS5sZW5ndGgmJihyPWkucGFyZW50KFwiLmstYW5pbWF0aW9uLWNvbnRhaW5lclwiKSxyLmxlbmd0aD9yLnJlbW92ZSgpOmkucmVtb3ZlKCkpLG4ubGVuZ3RoJiYobj1uLmVxKDApLGEobikscyhuKSksdH0sb3BlbjpmdW5jdGlvbihyKXt2YXIgbz10aGlzLGE9by5vcHRpb25zLHM9XCJob3Jpem9udGFsXCI9PWEub3JpZW50YXRpb24sbD1hLmRpcmVjdGlvbixkPWMuc3VwcG9ydC5pc1J0bChvLndyYXBwZXIpO3JldHVybiByPW8uZWxlbWVudC5maW5kKHIpLC9eKHRvcHxib3R0b218ZGVmYXVsdCkkLy50ZXN0KGwpJiYobD1kP3M/KGwrXCIgbGVmdFwiKS5yZXBsYWNlKFwiZGVmYXVsdFwiLFwiYm90dG9tXCIpOlwibGVmdFwiOnM/KGwrXCIgcmlnaHRcIikucmVwbGFjZShcImRlZmF1bHRcIixcImJvdHRvbVwiKTpcInJpZ2h0XCIpLHIuc2libGluZ3MoKS5maW5kKFwiPi5rLXBvcHVwOnZpc2libGUsPi5rLWFuaW1hdGlvbi1jb250YWluZXI+LmstcG9wdXA6dmlzaWJsZVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKS5kYXRhKFwia2VuZG9Qb3B1cFwiKTt0JiZ0LmNsb3NlKCl9KSxyLmVhY2goZnVuY3Rpb24oKXt2YXIgcj1lKHRoaXMpO2NsZWFyVGltZW91dChyLmRhdGEoRSkpLHIuZGF0YShFLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdSxoLHAsZixtLHYsXyx5LHc9ci5maW5kKFwiLmstbWVudS1ncm91cDpmaXJzdDpoaWRkZW5cIik7d1swXSYmby5fdHJpZ2dlckV2ZW50KHtpdGVtOnJbMF0sdHlwZTpDfSk9PT0hMSYmKCF3LmZpbmQoXCIuay1tZW51LWdyb3VwXCIpWzBdJiZ3LmNoaWxkcmVuKFwiLmstaXRlbVwiKS5sZW5ndGg+MT8oaD1lKHdpbmRvdykuaGVpZ2h0KCkscD1mdW5jdGlvbigpe3cuY3NzKHttYXhIZWlnaHQ6aC0ody5vdXRlckhlaWdodCgpLXcuaGVpZ2h0KCkpLWMuZ2V0U2hhZG93cyh3KS5ib3R0b20sb3ZlcmZsb3c6XCJhdXRvXCJ9KX0sYy5zdXBwb3J0LmJyb3dzZXIubXNpZSYmNz49Yy5zdXBwb3J0LmJyb3dzZXIudmVyc2lvbj9zZXRUaW1lb3V0KHAsMCk6cCgpKTp3LmNzcyh7bWF4SGVpZ2h0OlwiXCIsb3ZlcmZsb3c6XCJcIn0pLHIuZGF0YSh6LHIuY3NzKHopKSxyLmNzcyh6LG8ubmV4dEl0ZW1aSW5kZXgrKyksdT13LmRhdGEoaiksZj1yLnBhcmVudCgpLmhhc0NsYXNzKFMpLG09ZiYmcyx2PWkobCxmLGQpLF89YS5hbmltYXRpb24ub3Blbi5lZmZlY3RzLHk9XyE9PXQ/XzpcInNsaWRlSW46XCIrbihsLGYpLHU/KHU9dy5kYXRhKGopLHUub3B0aW9ucy5vcmlnaW49di5vcmlnaW4sdS5vcHRpb25zLnBvc2l0aW9uPXYucG9zaXRpb24sdS5vcHRpb25zLmFuaW1hdGlvbi5vcGVuLmVmZmVjdHM9eSk6dT13LmtlbmRvUG9wdXAoe2FjdGl2YXRlOmZ1bmN0aW9uKCl7by5fdHJpZ2dlckV2ZW50KHtpdGVtOnRoaXMud3JhcHBlci5wYXJlbnQoKSx0eXBlOkZ9KX0sZGVhY3RpdmF0ZTpmdW5jdGlvbihlKXtlLnNlbmRlci5lbGVtZW50LnJlbW92ZURhdGEoXCJ0YXJnZXRUcmFuc2Zvcm1cIikuY3NzKHtvcGFjaXR5OlwiXCJ9KSxvLl90cmlnZ2VyRXZlbnQoe2l0ZW06dGhpcy53cmFwcGVyLnBhcmVudCgpLHR5cGU6Un0pfSxvcmlnaW46di5vcmlnaW4scG9zaXRpb246di5wb3NpdGlvbixjb2xsaXNpb246YS5wb3B1cENvbGxpc2lvbiE9PXQ/YS5wb3B1cENvbGxpc2lvbjptP1wiZml0XCI6XCJmaXQgZmxpcFwiLGFuY2hvcjpyLGFwcGVuZFRvOnIsYW5pbWF0aW9uOntvcGVuOmcoITAse2VmZmVjdHM6eX0sYS5hbmltYXRpb24ub3BlbiksY2xvc2U6YS5hbmltYXRpb24uY2xvc2V9LGNsb3NlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuc2VuZGVyLndyYXBwZXIucGFyZW50KCk7by5fdHJpZ2dlckV2ZW50KHtpdGVtOnRbMF0sdHlwZTpBfSk/ZS5wcmV2ZW50RGVmYXVsdCgpOih0LmNzcyh6LHQuZGF0YSh6KSksdC5yZW1vdmVEYXRhKHopLFUmJih0LnJlbW92ZUNsYXNzKHEpLG8uX3JlbW92ZUhvdmVySXRlbSgpKSl9fSkuZGF0YShqKSx3LnJlbW92ZUF0dHIoXCJhcmlhLWhpZGRlblwiKSx1Lm9wZW4oKSl9LG8ub3B0aW9ucy5ob3ZlckRlbGF5KSl9KSxvfSxjbG9zZTpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXMscj1pLmVsZW1lbnQ7cmV0dXJuIHQ9ci5maW5kKHQpLHQubGVuZ3RofHwodD1yLmZpbmQoXCI+LmstaXRlbVwiKSksdC5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKTshbiYmaS5faXNSb290SXRlbSh0KSYmKGkuY2xpY2tlZD0hMSksY2xlYXJUaW1lb3V0KHQuZGF0YShFKSksdC5kYXRhKEUsc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBlPXQuZmluZChcIi5rLW1lbnUtZ3JvdXA6bm90KC5rLWxpc3QtY29udGFpbmVyKTpub3QoLmstY2FsZW5kYXItY29udGFpbmVyKTpmaXJzdDp2aXNpYmxlXCIpLmRhdGEoaik7ZSYmKGUuY2xvc2UoKSxlLmVsZW1lbnQuYXR0cihcImFyaWEtaGlkZGVuXCIsITApKX0saS5vcHRpb25zLmhvdmVyRGVsYXkpKX0pLGl9LF90b2dnbGVEaXNhYmxlZDpmdW5jdGlvbih0LG4pe3RoaXMuZWxlbWVudC5maW5kKHQpLmVhY2goZnVuY3Rpb24oKXtlKHRoaXMpLnRvZ2dsZUNsYXNzKEcsbikudG9nZ2xlQ2xhc3MoWSwhbikuYXR0cihcImFyaWEtZGlzYWJsZWRcIiwhbil9KX0sX3RvZ2dsZUhvdmVyOmZ1bmN0aW9uKHQpe3ZhciBuPWUoYy5ldmVudFRhcmdldCh0KXx8dC50YXJnZXQpLmNsb3Nlc3QoSiksaT10LnR5cGU9PU58fC0xIT09cC5pbmRleE9mKHQudHlwZSk7bi5wYXJlbnRzKFwibGkuXCIrWSkubGVuZ3RofHxuLnRvZ2dsZUNsYXNzKHEsaXx8XCJtb3VzZWRvd25cIj09dC50eXBlfHxcImNsaWNrXCI9PXQudHlwZSksdGhpcy5fcmVtb3ZlSG92ZXJJdGVtKCl9LF9wcmV2ZW50Q2xvc2U6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuY2xvc2VPbkNsaWNrfHwodGhpcy5fY2xvc3VyZVByZXZlbnRlZD0hMCl9LF9jaGVja0FjdGl2ZUVsZW1lbnQ6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPWUodD90LmN1cnJlbnRUYXJnZXQ6dGhpcy5faG92ZXJJdGVtKCkpLG89bi5fZmluZFJvb3RQYXJlbnQoaSlbMF07dGhpcy5fY2xvc3VyZVByZXZlbnRlZHx8c2V0VGltZW91dChmdW5jdGlvbigpeyghZG9jdW1lbnQuaGFzRm9jdXMoKXx8IXIobyxjLl9hY3RpdmVFbGVtZW50KCkpJiZ0JiYhcihvLHQuY3VycmVudFRhcmdldCkpJiZuLmNsb3NlKG8pfSwwKSx0aGlzLl9jbG9zdXJlUHJldmVudGVkPSExfSxfcmVtb3ZlSG92ZXJJdGVtOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5faG92ZXJJdGVtKCk7ZSYmZS5oYXNDbGFzcygkKSYmKGUucmVtb3ZlQ2xhc3MoJCksdGhpcy5fb2xkSG92ZXJJdGVtPW51bGwpfSxfdXBkYXRlQ2xhc3NlczpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5lbGVtZW50LG49XCIuay1tZW51LWluaXQgZGl2IHVsXCI7dC5yZW1vdmVDbGFzcyhcImstbWVudS1ob3Jpem9udGFsIGstbWVudS12ZXJ0aWNhbFwiKSx0LmFkZENsYXNzKFwiay13aWRnZXQgay1yZXNldCBrLWhlYWRlciBrLW1lbnUtaW5pdCBcIitTKS5hZGRDbGFzcyhTK1wiLVwiK3RoaXMub3B0aW9ucy5vcmllbnRhdGlvbiksdC5maW5kKFwibGkgPiB1bFwiKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4hYy5zdXBwb3J0Lm1hdGNoZXNTZWxlY3Rvci5jYWxsKHRoaXMsbil9KS5hZGRDbGFzcyhcImstZ3JvdXAgay1tZW51LWdyb3VwXCIpLmF0dHIoXCJyb2xlXCIsXCJtZW51XCIpLmF0dHIoXCJhcmlhLWhpZGRlblwiLHQuaXMoXCI6dmlzaWJsZVwiKSkuZW5kKCkuZmluZChcImxpID4gZGl2XCIpLmFkZENsYXNzKFwiay1jb250ZW50XCIpLmF0dHIoXCJ0YWJpbmRleFwiLFwiLTFcIiksZT10LmZpbmQoXCI+IGxpLC5rLW1lbnUtZ3JvdXAgPiBsaVwiKSx0LnJlbW92ZUNsYXNzKFwiay1tZW51LWluaXRcIiksZS5lYWNoKGZ1bmN0aW9uKCl7byh0aGlzKX0pfSxfbW91c2VlbnRlcjpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9ZSh0LmN1cnJlbnRUYXJnZXQpLG89aS5jaGlsZHJlbihcIi5rLWFuaW1hdGlvbi1jb250YWluZXJcIikubGVuZ3RofHxpLmNoaWxkcmVuKFEpLmxlbmd0aDt0LmRlbGVnYXRlVGFyZ2V0PT1pLnBhcmVudHMoSylbMF0mJihuLm9wdGlvbnMub3Blbk9uQ2xpY2smJiFuLmNsaWNrZWR8fGh8fChMfHxPKSYmdC5vcmlnaW5hbEV2ZW50LnBvaW50ZXJUeXBlIGluIGF0JiZuLl9pc1Jvb3RJdGVtKGkuY2xvc2VzdChKKSl8fCFyKHQuY3VycmVudFRhcmdldCx0LnJlbGF0ZWRUYXJnZXQpJiZvJiZuLm9wZW4oaSksKG4ub3B0aW9ucy5vcGVuT25DbGljayYmbi5jbGlja2VkfHxVKSYmaS5zaWJsaW5ncygpLmVhY2gobShmdW5jdGlvbihlLHQpe24uY2xvc2UodCwhMCl9LG4pKSl9LF9tb3VzZWxlYXZlOmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMsbz1lKG4uY3VycmVudFRhcmdldCksYT1vLmNoaWxkcmVuKFwiLmstYW5pbWF0aW9uLWNvbnRhaW5lclwiKS5sZW5ndGh8fG8uY2hpbGRyZW4oUSkubGVuZ3RoO3JldHVybiBvLnBhcmVudHNVbnRpbChcIi5rLWFuaW1hdGlvbi1jb250YWluZXJcIixcIi5rLWxpc3QtY29udGFpbmVyLC5rLWNhbGVuZGFyLWNvbnRhaW5lclwiKVswXT8obi5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0KTooaS5vcHRpb25zLm9wZW5PbkNsaWNrfHxofHwoTHx8TykmJm4ub3JpZ2luYWxFdmVudC5wb2ludGVyVHlwZSBpbiBhdHx8cihuLmN1cnJlbnRUYXJnZXQsbi5yZWxhdGVkVGFyZ2V0fHxuLnRhcmdldCl8fCFhfHxyKG4uY3VycmVudFRhcmdldCxjLl9hY3RpdmVFbGVtZW50KCkpfHxpLmNsb3NlKG8pLHQpfSxfY2xpY2s6ZnVuY3Rpb24obil7dmFyIGkscixvLGE9dGhpcyxzPWEub3B0aW9ucyxsPWUoYy5ldmVudFRhcmdldChuKSksZD1sWzBdP2xbMF0ubm9kZU5hbWUudG9VcHBlckNhc2UoKTpcIlwiLHU9XCJJTlBVVFwiPT1kfHxcIlNFTEVDVFwiPT1kfHxcIkJVVFRPTlwiPT1kfHxcIkxBQkVMXCI9PWQsaD1sLmNsb3Nlc3QoXCIuXCIrVCkscD1sLmNsb3Nlc3QoSiksZj1oLmF0dHIoXCJocmVmXCIpLGc9bC5hdHRyKFwiaHJlZlwiKSxtPWUoXCI8YSBocmVmPScjJyAvPlwiKS5hdHRyKFwiaHJlZlwiKSx2PSEhZiYmZiE9PW0sXz12JiYhIWYubWF0Y2goL14jLykseT0hIWcmJmchPT1tLHc9cy5vcGVuT25DbGljayYmbyYmYS5faXNSb290SXRlbShwKTtpZihzLm9wZW5PbkNsaWNrfHwhcC5jaGlsZHJlbihvdClbMF0pe2lmKHAuaGFzQ2xhc3MoWSkpcmV0dXJuIG4ucHJldmVudERlZmF1bHQoKSx0O2lmKG4uaGFuZGxlZHx8IWEuX3RyaWdnZXJFdmVudCh7aXRlbTpwWzBdLHR5cGU6SX0pfHx1fHxuLnByZXZlbnREZWZhdWx0KCksbi5oYW5kbGVkPSEwLHI9cC5jaGlsZHJlbihYKSxvPXIuaXMoXCI6dmlzaWJsZVwiKSxzLmNsb3NlT25DbGljayYmKCF2fHxfKSYmKCFyLmxlbmd0aHx8dykpcmV0dXJuIHAucmVtb3ZlQ2xhc3MocSkuY3NzKFwiaGVpZ2h0XCIpLGEuX29sZEhvdmVySXRlbT1hLl9maW5kUm9vdFBhcmVudChwKSxhLmNsb3NlKGgucGFyZW50c1VudGlsKGEuZWxlbWVudCxKKSksYS5jbGlja2VkPSExLC0xIT1cIk1TUG9pbnRlclVwXCIuaW5kZXhPZihuLnR5cGUpJiZuLnByZXZlbnREZWZhdWx0KCksdDt2JiZuLmVudGVyS2V5JiZoWzBdLmNsaWNrKCksKGEuX2lzUm9vdEl0ZW0ocCkmJnMub3Blbk9uQ2xpY2t8fGMuc3VwcG9ydC50b3VjaHx8KEx8fE8pJiZhLl9pc1Jvb3RJdGVtKHAuY2xvc2VzdChKKSkpJiYodnx8dXx8eXx8bi5wcmV2ZW50RGVmYXVsdCgpLGEuY2xpY2tlZD0hMCxpPXIuaXMoXCI6dmlzaWJsZVwiKT9BOkMsKHMuY2xvc2VPbkNsaWNrfHxpIT1BKSYmYVtpXShwKSl9fSxfZG9jdW1lbnRDbGljazpmdW5jdGlvbihlKXtyKHRoaXMuZWxlbWVudFswXSxlLnRhcmdldCl8fCh0aGlzLmNsaWNrZWQ9ITEpfSxfZm9jdXM6ZnVuY3Rpb24obil7dmFyIGk9dGhpcyxyPW4udGFyZ2V0LG89aS5faG92ZXJJdGVtKCksYT11KCk7cmV0dXJuIHI9PWkud3JhcHBlclswXXx8ZShyKS5pcyhcIjprZW5kb0ZvY3VzYWJsZVwiKT8oYT09PW4uY3VycmVudFRhcmdldCYmKG8ubGVuZ3RoP2kuX21vdmVIb3ZlcihbXSxvKTppLl9vbGRIb3Zlckl0ZW18fGkuX21vdmVIb3ZlcihbXSxpLndyYXBwZXIuY2hpbGRyZW4oKS5maXJzdCgpKSksdCk6KG4uc3RvcFByb3BhZ2F0aW9uKCksZShyKS5jbG9zZXN0KFwiLmstY29udGVudFwiKS5jbG9zZXN0KFwiLmstbWVudS1ncm91cFwiKS5jbG9zZXN0KFwiLmstaXRlbVwiKS5hZGRDbGFzcygkKSxpLndyYXBwZXIuZm9jdXMoKSx0KX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIG4saSxyLG89dGhpcyxhPWUua2V5Q29kZSxzPW8uX29sZEhvdmVySXRlbSxsPWMuc3VwcG9ydC5pc1J0bChvLndyYXBwZXIpO2lmKGUudGFyZ2V0PT1lLmN1cnJlbnRUYXJnZXR8fGE9PXkuRVNDKXtpZihzfHwocz1vLl9vbGRIb3Zlckl0ZW09by5faG92ZXJJdGVtKCkpLGk9by5faXRlbUJlbG9uZ3NUb1ZlcnRpdmFsKHMpLHI9by5faXRlbUhhc0NoaWxkcmVuKHMpLGE9PXkuUklHSFQpbj1vW2w/XCJfaXRlbUxlZnRcIjpcIl9pdGVtUmlnaHRcIl0ocyxpLHIpO2Vsc2UgaWYoYT09eS5MRUZUKW49b1tsP1wiX2l0ZW1SaWdodFwiOlwiX2l0ZW1MZWZ0XCJdKHMsaSxyKTtlbHNlIGlmKGE9PXkuRE9XTiluPW8uX2l0ZW1Eb3duKHMsaSxyKTtlbHNlIGlmKGE9PXkuVVApbj1vLl9pdGVtVXAocyxpLHIpO2Vsc2UgaWYoYT09eS5FU0Mpbj1vLl9pdGVtRXNjKHMsaSk7ZWxzZSBpZihhPT15LkVOVEVSfHxhPT15LlNQQUNFQkFSKW49cy5jaGlsZHJlbihcIi5rLWxpbmtcIiksbi5sZW5ndGg+MCYmKG8uX2NsaWNrKHt0YXJnZXQ6blswXSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe30sZW50ZXJLZXk6ITB9KSxvLl9tb3ZlSG92ZXIocyxvLl9maW5kUm9vdFBhcmVudChzKSkpO2Vsc2UgaWYoYT09eS5UQUIpcmV0dXJuIG49by5fZmluZFJvb3RQYXJlbnQocyksby5fbW92ZUhvdmVyKHMsbiksby5fY2hlY2tBY3RpdmVFbGVtZW50KCksdDtuJiZuWzBdJiYoZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCkpfX0sX2hvdmVySXRlbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLndyYXBwZXIuZmluZChcIi5rLWl0ZW0uay1zdGF0ZS1ob3Zlciwuay1pdGVtLmstc3RhdGUtZm9jdXNlZFwiKS5maWx0ZXIoXCI6dmlzaWJsZVwiKX0sX2l0ZW1CZWxvbmdzVG9WZXJ0aXZhbDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLndyYXBwZXIuaGFzQ2xhc3MoXCJrLW1lbnUtdmVydGljYWxcIik7cmV0dXJuIGUubGVuZ3RoP2UucGFyZW50KCkuaGFzQ2xhc3MoXCJrLW1lbnUtZ3JvdXBcIil8fHQ6dH0sX2l0ZW1IYXNDaGlsZHJlbjpmdW5jdGlvbihlKXtyZXR1cm4gZS5sZW5ndGg/ZS5jaGlsZHJlbihcInVsLmstbWVudS1ncm91cCwgZGl2LmstYW5pbWF0aW9uLWNvbnRhaW5lclwiKS5sZW5ndGg+MDohMX0sX21vdmVIb3ZlcjpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXMscj1pLl9hcmlhSWQ7dC5sZW5ndGgmJm4ubGVuZ3RoJiZ0LnJlbW92ZUNsYXNzKCQpLG4ubGVuZ3RoJiYoblswXS5pZCYmKHI9blswXS5pZCksbi5hZGRDbGFzcygkKSxpLl9vbGRIb3Zlckl0ZW09bixyJiYoaS5lbGVtZW50LnJlbW92ZUF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIiksZShcIiNcIityKS5yZW1vdmVBdHRyKFwiaWRcIiksbi5hdHRyKFwiaWRcIixyKSxpLmVsZW1lbnQuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLHIpKSl9LF9maW5kUm9vdFBhcmVudDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5faXNSb290SXRlbShlKT9lOmUucGFyZW50c1VudGlsKEssXCJsaS5rLWl0ZW1cIikubGFzdCgpfSxfaXNSb290SXRlbTpmdW5jdGlvbihlKXtyZXR1cm4gZS5wYXJlbnQoKS5oYXNDbGFzcyhTKX0sX2l0ZW1SaWdodDpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvPXRoaXM7aWYoIWUuaGFzQ2xhc3MoWSkpcmV0dXJuIHQ/bj8oby5vcGVuKGUpLGk9ZS5maW5kKFwiLmstbWVudS1ncm91cFwiKS5jaGlsZHJlbigpLmZpcnN0KCkpOlwiaG9yaXpvbnRhbFwiPT1vLm9wdGlvbnMub3JpZW50YXRpb24mJihyPW8uX2ZpbmRSb290UGFyZW50KGUpLG8uY2xvc2UociksaT1yLm5leHRBbGwoaXQpKTooaT1lLm5leHRBbGwoaXQpLGkubGVuZ3RofHwoaT1lLnByZXZBbGwocnQpKSksaSYmIWkubGVuZ3RoP2k9by53cmFwcGVyLmNoaWxkcmVuKFwiLmstaXRlbVwiKS5maXJzdCgpOml8fChpPVtdKSxvLl9tb3ZlSG92ZXIoZSxpKSxpfSxfaXRlbUxlZnQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXM7cmV0dXJuIHQ/KG49ZS5wYXJlbnQoKS5jbG9zZXN0KFwiLmstaXRlbVwiKSxpLmNsb3NlKG4pLGkuX2lzUm9vdEl0ZW0obikmJlwiaG9yaXpvbnRhbFwiPT1pLm9wdGlvbnMub3JpZW50YXRpb24mJihuPW4ucHJldkFsbChpdCkpKToobj1lLnByZXZBbGwoaXQpLG4ubGVuZ3RofHwobj1lLm5leHRBbGwocnQpKSksbi5sZW5ndGh8fChuPWkud3JhcHBlci5jaGlsZHJlbihcIi5rLWl0ZW1cIikubGFzdCgpKSxpLl9tb3ZlSG92ZXIoZSxuKSxufSxfaXRlbURvd246ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI9dGhpcztpZih0KWk9ZS5uZXh0QWxsKGl0KTtlbHNle2lmKCFufHxlLmhhc0NsYXNzKFkpKXJldHVybjtyLm9wZW4oZSksaT1lLmZpbmQoXCIuay1tZW51LWdyb3VwXCIpLmNoaWxkcmVuKCkuZmlyc3QoKX1yZXR1cm4haS5sZW5ndGgmJmUubGVuZ3RoP2k9ZS5wYXJlbnQoKS5jaGlsZHJlbigpLmZpcnN0KCk6ZS5sZW5ndGh8fChpPXIud3JhcHBlci5jaGlsZHJlbihcIi5rLWl0ZW1cIikuZmlyc3QoKSksci5fbW92ZUhvdmVyKGUsaSksaX0sX2l0ZW1VcDpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcztpZih0KXJldHVybiBuPWUucHJldkFsbChpdCksIW4ubGVuZ3RoJiZlLmxlbmd0aD9uPWUucGFyZW50KCkuY2hpbGRyZW4oKS5sYXN0KCk6ZS5sZW5ndGh8fChuPWkud3JhcHBlci5jaGlsZHJlbihcIi5rLWl0ZW1cIikubGFzdCgpKSxpLl9tb3ZlSG92ZXIoZSxuKSxufSxfaXRlbUVzYzpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcztyZXR1cm4gdD8obj1lLnBhcmVudCgpLmNsb3Nlc3QoXCIuay1pdGVtXCIpLGkuY2xvc2UobiksaS5fbW92ZUhvdmVyKGUsbiksbik6ZX0sX3RyaWdnZXJFdmVudDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0LnRyaWdnZXIoZS50eXBlLHt0eXBlOmUudHlwZSxpdGVtOmUuaXRlbX0pfSxfZm9jdXNIYW5kbGVyOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1lKGMuZXZlbnRUYXJnZXQodCkpLmNsb3Nlc3QoSik7c2V0VGltZW91dChmdW5jdGlvbigpe24uX21vdmVIb3ZlcihbXSxpKSxpLmNoaWxkcmVuKFwiLmstY29udGVudFwiKVswXSYmaS5wYXJlbnQoKS5jbG9zZXN0KFwiLmstaXRlbVwiKS5yZW1vdmVDbGFzcygkKX0sMjAwKX0sX2FuaW1hdGlvbnM6ZnVuY3Rpb24oZSl7ZSYmXCJhbmltYXRpb25cImluIGUmJiFlLmFuaW1hdGlvbiYmKGUuYW5pbWF0aW9uPXtvcGVuOntlZmZlY3RzOnt9fSxjbG9zZTp7aGlkZTohMCxlZmZlY3RzOnt9fX0pfX0pO2coY3Qse3JlbmRlckl0ZW06ZnVuY3Rpb24oZSl7ZT1nKHttZW51Ont9LGdyb3VwOnt9fSxlKTt2YXIgdD1zdC5lbXB0eSxuPWUuaXRlbTtyZXR1cm4gc3QuaXRlbShnKGUse2ltYWdlOm4uaW1hZ2VVcmw/c3QuaW1hZ2U6dCxzcHJpdGU6bi5zcHJpdGVDc3NDbGFzcz9zdC5zcHJpdGU6dCxpdGVtV3JhcHBlcjpzdC5pdGVtV3JhcHBlcixyZW5kZXJDb250ZW50OmN0LnJlbmRlckNvbnRlbnQsYXJyb3c6bi5pdGVtc3x8bi5jb250ZW50P3N0LmFycm93OnQsc3ViR3JvdXA6Y3QucmVuZGVyR3JvdXB9LGx0KSl9LHJlbmRlckdyb3VwOmZ1bmN0aW9uKGUpe3JldHVybiBzdC5ncm91cChnKHtyZW5kZXJJdGVtczpmdW5jdGlvbihlKXtmb3IodmFyIHQ9XCJcIixuPTAsaT1lLml0ZW1zLHI9aT9pLmxlbmd0aDowLG89Zyh7bGVuZ3RoOnJ9LGUuZ3JvdXApO3I+bjtuKyspdCs9Y3QucmVuZGVySXRlbShnKGUse2dyb3VwOm8saXRlbTpnKHtpbmRleDpufSxpW25dKX0pKTtyZXR1cm4gdH19LGUsbHQpKX0scmVuZGVyQ29udGVudDpmdW5jdGlvbihlKXtyZXR1cm4gc3QuY29udGVudChnKGUsbHQpKX19KSxsPWN0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXM7Y3QuZm4uaW5pdC5jYWxsKGksdCxuKSxpLnRhcmdldD1lKGkub3B0aW9ucy50YXJnZXQpLGkuX3BvcHVwKCksaS5fd2lyZSgpfSxvcHRpb25zOntuYW1lOlwiQ29udGV4dE1lbnVcIixmaWx0ZXI6bnVsbCxzaG93T246XCJjb250ZXh0bWVudVwiLG9yaWVudGF0aW9uOlwidmVydGljYWxcIixhbGlnblRvQW5jaG9yOiExLHRhcmdldDpcImJvZHlcIn0sZXZlbnRzOltDLEEsRixSLEldLHNldE9wdGlvbnM6ZnVuY3Rpb24odCl7dmFyIG49dGhpcztjdC5mbi5zZXRPcHRpb25zLmNhbGwobix0KSxuLnRhcmdldC5vZmYobi5zaG93T24rayxuLl9zaG93UHJveHkpLG4udXNlckV2ZW50cyYmbi51c2VyRXZlbnRzLmRlc3Ryb3koKSxuLnRhcmdldD1lKG4ub3B0aW9ucy50YXJnZXQpLHQub3JpZW50YXRpb24mJm4ucG9wdXAud3JhcHBlclswXSYmbi5wb3B1cC5lbGVtZW50LnVud3JhcCgpLG4uX3dpcmUoKSxjdC5mbi5zZXRPcHRpb25zLmNhbGwodGhpcyx0KX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS50YXJnZXQub2ZmKGUub3B0aW9ucy5zaG93T24rayksVy5vZmYoYy5zdXBwb3J0Lm1vdXNlZG93bitrLGUuX2Nsb3NlUHJveHkpLGUudXNlckV2ZW50cyYmZS51c2VyRXZlbnRzLmRlc3Ryb3koKSxjdC5mbi5kZXN0cm95LmNhbGwoZSl9LG9wZW46ZnVuY3Rpb24obixpKXt2YXIgbz10aGlzO3JldHVybiBuPWUobilbMF0scihvLmVsZW1lbnRbMF0sZShuKVswXSk/Y3QuZm4ub3Blbi5jYWxsKG8sbik6by5fdHJpZ2dlckV2ZW50KHtpdGVtOm8uZWxlbWVudCx0eXBlOkN9KT09PSExJiYoby5wb3B1cC52aXNpYmxlKCkmJm8ub3B0aW9ucy5maWx0ZXImJm8ucG9wdXAuY2xvc2UoITApLGkhPT10PyhvLnBvcHVwLndyYXBwZXIuaGlkZSgpLG8ucG9wdXAub3BlbihuLGkpKTooby5wb3B1cC5vcHRpb25zLmFuY2hvcj0obj9uOm8ucG9wdXAuYW5jaG9yKXx8by50YXJnZXQsby5wb3B1cC5vcGVuKCkpLFcub2ZmKG8ucG9wdXAuZG93bkV2ZW50LG8ucG9wdXAuX21vdXNlZG93blByb3h5KSxXLm9uKGMuc3VwcG9ydC5tb3VzZWRvd24rayxvLl9jbG9zZVByb3h5KSksb30sY2xvc2U6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3IodC5lbGVtZW50WzBdLGUoYXJndW1lbnRzWzBdKVswXSk/Y3QuZm4uY2xvc2UuY2FsbCh0LGFyZ3VtZW50c1swXSk6dC5wb3B1cC52aXNpYmxlKCkmJnQuX3RyaWdnZXJFdmVudCh7aXRlbTp0LmVsZW1lbnQsdHlwZTpBfSk9PT0hMSYmKHQucG9wdXAuY2xvc2UoKSxXLm9mZihjLnN1cHBvcnQubW91c2Vkb3duK2ssdC5fY2xvc2VQcm94eSksdC51bmJpbmQoSSx0Ll9jbG9zZVRpbWVvdXRQcm94eSkpfSxfc2hvd0hhbmRsZXI6ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLGk9dGhpcyxvPWkub3B0aW9ucztlLmV2ZW50JiYobj1lLmV2ZW50LG4ucGFnZVg9ZS54LmxvY2F0aW9uLG4ucGFnZVk9ZS55LmxvY2F0aW9uKSxyKGkuZWxlbWVudFswXSxlLnJlbGF0ZWRUYXJnZXR8fGUudGFyZ2V0KXx8KGkuX2V2ZW50T3JpZ2luPW4sbi5wcmV2ZW50RGVmYXVsdCgpLG4uc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksaS5lbGVtZW50LmZpbmQoXCIuXCIrJCkucmVtb3ZlQ2xhc3MoJCksKG8uZmlsdGVyJiZjLnN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yLmNhbGwobi5jdXJyZW50VGFyZ2V0LG8uZmlsdGVyKXx8IW8uZmlsdGVyKSYmKG8uYWxpZ25Ub0FuY2hvcj9pLm9wZW4obi5jdXJyZW50VGFyZ2V0KTooaS5wb3B1cC5vcHRpb25zLmFuY2hvcj1uLmN1cnJlbnRUYXJnZXQsaS5fdGFyZ2V0Q2hpbGQ/KHQ9aS50YXJnZXQub2Zmc2V0KCksaS5vcGVuKG4ucGFnZVgtdC5sZWZ0LG4ucGFnZVktdC50b3ApKTppLm9wZW4obi5wYWdlWCxuLnBhZ2VZKSkpKX0sX2Nsb3NlSGFuZGxlcjpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9ZSh0LnJlbGF0ZWRUYXJnZXR8fHQudGFyZ2V0KSxvPWkuY2xvc2VzdChuLnRhcmdldC5zZWxlY3RvcilbMF09PW4udGFyZ2V0WzBdLGE9aS5jbG9zZXN0KGV0KS5jaGlsZHJlbihYKSxzPXIobi5lbGVtZW50WzBdLGlbMF0pO24uX2V2ZW50T3JpZ2luPXQsIW4ucG9wdXAudmlzaWJsZSgpfHwoMz09PXQud2hpY2h8fCFvKSYmb3x8KCFuLm9wdGlvbnMuY2xvc2VPbkNsaWNrfHxofHwoTHx8TykmJnQub3JpZ2luYWxFdmVudC5wb2ludGVyVHlwZSBpbiBhdHx8YVswXXx8IXMpJiZzfHwocz8odGhpcy51bmJpbmQoSSx0aGlzLl9jbG9zZVRpbWVvdXRQcm94eSksbi5iaW5kKEksbi5fY2xvc2VUaW1lb3V0UHJveHkpKTpuLmNsb3NlKCkpXHJcbn0sX3dpcmU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLG49ZS50YXJnZXQ7ZS5fc2hvd1Byb3h5PW0oZS5fc2hvd0hhbmRsZXIsZSksZS5fY2xvc2VQcm94eT1tKGUuX2Nsb3NlSGFuZGxlcixlKSxlLl9jbG9zZVRpbWVvdXRQcm94eT1tKGUuY2xvc2UsZSksblswXSYmKGMuc3VwcG9ydC5tb2JpbGVPUyYmXCJjb250ZXh0bWVudVwiPT10LnNob3dPbj8oZS51c2VyRXZlbnRzPW5ldyBjLlVzZXJFdmVudHMobix7ZmlsdGVyOnQuZmlsdGVyLGFsbG93U2VsZWN0aW9uOiExfSksbi5vbih0LnNob3dPbitrLCExKSxlLnVzZXJFdmVudHMuYmluZChcImhvbGRcIixlLl9zaG93UHJveHkpKTp0LmZpbHRlcj9uLm9uKHQuc2hvd09uK2ssdC5maWx0ZXIsZS5fc2hvd1Byb3h5KTpuLm9uKHQuc2hvd09uK2ssZS5fc2hvd1Byb3h5KSl9LF90cmlnZ2VyRXZlbnQ6ZnVuY3Rpb24obil7dmFyIGk9dGhpcyxyPWUoaS5wb3B1cC5vcHRpb25zLmFuY2hvcilbMF0sbz1pLl9ldmVudE9yaWdpbjtyZXR1cm4gaS5fZXZlbnRPcmlnaW49dCxpLnRyaWdnZXIobi50eXBlLGcoe3R5cGU6bi50eXBlLGl0ZW06bi5pdGVtfHx0aGlzLmVsZW1lbnRbMF0sdGFyZ2V0OnJ9LG8/e2V2ZW50Om99Ont9KSl9LF9wb3B1cDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fdHJpZ2dlclByb3h5PW0oZS5fdHJpZ2dlckV2ZW50LGUpLGUucG9wdXA9ZS5lbGVtZW50LmFkZENsYXNzKFwiay1jb250ZXh0LW1lbnVcIikua2VuZG9Qb3B1cCh7YW5jaG9yOmUudGFyZ2V0fHxcImJvZHlcIixjb3B5QW5jaG9yU3R5bGVzOmUub3B0aW9ucy5jb3B5QW5jaG9yU3R5bGVzLGNvbGxpc2lvbjplLm9wdGlvbnMucG9wdXBDb2xsaXNpb258fFwiZml0XCIsYW5pbWF0aW9uOmUub3B0aW9ucy5hbmltYXRpb24sYWN0aXZhdGU6ZS5fdHJpZ2dlclByb3h5LGRlYWN0aXZhdGU6ZS5fdHJpZ2dlclByb3h5fSkuZGF0YShcImtlbmRvUG9wdXBcIiksZS5fdGFyZ2V0Q2hpbGQ9cihlLnRhcmdldFswXSxlLnBvcHVwLmVsZW1lbnRbMF0pfX0pLGQucGx1Z2luKGN0KSxkLnBsdWdpbihsKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKHQpe3JldHVybiBlLnRyaW0odCkucmVwbGFjZSgvJm5ic3A7L2dpLFwiXCIpfWZ1bmN0aW9uIGkoZSx0KXt2YXIgbixpLHIsbz17fTtmb3Iobj0wLGk9ZS5sZW5ndGg7aT5uO24rKylyPWVbbl0sb1tyW3RdXT1yO3JldHVybiBvfWZ1bmN0aW9uIHIoZSl7dmFyIHQsbj1bXTtmb3IodD0wO2UubGVuZ3RoPnQ7dCsrKWVbdF0uY29sdW1ucz9uPW4uY29uY2F0KHIoZVt0XS5jb2x1bW5zKSk6bi5wdXNoKGVbdF0pO3JldHVybiBufXZhciBvPXdpbmRvdy5rZW5kbyxhPW8udWkscz1lLnByb3h5LGw9ZS5leHRlbmQsYz1lLmdyZXAsZD1lLm1hcCx1PWUuaW5BcnJheSxoPVwiay1zdGF0ZS1zZWxlY3RlZFwiLHA9XCJhc2NcIixmPVwiZGVzY1wiLGc9XCJjaGFuZ2VcIixtPVwiaW5pdFwiLHY9XCJzZWxlY3RcIixfPVwia2VuZG9Qb3B1cFwiLHk9XCJrZW5kb0ZpbHRlck1lbnVcIix3PVwia2VuZG9NZW51XCIsYj1cIi5rZW5kb0NvbHVtbk1lbnVcIixrPWEuV2lkZ2V0LHg9ay5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxyPXRoaXM7ay5mbi5pbml0LmNhbGwocix0LG4pLHQ9ci5lbGVtZW50LG49ci5vcHRpb25zLHIub3duZXI9bi5vd25lcixyLmRhdGFTb3VyY2U9bi5kYXRhU291cmNlLHIuZmllbGQ9dC5hdHRyKG8uYXR0cihcImZpZWxkXCIpKSxyLnRpdGxlPXQuYXR0cihvLmF0dHIoXCJ0aXRsZVwiKSksaT10LmZpbmQoXCIuay1oZWFkZXItY29sdW1uLW1lbnVcIiksaVswXXx8KGk9dC5hZGRDbGFzcyhcImstd2l0aC1pY29uXCIpLnByZXBlbmQoJzxhIGNsYXNzPVwiay1oZWFkZXItY29sdW1uLW1lbnVcIiBocmVmPVwiI1wiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvd2hlYWQtc1wiLz48L2E+JykuZmluZChcIi5rLWhlYWRlci1jb2x1bW4tbWVudVwiKSksci5saW5rPWkuYXR0cihcInRhYmluZGV4XCIsLTEpLm9uKFwiY2xpY2tcIitiLHMoci5fY2xpY2sscikpLHIud3JhcHBlcj1lKCc8ZGl2IGNsYXNzPVwiay1jb2x1bW4tbWVudVwiLz4nKX0sX2luaXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UucGFuZT1lLm9wdGlvbnMucGFuZSxlLnBhbmUmJihlLl9pc01vYmlsZT0hMCksZS5faXNNb2JpbGU/ZS5fY3JlYXRlTW9iaWxlTWVudSgpOmUuX2NyZWF0ZU1lbnUoKSxlLl9hbmd1bGFySXRlbXMoXCJjb21waWxlXCIpLGUuX3NvcnQoKSxlLl9jb2x1bW5zKCksZS5fZmlsdGVyKCksZS5fbG9ja0NvbHVtbnMoKSxlLnRyaWdnZXIobSx7ZmllbGQ6ZS5maWVsZCxjb250YWluZXI6ZS53cmFwcGVyfSl9LGV2ZW50czpbbV0sb3B0aW9uczp7bmFtZTpcIkNvbHVtbk1lbnVcIixtZXNzYWdlczp7c29ydEFzY2VuZGluZzpcIlNvcnQgQXNjZW5kaW5nXCIsc29ydERlc2NlbmRpbmc6XCJTb3J0IERlc2NlbmRpbmdcIixmaWx0ZXI6XCJGaWx0ZXJcIixjb2x1bW5zOlwiQ29sdW1uc1wiLGRvbmU6XCJEb25lXCIsc2V0dGluZ3M6XCJDb2x1bW4gU2V0dGluZ3NcIixsb2NrOlwiTG9ja1wiLHVubG9jazpcIlVubG9ja1wifSxmaWx0ZXI6XCJcIixjb2x1bW5zOiEwLHNvcnRhYmxlOiEwLGZpbHRlcmFibGU6ITAsYW5pbWF0aW9uczp7bGVmdDpcInNsaWRlXCJ9fSxfY3JlYXRlTWVudTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm9wdGlvbnM7ZS53cmFwcGVyLmh0bWwoby50ZW1wbGF0ZShDKSh7bnM6by5ucyxtZXNzYWdlczp0Lm1lc3NhZ2VzLHNvcnRhYmxlOnQuc29ydGFibGUsZmlsdGVyYWJsZTp0LmZpbHRlcmFibGUsY29sdW1uczplLl9vd25lckNvbHVtbnMoKSxzaG93Q29sdW1uczp0LmNvbHVtbnMsbG9ja2VkQ29sdW1uczp0LmxvY2tlZENvbHVtbnN9KSksZS5wb3B1cD1lLndyYXBwZXJbX10oe2FuY2hvcjplLmxpbmssb3BlbjpzKGUuX29wZW4sZSksYWN0aXZhdGU6cyhlLl9hY3RpdmF0ZSxlKSxjbG9zZTpmdW5jdGlvbigpe2Uub3B0aW9ucy5jbG9zZUNhbGxiYWNrJiZlLm9wdGlvbnMuY2xvc2VDYWxsYmFjayhlLmVsZW1lbnQpfX0pLmRhdGEoXyksZS5tZW51PWUud3JhcHBlci5jaGlsZHJlbigpW3ddKHtvcmllbnRhdGlvbjpcInZlcnRpY2FsXCIsY2xvc2VPbkNsaWNrOiExfSkuZGF0YSh3KX0sX2NyZWF0ZU1vYmlsZU1lbnU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLG49by50ZW1wbGF0ZShTKSh7bnM6by5ucyxmaWVsZDplLmZpZWxkLHRpdGxlOmUudGl0bGV8fGUuZmllbGQsbWVzc2FnZXM6dC5tZXNzYWdlcyxzb3J0YWJsZTp0LnNvcnRhYmxlLGZpbHRlcmFibGU6dC5maWx0ZXJhYmxlLGNvbHVtbnM6ZS5fb3duZXJDb2x1bW5zKCksc2hvd0NvbHVtbnM6dC5jb2x1bW5zLGxvY2tlZENvbHVtbnM6dC5sb2NrZWRDb2x1bW5zfSk7ZS52aWV3PWUucGFuZS5hcHBlbmQobiksZS53cmFwcGVyPWUudmlldy5lbGVtZW50LmZpbmQoXCIuay1jb2x1bW4tbWVudVwiKSxlLm1lbnU9bmV3IFQoZS53cmFwcGVyLmNoaWxkcmVuKCkse3BhbmU6ZS5wYW5lfSksZS52aWV3LmVsZW1lbnQub24oXCJjbGlja1wiLFwiLmstZG9uZVwiLGZ1bmN0aW9uKHQpe2UuY2xvc2UoKSx0LnByZXZlbnREZWZhdWx0KCl9KSxlLm9wdGlvbnMubG9ja2VkQ29sdW1ucyYmZS52aWV3LmJpbmQoXCJzaG93XCIsZnVuY3Rpb24oKXtlLl91cGRhdGVMb2NrZWRDb2x1bW5zKCl9KX0sX2FuZ3VsYXJJdGVtczpmdW5jdGlvbih0KXt2YXIgbj10aGlzO24uYW5ndWxhcih0LGZ1bmN0aW9uKCl7dmFyIHQ9bi53cmFwcGVyLmZpbmQoXCIuay1jb2x1bW5zLWl0ZW0gaW5wdXRbXCIrby5hdHRyKFwiZmllbGRcIikrXCJdXCIpLm1hcChmdW5jdGlvbigpe3JldHVybiBlKHRoaXMpLmNsb3Nlc3QoXCJsaVwiKX0pLGk9ZChuLl9vd25lckNvbHVtbnMoKSxmdW5jdGlvbihlKXtyZXR1cm57Y29sdW1uOmUuX29yaWdpbmFsT2JqZWN0fX0pO3JldHVybntlbGVtZW50czp0LGRhdGE6aX19KX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fYW5ndWxhckl0ZW1zKFwiY2xlYW51cFwiKSxrLmZuLmRlc3Ryb3kuY2FsbChlKSxlLmZpbHRlck1lbnUmJmUuZmlsdGVyTWVudS5kZXN0cm95KCksZS5fcmVmcmVzaEhhbmRsZXImJmUuZGF0YVNvdXJjZS51bmJpbmQoZyxlLl9yZWZyZXNoSGFuZGxlciksZS5vcHRpb25zLmNvbHVtbnMmJmUub3duZXImJmUuX3VwZGF0ZUNvbHVtbnNNZW51SGFuZGxlciYmKGUub3duZXIudW5iaW5kKFwiY29sdW1uU2hvd1wiLGUuX3VwZGF0ZUNvbHVtbnNNZW51SGFuZGxlciksZS5vd25lci51bmJpbmQoXCJjb2x1bW5IaWRlXCIsZS5fdXBkYXRlQ29sdW1uc01lbnVIYW5kbGVyKSksZS5tZW51JiYoZS5tZW51LmVsZW1lbnQub2ZmKGIpLGUubWVudS5kZXN0cm95KCkpLGUud3JhcHBlci5vZmYoYiksZS5wb3B1cCYmZS5wb3B1cC5kZXN0cm95KCksZS52aWV3JiZlLnZpZXcucHVyZ2UoKSxlLmxpbmsub2ZmKGIpLGUub3duZXI9bnVsbCxlLndyYXBwZXI9bnVsbCxlLmVsZW1lbnQ9bnVsbH0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLm1lbnUuY2xvc2UoKSx0aGlzLnBvcHVwJiYodGhpcy5wb3B1cC5jbG9zZSgpLHRoaXMucG9wdXAuZWxlbWVudC5vZmYoXCJrZXlkb3duXCIrYikpfSxfY2xpY2s6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCk7dmFyIHQ9dGhpcy5vcHRpb25zO3QuZmlsdGVyJiZ0aGlzLmVsZW1lbnQuaXMoIXQuZmlsdGVyKXx8KHRoaXMucG9wdXB8fHRoaXMucGFuZXx8dGhpcy5faW5pdCgpLHRoaXMuX2lzTW9iaWxlP3RoaXMucGFuZS5uYXZpZ2F0ZSh0aGlzLnZpZXcsdGhpcy5vcHRpb25zLmFuaW1hdGlvbnMubGVmdCk6dGhpcy5wb3B1cC50b2dnbGUoKSl9LF9vcGVuOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztlKFwiLmstY29sdW1uLW1lbnVcIikubm90KHQud3JhcHBlcikuZWFjaChmdW5jdGlvbigpe2UodGhpcykuZGF0YShfKS5jbG9zZSgpfSksdC5wb3B1cC5lbGVtZW50Lm9uKFwia2V5ZG93blwiK2IsZnVuY3Rpb24oZSl7ZS5rZXlDb2RlPT1vLmtleXMuRVNDJiZ0LmNsb3NlKCl9KSx0Lm9wdGlvbnMubG9ja2VkQ29sdW1ucyYmdC5fdXBkYXRlTG9ja2VkQ29sdW1ucygpfSxfYWN0aXZhdGU6ZnVuY3Rpb24oKXt0aGlzLm1lbnUuZWxlbWVudC5mb2N1cygpfSxfb3duZXJDb2x1bW5zOmZ1bmN0aW9uKCl7dmFyIGU9cih0aGlzLm93bmVyLmNvbHVtbnMpLHQ9YyhlLGZ1bmN0aW9uKGUpe3ZhciB0PSEwLGk9bihlLnRpdGxlfHxcIlwiKTtyZXR1cm4oZS5tZW51PT09ITF8fCFlLmZpZWxkJiYhaS5sZW5ndGgpJiYodD0hMSksdH0pO3JldHVybiBkKHQsZnVuY3Rpb24odCl7cmV0dXJue29yaWdpbmFsRmllbGQ6dC5maWVsZCxmaWVsZDp0LmZpZWxkfHx0LnRpdGxlLHRpdGxlOnQudGl0bGV8fHQuZmllbGQsaGlkZGVuOnQuaGlkZGVuLGluZGV4OnUodCxlKSxsb2NrZWQ6ISF0LmxvY2tlZCxfb3JpZ2luYWxPYmplY3Q6dH19KX0sX3NvcnQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3Qub3B0aW9ucy5zb3J0YWJsZSYmKHQucmVmcmVzaCgpLHQuX3JlZnJlc2hIYW5kbGVyPXModC5yZWZyZXNoLHQpLHQuZGF0YVNvdXJjZS5iaW5kKGcsdC5fcmVmcmVzaEhhbmRsZXIpLHQubWVudS5iaW5kKHYsZnVuY3Rpb24obil7dmFyIGkscj1lKG4uaXRlbSk7ci5oYXNDbGFzcyhcImstc29ydC1hc2NcIik/aT1wOnIuaGFzQ2xhc3MoXCJrLXNvcnQtZGVzY1wiKSYmKGk9ZiksaSYmKHIucGFyZW50KCkuZmluZChcIi5rLXNvcnQtXCIrKGk9PXA/ZjpwKSkucmVtb3ZlQ2xhc3MoaCksdC5fc29ydERhdGFTb3VyY2UocixpKSx0LmNsb3NlKCkpfSkpfSxfc29ydERhdGFTb3VyY2U6ZnVuY3Rpb24oZSxuKXt2YXIgaSxyLG89dGhpcyxhPW8ub3B0aW9ucy5zb3J0YWJsZSxzPW51bGw9PT1hLmNvbXBhcmU/dDphLmNvbXBhcmUsbD1vLmRhdGFTb3VyY2UsYz1sLnNvcnQoKXx8W107aWYoZS5oYXNDbGFzcyhoKSYmYSYmYS5hbGxvd1Vuc29ydCE9PSExPyhlLnJlbW92ZUNsYXNzKGgpLG49dCk6ZS5hZGRDbGFzcyhoKSxhPT09ITB8fFwic2luZ2xlXCI9PT1hLm1vZGUpYz1be2ZpZWxkOm8uZmllbGQsZGlyOm4sY29tcGFyZTpzfV07ZWxzZXtmb3IoaT0wLHI9Yy5sZW5ndGg7cj5pO2krKylpZihjW2ldLmZpZWxkPT09by5maWVsZCl7Yy5zcGxpY2UoaSwxKTticmVha31jLnB1c2goe2ZpZWxkOm8uZmllbGQsZGlyOm4sY29tcGFyZTpzfSl9bC5zb3J0KGMpfSxfY29sdW1uczpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5vcHRpb25zLmNvbHVtbnMmJih0Ll91cGRhdGVDb2x1bW5zTWVudSgpLHQuX3VwZGF0ZUNvbHVtbnNNZW51SGFuZGxlcj1zKHQuX3VwZGF0ZUNvbHVtbnNNZW51LHQpLHQub3duZXIuYmluZChbXCJjb2x1bW5IaWRlXCIsXCJjb2x1bW5TaG93XCJdLHQuX3VwZGF0ZUNvbHVtbnNNZW51SGFuZGxlciksdC5tZW51LmJpbmQodixmdW5jdGlvbihuKXt2YXIgaSxhLHMsbD1lKG4uaXRlbSksZD1yKHQub3duZXIuY29sdW1ucyk7dC5faXNNb2JpbGUmJm4ucHJldmVudERlZmF1bHQoKSxsLnBhcmVudCgpLmNsb3Nlc3QoXCJsaS5rLWNvbHVtbnMtaXRlbVwiKVswXSYmKGk9bC5maW5kKFwiOmNoZWNrYm94XCIpLGkuYXR0cihcImRpc2FibGVkXCIpfHwocz1pLmF0dHIoby5hdHRyKFwiZmllbGRcIikpLGE9YyhkLGZ1bmN0aW9uKGUpe3JldHVybiBlLmZpZWxkPT1zfHxlLnRpdGxlPT1zfSlbMF0sYS5oaWRkZW49PT0hMD90Lm93bmVyLnNob3dDb2x1bW4oYSk6dC5vd25lci5oaWRlQ29sdW1uKGEpKSl9KSl9LF91cGRhdGVDb2x1bW5zTWVudTpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsYSxzPW8uYXR0cihcImZpZWxkXCIpLGw9by5hdHRyKFwibG9ja2VkXCIpLGg9Yyh0aGlzLl9vd25lckNvbHVtbnMoKSxmdW5jdGlvbihlKXtyZXR1cm4hZS5oaWRkZW59KSxwPWMoaCxmdW5jdGlvbihlKXtyZXR1cm4gZS5vcmlnaW5hbEZpZWxkfSksZj1jKHAsZnVuY3Rpb24oZSl7cmV0dXJuIGUubG9ja2VkPT09ITB9KS5sZW5ndGgsZz1jKHAsZnVuY3Rpb24oZSl7cmV0dXJuIGUubG9ja2VkIT09ITB9KS5sZW5ndGg7Zm9yKGg9ZChoLGZ1bmN0aW9uKGUpe3JldHVybiBlLmZpZWxkfSksYT10aGlzLndyYXBwZXIuZmluZChcIi5rLWNvbHVtbnMtaXRlbSBpbnB1dFtcIitzK1wiXVwiKS5wcm9wKFwiZGlzYWJsZWRcIiwhMSkucHJvcChcImNoZWNrZWRcIiwhMSksZT0wLHQ9YS5sZW5ndGg7dD5lO2UrKyluPWEuZXEoZSkscj1cInRydWVcIj09PW4uYXR0cihsKSxpPSExLHUobi5hdHRyKHMpLGgpPi0xJiYoaT0hMCxuLnByb3AoXCJjaGVja2VkXCIsaSkpLGkmJigxPT1mJiZyJiZuLnByb3AoXCJkaXNhYmxlZFwiLCEwKSwxIT1nfHxyfHxuLnByb3AoXCJkaXNhYmxlZFwiLCEwKSl9LF91cGRhdGVDb2x1bW5zTG9ja2VkU3RhdGU6ZnVuY3Rpb24oKXt2YXIgZSx0LG4scixhPW8uYXR0cihcImZpZWxkXCIpLHM9by5hdHRyKFwibG9ja2VkXCIpLGw9aSh0aGlzLl9vd25lckNvbHVtbnMoKSxcImZpZWxkXCIpLGM9dGhpcy53cmFwcGVyLmZpbmQoXCIuay1jb2x1bW5zLWl0ZW0gaW5wdXRbdHlwZT1jaGVja2JveF1cIik7Zm9yKGU9MCx0PWMubGVuZ3RoO3Q+ZTtlKyspbj1jLmVxKGUpLHI9bFtuLmF0dHIoYSldLHImJm4uYXR0cihzLHIubG9ja2VkKTt0aGlzLl91cGRhdGVDb2x1bW5zTWVudSgpfSxfZmlsdGVyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucztuLmZpbHRlcmFibGUhPT0hMSYmKHQuZmlsdGVyTWVudT10LndyYXBwZXIuZmluZChcIi5rLWZpbHRlcmFibGVcIilbeV0obCghMCx7fSx7YXBwZW5kVG9FbGVtZW50OiEwLGRhdGFTb3VyY2U6bi5kYXRhU291cmNlLHZhbHVlczpuLnZhbHVlcyxmaWVsZDp0LmZpZWxkfSxuLmZpbHRlcmFibGUpKS5kYXRhKHkpLHQuX2lzTW9iaWxlJiZ0Lm1lbnUuYmluZCh2LGZ1bmN0aW9uKG4pe3ZhciBpPWUobi5pdGVtKTtpLmhhc0NsYXNzKFwiay1maWx0ZXItaXRlbVwiKSYmdC5wYW5lLm5hdmlnYXRlKHQuZmlsdGVyTWVudS52aWV3LHQub3B0aW9ucy5hbmltYXRpb25zLmxlZnQpfSkpfSxfbG9ja0NvbHVtbnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QubWVudS5iaW5kKHYsZnVuY3Rpb24obil7dmFyIGk9ZShuLml0ZW0pO2kuaGFzQ2xhc3MoXCJrLWxvY2tcIik/KHQub3duZXIubG9ja0NvbHVtbih0LmZpZWxkKSx0LmNsb3NlKCkpOmkuaGFzQ2xhc3MoXCJrLXVubG9ja1wiKSYmKHQub3duZXIudW5sb2NrQ29sdW1uKHQuZmllbGQpLHQuY2xvc2UoKSl9KX0sX3VwZGF0ZUxvY2tlZENvbHVtbnM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyPXRoaXMuZmllbGQsbz10aGlzLm93bmVyLmNvbHVtbnMsYT1jKG8sZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmllbGQ9PXJ8fGUudGl0bGU9PXJ9KVswXTthJiYoZT1hLmxvY2tlZD09PSEwLHQ9YyhvLGZ1bmN0aW9uKHQpe3JldHVybiF0LmhpZGRlbiYmKHQubG9ja2VkJiZlfHwhdC5sb2NrZWQmJiFlKX0pLmxlbmd0aCxuPXRoaXMud3JhcHBlci5maW5kKFwiLmstbG9ja1wiKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIiksaT10aGlzLndyYXBwZXIuZmluZChcIi5rLXVubG9ja1wiKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIiksKGV8fDE9PXQpJiZuLmFkZENsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKSxlJiYxIT10fHxpLmFkZENsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKSx0aGlzLl91cGRhdGVDb2x1bW5zTG9ja2VkU3RhdGUoKSl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT10aGlzLHI9aS5vcHRpb25zLmRhdGFTb3VyY2Uuc29ydCgpfHxbXSxvPWkuZmllbGQ7Zm9yKGkud3JhcHBlci5maW5kKFwiLmstc29ydC1hc2MsIC5rLXNvcnQtZGVzY1wiKS5yZW1vdmVDbGFzcyhoKSx0PTAsbj1yLmxlbmd0aDtuPnQ7dCsrKWU9clt0XSxvPT1lLmZpZWxkJiZpLndyYXBwZXIuZmluZChcIi5rLXNvcnQtXCIrZS5kaXIpLmFkZENsYXNzKGgpfX0pLEM9Jzx1bD4jaWYoc29ydGFibGUpeyM8bGkgY2xhc3M9XCJrLWl0ZW0gay1zb3J0LWFzY1wiPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLXNwcml0ZSBrLWktc29ydC1hc2NcIj48L3NwYW4+JHttZXNzYWdlcy5zb3J0QXNjZW5kaW5nfTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImstaXRlbSBrLXNvcnQtZGVzY1wiPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLXNwcml0ZSBrLWktc29ydC1kZXNjXCI+PC9zcGFuPiR7bWVzc2FnZXMuc29ydERlc2NlbmRpbmd9PC9zcGFuPjwvbGk+I2lmKHNob3dDb2x1bW5zIHx8IGZpbHRlcmFibGUpeyM8bGkgY2xhc3M9XCJrLXNlcGFyYXRvclwiPjwvbGk+I30jI30jI2lmKHNob3dDb2x1bW5zKXsjPGxpIGNsYXNzPVwiay1pdGVtIGstY29sdW1ucy1pdGVtXCI+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstc3ByaXRlIGstaS1jb2x1bW5zXCI+PC9zcGFuPiR7bWVzc2FnZXMuY29sdW1uc308L3NwYW4+PHVsPiNmb3IgKHZhciBpZHggPSAwOyBpZHggPCBjb2x1bW5zLmxlbmd0aDsgaWR4KyspIHsjPGxpPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBkYXRhLSM9bnMjZmllbGQ9XCIjPWNvbHVtbnNbaWR4XS5maWVsZC5yZXBsYWNlKC9cIi9nLFwiJlxcXFwjMzQ7XCIpI1wiIGRhdGEtIz1ucyNpbmRleD1cIiM9Y29sdW1uc1tpZHhdLmluZGV4I1wiIGRhdGEtIz1ucyNsb2NrZWQ9XCIjPWNvbHVtbnNbaWR4XS5sb2NrZWQjXCIvPiM9Y29sdW1uc1tpZHhdLnRpdGxlIzwvbGk+I30jPC91bD48L2xpPiNpZihmaWx0ZXJhYmxlIHx8IGxvY2tlZENvbHVtbnMpeyM8bGkgY2xhc3M9XCJrLXNlcGFyYXRvclwiPjwvbGk+I30jI30jI2lmKGZpbHRlcmFibGUpeyM8bGkgY2xhc3M9XCJrLWl0ZW0gay1maWx0ZXItaXRlbVwiPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLXNwcml0ZSBrLWZpbHRlclwiPjwvc3Bhbj4ke21lc3NhZ2VzLmZpbHRlcn08L3NwYW4+PHVsPjxsaT48ZGl2IGNsYXNzPVwiay1maWx0ZXJhYmxlXCI+PC9kaXY+PC9saT48L3VsPjwvbGk+I2lmKGxvY2tlZENvbHVtbnMpeyM8bGkgY2xhc3M9XCJrLXNlcGFyYXRvclwiPjwvbGk+I30jI30jI2lmKGxvY2tlZENvbHVtbnMpeyM8bGkgY2xhc3M9XCJrLWl0ZW0gay1sb2NrXCI+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstc3ByaXRlIGstaS1sb2NrXCI+PC9zcGFuPiR7bWVzc2FnZXMubG9ja308L3NwYW4+PC9saT48bGkgY2xhc3M9XCJrLWl0ZW0gay11bmxvY2tcIj48c3BhbiBjbGFzcz1cImstbGlua1wiPjxzcGFuIGNsYXNzPVwiay1zcHJpdGUgay1pLXVubG9ja1wiPjwvc3Bhbj4ke21lc3NhZ2VzLnVubG9ja308L3NwYW4+PC9saT4jfSM8L3VsPicsUz0nPGRpdiBkYXRhLSM9bnMjcm9sZT1cInZpZXdcIiBkYXRhLSM9bnMjaW5pdC13aWRnZXRzPVwiZmFsc2VcIiBjbGFzcz1cImstZ3JpZC1jb2x1bW4tbWVudVwiPjxkaXYgZGF0YS0jPW5zI3JvbGU9XCJoZWFkZXJcIiBjbGFzcz1cImstaGVhZGVyXCI+JHttZXNzYWdlcy5zZXR0aW5nc308YnV0dG9uIGNsYXNzPVwiay1idXR0b24gay1kb25lXCI+Iz1tZXNzYWdlcy5kb25lIzwvYnV0dG9uPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWNvbHVtbi1tZW51IGstbW9iaWxlLWxpc3RcIj48dWw+PGxpPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+JHt0aXRsZX08L3NwYW4+PHVsPiNpZihzb3J0YWJsZSl7IzxsaSBjbGFzcz1cImstaXRlbSBrLXNvcnQtYXNjXCI+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstc3ByaXRlIGstaS1zb3J0LWFzY1wiPjwvc3Bhbj4ke21lc3NhZ2VzLnNvcnRBc2NlbmRpbmd9PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwiay1pdGVtIGstc29ydC1kZXNjXCI+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstc3ByaXRlIGstaS1zb3J0LWRlc2NcIj48L3NwYW4+JHttZXNzYWdlcy5zb3J0RGVzY2VuZGluZ308L3NwYW4+PC9saT4jfSMjaWYobG9ja2VkQ29sdW1ucyl7IzxsaSBjbGFzcz1cImstaXRlbSBrLWxvY2tcIj48c3BhbiBjbGFzcz1cImstbGlua1wiPjxzcGFuIGNsYXNzPVwiay1zcHJpdGUgay1pLWxvY2tcIj48L3NwYW4+JHttZXNzYWdlcy5sb2NrfTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImstaXRlbSBrLXVubG9ja1wiPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLXNwcml0ZSBrLWktdW5sb2NrXCI+PC9zcGFuPiR7bWVzc2FnZXMudW5sb2NrfTwvc3Bhbj48L2xpPiN9IyNpZihmaWx0ZXJhYmxlKXsjPGxpIGNsYXNzPVwiay1pdGVtIGstZmlsdGVyLWl0ZW1cIj48c3BhbiBjbGFzcz1cImstbGluayBrLWZpbHRlcmFibGVcIj48c3BhbiBjbGFzcz1cImstc3ByaXRlIGstZmlsdGVyXCI+PC9zcGFuPiR7bWVzc2FnZXMuZmlsdGVyfTwvc3Bhbj48L2xpPiN9IzwvdWw+PC9saT4jaWYoc2hvd0NvbHVtbnMpeyM8bGkgY2xhc3M9XCJrLWNvbHVtbnMtaXRlbVwiPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+JHttZXNzYWdlcy5jb2x1bW5zfTwvc3Bhbj48dWw+I2ZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGNvbHVtbnMubGVuZ3RoOyBpZHgrKykgeyM8bGkgY2xhc3M9XCJrLWl0ZW1cIj48bGFiZWwgY2xhc3M9XCJrLWxhYmVsXCI+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNsYXNzPVwiay1jaGVja1wiIGRhdGEtIz1ucyNmaWVsZD1cIiM9Y29sdW1uc1tpZHhdLmZpZWxkLnJlcGxhY2UoL1wiL2csXCImXFxcXCMzNDtcIikjXCIgZGF0YS0jPW5zI2luZGV4PVwiIz1jb2x1bW5zW2lkeF0uaW5kZXgjXCIgZGF0YS0jPW5zI2xvY2tlZD1cIiM9Y29sdW1uc1tpZHhdLmxvY2tlZCNcIi8+Iz1jb2x1bW5zW2lkeF0udGl0bGUjPC9sYWJlbD48L2xpPiN9IzwvdWw+PC9saT4jfSM8L3VsPjwvZGl2PjwvZGl2PicsVD1rLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe2suZm4uaW5pdC5jYWxsKHRoaXMsZSx0KSx0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiK2IsXCJsaTpub3QoLmstc2VwYXJhdG9yKTpub3QoLmstc3RhdGUtZGlzYWJsZWQpXCIsXCJfY2xpY2tcIil9LGV2ZW50czpbdl0sX2NsaWNrOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0aGlzLnRyaWdnZXIodix7aXRlbTplLmN1cnJlbnRUYXJnZXR9KX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMucGFuZS5uYXZpZ2F0ZShcIlwiKX0sZGVzdHJveTpmdW5jdGlvbigpe2suZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuZWxlbWVudC5vZmYoYil9fSk7YS5wbHVnaW4oeCl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG49d2luZG93LmtlbmRvLGk9bi51aSxyPWkuV2lkZ2V0LG89XCJkaXJcIixhPVwiYXNjXCIscz1cInNpbmdsZVwiLGw9XCJmaWVsZFwiLGM9XCJkZXNjXCIsZD1cIi5rZW5kb0NvbHVtblNvcnRlclwiLHU9XCIuay1saW5rXCIsaD1cImFyaWEtc29ydFwiLHA9ZS5wcm94eSxmPXIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzO3IuZm4uaW5pdC5jYWxsKGksZSx0KSxpLl9yZWZyZXNoSGFuZGxlcj1wKGkucmVmcmVzaCxpKSxpLmRhdGFTb3VyY2U9aS5vcHRpb25zLmRhdGFTb3VyY2UuYmluZChcImNoYW5nZVwiLGkuX3JlZnJlc2hIYW5kbGVyKSxuPWkuZWxlbWVudC5maW5kKHUpLG5bMF18fChuPWkuZWxlbWVudC53cmFwSW5uZXIoJzxhIGNsYXNzPVwiay1saW5rXCIgaHJlZj1cIiNcIi8+JykuZmluZCh1KSksaS5saW5rPW4saS5lbGVtZW50Lm9uKFwiY2xpY2tcIitkLHAoaS5fY2xpY2ssaSkpfSxvcHRpb25zOntuYW1lOlwiQ29sdW1uU29ydGVyXCIsbW9kZTpzLGFsbG93VW5zb3J0OiEwLGNvbXBhcmU6bnVsbCxmaWx0ZXI6XCJcIn0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ci5mbi5kZXN0cm95LmNhbGwoZSksZS5lbGVtZW50Lm9mZihkKSxlLmRhdGFTb3VyY2UudW5iaW5kKFwiY2hhbmdlXCIsZS5fcmVmcmVzaEhhbmRsZXIpLGUuX3JlZnJlc2hIYW5kbGVyPWUuZWxlbWVudD1lLmxpbms9ZS5kYXRhU291cmNlPW51bGx9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgdCxpLHIscyxkPXRoaXMsdT1kLmRhdGFTb3VyY2Uuc29ydCgpfHxbXSxwPWQuZWxlbWVudCxmPXAuYXR0cihuLmF0dHIobCkpO2ZvcihwLnJlbW92ZUF0dHIobi5hdHRyKG8pKSxwLnJlbW92ZUF0dHIoaCksdD0wLGk9dS5sZW5ndGg7aT50O3QrKylyPXVbdF0sZj09ci5maWVsZCYmcC5hdHRyKG4uYXR0cihvKSxyLmRpcik7cz1wLmF0dHIobi5hdHRyKG8pKSxwLmZpbmQoXCIuay1pLWFycm93LW4sLmstaS1hcnJvdy1zXCIpLnJlbW92ZSgpLHM9PT1hPyhlKCc8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctblwiIC8+JykuYXBwZW5kVG8oZC5saW5rKSxwLmF0dHIoaCxcImFzY2VuZGluZ1wiKSk6cz09PWMmJihlKCc8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctc1wiIC8+JykuYXBwZW5kVG8oZC5saW5rKSxwLmF0dHIoaCxcImRlc2NlbmRpbmdcIikpfSxfY2xpY2s6ZnVuY3Rpb24oZSl7dmFyIGkscixkPXRoaXMsdT1kLmVsZW1lbnQsaD11LmF0dHIobi5hdHRyKGwpKSxwPXUuYXR0cihuLmF0dHIobykpLGY9ZC5vcHRpb25zLGc9bnVsbD09PWQub3B0aW9ucy5jb21wYXJlP3Q6ZC5vcHRpb25zLmNvbXBhcmUsbT1kLmRhdGFTb3VyY2Uuc29ydCgpfHxbXTtpZihlLnByZXZlbnREZWZhdWx0KCksIWYuZmlsdGVyfHx1LmlzKGYuZmlsdGVyKSl7aWYocD1wPT09YT9jOnA9PT1jJiZmLmFsbG93VW5zb3J0P3Q6YSxmLm1vZGU9PT1zKW09W3tmaWVsZDpoLGRpcjpwLGNvbXBhcmU6Z31dO2Vsc2UgaWYoXCJtdWx0aXBsZVwiPT09Zi5tb2RlKXtmb3IoaT0wLHI9bS5sZW5ndGg7cj5pO2krKylpZihtW2ldLmZpZWxkPT09aCl7bS5zcGxpY2UoaSwxKTticmVha31tLnB1c2goe2ZpZWxkOmgsZGlyOnAsY29tcGFyZTpnfSl9dGhpcy5kYXRhU291cmNlLnNvcnQobSl9fX0pO2kucGx1Z2luKGYpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4odCl7cmV0dXJuIHQ9bnVsbCE9dD90OlwiXCIsdC50eXBlfHxlLnR5cGUodCl8fFwic3RyaW5nXCJ9ZnVuY3Rpb24gaSh0KXt0LmZpbmQoXCI6aW5wdXQ6bm90KDpidXR0b24sIFtcIitzLmF0dHIoXCJyb2xlXCIpK1wiPXVwbG9hZF0sIFtcIitzLmF0dHIoXCJza2lwXCIpK1wiXSwgW3R5cGU9ZmlsZV0pLCBzZWxlY3RcIikuZWFjaChmdW5jdGlvbigpe3ZhciB0PXMuYXR0cihcImJpbmRcIiksbj10aGlzLmdldEF0dHJpYnV0ZSh0KXx8XCJcIixpPVwiY2hlY2tib3hcIj09PXRoaXMudHlwZXx8XCJyYWRpb1wiPT09dGhpcy50eXBlP1wiY2hlY2tlZDpcIjpcInZhbHVlOlwiLHI9dGhpcy5uYW1lOy0xPT09bi5pbmRleE9mKGkpJiZyJiYobis9KG4ubGVuZ3RoP1wiLFwiOlwiXCIpK2krcixlKHRoaXMpLmF0dHIodCxuKSl9KX1mdW5jdGlvbiByKGUpe3ZhciB0LGkscj0oZS5tb2RlbC5maWVsZHN8fGUubW9kZWwpW2UuZmllbGRdLG89bihyKSxhPXI/ci52YWxpZGF0aW9uOnt9LGw9cy5hdHRyKFwidHlwZVwiKSxjPXMuYXR0cihcImJpbmRcIiksZD17bmFtZTplLmZpZWxkfTtmb3IodCBpbiBhKWk9YVt0XSxmKHQsXyk+PTA/ZFtsXT10OmgoaSl8fChkW3RdPXAoaSk/aS52YWx1ZXx8dDppKSxkW3MuYXR0cih0K1wiLW1zZ1wiKV09aS5tZXNzYWdlO3JldHVybiBmKG8sXyk+PTAmJihkW2xdPW8pLGRbY109KFwiYm9vbGVhblwiPT09bz9cImNoZWNrZWQ6XCI6XCJ2YWx1ZTpcIikrZS5maWVsZCxkfWZ1bmN0aW9uIG8oZSl7dmFyIHQsbixpLHIsbyxhO2lmKGUmJmUubGVuZ3RoKWZvcihhPVtdLHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspaT1lW3RdLG89aS50ZXh0fHxpLnZhbHVlfHxpLHI9bnVsbD09aS52YWx1ZT9pLnRleHR8fGk6aS52YWx1ZSxhW3RdPXt0ZXh0Om8sdmFsdWU6cn07cmV0dXJuIGF9ZnVuY3Rpb24gYShlLHQpe3ZhciBuLGkscj1lP2UudmFsaWRhdGlvbnx8e306e307Zm9yKG4gaW4gcilpPXJbbl0scChpKSYmaS52YWx1ZSYmKGk9aS52YWx1ZSksaChpKSYmKHRbbl09aSl9dmFyIHM9d2luZG93LmtlbmRvLGw9cy51aSxjPWwuV2lkZ2V0LGQ9ZS5leHRlbmQsdT1zLnN1cHBvcnQuYnJvd3Nlci5tc2llJiY5PnMuc3VwcG9ydC5icm93c2VyLnZlcnNpb24saD1zLmlzRnVuY3Rpb24scD1lLmlzUGxhaW5PYmplY3QsZj1lLmluQXJyYXksZz0vKFwifFxcJXwnfFxcW3xcXF18XFwkfFxcLnxcXCx8XFw6fFxcO3xcXCt8XFwqfFxcJnxcXCF8XFwjfFxcKHxcXCl8PHw+fFxcPXxcXD98XFxAfFxcXnxcXHt8XFx9fFxcfnxcXC98XFx8fGApL2csbT0nPGRpdiBjbGFzcz1cImstd2lkZ2V0IGstdG9vbHRpcCBrLXRvb2x0aXAtdmFsaWRhdGlvblwiIHN0eWxlPVwibWFyZ2luOjAuNWVtXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay13YXJuaW5nXCI+IDwvc3Bhbj4jPW1lc3NhZ2UjPGRpdiBjbGFzcz1cImstY2FsbG91dCBrLWNhbGxvdXQtblwiPjwvZGl2PjwvZGl2Picsdj1cImNoYW5nZVwiLF89W1widXJsXCIsXCJlbWFpbFwiLFwibnVtYmVyXCIsXCJkYXRlXCIsXCJib29sZWFuXCJdLHk9e251bWJlcjpmdW5jdGlvbih0LG4pe3ZhciBpPXIobik7ZSgnPGlucHV0IHR5cGU9XCJ0ZXh0XCIvPicpLmF0dHIoaSkuYXBwZW5kVG8odCkua2VuZG9OdW1lcmljVGV4dEJveCh7Zm9ybWF0Om4uZm9ybWF0fSksZShcIjxzcGFuIFwiK3MuYXR0cihcImZvclwiKSsnPVwiJytuLmZpZWxkKydcIiBjbGFzcz1cImstaW52YWxpZC1tc2dcIi8+JykuaGlkZSgpLmFwcGVuZFRvKHQpfSxkYXRlOmZ1bmN0aW9uKHQsbil7dmFyIGk9cihuKSxvPW4uZm9ybWF0O28mJihvPXMuX2V4dHJhY3RGb3JtYXQobykpLGlbcy5hdHRyKFwiZm9ybWF0XCIpXT1vLGUoJzxpbnB1dCB0eXBlPVwidGV4dFwiLz4nKS5hdHRyKGkpLmFwcGVuZFRvKHQpLmtlbmRvRGF0ZVBpY2tlcih7Zm9ybWF0Om4uZm9ybWF0fSksZShcIjxzcGFuIFwiK3MuYXR0cihcImZvclwiKSsnPVwiJytuLmZpZWxkKydcIiBjbGFzcz1cImstaW52YWxpZC1tc2dcIi8+JykuaGlkZSgpLmFwcGVuZFRvKHQpfSxzdHJpbmc6ZnVuY3Rpb24odCxuKXt2YXIgaT1yKG4pO2UoJzxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiay1pbnB1dCBrLXRleHRib3hcIi8+JykuYXR0cihpKS5hcHBlbmRUbyh0KX0sXCJib29sZWFuXCI6ZnVuY3Rpb24odCxuKXt2YXIgaT1yKG4pO2UoJzxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiAvPicpLmF0dHIoaSkuYXBwZW5kVG8odCl9LHZhbHVlczpmdW5jdGlvbih0LG4pe3ZhciBpPXIobik7ZShcIjxzZWxlY3QgXCIrcy5hdHRyKFwidGV4dC1maWVsZFwiKSsnPVwidGV4dFwiJytzLmF0dHIoXCJ2YWx1ZS1maWVsZFwiKSsnPVwidmFsdWVcIicrcy5hdHRyKFwic291cmNlXCIpK1wiPSdcIitzLnN0cmluZ2lmeShvKG4udmFsdWVzKSkucmVwbGFjZSgvXFwnL2csXCImYXBvcztcIikrXCInXCIrcy5hdHRyKFwicm9sZVwiKSsnPVwiZHJvcGRvd25saXN0XCIvPicpLmF0dHIoaSkuYXBwZW5kVG8odCksZShcIjxzcGFuIFwiK3MuYXR0cihcImZvclwiKSsnPVwiJytuLmZpZWxkKydcIiBjbGFzcz1cImstaW52YWxpZC1tc2dcIi8+JykuaGlkZSgpLmFwcGVuZFRvKHQpfX0sdz1jLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXM7bi50YXJnZXQmJihuLiRhbmd1bGFyPW4udGFyZ2V0Lm9wdGlvbnMuJGFuZ3VsYXIpLGMuZm4uaW5pdC5jYWxsKGksdCxuKSxpLl92YWxpZGF0ZVByb3h5PWUucHJveHkoaS5fdmFsaWRhdGUsaSksaS5yZWZyZXNoKCl9LGV2ZW50czpbdl0sb3B0aW9uczp7bmFtZTpcIkVkaXRhYmxlXCIsZWRpdG9yczp5LGNsZWFyQ29udGFpbmVyOiEwLGVycm9yVGVtcGxhdGU6bX0sZWRpdG9yOmZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcyxyPWkub3B0aW9ucy5lZGl0b3JzLG89cChlKSxhPW8/ZS5maWVsZDplLGw9aS5vcHRpb25zLm1vZGVsfHx7fSxjPW8mJmUudmFsdWVzLHU9Yz9cInZhbHVlc1wiOm4odCksaD1vJiZlLmVkaXRvcixmPWg/ZS5lZGl0b3I6clt1XSxtPWkuZWxlbWVudC5maW5kKFwiW1wiK3MuYXR0cihcImNvbnRhaW5lci1mb3JcIikrXCI9XCIrYS5yZXBsYWNlKGcsXCJcXFxcJDFcIikrXCJdXCIpO2Y9Zj9mOnIuc3RyaW5nLGgmJlwic3RyaW5nXCI9PXR5cGVvZiBlLmVkaXRvciYmKGY9ZnVuY3Rpb24odCl7dC5hcHBlbmQoZS5lZGl0b3IpfSksbT1tLmxlbmd0aD9tOmkuZWxlbWVudCxmKG0sZCghMCx7fSxvP2U6e2ZpZWxkOmF9LHttb2RlbDpsfSkpfSxfdmFsaWRhdGU6ZnVuY3Rpb24odCl7dmFyIG4saT10aGlzLHI9dC52YWx1ZSxvPWkuX3ZhbGlkYXRpb25FdmVudEluUHJvZ3Jlc3MsYT17fSxsPXMuYXR0cihcImJpbmRcIiksYz10LmZpZWxkLnJlcGxhY2UoZyxcIlxcXFwkMVwiKSxkPVwiY2hlY2tlZDpcIitjLHU9XCJ2YWx1ZTpcIitjO2FbdC5maWVsZF09dC52YWx1ZSxuPWUoXCI6aW5wdXRbXCIrbCsnKj1cIicrdSsnXCJdLDppbnB1dFsnK2wrJyo9XCInK2QrJ1wiXScsaS5lbGVtZW50KS5maWx0ZXIoXCJbXCIrcy5hdHRyKFwidmFsaWRhdGVcIikrXCIhPSdmYWxzZSddXCIpLG4ubGVuZ3RoPjEmJihuPW4uZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKSxuPXQuYXR0cihsKS5zcGxpdChcIixcIiksaT1mKHUsbik+PTB8fGYoZCxuKT49MDtyZXR1cm4gaSYmKCF0LmlzKFwiOnJhZGlvXCIpfHx0LnZhbCgpPT1yKX0pKTt0cnl7aS5fdmFsaWRhdGlvbkV2ZW50SW5Qcm9ncmVzcz0hMCwoIWkudmFsaWRhdGFibGUudmFsaWRhdGVJbnB1dChuKXx8IW8mJmkudHJpZ2dlcih2LHt2YWx1ZXM6YX0pKSYmdC5wcmV2ZW50RGVmYXVsdCgpfWZpbmFsbHl7aS5fdmFsaWRhdGlvbkV2ZW50SW5Qcm9ncmVzcz0hMX19LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbGlkYXRhYmxlLnZhbGlkYXRlKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuYW5ndWxhcihcImNsZWFudXBcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czplLmVsZW1lbnR9fSksYy5mbi5kZXN0cm95LmNhbGwoZSksZS5vcHRpb25zLm1vZGVsLnVuYmluZChcInNldFwiLGUuX3ZhbGlkYXRlUHJveHkpLHMudW5iaW5kKGUuZWxlbWVudCksZS52YWxpZGF0YWJsZSYmZS52YWxpZGF0YWJsZS5kZXN0cm95KCkscy5kZXN0cm95KGUuZWxlbWVudCksZS5lbGVtZW50LnJlbW92ZURhdGEoXCJrZW5kb1ZhbGlkYXRvclwiKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBuLHIsbyxsLGMsZCxoLGYsZz10aGlzLG09Zy5vcHRpb25zLmZpZWxkc3x8W10sdj1nLm9wdGlvbnMuY2xlYXJDb250YWluZXI/Zy5lbGVtZW50LmVtcHR5KCk6Zy5lbGVtZW50LF89Zy5vcHRpb25zLm1vZGVsfHx7fSx5PXt9O2ZvcihlLmlzQXJyYXkobSl8fChtPVttXSksbj0wLHI9bS5sZW5ndGg7cj5uO24rKylvPW1bbl0sbD1wKG8pLGM9bD9vLmZpZWxkOm8sZD0oXy5maWVsZHN8fF8pW2NdLGEoZCx5KSxnLmVkaXRvcihvLGQpO2lmKGcub3B0aW9ucy50YXJnZXQmJmcuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czp2LGRhdGE6W3tkYXRhSXRlbTpffV19fSksIXIpe2g9Xy5maWVsZHN8fF87Zm9yKGMgaW4gaClhKGhbY10seSl9aSh2KSxnLnZhbGlkYXRhYmxlJiZnLnZhbGlkYXRhYmxlLmRlc3Ryb3koKSxzLmJpbmQodixnLm9wdGlvbnMubW9kZWwpLGcub3B0aW9ucy5tb2RlbC51bmJpbmQoXCJzZXRcIixnLl92YWxpZGF0ZVByb3h5KSxnLm9wdGlvbnMubW9kZWwuYmluZChcInNldFwiLGcuX3ZhbGlkYXRlUHJveHkpLGcudmFsaWRhdGFibGU9bmV3IHMudWkuVmFsaWRhdG9yKHYse3ZhbGlkYXRlT25CbHVyOiExLGVycm9yVGVtcGxhdGU6Zy5vcHRpb25zLmVycm9yVGVtcGxhdGV8fHQscnVsZXM6eX0pLGY9di5maW5kKFwiOmtlbmRvRm9jdXNhYmxlXCIpLmVxKDApLmZvY3VzKCksdSYmZi5mb2N1cygpfX0pO2wucGx1Z2luKHcpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7cmV0dXJuIHQhPT1lfWZ1bmN0aW9uIGkoZSx0LG4pe3JldHVybiBNYXRoLm1heChNYXRoLm1pbihwYXJzZUludChlLDEwKSwxLzA9PT1uP246cGFyc2VJbnQobiwxMCkpLHBhcnNlSW50KHQsMTApKX1mdW5jdGlvbiByKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG49dGhpcyxpPW4ud3JhcHBlcixyPWlbMF0uc3R5bGUsbz1uLm9wdGlvbnM7aWYoIW8uaXNNYXhpbWl6ZWQmJiFvLmlzTWluaW1pemVkKXJldHVybiBuLnJlc3RvcmVPcHRpb25zPXt3aWR0aDpyLndpZHRoLGhlaWdodDpyLmhlaWdodH0saS5jaGlsZHJlbih4KS5oaWRlKCkuZW5kKCkuY2hpbGRyZW4oYikuZmluZChHKS5wYXJlbnQoKS5oaWRlKCkuZXEoMCkuYmVmb3JlKFouYWN0aW9uKHtuYW1lOlwiUmVzdG9yZVwifSkpLHQuY2FsbChuKSxcIm1heGltaXplXCI9PWU/bi53cmFwcGVyLmNoaWxkcmVuKGIpLmZpbmQoWSkucGFyZW50KCkuaGlkZSgpOm4ud3JhcHBlci5jaGlsZHJlbihiKS5maW5kKFkpLnBhcmVudCgpLnNob3coKSxufX1mdW5jdGlvbiBvKCl7cmV0dXJuIXRoaXMudHlwZXx8dGhpcy50eXBlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcInNjcmlwdFwiKT49MH1mdW5jdGlvbiBhKGUpe3ZhciB0PXRoaXM7dC5vd25lcj1lLHQuX2RyYWdnYWJsZT1uZXcgZChlLndyYXBwZXIse2ZpbHRlcjpcIj5cIit4LGdyb3VwOmUud3JhcHBlci5pZCtcIi1yZXNpemluZ1wiLGRyYWdzdGFydDpwKHQuZHJhZ3N0YXJ0LHQpLGRyYWc6cCh0LmRyYWcsdCksZHJhZ2VuZDpwKHQuZHJhZ2VuZCx0KX0pLHQuX2RyYWdnYWJsZS51c2VyRXZlbnRzLmJpbmQoXCJwcmVzc1wiLHAodC5hZGRPdmVybGF5LHQpKSx0Ll9kcmFnZ2FibGUudXNlckV2ZW50cy5iaW5kKFwicmVsZWFzZVwiLHAodC5yZW1vdmVPdmVybGF5LHQpKX1mdW5jdGlvbiBzKGUsdCl7dmFyIG49dGhpcztuLm93bmVyPWUsbi5fZHJhZ2dhYmxlPW5ldyBkKGUud3JhcHBlcix7ZmlsdGVyOnQsZ3JvdXA6ZS53cmFwcGVyLmlkK1wiLW1vdmluZ1wiLGRyYWdzdGFydDpwKG4uZHJhZ3N0YXJ0LG4pLGRyYWc6cChuLmRyYWcsbiksZHJhZ2VuZDpwKG4uZHJhZ2VuZCxuKSxkcmFnY2FuY2VsOnAobi5kcmFnY2FuY2VsLG4pfSksbi5fZHJhZ2dhYmxlLnVzZXJFdmVudHMuc3RvcFByb3BhZ2F0aW9uPSExfXZhciBsPXdpbmRvdy5rZW5kbyxjPWwudWkuV2lkZ2V0LGQ9bC51aS5EcmFnZ2FibGUsdT1lLmlzUGxhaW5PYmplY3QsaD1sLl9hY3RpdmVFbGVtZW50LHA9ZS5wcm94eSxmPWUuZXh0ZW5kLGc9ZS5lYWNoLG09bC50ZW1wbGF0ZSx2PVwiYm9keVwiLF89XCIua2VuZG9XaW5kb3dcIix5PVwiLmstd2luZG93XCIsdz1cIi5rLXdpbmRvdy10aXRsZVwiLGI9dytcImJhclwiLGs9XCIuay13aW5kb3ctY29udGVudFwiLHg9XCIuay1yZXNpemUtaGFuZGxlXCIsQz1cIi5rLW92ZXJsYXlcIixTPVwiay1jb250ZW50LWZyYW1lXCIsVD1cImstbG9hZGluZ1wiLEQ9XCJrLXN0YXRlLWhvdmVyXCIsQT1cImstc3RhdGUtZm9jdXNlZFwiLEU9XCJrLXdpbmRvdy1tYXhpbWl6ZWRcIixNPVwiOnZpc2libGVcIixQPVwiaGlkZGVuXCIsST1cImN1cnNvclwiLHo9XCJvcGVuXCIsRj1cImFjdGl2YXRlXCIsUj1cImRlYWN0aXZhdGVcIixCPVwiY2xvc2VcIixMPVwicmVmcmVzaFwiLE89XCJyZXNpemVcIixIPVwicmVzaXplRW5kXCIsTj1cImRyYWdzdGFydFwiLFY9XCJkcmFnZW5kXCIsVT1cImVycm9yXCIsVz1cIm92ZXJmbG93XCIsaj1cInpJbmRleFwiLEc9XCIuay13aW5kb3ctYWN0aW9ucyAuay1pLW1pbmltaXplLC5rLXdpbmRvdy1hY3Rpb25zIC5rLWktbWF4aW1pemVcIixxPVwiLmstaS1waW5cIiwkPVwiLmstaS11bnBpblwiLFk9cStcIixcIiskLEs9XCIuay13aW5kb3ctdGl0bGViYXIgLmstd2luZG93LWFjdGlvblwiLFE9XCIuay13aW5kb3ctdGl0bGViYXIgLmstaS1yZWZyZXNoXCIsWD1sLmlzTG9jYWxVcmwsSj1jLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihpLHIpe3ZhciBhLHMsZCxoLGYsZyxtLHY9dGhpcyx4PXt9LEM9ITEsUz1yJiZyLmFjdGlvbnMmJiFyLmFjdGlvbnMubGVuZ3RoO2MuZm4uaW5pdC5jYWxsKHYsaSxyKSxyPXYub3B0aW9ucyxoPXIucG9zaXRpb24saT12LmVsZW1lbnQsZj1yLmNvbnRlbnQsUyYmKHIuYWN0aW9ucz1bXSksdi5hcHBlbmRUbz1lKHIuYXBwZW5kVG8pLHYuX2FuaW1hdGlvbnMoKSxmJiYhdShmKSYmKGY9ci5jb250ZW50PXt1cmw6Zn0pLGkuZmluZChcInNjcmlwdFwiKS5maWx0ZXIobykucmVtb3ZlKCksaS5wYXJlbnQoKS5pcyh2LmFwcGVuZFRvKXx8aC50b3AhPT10JiZoLmxlZnQhPT10fHwoaS5pcyhNKT8oeD1pLm9mZnNldCgpLEM9ITApOihzPWkuY3NzKFwidmlzaWJpbGl0eVwiKSxkPWkuY3NzKFwiZGlzcGxheVwiKSxpLmNzcyh7dmlzaWJpbGl0eTpQLGRpc3BsYXk6XCJcIn0pLHg9aS5vZmZzZXQoKSxpLmNzcyh7dmlzaWJpbGl0eTpzLGRpc3BsYXk6ZH0pKSxoLnRvcD09PXQmJihoLnRvcD14LnRvcCksaC5sZWZ0PT09dCYmKGgubGVmdD14LmxlZnQpKSxuKHIudmlzaWJsZSkmJm51bGwhPT1yLnZpc2libGV8fChyLnZpc2libGU9aS5pcyhNKSksYT12LndyYXBwZXI9aS5jbG9zZXN0KHkpLGkuaXMoXCIuay1jb250ZW50XCIpJiZhWzBdfHwoaS5hZGRDbGFzcyhcImstd2luZG93LWNvbnRlbnQgay1jb250ZW50XCIpLHYuX2NyZWF0ZVdpbmRvdyhpLHIpLGE9di53cmFwcGVyPWkuY2xvc2VzdCh5KSx2Ll9kaW1lbnNpb25zKCkpLHYuX3Bvc2l0aW9uKCksci5waW5uZWQmJnYucGluKCEwKSxmJiZ2LnJlZnJlc2goZiksci52aXNpYmxlJiZ2LnRvRnJvbnQoKSxnPWEuY2hpbGRyZW4oayksdi5fdGFiaW5kZXgoZyksci52aXNpYmxlJiZyLm1vZGFsJiZ2Ll9vdmVybGF5KGEuaXMoTSkpLmNzcyh7b3BhY2l0eTouNX0pLGEub24oXCJtb3VzZWVudGVyXCIrXyxLLHAodi5fYnV0dG9uRW50ZXIsdikpLm9uKFwibW91c2VsZWF2ZVwiK18sSyxwKHYuX2J1dHRvbkxlYXZlLHYpKS5vbihcImNsaWNrXCIrXyxcIj4gXCIrSyxwKHYuX3dpbmRvd0FjdGlvbkhhbmRsZXIsdikpLGcub24oXCJrZXlkb3duXCIrXyxwKHYuX2tleWRvd24sdikpLm9uKFwiZm9jdXNcIitfLHAodi5fZm9jdXMsdikpLm9uKFwiYmx1clwiK18scCh2Ll9ibHVyLHYpKSx0aGlzLl9yZXNpemFibGUoKSx0aGlzLl9kcmFnZ2FibGUoKSxtPWkuYXR0cihcImlkXCIpLG0mJihtKz1cIl93bmRfdGl0bGVcIixhLmNoaWxkcmVuKGIpLmNoaWxkcmVuKHcpLmF0dHIoXCJpZFwiLG0pLGcuYXR0cih7cm9sZTpcImRpYWxvZ1wiLFwiYXJpYS1sYWJlbGxlZGJ5XCI6bX0pKSxhLmFkZChhLmNoaWxkcmVuKFwiLmstcmVzaXplLWhhbmRsZSxcIitiKSkub24oXCJtb3VzZWRvd25cIitfLHAodi50b0Zyb250LHYpKSx2LnRvdWNoU2Nyb2xsZXI9bC50b3VjaFNjcm9sbGVyKGkpLHYuX3Jlc2l6ZUhhbmRsZXI9cCh2Ll9vbkRvY3VtZW50UmVzaXplLHYpLHYuX21hcmtlcj1sLmd1aWQoKS5zdWJzdHJpbmcoMCw4KSxlKHdpbmRvdykub24oXCJyZXNpemVcIitfK3YuX21hcmtlcix2Ll9yZXNpemVIYW5kbGVyKSxyLnZpc2libGUmJih2LnRyaWdnZXIoeiksdi50cmlnZ2VyKEYpKSxsLm5vdGlmeSh2KX0sX2J1dHRvbkVudGVyOmZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcyhEKX0sX2J1dHRvbkxlYXZlOmZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS5yZW1vdmVDbGFzcyhEKX0sX2ZvY3VzOmZ1bmN0aW9uKCl7dGhpcy53cmFwcGVyLmFkZENsYXNzKEEpfSxfYmx1cjpmdW5jdGlvbigpe3RoaXMud3JhcHBlci5yZW1vdmVDbGFzcyhBKX0sX2RpbWVuc2lvbnM6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy53cmFwcGVyLHI9dGhpcy5vcHRpb25zLG89ci53aWR0aCxhPXIuaGVpZ2h0LHM9ci5tYXhIZWlnaHQsbD1bXCJtaW5XaWR0aFwiLFwibWluSGVpZ2h0XCIsXCJtYXhXaWR0aFwiLFwibWF4SGVpZ2h0XCJdO2Zvcih0aGlzLnRpdGxlKHIudGl0bGUpLGU9MDtsLmxlbmd0aD5lO2UrKyl0PXJbbFtlXV0sdCYmMS8wIT10JiZuLmNzcyhsW2VdLHQpO3MmJjEvMCE9cyYmdGhpcy5lbGVtZW50LmNzcyhcIm1heEhlaWdodFwiLHMpLG8mJm4ud2lkdGgoKFwiXCIrbykuaW5kZXhPZihcIiVcIik+MD9vOmkobyxyLm1pbldpZHRoLHIubWF4V2lkdGgpKSxhJiZuLmhlaWdodCgoXCJcIithKS5pbmRleE9mKFwiJVwiKT4wP2E6aShhLHIubWluSGVpZ2h0LHIubWF4SGVpZ2h0KSksci52aXNpYmxlfHxuLmhpZGUoKX0sX3Bvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy53cmFwcGVyLHQ9dGhpcy5vcHRpb25zLnBvc2l0aW9uOzA9PT10LnRvcCYmKHQudG9wPVwiXCIrdC50b3ApLDA9PT10LmxlZnQmJih0LmxlZnQ9XCJcIit0LmxlZnQpLGUuY3NzKHt0b3A6dC50b3B8fFwiXCIsbGVmdDp0LmxlZnR8fFwiXCJ9KX0sX2FuaW1hdGlvbnM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnM7ZS5hbmltYXRpb249PT0hMSYmKGUuYW5pbWF0aW9uPXtvcGVuOntlZmZlY3RzOnt9fSxjbG9zZTp7aGlkZTohMCxlZmZlY3RzOnt9fX0pfSxfcmVzaXplOmZ1bmN0aW9uKCl7bC5yZXNpemUodGhpcy5lbGVtZW50LmNoaWxkcmVuKCkpfSxfcmVzaXphYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLnJlc2l6YWJsZSxuPXRoaXMud3JhcHBlcjt0aGlzLnJlc2l6aW5nJiYobi5vZmYoXCJkYmxjbGlja1wiK18pLmNoaWxkcmVuKHgpLnJlbW92ZSgpLHRoaXMucmVzaXppbmcuZGVzdHJveSgpLHRoaXMucmVzaXppbmc9bnVsbCksdCYmKG4ub24oXCJkYmxjbGlja1wiK18sYixwKGZ1bmN0aW9uKHQpe2UodC50YXJnZXQpLmNsb3Nlc3QoXCIuay13aW5kb3ctYWN0aW9uXCIpLmxlbmd0aHx8dGhpcy50b2dnbGVNYXhpbWl6YXRpb24oKX0sdGhpcykpLGcoXCJuIGUgcyB3IHNlIHN3IG5lIG53XCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGUsdCl7bi5hcHBlbmQoWi5yZXNpemVIYW5kbGUodCkpfSksdGhpcy5yZXNpemluZz1uZXcgYSh0aGlzKSksbj1udWxsfSxfZHJhZ2dhYmxlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLmRyYWdnYWJsZTt0aGlzLmRyYWdnaW5nJiYodGhpcy5kcmFnZ2luZy5kZXN0cm95KCksdGhpcy5kcmFnZ2luZz1udWxsKSxlJiYodGhpcy5kcmFnZ2luZz1uZXcgcyh0aGlzLGUuZHJhZ0hhbmRsZXx8YikpfSxfYWN0aW9uczpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5hY3Rpb25zLG49dGhpcy53cmFwcGVyLmNoaWxkcmVuKGIpLGk9bi5maW5kKFwiLmstd2luZG93LWFjdGlvbnNcIik7dD1lLm1hcCh0LGZ1bmN0aW9uKGUpe3JldHVybntuYW1lOmV9fSksaS5odG1sKGwucmVuZGVyKFouYWN0aW9uLHQpKX0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXtjLmZuLnNldE9wdGlvbnMuY2FsbCh0aGlzLGUpLHRoaXMuX2FuaW1hdGlvbnMoKSx0aGlzLl9kaW1lbnNpb25zKCksdGhpcy5fcG9zaXRpb24oKSx0aGlzLl9yZXNpemFibGUoKSx0aGlzLl9kcmFnZ2FibGUoKSx0aGlzLl9hY3Rpb25zKCl9LGV2ZW50czpbeixGLFIsQixMLE8sSCxOLFYsVV0sb3B0aW9uczp7bmFtZTpcIldpbmRvd1wiLGFuaW1hdGlvbjp7b3Blbjp7ZWZmZWN0czp7em9vbTp7ZGlyZWN0aW9uOlwiaW5cIn0sZmFkZTp7ZGlyZWN0aW9uOlwiaW5cIn19LGR1cmF0aW9uOjM1MH0sY2xvc2U6e2VmZmVjdHM6e3pvb206e2RpcmVjdGlvbjpcIm91dFwiLHByb3BlcnRpZXM6e3NjYWxlOi43fX0sZmFkZTp7ZGlyZWN0aW9uOlwib3V0XCJ9fSxkdXJhdGlvbjozNTAsaGlkZTohMH19LHRpdGxlOlwiXCIsYWN0aW9uczpbXCJDbG9zZVwiXSxhdXRvRm9jdXM6ITAsbW9kYWw6ITEscmVzaXphYmxlOiEwLGRyYWdnYWJsZTohMCxtaW5XaWR0aDo5MCxtaW5IZWlnaHQ6NTAsbWF4V2lkdGg6MS8wLG1heEhlaWdodDoxLzAscGlubmVkOiExLHBvc2l0aW9uOnt9LGNvbnRlbnQ6bnVsbCx2aXNpYmxlOm51bGwsaGVpZ2h0Om51bGwsd2lkdGg6bnVsbCxhcHBlbmRUbzpcImJvZHlcIn0sX2Nsb3NhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGUuaW5BcnJheShcImNsb3NlXCIsZS5tYXAodGhpcy5vcHRpb25zLmFjdGlvbnMsZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9Mb3dlckNhc2UoKX0pKT4tMX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIHQsbixyLG8sYSxzLGM9dGhpcyxkPWMub3B0aW9ucyx1PWwua2V5cyxoPWUua2V5Q29kZSxwPWMud3JhcHBlcixmPTEwLGc9Yy5vcHRpb25zLmlzTWF4aW1pemVkO2UudGFyZ2V0IT1lLmN1cnJlbnRUYXJnZXR8fGMuX2Nsb3Npbmd8fChoPT11LkVTQyYmYy5fY2xvc2FibGUoKSYmYy5fY2xvc2UoITEpLCFkLmRyYWdnYWJsZXx8ZS5jdHJsS2V5fHxnfHwodD1sLmdldE9mZnNldChwKSxoPT11LlVQP249cC5jc3MoXCJ0b3BcIix0LnRvcC1mKTpoPT11LkRPV04/bj1wLmNzcyhcInRvcFwiLHQudG9wK2YpOmg9PXUuTEVGVD9uPXAuY3NzKFwibGVmdFwiLHQubGVmdC1mKTpoPT11LlJJR0hUJiYobj1wLmNzcyhcImxlZnRcIix0LmxlZnQrZikpKSxkLnJlc2l6YWJsZSYmZS5jdHJsS2V5JiYhZyYmKGg9PXUuVVA/KG49ITAsbz1wLmhlaWdodCgpLWYpOmg9PXUuRE9XTiYmKG49ITAsbz1wLmhlaWdodCgpK2YpLGg9PXUuTEVGVD8obj0hMCxyPXAud2lkdGgoKS1mKTpoPT11LlJJR0hUJiYobj0hMCxyPXAud2lkdGgoKStmKSxuJiYoYT1pKHIsZC5taW5XaWR0aCxkLm1heFdpZHRoKSxzPWkobyxkLm1pbkhlaWdodCxkLm1heEhlaWdodCksaXNOYU4oYSl8fChwLndpZHRoKGEpLGMub3B0aW9ucy53aWR0aD1hK1wicHhcIiksaXNOYU4ocyl8fChwLmhlaWdodChzKSxjLm9wdGlvbnMuaGVpZ2h0PXMrXCJweFwiKSxjLnJlc2l6ZSgpKSksbiYmZS5wcmV2ZW50RGVmYXVsdCgpKX0sX292ZXJsYXk6ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5hcHBlbmRUby5jaGlsZHJlbihDKSxpPXRoaXMud3JhcHBlcjtyZXR1cm4gbi5sZW5ndGh8fChuPWUoXCI8ZGl2IGNsYXNzPSdrLW92ZXJsYXknIC8+XCIpKSxuLmluc2VydEJlZm9yZShpWzBdKS50b2dnbGUodCkuY3NzKGoscGFyc2VJbnQoaS5jc3MoaiksMTApLTEpLG59LF9hY3Rpb25Gb3JJY29uOmZ1bmN0aW9uKGUpe3ZhciB0PS9cXGJrLWktXFx3K1xcYi8uZXhlYyhlWzBdLmNsYXNzTmFtZSlbMF07cmV0dXJue1wiay1pLWNsb3NlXCI6XCJfY2xvc2VcIixcImstaS1tYXhpbWl6ZVwiOlwibWF4aW1pemVcIixcImstaS1taW5pbWl6ZVwiOlwibWluaW1pemVcIixcImstaS1yZXN0b3JlXCI6XCJyZXN0b3JlXCIsXCJrLWktcmVmcmVzaFwiOlwicmVmcmVzaFwiLFwiay1pLXBpblwiOlwicGluXCIsXCJrLWktdW5waW5cIjpcInVucGluXCJ9W3RdfSxfd2luZG93QWN0aW9uSGFuZGxlcjpmdW5jdGlvbihuKXt2YXIgaSxyO2lmKCF0aGlzLl9jbG9zaW5nKXJldHVybiBpPWUobi50YXJnZXQpLmNsb3Nlc3QoXCIuay13aW5kb3ctYWN0aW9uXCIpLmZpbmQoXCIuay1pY29uXCIpLHI9dGhpcy5fYWN0aW9uRm9ySWNvbihpKSxyPyhuLnByZXZlbnREZWZhdWx0KCksdGhpc1tyXSgpLCExKTp0fSxfbW9kYWxzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPWUoeSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIG49ZSh0aGlzKSxpPXQuX29iamVjdChuKSxyPWkmJmkub3B0aW9ucztyZXR1cm4gciYmci5tb2RhbCYmci52aXNpYmxlJiZuLmlzKE0pfSkuc29ydChmdW5jdGlvbih0LG4pe3JldHVybitlKHQpLmNzcyhcInpJbmRleFwiKS0rZShuKS5jc3MoXCJ6SW5kZXhcIil9KTtyZXR1cm4gdD1udWxsLG59LF9vYmplY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jaGlsZHJlbihrKTtyZXR1cm4gdC5kYXRhKFwia2VuZG9XaW5kb3dcIil8fHQuZGF0YShcImtlbmRvXCIrdGhpcy5vcHRpb25zLm5hbWUpfSxjZW50ZXI6ZnVuY3Rpb24oKXt2YXIgdCxuLGk9dGhpcyxyPWkub3B0aW9ucy5wb3NpdGlvbixvPWkud3JhcHBlcixhPWUod2luZG93KSxzPTAsbD0wO3JldHVybiBpLm9wdGlvbnMuaXNNYXhpbWl6ZWQ/aTooaS5vcHRpb25zLnBpbm5lZHx8KHM9YS5zY3JvbGxUb3AoKSxsPWEuc2Nyb2xsTGVmdCgpKSxuPWwrTWF0aC5tYXgoMCwoYS53aWR0aCgpLW8ud2lkdGgoKSkvMiksdD1zK01hdGgubWF4KDAsKGEuaGVpZ2h0KCktby5oZWlnaHQoKS1wYXJzZUludChvLmNzcyhcInBhZGRpbmdUb3BcIiksMTApKS8yKSxvLmNzcyh7bGVmdDpuLHRvcDp0fSksci50b3A9dCxyLmxlZnQ9bixpKX0sdGl0bGU6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLGk9bi53cmFwcGVyLHI9bi5vcHRpb25zLG89aS5jaGlsZHJlbihiKSxhPW8uY2hpbGRyZW4odyk7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9PT0hMT8oaS5hZGRDbGFzcyhcImstd2luZG93LXRpdGxlbGVzc1wiKSxvLnJlbW92ZSgpKTooby5sZW5ndGg/YS5odG1sKGUpOihpLnByZXBlbmQoWi50aXRsZWJhcihyKSksbi5fYWN0aW9ucygpLG89aS5jaGlsZHJlbihiKSksdD1vLm91dGVySGVpZ2h0KCksaS5jc3MoXCJwYWRkaW5nLXRvcFwiLHQpLG8uY3NzKFwibWFyZ2luLXRvcFwiLC10KSksbi5vcHRpb25zLnRpdGxlPWUsbik6YS50ZXh0KCl9LGNvbnRlbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLndyYXBwZXIuY2hpbGRyZW4oaykscj1pLmNoaWxkcmVuKFwiLmttLXNjcm9sbC1jb250YWluZXJcIik7cmV0dXJuIGk9clswXT9yOmksbihlKT8odGhpcy5hbmd1bGFyKFwiY2xlYW51cFwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmkuY2hpbGRyZW4oKX19KSxsLmRlc3Ryb3kodGhpcy5lbGVtZW50LmNoaWxkcmVuKCkpLGkuZW1wdHkoKS5odG1sKGUpLHRoaXMuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3ZhciBlLG49W107Zm9yKGU9aS5sZW5ndGg7LS1lPj0wOyluLnB1c2goe2RhdGFJdGVtOnR9KTtyZXR1cm57ZWxlbWVudHM6aS5jaGlsZHJlbigpLGRhdGE6bn19KSx0aGlzKTppLmh0bWwoKX0sb3BlbjpmdW5jdGlvbigpe3ZhciB0LG4saT10aGlzLHI9aS53cmFwcGVyLG89aS5vcHRpb25zLGE9by5hbmltYXRpb24ub3BlbixzPXIuY2hpbGRyZW4oayk7cmV0dXJuIGkudHJpZ2dlcih6KXx8KGkuX2Nsb3NpbmcmJnIua2VuZG9TdG9wKCEwLCEwKSxpLl9jbG9zaW5nPSExLGkudG9Gcm9udCgpLG8uYXV0b0ZvY3VzJiZpLmVsZW1lbnQuZm9jdXMoKSxvLnZpc2libGU9ITAsby5tb2RhbCYmKHQ9aS5fb3ZlcmxheSghMSksdC5rZW5kb1N0b3AoITAsITApLGEuZHVyYXRpb24mJmwuZWZmZWN0cy5GYWRlPyhuPWwuZngodCkuZmFkZUluKCksbi5kdXJhdGlvbihhLmR1cmF0aW9ufHwwKSxuLmVuZFZhbHVlKC41KSxuLnBsYXkoKSk6dC5jc3MoXCJvcGFjaXR5XCIsLjUpLHQuc2hvdygpKSxyLmlzKE0pfHwocy5jc3MoVyxQKSxyLnNob3coKS5rZW5kb1N0b3AoKS5rZW5kb0FuaW1hdGUoe2VmZmVjdHM6YS5lZmZlY3RzLGR1cmF0aW9uOmEuZHVyYXRpb24sY29tcGxldGU6cCh0aGlzLl9hY3RpdmF0ZSx0aGlzKX0pKSksby5pc01heGltaXplZCYmKGkuX2RvY3VtZW50U2Nyb2xsVG9wPWUoZG9jdW1lbnQpLnNjcm9sbFRvcCgpLGUoXCJodG1sLCBib2R5XCIpLmNzcyhXLFApKSxpfSxfYWN0aXZhdGU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuYXV0b0ZvY3VzJiZ0aGlzLmVsZW1lbnQuZm9jdXMoKSx0aGlzLnRyaWdnZXIoRiksdGhpcy53cmFwcGVyLmNoaWxkcmVuKGspLmNzcyhXLFwiXCIpfSxfcmVtb3ZlT3ZlcmxheTpmdW5jdGlvbihuKXt2YXIgaSxyPXRoaXMuX21vZGFscygpLG89dGhpcy5vcHRpb25zLGE9by5tb2RhbCYmIXIubGVuZ3RoLHM9by5tb2RhbD90aGlzLl9vdmVybGF5KCEwKTplKHQpLGM9by5hbmltYXRpb24uY2xvc2U7YT8hbiYmYy5kdXJhdGlvbiYmbC5lZmZlY3RzLkZhZGU/KGk9bC5meChzKS5mYWRlT3V0KCksaS5kdXJhdGlvbihjLmR1cmF0aW9ufHwwKSxpLnN0YXJ0VmFsdWUoLjUpLGkucGxheSgpKTp0aGlzLl9vdmVybGF5KCExKS5yZW1vdmUoKTpyLmxlbmd0aCYmdGhpcy5fb2JqZWN0KHIubGFzdCgpKS5fb3ZlcmxheSghMCl9LF9jbG9zZTpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9bi53cmFwcGVyLHI9bi5vcHRpb25zLG89ci5hbmltYXRpb24ub3BlbixhPXIuYW5pbWF0aW9uLmNsb3NlO2lmKGkuaXMoTSkmJiFuLnRyaWdnZXIoQix7dXNlclRyaWdnZXJlZDohdH0pKXtpZihuLl9jbG9zaW5nKXJldHVybjtuLl9jbG9zaW5nPSEwLHIudmlzaWJsZT0hMSxlKHkpLmVhY2goZnVuY3Rpb24odCxuKXt2YXIgcj1lKG4pLmNoaWxkcmVuKGspO24hPWkmJnIuZmluZChcIj4gLlwiK1MpLmxlbmd0aD4wJiZyLmNoaWxkcmVuKEMpLnJlbW92ZSgpfSksdGhpcy5fcmVtb3ZlT3ZlcmxheSgpLGkua2VuZG9TdG9wKCkua2VuZG9BbmltYXRlKHtlZmZlY3RzOmEuZWZmZWN0c3x8by5lZmZlY3RzLHJldmVyc2U6YS5yZXZlcnNlPT09ITAsZHVyYXRpb246YS5kdXJhdGlvbixjb21wbGV0ZTpwKHRoaXMuX2RlYWN0aXZhdGUsdGhpcyl9KX1uLm9wdGlvbnMuaXNNYXhpbWl6ZWQmJihlKFwiaHRtbCwgYm9keVwiKS5jc3MoVyxcIlwiKSxuLl9kb2N1bWVudFNjcm9sbFRvcCYmbi5fZG9jdW1lbnRTY3JvbGxUb3A+MCYmZShkb2N1bWVudCkuc2Nyb2xsVG9wKG4uX2RvY3VtZW50U2Nyb2xsVG9wKSl9LF9kZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy53cmFwcGVyLmhpZGUoKS5jc3MoXCJvcGFjaXR5XCIsXCJcIiksdGhpcy50cmlnZ2VyKFIpO3ZhciBlPXRoaXMuX29iamVjdCh0aGlzLl9tb2RhbHMoKS5sYXN0KCkpO2UmJmUudG9Gcm9udCgpfSxjbG9zZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jbG9zZSghMCksdGhpc30sX2FjdGlvbmFibGU6ZnVuY3Rpb24odCl7cmV0dXJuIGUodCkuaXMoSytcIixcIitLK1wiIC5rLWljb24sOmlucHV0LGFcIil9LF9zaG91bGRGb2N1czpmdW5jdGlvbih0KXt2YXIgbj1oKCksaT10aGlzLmVsZW1lbnQ7cmV0dXJuISghdGhpcy5vcHRpb25zLmF1dG9Gb2N1c3x8ZShuKS5pcyhpKXx8dGhpcy5fYWN0aW9uYWJsZSh0KXx8aS5maW5kKG4pLmxlbmd0aCYmaS5maW5kKHQpLmxlbmd0aCl9LHRvRnJvbnQ6ZnVuY3Rpb24odCl7dmFyIG4saSxyPXRoaXMsbz1yLndyYXBwZXIsYT1vWzBdLHM9K28uY3NzKGopLGw9cyxjPXQmJnQudGFyZ2V0fHxudWxsO3JldHVybiBlKHkpLmVhY2goZnVuY3Rpb24odCxuKXt2YXIgaT1lKG4pLHI9aS5jc3Moaiksbz1pLmNoaWxkcmVuKGspO2lzTmFOKHIpfHwocz1NYXRoLm1heCgrcixzKSksbiE9YSYmby5maW5kKFwiPiAuXCIrUykubGVuZ3RoPjAmJm8uYXBwZW5kKFoub3ZlcmxheSl9KSwoIW9bMF0uc3R5bGUuekluZGV4fHxzPmwpJiZvLmNzcyhqLHMrMiksci5lbGVtZW50LmZpbmQoXCI+IC5rLW92ZXJsYXlcIikucmVtb3ZlKCksci5fc2hvdWxkRm9jdXMoYykmJihyLmVsZW1lbnQuZm9jdXMoKSxuPWUod2luZG93KS5zY3JvbGxUb3AoKSxpPXBhcnNlSW50KG8ucG9zaXRpb24oKS50b3AsMTApLGk+MCYmbj5pJiYobj4wP2Uod2luZG93KS5zY3JvbGxUb3AoaSk6by5jc3MoXCJ0b3BcIixuKSkpLG89bnVsbCxyfSx0b2dnbGVNYXhpbWl6YXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2xvc2luZz90aGlzOnRoaXNbdGhpcy5vcHRpb25zLmlzTWF4aW1pemVkP1wicmVzdG9yZVwiOlwibWF4aW1pemVcIl0oKX0scmVzdG9yZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMsaT1uLm1pbkhlaWdodCxyPXQucmVzdG9yZU9wdGlvbnM7cmV0dXJuIG4uaXNNYXhpbWl6ZWR8fG4uaXNNaW5pbWl6ZWQ/KGkmJjEvMCE9aSYmdC53cmFwcGVyLmNzcyhcIm1pbi1oZWlnaHRcIixpKSx0LndyYXBwZXIuY3NzKHtwb3NpdGlvbjpuLnBpbm5lZD9cImZpeGVkXCI6XCJhYnNvbHV0ZVwiLGxlZnQ6ci5sZWZ0LHRvcDpyLnRvcCx3aWR0aDpyLndpZHRoLGhlaWdodDpyLmhlaWdodH0pLnJlbW92ZUNsYXNzKEUpLmZpbmQoXCIuay13aW5kb3ctY29udGVudCwuay1yZXNpemUtaGFuZGxlXCIpLnNob3coKS5lbmQoKS5maW5kKFwiLmstd2luZG93LXRpdGxlYmFyIC5rLWktcmVzdG9yZVwiKS5wYXJlbnQoKS5yZW1vdmUoKS5lbmQoKS5lbmQoKS5maW5kKEcpLnBhcmVudCgpLnNob3coKS5lbmQoKS5lbmQoKS5maW5kKFkpLnBhcmVudCgpLnNob3coKSx0Lm9wdGlvbnMud2lkdGg9ci53aWR0aCx0Lm9wdGlvbnMuaGVpZ2h0PXIuaGVpZ2h0LGUoXCJodG1sLCBib2R5XCIpLmNzcyhXLFwiXCIpLHRoaXMuX2RvY3VtZW50U2Nyb2xsVG9wJiZ0aGlzLl9kb2N1bWVudFNjcm9sbFRvcD4wJiZlKGRvY3VtZW50KS5zY3JvbGxUb3AodGhpcy5fZG9jdW1lbnRTY3JvbGxUb3ApLG4uaXNNYXhpbWl6ZWQ9bi5pc01pbmltaXplZD0hMSx0LnJlc2l6ZSgpLHQpOnR9LG1heGltaXplOnIoXCJtYXhpbWl6ZVwiLGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQud3JhcHBlcixpPW4ucG9zaXRpb24oKTtmKHQucmVzdG9yZU9wdGlvbnMse2xlZnQ6aS5sZWZ0LHRvcDppLnRvcH0pLG4uY3NzKHtsZWZ0OjAsdG9wOjAscG9zaXRpb246XCJmaXhlZFwifSkuYWRkQ2xhc3MoRSksdGhpcy5fZG9jdW1lbnRTY3JvbGxUb3A9ZShkb2N1bWVudCkuc2Nyb2xsVG9wKCksZShcImh0bWwsIGJvZHlcIikuY3NzKFcsUCksdC5vcHRpb25zLmlzTWF4aW1pemVkPSEwLHQuX29uRG9jdW1lbnRSZXNpemUoKX0pLG1pbmltaXplOnIoXCJtaW5pbWl6ZVwiLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLndyYXBwZXIuY3NzKHtoZWlnaHQ6XCJcIixtaW5IZWlnaHQ6XCJcIn0pLGUuZWxlbWVudC5oaWRlKCksZS5vcHRpb25zLmlzTWluaW1pemVkPSEwfSkscGluOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1lKHdpbmRvdykscj1uLndyYXBwZXIsbz1wYXJzZUludChyLmNzcyhcInRvcFwiKSwxMCksYT1wYXJzZUludChyLmNzcyhcImxlZnRcIiksMTApOyh0fHwhbi5vcHRpb25zLnBpbm5lZCYmIW4ub3B0aW9ucy5pc01heGltaXplZCkmJihyLmNzcyh7cG9zaXRpb246XCJmaXhlZFwiLHRvcDpvLWkuc2Nyb2xsVG9wKCksbGVmdDphLWkuc2Nyb2xsTGVmdCgpfSksci5jaGlsZHJlbihiKS5maW5kKHEpLmFkZENsYXNzKFwiay1pLXVucGluXCIpLnJlbW92ZUNsYXNzKFwiay1pLXBpblwiKSxuLm9wdGlvbnMucGlubmVkPSEwKX0sdW5waW46ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49ZSh3aW5kb3cpLGk9dC53cmFwcGVyLHI9cGFyc2VJbnQoaS5jc3MoXCJ0b3BcIiksMTApLG89cGFyc2VJbnQoaS5jc3MoXCJsZWZ0XCIpLDEwKTt0Lm9wdGlvbnMucGlubmVkJiYhdC5vcHRpb25zLmlzTWF4aW1pemVkJiYoaS5jc3Moe3Bvc2l0aW9uOlwiXCIsdG9wOnIrbi5zY3JvbGxUb3AoKSxsZWZ0Om8rbi5zY3JvbGxMZWZ0KCl9KSxpLmNoaWxkcmVuKGIpLmZpbmQoJCkuYWRkQ2xhc3MoXCJrLWktcGluXCIpLnJlbW92ZUNsYXNzKFwiay1pLXVucGluXCIpLHQub3B0aW9ucy5waW5uZWQ9ITEpfSxfb25Eb2N1bWVudFJlc2l6ZTpmdW5jdGlvbigpe3ZhciB0LG4saT10aGlzLHI9aS53cmFwcGVyLG89ZSh3aW5kb3cpO2kub3B0aW9ucy5pc01heGltaXplZCYmKHQ9by53aWR0aCgpLG49by5oZWlnaHQoKS1wYXJzZUludChyLmNzcyhcInBhZGRpbmctdG9wXCIpLDEwKSxyLmNzcyh7d2lkdGg6dCxoZWlnaHQ6bn0pLGkub3B0aW9ucy53aWR0aD10LGkub3B0aW9ucy5oZWlnaHQ9bixpLnJlc2l6ZSgpKX0scmVmcmVzaDpmdW5jdGlvbih0KXt2YXIgaSxyLG8sYT10aGlzLHM9YS5vcHRpb25zLGw9ZShhLmVsZW1lbnQpO3JldHVybiB1KHQpfHwodD17dXJsOnR9KSx0PWYoe30scy5jb250ZW50LHQpLHI9bihzLmlmcmFtZSk/cy5pZnJhbWU6dC5pZnJhbWUsbz10LnVybCxvPyhuKHIpfHwocj0hWChvKSkscj8oaT1sLmZpbmQoXCIuXCIrUylbMF0saT9pLnNyYz1vfHxpLnNyYzpsLmh0bWwoWi5jb250ZW50RnJhbWUoZih7fSxzLHtjb250ZW50OnR9KSkpLGwuZmluZChcIi5cIitTKS51bmJpbmQoXCJsb2FkXCIrXykub24oXCJsb2FkXCIrXyxwKHRoaXMuX3RyaWdnZXJSZWZyZXNoLHRoaXMpKSk6YS5fYWpheFJlcXVlc3QodCkpOih0LnRlbXBsYXRlJiZhLmNvbnRlbnQobSh0LnRlbXBsYXRlKSh7fSkpLGEudHJpZ2dlcihMKSksbC50b2dnbGVDbGFzcyhcImstd2luZG93LWlmcmFtZWNvbnRlbnRcIiwhIXIpLGF9LF90cmlnZ2VyUmVmcmVzaDpmdW5jdGlvbigpe3RoaXMudHJpZ2dlcihMKX0sX2FqYXhDb21wbGV0ZTpmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLl9sb2FkaW5nSWNvblRpbWVvdXQpLHRoaXMud3JhcHBlci5maW5kKFEpLnJlbW92ZUNsYXNzKFQpXHJcbn0sX2FqYXhFcnJvcjpmdW5jdGlvbihlLHQpe3RoaXMudHJpZ2dlcihVLHtzdGF0dXM6dCx4aHI6ZX0pfSxfYWpheFN1Y2Nlc3M6ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBuPXQ7ZSYmKG49bShlKSh0fHx7fSkpLHRoaXMuY29udGVudChuLHQpLHRoaXMuZWxlbWVudC5wcm9wKFwic2Nyb2xsVG9wXCIsMCksdGhpcy50cmlnZ2VyKEwpfX0sX3Nob3dMb2FkaW5nOmZ1bmN0aW9uKCl7dGhpcy53cmFwcGVyLmZpbmQoUSkuYWRkQ2xhc3MoVCl9LF9hamF4UmVxdWVzdDpmdW5jdGlvbih0KXt0aGlzLl9sb2FkaW5nSWNvblRpbWVvdXQ9c2V0VGltZW91dChwKHRoaXMuX3Nob3dMb2FkaW5nLHRoaXMpLDEwMCksZS5hamF4KGYoe3R5cGU6XCJHRVRcIixkYXRhVHlwZTpcImh0bWxcIixjYWNoZTohMSxlcnJvcjpwKHRoaXMuX2FqYXhFcnJvcix0aGlzKSxjb21wbGV0ZTpwKHRoaXMuX2FqYXhDb21wbGV0ZSx0aGlzKSxzdWNjZXNzOnAodGhpcy5fYWpheFN1Y2Nlc3ModC50ZW1wbGF0ZSksdGhpcyl9LHQpKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBuPXRoaXM7bi5yZXNpemluZyYmbi5yZXNpemluZy5kZXN0cm95KCksbi5kcmFnZ2luZyYmbi5kcmFnZ2luZy5kZXN0cm95KCksbi53cmFwcGVyLm9mZihfKS5jaGlsZHJlbihrKS5vZmYoXykuZW5kKCkuZmluZChcIi5rLXJlc2l6ZS1oYW5kbGUsLmstd2luZG93LXRpdGxlYmFyXCIpLm9mZihfKSxlKHdpbmRvdykub2ZmKFwicmVzaXplXCIrXytuLl9tYXJrZXIpLGNsZWFyVGltZW91dChuLl9sb2FkaW5nSWNvblRpbWVvdXQpLGMuZm4uZGVzdHJveS5jYWxsKG4pLG4udW5iaW5kKHQpLGwuZGVzdHJveShuLndyYXBwZXIpLG4uX3JlbW92ZU92ZXJsYXkoITApLG4ud3JhcHBlci5lbXB0eSgpLnJlbW92ZSgpLG4ud3JhcHBlcj1uLmFwcGVuZFRvPW4uZWxlbWVudD1lKCl9LF9jcmVhdGVXaW5kb3c6ZnVuY3Rpb24oKXt2YXIgdCxuLGk9dGhpcy5lbGVtZW50LHI9dGhpcy5vcHRpb25zLG89bC5zdXBwb3J0LmlzUnRsKGkpO3Iuc2Nyb2xsYWJsZT09PSExJiZpLmF0dHIoXCJzdHlsZVwiLFwib3ZlcmZsb3c6aGlkZGVuO1wiKSxuPWUoWi53cmFwcGVyKHIpKSx0PWkuZmluZChcImlmcmFtZTpub3QoLmstY29udGVudClcIikubWFwKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRBdHRyaWJ1dGUoXCJzcmNcIik7cmV0dXJuIHRoaXMuc3JjPVwiXCIsZX0pLG4udG9nZ2xlQ2xhc3MoXCJrLXJ0bFwiLG8pLmFwcGVuZFRvKHRoaXMuYXBwZW5kVG8pLmFwcGVuZChpKS5maW5kKFwiaWZyYW1lOm5vdCguay1jb250ZW50KVwiKS5lYWNoKGZ1bmN0aW9uKGUpe3RoaXMuc3JjPXRbZV19KSxuLmZpbmQoXCIuay13aW5kb3ctdGl0bGVcIikuY3NzKG8/XCJsZWZ0XCI6XCJyaWdodFwiLG4uZmluZChcIi5rLXdpbmRvdy1hY3Rpb25zXCIpLm91dGVyV2lkdGgoKSsxMCksaS5jc3MoXCJ2aXNpYmlsaXR5XCIsXCJcIikuc2hvdygpLGkuZmluZChcIltkYXRhLXJvbGU9ZWRpdG9yXVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKS5kYXRhKFwia2VuZG9FZGl0b3JcIik7dCYmdC5yZWZyZXNoKCl9KSxuPWk9bnVsbH19KSxaPXt3cmFwcGVyOm0oXCI8ZGl2IGNsYXNzPSdrLXdpZGdldCBrLXdpbmRvdycgLz5cIiksYWN0aW9uOm0oXCI8YSByb2xlPSdidXR0b24nIGhyZWY9J1xcXFwjJyBjbGFzcz0nay13aW5kb3ctYWN0aW9uIGstbGluayc+PHNwYW4gcm9sZT0ncHJlc2VudGF0aW9uJyBjbGFzcz0nay1pY29uIGstaS0jPSBuYW1lLnRvTG93ZXJDYXNlKCkgIyc+Iz0gbmFtZSAjPC9zcGFuPjwvYT5cIiksdGl0bGViYXI6bShcIjxkaXYgY2xhc3M9J2std2luZG93LXRpdGxlYmFyIGstaGVhZGVyJz4mbmJzcDs8c3BhbiBjbGFzcz0nay13aW5kb3ctdGl0bGUnPiM9IHRpdGxlICM8L3NwYW4+PGRpdiBjbGFzcz0nay13aW5kb3ctYWN0aW9ucycgLz48L2Rpdj5cIiksb3ZlcmxheTpcIjxkaXYgY2xhc3M9J2stb3ZlcmxheScgLz5cIixjb250ZW50RnJhbWU6bShcIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHRpdGxlPScjPSB0aXRsZSAjJyBjbGFzcz0nXCIrUytcIicgc3JjPScjPSBjb250ZW50LnVybCAjJz5UaGlzIHBhZ2UgcmVxdWlyZXMgZnJhbWVzIGluIG9yZGVyIHRvIHNob3cgY29udGVudDwvaWZyYW1lPlwiKSxyZXNpemVIYW5kbGU6bShcIjxkaXYgY2xhc3M9J2stcmVzaXplLWhhbmRsZSBrLXJlc2l6ZS0jPSBkYXRhICMnPjwvZGl2PlwiKX07YS5wcm90b3R5cGU9e2FkZE92ZXJsYXk6ZnVuY3Rpb24oKXt0aGlzLm93bmVyLndyYXBwZXIuYXBwZW5kKFoub3ZlcmxheSl9LHJlbW92ZU92ZXJsYXk6ZnVuY3Rpb24oKXt0aGlzLm93bmVyLndyYXBwZXIuZmluZChDKS5yZW1vdmUoKX0sZHJhZ3N0YXJ0OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1uLm93bmVyLHI9aS53cmFwcGVyO24uZWxlbWVudFBhZGRpbmc9cGFyc2VJbnQoci5jc3MoXCJwYWRkaW5nLXRvcFwiKSwxMCksbi5pbml0aWFsUG9zaXRpb249bC5nZXRPZmZzZXQocixcInBvc2l0aW9uXCIpLG4ucmVzaXplRGlyZWN0aW9uPXQuY3VycmVudFRhcmdldC5wcm9wKFwiY2xhc3NOYW1lXCIpLnJlcGxhY2UoXCJrLXJlc2l6ZS1oYW5kbGUgay1yZXNpemUtXCIsXCJcIiksbi5pbml0aWFsU2l6ZT17d2lkdGg6ci53aWR0aCgpLGhlaWdodDpyLmhlaWdodCgpfSxuLmNvbnRhaW5lck9mZnNldD1sLmdldE9mZnNldChpLmFwcGVuZFRvLFwicG9zaXRpb25cIiksci5jaGlsZHJlbih4KS5ub3QodC5jdXJyZW50VGFyZ2V0KS5oaWRlKCksZSh2KS5jc3MoSSx0LmN1cnJlbnRUYXJnZXQuY3NzKEkpKX0sZHJhZzpmdW5jdGlvbihlKXt2YXIgdCxuLHIsbyxhPXRoaXMscz1hLm93bmVyLGw9cy53cmFwcGVyLGM9cy5vcHRpb25zLGQ9YS5yZXNpemVEaXJlY3Rpb24sdT1hLmNvbnRhaW5lck9mZnNldCxoPWEuaW5pdGlhbFBvc2l0aW9uLHA9YS5pbml0aWFsU2l6ZSxmPU1hdGgubWF4KGUueC5sb2NhdGlvbix1LmxlZnQpLGc9TWF0aC5tYXgoZS55LmxvY2F0aW9uLHUudG9wKTtkLmluZGV4T2YoXCJlXCIpPj0wPyh0PWYtaC5sZWZ0LGwud2lkdGgoaSh0LGMubWluV2lkdGgsYy5tYXhXaWR0aCkpKTpkLmluZGV4T2YoXCJ3XCIpPj0wJiYobz1oLmxlZnQrcC53aWR0aCx0PWkoby1mLGMubWluV2lkdGgsYy5tYXhXaWR0aCksbC5jc3Moe2xlZnQ6by10LXUubGVmdCx3aWR0aDp0fSkpLGQuaW5kZXhPZihcInNcIik+PTA/KG49Zy1oLnRvcC1hLmVsZW1lbnRQYWRkaW5nLGwuaGVpZ2h0KGkobixjLm1pbkhlaWdodCxjLm1heEhlaWdodCkpKTpkLmluZGV4T2YoXCJuXCIpPj0wJiYocj1oLnRvcCtwLmhlaWdodCxuPWkoci1nLGMubWluSGVpZ2h0LGMubWF4SGVpZ2h0KSxsLmNzcyh7dG9wOnItbi11LnRvcCxoZWlnaHQ6bn0pKSx0JiYocy5vcHRpb25zLndpZHRoPXQrXCJweFwiKSxuJiYocy5vcHRpb25zLmhlaWdodD1uK1wicHhcIikscy5yZXNpemUoKX0sZHJhZ2VuZDpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9bi5vd25lcixyPWkud3JhcHBlcjtyZXR1cm4gci5jaGlsZHJlbih4KS5ub3QodC5jdXJyZW50VGFyZ2V0KS5zaG93KCksZSh2KS5jc3MoSSxcIlwiKSxpLnRvdWNoU2Nyb2xsZXImJmkudG91Y2hTY3JvbGxlci5yZXNldCgpLDI3PT10LmtleUNvZGUmJnIuY3NzKG4uaW5pdGlhbFBvc2l0aW9uKS5jc3Mobi5pbml0aWFsU2l6ZSksaS50cmlnZ2VyKEgpLCExfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fZHJhZ2dhYmxlJiZ0aGlzLl9kcmFnZ2FibGUuZGVzdHJveSgpLHRoaXMuX2RyYWdnYWJsZT10aGlzLm93bmVyPW51bGx9fSxzLnByb3RvdHlwZT17ZHJhZ3N0YXJ0OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMub3duZXIsaT1uLmVsZW1lbnQscj1pLmZpbmQoXCIuay13aW5kb3ctYWN0aW9uc1wiKSxvPWwuZ2V0T2Zmc2V0KG4uYXBwZW5kVG8pO24udHJpZ2dlcihOKSxuLmluaXRpYWxXaW5kb3dQb3NpdGlvbj1sLmdldE9mZnNldChuLndyYXBwZXIsXCJwb3NpdGlvblwiKSxuLnN0YXJ0UG9zaXRpb249e2xlZnQ6dC54LmNsaWVudC1uLmluaXRpYWxXaW5kb3dQb3NpdGlvbi5sZWZ0LHRvcDp0LnkuY2xpZW50LW4uaW5pdGlhbFdpbmRvd1Bvc2l0aW9uLnRvcH0sbi5taW5MZWZ0UG9zaXRpb249ci5sZW5ndGg+MD9yLm91dGVyV2lkdGgoKStwYXJzZUludChyLmNzcyhcInJpZ2h0XCIpLDEwKS1pLm91dGVyV2lkdGgoKToyMC1pLm91dGVyV2lkdGgoKSxuLm1pbkxlZnRQb3NpdGlvbi09by5sZWZ0LG4ubWluVG9wUG9zaXRpb249LW8udG9wLG4ud3JhcHBlci5hcHBlbmQoWi5vdmVybGF5KS5jaGlsZHJlbih4KS5oaWRlKCksZSh2KS5jc3MoSSx0LmN1cnJlbnRUYXJnZXQuY3NzKEkpKX0sZHJhZzpmdW5jdGlvbih0KXt2YXIgbj10aGlzLm93bmVyLGk9bi5vcHRpb25zLnBvc2l0aW9uLHI9TWF0aC5tYXgodC55LmNsaWVudC1uLnN0YXJ0UG9zaXRpb24udG9wLG4ubWluVG9wUG9zaXRpb24pLG89TWF0aC5tYXgodC54LmNsaWVudC1uLnN0YXJ0UG9zaXRpb24ubGVmdCxuLm1pbkxlZnRQb3NpdGlvbiksYT17bGVmdDpvLHRvcDpyfTtlKG4ud3JhcHBlcikuY3NzKGEpLGkudG9wPXIsaS5sZWZ0PW99LF9maW5pc2hEcmFnOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vd25lcjt0LndyYXBwZXIuY2hpbGRyZW4oeCkudG9nZ2xlKCF0Lm9wdGlvbnMuaXNNaW5pbWl6ZWQpLmVuZCgpLmZpbmQoQykucmVtb3ZlKCksZSh2KS5jc3MoSSxcIlwiKX0sZHJhZ2NhbmNlbDpmdW5jdGlvbihlKXt0aGlzLl9maW5pc2hEcmFnKCksZS5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoeSkuY3NzKHRoaXMub3duZXIuaW5pdGlhbFdpbmRvd1Bvc2l0aW9uKX0sZHJhZ2VuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9maW5pc2hEcmFnKCksdGhpcy5vd25lci50cmlnZ2VyKFYpLCExfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fZHJhZ2dhYmxlJiZ0aGlzLl9kcmFnZ2FibGUuZGVzdHJveSgpLHRoaXMuX2RyYWdnYWJsZT10aGlzLm93bmVyPW51bGx9fSxsLnVpLnBsdWdpbihKKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUpe3ZhciB0LG4saT1lLmZpbmQoayhcInBvcG92ZXJcIikpLHI9cy5yb2xlcztmb3IodD0wLG49aS5sZW5ndGg7bj50O3QrKylvLmluaXRXaWRnZXQoaVt0XSx7fSxyKX1mdW5jdGlvbiBpKGUpe28udHJpZ2dlcmVkQnlJbnB1dChlKXx8ZS5wcmV2ZW50RGVmYXVsdCgpfWZ1bmN0aW9uIHIodCl7dC5lYWNoKGZ1bmN0aW9uKCl7by5pbml0V2lkZ2V0KGUodGhpcykse30scy5yb2xlcyl9KX12YXIgbz13aW5kb3cua2VuZG8sYT1vLm1vYmlsZSxzPWEudWksbD1vLmF0dHIsYz1zLldpZGdldCxkPW8uVmlld0Nsb25lLHU9XCJpbml0XCIsaD0nPGRpdiBzdHlsZT1cImhlaWdodDogMTAwJTsgd2lkdGg6IDEwMCU7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB6LWluZGV4OiAyMDAwMDsgZGlzcGxheTogbm9uZVwiIC8+JyxwPVwiYmVmb3JlU2hvd1wiLGY9XCJzaG93XCIsZz1cImFmdGVyU2hvd1wiLG09XCJiZWZvcmVIaWRlXCIsdj1cInRyYW5zaXRpb25FbmRcIixfPVwidHJhbnNpdGlvblN0YXJ0XCIseT1cImhpZGVcIix3PVwiZGVzdHJveVwiLGI9by5hdHRyVmFsdWUsaz1vLnJvbGVTZWxlY3Rvcix4PW8uZGlyZWN0aXZlU2VsZWN0b3IsQz1vLmNvbXBpbGVNb2JpbGVEaXJlY3RpdmUsUz1jLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe2MuZm4uaW5pdC5jYWxsKHRoaXMsdCxuKSx0aGlzLnBhcmFtcz17fSxlLmV4dGVuZCh0aGlzLG4pLHRoaXMudHJhbnNpdGlvbj10aGlzLnRyYW5zaXRpb258fHRoaXMuZGVmYXVsdFRyYW5zaXRpb24sdGhpcy5faWQoKSx0aGlzLm9wdGlvbnMuJGFuZ3VsYXI/dGhpcy5fb3ZlcmxheSgpOih0aGlzLl9sYXlvdXQoKSx0aGlzLl9vdmVybGF5KCksdGhpcy5fc2Nyb2xsZXIoKSx0aGlzLl9tb2RlbCgpKX0sZXZlbnRzOlt1LHAsZixnLG0seSx3LF8sdl0sb3B0aW9uczp7bmFtZTpcIlZpZXdcIix0aXRsZTpcIlwiLGxheW91dDpudWxsLGdldExheW91dDplLm5vb3AscmVsb2FkOiExLHRyYW5zaXRpb246XCJcIixkZWZhdWx0VHJhbnNpdGlvbjpcIlwiLHVzZU5hdGl2ZVNjcm9sbGluZzohMSxzdHJldGNoOiExLHpvb206ITEsbW9kZWw6bnVsbCxtb2RlbFNjb3BlOndpbmRvdyxzY3JvbGxlcjp7fSxpbml0V2lkZ2V0czohMH0sZW5hYmxlOmZ1bmN0aW9uKGUpe3Q9PT1lJiYoZT0hMCksZT90aGlzLm92ZXJsYXkuaGlkZSgpOnRoaXMub3ZlcmxheS5zaG93KCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmxheW91dCYmdGhpcy5sYXlvdXQuZGV0YWNoKHRoaXMpLHRoaXMudHJpZ2dlcih3KSxjLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLnNjcm9sbGVyJiZ0aGlzLnNjcm9sbGVyLmRlc3Ryb3koKSx0aGlzLm9wdGlvbnMuJGFuZ3VsYXImJnRoaXMuZWxlbWVudC5zY29wZSgpLiRkZXN0cm95KCksby5kZXN0cm95KHRoaXMuZWxlbWVudCl9LHB1cmdlOmZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95KCksdGhpcy5lbGVtZW50LnJlbW92ZSgpfSx0cmlnZ2VyQmVmb3JlU2hvdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyaWdnZXIocCx7dmlldzp0aGlzfSk/ITE6ITB9LHNob3dTdGFydDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudDtlLmNzcyhcImRpc3BsYXlcIixcIlwiKSx0aGlzLmluaXRlZD90aGlzLl9pbnZva2VOZ0NvbnRyb2xsZXIoKToodGhpcy5pbml0ZWQ9ITAsdGhpcy50cmlnZ2VyKHUse3ZpZXc6dGhpc30pKSx0aGlzLmxheW91dCYmdGhpcy5sYXlvdXQuYXR0YWNoKHRoaXMpLHRoaXMuX3BhZElmTmF0aXZlU2Nyb2xsaW5nKCksdGhpcy50cmlnZ2VyKGYse3ZpZXc6dGhpc30pLG8ucmVzaXplKGUpfSxzaG93RW5kOmZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKGcse3ZpZXc6dGhpc30pLHRoaXMuX3BhZElmTmF0aXZlU2Nyb2xsaW5nKCl9LGhpZGVTdGFydDpmdW5jdGlvbigpe3RoaXMudHJpZ2dlcihtLHt2aWV3OnRoaXN9KX0saGlkZUVuZDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5lbGVtZW50LmhpZGUoKSxlLnRyaWdnZXIoeSx7dmlldzplfSksZS5sYXlvdXQmJmUubGF5b3V0LnRyaWdnZXIoeSx7dmlldzplLGxheW91dDplLmxheW91dH0pfSxiZWZvcmVUcmFuc2l0aW9uOmZ1bmN0aW9uKGUpe3RoaXMudHJpZ2dlcihfLHt0eXBlOmV9KX0sYWZ0ZXJUcmFuc2l0aW9uOmZ1bmN0aW9uKGUpe3RoaXMudHJpZ2dlcih2LHt0eXBlOmV9KX0sX3BhZElmTmF0aXZlU2Nyb2xsaW5nOmZ1bmN0aW9uKCl7aWYoYS5hcHBMZXZlbE5hdGl2ZVNjcm9sbGluZygpKXt2YXIgZT1vLnN1cHBvcnQubW9iaWxlT1MmJm8uc3VwcG9ydC5tb2JpbGVPUy5hbmRyb2lkLHQ9YS5hcHBsaWNhdGlvbi5vcy5hbmRyb2lkfHxhLmFwcGxpY2F0aW9uLnNraW4oKS5pbmRleE9mKFwiYW5kcm9pZFwiKT4tMSxuPWV8fHQ/XCJmb290ZXJcIjpcImhlYWRlclwiLGk9ZXx8dD9cImhlYWRlclwiOlwiZm9vdGVyXCI7dGhpcy5jb250ZW50LmNzcyh7cGFkZGluZ1RvcDp0aGlzW25dLmhlaWdodCgpLHBhZGRpbmdCb3R0b206dGhpc1tpXS5oZWlnaHQoKX0pfX0sY29udGVudEVsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBlLm9wdGlvbnMuc3RyZXRjaD9lLmNvbnRlbnQ6ZS5zY3JvbGxlckNvbnRlbnR9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBkKHRoaXMpfSxfc2Nyb2xsZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2EuYXBwTGV2ZWxOYXRpdmVTY3JvbGxpbmcoKXx8KHQub3B0aW9ucy5zdHJldGNoP3QuY29udGVudC5hZGRDbGFzcyhcImttLXN0cmV0Y2hlZC12aWV3XCIpOih0LmNvbnRlbnQua2VuZG9Nb2JpbGVTY3JvbGxlcihlLmV4dGVuZCh0Lm9wdGlvbnMuc2Nyb2xsZXIse3pvb206dC5vcHRpb25zLnpvb20sdXNlTmF0aXZlOnQub3B0aW9ucy51c2VOYXRpdmVTY3JvbGxpbmd9KSksdC5zY3JvbGxlcj10LmNvbnRlbnQuZGF0YShcImtlbmRvTW9iaWxlU2Nyb2xsZXJcIiksdC5zY3JvbGxlckNvbnRlbnQ9dC5zY3JvbGxlci5zY3JvbGxFbGVtZW50KSxvLnN1cHBvcnQua2luZXRpY1Njcm9sbE5lZWRlZCYmKGUodC5lbGVtZW50KS5vbihcInRvdWNobW92ZVwiLFwiLmttLWhlYWRlclwiLGkpLHQub3B0aW9ucy51c2VOYXRpdmVTY3JvbGxpbmd8fGUodC5lbGVtZW50KS5vbihcInRvdWNobW92ZVwiLFwiLmttLWNvbnRlbnRcIixpKSkpfSxfbW9kZWw6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5lbGVtZW50LGk9ZS5vcHRpb25zLm1vZGVsO1wic3RyaW5nXCI9PXR5cGVvZiBpJiYoaT1vLmdldHRlcihpKShlLm9wdGlvbnMubW9kZWxTY29wZSkpLGUubW9kZWw9aSxuKHQpLGUuZWxlbWVudC5jc3MoXCJkaXNwbGF5XCIsXCJcIiksZS5vcHRpb25zLmluaXRXaWRnZXRzJiYoaT9vLmJpbmQodCxpLHMsby51aSxvLmRhdGF2aXoudWkpOmEuaW5pdCh0LmNoaWxkcmVuKCkpKSxlLmVsZW1lbnQuY3NzKFwiZGlzcGxheVwiLFwibm9uZVwiKX0sX2lkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50LHQ9ZS5hdHRyKFwiaWRcIil8fFwiXCI7dGhpcy5pZD1iKGUsXCJ1cmxcIil8fFwiI1wiK3QsXCIjXCI9PXRoaXMuaWQmJih0aGlzLmlkPW8uZ3VpZCgpLGUuYXR0cihcImlkXCIsdGhpcy5pZCkpfSxfbGF5b3V0OmZ1bmN0aW9uKCl7dmFyIGU9ayhcImNvbnRlbnRcIiksdD10aGlzLmVsZW1lbnQ7dC5hZGRDbGFzcyhcImttLXZpZXdcIiksdGhpcy5oZWFkZXI9dC5jaGlsZHJlbihrKFwiaGVhZGVyXCIpKS5hZGRDbGFzcyhcImttLWhlYWRlclwiKSx0aGlzLmZvb3Rlcj10LmNoaWxkcmVuKGsoXCJmb290ZXJcIikpLmFkZENsYXNzKFwia20tZm9vdGVyXCIpLHQuY2hpbGRyZW4oZSlbMF18fHQud3JhcElubmVyKFwiPGRpdiBcIitsKFwicm9sZVwiKSsnPVwiY29udGVudFwiPjwvZGl2PicpLHRoaXMuY29udGVudD10LmNoaWxkcmVuKGsoXCJjb250ZW50XCIpKS5hZGRDbGFzcyhcImttLWNvbnRlbnRcIiksdGhpcy5lbGVtZW50LnByZXBlbmQodGhpcy5oZWFkZXIpLmFwcGVuZCh0aGlzLmZvb3RlciksdGhpcy5sYXlvdXQ9dGhpcy5vcHRpb25zLmdldExheW91dCh0aGlzLmxheW91dCksdGhpcy5sYXlvdXQmJnRoaXMubGF5b3V0LnNldHVwKHRoaXMpfSxfb3ZlcmxheTpmdW5jdGlvbigpe3RoaXMub3ZlcmxheT1lKGgpLmFwcGVuZFRvKHRoaXMuZWxlbWVudCl9LF9pbnZva2VOZ0NvbnRyb2xsZXI6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy5lbGVtZW50O3RoaXMub3B0aW9ucy4kYW5ndWxhciYmKGU9bi5jb250cm9sbGVyKCksdD1uLnNjb3BlKCksZSYmdC4kYXBwbHkoZnVuY3Rpb24oKXtuLmluamVjdG9yKCkuaW52b2tlKGUuY29uc3RydWN0b3IsbnVsbCx7JHNjb3BlOnR9KX0pKX19KSxUPWMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7Yy5mbi5pbml0LmNhbGwodGhpcyxlLHQpLGU9dGhpcy5lbGVtZW50LHRoaXMuaGVhZGVyPWUuY2hpbGRyZW4odGhpcy5fbG9jYXRlKFwiaGVhZGVyXCIpKS5hZGRDbGFzcyhcImttLWhlYWRlclwiKSx0aGlzLmZvb3Rlcj1lLmNoaWxkcmVuKHRoaXMuX2xvY2F0ZShcImZvb3RlclwiKSkuYWRkQ2xhc3MoXCJrbS1mb290ZXJcIiksdGhpcy5lbGVtZW50cz10aGlzLmhlYWRlci5hZGQodGhpcy5mb290ZXIpLG4oZSksdGhpcy5vcHRpb25zLiRhbmd1bGFyfHxvLm1vYmlsZS5pbml0KHRoaXMuZWxlbWVudC5jaGlsZHJlbigpKSx0aGlzLmVsZW1lbnQuZGV0YWNoKCksdGhpcy50cmlnZ2VyKHUse2xheW91dDp0aGlzfSl9LF9sb2NhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub3B0aW9ucy4kYW5ndWxhcj94KGUpOmsoZSl9LG9wdGlvbnM6e25hbWU6XCJMYXlvdXRcIixpZDpudWxsLHBsYXRmb3JtOm51bGx9LGV2ZW50czpbdSxmLHldLHNldHVwOmZ1bmN0aW9uKGUpe2UuaGVhZGVyWzBdfHwoZS5oZWFkZXI9dGhpcy5oZWFkZXIpLGUuZm9vdGVyWzBdfHwoZS5mb290ZXI9dGhpcy5mb290ZXIpfSxkZXRhY2g6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmhlYWRlcj09PXQuaGVhZGVyJiZ0LmhlYWRlclswXSYmZS5lbGVtZW50LnByZXBlbmQodC5oZWFkZXIuZGV0YWNoKClbMF0uY2xvbmVOb2RlKCEwKSksZS5mb290ZXI9PT10LmZvb3RlciYmdC5mb290ZXIubGVuZ3RoJiZlLmVsZW1lbnQuYXBwZW5kKHQuZm9vdGVyLmRldGFjaCgpWzBdLmNsb25lTm9kZSghMCkpfSxhdHRhY2g6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuY3VycmVudFZpZXc7biYmdC5kZXRhY2gobiksZS5oZWFkZXI9PT10LmhlYWRlciYmKHQuaGVhZGVyLmRldGFjaCgpLGUuZWxlbWVudC5jaGlsZHJlbihrKFwiaGVhZGVyXCIpKS5yZW1vdmUoKSxlLmVsZW1lbnQucHJlcGVuZCh0LmhlYWRlcikpLGUuZm9vdGVyPT09dC5mb290ZXImJih0LmZvb3Rlci5kZXRhY2goKSxlLmVsZW1lbnQuY2hpbGRyZW4oayhcImZvb3RlclwiKSkucmVtb3ZlKCksZS5lbGVtZW50LmFwcGVuZCh0LmZvb3RlcikpLHQudHJpZ2dlcihmLHtsYXlvdXQ6dCx2aWV3OmV9KSx0LmN1cnJlbnRWaWV3PWV9fSksRD1vLk9ic2VydmFibGUsQT0vPGJvZHlbXj5dKj4oKFtcXHUwMDBhXFx1MDAwZFxcdTIwMjhcXHUyMDI5XXwuKSopPFxcL2JvZHk+L2ksRT1cImxvYWRTdGFydFwiLE09XCJsb2FkQ29tcGxldGVcIixQPVwic2hvd1N0YXJ0XCIsST1cInNhbWVWaWV3UmVxdWVzdGVkXCIsej1cInZpZXdTaG93XCIsRj1cInZpZXdUeXBlRGV0ZXJtaW5lZFwiLFI9XCJhZnRlclwiLEI9RC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCl7dmFyIG4saSxhLHMsbD10aGlzO2lmKEQuZm4uaW5pdC5jYWxsKGwpLGUuZXh0ZW5kKGwsdCksbC5zYW5kYm94PWUoXCI8ZGl2IC8+XCIpLGE9bC5jb250YWluZXIsbj1sLl9oaWRlVmlld3MoYSksbC5yb290Vmlldz1uLmZpcnN0KCksIWwucm9vdFZpZXdbMF0mJnQucm9vdE5lZWRlZCl0aHJvdyBpPWFbMF09PW8ubW9iaWxlLmFwcGxpY2F0aW9uLmVsZW1lbnRbMF0/J1lvdXIga2VuZG8gbW9iaWxlIGFwcGxpY2F0aW9uIGVsZW1lbnQgZG9lcyBub3QgY29udGFpbiBhbnkgZGlyZWN0IGNoaWxkIGVsZW1lbnRzIHdpdGggZGF0YS1yb2xlPVwidmlld1wiIGF0dHJpYnV0ZSBzZXQuIE1ha2Ugc3VyZSB0aGF0IHlvdSBpbnN0YW50aWF0ZSB0aGUgbW9iaWxlIGFwcGxpY2F0aW9uIHVzaW5nIHRoZSBjb3JyZWN0IGNvbnRhaW5lci4nOidZb3VyIHBhbmUgZWxlbWVudCBkb2VzIG5vdCBjb250YWluIGFueSBkaXJlY3QgY2hpbGQgZWxlbWVudHMgd2l0aCBkYXRhLXJvbGU9XCJ2aWV3XCIgYXR0cmlidXRlIHNldC4nLEVycm9yKGkpO2wubGF5b3V0cz17fSxsLnZpZXdDb250YWluZXI9bmV3IG8uVmlld0NvbnRhaW5lcihsLmNvbnRhaW5lciksbC52aWV3Q29udGFpbmVyLmJpbmQoXCJhY2NlcHRlZFwiLGZ1bmN0aW9uKGUpe2Uudmlldy5wYXJhbXM9bC5wYXJhbXN9KSxsLnZpZXdDb250YWluZXIuYmluZChcImNvbXBsZXRlXCIsZnVuY3Rpb24oZSl7bC50cmlnZ2VyKHose3ZpZXc6ZS52aWV3fSl9KSxsLnZpZXdDb250YWluZXIuYmluZChSLGZ1bmN0aW9uKCl7bC50cmlnZ2VyKFIpfSksdGhpcy5nZXRMYXlvdXRQcm94eT1lLnByb3h5KHRoaXMsXCJfZ2V0TGF5b3V0XCIpLGwuX3NldHVwTGF5b3V0cyhhKSxzPWEuY2hpbGRyZW4obC5fbG9jYXRlKFwibW9kYWx2aWV3IGRyYXdlclwiKSksbC4kYW5ndWxhcj9zLmVhY2goZnVuY3Rpb24odCxuKXtDKGUobiksZnVuY3Rpb24oKXt9KX0pOnIocyksdGhpcy5iaW5kKHRoaXMuZXZlbnRzLHQpfSxldmVudHM6W1AsUix6LEUsTSxJLEZdLGRlc3Ryb3k6ZnVuY3Rpb24oKXtvLmRlc3Ryb3kodGhpcy5jb250YWluZXIpO2Zvcih2YXIgZSBpbiB0aGlzLmxheW91dHMpdGhpcy5sYXlvdXRzW2VdLmRlc3Ryb3koKX0sdmlldzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXdDb250YWluZXIudmlld30sc2hvd1ZpZXc6ZnVuY3Rpb24oZSx0LG4pe2lmKGU9ZS5yZXBsYWNlKFJlZ0V4cChcIl5cIit0aGlzLnJlbW90ZVZpZXdVUkxQcmVmaXgpLFwiXCIpLFwiXCI9PT1lJiZ0aGlzLnJlbW90ZVZpZXdVUkxQcmVmaXgmJihlPVwiL1wiKSxlPT09dGhpcy51cmwpcmV0dXJuIHRoaXMudHJpZ2dlcihJKSwhMTt0aGlzLnRyaWdnZXIoUCk7dmFyIGk9dGhpcyxyPWZ1bmN0aW9uKG4pe3JldHVybiBpLnZpZXdDb250YWluZXIuc2hvdyhuLHQsZSl9LGE9aS5fZmluZFZpZXdFbGVtZW50KGUpLHM9by53aWRnZXRJbnN0YW5jZShhKTtyZXR1cm4gaS51cmw9ZSxpLnBhcmFtcz1uLHMmJnMucmVsb2FkJiYocy5wdXJnZSgpLGE9W10pLHRoaXMudHJpZ2dlcihGLHtyZW1vdGU6MD09PWEubGVuZ3RoLHVybDplfSksYVswXT8oc3x8KHM9aS5fY3JlYXRlVmlldyhhKSkscihzKSk6KHRoaXMuc2VydmVyTmF2aWdhdGlvbj9sb2NhdGlvbi5ocmVmPWU6aS5fbG9hZFZpZXcoZSxyKSwhMCl9LGFwcGVuZDpmdW5jdGlvbihlLHQpe3ZhciBuLGksbyxhPXRoaXMuc2FuZGJveCxzPSh0fHxcIlwiKS5zcGxpdChcIj9cIilbMF0sYz10aGlzLmNvbnRhaW5lcjtyZXR1cm4gQS50ZXN0KGUpJiYoZT1SZWdFeHAuJDEpLGFbMF0uaW5uZXJIVE1MPWUsYy5hcHBlbmQoYS5jaGlsZHJlbihcInNjcmlwdCwgc3R5bGVcIikpLG49dGhpcy5faGlkZVZpZXdzKGEpLG89bi5maXJzdCgpLG8ubGVuZ3RofHwobj1vPWEud3JhcElubmVyKFwiPGRpdiBkYXRhLXJvbGU9dmlldyAvPlwiKS5jaGlsZHJlbigpKSxzJiZvLmhpZGUoKS5hdHRyKGwoXCJ1cmxcIikscyksdGhpcy5fc2V0dXBMYXlvdXRzKGEpLGk9YS5jaGlsZHJlbih0aGlzLl9sb2NhdGUoXCJtb2RhbHZpZXcgZHJhd2VyXCIpKSxjLmFwcGVuZChhLmNoaWxkcmVuKHRoaXMuX2xvY2F0ZShcImxheW91dCBtb2RhbHZpZXcgZHJhd2VyXCIpKS5hZGQobikpLHIoaSksdGhpcy5fY3JlYXRlVmlldyhvKX0sX2xvY2F0ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy4kYW5ndWxhcj94KGUpOmsoZSl9LF9maW5kVmlld0VsZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLnNwbGl0KFwiP1wiKVswXTtyZXR1cm4gbj8odD10aGlzLmNvbnRhaW5lci5jaGlsZHJlbihcIltcIitsKFwidXJsXCIpK1wiPSdcIituK1wiJ11cIiksdFswXXx8LTEhPT1uLmluZGV4T2YoXCIvXCIpfHwodD10aGlzLmNvbnRhaW5lci5jaGlsZHJlbihcIiNcIj09PW4uY2hhckF0KDApP246XCIjXCIrbikpLHQpOnRoaXMucm9vdFZpZXd9LF9jcmVhdGVWaWV3OmZ1bmN0aW9uKGUpe2lmKHRoaXMuJGFuZ3VsYXIpe3ZhciB0PXRoaXM7cmV0dXJuIEMoZSxmdW5jdGlvbihlKXtlLnZpZXdPcHRpb25zPXtkZWZhdWx0VHJhbnNpdGlvbjp0LnRyYW5zaXRpb24sbG9hZGVyOnQubG9hZGVyLGNvbnRhaW5lcjp0LmNvbnRhaW5lcixnZXRMYXlvdXQ6dC5nZXRMYXlvdXRQcm94eX19KX1yZXR1cm4gby5pbml0V2lkZ2V0KGUse2RlZmF1bHRUcmFuc2l0aW9uOnRoaXMudHJhbnNpdGlvbixsb2FkZXI6dGhpcy5sb2FkZXIsY29udGFpbmVyOnRoaXMuY29udGFpbmVyLGdldExheW91dDp0aGlzLmdldExheW91dFByb3h5LG1vZGVsU2NvcGU6dGhpcy5tb2RlbFNjb3BlLHJlbG9hZDpiKGUsXCJyZWxvYWRcIil9LHMucm9sZXMpfSxfZ2V0TGF5b3V0OmZ1bmN0aW9uKGUpe3JldHVyblwiXCI9PT1lP251bGw6ZT90aGlzLmxheW91dHNbZV06dGhpcy5sYXlvdXRzW3RoaXMubGF5b3V0XX0sX2xvYWRWaWV3OmZ1bmN0aW9uKHQsbil7dGhpcy5feGhyJiZ0aGlzLl94aHIuYWJvcnQoKSx0aGlzLnRyaWdnZXIoRSksdGhpcy5feGhyPWUuZ2V0KG8uYWJzb2x1dGVVUkwodCx0aGlzLnJlbW90ZVZpZXdVUkxQcmVmaXgpLFwiaHRtbFwiKS5hbHdheXMoZS5wcm94eSh0aGlzLFwiX3hockNvbXBsZXRlXCIsbix0KSl9LF94aHJDb21wbGV0ZTpmdW5jdGlvbihlLHQsbil7dmFyIGk9ITA7XCJvYmplY3RcIj09dHlwZW9mIG4mJihpPTA9PT1uLnN0YXR1cyYmbi5yZXNwb25zZVRleHQubGVuZ3RoPjAsbj1uLnJlc3BvbnNlVGV4dCksdGhpcy50cmlnZ2VyKE0pLGkmJmUodGhpcy5hcHBlbmQobix0KSl9LF9oaWRlVmlld3M6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hpbGRyZW4odGhpcy5fbG9jYXRlKFwidmlldyBzcGxpdHZpZXdcIikpLmhpZGUoKX0sX3NldHVwTGF5b3V0czpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXM7dC5jaGlsZHJlbihpLl9sb2NhdGUoXCJsYXlvdXRcIikpLmVhY2goZnVuY3Rpb24oKXtuPWkuJGFuZ3VsYXI/QyhlKHRoaXMpKTpvLmluaXRXaWRnZXQoZSh0aGlzKSx7fSxzLnJvbGVzKTt2YXIgdD1uLm9wdGlvbnMucGxhdGZvcm07dCYmdCE9PWEuYXBwbGljYXRpb24ub3MubmFtZT9uLmRlc3Ryb3koKTppLmxheW91dHNbbi5vcHRpb25zLmlkXT1ufSl9fSk7by5tb2JpbGUuVmlld0VuZ2luZT1CLHMucGx1Z2luKFMpLHMucGx1Z2luKFQpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXt2YXIgdD13aW5kb3cua2VuZG8sbj10Lm1vYmlsZS51aSxpPW4uV2lkZ2V0LHI9ZS5tYXAodC5ldmVudE1hcCxmdW5jdGlvbihlKXtyZXR1cm4gZX0pLmpvaW4oXCIgXCIpLnNwbGl0KFwiIFwiKSxvPWkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIHI9dGhpcyxvPWUoJzxkaXYgY2xhc3M9XCJrbS1sb2FkZXJcIj48c3BhbiBjbGFzcz1cImttLWxvYWRpbmcga20tc3BpblwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImttLWxvYWRpbmctbGVmdFwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImttLWxvYWRpbmctcmlnaHRcIj48L3NwYW4+PC9kaXY+Jyk7aS5mbi5pbml0LmNhbGwocixvLG4pLHIuY29udGFpbmVyPXQsci5jYXB0dXJlRXZlbnRzPSExLHIuX2F0dGFjaENhcHR1cmUoKSxvLmFwcGVuZChyLm9wdGlvbnMubG9hZGluZykuaGlkZSgpLmFwcGVuZFRvKHQpfSxvcHRpb25zOntuYW1lOlwiTG9hZGVyXCIsbG9hZGluZzpcIjxoMT5Mb2FkaW5nLi4uPC9oMT5cIix0aW1lb3V0OjEwMH0sc2hvdzpmdW5jdGlvbigpe3ZhciBlPXRoaXM7Y2xlYXJUaW1lb3V0KGUuX2xvYWRpbmcpLGUub3B0aW9ucy5sb2FkaW5nIT09ITEmJihlLmNhcHR1cmVFdmVudHM9ITAsZS5fbG9hZGluZz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5lbGVtZW50LnNob3coKX0sZS5vcHRpb25zLnRpbWVvdXQpKX0saGlkZTpmdW5jdGlvbigpe3RoaXMuY2FwdHVyZUV2ZW50cz0hMSxjbGVhclRpbWVvdXQodGhpcy5fbG9hZGluZyksdGhpcy5lbGVtZW50LmhpZGUoKX0sY2hhbmdlTWVzc2FnZTpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnMubG9hZGluZz1lLHRoaXMuZWxlbWVudC5maW5kKFwiPmgxXCIpLmh0bWwoZSl9LHRyYW5zaXRpb246ZnVuY3Rpb24oKXt0aGlzLmNhcHR1cmVFdmVudHM9ITAsdGhpcy5jb250YWluZXIuY3NzKFwicG9pbnRlci1ldmVudHNcIixcIm5vbmVcIil9LHRyYW5zaXRpb25Eb25lOmZ1bmN0aW9uKCl7dGhpcy5jYXB0dXJlRXZlbnRzPSExLHRoaXMuY29udGFpbmVyLmNzcyhcInBvaW50ZXItZXZlbnRzXCIsXCJcIil9LF9hdHRhY2hDYXB0dXJlOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtuLmNhcHR1cmVFdmVudHMmJmUucHJldmVudERlZmF1bHQoKX12YXIgdCxuPXRoaXM7Zm9yKG4uY2FwdHVyZUV2ZW50cz0hMSx0PTA7ci5sZW5ndGg+dDt0Kyspbi5jb250YWluZXJbMF0uYWRkRXZlbnRMaXN0ZW5lcihyW3RdLGUsITApfX0pO24ucGx1Z2luKG8pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe3ZhciBuPXdpbmRvdy5rZW5kbyxpPW4ubW9iaWxlLHI9bi5yb2xlU2VsZWN0b3Isbz1pLnVpLGE9by5XaWRnZXQscz1pLlZpZXdFbmdpbmUsbD1vLlZpZXcsYz1pLnVpLkxvYWRlcixkPVwiZXh0ZXJuYWxcIix1PVwiaHJlZlwiLGg9XCIjIVwiLHA9XCJuYXZpZ2F0ZVwiLGY9XCJ2aWV3U2hvd1wiLGc9XCJzYW1lVmlld1JlcXVlc3RlZFwiLG09bi5zdXBwb3J0Lm1vYmlsZU9TLHY9bS5pb3MmJiFtLmFwcE1vZGUmJm0uZmxhdFZlcnNpb24+PTcwMCxfPS9wb3BvdmVyfGFjdGlvbnNoZWV0fG1vZGFsdmlld3xkcmF3ZXIvLHk9XCIjOmJhY2tcIix3PW4uYXR0clZhbHVlLGI9XCJidXR0b24gYmFja2J1dHRvbiBkZXRhaWxidXR0b24gbGlzdHZpZXctbGlua1wiLGs9XCJ0YWJcIix4PWEuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpczthLmZuLmluaXQuY2FsbChpLGUsdCksdD1pLm9wdGlvbnMsZT1pLmVsZW1lbnQsZS5hZGRDbGFzcyhcImttLXBhbmVcIiksaS5vcHRpb25zLmNvbGxhcHNpYmxlJiZlLmFkZENsYXNzKFwia20tY29sbGFwc2libGUtcGFuZVwiKSx0aGlzLmhpc3Rvcnk9W10sdGhpcy5oaXN0b3J5Q2FsbGJhY2s9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWkudHJhbnNpdGlvbjtyZXR1cm4gaS50cmFuc2l0aW9uPW51bGwsdiYmbiYmKHI9XCJub25lXCIpLGkudmlld0VuZ2luZS5zaG93VmlldyhlLHIsdCl9LHRoaXMuX2hpc3RvcnlOYXZpZ2F0ZT1mdW5jdGlvbihlKXtpZihlPT09eSl7aWYoMT09PWkuaGlzdG9yeS5sZW5ndGgpcmV0dXJuO2kuaGlzdG9yeS5wb3AoKSxlPWkuaGlzdG9yeVtpLmhpc3RvcnkubGVuZ3RoLTFdfWVsc2UgaS5oaXN0b3J5LnB1c2goZSk7aS5oaXN0b3J5Q2FsbGJhY2soZSxuLnBhcnNlUXVlcnlTdHJpbmdQYXJhbXMoZSkpfSx0aGlzLl9oaXN0b3J5UmVwbGFjZT1mdW5jdGlvbihlKXt2YXIgdD1uLnBhcnNlUXVlcnlTdHJpbmdQYXJhbXMoZSk7aS5oaXN0b3J5W2kuaGlzdG9yeS5sZW5ndGgtMV09ZSxpLmhpc3RvcnlDYWxsYmFjayhlLHQpfSxpLmxvYWRlcj1uZXcgYyhlLHtsb2FkaW5nOmkub3B0aW9ucy5sb2FkaW5nfSksaS52aWV3RW5naW5lPW5ldyBzKHtjb250YWluZXI6ZSx0cmFuc2l0aW9uOnQudHJhbnNpdGlvbixtb2RlbFNjb3BlOnQubW9kZWxTY29wZSxyb290TmVlZGVkOiF0LmluaXRpYWwsc2VydmVyTmF2aWdhdGlvbjp0LnNlcnZlck5hdmlnYXRpb24scmVtb3RlVmlld1VSTFByZWZpeDp0LnJvb3R8fFwiXCIsbGF5b3V0OnQubGF5b3V0LCRhbmd1bGFyOnQuJGFuZ3VsYXIsbG9hZGVyOmkubG9hZGVyLHNob3dTdGFydDpmdW5jdGlvbigpe2kubG9hZGVyLnRyYW5zaXRpb24oKSxpLmNsb3NlQWN0aXZlRGlhbG9ncygpfSxhZnRlcjpmdW5jdGlvbigpe2kubG9hZGVyLnRyYW5zaXRpb25Eb25lKCl9LHZpZXdTaG93OmZ1bmN0aW9uKGUpe2kudHJpZ2dlcihmLGUpfSxsb2FkU3RhcnQ6ZnVuY3Rpb24oKXtpLmxvYWRlci5zaG93KCl9LGxvYWRDb21wbGV0ZTpmdW5jdGlvbigpe2kubG9hZGVyLmhpZGUoKX0sc2FtZVZpZXdSZXF1ZXN0ZWQ6ZnVuY3Rpb24oKXtpLnRyaWdnZXIoZyl9LHZpZXdUeXBlRGV0ZXJtaW5lZDpmdW5jdGlvbihlKXtlLnJlbW90ZSYmaS5vcHRpb25zLnNlcnZlck5hdmlnYXRpb258fGkudHJpZ2dlcihwLHt1cmw6ZS51cmx9KX19KSx0aGlzLl9zZXRQb3J0cmFpdFdpZHRoKCksbi5vblJlc2l6ZShmdW5jdGlvbigpe2kuX3NldFBvcnRyYWl0V2lkdGgoKX0pLGkuX3NldHVwQXBwTGlua3MoKX0sY2xvc2VBY3RpdmVEaWFsb2dzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5lbGVtZW50LmZpbmQocihcImFjdGlvbnNoZWV0IHBvcG92ZXIgbW9kYWx2aWV3XCIpKS5maWx0ZXIoXCI6dmlzaWJsZVwiKTt0LmVhY2goZnVuY3Rpb24oKXtuLndpZGdldEluc3RhbmNlKGUodGhpcyksbykuY2xvc2UoKX0pfSxuYXZpZ2F0ZVRvSW5pdGlhbDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5pbml0aWFsO2UmJnRoaXMubmF2aWdhdGUoZSl9LG9wdGlvbnM6e25hbWU6XCJQYW5lXCIscG9ydHJhaXRXaWR0aDpcIlwiLHRyYW5zaXRpb246XCJcIixsYXlvdXQ6XCJcIixjb2xsYXBzaWJsZTohMSxpbml0aWFsOm51bGwsbW9kZWxTY29wZTp3aW5kb3csbG9hZGluZzpcIjxoMT5Mb2FkaW5nLi4uPC9oMT5cIn0sZXZlbnRzOltwLGYsZ10sYXBwZW5kOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnZpZXdFbmdpbmUuYXBwZW5kKGUpfSxkZXN0cm95OmZ1bmN0aW9uKCl7YS5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy52aWV3RW5naW5lLmRlc3Ryb3koKSx0aGlzLnVzZXJFdmVudHMuZGVzdHJveSgpfSxuYXZpZ2F0ZTpmdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBsJiYoZT1lLmlkKSx0aGlzLnRyYW5zaXRpb249dCx0aGlzLl9oaXN0b3J5TmF2aWdhdGUoZSl9LHJlcGxhY2U6ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2YgbCYmKGU9ZS5pZCksdGhpcy50cmFuc2l0aW9uPXQsdGhpcy5faGlzdG9yeVJlcGxhY2UoZSl9LGJpbmRUb1JvdXRlcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLGk9dGhpcy5oaXN0b3J5LHI9dGhpcy52aWV3RW5naW5lO2UuYmluZChcImluaXRcIixmdW5jdGlvbih0KXt2YXIgbyxhPXQudXJsLHM9ZS5wdXNoU3RhdGU/YTpcIi9cIjtyLnJvb3RWaWV3LmF0dHIobi5hdHRyKFwidXJsXCIpLHMpLG89aS5sZW5ndGgsXCIvXCI9PT1hJiZvJiYoZS5uYXZpZ2F0ZShpW28tMV0sITApLHQucHJldmVudERlZmF1bHQoKSl9KSxlLmJpbmQoXCJyb3V0ZU1pc3NpbmdcIixmdW5jdGlvbihlKXt0Lmhpc3RvcnlDYWxsYmFjayhlLnVybCxlLnBhcmFtcyxlLmJhY2tCdXR0b25QcmVzc2VkKXx8ZS5wcmV2ZW50RGVmYXVsdCgpfSksZS5iaW5kKFwic2FtZVwiLGZ1bmN0aW9uKCl7dC50cmlnZ2VyKGcpfSksdC5faGlzdG9yeU5hdmlnYXRlPWZ1bmN0aW9uKHQpe2UubmF2aWdhdGUodCl9LHQuX2hpc3RvcnlSZXBsYWNlPWZ1bmN0aW9uKHQpe2UucmVwbGFjZSh0KX19LGhpZGVMb2FkaW5nOmZ1bmN0aW9uKCl7dGhpcy5sb2FkZXIuaGlkZSgpfSxzaG93TG9hZGluZzpmdW5jdGlvbigpe3RoaXMubG9hZGVyLnNob3coKX0sY2hhbmdlTG9hZGluZ01lc3NhZ2U6ZnVuY3Rpb24oZSl7dGhpcy5sb2FkZXIuY2hhbmdlTWVzc2FnZShlKX0sdmlldzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXdFbmdpbmUudmlldygpfSxfc2V0UG9ydHJhaXRXaWR0aDpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5vcHRpb25zLnBvcnRyYWl0V2lkdGg7dCYmKGU9bi5tb2JpbGUuYXBwbGljYXRpb24uZWxlbWVudC5pcyhcIi5rbS12ZXJ0aWNhbFwiKT90OlwiYXV0b1wiLHRoaXMuZWxlbWVudC5jc3MoXCJ3aWR0aFwiLGUpKX0sX3NldHVwQXBwTGlua3M6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuZWxlbWVudC5oYW5kbGVyKHRoaXMpLm9uKFwiZG93blwiLHIoayksXCJfbW91c2V1cFwiKS5vbihcImNsaWNrXCIscihrK1wiIFwiK2IpLFwiX2FwcExpbmtDbGlja1wiKSx0aGlzLnVzZXJFdmVudHM9bmV3IG4uVXNlckV2ZW50cyh0aGlzLmVsZW1lbnQse2ZpbHRlcjpyKGIpLHRhcDpmdW5jdGlvbih0KXt0LmV2ZW50LmN1cnJlbnRUYXJnZXQ9dC50b3VjaC5jdXJyZW50VGFyZ2V0LGUuX21vdXNldXAodC5ldmVudCl9fSl9LF9hcHBMaW5rQ2xpY2s6ZnVuY3Rpb24odCl7dmFyIG49ZSh0LmN1cnJlbnRUYXJnZXQpLmF0dHIoXCJocmVmXCIpLGk9biYmXCIjXCIhPT1uWzBdJiZ0aGlzLm9wdGlvbnMuc2VydmVyTmF2aWdhdGlvbjtpfHx3KGUodC5jdXJyZW50VGFyZ2V0KSxcInJlbFwiKT09ZHx8dC5wcmV2ZW50RGVmYXVsdCgpfSxfbW91c2V1cDpmdW5jdGlvbihyKXtpZighKHIud2hpY2g+MXx8ci5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkpe3ZhciBhPXRoaXMscz1lKHIuY3VycmVudFRhcmdldCksbD13KHMsXCJ0cmFuc2l0aW9uXCIpLGM9dyhzLFwicmVsXCIpfHxcIlwiLHA9dyhzLFwidGFyZ2V0XCIpLGY9cy5hdHRyKHUpLGc9diYmMD09PXNbMF0ub2Zmc2V0SGVpZ2h0LG09ZiYmXCIjXCIhPT1mWzBdJiZ0aGlzLm9wdGlvbnMuc2VydmVyTmF2aWdhdGlvbjtnfHxtfHxjPT09ZHx8dD09PWZ8fGY9PT1ofHwocy5hdHRyKHUsaCksc2V0VGltZW91dChmdW5jdGlvbigpe3MuYXR0cih1LGYpfSksYy5tYXRjaChfKT8obi53aWRnZXRJbnN0YW5jZShlKGYpLG8pLm9wZW5Gb3IocyksKFwiYWN0aW9uc2hlZXRcIj09PWN8fFwiZHJhd2VyXCI9PT1jKSYmci5zdG9wUHJvcGFnYXRpb24oKSk6KFwiX3RvcFwiPT09cD9hPWkuYXBwbGljYXRpb24ucGFuZTpwJiYoYT1lKFwiI1wiK3ApLmRhdGEoXCJrZW5kb01vYmlsZVBhbmVcIikpLGEubmF2aWdhdGUoZixsKSksci5wcmV2ZW50RGVmYXVsdCgpKX19fSk7eC53cmFwPWZ1bmN0aW9uKGUpe2UuaXMocihcInZpZXdcIikpfHwoZT1lLndyYXAoXCI8ZGl2IGRhdGEtXCIrbi5ucysncm9sZT1cInZpZXdcIiBkYXRhLXN0cmV0Y2g9XCJ0cnVlXCI+PC9kaXY+JykucGFyZW50KCkpO3ZhciB0PWUud3JhcCgnPGRpdiBjbGFzcz1cImttLXBhbmUtd3JhcHBlclwiPjxkaXY+PC9kaXY+PC9kaXY+JykucGFyZW50KCksaT1uZXcgeCh0KTtyZXR1cm4gaS5uYXZpZ2F0ZShcIlwiKSxpfSxvLnBsdWdpbih4KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQ9d2luZG93LmtlbmRvLG49dC5tb2JpbGUsaT1uLnVpLHI9XCJoaWRlXCIsbz1cIm9wZW5cIixhPVwiY2xvc2VcIixzPSc8ZGl2IGNsYXNzPVwia20tcG9wdXAtd3JhcHBlclwiIC8+JyxsPSc8ZGl2IGNsYXNzPVwia20tcG9wdXAtYXJyb3dcIiAvPicsYz0nPGRpdiBjbGFzcz1cImttLXBvcHVwLW92ZXJsYXlcIiAvPicsZD1cImttLXVwIGttLWRvd24ga20tbGVmdCBrbS1yaWdodFwiLHU9aS5XaWRnZXQsaD17ZG93bjp7b3JpZ2luOlwiYm90dG9tIGNlbnRlclwiLHBvc2l0aW9uOlwidG9wIGNlbnRlclwifSx1cDp7b3JpZ2luOlwidG9wIGNlbnRlclwiLHBvc2l0aW9uOlwiYm90dG9tIGNlbnRlclwifSxsZWZ0OntvcmlnaW46XCJjZW50ZXIgbGVmdFwiLHBvc2l0aW9uOlwiY2VudGVyIHJpZ2h0XCIsY29sbGlzaW9uOlwiZml0IGZsaXBcIn0scmlnaHQ6e29yaWdpbjpcImNlbnRlciByaWdodFwiLHBvc2l0aW9uOlwiY2VudGVyIGxlZnRcIixjb2xsaXNpb246XCJmaXQgZmxpcFwifX0scD17YW5pbWF0aW9uOntvcGVuOntlZmZlY3RzOlwiZmFkZTppblwiLGR1cmF0aW9uOjB9LGNsb3NlOntlZmZlY3RzOlwiZmFkZTpvdXRcIixkdXJhdGlvbjo0MDB9fX0sZj17aG9yaXpvbnRhbDp7b2Zmc2V0OlwidG9wXCIsc2l6ZTpcImhlaWdodFwifSx2ZXJ0aWNhbDp7b2Zmc2V0OlwibGVmdFwiLHNpemU6XCJ3aWR0aFwifX0sZz17dXA6XCJkb3duXCIsZG93bjpcInVwXCIsbGVmdDpcInJpZ2h0XCIscmlnaHQ6XCJsZWZ0XCJ9LG09dS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24obixpKXt2YXIgbyxhLGQ9dGhpcyxnPW4uY2xvc2VzdChcIi5rbS1tb2RhbHZpZXctd3JhcHBlclwiKSxtPW4uY2xvc2VzdChcIi5rbS1yb290XCIpLmNoaWxkcmVuKFwiLmttLXBhbmVcIikuZmlyc3QoKSx2PWdbMF0/ZzptO2kudmlld3BvcnQ/bT1pLnZpZXdwb3J0Om1bMF18fChtPXdpbmRvdyksaS5jb250YWluZXI/dj1pLmNvbnRhaW5lcjp2WzBdfHwodj1kb2N1bWVudC5ib2R5KSxvPXt2aWV3cG9ydDptLGNvcHlBbmNob3JTdHlsZXM6ITEsYXV0b3NpemU6ITAsb3BlbjpmdW5jdGlvbigpe2Qub3ZlcmxheS5zaG93KCl9LGFjdGl2YXRlOmUucHJveHkoZC5fYWN0aXZhdGUsZCksZGVhY3RpdmF0ZTpmdW5jdGlvbigpe2Qub3ZlcmxheS5oaWRlKCksZC5fYXBpQ2FsbHx8ZC50cmlnZ2VyKHIpLGQuX2FwaUNhbGw9ITF9fSx1LmZuLmluaXQuY2FsbChkLG4saSksbj1kLmVsZW1lbnQsaT1kLm9wdGlvbnMsbi53cmFwKHMpLmFkZENsYXNzKFwia20tcG9wdXBcIikuc2hvdygpLGE9ZC5vcHRpb25zLmRpcmVjdGlvbi5tYXRjaCgvbGVmdHxyaWdodC8pP1wiaG9yaXpvbnRhbFwiOlwidmVydGljYWxcIixkLmRpbWVuc2lvbnM9ZlthXSxkLndyYXBwZXI9bi5wYXJlbnQoKS5jc3Moe3dpZHRoOmkud2lkdGgsaGVpZ2h0OmkuaGVpZ2h0fSkuYWRkQ2xhc3MoXCJrbS1wb3B1cC13cmFwcGVyIGttLVwiK2kuZGlyZWN0aW9uKS5oaWRlKCksZC5hcnJvdz1lKGwpLnByZXBlbmRUbyhkLndyYXBwZXIpLmhpZGUoKSxkLm92ZXJsYXk9ZShjKS5hcHBlbmRUbyh2KS5oaWRlKCksby5hcHBlbmRUbz1kLm92ZXJsYXksaS5jbGFzc05hbWUmJmQub3ZlcmxheS5hZGRDbGFzcyhpLmNsYXNzTmFtZSksZC5wb3B1cD1uZXcgdC51aS5Qb3B1cChkLndyYXBwZXIsZS5leHRlbmQoITAsbyxwLGhbaS5kaXJlY3Rpb25dKSl9LG9wdGlvbnM6e25hbWU6XCJQb3B1cFwiLHdpZHRoOjI0MCxoZWlnaHQ6XCJcIixkaXJlY3Rpb246XCJkb3duXCIsY29udGFpbmVyOm51bGwsdmlld3BvcnQ6bnVsbH0sZXZlbnRzOltyXSxzaG93OmZ1bmN0aW9uKHQpe3RoaXMucG9wdXAub3B0aW9ucy5hbmNob3I9ZSh0KSx0aGlzLnBvcHVwLm9wZW4oKX0saGlkZTpmdW5jdGlvbigpe3RoaXMuX2FwaUNhbGw9ITAsdGhpcy5wb3B1cC5jbG9zZSgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dS5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5wb3B1cC5kZXN0cm95KCksdGhpcy5vdmVybGF5LnJlbW92ZSgpfSx0YXJnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3B1cC5vcHRpb25zLmFuY2hvcn0sX2FjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucy5kaXJlY3Rpb24saT10LmRpbWVuc2lvbnMscj1pLm9mZnNldCxvPXQucG9wdXAsYT1vLm9wdGlvbnMuYW5jaG9yLHM9ZShhKS5vZmZzZXQoKSxsPWUoby5lbGVtZW50KS5vZmZzZXQoKSxjPW8uZmxpcHBlZD9nW25dOm4sdT0yKnQuYXJyb3dbaS5zaXplXSgpLGg9dC5lbGVtZW50W2kuc2l6ZV0oKS10LmFycm93W2kuc2l6ZV0oKSxwPWUoYSlbaS5zaXplXSgpLGY9c1tyXS1sW3JdK3AvMjt1PmYmJihmPXUpLGY+aCYmKGY9aCksdC53cmFwcGVyLnJlbW92ZUNsYXNzKGQpLmFkZENsYXNzKFwia20tXCIrYyksdC5hcnJvdy5jc3MocixmKS5zaG93KCl9fSksdj11LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihuLHIpe3ZhciBvLHM9dGhpcztzLmluaXRpYWxPcGVuPSExLHUuZm4uaW5pdC5jYWxsKHMsbixyKSxvPWUuZXh0ZW5kKHtjbGFzc05hbWU6XCJrbS1wb3BvdmVyLXJvb3RcIixoaWRlOmZ1bmN0aW9uKCl7cy50cmlnZ2VyKGEpfX0sdGhpcy5vcHRpb25zLnBvcHVwKSxzLnBvcHVwPW5ldyBtKHMuZWxlbWVudCxvKSxzLnBvcHVwLm92ZXJsYXkub24oXCJtb3ZlXCIsZnVuY3Rpb24oZSl7ZS50YXJnZXQ9PXMucG9wdXAub3ZlcmxheVswXSYmZS5wcmV2ZW50RGVmYXVsdCgpfSkscy5wYW5lPW5ldyBpLlBhbmUocy5lbGVtZW50LGUuZXh0ZW5kKHRoaXMub3B0aW9ucy5wYW5lLHskYW5ndWxhcjp0aGlzLm9wdGlvbnMuJGFuZ3VsYXJ9KSkscy5wYW5lLm5hdmlnYXRlVG9Jbml0aWFsKCksdC5ub3RpZnkocyxpKX0sb3B0aW9uczp7bmFtZTpcIlBvcE92ZXJcIixwb3B1cDp7fSxwYW5lOnt9fSxldmVudHM6W28sYV0sb3BlbjpmdW5jdGlvbihlKXt0aGlzLnBvcHVwLnNob3coZSksdGhpcy5pbml0aWFsT3Blbj90aGlzLnBhbmUudmlldygpLl9pbnZva2VOZ0NvbnRyb2xsZXIoKToodGhpcy5wYW5lLm5hdmlnYXRlKFwiXCIpLHRoaXMucG9wdXAucG9wdXAuX3Bvc2l0aW9uKCksdGhpcy5pbml0aWFsT3Blbj0hMCl9LG9wZW5Gb3I6ZnVuY3Rpb24oZSl7dGhpcy5vcGVuKGUpLHRoaXMudHJpZ2dlcihvLHt0YXJnZXQ6dGhpcy5wb3B1cC50YXJnZXQoKX0pfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMucG9wdXAuaGlkZSgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dS5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5wYW5lLmRlc3Ryb3koKSx0aGlzLnBvcHVwLmRlc3Ryb3koKSx0LmRlc3Ryb3kodGhpcy5lbGVtZW50KX19KTtpLnBsdWdpbihtKSxpLnBsdWdpbih2KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXt2YXIgbj13aW5kb3cua2VuZG8saT1uLm1vYmlsZS51aSxyPW4udWkuUG9wdXAsbz0nPGRpdiBjbGFzcz1cImttLXNoaW1cIi8+JyxhPVwiaGlkZVwiLHM9aS5XaWRnZXQsbD1zLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LGkpe3ZhciBsPXRoaXMsYz1uLm1vYmlsZS5hcHBsaWNhdGlvbixkPW4uc3VwcG9ydC5tb2JpbGVPUyx1PWM/Yy5vcy5uYW1lOmQ/ZC5uYW1lOlwiaW9zXCIsaD1cImlvc1wiPT09dXx8XCJ3cFwiPT09dXx8KGM/Yy5vcy5za2luOiExKSxwPVwiYmxhY2tiZXJyeVwiPT09dSxmPWkuYWxpZ258fChoP1wiYm90dG9tIGNlbnRlclwiOnA/XCJjZW50ZXIgcmlnaHRcIjpcImNlbnRlciBjZW50ZXJcIiksZz1pLnBvc2l0aW9ufHwoaD9cImJvdHRvbSBjZW50ZXJcIjpwP1wiY2VudGVyIHJpZ2h0XCI6XCJjZW50ZXIgY2VudGVyXCIpLG09aS5lZmZlY3R8fChoP1wic2xpZGVJbjp1cFwiOnA/XCJzbGlkZUluOmxlZnRcIjpcImZhZGU6aW5cIiksdj1lKG8pLmhhbmRsZXIobCkuaGlkZSgpO3MuZm4uaW5pdC5jYWxsKGwsdCxpKSxsLnNoaW09dix0PWwuZWxlbWVudCxpPWwub3B0aW9ucyxpLmNsYXNzTmFtZSYmbC5zaGltLmFkZENsYXNzKGkuY2xhc3NOYW1lKSxpLm1vZGFsfHxsLnNoaW0ub24oXCJ1cFwiLFwiX2hpZGVcIiksKGM/Yy5lbGVtZW50OmUoZG9jdW1lbnQuYm9keSkpLmFwcGVuZCh2KSxsLnBvcHVwPW5ldyByKGwuZWxlbWVudCx7YW5jaG9yOnYsbW9kYWw6ITAsYXBwZW5kVG86dixvcmlnaW46Zixwb3NpdGlvbjpnLGFuaW1hdGlvbjp7b3Blbjp7ZWZmZWN0czptLGR1cmF0aW9uOmkuZHVyYXRpb259LGNsb3NlOntkdXJhdGlvbjppLmR1cmF0aW9ufX0sY2xvc2U6ZnVuY3Rpb24oZSl7dmFyIHQ9ITE7bC5fYXBpQ2FsbHx8KHQ9bC50cmlnZ2VyKGEpKSx0JiZlLnByZXZlbnREZWZhdWx0KCksbC5fYXBpQ2FsbD0hMX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3YuaGlkZSgpfSxvcGVuOmZ1bmN0aW9uKCl7di5zaG93KCl9fSksbi5ub3RpZnkobCl9LGV2ZW50czpbYV0sb3B0aW9uczp7bmFtZTpcIlNoaW1cIixtb2RhbDohMSxhbGlnbjp0LHBvc2l0aW9uOnQsZWZmZWN0OnQsZHVyYXRpb246MjAwfSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5wb3B1cC5vcGVuKCl9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLl9hcGlDYWxsPSEwLHRoaXMucG9wdXAuY2xvc2UoKX0sZGVzdHJveTpmdW5jdGlvbigpe3MuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuc2hpbS5rZW5kb0Rlc3Ryb3koKSx0aGlzLnBvcHVwLmRlc3Ryb3koKSx0aGlzLnNoaW0ucmVtb3ZlKCl9LF9oaWRlOmZ1bmN0aW9uKHQpe3QmJmUuY29udGFpbnModGhpcy5zaGltLmNoaWxkcmVuKCkuY2hpbGRyZW4oXCIuay1wb3B1cFwiKVswXSx0LnRhcmdldCl8fHRoaXMucG9wdXAuY2xvc2UoKX19KTtpLnBsdWdpbihsKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQ9d2luZG93LmtlbmRvLG49dC5zdXBwb3J0LGk9dC5tb2JpbGUudWkscj1pLlNoaW0sbz1pLlBvcHVwLGE9aS5XaWRnZXQscz1cIm9wZW5cIixsPVwiY2xvc2VcIixjPVwiY29tbWFuZFwiLGQ9XCJsaT5hXCIsdT1cImFjdGlvbnNoZWV0Q29udGV4dFwiLGg9JzxkaXYgY2xhc3M9XCJrbS1hY3Rpb25zaGVldC13cmFwcGVyXCIgLz4nLHA9dC50ZW1wbGF0ZSgnPGxpIGNsYXNzPVwia20tYWN0aW9uc2hlZXQtY2FuY2VsXCI+PGEgaHJlZj1cIlxcXFwjXCI+IzpjYW5jZWwjPC9hPjwvbGk+JyksZj1hLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihzLGwpe3ZhciBjLHUsZixnPXRoaXMsbT1uLm1vYmlsZU9TO2EuZm4uaW5pdC5jYWxsKGcscyxsKSxsPWcub3B0aW9ucyxmPWwudHlwZSxzPWcuZWxlbWVudCx1PVwiYXV0b1wiPT09Zj9tJiZtLnRhYmxldDpcInRhYmxldFwiPT09ZixjPXU/bzpyLGwuY2FuY2VsVGVtcGxhdGUmJihwPXQudGVtcGxhdGUobC5jYW5jZWxUZW1wbGF0ZSkpLHMuYWRkQ2xhc3MoXCJrbS1hY3Rpb25zaGVldFwiKS5hcHBlbmQocCh7Y2FuY2VsOmcub3B0aW9ucy5jYW5jZWx9KSkud3JhcChoKS5vbihcInVwXCIsZCxcIl9jbGlja1wiKS5vbihcImNsaWNrXCIsZCx0LnByZXZlbnREZWZhdWx0KSxnLnZpZXcoKS5iaW5kKFwiZGVzdHJveVwiLGZ1bmN0aW9uKCl7Zy5kZXN0cm95KCl9KSxnLndyYXBwZXI9cy5wYXJlbnQoKS5hZGRDbGFzcyhmP1wiIGttLWFjdGlvbnNoZWV0LVwiK2Y6XCJcIiksZy5zaGltPW5ldyBjKGcud3JhcHBlcixlLmV4dGVuZCh7bW9kYWw6bS5pb3MmJjc+bS5tYWpvclZlcnNpb24sY2xhc3NOYW1lOlwia20tYWN0aW9uc2hlZXQtcm9vdFwifSxnLm9wdGlvbnMucG9wdXApKSxnLl9jbG9zZVByb3h5PWUucHJveHkoZyxcIl9jbG9zZVwiKSxnLnNoaW0uYmluZChcImhpZGVcIixnLl9jbG9zZVByb3h5KSx1JiZ0Lm9uUmVzaXplKGcuX2Nsb3NlUHJveHkpLHQubm90aWZ5KGcsaSl9LGV2ZW50czpbcyxsLGNdLG9wdGlvbnM6e25hbWU6XCJBY3Rpb25TaGVldFwiLGNhbmNlbDpcIkNhbmNlbFwiLHR5cGU6XCJhdXRvXCIscG9wdXA6e2hlaWdodDpcImF1dG9cIn19LG9wZW46ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzO2kudGFyZ2V0PWUodCksaS5jb250ZXh0PW4saS5zaGltLnNob3codCl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5jb250ZXh0PXRoaXMudGFyZ2V0PW51bGwsdGhpcy5zaGltLmhpZGUoKX0sb3BlbkZvcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5kYXRhKHUpO3Qub3BlbihlLG4pLHQudHJpZ2dlcihzLHt0YXJnZXQ6ZSxjb250ZXh0Om59KX0sZGVzdHJveTpmdW5jdGlvbigpe2EuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHQudW5iaW5kUmVzaXplKHRoaXMuX2Nsb3NlUHJveHkpLHRoaXMuc2hpbS5kZXN0cm95KCl9LF9jbGljazpmdW5jdGlvbihuKXt2YXIgaSxyLG8sYTtuLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwoaT1lKG4uY3VycmVudFRhcmdldCkscj1pLmRhdGEoXCJhY3Rpb25cIiksciYmKG89e3RhcmdldDp0aGlzLnRhcmdldCxjb250ZXh0OnRoaXMuY29udGV4dH0sYT10aGlzLm9wdGlvbnMuJGFuZ3VsYXIsYT90aGlzLmVsZW1lbnQuaW5qZWN0b3IoKS5nZXQoXCIkcGFyc2VcIikocikoYVswXSkobyk6dC5nZXR0ZXIocikod2luZG93KShvKSksdGhpcy50cmlnZ2VyKGMse3RhcmdldDp0aGlzLnRhcmdldCxjb250ZXh0OnRoaXMuY29udGV4dCxjdXJyZW50VGFyZ2V0Oml9KSxuLnByZXZlbnREZWZhdWx0KCksdGhpcy5fY2xvc2UoKSl9LF9jbG9zZTpmdW5jdGlvbihlKXt0aGlzLnRyaWdnZXIobCk/ZS5wcmV2ZW50RGVmYXVsdCgpOnRoaXMuY2xvc2UoKX19KTtpLnBsdWdpbihmKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUpe3JldHVybiBBcnJheShlKzEpLmpvaW4oJzx0ZCBjbGFzcz1cImstZ3JvdXAtY2VsbFwiPiZuYnNwOzwvdGQ+Jyl9ZnVuY3Rpb24gaShlKXt2YXIgdCxuPVwiIFwiO2lmKGUpe2lmKHR5cGVvZiBlPT09Y24pcmV0dXJuIGU7Zm9yKHQgaW4gZSluKz10Kyc9XCInK2VbdF0rJ1wiJ31yZXR1cm4gbn1mdW5jdGlvbiByKHQsbil7ZShcInRoLCB0aCAuay1ncmlkLWZpbHRlciwgdGggLmstbGlua1wiLHQpLmFkZChkb2N1bWVudC5ib2R5KS5jc3MoXCJjdXJzb3JcIixuKX1mdW5jdGlvbiBvKGUpe3ZhciB0LG4saT17fSxyPXt9O2lmKCFBdChlKSlmb3IoeHQoZSl8fChlPVtlXSksdD0wLG49ZS5sZW5ndGg7bj50O3QrKylpW2VbdF0uYWdncmVnYXRlXT0wLHJbZVt0XS5maWVsZF09aTtyZXR1cm4gcn1mdW5jdGlvbiBhKHQsbixpLHIsbyl7dmFyIGEscz1uO2ZvcihuPWUoKSxvPW98fDEsYT0wO28+YTthKyspbj1uLmFkZCh0LmVxKHMrYSkpO1wibnVtYmVyXCI9PXR5cGVvZiBpP25bcj9cImluc2VydEJlZm9yZVwiOlwiaW5zZXJ0QWZ0ZXJcIl0odC5lcShpKSk6bi5hcHBlbmRUbyhpKX1mdW5jdGlvbiBzKHQsbixpKXtyZXR1cm4gZSh0KS5hZGQobikuZmluZChpKX1mdW5jdGlvbiBsKGUsdCxuKXt2YXIgaSxyLG8sYTtmb3Iobj14dChuKT9uOltuXSxpPTAscj1uLmxlbmd0aDtyPmk7aSsrKW89bltpXSx5dChvKSYmby5jbGljayYmKGE9by5uYW1lfHxvLnRleHQsdC5vbihvbitPdCxcImEuay1ncmlkLVwiKyhhfHxcIlwiKS5yZXBsYWNlKC9cXHMvZyxcIlwiKSx7Y29tbWFuZE5hbWU6YX0sVHQoby5jbGljayxlKSkpfWZ1bmN0aW9uIGMoZSx0LG4pe3JldHVybiBidChlLGZ1bmN0aW9uKGUpe2U9dHlwZW9mIGU9PT1jbj97ZmllbGQ6ZX06ZTt2YXIgaTtyZXR1cm4oIXAoZSl8fG4pJiYoZS5hdHRyaWJ1dGVzPVUoZS5hdHRyaWJ1dGVzKSxlLmZvb3RlckF0dHJpYnV0ZXM9VShlLmZvb3RlckF0dHJpYnV0ZXMpLGUuaGVhZGVyQXR0cmlidXRlcz1VKGUuaGVhZGVyQXR0cmlidXRlcyksaT0hMCksZS5jb2x1bW5zJiYoZS5jb2x1bW5zPWMoZS5jb2x1bW5zLHQsaSkpLHd0KHtlbmNvZGVkOnQsaGlkZGVuOml9LGUpfSl9ZnVuY3Rpb24gZChlLHQpe3ZhciBuPVtdO3JldHVybiB1KGUsdCxuKSxuW24ubGVuZ3RoLTFdfWZ1bmN0aW9uIHUoZSx0LG4pe3ZhciBpLHI7Zm9yKG49bnx8W10saT0wO3QubGVuZ3RoPmk7aSsrKXtpZihlPT09dFtpXSlyZXR1cm4hMDtpZih0W2ldLmNvbHVtbnMpe2lmKHI9bi5sZW5ndGgsbi5wdXNoKHRbaV0pLHUoZSx0W2ldLmNvbHVtbnMsbikpcmV0dXJuITA7bi5zcGxpY2UocixuLmxlbmd0aC1yKX19cmV0dXJuITF9ZnVuY3Rpb24gaChlLHQpe3ZhciBuPXQ/VzpVO2UuaGlkZGVuPSF0LGUuYXR0cmlidXRlcz1uKGUuYXR0cmlidXRlcyksZS5mb290ZXJBdHRyaWJ1dGVzPW4oZS5mb290ZXJBdHRyaWJ1dGVzKSxlLmhlYWRlckF0dHJpYnV0ZXM9bihlLmhlYWRlckF0dHJpYnV0ZXMpfWZ1bmN0aW9uIHAoZSl7cmV0dXJuIGYoW2VdKS5sZW5ndGg+MH1mdW5jdGlvbiBmKGUpe3JldHVybiBrdChlLGZ1bmN0aW9uKGUpe3ZhciB0PSFlLmhpZGRlbjtyZXR1cm4gdCYmZS5jb2x1bW5zJiYodD1mKGUuY29sdW1ucykubGVuZ3RoPjApLHR9KX1mdW5jdGlvbiBnKHQpe3JldHVybiBlKHQpLm1hcChmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvQXJyYXkoKX0pfWZ1bmN0aW9uIG0oZSx0LG4pe3ZhciBpPXkoSSh0KSkscj15KHoodCkpLG89ZS5yb3dTcGFuO2Uucm93U3Bhbj1uP2k+cj9vLShpLXIpfHwxOm8rKHItaSk6aT5yP28rKGktcik6by0oci1pKXx8MX1mdW5jdGlvbiB2KHQsbixpLHIsbyxhLHMpe3ZhciBsLGMsZD15KHQpLHU9eShbbl0pO2Q+dSYmKGw9QXJyYXkocysxKS5qb2luKCc8dGggY2xhc3M9XCJrLWdyb3VwLWNlbGwgay1oZWFkZXJcIj4mbmJzcDs8L3RoPicpLGM9YS5jaGlsZHJlbihcIjpub3QoLmstZmlsdGVyLXJvdylcIiksZShBcnJheShkLXUrMSkuam9pbihcIjx0cj5cIitsK1wiPC90cj5cIikpLmluc2VydEFmdGVyKGMubGFzdCgpKSksRShhLGQtdSksdyhpLHIsbyxhKX1mdW5jdGlvbiBfKGUsdCxuKXt2YXIgaSxyLG8sYSxzO2ZvcihuPW58fDAsbz10LHQ9TCh0KSxhPTAscz10Lmxlbmd0aDtzPmE7YSsrKWk9Yih0W2FdLG8pLHI9ZS5maW5kKFwiPnRyOm5vdCguay1maWx0ZXItcm93KVwiKS5lcShpLnJvdykuZmluZChcIi5rLWhlYWRlcjpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIikuZXEoaS5jZWxsKSxyLmF0dHIodXQuYXR0cihcImluZGV4XCIpLG4rYSk7cmV0dXJuIHQubGVuZ3RofWZ1bmN0aW9uIHkoZSl7dmFyIHQsbixpPTEscj0wO2Zvcih0PTA7ZS5sZW5ndGg+dDt0KyspZVt0XS5jb2x1bW5zJiYobj15KGVbdF0uY29sdW1ucyksbj5yJiYocj1uKSk7cmV0dXJuIGkrcn1mdW5jdGlvbiB3KHQsbixpLHIpe3ZhciBvLGEscz14KHRbMF0sbiksbD1pLmZpbmQoXCI+dHI6bm90KC5rLWZpbHRlci1yb3cpOmVxKFwiK3Mucm93K1wiKT50aC5rLWhlYWRlclwiKSxjPWUoKSxkPXMuY2VsbDtmb3Iobz0wO3QubGVuZ3RoPm87bysrKWM9Yy5hZGQobC5lcShkK28pKTtmb3Ioci5maW5kKFwiPnRyOm5vdCguay1maWx0ZXItcm93KVwiKS5lcShzLnJvdykuYXBwZW5kKGMpLGE9W10sbz0wO3QubGVuZ3RoPm87bysrKXRbb10uY29sdW1ucyYmKGE9YS5jb25jYXQodFtvXS5jb2x1bW5zKSk7YS5sZW5ndGgmJncoYSxuLGkscil9ZnVuY3Rpb24gYihlLHQsbixpKXt2YXIgcixvO2ZvcihuPW58fDAsaT1pfHx7fSxpW25dPWlbbl18fDAsbz0wO3QubGVuZ3RoPm87bysrKXtpZih0W29dPT1lKXtyPXtjZWxsOmlbbl0scm93Om59O2JyZWFrfWlmKHRbb10uY29sdW1ucyYmKHI9YihlLHRbb10uY29sdW1ucyxuKzEsaSkpKWJyZWFrO2lbbl0rK31yZXR1cm4gcn1mdW5jdGlvbiBrKGUsdCxuLGkpe3ZhciByLG8sYTtyZXR1cm4gdC5jb2x1bW5zPyh0PXQuY29sdW1ucyx0W2k/MDp0Lmxlbmd0aC0xXSk6KHI9ZCh0LGUpLG89cj9yLmNvbHVtbnM6ZSxhPUN0KHQsbyksMD09PWEmJmk/YSsrOmEhPW8ubGVuZ3RoLTF8fGk/KGE+MHx8MD09PWEmJiFpKSYmKGErPWk/LTE6MSk6YS0tLHQ9b1tNYXRoLm1heChhLDApXSx0JiZ0IT1uJiZ0LmNvbHVtbnM/ayhlLHQsbixpKTpudWxsKX1mdW5jdGlvbiB4KGUsdCxuLGkpe3ZhciByLG87Zm9yKG49bnx8MCxpPWl8fHt9LGlbbl09aVtuXXx8MCxvPTA7dC5sZW5ndGg+bztvKyspe2lmKHRbb109PWUpe3I9e2NlbGw6aVtuXSxyb3c6bn07YnJlYWt9aWYodFtvXS5jb2x1bW5zJiYocj14KGUsdFtvXS5jb2x1bW5zLG4rMSxpKSkpYnJlYWs7dFtvXS5oaWRkZW58fGlbbl0rK31yZXR1cm4gcn1mdW5jdGlvbiBDKGUpe3ZhciB0PVMoSShlKSk7cmV0dXJuIHQuY29uY2F0KFMoeihlKSkpfWZ1bmN0aW9uIFMoZSl7dmFyIHQsbj1bXSxpPVtdO2Zvcih0PTA7ZS5sZW5ndGg+dDt0Kyspbi5wdXNoKGVbdF0pLGVbdF0uY29sdW1ucyYmKGk9aS5jb25jYXQoZVt0XS5jb2x1bW5zKSk7cmV0dXJuIGkubGVuZ3RoJiYobj1uLmNvbmNhdChTKGkpKSksbn1mdW5jdGlvbiBUKGUpe3ZhciB0LG4saT0wO2ZvcihuPTA7ZS5sZW5ndGg+bjtuKyspdD1lW25dLHQuY29sdW1ucz9pKz1UKHQuY29sdW1ucyk6dC5oaWRkZW4mJmkrKztyZXR1cm4gaX1mdW5jdGlvbiBEKGUpe3ZhciB0LG4saSxyPTA7Zm9yKG49MCxpPWUubGVuZ3RoO2k+bjtuKyspdD1lW25dLnN0eWxlLndpZHRoLHQmJi0xPT10LmluZGV4T2YoXCIlXCIpJiYocis9cGFyc2VJbnQodCwxMCkpO3JldHVybiByfWZ1bmN0aW9uIEEoZSx0KXt2YXIgbixpLHI9ZS5maW5kKFwidHI6bm90KC5rLWZpbHRlci1yb3cpIHRoOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKTtmb3IoaT0wO3IubGVuZ3RoPmk7aSsrKW49cltpXS5yb3dTcGFuLG4+MSYmKHJbaV0ucm93U3Bhbj1uLXR8fDEpfWZ1bmN0aW9uIEUoZSx0KXt2YXIgbixpPWUuZmluZChcInRyOm5vdCguay1maWx0ZXItcm93KSB0aDpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIik7Zm9yKG49MDtpLmxlbmd0aD5uO24rKylpW25dLnJvd1NwYW4rPXR9ZnVuY3Rpb24gTSh0KXt2YXIgbixpPXQuZmluZChcInRyOm5vdCguay1maWx0ZXItcm93KVwiKSxyPWkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIWUodGhpcykuY2hpbGRyZW4oKS5sZW5ndGh9KS5yZW1vdmUoKS5sZW5ndGgsbz1pLmZpbmQoXCJ0aDpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIik7Zm9yKG49MDtvLmxlbmd0aD5uO24rKylvW25dLnJvd1NwYW4+MSYmKG9bbl0ucm93U3Bhbi09cik7cmV0dXJuIGkubGVuZ3RoLXJ9ZnVuY3Rpb24gUChlLHQsbixpLHIpe3ZhciBvLGEscyxsPVtdO2ZvcihvPTAscz1lLmxlbmd0aDtzPm87bysrKWE9bltpXXx8W10sYS5wdXNoKHQuZXEocitvKSksbltpXT1hLGVbb10uY29sdW1ucyYmKGw9bC5jb25jYXQoZVtvXS5jb2x1bW5zKSk7bC5sZW5ndGgmJlAobCx0LG4saSsxLHIrZS5sZW5ndGgpfWZ1bmN0aW9uIEkoZSl7cmV0dXJuIGt0KGUsZnVuY3Rpb24oZSl7cmV0dXJuIGUubG9ja2VkfSl9ZnVuY3Rpb24geihlKXtyZXR1cm4ga3QoZSxmdW5jdGlvbihlKXtyZXR1cm4hZS5sb2NrZWR9KX1mdW5jdGlvbiBGKGUpe3JldHVybiBrdChlLGZ1bmN0aW9uKGUpe3JldHVybiFlLmxvY2tlZCYmcChlKX0pfWZ1bmN0aW9uIFIoZSl7cmV0dXJuIGt0KGUsZnVuY3Rpb24oZSl7cmV0dXJuIGUubG9ja2VkJiZwKGUpfSl9ZnVuY3Rpb24gQihlKXt2YXIgdCxuPVtdO2Zvcih0PTA7ZS5sZW5ndGg+dDt0KyspZVt0XS5oaWRkZW58fChlW3RdLmNvbHVtbnM/bj1uLmNvbmNhdChCKGVbdF0uY29sdW1ucykpOm4ucHVzaChlW3RdKSk7cmV0dXJuIG59ZnVuY3Rpb24gTChlKXt2YXIgdCxuPVtdO2Zvcih0PTA7ZS5sZW5ndGg+dDt0KyspZVt0XS5jb2x1bW5zP249bi5jb25jYXQoTChlW3RdLmNvbHVtbnMpKTpuLnB1c2goZVt0XSk7cmV0dXJuIG59ZnVuY3Rpb24gTyh0KXt2YXIgbixpPXQuZmluZChcIj50cjpub3QoLmstZmlsdGVyLXJvdylcIikscj1lKCk7cmV0dXJuIGkubGVuZ3RoPjEmJihyPWkuZmluZChcInRoOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb3dTcGFuPjF9KSkscj1yLmFkZChpLmxhc3QoKS5maW5kKFwidGg6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpKSxuPXV0LmF0dHIoXCJpbmRleFwiKSxyLnNvcnQoZnVuY3Rpb24odCxpKXtyZXR1cm4gdD1wYXJzZUludChlKHQpLmF0dHIobiksMTApLGk9cGFyc2VJbnQoZShpKS5hdHRyKG4pLDEwKSx0Pmk/MTppPnQ/LTE6MH0pLHJ9ZnVuY3Rpb24gSCh0KXt2YXIgbixpLHIsbyxhLHMsbCxjPXQuY2xvc2VzdChcInRhYmxlXCIpLGQ9ZSgpLmFkZCh0KSx1PXQuY2xvc2VzdChcInRyXCIpLGg9Yy5maW5kKFwidHI6bm90KC5rLWZpbHRlci1yb3cpXCIpLHA9aC5pbmRleCh1KTtpZihwPjApe2ZvcihuPWguZXEocC0xKSxpPW4uZmluZChcInRoOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4hZSh0aGlzKS5hdHRyKFwicm93c3BhblwiKX0pLHI9MCxvPXUuZmluZChcInRoOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKS5pbmRleCh0KSxhPXQucHJldkFsbChcIjpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIikuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29sU3Bhbj4xfSkscz0wO2EubGVuZ3RoPnM7cysrKXIrPWFbc10uY29sU3Bhbnx8MTtmb3Iobys9TWF0aC5tYXgoci0xLDApLHI9MCxzPTA7aS5sZW5ndGg+cztzKyspaWYobD1pLmVxKHMpLHIrPWwuYXR0cihcImNvbFNwYW5cIik/bFswXS5jb2xTcGFuOjEsbz49cyYmcj5vKXtkPUgobCkuYWRkKGQpO1xyXG5icmVha319cmV0dXJuIGR9ZnVuY3Rpb24gTih0KXt2YXIgbixpLHIsbyxhLHMsbCxjLGQ9dC5jbG9zZXN0KFwidGFibGVcIiksdT1lKCkuYWRkKHQpLGg9dC5jbG9zZXN0KFwidHJcIikscD1kLmZpbmQoXCJ0cjpub3QoLmstZmlsdGVyLXJvdylcIiksZj1wLmluZGV4KGgpK3RbMF0ucm93U3BhbixnPXV0LmF0dHIoXCJjb2xzcGFuXCIpO2lmKHAubGVuZ3RoLTE+PWYpe2ZvcihuPWgubmV4dCgpLGk9aC5maW5kKFwidGg6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpLmluZGV4KHQpLHI9dC5wcmV2QWxsKFwiOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKSxyPXIuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMucm93U3Bhbnx8MT09PXRoaXMucm93U3Bhbn0pLGE9MCxvPTA7ci5sZW5ndGg+bztvKyspYSs9cGFyc2VJbnQoci5lcShvKS5hdHRyKGcpLDEwKXx8MTtmb3Iocz1uLmZpbmQoXCJ0aDpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIiksbD1wYXJzZUludCh0LmF0dHIoZyksMTApfHwxLG89MDtsPm87KW49cy5lcShvK2EpLHU9dS5hZGQoTihuKSksYz1wYXJzZUludChuLmF0dHIoZyksMTApLGM+MSYmKGwtPWMtMSksbysrfXJldHVybiB1fWZ1bmN0aW9uIFYodCxuLGkpe3ZhciByLG89dDtyZXR1cm4gZ3Q/dFswXS5pbm5lckhUTUw9aToocj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHIuaW5uZXJIVE1MPVwiPHRhYmxlPjx0Ym9keT5cIitpK1wiPC90Ym9keT48L3RhYmxlPlwiLHQ9ci5maXJzdENoaWxkLmZpcnN0Q2hpbGQsblswXS5yZXBsYWNlQ2hpbGQodCxvWzBdKSx0PWUodCkpLHR9ZnVuY3Rpb24gVShlKXtlPWV8fHt9O3ZhciB0PWUuc3R5bGU7cmV0dXJuIHQ/KHQ9dC5yZXBsYWNlKC8oKC4qKT9kaXNwbGF5KSguKik/OihbXjtdKikvaSxcIiQxOm5vbmVcIiksdD09PWUuc3R5bGUmJih0PXQucmVwbGFjZSgvKC4qKT8vaSxcImRpc3BsYXk6bm9uZTskMVwiKSkpOnQ9XCJkaXNwbGF5Om5vbmVcIix3dCh7fSxlLHtzdHlsZTp0fSl9ZnVuY3Rpb24gVyhlKXtlPWV8fHt9O3ZhciB0PWUuc3R5bGU7cmV0dXJuIHQmJihlLnN0eWxlPXQucmVwbGFjZSgvKGRpc3BsYXlcXHMqOlxccypub25lXFxzKjs/KSovZ2ksXCJcIikpLGV9ZnVuY3Rpb24gaih0LG4saSxyKXt2YXIgbyxhPXQuZmluZChcIj5jb2xncm91cFwiKSxzPWJ0KG4sZnVuY3Rpb24oZSl7cmV0dXJuIG89ZS53aWR0aCxvJiYwIT09cGFyc2VJbnQobywxMCk/dXQuZm9ybWF0KCc8Y29sIHN0eWxlPVwid2lkdGg6ezB9XCIvPicsdHlwZW9mIG89PT1jbj9vOm8rXCJweFwiKTpcIjxjb2wgLz5cIn0pOyhpfHxhLmZpbmQoXCIuay1oaWVyYXJjaHktY29sXCIpLmxlbmd0aCkmJnMuc3BsaWNlKDAsMCwnPGNvbCBjbGFzcz1cImstaGllcmFyY2h5LWNvbFwiIC8+JyksYS5sZW5ndGgmJmEucmVtb3ZlKCksYT1lKEFycmF5KHIrMSkuam9pbignPGNvbCBjbGFzcz1cImstZ3JvdXAtY29sXCI+Jykrcy5qb2luKFwiXCIpKSxhLmlzKFwiY29sZ3JvdXBcIil8fChhPWUoXCI8Y29sZ3JvdXAvPlwiKS5hcHBlbmQoYSkpLHQucHJlcGVuZChhKSx3bi5tc2llJiY4PT13bi52ZXJzaW9uJiYodC5jc3MoXCJkaXNwbGF5XCIsXCJpbmxpbmUtdGFibGVcIiksd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LmNzcyhcImRpc3BsYXlcIixcIlwiKX0sMSkpfWZ1bmN0aW9uIEcoZSx0KXt2YXIgbixpLHI9MDtmb3Iobj0wLGk9dC5sZW5ndGg7aT5uO24rKyl0W25dLmxvY2tlZCYmKGUuZXEobikuaW5zZXJ0QmVmb3JlKGUuZXEocikpLHIrKyl9ZnVuY3Rpb24gcShlKXt2YXIgdCxuLGkscj17fTtmb3Iobj0wLGk9ZS5sZW5ndGg7aT5uO24rKyl0PWVbbl0sclt0LnZhbHVlXT10LnRleHQ7cmV0dXJuIHJ9ZnVuY3Rpb24gJChlLHQsbil7dmFyIGk9biYmbi5sZW5ndGgmJnl0KG5bMF0pJiZcInZhbHVlXCJpbiBuWzBdLHI9aT9xKG4pW2VdOmU7cmV0dXJuIHI9bnVsbCE9cj9yOlwiXCIsdD91dC5mb3JtYXQodCxyKTpyfWZ1bmN0aW9uIFkoZSx0LG4pe2Zvcih2YXIgaSxyPTAsbz1lW3JdO287KXtpZihpPW4/ITA6XCJub25lXCIhPT1vLnN0eWxlLmRpc3BsYXksaSYmIW1uLnRlc3Qoby5jbGFzc05hbWUpJiYtLXQ8MCl7by5zdHlsZS5kaXNwbGF5PW4/XCJcIjpcIm5vbmVcIjticmVha31vPWVbKytyXX19ZnVuY3Rpb24gSyh0LG4pe2Zvcih2YXIgaSxyLG89MCxhPXQubGVuZ3RoO2E+bztvKz0xKXI9dC5lcShvKSxyLmlzKFwiLmstZ3JvdXBpbmctcm93LC5rLWRldGFpbC1yb3dcIik/KGk9ci5jaGlsZHJlbihcIjpub3QoLmstZ3JvdXAtY2VsbCk6Zmlyc3QsLmstZGV0YWlsLWNlbGxcIikubGFzdCgpLGkuYXR0cihcImNvbHNwYW5cIixwYXJzZUludChpLmF0dHIoXCJjb2xzcGFuXCIpLDEwKS0xKSk6KHIuaGFzQ2xhc3MoXCJrLWdyaWQtZWRpdC1yb3dcIikmJihpPXIuY2hpbGRyZW4oXCIuay1lZGl0LWNvbnRhaW5lclwiKVswXSkmJihpPWUoaSksaS5hdHRyKFwiY29sc3BhblwiLHBhcnNlSW50KGkuYXR0cihcImNvbHNwYW5cIiksMTApLTEpLGkuZmluZChcImNvbFwiKS5lcShuKS5yZW1vdmUoKSxyPWkuZmluZChcInRyOmZpcnN0XCIpKSxZKHJbMF0uY2VsbHMsbiwhMSkpfWZ1bmN0aW9uIFEodCxuKXtmb3IodmFyIGkscixvLGE9MCxzPXQubGVuZ3RoO3M+YTthKz0xKXI9dC5lcShhKSxyLmlzKFwiLmstZ3JvdXBpbmctcm93LC5rLWRldGFpbC1yb3dcIik/KGk9ci5jaGlsZHJlbihcIjpub3QoLmstZ3JvdXAtY2VsbCk6Zmlyc3QsLmstZGV0YWlsLWNlbGxcIikubGFzdCgpLGkuYXR0cihcImNvbHNwYW5cIixwYXJzZUludChpLmF0dHIoXCJjb2xzcGFuXCIpLDEwKSsxKSk6KHIuaGFzQ2xhc3MoXCJrLWdyaWQtZWRpdC1yb3dcIikmJihpPXIuY2hpbGRyZW4oXCIuay1lZGl0LWNvbnRhaW5lclwiKVswXSkmJihpPWUoaSksaS5hdHRyKFwiY29sc3BhblwiLHBhcnNlSW50KGkuYXR0cihcImNvbHNwYW5cIiksMTApKzEpLGooaS5maW5kKFwiPmZvcm0+dGFibGVcIiksZihvKSwhMSwwKSxyPWkuZmluZChcInRyOmZpcnN0XCIpKSxZKHJbMF0uY2VsbHMsbiwhMCkpfWZ1bmN0aW9uIFgoZSx0LG4pe249bnx8MTt2YXIgaSxyLG87Zm9yKHI9MCxvPWUubGVuZ3RoO28+cjtyKyspaT1lLmVxKHIpLmNoaWxkcmVuKCkubGFzdCgpLGkuYXR0cihcImNvbHNwYW5cIixwYXJzZUludChpLmF0dHIoXCJjb2xzcGFuXCIpLDEwKStuKSxpPXQuZXEocikuY2hpbGRyZW4oKS5sYXN0KCksaS5hdHRyKFwiY29sc3BhblwiLHBhcnNlSW50KGkuYXR0cihcImNvbHNwYW5cIiksMTApLW4pfWZ1bmN0aW9uIEooZSl7dmFyIHQsbixpPTAscj1lLmZpbmQoXCI+Y29sZ3JvdXA+Y29sXCIpO2Zvcih0PTAsbj1yLmxlbmd0aDtuPnQ7dCs9MSlpKz1wYXJzZUludChyW3RdLnN0eWxlLndpZHRoLDEwKTtyZXR1cm4gaX1mdW5jdGlvbiBaKGUsdCl7dmFyIG4saSxyLG87ZT1lWzBdLHQ9dFswXSxlLnJvd3MubGVuZ3RoIT09dC5yb3dzLmxlbmd0aCYmKG49ZS5vZmZzZXRIZWlnaHQsaT10Lm9mZnNldEhlaWdodCxuPmk/KHI9dC5yb3dzW3Qucm93cy5sZW5ndGgtMV0sdm4udGVzdChyLmNsYXNzTmFtZSkmJihyPXQucm93c1t0LnJvd3MubGVuZ3RoLTJdKSxvPW4taSk6KHI9ZS5yb3dzW2Uucm93cy5sZW5ndGgtMV0sdm4udGVzdChyLmNsYXNzTmFtZSkmJihyPWUucm93c1tlLnJvd3MubGVuZ3RoLTJdKSxvPWktbiksci5zdHlsZS5oZWlnaHQ9ci5vZmZzZXRIZWlnaHQrbytcInB4XCIpfWZ1bmN0aW9uIGV0KGUsdCl7dmFyIG4saT1lLm9mZnNldEhlaWdodCxyPXQub2Zmc2V0SGVpZ2h0O2k+cj9uPWkrXCJweFwiOnI+aSYmKG49citcInB4XCIpLG4mJihlLnN0eWxlLmhlaWdodD10LnN0eWxlLmhlaWdodD1uKX1mdW5jdGlvbiB0dChlLHQpe3ZhciBuLGkscjtpZih0eXBlb2YgZT09PWNuJiZlPT09dClyZXR1cm4gZTtpZih5dChlKSYmZS5uYW1lPT09dClyZXR1cm4gZTtpZih4dChlKSlmb3Iobj0wLGk9ZS5sZW5ndGg7aT5uO24rKylpZihyPWVbbl0sdHlwZW9mIHI9PT1jbiYmcj09PXR8fHIubmFtZT09PXQpcmV0dXJuIHI7cmV0dXJuIG51bGx9ZnVuY3Rpb24gbnQodCxuKXt2YXIgaSxyLG8sYT13bi5tc2llO2lmKG49PT0hMCl7aWYodD1lKHQpLGk9ITAsaSYmKHI9dC5wYXJlbnQoKS5zY3JvbGxUb3AoKSxvPXQucGFyZW50KCkuc2Nyb2xsTGVmdCgpKSxhKXRyeXt0WzBdLnNldEFjdGl2ZSgpfWNhdGNoKHMpe3RbMF0uZm9jdXMoKX1lbHNlIHRbMF0uZm9jdXMoKTtpJiYodC5wYXJlbnQoKS5zY3JvbGxUb3AociksdC5wYXJlbnQoKS5zY3JvbGxMZWZ0KG8pKX1lbHNlIGUodCkub25lKFwiZm9jdXNpblwiLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX0pLmZvY3VzKCl9ZnVuY3Rpb24gaXQodCl7dmFyIG49ZSh0LmN1cnJlbnRUYXJnZXQpLGk9bi5pcyhcInRoXCIpLHI9dGhpcy50YWJsZS5hZGQodGhpcy5sb2NrZWRUYWJsZSksbz10aGlzLnRoZWFkLnBhcmVudCgpLmFkZChlKFwiPnRhYmxlXCIsdGhpcy5sb2NrZWRIZWFkZXIpKSxhPWUodC50YXJnZXQpLmlzKFwiOmJ1dHRvbixhLDppbnB1dCxhPi5rLWljb24sdGV4dGFyZWEsc3Bhbi5rLWljb24sc3Bhbi5rLWxpbmssLmstaW5wdXQsLmstbXVsdGlzZWxlY3Qtd3JhcFwiKSxzPW4uY2xvc2VzdChcInRhYmxlXCIpWzBdO3V0LnN1cHBvcnQudG91Y2h8fGEmJm4uZmluZCh1dC5yb2xlU2VsZWN0b3IoXCJmaWx0ZXJjZWxsXCIpKS5sZW5ndGh8fChzPT09clswXXx8cz09PXJbMV18fHM9PT1vWzBdfHxzPT09b1sxXSkmJihlKHQudGFyZ2V0KS5pcyhcImEuay1pLWNvbGxhcHNlLCBhLmstaS1leHBhbmRcIil8fCh0aGlzLmN1cnJlbnQobiksKGl8fCFhKSYmc2V0VGltZW91dChmdW5jdGlvbigpe2tuJiZlKHV0Ll9hY3RpdmVFbGVtZW50KCkpLmhhc0NsYXNzKFwiay13aWRnZXRcIil8fG50KHMsITApfSksaSYmdC5wcmV2ZW50RGVmYXVsdCgpKSl9ZnVuY3Rpb24gcnQodCxuLGkscil7aWYodD1lKHQpLHIpe3ZhciBvPW47bj1pLGk9b31yZXR1cm4gbi5ub3QodCkubGVuZ3RoIT1uLmxlbmd0aD90Om4uZXEodFswXT09aVswXT8wOjEpfWZ1bmN0aW9uIG90KGUsbixpLHIsbyl7dmFyIGEscyxsLGM9bz9cInByZXZBbGxcIjpcIm5leHRBbGxcIjtpZihlKXtpZihhPWUucGFyZW50KClbY10oRnQpLmZpcnN0KCksIWFbMF0mJihvfHxlLmlzKFwidGhcIikpfHwhbyYmZVswXS5yb3dTcGFuPjEpe2lmKG49cnQobixpLHIsbyksbnQobiksbyYmIWUuaXMoXCIuay1oZWFkZXJcIikpcmV0dXJuIE8obi5maW5kKFwidGhlYWQ6Zmlyc3RcIikpLmVxKGUuaW5kZXgoKSk7YT1uLmZpbmQoKG8/XCI+dGhlYWQ+XCI6XCI+dGJvZHk+XCIpK0Z0KS5maXJzdCgpfSFvJiZlWzBdLmNvbFNwYW4+MSYmZS5pcyhcIi5rLWhlYWRlclwiKT9lPU4oZSkuZXEoMSk6ZS5pcyhcIi5rLWhlYWRlclwiKSYmbz8obD1IKGUpLGU9bC5lcShsLmxlbmd0aC0yKSk6KHM9ZS5hdHRyKHV0LmF0dHIoXCJpbmRleFwiKSksKHM9PT10fHxvKSYmKHM9ZS5pbmRleCgpKSxlPWEuY2hpbGRyZW4oKS5lcShzKSksZVswXSYmZS5pcyhSdCl8fChlPWEuY2hpbGRyZW4oUnQpLmZpcnN0KCkpfWVsc2UgZT1pLmZpbmQoQnQpO3JldHVybiBlfWZ1bmN0aW9uIGF0KGUsdCxuLGkscil7dmFyIG89bi5sZW5ndGg+MTtyZXR1cm4gZT9lLnByZXZBbGwoXCI6dmlzaWJsZVwiKVswXT9lPWUucHJldkFsbChJdCkuZmlyc3QoKTpvJiYodD09blsxXT8obnQoblswXSksZT1yKGUucGFyZW50KCkpLmNoaWxkcmVuKEl0KS5sYXN0KCkpOnQ9PWlbMV0mJihudChpWzBdKSxlPWkuZXEoMCkuZmluZChcInRyPlwiK0l0KS5sYXN0KCkpKTplPW4uZmluZChCdCksZX1mdW5jdGlvbiBzdChlLHQsbixpLHIpe3ZhciBvPW4ubGVuZ3RoPjE7cmV0dXJuIGU/ZS5uZXh0QWxsKFwiOnZpc2libGVcIilbMF0/ZT1lLm5leHRBbGwoSXQpLmZpcnN0KCk6byYmKHQ9PW5bMF0/KG50KG5bMV0pLGU9cihlLnBhcmVudCgpKS5jaGlsZHJlbihJdCkuZmlyc3QoKSk6dD09aVswXSYmKG50KGlbMV0pLGU9aS5lcSgxKS5maW5kKFwidHI+XCIrSXQpLmZpcnN0KCkpKTplPW4uZmluZChCdCksZX1mdW5jdGlvbiBsdChlLHQsbixpLHIpe3ZhciBvPTI9PW4ubGVuZ3RoLGE9ITAscz1yP2UucHJldkFsbChJdCtcIjpmaXJzdFwiKTplLm5leHRBbGwoXCI6dmlzaWJsZTpmaXJzdFwiKTtyZXR1cm4gcy5sZW5ndGh8fChzPWUucGFyZW50KCksbyYmKGE9ciYmdD09blswXXx8IXImJnQ9PW5bMV0scz1pKHMpKSxhJiYocz1zW3I/XCJwcmV2QWxsXCI6XCJuZXh0QWxsXCJdKFwidHI6bm90KC5rLWdyb3VwaW5nLXJvdyk6bm90KC5rLWRldGFpbC1yb3cpOnZpc2libGU6Zmlyc3RcIikpLHM9cy5jaGlsZHJlbihJdCsocj9cIjpsYXN0XCI6XCI6Zmlyc3RcIikpKSxzfWZ1bmN0aW9uIGN0KGUsdCxpKXtyZXR1cm4nPHRyIGNsYXNzPVwiay1ncm91cGluZy1yb3dcIj4nK24odCkrJzx0ZCBjb2xzcGFuPVwiJytlKydcIiBhcmlhLWV4cGFuZGVkPVwidHJ1ZVwiPjxwIGNsYXNzPVwiay1yZXNldFwiPjxhIGNsYXNzPVwiay1pY29uIGstaS1jb2xsYXBzZVwiIGhyZWY9XCIjXCIgdGFiaW5kZXg9XCItMVwiPjwvYT4nK2krXCI8L3A+PC90ZD48L3RyPlwifWZ1bmN0aW9uIGR0KGUpe3JldHVybic8dHIgY2xhc3M9XCJrLWdyb3VwaW5nLXJvd1wiPjx0ZCBjb2xzcGFuPVwiJytlKydcIiBhcmlhLWV4cGFuZGVkPVwidHJ1ZVwiPjxwIGNsYXNzPVwiay1yZXNldFwiPiZuYnNwOzwvcD48L3RkPjwvdHI+J312YXIgdXQ9d2luZG93LmtlbmRvLGh0PXV0LnVpLHB0PXV0LmRhdGEuRGF0YVNvdXJjZSxmdD1odC5Hcm91cGFibGUsZ3Q9dXQuc3VwcG9ydC50Ym9keUlubmVySHRtbCxtdD11dC5fYWN0aXZlRWxlbWVudCx2dD1odC5XaWRnZXQsX3Q9dXQua2V5cyx5dD1lLmlzUGxhaW5PYmplY3Qsd3Q9ZS5leHRlbmQsYnQ9ZS5tYXAsa3Q9ZS5ncmVwLHh0PWUuaXNBcnJheSxDdD1lLmluQXJyYXksU3Q9QXJyYXkucHJvdG90eXBlLnB1c2gsVHQ9ZS5wcm94eSxEdD11dC5pc0Z1bmN0aW9uLEF0PWUuaXNFbXB0eU9iamVjdCxFdD1NYXRoLE10PVwicHJvZ3Jlc3NcIixQdD1cImVycm9yXCIsSXQ9XCI6bm90KC5rLWdyb3VwLWNlbGwpOm5vdCguay1oaWVyYXJjaHktY2VsbCk6dmlzaWJsZVwiLHp0PVwidGJvZHk+dHI6bm90KC5rLWdyb3VwaW5nLXJvdyk6bm90KC5rLWRldGFpbC1yb3cpOm5vdCguay1ncm91cC1mb290ZXIpID4gdGQ6bm90KC5rLWdyb3VwLWNlbGwpOm5vdCguay1oaWVyYXJjaHktY2VsbClcIixGdD1cInRyOm5vdCguay1mb290ZXItdGVtcGxhdGUpOnZpc2libGVcIixSdD1cIjpub3QoLmstZ3JvdXAtY2VsbCk6bm90KC5rLWhpZXJhcmNoeS1jZWxsKTp2aXNpYmxlXCIsQnQ9RnQrXCI6Zmlyc3Q+XCIrUnQrXCI6Zmlyc3RcIixMdD1cInRoLmstaGVhZGVyOm5vdCguay1ncm91cC1jZWxsKTpub3QoLmstaGllcmFyY2h5LWNlbGwpXCIsT3Q9XCIua2VuZG9HcmlkXCIsSHQ9XCJlZGl0XCIsTnQ9XCJzYXZlXCIsVnQ9XCJyZW1vdmVcIixVdD1cImRldGFpbEluaXRcIixXdD1cImZpbHRlck1lbnVJbml0XCIsanQ9XCJjb2x1bW5NZW51SW5pdFwiLEd0PVwiY2hhbmdlXCIscXQ9XCJjb2x1bW5IaWRlXCIsJHQ9XCJjb2x1bW5TaG93XCIsWXQ9XCJzYXZlQ2hhbmdlc1wiLEt0PVwiZGF0YUJvdW5kXCIsUXQ9XCJkZXRhaWxFeHBhbmRcIixYdD1cImRldGFpbENvbGxhcHNlXCIsSnQ9XCJrLXN0YXRlLWZvY3VzZWRcIixadD1cImstc3RhdGUtc2VsZWN0ZWRcIixlbj1cImNvbHVtblJlc2l6ZVwiLHRuPVwiY29sdW1uUmVvcmRlclwiLG5uPVwiY29sdW1uTG9ja1wiLHJuPVwiY29sdW1uVW5sb2NrXCIsb249XCJjbGlja1wiLGFuPVwiaGVpZ2h0XCIsc249XCJ0YWJJbmRleFwiLGxuPVwiZnVuY3Rpb25cIixjbj1cInN0cmluZ1wiLGRuPVwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIHJlY29yZD9cIix1bj1cIkRlbGV0ZVwiLGhuPVwiQ2FuY2VsXCIscG49LyhcXH18XFwjKS9naSxmbj0vIy9naSxnbj1cIltcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdXCIsbW49UmVnRXhwKFwiKF58XCIrZ24rXCIpKGstZ3JvdXAtY2VsbHxrLWhpZXJhcmNoeS1jZWxsKShcIitnbitcInwkKVwiKSx2bj1SZWdFeHAoXCIoXnxcIitnbitcIikoay1maWx0ZXItcm93KShcIitnbitcInwkKVwiKSxfbj0nPGEgY2xhc3M9XCJrLWJ1dHRvbiBrLWJ1dHRvbi1pY29udGV4dCAjPWNsYXNzTmFtZSNcIiAjPWF0dHIjIGhyZWY9XCJcXFxcI1wiPjxzcGFuIGNsYXNzPVwiIz1pY29uQ2xhc3MjICM9aW1hZ2VDbGFzcyNcIj48L3NwYW4+Iz10ZXh0IzwvYT4nLHluPSExLHduPXV0LnN1cHBvcnQuYnJvd3Nlcixibj13bi5tc2llJiY3PT13bi52ZXJzaW9uLGtuPXduLm1zaWUmJjg9PXduLnZlcnNpb24seG49dnQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpczt2dC5mbi5pbml0LmNhbGwobixlLHQpLG4uX3JlZnJlc2hIYW5kbGVyPVR0KG4ucmVmcmVzaCxuKSxuLnNldERhdGFTb3VyY2UodC5kYXRhU291cmNlKSxuLndyYXAoKX0sc2V0RGF0YVNvdXJjZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuZGF0YVNvdXJjZSYmdC5kYXRhU291cmNlLnVuYmluZChHdCx0Ll9yZWZyZXNoSGFuZGxlciksdC5kYXRhU291cmNlPWUsdC5kYXRhU291cmNlLmJpbmQoR3QsdC5fcmVmcmVzaEhhbmRsZXIpfSxvcHRpb25zOntuYW1lOlwiVmlydHVhbFNjcm9sbGFibGVcIixpdGVtSGVpZ2h0OmUubm9vcH0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dnQuZm4uZGVzdHJveS5jYWxsKGUpLGUuZGF0YVNvdXJjZS51bmJpbmQoR3QsZS5fcmVmcmVzaEhhbmRsZXIpLGUud3JhcHBlci5hZGQoZS52ZXJ0aWNhbFNjcm9sbGJhcikub2ZmKE90KSxlLmRyYWcmJihlLmRyYWcuZGVzdHJveSgpLGUuZHJhZz1udWxsKSxlLndyYXBwZXI9ZS5lbGVtZW50PWUudmVydGljYWxTY3JvbGxiYXI9bnVsbCxlLl9yZWZyZXNoSGFuZGxlcj1udWxsfSx3cmFwOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9dXQuc3VwcG9ydC5zY3JvbGxiYXIoKSsxLHI9bi5lbGVtZW50O3IuY3NzKHt3aWR0aDpcImF1dG9cIixvdmVyZmxvdzpcImhpZGRlblwifSkuY3NzKHluP1wicGFkZGluZy1sZWZ0XCI6XCJwYWRkaW5nLXJpZ2h0XCIsaSksbi5jb250ZW50PXIuY2hpbGRyZW4oKS5maXJzdCgpLHQ9bi53cmFwcGVyPW4uY29udGVudC53cmFwKCc8ZGl2IGNsYXNzPVwiay12aXJ0dWFsLXNjcm9sbGFibGUtd3JhcFwiLz4nKS5wYXJlbnQoKS5iaW5kKFwiRE9NTW91c2VTY3JvbGxcIitPdCtcIiBtb3VzZXdoZWVsXCIrT3QsVHQobi5fd2hlZWxTY3JvbGwsbikpLHV0LnN1cHBvcnQua2luZXRpY1Njcm9sbE5lZWRlZCYmKG4uZHJhZz1uZXcgdXQuVXNlckV2ZW50cyhuLndyYXBwZXIse2dsb2JhbDohMCxzdGFydDpmdW5jdGlvbihlKXtlLnNlbmRlci5jYXB0dXJlKCl9LG1vdmU6ZnVuY3Rpb24oZSl7bi52ZXJ0aWNhbFNjcm9sbGJhci5zY3JvbGxUb3Aobi52ZXJ0aWNhbFNjcm9sbGJhci5zY3JvbGxUb3AoKS1lLnkuZGVsdGEpLHQuc2Nyb2xsTGVmdCh0LnNjcm9sbExlZnQoKS1lLnguZGVsdGEpLGUucHJldmVudERlZmF1bHQoKX19KSksbi52ZXJ0aWNhbFNjcm9sbGJhcj1lKCc8ZGl2IGNsYXNzPVwiay1zY3JvbGxiYXIgay1zY3JvbGxiYXItdmVydGljYWxcIiAvPicpLmNzcyh7d2lkdGg6aX0pLmFwcGVuZFRvKHIpLmJpbmQoXCJzY3JvbGxcIitPdCxUdChuLl9zY3JvbGwsbikpfSxfd2hlZWxTY3JvbGw6ZnVuY3Rpb24odCl7aWYoIXQuY3RybEtleSl7dmFyIG49dGhpcy52ZXJ0aWNhbFNjcm9sbGJhci5zY3JvbGxUb3AoKSxpPXV0LndoZWVsRGVsdGFZKHQpO2kmJih0LnByZXZlbnREZWZhdWx0KCksZSh0LmN1cnJlbnRUYXJnZXQpLm9uZShcIndoZWVsXCIrT3QsITEpLHRoaXMudmVydGljYWxTY3JvbGxiYXIuc2Nyb2xsVG9wKG4rLWkpKX19LF9zY3JvbGw6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuY3VycmVudFRhcmdldC5zY3JvbGxUb3AsaT10LmRhdGFTb3VyY2Uscj10Lml0ZW1IZWlnaHQsbz1pLnNraXAoKXx8MCxhPXQuX3JhbmdlU3RhcnR8fG8scz10LmVsZW1lbnQuaW5uZXJIZWlnaHQoKSxsPSEhKHQuX3Njcm9sbGJhclRvcCYmdC5fc2Nyb2xsYmFyVG9wPm4pLGM9RXQubWF4KEV0LmZsb29yKG4vciksMCksZD1FdC5tYXgoYytFdC5mbG9vcihzL3IpLDApO3QuX3Njcm9sbFRvcD1uLWEqcix0Ll9zY3JvbGxiYXJUb3A9bix0Ll9mZXRjaChjLGQsbCl8fCh0LndyYXBwZXJbMF0uc2Nyb2xsVG9wPXQuX3Njcm9sbFRvcCl9LF9mZXRjaDpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcyxyPWkuZGF0YVNvdXJjZSxvPWkuaXRlbUhlaWdodCxhPXIudGFrZSgpLHM9aS5fcmFuZ2VTdGFydHx8ci5za2lwKCl8fDAsbD1FdC5mbG9vcihlL2EpKmEsYz0hMSxkPS4zMztyZXR1cm4gcz5lPyhjPSEwLHM9RXQubWF4KDAsdC1hKSxpLl9zY3JvbGxUb3A9KGUtcykqbyxpLl9wYWdlKHMsYSkpOnQ+PXMrYSYmIW4/KGM9ITAscz1lLGkuX3Njcm9sbFRvcD1vLGkuX3BhZ2UocyxhKSk6aS5fZmV0Y2hpbmd8fChsK2EtYSpkPmUmJmU+YSYmci5wcmVmZXRjaChsLWEsYSksdD5sK2EqZCYmci5wcmVmZXRjaChsK2EsYSkpLGN9LF9wYWdlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPW4uZGF0YVNvdXJjZTtjbGVhclRpbWVvdXQobi5fdGltZW91dCksbi5fZmV0Y2hpbmc9ITAsbi5fcmFuZ2VTdGFydD1lLGkuaW5SYW5nZShlLHQpP2kucmFuZ2UoZSx0KToodXQudWkucHJvZ3Jlc3Mobi53cmFwcGVyLnBhcmVudCgpLCEwKSxuLl90aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpLnJhbmdlKGUsdCl9LDEwMCkpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscj10aGlzLG89XCJcIixhPTI1ZTQscz1yLmRhdGFTb3VyY2UsbD1yLl9yYW5nZVN0YXJ0LGM9dXQuc3VwcG9ydC5raW5ldGljU2Nyb2xsTmVlZGVkPzA6dXQuc3VwcG9ydC5zY3JvbGxiYXIoKSxkPXIud3JhcHBlclswXTtmb3IodXQudWkucHJvZ3Jlc3Moci53cmFwcGVyLnBhcmVudCgpLCExKSxjbGVhclRpbWVvdXQoci5fdGltZW91dCksbj1yLml0ZW1IZWlnaHQ9ci5vcHRpb25zLml0ZW1IZWlnaHQoKXx8MCxpPWQuc2Nyb2xsV2lkdGg+ZC5vZmZzZXRXaWR0aD9jOjAsZT1zLnRvdGFsKCkqbitpLHQ9MDt0PEV0LmZsb29yKGUvYSk7dCsrKW8rPSc8ZGl2IHN0eWxlPVwid2lkdGg6MXB4O2hlaWdodDonK2ErJ3B4XCI+PC9kaXY+JztlJWEmJihvKz0nPGRpdiBzdHlsZT1cIndpZHRoOjFweDtoZWlnaHQ6JytlJWErJ3B4XCI+PC9kaXY+Jyksci52ZXJ0aWNhbFNjcm9sbGJhci5odG1sKG8pLGQuc2Nyb2xsVG9wPXIuX3Njcm9sbFRvcCxyLmRyYWcmJnIuZHJhZy5jYW5jZWwoKSxsJiYhci5fZmV0Y2hpbmcmJihyLl9yYW5nZVN0YXJ0PXMuc2tpcCgpLDE9PT1zLnBhZ2UoKSYmKHIudmVydGljYWxTY3JvbGxiYXJbMF0uc2Nyb2xsVG9wPTApKSxyLl9mZXRjaGluZz0hMX19KSxDbj17Y3JlYXRlOnt0ZXh0OlwiQWRkIG5ldyByZWNvcmRcIixpbWFnZUNsYXNzOlwiay1hZGRcIixjbGFzc05hbWU6XCJrLWdyaWQtYWRkXCIsaWNvbkNsYXNzOlwiay1pY29uXCJ9LGNhbmNlbDp7dGV4dDpcIkNhbmNlbCBjaGFuZ2VzXCIsaW1hZ2VDbGFzczpcImstY2FuY2VsXCIsY2xhc3NOYW1lOlwiay1ncmlkLWNhbmNlbC1jaGFuZ2VzXCIsaWNvbkNsYXNzOlwiay1pY29uXCJ9LHNhdmU6e3RleHQ6XCJTYXZlIGNoYW5nZXNcIixpbWFnZUNsYXNzOlwiay11cGRhdGVcIixjbGFzc05hbWU6XCJrLWdyaWQtc2F2ZS1jaGFuZ2VzXCIsaWNvbkNsYXNzOlwiay1pY29uXCJ9LGRlc3Ryb3k6e3RleHQ6XCJEZWxldGVcIixpbWFnZUNsYXNzOlwiay1kZWxldGVcIixjbGFzc05hbWU6XCJrLWdyaWQtZGVsZXRlXCIsaWNvbkNsYXNzOlwiay1pY29uXCJ9LGVkaXQ6e3RleHQ6XCJFZGl0XCIsaW1hZ2VDbGFzczpcImstZWRpdFwiLGNsYXNzTmFtZTpcImstZ3JpZC1lZGl0XCIsaWNvbkNsYXNzOlwiay1pY29uXCJ9LHVwZGF0ZTp7dGV4dDpcIlVwZGF0ZVwiLGltYWdlQ2xhc3M6XCJrLXVwZGF0ZVwiLGNsYXNzTmFtZTpcImstcHJpbWFyeSBrLWdyaWQtdXBkYXRlXCIsaWNvbkNsYXNzOlwiay1pY29uXCJ9LGNhbmNlbGVkaXQ6e3RleHQ6XCJDYW5jZWxcIixpbWFnZUNsYXNzOlwiay1jYW5jZWxcIixjbGFzc05hbWU6XCJrLWdyaWQtY2FuY2VsXCIsaWNvbkNsYXNzOlwiay1pY29uXCJ9LGV4Y2VsOnt0ZXh0OlwiRXhwb3J0IHRvIEV4Y2VsXCIsaW1hZ2VDbGFzczpcImstaS1leGNlbFwiLGNsYXNzTmFtZTpcImstZ3JpZC1leGNlbFwiLGljb25DbGFzczpcImstaWNvblwifSxwZGY6e3RleHQ6XCJFeHBvcnQgdG8gUERGXCIsaW1hZ2VDbGFzczpcImstaS1wZGZcIixjbGFzc05hbWU6XCJrLWdyaWQtcGRmXCIsaWNvbkNsYXNzOlwiay1pY29uXCJ9fSxTbj11dC51aS5EYXRhQm91bmRXaWRnZXQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbixpKXt2YXIgcj10aGlzO249eHQobik/e2RhdGFTb3VyY2U6bn06bix2dC5mbi5pbml0LmNhbGwocix0LG4pLGkmJihyLl9ldmVudHM9aSkseW49dXQuc3VwcG9ydC5pc1J0bCh0KSxyLl9lbGVtZW50KCksci5fYXJpYSgpLHIuX2NvbHVtbnMoci5vcHRpb25zLmNvbHVtbnMpLHIuX2RhdGFTb3VyY2UoKSxyLl90Ym9keSgpLHIuX3BhZ2VhYmxlKCksci5fdGhlYWQoKSxyLl9ncm91cGFibGUoKSxyLl90b29sYmFyKCksci5fc2V0Q29udGVudEhlaWdodCgpLHIuX3RlbXBsYXRlcygpLHIuX25hdmlnYXRhYmxlKCksci5fc2VsZWN0YWJsZSgpLHIuX2RldGFpbHMoKSxyLl9lZGl0YWJsZSgpLHIuX2F0dGFjaEN1c3RvbUNvbW1hbmRzRXZlbnQoKSxyLm9wdGlvbnMuYXV0b0JpbmQ/ci5kYXRhU291cmNlLmZldGNoKCk6ci5fZm9vdGVyKCksci5sb2NrZWRDb250ZW50JiYoci53cmFwcGVyLmFkZENsYXNzKFwiay1ncmlkLWxvY2tlZGNvbHVtbnNcIiksci5fcmVzaXplSGFuZGxlcj1mdW5jdGlvbigpe3IucmVzaXplKCl9LGUod2luZG93KS5vbihcInJlc2l6ZVwiK090LHIuX3Jlc2l6ZUhhbmRsZXIpKSx1dC5ub3RpZnkocil9LGV2ZW50czpbR3QsXCJkYXRhQmluZGluZ1wiLFwiY2FuY2VsXCIsXCJwZGZFeHBvcnRcIixLdCxRdCxYdCxVdCxXdCxqdCxIdCxOdCxWdCxZdCxlbix0biwkdCxxdCxubixybl0sc2V0RGF0YVNvdXJjZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLnNjcm9sbGFibGU7dC5vcHRpb25zLmRhdGFTb3VyY2U9ZSx0Ll9kYXRhU291cmNlKCksdC5fcGFnZWFibGUoKSx0Ll90aGVhZCgpLG4mJihuLnZpcnR1YWw/dC5jb250ZW50LmZpbmQoXCI+LmstdmlydHVhbC1zY3JvbGxhYmxlLXdyYXBcIikuc2Nyb2xsTGVmdCgwKTp0LmNvbnRlbnQuc2Nyb2xsTGVmdCgwKSksdC5vcHRpb25zLmdyb3VwYWJsZSYmdC5fZ3JvdXBhYmxlKCksdC52aXJ0dWFsU2Nyb2xsYWJsZSYmdC52aXJ0dWFsU2Nyb2xsYWJsZS5zZXREYXRhU291cmNlKHQub3B0aW9ucy5kYXRhU291cmNlKSx0Lm9wdGlvbnMubmF2aWdhdGFibGUmJnQuX25hdmlnYXRhYmxlKCksdC5vcHRpb25zLnNlbGVjdGFibGUmJnQuX3NlbGVjdGFibGUoKSx0Lm9wdGlvbnMuYXV0b0JpbmQmJmUuZmV0Y2goKX0sb3B0aW9uczp7bmFtZTpcIkdyaWRcIixjb2x1bW5zOltdLHRvb2xiYXI6bnVsbCxhdXRvQmluZDohMCxmaWx0ZXJhYmxlOiExLHNjcm9sbGFibGU6ITAsc29ydGFibGU6ITEsc2VsZWN0YWJsZTohMSxuYXZpZ2F0YWJsZTohMSxwYWdlYWJsZTohMSxlZGl0YWJsZTohMSxncm91cGFibGU6ITEscm93VGVtcGxhdGU6XCJcIixhbHRSb3dUZW1wbGF0ZTpcIlwiLGRhdGFTb3VyY2U6e30saGVpZ2h0Om51bGwscmVzaXphYmxlOiExLHJlb3JkZXJhYmxlOiExLGNvbHVtbk1lbnU6ITEsZGV0YWlsVGVtcGxhdGU6bnVsbCxjb2x1bW5SZXNpemVIYW5kbGVXaWR0aDozLG1vYmlsZTpcIlwiLG1lc3NhZ2VzOntlZGl0YWJsZTp7Y2FuY2VsRGVsZXRlOmhuLGNvbmZpcm1hdGlvbjpkbixjb25maXJtRGVsZXRlOnVufSxjb21tYW5kczp7Y3JlYXRlOkNuLmNyZWF0ZS50ZXh0LGNhbmNlbDpDbi5jYW5jZWwudGV4dCxzYXZlOkNuLnNhdmUudGV4dCxkZXN0cm95OkNuLmRlc3Ryb3kudGV4dCxlZGl0OkNuLmVkaXQudGV4dCx1cGRhdGU6Q24udXBkYXRlLnRleHQsY2FuY2VsZWRpdDpDbi5jYW5jZWxlZGl0LnRleHQsZXhjZWw6Q24uZXhjZWwudGV4dCxwZGY6Q24ucGRmLnRleHR9fX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciB0LG49dGhpczt2dC5mbi5kZXN0cm95LmNhbGwobiksbi5fcmVzaXplSGFuZGxlciYmZSh3aW5kb3cpLm9mZihcInJlc2l6ZVwiK090LG4uX3Jlc2l6ZUhhbmRsZXIpLG4ucGFnZXImJm4ucGFnZXIuZWxlbWVudCYmbi5wYWdlci5kZXN0cm95KCksbi5wYWdlcj1udWxsLG4uZ3JvdXBhYmxlJiZuLmdyb3VwYWJsZS5lbGVtZW50JiZuLmdyb3VwYWJsZS5lbGVtZW50LmtlbmRvR3JvdXBhYmxlKFwiZGVzdHJveVwiKSxuLmdyb3VwYWJsZT1udWxsLG4ub3B0aW9ucy5yZW9yZGVyYWJsZSYmbi53cmFwcGVyLmRhdGEoXCJrZW5kb1Jlb3JkZXJhYmxlXCIpLmRlc3Ryb3koKSxuLnNlbGVjdGFibGUmJm4uc2VsZWN0YWJsZS5lbGVtZW50JiZuLnNlbGVjdGFibGUuZGVzdHJveSgpLG4uc2VsZWN0YWJsZT1udWxsLG4ucmVzaXphYmxlJiYobi5yZXNpemFibGUuZGVzdHJveSgpLG4uX3Jlc2l6ZVVzZXJFdmVudHMmJihuLl9yZXNpemVIYW5kbGVEb2N1bWVudENsaWNrSGFuZGxlciYmZShkb2N1bWVudCkub2ZmKFwiY2xpY2tcIixuLl9yZXNpemVIYW5kbGVEb2N1bWVudENsaWNrSGFuZGxlciksbi5fcmVzaXplVXNlckV2ZW50cy5kZXN0cm95KCksbi5fcmVzaXplVXNlckV2ZW50cz1udWxsKSxuLnJlc2l6YWJsZT1udWxsKSxuLnZpcnR1YWxTY3JvbGxhYmxlJiZuLnZpcnR1YWxTY3JvbGxhYmxlLmVsZW1lbnQmJm4udmlydHVhbFNjcm9sbGFibGUuZGVzdHJveSgpLG4udmlydHVhbFNjcm9sbGFibGU9bnVsbCxuLl9kZXN0cm95Q29sdW1uQXR0YWNobWVudHMoKSxuLl9kZXN0cm95RWRpdGFibGUoKSxuLmRhdGFTb3VyY2UmJihuLmRhdGFTb3VyY2UudW5iaW5kKEd0LG4uX3JlZnJlc2hIYW5kbGVyKS51bmJpbmQoTXQsbi5fcHJvZ3Jlc3NIYW5kbGVyKS51bmJpbmQoUHQsbi5fZXJyb3JIYW5kbGVyKSxuLl9yZWZyZXNoSGFuZGxlcj1uLl9wcm9ncmVzc0hhbmRsZXI9bi5fZXJyb3JIYW5kbGVyPW51bGwpLHQ9bi5lbGVtZW50LmFkZChuLndyYXBwZXIpLmFkZChuLnRhYmxlKS5hZGQobi50aGVhZCkuYWRkKG4ud3JhcHBlci5maW5kKFwiPi5rLWdyaWQtdG9vbGJhclwiKSksbi5jb250ZW50JiYodD10LmFkZChuLmNvbnRlbnQpLmFkZChuLmNvbnRlbnQuZmluZChcIj4uay12aXJ0dWFsLXNjcm9sbGFibGUtd3JhcFwiKSkpLG4ubG9ja2VkSGVhZGVyJiZuLl9yZW1vdmVMb2NrZWRDb250YWluZXJzKCksbi5wYW5lJiZuLnBhbmUuZGVzdHJveSgpLG4uX2RyYWdnYWJsZUluc3RhbmNlJiZuLl9kcmFnZ2FibGVJbnN0YW5jZS5lbGVtZW50JiZuLl9kcmFnZ2FibGVJbnN0YW5jZS5kZXN0cm95KCksbi5fZHJhZ2dhYmxlSW5zdGFuY2U9bnVsbCx0Lm9mZihPdCksdXQuZGVzdHJveShuLndyYXBwZXIpLG4uc2Nyb2xsYWJsZXM9bi50aGVhZD1uLnRib2R5PW4uZWxlbWVudD1uLnRhYmxlPW4uY29udGVudD1uLmZvb3Rlcj1uLndyYXBwZXI9bi5fZ3JvdXBhYmxlQ2xpY2tIYW5kbGVyPW4uX3NldENvbnRlbnRXaWR0aEhhbmRsZXI9bnVsbH0sZ2V0T3B0aW9uczpmdW5jdGlvbigpe3ZhciBuLGk9d3QoITAse30sdGhpcy5vcHRpb25zKTtyZXR1cm4gaS5jb2x1bW5zPXV0LmRlZXBFeHRlbmQoW10sdGhpcy5jb2x1bW5zKSxuPXRoaXMuZGF0YVNvdXJjZSxpLmRhdGFTb3VyY2U9ZS5leHRlbmQoITAse30sbi5vcHRpb25zKSxpLmRhdGFTb3VyY2UucGFnZT1uLnBhZ2UoKSxpLmRhdGFTb3VyY2UuZmlsdGVyPW4uZmlsdGVyKCksaS5kYXRhU291cmNlLnBhZ2VTaXplPW4ucGFnZVNpemUoKSxpLmRhdGFTb3VyY2Uuc29ydD1uLnNvcnQoKSxpLmRhdGFTb3VyY2UuZ3JvdXA9bi5ncm91cCgpLGkuZGF0YVNvdXJjZS5hZ2dyZWdhdGU9bi5hZ2dyZWdhdGUoKSxpLiRhbmd1bGFyPXQsaX0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgdCxuLGkscj10aGlzLmdldE9wdGlvbnMoKTt1dC5kZWVwRXh0ZW5kKHIsZSksdD10aGlzLndyYXBwZXIsbj10aGlzLl9ldmVudHMsaT10aGlzLmVsZW1lbnQsdGhpcy5kZXN0cm95KCksdGhpcy5vcHRpb25zPW51bGwsdFswXSE9PWlbMF0mJih0LmJlZm9yZShpKSx0LnJlbW92ZSgpKSxpLmVtcHR5KCksdGhpcy5pbml0KGkscixuKSx0aGlzLl9zZXRFdmVudHMocil9LGl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9ja2VkQ29udGVudD90aGlzLl9pdGVtcyh0aGlzLnRib2R5KS5hZGQodGhpcy5faXRlbXModGhpcy5sb2NrZWRUYWJsZS5jaGlsZHJlbihcInRib2R5XCIpKSk6dGhpcy5faXRlbXModGhpcy50Ym9keSl9LF9pdGVtczpmdW5jdGlvbih0KXtyZXR1cm4gdC5jaGlsZHJlbigpLmZpbHRlcihmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7cmV0dXJuIXQuaGFzQ2xhc3MoXCJrLWdyb3VwaW5nLXJvd1wiKSYmIXQuaGFzQ2xhc3MoXCJrLWRldGFpbC1yb3dcIikmJiF0Lmhhc0NsYXNzKFwiay1ncm91cC1mb290ZXJcIil9KX0sZGF0YUl0ZW1zOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGk9dXQudWkuRGF0YUJvdW5kV2lkZ2V0LmZuLmRhdGFJdGVtcy5jYWxsKHRoaXMpO2lmKHRoaXMubG9ja2VkQ29udGVudCl7Zm9yKGU9aS5sZW5ndGgsdD1BcnJheSgyKmUpLG49ZTstLW4+PTA7KXRbbl09dFtuK2VdPWlbbl07aT10fXJldHVybiBpfSxfZGVzdHJveUNvbHVtbkF0dGFjaG1lbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0LnJlc2l6ZUhhbmRsZT1udWxsLHQudGhlYWQmJih0aGlzLmFuZ3VsYXIoXCJjbGVhbnVwXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6dC50aGVhZC5nZXQoKX19KSx0LnRoZWFkLmZpbmQoXCJ0aFwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKSxuPXQuZGF0YShcImtlbmRvRmlsdGVyTWVudVwiKSxpPXQuZGF0YShcImtlbmRvQ29sdW1uU29ydGVyXCIpLHI9dC5kYXRhKFwia2VuZG9Db2x1bW5NZW51XCIpO24mJm4uZGVzdHJveSgpLGkmJmkuZGVzdHJveSgpLHImJnIuZGVzdHJveSgpfSkpfSxfYXR0YWNoQ3VzdG9tQ29tbWFuZHNFdmVudDpmdW5jdGlvbigpe3ZhciBlLHQsbixpPXRoaXMscj1MKGkuY29sdW1uc3x8W10pO2Zvcih0PTAsbj1yLmxlbmd0aDtuPnQ7dCsrKWU9clt0XS5jb21tYW5kLGUmJmwoaSxpLndyYXBwZXIsZSl9LF9hcmlhOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50LmF0dHIoXCJpZFwiKXx8XCJhcmlhXCI7ZSYmKHRoaXMuX2NlbGxJZD1lK1wiX2FjdGl2ZV9jZWxsXCIpfSxfZWxlbWVudDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LmVsZW1lbnQ7bi5pcyhcInRhYmxlXCIpfHwobj10Lm9wdGlvbnMuc2Nyb2xsYWJsZT90LmVsZW1lbnQuZmluZChcIj4gLmstZ3JpZC1jb250ZW50ID4gdGFibGVcIik6dC5lbGVtZW50LmNoaWxkcmVuKFwidGFibGVcIiksbi5sZW5ndGh8fChuPWUoXCI8dGFibGUgLz5cIikuYXBwZW5kVG8odC5lbGVtZW50KSkpLGJuJiZuLmF0dHIoXCJjZWxsc3BhY2luZ1wiLDApLHQudGFibGU9bi5hdHRyKFwicm9sZVwiLHQuX2hhc0RldGFpbHMoKT9cInRyZWVncmlkXCI6XCJncmlkXCIpLHQuX3dyYXBwZXIoKX0sX2NyZWF0ZVJlc2l6ZUhhbmRsZTpmdW5jdGlvbih0LG4pe3ZhciBpLHIsbyxhLHMsbCxjLGQ9dGhpcyx1PWQub3B0aW9ucy5jb2x1bW5SZXNpemVIYW5kbGVXaWR0aCxoPWQub3B0aW9ucy5zY3JvbGxhYmxlLHA9ZC5yZXNpemVIYW5kbGUsZj10aGlzLl9ncm91cHMoKTtpZihwJiZkLmxvY2tlZENvbnRlbnQmJnAuZGF0YShcInRoXCIpWzBdIT09blswXSYmKHAucmVtb3ZlKCkscD1udWxsKSxwfHwocD1kLnJlc2l6ZUhhbmRsZT1lKCc8ZGl2IGNsYXNzPVwiay1yZXNpemUtaGFuZGxlXCI+PGRpdiBjbGFzcz1cImstcmVzaXplLWhhbmRsZS1pbm5lclwiPjwvZGl2PjwvZGl2PicpLHQuYXBwZW5kKHApKSx5bilpPW4ucG9zaXRpb24oKS5sZWZ0LGgmJihhPW4uY2xvc2VzdChcIi5rLWdyaWQtaGVhZGVyLXdyYXAsIC5rLWdyaWQtaGVhZGVyLWxvY2tlZFwiKSxzPXduLm1zaWU/YS5zY3JvbGxMZWZ0KCk6MCxsPXduLndlYmtpdD9hWzBdLnNjcm9sbFdpZHRoLWFbMF0ub2Zmc2V0V2lkdGgtYS5zY3JvbGxMZWZ0KCk6MCxjPXduLm1vemlsbGE/YVswXS5zY3JvbGxXaWR0aC1hWzBdLm9mZnNldFdpZHRoLShhWzBdLnNjcm9sbFdpZHRoLWFbMF0ub2Zmc2V0V2lkdGgtYS5zY3JvbGxMZWZ0KCkpOjAsaS09bC1jK3MpO2Vsc2V7Zm9yKGk9blswXS5vZmZzZXRXaWR0aCxyPU8obi5jbG9zZXN0KFwidGhlYWRcIikpLG89MDtyLmxlbmd0aD5vJiZyW29dIT1uWzBdO28rKylpKz1yW29dLm9mZnNldFdpZHRoO2Y+MCYmKGkrPXQuZmluZChcIi5rLWdyb3VwLWNlbGw6Zmlyc3RcIikub3V0ZXJXaWR0aCgpKmYpfXAuY3NzKHt0b3A6bi5wb3NpdGlvbigpLnRvcCxsZWZ0OmktdSxoZWlnaHQ6bi5vdXRlckhlaWdodCgpLHdpZHRoOjMqdX0pLmRhdGEoXCJ0aFwiLG4pLnNob3coKX0sX3Bvc2l0aW9uQ29sdW1uUmVzaXplSGFuZGxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucy5jb2x1bW5SZXNpemVIYW5kbGVXaWR0aCxpPXQubG9ja2VkSGVhZGVyP3QubG9ja2VkSGVhZGVyLmZpbmQoXCJ0aGVhZDpmaXJzdFwiKTplKCk7dC50aGVhZC5hZGQoaSkub24oXCJtb3VzZW1vdmVcIitPdCxcInRoXCIsZnVuY3Rpb24oaSl7dmFyIG8sYSxzLGw9ZSh0aGlzKTtsLmhhc0NsYXNzKFwiay1ncm91cC1jZWxsXCIpfHxsLmhhc0NsYXNzKFwiay1oaWVyYXJjaHktY2VsbFwiKXx8KG89aS5jbGllbnRYLGE9ZSh3aW5kb3cpLnNjcm9sbExlZnQoKSxzPWwub2Zmc2V0KCkubGVmdCsoeW4/MDp0aGlzLm9mZnNldFdpZHRoKSxvK2E+cy1uJiZzK24+bythP3QuX2NyZWF0ZVJlc2l6ZUhhbmRsZShsLmNsb3Nlc3QoXCJkaXZcIiksbCk6dC5yZXNpemVIYW5kbGU/dC5yZXNpemVIYW5kbGUuaGlkZSgpOnIodC53cmFwcGVyLFwiXCIpKX0pfSxfcmVzaXplSGFuZGxlRG9jdW1lbnRDbGljazpmdW5jdGlvbih0KXtlKHQudGFyZ2V0KS5jbG9zZXN0KFwiLmstY29sdW1uLWFjdGl2ZVwiKS5sZW5ndGh8fChlKGRvY3VtZW50KS5vZmYodCksdGhpcy5faGlkZVJlc2l6ZUhhbmRsZSgpKX0sX2hpZGVSZXNpemVIYW5kbGU6ZnVuY3Rpb24oKXt0aGlzLnJlc2l6ZUhhbmRsZSYmKHRoaXMucmVzaXplSGFuZGxlLmRhdGEoXCJ0aFwiKS5yZW1vdmVDbGFzcyhcImstY29sdW1uLWFjdGl2ZVwiKSx0aGlzLmxvY2tlZENvbnRlbnQmJiF0aGlzLl9pc01vYmlsZT8odGhpcy5yZXNpemVIYW5kbGUucmVtb3ZlKCksdGhpcy5yZXNpemVIYW5kbGU9bnVsbCk6dGhpcy5yZXNpemVIYW5kbGUuaGlkZSgpKX0sX3Bvc2l0aW9uQ29sdW1uUmVzaXplSGFuZGxlVG91Y2g6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5sb2NrZWRIZWFkZXI/dC5sb2NrZWRIZWFkZXIuZmluZChcInRoZWFkOmZpcnN0XCIpOmUoKTt0Ll9yZXNpemVVc2VyRXZlbnRzPW5ldyB1dC5Vc2VyRXZlbnRzKG4uYWRkKHQudGhlYWQpLHtmaWx0ZXI6XCJ0aDpub3QoLmstZ3JvdXAtY2VsbCk6bm90KC5rLWhpZXJhcmNoeS1jZWxsKVwiLHRocmVzaG9sZDoxMCxob2xkOmZ1bmN0aW9uKG4pe3ZhciBpPWUobi50YXJnZXQpO24ucHJldmVudERlZmF1bHQoKSxpLmFkZENsYXNzKFwiay1jb2x1bW4tYWN0aXZlXCIpLHQuX2NyZWF0ZVJlc2l6ZUhhbmRsZShpLmNsb3Nlc3QoXCJkaXZcIiksaSksdC5fcmVzaXplSGFuZGxlRG9jdW1lbnRDbGlja0hhbmRsZXJ8fCh0Ll9yZXNpemVIYW5kbGVEb2N1bWVudENsaWNrSGFuZGxlcj1UdCh0Ll9yZXNpemVIYW5kbGVEb2N1bWVudENsaWNrLHQpKSxlKGRvY3VtZW50KS5vbihcImNsaWNrXCIsdC5fcmVzaXplSGFuZGxlRG9jdW1lbnRDbGlja0hhbmRsZXIpfX0pfSxfcmVzaXphYmxlOmZ1bmN0aW9uKCl7dmFyIHQsbixpLG8sYSxzLGwsYz10aGlzLGQ9Yy5vcHRpb25zLHU9dGhpcy5faXNNb2JpbGUsaD11dC5zdXBwb3J0Lm1vYmlsZU9TPzA6dXQuc3VwcG9ydC5zY3JvbGxiYXIoKTtkLnJlc2l6YWJsZSYmKHQ9ZC5zY3JvbGxhYmxlP2Mud3JhcHBlci5maW5kKFwiLmstZ3JpZC1oZWFkZXItd3JhcDpmaXJzdFwiKTpjLndyYXBwZXIsdT9jLl9wb3NpdGlvbkNvbHVtblJlc2l6ZUhhbmRsZVRvdWNoKHQpOmMuX3Bvc2l0aW9uQ29sdW1uUmVzaXplSGFuZGxlKHQpLGMucmVzaXphYmxlJiZjLnJlc2l6YWJsZS5kZXN0cm95KCksYy5yZXNpemFibGU9bmV3IGh0LlJlc2l6YWJsZSh0LmFkZChjLmxvY2tlZEhlYWRlcikse2hhbmRsZTpcIi5rLXJlc2l6ZS1oYW5kbGVcIixoaW50OmZ1bmN0aW9uKHQpe3JldHVybiBlKCc8ZGl2IGNsYXNzPVwiay1ncmlkLXJlc2l6ZS1pbmRpY2F0b3JcIiAvPicpLmNzcyh7aGVpZ2h0OnQuZGF0YShcInRoXCIpLm91dGVySGVpZ2h0KCkrYy50Ym9keS5hdHRyKFwiY2xpZW50SGVpZ2h0XCIpfSl9LHN0YXJ0OmZ1bmN0aW9uKHQpe3ZhciBoLHAsZixnO2w9ZSh0LmN1cnJlbnRUYXJnZXQpLmRhdGEoXCJ0aFwiKSx1JiZjLl9oaWRlUmVzaXplSGFuZGxlKCksaD1sLmNsb3Nlc3QoXCJ0YWJsZVwiKSxwPWUuaW5BcnJheShsWzBdLE8obC5jbG9zZXN0KFwidGhlYWRcIikpLmZpbHRlcihcIjp2aXNpYmxlXCIpKSxhPWgucGFyZW50KCkuaGFzQ2xhc3MoXCJrLWdyaWQtaGVhZGVyLWxvY2tlZFwiKSxmPWE/Yy5sb2NrZWRUYWJsZTpjLnRhYmxlLGc9Yy5mb290ZXJ8fGUoKSxjLmZvb3RlciYmYy5sb2NrZWRDb250ZW50JiYoZz1jLmZvb3Rlci5jaGlsZHJlbihhP1wiLmstZ3JpZC1mb290ZXItbG9ja2VkXCI6XCIuay1ncmlkLWZvb3Rlci13cmFwXCIpKSxyKGMud3JhcHBlcixcImNvbC1yZXNpemVcIikscz1kLnNjcm9sbGFibGU/aC5maW5kKFwiY29sOm5vdCguay1ncm91cC1jb2wpOm5vdCguay1oaWVyYXJjaHktY29sKTplcShcIitwK1wiKVwiKS5hZGQoZi5jaGlsZHJlbihcImNvbGdyb3VwXCIpLmZpbmQoXCJjb2w6bm90KC5rLWdyb3VwLWNvbCk6bm90KC5rLWhpZXJhcmNoeS1jb2wpOmVxKFwiK3ArXCIpXCIpKS5hZGQoZy5maW5kKFwiY29sZ3JvdXBcIikuZmluZChcImNvbDpub3QoLmstZ3JvdXAtY29sKTpub3QoLmstaGllcmFyY2h5LWNvbCk6ZXEoXCIrcCtcIilcIikpOmYuY2hpbGRyZW4oXCJjb2xncm91cFwiKS5maW5kKFwiY29sOm5vdCguay1ncm91cC1jb2wpOm5vdCguay1oaWVyYXJjaHktY29sKTplcShcIitwK1wiKVwiKSxuPXQueC5sb2NhdGlvbixpPWwub3V0ZXJXaWR0aCgpLG89YT9mLmNoaWxkcmVuKFwidGJvZHlcIikub3V0ZXJXaWR0aCgpOmMudGJvZHkub3V0ZXJXaWR0aCgpfSxyZXNpemU6ZnVuY3Rpb24odCl7dmFyIHIsdSxwLGYsZyxtLHY9eW4/LTE6MSxfPWkrdC54LmxvY2F0aW9uKnYtbip2O2Quc2Nyb2xsYWJsZT8oYSYmYy5sb2NrZWRGb290ZXI/cj1jLmxvY2tlZEZvb3Rlci5jaGlsZHJlbihcInRhYmxlXCIpOmMuZm9vdGVyJiYocj1jLmZvb3Rlci5maW5kKFwiPi5rLWdyaWQtZm9vdGVyLXdyYXA+dGFibGVcIikpLHImJnJbMF18fChyPWUoKSksdT1sLmNsb3Nlc3QoXCJ0YWJsZVwiKSxwPWE/Yy5sb2NrZWRUYWJsZTpjLnRhYmxlLGY9ITEsZz1jLndyYXBwZXIud2lkdGgoKS1oLG09XyxhJiZvLWkrbT5nJiYobT1pKyhnLW8tMipoKSwwPm0mJihtPV8pLGY9ITApLG0+MTAmJihzLmNzcyhcIndpZHRoXCIsbSksbyYmKG09Zj9nLTIqaDpvK3QueC5sb2NhdGlvbip2LW4qdixwLmFkZCh1KS5hZGQocikuY3NzKFwid2lkdGhcIixtKSxhfHwoYy5fZm9vdGVyV2lkdGg9bSkpKSk6Xz4xMCYmcy5jc3MoXCJ3aWR0aFwiLF8pfSxyZXNpemVlbmQ6ZnVuY3Rpb24oKXt2YXIgZSx0LG4sbz1sLm91dGVyV2lkdGgoKTtyKGMud3JhcHBlcixcIlwiKSxpIT1vJiYodD1jLmxvY2tlZEhlYWRlcj9jLmxvY2tlZEhlYWRlci5maW5kKFwidGhlYWQ6Zmlyc3QgdHI6Zmlyc3RcIikuYWRkKGMudGhlYWQuZmluZChcInRyOmZpcnN0XCIpKTpsLnBhcmVudCgpLG49bC5hdHRyKHV0LmF0dHIoXCJpbmRleFwiKSksbnx8KG49dC5maW5kKFwidGg6bm90KC5rLWdyb3VwLWNlbGwpOm5vdCguay1oaWVyYXJjaHktY2VsbClcIikuaW5kZXgobCkpLGU9TChjLmNvbHVtbnMpW25dLGUud2lkdGg9byxjLnRyaWdnZXIoZW4se2NvbHVtbjplLG9sZFdpZHRoOmksbmV3V2lkdGg6b30pLGMuX2FwcGx5TG9ja2VkQ29udGFpbmVyc1dpZHRoKCksYy5fc3luY0xvY2tlZENvbnRlbnRIZWlnaHQoKSxjLl9zeW5jTG9ja2VkSGVhZGVySGVpZ2h0KCkpLGMuX2hpZGVSZXNpemVIYW5kbGUoKSxsPW51bGx9fSkpfSxfZHJhZ2dhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0Lm9wdGlvbnMucmVvcmRlcmFibGUmJih0Ll9kcmFnZ2FibGVJbnN0YW5jZSYmdC5fZHJhZ2dhYmxlSW5zdGFuY2UuZGVzdHJveSgpLHQuX2RyYWdnYWJsZUluc3RhbmNlPXQud3JhcHBlci5rZW5kb0RyYWdnYWJsZSh7Z3JvdXA6dXQuZ3VpZCgpLGZpbHRlcjp0LmNvbnRlbnQ/XCIuay1ncmlkLWhlYWRlcjpmaXJzdCBcIitMdDpcInRhYmxlOmZpcnN0Pi5rLWdyaWQtaGVhZGVyIFwiK0x0LGRyYWc6ZnVuY3Rpb24oKXt0Ll9oaWRlUmVzaXplSGFuZGxlKCl9LGhpbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIGUoJzxkaXYgY2xhc3M9XCJrLWhlYWRlciBrLWRyYWctY2x1ZVwiIC8+JykuY3NzKHt3aWR0aDp0LndpZHRoKCkscGFkZGluZ0xlZnQ6dC5jc3MoXCJwYWRkaW5nTGVmdFwiKSxwYWRkaW5nUmlnaHQ6dC5jc3MoXCJwYWRkaW5nUmlnaHRcIiksbGluZUhlaWdodDp0LmhlaWdodCgpK1wicHhcIixwYWRkaW5nVG9wOnQuY3NzKFwicGFkZGluZ1RvcFwiKSxwYWRkaW5nQm90dG9tOnQuY3NzKFwicGFkZGluZ0JvdHRvbVwiKX0pLmh0bWwodC5hdHRyKHV0LmF0dHIoXCJ0aXRsZVwiKSl8fHQuYXR0cih1dC5hdHRyKFwiZmllbGRcIikpfHx0LnRleHQoKSkucHJlcGVuZCgnPHNwYW4gY2xhc3M9XCJrLWljb24gay1kcmFnLXN0YXR1cyBrLWRlbmllZFwiIC8+Jyl9fSkuZGF0YShcImtlbmRvRHJhZ2dhYmxlXCIpKX0sX3Jlb3JkZXJhYmxlOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzO24ub3B0aW9ucy5yZW9yZGVyYWJsZSYmKG4ud3JhcHBlci5kYXRhKFwia2VuZG9SZW9yZGVyYWJsZVwiKSYmbi53cmFwcGVyLmRhdGEoXCJrZW5kb1Jlb3JkZXJhYmxlXCIpLmRlc3Ryb3koKSx0PWZ1bmN0aW9uKGUsdCxpKXt2YXIgcj1lW3RdLG89ZVtpXSxhPWQocixuLmNvbHVtbnMpO3JldHVybiBlPWE/YS5jb2x1bW5zOm4uY29sdW1ucyxDdChvLGUpfSxuLndyYXBwZXIua2VuZG9SZW9yZGVyYWJsZSh7ZHJhZ2dhYmxlOm4uX2RyYWdnYWJsZUluc3RhbmNlLGRyYWdPdmVyQ29udGFpbmVyczpmdW5jdGlvbihlLGkpe3ZhciByPUMobi5jb2x1bW5zKTtyZXR1cm4gcltlXS5sb2NrYWJsZSE9PSExJiZ0KHIsZSxpKT4tMX0saW5TYW1lQ29udGFpbmVyOmZ1bmN0aW9uKGkpe3JldHVybiBlKGkuc291cmNlKS5wYXJlbnQoKVswXT09PWUoaS50YXJnZXQpLnBhcmVudCgpWzBdJiZ0KEMobi5jb2x1bW5zKSxpLnNvdXJjZUluZGV4LGkudGFyZ2V0SW5kZXgpPi0xfSxjaGFuZ2U6ZnVuY3Rpb24oZSl7dmFyIGk9QyhuLmNvbHVtbnMpLHI9aVtlLm9sZEluZGV4XSxvPXQoaSxlLm9sZEluZGV4LGUubmV3SW5kZXgpO24udHJpZ2dlcih0bix7bmV3SW5kZXg6byxvbGRJbmRleDpDdChyLGkpLGNvbHVtbjpyfSksbi5yZW9yZGVyQ29sdW1uKG8scixcImJlZm9yZVwiPT09ZS5wb3NpdGlvbil9fSkpfSxfcmVvcmRlckhlYWRlcjpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGwsYz10aGlzLGQ9eChlWzBdLGMuY29sdW1ucyksdT14KHQsYy5jb2x1bW5zKSxoPVtdO2ZvcihpPTA7ZS5sZW5ndGg+aTtpKyspZVtpXS5jb2x1bW5zJiYoaD1oLmNvbmNhdChlW2ldLmNvbHVtbnMpKTtyPXMoYy5sb2NrZWRIZWFkZXIsYy50aGVhZCxcInRyOmVxKFwiK2Qucm93K1wiKT50aC5rLWhlYWRlcjpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIiksbz1JKGUpLmxlbmd0aCxsPUkoW3RdKS5sZW5ndGgsaC5sZW5ndGg/KG8+MCYmMD09PWw/dihlLHQsaCxjLmNvbHVtbnMsYy5sb2NrZWRIZWFkZXIuZmluZChcInRoZWFkXCIpLGMudGhlYWQsdGhpcy5fZ3JvdXBzKCkpOjA9PT1vJiZsPjAmJnYoZSx0LGgsYy5jb2x1bW5zLGMudGhlYWQsYy5sb2NrZWRIZWFkZXIuZmluZChcInRoZWFkXCIpLHRoaXMuX2dyb3VwcygpKSx0PWsoYy5jb2x1bW5zLHQsZVswXSxuKSx0JiZjLl9yZW9yZGVySGVhZGVyKGgsdCxuKSk6byE9PWwmJm0ocltkLmNlbGxdLGMuY29sdW1ucyxvKSxhKHIsZC5jZWxsLHUuY2VsbCxuLGUubGVuZ3RoKX0sX3Jlb3JkZXJDb250ZW50OmZ1bmN0aW9uKHQsbixpKXt2YXIgcixvLGwsYyxkPXRoaXMsdT1lKCksaD10WzBdLHA9Q3QoaCxMKGQuY29sdW1ucykpLGY9Q3QobixMKGQuY29sdW1ucykpLGc9Q3QoaCxCKGQuY29sdW1ucykpLG09Q3QobixCKGQuY29sdW1ucykpLHY9SShkLmNvbHVtbnMpLmxlbmd0aCxfPSEhbi5sb2NrZWQseT1kLmZvb3Rlcnx8ZC53cmFwcGVyLmZpbmQoXCIuay1ncmlkLWZvb3RlclwiKSx3PXI9bTtmb3Iobi5oaWRkZW4mJihfPyhtPWQubG9ja2VkVGFibGUuZmluZChcImNvbGdyb3VwXCIpLHc9ZC5sb2NrZWRIZWFkZXIuZmluZChcImNvbGdyb3VwXCIpLHI9ZShkLmxvY2tlZEZvb3RlcikuZmluZChcIj50YWJsZT5jb2xncm91cFwiKSk6KG09ZC50Ym9keS5wcmV2KCksdz1kLnRoZWFkLnByZXYoKSxyPXkuZmluZChcIi5rLWdyaWQtZm9vdGVyLXdyYXBcIikuZmluZChcIj50YWJsZT5jb2xncm91cFwiKSkpLGQuX2hhc0ZpbHRlclJvdygpJiZhKGQud3JhcHBlci5maW5kKFwiLmstZmlsdGVyLXJvdyB0aDpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIikscCxmLGksdC5sZW5ndGgpLGEocyhkLmxvY2tlZEhlYWRlcixkLnRoZWFkLnByZXYoKSxcImNvbDpub3QoLmstZ3JvdXAtY29sLC5rLWhpZXJhcmNoeS1jb2wpXCIpLGcsdyxpLHQubGVuZ3RoKSxkLm9wdGlvbnMuc2Nyb2xsYWJsZSYmYShzKGQubG9ja2VkVGFibGUsZC50Ym9keS5wcmV2KCksXCJjb2w6bm90KC5rLWdyb3VwLWNvbCwuay1oaWVyYXJjaHktY29sKVwiKSxnLG0saSx0Lmxlbmd0aCkseSYmeS5sZW5ndGgmJihhKHMoZC5sb2NrZWRGb290ZXIseS5maW5kKFwiLmstZ3JpZC1mb290ZXItd3JhcFwiKSxcIj50YWJsZT5jb2xncm91cD5jb2w6bm90KC5rLWdyb3VwLWNvbCwuay1oaWVyYXJjaHktY29sKVwiKSxnLHIsaSx0Lmxlbmd0aCksYSh5LmZpbmQoXCIuay1mb290ZXItdGVtcGxhdGU+dGQ6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpLHAsZixpLHQubGVuZ3RoKSksbz1kLnRib2R5LmNoaWxkcmVuKFwiOm5vdCguay1ncm91cGluZy1yb3csLmstZGV0YWlsLXJvdylcIiksZC5sb2NrZWRUYWJsZSYmKHY+Zj9wPj12JiZYKGQubG9ja2VkVGFibGUuZmluZChcIj50Ym9keT50ci5rLWdyb3VwaW5nLXJvd1wiKSxkLnRhYmxlLmZpbmQoXCI+dGJvZHk+dHIuay1ncm91cGluZy1yb3dcIiksdC5sZW5ndGgpOnY+cCYmWChkLnRhYmxlLmZpbmQoXCI+dGJvZHk+dHIuay1ncm91cGluZy1yb3dcIiksZC5sb2NrZWRUYWJsZS5maW5kKFwiPnRib2R5PnRyLmstZ3JvdXBpbmctcm93XCIpLHQubGVuZ3RoKSx1PWQubG9ja2VkVGFibGUuZmluZChcIj50Ym9keT50cjpub3QoLmstZ3JvdXBpbmctcm93LC5rLWRldGFpbC1yb3cpXCIpKSxsPTAsYz1vLmxlbmd0aDtjPmw7bCs9MSlhKHModVtsXSxvW2xdLFwiPnRkOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKSxwLGYsaSx0Lmxlbmd0aCl9LHJlb3JkZXJDb2x1bW46ZnVuY3Rpb24oZSxuLGkpe3ZhciByLG8sYT10aGlzLHM9ZChuLGEuY29sdW1ucyksbD1zP3MuY29sdW1uczphLmNvbHVtbnMsYz1DdChuLGwpLHU9bFtlXSxoPSEhdS5sb2NrZWQscD1JKGEuY29sdW1ucykubGVuZ3RoO2MhPT1lJiYobi5sb2NrZWR8fCFofHwxIT16KGEuY29sdW1ucykubGVuZ3RoKSYmKCFuLmxvY2tlZHx8aHx8MSE9cCkmJihhLl9oaWRlUmVzaXplSGFuZGxlKCksaT09PXQmJihpPWM+ZSksbz1bbl0sYS5fcmVvcmRlckhlYWRlcihvLHUsaSksYS5sb2NrZWRIZWFkZXImJihNKGEudGhlYWQpLE0oYS5sb2NrZWRIZWFkZXIpKSx1LmNvbHVtbnMmJih1PUwodS5jb2x1bW5zKSx1PXVbaT8wOnUubGVuZ3RoLTFdKSxuLmNvbHVtbnMmJihvPUwobi5jb2x1bW5zKSksYS5fcmVvcmRlckNvbnRlbnQobyx1LGkpLHI9ISFuLmxvY2tlZCxyPXIhPWgsbi5sb2NrZWQ9aCxsLnNwbGljZShpP2U6ZSsxLDAsbiksbC5zcGxpY2UoZT5jP2M6YysxLDEpLGEuX3RlbXBsYXRlcygpLGEuX3VwZGF0ZUNvbHVtbkNlbGxJbmRleCgpLGEuX3VwZGF0ZVRhYmxlc1dpZHRoKCksYS5fYXBwbHlMb2NrZWRDb250YWluZXJzV2lkdGgoKSxhLl9zeW5jTG9ja2VkSGVhZGVySGVpZ2h0KCksYS5fc3luY0xvY2tlZENvbnRlbnRIZWlnaHQoKSxhLl91cGRhdGVGaXJzdENvbHVtbkNsYXNzKCksciYmKGg/YS50cmlnZ2VyKG5uLHtjb2x1bW46bn0pOmEudHJpZ2dlcihybix7Y29sdW1uOm59KSkpfSxfdXBkYXRlQ29sdW1uQ2VsbEluZGV4OmZ1bmN0aW9uKCl7dmFyIGUsdD0wO3RoaXMubG9ja2VkSGVhZGVyJiYoZT10aGlzLmxvY2tlZEhlYWRlci5maW5kKFwidGhlYWRcIiksdD1fKGUsSSh0aGlzLmNvbHVtbnMpKSksXyh0aGlzLnRoZWFkLHoodGhpcy5jb2x1bW5zKSx0KX0sbG9ja0NvbHVtbjpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMuY29sdW1ucztlPVwibnVtYmVyXCI9PXR5cGVvZiBlP25bZV06a3QobixmdW5jdGlvbih0KXtyZXR1cm4gdC5maWVsZD09PWV9KVswXSwhZXx8ZS5sb2NrZWR8fGUuaGlkZGVufHwodD1JKG4pLmxlbmd0aC0xLHRoaXMucmVvcmRlckNvbHVtbih0LGUsITEpKX0sdW5sb2NrQ29sdW1uOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5jb2x1bW5zO2U9XCJudW1iZXJcIj09dHlwZW9mIGU/bltlXTprdChuLGZ1bmN0aW9uKHQpe3JldHVybiB0LmZpZWxkPT09ZX0pWzBdLGUmJmUubG9ja2VkJiYhZS5oaWRkZW4mJih0PUkobikubGVuZ3RoLHRoaXMucmVvcmRlckNvbHVtbih0LGUsITApKX0sY2VsbEluZGV4OmZ1bmN0aW9uKHQpe3ZhciBuPTA7cmV0dXJuIHRoaXMubG9ja2VkVGFibGUmJiFlLmNvbnRhaW5zKHRoaXMubG9ja2VkVGFibGVbMF0sdFswXSkmJihuPUwoSSh0aGlzLmNvbHVtbnMpKS5sZW5ndGgpLGUodCkucGFyZW50KCkuY2hpbGRyZW4oXCJ0ZDpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIikuaW5kZXgodCkrbn0sX21vZGVsRm9yQ29udGFpbmVyOmZ1bmN0aW9uKHQpe3Q9ZSh0KSx0LmlzKFwidHJcIil8fFwicG9wdXBcIj09PXRoaXMuX2VkaXRNb2RlKCl8fCh0PXQuY2xvc2VzdChcInRyXCIpKTt2YXIgbj10LmF0dHIodXQuYXR0cihcInVpZFwiKSk7cmV0dXJuIHRoaXMuZGF0YVNvdXJjZS5nZXRCeVVpZChuKX0sX2VkaXRhYmxlOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi5zZWxlY3RhYmxlJiZuLnNlbGVjdGFibGUub3B0aW9ucy5tdWx0aXBsZSxyPW4ub3B0aW9ucy5lZGl0YWJsZSxvPWZ1bmN0aW9uKCl7dmFyIHQ9bXQoKSxpPW4uX2VkaXRDb250YWluZXI7IWl8fGUuY29udGFpbnMoaVswXSx0KXx8aVswXT09PXR8fGUodCkuY2xvc2VzdChcIi5rLWFuaW1hdGlvbi1jb250YWluZXJcIikubGVuZ3RofHxuLmVkaXRhYmxlLmVuZCgpJiZuLmNsb3NlQ2VsbCgpfTtyJiYodD1uLl9lZGl0TW9kZSgpLFwiaW5jZWxsXCI9PT10P3IudXBkYXRlIT09ITEmJm4ud3JhcHBlci5vbihvbitPdCxcInRyOm5vdCguay1ncm91cGluZy1yb3cpID4gdGRcIixmdW5jdGlvbih0KXt2YXIgcj1lKHRoaXMpLG89bi5sb2NrZWRUYWJsZSYmci5jbG9zZXN0KFwidGFibGVcIilbMF09PT1uLmxvY2tlZFRhYmxlWzBdO3IuaGFzQ2xhc3MoXCJrLWhpZXJhcmNoeS1jZWxsXCIpfHxyLmhhc0NsYXNzKFwiay1kZXRhaWwtY2VsbFwiKXx8ci5oYXNDbGFzcyhcImstZ3JvdXAtY2VsbFwiKXx8ci5oYXNDbGFzcyhcImstZWRpdC1jZWxsXCIpfHxyLmhhcyhcImEuay1ncmlkLWRlbGV0ZVwiKS5sZW5ndGh8fHIuaGFzKFwiYnV0dG9uLmstZ3JpZC1kZWxldGVcIikubGVuZ3RofHxyLmNsb3Nlc3QoXCJ0Ym9keVwiKVswXSE9PW4udGJvZHlbMF0mJiFvfHxlKHQudGFyZ2V0KS5pcyhcIjppbnB1dFwiKXx8KG4uZWRpdGFibGU/bi5lZGl0YWJsZS5lbmQoKSYmKGkmJmUobXQoKSkuYmx1cigpLG4uY2xvc2VDZWxsKCksbi5lZGl0Q2VsbChyKSk6bi5lZGl0Q2VsbChyKSl9KS5vbihcImZvY3VzaW5cIitPdCxmdW5jdGlvbigpe2NsZWFyVGltZW91dChuLnRpbWVyKSxuLnRpbWVyPW51bGx9KS5vbihcImZvY3Vzb3V0XCIrT3QsZnVuY3Rpb24oKXtuLnRpbWVyPXNldFRpbWVvdXQobywxKX0pOnIudXBkYXRlIT09ITEmJm4ud3JhcHBlci5vbihvbitPdCxcInRib2R5PnRyOm5vdCguay1kZXRhaWwtcm93LC5rLWdyb3VwaW5nLXJvdyk6dmlzaWJsZSBhLmstZ3JpZC1lZGl0XCIsZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLG4uZWRpdFJvdyhlKHRoaXMpLmNsb3Nlc3QoXCJ0clwiKSl9KSxyLmRlc3Ryb3khPT0hMT9uLndyYXBwZXIub24ob24rT3QsXCJ0Ym9keT50cjpub3QoLmstZGV0YWlsLXJvdywuay1ncm91cGluZy1yb3cpOnZpc2libGUgLmstZ3JpZC1kZWxldGVcIixmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSxuLnJlbW92ZVJvdyhlKHRoaXMpLmNsb3Nlc3QoXCJ0clwiKSl9KTpuLndyYXBwZXIub24ob24rT3QsXCJ0Ym9keT50cjpub3QoLmstZGV0YWlsLXJvdywuay1ncm91cGluZy1yb3cpOnZpc2libGUgYnV0dG9uLmstZ3JpZC1kZWxldGVcIixmdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpLG4uX2NvbmZpcm1hdGlvbigpfHxlLnByZXZlbnREZWZhdWx0KCl9KSl9LGVkaXRDZWxsOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvO3Q9ZSh0KSxuPXRoaXMsaT1MKG4uY29sdW1ucylbbi5jZWxsSW5kZXgodCldLHI9bi5fbW9kZWxGb3JDb250YWluZXIodCksbi5jbG9zZUNlbGwoKSwhcnx8ci5lZGl0YWJsZSYmIXIuZWRpdGFibGUoaS5maWVsZCl8fGkuY29tbWFuZHx8IWkuZmllbGR8fChuLl9hdHRhY2hNb2RlbENoYW5nZShyKSxuLl9lZGl0Q29udGFpbmVyPXQsbi5lZGl0YWJsZT10LmFkZENsYXNzKFwiay1lZGl0LWNlbGxcIikua2VuZG9FZGl0YWJsZSh7ZmllbGRzOntmaWVsZDppLmZpZWxkLGZvcm1hdDppLmZvcm1hdCxlZGl0b3I6aS5lZGl0b3IsdmFsdWVzOmkudmFsdWVzfSxtb2RlbDpyLHRhcmdldDpuLGNoYW5nZTpmdW5jdGlvbihlKXtuLnRyaWdnZXIoTnQse3ZhbHVlczplLnZhbHVlcyxjb250YWluZXI6dCxtb2RlbDpyfSkmJmUucHJldmVudERlZmF1bHQoKX19KS5kYXRhKFwia2VuZG9FZGl0YWJsZVwiKSxvPXQucGFyZW50KCkuYWRkQ2xhc3MoXCJrLWdyaWQtZWRpdC1yb3dcIiksbi5sb2NrZWRDb250ZW50JiZldChvWzBdLG4uX3JlbGF0ZWRSb3cobykuYWRkQ2xhc3MoXCJrLWdyaWQtZWRpdC1yb3dcIilbMF0pLG4udHJpZ2dlcihIdCx7Y29udGFpbmVyOnQsbW9kZWw6cn0pKX0sX2FkanVzdExvY2tlZEhvcml6b250YWxTY3JvbGxCYXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnRhYmxlLHQ9ZS5wYXJlbnQoKSxuPWVbMF0ub2Zmc2V0V2lkdGg+dFswXS5jbGllbnRXaWR0aD91dC5zdXBwb3J0LnNjcm9sbGJhcigpOjA7dGhpcy5sb2NrZWRDb250ZW50LmhlaWdodCh0LmhlaWdodCgpLW4pfSxfc3luY0xvY2tlZENvbnRlbnRIZWlnaHQ6ZnVuY3Rpb24oKXt0aGlzLmxvY2tlZFRhYmxlJiYodGhpcy5fYWRqdXN0TG9ja2VkSG9yaXpvbnRhbFNjcm9sbEJhcigpLHRoaXMuX2FkanVzdFJvd3NIZWlnaHQodGhpcy50YWJsZSx0aGlzLmxvY2tlZFRhYmxlKSl9LF9zeW5jTG9ja2VkSGVhZGVySGVpZ2h0OmZ1bmN0aW9uKCl7dmFyIGUsdDt0aGlzLmxvY2tlZEhlYWRlciYmKGU9dGhpcy5sb2NrZWRIZWFkZXIuY2hpbGRyZW4oXCJ0YWJsZVwiKSx0PXRoaXMudGhlYWQucGFyZW50KCksdGhpcy5fYWRqdXN0Um93c0hlaWdodChlLHQpLFooZSx0KSl9LF9zeW5jTG9ja2VkRm9vdGVySGVpZ2h0OmZ1bmN0aW9uKCl7dGhpcy5sb2NrZWRGb290ZXImJnRoaXMuZm9vdGVyJiZ0aGlzLmZvb3Rlci5sZW5ndGgmJnRoaXMuX2FkanVzdFJvd3NIZWlnaHQodGhpcy5sb2NrZWRGb290ZXIuY2hpbGRyZW4oXCJ0YWJsZVwiKSx0aGlzLmZvb3Rlci5maW5kKFwiLmstZ3JpZC1mb290ZXItd3JhcCA+IHRhYmxlXCIpKX0sX2Rlc3Ryb3lFZGl0YWJsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1mdW5jdGlvbigpe2lmKGUuZWRpdGFibGUpe3ZhciB0PWUuZWRpdFZpZXc/ZS5lZGl0Vmlldy5lbGVtZW50OmUuX2VkaXRDb250YWluZXI7dCYmKHQub2ZmKG9uK090LFwiYS5rLWdyaWQtY2FuY2VsXCIsZS5fZWRpdENhbmNlbENsaWNrSGFuZGxlciksdC5vZmYob24rT3QsXCJhLmstZ3JpZC11cGRhdGVcIixlLl9lZGl0VXBkYXRlQ2xpY2tIYW5kbGVyKSksZS5fZGV0YWNoTW9kZWxDaGFuZ2UoKSxlLmVkaXRhYmxlLmRlc3Ryb3koKSxlLmVkaXRhYmxlPW51bGwsZS5fZWRpdENvbnRhaW5lcj1udWxsLGUuX2Rlc3Ryb3lFZGl0VmlldygpfX07ZS5lZGl0YWJsZSYmKFwicG9wdXBcIiE9PWUuX2VkaXRNb2RlKCl8fGUuX2lzTW9iaWxlP3QoKTplLl9lZGl0Q29udGFpbmVyLmRhdGEoXCJrZW5kb1dpbmRvd1wiKS5iaW5kKFwiZGVhY3RpdmF0ZVwiLHQpLmNsb3NlKCkpLGUuX2FjdGlvblNoZWV0JiYoZS5fYWN0aW9uU2hlZXQuZGVzdHJveSgpLGUuX2FjdGlvblNoZWV0PW51bGwpfSxfZGVzdHJveUVkaXRWaWV3OmZ1bmN0aW9uKCl7dGhpcy5lZGl0VmlldyYmKHRoaXMuZWRpdFZpZXcucHVyZ2UoKSx0aGlzLmVkaXRWaWV3PW51bGwsdGhpcy5wYW5lLm5hdmlnYXRlKFwiXCIpKX0sX2F0dGFjaE1vZGVsQ2hhbmdlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fbW9kZWxDaGFuZ2VIYW5kbGVyPWZ1bmN0aW9uKGUpe3QuX21vZGVsQ2hhbmdlKHtmaWVsZDplLmZpZWxkLG1vZGVsOnRoaXN9KX0sZS5iaW5kKFwiY2hhbmdlXCIsdC5fbW9kZWxDaGFuZ2VIYW5kbGVyKX0sX2RldGFjaE1vZGVsQ2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX2VkaXRDb250YWluZXIsbj1lLl9tb2RlbEZvckNvbnRhaW5lcih0KTtuJiZuLnVuYmluZChHdCxlLl9tb2RlbENoYW5nZUhhbmRsZXIpfSxjbG9zZUNlbGw6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG8sYT10aGlzLHM9YS5fZWRpdENvbnRhaW5lcjtzJiYobj1zLmNsb3Nlc3QoXCJ0clwiKS5hdHRyKHV0LmF0dHIoXCJ1aWRcIikpLG89YS5kYXRhU291cmNlLmdldEJ5VWlkKG4pLHQmJmEudHJpZ2dlcihcImNhbmNlbFwiLHtjb250YWluZXI6cyxtb2RlbDpvfSl8fChzLnJlbW92ZUNsYXNzKFwiay1lZGl0LWNlbGxcIiksaT1MKGEuY29sdW1ucylbYS5jZWxsSW5kZXgocyldLHI9cy5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImstZ3JpZC1lZGl0LXJvd1wiKSxhLl9kZXN0cm95RWRpdGFibGUoKSxhLl9kaXNwbGF5Q2VsbChzLGksbykscy5oYXNDbGFzcyhcImstZGlydHktY2VsbFwiKSYmZSgnPHNwYW4gY2xhc3M9XCJrLWRpcnR5XCIvPicpLnByZXBlbmRUbyhzKSxhLmxvY2tlZENvbnRlbnQmJmV0KHIuY3NzKFwiaGVpZ2h0XCIsXCJcIilbMF0sYS5fcmVsYXRlZFJvdyhyKS5jc3MoXCJoZWlnaHRcIixcIlwiKVswXSkpKX0sX2Rpc3BsYXlDZWxsOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLHI9e3N0b3JhZ2U6e30sY291bnQ6MH0sbz13dCh7fSx1dC5UZW1wbGF0ZSxpLm9wdGlvbnMudGVtcGxhdGVTZXR0aW5ncyksYT11dC50ZW1wbGF0ZShpLl9jZWxsVG1wbCh0LHIpLG8pO3IuY291bnQ+MCYmKGE9VHQoYSxyLnN0b3JhZ2UpKSxlLmVtcHR5KCkuaHRtbChhKG4pKSxpLmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6ZSxkYXRhOlt7ZGF0YUl0ZW06bn1dfX0pfSxyZW1vdmVSb3c6ZnVuY3Rpb24oZSl7dGhpcy5fY29uZmlybWF0aW9uKGUpJiZ0aGlzLl9yZW1vdmVSb3coZSl9LF9yZW1vdmVSb3c6ZnVuY3Rpb24odCl7dmFyIG4saT10aGlzLHI9aS5fZWRpdE1vZGUoKTtcImluY2VsbFwiIT09ciYmaS5jYW5jZWxSb3coKSx0PWUodCkuaGlkZSgpLG49aS5fbW9kZWxGb3JDb250YWluZXIodCksbiYmIWkudHJpZ2dlcihWdCx7cm93OnQsbW9kZWw6bn0pPyhpLmRhdGFTb3VyY2UucmVtb3ZlKG4pLChcImlubGluZVwiPT09cnx8XCJwb3B1cFwiPT09cikmJmkuZGF0YVNvdXJjZS5zeW5jKCkpOlwiaW5jZWxsXCI9PT1yJiZpLl9kZXN0cm95RWRpdGFibGUoKX0sX2VkaXRNb2RlOmZ1bmN0aW9uKCl7dmFyIGU9XCJpbmNlbGxcIix0PXRoaXMub3B0aW9ucy5lZGl0YWJsZTtyZXR1cm4gdCE9PSEwJiYoZT1cInN0cmluZ1wiPT10eXBlb2YgdD90OnQubW9kZXx8ZSksZX0sZWRpdFJvdzpmdW5jdGlvbihuKXt2YXIgaSxyLG8sYT10aGlzO24gaW5zdGFuY2VvZiB1dC5kYXRhLk9ic2VydmFibGVPYmplY3Q/aT1uOihuPWUobiksaT1hLl9tb2RlbEZvckNvbnRhaW5lcihuKSkscj1hLl9lZGl0TW9kZSgpLGEuY2FuY2VsUm93KCksaSYmKGEuX2F0dGFjaE1vZGVsQ2hhbmdlKGkpLFwicG9wdXBcIj09PXI/YS5fY3JlYXRlUG9wdXBFZGl0b3IoaSk6XCJpbmxpbmVcIj09PXI/YS5fY3JlYXRlSW5saW5lRWRpdG9yKG4saSk6XCJpbmNlbGxcIj09PXImJmUobikuY2hpbGRyZW4oSXQpLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1lKHRoaXMpLHI9TChhLmNvbHVtbnMpW24uaW5kZXgoKV07cmV0dXJuIGk9YS5fbW9kZWxGb3JDb250YWluZXIobiksaSYmKCFpLmVkaXRhYmxlfHxpLmVkaXRhYmxlKHIuZmllbGQpKSYmci5maWVsZD8oYS5lZGl0Q2VsbChuKSwhMSk6dH0pLG89YS5lZGl0Vmlldz9hLmVkaXRWaWV3LmVsZW1lbnQ6YS5fZWRpdENvbnRhaW5lcixvJiYodGhpcy5fZWRpdENhbmNlbENsaWNrSGFuZGxlcnx8KHRoaXMuX2VkaXRDYW5jZWxDbGlja0hhbmRsZXI9VHQodGhpcy5fZWRpdENhbmNlbENsaWNrLHRoaXMpKSxvLm9uKG9uK090LFwiYS5rLWdyaWQtY2FuY2VsXCIsdGhpcy5fZWRpdENhbmNlbENsaWNrSGFuZGxlciksdGhpcy5fZWRpdFVwZGF0ZUNsaWNrSGFuZGxlcnx8KHRoaXMuX2VkaXRVcGRhdGVDbGlja0hhbmRsZXI9VHQodGhpcy5fZWRpdFVwZGF0ZUNsaWNrLHRoaXMpKSxvLm9uKG9uK090LFwiYS5rLWdyaWQtdXBkYXRlXCIsdGhpcy5fZWRpdFVwZGF0ZUNsaWNrSGFuZGxlcikpKVxyXG59LF9lZGl0VXBkYXRlQ2xpY2s6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5zYXZlUm93KCl9LF9lZGl0Q2FuY2VsQ2xpY2s6ZnVuY3Rpb24odCl7dmFyIG4saT10aGlzLHI9aS5vcHRpb25zLm5hdmlnYXRhYmxlLG89aS5lZGl0YWJsZS5vcHRpb25zLm1vZGVsLGE9aS5lZGl0Vmlldz9pLmVkaXRWaWV3LmVsZW1lbnQ6aS5fZWRpdENvbnRhaW5lcjt0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSxpLnRyaWdnZXIoXCJjYW5jZWxcIix7Y29udGFpbmVyOmEsbW9kZWw6b30pfHwobj1pLml0ZW1zKCkuaW5kZXgoZShpLmN1cnJlbnQoKSkucGFyZW50KCkpLGkuY2FuY2VsUm93KCksciYmKGkuY3VycmVudChpLml0ZW1zKCkuZXEobikuY2hpbGRyZW4oKS5maWx0ZXIoUnQpLmZpcnN0KCkpLG50KGkudGFibGUsITApKSl9LF9jcmVhdGVQb3B1cEVkaXRvcjpmdW5jdGlvbihuKXt2YXIgaSxyLG8sYSxzLGwsYyxkLHUsaCxwLGY9dGhpcyxnPVwiPGRpdiBcIit1dC5hdHRyKFwidWlkXCIpKyc9XCInK24udWlkKydcIiBjbGFzcz1cImstcG9wdXAtZWRpdC1mb3JtJysoZi5faXNNb2JpbGU/XCIgay1tb2JpbGUtbGlzdFwiOlwiXCIpKydcIj48ZGl2IGNsYXNzPVwiay1lZGl0LWZvcm0tY29udGFpbmVyXCI+JyxtPVtdLHY9TChmLmNvbHVtbnMpLF89Zi5vcHRpb25zLmVkaXRhYmxlLHk9Xy50ZW1wbGF0ZSx3PXl0KF8pP18ud2luZG93Ont9LGI9d3Qoe30sdXQuVGVtcGxhdGUsZi5vcHRpb25zLnRlbXBsYXRlU2V0dGluZ3MpO2lmKHc9d3x8e30seSlmb3IodHlwZW9mIHk9PT1jbiYmKHk9d2luZG93LnVuZXNjYXBlKHkpKSxnKz11dC50ZW1wbGF0ZSh5LGIpKG4pLG89MCxhPXYubGVuZ3RoO2E+bztvKyspaT12W29dLGkuY29tbWFuZCYmKGQ9dHQoaS5jb21tYW5kLFwiZWRpdFwiKSxkJiYocj1kKSk7ZWxzZSBmb3Iobz0wLGE9di5sZW5ndGg7YT5vO28rKylpPXZbb10saS5jb21tYW5kP2kuY29tbWFuZCYmKGQ9dHQoaS5jb21tYW5kLFwiZWRpdFwiKSxkJiYocj1kKSk6KGcrPSc8ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsIGZvcj1cIicraS5maWVsZCsnXCI+JysoaS50aXRsZXx8aS5maWVsZHx8XCJcIikrXCI8L2xhYmVsPjwvZGl2PlwiLG4uZWRpdGFibGUmJiFuLmVkaXRhYmxlKGkuZmllbGQpfHwhaS5maWVsZD8oaD17c3RvcmFnZTp7fSxjb3VudDowfSxzPXV0LnRlbXBsYXRlKGYuX2NlbGxUbXBsKGksaCksYiksaC5jb3VudD4wJiYocz1UdChzLGguc3RvcmFnZSkpLGcrPSc8ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+JytzKG4pK1wiPC9kaXY+XCIpOihtLnB1c2goe2ZpZWxkOmkuZmllbGQsZm9ybWF0OmkuZm9ybWF0LGVkaXRvcjppLmVkaXRvcix2YWx1ZXM6aS52YWx1ZXN9KSxnKz1cIjxkaXYgXCIrdXQuYXR0cihcImNvbnRhaW5lci1mb3JcIikrJz1cIicraS5maWVsZCsnXCIgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj48L2Rpdj4nKSk7ciYmeXQocikmJihyLnRleHQmJnl0KHIudGV4dCkmJihsPXIudGV4dC51cGRhdGUsYz1yLnRleHQuY2FuY2VsKSxyLmF0dHImJih1PXIuYXR0cikpLGYuX2lzTW9iaWxlPyhnKz1cIjwvZGl2PjwvZGl2PlwiLGYuZWRpdFZpZXc9Zi5wYW5lLmFwcGVuZChcIjxkaXYgZGF0YS1cIit1dC5ucysncm9sZT1cInZpZXdcIiBkYXRhLScrdXQubnMrJ2luaXQtd2lkZ2V0cz1cImZhbHNlXCIgY2xhc3M9XCJrLWdyaWQtZWRpdC1mb3JtXCI+PGRpdiBkYXRhLScrdXQubnMrJ3JvbGU9XCJoZWFkZXJcIiBjbGFzcz1cImstaGVhZGVyXCI+JytmLl9jcmVhdGVCdXR0b24oe25hbWU6XCJ1cGRhdGVcIix0ZXh0OmwsYXR0cjp1fSkrKHcudGl0bGV8fFwiRWRpdFwiKStmLl9jcmVhdGVCdXR0b24oe25hbWU6XCJjYW5jZWxlZGl0XCIsdGV4dDpjLGF0dHI6dX0pK1wiPC9kaXY+XCIrZytcIjwvZGl2PlwiKSxwPWYuX2VkaXRDb250YWluZXI9Zi5lZGl0Vmlldy5lbGVtZW50LmZpbmQoXCIuay1wb3B1cC1lZGl0LWZvcm1cIikpOihnKz0nPGRpdiBjbGFzcz1cImstZWRpdC1idXR0b25zIGstc3RhdGUtZGVmYXVsdFwiPicsZys9Zi5fY3JlYXRlQnV0dG9uKHtuYW1lOlwidXBkYXRlXCIsdGV4dDpsLGF0dHI6dX0pK2YuX2NyZWF0ZUJ1dHRvbih7bmFtZTpcImNhbmNlbGVkaXRcIix0ZXh0OmMsYXR0cjp1fSksZys9XCI8L2Rpdj48L2Rpdj48L2Rpdj5cIixwPWYuX2VkaXRDb250YWluZXI9ZShnKS5hcHBlbmRUbyhmLndyYXBwZXIpLmVxKDApLmtlbmRvV2luZG93KHd0KHttb2RhbDohMCxyZXNpemFibGU6ITEsZHJhZ2dhYmxlOiEwLHRpdGxlOlwiRWRpdFwiLHZpc2libGU6ITEsY2xvc2U6ZnVuY3Rpb24oaSl7aWYoaS51c2VyVHJpZ2dlcmVkKXtpZihpLnNlbmRlci5lbGVtZW50LmZvY3VzKCksZi50cmlnZ2VyKFwiY2FuY2VsXCIse2NvbnRhaW5lcjpwLG1vZGVsOm59KSlyZXR1cm4gaS5wcmV2ZW50RGVmYXVsdCgpLHQ7dmFyIHI9Zi5pdGVtcygpLmluZGV4KGUoZi5jdXJyZW50KCkpLnBhcmVudCgpKTtmLmNhbmNlbFJvdygpLGYub3B0aW9ucy5uYXZpZ2F0YWJsZSYmKGYuY3VycmVudChmLml0ZW1zKCkuZXEocikuY2hpbGRyZW4oKS5maWx0ZXIoUnQpLmZpcnN0KCkpLG50KGYudGFibGUsITApKX19fSx3KSkpLGYuZWRpdGFibGU9Zi5fZWRpdENvbnRhaW5lci5rZW5kb0VkaXRhYmxlKHtmaWVsZHM6bSxtb2RlbDpuLGNsZWFyQ29udGFpbmVyOiExLHRhcmdldDpmfSkuZGF0YShcImtlbmRvRWRpdGFibGVcIiksZi5faXNNb2JpbGUmJnAuZmluZChcImlucHV0W3R5cGU9Y2hlY2tib3hdLGlucHV0W3R5cGU9cmFkaW9dXCIpLnBhcmVudChcIi5rLWVkaXQtZmllbGRcIikuYWRkQ2xhc3MoXCJrLWNoZWNrXCIpLnByZXYoXCIuay1lZGl0LWxhYmVsXCIpLmFkZENsYXNzKFwiay1jaGVja1wiKS5jbGljayhmdW5jdGlvbigpe2UodGhpcykubmV4dCgpLmNoaWxkcmVuKFwiaW5wdXRcIikuY2xpY2soKX0pLGYuX29wZW5Qb3BVcEVkaXRvcigpLGYudHJpZ2dlcihIdCx7Y29udGFpbmVyOnAsbW9kZWw6bn0pfSxfb3BlblBvcFVwRWRpdG9yOmZ1bmN0aW9uKCl7dGhpcy5faXNNb2JpbGU/dGhpcy5wYW5lLm5hdmlnYXRlKHRoaXMuZWRpdFZpZXcsdGhpcy5fZWRpdEFuaW1hdGlvbik6dGhpcy5fZWRpdENvbnRhaW5lci5kYXRhKFwia2VuZG9XaW5kb3dcIikuY2VudGVyKCkub3BlbigpfSxfY3JlYXRlSW5saW5lRWRpdG9yOmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLGE9dGhpcyxzPVtdO2EubG9ja2VkQ29udGVudCYmKHQ9dC5hZGQoYS5fcmVsYXRlZFJvdyh0KSkpLHQuY2hpbGRyZW4oXCI6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpLmVhY2goZnVuY3Rpb24oKXtpZihyPWUodGhpcyksaT1MKGEuY29sdW1ucylbYS5jZWxsSW5kZXgocildLGkuY29tbWFuZHx8IWkuZmllbGR8fG4uZWRpdGFibGUmJiFuLmVkaXRhYmxlKGkuZmllbGQpKXtpZihpLmNvbW1hbmQmJihvPXR0KGkuY29tbWFuZCxcImVkaXRcIikpKXtyLmVtcHR5KCk7dmFyIHQsbCxjO3l0KG8pJiYoby50ZXh0JiZ5dChvLnRleHQpJiYodD1vLnRleHQudXBkYXRlLGw9by50ZXh0LmNhbmNlbCksby5hdHRyJiYoYz1vLmF0dHIpKSxlKGEuX2NyZWF0ZUJ1dHRvbih7bmFtZTpcInVwZGF0ZVwiLHRleHQ6dCxhdHRyOmN9KSthLl9jcmVhdGVCdXR0b24oe25hbWU6XCJjYW5jZWxlZGl0XCIsdGV4dDpsLGF0dHI6Y30pKS5hcHBlbmRUbyhyKX19ZWxzZSBzLnB1c2goe2ZpZWxkOmkuZmllbGQsZm9ybWF0OmkuZm9ybWF0LGVkaXRvcjppLmVkaXRvcix2YWx1ZXM6aS52YWx1ZXN9KSxyLmF0dHIodXQuYXR0cihcImNvbnRhaW5lci1mb3JcIiksaS5maWVsZCksci5lbXB0eSgpfSksYS5fZWRpdENvbnRhaW5lcj10LGEuZWRpdGFibGU9bmV3IHV0LnVpLkVkaXRhYmxlKHQuYWRkQ2xhc3MoXCJrLWdyaWQtZWRpdC1yb3dcIikse3RhcmdldDphLGZpZWxkczpzLG1vZGVsOm4sY2xlYXJDb250YWluZXI6ITF9KSx0Lmxlbmd0aD4xJiYoZXQodFswXSx0WzFdKSxhLl9hcHBseUxvY2tlZENvbnRhaW5lcnNXaWR0aCgpKSxhLnRyaWdnZXIoSHQse2NvbnRhaW5lcjp0LG1vZGVsOm59KX0sY2FuY2VsUm93OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLG49dC5fZWRpdENvbnRhaW5lcjtuJiYoZT10Ll9tb2RlbEZvckNvbnRhaW5lcihuKSx0Ll9kZXN0cm95RWRpdGFibGUoKSx0LmRhdGFTb3VyY2UuY2FuY2VsQ2hhbmdlcyhlKSx0Ll9kaXNwbGF5Um93KFwicG9wdXBcIiE9PXQuX2VkaXRNb2RlKCk/bjp0LnRib2R5LmZpbmQoXCJbXCIrdXQuYXR0cihcInVpZFwiKStcIj1cIitlLnVpZCtcIl1cIikpKX0sc2F2ZVJvdzpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl9lZGl0Q29udGFpbmVyLG49ZS5fbW9kZWxGb3JDb250YWluZXIodCksaT1lLmVkaXRhYmxlO3QmJmkmJmkuZW5kKCkmJiFlLnRyaWdnZXIoTnQse2NvbnRhaW5lcjp0LG1vZGVsOm59KSYmZS5kYXRhU291cmNlLnN5bmMoKX0sX2Rpc3BsYXlSb3c6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG89dGhpcyxhPW8uX21vZGVsRm9yQ29udGFpbmVyKHQpLHM9dC5oYXNDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIiksbD10Lmhhc0NsYXNzKFwiay1hbHRcIik7YSYmKG8ubG9ja2VkQ29udGVudCYmKG49ZSgobD9vLmxvY2tlZEFsdFJvd1RlbXBsYXRlOm8ubG9ja2VkUm93VGVtcGxhdGUpKGEpKSxvLl9yZWxhdGVkUm93KHQubGFzdCgpKS5yZXBsYWNlV2l0aChuKSksby5hbmd1bGFyKFwiY2xlYW51cFwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOnQuZ2V0KCl9fSksaT1lKChsP28uYWx0Um93VGVtcGxhdGU6by5yb3dUZW1wbGF0ZSkoYSkpLHQucmVwbGFjZVdpdGgoaSksby5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmkuZ2V0KCksZGF0YTpbe2RhdGFJdGVtOmF9XX19KSxzJiZvLm9wdGlvbnMuc2VsZWN0YWJsZSYmby5zZWxlY3QoaS5hZGQobikpLG4mJmV0KGlbMF0sblswXSkscj1pLm5leHQoKSxyLmhhc0NsYXNzKFwiay1kZXRhaWwtcm93XCIpJiZyLmlzKFwiOnZpc2libGVcIikmJmkuZmluZChcIi5rLWhpZXJhcmNoeS1jZWxsIC5rLWljb25cIikucmVtb3ZlQ2xhc3MoXCJrLXBsdXNcIikuYWRkQ2xhc3MoXCJrLW1pbnVzXCIpKX0sX3Nob3dNZXNzYWdlOmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLGE9dGhpcztyZXR1cm4gYS5faXNNb2JpbGU/KGk9dXQudGVtcGxhdGUoJzx1bD48bGkgY2xhc3M9XCJrbS1hY3Rpb25zaGVldC10aXRsZVwiPiM6dGl0bGUjPC9saT48bGk+PGEgaHJlZj1cIlxcXFwjXCIgY2xhc3M9XCJrLWJ1dHRvbiBrLWdyaWQtZGVsZXRlXCI+Izpjb25maXJtRGVsZXRlIzwvYT48L2xpPjwvdWw+Jykscj1lKGkodCkpLmFwcGVuZFRvKGEudmlldy5lbGVtZW50KSxvPWEuX2FjdGlvblNoZWV0PW5ldyB1dC5tb2JpbGUudWkuQWN0aW9uU2hlZXQocix7Y2FuY2VsOnQuY2FuY2VsRGVsZXRlLGNhbmNlbFRlbXBsYXRlOic8bGkgY2xhc3M9XCJrbS1hY3Rpb25zaGVldC1jYW5jZWxcIj48YSBjbGFzcz1cImstYnV0dG9uXCIgaHJlZj1cIlxcXFwjXCI+IzpjYW5jZWwjPC9hPjwvbGk+JyxjbG9zZTpmdW5jdGlvbigpe3RoaXMuZGVzdHJveSgpfSxjb21tYW5kOmZ1bmN0aW9uKHQpe3ZhciBpPWUodC5jdXJyZW50VGFyZ2V0KS5wYXJlbnQoKTtpLmhhc0NsYXNzKFwia20tYWN0aW9uc2hlZXQtY2FuY2VsXCIpfHxhLl9yZW1vdmVSb3cobil9LHBvcHVwOmEuX2FjdGlvblNoZWV0UG9wdXBPcHRpb25zfSksby5vcGVuKG4pLCExKTp3aW5kb3cuY29uZmlybSh0LnRpdGxlKX0sX2NvbmZpcm1hdGlvbjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLmVkaXRhYmxlLGk9bj09PSEwfHx0eXBlb2Ygbj09PWNuP3Qub3B0aW9ucy5tZXNzYWdlcy5lZGl0YWJsZS5jb25maXJtYXRpb246bi5jb25maXJtYXRpb247cmV0dXJuIGkhPT0hMSYmbnVsbCE9aT8odHlwZW9mIGk9PT1sbiYmKGk9aSh0Ll9tb2RlbEZvckNvbnRhaW5lcihlKSkpLHQuX3Nob3dNZXNzYWdlKHtjb25maXJtRGVsZXRlOm4uY29uZmlybURlbGV0ZXx8dC5vcHRpb25zLm1lc3NhZ2VzLmVkaXRhYmxlLmNvbmZpcm1EZWxldGUsY2FuY2VsRGVsZXRlOm4uY2FuY2VsRGVsZXRlfHx0Lm9wdGlvbnMubWVzc2FnZXMuZWRpdGFibGUuY2FuY2VsRGVsZXRlLHRpdGxlOmk9PT0hMD90Lm9wdGlvbnMubWVzc2FnZXMuZWRpdGFibGUuY29uZmlybWF0aW9uOml9LGUpKTohMH0sY2FuY2VsQ2hhbmdlczpmdW5jdGlvbigpe3RoaXMuZGF0YVNvdXJjZS5jYW5jZWxDaGFuZ2VzKCl9LHNhdmVDaGFuZ2VzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczsoZS5lZGl0YWJsZSYmZS5lZGl0YWJsZS5lbmQoKXx8IWUuZWRpdGFibGUpJiYhZS50cmlnZ2VyKFl0KSYmZS5kYXRhU291cmNlLnN5bmMoKX0sYWRkUm93OmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixvLGE9dGhpcyxzPWEuZGF0YVNvdXJjZSxsPWEuX2VkaXRNb2RlKCksYz1hLm9wdGlvbnMuZWRpdGFibGUuY3JlYXRlQXR8fFwiXCIsZD1zLnBhZ2VTaXplKCksdT1zLnZpZXcoKXx8W107KGEuZWRpdGFibGUmJmEuZWRpdGFibGUuZW5kKCl8fCFhLmVkaXRhYmxlKSYmKFwiaW5jZWxsXCIhPWwmJmEuY2FuY2VsUm93KCksZT1zLmluZGV4T2YodVswXSksXCJib3R0b21cIj09Yy50b0xvd2VyQ2FzZSgpJiYoZSs9dS5sZW5ndGgsZCYmIXMub3B0aW9ucy5zZXJ2ZXJQYWdpbmcmJnUubGVuZ3RoPj1kJiYoZS09MSkpLDA+ZSYmKGU9cy5wYWdlKCk+cy50b3RhbFBhZ2VzKCk/KHMucGFnZSgpLTEpKmQ6MCksdD1zLmluc2VydChlLHt9KSxuPXQudWlkLGk9YS5sb2NrZWRDb250ZW50P2EubG9ja2VkVGFibGU6YS50YWJsZSxyPWkuZmluZChcInRyW1wiK3V0LmF0dHIoXCJ1aWRcIikrXCI9XCIrbitcIl1cIiksbz1yLmNoaWxkcmVuKFwidGQ6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpLmVxKGEuX2ZpcnN0RWRpdGFibGVDb2x1bW5JbmRleChyKSksXCJpbmxpbmVcIj09PWwmJnIubGVuZ3RoP2EuZWRpdFJvdyhyKTpcInBvcHVwXCI9PT1sP2EuZWRpdFJvdyh0KTpvLmxlbmd0aCYmYS5lZGl0Q2VsbChvKSxcImJvdHRvbVwiPT1jLnRvTG93ZXJDYXNlKCkmJmEubG9ja2VkQ29udGVudCYmKGEubG9ja2VkQ29udGVudFswXS5zY3JvbGxUb3A9YS5jb250ZW50WzBdLnNjcm9sbFRvcD1hLmNvbnRlbnRbMF0ub2Zmc2V0SGVpZ2h0KSl9LF9maXJzdEVkaXRhYmxlQ29sdW1uSW5kZXg6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9dGhpcyxvPUwoci5jb2x1bW5zKSxhPXIuX21vZGVsRm9yQ29udGFpbmVyKGUpO2ZvcihuPTAsaT1vLmxlbmd0aDtpPm47bisrKWlmKHQ9b1tuXSxhJiYoIWEuZWRpdGFibGV8fGEuZWRpdGFibGUodC5maWVsZCkpJiYhdC5jb21tYW5kJiZ0LmZpZWxkKXJldHVybiBuO3JldHVybi0xfSxfdG9vbGJhcjpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4ud3JhcHBlcixyPW4ub3B0aW9ucy50b29sYmFyLG89bi5vcHRpb25zLmVkaXRhYmxlO3ImJih0PW4ud3JhcHBlci5maW5kKFwiLmstZ3JpZC10b29sYmFyXCIpLHQubGVuZ3RofHwoRHQocil8fChyPXR5cGVvZiByPT09Y24/cjpuLl90b29sYmFyVG1wbChyKS5yZXBsYWNlKGZuLFwiXFxcXCNcIikscj1UdCh1dC50ZW1wbGF0ZShyKSxuKSksdD1lKCc8ZGl2IGNsYXNzPVwiay1oZWFkZXIgay1ncmlkLXRvb2xiYXJcIiAvPicpLmh0bWwocih7fSkpLnByZXBlbmRUbyhpKSxuLmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6dC5nZXQoKX19KSksbyYmby5jcmVhdGUhPT0hMSYmdC5vbihvbitPdCxcIi5rLWdyaWQtYWRkXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLG4uYWRkUm93KCl9KS5vbihvbitPdCxcIi5rLWdyaWQtY2FuY2VsLWNoYW5nZXNcIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksbi5jYW5jZWxDaGFuZ2VzKCl9KS5vbihvbitPdCxcIi5rLWdyaWQtc2F2ZS1jaGFuZ2VzXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLG4uc2F2ZUNoYW5nZXMoKX0pLHQub24ob24rT3QsXCIuay1ncmlkLWV4Y2VsXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLG4uc2F2ZUFzRXhjZWwoKX0pLHQub24ob24rT3QsXCIuay1ncmlkLXBkZlwiLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxuLnNhdmVBc1BERigpfSkpfSxfdG9vbGJhclRtcGw6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMscj1cIlwiO2lmKHh0KGUpKWZvcih0PTAsbj1lLmxlbmd0aDtuPnQ7dCsrKXIrPWkuX2NyZWF0ZUJ1dHRvbihlW3RdKTtyZXR1cm4gcn0sX2NyZWF0ZUJ1dHRvbjpmdW5jdGlvbihlKXt2YXIgbixyPWUudGVtcGxhdGV8fF9uLG89dHlwZW9mIGU9PT1jbj9lOmUubmFtZXx8ZS50ZXh0LGE9Q25bb10/Q25bb10uY2xhc3NOYW1lOlwiay1ncmlkLVwiKyhvfHxcIlwiKS5yZXBsYWNlKC9cXHMvZyxcIlwiKSxzPXtjbGFzc05hbWU6YSx0ZXh0Om8saW1hZ2VDbGFzczpcIlwiLGF0dHI6XCJcIixpY29uQ2xhc3M6XCJcIn0sbD10aGlzLm9wdGlvbnMubWVzc2FnZXMuY29tbWFuZHM7aWYoIShvfHx5dChlKSYmZS50ZW1wbGF0ZSkpdGhyb3cgRXJyb3IoXCJDdXN0b20gY29tbWFuZHMgc2hvdWxkIGhhdmUgbmFtZSBzcGVjaWZpZWRcIik7cmV0dXJuIHl0KGUpPyhlLmNsYXNzTmFtZSYmQ3Qocy5jbGFzc05hbWUsZS5jbGFzc05hbWUuc3BsaXQoXCIgXCIpKTwwP2UuY2xhc3NOYW1lKz1cIiBcIitzLmNsYXNzTmFtZTplLmNsYXNzTmFtZT09PXQmJihlLmNsYXNzTmFtZT1zLmNsYXNzTmFtZSksXCJlZGl0XCI9PT1vJiZ5dChlLnRleHQpJiYoZT13dCghMCx7fSxlKSxlLnRleHQ9ZS50ZXh0LmVkaXQpLGUuYXR0ciYmKHl0KGUuYXR0cikmJihlLmF0dHI9aShlLmF0dHIpKSx0eXBlb2YgZS5hdHRyPT09Y24mJihuPWUuYXR0ci5tYXRjaCgvY2xhc3M9XCIoLis/KVwiLyksbiYmQ3QoblsxXSxlLmNsYXNzTmFtZS5zcGxpdChcIiBcIikpPDAmJihlLmNsYXNzTmFtZSs9XCIgXCIrblsxXSkpKSxzPXd0KCEwLHMsQ25bb10se3RleHQ6bFtvXX0sZSkpOnM9d3QoITAscyxDbltvXSx7dGV4dDpsW29dfSksdXQudGVtcGxhdGUocikocyl9LF9oYXNGb290ZXJzOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLmZvb3RlclRlbXBsYXRlfHwhIXRoaXMuZ3JvdXBGb290ZXJUZW1wbGF0ZXx8dGhpcy5mb290ZXImJnRoaXMuZm9vdGVyLmxlbmd0aD4wfHx0aGlzLndyYXBwZXIuZmluZChcIi5rLWdyaWQtZm9vdGVyXCIpLmxlbmd0aD4wfSxfZ3JvdXBhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0Ll9ncm91cGFibGVDbGlja0hhbmRsZXI/dC50YWJsZS5hZGQodC5sb2NrZWRUYWJsZSkub2ZmKG9uK090LHQuX2dyb3VwYWJsZUNsaWNrSGFuZGxlcik6dC5fZ3JvdXBhYmxlQ2xpY2tIYW5kbGVyPWZ1bmN0aW9uKG4pe3ZhciBpPWUodGhpcykscj1pLmNsb3Nlc3QoXCJ0clwiKTtpLmhhc0NsYXNzKFwiay1pLWNvbGxhcHNlXCIpP3QuY29sbGFwc2VHcm91cChyKTp0LmV4cGFuZEdyb3VwKHIpLG4ucHJldmVudERlZmF1bHQoKSxuLnN0b3BQcm9wYWdhdGlvbigpfSx0Ll9pc0xvY2tlZCgpP3QubG9ja2VkVGFibGUub24ob24rT3QsXCIuay1ncm91cGluZy1yb3cgLmstaS1jb2xsYXBzZSwgLmstZ3JvdXBpbmctcm93IC5rLWktZXhwYW5kXCIsdC5fZ3JvdXBhYmxlQ2xpY2tIYW5kbGVyKTp0LnRhYmxlLm9uKG9uK090LFwiLmstZ3JvdXBpbmctcm93IC5rLWktY29sbGFwc2UsIC5rLWdyb3VwaW5nLXJvdyAuay1pLWV4cGFuZFwiLHQuX2dyb3VwYWJsZUNsaWNrSGFuZGxlciksdC5fYXR0YWNoR3JvdXBhYmxlKCl9LF9hdHRhY2hHcm91cGFibGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC53cmFwcGVyLGk9dC5vcHRpb25zLmdyb3VwYWJsZSxyPUx0K1wiW1wiK3V0LmF0dHIoXCJmaWVsZFwiKStcIl1cIixvPXQuY29udGVudD9cIi5rLWdyaWQtaGVhZGVyOmZpcnN0IFwiK3I6XCJ0YWJsZTpmaXJzdD4uay1ncmlkLWhlYWRlciBcIityO2kmJmkuZW5hYmxlZCE9PSExJiYobi5oYXMoXCJkaXYuay1ncm91cGluZy1oZWFkZXJcIilbMF18fGUoXCI8ZGl2PiZuYnNwOzwvZGl2PlwiKS5hZGRDbGFzcyhcImstZ3JvdXBpbmctaGVhZGVyXCIpLnByZXBlbmRUbyhuKSx0Lmdyb3VwYWJsZSYmdC5ncm91cGFibGUuZGVzdHJveSgpLHQuZ3JvdXBhYmxlPW5ldyBmdChuLHd0KHt9LGkse2RyYWdnYWJsZTp0Ll9kcmFnZ2FibGVJbnN0YW5jZSxncm91cENvbnRhaW5lcjpcIj5kaXYuay1ncm91cGluZy1oZWFkZXJcIixkYXRhU291cmNlOnQuZGF0YVNvdXJjZSxkcmFnZ2FibGVFbGVtZW50czpvLGZpbHRlcjpvLGFsbG93RHJhZzp0Lm9wdGlvbnMucmVvcmRlcmFibGV9KSkpfSxfY29udGludW91c0l0ZW1zOmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLGEscyxsLGMsZDtpZih0aGlzLmxvY2tlZENvbnRlbnQpe2ZvcihpPXRoaXMscj1pLnRhYmxlLmFkZChpLmxvY2tlZFRhYmxlKSxvPWUodCxyWzBdKSxhPWUodCxyWzFdKSxzPW4/SShpLmNvbHVtbnMpLmxlbmd0aDoxLGw9bj9pLmNvbHVtbnMubGVuZ3RoLXM6MSxjPVtdLGQ9MDtvLmxlbmd0aD5kO2QrPXMpU3QuYXBwbHkoYyxvLnNsaWNlKGQsZCtzKSksU3QuYXBwbHkoYyxhLnNwbGljZSgwLGwpKTtyZXR1cm4gY319LF9zZWxlY3RhYmxlOmZ1bmN0aW9uKCl7dmFyIG4saSxyLG8sYT10aGlzLHM9W10sbD1hLl9pc0xvY2tlZCgpLGM9YS5vcHRpb25zLnNlbGVjdGFibGU7YyYmKGEuc2VsZWN0YWJsZSYmYS5zZWxlY3RhYmxlLmRlc3Ryb3koKSxjPXV0LnVpLlNlbGVjdGFibGUucGFyc2VPcHRpb25zKGMpLG49Yy5tdWx0aXBsZSxpPWMuY2VsbCxhLl9oYXNEZXRhaWxzKCkmJihzW3MubGVuZ3RoXT1cIi5rLWRldGFpbC1yb3dcIiksKGEub3B0aW9ucy5ncm91cGFibGV8fGEuX2hhc0Zvb3RlcnMoKSkmJihzW3MubGVuZ3RoXT1cIi5rLWdyb3VwaW5nLXJvdywuay1ncm91cC1mb290ZXJcIikscz1zLmpvaW4oXCIsXCIpLFwiXCIhPT1zJiYocz1cIjpub3QoXCIrcytcIilcIikscj1hLnRhYmxlLGwmJihyPXIuYWRkKGEubG9ja2VkVGFibGUpKSxvPVwiPlwiKyhpP3p0OlwidGJvZHk+dHJcIitzKSxhLnNlbGVjdGFibGU9bmV3IHV0LnVpLlNlbGVjdGFibGUocix7ZmlsdGVyOm8sYXJpYTohMCxtdWx0aXBsZTpuLGNoYW5nZTpmdW5jdGlvbigpe2EudHJpZ2dlcihHdCl9LHVzZUFsbEl0ZW1zOmwmJm4mJmkscmVsYXRlZFRhcmdldDpmdW5jdGlvbih0KXt2YXIgbixyLG8scztpZighaSYmbCl7Zm9yKHI9ZSgpLG89MCxzPXQubGVuZ3RoO3M+bztvKyspbj1hLl9yZWxhdGVkUm93KHRbb10pLEN0KG5bMF0sdCk8MCYmKHI9ci5hZGQobikpO3JldHVybiByfX0sY29udGludW91c0l0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIGEuX2NvbnRpbnVvdXNJdGVtcyhvLGkpfX0pLGEub3B0aW9ucy5uYXZpZ2F0YWJsZSYmci5vbihcImtleWRvd25cIitPdCxmdW5jdGlvbihvKXt2YXIgcz1hLmN1cnJlbnQoKSxjPW8udGFyZ2V0O2lmKG8ua2V5Q29kZT09PV90LlNQQUNFQkFSJiZlLmluQXJyYXkoYyxyKT4tMSYmIXMuaXMoXCIuay1lZGl0LWNlbGwsLmstaGVhZGVyXCIpJiZzLnBhcmVudCgpLmlzKFwiOm5vdCguay1ncm91cGluZy1yb3csLmstZGV0YWlsLXJvdywuay1ncm91cC1mb290ZXIpXCIpKXtpZihvLnByZXZlbnREZWZhdWx0KCksby5zdG9wUHJvcGFnYXRpb24oKSxzPWk/czpzLnBhcmVudCgpLGwmJiFpJiYocz1zLmFkZChhLl9yZWxhdGVkUm93KHMpKSksbilpZihvLmN0cmxLZXkpe2lmKHMuaGFzQ2xhc3MoWnQpKXJldHVybiBzLnJlbW92ZUNsYXNzKFp0KSxhLnRyaWdnZXIoR3QpLHR9ZWxzZSBhLnNlbGVjdGFibGUuY2xlYXIoKTtlbHNlIGEuc2VsZWN0YWJsZS5jbGVhcigpO2Euc2VsZWN0YWJsZS52YWx1ZShzKX19KSl9LF9yZWxhdGVkUm93OmZ1bmN0aW9uKHQpe3ZhciBuLGkscj10aGlzLmxvY2tlZFRhYmxlO3JldHVybiB0PWUodCkscj8obj10LmNsb3Nlc3QodGhpcy50YWJsZS5hZGQodGhpcy5sb2NrZWRUYWJsZSkpLGk9bi5maW5kKFwiPnRib2R5PnRyXCIpLmluZGV4KHQpLG49blswXT09PXRoaXMudGFibGVbMF0/cjp0aGlzLnRhYmxlLG4uZmluZChcIj50Ym9keT50clwiKS5lcShpKSk6dH0sY2xlYXJTZWxlY3Rpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Uuc2VsZWN0YWJsZS5jbGVhcigpLGUudHJpZ2dlcihHdCl9LHNlbGVjdDpmdW5jdGlvbihuKXt2YXIgaT10aGlzLHI9aS5zZWxlY3RhYmxlO3JldHVybiBuPWUobiksbi5sZW5ndGg/KHIub3B0aW9ucy5tdWx0aXBsZXx8KHIuY2xlYXIoKSxuPW4uZmlyc3QoKSksaS5faXNMb2NrZWQoKSYmKG49bi5hZGQobi5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gaS5fcmVsYXRlZFJvdyh0aGlzKX0pKSksci52YWx1ZShuKSx0KTpyLnZhbHVlKCl9LGN1cnJlbnQ6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLHI9aS5vcHRpb25zLnNjcm9sbGFibGUsbz1pLl9jdXJyZW50LGE9aS50YWJsZS5hZGQoaS50aGVhZC5wYXJlbnQoKSk7cmV0dXJuIGUhPT10JiZlLmxlbmd0aCYmKG8mJm9bMF09PT1lWzBdfHwobyYmKG8ucmVtb3ZlQ2xhc3MoSnQpLnJlbW92ZUF0dHIoXCJpZFwiKSxhLnJlbW92ZUF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIikpLGUuYXR0cihcImlkXCIsaS5fY2VsbElkKSxpLl9jdXJyZW50PWUuYWRkQ2xhc3MoSnQpLGEuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLGkuX2NlbGxJZCksZS5sZW5ndGgmJnImJihuPWUuY2xvc2VzdChcInRhYmxlXCIpLnBhcmVudCgpLG4uaXMoXCIuay1ncmlkLWNvbnRlbnRcIik/aS5fc2Nyb2xsVG8oZS5wYXJlbnQoKVswXSxpLmNvbnRlbnRbMF0pOm4uaXMoXCIuay1ncmlkLWNvbnRlbnQtbG9ja2VkXCIpJiYoaS5fc2Nyb2xsVG8oaS5fcmVsYXRlZFJvdyhlLnBhcmVudCgpKVswXSxpLmNvbnRlbnRbMF0pLGkubG9ja2VkQ29udGVudFswXS5zY3JvbGxUb3A9aS5jb250ZW50WzBdLnNjcm9sbFRvcCksbi5pcyhcIi5rLWdyaWQtY29udGVudC1sb2NrZWQsLmstZ3JpZC1oZWFkZXItbG9ja2VkXCIpfHwoci52aXJ0dWFsP2kuX3Njcm9sbFRvKGVbMF0saS5jb250ZW50LmZpbmQoXCI+LmstdmlydHVhbC1zY3JvbGxhYmxlLXdyYXBcIilbMF0pOmkuX3Njcm9sbFRvKGVbMF0saS5jb250ZW50WzBdKSkpKSksaS5fY3VycmVudH0sX3JlbW92ZUN1cnJlbnQ6ZnVuY3Rpb24oKXt0aGlzLl9jdXJyZW50JiYodGhpcy5fY3VycmVudC5yZW1vdmVDbGFzcyhKdCksdGhpcy5fY3VycmVudD1udWxsKX0sX3Njcm9sbFRvOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS50YWdOYW1lLnRvTG93ZXJDYXNlKCksaT1cInRkXCI9PT1ufHxcInRoXCI9PT1uLHI9ZVtpP1wib2Zmc2V0TGVmdFwiOlwib2Zmc2V0VG9wXCJdLG89ZVtpP1wib2Zmc2V0V2lkdGhcIjpcIm9mZnNldEhlaWdodFwiXSxhPXRbaT9cInNjcm9sbExlZnRcIjpcInNjcm9sbFRvcFwiXSxzPXRbaT9cImNsaWVudFdpZHRoXCI6XCJjbGllbnRIZWlnaHRcIl0sbD1yK28sYz0wO2M9YT5yP3I6bD5hK3M/cz49bz9sLXM6cjphLHRbaT9cInNjcm9sbExlZnRcIjpcInNjcm9sbFRvcFwiXT1jfSxfbmF2aWdhdGFibGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49VHQodC5jdXJyZW50LHQpLGk9dC50YWJsZS5hZGQodC5sb2NrZWRUYWJsZSkscj10LnRoZWFkLnBhcmVudCgpLmFkZChlKFwiPnRhYmxlXCIsdC5sb2NrZWRIZWFkZXIpKSxvPSh0Ll9pc0xvY2tlZCgpLGkpLGE9dXQuc3VwcG9ydC5pc1J0bCh0LmVsZW1lbnQpO3Qub3B0aW9ucy5uYXZpZ2F0YWJsZSYmKHQub3B0aW9ucy5zY3JvbGxhYmxlJiYobz1pLmFkZChyKSxyLmF0dHIoc24sLTEpKSxvLm9mZihcIm1vdXNlZG93blwiK090K1wiIGZvY3VzXCIrT3QrXCIgZm9jdXNvdXRcIitPdCtcIiBrZXlkb3duXCIrT3QpLHIub24oXCJrZXlkb3duXCIrT3QsZnVuY3Rpb24oZSl7ZS5hbHRLZXkmJmUua2V5Q29kZT09X3QuRE9XTiYmKG4oKS5maW5kKFwiLmstZ3JpZC1maWx0ZXIsIC5rLWhlYWRlci1jb2x1bW4tbWVudVwiKS5jbGljaygpLGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkpfSkuZmluZChcImEuay1saW5rXCIpLmF0dHIoXCJ0YWJJbmRleFwiLC0xKSxpLmF0dHIoc24sRXQubWF4KGkuYXR0cihzbil8fDAsMCkpLm9uKFwibW91c2Vkb3duXCIrT3QrXCIga2V5ZG93blwiK090LFwiLmstZGV0YWlsLWNlbGxcIixmdW5jdGlvbihlKXtlLnRhcmdldCE9PWUuY3VycmVudFRhcmdldCYmZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKX0pLG8ub24odXQuc3VwcG9ydC50b3VjaD9cInRvdWNoc3RhcnRcIitPdDpcIm1vdXNlZG93blwiK090LEZ0K1wiPlwiK1J0LFR0KGl0LHQpKS5vbihcImZvY3VzXCIrT3QsZnVuY3Rpb24oKXtpZighdXQuc3VwcG9ydC50b3VjaCl7dmFyIHQ9bigpO3QmJnQuaXMoXCI6dmlzaWJsZVwiKT90LmFkZENsYXNzKEp0KTpuKGUodGhpcykuZmluZChCdCkpLGkuYXR0cihzbiwtMSksci5hdHRyKHNuLC0xKSxlKHRoaXMpLmF0dHIoc24sMCl9fSkub24oXCJmb2N1c291dFwiK090LGZ1bmN0aW9uKCl7dmFyIGU9bigpO2UmJmUucmVtb3ZlQ2xhc3MoSnQpfSkub24oXCJrZXlkb3duXCIrT3QsZnVuY3Rpb24obyl7dmFyIHMsbCxjLGQsdSxoPW8ua2V5Q29kZSxwPSExLGY9IW8uaXNEZWZhdWx0UHJldmVudGVkKCkmJiFlKG8udGFyZ2V0KS5pcyhcIjpidXR0b24sYSw6aW5wdXQsYT4uay1pY29uXCIpLGc9dC5vcHRpb25zLnBhZ2VhYmxlLG09dC5kYXRhU291cmNlLHY9XCJpbmNlbGxcIj09dC5fZWRpdE1vZGUoKSxfPW8uc2hpZnRLZXkseT1UdCh0Ll9yZWxhdGVkUm93LHQpLHc9bigpO2lmKHcmJncuaXMoXCJ0aFwiKSYmKGY9ITApLGYmJmg9PV90LlVQKW4ob3QodyxvLmN1cnJlbnRUYXJnZXQsaSxyLCEwKSkscD0hMDtlbHNlIGlmKGYmJmg9PV90LkRPV04pbihvdCh3LG8uY3VycmVudFRhcmdldCxpLHIpKSxwPSEwO2Vsc2UgaWYoZiYmaD09KGE/X3QuUklHSFQ6X3QuTEVGVCkpbihhdCh3LG8uY3VycmVudFRhcmdldCxpLHIseSkpLHA9ITA7ZWxzZSBpZihmJiZoPT0oYT9fdC5MRUZUOl90LlJJR0hUKSluKHN0KHcsby5jdXJyZW50VGFyZ2V0LGkscix5KSkscD0hMDtlbHNlIGlmKGYmJmcmJl90LlBBR0VET1dOPT1oKW0ucGFnZShtLnBhZ2UoKSsxKSxwPSEwO2Vsc2UgaWYoZiYmZyYmX3QuUEFHRVVQPT1oKW0ucGFnZShtLnBhZ2UoKS0xKSxwPSEwO2Vsc2UgaWYoaD09X3QuRU5URVJ8fF90LkYyPT1oKXtpZih3PXc/dzppLmZpbmQoQnQpLCF3Lmxlbmd0aClyZXR1cm47ZShvLnRhcmdldCkuaXMoXCJ0YWJsZVwiKXx8ZS5jb250YWlucyh3WzBdLG8udGFyZ2V0KXx8KHc9ZShvLnRhcmdldCkuY2xvc2VzdChcIltyb2xlPWdyaWRjZWxsXVwiKSksdy5pcyhcInRoXCIpPyh3LmZpbmQoXCIuay1saW5rXCIpLmNsaWNrKCkscD0hMCk6dy5wYXJlbnQoKS5pcyhcIi5rLW1hc3Rlci1yb3csLmstZ3JvdXBpbmctcm93XCIpPyh3LnBhcmVudCgpLmZpbmQoXCIuay1pY29uOmZpcnN0XCIpLmNsaWNrKCkscD0hMCk6KGM9dy5maW5kKFwiOmtlbmRvRm9jdXNhYmxlOmZpcnN0XCIpLCF3Lmhhc0NsYXNzKFwiay1lZGl0LWNlbGxcIikmJmNbMF0mJncuaGFzQ2xhc3MoXCJrLXN0YXRlLWZvY3VzZWRcIik/KGMuZm9jdXMoKSxwPSEwKTp0Lm9wdGlvbnMuZWRpdGFibGUmJiFlKG8udGFyZ2V0KS5pcyhcIjpidXR0b24sLmstYnV0dG9uLHRleHRhcmVhXCIpJiYoZD1lKG8udGFyZ2V0KS5jbG9zZXN0KFwiW3JvbGU9Z3JpZGNlbGxdXCIpLGRbMF18fChkPXcpLHQuX2hhbmRsZUVkaXRpbmcoZCwhMSx2P28uY3VycmVudFRhcmdldDppWzBdKSxwPSEwKSl9ZWxzZSBfdC5FU0M9PWg/KHM9bXQoKSx3JiZlLmNvbnRhaW5zKHdbMF0scykmJiF3Lmhhc0NsYXNzKFwiay1lZGl0LWNlbGxcIikmJiF3LnBhcmVudCgpLmhhc0NsYXNzKFwiay1ncmlkLWVkaXQtcm93XCIpPyhudChvLmN1cnJlbnRUYXJnZXQsITApLHA9ITApOiF0Ll9lZGl0Q29udGFpbmVyfHx3JiYhdC5fZWRpdENvbnRhaW5lci5oYXMod1swXSkmJndbMF0hPT10Ll9lZGl0Q29udGFpbmVyWzBdfHwodj90LmNsb3NlQ2VsbCghMCk6KGw9ZSh3KS5wYXJlbnQoKS5pbmRleCgpLHMmJnMuYmx1cigpLHQuY2FuY2VsUm93KCksbD49MCYmdC5jdXJyZW50KGkuZmluZChcIj50Ym9keT50clwiKS5lcShsKS5jaGlsZHJlbigpLmZpbHRlcihSdCkuZmlyc3QoKSkpLHduLm1zaWUmJjk+d24udmVyc2lvbiYmZG9jdW1lbnQuYm9keS5mb2N1cygpLG50KHY/by5jdXJyZW50VGFyZ2V0OmlbMF0sITApLHA9ITApKTpfdC5UQUI9PWgmJih3PWUodyksdC5vcHRpb25zLmVkaXRhYmxlJiZ2JiYodT1lKG10KCkpLmNsb3Nlc3QoXCIuay1lZGl0LWNlbGxcIiksdVswXSYmdVswXSE9PXdbMF0mJih3PXUpKSx1PWx0KHcsby5jdXJyZW50VGFyZ2V0LGkseSxfKSwhdy5pcyhcInRoXCIpJiZ1Lmxlbmd0aCYmdC5vcHRpb25zLmVkaXRhYmxlJiZ2JiYodC5faGFuZGxlRWRpdGluZyh3LHUsdS5jbG9zZXN0KGkpKSxwPSEwKSk7cCYmKG8ucHJldmVudERlZmF1bHQoKSxvLnN0b3BQcm9wYWdhdGlvbigpKX0pKX0sX2hhbmRsZUVkaXRpbmc6ZnVuY3Rpb24obixpLHIpe3ZhciBvLGEscz10aGlzLGw9ZShtdCgpKSxjPXMuX2VkaXRNb2RlKCksZD13bi5tc2llLHU9ZCYmOT53bi52ZXJzaW9uLGg9cy5fZWRpdENvbnRhaW5lcjtpZihyPWUociksYT1cImluY2VsbFwiPT1jP24uaGFzQ2xhc3MoXCJrLWVkaXQtY2VsbFwiKTpuLnBhcmVudCgpLmhhc0NsYXNzKFwiay1ncmlkLWVkaXQtcm93XCIpLHMuZWRpdGFibGUpe2lmKGUuY29udGFpbnMoaFswXSxsWzBdKSYmKHduLm9wZXJhfHx1P2wuY2hhbmdlKCkudHJpZ2dlckhhbmRsZXIoXCJibHVyXCIpOihsLmJsdXIoKSxkJiZsLmJsdXIoKSkpLCFzLmVkaXRhYmxlKXJldHVybiBudChyKSx0O2lmKCFzLmVkaXRhYmxlLmVuZCgpKXJldHVybiBzLmN1cnJlbnQoXCJpbmNlbGxcIj09Yz9oOmguY2hpbGRyZW4oKS5maWx0ZXIoSXQpLmZpcnN0KCkpLG89aC5maW5kKFwiOmtlbmRvRm9jdXNhYmxlOmZpcnN0XCIpWzBdLG8mJm8uZm9jdXMoKSx0O1wiaW5jZWxsXCI9PWM/cy5jbG9zZUNlbGwoKToocy5zYXZlUm93KCksYT0hMCl9aSYmcy5jdXJyZW50KGkpLHUmJmRvY3VtZW50LmJvZHkuZm9jdXMoKSxudChyLCEwKSwoIWEmJiFpfHxpKSYmKFwiaW5jZWxsXCI9PWM/cy5lZGl0Q2VsbChzLmN1cnJlbnQoKSk6cy5lZGl0Um93KHMuY3VycmVudCgpLnBhcmVudCgpKSl9LF93cmFwcGVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUudGFibGUsbj1lLm9wdGlvbnMuaGVpZ2h0LGk9ZS5lbGVtZW50O2kuaXMoXCJkaXZcIil8fChpPWkud3JhcChcIjxkaXYvPlwiKS5wYXJlbnQoKSksZS53cmFwcGVyPWkuYWRkQ2xhc3MoXCJrLWdyaWQgay13aWRnZXRcIiksbiYmKGUud3JhcHBlci5jc3MoYW4sbiksdC5jc3MoYW4sXCJhdXRvXCIpKSxlLl9pbml0TW9iaWxlKCl9LF9pbml0TW9iaWxlOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLm9wdGlvbnMsaT10aGlzO3RoaXMuX2lzTW9iaWxlPW4ubW9iaWxlPT09ITAmJnV0LnN1cHBvcnQubW9iaWxlT1N8fFwicGhvbmVcIj09PW4ubW9iaWxlfHxcInRhYmxldFwiPT09bi5tb2JpbGUsdGhpcy5faXNNb2JpbGUmJih0PXRoaXMud3JhcHBlci5hZGRDbGFzcyhcImstZ3JpZC1tb2JpbGVcIikud3JhcChcIjxkaXYgZGF0YS1cIit1dC5ucysncm9sZT1cInZpZXdcIiBkYXRhLScrdXQubnMrJ2luaXQtd2lkZ2V0cz1cImZhbHNlXCI+PC9kaXY+JykucGFyZW50KCksdGhpcy5wYW5lPXV0Lm1vYmlsZS51aS5QYW5lLndyYXAodCksdGhpcy52aWV3PXRoaXMucGFuZS52aWV3KCksdGhpcy5fYWN0aW9uU2hlZXRQb3B1cE9wdGlvbnM9ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmhhc0NsYXNzKFwia20tcm9vdFwiKT97bW9kYWw6ITF9OnthbGlnbjpcImJvdHRvbSBjZW50ZXJcIixwb3NpdGlvbjpcImJvdHRvbSBjZW50ZXJcIixlZmZlY3Q6XCJzbGlkZUluOnVwXCJ9LG4uaGVpZ2h0JiZ0aGlzLnBhbmUuZWxlbWVudC5wYXJlbnQoKS5jc3MoYW4sbi5oZWlnaHQpLHRoaXMuX2VkaXRBbmltYXRpb249XCJzbGlkZVwiLHRoaXMudmlldy5iaW5kKFwic2hvd1wiLGZ1bmN0aW9uKCl7aS5faXNMb2NrZWQoKSYmKGkuX3VwZGF0ZVRhYmxlc1dpZHRoKCksaS5fYXBwbHlMb2NrZWRDb250YWluZXJzV2lkdGgoKSxpLl9zeW5jTG9ja2VkQ29udGVudEhlaWdodCgpLGkuX3N5bmNMb2NrZWRIZWFkZXJIZWlnaHQoKSxpLl9zeW5jTG9ja2VkRm9vdGVySGVpZ2h0KCkpfSkpfSxfdGJvZHk6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLnRhYmxlO3Q9aS5maW5kKFwiPnRib2R5XCIpLHQubGVuZ3RofHwodD1lKFwiPHRib2R5Lz5cIikuYXBwZW5kVG8oaSkpLG4udGJvZHk9dC5hdHRyKFwicm9sZVwiLFwicm93Z3JvdXBcIil9LF9zY3JvbGxhYmxlOmZ1bmN0aW9uKCl7dmFyIHQsbixpLHIsbz10aGlzLGE9by5vcHRpb25zLHM9YS5zY3JvbGxhYmxlLGw9cyE9PSEwJiZzLnZpcnR1YWwmJiFvLnZpcnR1YWxTY3JvbGxhYmxlLGM9IXV0LnN1cHBvcnQua2luZXRpY1Njcm9sbE5lZWRlZHx8bD91dC5zdXBwb3J0LnNjcm9sbGJhcigpOjA7cyYmKHQ9by53cmFwcGVyLmNoaWxkcmVuKFwiLmstZ3JpZC1oZWFkZXJcIiksdFswXXx8KHQ9ZSgnPGRpdiBjbGFzcz1cImstZ3JpZC1oZWFkZXJcIiAvPicpLmluc2VydEJlZm9yZShvLnRhYmxlKSksdC5jc3MoeW4/XCJwYWRkaW5nLWxlZnRcIjpcInBhZGRpbmctcmlnaHRcIixzLnZpcnR1YWw/YysxOmMpLG49ZSgnPHRhYmxlIHJvbGU9XCJncmlkXCIgLz4nKSxibiYmbi5hdHRyKFwiY2VsbHNwYWNpbmdcIiwwKSxuLmFwcGVuZChvLnRoZWFkKSx0LmVtcHR5KCkuYXBwZW5kKGUoJzxkaXYgY2xhc3M9XCJrLWdyaWQtaGVhZGVyLXdyYXBcIiAvPicpLmFwcGVuZChuKSksby5jb250ZW50PW8udGFibGUucGFyZW50KCksby5jb250ZW50LmlzKFwiLmstdmlydHVhbC1zY3JvbGxhYmxlLXdyYXAsIC5rbS1zY3JvbGwtY29udGFpbmVyXCIpJiYoby5jb250ZW50PW8uY29udGVudC5wYXJlbnQoKSksby5jb250ZW50LmlzKFwiLmstZ3JpZC1jb250ZW50LCAuay12aXJ0dWFsLXNjcm9sbGFibGUtd3JhcFwiKXx8KG8uY29udGVudD1vLnRhYmxlLndyYXAoJzxkaXYgY2xhc3M9XCJrLWdyaWQtY29udGVudFwiIC8+JykucGFyZW50KCkpLGwmJihvLnZpcnR1YWxTY3JvbGxhYmxlPW5ldyB4bihvLmNvbnRlbnQse2RhdGFTb3VyY2U6by5kYXRhU291cmNlLGl0ZW1IZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gby5fYXZlcmFnZVJvd0hlaWdodCgpfX0pKSxvLnNjcm9sbGFibGVzPXQuY2hpbGRyZW4oXCIuay1ncmlkLWhlYWRlci13cmFwXCIpLGk9by53cmFwcGVyLmZpbmQoXCIuay1ncmlkLWZvb3RlclwiKSxpLmxlbmd0aCYmKG8uc2Nyb2xsYWJsZXM9by5zY3JvbGxhYmxlcy5hZGQoaS5jaGlsZHJlbihcIi5rLWdyaWQtZm9vdGVyLXdyYXBcIikpKSxzLnZpcnR1YWw/by5jb250ZW50LmZpbmQoXCI+LmstdmlydHVhbC1zY3JvbGxhYmxlLXdyYXBcIikudW5iaW5kKFwic2Nyb2xsXCIrT3QpLmJpbmQoXCJzY3JvbGxcIitPdCxmdW5jdGlvbigpe28uc2Nyb2xsYWJsZXMuc2Nyb2xsTGVmdCh0aGlzLnNjcm9sbExlZnQpLG8ubG9ja2VkQ29udGVudCYmKG8ubG9ja2VkQ29udGVudFswXS5zY3JvbGxUb3A9dGhpcy5zY3JvbGxUb3ApfSk6KG8uY29udGVudC51bmJpbmQoXCJzY3JvbGxcIitPdCkuYmluZChcInNjcm9sbFwiK090LGZ1bmN0aW9uKCl7by5zY3JvbGxhYmxlcy5zY3JvbGxMZWZ0KHRoaXMuc2Nyb2xsTGVmdCksby5sb2NrZWRDb250ZW50JiYoby5sb2NrZWRDb250ZW50WzBdLnNjcm9sbFRvcD10aGlzLnNjcm9sbFRvcCl9KSxyPW8uY29udGVudC5kYXRhKFwia2VuZG9Ub3VjaFNjcm9sbGVyXCIpLHImJnIuZGVzdHJveSgpLHI9dXQudG91Y2hTY3JvbGxlcihvLmNvbnRlbnQpLHImJnIubW92YWJsZSYmKG8udG91Y2hTY3JvbGxlcj1yLHIubW92YWJsZS5iaW5kKFwiY2hhbmdlXCIsZnVuY3Rpb24oZSl7by5zY3JvbGxhYmxlcy5zY3JvbGxMZWZ0KC1lLnNlbmRlci54KSxvLmxvY2tlZENvbnRlbnQmJm8ubG9ja2VkQ29udGVudC5zY3JvbGxUb3AoLWUuc2VuZGVyLnkpfSksby5vbmUoS3QsZnVuY3Rpb24oZSl7ZS5zZW5kZXIud3JhcHBlci5hZGRDbGFzcyhcImstZ3JpZC1iYWNrZmFjZVwiKX0pKSkpfSxfc2V0Q29udGVudFdpZHRoOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9XCJrLWdyaWQtY29udGVudC1leHBhbmRlclwiLHI9JzxkaXYgY2xhc3M9XCInK2krJ1wiPjwvZGl2Picsbz1uLnJlc2l6YWJsZTtuLm9wdGlvbnMuc2Nyb2xsYWJsZSYmbi53cmFwcGVyLmlzKFwiOnZpc2libGVcIikmJih0PW4udGFibGUucGFyZW50KCkuY2hpbGRyZW4oXCIuXCIraSksbi5fc2V0Q29udGVudFdpZHRoSGFuZGxlcj1UdChuLl9zZXRDb250ZW50V2lkdGgsbiksbi5kYXRhU291cmNlJiZuLmRhdGFTb3VyY2UudmlldygpLmxlbmd0aD90WzBdJiYodC5yZW1vdmUoKSxvJiZvLnVuYmluZChcInJlc2l6ZVwiLG4uX3NldENvbnRlbnRXaWR0aEhhbmRsZXIpKToodFswXXx8KHQ9ZShyKS5hcHBlbmRUbyhuLnRhYmxlLnBhcmVudCgpKSxvJiZvLmJpbmQoXCJyZXNpemVcIixuLl9zZXRDb250ZW50V2lkdGhIYW5kbGVyKSksbi50aGVhZCYmdC53aWR0aChuLnRoZWFkLndpZHRoKCkpKSxuLl9hcHBseUxvY2tlZENvbnRhaW5lcnNXaWR0aCgpKX0sX2FwcGx5TG9ja2VkQ29udGFpbmVyc1dpZHRoOmZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLnNjcm9sbGFibGUmJnRoaXMubG9ja2VkSGVhZGVyKXt2YXIgZSx0PXRoaXMudGhlYWQucGFyZW50KCksbj10LnBhcmVudCgpLGk9dGhpcy53cmFwcGVyWzBdLmNsaWVudFdpZHRoLHI9dGhpcy5fZ3JvdXBzKCksbz11dC5zdXBwb3J0LnNjcm9sbGJhcigpLGE9dGhpcy5sb2NrZWRIZWFkZXIuZmluZChcIj50YWJsZT5jb2xncm91cD5jb2w6bm90KC5rLWdyb3VwLWNvbCwgLmstaGllcmFyY2h5LWNvbClcIikscz10LmZpbmQoXCI+Y29sZ3JvdXA+Y29sOm5vdCguay1ncm91cC1jb2wsIC5rLWhpZXJhcmNoeS1jb2wpXCIpLGw9RChhKSxjPUQocyk7cj4wJiYobCs9dGhpcy5sb2NrZWRIZWFkZXIuZmluZChcIi5rLWdyb3VwLWNlbGw6Zmlyc3RcIikub3V0ZXJXaWR0aCgpKnIpLGw+PWkmJihsPWktMypvKSx0aGlzLmxvY2tlZEhlYWRlci5hZGQodGhpcy5sb2NrZWRDb250ZW50KS53aWR0aChsKSxuWzBdLnN0eWxlLndpZHRoPW4ucGFyZW50KCkud2lkdGgoKS1sLTIrXCJweFwiLHQuYWRkKHRoaXMudGFibGUpLndpZHRoKGMpLHRoaXMudmlydHVhbFNjcm9sbGFibGUmJihpLT1vKSx0aGlzLmNvbnRlbnRbMF0uc3R5bGUud2lkdGg9aS1sLTIrXCJweFwiLHRoaXMubG9ja2VkRm9vdGVyJiZ0aGlzLmxvY2tlZEZvb3Rlci5sZW5ndGgmJih0aGlzLmxvY2tlZEZvb3Rlci53aWR0aChsKSxlPXRoaXMuZm9vdGVyLmZpbmQoXCIuay1ncmlkLWZvb3Rlci13cmFwXCIpLGVbMF0uc3R5bGUud2lkdGg9blswXS5jbGllbnRXaWR0aCtcInB4XCIsZS5jaGlsZHJlbigpLmZpcnN0KCkud2lkdGgoYykpfX0sX3NldENvbnRlbnRIZWlnaHQ6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10Lm9wdGlvbnMsaT10LndyYXBwZXIuaW5uZXJIZWlnaHQoKSxyPXQud3JhcHBlci5jaGlsZHJlbihcIi5rLWdyaWQtaGVhZGVyXCIpLG89dXQuc3VwcG9ydC5zY3JvbGxiYXIoKTtuLnNjcm9sbGFibGUmJnQud3JhcHBlci5pcyhcIjp2aXNpYmxlXCIpJiYoaS09ci5vdXRlckhlaWdodCgpLHQucGFnZXImJihpLT10LnBhZ2VyLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSksbi5ncm91cGFibGUmJihpLT10LndyYXBwZXIuY2hpbGRyZW4oXCIuay1ncm91cGluZy1oZWFkZXJcIikub3V0ZXJIZWlnaHQoKSksbi50b29sYmFyJiYoaS09dC53cmFwcGVyLmNoaWxkcmVuKFwiLmstZ3JpZC10b29sYmFyXCIpLm91dGVySGVpZ2h0KCkpLHQuZm9vdGVyVGVtcGxhdGUmJihpLT10LndyYXBwZXIuY2hpbGRyZW4oXCIuay1ncmlkLWZvb3RlclwiKS5vdXRlckhlaWdodCgpKSxlPWZ1bmN0aW9uKGUpe3ZhciB0LG47cmV0dXJuIGVbMF0uc3R5bGUuaGVpZ2h0PyEwOih0PWUuaGVpZ2h0KCksZS5oZWlnaHQoXCJhdXRvXCIpLG49ZS5oZWlnaHQoKSx0IT1uPyhlLmhlaWdodChcIlwiKSwhMCk6KGUuaGVpZ2h0KFwiXCIpLCExKSl9LGUodC53cmFwcGVyKSYmKGk+MipvPyh0LmxvY2tlZENvbnRlbnQmJihvPXQudGFibGVbMF0ub2Zmc2V0V2lkdGg+dC50YWJsZS5wYXJlbnQoKVswXS5jbGllbnRXaWR0aD9vOjAsdC5sb2NrZWRDb250ZW50LmhlaWdodChpLW8pKSx0LmNvbnRlbnQuaGVpZ2h0KGkpKTp0LmNvbnRlbnQuaGVpZ2h0KDIqbysxKSkpfSxfYXZlcmFnZVJvd0hlaWdodDpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQuX2l0ZW1zKHQudGJvZHkpLmxlbmd0aCxpPXQuX3Jvd0hlaWdodDtyZXR1cm4gMD09PW4/aToodC5fcm93SGVpZ2h0fHwodC5fcm93SGVpZ2h0PWk9dC50YWJsZS5vdXRlckhlaWdodCgpL24sdC5fc3VtPWksdC5fbWVhc3VyZXM9MSksZT10LnRhYmxlLm91dGVySGVpZ2h0KCkvbixpIT09ZSYmKHQuX21lYXN1cmVzKyssdC5fc3VtKz1lLHQuX3Jvd0hlaWdodD10Ll9zdW0vdC5fbWVhc3VyZXMpLGkpfSxfZGF0YVNvdXJjZTpmdW5jdGlvbigpe3ZhciBlLG49dGhpcyxpPW4ub3B0aW9ucyxyPWkuZGF0YVNvdXJjZTtyPXh0KHIpP3tkYXRhOnJ9OnIseXQocikmJih3dChyLHt0YWJsZTpuLnRhYmxlLGZpZWxkczpuLmNvbHVtbnN9KSxlPWkucGFnZWFibGUseXQoZSkmJmUucGFnZVNpemUhPT10JiYoci5wYWdlU2l6ZT1lLnBhZ2VTaXplKSksbi5kYXRhU291cmNlJiZuLl9yZWZyZXNoSGFuZGxlcj9uLmRhdGFTb3VyY2UudW5iaW5kKEd0LG4uX3JlZnJlc2hIYW5kbGVyKS51bmJpbmQoTXQsbi5fcHJvZ3Jlc3NIYW5kbGVyKS51bmJpbmQoUHQsbi5fZXJyb3JIYW5kbGVyKToobi5fcmVmcmVzaEhhbmRsZXI9VHQobi5yZWZyZXNoLG4pLG4uX3Byb2dyZXNzSGFuZGxlcj1UdChuLl9yZXF1ZXN0U3RhcnQsbiksbi5fZXJyb3JIYW5kbGVyPVR0KG4uX2Vycm9yLG4pKSxuLmRhdGFTb3VyY2U9cHQuY3JlYXRlKHIpLmJpbmQoR3Qsbi5fcmVmcmVzaEhhbmRsZXIpLmJpbmQoTXQsbi5fcHJvZ3Jlc3NIYW5kbGVyKS5iaW5kKFB0LG4uX2Vycm9ySGFuZGxlcil9LF9lcnJvcjpmdW5jdGlvbigpe3RoaXMuX3Byb2dyZXNzKCExKX0sX3JlcXVlc3RTdGFydDpmdW5jdGlvbigpe3RoaXMuX3Byb2dyZXNzKCEwKX0sX21vZGVsQ2hhbmdlOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvLGEscyxsLGMsZCx1PXRoaXMsaD11LnRib2R5LHA9dC5tb2RlbCxmPXUudGJvZHkuZmluZChcInRyW1wiK3V0LmF0dHIoXCJ1aWRcIikrXCI9XCIrcC51aWQrXCJdXCIpLGc9Zi5oYXNDbGFzcyhcImstYWx0XCIpLG09dS5faXRlbXMoaCkuaW5kZXgoZiksdj11LmxvY2tlZENvbnRlbnQ7aWYodiYmKG49dS5fcmVsYXRlZFJvdyhmKSksZi5hZGQobikuY2hpbGRyZW4oXCIuay1lZGl0LWNlbGxcIikubGVuZ3RoJiYhdS5vcHRpb25zLnJvd1RlbXBsYXRlKWYuYWRkKG4pLmNoaWxkcmVuKFwiOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKS5lYWNoKGZ1bmN0aW9uKCl7aT1lKHRoaXMpLHI9TCh1LmNvbHVtbnMpW3UuY2VsbEluZGV4KGkpXSxyLmZpZWxkPT09dC5maWVsZCYmKGkuaGFzQ2xhc3MoXCJrLWVkaXQtY2VsbFwiKT9pLmFkZENsYXNzKFwiay1kaXJ0eS1jZWxsXCIpOih1Ll9kaXNwbGF5Q2VsbChpLHIscCksZSgnPHNwYW4gY2xhc3M9XCJrLWRpcnR5XCIvPicpLnByZXBlbmRUbyhpKSkpfSk7ZWxzZSBpZighZi5oYXNDbGFzcyhcImstZ3JpZC1lZGl0LXJvd1wiKSl7Zm9yKHM9ZSgpLmFkZChmKSx2JiYobz0oZz91LmxvY2tlZEFsdFJvd1RlbXBsYXRlOnUubG9ja2VkUm93VGVtcGxhdGUpKHApLHM9cy5hZGQobiksbi5yZXBsYWNlV2l0aChvKSksbz0oZz91LmFsdFJvd1RlbXBsYXRlOnUucm93VGVtcGxhdGUpKHApLGYucmVwbGFjZVdpdGgobyksbz11Ll9pdGVtcyhoKS5lcShtKSx2JiYoZj1mLmFkZChuKSxuPXUuX3JlbGF0ZWRSb3cobylbMF0sZXQob1swXSxuKSxvPW8uYWRkKG4pKSxhPXUub3B0aW9ucy5zZWxlY3RhYmxlLGEmJmYuaGFzQ2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIpJiZ1LnNlbGVjdChvKSxjPXMuY2hpbGRyZW4oXCI6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpLGw9by5jaGlsZHJlbihcIjpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIiksbT0wLGQ9dS5jb2x1bW5zLmxlbmd0aDtkPm07bSsrKXI9dS5jb2x1bW5zW21dLGk9bC5lcShtKSxhJiZjLmVxKG0pLmhhc0NsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiKSYmaS5hZGRDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIiksci5maWVsZD09PXQuZmllbGQmJmUoJzxzcGFuIGNsYXNzPVwiay1kaXJ0eVwiLz4nKS5wcmVwZW5kVG8oaSk7dS50cmlnZ2VyKFwiaXRlbUNoYW5nZVwiLHtpdGVtOm8sZGF0YTpwLG5zOmh0fSl9fSxfcGFnZWFibGU6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLm9wdGlvbnMucGFnZWFibGU7aSYmKHQ9bi53cmFwcGVyLmNoaWxkcmVuKFwiZGl2LmstZ3JpZC1wYWdlclwiKSx0Lmxlbmd0aHx8KHQ9ZSgnPGRpdiBjbGFzcz1cImstcGFnZXItd3JhcCBrLWdyaWQtcGFnZXJcIi8+JykuYXBwZW5kVG8obi53cmFwcGVyKSksbi5wYWdlciYmbi5wYWdlci5kZXN0cm95KCksbi5wYWdlcj1cIm9iamVjdFwiPT10eXBlb2YgaSYmaSBpbnN0YW5jZW9mIHV0LnVpLlBhZ2VyP2k6bmV3IHV0LnVpLlBhZ2VyKHQsd3Qoe30saSx7ZGF0YVNvdXJjZTpuLmRhdGFTb3VyY2V9KSkpfSxfZm9vdGVyOmZ1bmN0aW9uKCl7dmFyIHQsbixpLHIsYT10aGlzLHM9YS5kYXRhU291cmNlLmFnZ3JlZ2F0ZXMoKSxsPVwiXCIsYz1hLmZvb3RlclRlbXBsYXRlLGQ9YS5vcHRpb25zLHU9YS5mb290ZXJ8fGEud3JhcHBlci5maW5kKFwiLmstZ3JpZC1mb290ZXJcIik7Yz8ocz1BdChzKT9vKGEuZGF0YVNvdXJjZS5hZ2dyZWdhdGUoKSk6cyxsPWUoYS5fd3JhcEZvb3RlcihjKHMpKSksdS5sZW5ndGg/KG49bCxhLmFuZ3VsYXIoXCJjbGVhbnVwXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6dS5nZXQoKX19KSx1LnJlcGxhY2VXaXRoKG4pLHU9YS5mb290ZXI9bik6dT1hLmZvb3Rlcj1kLnNjcm9sbGFibGU/ZC5wYWdlYWJsZT9sLmluc2VydEJlZm9yZShhLndyYXBwZXIuY2hpbGRyZW4oXCJkaXYuay1ncmlkLXBhZ2VyXCIpKTpsLmFwcGVuZFRvKGEud3JhcHBlcik6bC5pbnNlcnRCZWZvcmUoYS50Ym9keSksYS5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOnUuZmluZChcInRkXCIpLmdldCgpLGRhdGE6YnQoYS5jb2x1bW5zLGZ1bmN0aW9uKGUpe3JldHVybntjb2x1bW46ZSxhZ2dyZWdhdGU6c1tlLmZpZWxkXX19KX19KSk6dSYmIWEuZm9vdGVyJiYoYS5mb290ZXI9dSksdS5sZW5ndGgmJihkLnNjcm9sbGFibGUmJih0PXUuYXR0cihcInRhYmluZGV4XCIsLTEpLmNoaWxkcmVuKFwiLmstZ3JpZC1mb290ZXItd3JhcFwiKSxhLnNjcm9sbGFibGVzPWEuc2Nyb2xsYWJsZXMuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIWUodGhpcykuaXMoXCIuay1ncmlkLWZvb3Rlci13cmFwXCIpfSkuYWRkKHQpKSxhLl9mb290ZXJXaWR0aCYmdS5maW5kKFwidGFibGVcIikuY3NzKFwid2lkdGhcIixhLl9mb290ZXJXaWR0aCksdCYmKGk9YS5jb250ZW50LnNjcm9sbExlZnQoKSxyPWQuc2Nyb2xsYWJsZSE9PSEwJiZkLnNjcm9sbGFibGUudmlydHVhbCYmIWEudmlydHVhbFNjcm9sbGFibGUsciYmKGk9YS53cmFwcGVyLmZpbmQoXCIuay12aXJ0dWFsLXNjcm9sbGFibGUtd3JhcFwiKS5zY3JvbGxMZWZ0KCkpLHQuc2Nyb2xsTGVmdChpKSkpLGEubG9ja2VkQ29udGVudCYmKGEuX2FwcGVuZExvY2tlZENvbHVtbkZvb3RlcigpLGEuX2FwcGx5TG9ja2VkQ29udGFpbmVyc1dpZHRoKCksYS5fc3luY0xvY2tlZEZvb3RlckhlaWdodCgpKX0sX3dyYXBGb290ZXI6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPVwiXCIscj11dC5zdXBwb3J0Lm1vYmlsZU9TPzA6dXQuc3VwcG9ydC5zY3JvbGxiYXIoKTtyZXR1cm4gbi5vcHRpb25zLnNjcm9sbGFibGU/KGk9ZSgnPGRpdiBjbGFzcz1cImstZ3JpZC1mb290ZXJcIj48ZGl2IGNsYXNzPVwiay1ncmlkLWZvb3Rlci13cmFwXCI+PHRhYmxlJysoYm4/JyBjZWxsc3BhY2luZz1cIjBcIic6XCJcIikrXCI+PHRib2R5PlwiK3QrXCI8L3Rib2R5PjwvdGFibGU+PC9kaXY+PC9kaXY+XCIpLG4uX2FwcGVuZENvbHMoaS5maW5kKFwidGFibGVcIikpLGkuY3NzKHluP1wicGFkZGluZy1sZWZ0XCI6XCJwYWRkaW5nLXJpZ2h0XCIsciksaSk6Jzx0Zm9vdCBjbGFzcz1cImstZ3JpZC1mb290ZXJcIj4nK3QrXCI8L3Rmb290PlwifSxfY29sdW1uTWVudTpmdW5jdGlvbigpe3ZhciBlLG4saSxyLG8sYSxzLGwsYyxkPXRoaXMsdT1MKGQuY29sdW1ucyksaD1kLm9wdGlvbnMscD1oLmNvbHVtbk1lbnUsZj1rdChkLmNvbHVtbnMsZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29sdW1ucyE9PXR9KS5sZW5ndGg+MCxnPXRoaXMuX2lzTW9iaWxlLG09ZnVuY3Rpb24oZSl7ZC50cmlnZ2VyKGp0LHtmaWVsZDplLmZpZWxkLGNvbnRhaW5lcjplLmNvbnRhaW5lcn0pfSx2PWZ1bmN0aW9uKGUpe250KGUuY2xvc2VzdChcInRhYmxlXCIpLCEwKX0sXz1oLiRhbmd1bGFyO2lmKHApZm9yKFwiYm9vbGVhblwiPT10eXBlb2YgcCYmKHA9e30pLGE9TyhkLnRoZWFkKSxzPTAsbD1hLmxlbmd0aDtsPnM7cysrKW49dVtzXSxjPWEuZXEocyksbi5jb21tYW5kfHwhbi5maWVsZCYmIWMuYXR0cihcImRhdGEtXCIrdXQubnMrXCJmaWVsZFwiKXx8KGU9Yy5kYXRhKFwia2VuZG9Db2x1bW5NZW51XCIpLGUmJmUuZGVzdHJveSgpLHI9bi5zb3J0YWJsZSE9PSExJiZwLnNvcnRhYmxlIT09ITEmJmguc29ydGFibGUhPT0hMT93dCh7fSxoLnNvcnRhYmxlLHtjb21wYXJlOihuLnNvcnRhYmxlfHx7fSkuY29tcGFyZX0pOiExLG89aC5maWx0ZXJhYmxlJiZuLmZpbHRlcmFibGUhPT0hMSYmcC5maWx0ZXJhYmxlIT09ITE/d3Qoe3BhbmU6ZC5wYW5lfSxuLmZpbHRlcmFibGUsaC5maWx0ZXJhYmxlKTohMSxpPXtkYXRhU291cmNlOmQuZGF0YVNvdXJjZSx2YWx1ZXM6bi52YWx1ZXMsY29sdW1uczpwLmNvbHVtbnMsc29ydGFibGU6cixmaWx0ZXJhYmxlOm8sbWVzc2FnZXM6cC5tZXNzYWdlcyxvd25lcjpkLGNsb3NlQ2FsbGJhY2s6dixpbml0Om0scGFuZTpkLnBhbmUsZmlsdGVyOmc/XCI6bm90KC5rLWNvbHVtbi1hY3RpdmUpXCI6XCJcIixsb2NrZWRDb2x1bW5zOiFmJiZuLmxvY2thYmxlIT09ITEmJkkodSkubGVuZ3RoPjB9LF8mJihpLiRhbmd1bGFyPV8pLGMua2VuZG9Db2x1bW5NZW51KGkpKX0sX2hlYWRlckNlbGxzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhlYWQuZmluZChcInRoXCIpLmZpbHRlcihmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7cmV0dXJuIXQuaGFzQ2xhc3MoXCJrLWdyb3VwLWNlbGxcIikmJiF0Lmhhc0NsYXNzKFwiay1oaWVyYXJjaHktY2VsbFwiKX0pfSxfZmlsdGVyYWJsZTpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbyxhLHM9dGhpcyxsPUwocy5jb2x1bW5zKSxjPWZ1bmN0aW9uKGUpe3MudHJpZ2dlcihXdCx7ZmllbGQ6ZS5maWVsZCxjb250YWluZXI6ZS5jb250YWluZXJ9KX0sZD1mdW5jdGlvbihlKXtudChlLmNsb3Nlc3QoXCJ0YWJsZVwiKSwhMCl9LHU9cy5vcHRpb25zLmZpbHRlcmFibGU7aWYodSYmdHlwZW9mIHUubW9kZT09Y24mJi0xPT11Lm1vZGUuaW5kZXhPZihcIm1lbnVcIikmJih1PSExKSx1JiYhcy5vcHRpb25zLmNvbHVtbk1lbnUpZm9yKHQ9TyhzLnRoZWFkKSxpPTAscj10Lmxlbmd0aDtyPmk7aSsrKW49dC5lcShpKSxsW2ldLmZpbHRlcmFibGU9PT0hMXx8bFtpXS5jb21tYW5kfHwhbFtpXS5maWVsZCYmIW4uYXR0cihcImRhdGEtXCIrdXQubnMrXCJmaWVsZFwiKXx8KGU9bi5kYXRhKFwia2VuZG9GaWx0ZXJNZW51XCIpLGUmJmUuZGVzdHJveSgpLG89bFtpXS5maWx0ZXJhYmxlLGE9d3Qoe30sdSxvLHtkYXRhU291cmNlOnMuZGF0YVNvdXJjZSx2YWx1ZXM6bFtpXS52YWx1ZXMsY2xvc2VDYWxsYmFjazpkLGluaXQ6YyxwYW5lOnMucGFuZX0pLG8mJm8ubWVzc2FnZXMmJihhLm1lc3NhZ2VzPXd0KCEwLHt9LHUubWVzc2FnZXMsby5tZXNzYWdlcykpLG4ua2VuZG9GaWx0ZXJNZW51KGEpKX0sX2ZpbHRlclJvdzpmdW5jdGlvbigpe3ZhciB0LG4saSxyLG8sYSxzLGwsYyxkLHUsaCxwPXRoaXM7aWYocC5faGFzRmlsdGVyUm93KCkpZm9yKHQ9TChwLmNvbHVtbnMpLG49cC5vcHRpb25zLmZpbHRlcmFibGUsaT1wLnRoZWFkLmZpbmQoXCIuay1maWx0ZXItcm93XCIpLHRoaXMuX3VwZGF0ZUhlYWRlcih0aGlzLmRhdGFTb3VyY2UuZ3JvdXAoKS5sZW5ndGgpLHI9MDt0Lmxlbmd0aD5yO3IrKylpZihhPXRbcl0scz1wLm9wdGlvbnMuZmlsdGVyYWJsZS5vcGVyYXRvcnMsbD0hMSxjPWUoXCI8dGgvPlwiKSxkPWEuZmllbGQsYS5oaWRkZW4mJmMuaGlkZSgpLGkuYXBwZW5kKGMpLGQmJmEuZmlsdGVyYWJsZSE9PSExKXtpZih1PWEuZmlsdGVyYWJsZSYmYS5maWx0ZXJhYmxlLmNlbGx8fHt9LG89cC5vcHRpb25zLmRhdGFTb3VyY2UsbyBpbnN0YW5jZW9mIHB0JiYobz1wLm9wdGlvbnMuZGF0YVNvdXJjZS5vcHRpb25zKSxoPXd0KCEwLHt9LG4ubWVzc2FnZXMpLGEuZmlsdGVyYWJsZSYmd3QoITAsaCxhLmZpbHRlcmFibGUubWVzc2FnZXMpLHUuZW5hYmxlZD09PSExKXtjLmh0bWwoXCImbmJzcDtcIik7Y29udGludWV9dS5kYXRhU291cmNlJiYobz11LmRhdGFTb3VyY2UsbD0hMCksYS5maWx0ZXJhYmxlJiZhLmZpbHRlcmFibGUub3BlcmF0b3JzJiYocz1hLmZpbHRlcmFibGUub3BlcmF0b3JzKSxlKFwiPHNwYW4vPlwiKS5hdHRyKHV0LmF0dHIoXCJmaWVsZFwiKSxkKS5rZW5kb0ZpbHRlckNlbGwoe2RhdGFTb3VyY2U6cC5kYXRhU291cmNlLHN1Z2dlc3REYXRhU291cmNlOm8sY3VzdG9tRGF0YVNvdXJjZTpsLGZpZWxkOmQsbWVzc2FnZXM6aCx2YWx1ZXM6YS52YWx1ZXMsdGVtcGxhdGU6dS50ZW1wbGF0ZSxkZWxheTp1LmRlbGF5LGlucHV0V2lkdGg6dS5pbnB1dFdpZHRoLHN1Z2dlc3Rpb25PcGVyYXRvcjp1LnN1Z2dlc3Rpb25PcGVyYXRvcixtaW5MZW5ndGg6dS5taW5MZW5ndGgsZGF0YVRleHRGaWVsZDp1LmRhdGFUZXh0RmllbGQsb3BlcmF0b3I6dS5vcGVyYXRvcixvcGVyYXRvcnM6cyxzaG93T3BlcmF0b3JzOnUuc2hvd09wZXJhdG9yc30pLmFwcGVuZFRvKGMpfWVsc2UgYy5odG1sKFwiJm5ic3A7XCIpfSxfc29ydGFibGU6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLG8sYT10aGlzLHM9TChhLmNvbHVtbnMpLGw9YS5vcHRpb25zLnNvcnRhYmxlO2lmKGwpe2ZvcihpPU8oYS50aGVhZCkscj0wLG89aS5sZW5ndGg7bz5yO3IrKyllPXNbcl0sZS5zb3J0YWJsZSE9PSExJiYhZS5jb21tYW5kJiZlLmZpZWxkJiYobj1pLmVxKHIpLHQ9bi5kYXRhKFwia2VuZG9Db2x1bW5Tb3J0ZXJcIiksdCYmdC5kZXN0cm95KCksbi5hdHRyKFwiZGF0YS1cIit1dC5ucytcImZpZWxkXCIsZS5maWVsZCkua2VuZG9Db2x1bW5Tb3J0ZXIod3Qoe30sbCxlLnNvcnRhYmxlLHtkYXRhU291cmNlOmEuZGF0YVNvdXJjZSxhcmlhOiEwLGZpbHRlcjpcIjpub3QoLmstY29sdW1uLWFjdGl2ZSlcIn0pKSk7aT1udWxsfX0sX2NvbHVtbnM6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG89dGhpcyxhPW8udGFibGUscz1hLmZpbmQoXCJjb2xcIiksbD1vLm9wdGlvbnMuZGF0YVNvdXJjZTtpZih0PXQubGVuZ3RoP3Q6YnQoYS5maW5kKFwidGhcIiksZnVuY3Rpb24odCxuKXt0PWUodCk7dmFyIGk9dC5hdHRyKHV0LmF0dHIoXCJzb3J0YWJsZVwiKSkscj10LmF0dHIodXQuYXR0cihcImZpbHRlcmFibGVcIikpLG89dC5hdHRyKHV0LmF0dHIoXCJ0eXBlXCIpKSxhPXQuYXR0cih1dC5hdHRyKFwiZ3JvdXBhYmxlXCIpKSxsPXQuYXR0cih1dC5hdHRyKFwiZmllbGRcIikpLGM9dC5hdHRyKHV0LmF0dHIoXCJtZW51XCIpKTtyZXR1cm4gbHx8KGw9dC50ZXh0KCkucmVwbGFjZSgvXFxzfFteQS16MC05XS9nLFwiXCIpKSx7ZmllbGQ6bCx0eXBlOm8sc29ydGFibGU6XCJmYWxzZVwiIT09aSxmaWx0ZXJhYmxlOlwiZmFsc2VcIiE9PXIsZ3JvdXBhYmxlOlwiZmFsc2VcIiE9PWEsbWVudTpjLHRlbXBsYXRlOnQuYXR0cih1dC5hdHRyKFwidGVtcGxhdGVcIikpLHdpZHRoOnMuZXEobikuY3NzKFwid2lkdGhcIil9fSksbj0hKG8udGFibGUuZmluZChcInRib2R5IHRyXCIpLmxlbmd0aD4wJiYoIWx8fCFsLnRyYW5zcG9ydCkpLG8ub3B0aW9ucy5zY3JvbGxhYmxlKXtpZihyPXQsaT1JKHQpLHQ9eih0KSxpLmxlbmd0aD4wJiYwPT09dC5sZW5ndGgpdGhyb3cgRXJyb3IoXCJUaGVyZSBzaG91bGQgYmUgYXQgbGVhc3Qgb25lIG5vbiBsb2NrZWQgY29sdW1uc1wiKTtHKG8uZWxlbWVudC5maW5kKFwidHI6aGFzKHRoKTpmaXJzdFwiKS5maW5kKFwidGg6bm90KC5rLWdyb3VwLWNlbGwpXCIpLHIpLHQ9aS5jb25jYXQodCl9by5jb2x1bW5zPWModCxuKX0sX2dyb3VwczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZGF0YVNvdXJjZS5ncm91cCgpO3JldHVybiBlP2UubGVuZ3RoOjB9LF90bXBsOmZ1bmN0aW9uKGUsdCxyLG8pe3ZhciBhLHMsbCxjLGQ9dGhpcyx1PXd0KHt9LHV0LlRlbXBsYXRlLGQub3B0aW9ucy50ZW1wbGF0ZVNldHRpbmdzKSxoPXQubGVuZ3RoLHA9e3N0b3JhZ2U6e30sY291bnQ6MH0sZj1kLl9oYXNEZXRhaWxzKCksZz1bXSxtPWQuX2dyb3VwcygpO2lmKCFlKXtmb3IoZT1cIjx0clwiLHImJmcucHVzaChcImstYWx0XCIpLGYmJmcucHVzaChcImstbWFzdGVyLXJvd1wiKSxnLmxlbmd0aCYmKGUrPScgY2xhc3M9XCInK2cuam9pbihcIiBcIikrJ1wiJyksaCYmKGUrPVwiIFwiK3V0LmF0dHIoXCJ1aWRcIikrJz1cIiM9Jyt1dC5leHByKFwidWlkXCIsdS5wYXJhbU5hbWUpKycjXCInKSxlKz1cIiByb2xlPSdyb3cnPlwiLG0+MCYmIW8mJihlKz1uKG0pKSxmJiYoZSs9Jzx0ZCBjbGFzcz1cImstaGllcmFyY2h5LWNlbGxcIj48YSBjbGFzcz1cImstaWNvbiBrLXBsdXNcIiBocmVmPVwiXFxcXCNcIiB0YWJpbmRleD1cIi0xXCI+PC9hPjwvdGQ+JyksYT0wO2g+YTthKyspbD10W2FdLHM9bC50ZW1wbGF0ZSxjPXR5cGVvZiBzLGUrPVwiPHRkXCIraShsLmF0dHJpYnV0ZXMpK1wiIHJvbGU9J2dyaWRjZWxsJz5cIixlKz1kLl9jZWxsVG1wbChsLHApLGUrPVwiPC90ZD5cIjtlKz1cIjwvdHI+XCJ9cmV0dXJuIGU9dXQudGVtcGxhdGUoZSx1KSxwLmNvdW50PjA/VHQoZSxwLnN0b3JhZ2UpOmV9LF9oZWFkZXJDZWxsVGV4dDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49d3Qoe30sdXQuVGVtcGxhdGUsdC5vcHRpb25zLnRlbXBsYXRlU2V0dGluZ3MpLGk9ZS5oZWFkZXJUZW1wbGF0ZSxyPXR5cGVvZiBpLG89ZS50aXRsZXx8ZS5maWVsZHx8XCJcIjtyZXR1cm4gcj09PWxuP289dXQudGVtcGxhdGUoaSxuKSh7fSk6cj09PWNuJiYobz1pKSxvfSxfY2VsbFRtcGw6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcyxvPXd0KHt9LHV0LlRlbXBsYXRlLHIub3B0aW9ucy50ZW1wbGF0ZVNldHRpbmdzKSxhPWUudGVtcGxhdGUscz1vLnBhcmFtTmFtZSxsPWUuZmllbGQsYz1cIlwiLGQ9ZS5mb3JtYXQsdT10eXBlb2YgYSxoPWUudmFsdWVzO2lmKGUuY29tbWFuZCl7aWYoeHQoZS5jb21tYW5kKSl7Zm9yKG49MCxpPWUuY29tbWFuZC5sZW5ndGg7aT5uO24rKyljKz1yLl9jcmVhdGVCdXR0b24oZS5jb21tYW5kW25dKTtyZXR1cm4gYy5yZXBsYWNlKGZuLFwiXFxcXCNcIil9cmV0dXJuIHIuX2NyZWF0ZUJ1dHRvbihlLmNvbW1hbmQpLnJlcGxhY2UoZm4sXCJcXFxcI1wiKX1yZXR1cm4gdT09PWxuPyh0LnN0b3JhZ2VbXCJ0bXBsXCIrdC5jb3VudF09YSxjKz1cIiM9dGhpcy50bXBsXCIrdC5jb3VudCtcIihcIitzK1wiKSNcIix0LmNvdW50KyspOnU9PT1jbj9jKz1hOmgmJmgubGVuZ3RoJiZ5dChoWzBdKSYmXCJ2YWx1ZVwiaW4gaFswXSYmbD8oYys9XCIjdmFyIHYgPVwiK3V0LnN0cmluZ2lmeShxKGgpKS5yZXBsYWNlKGZuLFwiXFxcXCNcIikrXCIjXCIsYys9XCIjdmFyIGYgPSB2W1wiLG8udXNlV2l0aEJsb2NrfHwoYys9cytcIi5cIiksYys9bCtcIl0jXCIsYys9XCIke2YgIT0gbnVsbCA/IGYgOiAnJ31cIik6KGMrPWUuZW5jb2RlZD9cIiM6XCI6XCIjPVwiLGQmJihjKz0na2VuZG8uZm9ybWF0KFwiJytkLnJlcGxhY2UocG4sXCJcXFxcJDFcIikrJ1wiLCcpLGw/KGw9dXQuZXhwcihsLHMpLGMrPWwrXCI9PW51bGw/Jyc6XCIrbCk6Yys9XCInJ1wiLGQmJihjKz1cIilcIiksYys9XCIjXCIpLGN9LF90ZW1wbGF0ZXM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLGk9dC5kYXRhU291cmNlLHI9aS5ncm91cCgpLG89dC5mb290ZXJ8fHQud3JhcHBlci5maW5kKFwiLmstZ3JpZC1mb290ZXJcIiksYT1pLmFnZ3JlZ2F0ZSgpLHM9TCh0LmNvbHVtbnMpLGw9TChJKHQuY29sdW1ucykpLGM9bi5zY3JvbGxhYmxlP0woeih0LmNvbHVtbnMpKTpzO2lmKG4uc2Nyb2xsYWJsZSYmbC5sZW5ndGgpe2lmKG4ucm93VGVtcGxhdGV8fG4uYWx0Um93VGVtcGxhdGUpdGhyb3cgRXJyb3IoXCJIYXZpbmcgYm90aCByb3cgdGVtcGxhdGUgYW5kIGxvY2tlZCBjb2x1bW5zIGlzIG5vdCBzdXBwb3J0ZWRcIik7dC5yb3dUZW1wbGF0ZT10Ll90bXBsKG4ucm93VGVtcGxhdGUsYywhMSwhMCksdC5hbHRSb3dUZW1wbGF0ZT10Ll90bXBsKG4uYWx0Um93VGVtcGxhdGV8fG4ucm93VGVtcGxhdGUsYywhMCwhMCksdC5sb2NrZWRSb3dUZW1wbGF0ZT10Ll90bXBsKG4ucm93VGVtcGxhdGUsbCksdC5sb2NrZWRBbHRSb3dUZW1wbGF0ZT10Ll90bXBsKG4uYWx0Um93VGVtcGxhdGV8fG4ucm93VGVtcGxhdGUsbCwhMCl9ZWxzZSB0LnJvd1RlbXBsYXRlPXQuX3RtcGwobi5yb3dUZW1wbGF0ZSxjKSx0LmFsdFJvd1RlbXBsYXRlPXQuX3RtcGwobi5hbHRSb3dUZW1wbGF0ZXx8bi5yb3dUZW1wbGF0ZSxjLCEwKTtcclxudC5faGFzRGV0YWlscygpJiYodC5kZXRhaWxUZW1wbGF0ZT10Ll9kZXRhaWxUbXBsKG4uZGV0YWlsVGVtcGxhdGV8fFwiXCIpKSwodC5fZ3JvdXAmJiFBdChhKXx8IUF0KGEpJiYhby5sZW5ndGh8fGt0KHMsZnVuY3Rpb24oZSl7cmV0dXJuIGUuZm9vdGVyVGVtcGxhdGV9KS5sZW5ndGgpJiYodC5mb290ZXJUZW1wbGF0ZT10Ll9mb290ZXJUbXBsKHMsYSxcImZvb3RlclRlbXBsYXRlXCIsXCJrLWZvb3Rlci10ZW1wbGF0ZVwiKSksciYma3QocyxmdW5jdGlvbihlKXtyZXR1cm4gZS5ncm91cEZvb3RlclRlbXBsYXRlfSkubGVuZ3RoJiYoYT1lLm1hcChyLGZ1bmN0aW9uKGUpe3JldHVybiBlLmFnZ3JlZ2F0ZXN9KSx0Lmdyb3VwRm9vdGVyVGVtcGxhdGU9dC5fZm9vdGVyVG1wbChjLGEsXCJncm91cEZvb3RlclRlbXBsYXRlXCIsXCJrLWdyb3VwLWZvb3RlclwiLGwubGVuZ3RoKSxuLnNjcm9sbGFibGUmJmwubGVuZ3RoJiYodC5sb2NrZWRHcm91cEZvb3RlclRlbXBsYXRlPXQuX2Zvb3RlclRtcGwobCxhLFwiZ3JvdXBGb290ZXJUZW1wbGF0ZVwiLFwiay1ncm91cC1mb290ZXJcIikpKX0sX2Zvb3RlclRtcGw6ZnVuY3Rpb24oZSx0LHIsYSxzKXt2YXIgbCxjLGQsdSxoLHA9dGhpcyxmPXd0KHt9LHV0LlRlbXBsYXRlLHAub3B0aW9ucy50ZW1wbGF0ZVNldHRpbmdzKSxnPWYucGFyYW1OYW1lLG09XCJcIix2PXt9LF89MCx5PXt9LHc9cC5fZ3JvdXBzKCksYj1vKHQpO2ZvcihtKz0nPHRyIGNsYXNzPVwiJythKydcIj4nLHc+MCYmIXMmJihtKz1uKHcpKSxwLl9oYXNEZXRhaWxzKCkmJihtKz0nPHRkIGNsYXNzPVwiay1oaWVyYXJjaHktY2VsbFwiPiZuYnNwOzwvdGQ+JyksbD0wLGM9ZS5sZW5ndGg7Yz5sO2wrKyloPWVbbF0sZD1oW3JdLHU9dHlwZW9mIGQsbSs9XCI8dGRcIitpKGguZm9vdGVyQXR0cmlidXRlcykrXCI+XCIsZD8odSE9PWxuJiYoeT1iW2guZmllbGRdP3d0KHt9LGYse3BhcmFtTmFtZTpnK1wiWydcIitoLmZpZWxkK1wiJ11cIn0pOnt9LGQ9dXQudGVtcGxhdGUoZCx5KSksdltcInRtcGxcIitfXT1kLG0rPVwiIz10aGlzLnRtcGxcIitfK1wiKFwiK2crXCIpI1wiLF8rKyk6bSs9XCImbmJzcDtcIixtKz1cIjwvdGQ+XCI7cmV0dXJuIG0rPVwiPC90cj5cIixtPXV0LnRlbXBsYXRlKG0sZiksXz4wP1R0KG0sdik6bX0sX2RldGFpbFRtcGw6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxpPVwiXCIscj13dCh7fSx1dC5UZW1wbGF0ZSx0Lm9wdGlvbnMudGVtcGxhdGVTZXR0aW5ncyksbz1yLnBhcmFtTmFtZSxhPXt9LHM9MCxsPXQuX2dyb3VwcygpLGM9ZihMKHQuY29sdW1ucykpLmxlbmd0aCxkPXR5cGVvZiBlO3JldHVybiBpKz0nPHRyIGNsYXNzPVwiay1kZXRhaWwtcm93XCI+JyxsPjAmJihpKz1uKGwpKSxpKz0nPHRkIGNsYXNzPVwiay1oaWVyYXJjaHktY2VsbFwiPjwvdGQ+PHRkIGNsYXNzPVwiay1kZXRhaWwtY2VsbFwiJysoYz8nIGNvbHNwYW49XCInK2MrJ1wiJzpcIlwiKStcIj5cIixkPT09bG4/KGFbXCJ0bXBsXCIrc109ZSxpKz1cIiM9dGhpcy50bXBsXCIrcytcIihcIitvK1wiKSNcIixzKyspOmkrPWUsaSs9XCI8L3RkPjwvdHI+XCIsaT11dC50ZW1wbGF0ZShpLHIpLHM+MD9UdChpLGEpOml9LF9oYXNEZXRhaWxzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbnVsbCE9PWUub3B0aW9ucy5kZXRhaWxUZW1wbGF0ZXx8KGUuX2V2ZW50c1tVdF18fFtdKS5sZW5ndGh9LF9oYXNGaWx0ZXJSb3c6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuZmlsdGVyYWJsZSxuPXQmJnR5cGVvZiB0Lm1vZGU9PWNuJiYtMSE9dC5tb2RlLmluZGV4T2YoXCJyb3dcIiksaT10aGlzLmNvbHVtbnMscj1lLmdyZXAoaSxmdW5jdGlvbihlKXtyZXR1cm4gZS5maWx0ZXJhYmxlPT09ITF9KTtyZXR1cm4gaS5sZW5ndGgmJnIubGVuZ3RoPT1pLmxlbmd0aCYmKG49ITEpLG59LF9kZXRhaWxzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0Lm9wdGlvbnMuc2Nyb2xsYWJsZSYmdC5faGFzRGV0YWlscygpJiZJKHQuY29sdW1ucykubGVuZ3RoKXRocm93IEVycm9yKFwiSGF2aW5nIGJvdGggZGV0YWlsIHRlbXBsYXRlIGFuZCBsb2NrZWQgY29sdW1ucyBpcyBub3Qgc3VwcG9ydGVkXCIpO3QudGFibGUub24ob24rT3QsXCIuay1oaWVyYXJjaHktY2VsbCAuay1wbHVzLCAuay1oaWVyYXJjaHktY2VsbCAuay1taW51c1wiLGZ1bmN0aW9uKG4pe3ZhciBpLHIsbz1lKHRoaXMpLGE9by5oYXNDbGFzcyhcImstcGx1c1wiKSxzPW8uY2xvc2VzdChcInRyLmstbWFzdGVyLXJvd1wiKSxsPXQuZGV0YWlsVGVtcGxhdGUsYz10Ll9oYXNEZXRhaWxzKCk7cmV0dXJuIG8udG9nZ2xlQ2xhc3MoXCJrLXBsdXNcIiwhYSkudG9nZ2xlQ2xhc3MoXCJrLW1pbnVzXCIsYSksaT1zLm5leHQoKSxjJiYhaS5oYXNDbGFzcyhcImstZGV0YWlsLXJvd1wiKSYmKHI9dC5kYXRhSXRlbShzKSxpPWUobChyKSkuYWRkQ2xhc3Mocy5oYXNDbGFzcyhcImstYWx0XCIpP1wiay1hbHRcIjpcIlwiKS5pbnNlcnRBZnRlcihzKSx0LmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6aS5nZXQoKSxkYXRhOlt7ZGF0YUl0ZW06cn1dfX0pLHQudHJpZ2dlcihVdCx7bWFzdGVyUm93OnMsZGV0YWlsUm93OmksZGF0YTpyLGRldGFpbENlbGw6aS5maW5kKFwiLmstZGV0YWlsLWNlbGxcIil9KSksdC50cmlnZ2VyKGE/UXQ6WHQse21hc3RlclJvdzpzLGRldGFpbFJvdzppfSksaS50b2dnbGUoYSksdC5fY3VycmVudCYmdC5fY3VycmVudC5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLGEpLG4ucHJldmVudERlZmF1bHQoKSwhMX0pfSxkYXRhSXRlbTpmdW5jdGlvbih0KXtpZih0PWUodClbMF0sIXQpcmV0dXJuIG51bGw7dmFyIG4saSxyPXRoaXMudGJvZHkuY2hpbGRyZW4oKSxvPS9rLWdyb3VwaW5nLXJvd3xrLWRldGFpbC1yb3d8ay1ncm91cC1mb290ZXIvLGE9dC5zZWN0aW9uUm93SW5kZXg7Zm9yKGk9YSxuPTA7YT5uO24rKylvLnRlc3QocltuXS5jbGFzc05hbWUpJiZpLS07cmV0dXJuIHRoaXMuX2RhdGFbaV19LGV4cGFuZFJvdzpmdW5jdGlvbih0KXtlKHQpLmZpbmQoXCI+IHRkIC5rLXBsdXMsID4gdGQgLmstaS1leHBhbmRcIikuY2xpY2soKX0sY29sbGFwc2VSb3c6ZnVuY3Rpb24odCl7ZSh0KS5maW5kKFwiPiB0ZCAuay1taW51cywgPiB0ZCAuay1pLWNvbGxhcHNlXCIpLmNsaWNrKCl9LF9jcmVhdGVIZWFkZXJDZWxsczpmdW5jdGlvbihlLG4pe3ZhciByLG8sYSxzLGwsYz10aGlzLGQ9XCJcIix1PUwoYy5jb2x1bW5zKTtmb3Iocj0wLHM9ZS5sZW5ndGg7cz5yO3IrKylvPWVbcl0uY29sdW1ufHxlW3JdLGE9Yy5faGVhZGVyQ2VsbFRleHQobyksbD1DdChvLHUpLG8uY29tbWFuZD8oZCs9XCI8dGhcIitpKG8uaGVhZGVyQXR0cmlidXRlcyksbiYmIWVbcl0uY29sU3BhbiYmKGQrPVwiIHJvd3NwYW49J1wiK24rXCInXCIpLGw+LTEmJihkKz11dC5hdHRyKFwiaW5kZXhcIikrXCI9J1wiK2wrXCInXCIpLGQrPVwiPlwiK2ErXCI8L3RoPlwiKTooZCs9XCI8dGggcm9sZT0nY29sdW1uaGVhZGVyJyBcIit1dC5hdHRyKFwiZmllbGRcIikrXCI9J1wiKyhvLmZpZWxkfHxcIlwiKStcIicgXCIsbiYmIWVbcl0uY29sU3BhbiYmKGQrPVwiIHJvd3NwYW49J1wiK24rXCInXCIpLGVbcl0uY29sU3Bhbj4xJiYoZCs9J2NvbHNwYW49XCInKyhlW3JdLmNvbFNwYW4tVChvLmNvbHVtbnMpKSsnXCIgJyxkKz11dC5hdHRyKFwiY29sc3BhblwiKStcIj0nXCIrZVtyXS5jb2xTcGFuK1wiJ1wiKSxvLnRpdGxlJiYoZCs9dXQuYXR0cihcInRpdGxlXCIpKyc9XCInK28udGl0bGUucmVwbGFjZSgvJy9nLFwiJ1wiKSsnXCIgJyksby5ncm91cGFibGUhPT10JiYoZCs9dXQuYXR0cihcImdyb3VwYWJsZVwiKStcIj0nXCIrby5ncm91cGFibGUrXCInIFwiKSxvLmFnZ3JlZ2F0ZXMmJm8uYWdncmVnYXRlcy5sZW5ndGgmJihkKz11dC5hdHRyKFwiYWdncmVnYXRlc1wiKStcIj0nXCIrby5hZ2dyZWdhdGVzK1wiJ1wiKSxsPi0xJiYoZCs9dXQuYXR0cihcImluZGV4XCIpK1wiPSdcIitsK1wiJ1wiKSxkKz1pKG8uaGVhZGVyQXR0cmlidXRlcyksZCs9XCI+XCIrYStcIjwvdGg+XCIpO3JldHVybiBkfSxfYXBwZW5kTG9ja2VkQ29sdW1uQ29udGVudDpmdW5jdGlvbigpe3ZhciB0LG4saSxyLG8sYT10aGlzLmNvbHVtbnMscz10aGlzLnRhYmxlLmZpbmQoXCJjb2xncm91cFwiKSxsPXMuZmluZChcImNvbDpub3QoLmstZ3JvdXAtY29sLC5rLWhpZXJhcmNoeS1jb2wpXCIpLGM9ZSgpLGQ9MCx1PTA7Zm9yKHQ9MCxuPWEubGVuZ3RoO24+dDt0KyspaWYoYVt0XS5sb2NrZWQpaWYocChhW3RdKSl7Zm9yKHI9MSxhW3RdLmNvbHVtbnMmJihyPUwoYVt0XS5jb2x1bW5zKS5sZW5ndGgtVChhW3RdLmNvbHVtbnMpKSxyPXJ8fDEsbz0wO3I+bztvKyspYz1jLmFkZChsLmVxKHQrdStvLWQpKTt1Kz1yLTF9ZWxzZSBkKys7aT1lKCc8ZGl2IGNsYXNzPVwiay1ncmlkLWNvbnRlbnQtbG9ja2VkXCI+PHRhYmxlJysoYm4/JyBjZWxsc3BhY2luZz1cIjBcIic6XCJcIikrXCI+PGNvbGdyb3VwLz48dGJvZHk+PC90Ym9keT48L3RhYmxlPjwvZGl2PlwiKSxzLmRldGFjaCgpLGkuZmluZChcImNvbGdyb3VwXCIpLmFwcGVuZChjKSxzLmluc2VydEJlZm9yZSh0aGlzLnRhYmxlLmZpbmQoXCJ0Ym9keVwiKSksdGhpcy5sb2NrZWRDb250ZW50PWkuaW5zZXJ0QmVmb3JlKHRoaXMuY29udGVudCksdGhpcy5sb2NrZWRUYWJsZT1pLmNoaWxkcmVuKFwidGFibGVcIil9LF9hcHBlbmRMb2NrZWRDb2x1bW5Gb290ZXI6ZnVuY3Rpb24oKXt2YXIgdCxuLGk9dGhpcyxyPWkuZm9vdGVyLG89ci5maW5kKFwiLmstZm9vdGVyLXRlbXBsYXRlPnRkXCIpLGE9ci5maW5kKFwiLmstZ3JpZC1mb290ZXItd3JhcD50YWJsZT5jb2xncm91cD5jb2xcIikscz1lKCc8ZGl2IGNsYXNzPVwiay1ncmlkLWZvb3Rlci1sb2NrZWRcIj48dGFibGU+PGNvbGdyb3VwIC8+PHRib2R5Pjx0ciBjbGFzcz1cImstZm9vdGVyLXRlbXBsYXRlXCI+PC90cj48L3Rib2R5PjwvdGFibGU+PC9kaXY+JyksbD1pLl9ncm91cHMoKSxjPWUoKSxkPWUoKTtmb3IoYz1jLmFkZChvLmZpbHRlcihcIi5rLWdyb3VwLWNlbGxcIikpLHQ9MCxuPUwoSShpLmNvbHVtbnMpKS5sZW5ndGg7bj50O3QrKyljPWMuYWRkKG8uZXEodCtsKSk7Zm9yKGQ9ZC5hZGQoYS5maWx0ZXIoXCIuay1ncm91cC1jb2xcIikpLHQ9MCxuPUwoUihpLmNvbHVtbnMpKS5sZW5ndGg7bj50O3QrKylkPWQuYWRkKGEuZXEodCtsKSk7Yy5hcHBlbmRUbyhzLmZpbmQoXCJ0clwiKSksZC5hcHBlbmRUbyhzLmZpbmQoXCJjb2xncm91cFwiKSksaS5sb2NrZWRGb290ZXI9cy5wcmVwZW5kVG8ocil9LF9hcHBlbmRMb2NrZWRDb2x1bW5IZWFkZXI6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG8sYSxzLGwsYyxkLHUsaCxmPXRoaXMsbT10aGlzLmNvbHVtbnMsdj1bXSxfPTAseT1lKCksdz1mLl9oYXNGaWx0ZXJSb3coKSxiPTAsaz1lKCkseD0wLEM9ZSgpLFM9Zi50aGVhZC5wcmV2KCkuZmluZChcImNvbDpub3QoLmstZ3JvdXAtY29sLC5rLWhpZXJhcmNoeS1jb2wpXCIpLEQ9Zi50aGVhZC5maW5kKFwidHI6Zmlyc3QgLmstaGVhZGVyOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKSxFPWYudGhlYWQuZmluZChcIi5rLWZpbHRlci1yb3dcIikuZmluZChcInRoOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKSxJPTA7Zm9yKG49MCxyPW0ubGVuZ3RoO3I+bjtuKyspe2lmKG1bbl0ubG9ja2VkKXtpZihsPUQuZXEobikseD1MKG1bbl0uY29sdW1uc3x8W10pLmxlbmd0aCxwKG1bbl0pKXtmb3IobVtuXS5jb2x1bW5zJiYoYz14LVQobVtuXS5jb2x1bW5zKSksYz1jfHwxLGQ9MDtjPmQ7ZCsrKXk9eS5hZGQoUy5lcShuK0krZC1fKSk7SSs9Yy0xfWZvcihQKFttW25dXSxOKGwpLHYsMCwwKSx4PXh8fDEsdT0wO3g+dTt1Kyspaz1rLmFkZChFLmVxKGIrdSkpO2IrPXh9bVtuXS5jb2x1bW5zJiYoXys9VChtW25dLmNvbHVtbnMpKSxwKG1bbl0pfHxfKyt9aWYodi5sZW5ndGgpe2ZvcihpPSc8ZGl2IGNsYXNzPVwiay1ncmlkLWhlYWRlci1sb2NrZWRcIiBzdHlsZT1cIndpZHRoOjFweFwiPjx0YWJsZScrKGJuPycgY2VsbHNwYWNpbmc9XCIwXCInOlwiXCIpK1wiPjxjb2xncm91cC8+PHRoZWFkPlwiLGkrPUFycmF5KHYubGVuZ3RoKzEpLmpvaW4oXCI8dHI+PC90cj5cIiksaSs9KHc/Jzx0ciBjbGFzcz1cImstZmlsdGVyLXJvd1wiIC8+JzpcIlwiKStcIjwvdGhlYWQ+PC90YWJsZT48L2Rpdj5cIixzPWUoaSksUz1zLmZpbmQoXCJjb2xncm91cFwiKSxTLmFwcGVuZChmLnRoZWFkLnByZXYoKS5maW5kKFwiY29sLmstZ3JvdXAtY29sXCIpLmFkZCh5KSksbz1zLmZpbmQoXCJ0aGVhZCB0cjpub3QoLmstZmlsdGVyLXJvdylcIiksbj0wLHI9di5sZW5ndGg7cj5uO24rKylDPWcodltuXSksby5lcShuKS5hcHBlbmQoZi50aGVhZC5maW5kKFwidHI6ZXEoXCIrbitcIikgLmstZ3JvdXAtY2VsbFwiKS5hZGQoQykpO2g9TSh0aGlzLnRoZWFkKSxoPnYubGVuZ3RoJiZBKHMsaCksYT1zLmZpbmQoXCIuay1maWx0ZXItcm93XCIpLGEuYXBwZW5kKGYudGhlYWQuZmluZChcIi5rLWZpbHRlci1yb3cgLmstZ3JvdXAtY2VsbFwiKS5hZGQoaykpLHRoaXMubG9ja2VkSGVhZGVyPXMucHJlcGVuZFRvKHQpLHRoaXMuX3N5bmNMb2NrZWRIZWFkZXJIZWlnaHQoKX19LF9yZW1vdmVMb2NrZWRDb250YWluZXJzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sb2NrZWRIZWFkZXIuYWRkKHRoaXMubG9ja2VkQ29udGVudCkuYWRkKHRoaXMubG9ja2VkRm9vdGVyKTt1dC5kZXN0cm95KGUpLGUub2ZmKE90KS5yZW1vdmUoKSx0aGlzLmxvY2tlZEhlYWRlcj10aGlzLmxvY2tlZENvbnRlbnQ9dGhpcy5sb2NrZWRGb290ZXI9bnVsbCx0aGlzLnNlbGVjdGFibGU9bnVsbH0sX3RoZWFkOmZ1bmN0aW9uKCl7dmFyIHQsbixpLHIsbz10aGlzLGE9by5jb2x1bW5zLHM9by5faGFzRGV0YWlscygpJiZhLmxlbmd0aCxsPW8uX2hhc0ZpbHRlclJvdygpLGM9XCJcIixkPW8udGFibGUuZmluZChcIj50aGVhZFwiKSx1PW8uZWxlbWVudC5maW5kKFwidGhlYWQ6Zmlyc3RcIikubGVuZ3RoPjA7aWYoZC5sZW5ndGh8fChkPWUoXCI8dGhlYWQvPlwiKS5pbnNlcnRCZWZvcmUoby50Ym9keSkpLG8ubG9ja2VkSGVhZGVyJiZvLnRoZWFkPyhuPW8udGhlYWQuZmluZChcInRyOmhhcyh0aCk6bm90KC5rLWZpbHRlci1yb3cpXCIpLmh0bWwoXCJcIiksby5fcmVtb3ZlTG9ja2VkQ29udGFpbmVycygpKTpuPW8uZWxlbWVudC5maW5kKHU/XCJ0aGVhZDpmaXJzdCB0cjpoYXModGgpOm5vdCguay1maWx0ZXItcm93KVwiOlwidHI6aGFzKHRoKTpmaXJzdFwiKSwhbi5sZW5ndGgmJihuPWQuY2hpbGRyZW4oKS5maXJzdCgpLCFuLmxlbmd0aCkpe2ZvcihpPVt7cm93U3BhbjoxLGNlbGxzOltdLGluZGV4OjB9XSxvLl9wcmVwYXJlQ29sdW1ucyhpLGEpLHQ9MDtpLmxlbmd0aD50O3QrKyljKz1cIjx0cj5cIixzJiYoYys9Jzx0aCBjbGFzcz1cImstaGllcmFyY2h5LWNlbGxcIj4mbmJzcDs8L3RoPicpLGMrPW8uX2NyZWF0ZUhlYWRlckNlbGxzKGlbdF0uY2VsbHMsaVt0XS5yb3dTcGFuKSxjKz1cIjwvdHI+XCI7bj1lKGMpfWwmJihyPWUoXCI8dHIvPlwiKSxyLmFkZENsYXNzKFwiay1maWx0ZXItcm93XCIpLHMmJnIucHJlcGVuZCgnPHRoIGNsYXNzPVwiay1oaWVyYXJjaHktY2VsbFwiPiZuYnNwOzwvdGg+JyksZC5hcHBlbmQocikpLG4uY2hpbGRyZW4oKS5sZW5ndGg/cyYmIW4uZmluZChcIi5rLWhpZXJhcmNoeS1jZWxsXCIpWzBdJiZuLnByZXBlbmQoJzx0aCBjbGFzcz1cImstaGllcmFyY2h5LWNlbGxcIj4mbmJzcDs8L3RoPicpOihjPVwiXCIscyYmKGMrPSc8dGggY2xhc3M9XCJrLWhpZXJhcmNoeS1jZWxsXCI+Jm5ic3A7PC90aD4nKSxjKz1vLl9jcmVhdGVIZWFkZXJDZWxscyhhKSxuLmh0bWwoYykpLG4uYXR0cihcInJvbGVcIixcInJvd1wiKS5maW5kKFwidGhcIikuYWRkQ2xhc3MoXCJrLWhlYWRlclwiKSxvLm9wdGlvbnMuc2Nyb2xsYWJsZXx8ZC5hZGRDbGFzcyhcImstZ3JpZC1oZWFkZXJcIiksbi5maW5kKFwic2NyaXB0XCIpLnJlbW92ZSgpLmVuZCgpLnByZXBlbmRUbyhkKSxvLnRoZWFkJiZvLl9kZXN0cm95Q29sdW1uQXR0YWNobWVudHMoKSx0aGlzLmFuZ3VsYXIoXCJjbGVhbnVwXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6ZC5maW5kKFwidGhcIikuZ2V0KCl9fSksdGhpcy5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmQuZmluZChcInRoXCIpLmdldCgpLGRhdGE6YnQoYSxmdW5jdGlvbihlKXtyZXR1cm57Y29sdW1uOmV9fSl9fSksby50aGVhZD1kLmF0dHIoXCJyb2xlXCIsXCJyb3dncm91cFwiKSxvLl9zb3J0YWJsZSgpLG8uX2ZpbHRlcmFibGUoKSxvLl9maWx0ZXJSb3coKSxvLl9zY3JvbGxhYmxlKCksby5fdXBkYXRlQ29scygpLG8uX2NvbHVtbk1lbnUoKSx0aGlzLm9wdGlvbnMuc2Nyb2xsYWJsZSYmSSh0aGlzLmNvbHVtbnMpLmxlbmd0aCYmKG8uX2FwcGVuZExvY2tlZENvbHVtbkhlYWRlcihvLnRoZWFkLmNsb3Nlc3QoXCIuay1ncmlkLWhlYWRlclwiKSksby5fYXBwZW5kTG9ja2VkQ29sdW1uQ29udGVudCgpLG8ubG9ja2VkQ29udGVudC5iaW5kKFwiRE9NTW91c2VTY3JvbGxcIitPdCtcIiBtb3VzZXdoZWVsXCIrT3QsVHQoby5fd2hlZWxTY3JvbGwsbykpLG8uX2FwcGx5TG9ja2VkQ29udGFpbmVyc1dpZHRoKCkpLG8uX3VwZGF0ZUZpcnN0Q29sdW1uQ2xhc3MoKSxvLl9yZXNpemFibGUoKSxvLl9kcmFnZ2FibGUoKSxvLl9yZW9yZGVyYWJsZSgpLG8uZ3JvdXBhYmxlJiZvLl9hdHRhY2hHcm91cGFibGUoKX0sX3VwZGF0ZUZpcnN0Q29sdW1uQ2xhc3M6ZnVuY3Rpb24oKXt2YXIgdCxuLGk9dGhpcyxyPWkuY29sdW1uc3x8W10sbz1pLl9oYXNEZXRhaWxzKCkmJnIubGVuZ3RoO298fGkuX2dyb3VwcygpfHwodD1lKCksbj1pLnRoZWFkLmZpbmQoXCI+dHI6bm90KC5rLWZpbHRlci1yb3cpOm5vdCg6Zmlyc3QpXCIpLHI9eihyKSxuLmxlbmd0aCYmclswXSYmIXJbMF0uY29sdW1ucyYmKHQ9dC5hZGQobikpLGkuX2lzTG9ja2VkKCkmJihuPWkubG9ja2VkSGVhZGVyLmZpbmQoXCJ0aGVhZD50cjpub3QoLmstZmlsdGVyLXJvdyk6bm90KDpmaXJzdClcIikscj1JKGkuY29sdW1ucyksbi5sZW5ndGgmJnJbMF0mJiFyWzBdLmNvbHVtbnMmJih0PXQuYWRkKG4pKSksdC5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKS5maW5kKFwidGhcIik7dC5yZW1vdmVDbGFzcyhcImstZmlyc3RcIiksdC5lcSgwKS5hZGRDbGFzcyhcImstZmlyc3RcIil9KSl9LF9wcmVwYXJlQ29sdW1uczpmdW5jdGlvbihlLHQsbixpKXt2YXIgcixvLGE9aXx8ZVtlLmxlbmd0aC0xXSxzPWVbYS5pbmRleCsxXSxsPTA7Zm9yKHI9MDt0Lmxlbmd0aD5yO3IrKylvPXtjb2x1bW46dFtyXSxjb2xTcGFuOjB9LGEuY2VsbHMucHVzaChvKSx0W3JdLmNvbHVtbnMmJnRbcl0uY29sdW1ucy5sZW5ndGgmJihzfHwocz17cm93U3BhbjowLGNlbGxzOltdLGluZGV4OmUubGVuZ3RofSxlLnB1c2gocykpLG8uY29sU3Bhbj10W3JdLmNvbHVtbnMubGVuZ3RoLHRoaXMuX3ByZXBhcmVDb2x1bW5zKGUsdFtyXS5jb2x1bW5zLG8scyksbCs9by5jb2xTcGFuLTEsYS5yb3dTcGFuPWUubGVuZ3RoLWEuaW5kZXgpO24mJihuLmNvbFNwYW4rPWwpfSxfd2hlZWxTY3JvbGw6ZnVuY3Rpb24odCl7dmFyIG4saSxyO3QuY3RybEtleXx8KG49dGhpcy5jb250ZW50LHRoaXMub3B0aW9ucy5zY3JvbGxhYmxlLnZpcnR1YWwmJihuPXRoaXMudmlydHVhbFNjcm9sbGFibGUudmVydGljYWxTY3JvbGxiYXIpLGk9bi5zY3JvbGxUb3AoKSxyPXV0LndoZWVsRGVsdGFZKHQpLHImJih0LnByZXZlbnREZWZhdWx0KCksZSh0LmN1cnJlbnRUYXJnZXQpLm9uZShcIndoZWVsXCIrT3QsITEpLG4uc2Nyb2xsVG9wKGkrLXIpKSl9LF9pc0xvY2tlZDpmdW5jdGlvbigpe3JldHVybiBudWxsIT10aGlzLmxvY2tlZEhlYWRlcn0sX3VwZGF0ZUNvbHM6ZnVuY3Rpb24oZSl7ZT1lfHx0aGlzLnRoZWFkLnBhcmVudCgpLmFkZCh0aGlzLnRhYmxlKSx0aGlzLl9hcHBlbmRDb2xzKGUsdGhpcy5faXNMb2NrZWQoKSl9LF91cGRhdGVMb2NrZWRDb2xzOmZ1bmN0aW9uKGUpe3RoaXMuX2lzTG9ja2VkKCkmJihlPWV8fHRoaXMubG9ja2VkSGVhZGVyLmZpbmQoXCJ0YWJsZVwiKS5hZGQodGhpcy5sb2NrZWRUYWJsZSksaihlLEIoUih0aGlzLmNvbHVtbnMpKSx0aGlzLl9oYXNEZXRhaWxzKCksdGhpcy5fZ3JvdXBzKCkpKX0sX2FwcGVuZENvbHM6ZnVuY3Rpb24oZSx0KXt0P2ooZSxCKEYodGhpcy5jb2x1bW5zKSksdGhpcy5faGFzRGV0YWlscygpLDApOmooZSxCKGYodGhpcy5jb2x1bW5zKSksdGhpcy5faGFzRGV0YWlscygpLHRoaXMuX2dyb3VwcygpKX0sX2F1dG9Db2x1bW5zOmZ1bmN0aW9uKGUpe2lmKGUmJmUudG9KU09OKXt2YXIgdCxuPXRoaXM7ZT1lLnRvSlNPTigpO2Zvcih0IGluIGUpbi5jb2x1bW5zLnB1c2goe2ZpZWxkOnR9KTtuLl90aGVhZCgpLG4uX3RlbXBsYXRlcygpfX0sX3Jvd3NIdG1sOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMsbz1cIlwiLGE9dC5yb3dUZW1wbGF0ZSxzPXQuYWx0Um93VGVtcGxhdGU7Zm9yKG49MCxpPWUubGVuZ3RoO2k+bjtuKyspbys9biUyP3MoZVtuXSk6YShlW25dKSxyLl9kYXRhLnB1c2goZVtuXSk7cmV0dXJuIG99LF9ncm91cFJvd0h0bWw6ZnVuY3Rpb24oZSx0LG4saSxyLG8pe3ZhciBhLHMsbD10aGlzLGM9XCJcIixkPWUuZmllbGQsdT1rdChsLmNvbHVtbnMsZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmllbGQ9PWR9KVswXXx8e30saD11Lmdyb3VwSGVhZGVyVGVtcGxhdGUscD0odS50aXRsZXx8ZCkrXCI6IFwiKyQoZS52YWx1ZSx1LmZvcm1hdCx1LnZhbHVlcyksZj1sLl9ncm91cEFnZ3JlZ2F0ZXNEZWZhdWx0T2JqZWN0fHx7fSxnPXd0KGYsZS5hZ2dyZWdhdGVzKSxtPXd0KHt9LHtmaWVsZDplLmZpZWxkLHZhbHVlOmUudmFsdWUsYWdncmVnYXRlczpnfSxlLmFnZ3JlZ2F0ZXNbZS5maWVsZF0pLHY9ci5ncm91cEZvb3RlclRlbXBsYXRlLF89ZS5pdGVtcztpZihoJiYocD10eXBlb2YgaD09PWxuP2gobSk6dXQudGVtcGxhdGUoaCkobSkpLGMrPWkodCxuLHApLGUuaGFzU3ViZ3JvdXBzKWZvcihhPTAscz1fLmxlbmd0aDtzPmE7YSsrKWMrPWwuX2dyb3VwUm93SHRtbChfW2FdLG8/dDp0LTEsbisxLGkscixvKTtlbHNlIGMrPWwuX3Jvd3NIdG1sKF8scik7cmV0dXJuIHYmJihjKz12KGcpKSxjfSxjb2xsYXBzZUdyb3VwOmZ1bmN0aW9uKHQpe3Q9ZSh0KTt2YXIgbixpLHIsbyxhLHM9dGhpcy5vcHRpb25zLmdyb3VwYWJsZSxsPXMuc2hvd0Zvb3RlcixjPWw/MDoxLGQ9ZSgpO2Zvcih0aGlzLl9pc0xvY2tlZCgpJiYodC5jbG9zZXN0KFwiZGl2XCIpLmhhc0NsYXNzKFwiay1ncmlkLWNvbnRlbnQtbG9ja2VkXCIpP2Q9dGhpcy50Ym9keS5jaGlsZHJlbihcInRyOmVxKFwiK3QuaW5kZXgoKStcIilcIikubmV4dEFsbChcInRyXCIpOihkPXQubmV4dEFsbChcInRyXCIpLHQ9dGhpcy5sb2NrZWRUYWJsZS5maW5kKFwiPnRib2R5PnRyOmVxKFwiK3QuaW5kZXgoKStcIilcIikpKSxuPXQuZmluZChcIi5rLWdyb3VwLWNlbGxcIikubGVuZ3RoLHQuZmluZChcIi5rLWljb25cIikuYWRkQ2xhc3MoXCJrLWktZXhwYW5kXCIpLnJlbW92ZUNsYXNzKFwiay1pLWNvbGxhcHNlXCIpLHQuZmluZChcInRkOmZpcnN0XCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITEpLHQ9dC5uZXh0QWxsKFwidHJcIikscj0wLG89dC5sZW5ndGg7bz5yJiYoYT10LmVxKHIpLGk9YS5maW5kKFwiLmstZ3JvdXAtY2VsbFwiKS5sZW5ndGgsYS5oYXNDbGFzcyhcImstZ3JvdXBpbmctcm93XCIpP2MrKzphLmhhc0NsYXNzKFwiay1ncm91cC1mb290ZXJcIikmJmMtLSwhKG4+PWl8fGEuaGFzQ2xhc3MoXCJrLWdyb3VwLWZvb3RlclwiKSYmMD5jKSk7cisrKWEuaGlkZSgpLGQuZXEocikuaGlkZSgpfSxleHBhbmRHcm91cDpmdW5jdGlvbih0KXt0PWUodCk7dmFyIG4saSxyLG8sYSxzPXRoaXMsbD1lKCksYz0xO2Zvcih0aGlzLl9pc0xvY2tlZCgpJiYodC5jbG9zZXN0KFwiZGl2XCIpLmhhc0NsYXNzKFwiay1ncmlkLWNvbnRlbnQtbG9ja2VkXCIpP2w9dGhpcy50Ym9keS5jaGlsZHJlbihcInRyOmVxKFwiK3QuaW5kZXgoKStcIilcIikubmV4dEFsbChcInRyXCIpOihsPXQubmV4dEFsbChcInRyXCIpLHQ9dGhpcy5sb2NrZWRUYWJsZS5maW5kKFwiPnRib2R5PnRyOmVxKFwiK3QuaW5kZXgoKStcIilcIikpKSxuPXQuZmluZChcIi5rLWdyb3VwLWNlbGxcIikubGVuZ3RoLHQuZmluZChcIi5rLWljb25cIikuYWRkQ2xhc3MoXCJrLWktY29sbGFwc2VcIikucmVtb3ZlQ2xhc3MoXCJrLWktZXhwYW5kXCIpLHQuZmluZChcInRkOmZpcnN0XCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApLHQ9dC5uZXh0QWxsKFwidHJcIiksbz0wLGE9dC5sZW5ndGg7YT5vJiYoaT10LmVxKG8pLHI9aS5maW5kKFwiLmstZ3JvdXAtY2VsbFwiKS5sZW5ndGgsIShuPj1yKSk7bysrKXIhPW4rMXx8aS5oYXNDbGFzcyhcImstZGV0YWlsLXJvd1wiKXx8KGkuc2hvdygpLGwuZXEobykuc2hvdygpLGkuaGFzQ2xhc3MoXCJrLWdyb3VwaW5nLXJvd1wiKSYmaS5maW5kKFwiLmstaWNvblwiKS5oYXNDbGFzcyhcImstaS1jb2xsYXBzZVwiKSYmcy5leHBhbmRHcm91cChpKSxpLmhhc0NsYXNzKFwiay1tYXN0ZXItcm93XCIpJiZpLmZpbmQoXCIuay1pY29uXCIpLmhhc0NsYXNzKFwiay1taW51c1wiKSYmKGkubmV4dCgpLnNob3coKSxsLmVxKG8rMSkuc2hvdygpKSksaS5oYXNDbGFzcyhcImstZ3JvdXBpbmctcm93XCIpJiZjKyssaS5oYXNDbGFzcyhcImstZ3JvdXAtZm9vdGVyXCIpJiYoMT09Yz8oaS5zaG93KCksbC5lcShvKS5zaG93KCkpOmMtLSl9LF91cGRhdGVIZWFkZXI6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPW4uX2lzTG9ja2VkKCk/bi5sb2NrZWRIZWFkZXIuZmluZChcInRoZWFkXCIpOm4udGhlYWQscj1pLmZpbmQoXCJ0ci5rLWZpbHRlci1yb3dcIikuZmluZChcInRoLmstZ3JvdXAtY2VsbFwiKS5sZW5ndGgsbz1pLmZpbmQoXCJ0cjpmaXJzdFwiKS5maW5kKFwidGguay1ncm91cC1jZWxsXCIpLmxlbmd0aCxhPWkuY2hpbGRyZW4oXCJ0cjpub3QoOmZpcnN0KVwiKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4hZSh0aGlzKS5jaGlsZHJlbihcIjp2aXNpYmxlXCIpLmxlbmd0aH0pO3Q+bz8oZShBcnJheSh0LW8rMSkuam9pbignPHRoIGNsYXNzPVwiay1ncm91cC1jZWxsIGstaGVhZGVyXCI+Jm5ic3A7PC90aD4nKSkucHJlcGVuZFRvKGkuY2hpbGRyZW4oXCJ0cjpub3QoLmstZmlsdGVyLXJvdylcIikpLG4uZWxlbWVudC5pcyhcIjp2aXNpYmxlXCIpJiZhLmZpbmQoXCJ0aC5rLWdyb3VwLWNlbGxcIikuaGlkZSgpKTpvPnQmJmkuZmluZChcInRyXCIpLmVhY2goZnVuY3Rpb24oKXtlKHRoaXMpLmZpbmQoXCJ0aC5rLWdyb3VwLWNlbGxcIikuZmlsdGVyKFwiOmVxKFwiK3QrXCIpLDpndChcIit0K1wiKVwiKS5yZW1vdmUoKX0pLHQ+ciYmZShBcnJheSh0LXIrMSkuam9pbignPHRoIGNsYXNzPVwiay1ncm91cC1jZWxsIGstaGVhZGVyXCI+Jm5ic3A7PC90aD4nKSkucHJlcGVuZFRvKGkuZmluZChcIi5rLWZpbHRlci1yb3dcIikpfSxfZmlyc3REYXRhSXRlbTpmdW5jdGlvbihlLHQpe3JldHVybiBlJiZ0JiYoZT1lLmhhc1N1Ymdyb3Vwcz90aGlzLl9maXJzdERhdGFJdGVtKGUuaXRlbXNbMF0sdCk6ZS5pdGVtc1swXSksZX0sX3VwZGF0ZVRhYmxlc1dpZHRoOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzO24uX2lzTG9ja2VkKCkmJih0PWUoXCI+LmstZ3JpZC1mb290ZXI+LmstZ3JpZC1mb290ZXItd3JhcD50YWJsZVwiLG4ud3JhcHBlcikuYWRkKG4udGhlYWQucGFyZW50KCkpLmFkZChuLnRhYmxlKSxuLl9mb290ZXJXaWR0aD1KKHQuZXEoMCkpLHQud2lkdGgobi5fZm9vdGVyV2lkdGgpLHQ9ZShcIj4uay1ncmlkLWZvb3Rlcj4uay1ncmlkLWZvb3Rlci1sb2NrZWQ+dGFibGVcIixuLndyYXBwZXIpLmFkZChuLmxvY2tlZEhlYWRlci5maW5kKFwiPnRhYmxlXCIpKS5hZGQobi5sb2NrZWRUYWJsZSksdC53aWR0aChKKHQuZXEoMCkpKSl9LGhpZGVDb2x1bW46ZnVuY3Rpb24obil7dmFyIGkscixvLGEsbCxjLGQsdSxnLG0sdj10aGlzLF89MCx5PXYuZm9vdGVyfHx2LndyYXBwZXIuZmluZChcIi5rLWdyaWQtZm9vdGVyXCIpLHc9di5jb2x1bW5zLGI9di5sb2NrZWRIZWFkZXI/Tyh2LmxvY2tlZEhlYWRlci5maW5kKFwiPnRhYmxlPnRoZWFkXCIpKS5maWx0ZXIoXCI6dmlzaWJsZVwiKS5sZW5ndGg6MDtpZihuPVwibnVtYmVyXCI9PXR5cGVvZiBuP3dbbl06eXQobik/a3QoUyh3KSxmdW5jdGlvbihlKXtyZXR1cm4gZT09PW59KVswXTprdChTKHcpLGZ1bmN0aW9uKGUpe3JldHVybiBlLmZpZWxkPT09bn0pWzBdLG4mJnAobikpe2lmKG4uY29sdW1ucyYmbi5jb2x1bW5zLmxlbmd0aCl7Zm9yKGM9eChuLHcpLGgobiwhMSksWShzKGUoXCI+dGFibGU+dGhlYWRcIix2LmxvY2tlZEhlYWRlciksdi50aGVhZCxcIj50cjplcShcIitjLnJvdytcIik+dGhcIiksYy5jZWxsLCExKSxvPTA7bi5jb2x1bW5zLmxlbmd0aD5vO28rKyl0aGlzLmhpZGVDb2x1bW4obi5jb2x1bW5zW29dKTtyZXR1cm4gdi50cmlnZ2VyKHF0LHtjb2x1bW46bn0pLHR9aWYoZz1DdChuLGYoTCh3KSkpLGgobiwhMSksdi5fc2V0UGFyZW50c1Zpc2liaWxpdHkobiwhMSksdi5fdGVtcGxhdGVzKCksdi5fdXBkYXRlQ29scygpLHYuX3VwZGF0ZUxvY2tlZENvbHMoKSxtPXYudGhlYWQsZD1nLHYubG9ja2VkSGVhZGVyJiZiPmc/bT12LmxvY2tlZEhlYWRlci5maW5kKFwiPnRhYmxlPnRoZWFkXCIpOmQtPWIsaT1PKG0pLmZpbHRlcihcIjp2aXNpYmxlXCIpLmVxKGQpLGlbMF0uc3R5bGUuZGlzcGxheT1cIm5vbmVcIixZKHMoZShcIj50YWJsZT50aGVhZFwiLHYubG9ja2VkSGVhZGVyKSx2LnRoZWFkLFwiPnRyLmstZmlsdGVyLXJvdz50aFwiKSxnLCExKSx5WzBdJiYodi5fdXBkYXRlQ29scyh5LmZpbmQoXCI+LmstZ3JpZC1mb290ZXItd3JhcD50YWJsZVwiKSksdi5fdXBkYXRlTG9ja2VkQ29scyh5LmZpbmQoXCI+LmstZ3JpZC1mb290ZXItbG9ja2VkPnRhYmxlXCIpKSxZKHkuZmluZChcIi5rLWZvb3Rlci10ZW1wbGF0ZT50ZFwiKSxnLCExKSksdi5sb2NrZWRUYWJsZSYmYj5nP0sodi5sb2NrZWRUYWJsZS5maW5kKFwiPnRib2R5PnRyXCIpLGcpOksodi50Ym9keS5jaGlsZHJlbigpLGctYiksdi5sb2NrZWRUYWJsZSl2Ll91cGRhdGVUYWJsZXNXaWR0aCgpLHYuX2FwcGx5TG9ja2VkQ29udGFpbmVyc1dpZHRoKCksdi5fc3luY0xvY2tlZENvbnRlbnRIZWlnaHQoKSx2Ll9zeW5jTG9ja2VkSGVhZGVySGVpZ2h0KCksdi5fc3luY0xvY2tlZEZvb3RlckhlaWdodCgpO2Vsc2V7Zm9yKGE9di50aGVhZC5wcmV2KCkuZmluZChcImNvbFwiKSxvPTAsdT1hLmxlbmd0aDt1Pm87bys9MSl7aWYobD1hW29dLnN0eWxlLndpZHRoLCFsfHwtMSE9bC5pbmRleE9mKFwiJVwiKSl7Xz0wO2JyZWFrfV8rPXBhcnNlSW50KGwsMTApfXI9ZShcIj4uay1ncmlkLWhlYWRlciB0YWJsZTpmaXJzdCw+LmstZ3JpZC1mb290ZXIgdGFibGU6Zmlyc3RcIix2LndyYXBwZXIpLmFkZCh2LnRhYmxlKSx2Ll9mb290ZXJXaWR0aD1udWxsLF8mJihyLndpZHRoKF8pLHYuX2Zvb3RlcldpZHRoPV8pLHduLm1zaWUmJjg9PXduLnZlcnNpb24mJihyLmNzcyhcImRpc3BsYXlcIixcImlubGluZS10YWJsZVwiKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci5jc3MoXCJkaXNwbGF5XCIsXCJ0YWJsZVwiKX0sMSkpfXYuX3VwZGF0ZUZpcnN0Q29sdW1uQ2xhc3MoKSx2LnRyaWdnZXIocXQse2NvbHVtbjpufSl9fSxfc2V0UGFyZW50c1Zpc2liaWxpdHk6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG8sYSxsLGM9dGhpcy5jb2x1bW5zLGQ9W10scD1uP2Z1bmN0aW9uKGUpe3JldHVybiBmKGUuY29sdW1ucykubGVuZ3RoJiZlLmhpZGRlbn06ZnVuY3Rpb24oZSl7cmV0dXJuIWYoZS5jb2x1bW5zKS5sZW5ndGgmJiFlLmhpZGRlbn07aWYodSh0LGMsZCkmJmQubGVuZ3RoKWZvcihpPWQubGVuZ3RoLTE7aT49MDtpLS0pcj1kW2ldLG89YihyLGMpLGE9cyhlKFwiPnRhYmxlPnRoZWFkXCIsdGhpcy5sb2NrZWRIZWFkZXIpLHRoaXMudGhlYWQsXCI+dHI6ZXEoXCIrby5yb3crXCIpPnRoOm5vdCguay1ncm91cC1jZWxsKTpub3QoLmstaGllcmFyY2h5LWNlbGwpXCIpLmVxKG8uY2VsbCkscChyKSYmKGgocixuKSxhWzBdLnN0eWxlLmRpc3BsYXk9bj9cIlwiOlwibm9uZVwiKSxhLmZpbHRlcihcIltcIit1dC5hdHRyKFwiY29sc3BhblwiKStcIl1cIikubGVuZ3RoJiYobD1wYXJzZUludChhLmF0dHIodXQuYXR0cihcImNvbHNwYW5cIikpLDEwKSxhWzBdLmNvbFNwYW49bC1UKHIuY29sdW1ucyl8fDEpfSxzaG93Q29sdW1uOmZ1bmN0aW9uKG4pe3ZhciBpLHIsbyxhLGwsYyxkLHUsZixnLG0sdj10aGlzLF89di5jb2x1bW5zLHk9di5mb290ZXJ8fHYud3JhcHBlci5maW5kKFwiLmstZ3JpZC1mb290ZXJcIiksdz12LmxvY2tlZEhlYWRlcj9PKHYubG9ja2VkSGVhZGVyLmZpbmQoXCI+dGFibGU+dGhlYWRcIikpLmxlbmd0aDowO2lmKG49XCJudW1iZXJcIj09dHlwZW9mIG4/X1tuXTp5dChuKT9rdChTKF8pLGZ1bmN0aW9uKGUpe3JldHVybiBlPT09bn0pWzBdOmt0KFMoXyksZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmllbGQ9PT1ufSlbMF0sbiYmIXAobikpe2lmKG4uY29sdW1ucyYmbi5jb2x1bW5zLmxlbmd0aCl7Zm9yKGQ9eChuLF8pLGgobiwhMCksWShzKGUoXCI+dGFibGU+dGhlYWRcIix2LmxvY2tlZEhlYWRlciksdi50aGVhZCxcIj50cjplcShcIitkLnJvdytcIik+dGhcIiksZC5jZWxsLCEwKSxpPTA7bi5jb2x1bW5zLmxlbmd0aD5pO2krKyl0aGlzLnNob3dDb2x1bW4obi5jb2x1bW5zW2ldKTtyZXR1cm4gdi50cmlnZ2VyKCR0LHtjb2x1bW46bn0pLHR9aWYoZz1DdChuLEwoXykpLGgobiwhMCksdi5fc2V0UGFyZW50c1Zpc2liaWxpdHkobiwhMCksdi5fdGVtcGxhdGVzKCksdi5fdXBkYXRlQ29scygpLHYuX3VwZGF0ZUxvY2tlZENvbHMoKSxtPXYudGhlYWQsYz1nLHYubG9ja2VkSGVhZGVyJiZ3Pmc/bT12LmxvY2tlZEhlYWRlci5maW5kKFwiPnRhYmxlPnRoZWFkXCIpOmMtPXcsbz1PKG0pLmVxKGMpLG9bMF0uc3R5bGUuZGlzcGxheT1cIlwiLFkocyhlKFwiPnRhYmxlPnRoZWFkXCIsdi5sb2NrZWRIZWFkZXIpLHYudGhlYWQsXCI+dHIuay1maWx0ZXItcm93PnRoXCIpLGcsITApLHlbMF0mJih2Ll91cGRhdGVDb2xzKHkuZmluZChcIj4uay1ncmlkLWZvb3Rlci13cmFwPnRhYmxlXCIpKSx2Ll91cGRhdGVMb2NrZWRDb2xzKHkuZmluZChcIj4uay1ncmlkLWZvb3Rlci1sb2NrZWQ+dGFibGVcIikpLFkoeS5maW5kKFwiLmstZm9vdGVyLXRlbXBsYXRlPnRkXCIpLGcsITApKSx2LmxvY2tlZFRhYmxlJiZ3Pmc/USh2LmxvY2tlZFRhYmxlLmZpbmQoXCI+dGJvZHk+dHJcIiksZyk6USh2LnRib2R5LmNoaWxkcmVuKCksZy13KSx2LmxvY2tlZFRhYmxlKXYuX3VwZGF0ZVRhYmxlc1dpZHRoKCksdi5fYXBwbHlMb2NrZWRDb250YWluZXJzV2lkdGgoKSx2Ll9zeW5jTG9ja2VkQ29udGVudEhlaWdodCgpLHYuX3N5bmNMb2NrZWRIZWFkZXJIZWlnaHQoKTtlbHNlIGlmKGE9ZShcIj4uay1ncmlkLWhlYWRlciB0YWJsZTpmaXJzdCw+LmstZ3JpZC1mb290ZXIgdGFibGU6Zmlyc3RcIix2LndyYXBwZXIpLmFkZCh2LnRhYmxlKSxuLndpZHRoKXtmb3IobD0wLGY9di50aGVhZC5wcmV2KCkuZmluZChcImNvbFwiKSxpPTAscj1mLmxlbmd0aDtyPmk7aSs9MSl7aWYodT1mW2ldLnN0eWxlLndpZHRoLHUuaW5kZXhPZihcIiVcIik+LTEpe2w9MDticmVha31sKz1wYXJzZUludCh1LDEwKX12Ll9mb290ZXJXaWR0aD1udWxsLGwmJihhLndpZHRoKGwpLHYuX2Zvb3RlcldpZHRoPWwpfWVsc2UgYS53aWR0aChcIlwiKTt2Ll91cGRhdGVGaXJzdENvbHVtbkNsYXNzKCksdi50cmlnZ2VyKCR0LHtjb2x1bW46bn0pfX0sX3Byb2dyZXNzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZWxlbWVudDt0aGlzLmxvY2tlZENvbnRlbnQ/dD10aGlzLndyYXBwZXI6dGhpcy5lbGVtZW50LmlzKFwidGFibGVcIik/dD10aGlzLmVsZW1lbnQucGFyZW50KCk6dGhpcy5jb250ZW50JiZ0aGlzLmNvbnRlbnQubGVuZ3RoJiYodD10aGlzLmNvbnRlbnQpLHV0LnVpLnByb2dyZXNzKHQsZSl9LF9yZXNpemU6ZnVuY3Rpb24oKXt0aGlzLmNvbnRlbnQmJih0aGlzLl9zZXRDb250ZW50SGVpZ2h0KCksdGhpcy5fc2V0Q29udGVudFdpZHRoKCkpfSxfaXNBY3RpdmVJblRhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9bXQoKTtyZXR1cm4gdGhpcy50YWJsZVswXT09PXR8fGUuY29udGFpbnModGhpcy50YWJsZVswXSx0KXx8dGhpcy5faXNMb2NrZWQoKSYmKHRoaXMubG9ja2VkVGFibGVbMF09PT10fHxlLmNvbnRhaW5zKHRoaXMubG9ja2VkVGFibGVbMF0sdCkpfSxyZWZyZXNoOmZ1bmN0aW9uKHQpe3ZhciBuLGk9dGhpcyxyPWkuZGF0YVNvdXJjZS52aWV3KCksbz1pLm9wdGlvbnMubmF2aWdhdGFibGUsYT1lKGkuY3VycmVudCgpKSxzPSExLGw9KGkuZGF0YVNvdXJjZS5ncm91cCgpfHxbXSkubGVuZ3RoLGM9bCtCKGYoaS5jb2x1bW5zKSkubGVuZ3RoO3QmJlwiaXRlbWNoYW5nZVwiPT09dC5hY3Rpb24mJmkuZWRpdGFibGV8fCh0PXR8fHt9LGkudHJpZ2dlcihcImRhdGFCaW5kaW5nXCIse2FjdGlvbjp0LmFjdGlvbnx8XCJyZWJpbmRcIixpbmRleDp0LmluZGV4LGl0ZW1zOnQuaXRlbXN9KXx8KGkuX2FuZ3VsYXJJdGVtcyhcImNsZWFudXBcIiksbyYmKGkuX2lzQWN0aXZlSW5UYWJsZSgpfHxpLl9lZGl0Q29udGFpbmVyJiZpLl9lZGl0Q29udGFpbmVyLmRhdGEoXCJrZW5kb1dpbmRvd1wiKSkmJihzPWEuaXMoXCJ0aFwiKSxuPTAscyYmKG49aS50aGVhZC5maW5kKFwidGg6bm90KC5rLWdyb3VwLWNlbGwpXCIpLmluZGV4KGEpKSksaS5fZGVzdHJveUVkaXRhYmxlKCksaS5fcHJvZ3Jlc3MoITEpLGkuX2hpZGVSZXNpemVIYW5kbGUoKSxpLl9kYXRhPVtdLGkuY29sdW1ucy5sZW5ndGh8fChpLl9hdXRvQ29sdW1ucyhpLl9maXJzdERhdGFJdGVtKHJbMF0sbCkpLGM9bCtpLmNvbHVtbnMubGVuZ3RoKSxpLl9ncm91cD1sPjB8fGkuX2dyb3VwLGkuX2dyb3VwJiYoaS5fdGVtcGxhdGVzKCksaS5fdXBkYXRlQ29scygpLGkuX3VwZGF0ZUxvY2tlZENvbHMoKSxpLl91cGRhdGVIZWFkZXIobCksaS5fZ3JvdXA9bD4wKSxpLl9yZW5kZXJDb250ZW50KHIsYyxsKSxpLl9yZW5kZXJMb2NrZWRDb250ZW50KHIsYyxsKSxpLl9mb290ZXIoKSxpLl9zZXRDb250ZW50SGVpZ2h0KCksaS5fc2V0Q29udGVudFdpZHRoKCksaS5sb2NrZWRUYWJsZSYmKGkub3B0aW9ucy5zY3JvbGxhYmxlLnZpcnR1YWw/aS5jb250ZW50LmZpbmQoXCI+LmstdmlydHVhbC1zY3JvbGxhYmxlLXdyYXBcIikudHJpZ2dlcihcInNjcm9sbFwiKTppLmNvbnRlbnQudHJpZ2dlcihcInNjcm9sbFwiKSksbj49MCYmKGkuX3JlbW92ZUN1cnJlbnQoKSxpLmN1cnJlbnQocz9pLnRoZWFkLmZpbmQoXCJ0aDpub3QoLmstZ3JvdXAtY2VsbClcIikuZXEobik6aS50YWJsZS5hZGQoaS5sb2NrZWRUYWJsZSkuZmluZChCdCkuZmlyc3QoKSksaS5fY3VycmVudCYmbnQoaS5fY3VycmVudC5jbG9zZXN0KFwidGFibGVcIilbMF0sITApKSxpLnRvdWNoU2Nyb2xsZXImJmkudG91Y2hTY3JvbGxlci5jb250ZW50UmVzaXplZCgpLGkuc2VsZWN0YWJsZSYmaS5zZWxlY3RhYmxlLnJlc2V0VG91Y2hFdmVudHMoKSxpLl9hbmd1bGFySXRlbXMoXCJjb21waWxlXCIpLGkudHJpZ2dlcihLdCkpKX0sX3JlbmRlckNvbnRlbnQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsYT10aGlzLHM9XCJcIixsPW51bGwhPWEubG9ja2VkQ29udGVudCxjPXtyb3dUZW1wbGF0ZTphLnJvd1RlbXBsYXRlLGFsdFJvd1RlbXBsYXRlOmEuYWx0Um93VGVtcGxhdGUsZ3JvdXBGb290ZXJUZW1wbGF0ZTphLmdyb3VwRm9vdGVyVGVtcGxhdGV9O2lmKHQ9bD90LUIoUihhLmNvbHVtbnMpKS5sZW5ndGg6dCxuPjApZm9yKHQ9bD90LW46dCxhLmRldGFpbFRlbXBsYXRlJiZ0KyssYS5ncm91cEZvb3RlclRlbXBsYXRlJiYoYS5fZ3JvdXBBZ2dyZWdhdGVzRGVmYXVsdE9iamVjdD1vKGEuZGF0YVNvdXJjZS5hZ2dyZWdhdGUoKSkpLGk9MCxyPWUubGVuZ3RoO3I+aTtpKyspcys9YS5fZ3JvdXBSb3dIdG1sKGVbaV0sdCwwLGw/ZHQ6Y3QsYyxsKTtlbHNlIHMrPWEuX3Jvd3NIdG1sKGUsYyk7YS50Ym9keT1WKGEudGJvZHksYS50YWJsZSxzKX0sX3JlbmRlckxvY2tlZENvbnRlbnQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhPVwiXCIscz17cm93VGVtcGxhdGU6dGhpcy5sb2NrZWRSb3dUZW1wbGF0ZSxhbHRSb3dUZW1wbGF0ZTp0aGlzLmxvY2tlZEFsdFJvd1RlbXBsYXRlLGdyb3VwRm9vdGVyVGVtcGxhdGU6dGhpcy5sb2NrZWRHcm91cEZvb3RlclRlbXBsYXRlfTtpZih0aGlzLmxvY2tlZENvbnRlbnQpe2lmKG89dGhpcy5sb2NrZWRUYWJsZSxuPjApZm9yKHQtPWYoTCh6KHRoaXMuY29sdW1ucykpKS5sZW5ndGgsaT0wLHI9ZS5sZW5ndGg7cj5pO2krKylhKz10aGlzLl9ncm91cFJvd0h0bWwoZVtpXSx0LDAsY3Qscyk7ZWxzZSBhPXRoaXMuX3Jvd3NIdG1sKGUscyk7VihvLmNoaWxkcmVuKFwidGJvZHlcIiksbyxhKSx0aGlzLl9zeW5jTG9ja2VkQ29udGVudEhlaWdodCgpfX0sX2FkanVzdFJvd3NIZWlnaHQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxhPWVbMF0ucm93cyxzPWEubGVuZ3RoLGw9dFswXS5yb3dzLGM9ZS5hZGQodCksZD1jLmxlbmd0aCx1PVtdO2ZvcihuPTA7cz5uJiZsW25dO24rKylhW25dLnN0eWxlLmhlaWdodCYmKGFbbl0uc3R5bGUuaGVpZ2h0PWxbbl0uc3R5bGUuaGVpZ2h0PVwiXCIpLGk9YVtuXS5vZmZzZXRIZWlnaHQscj1sW25dLm9mZnNldEhlaWdodCxvPTAsaT5yP289aTpyPmkmJihvPXIpLHUucHVzaChvKTtmb3Iobj0wO2Q+bjtuKyspY1tuXS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO2ZvcihuPTA7cz5uO24rKyl1W25dJiYoYVtuXS5zdHlsZS5oZWlnaHQ9bFtuXS5zdHlsZS5oZWlnaHQ9dVtuXStcInB4XCIpO2ZvcihuPTA7ZD5uO24rKyljW25dLnN0eWxlLmRpc3BsYXk9XCJcIn19KTt1dC5FeGNlbE1peGluJiZ1dC5FeGNlbE1peGluLmV4dGVuZChTbi5wcm90b3R5cGUpLHV0LlBERk1peGluJiZ1dC5QREZNaXhpbi5leHRlbmQoU24ucHJvdG90eXBlKSxodC5wbHVnaW4oU24pLGh0LnBsdWdpbih4bil9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG49d2luZG93LmtlbmRvLGk9XCJjaGFuZ2VcIixyPVwiY2FuY2VsXCIsbz1cImRhdGFCb3VuZFwiLGE9XCJkYXRhQmluZGluZ1wiLHM9bi51aS5XaWRnZXQsbD1uLmtleXMsYz1cIj4qXCIsZD1cInByb2dyZXNzXCIsdT1cImVycm9yXCIsaD1cImstc3RhdGUtZm9jdXNlZFwiLHA9XCJrLXN0YXRlLXNlbGVjdGVkXCIsZj1cImstZWRpdC1pdGVtXCIsZz1cImVkaXRcIixtPVwicmVtb3ZlXCIsdj1cInNhdmVcIixfPVwiY2xpY2tcIix5PVwiLmtlbmRvTGlzdFZpZXdcIix3PWUucHJveHksYj1uLl9hY3RpdmVFbGVtZW50LGs9bi51aS5wcm9ncmVzcyx4PW4uZGF0YS5EYXRhU291cmNlLEM9bi51aS5EYXRhQm91bmRXaWRnZXQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsaSl7dmFyIHI9dGhpcztpPWUuaXNBcnJheShpKT97ZGF0YVNvdXJjZTppfTppLHMuZm4uaW5pdC5jYWxsKHIsdCxpKSxpPXIub3B0aW9ucyxyLndyYXBwZXI9dD1yLmVsZW1lbnQsdFswXS5pZCYmKHIuX2l0ZW1JZD10WzBdLmlkK1wiX2x2X2FjdGl2ZVwiKSxyLl9lbGVtZW50KCksci5fZGF0YVNvdXJjZSgpLHIuX3RlbXBsYXRlcygpLHIuX25hdmlnYXRhYmxlKCksci5fc2VsZWN0YWJsZSgpLHIuX3BhZ2VhYmxlKCksci5fY3J1ZEhhbmRsZXJzKCksci5vcHRpb25zLmF1dG9CaW5kJiZyLmRhdGFTb3VyY2UuZmV0Y2goKSxuLm5vdGlmeShyKX0sZXZlbnRzOltpLHIsYSxvLGcsbSx2XSxvcHRpb25zOntuYW1lOlwiTGlzdFZpZXdcIixhdXRvQmluZDohMCxzZWxlY3RhYmxlOiExLG5hdmlnYXRhYmxlOiExLHRlbXBsYXRlOlwiXCIsYWx0VGVtcGxhdGU6XCJcIixlZGl0VGVtcGxhdGU6XCJcIn0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXtzLmZuLnNldE9wdGlvbnMuY2FsbCh0aGlzLGUpLHRoaXMuX3RlbXBsYXRlcygpfSxfdGVtcGxhdGVzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zO3RoaXMudGVtcGxhdGU9bi50ZW1wbGF0ZShlLnRlbXBsYXRlfHxcIlwiKSx0aGlzLmFsdFRlbXBsYXRlPW4udGVtcGxhdGUoZS5hbHRUZW1wbGF0ZXx8ZS50ZW1wbGF0ZSksdGhpcy5lZGl0VGVtcGxhdGU9bi50ZW1wbGF0ZShlLmVkaXRUZW1wbGF0ZXx8XCJcIil9LF9pdGVtOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oKVtlXSgpfSxpdGVtczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oKX0sZGF0YUl0ZW06ZnVuY3Rpb24odCl7dmFyIGk9bi5hdHRyKFwidWlkXCIpLHI9ZSh0KS5jbG9zZXN0KFwiW1wiK2krXCJdXCIpLmF0dHIoaSk7cmV0dXJuIHRoaXMuZGF0YVNvdXJjZS5nZXRCeVVpZChyKX0sc2V0RGF0YVNvdXJjZTpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZT1lLHRoaXMuX2RhdGFTb3VyY2UoKSx0aGlzLm9wdGlvbnMuYXV0b0JpbmQmJmUuZmV0Y2goKX0sX3VuYmluZERhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuZGF0YVNvdXJjZS51bmJpbmQoaSxlLl9yZWZyZXNoSGFuZGxlcikudW5iaW5kKGQsZS5fcHJvZ3Jlc3NIYW5kbGVyKS51bmJpbmQodSxlLl9lcnJvckhhbmRsZXIpfSxfZGF0YVNvdXJjZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5kYXRhU291cmNlJiZlLl9yZWZyZXNoSGFuZGxlcj9lLl91bmJpbmREYXRhU291cmNlKCk6KGUuX3JlZnJlc2hIYW5kbGVyPXcoZS5yZWZyZXNoLGUpLGUuX3Byb2dyZXNzSGFuZGxlcj13KGUuX3Byb2dyZXNzLGUpLGUuX2Vycm9ySGFuZGxlcj13KGUuX2Vycm9yLGUpKSxlLmRhdGFTb3VyY2U9eC5jcmVhdGUoZS5vcHRpb25zLmRhdGFTb3VyY2UpLmJpbmQoaSxlLl9yZWZyZXNoSGFuZGxlcikuYmluZChkLGUuX3Byb2dyZXNzSGFuZGxlcikuYmluZCh1LGUuX2Vycm9ySGFuZGxlcil9LF9wcm9ncmVzczpmdW5jdGlvbigpe2sodGhpcy5lbGVtZW50LCEwKX0sX2Vycm9yOmZ1bmN0aW9uKCl7ayh0aGlzLmVsZW1lbnQsITEpfSxfZWxlbWVudDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5hZGRDbGFzcyhcImstd2lkZ2V0IGstbGlzdHZpZXdcIikuYXR0cihcInJvbGVcIixcImxpc3Rib3hcIil9LHJlZnJlc2g6ZnVuY3Rpb24oZSl7dmFyIGkscixzLGwsYyxkPXRoaXMsdT1kLmRhdGFTb3VyY2UudmlldygpLGg9XCJcIixwPWQudGVtcGxhdGUsZj1kLmFsdFRlbXBsYXRlLGc9YigpO2lmKGU9ZXx8e30sXCJpdGVtY2hhbmdlXCI9PT1lLmFjdGlvbilyZXR1cm4gZC5faGFzQmluZGluZ1RhcmdldCgpfHxkLmVkaXRhYmxlfHwoaT1lLml0ZW1zWzBdLHM9ZC5pdGVtcygpLmZpbHRlcihcIltcIituLmF0dHIoXCJ1aWRcIikrXCI9XCIraS51aWQrXCJdXCIpLHMubGVuZ3RoPjAmJihsPXMuaW5kZXgoKSxkLmFuZ3VsYXIoXCJjbGVhbnVwXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6W3NdfX0pLHMucmVwbGFjZVdpdGgocChpKSkscz1kLml0ZW1zKCkuZXEobCkscy5hdHRyKG4uYXR0cihcInVpZFwiKSxpLnVpZCksZC5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOltzXSxkYXRhOlt7ZGF0YUl0ZW06aX1dfX0pLGQudHJpZ2dlcihcIml0ZW1DaGFuZ2VcIix7aXRlbTpzLGRhdGE6aX0pKSksdDtpZighZC50cmlnZ2VyKGEse2FjdGlvbjplLmFjdGlvbnx8XCJyZWJpbmRcIixpdGVtczplLml0ZW1zLGluZGV4OmUuaW5kZXh9KSl7Zm9yKGQuX2FuZ3VsYXJJdGVtcyhcImNsZWFudXBcIiksZC5fZGVzdHJveUVkaXRhYmxlKCksbD0wLGM9dS5sZW5ndGg7Yz5sO2wrKyloKz1sJTI/Zih1W2xdKTpwKHVbbF0pO2ZvcihkLmVsZW1lbnQuaHRtbChoKSxyPWQuaXRlbXMoKSxsPTAsYz11Lmxlbmd0aDtjPmw7bCsrKXIuZXEobCkuYXR0cihuLmF0dHIoXCJ1aWRcIiksdVtsXS51aWQpLmF0dHIoXCJyb2xlXCIsXCJvcHRpb25cIikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIixcImZhbHNlXCIpO2QuZWxlbWVudFswXT09PWcmJmQub3B0aW9ucy5uYXZpZ2F0YWJsZSYmZC5jdXJyZW50KHIuZXEoMCkpLGQuX2FuZ3VsYXJJdGVtcyhcImNvbXBpbGVcIiksZC50cmlnZ2VyKG8pfX0sX3BhZ2VhYmxlOmZ1bmN0aW9uKCl7dmFyIHQsaSxyPXRoaXMsbz1yLm9wdGlvbnMucGFnZWFibGU7ZS5pc1BsYWluT2JqZWN0KG8pJiYoaT1vLnBhZ2VySWQsdD1lLmV4dGVuZCh7fSxvLHtkYXRhU291cmNlOnIuZGF0YVNvdXJjZSxwYWdlcklkOm51bGx9KSxyLnBhZ2VyPW5ldyBuLnVpLlBhZ2VyKGUoXCIjXCIraSksdCkpfSxfc2VsZWN0YWJsZTpmdW5jdGlvbigpe3ZhciBlLHIsbz10aGlzLGE9by5vcHRpb25zLnNlbGVjdGFibGUscz1vLm9wdGlvbnMubmF2aWdhdGFibGU7YSYmKGU9bi51aS5TZWxlY3RhYmxlLnBhcnNlT3B0aW9ucyhhKS5tdWx0aXBsZSxvLnNlbGVjdGFibGU9bmV3IG4udWkuU2VsZWN0YWJsZShvLmVsZW1lbnQse2FyaWE6ITAsbXVsdGlwbGU6ZSxmaWx0ZXI6YyxjaGFuZ2U6ZnVuY3Rpb24oKXtvLnRyaWdnZXIoaSl9fSkscyYmby5lbGVtZW50Lm9uKFwia2V5ZG93blwiK3ksZnVuY3Rpb24obil7aWYobi5rZXlDb2RlPT09bC5TUEFDRUJBUil7aWYocj1vLmN1cnJlbnQoKSxuLnRhcmdldD09bi5jdXJyZW50VGFyZ2V0JiZuLnByZXZlbnREZWZhdWx0KCksZSlpZihuLmN0cmxLZXkpe2lmKHImJnIuaGFzQ2xhc3MocCkpcmV0dXJuIHIucmVtb3ZlQ2xhc3MocCksdH1lbHNlIG8uc2VsZWN0YWJsZS5jbGVhcigpO2Vsc2Ugby5zZWxlY3RhYmxlLmNsZWFyKCk7by5zZWxlY3RhYmxlLnZhbHVlKHIpfX0pKX0sY3VycmVudDpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5lbGVtZW50LHI9bi5fY3VycmVudCxvPW4uX2l0ZW1JZDtyZXR1cm4gZT09PXQ/cjoociYmclswXSYmKHJbMF0uaWQ9PT1vJiZyLnJlbW92ZUF0dHIoXCJpZFwiKSxyLnJlbW92ZUNsYXNzKGgpLGkucmVtb3ZlQXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKSksZSYmZVswXSYmKG89ZVswXS5pZHx8byxuLl9zY3JvbGxUbyhlWzBdKSxpLmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixvKSxlLmFkZENsYXNzKGgpLmF0dHIoXCJpZFwiLG8pKSxuLl9jdXJyZW50PWUsdCl9LF9zY3JvbGxUbzpmdW5jdGlvbih0KXt2YXIgbixpLHI9dGhpcyxvPSExLGE9XCJzY3JvbGxcIjtcImF1dG9cIj09ci53cmFwcGVyLmNzcyhcIm92ZXJmbG93XCIpfHxyLndyYXBwZXIuY3NzKFwib3ZlcmZsb3dcIik9PWE/bj1yLndyYXBwZXJbMF06KG49d2luZG93LG89ITApLGk9ZnVuY3Rpb24oaSxyKXt2YXIgcz1vP2UodCkub2Zmc2V0KClbaS50b0xvd2VyQ2FzZSgpXTp0W1wib2Zmc2V0XCIraV0sbD10W1wiY2xpZW50XCIrcl0sYz1lKG4pW2EraV0oKSxkPWUobilbci50b0xvd2VyQ2FzZSgpXSgpO3MrbD5jK2Q/ZShuKVthK2ldKHMrbC1kKTpjPnMmJmUobilbYStpXShzKX0saShcIlRvcFwiLFwiSGVpZ2h0XCIpLGkoXCJMZWZ0XCIsXCJXaWR0aFwiKX0sX25hdmlnYXRhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxpPXQub3B0aW9ucy5uYXZpZ2F0YWJsZSxyPXQuZWxlbWVudCxvPWZ1bmN0aW9uKG4pe3QuY3VycmVudChlKG4uY3VycmVudFRhcmdldCkpLGUobi50YXJnZXQpLmlzKFwiOmJ1dHRvbixhLDppbnB1dCxhPi5rLWljb24sdGV4dGFyZWFcIil8fHIuZm9jdXMoKX07aSYmKHQuX3RhYmluZGV4KCksci5vbihcImZvY3VzXCIreSxmdW5jdGlvbigpe3ZhciBlPXQuX2N1cnJlbnQ7ZSYmZS5pcyhcIjp2aXNpYmxlXCIpfHwoZT10Ll9pdGVtKFwiZmlyc3RcIikpLHQuY3VycmVudChlKX0pLm9uKFwiZm9jdXNvdXRcIit5LGZ1bmN0aW9uKCl7dC5fY3VycmVudCYmdC5fY3VycmVudC5yZW1vdmVDbGFzcyhoKX0pLm9uKFwia2V5ZG93blwiK3ksZnVuY3Rpb24oaSl7dmFyIG8sYSxzPWkua2V5Q29kZSxjPXQuY3VycmVudCgpLGQ9ZShpLnRhcmdldCksdT0hZC5pcyhcIjpidXR0b24sdGV4dGFyZWEsYSxhPi50LWljb24saW5wdXRcIiksaD1kLmlzKFwiOnRleHRcIikscD1uLnByZXZlbnREZWZhdWx0LGc9ci5maW5kKFwiLlwiK2YpLG09YigpO2lmKCEoIXUmJiFoJiZsLkVTQyE9c3x8aCYmbC5FU0MhPXMmJmwuRU5URVIhPXMpKWlmKGwuVVA9PT1zfHxsLkxFRlQ9PT1zKWMmJihjPWMucHJldigpKSx0LmN1cnJlbnQoYyYmY1swXT9jOnQuX2l0ZW0oXCJsYXN0XCIpKSxwKGkpO2Vsc2UgaWYobC5ET1dOPT09c3x8bC5SSUdIVD09PXMpYyYmKGM9Yy5uZXh0KCkpLHQuY3VycmVudChjJiZjWzBdP2M6dC5faXRlbShcImZpcnN0XCIpKSxwKGkpO2Vsc2UgaWYobC5QQUdFVVA9PT1zKXQuY3VycmVudChudWxsKSx0LmRhdGFTb3VyY2UucGFnZSh0LmRhdGFTb3VyY2UucGFnZSgpLTEpLHAoaSk7ZWxzZSBpZihsLlBBR0VET1dOPT09cyl0LmN1cnJlbnQobnVsbCksdC5kYXRhU291cmNlLnBhZ2UodC5kYXRhU291cmNlLnBhZ2UoKSsxKSxwKGkpO2Vsc2UgaWYobC5IT01FPT09cyl0LmN1cnJlbnQodC5faXRlbShcImZpcnN0XCIpKSxwKGkpO2Vsc2UgaWYobC5FTkQ9PT1zKXQuY3VycmVudCh0Ll9pdGVtKFwibGFzdFwiKSkscChpKTtlbHNlIGlmKGwuRU5URVI9PT1zKTAhPT1nLmxlbmd0aCYmKHV8fGgpPyhvPXQuaXRlbXMoKS5pbmRleChnKSxtJiZtLmJsdXIoKSx0LnNhdmUoKSxhPWZ1bmN0aW9uKCl7dC5lbGVtZW50LnRyaWdnZXIoXCJmb2N1c1wiKSx0LmN1cnJlbnQodC5pdGVtcygpLmVxKG8pKX0sdC5vbmUoXCJkYXRhQm91bmRcIixhKSk6XCJcIiE9PXQub3B0aW9ucy5lZGl0VGVtcGxhdGUmJnQuZWRpdChjKTtlbHNlIGlmKGwuRVNDPT09cyl7aWYoZz1yLmZpbmQoXCIuXCIrZiksMD09PWcubGVuZ3RoKXJldHVybjtvPXQuaXRlbXMoKS5pbmRleChnKSx0LmNhbmNlbCgpLHQuZWxlbWVudC50cmlnZ2VyKFwiZm9jdXNcIiksdC5jdXJyZW50KHQuaXRlbXMoKS5lcShvKSl9fSksci5vbihcIm1vdXNlZG93blwiK3krXCIgdG91Y2hzdGFydFwiK3ksYyx3KG8sdCkpKX0sY2xlYXJTZWxlY3Rpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Uuc2VsZWN0YWJsZS5jbGVhcigpLGUudHJpZ2dlcihpKX0sc2VsZWN0OmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMscj1pLnNlbGVjdGFibGU7cmV0dXJuIG49ZShuKSxuLmxlbmd0aD8oci5vcHRpb25zLm11bHRpcGxlfHwoci5jbGVhcigpLG49bi5maXJzdCgpKSxyLnZhbHVlKG4pLHQpOnIudmFsdWUoKX0sX2Rlc3Ryb3lFZGl0YWJsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5lZGl0YWJsZSYmKGUuZWRpdGFibGUuZGVzdHJveSgpLGRlbGV0ZSBlLmVkaXRhYmxlKX0sX21vZGVsRnJvbUVsZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5hdHRyKG4uYXR0cihcInVpZFwiKSk7cmV0dXJuIHRoaXMuZGF0YVNvdXJjZS5nZXRCeVVpZCh0KX0sX2Nsb3NlRWRpdGFibGU6ZnVuY3Rpb24oZSl7dmFyIHQsaSxyLG89dGhpcyxhPW8uZWRpdGFibGUscz1vLnRlbXBsYXRlLGw9ITA7cmV0dXJuIGEmJihlJiYobD1hLmVuZCgpKSxsJiYoYS5lbGVtZW50LmluZGV4KCklMiYmKHM9by5hbHRUZW1wbGF0ZSksdD1vLl9tb2RlbEZyb21FbGVtZW50KGEuZWxlbWVudCksby5fZGVzdHJveUVkaXRhYmxlKCkscj1hLmVsZW1lbnQuaW5kZXgoKSxhLmVsZW1lbnQucmVwbGFjZVdpdGgocyh0KSksaT1vLml0ZW1zKCkuZXEociksaS5hdHRyKG4uYXR0cihcInVpZFwiKSx0LnVpZCksby5faGFzQmluZGluZ1RhcmdldCgpJiZuLmJpbmQoaSx0KSkpLGx9LGVkaXQ6ZnVuY3Rpb24oZSl7dmFyIHQsaSxyPXRoaXMsbz1yLl9tb2RlbEZyb21FbGVtZW50KGUpLGE9by51aWQ7ci5jYW5jZWwoKSxlPXIuaXRlbXMoKS5maWx0ZXIoXCJbXCIrbi5hdHRyKFwidWlkXCIpK1wiPVwiK2ErXCJdXCIpLGk9ZS5pbmRleCgpLGUucmVwbGFjZVdpdGgoci5lZGl0VGVtcGxhdGUobykpLHQ9ci5pdGVtcygpLmVxKGkpLmFkZENsYXNzKGYpLmF0dHIobi5hdHRyKFwidWlkXCIpLG8udWlkKSxyLmVkaXRhYmxlPXQua2VuZG9FZGl0YWJsZSh7bW9kZWw6byxjbGVhckNvbnRhaW5lcjohMSxlcnJvclRlbXBsYXRlOiExLHRhcmdldDpyfSkuZGF0YShcImtlbmRvRWRpdGFibGVcIiksci50cmlnZ2VyKGcse21vZGVsOm8saXRlbTp0fSl9LHNhdmU6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10LmVkaXRhYmxlO24mJihuPW4uZWxlbWVudCxlPXQuX21vZGVsRnJvbUVsZW1lbnQobiksIXQudHJpZ2dlcih2LHttb2RlbDplLGl0ZW06bn0pJiZ0Ll9jbG9zZUVkaXRhYmxlKCEwKSYmdC5kYXRhU291cmNlLnN5bmMoKSl9LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5kYXRhU291cmNlLGk9dC5fbW9kZWxGcm9tRWxlbWVudChlKTt0LnRyaWdnZXIobSx7bW9kZWw6aSxpdGVtOmV9KXx8KGUuaGlkZSgpLG4ucmVtb3ZlKGkpLG4uc3luYygpKX0sYWRkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZGF0YVNvdXJjZSxuPXQuaW5kZXhPZigodC52aWV3KCl8fFtdKVswXSk7MD5uJiYobj0wKSxlLmNhbmNlbCgpLHQuaW5zZXJ0KG4se30pLGUuZWRpdChlLmVsZW1lbnQuY2hpbGRyZW4oKS5maXJzdCgpKX0sY2FuY2VsOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMsaT1uLmRhdGFTb3VyY2U7bi5lZGl0YWJsZSYmKGU9bi5lZGl0YWJsZS5lbGVtZW50LHQ9bi5fbW9kZWxGcm9tRWxlbWVudChlKSxuLnRyaWdnZXIocix7bW9kZWw6dCxjb250YWluZXI6ZX0pfHwoaS5jYW5jZWxDaGFuZ2VzKHQpLG4uX2Nsb3NlRWRpdGFibGUoITEpKSl9LF9jcnVkSGFuZGxlcnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGk9Xyt5O3QuZWxlbWVudC5vbihpLFwiLmstZWRpdC1idXR0b25cIixmdW5jdGlvbihpKXt2YXIgcj1lKHRoaXMpLmNsb3Nlc3QoXCJbXCIrbi5hdHRyKFwidWlkXCIpK1wiXVwiKTt0LmVkaXQociksaS5wcmV2ZW50RGVmYXVsdCgpfSksdC5lbGVtZW50Lm9uKGksXCIuay1kZWxldGUtYnV0dG9uXCIsZnVuY3Rpb24oaSl7dmFyIHI9ZSh0aGlzKS5jbG9zZXN0KFwiW1wiK24uYXR0cihcInVpZFwiKStcIl1cIik7dC5yZW1vdmUociksaS5wcmV2ZW50RGVmYXVsdCgpfSksdC5lbGVtZW50Lm9uKGksXCIuay11cGRhdGUtYnV0dG9uXCIsZnVuY3Rpb24oZSl7dC5zYXZlKCksZS5wcmV2ZW50RGVmYXVsdCgpfSksdC5lbGVtZW50Lm9uKGksXCIuay1jYW5jZWwtYnV0dG9uXCIsZnVuY3Rpb24oZSl7dC5jYW5jZWwoKSxlLnByZXZlbnREZWZhdWx0KCl9KX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cy5mbi5kZXN0cm95LmNhbGwoZSksZS5fdW5iaW5kRGF0YVNvdXJjZSgpLGUuX2Rlc3Ryb3lFZGl0YWJsZSgpLGUuZWxlbWVudC5vZmYoeSksZS5wYWdlciYmZS5wYWdlci5kZXN0cm95KCksbi5kZXN0cm95KGUuZWxlbWVudCl9fSk7bi51aS5wbHVnaW4oQyl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbih0KXtyZXR1cm4gZS5tYXAoaSh0KSxmdW5jdGlvbihlKXtyZXR1cm4gZS5uYW1lfSkuam9pbihcIiwgXCIpfWZ1bmN0aW9uIGkoZSl7dmFyIHQ9ZVswXTtyZXR1cm4gdC5maWxlcz9yKHQuZmlsZXMpOlt7bmFtZTpzKHQudmFsdWUpLGV4dGVuc2lvbjphKHQudmFsdWUpLHNpemU6bnVsbH1dfWZ1bmN0aW9uIHIodCl7cmV0dXJuIGUubWFwKHQsZnVuY3Rpb24oZSl7cmV0dXJuIG8oZSl9KX1mdW5jdGlvbiBvKGUpe3ZhciB0PWUubmFtZXx8ZS5maWxlTmFtZTtyZXR1cm57bmFtZTp5Lmh0bWxFbmNvZGUodCksZXh0ZW5zaW9uOmEodCksc2l6ZTplLnNpemV8fGUuZmlsZVNpemUscmF3RmlsZTplfX1mdW5jdGlvbiBhKGUpe3ZhciB0PWUubWF0Y2goayk7cmV0dXJuIHQ/dFswXTpcIlwifWZ1bmN0aW9uIHMoZSl7dmFyIHQ9ZS5sYXN0SW5kZXhPZihcIlxcXFxcIik7cmV0dXJuLTEhPXQ/ZS5zdWJzdHIodCsxKTplfWZ1bmN0aW9uIGwodCxuKXt2YXIgaT15Lmd1aWQoKTtyZXR1cm4gZS5tYXAodCxmdW5jdGlvbihlKXtyZXR1cm4gZS51aWQ9bj95Lmd1aWQoKTppLGV9KX1mdW5jdGlvbiBjKHQsbixpKXt2YXIgcixvO24uX3N1cHBvcnRzUmVtb3ZlKCkmJihyPXQuZGF0YShcImZpbGVOYW1lc1wiKSxvPWUubWFwKHIsZnVuY3Rpb24oZSl7cmV0dXJuIGUubmFtZX0pLG4uX3N1Ym1pdFJlbW92ZShvLGksZnVuY3Rpb24oZSxpLG8pe24uX3JlbW92ZUZpbGVFbnRyeSh0KSxuLnRyaWdnZXIoVCx7b3BlcmF0aW9uOlwicmVtb3ZlXCIsZmlsZXM6cixyZXNwb25zZTplLFhNTEh0dHBSZXF1ZXN0Om99KX0sZnVuY3Rpb24oZSl7bi50cmlnZ2VyKEQse29wZXJhdGlvbjpcInJlbW92ZVwiLGZpbGVzOnIsWE1MSHR0cFJlcXVlc3Q6ZX0pLGIoXCJTZXJ2ZXIgcmVzcG9uc2U6IFwiK2UucmVzcG9uc2VUZXh0KX0pKX1mdW5jdGlvbiBkKHQsbixpKXt2YXIgcj0hMSxvPVwiXCI7dHJ5e289ZS5wYXJzZUpTT04odSh0KSkscj0hMH1jYXRjaChhKXtpKCl9ciYmbihvKX1mdW5jdGlvbiB1KGUpe3JldHVybih0PT09ZXx8XCJcIj09PWUpJiYoZT1cInt9XCIpLGV9ZnVuY3Rpb24gaChlKXtlLnN0b3BQcm9wYWdhdGlvbigpLGUucHJldmVudERlZmF1bHQoKX1mdW5jdGlvbiBwKGUsdCxuLGkpe3ZhciByLG87ZS5vbihcImRyYWdlbnRlclwiK3QsZnVuY3Rpb24oKXtuKCksbz1uZXcgRGF0ZSxyfHwocj1zZXRJbnRlcnZhbChmdW5jdGlvbigpe3ZhciBlPW5ldyBEYXRlLW87ZT4xMDAmJihpKCksY2xlYXJJbnRlcnZhbChyKSxyPW51bGwpfSwxMDApKX0pLm9uKFwiZHJhZ292ZXJcIit0LGZ1bmN0aW9uKCl7bz1uZXcgRGF0ZX0pfWZ1bmN0aW9uIGYoZSl7cmV0dXJuIGUuaXMoXCIuay1maWxlLXByb2dyZXNzLCAuay1maWxlLXN1Y2Nlc3MsIC5rLWZpbGUtZXJyb3JcIil9ZnVuY3Rpb24gZyh0KXtyZXR1cm4gZSh0LnRhcmdldCkuY2xvc2VzdChcIi5rLWZpbGVcIil9ZnVuY3Rpb24gbSgpe3ZhciBuPXt9LGk9ZShcIm1ldGFbbmFtZT1jc3JmLXRva2VuXVwiKS5hdHRyKFwiY29udGVudFwiKSxyPWUoXCJtZXRhW25hbWU9Y3NyZi1wYXJhbV1cIikuYXR0cihcImNvbnRlbnRcIik7cmV0dXJuIGUoXCJpbnB1dFtuYW1lXj0nX19SZXF1ZXN0VmVyaWZpY2F0aW9uVG9rZW4nXVwiKS5lYWNoKGZ1bmN0aW9uKCl7blt0aGlzLm5hbWVdPXRoaXMudmFsdWV9KSxyIT09dCYmaSE9PXQmJihuW3JdPWkpLG59dmFyIHYsXyx5PXdpbmRvdy5rZW5kbyx3PXkudWkuV2lkZ2V0LGI9eS5sb2dUb0NvbnNvbGUsaz0vXFwuKFteXFwuXSspJC8seD1cIi5rZW5kb1VwbG9hZFwiLEM9XCJzZWxlY3RcIixTPVwidXBsb2FkXCIsVD1cInN1Y2Nlc3NcIixEPVwiZXJyb3JcIixBPVwiY29tcGxldGVcIixFPVwiY2FuY2VsXCIsTT1cInByb2dyZXNzXCIsUD1cInJlbW92ZVwiLEk9dy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG8sYT10aGlzO3cuZm4uaW5pdC5jYWxsKGEsdCxuKSxhLm5hbWU9dC5uYW1lLGEubXVsdGlwbGU9YS5vcHRpb25zLm11bHRpcGxlLGEubG9jYWxpemF0aW9uPWEub3B0aW9ucy5sb2NhbGl6YXRpb24saT1hLmVsZW1lbnQsYS53cmFwcGVyPWkuY2xvc2VzdChcIi5rLXVwbG9hZFwiKSwwPT09YS53cmFwcGVyLmxlbmd0aCYmKGEud3JhcHBlcj1hLl93cmFwSW5wdXQoaSkpLGEuX2FjdGl2ZUlucHV0KGkpLGEudG9nZ2xlKGEub3B0aW9ucy5lbmFibGVkKSxyPWEuX25zPXgrXCItXCIreS5ndWlkKCksaS5jbG9zZXN0KFwiZm9ybVwiKS5vbihcInN1Ym1pdFwiK3IsZS5wcm94eShhLl9vblBhcmVudEZvcm1TdWJtaXQsYSkpLm9uKFwicmVzZXRcIityLGUucHJveHkoYS5fb25QYXJlbnRGb3JtUmVzZXQsYSkpLGEub3B0aW9ucy5hc3luYy5zYXZlVXJsPyhhLl9tb2R1bGU9YS5fc3VwcG9ydHNGb3JtRGF0YSgpP25ldyBfKGEpOm5ldyB2KGEpLGEuX2FzeW5jPSEwLG89YS5vcHRpb25zLmZpbGVzLG8ubGVuZ3RoPjAmJmEuX3JlbmRlckluaXRpYWxGaWxlcyhvKSk6YS5fbW9kdWxlPW5ldyB6KGEpLGEuX3N1cHBvcnRzRHJvcCgpJiZhLl9zZXR1cERyb3Bab25lKCksYS53cmFwcGVyLm9uKFwiY2xpY2tcIixcIi5rLXVwbG9hZC1hY3Rpb25cIixlLnByb3h5KGEuX29uRmlsZUFjdGlvbixhKSkub24oXCJjbGlja1wiLFwiLmstdXBsb2FkLXNlbGVjdGVkXCIsZS5wcm94eShhLl9vblVwbG9hZFNlbGVjdGVkLGEpKSxhLmVsZW1lbnQudmFsKCkmJmEuX29uSW5wdXRDaGFuZ2Uoe3RhcmdldDphLmVsZW1lbnR9KX0sZXZlbnRzOltDLFMsVCxELEEsRSxNLFBdLG9wdGlvbnM6e25hbWU6XCJVcGxvYWRcIixlbmFibGVkOiEwLG11bHRpcGxlOiEwLHNob3dGaWxlTGlzdDohMCx0ZW1wbGF0ZTpcIlwiLGZpbGVzOltdLGFzeW5jOntyZW1vdmVWZXJiOlwiUE9TVFwiLGF1dG9VcGxvYWQ6ITAsd2l0aENyZWRlbnRpYWxzOiEwfSxsb2NhbGl6YXRpb246e3NlbGVjdDpcIlNlbGVjdCBmaWxlcy4uLlwiLGNhbmNlbDpcIkNhbmNlbFwiLHJldHJ5OlwiUmV0cnlcIixyZW1vdmU6XCJSZW1vdmVcIix1cGxvYWRTZWxlY3RlZEZpbGVzOlwiVXBsb2FkIGZpbGVzXCIsZHJvcEZpbGVzSGVyZTpcImRyb3AgZmlsZXMgaGVyZSB0byB1cGxvYWRcIixzdGF0dXNVcGxvYWRpbmc6XCJ1cGxvYWRpbmdcIixzdGF0dXNVcGxvYWRlZDpcInVwbG9hZGVkXCIsc3RhdHVzV2FybmluZzpcIndhcm5pbmdcIixzdGF0dXNGYWlsZWQ6XCJmYWlsZWRcIixoZWFkZXJTdGF0dXNVcGxvYWRpbmc6XCJVcGxvYWRpbmcuLi5cIixoZWFkZXJTdGF0dXNVcGxvYWRlZDpcIkRvbmVcIn19LHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudDt3LmZuLnNldE9wdGlvbnMuY2FsbCh0LGUpLHQubXVsdGlwbGU9dC5vcHRpb25zLm11bHRpcGxlLG4uYXR0cihcIm11bHRpcGxlXCIsdC5fc3VwcG9ydHNNdWx0aXBsZSgpP3QubXVsdGlwbGU6ITEpLHQudG9nZ2xlKHQub3B0aW9ucy5lbmFibGVkKX0sZW5hYmxlOmZ1bmN0aW9uKGUpe2U9dD09PWU/ITA6ZSx0aGlzLnRvZ2dsZShlKVxyXG59LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLnRvZ2dsZSghMSl9LHRvZ2dsZTpmdW5jdGlvbihlKXtlPXQ9PT1lP2U6IWUsdGhpcy53cmFwcGVyLnRvZ2dsZUNsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiLGUpLHRoaXMuZWxlbWVudC5wcm9wKFwiZGlzYWJsZWRcIixlKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7ZShkb2N1bWVudCkuYWRkKGUoXCIuay1kcm9wem9uZVwiLHQud3JhcHBlcikpLmFkZCh0LndyYXBwZXIuY2xvc2VzdChcImZvcm1cIikpLm9mZih0Ll9ucyksZSh0LmVsZW1lbnQpLm9mZih4KSx3LmZuLmRlc3Ryb3kuY2FsbCh0KX0sX2FkZElucHV0OmZ1bmN0aW9uKHQpe2lmKHRbMF0ubm9kZVR5cGUpe3ZhciBuPXRoaXMsaT10LmNsb25lKCkudmFsKFwiXCIpO2kuaW5zZXJ0QWZ0ZXIobi5lbGVtZW50KS5kYXRhKFwia2VuZG9VcGxvYWRcIixuKSxlKG4uZWxlbWVudCkuaGlkZSgpLmF0dHIoXCJ0YWJpbmRleFwiLFwiLTFcIikucmVtb3ZlQXR0cihcImlkXCIpLm9mZih4KSxuLl9hY3RpdmVJbnB1dChpKSxuLmVsZW1lbnQuZm9jdXMoKX19LF9hY3RpdmVJbnB1dDpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9bi53cmFwcGVyO24uZWxlbWVudD10LHQuYXR0cihcIm11bHRpcGxlXCIsbi5fc3VwcG9ydHNNdWx0aXBsZSgpP24ubXVsdGlwbGU6ITEpLmF0dHIoXCJhdXRvY29tcGxldGVcIixcIm9mZlwiKS5vbihcImNsaWNrXCIreCxmdW5jdGlvbihlKXtpLmhhc0NsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKSYmZS5wcmV2ZW50RGVmYXVsdCgpfSkub24oXCJmb2N1c1wiK3gsZnVuY3Rpb24oKXtlKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKFwiay1zdGF0ZS1mb2N1c2VkXCIpfSkub24oXCJibHVyXCIreCxmdW5jdGlvbigpe2UodGhpcykucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWZvY3VzZWRcIil9KS5vbihcImNoYW5nZVwiK3gsZS5wcm94eShuLl9vbklucHV0Q2hhbmdlLG4pKS5vbihcImtleWRvd25cIit4LGUucHJveHkobi5fb25JbnB1dEtleURvd24sbikpfSxfb25JbnB1dEtleURvd246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQud3JhcHBlci5maW5kKFwiLmstdXBsb2FkLWFjdGlvbjpmaXJzdFwiKTtlLmtleUNvZGU9PT15LmtleXMuVEFCJiZuLmxlbmd0aD4wJiYoZS5wcmV2ZW50RGVmYXVsdCgpLG4uZm9jdXMoKSl9LF9vbklucHV0Q2hhbmdlOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1lKHQudGFyZ2V0KSxyPWwobi5faW5wdXRGaWxlcyhpKSxuLl9pc0FzeW5jTm9uQmF0Y2goKSksbz1uLnRyaWdnZXIoQyx7ZmlsZXM6cn0pO28/KG4uX2FkZElucHV0KGkpLGkucmVtb3ZlKCkpOm4uX21vZHVsZS5vblNlbGVjdCh7dGFyZ2V0Oml9LHIpfSxfb25Ecm9wOmZ1bmN0aW9uKHQpe3ZhciBuLGk9dC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2ZlcixvPXRoaXMsYT1pLmZpbGVzLHM9bChyKGEpLG8uX2lzQXN5bmNOb25CYXRjaCgpKTtoKHQpLGEubGVuZ3RoPjAmJihuPW8udHJpZ2dlcihDLHtmaWxlczpzfSksbnx8by5fbW9kdWxlLm9uU2VsZWN0KHt0YXJnZXQ6ZShcIi5rLWRyb3B6b25lXCIsby53cmFwcGVyKX0scykpfSxfaXNBc3luY05vbkJhdGNoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FzeW5jJiYhdGhpcy5vcHRpb25zLmFzeW5jLmJhdGNofHwhMX0sX3JlbmRlckluaXRpYWxGaWxlczpmdW5jdGlvbih0KXt2YXIgbixpLHI9dGhpcyxvPTA7Zm9yKHQ9bCh0LCEwKSxvPTA7dC5sZW5ndGg+bztvKyspbj10W29dLGk9ci5fZW5xdWV1ZUZpbGUobi5uYW1lLHtmaWxlTmFtZXM6W25dfSksaS5hZGRDbGFzcyhcImstZmlsZS1zdWNjZXNzXCIpLmRhdGEoXCJmaWxlc1wiLFt0W29dXSksZShcIi5rLXByb2dyZXNzXCIsaSkud2lkdGgoXCIxMDAlXCIpLGUoXCIuay11cGxvYWQtc3RhdHVzXCIsaSkucHJlcGVuZChcIjxzcGFuIGNsYXNzPSdrLXVwbG9hZC1wY3QnPjEwMCU8L3NwYW4+XCIpLHIuX2ZpbGVBY3Rpb24oaSxQKX0sX3ByZXBhcmVUZW1wbGF0ZURhdGE6ZnVuY3Rpb24oZSx0KXt2YXIgbj10LmZpbGVOYW1lcyxpPXt9LHI9MCxvPTA7Zm9yKG89MDtuLmxlbmd0aD5vO28rKylyKz1uW29dLnNpemU7cmV0dXJuIGkubmFtZT1lLGkuc2l6ZT1yLGkuZmlsZXM9dC5maWxlTmFtZXMsaX0sX3ByZXBhcmVEZWZhdWx0RmlsZUVudHJ5VGVtcGxhdGU6ZnVuY3Rpb24odCxuKXt2YXIgaT1cIlwiLHI9ZShcIjxsaSBjbGFzcz0nay1maWxlJz48c3BhbiBjbGFzcz0nay1wcm9ncmVzcyc+PC9zcGFuPjxzcGFuIGNsYXNzPSdrLWljb24nPjwvc3Bhbj48c3BhbiBjbGFzcz0nay1maWxlbmFtZScgdGl0bGU9J1wiK3QrXCInPlwiK3QrXCI8L3NwYW4+PHN0cm9uZyBjbGFzcz0nay11cGxvYWQtc3RhdHVzJz48L3N0cm9uZz48L2xpPlwiKTtyZXR1cm4gMT09bi5maWxlTmFtZXMubGVuZ3RoJiZuLmZpbGVOYW1lc1swXS5leHRlbnNpb24mJihpPW4uZmlsZU5hbWVzWzBdLmV4dGVuc2lvbi5zdWJzdHJpbmcoMSksZShcIi5rLWljb25cIixyKS5hZGRDbGFzcyhcImstaS1cIitpKSkscn0sX2VucXVldWVGaWxlOmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLGE9dGhpcyxzPW4uZmlsZU5hbWVzWzBdLnVpZCxsPWUoXCIuay11cGxvYWQtZmlsZXNcIixhLndyYXBwZXIpLGM9YS5vcHRpb25zLGQ9Yy50ZW1wbGF0ZTtyZXR1cm4gMD09PWwubGVuZ3RoJiYobD1lKFwiPHVsIGNsYXNzPSdrLXVwbG9hZC1maWxlcyBrLXJlc2V0Jz48L3VsPlwiKS5hcHBlbmRUbyhhLndyYXBwZXIpLGEub3B0aW9ucy5zaG93RmlsZUxpc3R8fGwuaGlkZSgpLGEud3JhcHBlci5yZW1vdmVDbGFzcyhcImstdXBsb2FkLWVtcHR5XCIpKSxpPWUoXCIuay1maWxlXCIsbCksZD8obz1hLl9wcmVwYXJlVGVtcGxhdGVEYXRhKHQsbiksZD15LnRlbXBsYXRlKGQpLHI9ZShcIjxsaSBjbGFzcz0nay1maWxlJz5cIitkKG8pK1wiPC9saT5cIiksci5maW5kKFwiLmstdXBsb2FkLWFjdGlvblwiKS5hZGRDbGFzcyhcImstYnV0dG9uIGstYnV0dG9uLWJhcmVcIikpOnI9YS5fcHJlcGFyZURlZmF1bHRGaWxlRW50cnlUZW1wbGF0ZSh0LG4pLHIuYXR0cih5LmF0dHIoXCJ1aWRcIikscykuYXBwZW5kVG8obCkuZGF0YShuKSxhLl9hc3luY3x8ZShcIi5rLXByb2dyZXNzXCIscikud2lkdGgoXCIxMDAlXCIpLCFhLm11bHRpcGxlJiZpLmxlbmd0aD4wJiZhLl9tb2R1bGUub25SZW1vdmUoe3RhcmdldDplKGksYS53cmFwcGVyKX0pLHJ9LF9yZW1vdmVGaWxlRW50cnk6ZnVuY3Rpb24odCl7dmFyIG4saSxyPXRoaXMsbz10LmNsb3Nlc3QoXCIuay11cGxvYWQtZmlsZXNcIik7dC5yZW1vdmUoKSxuPWUoXCIuay1maWxlXCIsbyksaT1lKFwiLmstZmlsZS1zdWNjZXNzLCAuay1maWxlLWVycm9yXCIsbyksaS5sZW5ndGg9PT1uLmxlbmd0aCYmdGhpcy5faGlkZVVwbG9hZEJ1dHRvbigpLDA9PT1uLmxlbmd0aCYmKG8ucmVtb3ZlKCksci53cmFwcGVyLmFkZENsYXNzKFwiay11cGxvYWQtZW1wdHlcIiksci5faGlkZUhlYWRlclVwbG9hZHN0YXR1cygpKX0sX2ZpbGVBY3Rpb246ZnVuY3Rpb24oZSx0KXt2YXIgbj17cmVtb3ZlOlwiay1kZWxldGVcIixjYW5jZWw6XCJrLWNhbmNlbFwiLHJldHJ5Olwiay1yZXRyeVwifSxpPXtyZW1vdmU6XCJrLWktY2xvc2VcIixjYW5jZWw6XCJrLWktY2xvc2VcIixyZXRyeTpcImstaS1yZWZyZXNoXCJ9O24uaGFzT3duUHJvcGVydHkodCkmJih0aGlzLl9jbGVhckZpbGVBY3Rpb24oZSksdGhpcy5vcHRpb25zLnRlbXBsYXRlP2UuZmluZChcIi5rLXVwbG9hZC1hY3Rpb25cIikuYWRkQ2xhc3MoXCJrLWJ1dHRvbiBrLWJ1dHRvbi1iYXJlXCIpLmFwcGVuZChcIjxzcGFuIGNsYXNzPSdrLWljb24gXCIraVt0XStcIiBcIituW3RdK1wiJyB0aXRsZT0nXCIrdGhpcy5sb2NhbGl6YXRpb25bdF0rXCInPjwvc3Bhbj5cIikuc2hvdygpOihlLmZpbmQoXCIuay11cGxvYWQtc3RhdHVzIC5rLXVwbG9hZC1hY3Rpb25cIikucmVtb3ZlKCksZS5maW5kKFwiLmstdXBsb2FkLXN0YXR1c1wiKS5hcHBlbmQodGhpcy5fcmVuZGVyQWN0aW9uKG5bdF0sdGhpcy5sb2NhbGl6YXRpb25bdF0saVt0XSkpKSl9LF9maWxlU3RhdGU6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzLmxvY2FsaXphdGlvbixyPXt1cGxvYWRpbmc6e3RleHQ6aS5zdGF0dXNVcGxvYWRpbmd9LHVwbG9hZGVkOnt0ZXh0Omkuc3RhdHVzVXBsb2FkZWR9LGZhaWxlZDp7dGV4dDppLnN0YXR1c0ZhaWxlZH19LG89cltuXTtvJiZlKFwiLmstaWNvbjpub3QoLmstZGVsZXRlLCAuay1jYW5jZWwsIC5rLXJldHJ5KVwiLHQpLnRleHQoby50ZXh0KX0sX3JlbmRlckFjdGlvbjpmdW5jdGlvbih0LG4saSl7cmV0dXJuIGUoXCJcIiE9PXQ/XCI8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J2stYnV0dG9uIGstYnV0dG9uLWJhcmUgay11cGxvYWQtYWN0aW9uJz48c3BhbiBjbGFzcz0nay1pY29uIFwiK2krXCIgXCIrdCtcIicgdGl0bGU9J1wiK24rXCInPjwvc3Bhbj48L2J1dHRvbj5cIjpcIjxidXR0b24gdHlwZT0nYnV0dG9uJyBjbGFzcz0nay1idXR0b24nPlwiK24rXCI8L2J1dHRvbj5cIil9LF9jbGVhckZpbGVBY3Rpb246ZnVuY3Rpb24odCl7ZShcIi5rLXVwbG9hZC1hY3Rpb25cIix0KS5lbXB0eSgpLmhpZGUoKX0sX29uRmlsZUFjdGlvbjpmdW5jdGlvbih0KXt2YXIgbixpLHIsbyxhPXRoaXM7cmV0dXJuIGEud3JhcHBlci5oYXNDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIil8fChuPWUodC50YXJnZXQpLmNsb3Nlc3QoXCIuay11cGxvYWQtYWN0aW9uXCIpLGk9bi5maW5kKFwiLmstaWNvblwiKSxyPW4uY2xvc2VzdChcIi5rLWZpbGVcIiksbz17ZmlsZXM6ci5kYXRhKFwiZmlsZU5hbWVzXCIpfSxpLmhhc0NsYXNzKFwiay1kZWxldGVcIik/YS50cmlnZ2VyKFAsbyl8fGEuX21vZHVsZS5vblJlbW92ZSh7dGFyZ2V0OmUocixhLndyYXBwZXIpfSxvLmRhdGEpOmkuaGFzQ2xhc3MoXCJrLWNhbmNlbFwiKT8oYS50cmlnZ2VyKEUsbyksYS5fbW9kdWxlLm9uQ2FuY2VsKHt0YXJnZXQ6ZShyLGEud3JhcHBlcil9KSx0aGlzLl9jaGVja0FsbENvbXBsZXRlKCksYS5fdXBkYXRlSGVhZGVyVXBsb2FkU3RhdHVzKCkpOmkuaGFzQ2xhc3MoXCJrLXJldHJ5XCIpJiYoZShcIi5rLXdhcm5pbmdcIixyKS5yZW1vdmUoKSxhLl9tb2R1bGUub25SZXRyeSh7dGFyZ2V0OmUocixhLndyYXBwZXIpfSkpKSwhMX0sX29uVXBsb2FkU2VsZWN0ZWQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS53cmFwcGVyO3JldHVybiB0Lmhhc0NsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKXx8dGhpcy5fbW9kdWxlLm9uU2F2ZVNlbGVjdGVkKCksITF9LF9vbkZpbGVQcm9ncmVzczpmdW5jdGlvbih0LG4pe3ZhciBpO3RoaXMub3B0aW9ucy50ZW1wbGF0ZT9lKFwiLmstcHJvZ3Jlc3NcIix0LnRhcmdldCkud2lkdGgobitcIiVcIik6KGk9ZShcIi5rLXVwbG9hZC1wY3RcIix0LnRhcmdldCksMD09PWkubGVuZ3RoJiZlKFwiLmstdXBsb2FkLXN0YXR1c1wiLHQudGFyZ2V0KS5wcmVwZW5kKFwiPHNwYW4gY2xhc3M9J2stdXBsb2FkLXBjdCc+PC9zcGFuPlwiKSxlKFwiLmstdXBsb2FkLXBjdFwiLHQudGFyZ2V0KS50ZXh0KG4rXCIlXCIpLGUoXCIuay1wcm9ncmVzc1wiLHQudGFyZ2V0KS53aWR0aChuK1wiJVwiKSksdGhpcy50cmlnZ2VyKE0se2ZpbGVzOmcodCkuZGF0YShcImZpbGVOYW1lc1wiKSxwZXJjZW50Q29tcGxldGU6bn0pfSxfb25VcGxvYWRTdWNjZXNzOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1nKGUpO3RoaXMuX2ZpbGVTdGF0ZShpLFwidXBsb2FkZWRcIiksaS5yZW1vdmVDbGFzcyhcImstZmlsZS1wcm9ncmVzc1wiKS5hZGRDbGFzcyhcImstZmlsZS1zdWNjZXNzXCIpLHRoaXMuX3VwZGF0ZUhlYWRlclVwbG9hZFN0YXR1cygpLHRoaXMudHJpZ2dlcihULHtmaWxlczppLmRhdGEoXCJmaWxlTmFtZXNcIikscmVzcG9uc2U6dCxvcGVyYXRpb246XCJ1cGxvYWRcIixYTUxIdHRwUmVxdWVzdDpufSksdGhpcy5fc3VwcG9ydHNSZW1vdmUoKT90aGlzLl9maWxlQWN0aW9uKGksUCk6dGhpcy5fY2xlYXJGaWxlQWN0aW9uKGkpLHRoaXMuX2NoZWNrQWxsQ29tcGxldGUoKX0sX29uVXBsb2FkRXJyb3I6ZnVuY3Rpb24odCxuKXt2YXIgaT1nKHQpLHI9ZShcIi5rLXVwbG9hZC1wY3RcIixpKTt0aGlzLl9maWxlU3RhdGUoaSxcImZhaWxlZFwiKSxpLnJlbW92ZUNsYXNzKFwiay1maWxlLXByb2dyZXNzXCIpLmFkZENsYXNzKFwiay1maWxlLWVycm9yXCIpLGUoXCIuay1wcm9ncmVzc1wiLGkpLndpZHRoKFwiMTAwJVwiKSxyLmxlbmd0aD4wP3IuZW1wdHkoKS5yZW1vdmVDbGFzcyhcImstdXBsb2FkLXBjdFwiKS5hZGRDbGFzcyhcImstaWNvbiBrLXdhcm5pbmdcIik6ZShcIi5rLXVwbG9hZC1zdGF0dXNcIixpKS5wcmVwZW5kKFwiPHNwYW4gY2xhc3M9J2staWNvbiBrLXdhcm5pbmcnPjwvc3Bhbj5cIiksdGhpcy5fdXBkYXRlSGVhZGVyVXBsb2FkU3RhdHVzKCksdGhpcy5fZmlsZUFjdGlvbihpLFwicmV0cnlcIiksdGhpcy50cmlnZ2VyKEQse29wZXJhdGlvbjpcInVwbG9hZFwiLGZpbGVzOmkuZGF0YShcImZpbGVOYW1lc1wiKSxYTUxIdHRwUmVxdWVzdDpufSksYihcIlNlcnZlciByZXNwb25zZTogXCIrbi5yZXNwb25zZVRleHQpLHRoaXMuX2NoZWNrQWxsQ29tcGxldGUoKX0sX3Nob3dVcGxvYWRCdXR0b246ZnVuY3Rpb24oKXt2YXIgdD1lKFwiLmstdXBsb2FkLXNlbGVjdGVkXCIsdGhpcy53cmFwcGVyKTswPT09dC5sZW5ndGgmJih0PXRoaXMuX3JlbmRlckFjdGlvbihcIlwiLHRoaXMubG9jYWxpemF0aW9uLnVwbG9hZFNlbGVjdGVkRmlsZXMpLmFkZENsYXNzKFwiay11cGxvYWQtc2VsZWN0ZWRcIikpLHRoaXMud3JhcHBlci5hcHBlbmQodCl9LF9oaWRlVXBsb2FkQnV0dG9uOmZ1bmN0aW9uKCl7ZShcIi5rLXVwbG9hZC1zZWxlY3RlZFwiLHRoaXMud3JhcHBlcikucmVtb3ZlKCl9LF9zaG93SGVhZGVyVXBsb2FkU3RhdHVzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5sb2NhbGl6YXRpb24sbj1lKFwiLmstZHJvcHpvbmVcIix0aGlzLndyYXBwZXIpLGk9ZShcIi5rLXVwbG9hZC1zdGF0dXMtdG90YWxcIix0aGlzLndyYXBwZXIpOzAhPT1pLmxlbmd0aCYmaS5yZW1vdmUoKSxpPSc8c3Ryb25nIGNsYXNzPVwiay11cGxvYWQtc3RhdHVzIGstdXBsb2FkLXN0YXR1cy10b3RhbFwiPicrdC5oZWFkZXJTdGF0dXNVcGxvYWRpbmcrJzxzcGFuIGNsYXNzPVwiay1pY29uIGstbG9hZGluZ1wiPicrdC5zdGF0dXNVcGxvYWRpbmcrXCI8L3NwYW4+PC9zdHJvbmc+XCIsbi5sZW5ndGg+MD9uLmFwcGVuZChpKTplKFwiLmstdXBsb2FkLWJ1dHRvblwiLHRoaXMud3JhcHBlcikuYWZ0ZXIoaSl9LF91cGRhdGVIZWFkZXJVcGxvYWRTdGF0dXM6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscj10aGlzLG89ci5sb2NhbGl6YXRpb24sYT1lKFwiLmstZmlsZVwiLHIud3JhcHBlcikubm90KFwiLmstZmlsZS1zdWNjZXNzLCAuay1maWxlLWVycm9yXCIpOzA9PT1hLmxlbmd0aCYmKHQ9ZShcIi5rLWZpbGUuay1maWxlLWVycm9yXCIsci53cmFwcGVyKSxuPWUoXCIuay11cGxvYWQtc3RhdHVzLXRvdGFsXCIsci53cmFwcGVyKSxpPWUoXCIuay1pY29uXCIsbikucmVtb3ZlQ2xhc3MoXCJrLWxvYWRpbmdcIikuYWRkQ2xhc3MoMCE9PXQubGVuZ3RoP1wiay13YXJuaW5nXCI6XCJrLWktdGlja1wiKS50ZXh0KDAhPT10Lmxlbmd0aD9vLnN0YXR1c1dhcm5pbmc6by5zdGF0dXNVcGxvYWRlZCksbi50ZXh0KHIubG9jYWxpemF0aW9uLmhlYWRlclN0YXR1c1VwbG9hZGVkKS5hcHBlbmQoaSkpfSxfaGlkZUhlYWRlclVwbG9hZHN0YXR1czpmdW5jdGlvbigpe2UoXCIuay11cGxvYWQtc3RhdHVzLXRvdGFsXCIsdGhpcy53cmFwcGVyKS5yZW1vdmUoKX0sX29uUGFyZW50Rm9ybVN1Ym1pdDpmdW5jdGlvbigpe3ZhciBuLGk9dGhpcyxyPWkuZWxlbWVudDt0IT09dGhpcy5fbW9kdWxlLm9uQWJvcnQmJnRoaXMuX21vZHVsZS5vbkFib3J0KCksci52YWx1ZXx8KG49ZShyKSxuLmF0dHIoXCJkaXNhYmxlZFwiLFwiZGlzYWJsZWRcIiksd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKX0sMCkpfSxfb25QYXJlbnRGb3JtUmVzZXQ6ZnVuY3Rpb24oKXtlKFwiLmstdXBsb2FkLWZpbGVzXCIsdGhpcy53cmFwcGVyKS5yZW1vdmUoKX0sX3N1cHBvcnRzRm9ybURhdGE6ZnVuY3Rpb24oKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgRm9ybURhdGF9LF9zdXBwb3J0c011bHRpcGxlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fdXNlckFnZW50KCkuaW5kZXhPZihcIldpbmRvd3NcIik+LTE7cmV0dXJuISh5LnN1cHBvcnQuYnJvd3Nlci5vcGVyYXx8eS5zdXBwb3J0LmJyb3dzZXIuc2FmYXJpJiZlKX0sX3N1cHBvcnRzRHJvcDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3VzZXJBZ2VudCgpLnRvTG93ZXJDYXNlKCksdD0vY2hyb21lLy50ZXN0KGUpLG49IXQmJi9zYWZhcmkvLnRlc3QoZSksaT1uJiYvd2luZG93cy8udGVzdChlKTtyZXR1cm4haSYmdGhpcy5fc3VwcG9ydHNGb3JtRGF0YSgpJiZ0aGlzLm9wdGlvbnMuYXN5bmMuc2F2ZVVybH0sX3VzZXJBZ2VudDpmdW5jdGlvbigpe3JldHVybiBuYXZpZ2F0b3IudXNlckFnZW50fSxfc2V0dXBEcm9wWm9uZTpmdW5jdGlvbigpe3ZhciB0LG4saT10aGlzO2UoXCIuay11cGxvYWQtYnV0dG9uXCIsdGhpcy53cmFwcGVyKS53cmFwKFwiPGRpdiBjbGFzcz0nay1kcm9wem9uZSc+PC9kaXY+XCIpLHQ9aS5fbnMsbj1lKFwiLmstZHJvcHpvbmVcIixpLndyYXBwZXIpLmFwcGVuZChlKFwiPGVtPlwiK2kubG9jYWxpemF0aW9uLmRyb3BGaWxlc0hlcmUrXCI8L2VtPlwiKSkub24oXCJkcmFnZW50ZXJcIit0LGgpLm9uKFwiZHJhZ292ZXJcIit0LGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX0pLm9uKFwiZHJvcFwiK3QsZS5wcm94eSh0aGlzLl9vbkRyb3AsdGhpcykpLHAobix0LGZ1bmN0aW9uKCl7bi5hZGRDbGFzcyhcImstZHJvcHpvbmUtaG92ZXJlZFwiKX0sZnVuY3Rpb24oKXtuLnJlbW92ZUNsYXNzKFwiay1kcm9wem9uZS1ob3ZlcmVkXCIpfSkscChlKGRvY3VtZW50KSx0LGZ1bmN0aW9uKCl7bi5hZGRDbGFzcyhcImstZHJvcHpvbmUtYWN0aXZlXCIpLG4uY2xvc2VzdChcIi5rLXVwbG9hZFwiKS5yZW1vdmVDbGFzcyhcImstdXBsb2FkLWVtcHR5XCIpfSxmdW5jdGlvbigpe24ucmVtb3ZlQ2xhc3MoXCJrLWRyb3B6b25lLWFjdGl2ZVwiKSwwPT09ZShcImxpLmstZmlsZVwiLG4uY2xvc2VzdChcIi5rLXVwbG9hZFwiKSkubGVuZ3RoJiZuLmNsb3Nlc3QoXCIuay11cGxvYWRcIikuYWRkQ2xhc3MoXCJrLXVwbG9hZC1lbXB0eVwiKX0pfSxfc3VwcG9ydHNSZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMub3B0aW9ucy5hc3luYy5yZW1vdmVVcmx9LF9zdWJtaXRSZW1vdmU6ZnVuY3Rpb24odCxuLGkscil7dmFyIG89dGhpcyxhPW8ub3B0aW9ucy5hc3luYy5yZW1vdmVGaWVsZHx8XCJmaWxlTmFtZXNcIixzPWUuZXh0ZW5kKG4sbSgpKTtzW2FdPXQsalF1ZXJ5LmFqYXgoe3R5cGU6dGhpcy5vcHRpb25zLmFzeW5jLnJlbW92ZVZlcmIsZGF0YVR5cGU6XCJqc29uXCIsZGF0YUZpbHRlcjp1LHVybDp0aGlzLm9wdGlvbnMuYXN5bmMucmVtb3ZlVXJsLHRyYWRpdGlvbmFsOiEwLGRhdGE6cyxzdWNjZXNzOmksZXJyb3I6cn0pfSxfd3JhcElucHV0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnM7cmV0dXJuIGUud3JhcChcIjxkaXYgY2xhc3M9J2std2lkZ2V0IGstdXBsb2FkIGstaGVhZGVyJz48ZGl2IGNsYXNzPSdrLWJ1dHRvbiBrLXVwbG9hZC1idXR0b24nPjwvZGl2PjwvZGl2PlwiKSxuLmFzeW5jLnNhdmVVcmx8fGUuY2xvc2VzdChcIi5rLXVwbG9hZFwiKS5hZGRDbGFzcyhcImstdXBsb2FkLXN5bmNcIiksZS5jbG9zZXN0KFwiLmstdXBsb2FkXCIpLmFkZENsYXNzKFwiay11cGxvYWQtZW1wdHlcIiksZS5jbG9zZXN0KFwiLmstYnV0dG9uXCIpLmFwcGVuZChcIjxzcGFuPlwiK3RoaXMubG9jYWxpemF0aW9uLnNlbGVjdCtcIjwvc3Bhbj5cIiksZS5jbG9zZXN0KFwiLmstdXBsb2FkXCIpfSxfY2hlY2tBbGxDb21wbGV0ZTpmdW5jdGlvbigpezA9PT1lKFwiLmstZmlsZS5rLWZpbGUtcHJvZ3Jlc3NcIix0aGlzLndyYXBwZXIpLmxlbmd0aCYmdGhpcy50cmlnZ2VyKEEpfSxfaW5wdXRGaWxlczpmdW5jdGlvbihlKXtyZXR1cm4gaShlKX19KSx6PWZ1bmN0aW9uKGUpe3RoaXMubmFtZT1cInN5bmNVcGxvYWRNb2R1bGVcIix0aGlzLmVsZW1lbnQ9ZS53cmFwcGVyLHRoaXMudXBsb2FkPWUsdGhpcy5lbGVtZW50LmNsb3Nlc3QoXCJmb3JtXCIpLmF0dHIoXCJlbmN0eXBlXCIsXCJtdWx0aXBhcnQvZm9ybS1kYXRhXCIpLmF0dHIoXCJlbmNvZGluZ1wiLFwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiKX07ei5wcm90b3R5cGU9e29uU2VsZWN0OmZ1bmN0aW9uKHQsaSl7dmFyIHIsbz10aGlzLnVwbG9hZCxhPWUodC50YXJnZXQpO28uX2FkZElucHV0KGEpLHI9by5fZW5xdWV1ZUZpbGUobihhKSx7cmVsYXRlZElucHV0OmEsZmlsZU5hbWVzOml9KSxvLl9maWxlQWN0aW9uKHIsUCl9LG9uUmVtb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0PWcoZSk7dC5kYXRhKFwicmVsYXRlZElucHV0XCIpLnJlbW92ZSgpLHRoaXMudXBsb2FkLl9yZW1vdmVGaWxlRW50cnkodCl9fSx2PWZ1bmN0aW9uKGUpe3RoaXMubmFtZT1cImlmcmFtZVVwbG9hZE1vZHVsZVwiLHRoaXMuZWxlbWVudD1lLndyYXBwZXIsdGhpcy51cGxvYWQ9ZSx0aGlzLmlmcmFtZXM9W119LEkuX2ZyYW1lSWQ9MCx2LnByb3RvdHlwZT17b25TZWxlY3Q6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzLnVwbG9hZCxyPWUodC50YXJnZXQpLG89dGhpcy5wcmVwYXJlVXBsb2FkKHIsbik7aS5vcHRpb25zLmFzeW5jLmF1dG9VcGxvYWQ/dGhpcy5wZXJmb3JtVXBsb2FkKG8pOihpLl9zdXBwb3J0c1JlbW92ZSgpJiZ0aGlzLnVwbG9hZC5fZmlsZUFjdGlvbihvLFApLGkuX3Nob3dVcGxvYWRCdXR0b24oKSl9LHByZXBhcmVVcGxvYWQ6ZnVuY3Rpb24odCxpKXt2YXIgcixvLGEscz10aGlzLnVwbG9hZCxsPWUocy5lbGVtZW50KSxjPXMub3B0aW9ucy5hc3luYy5zYXZlRmllbGR8fHQuYXR0cihcIm5hbWVcIik7cmV0dXJuIHMuX2FkZElucHV0KHQpLHQuYXR0cihcIm5hbWVcIixjKSxyPXRoaXMuY3JlYXRlRnJhbWUocy5uYW1lK1wiX1wiK0kuX2ZyYW1lSWQrKyksdGhpcy5yZWdpc3RlckZyYW1lKHIpLG89dGhpcy5jcmVhdGVGb3JtKHMub3B0aW9ucy5hc3luYy5zYXZlVXJsLHIuYXR0cihcIm5hbWVcIikpLmFwcGVuZChsKSxhPXMuX2VucXVldWVGaWxlKG4odCkse2ZyYW1lOnIscmVsYXRlZElucHV0OmwsZmlsZU5hbWVzOml9KSxyLmRhdGEoe2Zvcm06byxmaWxlOmF9KSxhfSxwZXJmb3JtVXBsb2FkOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvPXtmaWxlczp0LmRhdGEoXCJmaWxlTmFtZXNcIil9LGE9dC5kYXRhKFwiZnJhbWVcIikscz10aGlzLnVwbG9hZDtpZihzLnRyaWdnZXIoUyxvKSlzLl9yZW1vdmVGaWxlRW50cnkoYS5kYXRhKFwiZmlsZVwiKSksdGhpcy5jbGVhbnVwRnJhbWUoYSksdGhpcy51bnJlZ2lzdGVyRnJhbWUoYSk7ZWxzZXtzLl9oaWRlVXBsb2FkQnV0dG9uKCkscy5fc2hvd0hlYWRlclVwbG9hZFN0YXR1cygpLGEuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSksbj1hLmRhdGEoXCJmb3JtXCIpLmF0dHIoXCJhY3Rpb25cIixzLm9wdGlvbnMuYXN5bmMuc2F2ZVVybCkuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSksby5kYXRhPWUuZXh0ZW5kKHt9LG8uZGF0YSxtKCkpO2ZvcihpIGluIG8uZGF0YSlyPW4uZmluZChcImlucHV0W25hbWU9J1wiK2krXCInXVwiKSwwPT09ci5sZW5ndGgmJihyPWUoXCI8aW5wdXQ+XCIse3R5cGU6XCJoaWRkZW5cIixuYW1lOml9KS5wcmVwZW5kVG8obikpLHIudmFsKG8uZGF0YVtpXSk7cy5fZmlsZUFjdGlvbih0LEUpLHMuX2ZpbGVTdGF0ZSh0LFwidXBsb2FkaW5nXCIpLGUodCkucmVtb3ZlQ2xhc3MoXCJrLWZpbGUtZXJyb3JcIikuYWRkQ2xhc3MoXCJrLWZpbGUtcHJvZ3Jlc3NcIiksYS5vbmUoXCJsb2FkXCIsZS5wcm94eSh0aGlzLm9uSWZyYW1lTG9hZCx0aGlzKSksblswXS5zdWJtaXQoKX19LG9uU2F2ZVNlbGVjdGVkOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztlKFwiLmstZmlsZVwiLHRoaXMuZWxlbWVudCkuZWFjaChmdW5jdGlvbigpe3ZhciBuPWUodGhpcyksaT1mKG4pO2l8fHQucGVyZm9ybVVwbG9hZChuKX0pfSxvbklmcmFtZUxvYWQ6ZnVuY3Rpb24odCl7dmFyIG4saT1lKHQudGFyZ2V0KTt0cnl7bj1pLmNvbnRlbnRzKCkudGV4dCgpfWNhdGNoKHIpe249XCJFcnJvciB0cnlpbmcgdG8gZ2V0IHNlcnZlciByZXNwb25zZTogXCIrcn10aGlzLnByb2Nlc3NSZXNwb25zZShpLG4pfSxwcm9jZXNzUmVzcG9uc2U6ZnVuY3Rpb24odCxuKXt2YXIgaT10LmRhdGEoXCJmaWxlXCIpLHI9dGhpcyxvPXtyZXNwb25zZVRleHQ6bn07ZChuLGZ1bmN0aW9uKG4pe2UuZXh0ZW5kKG8se3N0YXR1c1RleHQ6XCJPS1wiLHN0YXR1czpcIjIwMFwifSksci51cGxvYWQuX29uRmlsZVByb2dyZXNzKHt0YXJnZXQ6ZShpLHIudXBsb2FkLndyYXBwZXIpfSwxMDApLHIudXBsb2FkLl9vblVwbG9hZFN1Y2Nlc3Moe3RhcmdldDplKGksci51cGxvYWQud3JhcHBlcil9LG4sbyksci5jbGVhbnVwRnJhbWUodCksci51bnJlZ2lzdGVyRnJhbWUodCl9LGZ1bmN0aW9uKCl7ZS5leHRlbmQobyx7c3RhdHVzVGV4dDpcImVycm9yXCIsc3RhdHVzOlwiNTAwXCJ9KSxyLnVwbG9hZC5fb25VcGxvYWRFcnJvcih7dGFyZ2V0OmUoaSxyLnVwbG9hZC53cmFwcGVyKX0sbyl9KX0sb25DYW5jZWw6ZnVuY3Rpb24odCl7dmFyIG49ZSh0LnRhcmdldCkuZGF0YShcImZyYW1lXCIpO3RoaXMuc3RvcEZyYW1lU3VibWl0KG4pLHRoaXMuY2xlYW51cEZyYW1lKG4pLHRoaXMudW5yZWdpc3RlckZyYW1lKG4pLHRoaXMudXBsb2FkLl9yZW1vdmVGaWxlRW50cnkobi5kYXRhKFwiZmlsZVwiKSl9LG9uUmV0cnk6ZnVuY3Rpb24oZSl7dmFyIHQ9ZyhlKTt0aGlzLnBlcmZvcm1VcGxvYWQodCl9LG9uUmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZyhlKSxpPW4uZGF0YShcImZyYW1lXCIpO2k/KHRoaXMudW5yZWdpc3RlckZyYW1lKGkpLHRoaXMudXBsb2FkLl9yZW1vdmVGaWxlRW50cnkobiksdGhpcy5jbGVhbnVwRnJhbWUoaSkpOmMobix0aGlzLnVwbG9hZCx0KX0sb25BYm9ydDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZWxlbWVudCxuPXRoaXM7ZS5lYWNoKHRoaXMuaWZyYW1lcyxmdW5jdGlvbigpe2UoXCJpbnB1dFwiLHRoaXMuZGF0YShcImZvcm1cIikpLmFwcGVuZFRvKHQpLG4uc3RvcEZyYW1lU3VibWl0KHRoaXNbMF0pLHRoaXMuZGF0YShcImZvcm1cIikucmVtb3ZlKCksdGhpcy5yZW1vdmUoKX0pLHRoaXMuaWZyYW1lcz1bXX0sY3JlYXRlRnJhbWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUoXCI8aWZyYW1lIG5hbWU9J1wiK3QrXCInIGlkPSdcIit0K1wiJyBzdHlsZT0nZGlzcGxheTpub25lOycgLz5cIil9LGNyZWF0ZUZvcm06ZnVuY3Rpb24odCxuKXtyZXR1cm4gZShcIjxmb3JtIGVuY3R5cGU9J211bHRpcGFydC9mb3JtLWRhdGEnIG1ldGhvZD0nUE9TVCcgYWN0aW9uPSdcIit0K1wiJyB0YXJnZXQ9J1wiK24rXCInLz5cIil9LHN0b3BGcmFtZVN1Ym1pdDpmdW5jdGlvbihlKXt0IT09ZS5zdG9wP2Uuc3RvcCgpOmUuZG9jdW1lbnQmJmUuZG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJTdG9wXCIpfSxyZWdpc3RlckZyYW1lOmZ1bmN0aW9uKGUpe3RoaXMuaWZyYW1lcy5wdXNoKGUpfSx1bnJlZ2lzdGVyRnJhbWU6ZnVuY3Rpb24odCl7dGhpcy5pZnJhbWVzPWUuZ3JlcCh0aGlzLmlmcmFtZXMsZnVuY3Rpb24oZSl7cmV0dXJuIGUuYXR0cihcIm5hbWVcIikhPXQuYXR0cihcIm5hbWVcIil9KX0sY2xlYW51cEZyYW1lOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZGF0YShcImZvcm1cIik7ZS5kYXRhKFwiZmlsZVwiKS5kYXRhKFwiZnJhbWVcIixudWxsKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5yZW1vdmUoKSxlLnJlbW92ZSgpfSwxKX19LF89ZnVuY3Rpb24oZSl7dGhpcy5uYW1lPVwiZm9ybURhdGFVcGxvYWRNb2R1bGVcIix0aGlzLmVsZW1lbnQ9ZS53cmFwcGVyLHRoaXMudXBsb2FkPWV9LF8ucHJvdG90eXBlPXtvblNlbGVjdDpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXMudXBsb2FkLHI9dGhpcyxvPWUodC50YXJnZXQpLGE9dGhpcy5wcmVwYXJlVXBsb2FkKG8sbik7ZS5lYWNoKGEsZnVuY3Rpb24oKXtpLm9wdGlvbnMuYXN5bmMuYXV0b1VwbG9hZD9yLnBlcmZvcm1VcGxvYWQodGhpcyk6KGkuX3N1cHBvcnRzUmVtb3ZlKCkmJmkuX2ZpbGVBY3Rpb24odGhpcyxQKSxpLl9zaG93VXBsb2FkQnV0dG9uKCkpfSl9LHByZXBhcmVVcGxvYWQ6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzLmVucXVldWVGaWxlcyhuKTtyZXR1cm4gdC5pcyhcImlucHV0XCIpJiYoZS5lYWNoKGksZnVuY3Rpb24oKXtlKHRoaXMpLmRhdGEoXCJyZWxhdGVkSW5wdXRcIix0KX0pLHQuZGF0YShcInJlbGF0ZWRGaWxlRW50cmllc1wiLGkpLHRoaXMudXBsb2FkLl9hZGRJbnB1dCh0KSksaX0sZW5xdWV1ZUZpbGVzOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvLGE9dGhpcy51cGxvYWQscz10Lmxlbmd0aCxsPVtdO2lmKGEub3B0aW9ucy5hc3luYy5iYXRjaD09PSEwKW49ZS5tYXAodCxmdW5jdGlvbihlKXtyZXR1cm4gZS5uYW1lfSkuam9pbihcIiwgXCIpLG89YS5fZW5xdWV1ZUZpbGUobix7ZmlsZU5hbWVzOnR9KSxvLmRhdGEoXCJmaWxlc1wiLHQpLGwucHVzaChvKTtlbHNlIGZvcihpPTA7cz5pO2krKylyPXRbaV0sbj1yLm5hbWUsbz1hLl9lbnF1ZXVlRmlsZShuLHtmaWxlTmFtZXM6W3JdfSksby5kYXRhKFwiZmlsZXNcIixbcl0pLGwucHVzaChvKTtyZXR1cm4gbH0scGVyZm9ybVVwbG9hZDpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXMudXBsb2FkLHI9dGhpcy5jcmVhdGVGb3JtRGF0YSgpLG89dGhpcy5jcmVhdGVYSFIoKSxhPXtmaWxlczp0LmRhdGEoXCJmaWxlTmFtZXNcIiksWE1MSHR0cFJlcXVlc3Q6b307aWYoaS50cmlnZ2VyKFMsYSkpdGhpcy5yZW1vdmVGaWxlRW50cnkodCk7ZWxzZXtpLl9maWxlQWN0aW9uKHQsRSksaS5faGlkZVVwbG9hZEJ1dHRvbigpLGkuX3Nob3dIZWFkZXJVcGxvYWRTdGF0dXMoKSxhLmRhdGE9ZS5leHRlbmQoe30sYS5kYXRhLG0oKSk7Zm9yKG4gaW4gYS5kYXRhKXIuYXBwZW5kKG4sYS5kYXRhW25dKTt0aGlzLnBvcHVsYXRlRm9ybURhdGEocix0LmRhdGEoXCJmaWxlc1wiKSksaS5fZmlsZVN0YXRlKHQsXCJ1cGxvYWRpbmdcIiksZSh0KS5yZW1vdmVDbGFzcyhcImstZmlsZS1lcnJvclwiKS5hZGRDbGFzcyhcImstZmlsZS1wcm9ncmVzc1wiKSx0aGlzLnBvc3RGb3JtRGF0YShpLm9wdGlvbnMuYXN5bmMuc2F2ZVVybCxyLHQsbyl9fSxvblNhdmVTZWxlY3RlZDpmdW5jdGlvbigpe3ZhciB0PXRoaXM7ZShcIi5rLWZpbGVcIix0aGlzLmVsZW1lbnQpLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1lKHRoaXMpLGk9ZihuKTtpfHx0LnBlcmZvcm1VcGxvYWQobil9KX0sb25DYW5jZWw6ZnVuY3Rpb24oZSl7dmFyIHQ9ZyhlKTt0aGlzLnN0b3BVcGxvYWRSZXF1ZXN0KHQpLHRoaXMucmVtb3ZlRmlsZUVudHJ5KHQpfSxvblJldHJ5OmZ1bmN0aW9uKGUpe3ZhciB0PWcoZSk7dGhpcy5wZXJmb3JtVXBsb2FkKHQpfSxvblJlbW92ZTpmdW5jdGlvbihlLHQpe3ZhciBuPWcoZSk7bi5oYXNDbGFzcyhcImstZmlsZS1zdWNjZXNzXCIpP2Mobix0aGlzLnVwbG9hZCx0KTp0aGlzLnJlbW92ZUZpbGVFbnRyeShuKX0sY3JlYXRlWEhSOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH0scG9zdEZvcm1EYXRhOmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByPXRoaXM7bi5kYXRhKFwicmVxdWVzdFwiLGkpLGkuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixmdW5jdGlvbihlKXtyLm9uUmVxdWVzdFN1Y2Nlc3MuY2FsbChyLGUsbil9LCExKSxpLmFkZEV2ZW50TGlzdGVuZXIoRCxmdW5jdGlvbihlKXtyLm9uUmVxdWVzdEVycm9yLmNhbGwocixlLG4pfSwhMSksaS51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsZnVuY3Rpb24oZSl7ci5vblJlcXVlc3RQcm9ncmVzcy5jYWxsKHIsZSxuKX0sITEpLGkub3BlbihcIlBPU1RcIixlLCEwKSxpLndpdGhDcmVkZW50aWFscz10aGlzLnVwbG9hZC5vcHRpb25zLmFzeW5jLndpdGhDcmVkZW50aWFscyxpLnNlbmQodCl9LGNyZWF0ZUZvcm1EYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBGb3JtRGF0YX0scG9wdWxhdGVGb3JtRGF0YTpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcy51cGxvYWQscj10Lmxlbmd0aDtmb3Iobj0wO3I+bjtuKyspZS5hcHBlbmQoaS5vcHRpb25zLmFzeW5jLnNhdmVGaWVsZHx8aS5uYW1lLHRbbl0ucmF3RmlsZSk7cmV0dXJuIGV9LG9uUmVxdWVzdFN1Y2Nlc3M6ZnVuY3Rpb24odCxuKXtmdW5jdGlvbiBpKCl7by51cGxvYWQuX29uVXBsb2FkRXJyb3Ioe3RhcmdldDplKG4sby51cGxvYWQud3JhcHBlcil9LHIpfXZhciByPXQudGFyZ2V0LG89dGhpcztyLnN0YXR1cz49MjAwJiYyOTk+PXIuc3RhdHVzP2Qoci5yZXNwb25zZVRleHQsZnVuY3Rpb24odCl7by51cGxvYWQuX29uRmlsZVByb2dyZXNzKHt0YXJnZXQ6ZShuLG8udXBsb2FkLndyYXBwZXIpfSwxMDApLG8udXBsb2FkLl9vblVwbG9hZFN1Y2Nlc3Moe3RhcmdldDplKG4sby51cGxvYWQud3JhcHBlcil9LHQsciksby5jbGVhbnVwRmlsZUVudHJ5KG4pfSxpKTppKCl9LG9uUmVxdWVzdEVycm9yOmZ1bmN0aW9uKHQsbil7dmFyIGk9dC50YXJnZXQ7dGhpcy51cGxvYWQuX29uVXBsb2FkRXJyb3Ioe3RhcmdldDplKG4sdGhpcy51cGxvYWQud3JhcHBlcil9LGkpfSxjbGVhbnVwRmlsZUVudHJ5OmZ1bmN0aW9uKHQpe3ZhciBuPXQuZGF0YShcInJlbGF0ZWRJbnB1dFwiKSxpPSEwO24mJihlLmVhY2gobi5kYXRhKFwicmVsYXRlZEZpbGVFbnRyaWVzXCIpfHxbXSxmdW5jdGlvbigpe3RoaXMucGFyZW50KCkubGVuZ3RoPjAmJnRoaXNbMF0hPXRbMF0mJihpPWkmJnRoaXMuaGFzQ2xhc3MoXCJrLWZpbGUtc3VjY2Vzc1wiKSl9KSxpJiZuLnJlbW92ZSgpKX0scmVtb3ZlRmlsZUVudHJ5OmZ1bmN0aW9uKGUpe3RoaXMuY2xlYW51cEZpbGVFbnRyeShlKSx0aGlzLnVwbG9hZC5fcmVtb3ZlRmlsZUVudHJ5KGUpfSxvblJlcXVlc3RQcm9ncmVzczpmdW5jdGlvbih0LG4pe3ZhciBpPU1hdGgucm91bmQoMTAwKnQubG9hZGVkL3QudG90YWwpO3RoaXMudXBsb2FkLl9vbkZpbGVQcm9ncmVzcyh7dGFyZ2V0OmUobix0aGlzLnVwbG9hZC53cmFwcGVyKX0saSl9LHN0b3BVcGxvYWRSZXF1ZXN0OmZ1bmN0aW9uKGUpe2UuZGF0YShcInJlcXVlc3RcIikuYWJvcnQoKX19LHkudWkucGx1Z2luKEkpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSx0LG4pe3ZhciBpLHI7ZS5vbihcImRyYWdlbnRlclwiK3gsZnVuY3Rpb24oKXt0KCkscj1uZXcgRGF0ZSxpfHwoaT1zZXRJbnRlcnZhbChmdW5jdGlvbigpe3ZhciBlPW5ldyBEYXRlLXI7ZT4xMDAmJihuKCksY2xlYXJJbnRlcnZhbChpKSxpPW51bGwpfSwxMDApKX0pLm9uKFwiZHJhZ292ZXJcIit4LGZ1bmN0aW9uKCl7cj1uZXcgRGF0ZX0pfWZ1bmN0aW9uIGkoZSxuKXtyZXR1cm4gZSE9PXQmJmUubWF0Y2goL1xcLyQvKXx8KGU9KGV8fFwiXCIpK1wiL1wiKSxlK259ZnVuY3Rpb24gcihlKXtpZighZSlyZXR1cm5cIlwiO3ZhciB0PVwiIGJ5dGVzXCI7cmV0dXJuIGU+PTEwNzM3NDE4MjQ/KHQ9XCIgR0JcIixlLz0xMDczNzQxODI0KTplPj0xMDQ4NTc2Pyh0PVwiIE1CXCIsZS89MTA0ODU3Nik6ZT49MTAyNCYmKHQ9XCIgS0JcIixlLz0xMDI0KSxNYXRoLnJvdW5kKDEwMCplKS8xMDArdH1mdW5jdGlvbiBvKGUsdCl7dmFyIG49ZVt0XTtyZXR1cm4gaChuKT9uLmZyb218fG4uZmllbGR8fHQ6bn12YXIgYSxzLGwsYyxkPXdpbmRvdy5rZW5kbyx1PWQudWkuV2lkZ2V0LGg9ZS5pc1BsYWluT2JqZWN0LHA9ZS5wcm94eSxmPWUuZXh0ZW5kLGc9ZC5zdXBwb3J0LnBsYWNlaG9sZGVyLG09ZC5zdXBwb3J0LmJyb3dzZXIsdj1kLmlzRnVuY3Rpb24sXz0vKF5cXC98XFwvJCkvZyx5PVwiY2hhbmdlXCIsdz1cImFwcGx5XCIsYj1cImVycm9yXCIsaz1cImNsaWNrXCIseD1cIi5rZW5kb0ZpbGVCcm93c2VyXCIsQz1cIi5rZW5kb0JyZWFkY3J1bWJzXCIsUz1cIi5rZW5kb1NlYXJjaEJveFwiLFQ9XCJuYW1lXCIsRD1cInNpemVcIixBPVwidHlwZVwiLEU9e2ZpZWxkOkEsZGlyOlwiYXNjXCJ9LE09ZC50ZW1wbGF0ZSgnPGxpIGNsYXNzPVwiay10aWxlLWVtcHR5XCI+PHN0cm9uZz4ke3RleHR9PC9zdHJvbmc+PC9saT4nKSxQPSc8ZGl2IGNsYXNzPVwiay13aWRnZXQgay1maWxlYnJvd3Nlci10b29sYmFyIGstaGVhZGVyIGstZmxvYXR3cmFwXCI+PGRpdiBjbGFzcz1cImstdG9vbGJhci13cmFwXCI+IyBpZiAoc2hvd1VwbG9hZCkgeyAjIDxkaXYgY2xhc3M9XCJrLXdpZGdldCBrLXVwbG9hZFwiPjxkaXYgY2xhc3M9XCJrLWJ1dHRvbiBrLWJ1dHRvbi1pY29udGV4dCBrLXVwbG9hZC1idXR0b25cIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWFkZFwiPjwvc3Bhbj4jPW1lc3NhZ2VzLnVwbG9hZEZpbGUjPGlucHV0IHR5cGU9XCJmaWxlXCIgbmFtZT1cImZpbGVcIiAvPjwvZGl2PjwvZGl2PiMgfSAjIyBpZiAoc2hvd0NyZWF0ZSkgeyAjPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJrLWJ1dHRvbiBrLWJ1dHRvbi1pY29uXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1hZGRmb2xkZXJcIiAvPjwvYnV0dG9uPiMgfSAjIyBpZiAoc2hvd0RlbGV0ZSkgeyAjPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJrLWJ1dHRvbiBrLWJ1dHRvbi1pY29uIGstc3RhdGUtZGlzYWJsZWRcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWRlbGV0ZVwiIC8+PC9idXR0b24+Jm5ic3A7IyB9ICM8L2Rpdj48ZGl2IGNsYXNzPVwiay10aWxlcy1hcnJhbmdlXCI+PGxhYmVsPiM9bWVzc2FnZXMub3JkZXJCeSM6IDxzZWxlY3QgLz48L2xhYmVsPjwvYT48L2Rpdj48L2Rpdj4nO2YoITAsZC5kYXRhLHtzY2hlbWFzOntmaWxlYnJvd3Nlcjp7ZGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gZS5pdGVtc3x8ZXx8W119LG1vZGVsOntpZDpcIm5hbWVcIixmaWVsZHM6e25hbWU6XCJuYW1lXCIsc2l6ZTpcInNpemVcIix0eXBlOlwidHlwZVwifX19fX0pLGYoITAsZC5kYXRhLHt0cmFuc3BvcnRzOntmaWxlYnJvd3NlcjpkLmRhdGEuUmVtb3RlVHJhbnNwb3J0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0KXtkLmRhdGEuUmVtb3RlVHJhbnNwb3J0LmZuLmluaXQuY2FsbCh0aGlzLGUuZXh0ZW5kKCEwLHt9LHRoaXMub3B0aW9ucyx0KSl9LF9jYWxsOmZ1bmN0aW9uKHQsbil7bi5kYXRhPWUuZXh0ZW5kKHt9LG4uZGF0YSx7cGF0aDp0aGlzLm9wdGlvbnMucGF0aCgpfSksdih0aGlzLm9wdGlvbnNbdF0pP3RoaXMub3B0aW9uc1t0XS5jYWxsKHRoaXMsbik6ZC5kYXRhLlJlbW90ZVRyYW5zcG9ydC5mblt0XS5jYWxsKHRoaXMsbil9LHJlYWQ6ZnVuY3Rpb24oZSl7dGhpcy5fY2FsbChcInJlYWRcIixlKX0sY3JlYXRlOmZ1bmN0aW9uKGUpe3RoaXMuX2NhbGwoXCJjcmVhdGVcIixlKX0sZGVzdHJveTpmdW5jdGlvbihlKXt0aGlzLl9jYWxsKFwiZGVzdHJveVwiLGUpfSx1cGRhdGU6ZnVuY3Rpb24oKXt9LG9wdGlvbnM6e3JlYWQ6e3R5cGU6XCJQT1NUXCJ9LHVwZGF0ZTp7dHlwZTpcIlBPU1RcIn0sY3JlYXRlOnt0eXBlOlwiUE9TVFwifSxkZXN0cm95Ont0eXBlOlwiUE9TVFwifX19KX19KSxhPW0ubXNpZSYmOD5tLnZlcnNpb24/ZnVuY3Rpb24oZSl7cmV0dXJuIGUub2Zmc2V0VG9wfTpmdW5jdGlvbih0KXtyZXR1cm4gdC5vZmZzZXRUb3AtZSh0KS5oZWlnaHQoKX0scz11LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7dD10fHx7fSx1LmZuLmluaXQuY2FsbChuLGUsdCksbi5lbGVtZW50LmFkZENsYXNzKFwiay1maWxlYnJvd3NlclwiKSxuLmVsZW1lbnQub24oayt4LFwiLmstZmlsZWJyb3dzZXItdG9vbGJhciBidXR0b246bm90KC5rLXN0YXRlLWRpc2FibGVkKTpoYXMoLmstZGVsZXRlKVwiLHAobi5fZGVsZXRlQ2xpY2ssbikpLm9uKGsreCxcIi5rLWZpbGVicm93c2VyLXRvb2xiYXIgYnV0dG9uOm5vdCguay1zdGF0ZS1kaXNhYmxlZCk6aGFzKC5rLWFkZGZvbGRlcilcIixwKG4uX2FkZENsaWNrLG4pKS5vbihcImtleWRvd25cIit4LFwibGkuay1zdGF0ZS1zZWxlY3RlZCBpbnB1dFwiLHAobi5fZGlyZWN0b3J5S2V5RG93bixuKSkub24oXCJibHVyXCIreCxcImxpLmstc3RhdGUtc2VsZWN0ZWQgaW5wdXRcIixwKG4uX2RpcmVjdG9yeUJsdXIsbikpLG4uX2RhdGFTb3VyY2UoKSxuLnJlZnJlc2goKSxuLnBhdGgobi5vcHRpb25zLnBhdGgpfSxvcHRpb25zOntuYW1lOlwiRmlsZUJyb3dzZXJcIixtZXNzYWdlczp7dXBsb2FkRmlsZTpcIlVwbG9hZFwiLG9yZGVyQnk6XCJBcnJhbmdlIGJ5XCIsb3JkZXJCeU5hbWU6XCJOYW1lXCIsb3JkZXJCeVNpemU6XCJTaXplXCIsZGlyZWN0b3J5Tm90Rm91bmQ6XCJBIGRpcmVjdG9yeSB3aXRoIHRoaXMgbmFtZSB3YXMgbm90IGZvdW5kLlwiLGVtcHR5Rm9sZGVyOlwiRW1wdHkgRm9sZGVyXCIsZGVsZXRlRmlsZTonQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSBcInswfVwiPycsaW52YWxpZEZpbGVUeXBlOidUaGUgc2VsZWN0ZWQgZmlsZSBcInswfVwiIGlzIG5vdCB2YWxpZC4gU3VwcG9ydGVkIGZpbGUgdHlwZXMgYXJlIHsxfS4nLG92ZXJ3cml0ZUZpbGU6J0EgZmlsZSB3aXRoIG5hbWUgXCJ7MH1cIiBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgY3VycmVudCBkaXJlY3RvcnkuIERvIHlvdSB3YW50IHRvIG92ZXJ3cml0ZSBpdD8nLGRyb3BGaWxlc0hlcmU6XCJkcm9wIGZpbGUgaGVyZSB0byB1cGxvYWRcIixzZWFyY2g6XCJTZWFyY2hcIn0sdHJhbnNwb3J0Ont9LHBhdGg6XCIvXCIsZmlsZVR5cGVzOlwiKi4qXCJ9LGV2ZW50czpbYix5LHddLGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3UuZm4uZGVzdHJveS5jYWxsKGUpLGUuZGF0YVNvdXJjZS51bmJpbmQoYixlLl9lcnJvckhhbmRsZXIpLGUuZWxlbWVudC5hZGQoZS5saXN0KS5hZGQoZS50b29sYmFyKS5vZmYoeCksZC5kZXN0cm95KGUuZWxlbWVudCl9LHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGUsbj10aGlzLHI9bi5fc2VsZWN0ZWRJdGVtKCksbz1uLm9wdGlvbnMudHJhbnNwb3J0LmZpbGVVcmw7cmV0dXJuIHImJlwiZlwiPT09ci5nZXQoQSk/KGU9aShuLnBhdGgoKSxyLmdldChUKSkucmVwbGFjZShfLFwiXCIpLG8mJihlPXYobyk/byhlKTpkLmZvcm1hdChvLGVuY29kZVVSSUNvbXBvbmVudChlKSkpLGUpOnR9LF9zZWxlY3RlZEl0ZW06ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxpc3RWaWV3LG49ZS5zZWxlY3QoKTtyZXR1cm4gbi5sZW5ndGg/dGhpcy5kYXRhU291cmNlLmdldEJ5VWlkKG4uYXR0cihkLmF0dHIoXCJ1aWRcIikpKTp0fSxfdG9vbGJhcjpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj1kLnRlbXBsYXRlKFApLGk9dC5vcHRpb25zLm1lc3NhZ2VzLHI9W3t0ZXh0Omkub3JkZXJCeU5hbWUsdmFsdWU6XCJuYW1lXCJ9LHt0ZXh0Omkub3JkZXJCeVNpemUsdmFsdWU6XCJzaXplXCJ9XTt0LnRvb2xiYXI9ZShuKHttZXNzYWdlczppLHNob3dVcGxvYWQ6dC5vcHRpb25zLnRyYW5zcG9ydC51cGxvYWRVcmwsc2hvd0NyZWF0ZTp0Lm9wdGlvbnMudHJhbnNwb3J0LmNyZWF0ZSxzaG93RGVsZXRlOnQub3B0aW9ucy50cmFuc3BvcnQuZGVzdHJveX0pKS5hcHBlbmRUbyh0LmVsZW1lbnQpLmZpbmQoXCIuay11cGxvYWQgaW5wdXRcIikua2VuZG9VcGxvYWQoe211bHRpcGxlOiExLGxvY2FsaXphdGlvbjp7ZHJvcEZpbGVzSGVyZTppLmRyb3BGaWxlc0hlcmV9LGFzeW5jOntzYXZlVXJsOnQub3B0aW9ucy50cmFuc3BvcnQudXBsb2FkVXJsLGF1dG9VcGxvYWQ6ITB9LHVwbG9hZDpwKHQuX2ZpbGVVcGxvYWQsdCksZXJyb3I6ZnVuY3Rpb24oZSl7dC5fZXJyb3Ioe3hocjplLlhNTEh0dHBSZXF1ZXN0LHN0YXR1czpcImVycm9yXCJ9KX19KS5lbmQoKSx0LnVwbG9hZD10LnRvb2xiYXIuZmluZChcIi5rLXVwbG9hZCBpbnB1dFwiKS5kYXRhKFwia2VuZG9VcGxvYWRcIiksdC5hcnJhbmdlQnk9dC50b29sYmFyLmZpbmQoXCIuay10aWxlcy1hcnJhbmdlIHNlbGVjdFwiKS5rZW5kb0Ryb3BEb3duTGlzdCh7ZGF0YVNvdXJjZTpyLGRhdGFUZXh0RmllbGQ6XCJ0ZXh0XCIsZGF0YVZhbHVlRmllbGQ6XCJ2YWx1ZVwiLGNoYW5nZTpmdW5jdGlvbigpe3Qub3JkZXJCeSh0aGlzLnZhbHVlKCkpfX0pLmRhdGEoXCJrZW5kb0Ryb3BEb3duTGlzdFwiKSx0Ll9hdHRhY2hEcm9wem9uZUV2ZW50cygpfSxfYXR0YWNoRHJvcHpvbmVFdmVudHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3Qub3B0aW9ucy50cmFuc3BvcnQudXBsb2FkVXJsJiYobihlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCksZS5wcm94eSh0Ll9kcm9wRW50ZXIsdCksZS5wcm94eSh0Ll9kcm9wTGVhdmUsdCkpLHQuX3Njcm9sbEhhbmRsZXI9cCh0Ll9wb3NpdGlvbkRyb3B6b25lLHQpKX0sX2Ryb3BFbnRlcjpmdW5jdGlvbigpe3RoaXMuX3Bvc2l0aW9uRHJvcHpvbmUoKSxlKGRvY3VtZW50KS5vbihcInNjcm9sbFwiK3gsdGhpcy5fc2Nyb2xsSGFuZGxlcil9LF9kcm9wTGVhdmU6ZnVuY3Rpb24oKXt0aGlzLl9yZW1vdmVEcm9wem9uZSgpLGUoZG9jdW1lbnQpLm9mZihcInNjcm9sbFwiK3gsdGhpcy5fc2Nyb2xsSGFuZGxlcil9LF9wb3NpdGlvbkRyb3B6b25lOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZWxlbWVudCxuPXQub2Zmc2V0KCk7ZS50b29sYmFyLmZpbmQoXCIuay1kcm9wem9uZVwiKS5hZGRDbGFzcyhcImstZmlsZWJyb3dzZXItZHJvcHpvbmVcIikub2Zmc2V0KG4pLmNzcyh7d2lkdGg6dFswXS5jbGllbnRXaWR0aCxoZWlnaHQ6dFswXS5jbGllbnRIZWlnaHQsbGluZUhlaWdodDp0WzBdLmNsaWVudEhlaWdodCtcInB4XCJ9KX0sX3JlbW92ZURyb3B6b25lOmZ1bmN0aW9uKCl7dGhpcy50b29sYmFyLmZpbmQoXCIuay1kcm9wem9uZVwiKS5yZW1vdmVDbGFzcyhcImstZmlsZWJyb3dzZXItZHJvcHpvbmVcIikuY3NzKHt3aWR0aDpcIlwiLGhlaWdodDpcIlwiLGxpbmVIZWlnaHQ6XCJcIix0b3A6XCJcIixsZWZ0OlwiXCJ9KX0sX2RlbGV0ZUNsaWNrOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUubGlzdFZpZXcuc2VsZWN0KCksbj1kLmZvcm1hdChlLm9wdGlvbnMubWVzc2FnZXMuZGVsZXRlRmlsZSx0LmZpbmQoXCJzdHJvbmdcIikudGV4dCgpKTt0Lmxlbmd0aCYmZS5fc2hvd01lc3NhZ2UobixcImNvbmZpcm1cIikmJmUubGlzdFZpZXcucmVtb3ZlKHQpfSxfYWRkQ2xpY2s6ZnVuY3Rpb24oKXt0aGlzLmNyZWF0ZURpcmVjdG9yeSgpfSxfZ2V0RmllbGROYW1lOmZ1bmN0aW9uKGUpe3JldHVybiBvKHRoaXMuZGF0YVNvdXJjZS5yZWFkZXIubW9kZWwuZmllbGRzLGUpfSxfZmlsZVVwbG9hZDpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMsaT1uLm9wdGlvbnMscj1pLmZpbGVUeXBlcyxvPVJlZ0V4cCgoXCIoXCIrci5zcGxpdChcIixcIikuam9pbihcIil8KFwiKStcIilcIikucmVwbGFjZSgvXFwqXFwuL2csXCIuKi5cIiksXCJpXCIpLGE9ZS5maWxlc1swXS5uYW1lLHM9VCxsPUQ7by50ZXN0KGEpPyhlLmRhdGE9e3BhdGg6bi5wYXRoKCl9LHQ9bi5fY3JlYXRlRmlsZShhKSx0P24udXBsb2FkLm9uZShcInN1Y2Nlc3NcIixmdW5jdGlvbihlKXt0LnNldChzLGUucmVzcG9uc2Vbbi5fZ2V0RmllbGROYW1lKHMpXSksdC5zZXQobCxlLnJlc3BvbnNlW24uX2dldEZpZWxkTmFtZShsKV0pLG4uX3RpbGVzPW4ubGlzdFZpZXcuaXRlbXMoKS5maWx0ZXIoXCJbXCIrZC5hdHRyKFwidHlwZVwiKStcIj1mXVwiKX0pOmUucHJldmVudERlZmF1bHQoKSk6KGUucHJldmVudERlZmF1bHQoKSxuLl9zaG93TWVzc2FnZShkLmZvcm1hdChpLm1lc3NhZ2VzLmludmFsaWRGaWxlVHlwZSxhLHIpKSl9LF9maW5kRmlsZTpmdW5jdGlvbihlKXt2YXIgdCxuLGkscj10aGlzLmRhdGFTb3VyY2UuZGF0YSgpLG89QSxhPVQ7Zm9yKGU9ZS50b0xvd2VyQ2FzZSgpLHQ9MCxpPXIubGVuZ3RoO2k+dDt0KyspaWYoXCJmXCI9PT1yW3RdLmdldChvKSYmclt0XS5nZXQoYSkudG9Mb3dlckNhc2UoKT09PWUpe249clt0XTticmVha31yZXR1cm4gbn0sX2NyZWF0ZUZpbGU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMscj0wLG89e30sYT1BLHM9aS5kYXRhU291cmNlLnZpZXcoKSxsPWkuX2ZpbmRGaWxlKGUpO2lmKGwmJiFpLl9zaG93TWVzc2FnZShkLmZvcm1hdChpLm9wdGlvbnMubWVzc2FnZXMub3ZlcndyaXRlRmlsZSxlKSxcImNvbmZpcm1cIikpcmV0dXJuIG51bGw7aWYobClyZXR1cm4gbDtmb3IodD0wLG49cy5sZW5ndGg7bj50O3QrKylpZihcImZcIj09PXNbdF0uZ2V0KGEpKXtyPXQ7YnJlYWt9cmV0dXJuIG9bYV09XCJmXCIsb1tUXT1lLG9bRF09MCxpLmRhdGFTb3VyY2UuaW5zZXJ0KCsrcixvKX0sY3JlYXRlRGlyZWN0b3J5OmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMsaT0wLHI9QSxvPVQsYT1uLmRhdGFTb3VyY2UuZGF0YSgpLHM9bi5fbmFtZURpcmVjdG9yeSgpLGw9bmV3IG4uZGF0YVNvdXJjZS5yZWFkZXIubW9kZWw7Zm9yKGU9MCx0PWEubGVuZ3RoO3Q+ZTtlKyspXCJkXCI9PT1hW2VdLmdldChyKSYmKGk9ZSk7bC5zZXQocixcImRcIiksbC5zZXQobyxzKSxuLmxpc3RWaWV3Lm9uZShcImRhdGFCb3VuZFwiLGZ1bmN0aW9uKCl7dmFyIGU9bi5saXN0Vmlldy5pdGVtcygpLmZpbHRlcihcIltcIitkLmF0dHIoXCJ1aWRcIikrXCI9XCIrbC51aWQrXCJdXCIpLHQ9ZS5maW5kKFwiaW5wdXRcIik7ZS5sZW5ndGgmJnRoaXMuZWRpdChlKSx0aGlzLmVsZW1lbnQuc2Nyb2xsVG9wKGUuYXR0cihcIm9mZnNldFRvcFwiKS10aGlzLmVsZW1lbnRbMF0ub2Zmc2V0SGVpZ2h0KSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5zZWxlY3QoKX0pfSkub25lKFwic2F2ZVwiLGZ1bmN0aW9uKGUpe3ZhciB0PWUubW9kZWwuZ2V0KG8pO3Q/ZS5tb2RlbC5zZXQobyxuLl9uYW1lRXhpc3RzKHQsbC51aWQpP24uX25hbWVEaXJlY3RvcnkoKTp0KTplLm1vZGVsLnNldChvLHMpfSksbi5kYXRhU291cmNlLmluc2VydCgrK2ksbCl9LF9kaXJlY3RvcnlLZXlEb3duOmZ1bmN0aW9uKGUpezEzPT1lLmtleUNvZGUmJmUuY3VycmVudFRhcmdldC5ibHVyKCl9LF9kaXJlY3RvcnlCbHVyOmZ1bmN0aW9uKCl7dGhpcy5saXN0Vmlldy5zYXZlKCl9LF9uYW1lRXhpc3RzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMuZGF0YVNvdXJjZS5kYXRhKCksbz1BLGE9VDtmb3Iobj0wLGk9ci5sZW5ndGg7aT5uO24rKylpZihcImRcIj09PXJbbl0uZ2V0KG8pJiZyW25dLmdldChhKS50b0xvd2VyQ2FzZSgpPT09ZS50b0xvd2VyQ2FzZSgpJiZyW25dLnVpZCE9PXQpcmV0dXJuITA7cmV0dXJuITF9LF9uYW1lRGlyZWN0b3J5OmZ1bmN0aW9uKCl7dmFyIHQsbixpLHI9XCJOZXcgZm9sZGVyXCIsbz10aGlzLmRhdGFTb3VyY2UuZGF0YSgpLGE9W10scz1BLGw9VDtmb3Iobj0wLGk9by5sZW5ndGg7aT5uO24rKylcImRcIj09PW9bbl0uZ2V0KHMpJiZvW25dLmdldChsKS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoci50b0xvd2VyQ2FzZSgpKT4tMSYmYS5wdXNoKG9bbl0uZ2V0KGwpKTtpZihlLmluQXJyYXkocixhKT4tMSl7bj0yO2RvIHQ9citcIiAoXCIrbitcIilcIixuKys7d2hpbGUoZS5pbkFycmF5KHQsYSk+LTEpO3I9dH1yZXR1cm4gcn0sb3JkZXJCeTpmdW5jdGlvbihlKXt0aGlzLmRhdGFTb3VyY2Uuc29ydChbe2ZpZWxkOkEsZGlyOlwiYXNjXCJ9LHtmaWVsZDplLGRpcjpcImFzY1wifV0pfSxzZWFyY2g6ZnVuY3Rpb24oZSl7dGhpcy5kYXRhU291cmNlLmZpbHRlcih7ZmllbGQ6VCxvcGVyYXRvcjpcImNvbnRhaW5zXCIsdmFsdWU6ZX0pfSxfY29udGVudDpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5saXN0PWUoJzx1bCBjbGFzcz1cImstcmVzZXQgay1mbG9hdHMgay10aWxlc1wiIC8+JykuYXBwZW5kVG8odC5lbGVtZW50KS5vbihcImRibGNsaWNrXCIreCxcImxpXCIscCh0Ll9kYmxDbGljayx0KSksdC5saXN0Vmlldz1uZXcgZC51aS5MaXN0Vmlldyh0Lmxpc3Qse2RhdGFTb3VyY2U6dC5kYXRhU291cmNlLHRlbXBsYXRlOnQuX2l0ZW1UbXBsKCksZWRpdFRlbXBsYXRlOnQuX2VkaXRUbXBsKCksc2VsZWN0YWJsZTohMCxhdXRvQmluZDohMSxkYXRhQmluZGluZzpmdW5jdGlvbihlKXt0LnRvb2xiYXIuZmluZChcIi5rLWRlbGV0ZVwiKS5wYXJlbnQoKS5hZGRDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIiksKFwicmVtb3ZlXCI9PT1lLmFjdGlvbnx8XCJzeW5jXCI9PT1lLmFjdGlvbikmJmUucHJldmVudERlZmF1bHQoKX0sZGF0YUJvdW5kOmZ1bmN0aW9uKCl7dC5kYXRhU291cmNlLnZpZXcoKS5sZW5ndGg/dC5fdGlsZXM9dGhpcy5pdGVtcygpLmZpbHRlcihcIltcIitkLmF0dHIoXCJ0eXBlXCIpK1wiPWZdXCIpOnRoaXMud3JhcHBlci5hcHBlbmQoTSh7dGV4dDp0Lm9wdGlvbnMubWVzc2FnZXMuZW1wdHlGb2xkZXJ9KSl9LGNoYW5nZTpwKHQuX2xpc3RWaWV3Q2hhbmdlLHQpfSl9LF9kYmxDbGljazpmdW5jdGlvbih0KXt2YXIgbixyPXRoaXMsbz1lKHQuY3VycmVudFRhcmdldCk7by5oYXNDbGFzcyhcImstZWRpdC1pdGVtXCIpJiZyLl9kaXJlY3RvcnlCbHVyKCksby5maWx0ZXIoXCJbXCIrZC5hdHRyKFwidHlwZVwiKStcIj1kXVwiKS5sZW5ndGg/KG49ci5kYXRhU291cmNlLmdldEJ5VWlkKG8uYXR0cihkLmF0dHIoXCJ1aWRcIikpKSxuJiYoci5wYXRoKGkoci5wYXRoKCksbi5nZXQoVCkpKSxyLmJyZWFkY3J1bWJzLnZhbHVlKHIucGF0aCgpKSkpOm8uZmlsdGVyKFwiW1wiK2QuYXR0cihcInR5cGVcIikrXCI9Zl1cIikubGVuZ3RoJiZyLnRyaWdnZXIodyl9LF9saXN0Vmlld0NoYW5nZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3NlbGVjdGVkSXRlbSgpO2UmJih0aGlzLnRvb2xiYXIuZmluZChcIi5rLWRlbGV0ZVwiKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIiksXCJmXCI9PT1lLmdldChBKSYmdGhpcy50cmlnZ2VyKHkpKX0sX2RhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10Lm9wdGlvbnMsaT1uLnRyYW5zcG9ydCxyPWYoe30sRSksbz17ZmllbGQ6VCxkaXI6XCJhc2NcIn0sYT17dHlwZTppLnR5cGV8fFwiZmlsZWJyb3dzZXJcIixzb3J0OltyLG9dfTtoKGkpJiYoaS5wYXRoPXAodC5wYXRoLHQpLGEudHJhbnNwb3J0PWkpLGgobi5zY2hlbWEpP2Euc2NoZW1hPW4uc2NoZW1hOmkudHlwZSYmaChkLmRhdGEuc2NoZW1hc1tpLnR5cGVdKSYmKGU9ZC5kYXRhLnNjaGVtYXNbaS50eXBlXSksdC5kYXRhU291cmNlJiZ0Ll9lcnJvckhhbmRsZXI/dC5kYXRhU291cmNlLnVuYmluZChiLHQuX2Vycm9ySGFuZGxlcik6dC5fZXJyb3JIYW5kbGVyPXAodC5fZXJyb3IsdCksdC5kYXRhU291cmNlPWQuZGF0YS5EYXRhU291cmNlLmNyZWF0ZShhKS5iaW5kKGIsdC5fZXJyb3JIYW5kbGVyKX0sX25hdmlnYXRpb246ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49ZSgnPGRpdiBjbGFzcz1cImstZmxvYXR3cmFwXCI+PGlucHV0Lz48aW5wdXQvPjwvZGl2PicpLmFwcGVuZFRvKHRoaXMuZWxlbWVudCk7dC5icmVhZGNydW1icz1uLmZpbmQoXCJpbnB1dDpmaXJzdFwiKS5rZW5kb0JyZWFkY3J1bWJzKHt2YWx1ZTp0Lm9wdGlvbnMucGF0aCxjaGFuZ2U6ZnVuY3Rpb24oKXt0LnBhdGgodGhpcy52YWx1ZSgpKX19KS5kYXRhKFwia2VuZG9CcmVhZGNydW1ic1wiKSx0LnNlYXJjaEJveD1uLnBhcmVudCgpLmZpbmQoXCJpbnB1dDpsYXN0XCIpLmtlbmRvU2VhcmNoQm94KHtsYWJlbDp0Lm9wdGlvbnMubWVzc2FnZXMuc2VhcmNoLGNoYW5nZTpmdW5jdGlvbigpe3Quc2VhcmNoKHRoaXMudmFsdWUoKSl9fSkuZGF0YShcImtlbmRvU2VhcmNoQm94XCIpfSxfZXJyb3I6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzO24udHJpZ2dlcihiLGUpfHwodD1lLnhoci5zdGF0dXMsXCJlcnJvclwiPT1lLnN0YXR1cz9cIjQwNFwiPT10P24uX3Nob3dNZXNzYWdlKG4ub3B0aW9ucy5tZXNzYWdlcy5kaXJlY3RvcnlOb3RGb3VuZCk6XCIwXCIhPXQmJm4uX3Nob3dNZXNzYWdlKFwiRXJyb3IhIFRoZSByZXF1ZXN0ZWQgVVJMIHJldHVybmVkIFwiK3QrXCIgLSBcIitlLnhoci5zdGF0dXNUZXh0KTpcInRpbWVvdXRcIj09dCYmbi5fc2hvd01lc3NhZ2UoXCJFcnJvciEgU2VydmVyIHRpbWVvdXQuXCIpKX0sX3Nob3dNZXNzYWdlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHdpbmRvd1t0fHxcImFsZXJ0XCJdKGUpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9uYXZpZ2F0aW9uKCksZS5fdG9vbGJhcigpLGUuX2NvbnRlbnQoKX0sX2VkaXRUbXBsOmZ1bmN0aW9uKCl7dmFyIGU9JzxsaSBjbGFzcz1cImstdGlsZSBrLXN0YXRlLXNlbGVjdGVkXCIgJytkLmF0dHIoXCJ1aWRcIikrJz1cIiM9dWlkI1wiICc7cmV0dXJuIGUrPWQuYXR0cihcInR5cGVcIikrJz1cIiR7JytBKyd9XCI+JyxlKz1cIiNpZihcIitBKycgPT0gXCJkXCIpIHsgIycsZSs9JzxkaXYgY2xhc3M9XCJrLXRodW1iXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1mb2xkZXJcIj48L3NwYW4+PC9kaXY+JyxlKz1cIiN9ZWxzZXsjXCIsZSs9JzxkaXYgY2xhc3M9XCJrLXRodW1iXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1sb2FkaW5nXCI+PC9zcGFuPjwvZGl2PicsZSs9XCIjfSNcIixlKz1cIiNpZihcIitBKycgPT0gXCJkXCIpIHsgIycsZSs9JzxpbnB1dCBjbGFzcz1cImstaW5wdXRcIiAnK2QuYXR0cihcImJpbmRcIikrJz1cInZhbHVlOicrVCsnXCIvPicsZSs9XCIjfSNcIixlKz1cIjwvbGk+XCIscChkLnRlbXBsYXRlKGUpLHtzaXplRm9ybWF0dGVyOnJ9KX0sX2l0ZW1UbXBsOmZ1bmN0aW9uKCl7dmFyIGU9JzxsaSBjbGFzcz1cImstdGlsZVwiICcrZC5hdHRyKFwidWlkXCIpKyc9XCIjPXVpZCNcIiAnO3JldHVybiBlKz1kLmF0dHIoXCJ0eXBlXCIpKyc9XCIkeycrQSsnfVwiPicsZSs9XCIjaWYoXCIrQSsnID09IFwiZFwiKSB7ICMnLGUrPSc8ZGl2IGNsYXNzPVwiay10aHVtYlwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstZm9sZGVyXCI+PC9zcGFuPjwvZGl2PicsZSs9XCIjfWVsc2V7I1wiLGUrPSc8ZGl2IGNsYXNzPVwiay10aHVtYlwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstZmlsZVwiPjwvc3Bhbj48L2Rpdj4nLGUrPVwiI30jXCIsZSs9XCI8c3Ryb25nPiR7XCIrVCtcIn08L3N0cm9uZz5cIixlKz1cIiNpZihcIitBKycgPT0gXCJmXCIpIHsgIyA8c3BhbiBjbGFzcz1cImstZmlsZXNpemVcIj4ke3RoaXMuc2l6ZUZvcm1hdHRlcignK0QrXCIpfTwvc3Bhbj4gI30jXCIsZSs9XCI8L2xpPlwiLHAoZC50ZW1wbGF0ZShlKSx7c2l6ZUZvcm1hdHRlcjpyfSl9LHBhdGg6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4uX3BhdGh8fFwiXCI7cmV0dXJuIGUhPT10PyhuLl9wYXRoPWUucmVwbGFjZShfLFwiXCIpK1wiL1wiLG4uZGF0YVNvdXJjZS5yZWFkKHtwYXRoOm4uX3BhdGh9KSx0KTooaSYmKGk9aS5yZXBsYWNlKF8sXCJcIikpLFwiL1wiPT09aXx8XCJcIj09PWk/XCJcIjppK1wiL1wiKX19KSxsPXUuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpczt0PXR8fHt9LHUuZm4uaW5pdC5jYWxsKG4sZSx0KSxnJiZuLmVsZW1lbnQuYXR0cihcInBsYWNlaG9sZGVyXCIsbi5vcHRpb25zLmxhYmVsKSxuLl93cmFwcGVyKCksbi5lbGVtZW50Lm9uKFwia2V5ZG93blwiK1MscChuLl9rZXlkb3duLG4pKS5vbihcImNoYW5nZVwiK1MscChuLl91cGRhdGVWYWx1ZSxuKSksbi53cmFwcGVyLm9uKGsrUyxcImFcIixwKG4uX2NsaWNrLG4pKSxnfHxuLmVsZW1lbnQub24oXCJmb2N1c1wiK1MscChuLl9mb2N1cyxuKSkub24oXCJibHVyXCIrUyxwKG4uX2JsdXIsbikpfSxvcHRpb25zOntuYW1lOlwiU2VhcmNoQm94XCIsbGFiZWw6XCJTZWFyY2hcIix2YWx1ZTpcIlwifSxldmVudHM6W3ldLGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Uud3JhcHBlci5hZGQoZS5lbGVtZW50KS5hZGQoZS5sYWJlbCkub2ZmKFMpLHUuZm4uZGVzdHJveS5jYWxsKGUpfSxfa2V5ZG93bjpmdW5jdGlvbihlKXsxMz09PWUua2V5Q29kZSYmdGhpcy5fdXBkYXRlVmFsdWUoKX0sX2NsaWNrOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0aGlzLl91cGRhdGVWYWx1ZSgpfSxfdXBkYXRlVmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5lbGVtZW50LnZhbCgpO3QhPT1lLnZhbHVlKCkmJihlLnZhbHVlKHQpLGUudHJpZ2dlcih5KSl9LF9ibHVyOmZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlVmFsdWUoKSx0aGlzLl90b2dnbGVMYWJlbCgpfSxfdG9nZ2xlTGFiZWw6ZnVuY3Rpb24oKXtnfHx0aGlzLmxhYmVsLnRvZ2dsZSghdGhpcy5lbGVtZW50LnZhbCgpKX0sX2ZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5sYWJlbC5oaWRlKCl9LF93cmFwcGVyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5lbGVtZW50LG49dC5wYXJlbnRzKFwiLmstc2VhcmNoLXdyYXBcIik7dFswXS5zdHlsZS53aWR0aD1cIlwiLHQuYWRkQ2xhc3MoXCJrLWlucHV0XCIpLG4ubGVuZ3RofHwobj10LndyYXAoZSgnPGRpdiBjbGFzcz1cImstd2lkZ2V0IGstc2VhcmNoLXdyYXAgay10ZXh0Ym94XCIvPicpKS5wYXJlbnQoKSxnfHxlKCc8bGFiZWwgc3R5bGU9XCJkaXNwbGF5OmJsb2NrXCI+Jyt0aGlzLm9wdGlvbnMubGFiZWwrXCI8L2xhYmVsPlwiKS5pbnNlcnRCZWZvcmUodCksZSgnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImstaWNvbiBrLWktc2VhcmNoIGstc2VhcmNoXCIvPicpLmFwcGVuZFRvKG4pKSx0aGlzLndyYXBwZXI9bix0aGlzLmxhYmVsPW4uZmluZChcIj5sYWJlbFwiKX0sdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztyZXR1cm4gZSE9PXQ/KG4ub3B0aW9ucy52YWx1ZT1lLG4uZWxlbWVudC52YWwoZSksbi5fdG9nZ2xlTGFiZWwoKSx0KTpuLm9wdGlvbnMudmFsdWV9fSksYz11LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7dD10fHx7fSx1LmZuLmluaXQuY2FsbChuLGUsdCksbi5fd3JhcHBlcigpLG4ud3JhcHBlci5vbihcImZvY3VzXCIrQyxcImlucHV0XCIscChuLl9mb2N1cyxuKSkub24oXCJibHVyXCIrQyxcImlucHV0XCIscChuLl9ibHVyLG4pKS5vbihcImtleWRvd25cIitDLFwiaW5wdXRcIixwKG4uX2tleWRvd24sbikpLm9uKGsrQyxcImEuay1pLWFycm93LW46Zmlyc3RcIixwKG4uX3Jvb3RDbGljayxuKSkub24oaytDLFwiYTpub3QoLmstaS1hcnJvdy1uKVwiLHAobi5fY2xpY2ssbikpLG4udmFsdWUobi5vcHRpb25zLnZhbHVlKX0sb3B0aW9uczp7bmFtZTpcIkJyZWFkY3J1bWJzXCIsZ2FwOjUwfSxldmVudHM6W3ldLGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3UuZm4uZGVzdHJveS5jYWxsKGUpLGUud3JhcHBlci5hZGQoZS53cmFwcGVyLmZpbmQoXCJpbnB1dFwiKSkuYWRkKGUud3JhcHBlci5maW5kKFwiYVwiKSkub2ZmKEMpfSxfdXBkYXRlOmZ1bmN0aW9uKGUpe2U9XCIvXCI9PT0oZXx8XCJcIikuY2hhckF0KDApP2U6XCIvXCIrKGV8fFwiXCIpLGUhPT10aGlzLnZhbHVlKCkmJih0aGlzLnZhbHVlKGUpLHRoaXMudHJpZ2dlcih5KSl9LF9jbGljazpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdGhpcy5fdXBkYXRlKHRoaXMuX3BhdGgoZSh0LnRhcmdldCkucHJldkFsbChcImE6bm90KC5rLWktYXJyb3ctbilcIikuYWRkQmFjaygpKSl9LF9yb290Q2xpY2s6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX3VwZGF0ZShcIlwiKX0sX2ZvY3VzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZWxlbWVudDtlLm92ZXJsYXkuaGlkZSgpLGUuZWxlbWVudC52YWwoZS52YWx1ZSgpKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5zZWxlY3QoKX0pfSxfYmx1cjpmdW5jdGlvbigpe2lmKCF0aGlzLm92ZXJsYXkuaXMoXCI6dmlzaWJsZVwiKSl7dmFyIGU9dGhpcyx0PWUuZWxlbWVudCxuPXQudmFsKCkucmVwbGFjZSgvXFwvezIsfS9nLFwiL1wiKTtlLm92ZXJsYXkuc2hvdygpLHQudmFsKFwiXCIpLGUuX3VwZGF0ZShuKX19LF9rZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7MTM9PT1lLmtleUNvZGUmJih0Ll9ibHVyKCksc2V0VGltZW91dChmdW5jdGlvbigpe3Qub3ZlcmxheS5maW5kKFwiYTpmaXJzdFwiKS5mb2N1cygpfSkpfSxfd3JhcHBlcjpmdW5jdGlvbigpe3ZhciB0LG49dGhpcy5lbGVtZW50LGk9bi5wYXJlbnRzKFwiLmstYnJlYWRjcnVtYnNcIik7blswXS5zdHlsZS53aWR0aD1cIlwiLG4uYWRkQ2xhc3MoXCJrLWlucHV0XCIpLGkubGVuZ3RofHwoaT1uLndyYXAoZSgnPGRpdiBjbGFzcz1cImstd2lkZ2V0IGstYnJlYWRjcnVtYnMgay10ZXh0Ym94XCIvPicpKS5wYXJlbnQoKSksdD1pLmZpbmQoXCIuay1icmVhZGNydW1icy13cmFwXCIpLHQubGVuZ3RofHwodD1lKCc8ZGl2IGNsYXNzPVwiay1icmVhZGNydW1icy13cmFwXCIvPicpLmFwcGVuZFRvKGkpKSx0aGlzLndyYXBwZXI9aSx0aGlzLm92ZXJsYXk9dH0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBuLGkscixvLGE9XCJcIixzPXRoaXMudmFsdWUoKTtmb3IocyE9PXQmJnMubWF0Y2goL15cXC8vKXx8KHM9XCIvXCIrKHN8fFwiXCIpKSxuPXMuc3BsaXQoXCIvXCIpLHI9MCxvPW4ubGVuZ3RoO28+cjtyKyspaT1uW3JdLGkmJihhfHwoYSs9JzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJrLWljb24gay1pLWFycm93LW5cIj5yb290PC9hPicpLGErPSc8YSBjbGFzcz1cImstbGlua1wiIGhyZWY9XCIjXCI+JytuW3JdK1wiPC9hPlwiLGErPSc8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctZVwiPiZndDs8L3NwYW4+Jyk7dGhpcy5vdmVybGF5LmVtcHR5KCkuYXBwZW5kKGUoYSkpLHRoaXMuX2FkanVzdFNlY3Rpb25XaWR0aCgpfSxfYWRqdXN0U2VjdGlvbldpZHRoOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi53cmFwcGVyLHI9aS53aWR0aCgpLW4ub3B0aW9ucy5nYXAsbz1uLm92ZXJsYXkuZmluZChcImFcIik7by5lYWNoKGZ1bmN0aW9uKG4pe3Q9ZSh0aGlzKSx0LnBhcmVudCgpLndpZHRoKCk+ciYmKG49PW8ubGVuZ3RoLTE/dC53aWR0aChyKTp0LnByZXYoKS5hZGRCYWNrKCkuaGlkZSgpKX0pfSx2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZSE9PXQ/KHRoaXMuX3ZhbHVlPWUucmVwbGFjZSgvXFwvezIsfS9nLFwiL1wiKSx0aGlzLnJlZnJlc2goKSx0KTp0aGlzLl92YWx1ZVxyXG59LF9wYXRoOmZ1bmN0aW9uKHQpe3JldHVyblwiL1wiK2UubWFwKHQsZnVuY3Rpb24odCl7cmV0dXJuIGUodCkudGV4dCgpfSkuam9pbihcIi9cIil9fSksZC51aS5wbHVnaW4ocyksZC51aS5wbHVnaW4oYyksZC51aS5wbHVnaW4obCl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLG4pe3JldHVybiBlIT09dCYmZS5tYXRjaCgvXFwvJC8pfHwoZT0oZXx8XCJcIikrXCIvXCIpLGUrbn1mdW5jdGlvbiBpKGUpe2lmKCFlKXJldHVyblwiXCI7dmFyIHQ9XCIgYnl0ZXNcIjtyZXR1cm4gZT49MTA3Mzc0MTgyND8odD1cIiBHQlwiLGUvPTEwNzM3NDE4MjQpOmU+PTEwNDg1NzY/KHQ9XCIgTUJcIixlLz0xMDQ4NTc2KTplPj0xMDI0JiYodD1cIiBLQlwiLGUvPTEwMjQpLE1hdGgucm91bmQoMTAwKmUpLzEwMCt0fXZhciByLG8sYT13aW5kb3cua2VuZG8scz1hLnVpLkZpbGVCcm93c2VyLGw9ZS5pc1BsYWluT2JqZWN0LGM9ZS5wcm94eSxkPWUuZXh0ZW5kLHU9YS5zdXBwb3J0LmJyb3dzZXIsaD1hLmlzRnVuY3Rpb24scD0vKF5cXC98XFwvJCkvZyxmPVwiZXJyb3JcIixnPVwiLmtlbmRvSW1hZ2VCcm93c2VyXCIsbT1cIm5hbWVcIix2PVwic2l6ZVwiLF89XCJ0eXBlXCIseT17ZmllbGQ6XyxkaXI6XCJhc2NcIn0sdz1hLnRlbXBsYXRlKCc8bGkgY2xhc3M9XCJrLXRpbGUtZW1wdHlcIj48c3Ryb25nPiR7dGV4dH08L3N0cm9uZz48L2xpPicpO2QoITAsYS5kYXRhLHtzY2hlbWFzOntpbWFnZWJyb3dzZXI6e2RhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaXRlbXN8fGV8fFtdfSxtb2RlbDp7aWQ6XCJuYW1lXCIsZmllbGRzOntuYW1lOlwibmFtZVwiLHNpemU6XCJzaXplXCIsdHlwZTpcInR5cGVcIn19fX19KSxkKCEwLGEuZGF0YSx7dHJhbnNwb3J0czp7aW1hZ2Vicm93c2VyOmEuZGF0YS5SZW1vdGVUcmFuc3BvcnQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQpe2EuZGF0YS5SZW1vdGVUcmFuc3BvcnQuZm4uaW5pdC5jYWxsKHRoaXMsZS5leHRlbmQoITAse30sdGhpcy5vcHRpb25zLHQpKX0sX2NhbGw6ZnVuY3Rpb24odCxuKXtuLmRhdGE9ZS5leHRlbmQoe30sbi5kYXRhLHtwYXRoOnRoaXMub3B0aW9ucy5wYXRoKCl9KSxoKHRoaXMub3B0aW9uc1t0XSk/dGhpcy5vcHRpb25zW3RdLmNhbGwodGhpcyxuKTphLmRhdGEuUmVtb3RlVHJhbnNwb3J0LmZuW3RdLmNhbGwodGhpcyxuKX0scmVhZDpmdW5jdGlvbihlKXt0aGlzLl9jYWxsKFwicmVhZFwiLGUpfSxjcmVhdGU6ZnVuY3Rpb24oZSl7dGhpcy5fY2FsbChcImNyZWF0ZVwiLGUpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3RoaXMuX2NhbGwoXCJkZXN0cm95XCIsZSl9LHVwZGF0ZTpmdW5jdGlvbigpe30sb3B0aW9uczp7cmVhZDp7dHlwZTpcIlBPU1RcIn0sdXBkYXRlOnt0eXBlOlwiUE9TVFwifSxjcmVhdGU6e3R5cGU6XCJQT1NUXCJ9LGRlc3Ryb3k6e3R5cGU6XCJQT1NUXCJ9fX0pfX0pLHI9dS5tc2llJiY4PnUudmVyc2lvbj9mdW5jdGlvbihlKXtyZXR1cm4gZS5vZmZzZXRUb3B9OmZ1bmN0aW9uKHQpe3JldHVybiB0Lm9mZnNldFRvcC1lKHQpLmhlaWdodCgpfSxvPXMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpczt0PXR8fHt9LHMuZm4uaW5pdC5jYWxsKG4sZSx0KSxuLmVsZW1lbnQuYWRkQ2xhc3MoXCJrLWltYWdlYnJvd3NlclwiKX0sb3B0aW9uczp7bmFtZTpcIkltYWdlQnJvd3NlclwiLGZpbGVUeXBlczpcIioucG5nLCouZ2lmLCouanBnLCouanBlZ1wifSx2YWx1ZTpmdW5jdGlvbigpe3ZhciBlLGk9dGhpcyxyPWkuX3NlbGVjdGVkSXRlbSgpLG89aS5vcHRpb25zLnRyYW5zcG9ydC5pbWFnZVVybDtyZXR1cm4gciYmXCJmXCI9PT1yLmdldChfKT8oZT1uKGkucGF0aCgpLHIuZ2V0KG0pKS5yZXBsYWNlKHAsXCJcIiksbyYmKGU9aChvKT9vKGUpOmEuZm9ybWF0KG8sZW5jb2RlVVJJQ29tcG9uZW50KGUpKSksZSk6dH0sX2ZpbGVVcGxvYWQ6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLGk9bi5vcHRpb25zLHI9aS5maWxlVHlwZXMsbz1SZWdFeHAoKFwiKFwiK3Iuc3BsaXQoXCIsXCIpLmpvaW4oXCIpfChcIikrXCIpXCIpLnJlcGxhY2UoL1xcKlxcLi9nLFwiLiouXCIpLFwiaVwiKSxzPWUuZmlsZXNbMF0ubmFtZSxsPW0sYz12O28udGVzdChzKT8oZS5kYXRhPXtwYXRoOm4ucGF0aCgpfSx0PW4uX2NyZWF0ZUZpbGUocyksdD8odC5fdXBsb2FkaW5nPSEwLG4udXBsb2FkLm9uZShcInN1Y2Nlc3NcIixmdW5jdGlvbihlKXtkZWxldGUgdC5fdXBsb2FkaW5nLHQuc2V0KGwsZS5yZXNwb25zZVtuLl9nZXRGaWVsZE5hbWUobCldKSx0LnNldChjLGUucmVzcG9uc2Vbbi5fZ2V0RmllbGROYW1lKGMpXSksbi5fdGlsZXM9bi5saXN0Vmlldy5pdGVtcygpLmZpbHRlcihcIltcIithLmF0dHIoXCJ0eXBlXCIpK1wiPWZdXCIpLG4uX3Njcm9sbCgpfSkpOmUucHJldmVudERlZmF1bHQoKSk6KGUucHJldmVudERlZmF1bHQoKSxuLl9zaG93TWVzc2FnZShhLmZvcm1hdChpLm1lc3NhZ2VzLmludmFsaWRGaWxlVHlwZSxzLHIpKSl9LF9jb250ZW50OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0Lmxpc3Q9ZSgnPHVsIGNsYXNzPVwiay1yZXNldCBrLWZsb2F0cyBrLXRpbGVzXCIgLz4nKS5hcHBlbmRUbyh0LmVsZW1lbnQpLm9uKFwic2Nyb2xsXCIrZyxjKHQuX3Njcm9sbCx0KSkub24oXCJkYmxjbGlja1wiK2csXCJsaVwiLGModC5fZGJsQ2xpY2ssdCkpLHQubGlzdFZpZXc9bmV3IGEudWkuTGlzdFZpZXcodC5saXN0LHtkYXRhU291cmNlOnQuZGF0YVNvdXJjZSx0ZW1wbGF0ZTp0Ll9pdGVtVG1wbCgpLGVkaXRUZW1wbGF0ZTp0Ll9lZGl0VG1wbCgpLHNlbGVjdGFibGU6ITAsYXV0b0JpbmQ6ITEsZGF0YUJpbmRpbmc6ZnVuY3Rpb24oZSl7dC50b29sYmFyLmZpbmQoXCIuay1kZWxldGVcIikucGFyZW50KCkuYWRkQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIpLChcInJlbW92ZVwiPT09ZS5hY3Rpb258fFwic3luY1wiPT09ZS5hY3Rpb24pJiZlLnByZXZlbnREZWZhdWx0KCl9LGRhdGFCb3VuZDpmdW5jdGlvbigpe3QuZGF0YVNvdXJjZS52aWV3KCkubGVuZ3RoPyh0Ll90aWxlcz10aGlzLml0ZW1zKCkuZmlsdGVyKFwiW1wiK2EuYXR0cihcInR5cGVcIikrXCI9Zl1cIiksdC5fc2Nyb2xsKCkpOnRoaXMud3JhcHBlci5hcHBlbmQodyh7dGV4dDp0Lm9wdGlvbnMubWVzc2FnZXMuZW1wdHlGb2xkZXJ9KSl9LGNoYW5nZTpjKHQuX2xpc3RWaWV3Q2hhbmdlLHQpfSl9LF9kYXRhU291cmNlOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLG49dC5vcHRpb25zLGk9bi50cmFuc3BvcnQscj1kKHt9LHkpLG89e2ZpZWxkOm0sZGlyOlwiYXNjXCJ9LHM9e3R5cGU6aS50eXBlfHxcImltYWdlYnJvd3NlclwiLHNvcnQ6W3Isb119O2woaSkmJihpLnBhdGg9Yyh0LnBhdGgsdCkscy50cmFuc3BvcnQ9aSksbChuLnNjaGVtYSk/cy5zY2hlbWE9bi5zY2hlbWE6aS50eXBlJiZsKGEuZGF0YS5zY2hlbWFzW2kudHlwZV0pJiYoZT1hLmRhdGEuc2NoZW1hc1tpLnR5cGVdKSx0LmRhdGFTb3VyY2UmJnQuX2Vycm9ySGFuZGxlcj90LmRhdGFTb3VyY2UudW5iaW5kKGYsdC5fZXJyb3JIYW5kbGVyKTp0Ll9lcnJvckhhbmRsZXI9Yyh0Ll9lcnJvcix0KSx0LmRhdGFTb3VyY2U9YS5kYXRhLkRhdGFTb3VyY2UuY3JlYXRlKHMpLmJpbmQoZix0Ll9lcnJvckhhbmRsZXIpfSxfbG9hZEltYWdlOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1lKHQpLHI9bi5kYXRhU291cmNlLmdldEJ5VWlkKGkuYXR0cihhLmF0dHIoXCJ1aWRcIikpKSxvPXIuZ2V0KG0pLHM9bi5vcHRpb25zLnRyYW5zcG9ydC50aHVtYm5haWxVcmwsbD1lKFwiPGltZyAvPlwiLHthbHQ6b30pLGM9XCI/XCI7ci5fdXBsb2FkaW5nfHwobC5oaWRlKCkub24oXCJsb2FkXCIrZyxmdW5jdGlvbigpe2UodGhpcykucHJldigpLnJlbW92ZSgpLmVuZCgpLmFkZENsYXNzKFwiay1pbWFnZVwiKS5mYWRlSW4oKX0pLGkuZmluZChcIi5rLWxvYWRpbmdcIikuYWZ0ZXIobCksaChzKT9zPXMobi5wYXRoKCksZW5jb2RlVVJJQ29tcG9uZW50KG8pKToocy5pbmRleE9mKFwiP1wiKT49MCYmKGM9XCImXCIpLHM9cytjK1wicGF0aD1cIituLnBhdGgoKStlbmNvZGVVUklDb21wb25lbnQobykpLGwuYXR0cihcInNyY1wiLHMpLHQubG9hZGVkPSEwKX0sX3Njcm9sbDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5vcHRpb25zLnRyYW5zcG9ydCYmZS5vcHRpb25zLnRyYW5zcG9ydC50aHVtYm5haWxVcmwmJihjbGVhclRpbWVvdXQoZS5fdGltZW91dCksZS5fdGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIG49ZS5saXN0Lm91dGVySGVpZ2h0KCksaT1lLmxpc3Quc2Nyb2xsVG9wKCksbz1pK247ZS5fdGlsZXMuZWFjaChmdW5jdGlvbigpe3ZhciBuPXIodGhpcyksYT1uK3RoaXMub2Zmc2V0SGVpZ2h0O3JldHVybihuPj1pJiZvPm58fGE+PWkmJm8+YSkmJmUuX2xvYWRJbWFnZSh0aGlzKSxuPm8/ITE6dH0pLGUuX3RpbGVzPWUuX3RpbGVzLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiF0aGlzLmxvYWRlZH0pfSwyNTApKX0sX2l0ZW1UbXBsOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PSc8bGkgY2xhc3M9XCJrLXRpbGVcIiAnK2EuYXR0cihcInVpZFwiKSsnPVwiIz11aWQjXCIgJztyZXR1cm4gdCs9YS5hdHRyKFwidHlwZVwiKSsnPVwiJHsnK18rJ31cIj4nLHQrPVwiI2lmKFwiK18rJyA9PSBcImRcIikgeyAjJyx0Kz0nPGRpdiBjbGFzcz1cImstdGh1bWJcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWZvbGRlclwiPjwvc3Bhbj48L2Rpdj4nLHQrPVwiI31lbHNleyNcIix0Kz1lLm9wdGlvbnMudHJhbnNwb3J0JiZlLm9wdGlvbnMudHJhbnNwb3J0LnRodW1ibmFpbFVybD8nPGRpdiBjbGFzcz1cImstdGh1bWJcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWxvYWRpbmdcIj48L3NwYW4+PC9kaXY+JzonPGRpdiBjbGFzcz1cImstdGh1bWJcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWZpbGVcIj48L3NwYW4+PC9kaXY+Jyx0Kz1cIiN9I1wiLHQrPVwiPHN0cm9uZz4ke1wiK20rXCJ9PC9zdHJvbmc+XCIsdCs9XCIjaWYoXCIrXysnID09IFwiZlwiKSB7ICMgPHNwYW4gY2xhc3M9XCJrLWZpbGVzaXplXCI+JHt0aGlzLnNpemVGb3JtYXR0ZXIoJyt2K1wiKX08L3NwYW4+ICN9I1wiLHQrPVwiPC9saT5cIixjKGEudGVtcGxhdGUodCkse3NpemVGb3JtYXR0ZXI6aX0pfX0pLGEudWkucGx1Z2luKG8pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGE9d2luZG93LmtlbmRvLHM9YS5DbGFzcyxsPWEudWkuV2lkZ2V0LGM9YS5zdXBwb3J0Lm1vYmlsZU9TLGQ9YS5zdXBwb3J0LmJyb3dzZXIsdT1lLmV4dGVuZCxoPWUucHJveHkscD1hLmRlZXBFeHRlbmQsZj1cIi5rZW5kb0VkaXRvclwiLGc9YS5rZXlzLG09cy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zPWV9LGdldEh0bWw6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnM7cmV0dXJuIGEudGVtcGxhdGUoZS50ZW1wbGF0ZSx7dXNlV2l0aEJsb2NrOiExfSkoZSl9fSksdj17ZWRpdG9yV3JhcHBlclRlbXBsYXRlOic8dGFibGUgY2VsbHNwYWNpbmc9XCI0XCIgY2VsbHBhZGRpbmc9XCIwXCIgY2xhc3M9XCJrLXdpZGdldCBrLWVkaXRvciBrLWhlYWRlclwiIHJvbGU9XCJwcmVzZW50YXRpb25cIj48dGJvZHk+PHRyIHJvbGU9XCJwcmVzZW50YXRpb25cIj48dGQgY2xhc3M9XCJrLWVkaXRvci10b29sYmFyLXdyYXBcIiByb2xlPVwicHJlc2VudGF0aW9uXCI+PHVsIGNsYXNzPVwiay1lZGl0b3ItdG9vbGJhclwiIHJvbGU9XCJ0b29sYmFyXCIgLz48L3RkPjwvdHI+PHRyPjx0ZCBjbGFzcz1cImstZWRpdGFibGUtYXJlYVwiIC8+PC90cj48L3Rib2R5PjwvdGFibGU+JyxidXR0b25UZW1wbGF0ZTonPGEgaHJlZj1cIlwiIHJvbGU9XCJidXR0b25cIiBjbGFzcz1cImstdG9vbFwiIz0gZGF0YS5wb3B1cCA/IFwiIGRhdGEtcG9wdXBcIiA6IFwiXCIgIyB1bnNlbGVjdGFibGU9XCJvblwiIHRpdGxlPVwiIz0gZGF0YS50aXRsZSAjXCI+PHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstdG9vbC1pY29uICM9IGRhdGEuY3NzQ2xhc3MgI1wiPiM9IGRhdGEudGl0bGUgIzwvc3Bhbj48L2E+Jyxjb2xvclBpY2tlclRlbXBsYXRlOic8ZGl2IGNsYXNzPVwiay1jb2xvcnBpY2tlciAjPSBkYXRhLmNzc0NsYXNzICNcIiAvPicsY29tYm9Cb3hUZW1wbGF0ZTonPHNlbGVjdCB0aXRsZT1cIiM9IGRhdGEudGl0bGUgI1wiIGNsYXNzPVwiIz0gZGF0YS5jc3NDbGFzcyAjXCIgLz4nLGRyb3BEb3duTGlzdFRlbXBsYXRlOic8c3BhbiBjbGFzcz1cImstZWRpdG9yLWRyb3Bkb3duXCI+PHNlbGVjdCB0aXRsZT1cIiM9IGRhdGEudGl0bGUgI1wiIGNsYXNzPVwiIz0gZGF0YS5jc3NDbGFzcyAjXCIgLz48L3NwYW4+JyxzZXBhcmF0b3JUZW1wbGF0ZTonPHNwYW4gY2xhc3M9XCJrLXNlcGFyYXRvclwiIC8+Jyxmb3JtYXRCeU5hbWU6ZnVuY3Rpb24odCxuKXtmb3IodmFyIGk9MDtuLmxlbmd0aD5pO2krKylpZihlLmluQXJyYXkodCxuW2ldLnRhZ3MpPj0wKXJldHVybiBuW2ldfSxyZWdpc3RlclRvb2w6ZnVuY3Rpb24oZSx0KXt2YXIgbj10Lm9wdGlvbnM7biYmbi50ZW1wbGF0ZSYmKG4udGVtcGxhdGUub3B0aW9ucy5jc3NDbGFzcz1cImstXCIrZSksdC5uYW1lfHwodC5vcHRpb25zLm5hbWU9ZSx0Lm5hbWU9ZS50b0xvd2VyQ2FzZSgpKSxiLmRlZmF1bHRUb29sc1tlXT10fSxyZWdpc3RlckZvcm1hdDpmdW5jdGlvbihlLHQpe2IuZm4ub3B0aW9ucy5mb3JtYXRzW2VdPXR9fSxfPXtib2xkOlwiQm9sZFwiLGl0YWxpYzpcIkl0YWxpY1wiLHVuZGVybGluZTpcIlVuZGVybGluZVwiLHN0cmlrZXRocm91Z2g6XCJTdHJpa2V0aHJvdWdoXCIsc3VwZXJzY3JpcHQ6XCJTdXBlcnNjcmlwdFwiLHN1YnNjcmlwdDpcIlN1YnNjcmlwdFwiLGp1c3RpZnlDZW50ZXI6XCJDZW50ZXIgdGV4dFwiLGp1c3RpZnlMZWZ0OlwiQWxpZ24gdGV4dCBsZWZ0XCIsanVzdGlmeVJpZ2h0OlwiQWxpZ24gdGV4dCByaWdodFwiLGp1c3RpZnlGdWxsOlwiSnVzdGlmeVwiLGluc2VydFVub3JkZXJlZExpc3Q6XCJJbnNlcnQgdW5vcmRlcmVkIGxpc3RcIixpbnNlcnRPcmRlcmVkTGlzdDpcIkluc2VydCBvcmRlcmVkIGxpc3RcIixpbmRlbnQ6XCJJbmRlbnRcIixvdXRkZW50OlwiT3V0ZGVudFwiLGNyZWF0ZUxpbms6XCJJbnNlcnQgaHlwZXJsaW5rXCIsdW5saW5rOlwiUmVtb3ZlIGh5cGVybGlua1wiLGluc2VydEltYWdlOlwiSW5zZXJ0IGltYWdlXCIsaW5zZXJ0RmlsZTpcIkluc2VydCBmaWxlXCIsaW5zZXJ0SHRtbDpcIkluc2VydCBIVE1MXCIsdmlld0h0bWw6XCJWaWV3IEhUTUxcIixmb250TmFtZTpcIlNlbGVjdCBmb250IGZhbWlseVwiLGZvbnROYW1lSW5oZXJpdDpcIihpbmhlcml0ZWQgZm9udClcIixmb250U2l6ZTpcIlNlbGVjdCBmb250IHNpemVcIixmb250U2l6ZUluaGVyaXQ6XCIoaW5oZXJpdGVkIHNpemUpXCIsZm9ybWF0QmxvY2s6XCJGb3JtYXRcIixmb3JtYXR0aW5nOlwiRm9ybWF0XCIsZm9yZUNvbG9yOlwiQ29sb3JcIixiYWNrQ29sb3I6XCJCYWNrZ3JvdW5kIGNvbG9yXCIsc3R5bGU6XCJTdHlsZXNcIixlbXB0eUZvbGRlcjpcIkVtcHR5IEZvbGRlclwiLHVwbG9hZEZpbGU6XCJVcGxvYWRcIixvcmRlckJ5OlwiQXJyYW5nZSBieTpcIixvcmRlckJ5U2l6ZTpcIlNpemVcIixvcmRlckJ5TmFtZTpcIk5hbWVcIixpbnZhbGlkRmlsZVR5cGU6J1RoZSBzZWxlY3RlZCBmaWxlIFwiezB9XCIgaXMgbm90IHZhbGlkLiBTdXBwb3J0ZWQgZmlsZSB0eXBlcyBhcmUgezF9LicsZGVsZXRlRmlsZTonQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSBcInswfVwiPycsb3ZlcndyaXRlRmlsZTonQSBmaWxlIHdpdGggbmFtZSBcInswfVwiIGFscmVhZHkgZXhpc3RzIGluIHRoZSBjdXJyZW50IGRpcmVjdG9yeS4gRG8geW91IHdhbnQgdG8gb3ZlcndyaXRlIGl0PycsZGlyZWN0b3J5Tm90Rm91bmQ6XCJBIGRpcmVjdG9yeSB3aXRoIHRoaXMgbmFtZSB3YXMgbm90IGZvdW5kLlwiLGltYWdlV2ViQWRkcmVzczpcIldlYiBhZGRyZXNzXCIsaW1hZ2VBbHRUZXh0OlwiQWx0ZXJuYXRlIHRleHRcIixpbWFnZVdpZHRoOlwiV2lkdGggKHB4KVwiLGltYWdlSGVpZ2h0OlwiSGVpZ2h0IChweClcIixmaWxlV2ViQWRkcmVzczpcIldlYiBhZGRyZXNzXCIsZmlsZVRpdGxlOlwiVGl0bGVcIixsaW5rV2ViQWRkcmVzczpcIldlYiBhZGRyZXNzXCIsbGlua1RleHQ6XCJUZXh0XCIsbGlua1Rvb2xUaXA6XCJUb29sVGlwXCIsbGlua09wZW5Jbk5ld1dpbmRvdzpcIk9wZW4gbGluayBpbiBuZXcgd2luZG93XCIsZGlhbG9nVXBkYXRlOlwiVXBkYXRlXCIsZGlhbG9nSW5zZXJ0OlwiSW5zZXJ0XCIsZGlhbG9nQ2FuY2VsOlwiQ2FuY2VsXCIsY3JlYXRlVGFibGU6XCJDcmVhdGUgdGFibGVcIixjcmVhdGVUYWJsZUhpbnQ6XCJDcmVhdGUgYSB7MH0geCB7MX0gdGFibGVcIixhZGRDb2x1bW5MZWZ0OlwiQWRkIGNvbHVtbiBvbiB0aGUgbGVmdFwiLGFkZENvbHVtblJpZ2h0OlwiQWRkIGNvbHVtbiBvbiB0aGUgcmlnaHRcIixhZGRSb3dBYm92ZTpcIkFkZCByb3cgYWJvdmVcIixhZGRSb3dCZWxvdzpcIkFkZCByb3cgYmVsb3dcIixkZWxldGVSb3c6XCJEZWxldGUgcm93XCIsZGVsZXRlQ29sdW1uOlwiRGVsZXRlIGNvbHVtblwifSx5PSFjfHxjLmlvcyYmYy5mbGF0VmVyc2lvbj49NTAwfHwhYy5pb3MmJnQhPT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGVudEVkaXRhYmxlLHc9e2Jhc2ljOltcImJvbGRcIixcIml0YWxpY1wiLFwidW5kZXJsaW5lXCJdLGFsaWdubWVudDpbXCJqdXN0aWZ5TGVmdFwiLFwianVzdGlmeUNlbnRlclwiLFwianVzdGlmeVJpZ2h0XCJdLGxpc3RzOltcImluc2VydFVub3JkZXJlZExpc3RcIixcImluc2VydE9yZGVyZWRMaXN0XCJdLGluZGVudGluZzpbXCJpbmRlbnRcIixcIm91dGRlbnRcIl0sbGlua3M6W1wiY3JlYXRlTGlua1wiLFwidW5saW5rXCJdLHRhYmxlczpbXCJjcmVhdGVUYWJsZVwiLFwiYWRkQ29sdW1uTGVmdFwiLFwiYWRkQ29sdW1uUmlnaHRcIixcImFkZFJvd0Fib3ZlXCIsXCJhZGRSb3dCZWxvd1wiLFwiZGVsZXRlUm93XCIsXCJkZWxldGVDb2x1bW5cIl19LGI9bC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG8scyxjPXRoaXMsZD1hLnVpLmVkaXRvcjt5JiYobC5mbi5pbml0LmNhbGwoYyx0LG4pLGMub3B0aW9ucz1wKHt9LGMub3B0aW9ucyxuKSx0PWMuZWxlbWVudCxzPWQuRG9tLm5hbWUodFswXSksdC5jbG9zZXN0KFwiZm9ybVwiKS5vbihcInN1Ym1pdFwiK2YsZnVuY3Rpb24oKXtjLnVwZGF0ZSgpfSksbz11KHt9LGMub3B0aW9ucyksby5lZGl0b3I9YyxcInRleHRhcmVhXCI9PXM/KGMuX3dyYXBUZXh0YXJlYSgpLHI9Yy53cmFwcGVyLmZpbmQoXCIuay1lZGl0b3ItdG9vbGJhclwiKSx0WzBdLmlkJiZyLmF0dHIoXCJhcmlhLWNvbnRyb2xzXCIsdFswXS5pZCkpOihjLmVsZW1lbnQuYXR0cihcImNvbnRlbnRlZGl0YWJsZVwiLCEwKS5hZGRDbGFzcyhcImstd2lkZ2V0IGstZWRpdG9yIGstZWRpdG9yLWlubGluZVwiKSxvLnBvcHVwPSEwLHI9ZSgnPHVsIGNsYXNzPVwiay1lZGl0b3ItdG9vbGJhclwiIHJvbGU9XCJ0b29sYmFyXCIgLz4nKS5pbnNlcnRCZWZvcmUodCkpLGMudG9vbGJhcj1uZXcgZC5Ub29sYmFyKHJbMF0sbyksYy50b29sYmFyLmJpbmRUbyhjKSxcInRleHRhcmVhXCI9PXMmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgZT1jLndyYXBwZXJbMF0uc3R5bGUuaGVpZ2h0LHQ9cGFyc2VJbnQoZSwxMCksbj1jLndyYXBwZXIuaGVpZ2h0KCk7ZS5pbmRleE9mKFwicHhcIik+MCYmIWlzTmFOKHQpJiZuPnQmJmMud3JhcHBlci5oZWlnaHQodC0obi10KSl9KSxjLl9pbml0aWFsaXplQ29udGVudEVsZW1lbnQoYyksYy5rZXlib2FyZD1uZXcgZC5LZXlib2FyZChbbmV3IGQuVHlwaW5nSGFuZGxlcihjKSxuZXcgZC5CYWNrc3BhY2VIYW5kbGVyKGMpLG5ldyBkLlN5c3RlbUhhbmRsZXIoYyldKSxjLmNsaXBib2FyZD1uZXcgZC5DbGlwYm9hcmQodGhpcyksYy51bmRvUmVkb1N0YWNrPW5ldyBkLlVuZG9SZWRvU3RhY2ssaT1uJiZuLnZhbHVlP24udmFsdWU6Yy50ZXh0YXJlYT90LnZhbCgpLnJlcGxhY2UoL1tcXHJcXG5cXHZcXGZcXHQgXSsvZ2ksXCIgXCIpOnRbMF0uaW5uZXJIVE1MLGMudmFsdWUoaSksZShkb2N1bWVudCkub24oXCJtb3VzZWRvd25cIixoKGMuX2VuZFR5cGluZyxjKSkub24oXCJtb3VzZXVwXCIsaChjLl9tb3VzZXVwLGMpKSxhLm5vdGlmeShjKSl9LF9lbmRUeXBpbmc6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmtleWJvYXJkO3RyeXtlLmlzVHlwaW5nSW5Qcm9ncmVzcygpJiYoZS5lbmRUeXBpbmcoITApLHRoaXMuc2F2ZVNlbGVjdGlvbigpKX1jYXRjaCh0KXt9fSxfc2VsZWN0aW9uQ2hhbmdlOmZ1bmN0aW9uKCl7ZC5tc2llfHxhLnVpLmVkaXRvci5Eb20uZW5zdXJlVHJhaWxpbmdCcmVha3ModGhpcy5ib2R5KSx0aGlzLl9zZWxlY3Rpb25TdGFydGVkPSExLHRoaXMuc2F2ZVNlbGVjdGlvbigpLHRoaXMudHJpZ2dlcihcInNlbGVjdFwiLHt9KX0sX3dyYXBUZXh0YXJlYTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LmVsZW1lbnQsaT1uWzBdLnN0eWxlLndpZHRoLHI9blswXS5zdHlsZS5oZWlnaHQsbz12LmVkaXRvcldyYXBwZXJUZW1wbGF0ZSxhPWUobykuaW5zZXJ0QmVmb3JlKG4pLndpZHRoKGkpLmhlaWdodChyKSxzPWEuZmluZChcIi5rLWVkaXRhYmxlLWFyZWFcIik7bi5hdHRyKFwiYXV0b2NvbXBsZXRlXCIsXCJvZmZcIikuYXBwZW5kVG8ocykuYWRkQ2xhc3MoXCJrLWNvbnRlbnQgay1yYXctY29udGVudFwiKS5jc3MoXCJkaXNwbGF5XCIsXCJub25lXCIpLHQudGV4dGFyZWE9bix0LndyYXBwZXI9YX0sX2NyZWF0ZUNvbnRlbnRFbGVtZW50OmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvPXRoaXMscz1vLnRleHRhcmVhLGw9by5vcHRpb25zLmRvbWFpbixjPWx8fGRvY3VtZW50LmRvbWFpbixkPVwiXCIsdT0namF2YXNjcmlwdDpcIlwiJztyZXR1cm4obHx8YyE9bG9jYXRpb24uaG9zdG5hbWUpJiYoZD0nPHNjcmlwdD5kb2N1bWVudC5kb21haW49XCInK2MrJ1wiPC9zY3JpcHQ+Jyx1PVwiamF2YXNjcmlwdDpkb2N1bWVudC53cml0ZSgnXCIrZCtcIicpXCIpLHMuaGlkZSgpLG49ZShcIjxpZnJhbWUgLz5cIix7ZnJhbWVCb3JkZXI6XCIwXCJ9KVswXSxlKG4pLmNzcyhcImRpc3BsYXlcIixcIlwiKS5hZGRDbGFzcyhcImstY29udGVudFwiKS5pbnNlcnRCZWZvcmUocyksbi5zcmM9dSxpPW4uY29udGVudFdpbmRvd3x8bixyPWkuZG9jdW1lbnR8fG4uY29udGVudERvY3VtZW50LGUobikub25lKFwibG9hZFwiLGZ1bmN0aW9uKCl7by50b29sYmFyLmRlY29yYXRlRnJvbShyLmJvZHkpfSksci5vcGVuKCksci53cml0ZShcIjwhRE9DVFlQRSBodG1sPjxodG1sPjxoZWFkPjxtZXRhIGNoYXJzZXQ9J3V0Zi04JyAvPjxzdHlsZT5odG1sLGJvZHl7cGFkZGluZzowO21hcmdpbjowO2hlaWdodDoxMDAlO21pbi1oZWlnaHQ6MTAwJTt9Ym9keXtmb250LXNpemU6MTJweDtmb250LWZhbWlseTpWZXJkYW5hLEdlbmV2YSxzYW5zLXNlcmlmO3BhZGRpbmctdG9wOjFweDttYXJnaW4tdG9wOi0xcHg7d29yZC13cmFwOiBicmVhay13b3JkOy13ZWJraXQtbmJzcC1tb2RlOiBzcGFjZTstd2Via2l0LWxpbmUtYnJlYWs6IGFmdGVyLXdoaXRlLXNwYWNlO1wiKyhhLnN1cHBvcnQuaXNSdGwocyk/XCJkaXJlY3Rpb246cnRsO1wiOlwiXCIpK1wifWgxe2ZvbnQtc2l6ZToyZW07bWFyZ2luOi42N2VtIDB9aDJ7Zm9udC1zaXplOjEuNWVtfWgze2ZvbnQtc2l6ZToxLjE2ZW19aDR7Zm9udC1zaXplOjFlbX1oNXtmb250LXNpemU6LjgzZW19aDZ7Zm9udC1zaXplOi43ZW19cHttYXJnaW46MCAwIDFlbTtwYWRkaW5nOjAgLjJlbX0uay1tYXJrZXJ7ZGlzcGxheTpub25lO30uay1wYXN0ZS1jb250YWluZXIsLkFwcGxlLXN0eWxlLXNwYW57cG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTAwMDBweDt3aWR0aDoxcHg7aGVpZ2h0OjFweDtvdmVyZmxvdzpoaWRkZW59dWwsb2x7cGFkZGluZy1sZWZ0OjIuNWVtfXNwYW57LW1zLWhpZ2gtY29udHJhc3QtYWRqdXN0Om5vbmU7fWF7Y29sb3I6IzAwYX1jb2Rle2ZvbnQtc2l6ZToxLjIzZW19dGVsZXJpa1xcXFwzQXNjcmlwdHtkaXNwbGF5OiBub25lO30uay10YWJsZXt0YWJsZS1sYXlvdXQ6Zml4ZWQ7d2lkdGg6MTAwJTtib3JkZXItc3BhY2luZzowO21hcmdpbjogMCAwIDFlbTt9LmstdGFibGUgdGR7bWluLXdpZHRoOjFweDtwYWRkaW5nOi4yZW0gLjNlbTt9LmstdGFibGUsLmstdGFibGUgdGR7b3V0bGluZTowO2JvcmRlcjogMXB4IGRvdHRlZCAjY2NjO30uay10YWJsZSBwe21hcmdpbjowO3BhZGRpbmc6MDt9PC9zdHlsZT5cIitkK1wiPHNjcmlwdD4oZnVuY3Rpb24oZCxjKXtkW2NdKCdoZWFkZXInKSxkW2NdKCdhcnRpY2xlJyksZFtjXSgnbmF2JyksZFtjXSgnc2VjdGlvbicpLGRbY10oJ2Zvb3RlcicpO30pKGRvY3VtZW50LCAnY3JlYXRlRWxlbWVudCcpOzwvc2NyaXB0PlwiK2UubWFwKHQsZnVuY3Rpb24oZSl7cmV0dXJuXCI8bGluayByZWw9J3N0eWxlc2hlZXQnIGhyZWY9J1wiK2UrXCInPlwifSkuam9pbihcIlwiKStcIjwvaGVhZD48Ym9keSBhdXRvY29ycmVjdD0nb2ZmJyBjb250ZW50ZWRpdGFibGU9J3RydWUnPjwvYm9keT48L2h0bWw+XCIpLHIuY2xvc2UoKSxpfSxfYmx1cjpmdW5jdGlvbigpe3ZhciBlPXRoaXMudGV4dGFyZWEsdD1lP2UudmFsKCk6dGhpcy5fb2xkVmFsdWUsbj10aGlzLm9wdGlvbnMuZW5jb2RlZD90aGlzLmVuY29kZWRWYWx1ZSgpOnRoaXMudmFsdWUoKTt0aGlzLnVwZGF0ZSgpLGUmJmUudHJpZ2dlcihcImJsdXJcIiksbiE9dCYmdGhpcy50cmlnZ2VyKFwiY2hhbmdlXCIpfSxfaW5pdGlhbGl6ZUNvbnRlbnRFbGVtZW50OmZ1bmN0aW9uKCl7dmFyIG4saSxyPXRoaXM7ci50ZXh0YXJlYT8oci53aW5kb3c9ci5fY3JlYXRlQ29udGVudEVsZW1lbnQoci5vcHRpb25zLnN0eWxlc2hlZXRzKSxuPXIuZG9jdW1lbnQ9ci53aW5kb3cuY29udGVudERvY3VtZW50fHxyLndpbmRvdy5kb2N1bWVudCxyLmJvZHk9bi5ib2R5LGk9ci53aW5kb3csZShuKS5vbihcIm1vdXNldXBcIitmLGgoci5fbW91c2V1cCxyKSkpOihyLndpbmRvdz13aW5kb3csbj1yLmRvY3VtZW50PWRvY3VtZW50LHIuYm9keT1yLmVsZW1lbnRbMF0saT1yLmJvZHksci50b29sYmFyLmRlY29yYXRlRnJvbShyLmJvZHkpKSxlKGkpLm9uKFwiYmx1clwiK2YsaCh0aGlzLl9ibHVyLHRoaXMpKTt0cnl7bi5leGVjQ29tbWFuZChcImVuYWJsZUlubGluZVRhYmxlRWRpdGluZ1wiLG51bGwsITEpfWNhdGNoKG8pe31hLnN1cHBvcnQudG91Y2gmJmUobikub24oXCJzZWxlY3Rpb25jaGFuZ2VcIitmLGgodGhpcy5fc2VsZWN0aW9uQ2hhbmdlLHRoaXMpKS5vbihcImtleWRvd25cIitmLGZ1bmN0aW9uKCl7YS5fYWN0aXZlRWxlbWVudCgpIT1uLmJvZHkmJnIud2luZG93LmZvY3VzKCl9KSxlKHIuYm9keSkub24oXCJrZXlkb3duXCIrZixmdW5jdGlvbihlKXt2YXIgbixpLG8sYSxzLGw7cmV0dXJuIGUua2V5Q29kZT09PWcuRjEwPyhzZXRUaW1lb3V0KGgoci50b29sYmFyLmZvY3VzLHIudG9vbGJhciksMTAwKSxlLnByZXZlbnREZWZhdWx0KCksdCk6KChlLmtleUNvZGU9PWcuTEVGVHx8ZS5rZXlDb2RlPT1nLlJJR0hUKSYmKG49ci5nZXRSYW5nZSgpLGk9ZS5rZXlDb2RlPT1nLkxFRlQsbz1uW2k/XCJzdGFydENvbnRhaW5lclwiOlwiZW5kQ29udGFpbmVyXCJdLGE9bltpP1wic3RhcnRPZmZzZXRcIjpcImVuZE9mZnNldFwiXSxzPWk/LTE6MSxpJiYoYS09MSksYStzPjAmJjM9PW8ubm9kZVR5cGUmJlwi77u/XCI9PW8ubm9kZVZhbHVlW2FdJiYobi5zZXRTdGFydChvLGErcyksbi5jb2xsYXBzZSghMCksci5zZWxlY3RSYW5nZShuKSkpLChsPXIua2V5Ym9hcmQudG9vbEZyb21TaG9ydGN1dChyLnRvb2xiYXIudG9vbHMsZSkpPyhlLnByZXZlbnREZWZhdWx0KCksL14odW5kb3xyZWRvKSQvLnRlc3QobCl8fHIua2V5Ym9hcmQuZW5kVHlwaW5nKCEwKSxyLnRyaWdnZXIoXCJrZXlkb3duXCIsZSksci5leGVjKGwpLCExKTooci5rZXlib2FyZC5jbGVhclRpbWVvdXQoKSxyLmtleWJvYXJkLmtleWRvd24oZSksdCkpfSkub24oXCJrZXl1cFwiK2YsZnVuY3Rpb24odCl7dmFyIG49WzgsOSwzMywzNCwzNSwzNiwzNywzOCwzOSw0MCw0MCw0NSw0Nl07KGUuaW5BcnJheSh0LmtleUNvZGUsbik+LTF8fDY1PT10LmtleUNvZGUmJnQuY3RybEtleSYmIXQuYWx0S2V5JiYhdC5zaGlmdEtleSkmJnIuX3NlbGVjdGlvbkNoYW5nZSgpLHIua2V5Ym9hcmQua2V5dXAodCl9KS5vbihcIm1vdXNlZG93blwiK2YsZnVuY3Rpb24odCl7aWYoci5fc2VsZWN0aW9uU3RhcnRlZD0hMCwhZC5nZWNrbyl7dmFyIG49ZSh0LnRhcmdldCk7KDI9PXQud2hpY2h8fDE9PXQud2hpY2gmJnQuY3RybEtleSkmJm4uaXMoXCJhW2hyZWZdXCIpJiZ3aW5kb3cub3BlbihuLmF0dHIoXCJocmVmXCIpLFwiX25ld1wiKX19KS5vbihcImNsaWNrXCIrZixmdW5jdGlvbihlKXt2YXIgdCxuPWEudWkuZWRpdG9yLkRvbTtcImltZ1wiPT09bi5uYW1lKGUudGFyZ2V0KSYmKHQ9ci5jcmVhdGVSYW5nZSgpLHQuc2VsZWN0Tm9kZShlLnRhcmdldCksci5zZWxlY3RSYW5nZSh0KSl9KS5vbihcImN1dFwiK2YrXCIgcGFzdGVcIitmLGZ1bmN0aW9uKGUpe3IuY2xpcGJvYXJkW1wib25cIitlLnR5cGVdKGUpfSkub24oXCJmb2N1c2luXCIrZixmdW5jdGlvbigpe2UodGhpcykuYWRkQ2xhc3MoXCJrLXN0YXRlLWFjdGl2ZVwiKSxyLnRvb2xiYXIuc2hvdygpLHIudGV4dGFyZWEmJnIuc2VsZWN0UmFuZ2Uoci5nZXRSYW5nZSgpKX0pLm9uKFwiZm9jdXNvdXRcIitmLGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0PWEuX2FjdGl2ZUVsZW1lbnQoKSxuPXIuYm9keSxpPXIudG9vbGJhcjt0PT1ufHxlLmNvbnRhaW5zKG4sdCl8fGUodCkuaXMoXCIuay1lZGl0b3J0b29sYmFyLWRyYWdIYW5kbGVcIil8fGkuZm9jdXNlZCgpfHwoZShuKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtYWN0aXZlXCIpLGkuaGlkZSgpKX0sMTApfSl9LF9tb3VzZXVwOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9zZWxlY3Rpb25TdGFydGVkJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5fc2VsZWN0aW9uQ2hhbmdlKCl9LDEpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLnRleHRhcmVhJiYoZS50ZXh0YXJlYS52YWwoZS52YWx1ZSgpKSxlLndyYXBwZXIuZmluZChcImlmcmFtZVwiKS5yZW1vdmUoKSxlLl9pbml0aWFsaXplQ29udGVudEVsZW1lbnQoZSksZS52YWx1ZShlLnRleHRhcmVhLnZhbCgpKSl9LGV2ZW50czpbXCJzZWxlY3RcIixcImNoYW5nZVwiLFwiZXhlY3V0ZVwiLFwiZXJyb3JcIixcInBhc3RlXCIsXCJrZXlkb3duXCIsXCJrZXl1cFwiXSxvcHRpb25zOntuYW1lOlwiRWRpdG9yXCIsbWVzc2FnZXM6Xyxmb3JtYXRzOnt9LGVuY29kZWQ6ITAsZG9tYWluOm51bGwsc2VyaWFsaXphdGlvbjp7ZW50aXRpZXM6ITAsc2NyaXB0czohMX0sc3R5bGVzaGVldHM6W10sZGlhbG9nT3B0aW9uczp7bW9kYWw6ITAscmVzaXphYmxlOiExLGRyYWdnYWJsZTohMCxhbmltYXRpb246ITF9LGZvbnROYW1lOlt7dGV4dDpcIkFyaWFsXCIsdmFsdWU6XCJBcmlhbCxIZWx2ZXRpY2Esc2Fucy1zZXJpZlwifSx7dGV4dDpcIkNvdXJpZXIgTmV3XCIsdmFsdWU6XCInQ291cmllciBOZXcnLENvdXJpZXIsbW9ub3NwYWNlXCJ9LHt0ZXh0OlwiR2VvcmdpYVwiLHZhbHVlOlwiR2VvcmdpYSxzZXJpZlwifSx7dGV4dDpcIkltcGFjdFwiLHZhbHVlOlwiSW1wYWN0LENoYXJjb2FsLHNhbnMtc2VyaWZcIn0se3RleHQ6XCJMdWNpZGEgQ29uc29sZVwiLHZhbHVlOlwiJ0x1Y2lkYSBDb25zb2xlJyxNb25hY28sbW9ub3NwYWNlXCJ9LHt0ZXh0OlwiVGFob21hXCIsdmFsdWU6XCJUYWhvbWEsR2VuZXZhLHNhbnMtc2VyaWZcIn0se3RleHQ6XCJUaW1lcyBOZXcgUm9tYW5cIix2YWx1ZTpcIidUaW1lcyBOZXcgUm9tYW4nLFRpbWVzLHNlcmlmXCJ9LHt0ZXh0OlwiVHJlYnVjaGV0IE1TXCIsdmFsdWU6XCInVHJlYnVjaGV0IE1TJyxIZWx2ZXRpY2Esc2Fucy1zZXJpZlwifSx7dGV4dDpcIlZlcmRhbmFcIix2YWx1ZTpcIlZlcmRhbmEsR2VuZXZhLHNhbnMtc2VyaWZcIn1dLGZvbnRTaXplOlt7dGV4dDpcIjEgKDhwdClcIix2YWx1ZTpcInh4LXNtYWxsXCJ9LHt0ZXh0OlwiMiAoMTBwdClcIix2YWx1ZTpcIngtc21hbGxcIn0se3RleHQ6XCIzICgxMnB0KVwiLHZhbHVlOlwic21hbGxcIn0se3RleHQ6XCI0ICgxNHB0KVwiLHZhbHVlOlwibWVkaXVtXCJ9LHt0ZXh0OlwiNSAoMThwdClcIix2YWx1ZTpcImxhcmdlXCJ9LHt0ZXh0OlwiNiAoMjRwdClcIix2YWx1ZTpcIngtbGFyZ2VcIn0se3RleHQ6XCI3ICgzNnB0KVwiLHZhbHVlOlwieHgtbGFyZ2VcIn1dLGZvcm1hdEJsb2NrOlt7dGV4dDpcIlBhcmFncmFwaFwiLHZhbHVlOlwicFwifSx7dGV4dDpcIlF1b3RhdGlvblwiLHZhbHVlOlwiYmxvY2txdW90ZVwifSx7dGV4dDpcIkhlYWRpbmcgMVwiLHZhbHVlOlwiaDFcIn0se3RleHQ6XCJIZWFkaW5nIDJcIix2YWx1ZTpcImgyXCJ9LHt0ZXh0OlwiSGVhZGluZyAzXCIsdmFsdWU6XCJoM1wifSx7dGV4dDpcIkhlYWRpbmcgNFwiLHZhbHVlOlwiaDRcIn0se3RleHQ6XCJIZWFkaW5nIDVcIix2YWx1ZTpcImg1XCJ9LHt0ZXh0OlwiSGVhZGluZyA2XCIsdmFsdWU6XCJoNlwifV0sdG9vbHM6W10uY29uY2F0LmNhbGwoW1wiZm9ybWF0dGluZ1wiXSx3LmJhc2ljLHcuYWxpZ25tZW50LHcubGlzdHMsdy5pbmRlbnRpbmcsdy5saW5rcyxbXCJpbnNlcnRJbWFnZVwiXSx3LnRhYmxlcyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2wuZm4uZGVzdHJveS5jYWxsKHQpLGUodC53aW5kb3cpLmFkZCh0LmRvY3VtZW50KS5hZGQodC5ib2R5KS5hZGQodC53cmFwcGVyKS5hZGQodC5lbGVtZW50LmNsb3Nlc3QoXCJmb3JtXCIpKS5vZmYoZiksZShkb2N1bWVudCkub2ZmKFwibW91c2Vkb3duXCIsaCh0Ll9lbmRUeXBpbmcsdCkpLm9mZihcIm1vdXNldXBcIixoKHQuX21vdXNldXAsdCkpLHQuX2ZvY3VzT3V0c2lkZSgpLHQudG9vbGJhci5kZXN0cm95KCksYS5kZXN0cm95KHQud3JhcHBlcil9LF9mb2N1c091dHNpZGU6ZnVuY3Rpb24oKXtpZihhLnN1cHBvcnQuYnJvd3Nlci5tc2llJiZ0aGlzLnRleHRhcmVhKXt2YXIgdD1lKFwiPGlucHV0IHN0eWxlPSdwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0xMHB4O3RvcDotMTBweDt3aWR0aDoxcHg7aGVpZ2h0OjFweDtmb250LXNpemU6MDtib3JkZXI6MDsnIC8+XCIpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpLmZvY3VzKCk7dC5ibHVyKCkucmVtb3ZlKCl9fSxzdGF0ZTpmdW5jdGlvbihlKXt2YXIgdCxuLGk9Yi5kZWZhdWx0VG9vbHNbZV0scj1pJiYoaS5vcHRpb25zLmZpbmRlcnx8aS5maW5kZXIpLG89YS51aS5lZGl0b3IuUmFuZ2VVdGlscztyZXR1cm4gcj8odD10aGlzLmdldFJhbmdlKCksbj1vLnRleHROb2Rlcyh0KSwhbi5sZW5ndGgmJnQuY29sbGFwc2VkJiYobj1bdC5zdGFydENvbnRhaW5lcl0pLHIuZ2V0Rm9ybWF0P3IuZ2V0Rm9ybWF0KG4pOnIuaXNGb3JtYXR0ZWQobikpOiExfSx2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLmJvZHksaT1hLnVpLmVkaXRvcixyPWkuU2VyaWFsaXplci5kb21Ub1hodG1sKG4sdGhpcy5vcHRpb25zLnNlcmlhbGl6YXRpb24pO3JldHVybiBlPT09dD9yOihlIT1yJiYoaS5TZXJpYWxpemVyLmh0bWxUb0RvbShlLG4pLGQubXNpZXx8YS51aS5lZGl0b3IuRG9tLmVuc3VyZVRyYWlsaW5nQnJlYWtzKHRoaXMuYm9keSksdGhpcy5zZWxlY3Rpb25SZXN0b3JlUG9pbnQ9bnVsbCx0aGlzLnVwZGF0ZSgpLHRoaXMudG9vbGJhci5yZWZyZXNoVG9vbHMoKSksdCl9LHNhdmVTZWxlY3Rpb246ZnVuY3Rpb24odCl7dD10fHx0aGlzLmdldFJhbmdlKCk7dmFyIG49dC5jb21tb25BbmNlc3RvckNvbnRhaW5lcixpPXRoaXMuYm9keTsobj09aXx8ZS5jb250YWlucyhpLG4pKSYmKHRoaXMuc2VsZWN0aW9uUmVzdG9yZVBvaW50PW5ldyBhLnVpLmVkaXRvci5SZXN0b3JlUG9pbnQodCkpfSxfZm9jdXNCb2R5OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLmJvZHksbj10aGlzLndyYXBwZXImJnRoaXMud3JhcHBlci5maW5kKFwiaWZyYW1lXCIpWzBdLGk9dGhpcy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQscj1hLl9hY3RpdmVFbGVtZW50KCk7ciE9dCYmciE9biYmKGU9aS5zY3JvbGxUb3AsdC5mb2N1cygpLGkuc2Nyb2xsVG9wPWUpfSxyZXN0b3JlU2VsZWN0aW9uOmZ1bmN0aW9uKCl7dGhpcy5fZm9jdXNCb2R5KCksdGhpcy5zZWxlY3Rpb25SZXN0b3JlUG9pbnQmJnRoaXMuc2VsZWN0UmFuZ2UodGhpcy5zZWxlY3Rpb25SZXN0b3JlUG9pbnQudG9SYW5nZSgpKX0sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLnJlc3RvcmVTZWxlY3Rpb24oKX0sdXBkYXRlOmZ1bmN0aW9uKGUpe2U9ZXx8dGhpcy5vcHRpb25zLmVuY29kZWQ/dGhpcy5lbmNvZGVkVmFsdWUoKTp0aGlzLnZhbHVlKCksdGhpcy50ZXh0YXJlYT90aGlzLnRleHRhcmVhLnZhbChlKTp0aGlzLl9vbGRWYWx1ZT1lfSxlbmNvZGVkVmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gYS51aS5lZGl0b3IuRG9tLmVuY29kZSh0aGlzLnZhbHVlKCkpfSxjcmVhdGVSYW5nZTpmdW5jdGlvbihlKXtyZXR1cm4gYS51aS5lZGl0b3IuUmFuZ2VVdGlscy5jcmVhdGVSYW5nZShlfHx0aGlzLmRvY3VtZW50KX0sZ2V0U2VsZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGEudWkuZWRpdG9yLlNlbGVjdGlvblV0aWxzLnNlbGVjdGlvbkZyb21Eb2N1bWVudCh0aGlzLmRvY3VtZW50KX0sc2VsZWN0UmFuZ2U6ZnVuY3Rpb24oZSl7dGhpcy5fZm9jdXNCb2R5KCk7dmFyIHQ9dGhpcy5nZXRTZWxlY3Rpb24oKTt0LnJlbW92ZUFsbFJhbmdlcygpLHQuYWRkUmFuZ2UoZSksdGhpcy5zYXZlU2VsZWN0aW9uKGUpfSxnZXRSYW5nZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0U2VsZWN0aW9uKCksdD1lJiZlLnJhbmdlQ291bnQ+MD9lLmdldFJhbmdlQXQoMCk6dGhpcy5jcmVhdGVSYW5nZSgpLG49dGhpcy5kb2N1bWVudDtyZXR1cm4gdC5zdGFydENvbnRhaW5lciE9bnx8dC5lbmRDb250YWluZXIhPW58fHQuc3RhcnRPZmZzZXR8fHQuZW5kT2Zmc2V0fHwodC5zZXRTdGFydCh0aGlzLmJvZHksMCksdC5jb2xsYXBzZSghMCkpLHR9LHNlbGVjdGVkSHRtbDpmdW5jdGlvbigpe3JldHVybiBhLnVpLmVkaXRvci5TZXJpYWxpemVyLmRvbVRvWGh0bWwodGhpcy5nZXRSYW5nZSgpLmNsb25lQ29udGVudHMoKSl9LHBhc3RlOmZ1bmN0aW9uKGUsdCl7dGhpcy5jbGlwYm9hcmQucGFzdGUoZSx0KX0sZXhlYzpmdW5jdGlvbihlLG4pe3ZhciBpLHIsbyxhPXRoaXMscz1udWxsO2lmKCFlKXRocm93IEVycm9yKFwia2VuZG9FZGl0b3IuZXhlYygpOiBgbmFtZWAgcGFyYW1ldGVyIGNhbm5vdCBiZSBlbXB0eVwiKTtpZihlPWUudG9Mb3dlckNhc2UoKSxhLmtleWJvYXJkLmlzVHlwaW5nSW5Qcm9ncmVzcygpfHxhLnJlc3RvcmVTZWxlY3Rpb24oKSxyPWEudG9vbGJhci50b29sQnlJZChlKSwhcilmb3IobyBpbiBiLmRlZmF1bHRUb29scylpZihvLnRvTG93ZXJDYXNlKCk9PWUpe3I9Yi5kZWZhdWx0VG9vbHNbb107YnJlYWt9aWYocil7aWYoaT1hLmdldFJhbmdlKCksci5jb21tYW5kJiYocz1yLmNvbW1hbmQodSh7cmFuZ2U6aX0sbikpKSxhLnRyaWdnZXIoXCJleGVjdXRlXCIse25hbWU6ZSxjb21tYW5kOnN9KSwvXih1bmRvfHJlZG8pJC9pLnRlc3QoZSkpYS51bmRvUmVkb1N0YWNrW2VdKCk7ZWxzZSBpZihzJiYocy5tYW5hZ2VzVW5kb1JlZG98fGEudW5kb1JlZG9TdGFjay5wdXNoKHMpLHMuZWRpdG9yPWEscy5leGVjKCkscy5hc3luYykpcmV0dXJuIHMuY2hhbmdlPWgoYS5fc2VsZWN0aW9uQ2hhbmdlLGEpLHQ7YS5fc2VsZWN0aW9uQ2hhbmdlKCl9fX0pO2IuZGVmYXVsdFRvb2xzPXt1bmRvOntvcHRpb25zOntrZXk6XCJaXCIsY3RybDohMH19LHJlZG86e29wdGlvbnM6e2tleTpcIllcIixjdHJsOiEwfX19LGEudWkucGx1Z2luKGIpLG49cy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zPWV9LGluaXRpYWxpemU6ZnVuY3Rpb24oZSx0KXtlLmF0dHIoe3Vuc2VsZWN0YWJsZTpcIm9uXCIsdGl0bGU6dC50aXRsZX0pfSxjb21tYW5kOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdGhpcy5vcHRpb25zLmNvbW1hbmQoZSl9LHVwZGF0ZTplLm5vb3B9KSxuLmV4ZWM9ZnVuY3Rpb24oZSx0LG4pe2UuZXhlYyh0LHt2YWx1ZTpufSl9LGk9bi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7bi5mbi5pbml0LmNhbGwodGhpcyxlKX0sY29tbWFuZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgYS51aS5lZGl0b3IuRm9ybWF0Q29tbWFuZCh1KGUse2Zvcm1hdHRlcjp0Lm9wdGlvbnMuZm9ybWF0dGVyfSkpfSx1cGRhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLm9wdGlvbnMuZmluZGVyLmlzRm9ybWF0dGVkKHQpO2UudG9nZ2xlQ2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIsbiksZS5hdHRyKFwiYXJpYS1wcmVzc2VkXCIsbil9fSksdi5yZWdpc3RlclRvb2woXCJzZXBhcmF0b3JcIixuZXcgbih7dGVtcGxhdGU6bmV3IG0oe3RlbXBsYXRlOnYuc2VwYXJhdG9yVGVtcGxhdGV9KX0pKSxyPWQubXNpZSYmOT5kLnZlcnNpb24/XCLvu79cIjpcIlwiLG89JzxiciBjbGFzcz1cImstYnJcIiAvPicsZC5tc2llJiYoMTA+ZC52ZXJzaW9uP289XCLvu79cIjoxMT5kLnZlcnNpb24mJihvPVwiIFwiKSksdShhLnVpLHtlZGl0b3I6e1Rvb2xUZW1wbGF0ZTptLEVkaXRvclV0aWxzOnYsVG9vbDpuLEZvcm1hdFRvb2w6aSxfYm9tRmlsbDpyLGVtcHR5RWxlbWVudENvbnRlbnQ6b319KX0od2luZG93LmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXt2YXIgdCxuLGk9e307Zm9yKHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspaVtlW3RdXT0hMDtyZXR1cm4gaX12YXIgbixpLHIsbyxhLHMsbCxjLGQsdSxoPXdpbmRvdy5rZW5kbyxwPWUubWFwLGY9ZS5leHRlbmQsZz1oLnN1cHBvcnQuYnJvd3NlcixtPVwic3R5bGVcIix2PVwiZmxvYXRcIixfPVwiY3NzRmxvYXRcIix5PVwic3R5bGVGbG9hdFwiLHc9XCJjbGFzc1wiLGI9XCJrLW1hcmtlclwiLGs9dChcImFyZWEsYmFzZSxiYXNlZm9udCxicixjb2wsZnJhbWUsaHIsaW1nLGlucHV0LGlzaW5kZXgsbGluayxtZXRhLHBhcmFtLGVtYmVkXCIuc3BsaXQoXCIsXCIpKSx4PVwiZGl2LHAsaDEsaDIsaDMsaDQsaDUsaDYsYWRkcmVzcyxhcHBsZXQsYmxvY2txdW90ZSxidXR0b24sY2VudGVyLGRkLGRpcixkbCxkdCxmaWVsZHNldCxmb3JtLGZyYW1lc2V0LGhyLGlmcmFtZSxpc2luZGV4LG1hcCxtZW51LG5vZnJhbWVzLG5vc2NyaXB0LG9iamVjdCxwcmUsc2NyaXB0LHRhYmxlLHRib2R5LHRkLHRmb290LHRoLHRoZWFkLHRyLGhlYWRlcixhcnRpY2xlLG5hdixmb290ZXIsc2VjdGlvbixhc2lkZSxtYWluLGZpZ3VyZSxmaWdjYXB0aW9uXCIuc3BsaXQoXCIsXCIpLEM9eC5jb25jYXQoW1widWxcIixcIm9sXCIsXCJsaVwiXSksUz10KEMpLFQ9XCJzcGFuLGVtLGEsYWJicixhY3JvbnltLGFwcGxldCxiLGJhc2Vmb250LGJkbyxiaWcsYnIsYnV0dG9uLGNpdGUsY29kZSxkZWwsZGZuLGZvbnQsaSxpZnJhbWUsaW1nLGlucHV0LGlucyxrYmQsbGFiZWwsbWFwLG9iamVjdCxxLHMsc2FtcCxzY3JpcHQsc2VsZWN0LHNtYWxsLHN0cmlrZSxzdHJvbmcsc3ViLHN1cCx0ZXh0YXJlYSx0dCx1LHZhcixkYXRhLHRpbWUsbWFyayxydWJ5XCIuc3BsaXQoXCIsXCIpLEQ9dChUKSxBPXQoXCJjaGVja2VkLGNvbXBhY3QsZGVjbGFyZSxkZWZlcixkaXNhYmxlZCxpc21hcCxtdWx0aXBsZSxub2hyZWYsbm9yZXNpemUsbm9zaGFkZSxub3dyYXAscmVhZG9ubHksc2VsZWN0ZWRcIi5zcGxpdChcIixcIikpLEU9ZnVuY3Rpb24oZSl7MT09ZS5ub2RlVHlwZSYmZS5ub3JtYWxpemUoKX07Zy5tc2llJiZnLnZlcnNpb24+PTgmJihFPWZ1bmN0aW9uKGUpe2lmKDE9PWUubm9kZVR5cGUmJmUuZmlyc3RDaGlsZClmb3IodmFyIHQ9ZS5maXJzdENoaWxkLG49dDs7KXtpZihuPW4ubmV4dFNpYmxpbmcsIW4pYnJlYWs7Mz09bi5ub2RlVHlwZSYmMz09dC5ub2RlVHlwZSYmKG4ubm9kZVZhbHVlPXQubm9kZVZhbHVlK24ubm9kZVZhbHVlLHUucmVtb3ZlKHQpKSx0PW59fSksbj0vXlxccyskLyxpPS9yZ2JcXHMqXFwoXFxzKihcXGQrKVxccyosXFxzKihcXGQrKVxccyosXFxzKihcXGQrKVxccypcXCkvaSxyPS9cXHVmZWZmL2csbz0vXihcXHMrfFxcdWZlZmYpJC8scz1cImNvbG9yLHBhZGRpbmctbGVmdCxwYWRkaW5nLXJpZ2h0LHBhZGRpbmctdG9wLHBhZGRpbmctYm90dG9tLGJhY2tncm91bmQtY29sb3IsYmFja2dyb3VuZC1hdHRhY2htZW50LGJhY2tncm91bmQtaW1hZ2UsYmFja2dyb3VuZC1wb3NpdGlvbixiYWNrZ3JvdW5kLXJlcGVhdCxib3JkZXItdG9wLXN0eWxlLGJvcmRlci10b3Atd2lkdGgsYm9yZGVyLXRvcC1jb2xvcixib3JkZXItYm90dG9tLXN0eWxlLGJvcmRlci1ib3R0b20td2lkdGgsYm9yZGVyLWJvdHRvbS1jb2xvcixib3JkZXItbGVmdC1zdHlsZSxib3JkZXItbGVmdC13aWR0aCxib3JkZXItbGVmdC1jb2xvcixib3JkZXItcmlnaHQtc3R5bGUsYm9yZGVyLXJpZ2h0LXdpZHRoLGJvcmRlci1yaWdodC1jb2xvcixmb250LWZhbWlseSxmb250LXNpemUsZm9udC1zdHlsZSxmb250LXZhcmlhbnQsZm9udC13ZWlnaHQsbGluZS1oZWlnaHRcIi5zcGxpdChcIixcIiksbD0vWzw+XFwmXS9nLGM9L1tcXHUwMEEwLVxcdTI2NjY8PlxcJl0vZyxkPXszNDpcInF1b3RcIiwzODpcImFtcFwiLDM5OlwiYXBvc1wiLDYwOlwibHRcIiw2MjpcImd0XCIsMTYwOlwibmJzcFwiLDE2MTpcImlleGNsXCIsMTYyOlwiY2VudFwiLDE2MzpcInBvdW5kXCIsMTY0OlwiY3VycmVuXCIsMTY1OlwieWVuXCIsMTY2OlwiYnJ2YmFyXCIsMTY3Olwic2VjdFwiLDE2ODpcInVtbFwiLDE2OTpcImNvcHlcIiwxNzA6XCJvcmRmXCIsMTcxOlwibGFxdW9cIiwxNzI6XCJub3RcIiwxNzM6XCJzaHlcIiwxNzQ6XCJyZWdcIiwxNzU6XCJtYWNyXCIsMTc2OlwiZGVnXCIsMTc3OlwicGx1c21uXCIsMTc4Olwic3VwMlwiLDE3OTpcInN1cDNcIiwxODA6XCJhY3V0ZVwiLDE4MTpcIm1pY3JvXCIsMTgyOlwicGFyYVwiLDE4MzpcIm1pZGRvdFwiLDE4NDpcImNlZGlsXCIsMTg1Olwic3VwMVwiLDE4NjpcIm9yZG1cIiwxODc6XCJyYXF1b1wiLDE4ODpcImZyYWMxNFwiLDE4OTpcImZyYWMxMlwiLDE5MDpcImZyYWMzNFwiLDE5MTpcImlxdWVzdFwiLDE5MjpcIkFncmF2ZVwiLDE5MzpcIkFhY3V0ZVwiLDE5NDpcIkFjaXJjXCIsMTk1OlwiQXRpbGRlXCIsMTk2OlwiQXVtbFwiLDE5NzpcIkFyaW5nXCIsMTk4OlwiQUVsaWdcIiwxOTk6XCJDY2VkaWxcIiwyMDA6XCJFZ3JhdmVcIiwyMDE6XCJFYWN1dGVcIiwyMDI6XCJFY2lyY1wiLDIwMzpcIkV1bWxcIiwyMDQ6XCJJZ3JhdmVcIiwyMDU6XCJJYWN1dGVcIiwyMDY6XCJJY2lyY1wiLDIwNzpcIkl1bWxcIiwyMDg6XCJFVEhcIiwyMDk6XCJOdGlsZGVcIiwyMTA6XCJPZ3JhdmVcIiwyMTE6XCJPYWN1dGVcIiwyMTI6XCJPY2lyY1wiLDIxMzpcIk90aWxkZVwiLDIxNDpcIk91bWxcIiwyMTU6XCJ0aW1lc1wiLDIxNjpcIk9zbGFzaFwiLDIxNzpcIlVncmF2ZVwiLDIxODpcIlVhY3V0ZVwiLDIxOTpcIlVjaXJjXCIsMjIwOlwiVXVtbFwiLDIyMTpcIllhY3V0ZVwiLDIyMjpcIlRIT1JOXCIsMjIzOlwic3psaWdcIiwyMjQ6XCJhZ3JhdmVcIiwyMjU6XCJhYWN1dGVcIiwyMjY6XCJhY2lyY1wiLDIyNzpcImF0aWxkZVwiLDIyODpcImF1bWxcIiwyMjk6XCJhcmluZ1wiLDIzMDpcImFlbGlnXCIsMjMxOlwiY2NlZGlsXCIsMjMyOlwiZWdyYXZlXCIsMjMzOlwiZWFjdXRlXCIsMjM0OlwiZWNpcmNcIiwyMzU6XCJldW1sXCIsMjM2OlwiaWdyYXZlXCIsMjM3OlwiaWFjdXRlXCIsMjM4OlwiaWNpcmNcIiwyMzk6XCJpdW1sXCIsMjQwOlwiZXRoXCIsMjQxOlwibnRpbGRlXCIsMjQyOlwib2dyYXZlXCIsMjQzOlwib2FjdXRlXCIsMjQ0Olwib2NpcmNcIiwyNDU6XCJvdGlsZGVcIiwyNDY6XCJvdW1sXCIsMjQ3OlwiZGl2aWRlXCIsMjQ4Olwib3NsYXNoXCIsMjQ5OlwidWdyYXZlXCIsMjUwOlwidWFjdXRlXCIsMjUxOlwidWNpcmNcIiwyNTI6XCJ1dW1sXCIsMjUzOlwieWFjdXRlXCIsMjU0OlwidGhvcm5cIiwyNTU6XCJ5dW1sXCIsNDAyOlwiZm5vZlwiLDkxMzpcIkFscGhhXCIsOTE0OlwiQmV0YVwiLDkxNTpcIkdhbW1hXCIsOTE2OlwiRGVsdGFcIiw5MTc6XCJFcHNpbG9uXCIsOTE4OlwiWmV0YVwiLDkxOTpcIkV0YVwiLDkyMDpcIlRoZXRhXCIsOTIxOlwiSW90YVwiLDkyMjpcIkthcHBhXCIsOTIzOlwiTGFtYmRhXCIsOTI0OlwiTXVcIiw5MjU6XCJOdVwiLDkyNjpcIlhpXCIsOTI3OlwiT21pY3JvblwiLDkyODpcIlBpXCIsOTI5OlwiUmhvXCIsOTMxOlwiU2lnbWFcIiw5MzI6XCJUYXVcIiw5MzM6XCJVcHNpbG9uXCIsOTM0OlwiUGhpXCIsOTM1OlwiQ2hpXCIsOTM2OlwiUHNpXCIsOTM3OlwiT21lZ2FcIiw5NDU6XCJhbHBoYVwiLDk0NjpcImJldGFcIiw5NDc6XCJnYW1tYVwiLDk0ODpcImRlbHRhXCIsOTQ5OlwiZXBzaWxvblwiLDk1MDpcInpldGFcIiw5NTE6XCJldGFcIiw5NTI6XCJ0aGV0YVwiLDk1MzpcImlvdGFcIiw5NTQ6XCJrYXBwYVwiLDk1NTpcImxhbWJkYVwiLDk1NjpcIm11XCIsOTU3OlwibnVcIiw5NTg6XCJ4aVwiLDk1OTpcIm9taWNyb25cIiw5NjA6XCJwaVwiLDk2MTpcInJob1wiLDk2MjpcInNpZ21hZlwiLDk2MzpcInNpZ21hXCIsOTY0OlwidGF1XCIsOTY1OlwidXBzaWxvblwiLDk2NjpcInBoaVwiLDk2NzpcImNoaVwiLDk2ODpcInBzaVwiLDk2OTpcIm9tZWdhXCIsOTc3OlwidGhldGFzeW1cIiw5Nzg6XCJ1cHNpaFwiLDk4MjpcInBpdlwiLDgyMjY6XCJidWxsXCIsODIzMDpcImhlbGxpcFwiLDgyNDI6XCJwcmltZVwiLDgyNDM6XCJQcmltZVwiLDgyNTQ6XCJvbGluZVwiLDgyNjA6XCJmcmFzbFwiLDg0NzI6XCJ3ZWllcnBcIiw4NDY1OlwiaW1hZ2VcIiw4NDc2OlwicmVhbFwiLDg0ODI6XCJ0cmFkZVwiLDg1MDE6XCJhbGVmc3ltXCIsODU5MjpcImxhcnJcIiw4NTkzOlwidWFyclwiLDg1OTQ6XCJyYXJyXCIsODU5NTpcImRhcnJcIiw4NTk2OlwiaGFyclwiLDg2Mjk6XCJjcmFyclwiLDg2NTY6XCJsQXJyXCIsODY1NzpcInVBcnJcIiw4NjU4OlwickFyclwiLDg2NTk6XCJkQXJyXCIsODY2MDpcImhBcnJcIiw4NzA0OlwiZm9yYWxsXCIsODcwNjpcInBhcnRcIiw4NzA3OlwiZXhpc3RcIiw4NzA5OlwiZW1wdHlcIiw4NzExOlwibmFibGFcIiw4NzEyOlwiaXNpblwiLDg3MTM6XCJub3RpblwiLDg3MTU6XCJuaVwiLDg3MTk6XCJwcm9kXCIsODcyMTpcInN1bVwiLDg3MjI6XCJtaW51c1wiLDg3Mjc6XCJsb3dhc3RcIiw4NzMwOlwicmFkaWNcIiw4NzMzOlwicHJvcFwiLDg3MzQ6XCJpbmZpblwiLDg3MzY6XCJhbmdcIiw4NzQzOlwiYW5kXCIsODc0NDpcIm9yXCIsODc0NTpcImNhcFwiLDg3NDY6XCJjdXBcIiw4NzQ3OlwiaW50XCIsODc1NjpcInRoZXJlNFwiLDg3NjQ6XCJzaW1cIiw4NzczOlwiY29uZ1wiLDg3NzY6XCJhc3ltcFwiLDg4MDA6XCJuZVwiLDg4MDE6XCJlcXVpdlwiLDg4MDQ6XCJsZVwiLDg4MDU6XCJnZVwiLDg4MzQ6XCJzdWJcIiw4ODM1Olwic3VwXCIsODgzNjpcIm5zdWJcIiw4ODM4Olwic3ViZVwiLDg4Mzk6XCJzdXBlXCIsODg1MzpcIm9wbHVzXCIsODg1NTpcIm90aW1lc1wiLDg4Njk6XCJwZXJwXCIsODkwMTpcInNkb3RcIiw4OTY4OlwibGNlaWxcIiw4OTY5OlwicmNlaWxcIiw4OTcwOlwibGZsb29yXCIsODk3MTpcInJmbG9vclwiLDkwMDE6XCJsYW5nXCIsOTAwMjpcInJhbmdcIiw5Njc0OlwibG96XCIsOTgyNDpcInNwYWRlc1wiLDk4Mjc6XCJjbHVic1wiLDk4Mjk6XCJoZWFydHNcIiw5ODMwOlwiZGlhbXNcIiwzMzg6XCJPRWxpZ1wiLDMzOTpcIm9lbGlnXCIsMzUyOlwiU2Nhcm9uXCIsMzUzOlwic2Nhcm9uXCIsMzc2OlwiWXVtbFwiLDcxMDpcImNpcmNcIiw3MzI6XCJ0aWxkZVwiLDgxOTQ6XCJlbnNwXCIsODE5NTpcImVtc3BcIiw4MjAxOlwidGhpbnNwXCIsODIwNDpcInp3bmpcIiw4MjA1OlwiendqXCIsODIwNjpcImxybVwiLDgyMDc6XCJybG1cIiw4MjExOlwibmRhc2hcIiw4MjEyOlwibWRhc2hcIiw4MjE2OlwibHNxdW9cIiw4MjE3OlwicnNxdW9cIiw4MjE4Olwic2JxdW9cIiw4MjIwOlwibGRxdW9cIiw4MjIxOlwicmRxdW9cIiw4MjIyOlwiYmRxdW9cIiw4MjI0OlwiZGFnZ2VyXCIsODIyNTpcIkRhZ2dlclwiLDgyNDA6XCJwZXJtaWxcIiw4MjQ5OlwibHNhcXVvXCIsODI1MDpcInJzYXF1b1wiLDgzNjQ6XCJldXJvXCJ9LHU9e2Jsb2NrOlMsaW5saW5lOkQsZmluZE5vZGVJbmRleDpmdW5jdGlvbihlLHQpe3ZhciBuPTA7aWYoIWUpcmV0dXJuLTE7Zm9yKDs7KXtpZihlPWUucHJldmlvdXNTaWJsaW5nLCFlKWJyZWFrO3QmJjM9PWUubm9kZVR5cGV8fG4rK31yZXR1cm4gbn0saXNEYXRhTm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmbnVsbCE9PWUubm9kZVZhbHVlJiZudWxsIT09ZS5kYXRhfSxpc0FuY2VzdG9yT2Y6ZnVuY3Rpb24odCxuKXt0cnl7cmV0dXJuIXUuaXNEYXRhTm9kZSh0KSYmKGUuY29udGFpbnModCx1LmlzRGF0YU5vZGUobik/bi5wYXJlbnROb2RlOm4pfHxuLnBhcmVudE5vZGU9PXQpfWNhdGNoKGkpe3JldHVybiExfX0saXNBbmNlc3Rvck9yU2VsZjpmdW5jdGlvbihlLHQpe3JldHVybiB1LmlzQW5jZXN0b3JPZihlLHQpfHxlPT10fSxmaW5kQ2xvc2VzdEFuY2VzdG9yOmZ1bmN0aW9uKGUsdCl7aWYodS5pc0FuY2VzdG9yT2YoZSx0KSlmb3IoO3QmJnQucGFyZW50Tm9kZSE9ZTspdD10LnBhcmVudE5vZGU7cmV0dXJuIHR9LGdldE5vZGVMZW5ndGg6ZnVuY3Rpb24oZSl7cmV0dXJuIHUuaXNEYXRhTm9kZShlKT9lLmxlbmd0aDplLmNoaWxkTm9kZXMubGVuZ3RofSxzcGxpdERhdGFOb2RlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPWUuY2xvbmVOb2RlKCExKSxpPVwiXCIscj1lO3IubmV4dFNpYmxpbmcmJjM9PXIubmV4dFNpYmxpbmcubm9kZVR5cGUmJnIubmV4dFNpYmxpbmcubm9kZVZhbHVlOylpKz1yLm5leHRTaWJsaW5nLm5vZGVWYWx1ZSxyPXIubmV4dFNpYmxpbmc7ZS5kZWxldGVEYXRhKHQsZS5sZW5ndGgpLG4uZGVsZXRlRGF0YSgwLHQpLG4ubm9kZVZhbHVlKz1pLHUuaW5zZXJ0QWZ0ZXIobixlKX0sYXR0ckVxdWFsczpmdW5jdGlvbihlLHQpe3ZhciBuLGk7Zm9yKG4gaW4gdClpZihpPWVbbl0sbj09diYmKGk9ZVtoLnN1cHBvcnQuY3NzRmxvYXQ/Xzp5XSksXCJvYmplY3RcIj09dHlwZW9mIGkpe2lmKCF1LmF0dHJFcXVhbHMoaSx0W25dKSlyZXR1cm4hMX1lbHNlIGlmKGkhPXRbbl0pcmV0dXJuITE7cmV0dXJuITB9LGJsb2NrUGFyZW50T3JCb2R5OmZ1bmN0aW9uKGUpe3JldHVybiB1LnBhcmVudE9mVHlwZShlLEMpfHxlLm93bmVyRG9jdW1lbnQuYm9keX0sYmxvY2tQYXJlbnRzOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvPVtdO2ZvcihuPTAsaT10Lmxlbmd0aDtpPm47bisrKXI9dS5wYXJlbnRPZlR5cGUodFtuXSx1LmJsb2NrRWxlbWVudHMpLHImJmUuaW5BcnJheShyLG8pPDAmJm8ucHVzaChyKTtyZXR1cm4gb30sd2luZG93RnJvbURvY3VtZW50OmZ1bmN0aW9uKGUpe3JldHVybiBlLmRlZmF1bHRWaWV3fHxlLnBhcmVudFdpbmRvd30sbm9ybWFsaXplOkUsYmxvY2tFbGVtZW50czpDLG5vbkxpc3RCbG9ja0VsZW1lbnRzOngsaW5saW5lRWxlbWVudHM6VCxlbXB0eTprLGZpbGxBdHRyczpBLHRvSGV4OmZ1bmN0aW9uKGUpe3ZhciB0PWkuZXhlYyhlKTtyZXR1cm4gdD9cIiNcIitwKHQuc2xpY2UoMSksZnVuY3Rpb24oZSl7cmV0dXJuIGU9cGFyc2VJbnQoZSwxMCkudG9TdHJpbmcoMTYpLGUubGVuZ3RoPjE/ZTpcIjBcIitlfSkuam9pbihcIlwiKTplfSxlbmNvZGU6ZnVuY3Rpb24oZSx0KXt2YXIgbj0hdHx8dC5lbnRpdGllcz9jOmw7cmV0dXJuIGUucmVwbGFjZShuLGZ1bmN0aW9uKGUpe3ZhciB0PWUuY2hhckNvZGVBdCgwKSxuPWRbdF07cmV0dXJuIG4/XCImXCIrbitcIjtcIjplfSl9LHN0cmlwQm9tOmZ1bmN0aW9uKGUpe3JldHVybihlfHxcIlwiKS5yZXBsYWNlKHIsXCJcIil9LGluc2lnbmlmaWNhbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5hdHRyaWJ1dGVzO3JldHVyblwiay1tYXJrZXJcIj09ZS5jbGFzc05hbWV8fHUuaXMoZSxcImJyXCIpJiYoXCJrLWJyXCI9PWUuY2xhc3NOYW1lfHx0Ll9tb3pfZGlydHl8fHQuX21vel9lZGl0b3JfYm9ndXNfbm9kZSl9LGVtcHR5Tm9kZTpmdW5jdGlvbih0KXt2YXIgbj1lLmdyZXAodC5jaGlsZE5vZGVzLGZ1bmN0aW9uKGUpe3JldHVybiB1LmlzKGUsXCJiclwiKT8hMTp1Lmluc2lnbmlmaWNhbnQoZSk/ITE6Mz09ZS5ub2RlVHlwZSYmby50ZXN0KGUubm9kZVZhbHVlKT8hMTp1LmlzKGUsXCJwXCIpJiZ1LmVtcHR5Tm9kZShlKT8hMTohMH0pO3JldHVybiFuLmxlbmd0aH0sbmFtZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpfSxzaWduaWZpY2FudENoaWxkTm9kZXM6ZnVuY3Rpb24odCl7cmV0dXJuIGUuZ3JlcCh0LmNoaWxkTm9kZXMsZnVuY3Rpb24oZSl7cmV0dXJuIDMhPWUubm9kZVR5cGV8fCF1LmlzV2hpdGVzcGFjZShlKX0pfSxsYXN0VGV4dE5vZGU6ZnVuY3Rpb24oZSl7dmFyIHQsbj1udWxsO2lmKDM9PWUubm9kZVR5cGUpcmV0dXJuIGU7Zm9yKHQ9ZS5sYXN0Q2hpbGQ7dDt0PXQucHJldmlvdXNTaWJsaW5nKWlmKG49dS5sYXN0VGV4dE5vZGUodCkpcmV0dXJuIG47cmV0dXJuIG59LGlzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHUubmFtZShlKT09dH0saXNNYXJrZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2xhc3NOYW1lPT1ifSxpc1doaXRlc3BhY2U6ZnVuY3Rpb24oZSl7cmV0dXJuIG4udGVzdChlLm5vZGVWYWx1ZSl9LGlzQmxvY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIFNbdS5uYW1lKGUpXX0saXNFbXB0eTpmdW5jdGlvbihlKXtyZXR1cm4ga1t1Lm5hbWUoZSldfSxpc0lubGluZTpmdW5jdGlvbihlKXtyZXR1cm4gRFt1Lm5hbWUoZSldfSxzY3JvbGxDb250YWluZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dS53aW5kb3dGcm9tRG9jdW1lbnQoZSksbj0odC5jb250ZW50V2luZG93fHx0KS5kb2N1bWVudHx8dC5vd25lckRvY3VtZW50fHx0O3JldHVybiBuPWguc3VwcG9ydC5icm93c2VyLndlYmtpdHx8XCJCYWNrQ29tcGF0XCI9PW4uY29tcGF0TW9kZT9uLmJvZHk6bi5kb2N1bWVudEVsZW1lbnR9LHNjcm9sbFRvOmZ1bmN0aW9uKHQpe3ZhciBuLGkscj1lKHUuaXNEYXRhTm9kZSh0KT90LnBhcmVudE5vZGU6dCksbz11LndpbmRvd0Zyb21Eb2N1bWVudCh0Lm93bmVyRG9jdW1lbnQpLGE9by5pbm5lckhlaWdodCxzPXUuc2Nyb2xsQ29udGFpbmVyKHQub3duZXJEb2N1bWVudCk7XCJiclwiPT11Lm5hbWUoclswXSkmJihyPXIucGFyZW50KCkpLG49ci5vZmZzZXQoKS50b3AsaT1yWzBdLm9mZnNldEhlaWdodCxpK24+cy5zY3JvbGxUb3ArYSYmKHMuc2Nyb2xsVG9wPWkrbi1hKX0scGVyc2lzdFNjcm9sbFRvcDpmdW5jdGlvbihlKXthPXUuc2Nyb2xsQ29udGFpbmVyKGUpLnNjcm9sbFRvcH0scmVzdG9yZVNjcm9sbFRvcDpmdW5jdGlvbihlKXt1LnNjcm9sbENvbnRhaW5lcihlKS5zY3JvbGxUb3A9YX0saW5zZXJ0QXQ6ZnVuY3Rpb24oZSx0LG4pe2UuaW5zZXJ0QmVmb3JlKHQsZS5jaGlsZE5vZGVzW25dfHxudWxsKX0saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQucGFyZW50Tm9kZT90LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdCk6dH0saW5zZXJ0QWZ0ZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHQubmV4dFNpYmxpbmcpfSxyZW1vdmU6ZnVuY3Rpb24oZSl7ZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpfSxyZW1vdmVUZXh0U2libGluZ3M6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUucGFyZW50Tm9kZTtlLm5leHRTaWJsaW5nJiYzPT1lLm5leHRTaWJsaW5nLm5vZGVUeXBlOyl0LnJlbW92ZUNoaWxkKGUubmV4dFNpYmxpbmcpO2Zvcig7ZS5wcmV2aW91c1NpYmxpbmcmJjM9PWUucHJldmlvdXNTaWJsaW5nLm5vZGVUeXBlOyl0LnJlbW92ZUNoaWxkKGUucHJldmlvdXNTaWJsaW5nKX0sdHJpbTpmdW5jdGlvbihlKXt2YXIgdCxuO2Zvcih0PWUuY2hpbGROb2Rlcy5sZW5ndGgtMTt0Pj0wO3QtLSluPWUuY2hpbGROb2Rlc1t0XSx1LmlzRGF0YU5vZGUobik/KHUuc3RyaXBCb20obi5ub2RlVmFsdWUpLmxlbmd0aHx8dS5yZW1vdmUobiksdS5pc1doaXRlc3BhY2UobikmJnUuaW5zZXJ0QmVmb3JlKG4sZSkpOm4uY2xhc3NOYW1lIT1iJiYodS50cmltKG4pLG4uY2hpbGROb2Rlcy5sZW5ndGh8fHUuaXNFbXB0eShuKXx8dS5yZW1vdmUobikpO3JldHVybiBlfSxjbG9zZXN0OmZ1bmN0aW9uKGUsdCl7Zm9yKDtlJiZ1Lm5hbWUoZSkhPXQ7KWU9ZS5wYXJlbnROb2RlO3JldHVybiBlfSxzaWJsaW5nOmZ1bmN0aW9uKGUsdCl7ZG8gZT1lW3RdO3doaWxlKGUmJjEhPWUubm9kZVR5cGUpO3JldHVybiBlfSxuZXh0OmZ1bmN0aW9uKGUpe3JldHVybiB1LnNpYmxpbmcoZSxcIm5leHRTaWJsaW5nXCIpfSxwcmV2OmZ1bmN0aW9uKGUpe3JldHVybiB1LnNpYmxpbmcoZSxcInByZXZpb3VzU2libGluZ1wiKX0scGFyZW50T2ZUeXBlOmZ1bmN0aW9uKGUsdCl7ZG8gZT1lLnBhcmVudE5vZGU7d2hpbGUoZSYmIXUub2ZUeXBlKGUsdCkpO3JldHVybiBlfSxvZlR5cGU6ZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5pbkFycmF5KHUubmFtZSh0KSxuKT49MH0sY2hhbmdlVGFnOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sYSxzLGw9dS5jcmVhdGUoZS5vd25lckRvY3VtZW50LHQpLGM9ZS5hdHRyaWJ1dGVzO2lmKCFuKWZvcihpPTAscj1jLmxlbmd0aDtyPmk7aSsrKXM9Y1tpXSxzLnNwZWNpZmllZCYmKG89cy5ub2RlTmFtZSxhPXMubm9kZVZhbHVlLG89PXc/bC5jbGFzc05hbWU9YTpvPT1tP2wuc3R5bGUuY3NzVGV4dD1lLnN0eWxlLmNzc1RleHQ6bC5zZXRBdHRyaWJ1dGUobyxhKSk7Zm9yKDtlLmZpcnN0Q2hpbGQ7KWwuYXBwZW5kQ2hpbGQoZS5maXJzdENoaWxkKTtyZXR1cm4gdS5pbnNlcnRCZWZvcmUobCxlKSx1LnJlbW92ZShlKSxsfSxlZGl0YWJsZVBhcmVudDpmdW5jdGlvbihlKXtmb3IoO2UmJigzPT1lLm5vZGVUeXBlfHxcInRydWVcIiE9PWUuY29udGVudEVkaXRhYmxlKTspZT1lLnBhcmVudE5vZGU7cmV0dXJuIGV9LHdyYXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdS5pbnNlcnRCZWZvcmUodCxlKSx0LmFwcGVuZENoaWxkKGUpLHR9LHVud3JhcDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5wYXJlbnROb2RlO2UuZmlyc3RDaGlsZDspdC5pbnNlcnRCZWZvcmUoZS5maXJzdENoaWxkLGUpO3QucmVtb3ZlQ2hpbGQoZSl9LGNyZWF0ZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHUuYXR0cihlLmNyZWF0ZUVsZW1lbnQodCksbil9LGF0dHI6ZnVuY3Rpb24oZSx0KXt0PWYoe30sdCksdCYmbSBpbiB0JiYodS5zdHlsZShlLHQuc3R5bGUpLGRlbGV0ZSB0LnN0eWxlKTtmb3IodmFyIG4gaW4gdCludWxsPT09dFtuXT8oZS5yZW1vdmVBdHRyaWJ1dGUobiksZGVsZXRlIHRbbl0pOlwiY2xhc3NOYW1lXCI9PW4mJihlW25dPXRbbl0pO3JldHVybiBmKGUsdCl9LHN0eWxlOmZ1bmN0aW9uKHQsbil7ZSh0KS5jc3Mobnx8e30pfSx1bnN0eWxlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIHQpbj09diYmKG49aC5zdXBwb3J0LmNzc0Zsb2F0P186eSksZS5zdHlsZVtuXT1cIlwiO1wiXCI9PT1lLnN0eWxlLmNzc1RleHQmJmUucmVtb3ZlQXR0cmlidXRlKG0pfSxpbmxpbmVTdHlsZTpmdW5jdGlvbih0LG4saSl7dmFyIHIsbz1lKHUuY3JlYXRlKHQub3duZXJEb2N1bWVudCxuLGkpKTtyZXR1cm4gdC5hcHBlbmRDaGlsZChvWzBdKSxyPXAocyxmdW5jdGlvbihlKXtyZXR1cm4gZy5tc2llJiZcImxpbmUtaGVpZ2h0XCI9PWUmJlwiMXB4XCI9PW8uY3NzKGUpP1wibGluZS1oZWlnaHQ6MS41XCI6ZStcIjpcIitvLmNzcyhlKX0pLmpvaW4oXCI7XCIpLG8ucmVtb3ZlKCkscn0sZ2V0RWZmZWN0aXZlQmFja2dyb3VuZDpmdW5jdGlvbihlKXt2YXIgdD1lLmNzcyhcImJhY2tncm91bmQtY29sb3JcIik7cmV0dXJuIHQuaW5kZXhPZihcInJnYmEoMCwgMCwgMCwgMFwiKTwwJiZcInRyYW5zcGFyZW50XCIhPT10P3Q6XCJodG1sXCI9PT1lWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKT9cIldpbmRvd1wiOnUuZ2V0RWZmZWN0aXZlQmFja2dyb3VuZChlLnBhcmVudCgpKX0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG89XCIgXCIrdC5jbGFzc05hbWUrXCIgXCIsYT1uLnNwbGl0KFwiIFwiKTtmb3IoaT0wLHI9YS5sZW5ndGg7cj5pO2krKylvPW8ucmVwbGFjZShcIiBcIithW2ldK1wiIFwiLFwiIFwiKTtvPWUudHJpbShvKSxvLmxlbmd0aD90LmNsYXNzTmFtZT1vOnQucmVtb3ZlQXR0cmlidXRlKHcpfSxjb21tb25BbmNlc3RvcjpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbz1hcmd1bWVudHMubGVuZ3RoLGE9W10scz0xLzAsbD1udWxsO2lmKCFvKXJldHVybiBudWxsO2lmKDE9PW8pcmV0dXJuIGFyZ3VtZW50c1swXTtmb3IoZT0wO28+ZTtlKyspe2Zvcih0PVtdLG49YXJndW1lbnRzW2VdO247KXQucHVzaChuKSxuPW4ucGFyZW50Tm9kZTthLnB1c2godC5yZXZlcnNlKCkpLHM9TWF0aC5taW4ocyx0Lmxlbmd0aCl9aWYoMT09bylyZXR1cm4gYVswXVswXTtmb3IoZT0wO3M+ZTtlKyspe2ZvcihpPWFbMF1bZV0scj0xO28+cjtyKyspaWYoaSE9YVtyXVtlXSlyZXR1cm4gbDtsPWl9cmV0dXJuIGx9LGNsb3Nlc3RTcGxpdHRhYmxlUGFyZW50OmZ1bmN0aW9uKHQpe3ZhciBuLGkscjtyZXR1cm4gbj0xPT10Lmxlbmd0aD91LnBhcmVudE9mVHlwZSh0WzBdLFtcInVsXCIsXCJvbFwiXSk6dS5jb21tb25BbmNlc3Rvci5hcHBseShudWxsLHQpLG58fChuPXUucGFyZW50T2ZUeXBlKHRbMF0sW1wicFwiLFwidGRcIl0pfHx0WzBdLm93bmVyRG9jdW1lbnQuYm9keSksdS5pc0lubGluZShuKSYmKG49dS5ibG9ja1BhcmVudE9yQm9keShuKSksaT1wKHQsdS5lZGl0YWJsZVBhcmVudCkscj11LmNvbW1vbkFuY2VzdG9yKGkpWzBdLGUuY29udGFpbnMobixyKSYmKG49ciksbn0sY2xvc2VzdEVkaXRhYmxlOmZ1bmN0aW9uKHQsbil7dmFyIGk9dS5wYXJlbnRPZlR5cGUodCxuKSxyPXUuZWRpdGFibGVQYXJlbnQodCk7cmV0dXJuIGkmJnImJmUuY29udGFpbnMoaSxyKT9pPXI6IWkmJnImJihpPXIpLGl9LGNsb3Nlc3RFZGl0YWJsZU9mVHlwZTpmdW5jdGlvbihlLHQpe3ZhciBuPXUuY2xvc2VzdEVkaXRhYmxlKGUsdCk7cmV0dXJuIG4mJnUub2ZUeXBlKG4sdCk/bjp2b2lkIDB9LGZpbHRlcjpmdW5jdGlvbihlLHQsbil7Zm9yKHZhciBpLHI9MCxvPXQubGVuZ3RoLGE9W107bz5yO3IrKylpPXUubmFtZSh0W3JdKSwoIW4mJmk9PWV8fG4mJmkhPWUpJiZhLnB1c2godFtyXSk7cmV0dXJuIGF9LGVuc3VyZVRyYWlsaW5nQnJlYWtzOmZ1bmN0aW9uKHQpe3ZhciBuPWUodCkuZmluZChcInAsdGQsdGhcIiksaT1uLmxlbmd0aCxyPTA7XHJcbmlmKGkpZm9yKDtpPnI7cisrKXUuZW5zdXJlVHJhaWxpbmdCcmVhayhuW3JdKTtlbHNlIHUuZW5zdXJlVHJhaWxpbmdCcmVhayh0KX0sZW5zdXJlVHJhaWxpbmdCcmVhazpmdW5jdGlvbihlKXt2YXIgdCxuPWUubGFzdENoaWxkLGk9biYmdS5uYW1lKG4pOyghaXx8XCJiclwiIT1pJiZcImltZ1wiIT1pfHxcImJyXCI9PWkmJlwiay1iclwiIT1uLmNsYXNzTmFtZSkmJih0PWUub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIiksdC5jbGFzc05hbWU9XCJrLWJyXCIsZS5hcHBlbmRDaGlsZCh0KSl9fSxoLnVpLmVkaXRvci5Eb209dX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9d2luZG93LmtlbmRvLG89ci51aS5lZGl0b3IsYT1vLkRvbSxzPWUuZXh0ZW5kLGw9XCJ4eC1zbWFsbCx4LXNtYWxsLHNtYWxsLG1lZGl1bSxsYXJnZSx4LWxhcmdlLHh4LWxhcmdlXCIuc3BsaXQoXCIsXCIpLGM9L1wiL2csZD0vPGJyW14+XSo+L2ksdT0vXlxcZCsoXFwuXFxkKik/KHB4KT8kL2ksaD0vPHA+PFxcL3A+L2kscD0vKFtcXHd8XFwtXSspXFxzKjpcXHMqKFteO10rKTs/L2ksZj0vXnNpenpsZS1cXGQrL2ksZz0vXmstc2NyaXB0LS9pLG09L1xccypvbmVycm9yXFxzKj1cXHMqKD86J3xcIik/KFteJ1wiPlxcc10qKSg/Oid8XCIpPy9pLHY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt2LmlubmVySFRNTD1cIiA8aHI+XCIsbj0zPT09di5maXJzdENoaWxkLm5vZGVUeXBlLHY9bnVsbCxpPXt0b0VkaXRhYmxlSHRtbDpmdW5jdGlvbihlKXt2YXIgdD0nPGJyIGNsYXNzPVwiay1iclwiPic7cmV0dXJuIGU9ZXx8XCJcIixlLnJlcGxhY2UoLzwhXFxbQ0RBVEFcXFsoLiopP1xcXVxcXT4vZyxcIjwhLS1bQ0RBVEFbJDFdXS0tPlwiKS5yZXBsYWNlKC88c2NyaXB0KFtePl0qKT4oLiopPzxcXC9zY3JpcHQ+L2dpLFwiPHRlbGVyaWs6c2NyaXB0JDE+JDI8L3RlbGVyaWs6c2NyaXB0PlwiKS5yZXBsYWNlKC88aW1nKFtePl0qKT4vZ2ksZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShtLFwiXCIpfSkucmVwbGFjZSgvKDxcXC8/aW1nW14+XSo+KVtcXHJcXG5cXHZcXGZcXHQgXSsvZ2ksXCIkMVwiKS5yZXBsYWNlKC9ePCh0YWJsZXxibG9ja3F1b3RlKS9pLHQrXCI8JDFcIikucmVwbGFjZSgvPFxcLyh0YWJsZXxibG9ja3F1b3RlKT4kL2ksXCI8LyQxPlwiK3QpfSxfZmlsbEVtcHR5RWxlbWVudHM6ZnVuY3Rpb24odCl7ZSh0KS5maW5kKFwicFwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQsbj1lKHRoaXMpO2lmKC9eXFxzKiQvZy50ZXN0KG4udGV4dCgpKSYmIW4uZmluZChcImltZyxpbnB1dFwiKS5sZW5ndGgpe2Zvcih0PXRoaXM7dC5maXJzdENoaWxkJiYzIT10LmZpcnN0Q2hpbGQubm9kZVR5cGU7KXQ9dC5maXJzdENoaWxkOzEhPXQubm9kZVR5cGV8fGEuZW1wdHlbYS5uYW1lKHQpXXx8KHQuaW5uZXJIVE1MPXIudWkuZWRpdG9yLmVtcHR5RWxlbWVudENvbnRlbnQpfX0pfSxfcmVtb3ZlU3lzdGVtRWxlbWVudHM6ZnVuY3Rpb24odCl7ZShcIi5rLXBhc3RlLWNvbnRhaW5lclwiLHQpLnJlbW92ZSgpfSxfcmVzZXRPcmRlcmVkTGlzdHM6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9ZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIm9sXCIpO2Zvcih0PTA7ci5sZW5ndGg+dDt0Kyspbj1yW3RdLGk9bi5nZXRBdHRyaWJ1dGUoXCJzdGFydFwiKSxuLnNldEF0dHJpYnV0ZShcInN0YXJ0XCIsMSksaT9uLnNldEF0dHJpYnV0ZShcInN0YXJ0XCIsaSk6bi5yZW1vdmVBdHRyaWJ1dGUoaSl9LF9wcmV2ZW50U2NyaXB0RXhlY3V0aW9uOmZ1bmN0aW9uKHQpe2UodCkuZmluZChcIipcIikuZWFjaChmdW5jdGlvbigpe3ZhciBlLHQsbixpLHI9dGhpcy5hdHRyaWJ1dGVzO2Zvcih0PTAsbj1yLmxlbmd0aDtuPnQ7dCsrKWU9clt0XSxpPWUubm9kZU5hbWUsZS5zcGVjaWZpZWQmJi9eb24vaS50ZXN0KGkpJiYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoaSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJrLXNjcmlwdC1cIitpLGUubm9kZVZhbHVlKSl9KX0saHRtbFRvRG9tOmZ1bmN0aW9uKHQsbil7dmFyIG8scyxsPXIuc3VwcG9ydC5icm93c2VyLGM9bC5tc2llLGQ9YyYmOT5sLnZlcnNpb247cmV0dXJuIHQ9aS50b0VkaXRhYmxlSHRtbCh0KSxkJiYodD1cIjxici8+XCIrdCxvPVwib3JpZ2luYWxzcmNcIixzPVwib3JpZ2luYWxocmVmXCIsdD10LnJlcGxhY2UoL2hyZWZcXHMqPVxccyooPzonfFwiKT8oW14nXCI+XFxzXSopKD86J3xcIik/LyxzKyc9XCIkMVwiJyksdD10LnJlcGxhY2UoL3NyY1xccyo9XFxzKig/Oid8XCIpPyhbXidcIj5cXHNdKikoPzonfFwiKT8vLG8rJz1cIiQxXCInKSksbi5pbm5lckhUTUw9dCxkPyhhLnJlbW92ZShuLmZpcnN0Q2hpbGQpLGUobikuZmluZChcInRlbGVyaWtcXFxcOnNjcmlwdCxzY3JpcHQsbGluayxpbWcsYVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlW3NdJiYoZS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsZVtzXSksZS5yZW1vdmVBdHRyaWJ1dGUocykpLGVbb10mJihlLnNldEF0dHJpYnV0ZShcInNyY1wiLGVbb10pLGUucmVtb3ZlQXR0cmlidXRlKG8pKX0pKTpjJiYoYS5ub3JtYWxpemUobiksaS5fcmVzZXRPcmRlcmVkTGlzdHMobikpLGkuX3ByZXZlbnRTY3JpcHRFeGVjdXRpb24obiksaS5fZmlsbEVtcHR5RWxlbWVudHMobiksaS5fcmVtb3ZlU3lzdGVtRWxlbWVudHMobiksZShcInRhYmxlXCIsbikuYWRkQ2xhc3MoXCJrLXRhYmxlXCIpLG59LGRvbVRvWGh0bWw6ZnVuY3Rpb24oaSxvKXtmdW5jdGlvbiBzKHQpe3ZhciBuLGkscixvLHM9ZS50cmltLGw9cyh0KS5zcGxpdChcIjtcIiksZD1sLmxlbmd0aDtmb3Iobj0wLGQ9bC5sZW5ndGg7ZD5uO24rKylsW25dLmxlbmd0aCYmKGk9cC5leGVjKGxbbl0pLGkmJihyPXMoaVsxXS50b0xvd2VyQ2FzZSgpKSxvPXMoaVsyXSksXCJmb250LXNpemUtYWRqdXN0XCIhPXImJlwiZm9udC1zdHJldGNoXCIhPXImJihyLmluZGV4T2YoXCJjb2xvclwiKT49MD9vPWEudG9IZXgobyk6ci5pbmRleE9mKFwiZm9udFwiKT49MD9vPW8ucmVwbGFjZShjLFwiJ1wiKTovXFxidXJsXFwoL2cudGVzdChvKSYmKG89by5yZXBsYWNlKGMsXCJcIikpLGIucHVzaChyKSxiLnB1c2goXCI6XCIpLGIucHVzaChvKSxiLnB1c2goXCI7XCIpKSkpfWZ1bmN0aW9uIG0obil7dmFyIGksbCxjLGQsaCxwLG0sdixfLHk9W10sdz1uLmF0dHJpYnV0ZXM7Zm9yKGEuaXMobixcImltZ1wiKSYmKG09bi5zdHlsZS53aWR0aCx2PW4uc3R5bGUuaGVpZ2h0LF89ZShuKSxtJiZ1LnRlc3QobSkmJihfLmF0dHIoXCJ3aWR0aFwiLHBhcnNlSW50KG0sMTApKSxhLnVuc3R5bGUobix7d2lkdGg6dH0pKSx2JiZ1LnRlc3QodikmJihfLmF0dHIoXCJoZWlnaHRcIixwYXJzZUludCh2LDEwKSksYS51bnN0eWxlKG4se2hlaWdodDp0fSkpKSxsPTAsYz13Lmxlbmd0aDtjPmw7bCsrKWk9d1tsXSxkPWkubm9kZU5hbWUsaD1pLm5vZGVWYWx1ZSxwPWkuc3BlY2lmaWVkLFwidmFsdWVcIj09ZCYmXCJ2YWx1ZVwiaW4gbiYmbi52YWx1ZT9wPSEwOlwidHlwZVwiPT1kJiZcInRleHRcIj09aD9wPSEwOlwiY2xhc3NcIiE9ZHx8aD9mLnRlc3QoZCk/cD0hMTpcImNvbXBsZXRlXCI9PWQ/cD0hMTpcImFsdEh0bWxcIj09ZD9wPSExOlwic3RhcnRcIj09ZCYmKGEuaXMobixcInVsXCIpfHxhLmlzKG4sXCJvbFwiKSk/cD0hMTpkLmluZGV4T2YoXCJfbW96XCIpPj0wP3A9ITE6Zy50ZXN0KGQpJiYocD0hIW8uc2NyaXB0cyk6cD0hMSxwJiZ5LnB1c2goaSk7aWYoeS5sZW5ndGgpZm9yKHkuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBlLm5vZGVOYW1lPnQubm9kZU5hbWU/MTp0Lm5vZGVOYW1lPmUubm9kZU5hbWU/LTE6MH0pLGw9MCxjPXkubGVuZ3RoO2M+bDtsKyspaT15W2xdLGQ9aS5ub2RlTmFtZSxoPWkubm9kZVZhbHVlLChcImNsYXNzXCIhPWR8fFwiay10YWJsZVwiIT1oKSYmKGQ9ZC5yZXBsYWNlKGcsXCJcIiksYi5wdXNoKFwiIFwiKSxiLnB1c2goZCksYi5wdXNoKCc9XCInKSxcInN0eWxlXCI9PWQ/cyhofHxuLnN0eWxlLmNzc1RleHQpOmIucHVzaChcInNyY1wiPT1kfHxcImhyZWZcIj09ZD9yLmh0bWxFbmNvZGUobi5nZXRBdHRyaWJ1dGUoZCwyKSk6YS5maWxsQXR0cnNbZF0/ZDpoKSxiLnB1c2goJ1wiJykpfWZ1bmN0aW9uIHYoZSx0LG4pe2Zvcih2YXIgaT1lLmZpcnN0Q2hpbGQ7aTtpPWkubmV4dFNpYmxpbmcpeShpLHQsbil9ZnVuY3Rpb24gXyhlKXtyZXR1cm4gZS5ub2RlVmFsdWUucmVwbGFjZSgvXFx1ZmVmZi9nLFwiXCIpfWZ1bmN0aW9uIHkoZSxpLHIpe3ZhciBzLGwsYyxkLHUsaD1lLm5vZGVUeXBlO2lmKDE9PWgpe2lmKHM9YS5uYW1lKGUpLCFzfHxhLmluc2lnbmlmaWNhbnQoZSkpcmV0dXJuO2lmKGEuaXNJbmxpbmUoZSkmJjE9PWUuY2hpbGROb2Rlcy5sZW5ndGgmJjM9PWUuZmlyc3RDaGlsZC5ub2RlVHlwZSYmIV8oZS5maXJzdENoaWxkKSlyZXR1cm47aWYoIW8uc2NyaXB0cyYmXCJ0ZWxlcmlrOnNjcmlwdFwiPT1zKXJldHVybjtpZihsPWtbc10pcmV0dXJuIGwuc3RhcnQoZSksdihlLCExLGwuc2tpcEVuY29kaW5nKSxsLmVuZChlKSx0O2IucHVzaChcIjxcIiksYi5wdXNoKHMpLG0oZSksYS5lbXB0eVtzXT9iLnB1c2goXCIgLz5cIik6KGIucHVzaChcIj5cIiksdihlLGl8fGEuaXMoZSxcInByZVwiKSksYi5wdXNoKFwiPC9cIiksYi5wdXNoKHMpLGIucHVzaChcIj5cIikpfWVsc2UgMz09aD8oZD1fKGUpLCFpJiZuJiYoYz1lLnBhcmVudE5vZGUsdT1lLnByZXZpb3VzU2libGluZyx1fHwodT0oYS5pc0lubGluZShjKT9jOmUpLnByZXZpb3VzU2libGluZyksKCF1fHxcIlwiPT09dS5pbm5lckhUTUx8fGEuaXNCbG9jayh1KSkmJihkPWQucmVwbGFjZSgvXltcXHJcXG5cXHZcXGZcXHQgXSsvLFwiXCIpKSxkPWQucmVwbGFjZSgvICsvLFwiIFwiKSksYi5wdXNoKHI/ZDphLmVuY29kZShkLG8pKSk6ND09aD8oYi5wdXNoKFwiPCFbQ0RBVEFbXCIpLGIucHVzaChlLmRhdGEpLGIucHVzaChcIl1dPlwiKSk6OD09aCYmKGUuZGF0YS5pbmRleE9mKFwiW0NEQVRBW1wiKTwwPyhiLnB1c2goXCI8IS0tXCIpLGIucHVzaChlLmRhdGEpLGIucHVzaChcIi0tPlwiKSk6KGIucHVzaChcIjwhXCIpLGIucHVzaChlLmRhdGEpLGIucHVzaChcIj5cIikpKX1mdW5jdGlvbiB3KGUpe3ZhciB0PWUuY2hpbGROb2Rlcy5sZW5ndGgsbj10JiYzPT1lLmZpcnN0Q2hpbGQubm9kZVR5cGU7cmV0dXJuIG4mJigxPT10fHwyPT10JiZhLmluc2lnbmlmaWNhbnQoZS5sYXN0Q2hpbGQpKX12YXIgYj1bXSxrPXtcInRlbGVyaWs6c2NyaXB0XCI6e3N0YXJ0OmZ1bmN0aW9uKGUpe2IucHVzaChcIjxzY3JpcHRcIiksbShlKSxiLnB1c2goXCI+XCIpfSxlbmQ6ZnVuY3Rpb24oKXtiLnB1c2goXCI8L3NjcmlwdD5cIil9LHNraXBFbmNvZGluZzohMH0sYjp7c3RhcnQ6ZnVuY3Rpb24oKXtiLnB1c2goXCI8c3Ryb25nPlwiKX0sZW5kOmZ1bmN0aW9uKCl7Yi5wdXNoKFwiPC9zdHJvbmc+XCIpfX0saTp7c3RhcnQ6ZnVuY3Rpb24oKXtiLnB1c2goXCI8ZW0+XCIpfSxlbmQ6ZnVuY3Rpb24oKXtiLnB1c2goXCI8L2VtPlwiKX19LHU6e3N0YXJ0OmZ1bmN0aW9uKCl7Yi5wdXNoKCc8c3BhbiBzdHlsZT1cInRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7XCI+Jyl9LGVuZDpmdW5jdGlvbigpe2IucHVzaChcIjwvc3Bhbj5cIil9fSxpZnJhbWU6e3N0YXJ0OmZ1bmN0aW9uKGUpe2IucHVzaChcIjxpZnJhbWVcIiksbShlKSxiLnB1c2goXCI+XCIpfSxlbmQ6ZnVuY3Rpb24oKXtiLnB1c2goXCI8L2lmcmFtZT5cIil9fSxmb250OntzdGFydDpmdW5jdGlvbihlKXt2YXIgdCxuLGk7Yi5wdXNoKCc8c3BhbiBzdHlsZT1cIicpLHQ9ZS5nZXRBdHRyaWJ1dGUoXCJjb2xvclwiKSxuPWxbZS5nZXRBdHRyaWJ1dGUoXCJzaXplXCIpXSxpPWUuZ2V0QXR0cmlidXRlKFwiZmFjZVwiKSx0JiYoYi5wdXNoKFwiY29sb3I6XCIpLGIucHVzaChhLnRvSGV4KHQpKSxiLnB1c2goXCI7XCIpKSxpJiYoYi5wdXNoKFwiZm9udC1mYWNlOlwiKSxiLnB1c2goaSksYi5wdXNoKFwiO1wiKSksbiYmKGIucHVzaChcImZvbnQtc2l6ZTpcIiksYi5wdXNoKG4pLGIucHVzaChcIjtcIikpLGIucHVzaCgnXCI+Jyl9LGVuZDpmdW5jdGlvbigpe2IucHVzaChcIjwvc3Bhbj5cIil9fX07cmV0dXJuIG89b3x8e30sdyhpKT9hLmVuY29kZShfKGkuZmlyc3RDaGlsZCkucmVwbGFjZSgvW1xcclxcblxcdlxcZlxcdCBdKy8sXCIgXCIpLG8pOih2KGkpLGI9Yi5qb2luKFwiXCIpLFwiXCI9PT1iLnJlcGxhY2UoZCxcIlwiKS5yZXBsYWNlKGgsXCJcIik/XCJcIjpiKX19LHMobyx7U2VyaWFsaXplcjppfSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0LG4saSl7dmFyIHIsbyxhLHM7aWYoZT09dClyZXR1cm4gaS1uO2ZvcihyPXQ7ciYmci5wYXJlbnROb2RlIT1lOylyPXIucGFyZW50Tm9kZTtpZihyKXJldHVybiBwKHIpLW47Zm9yKHI9ZTtyJiZyLnBhcmVudE5vZGUhPXQ7KXI9ci5wYXJlbnROb2RlO2lmKHIpcmV0dXJuIGktcChyKS0xO2ZvcihvPWguY29tbW9uQW5jZXN0b3IoZSx0KSxhPWU7YSYmYS5wYXJlbnROb2RlIT1vOylhPWEucGFyZW50Tm9kZTtmb3IoYXx8KGE9bykscz10O3MmJnMucGFyZW50Tm9kZSE9bzspcz1zLnBhcmVudE5vZGU7cmV0dXJuIHN8fChzPW8pLGE9PXM/MDpwKHMpLXAoYSl9ZnVuY3Rpb24gbihlLG4pe2Z1bmN0aW9uIGkoZSl7dHJ5e3JldHVybiB0KGUuc3RhcnRDb250YWluZXIsZS5lbmRDb250YWluZXIsZS5zdGFydE9mZnNldCxlLmVuZE9mZnNldCk8MH1jYXRjaChuKXtyZXR1cm4hMH19aShlKSYmKG4/KGUuY29tbW9uQW5jZXN0b3JDb250YWluZXI9ZS5lbmRDb250YWluZXI9ZS5zdGFydENvbnRhaW5lcixlLmVuZE9mZnNldD1lLnN0YXJ0T2Zmc2V0KTooZS5jb21tb25BbmNlc3RvckNvbnRhaW5lcj1lLnN0YXJ0Q29udGFpbmVyPWUuZW5kQ29udGFpbmVyLGUuc3RhcnRPZmZzZXQ9ZS5lbmRPZmZzZXQpLGUuY29sbGFwc2VkPSEwKX1mdW5jdGlvbiBpKGUpe2UuY29sbGFwc2VkPWUuc3RhcnRDb250YWluZXI9PWUuZW5kQ29udGFpbmVyJiZlLnN0YXJ0T2Zmc2V0PT1lLmVuZE9mZnNldDtmb3IodmFyIHQ9ZS5zdGFydENvbnRhaW5lcjt0JiZ0IT1lLmVuZENvbnRhaW5lciYmIWguaXNBbmNlc3Rvck9mKHQsZS5lbmRDb250YWluZXIpOyl0PXQucGFyZW50Tm9kZTtlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyPXR9ZnVuY3Rpb24gcihlKXt2YXIgdD1lLmR1cGxpY2F0ZSgpLG49ZS5kdXBsaWNhdGUoKTtyZXR1cm4gdC5jb2xsYXBzZSghMCksbi5jb2xsYXBzZSghMSksaC5jb21tb25BbmNlc3RvcihlLnBhcmVudEVsZW1lbnQoKSx0LnBhcmVudEVsZW1lbnQoKSxuLnBhcmVudEVsZW1lbnQoKSl9ZnVuY3Rpb24gbyhlLHQsbil7dmFyIGkscj10W24/XCJzdGFydENvbnRhaW5lclwiOlwiZW5kQ29udGFpbmVyXCJdLG89dFtuP1wic3RhcnRPZmZzZXRcIjpcImVuZE9mZnNldFwiXSxhPTAscz1mKHIpLGw9cz9yOnIuY2hpbGROb2Rlc1tvXXx8bnVsbCxjPXM/ci5wYXJlbnROb2RlOnIsZD10Lm93bmVyRG9jdW1lbnQsdT1kLmJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7KDM9PXIubm9kZVR5cGV8fDQ9PXIubm9kZVR5cGUpJiYoYT1vKSxjfHwoYz1kLmJvZHkpLFwiaW1nXCI9PWMubm9kZU5hbWUudG9Mb3dlckNhc2UoKT8odS5tb3ZlVG9FbGVtZW50VGV4dChjKSx1LmNvbGxhcHNlKCExKSxlLnNldEVuZFBvaW50KG4/XCJTdGFydFRvU3RhcnRcIjpcIkVuZFRvU3RhcnRcIix1KSk6KGk9Yy5pbnNlcnRCZWZvcmUoaC5jcmVhdGUoZCxcImFcIiksbCksdS5tb3ZlVG9FbGVtZW50VGV4dChpKSxoLnJlbW92ZShpKSx1W24/XCJtb3ZlU3RhcnRcIjpcIm1vdmVFbmRcIl0oXCJjaGFyYWN0ZXJcIixhKSx1LmNvbGxhcHNlKCExKSxlLnNldEVuZFBvaW50KG4/XCJTdGFydFRvU3RhcnRcIjpcIkVuZFRvU3RhcnRcIix1KSl9ZnVuY3Rpb24gYShlLHQsbixpKXt2YXIgcixvLGEscyxsLGMsZCx1PWguY3JlYXRlKHQub3duZXJEb2N1bWVudCxcImFcIiksZz1lLmR1cGxpY2F0ZSgpLG09aT9cIlN0YXJ0VG9TdGFydFwiOlwiU3RhcnRUb0VuZFwiLHY9ITE7dS5pbm5lckhUTUw9XCLvu79cIixnLmNvbGxhcHNlKGkpLG89Zy5wYXJlbnRFbGVtZW50KCksaC5pc0FuY2VzdG9yT3JTZWxmKG4sbyl8fChvPW4pO2RvIHY/by5pbnNlcnRCZWZvcmUodSx1LnByZXZpb3VzU2libGluZyk6KG8uYXBwZW5kQ2hpbGQodSksdj0hMCksZy5tb3ZlVG9FbGVtZW50VGV4dCh1KTt3aGlsZSgocj1nLmNvbXBhcmVFbmRQb2ludHMobSxlKSk+MCYmdS5wcmV2aW91c1NpYmxpbmcpO2E9dS5uZXh0U2libGluZywtMT09ciYmZihhKT8oZy5zZXRFbmRQb2ludChpP1wiRW5kVG9TdGFydFwiOlwiRW5kVG9FbmRcIixlKSxoLnJlbW92ZSh1KSxjPVthLGcudGV4dC5sZW5ndGhdKToocz0haSYmdS5wcmV2aW91c1NpYmxpbmcsbD1pJiZ1Lm5leHRTaWJsaW5nLGYobCk/Yz1bbCwwXTpmKHMpP2M9W3Mscy5sZW5ndGhdOihkPXAodSksYz1vLm5leHRTaWJsaW5nJiZkPT1vLmNoaWxkTm9kZXMubGVuZ3RoLTE/W28ubmV4dFNpYmxpbmcsMF06W28sZF0pLGgucmVtb3ZlKHUpKSx0W2k/XCJzZXRTdGFydFwiOlwic2V0RW5kXCJdLmFwcGx5KHQsYyl9dmFyIHM9d2luZG93LmtlbmRvLGw9cy5DbGFzcyxjPWUuZXh0ZW5kLGQ9cy51aS5lZGl0b3IsdT1zLnN1cHBvcnQuYnJvd3NlcixoPWQuRG9tLHA9aC5maW5kTm9kZUluZGV4LGY9aC5pc0RhdGFOb2RlLGc9aC5maW5kQ2xvc2VzdEFuY2VzdG9yLG09aC5nZXROb2RlTGVuZ3RoLHY9aC5ub3JtYWxpemUsXz17c2VsZWN0aW9uRnJvbVdpbmRvdzpmdW5jdGlvbihlKXtyZXR1cm5cImdldFNlbGVjdGlvblwiaW4gZT9lLmdldFNlbGVjdGlvbigpOm5ldyBiKGUuZG9jdW1lbnQpfSxzZWxlY3Rpb25Gcm9tUmFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9VC5kb2N1bWVudEZyb21SYW5nZShlKTtyZXR1cm4gXy5zZWxlY3Rpb25Gcm9tRG9jdW1lbnQodCl9LHNlbGVjdGlvbkZyb21Eb2N1bWVudDpmdW5jdGlvbihlKXtyZXR1cm4gXy5zZWxlY3Rpb25Gcm9tV2luZG93KGgud2luZG93RnJvbURvY3VtZW50KGUpKX19LHk9bC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCl7ZS5leHRlbmQodGhpcyx7b3duZXJEb2N1bWVudDp0LHN0YXJ0Q29udGFpbmVyOnQsZW5kQ29udGFpbmVyOnQsY29tbW9uQW5jZXN0b3JDb250YWluZXI6dCxzdGFydE9mZnNldDowLGVuZE9mZnNldDowLGNvbGxhcHNlZDohMH0pfSxzZXRTdGFydDpmdW5jdGlvbihlLHQpe3RoaXMuc3RhcnRDb250YWluZXI9ZSx0aGlzLnN0YXJ0T2Zmc2V0PXQsaSh0aGlzKSxuKHRoaXMsITApfSxzZXRFbmQ6ZnVuY3Rpb24oZSx0KXt0aGlzLmVuZENvbnRhaW5lcj1lLHRoaXMuZW5kT2Zmc2V0PXQsaSh0aGlzKSxuKHRoaXMsITEpfSxzZXRTdGFydEJlZm9yZTpmdW5jdGlvbihlKXt0aGlzLnNldFN0YXJ0KGUucGFyZW50Tm9kZSxwKGUpKX0sc2V0U3RhcnRBZnRlcjpmdW5jdGlvbihlKXt0aGlzLnNldFN0YXJ0KGUucGFyZW50Tm9kZSxwKGUpKzEpfSxzZXRFbmRCZWZvcmU6ZnVuY3Rpb24oZSl7dGhpcy5zZXRFbmQoZS5wYXJlbnROb2RlLHAoZSkpfSxzZXRFbmRBZnRlcjpmdW5jdGlvbihlKXt0aGlzLnNldEVuZChlLnBhcmVudE5vZGUscChlKSsxKX0sc2VsZWN0Tm9kZTpmdW5jdGlvbihlKXt0aGlzLnNldFN0YXJ0QmVmb3JlKGUpLHRoaXMuc2V0RW5kQWZ0ZXIoZSl9LHNlbGVjdE5vZGVDb250ZW50czpmdW5jdGlvbihlKXt0aGlzLnNldFN0YXJ0KGUsMCksdGhpcy5zZXRFbmQoZSxlWzE9PT1lLm5vZGVUeXBlP1wiY2hpbGROb2Rlc1wiOlwibm9kZVZhbHVlXCJdLmxlbmd0aCl9LGNvbGxhcHNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZT90LnNldEVuZCh0LnN0YXJ0Q29udGFpbmVyLHQuc3RhcnRPZmZzZXQpOnQuc2V0U3RhcnQodC5lbmRDb250YWluZXIsdC5lbmRPZmZzZXQpfSxkZWxldGVDb250ZW50czpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmNsb25lUmFuZ2UoKTtlLnN0YXJ0Q29udGFpbmVyIT1lLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyJiZlLnNldFN0YXJ0QWZ0ZXIoZyhlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyLGUuc3RhcnRDb250YWluZXIpKSxlLmNvbGxhcHNlKCEwKSxmdW5jdGlvbiBuKGUpe2Zvcig7ZS5uZXh0KCk7KWUuaGFzUGFydGlhbFN1YnRyZWUoKT9uKGUuZ2V0U3VidHJlZUl0ZXJhdG9yKCkpOmUucmVtb3ZlKCl9KG5ldyB3KHQpKX0sY2xvbmVDb250ZW50czpmdW5jdGlvbigpe3ZhciBlPVQuZG9jdW1lbnRGcm9tUmFuZ2UodGhpcyk7cmV0dXJuIGZ1bmN0aW9uIHQobil7Zm9yKHZhciBpLHI9ZS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7aT1uLm5leHQoKTspaT1pLmNsb25lTm9kZSghbi5oYXNQYXJ0aWFsU3VidHJlZSgpKSxuLmhhc1BhcnRpYWxTdWJ0cmVlKCkmJmkuYXBwZW5kQ2hpbGQodChuLmdldFN1YnRyZWVJdGVyYXRvcigpKSksci5hcHBlbmRDaGlsZChpKTtyZXR1cm4gcn0obmV3IHcodGhpcykpfSxleHRyYWN0Q29udGVudHM6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10LmNsb25lUmFuZ2UoKTtyZXR1cm4gdC5zdGFydENvbnRhaW5lciE9dC5jb21tb25BbmNlc3RvckNvbnRhaW5lciYmdC5zZXRTdGFydEFmdGVyKGcodC5jb21tb25BbmNlc3RvckNvbnRhaW5lcix0LnN0YXJ0Q29udGFpbmVyKSksdC5jb2xsYXBzZSghMCksZT1ULmRvY3VtZW50RnJvbVJhbmdlKHQpLGZ1bmN0aW9uIGkobil7Zm9yKHZhciByLG89ZS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7cj1uLm5leHQoKTspbi5oYXNQYXJ0aWFsU3VidHJlZSgpPyhyPXIuY2xvbmVOb2RlKCExKSxyLmFwcGVuZENoaWxkKGkobi5nZXRTdWJ0cmVlSXRlcmF0b3IoKSkpKTpuLnJlbW92ZSh0Lm9yaWdpbmFsUmFuZ2UpLG8uYXBwZW5kQ2hpbGQocik7cmV0dXJuIG99KG5ldyB3KG4pKX0saW5zZXJ0Tm9kZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2YodC5zdGFydENvbnRhaW5lcik/KHQuc3RhcnRPZmZzZXQhPXQuc3RhcnRDb250YWluZXIubm9kZVZhbHVlLmxlbmd0aCYmaC5zcGxpdERhdGFOb2RlKHQuc3RhcnRDb250YWluZXIsdC5zdGFydE9mZnNldCksaC5pbnNlcnRBZnRlcihlLHQuc3RhcnRDb250YWluZXIpKTpoLmluc2VydEF0KHQuc3RhcnRDb250YWluZXIsZSx0LnN0YXJ0T2Zmc2V0KSx0LnNldFN0YXJ0KHQuc3RhcnRDb250YWluZXIsdC5zdGFydE9mZnNldCl9LGNsb25lUmFuZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gZS5leHRlbmQobmV3IHkodGhpcy5vd25lckRvY3VtZW50KSx7c3RhcnRDb250YWluZXI6dGhpcy5zdGFydENvbnRhaW5lcixlbmRDb250YWluZXI6dGhpcy5lbmRDb250YWluZXIsY29tbW9uQW5jZXN0b3JDb250YWluZXI6dGhpcy5jb21tb25BbmNlc3RvckNvbnRhaW5lcixzdGFydE9mZnNldDp0aGlzLnN0YXJ0T2Zmc2V0LGVuZE9mZnNldDp0aGlzLmVuZE9mZnNldCxjb2xsYXBzZWQ6dGhpcy5jb2xsYXBzZWQsb3JpZ2luYWxSYW5nZTp0aGlzfSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zdGFydENvbnRhaW5lci5ub2RlTmFtZSx0PXRoaXMuZW5kQ29udGFpbmVyLm5vZGVOYW1lO3JldHVybihcIiN0ZXh0XCI9PWU/dGhpcy5zdGFydENvbnRhaW5lci5ub2RlVmFsdWU6ZSkrXCIoXCIrdGhpcy5zdGFydE9mZnNldCtcIikgOiBcIisoXCIjdGV4dFwiPT10P3RoaXMuZW5kQ29udGFpbmVyLm5vZGVWYWx1ZTp0KStcIihcIit0aGlzLmVuZE9mZnNldCtcIilcIn19KSx3PWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQpe2lmKGUuZXh0ZW5kKHRoaXMse3JhbmdlOnQsX2N1cnJlbnQ6bnVsbCxfbmV4dDpudWxsLF9lbmQ6bnVsbH0pLCF0LmNvbGxhcHNlZCl7dmFyIG49dC5jb21tb25BbmNlc3RvckNvbnRhaW5lcjt0aGlzLl9uZXh0PXQuc3RhcnRDb250YWluZXIhPW58fGYodC5zdGFydENvbnRhaW5lcik/ZyhuLHQuc3RhcnRDb250YWluZXIpOnQuc3RhcnRDb250YWluZXIuY2hpbGROb2Rlc1t0LnN0YXJ0T2Zmc2V0XSx0aGlzLl9lbmQ9dC5lbmRDb250YWluZXIhPW58fGYodC5lbmRDb250YWluZXIpP2cobix0LmVuZENvbnRhaW5lcikubmV4dFNpYmxpbmc6dC5lbmRDb250YWluZXIuY2hpbGROb2Rlc1t0LmVuZE9mZnNldF19fSxoYXNOZXh0OmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9uZXh0fSxuZXh0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX2N1cnJlbnQ9ZS5fbmV4dDtyZXR1cm4gZS5fbmV4dD1lLl9jdXJyZW50JiZlLl9jdXJyZW50Lm5leHRTaWJsaW5nIT1lLl9lbmQ/ZS5fY3VycmVudC5uZXh0U2libGluZzpudWxsLGYoZS5fY3VycmVudCkmJihlLnJhbmdlLmVuZENvbnRhaW5lcj09ZS5fY3VycmVudCYmKHQ9dC5jbG9uZU5vZGUoITApLHQuZGVsZXRlRGF0YShlLnJhbmdlLmVuZE9mZnNldCx0Lmxlbmd0aC1lLnJhbmdlLmVuZE9mZnNldCkpLGUucmFuZ2Uuc3RhcnRDb250YWluZXI9PWUuX2N1cnJlbnQmJih0PXQuY2xvbmVOb2RlKCEwKSx0LmRlbGV0ZURhdGEoMCxlLnJhbmdlLnN0YXJ0T2Zmc2V0KSkpLHR9LHRyYXZlcnNlOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gaS5fY3VycmVudD1pLl9uZXh0LGkuX25leHQ9aS5fY3VycmVudCYmaS5fY3VycmVudC5uZXh0U2libGluZyE9aS5fZW5kP2kuX2N1cnJlbnQubmV4dFNpYmxpbmc6bnVsbCxpLl9jdXJyZW50fWZvcih2YXIgbixpPXRoaXM7bj10KCk7KWkuaGFzUGFydGlhbFN1YnRyZWUoKT9pLmdldFN1YnRyZWVJdGVyYXRvcigpLnRyYXZlcnNlKGUpOmUobik7cmV0dXJuIG59LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGE9dGhpcyxzPWEucmFuZ2Uuc3RhcnRDb250YWluZXI9PWEuX2N1cnJlbnQsbD1hLnJhbmdlLmVuZENvbnRhaW5lcj09YS5fY3VycmVudDtmKGEuX2N1cnJlbnQpJiYoc3x8bCk/KHQ9cz9hLnJhbmdlLnN0YXJ0T2Zmc2V0OjAsbj1sP2EucmFuZ2UuZW5kT2Zmc2V0OmEuX2N1cnJlbnQubGVuZ3RoLGk9bi10LGUmJihzfHxsKSYmKGEuX2N1cnJlbnQ9PWUuc3RhcnRDb250YWluZXImJmUuc3RhcnRPZmZzZXQ+PXQmJihlLnN0YXJ0T2Zmc2V0LT1pKSxhLl9jdXJyZW50PT1lLmVuZENvbnRhaW5lciYmZS5lbmRPZmZzZXQ+PW4mJihlLmVuZE9mZnNldC09aSkpLGEuX2N1cnJlbnQuZGVsZXRlRGF0YSh0LGkpKToocj1hLl9jdXJyZW50LnBhcmVudE5vZGUsIWV8fGEucmFuZ2Uuc3RhcnRDb250YWluZXIhPXImJmEucmFuZ2UuZW5kQ29udGFpbmVyIT1yfHwobz1wKGEuX2N1cnJlbnQpLHI9PWUuc3RhcnRDb250YWluZXImJmUuc3RhcnRPZmZzZXQ+PW8mJihlLnN0YXJ0T2Zmc2V0LT0xKSxyPT1lLmVuZENvbnRhaW5lciYmZS5lbmRPZmZzZXQ+byYmKGUuZW5kT2Zmc2V0LT0xKSksaC5yZW1vdmUoYS5fY3VycmVudCkpfSxoYXNQYXJ0aWFsU3VidHJlZTpmdW5jdGlvbigpe3JldHVybiFmKHRoaXMuX2N1cnJlbnQpJiYoaC5pc0FuY2VzdG9yT3JTZWxmKHRoaXMuX2N1cnJlbnQsdGhpcy5yYW5nZS5zdGFydENvbnRhaW5lcil8fGguaXNBbmNlc3Rvck9yU2VsZih0aGlzLl9jdXJyZW50LHRoaXMucmFuZ2UuZW5kQ29udGFpbmVyKSl9LGdldFN1YnRyZWVJdGVyYXRvcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLnJhbmdlLmNsb25lUmFuZ2UoKTtyZXR1cm4gdC5zZWxlY3ROb2RlQ29udGVudHMoZS5fY3VycmVudCksaC5pc0FuY2VzdG9yT3JTZWxmKGUuX2N1cnJlbnQsZS5yYW5nZS5zdGFydENvbnRhaW5lcikmJnQuc2V0U3RhcnQoZS5yYW5nZS5zdGFydENvbnRhaW5lcixlLnJhbmdlLnN0YXJ0T2Zmc2V0KSxoLmlzQW5jZXN0b3JPclNlbGYoZS5fY3VycmVudCxlLnJhbmdlLmVuZENvbnRhaW5lcikmJnQuc2V0RW5kKGUucmFuZ2UuZW5kQ29udGFpbmVyLGUucmFuZ2UuZW5kT2Zmc2V0KSxuZXcgdyh0KX19KSxiPWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMub3duZXJEb2N1bWVudD1lLHRoaXMucmFuZ2VDb3VudD0xfSxhZGRSYW5nZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm93bmVyRG9jdW1lbnQuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKTtvKHQsZSwhMSksbyh0LGUsITApLHQuc2VsZWN0KCl9LHJlbW92ZUFsbFJhbmdlczpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3duZXJEb2N1bWVudC5zZWxlY3Rpb247XCJOb25lXCIhPWUudHlwZSYmZS5lbXB0eSgpfSxnZXRSYW5nZUF0OmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGksbyxzLGwsYyxkPW5ldyB5KHRoaXMub3duZXJEb2N1bWVudCksdT10aGlzLm93bmVyRG9jdW1lbnQuc2VsZWN0aW9uO3RyeXtpZihlPXUuY3JlYXRlUmFuZ2UoKSx0PWUuaXRlbT9lLml0ZW0oMCk6ZS5wYXJlbnRFbGVtZW50KCksdC5vd25lckRvY3VtZW50IT10aGlzLm93bmVyRG9jdW1lbnQpcmV0dXJuIGR9Y2F0Y2goaCl7cmV0dXJuIGR9aWYoXCJDb250cm9sXCI9PXUudHlwZSlkLnNlbGVjdE5vZGUoZS5pdGVtKDApKTtlbHNlIGlmKG49cihlKSxhKGUsZCxuLCEwKSxhKGUsZCxuLCExKSw5PT1kLnN0YXJ0Q29udGFpbmVyLm5vZGVUeXBlJiZkLnNldFN0YXJ0KGQuZW5kQ29udGFpbmVyLGQuc3RhcnRPZmZzZXQpLDk9PWQuZW5kQ29udGFpbmVyLm5vZGVUeXBlJiZkLnNldEVuZChkLnN0YXJ0Q29udGFpbmVyLGQuZW5kT2Zmc2V0KSwwPT09ZS5jb21wYXJlRW5kUG9pbnRzKFwiU3RhcnRUb0VuZFwiLGUpJiZkLmNvbGxhcHNlKCExKSxpPWQuc3RhcnRDb250YWluZXIsbz1kLmVuZENvbnRhaW5lcixzPXRoaXMub3duZXJEb2N1bWVudC5ib2R5LCEoZC5jb2xsYXBzZWR8fDAhPT1kLnN0YXJ0T2Zmc2V0fHxkLmVuZE9mZnNldCE9bShkLmVuZENvbnRhaW5lcil8fGk9PW8mJmYoaSkmJmkucGFyZW50Tm9kZT09cykpe2ZvcihsPSExLGM9ITE7MD09PXAoaSkmJmk9PWkucGFyZW50Tm9kZS5maXJzdENoaWxkJiZpIT1zOylpPWkucGFyZW50Tm9kZSxsPSEwO2Zvcig7cChvKT09bShvLnBhcmVudE5vZGUpLTEmJm89PW8ucGFyZW50Tm9kZS5sYXN0Q2hpbGQmJm8hPXM7KW89by5wYXJlbnROb2RlLGM9ITA7aT09cyYmbz09cyYmbCYmYyYmKGQuc2V0U3RhcnQoaSwwKSxkLnNldEVuZChvLG0ocykpKX1yZXR1cm4gZH19KSxrPWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMuZW51bWVyYXRlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZihoLmlzKGUsXCJpbWdcIil8fDM9PWUubm9kZVR5cGUmJighaC5pc1doaXRlc3BhY2UoZSl8fFwi77u/XCI9PWUubm9kZVZhbHVlKSluLnB1c2goZSk7ZWxzZSBmb3IoZT1lLmZpcnN0Q2hpbGQ7ZTspdChlKSxlPWUubmV4dFNpYmxpbmd9dmFyIG49W107cmV0dXJuIG5ldyB3KGUpLnRyYXZlcnNlKHQpLG59fX0pLHg9bC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO24ucmFuZ2U9ZSxuLnJvb3ROb2RlPVQuZG9jdW1lbnRGcm9tUmFuZ2UoZSksbi5ib2R5PXR8fG4uZ2V0RWRpdGFibGUoZSksXCJib2R5XCIhPWgubmFtZShuLmJvZHkpJiYobi5yb290Tm9kZT1uLmJvZHkpLG4uaHRtbD1uLmJvZHkuaW5uZXJIVE1MLG4uc3RhcnRDb250YWluZXI9bi5ub2RlVG9QYXRoKGUuc3RhcnRDb250YWluZXIpLG4uZW5kQ29udGFpbmVyPW4ubm9kZVRvUGF0aChlLmVuZENvbnRhaW5lciksbi5zdGFydE9mZnNldD1uLm9mZnNldChlLnN0YXJ0Q29udGFpbmVyLGUuc3RhcnRPZmZzZXQpLG4uZW5kT2Zmc2V0PW4ub2Zmc2V0KGUuZW5kQ29udGFpbmVyLGUuZW5kT2Zmc2V0KX0saW5kZXg6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49MCxpPWUubm9kZVR5cGU7ZT1lLnByZXZpb3VzU2libGluZzspdD1lLm5vZGVUeXBlLCgzIT10fHxpIT10KSYmbisrLGk9dDtyZXR1cm4gbn0sZ2V0RWRpdGFibGU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuY29tbW9uQW5jZXN0b3JDb250YWluZXI7dCYmKDM9PXQubm9kZVR5cGV8fHQuYXR0cmlidXRlcyYmIXQuYXR0cmlidXRlcy5jb250ZW50RWRpdGFibGUpOyl0PXQucGFyZW50Tm9kZTtyZXR1cm4gdH0scmVzdG9yZUh0bWw6ZnVuY3Rpb24oKXt0aGlzLmJvZHkuaW5uZXJIVE1MPXRoaXMuaHRtbH0sb2Zmc2V0OmZ1bmN0aW9uKGUsdCl7aWYoMz09ZS5ub2RlVHlwZSlmb3IoOyhlPWUucHJldmlvdXNTaWJsaW5nKSYmMz09ZS5ub2RlVHlwZTspdCs9ZS5ub2RlVmFsdWUubGVuZ3RoO3JldHVybiB0fSxub2RlVG9QYXRoOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXTtlIT10aGlzLnJvb3ROb2RlOyl0LnB1c2godGhpcy5pbmRleChlKSksZT1lLnBhcmVudE5vZGU7cmV0dXJuIHR9LHRvUmFuZ2VQb2ludDpmdW5jdGlvbihlLHQsbixpKXtmb3IodmFyIHI9dGhpcy5yb290Tm9kZSxvPW4ubGVuZ3RoLGE9aTtvLS07KXI9ci5jaGlsZE5vZGVzW25bb11dO2Zvcig7ciYmMz09ci5ub2RlVHlwZSYmYT5yLm5vZGVWYWx1ZS5sZW5ndGg7KWEtPXIubm9kZVZhbHVlLmxlbmd0aCxyPXIubmV4dFNpYmxpbmc7ciYmYT49MCYmZVt0P1wic2V0U3RhcnRcIjpcInNldEVuZFwiXShyLGEpfSx0b1JhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUucmFuZ2UuY2xvbmVSYW5nZSgpO3JldHVybiBlLnRvUmFuZ2VQb2ludCh0LCEwLGUuc3RhcnRDb250YWluZXIsZS5zdGFydE9mZnNldCksZS50b1JhbmdlUG9pbnQodCwhMSxlLmVuZENvbnRhaW5lcixlLmVuZE9mZnNldCksdH19KSxDPWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7dGhpcy5jYXJldD1udWxsfSxhZGRDYXJldDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0LmNhcmV0PWguY3JlYXRlKFQuZG9jdW1lbnRGcm9tUmFuZ2UoZSksXCJzcGFuXCIse2NsYXNzTmFtZTpcImstbWFya2VyXCJ9KSxlLmluc2VydE5vZGUodC5jYXJldCksZS5zZWxlY3ROb2RlKHQuY2FyZXQpLHQuY2FyZXR9LHJlbW92ZUNhcmV0OmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG89dGhpcyxhPW8uY2FyZXQucHJldmlvdXNTaWJsaW5nLHM9MDthJiYocz1mKGEpP2Eubm9kZVZhbHVlLmxlbmd0aDpwKGEpKSx0PW8uY2FyZXQucGFyZW50Tm9kZSxuPWE/cChhKTowLGgucmVtb3ZlKG8uY2FyZXQpLHYodCksaT10LmNoaWxkTm9kZXNbbl0sZihpKT9lLnNldFN0YXJ0KGkscyk6aT8ocj1oLmxhc3RUZXh0Tm9kZShpKSxyP2Uuc2V0U3RhcnQocixyLm5vZGVWYWx1ZS5sZW5ndGgpOmVbYT9cInNldFN0YXJ0QWZ0ZXJcIjpcInNldFN0YXJ0QmVmb3JlXCJdKGkpKToodS5tc2llfHx0LmlubmVySFRNTHx8KHQuaW5uZXJIVE1MPSc8YnIgX21vel9kaXJ0eT1cIlwiIC8+JyksZS5zZWxlY3ROb2RlQ29udGVudHModCkpLGUuY29sbGFwc2UoITApfSxhZGQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcyxvPWUuY29sbGFwc2VkJiYhVC5pc0V4cGFuZGFibGUoZSksYT1ULmRvY3VtZW50RnJvbVJhbmdlKGUpO3JldHVybiB0JiZlLmNvbGxhcHNlZCYmKHIuYWRkQ2FyZXQoZSksZT1ULmV4cGFuZChlKSksbj1lLmNsb25lUmFuZ2UoKSxuLmNvbGxhcHNlKCExKSxyLmVuZD1oLmNyZWF0ZShhLFwic3BhblwiLHtjbGFzc05hbWU6XCJrLW1hcmtlclwifSksbi5pbnNlcnROb2RlKHIuZW5kKSxuPWUuY2xvbmVSYW5nZSgpLG4uY29sbGFwc2UoITApLHIuc3RhcnQ9ci5lbmQuY2xvbmVOb2RlKCEwKSxuLmluc2VydE5vZGUoci5zdGFydCksci5fcmVtb3ZlRGVhZE1hcmtlcnMoci5zdGFydCxyLmVuZCksbyYmKGk9YS5jcmVhdGVUZXh0Tm9kZShcIu+7v1wiKSxoLmluc2VydEFmdGVyKGkuY2xvbmVOb2RlKCksci5zdGFydCksaC5pbnNlcnRCZWZvcmUoaSxyLmVuZCkpLGUuc2V0U3RhcnRCZWZvcmUoci5zdGFydCksZS5zZXRFbmRBZnRlcihyLmVuZCksdihlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKSxlfSxfcmVtb3ZlRGVhZE1hcmtlcnM6ZnVuY3Rpb24oZSx0KXtlLnByZXZpb3VzU2libGluZyYmXCLvu79cIj09ZS5wcmV2aW91c1NpYmxpbmcubm9kZVZhbHVlJiZoLnJlbW92ZShlLnByZXZpb3VzU2libGluZyksdC5uZXh0U2libGluZyYmXCLvu79cIj09dC5uZXh0U2libGluZy5ub2RlVmFsdWUmJmgucmVtb3ZlKHQubmV4dFNpYmxpbmcpfSxyZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhLHMsbCxjLGQsdSxnLG0sXz10aGlzLHk9Xy5zdGFydCx3PV8uZW5kO2Zvcih2KGUuY29tbW9uQW5jZXN0b3JDb250YWluZXIpOyF5Lm5leHRTaWJsaW5nJiZ5LnBhcmVudE5vZGU7KXk9eS5wYXJlbnROb2RlO2Zvcig7IXcucHJldmlvdXNTaWJsaW5nJiZ3LnBhcmVudE5vZGU7KXc9dy5wYXJlbnROb2RlO2lmKHQ9eS5wcmV2aW91c1NpYmxpbmcmJjM9PXkucHJldmlvdXNTaWJsaW5nLm5vZGVUeXBlJiZ5Lm5leHRTaWJsaW5nJiYzPT15Lm5leHRTaWJsaW5nLm5vZGVUeXBlLG49dy5wcmV2aW91c1NpYmxpbmcmJjM9PXcucHJldmlvdXNTaWJsaW5nLm5vZGVUeXBlJiZ3Lm5leHRTaWJsaW5nJiYzPT13Lm5leHRTaWJsaW5nLm5vZGVUeXBlLGk9dCYmbix5PXkubmV4dFNpYmxpbmcsdz13LnByZXZpb3VzU2libGluZyxyPSExLG89ITEseT09Xy5lbmQmJihvPSEhXy5zdGFydC5wcmV2aW91c1NpYmxpbmcseT13PV8uc3RhcnQucHJldmlvdXNTaWJsaW5nfHxfLmVuZC5uZXh0U2libGluZyxyPSEwKSxoLnJlbW92ZShfLnN0YXJ0KSxoLnJlbW92ZShfLmVuZCksIXl8fCF3KXJldHVybiBlLnNlbGVjdE5vZGVDb250ZW50cyhlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKSx2b2lkIGUuY29sbGFwc2UoITApO2lmKGE9cj9mKHkpP3kubm9kZVZhbHVlLmxlbmd0aDp5LmNoaWxkTm9kZXMubGVuZ3RoOjAscz1mKHcpP3cubm9kZVZhbHVlLmxlbmd0aDp3LmNoaWxkTm9kZXMubGVuZ3RoLDM9PXkubm9kZVR5cGUpZm9yKDt5LnByZXZpb3VzU2libGluZyYmMz09eS5wcmV2aW91c1NpYmxpbmcubm9kZVR5cGU7KXk9eS5wcmV2aW91c1NpYmxpbmcsYSs9eS5ub2RlVmFsdWUubGVuZ3RoO2lmKDM9PXcubm9kZVR5cGUpZm9yKDt3LnByZXZpb3VzU2libGluZyYmMz09dy5wcmV2aW91c1NpYmxpbmcubm9kZVR5cGU7KXc9dy5wcmV2aW91c1NpYmxpbmcscys9dy5ub2RlVmFsdWUubGVuZ3RoO2ZvcihsPXAoeSksYz15LnBhcmVudE5vZGUsZD1wKHcpLHU9dy5wYXJlbnROb2RlLGc9eTtnLnByZXZpb3VzU2libGluZztnPWcucHJldmlvdXNTaWJsaW5nKTM9PWcubm9kZVR5cGUmJjM9PWcucHJldmlvdXNTaWJsaW5nLm5vZGVUeXBlJiZsLS07Zm9yKG09dzttLnByZXZpb3VzU2libGluZzttPW0ucHJldmlvdXNTaWJsaW5nKTM9PW0ubm9kZVR5cGUmJjM9PW0ucHJldmlvdXNTaWJsaW5nLm5vZGVUeXBlJiZkLS07dihjKSwzPT15Lm5vZGVUeXBlJiYoeT1jLmNoaWxkTm9kZXNbbF0pLHYodSksMz09dy5ub2RlVHlwZSYmKHc9dS5jaGlsZE5vZGVzW2RdKSxyPygzPT15Lm5vZGVUeXBlP2Uuc2V0U3RhcnQoeSxhKTplW28/XCJzZXRTdGFydEFmdGVyXCI6XCJzZXRTdGFydEJlZm9yZVwiXSh5KSxlLmNvbGxhcHNlKCEwKSk6KDM9PXkubm9kZVR5cGU/ZS5zZXRTdGFydCh5LGEpOmUuc2V0U3RhcnRCZWZvcmUoeSksMz09dy5ub2RlVHlwZT9lLnNldEVuZCh3LHMpOmUuc2V0RW5kQWZ0ZXIodykpLF8uY2FyZXQmJl8ucmVtb3ZlQ2FyZXQoZSl9fSksUz0vW1xcdTAwMDktXFx1MDAwZF18XFx1MDAyMHxcXHUwMGEwfFxcdWZlZmZ8XFwufCx8O3w6fCF8XFwofFxcKXxcXD8vLFQ9e25vZGVzOmZ1bmN0aW9uKGUpe3ZhciB0PVQudGV4dE5vZGVzKGUpO3JldHVybiB0Lmxlbmd0aHx8KGUuc2VsZWN0Tm9kZUNvbnRlbnRzKGUuY29tbW9uQW5jZXN0b3JDb250YWluZXIpLHQ9VC50ZXh0Tm9kZXMoZSksdC5sZW5ndGh8fCh0PWguc2lnbmlmaWNhbnRDaGlsZE5vZGVzKGUuY29tbW9uQW5jZXN0b3JDb250YWluZXIpKSksdH0sdGV4dE5vZGVzOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgayhlKS5lbnVtZXJhdGUoKX0sZG9jdW1lbnRGcm9tUmFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdGFydENvbnRhaW5lcjtyZXR1cm4gOT09dC5ub2RlVHlwZT90OnQub3duZXJEb2N1bWVudH0sY3JlYXRlUmFuZ2U6ZnVuY3Rpb24oZSl7cmV0dXJuIHUubXNpZSYmOT51LnZlcnNpb24/bmV3IHkoZSk6ZS5jcmVhdGVSYW5nZSgpfSxzZWxlY3RSYW5nZTpmdW5jdGlvbihlKXt2YXIgdCxuPVQuaW1hZ2UoZSk7biYmKGUuc2V0U3RhcnRBZnRlcihuKSxlLnNldEVuZEFmdGVyKG4pKSx0PV8uc2VsZWN0aW9uRnJvbVJhbmdlKGUpLHQucmVtb3ZlQWxsUmFuZ2VzKCksdC5hZGRSYW5nZShlKX0sc3RyaW5naWZ5OmZ1bmN0aW9uKGUpe3JldHVybiBzLmZvcm1hdChcInswfTp7MX0gLSB7Mn06ezN9XCIsaC5uYW1lKGUuc3RhcnRDb250YWluZXIpLGUuc3RhcnRPZmZzZXQsaC5uYW1lKGUuZW5kQ29udGFpbmVyKSxlLmVuZE9mZnNldCl9LHNwbGl0OmZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiBpKGkpe3ZhciByLG89ZS5jbG9uZVJhbmdlKCk7by5jb2xsYXBzZShpKSxvW2k/XCJzZXRTdGFydEJlZm9yZVwiOlwic2V0RW5kQWZ0ZXJcIl0odCkscj1vLmV4dHJhY3RDb250ZW50cygpLG4mJihyPWgudHJpbShyKSksaFtpP1wiaW5zZXJ0QmVmb3JlXCI6XCJpbnNlcnRBZnRlclwiXShyLHQpfWkoITApLGkoITEpfSxtYXBBbGw6ZnVuY3Rpb24odCxuKXt2YXIgaT1bXTtyZXR1cm4gbmV3IHcodCkudHJhdmVyc2UoZnVuY3Rpb24odCl7dmFyIHI9bih0KTtyJiZlLmluQXJyYXkocixpKTwwJiZpLnB1c2gocil9KSxpfSxnZXRBbGw6ZnVuY3Rpb24oZSx0KXt2YXIgbj10O3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0JiYodD1mdW5jdGlvbihlKXtyZXR1cm4gaC5pcyhlLG4pfSksVC5tYXBBbGwoZSxmdW5jdGlvbihlKXtyZXR1cm4gdChlKT9lOnZvaWQgMH0pfSxnZXRNYXJrZXJzOmZ1bmN0aW9uKGUpe3JldHVybiBULmdldEFsbChlLGZ1bmN0aW9uKGUpe3JldHVyblwiay1tYXJrZXJcIj09ZS5jbGFzc05hbWV9KX0saW1hZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9VC5nZXRBbGwoZSxcImltZ1wiKTtyZXR1cm4gMT09dC5sZW5ndGg/dFswXTp2b2lkIDB9LHdyYXBTZWxlY3RlZEVsZW1lbnRzOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXt2YXIgbixpPWguZ2V0Tm9kZUxlbmd0aCh0KTtpZihlPT1pKXJldHVybiEwO2ZvcihuPWU7aT5uO24rKylpZighaC5pbnNpZ25pZmljYW50KHQuY2hpbGROb2Rlc1tuXSkpcmV0dXJuITE7cmV0dXJuITB9Zm9yKHZhciBuPWguZWRpdGFibGVQYXJlbnQoZS5zdGFydENvbnRhaW5lciksaT1oLmVkaXRhYmxlUGFyZW50KGUuZW5kQ29udGFpbmVyKTswPT09ZS5zdGFydE9mZnNldCYmZS5zdGFydENvbnRhaW5lciE9bjspZS5zZXRTdGFydChlLnN0YXJ0Q29udGFpbmVyLnBhcmVudE5vZGUsaC5maW5kTm9kZUluZGV4KGUuc3RhcnRDb250YWluZXIpKTtmb3IoO3QoZS5lbmRPZmZzZXQsZS5lbmRDb250YWluZXIpJiZlLmVuZENvbnRhaW5lciE9aTspZS5zZXRFbmQoZS5lbmRDb250YWluZXIucGFyZW50Tm9kZSxoLmZpbmROb2RlSW5kZXgoZS5lbmRDb250YWluZXIpKzEpO3JldHVybiBlfSxleHBhbmQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbz1lLmNsb25lUmFuZ2UoKSxhPW8uc3RhcnRDb250YWluZXIuY2hpbGROb2Rlc1swPT09by5zdGFydE9mZnNldD8wOm8uc3RhcnRPZmZzZXQtMV0scz1vLmVuZENvbnRhaW5lci5jaGlsZE5vZGVzW28uZW5kT2Zmc2V0XTtyZXR1cm4gZihhKSYmZihzKT8odD1hLm5vZGVWYWx1ZSxuPXMubm9kZVZhbHVlLHQmJm4/KGk9dC5zcGxpdChcIlwiKS5yZXZlcnNlKCkuam9pbihcIlwiKS5zZWFyY2goUykscj1uLnNlYXJjaChTKSxpJiZyPyhyPS0xPT1yP24ubGVuZ3RoOnIsaT0tMT09aT8wOnQubGVuZ3RoLWksby5zZXRTdGFydChhLGkpLG8uc2V0RW5kKHMsciksbyk6byk6byk6b30saXNFeHBhbmRhYmxlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYSxzPWUuc3RhcnRDb250YWluZXIsbD1ULmRvY3VtZW50RnJvbVJhbmdlKGUpO3JldHVybiBzPT1sfHxzPT1sLmJvZHk/ITE6KHQ9ZS5jbG9uZVJhbmdlKCksKG49cy5ub2RlVmFsdWUpPyhpPW4uc3Vic3RyaW5nKDAsdC5zdGFydE9mZnNldCkscj1uLnN1YnN0cmluZyh0LnN0YXJ0T2Zmc2V0KSxvPTAsYT0wLGkmJihvPWkuc3BsaXQoXCJcIikucmV2ZXJzZSgpLmpvaW4oXCJcIikuc2VhcmNoKFMpKSxyJiYoYT1yLnNlYXJjaChTKSksbyYmYSk6ITEpfX07YyhkLHtTZWxlY3Rpb25VdGlsczpfLFczQ1JhbmdlOnksUmFuZ2VJdGVyYXRvcjp3LFczQ1NlbGVjdGlvbjpiLFJhbmdlRW51bWVyYXRvcjprLFJlc3RvcmVQb2ludDp4LE1hcmtlcjpDLFJhbmdlVXRpbHM6VH0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCl7dmFyIG49ZS5zZWxlY3Rpb25SZXN0b3JlUG9pbnQ9bmV3IGQoZS5nZXRSYW5nZSgpKSxpPW5ldyBmKHQsbik7cmV0dXJuIGkuZWRpdG9yPWUsZS51bmRvUmVkb1N0YWNrLnB1c2goaSksbn12YXIgbj13aW5kb3cua2VuZG8saT1uLkNsYXNzLHI9bi51aS5lZGl0b3Isbz1yLkVkaXRvclV0aWxzLGE9by5yZWdpc3RlclRvb2wscz1yLkRvbSxsPXIuVG9vbCxjPXIuVG9vbFRlbXBsYXRlLGQ9ci5SZXN0b3JlUG9pbnQsdT1yLk1hcmtlcixoPWUuZXh0ZW5kLHA9aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zPWUsdGhpcy5yZXN0b3JlUG9pbnQ9bmV3IGQoZS5yYW5nZSksdGhpcy5tYXJrZXI9bmV3IHUsdGhpcy5mb3JtYXR0ZXI9ZS5mb3JtYXR0ZXJ9LGdldFJhbmdlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVzdG9yZVBvaW50LnRvUmFuZ2UoKX0sbG9ja1JhbmdlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm1hcmtlci5hZGQodGhpcy5nZXRSYW5nZSgpLGUpfSxyZWxlYXNlUmFuZ2U6ZnVuY3Rpb24oZSl7dGhpcy5tYXJrZXIucmVtb3ZlKGUpLHRoaXMuZWRpdG9yLnNlbGVjdFJhbmdlKGUpfSx1bmRvOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yZXN0b3JlUG9pbnQ7ZS5yZXN0b3JlSHRtbCgpLHRoaXMuZWRpdG9yLnNlbGVjdFJhbmdlKGUudG9SYW5nZSgpKX0scmVkbzpmdW5jdGlvbigpe3RoaXMuZXhlYygpfSxjcmVhdGVEaWFsb2c6ZnVuY3Rpb24odCxpKXt2YXIgcj10aGlzLmVkaXRvcjtyZXR1cm4gZSh0KS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KS5rZW5kb1dpbmRvdyhoKHt9LHIub3B0aW9ucy5kaWFsb2dPcHRpb25zLGkpKS5jbG9zZXN0KFwiLmstd2luZG93XCIpLnRvZ2dsZUNsYXNzKFwiay1ydGxcIixuLnN1cHBvcnQuaXNSdGwoci53cmFwcGVyKSkuZW5kKCl9LGV4ZWM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxvY2tSYW5nZSghMCk7dGhpcy5mb3JtYXR0ZXIuZWRpdG9yPXRoaXMuZWRpdG9yLHRoaXMuZm9ybWF0dGVyLnRvZ2dsZShlKSx0aGlzLnJlbGVhc2VSYW5nZShlKX19KSxmPWkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dGhpcy5ib2R5PWUuYm9keSx0aGlzLnN0YXJ0UmVzdG9yZVBvaW50PWUsdGhpcy5lbmRSZXN0b3JlUG9pbnQ9dH0scmVkbzpmdW5jdGlvbigpe3RoaXMuYm9keS5pbm5lckhUTUw9dGhpcy5lbmRSZXN0b3JlUG9pbnQuaHRtbCx0aGlzLmVkaXRvci5zZWxlY3RSYW5nZSh0aGlzLmVuZFJlc3RvcmVQb2ludC50b1JhbmdlKCkpfSx1bmRvOmZ1bmN0aW9uKCl7dGhpcy5ib2R5LmlubmVySFRNTD10aGlzLnN0YXJ0UmVzdG9yZVBvaW50Lmh0bWwsdGhpcy5lZGl0b3Iuc2VsZWN0UmFuZ2UodGhpcy5zdGFydFJlc3RvcmVQb2ludC50b1JhbmdlKCkpfX0pLGc9cC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7cC5mbi5pbml0LmNhbGwodGhpcyxlKSx0aGlzLm1hbmFnZXNVbmRvUmVkbz0hMH0sZXhlYzpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5lZGl0b3Isbj10aGlzLm9wdGlvbnMsaT1uLnJhbmdlLHI9dC5ib2R5LG89bmV3IGQoaSxyKSxhPW4uaHRtbHx8bi52YWx1ZXx8XCJcIjt0LnNlbGVjdFJhbmdlKGkpLHQuY2xpcGJvYXJkLnBhc3RlKGEsbiksbi5wb3N0UHJvY2VzcyYmbi5wb3N0UHJvY2Vzcyh0LHQuZ2V0UmFuZ2UoKSksZT1uZXcgZihvLG5ldyBkKHQuZ2V0UmFuZ2UoKSxyKSksZS5lZGl0b3I9dCx0LnVuZG9SZWRvU3RhY2sucHVzaChlKSx0LmZvY3VzKCl9fSksbT1sLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXQuZWRpdG9yLGk9dGhpcy5vcHRpb25zLG89aS5pdGVtcz9pLml0ZW1zOm4ub3B0aW9ucy5pbnNlcnRIdG1sO25ldyByLlNlbGVjdEJveChlLHtkYXRhU291cmNlOm8sZGF0YVRleHRGaWVsZDpcInRleHRcIixkYXRhVmFsdWVGaWVsZDpcInZhbHVlXCIsY2hhbmdlOmZ1bmN0aW9uKCl7bC5leGVjKG4sXCJpbnNlcnRIdG1sXCIsdGhpcy52YWx1ZSgpKX0sdGl0bGU6bi5vcHRpb25zLm1lc3NhZ2VzLmluc2VydEh0bWwsaGlnaGxpZ2h0Rmlyc3Q6ITF9KX0sY29tbWFuZDpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGcoZSl9LHVwZGF0ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmRhdGEoXCJrZW5kb1NlbGVjdEJveFwiKXx8ZS5maW5kKFwic2VsZWN0XCIpLmRhdGEoXCJrZW5kb1NlbGVjdEJveFwiKTt0LmNsb3NlKCksdC52YWx1ZSh0Lm9wdGlvbnMudGl0bGUpfX0pLHY9aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt0aGlzLnN0YWNrPVtdLHRoaXMuY3VycmVudENvbW1hbmRJbmRleD0tMX0scHVzaDpmdW5jdGlvbihlKXt0aGlzLnN0YWNrPXRoaXMuc3RhY2suc2xpY2UoMCx0aGlzLmN1cnJlbnRDb21tYW5kSW5kZXgrMSksdGhpcy5jdXJyZW50Q29tbWFuZEluZGV4PXRoaXMuc3RhY2sucHVzaChlKS0xfSx1bmRvOmZ1bmN0aW9uKCl7dGhpcy5jYW5VbmRvKCkmJnRoaXMuc3RhY2tbdGhpcy5jdXJyZW50Q29tbWFuZEluZGV4LS1dLnVuZG8oKX0scmVkbzpmdW5jdGlvbigpe3RoaXMuY2FuUmVkbygpJiZ0aGlzLnN0YWNrWysrdGhpcy5jdXJyZW50Q29tbWFuZEluZGV4XS5yZWRvKCl9LGNhblVuZG86ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdXJyZW50Q29tbWFuZEluZGV4Pj0wfSxjYW5SZWRvOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudENvbW1hbmRJbmRleCE9dGhpcy5zdGFjay5sZW5ndGgtMX19KSxfPWkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMuZWRpdG9yPWV9LGtleWRvd246ZnVuY3Rpb24obil7dmFyIGkscj10aGlzLG89ci5lZGl0b3IsYT1vLmtleWJvYXJkLHM9YS5pc1R5cGluZ0tleShuKSxsPWgoZS5FdmVudCgpLG4pO3JldHVybiByLmVkaXRvci50cmlnZ2VyKFwia2V5ZG93blwiLGwpLGwuaXNEZWZhdWx0UHJldmVudGVkKCk/KG4ucHJldmVudERlZmF1bHQoKSwhMCk6bC5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8IXN8fGEuaXNUeXBpbmdJblByb2dyZXNzKCk/ITE6KGk9by5nZXRSYW5nZSgpLHIuc3RhcnRSZXN0b3JlUG9pbnQ9bmV3IGQoaSksYS5zdGFydFR5cGluZyhmdW5jdGlvbigpe3IuZW5kUmVzdG9yZVBvaW50PXQobyxyLnN0YXJ0UmVzdG9yZVBvaW50KX0pLCEwKX0sa2V5dXA6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5lZGl0b3Iua2V5Ym9hcmQ7cmV0dXJuIHRoaXMuZWRpdG9yLnRyaWdnZXIoXCJrZXl1cFwiLGUpLHQuaXNUeXBpbmdJblByb2dyZXNzKCk/KHQuZW5kVHlwaW5nKCksITApOiExfX0pLHk9aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5lZGl0b3I9ZX0sa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgaSxyLG8sYSxsO2lmKGUua2V5Q29kZT09PW4ua2V5cy5CQUNLU1BBQ0Upe2lmKGk9dGhpcy5lZGl0b3Iscj1pLmdldFJhbmdlKCksbz1uLnN1cHBvcnQuYnJvd3Nlci5tc2llP1wiXCI6JzxiciBfbW96X2RpcnR5PVwiXCIgLz4nLHIuY29sbGFwc2VkKXJldHVybjtlLnByZXZlbnREZWZhdWx0KCksYT1uZXcgZChyKSxsPXIuY29tbW9uQW5jZXN0b3JDb250YWluZXIsL3QoYWJsZXxib2R5fHIpL2kudGVzdChzLm5hbWUobCkpJiZyLnNlbGVjdE5vZGUocy5jbG9zZXN0KGwsXCJ0YWJsZVwiKSksci5kZWxldGVDb250ZW50cygpLGw9ci5jb21tb25BbmNlc3RvckNvbnRhaW5lcixcInBcIj09PXMubmFtZShsKSYmXCJcIj09PWwuaW5uZXJIVE1MJiYobC5pbm5lckhUTUw9byxyLnNldFN0YXJ0KGwsMCksci5jb2xsYXBzZSghMCksaS5zZWxlY3RSYW5nZShyKSksdChpLGEpfX0sa2V5dXA6ZnVuY3Rpb24oKXt9fSksdz1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLmVkaXRvcj1lLHRoaXMuc3lzdGVtQ29tbWFuZElzSW5Qcm9ncmVzcz0hMX0sY3JlYXRlVW5kb0NvbW1hbmQ6ZnVuY3Rpb24oKXt0aGlzLnN0YXJ0UmVzdG9yZVBvaW50PXRoaXMuZW5kUmVzdG9yZVBvaW50PXQodGhpcy5lZGl0b3IsdGhpcy5zdGFydFJlc3RvcmVQb2ludCl9LGNoYW5nZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydFJlc3RvcmVQb2ludD90aGlzLnN0YXJ0UmVzdG9yZVBvaW50Lmh0bWwhPXRoaXMuZWRpdG9yLmJvZHkuaW5uZXJIVE1MOiExfSxrZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LmVkaXRvcixpPW4ua2V5Ym9hcmQ7cmV0dXJuIGkuaXNNb2RpZmllcktleShlKT8oaS5pc1R5cGluZ0luUHJvZ3Jlc3MoKSYmaS5lbmRUeXBpbmcoITApLHQuc3RhcnRSZXN0b3JlUG9pbnQ9bmV3IGQobi5nZXRSYW5nZSgpKSwhMCk6aS5pc1N5c3RlbShlKT8odC5zeXN0ZW1Db21tYW5kSXNJblByb2dyZXNzPSEwLHQuY2hhbmdlZCgpJiYodC5zeXN0ZW1Db21tYW5kSXNJblByb2dyZXNzPSExLHQuY3JlYXRlVW5kb0NvbW1hbmQoKSksITApOiExfSxrZXl1cDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIGUuc3lzdGVtQ29tbWFuZElzSW5Qcm9ncmVzcyYmZS5jaGFuZ2VkKCk/KGUuc3lzdGVtQ29tbWFuZElzSW5Qcm9ncmVzcz0hMSxlLmNyZWF0ZVVuZG9Db21tYW5kKCksITApOiExfX0pLGI9aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5oYW5kbGVycz1lLHRoaXMudHlwaW5nSW5Qcm9ncmVzcz0hMX0saXNDaGFyYWN0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGU+PTQ4JiY5MD49ZXx8ZT49OTYmJjExMT49ZXx8ZT49MTg2JiYxOTI+PWV8fGU+PTIxOSYmMjIyPj1lfHwyMjk9PWV9LHRvb2xGcm9tU2hvcnRjdXQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG89U3RyaW5nLmZyb21DaGFyQ29kZShuLmtleUNvZGUpO2ZvcihpIGluIHQpaWYocj1lLmV4dGVuZCh7Y3RybDohMSxhbHQ6ITEsc2hpZnQ6ITF9LHRbaV0ub3B0aW9ucyksKHIua2V5PT1vfHxyLmtleT09bi5rZXlDb2RlKSYmci5jdHJsPT1uLmN0cmxLZXkmJnIuYWx0PT1uLmFsdEtleSYmci5zaGlmdD09bi5zaGlmdEtleSlyZXR1cm4gaX0saXNUeXBpbmdLZXk6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5rZXlDb2RlO3JldHVybiB0aGlzLmlzQ2hhcmFjdGVyKHQpJiYhZS5jdHJsS2V5JiYhZS5hbHRLZXl8fDMyPT10fHwxMz09dHx8OD09dHx8NDY9PXQmJiFlLnNoaWZ0S2V5JiYhZS5jdHJsS2V5JiYhZS5hbHRLZXl9LGlzTW9kaWZpZXJLZXk6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5rZXlDb2RlO3JldHVybiAxNz09dCYmIWUuc2hpZnRLZXkmJiFlLmFsdEtleXx8MTY9PXQmJiFlLmN0cmxLZXkmJiFlLmFsdEtleXx8MTg9PXQmJiFlLmN0cmxLZXkmJiFlLnNoaWZ0S2V5fSxpc1N5c3RlbTpmdW5jdGlvbihlKXtyZXR1cm4gNDY9PWUua2V5Q29kZSYmZS5jdHJsS2V5JiYhZS5hbHRLZXkmJiFlLnNoaWZ0S2V5fSxzdGFydFR5cGluZzpmdW5jdGlvbihlKXt0aGlzLm9uRW5kVHlwaW5nPWUsdGhpcy50eXBpbmdJblByb2dyZXNzPSEwfSxzdG9wVHlwaW5nOmZ1bmN0aW9uKCl7dGhpcy50eXBpbmdJblByb2dyZXNzJiZ0aGlzLm9uRW5kVHlwaW5nJiZ0aGlzLm9uRW5kVHlwaW5nKCksdGhpcy50eXBpbmdJblByb2dyZXNzPSExfSxlbmRUeXBpbmc6ZnVuY3Rpb24odCl7dmFyIG49dGhpcztuLmNsZWFyVGltZW91dCgpLHQ/bi5zdG9wVHlwaW5nKCk6bi50aW1lb3V0PXdpbmRvdy5zZXRUaW1lb3V0KGUucHJveHkobi5zdG9wVHlwaW5nLG4pLDFlMyl9LGlzVHlwaW5nSW5Qcm9ncmVzczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGluZ0luUHJvZ3Jlc3N9LGNsZWFyVGltZW91dDpmdW5jdGlvbigpe3dpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KX0sbm90aWZ5OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzLmhhbmRsZXJzO2ZvcihuPTA7aS5sZW5ndGg+biYmIWlbbl1bdF0oZSk7bisrKTt9LGtleWRvd246ZnVuY3Rpb24oZSl7dGhpcy5ub3RpZnkoZSxcImtleWRvd25cIil9LGtleXVwOmZ1bmN0aW9uKGUpe3RoaXMubm90aWZ5KGUsXCJrZXl1cFwiKX19KSxrPWkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMuZWRpdG9yPWUsdGhpcy5jbGVhbmVycz1bbmV3IEMsbmV3IFMsbmV3IFRdfSxodG1sVG9GcmFnbWVudDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmVkaXRvcixuPXQuZG9jdW1lbnQsaT1zLmNyZWF0ZShuLFwiZGl2XCIpLHI9bi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Zm9yKGkuaW5uZXJIVE1MPWU7aS5maXJzdENoaWxkOylyLmFwcGVuZENoaWxkKGkuZmlyc3RDaGlsZCk7cmV0dXJuIHJ9LGlzQmxvY2s6ZnVuY3Rpb24oZSl7cmV0dXJuLzwoZGl2fHB8dWx8b2x8dGFibGV8aFsxLTZdKS9pLnRlc3QoZSl9LF9zdGFydE1vZGlmaWNhdGlvbjpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLmVkaXRvcjtpZighdGhpcy5faW5Qcm9ncmVzcylyZXR1cm4gdGhpcy5faW5Qcm9ncmVzcz0hMCxlPW4uZ2V0UmFuZ2UoKSx0PW5ldyBkKGUpLHMucGVyc2lzdFNjcm9sbFRvcChuLmRvY3VtZW50KSx7cmFuZ2U6ZSxyZXN0b3JlUG9pbnQ6dH19LF9lbmRNb2RpZmljYXRpb246ZnVuY3Rpb24oZSl7dCh0aGlzLmVkaXRvcixlLnJlc3RvcmVQb2ludCksdGhpcy5lZGl0b3IuX3NlbGVjdGlvbkNoYW5nZSgpLHRoaXMuX2luUHJvZ3Jlc3M9ITF9LF9jb250ZW50TW9kaWZpY2F0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPW4uZWRpdG9yLHI9bi5fc3RhcnRNb2RpZmljYXRpb24oKTtyJiYoZS5jYWxsKG4saSxyLnJhbmdlKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5jYWxsKG4saSxyLnJhbmdlKSxuLl9lbmRNb2RpZmljYXRpb24ocil9KSl9LG9uY3V0OmZ1bmN0aW9uKCl7dGhpcy5fY29udGVudE1vZGlmaWNhdGlvbihlLm5vb3AsZS5ub29wKX0sX2ZpbGVUb0RhdGFVUkw6ZnVuY3Rpb24odCxuKXt2YXIgaT10LmdldEFzRmlsZSgpLHI9bmV3IEZpbGVSZWFkZXI7ci5vbmxvYWQ9bnx8ZS5ub29wLHIucmVhZEFzRGF0YVVSTChpKX0sX3RyaWdnZXJQYXN0ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXtodG1sOmV8fFwiXCJ9O24uaHRtbD1uLmh0bWwucmVwbGFjZSgvXFx1ZmVmZi9nLFwiXCIpLHRoaXMuZWRpdG9yLnRyaWdnZXIoXCJwYXN0ZVwiLG4pLHRoaXMucGFzdGUobi5odG1sLHR8fHt9KX0sX2hhbmRsZUltYWdlUGFzdGU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI7aWYoXCJGaWxlUmVhZGVyXCJpbiB3aW5kb3cmJih0PXRoaXMsbj1lLmNsaXBib2FyZERhdGF8fGUub3JpZ2luYWxFdmVudC5jbGlwYm9hcmREYXRhLGk9biYmKG4uaXRlbXN8fG4uZmlsZXMpLGkmJmkubGVuZ3RoJiYvXmltYWdlXFwvL2kudGVzdChpWzBdLnR5cGUpJiYocj10Ll9zdGFydE1vZGlmaWNhdGlvbigpKSkpcmV0dXJuIHRoaXMuX2ZpbGVUb0RhdGFVUkwoaVswXSxmdW5jdGlvbihlKXt0Ll90cmlnZ2VyUGFzdGUoJzxpbWcgc3JjPVwiJytlLnRhcmdldC5yZXN1bHQrJ1wiIC8+JyksdC5fZW5kTW9kaWZpY2F0aW9uKHIpfSksITB9LG9ucGFzdGU6ZnVuY3Rpb24odCl7dGhpcy5faGFuZGxlSW1hZ2VQYXN0ZSh0KXx8dGhpcy5fY29udGVudE1vZGlmaWNhdGlvbihmdW5jdGlvbihpLHIpe3ZhciBvLGEsbCxjPXMuY3JlYXRlKGkuZG9jdW1lbnQsXCJkaXZcIix7Y2xhc3NOYW1lOlwiay1wYXN0ZS1jb250YWluZXJcIixpbm5lckhUTUw6XCLvu79cIn0pLGQ9bi5zdXBwb3J0LmJyb3dzZXI7aS5ib2R5LmFwcGVuZENoaWxkKGMpLGQubXNpZSYmMTE+ZC52ZXJzaW9uPyh0LnByZXZlbnREZWZhdWx0KCksbz1pLmNyZWF0ZVJhbmdlKCksby5zZWxlY3ROb2RlQ29udGVudHMoYyksaS5zZWxlY3RSYW5nZShvKSxhPWkuZG9jdW1lbnQuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKSxhLm1vdmVUb0VsZW1lbnRUZXh0KGMpLGUoaS5ib2R5KS51bmJpbmQoXCJwYXN0ZVwiKSxhLmV4ZWNDb21tYW5kKFwiUGFzdGVcIiksZShpLmJvZHkpLmJpbmQoXCJwYXN0ZVwiLGUucHJveHkodGhpcy5vbnBhc3RlLHRoaXMpKSk6KGw9aS5jcmVhdGVSYW5nZSgpLGwuc2VsZWN0Tm9kZUNvbnRlbnRzKGMpLGkuc2VsZWN0UmFuZ2UobCkpLHIuZGVsZXRlQ29udGVudHMoKX0sZnVuY3Rpb24odCxuKXt2YXIgaSxyPVwiXCI7dC5zZWxlY3RSYW5nZShuKSxpPWUodC5ib2R5KS5jaGlsZHJlbihcIi5rLXBhc3RlLWNvbnRhaW5lclwiKSxpLmVhY2goZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxhc3RDaGlsZDtlJiZzLmlzKGUsXCJiclwiKSYmcy5yZW1vdmUoZSkscis9dGhpcy5pbm5lckhUTUx9KSxpLnJlbW92ZSgpLHRoaXMuX3RyaWdnZXJQYXN0ZShyLHtjbGVhbjohMH0pfSl9LHNwbGl0dGFibGVQYXJlbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpO2lmKGUpcmV0dXJuIHMuY2xvc2VzdEVkaXRhYmxlT2ZUeXBlKHQsW1wicFwiLFwidWxcIixcIm9sXCJdKXx8dC5wYXJlbnROb2RlO2lmKG49dC5wYXJlbnROb2RlLGk9dC5vd25lckRvY3VtZW50LmJvZHkscy5pc0lubGluZShuKSlmb3IoO24ucGFyZW50Tm9kZSE9aSYmIXMuaXNCbG9jayhuLnBhcmVudE5vZGUpOyluPW4ucGFyZW50Tm9kZTtyZXR1cm4gbn0scGFzdGU6ZnVuY3Rpb24odCxuKXt2YXIgaSxvLGEsbCxjLGQscCxmLGcsbSx2LF89dGhpcy5lZGl0b3I7Zm9yKG49aCh7Y2xlYW46ITEsc3BsaXQ6ITB9LG4pLGk9MCxvPXRoaXMuY2xlYW5lcnMubGVuZ3RoO28+aTtpKyspdGhpcy5jbGVhbmVyc1tpXS5hcHBsaWNhYmxlKHQpJiYodD10aGlzLmNsZWFuZXJzW2ldLmNsZWFuKHQpKTtpZihuLmNsZWFuJiYodD10LnJlcGxhY2UoLyg8YnI+KFxcc3wmbmJzcDspKikrKDxcXC8/KGRpdnxwfGxpfGNvbHx0KSkvZ2ksXCIkM1wiKSx0PXQucmVwbGFjZSgvPChhfHNwYW4pW14+XSo+PFxcL1xcMT4vZ2ksXCJcIikpLHQ9dC5yZXBsYWNlKC9ePGxpL2ksXCI8dWw+PGxpXCIpLnJlcGxhY2UoL2xpPiQvZyxcImxpPjwvdWw+XCIpLGE9dGhpcy5pc0Jsb2NrKHQpLF8uZm9jdXMoKSxsPV8uZ2V0UmFuZ2UoKSxsLmRlbGV0ZUNvbnRlbnRzKCksbC5zdGFydENvbnRhaW5lcj09Xy5kb2N1bWVudCYmbC5zZWxlY3ROb2RlQ29udGVudHMoXy5ib2R5KSxjPW5ldyB1LGQ9Yy5hZGRDYXJldChsKSxwPXRoaXMuc3BsaXR0YWJsZVBhcmVudChhLGQpLGY9ITEsZz1wIT1fLmJvZHkmJiFzLmlzKHAsXCJ0ZFwiKSxuLnNwbGl0JiZnJiYoYXx8cy5pc0lubGluZShwKSkmJihsLnNlbGVjdE5vZGUoZCksci5SYW5nZVV0aWxzLnNwbGl0KGwscCwhMCksZj0hMCksbT10aGlzLmh0bWxUb0ZyYWdtZW50KHQpLG0uZmlyc3RDaGlsZCYmXCJrLXBhc3RlLWNvbnRhaW5lclwiPT09bS5maXJzdENoaWxkLmNsYXNzTmFtZSl7Zm9yKHY9W10saT0wLG89bS5jaGlsZE5vZGVzLmxlbmd0aDtvPmk7aSsrKXYucHVzaChtLmNoaWxkTm9kZXNbaV0uaW5uZXJIVE1MKTttPXRoaXMuaHRtbFRvRnJhZ21lbnQodi5qb2luKFwiPGJyIC8+XCIpKX1pZihlKG0uY2hpbGROb2RlcykuZmlsdGVyKFwidGFibGVcIikuYWRkQ2xhc3MoXCJrLXRhYmxlXCIpLmVuZCgpLmZpbmQoXCJ0YWJsZVwiKS5hZGRDbGFzcyhcImstdGFibGVcIiksbC5pbnNlcnROb2RlKG0pLHA9dGhpcy5zcGxpdHRhYmxlUGFyZW50KGEsZCksZil7Zm9yKDtkLnBhcmVudE5vZGUhPXA7KXMudW53cmFwKGQucGFyZW50Tm9kZSk7cy51bndyYXAoZC5wYXJlbnROb2RlKX1zLm5vcm1hbGl6ZShsLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKSxkLnN0eWxlLmRpc3BsYXk9XCJpbmxpbmVcIixzLnJlc3RvcmVTY3JvbGxUb3AoXy5kb2N1bWVudCkscy5zY3JvbGxUbyhkKSxjLnJlbW92ZUNhcmV0KGwpLF8uc2VsZWN0UmFuZ2UobCl9fSkseD1pLmV4dGVuZCh7Y2xlYW46ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMscj1pLnJlcGxhY2VtZW50cztmb3IodD0wLG49ci5sZW5ndGg7bj50O3QrPTIpZT1lLnJlcGxhY2Uoclt0XSxyW3QrMV0pO3JldHVybiBlfX0pLEM9eC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt0aGlzLnJlcGxhY2VtZW50cz1bLzwoXFwvPylzY3JpcHQoW14+XSopPi9pLFwiPCQxdGVsZXJpazpzY3JpcHQkMj5cIl19LGFwcGxpY2FibGU6ZnVuY3Rpb24oZSl7cmV0dXJuLzxzY3JpcHRbXj5dKj4vaS50ZXN0KGUpfX0pLFM9eC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt0aGlzLnJlcGxhY2VtZW50cz1bLzxcXD94bWxbXj5dKj4vZ2ksXCJcIiwvPCEtLSgufFxcbikqPy0tPi9nLFwiXCIsLyZxdW90Oy9nLFwiJ1wiLC8oPzo8YnI+Jm5ic3A7W1xcc1xcclxcbl0rfDxicj4pKig8XFwvPyhoWzEtNl18aHJ8cHxkaXZ8dGFibGV8dGJvZHl8dGhlYWR8dGZvb3R8dGh8dHJ8dGR8bGl8b2x8dWx8Y2FwdGlvbnxhZGRyZXNzfHByZXxmb3JtfGJsb2NrcXVvdGV8ZGx8ZHR8ZGR8ZGlyfGZpZWxkc2V0KVtePl0qPikoPzo8YnI+Jm5ic3A7W1xcc1xcclxcbl0rfDxicj4pKi9nLFwiJDFcIiwvPGJyPjxicj4vZyxcIjxCUj48QlI+XCIsLzxicj4oPyFcXG4pL2csXCIgXCIsLzx0YWJsZShbXj5dKik+KFxcc3wmbmJzcDspKzx0L2dpLFwiPHRhYmxlJDE+PHRcIiwvPHRyW14+XSo+KFxcc3wmbmJzcDspKjxcXC90cj4vZ2ksXCJcIiwvPHRib2R5W14+XSo+KFxcc3wmbmJzcDspKjxcXC90Ym9keT4vZ2ksXCJcIiwvPHRhYmxlW14+XSo+KFxcc3wmbmJzcDspKjxcXC90YWJsZT4vZ2ksXCJcIiwvPEJSPjxCUj4vZyxcIjxicj5cIiwvXlxccyooJm5ic3A7KSsvZ2ksXCJcIiwvKCZuYnNwO3w8YnJbXj5dKj4pK1xccyokL2dpLFwiXCIsL21zby1bXjtcIl0qOz8vZ2ksXCJcIiwvPChcXC8/KWIoXFxzW14+XSopPz4vZ2ksXCI8JDFzdHJvbmckMj5cIiwvPChcXC8/KWkoXFxzW14+XSopPz4vZ2ksXCI8JDFlbSQyPlwiLC88bzpwPiZuYnNwOzxcXC9vOnA+L2dpLFwiJm5ic3A7XCIsLzxcXC8/KG1ldGF8bGlua3xzdHlsZXxvOnx2Onx4OilbXj5dKj4oKD86LnxcXG4pKj88XFwvKG1ldGF8bGlua3xzdHlsZXxvOnx2Onx4OilbXj5dKj4pPy9naSxcIlwiLC88XFwvbz4vZyxcIlwiLC9zdHlsZT0oW1wifCddKVxccypcXDEvZyxcIlwiLC8oPGJyW14+XSo+KT9cXG4vZyxmdW5jdGlvbihlLHQpe3JldHVybiB0P2U6XCIgXCJcclxufV19LGFwcGxpY2FibGU6ZnVuY3Rpb24oZSl7cmV0dXJuL2NsYXNzPVwiP01zb3xzdHlsZT1cIlteXCJdKm1zby0vaS50ZXN0KGUpfHwvdXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTpvZmZpY2UvLnRlc3QoZSl9LHN0cmlwRW1wdHlBbmNob3JzOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoLzxhKFtePl0qKT5cXHMqPFxcL2E+L2dpLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIXR8fHQuaW5kZXhPZihcImhyZWZcIik8MD9cIlwiOmV9KX0sbGlzdFR5cGU6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuL14oPHNwYW4gW14+XSp0ZXhodG1sW14+XSo+KT88c3BhbiBbXj5dKihTeW1ib2x8V2luZ2RpbmdzKVtePl0qPi9pLnRlc3QoZSkmJih0PSEwKSxlPWUucmVwbGFjZSgvPFxcLz9cXHcrW14+XSo+L2csXCJcIikucmVwbGFjZSgvJm5ic3A7L2csXCLCoFwiKSwhdCYmL15bXFx1MjAyMlxcdTAwYjdcXHUwMGE3XFx1MDBkOG9dXFx1MDBhMCsvLnRlc3QoZSl8fHQmJi9eLlxcdTAwYTArLy50ZXN0KGUpP1widWxcIjovXlxccypcXHcrW1xcLlxcKV1cXHUwMGEwezIsfS8udGVzdChlKT9cIm9sXCI6dm9pZCAwfSxfY29udmVydFRvTGk6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIDE9PWUuY2hpbGROb2Rlcy5sZW5ndGg/dD1lLmZpcnN0Q2hpbGQuaW5uZXJIVE1MLnJlcGxhY2UoL15cXHcrW1xcLlxcKV0oJm5ic3A7KSsgLyxcIlwiKToocy5yZW1vdmUoZS5maXJzdENoaWxkKSwzPT1lLmZpcnN0Q2hpbGQubm9kZVR5cGUmJi9eW2l2eF0rXFwuJC9pLnRlc3QoZS5maXJzdENoaWxkLm5vZGVWYWx1ZSkmJnMucmVtb3ZlKGUuZmlyc3RDaGlsZCksL14oJm5ic3A7fFxccykrJC9pLnRlc3QoZS5maXJzdENoaWxkLmlubmVySFRNTCkmJnMucmVtb3ZlKGUuZmlyc3RDaGlsZCksdD1lLmlubmVySFRNTCkscy5yZW1vdmUoZSkscy5jcmVhdGUoZG9jdW1lbnQsXCJsaVwiLHtpbm5lckhUTUw6dH0pfSxsaXN0czpmdW5jdGlvbih0KXt2YXIgbixpLHIsbyxhLGwsYyxkLHUsaD1lKHMuYmxvY2tFbGVtZW50cy5qb2luKFwiLFwiKSx0KSxwPS0xLGY9e3VsOnt9LG9sOnt9fSxnPXQ7Zm9yKHI9MDtoLmxlbmd0aD5yO3IrKylpZihvPWhbcl0sYT10aGlzLmxpc3RUeXBlKG8uaW5uZXJIVE1MKSxpPXMubmFtZShvKSxcInRkXCIhPWkpaWYoYSYmXCJwXCI9PWkpe2lmKGw9cGFyc2VGbG9hdChvLnN0eWxlLm1hcmdpbkxlZnR8fDApLGM9ZlthXVtsXSwobD5wfHwhYykmJihjPXMuY3JlYXRlKGRvY3VtZW50LGEpLGc9PXQ/cy5pbnNlcnRCZWZvcmUoYyxvKTpnLmFwcGVuZENoaWxkKGMpLGZbYV1bbF09YyksbiE9YSlmb3IoZCBpbiBmKWZvcih1IGluIGZbZF0pZS5jb250YWlucyhjLGZbZF1bdV0pJiZkZWxldGUgZltkXVt1XTtnPXRoaXMuX2NvbnZlcnRUb0xpKG8pLGMuYXBwZW5kQ2hpbGQoZykscD1sLG49YX1lbHNlIG8uaW5uZXJIVE1MPyhmPXt1bDp7fSxvbDp7fX0sZz10LHA9LTEpOnMucmVtb3ZlKG8pfSxyZW1vdmVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmF0dHJpYnV0ZXMsbj10Lmxlbmd0aDtuLS07KVwiY29sc3BhblwiIT1zLm5hbWUodFtuXSkmJmUucmVtb3ZlQXR0cmlidXRlTm9kZSh0W25dKX0sY3JlYXRlQ29sR3JvdXA6ZnVuY3Rpb24odCl7dmFyIGk9dC5jZWxscyxyPWUodCkuY2xvc2VzdChcInRhYmxlXCIpLG89ci5jaGlsZHJlbihcImNvbGdyb3VwXCIpOzI+aS5sZW5ndGh8fChvLmxlbmd0aCYmKGk9by5jaGlsZHJlbigpLG9bMF0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvWzBdKSksbz1lKGUubWFwKGksZnVuY3Rpb24oZSl7dmFyIHQ9ZS53aWR0aDtyZXR1cm4gdCYmMCE9PXBhcnNlSW50KHQsMTApP24uZm9ybWF0KCc8Y29sIHN0eWxlPVwid2lkdGg6ezB9cHg7XCIvPicsdCk6XCI8Y29sIC8+XCJ9KS5qb2luKFwiXCIpKSxvLmlzKFwiY29sZ3JvdXBcIil8fChvPWUoXCI8Y29sZ3JvdXAvPlwiKS5hcHBlbmQobykpLG8ucHJlcGVuZFRvKHIpKX0sY29udmVydEhlYWRlcnM6ZnVuY3Rpb24odCl7dmFyIG4saT10LmNlbGxzLHI9ZS5tYXAoaSxmdW5jdGlvbih0KXt2YXIgbj1lKHQpLmNoaWxkcmVuKFwicFwiKS5jaGlsZHJlbihcInN0cm9uZ1wiKVswXTtyZXR1cm4gbiYmXCJzdHJvbmdcIj09cy5uYW1lKG4pP246dm9pZCAwfSk7aWYoci5sZW5ndGg9PWkubGVuZ3RoKXtmb3Iobj0wO3IubGVuZ3RoPm47bisrKXMudW53cmFwKHJbbl0pO2ZvcihlKHQpLmNsb3Nlc3QoXCJ0YWJsZVwiKS5maW5kKFwiY29sZ3JvdXBcIikuYWZ0ZXIoXCI8dGhlYWQ+PC90aGVhZD5cIikuZW5kKCkuZmluZChcInRoZWFkXCIpLmFwcGVuZCh0KSxuPTA7aS5sZW5ndGg+bjtuKyspcy5jaGFuZ2VUYWcoaVtuXSxcInRoXCIpfX0scmVtb3ZlUGFyYWdyYXBoczpmdW5jdGlvbih0KXt2YXIgbixpLHIsbyxhO2ZvcihuPTA7dC5sZW5ndGg+bjtuKyspZm9yKHRoaXMucmVtb3ZlQXR0cmlidXRlcyh0W25dKSxvPWUodFtuXSksYT1vLmNoaWxkcmVuKFwicFwiKSxpPTAscj1hLmxlbmd0aDtyPmk7aSsrKXItMT5pJiZzLmluc2VydEFmdGVyKHMuY3JlYXRlKGRvY3VtZW50LFwiYnJcIiksYVtpXSkscy51bndyYXAoYVtpXSl9LHJlbW92ZURlZmF1bHRDb2xvcnM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7ZS5sZW5ndGg+dDt0KyspL15cXHMqY29sb3I6XFxzKlteO10qOz8kL2kudGVzdChlW3RdLnN0eWxlLmNzc1RleHQpJiZzLnVud3JhcChlW3RdKX0sdGFibGVzOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvLGEscz1lKHQpLmZpbmQoXCJ0YWJsZVwiKSxsPXRoaXM7Zm9yKG89MDtzLmxlbmd0aD5vO28rKyl7Zm9yKG49c1tvXS5yb3dzLHI9aT1uWzBdLGE9MTtuLmxlbmd0aD5hO2ErKyluW2FdLmNlbGxzLmxlbmd0aD5yLmNlbGxzLmxlbmd0aCYmKHI9blthXSk7bC5jcmVhdGVDb2xHcm91cChyKSxsLmNvbnZlcnRIZWFkZXJzKGkpLGwucmVtb3ZlQXR0cmlidXRlcyhzW29dKSxsLnJlbW92ZVBhcmFncmFwaHMocy5lcShvKS5maW5kKFwidGQsdGhcIikpLGwucmVtb3ZlRGVmYXVsdENvbG9ycyhzLmVxKG8pLmZpbmQoXCJzcGFuXCIpKX19LGhlYWRlcnM6ZnVuY3Rpb24odCl7dmFyIG4saT1lKHQpLmZpbmQoXCJwLk1zb1RpdGxlXCIpO2ZvcihuPTA7aS5sZW5ndGg+bjtuKyspcy5jaGFuZ2VUYWcoaVtuXSxcImgxXCIpfSxjbGVhbjpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXM7cmV0dXJuIGU9eC5mbi5jbGVhbi5jYWxsKG4sZSksZT1uLnN0cmlwRW1wdHlBbmNob3JzKGUpLHQ9cy5jcmVhdGUoZG9jdW1lbnQsXCJkaXZcIix7aW5uZXJIVE1MOmV9KSxuLmhlYWRlcnModCksbi5saXN0cyh0KSxuLnRhYmxlcyh0KSxlPXQuaW5uZXJIVE1MLnJlcGxhY2UoLyg8W14+XSopXFxzK2NsYXNzPVwiP1teXCJcXHM+XSpcIj8vZ2ksXCIkMVwiKX19KSxUPXguZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7dGhpcy5yZXBsYWNlbWVudHM9Wy9cXHMrY2xhc3M9XCJBcHBsZS1zdHlsZS1zcGFuW15cIl0qXCIvZ2ksXCJcIiwvPChkaXZ8cHxoWzEtNl0pXFxzK3N0eWxlPVwiW15cIl0qXCIvZ2ksXCI8JDFcIiwvXjxkaXY+KC4qKTxcXC9kaXY+JC8sXCIkMVwiXX0sYXBwbGljYWJsZTpmdW5jdGlvbihlKXtyZXR1cm4vY2xhc3M9XCI/QXBwbGUtc3R5bGUtc3BhbnxzdHlsZT1cIlteXCJdKi13ZWJraXQtbmJzcC1tb2RlL2kudGVzdChlKX19KTtoKHIse0NvbW1hbmQ6cCxHZW5lcmljQ29tbWFuZDpmLEluc2VydEh0bWxDb21tYW5kOmcsSW5zZXJ0SHRtbFRvb2w6bSxVbmRvUmVkb1N0YWNrOnYsVHlwaW5nSGFuZGxlcjpfLFN5c3RlbUhhbmRsZXI6dyxCYWNrc3BhY2VIYW5kbGVyOnksS2V5Ym9hcmQ6YixDbGlwYm9hcmQ6ayxDbGVhbmVyOngsTVNXb3JkRm9ybWF0Q2xlYW5lcjpTLFdlYmtpdEZvcm1hdENsZWFuZXI6VH0pLGEoXCJpbnNlcnRIdG1sXCIsbmV3IG0oe3RlbXBsYXRlOm5ldyBjKHt0ZW1wbGF0ZTpvLmRyb3BEb3duTGlzdFRlbXBsYXRlLHRpdGxlOlwiSW5zZXJ0IEhUTUxcIixpbml0aWFsVmFsdWU6XCJJbnNlcnQgSFRNTFwifSl9KSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe3ZhciB0PXdpbmRvdy5rZW5kbyxuPXQuQ2xhc3MsaT10LnVpLmVkaXRvcixyPXQudWkuRWRpdG9yLmZuLm9wdGlvbnMuZm9ybWF0cyxvPWkuRWRpdG9yVXRpbHMsYT1pLlRvb2wscz1pLlRvb2xUZW1wbGF0ZSxsPWkuRm9ybWF0VG9vbCxjPWkuRG9tLGQ9aS5SYW5nZVV0aWxzLHU9ZS5leHRlbmQsaD1pLkVkaXRvclV0aWxzLnJlZ2lzdGVyVG9vbCxwPWkuRWRpdG9yVXRpbHMucmVnaXN0ZXJGb3JtYXQsZj1cImstbWFya2VyXCIsZz1uLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLmZvcm1hdD1lfSxudW1iZXJPZlNpYmxpbmdzOmZ1bmN0aW9uKGUpe3ZhciB0LG49MCxpPTAscj0wLG89ZS5wYXJlbnROb2RlO2Zvcih0PW8uZmlyc3RDaGlsZDt0O3Q9dC5uZXh0U2libGluZyl0IT1lJiYodC5jbGFzc05hbWU9PWY/cisrOjM9PXQubm9kZVR5cGU/bisrOmkrKyk7cmV0dXJuIHI+MSYmby5maXJzdENoaWxkLmNsYXNzTmFtZT09ZiYmby5sYXN0Q2hpbGQuY2xhc3NOYW1lPT1mPzA6aStufSxmaW5kU3VpdGFibGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4hdCYmdGhpcy5udW1iZXJPZlNpYmxpbmdzKGUpPjA/bnVsbDpjLnBhcmVudE9mVHlwZShlLHRoaXMuZm9ybWF0WzBdLnRhZ3MpfSxmaW5kRm9ybWF0OmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYT10aGlzLmZvcm1hdCxzPWMuYXR0ckVxdWFscztmb3IodD0wLG49YS5sZW5ndGg7bj50O3QrKyl7aWYoaT1lLHI9YVt0XS50YWdzLG89YVt0XS5hdHRyLGkmJmMub2ZUeXBlKGkscikmJnMoaSxvKSlyZXR1cm4gaTtmb3IoO2k7KWlmKGk9Yy5wYXJlbnRPZlR5cGUoaSxyKSxpJiZzKGksbykpcmV0dXJuIGl9cmV0dXJuIG51bGx9LGlzRm9ybWF0dGVkOmZ1bmN0aW9uKGUpe3ZhciB0LG47Zm9yKHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspaWYodGhpcy5maW5kRm9ybWF0KGVbdF0pKXJldHVybiEwO3JldHVybiExfX0pLG09bi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLmZpbmRlcj1uZXcgZyhlKSx0aGlzLmF0dHJpYnV0ZXM9dSh7fSxlWzBdLmF0dHIsdCksdGhpcy50YWc9ZVswXS50YWdzWzBdfSx3cmFwOmZ1bmN0aW9uKGUpe3JldHVybiBjLndyYXAoZSxjLmNyZWF0ZShlLm93bmVyRG9jdW1lbnQsdGhpcy50YWcsdGhpcy5hdHRyaWJ1dGVzKSl9LGFjdGl2YXRlOmZ1bmN0aW9uKGUsdCl7dGhpcy5maW5kZXIuaXNGb3JtYXR0ZWQodCk/KHRoaXMuc3BsaXQoZSksdGhpcy5yZW1vdmUodCkpOnRoaXMuYXBwbHkodCl9LHRvZ2dsZTpmdW5jdGlvbihlKXt2YXIgdD1kLnRleHROb2RlcyhlKTt0Lmxlbmd0aD4wJiZ0aGlzLmFjdGl2YXRlKGUsdCl9LGFwcGx5OmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG89W107Zm9yKHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspaT1lW3RdLHI9dGhpcy5maW5kZXIuZmluZFN1aXRhYmxlKGkpLHI/Yy5hdHRyKHIsdGhpcy5hdHRyaWJ1dGVzKTpyPXRoaXMud3JhcChpKSxvLnB1c2gocik7dGhpcy5jb25zb2xpZGF0ZShvKX0scmVtb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saTtmb3IodD0wLG49ZS5sZW5ndGg7bj50O3QrKylpPXRoaXMuZmluZGVyLmZpbmRGb3JtYXQoZVt0XSksaSYmKHRoaXMuYXR0cmlidXRlcyYmdGhpcy5hdHRyaWJ1dGVzLnN0eWxlPyhjLnVuc3R5bGUoaSx0aGlzLmF0dHJpYnV0ZXMuc3R5bGUpLGkuc3R5bGUuY3NzVGV4dHx8aS5hdHRyaWJ1dGVzW1wiY2xhc3NcIl18fGMudW53cmFwKGkpKTpjLnVud3JhcChpKSl9LHNwbGl0OmZ1bmN0aW9uKGUpe3ZhciB0LG4saT1kLnRleHROb2RlcyhlKSxyPWkubGVuZ3RoO2lmKHI+MClmb3IodD0wO3I+dDt0Kyspbj10aGlzLmZpbmRlci5maW5kRm9ybWF0KGlbdF0pLG4mJmQuc3BsaXQoZSxuLCEwKX0sY29uc29saWRhdGU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG47ZS5sZW5ndGg+MTspaWYodD1lLnBvcCgpLG49ZVtlLmxlbmd0aC0xXSx0LnByZXZpb3VzU2libGluZyYmdC5wcmV2aW91c1NpYmxpbmcuY2xhc3NOYW1lPT1mJiZuLmFwcGVuZENoaWxkKHQucHJldmlvdXNTaWJsaW5nKSx0LnRhZ05hbWU9PW4udGFnTmFtZSYmdC5wcmV2aW91c1NpYmxpbmc9PW4mJnQuc3R5bGUuY3NzVGV4dD09bi5zdHlsZS5jc3NUZXh0KXtmb3IoO3QuZmlyc3RDaGlsZDspbi5hcHBlbmRDaGlsZCh0LmZpcnN0Q2hpbGQpO2MucmVtb3ZlKHQpfX19KSx2PWcuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dGhpcy5mb3JtYXQ9ZSx0aGlzLmdyZWVkeVByb3BlcnR5PXQsZy5mbi5pbml0LmNhbGwodGhpcyxlKX0sZ2V0SW5saW5lQ3NzVmFsdWU6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG8sYSxzLGwsZCx1LGgscCxmLGc9dC5hdHRyaWJ1dGVzLG09ZS50cmltO2lmKGcpZm9yKG49MCxpPWcubGVuZ3RoO2k+bjtuKyspaWYocj1nW25dLG89ci5ub2RlTmFtZSxhPXIubm9kZVZhbHVlLHIuc3BlY2lmaWVkJiZcInN0eWxlXCI9PW8pZm9yKHM9bShhfHx0LnN0eWxlLmNzc1RleHQpLnNwbGl0KFwiO1wiKSxkPTAsdT1zLmxlbmd0aDt1PmQ7ZCsrKWlmKGw9c1tkXSxsLmxlbmd0aCl7aWYoaD1sLnNwbGl0KFwiOlwiKSxwPW0oaFswXS50b0xvd2VyQ2FzZSgpKSxmPW0oaFsxXSkscCE9dGhpcy5ncmVlZHlQcm9wZXJ0eSljb250aW51ZTtyZXR1cm4gcC5pbmRleE9mKFwiY29sb3JcIik+PTA/Yy50b0hleChmKTpmfX0sZ2V0Rm9ybWF0SW5uZXI6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG89ZShjLmlzRGF0YU5vZGUodCk/dC5wYXJlbnROb2RlOnQpLGE9by5wYXJlbnRzVW50aWwoXCJbY29udGVudEVkaXRhYmxlXVwiKS5hZGRCYWNrKCkudG9BcnJheSgpLnJldmVyc2UoKTtmb3Iobj0wLGk9YS5sZW5ndGg7aT5uO24rKylpZihyPVwiY2xhc3NOYW1lXCI9PXRoaXMuZ3JlZWR5UHJvcGVydHk/YVtuXS5jbGFzc05hbWU6dGhpcy5nZXRJbmxpbmVDc3NWYWx1ZShhW25dKSlyZXR1cm4gcjtyZXR1cm5cImluaGVyaXRcIn0sZ2V0Rm9ybWF0OmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLmdldEZvcm1hdElubmVyKGVbMF0pO2Zvcih0PTEsbj1lLmxlbmd0aDtuPnQ7dCsrKWlmKGkhPXRoaXMuZ2V0Rm9ybWF0SW5uZXIoZVt0XSkpcmV0dXJuXCJcIjtyZXR1cm4gaX0saXNGb3JtYXR0ZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuXCJcIiE9PXRoaXMuZ2V0Rm9ybWF0KGUpfX0pLF89bS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSxuLGkpe20uZm4uaW5pdC5jYWxsKHRoaXMsZSxuKSx0aGlzLnZhbHVlcz1uLHRoaXMuZmluZGVyPW5ldyB2KGUsaSksaSYmKHRoaXMuZ3JlZWR5UHJvcGVydHk9dC50b0NhbWVsQ2FzZShpKSl9LGFjdGl2YXRlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5ncmVlZHlQcm9wZXJ0eSxpPVwiYXBwbHlcIjt0aGlzLnNwbGl0KGUpLG4mJlwiaW5oZXJpdFwiPT10aGlzLnZhbHVlcy5zdHlsZVtuXSYmKGk9XCJyZW1vdmVcIiksdGhpc1tpXSh0KX19KSx5PWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe2wuZm4uaW5pdC5jYWxsKHRoaXMsdShlLHtmaW5kZXI6bmV3IGcoZS5mb3JtYXQpLGZvcm1hdHRlcjpmdW5jdGlvbigpe3JldHVybiBuZXcgbShlLmZvcm1hdCl9fSkpfX0pLHc9YS5leHRlbmQoe3VwZGF0ZTpmdW5jdGlvbihlLHQpe3ZhciBuPWUuZGF0YSh0aGlzLnR5cGUpO24uY2xvc2UoKSxuLnZhbHVlKHRoaXMuZmluZGVyLmdldEZvcm1hdCh0KSl9fSksYj13LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXthLmZuLmluaXQuY2FsbCh0aGlzLGUpLHRoaXMudHlwZT10LnN1cHBvcnQuYnJvd3Nlci5tc2llfHx0LnN1cHBvcnQudG91Y2g/XCJrZW5kb0Ryb3BEb3duTGlzdFwiOlwia2VuZG9Db21ib0JveFwiLHRoaXMuZm9ybWF0PVt7dGFnczpbXCJzcGFuXCJdfV0sdGhpcy5maW5kZXI9bmV3IHYodGhpcy5mb3JtYXQsZS5jc3NBdHRyKX0sY29tbWFuZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnMsbj10aGlzLmZvcm1hdCxyPXt9O3JldHVybiBuZXcgaS5Gb3JtYXRDb21tYW5kKHUoZSx7Zm9ybWF0dGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHJbdC5kb21BdHRyXT1lLnZhbHVlLG5ldyBfKG4se3N0eWxlOnJ9LHQuY3NzQXR0cil9fSkpfSxpbml0aWFsaXplOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10LmVkaXRvcixyPXRoaXMub3B0aW9ucyxvPXIubmFtZSxzPVtdO3IuZGVmYXVsdFZhbHVlJiYocz1be3RleHQ6aS5vcHRpb25zLm1lc3NhZ2VzW3IuZGVmYXVsdFZhbHVlWzBdLnRleHRdLHZhbHVlOnIuZGVmYXVsdFZhbHVlWzBdLnZhbHVlfV0pLG49cy5jb25jYXQoci5pdGVtcz9yLml0ZW1zOmkub3B0aW9uc1tvXXx8W10pLGVbdGhpcy50eXBlXSh7ZGF0YVRleHRGaWVsZDpcInRleHRcIixkYXRhVmFsdWVGaWVsZDpcInZhbHVlXCIsZGF0YVNvdXJjZTpuLGNoYW5nZTpmdW5jdGlvbigpe2EuZXhlYyhpLG8sdGhpcy52YWx1ZSgpKX0saGlnaGxpZ2h0Rmlyc3Q6ITF9KSxlLmNsb3Nlc3QoXCIuay13aWRnZXRcIikucmVtb3ZlQ2xhc3MoXCJrLVwiK28pLmZpbmQoXCIqXCIpLmFkZEJhY2soKS5hdHRyKFwidW5zZWxlY3RhYmxlXCIsXCJvblwiKSxlLmRhdGEodGhpcy50eXBlKS52YWx1ZShcImluaGVyaXRcIil9fSksaz1hLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXthLmZuLmluaXQuY2FsbCh0aGlzLGUpLHRoaXMuZm9ybWF0PVt7dGFnczpbXCJzcGFuXCJdfV0sdGhpcy5maW5kZXI9bmV3IHYodGhpcy5mb3JtYXQsZS5jc3NBdHRyKX0sb3B0aW9uczp7cGFsZXR0ZTpcIndlYnNhZmVcIn0sdXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5fd2lkZ2V0LmNsb3NlKCl9LGNvbW1hbmQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5vcHRpb25zLG49dGhpcy5mb3JtYXQscj17fTtyZXR1cm4gbmV3IGkuRm9ybWF0Q29tbWFuZCh1KGUse2Zvcm1hdHRlcjpmdW5jdGlvbigpe3JldHVybiByW3QuZG9tQXR0cl09ZS52YWx1ZSxuZXcgXyhuLHtzdHlsZTpyfSx0LmNzc0F0dHIpfX0pKX0saW5pdGlhbGl6ZTpmdW5jdGlvbihuLGkpe3ZhciByPWkuZWRpdG9yLG89dGhpcy5uYW1lLHM9dSh7fSxrLmZuLm9wdGlvbnMsdGhpcy5vcHRpb25zKSxsPXMucGFsZXR0ZTtuPXRoaXMuX3dpZGdldD1uZXcgdC51aS5Db2xvclBpY2tlcihuLHt2YWx1ZTplLmlzQXJyYXkobCk/bFswXTpcIiMwMDBcIix0b29sSWNvbjpcImstXCIrcy5uYW1lLHBhbGV0dGU6bCxjaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZT1uLnZhbHVlKCk7ZSYmYS5leGVjKHIsbyxlKSxyLmZvY3VzKCl9LGFjdGl2YXRlOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxuLnRyaWdnZXIoXCJjaGFuZ2VcIil9fSksbi53cmFwcGVyLmF0dHIoe3RpdGxlOmkudGl0bGUsdW5zZWxlY3RhYmxlOlwib25cIn0pLmZpbmQoXCIqXCIpLmF0dHIoXCJ1bnNlbGVjdGFibGVcIixcIm9uXCIpfX0pO3UoaSx7SW5saW5lRm9ybWF0RmluZGVyOmcsSW5saW5lRm9ybWF0dGVyOm0sRGVsYXllZEV4ZWN1dGlvblRvb2w6dyxHcmVlZHlJbmxpbmVGb3JtYXRGaW5kZXI6dixHcmVlZHlJbmxpbmVGb3JtYXR0ZXI6XyxJbmxpbmVGb3JtYXRUb29sOnksRm9udFRvb2w6YixDb2xvclRvb2w6a30pLHAoXCJib2xkXCIsW3t0YWdzOltcInN0cm9uZ1wiLFwiYlwiXX0se3RhZ3M6W1wic3BhblwiXSxhdHRyOntzdHlsZTp7Zm9udFdlaWdodDpcImJvbGRcIn19fV0pLGgoXCJib2xkXCIsbmV3IHkoe2tleTpcIkJcIixjdHJsOiEwLGZvcm1hdDpyLmJvbGQsdGVtcGxhdGU6bmV3IHMoe3RlbXBsYXRlOm8uYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJCb2xkXCJ9KX0pKSxwKFwiaXRhbGljXCIsW3t0YWdzOltcImVtXCIsXCJpXCJdfSx7dGFnczpbXCJzcGFuXCJdLGF0dHI6e3N0eWxlOntmb250U3R5bGU6XCJpdGFsaWNcIn19fV0pLGgoXCJpdGFsaWNcIixuZXcgeSh7a2V5OlwiSVwiLGN0cmw6ITAsZm9ybWF0OnIuaXRhbGljLHRlbXBsYXRlOm5ldyBzKHt0ZW1wbGF0ZTpvLmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiSXRhbGljXCJ9KX0pKSxwKFwidW5kZXJsaW5lXCIsW3t0YWdzOltcInNwYW5cIl0sYXR0cjp7c3R5bGU6e3RleHREZWNvcmF0aW9uOlwidW5kZXJsaW5lXCJ9fX0se3RhZ3M6W1widVwiXX1dKSxoKFwidW5kZXJsaW5lXCIsbmV3IHkoe2tleTpcIlVcIixjdHJsOiEwLGZvcm1hdDpyLnVuZGVybGluZSx0ZW1wbGF0ZTpuZXcgcyh7dGVtcGxhdGU6by5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIlVuZGVybGluZVwifSl9KSkscChcInN0cmlrZXRocm91Z2hcIixbe3RhZ3M6W1wiZGVsXCIsXCJzdHJpa2VcIl19LHt0YWdzOltcInNwYW5cIl0sYXR0cjp7c3R5bGU6e3RleHREZWNvcmF0aW9uOlwibGluZS10aHJvdWdoXCJ9fX1dKSxoKFwic3RyaWtldGhyb3VnaFwiLG5ldyB5KHtmb3JtYXQ6ci5zdHJpa2V0aHJvdWdoLHRlbXBsYXRlOm5ldyBzKHt0ZW1wbGF0ZTpvLmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiU3RyaWtldGhyb3VnaFwifSl9KSkscChcInN1cGVyc2NyaXB0XCIsW3t0YWdzOltcInN1cFwiXX1dKSxoKFwic3VwZXJzY3JpcHRcIixuZXcgeSh7Zm9ybWF0OnIuc3VwZXJzY3JpcHQsdGVtcGxhdGU6bmV3IHMoe3RlbXBsYXRlOm8uYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJTdXBlcnNjcmlwdFwifSl9KSkscChcInN1YnNjcmlwdFwiLFt7dGFnczpbXCJzdWJcIl19XSksaChcInN1YnNjcmlwdFwiLG5ldyB5KHtmb3JtYXQ6ci5zdWJzY3JpcHQsdGVtcGxhdGU6bmV3IHMoe3RlbXBsYXRlOm8uYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJTdWJzY3JpcHRcIn0pfSkpLGgoXCJmb3JlQ29sb3JcIixuZXcgayh7Y3NzQXR0cjpcImNvbG9yXCIsZG9tQXR0cjpcImNvbG9yXCIsbmFtZTpcImZvcmVDb2xvclwiLHRlbXBsYXRlOm5ldyBzKHt0ZW1wbGF0ZTpvLmNvbG9yUGlja2VyVGVtcGxhdGUsdGl0bGU6XCJDb2xvclwifSl9KSksaChcImJhY2tDb2xvclwiLG5ldyBrKHtjc3NBdHRyOlwiYmFja2dyb3VuZC1jb2xvclwiLGRvbUF0dHI6XCJiYWNrZ3JvdW5kQ29sb3JcIixuYW1lOlwiYmFja0NvbG9yXCIsdGVtcGxhdGU6bmV3IHMoe3RlbXBsYXRlOm8uY29sb3JQaWNrZXJUZW1wbGF0ZSx0aXRsZTpcIkJhY2tncm91bmQgQ29sb3JcIn0pfSkpLGgoXCJmb250TmFtZVwiLG5ldyBiKHtjc3NBdHRyOlwiZm9udC1mYW1pbHlcIixkb21BdHRyOlwiZm9udEZhbWlseVwiLG5hbWU6XCJmb250TmFtZVwiLGRlZmF1bHRWYWx1ZTpbe3RleHQ6XCJmb250TmFtZUluaGVyaXRcIix2YWx1ZTpcImluaGVyaXRcIn1dLHRlbXBsYXRlOm5ldyBzKHt0ZW1wbGF0ZTpvLmNvbWJvQm94VGVtcGxhdGUsdGl0bGU6XCJGb250IE5hbWVcIn0pfSkpLGgoXCJmb250U2l6ZVwiLG5ldyBiKHtjc3NBdHRyOlwiZm9udC1zaXplXCIsZG9tQXR0cjpcImZvbnRTaXplXCIsbmFtZTpcImZvbnRTaXplXCIsZGVmYXVsdFZhbHVlOlt7dGV4dDpcImZvbnRTaXplSW5oZXJpdFwiLHZhbHVlOlwiaW5oZXJpdFwifV0sdGVtcGxhdGU6bmV3IHMoe3RlbXBsYXRlOm8uY29tYm9Cb3hUZW1wbGF0ZSx0aXRsZTpcIkZvbnQgU2l6ZVwifSl9KSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe3ZhciB0LG49d2luZG93LmtlbmRvLGk9bi5DbGFzcyxyPWUuZXh0ZW5kLG89bi51aS5lZGl0b3IsYT1uLnVpLkVkaXRvci5mbi5vcHRpb25zLmZvcm1hdHMscz1vLkRvbSxsPW8uQ29tbWFuZCxjPW8uVG9vbFRlbXBsYXRlLGQ9by5Gb3JtYXRUb29sLHU9by5FZGl0b3JVdGlscyxoPXUucmVnaXN0ZXJUb29sLHA9dS5yZWdpc3RlckZvcm1hdCxmPW8uUmFuZ2VVdGlscyxnPWkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMuZm9ybWF0PWV9LGNvbnRhaW5zOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyO2ZvcihuPTAsaT10Lmxlbmd0aDtpPm47bisrKWlmKHI9dFtuXSwhcnx8IXMuaXNBbmNlc3Rvck9yU2VsZihlLHIpKXJldHVybiExO3JldHVybiEwfSxmaW5kU3VpdGFibGU6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG8sYT10aGlzLmZvcm1hdCxsPVtdO2ZvcihuPTAsaT10Lmxlbmd0aDtpPm47bisrKXtmb3Iobz1hLmxlbmd0aC0xO28+PTAmJiEocj1zLm9mVHlwZSh0W25dLGFbb10udGFncyk/dFtuXTpzLnBhcmVudE9mVHlwZSh0W25dLGFbb10udGFncykpO28tLSk7aWYoIXJ8fFwidHJ1ZVwiPT09ci5jb250ZW50RWRpdGFibGUpcmV0dXJuW107ZS5pbkFycmF5KHIsbCk8MCYmbC5wdXNoKHIpfWZvcihuPTAsaT1sLmxlbmd0aDtpPm47bisrKWlmKHRoaXMuY29udGFpbnMobFtuXSxsKSlyZXR1cm5bbFtuXV07cmV0dXJuIGx9LGZpbmRGb3JtYXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhPXRoaXMuZm9ybWF0LGw9cy5lZGl0YWJsZVBhcmVudChlKTtmb3IodD0wLG49YS5sZW5ndGg7bj50O3QrKylmb3IoaT1lLHI9YVt0XS50YWdzLG89YVt0XS5hdHRyO2kmJnMuaXNBbmNlc3Rvck9mKGwsaSk7KXtpZihzLm9mVHlwZShpLHIpJiZzLmF0dHJFcXVhbHMoaSxvKSlyZXR1cm4gaTtpPWkucGFyZW50Tm9kZX1yZXR1cm4gbnVsbH0sZ2V0Rm9ybWF0OmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLHI9ZnVuY3Rpb24oZSl7cmV0dXJuIGkuZmluZEZvcm1hdChzLmlzRGF0YU5vZGUoZSk/ZS5wYXJlbnROb2RlOmUpfSxvPXIoZVswXSk7aWYoIW8pcmV0dXJuXCJcIjtmb3IodD0xLG49ZS5sZW5ndGg7bj50O3QrKylpZihvIT1yKGVbdF0pKXJldHVyblwiXCI7cmV0dXJuIG8ubm9kZU5hbWUudG9Mb3dlckNhc2UoKX0saXNGb3JtYXR0ZWQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj1lLmxlbmd0aDtuPnQ7dCsrKWlmKCF0aGlzLmZpbmRGb3JtYXQoZVt0XSkpcmV0dXJuITE7cmV0dXJuITB9fSksbT1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3RoaXMuZm9ybWF0PWUsdGhpcy52YWx1ZXM9dCx0aGlzLmZpbmRlcj1uZXcgZyhlKX0sd3JhcDpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGEsbCxjPTE9PW4ubGVuZ3RoP3MuYmxvY2tQYXJlbnRPckJvZHkoblswXSk6cy5jb21tb25BbmNlc3Rvci5hcHBseShudWxsLG4pO2ZvcihzLmlzSW5saW5lKGMpJiYoYz1zLmJsb2NrUGFyZW50T3JCb2R5KGMpKSxpPXMuc2lnbmlmaWNhbnRDaGlsZE5vZGVzKGMpLHI9cy5maW5kTm9kZUluZGV4KGlbMF0pLG89cy5jcmVhdGUoYy5vd25lckRvY3VtZW50LGUsdCksYT0wO2kubGVuZ3RoPmE7YSsrKWw9aVthXSxzLmlzQmxvY2sobCk/KHMuYXR0cihsLHQpLG8uY2hpbGROb2Rlcy5sZW5ndGgmJihzLmluc2VydEJlZm9yZShvLGwpLG89by5jbG9uZU5vZGUoITEpKSxyPXMuZmluZE5vZGVJbmRleChsKSsxKTpvLmFwcGVuZENoaWxkKGwpO28uZmlyc3RDaGlsZCYmcy5pbnNlcnRBdChjLG8scil9LGFwcGx5OmZ1bmN0aW9uKHQpe2Z1bmN0aW9uIG4oZSl7cmV0dXJuIHIoe30sZSYmZS5hdHRyLGQpfXZhciBpLG8sYSxsLGMsZD10aGlzLnZhbHVlcyxoPXMuZmlsdGVyKFwiaW1nXCIsdCkscD11LmZvcm1hdEJ5TmFtZShcImltZ1wiLHRoaXMuZm9ybWF0KSxmPW4ocCk7aWYoZS5lYWNoKGgsZnVuY3Rpb24oKXtzLmF0dHIodGhpcyxmKX0pLGgubGVuZ3RoIT10Lmxlbmd0aClpZihvPXMuZmlsdGVyKFwiaW1nXCIsdCwhMCksYT10aGlzLmZpbmRlci5maW5kU3VpdGFibGUobyksYS5sZW5ndGgpZm9yKGw9MCxjPWEubGVuZ3RoO2M+bDtsKyspaT11LmZvcm1hdEJ5TmFtZShzLm5hbWUoYVtsXSksdGhpcy5mb3JtYXQpLHMuYXR0cihhW2xdLG4oaSkpO2Vsc2UgaT10aGlzLmZvcm1hdFswXSx0aGlzLndyYXAoaS50YWdzWzBdLG4oaSksbyl9LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvO2Zvcih0PTAsbj1lLmxlbmd0aDtuPnQ7dCsrKWk9dGhpcy5maW5kZXIuZmluZEZvcm1hdChlW3RdKSxpJiYobz1zLm5hbWUoaSksXCJkaXZcIiE9b3x8aS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKT8ocj11LmZvcm1hdEJ5TmFtZShvLHRoaXMuZm9ybWF0KSxyLmF0dHIuc3R5bGUmJnMudW5zdHlsZShpLHIuYXR0ci5zdHlsZSksci5hdHRyLmNsYXNzTmFtZSYmcy5yZW1vdmVDbGFzcyhpLHIuYXR0ci5jbGFzc05hbWUpKTpzLnVud3JhcChpKSl9LHRvZ2dsZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49Zi5ub2RlcyhlKTt0LmZpbmRlci5pc0Zvcm1hdHRlZChuKT90LnJlbW92ZShuKTp0LmFwcGx5KG4pfX0pLHY9aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO24uZm9ybWF0PWUsbi52YWx1ZXM9dCxuLmZpbmRlcj1uZXcgZyhlKX0sYXBwbHk6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsYSxsLGMsZD10aGlzLmZvcm1hdCx1PXMuYmxvY2tQYXJlbnRzKGUpLGg9ZFswXS50YWdzWzBdO2lmKHUubGVuZ3RoKWZvcih0PTAsbj11Lmxlbmd0aDtuPnQ7dCsrKWM9cy5uYW1lKHVbdF0pLFwibGlcIj09Yz8oaT11W3RdLnBhcmVudE5vZGUscj1uZXcgby5MaXN0Rm9ybWF0dGVyKGkubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxoKSxhPXRoaXMuZWRpdG9yLmNyZWF0ZVJhbmdlKCksYS5zZWxlY3ROb2RlKHVbdF0pLHIudG9nZ2xlKGEpKTpoJiYoXCJ0ZFwiPT1jfHx1W3RdLmF0dHJpYnV0ZXMuY29udGVudEVkaXRhYmxlKT9uZXcgbShkLHRoaXMudmFsdWVzKS5hcHBseSh1W3RdLmNoaWxkTm9kZXMpOihsPXMuY2hhbmdlVGFnKHVbdF0saCkscy5hdHRyKGwsZFswXS5hdHRyKSk7ZWxzZSBuZXcgbShkLHRoaXMudmFsdWVzKS5hcHBseShlKX0sdG9nZ2xlOmZ1bmN0aW9uKGUpe3ZhciB0PWYudGV4dE5vZGVzKGUpO3QubGVuZ3RofHwoZS5zZWxlY3ROb2RlQ29udGVudHMoZS5jb21tb25BbmNlc3RvckNvbnRhaW5lciksdD1mLnRleHROb2RlcyhlKSx0Lmxlbmd0aHx8KHQ9cy5zaWduaWZpY2FudENoaWxkTm9kZXMoZS5jb21tb25BbmNlc3RvckNvbnRhaW5lcikpKSx0aGlzLmFwcGx5KHQpfX0pLF89bC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7ZS5mb3JtYXR0ZXI9ZS5mb3JtYXR0ZXIoKSxsLmZuLmluaXQuY2FsbCh0aGlzLGUpfX0pLHk9ZC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7ZC5mbi5pbml0LmNhbGwodGhpcyxyKGUse2ZpbmRlcjpuZXcgZyhlLmZvcm1hdCksZm9ybWF0dGVyOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBtKGUuZm9ybWF0KX19KSl9fSk7cihvLHtCbG9ja0Zvcm1hdEZpbmRlcjpnLEJsb2NrRm9ybWF0dGVyOm0sR3JlZWR5QmxvY2tGb3JtYXR0ZXI6dixGb3JtYXRDb21tYW5kOl8sQmxvY2tGb3JtYXRUb29sOnl9KSx0PVtcInVsXCIsXCJvbFwiLFwibGlcIl0scChcImp1c3RpZnlMZWZ0XCIsW3t0YWdzOnMubm9uTGlzdEJsb2NrRWxlbWVudHMsYXR0cjp7c3R5bGU6e3RleHRBbGlnbjpcImxlZnRcIn19fSx7dGFnczpbXCJpbWdcIl0sYXR0cjp7c3R5bGU6e1wiZmxvYXRcIjpcImxlZnRcIixkaXNwbGF5OlwiXCIsbWFyZ2luTGVmdDpcIlwiLG1hcmdpblJpZ2h0OlwiXCJ9fX0se3RhZ3M6dCxhdHRyOntzdHlsZTp7dGV4dEFsaWduOlwibGVmdFwiLGxpc3RTdHlsZVBvc2l0aW9uOlwiXCJ9fX1dKSxoKFwianVzdGlmeUxlZnRcIixuZXcgeSh7Zm9ybWF0OmEuanVzdGlmeUxlZnQsdGVtcGxhdGU6bmV3IGMoe3RlbXBsYXRlOnUuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJKdXN0aWZ5IExlZnRcIn0pfSkpLHAoXCJqdXN0aWZ5Q2VudGVyXCIsW3t0YWdzOnMubm9uTGlzdEJsb2NrRWxlbWVudHMsYXR0cjp7c3R5bGU6e3RleHRBbGlnbjpcImNlbnRlclwifX19LHt0YWdzOltcImltZ1wiXSxhdHRyOntzdHlsZTp7ZGlzcGxheTpcImJsb2NrXCIsbWFyZ2luTGVmdDpcImF1dG9cIixtYXJnaW5SaWdodDpcImF1dG9cIixcImZsb2F0XCI6XCJcIn19fSx7dGFnczp0LGF0dHI6e3N0eWxlOnt0ZXh0QWxpZ246XCJjZW50ZXJcIixsaXN0U3R5bGVQb3NpdGlvbjpcImluc2lkZVwifX19XSksaChcImp1c3RpZnlDZW50ZXJcIixuZXcgeSh7Zm9ybWF0OmEuanVzdGlmeUNlbnRlcix0ZW1wbGF0ZTpuZXcgYyh7dGVtcGxhdGU6dS5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIkp1c3RpZnkgQ2VudGVyXCJ9KX0pKSxwKFwianVzdGlmeVJpZ2h0XCIsW3t0YWdzOnMubm9uTGlzdEJsb2NrRWxlbWVudHMsYXR0cjp7c3R5bGU6e3RleHRBbGlnbjpcInJpZ2h0XCJ9fX0se3RhZ3M6W1wiaW1nXCJdLGF0dHI6e3N0eWxlOntcImZsb2F0XCI6XCJyaWdodFwiLGRpc3BsYXk6XCJcIixtYXJnaW5MZWZ0OlwiXCIsbWFyZ2luUmlnaHQ6XCJcIn19fSx7dGFnczp0LGF0dHI6e3N0eWxlOnt0ZXh0QWxpZ246XCJyaWdodFwiLGxpc3RTdHlsZVBvc2l0aW9uOlwiaW5zaWRlXCJ9fX1dKSxoKFwianVzdGlmeVJpZ2h0XCIsbmV3IHkoe2Zvcm1hdDphLmp1c3RpZnlSaWdodCx0ZW1wbGF0ZTpuZXcgYyh7dGVtcGxhdGU6dS5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIkp1c3RpZnkgUmlnaHRcIn0pfSkpLHAoXCJqdXN0aWZ5RnVsbFwiLFt7dGFnczpzLm5vbkxpc3RCbG9ja0VsZW1lbnRzLGF0dHI6e3N0eWxlOnt0ZXh0QWxpZ246XCJqdXN0aWZ5XCJ9fX0se3RhZ3M6W1wiaW1nXCJdLGF0dHI6e3N0eWxlOntkaXNwbGF5OlwiYmxvY2tcIixtYXJnaW5MZWZ0OlwiYXV0b1wiLG1hcmdpblJpZ2h0OlwiYXV0b1wiLFwiZmxvYXRcIjpcIlwifX19LHt0YWdzOnQsYXR0cjp7c3R5bGU6e3RleHRBbGlnbjpcImp1c3RpZnlcIixsaXN0U3R5bGVQb3NpdGlvbjpcIlwifX19XSksaChcImp1c3RpZnlGdWxsXCIsbmV3IHkoe2Zvcm1hdDphLmp1c3RpZnlGdWxsLHRlbXBsYXRlOm5ldyBjKHt0ZW1wbGF0ZTp1LmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiSnVzdGlmeSBGdWxsXCJ9KX0pKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQ9d2luZG93LmtlbmRvLG49ZS5leHRlbmQsaT10LnVpLmVkaXRvcixyPWkuRG9tLG89aS5Db21tYW5kLGE9aS5Ub29sLHM9aS5CbG9ja0Zvcm1hdHRlcixsPXIubm9ybWFsaXplLGM9aS5SYW5nZVV0aWxzLGQ9aS5FZGl0b3JVdGlscy5yZWdpc3RlclRvb2wsdT1vLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnM9ZSxvLmZuLmluaXQuY2FsbCh0aGlzLGUpfSxfaW5zZXJ0TWFya2VyOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT1yLmNyZWF0ZShlLFwiYVwiKTtyZXR1cm4gaS5jbGFzc05hbWU9XCJrLW1hcmtlclwiLHQuaW5zZXJ0Tm9kZShpKSxpLnBhcmVudE5vZGV8fChuPXQuY29tbW9uQW5jZXN0b3JDb250YWluZXIsbi5pbm5lckhUTUw9XCJcIixuLmFwcGVuZENoaWxkKGkpKSxsKGkucGFyZW50Tm9kZSksaX0sX21vdmVGb2N1czpmdW5jdGlvbihlLHQpe2lmKHIuaXModCxcImltZ1wiKSllLnNldFN0YXJ0QmVmb3JlKHQpO2Vsc2V7ZS5zZWxlY3ROb2RlQ29udGVudHModCk7dmFyIG49Yy50ZXh0Tm9kZXMoZSlbMF07aWYobilyLmlzKG4sXCJpbWdcIik/ZS5zZXRTdGFydEJlZm9yZShuKTplLnNlbGVjdE5vZGVDb250ZW50cyhuKTtlbHNle2Zvcig7dC5jaGlsZE5vZGVzLmxlbmd0aCYmIXIuaXModC5maXJzdENoaWxkLFwiYnJcIik7KXQ9dC5maXJzdENoaWxkO2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKHQpfX19LHNob3VsZFRyaW06ZnVuY3Rpb24oZSl7dmFyIHQ9XCJwLGgxLGgyLGgzLGg0LGg1LGg2XCIuc3BsaXQoXCIsXCIpLG49ci5wYXJlbnRPZlR5cGUoZS5zdGFydENvbnRhaW5lcix0KSxpPXIucGFyZW50T2ZUeXBlKGUuZW5kQ29udGFpbmVyLHQpO3JldHVybiBuJiYhaXx8IW4mJml9LF9ibGFua0FmdGVyOmZ1bmN0aW9uKGUpe2Zvcig7ZSYmKHIuaXNNYXJrZXIoZSl8fFwiXCI9PT1yLnN0cmlwQm9tKGUubm9kZVZhbHVlKSk7KWU9ZS5uZXh0U2libGluZztyZXR1cm4hZX0sZXhlYzpmdW5jdGlvbigpe3ZhciBlLHQsbixvLGEsZCx1LGgscD10aGlzLmdldFJhbmdlKCksZj1jLmRvY3VtZW50RnJvbVJhbmdlKHApLGc9aS5lbXB0eUVsZW1lbnRDb250ZW50LG09dGhpcy5zaG91bGRUcmltKHApO3AuZGVsZXRlQ29udGVudHMoKSxhPXRoaXMuX2luc2VydE1hcmtlcihmLHApLGQ9ci5jbG9zZXN0RWRpdGFibGVPZlR5cGUoYSxbXCJsaVwiXSksdT1yLmNsb3Nlc3RFZGl0YWJsZU9mVHlwZShhLFwiaDEsaDIsaDMsaDQsaDUsaDZcIi5zcGxpdChcIixcIikpLGQ/ci5lbXB0eU5vZGUoZCkmJihvPXIuY3JlYXRlKGYsXCJwXCIpLGQubmV4dFNpYmxpbmcmJihoPXAuY2xvbmVSYW5nZSgpLGguc2VsZWN0Tm9kZShkKSxjLnNwbGl0KGgsZC5wYXJlbnROb2RlKSksci5pbnNlcnRBZnRlcihvLGQucGFyZW50Tm9kZSksci5yZW1vdmUoMT09ZC5wYXJlbnROb2RlLmNoaWxkTm9kZXMubGVuZ3RoP2QucGFyZW50Tm9kZTpkKSxvLmlubmVySFRNTD1nLG49byk6dSYmdGhpcy5fYmxhbmtBZnRlcihhKSYmKG89ci5jcmVhdGUoZixcInBcIiksci5pbnNlcnRBZnRlcihvLHUpLG8uaW5uZXJIVE1MPWcsci5yZW1vdmUoYSksbj1vKSxufHwoZHx8dXx8bmV3IHMoW3t0YWdzOltcInBcIl19XSkuYXBwbHkoW2FdKSxwLnNlbGVjdE5vZGUoYSksZT1yLnBhcmVudE9mVHlwZShhLFtkP1wibGlcIjp1P3IubmFtZSh1KTpcInBcIl0pLGMuc3BsaXQocCxlLG0pLHQ9ZS5wcmV2aW91c1NpYmxpbmcsci5pcyh0LFwibGlcIikmJnQuZmlyc3RDaGlsZCYmIXIuaXModC5maXJzdENoaWxkLFwiYnJcIikmJih0PXQuZmlyc3RDaGlsZCksbj1lLm5leHRTaWJsaW5nLHIuaXMobixcImxpXCIpJiZuLmZpcnN0Q2hpbGQmJiFyLmlzKG4uZmlyc3RDaGlsZCxcImJyXCIpJiYobj1uLmZpcnN0Q2hpbGQpLHIucmVtb3ZlKGUpLHRoaXMuY2xlYW4odCksdGhpcy5jbGVhbihuLHtsaW5rczohMH0pLGwodCkpLGwobiksdGhpcy5fbW92ZUZvY3VzKHAsbikscC5jb2xsYXBzZSghMCksci5zY3JvbGxUbyhuKSxjLnNlbGVjdFJhbmdlKHApfSxjbGVhbjpmdW5jdGlvbihlLHQpe3ZhciBuPWU7aWYoZS5maXJzdENoaWxkJiZyLmlzKGUuZmlyc3RDaGlsZCxcImJyXCIpJiZyLnJlbW92ZShlLmZpcnN0Q2hpbGQpLHIuaXNEYXRhTm9kZShlKSYmIWUubm9kZVZhbHVlJiYoZT1lLnBhcmVudE5vZGUpLGUpe2Zvcig7ZS5maXJzdENoaWxkJiYxPT1lLmZpcnN0Q2hpbGQubm9kZVR5cGU7KWU9ZS5maXJzdENoaWxkO2lmKCFyLmlzRW1wdHkoZSkmJi9eXFxzKiQvLnRlc3QoZS5pbm5lckhUTUwpJiYoZS5pbm5lckhUTUw9aS5lbXB0eUVsZW1lbnRDb250ZW50KSx0JiZ0LmxpbmtzKWZvcig7ZSE9bjspe2lmKHIuaXMoZSxcImFcIikmJnIuZW1wdHlOb2RlKGUpKXtyLnVud3JhcChlKTticmVha31lPWUucGFyZW50Tm9kZX19fX0pLGg9by5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zPWUsby5mbi5pbml0LmNhbGwodGhpcyxlKX0sZXhlYzpmdW5jdGlvbigpe3ZhciBlLG49dGhpcy5nZXRSYW5nZSgpLGk9ci5jcmVhdGUoYy5kb2N1bWVudEZyb21SYW5nZShuKSxcImJyXCIpLG89dC5zdXBwb3J0LmJyb3dzZXIsYT1vLm1zaWUmJjExPm8udmVyc2lvbjtuLmRlbGV0ZUNvbnRlbnRzKCksbi5pbnNlcnROb2RlKGkpLGwoaS5wYXJlbnROb2RlKSxhfHxpLm5leHRTaWJsaW5nJiYhci5pc1doaXRlc3BhY2UoaS5uZXh0U2libGluZyl8fChlPWkuY2xvbmVOb2RlKCEwKSxlLmNsYXNzTmFtZT1cImstYnJcIixyLmluc2VydEFmdGVyKGUsaSkpLG4uc2V0U3RhcnRBZnRlcihpKSxuLmNvbGxhcHNlKCEwKSxyLnNjcm9sbFRvKGkubmV4dFNpYmxpbmd8fGkpLGMuc2VsZWN0UmFuZ2Uobil9fSk7bihpLHtQYXJhZ3JhcGhDb21tYW5kOnUsTmV3TGluZUNvbW1hbmQ6aH0pLGQoXCJpbnNlcnRMaW5lQnJlYWtcIixuZXcgYSh7a2V5OjEzLHNoaWZ0OiEwLGNvbW1hbmQ6aH0pKSxkKFwiaW5zZXJ0UGFyYWdyYXBoXCIsbmV3IGEoe2tleToxMyxjb21tYW5kOnV9KSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe3ZhciB0PXdpbmRvdy5rZW5kbyxuPXQuQ2xhc3MsaT1lLmV4dGVuZCxyPXQudWkuZWRpdG9yLG89ci5Eb20sYT1yLlJhbmdlVXRpbHMscz1yLkVkaXRvclV0aWxzLGw9ci5Db21tYW5kLGM9ci5Ub29sVGVtcGxhdGUsZD1yLkZvcm1hdFRvb2wsdT1yLkJsb2NrRm9ybWF0RmluZGVyLGg9YS50ZXh0Tm9kZXMscD1yLkVkaXRvclV0aWxzLnJlZ2lzdGVyVG9vbCxmPXUuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMudGFnPWU7dmFyIHQ9dGhpcy50YWdzPVtcInVsXCI9PWU/XCJvbFwiOlwidWxcIixlXTt1LmZuLmluaXQuY2FsbCh0aGlzLFt7dGFnczp0fV0pfSxpc0Zvcm1hdHRlZDpmdW5jdGlvbihlKXt2YXIgdCxuLGk9W107Zm9yKG49MDtlLmxlbmd0aD5uO24rKykodD10aGlzLmZpbmRGb3JtYXQoZVtuXSkpJiZvLm5hbWUodCk9PXRoaXMudGFnJiZpLnB1c2godCk7aWYoMT5pLmxlbmd0aClyZXR1cm4hMTtpZihpLmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKG49MDtpLmxlbmd0aD5uJiZpW25dLnBhcmVudE5vZGU9PXQucGFyZW50Tm9kZTtuKyspaWYoaVtuXSE9dClyZXR1cm4hMTtyZXR1cm4hMH0sZmluZFN1aXRhYmxlOmZ1bmN0aW9uKGUpe3ZhciB0PW8ucGFyZW50T2ZUeXBlKGVbMF0sdGhpcy50YWdzKTtyZXR1cm4gdCYmby5uYW1lKHQpPT10aGlzLnRhZz90Om51bGx9fSksZz1uLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7bi5maW5kZXI9bmV3IGYoZSksbi50YWc9ZSxuLnVud3JhcFRhZz10fSxpc0xpc3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9by5uYW1lKGUpO3JldHVyblwidWxcIj09dHx8XCJvbFwiPT10fHxcImRsXCI9PXR9LHdyYXA6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9by5jcmVhdGUoZS5vd25lckRvY3VtZW50LFwibGlcIik7Zm9yKG49MDt0Lmxlbmd0aD5uO24rKylpZihpPXRbbl0sby5pcyhpLFwibGlcIikpZS5hcHBlbmRDaGlsZChpKTtlbHNlIGlmKHRoaXMuaXNMaXN0KGkpKWZvcig7aS5maXJzdENoaWxkOyllLmFwcGVuZENoaWxkKGkuZmlyc3RDaGlsZCk7ZWxzZSBpZihvLmlzKGksXCJ0ZFwiKSl7Zm9yKDtpLmZpcnN0Q2hpbGQ7KXIuYXBwZW5kQ2hpbGQoaS5maXJzdENoaWxkKTtlLmFwcGVuZENoaWxkKHIpLGkuYXBwZW5kQ2hpbGQoZSksZT1lLmNsb25lTm9kZSghMSkscj1yLmNsb25lTm9kZSghMSl9ZWxzZSByLmFwcGVuZENoaWxkKGkpLG8uaXNCbG9jayhpKSYmKGUuYXBwZW5kQ2hpbGQociksby51bndyYXAoaSkscj1yLmNsb25lTm9kZSghMSkpO3IuZmlyc3RDaGlsZCYmZS5hcHBlbmRDaGlsZChyKX0sY29udGFpbnNBbnk6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MDt0Lmxlbmd0aD5uO24rKylpZihvLmlzQW5jZXN0b3JPclNlbGYoZSx0W25dKSlyZXR1cm4hMDtyZXR1cm4hMX0sc3VpdGFibGU6ZnVuY3Rpb24oZSx0KXtpZihcImstbWFya2VyXCI9PWUuY2xhc3NOYW1lKXt2YXIgbj1lLm5leHRTaWJsaW5nO2lmKG4mJm8uaXNCbG9jayhuKSlyZXR1cm4hMTtpZihuPWUucHJldmlvdXNTaWJsaW5nLG4mJm8uaXNCbG9jayhuKSlyZXR1cm4hMX1yZXR1cm4gdGhpcy5jb250YWluc0FueShlLHQpfHxvLmlzSW5saW5lKGUpfHwzPT1lLm5vZGVUeXBlfSxzcGxpdDpmdW5jdGlvbih0KXt2YXIgbixpLHIscyxsLGMsZD1oKHQpO2lmKGQubGVuZ3RoKWZvcihuPW8ucGFyZW50T2ZUeXBlKGRbMF0sW1wibGlcIl0pLGk9by5wYXJlbnRPZlR5cGUoZFtkLmxlbmd0aC0xXSxbXCJsaVwiXSksdC5zZXRTdGFydEJlZm9yZShuKSx0LnNldEVuZEFmdGVyKGkpLHI9MCxzPWQubGVuZ3RoO3M+cjtyKyspbD10aGlzLmZpbmRlci5maW5kRm9ybWF0KGRbcl0pLGwmJihjPWUobCkucGFyZW50cyhcInVsLG9sXCIpLGNbMF0/YS5zcGxpdCh0LGMubGFzdCgpWzBdLCEwKTphLnNwbGl0KHQsbCwhMCkpfSxtZXJnZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixpPXQucHJldmlvdXNTaWJsaW5nO2kmJihcImstbWFya2VyXCI9PWkuY2xhc3NOYW1lfHwzPT1pLm5vZGVUeXBlJiZvLmlzV2hpdGVzcGFjZShpKSk7KWk9aS5wcmV2aW91c1NpYmxpbmc7aWYoaSYmby5uYW1lKGkpPT1lKXtmb3IoO3QuZmlyc3RDaGlsZDspaS5hcHBlbmRDaGlsZCh0LmZpcnN0Q2hpbGQpO28ucmVtb3ZlKHQpLHQ9aX1mb3Iobj10Lm5leHRTaWJsaW5nO24mJihcImstbWFya2VyXCI9PW4uY2xhc3NOYW1lfHwzPT1uLm5vZGVUeXBlJiZvLmlzV2hpdGVzcGFjZShuKSk7KW49bi5uZXh0U2libGluZztpZihuJiZvLm5hbWUobik9PWUpe2Zvcig7dC5sYXN0Q2hpbGQ7KW4uaW5zZXJ0QmVmb3JlKHQubGFzdENoaWxkLG4uZmlyc3RDaGlsZCk7by5yZW1vdmUodCl9fSxicmVha2FibGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUhPWUub3duZXJEb2N1bWVudC5ib2R5JiYhL3RhYmxlfHRib2R5fHRyfHRkLy50ZXN0KG8ubmFtZShlKSkmJiFlLmF0dHJpYnV0ZXMuY29udGVudEVkaXRhYmxlfSxhcHBseU9uU2VjdGlvbjpmdW5jdGlvbih0LG4pe2Z1bmN0aW9uIGkoKXt1LnB1c2godGhpcyl9dmFyIHIsYSxzLGwsYz10aGlzLnRhZyxkPW8uY2xvc2VzdFNwbGl0dGFibGVQYXJlbnQobiksdT1bXSxoPXRoaXMuZmluZGVyLmZpbmRTdWl0YWJsZShuKTtmb3IoaHx8KGg9bmV3IGYoXCJ1bFwiPT1jP1wib2xcIjpcInVsXCIpLmZpbmRTdWl0YWJsZShuKSksL3RhYmxlfHRib2R5Ly50ZXN0KG8ubmFtZShkKSk/cj1lLm1hcChuLGZ1bmN0aW9uKGUpe3JldHVybiBvLnBhcmVudE9mVHlwZShlLFtcInRkXCJdKX0pOihyPW8uc2lnbmlmaWNhbnRDaGlsZE5vZGVzKGQpLGUuZ3JlcChyLG8uaXNCbG9jaykubGVuZ3RoJiYocj1lLmdyZXAocixlLnByb3h5KGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbnRhaW5zQW55KGUsbil9LHRoaXMpKSksci5sZW5ndGh8fChyPW4pKSxhPTA7ci5sZW5ndGg+YTthKyspcz1yW2FdLGw9KCFofHwhby5pc0FuY2VzdG9yT3JTZWxmKGgscykpJiZ0aGlzLnN1aXRhYmxlKHMsbiksbCYmKGgmJnRoaXMuaXNMaXN0KHMpPyhlLmVhY2gocy5jaGlsZE5vZGVzLGkpLG8ucmVtb3ZlKHMpKTp1LnB1c2gocykpO3UubGVuZ3RoPT1yLmxlbmd0aCYmdGhpcy5icmVha2FibGUoZCkmJih1PVtkXSksaHx8KGg9by5jcmVhdGUoZC5vd25lckRvY3VtZW50LGMpLG8uaW5zZXJ0QmVmb3JlKGgsdVswXSkpLHRoaXMud3JhcChoLHUpLG8uaXMoaCxjKXx8by5jaGFuZ2VUYWcoaCxjKSx0aGlzLm1lcmdlKGMsaCl9LGFwcGx5OmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPTAsYT1bXTtkbyBpPW8uY2xvc2VzdEVkaXRhYmxlKGVbcl0sW1widGRcIixcImJvZHlcIl0pLHQmJmk9PXQ/bi5wdXNoKGVbcl0pOih0JiZhLnB1c2goe3NlY3Rpb246dCxub2RlczpufSksbj1bZVtyXV0sdD1pKSxyKys7d2hpbGUoZS5sZW5ndGg+cik7Zm9yKGEucHVzaCh7c2VjdGlvbjp0LG5vZGVzOm59KSxyPTA7YS5sZW5ndGg+cjtyKyspdGhpcy5hcHBseU9uU2VjdGlvbihhW3JdLnNlY3Rpb24sYVtyXS5ub2Rlcyl9LHVud3JhcDpmdW5jdGlvbih0KXt2YXIgbixpLHIsYSxzPXQub3duZXJEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbD10aGlzLnVud3JhcFRhZztmb3IoaT10LmZpcnN0Q2hpbGQ7aTtpPWkubmV4dFNpYmxpbmcpe2ZvcihyPW8uY3JlYXRlKHQub3duZXJEb2N1bWVudCxsfHxcInBcIik7aS5maXJzdENoaWxkOylhPWkuZmlyc3RDaGlsZCxvLmlzQmxvY2soYSk/KHIuZmlyc3RDaGlsZCYmKHMuYXBwZW5kQ2hpbGQocikscj1vLmNyZWF0ZSh0Lm93bmVyRG9jdW1lbnQsbHx8XCJwXCIpKSxzLmFwcGVuZENoaWxkKGEpKTpyLmFwcGVuZENoaWxkKGEpO3IuZmlyc3RDaGlsZCYmcy5hcHBlbmRDaGlsZChyKX1uPWUodCkucGFyZW50cyhcInVsLG9sXCIpLG5bMF0/KG8uaW5zZXJ0QWZ0ZXIocyxuLmxhc3QoKVswXSksbi5sYXN0KCkucmVtb3ZlKCkpOm8uaW5zZXJ0QWZ0ZXIocyx0KSxvLnJlbW92ZSh0KX0scmVtb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saTtmb3Iobj0wLGk9ZS5sZW5ndGg7aT5uO24rKyl0PXRoaXMuZmluZGVyLmZpbmRGb3JtYXQoZVtuXSksdCYmdGhpcy51bndyYXAodCl9LHRvZ2dsZTpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMsaT1oKGUpLHI9ZS5jb21tb25BbmNlc3RvckNvbnRhaW5lcjtpLmxlbmd0aHx8KGUuc2VsZWN0Tm9kZUNvbnRlbnRzKHIpLGk9aChlKSxpLmxlbmd0aHx8KHQ9ci5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpLGUuc3RhcnRDb250YWluZXIuYXBwZW5kQ2hpbGQodCksaT1bdF0sZS5zZWxlY3ROb2RlKHQucGFyZW50Tm9kZSkpKSxuLmZpbmRlci5pc0Zvcm1hdHRlZChpKT8obi5zcGxpdChlKSxuLnJlbW92ZShpKSk6bi5hcHBseShpKX19KSxtPWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe2UuZm9ybWF0dGVyPW5ldyBnKGUudGFnKSxsLmZuLmluaXQuY2FsbCh0aGlzLGUpfX0pLHY9ZC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zPWUsZC5mbi5pbml0LmNhbGwodGhpcyxpKGUse2ZpbmRlcjpuZXcgZihlLnRhZyl9KSl9LGNvbW1hbmQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBtKGkoZSx7dGFnOnRoaXMub3B0aW9ucy50YWd9KSl9fSk7aShyLHtMaXN0Rm9ybWF0RmluZGVyOmYsTGlzdEZvcm1hdHRlcjpnLExpc3RDb21tYW5kOm0sTGlzdFRvb2w6dn0pLHAoXCJpbnNlcnRVbm9yZGVyZWRMaXN0XCIsbmV3IHYoe3RhZzpcInVsXCIsdGVtcGxhdGU6bmV3IGMoe3RlbXBsYXRlOnMuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJJbnNlcnQgdW5vcmRlcmVkIGxpc3RcIn0pfSkpLHAoXCJpbnNlcnRPcmRlcmVkTGlzdFwiLG5ldyB2KHt0YWc6XCJvbFwiLHRlbXBsYXRlOm5ldyBjKHt0ZW1wbGF0ZTpzLmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiSW5zZXJ0IG9yZGVyZWQgbGlzdFwifSl9KSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe3ZhciB0PXdpbmRvdy5rZW5kbyxuPXQuQ2xhc3MsaT1lLmV4dGVuZCxyPWUucHJveHksbz10LnVpLmVkaXRvcixhPW8uRG9tLHM9by5SYW5nZVV0aWxzLGw9by5FZGl0b3JVdGlscyxjPW8uQ29tbWFuZCxkPW8uVG9vbCx1PW8uVG9vbFRlbXBsYXRlLGg9by5JbmxpbmVGb3JtYXR0ZXIscD1vLklubGluZUZvcm1hdEZpbmRlcixmPXMudGV4dE5vZGVzLGc9by5FZGl0b3JVdGlscy5yZWdpc3RlclRvb2wsbT1uLmV4dGVuZCh7ZmluZFN1aXRhYmxlOmZ1bmN0aW9uKGUpe3JldHVybiBhLnBhcmVudE9mVHlwZShlLFtcImFcIl0pfX0pLHY9bi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt0aGlzLmZpbmRlcj1uZXcgbX0sYXBwbHk6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxsLGM9ZihlKTt0LmlubmVySFRNTD8obj1zLmdldE1hcmtlcnMoZSksaT1zLmRvY3VtZW50RnJvbVJhbmdlKGUpLGUuZGVsZXRlQ29udGVudHMoKSxvPWEuY3JlYXRlKGksXCJhXCIsdCksZS5pbnNlcnROb2RlKG8pLGw9by5wYXJlbnROb2RlLFwiYVwiPT1hLm5hbWUobCkmJmEuaW5zZXJ0QWZ0ZXIobyxsKSxhLmVtcHR5Tm9kZShsKSYmYS5yZW1vdmUobCksbi5sZW5ndGg+MSYmKGEuaW5zZXJ0QWZ0ZXIobltuLmxlbmd0aC0xXSxvKSxhLmluc2VydEFmdGVyKG5bMV0sbyksYVtjLmxlbmd0aD4wP1wiaW5zZXJ0QmVmb3JlXCI6XCJpbnNlcnRBZnRlclwiXShuWzBdLG8pKSk6KHI9bmV3IGgoW3t0YWdzOltcImFcIl19XSx0KSxyLmZpbmRlcj10aGlzLmZpbmRlcixyLmFwcGx5KGMpKX19KSxfPWMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe2UuZm9ybWF0dGVyPXt0b2dnbGU6ZnVuY3Rpb24oZSl7bmV3IGgoW3t0YWdzOltcImFcIl19XSkucmVtb3ZlKGYoZSkpfX0sdGhpcy5vcHRpb25zPWUsYy5mbi5pbml0LmNhbGwodGhpcyxlKX19KSx5PWMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5vcHRpb25zPWUsYy5mbi5pbml0LmNhbGwodCxlKSx0LmZvcm1hdHRlcj1uZXcgdixlLnVybD90aGlzLmV4ZWM9ZnVuY3Rpb24oKXt0aGlzLmZvcm1hdHRlci5hcHBseShlLnJhbmdlLHtocmVmOmUudXJsLGlubmVySFRNTDplLnRleHR8fGUudXJsLHRhcmdldDplLnRhcmdldH0pfToodC5hdHRyaWJ1dGVzPW51bGwsdC5hc3luYz0hMCl9LF9kaWFsb2dUZW1wbGF0ZTpmdW5jdGlvbigpe3JldHVybiB0LnRlbXBsYXRlKFwiPGRpdiBjbGFzcz1cXFwiay1lZGl0b3ItZGlhbG9nIGstcG9wdXAtZWRpdC1mb3JtIGstZWRpdC1mb3JtLWNvbnRhaW5lclxcXCI+PGRpdiBjbGFzcz0nay1lZGl0LWxhYmVsJz48bGFiZWwgZm9yPSdrLWVkaXRvci1saW5rLXVybCc+IzogbWVzc2FnZXMubGlua1dlYkFkZHJlc3MgIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz0nay1lZGl0LWZpZWxkJz48aW5wdXQgdHlwZT0ndGV4dCcgY2xhc3M9J2staW5wdXQgay10ZXh0Ym94JyBpZD0nay1lZGl0b3ItbGluay11cmwnPjwvZGl2PjxkaXYgY2xhc3M9J2stZWRpdC1sYWJlbCBrLWVkaXRvci1saW5rLXRleHQtcm93Jz48bGFiZWwgZm9yPSdrLWVkaXRvci1saW5rLXRleHQnPiM6IG1lc3NhZ2VzLmxpbmtUZXh0ICM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9J2stZWRpdC1maWVsZCBrLWVkaXRvci1saW5rLXRleHQtcm93Jz48aW5wdXQgdHlwZT0ndGV4dCcgY2xhc3M9J2staW5wdXQgay10ZXh0Ym94JyBpZD0nay1lZGl0b3ItbGluay10ZXh0Jz48L2Rpdj48ZGl2IGNsYXNzPSdrLWVkaXQtbGFiZWwnPjxsYWJlbCBmb3I9J2stZWRpdG9yLWxpbmstdGl0bGUnPiM6IG1lc3NhZ2VzLmxpbmtUb29sVGlwICM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9J2stZWRpdC1maWVsZCc+PGlucHV0IHR5cGU9J3RleHQnIGNsYXNzPSdrLWlucHV0IGstdGV4dGJveCcgaWQ9J2stZWRpdG9yLWxpbmstdGl0bGUnPjwvZGl2PjxkaXYgY2xhc3M9J2stZWRpdC1sYWJlbCc+PC9kaXY+PGRpdiBjbGFzcz0nay1lZGl0LWZpZWxkJz48aW5wdXQgdHlwZT0nY2hlY2tib3gnIGNsYXNzPSdrLWNoZWNrYm94JyBpZD0nay1lZGl0b3ItbGluay10YXJnZXQnPjxsYWJlbCBmb3I9J2stZWRpdG9yLWxpbmstdGFyZ2V0Jz4jOiBtZXNzYWdlcy5saW5rT3BlbkluTmV3V2luZG93ICM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9J2stZWRpdC1idXR0b25zIGstc3RhdGUtZGVmYXVsdCc+PGJ1dHRvbiBjbGFzcz1cXFwiay1kaWFsb2ctaW5zZXJ0IGstYnV0dG9uIGstcHJpbWFyeVxcXCI+IzogbWVzc2FnZXMuZGlhbG9nSW5zZXJ0ICM8L2J1dHRvbj48YnV0dG9uIGNsYXNzPVxcXCJrLWRpYWxvZy1jbG9zZSBrLWJ1dHRvblxcXCI+IzogbWVzc2FnZXMuZGlhbG9nQ2FuY2VsICM8L2J1dHRvbj48L2Rpdj48L2Rpdj5cIikoe21lc3NhZ2VzOnRoaXMuZWRpdG9yLm9wdGlvbnMubWVzc2FnZXN9KX0sZXhlYzpmdW5jdGlvbigpe3ZhciB0LG4saSxvLHM9dGhpcy5nZXRSYW5nZSgpLmNvbGxhcHNlZCxsPXRoaXMuZWRpdG9yLm9wdGlvbnMubWVzc2FnZXM7dGhpcy5faW5pdGlhbFRleHQ9XCJcIix0aGlzLl9yYW5nZT10aGlzLmxvY2tSYW5nZSghMCksdD1mKHRoaXMuX3JhbmdlKSxuPXQubGVuZ3RoP3RoaXMuZm9ybWF0dGVyLmZpbmRlci5maW5kU3VpdGFibGUodFswXSk6bnVsbCxpPXQubGVuZ3RoJiZcImltZ1wiPT1hLm5hbWUodFswXSksbz10aGlzLmNyZWF0ZURpYWxvZyh0aGlzLl9kaWFsb2dUZW1wbGF0ZSgpLHt0aXRsZTpsLmNyZWF0ZUxpbmssY2xvc2U6cih0aGlzLl9jbG9zZSx0aGlzKSx2aXNpYmxlOiExfSksby5maW5kKFwiLmstZGlhbG9nLWluc2VydFwiKS5jbGljayhyKHRoaXMuX2FwcGx5LHRoaXMpKS5lbmQoKS5maW5kKFwiLmstZGlhbG9nLWNsb3NlXCIpLmNsaWNrKHIodGhpcy5fY2xvc2UsdGhpcykpLmVuZCgpLmZpbmQoXCIuay1lZGl0LWZpZWxkIGlucHV0XCIpLmtleWRvd24ocih0aGlzLl9rZXlkb3duLHRoaXMpKS5lbmQoKS5maW5kKFwiI2stZWRpdG9yLWxpbmstdXJsXCIpLnZhbCh0aGlzLmxpbmtVcmwobikpLmVuZCgpLmZpbmQoXCIjay1lZGl0b3ItbGluay10ZXh0XCIpLnZhbCh0aGlzLmxpbmtUZXh0KHQpKS5lbmQoKS5maW5kKFwiI2stZWRpdG9yLWxpbmstdGl0bGVcIikudmFsKG4/bi50aXRsZTpcIlwiKS5lbmQoKS5maW5kKFwiI2stZWRpdG9yLWxpbmstdGFyZ2V0XCIpLmF0dHIoXCJjaGVja2VkXCIsbj9cIl9ibGFua1wiPT1uLnRhcmdldDohMSkuZW5kKCkuZmluZChcIi5rLWVkaXRvci1saW5rLXRleHQtcm93XCIpLnRvZ2dsZSghaSksdC5sZW5ndGg+MCYmIXMmJih0aGlzLl9pbml0aWFsVGV4dD1lKFwiI2stZWRpdG9yLWxpbmstdGV4dFwiLG8pLnZhbCgpKSx0aGlzLl9kaWFsb2c9by5kYXRhKFwia2VuZG9XaW5kb3dcIikuY2VudGVyKCkub3BlbigpLGUoXCIjay1lZGl0b3ItbGluay11cmxcIixvKS5mb2N1cygpLnNlbGVjdCgpfSxfa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgbj10LmtleXM7ZS5rZXlDb2RlPT1uLkVOVEVSP3RoaXMuX2FwcGx5KGUpOmUua2V5Q29kZT09bi5FU0MmJnRoaXMuX2Nsb3NlKGUpfSxfYXBwbHk6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG89dGhpcy5fZGlhbG9nLmVsZW1lbnQscz1lKFwiI2stZWRpdG9yLWxpbmstdXJsXCIsbykudmFsKCksbD1lKFwiI2stZWRpdG9yLWxpbmstdGV4dFwiLG8pO3MmJlwiaHR0cDovL1wiIT1zJiYocy5pbmRleE9mKFwiQFwiKT4wJiYhL14oXFx3KzopfChcXC9cXC8pL2kudGVzdChzKSYmKHM9XCJtYWlsdG86XCIrcyksdGhpcy5hdHRyaWJ1dGVzPXtocmVmOnN9LG49ZShcIiNrLWVkaXRvci1saW5rLXRpdGxlXCIsbykudmFsKCksbiYmKHRoaXMuYXR0cmlidXRlcy50aXRsZT1uKSxsLmlzKFwiOnZpc2libGVcIikmJihpPWwudmFsKCksaXx8dGhpcy5faW5pdGlhbFRleHQ/aSYmaSE9PXRoaXMuX2luaXRpYWxUZXh0JiYodGhpcy5hdHRyaWJ1dGVzLmlubmVySFRNTD1hLnN0cmlwQm9tKGkpKTp0aGlzLmF0dHJpYnV0ZXMuaW5uZXJIVE1MPXMpLHI9ZShcIiNrLWVkaXRvci1saW5rLXRhcmdldFwiLG8pLmlzKFwiOmNoZWNrZWRcIiksdGhpcy5hdHRyaWJ1dGVzLnRhcmdldD1yP1wiX2JsYW5rXCI6bnVsbCx0aGlzLmZvcm1hdHRlci5hcHBseSh0aGlzLl9yYW5nZSx0aGlzLmF0dHJpYnV0ZXMpKSx0aGlzLl9jbG9zZSh0KSx0aGlzLmNoYW5nZSYmdGhpcy5jaGFuZ2UoKX0sX2Nsb3NlOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0aGlzLl9kaWFsb2cuZGVzdHJveSgpLGEud2luZG93RnJvbURvY3VtZW50KHMuZG9jdW1lbnRGcm9tUmFuZ2UodGhpcy5fcmFuZ2UpKS5mb2N1cygpLHRoaXMucmVsZWFzZVJhbmdlKHRoaXMuX3JhbmdlKX0sbGlua1VybDpmdW5jdGlvbihlKXtyZXR1cm4gZT9lLmdldEF0dHJpYnV0ZShcImhyZWZcIiwyKTpcImh0dHA6Ly9cIn0sbGlua1RleHQ6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIjtyZXR1cm4gMT09ZS5sZW5ndGg/dD1lWzBdLm5vZGVWYWx1ZTplLmxlbmd0aCYmKHQ9ZVswXS5ub2RlVmFsdWUrZVsxXS5ub2RlVmFsdWUpLGEuc3RyaXBCb20odHx8XCJcIil9LHJlZG86ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxvY2tSYW5nZSghMCk7dGhpcy5mb3JtYXR0ZXIuYXBwbHkoZSx0aGlzLmF0dHJpYnV0ZXMpLHRoaXMucmVsZWFzZVJhbmdlKGUpfX0pLHc9ZC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCl7dGhpcy5vcHRpb25zPXQsdGhpcy5maW5kZXI9bmV3IHAoW3t0YWdzOltcImFcIl19XSksZC5mbi5pbml0LmNhbGwodGhpcyxlLmV4dGVuZCh0LHtjb21tYW5kOl99KSl9LGluaXRpYWxpemU6ZnVuY3Rpb24oZSx0KXtkLmZuLmluaXRpYWxpemUuY2FsbCh0aGlzLGUsdCksZS5hZGRDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIil9LHVwZGF0ZTpmdW5jdGlvbihlLHQpe2UudG9nZ2xlQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIsIXRoaXMuZmluZGVyLmlzRm9ybWF0dGVkKHQpKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtaG92ZXJcIil9fSk7aSh0LnVpLmVkaXRvcix7TGlua0Zvcm1hdEZpbmRlcjptLExpbmtGb3JtYXR0ZXI6dixVbmxpbmtDb21tYW5kOl8sTGlua0NvbW1hbmQ6eSxVbmxpbmtUb29sOnd9KSxnKFwiY3JlYXRlTGlua1wiLG5ldyBkKHtrZXk6XCJLXCIsY3RybDohMCxjb21tYW5kOnksdGVtcGxhdGU6bmV3IHUoe3RlbXBsYXRlOmwuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJDcmVhdGUgTGlua1wifSl9KSksZyhcInVubGlua1wiLG5ldyB3KHtrZXk6XCJLXCIsY3RybDohMCxzaGlmdDohMCx0ZW1wbGF0ZTpuZXcgdSh7dGVtcGxhdGU6bC5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIlJlbW92ZSBMaW5rXCJ9KX0pKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXt2YXIgbj13aW5kb3cua2VuZG8saT1lLmV4dGVuZCxyPW4udWkuZWRpdG9yLG89ci5FZGl0b3JVdGlscyxhPXIuRG9tLHM9by5yZWdpc3RlclRvb2wsbD1yLlRvb2xUZW1wbGF0ZSxjPXIuUmFuZ2VVdGlscyxkPXIuQ29tbWFuZCx1PXIuTGlua0Zvcm1hdHRlcixoPWMudGV4dE5vZGVzLHA9bi5rZXlzLGY9XCIjay1lZGl0b3ItZmlsZS11cmxcIixnPVwiI2stZWRpdG9yLWZpbGUtdGl0bGVcIixtPWQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZC5mbi5pbml0LmNhbGwodCxlKSx0LmZvcm1hdHRlcj1uZXcgdSx0LmFzeW5jPSEwLHQuYXR0cmlidXRlcz17fX0saW5zZXJ0RmlsZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuYXR0cmlidXRlcyxpPWMuZG9jdW1lbnRGcm9tUmFuZ2UodCk7aWYobi5ocmVmJiZcImh0dHA6Ly9cIiE9bi5ocmVmKXtpZighZSlyZXR1cm4gZT1hLmNyZWF0ZShpLFwiYVwiLHtocmVmOm4uaHJlZn0pLGUuaW5uZXJIVE1MPW4uaW5uZXJIVE1MLHQuZGVsZXRlQ29udGVudHMoKSx0Lmluc2VydE5vZGUoZSksZS5uZXh0U2libGluZ3x8YS5pbnNlcnRBZnRlcihpLmNyZWF0ZVRleHROb2RlKFwi77u/XCIpLGUpLHQuc2V0U3RhcnRBZnRlcihlKSx0LnNldEVuZEFmdGVyKGUpLGMuc2VsZWN0UmFuZ2UodCksITA7YS5hdHRyKGUsbil9cmV0dXJuITF9LF9kaWFsb2dUZW1wbGF0ZTpmdW5jdGlvbihlKXtyZXR1cm4gbi50ZW1wbGF0ZSgnPGRpdiBjbGFzcz1cImstZWRpdG9yLWRpYWxvZyBrLXBvcHVwLWVkaXQtZm9ybSBrLWVkaXQtZm9ybS1jb250YWluZXJcIj4jIGlmIChzaG93QnJvd3NlcikgeyAjPGRpdiBjbGFzcz1cImstZmlsZWJyb3dzZXJcIj48L2Rpdj4jIH0gIzxkaXYgY2xhc3M9XFwnay1lZGl0LWxhYmVsXFwnPjxsYWJlbCBmb3I9XCJrLWVkaXRvci1maWxlLXVybFwiPiM6IG1lc3NhZ2VzLmZpbGVXZWJBZGRyZXNzICM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XFwnay1lZGl0LWZpZWxkXFwnPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiay1pbnB1dCBrLXRleHRib3hcIiBpZD1cImstZWRpdG9yLWZpbGUtdXJsXCI+PC9kaXY+PGRpdiBjbGFzcz1cXCdrLWVkaXQtbGFiZWxcXCc+PGxhYmVsIGZvcj1cImstZWRpdG9yLWZpbGUtdGl0bGVcIj4jOiBtZXNzYWdlcy5maWxlVGl0bGUgIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cXCdrLWVkaXQtZmllbGRcXCc+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJrLWlucHV0IGstdGV4dGJveFwiIGlkPVwiay1lZGl0b3ItZmlsZS10aXRsZVwiPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWVkaXQtYnV0dG9ucyBrLXN0YXRlLWRlZmF1bHRcIj48YnV0dG9uIGNsYXNzPVwiay1kaWFsb2ctaW5zZXJ0IGstYnV0dG9uIGstcHJpbWFyeVwiPiM6IG1lc3NhZ2VzLmRpYWxvZ0luc2VydCAjPC9idXR0b24+PGJ1dHRvbiBjbGFzcz1cImstZGlhbG9nLWNsb3NlIGstYnV0dG9uXCI+IzogbWVzc2FnZXMuZGlhbG9nQ2FuY2VsICM8L2J1dHRvbj48L2Rpdj48L2Rpdj4nKSh7bWVzc2FnZXM6dGhpcy5lZGl0b3Iub3B0aW9ucy5tZXNzYWdlcyxzaG93QnJvd3NlcjplfSl9LHJlZG86ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5sb2NrUmFuZ2UoKTt0aGlzLmZvcm1hdHRlci5hcHBseSh0LHRoaXMuYXR0cmlidXRlcyksZS5yZWxlYXNlUmFuZ2UodCl9LGV4ZWM6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3ZhciB0PXMuZWxlbWVudCxuPXQuZmluZChmKS52YWwoKS5yZXBsYWNlKC8gL2csXCIlMjBcIiksaT10LmZpbmQoZykudmFsKCk7bC5hdHRyaWJ1dGVzPXtocmVmOm4saW5uZXJIVE1MOlwiXCIhPT1pP2k6bn0sbT1sLmluc2VydEZpbGUodixkKSxyKGUpLGwuY2hhbmdlJiZsLmNoYW5nZSgpfWZ1bmN0aW9uIHIoZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHMuZGVzdHJveSgpLGEud2luZG93RnJvbURvY3VtZW50KGMuZG9jdW1lbnRGcm9tUmFuZ2UoZCkpLmZvY3VzKCksbXx8bC5yZWxlYXNlUmFuZ2UoZCl9ZnVuY3Rpb24gbyh0KXt0LmtleUNvZGU9PXAuRU5URVI/ZSh0KTp0LmtleUNvZGU9PXAuRVNDJiZyKHQpfXZhciBzLGw9dGhpcyxkPWwubG9ja1JhbmdlKCksdT1oKGQpLG09ITEsdj11Lmxlbmd0aD90aGlzLmZvcm1hdHRlci5maW5kZXIuZmluZFN1aXRhYmxlKHVbMF0pOm51bGwsXz1sLmVkaXRvci5vcHRpb25zLHk9Xy5tZXNzYWdlcyx3PV8uZmlsZUJyb3dzZXIsYj0hIShuLnVpLkZpbGVCcm93c2VyJiZ3JiZ3LnRyYW5zcG9ydCYmdy50cmFuc3BvcnQucmVhZCE9PXQpLGs9e3RpdGxlOnkuaW5zZXJ0RmlsZSx2aXNpYmxlOiExLHJlc2l6YWJsZTpifTtrLmNsb3NlPXIsYiYmKGsud2lkdGg9NzUwKSxzPXRoaXMuY3JlYXRlRGlhbG9nKGwuX2RpYWxvZ1RlbXBsYXRlKGIpLGspLnRvZ2dsZUNsYXNzKFwiay1maWxlYnJvd3Nlci1kaWFsb2dcIixiKS5maW5kKFwiLmstZGlhbG9nLWluc2VydFwiKS5jbGljayhlKS5lbmQoKS5maW5kKFwiLmstZGlhbG9nLWNsb3NlXCIpLmNsaWNrKHIpLmVuZCgpLmZpbmQoXCIuay1lZGl0LWZpZWxkIGlucHV0XCIpLmtleWRvd24obykuZW5kKCkuZmluZChmKS52YWwodj92LmdldEF0dHJpYnV0ZShcImhyZWZcIiwyKTpcImh0dHA6Ly9cIikuZW5kKCkuZmluZChnKS52YWwodj92LnRpdGxlOlwiXCIpLmVuZCgpLmRhdGEoXCJrZW5kb1dpbmRvd1wiKSxiJiZuZXcgbi51aS5GaWxlQnJvd3NlcihzLmVsZW1lbnQuZmluZChcIi5rLWZpbGVicm93c2VyXCIpLGkoe30sdyx7Y2hhbmdlOmZ1bmN0aW9uKCl7cy5lbGVtZW50LmZpbmQoZikudmFsKHRoaXMudmFsdWUoKSl9LGFwcGx5OmV9KSkscy5jZW50ZXIoKS5vcGVuKCkscy5lbGVtZW50LmZpbmQoZikuZm9jdXMoKS5zZWxlY3QoKX19KTtuLnVpLmVkaXRvci5GaWxlQ29tbWFuZD1tLHMoXCJpbnNlcnRGaWxlXCIsbmV3IHIuVG9vbCh7Y29tbWFuZDptLHRlbXBsYXRlOm5ldyBsKHt0ZW1wbGF0ZTpvLmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiSW5zZXJ0IEZpbGVcIn0pfSkpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe3ZhciBuPXdpbmRvdy5rZW5kbyxpPWUuZXh0ZW5kLHI9bi51aS5lZGl0b3Isbz1yLkVkaXRvclV0aWxzLGE9ci5Eb20scz1vLnJlZ2lzdGVyVG9vbCxsPXIuVG9vbFRlbXBsYXRlLGM9ci5SYW5nZVV0aWxzLGQ9ci5Db21tYW5kLHU9bi5rZXlzLGg9XCIjay1lZGl0b3ItaW1hZ2UtdXJsXCIscD1cIiNrLWVkaXRvci1pbWFnZS10aXRsZVwiLGY9XCIjay1lZGl0b3ItaW1hZ2Utd2lkdGhcIixnPVwiI2stZWRpdG9yLWltYWdlLWhlaWdodFwiLG09ZC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztcclxuZC5mbi5pbml0LmNhbGwodCxlKSx0LmFzeW5jPSEwLHQuYXR0cmlidXRlcz17fX0saW5zZXJ0SW1hZ2U6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXMuYXR0cmlidXRlcyxyPWMuZG9jdW1lbnRGcm9tUmFuZ2UodCk7aWYoaS5zcmMmJlwiaHR0cDovL1wiIT1pLnNyYyl7aWYobj1mdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtpLndpZHRofHxlLnJlbW92ZUF0dHJpYnV0ZShcIndpZHRoXCIpLGkuaGVpZ2h0fHxlLnJlbW92ZUF0dHJpYnV0ZShcImhlaWdodFwiKSxlLnJlbW92ZUF0dHJpYnV0ZShcImNvbXBsZXRlXCIpfSl9LCFlKXJldHVybiBlPWEuY3JlYXRlKHIsXCJpbWdcIixpKSxlLm9ubG9hZD1lLm9uZXJyb3I9ZnVuY3Rpb24oKXtuKCl9LHQuZGVsZXRlQ29udGVudHMoKSx0Lmluc2VydE5vZGUoZSksZS5uZXh0U2libGluZ3x8YS5pbnNlcnRBZnRlcihyLmNyZWF0ZVRleHROb2RlKFwi77u/XCIpLGUpLG4oKSx0LnNldFN0YXJ0QWZ0ZXIoZSksdC5zZXRFbmRBZnRlcihlKSxjLnNlbGVjdFJhbmdlKHQpLCEwO2EuYXR0cihlLGkpLG4oKX1yZXR1cm4hMX0sX2RpYWxvZ1RlbXBsYXRlOmZ1bmN0aW9uKGUpe3JldHVybiBuLnRlbXBsYXRlKCc8ZGl2IGNsYXNzPVwiay1lZGl0b3ItZGlhbG9nIGstcG9wdXAtZWRpdC1mb3JtIGstZWRpdC1mb3JtLWNvbnRhaW5lclwiPiMgaWYgKHNob3dCcm93c2VyKSB7ICM8ZGl2IGNsYXNzPVwiay1maWxlYnJvd3NlciBrLWltYWdlYnJvd3NlclwiPjwvZGl2PiMgfSAjPGRpdiBjbGFzcz1cXCdrLWVkaXQtbGFiZWxcXCc+PGxhYmVsIGZvcj1cImstZWRpdG9yLWltYWdlLXVybFwiPiM6IG1lc3NhZ2VzLmltYWdlV2ViQWRkcmVzcyAjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVxcJ2stZWRpdC1maWVsZFxcJz48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImstaW5wdXQgay10ZXh0Ym94XCIgaWQ9XCJrLWVkaXRvci1pbWFnZS11cmxcIj48L2Rpdj48ZGl2IGNsYXNzPVxcJ2stZWRpdC1sYWJlbFxcJz48bGFiZWwgZm9yPVwiay1lZGl0b3ItaW1hZ2UtdGl0bGVcIj4jOiBtZXNzYWdlcy5pbWFnZUFsdFRleHQgIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cXCdrLWVkaXQtZmllbGRcXCc+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJrLWlucHV0IGstdGV4dGJveFwiIGlkPVwiay1lZGl0b3ItaW1hZ2UtdGl0bGVcIj48L2Rpdj48ZGl2IGNsYXNzPVxcJ2stZWRpdC1sYWJlbFxcJz48bGFiZWwgZm9yPVwiay1lZGl0b3ItaW1hZ2Utd2lkdGhcIj4jOiBtZXNzYWdlcy5pbWFnZVdpZHRoICM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XFwnay1lZGl0LWZpZWxkXFwnPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiay1pbnB1dCBrLXRleHRib3hcIiBpZD1cImstZWRpdG9yLWltYWdlLXdpZHRoXCI+PC9kaXY+PGRpdiBjbGFzcz1cXCdrLWVkaXQtbGFiZWxcXCc+PGxhYmVsIGZvcj1cImstZWRpdG9yLWltYWdlLWhlaWdodFwiPiM6IG1lc3NhZ2VzLmltYWdlSGVpZ2h0ICM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XFwnay1lZGl0LWZpZWxkXFwnPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiay1pbnB1dCBrLXRleHRib3hcIiBpZD1cImstZWRpdG9yLWltYWdlLWhlaWdodFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWVkaXQtYnV0dG9ucyBrLXN0YXRlLWRlZmF1bHRcIj48YnV0dG9uIGNsYXNzPVwiay1kaWFsb2ctaW5zZXJ0IGstYnV0dG9uIGstcHJpbWFyeVwiPiM6IG1lc3NhZ2VzLmRpYWxvZ0luc2VydCAjPC9idXR0b24+PGJ1dHRvbiBjbGFzcz1cImstZGlhbG9nLWNsb3NlIGstYnV0dG9uXCI+IzogbWVzc2FnZXMuZGlhbG9nQ2FuY2VsICM8L2J1dHRvbj48L2Rpdj48L2Rpdj4nKSh7bWVzc2FnZXM6dGhpcy5lZGl0b3Iub3B0aW9ucy5tZXNzYWdlcyxzaG93QnJvd3NlcjplfSl9LHJlZG86ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5sb2NrUmFuZ2UoKTtlLmluc2VydEltYWdlKGMuaW1hZ2UodCksdCl8fGUucmVsZWFzZVJhbmdlKHQpfSxleGVjOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2YXIgdD1zLmVsZW1lbnQsbj1wYXJzZUludCh0LmZpbmQoZikudmFsKCksMTApLGk9cGFyc2VJbnQodC5maW5kKGcpLnZhbCgpLDEwKTtsLmF0dHJpYnV0ZXM9e3NyYzp0LmZpbmQoaCkudmFsKCkucmVwbGFjZSgvIC9nLFwiJTIwXCIpLGFsdDp0LmZpbmQocCkudmFsKCl9LGwuYXR0cmlidXRlcy53aWR0aD1udWxsLGwuYXR0cmlidXRlcy5oZWlnaHQ9bnVsbCwhaXNOYU4obikmJm4+MCYmKGwuYXR0cmlidXRlcy53aWR0aD1uKSwhaXNOYU4oaSkmJmk+MCYmKGwuYXR0cmlidXRlcy5oZWlnaHQ9aSksbT1sLmluc2VydEltYWdlKHYsZCkscihlKSxsLmNoYW5nZSYmbC5jaGFuZ2UoKX1mdW5jdGlvbiByKGUpe2UucHJldmVudERlZmF1bHQoKSxzLmRlc3Ryb3koKSxhLndpbmRvd0Zyb21Eb2N1bWVudChjLmRvY3VtZW50RnJvbVJhbmdlKGQpKS5mb2N1cygpLG18fGwucmVsZWFzZVJhbmdlKGQpfWZ1bmN0aW9uIG8odCl7dC5rZXlDb2RlPT11LkVOVEVSP2UodCk6dC5rZXlDb2RlPT11LkVTQyYmcih0KX12YXIgcyxsPXRoaXMsZD1sLmxvY2tSYW5nZSgpLG09ITEsdj1jLmltYWdlKGQpLF89diYmdi5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKXx8XCJcIix5PXYmJnYuZ2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIpfHxcIlwiLHc9bC5lZGl0b3Iub3B0aW9ucyxiPXcubWVzc2FnZXMsaz13LmltYWdlQnJvd3Nlcix4PSEhKG4udWkuSW1hZ2VCcm93c2VyJiZrJiZrLnRyYW5zcG9ydCYmay50cmFuc3BvcnQucmVhZCE9PXQpLEM9e3RpdGxlOmIuaW5zZXJ0SW1hZ2UsdmlzaWJsZTohMSxyZXNpemFibGU6eH07Qy5jbG9zZT1yLHgmJihDLndpZHRoPTc1MCkscz10aGlzLmNyZWF0ZURpYWxvZyhsLl9kaWFsb2dUZW1wbGF0ZSh4KSxDKS50b2dnbGVDbGFzcyhcImstZmlsZWJyb3dzZXItZGlhbG9nXCIseCkuZmluZChcIi5rLWRpYWxvZy1pbnNlcnRcIikuY2xpY2soZSkuZW5kKCkuZmluZChcIi5rLWRpYWxvZy1jbG9zZVwiKS5jbGljayhyKS5lbmQoKS5maW5kKFwiLmstZWRpdC1maWVsZCBpbnB1dFwiKS5rZXlkb3duKG8pLmVuZCgpLmZpbmQoaCkudmFsKHY/di5nZXRBdHRyaWJ1dGUoXCJzcmNcIiwyKTpcImh0dHA6Ly9cIikuZW5kKCkuZmluZChwKS52YWwodj92LmFsdDpcIlwiKS5lbmQoKS5maW5kKGYpLnZhbChfKS5lbmQoKS5maW5kKGcpLnZhbCh5KS5lbmQoKS5kYXRhKFwia2VuZG9XaW5kb3dcIikseCYmbmV3IG4udWkuSW1hZ2VCcm93c2VyKHMuZWxlbWVudC5maW5kKFwiLmstaW1hZ2Vicm93c2VyXCIpLGkoe30sayx7Y2hhbmdlOmZ1bmN0aW9uKCl7cy5lbGVtZW50LmZpbmQoaCkudmFsKHRoaXMudmFsdWUoKSl9LGFwcGx5OmV9KSkscy5jZW50ZXIoKS5vcGVuKCkscy5lbGVtZW50LmZpbmQoaCkuZm9jdXMoKS5zZWxlY3QoKX19KTtuLnVpLmVkaXRvci5JbWFnZUNvbW1hbmQ9bSxzKFwiaW5zZXJ0SW1hZ2VcIixuZXcgci5Ub29sKHtjb21tYW5kOm0sdGVtcGxhdGU6bmV3IGwoe3RlbXBsYXRlOm8uYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJJbnNlcnQgSW1hZ2VcIn0pfSkpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe3ZhciBuPXdpbmRvdy5rZW5kbyxpPW4udWkuRHJvcERvd25MaXN0LHI9bi51aS5lZGl0b3IuRG9tLG89aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxyKXt2YXIgbz10aGlzO2kuZm4uaW5pdC5jYWxsKG8sdCxyKSxuLnN1cHBvcnQubW9iaWxlT1MuaW9zJiYodGhpcy5faW5pdFNlbGVjdE92ZXJsYXkoKSx0aGlzLmJpbmQoXCJkYXRhQm91bmRcIixlLnByb3h5KHRoaXMuX2luaXRTZWxlY3RPdmVybGF5LHRoaXMpKSksby52YWx1ZShvLm9wdGlvbnMudGl0bGUpLG8uYmluZChcIm9wZW5cIixmdW5jdGlvbigpe2lmKG8ub3B0aW9ucy5hdXRvU2l6ZSl7dmFyIGUsdD1vLmxpc3Q7dC5jc3Moe3doaXRlU3BhY2U6XCJub3dyYXBcIix3aWR0aDpcImF1dG9cIn0pLGU9dC53aWR0aCgpLGU/ZSs9MjA6ZT1vLl9saXN0V2lkdGgsdC5jc3MoXCJ3aWR0aFwiLGUrbi5zdXBwb3J0LnNjcm9sbGJhcigpKSxvLl9saXN0V2lkdGg9ZX19KX0sb3B0aW9uczp7bmFtZTpcIlNlbGVjdEJveFwifSxfaW5pdFNlbGVjdE92ZXJsYXk6ZnVuY3Rpb24oKXt2YXIgdCxpLHIsbyxhPXRoaXMscz1hLnZhbHVlKCksbD10aGlzLmRhdGFTb3VyY2UudmlldygpLGM9XCJcIixkPW4uaHRtbEVuY29kZTtmb3IoaT0wO2wubGVuZ3RoPmk7aSsrKXQ9bFtpXSxjKz1cIjxvcHRpb24gdmFsdWU9J1wiK2QodC52YWx1ZSkrXCInXCIsdC52YWx1ZT09cyYmKGMrPVwiIHNlbGVjdGVkXCIpLGMrPVwiPlwiK2QodC50ZXh0KStcIjwvb3B0aW9uPlwiO3I9ZShcIjxzZWxlY3QgY2xhc3M9J2stc2VsZWN0LW92ZXJsYXknPlwiK2MrXCI8L3NlbGVjdD5cIiksbz1lKHRoaXMuZWxlbWVudCkuY2xvc2VzdChcIi5rLXdpZGdldFwiKSxvLm5leHQoXCIuay1zZWxlY3Qtb3ZlcmxheVwiKS5yZW1vdmUoKSxyLmluc2VydEFmdGVyKG8pLHIub24oXCJjaGFuZ2VcIixmdW5jdGlvbigpe2EudmFsdWUodGhpcy52YWx1ZSksYS50cmlnZ2VyKFwiY2hhbmdlXCIpfSl9LHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMscj1pLmZuLnZhbHVlLmNhbGwobixlKTtyZXR1cm4gZT09PXQ/cjooZSE9PWkuZm4udmFsdWUuY2FsbChuKSYmKG4udGV4dChuLm9wdGlvbnMudGl0bGUpLG4uX2N1cnJlbnQmJm4uX2N1cnJlbnQucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIpLG4uY3VycmVudChudWxsKSxuLl9vbGRJbmRleD1uLnNlbGVjdGVkSW5kZXg9LTEpLHQpfSxkZWNvcmF0ZTpmdW5jdGlvbih0KXt2YXIgbixpLG8sYSxzPXRoaXMsbD1zLmRhdGFTb3VyY2UsYz1sLmRhdGEoKTtmb3IodCYmcy5saXN0LmNzcyhcImJhY2tncm91bmQtY29sb3JcIixyLmdldEVmZmVjdGl2ZUJhY2tncm91bmQoZSh0KSkpLG49MDtjLmxlbmd0aD5uO24rKylpPWNbbl0udGFnfHxcInNwYW5cIixvPWNbbl0uY2xhc3NOYW1lLGE9ci5pbmxpbmVTdHlsZSh0LGkse2NsYXNzTmFtZTpvfSksYT1hLnJlcGxhY2UoL1wiL2csXCInXCIpLGNbbl0uc3R5bGU9YStcIjtkaXNwbGF5OmlubGluZS1ibG9ja1wiO2wudHJpZ2dlcihcImNoYW5nZVwiKX19KTtuLnVpLnBsdWdpbihvKSxuLnVpLmVkaXRvci5TZWxlY3RCb3g9b30od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKG4saSl7dmFyIHI9XCJydGxcIj09ZShuKS5jc3MoXCJkaXJlY3Rpb25cIiksbz1yP1wiUmlnaHRcIjpcIkxlZnRcIixhPVwidGRcIiE9cy5uYW1lKG4pP1wibWFyZ2luXCIrbzpcInBhZGRpbmdcIitvO3JldHVybiBpPT09dD9uLnN0eWxlW2FdfHwwOihpPjA/bi5zdHlsZVthXT1pK1wicHhcIjoobi5zdHlsZVthXT1cIlwiLG4uc3R5bGUuY3NzVGV4dHx8bi5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKSksdCl9dmFyIGk9d2luZG93LmtlbmRvLHI9aS5DbGFzcyxvPWUuZXh0ZW5kLGE9aS51aS5lZGl0b3Iscz1hLkRvbSxsPWEuRWRpdG9yVXRpbHMsYz1sLnJlZ2lzdGVyVG9vbCxkPWEuQ29tbWFuZCx1PWEuVG9vbCxoPWEuVG9vbFRlbXBsYXRlLHA9YS5SYW5nZVV0aWxzLGY9cy5ibG9ja0VsZW1lbnRzLGc9YS5CbG9ja0Zvcm1hdEZpbmRlcixtPWEuQmxvY2tGb3JtYXR0ZXIsdj1yLmV4dGVuZCh7aW5pdDpmdW5jdGlvbigpe3RoaXMuZmluZGVyPW5ldyBnKFt7dGFnczpzLmJsb2NrRWxlbWVudHN9XSl9LGFwcGx5OmZ1bmN0aW9uKHQpe3ZhciBpLHIsbyxhLGwsYyxkLHUsaCxwLGY9dGhpcy5maW5kZXIuZmluZFN1aXRhYmxlKHQpLGc9W107aWYoZi5sZW5ndGgpe2ZvcihpPTAscj1mLmxlbmd0aDtyPmk7aSsrKXMuaXMoZltpXSxcImxpXCIpP2UoZltpXSkuaW5kZXgoKT9lLmluQXJyYXkoZltpXS5wYXJlbnROb2RlLGcpPDAmJmcucHVzaChmW2ldKTpnLnB1c2goZltpXS5wYXJlbnROb2RlKTpnLnB1c2goZltpXSk7Zm9yKDtnLmxlbmd0aDspaWYobz1nLnNoaWZ0KCkscy5pcyhvLFwibGlcIikpaWYoYT1vLnBhcmVudE5vZGUsbD1lKG8pLnByZXYoXCJsaVwiKSxjPWwuZmluZChcInVsLG9sXCIpLmxhc3QoKSxkPWUobykuY2hpbGRyZW4oXCJ1bCxvbFwiKVswXSxkJiZsWzBdKWNbMF0/KGMuYXBwZW5kKG8pLGMuYXBwZW5kKGUoZCkuY2hpbGRyZW4oKSkscy5yZW1vdmUoZCkpOihsLmFwcGVuZChkKSxkLmluc2VydEJlZm9yZShvLGQuZmlyc3RDaGlsZCkpO2Vsc2UgZm9yKGQ9bC5jaGlsZHJlbihcInVsLG9sXCIpWzBdLGR8fChkPXMuY3JlYXRlKG8ub3duZXJEb2N1bWVudCxzLm5hbWUoYSkpLGwuYXBwZW5kKGQpKTtvJiZvLnBhcmVudE5vZGU9PWE7KWQuYXBwZW5kQ2hpbGQobyksbz1nLnNoaWZ0KCk7ZWxzZSBmb3IodT1wYXJzZUludChuKG8pLDEwKSszMCxuKG8sdSksaD0wO2cubGVuZ3RoPmg7aCsrKWUuY29udGFpbnMobyxnW2hdKSYmZy5zcGxpY2UoaCwxKX1lbHNlIHA9bmV3IG0oW3t0YWdzOltcInBcIl19XSx7c3R5bGU6e21hcmdpbkxlZnQ6MzB9fSkscC5hcHBseSh0KX0scmVtb3ZlOmZ1bmN0aW9uKHQpe3ZhciBpLHIsbyxhLHMsbCxjLGQsdT10aGlzLmZpbmRlci5maW5kU3VpdGFibGUodCk7Zm9yKHI9MCxvPXUubGVuZ3RoO28+cjtyKyspe2lmKGM9ZSh1W3JdKSxjLmlzKFwibGlcIikpe2lmKGE9Yy5wYXJlbnQoKSxzPWEucGFyZW50KCkscy5pcyhcImxpLHVsLG9sXCIpJiYhbihhWzBdKSl7aWYoaSYmZS5jb250YWlucyhpLHNbMF0pKWNvbnRpbnVlO2w9Yy5uZXh0QWxsKFwibGlcIiksbC5sZW5ndGgmJmUoYVswXS5jbG9uZU5vZGUoITEpKS5hcHBlbmRUbyhjKS5hcHBlbmQobCkscy5pcyhcImxpXCIpP2MuaW5zZXJ0QWZ0ZXIocyk6Yy5hcHBlbmRUbyhzKSxhLmNoaWxkcmVuKFwibGlcIikubGVuZ3RofHxhLnJlbW92ZSgpO2NvbnRpbnVlfWlmKGk9PWFbMF0pY29udGludWU7aT1hWzBdfWVsc2UgaT11W3JdO2Q9cGFyc2VJbnQobihpKSwxMCktMzAsbihpLGQpfX19KSxfPWQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe2UuZm9ybWF0dGVyPXt0b2dnbGU6ZnVuY3Rpb24oZSl7KG5ldyB2KS5hcHBseShwLm5vZGVzKGUpKX19LGQuZm4uaW5pdC5jYWxsKHRoaXMsZSl9fSkseT1kLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXtlLmZvcm1hdHRlcj17dG9nZ2xlOmZ1bmN0aW9uKGUpeyhuZXcgdikucmVtb3ZlKHAubm9kZXMoZSkpfX0sZC5mbi5pbml0LmNhbGwodGhpcyxlKX19KSx3PXUuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3UuZm4uaW5pdC5jYWxsKHRoaXMsZSksdGhpcy5maW5kZXI9bmV3IGcoW3t0YWdzOmZ9XSl9LGluaXRpYWxpemU6ZnVuY3Rpb24oZSx0KXt1LmZuLmluaXRpYWxpemUuY2FsbCh0aGlzLGUsdCksZS5hZGRDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIil9LHVwZGF0ZTpmdW5jdGlvbihpLHIpe3ZhciBvLGEsbCxjLGQ9dGhpcy5maW5kZXIuZmluZFN1aXRhYmxlKHIpO2ZvcihsPTAsYz1kLmxlbmd0aDtjPmw7bCsrKWlmKG89bihkW2xdKSxvfHwoYT1lKGRbbF0pLnBhcmVudHMoXCJ1bCxvbFwiKS5sZW5ndGgsbz1zLmlzKGRbbF0sXCJsaVwiKSYmKGE+MXx8bihkW2xdLnBhcmVudE5vZGUpKXx8cy5vZlR5cGUoZFtsXSxbXCJ1bFwiLFwib2xcIl0pJiZhPjApLG8pcmV0dXJuIGkucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIpLHQ7aS5hZGRDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIikucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWhvdmVyXCIpfX0pO28oYSx7SW5kZW50Rm9ybWF0dGVyOnYsSW5kZW50Q29tbWFuZDpfLE91dGRlbnRDb21tYW5kOnksT3V0ZGVudFRvb2w6d30pLGMoXCJpbmRlbnRcIixuZXcgdSh7Y29tbWFuZDpfLHRlbXBsYXRlOm5ldyBoKHt0ZW1wbGF0ZTpsLmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiSW5kZW50XCJ9KX0pKSxjKFwib3V0ZGVudFwiLG5ldyB3KHtjb21tYW5kOnksdGVtcGxhdGU6bmV3IGgoe3RlbXBsYXRlOmwuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJPdXRkZW50XCJ9KX0pKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQ9d2luZG93LmtlbmRvLG49ZS5leHRlbmQsaT10LnVpLmVkaXRvcixyPWkuRWRpdG9yVXRpbHMsbz1pLkNvbW1hbmQsYT1pLlRvb2wscz1pLlRvb2xUZW1wbGF0ZSxsPW8uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5vcHRpb25zPWUsby5mbi5pbml0LmNhbGwodCxlKSx0LmF0dHJpYnV0ZXM9bnVsbCx0LmFzeW5jPSEwfSxleGVjOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihlKXtvLnZhbHVlKHMuZmluZChkKS52YWwoKSksaShlKSxyLmNoYW5nZSYmci5jaGFuZ2UoKSxvLnRyaWdnZXIoXCJjaGFuZ2VcIil9ZnVuY3Rpb24gaShlKXtlLnByZXZlbnREZWZhdWx0KCkscy5kYXRhKFwia2VuZG9XaW5kb3dcIikuZGVzdHJveSgpLG8uZm9jdXMoKX12YXIgcj10aGlzLG89ci5lZGl0b3IsYT1vLm9wdGlvbnMubWVzc2FnZXMscz1lKHQudGVtcGxhdGUobC50ZW1wbGF0ZSkoYSkpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpLGM9bC5pbmRlbnQoby52YWx1ZSgpKSxkPVwiLmstZWRpdG9yLXRleHRhcmVhXCI7dGhpcy5jcmVhdGVEaWFsb2cocyx7dGl0bGU6YS52aWV3SHRtbCxjbG9zZTppLHZpc2libGU6ITF9KS5maW5kKGQpLnZhbChjKS5lbmQoKS5maW5kKFwiLmstZGlhbG9nLXVwZGF0ZVwiKS5jbGljayhuKS5lbmQoKS5maW5kKFwiLmstZGlhbG9nLWNsb3NlXCIpLmNsaWNrKGkpLmVuZCgpLmRhdGEoXCJrZW5kb1dpbmRvd1wiKS5jZW50ZXIoKS5vcGVuKCkscy5maW5kKGQpLmZvY3VzKCl9fSk7bihsLHt0ZW1wbGF0ZTpcIjxkaXYgY2xhc3M9J2stZWRpdG9yLWRpYWxvZyBrLXBvcHVwLWVkaXQtZm9ybSBrLWVkaXQtZm9ybS1jb250YWluZXIgay12aWV3aHRtbC1kaWFsb2cnPjx0ZXh0YXJlYSBjbGFzcz0nay1lZGl0b3ItdGV4dGFyZWEgay1pbnB1dCc+PC90ZXh0YXJlYT48ZGl2IGNsYXNzPSdrLWVkaXQtYnV0dG9ucyBrLXN0YXRlLWRlZmF1bHQnPjxidXR0b24gY2xhc3M9J2stZGlhbG9nLXVwZGF0ZSBrLWJ1dHRvbiBrLXByaW1hcnknPiM6IGRpYWxvZ1VwZGF0ZSAjPC9idXR0b24+PGJ1dHRvbiBjbGFzcz0nay1kaWFsb2ctY2xvc2Ugay1idXR0b24nPiM6IGRpYWxvZ0NhbmNlbCAjPC9idXR0b24+PC9kaXY+PC9kaXY+XCIsaW5kZW50OmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoLzxcXC8ocHxsaXx1bHxvbHxoWzEtNl18dGFibGV8dHJ8dGR8dGgpPi9naSxcIjwvJDE+XFxuXCIpLnJlcGxhY2UoLzwodWx8b2wpKFtePl0qKT48bGkvZ2ksXCI8JDEkMj5cXG48bGlcIikucmVwbGFjZSgvPGJyIFxcLz4vZ2ksXCI8YnIgLz5cXG5cIikucmVwbGFjZSgvXFxuJC8sXCJcIil9fSksdC51aS5lZGl0b3IuVmlld0h0bWxDb21tYW5kPWwsaS5FZGl0b3JVdGlscy5yZWdpc3RlclRvb2woXCJ2aWV3SHRtbFwiLG5ldyBhKHtjb21tYW5kOmwsdGVtcGxhdGU6bmV3IHMoe3RlbXBsYXRlOnIuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJWaWV3IEhUTUxcIn0pfSkpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXt2YXIgdD13aW5kb3cua2VuZG8sbj10LnVpLmVkaXRvcixpPW4uVG9vbCxyPW4uVG9vbFRlbXBsYXRlLG89bi5EZWxheWVkRXhlY3V0aW9uVG9vbCxhPW4uQ29tbWFuZCxzPW4uRG9tLGw9bi5FZGl0b3JVdGlscyxjPW4uUmFuZ2VVdGlscyxkPWwucmVnaXN0ZXJUb29sLHU9by5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztpLmZuLmluaXQuY2FsbChuLHQuZGVlcEV4dGVuZCh7fSxuLm9wdGlvbnMsZSkpLG4udHlwZT1cImtlbmRvU2VsZWN0Qm94XCIsbi5maW5kZXI9e2dldEZvcm1hdDpmdW5jdGlvbigpe3JldHVyblwiXCJ9fX0sb3B0aW9uczp7aXRlbXM6W3t0ZXh0OlwiUGFyYWdyYXBoXCIsdmFsdWU6XCJwXCJ9LHt0ZXh0OlwiUXVvdGF0aW9uXCIsdmFsdWU6XCJibG9ja3F1b3RlXCJ9LHt0ZXh0OlwiSGVhZGluZyAxXCIsdmFsdWU6XCJoMVwifSx7dGV4dDpcIkhlYWRpbmcgMlwiLHZhbHVlOlwiaDJcIn0se3RleHQ6XCJIZWFkaW5nIDNcIix2YWx1ZTpcImgzXCJ9LHt0ZXh0OlwiSGVhZGluZyA0XCIsdmFsdWU6XCJoNFwifSx7dGV4dDpcIkhlYWRpbmcgNVwiLHZhbHVlOlwiaDVcIn0se3RleHQ6XCJIZWFkaW5nIDZcIix2YWx1ZTpcImg2XCJ9XSx3aWR0aDoxMTB9LHRvRm9ybWF0dGluZ0l0ZW06ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLnZhbHVlO3JldHVybiBuP2UudGFnfHxlLmNsYXNzTmFtZT9lOih0PW4uaW5kZXhPZihcIi5cIiksMD09PXQ/ZS5jbGFzc05hbWU9bi5zdWJzdHJpbmcoMSk6LTE9PXQ/ZS50YWc9bjooZS50YWc9bi5zdWJzdHJpbmcoMCx0KSxlLmNsYXNzTmFtZT1uLnN1YnN0cmluZyh0KzEpKSxlKTplfSxjb21tYW5kOmZ1bmN0aW9uKHQpe3ZhciBpPXQudmFsdWU7cmV0dXJuIGk9dGhpcy50b0Zvcm1hdHRpbmdJdGVtKGkpLG5ldyBuLkZvcm1hdENvbW1hbmQoe3JhbmdlOnQucmFuZ2UsZm9ybWF0dGVyOmZ1bmN0aW9uKCl7dmFyIHQscj0oaS50YWd8fGkuY29udGV4dHx8XCJzcGFuXCIpLnNwbGl0KFwiLFwiKSxvPVt7dGFnczpyLGF0dHI6e2NsYXNzTmFtZTppLmNsYXNzTmFtZXx8XCJcIn19XTtyZXR1cm4gdD1lLmluQXJyYXkoclswXSxzLmlubGluZUVsZW1lbnRzKT49MD9uZXcgbi5HcmVlZHlJbmxpbmVGb3JtYXR0ZXIobyk6bmV3IG4uR3JlZWR5QmxvY2tGb3JtYXR0ZXIobyl9fSl9LGluaXRpYWxpemU6ZnVuY3Rpb24oZSxuKXt2YXIgcj1uLmVkaXRvcixvPXRoaXMub3B0aW9ucyxhPW8ubmFtZSxzPXRoaXM7ZS53aWR0aChvLndpZHRoKSxlLmtlbmRvU2VsZWN0Qm94KHtkYXRhVGV4dEZpZWxkOlwidGV4dFwiLGRhdGFWYWx1ZUZpZWxkOlwidmFsdWVcIixkYXRhU291cmNlOm8uaXRlbXN8fHIub3B0aW9uc1thXSx0aXRsZTpyLm9wdGlvbnMubWVzc2FnZXNbYV0sYXV0b1NpemU6ITAsY2hhbmdlOmZ1bmN0aW9uKCl7aS5leGVjKHIsYSx0aGlzLmRhdGFJdGVtKCkudG9KU09OKCkpfSxkYXRhQm91bmQ6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuZGF0YVNvdXJjZS5kYXRhKCk7Zm9yKGU9MDt0Lmxlbmd0aD5lO2UrKyl0W2VdPXMudG9Gb3JtYXR0aW5nSXRlbSh0W2VdKX0saGlnaGxpZ2h0Rmlyc3Q6ITEsdGVtcGxhdGU6dC50ZW1wbGF0ZSgnPHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBzdHlsZT1cImRpc3BsYXk6YmxvY2s7Iz0oZGF0YS5zdHlsZXx8XCJcIikjXCI+IzpkYXRhLnRleHQjPC9zcGFuPicpfSksZS5hZGRDbGFzcyhcImstZGVjb3JhdGVkXCIpLmNsb3Nlc3QoXCIuay13aWRnZXRcIikucmVtb3ZlQ2xhc3MoXCJrLVwiK2EpLmZpbmQoXCIqXCIpLmFkZEJhY2soKS5hdHRyKFwidW5zZWxlY3RhYmxlXCIsXCJvblwiKX0sZ2V0Rm9ybWF0dGluZ1ZhbHVlOmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLGEscyxsLGM7Zm9yKGk9MDt0Lmxlbmd0aD5pO2krKylpZihyPXRbaV0sbz1yLnRhZ3x8ci5jb250ZXh0fHxcIlwiLGE9ci5jbGFzc05hbWU/XCIuXCIrci5jbGFzc05hbWU6XCJcIixzPW8rYSxsPWUoblswXSkuY2xvc2VzdChzKVswXSl7aWYoMT09bi5sZW5ndGgpcmV0dXJuIHIudmFsdWU7Zm9yKGM9MTtuLmxlbmd0aD5jJiZlKG5bY10pLmNsb3Nlc3QocylbMF07YysrKWlmKGM9PW4ubGVuZ3RoLTEpcmV0dXJuIHIudmFsdWV9cmV0dXJuXCJcIn0sdXBkYXRlOmZ1bmN0aW9uKHQsbil7dmFyIGkscixhLGwsYyxkPWUodCkuZGF0YSh0aGlzLnR5cGUpO2lmKGQpe2ZvcihpPWQuZGF0YVNvdXJjZSxyPWkuZGF0YSgpLGM9cy5jb21tb25BbmNlc3Rvci5hcHBseShudWxsLG4pLGE9MDtyLmxlbmd0aD5hO2ErKylsPXJbYV0uY29udGV4dCxyW2FdLnZpc2libGU9IWx8fCEhZShjKS5jbG9zZXN0KGwpLmxlbmd0aDtpLmZpbHRlcihbe2ZpZWxkOlwidmlzaWJsZVwiLG9wZXJhdG9yOlwiZXFcIix2YWx1ZTohMH1dKSxvLmZuLnVwZGF0ZS5jYWxsKHRoaXMsdCxuKSxkLnZhbHVlKHRoaXMuZ2V0Rm9ybWF0dGluZ1ZhbHVlKGkudmlldygpLG4pKSxkLndyYXBwZXIudG9nZ2xlQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIsIWkudmlldygpLmxlbmd0aCl9fX0pLGg9YS5leHRlbmQoe2V4ZWM6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMubG9ja1JhbmdlKCEwKSxpPXRoaXMub3B0aW9ucy5yZW1vdmV8fFwic3Ryb25nLGVtLHNwYW5cIi5zcGxpdChcIixcIik7Yy53cmFwU2VsZWN0ZWRFbGVtZW50cyh0KSxlPW5ldyBuLlJhbmdlSXRlcmF0b3IodCksZS50cmF2ZXJzZShmdW5jdGlvbiByKGUpe2lmKGUmJiFzLmlzTWFya2VyKGUpKXtpZigxPT1lLm5vZGVUeXBlJiYhcy5pbnNpZ25pZmljYW50KGUpKXtmb3IodmFyIHQ9ZS5jaGlsZE5vZGVzLmxlbmd0aC0xO3Q+PTA7dC0tKXIoZS5jaGlsZE5vZGVzW3RdKTtlLnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIpLGUucmVtb3ZlQXR0cmlidXRlKFwiY2xhc3NcIil9aS5pbmRleE9mKHMubmFtZShlKSk+LTEmJnMudW53cmFwKGUpfX0pLHRoaXMucmVsZWFzZVJhbmdlKHQpfX0pO2UuZXh0ZW5kKG4se0Zvcm1hdHRpbmdUb29sOnUsQ2xlYW5Gb3JtYXRDb21tYW5kOmh9KSxkKFwiZm9ybWF0dGluZ1wiLG5ldyB1KHt0ZW1wbGF0ZTpuZXcgcih7dGVtcGxhdGU6bC5kcm9wRG93bkxpc3RUZW1wbGF0ZSx0aXRsZTpcIkZvcm1hdFwifSl9KSksZChcImNsZWFuRm9ybWF0dGluZ1wiLG5ldyBpKHtjb21tYW5kOmgsdGVtcGxhdGU6bmV3IHIoe3RlbXBsYXRlOmwuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJDbGVhbiBmb3JtYXR0aW5nXCJ9KX0pKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQ9d2luZG93LmtlbmRvLG49dC51aSxpPW4uZWRpdG9yLHI9bi5XaWRnZXQsbz1lLmV4dGVuZCxhPWUucHJveHkscz10LmtleXMsbD1cIi5rZW5kb0VkaXRvclwiLGM9XCJhLmstdG9vbDpub3QoLmstc3RhdGUtZGlzYWJsZWQpLC5rLXdpZGdldC5rLWNvbG9ycGlja2VyLC5rLXNlbGVjdGJveCwuay1kcm9wZG93biwuay1jb21ib2JveCAuay1pbnB1dFwiLGQ9ci5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3Q9byh7fSx0LHtuYW1lOlwiRWRpdG9yVG9vbGJhclwifSksci5mbi5pbml0LmNhbGwobixlLHQpLHQucG9wdXAmJm4uX2luaXRQb3B1cCgpfSxldmVudHM6W1wiZXhlY3V0ZVwiXSxncm91cHM6e2Jhc2ljOltcImJvbGRcIixcIml0YWxpY1wiLFwidW5kZXJsaW5lXCIsXCJzdHJpa2V0aHJvdWdoXCJdLHNjcmlwdHM6W1wic3Vic2NyaXB0XCIsXCJzdXBlcnNjcmlwdFwiXSxhbGlnbm1lbnQ6W1wianVzdGlmeUxlZnRcIixcImp1c3RpZnlDZW50ZXJcIixcImp1c3RpZnlSaWdodFwiLFwianVzdGlmeUZ1bGxcIl0sbGlua3M6W1wiaW5zZXJ0SW1hZ2VcIixcImluc2VydEZpbGVcIixcImNyZWF0ZUxpbmtcIixcInVubGlua1wiXSxsaXN0czpbXCJpbnNlcnRVbm9yZGVyZWRMaXN0XCIsXCJpbnNlcnRPcmRlcmVkTGlzdFwiLFwiaW5kZW50XCIsXCJvdXRkZW50XCJdLHRhYmxlczpbXCJjcmVhdGVUYWJsZVwiLFwiYWRkQ29sdW1uTGVmdFwiLFwiYWRkQ29sdW1uUmlnaHRcIixcImFkZFJvd0Fib3ZlXCIsXCJhZGRSb3dCZWxvd1wiLFwiZGVsZXRlUm93XCIsXCJkZWxldGVDb2x1bW5cIl0sYWR2YW5jZWQ6W1widmlld0h0bWxcIixcImNsZWFuRm9ybWF0dGluZ1wiXX0sX2luaXRQb3B1cDpmdW5jdGlvbigpe3RoaXMud2luZG93PWUodGhpcy5lbGVtZW50KS53cmFwKFwiPGRpdiBjbGFzcz0nZWRpdG9yVG9vbGJhcldpbmRvdyBrLWhlYWRlcicgLz5cIikucGFyZW50KCkucHJlcGVuZChcIjxidXR0b24gY2xhc3M9J2stYnV0dG9uIGstYnV0dG9uLWJhcmUgay1lZGl0b3J0b29sYmFyLWRyYWdIYW5kbGUnPjxzcGFuIGNsYXNzPSdrLWljb24gay1pLW1vdmUnIC8+PC9idXR0b24+XCIpLmtlbmRvV2luZG93KHt0aXRsZTohMSxyZXNpemFibGU6ITEsZHJhZ2dhYmxlOntkcmFnSGFuZGxlOlwiLmstZWRpdG9ydG9vbGJhci1kcmFnSGFuZGxlXCJ9LGFuaW1hdGlvbjp7b3Blbjp7ZWZmZWN0czpcImZhZGU6aW5cIn0sY2xvc2U6e2VmZmVjdHM6XCJmYWRlOm91dFwifX0sbWluSGVpZ2h0OjQyLHZpc2libGU6ITEsYXV0b0ZvY3VzOiExLGFjdGlvbnM6W10sZHJhZ2VuZDpmdW5jdGlvbigpe3RoaXMuX21vdmVkPSEwfX0pLm9uKFwibW91c2Vkb3duXCIsZnVuY3Rpb24odCl7ZSh0LnRhcmdldCkuaXMoXCIuay1pY29uXCIpfHx0LnByZXZlbnREZWZhdWx0KCl9KS5kYXRhKFwia2VuZG9XaW5kb3dcIil9LGl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudC5jaGlsZHJlbigpLmZpbmQoXCI+ICosIHNlbGVjdFwiKX0sZm9jdXNlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnQuZmluZChcIi5rLXN0YXRlLWZvY3VzZWRcIikubGVuZ3RoPjB9LHRvb2xCeUlkOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy50b29scztmb3IodCBpbiBuKWlmKHQudG9Mb3dlckNhc2UoKT09ZSlyZXR1cm4gblt0XX0sdG9vbEdyb3VwRm9yOmZ1bmN0aW9uKHQpe3ZhciBuLGk9dGhpcy5ncm91cHM7aWYodGhpcy5pc0N1c3RvbVRvb2wodCkpcmV0dXJuXCJjdXN0b21cIjtmb3IobiBpbiBpKWlmKGUuaW5BcnJheSh0LGlbbl0pPj0wKXJldHVybiBufSxiaW5kVG86ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPW4ud2luZG93O24uX2VkaXRvciYmbi5fZWRpdG9yLnVuYmluZChcInNlbGVjdFwiLGEobi5yZWZyZXNoVG9vbHMsbikpLG4uX2VkaXRvcj10LG4udG9vbHM9bi5leHBhbmRUb29scyh0Lm9wdGlvbnMudG9vbHMpLG4ucmVuZGVyKCksbi5lbGVtZW50LmZpbmQoXCIuay1jb21ib2JveCAuay1pbnB1dFwiKS5rZXlkb3duKGZ1bmN0aW9uKHQpe3ZhciBuPWUodGhpcykuY2xvc2VzdChcIi5rLWNvbWJvYm94XCIpLmRhdGEoXCJrZW5kb0NvbWJvQm94XCIpLGk9dC5rZXlDb2RlO2k9PXMuUklHSFR8fGk9PXMuTEVGVD9uLmNsb3NlKCk6aT09cy5ET1dOJiYobi5kcm9wRG93bi5pc09wZW5lZCgpfHwodC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxuLm9wZW4oKSkpfSksbi5fYXR0YWNoRXZlbnRzKCksbi5pdGVtcygpLmVhY2goZnVuY3Rpb24oKXt2YXIgaSxyPW4uX3Rvb2xOYW1lKHRoaXMpLG89bi50b29sc1tyXSxhPW8mJm8ub3B0aW9ucyxzPXQub3B0aW9ucy5tZXNzYWdlcyxsPWEmJmEudG9vbHRpcHx8c1tyXSxjPWUodGhpcyk7byYmby5pbml0aWFsaXplJiYoKFwiZm9udFNpemVcIj09cnx8XCJmb250TmFtZVwiPT1yKSYmKGk9c1tyK1wiSW5oZXJpdFwiXSxjLmZpbmQoXCJpbnB1dFwiKS52YWwoaSkuZW5kKCkuZmluZChcInNwYW4uay1pbnB1dFwiKS50ZXh0KGkpLmVuZCgpKSxvLmluaXRpYWxpemUoYyx7dGl0bGU6bi5fYXBwZW5kU2hvcnRjdXRTZXF1ZW5jZShsLG8pLGVkaXRvcjpuLl9lZGl0b3J9KSxjLmNsb3Nlc3QoXCIuay13aWRnZXRcIixuLmVsZW1lbnQpLmFkZENsYXNzKFwiay1lZGl0b3Itd2lkZ2V0XCIpLGMuY2xvc2VzdChcIi5rLWNvbG9ycGlja2VyXCIsbi5lbGVtZW50KS5uZXh0KFwiLmstY29sb3JwaWNrZXJcIikuYWRkQ2xhc3MoXCJrLWVkaXRvci13aWRnZXRcIikpfSksdC5iaW5kKFwic2VsZWN0XCIsYShuLnJlZnJlc2hUb29scyxuKSksbi51cGRhdGUoKSxpJiZpLndyYXBwZXIuY3NzKHt0b3A6XCJcIixsZWZ0OlwiXCIsd2lkdGg6XCJcIn0pfSxzaG93OmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGk9dGhpcyxyPWkud2luZG93LG89aS5vcHRpb25zLmVkaXRvcjtyJiYoZT1yLndyYXBwZXIsdD1vLmVsZW1lbnQsZS5pcyhcIjp2aXNpYmxlXCIpJiZpLndpbmRvdy5vcHRpb25zLnZpc2libGV8fChlWzBdLnN0eWxlLndpZHRofHxlLndpZHRoKHQub3V0ZXJXaWR0aCgpLXBhcnNlSW50KGUuY3NzKFwiYm9yZGVyLWxlZnQtd2lkdGhcIiksMTApLXBhcnNlSW50KGUuY3NzKFwiYm9yZGVyLXJpZ2h0LXdpZHRoXCIpLDEwKSksci5fbW92ZWR8fChuPXQub2Zmc2V0KCksZS5jc3Moe3RvcDpNYXRoLm1heCgwLHBhcnNlSW50KG4udG9wLDEwKS1lLm91dGVySGVpZ2h0KCktcGFyc2VJbnQoaS53aW5kb3cuZWxlbWVudC5jc3MoXCJwYWRkaW5nLWJvdHRvbVwiKSwxMCkpLGxlZnQ6TWF0aC5tYXgoMCxwYXJzZUludChuLmxlZnQsMTApKX0pKSxyLm9wZW4oKSkpfSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy53aW5kb3cmJnRoaXMud2luZG93LmNsb3NlKCl9LGZvY3VzOmZ1bmN0aW9uKCl7dmFyIGU9XCJ0YWJJbmRleFwiLHQ9dGhpcy5lbGVtZW50LG49dGhpcy5fZWRpdG9yLmVsZW1lbnQuYXR0cihlKTt0LmF0dHIoZSxufHwwKS5mb2N1cygpLmZpbmQoYykuZmlyc3QoKS5mb2N1cygpLG58fDA9PT1ufHx0LnJlbW92ZUF0dHIoZSl9LF9hcHBlbmRTaG9ydGN1dFNlcXVlbmNlOmZ1bmN0aW9uKGUsdCl7aWYoIXQua2V5KXJldHVybiBlO3ZhciBuPWUrXCIgKFwiO3JldHVybiB0LmN0cmwmJihuKz1cIkN0cmwgKyBcIiksdC5zaGlmdCYmKG4rPVwiU2hpZnQgKyBcIiksdC5hbHQmJihuKz1cIkFsdCArIFwiKSxuKz10LmtleStcIilcIn0sX25hdGl2ZVRvb2xzOltcImluc2VydExpbmVCcmVha1wiLFwiaW5zZXJ0UGFyYWdyYXBoXCIsXCJyZWRvXCIsXCJ1bmRvXCJdLHRvb2xzOnt9LGlzQ3VzdG9tVG9vbDpmdW5jdGlvbihlKXtyZXR1cm4hKGUgaW4gdC51aS5FZGl0b3IuZGVmYXVsdFRvb2xzKX0sZXhwYW5kVG9vbHM6ZnVuY3Rpb24obil7dmFyIHIsYSxzLGwsYz10aGlzLl9uYXRpdmVUb29scyxkPXQuZGVlcEV4dGVuZCh7fSx0LnVpLkVkaXRvci5kZWZhdWx0VG9vbHMpLHU9e307Zm9yKGE9MDtuLmxlbmd0aD5hO2ErKylyPW5bYV0sbD1yLm5hbWUsZS5pc1BsYWluT2JqZWN0KHIpP2wmJmRbbF0/KHVbbF09byh7fSxkW2xdKSxvKHVbbF0ub3B0aW9ucyxyKSk6KHM9byh7Y3NzQ2xhc3M6XCJrLWktY3VzdG9tXCIsdHlwZTpcImJ1dHRvblwiLHRpdGxlOlwiXCJ9LHIpLHMubmFtZXx8KHMubmFtZT1cImN1c3RvbVwiKSxzLmNzc0NsYXNzPVwiay1cIisoXCJjdXN0b21cIj09cy5uYW1lP1wiaS1jdXN0b21cIjpzLm5hbWUpLHMudGVtcGxhdGV8fFwiYnV0dG9uXCIhPXMudHlwZXx8KHMudGVtcGxhdGU9aS5FZGl0b3JVdGlscy5idXR0b25UZW1wbGF0ZSxzLnRpdGxlPXMudGl0bGV8fHMudG9vbHRpcCksdVtsXT17b3B0aW9uczpzfSk6ZFtyXSYmKHVbcl09ZFtyXSk7Zm9yKGE9MDtjLmxlbmd0aD5hO2ErKyl1W2NbYV1dfHwodVtjW2FdXT1kW2NbYV1dKTtyZXR1cm4gdX0scmVuZGVyOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuKXt2YXIgaTtyZXR1cm4gbi5nZXRIdG1sP2k9bi5nZXRIdG1sKCk6KGUuaXNGdW5jdGlvbihuKXx8KG49dC50ZW1wbGF0ZShuKSksaT1uKG8pKSxlLnRyaW0oaSl9ZnVuY3Rpb24gaSgpe2guY2hpbGRyZW4oKS5sZW5ndGgmJmguYXBwZW5kVG8odil9ZnVuY3Rpb24gcigpe2g9ZShcIjxsaSBjbGFzcz0nay10b29sLWdyb3VwJyByb2xlPSdwcmVzZW50YXRpb24nIC8+XCIpfXZhciBvLHMsbCxjLGQsdSxoLHAsZj10aGlzLGc9Zi50b29scyxtPWYuX2VkaXRvci5lbGVtZW50LHY9Zi5lbGVtZW50LmVtcHR5KCksXz1mLl9lZGl0b3Iub3B0aW9ucy50b29scyx5PXQuc3VwcG9ydC5icm93c2VyO2Zvcih2LmVtcHR5KCkscigpLHA9MDtfLmxlbmd0aD5wO3ArKyljPV9bcF0ubmFtZXx8X1twXSxvPWdbY10mJmdbY10ub3B0aW9ucywhbyYmZS5pc1BsYWluT2JqZWN0KGMpJiYobz1jKSxzPW8mJm8udGVtcGxhdGUsXCJicmVha1wiPT1jJiYoaSgpLGUoXCI8bGkgY2xhc3M9J2stcm93LWJyZWFrJyAvPlwiKS5hcHBlbmRUbyhmLmVsZW1lbnQpLHIoKSkscyYmKHU9Zi50b29sR3JvdXBGb3IoYyksZCE9dSYmKGkoKSxyKCksZD11KSxzPW4ocyksbD1lKHMpLmFwcGVuZFRvKGgpLFwiY3VzdG9tXCI9PXUmJihpKCkscigpKSxvLmV4ZWMmJmwuaGFzQ2xhc3MoXCJrLXRvb2xcIikmJmwuY2xpY2soYShvLmV4ZWMsbVswXSkpKTtpKCksZShmLmVsZW1lbnQpLmNoaWxkcmVuKFwiOmhhcyg+IC5rLXRvb2wpXCIpLmFkZENsYXNzKFwiay1idXR0b24tZ3JvdXBcIiksZi5vcHRpb25zLnBvcHVwJiZ5Lm1zaWUmJjk+eS52ZXJzaW9uJiZmLndpbmRvdy53cmFwcGVyLmZpbmQoXCIqXCIpLmF0dHIoXCJ1bnNlbGVjdGFibGVcIixcIm9uXCIpLGYudXBkYXRlR3JvdXBzKCksZi5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmYuZWxlbWVudH19KX0sdXBkYXRlR3JvdXBzOmZ1bmN0aW9uKCl7ZSh0aGlzLmVsZW1lbnQpLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpe2UodGhpcykuY2hpbGRyZW4oKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm5cIm5vbmVcIiE9PXRoaXMuc3R5bGUuZGlzcGxheX0pLnJlbW92ZUNsYXNzKFwiay1ncm91cC1lbmRcIikuZmlyc3QoKS5hZGRDbGFzcyhcImstZ3JvdXAtc3RhcnRcIikuZW5kKCkubGFzdCgpLmFkZENsYXNzKFwiay1ncm91cC1lbmRcIikuZW5kKCl9KX0sZGVjb3JhdGVGcm9tOmZ1bmN0aW9uKHQpe3RoaXMuaXRlbXMoKS5maWx0ZXIoXCIuay1kZWNvcmF0ZWRcIikuZWFjaChmdW5jdGlvbigpe3ZhciBuPWUodGhpcykuZGF0YShcImtlbmRvU2VsZWN0Qm94XCIpO24mJm4uZGVjb3JhdGUodCl9KX0sZGVzdHJveTpmdW5jdGlvbigpe3IuZm4uZGVzdHJveS5jYWxsKHRoaXMpO3ZhciBlLHQ9dGhpcy50b29scztmb3IoZSBpbiB0KXRbZV0uZGVzdHJveSYmdFtlXS5kZXN0cm95KCk7dGhpcy53aW5kb3cmJnRoaXMud2luZG93LmRlc3Ryb3koKX0sX2F0dGFjaEV2ZW50czpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj1cIltyb2xlPWJ1dHRvbl0uay10b29sXCIsaT1uK1wiOm5vdCguay1zdGF0ZS1kaXNhYmxlZClcIixyPW4rXCIuay1zdGF0ZS1kaXNhYmxlZFwiO3QuZWxlbWVudC5vZmYobCkub24oXCJtb3VzZWVudGVyXCIrbCxpLGZ1bmN0aW9uKCl7ZSh0aGlzKS5hZGRDbGFzcyhcImstc3RhdGUtaG92ZXJcIil9KS5vbihcIm1vdXNlbGVhdmVcIitsLGksZnVuY3Rpb24oKXtlKHRoaXMpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1ob3ZlclwiKX0pLm9uKFwibW91c2Vkb3duXCIrbCxuLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX0pLm9uKFwia2V5ZG93blwiK2wsYyxmdW5jdGlvbihuKXtmdW5jdGlvbiBpKGUsbil7dmFyIGk9dC5lbGVtZW50LmZpbmQoYykscj1pLmluZGV4KG8pK2U7cmV0dXJuIG4mJihyPU1hdGgubWF4KDAsTWF0aC5taW4oaS5sZW5ndGgtMSxyKSkpLGlbcl19dmFyIHIsbz10aGlzLGE9bi5rZXlDb2RlO2E9PXMuUklHSFR8fGE9PXMuTEVGVD9lKG8pLmhhc0NsYXNzKFwiLmstZHJvcGRvd25cIil8fChyPWkoYT09cy5SSUdIVD8xOi0xLCEwKSk6YT09cy5FU0M/cj10Ll9lZGl0b3I6YSE9cy5UQUJ8fG4uY3RybEtleXx8bi5hbHRLZXl8fChuLnNoaWZ0S2V5P3I9aSgtMSk6KHI9aSgxKSxyfHwocj10Ll9lZGl0b3IpKSksciYmKG4ucHJldmVudERlZmF1bHQoKSxyLmZvY3VzKCkpfSkub24oXCJjbGlja1wiK2wsaSxmdW5jdGlvbihuKXt2YXIgaT1lKHRoaXMpO24ucHJldmVudERlZmF1bHQoKSxuLnN0b3BQcm9wYWdhdGlvbigpLGkucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWhvdmVyXCIpLGkuaXMoXCJbZGF0YS1wb3B1cF1cIil8fHQuX2VkaXRvci5leGVjKHQuX3Rvb2xOYW1lKHRoaXMpKX0pLm9uKFwiY2xpY2tcIitsLHIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSl9LF90b29sTmFtZTpmdW5jdGlvbih0KXt2YXIgbixpO2lmKHQpcmV0dXJuIG49dC5jbGFzc05hbWUsL2stdG9vbFxcYi9pLnRlc3QobikmJihuPXQuZmlyc3RDaGlsZC5jbGFzc05hbWUpLGk9ZS5ncmVwKG4uc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGUpe3JldHVybiEvXmstKHdpZGdldHx0b29sfHRvb2wtaWNvbnxzdGF0ZS1ob3ZlcnxoZWFkZXJ8Y29tYm9ib3h8ZHJvcGRvd258c2VsZWN0Ym94fGNvbG9ycGlja2VyKSQvaS50ZXN0KGUpfSksaVswXT9pWzBdLnN1YnN0cmluZyhpWzBdLmxhc3RJbmRleE9mKFwiLVwiKSsxKTpcImN1c3RvbVwifSxyZWZyZXNoVG9vbHM6ZnVuY3Rpb24oKXt2YXIgbj10aGlzLGk9bi5fZWRpdG9yLHI9aS5nZXRSYW5nZSgpLG89dC51aS5lZGl0b3IuUmFuZ2VVdGlscy50ZXh0Tm9kZXMocik7by5sZW5ndGh8fChvPVtyLnN0YXJ0Q29udGFpbmVyXSksbi5pdGVtcygpLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1uLnRvb2xzW24uX3Rvb2xOYW1lKHRoaXMpXTt0JiZ0LnVwZGF0ZSYmdC51cGRhdGUoZSh0aGlzKSxvKX0pLHRoaXMudXBkYXRlKCl9LHVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5jaGlsZHJlbigpLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7dC5jc3MoXCJkaXNwbGF5XCIsdC5oYXNDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIik/XCJub25lXCI6XCJcIil9KSx0aGlzLnVwZGF0ZUdyb3VwcygpfX0pO2UuZXh0ZW5kKGkse1Rvb2xiYXI6ZH0pfSh3aW5kb3cualF1ZXJ5KSxmdW5jdGlvbihlKXt2YXIgdD13aW5kb3cua2VuZG8sbj1lLmV4dGVuZCxpPWUucHJveHkscj10LnVpLmVkaXRvcixvPXIuRG9tLGE9ci5FZGl0b3JVdGlscyxzPXIuUmFuZ2VVdGlscyxsPXIuQ29tbWFuZCxjPVwiLmtlbmRvRWRpdG9yXCIsZD1cImstc3RhdGUtYWN0aXZlXCIsdT1cImstc3RhdGUtc2VsZWN0ZWRcIixoPXIuVG9vbCxwPXIuVG9vbFRlbXBsYXRlLGY9ci5JbnNlcnRIdG1sQ29tbWFuZCxnPXIuQmxvY2tGb3JtYXRGaW5kZXIsbT1yLkVkaXRvclV0aWxzLnJlZ2lzdGVyVG9vbCx2PVwiPHRkPlwiK3IuZW1wdHlFbGVtZW50Q29udGVudCtcIjwvdGQ+XCIsXz1uZXcgZyhbe3RhZ3M6W1widGFibGVcIl19XSkseT1mLmV4dGVuZCh7X3RhYmxlSHRtbDpmdW5jdGlvbihlLHQpe3JldHVybiBlPWV8fDEsdD10fHwxLFwiPHRhYmxlIGNsYXNzPSdrLXRhYmxlJyBkYXRhLWxhc3Q+XCIrQXJyYXkoZSsxKS5qb2luKFwiPHRyPlwiK0FycmF5KHQrMSkuam9pbih2KStcIjwvdHI+XCIpK1wiPC90YWJsZT5cIn0scG9zdFByb2Nlc3M6ZnVuY3Rpb24odCxuKXt2YXIgaT1lKFwidGFibGVbZGF0YS1sYXN0XVwiLHQuZG9jdW1lbnQpLnJlbW92ZUF0dHIoXCJkYXRhLWxhc3RcIik7bi5zZWxlY3ROb2RlQ29udGVudHMoaS5maW5kKFwidGRcIilbMF0pLHQuc2VsZWN0UmFuZ2Uobil9LGV4ZWM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnM7ZS5odG1sPXRoaXMuX3RhYmxlSHRtbChlLnJvd3MsZS5jb2x1bW5zKSxlLnBvc3RQcm9jZXNzPXRoaXMucG9zdFByb2Nlc3MsZi5mbi5leGVjLmNhbGwodGhpcyl9fSksdz1oLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0LG4pe2guZm4uaW5pdGlhbGl6ZS5jYWxsKHRoaXMsdCxuKTt2YXIgcj1lKHRoaXMub3B0aW9ucy5wb3B1cFRlbXBsYXRlKS5hcHBlbmRUbyhcImJvZHlcIikua2VuZG9Qb3B1cCh7YW5jaG9yOnQsY29weUFuY2hvclN0eWxlczohMSxvcGVuOmkodGhpcy5fb3Blbix0aGlzKSxhY3RpdmF0ZTppKHRoaXMuX2FjdGl2YXRlLHRoaXMpLGNsb3NlOmkodGhpcy5fY2xvc2UsdGhpcyl9KS5kYXRhKFwia2VuZG9Qb3B1cFwiKTt0LmNsaWNrKGkodGhpcy5fdG9nZ2xlLHRoaXMpKS5rZXlkb3duKGkodGhpcy5fa2V5ZG93bix0aGlzKSksdGhpcy5fZWRpdG9yPW4uZWRpdG9yLHRoaXMuX3BvcHVwPXJ9LHBvcHVwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BvcHVwfSxfYWN0aXZhdGU6ZS5ub29wLF9vcGVuOmZ1bmN0aW9uKCl7dGhpcy5fcG9wdXAub3B0aW9ucy5hbmNob3IuYWRkQ2xhc3MoZCl9LF9jbG9zZTpmdW5jdGlvbigpe3RoaXMuX3BvcHVwLm9wdGlvbnMuYW5jaG9yLnJlbW92ZUNsYXNzKGQpfSxfa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgbj10LmtleXMsaT1lLmtleUNvZGU7aT09bi5ET1dOJiZlLmFsdEtleT90aGlzLl9wb3B1cC5vcGVuKCk6aT09bi5FU0MmJnRoaXMuX3BvcHVwLmNsb3NlKCl9LF90b2dnbGU6ZnVuY3Rpb24odCl7dmFyIG49ZSh0LnRhcmdldCkuY2xvc2VzdChcIi5rLXRvb2xcIik7bi5oYXNDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIil8fHRoaXMucG9wdXAoKS50b2dnbGUoKX0sdXBkYXRlOmZ1bmN0aW9uKGUpe3RoaXMucG9wdXAoKS5jbG9zZSgpLGUucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWhvdmVyXCIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fcG9wdXAuZGVzdHJveSgpfX0pLGI9dy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCl7dGhpcy5jb2xzPTgsdGhpcy5yb3dzPTYsdy5mbi5pbml0LmNhbGwodGhpcyxlLmV4dGVuZCh0LHtjb21tYW5kOnkscG9wdXBUZW1wbGF0ZTpcIjxkaXYgY2xhc3M9J2stY3QtcG9wdXAnPlwiK0FycmF5KHRoaXMuY29scyp0aGlzLnJvd3MrMSkuam9pbihcIjxzcGFuIGNsYXNzPSdrLWN0LWNlbGwgay1zdGF0ZS1kaXNhYmxlZCcgLz5cIikrXCI8ZGl2IGNsYXNzPSdrLXN0YXR1cyc+PC9kaXY+PC9kaXY+XCJ9KSl9LF9hY3RpdmF0ZTpmdW5jdGlvbigpe2Z1bmN0aW9uIG4odCl7dmFyIG49ZSh3aW5kb3cpO3JldHVybntyb3c6TWF0aC5mbG9vcigodC5jbGllbnRZK24uc2Nyb2xsVG9wKCktdS50b3ApL3IpKzEsY29sOk1hdGguZmxvb3IoKHQuY2xpZW50WCtuLnNjcm9sbExlZnQoKS11LmxlZnQpL2kpKzF9fXZhciBpLHIsbz10aGlzLGE9by5fcG9wdXAuZWxlbWVudCxzPWEuZmluZChcIi5rLWN0LWNlbGxcIiksbD1zLmVxKDApLGQ9cy5lcShzLmxlbmd0aC0xKSx1PXQuZ2V0T2Zmc2V0KGwpLGg9dC5nZXRPZmZzZXQoZCkscD1vLmNvbHMsZj1vLnJvd3M7aC5sZWZ0Kz1kWzBdLm9mZnNldFdpZHRoLGgudG9wKz1kWzBdLm9mZnNldEhlaWdodCxpPShoLmxlZnQtdS5sZWZ0KS9wLHI9KGgudG9wLXUudG9wKS9mLGEub24oXCJtb3VzZW1vdmVcIitjLGZ1bmN0aW9uKGUpe28uX3NldFRhYmxlU2l6ZShuKGUpKX0pLm9uKFwibW91c2VsZWF2ZVwiK2MsZnVuY3Rpb24oKXtvLl9zZXRUYWJsZVNpemUoKX0pLm9uKFwibW91c2V1cFwiK2MsZnVuY3Rpb24oZSl7by5fZXhlYyhuKGUpKX0pfSxfdmFsaWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUucm93PjAmJmUuY29sPjAmJnRoaXMucm93cz49ZS5yb3cmJnRoaXMuY29scz49ZS5jb2x9LF9leGVjOmZ1bmN0aW9uKGUpe3RoaXMuX3ZhbGlkKGUpJiYodGhpcy5fZWRpdG9yLmV4ZWMoXCJjcmVhdGVUYWJsZVwiLHtyb3dzOmUucm93LGNvbHVtbnM6ZS5jb2x9KSx0aGlzLl9wb3B1cC5jbG9zZSgpKX0sX3NldFRhYmxlU2l6ZTpmdW5jdGlvbihuKXt2YXIgaT10aGlzLl9wb3B1cC5lbGVtZW50LHI9aS5maW5kKFwiLmstc3RhdHVzXCIpLG89aS5maW5kKFwiLmstY3QtY2VsbFwiKSxhPXRoaXMuY29scyxzPXRoaXMuX2VkaXRvci5vcHRpb25zLm1lc3NhZ2VzO3RoaXMuX3ZhbGlkKG4pPyhyLnRleHQodC5mb3JtYXQocy5jcmVhdGVUYWJsZUhpbnQsbi5yb3csbi5jb2wpKSxvLmVhY2goZnVuY3Rpb24odCl7ZSh0aGlzKS50b2dnbGVDbGFzcyh1LG4uY29sPnQlYSYmbi5yb3c+dC9hKX0pKTooci50ZXh0KHMuZGlhbG9nQ2FuY2VsKSxvLnJlbW92ZUNsYXNzKHUpKX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIG4saSxyLG8sYSxzLGwsYzt3LmZuLl9rZXlkb3duLmNhbGwodGhpcyxlKSxuPXQua2V5cyxpPWUua2V5Q29kZSxyPXRoaXMuX3BvcHVwLmVsZW1lbnQuZmluZChcIi5rLWN0LWNlbGxcIiksbz1NYXRoLm1heChyLmZpbHRlcihcIi5rLXN0YXRlLXNlbGVjdGVkXCIpLmxhc3QoKS5pbmRleCgpLDApLGE9TWF0aC5mbG9vcihvL3RoaXMuY29scykscz1vJXRoaXMuY29scyxsPSExLGkhPW4uRE9XTnx8ZS5hbHRLZXk/aT09bi5VUD8obD0hMCxhLS0pOmk9PW4uUklHSFQ/KGw9ITAscysrKTppPT1uLkxFRlQmJihsPSEwLHMtLSk6KGw9ITAsYSsrKSxjPXtyb3c6TWF0aC5tYXgoMSxNYXRoLm1pbih0aGlzLnJvd3MsYSsxKSksY29sOk1hdGgubWF4KDEsTWF0aC5taW4odGhpcy5jb2xzLHMrMSkpfSxpPT1uLkVOVEVSP3RoaXMuX2V4ZWMoYyk6dGhpcy5fc2V0VGFibGVTaXplKGMpLGwmJihlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSl9LF9vcGVuOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZWRpdG9yLm9wdGlvbnMubWVzc2FnZXM7dy5mbi5fb3Blbi5jYWxsKHRoaXMpLHRoaXMucG9wdXAoKS5lbGVtZW50LmZpbmQoXCIuay1zdGF0dXNcIikudGV4dChlLmRpYWxvZ0NhbmNlbCkuZW5kKCkuZmluZChcIi5rLWN0LWNlbGxcIikucmVtb3ZlQ2xhc3ModSl9LF9jbG9zZTpmdW5jdGlvbigpe3cuZm4uX2Nsb3NlLmNhbGwodGhpcyksdGhpcy5wb3B1cCgpLmVsZW1lbnQub2ZmKGMpfSx1cGRhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbjt3LmZuLnVwZGF0ZS5jYWxsKHRoaXMsZSksbj1fLmlzRm9ybWF0dGVkKHQpLGUudG9nZ2xlQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIsbil9fSksaz1sLmV4dGVuZCh7ZXhlYzpmdW5jdGlvbigpe2Zvcih2YXIgZSx0LG4saSxhPXRoaXMubG9ja1JhbmdlKCEwKSxzPWEuZW5kQ29udGFpbmVyO1widGRcIiE9by5uYW1lKHMpOylzPXMucGFyZW50Tm9kZTtmb3IodD1zLnBhcmVudE5vZGUsZT10LmNoaWxkcmVuLmxlbmd0aCxuPXQuY2xvbmVOb2RlKCEwKSxpPTA7dC5jZWxscy5sZW5ndGg+aTtpKyspbi5jZWxsc1tpXS5pbm5lckhUTUw9ci5lbXB0eUVsZW1lbnRDb250ZW50O1wiYmVmb3JlXCI9PXRoaXMub3B0aW9ucy5wb3NpdGlvbj9vLmluc2VydEJlZm9yZShuLHQpOm8uaW5zZXJ0QWZ0ZXIobix0KSx0aGlzLnJlbGVhc2VSYW5nZShhKX19KSx4PWwuZXh0ZW5kKHtleGVjOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGksYT10aGlzLmxvY2tSYW5nZSghMCkscz1vLmNsb3Nlc3QoYS5lbmRDb250YWluZXIsXCJ0ZFwiKSxsPW8uY2xvc2VzdChzLFwidGFibGVcIiksYz1sLnJvd3MsZD10aGlzLm9wdGlvbnMucG9zaXRpb247Zm9yKGU9by5maW5kTm9kZUluZGV4KHMpLHQ9MDtjLmxlbmd0aD50O3QrKyluPWNbdF0uY2VsbHNbZV0saT1uLmNsb25lTm9kZSgpLGkuaW5uZXJIVE1MPXIuZW1wdHlFbGVtZW50Q29udGVudCxcImJlZm9yZVwiPT1kP28uaW5zZXJ0QmVmb3JlKGksbik6by5pbnNlcnRBZnRlcihpLG4pO3RoaXMucmVsZWFzZVJhbmdlKGEpfX0pLEM9bC5leHRlbmQoe2V4ZWM6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscj10aGlzLmxvY2tSYW5nZSgpLGE9cy5tYXBBbGwocixmdW5jdGlvbih0KXtyZXR1cm4gZSh0KS5jbG9zZXN0KFwidHJcIilbMF19KSxsPW8uY2xvc2VzdChhWzBdLFwidGFibGVcIik7aWYoYS5sZW5ndGg+PWwucm93cy5sZW5ndGgpdD1vLm5leHQobCksKCF0fHxvLmluc2lnbmlmaWNhbnQodCkpJiYodD1vLnByZXYobCkpLG8ucmVtb3ZlKGwpO2Vsc2UgZm9yKG49MDthLmxlbmd0aD5uO24rKylpPWFbbl0sby5yZW1vdmVUZXh0U2libGluZ3MoaSksdD1vLm5leHQoaSl8fG8ucHJldihpKSx0PXQuY2VsbHNbMF0sby5yZW1vdmUoaSk7dCYmKHIuc2V0U3RhcnQodCwwKSxyLmNvbGxhcHNlKCEwKSx0aGlzLmVkaXRvci5zZWxlY3RSYW5nZShyKSl9fSksUz1sLmV4dGVuZCh7ZXhlYzpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLmxvY2tSYW5nZSgpLGk9by5jbG9zZXN0KG4uZW5kQ29udGFpbmVyLFwidGRcIikscj1vLmNsb3Nlc3QoaSxcInRhYmxlXCIpLGE9ci5yb3dzLHM9by5maW5kTm9kZUluZGV4KGksITApLGw9YVswXS5jZWxscy5sZW5ndGg7aWYoMT09bCllPW8ubmV4dChyKSwoIWV8fG8uaW5zaWduaWZpY2FudChlKSkmJihlPW8ucHJldihyKSksby5yZW1vdmUocik7ZWxzZSBmb3Ioby5yZW1vdmVUZXh0U2libGluZ3MoaSksZT1vLm5leHQoaSl8fG8ucHJldihpKSx0PTA7YS5sZW5ndGg+dDt0Kyspby5yZW1vdmUoYVt0XS5jZWxsc1tzXSk7ZSYmKG4uc2V0U3RhcnQoZSwwKSxuLmNvbGxhcHNlKCEwKSx0aGlzLmVkaXRvci5zZWxlY3RSYW5nZShuKSl9fSksVD1oLmV4dGVuZCh7Y29tbWFuZDpmdW5jdGlvbihlKXtyZXR1cm4gZT1uKGUsdGhpcy5vcHRpb25zKSxcImRlbGV0ZVwiPT1lLmFjdGlvbj9cInJvd1wiPT1lLnR5cGU/bmV3IEMoZSk6bmV3IFMoZSk6XCJyb3dcIj09ZS50eXBlP25ldyBrKGUpOm5ldyB4KGUpfSxpbml0aWFsaXplOmZ1bmN0aW9uKGUsdCl7aC5mbi5pbml0aWFsaXplLmNhbGwodGhpcyxlLHQpLGUuYWRkQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIpfSx1cGRhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbj0hXy5pc0Zvcm1hdHRlZCh0KTtlLnRvZ2dsZUNsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiLG4pfX0pO24odC51aS5lZGl0b3Ise1BvcHVwVG9vbDp3LFRhYmxlQ29tbWFuZDp5LEluc2VydFRhYmxlVG9vbDpiLFRhYmxlTW9kaWZpY2F0aW9uVG9vbDpULEluc2VydFJvd0NvbW1hbmQ6ayxJbnNlcnRDb2x1bW5Db21tYW5kOngsRGVsZXRlUm93Q29tbWFuZDpDLERlbGV0ZUNvbHVtbkNvbW1hbmQ6U30pLG0oXCJjcmVhdGVUYWJsZVwiLG5ldyBiKHt0ZW1wbGF0ZTpuZXcgcCh7dGVtcGxhdGU6YS5idXR0b25UZW1wbGF0ZSxwb3B1cDohMCx0aXRsZTpcIkNyZWF0ZSB0YWJsZVwifSl9KSksbShcImFkZENvbHVtbkxlZnRcIixuZXcgVCh7dHlwZTpcImNvbHVtblwiLHBvc2l0aW9uOlwiYmVmb3JlXCIsdGVtcGxhdGU6bmV3IHAoe3RlbXBsYXRlOmEuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJBZGQgY29sdW1uIG9uIHRoZSBsZWZ0XCJ9KX0pKSxtKFwiYWRkQ29sdW1uUmlnaHRcIixuZXcgVCh7dHlwZTpcImNvbHVtblwiLHRlbXBsYXRlOm5ldyBwKHt0ZW1wbGF0ZTphLmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiQWRkIGNvbHVtbiBvbiB0aGUgcmlnaHRcIn0pfSkpLG0oXCJhZGRSb3dBYm92ZVwiLG5ldyBUKHt0eXBlOlwicm93XCIscG9zaXRpb246XCJiZWZvcmVcIix0ZW1wbGF0ZTpuZXcgcCh7dGVtcGxhdGU6YS5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIkFkZCByb3cgYWJvdmVcIn0pfSkpLG0oXCJhZGRSb3dCZWxvd1wiLG5ldyBUKHt0eXBlOlwicm93XCIsdGVtcGxhdGU6bmV3IHAoe3RlbXBsYXRlOmEuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJBZGQgcm93IGJlbG93XCJ9KX0pKSxtKFwiZGVsZXRlUm93XCIsbmV3IFQoe3R5cGU6XCJyb3dcIixhY3Rpb246XCJkZWxldGVcIix0ZW1wbGF0ZTpuZXcgcCh7dGVtcGxhdGU6YS5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIkRlbGV0ZSByb3dcIn0pfSkpLG0oXCJkZWxldGVDb2x1bW5cIixuZXcgVCh7dHlwZTpcImNvbHVtblwiLGFjdGlvbjpcImRlbGV0ZVwiLHRlbXBsYXRlOm5ldyBwKHt0ZW1wbGF0ZTphLmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiRGVsZXRlIGNvbHVtblwifSl9KSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG49d2luZG93LmtlbmRvLGk9bi5jYXJldCxyPW4ua2V5cyxvPW4udWksYT1vLldpZGdldCxzPVwiLmtlbmRvTWFza2VkVGV4dEJveFwiLGw9ZS5wcm94eSxjPShuLnN1cHBvcnQucHJvcGVydHlDaGFuZ2VFdmVudD9cInByb3BlcnR5Y2hhbmdlXCI6XCJpbnB1dFwiKStzLGQ9XCJrLXN0YXRlLWRpc2FibGVkXCIsdT1cImRpc2FibGVkXCIsaD1cInJlYWRvbmx5XCIscD1cImNoYW5nZVwiLGY9YS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxyKXt2YXIgbyxsLGM9dGhpczthLmZuLmluaXQuY2FsbChjLHQsciksYy5fcnVsZXM9ZS5leHRlbmQoe30sYy5ydWxlcyxjLm9wdGlvbnMucnVsZXMpLHQ9Yy5lbGVtZW50LG89dFswXSxjLndyYXBwZXI9dCxjLl90b2tlbml6ZSgpLGMuX3Jlc2V0KCksYy5lbGVtZW50LmFkZENsYXNzKFwiay10ZXh0Ym94XCIpLmF0dHIoXCJhdXRvY29tcGxldGVcIixcIm9mZlwiKS5vbihcImZvY3VzXCIrcyxmdW5jdGlvbigpe3ZhciBlPW8udmFsdWU7ZT9jLl90b2dnbGVQcm9tcHQoITApOm8udmFsdWU9Yy5fb2xkPWMuX2VtcHR5TWFzayxjLl9vbGRWYWx1ZT1lLGMuX3RpbWVvdXRJZD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aSh0LDAsZT9jLl9tYXNrTGVuZ3RoOjApfSl9KS5vbihcImZvY3Vzb3V0XCIrcyxmdW5jdGlvbigpe3ZhciBlPXQudmFsKCk7Y2xlYXJUaW1lb3V0KGMuX3RpbWVvdXRJZCksby52YWx1ZT1jLl9vbGQ9XCJcIixlIT09Yy5fZW1wdHlNYXNrJiYoby52YWx1ZT1jLl9vbGQ9ZSksYy5fY2hhbmdlKCksYy5fdG9nZ2xlUHJvbXB0KCl9KSxsPXQuaXMoXCJbZGlzYWJsZWRdXCIpLGw/Yy5lbmFibGUoITEpOmMucmVhZG9ubHkodC5pcyhcIltyZWFkb25seV1cIikpLGMudmFsdWUoYy5vcHRpb25zLnZhbHVlfHx0LnZhbCgpKSxuLm5vdGlmeShjKX0sb3B0aW9uczp7bmFtZTpcIk1hc2tlZFRleHRCb3hcIixwcm9tcHRDaGFyOlwiX1wiLGNsZWFyUHJvbXB0Q2hhcjohMSxjdWx0dXJlOlwiXCIscnVsZXM6e30sdmFsdWU6XCJcIixtYXNrOlwiXCJ9LGV2ZW50czpbcF0scnVsZXM6ezA6L1xcZC8sOTovXFxkfFxccy8sXCIjXCI6L1xcZHxcXHN8XFwrfFxcLS8sTDovW2EtekEtWl0vLFwiP1wiOi9bYS16QS1aXXxcXHMvLFwiJlwiOi9cXFMvLEM6Ly4vLEE6L1thLXpBLVowLTldLyxhOi9bYS16QS1aMC05XXxcXHMvfSxzZXRPcHRpb25zOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7YS5mbi5zZXRPcHRpb25zLmNhbGwobix0KSxuLl9ydWxlcz1lLmV4dGVuZCh7fSxuLnJ1bGVzLG4ub3B0aW9ucy5ydWxlcyksbi5fdG9rZW5pemUoKSx0aGlzLl91bmJpbmRJbnB1dCgpLHRoaXMuX2JpbmRJbnB1dCgpLG4udmFsdWUobi5lbGVtZW50LnZhbCgpKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5lbGVtZW50Lm9mZihzKSxlLl9mb3JtJiZlLl9mb3JtLm9mZihcInJlc2V0XCIsZS5fcmVzZXRIYW5kbGVyKSxhLmZuLmRlc3Ryb3kuY2FsbChlKX0sdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5lbGVtZW50LHI9dGhpcy5fZW1wdHlNYXNrO3JldHVybiBlPT09dD90aGlzLmVsZW1lbnQudmFsKCk6KG51bGw9PT1lJiYoZT1cIlwiKSxyPyhlPXRoaXMuX3VubWFzayhlK1wiXCIpLGkudmFsKGU/cjpcIlwiKSx0aGlzLl9tYXNrKDAsdGhpcy5fbWFza0xlbmd0aCxlKSxlPWkudmFsKCksdGhpcy5fb2xkVmFsdWU9ZSxuLl9hY3RpdmVFbGVtZW50KCkhPT1pJiYoZT09PXI/aS52YWwoXCJcIik6dGhpcy5fdG9nZ2xlUHJvbXB0KCkpLHQpOihpLnZhbChlKSx0KSl9LF90b2dnbGVQcm9tcHQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5lbGVtZW50WzBdLG49dC52YWx1ZTt0aGlzLm9wdGlvbnMuY2xlYXJQcm9tcHRDaGFyJiYobj1lP3RoaXMuX29sZFZhbHVlOm4ucmVwbGFjZShSZWdFeHAodGhpcy5vcHRpb25zLnByb21wdENoYXIsXCJnXCIpLFwiIFwiKSx0LnZhbHVlPXRoaXMuX29sZD1uKX0scmVhZG9ubHk6ZnVuY3Rpb24oZSl7dGhpcy5fZWRpdGFibGUoe3JlYWRvbmx5OmU9PT10PyEwOmUsZGlzYWJsZTohMX0pfSxlbmFibGU6ZnVuY3Rpb24oZSl7dGhpcy5fZWRpdGFibGUoe3JlYWRvbmx5OiExLGRpc2FibGU6IShlPWU9PT10PyEwOmUpfSl9LF9iaW5kSW5wdXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX21hc2tMZW5ndGgmJmUuZWxlbWVudC5vbihcImtleWRvd25cIitzLGwoZS5fa2V5ZG93bixlKSkub24oXCJrZXlwcmVzc1wiK3MsbChlLl9rZXlwcmVzcyxlKSkub24oXCJwYXN0ZVwiK3MsbChlLl9wYXN0ZSxlKSkub24oYyxsKGUuX3Byb3BlcnR5Q2hhbmdlLGUpKX0sX3VuYmluZElucHV0OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50Lm9mZihcImtleWRvd25cIitzKS5vZmYoXCJrZXlwcmVzc1wiK3MpLm9mZihcInBhc3RlXCIrcykub2ZmKGMpfSxfZWRpdGFibGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudCxpPWUuZGlzYWJsZSxyPWUucmVhZG9ubHk7dC5fdW5iaW5kSW5wdXQoKSxyfHxpP24uYXR0cih1LGkpLmF0dHIoaCxyKS50b2dnbGVDbGFzcyhkLGkpOihuLnJlbW92ZUF0dHIodSkucmVtb3ZlQXR0cihoKS5yZW1vdmVDbGFzcyhkKSx0Ll9iaW5kSW5wdXQoKSl9LF9jaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS52YWx1ZSgpO3QhPT1lLl9vbGRWYWx1ZSYmKGUuX29sZFZhbHVlPXQsZS50cmlnZ2VyKHApLGUuZWxlbWVudC50cmlnZ2VyKHApKX0sX3Byb3BlcnR5Q2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMscj1uLmVsZW1lbnRbMF0sbz1yLnZhbHVlO289PT1uLl9vbGR8fG4uX3Bhc3Rpbmd8fCh0PWkocilbMF0sZT1uLl91bm1hc2soby5zdWJzdHJpbmcodCksdCksci52YWx1ZT1uLl9vbGQ9by5zdWJzdHJpbmcoMCx0KStuLl9lbXB0eU1hc2suc3Vic3RyaW5nKHQpLG4uX21hc2sodCx0LGUpLGkocix0KSl9LF9wYXN0ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS50YXJnZXQscj1pKG4pLG89clswXSxhPXJbMV0scz10Ll91bm1hc2sobi52YWx1ZS5zdWJzdHJpbmcoYSksYSk7dC5fcGFzdGluZz0hMCxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGU9bi52YWx1ZSxyPWUuc3Vic3RyaW5nKG8saShuKVswXSk7bi52YWx1ZT10Ll9vbGQ9ZS5zdWJzdHJpbmcoMCxvKSt0Ll9lbXB0eU1hc2suc3Vic3RyaW5nKG8pLHQuX21hc2sobyxvLHIpLG89aShuKVswXSx0Ll9tYXNrKG8sbyxzKSxpKG4sbyksdC5fcGFzdGluZz0hMX0pfSxfcmVzZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5lbGVtZW50LGk9bi5hdHRyKFwiZm9ybVwiKSxyPWk/ZShcIiNcIitpKTpuLmNsb3Nlc3QoXCJmb3JtXCIpO3JbMF0mJih0Ll9yZXNldEhhbmRsZXI9ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC52YWx1ZShuWzBdLnZhbHVlKX0pfSx0Ll9mb3JtPXIub24oXCJyZXNldFwiLHQuX3Jlc2V0SGFuZGxlcikpfSxfa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgbixvPWUua2V5Q29kZSxhPXRoaXMuZWxlbWVudFswXSxzPWkoYSksbD1zWzBdLGM9c1sxXSxkPW89PT1yLkJBQ0tTUEFDRTtkfHxvPT09ci5ERUxFVEU/KGw9PT1jJiYoZD9sLT0xOmMrPTEsbj10aGlzLl9maW5kKGwsZCkpLG4hPT10JiZuIT09bD8oZCYmKG4rPTEpLGkoYSxuKSk6bD4tMSYmdGhpcy5fbWFzayhsLGMsXCJcIixkKSxlLnByZXZlbnREZWZhdWx0KCkpOm89PT1yLkVOVEVSJiZ0aGlzLl9jaGFuZ2UoKX0sX2tleXByZXNzOmZ1bmN0aW9uKGUpe3ZhciB0LG47MD09PWUud2hpY2h8fGUuY3RybEtleXx8ZS5rZXlDb2RlPT09ci5FTlRFUnx8KHQ9U3RyaW5nLmZyb21DaGFyQ29kZShlLndoaWNoKSxuPWkodGhpcy5lbGVtZW50KSx0aGlzLl9tYXNrKG5bMF0sblsxXSx0KSwoZS5rZXlDb2RlPT09ci5CQUNLU1BBQ0V8fHQpJiZlLnByZXZlbnREZWZhdWx0KCkpfSxfZmluZDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuZWxlbWVudC52YWwoKXx8dGhpcy5fZW1wdHlNYXNrLGk9MTtmb3IodD09PSEwJiYoaT0tMSk7ZT4tMXx8dGhpcy5fbWFza0xlbmd0aD49ZTspe2lmKG4uY2hhckF0KGUpIT09dGhpcy50b2tlbnNbZV0pcmV0dXJuIGU7ZSs9aX1yZXR1cm4tMX0sX21hc2s6ZnVuY3Rpb24oZSxyLG8sYSl7dmFyIHMsbCxjLGQsdT10aGlzLmVsZW1lbnRbMF0saD11LnZhbHVlfHx0aGlzLl9lbXB0eU1hc2sscD10aGlzLm9wdGlvbnMucHJvbXB0Q2hhcixmPTA7Zm9yKGU9dGhpcy5fZmluZChlLGEpLGU+ciYmKHI9ZSksbD10aGlzLl91bm1hc2soaC5zdWJzdHJpbmcociksciksbz10aGlzLl91bm1hc2sobyxlKSxzPW8ubGVuZ3RoLG8mJihsPWwucmVwbGFjZShSZWdFeHAoXCJeX3swLFwiK3MrXCJ9XCIpLFwiXCIpKSxvKz1sLGg9aC5zcGxpdChcIlwiKSxjPW8uY2hhckF0KGYpO3RoaXMuX21hc2tMZW5ndGg+ZTspaFtlXT1jfHxwLGM9by5jaGFyQXQoKytmKSxkPT09dCYmZj5zJiYoZD1lKSxlPXRoaXMuX2ZpbmQoZSsxKTt1LnZhbHVlPXRoaXMuX29sZD1oLmpvaW4oXCJcIiksbi5fYWN0aXZlRWxlbWVudCgpPT09dSYmKGQ9PT10JiYoZD10aGlzLl9tYXNrTGVuZ3RoKSxpKHUsZCkpfSxfdW5tYXNrOmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLGEscyxsLGMsZDtpZighdClyZXR1cm5cIlwiO2Zvcih0PSh0K1wiXCIpLnNwbGl0KFwiXCIpLG89MCxhPW58fDAscz10aGlzLm9wdGlvbnMucHJvbXB0Q2hhcixsPXQubGVuZ3RoLGM9dGhpcy50b2tlbnMubGVuZ3RoLGQ9XCJcIjtjPmEmJihpPXRbb10scj10aGlzLnRva2Vuc1thXSxpPT09cnx8aT09PXM/KGQrPWk9PT1zP3M6XCJcIixvKz0xLGErPTEpOlwic3RyaW5nXCIhPXR5cGVvZiByPygoci50ZXN0JiZyLnRlc3QoaSl8fGUuaXNGdW5jdGlvbihyKSYmcihpKSkmJihkKz1pLGErPTEpLG8rPTEpOmErPTEsIShvPj1sKSk7KTtyZXR1cm4gZH0sX3Rva2VuaXplOmZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQsaSxyLG89W10sYT0wLHM9dGhpcy5vcHRpb25zLm1hc2t8fFwiXCIsbD1zLnNwbGl0KFwiXCIpLGM9bC5sZW5ndGgsZD0wLHU9XCJcIixoPXRoaXMub3B0aW9ucy5wcm9tcHRDaGFyLHA9bi5nZXRDdWx0dXJlKHRoaXMub3B0aW9ucy5jdWx0dXJlKS5udW1iZXJGb3JtYXQsZj10aGlzLl9ydWxlcztjPmQ7ZCsrKWlmKGU9bFtkXSx0PWZbZV0pb1thXT10LHUrPWgsYSs9MTtlbHNlIGZvcihcIi5cIj09PWV8fFwiLFwiPT09ZT9lPXBbZV06XCIkXCI9PT1lP2U9cC5jdXJyZW5jeS5zeW1ib2w6XCJcXFxcXCI9PT1lJiYoZCs9MSxlPWxbZF0pLGU9ZS5zcGxpdChcIlwiKSxpPTAscj1lLmxlbmd0aDtyPmk7aSsrKW9bYV09ZVtpXSx1Kz1lW2ldLGErPTE7dGhpcy50b2tlbnM9byx0aGlzLl9lbXB0eU1hc2s9dSx0aGlzLl9tYXNrTGVuZ3RoPXUubGVuZ3RofX0pO28ucGx1Z2luKGYpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7dmFyIG49XCJzdHJpbmdcIj09dHlwZW9mIGU/W3tuYW1lOmV9XTplLGk9XCJbb2JqZWN0IEFycmF5XVwiPT09X3QuY2FsbChuKT9uOm4hPT10P1tuXTpbXTtyZXR1cm4gd3QoaSxmdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZT97bmFtZTplfTp7bmFtZTplLm5hbWUsdHlwZTplLnR5cGV9fSl9ZnVuY3Rpb24gaShlKXt2YXIgbj1cInN0cmluZ1wiPT10eXBlb2YgZT9be25hbWU6W2VdLGV4cGFuZDohMX1dOmUsaT1cIltvYmplY3QgQXJyYXldXCI9PT1fdC5jYWxsKG4pP246biE9PXQ/W25dOltdO3JldHVybiB3dChpLGZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlP3tuYW1lOltlXSxleHBhbmQ6ITF9OntuYW1lOlwiW29iamVjdCBBcnJheV1cIj09PV90LmNhbGwoZS5uYW1lKT9lLm5hbWUuc2xpY2UoKTpbZS5uYW1lXSxleHBhbmQ6ZS5leHBhbmR9fSl9ZnVuY3Rpb24gcihlLHQsbixpKXt2YXIgbyxhLHMsbDtpZihufHwobj10KSxpfHwoaT0wKSxsPW4ubWVtYmVyc1tpXSxsJiYhbC5tZWFzdXJlKXtpZihzPWwuY2hpbGRyZW4sYT1zLmxlbmd0aCxuPT09dD9lW3B0LnN0cmluZ2lmeShbbC5uYW1lXSldPSEhYTphJiYoZVtwdC5zdHJpbmdpZnkobHQobixpKSldPSEwKSxhKWZvcihvPTA7YT5vO28rKylyKGUsdCxzW29dLGkpO1xyXG5yKGUsdCxuLGkrMSl9fWZ1bmN0aW9uIG8odCl7dmFyIG4saSxvPXt9O3QubGVuZ3RoJiZyKG8sdFswXSksbj1bXTtmb3IoaSBpbiBvKW4ucHVzaCh7bmFtZTplLnBhcnNlSlNPTihpKSxleHBhbmQ6b1tpXX0pO3JldHVybiBufWZ1bmN0aW9uIGEoZSx0KXt2YXIgbixpLHIsbyxhPXQudHVwbGVzfHxbXSxzPWFbMF07aWYocyYmcy5tZW1iZXJzLmxlbmd0aD5lLmxlbmd0aClmb3Iobj1zLm1lbWJlcnMsaT0wO24ubGVuZ3RoPmk7aSsrKWlmKCFuW2ldLm1lYXN1cmUpe2ZvcihyPSExLG89MDtlLmxlbmd0aD5vO28rKylpZigwPT09TyhlW29dKS5pbmRleE9mKG5baV0uaGllcmFyY2h5KSl7cj0hMDticmVha31yfHxlLnB1c2goe25hbWU6W25baV0ubmFtZV0sZXhwYW5kOiExfSl9fWZ1bmN0aW9uIHMoZSl7dmFyIHQsbj1bXSxpPWUubWVtYmVycztmb3IodD0wO2kubGVuZ3RoPnQ7dCsrKWlbdF0ubWVhc3VyZXx8bi5wdXNoKHtuYW1lOltpW3RdLm5hbWVdLGV4cGFuZDppW3RdLmNoaWxkcmVuLmxlbmd0aD4wfSk7cmV0dXJuIG59ZnVuY3Rpb24gbChlLHQsbil7dmFyIHIsbztyZXR1cm4gZT1lfHx7fSxhKHQsZSksbi5sZW5ndGg+MSYmdC5wdXNoKHtuYW1lOlwiTWVhc3VyZXNcIixtZWFzdXJlOiEwLGNoaWxkcmVuOmkobil9KSxyPXttZW1iZXJzOnR9LGUudHVwbGVzJiYobz14KGUudHVwbGVzLHIpLG8udHVwbGUmJih0PXMoby50dXBsZSkpKSx0fWZ1bmN0aW9uIGMoZSx0LG4saSxyLG8sYSl7dmFyIHMsbCxjLGQsdSxoLHAsZj0wLGc9dDtmb3IobCBpbiBuW2ldLmFnZ3JlZ2F0ZXMpcz1uW2ldLmFnZ3JlZ2F0ZXNbbF0sZD1yW2xdLHU9b1tsXSxzPWQ/ZChzKTpzLmFjY3VtdWxhdG9yLGVbZ109e29yZGluYWw6Zyx2YWx1ZTpzLGZtdFZhbHVlOnU/cHQuZm9ybWF0KHUscyk6c30sKytmLGcrPWE7aD1uW2ldLml0ZW1zO2ZvcihjIGluIGgpe3A9aFtjXS5pbmRleCpmLHA9ZytwKmE7Zm9yKGwgaW4gaFtjXS5hZ2dyZWdhdGVzKXM9aFtjXS5hZ2dyZWdhdGVzW2xdLGQ9cltsXSx1PW9bbF0scz1kP2Qocyk6cy5hY2N1bXVsYXRvcixlW3BdPXtvcmRpbmFsOnAsdmFsdWU6cyxmbXRWYWx1ZTp1P3B0LmZvcm1hdCh1LHMpOnN9LHArPWF9fWZ1bmN0aW9uIGQoZSx0LG4saSxyLG8pe3ZhciBhLHMsbCxjLGQsdSxoLHA9MDtmb3IocyBpbiBuW2ldLmFnZ3JlZ2F0ZXMpYT1uW2ldLmFnZ3JlZ2F0ZXNbc10sYz1yW3NdLGQ9b1tzXSxhPWM/YyhhKTphLmFjY3VtdWxhdG9yLGVbZS5sZW5ndGhdPXtvcmRpbmFsOnQrKyx2YWx1ZTphLGZtdFZhbHVlOmQ/cHQuZm9ybWF0KGQsYSk6YX0sKytwO3U9bltpXS5pdGVtcztmb3IobCBpbiB1KXtoPXVbbF0uaW5kZXgqcDtmb3IocyBpbiB1W2xdLmFnZ3JlZ2F0ZXMpYT11W2xdLmFnZ3JlZ2F0ZXNbc10sYz1yW3NdLGQ9b1tzXSxhPWM/YyhhKTphLmFjY3VtdWxhdG9yLGVbZS5sZW5ndGhdPXtvcmRpbmFsOnQraCsrLHZhbHVlOmEsZm10VmFsdWU6ZD9wdC5mb3JtYXQoZCxhKTphfX19ZnVuY3Rpb24gdShlKXt2YXIgdD1wdC5nZXR0ZXIoZS5maWVsZCwhMCk7cmV0dXJuIGZ1bmN0aW9uKG4saSl7cmV0dXJuIGUuYWdncmVnYXRlKHQobi5kYXRhSXRlbSksaSxuKX19ZnVuY3Rpb24gaChlKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgZSYmIWlzTmFOKGUpfWZ1bmN0aW9uIHAoZSl7cmV0dXJuIGUmJmUuZ2V0VGltZX1mdW5jdGlvbiBmKGUsbixpKXtyZXR1cm4gZS50dXBsZXMubGVuZ3RoPF8obi50dXBsZXMsaSk/bjp0fWZ1bmN0aW9uIGcoZSx0LG4saSxyKXt2YXIgbyxhLHMsbD1lLmxlbmd0aCxjPV8odCxpKSxkPWkubGVuZ3RofHwxO2ZvcihhPTA7bj5hO2ErKylmb3Iobz0wO2w+bztvKyspcz12KGVbb10sdCkqZCxzKz1vJWQsclthKmwrb10ub3JkaW5hbD1hKmMrc31mdW5jdGlvbiBtKGUsdCxuLGkscil7dmFyIG8sYSxzLGw9ZS5sZW5ndGgsYz0oXyh0LGkpLGkubGVuZ3RofHwxKTtmb3IoYT0wO2w+YTthKyspZm9yKHM9dihlW2FdLHQpLHMqPWMscys9YSVjLG89MDtuPm87bysrKXJbYSpuK29dLm9yZGluYWw9cypuK299ZnVuY3Rpb24gdihlLHQpe3JldHVybiB4KHQsZSkuaW5kZXh9ZnVuY3Rpb24gXyhlLHQpe3ZhciBuLGkscjtpZighZS5sZW5ndGgpcmV0dXJuIDA7Zm9yKG49ZS5zbGljZSgpLGk9bi5zaGlmdCgpLHI9MTtpOylpLm1lbWJlcnM/W10ucHVzaC5hcHBseShuLGkubWVtYmVycyk6aS5jaGlsZHJlbiYmKGkubWVhc3VyZXx8KHIrPWkuY2hpbGRyZW4ubGVuZ3RoKSxbXS5wdXNoLmFwcGx5KG4saS5jaGlsZHJlbikpLGk9bi5zaGlmdCgpO3JldHVybiB0Lmxlbmd0aCYmKHIqPXQubGVuZ3RoKSxyfWZ1bmN0aW9uIHkoZSl7cmV0dXJuIGV8fChlPXt0dXBsZXM6W119KSxlLnR1cGxlc3x8KGUudHVwbGVzPVtdKSxlfWZ1bmN0aW9uIHcoZSx0LG4pe3ZhciBpLHIsbztpZighZSlyZXR1cm4gMDtmb3IoaT1NYXRoLm1heChuLmxlbmd0aCwxKSxyPWUubWVtYmVycy5zbGljZSgwLHQpLG89ci5zaGlmdCgpO287KW8uY2hpbGRyZW4/W10ucHVzaC5hcHBseShyLG8uY2hpbGRyZW4pOihpKyssW10ucHVzaC5hcHBseShyLG8ubWVtYmVycykpLG89ci5zaGlmdCgpO3JldHVybiBpfWZ1bmN0aW9uIGIoZSx0LG4pe3ZhciBpLHIsbyxhLHMsbDtpZighdFswXSlyZXR1cm57cGFyc2VkUm9vdDpudWxsLHR1cGxlczplLG1lbWJlckluZGV4OjAsaW5kZXg6MH07aWYoaT14KGUsdFswXSksIWkudHVwbGUpcmV0dXJue3BhcnNlZFJvb3Q6bnVsbCx0dXBsZXM6dCxtZW1iZXJJbmRleDowLGluZGV4OjB9O2lmKHI9aS50dXBsZS5tZW1iZXJzLG89dFswXS5tZW1iZXJzLGE9LTEsci5sZW5ndGghPT1vLmxlbmd0aClyZXR1cm57cGFyc2VkUm9vdDpudWxsLHR1cGxlczp0LG1lbWJlckluZGV4OjAsaW5kZXg6MH07Zm9yKHM9MCxsPXIubGVuZ3RoO2w+cztzKyspIXJbc10ubWVhc3VyZSYmb1tzXS5jaGlsZHJlblswXSYmKC0xPT1hJiZvW3NdLmNoaWxkcmVuLmxlbmd0aCYmKGE9cykscltzXS5jaGlsZHJlbj1vW3NdLmNoaWxkcmVuKTtyZXR1cm4gbj1NYXRoLm1heChuLmxlbmd0aCwxKSx7cGFyc2VkUm9vdDppLnR1cGxlLGluZGV4OmkuaW5kZXgqbixtZW1iZXJJbmRleDphLHR1cGxlczplfX1mdW5jdGlvbiBrKGUsdCl7dmFyIG4saSxyPSEwO2ZvcihlPWUubWVtYmVycyx0PXQubWVtYmVycyxuPTAsaT1lLmxlbmd0aDtpPm47bisrKWVbbl0ubWVhc3VyZXx8dFtuXS5tZWFzdXJlfHwocj1yJiZPKGVbbl0pPT09Tyh0W25dKSk7cmV0dXJuIHJ9ZnVuY3Rpb24geChlLHQpe3ZhciBuLGkscixvLGEscyxsLGM9MDtmb3Iobj0wLGk9ZS5sZW5ndGg7aT5uO24rKyl7aWYocj1lW25dLGsocix0KSlyZXR1cm57dHVwbGU6cixpbmRleDpjfTtmb3IoYysrLGE9MCxzPXIubWVtYmVycy5sZW5ndGg7cz5hO2ErKylpZihsPXIubWVtYmVyc1thXSwhbC5tZWFzdXJlJiYobz14KGwuY2hpbGRyZW4sdCksYys9by5pbmRleCxvLnR1cGxlKSlyZXR1cm57dHVwbGU6by50dXBsZSxpbmRleDpjfX1yZXR1cm57aW5kZXg6Y319ZnVuY3Rpb24gQyhlLHQpe3ZhciBuLGkscixvPVwiXCI7Zm9yKGk9MCxyPWUubGVuZ3RoO3I+aTtpKyspbj1lW2ldLG8rPW4ubmFtZSx0W29dfHwodFtvXT1uKX1mdW5jdGlvbiBTKGUsdCl7dmFyIG4saSxyLG8sYT1lLm1lbWJlcnMscz1cIlwiLGw9XCJcIjtmb3Iobj0wLGk9YS5sZW5ndGg7aT5uO24rKyl7aWYocj1hW25dLG8pe2lmKHRbcytyLm5hbWVdKXtzKz1yLm5hbWUsbz10W3NdO2NvbnRpbnVlfXJldHVybiB0W3Mrci5wYXJlbnROYW1lXT90W3Mrci5wYXJlbnROYW1lXTooci5wYXJlbnROYW1lJiYobCs9ci5wYXJlbnROYW1lKSx0W2xdKX1pZihzKz1yLm5hbWUsbz10W3IucGFyZW50TmFtZV0sIW8mJihvPXRbc10sIW8pKXJldHVybiBudWxsO28mJihsKz1vLm5hbWUpfXJldHVybiBvfWZ1bmN0aW9uIFQoZSx0KXt2YXIgbixpLHIsbztpZigwPT09dC5sZW5ndGgpcmV0dXJuLTE7Zm9yKG49dFswXSxpPWUubWVtYmVycyxyPTAsbz1pLmxlbmd0aDtvPnI7cisrKWlmKGlbcl0ubmFtZT09bi5uYW1lKXJldHVybiByfWZ1bmN0aW9uIEQobixpKXtpZighKDA+aSkpe3ZhciByPXtuYW1lOlwiTWVhc3VyZXNcIixtZWFzdXJlOiEwLGNoaWxkcmVuOltlLmV4dGVuZCh7bWVtYmVyczpbXSxkYXRhSW5kZXg6bi5kYXRhSW5kZXh9LG4ubWVtYmVyc1tpXSldfTtuLm1lbWJlcnMuc3BsaWNlKGksMSxyKSxuLmRhdGFJbmRleD10fX1mdW5jdGlvbiBBKGUsdCl7dmFyIG4saSxyLG8sYSxzO2lmKDE+ZS5sZW5ndGgpcmV0dXJuW107Zm9yKG49W10saT17fSxyPVQoZVswXSx0KSxvPTA7ZS5sZW5ndGg+bztvKyspYT1lW29dLGEuZGF0YUluZGV4PW8sRChhLHIpLHM9UyhhLGkpLHM/cy5jaGlsZHJlbi5wdXNoKDA+cnx8IXMubWVhc3VyZT9hOmEubWVtYmVyc1tyXS5jaGlsZHJlblswXSk6bi5wdXNoKGEpLEMoYS5tZW1iZXJzLGkpO3JldHVybiBufWZ1bmN0aW9uIEUoZSx0KXt2YXIgbixpLHIsbyxhLHMsbCxjLGQ7aWYoIWV8fCFlLmxlbmd0aClyZXR1cm4gdDtmb3Iobj1bXSxpPVAoZSkscj1pLmxlbmd0aCxvPU1hdGgubWF4KHQubGVuZ3RoL3IsMSksYT0wO3I+YTthKyspZm9yKGw9byphLGM9byppW2FdLHM9MDtvPnM7cysrKWQ9cGFyc2VJbnQoYytzLDEwKSxuW3BhcnNlSW50KGwrcywxMCldPXRbZF18fHt2YWx1ZTpcIlwiLGZtdFZhbHVlOlwiXCIsb3JkaW5hbDpkfTtyZXR1cm4gbn1mdW5jdGlvbiBNKGUsdCl7dmFyIG4saSxyLG8sYSxzLGwsYztpZighZXx8IWUubGVuZ3RoKXJldHVybiB0O2ZvcihuPVtdLGk9UChlKSxyPWkubGVuZ3RoLG89TWF0aC5tYXgodC5sZW5ndGgvciwxKSxzPTA7bz5zO3MrKylmb3IobD1yKnMsYT0wO3I+YTthKyspYz1pW2FdK2wsbltsK2FdPXRbY118fHt2YWx1ZTpcIlwiLGZtdFZhbHVlOlwiXCIsb3JkaW5hbDpjfTtyZXR1cm4gbn1mdW5jdGlvbiBQKGUpe3ZhciBuLGkscixvLGEscyxsO2ZvcihlPWUuc2xpY2UoKSxuPVtdLGk9ZS5zaGlmdCgpO2k7KXtmb3IoaS5kYXRhSW5kZXghPT10JiZuLnB1c2goaS5kYXRhSW5kZXgpLGE9MCxyPTAsbz1pLm1lbWJlcnMubGVuZ3RoO28+cjtyKyspbD1pLm1lbWJlcnNbcl0scz1sLmNoaWxkcmVuLGwubWVhc3VyZT9bXS5zcGxpY2UuYXBwbHkoZSxbMCwwXS5jb25jYXQocykpOltdLnNwbGljZS5hcHBseShlLFthLDBdLmNvbmNhdChzKSksYSs9cy5sZW5ndGg7aT1lLnNoaWZ0KCl9cmV0dXJuIG59ZnVuY3Rpb24gSShlKXt2YXIgdD1lLnNwbGl0KFwiLlwiKTtyZXR1cm4gdC5sZW5ndGg+Mj90WzBdK1wiLlwiK3RbMV06ZX1mdW5jdGlvbiB6KGUsdCl7dmFyIG49ZS5sZW5ndGgtMSxpPWVbbl0scj1GKHQsaSk7cmV0dXJuIHImJnIuZGlyP2k9XCJPUkRFUihcIitpK1wiLkNoaWxkcmVuLFwiK3IuZmllbGQrXCIuQ3VycmVudE1lbWJlci5NRU1CRVJfQ0FQVElPTixcIityLmRpcitcIilcIjppKz1cIi5DaGlsZHJlblwiLGVbbl09aSxlfWZ1bmN0aW9uIEYoZSx0KXtmb3IodmFyIG49MCxpPWUubGVuZ3RoO2k+bjtuKyspaWYoMD09PXQuaW5kZXhPZihlW25dLmZpZWxkKSlyZXR1cm4gZVtuXTtyZXR1cm4gbnVsbH1mdW5jdGlvbiBSKGUpe3ZhciB0LG49XCJDUk9TU0pPSU4oe1wiO3JldHVybiBlLmxlbmd0aD4yPyh0PWUucG9wKCksbis9UihlKSk6KG4rPWUuc2hpZnQoKSx0PWUucG9wKCkpLG4rPVwifSx7XCIsbis9dCxuKz1cIn0pXCJ9ZnVuY3Rpb24gQihlLHQpe3ZhciBuPWUuc2xpY2UoMCk7cmV0dXJuIHQubGVuZ3RoPjEmJm4ucHVzaChcIntcIitMKHQpLmpvaW4oXCIsXCIpK1wifVwiKSxSKG4pfWZ1bmN0aW9uIEwoZSl7Zm9yKHZhciBuLGk9MCxyPWUubGVuZ3RoLG89W107cj5pO2krKyluPWVbaV0sby5wdXNoKG4ubmFtZSE9PXQ/bi5uYW1lOm4pO3JldHVybiBvfWZ1bmN0aW9uIE8oZSl7cmV0dXJuIGU9ZS5uYW1lfHxlLFwiW29iamVjdCBBcnJheV1cIj09PV90LmNhbGwoZSkmJihlPWVbZS5sZW5ndGgtMV0pLGV9ZnVuY3Rpb24gSChlKXtmb3IodmFyIHQ9ZS5sZW5ndGgsbj1bXSxpPTA7dD5pO2krKyluLnB1c2goZVtpXS5uYW1lWzBdKTtyZXR1cm4gbn1mdW5jdGlvbiBOKGUsdCl7dmFyIG4saSxyLG89MCxhPWUubGVuZ3RoLHM9dC5sZW5ndGg7Zm9yKHQ9dC5zbGljZSgwKTthPm87bysrKWZvcihuPWVbb10scj0wO3M+cjtyKyspaWYoaT1JKHRbcl0pLC0xIT09bi5pbmRleE9mKGkpKXt0W3JdPW47YnJlYWt9cmV0dXJuIHR9ZnVuY3Rpb24gVihlKXtmb3IodmFyIHQsbixpLHIsbyxhLHM9W10sbD1bXSxjPVtdLGQ9MCx1PWUubGVuZ3RoO3U+ZDtkKyspaWYodD1lW2RdLHI9dC5uYW1lLGE9ITEsXCJbb2JqZWN0IEFycmF5XVwiIT09X3QuY2FsbChyKSYmKHQubmFtZT1yPVtyXSksci5sZW5ndGg+MSlsLnB1c2godCk7ZWxzZXtmb3Iobz1JKHJbMF0pLG49MCxpPWMubGVuZ3RoO2k+bjtuKyspaWYoMD09PWNbbl0ubmFtZVswXS5pbmRleE9mKG8pKXthPSEwO2JyZWFrfWF8fGMucHVzaCh0KSx0LmV4cGFuZCYmcy5wdXNoKHQpfXJldHVybiBzPXMuY29uY2F0KGwpLHtyb290OmMsZXhwYW5kZWQ6c319ZnVuY3Rpb24gVShlLHQsbil7dmFyIGkscixvLGEscyxsLGMsZCx1PVwiXCI7aWYoZT1lfHxbXSxpPVYoZSkscj1pLnJvb3Qsbz1IKHIpLGE9W10saT1pLmV4cGFuZGVkLHM9aS5sZW5ndGgsbD0wLGQ9W10sby5sZW5ndGg+MXx8dC5sZW5ndGg+MSl7Zm9yKGEucHVzaChCKG8sdCkpO3M+bDtsKyspYz16KGlbbF0ubmFtZSxuKSxkPU4oYyxvKSxhLnB1c2goQihkLHQpKTt1Kz1hLmpvaW4oXCIsXCIpfWVsc2V7Zm9yKDtzPmw7bCsrKWM9eihpW2xdLm5hbWUsbiksZC5wdXNoKGNbMF0pO3UrPW8uY29uY2F0KGQpLmpvaW4oXCIsXCIpfXJldHVybiB1fWZ1bmN0aW9uIFcoZSl7dmFyIHQ9XCJcIixuPWUudmFsdWUsaT1lLmZpZWxkLHI9ZS5vcGVyYXRvcjtyZXR1cm5cImluXCI9PXI/KHQrPVwie1wiLHQrPW4sdCs9XCJ9XCIpOih0Kz1cIkZpbHRlcihcIix0Kz1pK1wiLkNoaWxkcmVuXCIsdCs9cHQuZm9ybWF0KFlbcl0saSxuKSx0Kz1cIilcIiksdH1mdW5jdGlvbiBqKGUsdCl7dmFyIG4saSxyPVwiXCIsbz1lLmZpbHRlcnMsYT1vLmxlbmd0aDtmb3IoaT1hLTE7aT49MDtpLS0pbj1cIlNFTEVDVCAoXCIsbis9VyhvW2ldKSxuKz1cIikgT04gMFwiLGk9PWEtMT8obis9XCIgRlJPTSBbXCIrdCtcIl1cIixyPW4pOnI9bitcIiBGUk9NICggXCIrcitcIiApXCI7cmV0dXJuIHJ9ZnVuY3Rpb24gRyhlLHQsbil7dmFyIGkscixvPVwiXCI7aWYodCl7bys9XCI8XCIrZStcIj5cIjtmb3IociBpbiB0KWk9dFtyXSxuJiYocj1yLnJlcGxhY2UoLyhbQS1aXSsoPz0kfFtBLVpdW2Etel0pfFtBLVpdP1thLXpdKykvZyxcIiQxX1wiKS50b1VwcGVyQ2FzZSgpLnJlcGxhY2UoL18kLyxcIlwiKSksbys9XCI8XCIrcitcIj5cIitpK1wiPC9cIityK1wiPlwiO28rPVwiPC9cIitlK1wiPlwifWVsc2Ugbys9XCI8XCIrZStcIi8+XCI7cmV0dXJuIG99ZnVuY3Rpb24gcShlKXtpZihudWxsPT1lKXJldHVybltdO3ZhciB0PV90LmNhbGwoZSk7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiIT09dD9bZV06ZX1mdW5jdGlvbiAkKGUpe3ZhciB0LG4saSxyLG89e3R1cGxlczpbXX0sYT1xKHB0LmdldHRlcihcIlR1cGxlcy5UdXBsZVwiLCEwKShlKSkscz1wdC5nZXR0ZXIoXCJDYXB0aW9uWycjdGV4dCddXCIpLGw9cHQuZ2V0dGVyKFwiVU5hbWVbJyN0ZXh0J11cIiksYz1wdC5nZXR0ZXIoXCJMTmFtZVsnI3RleHQnXVwiKSxkPXB0LmdldHRlcihcIkxOdW1bJyN0ZXh0J11cIiksdT1wdC5nZXR0ZXIoXCJDSElMRFJFTl9DQVJESU5BTElUWVsnI3RleHQnXVwiLCEwKSxoPXB0LmdldHRlcihcIlsnQEhpZXJhcmNoeSddXCIpLHA9cHQuZ2V0dGVyKFwiUEFSRU5UX1VOSVFVRV9OQU1FWycjdGV4dCddXCIsITApO2Zvcih0PTA7YS5sZW5ndGg+dDt0Kyspe2ZvcihuPVtdLGk9cShhW3RdLk1lbWJlcikscj0wO2kubGVuZ3RoPnI7cisrKW4ucHVzaCh7Y2hpbGRyZW46W10sY2FwdGlvbjpzKGlbcl0pLG5hbWU6bChpW3JdKSxsZXZlbE5hbWU6YyhpW3JdKSxsZXZlbE51bTpkKGlbcl0pLGhhc0NoaWxkcmVuOnBhcnNlSW50KHUoaVtyXSksMTApPjAscGFyZW50TmFtZTpwKGlbcl0pLGhpZXJhcmNoeTpoKGlbcl0pfSk7by50dXBsZXMucHVzaCh7bWVtYmVyczpufSl9cmV0dXJuIG99dmFyIFksSyxRLFgsSixaLGV0LHR0LG50LGl0LHJ0LG90LGF0LHN0LGx0LGN0LGR0LHV0LGh0LHB0PXdpbmRvdy5rZW5kbyxmdD1wdC51aSxndD1wdC5DbGFzcyxtdD1mdC5XaWRnZXQsdnQ9cHQuZGF0YS5EYXRhU291cmNlLF90PXt9LnRvU3RyaW5nLHl0PWZ1bmN0aW9uKGUpe3JldHVybiBlfSx3dD1lLm1hcCxidD1lLmV4dGVuZCxrdD1wdC5pc0Z1bmN0aW9uLHh0PVwiY2hhbmdlXCIsQ3Q9XCJlcnJvclwiLFN0PVwicHJvZ3Jlc3NcIixUdD1cInN0YXRlUmVzZXRcIixEdD1cImF1dG9cIixBdD1cIjxkaXYvPlwiLEV0PVwiLmtlbmRvUGl2b3RHcmlkXCIsTXQ9XCJfX3Jvd190b3RhbF9fXCIsUHQ9XCJkYXRhQmluZGluZ1wiLEl0PVwiZGF0YUJvdW5kXCIsenQ9XCJleHBhbmRNZW1iZXJcIixGdD1cImNvbGxhcHNlTWVtYmVyXCIsUnQ9XCJrLWktYXJyb3ctc1wiLEJ0PVwiay1pLWFycm93LWVcIixMdD1cIiM6IGRhdGEubWVtYmVyLmNhcHRpb24gfHwgZGF0YS5tZW1iZXIubmFtZSAjXCIsT3Q9JzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1rcGktIz1kYXRhLmRhdGFJdGVtLnZhbHVlID4gMCA/IFwib3BlblwiIDogZGF0YS5kYXRhSXRlbS52YWx1ZSA8IDAgPyBcImRlbmllZFwiIDogXCJob2xkXCIjXCI+IzpkYXRhLmRhdGFJdGVtLnZhbHVlIzwvc3Bhbj4nLEh0PSc8c3BhbiBjbGFzcz1cImstaWNvbiBrLWkta3BpLSM9ZGF0YS5kYXRhSXRlbS52YWx1ZSA+IDAgPyBcImluY3JlYXNlXCIgOiBkYXRhLmRhdGFJdGVtLnZhbHVlIDwgMCA/IFwiZGVjcmVhc2VcIiA6IFwiZXF1YWxcIiNcIj4jOmRhdGEuZGF0YUl0ZW0udmFsdWUjPC9zcGFuPicsTnQ9JyM9IGRhdGEuZGF0YUl0ZW0gPyBrZW5kby5odG1sRW5jb2RlKGRhdGEuZGF0YUl0ZW0uZm10VmFsdWUgfHwgZGF0YS5kYXRhSXRlbS52YWx1ZSkgfHwgXCImbmJzcDtcIiA6IFwiJm5ic3A7XCIgIycsVnQ9Jzx0YWJsZSBjbGFzcz1cImstcGl2b3QtbGF5b3V0XCI+PHRyPjx0ZD48ZGl2IGNsYXNzPVwiay1waXZvdC1yb3doZWFkZXJzXCI+PC9kaXY+PC90ZD48dGQ+PGRpdiBjbGFzcz1cImstcGl2b3QtdGFibGUgay1zdGF0ZS1kZWZhdWx0XCI+PC9kaXY+PC90ZD48L3RyPjwvdGFibGU+JyxVdD17c3VtOmZ1bmN0aW9uKGUsdCl7dmFyIG49dC5hY2N1bXVsYXRvcjtyZXR1cm4gaChuKT9oKGUpJiYobis9ZSk6bj1lLG59LGNvdW50OmZ1bmN0aW9uKGUsdCl7cmV0dXJuKHQuYWNjdW11bGF0b3J8fDApKzF9LGF2ZXJhZ2U6e2FnZ3JlZ2F0ZTpmdW5jdGlvbihlLG4pe3ZhciBpPW4uYWNjdW11bGF0b3I7cmV0dXJuIG4uY291bnQ9PT10JiYobi5jb3VudD0wKSxoKGkpP2goZSkmJihpKz1lKTppPWUsaChlKSYmbi5jb3VudCsrLGl9LHJlc3VsdDpmdW5jdGlvbihlKXt2YXIgdD1lLmFjY3VtdWxhdG9yO3JldHVybiBoKHQpJiYodC89ZS5jb3VudCksdH19LG1heDpmdW5jdGlvbihlLHQpe3ZhciBuPXQuYWNjdW11bGF0b3I7cmV0dXJuIGgobil8fHAobil8fChuPWUpLGU+biYmKGgoZSl8fHAoZSkpJiYobj1lKSxufSxtaW46ZnVuY3Rpb24oZSx0KXt2YXIgbj10LmFjY3VtdWxhdG9yO3JldHVybiBoKG4pfHxwKG4pfHwobj1lKSxuPmUmJihoKGUpfHxwKGUpKSYmKG49ZSksbn19LFd0PWd0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnM9YnQoe30sdGhpcy5vcHRpb25zLGUpLHRoaXMuZGltZW5zaW9ucz10aGlzLl9ub3JtYWxpemVEZXNjcmlwdG9ycyhcImZpZWxkXCIsdGhpcy5vcHRpb25zLmRpbWVuc2lvbnMpLHRoaXMubWVhc3VyZXM9dGhpcy5fbm9ybWFsaXplRGVzY3JpcHRvcnMoXCJuYW1lXCIsdGhpcy5vcHRpb25zLm1lYXN1cmVzKX0sX25vcm1hbGl6ZURlc2NyaXB0b3JzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG87aWYodD10fHx7fSxuPXt9LFwiW29iamVjdCBBcnJheV1cIj09PV90LmNhbGwodCkpe2ZvcihyPTAsbz10Lmxlbmd0aDtvPnI7cisrKWk9dFtyXSxcInN0cmluZ1wiPT10eXBlb2YgaT9uW2ldPXt9OmlbZV0mJihuW2lbZV1dPWkpO3Q9bn1yZXR1cm4gdH0sX2FzVHVwbGVzOmZ1bmN0aW9uKGUsbixpKXt2YXIgcixvLGEscyxsLGMsZCx1LGgscDtpZihpPWl8fFtdLHI9dGhpcy5kaW1lbnNpb25zfHxbXSxvPVtdLGg9aS5sZW5ndGh8fDEsbi5sZW5ndGh8fGkubGVuZ3RoKWZvcihjPTA7aD5jO2MrKyl7Zm9yKGE9e21lbWJlcnM6W119LHM9MCxsPW4ubGVuZ3RoO2w+cztzKyspdT1PKG5bc10ubmFtZSksYS5tZW1iZXJzW2EubWVtYmVycy5sZW5ndGhdPXtjaGlsZHJlbjpbXSxjYXB0aW9uOihyW3VdfHx7fSkuY2FwdGlvbnx8XCJBbGxcIixuYW1lOnUsbGV2ZWxOYW1lOnUsbGV2ZWxOdW06XCIwXCIsaGFzQ2hpbGRyZW46ITAscGFyZW50TmFtZTp0LGhpZXJhcmNoeTp1fTtoPjEmJihhLm1lbWJlcnNbYS5tZW1iZXJzLmxlbmd0aF09e2NoaWxkcmVuOltdLGNhcHRpb246aVtjXS5jYXB0aW9uLG5hbWU6aVtjXS5kZXNjcmlwdG9yLm5hbWUsbGV2ZWxOYW1lOlwiTUVBU1VSRVNcIixsZXZlbE51bTpcIjBcIixoYXNDaGlsZHJlbjohMSxwYXJlbnROYW1lOnQsaGllcmFyY2h5OlwiTUVBU1VSRVNcIn0pLG9bby5sZW5ndGhdPWF9Zm9yKHAgaW4gZSlmb3IoYz0wO2g+YztjKyspe2ZvcihkPXttZW1iZXJzOltdfSxzPTAsbD1uLmxlbmd0aDtsPnM7cysrKXU9TyhuW3NdLm5hbWUpLGQubWVtYmVyc1tkLm1lbWJlcnMubGVuZ3RoXT0wPT09ZVtwXS5wYXJlbnROYW1lLmluZGV4T2YodSk/e2NoaWxkcmVuOltdLGNhcHRpb246ZVtwXS52YWx1ZSxuYW1lOmVbcF0ubmFtZSxsZXZlbE5hbWU6ZVtwXS5uYW1lLGxldmVsTnVtOjEsaGFzQ2hpbGRyZW46ITEscGFyZW50TmFtZTp1LGhpZXJhcmNoeTp1fTp7Y2hpbGRyZW46W10sY2FwdGlvbjooclt1XXx8e30pLmNhcHRpb258fFwiQWxsXCIsbmFtZTp1LGxldmVsTmFtZTp1LGxldmVsTnVtOlwiMFwiLGhhc0NoaWxkcmVuOiEwLHBhcmVudE5hbWU6dCxoaWVyYXJjaHk6dX07aD4xJiYoZC5tZW1iZXJzW2QubWVtYmVycy5sZW5ndGhdPXtjaGlsZHJlbjpbXSxjYXB0aW9uOmlbY10uY2FwdGlvbixuYW1lOmlbY10uZGVzY3JpcHRvci5uYW1lLGxldmVsTmFtZTpcIk1FQVNVUkVTXCIsbGV2ZWxOdW06XCIwXCIsaGFzQ2hpbGRyZW46ITAscGFyZW50TmFtZTp0LGhpZXJhcmNoeTpcIk1FQVNVUkVTXCJ9KSxvW28ubGVuZ3RoXT1kfXJldHVybiBvfSxfdG9EYXRhQXJyYXk6ZnVuY3Rpb24oZSx0LG4saSxyKXt2YXIgbyxhLHMsbCxjLGQsdT17fSxoPXt9LHA9MCxmPW4mJm4ubGVuZ3RoO2lmKGYpZm9yKG89dGhpcy5tZWFzdXJlc3x8e307Zj5wO3ArKylzPW5bcF0ubmFtZSxhPW9bc10sYS5yZXN1bHQmJihoW3NdPWEucmVzdWx0KSxhLmZvcm1hdCYmKHVbc109YS5mb3JtYXQpO2w9W10sYz0wLHIobCxjLGUsTXQsaCx1LHQpO2ZvcihkIGluIGUpZCE9PU10JiYoYys9aSxyKGwsYyxlLGQsaCx1LHQpKTtyZXR1cm4gbH0sX21hdGNoRGVzY3JpcHRvcnM6ZnVuY3Rpb24oZSx0LG4saSl7Zm9yKHZhciByLG8sYSxzLGw7aT4wOylpZihyPXRbLS1pXSxvPU8ocikuc3BsaXQoXCImXCIpLG8ubGVuZ3RoPjEmJihhPW9bMF0scz1vWzFdLGw9blthXSxsKGUpIT1zKSlyZXR1cm4hMTtyZXR1cm4hMH0sX2lzRXhwYW5kZWQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj1lLmxlbmd0aDtuPnQ7dCsrKWlmKGVbdF0uZXhwYW5kKXJldHVybiEwO3JldHVybiExfSxfY2FsY3VsYXRlQWdncmVnYXRlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sYT17fTtmb3Iobz0wO2UubGVuZ3RoPm87bysrKXI9ZVtvXS5kZXNjcmlwdG9yLm5hbWUsaT1uLmFnZ3JlZ2F0ZXNbcl18fHt9LGkuYWNjdW11bGF0b3I9ZVtvXS5hZ2dyZWdhdG9yKHQsaSksYVtyXT1pO3JldHVybiBhfSxfcHJvY2Vzc0NvbHVtbnM6ZnVuY3Rpb24oZSxuLGkscixvLGEscyxsKXt2YXIgYyxkLHUsaCxwLGYsZz1vLmRhdGFJdGVtO2ZvcihmPTA7bi5sZW5ndGg+ZjtmKyspaWYoZD1uW2ZdLGQuZXhwYW5kKXtpZighdGhpcy5fbWF0Y2hEZXNjcmlwdG9ycyhnLG4saSxmKSljb250aW51ZTt1PU8oZCksYz1pW3VdKGcpLGM9YyE9PXQ/XCJcIitjOmMsdT11K1wiJlwiK2MsaD1yW3VdfHx7aW5kZXg6cy5jb2x1bW5JbmRleCxuYW1lOnUscGFyZW50TmFtZTp1LHZhbHVlOmN9LHA9YS5pdGVtc1t1XXx8e2FnZ3JlZ2F0ZXM6e319LGEuaXRlbXNbdV09e2luZGV4OmguaW5kZXgsYWdncmVnYXRlczp0aGlzLl9jYWxjdWxhdGVBZ2dyZWdhdGUoZSxvLHApfSxsJiYoclt1XXx8cy5jb2x1bW5JbmRleCsrLHJbdV09aCl9fSxfbWVhc3VyZUFnZ3JlZ2F0b3JzOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYSxzPWUubWVhc3VyZXN8fFtdLGw9dGhpcy5tZWFzdXJlc3x8e30sYz1bXTtpZihzLmxlbmd0aCl7Zm9yKGk9MCxyPXMubGVuZ3RoO3I+aTtpKyspaWYodD1zW2ldLG49bFt0Lm5hbWVdLG89bnVsbCxuKXtpZihhPW4uYWdncmVnYXRlLFwic3RyaW5nXCI9PXR5cGVvZiBhKXtpZihvPVV0W2EudG9Mb3dlckNhc2UoKV0sIW8pdGhyb3cgRXJyb3IoXCJUaGVyZSBpcyBubyBzdWNoIGFnZ3JlZ2F0ZSBmdW5jdGlvblwiKTtuLmFnZ3JlZ2F0ZT1vLmFnZ3JlZ2F0ZXx8byxuLnJlc3VsdD1vLnJlc3VsdH1jLnB1c2goe2Rlc2NyaXB0b3I6dCxjYXB0aW9uOm4uY2FwdGlvbixyZXN1bHQ6bi5yZXN1bHQsYWdncmVnYXRvcjp1KG4pfSl9fWVsc2UgYy5wdXNoKHtkZXNjcmlwdG9yOntuYW1lOlwiZGVmYXVsdFwifSxjYXB0aW9uOlwiZGVmYXVsdFwiLGFnZ3JlZ2F0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gMX19KTtyZXR1cm4gY30sX2J1aWxkR2V0dGVyczpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGE9e307Zm9yKHI9MCxvPWUubGVuZ3RoO28+cjtyKyspdD1lW3JdLGk9Tyh0KSxuPWkuc3BsaXQoXCImXCIpLG4ubGVuZ3RoPjE/YVtuWzBdXT1wdC5nZXR0ZXIoblswXSwhMCk6YVtpXT1wdC5nZXR0ZXIoaSwhMCk7cmV0dXJuIGF9LHByb2Nlc3M6ZnVuY3Rpb24oZSxuKXt2YXIgcixvLGEscyxsLHUsaCxwLGYsZyxtLHYsXyx5LHcsYixrLHgsQyxTLFQsRCxBLEUsTSxQO2lmKGU9ZXx8W10sbj1ufHx7fSxyPW4ubWVhc3VyZXN8fFtdLG89XCJyb3dzXCI9PT1uLm1lYXN1cmVzQXhpcyxhPShvP24ucm93czpuLmNvbHVtbnMpfHxbXSxzPShvP24uY29sdW1uczpuLnJvd3MpfHxbXSwhYS5sZW5ndGgmJnMubGVuZ3RoJiYoIXIubGVuZ3RofHxyLmxlbmd0aCYmbykmJihhPXMscz1bXSxvPSExKSxhLmxlbmd0aHx8cy5sZW5ndGh8fChvPSExKSwhYS5sZW5ndGgmJnIubGVuZ3RoJiYoYT1pKG4ubWVhc3VyZXMpKSxsPXt9LHU9e30saD17fSxmPXtjb2x1bW5JbmRleDowfSxnPXRoaXMuX21lYXN1cmVBZ2dyZWdhdG9ycyhuKSxtPXRoaXMuX2J1aWxkR2V0dGVycyhhKSx2PXRoaXMuX2J1aWxkR2V0dGVycyhzKSxfPSExLGEubGVuZ3RofHxzLmxlbmd0aClmb3IoYj10aGlzLl9pc0V4cGFuZGVkKHMpLF89ITAsaz0wLHg9ZS5sZW5ndGg7eD5rO2srKylmb3IoeT1lW2tdLHc9e2RhdGFJdGVtOnksaW5kZXg6a30sQz1sW010XXx8e2l0ZW1zOnt9LGFnZ3JlZ2F0ZXM6e319LHRoaXMuX3Byb2Nlc3NDb2x1bW5zKGcsYSxtLHUsdyxDLGYsIWIpLEMuYWdncmVnYXRlcz10aGlzLl9jYWxjdWxhdGVBZ2dyZWdhdGUoZyx3LEMpLGxbTXRdPUMsUz0wLFQ9cy5sZW5ndGg7VD5TO1MrKylpZihEPXNbU10sRC5leHBhbmQpe2lmKCF0aGlzLl9tYXRjaERlc2NyaXB0b3JzKHkscyx2LFMpKWNvbnRpbnVlO0E9TyhEKSxwPXZbQV0oeSkscD1wIT09dD9cIlwiK3A6cCxoW3BdPXtuYW1lOkErXCImXCIrcCxwYXJlbnROYW1lOkEsdmFsdWU6cH0sRT1sW3BdfHx7aXRlbXM6e30sYWdncmVnYXRlczp7fX0sdGhpcy5fcHJvY2Vzc0NvbHVtbnMoZyxhLG0sdSx3LEUsZiwhMCksRS5hZ2dyZWdhdGVzPXRoaXMuX2NhbGN1bGF0ZUFnZ3JlZ2F0ZShnLHcsRSksbFtwXT1FfXJldHVybiBfJiZlLmxlbmd0aD8oIShnLmxlbmd0aD4xKXx8bi5jb2x1bW5zJiZuLmNvbHVtbnMubGVuZ3RofHwoYT1bXSksdT10aGlzLl9hc1R1cGxlcyh1LGEsZyksaD10aGlzLl9hc1R1cGxlcyhoLHMsW10pLE09dS5sZW5ndGgsbyYmKE09MSxQPXUsdT1oLGg9UCksbD10aGlzLl90b0RhdGFBcnJheShsLHUubGVuZ3RoLG4ubWVhc3VyZXMsTSxvP2M6ZCksbD10aGlzLl9ub3JtYWxpemVEYXRhKGwsdS5sZW5ndGgsaC5sZW5ndGgpKTpsPXU9aD1bXSx7YXhlczp7Y29sdW1uczp7dHVwbGVzOnV9LHJvd3M6e3R1cGxlczpofX0sZGF0YTpsfX0sX25vcm1hbGl6ZURhdGE6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbz0odHx8MSkqKG58fDEpLGE9QXJyYXkobykscz1lLmxlbmd0aDtpZihzPT09bylyZXR1cm4gZTtmb3Iocj0wO28+cjtyKyspYVtyXT17dmFsdWU6XCJcIixmbXRWYWx1ZTpcIlwiLG9yZGluYWw6cn07Zm9yKHI9MDtzPnI7cisrKWk9ZVtyXSxpJiYoYVtpLm9yZGluYWxdPWkpO3JldHVybiBhfX0pLGp0PWd0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3RoaXMudHJhbnNwb3J0PXQsdGhpcy5vcHRpb25zPXQub3B0aW9uc3x8e30sdGhpcy50cmFuc3BvcnQuZGlzY292ZXJ8fGt0KGUuZGlzY292ZXIpJiYodGhpcy5kaXNjb3Zlcj1lLmRpc2NvdmVyKX0scmVhZDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50cmFuc3BvcnQucmVhZChlKX0sdXBkYXRlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRyYW5zcG9ydC51cGRhdGUoZSl9LGNyZWF0ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50cmFuc3BvcnQuY3JlYXRlKGUpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRyYW5zcG9ydC5kZXN0cm95KGUpfSxkaXNjb3ZlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50cmFuc3BvcnQuZGlzY292ZXI/dGhpcy50cmFuc3BvcnQuZGlzY292ZXIoZSk6KGUuc3VjY2Vzcyh7fSksdCl9LGNhdGFsb2c6ZnVuY3Rpb24obil7dmFyIGkscj10aGlzLm9wdGlvbnN8fHt9O3JldHVybiBuPT09dD8oci5jb25uZWN0aW9ufHx7fSkuY2F0YWxvZzooaT1yLmNvbm5lY3Rpb258fHt9LGkuY2F0YWxvZz1uLHRoaXMub3B0aW9ucy5jb25uZWN0aW9uPWksZS5leHRlbmQodGhpcy50cmFuc3BvcnQub3B0aW9ucyx7Y29ubmVjdGlvbjppfSksdCl9LGN1YmU6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLm9wdGlvbnN8fHt9O3JldHVybiBlPT09dD8oaS5jb25uZWN0aW9ufHx7fSkuY3ViZToobj1pLmNvbm5lY3Rpb258fHt9LG4uY3ViZT1lLHRoaXMub3B0aW9ucy5jb25uZWN0aW9uPW4sYnQoITAsdGhpcy50cmFuc3BvcnQub3B0aW9ucyx7Y29ubmVjdGlvbjpufSksdCl9fSksR3Q9dnQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQpe3ZhciByLG89KCh0fHx7fSkuc2NoZW1hfHx7fSkuY3ViZSxhPVwiY29sdW1uc1wiLHM9e2F4ZXM6eXQsY3ViZXM6eXQsY2F0YWxvZ3M6eXQsbWVhc3VyZXM6eXQsZGltZW5zaW9uczp5dCxoaWVyYXJjaGllczp5dCxsZXZlbHM6eXQsbWVtYmVyczp5dH07byYmKHM9ZS5leHRlbmQocyx0aGlzLl9jdWJlU2NoZW1hKG8pKSx0aGlzLmN1YmVCdWlsZGVyPW5ldyBXdChvKSksdnQuZm4uaW5pdC5jYWxsKHRoaXMsYnQoITAse30se3NjaGVtYTpzfSx0KSksdGhpcy50cmFuc3BvcnQ9bmV3IGp0KHRoaXMub3B0aW9ucy50cmFuc3BvcnR8fHt9LHRoaXMudHJhbnNwb3J0KSx0aGlzLl9jb2x1bW5zPWkodGhpcy5vcHRpb25zLmNvbHVtbnMpLHRoaXMuX3Jvd3M9aSh0aGlzLm9wdGlvbnMucm93cykscj10aGlzLm9wdGlvbnMubWVhc3VyZXN8fFtdLG51bGwhPT10aGlzLm9wdGlvbnMubWVhc3VyZXMmJlwiW29iamVjdCBPYmplY3RdXCI9PT1fdC5jYWxsKHRoaXMub3B0aW9ucy5tZWFzdXJlcykmJihyPXRoaXMub3B0aW9ucy5tZWFzdXJlcy52YWx1ZXN8fFtdLGE9dGhpcy5vcHRpb25zLm1lYXN1cmVzLmF4aXN8fFwiY29sdW1uc1wiKSx0aGlzLl9tZWFzdXJlcz1uKHJ8fFtdKSx0aGlzLl9tZWFzdXJlc0F4aXM9YSx0aGlzLl9heGVzPXt9fSxfY3ViZVNjaGVtYTpmdW5jdGlvbihlKXtyZXR1cm57ZGltZW5zaW9uczpmdW5jdGlvbigpe3ZhciB0LG49W10saT1lLmRpbWVuc2lvbnM7Zm9yKHQgaW4gaSluLnB1c2goe25hbWU6dCxjYXB0aW9uOmlbdF0uY2FwdGlvbnx8dCx1bmlxdWVOYW1lOnQsZGVmYXVsdEhpZXJhcmNoeTp0LHR5cGU6MX0pO3JldHVybiBlLm1lYXN1cmVzJiZuLnB1c2goe25hbWU6XCJNZWFzdXJlc1wiLGNhcHRpb246XCJNZWFzdXJlc1wiLHVuaXF1ZU5hbWU6XCJNZWFzdXJlc1wiLHR5cGU6Mn0pLG59LGhpZXJhcmNoaWVzOmZ1bmN0aW9uKCl7cmV0dXJuW119LG1lYXN1cmVzOmZ1bmN0aW9uKCl7dmFyIHQsbj1bXSxpPWUubWVhc3VyZXM7Zm9yKHQgaW4gaSluLnB1c2goe25hbWU6dCxjYXB0aW9uOnQsdW5pcXVlTmFtZTp0LGFnZ3JlZ2F0b3I6dH0pO3JldHVybiBufX19LG9wdGlvbnM6e3NlcnZlclNvcnRpbmc6ITAsc2VydmVyUGFnaW5nOiEwLHNlcnZlckZpbHRlcmluZzohMCxzZXJ2ZXJHcm91cGluZzohMCxzZXJ2ZXJBZ2dyZWdhdGVzOiEwfSxjYXRhbG9nOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD90aGlzLnRyYW5zcG9ydC5jYXRhbG9nKCk6KHRoaXMudHJhbnNwb3J0LmNhdGFsb2coZSksdGhpcy5fbWVyZ2VTdGF0ZSh7fSksdGhpcy5fYXhlcz17fSx0aGlzLmRhdGEoW10pLHQpfSxjdWJlOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD90aGlzLnRyYW5zcG9ydC5jdWJlKCk6KHRoaXMudHJhbnNwb3J0LmN1YmUoZSksdGhpcy5fYXhlcz17fSx0aGlzLl9tZXJnZVN0YXRlKHt9KSx0aGlzLmRhdGEoW10pLHQpfSxheGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2F4ZXN9LGNvbHVtbnM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10P3RoaXMuX2NvbHVtbnM6KHRoaXMuX2NsZWFyQXhlc0RhdGE9ITAsdGhpcy5fY29sdW1ucz1pKGUpLHRoaXMucXVlcnkoe2NvbHVtbnM6ZSxyb3dzOnRoaXMucm93c0F4aXNEZXNjcmlwdG9ycygpLG1lYXN1cmVzOnRoaXMubWVhc3VyZXMoKX0pLHQpfSxyb3dzOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD90aGlzLl9yb3dzOih0aGlzLl9jbGVhckF4ZXNEYXRhPSEwLHRoaXMuX3Jvd3M9aShlKSx0aGlzLnF1ZXJ5KHtjb2x1bW5zOnRoaXMuY29sdW1uc0F4aXNEZXNjcmlwdG9ycygpLHJvd3M6ZSxtZWFzdXJlczp0aGlzLm1lYXN1cmVzKCl9KSx0KX0sbWVhc3VyZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10P3RoaXMuX21lYXN1cmVzOih0aGlzLl9jbGVhckF4ZXNEYXRhPSEwLHRoaXMucXVlcnkoe2NvbHVtbnM6dGhpcy5jb2x1bW5zQXhpc0Rlc2NyaXB0b3JzKCkscm93czp0aGlzLnJvd3NBeGlzRGVzY3JpcHRvcnMoKSxtZWFzdXJlczpuKGUpfSksdCl9LG1lYXN1cmVzQXhpczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZWFzdXJlc0F4aXN8fFwiY29sdW1uc1wifSxfZXhwYW5kUGF0aDpmdW5jdGlvbihlLHQpe3ZhciBuLHIsbyxhPVwiY29sdW1uc1wiPT09dD9cImNvbHVtbnNcIjpcInJvd3NcIixzPVwiY29sdW1uc1wiPT09dD9cInJvd3NcIjpcImNvbHVtbnNcIixjPWkoZSksZD1PKGNbYy5sZW5ndGgtMV0pO2Zvcih0aGlzLl9sYXN0RXhwYW5kZWQ9YSxjPWwodGhpcy5heGVzKClbYV0sYyx0aGlzLm1lYXN1cmVzKCkpLG49MDtjLmxlbmd0aD5uO24rKylpZihyPU8oY1tuXSkscj09PWQpe2lmKGNbbl0uZXhwYW5kKXJldHVybjtjW25dLmV4cGFuZD0hMH1lbHNlIGNbbl0uZXhwYW5kPSExO289e30sb1thXT1jLG9bc109dGhpcy5fZGVzY3JpcHRvcnNGb3JBeGlzKHMpLHRoaXMuX3F1ZXJ5KG8pfSxfZGVzY3JpcHRvcnNGb3JBeGlzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuYXhlcygpLG49dGhpc1tlXSgpfHxbXTtyZXR1cm4gdCYmdFtlXSYmdFtlXS50dXBsZXMmJnRbZV0udHVwbGVzWzBdJiYobj1vKHRbZV0udHVwbGVzfHxbXSkpLG59LGNvbHVtbnNBeGlzRGVzY3JpcHRvcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVzY3JpcHRvcnNGb3JBeGlzKFwiY29sdW1uc1wiKX0scm93c0F4aXNEZXNjcmlwdG9yczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZXNjcmlwdG9yc0ZvckF4aXMoXCJyb3dzXCIpfSxfcHJvY2VzczpmdW5jdGlvbihlLHQpe3RoaXMuX3ZpZXc9ZSx0PXR8fHt9LHQuaXRlbXM9dC5pdGVtc3x8dGhpcy5fdmlldyx0aGlzLnRyaWdnZXIoeHQsdCl9LF9xdWVyeTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBlfHwodGhpcy5fY2xlYXJBeGVzRGF0YT0hMCksdC5xdWVyeShidCh7fSx7cGFnZTp0LnBhZ2UoKSxwYWdlU2l6ZTp0LnBhZ2VTaXplKCksc29ydDp0LnNvcnQoKSxmaWx0ZXI6dC5maWx0ZXIoKSxncm91cDp0Lmdyb3VwKCksYWdncmVnYXRlOnQuYWdncmVnYXRlKCksY29sdW1uczp0aGlzLmNvbHVtbnNBeGlzRGVzY3JpcHRvcnMoKSxyb3dzOnRoaXMucm93c0F4aXNEZXNjcmlwdG9ycygpLG1lYXN1cmVzOnRoaXMubWVhc3VyZXMoKX0sZSkpfSxxdWVyeTpmdW5jdGlvbih0KXt2YXIgbj10aGlzLl9tZXJnZVN0YXRlKHQpO3JldHVybiB0aGlzLl9kYXRhLmxlbmd0aCYmdGhpcy5jdWJlQnVpbGRlcj8odGhpcy5fcGFyYW1zKG4pLHRoaXMuX3VwZGF0ZUxvY2FsRGF0YSh0aGlzLl9wcmlzdGluZURhdGEpLGUuRGVmZXJyZWQoKS5yZXNvbHZlKCkucHJvbWlzZSgpKTp0aGlzLnJlYWQobil9LF9tZXJnZVN0YXRlOmZ1bmN0aW9uKGUpe3JldHVybiBlPXZ0LmZuLl9tZXJnZVN0YXRlLmNhbGwodGhpcyxlKSxlIT09dCYmKHRoaXMuX21lYXN1cmVzPW4oZS5tZWFzdXJlcyksZS5jb2x1bW5zP2UuY29sdW1ucz1pKGUuY29sdW1ucyk6ZS5jb2x1bW5zfHwodGhpcy5fY29sdW1ucz1bXSksZS5yb3dzP2Uucm93cz1pKGUucm93cyk6ZS5yb3dzfHwodGhpcy5fcm93cz1bXSkpLGV9LGZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gZT09PXQ/dGhpcy5fZmlsdGVyOih0aGlzLl9jbGVhckF4ZXNEYXRhPSEwLHRoaXMuX3F1ZXJ5KHtmaWx0ZXI6ZSxwYWdlOjF9KSx0KX0sZXhwYW5kQ29sdW1uOmZ1bmN0aW9uKGUpe3RoaXMuX2V4cGFuZFBhdGgoZSxcImNvbHVtbnNcIil9LGV4cGFuZFJvdzpmdW5jdGlvbihlKXt0aGlzLl9leHBhbmRQYXRoKGUsXCJyb3dzXCIpfSxzdWNjZXNzOmZ1bmN0aW9uKGUpe3ZhciB0O3RoaXMuY3ViZUJ1aWxkZXImJih0PSh0aGlzLnJlYWRlci5kYXRhKGUpfHxbXSkuc2xpY2UoMCkpLHZ0LmZuLnN1Y2Nlc3MuY2FsbCh0aGlzLGUpLHQmJih0aGlzLl9wcmlzdGluZURhdGE9dCl9LF9wcm9jZXNzUmVzdWx0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYSxzLGwsYyxkLHUsaDtyZXR1cm4gdGhpcy5jdWJlQnVpbGRlciYmKG49dGhpcy5jdWJlQnVpbGRlci5wcm9jZXNzKGUsdGhpcy5fcmVxdWVzdERhdGEpLGU9bi5kYXRhLHQ9bi5heGVzKSxjPXRoaXMuY29sdW1ucygpLmxlbmd0aCxkPXRoaXMucm93cygpLmxlbmd0aCx1PXQuY29sdW1ucyYmdC5jb2x1bW5zLnR1cGxlcyxjfHwhZHx8IXV8fCF0aGlzLl9yb3dNZWFzdXJlcygpLmxlbmd0aCYmdGhpcy5tZWFzdXJlcygpLmxlbmd0aHx8KHQ9e2NvbHVtbnM6e30scm93czp0LmNvbHVtbnN9KSxjfHxkfHxcInJvd3NcIiE9PXRoaXMubWVhc3VyZXNBeGlzKCl8fCF1fHwodD17Y29sdW1uczp7fSxyb3dzOnQuY29sdW1uc30pLHRoaXMuX2F4ZXM9e2NvbHVtbnM6eSh0aGlzLl9heGVzLmNvbHVtbnMpLHJvd3M6eSh0aGlzLl9heGVzLnJvd3MpfSx0PXtjb2x1bW5zOnkodC5jb2x1bW5zKSxyb3dzOnkodC5yb3dzKX0saT10aGlzLl9ub3JtYWxpemVUdXBsZXModC5jb2x1bW5zLnR1cGxlcyx0aGlzLl9heGVzLmNvbHVtbnMudHVwbGVzLHRoaXMuX2NvbHVtbk1lYXN1cmVzKCkpLHI9dGhpcy5fbm9ybWFsaXplVHVwbGVzKHQucm93cy50dXBsZXMsdGhpcy5fYXhlcy5yb3dzLnR1cGxlcyx0aGlzLl9yb3dNZWFzdXJlcygpKSx0aGlzLmN1YmVCdWlsZGVyfHwoZT10aGlzLl9ub3JtYWxpemVEYXRhKHtjb2x1bW5zTGVuZ3RoOnQuY29sdW1ucy50dXBsZXMubGVuZ3RoLHJvd3NMZW5ndGg6dC5yb3dzLnR1cGxlcy5sZW5ndGgsY29sdW1uSW5kZXhlczppLHJvd0luZGV4ZXM6cixkYXRhOmV9KSksXCJyb3dzXCI9PXRoaXMuX2xhc3RFeHBhbmRlZD8obz10LmNvbHVtbnMudHVwbGVzLHM9dGhpcy5fY29sdW1uTWVhc3VyZXMoKSxhPWYodC5jb2x1bW5zLHRoaXMuX2F4ZXMuY29sdW1ucyxzKSxhJiYobD1cImNvbHVtbnNcIix0LmNvbHVtbnM9YSxnKG8sYS50dXBsZXMsdC5yb3dzLnR1cGxlcy5sZW5ndGgscyxlKSxlPXRoaXMuX25vcm1hbGl6ZURhdGEoe2NvbHVtbnNMZW5ndGg6Xyh0LmNvbHVtbnMudHVwbGVzLHMpLHJvd3NMZW5ndGg6dC5yb3dzLnR1cGxlcy5sZW5ndGgsZGF0YTplfSkpKTpcImNvbHVtbnNcIj09dGhpcy5fbGFzdEV4cGFuZGVkJiYobz10LnJvd3MudHVwbGVzLHM9dGhpcy5fcm93TWVhc3VyZXMoKSxhPWYodC5yb3dzLHRoaXMuX2F4ZXMucm93cyxzKSxhJiYobD1cInJvd3NcIix0LnJvd3M9YSxtKG8sYS50dXBsZXMsdC5jb2x1bW5zLnR1cGxlcy5sZW5ndGgscyxlKSxlPXRoaXMuX25vcm1hbGl6ZURhdGEoe2NvbHVtbnNMZW5ndGg6Xyh0LnJvd3MudHVwbGVzLHMpLHJvd3NMZW5ndGg6dC5jb2x1bW5zLnR1cGxlcy5sZW5ndGgsZGF0YTplfSkpKSx0aGlzLl9sYXN0RXhwYW5kZWQ9bnVsbCxoPXRoaXMuX21lcmdlQXhlcyh0LGUsbCksdGhpcy5fYXhlcz1oLmF4ZXMsaC5kYXRhfSxfcmVhZERhdGE6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5yZWFkZXIuYXhlcyhlKSxuPXRoaXMucmVhZGVyLmRhdGEoZSk7cmV0dXJuIHRoaXMuX3Byb2Nlc3NSZXN1bHQobix0KX0sX2NyZWF0ZVR1cGxlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sYSxzLGw9ZS5tZW1iZXJzLGM9bC5sZW5ndGgsZD17bWVtYmVyczpbXX0sdT0wO2Zvcih0JiYoYy09MSk7Yz51O3UrKylyPWxbdV0sYT0rci5sZXZlbE51bSxpPXIubmFtZSxvPXIucGFyZW50TmFtZSxzPXIuY2FwdGlvbnx8aSxuJiYocz1cIkFsbFwiLDA9PT1hP289ci5uYW1lOmEtPTEsaT1vKSxkLm1lbWJlcnMucHVzaCh7bmFtZTppLGNoaWxkcmVuOltdLGNhcHRpb246cyxsZXZlbE5hbWU6byxsZXZlbE51bTpcIlwiK2EsaGFzQ2hpbGRyZW46bixoaWVyYXJjaHk6byxwYXJlbnROYW1lOm4/XCJcIjpvfSk7cmV0dXJuIHQmJmQubWVtYmVycy5wdXNoKHtuYW1lOnQubmFtZSxjaGlsZHJlbjpbXX0pLGR9LF9oYXNSb290OmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYSxzO2lmKHQubGVuZ3RoKXJldHVybiB4KHQsZSkudHVwbGU7Zm9yKG49ZS5tZW1iZXJzLHI9ITAsYT0wLHM9bi5sZW5ndGg7cz5hO2ErKylpZihpPW5bYV0sbz0raS5sZXZlbE51bXx8MCwwIT09byl7cj0hMTticmVha31yZXR1cm4gcn0sX21lcmdlQXhlczpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGEscyxsPXRoaXMuX2NvbHVtbk1lYXN1cmVzKCksYz10aGlzLl9yb3dNZWFzdXJlcygpLGQ9dGhpcy5heGVzKCksdT1lLnJvd3MudHVwbGVzLmxlbmd0aCxoPV8oZC5jb2x1bW5zLnR1cGxlcyxsKSxwPWUuY29sdW1ucy50dXBsZXMubGVuZ3RoO3JldHVyblwiY29sdW1uc1wiPT1uPyhwPWgscj1lLmNvbHVtbnMudHVwbGVzKToocj1BKGUuY29sdW1ucy50dXBsZXMsbCksdD1NKHIsdCkpLG89YihkLmNvbHVtbnMudHVwbGVzLHIsbCksXCJyb3dzXCI9PW4/KHU9XyhlLnJvd3MudHVwbGVzLGMpLHI9ZS5yb3dzLnR1cGxlcyk6KHI9QShlLnJvd3MudHVwbGVzLGMpLHQ9RShyLHQpKSxhPWIoZC5yb3dzLnR1cGxlcyxyLGMpLGQuY29sdW1ucy50dXBsZXM9by50dXBsZXMsZC5yb3dzLnR1cGxlcz1hLnR1cGxlcyxoIT09XyhkLmNvbHVtbnMudHVwbGVzLGwpPyhpPW8uaW5kZXgrdyhvLnBhcnNlZFJvb3Qsby5tZW1iZXJJbmRleCxsKSxzPWgrcCx0PXRoaXMuX21lcmdlQ29sdW1uRGF0YSh0LGksdSxwLHMpKTooaT1hLmluZGV4K3coYS5wYXJzZWRSb290LGEubWVtYmVySW5kZXgsYyksdD10aGlzLl9tZXJnZVJvd0RhdGEodCxpLHUscCkpLHtheGVzOmQsZGF0YTp0fX0sX21lcmdlQ29sdW1uRGF0YTpmdW5jdGlvbihlLHQsbixpLHIpe3ZhciBvLGEscyxsPXRoaXMuZGF0YSgpLnRvSlNPTigpLGM9MCxkPU1hdGgubWF4KHRoaXMuX2NvbHVtbk1lYXN1cmVzKCkubGVuZ3RoLDEpO2ZvcihuPU1hdGgubWF4KG4sMSksbC5sZW5ndGg+MCYmKGM9ZCxyLT1kKSxvPTA7bj5vO28rKylhPXQrbypyLHM9ZS5zcGxpY2UoMCxpKSxzLnNwbGljZSgwLGMpLFtdLnNwbGljZS5hcHBseShsLFthLDBdLmNvbmNhdChzKSk7cmV0dXJuIGx9LF9tZXJnZVJvd0RhdGE6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbyxhLHM9dGhpcy5kYXRhKCkudG9KU09OKCksbD1NYXRoLm1heCh0aGlzLl9yb3dNZWFzdXJlcygpLmxlbmd0aCwxKTtmb3IoaT1NYXRoLm1heChpLDEpLHMubGVuZ3RoPjAmJihuLT1sLGUuc3BsaWNlKDAsaSpsKSkscj0wO24+cjtyKyspYT1lLnNwbGljZSgwLGkpLG89dCppK3IqaSxbXS5zcGxpY2UuYXBwbHkocyxbbywwXS5jb25jYXQoYSkpO3JldHVybiBzfSxfY29sdW1uTWVhc3VyZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1lYXN1cmVzKCksdD1bXTtyZXR1cm5cImNvbHVtbnNcIj09PXRoaXMubWVhc3VyZXNBeGlzKCkmJigwPT09dGhpcy5jb2x1bW5zKCkubGVuZ3RoP3Q9ZTplLmxlbmd0aD4xJiYodD1lKSksdH0sX3Jvd01lYXN1cmVzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5tZWFzdXJlcygpLHQ9W107cmV0dXJuXCJyb3dzXCI9PT10aGlzLm1lYXN1cmVzQXhpcygpJiYoMD09PXRoaXMucm93cygpLmxlbmd0aD90PWU6ZS5sZW5ndGg+MSYmKHQ9ZSkpLHR9LF91cGRhdGVMb2NhbERhdGE6ZnVuY3Rpb24oZSx0KXt0aGlzLmN1YmVCdWlsZGVyJiYodCYmKHRoaXMuX3JlcXVlc3REYXRhPXQpLGU9dGhpcy5fcHJvY2Vzc1Jlc3VsdChlKSksdGhpcy5fZGF0YT10aGlzLl9vYnNlcnZlKGUpLHRoaXMuX3Jhbmdlcz1bXSx0aGlzLl9hZGRSYW5nZSh0aGlzLl9kYXRhKSx0aGlzLl90b3RhbD10aGlzLl9kYXRhLmxlbmd0aCx0aGlzLl9wcmlzdGluZVRvdGFsPXRoaXMuX3RvdGFsLHRoaXMuX3Byb2Nlc3ModGhpcy5fZGF0YSl9LGRhdGE6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztyZXR1cm4gZT09PXQ/bi5fZGF0YToodGhpcy5fcHJpc3RpbmVEYXRhPWUuc2xpY2UoMCksdGhpcy5fdXBkYXRlTG9jYWxEYXRhKGUse2NvbHVtbnM6dGhpcy5jb2x1bW5zKCkscm93czp0aGlzLnJvd3MoKSxtZWFzdXJlczp0aGlzLm1lYXN1cmVzKCl9KSx0KX0sX25vcm1hbGl6ZVR1cGxlczpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGE9bi5sZW5ndGh8fDEscz0wLGw9W10sYz17fSxkPTA7aWYoZS5sZW5ndGgpe2lmKCF0aGlzLl9oYXNSb290KGVbMF0sdCkpe2Zvcig7YT5zO3MrKylsLnB1c2godGhpcy5fY3JlYXRlVHVwbGUoZVswXSxuW3NdLCEwKSksY1tzXT1zO2Uuc3BsaWNlLmFwcGx5KGUsWzAsZS5sZW5ndGhdLmNvbmNhdChsKS5jb25jYXQoZSkpLHM9YX1pZihuLmxlbmd0aClmb3Iobz1pPWVbc10scj1pLm1lbWJlcnMubGVuZ3RoLTE7aTspe2lmKGQ+PWEmJihkPTApLGkubWVtYmVyc1tyXS5uYW1lIT09bltkXS5uYW1lJiYoZS5zcGxpY2UocywwLHRoaXMuX2NyZWF0ZVR1cGxlKGksbltkXSkpLGNbc109cykscys9MSxkKz0xLGk9ZVtzXSxhPmQmJighaXx8Y3QobyxyLTEpIT09Y3QoaSxyLTEpKSl7Zm9yKDthPmQ7ZCsrKWUuc3BsaWNlKHMsMCx0aGlzLl9jcmVhdGVUdXBsZShvLG5bZF0pKSxjW3NdPXMscys9MTtpPWVbc119bz1pfXJldHVybiBjfX0sX25vcm1hbGl6ZURhdGE6ZnVuY3Rpb24oZSl7dmFyIG4saSxyPWUuZGF0YSxvPWUuY29sdW1uSW5kZXhlc3x8e30sYT1lLnJvd0luZGV4ZXN8fHt9LHM9ZS5jb2x1bW5zTGVuZ3RofHwxLGw9cyooZS5yb3dzTGVuZ3RofHwxKSxjPTAsZD0wLHU9MCxoPUFycmF5KGwpO2lmKHIubGVuZ3RoPT09bClyZXR1cm4gcjtmb3IoO2w+YztjKyspe2lmKGFbcGFyc2VJbnQoYy9zLDEwKV0hPT10KWZvcihpPTA7cz5pO2krKyloW2NdPXt2YWx1ZTpcIlwiLGZtdFZhbHVlOlwiXCIsb3JkaW5hbDpjfSxjKz0xO2lmKG9bYyVzXSE9PXQmJihoW2NdPXt2YWx1ZTpcIlwiLGZtdFZhbHVlOlwiXCIsb3JkaW5hbDpjfSxjKz0xKSxuPXJbZF0pe2lmKG4ub3JkaW5hbC11PjEpZm9yKHUrPTE7bi5vcmRpbmFsPnU7dSsrKWhbY109e3ZhbHVlOlwiXCIsZm10VmFsdWU6XCJcIixvcmRpbmFsOmN9LGMrPTE7dT1uLm9yZGluYWwsbi5vcmRpbmFsPWMsaFtjXT1uLGQrPTF9ZWxzZSBoW2NdPXt2YWx1ZTpcIlwiLGZtdFZhbHVlOlwiXCIsb3JkaW5hbDpjfX1yZXR1cm4gaH0sZGlzY292ZXI6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzLHI9aS50cmFuc3BvcnQ7cmV0dXJuIGUuRGVmZXJyZWQoZnVuY3Rpb24oZSl7ci5kaXNjb3ZlcihidCh7c3VjY2VzczpmdW5jdGlvbih0KXt0PWkucmVhZGVyLnBhcnNlKHQpLGkuX2hhbmRsZUN1c3RvbUVycm9ycyh0KXx8KG4mJih0PW4odCkpLGUucmVzb2x2ZSh0KSl9LGVycm9yOmZ1bmN0aW9uKHQsbixyKXtlLnJlamVjdCh0KSxpLmVycm9yKHQsbixyKX19LHQpKX0pLnByb21pc2UoKS5kb25lKGZ1bmN0aW9uKCl7aS50cmlnZ2VyKFwic2NoZW1hQ2hhbmdlXCIpfSl9LHNjaGVtYU1lYXN1cmVzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gZS5kaXNjb3Zlcih7ZGF0YTp7Y29tbWFuZDpcInNjaGVtYU1lYXN1cmVzXCIscmVzdHJpY3Rpb25zOntjYXRhbG9nTmFtZTplLnRyYW5zcG9ydC5jYXRhbG9nKCksY3ViZU5hbWU6ZS50cmFuc3BvcnQuY3ViZSgpfX19LGZ1bmN0aW9uKHQpe3JldHVybiBlLnJlYWRlci5tZWFzdXJlcyh0KX0pfSxzY2hlbWFLUElzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gZS5kaXNjb3Zlcih7ZGF0YTp7Y29tbWFuZDpcInNjaGVtYUtQSXNcIixyZXN0cmljdGlvbnM6e2NhdGFsb2dOYW1lOmUudHJhbnNwb3J0LmNhdGFsb2coKSxjdWJlTmFtZTplLnRyYW5zcG9ydC5jdWJlKCl9fX0sZnVuY3Rpb24odCl7cmV0dXJuIGUucmVhZGVyLmtwaXModCl9KX0sc2NoZW1hRGltZW5zaW9uczpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIGUuZGlzY292ZXIoe2RhdGE6e2NvbW1hbmQ6XCJzY2hlbWFEaW1lbnNpb25zXCIscmVzdHJpY3Rpb25zOntjYXRhbG9nTmFtZTplLnRyYW5zcG9ydC5jYXRhbG9nKCksY3ViZU5hbWU6ZS50cmFuc3BvcnQuY3ViZSgpfX19LGZ1bmN0aW9uKHQpe3JldHVybiBlLnJlYWRlci5kaW1lbnNpb25zKHQpfSl9LHNjaGVtYUhpZXJhcmNoaWVzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIHQuZGlzY292ZXIoe2RhdGE6e2NvbW1hbmQ6XCJzY2hlbWFIaWVyYXJjaGllc1wiLHJlc3RyaWN0aW9uczp7Y2F0YWxvZ05hbWU6dC50cmFuc3BvcnQuY2F0YWxvZygpLGN1YmVOYW1lOnQudHJhbnNwb3J0LmN1YmUoKSxkaW1lbnNpb25VbmlxdWVOYW1lOmV9fX0sZnVuY3Rpb24oZSl7cmV0dXJuIHQucmVhZGVyLmhpZXJhcmNoaWVzKGUpfSl9LHNjaGVtYUxldmVsczpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0LmRpc2NvdmVyKHtkYXRhOntjb21tYW5kOlwic2NoZW1hTGV2ZWxzXCIscmVzdHJpY3Rpb25zOntjYXRhbG9nTmFtZTp0LnRyYW5zcG9ydC5jYXRhbG9nKCksY3ViZU5hbWU6dC50cmFuc3BvcnQuY3ViZSgpLGhpZXJhcmNoeVVuaXF1ZU5hbWU6ZX19fSxmdW5jdGlvbihlKXtyZXR1cm4gdC5yZWFkZXIubGV2ZWxzKGUpfSl9LHNjaGVtYUN1YmVzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gZS5kaXNjb3Zlcih7ZGF0YTp7Y29tbWFuZDpcInNjaGVtYUN1YmVzXCIscmVzdHJpY3Rpb25zOntjYXRhbG9nTmFtZTplLnRyYW5zcG9ydC5jYXRhbG9nKCl9fX0sZnVuY3Rpb24odCl7cmV0dXJuIGUucmVhZGVyLmN1YmVzKHQpfSl9LHNjaGVtYUNhdGFsb2dzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gZS5kaXNjb3Zlcih7ZGF0YTp7Y29tbWFuZDpcInNjaGVtYUNhdGFsb2dzXCJ9fSxmdW5jdGlvbih0KXtyZXR1cm4gZS5yZWFkZXIuY2F0YWxvZ3ModCl9KX0sc2NoZW1hTWVtYmVyczpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0LmRpc2NvdmVyKHtkYXRhOntjb21tYW5kOlwic2NoZW1hTWVtYmVyc1wiLHJlc3RyaWN0aW9uczpidCh7Y2F0YWxvZ05hbWU6dC50cmFuc3BvcnQuY2F0YWxvZygpLGN1YmVOYW1lOnQudHJhbnNwb3J0LmN1YmUoKX0sZSl9fSxmdW5jdGlvbihlKXtyZXR1cm4gdC5yZWFkZXIubWVtYmVycyhlKX0pfSxfcGFyYW1zOmZ1bmN0aW9uKGUpe3RoaXMuX2NsZWFyQXhlc0RhdGEmJih0aGlzLl9heGVzPXt9LHRoaXMuX2RhdGE9dGhpcy5fb2JzZXJ2ZShbXSksdGhpcy5fY2xlYXJBeGVzRGF0YT0hMSx0aGlzLnRyaWdnZXIoVHQpKTt2YXIgdD12dC5mbi5fcGFyYW1zLmNhbGwodGhpcyxlKTtyZXR1cm4gdD1idCh7bWVhc3VyZXM6dGhpcy5tZWFzdXJlcygpLG1lYXN1cmVzQXhpczp0aGlzLm1lYXN1cmVzQXhpcygpLGNvbHVtbnM6dGhpcy5jb2x1bW5zKCkscm93czp0aGlzLnJvd3MoKX0sdCksdGhpcy5jdWJlQnVpbGRlciYmKHRoaXMuX3JlcXVlc3REYXRhPXQpLHR9fSk7R3QuY3JlYXRlPWZ1bmN0aW9uKGUpe2U9ZSYmZS5wdXNoP3tkYXRhOmV9OmU7dmFyIHQ9ZXx8e30sbj10LmRhdGE7aWYodC5kYXRhPW4sISh0IGluc3RhbmNlb2YgR3QpJiZ0IGluc3RhbmNlb2YgcHQuZGF0YS5EYXRhU291cmNlKXRocm93IEVycm9yKFwiSW5jb3JyZWN0IERhdGFTb3VyY2UgdHlwZS4gT25seSBQaXZvdERhdGFTb3VyY2UgaW5zdGFuY2VzIGFyZSBzdXBwb3J0ZWRcIik7cmV0dXJuIHQgaW5zdGFuY2VvZiBHdD90Om5ldyBHdCh0KX0sWT17Y29udGFpbnM6JywgSW5TdHIoezB9LkN1cnJlbnRNZW1iZXIuTUVNQkVSX0NBUFRJT04sXCJ7MX1cIikgPiAwJyxkb2Vzbm90Y29udGFpbjonLCBJblN0cih7MH0uQ3VycmVudE1lbWJlci5NRU1CRVJfQ0FQVElPTixcInsxfVwiKSA9IDAnLHN0YXJ0c3dpdGg6JywgTGVmdCh7MH0uQ3VycmVudE1lbWJlci5NRU1CRVJfQ0FQVElPTixMZW4oXCJ7MX1cIikpPVwiezF9XCInLGVuZHN3aXRoOicsIFJpZ2h0KHswfS5DdXJyZW50TWVtYmVyLk1FTUJFUl9DQVBUSU9OLExlbihcInsxfVwiKSk9XCJ7MX1cIicsZXE6JywgezB9LkN1cnJlbnRNZW1iZXIuTUVNQkVSX0NBUFRJT04gPSBcInsxfVwiJyxuZXE6JywgTk9UIHswfS5DdXJyZW50TWVtYmVyLk1FTUJFUl9DQVBUSU9OID0gXCJ7MX1cIid9LEs9e3NjaGVtYUN1YmVzOlwiTURTQ0hFTUFfQ1VCRVNcIixzY2hlbWFDYXRhbG9nczpcIkRCU0NIRU1BX0NBVEFMT0dTXCIsc2NoZW1hTWVhc3VyZXM6XCJNRFNDSEVNQV9NRUFTVVJFU1wiLHNjaGVtYURpbWVuc2lvbnM6XCJNRFNDSEVNQV9ESU1FTlNJT05TXCIsc2NoZW1hSGllcmFyY2hpZXM6XCJNRFNDSEVNQV9ISUVSQVJDSElFU1wiLHNjaGVtYUxldmVsczpcIk1EU0NIRU1BX0xFVkVMU1wiLHNjaGVtYU1lbWJlcnM6XCJNRFNDSEVNQV9NRU1CRVJTXCIsc2NoZW1hS1BJczpcIk1EU0NIRU1BX0tQSVNcIn0sUT17cmVhZDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGE9JzxFbnZlbG9wZSB4bWxucz1cImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3NvYXAvZW52ZWxvcGUvXCI+PEhlYWRlci8+PEJvZHk+PEV4ZWN1dGUgeG1sbnM9XCJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOnhtbC1hbmFseXNpc1wiPjxDb21tYW5kPjxTdGF0ZW1lbnQ+JztyZXR1cm4gYSs9XCJTRUxFQ1QgTk9OIEVNUFRZIHtcIix0PWUuY29sdW1uc3x8W10sbj1lLnJvd3N8fFtdLGk9ZS5tZWFzdXJlc3x8W10scj1cInJvd3NcIj09PWUubWVhc3VyZXNBeGlzLG89ZS5zb3J0fHxbXSwhdC5sZW5ndGgmJm4ubGVuZ3RoJiYoIWkubGVuZ3RofHxpLmxlbmd0aCYmcikmJih0PW4sbj1bXSxyPSExKSx0Lmxlbmd0aHx8bi5sZW5ndGh8fChyPSExKSx0Lmxlbmd0aD9hKz1VKHQscj9bXTppLG8pOmkubGVuZ3RoJiYhciYmKGErPUwoaSkuam9pbihcIixcIikpLGErPVwifSBESU1FTlNJT04gUFJPUEVSVElFUyBDSElMRFJFTl9DQVJESU5BTElUWSwgUEFSRU5UX1VOSVFVRV9OQU1FIE9OIENPTFVNTlNcIiwobi5sZW5ndGh8fHImJmkubGVuZ3RoPjEpJiYoYSs9XCIsIE5PTiBFTVBUWSB7XCIsYSs9bi5sZW5ndGg/VShuLHI/aTpbXSxvKTpMKGkpLmpvaW4oXCIsXCIpLGErPVwifSBESU1FTlNJT04gUFJPUEVSVElFUyBDSElMRFJFTl9DQVJESU5BTElUWSwgUEFSRU5UX1VOSVFVRV9OQU1FIE9OIFJPV1NcIiksZS5maWx0ZXI/KGErPVwiIEZST00gXCIsYSs9XCIoXCIsYSs9aihlLmZpbHRlcixlLmNvbm5lY3Rpb24uY3ViZSksYSs9XCIpXCIpOmErPVwiIEZST00gW1wiK2UuY29ubmVjdGlvbi5jdWJlK1wiXVwiLDE9PWkubGVuZ3RoJiZ0Lmxlbmd0aCYmKGErPVwiIFdIRVJFIChcIitMKGkpLmpvaW4oXCIsXCIpK1wiKVwiKSxhKz1cIjwvU3RhdGVtZW50PjwvQ29tbWFuZD48UHJvcGVydGllcz48UHJvcGVydHlMaXN0PjxDYXRhbG9nPlwiK2UuY29ubmVjdGlvbi5jYXRhbG9nK1wiPC9DYXRhbG9nPjxGb3JtYXQ+TXVsdGlkaW1lbnNpb25hbDwvRm9ybWF0PjwvUHJvcGVydHlMaXN0PjwvUHJvcGVydGllcz48L0V4ZWN1dGU+PC9Cb2R5PjwvRW52ZWxvcGU+XCIsYS5yZXBsYWNlKC9cXCYvZyxcIiZhbXA7XCIpfSxkaXNjb3ZlcjpmdW5jdGlvbih0KXt0PXR8fHt9O3ZhciBuPSc8RW52ZWxvcGUgeG1sbnM9XCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy9zb2FwL2VudmVsb3BlL1wiPjxIZWFkZXIvPjxCb2R5PjxEaXNjb3ZlciB4bWxucz1cInVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206eG1sLWFuYWx5c2lzXCI+JztyZXR1cm4gbis9XCI8UmVxdWVzdFR5cGU+XCIrKEtbdC5jb21tYW5kXXx8dC5jb21tYW5kKStcIjwvUmVxdWVzdFR5cGU+XCIsbis9XCI8UmVzdHJpY3Rpb25zPlwiK0coXCJSZXN0cmljdGlvbkxpc3RcIix0LnJlc3RyaWN0aW9ucywhMCkrXCI8L1Jlc3RyaWN0aW9ucz5cIix0LmNvbm5lY3Rpb24mJnQuY29ubmVjdGlvbi5jYXRhbG9nJiYodC5wcm9wZXJ0aWVzPWUuZXh0ZW5kKHt9LHtDYXRhbG9nOnQuY29ubmVjdGlvbi5jYXRhbG9nfSx0LnByb3BlcnRpZXMpKSxuKz1cIjxQcm9wZXJ0aWVzPlwiK0coXCJQcm9wZXJ0eUxpc3RcIix0LnByb3BlcnRpZXMpK1wiPC9Qcm9wZXJ0aWVzPlwiLG4rPVwiPC9EaXNjb3Zlcj48L0JvZHk+PC9FbnZlbG9wZT5cIn19LFg9cHQuZGF0YS5SZW1vdGVUcmFuc3BvcnQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0PWU7ZT10aGlzLm9wdGlvbnM9YnQoITAse30sdGhpcy5vcHRpb25zLGUpLHB0LmRhdGEuUmVtb3RlVHJhbnNwb3J0LmNhbGwodGhpcyxlKSxrdCh0LmRpc2NvdmVyKT90aGlzLmRpc2NvdmVyPXQuZGlzY292ZXI6XCJzdHJpbmdcIj09dHlwZW9mIHQuZGlzY292ZXI/dGhpcy5vcHRpb25zLmRpc2NvdmVyPXt1cmw6dC5kaXNjb3Zlcn06dC5kaXNjb3Zlcnx8KHRoaXMub3B0aW9ucy5kaXNjb3Zlcj10aGlzLm9wdGlvbnMucmVhZCl9LHNldHVwOmZ1bmN0aW9uKHQsbil7cmV0dXJuIHQuZGF0YT10LmRhdGF8fHt9LGUuZXh0ZW5kKCEwLHQuZGF0YSx7Y29ubmVjdGlvbjp0aGlzLm9wdGlvbnMuY29ubmVjdGlvbn0pLHB0LmRhdGEuUmVtb3RlVHJhbnNwb3J0LmZuLnNldHVwLmNhbGwodGhpcyx0LG4pfSxvcHRpb25zOntyZWFkOntkYXRhVHlwZTpcInRleHRcIixjb250ZW50VHlwZTpcInRleHQveG1sXCIsdHlwZTpcIlBPU1RcIn0sZGlzY292ZXI6e2RhdGFUeXBlOlwidGV4dFwiLGNvbnRlbnRUeXBlOlwidGV4dC94bWxcIix0eXBlOlwiUE9TVFwifSxwYXJhbWV0ZXJNYXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gUVt0XShlLHQpfX0sZGlzY292ZXI6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYWpheCh0aGlzLnNldHVwKHQsXCJkaXNjb3ZlclwiKSl9fSksSj17Y3ViZXM6e25hbWU6cHQuZ2V0dGVyKFwiQ1VCRV9OQU1FWycjdGV4dCddXCIsITApLGNhcHRpb246cHQuZ2V0dGVyKFwiQ1VCRV9DQVBUSU9OWycjdGV4dCddXCIsITApLGRlc2NyaXB0aW9uOnB0LmdldHRlcihcIkRFU0NSSVBUSU9OWycjdGV4dCddXCIsITApLHR5cGU6cHQuZ2V0dGVyKFwiQ1VCRV9UWVBFWycjdGV4dCddXCIsITApfSxjYXRhbG9nczp7bmFtZTpwdC5nZXR0ZXIoXCJDQVRBTE9HX05BTUVbJyN0ZXh0J11cIiwhMCksZGVzY3JpcHRpb246cHQuZ2V0dGVyKFwiREVTQ1JJUFRJT05bJyN0ZXh0J11cIiwhMCl9LG1lYXN1cmVzOntuYW1lOnB0LmdldHRlcihcIk1FQVNVUkVfTkFNRVsnI3RleHQnXVwiLCEwKSxjYXB0aW9uOnB0LmdldHRlcihcIk1FQVNVUkVfQ0FQVElPTlsnI3RleHQnXVwiLCEwKSx1bmlxdWVOYW1lOnB0LmdldHRlcihcIk1FQVNVUkVfVU5JUVVFX05BTUVbJyN0ZXh0J11cIiwhMCksZGVzY3JpcHRpb246cHQuZ2V0dGVyKFwiREVTQ1JJUFRJT05bJyN0ZXh0J11cIiwhMCksYWdncmVnYXRvcjpwdC5nZXR0ZXIoXCJNRUFTVVJFX0FHR1JFR0FUT1JbJyN0ZXh0J11cIiwhMCksZ3JvdXBOYW1lOnB0LmdldHRlcihcIk1FQVNVUkVHUk9VUF9OQU1FWycjdGV4dCddXCIsITApLGRpc3BsYXlGb2xkZXI6cHQuZ2V0dGVyKFwiTUVBU1VSRV9ESVNQTEFZX0ZPTERFUlsnI3RleHQnXVwiLCEwKSxkZWZhdWx0Rm9ybWF0OnB0LmdldHRlcihcIkRFRkFVTFRfRk9STUFUX1NUUklOR1snI3RleHQnXVwiLCEwKX0sa3Bpczp7bmFtZTpwdC5nZXR0ZXIoXCJLUElfTkFNRVsnI3RleHQnXVwiLCEwKSxjYXB0aW9uOnB0LmdldHRlcihcIktQSV9DQVBUSU9OWycjdGV4dCddXCIsITApLHZhbHVlOnB0LmdldHRlcihcIktQSV9WQUxVRVsnI3RleHQnXVwiLCEwKSxnb2FsOnB0LmdldHRlcihcIktQSV9HT0FMWycjdGV4dCddXCIsITApLHN0YXR1czpwdC5nZXR0ZXIoXCJLUElfU1RBVFVTWycjdGV4dCddXCIsITApLHRyZW5kOnB0LmdldHRlcihcIktQSV9UUkVORFsnI3RleHQnXVwiLCEwKSxzdGF0dXNHcmFwaGljOnB0LmdldHRlcihcIktQSV9TVEFUVVNfR1JBUEhJQ1snI3RleHQnXVwiLCEwKSx0cmVuZEdyYXBoaWM6cHQuZ2V0dGVyKFwiS1BJX1RSRU5EX0dSQVBISUNbJyN0ZXh0J11cIiwhMCksZGVzY3JpcHRpb246cHQuZ2V0dGVyKFwiS1BJX0RFU0NSSVBUSU9OWycjdGV4dCddXCIsITApLGdyb3VwTmFtZTpwdC5nZXR0ZXIoXCJNRUFTVVJFR1JPVVBfTkFNRVsnI3RleHQnXVwiLCEwKX0sZGltZW5zaW9uczp7bmFtZTpwdC5nZXR0ZXIoXCJESU1FTlNJT05fTkFNRVsnI3RleHQnXVwiLCEwKSxjYXB0aW9uOnB0LmdldHRlcihcIkRJTUVOU0lPTl9DQVBUSU9OWycjdGV4dCddXCIsITApLGRlc2NyaXB0aW9uOnB0LmdldHRlcihcIkRFU0NSSVBUSU9OWycjdGV4dCddXCIsITApLHVuaXF1ZU5hbWU6cHQuZ2V0dGVyKFwiRElNRU5TSU9OX1VOSVFVRV9OQU1FWycjdGV4dCddXCIsITApLGRlZmF1bHRIaWVyYXJjaHk6cHQuZ2V0dGVyKFwiREVGQVVMVF9ISUVSQVJDSFlbJyN0ZXh0J11cIiwhMCksdHlwZTpwdC5nZXR0ZXIoXCJESU1FTlNJT05fVFlQRVsnI3RleHQnXVwiLCEwKX0saGllcmFyY2hpZXM6e25hbWU6cHQuZ2V0dGVyKFwiSElFUkFSQ0hZX05BTUVbJyN0ZXh0J11cIiwhMCksY2FwdGlvbjpwdC5nZXR0ZXIoXCJISUVSQVJDSFlfQ0FQVElPTlsnI3RleHQnXVwiLCEwKSxkZXNjcmlwdGlvbjpwdC5nZXR0ZXIoXCJERVNDUklQVElPTlsnI3RleHQnXVwiLCEwKSx1bmlxdWVOYW1lOnB0LmdldHRlcihcIkhJRVJBUkNIWV9VTklRVUVfTkFNRVsnI3RleHQnXVwiLCEwKSxkaW1lbnNpb25VbmlxdWVOYW1lOnB0LmdldHRlcihcIkRJTUVOU0lPTl9VTklRVUVfTkFNRVsnI3RleHQnXVwiLCEwKSxkaXNwbGF5Rm9sZGVyOnB0LmdldHRlcihcIkhJRVJBUkNIWV9ESVNQTEFZX0ZPTERFUlsnI3RleHQnXVwiLCEwKSxvcmlnaW46cHQuZ2V0dGVyKFwiSElFUkFSQ0hZX09SSUdJTlsnI3RleHQnXVwiLCEwKSxkZWZhdWx0TWVtYmVyOnB0LmdldHRlcihcIkRFRkFVTFRfTUVNQkVSWycjdGV4dCddXCIsITApfSxsZXZlbHM6e25hbWU6cHQuZ2V0dGVyKFwiTEVWRUxfTkFNRVsnI3RleHQnXVwiLCEwKSxjYXB0aW9uOnB0LmdldHRlcihcIkxFVkVMX0NBUFRJT05bJyN0ZXh0J11cIiwhMCksZGVzY3JpcHRpb246cHQuZ2V0dGVyKFwiREVTQ1JJUFRJT05bJyN0ZXh0J11cIiwhMCksdW5pcXVlTmFtZTpwdC5nZXR0ZXIoXCJMRVZFTF9VTklRVUVfTkFNRVsnI3RleHQnXVwiLCEwKSxkaW1lbnNpb25VbmlxdWVOYW1lOnB0LmdldHRlcihcIkRJTUVOU0lPTl9VTklRVUVfTkFNRVsnI3RleHQnXVwiLCEwKSxkaXNwbGF5Rm9sZGVyOnB0LmdldHRlcihcIkxFVkVMX0RJU1BMQVlfRk9MREVSWycjdGV4dCddXCIsITApLG9yZGVyaW5nUHJvcGVydHk6cHQuZ2V0dGVyKFwiTEVWRUxfT1JERVJJTkdfUFJPUEVSVFlbJyN0ZXh0J11cIiwhMCksb3JpZ2luOnB0LmdldHRlcihcIkxFVkVMX09SSUdJTlsnI3RleHQnXVwiLCEwKSxoaWVyYXJjaHlVbmlxdWVOYW1lOnB0LmdldHRlcihcIkhJRVJBUkNIWV9VTklRVUVfTkFNRVsnI3RleHQnXVwiLCEwKX0sbWVtYmVyczp7bmFtZTpwdC5nZXR0ZXIoXCJNRU1CRVJfTkFNRVsnI3RleHQnXVwiLCEwKSxjYXB0aW9uOnB0LmdldHRlcihcIk1FTUJFUl9DQVBUSU9OWycjdGV4dCddXCIsITApLHVuaXF1ZU5hbWU6cHQuZ2V0dGVyKFwiTUVNQkVSX1VOSVFVRV9OQU1FWycjdGV4dCddXCIsITApLGRpbWVuc2lvblVuaXF1ZU5hbWU6cHQuZ2V0dGVyKFwiRElNRU5TSU9OX1VOSVFVRV9OQU1FWycjdGV4dCddXCIsITApLGhpZXJhcmNoeVVuaXF1ZU5hbWU6cHQuZ2V0dGVyKFwiSElFUkFSQ0hZX1VOSVFVRV9OQU1FWycjdGV4dCddXCIsITApLGxldmVsVW5pcXVlTmFtZTpwdC5nZXR0ZXIoXCJMRVZFTF9VTklRVUVfTkFNRVsnI3RleHQnXVwiLCEwKSxjaGlsZHJlbkNhcmRpbmFsaXR5OnB0LmdldHRlcihcIkNISUxEUkVOX0NBUkRJTkFMSVRZWycjdGV4dCddXCIsITApfX0sWj1bXCJheGVzXCIsXCJjYXRhbG9nc1wiLFwiY3ViZXNcIixcImRpbWVuc2lvbnNcIixcImhpZXJhcmNoaWVzXCIsXCJsZXZlbHNcIixcIm1lYXN1cmVzXCJdLGV0PXB0LmRhdGEuWG1sRGF0YVJlYWRlci5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7cHQuZGF0YS5YbWxEYXRhUmVhZGVyLmNhbGwodGhpcyxlKSx0aGlzLl9leHRlbmQoZSlcclxufSxfZXh0ZW5kOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuLGk9MCxyPVoubGVuZ3RoO3I+aTtpKyspdD1aW2ldLG49ZVt0XSxuJiZuIT09eXQmJih0aGlzW3RdPW4pfSxwYXJzZTpmdW5jdGlvbihlKXt2YXIgdD1wdC5kYXRhLlhtbERhdGFSZWFkZXIuZm4ucGFyc2UoZS5yZXBsYWNlKC88KFxcLz8pKFxcd3wtKSs6L2csXCI8JDFcIikpO3JldHVybiBwdC5nZXR0ZXIoXCJbJ0VudmVsb3BlJ11bJ0JvZHknXVwiLCEwKSh0KX0sZXJyb3JzOmZ1bmN0aW9uKGUpe3ZhciB0PXB0LmdldHRlcihcIlsnRmF1bHQnXVwiLCEwKShlKTtyZXR1cm4gdD9be2ZhdWx0c3RyaW5nOnB0LmdldHRlcihcImZhdWx0c3RyaW5nWycjdGV4dCddXCIsITApKHQpLGZhdWx0Y29kZTpwdC5nZXR0ZXIoXCJmYXVsdGNvZGVbJyN0ZXh0J11cIiwhMCkodCl9XTpudWxsfSxheGVzOmZ1bmN0aW9uKGUpe3ZhciB0LG4saTtyZXR1cm4gZT1wdC5nZXR0ZXIoXCJFeGVjdXRlUmVzcG9uc2UucmV0dXJuLnJvb3RcIiwhMCkoZSksdD1xKHB0LmdldHRlcihcIkF4ZXMuQXhpc1wiLCEwKShlKSksbj0kKHRbMF0pLGk9e30sdC5sZW5ndGg+MiYmKGk9JCh0WzFdKSkse2NvbHVtbnM6bixyb3dzOml9fSxkYXRhOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYTtmb3IoZT1wdC5nZXR0ZXIoXCJFeGVjdXRlUmVzcG9uc2UucmV0dXJuLnJvb3RcIiwhMCkoZSksdD1xKHB0LmdldHRlcihcIkNlbGxEYXRhLkNlbGxcIiwhMCkoZSkpLG49W10saT1wdC5nZXR0ZXIoXCJbJ0BDZWxsT3JkaW5hbCddXCIpLHI9cHQuZ2V0dGVyKFwiVmFsdWVbJyN0ZXh0J11cIiksbz1wdC5nZXR0ZXIoXCJGbXRWYWx1ZVsnI3RleHQnXVwiKSxhPTA7dC5sZW5ndGg+YTthKyspbi5wdXNoKHt2YWx1ZTpyKHRbYV0pLGZtdFZhbHVlOm8odFthXSksb3JkaW5hbDpwYXJzZUludChpKHRbYV0pLDEwKX0pO3JldHVybiBufSxfbWFwU2NoZW1hOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYTtmb3IoZT1wdC5nZXR0ZXIoXCJEaXNjb3ZlclJlc3BvbnNlLnJldHVybi5yb290XCIsITApKGUpLG49cShwdC5nZXR0ZXIoXCJyb3dcIiwhMCkoZSkpLGk9W10scj0wO24ubGVuZ3RoPnI7cisrKXtvPXt9O2ZvcihhIGluIHQpb1thXT10W2FdKG5bcl0pO2kucHVzaChvKX1yZXR1cm4gaX0sbWVhc3VyZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21hcFNjaGVtYShlLEoubWVhc3VyZXMpfSxrcGlzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tYXBTY2hlbWEoZSxKLmtwaXMpfSxoaWVyYXJjaGllczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWFwU2NoZW1hKGUsSi5oaWVyYXJjaGllcyl9LGxldmVsczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWFwU2NoZW1hKGUsSi5sZXZlbHMpfSxkaW1lbnNpb25zOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tYXBTY2hlbWEoZSxKLmRpbWVuc2lvbnMpfSxjdWJlczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWFwU2NoZW1hKGUsSi5jdWJlcyl9LGNhdGFsb2dzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tYXBTY2hlbWEoZSxKLmNhdGFsb2dzKX0sbWVtYmVyczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWFwU2NoZW1hKGUsSi5tZW1iZXJzKX19KSxidCghMCxwdC5kYXRhLHtQaXZvdERhdGFTb3VyY2U6R3QsWG1sYVRyYW5zcG9ydDpYLFhtbGFEYXRhUmVhZGVyOmV0LFBpdm90Q3ViZUJ1aWxkZXI6V3QsdHJhbnNwb3J0czp7eG1sYTpYfSxyZWFkZXJzOnt4bWxhOmV0fX0pLHR0PWZ1bmN0aW9uKGUsdCl7aWYoIWUpcmV0dXJuIG51bGw7Zm9yKHZhciBuPTAsaT1lLmxlbmd0aDtpPm47bisrKWlmKGVbbl0uZmllbGQ9PT10KXJldHVybiBlW25dO3JldHVybiBudWxsfSxudD1mdW5jdGlvbihlLHQpe3ZhciBuLGkscj1bXTtmb3Iobj0wLGk9ZS5sZW5ndGg7aT5uO24rKyllW25dLmZpZWxkIT09dCYmci5wdXNoKGVbbl0pO3JldHVybiByfSxwdC51aS5QaXZvdFNldHRpbmdUYXJnZXQ9bXQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpczttdC5mbi5pbml0LmNhbGwoaSx0LG4pLGkuZWxlbWVudC5hZGRDbGFzcyhcImstcGl2b3Qtc2V0dGluZ1wiKSxpLmRhdGFTb3VyY2U9cHQuZGF0YS5QaXZvdERhdGFTb3VyY2UuY3JlYXRlKG4uZGF0YVNvdXJjZSksaS5fcmVmcmVzaEhhbmRsZXI9ZS5wcm94eShpLnJlZnJlc2gsaSksaS5kYXRhU291cmNlLmZpcnN0KHh0LGkuX3JlZnJlc2hIYW5kbGVyKSxuLnRlbXBsYXRlfHwoaS5vcHRpb25zLnRlbXBsYXRlPVwiPGRpdiBkYXRhLVwiK3B0Lm5zKyduYW1lPVwiJHtkYXRhLm5hbWUgfHwgZGF0YX1cIj4ke2RhdGEubmFtZSB8fCBkYXRhfScrKGkub3B0aW9ucy5lbmFibGVkPyc8YSBjbGFzcz1cImstYnV0dG9uIGstYnV0dG9uLWljb24gay1idXR0b24tYmFyZVwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstc2V0dGluZy1kZWxldGVcIj48L3NwYW4+PC9hPic6XCJcIikrXCI8L2Rpdj5cIiksaS50ZW1wbGF0ZT1wdC50ZW1wbGF0ZShpLm9wdGlvbnMudGVtcGxhdGUpLGkuZW1wdHlUZW1wbGF0ZT1wdC50ZW1wbGF0ZShpLm9wdGlvbnMuZW1wdHlUZW1wbGF0ZSksaS5fc29ydGFibGUoKSxpLmVsZW1lbnQub24oXCJjbGlja1wiK0V0LFwiLmstYnV0dG9uLC5rLWl0ZW1cIixmdW5jdGlvbih0KXt2YXIgbj1lKHQudGFyZ2V0KSxyPW4uY2xvc2VzdChcIltcIitwdC5hdHRyKFwibmFtZVwiKStcIl1cIikuYXR0cihwdC5hdHRyKFwibmFtZVwiKSk7ciYmKG4uaGFzQ2xhc3MoXCJrLXNldHRpbmctZGVsZXRlXCIpP2kucmVtb3ZlKHIpOmkub3B0aW9ucy5zb3J0YWJsZSYmblswXT09PXQuY3VycmVudFRhcmdldCYmaS5zb3J0KHtmaWVsZDpyLGRpcjpuLmZpbmQoXCIuay1pLXNvcnQtYXNjXCIpWzBdP1wiZGVzY1wiOlwiYXNjXCJ9KSl9KSwobi5maWx0ZXJhYmxlfHxuLnNvcnRhYmxlKSYmKGkuZmllbGRNZW51PW5ldyBmdC5QaXZvdEZpZWxkTWVudShpLmVsZW1lbnQse21lc3NhZ2VzOmkub3B0aW9ucy5tZXNzYWdlcy5maWVsZE1lbnUsZmlsdGVyOlwiLmstc2V0dGluZy1maWVsZG1lbnVcIixmaWx0ZXJhYmxlOm4uZmlsdGVyYWJsZSxzb3J0YWJsZTpuLnNvcnRhYmxlLGRhdGFTb3VyY2U6aS5kYXRhU291cmNlfSkpLGkucmVmcmVzaCgpfSxvcHRpb25zOntuYW1lOlwiUGl2b3RTZXR0aW5nVGFyZ2V0XCIsdGVtcGxhdGU6bnVsbCxmaWx0ZXJhYmxlOiExLHNvcnRhYmxlOiExLGVtcHR5VGVtcGxhdGU6XCI8ZGl2IGNsYXNzPSdrLWVtcHR5Jz4ke2RhdGF9PC9kaXY+XCIsc2V0dGluZzpcImNvbHVtbnNcIixlbmFibGVkOiEwLG1lc3NhZ2VzOntlbXB0eTpcIkRyb3AgRmllbGRzIEhlcmVcIn19LHNldERhdGFTb3VyY2U6ZnVuY3Rpb24oZSl7dGhpcy5kYXRhU291cmNlLnVuYmluZCh4dCx0aGlzLl9yZWZyZXNoSGFuZGxlciksdGhpcy5kYXRhU291cmNlPXRoaXMub3B0aW9ucy5kYXRhU291cmNlPWUsdGhpcy5maWVsZE1lbnUmJnRoaXMuZmllbGRNZW51LnNldERhdGFTb3VyY2UoZSksZS5maXJzdCh4dCx0aGlzLl9yZWZyZXNoSGFuZGxlciksdGhpcy5yZWZyZXNoKCl9LF9zb3J0YWJsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5vcHRpb25zLmVuYWJsZWQmJih0aGlzLnNvcnRhYmxlPXRoaXMuZWxlbWVudC5rZW5kb1NvcnRhYmxlKHtjb25uZWN0V2l0aDp0aGlzLm9wdGlvbnMuY29ubmVjdFdpdGgsZmlsdGVyOlwiPjpub3QoLmstZW1wdHkpXCIsaGludDplLm9wdGlvbnMuaGludCxjdXJzb3I6XCJtb3ZlXCIsc3RhcnQ6ZnVuY3Rpb24oZSl7ZS5pdGVtLmZvY3VzKCkuYmx1cigpfSxjaGFuZ2U6ZnVuY3Rpb24odCl7dmFyIG49dC5pdGVtLmF0dHIocHQuYXR0cihcIm5hbWVcIikpO1wicmVjZWl2ZVwiPT10LmFjdGlvbj9lLmFkZChuKTpcInJlbW92ZVwiPT10LmFjdGlvbj9lLnJlbW92ZShuKTpcInNvcnRcIj09dC5hY3Rpb24mJmUubW92ZShuLHQubmV3SW5kZXgpfX0pLmRhdGEoXCJrZW5kb1NvcnRhYmxlXCIpKX0sX2luZGV4T2Y6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9LTE7Zm9yKG49MCxpPXQubGVuZ3RoO2k+bjtuKyspaWYoTyh0W25dKT09PWUpe3I9bjticmVha31yZXR1cm4gcn0sX2lzS1BJOmZ1bmN0aW9uKGUpe3JldHVyblwia3BpXCI9PT1lLnR5cGV8fGUubWVhc3VyZX0sdmFsaWRhdGU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPTI9PWUudHlwZXx8XCJhZ2dyZWdhdG9yXCJpbiBlfHx0aGlzLl9pc0tQSShlKTtyZXR1cm4gaT9cIm1lYXN1cmVzXCI9PT10aGlzLm9wdGlvbnMuc2V0dGluZzpcIm1lYXN1cmVzXCI9PT10aGlzLm9wdGlvbnMuc2V0dGluZz9pOih0PXRoaXMuZGF0YVNvdXJjZVt0aGlzLm9wdGlvbnMuc2V0dGluZ10oKSxuPWUuZGVmYXVsdEhpZXJhcmNoeXx8ZS51bmlxdWVOYW1lLHRoaXMuX2luZGV4T2Yobix0KT4tMT8hMToodD10aGlzLmRhdGFTb3VyY2VbXCJjb2x1bW5zXCI9PT10aGlzLm9wdGlvbnMuc2V0dGluZz9cInJvd3NcIjpcImNvbHVtbnNcIl0oKSx0aGlzLl9pbmRleE9mKG4sdCk+LTE/ITE6ITApKX0sYWRkOmZ1bmN0aW9uKHQpe3ZhciBuLGkscj10aGlzLmRhdGFTb3VyY2VbdGhpcy5vcHRpb25zLnNldHRpbmddKCk7Zm9yKHQ9ZS5pc0FycmF5KHQpP3Quc2xpY2UoMCk6W3RdLG49MCxpPXQubGVuZ3RoO2k+bjtuKyspLTEhPT10aGlzLl9pbmRleE9mKHRbbl0scikmJih0LnNwbGljZShuLDEpLG4tPTEsaS09MSk7dC5sZW5ndGgmJihyPXIuY29uY2F0KHQpLHRoaXMuZGF0YVNvdXJjZVt0aGlzLm9wdGlvbnMuc2V0dGluZ10ocikpfSxtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5kYXRhU291cmNlW3RoaXMub3B0aW9ucy5zZXR0aW5nXSgpLGk9dGhpcy5faW5kZXhPZihlLG4pO2k+LTEmJihlPW4uc3BsaWNlKGksMSlbMF0sbi5zcGxpY2UodCwwLGUpLHRoaXMuZGF0YVNvdXJjZVt0aGlzLm9wdGlvbnMuc2V0dGluZ10obikpfSxyZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kYXRhU291cmNlW3RoaXMub3B0aW9ucy5zZXR0aW5nXSgpLG49dGhpcy5faW5kZXhPZihlLHQpO24+LTEmJih0LnNwbGljZShuLDEpLHRoaXMuZGF0YVNvdXJjZVt0aGlzLm9wdGlvbnMuc2V0dGluZ10odCkpfSxzb3J0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9ucy5zb3J0YWJsZSxuPXQ9PT0hMHx8dC5hbGxvd1Vuc29ydCxpPW4mJlwiYXNjXCI9PT1lLmRpcixyPXRoaXMuZGF0YVNvdXJjZS5zb3J0KCl8fFtdLG89bnQocixlLmZpZWxkKTtpJiZyLmxlbmd0aCE9PW8ubGVuZ3RoJiYoZT1udWxsKSxlJiZvLnB1c2goZSksdGhpcy5kYXRhU291cmNlLnNvcnQobyl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZSxuPVwiXCIsaT10aGlzLmRhdGFTb3VyY2VbdGhpcy5vcHRpb25zLnNldHRpbmddKCkscj1pLmxlbmd0aCxvPTA7aWYocilmb3IoO3I+bztvKyspZT1pW29dLGU9ZS5uYW1lPT09dD97bmFtZTplfTplLG4rPXRoaXMudGVtcGxhdGUoYnQoe3NvcnRJY29uOnRoaXMuX3NvcnRJY29uKGUubmFtZSl9LGUpKTtlbHNlIG49dGhpcy5lbXB0eVRlbXBsYXRlKHRoaXMub3B0aW9ucy5tZXNzYWdlcy5lbXB0eSk7dGhpcy5lbGVtZW50Lmh0bWwobil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXttdC5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5kYXRhU291cmNlLnVuYmluZCh4dCx0aGlzLl9yZWZyZXNoSGFuZGxlciksdGhpcy5lbGVtZW50Lm9mZihFdCksdGhpcy5zb3J0YWJsZSYmdGhpcy5zb3J0YWJsZS5kZXN0cm95KCksdGhpcy5maWVsZE1lbnUmJnRoaXMuZmllbGRNZW51LmRlc3Ryb3koKSx0aGlzLmVsZW1lbnQ9bnVsbCx0aGlzLl9yZWZyZXNoSGFuZGxlcj1udWxsfSxfc29ydEljb246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kYXRhU291cmNlLnNvcnQoKSxuPXR0KHQsTyhlKSksaT1cIlwiO3JldHVybiBuJiYoaT1cImstaS1zb3J0LVwiK24uZGlyKSxpfX0pLGl0PW10LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihuLGkpe3ZhciByLG8sYT10aGlzO210LmZuLmluaXQuY2FsbChhLG4saSksYS5fZGF0YVNvdXJjZSgpLGEuX2JpbmRDb25maWd1cmF0b3IoKSxhLl93cmFwcGVyKCksYS5fY3JlYXRlTGF5b3V0KCksYS5fY29sdW1uQnVpbGRlcj1yPW5ldyBkdCxhLl9yb3dCdWlsZGVyPW89bmV3IHV0LGEuX2NvbnRlbnRCdWlsZGVyPW5ldyBodCxhLl90ZW1wbGF0ZXMoKSxhLmNvbHVtbnNIZWFkZXIuYWRkKGEucm93c0hlYWRlcikub24oXCJjbGlja1wiLFwic3Bhbi5rLWljb25cIixmdW5jdGlvbigpe3ZhciBuLGkscyxsLGM9ZSh0aGlzKSxkPXIsdT1cImV4cGFuZENvbHVtblwiLGg9Yy5hdHRyKHB0LmF0dHIoXCJwYXRoXCIpKSxwPXtheGlzOlwiY29sdW1uc1wiLHBhdGg6ZS5wYXJzZUpTT04oaCl9O2MucGFyZW50KCkuaXMoXCJ0ZFwiKSYmKGQ9byx1PVwiZXhwYW5kUm93XCIscC5heGlzPVwicm93c1wiKSxpPWMuaGFzQ2xhc3MoUnQpLHM9ZC5tZXRhZGF0YVtoXSxsPXMuZXhwYW5kZWQ9PT10LG49aT9GdDp6dCxhLnRyaWdnZXIobixwKXx8KGQubWV0YWRhdGFbaF0uZXhwYW5kZWQ9IWksYy50b2dnbGVDbGFzcyhSdCwhaSkudG9nZ2xlQ2xhc3MoQnQsaSksIWkmJmw/YS5kYXRhU291cmNlW3VdKHAucGF0aCk6YS5yZWZyZXNoKCkpfSksYS5fc2Nyb2xsYWJsZSgpLGEub3B0aW9ucy5hdXRvQmluZCYmYS5kYXRhU291cmNlLmZldGNoKCkscHQubm90aWZ5KGEpfSxldmVudHM6W1B0LEl0LHp0LEZ0XSxvcHRpb25zOntuYW1lOlwiUGl2b3RHcmlkXCIsYXV0b0JpbmQ6ITAscmVvcmRlcmFibGU6ITAsZmlsdGVyYWJsZTohMSxzb3J0YWJsZTohMSxoZWlnaHQ6bnVsbCxjb2x1bW5XaWR0aDoxMDAsY29uZmlndXJhdG9yOlwiXCIsY29sdW1uSGVhZGVyVGVtcGxhdGU6bnVsbCxyb3dIZWFkZXJUZW1wbGF0ZTpudWxsLGRhdGFDZWxsVGVtcGxhdGU6bnVsbCxrcGlTdGF0dXNUZW1wbGF0ZTpudWxsLGtwaVRyZW5kVGVtcGxhdGU6bnVsbCxtZXNzYWdlczp7bWVhc3VyZUZpZWxkczpcIkRyb3AgRGF0YSBGaWVsZHMgSGVyZVwiLGNvbHVtbkZpZWxkczpcIkRyb3AgQ29sdW1uIEZpZWxkcyBIZXJlXCIscm93RmllbGRzOlwiRHJvcCBSb3dzIEZpZWxkcyBIZXJlXCJ9fSxfdGVtcGxhdGVzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLmNvbHVtbkhlYWRlclRlbXBsYXRlLHQ9dGhpcy5vcHRpb25zLnJvd0hlYWRlclRlbXBsYXRlLG49dGhpcy5vcHRpb25zLmRhdGFDZWxsVGVtcGxhdGUsaT10aGlzLm9wdGlvbnMua3BpU3RhdHVzVGVtcGxhdGUscj10aGlzLm9wdGlvbnMua3BpVHJlbmRUZW1wbGF0ZTt0aGlzLl9jb2x1bW5CdWlsZGVyLnRlbXBsYXRlPXB0LnRlbXBsYXRlKGV8fEx0LHt1c2VXaXRoQmxvY2s6ISFlfSksdGhpcy5fY29udGVudEJ1aWxkZXIuZGF0YVRlbXBsYXRlPXB0LnRlbXBsYXRlKG58fE50LHt1c2VXaXRoQmxvY2s6ISFufSksdGhpcy5fY29udGVudEJ1aWxkZXIua3BpU3RhdHVzVGVtcGxhdGU9cHQudGVtcGxhdGUoaXx8T3Qse3VzZVdpdGhCbG9jazohIWl9KSx0aGlzLl9jb250ZW50QnVpbGRlci5rcGlUcmVuZFRlbXBsYXRlPXB0LnRlbXBsYXRlKHJ8fEh0LHt1c2VXaXRoQmxvY2s6ISFyfSksdGhpcy5fcm93QnVpbGRlci50ZW1wbGF0ZT1wdC50ZW1wbGF0ZSh0fHxMdCx7dXNlV2l0aEJsb2NrOiEhdH0pfSxfYmluZENvbmZpZ3VyYXRvcjpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5jb25maWd1cmF0b3I7dCYmZSh0KS5rZW5kb1Bpdm90Q29uZmlndXJhdG9yKFwic2V0RGF0YVNvdXJjZVwiLHRoaXMuZGF0YVNvdXJjZSl9LGNlbGxJbmZvQnlFbGVtZW50OmZ1bmN0aW9uKHQpe3JldHVybiB0PWUodCksdGhpcy5jZWxsSW5mbyh0LmluZGV4KCksdC5wYXJlbnQoXCJ0clwiKS5pbmRleCgpKX0sY2VsbEluZm86ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXMuX2NvbnRlbnRCdWlsZGVyLHI9aS5jb2x1bW5JbmRleGVzW2V8fDBdLG89aS5yb3dJbmRleGVzW3R8fDBdO3JldHVybiByJiZvPyhuPW8uaW5kZXgqaS5yb3dMZW5ndGgrci5pbmRleCx7Y29sdW1uVHVwbGU6ci50dXBsZSxyb3dUdXBsZTpvLnR1cGxlLG1lYXN1cmU6ci5tZWFzdXJlfHxvLm1lYXN1cmUsZGF0YUl0ZW06dGhpcy5kYXRhU291cmNlLnZpZXcoKVtuXX0pOm51bGx9LHNldERhdGFTb3VyY2U6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zLmRhdGFTb3VyY2U9ZSx0aGlzLl9kYXRhU291cmNlKCksdGhpcy5tZWFzdXJlc1RhcmdldCYmdGhpcy5tZWFzdXJlc1RhcmdldC5zZXREYXRhU291cmNlKGUpLHRoaXMucm93c1RhcmdldCYmdGhpcy5yb3dzVGFyZ2V0LnNldERhdGFTb3VyY2UoZSksdGhpcy5jb2x1bW5zVGFyZ2V0JiZ0aGlzLmNvbHVtbnNUYXJnZXQuc2V0RGF0YVNvdXJjZShlKSx0aGlzLl9iaW5kQ29uZmlndXJhdG9yKCksdGhpcy5vcHRpb25zLmF1dG9CaW5kJiZlLmZldGNoKCl9LHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7bXQuZm4uc2V0T3B0aW9ucy5jYWxsKHRoaXMsZSksdGhpcy5fdGVtcGxhdGVzKCl9LF9kYXRhU291cmNlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucy5kYXRhU291cmNlO249ZS5pc0FycmF5KG4pP3tkYXRhOm59Om4sdC5kYXRhU291cmNlJiZ0aGlzLl9yZWZyZXNoSGFuZGxlcj90LmRhdGFTb3VyY2UudW5iaW5kKHh0LHQuX3JlZnJlc2hIYW5kbGVyKS51bmJpbmQoVHQsdC5fc3RhdGVSZXNldEhhbmRsZXIpLnVuYmluZChTdCx0Ll9wcm9ncmVzc0hhbmRsZXIpLnVuYmluZChDdCx0Ll9lcnJvckhhbmRsZXIpOih0Ll9yZWZyZXNoSGFuZGxlcj1lLnByb3h5KHQucmVmcmVzaCx0KSx0Ll9wcm9ncmVzc0hhbmRsZXI9ZS5wcm94eSh0Ll9yZXF1ZXN0U3RhcnQsdCksdC5fc3RhdGVSZXNldEhhbmRsZXI9ZS5wcm94eSh0Ll9zdGF0ZVJlc2V0LHQpLHQuX2Vycm9ySGFuZGxlcj1lLnByb3h5KHQuX2Vycm9yLHQpKSx0LmRhdGFTb3VyY2U9cHQuZGF0YS5QaXZvdERhdGFTb3VyY2UuY3JlYXRlKG4pLmJpbmQoeHQsdC5fcmVmcmVzaEhhbmRsZXIpLmJpbmQoU3QsdC5fcHJvZ3Jlc3NIYW5kbGVyKS5iaW5kKFR0LHQuX3N0YXRlUmVzZXRIYW5kbGVyKS5iaW5kKEN0LHQuX2Vycm9ySGFuZGxlcil9LF9lcnJvcjpmdW5jdGlvbigpe3RoaXMuX3Byb2dyZXNzKCExKX0sX3JlcXVlc3RTdGFydDpmdW5jdGlvbigpe3RoaXMuX3Byb2dyZXNzKCEwKX0sX3N0YXRlUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9jb2x1bW5CdWlsZGVyLnJlc2V0KCksdGhpcy5fcm93QnVpbGRlci5yZXNldCgpfSxfd3JhcHBlcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5oZWlnaHQ7dGhpcy53cmFwcGVyPXRoaXMuZWxlbWVudC5hZGRDbGFzcyhcImstd2lkZ2V0IGstcGl2b3RcIiksZSYmdGhpcy53cmFwcGVyLmNzcyhcImhlaWdodFwiLGUpfSxfbWVhc3VyZUZpZWxkczpmdW5jdGlvbigpe3RoaXMubWVhc3VyZUZpZWxkcz1lKEF0KS5hZGRDbGFzcyhcImstcGl2b3QtdG9vbGJhciBrLWhlYWRlciBrLXNldHRpbmdzLW1lYXN1cmVzXCIpLHRoaXMubWVhc3VyZXNUYXJnZXQ9dGhpcy5fY3JlYXRlU2V0dGluZ1RhcmdldCh0aGlzLm1lYXN1cmVGaWVsZHMse3NldHRpbmc6XCJtZWFzdXJlc1wiLG1lc3NhZ2VzOntlbXB0eTp0aGlzLm9wdGlvbnMubWVzc2FnZXMubWVhc3VyZUZpZWxkc319KX0sX2NyZWF0ZVNldHRpbmdUYXJnZXQ6ZnVuY3Rpb24odCxuKXt2YXIgaT0nPHNwYW4gdGFiaW5kZXg9XCIwXCIgY2xhc3M9XCJrLWJ1dHRvblwiIGRhdGEtJytwdC5ucysnbmFtZT1cIiR7ZGF0YS5uYW1lfVwiPiR7ZGF0YS5uYW1lfScscj1uLnNvcnRhYmxlLG89XCJcIjtyZXR1cm4gciYmKG8rPVwiI2lmIChkYXRhLnNvcnRJY29uKSB7I1wiLG8rPSc8c3BhbiBjbGFzcz1cImstaWNvbiAke2RhdGEuc29ydEljb259IGstc2V0dGluZy1zb3J0XCI+PC9zcGFuPicsbys9XCIjfSNcIiksKG4uZmlsdGVyYWJsZXx8cikmJihvKz0nPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93aGVhZC1zIGstc2V0dGluZy1maWVsZG1lbnVcIj48L3NwYW4+JyksdGhpcy5vcHRpb25zLnJlb3JkZXJhYmxlJiYobys9JzxzcGFuIGNsYXNzPVwiay1pY29uIGstc2ktY2xvc2Ugay1zZXR0aW5nLWRlbGV0ZVwiPjwvc3Bhbj4nKSxvJiYoaSs9JzxzcGFuIGNsYXNzPVwiay1maWVsZC1hY3Rpb25zXCI+JytvK1wiPC9zcGFuPlwiKSxpKz1cIjwvc3Bhbj5cIixuZXcgcHQudWkuUGl2b3RTZXR0aW5nVGFyZ2V0KHQsZS5leHRlbmQoe3RlbXBsYXRlOmksZW1wdHlUZW1wbGF0ZTonPHNwYW4gY2xhc3M9XCJrLWVtcHR5XCI+JHtkYXRhfTwvc3Bhbj4nLGVuYWJsZWQ6dGhpcy5vcHRpb25zLnJlb3JkZXJhYmxlLGRhdGFTb3VyY2U6dGhpcy5kYXRhU291cmNlfSxuKSl9LF9pbml0U2V0dGluZ1RhcmdldHM6ZnVuY3Rpb24oKXt0aGlzLmNvbHVtbnNUYXJnZXQ9dGhpcy5fY3JlYXRlU2V0dGluZ1RhcmdldCh0aGlzLmNvbHVtbkZpZWxkcyx7Y29ubmVjdFdpdGg6dGhpcy5yb3dGaWVsZHMsc2V0dGluZzpcImNvbHVtbnNcIixmaWx0ZXJhYmxlOnRoaXMub3B0aW9ucy5maWx0ZXJhYmxlLHNvcnRhYmxlOnRoaXMub3B0aW9ucy5zb3J0YWJsZSxtZXNzYWdlczp7ZW1wdHk6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLmNvbHVtbkZpZWxkcyxmaWVsZE1lbnU6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLmZpZWxkTWVudX19KSx0aGlzLnJvd3NUYXJnZXQ9dGhpcy5fY3JlYXRlU2V0dGluZ1RhcmdldCh0aGlzLnJvd0ZpZWxkcyx7Y29ubmVjdFdpdGg6dGhpcy5jb2x1bW5GaWVsZHMsc2V0dGluZzpcInJvd3NcIixmaWx0ZXJhYmxlOnRoaXMub3B0aW9ucy5maWx0ZXJhYmxlLHNvcnRhYmxlOnRoaXMub3B0aW9ucy5zb3J0YWJsZSxtZXNzYWdlczp7ZW1wdHk6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLnJvd0ZpZWxkcyxmaWVsZE1lbnU6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLmZpZWxkTWVudX19KX0sX2NyZWF0ZUxheW91dDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj1lKFZ0KSxpPW4uZmluZChcIi5rLXBpdm90LXJvd2hlYWRlcnNcIikscj1uLmZpbmQoXCIuay1waXZvdC10YWJsZVwiKSxvPWUoQXQpLmFkZENsYXNzKFwiay1ncmlkIGstd2lkZ2V0XCIpO3QuX21lYXN1cmVGaWVsZHMoKSx0LmNvbHVtbkZpZWxkcz1lKEF0KS5hZGRDbGFzcyhcImstcGl2b3QtdG9vbGJhciBrLWhlYWRlciBrLXNldHRpbmdzLWNvbHVtbnNcIiksdC5yb3dGaWVsZHM9ZShBdCkuYWRkQ2xhc3MoXCJrLXBpdm90LXRvb2xiYXIgay1oZWFkZXIgay1zZXR0aW5ncy1yb3dzXCIpLHQuY29sdW1uc0hlYWRlcj1lKCc8ZGl2IGNsYXNzPVwiay1ncmlkLWhlYWRlci13cmFwXCIgLz4nKS53cmFwKCc8ZGl2IGNsYXNzPVwiay1ncmlkLWhlYWRlclwiIC8+JyksdC5jb2x1bW5zSGVhZGVyLnBhcmVudCgpLmNzcyhcInBhZGRpbmctcmlnaHRcIixwdC5zdXBwb3J0LnNjcm9sbGJhcigpKSx0LnJvd3NIZWFkZXI9ZSgnPGRpdiBjbGFzcz1cImstZ3JpZCBrLXdpZGdldCBrLWFsdFwiLz4nKSx0LmNvbnRlbnQ9ZSgnPGRpdiBjbGFzcz1cImstZ3JpZC1jb250ZW50XCIgLz4nKSxpLmFwcGVuZCh0Lm1lYXN1cmVGaWVsZHMpLGkuYXBwZW5kKHQucm93RmllbGRzKSxpLmFwcGVuZCh0LnJvd3NIZWFkZXIpLG8uYXBwZW5kKHQuY29sdW1uc0hlYWRlci5wYXJlbnQoKSksby5hcHBlbmQodC5jb250ZW50KSxyLmFwcGVuZCh0LmNvbHVtbkZpZWxkcyksci5hcHBlbmQobyksdC53cmFwcGVyLmFwcGVuZChuKSx0LmNvbHVtbnNIZWFkZXJUcmVlPW5ldyBwdC5kb20uVHJlZSh0LmNvbHVtbnNIZWFkZXJbMF0pLHQucm93c0hlYWRlclRyZWU9bmV3IHB0LmRvbS5UcmVlKHQucm93c0hlYWRlclswXSksdC5jb250ZW50VHJlZT1uZXcgcHQuZG9tLlRyZWUodC5jb250ZW50WzBdKSx0Ll9pbml0U2V0dGluZ1RhcmdldHMoKX0sX3Byb2dyZXNzOmZ1bmN0aW9uKGUpe3B0LnVpLnByb2dyZXNzKHRoaXMud3JhcHBlcixlKX0sX3Jlc2l6ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuY29sdW1uc0hlYWRlci5jaGlsZHJlbihcInRhYmxlXCIpO3RoaXMuY29udGVudFswXS5maXJzdENoaWxkJiYodGhpcy5fc2V0U2VjdGlvbnNXaWR0aCgpLHRoaXMuX3NldFNlY3Rpb25zSGVpZ2h0KCksdGhpcy5fc2V0Q29udGVudFdpZHRoKCksdGhpcy5fc2V0Q29udGVudEhlaWdodCgpLGUuY3NzKFwidGFibGUtbGF5b3V0XCIsRHQpLGNsZWFyVGltZW91dCh0aGlzLl9sYXlvdXRUaW1lb3V0KSx0aGlzLl9sYXlvdXRUaW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLmNzcyhcInRhYmxlLWxheW91dFwiLFwiZml4ZWRcIil9KSl9LF9zZXRTZWN0aW9uc1dpZHRoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yb3dzSGVhZGVyLHQ9ZS5wYXJlbnQoXCIuay1waXZvdC1yb3doZWFkZXJzXCIpLndpZHRoKER0KSxuPU1hdGgubWF4KHRoaXMubWVhc3VyZUZpZWxkcy5vdXRlcldpZHRoKCksdGhpcy5yb3dGaWVsZHMub3V0ZXJXaWR0aCgpKTtuPU1hdGgubWF4KGUuY2hpbGRyZW4oXCJ0YWJsZVwiKS53aWR0aCgpLG4pLHQud2lkdGgobil9LF9zZXRTZWN0aW9uc0hlaWdodDpmdW5jdGlvbigpe3ZhciBlPXRoaXMubWVhc3VyZUZpZWxkcy5oZWlnaHQoRHQpLmhlaWdodCgpLHQ9dGhpcy5jb2x1bW5GaWVsZHMuaGVpZ2h0KER0KS5oZWlnaHQoKSxuPXRoaXMucm93RmllbGRzLmhlaWdodChEdCkuaW5uZXJIZWlnaHQoKSxpPXRoaXMuY29sdW1uc0hlYWRlci5oZWlnaHQoRHQpLmlubmVySGVpZ2h0KCkscj1uLXRoaXMucm93RmllbGRzLmhlaWdodCgpLG89dD5lP3Q6ZSxhPWk+bj9pOm47dGhpcy5tZWFzdXJlRmllbGRzLmhlaWdodChvKSx0aGlzLmNvbHVtbkZpZWxkcy5oZWlnaHQobyksdGhpcy5yb3dGaWVsZHMuaGVpZ2h0KGEtciksdGhpcy5jb2x1bW5zSGVhZGVyLmhlaWdodChhKX0sX3NldENvbnRlbnRXaWR0aDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuY29udGVudC5maW5kKFwidGFibGVcIiksdD10aGlzLmNvbnRlbnQud2lkdGgoKSxuPWUuY2hpbGRyZW4oXCJjb2xncm91cFwiKS5jaGlsZHJlbigpLmxlbmd0aCxpPTEwMCxyPW4qdGhpcy5vcHRpb25zLmNvbHVtbldpZHRoO3I+dCYmKGk9TWF0aC5jZWlsKHIvdCoxMDApKSxlLmFkZCh0aGlzLmNvbHVtbnNIZWFkZXIuY2hpbGRyZW4oXCJ0YWJsZVwiKSkuY3NzKFwibWluLXdpZHRoXCIsaStcIiVcIil9LF9zZXRDb250ZW50SGVpZ2h0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxuPWUuY29udGVudCxpPWUucm93c0hlYWRlcixyPWUud3JhcHBlci5pbm5lckhlaWdodCgpLG89cHQuc3VwcG9ydC5zY3JvbGxiYXIoKSxhPW5bMF0ub2Zmc2V0SGVpZ2h0PT09blswXS5jbGllbnRIZWlnaHQ7aWYoZS53cmFwcGVyLmlzKFwiOnZpc2libGVcIikpe2lmKCFyKXJldHVybiBhJiYobz0wKSxpLmhlaWdodChuLmhlaWdodCgpLW8pLHQ7ci09ZS5jb2x1bW5GaWVsZHMub3V0ZXJIZWlnaHQoKSxyLT1lLmNvbHVtbnNIZWFkZXIub3V0ZXJIZWlnaHQoKSwyKm8+PXImJihyPTIqbysxLGF8fChyKz1vKSksbi5oZWlnaHQociksYSYmKG89MCksaS5oZWlnaHQoci1vKX19LF9heGlzTWVhc3VyZXM6ZnVuY3Rpb24oZSl7dmFyIHQ9W10sbj10aGlzLmRhdGFTb3VyY2UsaT1uLm1lYXN1cmVzKCkscj1pLmxlbmd0aD4xfHxpWzBdJiZpWzBdLnR5cGU7cmV0dXJuIG4ubWVhc3VyZXNBeGlzKCk9PT1lJiYoMD09PW5bZV0oKS5sZW5ndGh8fHIpJiYodD1pKSx0fSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLG49dC5kYXRhU291cmNlLGk9bi5heGVzKCkscj0oaS5jb2x1bW5zfHx7fSkudHVwbGVzfHxbXSxvPShpLnJvd3N8fHt9KS50dXBsZXN8fFtdLGE9dC5fY29sdW1uQnVpbGRlcixzPXQuX3Jvd0J1aWxkZXIsbD17fSxjPXt9O3QudHJpZ2dlcihQdCx7YWN0aW9uOlwicmViaW5kXCJ9KXx8KGEubWVhc3VyZXM9dGhpcy5fYXhpc01lYXN1cmVzKFwiY29sdW1uc1wiKSx0LmNvbHVtbnNIZWFkZXJUcmVlLnJlbmRlcihhLmJ1aWxkKHIpKSx0LnJvd3NIZWFkZXJUcmVlLnJlbmRlcihzLmJ1aWxkKG8pKSxsPXtpbmRleGVzOmEuX2luZGV4ZXMsbWVhc3VyZXM6YS5tZWFzdXJlcyxtZXRhZGF0YTphLm1ldGFkYXRhfSxjPXtpbmRleGVzOnMuX2luZGV4ZXMsbWVhc3VyZXM6dGhpcy5fYXhpc01lYXN1cmVzKFwicm93c1wiKSxtZXRhZGF0YTpzLm1ldGFkYXRhfSx0LmNvbnRlbnRUcmVlLnJlbmRlcih0Ll9jb250ZW50QnVpbGRlci5idWlsZChuLnZpZXcoKSxsLGMpKSx0Ll9yZXNpemUoKSx0LnRvdWNoU2Nyb2xsZXI/dC50b3VjaFNjcm9sbGVyLmNvbnRlbnRSZXNpemVkKCk6KGU9cHQudG91Y2hTY3JvbGxlcih0LmNvbnRlbnQpLGUmJmUubW92YWJsZSYmKHQudG91Y2hTY3JvbGxlcj1lLGUubW92YWJsZS5iaW5kKFwiY2hhbmdlXCIsZnVuY3Rpb24oZSl7dC5jb2x1bW5zSGVhZGVyLnNjcm9sbExlZnQoLWUuc2VuZGVyLngpLHQucm93c0hlYWRlci5zY3JvbGxUb3AoLWUuc2VuZGVyLnkpfSkpKSx0Ll9wcm9ncmVzcyghMSksdC50cmlnZ2VyKEl0KSl9LF9zY3JvbGxhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQuY29sdW1uc0hlYWRlcixpPXQucm93c0hlYWRlcjt0LmNvbnRlbnQuc2Nyb2xsKGZ1bmN0aW9uKCl7bi5zY3JvbGxMZWZ0KHRoaXMuc2Nyb2xsTGVmdCksaS5zY3JvbGxUb3AodGhpcy5zY3JvbGxUb3ApfSksaS5iaW5kKFwiRE9NTW91c2VTY3JvbGxcIitFdCtcIiBtb3VzZXdoZWVsXCIrRXQsZS5wcm94eSh0Ll93aGVlbFNjcm9sbCx0KSl9LF93aGVlbFNjcm9sbDpmdW5jdGlvbih0KXt2YXIgbixpO3QuY3RybEtleXx8KG49cHQud2hlZWxEZWx0YVkodCksaT10aGlzLmNvbnRlbnQuc2Nyb2xsVG9wKCksbiYmKHQucHJldmVudERlZmF1bHQoKSxlKHQuY3VycmVudFRhcmdldCkub25lKFwid2hlZWxcIitFdCwhMSksdGhpcy5yb3dzSGVhZGVyLnNjcm9sbFRvcChpKy1uKSx0aGlzLmNvbnRlbnQuc2Nyb2xsVG9wKGkrLW4pKSl9fSkscnQ9cHQuZG9tLmVsZW1lbnQsb3Q9cHQuZG9tLmh0bWwsYXQ9cHQuZG9tLnRleHQsc3Q9ZnVuY3Rpb24oZSx0KXtyZXR1cm57bWF4Q2hpbGRyZW46MCxjaGlsZHJlbjowLG1heE1lbWJlcnM6MCxtZW1iZXJzOjAsbWVhc3VyZXM6MSxsZXZlbE51bTplLHBhcmVudE1lbWJlcjowIT09dH19LGx0PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPVtdLGk9MDt0Pj1pO2krKyluLnB1c2goZS5tZW1iZXJzW2ldLm5hbWUpO3JldHVybiBufSxjdD1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbj1cIlwiLGk9MDt0Pj1pO2krKyluKz1lLm1lbWJlcnNbaV0ubmFtZTtyZXR1cm4gbn0sZHQ9Z3QuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7dGhpcy5tZWFzdXJlcz0xLHRoaXMubWV0YWRhdGE9e319LGJ1aWxkOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3Rib2R5KGUpLG49dGhpcy5fY29sR3JvdXAoKTtyZXR1cm5bcnQoXCJ0YWJsZVwiLG51bGwsW24sdF0pXX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLm1ldGFkYXRhPXt9fSxfY29sR3JvdXA6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5fcm93TGVuZ3RoKCksdD1bXSxuPTA7ZT5uO24rKyl0LnB1c2gocnQoXCJjb2xcIixudWxsKSk7cmV0dXJuIHJ0KFwiY29sZ3JvdXBcIixudWxsLHQpfSxfdGJvZHk6ZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXTtyZXR1cm4gdGhpcy5tYXA9e30sdGhpcy5yb3dzPVtdLHRoaXMucm9vdFR1cGxlPXQsdGhpcy5faW5kZXhlcz1bXSx0Pyh0aGlzLl9idWlsZFJvd3ModCwwKSx0aGlzLl9ub3JtYWxpemUoKSk6dGhpcy5yb3dzLnB1c2gocnQoXCJ0clwiLG51bGwsW3J0KFwidGhcIixudWxsLFtvdChcIiZuYnNwO1wiKV0pXSkpLHJ0KFwidGJvZHlcIixudWxsLHRoaXMucm93cyl9LF9ub3JtYWxpemU6ZnVuY3Rpb24oKXtmb3IodmFyIGUsdCxuLGkscixvPXRoaXMucm93cyxhPW8ubGVuZ3RoLHM9MDthPnM7cysrKWlmKGU9b1tzXSwxIT09ZS5yb3dTcGFuKWZvcihpPWUuY2hpbGRyZW4sbj0wLHQ9aS5sZW5ndGg7dD5uO24rKylyPWlbbl0sci50dXBsZUFsbCYmKHIuYXR0ci5yb3dTcGFuPWUucm93U3Bhbil9LF9yb3dJbmRleDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy5yb3dzLG49dC5sZW5ndGgsaT0wO24+aSYmdFtpXSE9PWU7aSsrKTtyZXR1cm4gaX0sX3Jvd0xlbmd0aDpmdW5jdGlvbigpe3ZhciBlPXRoaXMucm93c1swXT90aGlzLnJvd3NbMF0uY2hpbGRyZW46W10sdD1lLmxlbmd0aCxuPTAsaT0wO2lmKHQpZm9yKDt0Pmk7aSsrKW4rPWVbaV0uYXR0ci5jb2xTcGFufHwxO3JldHVybiBufHwobj10aGlzLm1lYXN1cmVzKSxufSxfcm93OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG89dGhpcy5yb290VHVwbGUubWVtYmVyc1t0XS5uYW1lLGE9ZS5tZW1iZXJzW3RdLmxldmVsTnVtLHM9bythLGw9dGhpcy5tYXAsYz1sW3NdO3JldHVybiBjPyhjLm5vdEZpcnN0PSExLGMucGFyZW50TWVtYmVyJiZjLnBhcmVudE1lbWJlcj09PW58fChjLnBhcmVudE1lbWJlcj1uLGMuY29sU3Bhbj0wKSk6KGM9cnQoXCJ0clwiLG51bGwsW10pLGMucGFyZW50TWVtYmVyPW4sYy5jb2xTcGFuPTAsYy5yb3dTcGFuPTEsbFtzXT1jLGk9bFtvKygrYS0xKV0saSYmKHI9aS5jaGlsZHJlbixjLm5vdEZpcnN0PXJbMV0mJi0xPT09clsxXS5hdHRyLmNsYXNzTmFtZS5pbmRleE9mKFwiay1hbHRcIik/ITA6aS5ub3RGaXJzdCksdGhpcy5yb3dzLnNwbGljZSh0aGlzLl9yb3dJbmRleChpKSsxLDAsYykpLGN9LF9tZWFzdXJlczpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGE9dGhpcy5tYXAscz1hLm1lYXN1cmVSb3c7Zm9yKHN8fChzPXJ0KFwidHJcIixudWxsLFtdKSxhLm1lYXN1cmVSb3c9cyx0aGlzLnJvd3MucHVzaChzKSkscj0wLG89ZS5sZW5ndGg7bz5yO3IrKylpPWVbcl0scy5jaGlsZHJlbi5wdXNoKHJ0KFwidGhcIix7Y2xhc3NOYW1lOlwiay1oZWFkZXJcIisobnx8XCJcIil9LFt0aGlzLl9jb250ZW50KGksdCldKSk7cmV0dXJuIG99LF9jb250ZW50OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG90KHRoaXMudGVtcGxhdGUoe21lbWJlcjplLHR1cGxlOnR9KSl9LF9jZWxsOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHJ0KFwidGhcIix7Y2xhc3NOYW1lOlwiay1oZWFkZXJcIitlfSx0KX0sX2J1aWxkUm93czpmdW5jdGlvbihlLG4saSl7dmFyIHIsbyxhLHMsbCxjLGQsdSxoLHAsZj1lLm1lbWJlcnMsZz1mW25dLG09ZltuKzFdLHY9W10sXz0wO2lmKGcubWVhc3VyZSlyZXR1cm4gdGhpcy5fbWVhc3VyZXMoZy5jaGlsZHJlbixlKSx0O2lmKHU9cHQuc3RyaW5naWZ5KGx0KGUsbikpLHI9dGhpcy5fcm93KGUsbixpKSxhPWcuY2hpbGRyZW4scz1hLmxlbmd0aCxwPXRoaXMubWV0YWRhdGFbdV0scHx8KHRoaXMubWV0YWRhdGFbdV09cD1zdCgrZy5sZXZlbE51bSxuKSksdGhpcy5faW5kZXhlcy5wdXNoKHtwYXRoOnUsdHVwbGU6ZX0pLGcuaGFzQ2hpbGRyZW4mJihwLmV4cGFuZGVkPT09ITEmJihzPTAscC5jaGlsZHJlbj0wKSxkPXtjbGFzc05hbWU6XCJrLWljb24gXCIrKHM/UnQ6QnQpfSxkW3B0LmF0dHIoXCJwYXRoXCIpXT11LHYucHVzaChydChcInNwYW5cIixkKSkpLHYucHVzaCh0aGlzLl9jb250ZW50KGcsZSkpLGw9dGhpcy5fY2VsbChyLm5vdEZpcnN0P1wiIGstZmlyc3RcIjpcIlwiLHYpLHIuY2hpbGRyZW4ucHVzaChsKSxyLmNvbFNwYW4rPTEscyl7Zm9yKGM9dGhpcy5fY2VsbChcIiBrLWFsdFwiLFt0aGlzLl9jb250ZW50KGcsZSldKSxyLmNoaWxkcmVuLnB1c2goYyk7cz5fO18rKylvPXRoaXMuX2J1aWxkUm93cyhhW19dLG4sZyk7aD1vLmNvbFNwYW4sbC5hdHRyLmNvbFNwYW49aCxwLmNoaWxkcmVuPWgscC5tZW1iZXJzPTEsci5jb2xTcGFuKz1oLHIucm93U3Bhbj1vLnJvd1NwYW4rMSxtJiYoaD1tLm1lYXN1cmU/dGhpcy5fbWVhc3VyZXMobS5jaGlsZHJlbixlLFwiIGstYWx0XCIpOnRoaXMuX2J1aWxkUm93cyhlLG4rMSkuY29sU3BhbixjLmF0dHIuY29sU3Bhbj1oLGgtPTEscC5tZW1iZXJzKz1oLHIuY29sU3Bhbis9aCl9ZWxzZSBtJiYoaD1tLm1lYXN1cmU/dGhpcy5fbWVhc3VyZXMobS5jaGlsZHJlbixlKTp0aGlzLl9idWlsZFJvd3MoZSxuKzEpLmNvbFNwYW4scC5tZW1iZXJzPWgsaD4xJiYobC5hdHRyLmNvbFNwYW49aCxyLmNvbFNwYW4rPWgtMSkpO3JldHVybiBwLmNoaWxkcmVuPnAubWF4Q2hpbGRyZW4mJihwLm1heENoaWxkcmVuPXAuY2hpbGRyZW4pLHAubWVtYmVycz5wLm1heE1lbWJlcnMmJihwLm1heE1lbWJlcnM9cC5tZW1iZXJzKSwoY3x8bCkudHVwbGVBbGw9ITAscn19KSx1dD1ndC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt0aGlzLm1ldGFkYXRhPXt9fSxidWlsZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl90Ym9keShlKSxuPXRoaXMuX2NvbEdyb3VwKCk7cmV0dXJuW3J0KFwidGFibGVcIixudWxsLFtuLHRdKV19LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5tZXRhZGF0YT17fX0sX2NvbEdyb3VwOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMucm93c1swXS5jaGlsZHJlbi5sZW5ndGgsdD1bXSxuPTA7ZT5uO24rKyl0LnB1c2gocnQoXCJjb2xcIixudWxsKSk7cmV0dXJuIHJ0KFwiY29sZ3JvdXBcIixudWxsLHQpfSxfdGJvZHk6ZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXTtyZXR1cm4gdGhpcy5yb290VHVwbGU9dCx0aGlzLnJvd3M9W10sdGhpcy5tYXA9e30sdGhpcy5faW5kZXhlcz1bXSx0Pyh0aGlzLl9idWlsZFJvd3ModCwwKSx0aGlzLl9ub3JtYWxpemUoKSk6dGhpcy5yb3dzLnB1c2gocnQoXCJ0clwiLG51bGwsW3J0KFwidGRcIixudWxsLFtvdChcIiZuYnNwO1wiKV0pXSkpLHJ0KFwidGJvZHlcIixudWxsLHRoaXMucm93cyl9LF9ub3JtYWxpemU6ZnVuY3Rpb24oKXtmb3IodmFyIGUsdCxuLGkscj10aGlzLnJvd3Msbz1yLmxlbmd0aCxhPTAscz10aGlzLnJvb3RUdXBsZS5tZW1iZXJzLGw9c1swXS5uYW1lLGM9cy5sZW5ndGgsZD0wLHU9dGhpcy5tYXA7bz5hO2ErKylmb3IoZT1yW2FdLGQ9MDtjPmQ7ZCsrKW49dGhpc1tzW2RdLm5hbWVdLHQ9ZS5jb2xTcGFuW1wiZGltXCIrZF0sdCYmbj50LmxldmVsTnVtJiYodC5hdHRyLmNvbFNwYW49bi10LmxldmVsTnVtKzEpO2U9dVtsXSxpPXVbbCtcImFsbFwiXSxlJiYoZS5jaGlsZHJlblswXS5hdHRyLmNsYXNzTmFtZT1cImstZmlyc3RcIiksaSYmKGkuY2hpbGRyZW5bMF0uYXR0ci5jbGFzc05hbWUrPVwiIGstZmlyc3RcIil9LF9yb3c6ZnVuY3Rpb24oZSl7dmFyIHQ9cnQoXCJ0clwiLG51bGwsZSk7cmV0dXJuIHQucm93U3Bhbj0xLHQuY29sU3Bhbj17fSx0aGlzLnJvd3MucHVzaCh0KSx0fSxfY29udGVudDpmdW5jdGlvbihlLHQpe3JldHVybiBvdCh0aGlzLnRlbXBsYXRlKHttZW1iZXI6ZSx0dXBsZTp0fSkpfSxfYnVpbGRSb3dzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYSxzLGwsYyxkLHU9dGhpcy5tYXAsaD1lLm1lbWJlcnMscD1oW3RdLGY9aFt0KzFdLGc9cC5jaGlsZHJlbixtPWcubGVuZ3RoLHY9K3AubGV2ZWxOdW0rMSxfPXRoaXMucm9vdFR1cGxlLm1lbWJlcnNbdF0ubmFtZSx5PWx0KGUsdC0xKS5qb2luKFwiXCIpLHc9eSsocC5wYXJlbnROYW1lfHxcIlwiKSxiPXVbdytcImFsbFwiXXx8dVt3XSxrPVtdO2lmKCFifHxiLmhhc0NoaWxkP2I9dGhpcy5fcm93KCk6Yi5oYXNDaGlsZD0hMCxwLm1lYXN1cmUpe2ZvcihjPXtjbGFzc05hbWU6Yi5hbGxDZWxsP1wiay1ncmlkLWZvb3RlclwiOlwiXCJ9LGIuY2hpbGRyZW4ucHVzaChydChcInRkXCIsYyxbdGhpcy5fY29udGVudChnWzBdLGUpXSkpLGIucm93U3Bhbj1tLGQ9MTttPmQ7ZCsrKXRoaXMuX3JvdyhbcnQoXCJ0ZFwiLGMsW3RoaXMuX2NvbnRlbnQoZ1tkXSxlKV0pXSk7cmV0dXJuIGJ9aWYodVt5K3AubmFtZV09YixuPXB0LnN0cmluZ2lmeShsdChlLHQpKSxvPXRoaXMubWV0YWRhdGFbbl0sb3x8KHRoaXMubWV0YWRhdGFbbl09bz1zdCh2LTEsdCkpLHRoaXMuX2luZGV4ZXMucHVzaCh7cGF0aDpuLHR1cGxlOmV9KSxwLmhhc0NoaWxkcmVuJiYoby5leHBhbmRlZD09PSExJiYobT0wLG8uY2hpbGRyZW49MCksYT17Y2xhc3NOYW1lOlwiay1pY29uIFwiKyhtP1J0OkJ0KX0sYVtwdC5hdHRyKFwicGF0aFwiKV09bixrLnB1c2gocnQoXCJzcGFuXCIsYSkpKSxrLnB1c2godGhpcy5fY29udGVudChwLGUpKSxsPXJ0KFwidGRcIix7Y2xhc3NOYW1lOmIuYWxsQ2VsbCYmIW0/XCJrLWdyaWQtZm9vdGVyXCI6XCJcIn0sayksbC5sZXZlbE51bT12LGIuY2hpbGRyZW4ucHVzaChsKSxiLmNvbFNwYW5bXCJkaW1cIit0XT1sLCghdGhpc1tfXXx8dj50aGlzW19dKSYmKHRoaXNbX109diksbSl7Zm9yKGIuYWxsQ2VsbD0hMSxiLmhhc0NoaWxkPSExLGQ9MDttPmQ7ZCsrKWk9dGhpcy5fYnVpbGRSb3dzKGdbZF0sdCksYiE9PWkmJihiLnJvd1NwYW4rPWkucm93U3Bhbik7Yi5yb3dTcGFuPjEmJihsLmF0dHIucm93U3Bhbj1iLnJvd1NwYW4pLG8uY2hpbGRyZW49Yi5yb3dTcGFuLHM9cnQoXCJ0ZFwiLHtjbGFzc05hbWU6XCJrLWdyaWQtZm9vdGVyXCJ9LFt0aGlzLl9jb250ZW50KHAsZSldKSxzLmxldmVsTnVtPXYscj10aGlzLl9yb3coW3NdKSxyLmNvbFNwYW5bXCJkaW1cIit0XT1zLHIuYWxsQ2VsbD0hMCx1W3krcC5uYW1lK1wiYWxsXCJdPXIsZiYmKGk9dGhpcy5fYnVpbGRSb3dzKGUsdCsxKSxzLmF0dHIucm93U3Bhbj1pLnJvd1NwYW4pLGIucm93U3Bhbis9ci5yb3dTcGFuLG8ubWVtYmVycz1yLnJvd1NwYW59ZWxzZSBmJiYoYi5oYXNDaGlsZD0hMSx0aGlzLl9idWlsZFJvd3MoZSx0KzEpLChzfHxsKS5hdHRyLnJvd1NwYW49Yi5yb3dTcGFuLG8ubWVtYmVycz1iLnJvd1NwYW4pO3JldHVybiBvLmNoaWxkcmVuPm8ubWF4Q2hpbGRyZW4mJihvLm1heENoaWxkcmVuPW8uY2hpbGRyZW4pLG8ubWVtYmVycz5vLm1heE1lbWJlcnMmJihvLm1heE1lbWJlcnM9by5tZW1iZXJzKSxifX0pLGh0PWd0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbigpe3RoaXMuY29sdW1uQXhpcz17fSx0aGlzLnJvd0F4aXM9e319LGJ1aWxkOmZ1bmN0aW9uKGUsbixpKXt2YXIgcixvLGE9bi5pbmRleGVzWzBdLHM9bi5tZXRhZGF0YVthP2EucGF0aDp0XTtyZXR1cm4gdGhpcy5jb2x1bW5BeGlzPW4sdGhpcy5yb3dBeGlzPWksdGhpcy5kYXRhPWUsdGhpcy5yb3dMZW5ndGg9cz9zLm1heENoaWxkcmVuK3MubWF4TWVtYmVyczpuLm1lYXN1cmVzLmxlbmd0aHx8MSx0aGlzLnJvd0xlbmd0aHx8KHRoaXMucm93TGVuZ3RoPTEpLHI9dGhpcy5fdGJvZHkoKSxvPXRoaXMuX2NvbEdyb3VwKCksW3J0KFwidGFibGVcIixudWxsLFtvLHJdKV19LF9jb2xHcm91cDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuY29sdW1uQXhpcy5tZWFzdXJlcy5sZW5ndGh8fDEsdD1bXSxuPTA7Zm9yKHRoaXMucm93c1swXSYmKGU9dGhpcy5yb3dzWzBdLmNoaWxkcmVuLmxlbmd0aCk7ZT5uO24rKyl0LnB1c2gocnQoXCJjb2xcIixudWxsKSk7cmV0dXJuIHJ0KFwiY29sZ3JvdXBcIixudWxsLHQpfSxfdGJvZHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb3dzPVtdLHRoaXMuZGF0YVswXT8odGhpcy5jb2x1bW5JbmRleGVzPXRoaXMuX2luZGV4ZXModGhpcy5jb2x1bW5BeGlzKSx0aGlzLnJvd0luZGV4ZXM9dGhpcy5faW5kZXhlcyh0aGlzLnJvd0F4aXMpLHRoaXMuX2J1aWxkUm93cygpKTp0aGlzLnJvd3MucHVzaChydChcInRyXCIsbnVsbCxbcnQoXCJ0ZFwiLG51bGwsW290KFwiJm5ic3A7XCIpXSldKSkscnQoXCJ0Ym9keVwiLG51bGwsdGhpcy5yb3dzKX0sX2luZGV4ZXM6ZnVuY3Rpb24oZSl7dmFyIG4saSxyLG8sYSxzPVtdLGw9ZS5pbmRleGVzLGM9ZS5tZXRhZGF0YSxkPWUubWVhc3VyZXMsdT1kLmxlbmd0aHx8MSxoPTAscD0wLGY9MCxnPWwubGVuZ3RoO2lmKCFnKXtmb3Iocj0wO3U+cjtyKyspc1tyXT17aW5kZXg6cixtZWFzdXJlOmRbcl0sdHVwbGU6bnVsbH07cmV0dXJuIHN9Zm9yKDtnPmY7ZisrKXtpZihuPWxbZl0saT1jW24ucGF0aF0sbz1pLmNoaWxkcmVuK2kubWVtYmVycyxhPTAsbyYmKG8tPXUpLGkuZXhwYW5kZWQ9PT0hMSYmaS5jaGlsZHJlbiE9PWkubWF4Q2hpbGRyZW4mJihhPWkubWF4Q2hpbGRyZW4pLGkucGFyZW50TWVtYmVyJiYwPT09aS5sZXZlbE51bSYmKG89LTEpLG8+LTEpe2ZvcihyPTA7dT5yO3IrKylzW28rcCtyXT17Y2hpbGRyZW46byxpbmRleDpoLG1lYXN1cmU6ZFtyXSx0dXBsZTpuLnR1cGxlfSxoKz0xO2Zvcig7c1twXSE9PXQ7KXArPTF9aCs9YX1yZXR1cm4gc30sX2J1aWxkUm93czpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLnJvd0luZGV4ZXMsdD1lLmxlbmd0aCxuPTA7dD5uO24rKyl0aGlzLnJvd3MucHVzaCh0aGlzLl9idWlsZFJvdyhlW25dKSl9LF9idWlsZFJvdzpmdW5jdGlvbihlKXtmb3IodmFyIHQsbixpLHIsbyxhLHM9ZS5pbmRleCp0aGlzLnJvd0xlbmd0aCxsPXRoaXMuY29sdW1uSW5kZXhlcyxjPWwubGVuZ3RoLGQ9W10sdT0wO2M+dTt1KyspdD1sW3VdLHI9e30sdC5jaGlsZHJlbiYmKHIuY2xhc3NOYW1lPVwiay1hbHRcIiksaT1cIlwiLG89dGhpcy5kYXRhW3MrdC5pbmRleF0sYT10Lm1lYXN1cmV8fGUubWVhc3VyZSxuPXtjb2x1bW5UdXBsZTp0LnR1cGxlLHJvd1R1cGxlOmUudHVwbGUsbWVhc3VyZTphLGRhdGFJdGVtOm99LFwiXCIhPT1vLnZhbHVlJiZhJiZhLnR5cGUmJihcInN0YXR1c1wiPT09YS50eXBlP2k9dGhpcy5rcGlTdGF0dXNUZW1wbGF0ZShuKTpcInRyZW5kXCI9PT1hLnR5cGUmJihpPXRoaXMua3BpVHJlbmRUZW1wbGF0ZShuKSkpLGl8fChpPXRoaXMuZGF0YVRlbXBsYXRlKG4pKSxkLnB1c2gocnQoXCJ0ZFwiLHIsW290KGkpXSkpO3JldHVybiByPXt9LGUuY2hpbGRyZW4mJihyLmNsYXNzTmFtZT1cImstZ3JpZC1mb290ZXJcIikscnQoXCJ0clwiLHIsZCl9fSksZnQucGx1Z2luKGl0KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj10LmNoaWxkcmVuKFwiLmstYW5pbWF0aW9uLWNvbnRhaW5lclwiKTtyZXR1cm4gbi5sZW5ndGh8fChuPXQpLG4uY2hpbGRyZW4oZSl9fWZ1bmN0aW9uIGkoZSl7cmV0dXJuIGYudGVtcGxhdGUoZSx7dXNlV2l0aEJsb2NrOiExfSl9ZnVuY3Rpb24gcihlKXtyZXR1cm4gZS5maW5kKFwiPiBkaXYgLmstY2hlY2tib3ggW3R5cGU9Y2hlY2tib3hdXCIpfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbil7bj1uLmNsb3Nlc3QoRyk7dmFyIGkscj1uLnBhcmVudCgpO3JldHVybiByLnBhcmVudCgpLmlzKFwibGlcIikmJihpPXIucGFyZW50KCkpLHRoaXMuX2RhdGFTb3VyY2VNb3ZlKHQscixpLGZ1bmN0aW9uKHQsaSl7cmV0dXJuIHRoaXMuX2luc2VydCh0LmRhdGEoKSxpLG4uaW5kZXgoKStlKX0pfX1mdW5jdGlvbiBhKHQsbil7Zm9yKHZhciBpO3QmJlwidWxcIiE9dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOylpPXQsdD10Lm5leHRTaWJsaW5nLDM9PWkubm9kZVR5cGUmJihpLm5vZGVWYWx1ZT1lLnRyaW0oaS5ub2RlVmFsdWUpKSxwLnRlc3QoaS5jbGFzc05hbWUpP24uaW5zZXJ0QmVmb3JlKGksbi5maXJzdENoaWxkKTpuLmFwcGVuZENoaWxkKGkpfWZ1bmN0aW9uIHModCl7dmFyIG49dC5jaGlsZHJlbihcImRpdlwiKSxpPXQuY2hpbGRyZW4oXCJ1bFwiKSxyPW4uY2hpbGRyZW4oXCIuay1pY29uXCIpLG89dC5jaGlsZHJlbihcIjpjaGVja2JveFwiKSxzPW4uY2hpbGRyZW4oXCIuay1pblwiKTt0Lmhhc0NsYXNzKFwiay10cmVldmlld1wiKXx8KG4ubGVuZ3RofHwobj1lKFwiPGRpdiAvPlwiKS5wcmVwZW5kVG8odCkpLCFyLmxlbmd0aCYmaS5sZW5ndGg/cj1lKFwiPHNwYW4gY2xhc3M9J2staWNvbicgLz5cIikucHJlcGVuZFRvKG4pOmkubGVuZ3RoJiZpLmNoaWxkcmVuKCkubGVuZ3RofHwoci5yZW1vdmUoKSxpLnJlbW92ZSgpKSxvLmxlbmd0aCYmZShcIjxzcGFuIGNsYXNzPSdrLWNoZWNrYm94JyAvPlwiKS5hcHBlbmRUbyhuKS5hcHBlbmQobykscy5sZW5ndGh8fChzPXQuY2hpbGRyZW4oXCJhXCIpLmVxKDApLmFkZENsYXNzKFwiay1pblwiKSxzLmxlbmd0aHx8KHM9ZShcIjxzcGFuIGNsYXNzPSdrLWluJyAvPlwiKSkscy5hcHBlbmRUbyhuKSxuLmxlbmd0aCYmYShuWzBdLm5leHRTaWJsaW5nLHNbMF0pKSl9ZnVuY3Rpb24gbChlKXt2YXIgdD10aGlzO3QudHJlZXZpZXc9ZSx0LmhvdmVyZWQ9ZS5lbGVtZW50LHQuX2RyYWdnYWJsZT1uZXcgZy5EcmFnZ2FibGUoZS5lbGVtZW50LHtmaWx0ZXI6XCJkaXY6bm90KC5rLXN0YXRlLWRpc2FibGVkKSAuay1pblwiLGhpbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIGUudGVtcGxhdGVzLmRyYWdDbHVlKHtpdGVtOmUuZGF0YUl0ZW0odCksdHJlZXZpZXc6ZS5vcHRpb25zfSl9LGN1cnNvck9mZnNldDp7bGVmdDoxMCx0b3A6Zi5zdXBwb3J0Lm1vYmlsZU9TPy00MC9mLnN1cHBvcnQuem9vbUxldmVsKCk6MTB9LGRyYWdzdGFydDprKHQuZHJhZ3N0YXJ0LHQpLGRyYWdjYW5jZWw6ayh0LmRyYWdjYW5jZWwsdCksZHJhZzprKHQuZHJhZyx0KSxkcmFnZW5kOmsodC5kcmFnZW5kLHQpLCRhbmd1bGFyOmUub3B0aW9ucy4kYW5ndWxhcn0pfXZhciBjLGQsdSxoLHAsZj13aW5kb3cua2VuZG8sZz1mLnVpLG09Zi5kYXRhLHY9ZS5leHRlbmQsXz1mLnRlbXBsYXRlLHk9ZS5pc0FycmF5LHc9Zy5XaWRnZXQsYj1tLkhpZXJhcmNoaWNhbERhdGFTb3VyY2Usaz1lLnByb3h5LHg9Zi5rZXlzLEM9XCIua2VuZG9UcmVlVmlld1wiLFM9XCJzZWxlY3RcIixUPVwiY2hlY2tcIixEPVwibmF2aWdhdGVcIixBPVwiZXhwYW5kXCIsRT1cImNoYW5nZVwiLE09XCJlcnJvclwiLFA9XCJjaGVja2VkXCIsST1cImluZGV0ZXJtaW5hdGVcIix6PVwiY29sbGFwc2VcIixGPVwiZHJhZ3N0YXJ0XCIsUj1cImRyYWdcIixCPVwiZHJvcFwiLEw9XCJkcmFnZW5kXCIsTz1cImRhdGFCb3VuZFwiLEg9XCJjbGlja1wiLE49XCJ2aXNpYmlsaXR5XCIsVj1cInVuZGVmaW5lZFwiLFU9XCJrLXN0YXRlLWhvdmVyXCIsVz1cImstdHJlZXZpZXdcIixqPVwiOnZpc2libGVcIixHPVwiLmstaXRlbVwiLHE9XCJzdHJpbmdcIiwkPVwiYXJpYS1zZWxlY3RlZFwiLFk9XCJhcmlhLWRpc2FibGVkXCIsSz17dGV4dDpcImRhdGFUZXh0RmllbGRcIix1cmw6XCJkYXRhVXJsRmllbGRcIixzcHJpdGVDc3NDbGFzczpcImRhdGFTcHJpdGVDc3NDbGFzc0ZpZWxkXCIsaW1hZ2VVcmw6XCJkYXRhSW1hZ2VVcmxGaWVsZFwifSxRPWZ1bmN0aW9uKGUpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBIVE1MRWxlbWVudD9lIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ6ZSYmXCJvYmplY3RcIj09dHlwZW9mIGUmJjE9PT1lLm5vZGVUeXBlJiZ0eXBlb2YgZS5ub2RlTmFtZT09PXF9O2Q9bihcIi5rLWdyb3VwXCIpLHU9bihcIi5rLWdyb3VwLC5rLWNvbnRlbnRcIiksaD1mdW5jdGlvbihlKXtyZXR1cm4gZS5jaGlsZHJlbihcImRpdlwiKS5jaGlsZHJlbihcIi5rLWljb25cIil9LHA9L2stc3ByaXRlLyxjPWYudWkuRGF0YUJvdW5kV2lkZ2V0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj10aGlzLG89ITEsYT10JiYhIXQuZGF0YVNvdXJjZTt5KHQpJiYobj0hMCx0PXtkYXRhU291cmNlOnR9KSx0JiZ0eXBlb2YgdC5sb2FkT25EZW1hbmQ9PVYmJnkodC5kYXRhU291cmNlKSYmKHQubG9hZE9uRGVtYW5kPSExKSx3LnByb3RvdHlwZS5pbml0LmNhbGwocixlLHQpLGU9ci5lbGVtZW50LHQ9ci5vcHRpb25zLGk9ZS5pcyhcInVsXCIpJiZlfHxlLmhhc0NsYXNzKFcpJiZlLmNoaWxkcmVuKFwidWxcIiksbz0hYSYmaS5sZW5ndGgsbyYmKHQuZGF0YVNvdXJjZS5saXN0PWkpLHIuX2FuaW1hdGlvbigpLHIuX2FjY2Vzc29ycygpLHIuX3RlbXBsYXRlcygpLGUuaGFzQ2xhc3MoVyk/KHIud3JhcHBlcj1lLHIucm9vdD1lLmNoaWxkcmVuKFwidWxcIikuZXEoMCkpOihyLl93cmFwcGVyKCksaSYmKHIucm9vdD1lLHIuX2dyb3VwKHIud3JhcHBlcikpKSxyLl90YWJpbmRleCgpLHIucm9vdC5hdHRyKFwicm9sZVwiLFwidHJlZVwiKSxyLl9kYXRhU291cmNlKG8pLHIuX2F0dGFjaEV2ZW50cygpLHIuX2RyYWdnaW5nKCksbz9yLl9zeW5jSHRtbEFuZERhdGFTb3VyY2UoKTp0LmF1dG9CaW5kJiYoci5fcHJvZ3Jlc3MoITApLHIuZGF0YVNvdXJjZS5mZXRjaCgpKSx0LmNoZWNrYm94ZXMmJnQuY2hlY2tib3hlcy5jaGVja0NoaWxkcmVuJiZyLnVwZGF0ZUluZGV0ZXJtaW5hdGUoKSxyLmVsZW1lbnRbMF0uaWQmJihyLl9hcmlhSWQ9Zi5mb3JtYXQoXCJ7MH1fdHZfYWN0aXZlXCIsci5lbGVtZW50WzBdLmlkKSksZi5ub3RpZnkocil9LF9hdHRhY2hFdmVudHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49XCIuay1pbjpub3QoLmstc3RhdGUtc2VsZWN0ZWQsLmstc3RhdGUtZGlzYWJsZWQpXCIsaT1cIm1vdXNlZW50ZXJcIjt0LndyYXBwZXIub24oaStDLFwiLmstaW4uay1zdGF0ZS1zZWxlY3RlZFwiLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX0pLm9uKGkrQyxuLGZ1bmN0aW9uKCl7ZSh0aGlzKS5hZGRDbGFzcyhVKX0pLm9uKFwibW91c2VsZWF2ZVwiK0MsbixmdW5jdGlvbigpe2UodGhpcykucmVtb3ZlQ2xhc3MoVSl9KS5vbihIK0MsbixrKHQuX2NsaWNrLHQpKS5vbihcImRibGNsaWNrXCIrQyxcIi5rLWluOm5vdCguay1zdGF0ZS1kaXNhYmxlZClcIixrKHQuX3RvZ2dsZUJ1dHRvbkNsaWNrLHQpKS5vbihIK0MsXCIuay1wbHVzLC5rLW1pbnVzXCIsayh0Ll90b2dnbGVCdXR0b25DbGljayx0KSkub24oXCJrZXlkb3duXCIrQyxrKHQuX2tleWRvd24sdCkpLm9uKFwiZm9jdXNcIitDLGsodC5fZm9jdXMsdCkpLm9uKFwiYmx1clwiK0Msayh0Ll9ibHVyLHQpKS5vbihcIm1vdXNlZG93blwiK0MsXCIuay1pbiwuay1jaGVja2JveCA6Y2hlY2tib3gsLmstcGx1cywuay1taW51c1wiLGsodC5fbW91c2Vkb3duLHQpKS5vbihcImNoYW5nZVwiK0MsXCIuay1jaGVja2JveCA6Y2hlY2tib3hcIixrKHQuX2NoZWNrYm94Q2hhbmdlLHQpKS5vbihcImNsaWNrXCIrQyxcIi5rLWNoZWNrYm94IDpjaGVja2JveFwiLGsodC5fY2hlY2tib3hDbGljayx0KSkub24oXCJjbGlja1wiK0MsXCIuay1yZXF1ZXN0LXJldHJ5XCIsayh0Ll9yZXRyeVJlcXVlc3QsdCkpLm9uKFwiY2xpY2tcIitDLGZ1bmN0aW9uKG4pe2Uobi50YXJnZXQpLmlzKFwiOmtlbmRvRm9jdXNhYmxlXCIpfHx0LmZvY3VzKCl9KX0sX2NoZWNrYm94Q2xpY2s6ZnVuY3Rpb24odCl7dmFyIG49ZSh0LnRhcmdldCk7bi5kYXRhKEkpJiYobi5kYXRhKEksITEpLnByb3AoSSwhMSkucHJvcChQLCEwKSx0aGlzLl9jaGVja2JveENoYW5nZSh0KSl9LF9zeW5jSHRtbEFuZERhdGFTb3VyY2U6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLG8sYSxzLGwsYyxkO2ZvcihlPWV8fHRoaXMucm9vdCx0PXR8fHRoaXMuZGF0YVNvdXJjZSxuPXQudmlldygpLGk9Zi5hdHRyKFwidWlkXCIpLG89Zi5hdHRyKFwiZXhwYW5kZWRcIiksYT10aGlzLm9wdGlvbnMuY2hlY2tib3hlcyxzPWUuY2hpbGRyZW4oXCJsaVwiKSxsPTA7cy5sZW5ndGg+bDtsKyspZD1uW2xdLGM9cy5lcShsKSxjLmF0dHIoXCJyb2xlXCIsXCJ0cmVlaXRlbVwiKS5hdHRyKGksZC51aWQpLGQuZXhwYW5kZWQ9XCJ0cnVlXCI9PT1jLmF0dHIobyksYSYmKGQuY2hlY2tlZD1yKGMpLnByb3AoUCkpLHRoaXMuX3N5bmNIdG1sQW5kRGF0YVNvdXJjZShjLmNoaWxkcmVuKFwidWxcIiksZC5jaGlsZHJlbil9LF9hbmltYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMsdD1lLmFuaW1hdGlvbjt0PT09ITE/dD17ZXhwYW5kOntlZmZlY3RzOnt9fSxjb2xsYXBzZTp7aGlkZTohMCxlZmZlY3RzOnt9fX06dC5jb2xsYXBzZSYmXCJlZmZlY3RzXCJpbiB0LmNvbGxhcHNlfHwodC5jb2xsYXBzZT12KHtyZXZlcnNlOiEwfSx0LmV4cGFuZCkpLHYodC5jb2xsYXBzZSx7aGlkZTohMH0pLGUuYW5pbWF0aW9uPXR9LF9kcmFnZ2luZzpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5kcmFnQW5kRHJvcCx0PXRoaXMuZHJhZ2dpbmc7ZSYmIXQ/dGhpcy5kcmFnZ2luZz1uZXcgbCh0aGlzKTohZSYmdCYmKHQuZGVzdHJveSgpLHRoaXMuZHJhZ2dpbmc9bnVsbCl9LF90ZW1wbGF0ZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLG49ayhlLl9maWVsZEFjY2Vzc29yLGUpO3QudGVtcGxhdGUmJnR5cGVvZiB0LnRlbXBsYXRlPT1xP3QudGVtcGxhdGU9Xyh0LnRlbXBsYXRlKTp0LnRlbXBsYXRlfHwodC50ZW1wbGF0ZT1pKFwiIyB2YXIgdGV4dCA9IFwiK24oXCJ0ZXh0XCIpK1wiKGRhdGEuaXRlbSk7ICMjIGlmICh0eXBlb2YgZGF0YS5pdGVtLmVuY29kZWQgIT0gJ3VuZGVmaW5lZCcgJiYgZGF0YS5pdGVtLmVuY29kZWQgPT09IGZhbHNlKSB7IyM9IHRleHQgIyMgfSBlbHNlIHsgIyM6IHRleHQgIyMgfSAjXCIpKSxlLl9jaGVja2JveGVzKCksZS50ZW1wbGF0ZXM9e3dyYXBwZXJDc3NDbGFzczpmdW5jdGlvbihlLHQpe3ZhciBuPVwiay1pdGVtXCIsaT10LmluZGV4O3JldHVybiBlLmZpcnN0TGV2ZWwmJjA9PT1pJiYobis9XCIgay1maXJzdFwiKSxpPT1lLmxlbmd0aC0xJiYobis9XCIgay1sYXN0XCIpLG59LGNzc0NsYXNzOmZ1bmN0aW9uKGUsdCl7dmFyIG49XCJcIixpPXQuaW5kZXgscj1lLmxlbmd0aC0xO3JldHVybiBlLmZpcnN0TGV2ZWwmJjA9PT1pJiYobis9XCJrLXRvcCBcIiksbis9MD09PWkmJmkhPXI/XCJrLXRvcFwiOmk9PXI/XCJrLWJvdFwiOlwiay1taWRcIn0sdGV4dENsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0PVwiay1pblwiO3JldHVybiBlLmVuYWJsZWQ9PT0hMSYmKHQrPVwiIGstc3RhdGUtZGlzYWJsZWRcIiksZS5zZWxlY3RlZD09PSEwJiYodCs9XCIgay1zdGF0ZS1zZWxlY3RlZFwiKSx0fSx0b2dnbGVCdXR0b25DbGFzczpmdW5jdGlvbihlKXt2YXIgdD1cImstaWNvblwiO3JldHVybiB0Kz1lLmV4cGFuZGVkIT09ITA/XCIgay1wbHVzXCI6XCIgay1taW51c1wiLGUuZW5hYmxlZD09PSExJiYodCs9XCItZGlzYWJsZWRcIiksdH0sZ3JvdXBBdHRyaWJ1dGVzOmZ1bmN0aW9uKGUpe3ZhciB0PVwiXCI7cmV0dXJuIGUuZmlyc3RMZXZlbHx8KHQ9XCJyb2xlPSdncm91cCdcIiksdCsoZS5leHBhbmRlZCE9PSEwP1wiIHN0eWxlPSdkaXNwbGF5Om5vbmUnXCI6XCJcIil9LGdyb3VwQ3NzQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJrLWdyb3VwXCI7cmV0dXJuIGUuZmlyc3RMZXZlbCYmKHQrPVwiIGstdHJlZXZpZXctbGluZXNcIiksdH0sZHJhZ0NsdWU6aShcIjxkaXYgY2xhc3M9J2staGVhZGVyIGstZHJhZy1jbHVlJz48c3BhbiBjbGFzcz0nay1pY29uIGstZHJhZy1zdGF0dXMnIC8+Iz0gZGF0YS50cmVldmlldy50ZW1wbGF0ZShkYXRhKSAjPC9kaXY+XCIpLGdyb3VwOmkoXCI8dWwgY2xhc3M9JyM9IGRhdGEuci5ncm91cENzc0NsYXNzKGRhdGEuZ3JvdXApICMnIz0gZGF0YS5yLmdyb3VwQXR0cmlidXRlcyhkYXRhLmdyb3VwKSAjPiM9IGRhdGEucmVuZGVySXRlbXMoZGF0YSkgIzwvdWw+XCIpLGl0ZW1Db250ZW50OmkoXCIjIHZhciBpbWFnZVVybCA9IFwiK24oXCJpbWFnZVVybFwiKStcIihkYXRhLml0ZW0pOyAjIyB2YXIgc3ByaXRlQ3NzQ2xhc3MgPSBcIituKFwic3ByaXRlQ3NzQ2xhc3NcIikrXCIoZGF0YS5pdGVtKTsgIyMgaWYgKGltYWdlVXJsKSB7ICM8aW1nIGNsYXNzPSdrLWltYWdlJyBhbHQ9Jycgc3JjPScjPSBpbWFnZVVybCAjJz4jIH0gIyMgaWYgKHNwcml0ZUNzc0NsYXNzKSB7ICM8c3BhbiBjbGFzcz0nay1zcHJpdGUgIz0gc3ByaXRlQ3NzQ2xhc3MgIycgLz4jIH0gIyM9IGRhdGEudHJlZXZpZXcudGVtcGxhdGUoZGF0YSkgI1wiKSxpdGVtRWxlbWVudDppKFwiIyB2YXIgaXRlbSA9IGRhdGEuaXRlbSwgciA9IGRhdGEucjsgIyMgdmFyIHVybCA9IFwiK24oXCJ1cmxcIikrXCIoaXRlbSk7ICM8ZGl2IGNsYXNzPScjPSByLmNzc0NsYXNzKGRhdGEuZ3JvdXAsIGl0ZW0pICMnPiMgaWYgKGl0ZW0uaGFzQ2hpbGRyZW4pIHsgIzxzcGFuIGNsYXNzPScjPSByLnRvZ2dsZUJ1dHRvbkNsYXNzKGl0ZW0pICMnIHJvbGU9J3ByZXNlbnRhdGlvbicgLz4jIH0gIyMgaWYgKGRhdGEudHJlZXZpZXcuY2hlY2tib3hlcykgeyAjPHNwYW4gY2xhc3M9J2stY2hlY2tib3gnIHJvbGU9J3ByZXNlbnRhdGlvbic+Iz0gZGF0YS50cmVldmlldy5jaGVja2JveGVzLnRlbXBsYXRlKGRhdGEpICM8L3NwYW4+IyB9ICMjIHZhciB0YWcgPSB1cmwgPyAnYScgOiAnc3Bhbic7ICMjIHZhciB0ZXh0QXR0ciA9IHVybCA/ICcgaHJlZj1cXFxcJycgKyB1cmwgKyAnXFxcXCcnIDogJyc7ICM8Iz10YWcjICBjbGFzcz0nIz0gci50ZXh0Q2xhc3MoaXRlbSkgIycjPSB0ZXh0QXR0ciAjPiM9IHIuaXRlbUNvbnRlbnQoZGF0YSkgIzwvIz10YWcjPjwvZGl2PlwiKSxpdGVtOmkoXCIjIHZhciBpdGVtID0gZGF0YS5pdGVtLCByID0gZGF0YS5yOyAjPGxpIHJvbGU9J3RyZWVpdGVtJyBjbGFzcz0nIz0gci53cmFwcGVyQ3NzQ2xhc3MoZGF0YS5ncm91cCwgaXRlbSkgIycgXCIrZi5hdHRyKFwidWlkXCIpK1wiPScjPSBpdGVtLnVpZCAjJyBhcmlhLXNlbGVjdGVkPScjPSBpdGVtLnNlbGVjdGVkID8gXFxcInRydWVcXFwiIDogXFxcImZhbHNlIFxcXCIgIycgIz1pdGVtLmVuYWJsZWQgPT09IGZhbHNlID8gXFxcImFyaWEtZGlzYWJsZWQ9J3RydWUnXFxcIiA6ICcnIz4jPSByLml0ZW1FbGVtZW50KGRhdGEpICM8L2xpPlwiKSxsb2FkaW5nOmkoXCI8ZGl2IGNsYXNzPSdrLWljb24gay1sb2FkaW5nJyAvPiAjOiBkYXRhLm1lc3NhZ2VzLmxvYWRpbmcgI1wiKSxyZXRyeTppKFwiIzogZGF0YS5tZXNzYWdlcy5yZXF1ZXN0RmFpbGVkICMgPGJ1dHRvbiBjbGFzcz0nay1idXR0b24gay1yZXF1ZXN0LXJldHJ5Jz4jOiBkYXRhLm1lc3NhZ2VzLnJldHJ5ICM8L2J1dHRvbj5cIil9fSxpdGVtczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnQuZmluZChcIi5rLWl0ZW0gZGl2OmZpcnN0LWNoaWxkXCIpfSxzZXREYXRhU291cmNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9uczt0LmRhdGFTb3VyY2U9ZSx0aGlzLl9kYXRhU291cmNlKCksdGhpcy5kYXRhU291cmNlLmZldGNoKCksdC5jaGVja2JveGVzJiZ0LmNoZWNrYm94ZXMuY2hlY2tDaGlsZHJlbiYmdGhpcy51cGRhdGVJbmRldGVybWluYXRlKCl9LF9iaW5kRGF0YVNvdXJjZTpmdW5jdGlvbigpe3RoaXMuX3JlZnJlc2hIYW5kbGVyPWsodGhpcy5yZWZyZXNoLHRoaXMpLHRoaXMuX2Vycm9ySGFuZGxlcj1rKHRoaXMuX2Vycm9yLHRoaXMpLHRoaXMuZGF0YVNvdXJjZS5iaW5kKEUsdGhpcy5fcmVmcmVzaEhhbmRsZXIpLHRoaXMuZGF0YVNvdXJjZS5iaW5kKE0sdGhpcy5fZXJyb3JIYW5kbGVyKX0sX3VuYmluZERhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRhdGFTb3VyY2U7ZSYmKGUudW5iaW5kKEUsdGhpcy5fcmVmcmVzaEhhbmRsZXIpLGUudW5iaW5kKE0sdGhpcy5fZXJyb3JIYW5kbGVyKSl9LF9kYXRhU291cmNlOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7Zm9yKHZhciBuPTA7ZS5sZW5ndGg+bjtuKyspZVtuXS5faW5pdENoaWxkcmVuKCksZVtuXS5jaGlsZHJlbi5mZXRjaCgpLHQoZVtuXS5jaGlsZHJlbi52aWV3KCkpfXZhciBuPXRoaXMsaT1uLm9wdGlvbnMscj1pLmRhdGFTb3VyY2U7cj15KHIpP3tkYXRhOnJ9OnIsbi5fdW5iaW5kRGF0YVNvdXJjZSgpLHIuZmllbGRzfHwoci5maWVsZHM9W3tmaWVsZDpcInRleHRcIn0se2ZpZWxkOlwidXJsXCJ9LHtmaWVsZDpcInNwcml0ZUNzc0NsYXNzXCJ9LHtmaWVsZDpcImltYWdlVXJsXCJ9XSksbi5kYXRhU291cmNlPXI9Yi5jcmVhdGUociksZSYmKHIuZmV0Y2goKSx0KHIudmlldygpKSksbi5fYmluZERhdGFTb3VyY2UoKX0sZXZlbnRzOltGLFIsQixMLE8sQSx6LFMsRSxELFRdLG9wdGlvbnM6e25hbWU6XCJUcmVlVmlld1wiLGRhdGFTb3VyY2U6e30sYW5pbWF0aW9uOntleHBhbmQ6e2VmZmVjdHM6XCJleHBhbmQ6dmVydGljYWxcIixkdXJhdGlvbjoyMDB9LGNvbGxhcHNlOntkdXJhdGlvbjoxMDB9fSxtZXNzYWdlczp7bG9hZGluZzpcIkxvYWRpbmcuLi5cIixyZXF1ZXN0RmFpbGVkOlwiUmVxdWVzdCBmYWlsZWQuXCIscmV0cnk6XCJSZXRyeVwifSxkcmFnQW5kRHJvcDohMSxjaGVja2JveGVzOiExLGF1dG9CaW5kOiEwLGxvYWRPbkRlbWFuZDohMCx0ZW1wbGF0ZTpcIlwiLGRhdGFUZXh0RmllbGQ6bnVsbH0sX2FjY2Vzc29yczpmdW5jdGlvbigpe3ZhciBlLHQsbixpPXRoaXMscj1pLm9wdGlvbnMsbz1pLmVsZW1lbnQ7Zm9yKGUgaW4gSyl0PXJbS1tlXV0sbj1vLmF0dHIoZi5hdHRyKGUrXCItZmllbGRcIikpLCF0JiZuJiYodD1uKSx0fHwodD1lKSx5KHQpfHwodD1bdF0pLHJbS1tlXV09dH0sX2ZpZWxkQWNjZXNzb3I6ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5vcHRpb25zW0tbdF1dLGk9bi5sZW5ndGgscj1cIihmdW5jdGlvbihpdGVtKSB7XCI7cmV0dXJuIDA9PT1pP3IrPVwicmV0dXJuIGl0ZW1bJ1wiK3QrXCInXTtcIjoocis9XCJ2YXIgbGV2ZWxzID0gW1wiK2UubWFwKG4sZnVuY3Rpb24oZSl7cmV0dXJuXCJmdW5jdGlvbihkKXsgcmV0dXJuIFwiK2YuZXhwcihlKStcIn1cIn0pLmpvaW4oXCIsXCIpK1wiXTtcIixyKz1cInJldHVybiBsZXZlbHNbTWF0aC5taW4oaXRlbS5sZXZlbCgpLCBcIitpK1wiLTEpXShpdGVtKVwiKSxyKz1cIn0pXCJ9LHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7dy5mbi5zZXRPcHRpb25zLmNhbGwodGhpcyxlKSx0aGlzLl9hbmltYXRpb24oKSx0aGlzLl9kcmFnZ2luZygpLHRoaXMuX3RlbXBsYXRlcygpfSxfdHJpZ2dlcjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnRyaWdnZXIoZSx7bm9kZTp0LmNsb3Nlc3QoRylbMF19KX0sX3NldENoZWNrZWQ6ZnVuY3Rpb24odCxuKXtpZih0JiZlLmlzRnVuY3Rpb24odC52aWV3KSlmb3IodmFyIGk9MCxyPXQudmlldygpO3IubGVuZ3RoPmk7aSsrKXJbaV1bUF09bixyW2ldLmNoaWxkcmVuJiZ0aGlzLl9zZXRDaGVja2VkKHJbaV0uY2hpbGRyZW4sbil9LF9zZXRJbmRldGVybWluYXRlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxvPWQoZSksYT0hMDtpZihvLmxlbmd0aCYmKHQ9cihvLmNoaWxkcmVuKCkpLG49dC5sZW5ndGgpKXtpZihuPjEpe2ZvcihpPTE7bj5pO2krKylpZih0W2ldLmNoZWNrZWQhPXRbaS0xXS5jaGVja2VkfHx0W2ldLmluZGV0ZXJtaW5hdGV8fHRbaS0xXS5pbmRldGVybWluYXRlKXthPSExO1xyXG5icmVha319ZWxzZSBhPSF0WzBdLmluZGV0ZXJtaW5hdGU7cmV0dXJuIHIoZSkuZGF0YShJLCFhKS5wcm9wKEksIWEpLnByb3AoUCxhJiZ0WzBdLmNoZWNrZWQpfX0sdXBkYXRlSW5kZXRlcm1pbmF0ZTpmdW5jdGlvbihlKXt2YXIgdCxuLGk7aWYoZT1lfHx0aGlzLndyYXBwZXIsdD1kKGUpLmNoaWxkcmVuKCksdC5sZW5ndGgpe2ZvcihuPTA7dC5sZW5ndGg+bjtuKyspdGhpcy51cGRhdGVJbmRldGVybWluYXRlKHQuZXEobikpO2k9dGhpcy5fc2V0SW5kZXRlcm1pbmF0ZShlKSxpJiZpLnByb3AoUCkmJih0aGlzLmRhdGFJdGVtKGUpLmNoZWNrZWQ9ITApfX0sX2J1YmJsZUluZGV0ZXJtaW5hdGU6ZnVuY3Rpb24oZSl7aWYoZS5sZW5ndGgpe3ZhciB0LG49dGhpcy5wYXJlbnQoZSk7bi5sZW5ndGgmJih0aGlzLl9zZXRJbmRldGVybWluYXRlKG4pLHQ9bi5jaGlsZHJlbihcImRpdlwiKS5maW5kKFwiLmstY2hlY2tib3ggOmNoZWNrYm94XCIpLHQucHJvcChJKT09PSExP3RoaXMuZGF0YUl0ZW0obikuc2V0KFAsdC5wcm9wKFApKTp0aGlzLmRhdGFJdGVtKG4pLmNoZWNrZWQ9ITEsdGhpcy5fYnViYmxlSW5kZXRlcm1pbmF0ZShuKSl9fSxfY2hlY2tib3hDaGFuZ2U6ZnVuY3Rpb24odCl7dmFyIG49ZSh0LnRhcmdldCksaT1uLnByb3AoUCkscj1uLmNsb3Nlc3QoRyk7dGhpcy5kYXRhSXRlbShyKS5zZXQoUCxpKSx0aGlzLl90cmlnZ2VyKFQscil9LF90b2dnbGVCdXR0b25DbGljazpmdW5jdGlvbih0KXt0aGlzLnRvZ2dsZShlKHQudGFyZ2V0KS5jbG9zZXN0KEcpKX0sX21vdXNlZG93bjpmdW5jdGlvbih0KXt2YXIgbj1lKHQuY3VycmVudFRhcmdldCkuY2xvc2VzdChHKTt0aGlzLl9jbGlja1RhcmdldD1uLHRoaXMuY3VycmVudChuKX0sX2ZvY3VzYWJsZTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5sZW5ndGgmJmUuaXMoXCI6dmlzaWJsZVwiKSYmIWUuZmluZChcIi5rLWluOmZpcnN0XCIpLmhhc0NsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKX0sX2ZvY3VzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5zZWxlY3QoKSxuPXRoaXMuX2NsaWNrVGFyZ2V0O2Yuc3VwcG9ydC50b3VjaHx8KG4mJm4ubGVuZ3RoJiYodD1uKSx0aGlzLl9mb2N1c2FibGUodCl8fCh0PXRoaXMuY3VycmVudCgpKSx0aGlzLl9mb2N1c2FibGUodCl8fCh0PXRoaXMuX25leHRWaXNpYmxlKGUoKSkpLHRoaXMuY3VycmVudCh0KSl9LGZvY3VzOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLndyYXBwZXIsbj10WzBdLGk9W10scj1bXSxvPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtkbyBuPW4ucGFyZW50Tm9kZSxuLnNjcm9sbEhlaWdodD5uLmNsaWVudEhlaWdodCYmKGkucHVzaChuKSxyLnB1c2gobi5zY3JvbGxUb3ApKTt3aGlsZShuIT1vKTtmb3IodC5mb2N1cygpLGU9MDtpLmxlbmd0aD5lO2UrKylpW2VdLnNjcm9sbFRvcD1yW2VdfSxfYmx1cjpmdW5jdGlvbigpe3RoaXMuY3VycmVudCgpLmZpbmQoXCIuay1pbjpmaXJzdFwiKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtZm9jdXNlZFwiKX0sX2VuYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIWUuY2hpbGRyZW4oXCJkaXZcIikuY2hpbGRyZW4oXCIuay1pblwiKS5oYXNDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIil9LHBhcmVudDpmdW5jdGlvbih0KXt2YXIgbixpLHI9L1xcYmstdHJlZXZpZXdcXGIvLG89L1xcYmstaXRlbVxcYi87dHlwZW9mIHQ9PXEmJih0PXRoaXMuZWxlbWVudC5maW5kKHQpKSxRKHQpfHwodD10WzBdKSxpPW8udGVzdCh0LmNsYXNzTmFtZSk7ZG8gdD10LnBhcmVudE5vZGUsby50ZXN0KHQuY2xhc3NOYW1lKSYmKGk/bj10Omk9ITApO3doaWxlKCFyLnRlc3QodC5jbGFzc05hbWUpJiYhbik7cmV0dXJuIGUobil9LF9uZXh0VmlzaWJsZTpmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe2Zvcig7ZS5sZW5ndGgmJiFlLm5leHQoKS5sZW5ndGg7KWU9aS5wYXJlbnQoZSk7cmV0dXJuIGUubmV4dCgpLmxlbmd0aD9lLm5leHQoKTplfXZhciBuLGk9dGhpcyxyPWkuX2V4cGFuZGVkKGUpO3JldHVybiBlLmxlbmd0aCYmZS5pcyhcIjp2aXNpYmxlXCIpP3I/KG49ZChlKS5jaGlsZHJlbigpLmZpcnN0KCksbi5sZW5ndGh8fChuPXQoZSkpKTpuPXQoZSk6bj1pLnJvb3QuY2hpbGRyZW4oKS5lcSgwKSxpLl9lbmFibGVkKG4pfHwobj1pLl9uZXh0VmlzaWJsZShuKSksbn0sX3ByZXZpb3VzVmlzaWJsZTpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcztpZighZS5sZW5ndGh8fGUucHJldigpLmxlbmd0aClmb3Iobj1lLmxlbmd0aD9lLnByZXYoKTppLnJvb3QuY2hpbGRyZW4oKS5sYXN0KCk7aS5fZXhwYW5kZWQobikmJih0PWQobikuY2hpbGRyZW4oKS5sYXN0KCksdC5sZW5ndGgpOyluPXQ7ZWxzZSBuPWkucGFyZW50KGUpfHxlO3JldHVybiBpLl9lbmFibGVkKG4pfHwobj1pLl9wcmV2aW91c1Zpc2libGUobikpLG59LF9rZXlkb3duOmZ1bmN0aW9uKG4pe3ZhciBpLHI9dGhpcyxvPW4ua2V5Q29kZSxhPXIuY3VycmVudCgpLHM9ci5fZXhwYW5kZWQoYSksbD1hLmZpbmQoXCIuay1jaGVja2JveDpmaXJzdCA6Y2hlY2tib3hcIiksYz1mLnN1cHBvcnQuaXNSdGwoci5lbGVtZW50KTtuLnRhcmdldD09bi5jdXJyZW50VGFyZ2V0JiYoIWMmJm89PXguUklHSFR8fGMmJm89PXguTEVGVD9zP2k9ci5fbmV4dFZpc2libGUoYSk6ci5leHBhbmQoYSk6IWMmJm89PXguTEVGVHx8YyYmbz09eC5SSUdIVD9zP3IuY29sbGFwc2UoYSk6KGk9ci5wYXJlbnQoYSksci5fZW5hYmxlZChpKXx8KGk9dCkpOm89PXguRE9XTj9pPXIuX25leHRWaXNpYmxlKGEpOm89PXguVVA/aT1yLl9wcmV2aW91c1Zpc2libGUoYSk6bz09eC5IT01FP2k9ci5fbmV4dFZpc2libGUoZSgpKTpvPT14LkVORD9pPXIuX3ByZXZpb3VzVmlzaWJsZShlKCkpOm89PXguRU5URVI/YS5maW5kKFwiLmstaW46Zmlyc3RcIikuaGFzQ2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIpfHxyLl90cmlnZ2VyKFMsYSl8fHIuc2VsZWN0KGEpOm89PXguU1BBQ0VCQVImJmwubGVuZ3RoJiYobC5wcm9wKFAsIWwucHJvcChQKSkuZGF0YShJLCExKS5wcm9wKEksITEpLHIuX2NoZWNrYm94Q2hhbmdlKHt0YXJnZXQ6bH0pLGk9YSksaSYmKG4ucHJldmVudERlZmF1bHQoKSxhWzBdIT1pWzBdJiYoci5fdHJpZ2dlcihELGkpLHIuY3VycmVudChpKSkpKX0sX2NsaWNrOmZ1bmN0aW9uKHQpe3ZhciBuLGk9dGhpcyxyPWUodC5jdXJyZW50VGFyZ2V0KSxvPXUoci5jbG9zZXN0KEcpKSxhPXIuYXR0cihcImhyZWZcIik7bj1hP1wiI1wiPT1hfHxhLmluZGV4T2YoXCIjXCIrdGhpcy5lbGVtZW50LmlkK1wiLVwiKT49MDpvLmxlbmd0aCYmIW8uY2hpbGRyZW4oKS5sZW5ndGgsbiYmdC5wcmV2ZW50RGVmYXVsdCgpLHIuaGFzQ2xhc3MoXCIuay1zdGF0ZS1zZWxlY3RlZFwiKXx8aS5fdHJpZ2dlcihTLHIpfHxpLnNlbGVjdChyKX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcyxpPW4uZWxlbWVudCxyPVwiay13aWRnZXQgay10cmVldmlld1wiO2kuaXMoXCJ1bFwiKT8oZT1pLndyYXAoXCI8ZGl2IC8+XCIpLnBhcmVudCgpLHQ9aSk6KGU9aSx0PWUuY2hpbGRyZW4oXCJ1bFwiKS5lcSgwKSksbi53cmFwcGVyPWUuYWRkQ2xhc3Mociksbi5yb290PXR9LF9ncm91cDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5oYXNDbGFzcyhXKSxpPXtmaXJzdExldmVsOm4sZXhwYW5kZWQ6bnx8dC5fZXhwYW5kZWQoZSl9LHI9ZS5jaGlsZHJlbihcInVsXCIpO3IuYWRkQ2xhc3ModC50ZW1wbGF0ZXMuZ3JvdXBDc3NDbGFzcyhpKSkuY3NzKFwiZGlzcGxheVwiLGkuZXhwYW5kZWQ/XCJcIjpcIm5vbmVcIiksdC5fbm9kZXMocixpKX0sX25vZGVzOmZ1bmN0aW9uKHQsbil7dmFyIGkscj10aGlzLG89dC5jaGlsZHJlbihcImxpXCIpO249dih7bGVuZ3RoOm8ubGVuZ3RofSxuKSxvLmVhY2goZnVuY3Rpb24odCxvKXtvPWUobyksaT17aW5kZXg6dCxleHBhbmRlZDpyLl9leHBhbmRlZChvKX0scyhvKSxyLl91cGRhdGVOb2RlQ2xhc3NlcyhvLG4saSksci5fZ3JvdXAobyl9KX0sX2NoZWNrYm94ZXM6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMub3B0aW9ucyxuPXQuY2hlY2tib3hlcztuJiYoZT1cIjxpbnB1dCB0eXBlPSdjaGVja2JveCcgIz0gKGl0ZW0uZW5hYmxlZCA9PT0gZmFsc2UpID8gJ2Rpc2FibGVkJyA6ICcnICMgIz0gaXRlbS5jaGVja2VkID8gJ2NoZWNrZWQnIDogJycgI1wiLG4ubmFtZSYmKGUrPVwiIG5hbWU9J1wiK24ubmFtZStcIidcIiksZSs9XCIgLz5cIixuPXYoe3RlbXBsYXRlOmV9LHQuY2hlY2tib3hlcyksdHlwZW9mIG4udGVtcGxhdGU9PXEmJihuLnRlbXBsYXRlPV8obi50ZW1wbGF0ZSkpLHQuY2hlY2tib3hlcz1uKX0sX3VwZGF0ZU5vZGVDbGFzc2VzOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1lLmNoaWxkcmVuKFwiZGl2XCIpLHI9ZS5jaGlsZHJlbihcInVsXCIpLG89dGhpcy50ZW1wbGF0ZXM7ZS5oYXNDbGFzcyhcImstdHJlZXZpZXdcIil8fChuPW58fHt9LG4uZXhwYW5kZWQ9dHlwZW9mIG4uZXhwYW5kZWQhPVY/bi5leHBhbmRlZDp0aGlzLl9leHBhbmRlZChlKSxuLmluZGV4PXR5cGVvZiBuLmluZGV4IT1WP24uaW5kZXg6ZS5pbmRleCgpLG4uZW5hYmxlZD10eXBlb2Ygbi5lbmFibGVkIT1WP24uZW5hYmxlZDohaS5jaGlsZHJlbihcIi5rLWluXCIpLmhhc0NsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKSx0PXR8fHt9LHQuZmlyc3RMZXZlbD10eXBlb2YgdC5maXJzdExldmVsIT1WP3QuZmlyc3RMZXZlbDplLnBhcmVudCgpLnBhcmVudCgpLmhhc0NsYXNzKFcpLHQubGVuZ3RoPXR5cGVvZiB0Lmxlbmd0aCE9Vj90Lmxlbmd0aDplLnBhcmVudCgpLmNoaWxkcmVuKCkubGVuZ3RoLGUucmVtb3ZlQ2xhc3MoXCJrLWZpcnN0IGstbGFzdFwiKS5hZGRDbGFzcyhvLndyYXBwZXJDc3NDbGFzcyh0LG4pKSxpLnJlbW92ZUNsYXNzKFwiay10b3Agay1taWQgay1ib3RcIikuYWRkQ2xhc3Moby5jc3NDbGFzcyh0LG4pKSxpLmNoaWxkcmVuKFwiLmstaW5cIikucmVtb3ZlQ2xhc3MoXCJrLWluIGstc3RhdGUtZGVmYXVsdCBrLXN0YXRlLWRpc2FibGVkXCIpLmFkZENsYXNzKG8udGV4dENsYXNzKG4pKSwoci5sZW5ndGh8fFwidHJ1ZVwiPT1lLmF0dHIoXCJkYXRhLWhhc0NoaWxkcmVuXCIpKSYmKGkuY2hpbGRyZW4oXCIuay1pY29uXCIpLnJlbW92ZUNsYXNzKFwiay1wbHVzIGstbWludXMgay1wbHVzLWRpc2FibGVkIGstbWludXMtZGlzYWJsZWRcIikuYWRkQ2xhc3Moby50b2dnbGVCdXR0b25DbGFzcyhuKSksci5hZGRDbGFzcyhcImstZ3JvdXBcIikpKX0sX3Byb2Nlc3NOb2RlczpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXM7aS5lbGVtZW50LmZpbmQodCkuZWFjaChmdW5jdGlvbih0LHIpe24uY2FsbChpLHQsZShyKS5jbG9zZXN0KEcpKX0pfSxkYXRhSXRlbTpmdW5jdGlvbih0KXt2YXIgbj1lKHQpLmNsb3Nlc3QoRykuYXR0cihmLmF0dHIoXCJ1aWRcIikpLGk9dGhpcy5kYXRhU291cmNlO3JldHVybiBpJiZpLmdldEJ5VWlkKG4pfSxfaW5zZXJ0Tm9kZTpmdW5jdGlvbih0LG4saSxyLG8pe3ZhciBhLGwsYyx1LGg9dGhpcyxwPWQoaSksZj1wLmNoaWxkcmVuKCkubGVuZ3RoKzEsZz17Zmlyc3RMZXZlbDppLmhhc0NsYXNzKFcpLGV4cGFuZGVkOiFvLGxlbmd0aDpmfSxtPVwiXCIsdj1mdW5jdGlvbihlLHQpe2UuYXBwZW5kVG8odCl9O2ZvcihjPTA7dC5sZW5ndGg+YztjKyspdT10W2NdLHUuaW5kZXg9bitjLG0rPWguX3JlbmRlckl0ZW0oe2dyb3VwOmcsaXRlbTp1fSk7aWYobD1lKG0pLGwubGVuZ3RoKXtmb3IoaC5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmwuZ2V0KCksZGF0YTp0Lm1hcChmdW5jdGlvbihlKXtyZXR1cm57ZGF0YUl0ZW06ZX19KX19KSxwLmxlbmd0aHx8KHA9ZShoLl9yZW5kZXJHcm91cCh7Z3JvdXA6Z30pKS5hcHBlbmRUbyhpKSkscihsLHApLGkuaGFzQ2xhc3MoXCJrLWl0ZW1cIikmJihzKGkpLGguX3VwZGF0ZU5vZGVDbGFzc2VzKGkpKSxoLl91cGRhdGVOb2RlQ2xhc3NlcyhsLnByZXYoKS5maXJzdCgpKSxoLl91cGRhdGVOb2RlQ2xhc3NlcyhsLm5leHQoKS5sYXN0KCkpLGM9MDt0Lmxlbmd0aD5jO2MrKyl1PXRbY10sdS5oYXNDaGlsZHJlbiYmKGE9dS5jaGlsZHJlbi5kYXRhKCksYS5sZW5ndGgmJmguX2luc2VydE5vZGUoYSx1LmluZGV4LGwuZXEoYyksdiwhaC5fZXhwYW5kZWQobC5lcShjKSkpKTtyZXR1cm4gbH19LF91cGRhdGVOb2RlOmZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gaSgpe3A9ITB9ZnVuY3Rpb24gcihlLHQpe2UuZmluZChcIi5rLWNoZWNrYm94IDpjaGVja2JveFwiKS5wcm9wKFAsdCkuZGF0YShJLCExKS5wcm9wKEksITEpfXZhciBvLGEscyxsLGMsZD10aGlzLGg9e3RyZWV2aWV3OmQub3B0aW9ucyxpdGVtOnN9LHA9ITE7aWYoXCJzZWxlY3RlZFwiPT10KXM9blswXSxhPWQuZmluZEJ5VWlkKHMudWlkKS5maW5kKFwiLmstaW46Zmlyc3RcIikucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWhvdmVyXCIpLnRvZ2dsZUNsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiLHNbdF0pLmVuZCgpLHNbdF0/KGQuY3VycmVudChhKSxhLmF0dHIoJCwhMCkpOmEuYXR0cigkLCExKTtlbHNlIGZvcihlLmluQXJyYXkodCxkLm9wdGlvbnMuZGF0YVRleHRGaWVsZCk+PTA/cD0hMDooaC5pdGVtPW5bMF0saC5pdGVtLmJpbmQoXCJnZXRcIixpKSxkLnRlbXBsYXRlcy5pdGVtQ29udGVudChoKSxoLml0ZW0udW5iaW5kKFwic2V0XCIsaSkpLG89MDtuLmxlbmd0aD5vO28rKyloLml0ZW09cz1uW29dLChcInNwcml0ZUNzc0NsYXNzXCI9PXR8fFwiaW1hZ2VVcmxcIj09dHx8cCkmJmQuZmluZEJ5VWlkKHMudWlkKS5maW5kKFwiPmRpdj4uay1pblwiKS5odG1sKGQudGVtcGxhdGVzLml0ZW1Db250ZW50KGgpKSx0PT1QPyhhPWQuZmluZEJ5VWlkKHMudWlkKSxsPXNbdF0scihhLmNoaWxkcmVuKFwiZGl2XCIpLGwpLGQub3B0aW9ucy5jaGVja2JveGVzLmNoZWNrQ2hpbGRyZW4mJihyKGEuY2hpbGRyZW4oXCIuay1ncm91cFwiKSxsKSxkLl9zZXRDaGVja2VkKHMuY2hpbGRyZW4sbCksZC5fYnViYmxlSW5kZXRlcm1pbmF0ZShhKSkpOlwiZXhwYW5kZWRcIj09dD9kLl90b2dnbGUoZC5maW5kQnlVaWQocy51aWQpLHMsc1t0XSk6XCJlbmFibGVkXCI9PXQmJihhPWQuZmluZEJ5VWlkKHMudWlkKSxhLmZpbmQoXCIuay1jaGVja2JveCA6Y2hlY2tib3hcIikucHJvcChcImRpc2FibGVkXCIsIXNbdF0pLGM9IXUoYSkuaXMoaiksYS5yZW1vdmVBdHRyKFkpLHNbdF18fChzLnNlbGVjdGVkJiZzLnNldChcInNlbGVjdGVkXCIsITEpLHMuZXhwYW5kZWQmJnMuc2V0KFwiZXhwYW5kZWRcIiwhMSksYz0hMCxhLmF0dHIoJCwhMSkuYXR0cihZLCEwKSksZC5fdXBkYXRlTm9kZUNsYXNzZXMoYSx7fSx7ZW5hYmxlZDpzW3RdLGV4cGFuZGVkOiFjfSkpfSxfYXBwZW5kSXRlbXM6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPWQobikscj1pLmNoaWxkcmVuKCksbz0hdGhpcy5fZXhwYW5kZWQobik7dHlwZW9mIGU9PVYmJihlPXIubGVuZ3RoKSx0aGlzLl9pbnNlcnROb2RlKHQsZSxuLGZ1bmN0aW9uKHQsbil7ZT49ci5sZW5ndGg/dC5hcHBlbmRUbyhuKTp0Lmluc2VydEJlZm9yZShyLmVxKGUpKX0sbyksdGhpcy5fZXhwYW5kZWQobikmJih0aGlzLl91cGRhdGVOb2RlQ2xhc3NlcyhuKSxkKG4pLmNzcyhcImRpc3BsYXlcIixcImJsb2NrXCIpKX0scmVmcmVzaDpmdW5jdGlvbihuKXt2YXIgaSxyLG8sYSxsLGMsdT10aGlzLndyYXBwZXIsaD1uLm5vZGUscD1uLmFjdGlvbixmPW4uaXRlbXMsbT10aGlzLm9wdGlvbnMsdj1tLmxvYWRPbkRlbWFuZCxfPW0uY2hlY2tib3hlcyYmbS5jaGVja2JveGVzLmNoZWNrQ2hpbGRyZW47aWYobi5maWVsZCl7aWYoIWZbMF18fCFmWzBdLmxldmVsKXJldHVybjtyZXR1cm4gdGhpcy5fdXBkYXRlTm9kZShuLmZpZWxkLGYpfWlmKGgmJih1PXRoaXMuZmluZEJ5VWlkKGgudWlkKSx0aGlzLl9wcm9ncmVzcyh1LCExKSksXyYmXCJyZW1vdmVcIiE9cCl7Zm9yKHI9ITEsaT0wO2YubGVuZ3RoPmk7aSsrKWlmKFwiY2hlY2tlZFwiaW4gZltpXSl7cj0hMDticmVha31pZighciYmaCYmaC5jaGVja2VkKWZvcihpPTA7Zi5sZW5ndGg+aTtpKyspZltpXS5jaGVja2VkPSEwfWlmKFwiYWRkXCI9PXApdGhpcy5fYXBwZW5kSXRlbXMobi5pbmRleCxmLHUpO2Vsc2UgaWYoXCJyZW1vdmVcIj09cCl0aGlzLl9yZW1vdmUodGhpcy5maW5kQnlVaWQoZlswXS51aWQpLCExKTtlbHNlIGlmKGgpaWYoZCh1KS5lbXB0eSgpLGYubGVuZ3RoKWZvcih0aGlzLl9hcHBlbmRJdGVtcyhuLmluZGV4LGYsdSksbz1kKHUpLmNoaWxkcmVuKCksdiYmXyYmdGhpcy5fYnViYmxlSW5kZXRlcm1pbmF0ZShvLmxhc3QoKSksaT0wO28ubGVuZ3RoPmk7aSsrKWE9by5lcShpKSx0aGlzLnRyaWdnZXIoXCJpdGVtQ2hhbmdlXCIse2l0ZW06YSxkYXRhOnRoaXMuZGF0YUl0ZW0oYSksbnM6Z30pO2Vsc2Ugcyh1KSx0aGlzLnRyaWdnZXIoXCJpdGVtQ2hhbmdlXCIse2l0ZW06dSxkYXRhOmgsbnM6Z30pO2Vsc2UgbD10aGlzLl9yZW5kZXJHcm91cCh7aXRlbXM6Zixncm91cDp7Zmlyc3RMZXZlbDohMCxleHBhbmRlZDohMH19KSx0aGlzLnJvb3QubGVuZ3RoPyh0aGlzLl9hbmd1bGFySXRlbXMoXCJjbGVhbnVwXCIpLGM9ZShsKSx0aGlzLnJvb3QuYXR0cihcImNsYXNzXCIsYy5hdHRyKFwiY2xhc3NcIikpLmh0bWwoYy5odG1sKCkpKTp0aGlzLnJvb3Q9dGhpcy53cmFwcGVyLmh0bWwobCkuY2hpbGRyZW4oXCJ1bFwiKSx0aGlzLnJvb3QuYXR0cihcInJvbGVcIixcInRyZWVcIiksdGhpcy5fYW5ndWxhckl0ZW1zKFwiY29tcGlsZVwiKTtmb3IoaT0wO2YubGVuZ3RoPmk7aSsrKSghdnx8ZltpXS5leHBhbmRlZCkmJmZbaV0ubG9hZCgpO3RoaXMudHJpZ2dlcihPLHtub2RlOmg/dTp0fSl9LF9lcnJvcjpmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGUmJnRoaXMuZmluZEJ5VWlkKGUubm9kZS51aWQpLG49dGhpcy50ZW1wbGF0ZXMucmV0cnkoe21lc3NhZ2VzOnRoaXMub3B0aW9ucy5tZXNzYWdlc30pO3Q/KHRoaXMuX3Byb2dyZXNzKHQsITEpLHRoaXMuX2V4cGFuZGVkKHQsITEpLGgodCkuYWRkQ2xhc3MoXCJrLWktcmVmcmVzaFwiKSxlLm5vZGUubG9hZGVkKCExKSk6KHRoaXMuX3Byb2dyZXNzKCExKSx0aGlzLmVsZW1lbnQuaHRtbChuKSl9LF9yZXRyeVJlcXVlc3Q6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuZGF0YVNvdXJjZS5mZXRjaCgpfSxleHBhbmQ6ZnVuY3Rpb24oZSl7dGhpcy5fcHJvY2Vzc05vZGVzKGUsZnVuY3Rpb24oZSx0KXt0aGlzLnRvZ2dsZSh0LCEwKX0pfSxjb2xsYXBzZTpmdW5jdGlvbihlKXt0aGlzLl9wcm9jZXNzTm9kZXMoZSxmdW5jdGlvbihlLHQpe3RoaXMudG9nZ2xlKHQsITEpfSl9LGVuYWJsZTpmdW5jdGlvbihlLHQpe3Q9Mj09YXJndW1lbnRzLmxlbmd0aD8hIXQ6ITAsdGhpcy5fcHJvY2Vzc05vZGVzKGUsZnVuY3Rpb24oZSxuKXt0aGlzLmRhdGFJdGVtKG4pLnNldChcImVuYWJsZWRcIix0KX0pfSxjdXJyZW50OmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMscj1pLl9jdXJyZW50LG89aS5lbGVtZW50LGE9aS5fYXJpYUlkO3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjAmJm4mJm4ubGVuZ3RoPyhyJiYoclswXS5pZD09PWEmJnIucmVtb3ZlQXR0cihcImlkXCIpLHIuZmluZChcIi5rLWluOmZpcnN0XCIpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1mb2N1c2VkXCIpKSxyPWkuX2N1cnJlbnQ9ZShuLG8pLmNsb3Nlc3QoRyksci5maW5kKFwiLmstaW46Zmlyc3RcIikuYWRkQ2xhc3MoXCJrLXN0YXRlLWZvY3VzZWRcIiksYT1yWzBdLmlkfHxhLGEmJihpLndyYXBwZXIucmVtb3ZlQXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKSxyLmF0dHIoXCJpZFwiLGEpLGkud3JhcHBlci5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsYSkpLHQpOihyfHwocj1pLl9uZXh0VmlzaWJsZShlKCkpKSxyKX0sc2VsZWN0OmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMscj1pLmVsZW1lbnQ7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG49ZShuLHIpLmNsb3Nlc3QoRyksci5maW5kKFwiLmstc3RhdGUtc2VsZWN0ZWRcIikuZWFjaChmdW5jdGlvbigpe3ZhciBlPWkuZGF0YUl0ZW0odGhpcyk7ZS5zZXQoXCJzZWxlY3RlZFwiLCExKSxkZWxldGUgZS5zZWxlY3RlZH0pLG4ubGVuZ3RoJiZpLmRhdGFJdGVtKG4pLnNldChcInNlbGVjdGVkXCIsITApLGkudHJpZ2dlcihFKSx0KTpyLmZpbmQoXCIuay1zdGF0ZS1zZWxlY3RlZFwiKS5jbG9zZXN0KEcpfSxfdG9nZ2xlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG89dGhpcy5vcHRpb25zLGE9dShlKSxzPW4/XCJleHBhbmRcIjpcImNvbGxhcHNlXCI7aWYoIWEuZGF0YShcImFuaW1hdGluZ1wiKSYmIXRoaXMuX3RyaWdnZXIocyxlKSlpZih0aGlzLl9leHBhbmRlZChlLG4pLGk9dCYmdC5sb2FkZWQoKSxyPSFhLmNoaWxkcmVuKCkubGVuZ3RoLCFufHxpJiYhcil7aWYodGhpcy5fdXBkYXRlTm9kZUNsYXNzZXMoZSx7fSx7ZXhwYW5kZWQ6bn0pLGEuY3NzKFwiZGlzcGxheVwiKT09KG4/XCJibG9ja1wiOlwibm9uZVwiKSlyZXR1cm47bnx8YS5jc3MoXCJoZWlnaHRcIixhLmhlaWdodCgpKS5jc3MoXCJoZWlnaHRcIiksYS5rZW5kb1N0b3AoITAsITApLmtlbmRvQW5pbWF0ZSh2KHtyZXNldDohMH0sby5hbmltYXRpb25bc10se2NvbXBsZXRlOmZ1bmN0aW9uKCl7biYmYS5jc3MoXCJoZWlnaHRcIixcIlwiKX19KSl9ZWxzZSBvLmxvYWRPbkRlbWFuZCYmdGhpcy5fcHJvZ3Jlc3MoZSwhMCksYS5yZW1vdmUoKSx0LmxvYWQoKX0sdG9nZ2xlOmZ1bmN0aW9uKHQsbil7dD1lKHQpLGgodCkuaXMoXCIuay1taW51cywuay1wbHVzLC5rLW1pbnVzLWRpc2FibGVkLC5rLXBsdXMtZGlzYWJsZWRcIikmJigxPT1hcmd1bWVudHMubGVuZ3RoJiYobj0hdGhpcy5fZXhwYW5kZWQodCkpLHRoaXMuX2V4cGFuZGVkKHQsbikpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt3LmZuLmRlc3Ryb3kuY2FsbChlKSxlLndyYXBwZXIub2ZmKEMpLGUuX3VuYmluZERhdGFTb3VyY2UoKSxlLmRyYWdnaW5nJiZlLmRyYWdnaW5nLmRlc3Ryb3koKSxmLmRlc3Ryb3koZS5lbGVtZW50KSxlLnJvb3Q9ZS53cmFwcGVyPWUuZWxlbWVudD1udWxsfSxfZXhwYW5kZWQ6ZnVuY3Rpb24oZSxuKXt2YXIgaT1mLmF0dHIoXCJleHBhbmRlZFwiKSxyPXRoaXMuZGF0YUl0ZW0oZSk7cmV0dXJuIDE9PWFyZ3VtZW50cy5sZW5ndGg/XCJ0cnVlXCI9PT1lLmF0dHIoaSl8fHImJnIuZXhwYW5kZWQ6KHUoZSkuZGF0YShcImFuaW1hdGluZ1wiKXx8KHImJihyLnNldChcImV4cGFuZGVkXCIsbiksbj1yLmV4cGFuZGVkKSxuPyhlLmF0dHIoaSxcInRydWVcIiksZS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLFwidHJ1ZVwiKSk6KGUucmVtb3ZlQXR0cihpKSxlLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsXCJmYWxzZVwiKSkpLHQpfSxfcHJvZ3Jlc3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmVsZW1lbnQsaT10aGlzLnRlbXBsYXRlcy5sb2FkaW5nKHttZXNzYWdlczp0aGlzLm9wdGlvbnMubWVzc2FnZXN9KTsxPT1hcmd1bWVudHMubGVuZ3RoPyh0PWUsdD9uLmh0bWwoaSk6bi5lbXB0eSgpKTpoKGUpLnRvZ2dsZUNsYXNzKFwiay1sb2FkaW5nXCIsdCkucmVtb3ZlQ2xhc3MoXCJrLWktcmVmcmVzaFwiKX0sdGV4dDpmdW5jdGlvbihlLG4pe3ZhciBpPXRoaXMuZGF0YUl0ZW0oZSkscj10aGlzLm9wdGlvbnNbSy50ZXh0XSxvPWkubGV2ZWwoKSxhPXIubGVuZ3RoLHM9cltNYXRoLm1pbihvLGEtMSldO3JldHVybiBuPyhpLnNldChzLG4pLHQpOmlbc119LF9vYmplY3RPclNlbGY6ZnVuY3Rpb24odCl7cmV0dXJuIGUodCkuY2xvc2VzdChcIltkYXRhLXJvbGU9dHJlZXZpZXddXCIpLmRhdGEoXCJrZW5kb1RyZWVWaWV3XCIpfHx0aGlzfSxfZGF0YVNvdXJjZU1vdmU6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbz10aGlzLl9vYmplY3RPclNlbGYobnx8dCksYT1vLmRhdGFTb3VyY2U7cmV0dXJuIG4mJm5bMF0hPW8uZWxlbWVudFswXSYmKHI9by5kYXRhSXRlbShuKSxyLmxvYWRlZCgpfHwoby5fcHJvZ3Jlc3MobiwhMCksci5sb2FkKCkpLG4hPXRoaXMucm9vdCYmKGE9ci5jaGlsZHJlbixhJiZhIGluc3RhbmNlb2YgYnx8KHIuX2luaXRDaGlsZHJlbigpLHIubG9hZGVkKCEwKSxhPXIuY2hpbGRyZW4pKSksZT10aGlzLl90b09ic2VydmFibGVEYXRhKGUpLGkuY2FsbCh0aGlzLGEsZSl9LF90b09ic2VydmFibGVEYXRhOmZ1bmN0aW9uKHQpe3ZhciBuLGkscj10O3JldHVybih0IGluc3RhbmNlb2Ygd2luZG93LmpRdWVyeXx8USh0KSkmJihuPXRoaXMuX29iamVjdE9yU2VsZih0KS5kYXRhU291cmNlLGk9ZSh0KS5hdHRyKGYuYXR0cihcInVpZFwiKSkscj1uLmdldEJ5VWlkKGkpLHImJihyPW4ucmVtb3ZlKHIpKSkscn0sX2luc2VydDpmdW5jdGlvbihlLHQsbil7dCBpbnN0YW5jZW9mIGYuZGF0YS5PYnNlcnZhYmxlQXJyYXk/dD10LnRvSlNPTigpOnkodCl8fCh0PVt0XSk7dmFyIGk9ZS5wYXJlbnQoKTtyZXR1cm4gaSYmaS5faW5pdENoaWxkcmVuJiYoaS5oYXNDaGlsZHJlbj0hMCxpLl9pbml0Q2hpbGRyZW4oKSksZS5zcGxpY2UuYXBwbHkoZSxbbiwwXS5jb25jYXQodCkpLHRoaXMuZmluZEJ5VWlkKGVbbl0udWlkKX0saW5zZXJ0QWZ0ZXI6bygxKSxpbnNlcnRCZWZvcmU6bygwKSxhcHBlbmQ6ZnVuY3Rpb24odCxuLGkpe3ZhciByPXRoaXMsbz1yLnJvb3Q7cmV0dXJuIGk9aXx8ZS5ub29wLG4mJihvPWQobikpLHIuX2RhdGFTb3VyY2VNb3ZlKHQsbyxuLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbygpe24mJnIuX2V4cGFuZGVkKG4sITApO3ZhciBpPWUuZGF0YSgpLG89TWF0aC5tYXgoaS5sZW5ndGgsMCk7cmV0dXJuIHIuX2luc2VydChpLHQsbyl9dmFyIGE7cmV0dXJuIGUuZGF0YSgpPyhhPW8oKSxpKGEpLGEpOihlLm9uZShFLGZ1bmN0aW9uKCl7aShvKCkpfSksbnVsbCl9KX0sX3JlbW92ZTpmdW5jdGlvbih0LG4pe3ZhciBpLHIsbyxhPXRoaXM7cmV0dXJuIHQ9ZSh0LGEuZWxlbWVudCksdGhpcy5hbmd1bGFyKFwiY2xlYW51cFwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOnQuZ2V0KCl9fSksaT10LnBhcmVudCgpLnBhcmVudCgpLHI9dC5wcmV2KCksbz10Lm5leHQoKSx0W24/XCJkZXRhY2hcIjpcInJlbW92ZVwiXSgpLGkuaGFzQ2xhc3MoXCJrLWl0ZW1cIikmJihzKGkpLGEuX3VwZGF0ZU5vZGVDbGFzc2VzKGkpKSxhLl91cGRhdGVOb2RlQ2xhc3NlcyhyKSxhLl91cGRhdGVOb2RlQ2xhc3NlcyhvKSx0fSxyZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kYXRhSXRlbShlKTt0JiZ0aGlzLmRhdGFTb3VyY2UucmVtb3ZlKHQpfSxkZXRhY2g6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3JlbW92ZShlLCEwKX0sZmluZEJ5VGV4dDpmdW5jdGlvbih0KXtyZXR1cm4gZSh0aGlzLmVsZW1lbnQpLmZpbmQoXCIuay1pblwiKS5maWx0ZXIoZnVuY3Rpb24obixpKXtyZXR1cm4gZShpKS50ZXh0KCk9PXR9KS5jbG9zZXN0KEcpfSxmaW5kQnlVaWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWxlbWVudC5maW5kKFwiLmstaXRlbVtcIitmLmF0dHIoXCJ1aWRcIikrXCI9XCIrZStcIl1cIil9LGV4cGFuZFBhdGg6ZnVuY3Rpb24obixpKXt2YXIgcixvLGE7Zm9yKG49bi5zbGljZSgwKSxyPXRoaXMsbz10aGlzLmRhdGFTb3VyY2UsYT1vLmdldChuWzBdKSxpPWl8fGUubm9vcDtuLmxlbmd0aD4wJiYoYS5leHBhbmRlZHx8YS5sb2FkZWQoKSk7KWEuc2V0KFwiZXhwYW5kZWRcIiwhMCksbi5zaGlmdCgpLGE9by5nZXQoblswXSk7cmV0dXJuIG4ubGVuZ3RoPyhvLmJpbmQoXCJjaGFuZ2VcIixmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGUmJmUubm9kZS5pZDt0JiZ0PT09blswXSYmKG4uc2hpZnQoKSxuLmxlbmd0aD9vLmdldChuWzBdKS5zZXQoXCJleHBhbmRlZFwiLCEwKTppLmNhbGwocikpfSksYS5zZXQoXCJleHBhbmRlZFwiLCEwKSx0KTppLmNhbGwocil9LF9wYXJlbnRzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lJiZlLnBhcmVudE5vZGUoKSxuPVtdO3Q7KW4ucHVzaCh0KSx0PXQucGFyZW50Tm9kZSgpO3JldHVybiBufSxleHBhbmRUbzpmdW5jdGlvbihlKXt2YXIgdCxuO2ZvcihlIGluc3RhbmNlb2YgZi5kYXRhLk5vZGV8fChlPXRoaXMuZGF0YVNvdXJjZS5nZXQoZSkpLHQ9dGhpcy5fcGFyZW50cyhlKSxuPTA7dC5sZW5ndGg+bjtuKyspdFtuXS5zZXQoXCJleHBhbmRlZFwiLCEwKX0sX3JlbmRlckl0ZW06ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ3JvdXB8fChlLmdyb3VwPXt9KSxlLnRyZWV2aWV3PXRoaXMub3B0aW9ucyxlLnI9dGhpcy50ZW1wbGF0ZXMsdGhpcy50ZW1wbGF0ZXMuaXRlbShlKX0sX3JlbmRlckdyb3VwOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIGUucmVuZGVySXRlbXM9ZnVuY3Rpb24oZSl7dmFyIG49XCJcIixpPTAscj1lLml0ZW1zLG89cj9yLmxlbmd0aDowLGE9ZS5ncm91cDtmb3IoYS5sZW5ndGg9bztvPmk7aSsrKWUuZ3JvdXA9YSxlLml0ZW09cltpXSxlLml0ZW0uaW5kZXg9aSxuKz10Ll9yZW5kZXJJdGVtKGUpO3JldHVybiBufSxlLnI9dC50ZW1wbGF0ZXMsdC50ZW1wbGF0ZXMuZ3JvdXAoZSl9fSksbC5wcm90b3R5cGU9e19yZW1vdmVUb3VjaEhvdmVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztmLnN1cHBvcnQudG91Y2gmJmUuaG92ZXJlZCYmKGUuaG92ZXJlZC5maW5kKFwiLlwiK1UpLnJlbW92ZUNsYXNzKFUpLGUuaG92ZXJlZD0hMSl9LF9oaW50U3RhdHVzOmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMuX2RyYWdnYWJsZS5oaW50LmZpbmQoXCIuay1kcmFnLXN0YXR1c1wiKVswXTtyZXR1cm4gbj8oaS5jbGFzc05hbWU9XCJrLWljb24gay1kcmFnLXN0YXR1cyBcIituLHQpOmUudHJpbShpLmNsYXNzTmFtZS5yZXBsYWNlKC9rLShpY29ufGRyYWctc3RhdHVzKS9nLFwiXCIpKX0sZHJhZ3N0YXJ0OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1uLnRyZWV2aWV3LHI9bi5zb3VyY2VOb2RlPXQuY3VycmVudFRhcmdldC5jbG9zZXN0KEcpO2kudHJpZ2dlcihGLHtzb3VyY2VOb2RlOnJbMF19KSYmdC5wcmV2ZW50RGVmYXVsdCgpLG4uZHJvcEhpbnQ9ZShcIjxkaXYgY2xhc3M9J2stZHJvcC1oaW50JyAvPlwiKS5jc3MoTixcImhpZGRlblwiKS5hcHBlbmRUbyhpLmVsZW1lbnQpfSxkcmFnOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvLGEscyxsLGMsZCx1LGg9dGhpcyxwPWgudHJlZXZpZXcsZz1oLnNvdXJjZU5vZGUsbT1oLmRyb3BUYXJnZXQ9ZShmLmV2ZW50VGFyZ2V0KHQpKSx2PW0uY2xvc2VzdChcIi5rLXRyZWV2aWV3XCIpO3YubGVuZ3RoP2UuY29udGFpbnMoZ1swXSxtWzBdKT9uPVwiay1kZW5pZWRcIjoobj1cImstaW5zZXJ0LW1pZGRsZVwiLGk9bS5jbG9zZXN0KFwiLmstdG9wLC5rLW1pZCwuay1ib3RcIiksaS5sZW5ndGg/KG89aS5vdXRlckhlaWdodCgpLGE9Zi5nZXRPZmZzZXQoaSkudG9wLHM9bS5jbG9zZXN0KFwiLmstaW5cIiksbD1vLyhzLmxlbmd0aD4wPzQ6MiksYz1hK2w+dC55LmxvY2F0aW9uLGQ9dC55LmxvY2F0aW9uPmErby1sLGguX3JlbW92ZVRvdWNoSG92ZXIoKSx1PXMubGVuZ3RoJiYhYyYmIWQsaC5ob3ZlcmVkPXU/djohMSxoLmRyb3BIaW50LmNzcyhOLHU/XCJoaWRkZW5cIjpcInZpc2libGVcIikscy50b2dnbGVDbGFzcyhVLHUpLHU/bj1cImstYWRkXCI6KHI9aS5wb3NpdGlvbigpLHIudG9wKz1jPzA6byxoLmRyb3BIaW50LmNzcyhyKVtjP1wicHJlcGVuZFRvXCI6XCJhcHBlbmRUb1wiXShtLmNsb3Nlc3QoRykuY2hpbGRyZW4oXCJkaXY6Zmlyc3RcIikpLGMmJmkuaGFzQ2xhc3MoXCJrLXRvcFwiKSYmKG49XCJrLWluc2VydC10b3BcIiksZCYmaS5oYXNDbGFzcyhcImstYm90XCIpJiYobj1cImstaW5zZXJ0LWJvdHRvbVwiKSkpOm1bMF0hPWguZHJvcEhpbnRbMF0mJihuPXZbMF0hPXAuZWxlbWVudFswXT9cImstYWRkXCI6XCJrLWRlbmllZFwiKSk6KG49XCJrLWRlbmllZFwiLGguX3JlbW92ZVRvdWNoSG92ZXIoKSkscC50cmlnZ2VyKFIse3NvdXJjZU5vZGU6Z1swXSxkcm9wVGFyZ2V0Om1bMF0scGFnZVk6dC55LmxvY2F0aW9uLHBhZ2VYOnQueC5sb2NhdGlvbixzdGF0dXNDbGFzczpuLnN1YnN0cmluZygyKSxzZXRTdGF0dXNDbGFzczpmdW5jdGlvbihlKXtuPWV9fSksMCE9PW4uaW5kZXhPZihcImstaW5zZXJ0XCIpJiZoLmRyb3BIaW50LmNzcyhOLFwiaGlkZGVuXCIpLGguX2hpbnRTdGF0dXMobil9LGRyYWdjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmRyb3BIaW50LnJlbW92ZSgpfSxkcmFnZW5kOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXthLnVwZGF0ZUluZGV0ZXJtaW5hdGUoKSxhLnRyaWdnZXIoTCx7c291cmNlTm9kZTplJiZlWzBdLGRlc3RpbmF0aW9uTm9kZTpuWzBdLGRyb3BQb3NpdGlvbjpzfSl9dmFyIG4saSxyLG89dGhpcyxhPW8udHJlZXZpZXcscz1cIm92ZXJcIixsPW8uc291cmNlTm9kZSxjPW8uZHJvcEhpbnQsZD1vLmRyb3BUYXJnZXQ7cmV0dXJuXCJ2aXNpYmxlXCI9PWMuY3NzKE4pPyhzPWMucHJldkFsbChcIi5rLWluXCIpLmxlbmd0aD4wP1wiYWZ0ZXJcIjpcImJlZm9yZVwiLG49Yy5jbG9zZXN0KEcpKTpkJiYobj1kLmNsb3Nlc3QoXCIuay10cmVldmlldyAuay1pdGVtXCIpLG4ubGVuZ3RofHwobj1kLmNsb3Nlc3QoXCIuay10cmVldmlld1wiKSkpLGk9e3NvdXJjZU5vZGU6bFswXSxkZXN0aW5hdGlvbk5vZGU6blswXSx2YWxpZDpcImstZGVuaWVkXCIhPW8uX2hpbnRTdGF0dXMoKSxzZXRWYWxpZDpmdW5jdGlvbihlKXt0aGlzLnZhbGlkPWV9LGRyb3BUYXJnZXQ6ZFswXSxkcm9wUG9zaXRpb246c30scj1hLnRyaWdnZXIoQixpKSxjLnJlbW92ZSgpLG8uX3JlbW92ZVRvdWNoSG92ZXIoKSwhaS52YWxpZHx8cj8oby5fZHJhZ2dhYmxlLmRyb3BwZWQ9aS52YWxpZCx0KTooby5fZHJhZ2dhYmxlLmRyb3BwZWQ9ITAsXCJvdmVyXCI9PXM/YS5hcHBlbmQobCxuLGUpOihcImJlZm9yZVwiPT1zP2w9YS5pbnNlcnRCZWZvcmUobCxuKTpcImFmdGVyXCI9PXMmJihsPWEuaW5zZXJ0QWZ0ZXIobCxuKSksZShsKSksdCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl9kcmFnZ2FibGUuZGVzdHJveSgpfX0sZy5wbHVnaW4oYyl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQpe3ZhciBuLGkscj1bXTtmb3Iobj0wLGk9ZS5sZW5ndGg7aT5uO24rKyllW25dLmZpZWxkIT09dCYmci5wdXNoKGVbbl0pO3JldHVybiByfWZ1bmN0aW9uIGkoZSx0LG4pe3ZhciBpLHIsbyxhO2lmKCFlKXJldHVybltdO2ZvcihlPWUuZmlsdGVycyxpPTAscj1bXSxvPWUubGVuZ3RoO28+aTtpKyspYT1lW2ldLm9wZXJhdG9yLChufHxcImluXCI9PT1hKSYmYSE9PW58fGVbaV0uZmllbGQhPT10fHxyLnB1c2goZVtpXSk7cmV0dXJuIHJ9ZnVuY3Rpb24gcih0LG4scil7dmFyIG8sYT0wLHM9ci5sZW5ndGg7aWYodD1pKHQsbixcImluXCIpWzBdKWZvcihvPXQudmFsdWUuc3BsaXQoXCIsXCIpO3M+YTthKyspclthXS5jaGVja2VkPWUuaW5BcnJheShyW2FdLnVuaXF1ZU5hbWUsbyk+PTA7ZWxzZSBmb3IoO3M+YTthKyspclthXS5jaGVja2VkPSEwfWZ1bmN0aW9uIG8oZSx0KXt2YXIgbixpPWUubGVuZ3RoO2ZvcihuPTA7aT5uO24rKyllW25dLmNoZWNrZWQmJjAhPT1lW25dLmxldmVsKCkmJnQucHVzaChlW25dLnVuaXF1ZU5hbWUpLGVbbl0uaGFzQ2hpbGRyZW4mJm8oZVtuXS5jaGlsZHJlbi52aWV3KCksdCl9dmFyIGE9d2luZG93LmtlbmRvLHM9YS51aSxsPVwia2VuZG9Db250ZXh0TWVudVwiLGM9ZS5wcm94eSxkPVwiLmtlbmRvUGl2b3RGaWVsZE1lbnVcIix1PXMuV2lkZ2V0LGg9dS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt1LmZuLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy5fZGF0YVNvdXJjZSgpLHRoaXMuX2xheW91dCgpLGEubm90aWZ5KHRoaXMpfSxldmVudHM6W10sb3B0aW9uczp7bmFtZTpcIlBpdm90RmllbGRNZW51XCIsZmlsdGVyOm51bGwsZmlsdGVyYWJsZTohMCxzb3J0YWJsZTohMCxtZXNzYWdlczp7aW5mbzpcIlNob3cgaXRlbXMgd2l0aCB2YWx1ZSB0aGF0OlwiLHNvcnRBc2NlbmRpbmc6XCJTb3J0IEFzY2VuZGluZ1wiLHNvcnREZXNjZW5kaW5nOlwiU29ydCBEZXNjZW5kaW5nXCIsZmlsdGVyRmllbGRzOlwiRmllbGRzIEZpbHRlclwiLGZpbHRlcjpcIkZpbHRlclwiLGluY2x1ZGU6XCJJbmNsdWRlIEZpZWxkcy4uLlwiLHRpdGxlOlwiRmllbGRzIHRvIGluY2x1ZGVcIixjbGVhcjpcIkNsZWFyXCIsb2s6XCJPS1wiLGNhbmNlbDpcIkNhbmNlbFwiLG9wZXJhdG9yczp7Y29udGFpbnM6XCJDb250YWluc1wiLGRvZXNub3Rjb250YWluOlwiRG9lcyBub3QgY29udGFpblwiLHN0YXJ0c3dpdGg6XCJTdGFydHMgd2l0aFwiLGVuZHN3aXRoOlwiRW5kcyB3aXRoXCIsZXE6XCJJcyBlcXVhbCB0b1wiLG5lcTpcIklzIG5vdCBlcXVhbCB0b1wifX19LF9sYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnM7dGhpcy53cmFwcGVyPWUoYS50ZW1wbGF0ZShmKSh7bnM6YS5ucyxmaWx0ZXJhYmxlOnQuZmlsdGVyYWJsZSxzb3J0YWJsZTp0LnNvcnRhYmxlLG1lc3NhZ2VzOnQubWVzc2FnZXN9KSksdGhpcy5tZW51PXRoaXMud3JhcHBlcltsXSh7ZmlsdGVyOnQuZmlsdGVyLHRhcmdldDp0aGlzLmVsZW1lbnQsb3JpZW50YXRpb246XCJ2ZXJ0aWNhbFwiLHNob3dPbjpcImNsaWNrXCIsY2xvc2VPbkNsaWNrOiExLG9wZW46Yyh0aGlzLl9tZW51T3Blbix0aGlzKSxzZWxlY3Q6Yyh0aGlzLl9zZWxlY3QsdGhpcyksY29weUFuY2hvclN0eWxlczohMX0pLmRhdGEobCksdGhpcy5fY3JlYXRlV2luZG93KCksdC5maWx0ZXJhYmxlJiZ0aGlzLl9pbml0RmlsdGVyRm9ybSgpfSxfaW5pdEZpbHRlckZvcm06ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1lbnUuZWxlbWVudC5maW5kKFwiLmstZmlsdGVyLWl0ZW1cIiksdD1jKHRoaXMuX2ZpbHRlcix0aGlzKTt0aGlzLl9maWx0ZXJPcGVyYXRvcj1uZXcgYS51aS5Ecm9wRG93bkxpc3QoZS5maW5kKFwic2VsZWN0XCIpKSx0aGlzLl9maWx0ZXJWYWx1ZT1lLmZpbmQoXCIuay10ZXh0Ym94XCIpLGUub24oXCJzdWJtaXRcIitkLHQpLm9uKFwiY2xpY2tcIitkLFwiLmstYnV0dG9uLWZpbHRlclwiLHQpLm9uKFwiY2xpY2tcIitkLFwiLmstYnV0dG9uLWNsZWFyXCIsYyh0aGlzLl9yZXNldCx0aGlzKSl9LF9zZXRGaWx0ZXJGb3JtOmZ1bmN0aW9uKGUpe3ZhciB0PVwiXCIsbj1cIlwiO2UmJih0PWUub3BlcmF0b3Isbj1lLnZhbHVlKSx0aGlzLl9maWx0ZXJPcGVyYXRvci52YWx1ZSh0KSx0aGlzLl9maWx0ZXJWYWx1ZS52YWwobil9LF9jbGVhckZpbHRlcnM6ZnVuY3Rpb24oZSl7dmFyIHQsbixyPXRoaXMuZGF0YVNvdXJjZS5maWx0ZXIoKXx8e30sbz0wO2ZvcihyLmZpbHRlcnM9ci5maWx0ZXJzfHxbXSx0PWkocixlKSxuPXQubGVuZ3RoO24+bztvKyspci5maWx0ZXJzLnNwbGljZShyLmZpbHRlcnMuaW5kZXhPZih0W29dKSwxKTtyZXR1cm4gcn0sX2ZpbHRlcjpmdW5jdGlvbihlKXt2YXIgbixpLHI9dGhpcyxvPXIuX2ZpbHRlclZhbHVlLnZhbCgpO3JldHVybiBlLnByZXZlbnREZWZhdWx0KCksbz8obj17ZmllbGQ6ci5jdXJyZW50TWVtYmVyLG9wZXJhdG9yOnIuX2ZpbHRlck9wZXJhdG9yLnZhbHVlKCksdmFsdWU6b30saT1yLl9jbGVhckZpbHRlcnMoci5jdXJyZW50TWVtYmVyKSxpLmZpbHRlcnMucHVzaChuKSxyLmRhdGFTb3VyY2UuZmlsdGVyKGkpLHIubWVudS5jbG9zZSgpLHQpOihyLm1lbnUuY2xvc2UoKSx0KX0sX3Jlc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Ll9jbGVhckZpbHRlcnModC5jdXJyZW50TWVtYmVyKTtlLnByZXZlbnREZWZhdWx0KCksbi5maWx0ZXJzWzBdfHwobj17fSksdC5kYXRhU291cmNlLmZpbHRlcihuKSx0Ll9zZXRGaWx0ZXJGb3JtKG51bGwpLHQubWVudS5jbG9zZSgpfSxfc29ydDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmN1cnJlbnRNZW1iZXIsaT10aGlzLmRhdGFTb3VyY2Uuc29ydCgpfHxbXTtpPW4oaSx0KSxpLnB1c2goe2ZpZWxkOnQsZGlyOmV9KSx0aGlzLmRhdGFTb3VyY2Uuc29ydChpKSx0aGlzLm1lbnUuY2xvc2UoKX0sc2V0RGF0YVNvdXJjZTpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZT1lLHRoaXMuX2RhdGFTb3VyY2UoKX0sX2RhdGFTb3VyY2U6ZnVuY3Rpb24oKXt0aGlzLmRhdGFTb3VyY2U9YS5kYXRhLlBpdm90RGF0YVNvdXJjZS5jcmVhdGUodGhpcy5vcHRpb25zLmRhdGFTb3VyY2UpfSxfY3JlYXRlV2luZG93OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLm1lc3NhZ2VzO3RoaXMuaW5jbHVkZVdpbmRvdz1lKGEudGVtcGxhdGUoZykoe21lc3NhZ2VzOnR9KSkub24oXCJjbGlja1wiK2QsXCIuay1idXR0b24tb2tcIixjKHRoaXMuX2FwcGx5SW5jbHVkZXMsdGhpcykpLm9uKFwiY2xpY2tcIitkLFwiLmstYnV0dG9uLWNhbmNlbFwiLGModGhpcy5fY2xvc2VXaW5kb3csdGhpcykpLHRoaXMuaW5jbHVkZVdpbmRvdz1uZXcgcy5XaW5kb3codGhpcy5pbmNsdWRlV2luZG93LHt0aXRsZTp0LnRpdGxlLHZpc2libGU6ITEscmVzaXphYmxlOiExLG9wZW46Yyh0aGlzLl93aW5kb3dPcGVuLHRoaXMpfSl9LF9hcHBseUluY2x1ZGVzOmZ1bmN0aW9uKGUpe3ZhciB0LG49W10scj10aGlzLnRyZWVWaWV3LmRhdGFTb3VyY2UudmlldygpLGE9clswXS5jaGVja2VkLHM9dGhpcy5kYXRhU291cmNlLmZpbHRlcigpLGw9aShzLHRoaXMuY3VycmVudE1lbWJlcixcImluXCIpWzBdO28ocixuKSxsJiYoYT8ocy5maWx0ZXJzLnNwbGljZShzLmZpbHRlcnMuaW5kZXhPZihsKSwxKSxzLmZpbHRlcnMubGVuZ3RofHwocz17fSkpOmwudmFsdWU9bi5qb2luKFwiLFwiKSx0PXMpLG4ubGVuZ3RoJiYodHx8YXx8KHQ9e2ZpZWxkOnRoaXMuY3VycmVudE1lbWJlcixvcGVyYXRvcjpcImluXCIsdmFsdWU6bi5qb2luKFwiLFwiKX0scyYmKHMuZmlsdGVycy5wdXNoKHQpLHQ9cykpKSx0JiZ0aGlzLmRhdGFTb3VyY2UuZmlsdGVyKHQpLHRoaXMuX2Nsb3NlV2luZG93KGUpfSxfY2xvc2VXaW5kb3c6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuaW5jbHVkZVdpbmRvdy5jbG9zZSgpfSxfdHJlZVZpZXdEYXRhU291cmNlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gYS5kYXRhLkhpZXJhcmNoaWNhbERhdGFTb3VyY2UuY3JlYXRlKHtzY2hlbWE6e21vZGVsOntpZDpcInVuaXF1ZU5hbWVcIixoYXNDaGlsZHJlbjpmdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VJbnQoZS5jaGlsZHJlbkNhcmRpbmFsaXR5LDEwKT4wfX19LHRyYW5zcG9ydDp7cmVhZDpmdW5jdGlvbih0KXt2YXIgbj17fSxpPWUudHJlZVZpZXcuZGF0YVNvdXJjZS5nZXQodC5kYXRhLnVuaXF1ZU5hbWUpLG89dC5kYXRhLnVuaXF1ZU5hbWU7bz8obi5tZW1iZXJVbmlxdWVOYW1lPWkudW5pcXVlTmFtZS5yZXBsYWNlKC9cXCYvZyxcIiZhbXA7XCIpLG4udHJlZU9wPTEpOm4ubGV2ZWxVbmlxdWVOYW1lPWUuY3VycmVudE1lbWJlcitcIi5bKEFMTCldXCIsZS5kYXRhU291cmNlLnNjaGVtYU1lbWJlcnMobikuZG9uZShmdW5jdGlvbihuKXtyKGUuZGF0YVNvdXJjZS5maWx0ZXIoKSxlLmN1cnJlbnRNZW1iZXIsbiksdC5zdWNjZXNzKG4pfSkuZmFpbCh0LmVycm9yKX19fSl9LF9jcmVhdGVUcmVlVmlldzpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QudHJlZVZpZXc9bmV3IHMuVHJlZVZpZXcoZSx7YXV0b0JpbmQ6ITEsZGF0YVNvdXJjZTp0Ll90cmVlVmlld0RhdGFTb3VyY2UoKSxkYXRhVGV4dEZpZWxkOlwibmFtZVwiLGNoZWNrYm94ZXM6e2NoZWNrQ2hpbGRyZW46ITB9LGRhdGFCb3VuZDpmdW5jdGlvbigpe3MucHJvZ3Jlc3ModC5pbmNsdWRlV2luZG93LmVsZW1lbnQsITEpfX0pfSxfbWVudU9wZW46ZnVuY3Rpb24odCl7dmFyIG47dC5ldmVudCYmKG49YS5hdHRyKFwibmFtZVwiKSx0aGlzLmN1cnJlbnRNZW1iZXI9ZSh0LmV2ZW50LnRhcmdldCkuY2xvc2VzdChcIltcIituK1wiXVwiKS5hdHRyKG4pLHRoaXMub3B0aW9ucy5maWx0ZXJhYmxlJiZ0aGlzLl9zZXRGaWx0ZXJGb3JtKGkodGhpcy5kYXRhU291cmNlLmZpbHRlcigpLHRoaXMuY3VycmVudE1lbWJlcilbMF0pKX0sX3NlbGVjdDpmdW5jdGlvbih0KXt2YXIgbj1lKHQuaXRlbSk7ZShcIi5rLXBpdm90LWZpbHRlci13aW5kb3dcIikubm90KHRoaXMuaW5jbHVkZVdpbmRvdy5lbGVtZW50KS5rZW5kb1dpbmRvdyhcImNsb3NlXCIpLG4uaGFzQ2xhc3MoXCJrLWluY2x1ZGUtaXRlbVwiKT90aGlzLmluY2x1ZGVXaW5kb3cuY2VudGVyKCkub3BlbigpOm4uaGFzQ2xhc3MoXCJrLXNvcnQtYXNjXCIpP3RoaXMuX3NvcnQoXCJhc2NcIik6bi5oYXNDbGFzcyhcImstc29ydC1kZXNjXCIpJiZ0aGlzLl9zb3J0KFwiZGVzY1wiKX0sX3dpbmRvd09wZW46ZnVuY3Rpb24oKXt0aGlzLnRyZWVWaWV3fHx0aGlzLl9jcmVhdGVUcmVlVmlldyh0aGlzLmluY2x1ZGVXaW5kb3cuZWxlbWVudC5maW5kKFwiLmstdHJlZXZpZXdcIikpLHMucHJvZ3Jlc3ModGhpcy5pbmNsdWRlV2luZG93LmVsZW1lbnQsITApLHRoaXMudHJlZVZpZXcuZGF0YVNvdXJjZS5yZWFkKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt1LmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLm1lbnUmJih0aGlzLm1lbnUuZGVzdHJveSgpLHRoaXMubWVudT1udWxsKSx0aGlzLnJlZWVWaWV3JiYodGhpcy50cmVlVmlldy5kZXN0cm95KCksdGhpcy50cmVlVmlldz1udWxsKSx0aGlzLmluY2x1ZGVXaW5kb3cmJih0aGlzLmluY2x1ZGVXaW5kb3cuZGVzdHJveSgpLHRoaXMuaW5jbHVkZVdpbmRvdz1udWxsKSx0aGlzLndyYXBwZXI9bnVsbCx0aGlzLmVsZW1lbnQ9bnVsbH19KSxwPSc8ZGl2IGNsYXNzPVwiay1maWx0ZXJhYmxlIGstY29udGVudFwiIHRhYmluZGV4PVwiLTFcIiBkYXRhLXJvbGU9XCJmaWVsZG1lbnVcIj48Zm9ybSBjbGFzcz1cImstZmlsdGVyLW1lbnVcIj48ZGl2PjxkaXYgY2xhc3M9XCJrLWZpbHRlci1oZWxwLXRleHRcIj4jPW1lc3NhZ2VzLmluZm8jPC9kaXY+PHNlbGVjdD4jZm9yKHZhciBvcCBpbiBtZXNzYWdlcy5vcGVyYXRvcnMpeyM8b3B0aW9uIHZhbHVlPVwiIz1vcCNcIj4jPW1lc3NhZ2VzLm9wZXJhdG9yc1tvcF0jPC9vcHRpb24+I30jPC9zZWxlY3Q+PGlucHV0IGNsYXNzPVwiay10ZXh0Ym94XCIgdHlwZT1cInRleHRcIiAvPjxkaXY+PGEgY2xhc3M9XCJrLWJ1dHRvbiBrLXByaW1hcnkgay1idXR0b24tZmlsdGVyXCIgaHJlZj1cIlxcXFwjXCI+Iz1tZXNzYWdlcy5maWx0ZXIjPC9hPjxhIGNsYXNzPVwiay1idXR0b24gay1idXR0b24tY2xlYXJcIiBocmVmPVwiXFxcXCNcIj4jPW1lc3NhZ2VzLmNsZWFyIzwvYT48L2Rpdj48L2Rpdj48L2Zvcm0+PC9kaXY+JyxmPSc8dWwgY2xhc3M9XCJrLXBpdm90LWZpZWxkbWVudVwiPiMgaWYgKHNvcnRhYmxlKSB7IzxsaSBjbGFzcz1cImstaXRlbSBrLXNvcnQtYXNjXCI+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWktc29ydC1hc2NcIj48L3NwYW4+JHttZXNzYWdlcy5zb3J0QXNjZW5kaW5nfTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImstaXRlbSBrLXNvcnQtZGVzY1wiPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1pLXNvcnQtZGVzY1wiPjwvc3Bhbj4ke21lc3NhZ2VzLnNvcnREZXNjZW5kaW5nfTwvc3Bhbj48L2xpPiMgaWYgKGZpbHRlcmFibGUpIHsjPGxpIGNsYXNzPVwiay1zZXBhcmF0b3JcIj48L2xpPiMgfSAjIyB9ICMjIGlmIChmaWx0ZXJhYmxlKSB7IzxsaSBjbGFzcz1cImstaXRlbSBrLWluY2x1ZGUtaXRlbVwiPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1maWx0ZXJcIj48L3NwYW4+JHttZXNzYWdlcy5pbmNsdWRlfTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImstc2VwYXJhdG9yXCI+PC9saT48bGkgY2xhc3M9XCJrLWl0ZW0gay1maWx0ZXItaXRlbVwiPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1maWx0ZXJcIj48L3NwYW4+JHttZXNzYWdlcy5maWx0ZXJGaWVsZHN9PC9zcGFuPjx1bD48bGk+JytwK1wiPC9saT48L3VsPjwvbGk+IyB9ICM8L3VsPlwiLGc9JzxkaXYgY2xhc3M9XCJrLXBvcHVwLWVkaXQtZm9ybSBrLXBpdm90LWZpbHRlci13aW5kb3dcIj48ZGl2IGNsYXNzPVwiay1lZGl0LWZvcm0tY29udGFpbmVyXCI+PGRpdiBjbGFzcz1cImstdHJlZXZpZXdcIj48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWJ1dHRvbnMgay1zdGF0ZS1kZWZhdWx0XCI+PGEgY2xhc3M9XCJrLWJ1dHRvbiBrLXByaW1hcnkgay1idXR0b24tb2tcIiBocmVmPVwiXFxcXCNcIj4ke21lc3NhZ2VzLm9rfTwvYT48YSBjbGFzcz1cImstYnV0dG9uIGstYnV0dG9uLWNhbmNlbFwiIGhyZWY9XCJcXFxcI1wiPiR7bWVzc2FnZXMuY2FuY2VsfTwvYT48L2Rpdj48L2Rpdj4nO3MucGx1Z2luKGgpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4odCxpKXt2YXIgcixvLGE9W107aWYoZS5pc1BsYWluT2JqZWN0KHQpKWlmKHQuaGFzT3duUHJvcGVydHkoXCJmaWx0ZXJzXCIpKWE9dC5maWx0ZXJzO2Vsc2UgaWYodC5maWVsZD09aSlyZXR1cm4gdDtmb3IoZS5pc0FycmF5KHQpJiYoYT10KSxyPTA7YS5sZW5ndGg+cjtyKyspaWYobz1uKGFbcl0saSkpcmV0dXJuIG99ZnVuY3Rpb24gaSh0LG4pe3QuZmlsdGVycyYmKHQuZmlsdGVycz1lLmdyZXAodC5maWx0ZXJzLGZ1bmN0aW9uKGUpe3JldHVybiBpKGUsbiksZS5maWx0ZXJzP2UuZmlsdGVycy5sZW5ndGg6ZS5maWVsZCE9bn0pKX1mdW5jdGlvbiByKGUsdCl7dmFyIG49by5nZXR0ZXIodCwhMCk7cmV0dXJuIGZ1bmN0aW9uKHQpe2Zvcih2YXIgaSxyLG89ZSh0KSxhPVtdLHM9MCxsPXt9O28ubGVuZ3RoPnM7KWk9b1tzKytdLHI9bihpKSxsLmhhc093blByb3BlcnR5KHIpfHwoYS5wdXNoKGkpLGxbcl09ITApO3JldHVybiBhfX12YXIgbz13aW5kb3cua2VuZG8sYT1vLnVpLHM9by5kYXRhLkRhdGFTb3VyY2UsbD1hLldpZGdldCxjPVwiY2hhbmdlXCIsZD1cImJvb2xlYW5cIix1PVwiZW51bXNcIixoPVwic3RyaW5nXCIscD1cIklzIGVxdWFsIHRvXCIsZj1cIklzIG5vdCBlcXVhbCB0b1wiLGc9ZS5wcm94eSxtPWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKG4saSl7dmFyIHIsYSxzLHAsZixtLHYsXyx5LHc7bj1lKG4pLmFkZENsYXNzKFwiay1maWx0ZXJjZWxsXCIpLHI9dGhpcy53cmFwcGVyPWUoXCI8c3Bhbi8+XCIpLmFwcGVuZFRvKG4pLGE9dGhpcyxtPWEub3BlcmF0b3JzPWkub3BlcmF0b3JzfHx7fSx2PWEuaW5wdXQ9ZShcIjxpbnB1dC8+XCIpLmF0dHIoby5hdHRyKFwiYmluZFwiKSxcInZhbHVlOiB2YWx1ZVwiKS5hcHBlbmRUbyhyKSxsLmZuLmluaXQuY2FsbChhLG5bMF0saSksaT1hLm9wdGlvbnMscz1hLmRhdGFTb3VyY2U9aS5kYXRhU291cmNlLGEubW9kZWw9cy5yZWFkZXIubW9kZWwsZj1pLnR5cGU9aCxfPW8uZ2V0dGVyKFwicmVhZGVyLm1vZGVsLmZpZWxkc1wiLCEwKShzKXx8e30seT1fW2kuZmllbGRdLHkmJnkudHlwZSYmKGY9aS50eXBlPXkudHlwZSksaS52YWx1ZXMmJihpLnR5cGU9Zj11KSxtPW1bZl18fGkub3BlcmF0b3JzW2ZdLGEuX3BhcnNlPWZ1bmN0aW9uKGUpe3JldHVybiBlK1wiXCJ9LGEubW9kZWwmJmEubW9kZWwuZmllbGRzJiYodz1hLm1vZGVsLmZpZWxkc1tpLmZpZWxkXSx3JiZ3LnBhcnNlJiYoYS5fcGFyc2U9Zyh3LnBhcnNlLHcpKSksYS52aWV3TW9kZWw9cD1vLm9ic2VydmFibGUoe29wZXJhdG9yOmkub3BlcmF0b3IsdmFsdWU6bnVsbCxvcGVyYXRvclZpc2libGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldChcInZhbHVlXCIpO3JldHVybiBudWxsIT09ZSYmZSE9PXQmJlwidW5kZWZpbmVkXCIhPWV9fSkscC5iaW5kKGMsZyhhLnVwZGF0ZURzRmlsdGVyLGEpKSxmPT1oJiZhLmluaXRTdWdnZXN0RGF0YVNvdXJjZShpKSxudWxsIT09aS5pbnB1dFdpZHRoJiZ2LndpZHRoKGkuaW5wdXRXaWR0aCksYS5fc2V0SW5wdXRUeXBlKGksZiksZiE9ZCYmaS5zaG93T3BlcmF0b3JzIT09ITE/YS5fY3JlYXRlT3BlcmF0b3JEcm9wRG93bihtKTpyLmFkZENsYXNzKFwiay1vcGVyYXRvci1oaWRkZW5cIiksYS5fY3JlYXRlQ2xlYXJJY29uKCksby5iaW5kKHRoaXMud3JhcHBlcixwKSxmPT1oJiYoaS50ZW1wbGF0ZXx8YS5zZXRBdXRvQ29tcGxldGVTb3VyY2UoKSksZj09dSYmYS5zZXRDb21ib0JveFNvdXJjZShhLm9wdGlvbnMudmFsdWVzKSxhLl9yZWZyZXNoVUkoKSxhLl9yZWZyZXNoSGFuZGxlcj1nKGEuX3JlZnJlc2hVSSxhKSxhLmRhdGFTb3VyY2UuYmluZChjLGEuX3JlZnJlc2hIYW5kbGVyKX0sX3NldElucHV0VHlwZTpmdW5jdGlvbih0LG4pe3ZhciBpLHIsYSxzLGwsYz10aGlzLHA9Yy5pbnB1dDtcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnRlbXBsYXRlP3QudGVtcGxhdGUuY2FsbChjLnZpZXdNb2RlbCx7ZWxlbWVudDpjLmlucHV0LGRhdGFTb3VyY2U6Yy5zdWdnZXN0RGF0YVNvdXJjZX0pOm49PWg/cC5hdHRyKG8uYXR0cihcInJvbGVcIiksXCJhdXRvY29tcGxldGVcIikuYXR0cihvLmF0dHIoXCJ0ZXh0LWZpZWxkXCIpLHQuZGF0YVRleHRGaWVsZHx8dC5maWVsZCkuYXR0cihvLmF0dHIoXCJmaWx0ZXJcIiksdC5zdWdnZXN0aW9uT3BlcmF0b3IpLmF0dHIoby5hdHRyKFwiZGVsYXlcIiksdC5kZWxheSkuYXR0cihvLmF0dHIoXCJtaW4tbGVuZ3RoXCIpLHQubWluTGVuZ3RoKS5hdHRyKG8uYXR0cihcInZhbHVlLXByaW1pdGl2ZVwiKSwhMCk6XCJkYXRlXCI9PW4/cC5hdHRyKG8uYXR0cihcInJvbGVcIiksXCJkYXRlcGlja2VyXCIpOm49PWQ/KHAucmVtb3ZlKCksaT1lKFwiPGlucHV0IHR5cGU9J3JhZGlvJy8+XCIpLHI9Yy53cmFwcGVyLGE9by5ndWlkKCkscz1lKFwiPGxhYmVsLz5cIikudGV4dCh0Lm1lc3NhZ2VzLmlzVHJ1ZSkuYXBwZW5kKGkpLGkuYXR0cihvLmF0dHIoXCJiaW5kXCIpLFwiY2hlY2tlZDp2YWx1ZVwiKS5hdHRyKFwibmFtZVwiLGEpLnZhbChcInRydWVcIiksbD1zLmNsb25lKCkudGV4dCh0Lm1lc3NhZ2VzLmlzRmFsc2UpLGkuY2xvbmUoKS52YWwoXCJmYWxzZVwiKS5hcHBlbmRUbyhsKSxyLmFwcGVuZChbcyxsXSkpOlwibnVtYmVyXCI9PW4/cC5hdHRyKG8uYXR0cihcInJvbGVcIiksXCJudW1lcmljdGV4dGJveFwiKTpuPT11JiZwLmF0dHIoby5hdHRyKFwicm9sZVwiKSxcImNvbWJvYm94XCIpLmF0dHIoby5hdHRyKFwidGV4dC1maWVsZFwiKSxcInRleHRcIikuYXR0cihvLmF0dHIoXCJzdWdnZXN0XCIpLCEwKS5hdHRyKG8uYXR0cihcImZpbHRlclwiKSxcImNvbnRhaW5zXCIpLmF0dHIoby5hdHRyKFwidmFsdWUtZmllbGRcIiksXCJ2YWx1ZVwiKS5hdHRyKG8uYXR0cihcInZhbHVlLXByaW1pdGl2ZVwiKSwhMCl9LF9jcmVhdGVPcGVyYXRvckRyb3BEb3duOmZ1bmN0aW9uKHQpe3ZhciBuLGkscj1bXTtmb3IobiBpbiB0KXIucHVzaCh7dGV4dDp0W25dLHZhbHVlOm59KTtpPWUoJzxpbnB1dCBjbGFzcz1cImstZHJvcGRvd24tb3BlcmF0b3JcIiAnK28uYXR0cihcImJpbmRcIikrJz1cInZhbHVlOiBvcGVyYXRvclwiLz4nKS5hcHBlbmRUbyh0aGlzLndyYXBwZXIpLHRoaXMub3BlcmF0b3JEcm9wRG93bj1pLmtlbmRvRHJvcERvd25MaXN0KHtkYXRhU291cmNlOnIsZGF0YVRleHRGaWVsZDpcInRleHRcIixkYXRhVmFsdWVGaWVsZDpcInZhbHVlXCIsb3BlbjpmdW5jdGlvbigpe3RoaXMucG9wdXAuZWxlbWVudC53aWR0aCgxNTApfSx2YWx1ZVByaW1pdGl2ZTohMH0pLmRhdGEoXCJrZW5kb0Ryb3BEb3duTGlzdFwiKSx0aGlzLm9wZXJhdG9yRHJvcERvd24ud3JhcHBlci5maW5kKFwiLmstaS1hcnJvdy1zXCIpLnJlbW92ZUNsYXNzKFwiay1pLWFycm93LXNcIikuYWRkQ2xhc3MoXCJrLWZpbHRlclwiKX0saW5pdFN1Z2dlc3REYXRhU291cmNlOmZ1bmN0aW9uKGUpe3ZhciBuPWUuc3VnZ2VzdERhdGFTb3VyY2U7biBpbnN0YW5jZW9mIHN8fCghZS5jdXN0b21EYXRhU291cmNlJiZuJiYobi5ncm91cD10KSxuPXRoaXMuc3VnZ2VzdERhdGFTb3VyY2U9cy5jcmVhdGUobikpLGUuY3VzdG9tRGF0YVNvdXJjZXx8KG4uX3BhZ2VTaXplPXQsbi5yZWFkZXIuZGF0YT1yKG4ucmVhZGVyLmRhdGEsdGhpcy5vcHRpb25zLmZpZWxkKSksdGhpcy5zdWdnZXN0RGF0YVNvdXJjZT1ufSxzZXRBdXRvQ29tcGxldGVTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmlucHV0LmRhdGEoXCJrZW5kb0F1dG9Db21wbGV0ZVwiKTtlJiZlLnNldERhdGFTb3VyY2UodGhpcy5zdWdnZXN0RGF0YVNvdXJjZSl9LHNldENvbWJvQm94U291cmNlOmZ1bmN0aW9uKGUpe3ZhciB0PXMuY3JlYXRlKHtkYXRhOmV9KSxuPXRoaXMuaW5wdXQuZGF0YShcImtlbmRvQ29tYm9Cb3hcIik7biYmbi5zZXREYXRhU291cmNlKHQpfSxfcmVmcmVzaFVJOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxpPW4odC5kYXRhU291cmNlLmZpbHRlcigpLHRoaXMub3B0aW9ucy5maWVsZCl8fHt9LHI9dC52aWV3TW9kZWw7dC5tYW51YWxseVVwZGF0aW5nVk09ITAsaT1lLmV4dGVuZCghMCx7fSxpKSx0Lm9wdGlvbnMudHlwZT09ZCYmci52YWx1ZSE9PWkudmFsdWUmJnQud3JhcHBlci5maW5kKFwiOnJhZGlvXCIpLnByb3AoXCJjaGVja2VkXCIsITEpLGkub3BlcmF0b3ImJnIuc2V0KFwib3BlcmF0b3JcIixpLm9wZXJhdG9yKSxyLnNldChcInZhbHVlXCIsaS52YWx1ZSksdC5tYW51YWxseVVwZGF0aW5nVk09ITF9LHVwZGF0ZURzRmlsdGVyOmZ1bmN0aW9uKG4pe3ZhciBpLHIsbyxhPXRoaXMscz1hLnZpZXdNb2RlbDthLm1hbnVhbGx5VXBkYXRpbmdWTXx8XCJvcGVyYXRvclwiPT1uLmZpZWxkJiZzLnZhbHVlPT09dHx8KGk9ZS5leHRlbmQoe30sYS52aWV3TW9kZWwudG9KU09OKCkse2ZpZWxkOmEub3B0aW9ucy5maWVsZH0pLHI9e2xvZ2ljOlwiYW5kXCIsZmlsdGVyczpbXX0saS52YWx1ZSE9PXQmJm51bGwhPT1pLnZhbHVlJiZyLmZpbHRlcnMucHVzaChpKSxvPWEuX21lcmdlKHIpLGEuZGF0YVNvdXJjZS5maWx0ZXIoby5maWx0ZXJzLmxlbmd0aD9vOnt9KSl9LF9tZXJnZTpmdW5jdGlvbih0KXt2YXIgbixyLG8sYT10aGlzLHM9dC5sb2dpY3x8XCJhbmRcIixsPXQuZmlsdGVycyxjPWEuZGF0YVNvdXJjZS5maWx0ZXIoKXx8e2ZpbHRlcnM6W10sbG9naWM6XCJhbmRcIn07Zm9yKGkoYyxhLm9wdGlvbnMuZmllbGQpLHI9MCxvPWwubGVuZ3RoO28+cjtyKyspbj1sW3JdLG4udmFsdWU9YS5fcGFyc2Uobi52YWx1ZSk7cmV0dXJuIGw9ZS5ncmVwKGwsZnVuY3Rpb24oZSl7cmV0dXJuXCJcIiE9PWUudmFsdWUmJm51bGwhPT1lLnZhbHVlfSksbC5sZW5ndGgmJihjLmZpbHRlcnMubGVuZ3RoPyh0LmZpbHRlcnM9bCxcImFuZFwiIT09Yy5sb2dpYyYmKGMuZmlsdGVycz1be2xvZ2ljOmMubG9naWMsZmlsdGVyczpjLmZpbHRlcnN9XSxjLmxvZ2ljPVwiYW5kXCIpLGMuZmlsdGVycy5wdXNoKGwubGVuZ3RoPjE/dDpsWzBdKSk6KGMuZmlsdGVycz1sLGMubG9naWM9cykpLGN9LF9jcmVhdGVDbGVhckljb246ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2UoXCI8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J2stYnV0dG9uIGstYnV0dG9uLWljb24nLz5cIikuYXR0cihvLmF0dHIoXCJiaW5kXCIpLFwidmlzaWJsZTpvcGVyYXRvclZpc2libGVcIikuaHRtbChcIjxzcGFuIGNsYXNzPSdrLWljb24gay1pLWNsb3NlJy8+XCIpLmNsaWNrKGcodC5jbGVhckZpbHRlcix0KSkuYXBwZW5kVG8odC53cmFwcGVyKX0sY2xlYXJGaWx0ZXI6ZnVuY3Rpb24oKXt0aGlzLnZpZXdNb2RlbC5zZXQoXCJ2YWx1ZVwiLG51bGwpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLmZpbHRlck1vZGVsPW51bGwsbC5mbi5kZXN0cm95LmNhbGwoZSksby5kZXN0cm95KGUuZWxlbWVudCl9LGV2ZW50czpbY10sb3B0aW9uczp7bmFtZTpcIkZpbHRlckNlbGxcIixkZWxheToyMDAsbWluTGVuZ3RoOjEsaW5wdXRXaWR0aDpudWxsLHZhbHVlczp0LGN1c3RvbURhdGFTb3VyY2U6ITEsZmllbGQ6XCJcIixkYXRhVGV4dEZpZWxkOlwiXCIsdHlwZTpcInN0cmluZ1wiLHN1Z2dlc3REYXRhU291cmNlOm51bGwsc3VnZ2VzdGlvbk9wZXJhdG9yOlwic3RhcnRzd2l0aFwiLG9wZXJhdG9yOlwiZXFcIixzaG93T3BlcmF0b3JzOiEwLHRlbXBsYXRlOm51bGwsbWVzc2FnZXM6e2lzVHJ1ZTpcImlzIHRydWVcIixpc0ZhbHNlOlwiaXMgZmFsc2VcIixmaWx0ZXI6XCJGaWx0ZXJcIixjbGVhcjpcIkNsZWFyXCIsb3BlcmF0b3I6XCJPcGVyYXRvclwifSxvcGVyYXRvcnM6e3N0cmluZzp7ZXE6cCxuZXE6ZixzdGFydHN3aXRoOlwiU3RhcnRzIHdpdGhcIixjb250YWluczpcIkNvbnRhaW5zXCIsZG9lc25vdGNvbnRhaW46XCJEb2VzIG5vdCBjb250YWluXCIsZW5kc3dpdGg6XCJFbmRzIHdpdGhcIn0sbnVtYmVyOntlcTpwLG5lcTpmLGd0ZTpcIklzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0b1wiLGd0OlwiSXMgZ3JlYXRlciB0aGFuXCIsbHRlOlwiSXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvXCIsbHQ6XCJJcyBsZXNzIHRoYW5cIn0sZGF0ZTp7ZXE6cCxuZXE6ZixndGU6XCJJcyBhZnRlciBvciBlcXVhbCB0b1wiLGd0OlwiSXMgYWZ0ZXJcIixsdGU6XCJJcyBiZWZvcmUgb3IgZXF1YWwgdG9cIixsdDpcIklzIGJlZm9yZVwifSxlbnVtczp7ZXE6cCxuZXE6Zn19fX0pO2EucGx1Z2luKG0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4odCl7dD1lKHQpLHQuY2hpbGRyZW4odikuY2hpbGRyZW4oXCIuay1pY29uXCIpLnJlbW92ZSgpLHQuZmlsdGVyKFwiOmhhcyguay1wYW5lbCksOmhhcyguay1jb250ZW50KVwiKS5jaGlsZHJlbihcIi5rLWxpbms6bm90KDpoYXMoW2NsYXNzKj1rLWktYXJyb3ddKSlcIikuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyksbj10LnBhcmVudCgpO3QuYXBwZW5kKFwiPHNwYW4gY2xhc3M9J2staWNvbiBcIisobi5oYXNDbGFzcyhJKT9cImstaS1hcnJvdy1uIGstcGFuZWxiYXItY29sbGFwc2VcIjpcImstaS1hcnJvdy1zIGstcGFuZWxiYXItZXhwYW5kXCIpK1wiJy8+XCIpfSl9ZnVuY3Rpb24gaSh0KXt0PWUodCksdC5maWx0ZXIoXCIuay1maXJzdDpub3QoOmZpcnN0LWNoaWxkKVwiKS5yZW1vdmVDbGFzcyh4KSx0LmZpbHRlcihcIi5rLWxhc3Q6bm90KDpsYXN0LWNoaWxkKVwiKS5yZW1vdmVDbGFzcyhnKSx0LmZpbHRlcihcIjpmaXJzdC1jaGlsZFwiKS5hZGRDbGFzcyh4KSx0LmZpbHRlcihcIjpsYXN0LWNoaWxkXCIpLmFkZENsYXNzKGcpfXZhciByPXdpbmRvdy5rZW5kbyxvPXIudWksYT1yLmtleXMscz1lLmV4dGVuZCxsPWUuZWFjaCxjPXIudGVtcGxhdGUsZD1vLldpZGdldCx1PS9eKHVsfGF8ZGl2KSQvaSxoPVwiLmtlbmRvUGFuZWxCYXJcIixwPVwiaW1nXCIsZj1cImhyZWZcIixnPVwiay1sYXN0XCIsbT1cImstbGlua1wiLHY9XCIuXCIrbSxfPVwiZXJyb3JcIix5PVwiLmstaXRlbVwiLHc9XCIuay1ncm91cFwiLGI9dytcIjp2aXNpYmxlXCIsaz1cImstaW1hZ2VcIix4PVwiay1maXJzdFwiLEM9XCJleHBhbmRcIixTPVwic2VsZWN0XCIsVD1cImstY29udGVudFwiLEQ9XCJhY3RpdmF0ZVwiLEE9XCJjb2xsYXBzZVwiLEU9XCJtb3VzZWVudGVyXCIsTT1cIm1vdXNlbGVhdmVcIixQPVwiY29udGVudExvYWRcIixJPVwiay1zdGF0ZS1hY3RpdmVcIix6PVwiPiAuay1wYW5lbFwiLEY9XCI+IC5rLWNvbnRlbnRcIixSPVwiay1zdGF0ZS1mb2N1c2VkXCIsQj1cImstc3RhdGUtZGlzYWJsZWRcIixMPVwiay1zdGF0ZS1zZWxlY3RlZFwiLE89XCIuXCIrTCxIPVwiay1zdGF0ZS1oaWdobGlnaHRcIixOPXkrXCI6bm90KC5rLXN0YXRlLWRpc2FibGVkKVwiLFY9TitcIiA+IC5rLWxpbmtcIixVPXkrXCIuay1zdGF0ZS1kaXNhYmxlZCA+IC5rLWxpbmtcIixXPVwiPiBsaSA+IFwiK08rXCIsIC5rLXBhbmVsID4gbGkgPiBcIitPLGo9XCJrLXN0YXRlLWRlZmF1bHRcIixHPVwiYXJpYS1kaXNhYmxlZFwiLHE9XCJhcmlhLWV4cGFuZGVkXCIsJD1cImFyaWEtaGlkZGVuXCIsWT1cImFyaWEtc2VsZWN0ZWRcIixLPVwiOnZpc2libGVcIixRPVwiOmVtcHR5XCIsWD1cInNpbmdsZVwiLEo9e2NvbnRlbnQ6YyhcIjxkaXYgcm9sZT0ncmVnaW9uJyBjbGFzcz0nay1jb250ZW50JyM9IGNvbnRlbnRBdHRyaWJ1dGVzKGRhdGEpICM+Iz0gY29udGVudChpdGVtKSAjPC9kaXY+XCIpLGdyb3VwOmMoXCI8dWwgcm9sZT0nZ3JvdXAnIGFyaWEtaGlkZGVuPSd0cnVlJyBjbGFzcz0nIz0gZ3JvdXBDc3NDbGFzcyhncm91cCkgIycjPSBncm91cEF0dHJpYnV0ZXMoZ3JvdXApICM+Iz0gcmVuZGVySXRlbXMoZGF0YSkgIzwvdWw+XCIpLGl0ZW1XcmFwcGVyOmMoXCI8Iz0gdGFnKGl0ZW0pICMgY2xhc3M9JyM9IHRleHRDbGFzcyhpdGVtLCBncm91cCkgIycgIz0gY29udGVudFVybChpdGVtKSAjIz0gdGV4dEF0dHJpYnV0ZXMoaXRlbSkgIz4jPSBpbWFnZShpdGVtKSAjIz0gc3ByaXRlKGl0ZW0pICMjPSB0ZXh0KGl0ZW0pICMjPSBhcnJvdyhkYXRhKSAjPC8jPSB0YWcoaXRlbSkgIz5cIiksaXRlbTpjKFwiPGxpIHJvbGU9J21lbnVpdGVtJyAjPWFyaWEoaXRlbSkjY2xhc3M9JyM9IHdyYXBwZXJDc3NDbGFzcyhncm91cCwgaXRlbSkgIyc+Iz0gaXRlbVdyYXBwZXIoZGF0YSkgIyMgaWYgKGl0ZW0uaXRlbXMpIHsgIyM9IHN1Ykdyb3VwKHsgaXRlbXM6IGl0ZW0uaXRlbXMsIHBhbmVsQmFyOiBwYW5lbEJhciwgZ3JvdXA6IHsgZXhwYW5kZWQ6IGl0ZW0uZXhwYW5kZWQgfSB9KSAjIyB9IGVsc2UgaWYgKGl0ZW0uY29udGVudCB8fCBpdGVtLmNvbnRlbnRVcmwpIHsgIyM9IHJlbmRlckNvbnRlbnQoZGF0YSkgIyMgfSAjPC9saT5cIiksaW1hZ2U6YyhcIjxpbWcgY2xhc3M9J2staW1hZ2UnIGFsdD0nJyBzcmM9JyM9IGltYWdlVXJsICMnIC8+XCIpLGFycm93OmMoXCI8c3BhbiBjbGFzcz0nIz0gYXJyb3dDbGFzcyhpdGVtKSAjJz48L3NwYW4+XCIpLHNwcml0ZTpjKFwiPHNwYW4gY2xhc3M9J2stc3ByaXRlICM9IHNwcml0ZUNzc0NsYXNzICMnPjwvc3Bhbj5cIiksZW1wdHk6YyhcIlwiKX0sWj17YXJpYTpmdW5jdGlvbihlKXt2YXIgdD1cIlwiO3JldHVybihlLml0ZW1zfHxlLmNvbnRlbnR8fGUuY29udGVudFVybCkmJih0Kz1xK1wiPSdcIisoZS5leHBhbmRlZD9cInRydWVcIjpcImZhbHNlXCIpK1wiJyBcIiksZS5lbmFibGVkPT09ITEmJih0Kz1HK1wiPSd0cnVlJ1wiKSx0XHJcbn0sd3JhcHBlckNzc0NsYXNzOmZ1bmN0aW9uKGUsdCl7dmFyIG49XCJrLWl0ZW1cIixpPXQuaW5kZXg7cmV0dXJuIG4rPXQuZW5hYmxlZD09PSExP1wiIFwiK0I6dC5leHBhbmRlZD09PSEwP1wiIFwiK0k6XCIgay1zdGF0ZS1kZWZhdWx0XCIsMD09PWkmJihuKz1cIiBrLWZpcnN0XCIpLGk9PWUubGVuZ3RoLTEmJihuKz1cIiBrLWxhc3RcIiksdC5jc3NDbGFzcyYmKG4rPVwiIFwiK3QuY3NzQ2xhc3MpLG59LHRleHRDbGFzczpmdW5jdGlvbihlLHQpe3ZhciBuPW07cmV0dXJuIHQuZmlyc3RMZXZlbCYmKG4rPVwiIGstaGVhZGVyXCIpLG59LHRleHRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGUpe3JldHVybiBlLnVybD9cIiBocmVmPSdcIitlLnVybCtcIidcIjpcIlwifSxhcnJvd0NsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0PVwiay1pY29uXCI7cmV0dXJuIHQrPWUuZXhwYW5kZWQ/XCIgay1pLWFycm93LW4gay1wYW5lbGJhci1jb2xsYXBzZVwiOlwiIGstaS1hcnJvdy1zIGstcGFuZWxiYXItZXhwYW5kXCJ9LHRleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZW5jb2RlZD09PSExP2UudGV4dDpyLmh0bWxFbmNvZGUoZS50ZXh0KX0sdGFnOmZ1bmN0aW9uKGUpe3JldHVybiBlLnVybHx8ZS5jb250ZW50VXJsP1wiYVwiOlwic3BhblwifSxncm91cEF0dHJpYnV0ZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZXhwYW5kZWQhPT0hMD9cIiBzdHlsZT0nZGlzcGxheTpub25lJ1wiOlwiXCJ9LGdyb3VwQ3NzQ2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm5cImstZ3JvdXAgay1wYW5lbFwifSxjb250ZW50QXR0cmlidXRlczpmdW5jdGlvbihlKXtyZXR1cm4gZS5pdGVtLmV4cGFuZGVkIT09ITA/XCIgc3R5bGU9J2Rpc3BsYXk6bm9uZSdcIjpcIlwifSxjb250ZW50OmZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnRlbnQ/ZS5jb250ZW50OmUuY29udGVudFVybD9cIlwiOlwiJm5ic3A7XCJ9LGNvbnRlbnRVcmw6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29udGVudFVybD8naHJlZj1cIicrZS5jb250ZW50VXJsKydcIic6XCJcIn19LGV0PWQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIGksbz10aGlzO2QuZm4uaW5pdC5jYWxsKG8sdCxuKSx0PW8ud3JhcHBlcj1vLmVsZW1lbnQuYWRkQ2xhc3MoXCJrLXdpZGdldCBrLXJlc2V0IGstaGVhZGVyIGstcGFuZWxiYXJcIiksbj1vLm9wdGlvbnMsdFswXS5pZCYmKG8uX2l0ZW1JZD10WzBdLmlkK1wiX3BiX2FjdGl2ZVwiKSxvLl90YWJpbmRleCgpLG8uX2luaXREYXRhKG4pLG8uX3VwZGF0ZUNsYXNzZXMoKSxvLl9hbmltYXRpb25zKG4pLHQub24oXCJjbGlja1wiK2gsVixmdW5jdGlvbih0KXtvLl9jbGljayhlKHQuY3VycmVudFRhcmdldCkpJiZ0LnByZXZlbnREZWZhdWx0KCl9KS5vbihFK2grXCIgXCIrTStoLFYsby5fdG9nZ2xlSG92ZXIpLm9uKFwiY2xpY2tcIitoLFUsITEpLm9uKFwia2V5ZG93blwiK2gsZS5wcm94eShvLl9rZXlkb3duLG8pKS5vbihcImZvY3VzXCIraCxmdW5jdGlvbigpe3ZhciBlPW8uc2VsZWN0KCk7by5fY3VycmVudChlWzBdP2U6by5fZmlyc3QoKSl9KS5vbihcImJsdXJcIitoLGZ1bmN0aW9uKCl7by5fY3VycmVudChudWxsKX0pLmF0dHIoXCJyb2xlXCIsXCJtZW51XCIpLGk9dC5maW5kKFwibGkuXCIrSStcIiA+IC5cIitUKSxpWzBdJiZvLmV4cGFuZChpLnBhcmVudCgpLCExKSxyLm5vdGlmeShvKX0sZXZlbnRzOltDLEEsUyxELF8sUF0sb3B0aW9uczp7bmFtZTpcIlBhbmVsQmFyXCIsYW5pbWF0aW9uOntleHBhbmQ6e2VmZmVjdHM6XCJleHBhbmQ6dmVydGljYWxcIixkdXJhdGlvbjoyMDB9LGNvbGxhcHNlOntkdXJhdGlvbjoyMDB9fSxleHBhbmRNb2RlOlwibXVsdGlwbGVcIn0sZGVzdHJveTpmdW5jdGlvbigpe2QuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuZWxlbWVudC5vZmYoaCksci5kZXN0cm95KHRoaXMuZWxlbWVudCl9LF9pbml0RGF0YTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZGF0YVNvdXJjZSYmKHQuZWxlbWVudC5lbXB0eSgpLHQuYXBwZW5kKGUuZGF0YVNvdXJjZSx0LmVsZW1lbnQpKX0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnMuYW5pbWF0aW9uO3RoaXMuX2FuaW1hdGlvbnMoZSksZS5hbmltYXRpb249cyghMCx0LGUuYW5pbWF0aW9uKSxcImRhdGFTb3VyY2VcImluIGUmJnRoaXMuX2luaXREYXRhKGUpLGQuZm4uc2V0T3B0aW9ucy5jYWxsKHRoaXMsZSl9LGV4cGFuZDpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXMscj17fTtyZXR1cm4gbj1uIT09ITEsdD10aGlzLmVsZW1lbnQuZmluZCh0KSx0LmVhY2goZnVuY3Rpb24obyxhKXthPWUoYSk7dmFyIHM9YS5maW5kKHopLmFkZChhLmZpbmQoRikpO2lmKCFhLmhhc0NsYXNzKEIpJiZzLmxlbmd0aD4wKXtpZihpLm9wdGlvbnMuZXhwYW5kTW9kZT09WCYmaS5fY29sbGFwc2VBbGxFeHBhbmRlZChhKSlyZXR1cm4gaTt0LmZpbmQoXCIuXCIrSCkucmVtb3ZlQ2xhc3MoSCksYS5hZGRDbGFzcyhIKSxufHwocj1pLm9wdGlvbnMuYW5pbWF0aW9uLGkub3B0aW9ucy5hbmltYXRpb249e2V4cGFuZDp7ZWZmZWN0czp7fX0sY29sbGFwc2U6e2hpZGU6ITAsZWZmZWN0czp7fX19KSxpLl90cmlnZ2VyRXZlbnQoQyxhKXx8aS5fdG9nZ2xlSXRlbShhLCExKSxufHwoaS5vcHRpb25zLmFuaW1hdGlvbj1yKX19KSxpfSxjb2xsYXBzZTpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXMscj17fTtyZXR1cm4gbj1uIT09ITEsdD1pLmVsZW1lbnQuZmluZCh0KSx0LmVhY2goZnVuY3Rpb24odCxvKXtvPWUobyk7dmFyIGE9by5maW5kKHopLmFkZChvLmZpbmQoRikpOyFvLmhhc0NsYXNzKEIpJiZhLmlzKEspJiYoby5yZW1vdmVDbGFzcyhIKSxufHwocj1pLm9wdGlvbnMuYW5pbWF0aW9uLGkub3B0aW9ucy5hbmltYXRpb249e2V4cGFuZDp7ZWZmZWN0czp7fX0sY29sbGFwc2U6e2hpZGU6ITAsZWZmZWN0czp7fX19KSxpLl90cmlnZ2VyRXZlbnQoQSxvKXx8aS5fdG9nZ2xlSXRlbShvLCEwKSxufHwoaS5vcHRpb25zLmFuaW1hdGlvbj1yKSl9KSxpfSxfdG9nZ2xlRGlzYWJsZWQ6ZnVuY3Rpb24oZSx0KXtlPXRoaXMuZWxlbWVudC5maW5kKGUpLGUudG9nZ2xlQ2xhc3Moaix0KS50b2dnbGVDbGFzcyhCLCF0KS5hdHRyKEcsIXQpfSxzZWxlY3Q6ZnVuY3Rpb24obil7dmFyIGk9dGhpcztyZXR1cm4gbj09PXQ/aS5lbGVtZW50LmZpbmQoVykucGFyZW50KCk6KG49aS5lbGVtZW50LmZpbmQobiksbi5sZW5ndGg/bi5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49ZSh0aGlzKSxyPW4uY2hpbGRyZW4odik7cmV0dXJuIG4uaGFzQ2xhc3MoQik/aTooaS5fdHJpZ2dlckV2ZW50KFMsbil8fGkuX3VwZGF0ZVNlbGVjdGVkKHIpLHQpfSk6dGhpcy5fdXBkYXRlU2VsZWN0ZWQobiksaSl9LGNsZWFyU2VsZWN0aW9uOmZ1bmN0aW9uKCl7dGhpcy5zZWxlY3QoZSgpKX0sZW5hYmxlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX3RvZ2dsZURpc2FibGVkKGUsdCE9PSExKSx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl90b2dnbGVEaXNhYmxlZChlLCExKSx0aGlzfSxhcHBlbmQ6ZnVuY3Rpb24oZSx0KXt0PXRoaXMuZWxlbWVudC5maW5kKHQpO3ZhciByPXRoaXMuX2luc2VydChlLHQsdC5sZW5ndGg/dC5maW5kKHopOm51bGwpO3JldHVybiBsKHIuaXRlbXMsZnVuY3Rpb24oKXtyLmdyb3VwLmFwcGVuZCh0aGlzKSxpKHRoaXMpfSksbih0KSxpKHIuZ3JvdXAuZmluZChcIi5rLWZpcnN0LCAuay1sYXN0XCIpKSxyLmdyb3VwLmhlaWdodChcImF1dG9cIiksdGhpc30saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKGUsdCl7dD10aGlzLmVsZW1lbnQuZmluZCh0KTt2YXIgbj10aGlzLl9pbnNlcnQoZSx0LHQucGFyZW50KCkpO3JldHVybiBsKG4uaXRlbXMsZnVuY3Rpb24oKXt0LmJlZm9yZSh0aGlzKSxpKHRoaXMpfSksaSh0KSxuLmdyb3VwLmhlaWdodChcImF1dG9cIiksdGhpc30saW5zZXJ0QWZ0ZXI6ZnVuY3Rpb24oZSx0KXt0PXRoaXMuZWxlbWVudC5maW5kKHQpO3ZhciBuPXRoaXMuX2luc2VydChlLHQsdC5wYXJlbnQoKSk7cmV0dXJuIGwobi5pdGVtcyxmdW5jdGlvbigpe3QuYWZ0ZXIodGhpcyksaSh0aGlzKX0pLGkodCksbi5ncm91cC5oZWlnaHQoXCJhdXRvXCIpLHRoaXN9LHJlbW92ZTpmdW5jdGlvbihlKXtlPXRoaXMuZWxlbWVudC5maW5kKGUpO3ZhciB0PXRoaXMscj1lLnBhcmVudHNVbnRpbCh0LmVsZW1lbnQseSksbz1lLnBhcmVudChcInVsXCIpO3JldHVybiBlLnJlbW92ZSgpLCFvfHxvLmhhc0NsYXNzKFwiay1wYW5lbGJhclwiKXx8by5jaGlsZHJlbih5KS5sZW5ndGh8fG8ucmVtb3ZlKCksci5sZW5ndGgmJihyPXIuZXEoMCksbihyKSxpKHIpKSx0fSxyZWxvYWQ6ZnVuY3Rpb24odCl7dmFyIG49dGhpczt0PW4uZWxlbWVudC5maW5kKHQpLHQuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7bi5fYWpheFJlcXVlc3QodCx0LmNoaWxkcmVuKFwiLlwiK1QpLCF0LmlzKEspKX0pfSxfZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50LmNoaWxkcmVuKE4pLmZpcnN0KCl9LF9sYXN0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50LmNoaWxkcmVuKE4pLmxhc3QoKSx0PWUuY2hpbGRyZW4oYik7cmV0dXJuIHRbMF0/dC5jaGlsZHJlbihOKS5sYXN0KCk6ZX0sX2N1cnJlbnQ6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4uX2ZvY3VzZWQscj1uLl9pdGVtSWQ7cmV0dXJuIGU9PT10P2k6KG4uZWxlbWVudC5yZW1vdmVBdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIpLGkmJihpWzBdLmlkPT09ciYmaS5yZW1vdmVBdHRyKFwiaWRcIiksaS5jaGlsZHJlbih2KS5yZW1vdmVDbGFzcyhSKSksZSYmKHI9ZVswXS5pZHx8cixlLmF0dHIoXCJpZFwiLHIpLmNoaWxkcmVuKHYpLmFkZENsYXNzKFIpLG4uZWxlbWVudC5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIscikpLG4uX2ZvY3VzZWQ9ZSx0KX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUua2V5Q29kZSxpPXQuX2N1cnJlbnQoKTtlLnRhcmdldD09ZS5jdXJyZW50VGFyZ2V0JiYobj09YS5ET1dOfHxuPT1hLlJJR0hUPyh0Ll9jdXJyZW50KHQuX25leHRJdGVtKGkpKSxlLnByZXZlbnREZWZhdWx0KCkpOm49PWEuVVB8fG49PWEuTEVGVD8odC5fY3VycmVudCh0Ll9wcmV2SXRlbShpKSksZS5wcmV2ZW50RGVmYXVsdCgpKTpuPT1hLkVOVEVSfHxuPT1hLlNQQUNFQkFSPyh0Ll9jbGljayhpLmNoaWxkcmVuKHYpKSxlLnByZXZlbnREZWZhdWx0KCkpOm49PWEuSE9NRT8odC5fY3VycmVudCh0Ll9maXJzdCgpKSxlLnByZXZlbnREZWZhdWx0KCkpOm49PWEuRU5EJiYodC5fY3VycmVudCh0Ll9sYXN0KCkpLGUucHJldmVudERlZmF1bHQoKSkpfSxfbmV4dEl0ZW06ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIHRoaXMuX2ZpcnN0KCk7dmFyIHQ9ZS5jaGlsZHJlbihiKSxuPWUubmV4dEFsbChcIjp2aXNpYmxlXCIpLmZpcnN0KCk7cmV0dXJuIHRbMF0mJihuPXQuY2hpbGRyZW4oXCIuXCIreCkpLG5bMF18fChuPWUucGFyZW50KGIpLnBhcmVudCh5KS5uZXh0KCkpLG5bMF18fChuPXRoaXMuX2ZpcnN0KCkpLG4uaGFzQ2xhc3MoQikmJihuPXRoaXMuX25leHRJdGVtKG4pKSxufSxfcHJldkl0ZW06ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIHRoaXMuX2xhc3QoKTt2YXIgdCxuPWUucHJldkFsbChcIjp2aXNpYmxlXCIpLmZpcnN0KCk7aWYoblswXSlmb3IodD1uO3RbMF07KXQ9dC5jaGlsZHJlbihiKS5jaGlsZHJlbihcIi5cIitnKSx0WzBdJiYobj10KTtlbHNlIG49ZS5wYXJlbnQoYikucGFyZW50KHkpLG5bMF18fChuPXRoaXMuX2xhc3QoKSk7cmV0dXJuIG4uaGFzQ2xhc3MoQikmJihuPXRoaXMuX3ByZXZJdGVtKG4pKSxufSxfaW5zZXJ0OmZ1bmN0aW9uKHQsbixpKXt2YXIgcixvLGE9dGhpcyxsPWUuaXNQbGFpbk9iamVjdCh0KSxjPW4mJm5bMF07cmV0dXJuIGN8fChpPWEuZWxlbWVudCksbz17Zmlyc3RMZXZlbDppLmhhc0NsYXNzKFwiay1wYW5lbGJhclwiKSxleHBhbmRlZDppLnBhcmVudCgpLmhhc0NsYXNzKEkpLGxlbmd0aDppLmNoaWxkcmVuKCkubGVuZ3RofSxjJiYhaS5sZW5ndGgmJihpPWUoZXQucmVuZGVyR3JvdXAoe2dyb3VwOm99KSkuYXBwZW5kVG8obikpLGx8fGUuaXNBcnJheSh0KT8ocj1lLm1hcChsP1t0XTp0LGZ1bmN0aW9uKHQsbil7cmV0dXJuIGUoXCJzdHJpbmdcIj09dHlwZW9mIHQ/dDpldC5yZW5kZXJJdGVtKHtncm91cDpvLGl0ZW06cyh0LHtpbmRleDpufSl9KSl9KSxjJiZuLmF0dHIocSwhMSkpOihyPVwic3RyaW5nXCI9PXR5cGVvZiB0JiZcIjxcIiE9dFswXT9hLmVsZW1lbnQuZmluZCh0KTplKHQpLGEuX3VwZGF0ZUl0ZW1zQ2xhc3NlcyhyKSkse2l0ZW1zOnIsZ3JvdXA6aX19LF90b2dnbGVIb3ZlcjpmdW5jdGlvbih0KXt2YXIgbj1lKHQuY3VycmVudFRhcmdldCk7bi5wYXJlbnRzKFwibGkuXCIrQikubGVuZ3RofHxuLnRvZ2dsZUNsYXNzKFwiay1zdGF0ZS1ob3ZlclwiLHQudHlwZT09RSl9LF91cGRhdGVDbGFzc2VzOmZ1bmN0aW9uKCl7dmFyIHQscixvPXRoaXM7dD1vLmVsZW1lbnQuZmluZChcImxpID4gdWxcIikubm90KGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcykucGFyZW50c1VudGlsKFwiLmstcGFuZWxiYXJcIixcImRpdlwiKS5sZW5ndGh9KS5hZGRDbGFzcyhcImstZ3JvdXAgay1wYW5lbFwiKS5hdHRyKFwicm9sZVwiLFwiZ3JvdXBcIiksdC5wYXJlbnQoKS5hdHRyKHEsITEpLm5vdChcIi5cIitJKS5jaGlsZHJlbihcInVsXCIpLmF0dHIoJCwhMCkuaGlkZSgpLHI9by5lbGVtZW50LmFkZCh0KS5jaGlsZHJlbigpLG8uX3VwZGF0ZUl0ZW1zQ2xhc3NlcyhyKSxuKHIpLGkocil9LF91cGRhdGVJdGVtc0NsYXNzZXM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUubGVuZ3RoLG49MDt0Pm47bisrKXRoaXMuX3VwZGF0ZUl0ZW1DbGFzc2VzKGVbbl0sbil9LF91cGRhdGVJdGVtQ2xhc3NlczpmdW5jdGlvbih0LG4pe3ZhciBpLG8sYT10aGlzLl9zZWxlY3RlZCxzPXRoaXMub3B0aW9ucy5jb250ZW50VXJscyxsPXMmJnNbbl0sYz10aGlzLmVsZW1lbnRbMF07dD1lKHQpLmFkZENsYXNzKFwiay1pdGVtXCIpLmF0dHIoXCJyb2xlXCIsXCJtZW51aXRlbVwiKSxyLnN1cHBvcnQuYnJvd3Nlci5tc2llJiZ0LmNzcyhcImxpc3Qtc3R5bGUtcG9zaXRpb25cIixcImluc2lkZVwiKS5jc3MoXCJsaXN0LXN0eWxlLXBvc2l0aW9uXCIsXCJcIiksdC5jaGlsZHJlbihwKS5hZGRDbGFzcyhrKSxvPXQuY2hpbGRyZW4oXCJhXCIpLmFkZENsYXNzKG0pLG9bMF0mJihvLmF0dHIoXCJocmVmXCIsbCksby5jaGlsZHJlbihwKS5hZGRDbGFzcyhrKSksdC5maWx0ZXIoXCI6bm90KFtkaXNhYmxlZF0pOm5vdChbY2xhc3MqPWstc3RhdGVdKVwiKS5hZGRDbGFzcyhcImstc3RhdGUtZGVmYXVsdFwiKSx0LmZpbHRlcihcImxpW2Rpc2FibGVkXVwiKS5hZGRDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIikuYXR0cihHLCEwKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIiksdC5jaGlsZHJlbihcImRpdlwiKS5hZGRDbGFzcyhUKS5hdHRyKFwicm9sZVwiLFwicmVnaW9uXCIpLmF0dHIoJCwhMCkuaGlkZSgpLnBhcmVudCgpLmF0dHIocSwhMSksbz10LmNoaWxkcmVuKE8pLG9bMF0mJihhJiZhLnJlbW92ZUF0dHIoWSkuY2hpbGRyZW4oTykucmVtb3ZlQ2xhc3MoTCksby5hZGRDbGFzcyhMKSx0aGlzLl9zZWxlY3RlZD10LmF0dHIoWSwhMCkpLHQuY2hpbGRyZW4odilbMF18fChpPVwiPHNwYW4gY2xhc3M9J1wiK20rXCInLz5cIixzJiZzW25dJiZ0WzBdLnBhcmVudE5vZGU9PWMmJihpPSc8YSBjbGFzcz1cImstbGluayBrLWhlYWRlclwiIGhyZWY9XCInK3Nbbl0rJ1wiLz4nKSx0LmNvbnRlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuISh0aGlzLm5vZGVOYW1lLm1hdGNoKHUpfHwzPT10aGlzLm5vZGVUeXBlJiYhZS50cmltKHRoaXMubm9kZVZhbHVlKSl9KS53cmFwQWxsKGkpKSx0LnBhcmVudChcIi5rLXBhbmVsYmFyXCIpWzBdJiZ0LmNoaWxkcmVuKHYpLmFkZENsYXNzKFwiay1oZWFkZXJcIil9LF9jbGljazpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGEscyxsPXRoaXMsYz1sLmVsZW1lbnQ7aWYoIWUucGFyZW50cyhcImxpLlwiK0IpLmxlbmd0aCYmZS5jbG9zZXN0KFwiLmstd2lkZ2V0XCIpWzBdPT1jWzBdKXtpZihvPWUuY2xvc2VzdCh2KSxhPW8uY2xvc2VzdCh5KSxsLl91cGRhdGVTZWxlY3RlZChvKSxuPWEuZmluZCh6KS5hZGQoYS5maW5kKEYpKSxpPW8uYXR0cihmKSxyPWkmJihcIiNcIj09aS5jaGFyQXQoaS5sZW5ndGgtMSl8fC0xIT1pLmluZGV4T2YoXCIjXCIrbC5lbGVtZW50WzBdLmlkK1wiLVwiKSksdD0hKCFyJiYhbi5sZW5ndGgpLG4uZGF0YShcImFuaW1hdGluZ1wiKSlyZXR1cm4gdDtpZihsLl90cmlnZ2VyRXZlbnQoUyxhKSYmKHQ9ITApLHQhPT0hMSlyZXR1cm4gbC5vcHRpb25zLmV4cGFuZE1vZGU9PVgmJmwuX2NvbGxhcHNlQWxsRXhwYW5kZWQoYSk/dDoobi5sZW5ndGgmJihzPW4uaXMoSyksbC5fdHJpZ2dlckV2ZW50KHM/QTpDLGEpfHwodD1sLl90b2dnbGVJdGVtKGEscykpKSx0KX19LF90b2dnbGVJdGVtOmZ1bmN0aW9uKGUsbil7dmFyIGkscixvPXRoaXMsYT1lLmZpbmQoeikscz1lLmZpbmQodiksbD1zLmF0dHIoZik7cmV0dXJuIGEubGVuZ3RoPyh0aGlzLl90b2dnbGVHcm91cChhLG4pLGk9ITApOihyPWUuY2hpbGRyZW4oXCIuXCIrVCksci5sZW5ndGgmJihpPSEwLHIuaXMoUSkmJmwhPT10P28uX2FqYXhSZXF1ZXN0KGUscixuKTpvLl90b2dnbGVHcm91cChyLG4pKSksaX0sX3RvZ2dsZUdyb3VwOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPW4ub3B0aW9ucy5hbmltYXRpb24scj1pLmV4cGFuZCxvPXMoe30saS5jb2xsYXBzZSksYT1vJiZcImVmZmVjdHNcImluIG87ZS5pcyhLKT09dCYmKGUucGFyZW50KCkuYXR0cihxLCF0KS5hdHRyKCQsdCkudG9nZ2xlQ2xhc3MoSSwhdCkuZmluZChcIj4gLmstbGluayA+IC5rLWljb25cIikudG9nZ2xlQ2xhc3MoXCJrLWktYXJyb3ctblwiLCF0KS50b2dnbGVDbGFzcyhcImstcGFuZWxiYXItY29sbGFwc2VcIiwhdCkudG9nZ2xlQ2xhc3MoXCJrLWktYXJyb3ctc1wiLHQpLnRvZ2dsZUNsYXNzKFwiay1wYW5lbGJhci1leHBhbmRcIix0KSxyPXQ/cyhhP286cyh7cmV2ZXJzZTohMH0scikse2hpZGU6ITB9KTpzKHtjb21wbGV0ZTpmdW5jdGlvbihlKXtuLl90cmlnZ2VyRXZlbnQoRCxlLmNsb3Nlc3QoeSkpfX0sciksZS5rZW5kb1N0b3AoITAsITApLmtlbmRvQW5pbWF0ZShyKSl9LF9jb2xsYXBzZUFsbEV4cGFuZGVkOmZ1bmN0aW9uKHQpe3ZhciBuLGk9dGhpcyxyPSExLG89dC5maW5kKHopLmFkZCh0LmZpbmQoRikpO3JldHVybiBvLmlzKEspJiYocj0hMCksby5pcyhLKXx8MD09PW8ubGVuZ3RofHwobj10LnNpYmxpbmdzKCksbi5maW5kKHopLmFkZChuLmZpbmQoRikpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBlKHRoaXMpLmlzKEspfSkuZWFjaChmdW5jdGlvbih0LG4pe249ZShuKSxyPWkuX3RyaWdnZXJFdmVudChBLG4uY2xvc2VzdCh5KSkscnx8aS5fdG9nZ2xlR3JvdXAobiwhMCl9KSkscn0sX2FqYXhSZXF1ZXN0OmZ1bmN0aW9uKHQsbixpKXt2YXIgcj10aGlzLG89dC5maW5kKFwiLmstcGFuZWxiYXItY29sbGFwc2UsIC5rLXBhbmVsYmFyLWV4cGFuZFwiKSxhPXQuZmluZCh2KSxzPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtvLmFkZENsYXNzKFwiay1sb2FkaW5nXCIpfSwxMDApLGw9e30sYz1hLmF0dHIoZik7ZS5hamF4KHt0eXBlOlwiR0VUXCIsY2FjaGU6ITEsdXJsOmMsZGF0YVR5cGU6XCJodG1sXCIsZGF0YTpsLGVycm9yOmZ1bmN0aW9uKGUsdCl7by5yZW1vdmVDbGFzcyhcImstbG9hZGluZ1wiKSxyLnRyaWdnZXIoXyx7eGhyOmUsc3RhdHVzOnR9KSYmdGhpcy5jb21wbGV0ZSgpfSxjb21wbGV0ZTpmdW5jdGlvbigpe2NsZWFyVGltZW91dChzKSxvLnJlbW92ZUNsYXNzKFwiay1sb2FkaW5nXCIpfSxzdWNjZXNzOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIG8oKXtyZXR1cm57ZWxlbWVudHM6bi5nZXQoKX19dHJ5e3IuYW5ndWxhcihcImNsZWFudXBcIixvKSxuLmh0bWwoZSksci5hbmd1bGFyKFwiY29tcGlsZVwiLG8pfWNhdGNoKGEpe3ZhciBzPXdpbmRvdy5jb25zb2xlO3MmJnMuZXJyb3ImJnMuZXJyb3IoYS5uYW1lK1wiOiBcIithLm1lc3NhZ2UrXCIgaW4gXCIrYyksdGhpcy5lcnJvcih0aGlzLnhocixcImVycm9yXCIpfXIuX3RvZ2dsZUdyb3VwKG4saSksci50cmlnZ2VyKFAse2l0ZW06dFswXSxjb250ZW50RWxlbWVudDpuWzBdfSl9fSl9LF90cmlnZ2VyRXZlbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3JldHVybiBuLnRyaWdnZXIoZSx7aXRlbTp0WzBdfSl9LF91cGRhdGVTZWxlY3RlZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5lbGVtZW50LGk9ZS5wYXJlbnQoeSkscj10Ll9zZWxlY3RlZDtyJiZyLnJlbW92ZUF0dHIoWSksdC5fc2VsZWN0ZWQ9aS5hdHRyKFksITApLG4uZmluZChXKS5yZW1vdmVDbGFzcyhMKSxuLmZpbmQoXCI+IC5cIitIK1wiLCAuay1wYW5lbCA+IC5cIitIKS5yZW1vdmVDbGFzcyhIKSxlLmFkZENsYXNzKEwpLGUucGFyZW50c1VudGlsKG4seSkuZmlsdGVyKFwiOmhhcyguay1oZWFkZXIpXCIpLmFkZENsYXNzKEgpLHQuX2N1cnJlbnQoaVswXT9pOm51bGwpfSxfYW5pbWF0aW9uczpmdW5jdGlvbihlKXtlJiZcImFuaW1hdGlvblwiaW4gZSYmIWUuYW5pbWF0aW9uJiYoZS5hbmltYXRpb249e2V4cGFuZDp7ZWZmZWN0czp7fX0sY29sbGFwc2U6e2hpZGU6ITAsZWZmZWN0czp7fX19KX19KTtzKGV0LHtyZW5kZXJJdGVtOmZ1bmN0aW9uKGUpe2U9cyh7cGFuZWxCYXI6e30sZ3JvdXA6e319LGUpO3ZhciB0PUouZW1wdHksbj1lLml0ZW07cmV0dXJuIEouaXRlbShzKGUse2ltYWdlOm4uaW1hZ2VVcmw/Si5pbWFnZTp0LHNwcml0ZTpuLnNwcml0ZUNzc0NsYXNzP0ouc3ByaXRlOnQsaXRlbVdyYXBwZXI6Si5pdGVtV3JhcHBlcixyZW5kZXJDb250ZW50OmV0LnJlbmRlckNvbnRlbnQsYXJyb3c6bi5pdGVtc3x8bi5jb250ZW50fHxuLmNvbnRlbnRVcmw/Si5hcnJvdzp0LHN1Ykdyb3VwOmV0LnJlbmRlckdyb3VwfSxaKSl9LHJlbmRlckdyb3VwOmZ1bmN0aW9uKGUpe3JldHVybiBKLmdyb3VwKHMoe3JlbmRlckl0ZW1zOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1cIlwiLG49MCxpPWUuaXRlbXMscj1pP2kubGVuZ3RoOjAsbz1zKHtsZW5ndGg6cn0sZS5ncm91cCk7cj5uO24rKyl0Kz1ldC5yZW5kZXJJdGVtKHMoZSx7Z3JvdXA6byxpdGVtOnMoe2luZGV4Om59LGlbbl0pfSkpO3JldHVybiB0fX0sZSxaKSl9LHJlbmRlckNvbnRlbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIEouY29udGVudChzKGUsWikpfX0pLHIudWkucGx1Z2luKGV0KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXt2YXIgbj13aW5kb3cua2VuZG8saT1uLnVpLHI9aS5XaWRnZXQsbz1cImhvcml6b250YWxcIixhPVwidmVydGljYWxcIixzPTAsbD0xMDAsYz0wLGQ9NSx1PVwiay1wcm9ncmVzc2JhclwiLGg9XCJrLXByb2dyZXNzYmFyLXJldmVyc2VcIixwPVwiay1wcm9ncmVzc2Jhci1pbmRldGVybWluYXRlXCIsZj1cImstY29tcGxldGVcIixnPVwiay1zdGF0ZS1zZWxlY3RlZFwiLG09XCJrLXByb2dyZXNzLXN0YXR1c1wiLHY9XCJrLXN0YXRlLXNlbGVjdGVkXCIsXz1cImstc3RhdGUtZGVmYXVsdFwiLHk9XCJrLXN0YXRlLWRpc2FibGVkXCIsdz17VkFMVUU6XCJ2YWx1ZVwiLFBFUkNFTlQ6XCJwZXJjZW50XCIsQ0hVTks6XCJjaHVua1wifSxiPVwiY2hhbmdlXCIsaz1cImNvbXBsZXRlXCIseD1cImJvb2xlYW5cIixDPU1hdGgsUz1lLmV4dGVuZCxUPWUucHJveHksRD0xMDAsQT00MDAsRT0zLE09e3Byb2dyZXNzU3RhdHVzOlwiPHNwYW4gY2xhc3M9J2stcHJvZ3Jlc3Mtc3RhdHVzLXdyYXAnPjxzcGFuIGNsYXNzPSdrLXByb2dyZXNzLXN0YXR1cyc+PC9zcGFuPjwvc3Bhbj5cIn0sUD1yLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7ci5mbi5pbml0LmNhbGwodGhpcyxlLHQpLHQ9bi5vcHRpb25zLG4uX3Byb2dyZXNzUHJvcGVydHk9dC5vcmllbnRhdGlvbj09PW8/XCJ3aWR0aFwiOlwiaGVpZ2h0XCIsbi5fZmllbGRzKCksdC52YWx1ZT1uLl92YWxpZGF0ZVZhbHVlKHQudmFsdWUpLG4uX3ZhbGlkYXRlVHlwZSh0LnR5cGUpLG4uX3dyYXBwZXIoKSxuLl9wcm9ncmVzc0FuaW1hdGlvbigpLHQudmFsdWUhPT10Lm1pbiYmdC52YWx1ZSE9PSExJiZuLl91cGRhdGVQcm9ncmVzcygpfSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ci5mbi5zZXRPcHRpb25zLmNhbGwodCxlKSxlLmhhc093blByb3BlcnR5KFwicmV2ZXJzZVwiKSYmdC53cmFwcGVyLnRvZ2dsZUNsYXNzKFwiay1wcm9ncmVzc2Jhci1yZXZlcnNlXCIsZS5yZXZlcnNlKSxlLmhhc093blByb3BlcnR5KFwiZW5hYmxlXCIpJiZ0LmVuYWJsZShlLmVuYWJsZSksdC5fcHJvZ3Jlc3NBbmltYXRpb24oKSx0Ll92YWxpZGF0ZVZhbHVlKCksdC5fdXBkYXRlUHJvZ3Jlc3MoKX0sZXZlbnRzOltiLGtdLG9wdGlvbnM6e25hbWU6XCJQcm9ncmVzc0JhclwiLG9yaWVudGF0aW9uOm8scmV2ZXJzZTohMSxtaW46cyxtYXg6bCx2YWx1ZTpjLGVuYWJsZTohMCx0eXBlOncuVkFMVUUsY2h1bmtDb3VudDpkLHNob3dTdGF0dXM6ITAsYW5pbWF0aW9uOnt9fSxfZmllbGRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0Ll9pc1N0YXJ0ZWQ9ITEsdC5wcm9ncmVzc1dyYXBwZXI9dC5wcm9ncmVzc1N0YXR1cz1lKCl9LF92YWxpZGF0ZVR5cGU6ZnVuY3Rpb24oaSl7dmFyIHI9ITE7aWYoZS5lYWNoKHcsZnVuY3Rpb24oZSxuKXtyZXR1cm4gbj09PWk/KHI9ITAsITEpOnR9KSwhcil0aHJvdyBFcnJvcihuLmZvcm1hdChcIkludmFsaWQgUHJvZ3Jlc3NCYXIgdHlwZSAnezB9J1wiLGkpKX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10LndyYXBwZXI9dC5lbGVtZW50LGk9dC5vcHRpb25zLHI9aS5vcmllbnRhdGlvbjtuLmFkZENsYXNzKFwiay13aWRnZXQgXCIrdSksbi5hZGRDbGFzcyh1K1wiLVwiKyhyPT09bz9vOmEpKSxpLmVuYWJsZT09PSExJiZuLmFkZENsYXNzKHkpLGkucmV2ZXJzZSYmbi5hZGRDbGFzcyhoKSxpLnZhbHVlPT09ITEmJm4uYWRkQ2xhc3MocCksaS50eXBlPT09dy5DSFVOSz90Ll9hZGRDaHVua1Byb2dyZXNzV3JhcHBlcigpOmkuc2hvd1N0YXR1cyYmKHQucHJvZ3Jlc3NTdGF0dXM9dC53cmFwcGVyLnByZXBlbmQoTS5wcm9ncmVzc1N0YXR1cykuZmluZChcIi5cIittKSxlPWkudmFsdWUhPT0hMT9pLnZhbHVlOmkubWluLHQucHJvZ3Jlc3NTdGF0dXMudGV4dChpLnR5cGU9PT13LlZBTFVFP2U6dC5fY2FsY3VsYXRlUGVyY2VudGFnZShlKStcIiVcIikpfSx2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fdmFsdWUoZSl9LF92YWx1ZTpmdW5jdGlvbihlKXt2YXIgbixpPXRoaXMscj1pLm9wdGlvbnM7cmV0dXJuIGU9PT10P3IudmFsdWU6KHR5cGVvZiBlIT09eD8oZT1pLl9yb3VuZFZhbHVlKGUpLGlzTmFOKGUpfHwobj1pLl92YWxpZGF0ZVZhbHVlKGUpLG4hPT1yLnZhbHVlJiYoaS53cmFwcGVyLnJlbW92ZUNsYXNzKHApLHIudmFsdWU9bixpLl9pc1N0YXJ0ZWQ9ITAsaS5fdXBkYXRlUHJvZ3Jlc3MoKSkpKTplfHwoaS53cmFwcGVyLmFkZENsYXNzKHApLHIudmFsdWU9ITEpLHQpfSxfcm91bmRWYWx1ZTpmdW5jdGlvbihlKXtlPXBhcnNlRmxvYXQoZSk7dmFyIHQ9Qy5wb3coMTAsRSk7cmV0dXJuIEMuZmxvb3IoZSp0KS90fSxfdmFsaWRhdGVWYWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zO2lmKGUhPT0hMSl7aWYobi5taW4+PWV8fGU9PT0hMClyZXR1cm4gbi5taW47aWYoZT49bi5tYXgpcmV0dXJuIG4ubWF4fWVsc2UgaWYoZT09PSExKXJldHVybiExO3JldHVybiBpc05hTih0Ll9yb3VuZFZhbHVlKGUpKT9uLm1pbjplfSxfdXBkYXRlUHJvZ3Jlc3M6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLG49ZS5fY2FsY3VsYXRlUGVyY2VudGFnZSgpO3QudHlwZT09PXcuQ0hVTks/KGUuX3VwZGF0ZUNodW5rcyhuKSxlLl9vblByb2dyZXNzVXBkYXRlQWx3YXlzKHQudmFsdWUpKTplLl91cGRhdGVQcm9ncmVzc1dyYXBwZXIobil9LF91cGRhdGVDaHVua3M6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLGk9bi5vcHRpb25zLHI9aS5jaHVua0NvdW50LHM9cGFyc2VJbnQoRC9yKjEwMCwxMCkvMTAwLGw9cGFyc2VJbnQoMTAwKmUsMTApLzEwMCxjPUMuZmxvb3IobC9zKTt0PW4ud3JhcHBlci5maW5kKGkub3JpZW50YXRpb249PT1vJiYhaS5yZXZlcnNlfHxpLm9yaWVudGF0aW9uPT09YSYmaS5yZXZlcnNlP1wibGkuay1pdGVtOmx0KFwiK2MrXCIpXCI6XCJsaS5rLWl0ZW06Z3QoLVwiKyhjKzEpK1wiKVwiKSxuLndyYXBwZXIuZmluZChcIi5cIit2KS5yZW1vdmVDbGFzcyh2KS5hZGRDbGFzcyhfKSx0LnJlbW92ZUNsYXNzKF8pLmFkZENsYXNzKHYpfSxfdXBkYXRlUHJvZ3Jlc3NXcmFwcGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMsaT10LndyYXBwZXIuZmluZChcIi5cIitnKSxyPXQuX2lzU3RhcnRlZD90Ll9hbmltYXRpb24uZHVyYXRpb246MCxvPXt9OzA9PT1pLmxlbmd0aCYmdC5fYWRkUmVndWxhclByb2dyZXNzV3JhcHBlcigpLG9bdC5fcHJvZ3Jlc3NQcm9wZXJ0eV09ZStcIiVcIix0LnByb2dyZXNzV3JhcHBlci5hbmltYXRlKG8se2R1cmF0aW9uOnIsc3RhcnQ6VCh0Ll9vblByb2dyZXNzQW5pbWF0ZVN0YXJ0LHQpLHByb2dyZXNzOlQodC5fb25Qcm9ncmVzc0FuaW1hdGUsdCksY29tcGxldGU6VCh0Ll9vblByb2dyZXNzQW5pbWF0ZUNvbXBsZXRlLHQsbi52YWx1ZSksYWx3YXlzOlQodC5fb25Qcm9ncmVzc1VwZGF0ZUFsd2F5cyx0LG4udmFsdWUpfSl9LF9vblByb2dyZXNzQW5pbWF0ZVN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5wcm9ncmVzc1dyYXBwZXIuc2hvdygpfSxfb25Qcm9ncmVzc0FuaW1hdGU6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLGk9bi5vcHRpb25zLHI9cGFyc2VGbG9hdChlLmVsZW0uc3R5bGVbbi5fcHJvZ3Jlc3NQcm9wZXJ0eV0sMTApO2kuc2hvd1N0YXR1cyYmKHQ9MWU0L3BhcnNlRmxvYXQobi5wcm9ncmVzc1dyYXBwZXJbMF0uc3R5bGVbbi5fcHJvZ3Jlc3NQcm9wZXJ0eV0pLG4ucHJvZ3Jlc3NXcmFwcGVyLmZpbmQoXCIuay1wcm9ncmVzcy1zdGF0dXMtd3JhcFwiKS5jc3Mobi5fcHJvZ3Jlc3NQcm9wZXJ0eSx0K1wiJVwiKSksaS50eXBlIT09dy5DSFVOSyYmOTg+PXImJm4ucHJvZ3Jlc3NXcmFwcGVyLnJlbW92ZUNsYXNzKGYpfSxfb25Qcm9ncmVzc0FuaW1hdGVDb21wbGV0ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLGk9cGFyc2VGbG9hdCh0LnByb2dyZXNzV3JhcHBlclswXS5zdHlsZVt0Ll9wcm9ncmVzc1Byb3BlcnR5XSk7bi50eXBlIT09dy5DSFVOSyYmaT45OCYmdC5wcm9ncmVzc1dyYXBwZXIuYWRkQ2xhc3MoZiksbi5zaG93U3RhdHVzJiZ0LnByb2dyZXNzU3RhdHVzLnRleHQobi50eXBlPT09dy5WQUxVRT9lOkMuZmxvb3IodC5fY2FsY3VsYXRlUGVyY2VudGFnZShlKSkrXCIlXCIpLGU9PT1uLm1pbiYmdC5wcm9ncmVzc1dyYXBwZXIuaGlkZSgpfSxfb25Qcm9ncmVzc1VwZGF0ZUFsd2F5czpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zO3QuX2lzU3RhcnRlZCYmdC50cmlnZ2VyKGIse3ZhbHVlOmV9KSxlPT09bi5tYXgmJnQuX2lzU3RhcnRlZCYmdC50cmlnZ2VyKGsse3ZhbHVlOm4ubWF4fSl9LGVuYWJsZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5vcHRpb25zO2kuZW5hYmxlPXQ9PT1lPyEwOmUsbi53cmFwcGVyLnRvZ2dsZUNsYXNzKHksIWkuZW5hYmxlKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ci5mbi5kZXN0cm95LmNhbGwoZSl9LF9hZGRDaHVua1Byb2dyZXNzV3JhcHBlcjpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQub3B0aW9ucyxpPXQud3JhcHBlcixyPUQvbi5jaHVua0NvdW50LG89XCJcIjtmb3IoMT49bi5jaHVua0NvdW50JiYobi5jaHVua0NvdW50PWQpLG8rPVwiPHVsIGNsYXNzPSdrLXJlc2V0Jz5cIixlPW4uY2h1bmtDb3VudC0xO2U+PTA7ZS0tKW8rPVwiPGxpIGNsYXNzPSdrLWl0ZW0gay1zdGF0ZS1kZWZhdWx0Jz48L2xpPlwiO28rPVwiPC91bD5cIixpLmFwcGVuZChvKS5maW5kKFwiLmstaXRlbVwiKS5jc3ModC5fcHJvZ3Jlc3NQcm9wZXJ0eSxyK1wiJVwiKS5maXJzdCgpLmFkZENsYXNzKFwiay1maXJzdFwiKS5lbmQoKS5sYXN0KCkuYWRkQ2xhc3MoXCJrLWxhc3RcIiksdC5fbm9ybWFsaXplQ2h1bmtTaXplKCl9LF9ub3JtYWxpemVDaHVua1NpemU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLG49ZS53cmFwcGVyLmZpbmQoXCIuay1pdGVtOmxhc3RcIiksaT1wYXJzZUZsb2F0KG5bMF0uc3R5bGVbZS5fcHJvZ3Jlc3NQcm9wZXJ0eV0pLHI9RC10LmNodW5rQ291bnQqaTtyPjAmJm4uY3NzKGUuX3Byb2dyZXNzUHJvcGVydHksaStyK1wiJVwiKX0sX2FkZFJlZ3VsYXJQcm9ncmVzc1dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QucHJvZ3Jlc3NXcmFwcGVyPWUoXCI8ZGl2IGNsYXNzPSdcIitnK1wiJz48L2Rpdj5cIikuYXBwZW5kVG8odC53cmFwcGVyKSx0Lm9wdGlvbnMuc2hvd1N0YXR1cyYmKHQucHJvZ3Jlc3NXcmFwcGVyLmFwcGVuZChNLnByb2dyZXNzU3RhdHVzKSx0LnByb2dyZXNzU3RhdHVzPXQud3JhcHBlci5maW5kKFwiLlwiK20pKX0sX2NhbGN1bGF0ZUNodW5rU2l6ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm9wdGlvbnMuY2h1bmtDb3VudCxuPWUud3JhcHBlci5maW5kKFwidWwuay1yZXNldFwiKTtyZXR1cm4ocGFyc2VJbnQobi5jc3MoZS5fcHJvZ3Jlc3NQcm9wZXJ0eSksMTApLSh0LTEpKS90fSxfY2FsY3VsYXRlUGVyY2VudGFnZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5vcHRpb25zLHI9ZSE9PXQ/ZTppLnZhbHVlLG89aS5taW4sYT1pLm1heDtyZXR1cm4gbi5fb25lUGVyY2VudD1DLmFicygoYS1vKS8xMDApLEMuYWJzKChyLW8pL24uX29uZVBlcmNlbnQpfSxfcHJvZ3Jlc3NBbmltYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLG49dC5hbmltYXRpb247ZS5fYW5pbWF0aW9uPW49PT0hMT97ZHVyYXRpb246MH06Uyh7ZHVyYXRpb246QX0sdC5hbmltYXRpb24pfX0pO24udWkucGx1Z2luKFApfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4odCl7dC5jaGlsZHJlbihnKS5hZGRDbGFzcyhDKSx0LmNoaWxkcmVuKFwiYVwiKS5hZGRDbGFzcyh5KS5jaGlsZHJlbihnKS5hZGRDbGFzcyhDKSx0LmZpbHRlcihcIjpub3QoW2Rpc2FibGVkXSk6bm90KFtjbGFzcyo9ay1zdGF0ZS1kaXNhYmxlZF0pXCIpLmFkZENsYXNzKEYpLHQuZmlsdGVyKFwibGlbZGlzYWJsZWRdXCIpLmFkZENsYXNzKHopLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKSx0LmZpbHRlcihcIjpub3QoW2NsYXNzKj1rLXN0YXRlXSlcIikuY2hpbGRyZW4oXCJhXCIpLmZpbHRlcihcIjpmb2N1c1wiKS5wYXJlbnQoKS5hZGRDbGFzcyhSK1wiIFwiK08pLHQuYXR0cihcInJvbGVcIixcInRhYlwiKSx0LmZpbHRlcihcIi5cIitSKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKSx0LmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpO3QuY2hpbGRyZW4oXCIuXCIreSkubGVuZ3RofHx0LmNvbnRlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuISh0aGlzLm5vZGVOYW1lLm1hdGNoKHApfHwzPT10aGlzLm5vZGVUeXBlJiYhYyh0aGlzLm5vZGVWYWx1ZSkpfSkud3JhcEFsbChcIjxhIGNsYXNzPSdcIit5K1wiJy8+XCIpfSl9ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmNoaWxkcmVuKFwiLmstaXRlbVwiKTt0LmZpbHRlcihcIi5rLWZpcnN0Om5vdCg6Zmlyc3QtY2hpbGQpXCIpLnJlbW92ZUNsYXNzKFMpLHQuZmlsdGVyKFwiLmstbGFzdDpub3QoOmxhc3QtY2hpbGQpXCIpLnJlbW92ZUNsYXNzKHcpLHQuZmlsdGVyKFwiOmZpcnN0LWNoaWxkXCIpLmFkZENsYXNzKFMpLHQuZmlsdGVyKFwiOmxhc3QtY2hpbGRcIikuYWRkQ2xhc3Modyl9dmFyIHI9d2luZG93LmtlbmRvLG89ci51aSxhPXIua2V5cyxzPWUubWFwLGw9ZS5lYWNoLGM9ZS50cmltLGQ9ZS5leHRlbmQsdT1yLnRlbXBsYXRlLGg9by5XaWRnZXQscD0vXihhfGRpdikkL2ksZj1cIi5rZW5kb1RhYlN0cmlwXCIsZz1cImltZ1wiLG09XCJocmVmXCIsdj1cInByZXZcIixfPVwic2hvd1wiLHk9XCJrLWxpbmtcIix3PVwiay1sYXN0XCIsYj1cImNsaWNrXCIsaz1cImVycm9yXCIseD1cIjplbXB0eVwiLEM9XCJrLWltYWdlXCIsUz1cImstZmlyc3RcIixUPVwic2VsZWN0XCIsRD1cImFjdGl2YXRlXCIsQT1cImstY29udGVudFwiLEU9XCJjb250ZW50VXJsXCIsTT1cIm1vdXNlZW50ZXJcIixQPVwibW91c2VsZWF2ZVwiLEk9XCJjb250ZW50TG9hZFwiLHo9XCJrLXN0YXRlLWRpc2FibGVkXCIsRj1cImstc3RhdGUtZGVmYXVsdFwiLFI9XCJrLXN0YXRlLWFjdGl2ZVwiLEI9XCJrLXN0YXRlLWZvY3VzZWRcIixMPVwiay1zdGF0ZS1ob3ZlclwiLE89XCJrLXRhYi1vbi10b3BcIixIPVwiLmstaXRlbTpub3QoLlwiK3orXCIpXCIsTj1cIi5rLXRhYnN0cmlwLWl0ZW1zID4gXCIrSCtcIjpub3QoLlwiK1IrXCIpXCIsVj17Y29udGVudDp1KFwiPGRpdiBjbGFzcz0nay1jb250ZW50JyM9IGNvbnRlbnRBdHRyaWJ1dGVzKGRhdGEpICMgcm9sZT0ndGFicGFuZWwnPiM9IGNvbnRlbnQoaXRlbSkgIzwvZGl2PlwiKSxpdGVtV3JhcHBlcjp1KFwiPCM9IHRhZyhpdGVtKSAjIGNsYXNzPSdrLWxpbmsnIz0gY29udGVudFVybChpdGVtKSAjIz0gdGV4dEF0dHJpYnV0ZXMoaXRlbSkgIz4jPSBpbWFnZShpdGVtKSAjIz0gc3ByaXRlKGl0ZW0pICMjPSB0ZXh0KGl0ZW0pICM8LyM9IHRhZyhpdGVtKSAjPlwiKSxpdGVtOnUoXCI8bGkgY2xhc3M9JyM9IHdyYXBwZXJDc3NDbGFzcyhncm91cCwgaXRlbSkgIycgcm9sZT0ndGFiJyAjPWl0ZW0uYWN0aXZlID8gXFxcImFyaWEtc2VsZWN0ZWQ9J3RydWUnXFxcIiA6ICcnIz4jPSBpdGVtV3JhcHBlcihkYXRhKSAjPC9saT5cIiksaW1hZ2U6dShcIjxpbWcgY2xhc3M9J2staW1hZ2UnIGFsdD0nJyBzcmM9JyM9IGltYWdlVXJsICMnIC8+XCIpLHNwcml0ZTp1KFwiPHNwYW4gY2xhc3M9J2stc3ByaXRlICM9IHNwcml0ZUNzc0NsYXNzICMnPjwvc3Bhbj5cIiksZW1wdHk6dShcIlwiKX0sVT17d3JhcHBlckNzc0NsYXNzOmZ1bmN0aW9uKGUsdCl7dmFyIG49XCJrLWl0ZW1cIixpPXQuaW5kZXg7cmV0dXJuIG4rPXQuZW5hYmxlZD09PSExP1wiIGstc3RhdGUtZGlzYWJsZWRcIjpcIiBrLXN0YXRlLWRlZmF1bHRcIiwwPT09aSYmKG4rPVwiIGstZmlyc3RcIiksaT09ZS5sZW5ndGgtMSYmKG4rPVwiIGstbGFzdFwiKSxufSx0ZXh0QXR0cmlidXRlczpmdW5jdGlvbihlKXtyZXR1cm4gZS51cmw/XCIgaHJlZj0nXCIrZS51cmwrXCInXCI6XCJcIn0sdGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gZS5lbmNvZGVkPT09ITE/ZS50ZXh0OnIuaHRtbEVuY29kZShlLnRleHQpfSx0YWc6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudXJsP1wiYVwiOlwic3BhblwifSxjb250ZW50QXR0cmlidXRlczpmdW5jdGlvbihlKXtyZXR1cm4gZS5hY3RpdmUhPT0hMD9cIiBzdHlsZT0nZGlzcGxheTpub25lJyBhcmlhLWhpZGRlbj0ndHJ1ZScgYXJpYS1leHBhbmRlZD0nZmFsc2UnXCI6XCJcIn0sY29udGVudDpmdW5jdGlvbihlKXtyZXR1cm4gZS5jb250ZW50P2UuY29udGVudDplLmNvbnRlbnRVcmw/XCJcIjpcIiZuYnNwO1wifSxjb250ZW50VXJsOmZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnRlbnRVcmw/ci5hdHRyKFwiY29udGVudC11cmxcIikrJz1cIicrZS5jb250ZW50VXJsKydcIic6XCJcIn19LFc9aC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxvLGE9dGhpcztoLmZuLmluaXQuY2FsbChhLHQsbiksYS5fYW5pbWF0aW9ucyhhLm9wdGlvbnMpLG49YS5vcHRpb25zLGEuX3dyYXBwZXIoKSxhLl9pc1J0bD1yLnN1cHBvcnQuaXNSdGwoYS53cmFwcGVyKSxhLl90YWJpbmRleCgpLGEuX3VwZGF0ZUNsYXNzZXMoKSxhLl9kYXRhU291cmNlKCksbi5kYXRhU291cmNlJiZhLmRhdGFTb3VyY2UuZmV0Y2goKSxhLm9wdGlvbnMuY29udGVudFVybHMmJmEud3JhcHBlci5maW5kKFwiLmstdGFic3RyaXAtaXRlbXMgPiAuay1pdGVtXCIpLmVhY2goZnVuY3Rpb24odCxuKXtlKG4pLmZpbmQoXCI+LlwiK3kpLmRhdGEoRSxhLm9wdGlvbnMuY29udGVudFVybHNbdF0pfSksYS53cmFwcGVyLm9uKE0rZitcIiBcIitQK2YsTixhLl90b2dnbGVIb3Zlcikub24oXCJmb2N1c1wiK2YsZS5wcm94eShhLl9hY3RpdmUsYSkpLm9uKFwiYmx1clwiK2YsZnVuY3Rpb24oKXthLl9jdXJyZW50KG51bGwpfSksYS5fa2V5RG93blByb3h5PWUucHJveHkoYS5fa2V5ZG93bixhKSxuLm5hdmlnYXRhYmxlJiZhLndyYXBwZXIub24oXCJrZXlkb3duXCIrZixhLl9rZXlEb3duUHJveHkpLGEud3JhcHBlci5jaGlsZHJlbihcIi5rLXRhYnN0cmlwLWl0ZW1zXCIpLm9uKGIrZixcIi5rLXN0YXRlLWRpc2FibGVkIC5rLWxpbmtcIiwhMSkub24oYitmLFwiID4gXCIrSCxmdW5jdGlvbih0KXt2YXIgbixpPWEud3JhcHBlclswXTtpZihpIT09ZG9jdW1lbnQuYWN0aXZlRWxlbWVudClpZihuPXIuc3VwcG9ydC5icm93c2VyLm1zaWUpdHJ5e2kuc2V0QWN0aXZlKCl9Y2F0Y2gobyl7aS5mb2N1cygpfWVsc2UgaS5mb2N1cygpO2EuX2NsaWNrKGUodC5jdXJyZW50VGFyZ2V0KSkmJnQucHJldmVudERlZmF1bHQoKX0pLGk9YS50YWJHcm91cC5jaGlsZHJlbihcImxpLlwiK1IpLG89YS5jb250ZW50SG9sZGVyKGkuaW5kZXgoKSksaVswXSYmby5sZW5ndGg+MCYmMD09PW9bMF0uY2hpbGROb2Rlcy5sZW5ndGgmJmEuYWN0aXZhdGVUYWIoaS5lcSgwKSksYS5lbGVtZW50LmF0dHIoXCJyb2xlXCIsXCJ0YWJsaXN0XCIpLGEuZWxlbWVudFswXS5pZCYmKGEuX2FyaWFJZD1hLmVsZW1lbnRbMF0uaWQrXCJfdHNfYWN0aXZlXCIpLHIubm90aWZ5KGEpfSxfYWN0aXZlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50YWJHcm91cC5jaGlsZHJlbigpLmZpbHRlcihcIi5cIitSKTtlPWVbMF0/ZTp0aGlzLl9lbmRJdGVtKFwiZmlyc3RcIiksZVswXSYmdGhpcy5fY3VycmVudChlKX0sX2VuZEl0ZW06ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGFiR3JvdXAuY2hpbGRyZW4oSClbZV0oKX0sX2l0ZW06ZnVuY3Rpb24oZSx0KXt2YXIgbjtyZXR1cm4gbj10PT09dj9cImxhc3RcIjpcImZpcnN0XCIsZT8oZT1lW3RdKCksZVswXXx8KGU9dGhpcy5fZW5kSXRlbShuKSksZS5oYXNDbGFzcyh6KSYmKGU9dGhpcy5faXRlbShlLHQpKSxlKTp0aGlzLl9lbmRJdGVtKG4pfSxfY3VycmVudDpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5fZm9jdXNlZCxyPW4uX2FyaWFJZDtyZXR1cm4gZT09PXQ/aTooaSYmKGlbMF0uaWQ9PT1yJiZpLnJlbW92ZUF0dHIoXCJpZFwiKSxpLnJlbW92ZUNsYXNzKEIpKSxlJiYoZS5oYXNDbGFzcyhSKXx8ZS5hZGRDbGFzcyhCKSxuLmVsZW1lbnQucmVtb3ZlQXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKSxyPWVbMF0uaWR8fHIsciYmKGUuYXR0cihcImlkXCIsciksbi5lbGVtZW50LmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixyKSkpLG4uX2ZvY3VzZWQ9ZSx0KX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLHI9ZS5rZXlDb2RlLG89aS5fY3VycmVudCgpLHM9aS5faXNSdGw7aWYoZS50YXJnZXQ9PWUuY3VycmVudFRhcmdldCl7aWYocj09YS5ET1dOfHxyPT1hLlJJR0hUKW49cz92OlwibmV4dFwiO2Vsc2UgaWYocj09YS5VUHx8cj09YS5MRUZUKW49cz9cIm5leHRcIjp2O2Vsc2UgaWYocj09YS5FTlRFUnx8cj09YS5TUEFDRUJBUilpLl9jbGljayhvKSxlLnByZXZlbnREZWZhdWx0KCk7ZWxzZXtpZihyPT1hLkhPTUUpcmV0dXJuIGkuX2NsaWNrKGkuX2VuZEl0ZW0oXCJmaXJzdFwiKSksZS5wcmV2ZW50RGVmYXVsdCgpLHQ7aWYocj09YS5FTkQpcmV0dXJuIGkuX2NsaWNrKGkuX2VuZEl0ZW0oXCJsYXN0XCIpKSxlLnByZXZlbnREZWZhdWx0KCksdH1uJiYoaS5fY2xpY2soaS5faXRlbShvLG4pKSxlLnByZXZlbnREZWZhdWx0KCkpfX0sX2RhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QuZGF0YVNvdXJjZSYmdC5fcmVmcmVzaEhhbmRsZXI/dC5kYXRhU291cmNlLnVuYmluZChcImNoYW5nZVwiLHQuX3JlZnJlc2hIYW5kbGVyKTp0Ll9yZWZyZXNoSGFuZGxlcj1lLnByb3h5KHQucmVmcmVzaCx0KSx0LmRhdGFTb3VyY2U9ci5kYXRhLkRhdGFTb3VyY2UuY3JlYXRlKHQub3B0aW9ucy5kYXRhU291cmNlKS5iaW5kKFwiY2hhbmdlXCIsdC5fcmVmcmVzaEhhbmRsZXIpfSxzZXREYXRhU291cmNlOmZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucy5kYXRhU291cmNlPWUsdGhpcy5fZGF0YVNvdXJjZSgpLGUuZmV0Y2goKX0sX2FuaW1hdGlvbnM6ZnVuY3Rpb24oZSl7ZSYmXCJhbmltYXRpb25cImluIGUmJiFlLmFuaW1hdGlvbiYmKGUuYW5pbWF0aW9uPXtvcGVuOntlZmZlY3RzOnt9fSxjbG9zZTp7ZWZmZWN0czp7fX19KX0scmVmcmVzaDpmdW5jdGlvbihlKXt2YXIgdCxuLGksbyxhPXRoaXMscz1hLm9wdGlvbnMsbD1yLmdldHRlcihzLmRhdGFUZXh0RmllbGQpLGM9ci5nZXR0ZXIocy5kYXRhQ29udGVudEZpZWxkKSxkPXIuZ2V0dGVyKHMuZGF0YUNvbnRlbnRVcmxGaWVsZCksdT1yLmdldHRlcihzLmRhdGFJbWFnZVVybEZpZWxkKSxoPXIuZ2V0dGVyKHMuZGF0YVVybEZpZWxkKSxwPXIuZ2V0dGVyKHMuZGF0YVNwcml0ZUNzc0NsYXNzKSxmPVtdLGc9YS5kYXRhU291cmNlLnZpZXcoKTtmb3IoZT1lfHx7fSxpPWUuYWN0aW9uLGkmJihnPWUuaXRlbXMpLHQ9MCxvPWcubGVuZ3RoO28+dDt0Kyspbj17dGV4dDpsKGdbdF0pfSxzLmRhdGFDb250ZW50RmllbGQmJihuLmNvbnRlbnQ9YyhnW3RdKSkscy5kYXRhQ29udGVudFVybEZpZWxkJiYobi5jb250ZW50VXJsPWQoZ1t0XSkpLHMuZGF0YVVybEZpZWxkJiYobi51cmw9aChnW3RdKSkscy5kYXRhSW1hZ2VVcmxGaWVsZCYmKG4uaW1hZ2VVcmw9dShnW3RdKSkscy5kYXRhU3ByaXRlQ3NzQ2xhc3MmJihuLnNwcml0ZUNzc0NsYXNzPXAoZ1t0XSkpLGZbdF09bjtpZihcImFkZFwiPT1lLmFjdGlvbillLmluZGV4PGEudGFiR3JvdXAuY2hpbGRyZW4oKS5sZW5ndGg/YS5pbnNlcnRCZWZvcmUoZixhLnRhYkdyb3VwLmNoaWxkcmVuKCkuZXEoZS5pbmRleCkpOmEuYXBwZW5kKGYpO2Vsc2UgaWYoXCJyZW1vdmVcIj09ZS5hY3Rpb24pZm9yKHQ9MDtnLmxlbmd0aD50O3QrKylhLnJlbW92ZShlLmluZGV4KTtlbHNlXCJpdGVtY2hhbmdlXCI9PWUuYWN0aW9uPyh0PWEuZGF0YVNvdXJjZS52aWV3KCkuaW5kZXhPZihnWzBdKSxlLmZpZWxkPT09cy5kYXRhVGV4dEZpZWxkJiZhLnRhYkdyb3VwLmNoaWxkcmVuKCkuZXEodCkuZmluZChcIi5rLWxpbmtcIikudGV4dChnWzBdLmdldChlLmZpZWxkKSkpOihhLnRyaWdnZXIoXCJkYXRhQmluZGluZ1wiKSxhLnJlbW92ZShcImxpXCIpLGEuYXBwZW5kKGYpLGEudHJpZ2dlcihcImRhdGFCb3VuZFwiKSl9LHZhbHVlOmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXM7cmV0dXJuIG49PT10P2kuc2VsZWN0KCkudGV4dCgpOihuIT1pLnZhbHVlKCkmJmkudGFiR3JvdXAuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCl7ZS50cmltKGUodGhpcykudGV4dCgpKT09biYmaS5zZWxlY3QodGhpcyl9KSx0KX0saXRlbXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50YWJHcm91cFswXS5jaGlsZHJlbn0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLmFuaW1hdGlvbjt0Ll9hbmltYXRpb25zKGUpLGUuYW5pbWF0aW9uPWQoITAsbixlLmFuaW1hdGlvbiksZS5uYXZpZ2F0YWJsZT90LndyYXBwZXIub24oXCJrZXlkb3duXCIrZix0Ll9rZXlEb3duUHJveHkpOnQud3JhcHBlci5vZmYoXCJrZXlkb3duXCIrZix0Ll9rZXlEb3duUHJveHkpLGguZm4uc2V0T3B0aW9ucy5jYWxsKHQsZSl9LGV2ZW50czpbVCxELF8sayxJLFwiY2hhbmdlXCIsXCJkYXRhQmluZGluZ1wiLFwiZGF0YUJvdW5kXCJdLG9wdGlvbnM6e25hbWU6XCJUYWJTdHJpcFwiLGRhdGFUZXh0RmllbGQ6XCJcIixkYXRhQ29udGVudEZpZWxkOlwiXCIsZGF0YUltYWdlVXJsRmllbGQ6XCJcIixkYXRhVXJsRmllbGQ6XCJcIixkYXRhU3ByaXRlQ3NzQ2xhc3M6XCJcIixkYXRhQ29udGVudFVybEZpZWxkOlwiXCIsYW5pbWF0aW9uOntvcGVuOntlZmZlY3RzOlwiZXhwYW5kOnZlcnRpY2FsIGZhZGVJblwiLGR1cmF0aW9uOjIwMH0sY2xvc2U6e2R1cmF0aW9uOjIwMH19LGNvbGxhcHNpYmxlOiExLG5hdmlnYXRhYmxlOiEwLGNvbnRlbnRVcmxzOiExfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztoLmZuLmRlc3Ryb3kuY2FsbChlKSxlLl9yZWZyZXNoSGFuZGxlciYmZS5kYXRhU291cmNlLnVuYmluZChcImNoYW5nZVwiLGUuX3JlZnJlc2hIYW5kbGVyKSxlLndyYXBwZXIub2ZmKGYpLGUud3JhcHBlci5jaGlsZHJlbihcIi5rLXRhYnN0cmlwLWl0ZW1zXCIpLm9mZihmKSxlLnNjcm9sbFdyYXAuY2hpbGRyZW4oXCIuay10YWJzdHJpcFwiKS51bndyYXAoKSxyLmRlc3Ryb3koZS53cmFwcGVyKX0sc2VsZWN0OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7cmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoP24udGFiR3JvdXAuY2hpbGRyZW4oXCJsaS5cIitSKTooaXNOYU4odCl8fCh0PW4udGFiR3JvdXAuY2hpbGRyZW4oKS5nZXQodCkpLHQ9bi50YWJHcm91cC5maW5kKHQpLGUodCkuZWFjaChmdW5jdGlvbih0LGkpe2k9ZShpKSxpLmhhc0NsYXNzKFIpfHxuLnRyaWdnZXIoVCx7aXRlbTppWzBdLGNvbnRlbnRFbGVtZW50Om4uY29udGVudEhvbGRlcihpLmluZGV4KCkpWzBdfSl8fG4uYWN0aXZhdGVUYWIoaSl9KSxuKX0sZW5hYmxlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX3RvZ2dsZURpc2FibGVkKGUsdCE9PSExKSx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl90b2dnbGVEaXNhYmxlZChlLCExKSx0aGlzfSxyZWxvYWQ6ZnVuY3Rpb24odCl7dD10aGlzLnRhYkdyb3VwLmZpbmQodCk7dmFyIG49dGhpcztyZXR1cm4gdC5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKSxpPXQuZmluZChcIi5cIit5KS5kYXRhKEUpLHI9bi5jb250ZW50SG9sZGVyKHQuaW5kZXgoKSk7aSYmbi5hamF4UmVxdWVzdCh0LHIsbnVsbCxpKX0pLG59LGFwcGVuZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5fY3JlYXRlKGUpO3JldHVybiBsKG4udGFicyxmdW5jdGlvbihlKXt0LnRhYkdyb3VwLmFwcGVuZCh0aGlzKSx0LndyYXBwZXIuYXBwZW5kKG4uY29udGVudHNbZV0pfSksaSh0LnRhYkdyb3VwKSx0Ll91cGRhdGVDb250ZW50RWxlbWVudHMoKSx0fSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24odCxuKXtuPXRoaXMudGFiR3JvdXAuZmluZChuKTt2YXIgcj10aGlzLG89ci5fY3JlYXRlKHQpLGE9ZShyLmNvbnRlbnRFbGVtZW50KG4uaW5kZXgoKSkpO3JldHVybiBsKG8udGFicyxmdW5jdGlvbihlKXtuLmJlZm9yZSh0aGlzKSxhLmJlZm9yZShvLmNvbnRlbnRzW2VdKX0pLGkoci50YWJHcm91cCksci5fdXBkYXRlQ29udGVudEVsZW1lbnRzKCkscn0saW5zZXJ0QWZ0ZXI6ZnVuY3Rpb24odCxuKXtuPXRoaXMudGFiR3JvdXAuZmluZChuKTt2YXIgcj10aGlzLG89ci5fY3JlYXRlKHQpLGE9ZShyLmNvbnRlbnRFbGVtZW50KG4uaW5kZXgoKSkpO3JldHVybiBsKG8udGFicyxmdW5jdGlvbihlKXtuLmFmdGVyKHRoaXMpLGEuYWZ0ZXIoby5jb250ZW50c1tlXSl9KSxpKHIudGFiR3JvdXApLHIuX3VwZGF0ZUNvbnRlbnRFbGVtZW50cygpLHJ9LHJlbW92ZTpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXMsbz10eXBlb2YgdDtyZXR1cm5cInN0cmluZ1wiPT09bz90PWkudGFiR3JvdXAuZmluZCh0KTpcIm51bWJlclwiPT09byYmKHQ9aS50YWJHcm91cC5jaGlsZHJlbigpLmVxKHQpKSxuPXQubWFwKGZ1bmN0aW9uKCl7dmFyIHQ9aS5jb250ZW50RWxlbWVudChlKHRoaXMpLmluZGV4KCkpO3JldHVybiByLmRlc3Ryb3kodCksdH0pLHQucmVtb3ZlKCksbi5yZW1vdmUoKSxpLl91cGRhdGVDb250ZW50RWxlbWVudHMoKSxpfSxfY3JlYXRlOmZ1bmN0aW9uKGkpe3ZhciByLG8sYSxsPWUuaXNQbGFpbk9iamVjdChpKSxjPXRoaXM7cmV0dXJuIGx8fGUuaXNBcnJheShpKT8oaT1lLmlzQXJyYXkoaSk/aTpbaV0scj1zKGksZnVuY3Rpb24odCxuKXtyZXR1cm4gZShXLnJlbmRlckl0ZW0oe2dyb3VwOmMudGFiR3JvdXAsaXRlbTpkKHQse2luZGV4Om59KX0pKX0pLG89cyhpLGZ1bmN0aW9uKG4saSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIG4uY29udGVudHx8bi5jb250ZW50VXJsP2UoVy5yZW5kZXJDb250ZW50KHtpdGVtOmQobix7aW5kZXg6aX0pfSkpOnR9KSk6KHI9XCJzdHJpbmdcIj09dHlwZW9mIGkmJlwiPFwiIT1pWzBdP2MuZWxlbWVudC5maW5kKGkpOmUoaSksbz1lKCksci5lYWNoKGZ1bmN0aW9uKCl7aWYoYT1lKFwiPGRpdiBjbGFzcz0nXCIrQStcIicvPlwiKSwvay10YWJzdHJpcC1pdGVtcy8udGVzdCh0aGlzLnBhcmVudE5vZGUuY2xhc3NOYW1lKSl7dmFyIHQ9cGFyc2VJbnQodGhpcy5nZXRBdHRyaWJ1dGUoXCJhcmlhLWNvbnRyb2xzXCIpLnJlcGxhY2UoL14uKi0vLFwiXCIpLDEwKS0xO2E9ZShjLmNvbnRlbnRFbGVtZW50KHQpKX1vPW8uYWRkKGEpfSksbihyKSkse3RhYnM6cixjb250ZW50czpvfX0sX3RvZ2dsZURpc2FibGVkOmZ1bmN0aW9uKHQsbil7dD10aGlzLnRhYkdyb3VwLmZpbmQodCksdC5lYWNoKGZ1bmN0aW9uKCl7ZSh0aGlzKS50b2dnbGVDbGFzcyhGLG4pLnRvZ2dsZUNsYXNzKHosIW4pfSl9LF91cGRhdGVDbGFzc2VzOmZ1bmN0aW9uKCl7dmFyIHIsbyxhLHM9dGhpcztzLndyYXBwZXIuYWRkQ2xhc3MoXCJrLXdpZGdldCBrLWhlYWRlciBrLXRhYnN0cmlwXCIpLHMudGFiR3JvdXA9cy53cmFwcGVyLmNoaWxkcmVuKFwidWxcIikuYWRkQ2xhc3MoXCJrLXRhYnN0cmlwLWl0ZW1zIGstcmVzZXRcIikscy50YWJHcm91cFswXXx8KHMudGFiR3JvdXA9ZShcIjx1bCBjbGFzcz0nay10YWJzdHJpcC1pdGVtcyBrLXJlc2V0Jy8+XCIpLmFwcGVuZFRvKHMud3JhcHBlcikpLHI9cy50YWJHcm91cC5maW5kKFwibGlcIikuYWRkQ2xhc3MoXCJrLWl0ZW1cIiksci5sZW5ndGgmJihvPXIuZmlsdGVyKFwiLlwiK1IpLmluZGV4KCksYT1vPj0wP286dCxzLnRhYkdyb3VwLmNvbnRlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIDM9PXRoaXMubm9kZVR5cGUmJiFjKHRoaXMubm9kZVZhbHVlKX0pLnJlbW92ZSgpKSxvPj0wJiZyLmVxKG8pLmFkZENsYXNzKE8pLHMuY29udGVudEVsZW1lbnRzPXMud3JhcHBlci5jaGlsZHJlbihcImRpdlwiKSxzLmNvbnRlbnRFbGVtZW50cy5hZGRDbGFzcyhBKS5lcShhKS5hZGRDbGFzcyhSKS5jc3Moe2Rpc3BsYXk6XCJibG9ja1wifSksci5sZW5ndGgmJihuKHIpLGkocy50YWJHcm91cCkscy5fdXBkYXRlQ29udGVudEVsZW1lbnRzKCkpfSxfdXBkYXRlQ29udGVudEVsZW1lbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucy5jb250ZW50VXJsc3x8W10saT10LnRhYkdyb3VwLmZpbmQoXCIuay1pdGVtXCIpLG89KHQuZWxlbWVudC5hdHRyKFwiaWRcIil8fHIuZ3VpZCgpKStcIi1cIixhPXQud3JhcHBlci5jaGlsZHJlbihcImRpdlwiKTthLmxlbmd0aCYmaS5sZW5ndGg+YS5sZW5ndGg/KGEuZWFjaChmdW5jdGlvbihlKXt2YXIgdD1wYXJzZUludCh0aGlzLmlkLnJlcGxhY2UobyxcIlwiKSwxMCksbj1pLmZpbHRlcihcIlthcmlhLWNvbnRyb2xzPVwiK28rdCtcIl1cIikscj1vKyhlKzEpO24uZGF0YShcImFyaWFcIixyKSx0aGlzLnNldEF0dHJpYnV0ZShcImlkXCIscil9KSxpLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpO3RoaXMuc2V0QXR0cmlidXRlKFwiYXJpYS1jb250cm9sc1wiLHQuZGF0YShcImFyaWFcIikpLHQucmVtb3ZlRGF0YShcImFyaWFcIil9KSk6aS5lYWNoKGZ1bmN0aW9uKGkpe3ZhciByPWEuZXEoaSkscz1vKyhpKzEpO3RoaXMuc2V0QXR0cmlidXRlKFwiYXJpYS1jb250cm9sc1wiLHMpLCFyLmxlbmd0aCYmbltpXT9lKFwiPGRpdiBjbGFzcz0nXCIrQStcIicvPlwiKS5hcHBlbmRUbyh0LndyYXBwZXIpLmF0dHIoXCJpZFwiLHMpOihyLmF0dHIoXCJpZFwiLHMpLGUodGhpcykuY2hpbGRyZW4oXCIuay1sb2FkaW5nXCIpWzBdfHxuW2ldfHxlKFwiPHNwYW4gY2xhc3M9J2stbG9hZGluZyBrLWNvbXBsZXRlJy8+XCIpLnByZXBlbmRUbyh0aGlzKSksci5hdHRyKFwicm9sZVwiLFwidGFicGFuZWxcIiksci5maWx0ZXIoXCI6bm90KC5cIitSK1wiKVwiKS5hdHRyKFwiYXJpYS1oaWRkZW5cIiwhMCkuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMSksci5maWx0ZXIoXCIuXCIrUikuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMCl9KSx0LmNvbnRlbnRFbGVtZW50cz10LmNvbnRlbnRBbmltYXRvcnM9dC53cmFwcGVyLmNoaWxkcmVuKFwiZGl2XCIpLHQudGFic0hlaWdodD10LnRhYkdyb3VwLm91dGVySGVpZ2h0KCkrcGFyc2VJbnQodC53cmFwcGVyLmNzcyhcImJvcmRlci10b3Atd2lkdGhcIiksMTApK3BhcnNlSW50KHQud3JhcHBlci5jc3MoXCJib3JkZXItYm90dG9tLXdpZHRoXCIpLDEwKSxyLmtpbmV0aWNTY3JvbGxOZWVkZWQmJnIubW9iaWxlLnVpLlNjcm9sbGVyJiYoci50b3VjaFNjcm9sbGVyKHQuY29udGVudEVsZW1lbnRzKSx0LmNvbnRlbnRFbGVtZW50cz10LmNvbnRlbnRFbGVtZW50cy5jaGlsZHJlbihcIi5rbS1zY3JvbGwtY29udGFpbmVyXCIpKX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Uud3JhcHBlcj1lLmVsZW1lbnQuaXMoXCJ1bFwiKT9lLmVsZW1lbnQud3JhcEFsbChcIjxkaXYgLz5cIikucGFyZW50KCk6ZS5lbGVtZW50LGUuc2Nyb2xsV3JhcD1lLndyYXBwZXIucGFyZW50KFwiLmstdGFic3RyaXAtd3JhcHBlclwiKSxlLnNjcm9sbFdyYXBbMF18fChlLnNjcm9sbFdyYXA9ZS53cmFwcGVyLndyYXBBbGwoXCI8ZGl2IGNsYXNzPSdrLXRhYnN0cmlwLXdyYXBwZXInIC8+XCIpLnBhcmVudCgpKX0sX3NpemVTY3JvbGxXcmFwOmZ1bmN0aW9uKGUpe3RoaXMuc2Nyb2xsV3JhcC5jc3MoXCJoZWlnaHRcIixNYXRoLmZsb29yKGUub3V0ZXJIZWlnaHQoITApKSt0aGlzLnRhYnNIZWlnaHQpLmNzcyhcImhlaWdodFwiKX0sX3RvZ2dsZUhvdmVyOmZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS50b2dnbGVDbGFzcyhMLHQudHlwZT09TSl9LF9jbGljazpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcyxyPWUuZmluZChcIi5cIit5KSxvPXIuYXR0cihtKSxhPWkub3B0aW9ucy5jb2xsYXBzaWJsZSxzPWkuY29udGVudEhvbGRlcihlLmluZGV4KCkpO2lmKGUuY2xvc2VzdChcIi5rLXdpZGdldFwiKVswXT09aS53cmFwcGVyWzBdKXtpZihlLmlzKFwiLlwiK3orKGE/XCJcIjpcIiwuXCIrUikpKXJldHVybiEwO2lmKG49ci5kYXRhKEUpfHxvJiYoXCIjXCI9PW8uY2hhckF0KG8ubGVuZ3RoLTEpfHwtMSE9by5pbmRleE9mKFwiI1wiK2kuZWxlbWVudFswXS5pZCtcIi1cIikpLHQ9IW98fG4saS50YWJHcm91cC5jaGlsZHJlbihcIltkYXRhLWFuaW1hdGluZ11cIikubGVuZ3RoKXJldHVybiB0O2lmKGkudHJpZ2dlcihULHtpdGVtOmVbMF0sY29udGVudEVsZW1lbnQ6c1swXX0pKXJldHVybiEwO2lmKHQhPT0hMSlyZXR1cm4gYSYmZS5pcyhcIi5cIitSKT8oaS5kZWFjdGl2YXRlVGFiKGUpLCEwKTooaS5hY3RpdmF0ZVRhYihlKSYmKHQ9ITApLHQpfX0sZGVhY3RpdmF0ZVRhYjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLmFuaW1hdGlvbixpPW4ub3BlbixvPWQoe30sbi5jbG9zZSksYT1vJiZcImVmZmVjdHNcImluIG87ZT10LnRhYkdyb3VwLmZpbmQoZSksbz1kKGE/bzpkKHtyZXZlcnNlOiEwfSxpKSx7aGlkZTohMH0pLHIuc2l6ZShpLmVmZmVjdHMpPyhlLmtlbmRvQWRkQ2xhc3MoRix7ZHVyYXRpb246aS5kdXJhdGlvbn0pLGUua2VuZG9SZW1vdmVDbGFzcyhSLHtkdXJhdGlvbjppLmR1cmF0aW9ufSkpOihlLmFkZENsYXNzKEYpLGUucmVtb3ZlQ2xhc3MoUikpLGUucmVtb3ZlQXR0cihcImFyaWEtc2VsZWN0ZWRcIiksdC5jb250ZW50QW5pbWF0b3JzLmZpbHRlcihcIi5cIitSKS5rZW5kb1N0b3AoITAsITApLmtlbmRvQW5pbWF0ZShvKS5yZW1vdmVDbGFzcyhSKS5hdHRyKFwiYXJpYS1oaWRkZW5cIiwhMCl9LGFjdGl2YXRlVGFiOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxvLGEscyxsLGMsdSxoLHAsZixnLG0sdjtpZighdGhpcy50YWJHcm91cC5jaGlsZHJlbihcIltkYXRhLWFuaW1hdGluZ11cIikubGVuZ3RoKXJldHVybiBlPXRoaXMudGFiR3JvdXAuZmluZChlKSx0PXRoaXMsbj10Lm9wdGlvbnMuYW5pbWF0aW9uLGk9bi5vcGVuLG89ZCh7fSxuLmNsb3NlKSxhPW8mJlwiZWZmZWN0c1wiaW4gbyxzPWUucGFyZW50KCkuY2hpbGRyZW4oKSxsPXMuZmlsdGVyKFwiLlwiK1IpLGM9cy5pbmRleChlKSxvPWQoYT9vOmQoe3JldmVyc2U6ITB9LGkpLHtoaWRlOiEwfSksci5zaXplKGkuZWZmZWN0cyk/KGwua2VuZG9SZW1vdmVDbGFzcyhSLHtkdXJhdGlvbjpvLmR1cmF0aW9ufSksZS5rZW5kb1JlbW92ZUNsYXNzKEwse2R1cmF0aW9uOm8uZHVyYXRpb259KSk6KGwucmVtb3ZlQ2xhc3MoUiksZS5yZW1vdmVDbGFzcyhMKSksdT10LmNvbnRlbnRBbmltYXRvcnMsdC5pblJlcXVlc3QmJih0Lnhoci5hYm9ydCgpLHQuaW5SZXF1ZXN0PSExKSwwPT09dS5sZW5ndGg/KGwucmVtb3ZlQ2xhc3MoTyksZS5hZGRDbGFzcyhPKS5jc3MoXCJ6LWluZGV4XCIpLGUuYWRkQ2xhc3MoUiksdC5fY3VycmVudChlKSx0LnRyaWdnZXIoXCJjaGFuZ2VcIiksITEpOihoPXUuZmlsdGVyKFwiLlwiK1IpLHA9dC5jb250ZW50SG9sZGVyKGMpLGY9cC5jbG9zZXN0KFwiLmstY29udGVudFwiKSx0LnRhYnNIZWlnaHQ9dC50YWJHcm91cC5vdXRlckhlaWdodCgpK3BhcnNlSW50KHQud3JhcHBlci5jc3MoXCJib3JkZXItdG9wLXdpZHRoXCIpLDEwKStwYXJzZUludCh0LndyYXBwZXIuY3NzKFwiYm9yZGVyLWJvdHRvbS13aWR0aFwiKSwxMCksdC5fc2l6ZVNjcm9sbFdyYXAoaCksMD09PXAubGVuZ3RoPyhoLnJlbW92ZUNsYXNzKFIpLmF0dHIoXCJhcmlhLWhpZGRlblwiLCEwKS5rZW5kb1N0b3AoITAsITApLmtlbmRvQW5pbWF0ZShvKSwhMSk6KGUuYXR0cihcImRhdGEtYW5pbWF0aW5nXCIsITApLGc9KGUuY2hpbGRyZW4oXCIuXCIreSkuZGF0YShFKXx8ITEpJiZwLmlzKHgpLG09ZnVuY3Rpb24oKXtsLnJlbW92ZUNsYXNzKE8pLGUuYWRkQ2xhc3MoTykuY3NzKFwiei1pbmRleFwiKSxyLnNpemUoaS5lZmZlY3RzKT8obC5rZW5kb0FkZENsYXNzKEYse2R1cmF0aW9uOmkuZHVyYXRpb259KSxlLmtlbmRvQWRkQ2xhc3MoUix7ZHVyYXRpb246aS5kdXJhdGlvbn0pKToobC5hZGRDbGFzcyhGKSxlLmFkZENsYXNzKFIpKSxsLnJlbW92ZUF0dHIoXCJhcmlhLXNlbGVjdGVkXCIpLGUuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMCksdC5fY3VycmVudChlKSx0Ll9zaXplU2Nyb2xsV3JhcChmKSxmLmFkZENsYXNzKFIpLnJlbW92ZUF0dHIoXCJhcmlhLWhpZGRlblwiKS5rZW5kb1N0b3AoITAsITApLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApLmtlbmRvQW5pbWF0ZShkKHtpbml0OmZ1bmN0aW9uKCl7dC50cmlnZ2VyKF8se2l0ZW06ZVswXSxjb250ZW50RWxlbWVudDpwWzBdfSksci5yZXNpemUocCl9fSxpLHtjb21wbGV0ZTpmdW5jdGlvbigpe2UucmVtb3ZlQXR0cihcImRhdGEtYW5pbWF0aW5nXCIpLHQudHJpZ2dlcihELHtpdGVtOmVbMF0sY29udGVudEVsZW1lbnQ6cFswXX0pLHIucmVzaXplKHApLHQuc2Nyb2xsV3JhcC5jc3MoXCJoZWlnaHRcIixcIlwiKS5jc3MoXCJoZWlnaHRcIil9fSkpfSx2PWZ1bmN0aW9uKCl7Zz8oZS5yZW1vdmVBdHRyKFwiZGF0YS1hbmltYXRpbmdcIiksdC5hamF4UmVxdWVzdChlLHAsZnVuY3Rpb24oKXtlLmF0dHIoXCJkYXRhLWFuaW1hdGluZ1wiLCEwKSxtKCksdC50cmlnZ2VyKFwiY2hhbmdlXCIpfSkpOihtKCksdC50cmlnZ2VyKFwiY2hhbmdlXCIpKX0saC5yZW1vdmVDbGFzcyhSKSxoLmF0dHIoXCJhcmlhLWhpZGRlblwiLCEwKSxoLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITEpLGgubGVuZ3RoP2gua2VuZG9TdG9wKCEwLCEwKS5rZW5kb0FuaW1hdGUoZCh7Y29tcGxldGU6dn0sbykpOnYoKSwhMCkpfSxjb250ZW50RWxlbWVudDpmdW5jdGlvbihlKXt2YXIgbixpLG8sYTtpZihpc05hTihlLTApKXJldHVybiB0O2lmKG49dGhpcy5jb250ZW50RWxlbWVudHMmJnRoaXMuY29udGVudEVsZW1lbnRzWzBdJiYhci5raW5ldGljU2Nyb2xsTmVlZGVkP3RoaXMuY29udGVudEVsZW1lbnRzOnRoaXMuY29udGVudEFuaW1hdG9ycyxlPW4mJjA+ZT9uLmxlbmd0aCtlOmUsaT1SZWdFeHAoXCItXCIrKGUrMSkrXCIkXCIpLG4pZm9yKG89MCxhPW4ubGVuZ3RoO2E+bztvKyspaWYoaS50ZXN0KG4uZXEobykuY2xvc2VzdChcIi5rLWNvbnRlbnRcIilbMF0uaWQpKXJldHVybiBuW29dO3JldHVybiB0fSxjb250ZW50SG9sZGVyOmZ1bmN0aW9uKHQpe3ZhciBuPWUodGhpcy5jb250ZW50RWxlbWVudCh0KSksaT1uLmNoaWxkcmVuKFwiLmttLXNjcm9sbC1jb250YWluZXJcIik7cmV0dXJuIHIuc3VwcG9ydC50b3VjaCYmaVswXT9pOm59LGFqYXhSZXF1ZXN0OmZ1bmN0aW9uKHQsbixpLG8pe3ZhciBhLHMsbCxjLGQsdSxoLHAsZjt0PXRoaXMudGFiR3JvdXAuZmluZCh0KSxhPXRoaXMscz1lLmFqYXhTZXR0aW5ncy54aHIsbD10LmZpbmQoXCIuXCIreSksYz17fSxkPXQud2lkdGgoKS8yLHU9ITEsaD10LmZpbmQoXCIuay1sb2FkaW5nXCIpLnJlbW92ZUNsYXNzKFwiay1jb21wbGV0ZVwiKSxoWzBdfHwoaD1lKFwiPHNwYW4gY2xhc3M9J2stbG9hZGluZycvPlwiKS5wcmVwZW5kVG8odCkpLHA9MipkLWgud2lkdGgoKSxmPWZ1bmN0aW9uKCl7aC5hbmltYXRlKHttYXJnaW5MZWZ0OihwYXJzZUludChoLmNzcyhcIm1hcmdpbkxlZnRcIiksMTApfHwwKTxkP3A6MH0sNTAwLGYpXHJcbn0sci5zdXBwb3J0LmJyb3dzZXIubXNpZSYmMTA+ci5zdXBwb3J0LmJyb3dzZXIudmVyc2lvbiYmc2V0VGltZW91dChmLDQwKSxvPW98fGwuZGF0YShFKXx8bC5hdHRyKG0pLGEuaW5SZXF1ZXN0PSEwLGEueGhyPWUuYWpheCh7dHlwZTpcIkdFVFwiLGNhY2hlOiExLHVybDpvLGRhdGFUeXBlOlwiaHRtbFwiLGRhdGE6Yyx4aHI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49cygpLGk9dC5wcm9ncmVzc1VwbG9hZD9cInByb2dyZXNzVXBsb2FkXCI6dC5wcm9ncmVzcz9cInByb2dyZXNzXCI6ITE7cmV0dXJuIG4mJmUuZWFjaChbbixuLnVwbG9hZF0sZnVuY3Rpb24oKXt0aGlzLmFkZEV2ZW50TGlzdGVuZXImJnRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsZnVuY3Rpb24oZSl7aSYmdFtpXShlKX0sITEpfSksdC5ub1Byb2dyZXNzPSEod2luZG93LlhNTEh0dHBSZXF1ZXN0JiZcInVwbG9hZFwiaW4gbmV3IFhNTEh0dHBSZXF1ZXN0KSxufSxwcm9ncmVzczpmdW5jdGlvbihlKXtpZihlLmxlbmd0aENvbXB1dGFibGUpe3ZhciB0PXBhcnNlSW50KGUubG9hZGVkL2UudG90YWwqMTAwLDEwKStcIiVcIjtoLnN0b3AoITApLmFkZENsYXNzKFwiay1wcm9ncmVzc1wiKS5jc3Moe3dpZHRoOnQsbWFyZ2luTGVmdDowfSl9fSxlcnJvcjpmdW5jdGlvbihlLHQpe2EudHJpZ2dlcihcImVycm9yXCIse3hocjplLHN0YXR1czp0fSkmJnRoaXMuY29tcGxldGUoKX0sc3RvcFByb2dyZXNzOmZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbCh1KSxoLnN0b3AoITApLmFkZENsYXNzKFwiay1wcm9ncmVzc1wiKVswXS5zdHlsZS5jc3NUZXh0PVwiXCJ9LGNvbXBsZXRlOmZ1bmN0aW9uKGUpe2EuaW5SZXF1ZXN0PSExLHRoaXMubm9Qcm9ncmVzcz9zZXRUaW1lb3V0KHRoaXMuc3RvcFByb2dyZXNzLDUwMCk6dGhpcy5zdG9wUHJvZ3Jlc3MoKSxcImFib3J0XCI9PWUuc3RhdHVzVGV4dCYmaC5yZW1vdmUoKX0sc3VjY2VzczpmdW5jdGlvbihlKXt2YXIgcyxsLGM7aC5hZGRDbGFzcyhcImstY29tcGxldGVcIik7dHJ5e3M9dGhpcyxsPTEwLHMubm9Qcm9ncmVzcyYmKGgud2lkdGgobCtcIiVcIiksdT1zZXRJbnRlcnZhbChmdW5jdGlvbigpe3MucHJvZ3Jlc3Moe2xlbmd0aENvbXB1dGFibGU6ITAsbG9hZGVkOk1hdGgubWluKGwsMTAwKSx0b3RhbDoxMDB9KSxsKz0xMH0sNDApKSxhLmFuZ3VsYXIoXCJjbGVhbnVwXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6bi5nZXQoKX19KSxyLmRlc3Ryb3kobiksbi5odG1sKGUpfWNhdGNoKGQpe2M9d2luZG93LmNvbnNvbGUsYyYmYy5lcnJvciYmYy5lcnJvcihkLm5hbWUrXCI6IFwiK2QubWVzc2FnZStcIiBpbiBcIitvKSx0aGlzLmVycm9yKHRoaXMueGhyLFwiZXJyb3JcIil9aSYmaS5jYWxsKGEsbiksYS5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOm4uZ2V0KCl9fSksYS50cmlnZ2VyKEkse2l0ZW06dFswXSxjb250ZW50RWxlbWVudDpuWzBdfSl9fSl9fSk7ZChXLHtyZW5kZXJJdGVtOmZ1bmN0aW9uKGUpe2U9ZCh7dGFiU3RyaXA6e30sZ3JvdXA6e319LGUpO3ZhciB0PVYuZW1wdHksbj1lLml0ZW07cmV0dXJuIFYuaXRlbShkKGUse2ltYWdlOm4uaW1hZ2VVcmw/Vi5pbWFnZTp0LHNwcml0ZTpuLnNwcml0ZUNzc0NsYXNzP1Yuc3ByaXRlOnQsaXRlbVdyYXBwZXI6Vi5pdGVtV3JhcHBlcn0sVSkpfSxyZW5kZXJDb250ZW50OmZ1bmN0aW9uKGUpe3JldHVybiBWLmNvbnRlbnQoZChlLFUpKX19KSxyLnVpLnBsdWdpbihXKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsdCxuKXt2YXIgaSxyPWUuZ2V0VGltZXpvbmVPZmZzZXQoKTtlLnNldFRpbWUoZS5nZXRUaW1lKCkrdCksbnx8KGk9ZS5nZXRUaW1lem9uZU9mZnNldCgpLXIsZS5zZXRUaW1lKGUuZ2V0VGltZSgpK2kqeikpfWZ1bmN0aW9uIGkoKXt2YXIgZT1uZXcgJCx0PW5ldyAkKGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCksZS5nZXREYXRlKCksMCwwLDApLG49bmV3ICQoZS5nZXRGdWxsWWVhcigpLGUuZ2V0TW9udGgoKSxlLmdldERhdGUoKSwxMiwwLDApO3JldHVybi0xKih0LmdldFRpbWV6b25lT2Zmc2V0KCktbi5nZXRUaW1lem9uZU9mZnNldCgpKX1mdW5jdGlvbiByKGUpe3JldHVybiA2MCplLmdldEhvdXJzKCkqeitlLmdldE1pbnV0ZXMoKSp6KzFlMyplLmdldFNlY29uZHMoKStlLmdldE1pbGxpc2Vjb25kcygpfWZ1bmN0aW9uIG8oZSx0LG4pe3ZhciBpLG89cih0KSxhPXIobik7cmV0dXJuIGUmJm8hPWE/KGk9cihlKSxvPmkmJihpKz1GKSxvPmEmJihhKz1GKSxpPj1vJiZhPj1pKTohMH1mdW5jdGlvbiBhKGUpe3ZhciB0PWUucGFyc2VGb3JtYXRzO2UuZm9ybWF0PWYoZS5mb3JtYXR8fGQuZ2V0Q3VsdHVyZShlLmN1bHR1cmUpLmNhbGVuZGFycy5zdGFuZGFyZC5wYXR0ZXJucy50KSx0PWoodCk/dDpbdF0sdC5zcGxpY2UoMCwwLGUuZm9ybWF0KSxlLnBhcnNlRm9ybWF0cz10fWZ1bmN0aW9uIHMoZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfXZhciBsLGMsZD13aW5kb3cua2VuZG8sdT1kLmtleXMsaD1kLnBhcnNlRGF0ZSxwPWQuX2FjdGl2ZUVsZW1lbnQsZj1kLl9leHRyYWN0Rm9ybWF0LGc9ZC5zdXBwb3J0LG09Zy5icm93c2VyLHY9ZC51aSxfPXYuV2lkZ2V0LHk9XCJvcGVuXCIsdz1cImNsb3NlXCIsYj1cImNoYW5nZVwiLGs9XCIua2VuZG9UaW1lUGlja2VyXCIseD1cImNsaWNrXCIrayxDPVwiay1zdGF0ZS1kZWZhdWx0XCIsUz1cImRpc2FibGVkXCIsVD1cInJlYWRvbmx5XCIsRD1cImxpXCIsQT1cIjxzcGFuLz5cIixFPVwiay1zdGF0ZS1mb2N1c2VkXCIsTT1cImstc3RhdGUtaG92ZXJcIixQPVwibW91c2VlbnRlclwiK2srXCIgbW91c2VsZWF2ZVwiK2ssST1cIm1vdXNlZG93blwiK2ssej02ZTQsRj04NjRlNSxSPVwiay1zdGF0ZS1zZWxlY3RlZFwiLEI9XCJrLXN0YXRlLWRpc2FibGVkXCIsTD1cImFyaWEtc2VsZWN0ZWRcIixPPVwiYXJpYS1leHBhbmRlZFwiLEg9XCJhcmlhLWhpZGRlblwiLE49XCJhcmlhLWRpc2FibGVkXCIsVj1cImFyaWEtcmVhZG9ubHlcIixVPVwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsVz1cImlkXCIsaj1lLmlzQXJyYXksRz1lLmV4dGVuZCxxPWUucHJveHksJD1EYXRlLFk9bmV3ICQ7WT1uZXcgJChZLmdldEZ1bGxZZWFyKCksWS5nZXRNb250aCgpLFkuZ2V0RGF0ZSgpLDAsMCwwKSxsPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT10LmlkO24ub3B0aW9ucz10LG4udWw9ZSgnPHVsIHRhYmluZGV4PVwiLTFcIiByb2xlPVwibGlzdGJveFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLWxpc3Qgay1yZXNldFwiLz4nKS5jc3Moe292ZXJmbG93Omcua2luZXRpY1Njcm9sbE5lZWRlZD9cIlwiOlwiYXV0b1wifSkub24oeCxELHEobi5fY2xpY2ssbikpLm9uKFwibW91c2VlbnRlclwiK2ssRCxmdW5jdGlvbigpe2UodGhpcykuYWRkQ2xhc3MoTSl9KS5vbihcIm1vdXNlbGVhdmVcIitrLEQsZnVuY3Rpb24oKXtlKHRoaXMpLnJlbW92ZUNsYXNzKE0pfSksbi5saXN0PWUoXCI8ZGl2IGNsYXNzPSdrLWxpc3QtY29udGFpbmVyJy8+XCIpLmFwcGVuZChuLnVsKS5vbihJLHMpLGkmJihuLl90aW1lVmlld0lEPWkrXCJfdGltZXZpZXdcIixuLl9vcHRpb25JRD1pK1wiX29wdGlvbl9zZWxlY3RlZFwiLG4udWwuYXR0cihXLG4uX3RpbWVWaWV3SUQpKSxuLl9wb3B1cCgpLG4uX2hlaWdodEhhbmRsZXI9cShuLl9oZWlnaHQsbiksbi50ZW1wbGF0ZT1kLnRlbXBsYXRlKCc8bGkgdGFiaW5kZXg9XCItMVwiIHJvbGU9XCJvcHRpb25cIiBjbGFzcz1cImstaXRlbVwiIHVuc2VsZWN0YWJsZT1cIm9uXCI+Iz1kYXRhIzwvbGk+Jyx7dXNlV2l0aEJsb2NrOiExfSl9LGwucHJvdG90eXBlPXtjdXJyZW50OmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMscj1pLm9wdGlvbnMuYWN0aXZlO3JldHVybiBuPT09dD9pLl9jdXJyZW50OihpLl9jdXJyZW50JiZpLl9jdXJyZW50LnJlbW92ZUNsYXNzKFIpLnJlbW92ZUF0dHIoTCkucmVtb3ZlQXR0cihXKSxuJiYobj1lKG4pLmFkZENsYXNzKFIpLmF0dHIoVyxpLl9vcHRpb25JRCkuYXR0cihMLCEwKSxpLnNjcm9sbChuWzBdKSksaS5fY3VycmVudD1uLHImJnIobiksdCl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5wb3B1cC5jbG9zZSgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLnVsLm9mZihrKSxlLmxpc3Qub2ZmKGspLGUuX3RvdWNoU2Nyb2xsZXImJmUuX3RvdWNoU2Nyb2xsZXIuZGVzdHJveSgpLGUucG9wdXAuZGVzdHJveSgpfSxvcGVuOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLnVsWzBdLmZpcnN0Q2hpbGR8fGUuYmluZCgpLGUucG9wdXAub3BlbigpLGUuX2N1cnJlbnQmJmUuc2Nyb2xsKGUuX2N1cnJlbnRbMF0pfSxkYXRhQmluZDpmdW5jdGlvbihlKXtmb3IodmFyIHQsbj10aGlzLGk9bi5vcHRpb25zLHI9aS5mb3JtYXQsYT1kLnRvU3RyaW5nLHM9bi50ZW1wbGF0ZSxsPWUubGVuZ3RoLGM9MCx1PVwiXCI7bD5jO2MrKyl0PWVbY10sbyh0LGkubWluLGkubWF4KSYmKHUrPXMoYSh0LHIsaS5jdWx0dXJlKSkpO24uX2h0bWwodSl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZSx0LG8sYT10aGlzLHM9YS5vcHRpb25zLGw9cy5mb3JtYXQsYz1pKCksdT0wPmMsaD1zLm1pbixwPXMubWF4LGY9cihoKSxnPXIocCksbT1zLmludGVydmFsKnosdj1kLnRvU3RyaW5nLF89YS50ZW1wbGF0ZSx5PW5ldyAkKCtoKSx3PXkuZ2V0RGF0ZSgpLGI9MCxrPVwiXCI7Zm9yKG89dT8oRitjKnopL206Ri9tLGYhPWcmJihmPmcmJihnKz1GKSxvPShnLWYpL20rMSksdD1wYXJzZUludChvLDEwKTtvPmI7YisrKWImJm4oeSxtLHUpLGcmJnQ9PWImJihlPXIoeSksdzx5LmdldERhdGUoKSYmKGUrPUYpLGU+ZyYmKHk9bmV3ICQoK3ApKSksays9Xyh2KHksbCxzLmN1bHR1cmUpKTthLl9odG1sKGspfSxiaW5kOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUub3B0aW9ucy5kYXRlczt0JiZ0WzBdP2UuZGF0YUJpbmQodCk6ZS5yZWZyZXNoKCl9LF9odG1sOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC51bFswXS5pbm5lckhUTUw9ZSx0LnBvcHVwLnVuYmluZCh5LHQuX2hlaWdodEhhbmRsZXIpLHQucG9wdXAub25lKHksdC5faGVpZ2h0SGFuZGxlciksdC5jdXJyZW50KG51bGwpLHQuc2VsZWN0KHQuX3ZhbHVlKX0sc2Nyb2xsOmZ1bmN0aW9uKGUpe2lmKGUpe3ZhciB0LG49dGhpcy51bFswXSxpPWUub2Zmc2V0VG9wLHI9ZS5vZmZzZXRIZWlnaHQsbz1uLnNjcm9sbFRvcCxhPW4uY2xpZW50SGVpZ2h0LHM9aStyLGw9dGhpcy5fdG91Y2hTY3JvbGxlcjtsPyh0PXRoaXMubGlzdC5oZWlnaHQoKSxpPnQmJihpPWktdCtyKSxsLnNjcm9sbFRvKDAsLWkpKTpuLnNjcm9sbFRvcD1vPmk/aTpzPm8rYT9zLWE6b319LHNlbGVjdDpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9bi5vcHRpb25zLHI9bi5fY3VycmVudDt0IGluc3RhbmNlb2YgRGF0ZSYmKHQ9ZC50b1N0cmluZyh0LGkuZm9ybWF0LGkuY3VsdHVyZSkpLFwic3RyaW5nXCI9PXR5cGVvZiB0JiYociYmci50ZXh0KCk9PT10P3Q9cjoodD1lLmdyZXAobi51bFswXS5jaGlsZE5vZGVzLGZ1bmN0aW9uKGUpe3JldHVybihlLnRleHRDb250ZW50fHxlLmlubmVyVGV4dCk9PXR9KSx0PXRbMF0/dDpudWxsKSksbi5jdXJyZW50KHQpfSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9ucztlLm1pbj1oKGUubWluKSxlLm1heD1oKGUubWF4KSx0aGlzLm9wdGlvbnM9Ryh0LGUse2FjdGl2ZTp0LmFjdGl2ZSxjaGFuZ2U6dC5jaGFuZ2UsY2xvc2U6dC5jbG9zZSxvcGVuOnQub3Blbn0pLHRoaXMuYmluZCgpfSx0b2dnbGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UucG9wdXAudmlzaWJsZSgpP2UuY2xvc2UoKTplLm9wZW4oKX0sdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll92YWx1ZT1lLHQudWxbMF0uZmlyc3RDaGlsZCYmdC5zZWxlY3QoZSl9LF9jbGljazpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9ZSh0LmN1cnJlbnRUYXJnZXQpO3QuaXNEZWZhdWx0UHJldmVudGVkKCl8fChuLnNlbGVjdChpKSxuLm9wdGlvbnMuY2hhbmdlKGkudGV4dCgpLCEwKSxuLmNsb3NlKCkpfSxfaGVpZ2h0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUubGlzdCxuPXQucGFyZW50KFwiLmstYW5pbWF0aW9uLWNvbnRhaW5lclwiKSxpPWUub3B0aW9ucy5oZWlnaHQ7ZS51bFswXS5jaGlsZHJlbi5sZW5ndGgmJnQuYWRkKG4pLnNob3coKS5oZWlnaHQoZS51bFswXS5zY3JvbGxIZWlnaHQ+aT9pOlwiYXV0b1wiKS5oaWRlKCl9LF9wYXJzZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLGk9dC5fdmFsdWV8fFk7cmV0dXJuIGUgaW5zdGFuY2VvZiAkP2U6KGU9aChlLG4ucGFyc2VGb3JtYXRzLG4uY3VsdHVyZSksZSYmKGU9bmV3ICQoaS5nZXRGdWxsWWVhcigpLGkuZ2V0TW9udGgoKSxpLmdldERhdGUoKSxlLmdldEhvdXJzKCksZS5nZXRNaW51dGVzKCksZS5nZXRTZWNvbmRzKCksZS5nZXRNaWxsaXNlY29uZHMoKSkpLGUpfSxfYWRqdXN0TGlzdFdpZHRoOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMubGlzdCxpPW5bMF0uc3R5bGUud2lkdGgscj10aGlzLm9wdGlvbnMuYW5jaG9yOyhuLmRhdGEoXCJ3aWR0aFwiKXx8IWkpJiYoZT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZT93aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShyWzBdLG51bGwpOjAsdD1lP3BhcnNlRmxvYXQoZS53aWR0aCk6ci5vdXRlcldpZHRoKCksZSYmKG0ubW96aWxsYXx8bS5tc2llKSYmKHQrPXBhcnNlRmxvYXQoZS5wYWRkaW5nTGVmdCkrcGFyc2VGbG9hdChlLnBhZGRpbmdSaWdodCkrcGFyc2VGbG9hdChlLmJvcmRlckxlZnRXaWR0aCkrcGFyc2VGbG9hdChlLmJvcmRlclJpZ2h0V2lkdGgpKSxpPXQtKG4ub3V0ZXJXaWR0aCgpLW4ud2lkdGgoKSksbi5jc3Moe2ZvbnRGYW1pbHk6ci5jc3MoXCJmb250LWZhbWlseVwiKSx3aWR0aDppfSkuZGF0YShcIndpZHRoXCIsaSkpfSxfcG9wdXA6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5saXN0LG49ZS5vcHRpb25zLGk9bi5hbmNob3I7ZS5wb3B1cD1uZXcgdi5Qb3B1cCh0LEcobi5wb3B1cCx7YW5jaG9yOmksb3BlbjpuLm9wZW4sY2xvc2U6bi5jbG9zZSxhbmltYXRpb246bi5hbmltYXRpb24saXNSdGw6Zy5pc1J0bChuLmFuY2hvcil9KSksZS5fdG91Y2hTY3JvbGxlcj1kLnRvdWNoU2Nyb2xsZXIoZS5wb3B1cC5lbGVtZW50KX0sbW92ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9ZS5rZXlDb2RlLHI9bi51bFswXSxvPW4uX2N1cnJlbnQsYT1pPT09dS5ET1dOO2lmKGk9PT11LlVQfHxhKXtpZihlLmFsdEtleSlyZXR1cm4gbi50b2dnbGUoYSksdDtvPWE/bz9vWzBdLm5leHRTaWJsaW5nOnIuZmlyc3RDaGlsZDpvP29bMF0ucHJldmlvdXNTaWJsaW5nOnIubGFzdENoaWxkLG8mJm4uc2VsZWN0KG8pLG4ub3B0aW9ucy5jaGFuZ2Uobi5fY3VycmVudC50ZXh0KCkpLGUucHJldmVudERlZmF1bHQoKX1lbHNlKGk9PT11LkVOVEVSfHxpPT09dS5UQUJ8fGk9PT11LkVTQykmJihlLnByZXZlbnREZWZhdWx0KCksbyYmbi5vcHRpb25zLmNoYW5nZShvLnRleHQoKSwhMCksbi5jbG9zZSgpKX19LGwuZ2V0TWlsbGlzZWNvbmRzPXIsZC5UaW1lVmlldz1sLGM9Xy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbz10aGlzO18uZm4uaW5pdC5jYWxsKG8sZSx0KSxlPW8uZWxlbWVudCx0PW8ub3B0aW9ucyx0Lm1pbj1oKGUuYXR0cihcIm1pblwiKSl8fGgodC5taW4pLHQubWF4PWgoZS5hdHRyKFwibWF4XCIpKXx8aCh0Lm1heCksYSh0KSxvLl93cmFwcGVyKCksby50aW1lVmlldz1pPW5ldyBsKEcoe30sdCx7aWQ6ZS5hdHRyKFcpLGFuY2hvcjpvLndyYXBwZXIsZm9ybWF0OnQuZm9ybWF0LGNoYW5nZTpmdW5jdGlvbih0LG4pe24/by5fY2hhbmdlKHQpOmUudmFsKHQpfSxvcGVuOmZ1bmN0aW9uKHQpe28udGltZVZpZXcuX2FkanVzdExpc3RXaWR0aCgpLG8udHJpZ2dlcih5KT90LnByZXZlbnREZWZhdWx0KCk6KGUuYXR0cihPLCEwKSxuLmF0dHIoSCwhMSkpfSxjbG9zZTpmdW5jdGlvbih0KXtvLnRyaWdnZXIodyk/dC5wcmV2ZW50RGVmYXVsdCgpOihlLmF0dHIoTywhMSksbi5hdHRyKEgsITApKX0sYWN0aXZlOmZ1bmN0aW9uKHQpe2UucmVtb3ZlQXR0cihVKSx0JiZlLmF0dHIoVSxpLl9vcHRpb25JRCl9fSkpLG49aS51bCxvLl9pY29uKCksby5fcmVzZXQoKTt0cnl7ZVswXS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJ0ZXh0XCIpfWNhdGNoKHMpe2VbMF0udHlwZT1cInRleHRcIn1lLmFkZENsYXNzKFwiay1pbnB1dFwiKS5hdHRyKHtyb2xlOlwiY29tYm9ib3hcIixcImFyaWEtZXhwYW5kZWRcIjohMSxcImFyaWEtb3duc1wiOmkuX3RpbWVWaWV3SUR9KSxyPWUuaXMoXCJbZGlzYWJsZWRdXCIpLHI/by5lbmFibGUoITEpOm8ucmVhZG9ubHkoZS5pcyhcIltyZWFkb25seV1cIikpLG8uX29sZD1vLl91cGRhdGUodC52YWx1ZXx8by5lbGVtZW50LnZhbCgpKSxvLl9vbGRUZXh0PWUudmFsKCksZC5ub3RpZnkobyl9LG9wdGlvbnM6e25hbWU6XCJUaW1lUGlja2VyXCIsbWluOlksbWF4OlksZm9ybWF0OlwiXCIsZGF0ZXM6W10scGFyc2VGb3JtYXRzOltdLHZhbHVlOm51bGwsaW50ZXJ2YWw6MzAsaGVpZ2h0OjIwMCxhbmltYXRpb246e319LGV2ZW50czpbeSx3LGJdLHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuX3ZhbHVlO18uZm4uc2V0T3B0aW9ucy5jYWxsKHQsZSksZT10Lm9wdGlvbnMsYShlKSx0LnRpbWVWaWV3LnNldE9wdGlvbnMoZSksbiYmdC5lbGVtZW50LnZhbChkLnRvU3RyaW5nKG4sZS5mb3JtYXQsZS5jdWx0dXJlKSl9LGRhdGFCaW5kOmZ1bmN0aW9uKGUpe2ooZSkmJnRoaXMudGltZVZpZXcuZGF0YUJpbmQoZSl9LF9lZGl0YWJsZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5kaXNhYmxlLGk9ZS5yZWFkb25seSxyPXQuX2Fycm93Lm9mZihrKSxvPXQuZWxlbWVudC5vZmYoayksYT10Ll9pbnB1dFdyYXBwZXIub2ZmKGspO2l8fG4/KGEuYWRkQ2xhc3Mobj9COkMpLnJlbW92ZUNsYXNzKG4/QzpCKSxvLmF0dHIoUyxuKS5hdHRyKFQsaSkuYXR0cihOLG4pLmF0dHIoVixpKSk6KGEuYWRkQ2xhc3MoQykucmVtb3ZlQ2xhc3MoQikub24oUCx0Ll90b2dnbGVIb3Zlciksby5yZW1vdmVBdHRyKFMpLnJlbW92ZUF0dHIoVCkuYXR0cihOLCExKS5hdHRyKFYsITEpLm9uKFwia2V5ZG93blwiK2sscSh0Ll9rZXlkb3duLHQpKS5vbihcImZvY3Vzb3V0XCIrayxxKHQuX2JsdXIsdCkpLm9uKFwiZm9jdXNcIitrLGZ1bmN0aW9uKCl7dC5faW5wdXRXcmFwcGVyLmFkZENsYXNzKEUpfSksci5vbih4LHEodC5fY2xpY2ssdCkpLm9uKEkscykpfSxyZWFkb25seTpmdW5jdGlvbihlKXt0aGlzLl9lZGl0YWJsZSh7cmVhZG9ubHk6ZT09PXQ/ITA6ZSxkaXNhYmxlOiExfSl9LGVuYWJsZTpmdW5jdGlvbihlKXt0aGlzLl9lZGl0YWJsZSh7cmVhZG9ubHk6ITEsZGlzYWJsZTohKGU9ZT09PXQ/ITA6ZSl9KX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7Xy5mbi5kZXN0cm95LmNhbGwoZSksZS50aW1lVmlldy5kZXN0cm95KCksZS5lbGVtZW50Lm9mZihrKSxlLl9hcnJvdy5vZmYoayksZS5faW5wdXRXcmFwcGVyLm9mZihrKSxlLl9mb3JtJiZlLl9mb3JtLm9mZihcInJlc2V0XCIsZS5fcmVzZXRIYW5kbGVyKX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLnRpbWVWaWV3LmNsb3NlKCl9LG9wZW46ZnVuY3Rpb24oKXt0aGlzLnRpbWVWaWV3Lm9wZW4oKX0sbWluOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vcHRpb24oXCJtaW5cIixlKX0sbWF4OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vcHRpb24oXCJtYXhcIixlKX0sdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztyZXR1cm4gZT09PXQ/bi5fdmFsdWU6KG4uX29sZD1uLl91cGRhdGUoZSksbnVsbD09PW4uX29sZCYmbi5lbGVtZW50LnZhbChcIlwiKSxuLl9vbGRUZXh0PW4uZWxlbWVudC52YWwoKSx0KX0sX2JsdXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5lbGVtZW50LnZhbCgpO2UuY2xvc2UoKSx0IT09ZS5fb2xkVGV4dCYmZS5fY2hhbmdlKHQpLGUuX2lucHV0V3JhcHBlci5yZW1vdmVDbGFzcyhFKX0sX2NsaWNrOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZWxlbWVudDtlLnRpbWVWaWV3LnRvZ2dsZSgpLGcudG91Y2h8fHRbMF09PT1wKCl8fHQuZm9jdXMoKX0sX2NoYW5nZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2U9dC5fdXBkYXRlKGUpLCt0Ll9vbGQhPStlJiYodC5fb2xkPWUsdC5fb2xkVGV4dD10LmVsZW1lbnQudmFsKCksdC5lbGVtZW50LnRyaWdnZXIoYiksdC50cmlnZ2VyKGIpKX0sX2ljb246ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLmVsZW1lbnQ7dD1pLm5leHQoXCJzcGFuLmstc2VsZWN0XCIpLHRbMF18fCh0PWUoJzxzcGFuIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLXNlbGVjdFwiPjxzcGFuIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLWljb24gay1pLWNsb2NrXCI+c2VsZWN0PC9zcGFuPjwvc3Bhbj4nKS5pbnNlcnRBZnRlcihpKSksbi5fYXJyb3c9dC5hdHRyKHtyb2xlOlwiYnV0dG9uXCIsXCJhcmlhLWNvbnRyb2xzXCI6bi50aW1lVmlldy5fdGltZVZpZXdJRH0pfSxfa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5rZXlDb2RlLGk9dC50aW1lVmlldyxyPXQuZWxlbWVudC52YWwoKTtpLnBvcHVwLnZpc2libGUoKXx8ZS5hbHRLZXk/aS5tb3ZlKGUpOm49PT11LkVOVEVSJiZyIT09dC5fb2xkVGV4dCYmdC5fY2hhbmdlKHIpfSxfb3B0aW9uOmZ1bmN0aW9uKGUsbil7dmFyIGk9dGhpcyxyPWkub3B0aW9ucztyZXR1cm4gbj09PXQ/cltlXToobj1pLnRpbWVWaWV3Ll9wYXJzZShuKSxuJiYobj1uZXcgJCgrbikscltlXT1uLGkudGltZVZpZXcub3B0aW9uc1tlXT1uLGkudGltZVZpZXcuYmluZCgpKSx0KX0sX3RvZ2dsZUhvdmVyOmZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS50b2dnbGVDbGFzcyhNLFwibW91c2VlbnRlclwiPT09dC50eXBlKX0sX3VwZGF0ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLGk9dC50aW1lVmlldyxyPWkuX3BhcnNlKGUpO3JldHVybiBvKHIsbi5taW4sbi5tYXgpfHwocj1udWxsKSx0Ll92YWx1ZT1yLHQuZWxlbWVudC52YWwocj9kLnRvU3RyaW5nKHIsbi5mb3JtYXQsbi5jdWx0dXJlKTplKSxpLnZhbHVlKHIpLHJ9LF93cmFwcGVyOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi5lbGVtZW50O3Q9aS5wYXJlbnRzKFwiLmstdGltZXBpY2tlclwiKSx0WzBdfHwodD1pLndyYXAoQSkucGFyZW50KCkuYWRkQ2xhc3MoXCJrLXBpY2tlci13cmFwIGstc3RhdGUtZGVmYXVsdFwiKSx0PXQud3JhcChBKS5wYXJlbnQoKSksdFswXS5zdHlsZS5jc3NUZXh0PWlbMF0uc3R5bGUuY3NzVGV4dCxuLndyYXBwZXI9dC5hZGRDbGFzcyhcImstd2lkZ2V0IGstdGltZXBpY2tlciBrLWhlYWRlclwiKS5hZGRDbGFzcyhpWzBdLmNsYXNzTmFtZSksaS5jc3Moe3dpZHRoOlwiMTAwJVwiLGhlaWdodDppWzBdLnN0eWxlLmhlaWdodH0pLG4uX2lucHV0V3JhcHBlcj1lKHRbMF0uZmlyc3RDaGlsZCl9LF9yZXNldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LmVsZW1lbnQsaT1uLmF0dHIoXCJmb3JtXCIpLHI9aT9lKFwiI1wiK2kpOm4uY2xvc2VzdChcImZvcm1cIik7clswXSYmKHQuX3Jlc2V0SGFuZGxlcj1mdW5jdGlvbigpe3QudmFsdWUoblswXS5kZWZhdWx0VmFsdWUpfSx0Ll9mb3JtPXIub24oXCJyZXNldFwiLHQuX3Jlc2V0SGFuZGxlcikpfX0pLHYucGx1Z2luKGMpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4obil7dmFyIGk9ZShuLnVzZUJ1dHRvblRhZz9cIjxidXR0b24+PC9idXR0b24+XCI6XCI8YT48L2E+XCIpO3JldHVybiBpLmRhdGEoe3R5cGU6XCJidXR0b25cIn0pLGkuYXR0cigkLG4udWlkKSxuLmF0dHJpYnV0ZXMmJmkuYXR0cihuLmF0dHJpYnV0ZXMpLG4udG9nZ2xhYmxlJiYoaS5hZGRDbGFzcyhtKSxuLnNlbGVjdGVkJiZpLmFkZENsYXNzKGspKSxuLmVuYWJsZT09PSExJiZpLmFkZENsYXNzKHgpLG4udXJsPT09dHx8bi51c2VCdXR0b25UYWd8fChpLmF0dHIoXCJocmVmXCIsbi51cmwpLG4ubW9iaWxlJiZpLmF0dHIoYy5hdHRyKFwicm9sZVwiKSxcImJ1dHRvblwiKSksbi5ncm91cCYmaS5hdHRyKGMuYXR0cihcImdyb3VwXCIpLG4uZ3JvdXApLCFuLnRvZ2dsYWJsZSYmbi5jbGljayYmaChuLmNsaWNrKSYmaS5kYXRhKFwiY2xpY2tcIixuLmNsaWNrKSxuLnRvZ2dsYWJsZSYmbi50b2dnbGUmJmgobi50b2dnbGUpJiZpLmRhdGEoXCJ0b2dnbGVcIixuLnRvZ2dsZSksaX1mdW5jdGlvbiBpKGUpe3ZhciB0LG49WS5idXR0b24uYmFzZShlKTtyZXR1cm4gbi5hZGRDbGFzcyhmKSxlLnByaW1hcnkmJm4uYWRkQ2xhc3MoVCksZS5hbGlnbiYmbi5hZGRDbGFzcyhcImstYWxpZ24tXCIrZS5hbGlnbiksZS5pZCYmbi5hdHRyKFwiaWRcIixlLmlkKSxcIm92ZXJmbG93XCIhPWUuc2hvd1RleHQmJmUudGV4dCYmbi5odG1sKGUubW9iaWxlPyc8c3BhbiBjbGFzcz1cImttLXRleHRcIj4nK2UudGV4dCtcIjwvc3Bhbj5cIjplLnRleHQpLHQ9XCJvdmVyZmxvd1wiIT1lLnNob3dJY29uJiYoZS5pY29ufHxlLnNwcml0ZUNzc0NsYXNzfHxlLmltYWdlVXJsKSx0JiZvKGUsbiksbn1mdW5jdGlvbiByKGUpe3ZhciB0LG49WS5idXR0b24uYmFzZShlKTtyZXR1cm4gbi5hZGRDbGFzcyhnK1wiIFwiK2YpLGUucHJpbWFyeSYmbi5hZGRDbGFzcyhUKSxlLmlkJiZuLmF0dHIoXCJpZFwiLGUuaWQrXCJfb3ZlcmZsb3dcIiksXCJ0b29sYmFyXCIhPWUuc2hvd1RleHQmJmUudGV4dCYmbi5odG1sKGUubW9iaWxlPyc8c3BhbiBjbGFzcz1cImttLXRleHRcIj4nK2UudGV4dCtcIjwvc3Bhbj5cIjplLnRleHQpLHQ9XCJ0b29sYmFyXCIhPWUuc2hvd0ljb24mJihlLmljb258fGUuc3ByaXRlQ3NzQ2xhc3N8fGUuaW1hZ2VVcmwpLHQmJm8oZSxuKSxufWZ1bmN0aW9uIG8odCxuKXt2YXIgaSxyLG8sYT10Lmljb24scz10LnNwcml0ZUNzc0NsYXNzLGw9dC5pbWFnZVVybDsoc3x8bHx8YSkmJihpPSEwLG4uY29udGVudHMoKS5ub3QoXCJzcGFuLmstc3ByaXRlLHNwYW4uXCIrRCtcIixpbWcuay1pbWFnZVwiKS5lYWNoKGZ1bmN0aW9uKHQsbil7KDE9PW4ubm9kZVR5cGV8fDM9PW4ubm9kZVR5cGUmJmUudHJpbShuLm5vZGVWYWx1ZSkubGVuZ3RoPjApJiYoaT0hMSl9KSxuLmFkZENsYXNzKGk/RTpNKSksYT8ocj1uLmNoaWxkcmVuKFwic3Bhbi5cIitEKS5maXJzdCgpLHJbMF18fChyPWUoJzxzcGFuIGNsYXNzPVwiJytEKydcIj48L3NwYW4+JykucHJlcGVuZFRvKG4pKSxyLmFkZENsYXNzKEErYSkpOnM/KHI9bi5jaGlsZHJlbihcInNwYW4uay1zcHJpdGVcIikuZmlyc3QoKSxyWzBdfHwocj1lKCc8c3BhbiBjbGFzcz1cImstc3ByaXRlXCI+PC9zcGFuPicpLnByZXBlbmRUbyhuKSksci5hZGRDbGFzcyhzKSk6bCYmKG89bi5jaGlsZHJlbihcImltZy5rLWltYWdlXCIpLmZpcnN0KCksb1swXXx8KG89ZSgnPGltZyBhbHQ9XCJpY29uXCIgY2xhc3M9XCJrLWltYWdlXCIgLz4nKS5wcmVwZW5kVG8obikpLG8uYXR0cihcInNyY1wiLGwpKX1mdW5jdGlvbiBhKCl7dmFyIGUsdD10aGlzLm9wdGlvbnMuYW5jaG9yLG49dC5vdXRlcldpZHRoKCk7Yy53cmFwKHRoaXMuZWxlbWVudCkuYWRkQ2xhc3MoXCJrLXNwbGl0LXdyYXBwZXJcIiksZT1cImJvcmRlci1ib3hcIiE9PXRoaXMuZWxlbWVudC5jc3MoXCJib3gtc2l6aW5nXCIpP24tKHRoaXMuZWxlbWVudC5vdXRlcldpZHRoKCktdGhpcy5lbGVtZW50LndpZHRoKCkpOm4sdGhpcy5lbGVtZW50LmNzcyh7Zm9udEZhbWlseTp0LmNzcyhcImZvbnQtZmFtaWx5XCIpLFwibWluLXdpZHRoXCI6ZX0pfWZ1bmN0aW9uIHMoZSl7ZS50YXJnZXQuaXMoXCIuay10b2dnbGUtYnV0dG9uXCIpfHxlLnRhcmdldC50b2dnbGVDbGFzcyhrLFwicHJlc3NcIj09ZS50eXBlKX1mdW5jdGlvbiBsKHQpe3JldHVybiB0PWUodCksdC5oYXNDbGFzcyhcImttLWFjdGlvbnNoZWV0XCIpP3QuY2xvc2VzdChcIi5rbS1wb3B1cC13cmFwcGVyXCIpOnQuYWRkQ2xhc3MoXCJrbS13aWRnZXQga20tYWN0aW9uc2hlZXRcIikud3JhcCgnPGRpdiBjbGFzcz1cImttLWFjdGlvbnNoZWV0LXdyYXBwZXIga20tYWN0aW9uc2hlZXQtdGFibGV0IGttLXdpZGdldCBrbS1wb3B1cFwiPjwvZGl2PicpLnBhcmVudCgpLndyYXAoJzxkaXYgY2xhc3M9XCJrbS1wb3B1cC13cmFwcGVyIGstcG9wdXBcIj48L2Rpdj4nKS5wYXJlbnQoKX12YXIgYz13aW5kb3cua2VuZG8sZD1jLnVpLldpZGdldCx1PWUucHJveHksaD1jLmlzRnVuY3Rpb24scD1cImstdG9vbGJhclwiLGY9XCJrLWJ1dHRvblwiLGc9XCJrLW92ZXJmbG93LWJ1dHRvblwiLG09XCJrLXRvZ2dsZS1idXR0b25cIix2PVwiay1idXR0b24tZ3JvdXBcIixfPVwiay1zcGxpdC1idXR0b25cIix5PVwiay1zZXBhcmF0b3JcIix3PVwiay1wb3B1cFwiLGI9XCJrLXRvb2xiYXItcmVzaXphYmxlXCIsaz1cImstc3RhdGUtYWN0aXZlXCIseD1cImstc3RhdGUtZGlzYWJsZWRcIixDPVwiay1ncm91cC1zdGFydFwiLFM9XCJrLWdyb3VwLWVuZFwiLFQ9XCJrLXByaW1hcnlcIixEPVwiay1pY29uXCIsQT1cImstaS1cIixFPVwiay1idXR0b24taWNvblwiLE09XCJrLWJ1dHRvbi1pY29udGV4dFwiLFA9XCJrLWxpc3QtY29udGFpbmVyIGstc3BsaXQtY29udGFpbmVyXCIsST1cImstc3BsaXQtYnV0dG9uLWFycm93XCIsej1cImstb3ZlcmZsb3ctYW5jaG9yXCIsRj1cImstb3ZlcmZsb3ctY29udGFpbmVyXCIsUj1cImstdG9vbGJhci1maXJzdC12aXNpYmxlXCIsQj1cImstdG9vbGJhci1sYXN0LXZpc2libGVcIixMPVwiY2xpY2tcIixPPVwidG9nZ2xlXCIsSD1cIm9wZW5cIixOPVwiY2xvc2VcIixWPVwib3ZlcmZsb3dPcGVuXCIsVT1cIm92ZXJmbG93Q2xvc2VcIixXPVwibmV2ZXJcIixqPVwiYXV0b1wiLEc9XCJhbHdheXNcIixxPVwiay1vdmVyZmxvdy1oaWRkZW5cIiwkPWMuYXR0cihcInVpZFwiKSxZPXtidXR0b246e2Jhc2U6bix0b29sYmFyOmksb3ZlcmZsb3c6cn0sYnV0dG9uR3JvdXA6e2Jhc2U6ZnVuY3Rpb24odCxuLGkpe3ZhciByLG8sYT10LmJ1dHRvbnM7aWYoYSl7Zm9yKHQuYXR0cmlidXRlcyYmaS5hdHRyKHQuYXR0cmlidXRlcyksaS5kYXRhKHt0eXBlOlwiYnV0dG9uR3JvdXBcIn0pLGkuYXR0cigkLHQudWlkKSxvPTA7YS5sZW5ndGg+bztvKyspYVtvXS51aWR8fChhW29dLnVpZD1jLmd1aWQoKSkscj1uKGUuZXh0ZW5kKHttb2JpbGU6dC5tb2JpbGV9LGFbb10pKSxyLmFwcGVuZFRvKGkpO2kuY2hpbGRyZW4oKS5maXJzdCgpLmFkZENsYXNzKEMpLGkuY2hpbGRyZW4oKS5sYXN0KCkuYWRkQ2xhc3MoUyl9fSx0b29sYmFyOmZ1bmN0aW9uKHQpe3ZhciBuPWUoXCI8ZGl2PjwvZGl2PlwiKTtyZXR1cm4gWS5idXR0b25Hcm91cC5iYXNlKHQsWS5idXR0b24udG9vbGJhcixuKSxuLmFkZENsYXNzKHYpLHQuYWxpZ24mJm4uYWRkQ2xhc3MoXCJrLWFsaWduLVwiK3QuYWxpZ24pLHQuaWQmJm4uYXR0cihcImlkXCIsdC5pZCksbn0sb3ZlcmZsb3c6ZnVuY3Rpb24odCl7dmFyIG49ZShcIjxsaT48L2xpPlwiKTtyZXR1cm4gWS5idXR0b25Hcm91cC5iYXNlKHQsWS5idXR0b24ub3ZlcmZsb3csbiksbi5hZGRDbGFzcygodC5tb2JpbGU/XCJcIjp2KStcIiBrLW92ZXJmbG93LWdyb3VwXCIpLHQuaWQmJm4uYXR0cihcImlkXCIsdC5pZCtcIl9vdmVyZmxvd1wiKSxufX0sc3BsaXRCdXR0b246e3Rvb2xiYXI6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG89ZSgnPGRpdiBjbGFzcz1cIicrXysnXCI+PC9kaXY+Jykscz1ZLmJ1dHRvbi50b29sYmFyKHQpLGM9ZSgnPGEgY2xhc3M9XCInK2YrXCIgXCIrSSsnXCI+PHNwYW4gY2xhc3M9XCInKyh0Lm1vYmlsZT9cImttLWljb24ga20tYXJyb3dkb3duXCI6XCJrLWljb24gay1pLWFycm93LXNcIikrJ1wiPjwvc3Bhbj48L2E+JyksZD1lKCc8dWwgY2xhc3M9XCInK1ArJ1wiPjwvdWw+JyksdT10Lm1lbnVCdXR0b25zO2ZvcihzLmFwcGVuZFRvKG8pLGMuYXBwZW5kVG8obyksZC5hcHBlbmRUbyhvKSxyPTA7dS5sZW5ndGg+cjtyKyspaT1ZLmJ1dHRvbi50b29sYmFyKGUuZXh0ZW5kKHttb2JpbGU6dC5tb2JpbGUsY2xpY2s6dC5jbGlja30sdVtyXSkpLGkud3JhcChcIjxsaT48L2xpPlwiKS5wYXJlbnQoKS5hcHBlbmRUbyhkKTtyZXR1cm4gdC5hbGlnbiYmby5hZGRDbGFzcyhcImstYWxpZ24tXCIrdC5hbGlnbiksdC5pZHx8KHQuaWQ9dC51aWQpLG8uYXR0cihcImlkXCIsdC5pZCtcIl93cmFwcGVyXCIpLGQuYXR0cihcImlkXCIsdC5pZCtcIl9vcHRpb25saXN0XCIpLmF0dHIoJCx0LnJvb3RVaWQpLHQubW9iaWxlJiYoZD1sKGQpKSxuPWQua2VuZG9Qb3B1cCh7YXBwZW5kVG86dC5tb2JpbGU/ZSh0Lm1vYmlsZSkuY2hpbGRyZW4oXCIua20tcGFuZVwiKTpudWxsLGFuY2hvcjpvLGNvcHlBbmNob3JTdHlsZXM6ITEsYW5pbWF0aW9uOnQuYW5pbWF0aW9uLG9wZW46YX0pLmRhdGEoXCJrZW5kb1BvcHVwXCIpLG8uZGF0YSh7dHlwZTpcInNwbGl0QnV0dG9uXCIsa2VuZG9Qb3B1cDpufSksby5hdHRyKCQsdC51aWQpLG99LG92ZXJmbG93OmZ1bmN0aW9uKHQpe3ZhciBuLGkscj1lKCc8bGkgY2xhc3M9XCInK18rJ1wiPjwvbGk+Jyksbz1ZLmJ1dHRvbi5vdmVyZmxvdyh0KSxhPXQubWVudUJ1dHRvbnM7Zm9yKG8uYXBwZW5kVG8ociksaT0wO2EubGVuZ3RoPmk7aSsrKW49WS5idXR0b24ub3ZlcmZsb3coZS5leHRlbmQoe21vYmlsZTp0Lm1vYmlsZX0sYVtpXSkpLG4uYXBwZW5kVG8ocik7cmV0dXJuIHQuaWQmJnIuYXR0cihcImlkXCIsdC5pZCtcIl9vdmVyZmxvd1wiKSxyLmRhdGEoe3R5cGU6XCJzcGxpdEJ1dHRvblwifSksci5hdHRyKCQsdC51aWQpLHJ9fSxzZXBhcmF0b3I6e2Jhc2U6ZnVuY3Rpb24odCxuKXt2YXIgaT1lKG4/XCI8bGk+Jm5ic3A7PC9saT5cIjpcIjxkaXY+Jm5ic3A7PC9kaXY+XCIpO3JldHVybiBpLmRhdGEoe3R5cGU6XCJzZXBhcmF0b3JcIn0pLGkuYXR0cigkLHQudWlkKSx0LmF0dHJpYnV0ZXMmJmkuYXR0cih0LmF0dHJpYnV0ZXMpLGkuYWRkQ2xhc3MoeSksaX0sdG9vbGJhcjpmdW5jdGlvbihlKXtyZXR1cm4gWS5zZXBhcmF0b3IuYmFzZShlLCExKX0sb3ZlcmZsb3c6ZnVuY3Rpb24oZSl7cmV0dXJuIFkuc2VwYXJhdG9yLmJhc2UoZSwhMCl9fSxvdmVyZmxvd0FuY2hvcjonPGRpdiBjbGFzcz1cImstb3ZlcmZsb3ctYW5jaG9yXCI+PC9kaXY+JyxvdmVyZmxvd0NvbnRhaW5lcjonPHVsIGNsYXNzPVwiay1vdmVyZmxvdy1jb250YWluZXIgay1saXN0LWNvbnRhaW5lclwiPjwvdWw+J30sSz1kLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpLHI9dGhpcztpZihkLmZuLmluaXQuY2FsbChyLHQsbiksbj1yLm9wdGlvbnMsdD1yLndyYXBwZXI9ci5lbGVtZW50LHQuYWRkQ2xhc3MocCtcIiBrLXdpZGdldFwiKSx0aGlzLnVpZD1jLmd1aWQoKSx0LmF0dHIoJCx0aGlzLnVpZCksci5pc01vYmlsZT1cImJvb2xlYW5cIj09dHlwZW9mIG4ubW9iaWxlP24ubW9iaWxlOnIuZWxlbWVudC5jbG9zZXN0KFwiLmttLXJvb3RcIilbMF0sci5hbmltYXRpb249ci5pc01vYmlsZT97b3Blbjp7ZWZmZWN0czpcImZhZGVcIn19Ont9LHIuaXNNb2JpbGUmJih0LmFkZENsYXNzKFwia20td2lkZ2V0XCIpLEQ9XCJrbS1pY29uXCIsQT1cImttLVwiLGY9XCJrbS1idXR0b25cIix2PVwia20tYnV0dG9uZ3JvdXAga20td2lkZ2V0XCIsaz1cImttLXN0YXRlLWFjdGl2ZVwiLHg9XCJrbS1zdGF0ZS1kaXNhYmxlZFwiKSxuLnJlc2l6YWJsZT8oci5fcmVuZGVyT3ZlcmZsb3coKSx0LmFkZENsYXNzKGIpLHIub3ZlcmZsb3dVc2VyRXZlbnRzPW5ldyBjLlVzZXJFdmVudHMoci5lbGVtZW50LHt0aHJlc2hvbGQ6NSxhbGxvd1NlbGVjdGlvbjohMCxmaWx0ZXI6XCIuXCIreix0YXA6dShyLl90b2dnbGVPdmVyZmxvdyxyKX0pLGMub25SZXNpemUoZnVuY3Rpb24oKXtyLnJlc2l6ZSgpfSkpOnIucG9wdXA9e2VsZW1lbnQ6ZShbXSl9LG4uaXRlbXMmJm4uaXRlbXMubGVuZ3RoKWZvcihpPTA7bi5pdGVtcy5sZW5ndGg+aTtpKyspci5hZGQobi5pdGVtc1tpXSk7ci51c2VyRXZlbnRzPW5ldyBjLlVzZXJFdmVudHMoZG9jdW1lbnQse3RocmVzaG9sZDo1LGFsbG93U2VsZWN0aW9uOiEwLGZpbHRlcjpcIltcIiskK1wiPVwiK3RoaXMudWlkK1wiXSAuXCIrZitcIiwgW1wiKyQrXCI9XCIrdGhpcy51aWQrXCJdIC5cIitnLHRhcDp1KHIuX2J1dHRvbkNsaWNrLHIpLHByZXNzOnMscmVsZWFzZTpzfSksbi5yZXNpemFibGUmJnRoaXMuX3RvZ2dsZU92ZXJmbG93QW5jaG9yKCksYy5ub3RpZnkocil9LGV2ZW50czpbTCxPLEgsTixWLFVdLG9wdGlvbnM6e25hbWU6XCJUb29sQmFyXCIsaXRlbXM6W10scmVzaXphYmxlOiEwLG1vYmlsZTpudWxsfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0LmVsZW1lbnQuZmluZChcIi5cIitfKS5lYWNoKGZ1bmN0aW9uKHQsbil7ZShuKS5kYXRhKFwia2VuZG9Qb3B1cFwiKS5kZXN0cm95KCl9KSx0LnVzZXJFdmVudHMuZGVzdHJveSgpLHQub3B0aW9ucy5yZXNpemFibGUmJih0Lm92ZXJmbG93VXNlckV2ZW50cy5kZXN0cm95KCksdC5wb3B1cC5kZXN0cm95KCkpLGQuZm4uZGVzdHJveS5jYWxsKHQpfSxhZGQ6ZnVuY3Rpb24odCl7dmFyIG4saSxyPVlbdC50eXBlXSxvPXQudGVtcGxhdGUsYT10aGlzLHM9YS5pc01vYmlsZT9cIlwiOlwiay1pdGVtIGstc3RhdGUtZGVmYXVsdFwiLGw9dC5vdmVyZmxvd1RlbXBsYXRlO2UuZXh0ZW5kKHQse3VpZDpjLmd1aWQoKSxhbmltYXRpb246YS5hbmltYXRpb24sbW9iaWxlOmEuaXNNb2JpbGUscm9vdFVpZDphLnVpZH0pLG8mJiFsJiYodC5vdmVyZmxvdz1XKSx0Lm92ZXJmbG93IT09VyYmYS5vcHRpb25zLnJlc2l6YWJsZSYmKGw/aT1lKGgobCk/bCh0KTpsKTpyJiYoaT0oci5vdmVyZmxvd3x8ZS5ub29wKSh0KSksaSYmaS5sZW5ndGgmJihcIkxJXCIhPT1pLnByb3AoXCJ0YWdOYW1lXCIpJiYoaS5yZW1vdmVBdHRyKCQpLGk9aS53cmFwKFwiPGxpPjwvbGk+XCIpLnBhcmVudCgpLGkuYXR0cigkLHQudWlkKSksYS5fYXR0cmlidXRlcyhpLHQpLGkuYWRkQ2xhc3MocykuYXBwZW5kVG8oYS5wb3B1cC5jb250YWluZXIpLGkuZGF0YShcIm92ZXJmbG93XCIpPT09aiYmaS5hZGRDbGFzcyhxKSxhLmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6aS5nZXQoKX19KSkpLHQub3ZlcmZsb3chPT1HJiYobz8obj1oKG8pP28odCk6byxuIGluc3RhbmNlb2YgalF1ZXJ5fHwobj1lKG4ucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKSkpLG49bi53cmFwKFwiPGRpdj48L2Rpdj5cIikucGFyZW50KCksbi5hdHRyKCQsdC51aWQpKTpyJiYobj0oci50b29sYmFyfHxlLm5vb3ApKHQpKSxuJiZuLmxlbmd0aCYmKGEuX2F0dHJpYnV0ZXMobix0KSxhLm9wdGlvbnMucmVzaXphYmxlPyhuLmFwcGVuZFRvKGEuZWxlbWVudCkuY3NzKFwidmlzaWJpbGl0eVwiLFwiaGlkZGVuXCIpLGEuX3NocmluayhhLmVsZW1lbnQuaW5uZXJXaWR0aCgpKSxuLmNzcyhcInZpc2liaWxpdHlcIixcInZpc2libGVcIikpOm4uYXBwZW5kVG8oYS5lbGVtZW50KSxhLmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6bi5nZXQoKX19KSkpfSxyZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMuZWxlbWVudC5maW5kKGUpOyFpLmxlbmd0aCYmdGhpcy5vcHRpb25zLnJlc2l6YWJsZT8oaT10aGlzLnBvcHVwLmVsZW1lbnQuZmluZChlKSxuPWkucGFyZW50KCkuYXR0cigkKSk6bj1pLmF0dHIoJCksdD1pLmRhdGEoXCJ0eXBlXCIpLGkucGFyZW50KFwiLlwiK18pLmRhdGEoXCJ0eXBlXCIpJiYodD1cInNwbGl0QnV0dG9uXCIsaT1pLnBhcmVudCgpKSxcInNwbGl0QnV0dG9uXCI9PT10JiZpLmRhdGEoXCJrZW5kb1BvcHVwXCIpLmRlc3Ryb3koKSxpLmFkZCh0aGlzLnBvcHVwLmVsZW1lbnQuZmluZChcIltcIiskK1wiPSdcIituK1wiJ11cIikpLnJlbW92ZSgpfSxlbmFibGU6ZnVuY3Rpb24obixpKXt2YXIgcj10aGlzLmVsZW1lbnQuZmluZChuKS5hdHRyKCQpOyFyJiZ0aGlzLnBvcHVwJiYocj10aGlzLnBvcHVwLmVsZW1lbnQuZmluZChuKS5wYXJlbnQoXCJsaVwiKS5hdHRyKCQpKSx0PT09aSYmKGk9ITApLGk/ZShcIltcIiskK1wiPSdcIityK1wiJ11cIikucmVtb3ZlQ2xhc3MoeCk6ZShcIltcIiskK1wiPSdcIityK1wiJ11cIikuYWRkQ2xhc3MoeCl9LGdldFNlbGVjdGVkRnJvbUdyb3VwOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVsZW1lbnQuZmluZChcIi5cIittK1wiW2RhdGEtZ3JvdXA9J1wiK2UrXCInXVwiKS5maWx0ZXIoXCIuXCIrayl9LHRvZ2dsZTpmdW5jdGlvbih0LG4pe3ZhciBpLHI9ZSh0KSxvPXIuZGF0YShcInVpZFwiKSxhPXIuZGF0YShcImdyb3VwXCIpO3IuaGFzQ2xhc3MobSkmJihhJiZ0aGlzLmVsZW1lbnQuYWRkKHRoaXMucG9wdXAuZWxlbWVudCkuZmluZChcIi5cIittK1wiW2RhdGEtZ3JvdXA9J1wiK2ErXCInXVwiKS5maWx0ZXIoXCIuXCIraykucmVtb3ZlQ2xhc3MoayksZS5jb250YWlucyh0aGlzLmVsZW1lbnRbMF0sclswXSk/KGk9dGhpcy5wb3B1cC5lbGVtZW50LmZpbmQoXCJbXCIrJCtcIj0nXCIrbytcIiddXCIpLFwiTElcIj09PWkucHJvcChcInRhZ05hbWVcIikmJihpPWkuZmluZChcIi5cIittK1wiOmZpcnN0XCIpKSk6KG89bz9vOnIucGFyZW50KCkuZGF0YShcInVpZFwiKSxpPXRoaXMuZWxlbWVudC5maW5kKFwiW1wiKyQrXCI9J1wiK28rXCInXVwiKSksci5hZGQoaSkudG9nZ2xlQ2xhc3MoayxuKSl9LF9hdHRyaWJ1dGVzOmZ1bmN0aW9uKGUsdCl7ZS5hdHRyKGMuYXR0cihcIm92ZXJmbG93XCIpLHQub3ZlcmZsb3d8fGopfSxfcmVuZGVyT3ZlcmZsb3c6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49WS5vdmVyZmxvd0NvbnRhaW5lcjt0Lm92ZXJmbG93QW5jaG9yPWUoWS5vdmVyZmxvd0FuY2hvcikuYWRkQ2xhc3MoZiksdC5lbGVtZW50LmFwcGVuZCh0Lm92ZXJmbG93QW5jaG9yKSx0LmlzTW9iaWxlPyh0Lm92ZXJmbG93QW5jaG9yLmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJrbS1pY29uIGttLW1vcmVcIj48L3NwYW4+Jyksbj1sKG4pKTp0Lm92ZXJmbG93QW5jaG9yLmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLW1vcmVcIj48L3NwYW4+JyksdC5wb3B1cD1uZXcgYy51aS5Qb3B1cChuLHtvcmlnaW46XCJib3R0b20gcmlnaHRcIixwb3NpdGlvbjpcInRvcCByaWdodFwiLGFuY2hvcjp0Lm92ZXJmbG93QW5jaG9yLGFuaW1hdGlvbjp0LmFuaW1hdGlvbixhcHBlbmRUbzp0LmlzTW9iaWxlP2UodC5pc01vYmlsZSkuY2hpbGRyZW4oXCIua20tcGFuZVwiKTpudWxsLGNvcHlBbmNob3JTdHlsZXM6ITEsb3BlbjpmdW5jdGlvbihuKXt2YXIgaT1jLndyYXAodC5wb3B1cC5lbGVtZW50KS5hZGRDbGFzcyhcImstb3ZlcmZsb3ctd3JhcHBlclwiKTt0LmlzTW9iaWxlP3QucG9wdXAuY29udGFpbmVyLmNzcyhcIm1heC1oZWlnaHRcIixwYXJzZUZsb2F0KGUoXCIua20tY29udGVudDp2aXNpYmxlXCIpLmlubmVySGVpZ2h0KCkpLTE1K1wicHhcIik6aS5jc3MoXCJtYXJnaW4tbGVmdFwiLChpLm91dGVyV2lkdGgoKS1pLndpZHRoKCkpLzIrMSksdC50cmlnZ2VyKFYpJiZuLnByZXZlbnREZWZhdWx0KCl9LGNsb3NlOmZ1bmN0aW9uKGUpe3QudHJpZ2dlcihVKSYmZS5wcmV2ZW50RGVmYXVsdCgpfX0pLHQucG9wdXAuY29udGFpbmVyPXQuaXNNb2JpbGU/dC5wb3B1cC5lbGVtZW50LmZpbmQoXCIuXCIrRik6dC5wb3B1cC5lbGVtZW50LHQucG9wdXAuY29udGFpbmVyLmF0dHIoJCx0aGlzLnVpZCl9LF90b2dnbGVPdmVyZmxvd0FuY2hvcjpmdW5jdGlvbigpe3RoaXMub3ZlcmZsb3dBbmNob3IuY3NzKHRoaXMucG9wdXAuZWxlbWVudC5jaGlsZHJlbihcIjpub3QoLlwiK3ErXCIsIC5cIit3K1wiKVwiKS5sZW5ndGg+MD97dmlzaWJpbGl0eTpcInZpc2libGVcIix3aWR0aDpcIlwifTp7dmlzaWJpbGl0eTpcImhpZGRlblwiLHdpZHRoOlwiMXB4XCJ9KX0sX2J1dHRvbkNsaWNrOmZ1bmN0aW9uKG4pe3ZhciBpLHIsbyxhLHMsbCxjLGQsdSxwPXRoaXM7aWYobi5wcmV2ZW50RGVmYXVsdCgpLHI9ZShuLnRhcmdldCkuY2xvc2VzdChcIi5cIitmLHAuZWxlbWVudCksIXIuaGFzQ2xhc3MoeikmJighci5sZW5ndGgmJnAucG9wdXAmJihyPWUobi50YXJnZXQpLmNsb3Nlc3QoXCIuXCIrZyxwLnBvcHVwLmNvbnRhaW5lcikpLGE9ci5oYXNDbGFzcyhnKT9yLnBhcmVudChcImxpXCIpLmhhc0NsYXNzKHgpOnIuaGFzQ2xhc3MoeCksIWEpKXtpZihuLnRhcmdldC5jbG9zZXN0KFwiLlwiK0kpLmxlbmd0aClyZXR1cm4gcC5fdG9nZ2xlKG4pLHQ7dT1yLmF0dHIoXCJpZFwiKT9yLmF0dHIoXCJpZFwiKS5yZXBsYWNlKC8oX292ZXJmbG93JCkvLFwiXCIpOnQsci5oYXNDbGFzcyhtKT8obD1yLmRhdGEoXCJncm91cFwiKSxjPWgoci5kYXRhKFwidG9nZ2xlXCIpKT9yLmRhdGEoXCJ0b2dnbGVcIik6bnVsbCxwLnRvZ2dsZShyKSxzPXIuaGFzQ2xhc3MoayksZD17dGFyZ2V0OnIsZ3JvdXA6bCxjaGVja2VkOnMsaWQ6dX0sYyYmYy5jYWxsKHAsZCkscC50cmlnZ2VyKE8sZCkpOihjPWgoci5kYXRhKFwiY2xpY2tcIikpP3IuZGF0YShcImNsaWNrXCIpOm51bGwsZD17dGFyZ2V0OnIsaWQ6dX0sYyYmYy5jYWxsKHAsZCkscC50cmlnZ2VyKEwsZCkpLHIuaGFzQ2xhc3MoZykmJnAucG9wdXAuY2xvc2UoKSxvPXIuY2xvc2VzdChcIi5rLXNwbGl0LWNvbnRhaW5lclwiKSxvWzBdJiYoaT1vLmRhdGEoXCJrZW5kb1BvcHVwXCIpLChpP2k6by5wYXJlbnRzKFwiLmttLXBvcHVwLXdyYXBwZXJcIikuZGF0YShcImtlbmRvUG9wdXBcIikpLmNsb3NlKCkpfX0sX3RvZ2dsZTpmdW5jdGlvbih0KXt2YXIgbixpPWUodC50YXJnZXQpLmNsb3Nlc3QoXCIuXCIrXykscj1pLmRhdGEoXCJrZW5kb1BvcHVwXCIpO3QucHJldmVudERlZmF1bHQoKSxpLmhhc0NsYXNzKHgpfHwobj1yLmVsZW1lbnQuaXMoXCI6dmlzaWJsZVwiKT90aGlzLnRyaWdnZXIoTix7dGFyZ2V0Oml9KTp0aGlzLnRyaWdnZXIoSCx7dGFyZ2V0Oml9KSxufHxyLnRvZ2dsZSgpKX0sX3RvZ2dsZU92ZXJmbG93OmZ1bmN0aW9uKCl7dGhpcy5wb3B1cC50b2dnbGUoKX0sX3Jlc2l6ZTpmdW5jdGlvbihlKXt2YXIgdD1lLndpZHRoO3RoaXMub3B0aW9ucy5yZXNpemFibGUmJih0aGlzLnBvcHVwLmNsb3NlKCksdGhpcy5fc2hyaW5rKHQpLHRoaXMuX3N0cmV0Y2godCksdGhpcy5fbWFya1Zpc2libGVzKCksdGhpcy5fdG9nZ2xlT3ZlcmZsb3dBbmNob3IoKSl9LF9jaGlsZHJlbldpZHRoOmZ1bmN0aW9uKCl7dmFyIHQ9MDtyZXR1cm4gdGhpcy5lbGVtZW50LmNoaWxkcmVuKFwiOnZpc2libGVcIikuZWFjaChmdW5jdGlvbigpe3QrPWUodGhpcykub3V0ZXJXaWR0aCghMCl9KSxNYXRoLmNlaWwodCl9LF9zaHJpbms6ZnVuY3Rpb24oZSl7dmFyIHQsbixpO2lmKGU8dGhpcy5fY2hpbGRyZW5XaWR0aCgpKWZvcihuPXRoaXMuZWxlbWVudC5jaGlsZHJlbihcIjp2aXNpYmxlOm5vdChbZGF0YS1vdmVyZmxvdz0nbmV2ZXInXSwgLlwiK3orXCIpXCIpLGk9bi5sZW5ndGgtMTtpPj0wJiYodD1uLmVxKGkpLCEoZT50aGlzLl9jaGlsZHJlbldpZHRoKCkpKTtpLS0pdGhpcy5faGlkZUl0ZW0odCl9LF9zdHJldGNoOmZ1bmN0aW9uKGUpe3ZhciB0LG4saTtpZihlPnRoaXMuX2NoaWxkcmVuV2lkdGgoKSlmb3Iobj10aGlzLmVsZW1lbnQuY2hpbGRyZW4oXCI6aGlkZGVuXCIpLGk9MDtuLmxlbmd0aD5pJiYodD1uLmVxKGkpLCEoZTx0aGlzLl9jaGlsZHJlbldpZHRoKCkpJiZ0aGlzLl9zaG93SXRlbSh0LGUpKTtpKyspO30sX2hpZGVJdGVtOmZ1bmN0aW9uKGUpe2UuaGlkZSgpLHRoaXMucG9wdXAmJnRoaXMucG9wdXAuY29udGFpbmVyLmZpbmQoXCI+bGlbZGF0YS11aWQ9J1wiK2UuZGF0YShcInVpZFwiKStcIiddXCIpLnJlbW92ZUNsYXNzKHEpfSxfc2hvd0l0ZW06ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5sZW5ndGgmJnQ+dGhpcy5fY2hpbGRyZW5XaWR0aCgpK2Uub3V0ZXJXaWR0aCghMCk/KGUuc2hvdygpLHRoaXMucG9wdXAmJnRoaXMucG9wdXAuY29udGFpbmVyLmZpbmQoXCI+bGlbZGF0YS11aWQ9J1wiK2UuZGF0YShcInVpZFwiKStcIiddXCIpLmFkZENsYXNzKHEpLCEwKTohMX0sX21hcmtWaXNpYmxlczpmdW5jdGlvbigpe3ZhciBlPXRoaXMucG9wdXAuY29udGFpbmVyLmNoaWxkcmVuKCksdD10aGlzLmVsZW1lbnQuY2hpbGRyZW4oXCI6bm90KC5rLW92ZXJmbG93LWFuY2hvcilcIiksbj1lLmZpbHRlcihcIjpub3QoLmstb3ZlcmZsb3ctaGlkZGVuKVwiKSxpPXQuZmlsdGVyKFwiOnZpc2libGVcIik7ZS5hZGQodCkucmVtb3ZlQ2xhc3MoUitcIiBcIitCKSxuLmZpcnN0KCkuYWRkKGkuZmlyc3QoKSkuYWRkQ2xhc3MoUiksbi5sYXN0KCkuYWRkKGkubGFzdCgpKS5hZGRDbGFzcyhCKX19KTtjLnVpLnBsdWdpbihLKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUpe3ZhciB0PW5ldyBEYXRlKDIxMDAsMCwxKTtyZXR1cm4gdC5zZXRNaW51dGVzKC1lKSx0fWZ1bmN0aW9uIGkoZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfWZ1bmN0aW9uIHIodCl7dmFyIG4saT1vLmdldEN1bHR1cmUodC5jdWx0dXJlKS5jYWxlbmRhcnMuc3RhbmRhcmQucGF0dGVybnM7dC5mb3JtYXQ9Yyh0LmZvcm1hdHx8aS5nKSx0LnRpbWVGb3JtYXQ9bj1jKHQudGltZUZvcm1hdHx8aS50KSxvLkRhdGVWaWV3Lm5vcm1hbGl6ZSh0KSwtMT09PWUuaW5BcnJheShuLHQucGFyc2VGb3JtYXRzKSYmdC5wYXJzZUZvcm1hdHMuc3BsaWNlKDEsMCxuKX12YXIgbz13aW5kb3cua2VuZG8sYT1vLlRpbWVWaWV3LHM9by5wYXJzZURhdGUsbD1vLl9hY3RpdmVFbGVtZW50LGM9by5fZXh0cmFjdEZvcm1hdCxkPW8uY2FsZW5kYXIsdT1kLmlzSW5SYW5nZSxoPWQucmVzdHJpY3RWYWx1ZSxwPWQuaXNFcXVhbERhdGVQYXJ0LGY9YS5nZXRNaWxsaXNlY29uZHMsZz1vLnVpLG09Zy5XaWRnZXQsdj1cIm9wZW5cIixfPVwiY2xvc2VcIix5PVwiY2hhbmdlXCIsdz1cIi5rZW5kb0RhdGVUaW1lUGlja2VyXCIsYj1cImNsaWNrXCIrdyxrPVwiZGlzYWJsZWRcIix4PVwicmVhZG9ubHlcIixDPVwiay1zdGF0ZS1kZWZhdWx0XCIsUz1cImstc3RhdGUtZm9jdXNlZFwiLFQ9XCJrLXN0YXRlLWhvdmVyXCIsRD1cImstc3RhdGUtZGlzYWJsZWRcIixBPVwibW91c2VlbnRlclwiK3crXCIgbW91c2VsZWF2ZVwiK3csRT1cIm1vdXNlZG93blwiK3csTT1cIm1vbnRoXCIsUD1cIjxzcGFuLz5cIixJPVwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsej1cImFyaWEtZXhwYW5kZWRcIixGPVwiYXJpYS1oaWRkZW5cIixSPVwiYXJpYS1vd25zXCIsQj1cImFyaWEtZGlzYWJsZWRcIixMPVwiYXJpYS1yZWFkb25seVwiLE89RGF0ZSxIPW5ldyBPKDE5MDAsMCwxKSxOPW5ldyBPKDIwOTksMTEsMzEpLFY9e3ZpZXc6XCJkYXRlXCJ9LFU9e3ZpZXc6XCJ0aW1lXCJ9LFc9ZS5leHRlbmQsaj1tLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpczttLmZuLmluaXQuY2FsbChpLGUsdCksZT1pLmVsZW1lbnQsdD1pLm9wdGlvbnMsdC5taW49cyhlLmF0dHIoXCJtaW5cIikpfHxzKHQubWluKSx0Lm1heD1zKGUuYXR0cihcIm1heFwiKSl8fHModC5tYXgpLHIodCksaS5fd3JhcHBlcigpLGkuX3ZpZXdzKCksaS5faWNvbnMoKSxpLl9yZXNldCgpLGkuX3RlbXBsYXRlKCk7dHJ5e2VbMF0uc2V0QXR0cmlidXRlKFwidHlwZVwiLFwidGV4dFwiKX1jYXRjaChhKXtlWzBdLnR5cGU9XCJ0ZXh0XCJ9ZS5hZGRDbGFzcyhcImstaW5wdXRcIikuYXR0cih7cm9sZTpcImNvbWJvYm94XCIsXCJhcmlhLWV4cGFuZGVkXCI6ITF9KSxpLl9taWRuaWdodD1mKHQubWluKStmKHQubWF4KT09PTAsbj1lLmlzKFwiW2Rpc2FibGVkXVwiKSxuP2kuZW5hYmxlKCExKTppLnJlYWRvbmx5KGUuaXMoXCJbcmVhZG9ubHldXCIpKSxpLl9vbGQ9aS5fdXBkYXRlKHQudmFsdWV8fGkuZWxlbWVudC52YWwoKSksaS5fb2xkVGV4dD1lLnZhbCgpLG8ubm90aWZ5KGkpfSxvcHRpb25zOntuYW1lOlwiRGF0ZVRpbWVQaWNrZXJcIix2YWx1ZTpudWxsLGZvcm1hdDpcIlwiLHRpbWVGb3JtYXQ6XCJcIixjdWx0dXJlOlwiXCIscGFyc2VGb3JtYXRzOltdLGRhdGVzOltdLG1pbjpuZXcgTyhIKSxtYXg6bmV3IE8oTiksaW50ZXJ2YWw6MzAsaGVpZ2h0OjIwMCxmb290ZXI6XCJcIixzdGFydDpNLGRlcHRoOk0sYW5pbWF0aW9uOnt9LG1vbnRoOnt9LEFSSUFUZW1wbGF0ZTonQ3VycmVudCBmb2N1c2VkIGRhdGUgaXMgIz1rZW5kby50b1N0cmluZyhkYXRhLmN1cnJlbnQsIFwiZFwiKSMnfSxldmVudHM6W3YsXyx5XSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxhPXRoaXMsbD1hLl92YWx1ZTttLmZuLnNldE9wdGlvbnMuY2FsbChhLGUpLGU9YS5vcHRpb25zLGUubWluPXQ9cyhlLm1pbiksZS5tYXg9bj1zKGUubWF4KSxyKGUpLGk9ZS52YWx1ZXx8YS5fdmFsdWV8fGEuZGF0ZVZpZXcuX2N1cnJlbnQsdCYmIXAodCxpKSYmKHQ9bmV3IE8oSCkpLG4mJiFwKG4saSkmJihuPW5ldyBPKE4pKSxhLmRhdGVWaWV3LnNldE9wdGlvbnMoZSksYS50aW1lVmlldy5zZXRPcHRpb25zKFcoe30sZSx7Zm9ybWF0OmUudGltZUZvcm1hdCxtaW46dCxtYXg6bn0pKSxsJiYoYS5lbGVtZW50LnZhbChvLnRvU3RyaW5nKGwsZS5mb3JtYXQsZS5jdWx0dXJlKSksYS5fdXBkYXRlQVJJQShsKSl9LF9lZGl0YWJsZTpmdW5jdGlvbih0KXt2YXIgbj10aGlzLHI9bi5lbGVtZW50Lm9mZih3KSxhPW4uX2RhdGVJY29uLm9mZih3KSxzPW4uX3RpbWVJY29uLm9mZih3KSxjPW4uX2lucHV0V3JhcHBlci5vZmYodyksZD10LnJlYWRvbmx5LHU9dC5kaXNhYmxlO2R8fHU/KGMuYWRkQ2xhc3ModT9EOkMpLnJlbW92ZUNsYXNzKHU/QzpEKSxyLmF0dHIoayx1KS5hdHRyKHgsZCkuYXR0cihCLHUpLmF0dHIoTCxkKSk6KGMuYWRkQ2xhc3MoQykucmVtb3ZlQ2xhc3MoRCkub24oQSxuLl90b2dnbGVIb3Zlciksci5yZW1vdmVBdHRyKGspLnJlbW92ZUF0dHIoeCkuYXR0cihCLCExKS5hdHRyKEwsITEpLm9uKFwia2V5ZG93blwiK3csZS5wcm94eShuLl9rZXlkb3duLG4pKS5vbihcImZvY3VzXCIrdyxmdW5jdGlvbigpe24uX2lucHV0V3JhcHBlci5hZGRDbGFzcyhTKX0pLm9uKFwiZm9jdXNvdXRcIit3LGZ1bmN0aW9uKCl7bi5faW5wdXRXcmFwcGVyLnJlbW92ZUNsYXNzKFMpLHIudmFsKCkhPT1uLl9vbGRUZXh0JiZuLl9jaGFuZ2Uoci52YWwoKSksbi5jbG9zZShcImRhdGVcIiksbi5jbG9zZShcInRpbWVcIil9KSxhLm9uKEUsaSkub24oYixmdW5jdGlvbigpe24udG9nZ2xlKFwiZGF0ZVwiKSxvLnN1cHBvcnQudG91Y2h8fHJbMF09PT1sKCl8fHIuZm9jdXMoKX0pLHMub24oRSxpKS5vbihiLGZ1bmN0aW9uKCl7bi50b2dnbGUoXCJ0aW1lXCIpLG8uc3VwcG9ydC50b3VjaHx8clswXT09PWwoKXx8ci5mb2N1cygpfSkpfSxyZWFkb25seTpmdW5jdGlvbihlKXt0aGlzLl9lZGl0YWJsZSh7cmVhZG9ubHk6ZT09PXQ/ITA6ZSxkaXNhYmxlOiExfSl9LGVuYWJsZTpmdW5jdGlvbihlKXt0aGlzLl9lZGl0YWJsZSh7cmVhZG9ubHk6ITEsZGlzYWJsZTohKGU9ZT09PXQ/ITA6ZSl9KX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7bS5mbi5kZXN0cm95LmNhbGwoZSksZS5kYXRlVmlldy5kZXN0cm95KCksZS50aW1lVmlldy5kZXN0cm95KCksZS5lbGVtZW50Lm9mZih3KSxlLl9kYXRlSWNvbi5vZmYodyksZS5fdGltZUljb24ub2ZmKHcpLGUuX2lucHV0V3JhcHBlci5vZmYodyksZS5fZm9ybSYmZS5fZm9ybS5vZmYoXCJyZXNldFwiLGUuX3Jlc2V0SGFuZGxlcil9LGNsb3NlOmZ1bmN0aW9uKGUpe1widGltZVwiIT09ZSYmKGU9XCJkYXRlXCIpLHRoaXNbZStcIlZpZXdcIl0uY2xvc2UoKX0sb3BlbjpmdW5jdGlvbihlKXtcInRpbWVcIiE9PWUmJihlPVwiZGF0ZVwiKSx0aGlzW2UrXCJWaWV3XCJdLm9wZW4oKX0sbWluOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vcHRpb24oXCJtaW5cIixlKX0sbWF4OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vcHRpb24oXCJtYXhcIixlKX0sdG9nZ2xlOmZ1bmN0aW9uKGUpe3ZhciB0PVwidGltZVZpZXdcIjtcInRpbWVcIiE9PWU/ZT1cImRhdGVcIjp0PVwiZGF0ZVZpZXdcIix0aGlzW2UrXCJWaWV3XCJdLnRvZ2dsZSgpLHRoaXNbdF0uY2xvc2UoKX0sdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztyZXR1cm4gZT09PXQ/bi5fdmFsdWU6KG4uX29sZD1uLl91cGRhdGUoZSksbnVsbD09PW4uX29sZCYmbi5lbGVtZW50LnZhbChcIlwiKSxuLl9vbGRUZXh0PW4uZWxlbWVudC52YWwoKSx0KX0sX2NoYW5nZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2U9dC5fdXBkYXRlKGUpLCt0Ll9vbGQhPStlJiYodC5fb2xkPWUsdC5fb2xkVGV4dD10LmVsZW1lbnQudmFsKCksdC50cmlnZ2VyKHkpLHQuZWxlbWVudC50cmlnZ2VyKHkpKX0sX29wdGlvbjpmdW5jdGlvbihlLGkpe3ZhciByLG8sYT10aGlzLGw9YS5vcHRpb25zLGM9YS50aW1lVmlldyxkPWMub3B0aW9ucyx1PWEuX3ZhbHVlfHxhLl9vbGQ7aWYoaT09PXQpcmV0dXJuIGxbZV07aWYoaT1zKGksbC5wYXJzZUZvcm1hdHMsbC5jdWx0dXJlKSl7aWYobC5taW4uZ2V0VGltZSgpPT09bC5tYXguZ2V0VGltZSgpJiYoZC5kYXRlcz1bXSksbFtlXT1uZXcgTyhpLmdldFRpbWUoKSksYS5kYXRlVmlld1tlXShpKSxhLl9taWRuaWdodD1mKGwubWluKStmKGwubWF4KT09PTAsdSYmKHI9cChsLm1pbix1KSxvPXAobC5tYXgsdSkpLHJ8fG8pe2lmKGRbZV09aSxyJiYhbyYmKGQubWF4PW4obC5pbnRlcnZhbCkpLG8pe2lmKGEuX21pZG5pZ2h0KXJldHVybiBjLmRhdGFCaW5kKFtOXSksdDtyfHwoZC5taW49SCl9fWVsc2UgZC5tYXg9TixkLm1pbj1IO2MuYmluZCgpfX0sX3RvZ2dsZUhvdmVyOmZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS50b2dnbGVDbGFzcyhULFwibW91c2VlbnRlclwiPT09dC50eXBlKX0sX3VwZGF0ZTpmdW5jdGlvbih0KXt2YXIgaSxyLGEsbCxjLGQ9dGhpcyxmPWQub3B0aW9ucyxnPWYubWluLG09Zi5tYXgsdj1mLmRhdGVzLF89ZC50aW1lVmlldyx5PWQuX3ZhbHVlLHc9cyh0LGYucGFyc2VGb3JtYXRzLGYuY3VsdHVyZSksYj1udWxsPT09dyYmbnVsbD09PXl8fHcgaW5zdGFuY2VvZiBEYXRlJiZ5IGluc3RhbmNlb2YgRGF0ZTtyZXR1cm4rdz09PSt5JiZiPyhjPW8udG9TdHJpbmcodyxmLmZvcm1hdCxmLmN1bHR1cmUpLGMhPT10JiZkLmVsZW1lbnQudmFsKG51bGw9PT13P3Q6Yyksdyk6KG51bGwhPT13JiZwKHcsZyk/dz1oKHcsZyxtKTp1KHcsZyxtKXx8KHc9bnVsbCksZC5fdmFsdWU9dyxfLnZhbHVlKHcpLGQuZGF0ZVZpZXcudmFsdWUodyksdyYmKGE9ZC5fb2xkLHI9Xy5vcHRpb25zLHZbMF0mJih2PWUuZ3JlcCh2LGZ1bmN0aW9uKGUpe3JldHVybiBwKHcsZSl9KSx2WzBdJiYoXy5kYXRhQmluZCh2KSxsPSEwKSksbHx8KHAodyxnKSYmKHIubWluPWcsci5tYXg9bihmLmludGVydmFsKSxpPSEwKSxwKHcsbSkmJihkLl9taWRuaWdodD8oXy5kYXRhQmluZChbTl0pLGw9ITApOihyLm1heD1tLGl8fChyLm1pbj1IKSxpPSEwKSkpLCFsJiYoIWEmJml8fGEmJiFwKGEsdykpJiYoaXx8KHIubWF4PU4sci5taW49SCksXy5iaW5kKCkpKSxkLmVsZW1lbnQudmFsKHc/by50b1N0cmluZyh3LGYuZm9ybWF0LGYuY3VsdHVyZSk6dCksZC5fdXBkYXRlQVJJQSh3KSx3KX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuZGF0ZVZpZXcsaT10LnRpbWVWaWV3LHI9dC5lbGVtZW50LnZhbCgpLGE9bi5wb3B1cC52aXNpYmxlKCk7ZS5hbHRLZXkmJmUua2V5Q29kZT09PW8ua2V5cy5ET1dOP3QudG9nZ2xlKGE/XCJ0aW1lXCI6XCJkYXRlXCIpOmE/KG4ubW92ZShlKSx0Ll91cGRhdGVBUklBKG4uX2N1cnJlbnQpKTppLnBvcHVwLnZpc2libGUoKT9pLm1vdmUoZSk6ZS5rZXlDb2RlPT09by5rZXlzLkVOVEVSJiZyIT09dC5fb2xkVGV4dCYmdC5fY2hhbmdlKHIpfSxfdmlld3M6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLGwsYz10aGlzLGQ9Yy5lbGVtZW50LGg9Yy5vcHRpb25zLHA9ZC5hdHRyKFwiaWRcIik7Yy5kYXRlVmlldz1lPW5ldyBvLkRhdGVWaWV3KFcoe30saCx7aWQ6cCxhbmNob3I6Yy53cmFwcGVyLGNoYW5nZTpmdW5jdGlvbigpe3ZhciB0LG49ZS5jYWxlbmRhci52YWx1ZSgpLGk9K24scj0raC5taW4sbz0raC5tYXg7KGk9PT1yfHxpPT09bykmJih0PW5ldyBPKCtjLl92YWx1ZSksdC5zZXRGdWxsWWVhcihuLmdldEZ1bGxZZWFyKCksbi5nZXRNb250aCgpLG4uZ2V0RGF0ZSgpKSx1KHQscixvKSYmKG49dCkpLGMuX2NoYW5nZShuKSxjLmNsb3NlKFwiZGF0ZVwiKX0sY2xvc2U6ZnVuY3Rpb24oZSl7Yy50cmlnZ2VyKF8sVik/ZS5wcmV2ZW50RGVmYXVsdCgpOihkLmF0dHIoeiwhMSksbi5hdHRyKEYsITApLHQucG9wdXAudmlzaWJsZSgpfHxkLnJlbW92ZUF0dHIoUikpfSxvcGVuOmZ1bmN0aW9uKHQpe2MudHJpZ2dlcih2LFYpP3QucHJldmVudERlZmF1bHQoKTooYy5lbGVtZW50LnZhbCgpIT09Yy5fb2xkVGV4dCYmKGw9cyhkLnZhbCgpLGgucGFyc2VGb3JtYXRzLGguY3VsdHVyZSksYy5kYXRlVmlld1tsP1wiY3VycmVudFwiOlwidmFsdWVcIl0obCkpLG4uYXR0cihGLCExKSxkLmF0dHIoeiwhMCkuYXR0cihSLGUuX2RhdGVWaWV3SUQpLGMuX3VwZGF0ZUFSSUEobCkpfX0pKSxuPWUuZGl2LHI9aC5taW4uZ2V0VGltZSgpLGMudGltZVZpZXc9dD1uZXcgYSh7aWQ6cCx2YWx1ZTpoLnZhbHVlLGFuY2hvcjpjLndyYXBwZXIsYW5pbWF0aW9uOmguYW5pbWF0aW9uLGZvcm1hdDpoLnRpbWVGb3JtYXQsY3VsdHVyZTpoLmN1bHR1cmUsaGVpZ2h0OmguaGVpZ2h0LGludGVydmFsOmguaW50ZXJ2YWwsbWluOm5ldyBPKEgpLG1heDpuZXcgTyhOKSxkYXRlczpyPT09aC5tYXguZ2V0VGltZSgpP1tuZXcgRGF0ZShyKV06W10scGFyc2VGb3JtYXRzOmgucGFyc2VGb3JtYXRzLGNoYW5nZTpmdW5jdGlvbihuLGkpe249dC5fcGFyc2UobiksaC5taW4+bj8obj1uZXcgTygraC5taW4pLHQub3B0aW9ucy5taW49bik6bj5oLm1heCYmKG49bmV3IE8oK2gubWF4KSx0Lm9wdGlvbnMubWF4PW4pLGk/KGMuX3RpbWVTZWxlY3RlZD0hMCxjLl9jaGFuZ2UobikpOihkLnZhbChvLnRvU3RyaW5nKG4saC5mb3JtYXQsaC5jdWx0dXJlKSksZS52YWx1ZShuKSxjLl91cGRhdGVBUklBKG4pKX0sY2xvc2U6ZnVuY3Rpb24odCl7Yy50cmlnZ2VyKF8sVSk/dC5wcmV2ZW50RGVmYXVsdCgpOihpLmF0dHIoRiwhMCksZC5hdHRyKHosITEpLGUucG9wdXAudmlzaWJsZSgpfHxkLnJlbW92ZUF0dHIoUikpfSxvcGVuOmZ1bmN0aW9uKGUpe3QuX2FkanVzdExpc3RXaWR0aCgpLGMudHJpZ2dlcih2LFUpP2UucHJldmVudERlZmF1bHQoKTooaS5hdHRyKEYsITEpLGQuYXR0cih6LCEwKS5hdHRyKFIsdC5fdGltZVZpZXdJRCksdC5vcHRpb25zLmFjdGl2ZSh0LmN1cnJlbnQoKSkpfSxhY3RpdmU6ZnVuY3Rpb24oZSl7ZC5yZW1vdmVBdHRyKEkpLGUmJmQuYXR0cihJLHQuX29wdGlvbklEKX19KSxpPXQudWx9LF9pY29uczpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4uZWxlbWVudDt0PWkubmV4dChcInNwYW4uay1zZWxlY3RcIiksdFswXXx8KHQ9ZSgnPHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstc2VsZWN0XCI+PHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstaWNvbiBrLWktY2FsZW5kYXJcIj5zZWxlY3Q8L3NwYW4+PHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstaWNvbiBrLWktY2xvY2tcIj5zZWxlY3Q8L3NwYW4+PC9zcGFuPicpLmluc2VydEFmdGVyKGkpKSx0PXQuY2hpbGRyZW4oKSxuLl9kYXRlSWNvbj10LmVxKDApLmF0dHIoe3JvbGU6XCJidXR0b25cIixcImFyaWEtY29udHJvbHNcIjpuLmRhdGVWaWV3Ll9kYXRlVmlld0lEfSksbi5fdGltZUljb249dC5lcSgxKS5hdHRyKHtyb2xlOlwiYnV0dG9uXCIsXCJhcmlhLWNvbnRyb2xzXCI6bi50aW1lVmlldy5fdGltZVZpZXdJRH0pfSxfd3JhcHBlcjpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4uZWxlbWVudDt0PWkucGFyZW50cyhcIi5rLWRhdGV0aW1lcGlja2VyXCIpLHRbMF18fCh0PWkud3JhcChQKS5wYXJlbnQoKS5hZGRDbGFzcyhcImstcGlja2VyLXdyYXAgay1zdGF0ZS1kZWZhdWx0XCIpLHQ9dC53cmFwKFApLnBhcmVudCgpKSx0WzBdLnN0eWxlLmNzc1RleHQ9aVswXS5zdHlsZS5jc3NUZXh0LGkuY3NzKHt3aWR0aDpcIjEwMCVcIixoZWlnaHQ6aVswXS5zdHlsZS5oZWlnaHR9KSxuLndyYXBwZXI9dC5hZGRDbGFzcyhcImstd2lkZ2V0IGstZGF0ZXRpbWVwaWNrZXIgay1oZWFkZXJcIikuYWRkQ2xhc3MoaVswXS5jbGFzc05hbWUpLG4uX2lucHV0V3JhcHBlcj1lKHRbMF0uZmlyc3RDaGlsZCl9LF9yZXNldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LmVsZW1lbnQsaT1uLmF0dHIoXCJmb3JtXCIpLHI9aT9lKFwiI1wiK2kpOm4uY2xvc2VzdChcImZvcm1cIik7clswXSYmKHQuX3Jlc2V0SGFuZGxlcj1mdW5jdGlvbigpe3QudmFsdWUoblswXS5kZWZhdWx0VmFsdWUpfSx0Ll9mb3JtPXIub24oXCJyZXNldFwiLHQuX3Jlc2V0SGFuZGxlcikpfSxfdGVtcGxhdGU6ZnVuY3Rpb24oKXt0aGlzLl9hcmlhVGVtcGxhdGU9by50ZW1wbGF0ZSh0aGlzLm9wdGlvbnMuQVJJQVRlbXBsYXRlKX0sX3VwZGF0ZUFSSUE6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLGk9bi5kYXRlVmlldy5jYWxlbmRhcjtuLmVsZW1lbnQucmVtb3ZlQXR0cihJKSxpJiYodD1pLl9jZWxsLHQuYXR0cihcImFyaWEtbGFiZWxcIixuLl9hcmlhVGVtcGxhdGUoe2N1cnJlbnQ6ZXx8aS5jdXJyZW50KCl9KSksbi5lbGVtZW50LmF0dHIoSSx0LmF0dHIoXCJpZFwiKSkpfX0pO2cucGx1Z2luKGopfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7cmV0dXJuIHYudGVzdChlKX1mdW5jdGlvbiBpKGUpe3JldHVybiBtLnRlc3QoZSl8fC9eXFxkKyQvLnRlc3QoZSlcclxufWZ1bmN0aW9uIHIoZSl7cmV0dXJuIW4oZSkmJiFpKGUpfWZ1bmN0aW9uIG8oZSx0KXt2YXIgaT1wYXJzZUludChlLDEwKTtyZXR1cm4gbihlKSYmKGk9TWF0aC5mbG9vcihpKnQvMTAwKSksaX1mdW5jdGlvbiBhKGUsbil7cmV0dXJuIGZ1bmN0aW9uKGkscil7dmFyIG8sYT10aGlzLmVsZW1lbnQuZmluZChpKS5kYXRhKEUpO3JldHVybiAxPT1hcmd1bWVudHMubGVuZ3RoP2FbZV06KGFbZV09cixuJiYobz10aGlzLmVsZW1lbnQuZGF0YShcImtlbmRvXCIrdGhpcy5vcHRpb25zLm5hbWUpLG8ucmVzaXplKCEwKSksdCl9fWZ1bmN0aW9uIHMoZSl7dmFyIHQ9dGhpcyxuPWUub3JpZW50YXRpb247dC5vd25lcj1lLHQuX2VsZW1lbnQ9ZS5lbGVtZW50LHQub3JpZW50YXRpb249bixwKHQsbj09PVM/YzpsKSx0Ll9yZXNpemFibGU9bmV3IGQudWkuUmVzaXphYmxlKGUuZWxlbWVudCx7b3JpZW50YXRpb246bixoYW5kbGU6XCIuay1zcGxpdGJhci1kcmFnZ2FibGUtXCIrbitcIltkYXRhLW1hcmtlcj1cIitlLl9tYXJrZXIrXCJdXCIsaGludDpmKHQuX2NyZWF0ZUhpbnQsdCksc3RhcnQ6Zih0Ll9zdGFydCx0KSxtYXg6Zih0Ll9tYXgsdCksbWluOmYodC5fbWluLHQpLGludmFsaWRDbGFzczpcImstcmVzdHJpY3RlZC1zaXplLVwiK24scmVzaXplZW5kOmYodC5fc3RvcCx0KX0pfXZhciBsLGMsZD13aW5kb3cua2VuZG8sdT1kLnVpLGg9ZC5rZXlzLHA9ZS5leHRlbmQsZj1lLnByb3h5LGc9dS5XaWRnZXQsbT0vXlxcZCsoXFwuXFxkKyk/cHgkL2ksdj0vXlxcZCsoXFwuXFxkKyk/JSQvaSxfPVwiLmtlbmRvU3BsaXR0ZXJcIix5PVwiZXhwYW5kXCIsdz1cImNvbGxhcHNlXCIsYj1cImNvbnRlbnRMb2FkXCIsaz1cImVycm9yXCIseD1cInJlc2l6ZVwiLEM9XCJsYXlvdXRDaGFuZ2VcIixTPVwiaG9yaXpvbnRhbFwiLFQ9XCJ2ZXJ0aWNhbFwiLEQ9XCJtb3VzZWVudGVyXCIsQT1cImNsaWNrXCIsRT1cInBhbmVcIixNPVwibW91c2VsZWF2ZVwiLFA9XCJrLXN0YXRlLWZvY3VzZWRcIixJPVwiay1cIitFLHo9XCIuXCIrSSxGPWcuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzO2cuZm4uaW5pdC5jYWxsKGksZSx0KSxpLndyYXBwZXI9aS5lbGVtZW50LG49aS5vcHRpb25zLm9yaWVudGF0aW9uLnRvTG93ZXJDYXNlKCkhPVQsaS5vcmllbnRhdGlvbj1uP1M6VCxpLl9kaW1lbnNpb249bj9cIndpZHRoXCI6XCJoZWlnaHRcIixpLl9rZXlzPXtkZWNyZWFzZTpuP2guTEVGVDpoLlVQLGluY3JlYXNlOm4/aC5SSUdIVDpoLkRPV059LGkuX3Jlc2l6ZVN0ZXA9MTAsaS5fbWFya2VyPWQuZ3VpZCgpLnN1YnN0cmluZygwLDgpLGkuX2luaXRQYW5lcygpLGkucmVzaXppbmc9bmV3IHMoaSksaS5lbGVtZW50LnRyaWdnZXJIYW5kbGVyKFwiaW5pdFwiK18pfSxldmVudHM6W3ksdyxiLGsseCxDXSxfYXR0YWNoRXZlbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucy5vcmllbnRhdGlvbjt0LmVsZW1lbnQuY2hpbGRyZW4oXCIuay1zcGxpdGJhci1kcmFnZ2FibGUtXCIrbikub24oXCJrZXlkb3duXCIrXyxlLnByb3h5KHQuX2tleWRvd24sdCkpLm9uKFwibW91c2Vkb3duXCIrXyxmdW5jdGlvbihlKXtlLmN1cnJlbnRUYXJnZXQuZm9jdXMoKX0pLm9uKFwiZm9jdXNcIitfLGZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcyhQKX0pLm9uKFwiYmx1clwiK18sZnVuY3Rpb24obil7ZShuLmN1cnJlbnRUYXJnZXQpLnJlbW92ZUNsYXNzKFApLHQucmVzaXppbmcmJnQucmVzaXppbmcuZW5kKCl9KS5vbihEK18sZnVuY3Rpb24oKXtlKHRoaXMpLmFkZENsYXNzKFwiay1zcGxpdGJhci1cIit0Lm9yaWVudGF0aW9uK1wiLWhvdmVyXCIpfSkub24oTStfLGZ1bmN0aW9uKCl7ZSh0aGlzKS5yZW1vdmVDbGFzcyhcImstc3BsaXRiYXItXCIrdC5vcmllbnRhdGlvbitcIi1ob3ZlclwiKX0pLm9uKFwibW91c2Vkb3duXCIrXyxmdW5jdGlvbigpe3QuX3BhbmVzKCkuYXBwZW5kKFwiPGRpdiBjbGFzcz0nay1zcGxpdHRlci1vdmVybGF5IGstb3ZlcmxheScgLz5cIil9KS5vbihcIm1vdXNldXBcIitfLGZ1bmN0aW9uKCl7dC5fcGFuZXMoKS5jaGlsZHJlbihcIi5rLXNwbGl0dGVyLW92ZXJsYXlcIikucmVtb3ZlKCl9KS5lbmQoKS5jaGlsZHJlbihcIi5rLXNwbGl0YmFyXCIpLm9uKFwiZGJsY2xpY2tcIitfLGYodC5fdG9nZ2xlUGFuZSx0KSkuY2hpbGRyZW4oXCIuay1jb2xsYXBzZS1uZXh0LCAuay1jb2xsYXBzZS1wcmV2XCIpLm9uKEErXyx0Ll9hcnJvd0NsaWNrKHcpKS5lbmQoKS5jaGlsZHJlbihcIi5rLWV4cGFuZC1uZXh0LCAuay1leHBhbmQtcHJldlwiKS5vbihBK18sdC5fYXJyb3dDbGljayh5KSkuZW5kKCkuZW5kKCksZSh3aW5kb3cpLm9uKFwicmVzaXplXCIrXyt0Ll9tYXJrZXIsZih0LnJlc2l6ZSx0KSl9LF9kZXRhY2hFdmVudHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QuZWxlbWVudC5jaGlsZHJlbihcIi5rLXNwbGl0YmFyLWRyYWdnYWJsZS1cIit0Lm9yaWVudGF0aW9uKS5vZmYoXykuZW5kKCkuY2hpbGRyZW4oXCIuay1zcGxpdGJhclwiKS5vZmYoXCJkYmxjbGlja1wiK18pLmNoaWxkcmVuKFwiLmstY29sbGFwc2UtbmV4dCwgLmstY29sbGFwc2UtcHJldiwgLmstZXhwYW5kLW5leHQsIC5rLWV4cGFuZC1wcmV2XCIpLm9mZihfKSxlKHdpbmRvdykub2ZmKFwicmVzaXplXCIrXyt0Ll9tYXJrZXIpfSxvcHRpb25zOntuYW1lOlwiU3BsaXR0ZXJcIixvcmllbnRhdGlvbjpTLHBhbmVzOltdfSxkZXN0cm95OmZ1bmN0aW9uKCl7Zy5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5fZGV0YWNoRXZlbnRzKCksdGhpcy5yZXNpemluZyYmdGhpcy5yZXNpemluZy5kZXN0cm95KCksZC5kZXN0cm95KHRoaXMuZWxlbWVudCksdGhpcy53cmFwcGVyPXRoaXMuZWxlbWVudD1udWxsfSxfa2V5ZG93bjpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXMscj10LmtleUNvZGUsbz1pLnJlc2l6aW5nLGE9ZSh0LmN1cnJlbnRUYXJnZXQpLHM9aS5fa2V5cyxsPXI9PT1zLmluY3JlYXNlLGM9cj09PXMuZGVjcmVhc2U7bHx8Yz8odC5jdHJsS2V5PyhuPWFbYz9cIm5leHRcIjpcInByZXZcIl0oKSxvJiZvLmlzUmVzaXppbmcoKSYmby5lbmQoKSxuW2kuX2RpbWVuc2lvbl0oKT9pLl90cmlnZ2VyQWN0aW9uKHcsYVtjP1wicHJldlwiOlwibmV4dFwiXSgpKTppLl90cmlnZ2VyQWN0aW9uKHksbikpOm8mJm8ubW92ZSgoYz8tMToxKSppLl9yZXNpemVTdGVwLGEpLHQucHJldmVudERlZmF1bHQoKSk6cj09PWguRU5URVImJm8mJihvLmVuZCgpLHQucHJldmVudERlZmF1bHQoKSl9LF9pbml0UGFuZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMucGFuZXN8fFtdLHQ9dGhpczt0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJrLXdpZGdldFwiKS5hZGRDbGFzcyhcImstc3BsaXR0ZXJcIikuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKG4saSl7XCJzY3JpcHRcIiE9aS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZ0Ll9pbml0UGFuZShpLGVbbl0pfSksdGhpcy5yZXNpemUoKX0sX2luaXRQYW5lOmZ1bmN0aW9uKHQsbil7dD1lKHQpLmF0dHIoXCJyb2xlXCIsXCJncm91cFwiKS5hZGRDbGFzcyhJKSx0LmRhdGEoRSxuP246e30pLnRvZ2dsZUNsYXNzKFwiay1zY3JvbGxhYmxlXCIsbj9uLnNjcm9sbGFibGUhPT0hMTohMCksdGhpcy5hamF4UmVxdWVzdCh0KX0sYWpheFJlcXVlc3Q6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI9dGhpcztlPXIuZWxlbWVudC5maW5kKGUpLGk9ZS5kYXRhKEUpLHQ9dHx8aS5jb250ZW50VXJsLHQmJihlLmFwcGVuZChcIjxzcGFuIGNsYXNzPSdrLWljb24gay1sb2FkaW5nIGstcGFuZS1sb2FkaW5nJyAvPlwiKSxkLmlzTG9jYWxVcmwodCk/alF1ZXJ5LmFqYXgoe3VybDp0LGRhdGE6bnx8e30sdHlwZTpcIkdFVFwiLGRhdGFUeXBlOlwiaHRtbFwiLHN1Y2Nlc3M6ZnVuY3Rpb24odCl7ci5hbmd1bGFyKFwiY2xlYW51cFwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmUuZ2V0KCl9fSksZS5odG1sKHQpLHIuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czplLmdldCgpfX0pLHIudHJpZ2dlcihiLHtwYW5lOmVbMF19KX0sZXJyb3I6ZnVuY3Rpb24odCxuKXtyLnRyaWdnZXIoayx7cGFuZTplWzBdLHN0YXR1czpuLHhocjp0fSl9fSk6ZS5yZW1vdmVDbGFzcyhcImstc2Nyb2xsYWJsZVwiKS5odG1sKFwiPGlmcmFtZSBzcmM9J1wiK3QrXCInIGZyYW1lYm9yZGVyPScwJyBjbGFzcz0nay1jb250ZW50LWZyYW1lJz5UaGlzIHBhZ2UgcmVxdWlyZXMgZnJhbWVzIGluIG9yZGVyIHRvIHNob3cgY29udGVudDwvaWZyYW1lPlwiKSl9LF90cmlnZ2VyQWN0aW9uOmZ1bmN0aW9uKGUsdCl7dGhpcy50cmlnZ2VyKGUse3BhbmU6dFswXX0pfHx0aGlzW2VdKHRbMF0pfSxfdG9nZ2xlUGFuZTpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXMscj1lKHQudGFyZ2V0KTtyLmNsb3Nlc3QoXCIuay1zcGxpdHRlclwiKVswXT09aS5lbGVtZW50WzBdJiYobj1yLmNoaWxkcmVuKFwiLmstaWNvbjpub3QoLmstcmVzaXplLWhhbmRsZSlcIiksMT09PW4ubGVuZ3RoJiYobi5pcyhcIi5rLWNvbGxhcHNlLXByZXZcIik/aS5fdHJpZ2dlckFjdGlvbih3LHIucHJldigpKTpuLmlzKFwiLmstY29sbGFwc2UtbmV4dFwiKT9pLl90cmlnZ2VyQWN0aW9uKHcsci5uZXh0KCkpOm4uaXMoXCIuay1leHBhbmQtcHJldlwiKT9pLl90cmlnZ2VyQWN0aW9uKHksci5wcmV2KCkpOm4uaXMoXCIuay1leHBhbmQtbmV4dFwiKSYmaS5fdHJpZ2dlckFjdGlvbih5LHIubmV4dCgpKSkpfSxfYXJyb3dDbGljazpmdW5jdGlvbih0KXt2YXIgbj10aGlzO3JldHVybiBmdW5jdGlvbihpKXt2YXIgcixvPWUoaS50YXJnZXQpO28uY2xvc2VzdChcIi5rLXNwbGl0dGVyXCIpWzBdPT1uLmVsZW1lbnRbMF0mJihyPW8uaXMoXCIuay1cIit0K1wiLXByZXZcIik/by5wYXJlbnQoKS5wcmV2KCk6by5wYXJlbnQoKS5uZXh0KCksbi5fdHJpZ2dlckFjdGlvbih0LHIpKX19LF91cGRhdGVTcGxpdEJhcjpmdW5jdGlvbihlLHQsbil7dmFyIGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD9cIjxkaXYgY2xhc3M9J2staWNvbiBcIitlK1wiJyAvPlwiOlwiXCJ9LHI9dGhpcy5vcmllbnRhdGlvbixvPXQucmVzaXphYmxlIT09ITEmJm4ucmVzaXphYmxlIT09ITEsYT10LmNvbGxhcHNpYmxlLHM9dC5jb2xsYXBzZWQsbD1uLmNvbGxhcHNpYmxlLGM9bi5jb2xsYXBzZWQ7ZS5hZGRDbGFzcyhcImstc3BsaXRiYXIgay1zdGF0ZS1kZWZhdWx0IGstc3BsaXRiYXItXCIrcikuYXR0cihcInJvbGVcIixcInNlcGFyYXRvclwiKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCEoc3x8YykpLnJlbW92ZUNsYXNzKFwiay1zcGxpdGJhci1cIityK1wiLWhvdmVyXCIpLnRvZ2dsZUNsYXNzKFwiay1zcGxpdGJhci1kcmFnZ2FibGUtXCIrcixvJiYhcyYmIWMpLnRvZ2dsZUNsYXNzKFwiay1zcGxpdGJhci1zdGF0aWMtXCIrciwhbyYmIWEmJiFsKS5odG1sKGkoXCJrLWNvbGxhcHNlLXByZXZcIixhJiYhcyYmIWMpK2koXCJrLWV4cGFuZC1wcmV2XCIsYSYmcyYmIWMpK2koXCJrLXJlc2l6ZS1oYW5kbGVcIixvKStpKFwiay1jb2xsYXBzZS1uZXh0XCIsbCYmIWMmJiFzKStpKFwiay1leHBhbmQtbmV4dFwiLGwmJmMmJiFzKSksb3x8YXx8bHx8ZS5yZW1vdmVBdHRyKFwidGFiaW5kZXhcIil9LF91cGRhdGVTcGxpdEJhcnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuZWxlbWVudC5jaGlsZHJlbihcIi5rLXNwbGl0YmFyXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1lKHRoaXMpLGk9bi5wcmV2QWxsKHopLmZpcnN0KCkuZGF0YShFKSxyPW4ubmV4dEFsbCh6KS5maXJzdCgpLmRhdGEoRSk7ciYmdC5fdXBkYXRlU3BsaXRCYXIobixpLHIpfSl9LF9yZW1vdmVTcGxpdEJhcnM6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuY2hpbGRyZW4oXCIuay1zcGxpdGJhclwiKS5yZW1vdmUoKX0sX3BhbmVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudC5jaGlsZHJlbih6KX0sX3Jlc2l6ZTpmdW5jdGlvbigpe3ZhciBuLGksYSxzLGwsYyx1LGgscCxmLGc9dGhpcyxtPWcuZWxlbWVudCx2PW0uY2hpbGRyZW4oeiksXz1nLm9yaWVudGF0aW9uPT1TLHk9bS5jaGlsZHJlbihcIi5rLXNwbGl0YmFyXCIpLHc9eS5sZW5ndGgsYj1fP1wid2lkdGhcIjpcImhlaWdodFwiLGs9bVtiXSgpOzA9PT13Pyh3PXYubGVuZ3RoLTEsdi5zbGljZSgwLHcpLmFmdGVyKFwiPGRpdiB0YWJpbmRleD0nMCcgY2xhc3M9J2stc3BsaXRiYXInIGRhdGEtbWFya2VyPSdcIitnLl9tYXJrZXIrXCInIC8+XCIpLGcuX3VwZGF0ZVNwbGl0QmFycygpLHk9bS5jaGlsZHJlbihcIi5rLXNwbGl0YmFyXCIpKTpnLl91cGRhdGVTcGxpdEJhcnMoKSx5LmVhY2goZnVuY3Rpb24oKXtrLT10aGlzW18/XCJvZmZzZXRXaWR0aFwiOlwib2Zmc2V0SGVpZ2h0XCJdfSksbj0wLGk9MCxhPWUoKSx2LmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDowfSlbYl0oZnVuY3Rpb24oKXt2YXIgcyxsPWUodGhpcyksYz1sLmRhdGEoRSl8fHt9O2lmKGwucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWNvbGxhcHNlZFwiKSxjLmNvbGxhcHNlZClzPWMuY29sbGFwc2VkU2l6ZT9vKGMuY29sbGFwc2VkU2l6ZSxrKTowLGwuY3NzKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKS5hZGRDbGFzcyhcImstc3RhdGUtY29sbGFwc2VkXCIpO2Vsc2V7aWYocihjLnNpemUpKXJldHVybiBhPWEuYWRkKHRoaXMpLHQ7cz1vKGMuc2l6ZSxrKX1yZXR1cm4gaSsrLG4rPXMsc30pLGstPW4scz1hLmxlbmd0aCxsPU1hdGguZmxvb3Ioay9zKSxhLnNsaWNlKDAscy0xKS5jc3MoYixsKS5lbmQoKS5lcShzLTEpLmNzcyhiLGstKHMtMSkqbCksYz0wLHU9Xz9cImhlaWdodFwiOlwid2lkdGhcIixoPV8/XCJsZWZ0XCI6XCJ0b3BcIixwPV8/XCJvZmZzZXRXaWR0aFwiOlwib2Zmc2V0SGVpZ2h0XCIsMD09PXMmJihmPXYuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIShlKHRoaXMpLmRhdGEoRSl8fHt9KS5jb2xsYXBzZWR9KS5sYXN0KCksZltiXShrK2ZbMF1bcF0pKSxtLmNoaWxkcmVuKCkuY3NzKHUsbVt1XSgpKS5lYWNoKGZ1bmN0aW9uKGUsdCl7XCJzY3JpcHRcIiE9dC50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJih0LnN0eWxlW2hdPU1hdGguZmxvb3IoYykrXCJweFwiLGMrPXRbcF0pfSksZy5fZGV0YWNoRXZlbnRzKCksZy5fYXR0YWNoRXZlbnRzKCksZC5yZXNpemUodiksZy50cmlnZ2VyKEMpfSx0b2dnbGU6ZnVuY3Rpb24oZSxuKXt2YXIgaSxyPXRoaXM7ZT1yLmVsZW1lbnQuZmluZChlKSxpPWUuZGF0YShFKSwobnx8aS5jb2xsYXBzaWJsZSkmJigxPT1hcmd1bWVudHMubGVuZ3RoJiYobj1pLmNvbGxhcHNlZD09PXQ/ITE6aS5jb2xsYXBzZWQpLGkuY29sbGFwc2VkPSFuLGkuY29sbGFwc2VkP2UuY3NzKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKTplLmNzcyhcIm92ZXJmbG93XCIsXCJcIiksci5yZXNpemUoITApKX0sY29sbGFwc2U6ZnVuY3Rpb24oZSl7dGhpcy50b2dnbGUoZSwhMSl9LGV4cGFuZDpmdW5jdGlvbihlKXt0aGlzLnRvZ2dsZShlLCEwKX0sX2FkZFBhbmU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXM7cmV0dXJuIG4ubGVuZ3RoJiYoaS5vcHRpb25zLnBhbmVzLnNwbGljZSh0LDAsZSksaS5faW5pdFBhbmUobixlKSxpLl9yZW1vdmVTcGxpdEJhcnMoKSxpLnJlc2l6ZSghMCkpLG59LGFwcGVuZDpmdW5jdGlvbih0KXt0PXR8fHt9O3ZhciBuPXRoaXMsaT1lKFwiPGRpdiAvPlwiKS5hcHBlbmRUbyhuLmVsZW1lbnQpO3JldHVybiBuLl9hZGRQYW5lKHQsbi5vcHRpb25zLnBhbmVzLmxlbmd0aCxpKX0saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKHQsbil7bj1lKG4pLHQ9dHx8e307dmFyIGk9dGhpcyxyPWkud3JhcHBlci5jaGlsZHJlbihcIi5rLXBhbmVcIikuaW5kZXgobiksbz1lKFwiPGRpdiAvPlwiKS5pbnNlcnRCZWZvcmUoZShuKSk7cmV0dXJuIGkuX2FkZFBhbmUodCxyLG8pfSxpbnNlcnRBZnRlcjpmdW5jdGlvbih0LG4pe249ZShuKSx0PXR8fHt9O3ZhciBpPXRoaXMscj1pLndyYXBwZXIuY2hpbGRyZW4oXCIuay1wYW5lXCIpLmluZGV4KG4pLG89ZShcIjxkaXYgLz5cIikuaW5zZXJ0QWZ0ZXIoZShuKSk7cmV0dXJuIGkuX2FkZFBhbmUodCxyKzEsbyl9LHJlbW92ZTpmdW5jdGlvbih0KXt0PWUodCk7dmFyIG49dGhpcztyZXR1cm4gdC5sZW5ndGgmJihkLmRlc3Ryb3kodCksdC5lYWNoKGZ1bmN0aW9uKHQsaSl7bi5vcHRpb25zLnBhbmVzLnNwbGljZShuLndyYXBwZXIuY2hpbGRyZW4oXCIuay1wYW5lXCIpLmluZGV4KGkpLDEpLGUoaSkucmVtb3ZlKCl9KSxuLl9yZW1vdmVTcGxpdEJhcnMoKSxuLm9wdGlvbnMucGFuZXMubGVuZ3RoJiZuLnJlc2l6ZSghMCkpLG59LHNpemU6YShcInNpemVcIiwhMCksbWluOmEoXCJtaW5cIiksbWF4OmEoXCJtYXhcIil9KTt1LnBsdWdpbihGKSxsPXtzaXppbmdQcm9wZXJ0eTpcImhlaWdodFwiLHNpemluZ0RvbVByb3BlcnR5Olwib2Zmc2V0SGVpZ2h0XCIsYWx0ZXJuYXRlU2l6aW5nUHJvcGVydHk6XCJ3aWR0aFwiLHBvc2l0aW9uaW5nUHJvcGVydHk6XCJ0b3BcIixtb3VzZVBvc2l0aW9uaW5nUHJvcGVydHk6XCJwYWdlWVwifSxjPXtzaXppbmdQcm9wZXJ0eTpcIndpZHRoXCIsc2l6aW5nRG9tUHJvcGVydHk6XCJvZmZzZXRXaWR0aFwiLGFsdGVybmF0ZVNpemluZ1Byb3BlcnR5OlwiaGVpZ2h0XCIscG9zaXRpb25pbmdQcm9wZXJ0eTpcImxlZnRcIixtb3VzZVBvc2l0aW9uaW5nUHJvcGVydHk6XCJwYWdlWFwifSxzLnByb3RvdHlwZT17cHJlc3M6ZnVuY3Rpb24oZSl7dGhpcy5fcmVzaXphYmxlLnByZXNzKGUpfSxtb3ZlOmZ1bmN0aW9uKGUsdCl7dGhpcy5wcmVzc2VkfHwodGhpcy5wcmVzcyh0KSx0aGlzLnByZXNzZWQ9ITApLHRoaXMuX3Jlc2l6YWJsZS50YXJnZXR8fHRoaXMuX3Jlc2l6YWJsZS5wcmVzcyh0KSx0aGlzLl9yZXNpemFibGUubW92ZShlKX0sZW5kOmZ1bmN0aW9uKCl7dGhpcy5fcmVzaXphYmxlLmVuZCgpLHRoaXMucHJlc3NlZD0hMX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX3Jlc2l6YWJsZS5kZXN0cm95KCksdGhpcy5fcmVzaXphYmxlPXRoaXMuX2VsZW1lbnQ9dGhpcy5vd25lcj1udWxsfSxpc1Jlc2l6aW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Jlc2l6YWJsZS5yZXNpemluZ30sX2NyZWF0ZUhpbnQ6ZnVuY3Rpb24odCl7dmFyIG49dGhpcztyZXR1cm4gZShcIjxkaXYgY2xhc3M9J2stZ2hvc3Qtc3BsaXRiYXIgay1naG9zdC1zcGxpdGJhci1cIituLm9yaWVudGF0aW9uK1wiIGstc3RhdGUtZGVmYXVsdCcgLz5cIikuY3NzKG4uYWx0ZXJuYXRlU2l6aW5nUHJvcGVydHksdFtuLmFsdGVybmF0ZVNpemluZ1Byb3BlcnR5XSgpKX0sX3N0YXJ0OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMscj1lKHQuY3VycmVudFRhcmdldCksbz1yLnByZXYoKSxhPXIubmV4dCgpLHM9by5kYXRhKEUpLGw9YS5kYXRhKEUpLGM9cGFyc2VJbnQob1swXS5zdHlsZVtuLnBvc2l0aW9uaW5nUHJvcGVydHldLDEwKSxkPXBhcnNlSW50KGFbMF0uc3R5bGVbbi5wb3NpdGlvbmluZ1Byb3BlcnR5XSwxMCkrYVswXVtuLnNpemluZ0RvbVByb3BlcnR5XS1yWzBdW24uc2l6aW5nRG9tUHJvcGVydHldLHU9cGFyc2VJbnQobi5fZWxlbWVudC5jc3Mobi5zaXppbmdQcm9wZXJ0eSksMTApLGg9ZnVuY3Rpb24oZSl7dmFyIHQ9cGFyc2VJbnQoZSwxMCk7cmV0dXJuKGkoZSk/dDp1KnQvMTAwKXx8MH0scD1oKHMubWluKSxmPWgocy5tYXgpfHxkLWMsZz1oKGwubWluKSxtPWgobC5tYXgpfHxkLWM7bi5wcmV2aW91c1BhbmU9byxuLm5leHRQYW5lPWEsbi5fbWF4UG9zaXRpb249TWF0aC5taW4oZC1nLGMrZiksbi5fbWluUG9zaXRpb249TWF0aC5tYXgoYytwLGQtbSl9LF9tYXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWF4UG9zaXRpb259LF9taW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWluUG9zaXRpb259LF9zdG9wOmZ1bmN0aW9uKHQpe3ZhciBuLGksbyxhLHMsbCxjLHUsaD10aGlzLHA9ZSh0LmN1cnJlbnRUYXJnZXQpLGY9aC5vd25lcjtyZXR1cm4gZi5fcGFuZXMoKS5jaGlsZHJlbihcIi5rLXNwbGl0dGVyLW92ZXJsYXlcIikucmVtb3ZlKCksdC5rZXlDb2RlIT09ZC5rZXlzLkVTQyYmKG49dC5wb3NpdGlvbixpPXAucHJldigpLG89cC5uZXh0KCksYT1pLmRhdGEoRSkscz1vLmRhdGEoRSksbD1uLXBhcnNlSW50KGlbMF0uc3R5bGVbaC5wb3NpdGlvbmluZ1Byb3BlcnR5XSwxMCksYz1wYXJzZUludChvWzBdLnN0eWxlW2gucG9zaXRpb25pbmdQcm9wZXJ0eV0sMTApK29bMF1baC5zaXppbmdEb21Qcm9wZXJ0eV0tbi1wWzBdW2guc2l6aW5nRG9tUHJvcGVydHldLHU9aC5fZWxlbWVudC5jaGlsZHJlbih6KS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gcihlKHRoaXMpLmRhdGEoRSkuc2l6ZSl9KS5sZW5ndGgsKCFyKGEuc2l6ZSl8fHU+MSkmJihyKGEuc2l6ZSkmJnUtLSxhLnNpemU9bCtcInB4XCIpLCghcihzLnNpemUpfHx1PjEpJiYocy5zaXplPWMrXCJweFwiKSxmLnJlc2l6ZSghMCkpLCExfX19KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXtmdW5jdGlvbiBuKGUscil7dmFyIG8sYTtpZihyPXJbdF0pZm9yKG89aVtlXT1pW2VdfHxbXSxhPTA7ci5sZW5ndGg+YTthKyspby5wdXNoKHJbYV0pLG4oZSsxLHJbYV0pfXZhciBpPVtdO3JldHVybiBuKDAsZSksaX1mdW5jdGlvbiBuKCl7cmV0dXJuIE0uc3VwcG9ydC5jc3NCb3JkZXJTcGFjaW5nP1wiXCI6J2NlbGxzcGFjaW5nPVwiMFwiJ31mdW5jdGlvbiBpKHQsaSl7cmV0dXJuIHQubGVuZ3RoP1wiPHRhYmxlIFwiK24oKSsnIGNsYXNzPVwiJytlLnRyaW0oXCJrLXNjaGVkdWxlci10YWJsZSBcIisoaXx8XCJcIikpKydcIj48dHI+Jyt0LmpvaW4oXCI8L3RyPjx0cj5cIikrXCI8L3RyPjwvdGFibGU+XCI6XCJcIn1mdW5jdGlvbiByKGUsdCl7cmV0dXJuIGUubGVuZ3RoP1wiPGRpdiBzdHlsZT0ncG9zaXRpb246cmVsYXRpdmUnPlwiK2koZSx0KStcIjwvZGl2PlwiOlwiXCJ9ZnVuY3Rpb24gbyh0LG4scil7dmFyIG8sYT1bXTtpZihyPjApZm9yKG89MDt0Pm87bysrKWEucHVzaChcIjx0aD4mbmJzcDs8L3RoPlwiKTtyZXR1cm4gbiYmYS5wdXNoKCc8dGggY2xhc3M9XCJrLXNjaGVkdWxlci10aW1lcy1hbGwtZGF5XCI+JytuLnRleHQrXCI8L3RoPlwiKSwxPnI/ZSgpOmUoJzxkaXYgY2xhc3M9XCJrLXNjaGVkdWxlci10aW1lc1wiPicraShhKStcIjwvZGl2PlwiKX1mdW5jdGlvbiBhKHQsbixvKXt2YXIgYSxzLGwsYyxkLHUsaCxwLGYsZyxtPVtdO2ZvcihzPTA7dC5sZW5ndGg+cztzKyspe2ZvcihsPXRbc10sYz1bXSxkPW4vbC5sZW5ndGgsYT0wO2wubGVuZ3RoPmE7YSsrKXU9bFthXSxjLnB1c2goJzx0aCBjb2xzcGFuPVwiJysodS5jb2xzcGFufHxkKSsnXCIgY2xhc3M9XCInKyh1LmNsYXNzTmFtZXx8XCJcIikrJ1wiPicrdS50ZXh0K1wiPC90aD5cIik7bS5wdXNoKGMuam9pbihcIlwiKSl9aWYoaD1bXSxvKXtmb3IocD10W3QubGVuZ3RoLTFdLGY9W10sZz1vLmNlbGxDb250ZW50LGE9MDtwLmxlbmd0aD5hO2ErKylmLnB1c2goJzx0ZCBjbGFzcz1cIicrKHBbYV0uY2xhc3NOYW1lfHxcIlwiKSsnXCI+JysoZz9nKGEpOlwiJm5ic3A7XCIpK1wiPC90aD5cIik7aC5wdXNoKGYuam9pbihcIlwiKSl9cmV0dXJuIGUoJzxkaXYgY2xhc3M9XCJrLXNjaGVkdWxlci1oZWFkZXIgay1zdGF0ZS1kZWZhdWx0XCI+PGRpdiBjbGFzcz1cImstc2NoZWR1bGVyLWhlYWRlci13cmFwXCI+JytpKG0pK3IoaCxcImstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5XCIpK1wiPC9kaXY+PC9kaXY+XCIpfWZ1bmN0aW9uIHModCxuKXt2YXIgcixvLGEscyxsLGM9QXJyYXkobikuam9pbigpLnNwbGl0KFwiLFwiKSxkPVtdO2ZvcihvPTA7dC5sZW5ndGg+bztvKyspZm9yKGE9dFtvXSxzPW4vYS5sZW5ndGgscj0wO2EubGVuZ3RoPnI7cisrKWw9YVtyXS5jbGFzc05hbWV8fFwiXCIsYVtyXS5hbGxEYXkmJihsPVwiay1zY2hlZHVsZXItdGltZXMtYWxsLWRheVwiKSxjW3Mqcl0rPSc8dGggY2xhc3M9XCInK2wrJ1wiIHJvd3NwYW49XCInK3MrJ1wiPicrYVtyXS50ZXh0K1wiPC90aD5cIjtmb3Iocj0wO24+cjtyKyspZC5wdXNoKGNbcl0pO3JldHVybiAxPm4/ZSgpOmUoJzxkaXYgY2xhc3M9XCJrLXNjaGVkdWxlci10aW1lc1wiPicraShkKStcIjwvZGl2PlwiKX1mdW5jdGlvbiBsKCl7cmV0dXJuIGUoJzxkaXYgY2xhc3M9XCJrLXNjaGVkdWxlci1jb250ZW50XCI+PHRhYmxlICcrbigpKycgY2xhc3M9XCJrLXNjaGVkdWxlci10YWJsZVwiLz48L2Rpdj4nKX1mdW5jdGlvbiBjKCl7cmV0dXJuIEQ9RD9EOk0uc3VwcG9ydC5zY3JvbGxiYXIoKX1mdW5jdGlvbiBkKGUsdCxuKXt2YXIgaSxyLG8sYSxzO2ZvcihpPWUubGVuZ3RoLTE7aT49MDtpLS0pcj11KGVbaV0pLG89ci5zdGFydCxzPXIuZW5kLGE9dD49byYmcz49dCwoYXx8bz49dCYmbj49c3x8bz49dCYmbj49bykmJih0Pm8mJih0PW8pLHM+biYmKG49cykpO3JldHVybiBoKGUsdCxuKX1mdW5jdGlvbiB1KGUpe3JldHVybntzdGFydDplLnN0YXJ0LGVuZDplLmVuZH19ZnVuY3Rpb24gaChlLHQsbil7dmFyIGkscixvPVtdO2ZvcihpPTA7ZS5sZW5ndGg+aTtpKyspcj11KGVbaV0pLCh0PnIuc3RhcnQmJnIuZW5kPnR8fHIuc3RhcnQ+PXQmJm4+PXIuZW5kKSYmby5wdXNoKGVbaV0pO3JldHVybiBvfWZ1bmN0aW9uIHAoZSl7cmV0dXJuIGcoZSl9ZnVuY3Rpb24gZihlKXtyZXR1cm4gZyhlKX1mdW5jdGlvbiBnKGUpe3ZhciB0LG4saSxyLG8sYSxzLGw9W107Zm9yKHQ9MDtlLmxlbmd0aD50O3QrKyl7Zm9yKG49ZVt0XSxpPXUobikscj1udWxsLG89MCxhPWwubGVuZ3RoO2E+bztvKyspaWYocz1pLnN0YXJ0Pmxbb10uZW5kLGxbb10uc3RhcnQ+aS5zdGFydHx8cyl7cj1sW29dLGkuZW5kPnIuZW5kJiYoci5lbmQ9aS5lbmQpO2JyZWFrfXJ8fChyPXtzdGFydDppLnN0YXJ0LGVuZDppLmVuZCxldmVudHM6W119LGwucHVzaChyKSksci5ldmVudHMucHVzaChuKX1yZXR1cm4gbH1mdW5jdGlvbiBtKGUsdCxuLGkpe3ZhciByLG8sYSxzLGw9dFswXTtpZihsKXtmb3Iocj1bXSxvPWwuZGF0YVNvdXJjZS52aWV3KCksYT0wO28ubGVuZ3RoPmE7YSsrKXM9e3RleHQ6aSh7dGV4dDpNLmh0bWxFbmNvZGUoTS5nZXR0ZXIobC5kYXRhVGV4dEZpZWxkKShvW2FdKSksY29sb3I6TS5nZXR0ZXIobC5kYXRhQ29sb3JGaWVsZCkob1thXSksZmllbGQ6bC5maWVsZCx0aXRsZTpsLnRpdGxlLG5hbWU6bC5uYW1lLHZhbHVlOk0uZ2V0dGVyKGwuZGF0YVZhbHVlRmllbGQpKG9bYV0pfSksY2xhc3NOYW1lOlwiay1zbG90LWNlbGxcIn0sc1tlXT1tKGUsdC5zbGljZSgxKSxuLGkpLHIucHVzaChzKTtyZXR1cm4gcn1yZXR1cm4gbn1mdW5jdGlvbiB2KHQpe3JldHVybiBmdW5jdGlvbihuKXtpZihlLmlzQXJyYXkobil8fG4gaW5zdGFuY2VvZiBNLmRhdGEuT2JzZXJ2YWJsZUFycmF5KXtmb3IodmFyIGk9MDtuLmxlbmd0aD5pO2krKylpZihuW2ldPT10KXJldHVybiEwO3JldHVybiExfXJldHVybiBuPT10fX1mdW5jdGlvbiBfKGUpe2UuY2xhc3NOYW1lPWUuY2xhc3NOYW1lLnJlcGxhY2UoRSxcIlwiKStcIiBrLXN0YXRlLXNlbGVjdGVkXCJ9dmFyIHksdyxiLGsseCxDLFMsVCxELEEsRSxNPXdpbmRvdy5rZW5kbyxQPU0udWksST1QLldpZGdldCx6PU0ua2V5cyxGPVwiLmtlbmRvU2NoZWR1bGVyVmlld1wiLFI9TWF0aCxCPSc8ZGl2IGNsYXNzPVwiay1tYXJxdWVlIGstc2NoZWR1bGVyLW1hcnF1ZWVcIj48ZGl2IGNsYXNzPVwiay1tYXJxdWVlLWNvbG9yXCI+PC9kaXY+PGRpdiBjbGFzcz1cImstbWFycXVlZS10ZXh0XCI+PGRpdiBjbGFzcz1cImstbGFiZWwtdG9wXCI+PC9kaXY+PGRpdiBjbGFzcz1cImstbGFiZWwtYm90dG9tXCI+PC9kaXY+PC9kaXY+PC9kaXY+JztNLnVpLnNjaGVkdWxlcj17fSx5PU0uQ2xhc3MuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMuX2luZGV4PWUsdGhpcy5fdGltZVNsb3RDb2xsZWN0aW9ucz1bXSx0aGlzLl9kYXlTbG90Q29sbGVjdGlvbnM9W119LGFkZFRpbWVTbG90Q29sbGVjdGlvbjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9hZGRDb2xsZWN0aW9uKGUsdCx0aGlzLl90aW1lU2xvdENvbGxlY3Rpb25zKX0sYWRkRGF5U2xvdENvbGxlY3Rpb246ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fYWRkQ29sbGVjdGlvbihlLHQsdGhpcy5fZGF5U2xvdENvbGxlY3Rpb25zKX0sX2FkZENvbGxlY3Rpb246ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPW5ldyB4KGUsdCx0aGlzLl9pbmRleCxuLmxlbmd0aCk7cmV0dXJuIG4ucHVzaChpKSxpfSx0aW1lU2xvdENvbGxlY3Rpb25Db3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aW1lU2xvdENvbGxlY3Rpb25zLmxlbmd0aH0sZGF5U2xvdENvbGxlY3Rpb25Db3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXlTbG90Q29sbGVjdGlvbnMubGVuZ3RofSxkYXlTbG90QnlQb3NpdGlvbjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9zbG90QnlQb3NpdGlvbihlLHQsdGhpcy5fZGF5U2xvdENvbGxlY3Rpb25zKX0sdGltZVNsb3RCeVBvc2l0aW9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX3Nsb3RCeVBvc2l0aW9uKGUsdCx0aGlzLl90aW1lU2xvdENvbGxlY3Rpb25zKX0sX3Nsb3RCeVBvc2l0aW9uOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sYTtmb3IoaT0wO24ubGVuZ3RoPmk7aSsrKWZvcihyPW5baV0sbz0wO288ci5jb3VudCgpO28rKylpZihhPXIuYXQobyksZT49YS5vZmZzZXRMZWZ0JiZhLm9mZnNldExlZnQrYS5jbGllbnRXaWR0aD5lJiZ0Pj1hLm9mZnNldFRvcCYmYS5vZmZzZXRUb3ArYS5jbGllbnRIZWlnaHQ+PXQpcmV0dXJuIGF9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZTtmb3IoZT0wO3RoaXMuX2RheVNsb3RDb2xsZWN0aW9ucy5sZW5ndGg+ZTtlKyspdGhpcy5fZGF5U2xvdENvbGxlY3Rpb25zW2VdLnJlZnJlc2goKTtmb3IoZT0wO3RoaXMuX3RpbWVTbG90Q29sbGVjdGlvbnMubGVuZ3RoPmU7ZSsrKXRoaXMuX3RpbWVTbG90Q29sbGVjdGlvbnNbZV0ucmVmcmVzaCgpfSx0aW1lU2xvdFJhbmdlczpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcy5fdGltZVNsb3RDb2xsZWN0aW9ucyxyPXRoaXMuX3N0YXJ0U2xvdChlLGkpO3JldHVybiFyLmluUmFuZ2UmJmU+PXIuc2xvdC5lbmQmJihyPW51bGwpLG49cix0PmUmJihuPXRoaXMuX2VuZFNsb3QodCxpKSksbiYmIW4uaW5SYW5nZSYmbi5zbG90LnN0YXJ0Pj10JiYobj1udWxsKSxudWxsPT09ciYmbnVsbD09PW4/W106KG51bGw9PT1yJiYocj17aW5SYW5nZTohMCxzbG90Omlbbi5zbG90LmNvbGxlY3Rpb25JbmRleF0uZmlyc3QoKX0pLG51bGw9PT1uJiYobj17aW5SYW5nZTohMCxzbG90Omlbci5zbG90LmNvbGxlY3Rpb25JbmRleF0ubGFzdCgpfSksdGhpcy5fY29udGludW91c1JhbmdlKGIsaSxyLG4pKX0sZGF5U2xvdFJhbmdlczpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzLl9kYXlTbG90Q29sbGVjdGlvbnMsbz10aGlzLl9zdGFydFNsb3QoZSxyLG4pO2lmKCFvLmluUmFuZ2UmJmU+PW8uc2xvdC5lbmQmJihvPW51bGwpLGk9byx0PmUmJihpPXRoaXMuX2VuZFNsb3QodCxyLG4pKSxpJiYhaS5pblJhbmdlJiZpLnNsb3Quc3RhcnQ+PXQmJihpPW51bGwpLG51bGw9PT1vJiZudWxsPT09aSlyZXR1cm5bXTtpZihudWxsPT09bylkbyBlKz1NLmRhdGUuTVNfUEVSX0RBWSxvPXRoaXMuX3N0YXJ0U2xvdChlLHIsbik7d2hpbGUoIW8uaW5SYW5nZSYmZT49by5zbG90LmVuZCk7aWYobnVsbD09PWkpZG8gdC09TS5kYXRlLk1TX1BFUl9EQVksaT10aGlzLl9lbmRTbG90KHQscixuKTt3aGlsZSghaS5pblJhbmdlJiZpLnNsb3Quc3RhcnQ+PXQpO3JldHVybiB0aGlzLl9jb250aW51b3VzUmFuZ2UoayxyLG8saSl9LF9jb250aW51b3VzUmFuZ2U6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbyxhLHMsbCxjLGQ9bi5zbG90LHU9aS5zbG90LGg9ZC5jb2xsZWN0aW9uSW5kZXgscD11LmNvbGxlY3Rpb25JbmRleCxmPVtdO2ZvcihyPWg7cD49cjtyKyspbz10W3JdLGE9by5maXJzdCgpLHM9by5sYXN0KCksbD0hMSxjPSExLHI9PWgmJihjPSFuLmluUmFuZ2UpLHI9PXAmJihsPSFpLmluUmFuZ2UpLGQuc3RhcnQ+YS5zdGFydCYmKGE9ZCkscy5zdGFydD51LnN0YXJ0JiYocz11KSxwPmgmJihyPT1oP2w9ITA6cj09cD9jPSEwOmw9Yz0hMCksZi5wdXNoKG5ldyBlKHtzdGFydDphLGVuZDpzLGNvbGxlY3Rpb246byxoZWFkOmwsdGFpbDpjfSkpO3JldHVybiBmfSxzbG90UmFuZ2VzOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5zdGFydFRpbWV8fE0uZGF0ZS50b1V0Y1RpbWUoZS5zdGFydCksaT1lLmVuZFRpbWV8fE0uZGF0ZS50b1V0Y1RpbWUoZS5lbmQpO3JldHVybiB2b2lkIDA9PT10JiYodD1lLmlzTXVsdGlEYXkoKSksdD90aGlzLmRheVNsb3RSYW5nZXMobixpLGUuaXNBbGxEYXkpOnRoaXMudGltZVNsb3RSYW5nZXMobixpKX0scmFuZ2VzOmZ1bmN0aW9uKGUsdCxuLGkpe3JldHVyblwibnVtYmVyXCIhPXR5cGVvZiBlJiYoZT1NLmRhdGUudG9VdGNUaW1lKGUpKSxcIm51bWJlclwiIT10eXBlb2YgdCYmKHQ9TS5kYXRlLnRvVXRjVGltZSh0KSksbj90aGlzLmRheVNsb3RSYW5nZXMoZSx0LGkpOnRoaXMudGltZVNsb3RSYW5nZXMoZSx0KX0sX3N0YXJ0Q29sbGVjdGlvbjpmdW5jdGlvbihlLHQpe3ZhciBuLGk7Zm9yKG49MDt0Lmxlbmd0aD5uO24rKylpZihpPXRbbl0saS5zdGFydEluUmFuZ2UoZSkpcmV0dXJuIGk7cmV0dXJuIG51bGx9LF9lbmRDb2xsZWN0aW9uOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyO2ZvcihpPTA7dC5sZW5ndGg+aTtpKyspaWYocj10W2ldLHIuZW5kSW5SYW5nZShlLG4pKXJldHVybiByO3JldHVybiBudWxsfSxfZ2V0Q29sbGVjdGlvbnM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/dGhpcy5fZGF5U2xvdENvbGxlY3Rpb25zOnRoaXMuX3RpbWVTbG90Q29sbGVjdGlvbnN9LGNvbnRpbnVvdXNTbG90OmZ1bmN0aW9uKGUsdCl7dmFyIG49dD8tMToxLGk9dGhpcy5fZ2V0Q29sbGVjdGlvbnMoZS5pc0RheVNsb3QpLHI9aVtlLmNvbGxlY3Rpb25JbmRleCtuXTtyZXR1cm4gcj9yW3Q/XCJsYXN0XCI6XCJmaXJzdFwiXSgpOnZvaWQgMH0sZmlyc3RTbG90OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZ2V0Q29sbGVjdGlvbnModGhpcy5kYXlTbG90Q29sbGVjdGlvbkNvdW50KCkpO3JldHVybiBlWzBdLmZpcnN0KCl9LGxhc3RTbG90OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZ2V0Q29sbGVjdGlvbnModGhpcy5kYXlTbG90Q29sbGVjdGlvbkNvdW50KCkpO3JldHVybiBlW2UubGVuZ3RoLTFdLmxhc3QoKX0sdXBTbG90OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPWZ1bmN0aW9uKGUsaSxyKXt2YXIgbz0wPT09cjtyZXR1cm4hdCYmIWUmJm8mJm4uZGF5U2xvdENvbGxlY3Rpb25Db3VudCgpP24uX2RheVNsb3RDb2xsZWN0aW9uc1swXS5hdChpKTp2b2lkIDB9O3JldHVybiB0aGlzLnRpbWVTbG90Q29sbGVjdGlvbkNvdW50KCl8fCh0PSEwKSx0aGlzLl92ZXJ0aWNhbFNsb3QoZSwtMSxpKX0sZG93blNsb3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9ZnVuY3Rpb24oZSxpLHIpe3JldHVybiF0JiZlJiZuLnRpbWVTbG90Q29sbGVjdGlvbkNvdW50KCk/bi5fdGltZVNsb3RDb2xsZWN0aW9uc1tyXS5hdCgwKTp2b2lkIDB9O3JldHVybiB0aGlzLnRpbWVTbG90Q29sbGVjdGlvbkNvdW50KCl8fCh0PSEwKSx0aGlzLl92ZXJ0aWNhbFNsb3QoZSwxLGkpfSxsZWZ0U2xvdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5faG9yaXpvbnRhbFNsb3QoZSwtMSl9LHJpZ2h0U2xvdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5faG9yaXpvbnRhbFNsb3QoZSwxKX0sX2hvcml6b250YWxTbG90OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT1lLmluZGV4LHI9ZS5pc0RheVNsb3Qsbz1lLmNvbGxlY3Rpb25JbmRleCxhPXRoaXMuX2dldENvbGxlY3Rpb25zKHIpO3JldHVybiByP2krPXQ6bys9dCxuPWFbb10sbj9uLmF0KGkpOnZvaWQgMH0sX3ZlcnRpY2FsU2xvdDpmdW5jdGlvbihlLHQsbil7dmFyIGkscj1lLmluZGV4LG89ZS5pc0RheVNsb3QsYT1lLmNvbGxlY3Rpb25JbmRleCxzPXRoaXMuX2dldENvbGxlY3Rpb25zKG8pO3JldHVybihlPW4obyxhLHIpKT9lOihvP2ErPXQ6cis9dCxpPXNbYV0saT9pLmF0KHIpOnZvaWQgMCl9LF9jb2xsZWN0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG49dD90aGlzLl9kYXlTbG90Q29sbGVjdGlvbnM6dGhpcy5fdGltZVNsb3RDb2xsZWN0aW9ucztyZXR1cm4gbltlXX0sX3N0YXJ0U2xvdDpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzLl9zdGFydENvbGxlY3Rpb24oZSx0KSxvPSEwO3JldHVybiByfHwocj10WzBdLG89ITEpLGk9ci5zbG90QnlTdGFydERhdGUoZSxuKSxpfHwoaT1yLmZpcnN0KCksbz0hMSkse3Nsb3Q6aSxpblJhbmdlOm99fSxfZW5kU2xvdDpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzLl9lbmRDb2xsZWN0aW9uKGUsdCxuKSxvPSEwO3JldHVybiByfHwocj10W3QubGVuZ3RoLTFdLG89ITEpLGk9ci5zbG90QnlFbmREYXRlKGUsbiksaXx8KGk9ci5sYXN0KCksbz0hMSkse3Nsb3Q6aSxpblJhbmdlOm99fSxnZXRTbG90Q29sbGVjdGlvbjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzW3Q/XCJnZXREYXlTbG90Q29sbGVjdGlvblwiOlwiZ2V0VGltZVNsb3RDb2xsZWN0aW9uXCJdKGUpfSxnZXRUaW1lU2xvdENvbGxlY3Rpb246ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3RpbWVTbG90Q29sbGVjdGlvbnNbZV19LGdldERheVNsb3RDb2xsZWN0aW9uOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9kYXlTbG90Q29sbGVjdGlvbnNbZV19fSksdz1NLkNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0KXtlLmV4dGVuZCh0aGlzLHQpfSxpbm5lckhlaWdodDpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5jb2xsZWN0aW9uLG49dGhpcy5zdGFydC5pbmRleCxpPXRoaXMuZW5kLmluZGV4LHI9MDtmb3IoZT1uO2k+PWU7ZSsrKXIrPXQuYXQoZSkub2Zmc2V0SGVpZ2h0O3JldHVybiByfSxldmVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb2xsZWN0aW9uLmV2ZW50cygpfSxhZGRFdmVudDpmdW5jdGlvbihlKXt0aGlzLmV2ZW50cygpLnB1c2goZSl9LHN0YXJ0U2xvdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0Lm9mZnNldExlZnQ+dGhpcy5lbmQub2Zmc2V0TGVmdD90aGlzLmVuZDp0aGlzLnN0YXJ0fSxlbmRTbG90OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhcnQub2Zmc2V0TGVmdD50aGlzLmVuZC5vZmZzZXRMZWZ0P3RoaXMuc3RhcnQ6dGhpcy5lbmR9fSksYj13LmV4dGVuZCh7aW5uZXJIZWlnaHQ6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuY29sbGVjdGlvbixuPXRoaXMuc3RhcnQuaW5kZXgsaT10aGlzLmVuZC5pbmRleCxyPTA7Zm9yKGU9bjtpPj1lO2UrKylyKz10LmF0KGUpLm9mZnNldEhlaWdodDtyZXR1cm4gcn0sb3V0ZXJSZWN0OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fcmVjdChcIm9mZnNldFwiLGUsdCxuKX0sX3JlY3Q6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbyxhLHMsbCxjLGQsdSxoPXRoaXMuc3RhcnQscD10aGlzLmVuZCxmPU0uc3VwcG9ydC5pc1J0bChoLmVsZW1lbnQpO3JldHVyblwibnVtYmVyXCIhPXR5cGVvZiB0JiYodD1NLmRhdGUudG9VdGNUaW1lKHQpKSxcIm51bWJlclwiIT10eXBlb2YgbiYmKG49TS5kYXRlLnRvVXRjVGltZShuKSksaT8ocj1oLm9mZnNldFRvcCxvPXAub2Zmc2V0VG9wK3BbZStcIkhlaWdodFwiXSxmPyhhPXAub2Zmc2V0TGVmdCxzPWgub2Zmc2V0TGVmdCtoW2UrXCJXaWR0aFwiXSk6KGE9aC5vZmZzZXRMZWZ0LHM9cC5vZmZzZXRMZWZ0K3BbZStcIldpZHRoXCJdKSk6KGw9dC1oLnN0YXJ0LDA+bCYmKGw9MCksYz1oLmVuZC1oLnN0YXJ0LHI9aC5vZmZzZXRUb3AraFtlK1wiSGVpZ2h0XCJdKmwvYyxkPXAuZW5kLW4sMD5kJiYoZD0wKSx1PXAuZW5kLXAuc3RhcnQsbz1wLm9mZnNldFRvcCtwW2UrXCJIZWlnaHRcIl0tcFtlK1wiSGVpZ2h0XCJdKmQvdSxmPyhhPU1hdGgucm91bmQocC5vZmZzZXRMZWZ0K3BbZStcIldpZHRoXCJdKmQvdSkscz1NYXRoLnJvdW5kKGgub2Zmc2V0TGVmdCtoW2UrXCJXaWR0aFwiXS1oW2UrXCJXaWR0aFwiXSpsL2MpKTooYT1NYXRoLnJvdW5kKGgub2Zmc2V0TGVmdCtoW2UrXCJXaWR0aFwiXSpsL2MpLHM9TWF0aC5yb3VuZChwLm9mZnNldExlZnQrcFtlK1wiV2lkdGhcIl0tcFtlK1wiV2lkdGhcIl0qZC91KSkpLHt0b3A6cixib3R0b206byxsZWZ0OjA9PT1hP2E6YSsxLHJpZ2h0OnN9fSxpbm5lclJlY3Q6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9yZWN0KFwiY2xpZW50XCIsZSx0LG4pfX0pLGs9dy5leHRlbmQoe2lubmVyV2lkdGg6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuY29sbGVjdGlvbixuPXRoaXMuc3RhcnQuaW5kZXgsaT10aGlzLmVuZC5pbmRleCxyPTAsbz1uIT09aT9cIm9mZnNldFdpZHRoXCI6XCJjbGllbnRXaWR0aFwiO2ZvcihlPW47aT49ZTtlKyspcis9dC5hdChlKVtvXTtyZXR1cm4gcn19KSx4PU0uQ2xhc3MuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuLGkpe3RoaXMuX3Nsb3RzPVtdLHRoaXMuX2V2ZW50cz1bXSx0aGlzLl9zdGFydD1NLmRhdGUudG9VdGNUaW1lKGUpLHRoaXMuX2VuZD1NLmRhdGUudG9VdGNUaW1lKHQpLHRoaXMuX2dyb3VwSW5kZXg9bix0aGlzLl9jb2xsZWN0aW9uSW5kZXg9aX0scmVmcmVzaDpmdW5jdGlvbigpe2Zvcih2YXIgZT0wO3RoaXMuX3Nsb3RzLmxlbmd0aD5lO2UrKyl0aGlzLl9zbG90c1tlXS5yZWZyZXNoKCl9LHN0YXJ0SW5SYW5nZTpmdW5jdGlvbihlKXtyZXR1cm4gZT49dGhpcy5fc3RhcnQmJnRoaXMuX2VuZD5lfSxlbmRJblJhbmdlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dD90aGlzLl9lbmQ+ZTp0aGlzLl9lbmQ+PWU7cmV0dXJuIGU+PXRoaXMuX3N0YXJ0JiZufSxzbG90QnlTdGFydERhdGU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPWU7Zm9yKFwibnVtYmVyXCIhPXR5cGVvZiBpJiYoaT1NLmRhdGUudG9VdGNUaW1lKGUpKSx0PTA7dGhpcy5fc2xvdHMubGVuZ3RoPnQ7dCsrKWlmKG49dGhpcy5fc2xvdHNbdF0sbi5zdGFydEluUmFuZ2UoaSkpcmV0dXJuIG47cmV0dXJuIG51bGx9LHNsb3RCeUVuZERhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9ZTtpZihcIm51bWJlclwiIT10eXBlb2YgciYmKHI9TS5kYXRlLnRvVXRjVGltZShlKSksdClyZXR1cm4gdGhpcy5zbG90QnlTdGFydERhdGUoZSwhMSk7Zm9yKG49MDt0aGlzLl9zbG90cy5sZW5ndGg+bjtuKyspaWYoaT10aGlzLl9zbG90c1tuXSxpLmVuZEluUmFuZ2UocikpcmV0dXJuIGk7cmV0dXJuIG51bGx9LGNvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Nsb3RzLmxlbmd0aH0sZXZlbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50c30sYWRkVGltZVNsb3Q6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9bmV3IFMoZSx0LG4sdGhpcy5fZ3JvdXBJbmRleCx0aGlzLl9jb2xsZWN0aW9uSW5kZXgsdGhpcy5fc2xvdHMubGVuZ3RoLGkpO3RoaXMuX3Nsb3RzLnB1c2gocil9LGFkZERheVNsb3Q6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9bmV3IFQoZSx0LG4sdGhpcy5fZ3JvdXBJbmRleCx0aGlzLl9jb2xsZWN0aW9uSW5kZXgsdGhpcy5fc2xvdHMubGVuZ3RoLGkpO3RoaXMuX3Nsb3RzLnB1c2gocil9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Nsb3RzWzBdfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Nsb3RzW3RoaXMuX3Nsb3RzLmxlbmd0aC0xXX0sYXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3Nsb3RzW2VdfX0pLEM9TS5DbGFzcy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4saSxyLG8pe3RoaXMuZWxlbWVudD1lLHRoaXMuY2xpZW50V2lkdGg9ZS5jbGllbnRXaWR0aCx0aGlzLmNsaWVudEhlaWdodD1lLmNsaWVudEhlaWdodCx0aGlzLm9mZnNldFdpZHRoPWUub2Zmc2V0V2lkdGgsdGhpcy5vZmZzZXRIZWlnaHQ9ZS5vZmZzZXRIZWlnaHQsdGhpcy5vZmZzZXRUb3A9ZS5vZmZzZXRUb3AsdGhpcy5vZmZzZXRMZWZ0PWUub2Zmc2V0TGVmdCx0aGlzLnN0YXJ0PXQsdGhpcy5lbmQ9bix0aGlzLmVsZW1lbnQ9ZSx0aGlzLmdyb3VwSW5kZXg9aSx0aGlzLmNvbGxlY3Rpb25JbmRleD1yLHRoaXMuaW5kZXg9byx0aGlzLmlzRGF5U2xvdD0hMX0sc3RhcnREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIE0udGltZXpvbmUudG9Mb2NhbERhdGUodGhpcy5zdGFydCl9LGVuZERhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gTS50aW1lem9uZS50b0xvY2FsRGF0ZSh0aGlzLmVuZCl9LHN0YXJ0SW5SYW5nZTpmdW5jdGlvbihlKXtyZXR1cm4gZT49dGhpcy5zdGFydCYmdGhpcy5lbmQ+ZX0sZW5kSW5SYW5nZTpmdW5jdGlvbihlKXtyZXR1cm4gZT50aGlzLnN0YXJ0JiZ0aGlzLmVuZD49ZX0sc3RhcnRPZmZzZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydH0sZW5kT2Zmc2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5kfX0pLFM9Qy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4saSxyLG8sYSl7Qy5mbi5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmlzSG9yaXpvbnRhbD1hPyEwOiExfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50O3RoaXMuY2xpZW50V2lkdGg9ZS5jbGllbnRXaWR0aCx0aGlzLmNsaWVudEhlaWdodD1lLmNsaWVudEhlaWdodCx0aGlzLm9mZnNldFdpZHRoPWUub2Zmc2V0V2lkdGgsdGhpcy5vZmZzZXRIZWlnaHQ9ZS5vZmZzZXRIZWlnaHQsdGhpcy5vZmZzZXRUb3A9ZS5vZmZzZXRUb3AsdGhpcy5vZmZzZXRMZWZ0PWUub2Zmc2V0TGVmdH0sb2Zmc2V0WDpmdW5jdGlvbihlLHQpe3JldHVybiBlP3RoaXMub2Zmc2V0TGVmdCt0OnRoaXMub2Zmc2V0TGVmdCt0fSxzdGFydEluUmFuZ2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGU+PXRoaXMuc3RhcnQmJnRoaXMuZW5kPmV9LGVuZEluUmFuZ2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGU+dGhpcy5zdGFydCYmdGhpcy5lbmQ+PWV9LHN0YXJ0T2Zmc2V0OmZ1bmN0aW9uKHQsbixpKXt2YXIgcixvLGEscyxsO2lmKGkpcmV0dXJuIHRoaXMuc3RhcnQ7aWYocj1lKHRoaXMuZWxlbWVudCkub2Zmc2V0KCksbz10aGlzLmVuZC10aGlzLnN0YXJ0LHRoaXMuaXNIb3Jpem9udGFsKXtpZihsPU0uc3VwcG9ydC5pc1J0bCh0aGlzLmVsZW1lbnQpLGE9dC1yLmxlZnQscz1NYXRoLmZsb29yKG8qKGEvdGhpcy5vZmZzZXRXaWR0aCkpLGwpcmV0dXJuIHRoaXMuc3RhcnQrby1zfWVsc2UgYT1uLXIudG9wLHM9TWF0aC5mbG9vcihvKihhL3RoaXMub2Zmc2V0SGVpZ2h0KSk7cmV0dXJuIHRoaXMuc3RhcnQrc30sZW5kT2Zmc2V0OmZ1bmN0aW9uKHQsbixpKXt2YXIgcixvLGEscyxsO2lmKGkpcmV0dXJuIHRoaXMuZW5kO2lmKHI9ZSh0aGlzLmVsZW1lbnQpLm9mZnNldCgpLG89dGhpcy5lbmQtdGhpcy5zdGFydCx0aGlzLmlzSG9yaXpvbnRhbCl7aWYobD1NLnN1cHBvcnQuaXNSdGwodGhpcy5lbGVtZW50KSxhPXQtci5sZWZ0LHM9TWF0aC5mbG9vcihvKihhL3RoaXMub2Zmc2V0V2lkdGgpKSxsKXJldHVybiB0aGlzLnN0YXJ0K28tc31lbHNlIGE9bi1yLnRvcCxzPU1hdGguZmxvb3IobyooYS90aGlzLm9mZnNldEhlaWdodCkpO3JldHVybiB0aGlzLnN0YXJ0K3N9fSksVD1DLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbixpLHIsbyxhKXtDLmZuLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuZXZlbnRDb3VudD1hLHRoaXMuaXNEYXlTbG90PSEwLHRoaXMuZWxlbWVudC5jaGlsZHJlbi5sZW5ndGg/KHRoaXMuZmlyc3RDaGlsZEhlaWdodD10aGlzLmVsZW1lbnQuY2hpbGRyZW5bMF0ub2Zmc2V0SGVpZ2h0KzMsdGhpcy5maXJzdENoaWxkVG9wPXRoaXMuZWxlbWVudC5jaGlsZHJlblswXS5vZmZzZXRUb3ApOih0aGlzLmZpcnN0Q2hpbGRIZWlnaHQ9Myx0aGlzLmZpcnN0Q2hpbGRUb3A9MCl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt0aGlzLmNsaWVudEhlaWdodD10aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0LHRoaXMub2Zmc2V0VG9wPXRoaXMuZWxlbWVudC5vZmZzZXRUb3B9LHN0YXJ0RGF0ZTpmdW5jdGlvbigpe3ZhciBlPW5ldyBEYXRlKHRoaXMuc3RhcnQpO3JldHVybiBNLnRpbWV6b25lLmFwcGx5KGUsXCJFdGMvVVRDXCIpfSxlbmREYXRlOmZ1bmN0aW9uKCl7dmFyIGU9bmV3IERhdGUodGhpcy5lbmQpO3JldHVybiBNLnRpbWV6b25lLmFwcGx5KGUsXCJFdGMvVVRDXCIpfSxzdGFydEluUmFuZ2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGU+PXRoaXMuc3RhcnQmJnRoaXMuZW5kPmV9LGVuZEluUmFuZ2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGU+dGhpcy5zdGFydCYmdGhpcy5lbmQ+PWV9fSksTS51aS5TY2hlZHVsZXJWaWV3PUkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7SS5mbi5pbml0LmNhbGwodGhpcyx0LG4pLHRoaXMuX3Njcm9sbGJhcj1jKCksdGhpcy5faXNSdGw9TS5zdXBwb3J0LmlzUnRsKHQpLHRoaXMuX3Jlc2l6ZUhpbnQ9ZSgpLHRoaXMuX21vdmVIaW50PWUoKSx0aGlzLl9jZWxsSWQ9TS5ndWlkKCksdGhpcy5fcmVzb3VyY2VzRm9yR3JvdXBzKCksdGhpcy5fc2VsZWN0ZWRTbG90cz1bXX0sX2lzTW9iaWxlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zO3JldHVybiBlLm1vYmlsZT09PSEwJiZNLnN1cHBvcnQubW9iaWxlT1N8fFwicGhvbmVcIj09PWUubW9iaWxlfHxcInRhYmxldFwiPT09ZS5tb2JpbGV9LF9pc01vYmlsZVBob25lVmlldzpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucztyZXR1cm4gZS5tb2JpbGU9PT0hMCYmTS5zdXBwb3J0Lm1vYmlsZU9TJiYhTS5zdXBwb3J0Lm1vYmlsZU9TLnRhYmxldHx8XCJwaG9uZVwiPT09ZS5tb2JpbGV9LF9hZGRSZXNvdXJjZVZpZXc6ZnVuY3Rpb24oKXt2YXIgZT1uZXcgeSh0aGlzLmdyb3Vwcy5sZW5ndGgpO3JldHVybiB0aGlzLmdyb3Vwcy5wdXNoKGUpLGV9LGRhdGVGb3JUaXRsZTpmdW5jdGlvbigpe3JldHVybiBNLmZvcm1hdCh0aGlzLm9wdGlvbnMuc2VsZWN0ZWREYXRlRm9ybWF0LHRoaXMuc3RhcnREYXRlKCksdGhpcy5lbmREYXRlKCkpfSxfY2hhbmdlR3JvdXA6ZnVuY3Rpb24oZSx0KXt2YXIgbj10P1wicHJldkdyb3VwU2xvdFwiOlwibmV4dEdyb3VwU2xvdFwiLGk9dGhpc1tuXShlLnN0YXJ0LGUuZ3JvdXBJbmRleCxlLmlzQWxsRGF5KTtyZXR1cm4gaSYmKGUuZ3JvdXBJbmRleCs9dD8tMToxKSxpfSxfY2hhbmdlR3JvdXBDb250aW51b3VzbHk6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sX2NoYW5nZVZpZXdQZXJpb2Q6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sX2hvcml6b250YWxTbG90czpmdW5jdGlvbihlLHQsbixpKXt2YXIgcixvLGE9aT9cImxlZnRTbG90XCI6XCJyaWdodFNsb3RcIixzPXRbMF0uc3RhcnQsbD10W3QubGVuZ3RoLTFdLmVuZCxjPXRoaXMuZ3JvdXBzW2UuZ3JvdXBJbmRleF07cmV0dXJuIG58fChyPXRoaXMuX25vcm1hbGl6ZUhvcml6b250YWxTZWxlY3Rpb24oZSx0LGkpLHImJihzPWw9cikpLHM9Y1thXShzKSxsPWNbYV0obCksbnx8dGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpfHxzJiZsfHwocz1sPXRoaXMuX2NoYW5nZUdyb3VwKGUsaSkpLHMmJmx8fChvPXRoaXMuX2NvbnRpbnVvdXNTbG90KGUsdCxpKSxvPXRoaXMuX2NoYW5nZUdyb3VwQ29udGludW91c2x5KGUsbyxuLGkpLG8mJihzPWw9bykpLHtzdGFydFNsb3Q6cyxlbmRTbG90Omx9fSxfdmVydGljYWxTbG90czpmdW5jdGlvbihlLHQsbixpKXt2YXIgcixvLGE9dFswXS5zdGFydCxzPXRbdC5sZW5ndGgtMV0uZW5kLGw9dGhpcy5ncm91cHNbZS5ncm91cEluZGV4XTtyZXR1cm4gbnx8KHI9dGhpcy5fbm9ybWFsaXplVmVydGljYWxTZWxlY3Rpb24oZSx0LGkpLHImJihhPXM9cikpLG89aT9cInVwU2xvdFwiOlwiZG93blNsb3RcIixhPWxbb10oYSxuKSxzPWxbb10ocyxuKSxufHwhdGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpfHxhJiZzfHwoYT1zPXRoaXMuX2NoYW5nZUdyb3VwKGUsaSkpLHtzdGFydFNsb3Q6YSxlbmRTbG90OnN9fSxfbm9ybWFsaXplSG9yaXpvbnRhbFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiBudWxsfSxfbm9ybWFsaXplVmVydGljYWxTZWxlY3Rpb246ZnVuY3Rpb24oZSx0LG4pe3ZhciBpO3JldHVybiBpPW4/dFswXS5zdGFydDp0W3QubGVuZ3RoLTFdLmVuZH0sX2NvbnRpbnVvdXNTbG90OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGNvbnN0cmFpblNlbGVjdGlvbjpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMuZ3JvdXBzWzBdO3RoaXMuaW5SYW5nZShlKT9uLmRheVNsb3RDb2xsZWN0aW9uQ291bnQoKXx8KGUuaXNBbGxEYXk9ITEpOih0PW4uZmlyc3RTbG90KCksZS5pc0FsbERheT10LmlzRGF5U2xvdCxlLnN0YXJ0PXQuc3RhcnREYXRlKCksZS5lbmQ9dC5lbmREYXRlKCkpLHRoaXMuZ3JvdXBzW2UuZ3JvdXBJbmRleF18fChlLmdyb3VwSW5kZXg9MCl9LG1vdmU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhLHMsbCxjPSExLGQ9dGhpcy5ncm91cHNbZS5ncm91cEluZGV4XTtpZihkLnRpbWVTbG90Q29sbGVjdGlvbkNvdW50KCl8fChlLmlzQWxsRGF5PSEwKSxpPWQucmFuZ2VzKGUuc3RhcnQsZS5lbmQsZS5pc0FsbERheSwhMSksdD09PXouRE9XTnx8dD09PXouVVApe2lmKGM9ITAsYT10PT09ei5VUCx0aGlzLl91cGRhdGVEaXJlY3Rpb24oZSxpLG4sYSwhMCkscz10aGlzLl92ZXJ0aWNhbFNsb3RzKGUsaSxuLGEpLCFzLnN0YXJ0U2xvdCYmIW4mJnRoaXMuX2NoYW5nZVZpZXdQZXJpb2QoZSxhLCEwKSlyZXR1cm4gY31lbHNlIGlmKCh0PT09ei5MRUZUfHx0PT09ei5SSUdIVCkmJihjPSEwLGE9dD09PXouTEVGVCx0aGlzLl91cGRhdGVEaXJlY3Rpb24oZSxpLG4sYSwhMSkscz10aGlzLl9ob3Jpem9udGFsU2xvdHMoZSxpLG4sYSksIXMuc3RhcnRTbG90JiYhbiYmdGhpcy5fY2hhbmdlVmlld1BlcmlvZChlLGEsITEpKSlyZXR1cm4gYztyZXR1cm4gYyYmKHI9cy5zdGFydFNsb3Qsbz1zLmVuZFNsb3Qsbj8obD1lLmJhY2t3YXJkLGwmJnI/ZS5zdGFydD1yLnN0YXJ0RGF0ZSgpOiFsJiZvJiYoZS5lbmQ9by5lbmREYXRlKCkpKTpyJiZvJiYoZS5pc0FsbERheT1yLmlzRGF5U2xvdCxlLnN0YXJ0PXIuc3RhcnREYXRlKCksZS5lbmQ9by5lbmREYXRlKCkpLGUuZXZlbnRzPVtdKSxjfSxtb3ZlVG9FdmVudEluR3JvdXA6ZnVuY3Rpb24odCxuLGkscil7Zm9yKHZhciBvLGEscz10Ll9jb250aW51b3VzRXZlbnRzfHxbXSxsPXI/LTE6MSxjPXMubGVuZ3RoLGQ9cj9jLTE6MDtjPmQmJmQ+LTE7KXtpZihhPXNbZF0sKCFyJiZhLnN0YXJ0LnN0YXJ0RGF0ZSgpPj1uLnN0YXJ0RGF0ZSgpfHxyJiZhLnN0YXJ0LnN0YXJ0RGF0ZSgpPD1uLnN0YXJ0RGF0ZSgpKSYmKGkubGVuZ3RoJiYoYT1zW2QrbF0pLGEmJi0xPT09ZS5pbkFycmF5KGEudWlkLGkpKSl7bz0hIWE7YnJlYWt9ZCs9bH1yZXR1cm4gYX0sbW92ZVRvRXZlbnQ6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4saT1lLmdyb3VwSW5kZXgscj10aGlzLmdyb3Vwc1tpXSxvPXIucmFuZ2VzKGUuc3RhcnQsZS5lbmQsZS5pc0FsbERheSwhMSlbMF0uc3RhcnQsYT10aGlzLmdyb3Vwcy5sZW5ndGgscz10Py0xOjEsbD1lLmV2ZW50czthPmkmJmk+LTEmJihuPXRoaXMubW92ZVRvRXZlbnRJbkdyb3VwKHIsbyxsLHQpLGkrPXMscj10aGlzLmdyb3Vwc1tpXSxyJiYhbik7KWw9W10sbz10P3IubGFzdFNsb3QoKTpyLmZpcnN0U2xvdCghMCk7cmV0dXJuIG4mJihlLmV2ZW50cz1bbi51aWRdLGUuc3RhcnQ9bi5zdGFydC5zdGFydERhdGUoKSxlLmVuZD1uLmVuZC5lbmREYXRlKCksZS5pc0FsbERheT1uLnN0YXJ0LmlzRGF5U2xvdCxlLmdyb3VwSW5kZXg9bi5zdGFydC5ncm91cEluZGV4KSwhIW59LGN1cnJlbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWU/dGhpcy5fY3VycmVudDoodGhpcy5fY3VycmVudD1lLHZvaWQgdGhpcy5fc2Nyb2xsVG8oZSx0aGlzLmNvbnRlbnRbMF0pKX0sc2VsZWN0OmZ1bmN0aW9uKGUpe3RoaXMuY2xlYXJTZWxlY3Rpb24oKSx0aGlzLl9zZWxlY3RFdmVudHMoZSl8fHRoaXMuX3NlbGVjdFNsb3RzKGUpfSxfc2VsZWN0U2xvdHM6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhLHMsbD1lLmlzQWxsRGF5LGM9dGhpcy5ncm91cHNbZS5ncm91cEluZGV4XTtmb3IoYy50aW1lU2xvdENvbGxlY3Rpb25Db3VudCgpfHwobD0hMCksdGhpcy5fc2VsZWN0ZWRTbG90cz1bXSx0PWMucmFuZ2VzKGUuc3RhcnQsZS5lbmQsbCwhMSkscj0wO3QubGVuZ3RoPnI7cisrKWZvcihvPXRbcl0sYT1vLmNvbGxlY3Rpb24scz1vLnN0YXJ0LmluZGV4O28uZW5kLmluZGV4Pj1zO3MrKylpPWEuYXQocyksbj1pLmVsZW1lbnQsbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIsITApLF8obiksdGhpcy5fc2VsZWN0ZWRTbG90cy5wdXNoKHtzdGFydDppLnN0YXJ0RGF0ZSgpLGVuZDppLmVuZERhdGUoKSxlbGVtZW50Om59KTtlLmJhY2t3YXJkJiYobj10WzBdLnN0YXJ0LmVsZW1lbnQpLHRoaXMuY3VycmVudChuKX0sX3NlbGVjdEV2ZW50czpmdW5jdGlvbih0KXt2YXIgbixpLHI9ITEsbz10LmV2ZW50cyxhPXRoaXMuZ3JvdXBzW3QuZ3JvdXBJbmRleF0uX2NvbnRpbnVvdXNFdmVudHN8fFtdLHM9YS5sZW5ndGg7aWYoIW9bMF18fCFhWzBdKXJldHVybiByO2ZvcihpPWUoKSx0LmV2ZW50cz1bXSxuPTA7cz5uO24rKyllLmluQXJyYXkoYVtuXS51aWQsbyk+LTEmJihpPWkuYWRkKGFbbl0uZWxlbWVudCksdC5ldmVudHMucHVzaChhW25dLnVpZCkpO3JldHVybiBpWzBdJiYoaS5hZGRDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMCksdGhpcy5jdXJyZW50KGkubGFzdCgpWzBdKSx0aGlzLl9zZWxlY3RlZFNsb3RzPVtdLHI9ITApLHJ9LGluUmFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zdGFydERhdGUoKSxuPU0uZGF0ZS5hZGREYXlzKHRoaXMuZW5kRGF0ZSgpLDEpLGk9ZS5zdGFydCxyPWUuZW5kO3JldHVybiBpPj10JiZuPmkmJnI+dCYmbj49cn0sX3Jlc291cmNlVmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS52YWx1ZVByaW1pdGl2ZSYmKHQ9TS5nZXR0ZXIoZS5kYXRhVmFsdWVGaWVsZCkodCkpLHR9LF9yZXNvdXJjZUJ5U2xvdDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGE9dGhpcy5ncm91cGVkUmVzb3VyY2VzLHM9e307aWYoYS5sZW5ndGgpZm9yKHQ9ZS5ncm91cEluZGV4LG49YS5sZW5ndGgtMTtuPj0wO24tLSlpPWFbbl0scj10aGlzLl9yZXNvdXJjZVZhbHVlKGksaS5kYXRhU291cmNlLnZpZXcoKVt0JWkuZGF0YVNvdXJjZS50b3RhbCgpXSksaS5tdWx0aXBsZSYmKHI9W3JdKSxvPU0uc2V0dGVyKGkuZmllbGQpLG8ocyxyKSx0PU1hdGguZmxvb3IodC9pLmRhdGFTb3VyY2UudG90YWwoKSk7cmV0dXJuIHN9LF9jcmVhdGVSZXNpemVIaW50OmZ1bmN0aW9uKHQsbixpLHIpe3JldHVybiBlKEIpLmNzcyh7bGVmdDp0LHRvcDpuLHdpZHRoOmksaGVpZ2h0OnJ9KX0sX3JlbW92ZVJlc2l6ZUhpbnQ6ZnVuY3Rpb24oKXt0aGlzLl9yZXNpemVIaW50LnJlbW92ZSgpLHRoaXMuX3Jlc2l6ZUhpbnQ9ZSgpfSxfcmVtb3ZlTW92ZUhpbnQ6ZnVuY3Rpb24oKXt0aGlzLl9tb3ZlSGludC5yZW1vdmUoKSx0aGlzLl9tb3ZlSGludD1lKCl9LF9zY3JvbGxUbzpmdW5jdGlvbihlLHQpe3ZhciBuPWUub2Zmc2V0VG9wLGk9ZS5vZmZzZXRIZWlnaHQscj10LnNjcm9sbFRvcCxvPXQuY2xpZW50SGVpZ2h0LGE9bitpLHM9MDtzPXI+bj9uOmE+citvP28+PWk/YS1vOm46cix0LnNjcm9sbFRvcD1zfSxfc2hvdWxkSW52ZXJzZVJlc291cmNlQ29sb3I6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEEoZS5jb2xvcikuaXNEYXJrKCksbj10aGlzLmVsZW1lbnQuY3NzKFwiY29sb3JcIiksaT1uZXcgQShuKS5pc0RhcmsoKTtyZXR1cm4gdD09aX0sX2V2ZW50VG1wbDpmdW5jdGlvbih0LG4pe3ZhciBpLHI9dGhpcy5vcHRpb25zLG89ZS5leHRlbmQoe30sTS5UZW1wbGF0ZSxyLnRlbXBsYXRlU2V0dGluZ3MpLGE9by5wYXJhbU5hbWUscz1cIlwiLGw9dHlwZW9mIHQsYz17c3RvcmFnZTp7fSxjb3VudDowfTtyZXR1cm5cImZ1bmN0aW9uXCI9PT1sPyhjLnN0b3JhZ2VbXCJ0bXBsXCIrYy5jb3VudF09dCxzKz1cIiM9dGhpcy50bXBsXCIrYy5jb3VudCtcIihcIithK1wiKSNcIixjLmNvdW50KyspOlwic3RyaW5nXCI9PT1sJiYocys9dCksaT1NLnRlbXBsYXRlKE0uZm9ybWF0KG4scyksbyksYy5jb3VudD4wJiYoaT1lLnByb3h5KGksYy5zdG9yYWdlKSksaX0sZXZlbnRSZXNvdXJjZXM6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhLHMsbCxjLGQsdT1bXSxoPXRoaXMub3B0aW9ucztpZighaC5yZXNvdXJjZXMpcmV0dXJuIHU7Zm9yKHQ9MDtoLnJlc291cmNlcy5sZW5ndGg+dDt0KyspaWYobj1oLnJlc291cmNlc1t0XSxpPW4uZmllbGQscj1NLmdldHRlcihpKShlKSlmb3Iobi5tdWx0aXBsZXx8KHI9W3JdKSxvPW4uZGF0YVNvdXJjZS52aWV3KCksYT0wO3IubGVuZ3RoPmE7YSsrKXtmb3Iocz1udWxsLGw9clthXSxuLnZhbHVlUHJpbWl0aXZlfHwobD1NLmdldHRlcihuLmRhdGFWYWx1ZUZpZWxkKShsKSksYz0wO28ubGVuZ3RoPmM7YysrKWlmKG9bY10uZ2V0KG4uZGF0YVZhbHVlRmllbGQpPT1sKXtzPW9bY107YnJlYWt9bnVsbCE9PXMmJihkPU0uZ2V0dGVyKG4uZGF0YUNvbG9yRmllbGQpKHMpLHUucHVzaCh7ZmllbGQ6bi5maWVsZCx0aXRsZTpuLnRpdGxlLG5hbWU6bi5uYW1lLHRleHQ6TS5nZXR0ZXIobi5kYXRhVGV4dEZpZWxkKShzKSx2YWx1ZTpsLGNvbG9yOmR9KSl9cmV0dXJuIHV9LGNyZWF0ZUxheW91dDpmdW5jdGlvbihpKXt2YXIgcixvLGEscyxsLGM9LTE7Zm9yKGkucm93c3x8KGkucm93cz1bXSkscj0wO2kucm93cy5sZW5ndGg+cjtyKyspaWYoaS5yb3dzW3JdLmFsbERheSl7Yz1yO2JyZWFrfW89aS5yb3dzW2NdLGM+PTAmJmkucm93cy5zcGxpY2UoYywxKSxhPXRoaXMuY29sdW1uTGV2ZWxzPXQoaSxcImNvbHVtbnNcIikscz10aGlzLnJvd0xldmVscz10KGksXCJyb3dzXCIpLHRoaXMudGFibGU9ZShcIjx0YWJsZSBcIituKCkrJyBjbGFzcz1cImstc2NoZWR1bGVyLWxheW91dCBrLXNjaGVkdWxlci0nK3RoaXMubmFtZSsndmlld1wiLz4nKSxsPXNbcy5sZW5ndGgtMV0ubGVuZ3RoLHRoaXMudGFibGUuYXBwZW5kKHRoaXMuX3RvcFNlY3Rpb24oYSxvLGwpKSx0aGlzLnRhYmxlLmFwcGVuZCh0aGlzLl9ib3R0b21TZWN0aW9uKGEscyxsKSksdGhpcy5lbGVtZW50LmFwcGVuZCh0aGlzLnRhYmxlKSx0aGlzLl9zY3JvbGxlcigpfSxyZWZyZXNoTGF5b3V0OmZ1bmN0aW9uKCl7dmFyIHQsbixpLHIsbyxhLHM9dGhpcyxsPXMuZWxlbWVudC5maW5kKFwiPi5rLXNjaGVkdWxlci10b29sYmFyXCIpLGM9cy5lbGVtZW50LmlubmVySGVpZ2h0KCksZD10aGlzLl9zY3JvbGxiYXIsdT0wLGg9dGhpcy5faXNSdGw/XCJsZWZ0XCI6XCJyaWdodFwiO2Zvcih0PTA7bC5sZW5ndGg+dDt0KyspYy09bC5lcSh0KS5vdXRlckhlaWdodCgpO3MuZGF0ZXNIZWFkZXImJih1PXMuZGF0ZXNIZWFkZXIub3V0ZXJIZWlnaHQoKSkscy50aW1lc0hlYWRlciYmcy50aW1lc0hlYWRlci5vdXRlckhlaWdodCgpPnUmJih1PXMudGltZXNIZWFkZXIub3V0ZXJIZWlnaHQoKSkscy5kYXRlc0hlYWRlciYmcy50aW1lc0hlYWRlciYmKG49cy5kYXRlc0hlYWRlci5maW5kKFwidGFibGU6Zmlyc3QgdHJcIikscy50aW1lc0hlYWRlci5maW5kKFwidHJcIikuaGVpZ2h0KGZ1bmN0aW9uKHQpe2UodGhpcykuaGVpZ2h0KG4uZXEodCkuaGVpZ2h0KCkpfSkpLHUmJihjLT11KSxzLmZvb3RlciYmKGMtPXMuZm9vdGVyLm91dGVySGVpZ2h0KCkpLGk9ZnVuY3Rpb24oZSl7dmFyIHQsbjtyZXR1cm4gZVswXS5zdHlsZS5oZWlnaHQ/ITA6KHQ9ZS5oZWlnaHQoKSxlLmhlaWdodChcImF1dG9cIiksbj1lLmhlaWdodCgpLHQhPW4/KGUuaGVpZ2h0KFwiXCIpLCEwKTooZS5oZWlnaHQoXCJcIiksITEpKX0scj1zLmNvbnRlbnRbMF0sbz1NLnN1cHBvcnQua2luZXRpY1Njcm9sbE5lZWRlZD8wOmQsaShzLmVsZW1lbnQpJiYocy5jb250ZW50LmhlaWdodChjPjIqZD9jOjIqZCsxKSxzLnRpbWVzLmhlaWdodChyLmNsaWVudEhlaWdodCksYT1zLnRpbWVzLmZpbmQoXCJ0YWJsZVwiKSxhLmxlbmd0aCYmYS5oZWlnaHQocy5jb250ZW50LmZpbmQoXCJ0YWJsZVwiKVswXS5jbGllbnRIZWlnaHQpKSxyLm9mZnNldFdpZHRoLXIuY2xpZW50V2lkdGg+MD8ocy50YWJsZS5hZGRDbGFzcyhcImstc2Nyb2xsYmFyLXZcIikscy5kYXRlc0hlYWRlci5jc3MoXCJwYWRkaW5nLVwiK2gsby1wYXJzZUludChzLmRhdGVzSGVhZGVyLmNoaWxkcmVuKCkuY3NzKFwiYm9yZGVyLVwiK2grXCItd2lkdGhcIiksMTApKSk6cy5kYXRlc0hlYWRlci5jc3MoXCJwYWRkaW5nLVwiK2gsXCJcIiksci5vZmZzZXRIZWlnaHQtci5jbGllbnRIZWlnaHQ+MHx8ci5jbGllbnRIZWlnaHQ+cy5jb250ZW50LmNoaWxkcmVuKFwiLmstc2NoZWR1bGVyLXRhYmxlXCIpLmhlaWdodCgpP3MudGFibGUuYWRkQ2xhc3MoXCJrLXNjcm9sbGJhci1oXCIpOnMudGFibGUucmVtb3ZlQ2xhc3MoXCJrLXNjcm9sbGJhci1oXCIpfSxfdG9wU2VjdGlvbjpmdW5jdGlvbih0LG4saSl7dGhpcy50aW1lc0hlYWRlcj1vKHQubGVuZ3RoLG4saSk7dmFyIHI9dFt0Lmxlbmd0aC0xXS5sZW5ndGg7cmV0dXJuIHRoaXMuZGF0ZXNIZWFkZXI9YSh0LHIsbiksZShcIjx0cj5cIikuYXBwZW5kKHRoaXMudGltZXNIZWFkZXIuYWRkKHRoaXMuZGF0ZXNIZWFkZXIpLndyYXAoXCI8dGQ+XCIpLnBhcmVudCgpKVxyXG59LF9ib3R0b21TZWN0aW9uOmZ1bmN0aW9uKHQsbixpKXtyZXR1cm4gdGhpcy50aW1lcz1zKG4saSksdGhpcy5jb250ZW50PWwodFt0Lmxlbmd0aC0xXSxuW24ubGVuZ3RoLTFdKSxlKFwiPHRyPlwiKS5hcHBlbmQodGhpcy50aW1lcy5hZGQodGhpcy5jb250ZW50KS53cmFwKFwiPHRkPlwiKS5wYXJlbnQoKSl9LF9zY3JvbGxlcjpmdW5jdGlvbigpe3ZhciB0LG49dGhpczt0aGlzLmNvbnRlbnQuYmluZChcInNjcm9sbFwiK0YsZnVuY3Rpb24oKXtuLmRhdGVzSGVhZGVyLmZpbmQoXCI+Lmstc2NoZWR1bGVyLWhlYWRlci13cmFwXCIpLnNjcm9sbExlZnQodGhpcy5zY3JvbGxMZWZ0KSxuLnRpbWVzLnNjcm9sbFRvcCh0aGlzLnNjcm9sbFRvcCl9KSx0PU0udG91Y2hTY3JvbGxlcih0aGlzLmNvbnRlbnQse2F2b2lkU2Nyb2xsaW5nOmZ1bmN0aW9uKHQpe3JldHVybiBlKHQuZXZlbnQudGFyZ2V0KS5jbG9zZXN0KFwiLmstZXZlbnQuay1ldmVudC1hY3RpdmVcIikubGVuZ3RoPjB9fSksdCYmdC5tb3ZhYmxlJiYodGhpcy5fdG91Y2hTY3JvbGxlcj10LHRoaXMuY29udGVudD10LnNjcm9sbEVsZW1lbnQsdC5tb3ZhYmxlLmJpbmQoXCJjaGFuZ2VcIixmdW5jdGlvbihlKXtuLmRhdGVzSGVhZGVyLmZpbmQoXCI+Lmstc2NoZWR1bGVyLWhlYWRlci13cmFwXCIpLnNjcm9sbExlZnQoLWUuc2VuZGVyLngpLG4udGltZXMuc2Nyb2xsVG9wKC1lLnNlbmRlci55KX0pKX0sX3Jlc291cmNlc0Zvckdyb3VwczpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHI9W10sbz10aGlzLm9wdGlvbnMuZ3JvdXAsYT10aGlzLm9wdGlvbnMucmVzb3VyY2VzO2lmKG89byYmby5yZXNvdXJjZXM/by5yZXNvdXJjZXM6W10sYSYmby5sZW5ndGgpZm9yKGU9MCx0PWEubGVuZ3RoO3Q+ZTtlKyspZm9yKG49MCxpPW8ubGVuZ3RoO2k+bjtuKyspYVtlXS5uYW1lPT09b1tuXSYmci5wdXNoKGFbZV0pO3RoaXMuZ3JvdXBlZFJlc291cmNlcz1yfSxfY3JlYXRlQ29sdW1uc0xheW91dDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIG0oXCJjb2x1bW5zXCIsZSx0LG4pfSxfZ3JvdXBPcmllbnRhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5ncm91cDtyZXR1cm4gZSYmZS5yZXNvdXJjZXM/ZS5vcmllbnRhdGlvbjpcImhvcml6b250YWxcIn0sX2lzVmVydGljYWxseUdyb3VwZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ncm91cGVkUmVzb3VyY2VzLmxlbmd0aCYmXCJ2ZXJ0aWNhbFwiPT09dGhpcy5fZ3JvdXBPcmllbnRhdGlvbigpfSxfY3JlYXRlUm93c0xheW91dDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIG0oXCJyb3dzXCIsZSx0LG4pfSxzZWxlY3Rpb25CeUVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sY2xlYXJTZWxlY3Rpb246ZnVuY3Rpb24oKXt0aGlzLmNvbnRlbnQuZmluZChcIi5rLXN0YXRlLXNlbGVjdGVkXCIpLnJlbW92ZUF0dHIoXCJpZFwiKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCExKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO0kuZm4uZGVzdHJveS5jYWxsKHRoaXMpLGUudGFibGUmJihNLmRlc3Ryb3koZS50YWJsZSksZS50YWJsZS5yZW1vdmUoKSksZS5ncm91cHM9bnVsbCxlLnRhYmxlPW51bGwsZS5jb250ZW50PW51bGwsZS50aW1lcz1udWxsLGUuZGF0ZXNIZWFkZXI9bnVsbCxlLnRpbWVzSGVhZGVyPW51bGwsZS5mb290ZXI9bnVsbCxlLl9yZXNpemVIaW50PW51bGwsZS5fbW92ZUhpbnQ9bnVsbH0sY2FsZW5kYXJJbmZvOmZ1bmN0aW9uKCl7cmV0dXJuIE0uZ2V0Q3VsdHVyZSgpLmNhbGVuZGFycy5zdGFuZGFyZH0scHJldkdyb3VwU2xvdDpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzLmdyb3Vwc1t0XSxvPXIucmFuZ2VzKGUsZSxuLCExKVswXS5zdGFydDtpZighKDA+PXQpKXJldHVybiB0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCk/ci50aW1lU2xvdENvbGxlY3Rpb25Db3VudCgpPyhpPXIuX2NvbGxlY3Rpb24obj9vLmluZGV4Om8uY29sbGVjdGlvbkluZGV4LCExKSxpLmxhc3QoKSk6KGk9ci5fY29sbGVjdGlvbihyLmRheVNsb3RDb2xsZWN0aW9uQ291bnQoKS0xLCEwKSxpLmF0KG8uaW5kZXgpKTpyLnRpbWVTbG90Q29sbGVjdGlvbkNvdW50KCk/KGk9ci5fY29sbGVjdGlvbihuPzA6ci50aW1lU2xvdENvbGxlY3Rpb25Db3VudCgpLTEsbiksbj9pLmxhc3QoKTppLmF0KG8uaW5kZXgpKTooaT1yLl9jb2xsZWN0aW9uKG8uY29sbGVjdGlvbkluZGV4LCEwKSxpLmxhc3QoKSl9LG5leHRHcm91cFNsb3Q6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbz10aGlzLmdyb3Vwc1t0XSxhPW8ucmFuZ2VzKGUsZSxuLCExKVswXS5zdGFydDtpZighKHQ+PXRoaXMuZ3JvdXBzLmxlbmd0aC0xKSlyZXR1cm4gdGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpP28udGltZVNsb3RDb2xsZWN0aW9uQ291bnQoKT8ocj1vLmRheVNsb3RDb2xsZWN0aW9uQ291bnQoKSxpPW8uX2NvbGxlY3Rpb24ocj8wOmEuY29sbGVjdGlvbkluZGV4LHIpLG4/aS5maXJzdCgpOmkuYXQoYS5jb2xsZWN0aW9uSW5kZXgpKTooaT1vLl9jb2xsZWN0aW9uKDAsITApLGkuYXQoYS5pbmRleCkpOm8udGltZVNsb3RDb2xsZWN0aW9uQ291bnQoKT8oaT1vLl9jb2xsZWN0aW9uKDAsbiksbj9pLmZpcnN0KCk6aS5hdChhLmluZGV4KSk6KGk9by5fY29sbGVjdGlvbihhLmNvbGxlY3Rpb25JbmRleCwhMCksaS5maXJzdCgpKX0sX3VwZGF0ZUV2ZW50Rm9yTW92ZTpmdW5jdGlvbigpe30sX3VwZGF0ZUV2ZW50Rm9yUmVzaXplOmZ1bmN0aW9uKCl7fSxfdXBkYXRlRXZlbnRGb3JTZWxlY3Rpb246ZnVuY3Rpb24oZSl7cmV0dXJuIGV9fSksQT1mdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGE9dGhpcyxzPUEuZm9ybWF0cztpZigxPT09YXJndW1lbnRzLmxlbmd0aClmb3IoZT1hLnJlc29sdmVDb2xvcihlKSxyPTA7cy5sZW5ndGg+cjtyKyspdD1zW3JdLnJlLG49c1tyXS5wcm9jZXNzLGk9dC5leGVjKGUpLGkmJihvPW4oaSksYS5yPW9bMF0sYS5nPW9bMV0sYS5iPW9bMl0pO2Vsc2UgYS5yPWFyZ3VtZW50c1swXSxhLmc9YXJndW1lbnRzWzFdLGEuYj1hcmd1bWVudHNbMl07YS5yPWEubm9ybWFsaXplQnl0ZShhLnIpLGEuZz1hLm5vcm1hbGl6ZUJ5dGUoYS5nKSxhLmI9YS5ub3JtYWxpemVCeXRlKGEuYil9LEEucHJvdG90eXBlPXtyZXNvbHZlQ29sb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZXx8XCIjMDAwXCIsXCIjXCI9PWUuY2hhckF0KDApJiYoZT1lLnN1YnN0cigxLDYpKSxlPWUucmVwbGFjZSgvIC9nLFwiXCIpLGU9ZS50b0xvd2VyQ2FzZSgpLGU9QS5uYW1lZENvbG9yc1tlXXx8ZX0sbm9ybWFsaXplQnl0ZTpmdW5jdGlvbihlKXtyZXR1cm4gMD5lfHxpc05hTihlKT8wOmU+MjU1PzI1NTplfSxwZXJjQnJpZ2h0bmVzczpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIFIuc3FydCguMjQxKmUuciplLnIrLjY5MSplLmcqZS5nKy4wNjgqZS5iKmUuYil9LGlzRGFyazpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLnBlcmNCcmlnaHRuZXNzKCk7cmV0dXJuIDE4MD50fX0sQS5mb3JtYXRzPVt7cmU6L15yZ2JcXCgoXFxkezEsM30pLFxccyooXFxkezEsM30pLFxccyooXFxkezEsM30pXFwpJC8scHJvY2VzczpmdW5jdGlvbihlKXtyZXR1cm5bcGFyc2VJbnQoZVsxXSwxMCkscGFyc2VJbnQoZVsyXSwxMCkscGFyc2VJbnQoZVszXSwxMCldfX0se3JlOi9eKFxcd3syfSkoXFx3ezJ9KShcXHd7Mn0pJC8scHJvY2VzczpmdW5jdGlvbihlKXtyZXR1cm5bcGFyc2VJbnQoZVsxXSwxNikscGFyc2VJbnQoZVsyXSwxNikscGFyc2VJbnQoZVszXSwxNildfX0se3JlOi9eKFxcd3sxfSkoXFx3ezF9KShcXHd7MX0pJC8scHJvY2VzczpmdW5jdGlvbihlKXtyZXR1cm5bcGFyc2VJbnQoZVsxXStlWzFdLDE2KSxwYXJzZUludChlWzJdK2VbMl0sMTYpLHBhcnNlSW50KGVbM10rZVszXSwxNildfX1dLEEubmFtZWRDb2xvcnM9e2FxdWE6XCIwMGZmZmZcIixhenVyZTpcImYwZmZmZlwiLGJlaWdlOlwiZjVmNWRjXCIsYmxhY2s6XCIwMDAwMDBcIixibHVlOlwiMDAwMGZmXCIsYnJvd246XCJhNTJhMmFcIixjb3JhbDpcImZmN2Y1MFwiLGN5YW46XCIwMGZmZmZcIixkYXJrYmx1ZTpcIjAwMDA4YlwiLGRhcmtjeWFuOlwiMDA4YjhiXCIsZGFya2dyYXk6XCJhOWE5YTlcIixkYXJrZ3JlZW46XCIwMDY0MDBcIixkYXJrb3JhbmdlOlwiZmY4YzAwXCIsZGFya3JlZDpcIjhiMDAwMFwiLGRpbWdyYXk6XCI2OTY5NjlcIixmdWNoc2lhOlwiZmYwMGZmXCIsZ29sZDpcImZmZDcwMFwiLGdvbGRlbnJvZDpcImRhYTUyMFwiLGdyYXk6XCI4MDgwODBcIixncmVlbjpcIjAwODAwMFwiLGdyZWVueWVsbG93OlwiYWRmZjJmXCIsaW5kaWdvOlwiNGIwMDgyXCIsaXZvcnk6XCJmZmZmZjBcIixraGFraTpcImYwZTY4Y1wiLGxpZ2h0Ymx1ZTpcImFkZDhlNlwiLGxpZ2h0Z3JleTpcImQzZDNkM1wiLGxpZ2h0Z3JlZW46XCI5MGVlOTBcIixsaWdodHBpbms6XCJmZmI2YzFcIixsaWdodHllbGxvdzpcImZmZmZlMFwiLGxpbWU6XCIwMGZmMDBcIixsaW1lZ3JlZW46XCIzMmNkMzJcIixsaW5lbjpcImZhZjBlNlwiLG1hZ2VudGE6XCJmZjAwZmZcIixtYXJvb246XCI4MDAwMDBcIixtZWRpdW1ibHVlOlwiMDAwMGNkXCIsbmF2eTpcIjAwMDA4MFwiLG9saXZlOlwiODA4MDAwXCIsb3JhbmdlOlwiZmZhNTAwXCIsb3JhbmdlcmVkOlwiZmY0NTAwXCIsb3JjaGlkOlwiZGE3MGQ2XCIscGluazpcImZmYzBjYlwiLHBsdW06XCJkZGEwZGRcIixwdXJwbGU6XCI4MDAwODBcIixyZWQ6XCJmZjAwMDBcIixyb3lhbGJsdWU6XCI0MTY5ZTFcIixzYWxtb246XCJmYTgwNzJcIixzaWx2ZXI6XCJjMGMwYzBcIixza3libHVlOlwiODdjZWViXCIsc2xhdGVibHVlOlwiNmE1YWNkXCIsc2xhdGVncmF5OlwiNzA4MDkwXCIsc25vdzpcImZmZmFmYVwiLHN0ZWVsYmx1ZTpcIjQ2ODJiNFwiLHRhbjpcImQyYjQ4Y1wiLHRlYWw6XCIwMDgwODBcIix0b21hdG86XCJmZjYzNDdcIix0dXJxdW9pc2U6XCI0MGUwZDBcIix2aW9sZXQ6XCJlZTgyZWVcIix3aGVhdDpcImY1ZGViM1wiLHdoaXRlOlwiZmZmZmZmXCIsd2hpdGVzbW9rZTpcImY1ZjVmNVwiLHllbGxvdzpcImZmZmYwMFwiLHllbGxvd2dyZWVuOlwiOWFjZDMyXCJ9LEU9L1xccyprLXN0YXRlLXNlbGVjdGVkLyxlLmV4dGVuZChQLlNjaGVkdWxlclZpZXcse2NyZWF0ZUNvbHVtbnM6cCxjcmVhdGVSb3dzOmYscmFuZ2VJbmRleDp1LGNvbGxpZGluZ0V2ZW50czpkLGdyb3VwRXFGaWx0ZXI6dn0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7dmFyIHQ9bmV3IERhdGUoMTk4MCwxLDEsMCwwLDApO3JldHVybiBjKHQsbShlKSksdH1mdW5jdGlvbiBpKGUsdCxuKXtyZXR1cm4gZT49dCYmbj49ZX1mdW5jdGlvbiByKGUsdCxuLGkpe3JldHVybiBpPWk/bj49ZTpuPmUsZT50JiZpfWZ1bmN0aW9uIG8oZSx0LG4saSl7dmFyIHIsbz1lLl9jb250aW51b3VzRXZlbnRzLGE9b1tvLmxlbmd0aC0xXSxsPXAodC5zdGFydC5zdGFydERhdGUoKSkuZ2V0VGltZSgpO2lmKGkmJmEmJnAoYS5zdGFydC5zdGFydERhdGUoKSkuZ2V0VGltZSgpPT1sKXtmb3Iocj1vLmxlbmd0aC0xO3I+LTEmJiEob1tyXS5pc0FsbERheXx8cChvW3JdLnN0YXJ0LnN0YXJ0RGF0ZSgpKS5nZXRUaW1lKCk8bCk7ci0tKTtvLnNwbGljZShyKzEsMCx7ZWxlbWVudDpuLGlzQWxsRGF5OiEwLHVpZDpuLmF0dHIocy5hdHRyKFwidWlkXCIpKSxzdGFydDp0LnN0YXJ0LGVuZDp0LmVuZH0pfWVsc2Ugby5wdXNoKHtlbGVtZW50Om4saXNBbGxEYXk6aSx1aWQ6bi5hdHRyKHMuYXR0cihcInVpZFwiKSksc3RhcnQ6dC5zdGFydCxlbmQ6dC5lbmR9KX1mdW5jdGlvbiBhKGUpe3ZhciB0PVtdLG49ZS53b3JrV2Vla1N0YXJ0O2Zvcih0LnB1c2gobik7ZS53b3JrV2Vla0VuZCE9bjspbj42P24tPTc6bisrLHQucHVzaChuKTtyZXR1cm4gdH12YXIgcz13aW5kb3cua2VuZG8sbD1zLnVpLGM9cy5kYXRlLnNldFRpbWUsZD1sLlNjaGVkdWxlclZpZXcsdT1lLmV4dGVuZCxoPWUucHJveHkscD1zLmRhdGUuZ2V0RGF0ZSxmPXMuZGF0ZS5NU19QRVJfTUlOVVRFLGc9cy5kYXRlLk1TX1BFUl9EQVksbT1zLmRhdGUuZ2V0TWlsbGlzZWNvbmRzLHY9XCIua2VuZG9NdWx0aURheVZpZXdcIixfPXMudGVtcGxhdGUoJzxkaXYgdGl0bGU9XCIoIz1rZW5kby5mb3JtYXQoXCJ7MDp0fSAtIHsxOnR9XCIsIHN0YXJ0LCBlbmQpIyk6ICM9dGl0bGUucmVwbGFjZSgvXCIvZyxcIiZcXFxcIzM0O1wiKSNcIj48ZGl2IGNsYXNzPVwiay1ldmVudC10ZW1wbGF0ZSBrLWV2ZW50LXRpbWVcIj4jOmtlbmRvLmZvcm1hdChcInswOnR9IC0gezE6dH1cIiwgc3RhcnQsIGVuZCkjPC9kaXY+PGRpdiBjbGFzcz1cImstZXZlbnQtdGVtcGxhdGVcIj4ke3RpdGxlfTwvZGl2PjwvZGl2PicpLHk9cy50ZW1wbGF0ZSgnPGRpdiB0aXRsZT1cIigjPWtlbmRvLmZvcm1hdChcInswOnR9XCIsIHN0YXJ0KSMpOiAjPXRpdGxlLnJlcGxhY2UoL1wiL2csXCImXFxcXCMzNDtcIikjXCI+PGRpdiBjbGFzcz1cImstZXZlbnQtdGVtcGxhdGVcIj4ke3RpdGxlfTwvZGl2PjwvZGl2PicpLHc9cy50ZW1wbGF0ZShcIjxzcGFuIGNsYXNzPSdrLWxpbmsgay1uYXYtZGF5Jz4jPWtlbmRvLnRvU3RyaW5nKGRhdGUsICdkZGQgTS9kZCcpIzwvc3Bhbj5cIiksYj0nPGRpdiByb2xlPVwiZ3JpZGNlbGxcIiBhcmlhLXNlbGVjdGVkPVwiZmFsc2VcIiBkYXRhLSM9bnMjdWlkPVwiIz11aWQjXCIjaWYgKHJlc291cmNlc1swXSkgeyAjc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiM9cmVzb3VyY2VzWzBdLmNvbG9yIzsgYm9yZGVyLWNvbG9yOiAjPXJlc291cmNlc1swXS5jb2xvciNcImNsYXNzPVwiay1ldmVudCM9aW52ZXJzZUNvbG9yID8gXCIgay1ldmVudC1pbnZlcnNlXCIgOiBcIlwiI1wiICN9IGVsc2UgeyNjbGFzcz1cImstZXZlbnRcIiN9Iz48c3BhbiBjbGFzcz1cImstZXZlbnQtYWN0aW9uc1wiPiMgaWYoZGF0YS50YWlsIHx8IGRhdGEubWlkZGxlKSB7IzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy13XCI+PC9zcGFuPiN9IyMgaWYoZGF0YS5pc0V4Y2VwdGlvbigpKSB7IzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1leGNlcHRpb25cIj48L3NwYW4+IyB9IGVsc2UgaWYoZGF0YS5pc1JlY3VycmluZygpKSB7IzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1yZWZyZXNoXCI+PC9zcGFuPiMgfSAjPC9zcGFuPnswfTxzcGFuIGNsYXNzPVwiay1ldmVudC1hY3Rpb25zXCI+I2lmIChzaG93RGVsZXRlKSB7IzxhIGhyZWY9XCJcXFxcI1wiIGNsYXNzPVwiay1saW5rIGstZXZlbnQtZGVsZXRlXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1zaS1jbG9zZVwiPjwvc3Bhbj48L2E+I30jIyBpZihkYXRhLmhlYWQgfHwgZGF0YS5taWRkbGUpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LWVcIj48L3NwYW4+I30jPC9zcGFuPiNpZihyZXNpemFibGUgJiYgIXNpbmdsZURheSAmJiAhZGF0YS50YWlsICYmICFkYXRhLm1pZGRsZSl7IzxzcGFuIGNsYXNzPVwiay1yZXNpemUtaGFuZGxlIGstcmVzaXplLXdcIj48L3NwYW4+I30jI2lmKHJlc2l6YWJsZSAmJiAhc2luZ2xlRGF5ICYmICFkYXRhLmhlYWQgJiYgIWRhdGEubWlkZGxlKXsjPHNwYW4gY2xhc3M9XCJrLXJlc2l6ZS1oYW5kbGUgay1yZXNpemUtZVwiPjwvc3Bhbj4jfSM8L2Rpdj4nLGs9JzxkaXYgcm9sZT1cImdyaWRjZWxsXCIgYXJpYS1zZWxlY3RlZD1cImZhbHNlXCIgZGF0YS0jPW5zI3VpZD1cIiM9dWlkI1wiICNpZiAocmVzb3VyY2VzWzBdKSB7ICNzdHlsZT1cImJhY2tncm91bmQtY29sb3I6Iz1yZXNvdXJjZXNbMF0uY29sb3IgIzsgYm9yZGVyLWNvbG9yOiAjPXJlc291cmNlc1swXS5jb2xvciNcImNsYXNzPVwiay1ldmVudCM9aW52ZXJzZUNvbG9yID8gXCIgay1ldmVudC1pbnZlcnNlXCIgOiBcIlwiI1wiI30gZWxzZSB7I2NsYXNzPVwiay1ldmVudFwiI30jPjxzcGFuIGNsYXNzPVwiay1ldmVudC1hY3Rpb25zXCI+IyBpZihkYXRhLmlzRXhjZXB0aW9uKCkpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWV4Y2VwdGlvblwiPjwvc3Bhbj4jIH0gZWxzZSBpZihkYXRhLmlzUmVjdXJyaW5nKCkpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLXJlZnJlc2hcIj48L3NwYW4+IyB9ICM8L3NwYW4+ezB9PHNwYW4gY2xhc3M9XCJrLWV2ZW50LWFjdGlvbnNcIj4jaWYgKHNob3dEZWxldGUpIHsjPGEgaHJlZj1cIlxcXFwjXCIgY2xhc3M9XCJrLWxpbmsgay1ldmVudC1kZWxldGVcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLXNpLWNsb3NlXCI+PC9zcGFuPjwvYT4jfSM8L3NwYW4+PHNwYW4gY2xhc3M9XCJrLWV2ZW50LXRvcC1hY3Rpb25zXCI+IyBpZihkYXRhLnRhaWwgfHwgZGF0YS5taWRkbGUpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LW5cIj48L3NwYW4+IyB9ICM8L3NwYW4+PHNwYW4gY2xhc3M9XCJrLWV2ZW50LWJvdHRvbS1hY3Rpb25zXCI+IyBpZihkYXRhLmhlYWQgfHwgZGF0YS5taWRkbGUpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LXNcIj48L3NwYW4+IyB9ICM8L3NwYW4+IyBpZihyZXNpemFibGUgJiYgIWRhdGEudGFpbCAmJiAhZGF0YS5taWRkbGUpIHsjPHNwYW4gY2xhc3M9XCJrLXJlc2l6ZS1oYW5kbGUgay1yZXNpemUtblwiPjwvc3Bhbj4jIH0gIyMgaWYocmVzaXphYmxlICYmICFkYXRhLmhlYWQgJiYgIWRhdGEubWlkZGxlKSB7IzxzcGFuIGNsYXNzPVwiay1yZXNpemUtaGFuZGxlIGstcmVzaXplLXNcIj48L3NwYW4+IyB9ICM8L2Rpdj4nLHg9ZC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO2QuZm4uaW5pdC5jYWxsKG4sZSx0KSxuLnRpdGxlPW4ub3B0aW9ucy50aXRsZXx8bi5vcHRpb25zLm5hbWUsbi5fd29ya0RheXM9YShuLm9wdGlvbnMpLG4uX3RlbXBsYXRlcygpLG4uX2VkaXRhYmxlKCksbi5jYWxjdWxhdGVEYXRlUmFuZ2UoKSxuLl9ncm91cHMoKSxuLl9jdXJyZW50VGltZSgpfSxfY3VycmVudFRpbWVNYXJrZXJVcGRhdGVyOmZ1bmN0aW9uKCl7dmFyIHQsbixpLHIsbyxhLGwsYyxkLHUsaD1uZXcgRGF0ZSxwPXRoaXMub3B0aW9ucztmb3IocC5jdXJyZW50VGltZU1hcmtlci51c2VMb2NhbFRpbWV6b25lPT09ITEmJih0PXAuZGF0YVNvdXJjZS5vcHRpb25zLnNjaGVtYS50aW1lem9uZSxwLmRhdGFTb3VyY2UmJnQmJihuPXMudGltZXpvbmUub2Zmc2V0KGgsdCksaD1zLnRpbWV6b25lLmNvbnZlcnQoaCxoLmdldFRpbWV6b25lT2Zmc2V0KCksbikpKSx0aGlzLnRpbWVzLmZpbmQoXCIuay1jdXJyZW50LXRpbWVcIikucmVtb3ZlKCksaT1wLmdyb3VwJiZcImhvcml6b250YWxcIiE9cC5ncm91cC5vcmllbnRhdGlvbj90aGlzLmdyb3Vwcy5sZW5ndGg6MSxyPTA7aT5yO3IrKyl7aWYobz10aGlzLmdyb3Vwc1tyXSxhPXMuZGF0ZS50b1V0Y1RpbWUoaCksbD1vLnRpbWVTbG90UmFuZ2VzKGEsYSsxKSwwPT09bC5sZW5ndGgpcmV0dXJuO2M9bFswXS5jb2xsZWN0aW9uLGQ9Yy5zbG90QnlTdGFydERhdGUoaCksZCYmKHU9ZShcIjxkaXYgY2xhc3M9J2stY3VycmVudC10aW1lJz48L2Rpdj5cIiksdS5hcHBlbmRUbyh0aGlzLnRpbWVzKS5jc3Moe3RvcDpNYXRoLnJvdW5kKGxbMF0uaW5uZXJSZWN0KGgsbmV3IERhdGUoaC5nZXRUaW1lKCkrMSksITEpLnRvcCksaGVpZ2h0OlwiMXB4XCIscmlnaHQ6XCIxcHhcIixsZWZ0OjB9KSl9fSxfY3VycmVudFRpbWU6ZnVuY3Rpb24oKXt2YXIgZSxuPXRoaXMsaT1uLm9wdGlvbnMuY3VycmVudFRpbWVNYXJrZXI7aSE9PSExJiZpLnVwZGF0ZUludGVydmFsIT09dCYmKGU9aS51cGRhdGVJbnRlcnZhbCxuLl9jdXJyZW50VGltZU1hcmtlclVwZGF0ZXIoKSxuLl9jdXJyZW50VGltZVVwZGF0ZVRpbWVyPXNldEludGVydmFsKGgodGhpcy5fY3VycmVudFRpbWVNYXJrZXJVcGRhdGVyLG4pLGUpKX0sX3VwZGF0ZVJlc2l6ZUhpbnQ6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbyxhLGwsYyx1LGgscCxmLGcsbT1lLmlzTXVsdGlEYXkoKSx2PXRoaXMuZ3JvdXBzW3RdLF89di5yYW5nZXMobixpLG0sZS5pc0FsbERheSk7Zm9yKHRoaXMuX3JlbW92ZVJlc2l6ZUhpbnQoKSxyPTA7Xy5sZW5ndGg+cjtyKyspbz1fW3JdLGE9by5zdGFydFNsb3QoKSxsPWEub2Zmc2V0V2lkdGgsYz1hLmNsaWVudEhlaWdodCx1PWEub2Zmc2V0VG9wLG0/bD1vLmlubmVyV2lkdGgoKTooaD1vLm91dGVyUmVjdChuLGksdGhpcy5vcHRpb25zLnNuYXApLHU9aC50b3AsYz1oLmJvdHRvbS1oLnRvcCkscD1kLmZuLl9jcmVhdGVSZXNpemVIaW50LmNhbGwodGhpcyxhLm9mZnNldExlZnQsdSxsLGMpLHRoaXMuX3Jlc2l6ZUhpbnQ9dGhpcy5fcmVzaXplSGludC5hZGQocCk7Zj1cInRcIixnPXRoaXMuY29udGVudCxtJiYoZj1cIk0vZGRcIixnPXRoaXMuZWxlbWVudC5maW5kKFwiLmstc2NoZWR1bGVyLWhlYWRlci13cmFwOmhhcyguay1zY2hlZHVsZXItaGVhZGVyLWFsbC1kYXkpID4gZGl2XCIpLGcubGVuZ3RofHwoZz10aGlzLmNvbnRlbnQpKSx0aGlzLl9yZXNpemVIaW50LmFwcGVuZFRvKGcpLHRoaXMuX3Jlc2l6ZUhpbnQuZmluZChcIi5rLWxhYmVsLXRvcCwuay1sYWJlbC1ib3R0b21cIikudGV4dChcIlwiKSx0aGlzLl9yZXNpemVIaW50LmZpcnN0KCkuYWRkQ2xhc3MoXCJrLWZpcnN0XCIpLmZpbmQoXCIuay1sYWJlbC10b3BcIikudGV4dChzLnRvU3RyaW5nKHMudGltZXpvbmUudG9Mb2NhbERhdGUobiksZikpLHRoaXMuX3Jlc2l6ZUhpbnQubGFzdCgpLmFkZENsYXNzKFwiay1sYXN0XCIpLmZpbmQoXCIuay1sYWJlbC1ib3R0b21cIikudGV4dChzLnRvU3RyaW5nKHMudGltZXpvbmUudG9Mb2NhbERhdGUoaSksZikpfSxfdXBkYXRlTW92ZUhpbnQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhLGwsYyxkLHU9ZS5pc011bHRpRGF5KCksaD10aGlzLmdyb3Vwc1t0XSxwPXMuZGF0ZS50b1V0Y1RpbWUoZS5zdGFydCkrbixmPXArZS5kdXJhdGlvbigpLGc9aC5yYW5nZXMocCxmLHUsZS5pc0FsbERheSk7Zm9yKHA9cy50aW1lem9uZS50b0xvY2FsRGF0ZShwKSxmPXMudGltZXpvbmUudG9Mb2NhbERhdGUoZiksdGhpcy5fcmVtb3ZlTW92ZUhpbnQoKSwhdSYmKDA9PT1tKGYpfHxtKGYpPG0odGhpcy5zdGFydFRpbWUoKSkpJiZnLmxlbmd0aD4xJiZnLnBvcCgpLGk9MDtnLmxlbmd0aD5pO2krKylyPWdbaV0sbz1yLnN0YXJ0LGE9dGhpcy5fY3JlYXRlRXZlbnRFbGVtZW50KGUuY2xvbmUoe3N0YXJ0OnAsZW5kOmZ9KSwhdSksYS5hZGRDbGFzcyhcImstZXZlbnQtZHJhZy1oaW50XCIpLGw9e2xlZnQ6by5vZmZzZXRMZWZ0KzIsdG9wOm8ub2Zmc2V0VG9wfSx0aGlzLl9pc1J0bCYmKGwubGVmdD0uMSpvLmNsaWVudFdpZHRoK28ub2Zmc2V0TGVmdCsyKSx1P2wud2lkdGg9ci5pbm5lcldpZHRoKCktNDooYz1yLm91dGVyUmVjdChwLGYsdGhpcy5vcHRpb25zLnNuYXApLGwudG9wPWMudG9wLGwuaGVpZ2h0PWMuYm90dG9tLWMudG9wLGwud2lkdGg9Ljkqby5jbGllbnRXaWR0aC00KSxhLmNzcyhsKSx0aGlzLl9tb3ZlSGludD10aGlzLl9tb3ZlSGludC5hZGQoYSk7ZD10aGlzLmNvbnRlbnQsdSYmKGQ9dGhpcy5lbGVtZW50LmZpbmQoXCIuay1zY2hlZHVsZXItaGVhZGVyLXdyYXA6aGFzKC5rLXNjaGVkdWxlci1oZWFkZXItYWxsLWRheSkgPiBkaXZcIiksZC5sZW5ndGh8fChkPXRoaXMuY29udGVudCkpLHRoaXMuX21vdmVIaW50LmFwcGVuZFRvKGQpfSxfc2xvdEJ5UG9zaXRpb246ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbztmb3IodGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpPyhpPXRoaXMuY29udGVudC5vZmZzZXQoKSx0Kz10aGlzLmNvbnRlbnRbMF0uc2Nyb2xsVG9wLGUrPXRoaXMuY29udGVudFswXS5zY3JvbGxMZWZ0KTppPXRoaXMuZWxlbWVudC5maW5kKFwiLmstc2NoZWR1bGVyLWhlYWRlci13cmFwOmhhcyguay1zY2hlZHVsZXItaGVhZGVyLWFsbC1kYXkpXCIpLmZpbmQoXCI+ZGl2XCIpLm9mZnNldCgpLGkmJihlLT1pLmxlZnQsdC09aS50b3ApLGU9TWF0aC5jZWlsKGUpLHQ9TWF0aC5jZWlsKHQpLG89MDt0aGlzLmdyb3Vwcy5sZW5ndGg+bztvKyspaWYocj10aGlzLmdyb3Vwc1tvXSxuPXIuZGF5U2xvdEJ5UG9zaXRpb24oZSx0KSlyZXR1cm4gbjtmb3IoaSYmKGUrPWkubGVmdCx0Kz1pLnRvcCksaT10aGlzLmNvbnRlbnQub2Zmc2V0KCksZS09aS5sZWZ0LHQtPWkudG9wLHRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKXx8KHQrPXRoaXMuY29udGVudFswXS5zY3JvbGxUb3AsZSs9dGhpcy5jb250ZW50WzBdLnNjcm9sbExlZnQpLGU9TWF0aC5jZWlsKGUpLHQ9TWF0aC5jZWlsKHQpLG89MDt0aGlzLmdyb3Vwcy5sZW5ndGg+bztvKyspaWYocj10aGlzLmdyb3Vwc1tvXSxuPXIudGltZVNsb3RCeVBvc2l0aW9uKGUsdCkpcmV0dXJuIG47cmV0dXJuIG51bGx9LF9ncm91cENvdW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5ncm91cGVkUmVzb3VyY2VzO3JldHVybiBlLmxlbmd0aD9cInZlcnRpY2FsXCI9PT10aGlzLl9ncm91cE9yaWVudGF0aW9uKCk/dGhpcy5fcm93Q291bnRGb3JMZXZlbChlLmxlbmd0aC0xKTp0aGlzLl9jb2x1bW5Db3VudEZvckxldmVsKGUubGVuZ3RoKS90aGlzLl9jb2x1bW5PZmZzZXRGb3JSZXNvdXJjZShlLmxlbmd0aCk6MX0sX2NvbHVtbkNvdW50SW5SZXNvdXJjZVZpZXc6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdyb3VwZWRSZXNvdXJjZXM7cmV0dXJuIWUubGVuZ3RofHx0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCk/dGhpcy5fY29sdW1uQ291bnRGb3JMZXZlbCgwKTp0aGlzLl9jb2x1bW5PZmZzZXRGb3JSZXNvdXJjZShlLmxlbmd0aCl9LF90aW1lU2xvdEdyb3VwczpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGEscyxsLGMsZCx1LGgscCxmLGcsdixfLHk9dGhpcy5fdGltZVNsb3RJbnRlcnZhbCgpLHc9dGhpcy5jb250ZW50LmZpbmQoXCJ0cjpub3QoLmstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5KVwiKTtmb3Iody5hdHRyKFwicm9sZVwiLFwicm93XCIpLG49dy5sZW5ndGgsdGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpJiYobj1NYXRoLmZsb29yKG4vZSkpLGk9MDtlPmk7aSsrKWZvcihyPTAsdGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpJiYocj1pKSxvPXIqbixzPTAsdGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpfHwocz1pKTsocisxKSpuPm87KXtmb3IobD13W29dLmNoaWxkcmVuLGM9dGhpcy5ncm91cHNbaV0sbyVuPT09MCYmKGE9bShuZXcgRGF0ZSgrdGhpcy5zdGFydFRpbWUoKSkpKSxkPXMqdDsocysxKSp0PmQ7ZCsrKXU9bFtkXSxoPWQldCxwPWMuZ2V0VGltZVNsb3RDb2xsZWN0aW9uKGgpLGY9dGhpcy5fZGF0ZXNbaF0sZz1EYXRlLlVUQyhmLmdldEZ1bGxZZWFyKCksZi5nZXRNb250aCgpLGYuZ2V0RGF0ZSgpKSx2PWcrYSxfPXYreSx1LnNldEF0dHJpYnV0ZShcInJvbGVcIixcImdyaWRjZWxsXCIpLHUuc2V0QXR0cmlidXRlKFwiYXJpYS1zZWxlY3RlZFwiLCExKSxwLmFkZFRpbWVTbG90KHUsdixfKTthKz15LG8rK319LF9kYXlTbG90R3JvdXBzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYSxsLGMsZCx1LGgscCxmO2ZvcihuPXRoaXMuZWxlbWVudC5maW5kKHRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKT9cIi5rLXNjaGVkdWxlci1oZWFkZXItYWxsLWRheVwiOlwiLmstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5IHRyXCIpLG4uYXR0cihcInJvbGVcIixcInJvd1wiKSxpPTA7ZT5pO2krKylmb3Iocj0wLHRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKSYmKHI9aSksbz10aGlzLmdyb3Vwc1tpXSxhPW8uZ2V0RGF5U2xvdENvbGxlY3Rpb24oMCksbD1uW3JdLmNoaWxkcmVuLGM9MCx0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCl8fChjPWkpLGQ9MCx1PWMqdDsoYysxKSp0PnU7dSsrKWg9bFt1XSx1JXQ9PT0wJiYoZD0wKSxwPXRoaXMuX2RhdGVzW2RdLGY9RGF0ZS5VVEMocC5nZXRGdWxsWWVhcigpLHAuZ2V0TW9udGgoKSxwLmdldERhdGUoKSksZCsrLGguc2V0QXR0cmlidXRlKFwicm9sZVwiLFwiZ3JpZGNlbGxcIiksaC5zZXRBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIsITEpLGEuYWRkRGF5U2xvdChoLGYsZitzLmRhdGUuTVNfUEVSX0RBWSl9LF9ncm91cHM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT10aGlzLl9ncm91cENvdW50KCkscj10aGlzLl9jb2x1bW5Db3VudEluUmVzb3VyY2VWaWV3KCk7Zm9yKHRoaXMuZ3JvdXBzPVtdLGU9MDtpPmU7ZSsrKXtmb3IodD10aGlzLl9hZGRSZXNvdXJjZVZpZXcoZSksbj0wO3I+bjtuKyspdC5hZGRUaW1lU2xvdENvbGxlY3Rpb24odGhpcy5fZGF0ZXNbbl0scy5kYXRlLmFkZERheXModGhpcy5fZGF0ZXNbbl0sMSkpO3RoaXMub3B0aW9ucy5hbGxEYXlTbG90JiZ0LmFkZERheVNsb3RDb2xsZWN0aW9uKHRoaXMuX2RhdGVzWzBdLHMuZGF0ZS5hZGREYXlzKHRoaXMuX2RhdGVzW3RoaXMuX2RhdGVzLmxlbmd0aC0xXSwxKSl9dGhpcy5fdGltZVNsb3RHcm91cHMoaSxyKSx0aGlzLm9wdGlvbnMuYWxsRGF5U2xvdCYmdGhpcy5fZGF5U2xvdEdyb3VwcyhpLHIpfSxvcHRpb25zOntuYW1lOlwiTXVsdGlEYXlWaWV3XCIsc2VsZWN0ZWREYXRlRm9ybWF0OlwiezA6RH1cIixhbGxEYXlTbG90OiEwLHNob3dXb3JrSG91cnM6ITEsdGl0bGU6XCJcIixzdGFydFRpbWU6cy5kYXRlLnRvZGF5KCksZW5kVGltZTpzLmRhdGUudG9kYXkoKSxtaW5vclRpY2tDb3VudDoyLG1ham9yVGljazo2MCxtYWpvclRpbWVIZWFkZXJUZW1wbGF0ZTpcIiM9a2VuZG8udG9TdHJpbmcoZGF0ZSwgJ3QnKSNcIixtaW5vclRpbWVIZWFkZXJUZW1wbGF0ZTpcIiZuYnNwO1wiLGdyb3VwSGVhZGVyVGVtcGxhdGU6XCIjPXRleHQjXCIsc2xvdFRlbXBsYXRlOlwiJm5ic3A7XCIsYWxsRGF5U2xvdFRlbXBsYXRlOlwiJm5ic3A7XCIsZXZlbnRUZW1wbGF0ZTpfLGFsbERheUV2ZW50VGVtcGxhdGU6eSxkYXRlSGVhZGVyVGVtcGxhdGU6dyxlZGl0YWJsZTohMCx3b3JrRGF5U3RhcnQ6bmV3IERhdGUoMTk4MCwxLDEsOCwwLDApLHdvcmtEYXlFbmQ6bmV3IERhdGUoMTk4MCwxLDEsMTcsMCwwKSx3b3JrV2Vla1N0YXJ0OjEsd29ya1dlZWtFbmQ6NSxmb290ZXI6e2NvbW1hbmQ6XCJ3b3JrRGF5XCJ9LG1lc3NhZ2VzOnthbGxEYXk6XCJhbGwgZGF5XCIsc2hvd0Z1bGxEYXk6XCJTaG93IGZ1bGwgZGF5XCIsc2hvd1dvcmtEYXk6XCJTaG93IGJ1c2luZXNzIGhvdXJzXCJ9LGN1cnJlbnRUaW1lTWFya2VyOnt1cGRhdGVJbnRlcnZhbDoxZTQsdXNlTG9jYWxUaW1lem9uZTohMH19LGV2ZW50czpbXCJyZW1vdmVcIixcImFkZFwiLFwiZWRpdFwiXSxfdGVtcGxhdGVzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLHQ9dSh7fSxzLlRlbXBsYXRlLGUudGVtcGxhdGVTZXR0aW5ncyk7dGhpcy5ldmVudFRlbXBsYXRlPXRoaXMuX2V2ZW50VG1wbChlLmV2ZW50VGVtcGxhdGUsayksdGhpcy5hbGxEYXlFdmVudFRlbXBsYXRlPXRoaXMuX2V2ZW50VG1wbChlLmFsbERheUV2ZW50VGVtcGxhdGUsYiksdGhpcy5tYWpvclRpbWVIZWFkZXJUZW1wbGF0ZT1zLnRlbXBsYXRlKGUubWFqb3JUaW1lSGVhZGVyVGVtcGxhdGUsdCksdGhpcy5taW5vclRpbWVIZWFkZXJUZW1wbGF0ZT1zLnRlbXBsYXRlKGUubWlub3JUaW1lSGVhZGVyVGVtcGxhdGUsdCksdGhpcy5kYXRlSGVhZGVyVGVtcGxhdGU9cy50ZW1wbGF0ZShlLmRhdGVIZWFkZXJUZW1wbGF0ZSx0KSx0aGlzLnNsb3RUZW1wbGF0ZT1zLnRlbXBsYXRlKGUuc2xvdFRlbXBsYXRlLHQpLHRoaXMuYWxsRGF5U2xvdFRlbXBsYXRlPXMudGVtcGxhdGUoZS5hbGxEYXlTbG90VGVtcGxhdGUsdCksdGhpcy5ncm91cEhlYWRlclRlbXBsYXRlPXMudGVtcGxhdGUoZS5ncm91cEhlYWRlclRlbXBsYXRlLHQpfSxfZWRpdGFibGU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuZWRpdGFibGUmJih0aGlzLl9pc01vYmlsZSgpP3RoaXMuX3RvdWNoRWRpdGFibGUoKTp0aGlzLl9tb3VzZUVkaXRhYmxlKCkpfSxfbW91c2VFZGl0YWJsZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5lbGVtZW50Lm9uKFwiY2xpY2tcIit2LFwiLmstZXZlbnQgYTpoYXMoLmstc2ktY2xvc2UpXCIsZnVuY3Rpb24obil7dC50cmlnZ2VyKFwicmVtb3ZlXCIse3VpZDplKHRoaXMpLmNsb3Nlc3QoXCIuay1ldmVudFwiKS5hdHRyKHMuYXR0cihcInVpZFwiKSl9KSxuLnByZXZlbnREZWZhdWx0KCl9KSx0Lm9wdGlvbnMuZWRpdGFibGUuY3JlYXRlIT09ITEmJnQuZWxlbWVudC5vbihcImRibGNsaWNrXCIrdixcIi5rLXNjaGVkdWxlci1jb250ZW50IHRkXCIsZnVuY3Rpb24obil7dmFyIGkscjtlKHRoaXMpLnBhcmVudCgpLmhhc0NsYXNzKFwiay1zY2hlZHVsZXItaGVhZGVyLWFsbC1kYXlcIil8fChpPXQuX3Nsb3RCeVBvc2l0aW9uKG4ucGFnZVgsbi5wYWdlWSksaSYmKHI9dC5fcmVzb3VyY2VCeVNsb3QoaSksdC50cmlnZ2VyKFwiYWRkXCIse2V2ZW50SW5mbzp1KHtzdGFydDppLnN0YXJ0RGF0ZSgpLGVuZDppLmVuZERhdGUoKX0scil9KSksbi5wcmV2ZW50RGVmYXVsdCgpKX0pLm9uKFwiZGJsY2xpY2tcIit2LFwiLmstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5IHRkXCIsZnVuY3Rpb24oZSl7dmFyIG4saT10Ll9zbG90QnlQb3NpdGlvbihlLnBhZ2VYLGUucGFnZVkpO2kmJihuPXQuX3Jlc291cmNlQnlTbG90KGkpLHQudHJpZ2dlcihcImFkZFwiLHtldmVudEluZm86dSh7fSx7aXNBbGxEYXk6ITAsc3RhcnQ6cy5kYXRlLmdldERhdGUoaS5zdGFydERhdGUoKSksZW5kOnMuZGF0ZS5nZXREYXRlKGkuc3RhcnREYXRlKCkpfSxuKX0pKSxlLnByZXZlbnREZWZhdWx0KCl9KSx0Lm9wdGlvbnMuZWRpdGFibGUudXBkYXRlIT09ITEmJnQuZWxlbWVudC5vbihcImRibGNsaWNrXCIrdixcIi5rLWV2ZW50XCIsZnVuY3Rpb24obil7dC50cmlnZ2VyKFwiZWRpdFwiLHt1aWQ6ZSh0aGlzKS5jbG9zZXN0KFwiLmstZXZlbnRcIikuYXR0cihzLmF0dHIoXCJ1aWRcIikpfSksbi5wcmV2ZW50RGVmYXVsdCgpfSl9LF90b3VjaEVkaXRhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0Lm9wdGlvbnMuZWRpdGFibGUuY3JlYXRlIT09ITEmJih0Ll9hZGRVc2VyRXZlbnRzPW5ldyBzLlVzZXJFdmVudHModC5lbGVtZW50LHtmaWx0ZXI6XCIuay1zY2hlZHVsZXItY29udGVudCB0ZFwiLHRhcDpmdW5jdGlvbihuKXt2YXIgaSxyO2Uobi50YXJnZXQpLnBhcmVudCgpLmhhc0NsYXNzKFwiay1zY2hlZHVsZXItaGVhZGVyLWFsbC1kYXlcIil8fChpPXQuX3Nsb3RCeVBvc2l0aW9uKG4ueC5sb2NhdGlvbixuLnkubG9jYXRpb24pLGkmJihyPXQuX3Jlc291cmNlQnlTbG90KGkpLHQudHJpZ2dlcihcImFkZFwiLHtldmVudEluZm86dSh7c3RhcnQ6aS5zdGFydERhdGUoKSxlbmQ6aS5lbmREYXRlKCl9LHIpfSkpLG4ucHJldmVudERlZmF1bHQoKSl9fSksdC5fYWxsRGF5VXNlckV2ZW50cz1uZXcgcy5Vc2VyRXZlbnRzKHQuZWxlbWVudCx7ZmlsdGVyOlwiLmstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5IHRkXCIsdGFwOmZ1bmN0aW9uKGUpe3ZhciBuLGk9dC5fc2xvdEJ5UG9zaXRpb24oZS54LmxvY2F0aW9uLGUueS5sb2NhdGlvbik7aSYmKG49dC5fcmVzb3VyY2VCeVNsb3QoaSksdC50cmlnZ2VyKFwiYWRkXCIse2V2ZW50SW5mbzp1KHt9LHtpc0FsbERheTohMCxzdGFydDpzLmRhdGUuZ2V0RGF0ZShpLnN0YXJ0RGF0ZSgpKSxlbmQ6cy5kYXRlLmdldERhdGUoaS5zdGFydERhdGUoKSl9LG4pfSkpLGUucHJldmVudERlZmF1bHQoKX19KSksdC5vcHRpb25zLmVkaXRhYmxlLnVwZGF0ZSE9PSExJiYodC5fZWRpdFVzZXJFdmVudHM9bmV3IHMuVXNlckV2ZW50cyh0LmVsZW1lbnQse2ZpbHRlcjpcIi5rLWV2ZW50XCIsdGFwOmZ1bmN0aW9uKG4pe3ZhciBpPWUobi50YXJnZXQpLmNsb3Nlc3QoXCIuay1ldmVudFwiKTtpLmhhc0NsYXNzKFwiay1ldmVudC1hY3RpdmVcIil8fHQudHJpZ2dlcihcImVkaXRcIix7dWlkOmkuYXR0cihzLmF0dHIoXCJ1aWRcIikpfSksbi5wcmV2ZW50RGVmYXVsdCgpfX0pKX0sX2xheW91dDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscj1bXSxvPVtdLGE9dGhpcy5vcHRpb25zLGw9dGhpcztmb3IodD0wO2UubGVuZ3RoPnQ7dCsrKW49e30sbi50ZXh0PWwuZGF0ZUhlYWRlclRlbXBsYXRlKHtkYXRlOmVbdF19KSxzLmRhdGUuaXNUb2RheShlW3RdKSYmKG4uY2xhc3NOYW1lPVwiay10b2RheVwiKSxyLnB1c2gobik7cmV0dXJuIGk9dGhpcy5ncm91cGVkUmVzb3VyY2VzLGEuYWxsRGF5U2xvdCYmby5wdXNoKHt0ZXh0OmEubWVzc2FnZXMuYWxsRGF5LGFsbERheTohMCxjZWxsQ29udGVudDpmdW5jdGlvbih0KXt2YXIgbj10O3JldHVybiB0PWkubGVuZ3RoJiZcInZlcnRpY2FsXCIhPT1sLl9ncm91cE9yaWVudGF0aW9uKCk/dCVlLmxlbmd0aDp0LGwuYWxsRGF5U2xvdFRlbXBsYXRlKHtkYXRlOmVbdF0scmVzb3VyY2VzOmZ1bmN0aW9uKCl7cmV0dXJuIGwuX3Jlc291cmNlQnlTbG90KHtncm91cEluZGV4Om59KX19KX19KSx0aGlzLl9mb3JUaW1lUmFuZ2UodGhpcy5zdGFydFRpbWUoKSx0aGlzLmVuZFRpbWUoKSxmdW5jdGlvbihlLHQsbixpKXt2YXIgcj10P2wubWFqb3JUaW1lSGVhZGVyVGVtcGxhdGU6bC5taW5vclRpbWVIZWFkZXJUZW1wbGF0ZSxhPXt0ZXh0OnIoe2RhdGU6ZX0pLGNsYXNzTmFtZTppP1wiay1zbG90LWNlbGxcIjpcIlwifTtvLnB1c2goYSl9KSxpLmxlbmd0aCYmKFwidmVydGljYWxcIj09PXRoaXMuX2dyb3VwT3JpZW50YXRpb24oKT9vPXRoaXMuX2NyZWF0ZVJvd3NMYXlvdXQoaSxvLHRoaXMuZ3JvdXBIZWFkZXJUZW1wbGF0ZSk6cj10aGlzLl9jcmVhdGVDb2x1bW5zTGF5b3V0KGkscix0aGlzLmdyb3VwSGVhZGVyVGVtcGxhdGUpKSx7Y29sdW1uczpyLHJvd3M6b319LF9mb290ZXI6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscj10aGlzLm9wdGlvbnM7ci5mb290ZXIhPT0hMSYmKHQ9JzxkaXYgY2xhc3M9XCJrLWhlYWRlciBrLXNjaGVkdWxlci1mb290ZXJcIj4nLG49ci5mb290ZXIuY29tbWFuZCxuJiZcIndvcmtEYXlcIj09PW4/KHQrPSc8dWwgY2xhc3M9XCJrLXJlc2V0IGstaGVhZGVyXCI+Jyx0Kz0nPGxpIGNsYXNzPVwiay1zdGF0ZS1kZWZhdWx0IGstc2NoZWR1bGVyLWZ1bGxkYXlcIj48YSBocmVmPVwiI1wiIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWNsb2NrXCI+PC9zcGFuPicsdCs9KHIuc2hvd1dvcmtIb3Vycz9yLm1lc3NhZ2VzLnNob3dGdWxsRGF5OnIubWVzc2FnZXMuc2hvd1dvcmtEYXkpK1wiPC9hPjwvbGk+XCIsdCs9XCI8L3VsPlwiKTp0Kz1cIiZuYnNwO1wiLHQrPVwiPC9kaXY+XCIsdGhpcy5mb290ZXI9ZSh0KS5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpLGk9dGhpcyx0aGlzLmZvb3Rlci5vbihcImNsaWNrXCIrdixcIi5rLXNjaGVkdWxlci1mdWxsZGF5XCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGkudHJpZ2dlcihcIm5hdmlnYXRlXCIse3ZpZXc6aS5uYW1lfHxyLm5hbWUsZGF0ZTppLnN0YXJ0RGF0ZSgpLGlzV29ya0RheTohci5zaG93V29ya0hvdXJzfSl9KSl9LF9mb3JUaW1lUmFuZ2U6ZnVuY3Rpb24oZSx0LGkscil7dmFyIG8sYSxzLGwsZCx1LGgscCx2LF8seSx3LGIsayx4LEM7Zm9yKGU9bihlKSx0PW4odCksbz10aGlzLGE9bShlKSxzPW0odCksbD1vLm9wdGlvbnMubWlub3JUaWNrQ291bnQsZD1vLm9wdGlvbnMubWFqb3JUaWNrKmYsdT1kL2x8fDEsaD1uZXcgRGF0ZSgrZSkscD1oLmdldERhdGUoKSxfPTAsdz1cIlwiLHk9Zy91LGEhPXMmJihhPnMmJihzKz1nKSx5PShzLWEpL3UpLHk9TWF0aC5yb3VuZCh5KTt5Pl87XysrKWI9XyUoZC91KSxrPTA9PT1iLHg9bC0xPmIsQz1iPT09bC0xLHcrPWkoaCxrLHgsQyksYyhoLHUsITEpO3JldHVybiBzJiYodj1tKGgpLHA8aC5nZXREYXRlKCkmJih2Kz1nKSx2PnMmJihoPW5ldyBEYXRlKCt0KSkpLHImJih3Kz1yKGgpKSx3fSxfY29udGVudDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscj10aGlzLG89ci5vcHRpb25zLGE9ci5zdGFydFRpbWUoKSxsPXRoaXMuZW5kVGltZSgpLGM9MSxkPTEsdT1lLmxlbmd0aCxoPVwiXCIscD10aGlzLmdyb3VwZWRSZXNvdXJjZXMsZj10aGlzLnNsb3RUZW1wbGF0ZSxnPXRoaXMuYWxsRGF5U2xvdFRlbXBsYXRlLG09ITE7Zm9yKHAubGVuZ3RoJiYobT1cInZlcnRpY2FsXCI9PT1yLl9ncm91cE9yaWVudGF0aW9uKCksbT8oZD10aGlzLl9yb3dDb3VudEZvckxldmVsKHRoaXMucm93TGV2ZWxzLmxlbmd0aC0yKSxvLmFsbERheVNsb3QmJih0PWZ1bmN0aW9uKHQpe3ZhciBuLGksbz0nPHRyIGNsYXNzPVwiay1zY2hlZHVsZXItaGVhZGVyLWFsbC1kYXlcIj4nLGE9ZnVuY3Rpb24oKXtyZXR1cm4gci5fcmVzb3VyY2VCeVNsb3Qoe2dyb3VwSW5kZXg6dH0pfTtmb3Iobj0wLGk9ZS5sZW5ndGg7aT5uO24rKylvKz1cIjx0ZD5cIitnKHtkYXRlOmVbbl0scmVzb3VyY2VzOmF9KStcIjwvdGQ+XCI7cmV0dXJuIG8rXCI8L3RyPlwifSkpOmM9dGhpcy5fY29sdW1uQ291bnRGb3JMZXZlbCh0aGlzLmNvbHVtbkxldmVscy5sZW5ndGgtMikpLGgrPVwiPHRib2R5PlwiLG49ZnVuY3Rpb24odCxuKXt2YXIgbyxhLGwsZCxoPVwiXCIscD1cIlwiLGc9MDtmb3IoaD1cIjx0clwiKyhuPycgY2xhc3M9XCJrLW1pZGRsZS1yb3dcIic6XCJcIikrXCI+XCIsZD1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gci5fcmVzb3VyY2VCeVNsb3Qoe2dyb3VwSW5kZXg6ZX0pfX07Yz5nO2crKylmb3Iobz0wLGE9dTthPm87bysrKXA9XCJcIixzLmRhdGUuaXNUb2RheShlW29dKSYmKHArPVwiay10b2RheVwiKSwocy5kYXRlLmdldE1pbGxpc2Vjb25kcyh0KTxzLmRhdGUuZ2V0TWlsbGlzZWNvbmRzKHIub3B0aW9ucy53b3JrRGF5U3RhcnQpfHxzLmRhdGUuZ2V0TWlsbGlzZWNvbmRzKHQpPj1zLmRhdGUuZ2V0TWlsbGlzZWNvbmRzKHIub3B0aW9ucy53b3JrRGF5RW5kKXx8IXIuX2lzV29ya0RheShlW29dKSkmJihwKz1cIiBrLW5vbndvcmstaG91clwiKSxoKz1cIjx0ZFwiKyhcIlwiIT09cD8nIGNsYXNzPVwiJytwKydcIic6XCJcIikrXCI+XCIsbD1zLmRhdGUuZ2V0RGF0ZShlW29dKSxzLmRhdGUuc2V0VGltZShsLHMuZGF0ZS5nZXRNaWxsaXNlY29uZHModCkpLGgrPWYoe2RhdGU6bCxyZXNvdXJjZXM6ZChtP2k6Zyl9KSxoKz1cIjwvdGQ+XCI7cmV0dXJuIGgrPVwiPC90cj5cIn0saT0wO2Q+aTtpKyspaCs9dD90KGkpOlwiXCIsaCs9dGhpcy5fZm9yVGltZVJhbmdlKGEsbCxuKTtoKz1cIjwvdGJvZHk+XCIsdGhpcy5jb250ZW50LmZpbmQoXCJ0YWJsZVwiKS5hcHBlbmQoaCl9LF9pc1dvcmtEYXk6ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLmdldERheSgpLGk9dGhpcy5fd29ya0RheXM7Zm9yKHQ9MDtpLmxlbmd0aD50O3QrKylpZihpW3RdPT09bilyZXR1cm4hMDtyZXR1cm4hMX0sX3JlbmRlcjpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXM7dD10fHxbXSx0aGlzLl9kYXRlcz10LHRoaXMuX3N0YXJ0RGF0ZT10WzBdLHRoaXMuX2VuZERhdGU9dFt0Lmxlbmd0aC0xfHwwXSx0aGlzLmNyZWF0ZUxheW91dCh0aGlzLl9sYXlvdXQodCkpLHRoaXMuX2NvbnRlbnQodCksdGhpcy5fZm9vdGVyKCksdGhpcy5yZWZyZXNoTGF5b3V0KCksbj10aGlzLmVsZW1lbnQuZmluZChcIi5rLXNjaGVkdWxlci1oZWFkZXItYWxsLWRheSB0ZFwiKSxuLmxlbmd0aCYmKHRoaXMuX2FsbERheUhlYWRlckhlaWdodD1uLmZpcnN0KClbMF0uY2xpZW50SGVpZ2h0KSxpLmRhdGVzSGVhZGVyLm9uKFwiY2xpY2tcIit2LFwiLmstbmF2LWRheVwiLGZ1bmN0aW9uKHQpe3ZhciBuPWUodC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KFwidGhcIikscj1uLm9mZnNldCgpLG89aS5fc2xvdEJ5UG9zaXRpb24oci5sZWZ0LHIudG9wK24ub3V0ZXJIZWlnaHQoKSk7aS50cmlnZ2VyKFwibmF2aWdhdGVcIix7dmlldzpcImRheVwiLGRhdGU6by5zdGFydERhdGUoKX0pfSl9LHN0YXJ0VGltZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucztyZXR1cm4gZS5zaG93V29ya0hvdXJzP2Uud29ya0RheVN0YXJ0OmUuc3RhcnRUaW1lfSxlbmRUaW1lOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zO3JldHVybiBlLnNob3dXb3JrSG91cnM/ZS53b3JrRGF5RW5kOmUuZW5kVGltZX0sc3RhcnREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXJ0RGF0ZX0sZW5kRGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmREYXRlfSxfZW5kOmZ1bmN0aW9uKGUpe3ZhciB0PW0odGhpcy5lbmRUaW1lKCkpfHxnO3JldHVybiBlJiYodD0wKSxuZXcgRGF0ZSh0aGlzLl9lbmREYXRlLmdldFRpbWUoKSt0KX0sbmV4dERhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gcy5kYXRlLm5leHREYXkodGhpcy5lbmREYXRlKCkpfSxwcmV2aW91c0RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gcy5kYXRlLnByZXZpb3VzRGF5KHRoaXMuc3RhcnREYXRlKCkpfSxjYWxjdWxhdGVEYXRlUmFuZ2U6ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXIoW3RoaXMub3B0aW9ucy5kYXRlXSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2N1cnJlbnRUaW1lVXBkYXRlVGltZXImJmNsZWFySW50ZXJ2YWwoZS5fY3VycmVudFRpbWVVcGRhdGVUaW1lciksZS5kYXRlc0hlYWRlciYmZS5kYXRlc0hlYWRlci5vZmYodiksZS5lbGVtZW50JiZlLmVsZW1lbnQub2ZmKHYpLGUuZm9vdGVyJiZlLmZvb3Rlci5yZW1vdmUoKSxkLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLl9pc01vYmlsZSgpJiZlLm9wdGlvbnMuZWRpdGFibGUmJihlLm9wdGlvbnMuZWRpdGFibGUuY3JlYXRlIT09ITEmJihlLl9hZGRVc2VyRXZlbnRzLmRlc3Ryb3koKSxlLl9hbGxEYXlVc2VyRXZlbnRzLmRlc3Ryb3koKSksZS5vcHRpb25zLmVkaXRhYmxlLnVwZGF0ZSE9PSExJiZlLl9lZGl0VXNlckV2ZW50cy5kZXN0cm95KCkpfSxpblJhbmdlOmZ1bmN0aW9uKGUpe3ZhciB0PWQuZm4uaW5SYW5nZS5jYWxsKHRoaXMsZSksbj1tKHRoaXMuc3RhcnRUaW1lKCkpLGk9bSh0aGlzLmVuZFRpbWUoKSl8fHMuZGF0ZS5NU19QRVJfREFZLHI9bShlLnN0YXJ0KSxvPW0oZS5lbmQpfHxzLmRhdGUuTVNfUEVSX0RBWTtyZXR1cm4gdCYmcj49biYmaT49b30sc2VsZWN0aW9uQnlFbGVtZW50OmZ1bmN0aW9uKGUpe3ZhciB0PWUub2Zmc2V0KCk7cmV0dXJuIHRoaXMuX3Nsb3RCeVBvc2l0aW9uKHQubGVmdCx0LnRvcCl9LF90aW1lU2xvdEludGVydmFsOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zO3JldHVybiBlLm1ham9yVGljay9lLm1pbm9yVGlja0NvdW50KmZ9LF90aW1lU2xvdEluZGV4OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9ucyxuPW0oZSksaT1tKHRoaXMuc3RhcnRUaW1lKCkpLHI9dC5tYWpvclRpY2svdC5taW5vclRpY2tDb3VudCpmO3JldHVybihuLWkpL3J9LF9zbG90SW5kZXg6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD90aGlzLl9kYXRlU2xvdEluZGV4KGUpOnRoaXMuX3RpbWVTbG90SW5kZXgoZSl9LF9kYXRlU2xvdEluZGV4OmZ1bmN0aW9uKGUsdCl7dmFyIG4scixvLGEsbD10aGlzLl9kYXRlc3x8W10sYz0xO2ZvcihuPTAscj1sLmxlbmd0aDtyPm47bisrKWlmKG89cy5kYXRlLmdldERhdGUobFtuXSksYT1uZXcgRGF0ZShzLmRhdGUuZ2V0RGF0ZShsW25dKS5nZXRUaW1lKCkrZy0odD8wOjEpKSxpKGUsbyxhKSlyZXR1cm4gbipjO3JldHVybi0xfSxfcG9zaXRpb25BbGxEYXlFdmVudDpmdW5jdGlvbih0LG4pe3ZhciBpLHIsbyxhLHMsbCxjLHU9bi5pbm5lcldpZHRoKCksaD1uLnN0YXJ0LmluZGV4LHA9bi5lbmQuaW5kZXgsZj1kLmNvbGxpZGluZ0V2ZW50cyhuLmV2ZW50cygpLGgscCksZz10aGlzLl9oZWFkZXJDb2x1bW5Db3VudHx8MCxtPTIsdj1oIT09cD81OjQsXz10aGlzLl9hbGxEYXlIZWFkZXJIZWlnaHQseT1uLnN0YXJ0U2xvdCgpO2Zvcih0LmNzcyh7bGVmdDp5Lm9mZnNldExlZnQrbSx3aWR0aDp1LXZ9KSxuLmFkZEV2ZW50KHtzbG90SW5kZXg6aCxzdGFydDpoLGVuZDpwLGVsZW1lbnQ6dH0pLGYucHVzaCh7c2xvdEluZGV4Omgsc3RhcnQ6aCxlbmQ6cCxlbGVtZW50OnR9KSxpPWQuY3JlYXRlUm93cyhmKSxpLmxlbmd0aCYmaS5sZW5ndGg+ZyYmKHRoaXMuX2hlYWRlckNvbHVtbkNvdW50PWkubGVuZ3RoKSxyPW4uc3RhcnQub2Zmc2V0VG9wLG89MCxhPWkubGVuZ3RoO2E+bztvKyspZm9yKHM9aVtvXS5ldmVudHMsbD0wLGM9cy5sZW5ndGg7Yz5sO2wrKyllKHNbbF0uZWxlbWVudCkuY3NzKHt0b3A6citvKl99KX0sX2FycmFuZ2VDb2x1bW5zOmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLG8sYSxzLGwsYyx1LGgscCxmLGcsbT1pLnN0YXJ0O2ZvcihlPXtlbGVtZW50OmUsc2xvdEluZGV4Om0uaW5kZXgsc3RhcnQ6dCxlbmQ6dCtufSxvPW0uY2xpZW50V2lkdGgsYT0uMSpvLGw9aS5ldmVudHMoKSxjPWQuY29sbGlkaW5nRXZlbnRzKGwsZS5zdGFydCxlLmVuZCksaS5hZGRFdmVudChlKSxjLnB1c2goZSkscj1kLmNyZWF0ZUNvbHVtbnMoYyksdT0oby1hKS9yLmxlbmd0aCxoPTAscD1yLmxlbmd0aDtwPmg7aCsrKWZvcihzPXJbaF0uZXZlbnRzLGY9MCxnPXMubGVuZ3RoO2c+ZjtmKyspc1tmXS5lbGVtZW50WzBdLnN0eWxlLndpZHRoPXUtNCtcInB4XCIsc1tmXS5lbGVtZW50WzBdLnN0eWxlLmxlZnQ9KHRoaXMuX2lzUnRsP2E6MCkrbS5vZmZzZXRMZWZ0K2gqdSsyK1wicHhcIn0sX3Bvc2l0aW9uRXZlbnQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPWUuc3RhcnRUaW1lfHxlLnN0YXJ0LHI9ZS5lbmRUaW1lfHxlLmVuZCxvPW4uaW5uZXJSZWN0KGksciwhMSksYT1vLmJvdHRvbS1vLnRvcC0yOzA+YSYmKGE9MCksdC5jc3Moe3RvcDpvLnRvcCxoZWlnaHQ6YX0pLHRoaXMuX2FycmFuZ2VDb2x1bW5zKHQsby50b3AsdFswXS5jbGllbnRIZWlnaHQsbil9LF9jcmVhdGVFdmVudEVsZW1lbnQ6ZnVuY3Rpb24odCxuLHIsbyl7dmFyIGEsbCxjLGQsaCxmLHY9bj90aGlzLmV2ZW50VGVtcGxhdGU6dGhpcy5hbGxEYXlFdmVudFRlbXBsYXRlLF89dGhpcy5vcHRpb25zLHk9Xy5lZGl0YWJsZSx3PXRoaXMuX2lzTW9iaWxlKCksYj15JiZ5LmRlc3Ryb3khPT0hMSYmIXcsaz15JiZ5LnJlc2l6ZSE9PSExLHg9cCh0aGlzLnN0YXJ0RGF0ZSgpKSxDPXAodGhpcy5lbmREYXRlKCkpLFM9bSh0aGlzLnN0YXJ0VGltZSgpKSxUPW0odGhpcy5lbmRUaW1lKCkpLEQ9dC5fdGltZShcInN0YXJ0XCIpLEE9dC5fdGltZShcImVuZFwiKTtyZXR1cm4gUz49VCYmKFQ9bShuZXcgRGF0ZSh0aGlzLmVuZFRpbWUoKS5nZXRUaW1lKCkrZy0xKSkpLG58fHQuaXNBbGxEYXl8fChDPW5ldyBEYXRlKEMuZ2V0VGltZSgpK2cpKSxsPXQuc3RhcnQsYz10LmVuZCx0LmlzQWxsRGF5JiYoYz1wKHQuZW5kKSksIWkocChsKSx4LEMpJiYhaShjLHgsQyl8fG4mJlM+RCYmQT5UP2E9ITA6cChsKTx4fHxuJiZTPkQ/bz0hMDooYz5DJiYhbnx8biYmQT5UKSYmKHI9ITApLGQ9dGhpcy5ldmVudFJlc291cmNlcyh0KSx0LnN0YXJ0VGltZSYmKGw9bmV3IERhdGUoRCksbD1zLnRpbWV6b25lLmFwcGx5KGwsXCJFdGMvVVRDXCIpKSx0LmVuZFRpbWUmJihjPW5ldyBEYXRlKEEpLGM9cy50aW1lem9uZS5hcHBseShjLFwiRXRjL1VUQ1wiKSksaD11KHt9LHtuczpzLm5zLHJlc2l6YWJsZTprLHNob3dEZWxldGU6YixtaWRkbGU6YSxoZWFkOnIsdGFpbDpvLHNpbmdsZURheToxPT10aGlzLl9kYXRlcy5sZW5ndGgscmVzb3VyY2VzOmQsaW52ZXJzZUNvbG9yOmQmJmRbMF0/dGhpcy5fc2hvdWxkSW52ZXJzZVJlc291cmNlQ29sb3IoZFswXSk6ITF9LHQse3N0YXJ0OmwsZW5kOmN9KSxmPWUodihoKSksdGhpcy5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmYsZGF0YTpbe2RhdGFJdGVtOmh9XX19KSxmfSxfaXNJblRpbWVTbG90OmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5zdGFydFRpbWUoKSxpPXRoaXMuZW5kVGltZSgpLG89ZS5zdGFydFRpbWV8fGUuc3RhcnQsYT1lLmVuZFRpbWV8fGUuZW5kO3JldHVybiBtKGkpPT09bShzLmRhdGUuZ2V0RGF0ZShpKSkmJihpPXMuZGF0ZS5nZXREYXRlKGkpLGMoaSxnLTEpKSxlLl9kYXRlKFwiZW5kXCIpPmUuX2RhdGUoXCJzdGFydFwiKSYmKGE9K2UuX2RhdGUoXCJlbmRcIikrKGctMSkpLGEtPWUuX2RhdGUoXCJlbmRcIiksby09ZS5fZGF0ZShcInN0YXJ0XCIpLGk9bShpKSxuPW0obiksbj09PW8mJm89PT1hPyEwOih0PW8hPT1pLHIobyxuLGksdCl8fHIoYSxuLGksdCl8fHIobixvLGEpfHxyKGksbyxhKSl9LF9pc0luRGF0ZVNsb3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5ncm91cHNbMF0sbj10LmZpcnN0U2xvdCgpLnN0YXJ0LHI9dC5sYXN0U2xvdCgpLmVuZC0xLG89cy5kYXRlLnRvVXRjVGltZShlLnN0YXJ0KSxhPXMuZGF0ZS50b1V0Y1RpbWUoZS5lbmQpO3JldHVybihpKG8sbixyKXx8aShhLG4scil8fGkobixvLGEpfHxpKHIsbyxhKSkmJighaShhLG4sbil8fGkoYSxvLG8pfHxlLmlzQWxsRGF5KX0sX3VwZGF0ZUFsbERheUhlYWRlckhlaWdodDpmdW5jdGlvbihlKXt2YXIgdCxuO2lmKHRoaXMuX2hlaWdodCE9PWUmJih0aGlzLl9oZWlnaHQ9ZSx0PXRoaXMuZWxlbWVudC5maW5kKFwiLmstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5IHRkXCIpLHQubGVuZ3RoKSlmb3IodC5wYXJlbnQoKS5hZGQodGhpcy5lbGVtZW50LmZpbmQoXCIuay1zY2hlZHVsZXItdGltZXMtYWxsLWRheVwiKS5wYXJlbnQoKSkuaGVpZ2h0KGUpLG49MDt0aGlzLmdyb3Vwcy5sZW5ndGg+bjtuKyspdGhpcy5ncm91cHNbbl0ucmVmcmVzaCgpfSxfcmVuZGVyRXZlbnRzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLGEscyxsLGMsZCx1LGgscCxmLG0sdixfLHk9dGhpcy5kYXRlc0hlYWRlci5maW5kKFwiLmstc2NoZWR1bGVyLWhlYWRlci13cmFwID4gZGl2XCIpO2ZvcihpPTAscj1lLmxlbmd0aDtyPmk7aSsrKWlmKG49ZVtpXSx0aGlzLl9pc0luRGF0ZVNsb3QobikpaWYoYT1uLmlzQWxsRGF5fHxuLmVuZC5nZXRUaW1lKCktbi5zdGFydC5nZXRUaW1lKCk+PWcscz1hJiYhdGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpP3k6dGhpcy5jb250ZW50LGEpdGhpcy5vcHRpb25zLmFsbERheVNsb3QmJihkPXRoaXMuZ3JvdXBzW3RdLGQuX2NvbnRpbnVvdXNFdmVudHN8fChkLl9jb250aW51b3VzRXZlbnRzPVtdKSxjPWQuc2xvdFJhbmdlcyhuKSxjLmxlbmd0aCYmKGw9dGhpcy5fY3JlYXRlRXZlbnRFbGVtZW50KG4sIWEpLHRoaXMuX3Bvc2l0aW9uQWxsRGF5RXZlbnQobCxjWzBdKSxvKGQsY1swXSxsLCEwKSxsLmFwcGVuZFRvKHMpKSk7ZWxzZSBpZih0aGlzLl9pc0luVGltZVNsb3QobikpZm9yKGQ9dGhpcy5ncm91cHNbdF0sZC5fY29udGludW91c0V2ZW50c3x8KGQuX2NvbnRpbnVvdXNFdmVudHM9W10pLGM9ZC5zbG90UmFuZ2VzKG4pLHU9Yy5sZW5ndGgsaD0wO3U+aDtoKyspcD1jW2hdLGY9bi5zdGFydCxtPW4uZW5kLHU+MSYmKDA9PT1oP209cC5lbmQuZW5kRGF0ZSgpOmg9PXUtMT9mPXAuc3RhcnQuc3RhcnREYXRlKCk6KGY9cC5zdGFydC5zdGFydERhdGUoKSxtPXAuZW5kLmVuZERhdGUoKSkpLHY9bi5jbG9uZSh7c3RhcnQ6ZixlbmQ6bSxzdGFydFRpbWU6bi5zdGFydFRpbWUsZW5kVGltZTpuLmVuZFRpbWV9KSx0aGlzLl9pc0luVGltZVNsb3QodikmJihfPXAuaGVhZCxsPXRoaXMuX2NyZWF0ZUV2ZW50RWxlbWVudChuLCFhLF8scC50YWlsKSxsLmFwcGVuZFRvKHMpLHRoaXMuX3Bvc2l0aW9uRXZlbnQodixsLHApLG8oZCxwLGwsITEpKX0scmVuZGVyOmZ1bmN0aW9uKHQpe3ZhciBuLHIsbyxhLGw7Zm9yKHRoaXMuX2hlYWRlckNvbHVtbkNvdW50PTAsdGhpcy5fZ3JvdXBzKCksdGhpcy5lbGVtZW50LmZpbmQoXCIuay1ldmVudFwiKS5yZW1vdmUoKSx0PW5ldyBzLmRhdGEuUXVlcnkodCkuc29ydChbe2ZpZWxkOlwic3RhcnRcIixkaXI6XCJhc2NcIn0se2ZpZWxkOlwiZW5kXCIsZGlyOlwiZGVzY1wifV0pLnRvQXJyYXkoKSxuPVtdLHRoaXMuX2V2ZW50c0J5UmVzb3VyY2UodCx0aGlzLmdyb3VwZWRSZXNvdXJjZXMsbikscj10aGlzLG89ZS5tYXAodGhpcy5fZGF0ZXMsZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgubWF4LmFwcGx5KG51bGwsZS5tYXAobixmdW5jdGlvbihuKXtyZXR1cm4gZS5ncmVwKG4sZnVuY3Rpb24oZSl7cmV0dXJuIGUuaXNNdWx0aURheSgpJiZpKHQscChlLnN0YXJ0KSxwKGUuZW5kKSl9KS5sZW5ndGh9KSl9KSxhPU1hdGgubWF4LmFwcGx5KG51bGwsbyksdGhpcy5fdXBkYXRlQWxsRGF5SGVhZGVySGVpZ2h0KChhKzEpKnRoaXMuX2FsbERheUhlYWRlckhlaWdodCksbD0wO24ubGVuZ3RoPmw7bCsrKXRoaXMuX3JlbmRlckV2ZW50cyhuW2xdLGwpO3RoaXMucmVmcmVzaExheW91dCgpLHRoaXMudHJpZ2dlcihcImFjdGl2YXRlXCIpfSxfZXZlbnRzQnlSZXNvdXJjZTpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGEsbD10WzBdO2lmKGwpZm9yKGk9bC5kYXRhU291cmNlLnZpZXcoKSxyPTA7aS5sZW5ndGg+cjtyKyspbz10aGlzLl9yZXNvdXJjZVZhbHVlKGwsaVtyXSksYT1uZXcgcy5kYXRhLlF1ZXJ5KGUpLmZpbHRlcih7ZmllbGQ6bC5maWVsZCxvcGVyYXRvcjpkLmdyb3VwRXFGaWx0ZXIobyl9KS50b0FycmF5KCksdC5sZW5ndGg+MT90aGlzLl9ldmVudHNCeVJlc291cmNlKGEsdC5zbGljZSgxKSxuKTpuLnB1c2goYSk7ZWxzZSBuLnB1c2goZSl9LF9jb2x1bW5PZmZzZXRGb3JSZXNvdXJjZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29sdW1uQ291bnRGb3JMZXZlbChlKS90aGlzLl9jb2x1bW5Db3VudEZvckxldmVsKGUtMSl9LF9jb2x1bW5Db3VudEZvckxldmVsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY29sdW1uTGV2ZWxzW2VdO3JldHVybiB0P3QubGVuZ3RoOjB9LF9yb3dDb3VudEZvckxldmVsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucm93TGV2ZWxzW2VdO3JldHVybiB0P3QubGVuZ3RoOjB9LGNsZWFyU2VsZWN0aW9uOmZ1bmN0aW9uKCl7dGhpcy5jb250ZW50LmFkZCh0aGlzLmRhdGVzSGVhZGVyKS5maW5kKFwiLmstc3RhdGUtc2VsZWN0ZWRcIikucmVtb3ZlQXR0cihcImlkXCIpLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITEpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiKX0sX3VwZGF0ZURpcmVjdGlvbjpmdW5jdGlvbihlLHQsbixpLHIpe3ZhciBvPWUuaXNBbGxEYXksYT10WzBdLnN0YXJ0LHM9dFt0Lmxlbmd0aC0xXS5lbmQ7biYmKHI/b3x8YS5pbmRleCE9PXMuaW5kZXh8fGEuY29sbGVjdGlvbkluZGV4IT09cy5jb2xsZWN0aW9uSW5kZXh8fChlLmJhY2t3YXJkPWkpOihvJiZhLmluZGV4PT09cy5pbmRleHx8IW8mJmEuY29sbGVjdGlvbkluZGV4PT09cy5jb2xsZWN0aW9uSW5kZXgpJiYoZS5iYWNrd2FyZD1pKSl9LF9jaGFuZ2VWaWV3UGVyaW9kOmZ1bmN0aW9uKGUsbixpKXt2YXIgcixvLGEscztyZXR1cm4gaT90OihyPW4/dGhpcy5wcmV2aW91c0RhdGUoKTp0aGlzLm5leHREYXRlKCksbz1lLnN0YXJ0LGE9ZS5lbmQsZS5zdGFydD1uZXcgRGF0ZShyKSxlLmVuZD1uZXcgRGF0ZShyKSxzPWUuaXNBbGxEYXk/ZzptKGEpLGMoZS5zdGFydCxtKG8pKSxjKGUuZW5kLHMpLHRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKXx8KGUuZ3JvdXBJbmRleD1uP3RoaXMuZ3JvdXBzLmxlbmd0aC0xOjApLGUuZXZlbnRzPVtdLCEwKX19KTt1KCEwLGwse011bHRpRGF5Vmlldzp4LERheVZpZXc6eC5leHRlbmQoe29wdGlvbnM6e25hbWU6XCJEYXlWaWV3XCIsdGl0bGU6XCJEYXlcIn0sbmFtZTpcImRheVwifSksV2Vla1ZpZXc6eC5leHRlbmQoe29wdGlvbnM6e25hbWU6XCJXZWVrVmlld1wiLHRpdGxlOlwiV2Vla1wiLHNlbGVjdGVkRGF0ZUZvcm1hdDpcInswOkR9IC0gezE6RH1cIn0sbmFtZTpcIndlZWtcIixjYWxjdWxhdGVEYXRlUmFuZ2U6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy5vcHRpb25zLmRhdGUsaT1zLmRhdGUuZGF5T2ZXZWVrKG4sdGhpcy5jYWxlbmRhckluZm8oKS5maXJzdERheSwtMSkscj1bXTtmb3IoZT0wLHQ9Nzt0PmU7ZSsrKXIucHVzaChpKSxpPXMuZGF0ZS5uZXh0RGF5KGkpO3RoaXMuX3JlbmRlcihyKX19KSxXb3JrV2Vla1ZpZXc6eC5leHRlbmQoe29wdGlvbnM6e25hbWU6XCJXb3JrV2Vla1ZpZXdcIix0aXRsZTpcIldvcmsgV2Vla1wiLHNlbGVjdGVkRGF0ZUZvcm1hdDpcInswOkR9IC0gezE6RH1cIn0sbmFtZTpcIndvcmtXZWVrXCIsbmV4dERhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gcy5kYXRlLmRheU9mV2VlayhzLmRhdGUubmV4dERheSh0aGlzLmVuZERhdGUoKSksdGhpcy5vcHRpb25zLndvcmtXZWVrU3RhcnQsMSl9LHByZXZpb3VzRGF0ZTpmdW5jdGlvbigpe3JldHVybiBzLmRhdGUucHJldmlvdXNEYXkodGhpcy5zdGFydERhdGUoKSl9LGNhbGN1bGF0ZURhdGVSYW5nZTpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLm9wdGlvbnMuZGF0ZSx0PXMuZGF0ZS5kYXlPZldlZWsoZSx0aGlzLm9wdGlvbnMud29ya1dlZWtTdGFydCwtMSksbj1zLmRhdGUuZGF5T2ZXZWVrKHQsdGhpcy5vcHRpb25zLndvcmtXZWVrRW5kLDEpLGk9W107bj49dDspaS5wdXNoKHQpLHQ9cy5kYXRlLm5leHREYXkodCk7dGhpcy5fcmVuZGVyKGkpfX0pfSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dmFyIHQsbixpPTA7Zm9yKHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspaSs9ZVt0XS5pdGVtcy5sZW5ndGg7cmV0dXJuIGl9ZnVuY3Rpb24gbihlLHQpe3JldHVybiBlLnZhbHVlUHJpbWl0aXZlJiYodD1vLmdldHRlcihlLmRhdGFWYWx1ZUZpZWxkKSh0KSksdH1mdW5jdGlvbiBpKGUpe2Zvcih2YXIgdCxuPTAsaT1lLmxlbmd0aCxvPVtdO2k+bjtuKyspdD1lW25dLHQuZ3JvdXBzPyh0PXIodC5ncm91cHMpLG89by5jb25jYXQodCkpOm89by5jb25jYXQocih0Lml0ZW1zKSk7cmV0dXJuIG99ZnVuY3Rpb24gcihlKXtmb3IodmFyIHQ9W10uY29uY2F0KGUpLG49dC5zaGlmdCgpLGk9W10scj1bXS5wdXNoO247KW4uZ3JvdXBzP3IuYXBwbHkodCxuLmdyb3Vwcyk6bi5pdGVtcz9yLmFwcGx5KHQsbi5pdGVtcyk6ci5jYWxsKGksbiksbj10LnNoaWZ0KCk7cmV0dXJuIGl9dmFyIG89d2luZG93LmtlbmRvLGE9by51aSxzPVwiLmtlbmRvQWdlbmRhVmlld1wiLGw9JzxkaXYgY2xhc3M9XCJrLXRhc2tcIiB0aXRsZT1cIiM6dGl0bGUucmVwbGFjZSgvXCIvZyxcIlxcJ1wiKSNcIiBkYXRhLSM9a2VuZG8ubnMjdWlkPVwiIz11aWQjXCI+IyBpZiAocmVzb3VyY2VzWzBdKSB7IzxzcGFuIGNsYXNzPVwiay1zY2hlZHVsZXItbWFya1wiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojPXJlc291cmNlc1swXS5jb2xvciNcIj48L3NwYW4+IyB9ICMjIGlmIChkYXRhLmlzRXhjZXB0aW9uKCkpIHsgIzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1leGNlcHRpb25cIj48L3NwYW4+IyB9IGVsc2UgaWYgKGRhdGEuaXNSZWN1cnJpbmcoKSkgeyM8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktcmVmcmVzaFwiPjwvc3Bhbj4jIH0gI3swfSNpZiAoc2hvd0RlbGV0ZSkgeyM8YSBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstbGluayBrLWV2ZW50LWRlbGV0ZVwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstc2ktY2xvc2VcIj48L3NwYW4+PC9hPiN9IzwvZGl2Pic7YS5BZ2VuZGFWaWV3PWEuU2NoZWR1bGVyVmlldy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXthLlNjaGVkdWxlclZpZXcuZm4uaW5pdC5jYWxsKHRoaXMsdCxuKSxuPXRoaXMub3B0aW9ucyxuLmVkaXRhYmxlJiYobi5lZGl0YWJsZT1lLmV4dGVuZCh7XCJkZWxldGVcIjohMH0sbi5lZGl0YWJsZSx7Y3JlYXRlOiExLHVwZGF0ZTohMX0pKSx0aGlzLnRpdGxlPW4udGl0bGUsdGhpcy5uYW1lPVwiYWdlbmRhXCIsdGhpcy5fZXZlbnRUZW1wbGF0ZT10aGlzLl9ldmVudFRtcGwobi5ldmVudFRlbXBsYXRlLGwpLHRoaXMuX2RhdGVUZW1wbGF0ZT1vLnRlbXBsYXRlKG4uZXZlbnREYXRlVGVtcGxhdGUpLHRoaXMuX2dyb3VwVGVtcGxhdGU9by50ZW1wbGF0ZShuLmV2ZW50R3JvdXBUZW1wbGF0ZSksdGhpcy5fdGltZVRlbXBsYXRlPW8udGVtcGxhdGUobi5ldmVudFRpbWVUZW1wbGF0ZSksdGhpcy5lbGVtZW50Lm9uKFwibW91c2VlbnRlclwiK3MsXCIuay1zY2hlZHVsZXItYWdlbmRhIC5rLXNjaGVkdWxlci1jb250ZW50IHRyXCIsXCJfbW91c2VlbnRlclwiKS5vbihcIm1vdXNlbGVhdmVcIitzLFwiLmstc2NoZWR1bGVyLWFnZW5kYSAuay1zY2hlZHVsZXItY29udGVudCB0clwiLFwiX21vdXNlbGVhdmVcIikub24oXCJjbGlja1wiK3MsXCIuay1zY2hlZHVsZXItYWdlbmRhIC5rLXNjaGVkdWxlci1jb250ZW50IC5rLWxpbms6aGFzKC5rLXNpLWNsb3NlKVwiLFwiX3JlbW92ZVwiKSx0aGlzLl9yZW5kZXJMYXlvdXQobi5kYXRlKX0sX21vdXNlZW50ZXI6ZnVuY3Rpb24odCl7ZSh0LmN1cnJlbnRUYXJnZXQpLmFkZENsYXNzKFwiay1zdGF0ZS1ob3ZlclwiKX0sX21vdXNlbGVhdmU6ZnVuY3Rpb24odCl7ZSh0LmN1cnJlbnRUYXJnZXQpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1ob3ZlclwiKX0sX3JlbW92ZTpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdGhpcy50cmlnZ2VyKFwicmVtb3ZlXCIse3VpZDplKHQuY3VycmVudFRhcmdldCkuY2xvc2VzdChcIi5rLXRhc2tcIikuYXR0cihvLmF0dHIoXCJ1aWRcIikpfSl9LG5leHREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIG8uZGF0ZS5uZXh0RGF5KHRoaXMuc3RhcnREYXRlKCkpfSxzdGFydERhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhcnREYXRlfSxlbmREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuZERhdGV9LHByZXZpb3VzRGF0ZTpmdW5jdGlvbigpe3JldHVybiBvLmRhdGUucHJldmlvdXNEYXkodGhpcy5zdGFydERhdGUoKSl9LF9yZW5kZXJMYXlvdXQ6ZnVuY3Rpb24oZSl7dGhpcy5fc3RhcnREYXRlPWUsdGhpcy5fZW5kRGF0ZT1vLmRhdGUuYWRkRGF5cyhlLDcpLHRoaXMuY3JlYXRlTGF5b3V0KHRoaXMuX2xheW91dCgpKSx0aGlzLnRhYmxlLmFkZENsYXNzKFwiay1zY2hlZHVsZXItYWdlbmRhXCIpXHJcbn0sX2xheW91dDpmdW5jdGlvbigpe3ZhciBlLHQsbixpPVt7dGV4dDp0aGlzLm9wdGlvbnMubWVzc2FnZXMudGltZSxjbGFzc05hbWU6XCJrLXNjaGVkdWxlci10aW1lY29sdW1uXCJ9LHt0ZXh0OnRoaXMub3B0aW9ucy5tZXNzYWdlcy5ldmVudH1dO2lmKHRoaXMuX2lzTW9iaWxlUGhvbmVWaWV3KCl8fGkuc3BsaWNlKDAsMCx7dGV4dDp0aGlzLm9wdGlvbnMubWVzc2FnZXMuZGF0ZSxjbGFzc05hbWU6XCJrLXNjaGVkdWxlci1kYXRlY29sdW1uXCJ9KSxlPXRoaXMuZ3JvdXBlZFJlc291cmNlcyxlLmxlbmd0aCl7Zm9yKHQ9W10sbj0wO2UubGVuZ3RoPm47bisrKXQucHVzaCh7dGV4dDpcIlwiLGNsYXNzTmFtZTpcImstc2NoZWR1bGVyLWdyb3VwY29sdW1uXCJ9KTtpPXQuY29uY2F0KGkpfXJldHVybntjb2x1bW5zOml9fSxfdGFza3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsYSxzLGwsYz1bXTtmb3IodD0wO2UubGVuZ3RoPnQ7dCsrKWlmKG49ZVt0XSxpPW4uc3RhcnQscj1uLmVuZCxhPShvLmRhdGUuZ2V0RGF0ZShyKS1vLmRhdGUuZ2V0RGF0ZShpKSkvby5kYXRlLk1TX1BFUl9EQVkrMSxzPW4uY2xvbmUoKSxzLnN0YXJ0RGF0ZT1vLmRhdGUuZ2V0RGF0ZShpKSxzLnN0YXJ0RGF0ZT49dGhpcy5zdGFydERhdGUoKSYmYy5wdXNoKHMpLGE+MSlmb3Iocy5lbmQ9by5kYXRlLm5leHREYXkoaSkscy5oZWFkPSEwLGw9MTthPmw7bCsrKWk9cy5lbmQscz1uLmNsb25lKCkscy5zdGFydD1pLHMuc3RhcnREYXRlPW8uZGF0ZS5nZXREYXRlKGkpLHMuZW5kPW8uZGF0ZS5uZXh0RGF5KGkpLGw9PWEtMT8ocy5lbmQ9bmV3IERhdGUocy5zdGFydC5nZXRGdWxsWWVhcigpLHMuc3RhcnQuZ2V0TW9udGgoKSxzLnN0YXJ0LmdldERhdGUoKSxyLmdldEhvdXJzKCksci5nZXRNaW51dGVzKCksci5nZXRTZWNvbmRzKCksci5nZXRNaWxsaXNlY29uZHMoKSkscy50YWlsPSEwKToocy5pc0FsbERheT0hMCxzLm1pZGRsZT0hMCkscy5lbmQ8PXRoaXMuZW5kRGF0ZSgpJiZzLnN0YXJ0Pj10aGlzLnN0YXJ0RGF0ZSgpJiZjLnB1c2gocyk7cmV0dXJuIG5ldyBvLmRhdGEuUXVlcnkoYykuc29ydChbe2ZpZWxkOlwic3RhcnRcIixkaXI6XCJhc2NcIn0se2ZpZWxkOlwiZW5kXCIsZGlyOlwiYXNjXCJ9XSkuZ3JvdXBCeSh7ZmllbGQ6XCJzdGFydERhdGVcIn0pLnRvQXJyYXkoKX0sX3JlbmRlclRhc2tHcm91cHM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsYSxzLGwsYyxkLHUsaD1bXSxwPXRoaXMub3B0aW9ucy5lZGl0YWJsZSxmPXAmJnAuZGVzdHJveSE9PSExJiYhdGhpcy5faXNNb2JpbGUoKSxnPXRoaXMuX2lzTW9iaWxlUGhvbmVWaWV3KCk7Zm9yKG49MDtlLmxlbmd0aD5uO24rKylmb3IoaT1lW25dLnZhbHVlLHI9ZVtuXS5pdGVtcyxhPW8uZGF0ZS5pc1RvZGF5KGkpLHM9MDtyLmxlbmd0aD5zO3MrKyl7aWYobD1yW3NdLGM9W10sZD1nP1tdOmMsMD09PW4mJjA9PT1zJiZ0Lmxlbmd0aClmb3IodT0wO3QubGVuZ3RoPnU7dSsrKWQucHVzaChvLmZvcm1hdCgnPHRkIGNsYXNzPVwiay1zY2hlZHVsZXItZ3JvdXBjb2x1bW57Mn1cIiByb3dzcGFuPVwiezB9XCI+ezF9PC90ZD4nLHRbdV0ucm93U3Bhbix0aGlzLl9ncm91cFRlbXBsYXRlKHt2YWx1ZTp0W3VdLnRleHR9KSx0W3VdLmNsYXNzTmFtZSkpOzA9PT1zJiYoZz8oZC5wdXNoKG8uZm9ybWF0KCc8dGQgY2xhc3M9XCJrLXNjaGVkdWxlci1kYXRlY29sdW1uXCIgY29sc3Bhbj1cIjJcIj57MH08L3RkPicsdGhpcy5fZGF0ZVRlbXBsYXRlKHtkYXRlOml9KSkpLGgucHVzaCgnPHRyIHJvbGU9XCJyb3dcIiBhcmlhLXNlbGVjdGVkPVwiZmFsc2VcIicrKGE/JyBjbGFzcz1cImstdG9kYXlcIj4nOlwiPlwiKStkLmpvaW4oXCJcIikrXCI8L3RyPlwiKSk6Yy5wdXNoKG8uZm9ybWF0KCc8dGQgY2xhc3M9XCJrLXNjaGVkdWxlci1kYXRlY29sdW1uezN9ezJ9XCIgcm93c3Bhbj1cInswfVwiPnsxfTwvdGQ+JyxyLmxlbmd0aCx0aGlzLl9kYXRlVGVtcGxhdGUoe2RhdGU6aX0pLG4hPWUubGVuZ3RoLTF8fHQubGVuZ3RoP1wiXCI6XCIgay1sYXN0XCIsdC5sZW5ndGg/XCJcIjpcIiBrLWZpcnN0XCIpKSksbC5mb3JtYXQ9bC5oZWFkP1wiezA6dH1cIjpsLnRhaWw/XCJ7MTp0fVwiOlwiezA6dH0tezE6dH1cIixsLnJlc291cmNlcz10aGlzLmV2ZW50UmVzb3VyY2VzKGwpLGMucHVzaChvLmZvcm1hdCgnPHRkIGNsYXNzPVwiay1zY2hlZHVsZXItdGltZWNvbHVtblwiPjxkaXY+ezB9ezF9ezJ9PC9kaXY+PC90ZD48dGQ+ezN9PC90ZD4nLGwudGFpbHx8bC5taWRkbGU/JzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy13XCI+PC9zcGFuPic6XCJcIix0aGlzLl90aW1lVGVtcGxhdGUobC5jbG9uZSh7c3RhcnQ6bC5zdGFydFRpbWV8fGwuc3RhcnQsZW5kOmwuZW5kVGltZXx8bC5lbmR9KSksbC5oZWFkfHxsLm1pZGRsZT8nPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LWVcIj48L3NwYW4+JzpcIlwiLHRoaXMuX2V2ZW50VGVtcGxhdGUobC5jbG9uZSh7c2hvd0RlbGV0ZTpmfSkpKSksaC5wdXNoKCc8dHIgcm9sZT1cInJvd1wiIGFyaWEtc2VsZWN0ZWQ9XCJmYWxzZVwiJysoYT8nIGNsYXNzPVwiay10b2RheVwiPic6XCI+XCIpK2Muam9pbihcIlwiKStcIjwvdHI+XCIpfXJldHVybiBoLmpvaW4oXCJcIil9LHJlbmRlcjpmdW5jdGlvbihlKXt2YXIgdCxuLHI9dGhpcy5jb250ZW50LmZpbmQoXCJ0YWJsZVwiKS5lbXB0eSgpLG89W107ZS5sZW5ndGg+MCYmKHQ9dGhpcy5ncm91cGVkUmVzb3VyY2VzLHQubGVuZ3RoPyhvPXRoaXMuX2NyZWF0ZUdyb3VwQ29uZmlndXJhdGlvbihlLHQsbnVsbCksdGhpcy5fcmVuZGVyR3JvdXBzKG8scixbXSkpOihvPXRoaXMuX3Rhc2tzKGUpLHIuYXBwZW5kKHRoaXMuX3JlbmRlclRhc2tHcm91cHMobyxbXSkpKSksbj10aGlzLl9ldmVudHNMaXN0PWkobyksdGhpcy5fYW5ndWxhckl0ZW1zKHIsbiksdGhpcy5yZWZyZXNoTGF5b3V0KCksdGhpcy50cmlnZ2VyKFwiYWN0aXZhdGVcIil9LF9hbmd1bGFySXRlbXM6ZnVuY3Rpb24oZSx0KXt0aGlzLmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXt2YXIgbj1bXSxpPXQubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBuLnB1c2goe2RhdGFJdGVtOnR9KSxlLmZpbmQoXCIuay10YXNrW1wiK28uYXR0cihcInVpZFwiKStcIj1cIit0LnVpZCtcIl1cIil9KTtyZXR1cm57ZWxlbWVudHM6aSxkYXRhOm59fSl9LF9yZW5kZXJHcm91cHM6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbztmb3IoaT0wLHI9ZS5sZW5ndGg7cj5pO2krKylvPW4uc3BsaWNlKDApLG8ucHVzaChlW2ldKSxlW2ldLmdyb3Vwcz90aGlzLl9yZW5kZXJHcm91cHMoZVtpXS5ncm91cHMsdCxvKTp0LmFwcGVuZCh0aGlzLl9yZW5kZXJUYXNrR3JvdXBzKGVbaV0uaXRlbXMsbykpfSxfY3JlYXRlR3JvdXBDb25maWd1cmF0aW9uOmZ1bmN0aW9uKGUsaSxyKXt2YXIgcyxsLGMsZCx1LGgscCxmPWlbMF0sZz1bXSxtPWYuZGF0YVNvdXJjZS52aWV3KCksdj10aGlzLl9pc01vYmlsZVBob25lVmlldygpO2ZvcihzPTA7bS5sZW5ndGg+cztzKyspbD1uKGYsbVtzXSksYz1uZXcgby5kYXRhLlF1ZXJ5KGUpLmZpbHRlcih7ZmllbGQ6Zi5maWVsZCxvcGVyYXRvcjphLlNjaGVkdWxlclZpZXcuZ3JvdXBFcUZpbHRlcihsKX0pLnRvQXJyYXkoKSxjLmxlbmd0aCYmKGQ9dGhpcy5fdGFza3MoYyksdT1yP1wiXCI6XCIgay1maXJzdFwiLHM9PT1tLmxlbmd0aC0xJiYoIXJ8fHIuY2xhc3NOYW1lLmluZGV4T2YoXCJrLWxhc3RcIik+LTEpJiYodSs9XCIgay1sYXN0XCIpLGg9e3RleHQ6by5nZXR0ZXIoZi5kYXRhVGV4dEZpZWxkKShtW3NdKSx2YWx1ZTpsLHJvd1NwYW46MCxjbGFzc05hbWU6dX0saS5sZW5ndGg+MT8oaC5ncm91cHM9dGhpcy5fY3JlYXRlR3JvdXBDb25maWd1cmF0aW9uKGMsaS5zbGljZSgxKSxoKSxyJiYoci5yb3dTcGFuKz1oLnJvd1NwYW4pKTooaC5pdGVtcz1kLHA9dChoLml0ZW1zKSx2JiYocCs9aC5pdGVtcy5sZW5ndGgpLGgucm93U3Bhbj1wLHImJihyLnJvd1NwYW4rPXApKSxnLnB1c2goaCkpO3JldHVybiBnfSxzZWxlY3Rpb25CeUVsZW1lbnQ6ZnVuY3Rpb24odCl7dmFyIG4saSxyO3JldHVybiB0PWUodCksdC5oYXNDbGFzcyhcImstc2NoZWR1bGVyLWRhdGVjb2x1bW5cIik/dm9pZCAwOih0aGlzLl9pc01vYmlsZSgpPyhyPXQucGFyZW50KCksbj1yLnBhcmVudCgpLmNoaWxkcmVuKCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcykuY2hpbGRyZW4oXCI6bm90KC5rLXNjaGVkdWxlci1kYXRlY29sdW1uKVwiKS5sZW5ndGh9KS5pbmRleChyKSk6bj10LnBhcmVudCgpLmluZGV4KCksaT10aGlzLl9ldmVudHNMaXN0W25dLHtpbmRleDpuLHN0YXJ0Omkuc3RhcnQsZW5kOmkuZW5kLGlzQWxsRGF5OmkuaXNBbGxEYXksdWlkOmkudWlkfSl9LHNlbGVjdDpmdW5jdGlvbihlKXt0aGlzLmNsZWFyU2VsZWN0aW9uKCk7dmFyIHQ9dGhpcy50YWJsZS5maW5kKFwiLmstdGFza1wiKS5lcShlLmluZGV4KS5jbG9zZXN0KFwidHJcIikuYWRkQ2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIpLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITApWzBdO3RoaXMuY3VycmVudCh0KX0sbW92ZTpmdW5jdGlvbihlLHQpe3ZhciBuLGk9ITEscj1lLmluZGV4O3JldHVybiB0PT1vLmtleXMuVVA/KHItLSxpPSEwKTp0PT1vLmtleXMuRE9XTiYmKHIrKyxpPSEwKSxpJiYobj10aGlzLl9ldmVudHNMaXN0W3JdLG4mJihlLnN0YXJ0PW4uc3RhcnQsZS5lbmQ9bi5lbmQsZS5pc0FsbERheT1uLmlzQWxsRGF5LGUuZXZlbnRzPVtuLnVpZF0sZS5pbmRleD1yKSksaX0sbW92ZVRvRXZlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sY29uc3RyYWluU2VsZWN0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2V2ZW50c0xpc3RbMF07dCYmKGUuc3RhcnQ9dC5zdGFydCxlLmVuZD10LmVuZCxlLmlzQWxsRGF5PXQuaXNBbGxEYXksZS5ldmVudHM9W3QudWlkXSxlLmluZGV4PTApfSxpc0luUmFuZ2U6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudCYmdGhpcy5lbGVtZW50Lm9mZihzKSxhLlNjaGVkdWxlclZpZXcuZm4uZGVzdHJveS5jYWxsKHRoaXMpfSxvcHRpb25zOnt0aXRsZTpcIkFnZW5kYVwiLG5hbWU6XCJhZ2VuZGFcIixlZGl0YWJsZTohMCxzZWxlY3RlZERhdGVGb3JtYXQ6XCJ7MDpEfS17MTpEfVwiLGV2ZW50VGVtcGxhdGU6XCIjOnRpdGxlI1wiLGV2ZW50VGltZVRlbXBsYXRlOlwiI2lmKGRhdGEuaXNBbGxEYXkpIHsjIz10aGlzLm9wdGlvbnMubWVzc2FnZXMuYWxsRGF5IyN9IGVsc2UgeyAjIz1rZW5kby5mb3JtYXQoZm9ybWF0LCBzdGFydCwgZW5kKSMjIH0gI1wiLGV2ZW50RGF0ZVRlbXBsYXRlOic8c3Ryb25nIGNsYXNzPVwiay1zY2hlZHVsZXItYWdlbmRhZGF5XCI+Iz1rZW5kby50b1N0cmluZyhkYXRlLCBcImRkXCIpIzwvc3Ryb25nPjxlbSBjbGFzcz1cImstc2NoZWR1bGVyLWFnZW5kYXdlZWtcIj4jPWtlbmRvLnRvU3RyaW5nKGRhdGUsXCJkZGRkXCIpIzwvZW0+PHNwYW4gY2xhc3M9XCJrLXNjaGVkdWxlci1hZ2VuZGFkYXRlXCI+Iz1rZW5kby50b1N0cmluZyhkYXRlLCBcInlcIikjPC9zcGFuPicsZXZlbnRHcm91cFRlbXBsYXRlOic8c3Ryb25nIGNsYXNzPVwiay1zY2hlZHVsZXItYWRnZW5kYWdyb3VwXCI+Iz12YWx1ZSM8L3N0cm9uZz4nLG1lc3NhZ2VzOntldmVudDpcIkV2ZW50XCIsZGF0ZTpcIkRhdGVcIix0aW1lOlwiVGltZVwiLGFsbERheTpcImFsbCBkYXlcIn19fSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXtyZXR1cm4gZS5zbGljZSh0KS5jb25jYXQoZS5zbGljZSgwLHQpKX1mdW5jdGlvbiBuKGUsdCl7Zm9yKHZhciBuPXQuZmlyc3REYXksaT1uZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCksZS5nZXRNb250aCgpLDAsZS5nZXRIb3VycygpLGUuZ2V0TWludXRlcygpLGUuZ2V0U2Vjb25kcygpLGUuZ2V0TWlsbGlzZWNvbmRzKCkpO2kuZ2V0RGF5KCkhPW47KXIuZGF0ZS5zZXRUaW1lKGksLTEqZCk7cmV0dXJuIGl9ZnVuY3Rpb24gaShlLHQsbil7dmFyIGkscj10LG89bjtyZXR1cm4gaT1lLGk+PXImJm8+PWl9dmFyIHI9d2luZG93LmtlbmRvLG89ci51aSxhPW8uU2NoZWR1bGVyVmlldyxzPVwiLmtlbmRvTW9udGhWaWV3XCIsbD1lLmV4dGVuZCxjPXIuZGF0ZS5nZXREYXRlLGQ9ci5kYXRlLk1TX1BFUl9EQVksdT02LGg9NyxwPXIudGVtcGxhdGUoJzxzcGFuIGNsYXNzPVwiay1saW5rIGstbmF2LWRheVwiPiM6a2VuZG8udG9TdHJpbmcoZGF0ZSwgXCJkZFwiKSM8L3NwYW4+JyksZj0nPGRpdiByb2xlPVwiZ3JpZGNlbGxcIiBhcmlhLXNlbGVjdGVkPVwiZmFsc2VcIiBkYXRhLSM9bnMjdWlkPVwiIz11aWQjXCIjaWYgKHJlc291cmNlc1swXSkgeyAjc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiM9cmVzb3VyY2VzWzBdLmNvbG9yICM7IGJvcmRlci1jb2xvcjogIz1yZXNvdXJjZXNbMF0uY29sb3IjXCJjbGFzcz1cImstZXZlbnQjPWludmVyc2VDb2xvciA/IFwiIGstZXZlbnQtaW52ZXJzZVwiIDogXCJcIiNcIiN9IGVsc2UgeyNjbGFzcz1cImstZXZlbnRcIiN9Iz48c3BhbiBjbGFzcz1cImstZXZlbnQtYWN0aW9uc1wiPiMgaWYoZGF0YS50YWlsIHx8IGRhdGEubWlkZGxlKSB7IzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy13XCI+PC9zcGFuPiN9IyMgaWYoZGF0YS5pc0V4Y2VwdGlvbigpKSB7IzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1leGNlcHRpb25cIj48L3NwYW4+IyB9IGVsc2UgaWYoZGF0YS5pc1JlY3VycmluZygpKSB7IzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1yZWZyZXNoXCI+PC9zcGFuPiN9Izwvc3Bhbj57MH08c3BhbiBjbGFzcz1cImstZXZlbnQtYWN0aW9uc1wiPiNpZiAoc2hvd0RlbGV0ZSkgeyM8YSBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstbGluayBrLWV2ZW50LWRlbGV0ZVwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstc2ktY2xvc2VcIj48L3NwYW4+PC9hPiN9IyMgaWYoZGF0YS5oZWFkIHx8IGRhdGEubWlkZGxlKSB7IzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy1lXCI+PC9zcGFuPiN9Izwvc3Bhbj4jIGlmKHJlc2l6YWJsZSAmJiAhZGF0YS50YWlsICYmICFkYXRhLm1pZGRsZSkgeyM8c3BhbiBjbGFzcz1cImstcmVzaXplLWhhbmRsZSBrLXJlc2l6ZS13XCI+PC9zcGFuPiN9IyMgaWYocmVzaXphYmxlICYmICFkYXRhLmhlYWQgJiYgIWRhdGEubWlkZGxlKSB7IzxzcGFuIGNsYXNzPVwiay1yZXNpemUtaGFuZGxlIGstcmVzaXplLWVcIj48L3NwYW4+I30jPC9kaXY+JyxnPXIudGVtcGxhdGUoJzxkaXYgdGl0bGU9XCIjPXRpdGxlLnJlcGxhY2UoL1wiL2csXCImXFxcXCMzNDtcIikjXCI+PGRpdiBjbGFzcz1cImstZXZlbnQtdGVtcGxhdGVcIj4jOnRpdGxlIzwvZGl2PjwvZGl2PicpLG09ci50ZW1wbGF0ZSgnPGRpdiBzdHlsZT1cIndpZHRoOiM9d2lkdGgjcHg7bGVmdDojPWxlZnQjcHg7dG9wOiM9dG9wI3B4XCIgY2xhc3M9XCJrLW1vcmUtZXZlbnRzIGstYnV0dG9uXCI+PHNwYW4+Li4uPC9zcGFuPjwvZGl2PicpO28uTW9udGhWaWV3PWEuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpczthLmZuLmluaXQuY2FsbChuLGUsdCksbi50aXRsZT1uLm9wdGlvbnMudGl0bGUsbi5uYW1lPVwibW9udGhcIixuLl90ZW1wbGF0ZXMoKSxuLl9lZGl0YWJsZSgpLG4uX3JlbmRlckxheW91dChuLm9wdGlvbnMuZGF0ZSksbi5fZ3JvdXBzKCl9LF91cGRhdGVEaXJlY3Rpb246ZnVuY3Rpb24oZSx0LG4saSxyKXt2YXIgbyxhLHMsbCxjO24mJihvPXRbMF0uc3RhcnQsYT10W3QubGVuZ3RoLTFdLmVuZCxzPW8uaW5kZXg9PT1hLmluZGV4LGw9by5jb2xsZWN0aW9uSW5kZXg9PT1hLmNvbGxlY3Rpb25JbmRleCxjPXI/cyYmbHx8bDpzJiZsLGMmJihlLmJhY2t3YXJkPWkpKX0sX2NoYW5nZVZpZXdQZXJpb2Q6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPW4/NzoxO3JldHVybiB0JiYoaSo9LTEpLGUuc3RhcnQ9ci5kYXRlLmFkZERheXMoZS5zdGFydCxpKSxlLmVuZD1yLmRhdGUuYWRkRGF5cyhlLmVuZCxpKSwoIW58fG4mJnRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKSkmJihlLmdyb3VwSW5kZXg9dD90aGlzLmdyb3Vwcy5sZW5ndGgtMTowKSxlLmV2ZW50cz1bXSwhMH0sX2NvbnRpbnVvdXNTbG90OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1lLmJhY2t3YXJkPzA6dC5sZW5ndGgtMSxyPXRoaXMuZ3JvdXBzW2UuZ3JvdXBJbmRleF07cmV0dXJuIHIuY29udGludW91c1Nsb3QodFtpXS5zdGFydCxuKX0sX2NoYW5nZUdyb3VwQ29udGludW91c2x5OmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLG8sYSxzO3JldHVybiBufHwocj1lLmdyb3VwSW5kZXgsbz10aGlzLmdyb3Vwcy5sZW5ndGgtMSxhPXRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKSxzPXRoaXMuZ3JvdXBzW3JdLCF0JiZhPyh0PXNbaT9cImxhc3RTbG90XCI6XCJmaXJzdFNsb3RcIl0oKSxyKz1pPy0xOjEpOnQmJiFhJiYocj1pP286MCksKDA+cnx8cj5vKSYmKHI9aT9vOjAsdD1udWxsKSxlLmdyb3VwSW5kZXg9ciksdH0sX25vcm1hbGl6ZUhvcml6b250YWxTZWxlY3Rpb246ZnVuY3Rpb24oZSx0LG4pe3ZhciBpO3JldHVybiBpPW4/dFswXS5zdGFydDp0W3QubGVuZ3RoLTFdLmVuZH0sX25vcm1hbGl6ZVZlcnRpY2FsU2VsZWN0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG47cmV0dXJuIG49ZS5iYWNrd2FyZD90WzBdLnN0YXJ0OnRbdC5sZW5ndGgtMV0uZW5kfSxfdGVtcGxhdGVzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLHQ9bCh7fSxyLlRlbXBsYXRlLGUudGVtcGxhdGVTZXR0aW5ncyk7dGhpcy5ldmVudFRlbXBsYXRlPXRoaXMuX2V2ZW50VG1wbChlLmV2ZW50VGVtcGxhdGUsZiksdGhpcy5kYXlUZW1wbGF0ZT1yLnRlbXBsYXRlKGUuZGF5VGVtcGxhdGUsdCksdGhpcy5ncm91cEhlYWRlclRlbXBsYXRlPXIudGVtcGxhdGUoZS5ncm91cEhlYWRlclRlbXBsYXRlLHQpfSxkYXRlRm9yVGl0bGU6ZnVuY3Rpb24oKXtyZXR1cm4gci5mb3JtYXQodGhpcy5vcHRpb25zLnNlbGVjdGVkRGF0ZUZvcm1hdCx0aGlzLl9maXJzdERheU9mTW9udGgsdGhpcy5fbGFzdERheU9mTW9udGgpfSxuZXh0RGF0ZTpmdW5jdGlvbigpe3JldHVybiByLmRhdGUubmV4dERheSh0aGlzLl9sYXN0RGF5T2ZNb250aCl9LHByZXZpb3VzRGF0ZTpmdW5jdGlvbigpe3JldHVybiByLmRhdGUucHJldmlvdXNEYXkodGhpcy5fZmlyc3REYXlPZk1vbnRoKX0sc3RhcnREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXJ0RGF0ZX0sZW5kRGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmREYXRlfSxfcmVuZGVyTGF5b3V0OmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXM7dGhpcy5fZmlyc3REYXlPZk1vbnRoPXIuZGF0ZS5maXJzdERheU9mTW9udGgodCksdGhpcy5fbGFzdERheU9mTW9udGg9ci5kYXRlLmxhc3REYXlPZk1vbnRoKHQpLHRoaXMuX3N0YXJ0RGF0ZT1uKHQsdGhpcy5jYWxlbmRhckluZm8oKSksdGhpcy5jcmVhdGVMYXlvdXQodGhpcy5fbGF5b3V0KCkpLHRoaXMuX2NvbnRlbnQoKSx0aGlzLnJlZnJlc2hMYXlvdXQoKSx0aGlzLmNvbnRlbnQub24oXCJjbGlja1wiK3MsXCIuay1uYXYtZGF5LC5rLW1vcmUtZXZlbnRzXCIsZnVuY3Rpb24odCl7dmFyIG49ZSh0LmN1cnJlbnRUYXJnZXQpLm9mZnNldCgpLHI9aS5fc2xvdEJ5UG9zaXRpb24obi5sZWZ0LG4udG9wKTt0LnByZXZlbnREZWZhdWx0KCksaS50cmlnZ2VyKFwibmF2aWdhdGVcIix7dmlldzpcImRheVwiLGRhdGU6ci5zdGFydERhdGUoKX0pfSl9LF9lZGl0YWJsZTpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5lZGl0YWJsZSYmIXRoaXMuX2lzTW9iaWxlUGhvbmVWaWV3KCkmJih0aGlzLl9pc01vYmlsZSgpP3RoaXMuX3RvdWNoRWRpdGFibGUoKTp0aGlzLl9tb3VzZUVkaXRhYmxlKCkpfSxfbW91c2VFZGl0YWJsZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5lbGVtZW50Lm9uKFwiY2xpY2tcIitzLFwiLmstc2NoZWR1bGVyLW1vbnRodmlldyAuay1ldmVudCBhOmhhcyguay1zaS1jbG9zZSlcIixmdW5jdGlvbihuKXt0LnRyaWdnZXIoXCJyZW1vdmVcIix7dWlkOmUodGhpcykuY2xvc2VzdChcIi5rLWV2ZW50XCIpLmF0dHIoci5hdHRyKFwidWlkXCIpKX0pLG4ucHJldmVudERlZmF1bHQoKX0pLHQub3B0aW9ucy5lZGl0YWJsZS5jcmVhdGUhPT0hMSYmdC5lbGVtZW50Lm9uKFwiZGJsY2xpY2tcIitzLFwiLmstc2NoZWR1bGVyLW1vbnRodmlldyAuay1zY2hlZHVsZXItY29udGVudCB0ZFwiLGZ1bmN0aW9uKG4pe3ZhciBpLHI9ZShuLmN1cnJlbnRUYXJnZXQpLm9mZnNldCgpLG89dC5fc2xvdEJ5UG9zaXRpb24oci5sZWZ0LHIudG9wKTtvJiYoaT10Ll9yZXNvdXJjZUJ5U2xvdChvKSx0LnRyaWdnZXIoXCJhZGRcIix7ZXZlbnRJbmZvOmwoe2lzQWxsRGF5OiEwLHN0YXJ0Om8uc3RhcnREYXRlKCksZW5kOm8uc3RhcnREYXRlKCl9LGkpfSkpLG4ucHJldmVudERlZmF1bHQoKX0pLHQub3B0aW9ucy5lZGl0YWJsZS51cGRhdGUhPT0hMSYmdC5lbGVtZW50Lm9uKFwiZGJsY2xpY2tcIitzLFwiLmstc2NoZWR1bGVyLW1vbnRodmlldyAuay1ldmVudFwiLGZ1bmN0aW9uKG4pe3QudHJpZ2dlcihcImVkaXRcIix7dWlkOmUodGhpcykuY2xvc2VzdChcIi5rLWV2ZW50XCIpLmF0dHIoci5hdHRyKFwidWlkXCIpKX0pLG4ucHJldmVudERlZmF1bHQoKX0pfSxfdG91Y2hFZGl0YWJsZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5vcHRpb25zLmVkaXRhYmxlLmNyZWF0ZSE9PSExJiYodC5fYWRkVXNlckV2ZW50cz1uZXcgci5Vc2VyRXZlbnRzKHQuZWxlbWVudCx7ZmlsdGVyOlwiLmstc2NoZWR1bGVyLW1vbnRodmlldyAuay1zY2hlZHVsZXItY29udGVudCB0ZFwiLHRhcDpmdW5jdGlvbihuKXt2YXIgaSxyPWUobi50YXJnZXQpLm9mZnNldCgpLG89dC5fc2xvdEJ5UG9zaXRpb24oci5sZWZ0LHIudG9wKTtvJiYoaT10Ll9yZXNvdXJjZUJ5U2xvdChvKSx0LnRyaWdnZXIoXCJhZGRcIix7ZXZlbnRJbmZvOmwoe2lzQWxsRGF5OiEwLHN0YXJ0Om8uc3RhcnREYXRlKCksZW5kOm8uc3RhcnREYXRlKCl9LGkpfSkpLG4ucHJldmVudERlZmF1bHQoKX19KSksdC5vcHRpb25zLmVkaXRhYmxlLnVwZGF0ZSE9PSExJiYodC5fZWRpdFVzZXJFdmVudHM9bmV3IHIuVXNlckV2ZW50cyh0LmVsZW1lbnQse2ZpbHRlcjpcIi5rLXNjaGVkdWxlci1tb250aHZpZXcgLmstZXZlbnRcIix0YXA6ZnVuY3Rpb24obil7MD09PWUobi5ldmVudC50YXJnZXQpLmNsb3Nlc3QoXCJhOmhhcyguay1zaS1jbG9zZSlcIikubGVuZ3RoJiYodC50cmlnZ2VyKFwiZWRpdFwiLHt1aWQ6ZShuLnRhcmdldCkuY2xvc2VzdChcIi5rLWV2ZW50XCIpLmF0dHIoci5hdHRyKFwidWlkXCIpKX0pLG4ucHJldmVudERlZmF1bHQoKSl9fSkpfSxzZWxlY3Rpb25CeUVsZW1lbnQ6ZnVuY3Rpb24odCl7dmFyIG49ZSh0KS5vZmZzZXQoKTtyZXR1cm4gdGhpcy5fc2xvdEJ5UG9zaXRpb24obi5sZWZ0LG4udG9wKX0sX2NvbHVtbkNvdW50Rm9yTGV2ZWw6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jb2x1bW5MZXZlbHNbZV07cmV0dXJuIHQ/dC5sZW5ndGg6MH0sX3Jvd0NvdW50Rm9yTGV2ZWw6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5yb3dMZXZlbHNbZV07cmV0dXJuIHQ/dC5sZW5ndGg6MH0sX2NvbnRlbnQ6ZnVuY3Rpb24oKXt2YXIgZSx0PVwiPHRib2R5PlwiLG49MSxpPXRoaXMuZ3JvdXBlZFJlc291cmNlcztmb3IoaS5sZW5ndGgmJnRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKSYmKG49dGhpcy5fcm93Q291bnRGb3JMZXZlbChpLmxlbmd0aC0xKSksZT0wO24+ZTtlKyspdCs9dGhpcy5fY3JlYXRlQ2FsZW5kYXIoZSk7dCs9XCI8L3Rib2R5PlwiLHRoaXMuY29udGVudC5maW5kKFwidGFibGVcIikuaHRtbCh0KX0sX2NyZWF0ZUNhbGVuZGFyOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxvLGE9dGhpcy5zdGFydERhdGUoKSxzPWgqdSxsPWgsYz1bYV0sZD1cIlwiLHA9MSxmPXRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKSxnPXRoaXMuZ3JvdXBlZFJlc291cmNlcztmb3IoZy5sZW5ndGgmJihmfHwocD10aGlzLl9jb2x1bW5Db3VudEZvckxldmVsKGcubGVuZ3RoLTEpKSksdGhpcy5fc2xvdEluZGljZXM9e30sdD0wLG49cy9sO24+dDt0Kyspe2ZvcihkKz1cIjx0cj5cIixjLnB1c2goYSksaT10Kmwsbz0wO3A+bztvKyspZCs9dGhpcy5fY3JlYXRlUm93KGEsaSxsLGY/ZTpvKTthPXIuZGF0ZS5hZGREYXlzKGEsbCksZCs9XCI8L3RyPlwifXJldHVybiB0aGlzLl93ZWVrU3RhcnREYXRlcz1jLHRoaXMuX2VuZERhdGU9ci5kYXRlLnByZXZpb3VzRGF5KGEpLGR9LF9jcmVhdGVSb3c6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIG8sYT10aGlzLHM9YS5fZmlyc3REYXlPZk1vbnRoLGw9YS5fbGFzdERheU9mTW9udGgsZD1hLmRheVRlbXBsYXRlLHU9XCJcIixoPVwiXCIscD1mdW5jdGlvbigpe3JldHVybiBhLl9yZXNvdXJjZUJ5U2xvdCh7Z3JvdXBJbmRleDppfSl9O2ZvcihvPTA7bj5vO28rKyl1PVwiXCIsci5kYXRlLmlzVG9kYXkoZSkmJih1Kz1cImstdG9kYXlcIiksci5kYXRlLmlzSW5EYXRlUmFuZ2UoZSxzLGwpfHwodSs9XCIgay1vdGhlci1tb250aFwiKSxoKz1cIjx0ZCBcIixcIlwiIT09dSYmKGgrPSdjbGFzcz1cIicrdSsnXCInKSxoKz1cIj5cIixoKz1kKHtkYXRlOmUscmVzb3VyY2VzOnB9KSxoKz1cIjwvdGQ+XCIsYS5fc2xvdEluZGljZXNbYyhlKS5nZXRUaW1lKCldPXQrbyxlPXIuZGF0ZS5uZXh0RGF5KGUpO3JldHVybiBofSxfbGF5b3V0OmZ1bmN0aW9uKCl7dmFyIG4saSxyLG89dGhpcy5jYWxlbmRhckluZm8oKSxhPXRoaXMuX2lzTW9iaWxlKCk/by5kYXlzLm5hbWVzU2hvcnQ6by5kYXlzLm5hbWVzLHM9dChhLG8uZmlyc3REYXkpLGw9ZS5tYXAocyxmdW5jdGlvbihlKXtyZXR1cm57dGV4dDplfX0pLGM9dGhpcy5ncm91cGVkUmVzb3VyY2VzO2lmKGMubGVuZ3RoKWlmKHRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKSl7Zm9yKGk9W10scj0wOzY+cjtyKyspaS5wdXNoKHt0ZXh0OlwiPGRpdj4mbmJzcDs8L2Rpdj5cIixjbGFzc05hbWU6XCJrLWhpZGRlbiBrLXNsb3QtY2VsbFwifSk7bj10aGlzLl9jcmVhdGVSb3dzTGF5b3V0KGMsaSx0aGlzLmdyb3VwSGVhZGVyVGVtcGxhdGUpfWVsc2UgbD10aGlzLl9jcmVhdGVDb2x1bW5zTGF5b3V0KGMsbCx0aGlzLmdyb3VwSGVhZGVyVGVtcGxhdGUpO3JldHVybntjb2x1bW5zOmwscm93czpufX0sX2NyZWF0ZUV2ZW50RWxlbWVudDpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXMub3B0aW9ucyxvPWkuZWRpdGFibGUsYT10aGlzLl9pc01vYmlsZSgpO3JldHVybiB0LnNob3dEZWxldGU9byYmby5kZXN0cm95IT09ITEmJiFhLHQucmVzaXphYmxlPW8mJm8ucmVzaXplIT09ITEmJiFhLHQubnM9ci5ucyx0LnJlc291cmNlcz10aGlzLmV2ZW50UmVzb3VyY2VzKHQpLHQuaW52ZXJzZUNvbG9yPXQucmVzb3VyY2VzJiZ0LnJlc291cmNlc1swXT90aGlzLl9zaG91bGRJbnZlcnNlUmVzb3VyY2VDb2xvcih0LnJlc291cmNlc1swXSk6ITEsbj1lKHRoaXMuZXZlbnRUZW1wbGF0ZSh0KSksdGhpcy5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOm4sZGF0YTpbe2RhdGFJdGVtOnR9XX19KSxufSxfaXNJbkRhdGVTbG90OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ3JvdXBzWzBdLG49dC5maXJzdFNsb3QoKS5zdGFydCxvPXQubGFzdFNsb3QoKS5lbmQtMSxhPXIuZGF0ZS50b1V0Y1RpbWUoZS5zdGFydCkscz1yLmRhdGUudG9VdGNUaW1lKGUuZW5kKTtyZXR1cm4oaShhLG4sbyl8fGkocyxuLG8pfHxpKG4sYSxzKXx8aShvLGEscykpJiYoIWkocyxuLG4pfHxpKHMsYSxhKXx8ZS5pc0FsbERheSl9LF9zbG90SW5kZXg6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3Nsb3RJbmRpY2VzW2MoZSkuZ2V0VGltZSgpXX0sX3Bvc2l0aW9uTW9iaWxlRXZlbnQ6ZnVuY3Rpb24odCxuLGkpe3ZhciBvLHMsbCxjLGQsdSxoLHA9dC5zdGFydDt0LnN0YXJ0Lm9mZnNldExlZnQ+dC5lbmQub2Zmc2V0TGVmdCYmKHA9dC5lbmQpLG89dC5zdGFydC5pbmRleCxzPW8sbD0zLGM9YS5jb2xsaWRpbmdFdmVudHModC5ldmVudHMoKSxvLHMpLGMucHVzaCh7ZWxlbWVudDpuLHN0YXJ0Om8sZW5kOnN9KSxkPWEuY3JlYXRlUm93cyhjKSx1PXQuY29sbGVjdGlvbi5hdChvKSxoPXUuY29udGFpbmVyLGh8fChoPWUoci5mb3JtYXQoJzxkaXYgY2xhc3M9XCJrLWV2ZW50cy1jb250YWluZXJcIiBzdHlsZT1cInRvcDp7MH07bGVmdDp7MX07d2lkdGg6ezJ9XCIvPicscC5vZmZzZXRUb3ArcC5maXJzdENoaWxkVG9wK3AuZmlyc3RDaGlsZEhlaWdodC0zK1wicHhcIixwLm9mZnNldExlZnQrXCJweFwiLHAub2Zmc2V0V2lkdGgrXCJweFwiKSksdS5jb250YWluZXI9aCx0aGlzLmNvbnRlbnRbMF0uYXBwZW5kQ2hpbGQoaFswXSkpLGw+PWQubGVuZ3RoJiYodC5hZGRFdmVudCh7ZWxlbWVudDpuLHN0YXJ0Om8sZW5kOnMsZ3JvdXBJbmRleDpwLmdyb3VwSW5kZXh9KSxpLl9jb250aW51b3VzRXZlbnRzLnB1c2goe2VsZW1lbnQ6bix1aWQ6bi5hdHRyKHIuYXR0cihcInVpZFwiKSksc3RhcnQ6dC5zdGFydCxlbmQ6dC5lbmR9KSxoWzBdLmFwcGVuZENoaWxkKG5bMF0pKX0sX3Bvc2l0aW9uRXZlbnQ6ZnVuY3Rpb24odCxuLGkpe3ZhciBvLHMsbCxjLGQsdSxoLHAsZixnLHYsXyx5LHcsYixrPXRoaXMub3B0aW9ucy5ldmVudEhlaWdodCx4PXQuc3RhcnQ7Zm9yKHQuc3RhcnQub2Zmc2V0TGVmdD50LmVuZC5vZmZzZXRMZWZ0JiYoeD10LmVuZCksbz10LnN0YXJ0LmluZGV4LHM9dC5lbmQuaW5kZXgsbD14LmV2ZW50Q291bnQsYz1hLmNvbGxpZGluZ0V2ZW50cyh0LmV2ZW50cygpLG8scyksZD1vIT09cz81OjQsYy5wdXNoKHtlbGVtZW50Om4sc3RhcnQ6byxlbmQ6c30pLHU9YS5jcmVhdGVSb3dzKGMpLGg9MCxwPU1hdGgubWluKHUubGVuZ3RoLGwpO3A+aDtoKyspZm9yKGY9dVtoXS5ldmVudHMsZz14Lm9mZnNldFRvcCt4LmZpcnN0Q2hpbGRIZWlnaHQraCprKzMqaCtcInB4XCIsdj0wLF89Zi5sZW5ndGg7Xz52O3YrKylmW3ZdLmVsZW1lbnRbMF0uc3R5bGUudG9wPWc7aWYodS5sZW5ndGg+bClmb3IoeT1vO3M+PXk7eSsrKXtpZih3PXQuY29sbGVjdGlvbixiPXcuYXQoeSksYi5tb3JlKXJldHVybjtiLm1vcmU9ZShtKHtuczpyLm5zLHN0YXJ0OnksZW5kOnksd2lkdGg6Yi5jbGllbnRXaWR0aC0yLGxlZnQ6Yi5vZmZzZXRMZWZ0KzIsdG9wOmIub2Zmc2V0VG9wK2IuZmlyc3RDaGlsZEhlaWdodCtsKmsrMypsfSkpLHRoaXMuY29udGVudFswXS5hcHBlbmRDaGlsZChiLm1vcmVbMF0pfWVsc2UgdC5hZGRFdmVudCh7ZWxlbWVudDpuLHN0YXJ0Om8sZW5kOnMsZ3JvdXBJbmRleDp4Lmdyb3VwSW5kZXh9KSxuWzBdLnN0eWxlLndpZHRoPXQuaW5uZXJXaWR0aCgpLWQrXCJweFwiLG5bMF0uc3R5bGUubGVmdD14Lm9mZnNldExlZnQrMitcInB4XCIsblswXS5zdHlsZS5oZWlnaHQ9aytcInB4XCIsaS5fY29udGludW91c0V2ZW50cy5wdXNoKHtlbGVtZW50Om4sdWlkOm4uYXR0cihyLmF0dHIoXCJ1aWRcIikpLHN0YXJ0OnQuc3RhcnQsZW5kOnQuZW5kfSksdGhpcy5jb250ZW50WzBdLmFwcGVuZENoaWxkKG5bMF0pfSxfc2xvdEJ5UG9zaXRpb246ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcy5jb250ZW50Lm9mZnNldCgpO2ZvcihlLT1yLmxlZnQsdC09ci50b3AsdCs9dGhpcy5jb250ZW50WzBdLnNjcm9sbFRvcCxlKz10aGlzLmNvbnRlbnRbMF0uc2Nyb2xsTGVmdCxlPU1hdGguY2VpbChlKSx0PU1hdGguY2VpbCh0KSxuPTA7dGhpcy5ncm91cHMubGVuZ3RoPm47bisrKWlmKGk9dGhpcy5ncm91cHNbbl0uZGF5U2xvdEJ5UG9zaXRpb24oZSx0KSlyZXR1cm4gaTtyZXR1cm4gbnVsbH0sX2NyZWF0ZVJlc2l6ZUhpbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdGFydFNsb3QoKS5vZmZzZXRMZWZ0LG49ZS5zdGFydC5vZmZzZXRUb3AsaT1lLmlubmVyV2lkdGgoKSxyPWUuc3RhcnQuY2xpZW50SGVpZ2h0LTIsbz1hLmZuLl9jcmVhdGVSZXNpemVIaW50LmNhbGwodGhpcyx0LG4saSxyKTtvLmFwcGVuZFRvKHRoaXMuY29udGVudCksdGhpcy5fcmVzaXplSGludD10aGlzLl9yZXNpemVIaW50LmFkZChvKX0sX3VwZGF0ZVJlc2l6ZUhpbnQ6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIG8sYSxzO2Zvcih0aGlzLl9yZW1vdmVSZXNpemVIaW50KCksbz10aGlzLmdyb3Vwc1t0XSxhPW8ucmFuZ2VzKG4saSwhMCxlLmlzQWxsRGF5KSxzPTA7YS5sZW5ndGg+cztzKyspdGhpcy5fY3JlYXRlUmVzaXplSGludChhW3NdKTt0aGlzLl9yZXNpemVIaW50LmZpbmQoXCIuay1sYWJlbC10b3AsLmstbGFiZWwtYm90dG9tXCIpLnRleHQoXCJcIiksdGhpcy5fcmVzaXplSGludC5maXJzdCgpLmFkZENsYXNzKFwiay1maXJzdFwiKS5maW5kKFwiLmstbGFiZWwtdG9wXCIpLnRleHQoci50b1N0cmluZyhyLnRpbWV6b25lLnRvTG9jYWxEYXRlKG4pLFwiTS9kZFwiKSksdGhpcy5fcmVzaXplSGludC5sYXN0KCkuYWRkQ2xhc3MoXCJrLWxhc3RcIikuZmluZChcIi5rLWxhYmVsLWJvdHRvbVwiKS50ZXh0KHIudG9TdHJpbmcoci50aW1lem9uZS50b0xvY2FsRGF0ZShpKSxcIk0vZGRcIikpfSxfdXBkYXRlTW92ZUhpbnQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLG8sYSxzLGwsYz1yLmRhdGUudG9VdGNUaW1lKGUuc3RhcnQpK24sZD1jK2UuZHVyYXRpb24oKSx1PXRoaXMuZ3JvdXBzW3RdLGg9dS5yYW5nZXMoYyxkLCEwLGUuaXNBbGxEYXkpO2Zvcih0aGlzLl9yZW1vdmVNb3ZlSGludCgpLGk9MDtoLmxlbmd0aD5pO2krKylvPWhbaV0sYT1vLnN0YXJ0U2xvdCgpLHM9by5lbmRTbG90KCksbD10aGlzLl9jcmVhdGVFdmVudEVsZW1lbnQoZS5jbG9uZSh7aGVhZDpvLmhlYWQsdGFpbDpvLnRhaWx9KSksbC5jc3Moe2xlZnQ6YS5vZmZzZXRMZWZ0KzIsdG9wOmEub2Zmc2V0VG9wK2EuZmlyc3RDaGlsZEhlaWdodCxoZWlnaHQ6dGhpcy5vcHRpb25zLmV2ZW50SGVpZ2h0LHdpZHRoOm8uaW5uZXJXaWR0aCgpLShhLmluZGV4IT09cy5pbmRleD81OjQpfSksbC5hZGRDbGFzcyhcImstZXZlbnQtZHJhZy1oaW50XCIpLGwuYXBwZW5kVG8odGhpcy5jb250ZW50KSx0aGlzLl9tb3ZlSGludD10aGlzLl9tb3ZlSGludC5hZGQobCl9LF9ncm91cHM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxvLGEscyxsLGMsZCxwLGYsZyxtLHYsXyx5LHc9dGhpcy5fZ3JvdXBDb3VudCgpLGI9aCxrPXU7Zm9yKHRoaXMuZ3JvdXBzPVtdLGU9MDt3PmU7ZSsrKXRoaXMuX2FkZFJlc291cmNlVmlldyhlKTtmb3IodD10aGlzLmNvbnRlbnRbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0clwiKSxuPTA7dz5uO24rKylmb3IoaT0wLG89MCx0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCkmJihvPW4pLGE9byprOyhvKzEpKms+YTthKyspZm9yKHM9dGhpcy5ncm91cHNbbl0sbD1zLmFkZERheVNsb3RDb2xsZWN0aW9uKHIuZGF0ZS5hZGREYXlzKHRoaXMuc3RhcnREYXRlKCksaSksci5kYXRlLmFkZERheXModGhpcy5zdGFydERhdGUoKSxpK2IpKSxjPXRbYV0sZD1jLmNoaWxkcmVuLHA9MCxjLnNldEF0dHJpYnV0ZShcInJvbGVcIixcInJvd1wiKSx0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCl8fChwPW4pLGY9cCpiOyhwKzEpKmI+ZjtmKyspZz1kW2ZdLG09Zy5jbGllbnRIZWlnaHQsdj1nLmNoaWxkcmVuLmxlbmd0aD9nLmNoaWxkcmVuWzBdLm9mZnNldEhlaWdodCszOjAsXz1yLmRhdGUudG9VdGNUaW1lKHIuZGF0ZS5hZGREYXlzKHRoaXMuc3RhcnREYXRlKCksaSkpLGkrKyx5PU1hdGguZmxvb3IoKG0tdi10aGlzLm9wdGlvbnMubW9yZUJ1dHRvbkhlaWdodCkvKHRoaXMub3B0aW9ucy5ldmVudEhlaWdodCszKSksZy5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJncmlkY2VsbFwiKSxnLnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiwhMSksbC5hZGREYXlTbG90KGcsXyxfK3IuZGF0ZS5NU19QRVJfREFZLHkpfSxyZW5kZXI6ZnVuY3Rpb24oZSl7dGhpcy5jb250ZW50LmNoaWxkcmVuKFwiLmstZXZlbnQsLmstbW9yZS1ldmVudHMsLmstZXZlbnRzLWNvbnRhaW5lclwiKS5yZW1vdmUoKSx0aGlzLl9ncm91cHMoKSxlPW5ldyByLmRhdGEuUXVlcnkoZSkuc29ydChbe2ZpZWxkOlwic3RhcnRcIixkaXI6XCJhc2NcIn0se2ZpZWxkOlwiZW5kXCIsZGlyOlwiZGVzY1wifV0pLnRvQXJyYXkoKTt2YXIgdD10aGlzLmdyb3VwZWRSZXNvdXJjZXM7dC5sZW5ndGg/dGhpcy5fcmVuZGVyR3JvdXBzKGUsdCwwLDEpOnRoaXMuX3JlbmRlckV2ZW50cyhlLDApLHRoaXMucmVmcmVzaExheW91dCgpLHRoaXMudHJpZ2dlcihcImFjdGl2YXRlXCIpfSxfcmVuZGVyRXZlbnRzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYSxzLGwsYyxkLHUsaCxwPXRoaXMuX2lzTW9iaWxlUGhvbmVWaWV3KCk7Zm9yKGk9MCxyPWUubGVuZ3RoO3I+aTtpKyspaWYobj1lW2ldLHRoaXMuX2lzSW5EYXRlU2xvdChuKSlmb3Iobz10aGlzLmdyb3Vwc1t0XSxvLl9jb250aW51b3VzRXZlbnRzfHwoby5fY29udGludW91c0V2ZW50cz1bXSksYT1vLnNsb3RSYW5nZXMobiwhMCkscz1hLmxlbmd0aCxsPTA7cz5sO2wrKyljPWFbbF0sZD1uLnN0YXJ0LHU9bi5lbmQscz4xJiYoMD09PWw/dT1jLmVuZC5lbmREYXRlKCk6bD09cy0xP2Q9Yy5zdGFydC5zdGFydERhdGUoKTooZD1jLnN0YXJ0LnN0YXJ0RGF0ZSgpLHU9Yy5lbmQuZW5kRGF0ZSgpKSksaD1uLmNsb25lKHtzdGFydDpkLGVuZDp1LGhlYWQ6Yy5oZWFkLHRhaWw6Yy50YWlsfSkscD90aGlzLl9wb3NpdGlvbk1vYmlsZUV2ZW50KGMsdGhpcy5fY3JlYXRlRXZlbnRFbGVtZW50KGgpLG8pOnRoaXMuX3Bvc2l0aW9uRXZlbnQoYyx0aGlzLl9jcmVhdGVFdmVudEVsZW1lbnQoaCksbyl9LF9yZW5kZXJHcm91cHM6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIG8scyxsLGMsZD10WzBdO2lmKGQpZm9yKG89ZC5kYXRhU291cmNlLnZpZXcoKSxzPTA7by5sZW5ndGg+cztzKyspbD10aGlzLl9yZXNvdXJjZVZhbHVlKGQsb1tzXSksYz1uZXcgci5kYXRhLlF1ZXJ5KGUpLmZpbHRlcih7ZmllbGQ6ZC5maWVsZCxvcGVyYXRvcjphLmdyb3VwRXFGaWx0ZXIobCl9KS50b0FycmF5KCksdC5sZW5ndGg+MT9uPXRoaXMuX3JlbmRlckdyb3VwcyhjLHQuc2xpY2UoMSksbisrLGkrMSk6dGhpcy5fcmVuZGVyRXZlbnRzKGMsbisrKTtyZXR1cm4gbn0sX2dyb3VwQ291bnQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdyb3VwZWRSZXNvdXJjZXM7cmV0dXJuIGUubGVuZ3RoP3RoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKT90aGlzLl9yb3dDb3VudEZvckxldmVsKGUubGVuZ3RoLTEpOnRoaXMuX2NvbHVtbkNvdW50Rm9yTGV2ZWwoZS5sZW5ndGgpL3RoaXMuX2NvbHVtbk9mZnNldEZvclJlc291cmNlKGUubGVuZ3RoKToxfSxfY29sdW1uT2Zmc2V0Rm9yUmVzb3VyY2U6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbHVtbkNvdW50Rm9yTGV2ZWwoZSkvdGhpcy5fY29sdW1uQ291bnRGb3JMZXZlbChlLTEpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy50YWJsZSYmdGhpcy50YWJsZS5yZW1vdmVDbGFzcyhcImstc2NoZWR1bGVyLW1vbnRodmlld1wiKSx0aGlzLmNvbnRlbnQmJnRoaXMuY29udGVudC5vZmYocyksdGhpcy5lbGVtZW50JiZ0aGlzLmVsZW1lbnQub2ZmKHMpLGEuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuX2lzTW9iaWxlKCkmJiF0aGlzLl9pc01vYmlsZVBob25lVmlldygpJiZ0aGlzLm9wdGlvbnMuZWRpdGFibGUmJih0aGlzLm9wdGlvbnMuZWRpdGFibGUuY3JlYXRlIT09ITEmJnRoaXMuX2FkZFVzZXJFdmVudHMuZGVzdHJveSgpLHRoaXMub3B0aW9ucy5lZGl0YWJsZS51cGRhdGUhPT0hMSYmdGhpcy5fZWRpdFVzZXJFdmVudHMuZGVzdHJveSgpKX0sZXZlbnRzOltcInJlbW92ZVwiLFwiYWRkXCIsXCJlZGl0XCIsXCJuYXZpZ2F0ZVwiXSxvcHRpb25zOnt0aXRsZTpcIk1vbnRoXCIsbmFtZTpcIm1vbnRoXCIsZXZlbnRIZWlnaHQ6MjUsbW9yZUJ1dHRvbkhlaWdodDoxMyxlZGl0YWJsZTohMCxzZWxlY3RlZERhdGVGb3JtYXQ6XCJ7MDp5fVwiLGdyb3VwSGVhZGVyVGVtcGxhdGU6XCIjPXRleHQjXCIsZGF5VGVtcGxhdGU6cCxldmVudFRlbXBsYXRlOmd9fSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQpe3ZhciBuO3JldHVybiAwIT09ZSYmdD5lP249dC1lOihuPWUldCxuJiYobj10LW4pKSxufWZ1bmN0aW9uIGkoZSl7dmFyIHQ9ZS5nZXRNb250aCgpLG49bShlKT9ldFt0XTp0dFt0XTtyZXR1cm4gbitlLmdldERhdGUoKX1mdW5jdGlvbiByKGUsbil7dmFyIGkscjtyZXR1cm4gZT1uZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCksZS5nZXRNb250aCgpLGUuZ2V0RGF0ZSgpKSxYKGUsMCksaT1lLmdldEZ1bGxZZWFyKCksbiE9PXQ/KFEoZSxuLC0xKSxlLnNldERhdGUoZS5nZXREYXRlKCkrNCkpOmUuc2V0RGF0ZShlLmdldERhdGUoKSsoNC0oZS5nZXREYXkoKXx8NykpKSxYKGUsMCkscj1NYXRoLmZsb29yKChlLmdldFRpbWUoKS1uZXcgRGF0ZShpLDAsMSwtNikpLzg2NGU1KSwxK01hdGguZmxvb3Ioci83KX1mdW5jdGlvbiBvKGUsdCl7dmFyIG49SihlKS5nZXREYXkoKSxpPTctKG4rNy0odHx8NykpfHw3O3JldHVybiAwPmkmJihpKz03KSxNYXRoLmNlaWwoKGUuZ2V0RGF0ZSgpLWkpLzcpKzF9ZnVuY3Rpb24gYShlLHQpe3JldHVybiBlKyh0PmU/NzowKX1mdW5jdGlvbiBzKGUsdCxuKXt2YXIgaSxyLHMsbCxjLGQ9dC5vZmZzZXQ7cmV0dXJuIGQ/KGk9bmV3IERhdGUoZS5nZXRGdWxsWWVhcigpLGUuZ2V0TW9udGgoKSsxLDApLHI9byhpLG4pLHM9YSh0LmRheSxuKSxsPXM8YShuZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCksZS5nZXRNb250aCgpLDEpLmdldERheSgpLG4pLGM9cz5hKGkuZ2V0RGF5KCksbiksMD5kP2Q9cisoZCsxLShjPzE6MCkpOmwmJihkKz0xKSxyLT1jPzE6MCwobD8xOjApPmR8fGQ+cj9udWxsOmQpOm8oZSxuKX1mdW5jdGlvbiBsKGUsdCl7cmV0dXJuIG8obmV3IERhdGUoZS5nZXRGdWxsWWVhcigpLGUuZ2V0TW9udGgoKSsxLDApLHQpfWZ1bmN0aW9uIGMoZSx0LG4pe3JldHVybiBvKGUsbik9PT1zKGUsdCxuKX1mdW5jdGlvbiBkKGUsdCxuKXtmb3IodmFyIGkscixsLGMsZD1hKHQuZ2V0RGF5KCksbiksdT1lLmxlbmd0aCxoPVtdLHA9MDt1PnA7cCsrKWlmKHI9ZVtwXSxjPW8odCxuKSxpPXModCxyLG4pLG51bGwhPT1pKWlmKGk+YyloLnB1c2gocik7ZWxzZSBpZihjPT09aSlpZihsPWEoci5kYXksbiksbD5kKWgucHVzaChyKTtlbHNlIGlmKGQ9PT1sKXJldHVybiBudWxsO3JldHVybiBofWZ1bmN0aW9uIHUoZSx0LG4pe2Zvcih2YXIgaSxyPTAsbz1lLmxlbmd0aCxhPVtdO28+cjtyKyspe2lmKGk9ZVtyXSxuJiYoaT1uKGkpKSx0PT09aSlyZXR1cm4gbnVsbDtpPnQmJmEucHVzaChpKX1yZXR1cm4gYX1mdW5jdGlvbiBoKGUsdCl7Zm9yKHZhciBuLGk9MCxyPWUubGVuZ3RoO3I+aTtpKyspe2lmKG49cGFyc2VJbnQoZVtpXSwxMCksaXNOYU4obil8fHQuc3RhcnQ+bnx8bj50LmVuZHx8MD09PW4mJjA+dC5zdGFydClyZXR1cm4gbnVsbDtlW2ldPW59cmV0dXJuIGUuc29ydCh2KX1mdW5jdGlvbiBwKGUpe2Zvcih2YXIgbixpLHIsbz0wLGE9ZS5sZW5ndGg7YT5vO28rKyl7aWYobj1lW29dLGk9bi5sZW5ndGgscj1uLnN1YnN0cmluZyhpLTIpLnRvVXBwZXJDYXNlKCkscj1ydFtyXSxyPT09dClyZXR1cm4gbnVsbDtlW29dPXtvZmZzZXQ6cGFyc2VJbnQobi5zdWJzdHJpbmcoMCxpLTIpLDEwKXx8MCxkYXk6cn19cmV0dXJuIGV9ZnVuY3Rpb24gZihlKXtmb3IodmFyIHQsbixpPTAscj1lLmxlbmd0aCxvPVtdO3I+aTtpKyspdD1lW2ldLFwic3RyaW5nXCI9PXR5cGVvZiB0P249dDoobj1cIlwiK2l0W3QuZGF5XSx0Lm9mZnNldCYmKG49dC5vZmZzZXQrbikpLG8ucHVzaChuKTtyZXR1cm5cIlwiK299ZnVuY3Rpb24gZyhlKXt2YXIgdD1lLmdldE1vbnRoKCk7cmV0dXJuIDE9PT10PzE9PT1uZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCksMSwyOSkuZ2V0TW9udGgoKT8yOToyODpudFt0XX1mdW5jdGlvbiBtKGUpe3JldHVybiBlPWUuZ2V0RnVsbFllYXIoKSxlJTQ9PT0wJiZlJTEwMCE9PTB8fGUlNDAwPT09MH1mdW5jdGlvbiB2KGUsdCl7cmV0dXJuIGUtdH1mdW5jdGlvbiBfKGUsdCl7dmFyIG4saSxyPTAsbz1bXTtpZihlKWZvcihlPWUuc3BsaXQoXCI7XCIpLG49ZS5sZW5ndGg7bj5yO3IrKylpPVMoZVtyXSx0KSxpJiZvLnB1c2goaSk7cmV0dXJuIG99ZnVuY3Rpb24geSh0LG4saSl7Zm9yKHZhciByPWUuaXNBcnJheSh0KT90Ol8odCxpKSxvPW4uZ2V0VGltZSgpLW4uZ2V0TWlsbGlzZWNvbmRzKCksYT0wLHM9ci5sZW5ndGg7cz5hO2ErKylpZihyW2FdLmdldFRpbWUoKT09PW8pcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gdyhlLHQpe3ZhciBuLGkscj0wLG89W10uY29uY2F0KGUpO2ZvcihuPW8ubGVuZ3RoO24+cjtyKyspaT1vW3JdLGk9VS50aW1lem9uZS5jb252ZXJ0KGksdHx8aS5nZXRUaW1lem9uZU9mZnNldCgpLFwiRXRjL1VUQ1wiKSxvW3JdPVUudG9TdHJpbmcoaSxsdCk7cmV0dXJuIG8uam9pbihcIjtcIikrXCI7XCJ9ZnVuY3Rpb24gYihlLHQpe3ZhciBuPW5ldyBEYXRlKGUpO3N3aXRjaCh0LmZyZXEpe2Nhc2VcInllYXJseVwiOm4uc2V0RnVsbFllYXIobi5nZXRGdWxsWWVhcigpLDAsMSk7YnJlYWs7Y2FzZVwibW9udGhseVwiOm4uc2V0RnVsbFllYXIobi5nZXRGdWxsWWVhcigpLG4uZ2V0TW9udGgoKSwxKTticmVhaztjYXNlXCJ3ZWVrbHlcIjpRKG4sdC53ZWVrU3RhcnQsLTEpfXJldHVybiB0LmhvdXJzJiZuLnNldEhvdXJzKDApLHQubWludXRlcyYmbi5zZXRNaW51dGVzKDApLHQuc2Vjb25kcyYmbi5zZXRTZWNvbmRzKDApLG59ZnVuY3Rpb24gayhlLHQpe3ZhciBuPW5ldyBEYXRlKGUpO3N3aXRjaCh0LmZyZXEpe2Nhc2VcInllYXJseVwiOm4uc2V0RnVsbFllYXIobi5nZXRGdWxsWWVhcigpLDExLDMxKTticmVhaztjYXNlXCJtb250aGx5XCI6bi5zZXRGdWxsWWVhcihuLmdldEZ1bGxZZWFyKCksbi5nZXRNb250aCgpKzEsMCk7YnJlYWs7Y2FzZVwid2Vla2x5XCI6UShuLHQud2Vla1N0YXJ0LC0xKSxuLnNldERhdGUobi5nZXREYXRlKCkrNil9cmV0dXJuIHQuaG91cnMmJm4uc2V0SG91cnMoMjMpLHQubWludXRlcyYmbi5zZXRNaW51dGVzKDU5KSx0LnNlY29uZHMmJm4uc2V0U2Vjb25kcyg1OSksbn1mdW5jdGlvbiB4KGUsdCxuKXt2YXIgaSxyLG8sYSxzPWUuc2xpY2Uobi5fc3RhcnRJZHgpLGw9cy5sZW5ndGgsYz1uLnBvc2l0aW9ucyxkPVtdO2ZvcihvPTAsYT1jLmxlbmd0aDthPm87bysrKWk9Y1tvXSwwPmk/aT1sK2k6aS09MSxyPXNbaV0sciYmci5zdGFydD49dCYmZC5wdXNoKHIpO3JldHVybiBlPWUuc2xpY2UoMCxuLl9zdGFydElkeCkuY29uY2F0KGQpLG4uX3N0YXJ0SWR4PWUubGVuZ3RoLGV9ZnVuY3Rpb24gQyhlLG4saSxyKXt2YXIgbyxhLHMsbCxjLGQsdSxoLHAsZixnLG0sdixDLFMsVCxBLEUsTSxQLEkseixGPUQoZS5yZWN1cnJlbmNlUnVsZSxyKSxSPVtdO2lmKCFGKXJldHVybltlXTtmb3IoUD1GLnBvc2l0aW9ucyxJPVA/MDoxLGY9Ri5zdGFydCxnPUYuZW5kLChmfHxnKSYmKGU9ZS5jbG9uZSh7c3RhcnQ6Zj9uZXcgRGF0ZShmLnZhbHVlWzBdKTp0LGVuZDpnP25ldyBEYXRlKGcudmFsdWVbMF0pOnR9KSksQT1lLnN0YXJ0LFQ9QS5nZXRUaW1lKCksUz1aKEEpLEM9XyhlLnJlY3VycmVuY2VFeGNlcHRpb24sciksIUNbMF0mJkYuZXhkYXRlcyYmKEM9Ri5leGRhdGVzLnZhbHVlLGUuc2V0KFwicmVjdXJyZW5jZUV4Y2VwdGlvblwiLHcoQyxyKSkpLGg9bj1uZXcgRGF0ZShuKSxpPW5ldyBEYXRlKGkpLHY9Ri5mcmVxLE09bXRbdl0sRT1GLmNvdW50LEYudW50aWwmJmk+Ri51bnRpbCYmKGk9bmV3IERhdGUoRi51bnRpbCkpLG09XCJ5ZWFybHlcIj09PXZ8fFwibW9udGhseVwiPT09dnx8XCJ3ZWVrbHlcIj09PXYsVD5ufHxFfHxGLmludGVydmFsPjF8fG0/bj1uZXcgRGF0ZShUKToobD1uLmdldEhvdXJzKCksYz1uLmdldE1pbnV0ZXMoKSxkPW4uZ2V0U2Vjb25kcygpLEYuaG91cnN8fChsPUEuZ2V0SG91cnMoKSksRi5taW51dGVzfHwoYz1BLmdldE1pbnV0ZXMoKSksRi5zZWNvbmRzfHwoZD1BLmdldFNlY29uZHMoKSksbi5zZXRIb3VycyhsLGMsZCxBLmdldE1pbGxpc2Vjb25kcygpKSksRi5fc3RhcnRQZXJpb2Q9bmV3IERhdGUobiksUCYmKG49YihuLEYpLGk9ayhpLEYpLHo9WihpKS1aKG4pLDA+eiYmKGw9bi5nZXRIb3VycygpLGkuc2V0SG91cnMobCxuLmdldE1pbnV0ZXMoKSxuLmdldFNlY29uZHMoKSxuLmdldE1pbGxpc2Vjb25kcygpKSxZLmFkanVzdERTVChpLGwpKSxGLl9zdGFydFBlcmlvZD1uZXcgRGF0ZShuKSxGLl9lbmRQZXJpb2Q9ayhuLEYpLEYuX3N0YXJ0SWR4PTApLHU9ZS5kdXJhdGlvbigpLEYuX3N0YXJ0VGltZT1vPVkudG9JbnZhcmlhbnRUaW1lKG4pLE0uc2V0dXAmJk0uc2V0dXAoRixBLG4pLE0ubGltaXQobixpLEYpO2k+PW47KWlmKHM9bmV3IERhdGUobiksSyhzLHUpLHA9bj49aHx8cz5oLChwJiYheShDLG4scil8fFApJiYobz1ZLnRvVXRjVGltZShZLmdldERhdGUobikpK1ooRi5fc3RhcnRUaW1lKSxhPW8rdSxUIT09bi5nZXRUaW1lKCl8fFMhPT1aKEYuX3N0YXJ0VGltZSk/Ui5wdXNoKGUudG9PY2N1cnJlbmNlKHtzdGFydDpuZXcgRGF0ZShuKSxlbmQ6cyxzdGFydFRpbWU6byxlbmRUaW1lOmF9KSk6KGUuc3RhcnRUaW1lPW8sZS5lbmRUaW1lPWEsUi5wdXNoKGUpKSksUCl7aWYoTS5uZXh0KG4sRiksTS5saW1pdChuLGksRiksbj5GLl9lbmRQZXJpb2QmJihSPXgoUixBLEYpLEYuX2VuZFBlcmlvZD1rKG4sRiksST1SLmxlbmd0aCksRSYmRT09PUkpYnJlYWt9ZWxzZXtpZihFJiZFPT09SSlicmVhaztJKyssTS5uZXh0KG4sRiksTS5saW1pdChuLGksRil9cmV0dXJuIFJ9ZnVuY3Rpb24gUyhlLHQpe3JldHVybiBlPVUucGFyc2VEYXRlKGUsb3QpLGUmJnQmJihlPVcuY29udmVydChlLGUuZ2V0VGltZXpvbmVPZmZzZXQoKSx0KSksZX1mdW5jdGlvbiBUKGUsbil7dmFyIGkscixvLGEscyxsLGMsZCx1PWUuc3BsaXQoXCI7XCIpO2ZvcihjPTAsZD11Lmxlbmd0aDtkPmM7YysrKWlmKGk9dVtjXS5zcGxpdChcIjpcIikscj1pWzBdLG89aVsxXSwtMSE9PXIuaW5kZXhPZihcIlRaSURcIikmJihhPXIuc3Vic3RyaW5nKHIuaW5kZXhPZihcIlRaSURcIikpLnNwbGl0KFwiPVwiKVsxXSksbylmb3Iobz1vLnNwbGl0KFwiLFwiKSxzPTAsbD1vLmxlbmd0aDtsPnM7cysrKW9bc109UyhvW3NdLGF8fG4pO3JldHVybiBvP3t2YWx1ZTpvLHR6aWQ6YX06dH1mdW5jdGlvbiBEKG4saSl7dmFyIHIsbyxhLHMsbCxjLGQsdSxmLGc9e30sbT0wLHY9ITEsXz1mdW5jdGlvbihlLHQpe3ZhciBuPWUuZGF5LGk9dC5kYXk7cmV0dXJuIHU+biYmKG4rPTcpLHU+aSYmKGkrPTcpLG4taX07aWYoIW4pcmV0dXJuIG51bGw7Zm9yKGM9bi5zcGxpdChcIlxcblwiKSxjWzFdfHwtMT09PW4uaW5kZXhPZihcIkRUU1RBUlRcIikmJi0xPT09bi5pbmRleE9mKFwiRFRFTkRcIikmJi0xPT09bi5pbmRleE9mKFwiRVhEQVRFXCIpfHwoYz1uLnNwbGl0KFwiIFwiKSksbT0wLGE9Yy5sZW5ndGg7YT5tO20rKylsPWNbbV0sLTEhPT1sLmluZGV4T2YoXCJEVFNUQVJUXCIpP2cuc3RhcnQ9VChsLGkpOi0xIT09bC5pbmRleE9mKFwiRFRFTkRcIik/Zy5lbmQ9VChsLGkpOi0xIT09bC5pbmRleE9mKFwiRVhEQVRFXCIpP2cuZXhkYXRlcz1UKGwsaSk6cz0tMSE9PWwuaW5kZXhPZihcIlJSVUxFXCIpP2wuc3Vic3RyaW5nKDYpOmw7Zm9yKHM9cy5zcGxpdChcIjtcIiksbT0wLGE9cy5sZW5ndGg7YT5tO20rKylzd2l0Y2goZD1zW21dLHI9ZC5zcGxpdChcIj1cIiksbz1lLnRyaW0oclsxXSkuc3BsaXQoXCIsXCIpLGUudHJpbShyWzBdKS50b1VwcGVyQ2FzZSgpKXtjYXNlXCJGUkVRXCI6Zy5mcmVxPW9bMF0udG9Mb3dlckNhc2UoKTticmVhaztjYXNlXCJVTlRJTFwiOmcudW50aWw9UyhvWzBdLGkpO2JyZWFrO2Nhc2VcIkNPVU5UXCI6Zy5jb3VudD1wYXJzZUludChvWzBdLDEwKTticmVhaztjYXNlXCJJTlRFUlZBTFwiOmcuaW50ZXJ2YWw9cGFyc2VJbnQob1swXSwxMCk7YnJlYWs7Y2FzZVwiQllTRUNPTkRcIjpnLnNlY29uZHM9aChvLHtzdGFydDowLGVuZDo2MH0pLHY9ITA7YnJlYWs7Y2FzZVwiQllNSU5VVEVcIjpnLm1pbnV0ZXM9aChvLHtzdGFydDowLGVuZDo1OX0pLHY9ITA7YnJlYWs7Y2FzZVwiQllIT1VSXCI6Zy5ob3Vycz1oKG8se3N0YXJ0OjAsZW5kOjIzfSksdj0hMDticmVhaztjYXNlXCJCWU1PTlRIREFZXCI6Zy5tb250aERheXM9aChvLHtzdGFydDotMzEsZW5kOjMxfSksdj0hMDticmVhaztjYXNlXCJCWVlFQVJEQVlcIjpnLnllYXJEYXlzPWgobyx7c3RhcnQ6LTM2NixlbmQ6MzY2fSksdj0hMDticmVhaztjYXNlXCJCWU1PTlRIXCI6Zy5tb250aHM9aChvLHtzdGFydDoxLGVuZDoxMn0pLHY9ITA7YnJlYWs7Y2FzZVwiQllEQVlcIjpnLndlZWtEYXlzPWY9cChvKSx2PSEwO2JyZWFrO2Nhc2VcIkJZV0VFS05PXCI6Zy53ZWVrcz1oKG8se3N0YXJ0Oi01MyxlbmQ6NTN9KSx2PSEwO2JyZWFrO2Nhc2VcIkJZU0VUUE9TXCI6Zy5wb3NpdGlvbnM9aChvLHtzdGFydDotMzY2LGVuZDozNjZ9KTticmVhaztjYXNlXCJXS1NUXCI6Zy53ZWVrU3RhcnQ9dT1ydFtvWzBdXX1yZXR1cm4gZy5mcmVxPT09dHx8Zy5jb3VudCE9PXQmJmcudW50aWw/bnVsbDooZy5pbnRlcnZhbHx8KGcuaW50ZXJ2YWw9MSksdT09PXQmJihnLndlZWtTdGFydD11PVUuY3VsdHVyZSgpLmNhbGVuZGFyLmZpcnN0RGF5KSxmJiYoZy53ZWVrRGF5cz1mLnNvcnQoXykpLGcucG9zaXRpb25zJiYhdiYmKGcucG9zaXRpb25zPW51bGwpLGcuX2hhc1J1bGVWYWx1ZT12LGcpfWZ1bmN0aW9uIEEoZSx0KXtmb3IodmFyIG4saT1lLnZhbHVlLHI9ZS50emlkfHxcIlwiLG89aS5sZW5ndGgsYT0wO28+YTthKyspbj1pW2FdLG49Vy5jb252ZXJ0KG4scnx8dHx8bi5nZXRUaW1lem9uZU9mZnNldCgpLFwiRXRjL1VUQ1wiKSxpW2FdPVUudG9TdHJpbmcobixcInl5eXlNTWRkVEhIbW1zc1pcIik7cmV0dXJuIHImJihyPVwiO1RaSUQ9XCIrcikscitcIjpcIitpLmpvaW4oXCIsXCIpK1wiIFwifWZ1bmN0aW9uIEUoZSxuKXt2YXIgaT1lLndlZWtTdGFydCxyPVwiRlJFUT1cIitlLmZyZXEudG9VcHBlckNhc2UoKSxvPWUuZXhkYXRlc3x8XCJcIixhPWUuc3RhcnR8fFwiXCIscz1lLmVuZHx8XCJcIixsPWUudW50aWw7cmV0dXJuIGUuaW50ZXJ2YWw+MSYmKHIrPVwiO0lOVEVSVkFMPVwiK2UuaW50ZXJ2YWwpLGUuY291bnQmJihyKz1cIjtDT1VOVD1cIitlLmNvdW50KSxsJiYobD1XLmNvbnZlcnQobCxufHxsLmdldFRpbWV6b25lT2Zmc2V0KCksXCJFdGMvVVRDXCIpLHIrPVwiO1VOVElMPVwiK1UudG9TdHJpbmcobCxcInl5eXlNTWRkVEhIbW1zc1pcIikpLGUubW9udGhzJiYocis9XCI7QllNT05USD1cIitlLm1vbnRocyksZS53ZWVrcyYmKHIrPVwiO0JZV0VFS05PPVwiK2Uud2Vla3MpLGUueWVhckRheXMmJihyKz1cIjtCWVlFQVJEQVk9XCIrZS55ZWFyRGF5cyksZS5tb250aERheXMmJihyKz1cIjtCWU1PTlRIREFZPVwiK2UubW9udGhEYXlzKSxlLndlZWtEYXlzJiYocis9XCI7QllEQVk9XCIrZihlLndlZWtEYXlzKSksZS5ob3VycyYmKHIrPVwiO0JZSE9VUj1cIitlLmhvdXJzKSxlLm1pbnV0ZXMmJihyKz1cIjtCWU1JTlVURT1cIitlLm1pbnV0ZXMpLGUuc2Vjb25kcyYmKHIrPVwiO0JZU0VDT05EPVwiK2Uuc2Vjb25kcyksZS5wb3NpdGlvbnMmJihyKz1cIjtCWVNFVFBPUz1cIitlLnBvc2l0aW9ucyksaSE9PXQmJihyKz1cIjtXS1NUPVwiK2l0W2ldKSxhJiYoYT1cIkRUU1RBUlRcIitBKGEsbikpLHMmJihzPVwiRFRFTkRcIitBKHMsbikpLG8mJihvPVwiRVhEQVRFXCIrQShvLG4pKSwoYXx8c3x8bykmJihyPWErcytvK1wiUlJVTEU6XCIrcikscn12YXIgTSxQLEkseixGLFIsQixMLE8sSCxOLFYsVT13aW5kb3cua2VuZG8sVz1VLnRpbWV6b25lLGo9VS5DbGFzcyxHPVUudWkscT1HLldpZGdldCwkPUcuRHJvcERvd25MaXN0LFk9VS5kYXRlLEs9WS5zZXRUaW1lLFE9WS5zZXREYXlPZldlZWssWD1ZLmFkanVzdERTVCxKPVkuZmlyc3REYXlPZk1vbnRoLFo9WS5nZXRNaWxsaXNlY29uZHMsZXQ9WzAsMzEsNjAsOTEsMTIxLDE1MiwxODIsMjEzLDI0NCwyNzQsMzA1LDMzNSwzNjZdLHR0PVswLDMxLDU5LDkwLDEyMCwxNTEsMTgxLDIxMiwyNDMsMjczLDMwNCwzMzQsMzY1XSxudD1bMzEsMjgsMzAsMzEsMzAsMzEsMzAsMzEsMzAsMzEsMzAsMzFdLGl0PXswOlwiU1VcIiwxOlwiTU9cIiwyOlwiVFVcIiwzOlwiV0VcIiw0OlwiVEhcIiw1OlwiRlJcIiw2OlwiU0FcIn0scnQ9e1NVOjAsTU86MSxUVToyLFdFOjMsVEg6NCxGUjo1LFNBOjZ9LG90PVtcInl5eXktTU0tZGRUSEg6bW06c3MuZmZmenp6XCIsXCJ5eXl5LU1NLWRkVEhIOm1tOnNzenp6XCIsXCJ5eXl5LU1NLWRkVEhIOm1tOnNzXCIsXCJ5eXl5LU1NLWRkVEhIOm1tXCIsXCJ5eXl5LU1NLWRkVEhIXCIsXCJ5eXl5LU1NLWRkXCIsXCJ5eXl5TU1kZFRISG1tc3NmZmZ6enpcIixcInl5eXlNTWRkVEhIbW1zc3p6elwiLFwieXl5eU1NZGRUSEhtbXNzXCIsXCJ5eXl5TU1kZFRISG1tXCIsXCJ5eXl5TU1kZFRISFwiLFwieXl5eU1NZGRcIl0sYXQ9W1wibW9udGhzXCIsXCJ3ZWVrc1wiLFwieWVhckRheXNcIixcIm1vbnRoRGF5c1wiLFwid2Vla0RheXNcIixcImhvdXJzXCIsXCJtaW51dGVzXCIsXCJzZWNvbmRzXCJdLHN0PWF0Lmxlbmd0aCxsdD1cInl5eXlNTWRkVEhIbW1zc1pcIixjdD17bW9udGhzOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1uLm1vbnRocyxyPXUoaSxlLmdldE1vbnRoKCkrMSksbz0hMTtyZXR1cm4gbnVsbCE9PXImJihyLmxlbmd0aD9lLnNldE1vbnRoKHJbMF0tMSwxKTplLnNldEZ1bGxZZWFyKGUuZ2V0RnVsbFllYXIoKSsxLGlbMF0tMSwxKSxvPSEwKSxvfSxtb250aERheXM6ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgaSxyLG8sYT0hMSxzPWUuZ2V0SG91cnMoKSxsPWZ1bmN0aW9uKGUpe3JldHVybiAwPmUmJihlPWkrZSksZX07dD49ZTspe2lmKHI9ZS5nZXRNb250aCgpLGk9ZyhlKSxvPXUobi5tb250aERheXMsZS5nZXREYXRlKCksbCksbnVsbD09PW8pcmV0dXJuIGE7aWYoYT0hMCxvLmxlbmd0aCl7aWYoZS5zZXRNb250aChyLG8uc29ydCh2KVswXSksWChlLHMpLHI9PT1lLmdldE1vbnRoKCkpYnJlYWt9ZWxzZSBlLnNldE1vbnRoKHIrMSwxKX1yZXR1cm4gYX0seWVhckRheXM6ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcixvLGE9ITEscz1lLmdldEhvdXJzKCksbD1mdW5jdGlvbihlKXtyZXR1cm4gMD5lJiYoZT1yK2UpLGV9O3Q+ZTspe2lmKHI9bShlKT8zNjY6MzY1LG89dShuLnllYXJEYXlzLGkoZSksbCksbnVsbD09PW8pcmV0dXJuIGE7aWYoYT0hMCxyPWUuZ2V0RnVsbFllYXIoKSxvLmxlbmd0aCl7ZS5zZXRGdWxsWWVhcihyLDAsby5zb3J0KHYpWzBdKSxYKGUscyk7YnJlYWt9ZS5zZXRGdWxsWWVhcihyKzEsMCwxKX1yZXR1cm4gYX0sd2Vla3M6ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgaSxvLGEscz1uLndlZWtTdGFydCxsPSExLGM9ZS5nZXRIb3VycygpLGQ9ZnVuY3Rpb24oZSl7cmV0dXJuIDA+ZSYmKGU9NTMrZSksZX07dD5lOyl7aWYobz11KG4ud2Vla3MscihlLHMpLGQpLG51bGw9PT1vKXJldHVybiBsO2lmKGw9ITAsaT1lLmdldEZ1bGxZZWFyKCksby5sZW5ndGgpe2E9NypvLnNvcnQodilbMF0tMSxlLnNldEZ1bGxZZWFyKGksMCxhKSxRKGUscywtMSksWChlLGMpO2JyZWFrfWUuc2V0RnVsbFllYXIoaSsxLDAsMSl9cmV0dXJuIGx9LHdlZWtEYXlzOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLGE9bi53ZWVrRGF5cyxzPW4ud2Vla1N0YXJ0LHU9ZChhLGUscyksaD1lLmdldEhvdXJzKCk7aWYobnVsbD09PXUpcmV0dXJuITE7aWYoaT11WzBdLGl8fChpPWFbMF0sUShlLHMpKSxyPWkuZGF5LGkub2Zmc2V0KWZvcig7dD49ZSYmIWMoZSxpLHMpOylvKGUscyk9PT1sKGUscyk/KGUuc2V0TW9udGgoZS5nZXRNb250aCgpKzEsMSksWChlLGgpKTooZS5zZXREYXRlKGUuZ2V0RGF0ZSgpKzcpLFgoZSxoKSxRKGUscywtMSkpO3JldHVybiBlLmdldERheSgpIT09ciYmUShlLHIpLCEwfSxob3VyczpmdW5jdGlvbihlLHQsbil7dmFyIGk9bi5ob3VycyxyPW4uX3N0YXJ0VGltZSxvPXIuZ2V0SG91cnMoKSxhPXUoaSxvKSxzPSExO3JldHVybiBudWxsIT09YSYmKHM9ITAsZS5zZXRIb3VycyhvKSxYKGUsbyksYS5sZW5ndGg/KGE9YVswXSxlLnNldEhvdXJzKGEpKTooYT1lLmdldEhvdXJzKCksZS5zZXREYXRlKGUuZ2V0RGF0ZSgpKzEpLFgoZSxhKSxhPWlbMF0sZS5zZXRIb3VycyhhKSxYKGUsYSkpLG4ubWludXRlcyYmZS5zZXRNaW51dGVzKDApLHIuc2V0SG91cnMoYSxlLmdldE1pbnV0ZXMoKSkpLHN9LG1pbnV0ZXM6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPW4ubWludXRlcyxyPWUuZ2V0TWludXRlcygpLG89dShpLHIpLGE9bi5fc3RhcnRUaW1lLmdldEhvdXJzKCkscz0hMTtyZXR1cm4gbnVsbCE9PW8mJihzPSEwLG8ubGVuZ3RoP289b1swXTooYSs9MSxvPWlbMF0pLG4uc2Vjb25kcyYmZS5zZXRTZWNvbmRzKDApLGUuc2V0SG91cnMoYSxvKSxhJT0yNCxYKGUsYSksbi5fc3RhcnRUaW1lLnNldEhvdXJzKGEsbyxlLmdldFNlY29uZHMoKSkpLHN9LHNlY29uZHM6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPW4uc2Vjb25kcyxyPW4uX3N0YXJ0VGltZS5nZXRIb3VycygpLG89dShpLGUuZ2V0U2Vjb25kcygpKSxhPWUuZ2V0TWludXRlcygpLHM9ITE7cmV0dXJuIG51bGwhPT1vJiYocz0hMCxvLmxlbmd0aD9lLnNldFNlY29uZHMob1swXSk6KGErPTEsZS5zZXRNaW51dGVzKGEsaVswXSksYT41OSYmKGElPTYwLHI9KHIrMSklMjQpKSxuLl9zdGFydFRpbWUuc2V0SG91cnMocixhLGUuZ2V0U2Vjb25kcygpKSksc319LGR0PWouZXh0ZW5kKHtuZXh0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXQuX3N0YXJ0VGltZSxvPXIuZ2V0RGF0ZSgpO2lmKHQuc2Vjb25kcylpPWUuZ2V0U2Vjb25kcygpKzEsZS5zZXRTZWNvbmRzKGkpLHIuc2V0U2Vjb25kcyhpKSxyLnNldERhdGUobyk7ZWxzZXtpZighdC5taW51dGVzKXJldHVybiExO249ZS5nZXRNaW51dGVzKCkrMSxlLnNldE1pbnV0ZXMobiksci5zZXRNaW51dGVzKG4pLHIuc2V0RGF0ZShvKX1yZXR1cm4hMH0sbm9ybWFsaXplOmZ1bmN0aW9uKGUpe3ZhciB0PWUucnVsZTs0PT09ZS5pZHgmJnQuaG91cnMmJih0Ll9zdGFydFRpbWUuc2V0SG91cnMoMCksdGhpcy5faG91cihlLmRhdGUsdCkpfSxsaW1pdDpmdW5jdGlvbihlLG4saSl7Zm9yKHZhciByLG8sYSxzLGwsYz1pLmludGVydmFsO24+PWU7KXtmb3IoYT1vPXQsbD1lLmdldERhdGUoKSxzPTA7c3Q+cztzKyspe2lmKHI9YXRbc10saVtyXSl7aWYoYT1jdFtyXShlLG4saSksbyE9PXQmJmEpYnJlYWs7bz1hfWEmJnRoaXMubm9ybWFsaXplKHtkYXRlOmUscnVsZTppLGRheTpsLGlkeDpzfSl9aWYoKDE9PT1jfHwhdGhpcy5pbnRlcnZhbChpLGUpKSYmcz09PXN0KWJyZWFrfX0saW50ZXJ2YWw6ZnVuY3Rpb24oZSx0KXt2YXIgaSxvLGE9bmV3IERhdGUoZS5fc3RhcnRQZXJpb2QpLHM9bmV3IERhdGUodCksbD10LmdldEhvdXJzKCksYz1lLndlZWtTdGFydCxkPWUuaW50ZXJ2YWwsdT1lLmZyZXEsaD0hMSxwPTAsZj0wLGc9MTtyZXR1cm5cImhvdXJseVwiPT09dT8oaT1zLmdldFRpbWV6b25lT2Zmc2V0KCktYS5nZXRUaW1lem9uZU9mZnNldCgpLG89ZS5fc3RhcnRUaW1lLmdldEhvdXJzKCkscz1zLmdldFRpbWUoKSxsIT09byYmKHMrPShvLWwpKlkuTVNfUEVSX0hPVVIpLHMtPWEsaSYmKHMtPWkqWS5NU19QRVJfTUlOVVRFKSxpPU1hdGguZmxvb3Iocy9ZLk1TX1BFUl9IT1VSKSxwPW4oaSxkKSwwIT09cCYmKHRoaXMuX2hvdXIodCxlLHApLGg9ITApKTpcImRhaWx5XCI9PT11PyhZLnNldFRpbWUocywtYSksaT1NYXRoLmZsb29yKHMvWS5NU19QRVJfREFZKSxwPW4oaSxkKSwwIT09cCYmKHRoaXMuX2RhdGUodCxlLHApLGg9ITApKTpcIndlZWtseVwiPT09dT8oaT01MioodC5nZXRGdWxsWWVhcigpLWEuZ2V0RnVsbFllYXIoKSkscD1yKHQsYyktcihhLGMpK2kscD1uKHAsZCksMCE9PXAmJihZLnNldERheU9mV2Vlayh0LGUud2Vla1N0YXJ0LC0xKSx0LnNldERhdGUodC5nZXREYXRlKCkrNypwKSxYKHQsbCksaD0hMCkpOlwibW9udGhseVwiPT09dT8oaT10LmdldEZ1bGxZZWFyKCktYS5nZXRGdWxsWWVhcigpLGk9dC5nZXRNb250aCgpLWEuZ2V0TW9udGgoKSsxMippLHA9bihpLGQpLDAhPT1wJiYoZz1lLl9oYXNSdWxlVmFsdWU/MTp0LmdldERhdGUoKSx0LnNldEZ1bGxZZWFyKHQuZ2V0RnVsbFllYXIoKSx0LmdldE1vbnRoKCkrcCxnKSxYKHQsbCksaD0hMCkpOlwieWVhcmx5XCI9PT11JiYoaT10LmdldEZ1bGxZZWFyKCktYS5nZXRGdWxsWWVhcigpLHA9bihpLGQpLGUubW9udGhzfHwoZj10LmdldE1vbnRoKCkpLGUueWVhckRheXN8fGUubW9udGhEYXlzfHxlLndlZWtEYXlzfHwoZz10LmdldERhdGUoKSksMCE9PXAmJih0LnNldEZ1bGxZZWFyKHQuZ2V0RnVsbFllYXIoKStwLGYsZyksWCh0LGwpLGg9ITApKSxofSxfaG91cjpmdW5jdGlvbihlLHQsbil7dmFyIGk9dC5fc3RhcnRUaW1lLHI9aS5nZXRIb3VycygpO24mJihyKz1uKSxlLnNldEhvdXJzKHIpLHIlPTI0LGkuc2V0SG91cnMociksWChlLHIpfSxfZGF0ZTpmdW5jdGlvbihlLHQsbil7dmFyIGk9ZS5nZXRIb3VycygpO2Uuc2V0RGF0ZShlLmdldERhdGUoKStuKSxYKGUsaSl8fHRoaXMuX2hvdXIoZSx0KX19KSx1dD1kdC5leHRlbmQoe25leHQ6ZnVuY3Rpb24oZSx0KXtkdC5mbi5uZXh0KGUsdCl8fHRoaXMuX2hvdXIoZSx0LDEpXHJcbn0sbm9ybWFsaXplOmZ1bmN0aW9uKGUpe3ZhciB0PWUucnVsZTs0PT09ZS5pZHgmJih0Ll9zdGFydFRpbWUuc2V0SG91cnMoMCksdGhpcy5faG91cihlLmRhdGUsdCkpfX0pLGh0PWR0LmV4dGVuZCh7bmV4dDpmdW5jdGlvbihlLHQpe2R0LmZuLm5leHQoZSx0KXx8dGhpc1t0LmhvdXJzP1wiX2hvdXJcIjpcIl9kYXRlXCJdKGUsdCwxKX19KSxwdD1odC5leHRlbmQoe3NldHVwOmZ1bmN0aW9uKGUsdCl7ZS53ZWVrRGF5c3x8KGUud2Vla0RheXM9W3tkYXk6dC5nZXREYXkoKSxvZmZzZXQ6MH1dKX19KSxmdD1kdC5leHRlbmQoe25leHQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpO2lmKCFkdC5mbi5uZXh0KGUsdCkpaWYodC5ob3Vycyl0aGlzLl9ob3VyKGUsdCwxKTtlbHNlIGlmKHQubW9udGhEYXlzfHx0LndlZWtEYXlzfHx0LnllYXJEYXlzfHx0LndlZWtzKXRoaXMuX2RhdGUoZSx0LDEpO2Vsc2V7Zm9yKG49ZS5nZXREYXRlKCksaT1lLmdldEhvdXJzKCksZS5zZXRNb250aChlLmdldE1vbnRoKCkrMSksWChlLGkpO2UuZ2V0RGF0ZSgpIT09bjspZS5zZXREYXRlKG4pLFgoZSxpKTt0aGlzLl9ob3VyKGUsdCl9fSxub3JtYWxpemU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ydWxlLG49ZS5kYXRlLGk9bi5nZXRIb3VycygpOzAhPT1lLmlkeHx8dC5tb250aERheXN8fHQud2Vla0RheXM/ZHQuZm4ubm9ybWFsaXplKGUpOihuLnNldERhdGUoZS5kYXkpLFgobixpKSl9LHNldHVwOmZ1bmN0aW9uKGUsdCxuKXtlLm1vbnRoRGF5c3x8ZS53ZWVrRGF5c3x8bi5zZXREYXRlKHQuZ2V0RGF0ZSgpKX19KSxndD1mdC5leHRlbmQoe25leHQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPWUuZ2V0SG91cnMoKTtpZighZHQuZm4ubmV4dChlLHQpKWlmKHQuaG91cnMpdGhpcy5faG91cihlLHQsMSk7ZWxzZSBpZih0Lm1vbnRoRGF5c3x8dC53ZWVrRGF5c3x8dC55ZWFyRGF5c3x8dC53ZWVrcyl0aGlzLl9kYXRlKGUsdCwxKTtlbHNlIGlmKHQubW9udGhzKXtmb3Iobj1lLmdldERhdGUoKSxlLnNldE1vbnRoKGUuZ2V0TW9udGgoKSsxKSxYKGUsaSk7ZS5nZXREYXRlKCkhPT1uOyllLnNldERhdGUobiksWChlLGkpO3RoaXMuX2hvdXIoZSx0KX1lbHNlIGUuc2V0RnVsbFllYXIoZS5nZXRGdWxsWWVhcigpKzEpLFgoZSxpKSx0aGlzLl9ob3VyKGUsdCl9LHNldHVwOmZ1bmN0aW9uKCl7fX0pLG10PXtob3VybHk6bmV3IHV0LGRhaWx5Om5ldyBodCx3ZWVrbHk6bmV3IHB0LG1vbnRobHk6bmV3IGZ0LHllYXJseTpuZXcgZ3R9LHZ0PVwiY2xpY2tcIjtVLnJlY3VycmVuY2U9e3J1bGU6e3BhcnNlOkQsc2VyaWFsaXplOkV9LGV4cGFuZDpDLGRheUluWWVhcjppLHdlZWtJblllYXI6cix3ZWVrSW5Nb250aDpvLG51bWJlck9mV2Vla3M6bCxpc0V4Y2VwdGlvbjp5LHRvRXhjZXB0aW9uU3RyaW5nOnd9LE09ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVUuY3VsdHVyZSgpLmNhbGVuZGFyLmRheXMubmFtZXNTaG9ydCxuPXQubGVuZ3RoLGk9XCJcIixyPTAsbz1bXTtuPnI7cisrKW8ucHVzaChyKTtmb3IodD10LnNsaWNlKGUpLmNvbmNhdCh0LnNsaWNlKDAsZSkpLG89by5zbGljZShlKS5jb25jYXQoby5zbGljZSgwLGUpKSxyPTA7bj5yO3IrKylpKz0nPGxhYmVsIGNsYXNzPVwiay1jaGVja1wiPjxpbnB1dCBjbGFzcz1cImstcmVjdXItd2Vla2RheS1jaGVja2JveFwiIHR5cGU9XCJjaGVja2JveFwiIHZhbHVlPVwiJytvW3JdKydcIiAvPiAnK3Rbcl0rXCI8L2xhYmVsPlwiO3JldHVybiBpfSxQPVUudGVtcGxhdGUoJyMgaWYgKGZyZXF1ZW5jeSAhPT0gXCJuZXZlclwiKSB7ICM8ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMucmVwZWF0RXZlcnkjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PGlucHV0IGNsYXNzPVwiay1yZWN1ci1pbnRlcnZhbFwiLz4jOm1lc3NhZ2VzLmludGVydmFsIzwvZGl2PiMgfSAjIyBpZiAoZnJlcXVlbmN5ID09PSBcIndlZWtseVwiKSB7ICM8ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMucmVwZWF0T24jPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+Iz13ZWVrRGF5Q2hlY2tCb3hlcyhmaXJzdFdlZWtEYXkpIzwvZGl2PiMgfSBlbHNlIGlmIChmcmVxdWVuY3kgPT09IFwibW9udGhseVwiKSB7ICM8ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMucmVwZWF0T24jPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PHVsIGNsYXNzPVwiay1yZXNldFwiPjxsaT48bGFiZWw+PGlucHV0IGNsYXNzPVwiay1yZWN1ci1tb250aC1yYWRpb1wiIHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJtb250aFwiIHZhbHVlPVwibW9udGhkYXlcIiAvPiM6bWVzc2FnZXMuZGF5IzwvbGFiZWw+PGlucHV0IGNsYXNzPVwiay1yZWN1ci1tb250aGRheVwiIC8+PC9saT48bGk+PGlucHV0IGNsYXNzPVwiay1yZWN1ci1tb250aC1yYWRpb1wiIHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJtb250aFwiIHZhbHVlPVwid2Vla2RheVwiIC8+PGlucHV0IGNsYXNzPVwiay1yZWN1ci13ZWVrZGF5LW9mZnNldFwiIC8+PGlucHV0IGNsYXNzPVwiay1yZWN1ci13ZWVrZGF5XCIgLz48L2xpPjwvdWw+PC9kaXY+IyB9IGVsc2UgaWYgKGZyZXF1ZW5jeSA9PT0gXCJ5ZWFybHlcIikgeyAjPGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4jOm1lc3NhZ2VzLnJlcGVhdE9uIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1maWVsZFwiPjx1bCBjbGFzcz1cImstcmVzZXRcIj48bGk+PGlucHV0IGNsYXNzPVwiay1yZWN1ci15ZWFyLXJhZGlvXCIgdHlwZT1cInJhZGlvXCIgbmFtZT1cInllYXJcIiB2YWx1ZT1cIm1vbnRoZGF5XCIgLz48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLW1vbnRoXCIgLz48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLW1vbnRoZGF5XCIgLz48L2xpPjxsaT48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLXllYXItcmFkaW9cIiB0eXBlPVwicmFkaW9cIiBuYW1lPVwieWVhclwiIHZhbHVlPVwid2Vla2RheVwiIC8+PGlucHV0IGNsYXNzPVwiay1yZWN1ci13ZWVrZGF5LW9mZnNldFwiIC8+PGlucHV0IGNsYXNzPVwiay1yZWN1ci13ZWVrZGF5XCIgLz4jOm1lc3NhZ2VzLm9mIzxpbnB1dCBjbGFzcz1cImstcmVjdXItbW9udGhcIiAvPjwvbGk+PC91bD48L2Rpdj4jIH0gIyMgaWYgKGZyZXF1ZW5jeSAhPT0gXCJuZXZlclwiKSB7ICM8ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6ZW5kLmxhYmVsIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1maWVsZFwiPjx1bCBjbGFzcz1cImstcmVzZXRcIj48bGk+PGxhYmVsPjxpbnB1dCBjbGFzcz1cImstcmVjdXItZW5kLW5ldmVyXCIgdHlwZT1cInJhZGlvXCIgbmFtZT1cImVuZFwiIHZhbHVlPVwibmV2ZXJcIiAvPiM6ZW5kLm5ldmVyIzwvbGFiZWw+PC9saT48bGk+PGxhYmVsPjxpbnB1dCBjbGFzcz1cImstcmVjdXItZW5kLWNvdW50XCIgdHlwZT1cInJhZGlvXCIgbmFtZT1cImVuZFwiIHZhbHVlPVwiY291bnRcIiAvPiM6ZW5kLmFmdGVyIzwvbGFiZWw+PGlucHV0IGNsYXNzPVwiay1yZWN1ci1jb3VudFwiIC8+IzplbmQub2NjdXJyZW5jZSM8L2xpPjxsaT48bGFiZWw+PGlucHV0IGNsYXNzPVwiay1yZWN1ci1lbmQtdW50aWxcIiB0eXBlPVwicmFkaW9cIiBuYW1lPVwiZW5kXCIgdmFsdWU9XCJ1bnRpbFwiIC8+IzplbmQub24jPC9sYWJlbD48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLXVudGlsXCIgLz48L2xpPjwvdWw+PC9kaXY+IyB9ICMnKSxJPVt7ZGF5OjAsb2Zmc2V0OjB9LHtkYXk6MSxvZmZzZXQ6MH0se2RheToyLG9mZnNldDowfSx7ZGF5OjMsb2Zmc2V0OjB9LHtkYXk6NCxvZmZzZXQ6MH0se2RheTo1LG9mZnNldDowfSx7ZGF5OjYsb2Zmc2V0OjB9XSx6PVt7ZGF5OjEsb2Zmc2V0OjB9LHtkYXk6MixvZmZzZXQ6MH0se2RheTozLG9mZnNldDowfSx7ZGF5OjQsb2Zmc2V0OjB9LHtkYXk6NSxvZmZzZXQ6MH1dLEY9W3tkYXk6MCxvZmZzZXQ6MH0se2RheTo2LG9mZnNldDowfV0sUj1xLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcyxyPXQmJnQuZnJlcXVlbmNpZXM7cS5mbi5pbml0LmNhbGwoaSxlLHQpLGkud3JhcHBlcj1pLmVsZW1lbnQsdD1pLm9wdGlvbnMsdC5zdGFydD1uPXQuc3RhcnR8fFkudG9kYXkoKSxyJiYodC5mcmVxdWVuY2llcz1yKSxcInN0cmluZ1wiPT10eXBlb2YgbiYmKHQuc3RhcnQ9VS5wYXJzZURhdGUobixcInl5eXlNTWRkVEhIbW1zc1wiKSksbnVsbD09PXQuZmlyc3RXZWVrRGF5JiYodC5maXJzdFdlZWtEYXk9VS5jdWx0dXJlKCkuY2FsZW5kYXIuZmlyc3REYXkpLGkuX25hbWVzcGFjZT1cIi5cIit0Lm5hbWV9LG9wdGlvbnM6e3ZhbHVlOlwiXCIsc3RhcnQ6XCJcIix0aW1lem9uZTpcIlwiLHNwaW5uZXJzOiEwLGZpcnN0V2Vla0RheTpudWxsLGZyZXF1ZW5jaWVzOltcIm5ldmVyXCIsXCJkYWlseVwiLFwid2Vla2x5XCIsXCJtb250aGx5XCIsXCJ5ZWFybHlcIl0sbW9iaWxlOiExLG1lc3NhZ2VzOntmcmVxdWVuY2llczp7bmV2ZXI6XCJOZXZlclwiLGhvdXJseTpcIkhvdXJseVwiLGRhaWx5OlwiRGFpbHlcIix3ZWVrbHk6XCJXZWVrbHlcIixtb250aGx5OlwiTW9udGhseVwiLHllYXJseTpcIlllYXJseVwifSxob3VybHk6e3JlcGVhdEV2ZXJ5OlwiUmVwZWF0IGV2ZXJ5OiBcIixpbnRlcnZhbDpcIiBob3VyKHMpXCJ9LGRhaWx5OntyZXBlYXRFdmVyeTpcIlJlcGVhdCBldmVyeTogXCIsaW50ZXJ2YWw6XCIgZGF5KHMpXCJ9LHdlZWtseTp7aW50ZXJ2YWw6XCIgd2VlayhzKVwiLHJlcGVhdEV2ZXJ5OlwiUmVwZWF0IGV2ZXJ5OiBcIixyZXBlYXRPbjpcIlJlcGVhdCBvbjogXCJ9LG1vbnRobHk6e3JlcGVhdEV2ZXJ5OlwiUmVwZWF0IGV2ZXJ5OiBcIixyZXBlYXRPbjpcIlJlcGVhdCBvbjogXCIsaW50ZXJ2YWw6XCIgbW9udGgocylcIixkYXk6XCJEYXkgXCJ9LHllYXJseTp7cmVwZWF0RXZlcnk6XCJSZXBlYXQgZXZlcnk6IFwiLHJlcGVhdE9uOlwiUmVwZWF0IG9uOiBcIixpbnRlcnZhbDpcIiB5ZWFyKHMpXCIsb2Y6XCIgb2YgXCJ9LGVuZDp7bGFiZWw6XCJFbmQ6XCIsbW9iaWxlTGFiZWw6XCJFbmRzXCIsbmV2ZXI6XCJOZXZlclwiLGFmdGVyOlwiQWZ0ZXIgXCIsb2NjdXJyZW5jZTpcIiBvY2N1cnJlbmNlKHMpXCIsb246XCJPbiBcIn0sb2Zmc2V0UG9zaXRpb25zOntmaXJzdDpcImZpcnN0XCIsc2Vjb25kOlwic2Vjb25kXCIsdGhpcmQ6XCJ0aGlyZFwiLGZvdXJ0aDpcImZvdXJ0aFwiLGxhc3Q6XCJsYXN0XCJ9LHdlZWtkYXlzOntkYXk6XCJkYXlcIix3ZWVrZGF5Olwid2Vla2RheVwiLHdlZWtlbmQ6XCJ3ZWVrZW5kIGRheVwifX19LGV2ZW50czpbXCJjaGFuZ2VcIl0sX2luaXRJbnRlcnZhbDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl92YWx1ZTtlLl9jb250YWluZXIuZmluZChcIi5rLXJlY3VyLWludGVydmFsXCIpLmtlbmRvTnVtZXJpY1RleHRCb3goe3NwaW5uZXJzOmUub3B0aW9ucy5zcGlubmVycyx2YWx1ZTp0LmludGVydmFsfHwxLGRlY2ltYWxzOjAsZm9ybWF0OlwiI1wiLG1pbjoxLGNoYW5nZTpmdW5jdGlvbigpe3QuaW50ZXJ2YWw9dGhpcy52YWx1ZSgpLGUuX3RyaWdnZXIoKX19KX0sX3dlZWtEYXlSdWxlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj0odC5fd2Vla0RheS5lbGVtZW50fHx0Ll93ZWVrRGF5KS52YWwoKSxpPSsodC5fd2Vla0RheU9mZnNldC5lbGVtZW50fHx0Ll93ZWVrRGF5T2Zmc2V0KS52YWwoKSxyPW51bGwsbz1udWxsO2V8fChcImRheVwiPT09bj8ocj1JLG89aSk6XCJ3ZWVrZGF5XCI9PT1uPyhyPXosbz1pKTpcIndlZWtlbmRcIj09PW4/KHI9RixvPWkpOnI9W3tvZmZzZXQ6aSxkYXk6K259XSksdC5fdmFsdWUud2Vla0RheXM9cix0Ll92YWx1ZS5wb3NpdGlvbnM9b30sX3dlZWtEYXlWaWV3OmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscj10aGlzLG89ci5fdmFsdWUud2Vla0RheXMsYT1yLl92YWx1ZS5wb3NpdGlvbnMscz1yLl93ZWVrRGF5T2Zmc2V0O28mJihuPW8ubGVuZ3RoLGEmJig3PT09bj8odD1cImRheVwiLGU9YSk6NT09PW4/KHQ9XCJ3ZWVrZGF5XCIsZT1hKToyPT09biYmKHQ9XCJ3ZWVrZW5kXCIsZT1hKSksdHx8KG89b1swXSx0PW8uZGF5LGU9by5vZmZzZXR8fFwiXCIpLGk9cy52YWx1ZT9cInZhbHVlXCI6XCJ2YWxcIixzW2ldKGUpLHIuX3dlZWtEYXlbaV0odCkpfSxfaW5pdFdlZWtEYXk6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLm9wdGlvbnMubWVzc2FnZXMud2Vla2RheXMscj1uLm9wdGlvbnMubWVzc2FnZXMub2Zmc2V0UG9zaXRpb25zLG89bi5fY29udGFpbmVyLmZpbmQoXCIuay1yZWN1ci13ZWVrZGF5XCIpLGE9ZnVuY3Rpb24oKXtuLl93ZWVrRGF5UnVsZSgpLG4uX3RyaWdnZXIoKX07b1swXSYmKG4uX3dlZWtEYXlPZmZzZXQ9bmV3ICQobi5fY29udGFpbmVyLmZpbmQoXCIuay1yZWN1ci13ZWVrZGF5LW9mZnNldFwiKSx7Y2hhbmdlOmEsZGF0YVRleHRGaWVsZDpcInRleHRcIixkYXRhVmFsdWVGaWVsZDpcInZhbHVlXCIsZGF0YVNvdXJjZTpbe3RleHQ6ci5maXJzdCx2YWx1ZTpcIjFcIn0se3RleHQ6ci5zZWNvbmQsdmFsdWU6XCIyXCJ9LHt0ZXh0OnIudGhpcmQsdmFsdWU6XCIzXCJ9LHt0ZXh0OnIuZm91cnRoLHZhbHVlOlwiNFwifSx7dGV4dDpyLmxhc3QsdmFsdWU6XCItMVwifV19KSx0PVt7dGV4dDppLmRheSx2YWx1ZTpcImRheVwifSx7dGV4dDppLndlZWtkYXksdmFsdWU6XCJ3ZWVrZGF5XCJ9LHt0ZXh0Omkud2Vla2VuZCx2YWx1ZTpcIndlZWtlbmRcIn1dLG4uX3dlZWtEYXk9bmV3ICQobyx7dmFsdWU6bi5vcHRpb25zLnN0YXJ0LmdldERheSgpLGNoYW5nZTphLGRhdGFUZXh0RmllbGQ6XCJ0ZXh0XCIsZGF0YVZhbHVlRmllbGQ6XCJ2YWx1ZVwiLGRhdGFTb3VyY2U6dC5jb25jYXQoZS5tYXAoVS5jdWx0dXJlKCkuY2FsZW5kYXIuZGF5cy5uYW1lcyxmdW5jdGlvbihlLHQpe3JldHVybnt0ZXh0OmUsdmFsdWU6dH19KSl9KSxuLl93ZWVrRGF5VmlldygpKX0sX2luaXRXZWVrRGF5czpmdW5jdGlvbigpe3ZhciB0LG4saSxyLG8sYT10aGlzLHM9YS5fdmFsdWUsbD1hLl9jb250YWluZXIuZmluZChcIi5rLXJlY3VyLXdlZWtkYXktY2hlY2tib3hcIik7aWYobFswXSYmKGwub24odnQrYS5fbmFtZXNwYWNlLGZ1bmN0aW9uKCl7cy53ZWVrRGF5cz1lLm1hcChsLmZpbHRlcihcIjpjaGVja2VkXCIpLGZ1bmN0aW9uKGUpe3JldHVybntkYXk6K2UudmFsdWUsb2Zmc2V0OjB9fSksYS5vcHRpb25zLm1vYmlsZXx8YS5fdHJpZ2dlcigpfSkscy53ZWVrRGF5cykpZm9yKGk9MCxyPWwubGVuZ3RoLG89cy53ZWVrRGF5cy5sZW5ndGg7cj5pO2krKylmb3Iobj1sW2ldLHQ9MDtvPnQ7dCsrKW4udmFsdWU9PXMud2Vla0RheXNbdF0uZGF5JiYobi5jaGVja2VkPSEwKX0sX2luaXRNb250aERheTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl92YWx1ZSxuPWUuX2NvbnRhaW5lci5maW5kKFwiLmstcmVjdXItbW9udGhkYXlcIik7blswXSYmKGUuX21vbnRoRGF5PW5ldyBVLnVpLk51bWVyaWNUZXh0Qm94KG4se3NwaW5uZXJzOmUub3B0aW9ucy5zcGlubmVycyxtaW46MSxtYXg6MzEsZGVjaW1hbHM6MCxmb3JtYXQ6XCIjXCIsdmFsdWU6dC5tb250aERheXM/dC5tb250aERheXNbMF06ZS5vcHRpb25zLnN0YXJ0LmdldERhdGUoKSxjaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgbj10aGlzLnZhbHVlKCk7dC5tb250aERheXM9bj9bbl06bixlLl90cmlnZ2VyKCl9fSkpfSxfaW5pdENvdW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX2NvbnRhaW5lci5maW5kKFwiLmstcmVjdXItY291bnRcIiksbj1lLl92YWx1ZTtlLl9jb3VudD10LmtlbmRvTnVtZXJpY1RleHRCb3goe3NwaW5uZXJzOmUub3B0aW9ucy5zcGlubmVycyx2YWx1ZTpuLmNvdW50fHwxLGRlY2ltYWxzOjAsZm9ybWF0OlwiI1wiLG1pbjoxLGNoYW5nZTpmdW5jdGlvbigpe24uY291bnQ9dGhpcy52YWx1ZSgpLGUuX3RyaWdnZXIoKX19KS5kYXRhKFwia2VuZG9OdW1lcmljVGV4dEJveFwiKX0sX2luaXRVbnRpbDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl9jb250YWluZXIuZmluZChcIi5rLXJlY3VyLXVudGlsXCIpLG49ZS5vcHRpb25zLnN0YXJ0LGk9ZS5fdmFsdWUscj1pLnVudGlsO2UuX3VudGlsPXQua2VuZG9EYXRlUGlja2VyKHttaW46ciYmbj5yP3I6bix2YWx1ZTpyfHxuLGNoYW5nZTpmdW5jdGlvbigpe2kudW50aWw9dGhpcy52YWx1ZSgpLGUuX3RyaWdnZXIoKX19KS5kYXRhKFwia2VuZG9EYXRlUGlja2VyXCIpfSxfdHJpZ2dlcjpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5tb2JpbGV8fHRoaXMudHJpZ2dlcihcImNoYW5nZVwiKX19KSxCPVIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztSLmZuLmluaXQuY2FsbChuLGUsdCksbi5faW5pdEZyZXF1ZW5jeSgpLG4uX2luaXRDb250YWluZXIoKSxuLnZhbHVlKG4ub3B0aW9ucy52YWx1ZSl9LG9wdGlvbnM6e25hbWU6XCJSZWN1cnJlbmNlRWRpdG9yXCJ9LGV2ZW50czpbXCJjaGFuZ2VcIl0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fZnJlcXVlbmN5LmRlc3Ryb3koKSxlLl9jb250YWluZXIuZmluZChcImlucHV0W3R5cGU9cmFkaW9dLGlucHV0W3R5cGU9Y2hlY2tib3hdXCIpLm9mZih2dCtlLl9uYW1lc3BhY2UpLFUuZGVzdHJveShlLl9jb250YWluZXIpLFIuZm4uZGVzdHJveS5jYWxsKGUpfSx2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5vcHRpb25zLnRpbWV6b25lO3JldHVybiBlPT09dD9uLl92YWx1ZS5mcmVxP0Uobi5fdmFsdWUsaSk6XCJcIjoobi5fdmFsdWU9RChlLGkpfHx7fSxuLl9mcmVxdWVuY3kudmFsdWUobi5fdmFsdWUuZnJlcXx8XCJcIiksbi5faW5pdFZpZXcobi5fZnJlcXVlbmN5LnZhbHVlKCkpLHQpfSxfaW5pdENvbnRhaW5lcjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZWxlbWVudCxuPWUoJzxkaXYgY2xhc3M9XCJrLXJlY3VyLXZpZXdcIiAvPicpLGk9dC5wYXJlbnQoXCIuay1lZGl0LWZpZWxkXCIpO2lbMF0/bi5pbnNlcnRBZnRlcihpKTp0LmFwcGVuZChuKSx0aGlzLl9jb250YWluZXI9bn0sX2luaXRGcmVxdWVuY3k6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLm9wdGlvbnMscj1pLmZyZXF1ZW5jaWVzLG89aS5tZXNzYWdlcy5mcmVxdWVuY2llcyxhPWUoXCI8aW5wdXQgLz5cIik7cj1lLm1hcChyLGZ1bmN0aW9uKGUpe3JldHVybnt0ZXh0Om9bZV0sdmFsdWU6ZX19KSx0PXJbMF0sdCYmXCJuZXZlclwiPT09dC52YWx1ZSYmKHQudmFsdWU9XCJcIiksbi5lbGVtZW50LmFwcGVuZChhKSxuLl9mcmVxdWVuY3k9bmV3ICQoYSx7ZGF0YVRleHRGaWVsZDpcInRleHRcIixkYXRhVmFsdWVGaWVsZDpcInZhbHVlXCIsZGF0YVNvdXJjZTpyLGNoYW5nZTpmdW5jdGlvbigpe24uX3ZhbHVlPXt9LG4uX2luaXRWaWV3KG4uX2ZyZXF1ZW5jeS52YWx1ZSgpKSxuLnRyaWdnZXIoXCJjaGFuZ2VcIil9fSl9LF9pbml0VmlldzpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5fdmFsdWUscj1uLm9wdGlvbnMsbz17ZnJlcXVlbmN5OmV8fFwibmV2ZXJcIix3ZWVrRGF5Q2hlY2tCb3hlczpNLGZpcnN0V2Vla0RheTpyLmZpcnN0V2Vla0RheSxtZXNzYWdlczpyLm1lc3NhZ2VzW2VdLGVuZDpyLm1lc3NhZ2VzLmVuZH07cmV0dXJuIFUuZGVzdHJveShuLl9jb250YWluZXIpLG4uX2NvbnRhaW5lci5odG1sKFAobykpLGU/KGkuZnJlcT1lLFwid2Vla2x5XCIhPT1lfHxpLndlZWtEYXlzfHwoaS53ZWVrRGF5cz1be2RheTpyLnN0YXJ0LmdldERheSgpLG9mZnNldDowfV0pLG4uX2luaXRJbnRlcnZhbCgpLG4uX2luaXRXZWVrRGF5cygpLG4uX2luaXRNb250aERheSgpLG4uX2luaXRXZWVrRGF5KCksbi5faW5pdE1vbnRoKCksbi5faW5pdENvdW50KCksbi5faW5pdFVudGlsKCksbi5fcGVyaW9kKCksbi5fZW5kKCksdCk6KG4uX3ZhbHVlPXt9LHQpfSxfaW5pdE1vbnRoOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi5fdmFsdWUscj1pLm1vbnRoc3x8W24ub3B0aW9ucy5zdGFydC5nZXRNb250aCgpKzFdLG89bi5fY29udGFpbmVyLmZpbmQoXCIuay1yZWN1ci1tb250aFwiKTtvWzBdJiYodD17Y2hhbmdlOmZ1bmN0aW9uKCl7aS5tb250aHM9Wyt0aGlzLnZhbHVlKCldLG4udHJpZ2dlcihcImNoYW5nZVwiKX0sZGF0YVRleHRGaWVsZDpcInRleHRcIixkYXRhVmFsdWVGaWVsZDpcInZhbHVlXCIsZGF0YVNvdXJjZTplLm1hcChVLmN1bHR1cmUoKS5jYWxlbmRhci5tb250aHMubmFtZXMsZnVuY3Rpb24oZSx0KXtyZXR1cm57dGV4dDplLHZhbHVlOnQrMX19KX0sbi5fbW9udGgxPW5ldyAkKG9bMF0sdCksbi5fbW9udGgyPW5ldyAkKG9bMV0sdCksciYmKHI9clswXSxuLl9tb250aDEudmFsdWUociksbi5fbW9udGgyLnZhbHVlKHIpKSl9LF9lbmQ6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10Ll92YWx1ZSxpPXQuX2NvbnRhaW5lcixyPXQuX25hbWVzcGFjZSxvPWZ1bmN0aW9uKGUpe3QuX3RvZ2dsZUVuZChlLmN1cnJlbnRUYXJnZXQudmFsdWUpLHQudHJpZ2dlcihcImNoYW5nZVwiKX07dC5fYnV0dG9uTmV2ZXI9aS5maW5kKFwiLmstcmVjdXItZW5kLW5ldmVyXCIpLm9uKHZ0K3IsbyksdC5fYnV0dG9uQ291bnQ9aS5maW5kKFwiLmstcmVjdXItZW5kLWNvdW50XCIpLm9uKHZ0K3IsbyksdC5fYnV0dG9uVW50aWw9aS5maW5kKFwiLmstcmVjdXItZW5kLXVudGlsXCIpLm9uKHZ0K3Isbyksbi5jb3VudD9lPVwiY291bnRcIjpuLnVudGlsJiYoZT1cInVudGlsXCIpLHQuX3RvZ2dsZUVuZChlKX0sX3BlcmlvZDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl92YWx1ZSxuPVwibW9udGhseVwiPT09dC5mcmVxLGk9bj9lLl90b2dnbGVNb250aERheTplLl90b2dnbGVZZWFyLHI9XCIuay1yZWN1ci1cIisobj9cIm1vbnRoXCI6XCJ5ZWFyXCIpK1wiLXJhZGlvXCIsbz1lLl9jb250YWluZXIuZmluZChyKTsobnx8XCJ5ZWFybHlcIj09PXQuZnJlcSkmJihvLm9uKHZ0K2UuX25hbWVzcGFjZSxmdW5jdGlvbih0KXtpLmNhbGwoZSx0LmN1cnJlbnRUYXJnZXQudmFsdWUpLGUudHJpZ2dlcihcImNoYW5nZVwiKX0pLGUuX2J1dHRvbk1vbnRoRGF5PW8uZXEoMCksZS5fYnV0dG9uV2Vla0RheT1vLmVxKDEpLGkuY2FsbChlLHQud2Vla0RheXM/XCJ3ZWVrZGF5XCI6XCJtb250aGRheVwiKSl9LF90b2dnbGVFbmQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbz10aGlzO1wiY291bnRcIj09PWU/KG8uX2J1dHRvbkNvdW50LnByb3AoXCJjaGVja2VkXCIsITApLGk9ITAscj0hMSx0PW8uX2NvdW50LnZhbHVlKCksbj1udWxsKTpcInVudGlsXCI9PT1lPyhvLl9idXR0b25VbnRpbC5wcm9wKFwiY2hlY2tlZFwiLCEwKSxpPSExLHI9ITAsdD1udWxsLG49by5fdW50aWwudmFsdWUoKSk6KG8uX2J1dHRvbk5ldmVyLnByb3AoXCJjaGVja2VkXCIsITApLGk9cj0hMSx0PW49bnVsbCksby5fY291bnQuZW5hYmxlKGkpLG8uX3VudGlsLmVuYWJsZShyKSxvLl92YWx1ZS5jb3VudD10LG8uX3ZhbHVlLnVudGlsPW59LF90b2dnbGVNb250aERheTpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMsaT0hMSxyPSEwLG89ITE7XCJtb250aGRheVwiPT09ZT8obi5fYnV0dG9uTW9udGhEYXkucHJvcChcImNoZWNrZWRcIiwhMCksdD1bbi5fbW9udGhEYXkudmFsdWUoKV0saT0hMCxyPSExLG89ITApOihuLl9idXR0b25XZWVrRGF5LnByb3AoXCJjaGVja2VkXCIsITApLHQ9bnVsbCksbi5fd2Vla0RheS5lbmFibGUociksbi5fd2Vla0RheU9mZnNldC5lbmFibGUociksbi5fbW9udGhEYXkuZW5hYmxlKGkpLG4uX3ZhbHVlLm1vbnRoRGF5cz10LG4uX3dlZWtEYXlSdWxlKG8pfSxfdG9nZ2xlWWVhcjpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMsaT0hMSxyPSEwO1wibW9udGhkYXlcIj09PWU/KGk9ITAscj0hMSx0PW4uX21vbnRoMS52YWx1ZSgpKTp0PW4uX21vbnRoMi52YWx1ZSgpLG4uX21vbnRoMS5lbmFibGUoaSksbi5fbW9udGgyLmVuYWJsZShyKSxuLl92YWx1ZS5tb250aHM9W3RdLG4uX3RvZ2dsZU1vbnRoRGF5KGUpfX0pLEcucGx1Z2luKEIpLEw9VS50ZW1wbGF0ZSgnPGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4jOmhlYWRlclRpdGxlIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1maWVsZCBrLXJlY3VyLXBhdHRlcm4gay1zY2hlZHVsZXItdG9vbGJhclwiPjwvZGl2PjxkaXYgY2xhc3M9XCJrLXJlY3VyLXZpZXdcIj48L2Rpdj4nKSxPPVUudGVtcGxhdGUoJyMgaWYgKGZyZXF1ZW5jeSAhPT0gXCJuZXZlclwiKSB7ICM8ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMucmVwZWF0RXZlcnkjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PGlucHV0IGNsYXNzPVwiay1yZWN1ci1pbnRlcnZhbFwiIHBhdHRlcm49XCJcXFxcXFxcXGQqXCIvPiM6bWVzc2FnZXMuaW50ZXJ2YWwjPC9kaXY+IyB9ICMjIGlmIChmcmVxdWVuY3kgPT09IFwid2Vla2x5XCIpIHsgIzxkaXYgY2xhc3M9XCJrLWVkaXQtbGFiZWxcIj48bGFiZWw+IzptZXNzYWdlcy5yZXBlYXRPbiM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj4jPXdlZWtEYXlDaGVja0JveGVzKGZpcnN0V2Vla0RheSkjPC9kaXY+IyB9IGVsc2UgaWYgKGZyZXF1ZW5jeSA9PT0gXCJtb250aGx5XCIpIHsgIzxkaXYgY2xhc3M9XCJrLWVkaXQtbGFiZWxcIj48bGFiZWw+IzptZXNzYWdlcy5yZXBlYXRCeSM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGQgay1zY2hlZHVsZXItdG9vbGJhciBrLXJlcGVhdC1ydWxlXCI+PC9kaXY+PGRpdiBjbGFzcz1cImstbW9udGhkYXktdmlld1wiIHN0eWxlPVwiZGlzcGxheTpub25lXCI+PGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4jOm1lc3NhZ2VzLmRheSM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLW1vbnRoZGF5XCIgcGF0dGVybj1cIlxcXFxcXFxcZCpcIi8+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cImstd2Vla2RheS12aWV3XCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj48ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMuZXZlcnkjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PHNlbGVjdCBjbGFzcz1cImstcmVjdXItd2Vla2RheS1vZmZzZXRcIj48L3NlbGVjdD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMuZGF5IzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1maWVsZFwiPjxzZWxlY3QgY2xhc3M9XCJrLXJlY3VyLXdlZWtkYXlcIj48L3NlbGVjdD48L2Rpdj48L2Rpdj4jIH0gZWxzZSBpZiAoZnJlcXVlbmN5ID09PSBcInllYXJseVwiKSB7ICM8ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMucmVwZWF0QnkjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkIGstc2NoZWR1bGVyLXRvb2xiYXIgay1yZXBlYXQtcnVsZVwiPjwvZGl2PjxkaXYgY2xhc3M9XCJrLW1vbnRoZGF5LXZpZXdcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPjxkaXYgY2xhc3M9XCJrLWVkaXQtbGFiZWxcIj48bGFiZWw+IzptZXNzYWdlcy5kYXkjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PGlucHV0IGNsYXNzPVwiay1yZWN1ci1tb250aGRheVwiIHBhdHRlcm49XCJcXFxcXFxcXGQqXCIvPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJrLXdlZWtkYXktdmlld1wiIHN0eWxlPVwiZGlzcGxheTpub25lXCI+PGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4jOm1lc3NhZ2VzLmV2ZXJ5IzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1maWVsZFwiPjxzZWxlY3QgY2xhc3M9XCJrLXJlY3VyLXdlZWtkYXktb2Zmc2V0XCI+PC9zZWxlY3Q+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4jOm1lc3NhZ2VzLmRheSM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj48c2VsZWN0IGNsYXNzPVwiay1yZWN1ci13ZWVrZGF5XCI+PC9zZWxlY3Q+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4jOm1lc3NhZ2VzLm1vbnRoIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1maWVsZFwiPjxzZWxlY3QgY2xhc3M9XCJrLXJlY3VyLW1vbnRoXCI+PC9zZWxlY3Q+PC9kaXY+IyB9ICMnKSxIPVUudGVtcGxhdGUoJyMgaWYgKGVuZFBhdHRlcm4gPT09IFwiY291bnRcIikgeyAjPGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4jOm1lc3NhZ2VzLmFmdGVyIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1maWVsZFwiPjxpbnB1dCBjbGFzcz1cImstcmVjdXItY291bnRcIiBwYXR0ZXJuPVwiXFxcXFxcXFxkKlwiIC8+PC9kaXY+IyB9IGVsc2UgaWYgKGVuZFBhdHRlcm4gPT09IFwidW50aWxcIikgeyAjPGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4jOm1lc3NhZ2VzLm9uIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1maWVsZFwiPjxpbnB1dCB0eXBlPVwiZGF0ZVwiIGNsYXNzPVwiay1yZWN1ci11bnRpbFwiIC8+PC9kaXY+IyB9ICMnKSxOPVUudGVtcGxhdGUoJzx1bCBjbGFzcz1cImstcmVzZXQgay1oZWFkZXIgay1zY2hlZHVsZXItbmF2aWdhdGlvblwiPiNmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZGF0YVNvdXJjZS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgeyM8bGkgY2xhc3M9XCJrLXN0YXRlLWRlZmF1bHQgIz0gdmFsdWUgPT09IGRhdGFTb3VyY2VbaV0udmFsdWUgPyBcImstc3RhdGUtc2VsZWN0ZWRcIiA6IFwiXCIgI1wiPjxhIHJvbGU9XCJidXR0b25cIiBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstbGlua1wiIGRhdGEtIz1ucyN2YWx1ZT1cIiM9ZGF0YVNvdXJjZVtpXS52YWx1ZSNcIj4jOmRhdGFTb3VyY2VbaV0udGV4dCM8L2E+PC9saT4jfSM8L3VsPicpLFY9Ui5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO1IuZm4uaW5pdC5jYWxsKG4sZSx0KSx0PW4ub3B0aW9ucyxuLl9vcHRpb25UZW1wbGF0ZT1VLnRlbXBsYXRlKCc8b3B0aW9uIHZhbHVlPVwiIzp2YWx1ZSNcIj4jOnRleHQjPC9vcHRpb24+Jyksbi52YWx1ZSh0LnZhbHVlKSxuLl9wYW5lPXQucGFuZSxuLl9pbml0UmVwZWF0QnV0dG9uKCksbi5faW5pdFJlcGVhdEVuZCgpLG4uX2RlZmF1bHRWYWx1ZT1uLl92YWx1ZX0sb3B0aW9uczp7bmFtZTpcIk1vYmlsZVJlY3VycmVuY2VFZGl0b3JcIixhbmltYXRpb25zOntsZWZ0Olwic2xpZGVcIixyaWdodDpcInNsaWRlOnJpZ2h0XCJ9LG1vYmlsZTohMCxtZXNzYWdlczp7Y2FuY2VsOlwiQ2FuY2VsXCIsdXBkYXRlOlwiU2F2ZVwiLGVuZFRpdGxlOlwiUmVwZWF0IGVuZHNcIixyZXBlYXRUaXRsZTpcIlJlcGVhdCBwYXR0ZXJuXCIsaGVhZGVyVGl0bGU6XCJSZXBlYXQgZXZlbnRcIixlbmQ6e3BhdHRlcm5zOntuZXZlcjpcIk5ldmVyXCIsYWZ0ZXI6XCJBZnRlci4uLlwiLG9uOlwiT24uLi5cIn0sbmV2ZXI6XCJOZXZlclwiLGFmdGVyOlwiRW5kIHJlcGVhdCBhZnRlclwiLG9uOlwiRW5kIHJlcGVhdCBvblwifSxkYWlseTp7aW50ZXJ2YWw6XCJcIn0saG91cmx5OntpbnRlcnZhbDpcIlwifSx3ZWVrbHk6e2ludGVydmFsOlwiXCJ9LG1vbnRobHk6e2ludGVydmFsOlwiXCIscmVwZWF0Qnk6XCJSZXBlYXQgYnk6IFwiLGRheU9mTW9udGg6XCJEYXkgb2YgdGhlIG1vbnRoXCIsZGF5T2ZXZWVrOlwiRGF5IG9mIHRoZSB3ZWVrXCIscmVwZWF0RXZlcnk6XCJSZXBlYXQgZXZlcnlcIixldmVyeTpcIkV2ZXJ5XCIsZGF5OlwiRGF5IFwifSx5ZWFybHk6e2ludGVydmFsOlwiXCIscmVwZWF0Qnk6XCJSZXBlYXQgYnk6IFwiLGRheU9mTW9udGg6XCJEYXkgb2YgdGhlIG1vbnRoXCIsZGF5T2ZXZWVrOlwiRGF5IG9mIHRoZSB3ZWVrXCIscmVwZWF0RXZlcnk6XCJSZXBlYXQgZXZlcnk6IFwiLGV2ZXJ5OlwiRXZlcnlcIixtb250aDpcIk1vbnRoXCIsZGF5OlwiRGF5XCJ9fX0sZXZlbnRzOltcImNoYW5nZVwiXSx2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5vcHRpb25zLnRpbWV6b25lO3JldHVybiBlPT09dD9uLl92YWx1ZS5mcmVxP0Uobi5fdmFsdWUsaSk6XCJcIjoobi5fdmFsdWU9RChlLGkpfHx7fSx0KX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX2Rlc3Ryb3lWaWV3KCksVS5kZXN0cm95KHRoaXMuX2VuZEZpZWxkcyksdGhpcy5fcmVwZWF0QnV0dG9uLm9mZih2dCt0aGlzLl9uYW1lc3BhY2UpLFIuZm4uZGVzdHJveS5jYWxsKHRoaXMpfSxfaW5pdFJlcGVhdEJ1dHRvbjpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMubWVzc2FnZXMuZnJlcXVlbmNpZXNbdGhpcy5fdmFsdWUuZnJlcXx8XCJuZXZlclwiXTt0Ll9yZXBlYXRCdXR0b249ZSgnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImstYnV0dG9uIGstc2NoZWR1bGVyLXJlY3VyXCI+JytuK1wiPC9hPlwiKS5vbih2dCt0Ll9uYW1lc3BhY2UsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHQuX2NyZWF0ZVZpZXcoXCJyZXBlYXRcIiksdC5fcGFuZS5uYXZpZ2F0ZShcInJlY3VycmVuY2VcIix0Lm9wdGlvbnMuYW5pbWF0aW9ucy5sZWZ0KX0pLHQuZWxlbWVudC5hcHBlbmQodC5fcmVwZWF0QnV0dG9uKX0sX2luaXRSZXBlYXRFbmQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49ZSgnPGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4nK3Qub3B0aW9ucy5tZXNzYWdlcy5lbmQubW9iaWxlTGFiZWwrXCI8L2xhYmVsPjwvZGl2PlwiKS5pbnNlcnRBZnRlcih0LmVsZW1lbnQucGFyZW50KFwiLmstZWRpdC1maWVsZFwiKSksaT1lKCc8ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PGEgaHJlZj1cIiNcIiBjbGFzcz1cImstYnV0dG9uIGstc2NoZWR1bGVyLXJlY3VyLWVuZFwiPjwvYT48L2Rpdj4nKS5vbih2dCt0Ll9uYW1lc3BhY2UsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHQuX3ZhbHVlLmZyZXEmJih0Ll9jcmVhdGVWaWV3KFwiZW5kXCIpLHQuX3BhbmUubmF2aWdhdGUoXCJyZWN1cnJlbmNlXCIsdC5vcHRpb25zLmFuaW1hdGlvbnMubGVmdCkpfSkuaW5zZXJ0QWZ0ZXIobik7dC5fZW5kRmllbGRzPW4uYWRkKGkpLnRvZ2dsZUNsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiLCF0Ll92YWx1ZS5mcmVxKSx0Ll9lbmRCdXR0b249aS5maW5kKFwiLmstc2NoZWR1bGVyLXJlY3VyLWVuZFwiKS50ZXh0KHQuX2VuZFRleHQoKSl9LF9lbmRUZXh0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fdmFsdWUsdD10aGlzLm9wdGlvbnMubWVzc2FnZXMuZW5kLG49dC5uZXZlcjtyZXR1cm4gZS5jb3VudD9uPVUuZm9ybWF0KFwiezB9IHsxfVwiLHQuYWZ0ZXIsZS5jb3VudCk6ZS51bnRpbCYmKG49VS5mb3JtYXQoXCJ7MH0gezE6ZH1cIix0Lm9uLGUudW50aWwpKSxufSxfaW5pdEZyZXF1ZW5jeTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMubWVzc2FnZXMuZnJlcXVlbmNpZXMsaT1OKHtkYXRhU291cmNlOmUubWFwKHRoaXMub3B0aW9ucy5mcmVxdWVuY2llcyxmdW5jdGlvbihlKXtyZXR1cm57dGV4dDpuW2VdLHZhbHVlOlwibmV2ZXJcIiE9PWU/ZTpcIlwifX0pLHZhbHVlOnQuX3ZhbHVlLmZyZXF8fFwiXCIsbnM6VS5uc30pO3QuX3ZpZXcuZWxlbWVudC5maW5kKFwiLmstcmVjdXItcGF0dGVyblwiKS5hcHBlbmQoaSkub24odnQrdC5fbmFtZXNwYWNlLFwiLmstc2NoZWR1bGVyLW5hdmlnYXRpb24gbGlcIixmdW5jdGlvbihuKXt2YXIgaT1lKHRoaXMpO24ucHJldmVudERlZmF1bHQoKSxpLmFkZENsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiKSx0Ll92YWx1ZT17ZnJlcTppLmNoaWxkcmVuKFwiYVwiKS5hdHRyKFUuYXR0cihcInZhbHVlXCIpKX0sdC5faW5pdFJlcGVhdFZpZXcoKX0pfSxfaW5pdEVuZE5hdmlnYXRpb246ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLm9wdGlvbnMubWVzc2FnZXMuZW5kLnBhdHRlcm5zLHI9bi5fdmFsdWUsbz1cIlwiO3IuY291bnQ/bz1cImNvdW50XCI6ci51bnRpbCYmKG89XCJ1bnRpbFwiKSx0PU4oe2RhdGFTb3VyY2U6W3t0ZXh0OmkubmV2ZXIsdmFsdWU6XCJcIn0se3RleHQ6aS5hZnRlcix2YWx1ZTpcImNvdW50XCJ9LHt0ZXh0Omkub24sdmFsdWU6XCJ1bnRpbFwifV0sdmFsdWU6byxuczpVLm5zfSksbi5fdmlldy5lbGVtZW50LmZpbmQoXCIuay1yZWN1ci1wYXR0ZXJuXCIpLmFwcGVuZCh0KS5vbih2dCtuLl9uYW1lc3BhY2UsXCIuay1zY2hlZHVsZXItbmF2aWdhdGlvbiBsaVwiLGZ1bmN0aW9uKHQpe3ZhciBpPWUodGhpcyksbz1udWxsLGE9bnVsbDt0LnByZXZlbnREZWZhdWx0KCksaS5hZGRDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIiksbi5faW5pdEVuZFZpZXcoaS5jaGlsZHJlbihcImFcIikuYXR0cihVLmF0dHIoXCJ2YWx1ZVwiKSkpLG4uX2NvdW50PyhvPW4uX2NvdW50LnZhbHVlKCksYT1udWxsKTpuLl91bnRpbCYmKG89bnVsbCxhPW4uX3VudGlsLnZhbD9VLnBhcnNlRGF0ZShuLl91bnRpbC52YWwoKSxcInl5eXktTU0tZGRcIik6bi5fdW50aWwudmFsdWUoKSksci5jb3VudD1vLHIudW50aWw9YX0pfSxfY3JlYXRlVmlldzpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9bi5vcHRpb25zLHI9aS5tZXNzYWdlcyxvPXJbXCJyZXBlYXRcIj09PXQ/XCJyZXBlYXRUaXRsZVwiOlwiZW5kVGl0bGVcIl0sYT0nPGRpdiBkYXRhLXJvbGU9XCJ2aWV3XCIgY2xhc3M9XCJrLXBvcHVwLWVkaXQtZm9ybSBrLXNjaGVkdWxlci1lZGl0LWZvcm0gay1tb2JpbGUtbGlzdFwiIGlkPVwicmVjdXJyZW5jZVwiPjxkaXYgZGF0YS1yb2xlPVwiaGVhZGVyXCIgY2xhc3M9XCJrLWhlYWRlclwiPjxhIGhyZWY9XCIjXCIgY2xhc3M9XCJrLWJ1dHRvbiBrLXNjaGVkdWxlci1jYW5jZWxcIj4nK3IuY2FuY2VsK1wiPC9hPlwiK3IuaGVhZGVyVGl0bGUrJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJrLWJ1dHRvbiBrLXNjaGVkdWxlci11cGRhdGVcIj4nK3IudXBkYXRlK1wiPC9hPjwvZGl2PlwiLHM9bi5fcGFuZS52aWV3KCkuaWQ7bi5fdmlldz1uLl9wYW5lLmFwcGVuZChhK0woe2hlYWRlclRpdGxlOm99KSksbi5fdmlldy5lbGVtZW50Lm9uKHZ0K24uX25hbWVzcGFjZSxcImEuay1zY2hlZHVsZXItY2FuY2VsLCBhLmstc2NoZWR1bGVyLXVwZGF0ZVwiLGZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpLGUodGhpcykuaGFzQ2xhc3MoXCJrLXNjaGVkdWxlci11cGRhdGVcIik/KG4udHJpZ2dlcihcImNoYW5nZVwiKSxuLl9kZWZhdWx0VmFsdWU9ZS5leHRlbmQoe30sbi5fdmFsdWUpKTpuLl92YWx1ZT1uLl9kZWZhdWx0VmFsdWU7dmFyIGk9bi5fdmFsdWUuZnJlcTtuLl9lbmRCdXR0b24udGV4dChuLl9lbmRUZXh0KCkpLG4uX2VuZEZpZWxkcy50b2dnbGVDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIiwhaSksbi5fcmVwZWF0QnV0dG9uLnRleHQoci5mcmVxdWVuY2llc1tpfHxcIm5ldmVyXCJdKSxuLl9wYW5lLm9uZShcInZpZXdTaG93XCIsZnVuY3Rpb24oKXtuLl9kZXN0cm95VmlldygpfSksbi5fcGFuZS5uYXZpZ2F0ZShzLG4ub3B0aW9ucy5hbmltYXRpb25zLnJpZ2h0KX0pLG4uX2NvbnRhaW5lcj1uLl92aWV3LmVsZW1lbnQuZmluZChcIi5rLXJlY3VyLXZpZXdcIiksXCJyZXBlYXRcIj09PXQ/KG4uX2luaXRGcmVxdWVuY3koKSxuLl9pbml0UmVwZWF0VmlldygpKToobi5faW5pdEVuZE5hdmlnYXRpb24oKSxuLl9pbml0RW5kVmlldygpKX0sX2Rlc3Ryb3lWaWV3OmZ1bmN0aW9uKCl7dGhpcy5fdmlldyYmKHRoaXMuX3ZpZXcuZGVzdHJveSgpLHRoaXMuX3ZpZXcuZWxlbWVudC5yZW1vdmUoKSksdGhpcy5fdmlldz1udWxsfSxfaW5pdFJlcGVhdFZpZXc6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLG49ZS5fdmFsdWUuZnJlcXx8XCJuZXZlclwiLGk9e2ZyZXF1ZW5jeTpuLHdlZWtEYXlDaGVja0JveGVzOk0sZmlyc3RXZWVrRGF5OmUub3B0aW9ucy5maXJzdFdlZWtEYXksbWVzc2FnZXM6ZS5vcHRpb25zLm1lc3NhZ2VzW25dfSxyPU8oaSksbz1lLl9jb250YWluZXIsYT1lLl92YWx1ZTtyZXR1cm4gVS5kZXN0cm95KG8pLG8uaHRtbChyKSxyPyhcIndlZWtseVwiIT09bnx8YS53ZWVrRGF5c3x8KGEud2Vla0RheXM9W3tkYXk6ZS5vcHRpb25zLnN0YXJ0LmdldERheSgpLG9mZnNldDowfV0pLGUuX2luaXRJbnRlcnZhbCgpLGUuX2luaXRNb250aERheSgpLGUuX2luaXRXZWVrRGF5cygpLGUuX2luaXRXZWVrRGF5KCksZS5faW5pdE1vbnRoKCksZS5fcGVyaW9kKCksdCk6KGUuX3ZhbHVlPXt9LHQpfSxfaW5pdEVuZFZpZXc6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLHI9aS5fdmFsdWU7ZT09PXQmJihyLmNvdW50P2U9XCJjb3VudFwiOnIudW50aWwmJihlPVwidW50aWxcIikpLG49e2VuZFBhdHRlcm46ZSxtZXNzYWdlczppLm9wdGlvbnMubWVzc2FnZXMuZW5kfSxVLmRlc3Ryb3koaS5fY29udGFpbmVyKSxpLl9jb250YWluZXIuaHRtbChIKG4pKSxpLl9pbml0Q291bnQoKSxpLl9pbml0VW50aWwoKX0sX2luaXRXZWVrRGF5OmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi5vcHRpb25zLm1lc3NhZ2VzLndlZWtkYXlzLHI9bi5vcHRpb25zLm1lc3NhZ2VzLm9mZnNldFBvc2l0aW9ucyxvPW4uX2NvbnRhaW5lci5maW5kKFwiLmstcmVjdXItd2Vla2RheVwiKSxhPWZ1bmN0aW9uKCl7bi5fd2Vla0RheVJ1bGUoKSxuLnRyaWdnZXIoXCJjaGFuZ2VcIil9O29bMF0mJihuLl93ZWVrRGF5T2Zmc2V0PW4uX2NvbnRhaW5lci5maW5kKFwiLmstcmVjdXItd2Vla2RheS1vZmZzZXRcIikuaHRtbChuLl9vcHRpb25zKFt7dGV4dDpyLmZpcnN0LHZhbHVlOlwiMVwifSx7dGV4dDpyLnNlY29uZCx2YWx1ZTpcIjJcIn0se3RleHQ6ci50aGlyZCx2YWx1ZTpcIjNcIn0se3RleHQ6ci5mb3VydGgsdmFsdWU6XCI0XCJ9LHt0ZXh0OnIubGFzdCx2YWx1ZTpcIi0xXCJ9XSkpLmNoYW5nZShhKSx0PVt7dGV4dDppLmRheSx2YWx1ZTpcImRheVwifSx7dGV4dDppLndlZWtkYXksdmFsdWU6XCJ3ZWVrZGF5XCJ9LHt0ZXh0Omkud2Vla2VuZCx2YWx1ZTpcIndlZWtlbmRcIn1dLHQ9dC5jb25jYXQoZS5tYXAoVS5jdWx0dXJlKCkuY2FsZW5kYXIuZGF5cy5uYW1lcyxmdW5jdGlvbihlLHQpe3JldHVybnt0ZXh0OmUsdmFsdWU6dH19KSksbi5fd2Vla0RheT1vLmh0bWwobi5fb3B0aW9ucyh0KSkuY2hhbmdlKGEpLnZhbChuLm9wdGlvbnMuc3RhcnQuZ2V0RGF5KCkpLG4uX3dlZWtEYXlWaWV3KCkpfSxfaW5pdE1vbnRoOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi5fdmFsdWUscj1uLm9wdGlvbnMuc3RhcnQsbz1pLm1vbnRoc3x8W3IuZ2V0TW9udGgoKSsxXSxhPW4uX2NvbnRhaW5lci5maW5kKFwiLmstcmVjdXItbW9udGhcIikscz1VLmN1bHR1cmUoKS5jYWxlbmRhci5tb250aHMubmFtZXM7YVswXSYmKHQ9ZS5tYXAocyxmdW5jdGlvbihlLHQpe3JldHVybnt0ZXh0OmUsdmFsdWU6dCsxfX0pLGEuaHRtbChuLl9vcHRpb25zKHQpKS5jaGFuZ2UoZnVuY3Rpb24oKXtpLm1vbnRocz1bK3RoaXMudmFsdWVdfSksbi5fbW9udGhTZWxlY3Q9YSxvJiZhLnZhbChvWzBdKSl9LF9wZXJpb2Q6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscj10aGlzLG89ci5fdmFsdWUsYT1yLl9jb250YWluZXIscz1yLm9wdGlvbnMubWVzc2FnZXNbby5mcmVxXSxsPWEuZmluZChcIi5rLXJlcGVhdC1ydWxlXCIpLGM9YS5maW5kKFwiLmstd2Vla2RheS12aWV3XCIpLGQ9YS5maW5kKFwiLmstbW9udGhkYXktdmlld1wiKTtsWzBdJiYodD1vLndlZWtEYXlzP1wid2Vla2RheVwiOlwibW9udGhkYXlcIixuPU4oe3ZhbHVlOnQsZGF0YVNvdXJjZTpbe3RleHQ6cy5kYXlPZk1vbnRoLHZhbHVlOlwibW9udGhkYXlcIn0se3RleHQ6cy5kYXlPZldlZWssdmFsdWU6XCJ3ZWVrZGF5XCJ9XSxuczpVLm5zfSksaT1mdW5jdGlvbihlKXt2YXIgdD1yLl93ZWVrRGF5LnZhbCgpLG49ci5fd2Vla0RheU9mZnNldC52YWwoKSxpPXIuX21vbnRoRGF5LnZhbHVlKCksYT1yLl9tb250aFNlbGVjdD9yLl9tb250aFNlbGVjdC52YWwoKTpudWxsO1wibW9udGhkYXlcIj09PWU/KG8ud2Vla0RheXM9bnVsbCxvLm1vbnRoRGF5cz1pP1tpXTppLG8ubW9udGhzPWE/WythXTphLGMuaGlkZSgpLGQuc2hvdygpKTooby5tb250aERheXM9bnVsbCxvLm1vbnRocz1hP1srYV06YSxvLndlZWtEYXlzPVt7b2Zmc2V0OituLGRheTordH1dLGMuc2hvdygpLGQuaGlkZSgpKX0sbC5hcHBlbmQobikub24odnQrci5fbmFtZXNwYWNlLFwiLmstc2NoZWR1bGVyLW5hdmlnYXRpb24gbGlcIixmdW5jdGlvbih0KXt2YXIgbixyPWUodGhpcykuYWRkQ2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIpO3QucHJldmVudERlZmF1bHQoKSxyLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIpLG49ci5jaGlsZHJlbihcImFcIikuYXR0cihVLmF0dHIoXCJ2YWx1ZVwiKSksaShuKX0pLGkodCkpfSxfaW5pdFVudGlsOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX2NvbnRhaW5lci5maW5kKFwiLmstcmVjdXItdW50aWxcIiksbj1lLm9wdGlvbnMuc3RhcnQsaT1lLl92YWx1ZSxyPWkudW50aWwsbz1yJiZuPnI/cjpuO2UuX3VudGlsPVUuc3VwcG9ydC5pbnB1dC5kYXRlP3QuYXR0cihcIm1pblwiLFUudG9TdHJpbmcobyxcInl5eXktTU0tZGRcIikpLnZhbChVLnRvU3RyaW5nKHJ8fG4sXCJ5eXl5LU1NLWRkXCIpKS5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7aS51bnRpbD1VLnBhcnNlRGF0ZSh0aGlzLnZhbHVlLFwieXl5eS1NTS1kZFwiKX0pOnQua2VuZG9EYXRlUGlja2VyKHttaW46byx2YWx1ZTpyfHxuLGNoYW5nZTpmdW5jdGlvbigpe2kudW50aWw9dGhpcy52YWx1ZSgpfX0pLmRhdGEoXCJrZW5kb0RhdGVQaWNrZXJcIil9LF9vcHRpb25zOmZ1bmN0aW9uKGUsdCl7dmFyIG49MCxpPVwiXCIscj1lLmxlbmd0aCxvPXRoaXMuX29wdGlvblRlbXBsYXRlO2Zvcih0JiYoaSs9byh7dmFsdWU6XCJcIix0ZXh0OnR9KSk7cj5uO24rKylpKz1vKGVbbl0pO3JldHVybiBpfX0pLEcucGx1Z2luKFYpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7dmFyIHQ9bmV3IERhdGUoMTk4MCwxLDEsMCwwLDApO3JldHVybiBsKHQscChlKSksdH1mdW5jdGlvbiBpKGUsdCxuKXtyZXR1cm4gZT49dCYmbj49ZX1mdW5jdGlvbiByKGUpe3ZhciB0PVtdLG49ZS53b3JrV2Vla1N0YXJ0O2Zvcih0LnB1c2gobik7ZS53b3JrV2Vla0VuZCE9bjspbj42P24tPTc6bisrLHQucHVzaChuKTtyZXR1cm4gdH1mdW5jdGlvbiBvKGUpe3ZhciB0LG49MDtpZihlLmNvbHVtbnMpe2Zvcih0PTA7ZS5jb2x1bW5zLmxlbmd0aD50O3QrKyluKz1vKGUuY29sdW1uc1t0XSk7cmV0dXJuIGUuY29sc3Bhbj1uLG59cmV0dXJuIGUuY29sc3Bhbj0xLDF9dmFyIGE9d2luZG93LmtlbmRvLHM9YS51aSxsPWEuZGF0ZS5zZXRUaW1lLGM9cy5TY2hlZHVsZXJWaWV3LGQ9ZS5leHRlbmQsdT1lLnByb3h5LGg9YS5kYXRlLmdldERhdGUscD1hLmRhdGUuZ2V0TWlsbGlzZWNvbmRzLGY9YS5kYXRlLk1TX1BFUl9EQVksZz1hLmRhdGUuTVNfUEVSX01JTlVURSxtPVwiLmtlbmRvVGltZWxpbmVWaWV3XCIsdj1hLnRlbXBsYXRlKCc8ZGl2PjxkaXYgY2xhc3M9XCJrLWV2ZW50LXRlbXBsYXRlIGstZXZlbnQtdGltZVwiPiM6a2VuZG8uZm9ybWF0KFwiezA6dH0gLSB7MTp0fVwiLCBzdGFydCwgZW5kKSM8L2Rpdj48ZGl2IGNsYXNzPVwiay1ldmVudC10ZW1wbGF0ZVwiPiR7dGl0bGV9PC9kaXY+PC9kaXY+JyksXz1hLnRlbXBsYXRlKFwiPHNwYW4gY2xhc3M9J2stbGluayBrLW5hdi1kYXknPiM9a2VuZG8udG9TdHJpbmcoZGF0ZSwgJ2RkZCBNL2RkJykjPC9zcGFuPlwiKSx5PSc8ZGl2IHJvbGU9XCJncmlkY2VsbFwiIGFyaWEtc2VsZWN0ZWQ9XCJmYWxzZVwiIGRhdGEtIz1ucyN1aWQ9XCIjPXVpZCNcIiNpZiAocmVzb3VyY2VzWzBdKSB7ICNzdHlsZT1cImJhY2tncm91bmQtY29sb3I6Iz1yZXNvdXJjZXNbMF0uY29sb3IjOyBib3JkZXItY29sb3I6ICM9cmVzb3VyY2VzWzBdLmNvbG9yI1wiY2xhc3M9XCJrLWV2ZW50Iz1pbnZlcnNlQ29sb3IgPyBcIiBrLWV2ZW50LWludmVyc2VcIiA6IFwiXCIjXCIgI30gZWxzZSB7I2NsYXNzPVwiay1ldmVudFwiI30jPjxzcGFuIGNsYXNzPVwiay1ldmVudC1hY3Rpb25zXCI+IyBpZihkYXRhLnRhaWwpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LXdcIj48L3NwYW4+I30jIyBpZihkYXRhLmlzRXhjZXB0aW9uKCkpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWV4Y2VwdGlvblwiPjwvc3Bhbj4jIH0gZWxzZSBpZihkYXRhLmlzUmVjdXJyaW5nKCkpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLXJlZnJlc2hcIj48L3NwYW4+IyB9ICM8L3NwYW4+ezB9PHNwYW4gY2xhc3M9XCJrLWV2ZW50LWFjdGlvbnNcIj4jaWYgKHNob3dEZWxldGUpIHsjPGEgaHJlZj1cIlxcXFwjXCIgY2xhc3M9XCJrLWxpbmsgay1ldmVudC1kZWxldGVcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLXNpLWNsb3NlXCI+PC9zcGFuPjwvYT4jfSMjIGlmKGRhdGEuaGVhZCkgeyM8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctZVwiPjwvc3Bhbj4jfSM8L3NwYW4+I2lmKHJlc2l6YWJsZSAmJiAhZGF0YS50YWlsKXsjPHNwYW4gY2xhc3M9XCJrLXJlc2l6ZS1oYW5kbGUgay1yZXNpemUtd1wiPjwvc3Bhbj4jfSMjaWYocmVzaXphYmxlICYmICFkYXRhLmhlYWQpeyM8c3BhbiBjbGFzcz1cImstcmVzaXplLWhhbmRsZSBrLXJlc2l6ZS1lXCI+PC9zcGFuPiN9IzwvZGl2Picsdz1jLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7Yy5mbi5pbml0LmNhbGwobixlLHQpLG4udGl0bGU9bi5vcHRpb25zLnRpdGxlfHxuLm9wdGlvbnMubmFtZSxuLl93b3JrRGF5cz1yKG4ub3B0aW9ucyksbi5fdGVtcGxhdGVzKCksbi5fZWRpdGFibGUoKSxuLmNhbGN1bGF0ZURhdGVSYW5nZSgpLG4uX2dyb3VwcygpLG4uX2N1cnJlbnRUaW1lKCl9LG5hbWU6XCJ0aW1lbGluZVwiLF9jdXJyZW50VGltZU1hcmtlclVwZGF0ZXI6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscixvLHMsbCxjLGQsdSxoLHA9bmV3IERhdGUsZj10aGlzLm9wdGlvbnM7aWYodGhpcy5kYXRlc0hlYWRlci5maW5kKFwiLmstY3VycmVudC10aW1lXCIpLnJlbW92ZSgpLHRoaXMuX2lzSW5EYXRlU2xvdCh7c3RhcnQ6cCxlbmQ6cH0pKWZvcihmLmN1cnJlbnRUaW1lTWFya2VyLnVzZUxvY2FsVGltZXpvbmU9PT0hMSYmKHQ9Zi5kYXRhU291cmNlLm9wdGlvbnMuc2NoZW1hLnRpbWV6b25lLGYuZGF0YVNvdXJjZSYmdCYmKG49YS50aW1lem9uZS5vZmZzZXQocCx0KSxwPWEudGltZXpvbmUuY29udmVydChwLHAuZ2V0VGltZXpvbmVPZmZzZXQoKSxuKSkpLGk9Zi5ncm91cCYmXCJ2ZXJ0aWNhbFwiIT1mLmdyb3VwLm9yaWVudGF0aW9uP3RoaXMuZ3JvdXBzLmxlbmd0aDoxLHI9MDtpPnI7cisrKXtpZihvPXRoaXMuZ3JvdXBzW3JdLHM9YS5kYXRlLnRvVXRjVGltZShwKSxsPW8udGltZVNsb3RSYW5nZXMocyxzKzEpLDA9PT1sLmxlbmd0aClyZXR1cm47Yz1sWzBdLmNvbGxlY3Rpb24sZD1jLnNsb3RCeVN0YXJ0RGF0ZShwKSxkJiYodT1lKFwiPGRpdiBjbGFzcz0nay1jdXJyZW50LXRpbWUnPjwvZGl2PlwiKSxoPXRoaXMuZGF0ZXNIZWFkZXIsdS5hcHBlbmRUbyhoLmZpbmQoXCIuay1zY2hlZHVsZXItaGVhZGVyLXdyYXBcIikpLmNzcyh7bGVmdDpNYXRoLnJvdW5kKGxbMF0uaW5uZXJSZWN0KHAsbmV3IERhdGUocC5nZXRUaW1lKCkrMSksITEpLmxlZnQpLHdpZHRoOlwiMXB4XCIsYm90dG9tOlwiMXB4XCIsdG9wOjB9KSl9fSxfY3VycmVudFRpbWU6ZnVuY3Rpb24oKXt2YXIgZSxuPXRoaXMsaT1uLm9wdGlvbnMuY3VycmVudFRpbWVNYXJrZXI7aSE9PSExJiZpLnVwZGF0ZUludGVydmFsIT09dCYmKGU9aS51cGRhdGVJbnRlcnZhbCxuLl9jdXJyZW50VGltZU1hcmtlclVwZGF0ZXIoKSxuLl9jdXJyZW50VGltZVVwZGF0ZVRpbWVyPXNldEludGVydmFsKHUodGhpcy5fY3VycmVudFRpbWVNYXJrZXJVcGRhdGVyLG4pLGUpKX0sX2VkaXRhYmxlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmVkaXRhYmxlJiYodGhpcy5faXNNb2JpbGUoKT90aGlzLl90b3VjaEVkaXRhYmxlKCk6dGhpcy5fbW91c2VFZGl0YWJsZSgpKX0sX21vdXNlRWRpdGFibGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QuZWxlbWVudC5vbihcImNsaWNrXCIrbSxcIi5rLWV2ZW50IGE6aGFzKC5rLXNpLWNsb3NlKVwiLGZ1bmN0aW9uKG4pe3QudHJpZ2dlcihcInJlbW92ZVwiLHt1aWQ6ZSh0aGlzKS5jbG9zZXN0KFwiLmstZXZlbnRcIikuYXR0cihhLmF0dHIoXCJ1aWRcIikpfSksbi5wcmV2ZW50RGVmYXVsdCgpfSksdC5vcHRpb25zLmVkaXRhYmxlLmNyZWF0ZSE9PSExJiZ0LmVsZW1lbnQub24oXCJkYmxjbGlja1wiK20sXCIuay1zY2hlZHVsZXItY29udGVudCB0ZFwiLGZ1bmN0aW9uKGUpe3ZhciBuLGk9dC5fc2xvdEJ5UG9zaXRpb24oZS5wYWdlWCxlLnBhZ2VZKTtpJiYobj10Ll9yZXNvdXJjZUJ5U2xvdChpKSx0LnRyaWdnZXIoXCJhZGRcIix7ZXZlbnRJbmZvOmQoe3N0YXJ0Omkuc3RhcnREYXRlKCksZW5kOmkuZW5kRGF0ZSgpfSxuKX0pKSxlLnByZXZlbnREZWZhdWx0KCl9KSx0Lm9wdGlvbnMuZWRpdGFibGUudXBkYXRlIT09ITEmJnQuZWxlbWVudC5vbihcImRibGNsaWNrXCIrbSxcIi5rLWV2ZW50XCIsZnVuY3Rpb24obil7dC50cmlnZ2VyKFwiZWRpdFwiLHt1aWQ6ZSh0aGlzKS5jbG9zZXN0KFwiLmstZXZlbnRcIikuYXR0cihhLmF0dHIoXCJ1aWRcIikpfSksbi5wcmV2ZW50RGVmYXVsdCgpfSl9LF90b3VjaEVkaXRhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0Lm9wdGlvbnMuZWRpdGFibGUuY3JlYXRlIT09ITEmJih0Ll9hZGRVc2VyRXZlbnRzPW5ldyBhLlVzZXJFdmVudHModC5lbGVtZW50LHtmaWx0ZXI6XCIuay1zY2hlZHVsZXItY29udGVudCB0ZFwiLHRhcDpmdW5jdGlvbihlKXt2YXIgbixpPXQuX3Nsb3RCeVBvc2l0aW9uKGUueC5sb2NhdGlvbixlLnkubG9jYXRpb24pO2kmJihuPXQuX3Jlc291cmNlQnlTbG90KGkpLHQudHJpZ2dlcihcImFkZFwiLHtldmVudEluZm86ZCh7c3RhcnQ6aS5zdGFydERhdGUoKSxlbmQ6aS5lbmREYXRlKCl9LG4pfSkpLGUucHJldmVudERlZmF1bHQoKX19KSksdC5vcHRpb25zLmVkaXRhYmxlLnVwZGF0ZSE9PSExJiYodC5fZWRpdFVzZXJFdmVudHM9bmV3IGEuVXNlckV2ZW50cyh0LmVsZW1lbnQse2ZpbHRlcjpcIi5rLWV2ZW50XCIsdGFwOmZ1bmN0aW9uKG4pe3ZhciBpPWUobi50YXJnZXQpLmNsb3Nlc3QoXCIuay1ldmVudFwiKTtpLmhhc0NsYXNzKFwiay1ldmVudC1hY3RpdmVcIil8fHQudHJpZ2dlcihcImVkaXRcIix7dWlkOmkuYXR0cihhLmF0dHIoXCJ1aWRcIikpfSksbi5wcmV2ZW50RGVmYXVsdCgpfX0pKX0sX3Nsb3RCeVBvc2l0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8scz10aGlzLmNvbnRlbnQsbD1zLm9mZnNldCgpO2ZvcihlLT1sLmxlZnQsdC09bC50b3AsdGhpcy5faXNSdGw/KG89YS5zdXBwb3J0LmJyb3dzZXIsby5tb3ppbGxhPyhlKz1zWzBdLnNjcm9sbFdpZHRoLXNbMF0ub2Zmc2V0V2lkdGgsZSs9c1swXS5zY3JvbGxMZWZ0KTpvLm1zaWU/KGUtPXMuc2Nyb2xsTGVmdCgpLGUrPXNbMF0uc2Nyb2xsV2lkdGgtdGhpcy5jb250ZW50WzBdLm9mZnNldFdpZHRoKTpvLndlYmtpdCYmKGUrPXNbMF0uc2Nyb2xsTGVmdCkpOmUrPXNbMF0uc2Nyb2xsTGVmdCx0Kz1zWzBdLnNjcm9sbFRvcCxlPU1hdGguY2VpbChlKSx0PU1hdGguY2VpbCh0KSxyPTA7dGhpcy5ncm91cHMubGVuZ3RoPnI7cisrKWlmKGk9dGhpcy5ncm91cHNbcl0sbj1pLnRpbWVTbG90QnlQb3NpdGlvbihlLHQpKXJldHVybiBuO3JldHVybiBudWxsfSxvcHRpb25zOntuYW1lOlwiVGltZWxpbmVWaWV3XCIsdGl0bGU6XCJUaW1lbGluZVwiLHNlbGVjdGVkRGF0ZUZvcm1hdDpcInswOkR9XCIsZGF0ZTphLmRhdGUudG9kYXkoKSxzdGFydFRpbWU6YS5kYXRlLnRvZGF5KCksZW5kVGltZTphLmRhdGUudG9kYXkoKSxzaG93V29ya0hvdXJzOiExLG1pbm9yVGlja0NvdW50OjIsZWRpdGFibGU6ITAsd29ya0RheVN0YXJ0Om5ldyBEYXRlKDE5ODAsMSwxLDgsMCwwKSx3b3JrRGF5RW5kOm5ldyBEYXRlKDE5ODAsMSwxLDE3LDAsMCksd29ya1dlZWtTdGFydDoxLHdvcmtXZWVrRW5kOjUsbWFqb3JUaWNrOjYwLGV2ZW50SGVpZ2h0OjI1LGNvbHVtbldpZHRoOjEwMCxncm91cEhlYWRlclRlbXBsYXRlOlwiIz10ZXh0I1wiLG1ham9yVGltZUhlYWRlclRlbXBsYXRlOlwiIz1rZW5kby50b1N0cmluZyhkYXRlLCAndCcpI1wiLHNsb3RUZW1wbGF0ZTpcIiZuYnNwO1wiLGV2ZW50VGVtcGxhdGU6dixkYXRlSGVhZGVyVGVtcGxhdGU6Xyxmb290ZXI6e2NvbW1hbmQ6XCJ3b3JrRGF5XCJ9LGN1cnJlbnRUaW1lTWFya2VyOnt1cGRhdGVJbnRlcnZhbDoxZTQsdXNlTG9jYWxUaW1lem9uZTohMH0sbWVzc2FnZXM6e2RlZmF1bHRSb3dUZXh0OlwiQWxsIGV2ZW50c1wiLHNob3dGdWxsRGF5OlwiU2hvdyBmdWxsIGRheVwiLHNob3dXb3JrRGF5OlwiU2hvdyBidXNpbmVzcyBob3Vyc1wifX0sZXZlbnRzOltcInJlbW92ZVwiLFwiYWRkXCIsXCJlZGl0XCJdLF90ZW1wbGF0ZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMsdD1kKHt9LGEuVGVtcGxhdGUsZS50ZW1wbGF0ZVNldHRpbmdzKTt0aGlzLmV2ZW50VGVtcGxhdGU9dGhpcy5fZXZlbnRUbXBsKGUuZXZlbnRUZW1wbGF0ZSx5KSx0aGlzLm1ham9yVGltZUhlYWRlclRlbXBsYXRlPWEudGVtcGxhdGUoZS5tYWpvclRpbWVIZWFkZXJUZW1wbGF0ZSx0KSx0aGlzLmRhdGVIZWFkZXJUZW1wbGF0ZT1hLnRlbXBsYXRlKGUuZGF0ZUhlYWRlclRlbXBsYXRlLHQpLHRoaXMuc2xvdFRlbXBsYXRlPWEudGVtcGxhdGUoZS5zbG90VGVtcGxhdGUsdCksdGhpcy5ncm91cEhlYWRlclRlbXBsYXRlPWEudGVtcGxhdGUoZS5ncm91cEhlYWRlclRlbXBsYXRlLHQpfSxfcmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZT1lfHxbXSx0Ll9kYXRlcz1lLHQuX3N0YXJ0RGF0ZT1lWzBdLHQuX2VuZERhdGU9ZVtlLmxlbmd0aC0xfHwwXSx0Ll9jYWxjdWxhdGVTbG90UmFuZ2VzKCksdC5jcmVhdGVMYXlvdXQodC5fbGF5b3V0KGUpKSx0Ll9jb250ZW50KGUpLHQuX2Zvb3RlcigpLHQuX3NldENvbnRlbnRXaWR0aCgpLHQucmVmcmVzaExheW91dCgpLHRoaXMudGltZXNIZWFkZXIuZmluZChcInRhYmxlIHRyOmxhc3RcIikuaGlkZSgpLHRoaXMuZGF0ZXNIZWFkZXIuZmluZChcInRhYmxlIHRyOmxhc3RcIikuaGlkZSgpfSxfc2V0Q29udGVudFdpZHRoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jb250ZW50LHQ9ZS53aWR0aCgpLG49dGhpcy5jb250ZW50LmZpbmQoXCJ0YWJsZVwiKSxpPW4uZmluZChcInRyOmZpcnN0XCIpLmNoaWxkcmVuKCkubGVuZ3RoLHI9MTAwLG89aSp0aGlzLm9wdGlvbnMuY29sdW1uV2lkdGg7bz50JiYocj1NYXRoLmNlaWwoby90KjEwMCkpLG4uYWRkKHRoaXMuZGF0ZXNIZWFkZXIuZmluZChcInRhYmxlXCIpKS5jc3MoXCJ3aWR0aFwiLHIrXCIlXCIpfSxfY2FsY3VsYXRlU2xvdFJhbmdlczpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHI9dGhpcy5fZGF0ZXMsbz10aGlzLnN0YXJ0VGltZSgpLHM9dGhpcy5lbmRUaW1lKCk7Zm9yKHAocyk9PT1wKGEuZGF0ZS5nZXREYXRlKHMpKSYmKHM9YS5kYXRlLmdldERhdGUocyksbChzLGYtMSkpLHM9cChzKSxvPXAobyksZT1bXSx0PTA7ci5sZW5ndGg+dDt0Kyspbj1oKHJbdF0pLGwobixvKSxpPWgoclt0XSksbChpLHMpLGUucHVzaCh7c3RhcnQ6YS5kYXRlLnRvVXRjVGltZShuKSxlbmQ6YS5kYXRlLnRvVXRjVGltZShpKX0pO3RoaXMuX3Nsb3RSYW5nZXM9ZX0sX2ZvclRpbWVSYW5nZTpmdW5jdGlvbihlLHQsaSxyKXt2YXIgbyxhLHMsYyxkLHUsaCxtLHYsXyx5LHcsYixrLHgsQyxTLFQ7Zm9yKGU9bihlKSx0PW4odCksbz10aGlzLGE9cChlKSxzPXAodCksYz1vLm9wdGlvbnMubWlub3JUaWNrQ291bnQsZD1vLm9wdGlvbnMubWFqb3JUaWNrKmcsdT1kL2N8fDEsaD1uZXcgRGF0ZSgrZSksbT1oLmdldERhdGUoKSxfPTAsdz1cIlwiLHk9Zi91LGEhPXMmJihhPnMmJihzKz1mKSx5PShzLWEpL3UpLHk9TWF0aC5yb3VuZCh5KTt5Pl87XysrKWI9XyUoZC91KSxrPTA9PT1iLHg9Yy0xPmIsQz1iPT09Yy0xLFM9Yyx5JWMhPT0wJiYoVD1jPnktKF8rMSksayYmVCYmKFM9eSVjKSksdys9aShoLGsseCxDLFMpLGwoaCx1LCExKTtyZXR1cm4gcyYmKHY9cChoKSxtPGguZ2V0RGF0ZSgpJiYodis9Ziksdj5zJiYoaD1uZXcgRGF0ZSgrdCkpKSxyJiYodys9cihoKSksd30sX2xheW91dDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscj1bXSxzPVtdLGw9dGhpcyxjPVt7dGV4dDpsLm9wdGlvbnMubWVzc2FnZXMuZGVmYXVsdFJvd1RleHR9XSxkPVtdO2Zvcih0PTA7bC5vcHRpb25zLm1pbm9yVGlja0NvdW50PnQ7dCsrKWQucHVzaCh7dGV4dDpcIlwiLGNsYXNzTmFtZTpcIlwifSk7Zm9yKHRoaXMuX2ZvclRpbWVSYW5nZShsLnN0YXJ0VGltZSgpLGwuZW5kVGltZSgpLGZ1bmN0aW9uKGUsdCxuLGksYSl7dmFyIHMsYz1sLm1ham9yVGltZUhlYWRlclRlbXBsYXRlO3QmJihzPXt0ZXh0OmMoe2RhdGU6ZX0pLGNsYXNzTmFtZTppP1wiay1zbG90LWNlbGxcIjpcIlwiLGNvbHVtbnM6ZC5zbGljZSgwLGEpfSxvKHMpLHIucHVzaChzKSl9KSxuPTA7ZS5sZW5ndGg+bjtuKyspcy5wdXNoKHt0ZXh0OmEuZm9ybWF0KFwiezA6bX1cIixlW25dKSxjbGFzc05hbWU6XCJrLXNsb3QtY2VsbFwiLGNvbHVtbnM6ci5zbGljZSgwKX0pO3JldHVybiBpPXRoaXMuZ3JvdXBlZFJlc291cmNlcyxpLmxlbmd0aCYmKFwidmVydGljYWxcIj09PXRoaXMuX2dyb3VwT3JpZW50YXRpb24oKT9jPWwuX2NyZWF0ZVJvd3NMYXlvdXQoaSxudWxsLHRoaXMuZ3JvdXBIZWFkZXJUZW1wbGF0ZSk6cz1sLl9jcmVhdGVDb2x1bW5zTGF5b3V0KGkscyx0aGlzLmdyb3VwSGVhZGVyVGVtcGxhdGUpKSx7Y29sdW1uczpzLHJvd3M6Y319LF9mb290ZXI6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscj10aGlzLm9wdGlvbnM7ci5mb290ZXIhPT0hMSYmKHQ9JzxkaXYgY2xhc3M9XCJrLWhlYWRlciBrLXNjaGVkdWxlci1mb290ZXJcIj4nLG49ci5mb290ZXIuY29tbWFuZCxuJiZcIndvcmtEYXlcIj09PW4/KHQrPSc8dWwgY2xhc3M9XCJrLXJlc2V0IGstaGVhZGVyXCI+Jyx0Kz0nPGxpIGNsYXNzPVwiay1zdGF0ZS1kZWZhdWx0IGstc2NoZWR1bGVyLWZ1bGxkYXlcIj48YSBocmVmPVwiI1wiIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWNsb2NrXCI+PC9zcGFuPicsdCs9KHIuc2hvd1dvcmtIb3Vycz9yLm1lc3NhZ2VzLnNob3dGdWxsRGF5OnIubWVzc2FnZXMuc2hvd1dvcmtEYXkpK1wiPC9hPjwvbGk+XCIsdCs9XCI8L3VsPlwiKTp0Kz1cIiZuYnNwO1wiLHQrPVwiPC9kaXY+XCIsdGhpcy5mb290ZXI9ZSh0KS5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpLGk9dGhpcyx0aGlzLmZvb3Rlci5vbihcImNsaWNrXCIrbSxcIi5rLXNjaGVkdWxlci1mdWxsZGF5XCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGkudHJpZ2dlcihcIm5hdmlnYXRlXCIse3ZpZXc6aS5uYW1lfHxyLm5hbWUsZGF0ZTppLnN0YXJ0RGF0ZSgpLGlzV29ya0RheTohci5zaG93V29ya0hvdXJzfSl9KSl9LF9jb2x1bW5Db3VudEZvckxldmVsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY29sdW1uTGV2ZWxzW2VdO3JldHVybiB0P3QubGVuZ3RoOjB9LF9yb3dDb3VudEZvckxldmVsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucm93TGV2ZWxzW2VdO3JldHVybiB0P3QubGVuZ3RoOjB9LF9pc1dvcmtEYXk6ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLmdldERheSgpLGk9dGhpcy5fd29ya0RheXM7Zm9yKHQ9MDtpLmxlbmd0aD50O3QrKylpZihpW3RdPT09bilyZXR1cm4hMDtyZXR1cm4hMX0sX2NvbnRlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxzPXRoaXMsbD1zLm9wdGlvbnMsYz1zLnN0YXJ0VGltZSgpLGQ9dGhpcy5lbmRUaW1lKCksdT0xLGg9MSxwPWUubGVuZ3RoLGY9XCJcIixnPXRoaXMuZ3JvdXBlZFJlc291cmNlcyxtPXRoaXMuc2xvdFRlbXBsYXRlLHY9ITE7Zm9yKGcubGVuZ3RoJiYodj1cInZlcnRpY2FsXCI9PT1zLl9ncm91cE9yaWVudGF0aW9uKCksdj9oPXMuX2dyb3VwQ291bnQoKTp1PXMuX2dyb3VwQ291bnQoKSksZis9XCI8dGJvZHk+XCIsdD1mdW5jdGlvbih0KXt2YXIgbyxjPVwiXCIsZD1cIlwiLHU9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHMuX3Jlc291cmNlQnlTbG90KHtncm91cEluZGV4OmV9KX19O3JldHVybiBhLmRhdGUuaXNUb2RheShlW3JdKSYmKGQrPVwiay10b2RheVwiKSwoYS5kYXRlLmdldE1pbGxpc2Vjb25kcyh0KTxhLmRhdGUuZ2V0TWlsbGlzZWNvbmRzKGwud29ya0RheVN0YXJ0KXx8YS5kYXRlLmdldE1pbGxpc2Vjb25kcyh0KT49YS5kYXRlLmdldE1pbGxpc2Vjb25kcyhsLndvcmtEYXlFbmQpfHwhcy5faXNXb3JrRGF5KGVbcl0pKSYmKGQrPVwiIGstbm9ud29yay1ob3VyXCIpLGMrPVwiPHRkXCIrKFwiXCIhPT1kPycgY2xhc3M9XCInK2QrJ1wiJzpcIlwiKStcIj5cIixvPWEuZGF0ZS5nZXREYXRlKGVbcl0pLGEuZGF0ZS5zZXRUaW1lKG8sYS5kYXRlLmdldE1pbGxpc2Vjb25kcyh0KSksYys9bSh7ZGF0ZTpvLHJlc291cmNlczp1KHY/bjppKX0pLGMrPVwiPC90ZD5cIn0sbj0wO2g+bjtuKyspe2ZvcihmKz1cIjx0cj5cIixpPTA7dT5pO2krKylmb3Iocj0wLG89cDtvPnI7cisrKWYrPXRoaXMuX2ZvclRpbWVSYW5nZShjLGQsdCk7Zis9XCI8L3RyPlwifWYrPVwiPC90Ym9keT5cIix0aGlzLmNvbnRlbnQuZmluZChcInRhYmxlXCIpLmFwcGVuZChmKX0sX2dyb3VwczpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHI9dGhpcy5fZ3JvdXBDb3VudCgpLG89dGhpcy5fZGF0ZXMscz1vLmxlbmd0aDtmb3IodGhpcy5ncm91cHM9W10sZT0wO3I+ZTtlKyspdD10aGlzLl9hZGRSZXNvdXJjZVZpZXcoZSksbj1vWzBdLGk9b1tvLmxlbmd0aC0xfHwwXSx0LmFkZFRpbWVTbG90Q29sbGVjdGlvbihuLGEuZGF0ZS5hZGREYXlzKGksMSkpO1xyXG50aGlzLl90aW1lU2xvdEdyb3VwcyhyLHMpfSxfaXNWZXJ0aWNhbGx5R3JvdXBlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdyb3VwZWRSZXNvdXJjZXMubGVuZ3RoJiZcInZlcnRpY2FsXCI9PT10aGlzLl9ncm91cE9yaWVudGF0aW9uKCl9LF9pc0hvcml6b250YWxseUdyb3VwZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ncm91cGVkUmVzb3VyY2VzLmxlbmd0aCYmXCJob3Jpem9udGFsXCI9PT10aGlzLl9ncm91cE9yaWVudGF0aW9uKCl9LF90aW1lU2xvdEdyb3VwczpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGEscyxsLGMsZCx1LGgsZixnLG0sdixfLHksdyxiPXRoaXMuX3RpbWVTbG90SW50ZXJ2YWwoKSxrPXRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKSx4PXRoaXMuY29udGVudC5maW5kKFwidHJcIiksQz14Lmxlbmd0aDtmb3IoeC5hdHRyKFwicm9sZVwiLFwicm93XCIpLGsmJihDPU1hdGguZmxvb3IoQy9lKSksbj0wO2U+bjtuKyspZm9yKGk9MCxyPXRoaXMuZ3JvdXBzW25dLGsmJihpPW4pLGE9aSpDLHM9MCxrfHwocz1uKSxsPXhbYV0uY2hpbGRyZW4sYz1sLmxlbmd0aC8oaz8xOmUpLGQ9Yy90LHU9MDt0PnU7dSsrKWZvcihoPXUqZCtjKnMsbz1wKG5ldyBEYXRlKCt0aGlzLnN0YXJ0VGltZSgpKSksZj0wO2Q+ZjtmKyspZz1sW2YraF0sbT1yLmdldFRpbWVTbG90Q29sbGVjdGlvbigwKSx2PXRoaXMuX2RhdGVzW3VdLF89RGF0ZS5VVEModi5nZXRGdWxsWWVhcigpLHYuZ2V0TW9udGgoKSx2LmdldERhdGUoKSkseT1fK28sdz15K2IsZy5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJncmlkY2VsbFwiKSxnLnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiwhMSksbS5hZGRUaW1lU2xvdChnLHksdywhMCksbys9Yn0sc3RhcnREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXJ0RGF0ZX0sZW5kRGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmREYXRlfSxzdGFydFRpbWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnM7cmV0dXJuIGUuc2hvd1dvcmtIb3Vycz9lLndvcmtEYXlTdGFydDplLnN0YXJ0VGltZX0sZW5kVGltZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucztyZXR1cm4gZS5zaG93V29ya0hvdXJzP2Uud29ya0RheUVuZDplLmVuZFRpbWV9LF90aW1lU2xvdEludGVydmFsOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zO3JldHVybiBlLm1ham9yVGljay9lLm1pbm9yVGlja0NvdW50Kmd9LG5leHREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGEuZGF0ZS5uZXh0RGF5KHRoaXMuZW5kRGF0ZSgpKX0scHJldmlvdXNEYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGEuZGF0ZS5wcmV2aW91c0RheSh0aGlzLnN0YXJ0RGF0ZSgpKX0sY2FsY3VsYXRlRGF0ZVJhbmdlOmZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyKFt0aGlzLm9wdGlvbnMuZGF0ZV0pfSxyZW5kZXI6ZnVuY3Rpb24odCl7dmFyIG4scixvLHMsbCxjO2Zvcih0aGlzLl9oZWFkZXJDb2x1bW5Db3VudD0wLHRoaXMuX2dyb3VwcygpLHRoaXMuZWxlbWVudC5maW5kKFwiLmstZXZlbnRcIikucmVtb3ZlKCksdD1uZXcgYS5kYXRhLlF1ZXJ5KHQpLnNvcnQoW3tmaWVsZDpcInN0YXJ0XCIsZGlyOlwiYXNjXCJ9LHtmaWVsZDpcImVuZFwiLGRpcjpcImRlc2NcIn1dKS50b0FycmF5KCksbj1bXSx0aGlzLl9ldmVudHNCeVJlc291cmNlKHQsdGhpcy5ncm91cGVkUmVzb3VyY2VzLG4pLHI9ZS5tYXAodGhpcy5fZGF0ZXMsZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgubWF4LmFwcGx5KG51bGwsZS5tYXAobixmdW5jdGlvbihuKXtyZXR1cm4gZS5ncmVwKG4sZnVuY3Rpb24oZSl7cmV0dXJuIGkodCxoKGUuc3RhcnQpLGgoZS5lbmQpKX0pLmxlbmd0aH0pKX0pLG89W10scz0wLGw9MDtuLmxlbmd0aD5sO2wrKyljPXtncm91cEluZGV4OmwsbWF4Um93Q291bnQ6MCxldmVudHM6e319LG8ucHVzaChjKSx0aGlzLl9yZW5kZXJFdmVudHMobltsXSxsLGMpLGMubWF4Um93Q291bnQ+cyYmKHM9Yy5tYXhSb3dDb3VudCk7dGhpcy5fc2V0Um93c0hlaWdodChvLG4ubGVuZ3RoLHMpLHRoaXMuX3Bvc2l0aW9uRXZlbnRzKG8sbi5sZW5ndGgpLHRoaXMudHJpZ2dlcihcImFjdGl2YXRlXCIpfSxfcG9zaXRpb25FdmVudHM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbztmb3Iobj0wO3Q+bjtuKyspe2k9ZVtuXS5ldmVudHM7Zm9yKHIgaW4gaSlvPWlbcl0sdGhpcy5fcG9zaXRpb25FdmVudChvKX19LF9zZXRSb3dzSGVpZ2h0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8scyxsLGM9dGhpcy5vcHRpb25zLmV2ZW50SGVpZ2h0KzIsZD10aGlzLl9nZXRCb3R0b21Sb3dPZmZzZXQoKTtmb3IodD10aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCk/dDoxLGk9MDt0Pmk7aSsrKXI9dGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpP2VbaV0ubWF4Um93Q291bnQ6bixyPXI/cjoxLG89KGMrMikqcitkLHM9dGhpcy50aW1lcy5maW5kKGEuZm9ybWF0KFwidHI6bnRoLWNoaWxkKHswfSlcIixpKzEpKSxsPXRoaXMuY29udGVudC5maW5kKGEuZm9ybWF0KFwidHI6bnRoLWNoaWxkKHswfSlcIixpKzEpKSxzLmhlaWdodChvKSxsLmhlaWdodChvKTt0aGlzLl9zZXRDb250ZW50V2lkdGgoKSx0aGlzLnJlZnJlc2hMYXlvdXQoKSx0aGlzLl9yZWZyZXNoU2xvdHMoKX0sX2dldEJvdHRvbVJvd09mZnNldDpmdW5jdGlvbigpe3ZhciBlLHQsbj0uNSp0aGlzLm9wdGlvbnMuZXZlbnRIZWlnaHQsaT10aGlzLl9pc01vYmlsZSgpO3JldHVybiBpPyhlPTMwLHQ9NjApOihlPTE1LHQ9MzApLG4+dD9uPXQ6ZT5uJiYobj1lKSxufSxfcG9zaXRpb25FdmVudDpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcy5vcHRpb25zLmV2ZW50SGVpZ2h0KzIscj1lLnNsb3RSYW5nZS5pbm5lclJlY3QoZS5zdGFydCxlLmVuZCwhMSk7ci50b3A9ZS5zbG90UmFuZ2Uuc3RhcnQub2Zmc2V0VG9wLHQ9ci5yaWdodC1yLmxlZnQtMiwwPnQmJih0PTApLG49ci5sZWZ0LHRoaXMuX2lzUnRsJiYobi09dGhpcy5jb250ZW50WzBdLnNjcm9sbFdpZHRoLXRoaXMuY29udGVudFswXS5vZmZzZXRXaWR0aCksZS5lbGVtZW50LmNzcyh7dG9wOmUuc2xvdFJhbmdlLnN0YXJ0Lm9mZnNldFRvcCtlLnJvd0luZGV4KihpKzIpK1wicHhcIixsZWZ0Om4sd2lkdGg6dH0pfSxfcmVmcmVzaFNsb3RzOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7dGhpcy5ncm91cHMubGVuZ3RoPmU7ZSsrKXRoaXMuZ3JvdXBzW2VdLnJlZnJlc2goKX0sX2V2ZW50c0J5UmVzb3VyY2U6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxzLGw9dFswXTtpZihsKWZvcihpPWwuZGF0YVNvdXJjZS52aWV3KCkscj0wO2kubGVuZ3RoPnI7cisrKW89dGhpcy5fcmVzb3VyY2VWYWx1ZShsLGlbcl0pLHM9bmV3IGEuZGF0YS5RdWVyeShlKS5maWx0ZXIoe2ZpZWxkOmwuZmllbGQsb3BlcmF0b3I6Yy5ncm91cEVxRmlsdGVyKG8pfSkudG9BcnJheSgpLHQubGVuZ3RoPjE/dGhpcy5fZXZlbnRzQnlSZXNvdXJjZShzLHQuc2xpY2UoMSksbik6bi5wdXNoKHMpO2Vsc2Ugbi5wdXNoKGUpfSxfaXNJbkRhdGVTbG90OmZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RhcnQsbj1lLmVuZCxpPWgodGhpcy5fc3RhcnREYXRlKSxyPWEuZGF0ZS5hZGREYXlzKGgodGhpcy5fZW5kRGF0ZSksMSk7cmV0dXJuIHI+dCYmbj49aT8hMDohMX0sX2lzSW5UaW1lU2xvdDpmdW5jdGlvbihlKXt2YXIgdCxuPWUuc3RhcnRUaW1lfHxhLmRhdGUudG9VdGNUaW1lKGUuc3RhcnQpLGk9ZS5lbmRUaW1lfHxhLmRhdGUudG9VdGNUaW1lKGUuZW5kKSxyPXRoaXMuX3Nsb3RSYW5nZXM7Zm9yKG49PT1pJiYoaSs9MSksdD0wO3IubGVuZ3RoPnQ7dCsrKWlmKHJbdF0uZW5kPm4mJmk+clt0XS5zdGFydClyZXR1cm4hMDtyZXR1cm4hMX0sX2FkanVzdEV2ZW50OmZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5zdGFydCxpPWUuZW5kLHI9ZS5fdGltZShcInN0YXJ0XCIpLG89ZS5fdGltZShcImVuZFwiKSxzPXAodGhpcy5zdGFydFRpbWUoKSksYz1wKHRoaXMuZW5kVGltZSgpKSxkPW51bGwsdT1udWxsLGc9ITEsbT0hMTtyZXR1cm4gZS5pc0FsbERheT8oZD1oKG4pLHM+ciYmKGwoZCxzKSxtPSEwKSx1PWgoaSksYz09PXAoaCh0aGlzLmVuZFRpbWUoKSkpP3U9YS5kYXRlLmFkZERheXModSwxKToobCh1LGMpLGc9ITApKTooYz0wPT09Yz9mOmMscz5yPyhkPWgobiksbChkLHMpLG09ITApOnI+YyYmKGQ9aChuKSxkPWEuZGF0ZS5hZGREYXlzKGQsMSksbChkLHMpLG09ITApLG8+Yz8odT1oKGkpLGwodSxjKSxnPSEwKTpzPm8mJih1PWgoaSksdT1hLmRhdGUuYWRkRGF5cyh1LC0xKSxsKHUsYyksZz0hMCkpLHQ9ZS5jbG9uZSh7c3RhcnQ6ZD9kOm4sZW5kOnU/dTppLHN0YXJ0VGltZTpkP2EuZGF0ZS50b1V0Y1RpbWUoZCk6ZS5zdGFydFRpbWUsZW5kVGltZTp1P2EuZGF0ZS50b1V0Y1RpbWUodSk6ZS5lbmRUaW1lLGlzQWxsRGF5OiExfSkse29jY3VycmVuY2U6dCxoZWFkOmcsdGFpbDptfX0sX3JlbmRlckV2ZW50czpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGEscyxsLGMsZCx1LGgscDtmb3Iocj0wLG89ZS5sZW5ndGg7bz5yO3IrKylpPWVbcl0sdGhpcy5faXNJbkRhdGVTbG90KGkpJiYoYT1pLmlzQWxsRGF5fHxpLmVuZC5nZXRUaW1lKCktaS5zdGFydC5nZXRUaW1lKCk+PWYscz10aGlzLmNvbnRlbnQsKGF8fHRoaXMuX2lzSW5UaW1lU2xvdChpKSkmJihsPXRoaXMuX2FkanVzdEV2ZW50KGkpLGM9dGhpcy5ncm91cHNbdF0sYy5fY29udGludW91c0V2ZW50c3x8KGMuX2NvbnRpbnVvdXNFdmVudHM9W10pLGQ9Yy5zbG90UmFuZ2VzKGwub2NjdXJyZW5jZSwhMSksdT1kWzBdLHRoaXMuX2lzSW5UaW1lU2xvdChsLm9jY3VycmVuY2UpJiYoaD10aGlzLl9jcmVhdGVFdmVudEVsZW1lbnQobC5vY2N1cnJlbmNlLGksdS5oZWFkfHxsLmhlYWQsdS50YWlsfHxsLnRhaWwpLGguYXBwZW5kVG8ocykuY3NzKHt0b3A6MCxoZWlnaHQ6dGhpcy5vcHRpb25zLmV2ZW50SGVpZ2h0fSkscD17c3RhcnQ6bC5vY2N1cnJlbmNlLnN0YXJ0VGltZXx8bC5vY2N1cnJlbmNlLnN0YXJ0LGVuZDpsLm9jY3VycmVuY2UuZW5kVGltZXx8bC5vY2N1cnJlbmNlLmVuZCxlbGVtZW50OmgsdWlkOmkudWlkLHNsb3RSYW5nZTp1LHJvd0luZGV4OjAsb2Zmc2V0VG9wOjB9LG4uZXZlbnRzW2kudWlkXT1wLHRoaXMuYWRkQ29udGludW91c0V2ZW50KGMsdSxoLGkuaXNBbGxEYXkpLHRoaXMuX2FycmFuZ2VSb3dzKHAsdSxuKSkpKX0sYWRkQ29udGludW91c0V2ZW50OmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByPWUuX2NvbnRpbnVvdXNFdmVudHM7ci5wdXNoKHtlbGVtZW50Om4saXNBbGxEYXk6aSx1aWQ6bi5hdHRyKGEuYXR0cihcInVpZFwiKSksc3RhcnQ6dC5zdGFydCxlbmQ6dC5lbmR9KX0sX2NyZWF0ZUV2ZW50RWxlbWVudDpmdW5jdGlvbih0LG4saSxyKXt2YXIgbyxzLGw9dGhpcy5ldmVudFRlbXBsYXRlLGM9dGhpcy5vcHRpb25zLmVkaXRhYmxlLHU9dGhpcy5faXNNb2JpbGUoKSxoPWMmJmMuZGVzdHJveSE9PSExJiYhdSxwPWMmJmMucmVzaXplIT09ITEsZj1uLl90aW1lKFwic3RhcnRcIiksZz1uLl90aW1lKFwiZW5kXCIpLG09bi5zdGFydCx2PW4uZW5kLF89dGhpcy5ldmVudFJlc291cmNlcyhuKTtyZXR1cm4gbi5zdGFydFRpbWUmJihtPW5ldyBEYXRlKGYpLG09YS50aW1lem9uZS5hcHBseShtLFwiRXRjL1VUQ1wiKSksbi5lbmRUaW1lJiYodj1uZXcgRGF0ZShnKSx2PWEudGltZXpvbmUuYXBwbHkodixcIkV0Yy9VVENcIikpLG89ZCh7fSx7bnM6YS5ucyxyZXNpemFibGU6cCxzaG93RGVsZXRlOmgsaGVhZDppLHRhaWw6cixzaW5nbGVEYXk6MT09dGhpcy5fZGF0ZXMubGVuZ3RoLHJlc291cmNlczpfLGludmVyc2VDb2xvcjpfJiZfWzBdP3RoaXMuX3Nob3VsZEludmVyc2VSZXNvdXJjZUNvbG9yKF9bMF0pOiExfSxuLHtzdGFydDptLGVuZDp2fSkscz1lKGwobykpLHRoaXMuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czpzLGRhdGE6W3tkYXRhSXRlbTpvfV19fSksc30sX2FycmFuZ2VSb3dzOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sYSxzLGwsZD10LnN0YXJ0LmluZGV4LHU9dC5lbmQuaW5kZXgsaD1jLmNvbGxpZGluZ0V2ZW50cyh0LmV2ZW50cygpLGQsdSk7Zm9yKHQuYWRkRXZlbnQoe3Nsb3RJbmRleDpkLHN0YXJ0OmQsZW5kOnUsZWxlbWVudDplLmVsZW1lbnQsdWlkOmUudWlkfSksaC5wdXNoKHtzbG90SW5kZXg6ZCxzdGFydDpkLGVuZDp1LGVsZW1lbnQ6ZS5lbGVtZW50LHVpZDplLnVpZH0pLGk9Yy5jcmVhdGVSb3dzKGgpLGkubGVuZ3RoPm4ubWF4Um93Q291bnQmJihuLm1heFJvd0NvdW50PWkubGVuZ3RoKSxyPTAsbz1pLmxlbmd0aDtvPnI7cisrKWZvcihhPWlbcl0uZXZlbnRzLHM9MCxsPWEubGVuZ3RoO2w+cztzKyspbi5ldmVudHNbYVtzXS51aWRdLnJvd0luZGV4PXJ9LF9ncm91cENvdW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5ncm91cGVkUmVzb3VyY2VzO3JldHVybiBlLmxlbmd0aD9cInZlcnRpY2FsXCI9PT10aGlzLl9ncm91cE9yaWVudGF0aW9uKCk/dGhpcy5fcm93Q291bnRGb3JMZXZlbChlLmxlbmd0aC0xKTp0aGlzLl9jb2x1bW5Db3VudEZvckxldmVsKGUubGVuZ3RoLTEpOjF9LF91cGRhdGVFdmVudEZvclNlbGVjdGlvbjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9hZGp1c3RFdmVudChlLmNsb25lKCkpO3JldHVybiB0Lm9jY3VycmVuY2V9LF91cGRhdGVFdmVudEZvck1vdmU6ZnVuY3Rpb24oZSl7ZS5pc0FsbERheSYmZS5zZXQoXCJpc0FsbERheVwiLCExKX0sX3VwZGF0ZUV2ZW50Rm9yUmVzaXplOmZ1bmN0aW9uKGUpe2UuaXNBbGxEYXkmJmUuc2V0KFwiaXNBbGxEYXlcIiwhMSl9LF91cGRhdGVNb3ZlSGludDpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGEscyxsLGMsZCx1LGgscCxmPXRoaXMuZ3JvdXBzW3RdLGc9ZS5jbG9uZSh7c3RhcnQ6ZS5zdGFydCxlbmQ6ZS5lbmR9KSxtPWcuZHVyYXRpb24oKTtmb3IoZy5zdGFydD1uZXcgRGF0ZShnLnN0YXJ0LmdldFRpbWUoKStuKSxnLmVuZD1uZXcgRGF0ZSgrZy5zdGFydCttKSxpPXRoaXMuX2FkanVzdEV2ZW50KGcpLHI9Zi5zbG90UmFuZ2VzKGkub2NjdXJyZW5jZSwhMSksdGhpcy5fcmVtb3ZlTW92ZUhpbnQoKSxvPTA7ci5sZW5ndGg+bztvKyspYT1yW29dLHM9YS5zdGFydCxsPXRoaXMuX2NyZWF0ZUV2ZW50RWxlbWVudChpLm9jY3VycmVuY2UsaS5vY2N1cnJlbmNlLCExLCExKSxsLmFkZENsYXNzKFwiay1ldmVudC1kcmFnLWhpbnRcIiksYz1hLmlubmVyUmVjdChpLm9jY3VycmVuY2Uuc3RhcnQsaS5vY2N1cnJlbmNlLmVuZCx0aGlzLm9wdGlvbnMuc25hcCksZD1jLnJpZ2h0LWMubGVmdC0yLDA+ZCYmKGQ9MCksdT1jLmxlZnQsdGhpcy5faXNSdGwmJih1LT10aGlzLmNvbnRlbnRbMF0uc2Nyb2xsV2lkdGgtdGhpcy5jb250ZW50WzBdLm9mZnNldFdpZHRoKSxoPXtsZWZ0OnUsdG9wOnMub2Zmc2V0VG9wLGhlaWdodDpzLm9mZnNldEhlaWdodC0yLHdpZHRoOmR9LGwuY3NzKGgpLHRoaXMuX21vdmVIaW50PXRoaXMuX21vdmVIaW50LmFkZChsKTtwPXRoaXMuY29udGVudCx0aGlzLl9tb3ZlSGludC5hcHBlbmRUbyhwKX0sX3VwZGF0ZVJlc2l6ZUhpbnQ6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbyxzLGwsZCx1LGgscCxmLGcsbSx2PXRoaXMuZ3JvdXBzW3RdLF89di5yYW5nZXMobixpLCExLCExKTtmb3IodGhpcy5fcmVtb3ZlUmVzaXplSGludCgpLHI9MDtfLmxlbmd0aD5yO3IrKylvPV9bcl0scz1vLnN0YXJ0U2xvdCgpLGw9by5pbm5lclJlY3QobixpLCExKSxsLnRvcD1zLm9mZnNldFRvcCxkPWwucmlnaHQtbC5sZWZ0LHU9cy5vZmZzZXRIZWlnaHQsaD1sLmxlZnQscD10aGlzLmNvbnRlbnQsdGhpcy5faXNSdGwmJihoLT1wWzBdLnNjcm9sbFdpZHRoLXBbMF0ub2Zmc2V0V2lkdGgpLGY9Yy5mbi5fY3JlYXRlUmVzaXplSGludC5jYWxsKHRoaXMsaCxsLnRvcCxkLHUpLHRoaXMuX3Jlc2l6ZUhpbnQ9dGhpcy5fcmVzaXplSGludC5hZGQoZik7Zz1cInRcIixtPXRoaXMuY29udGVudCx0aGlzLl9yZXNpemVIaW50LmFwcGVuZFRvKG0pLHRoaXMuX3Jlc2l6ZUhpbnQuZmluZChcIi5rLWxhYmVsLXRvcCwuay1sYWJlbC1ib3R0b21cIikudGV4dChcIlwiKSx0aGlzLl9yZXNpemVIaW50LmZpcnN0KCkuYWRkQ2xhc3MoXCJrLWZpcnN0XCIpLmZpbmQoXCIuay1sYWJlbC10b3BcIikudGV4dChhLnRvU3RyaW5nKGEudGltZXpvbmUudG9Mb2NhbERhdGUobiksZykpLHRoaXMuX3Jlc2l6ZUhpbnQubGFzdCgpLmFkZENsYXNzKFwiay1sYXN0XCIpLmZpbmQoXCIuay1sYWJlbC1ib3R0b21cIikudGV4dChhLnRvU3RyaW5nKGEudGltZXpvbmUudG9Mb2NhbERhdGUoaSksZykpfSxzZWxlY3Rpb25CeUVsZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vZmZzZXQoKTtyZXR1cm4gdGhpcy5fc2xvdEJ5UG9zaXRpb24odC5sZWZ0LHQudG9wKX0sX3VwZGF0ZURpcmVjdGlvbjpmdW5jdGlvbihlLHQsbixpLHIpe3ZhciBvPXRbMF0uc3RhcnQsYT10W3QubGVuZ3RoLTFdLmVuZDtuJiYhciYmby5pbmRleD09PWEuaW5kZXgmJm8uY29sbGVjdGlvbkluZGV4PT09YS5jb2xsZWN0aW9uSW5kZXgmJihlLmJhY2t3YXJkPWkpfSxfY2hhbmdlR3JvdXA6ZnVuY3Rpb24oZSx0KXt2YXIgbj10P1wicHJldkdyb3VwU2xvdFwiOlwibmV4dEdyb3VwU2xvdFwiLGk9dGhpc1tuXShlLnN0YXJ0LGUuZ3JvdXBJbmRleCwhMSk7cmV0dXJuIGkmJihlLmdyb3VwSW5kZXgrPXQ/LTE6MSksaX0scHJldkdyb3VwU2xvdDpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzLmdyb3Vwc1t0XSxvPXIucmFuZ2VzKGUsZSxuLCExKVswXS5zdGFydDtpZighKDA+PXQpKXJldHVybiB0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCk/bzooaT1yLl9jb2xsZWN0aW9uKDAsbiksaS5sYXN0KCkpfSxuZXh0R3JvdXBTbG90OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPXRoaXMuZ3JvdXBzW3RdLG89ci5yYW5nZXMoZSxlLG4sITEpWzBdLnN0YXJ0O2lmKCEodD49dGhpcy5ncm91cHMubGVuZ3RoLTEpKXJldHVybiB0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCk/bzooaT1yLl9jb2xsZWN0aW9uKDAsbiksaS5maXJzdCgpKX0sX3ZlcnRpY2FsU2xvdHM6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9aT9cImxlZnRTbG90XCI6XCJyaWdodFNsb3RcIixvPXRbMF0uc3RhcnQsYT10W3QubGVuZ3RoLTFdLmVuZCxzPXRoaXMuZ3JvdXBzW2UuZ3JvdXBJbmRleF07cmV0dXJuIG89c1tyXShvKSxhPXNbcl0oYSksbnx8IXRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKXx8byYmYXx8KG89YT10aGlzLl9jaGFuZ2VHcm91cChlLGkpKSx7c3RhcnRTbG90Om8sZW5kU2xvdDphfX0sX2hvcml6b250YWxTbG90czpmdW5jdGlvbihlLHQsbixpKXt2YXIgcj1pP1widXBTbG90XCI6XCJkb3duU2xvdFwiLG89dFswXS5zdGFydCxhPXRbdC5sZW5ndGgtMV0uZW5kLHM9dGhpcy5ncm91cHNbZS5ncm91cEluZGV4XTtyZXR1cm4gbz1zW3JdKG8pLGE9c1tyXShhKSxufHwhdGhpcy5faXNIb3Jpem9udGFsbHlHcm91cGVkKCl8fG8mJmF8fChvPWE9dGhpcy5fY2hhbmdlR3JvdXAoZSxpKSkse3N0YXJ0U2xvdDpvLGVuZFNsb3Q6YX19LF9jaGFuZ2VWaWV3UGVyaW9kOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10P3RoaXMucHJldmlvdXNEYXRlKCk6dGhpcy5uZXh0RGF0ZSgpLHI9ZS5zdGFydCxvPWUuZW5kO3JldHVybiBlLnN0YXJ0PW5ldyBEYXRlKGkpLGUuZW5kPW5ldyBEYXRlKGkpLHRoaXMuX2lzSG9yaXpvbnRhbGx5R3JvdXBlZCgpJiYoZS5ncm91cEluZGV4PXQ/dGhpcy5ncm91cHMubGVuZ3RoLTE6MCksbj1vLXIsdD8obz1wKHRoaXMuZW5kVGltZSgpKSxvPTA9PT1vP2Y6byxsKGUuc3RhcnQsby1uKSxsKGUuZW5kLG8pKToocj1wKHRoaXMuc3RhcnRUaW1lKCkpLGwoZS5zdGFydCxyKSxsKGUuZW5kLHIrbikpLGUuZXZlbnRzPVtdLCEwfSxtb3ZlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8scyxsLGM9ITEsZD10aGlzLmdyb3Vwc1tlLmdyb3VwSW5kZXhdLHU9YS5rZXlzLGg9ZC5yYW5nZXMoZS5zdGFydCxlLmVuZCwhMSwhMSk7aWYodD09PXUuRE9XTnx8dD09PXUuVVApYz0hMCxvPXQ9PT11LlVQLHRoaXMuX3VwZGF0ZURpcmVjdGlvbihlLGgsbixvLCEwKSxzPXRoaXMuX3ZlcnRpY2FsU2xvdHMoZSxoLG4sbyk7ZWxzZSBpZighKHQhPT11LkxFRlQmJnQhPT11LlJJR0hUfHwoYz0hMCxvPXQ9PT11LkxFRlQsdGhpcy5fdXBkYXRlRGlyZWN0aW9uKGUsaCxuLG8sITEpLHM9dGhpcy5faG9yaXpvbnRhbFNsb3RzKGUsaCxuLG8pLHMuc3RhcnRTbG90JiZzLmVuZFNsb3R8fG58fCF0aGlzLl9jaGFuZ2VWaWV3UGVyaW9kKGUsbywhMSkpKSlyZXR1cm4gYztyZXR1cm4gYyYmKGk9cy5zdGFydFNsb3Qscj1zLmVuZFNsb3Qsbj8obD1lLmJhY2t3YXJkLGwmJmk/ZS5zdGFydD1pLnN0YXJ0RGF0ZSgpOiFsJiZyJiYoZS5lbmQ9ci5lbmREYXRlKCkpKTppJiZyJiYoZS5zdGFydD1pLnN0YXJ0RGF0ZSgpLGUuZW5kPXIuZW5kRGF0ZSgpKSxlLmV2ZW50cz1bXSksY30sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5lbGVtZW50JiZlLmVsZW1lbnQub2ZmKG0pLGUuZm9vdGVyJiZlLmZvb3Rlci5yZW1vdmUoKSxlLl9jdXJyZW50VGltZVVwZGF0ZVRpbWVyJiZjbGVhckludGVydmFsKGUuX2N1cnJlbnRUaW1lVXBkYXRlVGltZXIpLGMuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuX2lzTW9iaWxlKCkmJmUub3B0aW9ucy5lZGl0YWJsZSYmKGUub3B0aW9ucy5lZGl0YWJsZS5jcmVhdGUhPT0hMSYmKGUuX2FkZFVzZXJFdmVudHMuZGVzdHJveSgpLGUuX2FsbERheVVzZXJFdmVudHMuZGVzdHJveSgpKSxlLm9wdGlvbnMuZWRpdGFibGUudXBkYXRlIT09ITEmJmUuX2VkaXRVc2VyRXZlbnRzLmRlc3Ryb3koKSl9fSk7ZCghMCxzLHtUaW1lbGluZVZpZXc6dyxUaW1lbGluZVdlZWtWaWV3OncuZXh0ZW5kKHtvcHRpb25zOntuYW1lOlwiVGltZWxpbmVXZWVrVmlld1wiLHRpdGxlOlwiVGltZWxpbmUgV2Vla1wiLHNlbGVjdGVkRGF0ZUZvcm1hdDpcInswOkR9IC0gezE6RH1cIixtYWpvclRpY2s6MTIwfSxuYW1lOlwidGltZWxpbmVXZWVrXCIsY2FsY3VsYXRlRGF0ZVJhbmdlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMub3B0aW9ucy5kYXRlLGk9YS5kYXRlLmRheU9mV2VlayhuLHRoaXMuY2FsZW5kYXJJbmZvKCkuZmlyc3REYXksLTEpLHI9W107Zm9yKGU9MCx0PTc7dD5lO2UrKylyLnB1c2goaSksaT1hLmRhdGUubmV4dERheShpKTt0aGlzLl9yZW5kZXIocil9fSksVGltZWxpbmVXb3JrV2Vla1ZpZXc6dy5leHRlbmQoe29wdGlvbnM6e25hbWU6XCJUaW1lbGluZVdvcmtXZWVrVmlld1wiLHRpdGxlOlwiVGltZWxpbmUgV29yayBXZWVrXCIsc2VsZWN0ZWREYXRlRm9ybWF0OlwiezA6RH0gLSB7MTpEfVwiLG1ham9yVGljazoxMjB9LG5hbWU6XCJ0aW1lbGluZVdvcmtXZWVrXCIsbmV4dERhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gYS5kYXRlLmRheU9mV2VlayhhLmRhdGUubmV4dERheSh0aGlzLmVuZERhdGUoKSksdGhpcy5vcHRpb25zLndvcmtXZWVrU3RhcnQsMSl9LHByZXZpb3VzRGF0ZTpmdW5jdGlvbigpe3JldHVybiBhLmRhdGUucHJldmlvdXNEYXkodGhpcy5zdGFydERhdGUoKSl9LGNhbGN1bGF0ZURhdGVSYW5nZTpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLm9wdGlvbnMuZGF0ZSx0PWEuZGF0ZS5kYXlPZldlZWsoZSx0aGlzLm9wdGlvbnMud29ya1dlZWtTdGFydCwtMSksbj1hLmRhdGUuZGF5T2ZXZWVrKHQsdGhpcy5vcHRpb25zLndvcmtXZWVrRW5kLDEpLGk9W107bj49dDspaS5wdXNoKHQpLHQ9YS5kYXRlLm5leHREYXkodCk7dGhpcy5fcmVuZGVyKGkpfX0pLFRpbWVsaW5lTW9udGhWaWV3OncuZXh0ZW5kKHtvcHRpb25zOntuYW1lOlwiVGltZWxpbmVNb250aFZpZXdcIix0aXRsZTpcIlRpbWVsaW5lIE1vbnRoXCIsc2VsZWN0ZWREYXRlRm9ybWF0OlwiezA6RH0gLSB7MTpEfVwiLHdvcmtEYXlTdGFydDpuZXcgRGF0ZSgxOTgwLDEsMSwwLDAsMCksd29ya0RheUVuZDpuZXcgRGF0ZSgxOTgwLDEsMSwwLDAsMCksZm9vdGVyOiExLG1ham9yVGljazoxNDQwLG1pbm9yVGlja0NvdW50OjF9LG5hbWU6XCJ0aW1lbGluZVdlZWtcIixjYWxjdWxhdGVEYXRlUmFuZ2U6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy5vcHRpb25zLmRhdGUsaT1hLmRhdGUuZmlyc3REYXlPZk1vbnRoKG4pLHI9YS5kYXRlLmxhc3REYXlPZk1vbnRoKG4pLG89W107Zm9yKGU9MCx0PXIuZ2V0RGF0ZSgpO3Q+ZTtlKyspby5wdXNoKGkpLGk9YS5kYXRlLm5leHREYXkoaSk7dGhpcy5fcmVuZGVyKG8pfX0pfSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQpe3JldHVybiB0PXR8fFwiXCIsZS5zdGFydFRpbWV6b25lJiYodD1lLnN0YXJ0VGltZXpvbmUsZS5lbmRUaW1lem9uZSYmKHQrPVwiIHwgXCIrZS5lbmRUaW1lem9uZSkpLHR9ZnVuY3Rpb24gaShlLHQpe3ZhciBuPXQudGltZXpvbmU7biYmKGVbQS5hdHRyKFwidGltZXpvbmVcIildPW4pfWZ1bmN0aW9uIHIoZSx0KXt2YXIgbixpPXQubW9kZWwuZmllbGRzW3QuZmllbGRdLnZhbGlkYXRpb247aSYmKG49aS5kYXRlQ29tcGFyZSxuJiZVKG4pJiZuLm1lc3NhZ2UmJihlW0EuYXR0cihcImRhdGVDb21wYXJlLW1zZ1wiKV09bi5tZXNzYWdlKSl9ZnVuY3Rpb24gbyhlLHQpe3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gbj1lKG4pLHMobixcImFwcGx5XCIsdCksbnx8W119fWZ1bmN0aW9uIGEoZSx0KXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIG4mJihcIltvYmplY3QgQXJyYXldXCI9PT1HLmNhbGwobil8fG4gaW5zdGFuY2VvZiBBLmRhdGEuT2JzZXJ2YWJsZUFycmF5fHwobj1bbl0pKSxzKG4sXCJyZW1vdmVcIix0LCEwKSxuPWUobiksbnx8W119fWZ1bmN0aW9uIHMoZSx0LG4saSl7dmFyIHIsbyxhO2ZvcihlPWV8fFtdLG89MCxhPWUubGVuZ3RoO2E+bztvKyspcj1lW29dLGk/ci5zdGFydFRpbWV6b25lfHxyLmVuZFRpbWV6b25lP24/KHIuc3RhcnQ9QS50aW1lem9uZS5jb252ZXJ0KHIuc3RhcnQsci5zdGFydFRpbWV6b25lfHxyLmVuZFRpbWV6b25lLG4pLHIuZW5kPUEudGltZXpvbmUuY29udmVydChyLmVuZCxyLmVuZFRpbWV6b25lfHxyLnN0YXJ0VGltZXpvbmUsbiksci5zdGFydD1BLnRpbWV6b25lW3RdKHIuc3RhcnQsbiksci5lbmQ9QS50aW1lem9uZVt0XShyLmVuZCxuKSk6KHIuc3RhcnQ9QS50aW1lem9uZVt0XShyLnN0YXJ0LHIuc3RhcnRUaW1lem9uZXx8ci5lbmRUaW1lem9uZSksci5lbmQ9QS50aW1lem9uZVt0XShyLmVuZCxyLmVuZFRpbWV6b25lfHxyLnN0YXJ0VGltZXpvbmUpKTpuJiYoci5zdGFydD1BLnRpbWV6b25lW3RdKHIuc3RhcnQsbiksci5lbmQ9QS50aW1lem9uZVt0XShyLmVuZCxuKSk6ci5zdGFydFRpbWV6b25lfHxyLmVuZFRpbWV6b25lPyhyLnN0YXJ0PUEudGltZXpvbmVbdF0oci5zdGFydCxyLnN0YXJ0VGltZXpvbmV8fHIuZW5kVGltZXpvbmUpLHIuZW5kPUEudGltZXpvbmVbdF0oci5lbmQsci5lbmRUaW1lem9uZXx8ci5zdGFydFRpbWV6b25lKSxuJiYoci5zdGFydD1BLnRpbWV6b25lLmNvbnZlcnQoci5zdGFydCxyLnN0YXJ0VGltZXpvbmV8fHIuZW5kVGltZXpvbmUsbiksci5lbmQ9QS50aW1lem9uZS5jb252ZXJ0KHIuZW5kLHIuZW5kVGltZXpvbmV8fHIuc3RhcnRUaW1lem9uZSxuKSkpOm4mJihyLnN0YXJ0PUEudGltZXpvbmVbdF0oci5zdGFydCxuKSxyLmVuZD1BLnRpbWV6b25lW3RdKHIuZW5kLG4pKSxpJiZkZWxldGUgci51aWQ7cmV0dXJuIGV9ZnVuY3Rpb24gbChlLHQpe2Zvcih2YXIgbixpPWUubGVuZ3RoLHI9MDtpPnI7cisrKWlmKG49ZVtyXSxuLnVpZD09PXQpcmV0dXJuIG59ZnVuY3Rpb24gYyhlLHQsbil7cmV0dXJuIGU9bj9BLnRpbWV6b25lLmNvbnZlcnQoZSx0LG4pOkEudGltZXpvbmUucmVtb3ZlKGUsdCl9ZnVuY3Rpb24gZChlKXt2YXIgdCxuLGkscixvLGEscyxsLGQsdSxoLHA7cmV0dXJuIGUuZmlsdGVyKFwiW25hbWU9ZW5kXVwiKS5sZW5ndGgmJih0PWUuY2xvc2VzdChcIi5rLXNjaGVkdWxlci1lZGl0LWZvcm1cIiksbj10LmZpbmQoXCJbbmFtZT1zdGFydF06dmlzaWJsZVwiKSxpPXQuZmluZChcIltuYW1lPWVuZF06dmlzaWJsZVwiKSxpWzBdJiZuWzBdJiYoYT1BLndpZGdldEluc3RhbmNlKG4sQS51aSkscz1BLndpZGdldEluc3RhbmNlKGksQS51aSksbD10LmRhdGEoXCJrZW5kb0VkaXRhYmxlXCIpLGQ9bD9sLm9wdGlvbnMubW9kZWw6bnVsbCxhJiZzPyhyPWEudmFsdWUoKSxvPXMudmFsdWUoKSk6KHI9QS5wYXJzZURhdGUobi52YWwoKSksbz1BLnBhcnNlRGF0ZShpLnZhbCgpKSksciYmbykpPyhkJiYodT1uLmF0dHIoQS5hdHRyKFwidGltZXpvbmVcIikpLGg9ZC5zdGFydFRpbWV6b25lLHA9ZC5lbmRUaW1lem9uZSxoPWh8fHAscD1wfHxoLGgmJihyPWMocixoLHUpLG89YyhvLHAsdSkpKSxvPj1yKTohMH1mdW5jdGlvbiB1KGUsdCxuLGkpe2Zvcih2YXIgcj1lLmxlbmd0aCxvPVtdLGE9MDtyPmE7YSsrKW89by5jb25jYXQoZVthXS5leHBhbmQodCxuLGkpKTtyZXR1cm4gb31mdW5jdGlvbiBoKGUpe3JldHVybiBkZWxldGUgZS5uYW1lLGRlbGV0ZSBlLnByZWZpeCxkZWxldGUgZS5yZW1vdmUsZGVsZXRlIGUuZWRpdCxkZWxldGUgZS5hZGQsZGVsZXRlIGUubmF2aWdhdGUsZX1mdW5jdGlvbiBwKHQpe3JldHVybiBmdW5jdGlvbihuKXtlKEEuZm9ybWF0KCc8c2VsZWN0IGRhdGEtezB9YmluZD1cInZhbHVlOnsxfVwiPicsQS5ucyx0LmZpZWxkKSkuYXBwZW5kVG8obikua2VuZG9Ecm9wRG93bkxpc3Qoe2RhdGFUZXh0RmllbGQ6dC5kYXRhVGV4dEZpZWxkLGRhdGFWYWx1ZUZpZWxkOnQuZGF0YVZhbHVlRmllbGQsZGF0YVNvdXJjZTp0LmRhdGFTb3VyY2UsdmFsdWVQcmltaXRpdmU6dC52YWx1ZVByaW1pdGl2ZSxvcHRpb25MYWJlbDpcIk5vbmVcIix0ZW1wbGF0ZTpBLmZvcm1hdCgnPHNwYW4gY2xhc3M9XCJrLXNjaGVkdWxlci1tYXJrXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiM9IGRhdGEuezB9P3swfTpcIm5vbmVcIiAjXCI+PC9zcGFuPiM9ezF9IycsdC5kYXRhQ29sb3JGaWVsZCx0LmRhdGFUZXh0RmllbGQpfSl9fWZ1bmN0aW9uIGYodCl7cmV0dXJuIGZ1bmN0aW9uKG4pe2UoQS5mb3JtYXQoJzxzZWxlY3QgZGF0YS17MH1iaW5kPVwidmFsdWU6ezF9XCI+JyxBLm5zLHQuZmllbGQpKS5hcHBlbmRUbyhuKS5rZW5kb011bHRpU2VsZWN0KHtkYXRhVGV4dEZpZWxkOnQuZGF0YVRleHRGaWVsZCxkYXRhVmFsdWVGaWVsZDp0LmRhdGFWYWx1ZUZpZWxkLGRhdGFTb3VyY2U6dC5kYXRhU291cmNlLHZhbHVlUHJpbWl0aXZlOnQudmFsdWVQcmltaXRpdmUsaXRlbVRlbXBsYXRlOkEuZm9ybWF0KCc8c3BhbiBjbGFzcz1cImstc2NoZWR1bGVyLW1hcmtcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6Iz0gZGF0YS57MH0/ezB9Olwibm9uZVwiICNcIj48L3NwYW4+Iz17MX0jJyx0LmRhdGFDb2xvckZpZWxkLHQuZGF0YVRleHRGaWVsZCksdGFnVGVtcGxhdGU6QS5mb3JtYXQoJzxzcGFuIGNsYXNzPVwiay1zY2hlZHVsZXItbWFya1wiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojPSBkYXRhLnswfT97MH06XCJub25lXCIgI1wiPjwvc3Bhbj4jPXsxfSMnLHQuZGF0YUNvbG9yRmllbGQsdC5kYXRhVGV4dEZpZWxkKX0pfX1mdW5jdGlvbiBnKHQpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgaSxyLG89XCJcIixhPXQuZGF0YVNvdXJjZS52aWV3KCk7Zm9yKGk9MCxyPWEubGVuZ3RoO3I+aTtpKyspbys9QS5mb3JtYXQoJzxvcHRpb24gdmFsdWU9XCJ7MH1cIj57MX08L29wdGlvbj4nLEEuZ2V0dGVyKHQuZGF0YVZhbHVlRmllbGQpKGFbaV0pLEEuZ2V0dGVyKHQuZGF0YVRleHRGaWVsZCkoYVtpXSkpO2UoQS5mb3JtYXQoJzxzZWxlY3QgZGF0YS17MH1iaW5kPVwidmFsdWU6ezF9XCIgbXVsdGlwbGU9XCJtdWx0aXBsZVwiIGRhdGEtezB9dmFsdWUtcHJpbWl0aXZlPVwiezN9XCI+ezJ9PC9zZWxlY3Q+JyxBLm5zLHQuZmllbGQsbyx0LnZhbHVlUHJpbWl0aXZlKSkuYXBwZW5kVG8obil9fWZ1bmN0aW9uIG0oZSx0KXt2YXIgbixpPWUuZW5kLmdldFRpbWUoKS1lLnN0YXJ0LmdldFRpbWUoKSxyPW5ldyBEYXRlKGUuc3RhcnQuZ2V0VGltZSgpKTtyZXR1cm4gQS5kYXRlLnNldFRpbWUocix0KSxuPW5ldyBEYXRlKHIuZ2V0VGltZSgpKSxBLmRhdGUuc2V0VGltZShuLGksITApLHtzdGFydDpyLGVuZDpufX12YXIgdixfLHksdyxiLGsseCxDLFMsVCxELEE9d2luZG93LmtlbmRvLEU9QS5kYXRlLE09QS5zdXBwb3J0LmlucHV0LFA9RS5NU19QRVJfREFZLEk9RS5nZXREYXRlLHo9QS5kYXRlLmdldE1pbGxpc2Vjb25kcyxGPUEucmVjdXJyZW5jZSxSPUEua2V5cyxCPUEudWksTD1CLldpZGdldCxPPVwic3RyaW5nXCIsSD1CLlBvcHVwLE49Qi5DYWxlbmRhcixWPUEuZGF0YS5EYXRhU291cmNlLFU9ZS5pc1BsYWluT2JqZWN0LFc9ZS5leHRlbmQsaj1lLnByb3h5LEc9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxxPWUuaXNBcnJheSwkPVwiLmtlbmRvU2NoZWR1bGVyXCIsWT1cImNsaWNrXCIsSz1cImNoYW5nZVwiLFE9XCJjYW5jZWxcIixYPVwicmVtb3ZlXCIsSj1cInNhdmVcIixaPVwiYWRkXCIsZXQ9XCJlZGl0XCIsdHQ9Lyg/OnZhbHVlOnN0YXJ0fHZhbHVlOmVuZCkoPzosfCQpLyxudD1JKG5ldyBEYXRlKSxpdD1cInJlY3VycmVuY2VFeGNlcHRpb25cIixydD1cIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBldmVudD9cIixvdD1cIkRvIHlvdSB3YW50IHRvIGRlbGV0ZSBvbmx5IHRoaXMgZXZlbnQgb2NjdXJyZW5jZSBvciB0aGUgd2hvbGUgc2VyaWVzP1wiLGF0PVwiRG8geW91IHdhbnQgdG8gZWRpdCBvbmx5IHRoaXMgZXZlbnQgb2NjdXJyZW5jZSBvciB0aGUgd2hvbGUgc2VyaWVzP1wiLHN0PSc8YSBjbGFzcz1cImstYnV0dG9uICM9Y2xhc3NOYW1lI1wiICM9YXR0ciMgaHJlZj1cIlxcXFwjXCI+Iz10ZXh0IzwvYT4nLGx0PUEudGVtcGxhdGUoJzxkaXYgY2xhc3M9XCJrLWZsb2F0d3JhcCBrLWhlYWRlciBrLXNjaGVkdWxlci10b29sYmFyXCI+IyBpZiAocGRmKSB7ICM8dWwgY2xhc3M9XCJrLXJlc2V0IGstc2NoZWR1bGVyLXRvb2xzXCI+PGxpPjxhIHJvbGU9XCJidXR0b25cIiBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstYnV0dG9uIGstcGRmXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1pLXBkZlwiPjwvc3Bhbj4ke21lc3NhZ2VzLnBkZn08L2E+PC9saT48L3VsPiMgfSAjPHVsIGNsYXNzPVwiay1yZXNldCBrLXNjaGVkdWxlci1uYXZpZ2F0aW9uXCI+PGxpIGNsYXNzPVwiay1zdGF0ZS1kZWZhdWx0IGstaGVhZGVyIGstbmF2LXRvZGF5XCI+PGEgcm9sZT1cImJ1dHRvblwiIGhyZWY9XCJcXFxcI1wiIGNsYXNzPVwiay1saW5rXCI+JHttZXNzYWdlcy50b2RheX08L2E+PC9saT48bGkgY2xhc3M9XCJrLXN0YXRlLWRlZmF1bHQgay1oZWFkZXIgay1uYXYtcHJldlwiPjxhIHJvbGU9XCJidXR0b25cIiBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstbGlua1wiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy13XCI+PC9zcGFuPjwvYT48L2xpPjxsaSBjbGFzcz1cImstc3RhdGUtZGVmYXVsdCBrLWhlYWRlciBrLW5hdi1uZXh0XCI+PGEgcm9sZT1cImJ1dHRvblwiIGhyZWY9XCJcXFxcI1wiIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LWVcIj48L3NwYW4+PC9hPjwvbGk+PGxpIGNsYXNzPVwiay1zdGF0ZS1kZWZhdWx0IGstbmF2LWN1cnJlbnRcIj48YSByb2xlPVwiYnV0dG9uXCIgaHJlZj1cIlxcXFwjXCIgY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWktY2FsZW5kYXJcIj48L3NwYW4+PHNwYW4gZGF0YS0jPW5zI2JpbmQ9XCJ0ZXh0OiBmb3JtYXR0ZWREYXRlXCI+PC9zcGFuPjwvYT48L2xpPjwvdWw+PHVsIGNsYXNzPVwiay1yZXNldCBrLWhlYWRlciBrLXNjaGVkdWxlci12aWV3c1wiPiNmb3IodmFyIHZpZXcgaW4gdmlld3MpeyM8bGkgY2xhc3M9XCJrLXN0YXRlLWRlZmF1bHQgay12aWV3LSM9IHZpZXcudG9Mb3dlckNhc2UoKSAjXCIgZGF0YS0jPW5zI25hbWU9XCIjPXZpZXcjXCI+PGEgcm9sZT1cImJ1dHRvblwiIGhyZWY9XCJcXFxcI1wiIGNsYXNzPVwiay1saW5rXCI+JHt2aWV3c1t2aWV3XS50aXRsZX08L2E+PC9saT4jfSM8L3VsPjwvZGl2PicpLGN0PUEudGVtcGxhdGUoJzxkaXYgY2xhc3M9XCJrLWZsb2F0d3JhcCBrLWhlYWRlciBrLXNjaGVkdWxlci10b29sYmFyXCI+PHVsIGNsYXNzPVwiay1yZXNldCBrLWhlYWRlciBrLXNjaGVkdWxlci1uYXZpZ2F0aW9uXCI+PGxpIGNsYXNzPVwiay1zdGF0ZS1kZWZhdWx0IGstbmF2LXRvZGF5XCI+PGEgcm9sZT1cImJ1dHRvblwiIGhyZWY9XCJcXFxcI1wiIGNsYXNzPVwiay1saW5rXCI+JHttZXNzYWdlcy50b2RheX08L2E+PC9saT48L3VsPjx1bCBjbGFzcz1cImstcmVzZXQgay1oZWFkZXIgay1zY2hlZHVsZXItdmlld3NcIj4jZm9yKHZhciB2aWV3IGluIHZpZXdzKXsjPGxpIGNsYXNzPVwiay1zdGF0ZS1kZWZhdWx0IGstdmlldy0jPSB2aWV3LnRvTG93ZXJDYXNlKCkgI1wiIGRhdGEtIz1ucyNuYW1lPVwiIz12aWV3I1wiPjxhIHJvbGU9XCJidXR0b25cIiBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstbGlua1wiPiR7dmlld3Nbdmlld10udGl0bGV9PC9hPjwvbGk+I30jPC91bD48L2Rpdj48ZGl2IGNsYXNzPVwiay1mbG9hdHdyYXAgay1oZWFkZXIgay1zY2hlZHVsZXItdG9vbGJhclwiPjx1bCBjbGFzcz1cImstcmVzZXQgay1oZWFkZXIgay1zY2hlZHVsZXItbmF2aWdhdGlvblwiPjxsaSBjbGFzcz1cImstc3RhdGUtZGVmYXVsdCBrLW5hdi1wcmV2XCI+PGEgcm9sZT1cImJ1dHRvblwiIGhyZWY9XCJcXFxcI1wiIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LXdcIj48L3NwYW4+PC9hPjwvbGk+PGxpIGNsYXNzPVwiay1zdGF0ZS1kZWZhdWx0IGstbmF2LWN1cnJlbnRcIj48c3BhbiBkYXRhLSM9bnMjYmluZD1cInRleHQ6IGZvcm1hdHRlZERhdGVcIj48L3NwYW4+PC9saT48bGkgY2xhc3M9XCJrLXN0YXRlLWRlZmF1bHQgay1uYXYtbmV4dFwiPjxhIHJvbGU9XCJidXR0b25cIiBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstbGlua1wiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy1lXCI+PC9zcGFuPjwvYT48L2xpPjwvdWw+PC9kaXY+JyksZHQ9ZnVuY3Rpb24odCxuKXt2YXIgbz17bmFtZTpuLmZpZWxkfSxhPU0uZGF0ZT9cIlwiOkEuYXR0cihcInJvbGVcIikrJz1cImRhdGVwaWNrZXJcIiAnLHM9QS5hdHRyKFwicm9sZVwiKSsnPVwiZGF0ZXRpbWVwaWNrZXJcIiAnLGw9bi5tb2RlbC5pc0FsbERheSxjPUEuYXR0cihcInZhbGlkYXRlXCIpK1wiPSdcIishbCtcIidcIixkPUEuYXR0cihcInZhbGlkYXRlXCIpK1wiPSdcIitsK1wiJ1wiO2kobyxuKSxyKG8sbiksZSgnPGlucHV0IHR5cGU9XCJkYXRldGltZS1sb2NhbFwiIHJlcXVpcmVkICcrQS5hdHRyKFwidHlwZVwiKSsnPVwiZGF0ZVwiICcrcytBLmF0dHIoXCJiaW5kXCIpKyc9XCJ2YWx1ZTonK24uZmllbGQrJyxpbnZpc2libGU6aXNBbGxEYXlcIiAnK2MrXCIvPlwiKS5hdHRyKG8pLmFwcGVuZFRvKHQpLGUoJzxpbnB1dCB0eXBlPVwiZGF0ZVwiIHJlcXVpcmVkICcrQS5hdHRyKFwidHlwZVwiKSsnPVwiZGF0ZVwiICcrYStBLmF0dHIoXCJiaW5kXCIpKyc9XCJ2YWx1ZTonK24uZmllbGQrJyx2aXNpYmxlOmlzQWxsRGF5XCIgJytkK1wiLz5cIikuYXR0cihvKS5hcHBlbmRUbyh0KSxlKFwiPHNwYW4gXCIrQS5hdHRyKFwiZm9yXCIpKyc9XCInK24uZmllbGQrJ1wiIGNsYXNzPVwiay1pbnZhbGlkLW1zZ1wiLz4nKS5oaWRlKCkuYXBwZW5kVG8odCl9LHV0PWZ1bmN0aW9uKHQsbil7dmFyIG89e25hbWU6bi5maWVsZH0sYT1uLm1vZGVsLmlzQWxsRGF5LHM9QS5hdHRyKFwidmFsaWRhdGVcIikrXCI9J1wiKyFhK1wiJyBcIixsPUEuYXR0cihcInZhbGlkYXRlXCIpK1wiPSdcIithK1wiJyBcIjtpKG8sbikscihvLG4pLGUoJzxpbnB1dCB0eXBlPVwidGV4dFwiIHJlcXVpcmVkICcrQS5hdHRyKFwidHlwZVwiKSsnPVwiZGF0ZVwiICcrQS5hdHRyKFwicm9sZVwiKSsnPVwiZGF0ZXRpbWVwaWNrZXJcIiAnK0EuYXR0cihcImJpbmRcIikrJz1cInZhbHVlOicrbi5maWVsZCsnLGludmlzaWJsZTppc0FsbERheVwiICcrcytcIi8+XCIpLmF0dHIobykuYXBwZW5kVG8odCksZSgnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcmVxdWlyZWQgJytBLmF0dHIoXCJ0eXBlXCIpKyc9XCJkYXRlXCIgJytBLmF0dHIoXCJyb2xlXCIpKyc9XCJkYXRlcGlja2VyXCIgJytBLmF0dHIoXCJiaW5kXCIpKyc9XCJ2YWx1ZTonK24uZmllbGQrJyx2aXNpYmxlOmlzQWxsRGF5XCIgJytsK1wiLz5cIikuYXR0cihvKS5hcHBlbmRUbyh0KSxlKFwiPHNwYW4gXCIrQS5hdHRyKFwiYmluZFwiKSsnPVwidGV4dDogJytuLmZpZWxkKydUaW1lem9uZVwiPjwvc3Bhbj4nKS5hcHBlbmRUbyh0KSxcImVuZFwiPT09bi5maWVsZCYmZShcIjxzcGFuIFwiK0EuYXR0cihcImJpbmRcIikrJz1cInRleHQ6IHN0YXJ0VGltZXpvbmUsIGludmlzaWJsZTogZW5kVGltZXpvbmVcIj48L3NwYW4+JykuYXBwZW5kVG8odCksZShcIjxzcGFuIFwiK0EuYXR0cihcImZvclwiKSsnPVwiJytuLmZpZWxkKydcIiBjbGFzcz1cImstaW52YWxpZC1tc2dcIi8+JykuaGlkZSgpLmFwcGVuZFRvKHQpfSxodD1mdW5jdGlvbih0LG4pe2UoXCI8ZGl2IFwiK0EuYXR0cihcImJpbmRcIikrJz1cInZhbHVlOicrbi5maWVsZCsnXCIgLz4nKS5hdHRyKHtuYW1lOm4uZmllbGR9KS5hcHBlbmRUbyh0KS5rZW5kb1JlY3VycmVuY2VFZGl0b3Ioe3N0YXJ0Om4ubW9kZWwuc3RhcnQsdGltZXpvbmU6bi50aW1lem9uZSxtZXNzYWdlczpuLm1lc3NhZ2VzfSl9LHB0PWZ1bmN0aW9uKHQsbil7ZShcIjxkaXYgXCIrQS5hdHRyKFwiYmluZFwiKSsnPVwidmFsdWU6JytuLmZpZWxkKydcIiAvPicpLmF0dHIoe25hbWU6bi5maWVsZH0pLmFwcGVuZFRvKHQpLmtlbmRvTW9iaWxlUmVjdXJyZW5jZUVkaXRvcih7c3RhcnQ6bi5tb2RlbC5zdGFydCx0aW1lem9uZTpuLnRpbWV6b25lLG1lc3NhZ2VzOm4ubWVzc2FnZXMscGFuZTpuLnBhbmUsdmFsdWU6bi5tb2RlbFtuLmZpZWxkXX0pfSxmdD1mdW5jdGlvbih0LGkpe3ZhciByPW4oaS5tb2RlbCxpLm1lc3NhZ2VzLm5vVGltZXpvbmUpO2UoJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJrLWJ1dHRvbiBrLXRpbWV6b25lLWJ1dHRvblwiIGRhdGEtYmluZD1cImludmlzaWJsZTppc0FsbERheVwiPicrcitcIjwvYT5cIikuY2xpY2soaS5jbGljaykuYXBwZW5kVG8odCl9LGd0PWZ1bmN0aW9uKHQsbil7ZSgnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImstYnV0dG9uXCIgZGF0YS1iaW5kPVwiaW52aXNpYmxlOmlzQWxsRGF5XCI+JytuLm1lc3NhZ2VzLnRpbWV6b25lRWRpdG9yQnV0dG9uK1wiPC9hPlwiKS5jbGljayhuLmNsaWNrKS5hcHBlbmRUbyh0KX0sbXQ9ZnVuY3Rpb24odCxuKXtlKFwiPGRpdiBcIitBLmF0dHIoXCJiaW5kXCIpKyc9XCJ2YWx1ZTonK24uZmllbGQrJ1wiIC8+JykuYXR0cih7bmFtZTpuLmZpZWxkfSkudG9nZ2xlKG4udmlzaWJsZSkuYXBwZW5kVG8odCkua2VuZG9Nb2JpbGVUaW1lem9uZUVkaXRvcih7b3B0aW9uTGFiZWw6bi5ub1RpbWV6b25lfSl9LHZ0PWZ1bmN0aW9uKHQsbil7ZShcIjxkaXYgXCIrQS5hdHRyKFwiYmluZFwiKSsnPVwidmFsdWU6JytuLmZpZWxkKydcIiAvPicpLmF0dHIoe25hbWU6bi5maWVsZH0pLnRvZ2dsZShuLnZpc2libGUpLmFwcGVuZFRvKHQpLmtlbmRvVGltZXpvbmVFZGl0b3Ioe29wdGlvbkxhYmVsOm4ubm9UaW1lem9uZX0pfSxfdD1BLkNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpPXQudGltZXpvbmU7dGhpcy5yZWFkZXI9bixuLm1vZGVsJiYodGhpcy5tb2RlbD1uLm1vZGVsKSx0aGlzLnRpbWV6b25lPWksdGhpcy5kYXRhPW8oZS5wcm94eSh0aGlzLmRhdGEsdGhpcyksaSksdGhpcy5zZXJpYWxpemU9YShlLnByb3h5KHRoaXMuc2VyaWFsaXplLHRoaXMpLGkpfSxlcnJvcnM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVhZGVyLmVycm9ycyhlKX0scGFyc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVhZGVyLnBhcnNlKGUpfSxkYXRhOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlYWRlci5kYXRhKGUpfSx0b3RhbDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZWFkZXIudG90YWwoZSl9LGdyb3VwczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZWFkZXIuZ3JvdXBzKGUpfSxhZ2dyZWdhdGVzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlYWRlci5hZ2dyZWdhdGVzKGUpfSxzZXJpYWxpemU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVhZGVyLnNlcmlhbGl6ZShlKX19KSx5dD1BLmRhdGEuTW9kZWwuZGVmaW5lKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7QS5kYXRhLk1vZGVsLmZuLmluaXQuY2FsbCh0LGUpLHQuX2RlZmF1bHRJZD10LmRlZmF1bHRzW3QuaWRGaWVsZF19LF90aW1lOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXNbZV0sbj1lK1wiVGltZVwiO3JldHVybiB0aGlzW25dP3RoaXNbbl0tQS5kYXRlLnRvVXRjVGltZShBLmRhdGUuZ2V0RGF0ZSh0KSk6eih0KX0sX2RhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZStcIlRpbWVcIjtyZXR1cm4gdGhpc1t0XT90aGlzW3RdLXRoaXMuX3RpbWUoZSk6QS5kYXRlLmdldERhdGUodGhpc1tlXSl9LGNsb25lOmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpcy51aWQscj1uZXcgdGhpcy5jb25zdHJ1Y3RvcihlLmV4dGVuZCh7fSx0aGlzLnRvSlNPTigpLHQpKTtyZXR1cm4gbnx8KHIudWlkPWkpLHJ9LGR1cmF0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbmQsdD10aGlzLnN0YXJ0LG49KGUuZ2V0VGltZXpvbmVPZmZzZXQoKS10LmdldFRpbWV6b25lT2Zmc2V0KCkpKkEuZGF0ZS5NU19QRVJfTUlOVVRFO3JldHVybiBlLXQtbn0sZXhwYW5kOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gRj9GLmV4cGFuZCh0aGlzLGUsdCxuKTpbdGhpc119LHVwZGF0ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSl0aGlzLnNldCh0LGVbdF0pO3RoaXMuc3RhcnRUaW1lJiZ0aGlzLnNldChcInN0YXJ0VGltZVwiLEEuZGF0ZS50b1V0Y1RpbWUodGhpcy5zdGFydCkpLHRoaXMuZW5kVGltZSYmdGhpcy5zZXQoXCJlbmRUaW1lXCIsQS5kYXRlLnRvVXRjVGltZSh0aGlzLmVuZCkpfSxpc011bHRpRGF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNBbGxEYXl8fHRoaXMuZHVyYXRpb24oKT49QS5kYXRlLk1TX1BFUl9EQVl9LGlzRXhjZXB0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNOZXcoKSYmdGhpcy5yZWN1cnJlbmNlSWR9LGlzT2NjdXJyZW5jZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTmV3KCkmJnRoaXMucmVjdXJyZW5jZUlkfSxpc1JlY3VycmluZzpmdW5jdGlvbigpe3JldHVybiEoIXRoaXMucmVjdXJyZW5jZVJ1bGUmJiF0aGlzLnJlY3VycmVuY2VJZCl9LGlzUmVjdXJyZW5jZUhlYWQ6ZnVuY3Rpb24oKXtyZXR1cm4hKCF0aGlzLmlkfHwhdGhpcy5yZWN1cnJlbmNlUnVsZSl9LHRvT2NjdXJyZW5jZTpmdW5jdGlvbih0KXtyZXR1cm4gdD1lLmV4dGVuZCh0LHtyZWN1cnJlbmNlRXhjZXB0aW9uOm51bGwscmVjdXJyZW5jZVJ1bGU6bnVsbCxyZWN1cnJlbmNlSWQ6dGhpcy5pZHx8dGhpcy5yZWN1cnJlbmNlSWR9KSx0W3RoaXMuaWRGaWVsZF09dGhpcy5kZWZhdWx0c1t0aGlzLmlkRmllbGRdLHRoaXMuY2xvbmUodCwhMCl9LHRvSlNPTjpmdW5jdGlvbigpe3ZhciBlPUEuZGF0YS5Nb2RlbC5mbi50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gZS51aWQ9dGhpcy51aWQsZGVsZXRlIGUuc3RhcnRUaW1lLGRlbGV0ZSBlLmVuZFRpbWUsZX0sc2hvdWxkU2VyaWFsaXplOmZ1bmN0aW9uKGUpe3JldHVybiBBLmRhdGEuTW9kZWwuZm4uc2hvdWxkU2VyaWFsaXplLmNhbGwodGhpcyxlKSYmXCJfZGVmYXVsdElkXCIhPT1lfSxzZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbz10aGlzLmlzQWxsRGF5fHwhMTtBLmRhdGEuTW9kZWwuZm4uc2V0LmNhbGwodGhpcyxlLHQpLFwiaXNBbGxEYXlcIj09ZSYmdCE9byYmKG49QS5kYXRlLmdldERhdGUodGhpcy5zdGFydCksaT1uZXcgRGF0ZSh0aGlzLmVuZCkscj1BLmRhdGUuZ2V0TWlsbGlzZWNvbmRzKGkpLDA9PT1yJiZ0JiYocj1QKSx0aGlzLnNldChcInN0YXJ0XCIsbiksdD09PSEwPyhBLmRhdGUuc2V0VGltZShpLC1yKSxuPmkmJihpPW4pKTpBLmRhdGUuc2V0VGltZShpLFAtciksdGhpcy5zZXQoXCJlbmRcIixpKSl9LGlkOlwiaWRcIixmaWVsZHM6e2lkOnt0eXBlOlwibnVtYmVyXCJ9LHRpdGxlOntkZWZhdWx0VmFsdWU6XCJcIix0eXBlOlwic3RyaW5nXCJ9LHN0YXJ0Ont0eXBlOlwiZGF0ZVwiLHZhbGlkYXRpb246e3JlcXVpcmVkOiEwfX0sc3RhcnRUaW1lem9uZTp7dHlwZTpcInN0cmluZ1wifSxlbmQ6e3R5cGU6XCJkYXRlXCIsdmFsaWRhdGlvbjp7cmVxdWlyZWQ6ITAsZGF0ZUNvbXBhcmU6e3ZhbHVlOmQsbWVzc2FnZTpcIkVuZCBkYXRlIHNob3VsZCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHN0YXJ0IGRhdGVcIn19fSxlbmRUaW1lem9uZTp7dHlwZTpcInN0cmluZ1wifSxyZWN1cnJlbmNlUnVsZTp7ZGVmYXVsdFZhbHVlOlwiXCIsdHlwZTpcInN0cmluZ1wifSxyZWN1cnJlbmNlRXhjZXB0aW9uOntkZWZhdWx0VmFsdWU6XCJcIix0eXBlOlwic3RyaW5nXCJ9LGlzQWxsRGF5Ont0eXBlOlwiYm9vbGVhblwiLGRlZmF1bHRWYWx1ZTohMX0sZGVzY3JpcHRpb246e3R5cGU6XCJzdHJpbmdcIn19fSksd3Q9Vi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7Vi5mbi5pbml0LmNhbGwodGhpcyxXKCEwLHt9LHtzY2hlbWE6e21vZGVsQmFzZTp5dCxtb2RlbDp5dH19LGUpKSx0aGlzLnJlYWRlcj1uZXcgX3QodGhpcy5vcHRpb25zLnNjaGVtYSx0aGlzLnJlYWRlcil9LGV4cGFuZDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMudmlldygpLGk9e307cmV0dXJuIGUmJnQmJih0PW5ldyBEYXRlKHQuZ2V0VGltZSgpK1AtMSksaT17bG9naWM6XCJvclwiLGZpbHRlcnM6W3tsb2dpYzpcImFuZFwiLGZpbHRlcnM6W3tmaWVsZDpcInN0YXJ0XCIsb3BlcmF0b3I6XCJndGVcIix2YWx1ZTplfSx7ZmllbGQ6XCJlbmRcIixvcGVyYXRvcjpcImd0ZVwiLHZhbHVlOmV9LHtmaWVsZDpcInN0YXJ0XCIsb3BlcmF0b3I6XCJsdGVcIix2YWx1ZTp0fV19LHtsb2dpYzpcImFuZFwiLGZpbHRlcnM6W3tmaWVsZDpcInN0YXJ0XCIsb3BlcmF0b3I6XCJsdGVcIix2YWx1ZTpuZXcgRGF0ZShlLmdldFRpbWUoKStQLTEpfSx7ZmllbGQ6XCJlbmRcIixvcGVyYXRvcjpcImd0ZVwiLHZhbHVlOmV9XX1dfSxuPW5ldyBBLmRhdGEuUXVlcnkodShuLGUsdCx0aGlzLnJlYWRlci50aW1lem9uZSkpLmZpbHRlcihpKS50b0FycmF5KCkpLG59LGNhbmNlbENoYW5nZXM6ZnVuY3Rpb24oZSl7ZSYmZS5pc09jY3VycmVuY2UoKSYmdGhpcy5fcmVtb3ZlRXhjZXB0aW9uRGF0ZShlKSxWLmZuLmNhbmNlbENoYW5nZXMuY2FsbCh0aGlzLGUpfSxpbnNlcnQ6ZnVuY3Rpb24oZSx0KXtpZih0KXtpZighKHQgaW5zdGFuY2VvZiB5dCkpe3ZhciBuPXQ7dD10aGlzLl9jcmVhdGVOZXdNb2RlbCgpLHQuYWNjZXB0KG4pfXJldHVybih0LmlzUmVjdXJyZW5jZUhlYWQoKXx8dC5yZWN1cnJlbmNlSWQpJiYodD10LnJlY3VycmVuY2VJZD90OnQudG9PY2N1cnJlbmNlKCksdGhpcy5fYWRkRXhjZXB0aW9uRGF0ZSh0KSksVi5mbi5pbnNlcnQuY2FsbCh0aGlzLGUsdCl9fSxyZW1vdmU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaXNSZWN1cnJlbmNlSGVhZCgpP3RoaXMuX3JlbW92ZUV4Y2VwdGlvbnMoZSk6ZS5pc1JlY3VycmluZygpJiZ0aGlzLl9hZGRFeGNlcHRpb25EYXRlKGUpLFYuZm4ucmVtb3ZlLmNhbGwodGhpcyxlKX0sX3JlbW92ZUV4Y2VwdGlvbnM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMuZGF0YSgpLnNsaWNlKDApLG49dC5zaGlmdCgpLGk9ZS5pZDtuOyluLnJlY3VycmVuY2VJZD09PWkmJlYuZm4ucmVtb3ZlLmNhbGwodGhpcyxuKSxuPXQuc2hpZnQoKTtlLnNldChpdCxcIlwiKX0sX3JlbW92ZUV4Y2VwdGlvbkRhdGU6ZnVuY3Rpb24oZSl7dmFyIHQsbjtlLnJlY3VycmVuY2VJZCYmKHQ9dGhpcy5nZXQoZS5yZWN1cnJlbmNlSWQpLHQmJihuPWUuc3RhcnQsdC5zZXQoaXQsdC5yZWN1cnJlbmNlRXhjZXB0aW9uLnJlcGxhY2UoRi50b0V4Y2VwdGlvblN0cmluZyhuLHRoaXMucmVhZGVyLnRpbWV6b25lKSxcIlwiKSkpKX0sX2FkZEV4Y2VwdGlvbkRhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdGFydCxuPXRoaXMucmVhZGVyLnRpbWV6b25lLGk9dGhpcy5nZXQoZS5yZWN1cnJlbmNlSWQpLHI9aS5yZWN1cnJlbmNlRXhjZXB0aW9ufHxcIlwiO0YuaXNFeGNlcHRpb24ocix0LG4pfHxpLnNldChpdCxyK0YudG9FeGNlcHRpb25TdHJpbmcodCxuKSl9fSk7d3QuY3JlYXRlPWZ1bmN0aW9uKGUpe2U9ZSYmZS5wdXNoP3tkYXRhOmV9OmU7dmFyIHQ9ZXx8e30sbj10LmRhdGE7aWYodC5kYXRhPW4sISh0IGluc3RhbmNlb2Ygd3QpJiZ0IGluc3RhbmNlb2YgQS5kYXRhLkRhdGFTb3VyY2UpdGhyb3cgRXJyb3IoXCJJbmNvcnJlY3QgRGF0YVNvdXJjZSB0eXBlLiBPbmx5IFNjaGVkdWxlckRhdGFTb3VyY2UgaW5zdGFuY2VzIGFyZSBzdXBwb3J0ZWRcIik7cmV0dXJuIHQgaW5zdGFuY2VvZiB3dD90Om5ldyB3dCh0KX0sVyghMCxBLmRhdGEse1NjaGVkdWxlckRhdGFTb3VyY2U6d3QsU2NoZWR1bGVyRGF0YVJlYWRlcjpfdCxTY2hlZHVsZXJFdmVudDp5dH0pLHY9e3VwZGF0ZTp7dGV4dDpcIlNhdmVcIixjbGFzc05hbWU6XCJrLXByaW1hcnkgay1zY2hlZHVsZXItdXBkYXRlXCJ9LGNhbmNlbGVkaXQ6e3RleHQ6XCJDYW5jZWxcIixjbGFzc05hbWU6XCJrLXNjaGVkdWxlci1jYW5jZWxcIn0sZGVzdHJveTp7dGV4dDpcIkRlbGV0ZVwiLGltYWdlQ2xhc3M6XCJrLWRlbGV0ZVwiLGNsYXNzTmFtZTpcImstcHJpbWFyeSBrLXNjaGVkdWxlci1kZWxldGVcIixpY29uQ2xhc3M6XCJrLWljb25cIn19LF89e21vYmlsZTp7ZGF0ZVJhbmdlOmR0LHRpbWV6b25lUG9wVXA6ZnQsdGltZXpvbmU6bXQscmVjdXJyZW5jZTpwdCxkZXNjcmlwdGlvbjonPHRleHRhcmVhIG5hbWU9XCJkZXNjcmlwdGlvblwiIGNsYXNzPVwiay10ZXh0Ym94XCIvPicsbXVsdGlwbGVSZXNvdXJjZXM6ZyxyZXNvdXJjZXM6cH0sZGVza3RvcDp7ZGF0ZVJhbmdlOnV0LHRpbWV6b25lUG9wVXA6Z3QsdGltZXpvbmU6dnQscmVjdXJyZW5jZTpodCxkZXNjcmlwdGlvbjonPHRleHRhcmVhIG5hbWU9XCJkZXNjcmlwdGlvblwiIGNsYXNzPVwiay10ZXh0Ym94XCIvPicsbXVsdGlwbGVSZXNvdXJjZXM6ZixyZXNvdXJjZXM6cH19LHk9QS5PYnNlcnZhYmxlLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe0EuT2JzZXJ2YWJsZS5mbi5pbml0LmNhbGwodGhpcyksdGhpcy5lbGVtZW50PWUsdGhpcy5vcHRpb25zPVcoITAse30sdGhpcy5vcHRpb25zLHQpLHRoaXMuY3JlYXRlQnV0dG9uPXRoaXMub3B0aW9ucy5jcmVhdGVCdXR0b24sdGhpcy50b2dnbGVEYXRlVmFsaWRhdGlvbkhhbmRsZXI9aih0aGlzLl90b2dnbGVEYXRlVmFsaWRhdGlvbix0aGlzKX0sX3RvZ2dsZURhdGVWYWxpZGF0aW9uOmZ1bmN0aW9uKHQpe2lmKFwiaXNBbGxEYXlcIj09dC5maWVsZCl7dmFyIG4saSxyLG89dGhpcy5jb250YWluZXIsYT10aGlzLmVkaXRhYmxlLm9wdGlvbnMubW9kZWwuaXNBbGxEYXkscz1BLmF0dHIoXCJiaW5kXCIpO28uZmluZChcIltcIitzK1wiKj1lbmRdLFtcIitzK1wiKj1zdGFydF1cIikuZWFjaChmdW5jdGlvbigpe249ZSh0aGlzKSx0dC50ZXN0KG4uYXR0cihzKSkmJihpPW4uaXMoXCJbXCIrQS5hdHRyKFwicm9sZVwiKStcIj1kYXRldGltZXBpY2tlcl0sW3R5cGUqPWRhdGV0aW1lXVwiKSxyPWEhPT1pLG4uYXR0cihBLmF0dHIoXCJ2YWxpZGF0ZVwiKSxyKSl9KX19LGZpZWxkczpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj10aGlzLG89ci5vcHRpb25zLm1lc3NhZ2VzLGE9ci5vcHRpb25zLnRpbWV6b25lLHM9ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHIuX2luaXRUaW1lem9uZUVkaXRvcih0LHRoaXMpfSxsPVt7ZmllbGQ6XCJ0aXRsZVwiLHRpdGxlOm8uZWRpdG9yLnRpdGxlfSx7ZmllbGQ6XCJzdGFydFwiLHRpdGxlOm8uZWRpdG9yLnN0YXJ0LGVkaXRvcjplLmRhdGVSYW5nZSx0aW1lem9uZTphfSx7ZmllbGQ6XCJlbmRcIix0aXRsZTpvLmVkaXRvci5lbmQsZWRpdG9yOmUuZGF0ZVJhbmdlLHRpbWV6b25lOmF9LHtmaWVsZDpcImlzQWxsRGF5XCIsdGl0bGU6by5lZGl0b3IuYWxsRGF5RXZlbnR9XTtBLnRpbWV6b25lLndpbmRvd3Nfem9uZXMmJihsLnB1c2goe2ZpZWxkOlwidGltZXpvbmVcIix0aXRsZTpvLmVkaXRvci50aW1lem9uZSxlZGl0b3I6ZS50aW1lem9uZVBvcFVwLGNsaWNrOnMsbWVzc2FnZXM6by5lZGl0b3IsbW9kZWw6dH0pLGwucHVzaCh7ZmllbGQ6XCJzdGFydFRpbWV6b25lXCIsdGl0bGU6by5lZGl0b3Iuc3RhcnRUaW1lem9uZSxlZGl0b3I6ZS50aW1lem9uZSxub1RpbWV6b25lOm8uZWRpdG9yLm5vVGltZXpvbmV9KSxsLnB1c2goe2ZpZWxkOlwiZW5kVGltZXpvbmVcIix0aXRsZTpvLmVkaXRvci5lbmRUaW1lem9uZSxlZGl0b3I6ZS50aW1lem9uZSxub1RpbWV6b25lOm8uZWRpdG9yLm5vVGltZXpvbmV9KSksdC5yZWN1cnJlbmNlSWR8fGwucHVzaCh7ZmllbGQ6XCJyZWN1cnJlbmNlUnVsZVwiLHRpdGxlOm8uZWRpdG9yLnJlcGVhdCxlZGl0b3I6ZS5yZWN1cnJlbmNlLHRpbWV6b25lOmEsbWVzc2FnZXM6by5yZWN1cnJlbmNlRWRpdG9yLHBhbmU6dGhpcy5wYW5lfSksXCJkZXNjcmlwdGlvblwiaW4gdCYmbC5wdXNoKHtmaWVsZDpcImRlc2NyaXB0aW9uXCIsdGl0bGU6by5lZGl0b3IuZGVzY3JpcHRpb24sZWRpdG9yOmUuZGVzY3JpcHRpb259KTtmb3Iobj0wO3RoaXMub3B0aW9ucy5yZXNvdXJjZXMubGVuZ3RoPm47bisrKWk9dGhpcy5vcHRpb25zLnJlc291cmNlc1tuXSxsLnB1c2goe2ZpZWxkOmkuZmllbGQsdGl0bGU6aS50aXRsZSxlZGl0b3I6aS5tdWx0aXBsZT9lLm11bHRpcGxlUmVzb3VyY2VzKGkpOmUucmVzb3VyY2VzKGkpfSk7cmV0dXJuIGx9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkaXRhYmxlLmVuZCgpfSxfYnVpbGRFZGl0VGVtcGxhdGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhLHM9dGhpcy5vcHRpb25zLm1lc3NhZ2VzLGw9Vyh7fSxBLlRlbXBsYXRlLHRoaXMub3B0aW9ucy50ZW1wbGF0ZVNldHRpbmdzKSxjPWwucGFyYW1OYW1lLGQ9dGhpcy5vcHRpb25zLmVkaXRhYmxlLnRlbXBsYXRlLHU9XCJcIjtpZihkKXR5cGVvZiBkPT09TyYmKGQ9d2luZG93LnVuZXNjYXBlKGQpKSx1Kz1BLnRlbXBsYXRlKGQsbCkoZSk7ZWxzZSBmb3IoaT0wLHI9dC5sZW5ndGg7cj5pO2krKylvPXRbaV0sXCJzdGFydFRpbWV6b25lXCI9PT1vLmZpZWxkJiYodSs9JzxkaXYgY2xhc3M9XCJrLXBvcHVwLWVkaXQtZm9ybSBrLXNjaGVkdWxlci1lZGl0LWZvcm0gay1zY2hlZHVsZXItdGltZXpvbmVzXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj4nLHUrPSc8ZGl2IGNsYXNzPVwiay1lZGl0LWZvcm0tY29udGFpbmVyXCI+Jyx1Kz0nPGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjwvZGl2PicsdSs9JzxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj48bGFiZWwgY2xhc3M9XCJrLWNoZWNrXCI+PGlucHV0IGNsYXNzPVwiay10aW1lem9uZS10b2dnbGVcIiB0eXBlPVwiY2hlY2tib3hcIiAvPicrcy5lZGl0b3Iuc2VwYXJhdGVUaW1lem9uZXMrXCI8L2xhYmVsPjwvZGl2PlwiKSx1Kz0nPGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbCBmb3I9XCInK28uZmllbGQrJ1wiPicrKG8udGl0bGV8fG8uZmllbGR8fFwiXCIpK1wiPC9sYWJlbD48L2Rpdj5cIiwhZS5lZGl0YWJsZXx8ZS5lZGl0YWJsZShvLmZpZWxkKT8obi5wdXNoKG8pLHUrPVwiPGRpdiBcIitBLmF0dHIoXCJjb250YWluZXItZm9yXCIpKyc9XCInK28uZmllbGQrJ1wiIGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PC9kaXY+Jyk6KGE9XCIjOlwiLG8uZmllbGQ/KG89QS5leHByKG8uZmllbGQsYyksYSs9bytcIj09bnVsbD8nJzpcIitvKTphKz1cIicnXCIsYSs9XCIjXCIsYT1BLnRlbXBsYXRlKGEsbCksdSs9JzxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj4nK2EoZSkrXCI8L2Rpdj5cIiksXCJlbmRUaW1lem9uZVwiPT09by5maWVsZCYmKHUrPXRoaXMuX2NyZWF0ZUVuZFRpbWV6b25lQnV0dG9uKCkpO3JldHVybiB1fSxfY3JlYXRlRW5kVGltZXpvbmVCdXR0b246ZnVuY3Rpb24oKXtyZXR1cm5cIjwvZGl2PjwvZGl2PlwifSxfcmV2ZXJ0VGltZXpvbmVzOmZ1bmN0aW9uKGUpe2Uuc2V0KFwic3RhcnRUaW1lem9uZVwiLHRoaXMuX3N0YXJ0VGltZXpvbmUpLGUuc2V0KFwiZW5kVGltZXpvbmVcIix0aGlzLl9lbmRUaW1lem9uZSksZGVsZXRlIHRoaXMuX3N0YXJ0VGltZXpvbmUsZGVsZXRlIHRoaXMuX2VuZFRpbWV6b25lfX0pLHc9eS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt5LmZuLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMucGFuZT1BLm1vYmlsZS51aS5QYW5lLndyYXAodGhpcy5lbGVtZW50KSx0aGlzLnBhbmUuZWxlbWVudC5wYXJlbnQoKS5jc3MoXCJoZWlnaHRcIix0aGlzLm9wdGlvbnMuaGVpZ2h0KSx0aGlzLnZpZXc9dGhpcy5wYW5lLnZpZXcoKSx0aGlzLl9hY3Rpb25TaGVldEJ1dHRvblRlbXBsYXRlPUEudGVtcGxhdGUoJzxsaT48YSAjPWF0dHIjIGNsYXNzPVwiay1idXR0b24gIz1jbGFzc05hbWUjXCIgaHJlZj1cIlxcXFwjXCI+Izp0ZXh0IzwvYT48L2xpPicpLHRoaXMuX2FjdGlvblNoZWV0UG9wdXBPcHRpb25zPWUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5oYXNDbGFzcyhcImttLXJvb3RcIik/e21vZGFsOiExfTp7YWxpZ246XCJib3R0b20gY2VudGVyXCIscG9zaXRpb246XCJib3R0b20gY2VudGVyXCIsZWZmZWN0Olwic2xpZGVJbjp1cFwifX0sb3B0aW9uczp7YW5pbWF0aW9uczp7bGVmdDpcInNsaWRlXCIscmlnaHQ6XCJzbGlkZTpyaWdodFwifX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuY2xvc2UoKSx0aGlzLnVuYmluZCgpLHRoaXMucGFuZS5kZXN0cm95KCl9LF9pbml0VGltZXpvbmVFZGl0b3I6ZnVuY3Rpb24odCl7dmFyIGkscj10aGlzLG89ci5wYW5lLGE9ci5vcHRpb25zLm1lc3NhZ2VzLHM9ci50aW1lem9uZVZpZXcsbD1yLmNvbnRhaW5lci5maW5kKFwiLmstc2NoZWR1bGVyLXRpbWV6b25lc1wiKSxjPWwuZmluZChcIi5rLXRpbWV6b25lLXRvZ2dsZVwiKSxkPWwuZmluZChcIi5rLWVkaXQtbGFiZWw6bGFzdFwiKS5hZGQobC5maW5kKFwiLmstZWRpdC1maWVsZDpsYXN0XCIpKSx1PWZ1bmN0aW9uKGUpe2lmKFwic3RhcnRUaW1lem9uZVwiPT09ZS5maWVsZCl7dmFyIG49dC5zdGFydFRpbWV6b25lO2MucHJvcChcImRpc2FibGVkXCIsIW4pLG58fChkLmhpZGUoKSx0LnNldChcImVuZFRpbWV6b25lXCIsXCJcIiksYy5wcm9wKFwiY2hlY2tlZFwiLCExKSl9fTtyLl9zdGFydFRpbWV6b25lPXQuc3RhcnRUaW1lem9uZXx8XCJcIixyLl9lbmRUaW1lem9uZT10LmVuZFRpbWV6b25lfHxcIlwiLHN8fChpPSc8ZGl2IGRhdGEtcm9sZT1cInZpZXdcIiBjbGFzcz1cImstcG9wdXAtZWRpdC1mb3JtIGstc2NoZWR1bGVyLWVkaXQtZm9ybSBrLW1vYmlsZS1saXN0XCI+PGRpdiBkYXRhLXJvbGU9XCJoZWFkZXJcIiBjbGFzcz1cImstaGVhZGVyXCI+PGEgaHJlZj1cIiNcIiBjbGFzcz1cImstYnV0dG9uIGstc2NoZWR1bGVyLWNhbmNlbFwiPicrYS5jYW5jZWwrXCI8L2E+XCIrYS5lZGl0b3IudGltZXpvbmVUaXRsZSsnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImstYnV0dG9uIGstc2NoZWR1bGVyLXVwZGF0ZVwiPicrYS5zYXZlK1wiPC9hPjwvZGl2PjwvZGl2PlwiLHRoaXMudGltZXpvbmVWaWV3PXM9by5hcHBlbmQoaSkscy5jb250ZW50RWxlbWVudCgpLmFwcGVuZChsLnNob3coKSkscy5lbGVtZW50Lm9uKFkrJCxcIi5rLXNjaGVkdWxlci1jYW5jZWwsIC5rLXNjaGVkdWxlci11cGRhdGVcIixmdW5jdGlvbihpKXt2YXIgcyxsO2kucHJldmVudERlZmF1bHQoKSxpLnN0b3BQcm9wYWdhdGlvbigpLGUodGhpcykuaGFzQ2xhc3MoXCJrLXNjaGVkdWxlci1jYW5jZWxcIikmJnIuX3JldmVydFRpbWV6b25lcyh0KSx0LnVuYmluZChcImNoYW5nZVwiLHUpLHM9by5lbGVtZW50LmZpbmQoXCIjZWRpdFwiKS5kYXRhKFwia2VuZG9Nb2JpbGVWaWV3XCIpLGw9bih0LGEuZWRpdG9yLm5vVGltZXpvbmUpLHMuY29udGVudEVsZW1lbnQoKS5maW5kKFwiLmstdGltZXpvbmUtYnV0dG9uXCIpLnRleHQobCksby5uYXZpZ2F0ZShzLHIub3B0aW9ucy5hbmltYXRpb25zLnJpZ2h0KX0pLGMuY2xpY2soZnVuY3Rpb24oKXtkLnRvZ2dsZShjLnByb3AoXCJjaGVja2VkXCIpKSx0LnNldChcImVuZFRpbWV6b25lXCIsXCJcIil9KSx0LmJpbmQoXCJjaGFuZ2VcIix1KSksYy5wcm9wKFwiY2hlY2tlZFwiLHQuZW5kVGltZXpvbmUpLnByb3AoXCJkaXNhYmxlZFwiLCF0LnN0YXJ0VGltZXpvbmUpLHQuZW5kVGltZXpvbmU/ZC5zaG93KCk6ZC5oaWRlKCksby5uYXZpZ2F0ZShzLHIub3B0aW9ucy5hbmltYXRpb25zLmxlZnQpfSxfY3JlYXRlQWN0aW9uU2hlZXRCdXR0b246ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGVtcGxhdGU9dGhpcy5fYWN0aW9uU2hlZXRCdXR0b25UZW1wbGF0ZSx0aGlzLmNyZWF0ZUJ1dHRvbihlKX0sc2hvd0RpYWxvZzpmdW5jdGlvbih0KXt2YXIgbixpLHI9XCJcIixvPSc8dWw+PGxpIGNsYXNzPVwia20tYWN0aW9uc2hlZXQtdGl0bGVcIj4nK3QudGl0bGUrXCI8L2xpPlwiLGE9dGhpcy5lbGVtZW50LmZpbmQoXCIuay1ldmVudFtcIitBLmF0dHIoXCJ1aWRcIikrXCI9J1wiK3QubW9kZWwudWlkK1wiJ11cIik7Zm9yKHRoaXMuY29udGFpbmVyJiYoYT10aGlzLmNvbnRhaW5lci5maW5kKFwiLmstc2NoZWR1bGVyLWRlbGV0ZVwiKSxhWzBdJiYocj1cInBob25lXCIpKSxuPTA7dC5idXR0b25zLmxlbmd0aD5uO24rKylvKz10aGlzLl9jcmVhdGVBY3Rpb25TaGVldEJ1dHRvbih0LmJ1dHRvbnNbbl0pO1xyXG5vKz1cIjwvdWw+XCIsaT1lKG8pLmFwcGVuZFRvKHRoaXMucGFuZS52aWV3KCkuZWxlbWVudCkua2VuZG9Nb2JpbGVBY3Rpb25TaGVldCh7dHlwZTpyLGNhbmNlbDp0aGlzLm9wdGlvbnMubWVzc2FnZXMuY2FuY2VsLGNhbmNlbFRlbXBsYXRlOic8bGkgY2xhc3M9XCJrbS1hY3Rpb25zaGVldC1jYW5jZWxcIj48YSBjbGFzcz1cImstYnV0dG9uXCIgaHJlZj1cIlxcXFwjXCI+IzpjYW5jZWwjPC9hPjwvbGk+JyxjbG9zZTpmdW5jdGlvbigpe3RoaXMuZGVzdHJveSgpfSxjb21tYW5kOmZ1bmN0aW9uKG4pe3ZhciByPWkuZWxlbWVudC5maW5kKFwibGk6bm90KC5rbS1hY3Rpb25zaGVldC1jYW5jZWwpID4gLmstYnV0dG9uXCIpLmluZGV4KGUobi5jdXJyZW50VGFyZ2V0KSk7cj4tMSYmKGkuY2xvc2UoKSx0LmJ1dHRvbnNbcl0uY2xpY2soKSl9LHBvcHVwOnRoaXMuX2FjdGlvblNoZWV0UG9wdXBPcHRpb25zfSkuZGF0YShcImtlbmRvTW9iaWxlQWN0aW9uU2hlZXRcIiksaS5vcGVuKGEpfSxlZGl0RXZlbnQ6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG8sYSxzPXRoaXMucGFuZSxsPVwiXCIsYz10aGlzLm9wdGlvbnMubWVzc2FnZXMsZD1jLnNhdmUsdT1jLmRlc3Ryb3ksaD1jLmNhbmNlbCxwPWMuZWRpdG9yLmVkaXRvclRpdGxlO3JldHVybiBsKz0nPGRpdiBkYXRhLXJvbGU9XCJ2aWV3XCIgY2xhc3M9XCJrLXBvcHVwLWVkaXQtZm9ybSBrLXNjaGVkdWxlci1lZGl0LWZvcm0gay1tb2JpbGUtbGlzdFwiIGlkPVwiZWRpdFwiICcrQS5hdHRyKFwidWlkXCIpKyc9XCInK3QudWlkKydcIj48ZGl2IGRhdGEtcm9sZT1cImhlYWRlclwiIGNsYXNzPVwiay1oZWFkZXJcIj48YSBocmVmPVwiI1wiIGNsYXNzPVwiay1idXR0b24gay1zY2hlZHVsZXItY2FuY2VsXCI+JytoK1wiPC9hPlwiK3ArJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJrLWJ1dHRvbiBrLXNjaGVkdWxlci11cGRhdGVcIj4nK2QrXCI8L2E+PC9kaXY+XCIsbj10aGlzLmZpZWxkcyhfLm1vYmlsZSx0KSxpPXRoaXMscj1bXSxsKz10aGlzLl9idWlsZEVkaXRUZW1wbGF0ZSh0LG4sciksIXQuaXNOZXcoKSYmdGhpcy5vcHRpb25zLmVkaXRhYmxlJiZ0aGlzLm9wdGlvbnMuZWRpdGFibGUuZGVzdHJveSE9PSExJiYobCs9JzxkaXYgY2xhc3M9XCJrLWVkaXQtYnV0dG9uc1wiPjxhIGhyZWY9XCIjXCIgY2xhc3M9XCJrLXNjaGVkdWxlci1kZWxldGUgay1idXR0b25cIj4nK3UrXCI8L2E+PC9kaXY+XCIpLGwrPVwiPC9kaXY+XCIsbz1zLmFwcGVuZChsKSxhPXRoaXMuY29udGFpbmVyPW8uZWxlbWVudCx0aGlzLmVkaXRhYmxlPWEua2VuZG9FZGl0YWJsZSh7ZmllbGRzOnIsbW9kZWw6dCxjbGVhckNvbnRhaW5lcjohMSx0YXJnZXQ6aS5vcHRpb25zLnRhcmdldCx2YWxpZGF0ZU9uQmx1cjohMH0pLmRhdGEoXCJrZW5kb0VkaXRhYmxlXCIpLGEuZmluZChcImlucHV0W3R5cGU9Y2hlY2tib3hdLGlucHV0W3R5cGU9cmFkaW9dXCIpLnBhcmVudChcIi5rLWVkaXQtZmllbGRcIikuYWRkQ2xhc3MoXCJrLWNoZWNrXCIpLnByZXYoXCIuay1lZGl0LWxhYmVsXCIpLmFkZENsYXNzKFwiay1jaGVja1wiKS5jbGljayhmdW5jdGlvbigpe2UodGhpcykubmV4dCgpLmNoaWxkcmVuKFwiaW5wdXRcIikuY2xpY2soKX0pLHRoaXMudHJpZ2dlcihcImVkaXRcIix7Y29udGFpbmVyOmEsbW9kZWw6dH0pP3RoaXMudHJpZ2dlcihcImNhbmNlbFwiLHtjb250YWluZXI6YSxtb2RlbDp0fSk6KGEub24oWSskLFwiYS5rLXNjaGVkdWxlci1lZGl0LCBhLmstc2NoZWR1bGVyLWNhbmNlbCwgYS5rLXNjaGVkdWxlci11cGRhdGUsIGEuay1zY2hlZHVsZXItZGVsZXRlXCIsZnVuY3Rpb24obil7dmFyIHIsbztuLnByZXZlbnREZWZhdWx0KCksbi5zdG9wUHJvcGFnYXRpb24oKSxyPWUodGhpcyksci5oYXNDbGFzcyhcImstc2NoZWR1bGVyLWVkaXRcIik/cy5uYXZpZ2F0ZShcIiNlZGl0XCIsaS5vcHRpb25zLmFuaW1hdGlvbnMucmlnaHQpOihvPVwiY2FuY2VsXCIsci5oYXNDbGFzcyhcImstc2NoZWR1bGVyLXVwZGF0ZVwiKT9vPVwic2F2ZVwiOnIuaGFzQ2xhc3MoXCJrLXNjaGVkdWxlci1kZWxldGVcIikmJihvPVwicmVtb3ZlXCIpLGkudHJpZ2dlcihvLHtjb250YWluZXI6YSxtb2RlbDp0fSkpfSkscy5uYXZpZ2F0ZShvLGkub3B0aW9ucy5hbmltYXRpb25zLmxlZnQpLHQuYmluZChcImNoYW5nZVwiLGkudG9nZ2xlRGF0ZVZhbGlkYXRpb25IYW5kbGVyKSksdGhpcy5lZGl0YWJsZX0sX3ZpZXdzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFuZS5lbGVtZW50LmZpbmQoQS5yb2xlU2VsZWN0b3IoXCJ2aWV3XCIpKS5ub3QodGhpcy52aWV3LmVsZW1lbnQpfSxjbG9zZTpmdW5jdGlvbigpe3ZhciBlLHQsbixpO2lmKHRoaXMuY29udGFpbmVyKXtmb3IodGhpcy5wYW5lLm5hdmlnYXRlKFwiXCIsdGhpcy5vcHRpb25zLmFuaW1hdGlvbnMucmlnaHQpLGU9dGhpcy5fdmlld3MoKSxuPTAsaT1lLmxlbmd0aDtpPm47bisrKXQ9ZS5lcShuKS5kYXRhKFwia2VuZG9Nb2JpbGVWaWV3XCIpLHQmJnQucHVyZ2UoKTtlLnJlbW92ZSgpLHRoaXMuY29udGFpbmVyPW51bGwsdGhpcy5lZGl0YWJsZSYmKHRoaXMuZWRpdGFibGUub3B0aW9ucy5tb2RlbC51bmJpbmQoXCJjaGFuZ2VcIix0aGlzLnRvZ2dsZURhdGVWYWxpZGF0aW9uSGFuZGxlciksdGhpcy5lZGl0YWJsZS5kZXN0cm95KCksdGhpcy5lZGl0YWJsZT1udWxsKSx0aGlzLnRpbWV6b25lVmlldz1udWxsfX19KSxiPXkuZXh0ZW5kKHtkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5jbG9zZSgpLHRoaXMudW5iaW5kKCl9LGVkaXRFdmVudDpmdW5jdGlvbih0KXt2YXIgbixpLHIsbz10aGlzLGE9by5vcHRpb25zLmVkaXRhYmxlLHM9XCI8ZGl2IFwiK0EuYXR0cihcInVpZFwiKSsnPVwiJyt0LnVpZCsnXCIgY2xhc3M9XCJrLXBvcHVwLWVkaXQtZm9ybSBrLXNjaGVkdWxlci1lZGl0LWZvcm1cIj48ZGl2IGNsYXNzPVwiay1lZGl0LWZvcm0tY29udGFpbmVyXCI+JyxsPW8ub3B0aW9ucy5tZXNzYWdlcyxjPWwuc2F2ZSxkPWwuY2FuY2VsLHU9bC5kZXN0cm95LGg9dGhpcy5maWVsZHMoXy5kZXNrdG9wLHQpLHA9W107cmV0dXJuIHMrPXRoaXMuX2J1aWxkRWRpdFRlbXBsYXRlKHQsaCxwKSxpPVUoYSk/YS53aW5kb3c6e30scys9JzxkaXYgY2xhc3M9XCJrLWVkaXQtYnV0dG9ucyBrLXN0YXRlLWRlZmF1bHRcIj4nLHMrPXRoaXMuY3JlYXRlQnV0dG9uKHtuYW1lOlwidXBkYXRlXCIsdGV4dDpjLGF0dHI6bn0pK3RoaXMuY3JlYXRlQnV0dG9uKHtuYW1lOlwiY2FuY2VsZWRpdFwiLHRleHQ6ZCxhdHRyOm59KSx0LmlzTmV3KCl8fGEuZGVzdHJveT09PSExfHwocys9dGhpcy5jcmVhdGVCdXR0b24oe25hbWU6XCJkZWxldGVcIix0ZXh0OnUsYXR0cjpufSkpLHMrPVwiPC9kaXY+PC9kaXY+PC9kaXY+XCIscj10aGlzLmNvbnRhaW5lcj1lKHMpLmFwcGVuZFRvKG8uZWxlbWVudCkuZXEoMCkua2VuZG9XaW5kb3coVyh7bW9kYWw6ITAscmVzaXphYmxlOiExLGRyYWdnYWJsZTohMCx0aXRsZTpsLmVkaXRvci5lZGl0b3JUaXRsZSx2aXNpYmxlOiExLGNsb3NlOmZ1bmN0aW9uKGUpe2UudXNlclRyaWdnZXJlZCYmby50cmlnZ2VyKFEse2NvbnRhaW5lcjpyLG1vZGVsOnR9KSYmZS5wcmV2ZW50RGVmYXVsdCgpfX0saSkpLG8uZWRpdGFibGU9ci5rZW5kb0VkaXRhYmxlKHtmaWVsZHM6cCxtb2RlbDp0LGNsZWFyQ29udGFpbmVyOiExLHZhbGlkYXRlT25CbHVyOiEwLHRhcmdldDpvLm9wdGlvbnMudGFyZ2V0fSkuZGF0YShcImtlbmRvRWRpdGFibGVcIiksby50cmlnZ2VyKGV0LHtjb250YWluZXI6cixtb2RlbDp0fSk/by50cmlnZ2VyKFEse2NvbnRhaW5lcjpyLG1vZGVsOnR9KTooci5kYXRhKFwia2VuZG9XaW5kb3dcIikuY2VudGVyKCkub3BlbigpLHIub24oWSskLFwiYS5rLXNjaGVkdWxlci1jYW5jZWxcIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSxvLnRyaWdnZXIoUSx7Y29udGFpbmVyOnIsbW9kZWw6dH0pfSksci5vbihZKyQsXCJhLmstc2NoZWR1bGVyLXVwZGF0ZVwiLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpLG8udHJpZ2dlcihcInNhdmVcIix7Y29udGFpbmVyOnIsbW9kZWw6dH0pfSksci5vbihZKyQsXCJhLmstc2NoZWR1bGVyLWRlbGV0ZVwiLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpLG8udHJpZ2dlcihYLHtjb250YWluZXI6cixtb2RlbDp0fSl9KSx0LmJpbmQoXCJjaGFuZ2VcIixvLnRvZ2dsZURhdGVWYWxpZGF0aW9uSGFuZGxlcikpLG8uZWRpdGFibGV9LGNsb3NlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWZ1bmN0aW9uKCl7ZS5lZGl0YWJsZSYmKGUuZWRpdGFibGUub3B0aW9ucy5tb2RlbC51bmJpbmQoXCJjaGFuZ2VcIixlLnRvZ2dsZURhdGVWYWxpZGF0aW9uSGFuZGxlciksZS5lZGl0YWJsZS5kZXN0cm95KCksZS5lZGl0YWJsZT1udWxsLGUuY29udGFpbmVyPW51bGwpLGUucG9wdXAmJihlLnBvcHVwLmRlc3Ryb3koKSxlLnBvcHVwPW51bGwpfTtlLmVkaXRhYmxlPyhlLl90aW1lem9uZVBvcHVwJiZlLl90aW1lem9uZVBvcHVwLmRhdGEoXCJrZW5kb1dpbmRvd1wiKSYmKGUuX3RpbWV6b25lUG9wdXAuZGF0YShcImtlbmRvV2luZG93XCIpLmRlc3Ryb3koKSxlLl90aW1lem9uZVBvcHVwPW51bGwpLGUuY29udGFpbmVyLmlzKFwiOnZpc2libGVcIik/ZS5jb250YWluZXIuZGF0YShcImtlbmRvV2luZG93XCIpLmJpbmQoXCJkZWFjdGl2YXRlXCIsdCkuY2xvc2UoKTp0KCkpOnQoKX0sX2NyZWF0ZUVuZFRpbWV6b25lQnV0dG9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLm1lc3NhZ2VzLHQ9XCJcIjtyZXR1cm4gdCs9JzxkaXYgY2xhc3M9XCJrLWVkaXQtYnV0dG9ucyBrLXN0YXRlLWRlZmF1bHRcIj4nLHQrPXRoaXMuY3JlYXRlQnV0dG9uKHtuYW1lOlwic2F2ZXRpbWV6b25lXCIsdGV4dDplLnNhdmV9KSt0aGlzLmNyZWF0ZUJ1dHRvbih7bmFtZTpcImNhbmNlbHRpbWV6b25lXCIsdGV4dDplLmNhbmNlbH0pLHQrPVwiPC9kaXY+PC9kaXY+PC9kaXY+XCJ9LHNob3dEaWFsb2c6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG89QS5mb3JtYXQoXCI8ZGl2IGNsYXNzPSdrLXBvcHVwLWVkaXQtZm9ybSc+PGRpdiBjbGFzcz0nay1lZGl0LWZvcm0tY29udGFpbmVyJz48cCBjbGFzcz0nay1wb3B1cC1tZXNzYWdlJz57MH08L3A+XCIsdC50ZXh0KTtmb3Iobys9JzxkaXYgY2xhc3M9XCJrLWVkaXQtYnV0dG9ucyBrLXN0YXRlLWRlZmF1bHRcIj4nLG49MDt0LmJ1dHRvbnMubGVuZ3RoPm47bisrKW8rPXRoaXMuY3JlYXRlQnV0dG9uKHQuYnV0dG9uc1tuXSk7bys9XCI8L2Rpdj48L2Rpdj48L2Rpdj5cIixpPXRoaXMuZWxlbWVudCx0aGlzLnBvcHVwJiZ0aGlzLnBvcHVwLmRlc3Ryb3koKSxyPXRoaXMucG9wdXA9ZShvKS5hcHBlbmRUbyhpKS5lcSgwKS5vbihcImNsaWNrXCIsXCIuay1idXR0b25cIixmdW5jdGlvbihuKXtuLnByZXZlbnREZWZhdWx0KCksci5jbG9zZSgpO3ZhciBpPWUobi5jdXJyZW50VGFyZ2V0KS5pbmRleCgpO3QuYnV0dG9uc1tpXS5jbGljaygpfSkua2VuZG9XaW5kb3coe21vZGFsOiEwLHJlc2l6YWJsZTohMSxkcmFnZ2FibGU6ITEsdGl0bGU6dC50aXRsZSx2aXNpYmxlOiExLGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95KCksaS5mb2N1cygpfX0pLmdldEtlbmRvV2luZG93KCksci5jZW50ZXIoKS5vcGVuKCl9LF9pbml0VGltZXpvbmVFZGl0b3I6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXMscj1pLmNvbnRhaW5lci5maW5kKFwiLmstc2NoZWR1bGVyLXRpbWV6b25lc1wiKSxvPXIuZmluZChcIi5rLXRpbWV6b25lLXRvZ2dsZVwiKSxhPXIuZmluZChcIi5rLWVkaXQtbGFiZWw6bGFzdFwiKS5hZGQoci5maW5kKFwiLmstZWRpdC1maWVsZDpsYXN0XCIpKSxzPXIuZmluZChcIi5rLXNjaGVkdWxlci1zYXZldGltZXpvbmVcIiksbD1yLmZpbmQoXCIuay1zY2hlZHVsZXItY2FuY2VsdGltZXpvbmVcIiksYz1pLl90aW1lem9uZVBvcHVwLGQ9ZnVuY3Rpb24odCl7aWYoXCJzdGFydFRpbWV6b25lXCI9PT10LmZpZWxkKXt2YXIgbj1lLnN0YXJ0VGltZXpvbmU7by5wcm9wKFwiZGlzYWJsZWRcIiwhbiksbnx8KGEuaGlkZSgpLGUuc2V0KFwiZW5kVGltZXpvbmVcIixcIlwiKSxvLnByb3AoXCJjaGVja2VkXCIsITEpKX19O2kuX3N0YXJ0VGltZXpvbmU9ZS5zdGFydFRpbWV6b25lLGkuX2VuZFRpbWV6b25lPWUuZW5kVGltZXpvbmUsY3x8KGkuX3RpbWV6b25lUG9wdXA9Yz1yLmtlbmRvV2luZG93KHttb2RhbDohMCxyZXNpemFibGU6ITEsZHJhZ2dhYmxlOiEwLHRpdGxlOmkub3B0aW9ucy5tZXNzYWdlcy5lZGl0b3IudGltZXpvbmVFZGl0b3JUaXRsZSx2aXNpYmxlOiExLGNsb3NlOmZ1bmN0aW9uKG4pe2UudW5iaW5kKFwiY2hhbmdlXCIsZCksbi51c2VyVHJpZ2dlcmVkJiZpLl9yZXZlcnRUaW1lem9uZXMoZSksdCYmdC5mb2N1cygpfX0pLG8uY2xpY2soZnVuY3Rpb24oKXthLnRvZ2dsZShvLnByb3AoXCJjaGVja2VkXCIpKSxlLnNldChcImVuZFRpbWV6b25lXCIsXCJcIil9KSxzLmNsaWNrKGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxuLmNsb3NlKCl9KSxsLmNsaWNrKGZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSxpLl9yZXZlcnRUaW1lem9uZXMoZSksbi5jbG9zZSgpfSksZS5iaW5kKFwiY2hhbmdlXCIsZCkpLG8ucHJvcChcImNoZWNrZWRcIixlLmVuZFRpbWV6b25lKS5wcm9wKFwiZGlzYWJsZWRcIiwhZS5zdGFydFRpbWV6b25lKSxlLmVuZFRpbWV6b25lP2Euc2hvdygpOmEuaGlkZSgpLG49Yy5kYXRhKFwia2VuZG9XaW5kb3dcIiksbi5jZW50ZXIoKS5vcGVuKCl9fSksaz1MLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXM7TC5mbi5pbml0LmNhbGwoaSx0LG4pLGkub3B0aW9ucy52aWV3cyYmaS5vcHRpb25zLnZpZXdzLmxlbmd0aHx8KGkub3B0aW9ucy52aWV3cz1bXCJkYXlcIixcIndlZWtcIl0pLGkucmVzb3VyY2VzPVtdLGkuX2luaXRNb2RlbCgpLGkuX3dyYXBwZXIoKSxpLl92aWV3cygpLGkuX3Rvb2xiYXIoKSxpLl9kYXRhU291cmNlKCksaS5fcmVzb3VyY2VzKCksaS5fcmVzaXplSGFuZGxlcj1qKGkucmVzaXplLGkpLGkud3JhcHBlci5vbihcIm1vdXNlZG93blwiKyQrXCIgc2VsZWN0c3RhcnRcIiskLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX0pLGkub3B0aW9ucy5lZGl0YWJsZSYmaS5vcHRpb25zLmVkaXRhYmxlLnJlc2l6ZSE9PSExJiZpLl9yZXNpemFibGUoKSxpLl9tb3ZhYmxlKCksZSh3aW5kb3cpLm9uKFwicmVzaXplXCIrJCxpLl9yZXNpemVIYW5kbGVyKSxpLm9wdGlvbnMubWVzc2FnZXMmJmkub3B0aW9ucy5tZXNzYWdlcy5yZWN1cnJlbmNlJiYoRi5vcHRpb25zPWkub3B0aW9ucy5tZXNzYWdlcy5yZWN1cnJlbmNlKSxpLl9zZWxlY3RhYmxlKCksaS5fYXJpYUlkPUEuZ3VpZCgpLGkuX2NyZWF0ZUVkaXRvcigpfSxfaXNNb2JpbGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnM7cmV0dXJuIGUubW9iaWxlPT09ITAmJkEuc3VwcG9ydC5tb2JpbGVPU3x8XCJwaG9uZVwiPT09ZS5tb2JpbGV8fFwidGFibGV0XCI9PT1lLm1vYmlsZX0sX2lzTW9iaWxlUGhvbmVWaWV3OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zO3JldHVybiBlLm1vYmlsZT09PSEwJiZBLnN1cHBvcnQubW9iaWxlT1MmJiFBLnN1cHBvcnQubW9iaWxlT1MudGFibGV0fHxcInBob25lXCI9PT1lLm1vYmlsZX0sX3NlbGVjdGFibGU6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLndyYXBwZXIscj1BLnN1cHBvcnQubW9iaWxlT1M/XCJ0b3VjaGVuZFwiOlwibW91c2Vkb3duXCI7bi5vcHRpb25zLnNlbGVjdGFibGUmJihuLl90YWJpbmRleCgpLGkub24ociskLFwiLmstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5IHRkLCAuay1zY2hlZHVsZXItY29udGVudCB0ZCwgLmstZXZlbnRcIixmdW5jdGlvbihlKXt2YXIgdD1lLndoaWNoLHI9ZS5idXR0b24sbz1BLnN1cHBvcnQuYnJvd3NlcixhPXQmJjM9PT10fHxyJiYyPT1yO0Euc3VwcG9ydC5tb2JpbGVPUyYmZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8KGF8fG4uX2NyZWF0ZVNlbGVjdGlvbihlLmN1cnJlbnRUYXJnZXQpLGkuZm9jdXMoKSxvLm1zaWUmJjk+by52ZXJzaW9uJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5mb2N1cygpfSkpfSksdD1lLnByb3h5KG4uX21vdXNlTW92ZSxuKSxpLm9uKFwibW91c2Vkb3duXCIrJCxcIi5rLXNjaGVkdWxlci1oZWFkZXItYWxsLWRheSB0ZCwgLmstc2NoZWR1bGVyLWNvbnRlbnQgdGRcIixmdW5jdGlvbihlKXt2YXIgbj1lLndoaWNoLHI9ZS5idXR0b24sbz1uJiYzPT09bnx8ciYmMj09cjtvfHxpLm9uKFwibW91c2Vtb3ZlXCIrJCxcIi5rLXNjaGVkdWxlci1oZWFkZXItYWxsLWRheSB0ZCwgLmstc2NoZWR1bGVyLWNvbnRlbnQgdGRcIix0KX0pLGkub24oXCJtb3VzZXVwXCIrJCtcIiBtb3VzZWxlYXZlXCIrJCxmdW5jdGlvbigpe2kub2ZmKFwibW91c2Vtb3ZlXCIrJCxcIi5rLXNjaGVkdWxlci1oZWFkZXItYWxsLWRheSB0ZCwgLmstc2NoZWR1bGVyLWNvbnRlbnQgdGRcIix0KX0pLGkub24oXCJmb2N1c1wiKyQsZnVuY3Rpb24oKXtuLl9zZWxlY3Rpb258fG4uX2NyZWF0ZVNlbGVjdGlvbihlKFwiLmstc2NoZWR1bGVyLWNvbnRlbnRcIikuZmluZChcInRkOmZpcnN0XCIpKSxuLl9zZWxlY3QoKX0pLGkub24oXCJmb2N1c291dFwiKyQsZnVuY3Rpb24oKXtuLnZpZXcoKS5jbGVhclNlbGVjdGlvbigpLG4uX2N0cmxLZXk9bi5fc2hpZnRLZXk9ITF9KSxpLm9uKFwia2V5ZG93blwiKyQsaihuLl9rZXlkb3duLG4pKSxpLm9uKFwia2V5dXBcIiskLGZ1bmN0aW9uKGUpe24uX2N0cmxLZXk9ZS5jdHJsS2V5LG4uX3NoaWZ0S2V5PWUuc2hpZnRLZXl9KSl9LF9zZWxlY3Q6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyPXRoaXMsbz1yLnZpZXcoKSxhPXIud3JhcHBlcixzPW8uY3VycmVudCgpLGw9ci5fc2VsZWN0aW9uO3MmJihzLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpLHMucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiKSxhLnJlbW92ZUF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIikpLG8uc2VsZWN0KGwpLHM9by5jdXJyZW50KCkscyYmci5fb2xkIT09cyYmKHQ9bCxuPXIuX3NlbGVjdGVkRXZlbnRzKCksaT1vLl9zZWxlY3RlZFNsb3RzLG5bMF0/KHQ9blswXXx8bCxlPUEuZm9ybWF0KHIub3B0aW9ucy5tZXNzYWdlcy5hcmlhRXZlbnRMYWJlbCx0LnRpdGxlLHQuc3RhcnQsdC5zdGFydCkpOmU9QS5mb3JtYXQoci5vcHRpb25zLm1lc3NhZ2VzLmFyaWFTbG90TGFiZWwsdC5zdGFydCx0LmVuZCkscy5zZXRBdHRyaWJ1dGUoXCJpZFwiLHIuX2FyaWFJZCkscy5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsZSksYS5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsci5fYXJpYUlkKSxyLl9vbGQ9cyxyLnRyaWdnZXIoXCJjaGFuZ2VcIix7c3RhcnQ6bC5zdGFydCxlbmQ6bC5lbmQsZXZlbnRzOm4sc2xvdHM6aSxyZXNvdXJjZXM6by5fcmVzb3VyY2VCeVNsb3QobCl9KSl9LF9zZWxlY3RlZEV2ZW50czpmdW5jdGlvbigpe2Zvcih2YXIgZSx0PXRoaXMuX3NlbGVjdGlvbi5ldmVudHMsbj10Lmxlbmd0aCxpPTAscj1bXTtuPmk7aSsrKWU9dGhpcy5vY2N1cnJlbmNlQnlVaWQodFtpXSksZSYmci5wdXNoKGUpO3JldHVybiByfSxfbW91c2VNb3ZlOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7Y2xlYXJUaW1lb3V0KG4uX21vdmVUaW1lciksbi5fbW92ZVRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgaSxyLG8sYT1uLnZpZXcoKSxzPW4uX3NlbGVjdGlvbjtzJiYoaT1hLnNlbGVjdGlvbkJ5RWxlbWVudChlKHQuY3VycmVudFRhcmdldCkpLGkmJnMuZ3JvdXBJbmRleD09PWkuZ3JvdXBJbmRleCYmKHI9aS5zdGFydERhdGUoKSxvPWkuZW5kRGF0ZSgpLHI+PXMuZW5kP3MuYmFja3dhcmQ9ITE6cy5zdGFydD49byYmKHMuYmFja3dhcmQ9ITApLHMuYmFja3dhcmQ/cy5zdGFydD1yOnMuZW5kPW8sbi5fc2VsZWN0KCkpKX0sNSl9LF92aWV3QnlJbmRleDpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMudmlld3M7Zm9yKHQgaW4gbil7aWYoIWUpcmV0dXJuIHQ7ZS0tfX0sX2tleWRvd246ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPXQua2V5Q29kZSxyPW4udmlldygpLG89ci5vcHRpb25zLmVkaXRhYmxlLGE9bi5fc2VsZWN0aW9uLHM9dC5zaGlmdEtleTtuLl9jdHJsS2V5PXQuY3RybEtleSxuLl9zaGlmdEtleT10LnNoaWZ0S2V5LGk9PT1SLlRBQj9yLm1vdmVUb0V2ZW50KGEscykmJihuLl9zZWxlY3QoKSx0LnByZXZlbnREZWZhdWx0KCkpOm8mJmk9PT1SLkVOVEVSP2EuZXZlbnRzLmxlbmd0aD9vLnVwZGF0ZSE9PSExJiZuLmVkaXRFdmVudChhLmV2ZW50c1swXSk6by5jcmVhdGUhPT0hMSYmKGEuaXNBbGxEYXkmJihhPWUuZXh0ZW5kKHt9LGEse2VuZDpBLmRhdGUuYWRkRGF5cyhhLmVuZCwtMSl9KSksbi5hZGRFdmVudChXKHt9LGEsci5fcmVzb3VyY2VCeVNsb3QoYSkpKSk6aT09PVIuREVMRVRFJiZvIT09ITEmJm8uZGVzdHJveSE9PSExP24ucmVtb3ZlRXZlbnQoYS5ldmVudHNbMF0pOmk+PTQ5JiY1Nz49aT9uLnZpZXcobi5fdmlld0J5SW5kZXgoaS00OSkpOnIubW92ZShhLGkscykmJihyLmluUmFuZ2UoYSk/bi5fc2VsZWN0KCk6bi5kYXRlKGEuc3RhcnQpLHQucHJldmVudERlZmF1bHQoKSksbi5fYWRqdXN0U2VsZWN0ZWREYXRlKCl9LF9jcmVhdGVTZWxlY3Rpb246ZnVuY3Rpb24odCl7dmFyIG4saSxyO3RoaXMuX3NlbGVjdGlvbiYmKHRoaXMuX2N0cmxLZXl8fHRoaXMuX3NoaWZ0S2V5KXx8KHRoaXMuX3NlbGVjdGlvbj17ZXZlbnRzOltdLGdyb3VwSW5kZXg6MH0pLHQ9ZSh0KSxyPXRoaXMuX3NlbGVjdGlvbixuPXQuYXR0cihBLmF0dHIoXCJ1aWRcIikpLGk9dGhpcy52aWV3KCkuc2VsZWN0aW9uQnlFbGVtZW50KHQpLGkmJihyLmdyb3VwSW5kZXg9aS5ncm91cEluZGV4fHwwKSxuJiYoaT1sKHRoaXMuX2RhdGEsbikpLGkmJmkudWlkJiYobj1baS51aWRdKSx0aGlzLl91cGRhdGVTZWxlY3Rpb24oaSxuKSx0aGlzLl9hZGp1c3RTZWxlY3RlZERhdGUoKX0sX3VwZGF0ZVNlbGVjdGlvbjpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj10aGlzLl9zZWxlY3Rpb247ZSYmciYmKG49dGhpcy52aWV3KCksZS51aWQmJihlPW4uX3VwZGF0ZUV2ZW50Rm9yU2VsZWN0aW9uKGUpKSx0aGlzLl9zaGlmdEtleSYmci5zdGFydCYmci5lbmQ/KGk9ci5lbmQ+ZS5lbmQsci5lbmQ9ZS5lbmREYXRlP2UuZW5kRGF0ZSgpOmUuZW5kLGkmJm4uX3RpbWVTbG90SW50ZXJ2YWwmJkEuZGF0ZS5zZXRUaW1lKHIuZW5kLC1uLl90aW1lU2xvdEludGVydmFsKCkpKTooci5zdGFydD1lLnN0YXJ0RGF0ZT9lLnN0YXJ0RGF0ZSgpOmUuc3RhcnQsci5lbmQ9ZS5lbmREYXRlP2UuZW5kRGF0ZSgpOmUuZW5kKSxyLmlzQWxsRGF5PVwiaXNEYXlTbG90XCJpbiBlP2UuaXNEYXlTbG90OmUuaXNBbGxEYXksci5pbmRleD1lLmluZGV4LHIuZXZlbnRzPXRoaXMuX2N0cmxLZXk/ci5ldmVudHMuY29uY2F0KHR8fFtdKTp0fHxbXSl9LG9wdGlvbnM6e25hbWU6XCJTY2hlZHVsZXJcIixkYXRlOm50LGVkaXRhYmxlOiEwLGF1dG9CaW5kOiEwLHNuYXA6ITAsbW9iaWxlOiExLHRpbWV6b25lOlwiXCIsYWxsRGF5U2xvdDohMCxtaW46bmV3IERhdGUoMTkwMCwwLDEpLG1heDpuZXcgRGF0ZSgyMDk5LDExLDMxKSx0b29sYmFyOm51bGwsbWVzc2FnZXM6e3RvZGF5OlwiVG9kYXlcIixwZGY6XCJFeHBvcnQgdG8gUERGXCIsc2F2ZTpcIlNhdmVcIixjYW5jZWw6XCJDYW5jZWxcIixkZXN0cm95OlwiRGVsZXRlXCIsZGVsZXRlV2luZG93VGl0bGU6XCJEZWxldGUgZXZlbnRcIixhcmlhU2xvdExhYmVsOlwiU2VsZWN0ZWQgZnJvbSB7MDp0fSB0byB7MTp0fVwiLGFyaWFFdmVudExhYmVsOlwiezB9IG9uIHsxOkR9IGF0IHsyOnR9XCIsdmlld3M6e2RheTpcIkRheVwiLHdlZWs6XCJXZWVrXCIsd29ya1dlZWs6XCJXb3JrIFdlZWtcIixhZ2VuZGE6XCJBZ2VuZGFcIixtb250aDpcIk1vbnRoXCIsdGltZWxpbmU6XCJUaW1lbGluZVwiLHRpbWVsaW5lV2VlazpcIlRpbWVsaW5lIFdlZWtcIix0aW1lbGluZVdvcmtXZWVrOlwiVGltZWxpbmUgV29yayBXZWVrXCIsdGltZWxpbmVNb250aDpcIlRpbWVsaW5lIE1vbnRoXCJ9LHJlY3VycmVuY2VNZXNzYWdlczp7ZGVsZXRlV2luZG93VGl0bGU6XCJEZWxldGUgUmVjdXJyaW5nIEl0ZW1cIixkZWxldGVXaW5kb3dPY2N1cnJlbmNlOlwiRGVsZXRlIGN1cnJlbnQgb2NjdXJyZW5jZVwiLGRlbGV0ZVdpbmRvd1NlcmllczpcIkRlbGV0ZSB0aGUgc2VyaWVzXCIsZWRpdFdpbmRvd1RpdGxlOlwiRWRpdCBSZWN1cnJpbmcgSXRlbVwiLGVkaXRXaW5kb3dPY2N1cnJlbmNlOlwiRWRpdCBjdXJyZW50IG9jY3VycmVuY2VcIixlZGl0V2luZG93U2VyaWVzOlwiRWRpdCB0aGUgc2VyaWVzXCJ9LGVkaXRvcjp7dGl0bGU6XCJUaXRsZVwiLHN0YXJ0OlwiU3RhcnRcIixlbmQ6XCJFbmRcIixhbGxEYXlFdmVudDpcIkFsbCBkYXkgZXZlbnRcIixkZXNjcmlwdGlvbjpcIkRlc2NyaXB0aW9uXCIscmVwZWF0OlwiUmVwZWF0XCIsdGltZXpvbmU6XCIgXCIsc3RhcnRUaW1lem9uZTpcIlN0YXJ0IHRpbWV6b25lXCIsZW5kVGltZXpvbmU6XCJFbmQgdGltZXpvbmVcIixzZXBhcmF0ZVRpbWV6b25lczpcIlVzZSBzZXBhcmF0ZSBzdGFydCBhbmQgZW5kIHRpbWUgem9uZXNcIix0aW1lem9uZUVkaXRvclRpdGxlOlwiVGltZXpvbmVzXCIsdGltZXpvbmVFZGl0b3JCdXR0b246XCJUaW1lIHpvbmVcIix0aW1lem9uZVRpdGxlOlwiVGltZSB6b25lc1wiLG5vVGltZXpvbmU6XCJObyB0aW1lem9uZVwiLGVkaXRvclRpdGxlOlwiRXZlbnRcIn19LGhlaWdodDpudWxsLHdpZHRoOm51bGwscmVzb3VyY2VzOltdLGdyb3VwOntyZXNvdXJjZXM6W10sZGlyZWN0aW9uOlwiaG9yaXpvbnRhbFwifSx2aWV3czpbXSxzZWxlY3RhYmxlOiExfSxldmVudHM6W1gsZXQsUSxKLFwiYWRkXCIsXCJkYXRhQmluZGluZ1wiLFwiZGF0YUJvdW5kXCIsXCJtb3ZlU3RhcnRcIixcIm1vdmVcIixcIm1vdmVFbmRcIixcInJlc2l6ZVN0YXJ0XCIsXCJyZXNpemVcIixcInJlc2l6ZUVuZFwiLFwibmF2aWdhdGVcIixcImNoYW5nZVwiXSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzO0wuZm4uZGVzdHJveS5jYWxsKG4pLG4uZGF0YVNvdXJjZSYmKG4uZGF0YVNvdXJjZS51bmJpbmQoSyxuLl9yZWZyZXNoSGFuZGxlciksbi5kYXRhU291cmNlLnVuYmluZChcInByb2dyZXNzXCIsbi5fcHJvZ3Jlc3NIYW5kbGVyKSxuLmRhdGFTb3VyY2UudW5iaW5kKFwiZXJyb3JcIixuLl9lcnJvckhhbmRsZXIpKSxuLmNhbGVuZGFyJiYobi5jYWxlbmRhci5kZXN0cm95KCksbi5wb3B1cC5kZXN0cm95KCkpLG4udmlldygpJiZuLnZpZXcoKS5kZXN0cm95KCksbi5fZWRpdG9yJiZuLl9lZGl0b3IuZGVzdHJveSgpLHRoaXMuX21vdmVEcmFnZ2FibGUmJnRoaXMuX21vdmVEcmFnZ2FibGUuZGVzdHJveSgpLHRoaXMuX3Jlc2l6ZURyYWdnYWJsZSYmdGhpcy5fcmVzaXplRHJhZ2dhYmxlLmRlc3Ryb3koKSx0PW4uZWxlbWVudC5hZGQobi53cmFwcGVyKS5hZGQobi50b29sYmFyKS5hZGQobi5wb3B1cCksdC5vZmYoJCksY2xlYXJUaW1lb3V0KG4uX21vdmVUaW1lciksbi5fbW9kZWw9bnVsbCxuLnRvb2xiYXI9bnVsbCxuLmVsZW1lbnQ9bnVsbCxlKHdpbmRvdykub2ZmKFwicmVzaXplXCIrJCxuLl9yZXNpemVIYW5kbGVyKSxBLmRlc3Ryb3kobi53cmFwcGVyKX0sc2V0RGF0YVNvdXJjZTpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZT1lLHRoaXMuX2RhdGFTb3VyY2UoKSx0aGlzLm9wdGlvbnMuYXV0b0JpbmQmJmUuZmV0Y2goKX0saXRlbXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53cmFwcGVyLmZpbmQoXCIuay1ldmVudCwgLmstdGFza1wiKX0sX21vdmFibGU6ZnVuY3Rpb24oKXt2YXIgbixpLHIsbyxhLHMsbD10aGlzLGM9bC5faXNNb2JpbGUoKSxkPWwub3B0aW9ucy5lZGl0YWJsZSYmbC5vcHRpb25zLmVkaXRhYmxlLm1vdmUhPT0hMSx1PWwub3B0aW9ucy5lZGl0YWJsZSYmbC5vcHRpb25zLmVkaXRhYmxlLnJlc2l6ZSE9PSExOyhkfHx1JiZjKSYmKGwuX21vdmVEcmFnZ2FibGU9bmV3IEEudWkuRHJhZ2dhYmxlKGwuZWxlbWVudCx7ZGlzdGFuY2U6MCxmaWx0ZXI6XCIuay1ldmVudFwiLGlnbm9yZTpcIi5rLXJlc2l6ZS1oYW5kbGVcIixob2xkVG9EcmFnOmN9KSxkJiZsLl9tb3ZlRHJhZ2dhYmxlLmJpbmQoXCJkcmFnc3RhcnRcIixmdW5jdGlvbihlKXt2YXIgbz1sLnZpZXcoKSxkPWUuY3VycmVudFRhcmdldDtyZXR1cm4gby5vcHRpb25zLmVkaXRhYmxlJiZvLm9wdGlvbnMuZWRpdGFibGUubW92ZSE9PSExP2MmJiFkLmhhc0NsYXNzKFwiay1ldmVudC1hY3RpdmVcIik/KGwuZWxlbWVudC5maW5kKFwiLmstZXZlbnQtYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwiay1ldmVudC1hY3RpdmVcIiksZS5wcmV2ZW50RGVmYXVsdCgpLHQpOihhPWwub2NjdXJyZW5jZUJ5VWlkKGQuYXR0cihBLmF0dHIoXCJ1aWRcIikpKSxzPWEuY2xvbmUoKSxvLl91cGRhdGVFdmVudEZvck1vdmUocyksbj1vLl9zbG90QnlQb3NpdGlvbihlLnguc3RhcnRMb2NhdGlvbixlLnkuc3RhcnRMb2NhdGlvbikscj1uLnN0YXJ0T2Zmc2V0KGUueC5zdGFydExvY2F0aW9uLGUueS5zdGFydExvY2F0aW9uLGwub3B0aW9ucy5zbmFwKSxpPW4sKCFufHxsLnRyaWdnZXIoXCJtb3ZlU3RhcnRcIix7ZXZlbnQ6YX0pKSYmZS5wcmV2ZW50RGVmYXVsdCgpLHQpOihlLnByZXZlbnREZWZhdWx0KCksdCl9KS5iaW5kKFwiZHJhZ1wiLGZ1bmN0aW9uKGUpe3ZhciB0LG4sYz1sLnZpZXcoKSxkPWMuX3Nsb3RCeVBvc2l0aW9uKGUueC5sb2NhdGlvbixlLnkubG9jYXRpb24pO2QmJihvPWQuc3RhcnRPZmZzZXQoZS54LmxvY2F0aW9uLGUueS5sb2NhdGlvbixsLm9wdGlvbnMuc25hcCksdD1vLXIsYy5fdXBkYXRlTW92ZUhpbnQocyxkLmdyb3VwSW5kZXgsdCksbj1tKHMsdCksbC50cmlnZ2VyKFwibW92ZVwiLHtldmVudDphLHNsb3Q6e2VsZW1lbnQ6ZC5lbGVtZW50LHN0YXJ0OmQuc3RhcnREYXRlKCksZW5kOmQuZW5kRGF0ZSgpfSxyZXNvdXJjZXM6Yy5fcmVzb3VyY2VCeVNsb3QoZCksc3RhcnQ6bi5zdGFydCxlbmQ6bi5lbmR9KT9jLl91cGRhdGVNb3ZlSGludChzLGQuZ3JvdXBJbmRleCx0KTppPWQpfSkuYmluZChcImRyYWdlbmRcIixmdW5jdGlvbih0KXt2YXIgYyxkLHUsaCxwLGYsZztsLnZpZXcoKS5fcmVtb3ZlTW92ZUhpbnQoKSxjPW8tcixkPW0ocyxjKSx1PWQuc3RhcnQsaD1kLmVuZCxwPWwudmlldygpLl9yZXNvdXJjZUJ5U2xvdChpKSxmPWwudmlldygpLl9yZXNvdXJjZUJ5U2xvdChuKSxnPWwudHJpZ2dlcihcIm1vdmVFbmRcIix7ZXZlbnQ6YSxzbG90OntlbGVtZW50OmkuZWxlbWVudCxzdGFydDppLnN0YXJ0RGF0ZSgpLGVuZDppLmVuZERhdGUoKX0sc3RhcnQ6dSxlbmQ6aCxyZXNvdXJjZXM6cH0pLGd8fHMuc3RhcnQuZ2V0VGltZSgpPT11LmdldFRpbWUoKSYmcy5lbmQuZ2V0VGltZSgpPT1oLmdldFRpbWUoKSYmQS5zdHJpbmdpZnkocCk9PUEuc3RyaW5naWZ5KGYpfHwobC52aWV3KCkuX3VwZGF0ZUV2ZW50Rm9yTW92ZShhKSxsLl91cGRhdGVFdmVudChudWxsLGEsZS5leHRlbmQoe3N0YXJ0OnUsZW5kOmh9LHApKSksdC5jdXJyZW50VGFyZ2V0LnJlbW92ZUNsYXNzKFwiay1ldmVudC1hY3RpdmVcIiksdGhpcy5jYW5jZWxIb2xkKCl9KS5iaW5kKFwiZHJhZ2NhbmNlbFwiLGZ1bmN0aW9uKCl7bC52aWV3KCkuX3JlbW92ZU1vdmVIaW50KCksdGhpcy5jYW5jZWxIb2xkKCl9KSxjJiYobC5fbW92ZURyYWdnYWJsZS5iaW5kKFwiaG9sZFwiLGZ1bmN0aW9uKGUpe2wuZWxlbWVudC5maW5kKFwiLmstc2NoZWR1bGVyLW1vbnRodmlld1wiKS5sZW5ndGgmJmUucHJldmVudERlZmF1bHQoKSxsLmVsZW1lbnQuZmluZChcIi5rLWV2ZW50LWFjdGl2ZVwiKS5yZW1vdmVDbGFzcyhcImstZXZlbnQtYWN0aXZlXCIpLGUuY3VycmVudFRhcmdldC5hZGRDbGFzcyhcImstZXZlbnQtYWN0aXZlXCIpfSksbC5fbW92ZURyYWdnYWJsZS51c2VyRXZlbnRzLmJpbmQoXCJwcmVzc1wiLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX0pKSl9LF9yZXNpemFibGU6ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3ZhciB0LG49e1wiay1yZXNpemUtZVwiOlwiZWFzdFwiLFwiay1yZXNpemUtd1wiOlwid2VzdFwiLFwiay1yZXNpemUtblwiOlwibm9ydGhcIixcImstcmVzaXplLXNcIjpcInNvdXRoXCJ9O2Zvcih0IGluIG4paWYoZS5oYXNDbGFzcyh0KSlyZXR1cm4gblt0XX12YXIgbixpLHIsbyxhLHM9dGhpcztzLl9yZXNpemVEcmFnZ2FibGU9bmV3IEEudWkuRHJhZ2dhYmxlKHMuZWxlbWVudCx7ZGlzdGFuY2U6MCxmaWx0ZXI6XCIuay1yZXNpemUtaGFuZGxlXCIsZHJhZ3N0YXJ0OmZ1bmN0aW9uKHQpe3ZhciBsPWUodC5jdXJyZW50VGFyZ2V0KSxjPWwuY2xvc2VzdChcIi5rLWV2ZW50XCIpLGQ9Yy5hdHRyKEEuYXR0cihcInVpZFwiKSksdT1zLnZpZXcoKTtyPXMub2NjdXJyZW5jZUJ5VWlkKGQpLG89ci5jbG9uZSgpLHUuX3VwZGF0ZUV2ZW50Rm9yUmVzaXplKG8pLGE9dS5fc2xvdEJ5UG9zaXRpb24odC54LnN0YXJ0TG9jYXRpb24sdC55LnN0YXJ0TG9jYXRpb24pLHMudHJpZ2dlcihcInJlc2l6ZVN0YXJ0XCIse2V2ZW50OnJ9KSYmdC5wcmV2ZW50RGVmYXVsdCgpLG49QS5kYXRlLnRvVXRjVGltZShvLnN0YXJ0KSxpPUEuZGF0ZS50b1V0Y1RpbWUoby5lbmQpfSxkcmFnOmZ1bmN0aW9uKGwpe3ZhciBjLGQsdSxoLHAsZjthJiYoYz1lKGwuY3VycmVudFRhcmdldCksZD10KGMpLHU9cy52aWV3KCksaD11Ll9zbG90QnlQb3NpdGlvbihsLngubG9jYXRpb24sbC55LmxvY2F0aW9uKSxoJiZhLmdyb3VwSW5kZXg9PWguZ3JvdXBJbmRleCYmKGE9aCxwPW4sZj1pLFwic291dGhcIj09ZD8hYS5pc0RheVNsb3QmJmEuZW5kLUEuZGF0ZS50b1V0Y1RpbWUoby5zdGFydCk+PXUuX3RpbWVTbG90SW50ZXJ2YWwoKSYmKGk9by5pc0FsbERheT9hLnN0YXJ0T2Zmc2V0KGwueC5sb2NhdGlvbixsLnkubG9jYXRpb24scy5vcHRpb25zLnNuYXApOmEuZW5kT2Zmc2V0KGwueC5sb2NhdGlvbixsLnkubG9jYXRpb24scy5vcHRpb25zLnNuYXApKTpcIm5vcnRoXCI9PWQ/IWEuaXNEYXlTbG90JiZBLmRhdGUudG9VdGNUaW1lKG8uZW5kKS1hLnN0YXJ0Pj11Ll90aW1lU2xvdEludGVydmFsKCkmJihuPWEuc3RhcnRPZmZzZXQobC54LmxvY2F0aW9uLGwueS5sb2NhdGlvbixzLm9wdGlvbnMuc25hcCkpOlwiZWFzdFwiPT1kP2EuaXNEYXlTbG90JiZBLmRhdGUudG9VdGNUaW1lKEEuZGF0ZS5nZXREYXRlKGEuZW5kRGF0ZSgpKSk+PUEuZGF0ZS50b1V0Y1RpbWUoQS5kYXRlLmdldERhdGUoby5zdGFydCkpP2k9by5pc0FsbERheT9hLnN0YXJ0T2Zmc2V0KGwueC5sb2NhdGlvbixsLnkubG9jYXRpb24scy5vcHRpb25zLnNuYXApOmEuZW5kT2Zmc2V0KGwueC5sb2NhdGlvbixsLnkubG9jYXRpb24scy5vcHRpb25zLnNuYXApOiFhLmlzRGF5U2xvdCYmYS5lbmQtQS5kYXRlLnRvVXRjVGltZShvLnN0YXJ0KT49dS5fdGltZVNsb3RJbnRlcnZhbCgpJiYoaT1hLmVuZE9mZnNldChsLngubG9jYXRpb24sbC55LmxvY2F0aW9uLHMub3B0aW9ucy5zbmFwKSk6XCJ3ZXN0XCI9PWQmJihhLmlzRGF5U2xvdCYmQS5kYXRlLnRvVXRjVGltZShBLmRhdGUuZ2V0RGF0ZShvLmVuZCkpPj1BLmRhdGUudG9VdGNUaW1lKEEuZGF0ZS5nZXREYXRlKGEuc3RhcnREYXRlKCkpKT9uPWEuc3RhcnRPZmZzZXQobC54LmxvY2F0aW9uLGwueS5sb2NhdGlvbixzLm9wdGlvbnMuc25hcCk6IWEuaXNEYXlTbG90JiZBLmRhdGUudG9VdGNUaW1lKG8uZW5kKS1hLnN0YXJ0Pj11Ll90aW1lU2xvdEludGVydmFsKCkmJihuPWEuc3RhcnRPZmZzZXQobC54LmxvY2F0aW9uLGwueS5sb2NhdGlvbixzLm9wdGlvbnMuc25hcCkpKSxzLnRyaWdnZXIoXCJyZXNpemVcIix7ZXZlbnQ6cixzbG90OntlbGVtZW50OmEuZWxlbWVudCxzdGFydDphLnN0YXJ0RGF0ZSgpLGVuZDphLmVuZERhdGUoKX0sc3RhcnQ6QS50aW1lem9uZS50b0xvY2FsRGF0ZShuKSxlbmQ6QS50aW1lem9uZS50b0xvY2FsRGF0ZShpKSxyZXNvdXJjZXM6dS5fcmVzb3VyY2VCeVNsb3QoYSl9KT8obj1wLGk9Zik6dS5fdXBkYXRlUmVzaXplSGludChvLGEuZ3JvdXBJbmRleCxuLGkpKSl9LGRyYWdlbmQ6ZnVuY3Rpb24obCl7dmFyIGMsZD1lKGwuY3VycmVudFRhcmdldCksdT1uZXcgRGF0ZShvLnN0YXJ0LmdldFRpbWUoKSksaD1uZXcgRGF0ZShvLmVuZC5nZXRUaW1lKCkpLHA9dChkKTtzLnZpZXcoKS5fcmVtb3ZlUmVzaXplSGludCgpLFwic291dGhcIj09cD9oPUEudGltZXpvbmUudG9Mb2NhbERhdGUoaSk6XCJub3J0aFwiPT1wP3U9QS50aW1lem9uZS50b0xvY2FsRGF0ZShuKTpcImVhc3RcIj09cD9oPWEuaXNEYXlTbG90P0EuZGF0ZS5nZXREYXRlKEEudGltZXpvbmUudG9Mb2NhbERhdGUoaSkpOkEudGltZXpvbmUudG9Mb2NhbERhdGUoaSk6XCJ3ZXN0XCI9PXAmJihhLmlzRGF5U2xvdD8odT1uZXcgRGF0ZShBLnRpbWV6b25lLnRvTG9jYWxEYXRlKG4pKSx1LnNldEhvdXJzKDApLHUuc2V0TWludXRlcygwKSk6dT1BLnRpbWV6b25lLnRvTG9jYWxEYXRlKG4pKSxjPXMudHJpZ2dlcihcInJlc2l6ZUVuZFwiLHtldmVudDpyLHNsb3Q6e2VsZW1lbnQ6YS5lbGVtZW50LHN0YXJ0OmEuc3RhcnREYXRlKCksZW5kOmEuZW5kRGF0ZSgpfSxzdGFydDp1LGVuZDpoLHJlc291cmNlczpzLnZpZXcoKS5fcmVzb3VyY2VCeVNsb3QoYSl9KSwhYyYmaC5nZXRUaW1lKCk+PXUuZ2V0VGltZSgpJiYoby5zdGFydC5nZXRUaW1lKCkhPXUuZ2V0VGltZSgpfHxvLmVuZC5nZXRUaW1lKCkhPWguZ2V0VGltZSgpKSYmKHMudmlldygpLl91cGRhdGVFdmVudEZvclJlc2l6ZShyKSxzLl91cGRhdGVFdmVudChwLHIse3N0YXJ0OnUsZW5kOmh9KSksYT1udWxsLHI9bnVsbH0sZHJhZ2NhbmNlbDpmdW5jdGlvbigpe3MudmlldygpLl9yZW1vdmVSZXNpemVIaW50KCksYT1udWxsLHI9bnVsbH19KX0sX3VwZGF0ZUV2ZW50OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLHI9ZnVuY3Rpb24oZSx0KXt0cnl7aS5fcHJldmVudFJlZnJlc2g9ITAsZS51cGRhdGUobiksaS5fY29udmVydERhdGVzKGUpfWZpbmFsbHl7aS5fcHJldmVudFJlZnJlc2g9ITF9aS50cmlnZ2VyKEose2V2ZW50OmV9KXx8KHQmJnQoKSxpLl91cGRhdGVTZWxlY3Rpb24oZSksaS5kYXRhU291cmNlLnN5bmMoKSl9LG89ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVjdXJyZW5jZVJ1bGU/aS5kYXRhU291cmNlLmdldEJ5VWlkKGUudWlkKTppLmRhdGFTb3VyY2UuZ2V0KGUucmVjdXJyZW5jZUlkKX0sYT1mdW5jdGlvbigpe3ZhciBhLHMsbD1vKHQpOyhcInNvdXRoXCI9PWV8fFwibm9ydGhcIj09ZSkmJihuLnN0YXJ0JiYoYT1BLmRhdGUuZ2V0RGF0ZShsLnN0YXJ0KSxBLmRhdGUuc2V0VGltZShhLHoobi5zdGFydCkpLG4uc3RhcnQ9YSksbi5lbmQmJihzPUEuZGF0ZS5nZXREYXRlKGwuZW5kKSxBLmRhdGUuc2V0VGltZShzLHoobi5lbmQpKSxuLmVuZD1zKSksaS5kYXRhU291cmNlLl9yZW1vdmVFeGNlcHRpb25zKGwpLHIobCl9LHM9ZnVuY3Rpb24oKXt2YXIgZT1vKHQpLG49ZnVuY3Rpb24oKXtpLl9jb252ZXJ0RGF0ZXMoZSl9LGE9ZS50b09jY3VycmVuY2Uoe3N0YXJ0OnQuc3RhcnQsZW5kOnQuZW5kfSk7cihpLmRhdGFTb3VyY2UuYWRkKGEpLG4pfSxsPWkub3B0aW9ucy5tZXNzYWdlcy5yZWN1cnJlbmNlTWVzc2FnZXM7dC5yZWN1cnJlbmNlUnVsZXx8dC5pc09jY3VycmVuY2UoKT9pLnNob3dEaWFsb2coe21vZGVsOnQsdGl0bGU6bC5lZGl0V2luZG93VGl0bGUsdGV4dDpsLmVkaXRSZWN1cnJpbmc/bC5lZGl0UmVjdXJyaW5nOmF0LGJ1dHRvbnM6W3t0ZXh0OmwuZWRpdFdpbmRvd09jY3VycmVuY2UsY2xpY2s6c30se3RleHQ6bC5lZGl0V2luZG93U2VyaWVzLGNsaWNrOmF9XX0pOnIoaS5kYXRhU291cmNlLmdldEJ5VWlkKHQudWlkKSl9LF9tb2RlbEZvckNvbnRhaW5lcjpmdW5jdGlvbih0KXtyZXR1cm4gdD1lKHQpLmNsb3Nlc3QoXCJbXCIrQS5hdHRyKFwidWlkXCIpK1wiXVwiKSx0aGlzLmRhdGFTb3VyY2UuZ2V0QnlVaWQodC5hdHRyKEEuYXR0cihcInVpZFwiKSkpfSxzaG93RGlhbG9nOmZ1bmN0aW9uKGUpe3RoaXMuX2VkaXRvci5zaG93RGlhbG9nKGUpfSxmb2N1czpmdW5jdGlvbigpe3RoaXMud3JhcHBlci5mb2N1cygpfSxfY29uZmlybWF0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG89dGhpcy5vcHRpb25zLmVkaXRhYmxlO289PT0hMHx8by5jb25maXJtYXRpb24hPT0hMT8obj10aGlzLm9wdGlvbnMubWVzc2FnZXMsaT10eXBlb2Ygby5jb25maXJtYXRpb249PT1PP28uY29uZmlybWF0aW9uOnJ0LHI9W3tuYW1lOlwiZGVzdHJveVwiLHRleHQ6bi5kZXN0cm95LGNsaWNrOmZ1bmN0aW9uKCl7ZSgpfX1dLHRoaXMuX2lzTW9iaWxlKCkmJkEubW9iaWxlLnVpLlBhbmV8fHIucHVzaCh7bmFtZTpcImNhbmNlbGVkaXRcIix0ZXh0Om4uY2FuY2VsLGNsaWNrOmZ1bmN0aW9uKCl7ZSghMCl9fSksdGhpcy5zaG93RGlhbG9nKHttb2RlbDp0LHRleHQ6aSx0aXRsZTpuLmRlbGV0ZVdpbmRvd1RpdGxlLGJ1dHRvbnM6cn0pKTplKCl9LGFkZEV2ZW50OmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLl9lZGl0b3IuZWRpdGFibGUscj10aGlzLmRhdGFTb3VyY2U7ZT1lfHx7fSxuPXRoaXMudHJpZ2dlcihcImFkZFwiLHtldmVudDplfSksIW4mJihpJiZpLmVuZCgpfHwhaSkmJih0aGlzLmNhbmNlbEV2ZW50KCksZSYmZS50b0pTT04mJihlPWUudG9KU09OKCkpLHQ9ci5hZGQoZSksdCYmKHRoaXMuY2FuY2VsRXZlbnQoKSx0aGlzLl9lZGl0RXZlbnQodCkpKX0sc2F2ZUV2ZW50OmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGk9dGhpcy5fZWRpdG9yO2kmJihlPWkuZWRpdGFibGUsdD1pLmNvbnRhaW5lcixuPXRoaXMuX21vZGVsRm9yQ29udGFpbmVyKHQpLHQmJmUmJmUuZW5kKCkmJiF0aGlzLnRyaWdnZXIoSix7Y29udGFpbmVyOnQsZXZlbnQ6bn0pJiYobi5pc1JlY3VycmVuY2VIZWFkKCkmJnRoaXMuZGF0YVNvdXJjZS5fcmVtb3ZlRXhjZXB0aW9ucyhuKSxuLmRpcnR5fHxuLmlzT2NjdXJyZW5jZSgpfHx0aGlzLl9jb252ZXJ0RGF0ZXMobixcInJlbW92ZVwiKSx0aGlzLmRhdGFTb3VyY2Uuc3luYygpKSl9LGNhbmNlbEV2ZW50OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLl9lZGl0b3Isbj10LmNvbnRhaW5lcjtuJiYoZT10aGlzLl9tb2RlbEZvckNvbnRhaW5lcihuKSxlJiZlLmlzT2NjdXJyZW5jZSgpJiYodGhpcy5fY29udmVydERhdGVzKGUsXCJyZW1vdmVcIiksdGhpcy5fY29udmVydERhdGVzKHRoaXMuZGF0YVNvdXJjZS5nZXQoZS5yZWN1cnJlbmNlSWQpLFwicmVtb3ZlXCIpKSx0aGlzLmRhdGFTb3VyY2UuY2FuY2VsQ2hhbmdlcyhlKSx0LmNsb3NlKCkpfSxlZGl0RXZlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJzdHJpbmdcIj09dHlwZW9mIGU/dGhpcy5vY2N1cnJlbmNlQnlVaWQoZSk6ZTt0JiYodGhpcy5jYW5jZWxFdmVudCgpLHQuaXNSZWN1cnJpbmcoKT90aGlzLl9lZGl0UmVjdXJyaW5nRGlhbG9nKHQpOnRoaXMuX2VkaXRFdmVudCh0KSl9LF9lZGl0RXZlbnQ6ZnVuY3Rpb24oZSl7dGhpcy5fY3JlYXRlUG9wdXBFZGl0b3IoZSl9LF9lZGl0UmVjdXJyaW5nRGlhbG9nOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1mdW5jdGlvbigpe2UuaXNFeGNlcHRpb24oKT90Ll9lZGl0RXZlbnQoZSk6dC5hZGRFdmVudChlKX0saT1mdW5jdGlvbigpe2UucmVjdXJyZW5jZUlkJiYoZT10LmRhdGFTb3VyY2UuZ2V0KGUucmVjdXJyZW5jZUlkKSksdC5fZWRpdEV2ZW50KGUpfSxyPXQub3B0aW9ucy5tZXNzYWdlcy5yZWN1cnJlbmNlTWVzc2FnZXM7dC5zaG93RGlhbG9nKHttb2RlbDplLHRpdGxlOnIuZWRpdFdpbmRvd1RpdGxlLHRleHQ6ci5lZGl0UmVjdXJyaW5nP3IuZWRpdFJlY3VycmluZzphdCxidXR0b25zOlt7dGV4dDpyLmVkaXRXaW5kb3dPY2N1cnJlbmNlLGNsaWNrOm59LHt0ZXh0OnIuZWRpdFdpbmRvd1NlcmllcyxjbGljazppfV19KX0sX2NyZWF0ZUJ1dHRvbjpmdW5jdGlvbihlKXt2YXIgdD1lLnRlbXBsYXRlfHxzdCxuPXR5cGVvZiBlPT09Tz9lOmUubmFtZXx8ZS50ZXh0LGk9e2NsYXNzTmFtZTpcImstc2NoZWR1bGVyLVwiKyhufHxcIlwiKS5yZXBsYWNlKC9cXHMvZyxcIlwiKSx0ZXh0Om4sYXR0cjpcIlwifTtpZighKG58fFUoZSkmJmUudGVtcGxhdGUpKXRocm93IEVycm9yKFwiQ3VzdG9tIGNvbW1hbmRzIHNob3VsZCBoYXZlIG5hbWUgc3BlY2lmaWVkXCIpO3JldHVybiBVKGUpPyhlLmNsYXNzTmFtZSYmKGUuY2xhc3NOYW1lKz1cIiBcIitpLmNsYXNzTmFtZSksXCJlZGl0XCI9PT1uJiZVKGUudGV4dCkmJihlPVcoITAse30sZSksZS50ZXh0PWUudGV4dC5lZGl0KSxpPVcoITAsaSx2W25dLGUpKTppPVcoITAsaSx2W25dKSxBLnRlbXBsYXRlKHQpKGkpfSxfY29udmVydERhdGVzOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5kYXRhU291cmNlLnJlYWRlci50aW1lem9uZSxpPWUuc3RhcnRUaW1lem9uZSxyPWUuZW5kVGltZXpvbmUsbz1lLnN0YXJ0LGE9ZS5zdGFydDt0PXR8fFwiYXBwbHlcIixpPWl8fHIscj1yfHxpLGkmJihuP1wiYXBwbHlcIj09PXQ/KG89QS50aW1lem9uZS5jb252ZXJ0KGUuc3RhcnQsbixpKSxhPUEudGltZXpvbmUuY29udmVydChlLmVuZCxuLHIpKToobz1BLnRpbWV6b25lLmNvbnZlcnQoZS5zdGFydCxpLG4pLGE9QS50aW1lem9uZS5jb252ZXJ0KGUuZW5kLHIsbikpOihvPUEudGltZXpvbmVbdF0oZS5zdGFydCxpKSxhPUEudGltZXpvbmVbdF0oZS5lbmQscikpLGUuX3NldChcInN0YXJ0XCIsbyksZS5fc2V0KFwiZW5kXCIsYSkpfSxfY3JlYXRlRWRpdG9yOmZ1bmN0aW9uKCl7dmFyIGUsbj10aGlzO2U9bi5fZWRpdG9yPXRoaXMuX2lzTW9iaWxlKCkmJkEubW9iaWxlLnVpLlBhbmU/bmV3IHcodGhpcy53cmFwcGVyLFcoe30sdGhpcy5vcHRpb25zLHt0YXJnZXQ6dGhpcyx0aW1lem9uZTpuLmRhdGFTb3VyY2UucmVhZGVyLnRpbWV6b25lLHJlc291cmNlczpuLnJlc291cmNlcyxjcmVhdGVCdXR0b246aih0aGlzLl9jcmVhdGVCdXR0b24sdGhpcyl9KSk6bmV3IGIodGhpcy53cmFwcGVyLFcoe30sdGhpcy5vcHRpb25zLHt0YXJnZXQ6dGhpcyxjcmVhdGVCdXR0b246aih0aGlzLl9jcmVhdGVCdXR0b24sdGhpcyksdGltZXpvbmU6bi5kYXRhU291cmNlLnJlYWRlci50aW1lem9uZSxyZXNvdXJjZXM6bi5yZXNvdXJjZXN9KSksZS5iaW5kKFwiY2FuY2VsXCIsZnVuY3Rpb24oZSl7cmV0dXJuIG4udHJpZ2dlcihcImNhbmNlbFwiLHtjb250YWluZXI6ZS5jb250YWluZXIsZXZlbnQ6ZS5tb2RlbH0pPyhlLnByZXZlbnREZWZhdWx0KCksdCk6KG4uY2FuY2VsRXZlbnQoKSxuLmZvY3VzKCksdCl9KSxlLmJpbmQoXCJlZGl0XCIsZnVuY3Rpb24oZSl7bi50cmlnZ2VyKGV0LHtjb250YWluZXI6ZS5jb250YWluZXIsZXZlbnQ6ZS5tb2RlbH0pJiZlLnByZXZlbnREZWZhdWx0KCl9KSxlLmJpbmQoXCJzYXZlXCIsZnVuY3Rpb24oKXtuLnNhdmVFdmVudCgpfSksZS5iaW5kKFwicmVtb3ZlXCIsZnVuY3Rpb24oZSl7bi5yZW1vdmVFdmVudChlLm1vZGVsKX0pfSxfY3JlYXRlUG9wdXBFZGl0b3I6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZWRpdG9yOyghZS5pc05ldygpfHxlLmlzT2NjdXJyZW5jZSgpKSYmKGUuaXNPY2N1cnJlbmNlKCkmJnRoaXMuX2NvbnZlcnREYXRlcyhlLnJlY3VycmVuY2VJZD90aGlzLmRhdGFTb3VyY2UuZ2V0KGUucmVjdXJyZW5jZUlkKTplKSx0aGlzLl9jb252ZXJ0RGF0ZXMoZSkpLHRoaXMuZWRpdGFibGU9dC5lZGl0RXZlbnQoZSl9LHJlbW92ZUV2ZW50OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cInN0cmluZ1wiPT10eXBlb2YgZT90Lm9jY3VycmVuY2VCeVVpZChlKTplO24mJihuLmlzUmVjdXJyaW5nKCk/dC5fZGVsZXRlUmVjdXJyaW5nRGlhbG9nKG4pOnQuX2NvbmZpcm1hdGlvbihmdW5jdGlvbihlKXtlfHx0Ll9yZW1vdmVFdmVudChuKX0sbikpfSxvY2N1cnJlbmNlQnlVaWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kYXRhU291cmNlLmdldEJ5VWlkKGUpO3JldHVybiB0fHwodD1sKHRoaXMuX2RhdGEsZSkpLHR9LG9jY3VycmVuY2VzSW5SYW5nZTpmdW5jdGlvbihlLHQpe3JldHVybiBuZXcgQS5kYXRhLlF1ZXJ5KHRoaXMuX2RhdGEpLmZpbHRlcih7bG9naWM6XCJvclwiLGZpbHRlcnM6W3tsb2dpYzpcImFuZFwiLGZpbHRlcnM6W3tmaWVsZDpcInN0YXJ0XCIsb3BlcmF0b3I6XCJndGVcIix2YWx1ZTplfSx7ZmllbGQ6XCJlbmRcIixvcGVyYXRvcjpcImd0ZVwiLHZhbHVlOmV9LHtmaWVsZDpcInN0YXJ0XCIsb3BlcmF0b3I6XCJsdFwiLHZhbHVlOnR9XX0se2xvZ2ljOlwiYW5kXCIsZmlsdGVyczpbe2ZpZWxkOlwic3RhcnRcIixvcGVyYXRvcjpcImx0ZVwiLHZhbHVlOmV9LHtmaWVsZDpcImVuZFwiLG9wZXJhdG9yOlwiZ3RcIix2YWx1ZTplfV19XX0pLnRvQXJyYXkoKX0sX3JlbW92ZUV2ZW50OmZ1bmN0aW9uKGUpe3RoaXMudHJpZ2dlcihYLHtldmVudDplfSl8fHRoaXMuZGF0YVNvdXJjZS5yZW1vdmUoZSkmJnRoaXMuZGF0YVNvdXJjZS5zeW5jKCl9LF9kZWxldGVSZWN1cnJpbmdEaWFsb2c6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUsaT1mdW5jdGlvbigpe3ZhciBlPW4ucmVjdXJyZW5jZUlkP246bi50b09jY3VycmVuY2UoKSxpPXQuZGF0YVNvdXJjZS5nZXQoZS5yZWN1cnJlbmNlSWQpO3QuX2NvbnZlcnREYXRlcyhpKSx0Ll9yZW1vdmVFdmVudChlKX0scj1mdW5jdGlvbigpe24ucmVjdXJyZW5jZUlkJiYobj10LmRhdGFTb3VyY2UuZ2V0KG4ucmVjdXJyZW5jZUlkKSksdC5fcmVtb3ZlRXZlbnQobil9LG89dC5vcHRpb25zLm1lc3NhZ2VzLnJlY3VycmVuY2VNZXNzYWdlczt0LnNob3dEaWFsb2coe21vZGVsOmUsdGl0bGU6by5kZWxldGVXaW5kb3dUaXRsZSx0ZXh0Om8uZGVsZXRlUmVjdXJyaW5nP28uZGVsZXRlUmVjdXJyaW5nOm90LGJ1dHRvbnM6W3t0ZXh0Om8uZGVsZXRlV2luZG93T2NjdXJyZW5jZSxjbGljazppfSx7dGV4dDpvLmRlbGV0ZVdpbmRvd1NlcmllcyxjbGljazpyfV19KX0sX3VuYmluZFZpZXc6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmFuZ3VsYXIoXCJjbGVhbnVwXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6dC5pdGVtcygpfX0pLGUuZGVzdHJveSgpfSxfYmluZFZpZXc6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Lm9wdGlvbnMuZWRpdGFibGUmJih0Ll92aWV3UmVtb3ZlSGFuZGxlciYmZS51bmJpbmQoWCx0Ll92aWV3UmVtb3ZlSGFuZGxlciksdC5fdmlld1JlbW92ZUhhbmRsZXI9ZnVuY3Rpb24oZSl7dC5yZW1vdmVFdmVudChlLnVpZCl9LGUuYmluZChYLHQuX3ZpZXdSZW1vdmVIYW5kbGVyKSx0Ll92aWV3QWRkSGFuZGxlciYmZS51bmJpbmQoWix0Ll92aWV3QWRkSGFuZGxlciksdC5fdmlld0FkZEhhbmRsZXI9ZnVuY3Rpb24oZSl7dC5hZGRFdmVudChlLmV2ZW50SW5mbyl9LGUuYmluZChaLHRoaXMuX3ZpZXdBZGRIYW5kbGVyKSx0Ll92aWV3RWRpdEhhbmRsZXImJmUudW5iaW5kKGV0LHQuX3ZpZXdFZGl0SGFuZGxlciksdC5fdmlld0VkaXRIYW5kbGVyPWZ1bmN0aW9uKGUpe3QuZWRpdEV2ZW50KGUudWlkKX0sZS5iaW5kKGV0LHRoaXMuX3ZpZXdFZGl0SGFuZGxlcikpLHQuX3ZpZXdOYXZpZ2F0ZUhhbmRsZXImJmUudW5iaW5kKFwibmF2aWdhdGVcIix0Ll92aWV3TmF2aWdhdGVIYW5kbGVyKSx0Ll92aWV3TmF2aWdhdGVIYW5kbGVyPWZ1bmN0aW9uKGUpe3ZhciBuLGk7ZS52aWV3JiYobj1cImlzV29ya0RheVwiaW4gZSxpPW4/XCJjaGFuZ2VXb3JrRGF5XCI6XCJjaGFuZ2VWaWV3XCIsdC50cmlnZ2VyKFwibmF2aWdhdGVcIix7dmlldzplLnZpZXcsaXNXb3JrRGF5OmUuaXNXb3JrRGF5LGFjdGlvbjppLGRhdGU6ZS5kYXRlfSl8fChuJiYodC5fd29ya0RheU1vZGU9ZS5pc1dvcmtEYXkpLHQuX3NlbGVjdFZpZXcoZS52aWV3KSx0LmRhdGUoZS5kYXRlKSkpfSxlLmJpbmQoXCJuYXZpZ2F0ZVwiLHQuX3ZpZXdOYXZpZ2F0ZUhhbmRsZXIpLHQuX3ZpZXdBY3RpdmF0ZUhhbmRsZXImJmUudW5iaW5kKFwiYWN0aXZhdGVcIix0Ll92aWV3QWN0aXZhdGVIYW5kbGVyKSx0Ll92aWV3QWN0aXZhdGVIYW5kbGVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0Ll9zZWxlY3Rpb24mJihlLmNvbnN0cmFpblNlbGVjdGlvbih0Ll9zZWxlY3Rpb24pLHQuX3NlbGVjdCgpLHQuX2FkanVzdFNlbGVjdGVkRGF0ZSgpKX0sZS5iaW5kKFwiYWN0aXZhdGVcIix0Ll92aWV3QWN0aXZhdGVIYW5kbGVyKX0sX3NlbGVjdFZpZXc6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlJiZ0LnZpZXdzW2VdJiYodC5fc2VsZWN0ZWRWaWV3JiZ0Ll91bmJpbmRWaWV3KHQuX3NlbGVjdGVkVmlldyksdC5fc2VsZWN0ZWRWaWV3PXQuX3JlbmRlclZpZXcoZSksdC5fc2VsZWN0ZWRWaWV3TmFtZT1lLHQudG9vbGJhci5maW5kKFwiLmstc2NoZWR1bGVyLXZpZXdzIGxpXCIpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiKS5lbmQoKS5maW5kKFwiLmstdmlldy1cIitlLnJlcGxhY2UoL1xcLi9nLFwiXFxcXC5cIikudG9Mb3dlckNhc2UoKSkuYWRkQ2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIpKX0sdmlldzpmdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiBlPyhuLl9zZWxlY3RWaWV3KGUpLG4ucmViaW5kKCksdCk6bi5fc2VsZWN0ZWRWaWV3fSxfcmVuZGVyVmlldzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9pbml0aWFsaXplVmlldyhlKTtyZXR1cm4gdGhpcy5fYmluZFZpZXcodCksdGhpcy5fbW9kZWwuc2V0KFwiZm9ybWF0dGVkRGF0ZVwiLHQuZGF0ZUZvclRpdGxlKCkpLHR9LHJlc2l6ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldFNpemUoKSxuPXRoaXMuX3NpemUsaT10aGlzLnZpZXcoKTtpJiZpLmdyb3VwcyYmKGV8fCFufHx0LndpZHRoIT09bi53aWR0aHx8dC5oZWlnaHQhPT1uLmhlaWdodCkmJih0aGlzLnJlZnJlc2goe2FjdGlvbjpcInJlc2l6ZVwifSksdGhpcy5fc2l6ZT10KX0sX2FkanVzdFNlbGVjdGVkRGF0ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX21vZGVsLnNlbGVjdGVkRGF0ZSx0PXRoaXMuX3NlbGVjdGlvbixuPXQuc3RhcnQ7biYmIUEuZGF0ZS5pc0luRGF0ZVJhbmdlKGUsSShuKSxJKHQuZW5kKSkmJmUuc2V0RnVsbFllYXIobi5nZXRGdWxsWWVhcigpLG4uZ2V0TW9udGgoKSxuLmdldERhdGUoKSl9LF9pbml0aWFsaXplVmlldzpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcy52aWV3c1tlXTtpZihpKXtpZih0PVUoaSksbj1pLnR5cGUsdHlwZW9mIG49PT1PJiYobj1BLmdldHRlcihpLnR5cGUpKHdpbmRvdykpLCFuKXRocm93IEVycm9yKFwiVGhlcmUgaXMgbm8gc3VjaCB2aWV3XCIpO2k9bmV3IG4odGhpcy53cmFwcGVyLGgoVyghMCx7fSx0aGlzLm9wdGlvbnMsdD9pOnt9LHtyZXNvdXJjZXM6dGhpcy5yZXNvdXJjZXMsZGF0ZTp0aGlzLmRhdGUoKSxzaG93V29ya0hvdXJzOnRoaXMuX3dvcmtEYXlNb2RlfSkpKX1yZXR1cm4gaX0sX3ZpZXdzOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixvLGEscyxsLGM9dGhpcy5vcHRpb25zLnZpZXdzO2Zvcih0aGlzLnZpZXdzPXt9LGE9MCxzPWMubGVuZ3RoO3M+YTthKyspbD0hMSxlPWNbYV0saT1VKGUpLGk/KG89cj1lLnR5cGU/ZS50eXBlOmUsdHlwZW9mIG8hPT1PJiYocj1lLnRpdGxlLGw9ITApKTpvPXI9ZSx0PXhbcl0sdCYmIWwmJihlLnR5cGU9dC50eXBlLHQudGl0bGU9dGhpcy5vcHRpb25zLm1lc3NhZ2VzLnZpZXdzW3JdLFwiZGF5XCI9PT10LnR5cGU/dC5tZXNzYWdlcz17YWxsRGF5OnRoaXMub3B0aW9ucy5tZXNzYWdlcy5hbGxEYXl9OlwiYWdlbmRhXCI9PT10LnR5cGUmJih0Lm1lc3NhZ2VzPXtldmVudDp0aGlzLm9wdGlvbnMubWVzc2FnZXMuZXZlbnQsZGF0ZTp0aGlzLm9wdGlvbnMubWVzc2FnZXMuZGF0ZSx0aW1lOnRoaXMub3B0aW9ucy5tZXNzYWdlcy50aW1lfSkpLGU9Vyh7dGl0bGU6cn0sdCxpP2U6e30pLHImJih0aGlzLnZpZXdzW3JdPWUsKCFufHxlLnNlbGVjdGVkKSYmKG49cikpO24mJih0aGlzLl9zZWxlY3RlZFZpZXdOYW1lPW4pfSxyZWJpbmQ6ZnVuY3Rpb24oKXt0aGlzLmRhdGFTb3VyY2UuZmV0Y2goKX0sX2RhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLG49dC5kYXRhU291cmNlO249cShuKT97ZGF0YTpufTpuLCF0LnRpbWV6b25lfHxuIGluc3RhbmNlb2Ygd3Q/biBpbnN0YW5jZW9mIHd0JiYodC50aW1lem9uZT1uLnNjaGVtYT9uLnNjaGVtYS50aW1lem9uZTpcIlwiKTpuPVcoITAsbix7c2NoZW1hOnt0aW1lem9uZTp0LnRpbWV6b25lfX0pLGUuZGF0YVNvdXJjZSYmZS5fcmVmcmVzaEhhbmRsZXI/ZS5kYXRhU291cmNlLnVuYmluZChLLGUuX3JlZnJlc2hIYW5kbGVyKS51bmJpbmQoXCJwcm9ncmVzc1wiLGUuX3Byb2dyZXNzSGFuZGxlcikudW5iaW5kKFwiZXJyb3JcIixlLl9lcnJvckhhbmRsZXIpOihlLl9yZWZyZXNoSGFuZGxlcj1qKGUucmVmcmVzaCxlKSxlLl9wcm9ncmVzc0hhbmRsZXI9aihlLl9yZXF1ZXN0U3RhcnQsZSksZS5fZXJyb3JIYW5kbGVyPWooZS5fZXJyb3IsZSkpLGUuZGF0YVNvdXJjZT1BLmRhdGEuU2NoZWR1bGVyRGF0YVNvdXJjZS5jcmVhdGUobikuYmluZChLLGUuX3JlZnJlc2hIYW5kbGVyKS5iaW5kKFwicHJvZ3Jlc3NcIixlLl9wcm9ncmVzc0hhbmRsZXIpLmJpbmQoXCJlcnJvclwiLGUuX2Vycm9ySGFuZGxlciksZS5vcHRpb25zLmRhdGFTb3VyY2U9ZS5kYXRhU291cmNlfSxfZXJyb3I6ZnVuY3Rpb24oKXt0aGlzLl9wcm9ncmVzcyghMSl9LF9yZXF1ZXN0U3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLl9wcm9ncmVzcyghMCl9LF9wcm9ncmVzczpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmVsZW1lbnQuZmluZChcIi5rLXNjaGVkdWxlci1jb250ZW50XCIpO0EudWkucHJvZ3Jlc3ModCxlKX0sX3Jlc291cmNlczpmdW5jdGlvbigpe3ZhciB0LG4saSxyLG8sYT10aGlzLHM9YS5vcHRpb25zLnJlc291cmNlcztmb3IodD0wO3MubGVuZ3RoPnQ7dCsrKXtpZihuPXNbdF0saT1uLmZpZWxkLHI9bi5kYXRhU291cmNlLCFpfHwhcil0aHJvdyBFcnJvcignVGhlIFwiZmllbGRcIiBhbmQgXCJkYXRhU291cmNlXCIgb3B0aW9ucyBvZiB0aGUgc2NoZWR1bGVyIHJlc291cmNlIGFyZSBtYW5kYXRvcnkuJyk7YS5yZXNvdXJjZXMucHVzaCh7ZmllbGQ6aSxuYW1lOm4ubmFtZXx8aSx0aXRsZTpuLnRpdGxlfHxpLGRhdGFUZXh0RmllbGQ6bi5kYXRhVGV4dEZpZWxkfHxcInRleHRcIixkYXRhVmFsdWVGaWVsZDpuLmRhdGFWYWx1ZUZpZWxkfHxcInZhbHVlXCIsZGF0YUNvbG9yRmllbGQ6bi5kYXRhQ29sb3JGaWVsZHx8XCJjb2xvclwiLHZhbHVlUHJpbWl0aXZlOm51bGwhPW4udmFsdWVQcmltaXRpdmU/bi52YWx1ZVByaW1pdGl2ZTohMCxtdWx0aXBsZTpuLm11bHRpcGxlfHwhMSxkYXRhU291cmNlOkEuZGF0YS5EYXRhU291cmNlLmNyZWF0ZShyKX0pfW89ZS5tYXAoYS5yZXNvdXJjZXMsZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGF0YVNvdXJjZS5mZXRjaCgpfSksZS53aGVuLmFwcGx5KG51bGwsbykudGhlbihmdW5jdGlvbigpe2Eub3B0aW9ucy5hdXRvQmluZD9hLnZpZXcoYS5fc2VsZWN0ZWRWaWV3TmFtZSk6YS5fc2VsZWN0VmlldyhhLl9zZWxlY3RlZFZpZXdOYW1lKX0pfSxfaW5pdE1vZGVsOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9tb2RlbD1BLm9ic2VydmFibGUoe3NlbGVjdGVkRGF0ZTpuZXcgRGF0ZSh0aGlzLm9wdGlvbnMuZGF0ZSksZm9ybWF0dGVkRGF0ZTpcIlwifSksZS5fbW9kZWwuYmluZChcImNoYW5nZVwiLGZ1bmN0aW9uKHQpe1wic2VsZWN0ZWREYXRlXCI9PT10LmZpZWxkJiZlLnZpZXcoZS5fc2VsZWN0ZWRWaWV3TmFtZSl9KX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLG49dC5oZWlnaHQsaT10LndpZHRoO2Uud3JhcHBlcj1lLmVsZW1lbnQuYWRkQ2xhc3MoXCJrLXdpZGdldCBrLXNjaGVkdWxlciBrLWZsb2F0d3JhcFwiKS5hdHRyKFwicm9sZVwiLFwiZ3JpZFwiKS5hdHRyKFwiYXJpYS1tdWx0aXNlbGVjdGFibGVcIiwhMCksZS5faXNNb2JpbGUoKSYmZS53cmFwcGVyLmFkZENsYXNzKFwiay1zY2hlZHVsZXItbW9iaWxlXCIpLGUuX2lzTW9iaWxlUGhvbmVWaWV3KCkmJmUud3JhcHBlci5hZGRDbGFzcyhcImstc2NoZWR1bGVyLXBob25lXCIpLG4mJmUud3JhcHBlci5oZWlnaHQobiksaSYmZS53cmFwcGVyLndpZHRoKGkpfSxkYXRlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lJiZJKGUpPj1JKHRoaXMub3B0aW9ucy5taW4pJiZJKGUpPD1JKHRoaXMub3B0aW9ucy5tYXgpJiZ0aGlzLl9tb2RlbC5zZXQoXCJzZWxlY3RlZERhdGVcIixlKSxJKHRoaXMuX21vZGVsLmdldChcInNlbGVjdGVkRGF0ZVwiKSl9LF90b29sYmFyOmZ1bmN0aW9uKCl7dmFyIG4saSxyPXRoaXMsbz1yLm9wdGlvbnMsYT1bXTtvLnRvb2xiYXImJihhPWUuaXNBcnJheShvLnRvb2xiYXIpP28udG9vbGJhcjpbby50b29sYmFyXSksbj10aGlzLl9pc01vYmlsZVBob25lVmlldygpP2N0Omx0LGk9ZShuKHttZXNzYWdlczpvLm1lc3NhZ2VzLHBkZjplLmdyZXAoYSxmdW5jdGlvbihlKXtyZXR1cm5cInBkZlwiPT1lfHxcInBkZlwiPT1lLm5hbWV9KS5sZW5ndGg+MCxuczpBLm5zLHZpZXdzOnIudmlld3N9KSksci53cmFwcGVyLmFwcGVuZChpKSxyLnRvb2xiYXI9aSxBLmJpbmQoci50b29sYmFyLHIuX21vZGVsKSxpLm9uKFkrJCxcIi5rLXBkZlwiLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxyLnNhdmVBc1BERigpfSksaS5vbihZKyQsXCIuay1zY2hlZHVsZXItbmF2aWdhdGlvbiBsaVwiLGZ1bmN0aW9uKG4pe3ZhciBpPWUodGhpcyksbz1uZXcgRGF0ZShyLmRhdGUoKSksYT1cIlwiO2lmKG4ucHJldmVudERlZmF1bHQoKSxpLmhhc0NsYXNzKFwiay1uYXYtdG9kYXlcIikpYT1cInRvZGF5XCIsbz1uZXcgRGF0ZTtlbHNlIGlmKGkuaGFzQ2xhc3MoXCJrLW5hdi1uZXh0XCIpKWE9XCJuZXh0XCIsbz1yLnZpZXcoKS5uZXh0RGF0ZSgpO2Vsc2UgaWYoaS5oYXNDbGFzcyhcImstbmF2LXByZXZcIikpYT1cInByZXZpb3VzXCIsbz1yLnZpZXcoKS5wcmV2aW91c0RhdGUoKTtlbHNlIGlmKGkuaGFzQ2xhc3MoXCJrLW5hdi1jdXJyZW50XCIpJiYhci5faXNNb2JpbGVQaG9uZVZpZXcoKSlyZXR1cm4gci5fc2hvd0NhbGVuZGFyKCksdDtyLnRyaWdnZXIoXCJuYXZpZ2F0ZVwiLHt2aWV3OnIuX3NlbGVjdGVkVmlld05hbWUsYWN0aW9uOmEsZGF0ZTpvfSl8fHIuZGF0ZShvKX0pLGkub24oWSskLFwiLmstc2NoZWR1bGVyLXZpZXdzIGxpXCIsZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpO3ZhciBuPWUodGhpcykuYXR0cihBLmF0dHIoXCJuYW1lXCIpKTtyLnRyaWdnZXIoXCJuYXZpZ2F0ZVwiLHt2aWV3Om4sYWN0aW9uOlwiY2hhbmdlVmlld1wiLGRhdGU6ci5kYXRlKCl9KXx8ci52aWV3KG4pfSksaS5maW5kKFwibGlcIikuaG92ZXIoZnVuY3Rpb24oKXtlKHRoaXMpLmFkZENsYXNzKFwiay1zdGF0ZS1ob3ZlclwiKX0sZnVuY3Rpb24oKXtlKHRoaXMpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1ob3ZlclwiKX0pfSxfc2hvd0NhbGVuZGFyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQudG9vbGJhci5maW5kKFwiLmstbmF2LWN1cnJlbnRcIiksaT1lKCc8ZGl2IGNsYXNzPVwiay1jYWxlbmRhci1jb250YWluZXJcIj48ZGl2IGNsYXNzPVwiay1zY2hlZHVsZXItY2FsZW5kYXJcIi8+PC9kaXY+Jyk7dC5wb3B1cHx8KHQucG9wdXA9bmV3IEgoaSx7YW5jaG9yOm4sYWN0aXZhdGU6ZnVuY3Rpb24oKXt0LmNhbGVuZGFyfHwodC5jYWxlbmRhcj1uZXcgTih0aGlzLmVsZW1lbnQuZmluZChcIi5rLXNjaGVkdWxlci1jYWxlbmRhclwiKSx7Y2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy52YWx1ZSgpO3QudHJpZ2dlcihcIm5hdmlnYXRlXCIse3ZpZXc6dC5fc2VsZWN0ZWRWaWV3TmFtZSxhY3Rpb246XCJjaGFuZ2VEYXRlXCIsZGF0ZTplfSl8fCh0LmRhdGUoZSksdC5wb3B1cC5jbG9zZSgpKX0sbWluOnQub3B0aW9ucy5taW4sbWF4OnQub3B0aW9ucy5tYXh9KSksdC5jYWxlbmRhci52YWx1ZSh0LmRhdGUoKSl9LGNvcHlBbmNob3JTdHlsZXM6ITF9KSksdC5wb3B1cC5vcGVuKCl9LHJlZnJlc2g6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXRoaXMudmlldygpO3RoaXMuX3Byb2dyZXNzKCExKSx0aGlzLmFuZ3VsYXIoXCJjbGVhbnVwXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6dC5pdGVtcygpfX0pLGU9ZXx8e30sbiYmKGUmJlwiaXRlbWNoYW5nZVwiPT09ZS5hY3Rpb24mJih0aGlzLl9lZGl0b3IuZWRpdGFibGV8fHRoaXMuX3ByZXZlbnRSZWZyZXNoKXx8dGhpcy50cmlnZ2VyKFwiZGF0YUJpbmRpbmdcIix7YWN0aW9uOmUuYWN0aW9ufHxcInJlYmluZFwiLGluZGV4OmUuaW5kZXgsaXRlbXM6ZS5pdGVtc30pfHwoZSYmXCJyZXNpemVcIj09PWUuYWN0aW9ufHwhdGhpcy5fZWRpdG9yfHx0aGlzLl9lZGl0b3IuY2xvc2UoKSx0aGlzLl9kYXRhPXRoaXMuZGF0YVNvdXJjZS5leHBhbmQobi5zdGFydERhdGUoKSxuLmVuZERhdGUoKSksbi5yZW5kZXIodGhpcy5fZGF0YSksdGhpcy50cmlnZ2VyKFwiZGF0YUJvdW5kXCIpKSl9LHNsb3RCeVBvc2l0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzLnZpZXcoKTtyZXR1cm4gaS5fc2xvdEJ5UG9zaXRpb24/KG49aS5fc2xvdEJ5UG9zaXRpb24oZSx0KSxuP3tzdGFydERhdGU6bi5zdGFydERhdGUoKSxlbmREYXRlOm4uZW5kRGF0ZSgpLGdyb3VwSW5kZXg6bi5ncm91cEluZGV4LGVsZW1lbnQ6bi5lbGVtZW50LGlzRGF5U2xvdDpuLmlzRGF5U2xvdH06bnVsbCk6bnVsbH0sc2xvdEJ5RWxlbWVudDpmdW5jdGlvbih0KXt2YXIgbj1lKHQpLm9mZnNldCgpO1xyXG5yZXR1cm4gdGhpcy5zbG90QnlQb3NpdGlvbihuLmxlZnQsbi50b3ApfSxyZXNvdXJjZXNCeVNsb3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudmlldygpLl9yZXNvdXJjZUJ5U2xvdChlKX19KSx4PXtkYXk6e3R5cGU6XCJrZW5kby51aS5EYXlWaWV3XCJ9LHdlZWs6e3R5cGU6XCJrZW5kby51aS5XZWVrVmlld1wifSx3b3JrV2Vlazp7dHlwZTpcImtlbmRvLnVpLldvcmtXZWVrVmlld1wifSxhZ2VuZGE6e3R5cGU6XCJrZW5kby51aS5BZ2VuZGFWaWV3XCJ9LG1vbnRoOnt0eXBlOlwia2VuZG8udWkuTW9udGhWaWV3XCJ9LHRpbWVsaW5lOnt0eXBlOlwia2VuZG8udWkuVGltZWxpbmVWaWV3XCJ9LHRpbWVsaW5lV2Vlazp7dHlwZTpcImtlbmRvLnVpLlRpbWVsaW5lV2Vla1ZpZXdcIn0sdGltZWxpbmVXb3JrV2Vlazp7dHlwZTpcImtlbmRvLnVpLlRpbWVsaW5lV29ya1dlZWtWaWV3XCJ9LHRpbWVsaW5lTW9udGg6e3R5cGU6XCJrZW5kby51aS5UaW1lbGluZU1vbnRoVmlld1wifX0sQi5wbHVnaW4oayksQS5QREZNaXhpbiYmQS5QREZNaXhpbi5leHRlbmQoay5wcm90b3R5cGUpLEM9TC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9QS50aW1lem9uZS53aW5kb3dzX3pvbmVzO2lmKCFpfHwhQS50aW1lem9uZS56b25lc190aXRsZXMpdGhyb3cgRXJyb3IoXCJrZW5kby50aW1lem9uZXMubWluLmpzIGlzIG5vdCBpbmNsdWRlZC5cIik7TC5mbi5pbml0LmNhbGwobixlLHQpLG4ud3JhcHBlcj1uLmVsZW1lbnQsbi5fem9uZXNRdWVyeT1uZXcgQS5kYXRhLlF1ZXJ5KGkpLG4uX3pvbmVUaXRsZUlkPUEuZ3VpZCgpLG4uX3pvbmVUaXRsZVBpY2tlcigpLG4uX3pvbmVQaWNrZXIoKSxuLnZhbHVlKG4ub3B0aW9ucy52YWx1ZSl9LG9wdGlvbnM6e25hbWU6XCJUaW1lem9uZUVkaXRvclwiLHZhbHVlOlwiXCIsb3B0aW9uTGFiZWw6XCJObyB0aW1lem9uZVwifSxldmVudHM6W1wiY2hhbmdlXCJdLF96b25lVGl0bGVQaWNrZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49ZSgnPGlucHV0IGlkPVwiJyt0Ll96b25lVGl0bGVJZCsnXCIvPicpLmFwcGVuZFRvKHQud3JhcHBlcik7dC5fem9uZVRpdGxlPW5ldyBBLnVpLkRyb3BEb3duTGlzdChuLHtkYXRhU291cmNlOkEudGltZXpvbmUuem9uZXNfdGl0bGVzLGRhdGFWYWx1ZUZpZWxkOlwib3RoZXJfem9uZVwiLGRhdGFUZXh0RmllbGQ6XCJuYW1lXCIsb3B0aW9uTGFiZWw6dC5vcHRpb25zLm9wdGlvbkxhYmVsLGNhc2NhZGU6ZnVuY3Rpb24oKXt0aGlzLnZhbHVlKCl8fHQuX3pvbmUud3JhcHBlci5oaWRlKCl9fSl9LF96b25lUGlja2VyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPWUoXCI8aW5wdXQgLz5cIikuYXBwZW5kVG8odGhpcy53cmFwcGVyKTt0Ll96b25lPW5ldyBBLnVpLkRyb3BEb3duTGlzdChuLHtkYXRhVmFsdWVGaWVsZDpcInpvbmVcIixkYXRhVGV4dEZpZWxkOlwidGVycml0b3J5XCIsZGF0YVNvdXJjZTp0Ll96b25lc1F1ZXJ5LmRhdGEsY2FzY2FkZUZyb206dC5fem9uZVRpdGxlSWQsY2FzY2FkZTpmdW5jdGlvbigpe3QuX3ZhbHVlPXRoaXMudmFsdWUoKSx0LnRyaWdnZXIoXCJjaGFuZ2VcIil9LGRhdGFCb3VuZDpmdW5jdGlvbigpe3QuX3ZhbHVlPXRoaXMudmFsdWUoKSx0aGlzLndyYXBwZXIudG9nZ2xlKHRoaXMuZGF0YVNvdXJjZS52aWV3KCkubGVuZ3RoPjEpfX0pLHQuX3pvbmUud3JhcHBlci5oaWRlKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtMLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSxBLmRlc3Ryb3kodGhpcy53cmFwcGVyKX0sdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzO3JldHVybiBlPT09dD9pLl92YWx1ZToobj1pLl96b25lc1F1ZXJ5LmZpbHRlcih7ZmllbGQ6XCJ6b25lXCIsb3BlcmF0b3I6XCJlcVwiLHZhbHVlOmV9KS5kYXRhWzBdLG4/KGkuX3pvbmVUaXRsZS52YWx1ZShuLm90aGVyX3pvbmUpLGkuX3pvbmUudmFsdWUobi56b25lKSk6aS5fem9uZVRpdGxlLnZhbHVlKFwiXCIpLHQpfX0pLEIucGx1Z2luKEMpLFM9QS50ZW1wbGF0ZSgnPG9wdGlvbiB2YWx1ZT1cIiM9b3RoZXJfem9uZSNcIj4jPW5hbWUjPC9vcHRpb24+JyksVD1BLnRlbXBsYXRlKCc8b3B0aW9uIHZhbHVlPVwiIz16b25lI1wiPiM9dGVycml0b3J5Izwvb3B0aW9uPicpLEQ9TC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9QS50aW1lem9uZS53aW5kb3dzX3pvbmVzO2lmKCFpfHwhQS50aW1lem9uZS56b25lc190aXRsZXMpdGhyb3cgRXJyb3IoXCJrZW5kby50aW1lem9uZXMubWluLmpzIGlzIG5vdCBpbmNsdWRlZC5cIik7TC5mbi5pbml0LmNhbGwobixlLHQpLG4ud3JhcHBlcj1uLmVsZW1lbnQsbi5fem9uZXNRdWVyeT1uZXcgQS5kYXRhLlF1ZXJ5KGkpLG4uX3pvbmVUaXRsZVBpY2tlcigpLG4uX3pvbmVQaWNrZXIoKSxuLnZhbHVlKG4ub3B0aW9ucy52YWx1ZSl9LG9wdGlvbnM6e25hbWU6XCJNb2JpbGVUaW1lem9uZUVkaXRvclwiLG9wdGlvbkxhYmVsOlwiTm8gdGltZXpvbmVcIix2YWx1ZTpcIlwifSxldmVudHM6W1wiY2hhbmdlXCJdLF9iaW5kWm9uZXM6ZnVuY3Rpb24oZSl7dmFyIHQ9ZT90aGlzLl9maWx0ZXIoZSk6W107dGhpcy5fem9uZS5odG1sKHRoaXMuX29wdGlvbnModCxUKSl9LF9maWx0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3pvbmVzUXVlcnkuZmlsdGVyKHtmaWVsZDpcIm90aGVyX3pvbmVcIixvcGVyYXRvcjpcImVxXCIsdmFsdWU6ZX0pLmRhdGF9LF9vcHRpb25zOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT0wLHI9XCJcIixvPWUubGVuZ3RoO2ZvcihuJiYocis9dCh7b3RoZXJfem9uZTpcIlwiLG5hbWU6bn0pKTtvPmk7aSsrKXIrPXQoZVtpXSk7cmV0dXJuIHJ9LF96b25lVGl0bGVQaWNrZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5fb3B0aW9ucyhBLnRpbWV6b25lLnpvbmVzX3RpdGxlcyxTLHQub3B0aW9ucy5vcHRpb25MYWJlbCk7dC5fem9uZVRpdGxlPWUoXCI8c2VsZWN0PlwiK24rXCI8L3NlbGVjdD5cIikuYXBwZW5kVG8odC53cmFwcGVyKS5jaGFuZ2UoZnVuY3Rpb24oKXt2YXIgZT10aGlzLnZhbHVlLG49dC5fem9uZTt0Ll9iaW5kWm9uZXMoZSksZSYmblswXS5jaGlsZHJlbi5sZW5ndGg+MT9uLnNob3coKTpuLmhpZGUoKSx0Ll92YWx1ZT1uWzBdLnZhbHVlLHQudHJpZ2dlcihcImNoYW5nZVwiKX0pfSxfem9uZVBpY2tlcjpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5fem9uZT1lKCc8c2VsZWN0IHN0eWxlPVwiZGlzcGxheTpub25lXCI+PC9zZWxlY3Q+JykuYXBwZW5kVG8odGhpcy53cmFwcGVyKS5jaGFuZ2UoZnVuY3Rpb24oKXt0Ll92YWx1ZT10aGlzLnZhbHVlLHQudHJpZ2dlcihcImNoYW5nZVwiKX0pLHQuX2JpbmRab25lcyh0Ll96b25lVGl0bGUudmFsKCkpLHQuX3ZhbHVlPXQuX3pvbmVbMF0udmFsdWV9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtMLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSxBLmRlc3Ryb3kodGhpcy53cmFwcGVyKX0sdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLHI9aS5fem9uZSxvPVwiXCIsYT1cIlwiO3JldHVybiBlPT09dD9pLl92YWx1ZToobj1pLl96b25lc1F1ZXJ5LmZpbHRlcih7ZmllbGQ6XCJ6b25lXCIsb3BlcmF0b3I6XCJlcVwiLHZhbHVlOmV9KS5kYXRhWzBdLG4mJihhPW4uem9uZSxvPW4ub3RoZXJfem9uZSksaS5fem9uZVRpdGxlLnZhbChvKSxpLl9iaW5kWm9uZXMobyksci52YWwoYSksYT1yWzBdLnZhbHVlLGEmJnJbMF0uY2hpbGRyZW4ubGVuZ3RoPjE/ci5zaG93KCk6ci5oaWRlKCksaS5fdmFsdWU9YSx0KX19KSxCLnBsdWdpbihEKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQ9d2luZG93LmtlbmRvLG49dC51aS5XaWRnZXQsaT1lLnByb3h5LHI9TWF0aC5hYnMsbz0yMCxhPXQuQ2xhc3MuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKG4saSxvKXtvPWUuZXh0ZW5kKHttaW5YRGVsdGE6MzAsbWF4WURlbHRhOjIwLG1heER1cmF0aW9uOjFlM30sbyksbmV3IHQuVXNlckV2ZW50cyhuLHtzdXJmYWNlOm8uc3VyZmFjZSxhbGxvd1NlbGVjdGlvbjohMCxzdGFydDpmdW5jdGlvbihlKXsyKnIoZS54LnZlbG9jaXR5KT49cihlLnkudmVsb2NpdHkpJiZlLnNlbmRlci5jYXB0dXJlKCl9LG1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50b3VjaCxuPWUuZXZlbnQudGltZVN0YW1wLXQuc3RhcnRUaW1lLGE9dC54LmluaXRpYWxEZWx0YT4wP1wicmlnaHRcIjpcImxlZnRcIjtyKHQueC5pbml0aWFsRGVsdGEpPj1vLm1pblhEZWx0YSYmcih0LnkuaW5pdGlhbERlbHRhKTxvLm1heFlEZWx0YSYmby5tYXhEdXJhdGlvbj5uJiYoaSh7ZGlyZWN0aW9uOmEsdG91Y2g6dCx0YXJnZXQ6dC50YXJnZXR9KSx0LmNhbmNlbCgpKX19KX19KSxzPW4uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gbyhlKXtyZXR1cm4gZnVuY3Rpb24odCl7cy5fdHJpZ2dlclRvdWNoKGUsdCl9fWZ1bmN0aW9uIGEoZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3MudHJpZ2dlcihlLHt0b3VjaGVzOnQudG91Y2hlcyxkaXN0YW5jZTp0LmRpc3RhbmNlLGNlbnRlcjp0LmNlbnRlcixldmVudDp0LmV2ZW50fSl9fXZhciBzPXRoaXM7bi5mbi5pbml0LmNhbGwocyxlLHIpLHI9cy5vcHRpb25zLGU9cy5lbGVtZW50LHMuZXZlbnRzPW5ldyB0LlVzZXJFdmVudHMoZSx7ZmlsdGVyOnIuZmlsdGVyLHN1cmZhY2U6ci5zdXJmYWNlLG1pbkhvbGQ6ci5taW5Ib2xkLG11bHRpVG91Y2g6ci5tdWx0aVRvdWNoLGFsbG93U2VsZWN0aW9uOiEwLHByZXNzOm8oXCJ0b3VjaHN0YXJ0XCIpLGhvbGQ6byhcImhvbGRcIiksdGFwOmkocyxcIl90YXBcIiksZ2VzdHVyZXN0YXJ0OmEoXCJnZXN0dXJlc3RhcnRcIiksZ2VzdHVyZWNoYW5nZTphKFwiZ2VzdHVyZWNoYW5nZVwiKSxnZXN0dXJlZW5kOmEoXCJnZXN0dXJlZW5kXCIpfSksci5lbmFibGVTd2lwZT8ocy5ldmVudHMuYmluZChcInN0YXJ0XCIsaShzLFwiX3N3aXBlc3RhcnRcIikpLHMuZXZlbnRzLmJpbmQoXCJtb3ZlXCIsaShzLFwiX3N3aXBlbW92ZVwiKSkpOihzLmV2ZW50cy5iaW5kKFwic3RhcnRcIixpKHMsXCJfZHJhZ3N0YXJ0XCIpKSxzLmV2ZW50cy5iaW5kKFwibW92ZVwiLG8oXCJkcmFnXCIpKSxzLmV2ZW50cy5iaW5kKFwiZW5kXCIsbyhcImRyYWdlbmRcIikpKSx0Lm5vdGlmeShzKX0sZXZlbnRzOltcInRvdWNoc3RhcnRcIixcImRyYWdzdGFydFwiLFwiZHJhZ1wiLFwiZHJhZ2VuZFwiLFwidGFwXCIsXCJkb3VibGV0YXBcIixcImhvbGRcIixcInN3aXBlXCIsXCJnZXN0dXJlc3RhcnRcIixcImdlc3R1cmVjaGFuZ2VcIixcImdlc3R1cmVlbmRcIl0sb3B0aW9uczp7bmFtZTpcIlRvdWNoXCIsc3VyZmFjZTpudWxsLGdsb2JhbDohMSxtdWx0aVRvdWNoOiExLGVuYWJsZVN3aXBlOiExLG1pblhEZWx0YTozMCxtYXhZRGVsdGE6MjAsbWF4RHVyYXRpb246MWUzLG1pbkhvbGQ6ODAwLGRvdWJsZVRhcFRpbWVvdXQ6ODAwfSxjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmV2ZW50cy5jYW5jZWwoKX0sX3RyaWdnZXJUb3VjaDpmdW5jdGlvbihlLHQpe3RoaXMudHJpZ2dlcihlLHt0b3VjaDp0LnRvdWNoLGV2ZW50OnQuZXZlbnR9KSYmdC5wcmV2ZW50RGVmYXVsdCgpfSxfdGFwOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLmxhc3RUYXAscj1lLnRvdWNoO2kmJm4ub3B0aW9ucy5kb3VibGVUYXBUaW1lb3V0PnIuZW5kVGltZS1pLmVuZFRpbWUmJnQudG91Y2hEZWx0YShyLGkpLmRpc3RhbmNlPG8/KG4uX3RyaWdnZXJUb3VjaChcImRvdWJsZXRhcFwiLGUpLG4ubGFzdFRhcD1udWxsKToobi5fdHJpZ2dlclRvdWNoKFwidGFwXCIsZSksbi5sYXN0VGFwPXIpfSxfZHJhZ3N0YXJ0OmZ1bmN0aW9uKGUpe3RoaXMuX3RyaWdnZXJUb3VjaChcImRyYWdzdGFydFwiLGUpfSxfc3dpcGVzdGFydDpmdW5jdGlvbihlKXsyKnIoZS54LnZlbG9jaXR5KT49cihlLnkudmVsb2NpdHkpJiZlLnNlbmRlci5jYXB0dXJlKCl9LF9zd2lwZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucyxpPWUudG91Y2gsbz1lLmV2ZW50LnRpbWVTdGFtcC1pLnN0YXJ0VGltZSxhPWkueC5pbml0aWFsRGVsdGE+MD9cInJpZ2h0XCI6XCJsZWZ0XCI7cihpLnguaW5pdGlhbERlbHRhKT49bi5taW5YRGVsdGEmJnIoaS55LmluaXRpYWxEZWx0YSk8bi5tYXhZRGVsdGEmJm4ubWF4RHVyYXRpb24+byYmKHQudHJpZ2dlcihcInN3aXBlXCIse2RpcmVjdGlvbjphLHRvdWNoOmUudG91Y2h9KSxpLmNhbmNlbCgpKX19KTt3aW5kb3cualF1ZXJ5LmZuLmtlbmRvTW9iaWxlU3dpcGU9ZnVuY3Rpb24oZSx0KXt0aGlzLmVhY2goZnVuY3Rpb24oKXtuZXcgYSh0aGlzLGUsdCl9KX0sdC51aS5wbHVnaW4ocyl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dmFyIHQsbixpPVtdLHI9ZS5jbGFzc05hbWU7Zm9yKHQ9MCxuPWUubGV2ZWw7bj50O3QrKylpLnB1c2gobyhcInNwYW5cIix7Y2xhc3NOYW1lOnJ9KSk7cmV0dXJuIGl9ZnVuY3Rpb24gbigpe3ZhciB0PWkuX2FjdGl2ZUVsZW1lbnQoKTtcImJvZHlcIiE9PXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmZSh0KS5ibHVyKCl9dmFyIGk9d2luZG93LmtlbmRvLHI9aS5kb20sbz1yLmVsZW1lbnQsYT1yLnRleHQscz1pLnN1cHBvcnQubW9iaWxlT1MsbD1pLnVpLGM9bC5XaWRnZXQsZD1lLmV4dGVuZCx1PWUubWFwLGg9ZS5pc0Z1bmN0aW9uLHA9aS5rZXlzLGY9e3RpdGxlOlwiVGl0bGVcIixzdGFydDpcIlN0YXJ0IFRpbWVcIixlbmQ6XCJFbmQgVGltZVwiLHBlcmNlbnRDb21wbGV0ZTpcIiUgRG9uZVwiLHBhcmVudElkOlwiUHJlZGVjZXNzb3IgSURcIixpZDpcIklEXCIsb3JkZXJJZDpcIk9yZGVyIElEXCJ9LGc9XCJzdHJpbmdcIixtPVwiLmtlbmRvR2FudHRMaXN0XCIsdj1cImNsaWNrXCIsXz1cIi5cIix5PXt3cmFwcGVyOlwiay10cmVlbGlzdCBrLWdyaWQgay13aWRnZXRcIixoZWFkZXI6XCJrLWhlYWRlclwiLGFsdDpcImstYWx0XCIsZWRpdENlbGw6XCJrLWVkaXQtY2VsbFwiLGdyb3VwOlwiay10cmVlbGlzdC1ncm91cFwiLGdyaWRIZWFkZXI6XCJrLWdyaWQtaGVhZGVyXCIsZ3JpZEhlYWRlcldyYXA6XCJrLWdyaWQtaGVhZGVyLXdyYXBcIixncmlkQ29udGVudDpcImstZ3JpZC1jb250ZW50XCIsZ3JpZENvbnRlbnRXcmFwOlwiay1ncmlkLWNvbnRlbnRcIixzZWxlY3RlZDpcImstc3RhdGUtc2VsZWN0ZWRcIixpY29uOlwiay1pY29uXCIsaWNvbkNvbGxhcHNlOlwiay1pLWNvbGxhcHNlXCIsaWNvbkV4cGFuZDpcImstaS1leHBhbmRcIixpY29uSGlkZGVuOlwiay1pLW5vbmVcIixpY29uUGxhY2VIb2xkZXI6XCJrLWljb24gay1pLW5vbmVcIixpbnB1dDpcImstaW5wdXRcIixkcm9wUG9zaXRpb25zOlwiay1pbnNlcnQtdG9wIGstaW5zZXJ0LWJvdHRvbSBrLWFkZCBrLWluc2VydC1taWRkbGVcIixkcm9wVG9wOlwiay1pbnNlcnQtdG9wXCIsZHJvcEJvdHRvbTpcImstaW5zZXJ0LWJvdHRvbVwiLGRyb3BBZGQ6XCJrLWFkZFwiLGRyb3BNaWRkbGU6XCJrLWluc2VydC1taWRkbGVcIixkcm9wRGVuaWVkOlwiay1kZW5pZWRcIixkcmFnU3RhdHVzOlwiay1kcmFnLXN0YXR1c1wiLGRyYWdDbHVlOlwiay1kcmFnLWNsdWVcIixkcmFnQ2x1ZVRleHQ6XCJrLWNsdWUtdGV4dFwifSx3PWwuR2FudHRMaXN0PWMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7Yy5mbi5pbml0LmNhbGwodGhpcyxlLHQpLDA9PT10aGlzLm9wdGlvbnMuY29sdW1ucy5sZW5ndGgmJnRoaXMub3B0aW9ucy5jb2x1bW5zLnB1c2goXCJ0aXRsZVwiKSx0aGlzLmRhdGFTb3VyY2U9dGhpcy5vcHRpb25zLmRhdGFTb3VyY2UsdGhpcy5fY29sdW1ucygpLHRoaXMuX2xheW91dCgpLHRoaXMuX2RvbVRyZWVzKCksdGhpcy5faGVhZGVyKCksdGhpcy5fc29ydGFibGUoKSx0aGlzLl9lZGl0YWJsZSgpLHRoaXMuX3NlbGVjdGFibGUoKSx0aGlzLl9kcmFnZ2FibGUoKSx0aGlzLl9hdHRhY2hFdmVudHMoKSx0aGlzLl9hZGp1c3RIZWlnaHQoKX0sX2FkanVzdEhlaWdodDpmdW5jdGlvbigpe3RoaXMuY29udGVudC5oZWlnaHQodGhpcy5lbGVtZW50LmhlaWdodCgpLXRoaXMuaGVhZGVyLnBhcmVudCgpLm91dGVySGVpZ2h0KCkpfSxkZXN0cm95OmZ1bmN0aW9uKCl7Yy5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5fcmVvcmRlckRyYWdnYWJsZSYmdGhpcy5fcmVvcmRlckRyYWdnYWJsZS5kZXN0cm95KCksdGhpcy5fdGFibGVEcm9wQXJlYSYmdGhpcy5fdGFibGVEcm9wQXJlYS5kZXN0cm95KCksdGhpcy5fY29udGVudERyb3BBcmVhJiZ0aGlzLl9jb250ZW50RHJvcEFyZWEuZGVzdHJveSgpLHRoaXMudG91Y2gmJnRoaXMudG91Y2guZGVzdHJveSgpLHRoaXMuY29udGVudC5vZmYobSksdGhpcy5oZWFkZXI9bnVsbCx0aGlzLmNvbnRlbnQ9bnVsbCx0aGlzLmxldmVscz1udWxsLGkuZGVzdHJveSh0aGlzLmVsZW1lbnQpfSxvcHRpb25zOntuYW1lOlwiR2FudHRMaXN0XCIsc2VsZWN0YWJsZTohMCxlZGl0YWJsZTohMH0sX2F0dGFjaEV2ZW50czpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj13LnN0eWxlczt0LmNvbnRlbnQub24odittLFwidGQgPiBzcGFuLlwiK24uaWNvbitcIjpub3QoLlwiK24uaWNvbkhpZGRlbitcIilcIixmdW5jdGlvbihuKXt2YXIgaT1lKHRoaXMpLHI9dC5fbW9kZWxGcm9tRWxlbWVudChpKTtyLnNldChcImV4cGFuZGVkXCIsIXIuZ2V0KFwiZXhwYW5kZWRcIikpLG4uc3RvcFByb3BhZ2F0aW9uKCl9KX0sX2RvbVRyZWVzOmZ1bmN0aW9uKCl7dGhpcy5oZWFkZXJUcmVlPW5ldyByLlRyZWUodGhpcy5oZWFkZXJbMF0pLHRoaXMuY29udGVudFRyZWU9bmV3IHIuVHJlZSh0aGlzLmNvbnRlbnRbMF0pfSxfY29sdW1uczpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5jb2x1bW5zLHQ9ZnVuY3Rpb24oKXt0aGlzLmZpZWxkPVwiXCIsdGhpcy50aXRsZT1cIlwiLHRoaXMuZWRpdGFibGU9ITEsdGhpcy5zb3J0YWJsZT0hMX07dGhpcy5jb2x1bW5zPXUoZSxmdW5jdGlvbihlKXtyZXR1cm4gZT1cInN0cmluZ1wiPT10eXBlb2YgZT97ZmllbGQ6ZSx0aXRsZTpmW2VdfTplLGQobmV3IHQsZSl9KX0sX2xheW91dDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudCx0PXcuc3R5bGVzO2UuYWRkQ2xhc3ModC53cmFwcGVyKS5hcHBlbmQoXCI8ZGl2IGNsYXNzPSdcIit0LmdyaWRIZWFkZXIrXCInPjxkaXYgY2xhc3M9J1wiK3QuZ3JpZEhlYWRlcldyYXArXCInPjwvZGl2PjwvZGl2PlwiKS5hcHBlbmQoXCI8ZGl2IGNsYXNzPSdcIit0LmdyaWRDb250ZW50V3JhcCtcIic+PC9kaXY+XCIpLHRoaXMuaGVhZGVyPWUuZmluZChfK3QuZ3JpZEhlYWRlcldyYXApLHRoaXMuY29udGVudD1lLmZpbmQoXyt0LmdyaWRDb250ZW50KX0sX2hlYWRlcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuaGVhZGVyVHJlZSx0PW8oXCJjb2xncm91cFwiLG51bGwsdGhpcy5fY29scygpKSxuPW8oXCJ0aGVhZFwiLHtyb2xlOlwicm93Z3JvdXBcIn0sW28oXCJ0clwiLHtyb2xlOlwicm93XCJ9LHRoaXMuX3RocygpKV0pLGk9byhcInRhYmxlXCIse3N0eWxlOntcIm1pbi13aWR0aFwiOnRoaXMub3B0aW9ucy5saXN0V2lkdGgrXCJweFwifSxyb2xlOlwiZ3JpZFwifSxbdCxuXSk7ZS5yZW5kZXIoW2ldKX0sX3JlbmRlcjpmdW5jdGlvbihlKXt2YXIgdCxuLGk7dGhpcy5sZXZlbHM9W3tmaWVsZDpudWxsLHZhbHVlOjB9XSx0PW8oXCJjb2xncm91cFwiLG51bGwsdGhpcy5fY29scygpKSxuPW8oXCJ0Ym9keVwiLHtyb2xlOlwicm93Z3JvdXBcIn0sdGhpcy5fdHJzKGUpKSxpPW8oXCJ0YWJsZVwiLHtzdHlsZTp7XCJtaW4td2lkdGhcIjp0aGlzLm9wdGlvbnMubGlzdFdpZHRoK1wicHhcIn0sdGFiSW5kZXg6MCxyb2xlOlwidHJlZWdyaWRcIn0sW3Qsbl0pLHRoaXMuY29udGVudFRyZWUucmVuZGVyKFtpXSksdGhpcy50cmlnZ2VyKFwicmVuZGVyXCIpfSxfdGhzOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscj10aGlzLmNvbHVtbnMscz1bXTtmb3Iobj0wLGk9ci5sZW5ndGg7aT5uO24rKyllPXJbbl0sdD17XCJkYXRhLWZpZWxkXCI6ZS5maWVsZCxcImRhdGEtdGl0bGVcIjplLnRpdGxlLGNsYXNzTmFtZTp3LnN0eWxlcy5oZWFkZXIscm9sZTpcImNvbHVtbmhlYWRlclwifSxzLnB1c2gobyhcInRoXCIsdCxbYShlLnRpdGxlKV0pKTtyZXR1cm4gc30sX2NvbHM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLGE9dGhpcy5jb2x1bW5zLHM9W107Zm9yKGk9MCxyPWEubGVuZ3RoO3I+aTtpKyspZT1hW2ldLG49ZS53aWR0aCx0PW4mJjAhPT1wYXJzZUludChuLDEwKT97c3R5bGU6e3dpZHRoOnR5cGVvZiBuPT09Zz9uOm4rXCJweFwifX06bnVsbCxzLnB1c2gobyhcImNvbFwiLHQsW10pKTtyZXR1cm4gc30sX3RyczpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGE9W10scz1bXSxsPXcuc3R5bGVzO2ZvcihyPTAsbz1lLmxlbmd0aDtvPnI7cisrKXQ9ZVtyXSxpPXRoaXMuX2xldmVscyh7aWR4OnQucGFyZW50SWQsaWQ6dC5pZCxzdW1tYXJ5OnQuc3VtbWFyeX0pLG49e1wiZGF0YS11aWRcIjp0LnVpZCxcImRhdGEtbGV2ZWxcIjppLHJvbGU6XCJyb3dcIn0sdC5zdW1tYXJ5JiYobltcImFyaWEtZXhwYW5kZWRcIl09dC5leHBhbmRlZCksciUyIT09MCYmcy5wdXNoKGwuYWx0KSx0LnN1bW1hcnkmJnMucHVzaChsLmdyb3VwKSxzLmxlbmd0aCYmKG4uY2xhc3NOYW1lPXMuam9pbihcIiBcIikpLGEucHVzaCh0aGlzLl90ZHMoe3Rhc2s6dCxhdHRyOm4sbGV2ZWw6aX0pKSxzPVtdO3JldHVybiBhfSxfdGRzOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPVtdLGE9dGhpcy5jb2x1bW5zO2ZvcihuPTAsaT1hLmxlbmd0aDtpPm47bisrKXQ9YVtuXSxyLnB1c2godGhpcy5fdGQoe3Rhc2s6ZS50YXNrLGNvbHVtbjp0LGxldmVsOmUubGV2ZWx9KSk7cmV0dXJuIG8oXCJ0clwiLGUuYXR0cixyKX0sX3RkOmZ1bmN0aW9uKGUpe3ZhciBuLHIscz1bXSxsPXRoaXMub3B0aW9ucy5yZXNvdXJjZXNGaWVsZCxjPXcuc3R5bGVzLGQ9ZS50YXNrLHU9ZS5jb2x1bW4saD1kLmdldCh1LmZpZWxkKXx8W107aWYodS5maWVsZD09bCl7Zm9yKG49W10scj0wO2gubGVuZ3RoPnI7cisrKW4ucHVzaChpLmZvcm1hdChcInswfSBbezF9XVwiLGhbcl0uZ2V0KFwibmFtZVwiKSxoW3JdLmdldChcImZvcm1hdGVkVmFsdWVcIikpKTtuPW4uam9pbihcIiwgXCIpfWVsc2Ugbj11LmZvcm1hdD9pLmZvcm1hdCh1LmZvcm1hdCxoKTpoO3JldHVyblwidGl0bGVcIj09PXUuZmllbGQmJihzPXQoe2xldmVsOmUubGV2ZWwsY2xhc3NOYW1lOmMuaWNvblBsYWNlSG9sZGVyfSkscy5wdXNoKG8oXCJzcGFuXCIse2NsYXNzTmFtZTpjLmljb24rXCIgXCIrKGQuc3VtbWFyeT9kLmV4cGFuZGVkP2MuaWNvbkNvbGxhcHNlOmMuaWNvbkV4cGFuZDpjLmljb25IaWRkZW4pfSkpKSxzLnB1c2gobyhcInNwYW5cIixudWxsLFthKG4pXSkpLG8oXCJ0ZFwiLHtyb2xlOlwiZ3JpZGNlbGxcIn0scyl9LF9sZXZlbHM6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9dGhpcy5sZXZlbHMsbz1lLnN1bW1hcnksYT1lLmlkeCxzPWUuaWQ7Zm9yKG49MCxpPXIubGVuZ3RoO2k+bjtuKyspaWYodD1yW25dLHQuZmllbGQ9PWEpcmV0dXJuIG8mJnIucHVzaCh7ZmllbGQ6cyx2YWx1ZTp0LnZhbHVlKzF9KSx0LnZhbHVlfSxfc29ydGFibGU6ZnVuY3Rpb24oKXt2YXIgZSx0LG4scixvLGE9dGhpcy5vcHRpb25zLnJlc291cmNlc0ZpZWxkLHM9dGhpcy5jb2x1bW5zLGw9dGhpcy5oZWFkZXIuZmluZChcInRoXCIpO2ZvcihyPTAsbz1sLmxlbmd0aDtvPnI7cisrKWU9c1tyXSxlLnNvcnRhYmxlJiZlLmZpZWxkIT09YSYmKG49bC5lcShyKSx0PW4uZGF0YShcImtlbmRvQ29sdW1uU29ydGVyXCIpLHQmJnQuZGVzdHJveSgpLG4uYXR0cihcImRhdGEtXCIraS5ucytcImZpZWxkXCIsZS5maWVsZCkua2VuZG9Db2x1bW5Tb3J0ZXIoe2RhdGFTb3VyY2U6dGhpcy5kYXRhU291cmNlfSkpO2w9bnVsbH0sX3NlbGVjdGFibGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dGhpcy5vcHRpb25zLnNlbGVjdGFibGU7biYmdGhpcy5jb250ZW50Lm9uKHYrbSxcInRyXCIsZnVuY3Rpb24obil7dmFyIGk9ZSh0aGlzKTtuLmN0cmxLZXk/dC5jbGVhclNlbGVjdGlvbigpOnQuc2VsZWN0KGkpfSl9LHNlbGVjdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmNvbnRlbnQuZmluZChlKSxuPXcuc3R5bGVzLnNlbGVjdGVkO3JldHVybiB0Lmxlbmd0aD8odC5zaWJsaW5ncyhfK24pLnJlbW92ZUNsYXNzKG4pLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITEpLmVuZCgpLmFkZENsYXNzKG4pLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITApLHZvaWQgdGhpcy50cmlnZ2VyKFwiY2hhbmdlXCIpKTp0aGlzLmNvbnRlbnQuZmluZChfK24pfSxjbGVhclNlbGVjdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc2VsZWN0KCk7ZS5sZW5ndGgmJihlLnJlbW92ZUNsYXNzKHcuc3R5bGVzLnNlbGVjdGVkKSx0aGlzLnRyaWdnZXIoXCJjaGFuZ2VcIikpfSxfc2V0RGF0YVNvdXJjZTpmdW5jdGlvbihlKXt0aGlzLmRhdGFTb3VyY2U9ZX0sX2VkaXRhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxpPXcuc3R5bGVzLHI9XCJzcGFuLlwiK2kuaWNvbitcIjpub3QoXCIraS5pY29uSGlkZGVuK1wiKVwiLG89ZnVuY3Rpb24oKXt0LmVkaXRhYmxlJiZ0LmVkaXRhYmxlLmVuZCgpJiZ0Ll9jbG9zZUNlbGwoKX0sYT1mdW5jdGlvbih0KXt2YXIgcj1lKHQuY3VycmVudFRhcmdldCk7ci5oYXNDbGFzcyhpLmVkaXRDZWxsKXx8bigpfTt0aGlzLm9wdGlvbnMuZWRpdGFibGUmJih0aGlzLl9zdGFydEVkaXRIYW5kbGVyPWZ1bmN0aW9uKG4pe3ZhciBpPW4uY3VycmVudFRhcmdldD9lKG4uY3VycmVudFRhcmdldCk6bixyPXQuX2NvbHVtbkZyb21FbGVtZW50KGkpO3QuZWRpdGFibGV8fHIuZWRpdGFibGUmJnQuX2VkaXRDZWxsKHtjZWxsOmksY29sdW1uOnJ9KX0sdC5jb250ZW50Lm9uKFwiZm9jdXNpblwiK20sZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodC50aW1lciksdC50aW1lcj1udWxsfSkub24oXCJmb2N1c291dFwiK20sZnVuY3Rpb24oKXt0LnRpbWVyPXNldFRpbWVvdXQobywxKX0pLm9uKFwia2V5ZG93blwiK20sZnVuY3Rpb24oZSl7dmFyIGkscixhPWUua2V5Q29kZTtzd2l0Y2goYSl7Y2FzZSBwLkVOVEVSOm4oKSxvKCk7YnJlYWs7Y2FzZSBwLkVTQzp0LmVkaXRhYmxlJiYoaT10Ll9lZGl0YWJsZUNvbnRhaW5lcixyPXQuX21vZGVsRnJvbUVsZW1lbnQoaSksdC50cmlnZ2VyKFwiY2FuY2VsXCIse21vZGVsOnIsY2VsbDppfSl8fHQuX2Nsb3NlQ2VsbCghMCkpfX0pLHM/dC50b3VjaD10LmNvbnRlbnQua2VuZG9Ub3VjaCh7ZmlsdGVyOlwidGRcIix0b3VjaHN0YXJ0OmZ1bmN0aW9uKGUpe2EoZS50b3VjaCl9LGRvdWJsZXRhcDpmdW5jdGlvbihuKXtlKG4udG91Y2guaW5pdGlhbFRvdWNoKS5pcyhyKXx8dC5fc3RhcnRFZGl0SGFuZGxlcihuLnRvdWNoKX19KS5kYXRhKFwia2VuZG9Ub3VjaFwiKTp0LmNvbnRlbnQub24oXCJtb3VzZWRvd25cIittLFwidGRcIixmdW5jdGlvbihlKXthKGUpfSkub24oXCJkYmxjbGlja1wiK20sXCJ0ZFwiLGZ1bmN0aW9uKG4pe2Uobi50YXJnZXQpLmlzKHIpfHx0Ll9zdGFydEVkaXRIYW5kbGVyKG4pfSkpfSxfZWRpdENlbGw6ZnVuY3Rpb24odCl7dmFyIG4scj10aGlzLm9wdGlvbnMucmVzb3VyY2VzRmllbGQsbz13LnN0eWxlcyxhPXQuY2VsbCxzPXQuY29sdW1uLGw9dGhpcy5fbW9kZWxGcm9tRWxlbWVudChhKSxjPXRoaXMuZGF0YVNvdXJjZS5fY3JlYXRlTmV3TW9kZWwobC50b0pTT04oKSksZD1jLmZpZWxkc1tzLmZpZWxkXXx8Y1tzLmZpZWxkXSx1PWQudmFsaWRhdGlvbixwPWkuYXR0cihcInR5cGVcIiksZj1pLmF0dHIoXCJiaW5kXCIpLGc9e25hbWU6cy5maWVsZCxyZXF1aXJlZDpkLnZhbGlkYXRpb24/ZC52YWxpZGF0aW9uLnJlcXVpcmVkPT09ITA6ITF9O3JldHVybiBzLmZpZWxkPT09cj92b2lkIHMuZWRpdG9yKGEsYyk6KHRoaXMuX2VkaXRhYmxlQ29udGVudD1hLmNoaWxkcmVuKCkuZGV0YWNoKCksdGhpcy5fZWRpdGFibGVDb250YWluZXI9YSxhLmRhdGEoXCJtb2RlbENvcHlcIixjKSxcImRhdGVcIiE9PWQudHlwZSYmXCJkYXRlXCIhPT1lLnR5cGUoZCl8fCEvSHxtfHN8RnxnfHUvLnRlc3Qocy5mb3JtYXQpfHwoXCJzdGFydFwiPT09cy5maWVsZCYmZGVsZXRlIGQudmFsaWRhdGlvbi5kYXRlQ29tcGFyZSxnW2ZdPVwidmFsdWU6XCIrcy5maWVsZCxnW3BdPVwiZGF0ZVwiLG49ZnVuY3Rpb24odCxuKXtlKCc8aW5wdXQgdHlwZT1cInRleHRcIi8+JykuYXR0cihnKS5hcHBlbmRUbyh0KS5rZW5kb0RhdGVUaW1lUGlja2VyKHtmb3JtYXQ6bi5mb3JtYXR9KX0pLHRoaXMuZWRpdGFibGU9YS5hZGRDbGFzcyhvLmVkaXRDZWxsKS5rZW5kb0VkaXRhYmxlKHtmaWVsZHM6e2ZpZWxkOnMuZmllbGQsZm9ybWF0OnMuZm9ybWF0LGVkaXRvcjpzLmVkaXRvcnx8bn0sbW9kZWw6YyxjbGVhckNvbnRhaW5lcjohMX0pLmRhdGEoXCJrZW5kb0VkaXRhYmxlXCIpLHUmJnUuZGF0ZUNvbXBhcmUmJmgodS5kYXRlQ29tcGFyZSkmJnUubWVzc2FnZSYmKGUoXCI8c3BhbiBcIitpLmF0dHIoXCJmb3JcIikrJz1cIicrcy5maWVsZCsnXCIgY2xhc3M9XCJrLWludmFsaWQtbXNnXCIvPicpLmhpZGUoKS5hcHBlbmRUbyhhKSxhLmZpbmQoXCJbbmFtZT1cIitzLmZpZWxkK1wiXVwiKS5hdHRyKGkuYXR0cihcImRhdGVDb21wYXJlLW1zZ1wiKSx1Lm1lc3NhZ2UpKSx2b2lkKHRoaXMudHJpZ2dlcihcImVkaXRcIix7bW9kZWw6bCxjZWxsOmF9KSYmdGhpcy5fY2xvc2VDZWxsKCEwKSkpfSxfY2xvc2VDZWxsOmZ1bmN0aW9uKGUpe3ZhciB0PXcuc3R5bGVzLG49dGhpcy5fZWRpdGFibGVDb250YWluZXIsaT10aGlzLl9tb2RlbEZyb21FbGVtZW50KG4pLHI9dGhpcy5fY29sdW1uRnJvbUVsZW1lbnQobiksbz1yLmZpZWxkLGE9bi5kYXRhKFwibW9kZWxDb3B5XCIpLHM9e307c1tvXT1hLmdldChvKSxuLmVtcHR5KCkucmVtb3ZlRGF0YShcIm1vZGVsQ29weVwiKS5yZW1vdmVDbGFzcyh0LmVkaXRDZWxsKS5hcHBlbmQodGhpcy5fZWRpdGFibGVDb250ZW50KSx0aGlzLmVkaXRhYmxlLmRlc3Ryb3koKSx0aGlzLmVkaXRhYmxlPW51bGwsdGhpcy5fZWRpdGFibGVDb250YWluZXI9bnVsbCx0aGlzLl9lZGl0YWJsZUNvbnRlbnQ9bnVsbCxlfHwoXCJzdGFydFwiPT09byYmKHMuZW5kPW5ldyBEYXRlKHMuc3RhcnQuZ2V0VGltZSgpK2kuZHVyYXRpb24oKSkpLHRoaXMudHJpZ2dlcihcInVwZGF0ZVwiLHt0YXNrOmksdXBkYXRlSW5mbzpzfSkpfSxfZHJhZ2dhYmxlOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLHI9bnVsbCxvPSEwLGE9dy5zdHlsZXMsbD1cInRyW1wiK2kuYXR0cihcImxldmVsXCIpK1wiID0gMF06bGFzdFwiLGM9e30sdT1mdW5jdGlvbigpe3I9bnVsbCx0PW51bGwsbz0hMCxjPXt9fSxoPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lO3Q7KXtpZihyLmdldChcImlkXCIpPT09dC5nZXQoXCJpZFwiKSl7bz0hMTticmVha310PW4uZGF0YVNvdXJjZS50YXNrUGFyZW50KHQpfX0scD1mdW5jdGlvbigpe3ZhciBuPWUodCkuaGVpZ2h0KCkscj1pLmdldE9mZnNldCh0KS50b3A7ZCh0LHtiZWZvcmVMaW1pdDpyKy4yNSpuLGFmdGVyTGltaXQ6cisuNzUqbn0pfSxmPWZ1bmN0aW9uKGUpe3ZhciBuLHI9ZS5sb2NhdGlvbixvPWEuZHJvcEFkZCxzPVwiYWRkXCIsbD1wYXJzZUludCh0LmF0dHIoaS5hdHRyKFwibGV2ZWxcIikpLDEwKTt0LmJlZm9yZUxpbWl0Pj1yPyhuPXQucHJldigpLG89YS5kcm9wVG9wLHM9XCJpbnNlcnQtYmVmb3JlXCIpOnI+PXQuYWZ0ZXJMaW1pdCYmKG49dC5uZXh0KCksbz1hLmRyb3BCb3R0b20scz1cImluc2VydC1hZnRlclwiKSxuJiZwYXJzZUludChuLmF0dHIoaS5hdHRyKFwibGV2ZWxcIikpLDEwKT09PWwmJihvPWEuZHJvcE1pZGRsZSksYy5jbGFzc05hbWU9byxjLmNvbW1hbmQ9c30sZz1mdW5jdGlvbigpe3JldHVybiBuLl9yZW9yZGVyRHJhZ2dhYmxlLmhpbnQuY2hpbGRyZW4oXythLmRyYWdTdGF0dXMpLnJlbW92ZUNsYXNzKGEuZHJvcFBvc2l0aW9ucyl9O3RoaXMub3B0aW9ucy5lZGl0YWJsZSYmKHRoaXMuX3Jlb3JkZXJEcmFnZ2FibGU9dGhpcy5jb250ZW50LmtlbmRvRHJhZ2dhYmxlKHtkaXN0YW5jZToxMCxob2xkVG9EcmFnOnMsZ3JvdXA6XCJsaXN0R3JvdXBcIixmaWx0ZXI6XCJ0cltkYXRhLXVpZF1cIixpZ25vcmU6XythLmlucHV0LGhpbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIGUoJzxkaXYgY2xhc3M9XCInK2EuaGVhZGVyK1wiIFwiK2EuZHJhZ0NsdWUrJ1wiLz4nKS5jc3Moe3dpZHRoOjMwMCxwYWRkaW5nTGVmdDp0LmNzcyhcInBhZGRpbmdMZWZ0XCIpLHBhZGRpbmdSaWdodDp0LmNzcyhcInBhZGRpbmdSaWdodFwiKSxsaW5lSGVpZ2h0OnQuaGVpZ2h0KCkrXCJweFwiLHBhZGRpbmdUb3A6dC5jc3MoXCJwYWRkaW5nVG9wXCIpLHBhZGRpbmdCb3R0b206dC5jc3MoXCJwYWRkaW5nQm90dG9tXCIpfSkuYXBwZW5kKCc8c3BhbiBjbGFzcz1cIicrYS5pY29uK1wiIFwiK2EuZHJhZ1N0YXR1cysnXCIgLz48c3BhbiBjbGFzcz1cIicrYS5kcmFnQ2x1ZVRleHQrJ1wiLz4nKX0sY3Vyc29yT2Zmc2V0Ont0b3A6LTIwLGxlZnQ6MH0sY29udGFpbmVyOnRoaXMuY29udGVudCxkcmFnc3RhcnQ6ZnVuY3Rpb24oZSl7bi5lZGl0YWJsZSYmZS5wcmV2ZW50RGVmYXVsdCgpLHI9bi5fbW9kZWxGcm9tRWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLHRoaXMuaGludC5jaGlsZHJlbihfK2EuZHJhZ0NsdWVUZXh0KS50ZXh0KHIuZ2V0KFwidGl0bGVcIikpfSxkcmFnOmZ1bmN0aW9uKGUpe28mJihmKGUueSksZygpLmFkZENsYXNzKGMuY2xhc3NOYW1lKSl9LGRyYWdlbmQ6ZnVuY3Rpb24oKXt1KCl9LGRyYWdjYW5jZWw6ZnVuY3Rpb24oKXt1KCl9fSkuZGF0YShcImtlbmRvRHJhZ2dhYmxlXCIpLHRoaXMuX3RhYmxlRHJvcEFyZWE9dGhpcy5jb250ZW50LmtlbmRvRHJvcFRhcmdldEFyZWEoe2Rpc3RhbmNlOjAsZ3JvdXA6XCJsaXN0R3JvdXBcIixmaWx0ZXI6XCJ0cltkYXRhLXVpZF1cIixkcmFnZW50ZXI6ZnVuY3Rpb24oZSl7dD1lLmRyb3BUYXJnZXQsaChuLl9tb2RlbEZyb21FbGVtZW50KHQpKSxwKCksZygpLnRvZ2dsZUNsYXNzKGEuZHJvcERlbmllZCwhbyl9LGRyYWdsZWF2ZTpmdW5jdGlvbigpe289ITAsZygpfSxkcm9wOmZ1bmN0aW9uKCl7dmFyIGU9bi5fbW9kZWxGcm9tRWxlbWVudCh0KSxpPWUub3JkZXJJZCxhPXtwYXJlbnRJZDplLnBhcmVudElkfTtpZihvKXtzd2l0Y2goYy5jb21tYW5kKXtjYXNlXCJhZGRcIjphLnBhcmVudElkPWUuaWQ7YnJlYWs7Y2FzZVwiaW5zZXJ0LWJlZm9yZVwiOmEub3JkZXJJZD1lLnBhcmVudElkPT09ci5wYXJlbnRJZCYmZS5vcmRlcklkPnIub3JkZXJJZD9pLTE6aTticmVhaztjYXNlXCJpbnNlcnQtYWZ0ZXJcIjphLm9yZGVySWQ9ZS5wYXJlbnRJZD09PXIucGFyZW50SWQmJmUub3JkZXJJZD5yLm9yZGVySWQ/aTppKzF9bi50cmlnZ2VyKFwidXBkYXRlXCIse3Rhc2s6cix1cGRhdGVJbmZvOmF9KX19fSkuZGF0YShcImtlbmRvRHJvcFRhcmdldEFyZWFcIiksdGhpcy5fY29udGVudERyb3BBcmVhPXRoaXMuZWxlbWVudC5rZW5kb0Ryb3BUYXJnZXRBcmVhKHtkaXN0YW5jZTowLGdyb3VwOlwibGlzdEdyb3VwXCIsZmlsdGVyOl8rYS5ncmlkQ29udGVudCxkcm9wOmZ1bmN0aW9uKCl7dmFyIGU9bi5fbW9kZWxGcm9tRWxlbWVudChuLmNvbnRlbnQuZmluZChsKSksdD1lLm9yZGVySWQsaT17cGFyZW50SWQ6bnVsbCxvcmRlcklkOm51bGwhPT1yLnBhcmVudElkP3QrMTp0fTtuLnRyaWdnZXIoXCJ1cGRhdGVcIix7dGFzazpyLHVwZGF0ZUluZm86aX0pfX0pLmRhdGEoXCJrZW5kb0Ryb3BUYXJnZXRBcmVhXCIpKX0sX21vZGVsRnJvbUVsZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jbG9zZXN0KFwidHJcIiksbj10aGlzLmRhdGFTb3VyY2UuZ2V0QnlVaWQodC5hdHRyKGkuYXR0cihcInVpZFwiKSkpO3JldHVybiBufSxfY29sdW1uRnJvbUVsZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jbG9zZXN0KFwidGRcIiksbj10LnBhcmVudCgpLGk9bi5jaGlsZHJlbigpLmluZGV4KHQpO3JldHVybiB0aGlzLmNvbHVtbnNbaV19fSk7ZCghMCxsLkdhbnR0TGlzdCx7c3R5bGVzOnl9KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXtyZXR1cm4gZGVsZXRlIGUubmFtZSxkZWxldGUgZS5wcmVmaXgsZGVsZXRlIGUudmlld3MsZX1mdW5jdGlvbiBuKGUpe3ZhciB0PVtdLG49ZS53b3JrV2Vla1N0YXJ0O2Zvcih0LnB1c2gobik7ZS53b3JrV2Vla0VuZCE9bjspbj42P24tPTc6bisrLHQucHVzaChuKTtyZXR1cm4gdH1mdW5jdGlvbiBpKCl7dmFyIHQ9a2VuZG8uX2FjdGl2ZUVsZW1lbnQoKTtcImJvZHlcIiE9PXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmZSh0KS5ibHVyKCl9dmFyIHIsbyxhPWtlbmRvLnVpLldpZGdldCxzPWtlbmRvLmRvbS5lbGVtZW50LGw9a2VuZG8uZG9tLnRleHQsYz1lLmlzUGxhaW5PYmplY3QsZD1lLmV4dGVuZCx1PWtlbmRvLnN1cHBvcnQuYnJvd3NlcixoPWtlbmRvLmtleXMscD1rZW5kby5kYXRhLlF1ZXJ5LGY9XCIua2VuZG9HYW50dFRpbWVsaW5lXCIsZz1cImNsaWNrXCIsbT1cImRibGNsaWNrXCIsdj1cImtleWRvd25cIixfPVwiLlwiLHk9a2VuZG8udGVtcGxhdGUoXCIjPWtlbmRvLnRvU3RyaW5nKHN0YXJ0LCAndCcpI1wiKSx3PWtlbmRvLnRlbXBsYXRlKFwiIz1rZW5kby50b1N0cmluZyhzdGFydCwgJ2RkZCBNL2RkJykjXCIpLGI9a2VuZG8udGVtcGxhdGUoXCIjPWtlbmRvLnRvU3RyaW5nKHN0YXJ0LCAnZGRkIE0vZGQnKSMgLSAjPWtlbmRvLnRvU3RyaW5nKGtlbmRvLmRhdGUuYWRkRGF5cyhlbmQsIC0xKSwgJ2RkZCBNL2RkJykjXCIpLGs9a2VuZG8udGVtcGxhdGUoXCIjPWtlbmRvLnRvU3RyaW5nKHN0YXJ0LCAnTU1NJykjXCIpLHg9a2VuZG8udGVtcGxhdGUoXCIjPWtlbmRvLnRvU3RyaW5nKHN0YXJ0LCAneXl5eScpI1wiKSxDPWtlbmRvLnRlbXBsYXRlKCc8ZGl2IGNsYXNzPVwiIz1zdHlsZXMubWFycXVlZSNcIj48ZGl2IGNsYXNzPVwiIz1zdHlsZXMubWFycXVlZUNvbG9yI1wiPjwvZGl2PjwvZGl2PicpLFM9a2VuZG8udGVtcGxhdGUoJzxkaXYgc3R5bGU9XCJ6LWluZGV4OiAxMDAwMDI7XCIgY2xhc3M9XCIjPXN0eWxlcy50b29sdGlwV3JhcHBlciNcIj48ZGl2IGNsYXNzPVwiIz1zdHlsZXMudG9vbHRpcENvbnRlbnQjXCI+PGRpdj5TdGFydDogIz1rZW5kby50b1N0cmluZyhzdGFydCwgXCJkZGQgTS9kZCBISDptbVwiKSM8L2Rpdj48ZGl2PkVuZDogIz1rZW5kby50b1N0cmluZyhlbmQsIFwiZGRkIE0vZGQgSEg6bW1cIikjPC9kaXY+PC9kaXY+PC9kaXY+JyksVD1rZW5kby50ZW1wbGF0ZSgnPGRpdiBzdHlsZT1cInotaW5kZXg6IDEwMDAwMjtcIiBjbGFzcz1cIiM9c3R5bGVzLnRvb2x0aXBXcmFwcGVyI1wiID48ZGl2IGNsYXNzPVwiIz1zdHlsZXMudG9vbHRpcENvbnRlbnQjXCI+Iz10ZXh0IyU8L2Rpdj48ZGl2IGNsYXNzPVwiIz1zdHlsZXMudG9vbHRpcENhbGxvdXQjXCIgc3R5bGU9XCJsZWZ0OjEzcHg7XCI+PC9kaXY+PC9kaXY+JyksRD17ZGF5Ont0eXBlOlwia2VuZG8udWkuR2FudHREYXlWaWV3XCJ9LHdlZWs6e3R5cGU6XCJrZW5kby51aS5HYW50dFdlZWtWaWV3XCJ9LG1vbnRoOnt0eXBlOlwia2VuZG8udWkuR2FudHRNb250aFZpZXdcIn0seWVhcjp7dHlwZTpcImtlbmRvLnVpLkdhbnR0WWVhclZpZXdcIn19LEE9e2FsdDpcImstYWx0XCIsbm9uV29ya2luZzpcImstbm9ud29yay1ob3VyXCIsaGVhZGVyOlwiay1oZWFkZXJcIixncmlkSGVhZGVyOlwiay1ncmlkLWhlYWRlclwiLGdyaWRIZWFkZXJXcmFwOlwiay1ncmlkLWhlYWRlci13cmFwXCIsZ3JpZENvbnRlbnQ6XCJrLWdyaWQtY29udGVudFwiLHJvd3NUYWJsZTpcImstZ2FudHQtcm93c1wiLGNvbHVtbnNUYWJsZTpcImstZ2FudHQtY29sdW1uc1wiLHRhc2tzVGFibGU6XCJrLWdhbnR0LXRhc2tzXCIscmVzb3VyY2U6XCJrLXJlc291cmNlXCIscmVzb3VyY2VBbHQ6XCJrLXJlc291cmNlIGstYWx0XCIsdGFzazpcImstdGFza1wiLHRhc2tTaW5nbGU6XCJrLXRhc2stc2luZ2xlXCIsdGFza01pbGVzdG9uZTpcImstdGFzay1taWxlc3RvbmVcIix0YXNrU3VtbWFyeTpcImstdGFzay1zdW1tYXJ5XCIsdGFza1dyYXA6XCJrLXRhc2std3JhcFwiLHRhc2tNaWxlc3RvbmVXcmFwOlwiay1taWxlc3RvbmUtd3JhcFwiLHJlc291cmNlc1dyYXA6XCJrLXJlc291cmNlcy13cmFwXCIsdGFza0RvdDpcImstdGFzay1kb3RcIix0YXNrRG90U3RhcnQ6XCJrLXRhc2stc3RhcnRcIix0YXNrRG90RW5kOlwiay10YXNrLWVuZFwiLHRhc2tEcmFnSGFuZGxlOlwiay10YXNrLWRyYWdoYW5kbGVcIix0YXNrQ29udGVudDpcImstdGFzay1jb250ZW50XCIsdGFza1RlbXBsYXRlOlwiay10YXNrLXRlbXBsYXRlXCIsdGFza0FjdGlvbnM6XCJrLXRhc2stYWN0aW9uc1wiLHRhc2tEZWxldGU6XCJrLXRhc2stZGVsZXRlXCIsdGFza0NvbXBsZXRlOlwiay10YXNrLWNvbXBsZXRlXCIsbGluazpcImstbGlua1wiLGljb246XCJrLWljb25cIixpY29uRGVsZXRlOlwiay1zaS1jbG9zZVwiLHRhc2tSZXNpemVIYW5kbGU6XCJrLXJlc2l6ZS1oYW5kbGVcIix0YXNrUmVzaXplSGFuZGxlV2VzdDpcImstcmVzaXplLXdcIix0YXNrUmVzaXplSGFuZGxlRWFzdDpcImstcmVzaXplLWVcIix0YXNrU3VtbWFyeVByb2dyZXNzOlwiay10YXNrLXN1bW1hcnktcHJvZ3Jlc3NcIix0YXNrU3VtbWFyeUNvbXBsZXRlOlwiay10YXNrLXN1bW1hcnktY29tcGxldGVcIixsaW5lOlwiay1saW5lXCIsbGluZUhvcml6b250YWw6XCJrLWxpbmUtaFwiLGxpbmVWZXJ0aWNhbDpcImstbGluZS12XCIsYXJyb3dXZXN0Olwiay1hcnJvdy13XCIsYXJyb3dFYXN0Olwiay1hcnJvdy1lXCIsZHJhZ0hpbnQ6XCJrLWRyYWctaGludFwiLGRlcGVuZGVuY3lIaW50Olwiay1kZXBlbmRlbmN5LWhpbnRcIix0b29sdGlwV3JhcHBlcjpcImstd2lkZ2V0IGstdG9vbHRpcCBrLXBvcHVwIGstZ3JvdXAgay1yZXNldFwiLHRvb2x0aXBDb250ZW50Olwiay10b29sdGlwLWNvbnRlbnRcIix0b29sdGlwQ2FsbG91dDpcImstY2FsbG91dCBrLWNhbGxvdXQtc1wiLGNhbGxvdXQ6XCJrLWNhbGxvdXRcIixtYXJxdWVlOlwiay1tYXJxdWVlIGstZ2FudHQtbWFycXVlZVwiLG1hcnF1ZWVDb2xvcjpcImstbWFycXVlZS1jb2xvclwifSxFPWtlbmRvLnVpLkdhbnR0Vmlldz1hLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe2EuZm4uaW5pdC5jYWxsKHRoaXMsZSx0KSx0aGlzLnRpdGxlPXRoaXMub3B0aW9ucy50aXRsZXx8dGhpcy5vcHRpb25zLm5hbWUsdGhpcy5oZWFkZXI9dGhpcy5lbGVtZW50LmZpbmQoXytFLnN0eWxlcy5ncmlkSGVhZGVyKSx0aGlzLmNvbnRlbnQ9dGhpcy5lbGVtZW50LmZpbmQoXytFLnN0eWxlcy5ncmlkQ29udGVudCksdGhpcy5jb250ZW50V2lkdGg9dGhpcy5jb250ZW50LndpZHRoKCksdGhpcy5fd29ya0RheXM9bih0aGlzLm9wdGlvbnMpLHRoaXMuX2hlYWRlclRyZWU9dC5oZWFkZXJUcmVlLHRoaXMuX3Rhc2tUcmVlPXQudGFza1RyZWUsdGhpcy5fZGVwZW5kZW5jeVRyZWU9dC5kZXBlbmRlbmN5VHJlZSx0aGlzLl90YXNrQ29vcmRpbmF0ZXM9e319LGRlc3Ryb3k6ZnVuY3Rpb24oKXthLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLmhlYWRlclJvdz1udWxsLHRoaXMuaGVhZGVyPW51bGwsdGhpcy5jb250ZW50PW51bGwsdGhpcy5fZHJhZ0hpbnQ9bnVsbCx0aGlzLl9yZXNpemVIaW50PW51bGwsdGhpcy5fcmVzaXplVG9vbHRpcD1udWxsLHRoaXMuX3BlcmNlbnRDb21wbGV0ZVJlc2l6ZVRvb2x0aXA9bnVsbCx0aGlzLl9oZWFkZXJUcmVlPW51bGwsdGhpcy5fdGFza1RyZWU9bnVsbCx0aGlzLl9kZXBlbmRlbmN5VHJlZT1udWxsfSxvcHRpb25zOntzaG93V29ya0hvdXJzOiExLHNob3dXb3JrRGF5czohMSx3b3JrRGF5U3RhcnQ6bmV3IERhdGUoMTk4MCwxLDEsOCwwLDApLHdvcmtEYXlFbmQ6bmV3IERhdGUoMTk4MCwxLDEsMTcsMCwwKSx3b3JrV2Vla1N0YXJ0OjEsd29ya1dlZWtFbmQ6NSxob3VyU3BhbjoxLHNsb3RTaXplOjEwMH0scmVuZGVyTGF5b3V0OmZ1bmN0aW9uKCl7dGhpcy5fc2xvdHM9dGhpcy5fY3JlYXRlU2xvdHMoKSx0aGlzLl90YWJsZVdpZHRoPXRoaXMuX2NhbGN1bGF0ZVRhYmxlV2lkdGgoKSx0aGlzLmNyZWF0ZUxheW91dCh0aGlzLl9sYXlvdXQoKSksdGhpcy5fc2xvdERpbWVuc2lvbnMoKSx0aGlzLl9hZGp1c3RIZWlnaHQoKX0sX2FkanVzdEhlaWdodDpmdW5jdGlvbigpe3RoaXMuY29udGVudC5oZWlnaHQodGhpcy5lbGVtZW50LmhlaWdodCgpLXRoaXMuaGVhZGVyLm91dGVySGVpZ2h0KCkpfSxjcmVhdGVMYXlvdXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5faGVhZGVycyhlKSxuPXRoaXMuX2NvbGdyb3VwKCksaT10aGlzLl9oZWFkZXJUcmVlLHI9cyhcInRoZWFkXCIsbnVsbCx0KSxvPXMoXCJ0YWJsZVwiLHtzdHlsZTp7d2lkdGg6dGhpcy5fdGFibGVXaWR0aCtcInB4XCJ9fSxbbixyXSk7aS5yZW5kZXIoW29dKSx0aGlzLmhlYWRlclJvdz10aGlzLmhlYWRlci5maW5kKFwidGFibGU6Zmlyc3QgdHJcIikubGFzdCgpfSxfc2xvdERpbWVuc2lvbnM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyPXRoaXMuaGVhZGVyUm93WzBdLmNoaWxkcmVuLG89dGhpcy5fdGltZVNsb3RzKCk7Zm9yKG49MCxpPXIubGVuZ3RoO2k+bjtuKyspdD1yW25dLGU9b1tuXSxlLm9mZnNldExlZnQ9dC5vZmZzZXRMZWZ0LGUub2Zmc2V0V2lkdGg9dC5vZmZzZXRXaWR0aH0scmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5sZW5ndGgsaT1FLnN0eWxlcyxyPXRoaXMuX3Jvd3NUYWJsZShuKSxvPXRoaXMuX2NvbHVtbnNUYWJsZShuKSxhPXRoaXMuX3Rhc2tzVGFibGUoZSk7dGhpcy5fdGFza1RyZWUucmVuZGVyKFtyLG8sYV0pLHQ9dGhpcy5jb250ZW50LmZpbmQoXytpLnJvd3NUYWJsZSksdGhpcy5fY29udGVudEhlaWdodD10LmhlaWdodCgpLHRoaXMuX3Jvd0hlaWdodD10LmZpbmQoXCJ0clwiKS5oZWlnaHQoKSx0aGlzLmNvbnRlbnQuZmluZChfK2kuY29sdW1uc1RhYmxlKS5oZWlnaHQodGhpcy5fY29udGVudEhlaWdodCl9LF9yb3dzVGFibGU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPVtdLHI9RS5zdHlsZXMsbz1bbnVsbCx7Y2xhc3NOYW1lOnIuYWx0fV07Zm9yKG49MDtlPm47bisrKXQ9cyhcInRyXCIsb1tuJTJdLFtzKFwidGRcIixudWxsLFtsKFwiwqBcIildKV0pLGkucHVzaCh0KTtyZXR1cm4gdGhpcy5fY3JlYXRlVGFibGUoMSxpLHtjbGFzc05hbWU6ci5yb3dzVGFibGV9KX0sX2NvbHVtbnNUYWJsZTpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbz1bXSxhPUUuc3R5bGVzLGM9dGhpcy5fdGltZVNsb3RzKCksZD1jLmxlbmd0aCx1PTA7Zm9yKHI9MDtkPnI7cisrKXQ9Y1tyXSxpPXt9LG49dC5zcGFuLHUrPW4sMSE9PW4mJihpLmNvbHNwYW49biksdC5pc05vbldvcmtpbmcmJihpLmNsYXNzTmFtZT1hLm5vbldvcmtpbmcpLG8ucHVzaChzKFwidGRcIixpLFtsKFwiwqBcIildKSk7cmV0dXJuIGU9cyhcInRyXCIsbnVsbCxvKSx0aGlzLl9jcmVhdGVUYWJsZSh1LFtlXSx7Y2xhc3NOYW1lOmEuY29sdW1uc1RhYmxlfSl9LF90YXNrc1RhYmxlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYSxsLGM9W10sZD1FLnN0eWxlcyx1PXRoaXMuX3Rhc2tDb29yZGluYXRlcz17fSxoPXRoaXMuX2NhbGN1bGF0ZU1pbGVzdG9uZVdpZHRoKCkscD1NYXRoLnJvdW5kKGgud2lkdGgpLGY9dGhpcy5vcHRpb25zLnJlc291cmNlc0ZpZWxkLGc9W2QucmVzb3VyY2UsZC5yZXNvdXJjZUFsdF0sbT10aGlzLl9jYWxjdWxhdGVSZXNvdXJjZXNNYXJnaW4oKSx2PWZ1bmN0aW9uKGUpe3ZhciB0PWkubGVmdCxuPXQraS53aWR0aDtyLmlzTWlsZXN0b25lKCkmJih0LT1wLzIsbj10K3ApLHVbci5pZF09e3N0YXJ0OnQsZW5kOm4scm93SW5kZXg6ZX19O2ZvcihhPTAsbD1lLmxlbmd0aDtsPmE7YSsrKXI9ZVthXSxpPXRoaXMuX3Rhc2tQb3NpdGlvbihyKSx0PXMoXCJ0clwiLG51bGwpLG49cyhcInRkXCIsbnVsbCxbdGhpcy5fcmVuZGVyVGFzayhlW2FdLGkpXSkscltmXSYmcltmXS5sZW5ndGgmJihvPU1hdGgubWF4KGkud2lkdGh8fGguY2xpZW50V2lkdGgsMCkraS5sZWZ0LG4uY2hpbGRyZW4ucHVzaChzKFwiZGl2XCIse2NsYXNzTmFtZTpkLnJlc291cmNlc1dyYXAsc3R5bGU6e2xlZnQ6bytcInB4XCIsd2lkdGg6dGhpcy5fdGFibGVXaWR0aC0obyttKStcInB4XCJ9fSx0aGlzLl9yZW5kZXJSZXNvdXJjZXMocltmXSxnW2ElMl0pKSkpLHQuY2hpbGRyZW4ucHVzaChuKSxjLnB1c2godCksdihhKTtyZXR1cm4gdGhpcy5fY3JlYXRlVGFibGUoMSxjLHtjbGFzc05hbWU6RS5zdHlsZXMudGFza3NUYWJsZX0pfSxfY3JlYXRlVGFibGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhPVtdO2ZvcihvPTA7ZT5vO28rKylhLnB1c2gocyhcImNvbFwiKSk7cmV0dXJuIGk9cyhcImNvbGdyb3VwXCIsbnVsbCxhKSxyPXMoXCJ0Ym9keVwiLG51bGwsdCksbi5zdHlsZXx8KG4uc3R5bGU9e30pLG4uc3R5bGUud2lkdGg9dGhpcy5fdGFibGVXaWR0aCtcInB4XCIscyhcInRhYmxlXCIsbixbaSxyXSl9LF9jYWxjdWxhdGVUYWJsZVdpZHRoOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscj10aGlzLl90aW1lU2xvdHMoKSxvPTAsYT0wO2ZvcihuPTAsaT1yLmxlbmd0aDtpPm47bisrKWU9cltuXS5zcGFuLGErPWUsZT5vJiYobz1lKTtyZXR1cm4gdD1NYXRoLnJvdW5kKGEqdGhpcy5vcHRpb25zLnNsb3RTaXplL28pfSxfY2FsY3VsYXRlTWlsZXN0b25lV2lkdGg6ZnVuY3Rpb24oKXt2YXIgdCxuPUUuc3R5bGVzLnRhc2srXCIgXCIrRS5zdHlsZXMudGFza01pbGVzdG9uZSxpPWUoXCI8ZGl2IGNsYXNzPSdcIituK1wiJyBzdHlsZT0ndmlzaWJpbGl0eTogaGlkZGVuOyBwb3NpdGlvbjogYWJzb2x1dGUnPlwiKTtyZXR1cm4gdGhpcy5jb250ZW50LmFwcGVuZChpKSx0PXt3aWR0aDppWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoLGNsaWVudFdpZHRoOmlbMF0uY2xpZW50V2lkdGh9LGkucmVtb3ZlKCksdH0sX2NhbGN1bGF0ZVJlc291cmNlc01hcmdpbjpmdW5jdGlvbigpe3ZhciB0LG49ZShcIjxkaXYgY2xhc3M9J1wiK0Uuc3R5bGVzLnJlc291cmNlc1dyYXArXCInIHN0eWxlPSd2aXNpYmlsaXR5OiBoaWRkZW47IHBvc2l0aW9uOiBhYnNvbHV0ZSc+XCIpO3JldHVybiB0aGlzLmNvbnRlbnQuYXBwZW5kKG4pLHQ9cGFyc2VJbnQobi5jc3MoXCJtYXJnaW4tbGVmdFwiKSwxMCksbi5yZW1vdmUoKSx0fSxfcmVuZGVyVGFzazpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvPXRoaXMub3B0aW9ucy5lZGl0YWJsZSxhPXQubGVmdCxsPUUuc3R5bGVzLGM9bC50YXNrV3JhcDtyZXR1cm4gZS5zdW1tYXJ5P2k9dGhpcy5fcmVuZGVyU3VtbWFyeShlLHQpOmUuaXNNaWxlc3RvbmUoKT8oaT10aGlzLl9yZW5kZXJNaWxlc3RvbmUoZSx0KSxjKz1cIiBcIitsLnRhc2tNaWxlc3RvbmVXcmFwKTppPXRoaXMuX3JlbmRlclNpbmdsZVRhc2soZSx0KSxuPXMoXCJkaXZcIix7Y2xhc3NOYW1lOmMsc3R5bGU6e2xlZnQ6YStcInB4XCJ9fSxbaV0pLG8mJihuLmNoaWxkcmVuLnB1c2gocyhcImRpdlwiLHtjbGFzc05hbWU6bC50YXNrRG90K1wiIFwiK2wudGFza0RvdFN0YXJ0fSkpLG4uY2hpbGRyZW4ucHVzaChzKFwiZGl2XCIse2NsYXNzTmFtZTpsLnRhc2tEb3QrXCIgXCIrbC50YXNrRG90RW5kfSkpKSxlLnN1bW1hcnl8fGUuaXNNaWxlc3RvbmUoKXx8IW98fChyPU1hdGgucm91bmQodC53aWR0aCplLnBlcmNlbnRDb21wbGV0ZSksbi5jaGlsZHJlbi5wdXNoKHMoXCJkaXZcIix7Y2xhc3NOYW1lOmwudGFza0RyYWdIYW5kbGUsc3R5bGU6e2xlZnQ6citcInB4XCJ9fSkpKSxufSxfcmVuZGVyU2luZ2xlVGFzazpmdW5jdGlvbihlLHQpe3ZhciBuLGk9RS5zdHlsZXMscj1NYXRoLnJvdW5kKHQud2lkdGgqZS5wZXJjZW50Q29tcGxldGUpLG89cyhcImRpdlwiLHtjbGFzc05hbWU6aS50YXNrQ29udGVudH0sW3MoXCJkaXZcIix7Y2xhc3NOYW1lOmkudGFza1RlbXBsYXRlfSxbbChlLnRpdGxlKV0pXSk7cmV0dXJuIHRoaXMub3B0aW9ucy5lZGl0YWJsZSYmKG8uY2hpbGRyZW4ucHVzaChzKFwic3BhblwiLHtjbGFzc05hbWU6aS50YXNrQWN0aW9uc30sW3MoXCJhXCIse2NsYXNzTmFtZTppLmxpbmsrXCIgXCIraS50YXNrRGVsZXRlLGhyZWY6XCIjXCJ9LFtzKFwic3BhblwiLHtjbGFzc05hbWU6aS5pY29uK1wiIFwiK2kuaWNvbkRlbGV0ZX0pXSldKSksby5jaGlsZHJlbi5wdXNoKHMoXCJzcGFuXCIse2NsYXNzTmFtZTppLnRhc2tSZXNpemVIYW5kbGUrXCIgXCIraS50YXNrUmVzaXplSGFuZGxlV2VzdH0pKSxvLmNoaWxkcmVuLnB1c2gocyhcInNwYW5cIix7Y2xhc3NOYW1lOmkudGFza1Jlc2l6ZUhhbmRsZStcIiBcIitpLnRhc2tSZXNpemVIYW5kbGVFYXN0fSkpKSxuPXMoXCJkaXZcIix7Y2xhc3NOYW1lOmkudGFzaytcIiBcIitpLnRhc2tTaW5nbGUsXCJkYXRhLXVpZFwiOmUudWlkLHN0eWxlOnt3aWR0aDpNYXRoLm1heCh0LndpZHRoLTIsMCkrXCJweFwifX0sW3MoXCJkaXZcIix7Y2xhc3NOYW1lOmkudGFza0NvbXBsZXRlLHN0eWxlOnt3aWR0aDpyK1wicHhcIn19KSxvXSl9LF9yZW5kZXJNaWxlc3RvbmU6ZnVuY3Rpb24oZSl7dmFyIHQ9RS5zdHlsZXMsbj1zKFwiZGl2XCIse2NsYXNzTmFtZTp0LnRhc2srXCIgXCIrdC50YXNrTWlsZXN0b25lLFwiZGF0YS11aWRcIjplLnVpZH0pO3JldHVybiBufSxfcmVuZGVyU3VtbWFyeTpmdW5jdGlvbihlLHQpe3ZhciBuPUUuc3R5bGVzLGk9TWF0aC5yb3VuZCh0LndpZHRoKmUucGVyY2VudENvbXBsZXRlKSxyPXMoXCJkaXZcIix7Y2xhc3NOYW1lOm4udGFzaytcIiBcIituLnRhc2tTdW1tYXJ5LFwiZGF0YS11aWRcIjplLnVpZCxzdHlsZTp7d2lkdGg6dC53aWR0aCtcInB4XCJ9fSxbcyhcImRpdlwiLHtjbGFzc05hbWU6bi50YXNrU3VtbWFyeVByb2dyZXNzLHN0eWxlOnt3aWR0aDppK1wicHhcIn19LFtzKFwiZGl2XCIse2NsYXNzTmFtZTpuLnRhc2tTdW1tYXJ5Q29tcGxldGUsc3R5bGU6e3dpZHRoOnQud2lkdGgrXCJweFwifX0pXSldKTtyZXR1cm4gcn0sX3JlbmRlclJlc291cmNlczpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvPVtdO2ZvcihpPTAscj1lLmxlbmd0aDtyPmk7aSsrKW49ZVtpXSxvLnB1c2gocyhcInNwYW5cIix7Y2xhc3NOYW1lOnQsc3R5bGU6e2NvbG9yOm4uZ2V0KFwiY29sb3JcIil9fSxbbChuLmdldChcIm5hbWVcIikpXSkpO3JldHVybiBvfSxfdGFza1Bvc2l0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PU1hdGgucm91bmQsbj10KHRoaXMuX29mZnNldChlLnN0YXJ0KSksaT10KHRoaXMuX29mZnNldChlLmVuZCkpO3JldHVybntsZWZ0Om4sd2lkdGg6aS1ufX0sX29mZnNldDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscj10aGlzLl90aW1lU2xvdHMoKSxvPXRoaXMuX3Nsb3RJbmRleChcInN0YXJ0XCIsZSksYT1yW29dO3JldHVybiBlPmEuZW5kP2Eub2Zmc2V0TGVmdCthLm9mZnNldFdpZHRoOmEuc3RhcnQ+ZT9hLm9mZnNldExlZnQ6KHQ9ZS1hLnN0YXJ0LG49YS5lbmQtYS5zdGFydCxpPXQvbiphLm9mZnNldFdpZHRoLGEub2Zmc2V0TGVmdCtpKX0sX3Nsb3RJbmRleDpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcy5fdGltZVNsb3RzKCkscj0wLG89aS5sZW5ndGgtMTtkbyBuPU1hdGguY2VpbCgobytyKS8yKSx0Pmlbbl1bZV0/cj1uOihuPT09byYmbi0tLG89bik7d2hpbGUociE9PW8pO3JldHVybiByfSxfdGltZUJ5UG9zaXRpb246ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhPXRoaXMuX3Nsb3RCeVBvc2l0aW9uKGUpO3JldHVybiB0P24/YS5lbmQ6YS5zdGFydDooaT1lLSh0aGlzLmNvbnRlbnQub2Zmc2V0KCkubGVmdC10aGlzLmNvbnRlbnQuc2Nyb2xsTGVmdCgpKSxyPWEuZW5kLWEuc3RhcnQsbz1yKigoaS1hLm9mZnNldExlZnQpL2Eub2Zmc2V0V2lkdGgpLG5ldyBEYXRlKGEuc3RhcnQuZ2V0VGltZSgpK28pKX0sX3Nsb3RCeVBvc2l0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PWUtKHRoaXMuY29udGVudC5vZmZzZXQoKS5sZWZ0LXRoaXMuY29udGVudC5zY3JvbGxMZWZ0KCkpLG49dGhpcy5fc2xvdEluZGV4KFwib2Zmc2V0TGVmdFwiLHQpO3JldHVybiB0aGlzLl90aW1lU2xvdHMoKVtuXX0sX3JlbmRlckRlcGVuZGVuY2llczpmdW5jdGlvbihlKXt2YXIgdCxuLGk9W10scj10aGlzLl9kZXBlbmRlbmN5VHJlZTtmb3IodD0wLG49ZS5sZW5ndGg7bj50O3QrKylpLnB1c2guYXBwbHkoaSx0aGlzLl9yZW5kZXJEZXBlbmRlbmN5KGVbdF0pKTtyLnJlbmRlcihpKX0sX3JlbmRlckRlcGVuZGVuY3k6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbz10aGlzLl90YXNrQ29vcmRpbmF0ZXNbZS5wcmVkZWNlc3NvcklkXSxhPXRoaXMuX3Rhc2tDb29yZGluYXRlc1tlLnN1Y2Nlc3NvcklkXTtpZighb3x8IWEpcmV0dXJuW107Zm9yKG49XCJfcmVuZGVyXCIrW1wiRkZcIixcIkZTXCIsXCJTRlwiLFwiU1NcIl1bZS50eXBlXSx0PXRoaXNbbl0obyxhKSxpPTAscj10Lmxlbmd0aDtyPmk7aSsrKXRbaV0uYXR0cltcImRhdGEtdWlkXCJdPWUudWlkO3JldHVybiB0fSxfcmVuZGVyRkY6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9kZXBlbmRlbmN5RkYoZSx0LCExKTtyZXR1cm4gbltuLmxlbmd0aC0xXS5jaGlsZHJlblswXT10aGlzLl9hcnJvdyghMCksbn0sX3JlbmRlclNTOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fZGVwZW5kZW5jeUZGKHQsZSwhMCk7cmV0dXJuIG5bMF0uY2hpbGRyZW5bMF09dGhpcy5fYXJyb3coITEpLG4ucmV2ZXJzZSgpfSxfcmVuZGVyRlM6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9kZXBlbmRlbmN5RlMoZSx0LCExKTtyZXR1cm4gbltuLmxlbmd0aC0xXS5jaGlsZHJlblswXT10aGlzLl9hcnJvdyghMSksbn0sX3JlbmRlclNGOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fZGVwZW5kZW5jeUZTKHQsZSwhMCk7cmV0dXJuIG5bMF0uY2hpbGRyZW5bMF09dGhpcy5fYXJyb3coITApLG4ucmV2ZXJzZSgpfSxfZGVwZW5kZW5jeUZGOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPXRoaXMsbz1bXSxhPTAscz0wLGw9MCxjPTAsZD1uP1wic3RhcnRcIjpcImVuZFwiLHU9MixoPTEscD10aGlzLl9yb3dIZWlnaHQsZj0xMCxnPWUucm93SW5kZXgqcCtNYXRoLmZsb29yKHAvMiktMSxtPXQucm93SW5kZXgqcCtNYXRoLmZsb29yKHAvMiktMSx2PUUuc3R5bGVzLF89ZnVuY3Rpb24oKXtvLnB1c2goci5fbGluZSh2LmxpbmUrXCIgXCIrdi5saW5lSG9yaXpvbnRhbCx7bGVmdDphK1wicHhcIix0b3A6cytcInB4XCIsd2lkdGg6bCtcInB4XCJ9KSl9LHk9ZnVuY3Rpb24oKXtvLnB1c2goci5fbGluZSh2LmxpbmUrXCIgXCIrdi5saW5lVmVydGljYWwse2xlZnQ6YStcInB4XCIsdG9wOnMrXCJweFwiLGhlaWdodDpjK1wicHhcIn0pKX07cmV0dXJuIGE9ZVtkXSxzPWcsbD1mLGk9dFtkXS1lW2RdLGk+MCE9PW4mJihsPU1hdGguYWJzKGkpK2YpLG4/KGEtPWwsbC09aCxfKCkpOihfKCksYSs9bC11KSxzPm0/KGM9cy1tLGMrPXUscz1tLHkoKSk6KGM9bS1zLGMrPXUseSgpLHMrPWMtdSksbD1NYXRoLmFicyhhLXRbZF0pLG58fChsLT1oLGEtPWwpLF8oKSxvfSxfZGVwZW5kZW5jeUZTOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLHI9W10sbz0wLGE9MCxzPTAsbD0wLGM9dGhpcy5fcm93SGVpZ2h0LGQ9TWF0aC5mbG9vcihjLzIpLHU9MTAsaD0yKnUscD10LnN0YXJ0LWUuZW5kLGY9MixnPTEsbT1lLnJvd0luZGV4KmMrTWF0aC5mbG9vcihjLzIpLTEsdj10LnJvd0luZGV4KmMrTWF0aC5mbG9vcihjLzIpLTEsXz1FLnN0eWxlcyx5PWZ1bmN0aW9uKCl7ci5wdXNoKGkuX2xpbmUoXy5saW5lK1wiIFwiK18ubGluZUhvcml6b250YWwse2xlZnQ6bytcInB4XCIsdG9wOmErXCJweFwiLHdpZHRoOnMrXCJweFwifSkpfSx3PWZ1bmN0aW9uKCl7ci5wdXNoKGkuX2xpbmUoXy5saW5lK1wiIFwiK18ubGluZVZlcnRpY2FsLHtsZWZ0Om8rXCJweFwiLHRvcDphK1wicHhcIixoZWlnaHQ6bCtcInB4XCJ9KSl9O3JldHVybiBvPWUuZW5kLGE9bSxzPXUsbiYmKG8rPWcscD5oJiYocz1wLSh1LWYpKSxzLT1nKSx5KCksbys9cy1mLGg+PXAmJihsPW4/TWF0aC5hYnModi1tKS1kOmQsbT52PyhhLT1sLGwrPWYsdygpKToodygpLGErPWwpLHM9ZS5lbmQtdC5zdGFydCtoLHU+cyYmKHM9dSksby09cy1mLHkoKSksbT52PyhsPWEtdixhPXYsbCs9Zix3KCkpOihsPXYtYSx3KCksYSs9bCkscz10LnN0YXJ0LW8sbnx8KHMtPWcpLHkoKSxyfSxfbGluZTpmdW5jdGlvbihlLHQpe3JldHVybiBzKFwiZGl2XCIse2NsYXNzTmFtZTplLHN0eWxlOnR9KX0sX2Fycm93OmZ1bmN0aW9uKGUpe3JldHVybiBzKFwic3BhblwiLHtjbGFzc05hbWU6ZT9FLnN0eWxlcy5hcnJvd1dlc3Q6RS5zdHlsZXMuYXJyb3dFYXN0fSl9LF9jb2xncm91cDpmdW5jdGlvbigpe3ZhciBlLHQsbixpPXRoaXMuX3RpbWVTbG90cygpLHI9aS5sZW5ndGgsbz1bXTtmb3IoZT0wO3I+ZTtlKyspZm9yKHQ9MCxuPWlbZV0uc3BhbjtuPnQ7dCsrKW8ucHVzaChzKFwiY29sXCIpKTtyZXR1cm4gcyhcImNvbGdyb3VwXCIsbnVsbCxvKX0sX2NyZWF0ZURyYWdIaW50OmZ1bmN0aW9uKGUpe3RoaXMuX2RyYWdIaW50PWUuY2xvbmUoKS5hZGRDbGFzcyhFLnN0eWxlcy5kcmFnSGludCkuY3NzKFwiY3Vyc29yXCIsXCJtb3ZlXCIpLGUucGFyZW50KCkuYXBwZW5kKHRoaXMuX2RyYWdIaW50KX0sX3VwZGF0ZURyYWdIaW50OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX29mZnNldChlKTt0aGlzLl9kcmFnSGludC5jc3Moe2xlZnQ6dH0pfSxfcmVtb3ZlRHJhZ0hpbnQ6ZnVuY3Rpb24oKXt0aGlzLl9kcmFnSGludC5yZW1vdmUoKSx0aGlzLl9kcmFnSGludD1udWxsfSxfY3JlYXRlUmVzaXplSGludDpmdW5jdGlvbih0KXt2YXIgbixpLHI9RS5zdHlsZXMsbz10aGlzLl90YXNrQ29vcmRpbmF0ZXNbdC5pZF0ucm93SW5kZXgqdGhpcy5fcm93SGVpZ2h0O3RoaXMuX3Jlc2l6ZUhpbnQ9ZShDKHtzdHlsZXM6cn0pKS5jc3Moe3RvcDowLGhlaWdodDp0aGlzLl9jb250ZW50SGVpZ2h0fSksdGhpcy5jb250ZW50LmFwcGVuZCh0aGlzLl9yZXNpemVIaW50KSx0aGlzLl9yZXNpemVUb29sdGlwPWUoUyh7c3R5bGVzOnIsc3RhcnQ6dC5zdGFydCxlbmQ6dC5lbmR9KSkuY3NzKHt0b3A6MCxsZWZ0OjB9KSx0aGlzLmNvbnRlbnQuYXBwZW5kKHRoaXMuX3Jlc2l6ZVRvb2x0aXApLHRoaXMuX3Jlc2l6ZVRvb2x0aXBXaWR0aD10aGlzLl9yZXNpemVUb29sdGlwLm91dGVyV2lkdGgoKSxuPXRoaXMuX3Jlc2l6ZVRvb2x0aXAub3V0ZXJIZWlnaHQoKSxpPW8tbiwwPmkmJihpPW8rdGhpcy5fcm93SGVpZ2h0KSx0aGlzLl9yZXNpemVUb29sdGlwVG9wPWl9LF91cGRhdGVSZXNpemVIaW50OmZ1bmN0aW9uKHQsbixpKXt2YXIgcj10aGlzLl9vZmZzZXQodCksbz10aGlzLl9vZmZzZXQobiksYT1vLXIscz1pP3I6byxsPXRoaXMuX3RhYmxlV2lkdGgtMTcsYz10aGlzLl9yZXNpemVUb29sdGlwV2lkdGg7dGhpcy5fcmVzaXplSGludC5jc3Moe2xlZnQ6cix3aWR0aDphfSksdGhpcy5fcmVzaXplVG9vbHRpcCYmdGhpcy5fcmVzaXplVG9vbHRpcC5yZW1vdmUoKSxzLT1NYXRoLnJvdW5kKGMvMiksMD5zP3M9MDpzK2M+bCYmKHM9bC1jKSx0aGlzLl9yZXNpemVUb29sdGlwPWUoUyh7c3R5bGVzOkUuc3R5bGVzLHN0YXJ0OnQsZW5kOm59KSkuY3NzKHt0b3A6dGhpcy5fcmVzaXplVG9vbHRpcFRvcCxsZWZ0OnMsXCJtaW4td2lkdGhcIjpjfSksdGhpcy5jb250ZW50LmFwcGVuZCh0aGlzLl9yZXNpemVUb29sdGlwKX0sX3JlbW92ZVJlc2l6ZUhpbnQ6ZnVuY3Rpb24oKXt0aGlzLl9yZXNpemVIaW50LnJlbW92ZSgpLHRoaXMuX3Jlc2l6ZUhpbnQ9bnVsbCx0aGlzLl9yZXNpemVUb29sdGlwLnJlbW92ZSgpLHRoaXMuX3Jlc2l6ZVRvb2x0aXA9bnVsbH0sX3VwZGF0ZVBlcmNlbnRDb21wbGV0ZVRvb2x0aXA6ZnVuY3Rpb24odCxuLGkpe3ZhciByLG8sYSxzO3RoaXMuX3JlbW92ZVBlcmNlbnRDb21wbGV0ZVRvb2x0aXAoKSxyPXRoaXMuX3BlcmNlbnRDb21wbGV0ZVJlc2l6ZVRvb2x0aXA9ZShUKHtzdHlsZXM6RS5zdHlsZXMsdGV4dDppfSkpLmFwcGVuZFRvKHRoaXMuZWxlbWVudCksbz1NYXRoLnJvdW5kKHIub3V0ZXJXaWR0aCgpLzIpLGE9ci5maW5kKF8rRS5zdHlsZXMuY2FsbG91dCkscz1NYXRoLnJvdW5kKGEub3V0ZXJXaWR0aCgpLzIpLHIuY3NzKHt0b3A6dC0oci5vdXRlckhlaWdodCgpK3MpLGxlZnQ6bi1vfSksYS5jc3MoXCJsZWZ0XCIsby1zKX0sX3JlbW92ZVBlcmNlbnRDb21wbGV0ZVRvb2x0aXA6ZnVuY3Rpb24oKXt0aGlzLl9wZXJjZW50Q29tcGxldGVSZXNpemVUb29sdGlwJiZ0aGlzLl9wZXJjZW50Q29tcGxldGVSZXNpemVUb29sdGlwLnJlbW92ZSgpLHRoaXMuX3BlcmNlbnRDb21wbGV0ZVJlc2l6ZVRvb2x0aXA9bnVsbH0sX3VwZGF0ZURlcGVuZGVuY3lEcmFnSGludDpmdW5jdGlvbihlLHQsbil7dGhpcy5fcmVtb3ZlRGVwZW5kZW5jeURyYWdIaW50KCksbj90aGlzLl9jcmV0ZVZtbERlcGVuZGVuY3lEcmFnSGludChlLHQpOnRoaXMuX2NyZXRlRGVwZW5kZW5jeURyYWdIaW50KGUsdCl9LF9jcmV0ZURlcGVuZGVuY3lEcmFnSGludDpmdW5jdGlvbih0LG4pe3ZhciBpPUUuc3R5bGVzLHI9bi54LXQueCxvPW4ueS10LnksYT1NYXRoLnNxcnQocipyK28qbykscz1NYXRoLmF0YW4oby9yKTswPnImJihzKz1NYXRoLlBJKSxlKFwiPGRpdiBjbGFzcz0nXCIraS5saW5lK1wiIFwiK2kubGluZUhvcml6b250YWwrXCIgXCIraS5kZXBlbmRlbmN5SGludCtcIic+PC9kaXY+XCIpLmNzcyh7dG9wOnQueSxsZWZ0OnQueCx3aWR0aDphLFwidHJhbnNmb3JtLW9yaWdpblwiOlwiMCUgMFwiLFwiLW1zLXRyYW5zZm9ybS1vcmlnaW5cIjpcIjAlIDBcIixcIi13ZWJraXQtdHJhbnNmb3JtLW9yaWdpblwiOlwiMCUgMFwiLHRyYW5zZm9ybTpcInJvdGF0ZShcIitzK1wicmFkKVwiLFwiLW1zLXRyYW5zZm9ybVwiOlwicm90YXRlKFwiK3MrXCJyYWQpXCIsXCItd2Via2l0LXRyYW5zZm9ybVwiOlwicm90YXRlKFwiK3MrXCJyYWQpXCJ9KS5hcHBlbmRUbyh0aGlzLmNvbnRlbnQpfSxfY3JldGVWbWxEZXBlbmRlbmN5RHJhZ0hpbnQ6ZnVuY3Rpb24odCxuKXt2YXIgaT1lKFwiPGt2bWw6bGluZSBjbGFzcz0nXCIrRS5zdHlsZXMuZGVwZW5kZW5jeUhpbnQrXCInIHN0eWxlPSdwb3NpdGlvbjphYnNvbHV0ZTsgdG9wOiAwcHg7JyBzdHJva2Vjb2xvcj0nYmxhY2snIHN0cm9rZXdlaWdodD0nMnB4JyBmcm9tPSdcIit0LngrXCJweCxcIit0LnkrXCJweCcgdG89J1wiK24ueCtcInB4LFwiK24ueStcInB4Jz48L2t2bWw6bGluZT5cIikuYXBwZW5kVG8odGhpcy5jb250ZW50KTtcclxuaVswXS5vdXRlckhUTUw9aVswXS5vdXRlckhUTUx9LF9yZW1vdmVEZXBlbmRlbmN5RHJhZ0hpbnQ6ZnVuY3Rpb24oKXt0aGlzLmNvbnRlbnQuZmluZChfK0Uuc3R5bGVzLmRlcGVuZGVuY3lIaW50KS5yZW1vdmUoKX0sX3Njcm9sbFRvOmZ1bmN0aW9uKGUpe3ZhciB0PWUub2Zmc2V0KCkubGVmdCxuPWUud2lkdGgoKSxpPXQrbixyPWUuY2xvc2VzdChcInRyXCIpLG89ci5vZmZzZXQoKS50b3AsYT1yLmhlaWdodCgpLHM9bythLGw9dGhpcy5jb250ZW50LGM9bC5vZmZzZXQoKSxkPWMudG9wLHU9bC5oZWlnaHQoKSxoPWQrdSxwPWMubGVmdCxmPWwud2lkdGgoKSxnPXArZixtPWtlbmRvLnN1cHBvcnQuc2Nyb2xsYmFyKCk7ZD5vP2wuc2Nyb2xsVG9wKGwuc2Nyb2xsVG9wKCkrKG8tZCkpOnM+aCYmbC5zY3JvbGxUb3AobC5zY3JvbGxUb3AoKSsocyttLWgpKSxwPnQmJm4+ZiYmZz5pfHxpPmcmJmY+bj9sLnNjcm9sbExlZnQobC5zY3JvbGxMZWZ0KCkrKGkrbS1nKSk6KGk+ZyYmbj5mJiZ0PnB8fHA+dCYmZj5uKSYmbC5zY3JvbGxMZWZ0KGwuc2Nyb2xsTGVmdCgpKyh0LXApKX0sX3RpbWVTbG90czpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zbG90c1t0aGlzLl9zbG90cy5sZW5ndGgtMV19LF9oZWFkZXJzOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYSxjLGQsdT1bXSxoPUUuc3R5bGVzO2ZvcihvPTAsYT1lLmxlbmd0aDthPm87bysrKXtmb3IodD1lW29dLG49W10sYz0wLGQ9dC5sZW5ndGg7ZD5jO2MrKylpPXRbY10scj1sKGkudGV4dCksbi5wdXNoKHMoXCJ0aFwiLHtjb2xzcGFuOmkuc3BhbixjbGFzc05hbWU6aC5oZWFkZXIrKGkuaXNOb25Xb3JraW5nP1wiIFwiK2gubm9uV29ya2luZzpcIlwiKX0sW3JdKSk7dS5wdXNoKHMoXCJ0clwiLG51bGwsbikpfXJldHVybiB1fSxfaG91cnM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbz1bXSxhPXRoaXMub3B0aW9ucyxzPWEud29ya0RheVN0YXJ0LmdldEhvdXJzKCksbD1hLndvcmtEYXlFbmQuZ2V0SG91cnMoKSxjPWEuaG91clNwYW47Zm9yKGU9bmV3IERhdGUoZSksdD1uZXcgRGF0ZSh0KTt0PmU7KW49bmV3IERhdGUoZSkscj1uLmdldEhvdXJzKCksaT1yPj1zJiZsPnIsbi5zZXRIb3VycyhuLmdldEhvdXJzKCkrYykscj09bi5nZXRIb3VycygpJiZuLnNldEhvdXJzKG4uZ2V0SG91cnMoKSsyKmMpLCghYS5zaG93V29ya0hvdXJzfHxpKSYmby5wdXNoKHtzdGFydDplLGVuZDpuLGlzTm9uV29ya2luZzohaSxzcGFuOjF9KSxlPW47cmV0dXJuIG99LF9kYXlzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPVtdO2ZvcihlPW5ldyBEYXRlKGUpLHQ9bmV3IERhdGUodCk7dD5lOyluPWtlbmRvLmRhdGUubmV4dERheShlKSxpPXRoaXMuX2lzV29ya0RheShlKSwoIXRoaXMub3B0aW9ucy5zaG93V29ya0RheXN8fGkpJiZyLnB1c2goe3N0YXJ0OmUsZW5kOm4saXNOb25Xb3JraW5nOiFpLHNwYW46MX0pLGU9bjtyZXR1cm4gcn0sX3dlZWtzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG89W10sYT10aGlzLmNhbGVuZGFySW5mbygpLmZpcnN0RGF5O2ZvcihlPW5ldyBEYXRlKGUpLHQ9bmV3IERhdGUodCk7dD5lOyluPWtlbmRvLmRhdGUuZGF5T2ZXZWVrKGtlbmRvLmRhdGUuYWRkRGF5cyhlLDEpLGEsMSksbj50JiYobj10KSxpPXRoaXMuX2RheXMoZSxuKSxyPWkubGVuZ3RoLHI+MCYmby5wdXNoKHtzdGFydDppWzBdLnN0YXJ0LGVuZDppW3ItMV0uZW5kLHNwYW46cn0pLGU9bjtyZXR1cm4gb30sX21vbnRoczpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvPVtdO2ZvcihlPW5ldyBEYXRlKGUpLHQ9bmV3IERhdGUodCk7dD5lOyluPW5ldyBEYXRlKGUpLG4uc2V0TW9udGgobi5nZXRNb250aCgpKzEpLGk9dGhpcy5fZGF5cyhlLG4pLHI9aS5sZW5ndGgscj4wJiZvLnB1c2goe3N0YXJ0OmlbMF0uc3RhcnQsZW5kOmlbci0xXS5lbmQsc3BhbjpyfSksZT1uO3JldHVybiBvfSxfeWVhcnM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPVtdO2ZvcihlPW5ldyBEYXRlKGUpLHQ9bmV3IERhdGUodCk7dD5lOyluPW5ldyBEYXRlKGUpLG4uc2V0RnVsbFllYXIobi5nZXRGdWxsWWVhcigpKzEpLGkucHVzaCh7c3RhcnQ6ZSxlbmQ6bixzcGFuOjEyfSksZT1uO3JldHVybiBpfSxfc2xvdEhlYWRlcnM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbz1bXTtmb3IoaT0wLHI9ZS5sZW5ndGg7cj5pO2krKyluPWVbaV0sby5wdXNoKHt0ZXh0OnQobiksaXNOb25Xb3JraW5nOiEhbi5pc05vbldvcmtpbmcsc3BhbjpuLnNwYW59KTtyZXR1cm4gb30sX2lzV29ya0RheTpmdW5jdGlvbihlKXt2YXIgdCxuLGk9ZS5nZXREYXkoKSxyPXRoaXMuX3dvcmtEYXlzO2Zvcih0PTAsbj1yLmxlbmd0aDtuPnQ7dCsrKWlmKHJbdF09PT1pKXJldHVybiEwO3JldHVybiExfSxjYWxlbmRhckluZm86ZnVuY3Rpb24oKXtyZXR1cm4ga2VuZG8uZ2V0Q3VsdHVyZSgpLmNhbGVuZGFycy5zdGFuZGFyZH19KTtkKCEwLEUse3N0eWxlczpBfSksa2VuZG8udWkuR2FudHREYXlWaWV3PUUuZXh0ZW5kKHtuYW1lOlwiZGF5XCIsb3B0aW9uczp7dGltZUhlYWRlclRlbXBsYXRlOnksZGF5SGVhZGVyVGVtcGxhdGU6d30scmFuZ2U6ZnVuY3Rpb24oZSl7dGhpcy5zdGFydD1rZW5kby5kYXRlLmdldERhdGUoZS5zdGFydCksdGhpcy5lbmQ9a2VuZG8uZGF0ZS5nZXREYXRlKGUuZW5kKSwoa2VuZG8uZGF0ZS5nZXRNaWxsaXNlY29uZHMoZS5lbmQpPjB8fHRoaXMuZW5kLmdldFRpbWUoKT09PXRoaXMuc3RhcnQuZ2V0VGltZSgpKSYmKHRoaXMuZW5kPWtlbmRvLmRhdGUuYWRkRGF5cyh0aGlzLmVuZCwxKSl9LF9jcmVhdGVTbG90czpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHI9W10sbz10aGlzLl9kYXlzKHRoaXMuc3RhcnQsdGhpcy5lbmQpLGE9W107Zm9yKG49MCxpPW8ubGVuZ3RoO2k+bjtuKyspZT1vW25dLHQ9dGhpcy5faG91cnMoZS5zdGFydCxlLmVuZCksZS5zcGFuPXQubGVuZ3RoLGEucHVzaC5hcHBseShhLHQpO3JldHVybiByLnB1c2gobyksci5wdXNoKGEpLHJ9LF9sYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgZT1bXSx0PXRoaXMub3B0aW9ucztyZXR1cm4gZS5wdXNoKHRoaXMuX3Nsb3RIZWFkZXJzKHRoaXMuX3Nsb3RzWzBdLGtlbmRvLnRlbXBsYXRlKHQuZGF5SGVhZGVyVGVtcGxhdGUpKSksZS5wdXNoKHRoaXMuX3Nsb3RIZWFkZXJzKHRoaXMuX3Nsb3RzWzFdLGtlbmRvLnRlbXBsYXRlKHQudGltZUhlYWRlclRlbXBsYXRlKSkpLGV9fSksa2VuZG8udWkuR2FudHRXZWVrVmlldz1FLmV4dGVuZCh7bmFtZTpcIndlZWtcIixvcHRpb25zOntkYXlIZWFkZXJUZW1wbGF0ZTp3LHdlZWtIZWFkZXJUZW1wbGF0ZTpifSxyYW5nZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmNhbGVuZGFySW5mbygpLG49dC5maXJzdERheTt0aGlzLnN0YXJ0PWtlbmRvLmRhdGUuZ2V0RGF0ZShrZW5kby5kYXRlLmRheU9mV2VlayhlLnN0YXJ0LG4sLTEpKSx0aGlzLmVuZD1rZW5kby5kYXRlLmdldERhdGUoa2VuZG8uZGF0ZS5kYXlPZldlZWsoZS5lbmQsbiwxKSl9LF9jcmVhdGVTbG90czpmdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiBlLnB1c2godGhpcy5fd2Vla3ModGhpcy5zdGFydCx0aGlzLmVuZCkpLGUucHVzaCh0aGlzLl9kYXlzKHRoaXMuc3RhcnQsdGhpcy5lbmQpKSxlfSxfbGF5b3V0OmZ1bmN0aW9uKCl7dmFyIGU9W10sdD10aGlzLm9wdGlvbnM7cmV0dXJuIGUucHVzaCh0aGlzLl9zbG90SGVhZGVycyh0aGlzLl9zbG90c1swXSxrZW5kby50ZW1wbGF0ZSh0LndlZWtIZWFkZXJUZW1wbGF0ZSkpKSxlLnB1c2godGhpcy5fc2xvdEhlYWRlcnModGhpcy5fc2xvdHNbMV0sa2VuZG8udGVtcGxhdGUodC5kYXlIZWFkZXJUZW1wbGF0ZSkpKSxlfX0pLGtlbmRvLnVpLkdhbnR0TW9udGhWaWV3PUUuZXh0ZW5kKHtuYW1lOlwibW9udGhcIixvcHRpb25zOnt3ZWVrSGVhZGVyVGVtcGxhdGU6Yixtb250aEhlYWRlclRlbXBsYXRlOmt9LHJhbmdlOmZ1bmN0aW9uKGUpe3RoaXMuc3RhcnQ9a2VuZG8uZGF0ZS5maXJzdERheU9mTW9udGgoZS5zdGFydCksdGhpcy5lbmQ9a2VuZG8uZGF0ZS5hZGREYXlzKGtlbmRvLmRhdGUuZ2V0RGF0ZShrZW5kby5kYXRlLmxhc3REYXlPZk1vbnRoKGUuZW5kKSksMSl9LF9jcmVhdGVTbG90czpmdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiBlLnB1c2godGhpcy5fbW9udGhzKHRoaXMuc3RhcnQsdGhpcy5lbmQpKSxlLnB1c2godGhpcy5fd2Vla3ModGhpcy5zdGFydCx0aGlzLmVuZCkpLGV9LF9sYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgZT1bXSx0PXRoaXMub3B0aW9ucztyZXR1cm4gZS5wdXNoKHRoaXMuX3Nsb3RIZWFkZXJzKHRoaXMuX3Nsb3RzWzBdLGtlbmRvLnRlbXBsYXRlKHQubW9udGhIZWFkZXJUZW1wbGF0ZSkpKSxlLnB1c2godGhpcy5fc2xvdEhlYWRlcnModGhpcy5fc2xvdHNbMV0sa2VuZG8udGVtcGxhdGUodC53ZWVrSGVhZGVyVGVtcGxhdGUpKSksZX19KSxrZW5kby51aS5HYW50dFllYXJWaWV3PUUuZXh0ZW5kKHtuYW1lOlwieWVhclwiLG9wdGlvbnM6e3llYXJIZWFkZXJUZW1wbGF0ZTp4LG1vbnRoSGVhZGVyVGVtcGxhdGU6a30scmFuZ2U6ZnVuY3Rpb24oZSl7dGhpcy5zdGFydD1rZW5kby5kYXRlLmZpcnN0RGF5T2ZNb250aChuZXcgRGF0ZShlLnN0YXJ0LnNldE1vbnRoKDApKSksdGhpcy5lbmQ9a2VuZG8uZGF0ZS5maXJzdERheU9mTW9udGgobmV3IERhdGUoZS5lbmQuc2V0TW9udGgoMTIpKSl9LF9jcmVhdGVTbG90czpmdW5jdGlvbigpe3ZhciB0PVtdLG49dGhpcy5fbW9udGhzKHRoaXMuc3RhcnQsdGhpcy5lbmQpO3JldHVybiBlKG4pLmVhY2goZnVuY3Rpb24oZSx0KXt0LnNwYW49MX0pLHQucHVzaCh0aGlzLl95ZWFycyh0aGlzLnN0YXJ0LHRoaXMuZW5kKSksdC5wdXNoKG4pLHR9LF9sYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgZT1bXSx0PXRoaXMub3B0aW9ucztyZXR1cm4gZS5wdXNoKHRoaXMuX3Nsb3RIZWFkZXJzKHRoaXMuX3Nsb3RzWzBdLGtlbmRvLnRlbXBsYXRlKHQueWVhckhlYWRlclRlbXBsYXRlKSkpLGUucHVzaCh0aGlzLl9zbG90SGVhZGVycyh0aGlzLl9zbG90c1sxXSxrZW5kby50ZW1wbGF0ZSh0Lm1vbnRoSGVhZGVyVGVtcGxhdGUpKSksZX19KSxyPXt3cmFwcGVyOlwiay10aW1lbGluZSBrLWdyaWQgay13aWRnZXRcIixncmlkSGVhZGVyOlwiay1ncmlkLWhlYWRlclwiLGdyaWRIZWFkZXJXcmFwOlwiay1ncmlkLWhlYWRlci13cmFwXCIsZ3JpZENvbnRlbnQ6XCJrLWdyaWQtY29udGVudFwiLGdyaWRDb250ZW50V3JhcDpcImstZ3JpZC1jb250ZW50XCIsdGFza3NXcmFwcGVyOlwiay1nYW50dC10YWJsZXNcIixkZXBlbmRlbmNpZXNXcmFwcGVyOlwiay1nYW50dC1kZXBlbmRlbmNpZXNcIix0YXNrOlwiay10YXNrXCIsbGluZTpcImstbGluZVwiLHRhc2tSZXNpemVIYW5kbGU6XCJrLXJlc2l6ZS1oYW5kbGVcIix0YXNrUmVzaXplSGFuZGxlV2VzdDpcImstcmVzaXplLXdcIix0YXNrRHJhZ0hhbmRsZTpcImstdGFzay1kcmFnaGFuZGxlXCIsdGFza0NvbXBsZXRlOlwiay10YXNrLWNvbXBsZXRlXCIsdGFza0RlbGV0ZTpcImstdGFzay1kZWxldGVcIix0YXNrV3JhcEFjdGl2ZTpcImstdGFzay13cmFwLWFjdGl2ZVwiLHRhc2tXcmFwOlwiay10YXNrLXdyYXBcIix0YXNrRG90Olwiay10YXNrLWRvdFwiLHRhc2tEb3RTdGFydDpcImstdGFzay1zdGFydFwiLHRhc2tEb3RFbmQ6XCJrLXRhc2stZW5kXCIsaG92ZXJlZDpcImstc3RhdGUtaG92ZXJcIixzZWxlY3RlZDpcImstc3RhdGUtc2VsZWN0ZWRcIixvcmlnaW46XCJrLW9yaWdpblwifSxvPWtlbmRvLnVpLkdhbnR0VGltZWxpbmU9YS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXthLmZuLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy5vcHRpb25zLnZpZXdzJiZ0aGlzLm9wdGlvbnMudmlld3MubGVuZ3RofHwodGhpcy5vcHRpb25zLnZpZXdzPVtcImRheVwiLFwid2Vla1wiLFwibW9udGhcIl0pLHRoaXMuX3dyYXBwZXIoKSx0aGlzLl9kb21UcmVlcygpLHRoaXMuX3ZpZXdzKCksdGhpcy5fc2VsZWN0YWJsZSgpLHRoaXMuX2RyYWdnYWJsZSgpLHRoaXMuX3Jlc2l6YWJsZSgpLHRoaXMuX3BlcmNlbnRSZXNpemVEcmFnZ2FibGUoKSx0aGlzLl9jcmVhdGVEZXBlbmRlbmN5RHJhZ2dhYmxlKCksdGhpcy5fYXR0YWNoRXZlbnRzKCl9LG9wdGlvbnM6e25hbWU6XCJHYW50dFRpbWVsaW5lXCIsbWVzc2FnZXM6e3ZpZXdzOntkYXk6XCJEYXlcIix3ZWVrOlwiV2Vla1wiLG1vbnRoOlwiTW9udGhcIix5ZWFyOlwiWWVhclwifX0sc25hcDohMCxzZWxlY3RhYmxlOiEwLGVkaXRhYmxlOiEwfSxkZXN0cm95OmZ1bmN0aW9uKCl7YS5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5fdW5iaW5kVmlldyh0aGlzLl9zZWxlY3RlZFZpZXcpLHRoaXMuX21vdmVEcmFnZ2FibGUmJnRoaXMuX21vdmVEcmFnZ2FibGUuZGVzdHJveSgpLHRoaXMuX3Jlc2l6ZURyYWdnYWJsZSYmdGhpcy5fcmVzaXplRHJhZ2dhYmxlLmRlc3Ryb3koKSx0aGlzLl9wZXJjZW50RHJhZ2dhYmxlJiZ0aGlzLl9wZXJjZW50RHJhZ2dhYmxlLmRlc3Ryb3koKSx0aGlzLl9kZXBlbmRlbmN5RHJhZ2dhYmxlJiZ0aGlzLl9kZXBlbmRlbmN5RHJhZ2dhYmxlLmRlc3Ryb3koKSx0aGlzLl9oZWFkZXJUcmVlPW51bGwsdGhpcy5fdGFza1RyZWU9bnVsbCx0aGlzLl9kZXBlbmRlbmN5VHJlZT1udWxsLHRoaXMud3JhcHBlci5vZmYoZiksa2VuZG8uZGVzdHJveSh0aGlzLndyYXBwZXIpfSxfd3JhcHBlcjpmdW5jdGlvbigpe3ZhciBlPW8uc3R5bGVzO3RoaXMud3JhcHBlcj10aGlzLmVsZW1lbnQuYWRkQ2xhc3MoZS53cmFwcGVyKS5hcHBlbmQoXCI8ZGl2IGNsYXNzPSdcIitlLmdyaWRIZWFkZXIrXCInPjxkaXYgY2xhc3M9J1wiK2UuZ3JpZEhlYWRlcldyYXArXCInPjwvZGl2PjwvZGl2PlwiKS5hcHBlbmQoXCI8ZGl2IGNsYXNzPSdcIitlLmdyaWRDb250ZW50V3JhcCtcIic+PGRpdiBjbGFzcz0nXCIrZS50YXNrc1dyYXBwZXIrXCInPjwvZGl2PjxkaXYgY2xhc3M9J1wiK2UuZGVwZW5kZW5jaWVzV3JhcHBlcitcIic+PC9kaXY+PC9kaXY+XCIpfSxfZG9tVHJlZXM6ZnVuY3Rpb24oKXt2YXIgZT1vLnN0eWxlcyx0PWtlbmRvLmRvbS5UcmVlLG49dGhpcy53cmFwcGVyO3RoaXMuX2hlYWRlclRyZWU9bmV3IHQobi5maW5kKF8rZS5ncmlkSGVhZGVyV3JhcClbMF0pLHRoaXMuX3Rhc2tUcmVlPW5ldyB0KG4uZmluZChfK2UudGFza3NXcmFwcGVyKVswXSksdGhpcy5fZGVwZW5kZW5jeVRyZWU9bmV3IHQobi5maW5kKF8rZS5kZXBlbmRlbmNpZXNXcmFwcGVyKVswXSl9LF92aWV3czpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbyxhLHM9dGhpcy5vcHRpb25zLnZpZXdzO2Zvcih0aGlzLnZpZXdzPXt9LG89MCxhPXMubGVuZ3RoO2E+bztvKyspZT1zW29dLHQ9YyhlKSx0JiZlLnNlbGVjdGFibGU9PT0hMXx8KG49dD9cInN0cmluZ1wiIT10eXBlb2YgZS50eXBlP2UudGl0bGU6ZS50eXBlOmUsaT1EW25dLGkmJih0JiYoZS50eXBlPWkudHlwZSksaS50aXRsZT10aGlzLm9wdGlvbnMubWVzc2FnZXMudmlld3Nbbl0pLGU9ZCh7dGl0bGU6bn0saSx0P2U6e30pLG4mJih0aGlzLnZpZXdzW25dPWUsKCFyfHxlLnNlbGVjdGVkKSYmKHI9bikpKTtyJiYodGhpcy5fc2VsZWN0ZWRWaWV3TmFtZT1yKX0sdmlldzpmdW5jdGlvbihlKXtyZXR1cm4gZSYmKHRoaXMuX3NlbGVjdFZpZXcoZSksdGhpcy50cmlnZ2VyKFwibmF2aWdhdGVcIix7dmlldzplLGFjdGlvbjpcImNoYW5nZVZpZXdcIn0pKSx0aGlzLl9zZWxlY3RlZFZpZXd9LF9zZWxlY3RWaWV3OmZ1bmN0aW9uKGUpe2UmJnRoaXMudmlld3NbZV0mJih0aGlzLl9zZWxlY3RlZFZpZXcmJnRoaXMuX3VuYmluZFZpZXcodGhpcy5fc2VsZWN0ZWRWaWV3KSx0aGlzLl9zZWxlY3RlZFZpZXc9dGhpcy5faW5pdGlhbGl6ZVZpZXcoZSksdGhpcy5fc2VsZWN0ZWRWaWV3TmFtZT1lKX0sX3ZpZXdCeUluZGV4OmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy52aWV3cztmb3IodCBpbiBuKXtpZighZSlyZXR1cm4gdDtlLS19fSxfaW5pdGlhbGl6ZVZpZXc6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLnZpZXdzW2VdO2lmKGkpe2lmKG49aS50eXBlLFwic3RyaW5nXCI9PXR5cGVvZiBuJiYobj1rZW5kby5nZXR0ZXIoaS50eXBlKSh3aW5kb3cpKSwhbil0aHJvdyBFcnJvcihcIlRoZXJlIGlzIG5vIHN1Y2ggdmlld1wiKTtpPW5ldyBuKHRoaXMud3JhcHBlcix0KGQoITAse2hlYWRlclRyZWU6dGhpcy5faGVhZGVyVHJlZSx0YXNrVHJlZTp0aGlzLl90YXNrVHJlZSxkZXBlbmRlbmN5VHJlZTp0aGlzLl9kZXBlbmRlbmN5VHJlZX0saSx0aGlzLm9wdGlvbnMpKSl9cmV0dXJuIGl9LF91bmJpbmRWaWV3OmZ1bmN0aW9uKGUpe2UmJmUuZGVzdHJveSgpfSxfcmFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXtmaWVsZDpcInN0YXJ0XCIsZGlyOlwiYXNjXCJ9LHI9e2ZpZWxkOlwiZW5kXCIsZGlyOlwiZGVzY1wifTtyZXR1cm4gZSYmZS5sZW5ndGg/KHQ9bmV3IHAoZSkuc29ydChpKS50b0FycmF5KClbMF0uc3RhcnR8fG5ldyBEYXRlLG49bmV3IHAoZSkuc29ydChyKS50b0FycmF5KClbMF0uZW5kfHxuZXcgRGF0ZSx7c3RhcnQ6bmV3IERhdGUodCksZW5kOm5ldyBEYXRlKG4pfSk6e3N0YXJ0Om5ldyBEYXRlLGVuZDpuZXcgRGF0ZX19LF9yZW5kZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy52aWV3KCksbj10aGlzLl9yYW5nZShlKTt0aGlzLl90YXNrcz1lLHQucmFuZ2UobiksdC5yZW5kZXJMYXlvdXQoKSx0LnJlbmRlcihlKX0sX3JlbmRlckRlcGVuZGVuY2llczpmdW5jdGlvbihlKXt0aGlzLnZpZXcoKS5fcmVuZGVyRGVwZW5kZW5jaWVzKGUpfSxfdGFza0J5VWlkOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLl90YXNrcyxyPWkubGVuZ3RoO2ZvcihuPTA7cj5uO24rKylpZih0PWlbbl0sdC51aWQ9PT1lKXJldHVybiB0fSxfZHJhZ2dhYmxlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLHIsYSxzPXRoaXMsbD10aGlzLm9wdGlvbnMuc25hcCxjPW8uc3R5bGVzLGQ9ZnVuY3Rpb24oKXtzLnZpZXcoKS5fcmVtb3ZlRHJhZ0hpbnQoKSxlJiZlLmNzcyhcIm9wYWNpdHlcIiwxKSxlPW51bGwsdD1udWxsLGE9ITF9O3RoaXMub3B0aW9ucy5lZGl0YWJsZSYmKHRoaXMuX21vdmVEcmFnZ2FibGU9bmV3IGtlbmRvLnVpLkRyYWdnYWJsZSh0aGlzLndyYXBwZXIse2Rpc3RhbmNlOjAsZmlsdGVyOl8rYy50YXNrLGhvbGRUb0RyYWc6a2VuZG8uc3VwcG9ydC5tb2JpbGVPUyxpZ25vcmU6XytjLnRhc2tSZXNpemVIYW5kbGV9KSx0aGlzLl9tb3ZlRHJhZ2dhYmxlLmJpbmQoXCJkcmFnc3RhcnRcIixmdW5jdGlvbihpKXt2YXIgbz1zLnZpZXcoKTtyZXR1cm4gZT1pLmN1cnJlbnRUYXJnZXQucGFyZW50KCksdD1zLl90YXNrQnlVaWQoaS5jdXJyZW50VGFyZ2V0LmF0dHIoXCJkYXRhLXVpZFwiKSkscy50cmlnZ2VyKFwibW92ZVN0YXJ0XCIse3Rhc2s6dH0pP3ZvaWQgaS5wcmV2ZW50RGVmYXVsdCgpOihuPXQuc3RhcnQscj1vLl90aW1lQnlQb3NpdGlvbihpLngubG9jYXRpb24sbCktbixvLl9jcmVhdGVEcmFnSGludChlKSxlLmNzcyhcIm9wYWNpdHlcIiwuNSksdm9pZChhPSEwKSl9KS5iaW5kKFwiZHJhZ1wiLGtlbmRvLnRocm90dGxlKGZ1bmN0aW9uKGUpe3ZhciBpLG87YSYmKGk9cy52aWV3KCksbz1uZXcgRGF0ZShpLl90aW1lQnlQb3NpdGlvbihlLngubG9jYXRpb24sbCktcikscy50cmlnZ2VyKFwibW92ZVwiLHt0YXNrOnQsc3RhcnQ6b30pfHwobj1vLGkuX3VwZGF0ZURyYWdIaW50KG4pKSl9LDE1KSkuYmluZChcImRyYWdlbmRcIixmdW5jdGlvbigpe3MudHJpZ2dlcihcIm1vdmVFbmRcIix7dGFzazp0LHN0YXJ0Om59KSxkKCl9KS5iaW5kKFwiZHJhZ2NhbmNlbFwiLGZ1bmN0aW9uKCl7ZCgpfSkudXNlckV2ZW50cy5iaW5kKFwic2VsZWN0XCIsZnVuY3Rpb24oKXtpKCl9KSl9LF9yZXNpemFibGU6ZnVuY3Rpb24oKXt2YXIgZSx0LG4scixhLHMsbD10aGlzLGM9dGhpcy5vcHRpb25zLnNuYXAsZD1vLnN0eWxlcyx1PWZ1bmN0aW9uKCl7bC52aWV3KCkuX3JlbW92ZVJlc2l6ZUhpbnQoKSxlPW51bGwsdD1udWxsLHM9ITF9O3RoaXMub3B0aW9ucy5lZGl0YWJsZSYmKHRoaXMuX3Jlc2l6ZURyYWdnYWJsZT1uZXcga2VuZG8udWkuRHJhZ2dhYmxlKHRoaXMud3JhcHBlcix7ZGlzdGFuY2U6MCxmaWx0ZXI6XytkLnRhc2tSZXNpemVIYW5kbGUsaG9sZFRvRHJhZzohMX0pLHRoaXMuX3Jlc2l6ZURyYWdnYWJsZS5iaW5kKFwiZHJhZ3N0YXJ0XCIsZnVuY3Rpb24oaSl7cmV0dXJuIGE9aS5jdXJyZW50VGFyZ2V0Lmhhc0NsYXNzKGQudGFza1Jlc2l6ZUhhbmRsZVdlc3QpLGU9aS5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoXytkLnRhc2spLHQ9bC5fdGFza0J5VWlkKGUuYXR0cihcImRhdGEtdWlkXCIpKSxsLnRyaWdnZXIoXCJyZXNpemVTdGFydFwiLHt0YXNrOnR9KT92b2lkIGkucHJldmVudERlZmF1bHQoKToobj10LnN0YXJ0LHI9dC5lbmQsbC52aWV3KCkuX2NyZWF0ZVJlc2l6ZUhpbnQodCksdm9pZChzPSEwKSl9KS5iaW5kKFwiZHJhZ1wiLGtlbmRvLnRocm90dGxlKGZ1bmN0aW9uKGUpe3ZhciBpLG87cyYmKGk9bC52aWV3KCksbz1pLl90aW1lQnlQb3NpdGlvbihlLngubG9jYXRpb24sYywhYSksYT9uPXI+bz9vOnI6cj1vPm4/bzpuLGwudHJpZ2dlcihcInJlc2l6ZVwiLHt0YXNrOnQsc3RhcnQ6bixlbmQ6cn0pfHxpLl91cGRhdGVSZXNpemVIaW50KG4scixhKSl9LDE1KSkuYmluZChcImRyYWdlbmRcIixmdW5jdGlvbigpe2wudHJpZ2dlcihcInJlc2l6ZUVuZFwiLHt0YXNrOnQscmVzaXplU3RhcnQ6YSxzdGFydDpuLGVuZDpyfSksdSgpfSkuYmluZChcImRyYWdjYW5jZWxcIixmdW5jdGlvbigpe3UoKX0pLnVzZXJFdmVudHMuYmluZChcInNlbGVjdFwiLGZ1bmN0aW9uKCl7aSgpfSkpfSxfcGVyY2VudFJlc2l6ZURyYWdnYWJsZTpmdW5jdGlvbigpe3ZhciBlLHQsbixyLGEscyxsLGMsZCx1LGg9dGhpcyxwPW8uc3R5bGVzLGY9ZnVuY3Rpb24oKXtoLnZpZXcoKS5fcmVtb3ZlUGVyY2VudENvbXBsZXRlVG9vbHRpcCgpLHQ9bnVsbCxlPW51bGwsdT0hMX0sZz1mdW5jdGlvbihlKXt0LmZpbmQoXytwLnRhc2tDb21wbGV0ZSkud2lkdGgoZSkuZW5kKCkuc2libGluZ3MoXytwLnRhc2tEcmFnSGFuZGxlKS5jc3MoXCJsZWZ0XCIsZSl9O3RoaXMub3B0aW9ucy5lZGl0YWJsZSYmKHRoaXMuX3BlcmNlbnREcmFnZ2FibGU9bmV3IGtlbmRvLnVpLkRyYWdnYWJsZSh0aGlzLndyYXBwZXIse2Rpc3RhbmNlOjAsZmlsdGVyOl8rcC50YXNrRHJhZ0hhbmRsZSxob2xkVG9EcmFnOiExfSksdGhpcy5fcGVyY2VudERyYWdnYWJsZS5iaW5kKFwiZHJhZ3N0YXJ0XCIsZnVuY3Rpb24oaSl7dD1pLmN1cnJlbnRUYXJnZXQuc2libGluZ3MoXytwLnRhc2spLGU9aC5fdGFza0J5VWlkKHQuYXR0cihcImRhdGEtdWlkXCIpKSxsPWUucGVyY2VudENvbXBsZXRlLG49dC5vZmZzZXQoKSxyPXRoaXMuZWxlbWVudC5vZmZzZXQoKSxhPXQuZmluZChfK3AudGFza0NvbXBsZXRlKS53aWR0aCgpLHM9dC5vdXRlcldpZHRoKCksdT0hMH0pLmJpbmQoXCJkcmFnXCIsa2VuZG8udGhyb3R0bGUoZnVuY3Rpb24oZSl7aWYodSl7dmFyIHQ9TWF0aC5tYXgoMCxNYXRoLm1pbihzLGErZS54LmluaXRpYWxEZWx0YSkpO2w9TWF0aC5yb3VuZCh0L3MqMTAwKSxnKHQpLGM9bi50b3Atci50b3AsZD1uLmxlZnQrdC1yLmxlZnQsaC52aWV3KCkuX3VwZGF0ZVBlcmNlbnRDb21wbGV0ZVRvb2x0aXAoYyxkLGwpfX0sMTUpKS5iaW5kKFwiZHJhZ2VuZFwiLGZ1bmN0aW9uKCl7aC50cmlnZ2VyKFwicGVyY2VudFJlc2l6ZUVuZFwiLHt0YXNrOmUscGVyY2VudENvbXBsZXRlOmwvMTAwfSksZigpfSkuYmluZChcImRyYWdjYW5jZWxcIixmdW5jdGlvbigpe2coYSksZigpfSkudXNlckV2ZW50cy5iaW5kKFwic2VsZWN0XCIsZnVuY3Rpb24oKXtpKCl9KSl9LF9jcmVhdGVEZXBlbmRlbmN5RHJhZ2dhYmxlOmZ1bmN0aW9uKCl7dmFyIHQsbixyLGEscyxsLGM9dGhpcyxkPWUoKSxoPWUoKSxwPXUubXNpZSYmOT51LnZlcnNpb24sZj1vLnN0eWxlcyxnPWZ1bmN0aW9uKCl7dC5jc3MoXCJkaXNwbGF5XCIsXCJcIikucmVtb3ZlQ2xhc3MoZi5ob3ZlcmVkKSx0LnBhcmVudCgpLnJlbW92ZUNsYXNzKGYub3JpZ2luKSx0PW51bGwsbSghMSksaD1lKCksZD1lKCksYy52aWV3KCkuX3JlbW92ZURlcGVuZGVuY3lEcmFnSGludCgpLG49ITF9LG09ZnVuY3Rpb24oZSl7aC5oYXNDbGFzcyhmLm9yaWdpbil8fChoLmZpbmQoXytmLnRhc2tEb3QpLmNzcyhcImRpc3BsYXlcIixlP1wiYmxvY2tcIjpcIlwiKSxkLnRvZ2dsZUNsYXNzKGYuaG92ZXJlZCxlKSl9O3RoaXMub3B0aW9ucy5lZGl0YWJsZSYmKHAmJmRvY3VtZW50Lm5hbWVzcGFjZXMmJmRvY3VtZW50Lm5hbWVzcGFjZXMuYWRkKFwia3ZtbFwiLFwidXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTp2bWxcIixcIiNkZWZhdWx0I1ZNTFwiKSx0aGlzLl9kZXBlbmRlbmN5RHJhZ2dhYmxlPW5ldyBrZW5kby51aS5EcmFnZ2FibGUodGhpcy53cmFwcGVyLHtkaXN0YW5jZTowLGZpbHRlcjpfK2YudGFza0RvdCxob2xkVG9EcmFnOiExfSksdGhpcy5fZGVwZW5kZW5jeURyYWdnYWJsZS5iaW5kKFwiZHJhZ3N0YXJ0XCIsZnVuY3Rpb24oZSl7dD1lLmN1cnJlbnRUYXJnZXQuY3NzKFwiZGlzcGxheVwiLFwiYmxvY2tcIikuYWRkQ2xhc3MoZi5ob3ZlcmVkKSx0LnBhcmVudCgpLmFkZENsYXNzKGYub3JpZ2luKTt2YXIgaT10Lm9mZnNldCgpO3M9Yy52aWV3KCkuY29udGVudCxsPXMub2Zmc2V0KCkscj1NYXRoLnJvdW5kKGkubGVmdCtzLnNjcm9sbExlZnQoKS1sLmxlZnQrdC5vdXRlckhlaWdodCgpLzIpLGE9TWF0aC5yb3VuZChpLnRvcCtzLnNjcm9sbFRvcCgpLWwudG9wK3Qub3V0ZXJXaWR0aCgpLzIpLG49ITB9KS5iaW5kKFwiZHJhZ1wiLGtlbmRvLnRocm90dGxlKGZ1bmN0aW9uKHQpe3ZhciBpLG8sdTtuJiYoYy52aWV3KCkuX3JlbW92ZURlcGVuZGVuY3lEcmFnSGludCgpLGk9ZShrZW5kby5lbGVtZW50VW5kZXJDdXJzb3IodCkpLG89dC54LmxvY2F0aW9uK3Muc2Nyb2xsTGVmdCgpLWwubGVmdCx1PXQueS5sb2NhdGlvbitzLnNjcm9sbFRvcCgpLWwudG9wLGMudmlldygpLl91cGRhdGVEZXBlbmRlbmN5RHJhZ0hpbnQoe3g6cix5OmF9LHt4Om8seTp1fSxwKSxtKCExKSxkPWkuaGFzQ2xhc3MoZi50YXNrRG90KT9pOmUoKSxoPWkuY2xvc2VzdChfK2YudGFza1dyYXApLG0oITApKX0sMTUpKS5iaW5kKFwiZHJhZ2VuZFwiLGZ1bmN0aW9uKCl7dmFyIGUsbixpLHIsbztkLmxlbmd0aCYmKGU9dC5oYXNDbGFzcyhmLnRhc2tEb3RTdGFydCksbj1kLmhhc0NsYXNzKGYudGFza0RvdFN0YXJ0KSxpPWU/bj8zOjI6bj8xOjAscj1jLl90YXNrQnlVaWQodC5zaWJsaW5ncyhfK2YudGFzaykuYXR0cihcImRhdGEtdWlkXCIpKSxvPWMuX3Rhc2tCeVVpZChkLnNpYmxpbmdzKF8rZi50YXNrKS5hdHRyKFwiZGF0YS11aWRcIikpLHIhPT1vJiZjLnRyaWdnZXIoXCJkZXBlbmRlbmN5RHJhZ0VuZFwiLHt0eXBlOmkscHJlZGVjZXNzb3I6cixzdWNjZXNzb3I6b30pKSxnKCl9KS5iaW5kKFwiZHJhZ2NhbmNlbFwiLGZ1bmN0aW9uKCl7ZygpfSkudXNlckV2ZW50cy5iaW5kKFwic2VsZWN0XCIsZnVuY3Rpb24oKXtpKCl9KSl9LF9zZWxlY3RhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPW8uc3R5bGVzO3RoaXMub3B0aW9ucy5zZWxlY3RhYmxlJiZ0aGlzLndyYXBwZXIub24oZytmLF8rbi50YXNrLGZ1bmN0aW9uKG4pe24uc3RvcFByb3BhZ2F0aW9uKCksbi5jdHJsS2V5P3QudHJpZ2dlcihcImNsZWFyXCIpOnQudHJpZ2dlcihcInNlbGVjdFwiLHt1aWQ6ZSh0aGlzKS5hdHRyKFwiZGF0YS11aWRcIil9KX0pLm9uKGcrZixfK24udGFza3NXcmFwcGVyLGZ1bmN0aW9uKCl7dC5zZWxlY3REZXBlbmRlbmN5KCkubGVuZ3RoPjA/dC5jbGVhclNlbGVjdGlvbigpOnQudHJpZ2dlcihcImNsZWFyXCIpfSkub24oZytmLF8rbi5saW5lLGZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCksdC5zZWxlY3REZXBlbmRlbmN5KHRoaXMpfSl9LHNlbGVjdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLndyYXBwZXIuZmluZChlKSxuPW8uc3R5bGVzO3JldHVybiB0Lmxlbmd0aD8odGhpcy5jbGVhclNlbGVjdGlvbigpLHQuYWRkQ2xhc3Mobi5zZWxlY3RlZCksdm9pZChrZW5kby5zdXBwb3J0Lm1vYmlsZU9TJiZ0LnBhcmVudCgpLmFkZENsYXNzKG4udGFza1dyYXBBY3RpdmUpKSk6dGhpcy53cmFwcGVyLmZpbmQoXytuLnRhc2srXytuLnNlbGVjdGVkKX0sc2VsZWN0RGVwZW5kZW5jeTpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXMud3JhcHBlci5maW5kKHQpLHI9by5zdHlsZXM7cmV0dXJuIGkubGVuZ3RoPyh0aGlzLmNsZWFyU2VsZWN0aW9uKCksdGhpcy50cmlnZ2VyKFwiY2xlYXJcIiksbj1lKGkpLmF0dHIoXCJkYXRhLXVpZFwiKSx2b2lkIHRoaXMud3JhcHBlci5maW5kKF8rci5saW5lK1wiW2RhdGEtdWlkPSdcIituK1wiJ11cIikuYWRkQ2xhc3Moci5zZWxlY3RlZCkpOnRoaXMud3JhcHBlci5maW5kKF8rci5saW5lK18rci5zZWxlY3RlZCl9LGNsZWFyU2VsZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9by5zdHlsZXM7dGhpcy53cmFwcGVyLmZpbmQoXytlLnNlbGVjdGVkKS5yZW1vdmVDbGFzcyhlLnNlbGVjdGVkKSxrZW5kby5zdXBwb3J0Lm1vYmlsZU9TJiZ0aGlzLndyYXBwZXIuZmluZChfK2UudGFza1dyYXBBY3RpdmUpLnJlbW92ZUNsYXNzKGUudGFza1dyYXBBY3RpdmUpfSxfYXR0YWNoRXZlbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPW8uc3R5bGVzO3RoaXMub3B0aW9ucy5lZGl0YWJsZSYmKHRoaXMuX3RhYmluZGV4KCksdGhpcy53cmFwcGVyLm9uKGcrZixfK24udGFza0RlbGV0ZSxmdW5jdGlvbihpKXt0LnRyaWdnZXIoXCJyZW1vdmVUYXNrXCIse3VpZDplKHRoaXMpLmNsb3Nlc3QoXytuLnRhc2spLmF0dHIoXCJkYXRhLXVpZFwiKX0pLGkuc3RvcFByb3BhZ2F0aW9uKCksaS5wcmV2ZW50RGVmYXVsdCgpfSkub24obStmLF8rbi50YXNrLGZ1bmN0aW9uKG4pe3QudHJpZ2dlcihcImVkaXRUYXNrXCIse3VpZDplKHRoaXMpLmF0dHIoXCJkYXRhLXVpZFwiKX0pLG4uc3RvcFByb3BhZ2F0aW9uKCksbi5wcmV2ZW50RGVmYXVsdCgpfSkub24oditmLGZ1bmN0aW9uKGUpe3ZhciBuO2Uua2V5Q29kZT09PWguREVMRVRFJiYobj10LnNlbGVjdERlcGVuZGVuY3koKSxuLmxlbmd0aCYmKHQudHJpZ2dlcihcInJlbW92ZURlcGVuZGVuY3lcIix7dWlkOm4uYXR0cihcImRhdGEtdWlkXCIpfSksdC5jbGVhclNlbGVjdGlvbigpKSl9KSl9fSksZCghMCxvLHtzdHlsZXM6cn0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7cmV0dXJuXCJbXCIrZi5hdHRyKFwidWlkXCIpKyhlP1wiPSdcIitlK1wiJ11cIjpcIl1cIil9ZnVuY3Rpb24gaShlKXtyZXR1cm4gZGVsZXRlIGUubmFtZSxkZWxldGUgZS5wcmVmaXgsZGVsZXRlIGUucmVtb3ZlLGRlbGV0ZSBlLmVkaXQsZGVsZXRlIGUuYWRkLGRlbGV0ZSBlLm5hdmlnYXRlLGV9ZnVuY3Rpb24gcihlKXt2YXIgdCxuLGkscixvLGE7aWYoZS5maWx0ZXIoXCJbbmFtZT1lbmRdLCBbbmFtZT1zdGFydF1cIikubGVuZ3RoKXtmb3IodD1lLmF0dHIoXCJuYW1lXCIpLG49Zi53aWRnZXRJbnN0YW5jZShlLGYudWkpLGk9e30scj1lO3IhPT13aW5kb3cmJiFvOylyPXIucGFyZW50KCksbz1yLmRhdGEoXCJrZW5kb0VkaXRhYmxlXCIpO3JldHVybihhPW8/by5vcHRpb25zLm1vZGVsOm51bGwpPyhpLnN0YXJ0PWEuc3RhcnQsaS5lbmQ9YS5lbmQsaVt0XT1uP24udmFsdWUoKTpmLnBhcnNlRGF0ZShlLnZhbHVlKCkpLGkuZW5kPj1pLnN0YXJ0KTohMH1yZXR1cm4hMH1mdW5jdGlvbiBvKHQsbil7dmFyIGk9dC5wYXJlbnRzKFwiW1wiK2YuYXR0cihcInJvbGVcIikrJz1cImdhbnR0XCJdJykscj1bXSxvPWEoaSk7dC5hdHRyKEksMCksbiYmby5lYWNoKGZ1bmN0aW9uKHQsbil7clt0XT1lKG4pLnNjcm9sbFRvcCgpfSk7dHJ5e3RbMF0uc2V0QWN0aXZlKCl9Y2F0Y2gocyl7dFswXS5mb2N1cygpfW4mJm8uZWFjaChmdW5jdGlvbih0LG4pe2Uobikuc2Nyb2xsVG9wKHJbdF0pfSl9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gZSh0KS5wYXJlbnRzVW50aWwoXCJib2R5XCIpLmZpbHRlcihmdW5jdGlvbihlLHQpe3ZhciBuPWYuZ2V0Q29tcHV0ZWRTdHlsZXModCxbXCJvdmVyZmxvd1wiXSk7cmV0dXJuXCJ2aXNpYmxlXCIhPW4ub3ZlcmZsb3d9KS5hZGQod2luZG93KX12YXIgcyxsLGMsZCx1LGgscCxmPXdpbmRvdy5rZW5kbyxnPWYuc3VwcG9ydC5icm93c2VyLG09Zi5PYnNlcnZhYmxlLHY9Zi51aS5XaWRnZXQsXz1mLmRhdGEuRGF0YVNvdXJjZSx5PWYuZGF0YS5PYnNlcnZhYmxlT2JqZWN0LHc9Zi5kYXRhLk9ic2VydmFibGVBcnJheSxiPWYuZGF0YS5RdWVyeSxrPWUuaXNBcnJheSx4PWUuaW5BcnJheSxDPWYuaXNGdW5jdGlvbixTPWUucHJveHksVD1lLmV4dGVuZCxEPWUuaXNQbGFpbk9iamVjdCxBPWUubWFwLEU9Zi5rZXlzLE09XCIua2VuZG9HYW50dFwiLFA9XCJwMFwiLEk9XCJ0YWJJbmRleFwiLHo9XCJjbGlja1wiLEY9XCJ3aWR0aFwiLFI9XCJzdHJpbmdcIixCPXtkb3duOntvcmlnaW46XCJib3R0b20gY2VudGVyXCIscG9zaXRpb246XCJ0b3AgY2VudGVyXCJ9LHVwOntvcmlnaW46XCJ0b3AgY2VudGVyXCIscG9zaXRpb246XCJib3R0b20gY2VudGVyXCJ9fSxMPVwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsTz1cImdhbnR0X2FjdGl2ZV9jZWxsXCIsSD1cImFjdGlvbi1vcHRpb24tZm9jdXNlZFwiLE49XCIuXCIsVj1cIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyB0YXNrP1wiLFU9XCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgZGVwZW5kZW5jeT9cIixXPSc8YnV0dG9uIGNsYXNzPVwiIz1zdHlsZXMuYnV0dG9uIyAjPWNsYXNzTmFtZSNcIiAjaWYgKGFjdGlvbikgeyNkYXRhLWFjdGlvbj1cIiM9YWN0aW9uI1wiI30jPjxzcGFuIGNsYXNzPVwiIz1pY29uQ2xhc3MjXCI+PC9zcGFuPiM9dGV4dCM8L2J1dHRvbj4nLGo9JzxhIGNsYXNzPVwiIz1jbGFzc05hbWUjXCIgIz1hdHRyIyBocmVmPVwiXFxcXCNcIj4jPXRleHQjPC9hPicsRz1mLnRlbXBsYXRlKCc8dWwgY2xhc3M9XCIjPXN0eWxlcy52aWV3c1dyYXBwZXIjXCI+I2Zvcih2YXIgdmlldyBpbiB2aWV3cyl7IzxsaSBjbGFzcz1cIiM9c3R5bGVzLnZpZXdCdXR0b25EZWZhdWx0IyAjPXN0eWxlcy52aWV3QnV0dG9uIy0jPSB2aWV3LnRvTG93ZXJDYXNlKCkgI1wiIGRhdGEtIz1ucyNuYW1lPVwiIz12aWV3I1wiPjxhIGhyZWY9XCJcXFxcI1wiIGNsYXNzPVwiIz1zdHlsZXMubGluayNcIj4jPXZpZXdzW3ZpZXddLnRpdGxlIzwvYT48L2xpPiN9IzwvdWw+JykscT1mLnRlbXBsYXRlKCc8ZGl2IGNsYXNzPVwiIz1zdHlsZXMucG9wdXBXcmFwcGVyI1wiPjx1bCBjbGFzcz1cIiM9c3R5bGVzLnBvcHVwTGlzdCNcIiByb2xlPVwibGlzdGJveFwiPiNmb3IodmFyIGkgPSAwLCBsID0gYWN0aW9ucy5sZW5ndGg7IGkgPCBsOyBpKyspeyM8bGkgY2xhc3M9XCIjPXN0eWxlcy5pdGVtI1wiIGRhdGEtYWN0aW9uPVwiIz1hY3Rpb25zW2ldLmRhdGEjXCIgcm9sZT1cIm9wdGlvblwiPiM9YWN0aW9uc1tpXS50ZXh0Izwvc3Bhbj4jfSM8L3VsPjwvZGl2PicpLCQ9Zi50ZW1wbGF0ZSgnPGRpdiBjbGFzcz1cIiM9c3R5bGVzLmZvb3RlcldyYXBwZXIjXCI+PGRpdiBjbGFzcz1cIiM9c3R5bGVzLmFjdGlvbnMjXCI+PGJ1dHRvbiBjbGFzcz1cIiM9c3R5bGVzLmJ1dHRvbiNcIiBkYXRhLWFjdGlvbj1cIiM9YWN0aW9uLmRhdGEjXCI+PHNwYW4gY2xhc3M9XCIjPXN0eWxlcy5pY29uUGx1cyNcIj48L3NwYW4+Iz1hY3Rpb24udGl0bGUjPC9idXR0b24+PC9kaXY+PC9kaXY+JyksWT1mdW5jdGlvbih0LG4pe3ZhciBpPXtuYW1lOm4uZmllbGR9LHI9bi5tb2RlbC5maWVsZHNbbi5maWVsZF0udmFsaWRhdGlvbjtyJiZEKHIpJiZyLm1lc3NhZ2UmJihpW2YuYXR0cihcImRhdGVDb21wYXJlLW1zZ1wiKV09ci5tZXNzYWdlKSxlKCc8aW5wdXQgdHlwZT1cInRleHRcIiByZXF1aXJlZCAnK2YuYXR0cihcInR5cGVcIikrJz1cImRhdGVcIiAnK2YuYXR0cihcInJvbGVcIikrJz1cImRhdGV0aW1lcGlja2VyXCIgJytmLmF0dHIoXCJiaW5kXCIpKyc9XCJ2YWx1ZTonK24uZmllbGQrJ1wiICcrZi5hdHRyKFwidmFsaWRhdGVcIikrXCI9J3RydWUnIC8+XCIpLmF0dHIoaSkuYXBwZW5kVG8odCksZShcIjxzcGFuIFwiK2YuYXR0cihcImZvclwiKSsnPVwiJytuLmZpZWxkKydcIiBjbGFzcz1cImstaW52YWxpZC1tc2dcIi8+JykuaGlkZSgpLmFwcGVuZFRvKHQpfSxLPWZ1bmN0aW9uKHQsbil7ZSgnPGEgaHJlZj1cIiNcIiBjbGFzcz1cIicrbi5zdHlsZXMuYnV0dG9uKydcIj4nK24ubWVzc2FnZXMuYXNzaW5nQnV0dG9uK1wiPC9hPlwiKS5jbGljayhuLmNsaWNrKS5hcHBlbmRUbyh0KX0sUT17d3JhcHBlcjpcImstd2lkZ2V0IGstZ2FudHRcIixsaXN0V3JhcHBlcjpcImstZ2FudHQtbGF5b3V0IGstZ2FudHQtdHJlZWxpc3RcIixsaXN0Olwiay1nYW50dC10cmVlbGlzdFwiLHRpbWVsaW5lV3JhcHBlcjpcImstZ2FudHQtbGF5b3V0IGstZ2FudHQtdGltZWxpbmVcIix0aW1lbGluZTpcImstZ2FudHQtdGltZWxpbmVcIixzcGxpdEJhcldyYXBwZXI6XCJrLXNwbGl0YmFyIGstc3RhdGUtZGVmYXVsdCBrLXNwbGl0YmFyLWhvcml6b250YWwgay1zcGxpdGJhci1kcmFnZ2FibGUtaG9yaXpvbnRhbCBrLWdhbnR0LWxheW91dFwiLHNwbGl0QmFyOlwiay1zcGxpdGJhclwiLHNwbGl0QmFySG92ZXI6XCJrLXNwbGl0YmFyLWhvcml6b250YWwtaG92ZXJcIixwb3B1cFdyYXBwZXI6XCJrLWxpc3QtY29udGFpbmVyXCIscG9wdXBMaXN0Olwiay1saXN0IGstcmVzZXRcIixyZXNpemVIYW5kbGU6XCJrLXJlc2l6ZS1oYW5kbGVcIixpY29uOlwiay1pY29uXCIsaXRlbTpcImstaXRlbVwiLGxpbmU6XCJrLWxpbmVcIixidXR0b25EZWxldGU6XCJrLWdhbnR0LWRlbGV0ZVwiLGJ1dHRvbkNhbmNlbDpcImstZ2FudHQtY2FuY2VsXCIsYnV0dG9uU2F2ZTpcImstZ2FudHQtdXBkYXRlXCIscHJpbWFyeTpcImstcHJpbWFyeVwiLGhvdmVyZWQ6XCJrLXN0YXRlLWhvdmVyXCIsc2VsZWN0ZWQ6XCJrLXN0YXRlLXNlbGVjdGVkXCIsZm9jdXNlZDpcImstc3RhdGUtZm9jdXNlZFwiLGdyaWRIZWFkZXI6XCJrLWdyaWQtaGVhZGVyXCIsZ3JpZEhlYWRlcldyYXA6XCJrLWdyaWQtaGVhZGVyLXdyYXBcIixncmlkQ29udGVudDpcImstZ3JpZC1jb250ZW50XCIscG9wdXA6e2Zvcm06XCJrLXBvcHVwLWVkaXQtZm9ybVwiLGVkaXRGb3JtOlwiay1nYW50dC1lZGl0LWZvcm1cIixmb3JtQ29udGFpbmVyOlwiay1lZGl0LWZvcm0tY29udGFpbmVyXCIscmVzb3VyY2VzRm9ybUNvbnRhaW5lcjpcImstcmVzb3VyY2VzLWZvcm0tY29udGFpbmVyXCIsbWVzc2FnZTpcImstcG9wdXAtbWVzc2FnZVwiLGJ1dHRvbnNDb250YWluZXI6XCJrLWVkaXQtYnV0dG9ucyBrLXN0YXRlLWRlZmF1bHRcIixidXR0b246XCJrLWJ1dHRvblwiLGVkaXRGaWVsZDpcImstZWRpdC1maWVsZFwiLGVkaXRMYWJlbDpcImstZWRpdC1sYWJlbFwiLHJlc291cmNlc0ZpZWxkOlwiay1nYW50dC1yZXNvdXJjZXNcIn0sdG9vbGJhcjp7aGVhZGVyV3JhcHBlcjpcImstZmxvYXR3cmFwIGstaGVhZGVyIGstZ2FudHQtdG9vbGJhclwiLGZvb3RlcldyYXBwZXI6XCJrLWZsb2F0d3JhcCBrLWhlYWRlciBrLWdhbnR0LXRvb2xiYXJcIix0b29sYmFyOlwiay1nYW50dC10b29sYmFyXCIsdmlld3M6XCJrLWdhbnR0LXZpZXdzXCIsdmlld3NXcmFwcGVyOlwiay1yZXNldCBrLWhlYWRlciBrLWdhbnR0LXZpZXdzXCIsYWN0aW9uczpcImstZ2FudHQtYWN0aW9uc1wiLGJ1dHRvbjpcImstYnV0dG9uIGstYnV0dG9uLWljb250ZXh0XCIsaWNvblBsdXM6XCJrLWljb24gay1pLXBsdXNcIixpY29uUGRmOlwiay1pY29uIGstaS1wZGZcIix2aWV3QnV0dG9uRGVmYXVsdDpcImstc3RhdGUtZGVmYXVsdFwiLHZpZXdCdXR0b246XCJrLXZpZXdcIixsaW5rOlwiay1saW5rXCIscGRmQnV0dG9uOlwiay1nYW50dC1wZGZcIixhcHBlbmRCdXR0b246XCJrLWdhbnR0LWNyZWF0ZVwifX0sWD17YXBwZW5kOnt0ZXh0OlwiQWRkIFRhc2tcIixhY3Rpb246XCJhZGRcIixjbGFzc05hbWU6US50b29sYmFyLmFwcGVuZEJ1dHRvbixpY29uQ2xhc3M6US50b29sYmFyLmljb25QbHVzfSxwZGY6e3RleHQ6XCJFeHBvcnQgdG8gUERGXCIsY2xhc3NOYW1lOlEudG9vbGJhci5wZGZCdXR0b24saWNvbkNsYXNzOlEudG9vbGJhci5pY29uUGRmfX0sSj1tLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe20uZm4uaW5pdC5jYWxsKHRoaXMpLHRoaXMuZWxlbWVudD1lLHRoaXMub3B0aW9ucz1UKCEwLHt9LHRoaXMub3B0aW9ucyx0KSx0aGlzLl9wb3B1cCgpfSxvcHRpb25zOntkaXJlY3Rpb246XCJkb3duXCIsbmF2aWdhdGFibGU6ITF9LF9jdXJyZW50OmZ1bmN0aW9uKGUpe3ZhciB0PXAuc3R5bGVzLG49dGhpcy5saXN0LmZpbmQoTit0LmZvY3VzZWQpLGk9bltlXSgpO2kubGVuZ3RoJiYobi5yZW1vdmVDbGFzcyh0LmZvY3VzZWQpLnJlbW92ZUF0dHIoXCJpZFwiKSxpLmFkZENsYXNzKHQuZm9jdXNlZCkuYXR0cihcImlkXCIsSCksdGhpcy5saXN0LmZpbmQoXCJ1bFwiKS5yZW1vdmVBdHRyKEwpLmF0dHIoTCxIKSl9LF9wb3B1cDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj1wLnN0eWxlcyxpPVwibGlcIitOK24uaXRlbSxyPXRoaXMub3B0aW9ucy5tZXNzYWdlcy5hY3Rpb25zLG89dGhpcy5vcHRpb25zLm5hdmlnYXRhYmxlO3RoaXMubGlzdD1lKHEoe3N0eWxlczpuLGFjdGlvbnM6W3tkYXRhOlwiYWRkXCIsdGV4dDpyLmFkZENoaWxkfSx7ZGF0YTpcImluc2VydC1iZWZvcmVcIix0ZXh0OnIuaW5zZXJ0QmVmb3JlfSx7ZGF0YTpcImluc2VydC1hZnRlclwiLHRleHQ6ci5pbnNlcnRBZnRlcn1dfSkpLHRoaXMuZWxlbWVudC5hcHBlbmQodGhpcy5saXN0KSx0aGlzLnBvcHVwPW5ldyBmLnVpLlBvcHVwKHRoaXMubGlzdCxUKHthbmNob3I6dGhpcy5lbGVtZW50LG9wZW46ZnVuY3Rpb24oKXt0Ll9hZGp1c3RMaXN0V2lkdGgoKX0sYW5pbWF0aW9uOnRoaXMub3B0aW9ucy5hbmltYXRpb259LEJbdGhpcy5vcHRpb25zLmRpcmVjdGlvbl0pKSx0aGlzLmVsZW1lbnQub24oeitNLE4rbi50b29sYmFyLmFwcGVuZEJ1dHRvbixmdW5jdGlvbihpKXt2YXIgcj1lKHRoaXMpLGE9ci5hdHRyKGYuYXR0cihcImFjdGlvblwiKSk7aS5wcmV2ZW50RGVmYXVsdCgpLGE/dC50cmlnZ2VyKFwiY29tbWFuZFwiLHt0eXBlOmF9KToodC5wb3B1cC5vcGVuKCksbyYmdC5saXN0LmZpbmQoXCJsaTpmaXJzdFwiKS5hZGRDbGFzcyhuLmZvY3VzZWQpLmF0dHIoXCJpZFwiLEgpLmVuZCgpLmZpbmQoXCJ1bFwiKS5hdHRyKHtUQUJJTkRFWDowLFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCI6SH0pLmZvY3VzKCkpfSksdGhpcy5saXN0LmZpbmQoaSkuaG92ZXIoZnVuY3Rpb24oKXtlKHRoaXMpLmFkZENsYXNzKG4uaG92ZXJlZCl9LGZ1bmN0aW9uKCl7ZSh0aGlzKS5yZW1vdmVDbGFzcyhuLmhvdmVyZWQpfSkuZW5kKCkub24oeitNLGksZnVuY3Rpb24oKXt0LnRyaWdnZXIoXCJjb21tYW5kXCIse3R5cGU6ZSh0aGlzKS5hdHRyKGYuYXR0cihcImFjdGlvblwiKSl9KSx0LnBvcHVwLmNsb3NlKCl9KSxvJiYodGhpcy5wb3B1cC5iaW5kKFwiY2xvc2VcIixmdW5jdGlvbigpe3QubGlzdC5maW5kKGkpLnJlbW92ZUNsYXNzKG4uZm9jdXNlZCkuZW5kKCkuZmluZChcInVsXCIpLmF0dHIoSSwwKSx0LmVsZW1lbnQucGFyZW50cyhcIltcIitmLmF0dHIoXCJyb2xlXCIpKyc9XCJnYW50dFwiXScpLmZpbmQoTituLmdyaWRDb250ZW50K1wiID4gdGFibGU6Zmlyc3RcIikuZm9jdXMoKX0pLHRoaXMubGlzdC5maW5kKFwidWxcIikub24oXCJrZXlkb3duXCIrTSxmdW5jdGlvbihlKXt2YXIgaT1lLmtleUNvZGU7c3dpdGNoKGkpe2Nhc2UgRS5VUDplLnByZXZlbnREZWZhdWx0KCksdC5fY3VycmVudChcInByZXZcIik7YnJlYWs7Y2FzZSBFLkRPV046ZS5wcmV2ZW50RGVmYXVsdCgpLHQuX2N1cnJlbnQoXCJuZXh0XCIpO2JyZWFrO2Nhc2UgRS5FTlRFUjp0Lmxpc3QuZmluZChOK24uZm9jdXNlZCkuY2xpY2soKTticmVhaztjYXNlIEUuRVNDOmUucHJldmVudERlZmF1bHQoKSx0LnBvcHVwLmNsb3NlKCl9fSkpfSxfYWRqdXN0TGlzdFdpZHRoOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMubGlzdCxpPW5bMF0uc3R5bGUud2lkdGgscj10aGlzLmVsZW1lbnQ7KG4uZGF0YShGKXx8IWkpJiYoZT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZT93aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShyWzBdLG51bGwpOjAsdD1lP3BhcnNlRmxvYXQoZS53aWR0aCk6ci5vdXRlcldpZHRoKCksZSYmKGcubW96aWxsYXx8Zy5tc2llKSYmKHQrPXBhcnNlRmxvYXQoZS5wYWRkaW5nTGVmdCkrcGFyc2VGbG9hdChlLnBhZGRpbmdSaWdodCkrcGFyc2VGbG9hdChlLmJvcmRlckxlZnRXaWR0aCkrcGFyc2VGbG9hdChlLmJvcmRlclJpZ2h0V2lkdGgpKSxpPVwiYm9yZGVyLWJveFwiIT09bi5jc3MoXCJib3gtc2l6aW5nXCIpP3QtKG4ub3V0ZXJXaWR0aCgpLW4ud2lkdGgoKSk6dCxuLmNzcyh7Zm9udEZhbWlseTpyLmNzcyhcImZvbnQtZmFtaWx5XCIpLHdpZHRoOml9KS5kYXRhKEYsaSkpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wb3B1cC5kZXN0cm95KCksdGhpcy5lbGVtZW50Lm9mZihNKSx0aGlzLmxpc3Qub2ZmKE0pLHRoaXMudW5iaW5kKCl9fSksWj1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgaSxyO2lmKG49ayhpKT97ZGF0YTpufTpuLGk9bnx8e30scj1pLmRhdGEsaS5kYXRhPXIsIShpIGluc3RhbmNlb2YgZSkmJmkgaW5zdGFuY2VvZiBfKXRocm93IEVycm9yKFwiSW5jb3JyZWN0IERhdGFTb3VyY2UgdHlwZS4gT25seSBcIit0K1wiIGluc3RhbmNlcyBhcmUgc3VwcG9ydGVkXCIpO3JldHVybiBpIGluc3RhbmNlb2YgZT9pOm5ldyBlKGkpfX0sZXQ9Zi5kYXRhLk1vZGVsLmRlZmluZSh7aWQ6XCJpZFwiLGZpZWxkczp7aWQ6e3R5cGU6XCJudW1iZXJcIn0scHJlZGVjZXNzb3JJZDp7dHlwZTpcIm51bWJlclwifSxzdWNjZXNzb3JJZDp7dHlwZTpcIm51bWJlclwifSx0eXBlOnt0eXBlOlwibnVtYmVyXCJ9fX0pLHR0PV8uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe18uZm4uaW5pdC5jYWxsKHRoaXMsVCghMCx7fSx7c2NoZW1hOnttb2RlbEJhc2U6ZXQsbW9kZWw6ZXR9fSxlKSl9LHN1Y2Nlc3NvcnM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2RlcGVuZGVuY2llcyhcInByZWRlY2Vzc29ySWRcIixlKX0scHJlZGVjZXNzb3JzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9kZXBlbmRlbmNpZXMoXCJzdWNjZXNzb3JJZFwiLGUpfSxkZXBlbmRlbmNpZXM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wcmVkZWNlc3NvcnMoZSksbj10aGlzLnN1Y2Nlc3NvcnMoZSk7cmV0dXJuIHQucHVzaC5hcHBseSh0LG4pLHR9LF9kZXBlbmRlbmNpZXM6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLnZpZXcoKSxpPXtmaWVsZDplLG9wZXJhdG9yOlwiZXFcIix2YWx1ZTp0fTtyZXR1cm4gbj1uZXcgYihuKS5maWx0ZXIoaSkudG9BcnJheSgpfX0pO3R0LmNyZWF0ZT1aKHR0LFwiR2FudHREZXBlbmRlbmN5RGF0YVNvdXJjZVwiKSxzPWYuZGF0YS5Nb2RlbC5kZWZpbmUoe2R1cmF0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbmQsdD10aGlzLnN0YXJ0O3JldHVybiBlLXR9LGlzTWlsZXN0b25lOmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmR1cmF0aW9uKCl9LF9vZmZzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPVtcInN0YXJ0XCIsXCJlbmRcIl07Zm9yKG49MDtpLmxlbmd0aD5uO24rKyl0PW5ldyBEYXRlKHRoaXMuZ2V0KGlbbl0pLmdldFRpbWUoKStlKSx0aGlzLnNldChpW25dLHQpfSxpZDpcImlkXCIsZmllbGRzOntpZDp7dHlwZTpcIm51bWJlclwifSxwYXJlbnRJZDp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHRWYWx1ZTpudWxsLHZhbGlkYXRpb246e3JlcXVpcmVkOiEwfX0sb3JkZXJJZDp7dHlwZTpcIm51bWJlclwiLHZhbGlkYXRpb246e3JlcXVpcmVkOiEwfX0sdGl0bGU6e3R5cGU6XCJzdHJpbmdcIixkZWZhdWx0VmFsdWU6XCJcIn0sc3RhcnQ6e3R5cGU6XCJkYXRlXCIsdmFsaWRhdGlvbjp7cmVxdWlyZWQ6ITAsZGF0ZUNvbXBhcmU6cixtZXNzYWdlOlwiU3RhcnQgZGF0ZSBzaG91bGQgYmUgYmVmb3JlIG9yIGVxdWFsIHRvIHRoZSBlbmQgZGF0ZVwifX0sZW5kOnt0eXBlOlwiZGF0ZVwiLHZhbGlkYXRpb246e3JlcXVpcmVkOiEwLGRhdGVDb21wYXJlOnIsbWVzc2FnZTpcIkVuZCBkYXRlIHNob3VsZCBiZSBhZnRlciBvciBlcXVhbCB0byB0aGUgc3RhcnQgZGF0ZVwifX0scGVyY2VudENvbXBsZXRlOnt0eXBlOlwibnVtYmVyXCIsdmFsaWRhdGlvbjp7cmVxdWlyZWQ6ITAsbWluOjAsbWF4OjEsc3RlcDouMDF9fSxzdW1tYXJ5Ont0eXBlOlwiYm9vbGVhblwifSxleHBhbmRlZDp7dHlwZTpcImJvb2xlYW5cIixkZWZhdWx0VmFsdWU6ITB9fX0pLGw9Xy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7Xy5mbi5pbml0LmNhbGwodGhpcyxUKCEwLHt9LHtzY2hlbWE6e21vZGVsQmFzZTpzLG1vZGVsOnN9fSxlKSl9LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmdldChcInBhcmVudElkXCIpLG49dGhpcy50YXNrQWxsQ2hpbGRyZW4oZSk7cmV0dXJuIHRoaXMuX3JlbW92ZUl0ZW1zKG4pLGU9Xy5mbi5yZW1vdmUuY2FsbCh0aGlzLGUpLHRoaXMuX2NoaWxkUmVtb3ZlZCh0LGUuZ2V0KFwib3JkZXJJZFwiKSksZX0sYWRkOmZ1bmN0aW9uKGUpe3JldHVybiBlPyhlPXRoaXMuX3RvR2FudHRUYXNrKGUpLHRoaXMuaW5zZXJ0KHRoaXMudGFza1NpYmxpbmdzKGUpLmxlbmd0aCxlKSk6dH0saW5zZXJ0OmZ1bmN0aW9uKGUsbil7cmV0dXJuIG4/KG49dGhpcy5fdG9HYW50dFRhc2sobiksbi5zZXQoXCJvcmRlcklkXCIsZSksbj1fLmZuLmluc2VydC5jYWxsKHRoaXMsZSxuKSx0aGlzLl9yZW9yZGVyU2libGluZ3Mobix0aGlzLnRhc2tTaWJsaW5ncyhuKS5sZW5ndGgtMSksdGhpcy5fcmVzb2x2ZVN1bW1hcnlGaWVsZHModGhpcy50YXNrUGFyZW50KG4pKSxuKTp0fSx0YXNrQ2hpbGRyZW46ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLnZpZXcoKSxyPXtmaWVsZDpcInBhcmVudElkXCIsb3BlcmF0b3I6XCJlcVwiLHZhbHVlOm51bGx9LG89dGhpcy5fc29ydHx8e2ZpZWxkOlwib3JkZXJJZFwiLGRpcjpcImFzY1wifTtpZihlKXtpZihuPWUuZ2V0KFwiaWRcIiksbj09PXR8fG51bGw9PT1uKXJldHVybltdO3IudmFsdWU9bn1yZXR1cm4gaT1uZXcgYihpKS5maWx0ZXIocikuc29ydChvKS50b0FycmF5KCl9LHRhc2tBbGxDaGlsZHJlbjpmdW5jdGlvbihlKXt2YXIgdD1bXSxuPXRoaXMsaT1mdW5jdGlvbihlKXt2YXIgcj1uLnRhc2tDaGlsZHJlbihlKTt0LnB1c2guYXBwbHkodCxyKSxBKHIsaSl9O3JldHVybiBlP2koZSk6dD10aGlzLnZpZXcoKSx0fSx0YXNrU2libGluZ3M6ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIG51bGw7dmFyIHQ9dGhpcy50YXNrUGFyZW50KGUpO3JldHVybiB0aGlzLnRhc2tDaGlsZHJlbih0KX0sdGFza1BhcmVudDpmdW5jdGlvbihlKXtyZXR1cm4gZSYmbnVsbCE9PWUuZ2V0KFwicGFyZW50SWRcIik/dGhpcy5nZXQoZS5wYXJlbnRJZCk6bnVsbH0sdGFza0xldmVsOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLG49dGhpcy50YXNrUGFyZW50KGUpO251bGwhPT1uOyl0Kz0xLG49dGhpcy50YXNrUGFyZW50KG4pO3JldHVybiB0fSx0YXNrVHJlZTpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvPVtdLGE9dGhpcy50YXNrQ2hpbGRyZW4oZSk7Zm9yKG49MCxpPWEubGVuZ3RoO2k+bjtuKyspdD1hW25dLG8ucHVzaCh0KSx0LmdldChcImV4cGFuZGVkXCIpJiYocj10aGlzLnRhc2tUcmVlKHQpLG8ucHVzaC5hcHBseShvLHIpKTtyZXR1cm4gb30sdXBkYXRlOmZ1bmN0aW9uKGUsbil7dmFyIGkscixvPXRoaXMsYT1mdW5jdGlvbihlLHQpe3ZhciBuLGkscj1vLnRhc2tBbGxDaGlsZHJlbihlKTtmb3Iobj0wLGk9ci5sZW5ndGg7aT5uO24rKylyW25dLl9vZmZzZXQodCl9LHM9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5maWVsZCxuPWUuc2VuZGVyO3N3aXRjaCh0KXtjYXNlXCJzdGFydFwiOm8uX3Jlc29sdmVTdW1tYXJ5U3RhcnQoby50YXNrUGFyZW50KG4pKSxhKG4sbi5nZXQodCkuZ2V0VGltZSgpLWkuZ2V0VGltZSgpKTticmVhaztjYXNlXCJlbmRcIjpvLl9yZXNvbHZlU3VtbWFyeUVuZChvLnRhc2tQYXJlbnQobikpO2JyZWFrO2Nhc2VcInBlcmNlbnRDb21wbGV0ZVwiOm8uX3Jlc29sdmVTdW1tYXJ5UGVyY2VudENvbXBsZXRlKG8udGFza1BhcmVudChuKSk7YnJlYWs7Y2FzZVwib3JkZXJJZFwiOm8uX3Jlb3JkZXJTaWJsaW5ncyhuLGkpfX07bi5wYXJlbnRJZCE9PXQmJihpPWUuZ2V0KFwicGFyZW50SWRcIiksaSE9PW4ucGFyZW50SWQmJihlLnNldChcInBhcmVudElkXCIsbi5wYXJlbnRJZCksby5fY2hpbGRSZW1vdmVkKGksZS5nZXQoXCJvcmRlcklkXCIpKSxlLnNldChcIm9yZGVySWRcIixvLnRhc2tTaWJsaW5ncyhlKS5sZW5ndGgtMSksby5fcmVzb2x2ZVN1bW1hcnlGaWVsZHMoby50YXNrUGFyZW50KGUpKSksZGVsZXRlIG4ucGFyZW50SWQpLGUuYmluZChcImNoYW5nZVwiLHMpO2ZvcihyIGluIG4paT1lLmdldChyKSxlLnNldChyLG5bcl0pO2UudW5iaW5kKFwiY2hhbmdlXCIscyl9LF9yZXNvbHZlU3VtbWFyeUZpZWxkczpmdW5jdGlvbihlKXtlJiYodGhpcy5fdXBkYXRlU3VtbWFyeShlKSx0aGlzLnRhc2tDaGlsZHJlbihlKS5sZW5ndGgmJih0aGlzLl9yZXNvbHZlU3VtbWFyeVN0YXJ0KGUpLHRoaXMuX3Jlc29sdmVTdW1tYXJ5RW5kKGUpLHRoaXMuX3Jlc29sdmVTdW1tYXJ5UGVyY2VudENvbXBsZXRlKGUpKSl9LF9yZXNvbHZlU3VtbWFyeVN0YXJ0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1mdW5jdGlvbihlKXt2YXIgbixpLHIsbz10LnRhc2tDaGlsZHJlbihlKSxhPW9bMF0uc3RhcnQuZ2V0VGltZSgpO2ZvcihpPTEscj1vLmxlbmd0aDtyPmk7aSsrKW49b1tpXS5zdGFydC5nZXRUaW1lKCksYT5uJiYoYT1uKTtyZXR1cm4gbmV3IERhdGUoYSl9O3RoaXMuX3VwZGF0ZVN1bW1hcnlSZWN1cnNpdmUoZSxcInN0YXJ0XCIsbil9LF9yZXNvbHZlU3VtbWFyeUVuZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZnVuY3Rpb24oZSl7dmFyIG4saSxyLG89dC50YXNrQ2hpbGRyZW4oZSksYT1vWzBdLmVuZC5nZXRUaW1lKCk7Zm9yKGk9MSxyPW8ubGVuZ3RoO3I+aTtpKyspbj1vW2ldLmVuZC5nZXRUaW1lKCksbj5hJiYoYT1uKTtyZXR1cm4gbmV3IERhdGUoYSl9O3RoaXMuX3VwZGF0ZVN1bW1hcnlSZWN1cnNpdmUoZSxcImVuZFwiLG4pfSxfcmVzb2x2ZVN1bW1hcnlQZXJjZW50Q29tcGxldGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWZ1bmN0aW9uKGUpe3ZhciBuPXQudGFza0NoaWxkcmVuKGUpLGk9bmV3IGIobikuYWdncmVnYXRlKFt7ZmllbGQ6XCJwZXJjZW50Q29tcGxldGVcIixhZ2dyZWdhdGU6XCJhdmVyYWdlXCJ9XSk7cmV0dXJuIGkucGVyY2VudENvbXBsZXRlLmF2ZXJhZ2V9O3RoaXMuX3VwZGF0ZVN1bW1hcnlSZWN1cnNpdmUoZSxcInBlcmNlbnRDb21wbGV0ZVwiLG4pfSxfdXBkYXRlU3VtbWFyeVJlY3Vyc2l2ZTpmdW5jdGlvbihlLHQsbil7dmFyIGkscjtlJiYoaT1uKGUpLGUuc2V0KHQsaSkscj10aGlzLnRhc2tQYXJlbnQoZSksciYmdGhpcy5fdXBkYXRlU3VtbWFyeVJlY3Vyc2l2ZShyLHQsbikpfSxfY2hpbGRSZW1vdmVkOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPW51bGw9PT1lP251bGw6dGhpcy5nZXQoZSksbz10aGlzLnRhc2tDaGlsZHJlbihyKTtmb3Iobj10LGk9by5sZW5ndGg7aT5uO24rKylvW25dLnNldChcIm9yZGVySWRcIixuKTt0aGlzLl9yZXNvbHZlU3VtbWFyeUZpZWxkcyhyKX0sX3Jlb3JkZXJTaWJsaW5nczpmdW5jdGlvbihlLHQpe3ZhciBuLGk9ZS5nZXQoXCJvcmRlcklkXCIpLHI9aT50LG89cj90OmksYT1yP2k6dCxzPXI/bzpvKzEsbD10aGlzLnRhc2tTaWJsaW5ncyhlKTtmb3IoYT1NYXRoLm1pbihhLGwubGVuZ3RoLTEpLG49bzthPj1uO24rKylsW25dIT09ZSYmKGxbbl0uc2V0KFwib3JkZXJJZFwiLHMpLHMrPTEpfSxfdXBkYXRlU3VtbWFyeTpmdW5jdGlvbihlKXtpZihudWxsIT09ZSl7dmFyIHQ9dGhpcy50YXNrQ2hpbGRyZW4oZSkubGVuZ3RoO2Uuc2V0KFwic3VtbWFyeVwiLHQ+MCl9fSxfdG9HYW50dFRhc2s6ZnVuY3Rpb24oZSl7aWYoIShlIGluc3RhbmNlb2Ygcykpe3ZhciB0PWU7ZT10aGlzLl9jcmVhdGVOZXdNb2RlbCgpLGUuYWNjZXB0KHQpfXJldHVybiBlfX0pLGwuY3JlYXRlPVoobCxcIkdhbnR0RGF0YVNvdXJjZVwiKSxUKCEwLGYuZGF0YSx7R2FudHREYXRhU291cmNlOmwsR2FudHRUYXNrOnMsR2FudHREZXBlbmRlbmN5RGF0YVNvdXJjZTp0dCxHYW50dERlcGVuZGVuY3k6ZXR9KSxjPXtkZXNrdG9wOntkYXRlUmFuZ2U6WSxyZXNvdXJjZXM6S319LGQ9Zi5PYnNlcnZhYmxlLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe2YuT2JzZXJ2YWJsZS5mbi5pbml0LmNhbGwodGhpcyksdGhpcy5lbGVtZW50PWUsdGhpcy5vcHRpb25zPVQoITAse30sdGhpcy5vcHRpb25zLHQpLHRoaXMuY3JlYXRlQnV0dG9uPXRoaXMub3B0aW9ucy5jcmVhdGVCdXR0b259LGZpZWxkczpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT10aGlzLm9wdGlvbnMubWVzc2FnZXMuZWRpdG9yLHI9dGhpcy5vcHRpb25zLnJlc291cmNlcyxvPWZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxyLmVkaXRvcihuLmNvbnRhaW5lci5maW5kKE4rcC5zdHlsZXMucG9wdXAucmVzb3VyY2VzRmllbGQpLHQpfSxhPVt7ZmllbGQ6XCJ0aXRsZVwiLHRpdGxlOmkudGl0bGV9LHtmaWVsZDpcInN0YXJ0XCIsdGl0bGU6aS5zdGFydCxlZGl0b3I6ZS5kYXRlUmFuZ2V9LHtmaWVsZDpcImVuZFwiLHRpdGxlOmkuZW5kLGVkaXRvcjplLmRhdGVSYW5nZX0se2ZpZWxkOlwicGVyY2VudENvbXBsZXRlXCIsdGl0bGU6aS5wZXJjZW50Q29tcGxldGUsZm9ybWF0OlB9XTtyZXR1cm4gdC5nZXQoci5maWVsZCkmJmEucHVzaCh7ZmllbGQ6ci5maWVsZCx0aXRsZTppLnJlc291cmNlcyxtZXNzYWdlczppLGVkaXRvcjplLnJlc291cmNlcyxjbGljazpvLHN0eWxlczpwLnN0eWxlcy5wb3B1cH0pLGF9LF9idWlsZEVkaXRUZW1wbGF0ZTpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGEscz10aGlzLm9wdGlvbnMucmVzb3VyY2VzLGw9dGhpcy5vcHRpb25zLmVkaXRhYmxlLnRlbXBsYXRlLGM9VCh7fSxmLlRlbXBsYXRlLHRoaXMub3B0aW9ucy50ZW1wbGF0ZVNldHRpbmdzKSxkPWMucGFyYW1OYW1lLHU9cC5zdHlsZXMucG9wdXAsaD1cIlwiO2lmKGwpdHlwZW9mIGw9PT1SJiYobD13aW5kb3cudW5lc2NhcGUobCkpLGgrPWYudGVtcGxhdGUobCxjKShlKTtlbHNlIGZvcihpPTAscj10Lmxlbmd0aDtyPmk7aSsrKW89dFtpXSxoKz0nPGRpdiBjbGFzcz1cIicrdS5lZGl0TGFiZWwrJ1wiPjxsYWJlbCBmb3I9XCInK28uZmllbGQrJ1wiPicrKG8udGl0bGV8fG8uZmllbGR8fFwiXCIpK1wiPC9sYWJlbD48L2Rpdj5cIixvLmZpZWxkPT09cy5maWVsZCYmKGgrPSc8ZGl2IGNsYXNzPVwiJyt1LnJlc291cmNlc0ZpZWxkKydcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPjwvZGl2PicpLCFlLmVkaXRhYmxlfHxlLmVkaXRhYmxlKG8uZmllbGQpPyhuLnB1c2gobyksaCs9XCI8ZGl2IFwiK2YuYXR0cihcImNvbnRhaW5lci1mb3JcIikrJz1cIicrby5maWVsZCsnXCIgY2xhc3M9XCInK3UuZWRpdEZpZWxkKydcIj48L2Rpdj4nKTooYT1cIiM6XCIsby5maWVsZD8obz1mLmV4cHIoby5maWVsZCxkKSxhKz1vK1wiPT1udWxsPycnOlwiK28pOmErPVwiJydcIixhKz1cIiNcIixhPWYudGVtcGxhdGUoYSxjKSxoKz0nPGRpdiBjbGFzcz1cIicrdS5lZGl0RmllbGQrJ1wiPicrYShlKStcIjwvZGl2PlwiKTtyZXR1cm4gaH19KSx1PWQuZXh0ZW5kKHtkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5jbG9zZSgpLHRoaXMudW5iaW5kKCl9LGVkaXRUYXNrOmZ1bmN0aW9uKGUpe3RoaXMuZWRpdGFibGU9dGhpcy5fY3JlYXRlUG9wdXBFZGl0b3IoZSl9LGNsb3NlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWZ1bmN0aW9uKCl7ZS5lZGl0YWJsZSYmKGUuZWRpdGFibGUuZGVzdHJveSgpLGUuZWRpdGFibGU9bnVsbCxlLmNvbnRhaW5lcj1udWxsKSxlLnBvcHVwJiYoZS5wb3B1cC5kZXN0cm95KCksZS5wb3B1cD1udWxsKX07dGhpcy5lZGl0YWJsZSYmdGhpcy5jb250YWluZXIuaXMoXCI6dmlzaWJsZVwiKT90aGlzLmNvbnRhaW5lci5kYXRhKFwia2VuZG9XaW5kb3dcIikuYmluZChcImRlYWN0aXZhdGVcIix0KS5jbG9zZSgpOnQoKX0sc2hvd0RpYWxvZzpmdW5jdGlvbih0KXt2YXIgbixpLHIsbyxhPXQuYnV0dG9ucyxzPXAuc3R5bGVzLnBvcHVwLGw9Zi5mb3JtYXQoJzxkaXYgY2xhc3M9XCJ7MH1cIj48ZGl2IGNsYXNzPVwiezF9XCI+PHAgY2xhc3M9XCJ7Mn1cIj57M308L3A+PGRpdiBjbGFzcz1cIns0fVwiPicscy5mb3JtLHMuZm9ybUNvbnRhaW5lcixzLm1lc3NhZ2UsdC50ZXh0LHMuYnV0dG9uc0NvbnRhaW5lcik7Zm9yKG49MCxpPWEubGVuZ3RoO2k+bjtuKyspbCs9dGhpcy5jcmVhdGVCdXR0b24oYVtuXSk7bCs9XCI8L2Rpdj48L2Rpdj48L2Rpdj5cIixyPXRoaXMuZWxlbWVudCx0aGlzLnBvcHVwJiZ0aGlzLnBvcHVwLmRlc3Ryb3koKSxvPXRoaXMucG9wdXA9ZShsKS5hcHBlbmRUbyhyKS5lcSgwKS5vbihcImNsaWNrXCIsTitzLmJ1dHRvbixmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksby5jbG9zZSgpO3ZhciBuPWUodC5jdXJyZW50VGFyZ2V0KS5pbmRleCgpO2Fbbl0uY2xpY2soKX0pLmtlbmRvV2luZG93KHttb2RhbDohMCxyZXNpemFibGU6ITEsZHJhZ2dhYmxlOiExLHRpdGxlOnQudGl0bGUsdmlzaWJsZTohMSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuZGVzdHJveSgpLHIuZm9jdXMoKX19KS5nZXRLZW5kb1dpbmRvdygpLG8uY2VudGVyKCkub3BlbigpfSxfY3JlYXRlUG9wdXBFZGl0b3I6ZnVuY3Rpb24odCl7dmFyIG4saSxyPXRoaXMsbz17fSxhPXRoaXMub3B0aW9ucy5tZXNzYWdlcyxzPXAuc3R5bGVzLGw9cy5wb3B1cCxkPWYuZm9ybWF0KCc8ZGl2IHswfT1cInsxfVwiIGNsYXNzPVwiezJ9IHszfVwiPjxkaXYgY2xhc3M9XCJ7NH1cIj4nLGYuYXR0cihcInVpZFwiKSx0LnVpZCxsLmZvcm0sbC5lZGl0Rm9ybSxsLmZvcm1Db250YWluZXIpLHU9dGhpcy5maWVsZHMoYy5kZXNrdG9wLHQpLGg9W107cmV0dXJuIGQrPXRoaXMuX2J1aWxkRWRpdFRlbXBsYXRlKHQsdSxoKSxkKz0nPGRpdiBjbGFzcz1cIicrbC5idXR0b25zQ29udGFpbmVyKydcIj4nLGQrPXRoaXMuY3JlYXRlQnV0dG9uKHtuYW1lOlwidXBkYXRlXCIsdGV4dDphLnNhdmUsY2xhc3NOYW1lOnAuc3R5bGVzLnByaW1hcnl9KSxkKz10aGlzLmNyZWF0ZUJ1dHRvbih7bmFtZTpcImNhbmNlbFwiLHRleHQ6YS5jYW5jZWx9KSxkKz10aGlzLmNyZWF0ZUJ1dHRvbih7bmFtZTpcImRlbGV0ZVwiLHRleHQ6YS5kZXN0cm95fSksZCs9XCI8L2Rpdj48L2Rpdj48L2Rpdj5cIixuPXRoaXMuY29udGFpbmVyPWUoZCkuYXBwZW5kVG8odGhpcy5lbGVtZW50KS5lcSgwKS5rZW5kb1dpbmRvdyhUKHttb2RhbDohMCxyZXNpemFibGU6ITEsZHJhZ2dhYmxlOiEwLHRpdGxlOmEuZWRpdG9yLmVkaXRvclRpdGxlLHZpc2libGU6ITEsY2xvc2U6ZnVuY3Rpb24oZSl7ZS51c2VyVHJpZ2dlcmVkJiZyLnRyaWdnZXIoXCJjYW5jZWxcIix7Y29udGFpbmVyOm4sbW9kZWw6dH0pJiZlLnByZXZlbnREZWZhdWx0KCl9fSxvKSksaT1uLmtlbmRvRWRpdGFibGUoe2ZpZWxkczpoLG1vZGVsOnQsY2xlYXJDb250YWluZXI6ITEsdmFsaWRhdGVPbkJsdXI6ITAsdGFyZ2V0OnIub3B0aW9ucy50YXJnZXR9KS5kYXRhKFwia2VuZG9FZGl0YWJsZVwiKSx0aGlzLnRyaWdnZXIoXCJlZGl0XCIse2NvbnRhaW5lcjpuLG1vZGVsOnR9KT9yLnRyaWdnZXIoXCJjYW5jZWxcIix7Y29udGFpbmVyOm4sbW9kZWw6dH0pOihuLmRhdGEoXCJrZW5kb1dpbmRvd1wiKS5jZW50ZXIoKS5vcGVuKCksbi5vbih6K00sTitzLmJ1dHRvbkNhbmNlbCxmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSxyLnRyaWdnZXIoXCJjYW5jZWxcIix7Y29udGFpbmVyOm4sbW9kZWw6dH0pfSksbi5vbih6K00sTitzLmJ1dHRvblNhdmUsZnVuY3Rpb24oZSl7dmFyIGksbyxhLHMsbDtmb3IoZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksaT1yLmZpZWxkcyhjLmRlc2t0b3AsdCksbz17fSxzPTAsbD1pLmxlbmd0aDtsPnM7cysrKWE9aVtzXS5maWVsZCxvW2FdPXQuZ2V0KGEpO3IudHJpZ2dlcihcInNhdmVcIix7Y29udGFpbmVyOm4sbW9kZWw6dCx1cGRhdGVJbmZvOm99KX0pLG4ub24oeitNLE4rcy5idXR0b25EZWxldGUsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksci50cmlnZ2VyKFwicmVtb3ZlXCIse2NvbnRhaW5lcjpuLG1vZGVsOnR9KX0pKSxpfX0pLGg9di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2LmZuLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy53cmFwcGVyPXRoaXMuZWxlbWVudCx0aGlzLm1vZGVsPXRoaXMub3B0aW9ucy5tb2RlbCx0aGlzLnJlc291cmNlc0ZpZWxkPXRoaXMub3B0aW9ucy5yZXNvdXJjZXNGaWVsZCx0aGlzLmNyZWF0ZUJ1dHRvbj10aGlzLm9wdGlvbnMuY3JlYXRlQnV0dG9uLHRoaXMuX2luaXRDb250YWluZXIoKSx0aGlzLl9hdHRhY2hIYW5kbGVycygpfSxldmVudHM6W1wic2F2ZVwiXSxvcGVuOmZ1bmN0aW9uKCl7dGhpcy53aW5kb3cuY2VudGVyKCkub3BlbigpLHRoaXMuZ3JpZC5yZXNpemUoITApfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMud2luZG93LmJpbmQoXCJkZWFjdGl2YXRlXCIsUyh0aGlzLmRlc3Ryb3ksdGhpcykpLmNsb3NlKClcclxufSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fZGV0dGFjaEhhbmRsZXJzKCksdGhpcy5ncmlkLmRlc3Ryb3koKSx0aGlzLmdyaWQ9bnVsbCx0aGlzLndpbmRvdy5kZXN0cm95KCksdGhpcy53aW5kb3c9bnVsbCx2LmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSxmLmRlc3Ryb3kodGhpcy53cmFwcGVyKSx0aGlzLmVsZW1lbnQ9dGhpcy53cmFwcGVyPW51bGx9LF9hdHRhY2hIYW5kbGVyczpmdW5jdGlvbigpe3ZhciB0PXAuc3R5bGVzLG49dGhpcy5ncmlkLGk9dGhpcy5fY2FuY2VsUHJveHk9Uyh0aGlzLl9jYW5jZWwsdGhpcyk7dGhpcy5jb250YWluZXIub24oeitNLE4rdC5idXR0b25DYW5jZWwsdGhpcy5fY2FuY2VsUHJveHkpLHRoaXMuX3NhdmVQcm94eT1TKHRoaXMuX3NhdmUsdGhpcyksdGhpcy5jb250YWluZXIub24oeitNLE4rdC5idXR0b25TYXZlLHRoaXMuX3NhdmVQcm94eSksdGhpcy53aW5kb3cuYmluZChcImNsb3NlXCIsZnVuY3Rpb24oZSl7ZS51c2VyVHJpZ2dlcmVkJiZpKGUpfSksbi53cmFwcGVyLm9uKHorTSxcImlucHV0W3R5cGU9J2NoZWNrYm94J11cIixmdW5jdGlvbigpe3ZhciB0PWUodGhpcyksaT1lKHQpLmNsb3Nlc3QoXCJ0clwiKSxyPW4uZGF0YVNvdXJjZS5nZXRCeVVpZChpLmF0dHIoZi5hdHRyKFwidWlkXCIpKSksbz1lKHQpLmlzKFwiOmNoZWNrZWRcIik/MTpcIlwiO3Iuc2V0KFwidmFsdWVcIixvKX0pfSxfZGV0dGFjaEhhbmRsZXJzOmZ1bmN0aW9uKCl7dGhpcy5fY2FuY2VsUHJveHk9bnVsbCx0aGlzLl9zYXZlUHJveHk9bnVsbCx0aGlzLmNvbnRhaW5lci5vZmYoTSksdGhpcy5ncmlkLndyYXBwZXIub2ZmKCl9LF9jYW5jZWw6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuY2xvc2UoKX0sX3NhdmU6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX3VwZGF0ZU1vZGVsKCksdGhpcy53cmFwcGVyLmlzKE4rcC5zdHlsZXMucG9wdXAucmVzb3VyY2VzRmllbGQpfHx0aGlzLnRyaWdnZXIoXCJzYXZlXCIse2NvbnRhaW5lcjp0aGlzLndyYXBwZXIsbW9kZWw6dGhpcy5tb2RlbH0pLHRoaXMuY2xvc2UoKX0sX2luaXRDb250YWluZXI6ZnVuY3Rpb24oKXt2YXIgdD1wLnN0eWxlcy5wb3B1cCxuPWYuZm9ybWF0KCc8ZGl2IGNsYXNzPVwiezB9IHsxfVwiPjxkaXYgY2xhc3M9XCJ7Mn0gezN9XCIvPjwvZGl2PlwiJyx0LmZvcm0sdC5lZGl0Rm9ybSx0LmZvcm1Db250YWluZXIsdC5yZXNvdXJjZXNGb3JtQ29udGFpbmVyKTtuPWUobiksdGhpcy5jb250YWluZXI9bi5maW5kKE4rdC5yZXNvdXJjZXNGb3JtQ29udGFpbmVyKSx0aGlzLndpbmRvdz1uLmtlbmRvV2luZG93KHttb2RhbDohMCxyZXNpemFibGU6ITEsZHJhZ2dhYmxlOiEwLHZpc2libGU6ITEsdGl0bGU6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLnJlc291cmNlc0VkaXRvclRpdGxlfSkuZGF0YShcImtlbmRvV2luZG93XCIpLHRoaXMuX3Jlc291cmNlR3JpZCgpLHRoaXMuX2NyZWF0ZUJ1dHRvbnMoKX0sX3Jlc291cmNlR3JpZDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10aGlzLm9wdGlvbnMubWVzc2FnZXMsaT1lKCc8ZGl2IGlkPVwicmVzb3VyY2VzLWdyaWRcIi8+JykuYXBwZW5kVG8odGhpcy5jb250YWluZXIpO3RoaXMuZ3JpZD1uZXcgZi51aS5HcmlkKGkse2NvbHVtbnM6W3tmaWVsZDpcIm5hbWVcIix0aXRsZTpuLnJlc291cmNlc0hlYWRlcix0ZW1wbGF0ZTpcIjxsYWJlbD48aW5wdXQgdHlwZT0nY2hlY2tib3gnIHZhbHVlPScjPW5hbWUjJyMgaWYgKHZhbHVlID4gMCAmJiB2YWx1ZSAhPT0gbnVsbCkgeyNjaGVja2VkPSdjaGVja2VkJyMgfSAjLz4jPW5hbWUjPC9sYWJlPlwifSx7ZmllbGQ6XCJ2YWx1ZVwiLHRpdGxlOm4udW5pdHNIZWFkZXIsdGVtcGxhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5mb3JtYXQsbj1udWxsIT09ZS52YWx1ZT9lLnZhbHVlOlwiXCI7cmV0dXJuIHQ/Zi50b1N0cmluZyhuLHQpOm59fV0saGVpZ2h0OjI4MCxzb3J0YWJsZTohMCxlZGl0YWJsZTohMCxmaWx0ZXJhYmxlOiEwLGRhdGFTb3VyY2U6e2RhdGE6dC5vcHRpb25zLmRhdGEsc2NoZW1hOnttb2RlbDp7aWQ6XCJpZFwiLGZpZWxkczp7aWQ6e2Zyb206XCJpZFwiLHR5cGU6XCJudW1iZXJcIn0sbmFtZTp7ZnJvbTpcIm5hbWVcIix0eXBlOlwic3RyaW5nXCIsZWRpdGFibGU6ITF9LHZhbHVlOntmcm9tOlwidmFsdWVcIix0eXBlOlwibnVtYmVyXCIsZGVmYXVsdFZhbHVlOlwiXCJ9LGZvcm1hdDp7ZnJvbTpcImZvcm1hdFwiLHR5cGU6XCJzdHJpbmdcIn19fX19LHNhdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9ISFlLnZhbHVlcy52YWx1ZTtlLmNvbnRhaW5lci5wYXJlbnQoKS5maW5kKFwiaW5wdXRbdHlwZT0nY2hlY2tib3gnXVwiKS5wcm9wKFwiY2hlY2tlZFwiLHQpfX0pfSxfY3JlYXRlQnV0dG9uczpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLm9wdGlvbnMuYnV0dG9ucyxpPSc8ZGl2IGNsYXNzPVwiJytwLnN0eWxlcy5wb3B1cC5idXR0b25zQ29udGFpbmVyKydcIj4nO2ZvcihlPTAsdD1uLmxlbmd0aDt0PmU7ZSsrKWkrPXRoaXMuY3JlYXRlQnV0dG9uKG5bZV0pO2krPVwiPC9kaXY+XCIsdGhpcy5jb250YWluZXIuYXBwZW5kKGkpfSxfdXBkYXRlTW9kZWw6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT1bXSxyPXRoaXMuZ3JpZC5kYXRhU291cmNlLmRhdGEoKTtmb3IodD0wLG49ci5sZW5ndGg7bj50O3QrKyllPXJbdF0uZ2V0KFwidmFsdWVcIiksbnVsbCE9PWUmJmU+MCYmaS5wdXNoKHJbdF0pO3RoaXMubW9kZWxbdGhpcy5yZXNvdXJjZXNGaWVsZF09aX19KSxwPXYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7ayh0KSYmKHQ9e2RhdGFTb3VyY2U6dH0pLHYuZm4uaW5pdC5jYWxsKHRoaXMsZSx0KSx0aGlzLl93cmFwcGVyKCksdGhpcy5fcmVzb3VyY2VzKCksdGhpcy5fdGltZWxpbmUoKSx0aGlzLl90b29sYmFyKCksdGhpcy5fZm9vdGVyKCksdGhpcy5fYWRqdXN0RGltZW5zaW9ucygpLHRoaXMuX3ByZXZlbnRSZWZyZXNoPSEwLHRoaXMudmlldyh0aGlzLnRpbWVsaW5lLl9zZWxlY3RlZFZpZXdOYW1lKSx0aGlzLl9wcmV2ZW50UmVmcmVzaD0hMSx0aGlzLl9kYXRhU291cmNlKCksdGhpcy5fYXNzaWdubWVudHMoKSx0aGlzLl9kcm9wRG93bnMoKSx0aGlzLl9saXN0KCksdGhpcy5fZGVwZW5kZW5jaWVzKCksdGhpcy5fcmVzaXphYmxlKCksdGhpcy5fc2Nyb2xsYWJsZSgpLHRoaXMuX2RhdGFCaW5kKCksdGhpcy5fYXR0YWNoRXZlbnRzKCksdGhpcy5fY3JlYXRlRWRpdG9yKCksZi5ub3RpZnkodGhpcyl9LGV2ZW50czpbXCJkYXRhQmluZGluZ1wiLFwiZGF0YUJvdW5kXCIsXCJhZGRcIixcImVkaXRcIixcInJlbW92ZVwiLFwiY2FuY2VsXCIsXCJzYXZlXCIsXCJjaGFuZ2VcIixcIm5hdmlnYXRlXCIsXCJtb3ZlU3RhcnRcIixcIm1vdmVcIixcIm1vdmVFbmRcIixcInJlc2l6ZVN0YXJ0XCIsXCJyZXNpemVcIixcInJlc2l6ZUVuZFwiXSxvcHRpb25zOntuYW1lOlwiR2FudHRcIixhdXRvQmluZDohMCxuYXZpZ2F0YWJsZTohMSxzZWxlY3RhYmxlOiEwLGVkaXRhYmxlOiEwLGNvbHVtbnM6W10sdmlld3M6W10sZGF0YVNvdXJjZTp7fSxkZXBlbmRlbmNpZXM6e30scmVzb3VyY2VzOnt9LGFzc2lnbm1lbnRzOnt9LG1lc3NhZ2VzOntzYXZlOlwiU2F2ZVwiLGNhbmNlbDpcIkNhbmNlbFwiLGRlc3Ryb3k6XCJEZWxldGVcIixkZWxldGVUYXNrV2luZG93VGl0bGU6XCJEZWxldGUgdGFza1wiLGRlbGV0ZURlcGVuZGVuY3lXaW5kb3dUaXRsZTpcIkRlbGV0ZSBkZXBlbmRlbmN5XCIsdmlld3M6e2RheTpcIkRheVwiLHdlZWs6XCJXZWVrXCIsbW9udGg6XCJNb250aFwiLHllYXI6XCJZZWFyXCJ9LGFjdGlvbnM6e2FwcGVuZDpcIkFkZCBUYXNrXCIsYWRkQ2hpbGQ6XCJBZGQgQ2hpbGRcIixpbnNlcnRCZWZvcmU6XCJBZGQgQWJvdmVcIixpbnNlcnRBZnRlcjpcIkFkZCBCZWxvd1wiLHBkZjpcIkV4cG9ydCB0byBQREZcIn0sZWRpdG9yOntlZGl0b3JUaXRsZTpcIlRhc2tcIixyZXNvdXJjZXNFZGl0b3JUaXRsZTpcIlJlc291cmNlc1wiLHRpdGxlOlwiVGl0bGVcIixzdGFydDpcIlN0YXJ0XCIsZW5kOlwiRW5kXCIscGVyY2VudENvbXBsZXRlOlwiQ29tcGxldGVcIixyZXNvdXJjZXM6XCJSZXNvdXJjZXNcIixhc3NpbmdCdXR0b246XCJBc3NpZ25cIixyZXNvdXJjZXNIZWFkZXI6XCJSZXNvdXJjZXNcIix1bml0c0hlYWRlcjpcIlVuaXRzXCJ9fSxzaG93V29ya0hvdXJzOiEwLHNob3dXb3JrRGF5czohMCx3b3JrRGF5U3RhcnQ6bmV3IERhdGUoMTk4MCwxLDEsOCwwLDApLHdvcmtEYXlFbmQ6bmV3IERhdGUoMTk4MCwxLDEsMTcsMCwwKSx3b3JrV2Vla1N0YXJ0OjEsd29ya1dlZWtFbmQ6NSxob3VyU3BhbjoxLHNuYXA6ITAsaGVpZ2h0OjYwMCxsaXN0V2lkdGg6XCIzMCVcIn0sc2VsZWN0OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMubGlzdDtyZXR1cm4gZT8obi5zZWxlY3QoZSksdCk6bi5zZWxlY3QoKX0sY2xlYXJTZWxlY3Rpb246ZnVuY3Rpb24oKXt0aGlzLmxpc3QuY2xlYXJTZWxlY3Rpb24oKX0sZGVzdHJveTpmdW5jdGlvbigpe3YuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuZGF0YVNvdXJjZSYmKHRoaXMuZGF0YVNvdXJjZS51bmJpbmQoXCJjaGFuZ2VcIix0aGlzLl9yZWZyZXNoSGFuZGxlciksdGhpcy5kYXRhU291cmNlLnVuYmluZChcInByb2dyZXNzXCIsdGhpcy5fcHJvZ3Jlc3NIYW5kbGVyKSx0aGlzLmRhdGFTb3VyY2UudW5iaW5kKFwiZXJyb3JcIix0aGlzLl9lcnJvckhhbmRsZXIpKSx0aGlzLmRlcGVuZGVuY2llcyYmKHRoaXMuZGVwZW5kZW5jaWVzLnVuYmluZChcImNoYW5nZVwiLHRoaXMuX2RlcGVuZGVuY3lSZWZyZXNoSGFuZGxlciksdGhpcy5kZXBlbmRlbmNpZXMudW5iaW5kKFwiZXJyb3JcIix0aGlzLl9kZXBlbmRlbmN5RXJyb3JIYW5kbGVyKSksdGhpcy50aW1lbGluZSYmKHRoaXMudGltZWxpbmUudW5iaW5kKCksdGhpcy50aW1lbGluZS5kZXN0cm95KCkpLHRoaXMubGlzdCYmKHRoaXMubGlzdC51bmJpbmQoKSx0aGlzLmxpc3QuZGVzdHJveSgpKSx0aGlzLmZvb3RlckRyb3BEb3duJiZ0aGlzLmZvb3RlckRyb3BEb3duLmRlc3Ryb3koKSx0aGlzLmhlYWRlckRyb3BEb3duJiZ0aGlzLmhlYWRlckRyb3BEb3duLmRlc3Ryb3koKSx0aGlzLl9lZGl0b3ImJnRoaXMuX2VkaXRvci5kZXN0cm95KCksdGhpcy5fcmVzaXplRHJhZ2dhYmxlJiZ0aGlzLl9yZXNpemVEcmFnZ2FibGUuZGVzdHJveSgpLHRoaXMudG9vbGJhci5vZmYoTSksZSh3aW5kb3cpLm9mZihcInJlc2l6ZVwiK00sdGhpcy5fcmVzaXplSGFuZGxlciksZSh0aGlzLndyYXBwZXIpLm9mZihNKSx0aGlzLnRvb2xiYXI9bnVsbCx0aGlzLmZvb3Rlcj1udWxsfSxfYXR0YWNoRXZlbnRzOmZ1bmN0aW9uKCl7dGhpcy5fcmVzaXplSGFuZGxlcj1TKHRoaXMucmVzaXplLHRoaXMpLGUod2luZG93KS5vbihcInJlc2l6ZVwiK00sdGhpcy5fcmVzaXplSGFuZGxlcil9LF93cmFwcGVyOmZ1bmN0aW9uKCl7dmFyIGU9cC5zdHlsZXMsdD1bZS5pY29uLGUucmVzaXplSGFuZGxlXS5qb2luKFwiIFwiKSxuPXRoaXMub3B0aW9ucyxpPW4uaGVpZ2h0LHI9bi53aWR0aDt0aGlzLndyYXBwZXI9dGhpcy5lbGVtZW50LmFkZENsYXNzKGUud3JhcHBlcikuYXBwZW5kKFwiPGRpdiBjbGFzcz0nXCIrZS5saXN0V3JhcHBlcitcIic+PGRpdj48L2Rpdj48L2Rpdj5cIikuYXBwZW5kKFwiPGRpdiBjbGFzcz0nXCIrZS5zcGxpdEJhcldyYXBwZXIrXCInPjxkaXYgY2xhc3M9J1wiK3QrXCInPjwvZGl2PjwvZGl2PlwiKS5hcHBlbmQoXCI8ZGl2IGNsYXNzPSdcIitlLnRpbWVsaW5lV3JhcHBlcitcIic+PGRpdj48L2Rpdj48L2Rpdj5cIiksdGhpcy53cmFwcGVyLmZpbmQoTitlLmxpc3QpLndpZHRoKG4ubGlzdFdpZHRoKSxpJiZ0aGlzLndyYXBwZXIuaGVpZ2h0KGkpLHImJnRoaXMud3JhcHBlci53aWR0aChyKX0sX3Rvb2xiYXI6ZnVuY3Rpb24oKXt2YXIgdCxuLGk9dGhpcyxyPXAuc3R5bGVzLG89TityLnRvb2xiYXIudmlld3MrXCIgPiBsaVwiLGE9TityLnRvb2xiYXIucGRmQnV0dG9uLHM9ci5ob3ZlcmVkLGw9dGhpcy5vcHRpb25zLnRvb2xiYXIsYz1lKFwiPGRpdiBjbGFzcz0nXCIrci50b29sYmFyLmFjdGlvbnMrXCInPlwiKTtDKGwpfHwobD10eXBlb2YgbD09PVI/bDp0aGlzLl9hY3Rpb25zKGwpLGw9UyhmLnRlbXBsYXRlKGwpLHRoaXMpKSxuPWUoRyh7bnM6Zi5ucyx2aWV3czp0aGlzLnRpbWVsaW5lLnZpZXdzLHN0eWxlczpyLnRvb2xiYXJ9KSksYy5hcHBlbmQobCh7fSkpLHQ9ZShcIjxkaXYgY2xhc3M9J1wiK3IudG9vbGJhci5oZWFkZXJXcmFwcGVyK1wiJz5cIikuYXBwZW5kKGMpLmFwcGVuZChuKSx0aGlzLndyYXBwZXIucHJlcGVuZCh0KSx0aGlzLnRvb2xiYXI9dCx0Lm9uKHorTSxvLGZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKTt2YXIgbj1lKHRoaXMpLmF0dHIoZi5hdHRyKFwibmFtZVwiKSk7aS50cmlnZ2VyKFwibmF2aWdhdGVcIix7dmlldzpufSl8fGkudmlldyhuKX0pLm9uKHorTSxhLGZ1bmN0aW9uKCl7aS5zYXZlQXNQREYoKX0pLHRoaXMud3JhcHBlci5maW5kKE4rci50b29sYmFyLnRvb2xiYXIrXCIgbGlcIikuaG92ZXIoZnVuY3Rpb24oKXtlKHRoaXMpLmFkZENsYXNzKHMpfSxmdW5jdGlvbigpe2UodGhpcykucmVtb3ZlQ2xhc3Mocyl9KX0sX2FjdGlvbnM6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy5vcHRpb25zLGk9bi50b29sYmFyLHI9XCJcIjtpZighayhpKSl7aWYoIW4uZWRpdGFibGUpcmV0dXJuIHI7aT1bXCJhcHBlbmRcIl19Zm9yKGU9MCx0PWkubGVuZ3RoO3Q+ZTtlKyspcis9dGhpcy5fY3JlYXRlQnV0dG9uKGlbZV0pO3JldHVybiByfSxfZm9vdGVyOmZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLmVkaXRhYmxlKXt2YXIgdD1lKCQoe3N0eWxlczpwLnN0eWxlcy50b29sYmFyLGFjdGlvbjp7ZGF0YTpcImFkZFwiLHRpdGxlOnRoaXMub3B0aW9ucy5tZXNzYWdlcy5hY3Rpb25zLmFwcGVuZH19KSk7dGhpcy53cmFwcGVyLmFwcGVuZCh0KSx0aGlzLmZvb3Rlcj10fX0sX2NyZWF0ZUJ1dHRvbjpmdW5jdGlvbihlKXt2YXIgdD1lLnRlbXBsYXRlfHxXLG49dGhpcy5vcHRpb25zLm1lc3NhZ2VzLmFjdGlvbnMsaT10eXBlb2YgZT09PVI/ZTplLm5hbWV8fGUudGV4dCxyPVhbaV0/WFtpXS5jbGFzc05hbWU6XCJrLWdhbnR0LVwiKyhpfHxcIlwiKS5yZXBsYWNlKC9cXHMvZyxcIlwiKSxvPXtpY29uQ2xhc3M6XCJcIixhY3Rpb246XCJcIix0ZXh0OmksY2xhc3NOYW1lOnIsc3R5bGVzOnAuc3R5bGVzLnRvb2xiYXJ9O2lmKCEoaXx8RChlKSYmZS50ZW1wbGF0ZSkpdGhyb3cgRXJyb3IoXCJDdXN0b20gY29tbWFuZHMgc2hvdWxkIGhhdmUgbmFtZSBzcGVjaWZpZWRcIik7cmV0dXJuIG89VCghMCxvLFhbaV0se3RleHQ6bltpXX0pLEQoZSkmJihlLmNsYXNzTmFtZSYmeChvLmNsYXNzTmFtZSxlLmNsYXNzTmFtZS5zcGxpdChcIiBcIikpPDAmJihlLmNsYXNzTmFtZSs9XCIgXCIrby5jbGFzc05hbWUpLG89VCghMCxvLGUpKSxmLnRlbXBsYXRlKHQpKG8pfSxfYWRqdXN0RGltZW5zaW9uczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudCx0PXAuc3R5bGVzLG49Tit0Lmxpc3QsaT1OK3QudGltZWxpbmUscj1OK3Quc3BsaXRCYXIsbz10aGlzLnRvb2xiYXIub3V0ZXJIZWlnaHQoKSxhPXRoaXMuZm9vdGVyP3RoaXMuZm9vdGVyLm91dGVySGVpZ2h0KCk6MCxzPWUuaGVpZ2h0KCksbD1lLndpZHRoKCksYz1lLmZpbmQocikub3V0ZXJXaWR0aCgpLGQ9ZS5maW5kKG4pLm91dGVyV2lkdGgoKTtlLmNoaWxkcmVuKFtuLGkscl0uam9pbihcIixcIikpLmhlaWdodChzLShvK2EpKS5lbmQoKS5jaGlsZHJlbihpKS53aWR0aChsLShjK2QpKX0sX3Njcm9sbFRvOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMudGltZWxpbmUudmlldygpLGk9Zi5hdHRyKFwidWlkXCIpLHI9XCJzdHJpbmdcIj09dHlwZW9mIGU/ZTplLmNsb3Nlc3QoXCJ0clwiK24oKSkuYXR0cihpKSxvPXQuY29udGVudC5maW5kKG4ocikpOzAhPT1vLmxlbmd0aCYmdC5fc2Nyb2xsVG8obyl9LF9kcm9wRG93bnM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9TitwLnN0eWxlcy50b29sYmFyLmFjdGlvbnMsbj10aGlzLm9wdGlvbnMubWVzc2FnZXMuYWN0aW9ucyxpPXRoaXMuZGF0YVNvdXJjZSxyPXRoaXMudGltZWxpbmUsbz1mdW5jdGlvbih0KXt2YXIgbixvPXQudHlwZSxhPWkuX2NyZWF0ZU5ld01vZGVsKCkscz1lLmRhdGFJdGVtKGUuc2VsZWN0KCkpLGw9aS50YXNrUGFyZW50KHMpLGM9ci52aWV3KCkuX3RpbWVTbG90cygpWzBdLGQ9XCJhZGRcIj09PW8/czpsO2Euc2V0KFwidGl0bGVcIixcIk5ldyB0YXNrXCIpLGQ/KGEuc2V0KFwicGFyZW50SWRcIixkLmdldChcImlkXCIpKSxhLnNldChcInN0YXJ0XCIsZC5nZXQoXCJzdGFydFwiKSksYS5zZXQoXCJlbmRcIixkLmdldChcImVuZFwiKSkpOihhLnNldChcInN0YXJ0XCIsYy5zdGFydCksYS5zZXQoXCJlbmRcIixjLmVuZCkpLFwiYWRkXCIhPT1vJiYobj1zLmdldChcIm9yZGVySWRcIiksbj1cImluc2VydC1iZWZvcmVcIj09PW8/bjpuKzEpLGUuX2NyZWF0ZVRhc2soYSxuKX07dGhpcy5vcHRpb25zLmVkaXRhYmxlJiYodGhpcy5mb290ZXJEcm9wRG93bj1uZXcgSih0aGlzLmZvb3Rlci5jaGlsZHJlbih0KS5lcSgwKSx7bWVzc2FnZXM6e2FjdGlvbnM6bn0sZGlyZWN0aW9uOlwidXBcIixhbmltYXRpb246e29wZW46e2VmZmVjdHM6XCJzbGlkZUluOnVwXCJ9fSxuYXZpZ2F0YWJsZTplLm9wdGlvbnMubmF2aWdhdGFibGV9KSx0aGlzLmhlYWRlckRyb3BEb3duPW5ldyBKKHRoaXMudG9vbGJhci5jaGlsZHJlbih0KS5lcSgwKSx7bWVzc2FnZXM6e2FjdGlvbnM6bn0sbmF2aWdhdGFibGU6ZS5vcHRpb25zLm5hdmlnYXRhYmxlfSksdGhpcy5mb290ZXJEcm9wRG93bi5iaW5kKFwiY29tbWFuZFwiLG8pLHRoaXMuaGVhZGVyRHJvcERvd24uYmluZChcImNvbW1hbmRcIixvKSl9LF9saXN0OmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMsaT1uLm9wdGlvbnMubmF2aWdhdGFibGUscj1wLnN0eWxlcyxhPXRoaXMud3JhcHBlci5maW5kKE4rci5saXN0KSxzPWEuZmluZChcIj4gZGl2XCIpLGw9dGhpcy53cmFwcGVyLmZpbmQoTityLnRvb2xiYXIuYWN0aW9ucytcIiA+IGJ1dHRvblwiKSxjPXtjb2x1bW5zOnRoaXMub3B0aW9ucy5jb2x1bW5zfHxbXSxkYXRhU291cmNlOnRoaXMuZGF0YVNvdXJjZSxzZWxlY3RhYmxlOnRoaXMub3B0aW9ucy5zZWxlY3RhYmxlLGVkaXRhYmxlOnRoaXMub3B0aW9ucy5lZGl0YWJsZSxsaXN0V2lkdGg6YS5vdXRlcldpZHRoKCkscmVzb3VyY2VzRmllbGQ6dGhpcy5yZXNvdXJjZXMuZmllbGR9LGQ9Yy5jb2x1bW5zLHU9ZnVuY3Rpb24oKXtpJiYobi5fY3VycmVudChuLl9jYWNoZWRDdXJyZW50KSxvKG4ubGlzdC5jb250ZW50LmZpbmQoXCJ0YWJsZVwiKSwhMCkpLGRlbGV0ZSBuLl9jYWNoZWRDdXJyZW50fTtmb3IodD0wO2QubGVuZ3RoPnQ7dCsrKWU9ZFt0XSxlLmZpZWxkPT09dGhpcy5yZXNvdXJjZXMuZmllbGQmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUuZWRpdG9yJiYoZS5lZGl0b3I9Uyh0aGlzLl9jcmVhdGVSZXNvdXJjZUVkaXRvcix0aGlzKSk7dGhpcy5saXN0PW5ldyBmLnVpLkdhbnR0TGlzdChzLGMpLHRoaXMubGlzdC5iaW5kKFwicmVuZGVyXCIsZnVuY3Rpb24oKXtuLl9uYXZpZ2F0YWJsZSgpfSwhMCkuYmluZChcImVkaXRcIixmdW5jdGlvbihlKXtuLl9jYWNoZWRDdXJyZW50PWUuY2VsbCxuLnRyaWdnZXIoXCJlZGl0XCIse3Rhc2s6ZS5tb2RlbCxjb250YWluZXI6ZS5jZWxsfSkmJmUucHJldmVudERlZmF1bHQoKX0pLmJpbmQoXCJjYW5jZWxcIixmdW5jdGlvbihlKXtuLnRyaWdnZXIoXCJjYW5jZWxcIix7dGFzazplLm1vZGVsLGNvbnRhaW5lcjplLmNlbGx9KSYmZS5wcmV2ZW50RGVmYXVsdCgpLHUoKX0pLmJpbmQoXCJ1cGRhdGVcIixmdW5jdGlvbihlKXtuLl91cGRhdGVUYXNrKGUudGFzayxlLnVwZGF0ZUluZm8pLHUoKX0pLmJpbmQoXCJjaGFuZ2VcIixmdW5jdGlvbigpe24udHJpZ2dlcihcImNoYW5nZVwiKTt2YXIgZT1uLmxpc3Quc2VsZWN0KCk7ZS5sZW5ndGg/KGwucmVtb3ZlQXR0cihcImRhdGEtYWN0aW9uXCIsXCJhZGRcIiksbi50aW1lbGluZS5zZWxlY3QoXCJbZGF0YS11aWQ9J1wiK2UuYXR0cihcImRhdGEtdWlkXCIpK1wiJ11cIikpOihsLmF0dHIoXCJkYXRhLWFjdGlvblwiLFwiYWRkXCIpLG4udGltZWxpbmUuY2xlYXJTZWxlY3Rpb24oKSl9KX0sX3RpbWVsaW5lOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXAuc3R5bGVzLG49aShUKCEwLHtyZXNvdXJjZXNGaWVsZDp0aGlzLnJlc291cmNlcy5maWVsZH0sdGhpcy5vcHRpb25zKSkscj10aGlzLndyYXBwZXIuZmluZChOK3QudGltZWxpbmUrXCIgPiBkaXZcIik7dGhpcy50aW1lbGluZT1uZXcgZi51aS5HYW50dFRpbWVsaW5lKHIsbiksdGhpcy50aW1lbGluZS5iaW5kKFwibmF2aWdhdGVcIixmdW5jdGlvbihuKXtlLnRvb2xiYXIuZmluZChOK3QudG9vbGJhci52aWV3cytcIiA+IGxpXCIpLnJlbW92ZUNsYXNzKHQuc2VsZWN0ZWQpLmVuZCgpLmZpbmQoTit0LnRvb2xiYXIudmlld0J1dHRvbitcIi1cIituLnZpZXcucmVwbGFjZSgvXFwuL2csXCJcXFxcLlwiKS50b0xvd2VyQ2FzZSgpKS5hZGRDbGFzcyh0LnNlbGVjdGVkKSxlLnJlZnJlc2goKX0pLmJpbmQoXCJtb3ZlU3RhcnRcIixmdW5jdGlvbih0KXtlLnRyaWdnZXIoXCJtb3ZlU3RhcnRcIix7dGFzazp0LnRhc2t9KSYmdC5wcmV2ZW50RGVmYXVsdCgpfSkuYmluZChcIm1vdmVcIixmdW5jdGlvbih0KXt2YXIgbj10LnRhc2ssaT10LnN0YXJ0LHI9bmV3IERhdGUoaS5nZXRUaW1lKCkrbi5kdXJhdGlvbigpKTtlLnRyaWdnZXIoXCJtb3ZlXCIse3Rhc2s6bixzdGFydDppLGVuZDpyfSkmJnQucHJldmVudERlZmF1bHQoKX0pLmJpbmQoXCJtb3ZlRW5kXCIsZnVuY3Rpb24odCl7dmFyIG49dC50YXNrLGk9dC5zdGFydCxyPW5ldyBEYXRlKGkuZ2V0VGltZSgpK24uZHVyYXRpb24oKSk7ZS50cmlnZ2VyKFwibW92ZUVuZFwiLHt0YXNrOm4sc3RhcnQ6aSxlbmQ6cn0pfHxlLl91cGRhdGVUYXNrKGUuZGF0YVNvdXJjZS5nZXRCeVVpZChuLnVpZCkse3N0YXJ0OmksZW5kOnJ9KX0pLmJpbmQoXCJyZXNpemVTdGFydFwiLGZ1bmN0aW9uKHQpe2UudHJpZ2dlcihcInJlc2l6ZVN0YXJ0XCIse3Rhc2s6dC50YXNrfSkmJnQucHJldmVudERlZmF1bHQoKX0pLmJpbmQoXCJyZXNpemVcIixmdW5jdGlvbih0KXtlLnRyaWdnZXIoXCJyZXNpemVcIix7dGFzazp0LnRhc2ssc3RhcnQ6dC5zdGFydCxlbmQ6dC5lbmR9KSYmdC5wcmV2ZW50RGVmYXVsdCgpfSkuYmluZChcInJlc2l6ZUVuZFwiLGZ1bmN0aW9uKHQpe3ZhciBuPXQudGFzayxpPXt9O3QucmVzaXplU3RhcnQ/aS5zdGFydD10LnN0YXJ0OmkuZW5kPXQuZW5kLGUudHJpZ2dlcihcInJlc2l6ZUVuZFwiLHt0YXNrOm4sc3RhcnQ6dC5zdGFydCxlbmQ6dC5lbmR9KXx8ZS5fdXBkYXRlVGFzayhlLmRhdGFTb3VyY2UuZ2V0QnlVaWQobi51aWQpLGkpfSkuYmluZChcInBlcmNlbnRSZXNpemVFbmRcIixmdW5jdGlvbih0KXtlLl91cGRhdGVUYXNrKGUuZGF0YVNvdXJjZS5nZXRCeVVpZCh0LnRhc2sudWlkKSx7cGVyY2VudENvbXBsZXRlOnQucGVyY2VudENvbXBsZXRlfSl9KS5iaW5kKFwiZGVwZW5kZW5jeURyYWdFbmRcIixmdW5jdGlvbih0KXt2YXIgbj1lLmRlcGVuZGVuY2llcy5fY3JlYXRlTmV3TW9kZWwoe3R5cGU6dC50eXBlLHByZWRlY2Vzc29ySWQ6dC5wcmVkZWNlc3Nvci5pZCxzdWNjZXNzb3JJZDp0LnN1Y2Nlc3Nvci5pZH0pO2UuX2NyZWF0ZURlcGVuZGVuY3kobil9KS5iaW5kKFwic2VsZWN0XCIsZnVuY3Rpb24odCl7ZS5zZWxlY3QoXCJbZGF0YS11aWQ9J1wiK3QudWlkK1wiJ11cIil9KS5iaW5kKFwiZWRpdFRhc2tcIixmdW5jdGlvbih0KXtlLmVkaXRUYXNrKHQudWlkKX0pLmJpbmQoXCJjbGVhclwiLGZ1bmN0aW9uKCl7ZS5jbGVhclNlbGVjdGlvbigpfSkuYmluZChcInJlbW92ZVRhc2tcIixmdW5jdGlvbih0KXtlLnJlbW92ZVRhc2soZS5kYXRhU291cmNlLmdldEJ5VWlkKHQudWlkKSl9KS5iaW5kKFwicmVtb3ZlRGVwZW5kZW5jeVwiLGZ1bmN0aW9uKHQpe2UucmVtb3ZlRGVwZW5kZW5jeShlLmRlcGVuZGVuY2llcy5nZXRCeVVpZCh0LnVpZCkpfSl9LF9kYXRhU291cmNlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLHQ9ZS5kYXRhU291cmNlO3Q9ayh0KT97ZGF0YTp0fTp0LHRoaXMuZGF0YVNvdXJjZSYmdGhpcy5fcmVmcmVzaEhhbmRsZXI/dGhpcy5kYXRhU291cmNlLnVuYmluZChcImNoYW5nZVwiLHRoaXMuX3JlZnJlc2hIYW5kbGVyKS51bmJpbmQoXCJwcm9ncmVzc1wiLHRoaXMuX3Byb2dyZXNzSGFuZGxlcikudW5iaW5kKFwiZXJyb3JcIix0aGlzLl9lcnJvckhhbmRsZXIpOih0aGlzLl9yZWZyZXNoSGFuZGxlcj1TKHRoaXMucmVmcmVzaCx0aGlzKSx0aGlzLl9wcm9ncmVzc0hhbmRsZXI9Uyh0aGlzLl9yZXF1ZXN0U3RhcnQsdGhpcyksdGhpcy5fZXJyb3JIYW5kbGVyPVModGhpcy5fZXJyb3IsdGhpcykpLHRoaXMuZGF0YVNvdXJjZT1mLmRhdGEuR2FudHREYXRhU291cmNlLmNyZWF0ZSh0KS5iaW5kKFwiY2hhbmdlXCIsdGhpcy5fcmVmcmVzaEhhbmRsZXIpLmJpbmQoXCJwcm9ncmVzc1wiLHRoaXMuX3Byb2dyZXNzSGFuZGxlcikuYmluZChcImVycm9yXCIsdGhpcy5fZXJyb3JIYW5kbGVyKX0sX2RlcGVuZGVuY2llczpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5kZXBlbmRlbmNpZXN8fHt9LHQ9ayhlKT97ZGF0YTplfTplO3RoaXMuZGVwZW5kZW5jaWVzJiZ0aGlzLl9kZXBlbmRlbmN5UmVmcmVzaEhhbmRsZXI/dGhpcy5kZXBlbmRlbmNpZXMudW5iaW5kKFwiY2hhbmdlXCIsdGhpcy5fZGVwZW5kZW5jeVJlZnJlc2hIYW5kbGVyKS51bmJpbmQoXCJlcnJvclwiLHRoaXMuX2RlcGVuZGVuY3lFcnJvckhhbmRsZXIpOih0aGlzLl9kZXBlbmRlbmN5UmVmcmVzaEhhbmRsZXI9Uyh0aGlzLnJlZnJlc2hEZXBlbmRlbmNpZXMsdGhpcyksdGhpcy5fZGVwZW5kZW5jeUVycm9ySGFuZGxlcj1TKHRoaXMuX2Vycm9yLHRoaXMpKSx0aGlzLmRlcGVuZGVuY2llcz1mLmRhdGEuR2FudHREZXBlbmRlbmN5RGF0YVNvdXJjZS5jcmVhdGUodCkuYmluZChcImNoYW5nZVwiLHRoaXMuX2RlcGVuZGVuY3lSZWZyZXNoSGFuZGxlcikuYmluZChcImVycm9yXCIsdGhpcy5fZGVwZW5kZW5jeUVycm9ySGFuZGxlcil9LF9yZXNvdXJjZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMucmVzb3VyY2VzLHQ9ZS5kYXRhU291cmNlfHx7fTt0aGlzLnJlc291cmNlcz17ZmllbGQ6XCJyZXNvdXJjZXNcIixkYXRhVGV4dEZpZWxkOlwibmFtZVwiLGRhdGFDb2xvckZpZWxkOlwiY29sb3JcIixkYXRhRm9ybWF0RmllbGQ6XCJmb3JtYXRcIn0sVCh0aGlzLnJlc291cmNlcyxlKSx0aGlzLnJlc291cmNlcy5kYXRhU291cmNlPWYuZGF0YS5EYXRhU291cmNlLmNyZWF0ZSh0KX0sX2Fzc2lnbm1lbnRzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLmFzc2lnbm1lbnRzLHQ9ZS5kYXRhU291cmNlfHx7fTt0aGlzLmFzc2lnbm1lbnRzP3RoaXMuYXNzaWdubWVudHMuZGF0YVNvdXJjZS51bmJpbmQoXCJjaGFuZ2VcIix0aGlzLl9hc3NpZ25tZW50c1JlZnJlc2hIYW5kbGVyKTp0aGlzLl9hc3NpZ25tZW50c1JlZnJlc2hIYW5kbGVyPVModGhpcy5yZWZyZXNoLHRoaXMpLHRoaXMuYXNzaWdubWVudHM9e2RhdGFUYXNrSWRGaWVsZDpcInRhc2tJZFwiLGRhdGFSZXNvdXJjZUlkRmllbGQ6XCJyZXNvdXJjZUlkXCIsZGF0YVZhbHVlRmllbGQ6XCJ2YWx1ZVwifSxUKHRoaXMuYXNzaWdubWVudHMsZSksdGhpcy5hc3NpZ25tZW50cy5kYXRhU291cmNlPWYuZGF0YS5EYXRhU291cmNlLmNyZWF0ZSh0KSx0aGlzLmFzc2lnbm1lbnRzLmRhdGFTb3VyY2UuYmluZChcImNoYW5nZVwiLHRoaXMuX2Fzc2lnbm1lbnRzUmVmcmVzaEhhbmRsZXIpfSxfY3JlYXRlRWRpdG9yOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxuPXRoaXMuX2VkaXRvcj1uZXcgdSh0aGlzLndyYXBwZXIsVCh7fSx0aGlzLm9wdGlvbnMse3RhcmdldDp0aGlzLHJlc291cmNlczp7ZmllbGQ6dGhpcy5yZXNvdXJjZXMuZmllbGQsZWRpdG9yOlModGhpcy5fY3JlYXRlUmVzb3VyY2VFZGl0b3IsdGhpcyl9LGNyZWF0ZUJ1dHRvbjpTKHRoaXMuX2NyZWF0ZVBvcHVwQnV0dG9uLHRoaXMpfSkpO24uYmluZChcImNhbmNlbFwiLGZ1bmN0aW9uKG4pe3ZhciBpPWUuZGF0YVNvdXJjZS5nZXRCeVVpZChuLm1vZGVsLnVpZCk7cmV0dXJuIGUudHJpZ2dlcihcImNhbmNlbFwiLHtjb250YWluZXI6bi5jb250YWluZXIsdGFzazppfSk/KG4ucHJldmVudERlZmF1bHQoKSx0KTooZS5jYW5jZWxUYXNrKCksdCl9KS5iaW5kKFwiZWRpdFwiLGZ1bmN0aW9uKHQpe3ZhciBuPWUuZGF0YVNvdXJjZS5nZXRCeVVpZCh0Lm1vZGVsLnVpZCk7ZS50cmlnZ2VyKFwiZWRpdFwiLHtjb250YWluZXI6dC5jb250YWluZXIsdGFzazpufSkmJnQucHJldmVudERlZmF1bHQoKX0pLmJpbmQoXCJzYXZlXCIsZnVuY3Rpb24odCl7dmFyIG49ZS5kYXRhU291cmNlLmdldEJ5VWlkKHQubW9kZWwudWlkKTtlLnNhdmVUYXNrKG4sdC51cGRhdGVJbmZvKX0pLmJpbmQoXCJyZW1vdmVcIixmdW5jdGlvbih0KXtlLnJlbW92ZVRhc2sodC5tb2RlbC51aWQpfSl9LF9jcmVhdGVSZXNvdXJjZUVkaXRvcjpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT10IGluc3RhbmNlb2YgeT90OnQubW9kZWwscj1pLmdldChcImlkXCIpLG89dGhpcy5vcHRpb25zLm1lc3NhZ2VzLGE9bi5yZXNvdXJjZXMuZmllbGQscz10aGlzLl9yZXNvdXJjZUVkaXRvcj1uZXcgaChlLHtyZXNvdXJjZXNGaWVsZDphLGRhdGE6dGhpcy5fd3JhcFJlc291cmNlRGF0YShyKSxtb2RlbDppLG1lc3NhZ2VzOlQoe30sby5lZGl0b3IpLGJ1dHRvbnM6W3tuYW1lOlwidXBkYXRlXCIsdGV4dDpvLnNhdmUsY2xhc3NOYW1lOnAuc3R5bGVzLnByaW1hcnl9LHtuYW1lOlwiY2FuY2VsXCIsdGV4dDpvLmNhbmNlbH1dLGNyZWF0ZUJ1dHRvbjpTKHRoaXMuX2NyZWF0ZVBvcHVwQnV0dG9uLHRoaXMpLHNhdmU6ZnVuY3Rpb24oZSl7bi5fdXBkYXRlQXNzaWdubWVudHMoZS5tb2RlbC5nZXQoXCJpZFwiKSxlLm1vZGVsLmdldChhKSl9fSk7cy5vcGVuKCl9LF9jcmVhdGVQb3B1cEJ1dHRvbjpmdW5jdGlvbihlKXt2YXIgdD1lLm5hbWV8fGUudGV4dCxuPXtjbGFzc05hbWU6cC5zdHlsZXMucG9wdXAuYnV0dG9uK1wiIGstZ2FudHQtXCIrKHR8fFwiXCIpLnJlcGxhY2UoL1xccy9nLFwiXCIpLHRleHQ6dCxhdHRyOlwiXCJ9O2lmKCEodHx8RChlKSYmZS50ZW1wbGF0ZSkpdGhyb3cgRXJyb3IoXCJDdXN0b20gY29tbWFuZHMgc2hvdWxkIGhhdmUgbmFtZSBzcGVjaWZpZWRcIik7cmV0dXJuIEQoZSkmJihlLmNsYXNzTmFtZSYmKGUuY2xhc3NOYW1lKz1cIiBcIituLmNsYXNzTmFtZSksbj1UKCEwLG4sZSkpLGYudGVtcGxhdGUoaikobil9LHZpZXc6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGltZWxpbmUudmlldyhlKX0sZGF0YUl0ZW06ZnVuY3Rpb24oZSl7dmFyIHQsbjtyZXR1cm4gZT8odD10aGlzLmxpc3Qsbj10LmNvbnRlbnQuZmluZChlKSx0Ll9tb2RlbEZyb21FbGVtZW50KG4pKTpudWxsfSxzZXREYXRhU291cmNlOmZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucy5kYXRhU291cmNlPWUsdGhpcy5fZGF0YVNvdXJjZSgpLHRoaXMubGlzdC5fc2V0RGF0YVNvdXJjZSh0aGlzLmRhdGFTb3VyY2UpLHRoaXMub3B0aW9ucy5hdXRvQmluZCYmZS5mZXRjaCgpfSxzZXREZXBlbmRlbmNpZXNEYXRhU291cmNlOmZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucy5kZXBlbmRlbmNpZXM9ZSx0aGlzLl9kZXBlbmRlbmNpZXMoKSx0aGlzLm9wdGlvbnMuYXV0b0JpbmQmJmUuZmV0Y2goKX0saXRlbXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53cmFwcGVyLmNoaWxkcmVuKFwiLmstdGFza1wiKX0sX3VwZGF0ZUFzc2lnbm1lbnRzOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuLGkscixvLGEscyxsLGM9dGhpcy5hc3NpZ25tZW50cy5kYXRhU291cmNlLGQ9dGhpcy5hc3NpZ25tZW50cy5kYXRhVGFza0lkRmllbGQsdT10aGlzLmFzc2lnbm1lbnRzLmRhdGFSZXNvdXJjZUlkRmllbGQsaD10aGlzLmFzc2lnbm1lbnRzLmRhdGFWYWx1ZUZpZWxkLHA9ITEsZj1uZXcgYihjLnZpZXcoKSkuZmlsdGVyKHtmaWVsZDpkLG9wZXJhdG9yOlwiZXFcIix2YWx1ZTplfSkudG9BcnJheSgpO2YubGVuZ3RoOyl7Zm9yKG49ZlswXSxvPTAsYT10Lmxlbmd0aDthPm87bysrKWlmKGk9dFtvXSxuLmdldCh1KT09PWkuZ2V0KFwiaWRcIikpe3I9dFtvXS5nZXQoXCJ2YWx1ZVwiKSxuLnNldChoLHIpLHQuc3BsaWNlKG8sMSkscD0hMDticmVha31wfHxjLnJlbW92ZShuKSxwPSExLGYuc2hpZnQoKX1mb3Iocz0wLGw9dC5sZW5ndGg7bD5zO3MrKylpPXRbc10sbj1jLl9jcmVhdGVOZXdNb2RlbCgpLG5bZF09ZSxuW3VdPWkuZ2V0KFwiaWRcIiksbltoXT1pLmdldChcInZhbHVlXCIpLGMuYWRkKG4pO2Muc3luYygpfSxjYW5jZWxUYXNrOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZWRpdG9yLHQ9ZS5jb250YWluZXI7dCYmZS5jbG9zZSgpfSxlZGl0VGFzazpmdW5jdGlvbihlKXt2YXIgdCxuPVwic3RyaW5nXCI9PXR5cGVvZiBlP3RoaXMuZGF0YVNvdXJjZS5nZXRCeVVpZChlKTplO24mJih0PXRoaXMuZGF0YVNvdXJjZS5fY3JlYXRlTmV3TW9kZWwobi50b0pTT04oKSksdC51aWQ9bi51aWQsdGhpcy5jYW5jZWxUYXNrKCksdGhpcy5fZWRpdFRhc2sodCkpfSxfZWRpdFRhc2s6ZnVuY3Rpb24oZSl7dGhpcy5fZWRpdG9yLmVkaXRUYXNrKGUpfSxzYXZlVGFzazpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX2VkaXRvcixpPW4uY29udGFpbmVyLHI9bi5lZGl0YWJsZTtpJiZyJiZyLmVuZCgpJiZ0aGlzLl91cGRhdGVUYXNrKGUsdCl9LF91cGRhdGVUYXNrOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5yZXNvdXJjZXMuZmllbGQ7dGhpcy50cmlnZ2VyKFwic2F2ZVwiLHt0YXNrOmUsdmFsdWVzOnR9KXx8KHRoaXMuX3ByZXZlbnRSZWZyZXNoPSEwLHRoaXMuZGF0YVNvdXJjZS51cGRhdGUoZSx0KSx0W25dJiZ0aGlzLl91cGRhdGVBc3NpZ25tZW50cyhlLmdldChcImlkXCIpLHRbbl0pLHRoaXMuX3N5bmNEYXRhU291cmNlKCkpfSxyZW1vdmVUYXNrOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cInN0cmluZ1wiPT10eXBlb2YgZT90aGlzLmRhdGFTb3VyY2UuZ2V0QnlVaWQoZSk6ZTtuJiZ0aGlzLl90YXNrQ29uZmlybShmdW5jdGlvbihlKXtlfHx0Ll9yZW1vdmVUYXNrKG4pfSxuKX0sX2NyZWF0ZVRhc2s6ZnVuY3Rpb24oZSxuKXtpZighdGhpcy50cmlnZ2VyKFwiYWRkXCIse3Rhc2s6ZSxkZXBlbmRlbmN5Om51bGx9KSl7dmFyIGk9dGhpcy5kYXRhU291cmNlO3RoaXMuX3ByZXZlbnRSZWZyZXNoPSEwLG49PT10P2kuYWRkKGUpOmkuaW5zZXJ0KG4sZSksdGhpcy5fc2Nyb2xsVG9VaWQ9ZS51aWQsdGhpcy5fc3luY0RhdGFTb3VyY2UoKX19LF9jcmVhdGVEZXBlbmRlbmN5OmZ1bmN0aW9uKGUpe3RoaXMudHJpZ2dlcihcImFkZFwiLHt0YXNrOm51bGwsZGVwZW5kZW5jeTplfSl8fCh0aGlzLl9wcmV2ZW50RGVwZW5kZW5jeVJlZnJlc2g9ITAsdGhpcy5kZXBlbmRlbmNpZXMuYWRkKGUpLHRoaXMuX3ByZXZlbnREZXBlbmRlbmN5UmVmcmVzaD0hMSx0aGlzLmRlcGVuZGVuY2llcy5zeW5jKCkpfSxyZW1vdmVEZXBlbmRlbmN5OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cInN0cmluZ1wiPT10eXBlb2YgZT90aGlzLmRlcGVuZGVuY2llcy5nZXRCeVVpZChlKTplO24mJnRoaXMuX2RlcGVuZGVuY3lDb25maXJtKGZ1bmN0aW9uKGUpe2V8fHQuX3JlbW92ZURlcGVuZGVuY3kobil9LG4pfSxfcmVtb3ZlVGFza0RlcGVuZGVuY2llczpmdW5jdGlvbihlLHQpe3RoaXMuX3ByZXZlbnREZXBlbmRlbmN5UmVmcmVzaD0hMDtmb3IodmFyIG49MCxpPXQubGVuZ3RoO2k+bjtuKyspdGhpcy5kZXBlbmRlbmNpZXMucmVtb3ZlKHRbbl0pO3RoaXMuX3ByZXZlbnREZXBlbmRlbmN5UmVmcmVzaD0hMSx0aGlzLmRlcGVuZGVuY2llcy5zeW5jKCl9LF9yZW1vdmVSZXNvdXJjZUFzc2lnbm1lbnRzOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLmFzc2lnbm1lbnRzLmRhdGFTb3VyY2Uscj1pLnZpZXcoKSxvPXtmaWVsZDp0aGlzLmFzc2lnbm1lbnRzLmRhdGFUYXNrSWRGaWVsZCxvcGVyYXRvcjpcImVxXCIsdmFsdWU6ZS5nZXQoXCJpZFwiKX07Zm9yKHI9bmV3IGIocikuZmlsdGVyKG8pLnRvQXJyYXkoKSx0aGlzLl9wcmV2ZW50UmVmcmVzaD0hMCx0PTAsbj1yLmxlbmd0aDtuPnQ7dCsrKWkucmVtb3ZlKHJbdF0pO3RoaXMuX3ByZXZlbnRSZWZyZXNoPSExLGkuc3luYygpfSxfcmVtb3ZlVGFzazpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmRlcGVuZGVuY2llcy5kZXBlbmRlbmNpZXMoZS5pZCk7dGhpcy50cmlnZ2VyKFwicmVtb3ZlXCIse3Rhc2s6ZSxkZXBlbmRlbmNpZXM6dH0pfHwodGhpcy5fcmVtb3ZlVGFza0RlcGVuZGVuY2llcyhlLHQpLHRoaXMuX3JlbW92ZVJlc291cmNlQXNzaWdubWVudHMoZSksdGhpcy5fcHJldmVudFJlZnJlc2g9ITAsdGhpcy5kYXRhU291cmNlLnJlbW92ZShlKSYmdGhpcy5fc3luY0RhdGFTb3VyY2UoKSx0aGlzLl9wcmV2ZW50UmVmcmVzaD0hMSl9LF9yZW1vdmVEZXBlbmRlbmN5OmZ1bmN0aW9uKGUpe3RoaXMudHJpZ2dlcihcInJlbW92ZVwiLHt0YXNrOm51bGwsZGVwZW5kZW5jaWVzOltlXX0pfHx0aGlzLmRlcGVuZGVuY2llcy5yZW1vdmUoZSkmJnRoaXMuZGVwZW5kZW5jaWVzLnN5bmMoKX0sX3Rhc2tDb25maXJtOmZ1bmN0aW9uKGUsdCl7dGhpcy5fY29uZmlybShlLHttb2RlbDp0LHRleHQ6Vix0aXRsZTp0aGlzLm9wdGlvbnMubWVzc2FnZXMuZGVsZXRlVGFza1dpbmRvd1RpdGxlfSl9LF9kZXBlbmRlbmN5Q29uZmlybTpmdW5jdGlvbihlLHQpe3RoaXMuX2NvbmZpcm0oZSx7bW9kZWw6dCx0ZXh0OlUsdGl0bGU6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLmRlbGV0ZURlcGVuZGVuY3lXaW5kb3dUaXRsZX0pfSxfY29uZmlybTpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj10aGlzLm9wdGlvbnMuZWRpdGFibGU7cj09PSEwfHxyLmNvbmZpcm1hdGlvbiE9PSExPyhuPXRoaXMub3B0aW9ucy5tZXNzYWdlcyxpPVt7bmFtZTpcImRlbGV0ZVwiLHRleHQ6bi5kZXN0cm95LGNsYXNzTmFtZTpwLnN0eWxlcy5wcmltYXJ5LGNsaWNrOmZ1bmN0aW9uKCl7ZSgpfX0se25hbWU6XCJjYW5jZWxcIix0ZXh0Om4uY2FuY2VsLGNsaWNrOmZ1bmN0aW9uKCl7ZSghMCl9fV0sdGhpcy5zaG93RGlhbG9nKFQoITAse30sdCx7YnV0dG9uczppfSkpKTplKCl9LHNob3dEaWFsb2c6ZnVuY3Rpb24oZSl7dGhpcy5fZWRpdG9yLnNob3dEaWFsb2coZSl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZSx0LGkscixvLGE7dGhpcy5fcHJldmVudFJlZnJlc2h8fHRoaXMubGlzdC5lZGl0YWJsZXx8KHRoaXMuX3Byb2dyZXNzKCExKSxlPXRoaXMuZGF0YVNvdXJjZSx0PWUudGFza1RyZWUoKSxpPXRoaXMuX3Njcm9sbFRvVWlkLGE9LTEsdGhpcy5jdXJyZW50JiYobz10aGlzLmN1cnJlbnQuY2xvc2VzdChcInRyXCIpLmF0dHIoZi5hdHRyKFwidWlkXCIpKSxhPXRoaXMuY3VycmVudC5pbmRleCgpKSx0aGlzLnRyaWdnZXIoXCJkYXRhQmluZGluZ1wiKXx8KDAhPT10aGlzLnJlc291cmNlcy5kYXRhU291cmNlLmRhdGEoKS5sZW5ndGgmJnRoaXMuX2Fzc2lnblJlc291cmNlcyh0KSx0aGlzLl9lZGl0b3ImJnRoaXMuX2VkaXRvci5jbG9zZSgpLHRoaXMuY2xlYXJTZWxlY3Rpb24oKSx0aGlzLmxpc3QuX3JlbmRlcih0KSx0aGlzLnRpbWVsaW5lLl9yZW5kZXIodCksdGhpcy50aW1lbGluZS5fcmVuZGVyRGVwZW5kZW5jaWVzKHRoaXMuZGVwZW5kZW5jaWVzLnZpZXcoKSksaSYmKHRoaXMuX3Njcm9sbFRvKGkpLHRoaXMuc2VsZWN0KG4oaSkpKSwoaXx8bykmJmE+PTAmJihyPXRoaXMubGlzdC5jb250ZW50LmZpbmQoXCJ0clwiK24oaXx8bykrXCIgPiB0ZDplcShcIithK1wiKVwiKSx0aGlzLl9jdXJyZW50KHIpKSx0aGlzLl9zY3JvbGxUb1VpZD1udWxsLHRoaXMudHJpZ2dlcihcImRhdGFCb3VuZFwiKSkpfSxyZWZyZXNoRGVwZW5kZW5jaWVzOmZ1bmN0aW9uKCl7dGhpcy5fcHJldmVudERlcGVuZGVuY3lSZWZyZXNofHx0aGlzLnRyaWdnZXIoXCJkYXRhQmluZGluZ1wiKXx8KHRoaXMudGltZWxpbmUuX3JlbmRlckRlcGVuZGVuY2llcyh0aGlzLmRlcGVuZGVuY2llcy52aWV3KCkpLHRoaXMudHJpZ2dlcihcImRhdGFCb3VuZFwiKSl9LF9hc3NpZ25SZXNvdXJjZXM6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMucmVzb3VyY2VzLHI9dGhpcy5hc3NpZ25tZW50cyxvPWZ1bmN0aW9uKCl7dmFyIGU9ci5kYXRhU291cmNlLnZpZXcoKSx0PXtmaWVsZDpyLmRhdGFUYXNrSWRGaWVsZH07cmV0dXJuIGU9bmV3IGIoZSkuZ3JvdXAodCkudG9BcnJheSgpfSxhPW8oKSxzPWZ1bmN0aW9uKGUsdCl7dmFyIG4scixvPWUuZ2V0KFwiaWRcIik7Zm9yKGYuc2V0dGVyKGkuZmllbGQpKGUsbmV3IHcoW10pKSxuPTAscj1hLmxlbmd0aDtyPm47bisrKWFbbl0udmFsdWU9PT1vJiZ0KGUsYVtuXS5pdGVtcyl9LGw9ZnVuY3Rpb24oZSx0KXt2YXIgbixvLGEscyxsLGMsZCx1O2ZvcihuPTAsbz10Lmxlbmd0aDtvPm47bisrKWE9dFtuXSxzPWkuZGF0YVNvdXJjZS5nZXQoYS5nZXQoci5kYXRhUmVzb3VyY2VJZEZpZWxkKSksbD1hLmdldChyLmRhdGFWYWx1ZUZpZWxkKSxjPWEuZ2V0KHIuZGF0YVJlc291cmNlSWRGaWVsZCksZD1zLmdldChpLmRhdGFGb3JtYXRGaWVsZCl8fFAsdT1mLnRvU3RyaW5nKGwsZCksZVtpLmZpZWxkXS5wdXNoKG5ldyB5KHtpZDpjLG5hbWU6cy5nZXQoaS5kYXRhVGV4dEZpZWxkKSxjb2xvcjpzLmdldChpLmRhdGFDb2xvckZpZWxkKSx2YWx1ZTpsLGZvcm1hdGVkVmFsdWU6dX0pKX07Zm9yKHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspcyhlW3RdLGwpfSxfd3JhcFJlc291cmNlRGF0YTpmdW5jdGlvbihlKXt2YXIgdCxuLGkscj10aGlzLG89W10sYT10aGlzLnJlc291cmNlcy5kYXRhU291cmNlLnZpZXcoKSxzPXRoaXMuYXNzaWdubWVudHMuZGF0YVNvdXJjZS52aWV3KCksbD1uZXcgYihzKS5maWx0ZXIoe2ZpZWxkOnIuYXNzaWdubWVudHMuZGF0YVRhc2tJZEZpZWxkLG9wZXJhdG9yOlwiZXFcIix2YWx1ZTplfSkudG9BcnJheSgpLGM9ZnVuY3Rpb24oZSl7dmFyIHQ9bnVsbDtyZXR1cm4gbmV3IGIobCkuZmlsdGVyKHtmaWVsZDpyLmFzc2lnbm1lbnRzLmRhdGFSZXNvdXJjZUlkRmllbGQsb3BlcmF0b3I6XCJlcVwiLHZhbHVlOmV9KS5zZWxlY3QoZnVuY3Rpb24oZSl7dCs9ZS5nZXQoci5hc3NpZ25tZW50cy5kYXRhVmFsdWVGaWVsZCl9KSx0fTtmb3Iobj0wLGk9YS5sZW5ndGg7aT5uO24rKyl0PWFbbl0sby5wdXNoKHtpZDp0LmdldChcImlkXCIpLG5hbWU6dC5nZXQoci5yZXNvdXJjZXMuZGF0YVRleHRGaWVsZCksZm9ybWF0OnQuZ2V0KHIucmVzb3VyY2VzLmRhdGFGb3JtYXRGaWVsZCl8fFAsdmFsdWU6Yyh0LmlkKX0pO3JldHVybiBvfSxfc3luY0RhdGFTb3VyY2U6ZnVuY3Rpb24oKXt0aGlzLl9wcmV2ZW50UmVmcmVzaD0hMSx0aGlzLl9yZXF1ZXN0U3RhcnQoKSx0aGlzLmRhdGFTb3VyY2Uuc3luYygpfSxfcmVxdWVzdFN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5fcHJvZ3Jlc3MoITApfSxfZXJyb3I6ZnVuY3Rpb24oKXt0aGlzLl9wcm9ncmVzcyghMSl9LF9wcm9ncmVzczpmdW5jdGlvbihlKXtmLnVpLnByb2dyZXNzKHRoaXMuZWxlbWVudCxlKX0sX3Jlc2l6YWJsZTpmdW5jdGlvbigpe3ZhciB0LG4saSxyPXRoaXMud3JhcHBlcixvPXAuc3R5bGVzLGE9TitvLmdyaWRDb250ZW50LHM9ci5maW5kKE4rby5saXN0KSxsPXIuZmluZChOK28udGltZWxpbmUpO3RoaXMuX3Jlc2l6ZURyYWdnYWJsZT1yLmZpbmQoTitvLnNwbGl0QmFyKS5oZWlnaHQocy5oZWlnaHQoKSkuaG92ZXIoZnVuY3Rpb24oKXtlKHRoaXMpLmFkZENsYXNzKG8uc3BsaXRCYXJIb3Zlcil9LGZ1bmN0aW9uKCl7ZSh0aGlzKS5yZW1vdmVDbGFzcyhvLnNwbGl0QmFySG92ZXIpfSkuZW5kKCkua2VuZG9SZXNpemFibGUoe29yaWVudGF0aW9uOlwiaG9yaXpvbnRhbFwiLGhhbmRsZTpOK28uc3BsaXRCYXIsc3RhcnQ6ZnVuY3Rpb24oKXt0PXMud2lkdGgoKSxuPWwud2lkdGgoKSxpPWwuZmluZChhKS5zY3JvbGxMZWZ0KCl9LHJlc2l6ZTpmdW5jdGlvbihlKXt2YXIgcj1lLnguaW5pdGlhbERlbHRhOzA+dCtyfHwwPm4tcnx8KHMud2lkdGgodCtyKSxsLndpZHRoKG4tciksbC5maW5kKGEpLnNjcm9sbExlZnQoaStyKSl9fSkuZGF0YShcImtlbmRvUmVzaXphYmxlXCIpfSxfc2Nyb2xsYWJsZTpmdW5jdGlvbigpe3ZhciB0PXAuc3R5bGVzLG49Tit0LmdyaWRDb250ZW50LGk9Tit0LmdyaWRIZWFkZXJXcmFwLHI9dGhpcy50aW1lbGluZS5lbGVtZW50LG89dGhpcy5saXN0LmVsZW1lbnQ7ci5maW5kKG4pLm9uKFwic2Nyb2xsXCIsZnVuY3Rpb24oKXtyLmZpbmQoaSkuc2Nyb2xsTGVmdCh0aGlzLnNjcm9sbExlZnQpLG8uZmluZChuKS5zY3JvbGxUb3AodGhpcy5zY3JvbGxUb3ApfSksby5maW5kKG4pLm9uKFwic2Nyb2xsXCIsZnVuY3Rpb24oKXtvLmZpbmQoaSkuc2Nyb2xsTGVmdCh0aGlzLnNjcm9sbExlZnQpfSkub24oXCJET01Nb3VzZVNjcm9sbFwiK00rXCIgbW91c2V3aGVlbFwiK00sZnVuY3Rpb24odCl7dmFyIGk9ci5maW5kKG4pLG89aS5zY3JvbGxUb3AoKSxhPWYud2hlZWxEZWx0YVkodCk7YSYmKHQucHJldmVudERlZmF1bHQoKSxlKHQuY3VycmVudFRhcmdldCkub25lKFwid2hlZWxcIitNLCExKSxpLnNjcm9sbFRvcChvKy1hKSl9KX0sX25hdmlnYXRhYmxlOmZ1bmN0aW9uKCl7dmFyIGkscj10aGlzLGE9dGhpcy5vcHRpb25zLm5hdmlnYXRhYmxlLHM9dGhpcy5vcHRpb25zLmVkaXRhYmxlLGw9dGhpcy5saXN0LmhlYWRlci5maW5kKFwidGFibGVcIiksYz10aGlzLmxpc3QuY29udGVudC5maW5kKFwidGFibGVcIiksZD1wLnN0eWxlcyx1PXRoaXMudGltZWxpbmUuZWxlbWVudC5maW5kKE4rZC5ncmlkQ29udGVudCksaD1sLmFkZChjKSxnPW4oKSxtPXtjb2xsYXBzZTohMSxleHBhbmQ6ITB9LHY9ZnVuY3Rpb24oZSl7dmFyIHQ9ci50aW1lbGluZS52aWV3KCkuX3RpbWVTbG90cygpWzBdLm9mZnNldFdpZHRoO3Uuc2Nyb2xsTGVmdCh1LnNjcm9sbExlZnQoKSsoZT8tdDp0KSl9LF89ZnVuY3Rpb24oZSl7dmFyIHQ9ci5jdXJyZW50LnBhcmVudChcInRyXCIrbigpKSxpPXIuY3VycmVudC5pbmRleCgpLGE9dFtlXSgpOzAhPT1yLnNlbGVjdCgpLmxlbmd0aCYmci5jbGVhclNlbGVjdGlvbigpLDAhPT1hLmxlbmd0aD8oci5fY3VycmVudChhLmNoaWxkcmVuKFwidGQ6ZXEoXCIraStcIilcIikpLHIuX3Njcm9sbFRvKHIuY3VycmVudCkpOnIuY3VycmVudC5pcyhcInRkXCIpJiZcInByZXZcIj09ZT9vKGwpOnIuY3VycmVudC5pcyhcInRoXCIpJiZcIm5leHRcIj09ZSYmbyhjKX0seT1mdW5jdGlvbihlKXt2YXIgdD1yLmN1cnJlbnRbZV0oKTswIT09dC5sZW5ndGgmJihyLl9jdXJyZW50KHQpLGk9ci5jdXJyZW50LmluZGV4KCkpfSx3PWZ1bmN0aW9uKGUpe3ZhciB0PXIuZGF0YUl0ZW0oci5jdXJyZW50KTt0LnN1bW1hcnkmJnQuZXhwYW5kZWQhPT1lJiZ0LnNldChcImV4cGFuZGVkXCIsZSl9LGI9ZnVuY3Rpb24oKXt2YXIgZSx0O3Iub3B0aW9ucy5lZGl0YWJsZSYmIXIubGlzdC5lZGl0YWJsZSYmKGU9ci5zZWxlY3QoKSx0PWYuYXR0cihcInVpZFwiKSxlLmxlbmd0aCYmci5yZW1vdmVUYXNrKGUuYXR0cih0KSkpfTtyZXR1cm4gZSh0aGlzLndyYXBwZXIpLm9uKFwibW91c2Vkb3duXCIrTSxcInRyXCIrZytcIiwgZGl2XCIrZytcIjpub3QoXCIrTitkLmxpbmUrXCIpXCIsZnVuY3Rpb24odCl7dmFyIGksbD1lKHQuY3VycmVudFRhcmdldCksYz1lKHQudGFyZ2V0KS5pcyhcIjpidXR0b24sYSw6aW5wdXQsYT4uay1pY29uLHRleHRhcmVhLHNwYW4uay1pY29uLHNwYW4uay1saW5rLC5rLWlucHV0LC5rLW11bHRpc2VsZWN0LXdyYXBcIik7dC5jdHJsS2V5fHwoYSYmKGk9bC5pcyhcInRyXCIpP2UodC50YXJnZXQpLmNsb3Nlc3QoXCJ0ZFwiKTpyLmxpc3QuY29udGVudC5maW5kKFwidHJcIituKGwuYXR0cihmLmF0dHIoXCJ1aWRcIikpKStcIiA+IHRkOmZpcnN0XCIpLHIuX2N1cnJlbnQoaSkpLCFhJiYhc3x8Y3x8c2V0VGltZW91dChmdW5jdGlvbigpe28oci5saXN0LmNvbnRlbnQuZmluZChcInRhYmxlXCIpLCEwKX0sMikpfSksYSE9PSEwPyhjLm9uKFwia2V5ZG93blwiK00sZnVuY3Rpb24oZSl7ZS5rZXlDb2RlPT1FLkRFTEVURSYmYigpfSksdCk6KGgub24oXCJmb2N1c1wiK00sZnVuY3Rpb24oKXt2YXIgdD10aGlzPT09Yy5nZXQoMCk/XCJ0ZFwiOlwidGhcIixuPShlKHRoaXMpLHIuc2VsZWN0KCkpLG89ci5jdXJyZW50fHxlKG4ubGVuZ3RoP246dGhpcykuZmluZCh0K1wiOmVxKFwiKyhpfHwwKStcIilcIik7ci5fY3VycmVudChvKX0pLm9uKFwiYmx1clwiK00sZnVuY3Rpb24oKXtyLl9jdXJyZW50KCksdGhpcz09bCYmZSh0aGlzKS5hdHRyKEksLTEpfSkub24oXCJrZXlkb3duXCIrTSxmdW5jdGlvbihlKXt2YXIgdCxuPWUua2V5Q29kZTtpZihyLmN1cnJlbnQpc3dpdGNoKHQ9ci5jdXJyZW50LmlzKFwidGRcIiksbil7Y2FzZSBFLlJJR0hUOmUucHJldmVudERlZmF1bHQoKSxlLmFsdEtleT92KCk6ZS5jdHJsS2V5P3cobS5leHBhbmQpOnkoXCJuZXh0XCIpO2JyZWFrO2Nhc2UgRS5MRUZUOmUucHJldmVudERlZmF1bHQoKSxlLmFsdEtleT92KCEwKTplLmN0cmxLZXk/dyhtLmNvbGxhcHNlKTp5KFwicHJldlwiKTticmVhaztjYXNlIEUuVVA6ZS5wcmV2ZW50RGVmYXVsdCgpLF8oXCJwcmV2XCIpO2JyZWFrO2Nhc2UgRS5ET1dOOmUucHJldmVudERlZmF1bHQoKSxfKFwibmV4dFwiKTticmVhaztjYXNlIEUuU1BBQ0VCQVI6ZS5wcmV2ZW50RGVmYXVsdCgpLHQmJnIuc2VsZWN0KHIuY3VycmVudC5jbG9zZXN0KFwidHJcIikpO2JyZWFrO2Nhc2UgRS5FTlRFUjplLnByZXZlbnREZWZhdWx0KCksdD9yLm9wdGlvbnMuZWRpdGFibGUmJihyLl9jYWNoZWRDdXJyZW50PXIuY3VycmVudCxyLmxpc3QuX3N0YXJ0RWRpdEhhbmRsZXIoci5jdXJyZW50KSxlLnN0b3BQcm9wYWdhdGlvbigpKTpyLmN1cnJlbnQuY2hpbGRyZW4oXCJhLmstbGlua1wiKS5jbGljaygpO2JyZWFrO2Nhc2UgRS5FU0M6ZS5zdG9wUHJvcGFnYXRpb24oKTticmVhaztjYXNlIEUuREVMRVRFOnQmJmIoKTticmVhaztkZWZhdWx0Om4+PTQ5JiY1Nz49biYmci52aWV3KHIudGltZWxpbmUuX3ZpZXdCeUluZGV4KG4tNDkpKX19KSx0KX0sX2N1cnJlbnQ6ZnVuY3Rpb24odCl7dmFyIG4saT1wLnN0eWxlczt0aGlzLmN1cnJlbnQmJnRoaXMuY3VycmVudC5sZW5ndGgmJnRoaXMuY3VycmVudC5yZW1vdmVDbGFzcyhpLmZvY3VzZWQpLnJlbW92ZUF0dHIoXCJpZFwiKSx0JiZ0Lmxlbmd0aD8odGhpcy5jdXJyZW50PXQuYWRkQ2xhc3MoaS5mb2N1c2VkKS5hdHRyKFwiaWRcIixPKSxuPWUoZi5fYWN0aXZlRWxlbWVudCgpKSxuLmlzKFwidGFibGVcIikmJnRoaXMud3JhcHBlci5maW5kKG4pLmxlbmd0aD4wJiZuLnJlbW92ZUF0dHIoTCkuYXR0cihMLE8pKTp0aGlzLmN1cnJlbnQ9bnVsbH0sX2RhdGFCaW5kOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzO24ub3B0aW9ucy5hdXRvQmluZCYmKHRoaXMuX3ByZXZlbnRSZWZyZXNoPSEwLHRoaXMuX3ByZXZlbnREZXBlbmRlbmN5UmVmcmVzaD0hMCx0PWUubWFwKFt0aGlzLmRhdGFTb3VyY2UsdGhpcy5kZXBlbmRlbmNpZXMsdGhpcy5yZXNvdXJjZXMuZGF0YVNvdXJjZSx0aGlzLmFzc2lnbm1lbnRzLmRhdGFTb3VyY2VdLGZ1bmN0aW9uKGUpe3JldHVybiBlLmZldGNoKCl9KSxlLndoZW4uYXBwbHkobnVsbCx0KS5kb25lKGZ1bmN0aW9uKCl7bi5fcHJldmVudFJlZnJlc2g9ITEsbi5fcHJldmVudERlcGVuZGVuY3lSZWZyZXNoPSExLG4ucmVmcmVzaCgpfSkpfSxfcmVzaXplOmZ1bmN0aW9uKCl7dGhpcy5fYWRqdXN0RGltZW5zaW9ucygpLHRoaXMudGltZWxpbmUudmlldygpLl9hZGp1c3RIZWlnaHQoKSx0aGlzLmxpc3QuX2FkanVzdEhlaWdodCgpfX0pLGYuUERGTWl4aW4mJmYuUERGTWl4aW4uZXh0ZW5kKHAucHJvdG90eXBlKSxmLnVpLnBsdWdpbihwKSxUKCEwLHAse3N0eWxlczpRfSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXt2YXIgdCxuLGk9W10scj1lLmNsYXNzTmFtZTtmb3IodD0wLG49ZS5sZXZlbDtuPnQ7dCsrKWkucHVzaChjKFwic3BhblwiLHtjbGFzc05hbWU6cn0pKTtyZXR1cm4gaX12YXIgaSxyLG8sYT1rZW5kby5kYXRhLHM9ZS5leHRlbmQsbD1rZW5kby5kb20sYz1sLmVsZW1lbnQsZD1sLnRleHQsdT1sLmh0bWwsaD1rZW5kby51aSxwPWguRGF0YUJvdW5kV2lkZ2V0LGY9YS5EYXRhU291cmNlLGc9YS5PYnNlcnZhYmxlQXJyYXksbT1hLlF1ZXJ5LHY9YS5Nb2RlbCxfPWUucHJveHkseT1lLm1hcCx3PWUuZ3JlcCxiPVwic3RyaW5nXCIsaz1cImNoYW5nZVwiLHg9XCJlcnJvclwiLEM9XCJwcm9ncmVzc1wiLFM9XCIuXCIsVD1cIi5rZW5kb1RyZWVMaXN0XCIsRD1cImNsaWNrXCIsQT1cIm1vdXNlZG93blwiLEU9XCJlZGl0XCIsTT1cInNhdmVcIixQPVwiZXhwYW5kXCIsST1cImNvbGxhcHNlXCIsej1cInJlbW92ZVwiLEY9XCJkYXRhQmluZGluZ1wiLFI9XCJkYXRhQm91bmRcIixCPVwiY2FuY2VsXCIsTD1cImZpbHRlck1lbnVJbml0XCIsTz17d3JhcHBlcjpcImstdHJlZWxpc3Qgay1ncmlkIGstd2lkZ2V0XCIsaGVhZGVyOlwiay1oZWFkZXJcIixidXR0b246XCJrLWJ1dHRvblwiLGFsdDpcImstYWx0XCIsZWRpdENlbGw6XCJrLWVkaXQtY2VsbFwiLGdyb3VwOlwiay10cmVlbGlzdC1ncm91cFwiLGdyaWRUb29sYmFyOlwiay1ncmlkLXRvb2xiYXJcIixncmlkSGVhZGVyOlwiay1ncmlkLWhlYWRlclwiLGdyaWRIZWFkZXJXcmFwOlwiay1ncmlkLWhlYWRlci13cmFwXCIsZ3JpZENvbnRlbnQ6XCJrLWdyaWQtY29udGVudFwiLGdyaWRDb250ZW50V3JhcDpcImstZ3JpZC1jb250ZW50XCIsZ3JpZEZpbHRlcjpcImstZ3JpZC1maWx0ZXJcIixmb290ZXJUZW1wbGF0ZTpcImstZm9vdGVyLXRlbXBsYXRlXCIsbG9hZGluZzpcImstbG9hZGluZ1wiLHJlZnJlc2g6XCJrLWktcmVmcmVzaFwiLHJldHJ5Olwiay1yZXF1ZXN0LXJldHJ5XCIsc2VsZWN0ZWQ6XCJrLXN0YXRlLXNlbGVjdGVkXCIsc3RhdHVzOlwiay1zdGF0dXNcIixsaW5rOlwiay1saW5rXCIsd2l0aEljb246XCJrLXdpdGgtaWNvblwiLGZpbHRlcmFibGU6XCJrLWZpbHRlcmFibGVcIixpY29uOlwiay1pY29uXCIsaWNvbkZpbHRlcjpcImstZmlsdGVyXCIsaWNvbkNvbGxhcHNlOlwiay1pLWNvbGxhcHNlXCIsaWNvbkV4cGFuZDpcImstaS1leHBhbmRcIixpY29uSGlkZGVuOlwiay1pLW5vbmVcIixpY29uUGxhY2VIb2xkZXI6XCJrLWljb24gay1pLW5vbmVcIixpbnB1dDpcImstaW5wdXRcIixkcm9wUG9zaXRpb25zOlwiay1pbnNlcnQtdG9wIGstaW5zZXJ0LWJvdHRvbSBrLWFkZCBrLWluc2VydC1taWRkbGVcIixkcm9wVG9wOlwiay1pbnNlcnQtdG9wXCIsZHJvcEJvdHRvbTpcImstaW5zZXJ0LWJvdHRvbVwiLGRyb3BBZGQ6XCJrLWFkZFwiLGRyb3BNaWRkbGU6XCJrLWluc2VydC1taWRkbGVcIixkcm9wRGVuaWVkOlwiay1kZW5pZWRcIixkcmFnU3RhdHVzOlwiay1kcmFnLXN0YXR1c1wiLGRyYWdDbHVlOlwiay1kcmFnLWNsdWVcIixkcmFnQ2x1ZVRleHQ6XCJrLWNsdWUtdGV4dFwifSxIPXtjcmVhdGU6e2ltYWdlQ2xhc3M6XCJrLWFkZFwiLGNsYXNzTmFtZTpcImstZ3JpZC1hZGRcIixtZXRob2ROYW1lOlwiYWRkUm93XCJ9LGNyZWF0ZWNoaWxkOntpbWFnZUNsYXNzOlwiay1hZGRcIixjbGFzc05hbWU6XCJrLWdyaWQtYWRkXCIsbWV0aG9kTmFtZTpcImFkZFJvd1wifSxkZXN0cm95OntpbWFnZUNsYXNzOlwiay1kZWxldGVcIixjbGFzc05hbWU6XCJrLWdyaWQtZGVsZXRlXCIsbWV0aG9kTmFtZTpcInJlbW92ZVJvd1wifSxlZGl0OntpbWFnZUNsYXNzOlwiay1lZGl0XCIsY2xhc3NOYW1lOlwiay1ncmlkLWVkaXRcIixtZXRob2ROYW1lOlwiZWRpdFJvd1wifSx1cGRhdGU6e2ltYWdlQ2xhc3M6XCJrLXVwZGF0ZVwiLGNsYXNzTmFtZTpcImstcHJpbWFyeSBrLWdyaWQtdXBkYXRlXCIsbWV0aG9kTmFtZTpcInNhdmVSb3dcIn0sY2FuY2VsZWRpdDp7aW1hZ2VDbGFzczpcImstY2FuY2VsXCIsY2xhc3NOYW1lOlwiay1ncmlkLWNhbmNlbFwiLG1ldGhvZE5hbWU6XCJfY2FuY2VsRWRpdFwifSxleGNlbDp7aW1hZ2VDbGFzczpcImstaS1leGNlbFwiLGNsYXNzTmFtZTpcImstZ3JpZC1leGNlbFwiLG1ldGhvZE5hbWU6XCJzYXZlQXNFeGNlbFwifSxwZGY6e2ltYWdlQ2xhc3M6XCJrLWktcGRmXCIsY2xhc3NOYW1lOlwiay1ncmlkLXBkZlwiLG1ldGhvZE5hbWU6XCJzYXZlQXNQREZcIn19LE49di5kZWZpbmUoe2lkOlwiaWRcIixmaWVsZHM6e2lkOnt0eXBlOlwibnVtYmVyXCJ9LHBhcmVudElkOnt0eXBlOlwibnVtYmVyXCIsbnVsbGFibGU6ITB9fSxpbml0OmZ1bmN0aW9uKGUpe3YuZm4uaW5pdC5jYWxsKHRoaXMsZSksdGhpcy5fbG9hZGVkPSExfSxsb2FkZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10P3RoaXMuX2xvYWRlZDoodGhpcy5fbG9hZGVkPWUsdCl9LHNob3VsZFNlcmlhbGl6ZTpmdW5jdGlvbihlKXtyZXR1cm4gdi5mbi5zaG91bGRTZXJpYWxpemUuY2FsbCh0aGlzLGUpJiZcIl9sb2FkZWRcIiE9PWUmJlwiX2Vycm9yXCIhPWUmJlwiX2VkaXRcIiE9ZX19KSxWPWYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe2YuZm4uaW5pdC5jYWxsKHRoaXMscyghMCx7fSx7c2NoZW1hOnttb2RlbEJhc2U6Tixtb2RlbDpOfX0sZSkpfSxfcmVhZERhdGE6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPVtdLHI9dGhpcy5kYXRhKCk7Zm9yKHQ9MCxuPXIubGVuZ3RoO24+dDt0KyspaS5wdXNoKHJbdF0pO3JldHVybiBpLmNvbmNhdChmLmZuLl9yZWFkRGF0YS5jYWxsKHRoaXMsZSkpfSxfcmVhZEFnZ3JlZ2F0ZXM6ZnVuY3Rpb24oZSl7dmFyIHQ9cyh0aGlzLl9hZ2dyZWdhdGVSZXN1bHQsdGhpcy5yZWFkZXIuYWdncmVnYXRlcyhlKSk7cmV0dXJuXCJcImluIHQmJih0W3RoaXMuX2RlZmF1bHRQYXJlbnRJZCgpXT10W1wiXCJdLGRlbGV0ZSB0W1wiXCJdKSx0fSxyZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fc3VidHJlZSh0aGlzLl9jaGlsZHJlbk1hcCh0aGlzLmRhdGEoKSksZS5pZCk7dGhpcy5fcmVtb3ZlSXRlbXModCksZi5mbi5yZW1vdmUuY2FsbCh0aGlzLGUpfSxfZmlsdGVyQ2FsbGJhY2s6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPVtdLHI9ZS50b0FycmF5KCksbz17fTtmb3IodD0wO3IubGVuZ3RoPnQ7dCsrKWZvcihuPXJbdF07biYmKG9bbi5pZF09ITAsIW9bbi5wYXJlbnRJZF0pOylvW24ucGFyZW50SWRdPSEwLG49dGhpcy5wYXJlbnROb2RlKG4pLG4mJmkucHVzaChuKTtyZXR1cm4gbmV3IG0oci5jb25jYXQoaSkpfSxfc3VidHJlZTpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj1lW3RdfHxbXSxvPXRoaXMuX2RlZmF1bHRQYXJlbnRJZCgpO2ZvcihuPTAsaT1yLmxlbmd0aDtpPm47bisrKXJbbl0uaWQhPT1vJiYocj1yLmNvbmNhdCh0aGlzLl9zdWJ0cmVlKGUscltuXS5pZCkpKTtyZXR1cm4gcn0sX2NoaWxkcmVuTWFwOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG89e307Zm9yKGU9dGhpcy5fb2JzZXJ2ZVZpZXcoZSksdD0wO2UubGVuZ3RoPnQ7dCsrKW49ZVt0XSxpPW4uaWQscj1uLnBhcmVudElkLG9baV09b1tpXXx8W10sb1tyXT1vW3JdfHxbXSxvW3JdLnB1c2gobik7cmV0dXJuIG99LF9jYWxjdWxhdGVBZ2dyZWdhdGVzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYSxzO2Zvcih0PXR8fHt9LG49e30sYT10LmZpbHRlcixhJiYoZT1tLnByb2Nlc3MoZSx7ZmlsdGVyOmEsZmlsdGVyQ2FsbGJhY2s6Xyh0aGlzLl9maWx0ZXJDYWxsYmFjayx0aGlzKX0pLmRhdGEpLHM9dGhpcy5fY2hpbGRyZW5NYXAoZSksblt0aGlzLl9kZWZhdWx0UGFyZW50SWQoKV09bmV3IG0odGhpcy5fc3VidHJlZShzLHRoaXMuX2RlZmF1bHRQYXJlbnRJZCgpKSkuYWdncmVnYXRlKHQuYWdncmVnYXRlKSxvPTA7ZS5sZW5ndGg+bztvKyspaT1lW29dLHI9dGhpcy5fc3VidHJlZShzLGkuaWQpLG5baS5pZF09bmV3IG0ocikuYWdncmVnYXRlKHQuYWdncmVnYXRlKTtyZXR1cm4gbn0sX3F1ZXJ5UHJvY2VzczpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGEscyxsO2Zvcih0PXR8fHt9LHQuZmlsdGVyQ2FsbGJhY2s9Xyh0aGlzLl9maWx0ZXJDYWxsYmFjayx0aGlzKSxuPXRoaXMuX2RlZmF1bHRQYXJlbnRJZCgpLGk9bS5wcm9jZXNzKGUsdCkscj10aGlzLl9jaGlsZHJlbk1hcChpLmRhdGEpLGU9cltuXXx8W10sYT0wO2UubGVuZ3RoPmE7YSsrKXM9ZVthXSxzLmlkIT09biYmKGw9cltzLmlkXSxvPSEoIWx8fCFsLmxlbmd0aCkscy5sb2FkZWQoKXx8cy5sb2FkZWQobyksKHMubG9hZGVkKCl8fHMuaGFzQ2hpbGRyZW4hPT0hMCkmJihzLmhhc0NoaWxkcmVuPW8pLG8mJmUuc3BsaWNlLmFwcGx5KGUsW2ErMSwwXS5jb25jYXQobCkpKTtyZXR1cm4gaS5kYXRhPWUsaX0sX3F1ZXVlUmVxdWVzdDpmdW5jdGlvbihlLHQpe3QuY2FsbCh0aGlzKX0sX21vZGVsTG9hZGVkOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0KGUpO3QubG9hZGVkKCEwKSx0Lmhhc0NoaWxkcmVuPXRoaXMuY2hpbGROb2Rlcyh0KS5sZW5ndGg+MH0sX21vZGVsRXJyb3I6ZnVuY3Rpb24oZSx0KXt0aGlzLmdldChlKS5fZXJyb3I9dH0scmVhZDpmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5pZHx8KHRoaXMuX2RhdGE9dGhpcy5fb2JzZXJ2ZShbXSkpLGYuZm4ucmVhZC5jYWxsKHRoaXMsZSl9LGxvYWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJfcXVlcnlcIjtyZXR1cm4hZS5sb2FkZWQoKSYmZS5oYXNDaGlsZHJlbiYmKHQ9XCJyZWFkXCIpLHRoaXNbdF0oe2lkOmUuaWR9KS50aGVuKF8odGhpcy5fbW9kZWxMb2FkZWQsdGhpcyxlLmlkKSxfKHRoaXMuX21vZGVsRXJyb3IsdGhpcyxlLmlkKSl9LF9ieVBhcmVudElkOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPVtdLG89dGhpcy52aWV3KCk7aWYoZT09PXQpcmV0dXJuW107Zm9yKGk9MDtvLmxlbmd0aD5pO2krKyluPW8uYXQoaSksbi5wYXJlbnRJZD09ZSYmci5wdXNoKG4pO3JldHVybiByfSxfZGVmYXVsdFBhcmVudElkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVhZGVyLm1vZGVsLmZuLmRlZmF1bHRzLnBhcmVudElkfSxjaGlsZE5vZGVzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9ieVBhcmVudElkKGUuaWQsdGhpcy5fZGVmYXVsdFBhcmVudElkKCkpfSxyb290Tm9kZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnlQYXJlbnRJZCh0aGlzLl9kZWZhdWx0UGFyZW50SWQoKSl9LHBhcmVudE5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0KGUucGFyZW50SWQpfSxsZXZlbDpmdW5jdGlvbihlKXt2YXIgdD0tMTtlIGluc3RhbmNlb2YgTnx8KGU9dGhpcy5nZXQoZSkpO2RvIGU9dGhpcy5wYXJlbnROb2RlKGUpLHQrKzt3aGlsZShlKTtyZXR1cm4gdH0sZmlsdGVyOmZ1bmN0aW9uKGUpe3ZhciBuPWYuZm4uZmlsdGVyO3JldHVybiBlPT09dD9uLmNhbGwodGhpcyxlKToobi5jYWxsKHRoaXMsZSksdCl9fSk7Vi5jcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIGUuaXNBcnJheSh0KT90PXtkYXRhOnR9OnQgaW5zdGFuY2VvZiBnJiYodD17ZGF0YTp0LnRvSlNPTigpfSksdCBpbnN0YW5jZW9mIFY/dDpuZXcgVih0KX0saT1rZW5kby5PYnNlcnZhYmxlLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe2tlbmRvLk9ic2VydmFibGUuZm4uaW5pdC5jYWxsKHRoaXMpLHQ9dGhpcy5vcHRpb25zPXMoITAse30sdGhpcy5vcHRpb25zLHQpLHRoaXMuZWxlbWVudD1lLHRoaXMuYmluZCh0aGlzLmV2ZW50cyx0KSx0aGlzLm1vZGVsPXRoaXMub3B0aW9ucy5tb2RlbCx0aGlzLmZpZWxkcz10aGlzLl9maWVsZHModGhpcy5vcHRpb25zLmNvbHVtbnMpLHRoaXMuX2luaXRDb250YWluZXIoKSx0aGlzLmNyZWF0ZUVkaXRhYmxlKCl9LGV2ZW50czpbXSxfaW5pdENvbnRhaW5lcjpmdW5jdGlvbigpe3RoaXMud3JhcHBlcj10aGlzLmVsZW1lbnR9LGNyZWF0ZUVkaXRhYmxlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zO3RoaXMuZWRpdGFibGU9bmV3IGguRWRpdGFibGUodGhpcy53cmFwcGVyLHtmaWVsZHM6dGhpcy5maWVsZHMsdGFyZ2V0OmUudGFyZ2V0LGNsZWFyQ29udGFpbmVyOmUuY2xlYXJDb250YWluZXIsbW9kZWw6dGhpcy5tb2RlbH0pfSxfaXNFZGl0YWJsZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5maWVsZCYmdGhpcy5tb2RlbC5lZGl0YWJsZShlLmZpZWxkKX0sX2ZpZWxkczpmdW5jdGlvbihlKXt2YXIgdCxuLGkscj1bXTtmb3IodD0wLG49ZS5sZW5ndGg7bj50O3QrKylpPWVbdF0sdGhpcy5faXNFZGl0YWJsZShpKSYmci5wdXNoKHtmaWVsZDppLmZpZWxkLGZvcm1hdDppLmZvcm1hdCxlZGl0b3I6aS5lZGl0b3J9KTtyZXR1cm4gcn0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRpdGFibGUuZW5kKCl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95KCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVkaXRhYmxlLmRlc3Ryb3koKSx0aGlzLmVkaXRhYmxlLmVsZW1lbnQuZmluZChcIltcIitrZW5kby5hdHRyKFwiY29udGFpbmVyLWZvclwiKStcIl1cIikuZW1wdHkoKSx0aGlzLm1vZGVsPXRoaXMud3JhcHBlcj10aGlzLmVsZW1lbnQ9dGhpcy5jb2x1bW5zPXRoaXMuZWRpdGFibGU9bnVsbH19KSxyPWkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7aS5mbi5pbml0LmNhbGwodGhpcyxlLHQpLHRoaXMuX2F0dGFjaEhhbmRsZXJzKCksdGhpcy5vcGVuKCl9LGV2ZW50czpbQixNXSxvcHRpb25zOnt3aW5kb3c6e21vZGFsOiEwLHJlc2l6YWJsZTohMSxkcmFnZ2FibGU6ITAsdGl0bGU6XCJFZGl0XCIsdmlzaWJsZTohMX19LF9pbml0Q29udGFpbmVyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLG49W107XHJcbnRoaXMud3JhcHBlcj1lKCc8ZGl2IGNsYXNzPVwiay1wb3B1cC1lZGl0LWZvcm1cIi8+JykuYXR0cihrZW5kby5hdHRyKFwidWlkXCIpLHRoaXMubW9kZWwudWlkKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJrLWVkaXQtZm9ybS1jb250YWluZXJcIi8+JyksdC50ZW1wbGF0ZT8odGhpcy5fYXBwZW5kVGVtcGxhdGUobiksdGhpcy5maWVsZHM9W10pOnRoaXMuX2FwcGVuZEZpZWxkcyhuKSx0aGlzLl9hcHBlbmRCdXR0b25zKG4pLG5ldyBsLlRyZWUodGhpcy53cmFwcGVyLmNoaWxkcmVuKClbMF0pLnJlbmRlcihuKSx0aGlzLndyYXBwZXIuYXBwZW5kVG8odC5hcHBlbmRUbyksdGhpcy53aW5kb3c9bmV3IGguV2luZG93KHRoaXMud3JhcHBlcix0LndpbmRvdyl9LF9hcHBlbmRUZW1wbGF0ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnMudGVtcGxhdGU7dHlwZW9mIHQ9PT1iJiYodD13aW5kb3cudW5lc2NhcGUodCkpLHQ9a2VuZG8udGVtcGxhdGUodCkodGhpcy5tb2RlbCksZS5wdXNoKHUodCkpfSxfYXBwZW5kRmllbGRzOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPXRoaXMub3B0aW9ucy5jb2x1bW5zO2Zvcih0PTAsbj1yLmxlbmd0aDtuPnQ7dCsrKWk9clt0XSxpLmNvbW1hbmR8fChlLnB1c2godSgnPGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbCBmb3I9XCInK2kuZmllbGQrJ1wiPicrKGkudGl0bGV8fGkuZmllbGR8fFwiXCIpK1wiPC9sYWJlbD48L2Rpdj5cIikpLGUucHVzaCh0aGlzLl9pc0VkaXRhYmxlKGkpP3UoXCI8ZGl2IFwiK2tlbmRvLmF0dHIoXCJjb250YWluZXItZm9yXCIpKyc9XCInK2kuZmllbGQrJ1wiIGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PC9kaXY+Jyk6YyhcImRpdlwiLHtcImNsYXNzXCI6XCJrLWVkaXQtZmllbGRcIn0sW3RoaXMub3B0aW9ucy5maWVsZFJlbmRlcmVyKGksdGhpcy5tb2RlbCldKSkpfSxfYXBwZW5kQnV0dG9uczpmdW5jdGlvbihlKXtlLnB1c2goYyhcImRpdlwiLHtcImNsYXNzXCI6XCJrLWVkaXQtYnV0dG9ucyBrLXN0YXRlLWRlZmF1bHRcIn0sdGhpcy5vcHRpb25zLmNvbW1hbmRSZW5kZXJlcigpKSl9LF9hdHRhY2hIYW5kbGVyczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2NhbmNlbFByb3h5PV8odGhpcy5fY2FuY2VsLHRoaXMpO3RoaXMud3JhcHBlci5vbihEK1QsXCIuay1ncmlkLWNhbmNlbFwiLHRoaXMuX2NhbmNlbFByb3h5KSx0aGlzLl9zYXZlUHJveHk9Xyh0aGlzLl9zYXZlLHRoaXMpLHRoaXMud3JhcHBlci5vbihEK1QsXCIuay1ncmlkLXVwZGF0ZVwiLHRoaXMuX3NhdmVQcm94eSksdGhpcy53aW5kb3cuYmluZChcImNsb3NlXCIsZnVuY3Rpb24odCl7dC51c2VyVHJpZ2dlcmVkJiZlKHQpfSl9LF9kZXR0YWNoSGFuZGxlcnM6ZnVuY3Rpb24oKXt0aGlzLl9jYW5jZWxQcm94eT1udWxsLHRoaXMuX3NhdmVQcm94eT1udWxsLHRoaXMud3JhcHBlci5vZmYoVCl9LF9jYW5jZWw6ZnVuY3Rpb24oZSl7dGhpcy50cmlnZ2VyKEIsZSl9LF9zYXZlOmZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKE0pfSxvcGVuOmZ1bmN0aW9uKCl7dGhpcy53aW5kb3cuY2VudGVyKCkub3BlbigpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMud2luZG93LmJpbmQoXCJkZWFjdGl2YXRlXCIsXyh0aGlzLmRlc3Ryb3ksdGhpcykpLmNsb3NlKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLndpbmRvdy5kZXN0cm95KCksdGhpcy53aW5kb3c9bnVsbCx0aGlzLl9kZXR0YWNoSGFuZGxlcnMoKSxpLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKX19KSxvPXAuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7cC5mbi5pbml0LmNhbGwodGhpcyxlLHQpLHRoaXMuX2RhdGFTb3VyY2UodGhpcy5vcHRpb25zLmRhdGFTb3VyY2UpLHRoaXMuX2NvbHVtbnMoKSx0aGlzLl9sYXlvdXQoKSx0aGlzLl9zb3J0YWJsZSgpLHRoaXMuX2ZpbHRlcmFibGUoKSx0aGlzLl9zZWxlY3RhYmxlKCksdGhpcy5fYXR0YWNoRXZlbnRzKCksdGhpcy5fdG9vbGJhcigpLHRoaXMuX3Njcm9sbGFibGUoKSx0aGlzLm9wdGlvbnMuYXV0b0JpbmQmJnRoaXMuZGF0YVNvdXJjZS5mZXRjaCgpLHRoaXMuX2FkanVzdEhlaWdodCgpLGtlbmRvLm5vdGlmeSh0aGlzKX0sX3Njcm9sbGFibGU6ZnVuY3Rpb24oKXt2YXIgZSx0O3RoaXMub3B0aW9ucy5zY3JvbGxhYmxlJiYoZT10aGlzLmhlYWRlci5jbG9zZXN0KFwiLmstZ3JpZC1oZWFkZXItd3JhcFwiKSx0aGlzLmNvbnRlbnQuY2xvc2VzdChcIi5rLWdyaWQtY29udGVudFwiKS5iaW5kKFwic2Nyb2xsXCIrVCxmdW5jdGlvbigpe2Uuc2Nyb2xsTGVmdCh0aGlzLnNjcm9sbExlZnQpfSksdD1rZW5kby50b3VjaFNjcm9sbGVyKHRoaXMuY29udGVudC5jbG9zZXN0KFwiZGl2XCIpKSx0JiZ0Lm1vdmFibGUmJih0aGlzLl90b3VjaFNjcm9sbGVyPXQpKX0sX3Byb2dyZXNzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLm1lc3NhZ2VzO3RoaXMuY29udGVudC5maW5kKFwidHJcIikubGVuZ3RofHx0aGlzLl9zaG93U3RhdHVzKGtlbmRvLnRlbXBsYXRlKFwiPHNwYW4gY2xhc3M9JyM9IGNsYXNzTmFtZSAjJyAvPiAjOiBtZXNzYWdlcy5sb2FkaW5nICNcIikoe2NsYXNzTmFtZTpPLmljb24rXCIgXCIrTy5sb2FkaW5nLG1lc3NhZ2VzOmV9KSl9LF9lcnJvcjpmdW5jdGlvbihlKXt0aGlzLmRhdGFTb3VyY2Uucm9vdE5vZGVzKCkubGVuZ3RofHx0aGlzLl9yZW5kZXIoe2Vycm9yOmV9KX0scmVmcmVzaDpmdW5jdGlvbihlKXtlPWV8fHt9LFwiaXRlbWNoYW5nZVwiPT1lLmFjdGlvbiYmdGhpcy5lZGl0b3J8fHRoaXMudHJpZ2dlcihGKXx8KHRoaXMuX2FuZ3VsYXJJdGVtcyhcImNsZWFudXBcIiksdGhpcy5fYW5ndWxhckZvb3RlcnMoXCJjbGVhbnVwXCIpLHRoaXMuX2NhbmNlbEVkaXRvcigpLHRoaXMuX3JlbmRlcigpLHRoaXMuX2FkanVzdEhlaWdodCgpLHRoaXMuX2FuZ3VsYXJJdGVtcyhcImNvbXBpbGVcIiksdGhpcy5fYW5ndWxhckZvb3RlcnMoXCJjb21waWxlXCIpLHRoaXMudHJpZ2dlcihSKSl9LF9hbmd1bGFyRm9vdGVyczpmdW5jdGlvbih0KXt2YXIgbixpLHIsbz10aGlzLmRhdGFTb3VyY2UuYWdncmVnYXRlcygpLGE9dGhpcy5jb250ZW50LmZpbmQoXCJ0clwiKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzKS5oYXNDbGFzcyhPLmZvb3RlclRlbXBsYXRlKX0pO2ZvcihuPTA7YS5sZW5ndGg+bjtuKyspaT1hLmVxKG4pLHI9b1tpLmF0dHIoXCJkYXRhLXBhcmVudElkXCIpXSx0aGlzLl9hbmd1bGFyRm9vdGVyKHQsaS5maW5kKFwidGRcIikuZ2V0KCkscil9LF9hbmd1bGFyRm9vdGVyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLmNvbHVtbnM7dGhpcy5hbmd1bGFyKGUsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6dCxkYXRhOnkoaSxmdW5jdGlvbihlKXtyZXR1cm57Y29sdW1uOmUsYWdncmVnYXRlOm4mJm5bZS5maWVsZF19fSl9fSl9LGl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5maW5kKFwidHJcIikuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIWUodGhpcykuaGFzQ2xhc3MoTy5mb290ZXJUZW1wbGF0ZSl9KX0sX3Nob3dTdGF0dXM6ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5lbGVtZW50LmZpbmQoXCIuay1zdGF0dXNcIik7bi5sZW5ndGh8fChuPWUoXCI8ZGl2IGNsYXNzPSdrLXN0YXR1cycgLz5cIikuYXBwZW5kVG8odGhpcy5lbGVtZW50KSksdGhpcy5fY29udGVudFRyZWUucmVuZGVyKFtdKSx0aGlzLmNvbnRlbnQuY2xvc2VzdChTK08uZ3JpZENvbnRlbnQpLmhpZGUoKSxuLmh0bWwodCl9LF9oaWRlU3RhdHVzOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LmZpbmQoXCIuay1zdGF0dXNcIikucmVtb3ZlKCksdGhpcy5jb250ZW50LmNsb3Nlc3QoUytPLmdyaWRDb250ZW50KS5zaG93KCl9LF9hZGp1c3RIZWlnaHQ6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuZWxlbWVudCxuPXQuZmluZChTK08uZ3JpZENvbnRlbnRXcmFwKSxpPXQuZmluZChTK08uZ3JpZEhlYWRlcikscj10LmZpbmQoUytPLmdyaWRUb29sYmFyKTt0LmhlaWdodCh0aGlzLm9wdGlvbnMuaGVpZ2h0KSxlPWZ1bmN0aW9uKGUpe3ZhciB0LG47cmV0dXJuIGVbMF0uc3R5bGUuaGVpZ2h0PyEwOih0PWUuaGVpZ2h0KCksZS5oZWlnaHQoXCJhdXRvXCIpLG49ZS5oZWlnaHQoKSxlLmhlaWdodChcIlwiKSx0IT1uKX0sZSh0KSYmbi5oZWlnaHQodC5oZWlnaHQoKS1pLm91dGVySGVpZ2h0KCktci5vdXRlckhlaWdodCgpKX0sZGVzdHJveTpmdW5jdGlvbigpe3AuZm4uZGVzdHJveS5jYWxsKHRoaXMpO3ZhciBlPXRoaXMuZGF0YVNvdXJjZTtlLnVuYmluZChrLHRoaXMuX3JlZnJlc2hIYW5kbGVyKSxlLnVuYmluZCh4LHRoaXMuX2Vycm9ySGFuZGxlciksZS51bmJpbmQoQyx0aGlzLl9wcm9ncmVzc0hhbmRsZXIpLHRoaXMuX2Rlc3Ryb3lFZGl0b3IoKSx0aGlzLmVsZW1lbnQub2ZmKFQpLHRoaXMuX3RvdWNoU2Nyb2xsZXImJnRoaXMuX3RvdWNoU2Nyb2xsZXIuZGVzdHJveSgpLHRoaXMuX3JlZnJlc2hIYW5kbGVyPXRoaXMuX2Vycm9ySGFuZGxlcj10aGlzLl9wcm9ncmVzc0hhbmRsZXI9bnVsbCx0aGlzLmhlYWRlcj10aGlzLmNvbnRlbnQ9dGhpcy5lbGVtZW50PW51bGwsdGhpcy5fc3RhdHVzVHJlZT10aGlzLl9oZWFkZXJUcmVlPXRoaXMuX2NvbnRlbnRUcmVlPW51bGx9LG9wdGlvbnM6e25hbWU6XCJUcmVlTGlzdFwiLGNvbHVtbnM6W10sYXV0b0JpbmQ6ITAsc2Nyb2xsYWJsZTohMCxzZWxlY3RhYmxlOiExLHNvcnRhYmxlOiExLHRvb2xiYXI6bnVsbCxoZWlnaHQ6bnVsbCxtZXNzYWdlczp7bm9Sb3dzOlwiTm8gcmVjb3JkcyB0byBkaXNwbGF5XCIsbG9hZGluZzpcIkxvYWRpbmcuLi5cIixyZXF1ZXN0RmFpbGVkOlwiUmVxdWVzdCBmYWlsZWQuXCIscmV0cnk6XCJSZXRyeVwiLGNvbW1hbmRzOntlZGl0OlwiRWRpdFwiLHVwZGF0ZTpcIlVwZGF0ZVwiLGNhbmNlbGVkaXQ6XCJDYW5jZWxcIixjcmVhdGU6XCJBZGQgbmV3IHJlY29yZFwiLGNyZWF0ZWNoaWxkOlwiQWRkIGNoaWxkIHJlY29yZFwiLGRlc3Ryb3k6XCJEZWxldGVcIixleGNlbDpcIkV4cG9ydCB0byBFeGNlbFwiLHBkZjpcIkV4cG9ydCB0byBQREZcIn19LGV4Y2VsOntoaWVyYXJjaHk6ITB9LGZpbHRlcmFibGU6ITEsZWRpdGFibGU6ITF9LGV2ZW50czpbayxFLE0seixQLEksRixSLEIsTF0sX3RvZ2dsZTpmdW5jdGlvbihlLG4pe3ZhciBpPWUubG9hZGVkKCk7ZS5fZXJyb3ImJihlLmV4cGFuZGVkPSExLGUuX2Vycm9yPXQpLChpfHwhZS5leHBhbmRlZCkmJih0PT09biYmKG49IWUuZXhwYW5kZWQpLGUuZXhwYW5kZWQ9bixpfHx0aGlzLmRhdGFTb3VyY2UubG9hZChlKS5hbHdheXMoXyh0aGlzLnJlZnJlc2gsdGhpcykpLHRoaXMucmVmcmVzaCgpKX0sZXhwYW5kOmZ1bmN0aW9uKGUpe3RoaXMuX3RvZ2dsZSh0aGlzLmRhdGFJdGVtKGUpLCEwKX0sY29sbGFwc2U6ZnVuY3Rpb24oZSl7dGhpcy5fdG9nZ2xlKHRoaXMuZGF0YUl0ZW0oZSksITEpfSxfdG9nZ2xlQ2hpbGRyZW46ZnVuY3Rpb24odCl7dmFyIG49ZSh0LmN1cnJlbnRUYXJnZXQpLGk9dGhpcy5kYXRhSXRlbShuKSxyPWkuZXhwYW5kZWQ/STpQO3RoaXMudHJpZ2dlcihyLHttb2RlbDppfSl8fHRoaXMuX3RvZ2dsZShpKSx0LnByZXZlbnREZWZhdWx0KCl9LF9hdHRhY2hFdmVudHM6ZnVuY3Rpb24oKXt2YXIgZT1TK08uaWNvbkNvbGxhcHNlK1wiLCAuXCIrTy5pY29uRXhwYW5kK1wiLCAuXCIrTy5yZWZyZXNoLHQ9UytPLnJldHJ5LG49dGhpcy5kYXRhU291cmNlO3RoaXMuZWxlbWVudC5vbihBK1QsZSxfKHRoaXMuX3RvZ2dsZUNoaWxkcmVuLHRoaXMpKS5vbihEK1QsdCxfKG4uZmV0Y2gsbikpLm9uKEQrVCxcIi5rLWJ1dHRvbltkYXRhLWNvbW1hbmRdXCIsXyh0aGlzLl9jb21tYW5kQ2xpY2ssdGhpcykpfSxfY29tbWFuZEJ5TmFtZTpmdW5jdGlvbihlKXt2YXIgdCxuLGkscj10aGlzLmNvbHVtbnM7aWYoZT1lLnRvTG93ZXJDYXNlKCksSFtlXSlyZXR1cm4gSFtlXTtmb3IodD0wO3IubGVuZ3RoPnQ7dCsrKWlmKGk9clt0XS5jb21tYW5kKWZvcihuPTA7aS5sZW5ndGg+bjtuKyspaWYoaVtuXS5uYW1lLnRvTG93ZXJDYXNlKCk9PWUpcmV0dXJuIGlbbl19LF9jb21tYW5kQ2xpY2s6ZnVuY3Rpb24obil7dmFyIGk9ZShuLmN1cnJlbnRUYXJnZXQpLHI9aS5hdHRyKFwiZGF0YS1jb21tYW5kXCIpLG89dGhpcy5fY29tbWFuZEJ5TmFtZShyKSxhPWkuY2xvc2VzdChcInRyXCIpO2E9YS5sZW5ndGg/YTp0LG8mJihvLm1ldGhvZE5hbWU/dGhpc1tvLm1ldGhvZE5hbWVdKGEpOm8uY2xpY2smJm8uY2xpY2suY2FsbCh0aGlzLG4pKX0sX2NvbHVtbnM6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMub3B0aW9ucy5jb2x1bW5zfHxbXTt0aGlzLmNvbHVtbnM9eSh0LGZ1bmN0aW9uKGUpe3JldHVybiBlPVwic3RyaW5nXCI9PXR5cGVvZiBlP3tmaWVsZDplfTplLHMoe2VuY29kZWQ6ITB9LGUpfSksZT13KHRoaXMuY29sdW1ucyxmdW5jdGlvbihlKXtyZXR1cm4gZS5leHBhbmRhYmxlfSksdGhpcy5jb2x1bW5zLmxlbmd0aCYmIWUubGVuZ3RoJiYodGhpcy5jb2x1bW5zWzBdLmV4cGFuZGFibGU9ITApLHRoaXMuX2NvbHVtblRlbXBsYXRlcygpLHRoaXMuX2NvbHVtbkF0dHJpYnV0ZXMoKX0sX2NvbHVtblRlbXBsYXRlczpmdW5jdGlvbigpe3ZhciBlLHQsbixpPXRoaXMuY29sdW1ucztmb3IoZT0wLHQ9aS5sZW5ndGg7dD5lO2UrKyluPWlbZV0sbi50ZW1wbGF0ZSYmKG4udGVtcGxhdGU9a2VuZG8udGVtcGxhdGUobi50ZW1wbGF0ZSkpLG4uaGVhZGVyVGVtcGxhdGUmJihuLmhlYWRlclRlbXBsYXRlPWtlbmRvLnRlbXBsYXRlKG4uaGVhZGVyVGVtcGxhdGUpKSxuLmZvb3RlclRlbXBsYXRlJiYobi5mb290ZXJUZW1wbGF0ZT1rZW5kby50ZW1wbGF0ZShuLmZvb3RlclRlbXBsYXRlKSl9LF9jb2x1bW5BdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixvLGE9dGhpcy5jb2x1bW5zO2ZvcihlPTAsdD1hLmxlbmd0aDt0PmU7ZSsrKWlmKG49YVtlXS5hdHRyaWJ1dGVzLG4mJm4uc3R5bGUpZm9yKGk9bi5zdHlsZS5zcGxpdChcIjtcIiksbi5zdHlsZT17fSxyPTA7aS5sZW5ndGg+cjtyKyspbz1pW3JdLnNwbGl0KFwiOlwiKSxuLnN0eWxlW29bMF1dPW9bMV19LF9sYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy5lbGVtZW50LGk9dGhpcy5fY29sZ3JvdXAoKSxyPVwiXCI7dGhpcy53cmFwcGVyPW4uYWRkQ2xhc3MoTy53cmFwcGVyKSxyPVwiPGRpdiBjbGFzcz0nIz0gZ3JpZEhlYWRlciAjJyBzdHlsZT1cXFwicGFkZGluZy1yaWdodDogXCIra2VuZG8uc3VwcG9ydC5zY3JvbGxiYXIoKStcInB4O1xcXCI+PGRpdiBjbGFzcz0nIz0gZ3JpZEhlYWRlcldyYXAgIyc+PHRhYmxlIHJvbGU9J2dyaWQnPlwiK2krXCI8dGhlYWQgcm9sZT0ncm93Z3JvdXAnIC8+PC90YWJsZT48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPScjPSBncmlkQ29udGVudFdyYXAgIyc+PHRhYmxlIHJvbGU9J3RyZWVncmlkJyB0YWJpbmRleD0nMCc+XCIraStcIjx0Ym9keSAvPjwvdGFibGU+PC9kaXY+XCIsdGhpcy5vcHRpb25zLnNjcm9sbGFibGV8fChyPVwiPHRhYmxlIHJvbGU9J3RyZWVncmlkJyB0YWJpbmRleD0nMCc+XCIraStcIjx0aGVhZCBjbGFzcz0nIz0gZ3JpZEhlYWRlciAjJyByb2xlPSdyb3dncm91cCcgLz48dGJvZHkgLz48L3RhYmxlPlwiKSx0aGlzLm9wdGlvbnMudG9vbGJhciYmKHI9XCI8ZGl2IGNsYXNzPScjPSBoZWFkZXIgIyAjPSBncmlkVG9vbGJhciAjJyAvPlwiK3IpLG4uYXBwZW5kKGtlbmRvLnRlbXBsYXRlKHIpKE8pK1wiPGRpdiBjbGFzcz0nay1zdGF0dXMnIC8+XCIpLHRoaXMudG9vbGJhcj1uLmZpbmQoUytPLmdyaWRUb29sYmFyKSxlPXRoaXMuaGVhZGVyPW4uZmluZChTK08uZ3JpZEhlYWRlcikuZmluZChcInRoZWFkXCIpLmFkZEJhY2soKS5maWx0ZXIoXCJ0aGVhZFwiKSx0aGlzLl9oZWFkZXJUcmVlPW5ldyBsLlRyZWUodGhpcy5oZWFkZXJbMF0pLHRoaXMuX2hlYWRlclRyZWUucmVuZGVyKFtjKFwidHJcIix7cm9sZTpcInJvd1wifSx0aGlzLl90aHMoKSldKSx0PXRoaXMuY29sdW1ucyx0aGlzLmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6ZS5maW5kKFwidGguay1oZWFkZXJcIikuZ2V0KCksZGF0YTp5KHQsZnVuY3Rpb24oZSl7cmV0dXJue2NvbHVtbjplfX0pfX0pLHRoaXMuY29udGVudD1uLmZpbmQoUytPLmdyaWRDb250ZW50V3JhcCkuZmluZChcInRib2R5XCIpLHRoaXMuY29udGVudC5sZW5ndGh8fCh0aGlzLmNvbnRlbnQ9bi5maW5kKFwidGJvZHlcIikpLHRoaXMuX2NvbnRlbnRUcmVlPW5ldyBsLlRyZWUodGhpcy5jb250ZW50WzBdKSx0aGlzLl9zdGF0dXNUcmVlPW5ldyBsLlRyZWUodGhpcy5lbGVtZW50LmNoaWxkcmVuKFwiLmstc3RhdHVzXCIpWzBdKX0sX3Rvb2xiYXI6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMub3B0aW9ucy50b29sYmFyLGk9dGhpcy50b29sYmFyO24mJihlLmlzQXJyYXkobik/KHQ9dGhpcy5fYnVpbGRDb21tYW5kcyhuKSxuZXcgbC5UcmVlKGlbMF0pLnJlbmRlcih0KSk6aS5hcHBlbmQoa2VuZG8udGVtcGxhdGUobikoe30pKSx0aGlzLmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6aS5nZXQoKX19KSl9LF9yZW5kZXI6ZnVuY3Rpb24oZSl7dmFyIHQsbixpO2U9ZXx8e30sdD10aGlzLm9wdGlvbnMubWVzc2FnZXMsbj10aGlzLmRhdGFTb3VyY2Uucm9vdE5vZGVzKCksaT10aGlzLmRhdGFTb3VyY2UuYWdncmVnYXRlcygpLHRoaXMuX2Fic29sdXRlSW5kZXg9MCxlLmVycm9yP3RoaXMuX3Nob3dTdGF0dXMoa2VuZG8udGVtcGxhdGUoXCIjOiBtZXNzYWdlcy5yZXF1ZXN0RmFpbGVkICMgPGJ1dHRvbiBjbGFzcz0nIz0gYnV0dG9uQ2xhc3MgIyc+IzogbWVzc2FnZXMucmV0cnkgIzwvYnV0dG9uPlwiKSh7YnV0dG9uQ2xhc3M6W08uYnV0dG9uLE8ucmV0cnldLmpvaW4oXCIgXCIpLG1lc3NhZ2VzOnR9KSk6bi5sZW5ndGg/KHRoaXMuX2hpZGVTdGF0dXMoKSx0aGlzLl9jb250ZW50VHJlZS5yZW5kZXIodGhpcy5fdHJzKHthZ2dyZWdhdGVzOmUuYWdncmVnYXRlcyxkYXRhOm4sdmlzaWJsZTohMCxsZXZlbDowfSkpKTp0aGlzLl9zaG93U3RhdHVzKGtlbmRvLmh0bWxFbmNvZGUodC5ub1Jvd3MpKX0sX3RoczpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbyxhPXRoaXMuY29sdW1ucyxzPVtdO2ZvcihyPTAsbz1hLmxlbmd0aDtvPnI7cisrKWU9YVtyXSxuPVtdLGk9W08uaGVhZGVyXSx0PWUuaGVhZGVyVGVtcGxhdGU/ZS5oZWFkZXJUZW1wbGF0ZSh7fSk6ZS50aXRsZXx8ZS5maWVsZHx8XCJcIixuLnB1c2goZS5zb3J0YWJsZT9jKFwiYVwiLHtocmVmOlwiI1wiLGNsYXNzTmFtZTpPLmxpbmt9LFtkKHQpXSk6ZS5oZWFkZXJUZW1wbGF0ZT91KHQpOmQodCkpLHMucHVzaChjKFwidGhcIix7XCJkYXRhLWZpZWxkXCI6ZS5maWVsZCxcImRhdGEtdGl0bGVcIjplLnRpdGxlLGNsYXNzTmFtZTppLmpvaW4oXCIgXCIpLHJvbGU6XCJjb2x1bW5oZWFkZXJcIn0sbikpO3JldHVybiBzfSxfY29sZ3JvdXA6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT10aGlzLmNvbHVtbnMscj1bXTtmb3IodD0wLG49aS5sZW5ndGg7bj50O3QrKylyLnB1c2goXCI8Y29sIFwiKSxlPWlbdF0ud2lkdGgsZSYmMCE9PXBhcnNlSW50KGUsMTApJiYoci5wdXNoKFwic3R5bGU9J3dpZHRoOlwiKSxyLnB1c2goXCJzdHJpbmdcIj09dHlwZW9mIGU/ZTplK1wicHhcIiksci5wdXNoKFwiJ1wiKSksci5wdXNoKFwiLz5cIik7cmV0dXJuXCI8Y29sZ3JvdXA+XCIrci5qb2luKFwiXCIpK1wiPC9jb2xncm91cD5cIn0sX3RyczpmdW5jdGlvbihlKXt2YXIgbixpLHIsbyxhLHMsbCxjLGQ9W10sdT1lLmxldmVsLGg9ZS5kYXRhLHA9dGhpcy5kYXRhU291cmNlLGY9cC5hZ2dyZWdhdGVzKCl8fHt9O2ZvcihzPTAsbD1oLmxlbmd0aDtsPnM7cysrKXI9W10sbj1oW3NdLGE9bi5sb2FkZWQoKSYmcC5jaGlsZE5vZGVzKG4pLG89YSYmYS5sZW5ndGgsaT17XCJkYXRhLXVpZFwiOm4udWlkLHJvbGU6XCJyb3dcIn0sbyYmKGlbXCJhcmlhLWV4cGFuZGVkXCJdPSEhbi5leHBhbmRlZCksdGhpcy5fYWJzb2x1dGVJbmRleCUyIT09MCYmci5wdXNoKE8uYWx0KSxlLnZpc2libGU/dGhpcy5fYWJzb2x1dGVJbmRleCsrOmkuc3R5bGU9e2Rpc3BsYXk6XCJub25lXCJ9LG8mJnIucHVzaChPLmdyb3VwKSxuLl9lZGl0JiZyLnB1c2goXCJrLWdyaWQtZWRpdC1yb3dcIiksaS5jbGFzc05hbWU9ci5qb2luKFwiIFwiKXx8dCxkLnB1c2godGhpcy5fdGRzKHttb2RlbDpuLGF0dHI6aSxsZXZlbDp1fSxfKHRoaXMuX3RkLHRoaXMpKSksbyYmKGQ9ZC5jb25jYXQodGhpcy5fdHJzKHtwYXJlbnRJZDpuLmlkLGFnZ3JlZ2F0ZXM6Zix2aXNpYmxlOmUudmlzaWJsZSYmISFuLmV4cGFuZGVkLGRhdGE6YSxsZXZlbDp1KzF9KSkpO3JldHVybiB0aGlzLl9oYXNGb290ZXJUZW1wbGF0ZSgpJiYoYz1lLnBhcmVudElkfHxudWxsLGk9e2NsYXNzTmFtZTpPLmZvb3RlclRlbXBsYXRlLFwiZGF0YS1wYXJlbnRJZFwiOmN9LGUudmlzaWJsZXx8KGkuc3R5bGU9e2Rpc3BsYXk6XCJub25lXCJ9KSxkLnB1c2godGhpcy5fdGRzKHttb2RlbDpmW2NdLGF0dHI6aSxsZXZlbDp1fSx0aGlzLl9mb290ZXJUZCkpKSxkfSxfZm9vdGVyVGQ6ZnVuY3Rpb24odCl7dmFyIGk9W10scj10LmNvbHVtbixvPXQuY29sdW1uLmZvb3RlclRlbXBsYXRlfHxlLm5vb3AsYT10Lm1vZGVsW3IuZmllbGRdfHx7fSxsPXtyb2xlOlwiZ3JpZGNlbGxcIn07cmV0dXJuIHIuZXhwYW5kYWJsZSYmKGk9aS5jb25jYXQobih7bGV2ZWw6dC5sZXZlbCsxLGNsYXNzTmFtZTpPLmljb25QbGFjZUhvbGRlcn0pKSksci5hdHRyaWJ1dGVzJiZzKGwsci5hdHRyaWJ1dGVzKSxpLnB1c2goZChvKGEpfHxcIlwiKSksYyhcInRkXCIsbCxpKX0sX2hhc0Zvb3RlclRlbXBsYXRlOmZ1bmN0aW9uKCl7cmV0dXJuISF3KHRoaXMuY29sdW1ucyxmdW5jdGlvbihlKXtyZXR1cm4gZS5mb290ZXJUZW1wbGF0ZX0pLmxlbmd0aH0sX3RkczpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvPVtdLGE9dGhpcy5jb2x1bW5zO2ZvcihpPTAscj1hLmxlbmd0aDtyPmk7aSsrKW49YVtpXSxvLnB1c2godCh7bW9kZWw6ZS5tb2RlbCxjb2x1bW46bixsZXZlbDplLmxldmVsfSkpO3JldHVybiBjKFwidHJcIixlLmF0dHIsbyl9LF90ZDpmdW5jdGlvbihlKXt2YXIgdCxpPVtdLHI9ZS5tb2RlbCxvPWUuY29sdW1uLGE9e3JvbGU6XCJncmlkY2VsbFwifTtyZXR1cm4gci5fZWRpdCYmby5maWVsZCYmci5lZGl0YWJsZShvLmZpZWxkKT9hW2tlbmRvLmF0dHIoXCJjb250YWluZXItZm9yXCIpXT1vLmZpZWxkOihvLmV4cGFuZGFibGUmJihpPW4oe2xldmVsOmUubGV2ZWwsY2xhc3NOYW1lOk8uaWNvblBsYWNlSG9sZGVyfSksdD1bTy5pY29uXSx0LnB1c2goci5oYXNDaGlsZHJlbj9yLmV4cGFuZGVkP08uaWNvbkNvbGxhcHNlOk8uaWNvbkV4cGFuZDpPLmljb25IaWRkZW4pLHIuX2Vycm9yP3QucHVzaChPLnJlZnJlc2gpOiFyLmxvYWRlZCgpJiZyLmV4cGFuZGVkJiZ0LnB1c2goTy5sb2FkaW5nKSxpLnB1c2goYyhcInNwYW5cIix7Y2xhc3NOYW1lOnQuam9pbihcIiBcIil9KSkpLG8uYXR0cmlidXRlcyYmcyhhLG8uYXR0cmlidXRlcyksby5jb21tYW5kP2k9dGhpcy5fYnVpbGRDb21tYW5kcyhyLl9lZGl0P1tcInVwZGF0ZVwiLFwiY2FuY2VsZWRpdFwiXTpvLmNvbW1hbmQpOmkucHVzaCh0aGlzLl9jZWxsQ29udGVudChvLHIpKSksYyhcInRkXCIsYSxpKX0sX2NlbGxDb250ZW50OmZ1bmN0aW9uKGUsbil7dmFyIGk7cmV0dXJuIGUudGVtcGxhdGU/aT1lLnRlbXBsYXRlKG4pOmUuZmllbGQmJihpPW4uZ2V0KGUuZmllbGQpLGUuZm9ybWF0JiYoaT1rZW5kby5mb3JtYXQoZS5mb3JtYXQsaSkpKSx0PT09aSYmKGk9XCJcIiksZS50ZW1wbGF0ZXx8IWUuZW5jb2RlZD91KGkpOmQoaSl9LF9idWlsZENvbW1hbmRzOmZ1bmN0aW9uKGUpe3ZhciB0LG49W107Zm9yKHQ9MDtlLmxlbmd0aD50O3QrKyluLnB1c2godGhpcy5fYnV0dG9uKGVbdF0pKTtyZXR1cm4gbn0sX2J1dHRvbjpmdW5jdGlvbihlKXt2YXIgdD0oZS5uYW1lfHxlKS50b0xvd2VyQ2FzZSgpLG49dGhpcy5vcHRpb25zLm1lc3NhZ2VzLmNvbW1hbmRzW3RdLGk9W107cmV0dXJuIGU9cyh7fSxIW3RdLHt0ZXh0Om59LGUpLGUuaW1hZ2VDbGFzcyYmaS5wdXNoKGMoXCJzcGFuXCIse2NsYXNzTmFtZTpbXCJrLWljb25cIixlLmltYWdlQ2xhc3NdLmpvaW4oXCIgXCIpfSkpLGMoXCJidXR0b25cIix7XCJkYXRhLWNvbW1hbmRcIjp0LGNsYXNzTmFtZTpbXCJrLWJ1dHRvbiBrLWJ1dHRvbi1pY29udGV4dFwiLGUuY2xhc3NOYW1lXS5qb2luKFwiIFwiKX0saS5jb25jYXQoW2QoZS50ZXh0fHxlLm5hbWUpXSkpfSxfc29ydGFibGU6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLG89dGhpcy5jb2x1bW5zLGE9dGhpcy5oZWFkZXIuZmluZChcInRoXCIpLGw9a2VuZG8uYXR0cihcImZpZWxkXCIpLGM9dGhpcy5vcHRpb25zLnNvcnRhYmxlO2lmKGMpZm9yKGk9MCxyPWEubGVuZ3RoO3I+aTtpKyspZT1vW2ldLGUuc29ydGFibGUhPT0hMSYmIWUuY29tbWFuZCYmZS5maWVsZCYmKG49YS5lcShpKSx0PW4uZGF0YShcImtlbmRvQ29sdW1uU29ydGVyXCIpLHQmJnQuZGVzdHJveSgpLG4uYXR0cihsLGUuZmllbGQpLmtlbmRvQ29sdW1uU29ydGVyKHMoe30sYyxlLnNvcnRhYmxlLHtkYXRhU291cmNlOnRoaXMuZGF0YVNvdXJjZX0pKSl9LF9maWx0ZXJhYmxlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscj10aGlzLmhlYWRlci5maW5kKFwidGhcIiksbz10aGlzLm9wdGlvbnMuZmlsdGVyYWJsZTtpZihvKWZvcihpPV8oZnVuY3Rpb24oZSl7dGhpcy50cmlnZ2VyKEwse2ZpZWxkOmUuZmllbGQsY29udGFpbmVyOmUuY29udGFpbmVyfSl9LHRoaXMpLGU9MCx0PXIubGVuZ3RoO3Q+ZTtlKyspbj10aGlzLmNvbHVtbnNbZV0sbi5jb21tYW5kfHxuLmZpbHRlcmFibGU9PT0hMXx8ci5lcShlKS5rZW5kb0ZpbHRlck1lbnUocyghMCx7fSxvLG4uZmlsdGVyYWJsZSx7ZGF0YVNvdXJjZTp0aGlzLmRhdGFTb3VyY2UsaW5pdDppfSkpfSxfY2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKGspfSxfc2VsZWN0YWJsZTpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5vcHRpb25zLnNlbGVjdGFibGU7dCYmKHQ9a2VuZG8udWkuU2VsZWN0YWJsZS5wYXJzZU9wdGlvbnModCksZT1cIj50cjpub3QoLmstZm9vdGVyLXRlbXBsYXRlKVwiLHQuY2VsbCYmKGUrPVwiPnRkXCIpLHRoaXMuc2VsZWN0YWJsZT1uZXcga2VuZG8udWkuU2VsZWN0YWJsZSh0aGlzLmNvbnRlbnQse2ZpbHRlcjplLGFyaWE6ITAsbXVsdGlwbGU6dC5tdWx0aXBsZSxjaGFuZ2U6Xyh0aGlzLl9jaGFuZ2UsdGhpcyl9KSl9LHNlbGVjdDpmdW5jdGlvbihlKXt2YXIgbj10aGlzLnNlbGVjdGFibGU7cmV0dXJuIHQ9PT1lfHxuLm9wdGlvbnMubXVsdGlwbGV8fChuLmNsZWFyKCksZT1lLmZpcnN0KCkpLG4udmFsdWUoZSl9LGNsZWFyU2VsZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zZWxlY3QoKTtlLmxlbmd0aCYmKHRoaXMuc2VsZWN0YWJsZS5jbGVhcigpLHRoaXMudHJpZ2dlcihrKSl9LF9kYXRhU291cmNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZGF0YVNvdXJjZTt0JiYodC51bmJpbmQoayx0aGlzLl9yZWZyZXNoSGFuZGxlciksdC51bmJpbmQoeCx0aGlzLl9lcnJvckhhbmRsZXIpLHQudW5iaW5kKEMsdGhpcy5fcHJvZ3Jlc3NIYW5kbGVyKSksdGhpcy5fcmVmcmVzaEhhbmRsZXI9Xyh0aGlzLnJlZnJlc2gsdGhpcyksdGhpcy5fZXJyb3JIYW5kbGVyPV8odGhpcy5fZXJyb3IsdGhpcyksdGhpcy5fcHJvZ3Jlc3NIYW5kbGVyPV8odGhpcy5fcHJvZ3Jlc3MsdGhpcyksdD10aGlzLmRhdGFTb3VyY2U9Vi5jcmVhdGUoZSksdC5iaW5kKGssdGhpcy5fcmVmcmVzaEhhbmRsZXIpLHQuYmluZCh4LHRoaXMuX2Vycm9ySGFuZGxlciksdC5iaW5kKEMsdGhpcy5fcHJvZ3Jlc3NIYW5kbGVyKX0sc2V0RGF0YVNvdXJjZTpmdW5jdGlvbihlKXt0aGlzLl9kYXRhU291cmNlKGUpLHRoaXMub3B0aW9ucy5hdXRvQmluZCYmdGhpcy5kYXRhU291cmNlLmZldGNoKCl9LGRhdGFJdGVtOmZ1bmN0aW9uKHQpe3ZhciBuPWUodCkuY2xvc2VzdChcInRyXCIpLGk9dGhpcy5kYXRhU291cmNlLmdldEJ5VWlkKG4uYXR0cihrZW5kby5hdHRyKFwidWlkXCIpKSk7cmV0dXJuIGl9LGVkaXRSb3c6ZnVuY3Rpb24oZSl7dmFyIHQ7dHlwZW9mIGU9PT1iJiYoZT10aGlzLmNvbnRlbnQuZmluZChlKSksdD10aGlzLmRhdGFJdGVtKGUpLHQmJihcInBvcHVwXCIhPXRoaXMuX2VkaXRNb2RlKCkmJih0Ll9lZGl0PSEwKSx0aGlzLl9jYW5jZWxFZGl0b3IoKSx0aGlzLl9yZW5kZXIoKSx0aGlzLl9jcmVhdGVFZGl0b3IodCksdGhpcy50cmlnZ2VyKEUse2NvbnRhaW5lcjp0aGlzLmVkaXRvci5lbGVtZW50LG1vZGVsOnR9KSl9LF9jYW5jZWxFZGl0OmZ1bmN0aW9uKGUpe2U9cyhlLHtjb250YWluZXI6dGhpcy5lZGl0b3Iud3JhcHBlcixtb2RlbDp0aGlzLmVkaXRvci5tb2RlbH0pLHRoaXMudHJpZ2dlcihCLGUpfHx0aGlzLmNhbmNlbFJvdygpfSxjYW5jZWxSb3c6ZnVuY3Rpb24oKXt0aGlzLl9jYW5jZWxFZGl0b3IoKSx0aGlzLl9yZW5kZXIoKX0sc2F2ZVJvdzpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5lZGl0b3I7dCYmKGU9e21vZGVsOnQubW9kZWwsY29udGFpbmVyOnQuZWxlbWVudH0sdC5lbmQoKSYmIXRoaXMudHJpZ2dlcihNLGUpJiZ0aGlzLmRhdGFTb3VyY2Uuc3luYygpKX0sYWRkUm93OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMuZWRpdG9yLGk9MCxyPXt9O2lmKCFufHxuLmVuZCgpKXJldHVybiBlPyhlIGluc3RhbmNlb2YgTnx8KGU9dGhpcy5kYXRhSXRlbShlKSksci5wYXJlbnRJZD1lLmlkLGk9dGhpcy5kYXRhU291cmNlLmluZGV4T2YoZSkrMSxlLnNldChcImV4cGFuZGVkXCIsITApLHRoaXMuZGF0YVNvdXJjZS5sb2FkKGUpLnRoZW4oXyh0aGlzLl9pbnNlcnRBdCx0aGlzLHIsaSkpLHQpOih0aGlzLl9pbnNlcnRBdChyLGkpLHQpfSxfaW5zZXJ0QXQ6ZnVuY3Rpb24oZSx0KXtlPXRoaXMuZGF0YVNvdXJjZS5pbnNlcnQodCxlKTt2YXIgbj10aGlzLmNvbnRlbnQuZmluZChcIltcIitrZW5kby5hdHRyKFwidWlkXCIpK1wiPVwiK2UudWlkK1wiXVwiKTt0aGlzLmVkaXRSb3cobil9LHJlbW92ZVJvdzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmRhdGFJdGVtKGUpLG49e21vZGVsOnQscm93OmV9O3QmJiF0aGlzLnRyaWdnZXIoeixuKSYmKHRoaXMuZGF0YVNvdXJjZS5yZW1vdmUodCksdGhpcy5kYXRhU291cmNlLnN5bmMoKSl9LF9jYW5jZWxFZGl0b3I6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuZWRpdG9yO3QmJihlPXQubW9kZWwsdGhpcy5fZGVzdHJveUVkaXRvcigpLHRoaXMuZGF0YVNvdXJjZS5jYW5jZWxDaGFuZ2VzKGUpLGUuX2VkaXQ9ITEpfSxfZGVzdHJveUVkaXRvcjpmdW5jdGlvbigpe3RoaXMuZWRpdG9yJiYodGhpcy5lZGl0b3IuY2xvc2UoKSx0aGlzLmVkaXRvcj1udWxsKX0sX2NyZWF0ZUVkaXRvcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmNvbnRlbnQuZmluZChcIltcIitrZW5kby5hdHRyKFwidWlkXCIpK1wiPVwiK2UudWlkK1wiXVwiKSxuPXRoaXMuX2VkaXRNb2RlKCksbz17Y29sdW1uczp0aGlzLmNvbHVtbnMsbW9kZWw6ZSx0YXJnZXQ6dGhpcyxjbGVhckNvbnRhaW5lcjohMSx0ZW1wbGF0ZTp0aGlzLm9wdGlvbnMuZWRpdGFibGUudGVtcGxhdGV9O1wiaW5saW5lXCI9PW4/dGhpcy5lZGl0b3I9bmV3IGkodCxvKToocyhvLHt3aW5kb3c6dGhpcy5vcHRpb25zLmVkaXRhYmxlLndpbmRvdyxjb21tYW5kUmVuZGVyZXI6XyhmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWlsZENvbW1hbmRzKFtcInVwZGF0ZVwiLFwiY2FuY2VsZWRpdFwiXSl9LHRoaXMpLGZpZWxkUmVuZGVyZXI6dGhpcy5fY2VsbENvbnRlbnQsc2F2ZTpfKHRoaXMuc2F2ZVJvdyx0aGlzKSxjYW5jZWw6Xyh0aGlzLl9jYW5jZWxFZGl0LHRoaXMpLGFwcGVuZFRvOnRoaXMud3JhcHBlcn0pLHRoaXMuZWRpdG9yPW5ldyByKHQsbykpfSxfZWRpdE1vZGU6ZnVuY3Rpb24oKXt2YXIgZT1cImlubGluZVwiLHQ9dGhpcy5vcHRpb25zLmVkaXRhYmxlO3JldHVybiB0IT09ITAmJihlPVwic3RyaW5nXCI9PXR5cGVvZiB0P3Q6dC5tb2RlfHxlKSxlLnRvTG93ZXJDYXNlKCl9fSksa2VuZG8uRXhjZWxNaXhpbiYma2VuZG8uRXhjZWxNaXhpbi5leHRlbmQoby5wcm90b3R5cGUpLGtlbmRvLlBERk1peGluJiZrZW5kby5QREZNaXhpbi5leHRlbmQoby5wcm90b3R5cGUpLHMoITAsa2VuZG8uZGF0YSx7VHJlZUxpc3REYXRhU291cmNlOlYsVHJlZUxpc3RNb2RlbDpOfSkscyghMCxrZW5kby51aSx7VHJlZUxpc3Q6b30pLGgucGx1Z2luKG8pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe2Zvcih2YXIgdCxuPTAsaT1lLmxlbmd0aDtpPm47bisrKWlmKDI9PWVbbl0udHlwZSl7dD0hMDticmVha310JiZlLnNwbGljZShuKzEsMCx7Y2FwdGlvbjpcIktQSXNcIixkZWZhdWx0SGllcmFyY2h5OlwiW0tQSXNdXCIsbmFtZTpcIktQSXNcIix1bmlxdWVOYW1lOlwiW0tQSXNdXCJ9KX1mdW5jdGlvbiBuKGUpe3JldHVybntuYW1lOmUudW5pcXVlTmFtZSx0eXBlOmUudHlwZX19ZnVuY3Rpb24gaShlKXtmb3IodmFyIHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspZVt0XS51bmlxdWVOYW1lPWVbdF0ubmFtZSxlW3RdLnR5cGU9XCJrcGlcIjtyZXR1cm4gZX1mdW5jdGlvbiByKHQpe3ZhciBuPWUodCkuY2xvc2VzdChcIi5rLXBpdm90LXNldHRpbmdcIik7cmV0dXJuIG4ubGVuZ3RoP24uZGF0YShcImtlbmRvUGl2b3RTZXR0aW5nVGFyZ2V0XCIpOm51bGx9ZnVuY3Rpb24gbyhlLHQsbil7cmV0dXJue2hpZXJhcmNoeVVuaXF1ZU5hbWU6ZSx1bmlxdWVOYW1lOnQsY2FwdGlvbjp0LG1lYXN1cmU6dCxuYW1lOnQsdHlwZTpufX1mdW5jdGlvbiBhKGUpe3ZhciB0PWUubmFtZTtyZXR1cm5bbyh0LGUudmFsdWUsXCJ2YWx1ZVwiKSxvKHQsZS5nb2FsLFwiZ29hbFwiKSxvKHQsZS5zdGF0dXMsXCJzdGF0dXNcIiksbyh0LGUudHJlbmQsXCJ0cmVuZFwiKV19dmFyIHM9d2luZG93LmtlbmRvLGw9cy51aSxjPWwuV2lkZ2V0LGQ9XCIua2VuZG9QaXZvdENvbmZpZ3VyYXRvclwiLHU9XCJtb3VzZWVudGVyXCIrZCtcIiBtb3VzZWxlYXZlXCIrZCxoPXMudGVtcGxhdGUoJzxwIGNsYXNzPVwiay1yZXNldFwiPjxzcGFuIGNsYXNzPVwiay1pY29uICM9aWNvbiNcIj48L3NwYW4+JHtuYW1lfTwvcD48ZGl2IGNsYXNzPVwiay1saXN0LWNvbnRhaW5lciBrLXJlc2V0XCIvPicpLHA9Yy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXtjLmZuLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy5lbGVtZW50LmFkZENsYXNzKFwiay13aWRnZXQgay1maWVsZHNlbGVjdG9yIGstYWx0IGstZWRpdC1mb3JtLWNvbnRhaW5lclwiKSx0aGlzLl9kYXRhU291cmNlKCksdGhpcy5fbGF5b3V0KCksdGhpcy5yZWZyZXNoKCkscy5ub3RpZnkodGhpcyl9LGV2ZW50czpbXSxvcHRpb25zOntuYW1lOlwiUGl2b3RDb25maWd1cmF0b3JcIixmaWx0ZXJhYmxlOiExLHNvcnRhYmxlOiExLG1lc3NhZ2VzOnttZWFzdXJlczpcIkRyb3AgRGF0YSBGaWVsZHMgSGVyZVwiLGNvbHVtbnM6XCJEcm9wIENvbHVtbiBGaWVsZHMgSGVyZVwiLHJvd3M6XCJEcm9wIFJvd3MgRmllbGRzIEhlcmVcIixtZWFzdXJlc0xhYmVsOlwiTWVhc3VyZXNcIixjb2x1bW5zTGFiZWw6XCJDb2x1bW5zXCIscm93c0xhYmVsOlwiUm93c1wiLGZpZWxkc0xhYmVsOlwiRmllbGRzXCJ9fSxfZGF0YVNvdXJjZTpmdW5jdGlvbigpe3RoaXMuZGF0YVNvdXJjZSYmdGhpcy5fcmVmcmVzaEhhbmRsZXI/dGhpcy5kYXRhU291cmNlLnVuYmluZChcImNoYW5nZVwiLHRoaXMuX3JlZnJlc2hIYW5kbGVyKTp0aGlzLl9yZWZyZXNoSGFuZGxlcj1lLnByb3h5KHRoaXMucmVmcmVzaCx0aGlzKSx0aGlzLmRhdGFTb3VyY2U9cy5kYXRhLlBpdm90RGF0YVNvdXJjZS5jcmVhdGUodGhpcy5vcHRpb25zLmRhdGFTb3VyY2UpLHRoaXMuZGF0YVNvdXJjZS5iaW5kKFwiY2hhbmdlXCIsdGhpcy5fcmVmcmVzaEhhbmRsZXIpfSxzZXREYXRhU291cmNlOmZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucy5kYXRhU291cmNlPWUsdGhpcy5fZGF0YVNvdXJjZSgpLHRoaXMubWVhc3VyZXMmJnRoaXMubWVhc3VyZXMuc2V0RGF0YVNvdXJjZShlKSx0aGlzLnJvd3MmJnRoaXMucm93cy5zZXREYXRhU291cmNlKGUpLHRoaXMuY29sdW1ucyYmdGhpcy5jb2x1bW5zLnNldERhdGFTb3VyY2UoZSksdGhpcy5yZWZyZXNoKCl9LF90cmVlVmlld0RhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgbj10aGlzO3JldHVybiBzLmRhdGEuSGllcmFyY2hpY2FsRGF0YVNvdXJjZS5jcmVhdGUoe3NjaGVtYTp7bW9kZWw6e2lkOlwidW5pcXVlTmFtZVwiLGhhc0NoaWxkcmVuOmZ1bmN0aW9uKGUpe3JldHVybiEoXCJoaWVyYXJjaHlVbmlxdWVOYW1lXCJpbiBlfHxcImFnZ3JlZ2F0b3JcImluIGUpfX19LHRyYW5zcG9ydDp7cmVhZDpmdW5jdGlvbihyKXt2YXIgbyxzLGw7ZS5pc0VtcHR5T2JqZWN0KHIuZGF0YSk/KG89bi5kYXRhU291cmNlLnNjaGVtYURpbWVuc2lvbnMoKSxvLmRvbmUoZnVuY3Rpb24oZSl7bi5kYXRhU291cmNlLmN1YmVCdWlsZGVyfHx0KGUpLHIuc3VjY2VzcyhlKX0pLmZhaWwoci5lcnJvcikpOihzPW4udHJlZVZpZXcuZGF0YVNvdXJjZS5nZXQoci5kYXRhLnVuaXF1ZU5hbWUpLFwiW0tQSXNdXCI9PT1zLnVuaXF1ZU5hbWU/KGw9ITAsbz1uLmRhdGFTb3VyY2Uuc2NoZW1hS1BJcygpLG8uZG9uZShmdW5jdGlvbihlKXtyLnN1Y2Nlc3MoaShlKSl9KS5mYWlsKHIuZXJyb3IpKTpcImtwaVwiPT1zLnR5cGUmJihsPSEwLHIuc3VjY2VzcyhhKHMpKSksbHx8KG89Mj09cy50eXBlP24uZGF0YVNvdXJjZS5zY2hlbWFNZWFzdXJlcygpOnMuZGltZW5zaW9uVW5pcXVlTmFtZT9uLmRhdGFTb3VyY2Uuc2NoZW1hTGV2ZWxzKHIuZGF0YS51bmlxdWVOYW1lKTpuLmRhdGFTb3VyY2Uuc2NoZW1hSGllcmFyY2hpZXMoci5kYXRhLnVuaXF1ZU5hbWUpLG8uZG9uZShyLnN1Y2Nlc3MpLmZhaWwoci5lcnJvcikpKX19fSl9LF9sYXlvdXQ6ZnVuY3Rpb24oKXt0aGlzLmZvcm09ZSgnPGRpdiBjbGFzcz1cImstY29sdW1ucyBrLXN0YXRlLWRlZmF1bHQgay1mbG9hdHdyYXBcIi8+JykuYXBwZW5kVG8odGhpcy5lbGVtZW50KSx0aGlzLl9maWVsZHMoKSx0aGlzLl90YXJnZXRzKCl9LF9maWVsZHM6ZnVuY3Rpb24oKXt2YXIgdD1lKCc8ZGl2IGNsYXNzPVwiay1zdGF0ZS1kZWZhdWx0XCI+PHAgY2xhc3M9XCJrLXJlc2V0XCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWdyb3VwXCI+PC9zcGFuPicrdGhpcy5vcHRpb25zLm1lc3NhZ2VzLmZpZWxkc0xhYmVsK1wiPC9wPjwvZGl2PlwiKS5hcHBlbmRUbyh0aGlzLmZvcm0pLGk9JyMgaWYgKGl0ZW0udHlwZSA9PSAyIHx8IGl0ZW0udW5pcXVlTmFtZSA9PSBcIltLUElzXVwiKSB7ICM8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktIz0gKGl0ZW0udHlwZSA9PSAyID8gXCJzdW1cIiA6IFwia3BpXCIpICNcIj48L3NwYW4+IyB9IGVsc2UgaWYgKGl0ZW0udHlwZSAmJiBpdGVtLnR5cGUgIT09IFwia3BpXCIpIHsgIzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1kaW1lbnNpb25cIj48L3NwYW4+IyB9ICMjOiBpdGVtLm5hbWUgIyc7dGhpcy50cmVlVmlldz1lKFwiPGRpdi8+XCIpLmFwcGVuZFRvKHQpLmtlbmRvVHJlZVZpZXcoe3RlbXBsYXRlOmksZGF0YVRleHRGaWVsZDpcIm5hbWVcIixkcmFnQW5kRHJvcDohMCxhdXRvQmluZDohMSxkYXRhU291cmNlOnRoaXMuX3RyZWVWaWV3RGF0YVNvdXJjZSgpLGRyYWdzdGFydDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmRhdGFJdGVtKGUuc291cmNlTm9kZSk7KHQuaGFzQ2hpbGRyZW58fHQuYWdncmVnYXRvcnx8dC5tZWFzdXJlKSYmMiE9dC50eXBlJiZcIltLUElzXVwiIT09dC51bmlxdWVOYW1lfHxlLnByZXZlbnREZWZhdWx0KCl9LGRyYWc6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJrLWRlbmllZFwiLG49cihlLmRyb3BUYXJnZXQpO24mJm4udmFsaWRhdGUodGhpcy5kYXRhSXRlbShlLnNvdXJjZU5vZGUpKSYmKHQ9XCJrLWFkZFwiKSxlLnNldFN0YXR1c0NsYXNzKHQpfSxkcm9wOmZ1bmN0aW9uKGUpe3ZhciB0LGksbyxzLGwsYztpZihlLnByZXZlbnREZWZhdWx0KCksdD1yKGUuZHJvcFRhcmdldCksaT10aGlzLmRhdGFJdGVtKGUuc291cmNlTm9kZSksdCYmdC52YWxpZGF0ZShpKSl7aWYoYz1pLmRlZmF1bHRIaWVyYXJjaHl8fGkudW5pcXVlTmFtZSxcImtwaVwiPT09aS50eXBlKWZvcihsPWEoaSkscz1sLmxlbmd0aCxjPVtdLG89MDtzPm87bysrKWMucHVzaChuKGxbb10pKTtlbHNlIGkudHlwZSYmKGM9W24oaSldKTt0LmFkZChjKX19fSkuZGF0YShcImtlbmRvVHJlZVZpZXdcIil9LF9jcmVhdGVUYXJnZXQ6ZnVuY3Rpb24odCxuKXt2YXIgaT0nPGxpIGNsYXNzPVwiay1pdGVtIGstaGVhZGVyXCIgZGF0YS0nK3MubnMrJ25hbWU9XCIke2RhdGEubmFtZX1cIj4ke2RhdGEubmFtZX0nLHI9bi5zb3J0YWJsZSxvPVwiXCI7cmV0dXJuIHImJihvKz1cIiNpZiAoZGF0YS5zb3J0SWNvbikgeyNcIixvKz0nPHNwYW4gY2xhc3M9XCJrLWljb24gJHtkYXRhLnNvcnRJY29ufSBrLXNldHRpbmctc29ydFwiPjwvc3Bhbj4nLG8rPVwiI30jXCIpLChuLmZpbHRlcmFibGV8fHIpJiYobys9JzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvd2hlYWQtcyBrLXNldHRpbmctZmllbGRtZW51XCI+PC9zcGFuPicpLG8rPSc8c3BhbiBjbGFzcz1cImstaWNvbiBrLXNpLWNsb3NlIGstc2V0dGluZy1kZWxldGVcIj48L3NwYW4+JyxpKz0nPHNwYW4gY2xhc3M9XCJrLWZpZWxkLWFjdGlvbnNcIj4nK28rXCI8L3NwYW4+PC9saT5cIixuZXcgcy51aS5QaXZvdFNldHRpbmdUYXJnZXQodCxlLmV4dGVuZCh7ZGF0YVNvdXJjZTp0aGlzLmRhdGFTb3VyY2UsaGludDpmdW5jdGlvbih0KXt2YXIgbj1lKCc8ZGl2IGNsYXNzPVwiay1maWVsZHNlbGVjdG9yXCI+PHVsIGNsYXNzPVwiay1saXN0IGstcmVzZXRcIj48L3VsPjwvZGl2PicpO3JldHVybiBuLmZpbmQoXCIuay1saXN0XCIpLmFwcGVuZCh0LmNsb25lKCkpLG59LHRlbXBsYXRlOmksZW1wdHlUZW1wbGF0ZTonPGxpIGNsYXNzPVwiay1pdGVtIGstZW1wdHlcIj4ke2RhdGF9PC9saT4nfSxuKSl9LF90YXJnZXRzOmZ1bmN0aW9uKCl7dmFyIHQ9ZSgnPGRpdiBjbGFzcz1cImstc3RhdGUtZGVmYXVsdFwiLz4nKS5hcHBlbmRUbyh0aGlzLmZvcm0pLG49ZShoKHtuYW1lOnRoaXMub3B0aW9ucy5tZXNzYWdlcy5jb2x1bW5zTGFiZWwsaWNvbjpcImstaS12YmFyc1wifSkpLmFwcGVuZFRvKHQpLGk9ZSgnPHVsIGNsYXNzPVwiay1waXZvdC1jb25maWd1cmF0b3Itc2V0dGluZ3Mgay1saXN0IGstcmVzZXRcIiAvPicpLmFwcGVuZFRvKG4ubGFzdCgpKSxyPWUoaCh7bmFtZTp0aGlzLm9wdGlvbnMubWVzc2FnZXMucm93c0xhYmVsLGljb246XCJrLWktaGJhcnNcIn0pKS5hcHBlbmRUbyh0KSxvPWUoJzx1bCBjbGFzcz1cImstcGl2b3QtY29uZmlndXJhdG9yLXNldHRpbmdzIGstbGlzdCBrLXJlc2V0XCIgLz4nKS5hcHBlbmRUbyhyLmxhc3QoKSksYT1lKGgoe25hbWU6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLm1lYXN1cmVzTGFiZWwsaWNvbjpcImstaS1zdW1cIn0pKS5hcHBlbmRUbyh0KSxzPWUoJzx1bCBjbGFzcz1cImstcGl2b3QtY29uZmlndXJhdG9yLXNldHRpbmdzIGstbGlzdCBrLXJlc2V0XCIgLz4nKS5hcHBlbmRUbyhhLmxhc3QoKSksbD10aGlzLm9wdGlvbnM7dGhpcy5jb2x1bW5zPXRoaXMuX2NyZWF0ZVRhcmdldChpLHtmaWx0ZXJhYmxlOmwuZmlsdGVyYWJsZSxzb3J0YWJsZTpsLnNvcnRhYmxlLGNvbm5lY3RXaXRoOm8sbWVzc2FnZXM6e2VtcHR5OmwubWVzc2FnZXMuY29sdW1ucyxmaWVsZE1lbnU6bC5tZXNzYWdlcy5maWVsZE1lbnV9fSksdGhpcy5yb3dzPXRoaXMuX2NyZWF0ZVRhcmdldChvLHtmaWx0ZXJhYmxlOmwuZmlsdGVyYWJsZSxzZXR0aW5nOlwicm93c1wiLGNvbm5lY3RXaXRoOmksbWVzc2FnZXM6e2VtcHR5OnRoaXMub3B0aW9ucy5tZXNzYWdlcy5yb3dzLGZpZWxkTWVudTp0aGlzLm9wdGlvbnMubWVzc2FnZXMuZmllbGRNZW51fX0pLHRoaXMubWVhc3VyZXM9dGhpcy5fY3JlYXRlVGFyZ2V0KHMse3NldHRpbmc6XCJtZWFzdXJlc1wiLG1lc3NhZ2VzOntlbXB0eTpsLm1lc3NhZ2VzLm1lYXN1cmVzfX0pLGkuYWRkKG8pLmFkZChzKS5vbih1LFwiLmstaXRlbTpub3QoLmstZW1wdHkpXCIsdGhpcy5fdG9nZ2xlSG92ZXIpfSxfdG9nZ2xlSG92ZXI6ZnVuY3Rpb24odCl7ZSh0LmN1cnJlbnRUYXJnZXQpLnRvZ2dsZUNsYXNzKFwiay1zdGF0ZS1ob3ZlclwiLFwibW91c2VlbnRlclwiPT09dC50eXBlKX0sX3Jlc2l6ZTpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLmVsZW1lbnQsaT10aGlzLm9wdGlvbnMuaGVpZ2h0O2kmJm4uaXMoXCI6dmlzaWJsZVwiKSYmKG4uaGVpZ2h0KGkpLHQ9bi5jaGlsZHJlbihcIi5rLWNvbHVtbnNcIikuY2hpbGRyZW4oXCJkaXYuay1zdGF0ZS1kZWZhdWx0XCIpLGU9KG4ub3V0ZXJIZWlnaHQoKS1uLmlubmVySGVpZ2h0KCkpLzIsaT1pLSh0Lm91dGVySGVpZ2h0KCEwKS10LmhlaWdodCgpKS1lLHQuaGVpZ2h0KGkpKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZGF0YVNvdXJjZTsoZS5jdWJlQnVpbGRlcnx8dGhpcy5fY3ViZSE9PWUuY3ViZSgpfHx0aGlzLl9jYXRhbG9nIT09ZS5jYXRhbG9nKCkpJiZ0aGlzLnRyZWVWaWV3LmRhdGFTb3VyY2UuZmV0Y2goKSx0aGlzLl9jYXRhbG9nPXRoaXMuZGF0YVNvdXJjZS5jYXRhbG9nKCksdGhpcy5fY3ViZT10aGlzLmRhdGFTb3VyY2UuY3ViZSgpLHRoaXMuX3Jlc2l6ZSgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7Yy5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5kYXRhU291cmNlLnVuYmluZChcImNoYW5nZVwiLHRoaXMuX3JlZnJlc2hIYW5kbGVyKSx0aGlzLmZvcm0uZmluZChcIi5rLWxpc3RcIikub2ZmKGQpLHRoaXMucm93cy5kZXN0cm95KCksdGhpcy5jb2x1bW5zLmRlc3Ryb3koKSx0aGlzLm1lYXN1cmVzLmRlc3Ryb3koKSx0aGlzLnRyZWVWaWV3LmRlc3Ryb3koKSx0aGlzLmVsZW1lbnQ9bnVsbCx0aGlzLl9yZWZyZXNoSGFuZGxlcj1udWxsfX0pO2wucGx1Z2luKHApfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaShlKXt2YXIgdD1rO3RyeXtyZXR1cm4gaz1mdW5jdGlvbihlKXtyZXR1cm4gZSgpfSxlKCl9ZmluYWxseXtrPXR9fWZ1bmN0aW9uIHIoZSxpLHIsbyl7aVtyXT10LmNvcHkoZS4kZXZhbChvKSksaVtyXT09PW4mJm8ubWF0Y2goL15cXHcqJC8pJiZDLndhcm4ocitcIiBhdHRyaWJ1dGUgcmVzb2x2ZWQgdG8gdW5kZWZpbmVkLiBNYXliZSB5b3UgbWVhbnQgdG8gdXNlIGEgc3RyaW5nIGxpdGVyYWwgbGlrZTogJ1wiK28rXCInP1wiKX1mdW5jdGlvbiBvKGksbyxzLGwsYyl7ZnVuY3Rpb24gZCgpe3ZhciBuLGQsaCxmLGcsbSx2LF8seTtyZXR1cm4gcy5rUmViaW5kJiYobj1lKGUobylbMF0uY2xvbmVOb2RlKCEwKSkpLGQ9bC5yZXBsYWNlKC9ea2VuZG8vLFwiXCIpLGg9dC5leHRlbmQoe30scy5kZWZhdWx0T3B0aW9ucyxpLiRldmFsKHMua09wdGlvbnN8fHMub3B0aW9ucykpLChmPWUobylbbF0pPyhnPWYud2lkZ2V0LnByb3RvdHlwZS5vcHRpb25zLG09Zi53aWRnZXQucHJvdG90eXBlLmV2ZW50cyxlLmVhY2gocyxmdW5jdGlvbihlLHQpe3ZhciBuLG8sYSxzO1wic291cmNlXCIhPT1lJiZcImtEYXRhU291cmNlXCIhPT1lJiYobj1cImRhdGFcIitlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc2xpY2UoMSksMD09PWUuaW5kZXhPZihcIm9uXCIpJiYobz1lLnJlcGxhY2UoL15vbi4vLGZ1bmN0aW9uKGUpe3JldHVybiBlLmNoYXJBdCgyKS50b0xvd2VyQ2FzZSgpfSksbS5pbmRleE9mKG8pPi0xJiYoaFtvXT10KSksZy5oYXNPd25Qcm9wZXJ0eShuKT9yKGksaCxuLHQpOmcuaGFzT3duUHJvcGVydHkoZSkmJiFBW2VdP3IoaSxoLGUsdCk6RFtlXXx8KGE9ZS5tYXRjaCgvXmsoT24pPyhbQS1aXS4qKS8pLGEmJihzPWFbMl0uY2hhckF0KDApLnRvTG93ZXJDYXNlKCkrYVsyXS5zbGljZSgxKSxhWzFdJiZcImtPbkxhYmVsXCIhPWU/aFtzXT10OihcImtPbkxhYmVsXCI9PWUmJihzPVwib25MYWJlbFwiKSxyKGksaCxzLHQpKSkpKX0pLHY9cy5rRGF0YVNvdXJjZXx8cy5zb3VyY2UsdiYmKGguZGF0YVNvdXJjZT1UKGksbyxkLHYpKSxoLiRhbmd1bGFyPVtpXSxvLmlzKFwic2VsZWN0XCIpJiYhZnVuY3Rpb24odCl7aWYodC5sZW5ndGg+MCl7dmFyIG49ZSh0WzBdKTshL1xcUy8udGVzdChuLnRleHQoKSkmJi9eXFw/Ly50ZXN0KG4udmFsKCkpJiZuLnJlbW92ZSgpfX0ob1swXS5vcHRpb25zKSxfPWYuY2FsbChvLFM9aCkuZGF0YShsKSxhKF8saSxzLGwsYyksaS4kZW1pdChcImtlbmRvV2lkZ2V0Q3JlYXRlZFwiLF8pLHk9dShpLF8pLHMua1JlYmluZCYmcChfLGksbyxuLHMua1JlYmluZCx5KSxfKTood2luZG93LmNvbnNvbGUuZXJyb3IoXCJDb3VsZCBub3QgZmluZDogXCIrbCksbnVsbCl9dmFyIGgsZj1zLmtOZ0RlbGF5LGc9aS4kZXZhbChmKTtyZXR1cm4gZiYmIWc/KGg9aS4kd2F0Y2goZixmdW5jdGlvbihlLHQpe2UhPT10JiYoaCgpLG8ucmVtb3ZlQXR0cihzLiRhdHRyLmtOZ0RlbGF5KSxmPW51bGwsayhkKSl9KSxuKTpkKCl9ZnVuY3Rpb24gYShlLHQsbixpLHIpe2lmKG5bcl0pe3ZhciBvPWIobltyXSkuYXNzaWduO2lmKCFvKXRocm93IEVycm9yKHIrXCIgYXR0cmlidXRlIHVzZWQgYnV0IGV4cHJlc3Npb24gaW4gaXQgaXMgbm90IGFzc2lnbmFibGU6IFwiK25baV0pO28odCxlKX19ZnVuY3Rpb24gcyhlKXtyZXR1cm4vY2hlY2tib3h8cmFkaW8vaS50ZXN0KGUuYXR0cihcInR5cGVcIikpP2UucHJvcChcImNoZWNrZWRcIik6ZS52YWwoKX1mdW5jdGlvbiBsKGUpe3JldHVybiBFLnRlc3QoZVswXS50YWdOYW1lKX1mdW5jdGlvbiBjKGUsdCxpLHIsbyl7dmFyIGEsYyxkLHU7ZS52YWx1ZSYmKGE9bChpKT9mdW5jdGlvbigpe3JldHVybiBzKGkpfTpmdW5jdGlvbigpe3JldHVybiBlLnZhbHVlKCl9LHIuJHJlbmRlcj1mdW5jdGlvbigpe3ZhciB0PXIuJHZpZXdWYWx1ZTt0PT09biYmKHQ9ci4kbW9kZWxWYWx1ZSksc2V0VGltZW91dChmdW5jdGlvbigpe2UmJmUudmFsdWUodCl9LDApfSxjPSExLGwoaSkmJmkub24oXCJjaGFuZ2VcIixmdW5jdGlvbigpe2M9ITB9KSxkPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3ZhciBuO2N8fChjPSExLGUmJm8mJihuPW8uJHByaXN0aW5lKSxyLiRzZXRWaWV3VmFsdWUoYSgpKSxlJiYoci4kc2V0UHJpc3RpbmUoKSxuJiZvLiRzZXRQcmlzdGluZSgpKSxtKHQpKX19LGUuZmlyc3QoXCJjaGFuZ2VcIixkKCExKSksZS5maXJzdChcImRhdGFCb3VuZFwiLGQoITApKSx1PWEoKSx1IT1yLiR2aWV3VmFsdWUmJihyLiRpc0VtcHR5KHIuJHZpZXdWYWx1ZSk/bnVsbCE9dSYmXCJcIiE9PXUmJnUhPXIuJHZpZXdWYWx1ZSYmci4kc2V0Vmlld1ZhbHVlKHUpOmUudmFsdWUoci4kdmlld1ZhbHVlKSksci4kc2V0UHJpc3RpbmUoKSl9ZnVuY3Rpb24gZChlLHQsaSl7dmFyIHIsbyxhO3JldHVyblwiZnVuY3Rpb25cIiE9dHlwZW9mIGUudmFsdWU/KEMud2FybihcImstbmctbW9kZWwgc3BlY2lmaWVkIG9uIGEgd2lkZ2V0IHRoYXQgZG9lcyBub3QgaGF2ZSB0aGUgdmFsdWUoKSBtZXRob2Q6IFwiK2Uub3B0aW9ucy5uYW1lKSxuKToocj1iKGkpLG89ci5hc3NpZ24sYT0hMSxlLiRhbmd1bGFyX3NldExvZ2ljVmFsdWUocih0KSksdC4kd2F0Y2goaSxmdW5jdGlvbih0LGkpe3Q9PT1uJiYodD1udWxsKSxhfHx0IT09aSYmZS4kYW5ndWxhcl9zZXRMb2dpY1ZhbHVlKHQpfSksZS5maXJzdChcImNoYW5nZVwiLGZ1bmN0aW9uKCl7YT0hMCx0LiRhcHBseShmdW5jdGlvbigpe28odCxlLiRhbmd1bGFyX2dldExvZ2ljVmFsdWUoKSl9KSxhPSExfSksbil9ZnVuY3Rpb24gdShlLHQpe3ZhciBuPWUuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe24oKSx0JiYodC5lbGVtZW50JiYodD1nKHQuZWxlbWVudCksdCYmdC5kZXN0cm95KCkpLHQ9bnVsbCl9KTtyZXR1cm4gbn1mdW5jdGlvbiBoKHQsbil7ZnVuY3Rpb24gaSgpe2EuZGlzY29ubmVjdCgpfWZ1bmN0aW9uIHIoKXthLm9ic2VydmUoZShuKVswXSx7YXR0cmlidXRlczohMH0pfXZhciBvLGE7d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXImJnQud3JhcHBlciYmKG89W10uc2xpY2UuY2FsbChlKG4pWzBdLmNsYXNzTGlzdCksYT1uZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihuKXtpKCksdCYmKG4uZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgaSxyPWUodC53cmFwcGVyKVswXTtzd2l0Y2gobi5hdHRyaWJ1dGVOYW1lKXtjYXNlXCJjbGFzc1wiOmk9W10uc2xpY2UuY2FsbChuLnRhcmdldC5jbGFzc0xpc3QpLGkuZm9yRWFjaChmdW5jdGlvbihlKXtvLmluZGV4T2YoZSk8MCYmKHIuY2xhc3NMaXN0LmFkZChlKSxrZW5kby51aS5Db21ib0JveCYmdCBpbnN0YW5jZW9mIGtlbmRvLnVpLkNvbWJvQm94JiZ0LmlucHV0WzBdLmNsYXNzTGlzdC5hZGQoZSkpfSksby5mb3JFYWNoKGZ1bmN0aW9uKGUpe2kuaW5kZXhPZihlKTwwJiYoci5jbGFzc0xpc3QucmVtb3ZlKGUpLGtlbmRvLnVpLkNvbWJvQm94JiZ0IGluc3RhbmNlb2Yga2VuZG8udWkuQ29tYm9Cb3gmJnQuaW5wdXRbMF0uY2xhc3NMaXN0LnJlbW92ZShlKSl9KSxvPWk7YnJlYWs7Y2FzZVwiZGlzYWJsZWRcIjpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmVuYWJsZSYmdC5lbmFibGUoIWUobi50YXJnZXQpLmF0dHIoXCJkaXNhYmxlZFwiKSk7YnJlYWs7Y2FzZVwicmVhZG9ubHlcIjpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnJlYWRvbmx5JiZ0LnJlYWRvbmx5KCEhZShuLnRhcmdldCkuYXR0cihcInJlYWRvbmx5XCIpKX19KSxyKCkpfSkscigpLHQuZmlyc3QoXCJkZXN0cm95XCIsaSkpfWZ1bmN0aW9uIHAodCxuLGkscixvLGEpe3ZhciBzPW4uJHdhdGNoKG8sZnVuY3Rpb24obyxsKXt2YXIgYyxkLHU7byE9PWwmJihzKCksYz1lKHQud3JhcHBlcilbMF0sZD1lKHQuZWxlbWVudClbMF0sdT1pLmluamVjdG9yKCkuZ2V0KFwiJGNvbXBpbGVcIiksdC5kZXN0cm95KCksYSYmYSgpLHQ9bnVsbCxjJiZkJiYoYy5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChkLGMpLGUoaSkucmVwbGFjZVdpdGgocikpLHUocikobikpfSwhMCk7bShuKX1mdW5jdGlvbiBmKGUsbil7ZnVuY3Rpb24gaShlLHQpe3kuZGlyZWN0aXZlKGUsW1wiZGlyZWN0aXZlRmFjdG9yeVwiLGZ1bmN0aW9uKG4pe3JldHVybiBuLmNyZWF0ZSh0LGUpfV0pfXZhciByLG8sYSxzLGw9bj9cIk1vYmlsZVwiOlwiXCI7bCs9ZS5mbi5vcHRpb25zLm5hbWUscj1sLG89XCJrZW5kb1wiK2wuY2hhckF0KDApK2wuc3Vic3RyKDEpLnRvTG93ZXJDYXNlKCksbD1cImtlbmRvXCIrbCxhPWwucmVwbGFjZSgvKFtBLVpdKS9nLFwiLSQxXCIpLC0xPT1QLmluZGV4T2YobC5yZXBsYWNlKFwia2VuZG9cIixcIlwiKSkmJihzPWw9PT1vP1tsXTpbbCxvXSx0LmZvckVhY2gocyxmdW5jdGlvbihlKXt5LmRpcmVjdGl2ZShlLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHJlcGxhY2U6ITAsdGVtcGxhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9TVtyXXx8XCJkaXZcIjtyZXR1cm5cIjxcIit0K1wiIFwiK2ErXCI+XCIrZS5odG1sKCkrXCI8L1wiK3QrXCI+XCJ9fX0pfSkpLEkuaW5kZXhPZihsLnJlcGxhY2UoXCJrZW5kb1wiLFwiXCIpKT4tMXx8KGkobCxsKSxvIT1sJiZpKG8sbCkpfWZ1bmN0aW9uIGcodCl7cmV0dXJuIHQ9ZSh0KSxrZW5kby53aWRnZXRJbnN0YW5jZSh0LGtlbmRvLnVpKXx8a2VuZG8ud2lkZ2V0SW5zdGFuY2UodCxrZW5kby5tb2JpbGUudWkpfHxrZW5kby53aWRnZXRJbnN0YW5jZSh0LGtlbmRvLmRhdGF2aXoudWkpfWZ1bmN0aW9uIG0oZSx0KXt2YXIgbj1lLiRyb290fHxlLGk9L15cXCQoZGlnZXN0fGFwcGx5KSQvLnRlc3Qobi4kJHBoYXNlKTt0P2k/dCgpOm4uJGFwcGx5KHQpOml8fG4uJGRpZ2VzdCgpfWZ1bmN0aW9uIHYodCxuKXt0LiRkZXN0cm95KCksbiYmZShuKS5yZW1vdmVEYXRhKFwiJHNjb3BlXCIpLnJlbW92ZURhdGEoXCIkaXNvbGF0ZVNjb3BlXCIpLnJlbW92ZURhdGEoXCIkaXNvbGF0ZVNjb3BlTm9UZW1wbGF0ZVwiKS5yZW1vdmVDbGFzcyhcIm5nLXNjb3BlXCIpfWZ1bmN0aW9uIF8obixpLHIpe3ZhciBvLGEscztpZihlLmlzQXJyYXkobikpcmV0dXJuIHQuZm9yRWFjaChuLGZ1bmN0aW9uKGUpe18oZSxpLHIpfSk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIG4pe2ZvcihvPW4uc3BsaXQoXCIuXCIpLGE9a2VuZG87YSYmby5sZW5ndGg+MDspYT1hW28uc2hpZnQoKV07aWYoIWEpcmV0dXJuIHoucHVzaChbbixpLHJdKSwhMTtuPWEucHJvdG90eXBlfXJldHVybiBzPW5baV0sbltpXT1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1hcmd1bWVudHM7cmV0dXJuIHIuYXBwbHkoe3NlbGY6ZSxuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHMuYXBwbHkoZSxhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzOnQpfX0sdCl9LCEwfXZhciB5LHcsYixrLHgsQyxTLFQsRCxBLEUsTSxQLEkseixGO3QmJih5PXQubW9kdWxlKFwia2VuZG8uZGlyZWN0aXZlc1wiLFtdKSx3PXQuaW5qZWN0b3IoW1wibmdcIl0pLGI9dy5nZXQoXCIkcGFyc2VcIiksaz13LmdldChcIiR0aW1lb3V0XCIpLEM9dy5nZXQoXCIkbG9nXCIpLFQ9ZnVuY3Rpb24oKXt2YXIgZT17VHJlZUxpc3Q6XCJUcmVlTGlzdERhdGFTb3VyY2VcIixUcmVlVmlldzpcIkhpZXJhcmNoaWNhbERhdGFTb3VyY2VcIixTY2hlZHVsZXI6XCJTY2hlZHVsZXJEYXRhU291cmNlXCIsUGFuZWxCYXI6XCIkUExBSU5cIixNZW51OlwiJFBMQUlOXCIsQ29udGV4dE1lbnU6XCIkUExBSU5cIn0sdD1mdW5jdGlvbihlLHQpe3JldHVyblwiJFBMQUlOXCI9PXQ/ZTprZW5kby5kYXRhW3RdLmNyZWF0ZShlKX07cmV0dXJuIGZ1bmN0aW9uKG4saSxyLG8pe3ZhciBhPWVbcl18fFwiRGF0YVNvdXJjZVwiLHM9dChuLiRldmFsKG8pLGEpO3JldHVybiBuLiR3YXRjaChvLGZ1bmN0aW9uKGUsbil7dmFyIHIsbztlIT09biYmKHI9dChlLGEpLG89ZyhpKSxvJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBvLnNldERhdGFTb3VyY2UmJm8uc2V0RGF0YVNvdXJjZShyKSl9KSxzfX0oKSxEPXtrRGF0YVNvdXJjZTohMCxrT3B0aW9uczohMCxrUmViaW5kOiEwLGtOZ01vZGVsOiEwLGtOZ0RlbGF5OiEwfSxBPXtuYW1lOiEwLHRpdGxlOiEwLHN0eWxlOiEwfSxFPS9eKGlucHV0fHNlbGVjdHx0ZXh0YXJlYSkkL2kseS5mYWN0b3J5KFwiZGlyZWN0aXZlRmFjdG9yeVwiLFtcIiRjb21waWxlXCIsZnVuY3Rpb24odCl7dmFyIG4saT0wLHI9ITE7cmV0dXJuIHg9dCxuPWZ1bmN0aW9uKHQsbil7cmV0dXJue3Jlc3RyaWN0OlwiQUNcIixyZXF1aXJlOltcIj9uZ01vZGVsXCIsXCJeP2Zvcm1cIl0sc2NvcGU6ITEsY29udHJvbGxlcjpbXCIkc2NvcGVcIixcIiRhdHRyc1wiLFwiJGVsZW1lbnRcIixmdW5jdGlvbihlLHQpe3RoaXMudGVtcGxhdGU9ZnVuY3Rpb24oZSxuKXt0W2VdPWtlbmRvLnN0cmluZ2lmeShuKX19XSxsaW5rOmZ1bmN0aW9uKGEscyxsLHUpe3ZhciBwPXVbMF0sZj11WzFdLGc9ZShzKSxtPXQucmVwbGFjZSgvKFtBLVpdKS9nLFwiLSQxXCIpLHY9XCJoaWRkZW5cIiE9PWcuY3NzKFwidmlzaWJpbGl0eVwiKTtnLmF0dHIobSxnLmF0dHIoXCJkYXRhLVwiK20pKSxnWzBdLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtXCIrbSksdiYmZy5jc3MoXCJ2aXNpYmlsaXR5XCIsXCJoaWRkZW5cIiksKytpLGsoZnVuY3Rpb24oKXt2JiZnLmNzcyhcInZpc2liaWxpdHlcIixcIlwiKTt2YXIgdT1vKGEscyxsLHQsbik7dSYmKHAmJmModSxhLHMscCxmKSxsLmtOZ01vZGVsJiZkKHUsYSxsLmtOZ01vZGVsKSxoKHUscyksLS1pLDA9PT1pJiYocnx8KHI9ITAsYS4kZW1pdChcImtlbmRvUmVuZGVyZWRcIiksZShcImZvcm1cIikuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcykuY29udHJvbGxlcihcImZvcm1cIik7dCYmdC4kc2V0UHJpc3RpbmUoKX0pKSkpfSl9fX0se2NyZWF0ZTpufX1dKSxNPXtFZGl0b3I6XCJ0ZXh0YXJlYVwiLE51bWVyaWNUZXh0Qm94OlwiaW5wdXRcIixEYXRlUGlja2VyOlwiaW5wdXRcIixEYXRlVGltZVBpY2tlcjpcImlucHV0XCIsVGltZVBpY2tlcjpcImlucHV0XCIsQXV0b0NvbXBsZXRlOlwiaW5wdXRcIixDb2xvclBpY2tlcjpcImlucHV0XCIsTWFza2VkVGV4dEJveDpcImlucHV0XCIsTXVsdGlTZWxlY3Q6XCJpbnB1dFwiLFVwbG9hZDpcImlucHV0XCIsVmFsaWRhdG9yOlwiZm9ybVwiLEJ1dHRvbjpcImJ1dHRvblwiLE1vYmlsZUJ1dHRvbjpcImFcIixNb2JpbGVCYWNrQnV0dG9uOlwiYVwiLE1vYmlsZURldGFpbEJ1dHRvbjpcImFcIixMaXN0VmlldzpcInVsXCIsTW9iaWxlTGlzdFZpZXc6XCJ1bFwiLFRyZWVWaWV3OlwidWxcIixNZW51OlwidWxcIixDb250ZXh0TWVudTpcInVsXCIsQWN0aW9uU2hlZXQ6XCJ1bFwifSxQPVtcIk1vYmlsZVZpZXdcIixcIk1vYmlsZUxheW91dFwiLFwiTW9iaWxlU3BsaXRWaWV3XCIsXCJNb2JpbGVQYW5lXCIsXCJNb2JpbGVNb2RhbFZpZXdcIl0sST1bXCJNb2JpbGVBcHBsaWNhdGlvblwiLFwiTW9iaWxlVmlld1wiLFwiTW9iaWxlTW9kYWxWaWV3XCIsXCJNb2JpbGVMYXlvdXRcIixcIk1vYmlsZUFjdGlvblNoZWV0XCIsXCJNb2JpbGVEcmF3ZXJcIixcIk1vYmlsZVNwbGl0Vmlld1wiLFwiTW9iaWxlUGFuZVwiLFwiTW9iaWxlU2Nyb2xsVmlld1wiLFwiTW9iaWxlUG9wT3ZlclwiXSx0LmZvckVhY2goW1wiTW9iaWxlTmF2QmFyXCIsXCJNb2JpbGVCdXR0b25cIixcIk1vYmlsZUJhY2tCdXR0b25cIixcIk1vYmlsZURldGFpbEJ1dHRvblwiLFwiTW9iaWxlVGFiU3RyaXBcIixcIk1vYmlsZVNjcm9sbFZpZXdcIl0sZnVuY3Rpb24oZSl7SS5wdXNoKGUpLGU9XCJrZW5kb1wiK2UseS5kaXJlY3RpdmUoZSxmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixsaW5rOmZ1bmN0aW9uKHQsbixpKXtvKHQsbixpLGUsZSl9fX0pfSksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3JldHVybiBmdW5jdGlvbihuKXt0LmZvckVhY2gobixmdW5jdGlvbih0KXt0LmZuJiZ0LmZuLm9wdGlvbnMmJnQuZm4ub3B0aW9ucy5uYW1lJiYvXltBLVpdLy50ZXN0KHQuZm4ub3B0aW9ucy5uYW1lKSYmZih0LGUpfSl9fXQuZm9yRWFjaChba2VuZG8udWksa2VuZG8uZGF0YXZpeiYma2VuZG8uZGF0YXZpei51aV0sZSghMSkpLHQuZm9yRWFjaChba2VuZG8ubW9iaWxlJiZrZW5kby5tb2JpbGUudWldLGUoITApKX0oKSx6PVtdLF8oa2VuZG8udWksXCJwbHVnaW5cIixmdW5jdGlvbih0LG4saSl7dGhpcy5uZXh0KCksej1lLmdyZXAoeixmdW5jdGlvbihlKXtyZXR1cm4hXy5hcHBseShudWxsLGUpfSksZih0LFwiTW9iaWxlXCI9PWkpfSksXyhbXCJ1aS5XaWRnZXRcIixcIm1vYmlsZS51aS5XaWRnZXRcIl0sXCJhbmd1bGFyXCIsZnVuY3Rpb24ocixvKXt2YXIgYSxzPXRoaXMuc2VsZjtyZXR1cm5cImluaXRcIj09cj8oIW8mJlMmJihvPVMpLFM9bnVsbCxvJiZvLiRhbmd1bGFyJiYocy4kYW5ndWxhcl9zY29wZT1vLiRhbmd1bGFyWzBdLHMuJGFuZ3VsYXJfaW5pdChzLmVsZW1lbnQsbykpLG4pOihhPXMuJGFuZ3VsYXJfc2NvcGUsYSYmaShmdW5jdGlvbigpe3ZhciBpLGwsYz1vKCksZD1jLmVsZW1lbnRzLHU9Yy5kYXRhO2lmKGQubGVuZ3RoPjApc3dpdGNoKHIpe2Nhc2VcImNsZWFudXBcIjp0LmZvckVhY2goZCxmdW5jdGlvbihlKXt2YXIgbj10LmVsZW1lbnQoZSkuc2NvcGUoKTtuJiZuIT09YSYmbi4kJGtlbmRvU2NvcGUmJnYobixlKX0pO2JyZWFrO2Nhc2VcImNvbXBpbGVcIjppPXMuZWxlbWVudC5pbmplY3RvcigpLGw9aT9pLmdldChcIiRjb21waWxlXCIpOngsdC5mb3JFYWNoKGQsZnVuY3Rpb24oaSxyKXt2YXIgbyxzO2Muc2NvcGVGcm9tP289dC5lbGVtZW50KGMuc2NvcGVGcm9tKS5zY29wZSgpOihzPXUmJnVbcl0scyE9PW4mJihvPWUuZXh0ZW5kKGEuJG5ldygpLHMpLG8uJCRrZW5kb1Njb3BlPSEwKSksbChpKShvfHxhKX0pLG0oYSl9fSksbil9KSxfKFwidWkuV2lkZ2V0XCIsXCIkYW5ndWxhcl9nZXRMb2dpY1ZhbHVlXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxmLnZhbHVlKCl9KSxfKFwidWkuV2lkZ2V0XCIsXCIkYW5ndWxhcl9zZXRMb2dpY1ZhbHVlXCIsZnVuY3Rpb24oZSl7dGhpcy5zZWxmLnZhbHVlKGUpfSksXyhcInVpLlNlbGVjdFwiLFwiJGFuZ3VsYXJfZ2V0TG9naWNWYWx1ZVwiLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zZWxmLmRhdGFJdGVtKCk7cmV0dXJuIGU/dGhpcy5zZWxmLm9wdGlvbnMudmFsdWVQcmltaXRpdmU/ZVt0aGlzLnNlbGYub3B0aW9ucy5kYXRhVmFsdWVGaWVsZF06ZS50b0pTT04oKTpudWxsfSksXyhcInVpLlNlbGVjdFwiLFwiJGFuZ3VsYXJfc2V0TG9naWNWYWx1ZVwiLGZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc2VsZixuPXQub3B0aW9ucyxpPW4uZGF0YVZhbHVlRmllbGQ7aSYmIW4udmFsdWVQcmltaXRpdmUmJihlPW51bGwhPWU/ZVtuLmRhdGFWYWx1ZUZpZWxkfHxuLmRhdGFUZXh0RmllbGRdOm51bGwpLHQudmFsdWUoZSl9KSxfKFwidWkuTXVsdGlTZWxlY3RcIixcIiRhbmd1bGFyX2dldExvZ2ljVmFsdWVcIixmdW5jdGlvbigpe3ZhciB0PXRoaXMuc2VsZi5kYXRhSXRlbXMoKSxuPXRoaXMuc2VsZi5vcHRpb25zLmRhdGFWYWx1ZUZpZWxkO3JldHVybiBuJiZ0aGlzLnNlbGYub3B0aW9ucy52YWx1ZVByaW1pdGl2ZSYmKHQ9ZS5tYXAodCxmdW5jdGlvbihlKXtyZXR1cm4gZVtuXX0pKSx0fSksXyhcInVpLk11bHRpU2VsZWN0XCIsXCIkYW5ndWxhcl9zZXRMb2dpY1ZhbHVlXCIsZnVuY3Rpb24odCl7bnVsbD09dCYmKHQ9W10pO3ZhciBuPXRoaXMuc2VsZixpPW4ub3B0aW9ucy5kYXRhVmFsdWVGaWVsZDtpJiYhbi5vcHRpb25zLnZhbHVlUHJpbWl0aXZlJiYodD1lLm1hcCh0LGZ1bmN0aW9uKGUpe3JldHVybiBlW2ldXHJcbn0pKSxuLnZhbHVlKHQpfSksXyhcInVpLkF1dG9Db21wbGV0ZVwiLFwiJGFuZ3VsYXJfZ2V0TG9naWNWYWx1ZVwiLGZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixvPXRoaXMuc2VsZi5vcHRpb25zLGE9dGhpcy5zZWxmLnZhbHVlKCkuc3BsaXQoby5zZXBhcmF0b3IpLHM9by52YWx1ZVByaW1pdGl2ZSxsPXRoaXMuc2VsZi5kYXRhU291cmNlLmRhdGEoKSxjPVtdO2ZvcihlPTAsdD1sLmxlbmd0aDt0PmU7ZSsrKWZvcihuPWxbZV0saT1vLmRhdGFUZXh0RmllbGQ/bltvLmRhdGFUZXh0RmllbGRdOm4scj0wO2EubGVuZ3RoPnI7cisrKWlmKGk9PT1hW3JdKXtjLnB1c2gocz9pOm4udG9KU09OKCkpO2JyZWFrfXJldHVybiBjfSksXyhcInVpLkF1dG9Db21wbGV0ZVwiLFwiJGFuZ3VsYXJfc2V0TG9naWNWYWx1ZVwiLGZ1bmN0aW9uKHQpe251bGw9PXQmJih0PVtdKTt2YXIgbj10aGlzLnNlbGYsaT1uLm9wdGlvbnMuZGF0YVRleHRGaWVsZDtpJiYhbi5vcHRpb25zLnZhbHVlUHJpbWl0aXZlJiYodD1lLm1hcCh0LGZ1bmN0aW9uKGUpe3JldHVybiBlW2ldfSkpLG4udmFsdWUodCl9KSxfKFwidWkuV2lkZ2V0XCIsXCIkYW5ndWxhcl9pbml0XCIsZnVuY3Rpb24odCxuKXt2YXIgaSxyLG8sYSxzPXRoaXMuc2VsZjtpZihuJiYhZS5pc0FycmF5KG4pKWZvcihpPXMuJGFuZ3VsYXJfc2NvcGUscj1zLmV2ZW50cy5sZW5ndGg7LS1yPj0wOylvPXMuZXZlbnRzW3JdLGE9bltvXSxhJiZcInN0cmluZ1wiPT10eXBlb2YgYSYmKG5bb109cy4kYW5ndWxhcl9tYWtlRXZlbnRIYW5kbGVyKG8saSxhKSl9KSxfKFwidWkuV2lkZ2V0XCIsXCIkYW5ndWxhcl9tYWtlRXZlbnRIYW5kbGVyXCIsZnVuY3Rpb24oZSx0LG4pe3JldHVybiBuPWIobiksZnVuY3Rpb24oZSl7bSh0LGZ1bmN0aW9uKCl7bih0LHtrZW5kb0V2ZW50OmV9KX0pfX0pLF8oW1widWkuR3JpZFwiLFwidWkuTGlzdFZpZXdcIixcInVpLlRyZWVWaWV3XCJdLFwiJGFuZ3VsYXJfbWFrZUV2ZW50SGFuZGxlclwiLGZ1bmN0aW9uKGUsbixpKXtyZXR1cm5cImNoYW5nZVwiIT1lP3RoaXMubmV4dCgpOihpPWIoaSksZnVuY3Rpb24oZSl7dmFyIHIsbyxhLHMsbCxjLGQsdSxoLHA9ZS5zZW5kZXIsZj1wLm9wdGlvbnMsZz17a2VuZG9FdmVudDplfTtmb3IodC5pc1N0cmluZyhmLnNlbGVjdGFibGUpJiYocj0tMSE9PWYuc2VsZWN0YWJsZS5pbmRleE9mKFwiY2VsbFwiKSxvPS0xIT09Zi5zZWxlY3RhYmxlLmluZGV4T2YoXCJtdWx0aXBsZVwiKSksYT1nLnNlbGVjdGVkPXRoaXMuc2VsZWN0KCkscz1nLmRhdGE9W10sbD1nLmNvbHVtbnM9W10sZD0wO2EubGVuZ3RoPmQ7ZCsrKXU9cj9hW2RdLnBhcmVudE5vZGU6YVtkXSxoPXAuZGF0YUl0ZW0odSkscj8odC5lbGVtZW50LmluQXJyYXkoaCxzKTwwJiZzLnB1c2goaCksYz10LmVsZW1lbnQoYVtkXSkuaW5kZXgoKSx0LmVsZW1lbnQuaW5BcnJheShjLGwpPDAmJmwucHVzaChjKSk6cy5wdXNoKGgpO298fChnLmRhdGFJdGVtPWcuZGF0YT1zWzBdLGcuc2VsZWN0ZWQ9YVswXSksbShuLGZ1bmN0aW9uKCl7aShuLGcpfSl9KX0pLF8oXCJ1aS5HcmlkXCIsXCIkYW5ndWxhcl9pbml0XCIsZnVuY3Rpb24oaSxyKXtpZih0aGlzLm5leHQoKSxyLmNvbHVtbnMpe3ZhciBvPWUuZXh0ZW5kKHt9LGtlbmRvLlRlbXBsYXRlLHIudGVtcGxhdGVTZXR0aW5ncyk7dC5mb3JFYWNoKHIuY29sdW1ucyxmdW5jdGlvbihlKXshZS5maWVsZHx8ZS50ZW1wbGF0ZXx8ZS5mb3JtYXR8fGUudmFsdWVzfHxlLmVuY29kZWQhPT1uJiYhZS5lbmNvZGVkfHwoZS50ZW1wbGF0ZT1cIjxzcGFuIG5nLWJpbmQ9J1wiK2tlbmRvLmV4cHIoZS5maWVsZCxcImRhdGFJdGVtXCIpK1wiJz4jOiBcIitrZW5kby5leHByKGUuZmllbGQsby5wYXJhbU5hbWUpK1wiIzwvc3Bhbj5cIil9KX19KSxfKFwibW9iaWxlLnVpLkJ1dHRvbkdyb3VwXCIsXCJ2YWx1ZVwiLGZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc2VsZjtyZXR1cm4gbnVsbCE9ZSYmKHQuc2VsZWN0KHQuZWxlbWVudC5jaGlsZHJlbihcImxpLmttLWJ1dHRvblwiKS5lcShlKSksdC50cmlnZ2VyKFwiY2hhbmdlXCIpLHQudHJpZ2dlcihcInNlbGVjdFwiLHtpbmRleDp0LnNlbGVjdGVkSW5kZXh9KSksdC5zZWxlY3RlZEluZGV4fSksXyhcIm1vYmlsZS51aS5CdXR0b25Hcm91cFwiLFwiX3NlbGVjdFwiLGZ1bmN0aW9uKCl7dGhpcy5uZXh0KCksdGhpcy5zZWxmLnRyaWdnZXIoXCJjaGFuZ2VcIil9KSx5LmRpcmVjdGl2ZShcImtlbmRvTW9iaWxlQXBwbGljYXRpb25cIixmdW5jdGlvbigpe3JldHVybnt0ZXJtaW5hbDohMCxsaW5rOmZ1bmN0aW9uKGUsdCxuKXtvKGUsdCxuLFwia2VuZG9Nb2JpbGVBcHBsaWNhdGlvblwiLFwia2VuZG9Nb2JpbGVBcHBsaWNhdGlvblwiKX19fSkuZGlyZWN0aXZlKFwia2VuZG9Nb2JpbGVWaWV3XCIsZnVuY3Rpb24oKXtyZXR1cm57c2NvcGU6ITAsbGluazp7cHJlOmZ1bmN0aW9uKGUsdCxuKXtuLmRlZmF1bHRPcHRpb25zPWUudmlld09wdGlvbnMsbi5faW5zdGFuY2U9byhlLHQsbixcImtlbmRvTW9iaWxlVmlld1wiLFwia2VuZG9Nb2JpbGVWaWV3XCIpfSxwb3N0OmZ1bmN0aW9uKGUsdCxuKXtuLl9pbnN0YW5jZS5fbGF5b3V0KCksbi5faW5zdGFuY2UuX3Njcm9sbGVyKCl9fX19KS5kaXJlY3RpdmUoXCJrZW5kb01vYmlsZURyYXdlclwiLGZ1bmN0aW9uKCl7cmV0dXJue3Njb3BlOiEwLGxpbms6e3ByZTpmdW5jdGlvbihlLHQsbil7bi5kZWZhdWx0T3B0aW9ucz1lLnZpZXdPcHRpb25zLG4uX2luc3RhbmNlPW8oZSx0LG4sXCJrZW5kb01vYmlsZURyYXdlclwiLFwia2VuZG9Nb2JpbGVEcmF3ZXJcIil9LHBvc3Q6ZnVuY3Rpb24oZSx0LG4pe24uX2luc3RhbmNlLl9sYXlvdXQoKSxuLl9pbnN0YW5jZS5fc2Nyb2xsZXIoKX19fX0pLmRpcmVjdGl2ZShcImtlbmRvTW9iaWxlTW9kYWxWaWV3XCIsZnVuY3Rpb24oKXtyZXR1cm57c2NvcGU6ITAsbGluazp7cHJlOmZ1bmN0aW9uKGUsdCxuKXtuLmRlZmF1bHRPcHRpb25zPWUudmlld09wdGlvbnMsbi5faW5zdGFuY2U9byhlLHQsbixcImtlbmRvTW9iaWxlTW9kYWxWaWV3XCIsXCJrZW5kb01vYmlsZU1vZGFsVmlld1wiKX0scG9zdDpmdW5jdGlvbihlLHQsbil7bi5faW5zdGFuY2UuX2xheW91dCgpLG4uX2luc3RhbmNlLl9zY3JvbGxlcigpfX19fSkuZGlyZWN0aXZlKFwia2VuZG9Nb2JpbGVTcGxpdFZpZXdcIixmdW5jdGlvbigpe3JldHVybnt0ZXJtaW5hbDohMCxsaW5rOntwcmU6ZnVuY3Rpb24oZSx0LG4pe24uZGVmYXVsdE9wdGlvbnM9ZS52aWV3T3B0aW9ucyxuLl9pbnN0YW5jZT1vKGUsdCxuLFwia2VuZG9Nb2JpbGVTcGxpdFZpZXdcIixcImtlbmRvTW9iaWxlU3BsaXRWaWV3XCIpfSxwb3N0OmZ1bmN0aW9uKGUsdCxuKXtuLl9pbnN0YW5jZS5fbGF5b3V0KCl9fX19KS5kaXJlY3RpdmUoXCJrZW5kb01vYmlsZVBhbmVcIixmdW5jdGlvbigpe3JldHVybnt0ZXJtaW5hbDohMCxsaW5rOntwcmU6ZnVuY3Rpb24oZSx0LG4pe24uZGVmYXVsdE9wdGlvbnM9ZS52aWV3T3B0aW9ucyxvKGUsdCxuLFwia2VuZG9Nb2JpbGVQYW5lXCIsXCJrZW5kb01vYmlsZVBhbmVcIil9fX19KS5kaXJlY3RpdmUoXCJrZW5kb01vYmlsZUxheW91dFwiLGZ1bmN0aW9uKCl7cmV0dXJue2xpbms6e3ByZTpmdW5jdGlvbihlLHQsbil7byhlLHQsbixcImtlbmRvTW9iaWxlTGF5b3V0XCIsXCJrZW5kb01vYmlsZUxheW91dFwiKX19fX0pLmRpcmVjdGl2ZShcImtlbmRvTW9iaWxlQWN0aW9uU2hlZXRcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixsaW5rOmZ1bmN0aW9uKHQsbixpKXtuLmZpbmQoXCJhW2stYWN0aW9uXVwiKS5lYWNoKGZ1bmN0aW9uKCl7ZSh0aGlzKS5hdHRyKFwiZGF0YS1cIitrZW5kby5ucytcImFjdGlvblwiLGUodGhpcykuYXR0cihcImstYWN0aW9uXCIpKX0pLG8odCxuLGksXCJrZW5kb01vYmlsZUFjdGlvblNoZWV0XCIsXCJrZW5kb01vYmlsZUFjdGlvblNoZWV0XCIpfX19KS5kaXJlY3RpdmUoXCJrZW5kb01vYmlsZVBvcE92ZXJcIixmdW5jdGlvbigpe3JldHVybnt0ZXJtaW5hbDohMCxsaW5rOntwcmU6ZnVuY3Rpb24oZSx0LG4pe24uZGVmYXVsdE9wdGlvbnM9ZS52aWV3T3B0aW9ucyxvKGUsdCxuLFwia2VuZG9Nb2JpbGVQb3BPdmVyXCIsXCJrZW5kb01vYmlsZVBvcE92ZXJcIil9fX19KS5kaXJlY3RpdmUoXCJrZW5kb1ZpZXdUaXRsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHJlcGxhY2U6ITAsdGVtcGxhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuXCI8c3BhbiBkYXRhLVwiK2tlbmRvLm5zK1wicm9sZT0ndmlldy10aXRsZSc+XCIrZS5odG1sKCkrXCI8L3NwYW4+XCJ9fX0pLmRpcmVjdGl2ZShcImtlbmRvTW9iaWxlSGVhZGVyXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIsbGluazpmdW5jdGlvbihlLHQpe3QuYWRkQ2xhc3MoXCJrbS1oZWFkZXJcIikuYXR0cihcImRhdGEtcm9sZVwiLFwiaGVhZGVyXCIpfX19KS5kaXJlY3RpdmUoXCJrZW5kb01vYmlsZUZvb3RlclwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLGxpbms6ZnVuY3Rpb24oZSx0KXt0LmFkZENsYXNzKFwia20tZm9vdGVyXCIpLmF0dHIoXCJkYXRhLXJvbGVcIixcImZvb3RlclwiKX19fSkuZGlyZWN0aXZlKFwia2VuZG9Nb2JpbGVTY3JvbGxWaWV3UGFnZVwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHJlcGxhY2U6ITAsdGVtcGxhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuXCI8ZGl2IGRhdGEtXCIra2VuZG8ubnMrXCJyb2xlPSdwYWdlJz5cIitlLmh0bWwoKStcIjwvZGl2PlwifX19KSx0LmZvckVhY2goW1wiYWxpZ25cIixcImljb25cIixcInJlbFwiLFwidHJhbnNpdGlvblwiLFwiYWN0aW9uc2hlZXRDb250ZXh0XCJdLGZ1bmN0aW9uKGUpe3ZhciB0PVwia1wiK2Uuc2xpY2UoMCwxKS50b1VwcGVyQ2FzZSgpK2Uuc2xpY2UoMSk7eS5kaXJlY3RpdmUodCxmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixwcmlvcml0eToyLGxpbms6ZnVuY3Rpb24obixpLHIpe2kuYXR0cihrZW5kby5hdHRyKGtlbmRvLnRvSHlwaGVucyhlKSksbi4kZXZhbChyW3RdKSl9fX0pfSksRj17VHJlZU1hcDpbXCJUZW1wbGF0ZVwiXSxNb2JpbGVMaXN0VmlldzpbXCJIZWFkZXJUZW1wbGF0ZVwiLFwiVGVtcGxhdGVcIl0sTW9iaWxlU2Nyb2xsVmlldzpbXCJFbXB0eVRlbXBsYXRlXCIsXCJUZW1wbGF0ZVwiXSxHcmlkOltcIkFsdFJvd1RlbXBsYXRlXCIsXCJEZXRhaWxUZW1wbGF0ZVwiLFwiUm93VGVtcGxhdGVcIl0sTGlzdFZpZXc6W1wiRWRpdFRlbXBsYXRlXCIsXCJUZW1wbGF0ZVwiLFwiQWx0VGVtcGxhdGVcIl0sUGFnZXI6W1wiU2VsZWN0VGVtcGxhdGVcIixcIkxpbmtUZW1wbGF0ZVwiXSxQaXZvdEdyaWQ6W1wiQ29sdW1uSGVhZGVyVGVtcGxhdGVcIixcIkRhdGFDZWxsVGVtcGxhdGVcIixcIlJvd0hlYWRlclRlbXBsYXRlXCJdLFNjaGVkdWxlcjpbXCJBbGxEYXlFdmVudFRlbXBsYXRlXCIsXCJEYXRlSGVhZGVyVGVtcGxhdGVcIixcIkV2ZW50VGVtcGxhdGVcIixcIk1ham9yVGltZUhlYWRlclRlbXBsYXRlXCIsXCJNaW5vclRpbWVIZWFkZXJUZW1wbGF0ZVwiXSxUcmVlVmlldzpbXCJUZW1wbGF0ZVwiXSxWYWxpZGF0b3I6W1wiRXJyb3JUZW1wbGF0ZVwiXX0sZnVuY3Rpb24oKXt2YXIgZT17fTt0LmZvckVhY2goRixmdW5jdGlvbihuLGkpe3QuZm9yRWFjaChuLGZ1bmN0aW9uKHQpe2VbdF18fChlW3RdPVtdKSxlW3RdLnB1c2goXCI/Xl5rZW5kb1wiK2kpfSl9KSx0LmZvckVhY2goZSxmdW5jdGlvbihlLHQpe3ZhciBuPVwia1wiK3QsaT1rZW5kby50b0h5cGhlbnMobik7eS5kaXJlY3RpdmUobixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOmUsdGVybWluYWw6ITAsY29tcGlsZTpmdW5jdGlvbih0LHIpe2lmKFwiXCI9PT1yW25dKXt0LnJlbW92ZUF0dHIoaSk7dmFyIG89dFswXS5vdXRlckhUTUw7cmV0dXJuIGZ1bmN0aW9uKHIsYSxzLGwpe2Zvcih2YXIgYzshYyYmbC5sZW5ndGg7KWM9bC5zaGlmdCgpO2M/KGMudGVtcGxhdGUobixvKSx0LnJlbW92ZSgpKTpDLndhcm4oaStcIiB3aXRob3V0IGEgbWF0Y2hpbmcgcGFyZW50IHdpZGdldCBmb3VuZC4gSXQgY2FuIGJlIG9uZSBvZiB0aGUgZm9sbG93aW5nOiBcIitlLmpvaW4oXCIsIFwiKSl9fX19fSl9KX0oKSl9KHdpbmRvdy5rZW5kby5qUXVlcnksd2luZG93LmFuZ3VsYXIpO3JldHVybiB3aW5kb3cua2VuZG99LHR5cGVvZiBkZWZpbmU9PVwiZnVuY3Rpb25cIiYmZGVmaW5lLmFtZD9kZWZpbmU6ZnVuY3Rpb24oXyxmKXtmKCl9KTsiLCIvLyAgVGhpcyBmdW5jdGlvbiBpcyB0cmlnZ2VyIHRoZSBSaWdodCBTaWRlTWVudVxyXG52YXIgbGF5b3V0cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vUHJvcGVydGllc1xyXG4gICAgdGhpcy5tZW51UmlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtbWVudScpO1xyXG4gICAgdGhpcy5tZW51UmlnaHRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtbWVudS1idXR0b24nKTtcclxuICAgIHRoaXMuaGFzQ2xhc3MsIHRoaXMuYWRkQ2xhc3MsIHRoaXMucmVtb3ZlQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5tZW51UmlnaHRCdXR0b24ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBkZWJ1Z2dlcjtcclxuICAgICAgICBhbGVydCgnaGknKTtcclxuICAgICAgICByaWdodF9tZW51LnRvZ2dsZSh0aGlzLCAnYWN0aXZlJyk7XHJcbiAgICAgICAgcmlnaHRfbWVudS50b2dnbGUobWVudVJpZ2h0LCAnY2JwLXNwbWVudS1vcGVuJyk7XHJcbiAgICAgICAgcmlnaHRfbWVudS50b2dnbGUobWVudVJpZ2h0QnV0dG9uLCAncmlnaHQtbWVudS1idXR0b24tb3BlbicpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLy8vSW5pdGlhbGl6ZXJcclxuICAgIC8vaWYgKCdjbGFzc0xpc3QnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xyXG4gICAgLy8gICAgdGhpcy5oYXNDbGFzcyA9IGZ1bmN0aW9uIChlbGVtLCBjKSB7XHJcbiAgICAvLyAgICAgICAgcmV0dXJuIGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKGMpO1xyXG4gICAgLy8gICAgfTtcclxuICAgIC8vICAgIHRoaXMuYWRkQ2xhc3MgPSBmdW5jdGlvbiAoZWxlbSwgYykge1xyXG4gICAgLy8gICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChjKTtcclxuICAgIC8vICAgIH07XHJcbiAgICAvLyAgICB0aGlzLnJlbW92ZUNsYXNzID0gZnVuY3Rpb24gKGVsZW0sIGMpIHtcclxuICAgIC8vICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoYyk7XHJcbiAgICAvLyAgICB9O1xyXG4gICAgLy99XHJcbiAgICAvL2Vsc2Uge1xyXG4gICAgLy8gICAgdGhpcy5oYXNDbGFzcyA9IGZ1bmN0aW9uIChlbGVtLCBjKSB7XHJcbiAgICAvLyAgICAgICAgcmV0dXJuIGNsYXNzUmVnKGMpLnRlc3QoZWxlbS5jbGFzc05hbWUpO1xyXG4gICAgLy8gICAgfTtcclxuICAgIC8vICAgIHRoaXMuYWRkQ2xhc3MgPSBmdW5jdGlvbiAoZWxlbSwgYykge1xyXG4gICAgLy8gICAgICAgIGlmICghaGFzQ2xhc3MoZWxlbSwgYykpIHtcclxuICAgIC8vICAgICAgICAgICAgZWxlbS5jbGFzc05hbWUgPSBlbGVtLmNsYXNzTmFtZSArICcgJyArIGM7XHJcbiAgICAvLyAgICAgICAgfVxyXG4gICAgLy8gICAgfTtcclxuICAgIC8vICAgIHRoaXMucmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbiAoZWxlbSwgYykge1xyXG4gICAgLy8gICAgICAgIGVsZW0uY2xhc3NOYW1lID0gZWxlbS5jbGFzc05hbWUucmVwbGFjZShjbGFzc1JlZyhjKSwgJyAnKTtcclxuICAgIC8vICAgIH07XHJcbiAgICAvL31cclxuXHJcbiAgICAvLy8vTWV0aG9kc1xyXG4gICAgLy9mdW5jdGlvbiB0b2dnbGVDbGFzcyhlbGVtLCBjKSB7XHJcbiAgICAvLyAgICB2YXIgZm4gPSBoYXNDbGFzcyhlbGVtLCBjKSA/IHJlbW92ZUNsYXNzIDogYWRkQ2xhc3M7XHJcbiAgICAvLyAgICBmbihlbGVtLCBjKTtcclxuICAgIC8vfVxyXG5cclxuICAgIC8vZnVuY3Rpb24gY2xhc3NSZWcoY2xhc3NOYW1lKSB7XHJcbiAgICAvLyAgICByZXR1cm4gbmV3IFJlZ0V4cChcIihefFxcXFxzKylcIiArIGNsYXNzTmFtZSArIFwiKFxcXFxzK3wkKVwiKTtcclxuICAgIC8vfVxyXG5cclxuICAgIC8vLy9DaGlsZCBPYmplY3RcclxuICAgIC8vdGhpcy5yaWdodF9tZW51ID0ge1xyXG4gICAgLy8gICAgLy8gZnVsbCBuYW1lc1xyXG4gICAgLy8gICAgaGFzQ2xhc3M6IHRoaXMuaGFzQ2xhc3MsXHJcbiAgICAvLyAgICBhZGRDbGFzczogdGhpcy5hZGRDbGFzcyxcclxuICAgIC8vICAgIHJlbW92ZUNsYXNzOiB0aGlzLnJlbW92ZUNsYXNzLFxyXG4gICAgLy8gICAgdG9nZ2xlQ2xhc3M6IHRoaXMudG9nZ2xlQ2xhc3MsXHJcbiAgICAvLyAgICAvLyBzaG9ydCBuYW1lc1xyXG4gICAgLy8gICAgaGFzOiB0aGlzLmhhc0NsYXNzLFxyXG4gICAgLy8gICAgYWRkOiB0aGlzLmFkZENsYXNzLFxyXG4gICAgLy8gICAgcmVtb3ZlOiB0aGlzLnJlbW92ZUNsYXNzLFxyXG4gICAgLy8gICAgdG9nZ2xlOiB0aGlzLnRvZ2dsZUNsYXNzXHJcbiAgICAvL307XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gbGF5b3V0czsiLCIoZnVuY3Rpb24gKHByb2Nlc3Mpe1xu77u/cHJvY2Vzcy5lbnYuQlJPV1NFUklGWVNISU1fRElBR05PU1RJQ1MgPSAxXHJcbi8vIFN0YXJ0IGxvYWRpbmcgdGhlIG1haW4gYXBwIGZpbGUuIFB1dCBhbGwgb2ZcclxuLy8geW91ciBhcHBsaWNhdGlvbiBsb2dpYyBpbiB0aGVyZS5cclxudmFyICQgPSBqUXVlcnkgPSByZXF1aXJlKCcuL2tlbmRvLzIwMTQuMy4xMTE5L2pxdWVyeS5taW4uanMnKTtcclxudmFyIG0gPSByZXF1aXJlKCcuL21pdGhyaWwuanMnKTtcclxuLy9yZXF1aXJlKCcuL2Jvb3RzdHJhcC5taW4uanMnKTtcclxucmVxdWlyZShcIi4vcmlwcGxlcy5taW4uanNcIik7XHJcbnJlcXVpcmUoXCIuL21hdGVyaWFsLm1pbi5qc1wiKTtcclxucmVxdWlyZSgnLi9rZW5kby8yMDE0LjMuMTExOS9rZW5kby53ZWIubWluLmpzJyk7XHJcbnJlcXVpcmUoJy4vanF1ZXJ5LmhvdGtleXMuanMnKTtcclxucmVxdWlyZSgnLi92ZWxvY2l0eS5qcycpO1xyXG4vLyAgICAgICAgPCEtLSBUb3AgbGV2ZWwgTWl0aHJpbCBSZWZlcmVuY2VzIC0tPlxyXG5yZXF1aXJlKCcuL2FwcC9hcHAucm91dGUuanMnKTtcclxuLy8gICAgICAgIDwhLS0gQXBwIFJlZmVyZW5jZXMgLS0+XHJcbnJlcXVpcmUoJy4vY29yZS5qcycpO1xyXG5yZXF1aXJlKCcuL2xheW91dC5qcycpO1xyXG5yZXF1aXJlKCcuL2NvbnRyb2xzLmpzJyk7XHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgICAkLm1hdGVyaWFsLmluaXQoKTtcclxufSk7XG59KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSkiLCIoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChuKXtyZXR1cm4gdHlwZW9mIG4ud2hpY2g9PVwidW5kZWZpbmVkXCI/ITA6dHlwZW9mIG4ud2hpY2g9PVwibnVtYmVyXCImJm4ud2hpY2g+MD8hbi5jdHJsS2V5JiYhbi5tZXRhS2V5JiYhbi5hbHRLZXkmJm4ud2hpY2ghPTg6ITF9bi5leHByW1wiOlwiXS5ub3RtZHByb2M9ZnVuY3Rpb24odCl7cmV0dXJuIG4odCkuZGF0YShcIm1kcHJvY1wiKT8hMTohMH07bi5tYXRlcmlhbD17b3B0aW9uczp7d2l0aFJpcHBsZXM6XCIudGlsZSwuYnRuOm5vdCguYnRuLWxpbmspLC5jYXJkLWltYWdlLC5uYXZiYXIgYTpub3QoLndpdGhvdXRyaXBwbGUpLC5kcm9wZG93bi1tZW51IGEsLm5hdi10YWJzIGE6bm90KC53aXRob3V0cmlwcGxlKSwud2l0aHJpcHBsZVwiLGlucHV0RWxlbWVudHM6XCJpbnB1dC5mb3JtLWNvbnRyb2wsIHRleHRhcmVhLmZvcm0tY29udHJvbCwgc2VsZWN0LmZvcm0tY29udHJvbFwiLGNoZWNrYm94RWxlbWVudHM6XCIuY2hlY2tib3ggPiBsYWJlbCA+IGlucHV0W3R5cGU9Y2hlY2tib3hdXCIscmFkaW9FbGVtZW50czpcIi5yYWRpbyA+IGxhYmVsID4gaW5wdXRbdHlwZT1yYWRpb11cIn0sY2hlY2tib3g6ZnVuY3Rpb24odCl7bih0P3Q6dGhpcy5vcHRpb25zLmNoZWNrYm94RWxlbWVudHMpLmZpbHRlcihcIjpub3RtZHByb2NcIikuZGF0YShcIm1kcHJvY1wiLCEwKS5hZnRlcihcIjxzcGFuIGNsYXNzPXJpcHBsZT48XFwvc3Bhbj48c3BhbiBjbGFzcz1jaGVjaz48XFwvc3Bhbj5cIil9LHJhZGlvOmZ1bmN0aW9uKHQpe24odD90OnRoaXMub3B0aW9ucy5yYWRpb0VsZW1lbnRzKS5maWx0ZXIoXCI6bm90bWRwcm9jXCIpLmRhdGEoXCJtZHByb2NcIiwhMCkuYWZ0ZXIoXCI8c3BhbiBjbGFzcz1jaXJjbGU+PFxcL3NwYW4+PHNwYW4gY2xhc3M9Y2hlY2s+PFxcL3NwYW4+XCIpfSxpbnB1dDpmdW5jdGlvbihpKXtuKGk/aTp0aGlzLm9wdGlvbnMuaW5wdXRFbGVtZW50cykuZmlsdGVyKFwiOm5vdG1kcHJvY1wiKS5kYXRhKFwibWRwcm9jXCIsITApLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1uKHRoaXMpLGkscjt0LndyYXAoXCI8ZGl2IGNsYXNzPWZvcm0tY29udHJvbC13cmFwcGVyPjxcXC9kaXY+XCIpO3QuYWZ0ZXIoXCI8c3BhbiBjbGFzcz1tYXRlcmlhbC1pbnB1dD48XFwvc3Bhbj5cIik7dC5oYXNDbGFzcyhcImZsb2F0aW5nLWxhYmVsXCIpJiYoaT10LmF0dHIoXCJwbGFjZWhvbGRlclwiKSx0LmF0dHIoXCJwbGFjZWhvbGRlclwiLG51bGwpLnJlbW92ZUNsYXNzKFwiZmxvYXRpbmctbGFiZWxcIiksdC5hZnRlcihcIjxkaXYgY2xhc3M9ZmxvYXRpbmctbGFiZWw+XCIraStcIjxcXC9kaXY+XCIpKTsodC52YWwoKT09PW51bGx8fHQudmFsKCk9PVwidW5kZWZpbmVkXCJ8fHQudmFsKCk9PT1cIlwiKSYmdC5hZGRDbGFzcyhcImVtcHR5XCIpO3QucGFyZW50KCkubmV4dCgpLmlzKFwiW3R5cGU9ZmlsZV1cIikmJih0LnBhcmVudCgpLmFkZENsYXNzKFwiZmlsZWlucHV0XCIpLHI9dC5wYXJlbnQoKS5uZXh0KCkuZGV0YWNoKCksdC5hZnRlcihyKSl9KTtuKGRvY3VtZW50KS5vbihcImNoYW5nZVwiLFwiLmNoZWNrYm94IGlucHV0XCIsZnVuY3Rpb24oKXtuKHRoaXMpLmJsdXIoKX0pLm9uKFwia2V5ZG93biBwYXN0ZVwiLFwiLmZvcm0tY29udHJvbFwiLGZ1bmN0aW9uKGkpe3QoaSkmJm4odGhpcykucmVtb3ZlQ2xhc3MoXCJlbXB0eVwiKX0pLm9uKFwia2V5dXAgY2hhbmdlXCIsXCIuZm9ybS1jb250cm9sXCIsZnVuY3Rpb24oKXt2YXIgdD1uKHRoaXMpO3QudmFsKCk9PT1cIlwiP3QuYWRkQ2xhc3MoXCJlbXB0eVwiKTp0LnJlbW92ZUNsYXNzKFwiZW1wdHlcIil9KS5vbihcImZvY3VzXCIsXCIuZm9ybS1jb250cm9sLXdyYXBwZXIuZmlsZWlucHV0XCIsZnVuY3Rpb24oKXtuKHRoaXMpLmZpbmQoXCJpbnB1dFwiKS5hZGRDbGFzcyhcImZvY3VzXCIpfSkub24oXCJibHVyXCIsXCIuZm9ybS1jb250cm9sLXdyYXBwZXIuZmlsZWlucHV0XCIsZnVuY3Rpb24oKXtuKHRoaXMpLmZpbmQoXCJpbnB1dFwiKS5yZW1vdmVDbGFzcyhcImZvY3VzXCIpfSkub24oXCJjaGFuZ2VcIixcIi5mb3JtLWNvbnRyb2wtd3JhcHBlci5maWxlaW5wdXQgW3R5cGU9ZmlsZV1cIixmdW5jdGlvbigpe3ZhciB0PVwiXCI7bi5lYWNoKG4odGhpcylbMF0uZmlsZXMsZnVuY3Rpb24obixpKXtjb25zb2xlLmxvZyhpKTt0Kz1pLm5hbWUrXCIsIFwifSk7dD10LnN1YnN0cmluZygwLHQubGVuZ3RoLTIpO3Q/bih0aGlzKS5wcmV2KCkucmVtb3ZlQ2xhc3MoXCJlbXB0eVwiKTpuKHRoaXMpLnByZXYoKS5hZGRDbGFzcyhcImVtcHR5XCIpO24odGhpcykucHJldigpLnZhbCh0KX0pfSxyaXBwbGVzOmZ1bmN0aW9uKG4pe3JpcHBsZXMuaW5pdChuP246dGhpcy5vcHRpb25zLndpdGhSaXBwbGVzKX0saW5pdDpmdW5jdGlvbigpe3RoaXMucmlwcGxlcygpO3RoaXMuaW5wdXQoKTt0aGlzLmNoZWNrYm94KCk7dGhpcy5yYWRpbygpO2RvY3VtZW50LmFycml2ZSYmZG9jdW1lbnQuYXJyaXZlKFwiaW5wdXQsIHRleHRhcmVhLCBzZWxlY3RcIixmdW5jdGlvbigpe24ubWF0ZXJpYWwuaW5pdCgpfSksZnVuY3Rpb24oKXt2YXIgaT1zZXRJbnRlcnZhbChmdW5jdGlvbigpe24oXCJpbnB1dFwiKS5lYWNoKGZ1bmN0aW9uKCl7bih0aGlzKS52YWwoKSE9PW4odGhpcykuYXR0cihcInZhbHVlXCIpJiZuKHRoaXMpLnRyaWdnZXIoXCJjaGFuZ2VcIil9KX0sMTAwKSx0O3NldFRpbWVvdXQoZnVuY3Rpb24oKXtjbGVhckludGVydmFsKGkpfSwxZTQpO24oZG9jdW1lbnQpLm9uKFwiZm9jdXNcIixcImlucHV0XCIsZnVuY3Rpb24oKXt2YXIgaT1uKHRoaXMpLnBhcmVudHMoXCJmb3JtXCIpLmZpbmQoXCJpbnB1dFwiKTt0PXNldEludGVydmFsKGZ1bmN0aW9uKCl7aS5lYWNoKGZ1bmN0aW9uKCl7bih0aGlzKS52YWwoKSE9PW4odGhpcykuYXR0cihcInZhbHVlXCIpJiZuKHRoaXMpLnRyaWdnZXIoXCJjaGFuZ2VcIil9KX0sMTAwKX0pLm9uKFwiYmx1clwiLFwiaW5wdXRcIixmdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwodCl9KX0oKX19fSkoalF1ZXJ5KTtcclxuLypcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWF0ZXJpYWwubWluLmpzLm1hcFxyXG4qLyIsInZhciBtID0gKGZ1bmN0aW9uIGFwcCh3aW5kb3csIHVuZGVmaW5lZCkge1xyXG5cdHZhciBPQkpFQ1QgPSBcIltvYmplY3QgT2JqZWN0XVwiLCBBUlJBWSA9IFwiW29iamVjdCBBcnJheV1cIiwgU1RSSU5HID0gXCJbb2JqZWN0IFN0cmluZ11cIiwgRlVOQ1RJT04gPSBcImZ1bmN0aW9uXCI7XHJcblx0dmFyIHR5cGUgPSB7fS50b1N0cmluZztcclxuXHR2YXIgcGFyc2VyID0gLyg/OihefCN8XFwuKShbXiNcXC5cXFtcXF1dKykpfChcXFsuKz9cXF0pL2csIGF0dHJQYXJzZXIgPSAvXFxbKC4rPykoPzo9KFwifCd8KSguKj8pXFwyKT9cXF0vO1xyXG5cdHZhciB2b2lkRWxlbWVudHMgPSAvXihBUkVBfEJBU0V8QlJ8Q09MfENPTU1BTkR8RU1CRUR8SFJ8SU1HfElOUFVUfEtFWUdFTnxMSU5LfE1FVEF8UEFSQU18U09VUkNFfFRSQUNLfFdCUikkLztcclxuXHJcblx0Ly8gY2FjaGluZyBjb21tb25seSB1c2VkIHZhcmlhYmxlc1xyXG5cdHZhciAkZG9jdW1lbnQsICRsb2NhdGlvbiwgJHJlcXVlc3RBbmltYXRpb25GcmFtZSwgJGNhbmNlbEFuaW1hdGlvbkZyYW1lO1xyXG5cclxuXHQvLyBzZWxmIGludm9raW5nIGZ1bmN0aW9uIG5lZWRlZCBiZWNhdXNlIG9mIHRoZSB3YXkgbW9ja3Mgd29ya1xyXG5cdGZ1bmN0aW9uIGluaXRpYWxpemUod2luZG93KXtcclxuXHRcdCRkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudDtcclxuXHRcdCRsb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbjtcclxuXHRcdCRjYW5jZWxBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cuY2xlYXJUaW1lb3V0O1xyXG5cdFx0JHJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LnNldFRpbWVvdXQ7XHJcblx0fVxyXG5cclxuXHRpbml0aWFsaXplKHdpbmRvdyk7XHJcblxyXG5cclxuXHQvKlxyXG5cdCAqIEB0eXBlZGVmIHtTdHJpbmd9IFRhZ1xyXG5cdCAqIEEgc3RyaW5nIHRoYXQgbG9va3MgbGlrZSAtPiBkaXYuY2xhc3NuYW1lI2lkW3BhcmFtPW9uZV1bcGFyYW0yPXR3b11cclxuXHQgKiBXaGljaCBkZXNjcmliZXMgYSBET00gbm9kZVxyXG5cdCAqL1xyXG5cclxuXHQvKlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHtUYWd9IFRoZSBET00gbm9kZSB0YWdcclxuXHQgKiBAcGFyYW0ge09iamVjdD1bXX0gb3B0aW9uYWwga2V5LXZhbHVlIHBhaXJzIHRvIGJlIG1hcHBlZCB0byBET00gYXR0cnNcclxuXHQgKiBAcGFyYW0gey4uLm1Ob2RlPVtdfSBaZXJvIG9yIG1vcmUgTWl0aHJpbCBjaGlsZCBub2Rlcy4gQ2FuIGJlIGFuIGFycmF5LCBvciBzcGxhdCAob3B0aW9uYWwpXHJcblx0ICpcclxuXHQgKi9cclxuXHRmdW5jdGlvbiBtKCkge1xyXG5cdFx0dmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XHJcblx0XHR2YXIgaGFzQXR0cnMgPSBhcmdzWzFdICE9IG51bGwgJiYgdHlwZS5jYWxsKGFyZ3NbMV0pID09IE9CSkVDVCAmJiAhKFwidGFnXCIgaW4gYXJnc1sxXSkgJiYgIShcInN1YnRyZWVcIiBpbiBhcmdzWzFdKTtcclxuXHRcdHZhciBhdHRycyA9IGhhc0F0dHJzID8gYXJnc1sxXSA6IHt9O1xyXG5cdFx0dmFyIGNsYXNzQXR0ck5hbWUgPSBcImNsYXNzXCIgaW4gYXR0cnMgPyBcImNsYXNzXCIgOiBcImNsYXNzTmFtZVwiO1xyXG5cdFx0dmFyIGNlbGwgPSB7dGFnOiBcImRpdlwiLCBhdHRyczoge319O1xyXG5cdFx0dmFyIG1hdGNoLCBjbGFzc2VzID0gW107XHJcblx0XHRpZiAodHlwZS5jYWxsKGFyZ3NbMF0pICE9IFNUUklORykgdGhyb3cgbmV3IEVycm9yKFwic2VsZWN0b3IgaW4gbShzZWxlY3RvciwgYXR0cnMsIGNoaWxkcmVuKSBzaG91bGQgYmUgYSBzdHJpbmdcIilcclxuXHRcdHdoaWxlIChtYXRjaCA9IHBhcnNlci5leGVjKGFyZ3NbMF0pKSB7XHJcblx0XHRcdGlmIChtYXRjaFsxXSA9PSBcIlwiICYmIG1hdGNoWzJdKSBjZWxsLnRhZyA9IG1hdGNoWzJdO1xyXG5cdFx0XHRlbHNlIGlmIChtYXRjaFsxXSA9PSBcIiNcIikgY2VsbC5hdHRycy5pZCA9IG1hdGNoWzJdO1xyXG5cdFx0XHRlbHNlIGlmIChtYXRjaFsxXSA9PSBcIi5cIikgY2xhc3Nlcy5wdXNoKG1hdGNoWzJdKTtcclxuXHRcdFx0ZWxzZSBpZiAobWF0Y2hbM11bMF0gPT0gXCJbXCIpIHtcclxuXHRcdFx0XHR2YXIgcGFpciA9IGF0dHJQYXJzZXIuZXhlYyhtYXRjaFszXSk7XHJcblx0XHRcdFx0Y2VsbC5hdHRyc1twYWlyWzFdXSA9IHBhaXJbM10gfHwgKHBhaXJbMl0gPyBcIlwiIDp0cnVlKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRpZiAoY2xhc3Nlcy5sZW5ndGggPiAwKSBjZWxsLmF0dHJzW2NsYXNzQXR0ck5hbWVdID0gY2xhc3Nlcy5qb2luKFwiIFwiKTtcclxuXHJcblxyXG5cdFx0dmFyIGNoaWxkcmVuID0gaGFzQXR0cnMgPyBhcmdzWzJdIDogYXJnc1sxXTtcclxuXHRcdGlmICh0eXBlLmNhbGwoY2hpbGRyZW4pID09IEFSUkFZKSB7XHJcblx0XHRcdGNlbGwuY2hpbGRyZW4gPSBjaGlsZHJlblxyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGNlbGwuY2hpbGRyZW4gPSBoYXNBdHRycyA/IGFyZ3Muc2xpY2UoMikgOiBhcmdzLnNsaWNlKDEpXHJcblx0XHR9XHJcblxyXG5cdFx0Zm9yICh2YXIgYXR0ck5hbWUgaW4gYXR0cnMpIHtcclxuXHRcdFx0aWYgKGF0dHJOYW1lID09IGNsYXNzQXR0ck5hbWUpIGNlbGwuYXR0cnNbYXR0ck5hbWVdID0gKGNlbGwuYXR0cnNbYXR0ck5hbWVdIHx8IFwiXCIpICsgXCIgXCIgKyBhdHRyc1thdHRyTmFtZV07XHJcblx0XHRcdGVsc2UgY2VsbC5hdHRyc1thdHRyTmFtZV0gPSBhdHRyc1thdHRyTmFtZV1cclxuXHRcdH1cclxuXHRcdHJldHVybiBjZWxsXHJcblx0fVxyXG5cdGZ1bmN0aW9uIGJ1aWxkKHBhcmVudEVsZW1lbnQsIHBhcmVudFRhZywgcGFyZW50Q2FjaGUsIHBhcmVudEluZGV4LCBkYXRhLCBjYWNoZWQsIHNob3VsZFJlYXR0YWNoLCBpbmRleCwgZWRpdGFibGUsIG5hbWVzcGFjZSwgY29uZmlncykge1xyXG5cdFx0Ly9gYnVpbGRgIGlzIGEgcmVjdXJzaXZlIGZ1bmN0aW9uIHRoYXQgbWFuYWdlcyBjcmVhdGlvbi9kaWZmaW5nL3JlbW92YWwgb2YgRE9NIGVsZW1lbnRzIGJhc2VkIG9uIGNvbXBhcmlzb24gYmV0d2VlbiBgZGF0YWAgYW5kIGBjYWNoZWRgXHJcblx0XHQvL3RoZSBkaWZmIGFsZ29yaXRobSBjYW4gYmUgc3VtbWFyaXplZCBhcyB0aGlzOlxyXG5cdFx0Ly8xIC0gY29tcGFyZSBgZGF0YWAgYW5kIGBjYWNoZWRgXHJcblx0XHQvLzIgLSBpZiB0aGV5IGFyZSBkaWZmZXJlbnQsIGNvcHkgYGRhdGFgIHRvIGBjYWNoZWRgIGFuZCB1cGRhdGUgdGhlIERPTSBiYXNlZCBvbiB3aGF0IHRoZSBkaWZmZXJlbmNlIGlzXHJcblx0XHQvLzMgLSByZWN1cnNpdmVseSBhcHBseSB0aGlzIGFsZ29yaXRobSBmb3IgZXZlcnkgYXJyYXkgYW5kIGZvciB0aGUgY2hpbGRyZW4gb2YgZXZlcnkgdmlydHVhbCBlbGVtZW50XHJcblxyXG5cdFx0Ly90aGUgYGNhY2hlZGAgZGF0YSBzdHJ1Y3R1cmUgaXMgZXNzZW50aWFsbHkgdGhlIHNhbWUgYXMgdGhlIHByZXZpb3VzIHJlZHJhdydzIGBkYXRhYCBkYXRhIHN0cnVjdHVyZSwgd2l0aCBhIGZldyBhZGRpdGlvbnM6XHJcblx0XHQvLy0gYGNhY2hlZGAgYWx3YXlzIGhhcyBhIHByb3BlcnR5IGNhbGxlZCBgbm9kZXNgLCB3aGljaCBpcyBhIGxpc3Qgb2YgRE9NIGVsZW1lbnRzIHRoYXQgY29ycmVzcG9uZCB0byB0aGUgZGF0YSByZXByZXNlbnRlZCBieSB0aGUgcmVzcGVjdGl2ZSB2aXJ0dWFsIGVsZW1lbnRcclxuXHRcdC8vLSBpbiBvcmRlciB0byBzdXBwb3J0IGF0dGFjaGluZyBgbm9kZXNgIGFzIGEgcHJvcGVydHkgb2YgYGNhY2hlZGAsIGBjYWNoZWRgIGlzICphbHdheXMqIGEgbm9uLXByaW1pdGl2ZSBvYmplY3QsIGkuZS4gaWYgdGhlIGRhdGEgd2FzIGEgc3RyaW5nLCB0aGVuIGNhY2hlZCBpcyBhIFN0cmluZyBpbnN0YW5jZS4gSWYgZGF0YSB3YXMgYG51bGxgIG9yIGB1bmRlZmluZWRgLCBjYWNoZWQgaXMgYG5ldyBTdHJpbmcoXCJcIilgXHJcblx0XHQvLy0gYGNhY2hlZCBhbHNvIGhhcyBhIGBjb25maWdDb250ZXh0YCBwcm9wZXJ0eSwgd2hpY2ggaXMgdGhlIHN0YXRlIHN0b3JhZ2Ugb2JqZWN0IGV4cG9zZWQgYnkgY29uZmlnKGVsZW1lbnQsIGlzSW5pdGlhbGl6ZWQsIGNvbnRleHQpXHJcblx0XHQvLy0gd2hlbiBgY2FjaGVkYCBpcyBhbiBPYmplY3QsIGl0IHJlcHJlc2VudHMgYSB2aXJ0dWFsIGVsZW1lbnQ7IHdoZW4gaXQncyBhbiBBcnJheSwgaXQgcmVwcmVzZW50cyBhIGxpc3Qgb2YgZWxlbWVudHM7IHdoZW4gaXQncyBhIFN0cmluZywgTnVtYmVyIG9yIEJvb2xlYW4sIGl0IHJlcHJlc2VudHMgYSB0ZXh0IG5vZGVcclxuXHJcblx0XHQvL2BwYXJlbnRFbGVtZW50YCBpcyBhIERPTSBlbGVtZW50IHVzZWQgZm9yIFczQyBET00gQVBJIGNhbGxzXHJcblx0XHQvL2BwYXJlbnRUYWdgIGlzIG9ubHkgdXNlZCBmb3IgaGFuZGxpbmcgYSBjb3JuZXIgY2FzZSBmb3IgdGV4dGFyZWEgdmFsdWVzXHJcblx0XHQvL2BwYXJlbnRDYWNoZWAgaXMgdXNlZCB0byByZW1vdmUgbm9kZXMgaW4gc29tZSBtdWx0aS1ub2RlIGNhc2VzXHJcblx0XHQvL2BwYXJlbnRJbmRleGAgYW5kIGBpbmRleGAgYXJlIHVzZWQgdG8gZmlndXJlIG91dCB0aGUgb2Zmc2V0IG9mIG5vZGVzLiBUaGV5J3JlIGFydGlmYWN0cyBmcm9tIGJlZm9yZSBhcnJheXMgc3RhcnRlZCBiZWluZyBmbGF0dGVuZWQgYW5kIGFyZSBsaWtlbHkgcmVmYWN0b3JhYmxlXHJcblx0XHQvL2BkYXRhYCBhbmQgYGNhY2hlZGAgYXJlLCByZXNwZWN0aXZlbHksIHRoZSBuZXcgYW5kIG9sZCBub2RlcyBiZWluZyBkaWZmZWRcclxuXHRcdC8vYHNob3VsZFJlYXR0YWNoYCBpcyBhIGZsYWcgaW5kaWNhdGluZyB3aGV0aGVyIGEgcGFyZW50IG5vZGUgd2FzIHJlY3JlYXRlZCAoaWYgc28sIGFuZCBpZiB0aGlzIG5vZGUgaXMgcmV1c2VkLCB0aGVuIHRoaXMgbm9kZSBtdXN0IHJlYXR0YWNoIGl0c2VsZiB0byB0aGUgbmV3IHBhcmVudClcclxuXHRcdC8vYGVkaXRhYmxlYCBpcyBhIGZsYWcgdGhhdCBpbmRpY2F0ZXMgd2hldGhlciBhbiBhbmNlc3RvciBpcyBjb250ZW50ZWRpdGFibGVcclxuXHRcdC8vYG5hbWVzcGFjZWAgaW5kaWNhdGVzIHRoZSBjbG9zZXN0IEhUTUwgbmFtZXNwYWNlIGFzIGl0IGNhc2NhZGVzIGRvd24gZnJvbSBhbiBhbmNlc3RvclxyXG5cdFx0Ly9gY29uZmlnc2AgaXMgYSBsaXN0IG9mIGNvbmZpZyBmdW5jdGlvbnMgdG8gcnVuIGFmdGVyIHRoZSB0b3Btb3N0IGBidWlsZGAgY2FsbCBmaW5pc2hlcyBydW5uaW5nXHJcblxyXG5cdFx0Ly90aGVyZSdzIGxvZ2ljIHRoYXQgcmVsaWVzIG9uIHRoZSBhc3N1bXB0aW9uIHRoYXQgbnVsbCBhbmQgdW5kZWZpbmVkIGRhdGEgYXJlIGVxdWl2YWxlbnQgdG8gZW1wdHkgc3RyaW5nc1xyXG5cdFx0Ly8tIHRoaXMgcHJldmVudHMgbGlmZWN5Y2xlIHN1cnByaXNlcyBmcm9tIHByb2NlZHVyYWwgaGVscGVycyB0aGF0IG1peCBpbXBsaWNpdCBhbmQgZXhwbGljaXQgcmV0dXJuIHN0YXRlbWVudHMgKGUuZy4gZnVuY3Rpb24gZm9vKCkge2lmIChjb25kKSByZXR1cm4gbShcImRpdlwiKX1cclxuXHRcdC8vLSBpdCBzaW1wbGlmaWVzIGRpZmZpbmcgY29kZVxyXG5cdFx0aWYgKGRhdGEgPT0gbnVsbCkgZGF0YSA9IFwiXCI7XHJcblx0XHRpZiAoZGF0YS5zdWJ0cmVlID09PSBcInJldGFpblwiKSByZXR1cm4gY2FjaGVkO1xyXG5cdFx0dmFyIGNhY2hlZFR5cGUgPSB0eXBlLmNhbGwoY2FjaGVkKSwgZGF0YVR5cGUgPSB0eXBlLmNhbGwoZGF0YSk7XHJcblx0XHRpZiAoY2FjaGVkID09IG51bGwgfHwgY2FjaGVkVHlwZSAhPSBkYXRhVHlwZSkge1xyXG5cdFx0XHRpZiAoY2FjaGVkICE9IG51bGwpIHtcclxuXHRcdFx0XHRpZiAocGFyZW50Q2FjaGUgJiYgcGFyZW50Q2FjaGUubm9kZXMpIHtcclxuXHRcdFx0XHRcdHZhciBvZmZzZXQgPSBpbmRleCAtIHBhcmVudEluZGV4O1xyXG5cdFx0XHRcdFx0dmFyIGVuZCA9IG9mZnNldCArIChkYXRhVHlwZSA9PSBBUlJBWSA/IGRhdGEgOiBjYWNoZWQubm9kZXMpLmxlbmd0aDtcclxuXHRcdFx0XHRcdGNsZWFyKHBhcmVudENhY2hlLm5vZGVzLnNsaWNlKG9mZnNldCwgZW5kKSwgcGFyZW50Q2FjaGUuc2xpY2Uob2Zmc2V0LCBlbmQpKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIGlmIChjYWNoZWQubm9kZXMpIGNsZWFyKGNhY2hlZC5ub2RlcywgY2FjaGVkKVxyXG5cdFx0XHR9XHJcblx0XHRcdGNhY2hlZCA9IG5ldyBkYXRhLmNvbnN0cnVjdG9yO1xyXG5cdFx0XHRpZiAoY2FjaGVkLnRhZykgY2FjaGVkID0ge307IC8vaWYgY29uc3RydWN0b3IgY3JlYXRlcyBhIHZpcnR1YWwgZG9tIGVsZW1lbnQsIHVzZSBhIGJsYW5rIG9iamVjdCBhcyB0aGUgYmFzZSBjYWNoZWQgbm9kZSBpbnN0ZWFkIG9mIGNvcHlpbmcgdGhlIHZpcnR1YWwgZWwgKCMyNzcpXHJcblx0XHRcdGNhY2hlZC5ub2RlcyA9IFtdXHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGRhdGFUeXBlID09IEFSUkFZKSB7XHJcblx0XHRcdC8vcmVjdXJzaXZlbHkgZmxhdHRlbiBhcnJheVxyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRpZiAodHlwZS5jYWxsKGRhdGFbaV0pID09IEFSUkFZKSB7XHJcblx0XHRcdFx0XHRkYXRhID0gZGF0YS5jb25jYXQuYXBwbHkoW10sIGRhdGEpO1xyXG5cdFx0XHRcdFx0aS0tIC8vY2hlY2sgY3VycmVudCBpbmRleCBhZ2FpbiBhbmQgZmxhdHRlbiB1bnRpbCB0aGVyZSBhcmUgbm8gbW9yZSBuZXN0ZWQgYXJyYXlzIGF0IHRoYXQgaW5kZXhcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHZhciBub2RlcyA9IFtdLCBpbnRhY3QgPSBjYWNoZWQubGVuZ3RoID09PSBkYXRhLmxlbmd0aCwgc3ViQXJyYXlDb3VudCA9IDA7XHJcblxyXG5cdFx0XHQvL2tleXMgYWxnb3JpdGhtOiBzb3J0IGVsZW1lbnRzIHdpdGhvdXQgcmVjcmVhdGluZyB0aGVtIGlmIGtleXMgYXJlIHByZXNlbnRcclxuXHRcdFx0Ly8xKSBjcmVhdGUgYSBtYXAgb2YgYWxsIGV4aXN0aW5nIGtleXMsIGFuZCBtYXJrIGFsbCBmb3IgZGVsZXRpb25cclxuXHRcdFx0Ly8yKSBhZGQgbmV3IGtleXMgdG8gbWFwIGFuZCBtYXJrIHRoZW0gZm9yIGFkZGl0aW9uXHJcblx0XHRcdC8vMykgaWYga2V5IGV4aXN0cyBpbiBuZXcgbGlzdCwgY2hhbmdlIGFjdGlvbiBmcm9tIGRlbGV0aW9uIHRvIGEgbW92ZVxyXG5cdFx0XHQvLzQpIGZvciBlYWNoIGtleSwgaGFuZGxlIGl0cyBjb3JyZXNwb25kaW5nIGFjdGlvbiBhcyBtYXJrZWQgaW4gcHJldmlvdXMgc3RlcHNcclxuXHRcdFx0Ly81KSBjb3B5IHVua2V5ZWQgaXRlbXMgaW50byB0aGVpciByZXNwZWN0aXZlIGdhcHNcclxuXHRcdFx0dmFyIERFTEVUSU9OID0gMSwgSU5TRVJUSU9OID0gMiAsIE1PVkUgPSAzO1xyXG5cdFx0XHR2YXIgZXhpc3RpbmcgPSB7fSwgdW5rZXllZCA9IFtdLCBzaG91bGRNYWludGFpbklkZW50aXRpZXMgPSBmYWxzZTtcclxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjYWNoZWQubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRpZiAoY2FjaGVkW2ldICYmIGNhY2hlZFtpXS5hdHRycyAmJiBjYWNoZWRbaV0uYXR0cnMua2V5ICE9IG51bGwpIHtcclxuXHRcdFx0XHRcdHNob3VsZE1haW50YWluSWRlbnRpdGllcyA9IHRydWU7XHJcblx0XHRcdFx0XHRleGlzdGluZ1tjYWNoZWRbaV0uYXR0cnMua2V5XSA9IHthY3Rpb246IERFTEVUSU9OLCBpbmRleDogaX1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHNob3VsZE1haW50YWluSWRlbnRpdGllcykge1xyXG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0aWYgKGRhdGFbaV0gJiYgZGF0YVtpXS5hdHRycykge1xyXG5cdFx0XHRcdFx0XHRpZiAoZGF0YVtpXS5hdHRycy5rZXkgIT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0XHRcdHZhciBrZXkgPSBkYXRhW2ldLmF0dHJzLmtleTtcclxuXHRcdFx0XHRcdFx0XHRpZiAoIWV4aXN0aW5nW2tleV0pIGV4aXN0aW5nW2tleV0gPSB7YWN0aW9uOiBJTlNFUlRJT04sIGluZGV4OiBpfTtcclxuXHRcdFx0XHRcdFx0XHRlbHNlIGV4aXN0aW5nW2tleV0gPSB7XHJcblx0XHRcdFx0XHRcdFx0XHRhY3Rpb246IE1PVkUsXHJcblx0XHRcdFx0XHRcdFx0XHRpbmRleDogaSxcclxuXHRcdFx0XHRcdFx0XHRcdGZyb206IGV4aXN0aW5nW2tleV0uaW5kZXgsXHJcblx0XHRcdFx0XHRcdFx0XHRlbGVtZW50OiBwYXJlbnRFbGVtZW50LmNoaWxkTm9kZXNbZXhpc3Rpbmdba2V5XS5pbmRleF0gfHwgJGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0ZWxzZSB1bmtleWVkLnB1c2goe2luZGV4OiBpLCBlbGVtZW50OiBwYXJlbnRFbGVtZW50LmNoaWxkTm9kZXNbaV0gfHwgJGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIil9KVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR2YXIgYWN0aW9ucyA9IE9iamVjdC5rZXlzKGV4aXN0aW5nKS5tYXAoZnVuY3Rpb24oa2V5KSB7cmV0dXJuIGV4aXN0aW5nW2tleV19KTtcclxuXHRcdFx0XHR2YXIgY2hhbmdlcyA9IGFjdGlvbnMuc29ydChmdW5jdGlvbihhLCBiKSB7cmV0dXJuIGEuYWN0aW9uIC0gYi5hY3Rpb24gfHwgYS5pbmRleCAtIGIuaW5kZXh9KTtcclxuXHRcdFx0XHR2YXIgbmV3Q2FjaGVkID0gY2FjaGVkLnNsaWNlKCk7XHJcblxyXG5cdFx0XHRcdGZvciAodmFyIGkgPSAwLCBjaGFuZ2U7IGNoYW5nZSA9IGNoYW5nZXNbaV07IGkrKykge1xyXG5cdFx0XHRcdFx0aWYgKGNoYW5nZS5hY3Rpb24gPT0gREVMRVRJT04pIHtcclxuXHRcdFx0XHRcdFx0Y2xlYXIoY2FjaGVkW2NoYW5nZS5pbmRleF0ubm9kZXMsIGNhY2hlZFtjaGFuZ2UuaW5kZXhdKTtcclxuXHRcdFx0XHRcdFx0bmV3Q2FjaGVkLnNwbGljZShjaGFuZ2UuaW5kZXgsIDEpXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAoY2hhbmdlLmFjdGlvbiA9PSBJTlNFUlRJT04pIHtcclxuXHRcdFx0XHRcdFx0dmFyIGR1bW15ID0gJGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblx0XHRcdFx0XHRcdGR1bW15LmtleSA9IGRhdGFbY2hhbmdlLmluZGV4XS5hdHRycy5rZXk7XHJcblx0XHRcdFx0XHRcdHBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGR1bW15LCBwYXJlbnRFbGVtZW50LmNoaWxkTm9kZXNbY2hhbmdlLmluZGV4XSB8fCBudWxsKTtcclxuXHRcdFx0XHRcdFx0bmV3Q2FjaGVkLnNwbGljZShjaGFuZ2UuaW5kZXgsIDAsIHthdHRyczoge2tleTogZGF0YVtjaGFuZ2UuaW5kZXhdLmF0dHJzLmtleX0sIG5vZGVzOiBbZHVtbXldfSlcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoY2hhbmdlLmFjdGlvbiA9PSBNT1ZFKSB7XHJcblx0XHRcdFx0XHRcdGlmIChwYXJlbnRFbGVtZW50LmNoaWxkTm9kZXNbY2hhbmdlLmluZGV4XSAhPT0gY2hhbmdlLmVsZW1lbnQgJiYgY2hhbmdlLmVsZW1lbnQgIT09IG51bGwpIHtcclxuXHRcdFx0XHRcdFx0XHRwYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShjaGFuZ2UuZWxlbWVudCwgcGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2NoYW5nZS5pbmRleF0gfHwgbnVsbClcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRuZXdDYWNoZWRbY2hhbmdlLmluZGV4XSA9IGNhY2hlZFtjaGFuZ2UuZnJvbV1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB1bmtleWVkLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHR2YXIgY2hhbmdlID0gdW5rZXllZFtpXTtcclxuXHRcdFx0XHRcdHBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGNoYW5nZS5lbGVtZW50LCBwYXJlbnRFbGVtZW50LmNoaWxkTm9kZXNbY2hhbmdlLmluZGV4XSB8fCBudWxsKTtcclxuXHRcdFx0XHRcdG5ld0NhY2hlZFtjaGFuZ2UuaW5kZXhdID0gY2FjaGVkW2NoYW5nZS5pbmRleF1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y2FjaGVkID0gbmV3Q2FjaGVkO1xyXG5cdFx0XHRcdGNhY2hlZC5ub2RlcyA9IFtdO1xyXG5cdFx0XHRcdGZvciAodmFyIGkgPSAwLCBjaGlsZDsgY2hpbGQgPSBwYXJlbnRFbGVtZW50LmNoaWxkTm9kZXNbaV07IGkrKykgY2FjaGVkLm5vZGVzLnB1c2goY2hpbGQpXHJcblx0XHRcdH1cclxuXHRcdFx0Ly9lbmQga2V5IGFsZ29yaXRobVxyXG5cclxuXHRcdFx0Zm9yICh2YXIgaSA9IDAsIGNhY2hlQ291bnQgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdC8vZGlmZiBlYWNoIGl0ZW0gaW4gdGhlIGFycmF5XHJcblx0XHRcdFx0dmFyIGl0ZW0gPSBidWlsZChwYXJlbnRFbGVtZW50LCBwYXJlbnRUYWcsIGNhY2hlZCwgaW5kZXgsIGRhdGFbaV0sIGNhY2hlZFtjYWNoZUNvdW50XSwgc2hvdWxkUmVhdHRhY2gsIGluZGV4ICsgc3ViQXJyYXlDb3VudCB8fCBzdWJBcnJheUNvdW50LCBlZGl0YWJsZSwgbmFtZXNwYWNlLCBjb25maWdzKTtcclxuXHRcdFx0XHRpZiAoaXRlbSA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTtcclxuXHRcdFx0XHRpZiAoIWl0ZW0ubm9kZXMuaW50YWN0KSBpbnRhY3QgPSBmYWxzZTtcclxuXHRcdFx0XHRpZiAoaXRlbS4kdHJ1c3RlZCkge1xyXG5cdFx0XHRcdFx0Ly9maXggb2Zmc2V0IG9mIG5leHQgZWxlbWVudCBpZiBpdGVtIHdhcyBhIHRydXN0ZWQgc3RyaW5nIHcvIG1vcmUgdGhhbiBvbmUgaHRtbCBlbGVtZW50XHJcblx0XHRcdFx0XHQvL3RoZSBmaXJzdCBjbGF1c2UgaW4gdGhlIHJlZ2V4cCBtYXRjaGVzIGVsZW1lbnRzXHJcblx0XHRcdFx0XHQvL3RoZSBzZWNvbmQgY2xhdXNlIChhZnRlciB0aGUgcGlwZSkgbWF0Y2hlcyB0ZXh0IG5vZGVzXHJcblx0XHRcdFx0XHRzdWJBcnJheUNvdW50ICs9IChpdGVtLm1hdGNoKC88W15cXC9dfFxcPlxccypbXjxdL2cpIHx8IFtdKS5sZW5ndGhcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSBzdWJBcnJheUNvdW50ICs9IHR5cGUuY2FsbChpdGVtKSA9PSBBUlJBWSA/IGl0ZW0ubGVuZ3RoIDogMTtcclxuXHRcdFx0XHRjYWNoZWRbY2FjaGVDb3VudCsrXSA9IGl0ZW1cclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIWludGFjdCkge1xyXG5cdFx0XHRcdC8vZGlmZiB0aGUgYXJyYXkgaXRzZWxmXHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly91cGRhdGUgdGhlIGxpc3Qgb2YgRE9NIG5vZGVzIGJ5IGNvbGxlY3RpbmcgdGhlIG5vZGVzIGZyb20gZWFjaCBpdGVtXHJcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRpZiAoY2FjaGVkW2ldICE9IG51bGwpIG5vZGVzLnB1c2guYXBwbHkobm9kZXMsIGNhY2hlZFtpXS5ub2RlcylcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly9yZW1vdmUgaXRlbXMgZnJvbSB0aGUgZW5kIG9mIHRoZSBhcnJheSBpZiB0aGUgbmV3IGFycmF5IGlzIHNob3J0ZXIgdGhhbiB0aGUgb2xkIG9uZVxyXG5cdFx0XHRcdC8vaWYgZXJyb3JzIGV2ZXIgaGFwcGVuIGhlcmUsIHRoZSBpc3N1ZSBpcyBtb3N0IGxpa2VseSBhIGJ1ZyBpbiB0aGUgY29uc3RydWN0aW9uIG9mIHRoZSBgY2FjaGVkYCBkYXRhIHN0cnVjdHVyZSBzb21ld2hlcmUgZWFybGllciBpbiB0aGUgcHJvZ3JhbVxyXG5cdFx0XHRcdGZvciAodmFyIGkgPSAwLCBub2RlOyBub2RlID0gY2FjaGVkLm5vZGVzW2ldOyBpKyspIHtcclxuXHRcdFx0XHRcdGlmIChub2RlLnBhcmVudE5vZGUgIT0gbnVsbCAmJiBub2Rlcy5pbmRleE9mKG5vZGUpIDwgMCkgY2xlYXIoW25vZGVdLCBbY2FjaGVkW2ldXSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKGRhdGEubGVuZ3RoIDwgY2FjaGVkLmxlbmd0aCkgY2FjaGVkLmxlbmd0aCA9IGRhdGEubGVuZ3RoO1xyXG5cdFx0XHRcdGNhY2hlZC5ub2RlcyA9IG5vZGVzXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGVsc2UgaWYgKGRhdGEgIT0gbnVsbCAmJiBkYXRhVHlwZSA9PSBPQkpFQ1QpIHtcclxuXHRcdFx0aWYgKCFkYXRhLmF0dHJzKSBkYXRhLmF0dHJzID0ge307XHJcblx0XHRcdGlmICghY2FjaGVkLmF0dHJzKSBjYWNoZWQuYXR0cnMgPSB7fTtcclxuXHJcblx0XHRcdHZhciBkYXRhQXR0cktleXMgPSBPYmplY3Qua2V5cyhkYXRhLmF0dHJzKTtcclxuXHRcdFx0dmFyIGhhc0tleXMgPSBkYXRhQXR0cktleXMubGVuZ3RoID4gKFwia2V5XCIgaW4gZGF0YS5hdHRycyA/IDEgOiAwKVxyXG5cdFx0XHQvL2lmIGFuIGVsZW1lbnQgaXMgZGlmZmVyZW50IGVub3VnaCBmcm9tIHRoZSBvbmUgaW4gY2FjaGUsIHJlY3JlYXRlIGl0XHJcblx0XHRcdGlmIChkYXRhLnRhZyAhPSBjYWNoZWQudGFnIHx8IGRhdGFBdHRyS2V5cy5qb2luKCkgIT0gT2JqZWN0LmtleXMoY2FjaGVkLmF0dHJzKS5qb2luKCkgfHwgZGF0YS5hdHRycy5pZCAhPSBjYWNoZWQuYXR0cnMuaWQpIHtcclxuXHRcdFx0XHRpZiAoY2FjaGVkLm5vZGVzLmxlbmd0aCkgY2xlYXIoY2FjaGVkLm5vZGVzKTtcclxuXHRcdFx0XHRpZiAoY2FjaGVkLmNvbmZpZ0NvbnRleHQgJiYgdHlwZW9mIGNhY2hlZC5jb25maWdDb250ZXh0Lm9udW5sb2FkID09IEZVTkNUSU9OKSBjYWNoZWQuY29uZmlnQ29udGV4dC5vbnVubG9hZCgpXHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHR5cGUuY2FsbChkYXRhLnRhZykgIT0gU1RSSU5HKSByZXR1cm47XHJcblxyXG5cdFx0XHR2YXIgbm9kZSwgaXNOZXcgPSBjYWNoZWQubm9kZXMubGVuZ3RoID09PSAwO1xyXG5cdFx0XHRpZiAoZGF0YS5hdHRycy54bWxucykgbmFtZXNwYWNlID0gZGF0YS5hdHRycy54bWxucztcclxuXHRcdFx0ZWxzZSBpZiAoZGF0YS50YWcgPT09IFwic3ZnXCIpIG5hbWVzcGFjZSA9IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIjtcclxuXHRcdFx0ZWxzZSBpZiAoZGF0YS50YWcgPT09IFwibWF0aFwiKSBuYW1lc3BhY2UgPSBcImh0dHA6Ly93d3cudzMub3JnLzE5OTgvTWF0aC9NYXRoTUxcIjtcclxuXHRcdFx0aWYgKGlzTmV3KSB7XHJcblx0XHRcdFx0aWYgKGRhdGEuYXR0cnMuaXMpIG5vZGUgPSBuYW1lc3BhY2UgPT09IHVuZGVmaW5lZCA/ICRkb2N1bWVudC5jcmVhdGVFbGVtZW50KGRhdGEudGFnLCBkYXRhLmF0dHJzLmlzKSA6ICRkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlLCBkYXRhLnRhZywgZGF0YS5hdHRycy5pcyk7XHJcblx0XHRcdFx0ZWxzZSBub2RlID0gbmFtZXNwYWNlID09PSB1bmRlZmluZWQgPyAkZG9jdW1lbnQuY3JlYXRlRWxlbWVudChkYXRhLnRhZykgOiAkZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZSwgZGF0YS50YWcpO1xyXG5cdFx0XHRcdGNhY2hlZCA9IHtcclxuXHRcdFx0XHRcdHRhZzogZGF0YS50YWcsXHJcblx0XHRcdFx0XHQvL3NldCBhdHRyaWJ1dGVzIGZpcnN0LCB0aGVuIGNyZWF0ZSBjaGlsZHJlblxyXG5cdFx0XHRcdFx0YXR0cnM6IGRhdGFBdHRyS2V5cy5sZW5ndGggPyBzZXRBdHRyaWJ1dGVzKG5vZGUsIGRhdGEudGFnLCBkYXRhLmF0dHJzLCB7fSwgbmFtZXNwYWNlKSA6IHt9LFxyXG5cdFx0XHRcdFx0Y2hpbGRyZW46IGRhdGEuY2hpbGRyZW4gIT0gbnVsbCAmJiBkYXRhLmNoaWxkcmVuLmxlbmd0aCA+IDAgP1xyXG5cdFx0XHRcdFx0XHRidWlsZChub2RlLCBkYXRhLnRhZywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGRhdGEuY2hpbGRyZW4sIGNhY2hlZC5jaGlsZHJlbiwgdHJ1ZSwgMCwgZGF0YS5hdHRycy5jb250ZW50ZWRpdGFibGUgPyBub2RlIDogZWRpdGFibGUsIG5hbWVzcGFjZSwgY29uZmlncykgOlxyXG5cdFx0XHRcdFx0XHRkYXRhLmNoaWxkcmVuLFxyXG5cdFx0XHRcdFx0bm9kZXM6IFtub2RlXVxyXG5cdFx0XHRcdH07XHJcblx0XHRcdFx0aWYgKGNhY2hlZC5jaGlsZHJlbiAmJiAhY2FjaGVkLmNoaWxkcmVuLm5vZGVzKSBjYWNoZWQuY2hpbGRyZW4ubm9kZXMgPSBbXTtcclxuXHRcdFx0XHQvL2VkZ2UgY2FzZTogc2V0dGluZyB2YWx1ZSBvbiA8c2VsZWN0PiBkb2Vzbid0IHdvcmsgYmVmb3JlIGNoaWxkcmVuIGV4aXN0LCBzbyBzZXQgaXQgYWdhaW4gYWZ0ZXIgY2hpbGRyZW4gaGF2ZSBiZWVuIGNyZWF0ZWRcclxuXHRcdFx0XHRpZiAoZGF0YS50YWcgPT0gXCJzZWxlY3RcIiAmJiBkYXRhLmF0dHJzLnZhbHVlKSBzZXRBdHRyaWJ1dGVzKG5vZGUsIGRhdGEudGFnLCB7dmFsdWU6IGRhdGEuYXR0cnMudmFsdWV9LCB7fSwgbmFtZXNwYWNlKTtcclxuXHRcdFx0XHRwYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShub2RlLCBwYXJlbnRFbGVtZW50LmNoaWxkTm9kZXNbaW5kZXhdIHx8IG51bGwpXHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0bm9kZSA9IGNhY2hlZC5ub2Rlc1swXTtcclxuXHRcdFx0XHRpZiAoZGF0YUF0dHJLZXlzLmxlbmd0aCkgc2V0QXR0cmlidXRlcyhub2RlLCBkYXRhLnRhZywgZGF0YS5hdHRycywgY2FjaGVkLmF0dHJzLCBuYW1lc3BhY2UpO1xyXG5cdFx0XHRcdGNhY2hlZC5jaGlsZHJlbiA9IGJ1aWxkKG5vZGUsIGRhdGEudGFnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgZGF0YS5jaGlsZHJlbiwgY2FjaGVkLmNoaWxkcmVuLCBmYWxzZSwgMCwgZGF0YS5hdHRycy5jb250ZW50ZWRpdGFibGUgPyBub2RlIDogZWRpdGFibGUsIG5hbWVzcGFjZSwgY29uZmlncyk7XHJcblx0XHRcdFx0Y2FjaGVkLm5vZGVzLmludGFjdCA9IHRydWU7XHJcblx0XHRcdFx0aWYgKHNob3VsZFJlYXR0YWNoID09PSB0cnVlICYmIG5vZGUgIT0gbnVsbCkgcGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUobm9kZSwgcGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2luZGV4XSB8fCBudWxsKVxyXG5cdFx0XHR9XHJcblx0XHRcdC8vc2NoZWR1bGUgY29uZmlncyB0byBiZSBjYWxsZWQuIFRoZXkgYXJlIGNhbGxlZCBhZnRlciBgYnVpbGRgIGZpbmlzaGVzIHJ1bm5pbmdcclxuXHRcdFx0aWYgKHR5cGVvZiBkYXRhLmF0dHJzW1wiY29uZmlnXCJdID09IEZVTkNUSU9OKSB7XHJcblx0XHRcdFx0dmFyIGNvbnRleHQgPSBjYWNoZWQuY29uZmlnQ29udGV4dCA9IGNhY2hlZC5jb25maWdDb250ZXh0IHx8IHt9O1xyXG5cclxuXHRcdFx0XHQvLyBiaW5kXHJcblx0XHRcdFx0dmFyIGNhbGxiYWNrID0gZnVuY3Rpb24oZGF0YSwgYXJncykge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZGF0YS5hdHRyc1tcImNvbmZpZ1wiXS5hcHBseShkYXRhLCBhcmdzKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH07XHJcblx0XHRcdFx0Y29uZmlncy5wdXNoKGNhbGxiYWNrKGRhdGEsIFtub2RlLCAhaXNOZXcsIGNvbnRleHQsIGNhY2hlZF0pKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmICh0eXBlb2YgZGF0YVR5cGUgIT0gRlVOQ1RJT04pIHtcclxuXHRcdFx0Ly9oYW5kbGUgdGV4dCBub2Rlc1xyXG5cdFx0XHR2YXIgbm9kZXM7XHJcblx0XHRcdGlmIChjYWNoZWQubm9kZXMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdFx0aWYgKGRhdGEuJHRydXN0ZWQpIHtcclxuXHRcdFx0XHRcdG5vZGVzID0gaW5qZWN0SFRNTChwYXJlbnRFbGVtZW50LCBpbmRleCwgZGF0YSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRub2RlcyA9IFskZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZGF0YSldO1xyXG5cdFx0XHRcdFx0aWYgKCFwYXJlbnRFbGVtZW50Lm5vZGVOYW1lLm1hdGNoKHZvaWRFbGVtZW50cykpIHBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKG5vZGVzWzBdLCBwYXJlbnRFbGVtZW50LmNoaWxkTm9kZXNbaW5kZXhdIHx8IG51bGwpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNhY2hlZCA9IFwic3RyaW5nIG51bWJlciBib29sZWFuXCIuaW5kZXhPZih0eXBlb2YgZGF0YSkgPiAtMSA/IG5ldyBkYXRhLmNvbnN0cnVjdG9yKGRhdGEpIDogZGF0YTtcclxuXHRcdFx0XHRjYWNoZWQubm9kZXMgPSBub2Rlc1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKGNhY2hlZC52YWx1ZU9mKCkgIT09IGRhdGEudmFsdWVPZigpIHx8IHNob3VsZFJlYXR0YWNoID09PSB0cnVlKSB7XHJcblx0XHRcdFx0bm9kZXMgPSBjYWNoZWQubm9kZXM7XHJcblx0XHRcdFx0aWYgKCFlZGl0YWJsZSB8fCBlZGl0YWJsZSAhPT0gJGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpIHtcclxuXHRcdFx0XHRcdGlmIChkYXRhLiR0cnVzdGVkKSB7XHJcblx0XHRcdFx0XHRcdGNsZWFyKG5vZGVzLCBjYWNoZWQpO1xyXG5cdFx0XHRcdFx0XHRub2RlcyA9IGluamVjdEhUTUwocGFyZW50RWxlbWVudCwgaW5kZXgsIGRhdGEpXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0Ly9jb3JuZXIgY2FzZTogcmVwbGFjaW5nIHRoZSBub2RlVmFsdWUgb2YgYSB0ZXh0IG5vZGUgdGhhdCBpcyBhIGNoaWxkIG9mIGEgdGV4dGFyZWEvY29udGVudGVkaXRhYmxlIGRvZXNuJ3Qgd29ya1xyXG5cdFx0XHRcdFx0XHQvL3dlIG5lZWQgdG8gdXBkYXRlIHRoZSB2YWx1ZSBwcm9wZXJ0eSBvZiB0aGUgcGFyZW50IHRleHRhcmVhIG9yIHRoZSBpbm5lckhUTUwgb2YgdGhlIGNvbnRlbnRlZGl0YWJsZSBlbGVtZW50IGluc3RlYWRcclxuXHRcdFx0XHRcdFx0aWYgKHBhcmVudFRhZyA9PT0gXCJ0ZXh0YXJlYVwiKSBwYXJlbnRFbGVtZW50LnZhbHVlID0gZGF0YTtcclxuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoZWRpdGFibGUpIGVkaXRhYmxlLmlubmVySFRNTCA9IGRhdGE7XHJcblx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGlmIChub2Rlc1swXS5ub2RlVHlwZSA9PSAxIHx8IG5vZGVzLmxlbmd0aCA+IDEpIHsgLy93YXMgYSB0cnVzdGVkIHN0cmluZ1xyXG5cdFx0XHRcdFx0XHRcdFx0Y2xlYXIoY2FjaGVkLm5vZGVzLCBjYWNoZWQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0bm9kZXMgPSBbJGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGRhdGEpXVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRwYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShub2Rlc1swXSwgcGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2luZGV4XSB8fCBudWxsKTtcclxuXHRcdFx0XHRcdFx0XHRub2Rlc1swXS5ub2RlVmFsdWUgPSBkYXRhXHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y2FjaGVkID0gbmV3IGRhdGEuY29uc3RydWN0b3IoZGF0YSk7XHJcblx0XHRcdFx0Y2FjaGVkLm5vZGVzID0gbm9kZXNcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGNhY2hlZC5ub2Rlcy5pbnRhY3QgPSB0cnVlXHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGNhY2hlZFxyXG5cdH1cclxuXHRmdW5jdGlvbiBzZXRBdHRyaWJ1dGVzKG5vZGUsIHRhZywgZGF0YUF0dHJzLCBjYWNoZWRBdHRycywgbmFtZXNwYWNlKSB7XHJcblx0XHRmb3IgKHZhciBhdHRyTmFtZSBpbiBkYXRhQXR0cnMpIHtcclxuXHRcdFx0dmFyIGRhdGFBdHRyID0gZGF0YUF0dHJzW2F0dHJOYW1lXTtcclxuXHRcdFx0dmFyIGNhY2hlZEF0dHIgPSBjYWNoZWRBdHRyc1thdHRyTmFtZV07XHJcblx0XHRcdGlmICghKGF0dHJOYW1lIGluIGNhY2hlZEF0dHJzKSB8fCAoY2FjaGVkQXR0ciAhPT0gZGF0YUF0dHIpKSB7XHJcblx0XHRcdFx0Y2FjaGVkQXR0cnNbYXR0ck5hbWVdID0gZGF0YUF0dHI7XHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdC8vYGNvbmZpZ2AgaXNuJ3QgYSByZWFsIGF0dHJpYnV0ZXMsIHNvIGlnbm9yZSBpdFxyXG5cdFx0XHRcdFx0Ly93ZSBkb24ndCBpZ25vcmUgYGtleWAgYmVjYXVzZSBpdCBtdXN0IGJlIHVuaXF1ZSBhbmQgaGF2aW5nIGl0IG9uIHRoZSBET00gaGVscHMgZGVidWdnaW5nXHJcblx0XHRcdFx0XHRpZiAoYXR0ck5hbWUgPT09IFwiY29uZmlnXCIpIGNvbnRpbnVlO1xyXG5cdFx0XHRcdFx0Ly9ob29rIGV2ZW50IGhhbmRsZXJzIHRvIHRoZSBhdXRvLXJlZHJhd2luZyBzeXN0ZW1cclxuXHRcdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBkYXRhQXR0ciA9PSBGVU5DVElPTiAmJiBhdHRyTmFtZS5pbmRleE9mKFwib25cIikgPT0gMCkge1xyXG5cdFx0XHRcdFx0XHRub2RlW2F0dHJOYW1lXSA9IGF1dG9yZWRyYXcoZGF0YUF0dHIsIG5vZGUpXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvL2hhbmRsZSBgc3R5bGU6IHsuLi59YFxyXG5cdFx0XHRcdFx0ZWxzZSBpZiAoYXR0ck5hbWUgPT09IFwic3R5bGVcIiAmJiBkYXRhQXR0ciAhPSBudWxsICYmIHR5cGUuY2FsbChkYXRhQXR0cikgPT0gT0JKRUNUKSB7XHJcblx0XHRcdFx0XHRcdGZvciAodmFyIHJ1bGUgaW4gZGF0YUF0dHIpIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoY2FjaGVkQXR0ciA9PSBudWxsIHx8IGNhY2hlZEF0dHJbcnVsZV0gIT09IGRhdGFBdHRyW3J1bGVdKSBub2RlLnN0eWxlW3J1bGVdID0gZGF0YUF0dHJbcnVsZV1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRmb3IgKHZhciBydWxlIGluIGNhY2hlZEF0dHIpIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoIShydWxlIGluIGRhdGFBdHRyKSkgbm9kZS5zdHlsZVtydWxlXSA9IFwiXCJcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly9oYW5kbGUgU1ZHXHJcblx0XHRcdFx0XHRlbHNlIGlmIChuYW1lc3BhY2UgIT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0XHRpZiAoYXR0ck5hbWUgPT09IFwiaHJlZlwiKSBub2RlLnNldEF0dHJpYnV0ZU5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLCBcImhyZWZcIiwgZGF0YUF0dHIpO1xyXG5cdFx0XHRcdFx0XHRlbHNlIGlmIChhdHRyTmFtZSA9PT0gXCJjbGFzc05hbWVcIikgbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBkYXRhQXR0cik7XHJcblx0XHRcdFx0XHRcdGVsc2Ugbm9kZS5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIGRhdGFBdHRyKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly9oYW5kbGUgY2FzZXMgdGhhdCBhcmUgcHJvcGVydGllcyAoYnV0IGlnbm9yZSBjYXNlcyB3aGVyZSB3ZSBzaG91bGQgdXNlIHNldEF0dHJpYnV0ZSBpbnN0ZWFkKVxyXG5cdFx0XHRcdFx0Ly8tIGxpc3QgYW5kIGZvcm0gYXJlIHR5cGljYWxseSB1c2VkIGFzIHN0cmluZ3MsIGJ1dCBhcmUgRE9NIGVsZW1lbnQgcmVmZXJlbmNlcyBpbiBqc1xyXG5cdFx0XHRcdFx0Ly8tIHdoZW4gdXNpbmcgQ1NTIHNlbGVjdG9ycyAoZS5nLiBgbShcIltzdHlsZT0nJ11cIilgKSwgc3R5bGUgaXMgdXNlZCBhcyBhIHN0cmluZywgYnV0IGl0J3MgYW4gb2JqZWN0IGluIGpzXHJcblx0XHRcdFx0XHRlbHNlIGlmIChhdHRyTmFtZSBpbiBub2RlICYmICEoYXR0ck5hbWUgPT0gXCJsaXN0XCIgfHwgYXR0ck5hbWUgPT0gXCJzdHlsZVwiIHx8IGF0dHJOYW1lID09IFwiZm9ybVwiKSkge1xyXG5cdFx0XHRcdFx0XHQvLyMzNDggZG9uJ3Qgc2V0IHRoZSB2YWx1ZSBpZiBub3QgbmVlZGVkIG90aGVyd2lzZSBjdXJzb3IgcGxhY2VtZW50IGJyZWFrcyBpbiBDaHJvbWVcclxuXHRcdFx0XHRcdFx0aWYgKG5vZGVbYXR0ck5hbWVdICE9IGRhdGFBdHRyKSBub2RlW2F0dHJOYW1lXSA9IGRhdGFBdHRyXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIG5vZGUuc2V0QXR0cmlidXRlKGF0dHJOYW1lLCBkYXRhQXR0cilcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y2F0Y2ggKGUpIHtcclxuXHRcdFx0XHRcdC8vc3dhbGxvdyBJRSdzIGludmFsaWQgYXJndW1lbnQgZXJyb3JzIHRvIG1pbWljIEhUTUwncyBmYWxsYmFjay10by1kb2luZy1ub3RoaW5nLW9uLWludmFsaWQtYXR0cmlidXRlcyBiZWhhdmlvclxyXG5cdFx0XHRcdFx0aWYgKGUubWVzc2FnZS5pbmRleE9mKFwiSW52YWxpZCBhcmd1bWVudFwiKSA8IDApIHRocm93IGVcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8jMzQ4IGRhdGFBdHRyIG1heSBub3QgYmUgYSBzdHJpbmcsIHNvIHVzZSBsb29zZSBjb21wYXJpc29uIChkb3VibGUgZXF1YWwpIGluc3RlYWQgb2Ygc3RyaWN0ICh0cmlwbGUgZXF1YWwpXHJcblx0XHRcdGVsc2UgaWYgKGF0dHJOYW1lID09PSBcInZhbHVlXCIgJiYgdGFnID09PSBcImlucHV0XCIgJiYgbm9kZS52YWx1ZSAhPSBkYXRhQXR0cikge1xyXG5cdFx0XHRcdG5vZGUudmFsdWUgPSBkYXRhQXR0clxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gY2FjaGVkQXR0cnNcclxuXHR9XHJcblx0ZnVuY3Rpb24gY2xlYXIobm9kZXMsIGNhY2hlZCkge1xyXG5cdFx0Zm9yICh2YXIgaSA9IG5vZGVzLmxlbmd0aCAtIDE7IGkgPiAtMTsgaS0tKSB7XHJcblx0XHRcdGlmIChub2Rlc1tpXSAmJiBub2Rlc1tpXS5wYXJlbnROb2RlKSB7XHJcblx0XHRcdFx0dHJ5IHtub2Rlc1tpXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGVzW2ldKX1cclxuXHRcdFx0XHRjYXRjaCAoZSkge30gLy9pZ25vcmUgaWYgdGhpcyBmYWlscyBkdWUgdG8gb3JkZXIgb2YgZXZlbnRzIChzZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yMTkyNjA4My9mYWlsZWQtdG8tZXhlY3V0ZS1yZW1vdmVjaGlsZC1vbi1ub2RlKVxyXG5cdFx0XHRcdGNhY2hlZCA9IFtdLmNvbmNhdChjYWNoZWQpO1xyXG5cdFx0XHRcdGlmIChjYWNoZWRbaV0pIHVubG9hZChjYWNoZWRbaV0pXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGlmIChub2Rlcy5sZW5ndGggIT0gMCkgbm9kZXMubGVuZ3RoID0gMFxyXG5cdH1cclxuXHRmdW5jdGlvbiB1bmxvYWQoY2FjaGVkKSB7XHJcblx0XHRpZiAoY2FjaGVkLmNvbmZpZ0NvbnRleHQgJiYgdHlwZW9mIGNhY2hlZC5jb25maWdDb250ZXh0Lm9udW5sb2FkID09IEZVTkNUSU9OKSBjYWNoZWQuY29uZmlnQ29udGV4dC5vbnVubG9hZCgpO1xyXG5cdFx0aWYgKGNhY2hlZC5jaGlsZHJlbikge1xyXG5cdFx0XHRpZiAodHlwZS5jYWxsKGNhY2hlZC5jaGlsZHJlbikgPT0gQVJSQVkpIHtcclxuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGNhY2hlZC5jaGlsZHJlbi5sZW5ndGg7IGkrKykgdW5sb2FkKGNhY2hlZC5jaGlsZHJlbltpXSlcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmIChjYWNoZWQuY2hpbGRyZW4udGFnKSB1bmxvYWQoY2FjaGVkLmNoaWxkcmVuKVxyXG5cdFx0fVxyXG5cdH1cclxuXHRmdW5jdGlvbiBpbmplY3RIVE1MKHBhcmVudEVsZW1lbnQsIGluZGV4LCBkYXRhKSB7XHJcblx0XHR2YXIgbmV4dFNpYmxpbmcgPSBwYXJlbnRFbGVtZW50LmNoaWxkTm9kZXNbaW5kZXhdO1xyXG5cdFx0aWYgKG5leHRTaWJsaW5nKSB7XHJcblx0XHRcdHZhciBpc0VsZW1lbnQgPSBuZXh0U2libGluZy5ub2RlVHlwZSAhPSAxO1xyXG5cdFx0XHR2YXIgcGxhY2Vob2xkZXIgPSAkZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcblx0XHRcdGlmIChpc0VsZW1lbnQpIHtcclxuXHRcdFx0XHRwYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShwbGFjZWhvbGRlciwgbmV4dFNpYmxpbmcgfHwgbnVsbCk7XHJcblx0XHRcdFx0cGxhY2Vob2xkZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlYmVnaW5cIiwgZGF0YSk7XHJcblx0XHRcdFx0cGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChwbGFjZWhvbGRlcilcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIG5leHRTaWJsaW5nLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWJlZ2luXCIsIGRhdGEpXHJcblx0XHR9XHJcblx0XHRlbHNlIHBhcmVudEVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIGRhdGEpO1xyXG5cdFx0dmFyIG5vZGVzID0gW107XHJcblx0XHR3aGlsZSAocGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2luZGV4XSAhPT0gbmV4dFNpYmxpbmcpIHtcclxuXHRcdFx0bm9kZXMucHVzaChwYXJlbnRFbGVtZW50LmNoaWxkTm9kZXNbaW5kZXhdKTtcclxuXHRcdFx0aW5kZXgrK1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG5vZGVzXHJcblx0fVxyXG5cdGZ1bmN0aW9uIGF1dG9yZWRyYXcoY2FsbGJhY2ssIG9iamVjdCkge1xyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0ZSA9IGUgfHwgZXZlbnQ7XHJcblx0XHRcdG0ucmVkcmF3LnN0cmF0ZWd5KFwiZGlmZlwiKTtcclxuXHRcdFx0bS5zdGFydENvbXB1dGF0aW9uKCk7XHJcblx0XHRcdHRyeSB7cmV0dXJuIGNhbGxiYWNrLmNhbGwob2JqZWN0LCBlKX1cclxuXHRcdFx0ZmluYWxseSB7XHJcblx0XHRcdFx0bS5lbmRDb21wdXRhdGlvbigpXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHZhciBodG1sO1xyXG5cdHZhciBkb2N1bWVudE5vZGUgPSB7XHJcblx0XHRhcHBlbmRDaGlsZDogZnVuY3Rpb24obm9kZSkge1xyXG5cdFx0XHRpZiAoaHRtbCA9PT0gdW5kZWZpbmVkKSBodG1sID0gJGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodG1sXCIpO1xyXG5cdFx0XHRpZiAoJGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiAkZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICE9PSBub2RlKSB7XHJcblx0XHRcdFx0JGRvY3VtZW50LnJlcGxhY2VDaGlsZChub2RlLCAkZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgJGRvY3VtZW50LmFwcGVuZENoaWxkKG5vZGUpO1xyXG5cdFx0XHR0aGlzLmNoaWxkTm9kZXMgPSAkZG9jdW1lbnQuY2hpbGROb2Rlc1xyXG5cdFx0fSxcclxuXHRcdGluc2VydEJlZm9yZTogZnVuY3Rpb24obm9kZSkge1xyXG5cdFx0XHR0aGlzLmFwcGVuZENoaWxkKG5vZGUpXHJcblx0XHR9LFxyXG5cdFx0Y2hpbGROb2RlczogW11cclxuXHR9O1xyXG5cdHZhciBub2RlQ2FjaGUgPSBbXSwgY2VsbENhY2hlID0ge307XHJcblx0bS5yZW5kZXIgPSBmdW5jdGlvbihyb290LCBjZWxsLCBmb3JjZVJlY3JlYXRpb24pIHtcclxuXHRcdHZhciBjb25maWdzID0gW107XHJcblx0XHRpZiAoIXJvb3QpIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBlbnN1cmUgdGhlIERPTSBlbGVtZW50IGV4aXN0cyBiZWZvcmUgcmVuZGVyaW5nIGEgdGVtcGxhdGUgaW50byBpdC5cIik7XHJcblx0XHR2YXIgaWQgPSBnZXRDZWxsQ2FjaGVLZXkocm9vdCk7XHJcblx0XHR2YXIgaXNEb2N1bWVudFJvb3QgPSByb290ID09ICRkb2N1bWVudDtcclxuXHRcdHZhciBub2RlID0gaXNEb2N1bWVudFJvb3QgfHwgcm9vdCA9PSAkZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ID8gZG9jdW1lbnROb2RlIDogcm9vdDtcclxuXHRcdGlmIChpc0RvY3VtZW50Um9vdCAmJiBjZWxsLnRhZyAhPSBcImh0bWxcIikgY2VsbCA9IHt0YWc6IFwiaHRtbFwiLCBhdHRyczoge30sIGNoaWxkcmVuOiBjZWxsfTtcclxuXHRcdGlmIChjZWxsQ2FjaGVbaWRdID09PSB1bmRlZmluZWQpIGNsZWFyKG5vZGUuY2hpbGROb2Rlcyk7XHJcblx0XHRpZiAoZm9yY2VSZWNyZWF0aW9uID09PSB0cnVlKSByZXNldChyb290KTtcclxuXHRcdGNlbGxDYWNoZVtpZF0gPSBidWlsZChub2RlLCBudWxsLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY2VsbCwgY2VsbENhY2hlW2lkXSwgZmFsc2UsIDAsIG51bGwsIHVuZGVmaW5lZCwgY29uZmlncyk7XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGNvbmZpZ3MubGVuZ3RoOyBpKyspIGNvbmZpZ3NbaV0oKVxyXG5cdH07XHJcblx0ZnVuY3Rpb24gZ2V0Q2VsbENhY2hlS2V5KGVsZW1lbnQpIHtcclxuXHRcdHZhciBpbmRleCA9IG5vZGVDYWNoZS5pbmRleE9mKGVsZW1lbnQpO1xyXG5cdFx0cmV0dXJuIGluZGV4IDwgMCA/IG5vZGVDYWNoZS5wdXNoKGVsZW1lbnQpIC0gMSA6IGluZGV4XHJcblx0fVxyXG5cclxuXHRtLnRydXN0ID0gZnVuY3Rpb24odmFsdWUpIHtcclxuXHRcdHZhbHVlID0gbmV3IFN0cmluZyh2YWx1ZSk7XHJcblx0XHR2YWx1ZS4kdHJ1c3RlZCA9IHRydWU7XHJcblx0XHRyZXR1cm4gdmFsdWVcclxuXHR9O1xyXG5cclxuXHRmdW5jdGlvbiBnZXR0ZXJzZXR0ZXIoc3RvcmUpIHtcclxuXHRcdHZhciBwcm9wID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmIChhcmd1bWVudHMubGVuZ3RoKSBzdG9yZSA9IGFyZ3VtZW50c1swXTtcclxuXHRcdFx0cmV0dXJuIHN0b3JlXHJcblx0XHR9O1xyXG5cclxuXHRcdHByb3AudG9KU09OID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiBzdG9yZVxyXG5cdFx0fTtcclxuXHJcblx0XHRyZXR1cm4gcHJvcFxyXG5cdH1cclxuXHJcblx0bS5wcm9wID0gZnVuY3Rpb24gKHN0b3JlKSB7XHJcblx0XHQvL25vdGU6IHVzaW5nIG5vbi1zdHJpY3QgZXF1YWxpdHkgY2hlY2sgaGVyZSBiZWNhdXNlIHdlJ3JlIGNoZWNraW5nIGlmIHN0b3JlIGlzIG51bGwgT1IgdW5kZWZpbmVkXHJcblx0XHRpZiAoKChzdG9yZSAhPSBudWxsICYmIHR5cGUuY2FsbChzdG9yZSkgPT0gT0JKRUNUKSB8fCB0eXBlb2Ygc3RvcmUgPT0gRlVOQ1RJT04pICYmIHR5cGVvZiBzdG9yZS50aGVuID09IEZVTkNUSU9OKSB7XHJcblx0XHRcdHJldHVybiBwcm9waWZ5KHN0b3JlKVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBnZXR0ZXJzZXR0ZXIoc3RvcmUpXHJcblx0fTtcclxuXHJcblx0dmFyIHJvb3RzID0gW10sIG1vZHVsZXMgPSBbXSwgY29udHJvbGxlcnMgPSBbXSwgbGFzdFJlZHJhd0lkID0gbnVsbCwgbGFzdFJlZHJhd0NhbGxUaW1lID0gMCwgY29tcHV0ZVBvc3RSZWRyYXdIb29rID0gbnVsbCwgcHJldmVudGVkID0gZmFsc2UsIHRvcE1vZHVsZTtcclxuXHR2YXIgRlJBTUVfQlVER0VUID0gMTY7IC8vNjAgZnJhbWVzIHBlciBzZWNvbmQgPSAxIGNhbGwgcGVyIDE2IG1zXHJcblx0bS5tb2R1bGUgPSBmdW5jdGlvbihyb290LCBtb2R1bGUpIHtcclxuXHRcdHZhciBpbmRleCA9IHJvb3RzLmluZGV4T2Yocm9vdCk7XHJcblx0XHRpZiAoaW5kZXggPCAwKSBpbmRleCA9IHJvb3RzLmxlbmd0aDtcclxuXHRcdHZhciBpc1ByZXZlbnRlZCA9IGZhbHNlO1xyXG5cdFx0aWYgKGNvbnRyb2xsZXJzW2luZGV4XSAmJiB0eXBlb2YgY29udHJvbGxlcnNbaW5kZXhdLm9udW5sb2FkID09IEZVTkNUSU9OKSB7XHJcblx0XHRcdHZhciBldmVudCA9IHtcclxuXHRcdFx0XHRwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24oKSB7aXNQcmV2ZW50ZWQgPSB0cnVlfVxyXG5cdFx0XHR9O1xyXG5cdFx0XHRjb250cm9sbGVyc1tpbmRleF0ub251bmxvYWQoZXZlbnQpXHJcblx0XHR9XHJcblx0XHRpZiAoIWlzUHJldmVudGVkKSB7XHJcblx0XHRcdG0ucmVkcmF3LnN0cmF0ZWd5KFwiYWxsXCIpO1xyXG5cdFx0XHRtLnN0YXJ0Q29tcHV0YXRpb24oKTtcclxuXHRcdFx0cm9vdHNbaW5kZXhdID0gcm9vdDtcclxuXHRcdFx0dmFyIGN1cnJlbnRNb2R1bGUgPSB0b3BNb2R1bGUgPSBtb2R1bGU7XHJcblx0XHRcdHZhciBjb250cm9sbGVyID0gbmV3IG1vZHVsZS5jb250cm9sbGVyO1xyXG5cdFx0XHQvL2NvbnRyb2xsZXJzIG1heSBjYWxsIG0ubW9kdWxlIHJlY3Vyc2l2ZWx5ICh2aWEgbS5yb3V0ZSByZWRpcmVjdHMsIGZvciBleGFtcGxlKVxyXG5cdFx0XHQvL3RoaXMgY29uZGl0aW9uYWwgZW5zdXJlcyBvbmx5IHRoZSBsYXN0IHJlY3Vyc2l2ZSBtLm1vZHVsZSBjYWxsIGlzIGFwcGxpZWRcclxuXHRcdFx0aWYgKGN1cnJlbnRNb2R1bGUgPT0gdG9wTW9kdWxlKSB7XHJcblx0XHRcdFx0Y29udHJvbGxlcnNbaW5kZXhdID0gY29udHJvbGxlcjtcclxuXHRcdFx0XHRtb2R1bGVzW2luZGV4XSA9IG1vZHVsZVxyXG5cdFx0XHR9XHJcblx0XHRcdG0uZW5kQ29tcHV0YXRpb24oKTtcclxuXHRcdFx0cmV0dXJuIGNvbnRyb2xsZXJzW2luZGV4XVxyXG5cdFx0fVxyXG5cdH07XHJcblx0bS5yZWRyYXcgPSBmdW5jdGlvbihmb3JjZSkge1xyXG5cdFx0Ly9sYXN0UmVkcmF3SWQgaXMgYSBwb3NpdGl2ZSBudW1iZXIgaWYgYSBzZWNvbmQgcmVkcmF3IGlzIHJlcXVlc3RlZCBiZWZvcmUgdGhlIG5leHQgYW5pbWF0aW9uIGZyYW1lXHJcblx0XHQvL2xhc3RSZWRyYXdJRCBpcyBudWxsIGlmIGl0J3MgdGhlIGZpcnN0IHJlZHJhdyBhbmQgbm90IGFuIGV2ZW50IGhhbmRsZXJcclxuXHRcdGlmIChsYXN0UmVkcmF3SWQgJiYgZm9yY2UgIT09IHRydWUpIHtcclxuXHRcdFx0Ly93aGVuIHNldFRpbWVvdXQ6IG9ubHkgcmVzY2hlZHVsZSByZWRyYXcgaWYgdGltZSBiZXR3ZWVuIG5vdyBhbmQgcHJldmlvdXMgcmVkcmF3IGlzIGJpZ2dlciB0aGFuIGEgZnJhbWUsIG90aGVyd2lzZSBrZWVwIGN1cnJlbnRseSBzY2hlZHVsZWQgdGltZW91dFxyXG5cdFx0XHQvL3doZW4gckFGOiBhbHdheXMgcmVzY2hlZHVsZSByZWRyYXdcclxuXHRcdFx0aWYgKG5ldyBEYXRlIC0gbGFzdFJlZHJhd0NhbGxUaW1lID4gRlJBTUVfQlVER0VUIHx8ICRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPT0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSkge1xyXG5cdFx0XHRcdGlmIChsYXN0UmVkcmF3SWQgPiAwKSAkY2FuY2VsQW5pbWF0aW9uRnJhbWUobGFzdFJlZHJhd0lkKTtcclxuXHRcdFx0XHRsYXN0UmVkcmF3SWQgPSAkcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlZHJhdywgRlJBTUVfQlVER0VUKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0cmVkcmF3KCk7XHJcblx0XHRcdGxhc3RSZWRyYXdJZCA9ICRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKSB7bGFzdFJlZHJhd0lkID0gbnVsbH0sIEZSQU1FX0JVREdFVClcclxuXHRcdH1cclxuXHR9O1xyXG5cdG0ucmVkcmF3LnN0cmF0ZWd5ID0gbS5wcm9wKCk7XHJcblx0ZnVuY3Rpb24gcmVkcmF3KCkge1xyXG5cdFx0dmFyIG1vZGUgPSBtLnJlZHJhdy5zdHJhdGVneSgpO1xyXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCByb290cy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRpZiAoY29udHJvbGxlcnNbaV0gJiYgbW9kZSAhPSBcIm5vbmVcIikge1xyXG5cdFx0XHRcdG0ucmVuZGVyKHJvb3RzW2ldLCBtb2R1bGVzW2ldLnZpZXcoY29udHJvbGxlcnNbaV0pLCBtb2RlID09IFwiYWxsXCIpXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdC8vYWZ0ZXIgcmVuZGVyaW5nIHdpdGhpbiBhIHJvdXRlZCBjb250ZXh0LCB3ZSBuZWVkIHRvIHNjcm9sbCBiYWNrIHRvIHRoZSB0b3AsIGFuZCBmZXRjaCB0aGUgZG9jdW1lbnQgdGl0bGUgZm9yIGhpc3RvcnkucHVzaFN0YXRlXHJcblx0XHRpZiAoY29tcHV0ZVBvc3RSZWRyYXdIb29rKSB7XHJcblx0XHRcdGNvbXB1dGVQb3N0UmVkcmF3SG9vaygpO1xyXG5cdFx0XHRjb21wdXRlUG9zdFJlZHJhd0hvb2sgPSBudWxsXHJcblx0XHR9XHJcblx0XHRsYXN0UmVkcmF3SWQgPSBudWxsO1xyXG5cdFx0bGFzdFJlZHJhd0NhbGxUaW1lID0gbmV3IERhdGU7XHJcblx0XHRtLnJlZHJhdy5zdHJhdGVneShcImRpZmZcIilcclxuXHR9XHJcblxyXG5cdHZhciBwZW5kaW5nUmVxdWVzdHMgPSAwO1xyXG5cdG0uc3RhcnRDb21wdXRhdGlvbiA9IGZ1bmN0aW9uKCkge3BlbmRpbmdSZXF1ZXN0cysrfTtcclxuXHRtLmVuZENvbXB1dGF0aW9uID0gZnVuY3Rpb24oKSB7XHJcblx0XHRwZW5kaW5nUmVxdWVzdHMgPSBNYXRoLm1heChwZW5kaW5nUmVxdWVzdHMgLSAxLCAwKTtcclxuXHRcdGlmIChwZW5kaW5nUmVxdWVzdHMgPT0gMCkgbS5yZWRyYXcoKVxyXG5cdH07XHJcblxyXG5cdG0ud2l0aEF0dHIgPSBmdW5jdGlvbihwcm9wLCB3aXRoQXR0ckNhbGxiYWNrKSB7XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRlID0gZSB8fCBldmVudDtcclxuXHRcdFx0dmFyIGN1cnJlbnRUYXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQgfHwgdGhpcztcclxuXHRcdFx0d2l0aEF0dHJDYWxsYmFjayhwcm9wIGluIGN1cnJlbnRUYXJnZXQgPyBjdXJyZW50VGFyZ2V0W3Byb3BdIDogY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUocHJvcCkpXHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly9yb3V0aW5nXHJcblx0dmFyIG1vZGVzID0ge3BhdGhuYW1lOiBcIlwiLCBoYXNoOiBcIiNcIiwgc2VhcmNoOiBcIj9cIn07XHJcblx0dmFyIHJlZGlyZWN0ID0gZnVuY3Rpb24oKSB7fSwgcm91dGVQYXJhbXMgPSB7fSwgY3VycmVudFJvdXRlO1xyXG5cdG0ucm91dGUgPSBmdW5jdGlvbigpIHtcclxuXHRcdC8vbS5yb3V0ZSgpXHJcblx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGN1cnJlbnRSb3V0ZTtcclxuXHRcdGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDMgJiYgdHlwZS5jYWxsKGFyZ3VtZW50c1sxXSkgPT0gU1RSSU5HKSB7XHJcblx0XHRcdHZhciByb290ID0gYXJndW1lbnRzWzBdLCBkZWZhdWx0Um91dGUgPSBhcmd1bWVudHNbMV0sIHJvdXRlciA9IGFyZ3VtZW50c1syXTtcclxuXHRcdFx0cmVkaXJlY3QgPSBmdW5jdGlvbihzb3VyY2UpIHtcclxuXHRcdFx0XHR2YXIgcGF0aCA9IGN1cnJlbnRSb3V0ZSA9IG5vcm1hbGl6ZVJvdXRlKHNvdXJjZSk7XHJcblx0XHRcdFx0aWYgKCFyb3V0ZUJ5VmFsdWUocm9vdCwgcm91dGVyLCBwYXRoKSkge1xyXG5cdFx0XHRcdFx0bS5yb3V0ZShkZWZhdWx0Um91dGUsIHRydWUpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cdFx0XHR2YXIgbGlzdGVuZXIgPSBtLnJvdXRlLm1vZGUgPT0gXCJoYXNoXCIgPyBcIm9uaGFzaGNoYW5nZVwiIDogXCJvbnBvcHN0YXRlXCI7XHJcblx0XHRcdHdpbmRvd1tsaXN0ZW5lcl0gPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRpZiAoY3VycmVudFJvdXRlICE9IG5vcm1hbGl6ZVJvdXRlKCRsb2NhdGlvblttLnJvdXRlLm1vZGVdKSkge1xyXG5cdFx0XHRcdFx0cmVkaXJlY3QoJGxvY2F0aW9uW20ucm91dGUubW9kZV0pXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cdFx0XHRjb21wdXRlUG9zdFJlZHJhd0hvb2sgPSBzZXRTY3JvbGw7XHJcblx0XHRcdHdpbmRvd1tsaXN0ZW5lcl0oKVxyXG5cdFx0fVxyXG5cdFx0Ly9jb25maWc6IG0ucm91dGVcclxuXHRcdGVsc2UgaWYgKGFyZ3VtZW50c1swXS5hZGRFdmVudExpc3RlbmVyKSB7XHJcblx0XHRcdHZhciBlbGVtZW50ID0gYXJndW1lbnRzWzBdO1xyXG5cdFx0XHR2YXIgaXNJbml0aWFsaXplZCA9IGFyZ3VtZW50c1sxXTtcclxuXHRcdFx0dmFyIGNvbnRleHQgPSBhcmd1bWVudHNbMl07XHJcblx0XHRcdGVsZW1lbnQuaHJlZiA9IChtLnJvdXRlLm1vZGUgIT09ICdwYXRobmFtZScgPyAkbG9jYXRpb24ucGF0aG5hbWUgOiAnJykgKyBtb2Rlc1ttLnJvdXRlLm1vZGVdICsgdGhpcy5hdHRycy5ocmVmO1xyXG5cdFx0XHRlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByb3V0ZVVub2J0cnVzaXZlKTtcclxuXHRcdFx0ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcm91dGVVbm9idHJ1c2l2ZSlcclxuXHRcdH1cclxuXHRcdC8vbS5yb3V0ZShyb3V0ZSwgcGFyYW1zKVxyXG5cdFx0ZWxzZSBpZiAodHlwZS5jYWxsKGFyZ3VtZW50c1swXSkgPT0gU1RSSU5HKSB7XHJcblx0XHRcdGN1cnJlbnRSb3V0ZSA9IGFyZ3VtZW50c1swXTtcclxuXHRcdFx0dmFyIGFyZ3MgPSBhcmd1bWVudHNbMV0gfHwge31cclxuXHRcdFx0dmFyIHF1ZXJ5SW5kZXggPSBjdXJyZW50Um91dGUuaW5kZXhPZihcIj9cIilcclxuXHRcdFx0dmFyIHBhcmFtcyA9IHF1ZXJ5SW5kZXggPiAtMSA/IHBhcnNlUXVlcnlTdHJpbmcoY3VycmVudFJvdXRlLnNsaWNlKHF1ZXJ5SW5kZXggKyAxKSkgOiB7fVxyXG5cdFx0XHRmb3IgKHZhciBpIGluIGFyZ3MpIHBhcmFtc1tpXSA9IGFyZ3NbaV1cclxuXHRcdFx0dmFyIHF1ZXJ5c3RyaW5nID0gYnVpbGRRdWVyeVN0cmluZyhwYXJhbXMpXHJcblx0XHRcdHZhciBjdXJyZW50UGF0aCA9IHF1ZXJ5SW5kZXggPiAtMSA/IGN1cnJlbnRSb3V0ZS5zbGljZSgwLCBxdWVyeUluZGV4KSA6IGN1cnJlbnRSb3V0ZVxyXG5cdFx0XHRpZiAocXVlcnlzdHJpbmcpIGN1cnJlbnRSb3V0ZSA9IGN1cnJlbnRQYXRoICsgKGN1cnJlbnRQYXRoLmluZGV4T2YoXCI/XCIpID09PSAtMSA/IFwiP1wiIDogXCImXCIpICsgcXVlcnlzdHJpbmc7XHJcblxyXG5cdFx0XHR2YXIgc2hvdWxkUmVwbGFjZUhpc3RvcnlFbnRyeSA9IChhcmd1bWVudHMubGVuZ3RoID09IDMgPyBhcmd1bWVudHNbMl0gOiBhcmd1bWVudHNbMV0pID09PSB0cnVlO1xyXG5cclxuXHRcdFx0aWYgKHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSkge1xyXG5cdFx0XHRcdGNvbXB1dGVQb3N0UmVkcmF3SG9vayA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0d2luZG93Lmhpc3Rvcnlbc2hvdWxkUmVwbGFjZUhpc3RvcnlFbnRyeSA/IFwicmVwbGFjZVN0YXRlXCIgOiBcInB1c2hTdGF0ZVwiXShudWxsLCAkZG9jdW1lbnQudGl0bGUsIG1vZGVzW20ucm91dGUubW9kZV0gKyBjdXJyZW50Um91dGUpO1xyXG5cdFx0XHRcdFx0c2V0U2Nyb2xsKClcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRcdHJlZGlyZWN0KG1vZGVzW20ucm91dGUubW9kZV0gKyBjdXJyZW50Um91dGUpXHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSAkbG9jYXRpb25bbS5yb3V0ZS5tb2RlXSA9IGN1cnJlbnRSb3V0ZVxyXG5cdFx0fVxyXG5cdH07XHJcblx0bS5yb3V0ZS5wYXJhbSA9IGZ1bmN0aW9uKGtleSkge3JldHVybiByb3V0ZVBhcmFtc1trZXldfTtcclxuXHRtLnJvdXRlLm1vZGUgPSBcInNlYXJjaFwiO1xyXG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZVJvdXRlKHJvdXRlKSB7cmV0dXJuIHJvdXRlLnNsaWNlKG1vZGVzW20ucm91dGUubW9kZV0ubGVuZ3RoKX1cclxuXHRmdW5jdGlvbiByb3V0ZUJ5VmFsdWUocm9vdCwgcm91dGVyLCBwYXRoKSB7XHJcblx0XHRyb3V0ZVBhcmFtcyA9IHt9O1xyXG5cclxuXHRcdHZhciBxdWVyeVN0YXJ0ID0gcGF0aC5pbmRleE9mKFwiP1wiKTtcclxuXHRcdGlmIChxdWVyeVN0YXJ0ICE9PSAtMSkge1xyXG5cdFx0XHRyb3V0ZVBhcmFtcyA9IHBhcnNlUXVlcnlTdHJpbmcocGF0aC5zdWJzdHIocXVlcnlTdGFydCArIDEsIHBhdGgubGVuZ3RoKSk7XHJcblx0XHRcdHBhdGggPSBwYXRoLnN1YnN0cigwLCBxdWVyeVN0YXJ0KVxyXG5cdFx0fVxyXG5cclxuXHRcdGZvciAodmFyIHJvdXRlIGluIHJvdXRlcikge1xyXG5cdFx0XHRpZiAocm91dGUgPT0gcGF0aCkge1xyXG5cdFx0XHRcdG0ubW9kdWxlKHJvb3QsIHJvdXRlcltyb3V0ZV0pO1xyXG5cdFx0XHRcdHJldHVybiB0cnVlXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBtYXRjaGVyID0gbmV3IFJlZ0V4cChcIl5cIiArIHJvdXRlLnJlcGxhY2UoLzpbXlxcL10rP1xcLnszfS9nLCBcIiguKj8pXCIpLnJlcGxhY2UoLzpbXlxcL10rL2csIFwiKFteXFxcXC9dKylcIikgKyBcIlxcLz8kXCIpO1xyXG5cclxuXHRcdFx0aWYgKG1hdGNoZXIudGVzdChwYXRoKSkge1xyXG5cdFx0XHRcdHBhdGgucmVwbGFjZShtYXRjaGVyLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHZhciBrZXlzID0gcm91dGUubWF0Y2goLzpbXlxcL10rL2cpIHx8IFtdO1xyXG5cdFx0XHRcdFx0dmFyIHZhbHVlcyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxLCAtMik7XHJcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHJvdXRlUGFyYW1zW2tleXNbaV0ucmVwbGFjZSgvOnxcXC4vZywgXCJcIildID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlc1tpXSlcclxuXHRcdFx0XHRcdG0ubW9kdWxlKHJvb3QsIHJvdXRlcltyb3V0ZV0pXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0cmV0dXJuIHRydWVcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRmdW5jdGlvbiByb3V0ZVVub2J0cnVzaXZlKGUpIHtcclxuXHRcdGUgPSBlIHx8IGV2ZW50O1xyXG5cdFx0aWYgKGUuY3RybEtleSB8fCBlLm1ldGFLZXkgfHwgZS53aGljaCA9PSAyKSByZXR1cm47XHJcblx0XHRpZiAoZS5wcmV2ZW50RGVmYXVsdCkgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0ZWxzZSBlLnJldHVyblZhbHVlID0gZmFsc2U7XHJcblx0XHR2YXIgY3VycmVudFRhcmdldCA9IGUuY3VycmVudFRhcmdldCB8fCB0aGlzO1xyXG5cdFx0dmFyIGFyZ3MgPSBtLnJvdXRlLm1vZGUgPT0gXCJwYXRobmFtZVwiICYmIGN1cnJlbnRUYXJnZXQuc2VhcmNoID8gcGFyc2VRdWVyeVN0cmluZyhjdXJyZW50VGFyZ2V0LnNlYXJjaC5zbGljZSgxKSkgOiB7fTtcclxuXHRcdG0ucm91dGUoY3VycmVudFRhcmdldFttLnJvdXRlLm1vZGVdLnNsaWNlKG1vZGVzW20ucm91dGUubW9kZV0ubGVuZ3RoKSwgYXJncylcclxuXHR9XHJcblx0ZnVuY3Rpb24gc2V0U2Nyb2xsKCkge1xyXG5cdFx0aWYgKG0ucm91dGUubW9kZSAhPSBcImhhc2hcIiAmJiAkbG9jYXRpb24uaGFzaCkgJGxvY2F0aW9uLmhhc2ggPSAkbG9jYXRpb24uaGFzaDtcclxuXHRcdGVsc2Ugd2luZG93LnNjcm9sbFRvKDAsIDApXHJcblx0fVxyXG5cdGZ1bmN0aW9uIGJ1aWxkUXVlcnlTdHJpbmcob2JqZWN0LCBwcmVmaXgpIHtcclxuXHRcdHZhciBzdHIgPSBbXTtcclxuXHRcdGZvcih2YXIgcHJvcCBpbiBvYmplY3QpIHtcclxuXHRcdFx0dmFyIGtleSA9IHByZWZpeCA/IHByZWZpeCArIFwiW1wiICsgcHJvcCArIFwiXVwiIDogcHJvcCwgdmFsdWUgPSBvYmplY3RbcHJvcF07XHJcblx0XHRcdHN0ci5wdXNoKHZhbHVlICE9IG51bGwgJiYgdHlwZS5jYWxsKHZhbHVlKSA9PSBPQkpFQ1QgPyBidWlsZFF1ZXJ5U3RyaW5nKHZhbHVlLCBrZXkpIDogZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpXHJcblx0XHR9XHJcblx0XHRyZXR1cm4gc3RyLmpvaW4oXCImXCIpXHJcblx0fVxyXG5cdGZ1bmN0aW9uIHBhcnNlUXVlcnlTdHJpbmcoc3RyKSB7XHJcblx0XHR2YXIgcGFpcnMgPSBzdHIuc3BsaXQoXCImXCIpLCBwYXJhbXMgPSB7fTtcclxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcGFpcnMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIHBhaXIgPSBwYWlyc1tpXS5zcGxpdChcIj1cIik7XHJcblx0XHRcdHBhcmFtc1tkZWNvZGVTcGFjZShwYWlyWzBdKV0gPSBwYWlyWzFdID8gZGVjb2RlU3BhY2UocGFpclsxXSkgOiBcIlwiXHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcGFyYW1zXHJcblx0fVxyXG5cdGZ1bmN0aW9uIGRlY29kZVNwYWNlKHN0cmluZykge1xyXG5cdFx0cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzdHJpbmcucmVwbGFjZSgvXFwrL2csIFwiIFwiKSlcclxuXHR9XHJcblx0ZnVuY3Rpb24gcmVzZXQocm9vdCkge1xyXG5cdFx0dmFyIGNhY2hlS2V5ID0gZ2V0Q2VsbENhY2hlS2V5KHJvb3QpO1xyXG5cdFx0Y2xlYXIocm9vdC5jaGlsZE5vZGVzLCBjZWxsQ2FjaGVbY2FjaGVLZXldKTtcclxuXHRcdGNlbGxDYWNoZVtjYWNoZUtleV0gPSB1bmRlZmluZWRcclxuXHR9XHJcblxyXG5cdG0uZGVmZXJyZWQgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHR2YXIgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuXHRcdGRlZmVycmVkLnByb21pc2UgPSBwcm9waWZ5KGRlZmVycmVkLnByb21pc2UpO1xyXG5cdFx0cmV0dXJuIGRlZmVycmVkXHJcblx0fTtcclxuXHRmdW5jdGlvbiBwcm9waWZ5KHByb21pc2UpIHtcclxuXHRcdHZhciBwcm9wID0gbS5wcm9wKCk7XHJcblx0XHRwcm9taXNlLnRoZW4ocHJvcCk7XHJcblx0XHRwcm9wLnRoZW4gPSBmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuXHRcdFx0cmV0dXJuIHByb3BpZnkocHJvbWlzZS50aGVuKHJlc29sdmUsIHJlamVjdCkpXHJcblx0XHR9O1xyXG5cdFx0cmV0dXJuIHByb3BcclxuXHR9XHJcblx0Ly9Qcm9taXoubWl0aHJpbC5qcyB8IFpvbG1laXN0ZXIgfCBNSVRcclxuXHQvL2EgbW9kaWZpZWQgdmVyc2lvbiBvZiBQcm9taXouanMsIHdoaWNoIGRvZXMgbm90IGNvbmZvcm0gdG8gUHJvbWlzZXMvQSsgZm9yIHR3byByZWFzb25zOlxyXG5cdC8vMSkgYHRoZW5gIGNhbGxiYWNrcyBhcmUgY2FsbGVkIHN5bmNocm9ub3VzbHkgKGJlY2F1c2Ugc2V0VGltZW91dCBpcyB0b28gc2xvdywgYW5kIHRoZSBzZXRJbW1lZGlhdGUgcG9seWZpbGwgaXMgdG9vIGJpZ1xyXG5cdC8vMikgdGhyb3dpbmcgc3ViY2xhc3NlcyBvZiBFcnJvciBjYXVzZSB0aGUgZXJyb3IgdG8gYmUgYnViYmxlZCB1cCBpbnN0ZWFkIG9mIHRyaWdnZXJpbmcgcmVqZWN0aW9uIChiZWNhdXNlIHRoZSBzcGVjIGRvZXMgbm90IGFjY291bnQgZm9yIHRoZSBpbXBvcnRhbnQgdXNlIGNhc2Ugb2YgZGVmYXVsdCBicm93c2VyIGVycm9yIGhhbmRsaW5nLCBpLmUuIG1lc3NhZ2Ugdy8gbGluZSBudW1iZXIpXHJcblx0ZnVuY3Rpb24gRGVmZXJyZWQoc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcclxuXHRcdHZhciBSRVNPTFZJTkcgPSAxLCBSRUpFQ1RJTkcgPSAyLCBSRVNPTFZFRCA9IDMsIFJFSkVDVEVEID0gNDtcclxuXHRcdHZhciBzZWxmID0gdGhpcywgc3RhdGUgPSAwLCBwcm9taXNlVmFsdWUgPSAwLCBuZXh0ID0gW107XHJcblxyXG5cdFx0c2VsZltcInByb21pc2VcIl0gPSB7fTtcclxuXHJcblx0XHRzZWxmW1wicmVzb2x2ZVwiXSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcblx0XHRcdGlmICghc3RhdGUpIHtcclxuXHRcdFx0XHRwcm9taXNlVmFsdWUgPSB2YWx1ZTtcclxuXHRcdFx0XHRzdGF0ZSA9IFJFU09MVklORztcclxuXHJcblx0XHRcdFx0ZmlyZSgpXHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHRoaXNcclxuXHRcdH07XHJcblxyXG5cdFx0c2VsZltcInJlamVjdFwiXSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcblx0XHRcdGlmICghc3RhdGUpIHtcclxuXHRcdFx0XHRwcm9taXNlVmFsdWUgPSB2YWx1ZTtcclxuXHRcdFx0XHRzdGF0ZSA9IFJFSkVDVElORztcclxuXHJcblx0XHRcdFx0ZmlyZSgpXHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHRoaXNcclxuXHRcdH07XHJcblxyXG5cdFx0c2VsZi5wcm9taXNlW1widGhlblwiXSA9IGZ1bmN0aW9uKHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKSB7XHJcblx0XHRcdHZhciBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZChzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XHJcblx0XHRcdGlmIChzdGF0ZSA9PSBSRVNPTFZFRCkge1xyXG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocHJvbWlzZVZhbHVlKVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKHN0YXRlID09IFJFSkVDVEVEKSB7XHJcblx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KHByb21pc2VWYWx1ZSlcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRuZXh0LnB1c2goZGVmZXJyZWQpXHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2VcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gZmluaXNoKHR5cGUpIHtcclxuXHRcdFx0c3RhdGUgPSB0eXBlIHx8IFJFSkVDVEVEO1xyXG5cdFx0XHRuZXh0Lm1hcChmdW5jdGlvbihkZWZlcnJlZCkge1xyXG5cdFx0XHRcdHN0YXRlID09IFJFU09MVkVEICYmIGRlZmVycmVkLnJlc29sdmUocHJvbWlzZVZhbHVlKSB8fCBkZWZlcnJlZC5yZWplY3QocHJvbWlzZVZhbHVlKVxyXG5cdFx0XHR9KVxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHRoZW5uYWJsZSh0aGVuLCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaywgbm90VGhlbm5hYmxlQ2FsbGJhY2spIHtcclxuXHRcdFx0aWYgKCgocHJvbWlzZVZhbHVlICE9IG51bGwgJiYgdHlwZS5jYWxsKHByb21pc2VWYWx1ZSkgPT0gT0JKRUNUKSB8fCB0eXBlb2YgcHJvbWlzZVZhbHVlID09IEZVTkNUSU9OKSAmJiB0eXBlb2YgdGhlbiA9PSBGVU5DVElPTikge1xyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHQvLyBjb3VudCBwcm90ZWN0cyBhZ2FpbnN0IGFidXNlIGNhbGxzIGZyb20gc3BlYyBjaGVja2VyXHJcblx0XHRcdFx0XHR2YXIgY291bnQgPSAwO1xyXG5cdFx0XHRcdFx0dGhlbi5jYWxsKHByb21pc2VWYWx1ZSwgZnVuY3Rpb24odmFsdWUpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGNvdW50KyspIHJldHVybjtcclxuXHRcdFx0XHRcdFx0cHJvbWlzZVZhbHVlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdHN1Y2Nlc3NDYWxsYmFjaygpXHJcblx0XHRcdFx0XHR9LCBmdW5jdGlvbiAodmFsdWUpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGNvdW50KyspIHJldHVybjtcclxuXHRcdFx0XHRcdFx0cHJvbWlzZVZhbHVlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGZhaWx1cmVDYWxsYmFjaygpXHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjYXRjaCAoZSkge1xyXG5cdFx0XHRcdFx0bS5kZWZlcnJlZC5vbmVycm9yKGUpO1xyXG5cdFx0XHRcdFx0cHJvbWlzZVZhbHVlID0gZTtcclxuXHRcdFx0XHRcdGZhaWx1cmVDYWxsYmFjaygpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdG5vdFRoZW5uYWJsZUNhbGxiYWNrKClcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGZpcmUoKSB7XHJcblx0XHRcdC8vIGNoZWNrIGlmIGl0J3MgYSB0aGVuYWJsZVxyXG5cdFx0XHR2YXIgdGhlbjtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHR0aGVuID0gcHJvbWlzZVZhbHVlICYmIHByb21pc2VWYWx1ZS50aGVuXHJcblx0XHRcdH1cclxuXHRcdFx0Y2F0Y2ggKGUpIHtcclxuXHRcdFx0XHRtLmRlZmVycmVkLm9uZXJyb3IoZSk7XHJcblx0XHRcdFx0cHJvbWlzZVZhbHVlID0gZTtcclxuXHRcdFx0XHRzdGF0ZSA9IFJFSkVDVElORztcclxuXHRcdFx0XHRyZXR1cm4gZmlyZSgpXHJcblx0XHRcdH1cclxuXHRcdFx0dGhlbm5hYmxlKHRoZW4sIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHN0YXRlID0gUkVTT0xWSU5HO1xyXG5cdFx0XHRcdGZpcmUoKVxyXG5cdFx0XHR9LCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRzdGF0ZSA9IFJFSkVDVElORztcclxuXHRcdFx0XHRmaXJlKClcclxuXHRcdFx0fSwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdGlmIChzdGF0ZSA9PSBSRVNPTFZJTkcgJiYgdHlwZW9mIHN1Y2Nlc3NDYWxsYmFjayA9PSBGVU5DVElPTikge1xyXG5cdFx0XHRcdFx0XHRwcm9taXNlVmFsdWUgPSBzdWNjZXNzQ2FsbGJhY2socHJvbWlzZVZhbHVlKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSBpZiAoc3RhdGUgPT0gUkVKRUNUSU5HICYmIHR5cGVvZiBmYWlsdXJlQ2FsbGJhY2sgPT0gXCJmdW5jdGlvblwiKSB7XHJcblx0XHRcdFx0XHRcdHByb21pc2VWYWx1ZSA9IGZhaWx1cmVDYWxsYmFjayhwcm9taXNlVmFsdWUpO1xyXG5cdFx0XHRcdFx0XHRzdGF0ZSA9IFJFU09MVklOR1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjYXRjaCAoZSkge1xyXG5cdFx0XHRcdFx0bS5kZWZlcnJlZC5vbmVycm9yKGUpO1xyXG5cdFx0XHRcdFx0cHJvbWlzZVZhbHVlID0gZTtcclxuXHRcdFx0XHRcdHJldHVybiBmaW5pc2goKVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKHByb21pc2VWYWx1ZSA9PSBzZWxmKSB7XHJcblx0XHRcdFx0XHRwcm9taXNlVmFsdWUgPSBUeXBlRXJyb3IoKTtcclxuXHRcdFx0XHRcdGZpbmlzaCgpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0dGhlbm5hYmxlKHRoZW4sIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdFx0ZmluaXNoKFJFU09MVkVEKVxyXG5cdFx0XHRcdFx0fSwgZmluaXNoLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRcdGZpbmlzaChzdGF0ZSA9PSBSRVNPTFZJTkcgJiYgUkVTT0xWRUQpXHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHRcdH1cclxuXHR9XHJcblx0bS5kZWZlcnJlZC5vbmVycm9yID0gZnVuY3Rpb24oZSkge1xyXG5cdFx0aWYgKHR5cGUuY2FsbChlKSA9PSBcIltvYmplY3QgRXJyb3JdXCIgJiYgIWUuY29uc3RydWN0b3IudG9TdHJpbmcoKS5tYXRjaCgvIEVycm9yLykpIHRocm93IGVcclxuXHR9O1xyXG5cclxuXHRtLnN5bmMgPSBmdW5jdGlvbihhcmdzKSB7XHJcblx0XHR2YXIgbWV0aG9kID0gXCJyZXNvbHZlXCI7XHJcblx0XHRmdW5jdGlvbiBzeW5jaHJvbml6ZXIocG9zLCByZXNvbHZlZCkge1xyXG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcclxuXHRcdFx0XHRyZXN1bHRzW3Bvc10gPSB2YWx1ZTtcclxuXHRcdFx0XHRpZiAoIXJlc29sdmVkKSBtZXRob2QgPSBcInJlamVjdFwiO1xyXG5cdFx0XHRcdGlmICgtLW91dHN0YW5kaW5nID09IDApIHtcclxuXHRcdFx0XHRcdGRlZmVycmVkLnByb21pc2UocmVzdWx0cyk7XHJcblx0XHRcdFx0XHRkZWZlcnJlZFttZXRob2RdKHJlc3VsdHMpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiB2YWx1ZVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dmFyIGRlZmVycmVkID0gbS5kZWZlcnJlZCgpO1xyXG5cdFx0dmFyIG91dHN0YW5kaW5nID0gYXJncy5sZW5ndGg7XHJcblx0XHR2YXIgcmVzdWx0cyA9IG5ldyBBcnJheShvdXRzdGFuZGluZyk7XHJcblx0XHRpZiAoYXJncy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGFyZ3NbaV0udGhlbihzeW5jaHJvbml6ZXIoaSwgdHJ1ZSksIHN5bmNocm9uaXplcihpLCBmYWxzZSkpXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGVsc2UgZGVmZXJyZWQucmVzb2x2ZShbXSk7XHJcblxyXG5cdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2VcclxuXHR9O1xyXG5cdGZ1bmN0aW9uIGlkZW50aXR5KHZhbHVlKSB7cmV0dXJuIHZhbHVlfVxyXG5cclxuXHRmdW5jdGlvbiBhamF4KG9wdGlvbnMpIHtcclxuXHRcdGlmIChvcHRpb25zLmRhdGFUeXBlICYmIG9wdGlvbnMuZGF0YVR5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJqc29ucFwiKSB7XHJcblx0XHRcdHZhciBjYWxsYmFja0tleSA9IFwibWl0aHJpbF9jYWxsYmFja19cIiArIG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgXCJfXCIgKyAoTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMWUxNikpLnRvU3RyaW5nKDM2KTtcclxuXHRcdFx0dmFyIHNjcmlwdCA9ICRkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xyXG5cclxuXHRcdFx0d2luZG93W2NhbGxiYWNrS2V5XSA9IGZ1bmN0aW9uKHJlc3ApIHtcclxuXHRcdFx0XHQkZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JpcHQpO1xyXG5cdFx0XHRcdG9wdGlvbnMub25sb2FkKHtcclxuXHRcdFx0XHRcdHR5cGU6IFwibG9hZFwiLFxyXG5cdFx0XHRcdFx0dGFyZ2V0OiB7XHJcblx0XHRcdFx0XHRcdHJlc3BvbnNlVGV4dDogcmVzcFxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdHdpbmRvd1tjYWxsYmFja0tleV0gPSB1bmRlZmluZWRcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHNjcmlwdC5vbmVycm9yID0gZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdCRkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcmlwdCk7XHJcblxyXG5cdFx0XHRcdG9wdGlvbnMub25lcnJvcih7XHJcblx0XHRcdFx0XHR0eXBlOiBcImVycm9yXCIsXHJcblx0XHRcdFx0XHR0YXJnZXQ6IHtcclxuXHRcdFx0XHRcdFx0c3RhdHVzOiA1MDAsXHJcblx0XHRcdFx0XHRcdHJlc3BvbnNlVGV4dDogSlNPTi5zdHJpbmdpZnkoe2Vycm9yOiBcIkVycm9yIG1ha2luZyBqc29ucCByZXF1ZXN0XCJ9KVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdHdpbmRvd1tjYWxsYmFja0tleV0gPSB1bmRlZmluZWQ7XHJcblxyXG5cdFx0XHRcdHJldHVybiBmYWxzZVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0c2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2VcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHNjcmlwdC5zcmMgPSBvcHRpb25zLnVybFxyXG5cdFx0XHRcdCsgKG9wdGlvbnMudXJsLmluZGV4T2YoXCI/XCIpID4gMCA/IFwiJlwiIDogXCI/XCIpXHJcblx0XHRcdFx0KyAob3B0aW9ucy5jYWxsYmFja0tleSA/IG9wdGlvbnMuY2FsbGJhY2tLZXkgOiBcImNhbGxiYWNrXCIpXHJcblx0XHRcdFx0KyBcIj1cIiArIGNhbGxiYWNrS2V5XHJcblx0XHRcdFx0KyBcIiZcIiArIGJ1aWxkUXVlcnlTdHJpbmcob3B0aW9ucy5kYXRhIHx8IHt9KTtcclxuXHRcdFx0JGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHZhciB4aHIgPSBuZXcgd2luZG93LlhNTEh0dHBSZXF1ZXN0O1xyXG5cdFx0XHR4aHIub3BlbihvcHRpb25zLm1ldGhvZCwgb3B0aW9ucy51cmwsIHRydWUsIG9wdGlvbnMudXNlciwgb3B0aW9ucy5wYXNzd29yZCk7XHJcblx0XHRcdHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcclxuXHRcdFx0XHRcdGlmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwKSBvcHRpb25zLm9ubG9hZCh7dHlwZTogXCJsb2FkXCIsIHRhcmdldDogeGhyfSk7XHJcblx0XHRcdFx0XHRlbHNlIG9wdGlvbnMub25lcnJvcih7dHlwZTogXCJlcnJvclwiLCB0YXJnZXQ6IHhocn0pXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cdFx0XHRpZiAob3B0aW9ucy5zZXJpYWxpemUgPT0gSlNPTi5zdHJpbmdpZnkgJiYgb3B0aW9ucy5kYXRhICYmIG9wdGlvbnMubWV0aG9kICE9IFwiR0VUXCIpIHtcclxuXHRcdFx0XHR4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIilcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAob3B0aW9ucy5kZXNlcmlhbGl6ZSA9PSBKU09OLnBhcnNlKSB7XHJcblx0XHRcdFx0eGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIiwgXCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0LypcIik7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHR5cGVvZiBvcHRpb25zLmNvbmZpZyA9PSBGVU5DVElPTikge1xyXG5cdFx0XHRcdHZhciBtYXliZVhociA9IG9wdGlvbnMuY29uZmlnKHhociwgb3B0aW9ucyk7XHJcblx0XHRcdFx0aWYgKG1heWJlWGhyICE9IG51bGwpIHhociA9IG1heWJlWGhyXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBkYXRhID0gb3B0aW9ucy5tZXRob2QgPT0gXCJHRVRcIiB8fCAhb3B0aW9ucy5kYXRhID8gXCJcIiA6IG9wdGlvbnMuZGF0YVxyXG5cdFx0XHRpZiAoZGF0YSAmJiAodHlwZS5jYWxsKGRhdGEpICE9IFNUUklORyAmJiBkYXRhLmNvbnN0cnVjdG9yICE9IHdpbmRvdy5Gb3JtRGF0YSkpIHtcclxuXHRcdFx0XHR0aHJvdyBcIlJlcXVlc3QgZGF0YSBzaG91bGQgYmUgZWl0aGVyIGJlIGEgc3RyaW5nIG9yIEZvcm1EYXRhLiBDaGVjayB0aGUgYHNlcmlhbGl6ZWAgb3B0aW9uIGluIGBtLnJlcXVlc3RgXCI7XHJcblx0XHRcdH1cclxuXHRcdFx0eGhyLnNlbmQoZGF0YSk7XHJcblx0XHRcdHJldHVybiB4aHJcclxuXHRcdH1cclxuXHR9XHJcblx0ZnVuY3Rpb24gYmluZERhdGEoeGhyT3B0aW9ucywgZGF0YSwgc2VyaWFsaXplKSB7XHJcblx0XHRpZiAoeGhyT3B0aW9ucy5tZXRob2QgPT0gXCJHRVRcIiAmJiB4aHJPcHRpb25zLmRhdGFUeXBlICE9IFwianNvbnBcIikge1xyXG5cdFx0XHR2YXIgcHJlZml4ID0geGhyT3B0aW9ucy51cmwuaW5kZXhPZihcIj9cIikgPCAwID8gXCI/XCIgOiBcIiZcIjtcclxuXHRcdFx0dmFyIHF1ZXJ5c3RyaW5nID0gYnVpbGRRdWVyeVN0cmluZyhkYXRhKTtcclxuXHRcdFx0eGhyT3B0aW9ucy51cmwgPSB4aHJPcHRpb25zLnVybCArIChxdWVyeXN0cmluZyA/IHByZWZpeCArIHF1ZXJ5c3RyaW5nIDogXCJcIilcclxuXHRcdH1cclxuXHRcdGVsc2UgeGhyT3B0aW9ucy5kYXRhID0gc2VyaWFsaXplKGRhdGEpO1xyXG5cdFx0cmV0dXJuIHhock9wdGlvbnNcclxuXHR9XHJcblx0ZnVuY3Rpb24gcGFyYW1ldGVyaXplVXJsKHVybCwgZGF0YSkge1xyXG5cdFx0dmFyIHRva2VucyA9IHVybC5tYXRjaCgvOlthLXpdXFx3Ky9naSk7XHJcblx0XHRpZiAodG9rZW5zICYmIGRhdGEpIHtcclxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHR2YXIga2V5ID0gdG9rZW5zW2ldLnNsaWNlKDEpO1xyXG5cdFx0XHRcdHVybCA9IHVybC5yZXBsYWNlKHRva2Vuc1tpXSwgZGF0YVtrZXldKTtcclxuXHRcdFx0XHRkZWxldGUgZGF0YVtrZXldXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiB1cmxcclxuXHR9XHJcblxyXG5cdG0ucmVxdWVzdCA9IGZ1bmN0aW9uKHhock9wdGlvbnMpIHtcclxuXHRcdGlmICh4aHJPcHRpb25zLmJhY2tncm91bmQgIT09IHRydWUpIG0uc3RhcnRDb21wdXRhdGlvbigpO1xyXG5cdFx0dmFyIGRlZmVycmVkID0gbS5kZWZlcnJlZCgpO1xyXG5cdFx0dmFyIGlzSlNPTlAgPSB4aHJPcHRpb25zLmRhdGFUeXBlICYmIHhock9wdGlvbnMuZGF0YVR5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJqc29ucFwiO1xyXG5cdFx0dmFyIHNlcmlhbGl6ZSA9IHhock9wdGlvbnMuc2VyaWFsaXplID0gaXNKU09OUCA/IGlkZW50aXR5IDogeGhyT3B0aW9ucy5zZXJpYWxpemUgfHwgSlNPTi5zdHJpbmdpZnk7XHJcblx0XHR2YXIgZGVzZXJpYWxpemUgPSB4aHJPcHRpb25zLmRlc2VyaWFsaXplID0gaXNKU09OUCA/IGlkZW50aXR5IDogeGhyT3B0aW9ucy5kZXNlcmlhbGl6ZSB8fCBKU09OLnBhcnNlO1xyXG5cdFx0dmFyIGV4dHJhY3QgPSB4aHJPcHRpb25zLmV4dHJhY3QgfHwgZnVuY3Rpb24oeGhyKSB7XHJcblx0XHRcdHJldHVybiB4aHIucmVzcG9uc2VUZXh0Lmxlbmd0aCA9PT0gMCAmJiBkZXNlcmlhbGl6ZSA9PT0gSlNPTi5wYXJzZSA/IG51bGwgOiB4aHIucmVzcG9uc2VUZXh0XHJcblx0XHR9O1xyXG5cdFx0eGhyT3B0aW9ucy51cmwgPSBwYXJhbWV0ZXJpemVVcmwoeGhyT3B0aW9ucy51cmwsIHhock9wdGlvbnMuZGF0YSk7XHJcblx0XHR4aHJPcHRpb25zID0gYmluZERhdGEoeGhyT3B0aW9ucywgeGhyT3B0aW9ucy5kYXRhLCBzZXJpYWxpemUpO1xyXG5cdFx0eGhyT3B0aW9ucy5vbmxvYWQgPSB4aHJPcHRpb25zLm9uZXJyb3IgPSBmdW5jdGlvbihlKSB7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0ZSA9IGUgfHwgZXZlbnQ7XHJcblx0XHRcdFx0dmFyIHVud3JhcCA9IChlLnR5cGUgPT0gXCJsb2FkXCIgPyB4aHJPcHRpb25zLnVud3JhcFN1Y2Nlc3MgOiB4aHJPcHRpb25zLnVud3JhcEVycm9yKSB8fCBpZGVudGl0eTtcclxuXHRcdFx0XHR2YXIgcmVzcG9uc2UgPSB1bndyYXAoZGVzZXJpYWxpemUoZXh0cmFjdChlLnRhcmdldCwgeGhyT3B0aW9ucykpKTtcclxuXHRcdFx0XHRpZiAoZS50eXBlID09IFwibG9hZFwiKSB7XHJcblx0XHRcdFx0XHRpZiAodHlwZS5jYWxsKHJlc3BvbnNlKSA9PSBBUlJBWSAmJiB4aHJPcHRpb25zLnR5cGUpIHtcclxuXHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCByZXNwb25zZS5sZW5ndGg7IGkrKykgcmVzcG9uc2VbaV0gPSBuZXcgeGhyT3B0aW9ucy50eXBlKHJlc3BvbnNlW2ldKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSBpZiAoeGhyT3B0aW9ucy50eXBlKSByZXNwb25zZSA9IG5ldyB4aHJPcHRpb25zLnR5cGUocmVzcG9uc2UpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGRlZmVycmVkW2UudHlwZSA9PSBcImxvYWRcIiA/IFwicmVzb2x2ZVwiIDogXCJyZWplY3RcIl0ocmVzcG9uc2UpXHJcblx0XHRcdH1cclxuXHRcdFx0Y2F0Y2ggKGUpIHtcclxuXHRcdFx0XHRtLmRlZmVycmVkLm9uZXJyb3IoZSk7XHJcblx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KGUpXHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHhock9wdGlvbnMuYmFja2dyb3VuZCAhPT0gdHJ1ZSkgbS5lbmRDb21wdXRhdGlvbigpXHJcblx0XHR9O1xyXG5cdFx0YWpheCh4aHJPcHRpb25zKTtcclxuXHRcdGRlZmVycmVkLnByb21pc2UoeGhyT3B0aW9ucy5pbml0aWFsVmFsdWUpO1xyXG5cdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2VcclxuXHR9O1xyXG5cclxuXHQvL3Rlc3RpbmcgQVBJXHJcblx0bS5kZXBzID0gZnVuY3Rpb24obW9jaykge1xyXG5cdFx0aW5pdGlhbGl6ZSh3aW5kb3cgPSBtb2NrIHx8IHdpbmRvdyk7XHJcblx0XHRyZXR1cm4gd2luZG93O1xyXG5cdH07XHJcblx0Ly9mb3IgaW50ZXJuYWwgdGVzdGluZyBvbmx5LCBkbyBub3QgdXNlIGBtLmRlcHMuZmFjdG9yeWBcclxuXHRtLmRlcHMuZmFjdG9yeSA9IGFwcDtcclxuXHJcblx0cmV0dXJuIG1cclxufSkodHlwZW9mIHdpbmRvdyAhPSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pO1xyXG5cclxuaWYgKHR5cGVvZiBtb2R1bGUgIT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUgIT09IG51bGwgJiYgbW9kdWxlLmV4cG9ydHMpIG1vZHVsZS5leHBvcnRzID0gbTtcclxuZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkgZGVmaW5lKGZ1bmN0aW9uKCkge3JldHVybiBtfSk7XHJcbiIsIndpbmRvdy5yaXBwbGVzPXtpbml0OmZ1bmN0aW9uKG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG8obix0KXt2YXIgaT1uLm1hdGNoZXN8fG4ubWF0Y2hlc1NlbGVjdG9yfHxuLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8bi5tb3pNYXRjaGVzU2VsZWN0b3J8fG4ubXNNYXRjaGVzU2VsZWN0b3J8fG4ub01hdGNoZXNTZWxlY3RvcjtyZXR1cm4gaS5jYWxsKG4sdCl9dmFyIHM9MTAwLGg9NTAwLHQ9ZnVuY3Rpb24obix0LGkpe3R5cGVvZiBuPT1cInN0cmluZ1wiJiYobj1bbl0pO24uZm9yRWFjaChmdW5jdGlvbihuKXtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKG4sZnVuY3Rpb24obil7dmFyIHI9dHlwZW9mIG4uZGV0YWlsIT1cIm51bWJlclwiP24uZGV0YWlsOm4udGFyZ2V0O28ocix0KSYmaShuLHIpfSl9KX0scj1mdW5jdGlvbihuLHQsaSl7dmFyIHM9dCxsPXMucGFyZW50Tm9kZSxyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdT1sLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGM9e3g6bi5jbGllbnRYLXUubGVmdCx5Oih3aW5kb3cub250b3VjaHN0YXJ0P24uY2xpZW50WS13aW5kb3cuc2Nyb2xsWTpuLmNsaWVudFkpLXUudG9wfSxmPVwic2NhbGUoXCIrTWF0aC5yb3VuZChzLm9mZnNldFdpZHRoLzUpK1wiKVwiLHY9bmV3IEN1c3RvbUV2ZW50KFwicmlwcGxlRW5kXCIse2RldGFpbDpyfSkseSxvLGE7bi50b3VjaGVzJiYoYz17eDpuLnRvdWNoZXNbMF0uY2xpZW50WC11LmxlZnQseTpuLnRvdWNoZXNbMF0uY2xpZW50WS11LnRvcH0pO2U9cjtyLmNsYXNzTmFtZT1cInJpcHBsZVwiO3Iuc2V0QXR0cmlidXRlKFwic3R5bGVcIixcImxlZnQ6XCIrYy54K1wicHg7IHRvcDpcIitjLnkrXCJweDtcIik7bz13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShsKS5jb2xvcjtvPW8ucmVwbGFjZShcInJnYlwiLFwicmdiYVwiKS5yZXBsYWNlKFwiKVwiLFwiLCBcIisuMytcIilcIik7cy5hcHBlbmRDaGlsZChyKTt5PXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHIpLm9wYWNpdHk7ci5kYXRhc2V0LmFuaW1hdGluZz0xO3IuY2xhc3NOYW1lPVwicmlwcGxlIHJpcHBsZS1vblwiO2E9W3IuZ2V0QXR0cmlidXRlKFwic3R5bGVcIiksXCJiYWNrZ3JvdW5kLWNvbG9yOiBcIitvLFwiLW1zLXRyYW5zZm9ybTogXCIrZixcIi1tb3otdHJhbnNmb3JtXCIrZixcIi13ZWJraXQtdHJhbnNmb3JtXCIrZixcInRyYW5zZm9ybTogXCIrZl07ci5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLGEuam9pbihcIjtcIikpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtyLmRhdGFzZXQuYW5pbWF0aW5nPTA7ZG9jdW1lbnQuZGlzcGF0Y2hFdmVudCh2KTtpJiZpKCl9LGgpfSx1PWZ1bmN0aW9uKG4pe24uY2xhc3NOYW1lPVwicmlwcGxlIHJpcHBsZS1vbiByaXBwbGUtb3V0XCI7c2V0VGltZW91dChmdW5jdGlvbigpe24ucmVtb3ZlKCl9LHMpfSxpPSExLGYsZTt0KFtcIm1vdXNlZG93blwiLFwidG91Y2hzdGFydFwiXSxcIipcIixmdW5jdGlvbigpe2k9ITB9KTt0KFtcIm1vdXNldXBcIixcInRvdWNoZW5kXCIsXCJtb3VzZW91dFwiXSxcIipcIixmdW5jdGlvbigpe2k9ITF9KTtmPWZ1bmN0aW9uKG4sdCl7aWYodC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwicmlwcGxlLXdyYXBwZXJcIikubGVuZ3RoPT09MCl7dC5jbGFzc05hbWUrPVwiIHdpdGhyaXBwbGVcIjt2YXIgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2kuY2xhc3NOYW1lPVwicmlwcGxlLXdyYXBwZXJcIjt0LmFwcGVuZENoaWxkKGkpO3dpbmRvdy5vbnRvdWNoc3RhcnQ9PT1udWxsJiZyKG4saSxmdW5jdGlvbigpe2kuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInJpcHBsZVwiKVswXS5yZW1vdmUoKX0pfX07dChbXCJtb3VzZW92ZXJcIixcInRvdWNoc3RhcnRcIl0sbixmKTt0KFtcIm1vdXNlZG93blwiLFwidG91Y2hzdGFydFwiXSxcIi5yaXBwbGUtd3JhcHBlclwiLGZ1bmN0aW9uKG4sdCl7KG4ud2hpY2g9PT0wfHxuLndoaWNoPT09MXx8bi53aGljaD09PTIpJiZyKG4sdCl9KTt0KFwicmlwcGxlRW5kXCIsXCIucmlwcGxlLXdyYXBwZXIgLnJpcHBsZVwiLGZ1bmN0aW9uKG4sdCl7dmFyIHI9dC5wYXJlbnROb2RlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJyaXBwbGVcIik7KCFpfHxyWzBdPT10JiZyLmxlbmd0aD4xKSYmdSh0KX0pO3QoW1wibW91c2V1cFwiLFwidG91Y2hlbmRcIixcIm1vdXNlb3V0XCJdLFwiLnJpcHBsZS13cmFwcGVyXCIsZnVuY3Rpb24oKXt2YXIgbj1lO24mJm4uZGF0YXNldC5hbmltYXRpbmchPTEmJnUobil9KX19O1xyXG4vKlxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1yaXBwbGVzLm1pbi5qcy5tYXBcclxuKi8iLCIvKiEgVmVsb2NpdHlKUy5vcmcgKDEuMS4wKS4gKEMpIDIwMTQgSnVsaWFuIFNoYXBpcm8uIE1JVCBAbGljZW5zZTogZW4ud2lraXBlZGlhLm9yZy93aWtpL01JVF9MaWNlbnNlICovXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICBWZWxvY2l0eSBqUXVlcnkgU2hpbVxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyohIFZlbG9jaXR5SlMub3JnIGpRdWVyeSBTaGltICgxLjAuMSkuIChDKSAyMDE0IFRoZSBqUXVlcnkgRm91bmRhdGlvbi4gTUlUIEBsaWNlbnNlOiBlbi53aWtpcGVkaWEub3JnL3dpa2kvTUlUX0xpY2Vuc2UuICovXHJcblxyXG4vKiBUaGlzIGZpbGUgY29udGFpbnMgdGhlIGpRdWVyeSBmdW5jdGlvbnMgdGhhdCBWZWxvY2l0eSByZWxpZXMgb24sIHRoZXJlYnkgcmVtb3ZpbmcgVmVsb2NpdHkncyBkZXBlbmRlbmN5IG9uIGEgZnVsbCBjb3B5IG9mIGpRdWVyeSwgYW5kIGFsbG93aW5nIGl0IHRvIHdvcmsgaW4gYW55IGVudmlyb25tZW50LiAqL1xyXG4vKiBUaGVzZSBzaGltbWVkIGZ1bmN0aW9ucyBhcmUgb25seSB1c2VkIGlmIGpRdWVyeSBpc24ndCBwcmVzZW50LiBJZiBib3RoIHRoaXMgc2hpbSBhbmQgalF1ZXJ5IGFyZSBsb2FkZWQsIFZlbG9jaXR5IGRlZmF1bHRzIHRvIGpRdWVyeSBwcm9wZXIuICovXHJcbi8qIEJyb3dzZXIgc3VwcG9ydDogVXNpbmcgdGhpcyBzaGltIGluc3RlYWQgb2YgalF1ZXJ5IHByb3BlciByZW1vdmVzIHN1cHBvcnQgZm9yIElFOC4gKi9cclxuXHJcbjsoZnVuY3Rpb24gKHdpbmRvdykge1xyXG4gICAgLyoqKioqKioqKioqKioqKlxyXG4gICAgICAgICBTZXR1cFxyXG4gICAgKioqKioqKioqKioqKioqL1xyXG5cclxuICAgIC8qIElmIGpRdWVyeSBpcyBhbHJlYWR5IGxvYWRlZCwgdGhlcmUncyBubyBwb2ludCBpbiBsb2FkaW5nIHRoaXMgc2hpbS4gKi9cclxuICAgIGlmICh3aW5kb3cualF1ZXJ5KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIGpRdWVyeSBiYXNlLiAqL1xyXG4gICAgdmFyICQgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIGNvbnRleHQpIHtcclxuICAgICAgICByZXR1cm4gbmV3ICQuZm4uaW5pdChzZWxlY3RvciwgY29udGV4dCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgUHJpdmF0ZSBNZXRob2RzXHJcbiAgICAqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAvKiBqUXVlcnkgKi9cclxuICAgICQuaXNXaW5kb3cgPSBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgLyoganNoaW50IGVxZXFlcTogZmFsc2UgKi9cclxuICAgICAgICByZXR1cm4gb2JqICE9IG51bGwgJiYgb2JqID09IG9iai53aW5kb3c7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qIGpRdWVyeSAqL1xyXG4gICAgJC50eXBlID0gZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgIGlmIChvYmogPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gb2JqICsgXCJcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBvYmogPT09IFwiZnVuY3Rpb25cIiA/XHJcbiAgICAgICAgICAgIGNsYXNzMnR5cGVbdG9TdHJpbmcuY2FsbChvYmopXSB8fCBcIm9iamVjdFwiIDpcclxuICAgICAgICAgICAgdHlwZW9mIG9iajtcclxuICAgIH07XHJcblxyXG4gICAgLyogalF1ZXJ5ICovXHJcbiAgICAkLmlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICByZXR1cm4gJC50eXBlKG9iaikgPT09IFwiYXJyYXlcIjtcclxuICAgIH07XHJcblxyXG4gICAgLyogalF1ZXJ5ICovXHJcbiAgICBmdW5jdGlvbiBpc0FycmF5bGlrZSAob2JqKSB7XHJcbiAgICAgICAgdmFyIGxlbmd0aCA9IG9iai5sZW5ndGgsXHJcbiAgICAgICAgICAgIHR5cGUgPSAkLnR5cGUob2JqKTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGUgPT09IFwiZnVuY3Rpb25cIiB8fCAkLmlzV2luZG93KG9iaikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG9iai5ub2RlVHlwZSA9PT0gMSAmJiBsZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHlwZSA9PT0gXCJhcnJheVwiIHx8IGxlbmd0aCA9PT0gMCB8fCB0eXBlb2YgbGVuZ3RoID09PSBcIm51bWJlclwiICYmIGxlbmd0aCA+IDAgJiYgKGxlbmd0aCAtIDEpIGluIG9iajtcclxuICAgIH1cclxuXHJcbiAgICAvKioqKioqKioqKioqKioqXHJcbiAgICAgICAkIE1ldGhvZHNcclxuICAgICoqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAvKiBqUXVlcnk6IFN1cHBvcnQgcmVtb3ZlZCBmb3IgSUU8OS4gKi9cclxuICAgICQuaXNQbGFpbk9iamVjdCA9IGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICB2YXIga2V5O1xyXG5cclxuICAgICAgICBpZiAoIW9iaiB8fCAkLnR5cGUob2JqKSAhPT0gXCJvYmplY3RcIiB8fCBvYmoubm9kZVR5cGUgfHwgJC5pc1dpbmRvdyhvYmopKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChvYmouY29uc3RydWN0b3IgJiZcclxuICAgICAgICAgICAgICAgICFoYXNPd24uY2FsbChvYmosIFwiY29uc3RydWN0b3JcIikgJiZcclxuICAgICAgICAgICAgICAgICFoYXNPd24uY2FsbChvYmouY29uc3RydWN0b3IucHJvdG90eXBlLCBcImlzUHJvdG90eXBlT2ZcIikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChrZXkgaW4gb2JqKSB7fVxyXG5cclxuICAgICAgICByZXR1cm4ga2V5ID09PSB1bmRlZmluZWQgfHwgaGFzT3duLmNhbGwob2JqLCBrZXkpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiBqUXVlcnkgKi9cclxuICAgICQuZWFjaCA9IGZ1bmN0aW9uKG9iaiwgY2FsbGJhY2ssIGFyZ3MpIHtcclxuICAgICAgICB2YXIgdmFsdWUsXHJcbiAgICAgICAgICAgIGkgPSAwLFxyXG4gICAgICAgICAgICBsZW5ndGggPSBvYmoubGVuZ3RoLFxyXG4gICAgICAgICAgICBpc0FycmF5ID0gaXNBcnJheWxpa2Uob2JqKTtcclxuXHJcbiAgICAgICAgaWYgKGFyZ3MpIHtcclxuICAgICAgICAgICAgaWYgKGlzQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNhbGxiYWNrLmFwcGx5KG9ialtpXSwgYXJncyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpIGluIG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY2FsbGJhY2suYXBwbHkob2JqW2ldLCBhcmdzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGlzQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNhbGxiYWNrLmNhbGwob2JqW2ldLCBpLCBvYmpbaV0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaSBpbiBvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNhbGxiYWNrLmNhbGwob2JqW2ldLCBpLCBvYmpbaV0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH07XHJcblxyXG4gICAgLyogQ3VzdG9tICovXHJcbiAgICAkLmRhdGEgPSBmdW5jdGlvbiAobm9kZSwga2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIC8qICQuZ2V0RGF0YSgpICovXHJcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdmFyIGlkID0gbm9kZVskLmV4cGFuZG9dLFxyXG4gICAgICAgICAgICAgICAgc3RvcmUgPSBpZCAmJiBjYWNoZVtpZF07XHJcblxyXG4gICAgICAgICAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzdG9yZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleSBpbiBzdG9yZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgLyogJC5zZXREYXRhKCkgKi9cclxuICAgICAgICB9IGVsc2UgaWYgKGtleSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHZhciBpZCA9IG5vZGVbJC5leHBhbmRvXSB8fCAobm9kZVskLmV4cGFuZG9dID0gKyskLnV1aWQpO1xyXG5cclxuICAgICAgICAgICAgY2FjaGVbaWRdID0gY2FjaGVbaWRdIHx8IHt9O1xyXG4gICAgICAgICAgICBjYWNoZVtpZF1ba2V5XSA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyogQ3VzdG9tICovXHJcbiAgICAkLnJlbW92ZURhdGEgPSBmdW5jdGlvbiAobm9kZSwga2V5cykge1xyXG4gICAgICAgIHZhciBpZCA9IG5vZGVbJC5leHBhbmRvXSxcclxuICAgICAgICAgICAgc3RvcmUgPSBpZCAmJiBjYWNoZVtpZF07XHJcblxyXG4gICAgICAgIGlmIChzdG9yZSkge1xyXG4gICAgICAgICAgICAkLmVhY2goa2V5cywgZnVuY3Rpb24oXywga2V5KSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgc3RvcmVba2V5XTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKiBqUXVlcnkgKi9cclxuICAgICQuZXh0ZW5kID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzcmMsIGNvcHlJc0FycmF5LCBjb3B5LCBuYW1lLCBvcHRpb25zLCBjbG9uZSxcclxuICAgICAgICAgICAgdGFyZ2V0ID0gYXJndW1lbnRzWzBdIHx8IHt9LFxyXG4gICAgICAgICAgICBpID0gMSxcclxuICAgICAgICAgICAgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCxcclxuICAgICAgICAgICAgZGVlcCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICAgICAgZGVlcCA9IHRhcmdldDtcclxuXHJcbiAgICAgICAgICAgIHRhcmdldCA9IGFyZ3VtZW50c1tpXSB8fCB7fTtcclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiB0YXJnZXQgIT09IFwib2JqZWN0XCIgJiYgJC50eXBlKHRhcmdldCkgIT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICB0YXJnZXQgPSB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpID09PSBsZW5ndGgpIHtcclxuICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcztcclxuICAgICAgICAgICAgaS0tO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICg7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoKG9wdGlvbnMgPSBhcmd1bWVudHNbaV0pICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobmFtZSBpbiBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3JjID0gdGFyZ2V0W25hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvcHkgPSBvcHRpb25zW25hbWVdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0ID09PSBjb3B5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlZXAgJiYgY29weSAmJiAoJC5pc1BsYWluT2JqZWN0KGNvcHkpIHx8IChjb3B5SXNBcnJheSA9ICQuaXNBcnJheShjb3B5KSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb3B5SXNBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weUlzQXJyYXkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lID0gc3JjICYmICQuaXNBcnJheShzcmMpID8gc3JjIDogW107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmUgPSBzcmMgJiYgJC5pc1BsYWluT2JqZWN0KHNyYykgPyBzcmMgOiB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W25hbWVdID0gJC5leHRlbmQoZGVlcCwgY2xvbmUsIGNvcHkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvcHkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRbbmFtZV0gPSBjb3B5O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcclxuICAgIH07XHJcblxyXG4gICAgLyogalF1ZXJ5IDEuNC4zICovXHJcbiAgICAkLnF1ZXVlID0gZnVuY3Rpb24gKGVsZW0sIHR5cGUsIGRhdGEpIHtcclxuICAgICAgICBmdW5jdGlvbiAkbWFrZUFycmF5IChhcnIsIHJlc3VsdHMpIHtcclxuICAgICAgICAgICAgdmFyIHJldCA9IHJlc3VsdHMgfHwgW107XHJcblxyXG4gICAgICAgICAgICBpZiAoYXJyICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc0FycmF5bGlrZShPYmplY3QoYXJyKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiAkLm1lcmdlICovXHJcbiAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uKGZpcnN0LCBzZWNvbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlbiA9ICtzZWNvbmQubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZmlyc3QubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGogPCBsZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0W2krK10gPSBzZWNvbmRbaisrXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlbiAhPT0gbGVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoc2Vjb25kW2pdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdFtpKytdID0gc2Vjb25kW2orK107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0Lmxlbmd0aCA9IGk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlyc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkocmV0LCB0eXBlb2YgYXJyID09PSBcInN0cmluZ1wiID8gW2Fycl0gOiBhcnIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBbXS5wdXNoLmNhbGwocmV0LCBhcnIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFlbGVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHR5cGUgPSAodHlwZSB8fCBcImZ4XCIpICsgXCJxdWV1ZVwiO1xyXG5cclxuICAgICAgICB2YXIgcSA9ICQuZGF0YShlbGVtLCB0eXBlKTtcclxuXHJcbiAgICAgICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBxIHx8IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFxIHx8ICQuaXNBcnJheShkYXRhKSkge1xyXG4gICAgICAgICAgICBxID0gJC5kYXRhKGVsZW0sIHR5cGUsICRtYWtlQXJyYXkoZGF0YSkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHEucHVzaChkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBxO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiBqUXVlcnkgMS40LjMgKi9cclxuICAgICQuZGVxdWV1ZSA9IGZ1bmN0aW9uIChlbGVtcywgdHlwZSkge1xyXG4gICAgICAgIC8qIEN1c3RvbTogRW1iZWQgZWxlbWVudCBpdGVyYXRpb24uICovXHJcbiAgICAgICAgJC5lYWNoKGVsZW1zLm5vZGVUeXBlID8gWyBlbGVtcyBdIDogZWxlbXMsIGZ1bmN0aW9uKGksIGVsZW0pIHtcclxuICAgICAgICAgICAgdHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xyXG5cclxuICAgICAgICAgICAgdmFyIHF1ZXVlID0gJC5xdWV1ZShlbGVtLCB0eXBlKSxcclxuICAgICAgICAgICAgICAgIGZuID0gcXVldWUuc2hpZnQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmbiA9PT0gXCJpbnByb2dyZXNzXCIpIHtcclxuICAgICAgICAgICAgICAgIGZuID0gcXVldWUuc2hpZnQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGZuKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJmeFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVldWUudW5zaGlmdChcImlucHJvZ3Jlc3NcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm4uY2FsbChlbGVtLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAkLmRlcXVldWUoZWxlbSwgdHlwZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAkLmZuIE1ldGhvZHNcclxuICAgICoqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAvKiBqUXVlcnkgKi9cclxuICAgICQuZm4gPSAkLnByb3RvdHlwZSA9IHtcclxuICAgICAgICBpbml0OiBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcclxuICAgICAgICAgICAgLyogSnVzdCByZXR1cm4gdGhlIGVsZW1lbnQgd3JhcHBlZCBpbnNpZGUgYW4gYXJyYXk7IGRvbid0IHByb2NlZWQgd2l0aCB0aGUgYWN0dWFsIGpRdWVyeSBub2RlIHdyYXBwaW5nIHByb2Nlc3MuICovXHJcbiAgICAgICAgICAgIGlmIChzZWxlY3Rvci5ub2RlVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpc1swXSA9IHNlbGVjdG9yO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGEgRE9NIG5vZGUuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgb2Zmc2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8qIGpRdWVyeSBhbHRlcmVkIGNvZGU6IERyb3BwZWQgZGlzY29ubmVjdGVkIERPTSBub2RlIGNoZWNraW5nLiAqL1xyXG4gICAgICAgICAgICB2YXIgYm94ID0gdGhpc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QgPyB0aGlzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDogeyB0b3A6IDAsIGxlZnQ6IDAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB0b3A6IGJveC50b3AgKyAod2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LnNjcm9sbFRvcCAgfHwgMCkgIC0gKGRvY3VtZW50LmNsaWVudFRvcCAgfHwgMCksXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiBib3gubGVmdCArICh3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuc2Nyb2xsTGVmdCAgfHwgMCkgLSAoZG9jdW1lbnQuY2xpZW50TGVmdCB8fCAwKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHBvc2l0aW9uOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8qIGpRdWVyeSAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBvZmZzZXRQYXJlbnQoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50ID0gdGhpcy5vZmZzZXRQYXJlbnQgfHwgZG9jdW1lbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG9mZnNldFBhcmVudCAmJiAoIW9mZnNldFBhcmVudC5ub2RlVHlwZS50b0xvd2VyQ2FzZSA9PT0gXCJodG1sXCIgJiYgb2Zmc2V0UGFyZW50LnN0eWxlLnBvc2l0aW9uID09PSBcInN0YXRpY1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudC5vZmZzZXRQYXJlbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9mZnNldFBhcmVudCB8fCBkb2N1bWVudDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyogWmVwdG8gKi9cclxuICAgICAgICAgICAgdmFyIGVsZW0gPSB0aGlzWzBdLFxyXG4gICAgICAgICAgICAgICAgb2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50LmFwcGx5KGVsZW0pLFxyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gdGhpcy5vZmZzZXQoKSxcclxuICAgICAgICAgICAgICAgIHBhcmVudE9mZnNldCA9IC9eKD86Ym9keXxodG1sKSQvaS50ZXN0KG9mZnNldFBhcmVudC5ub2RlTmFtZSkgPyB7IHRvcDogMCwgbGVmdDogMCB9IDogJChvZmZzZXRQYXJlbnQpLm9mZnNldCgpXHJcblxyXG4gICAgICAgICAgICBvZmZzZXQudG9wIC09IHBhcnNlRmxvYXQoZWxlbS5zdHlsZS5tYXJnaW5Ub3ApIHx8IDA7XHJcbiAgICAgICAgICAgIG9mZnNldC5sZWZ0IC09IHBhcnNlRmxvYXQoZWxlbS5zdHlsZS5tYXJnaW5MZWZ0KSB8fCAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKG9mZnNldFBhcmVudC5zdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50T2Zmc2V0LnRvcCArPSBwYXJzZUZsb2F0KG9mZnNldFBhcmVudC5zdHlsZS5ib3JkZXJUb3BXaWR0aCkgfHwgMFxyXG4gICAgICAgICAgICAgICAgcGFyZW50T2Zmc2V0LmxlZnQgKz0gcGFyc2VGbG9hdChvZmZzZXRQYXJlbnQuc3R5bGUuYm9yZGVyTGVmdFdpZHRoKSB8fCAwXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB0b3A6IG9mZnNldC50b3AgLSBwYXJlbnRPZmZzZXQudG9wLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogb2Zmc2V0LmxlZnQgLSBwYXJlbnRPZmZzZXQubGVmdFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgIFByaXZhdGUgVmFyaWFibGVzXHJcbiAgICAqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgIC8qIEZvciAkLmRhdGEoKSAqL1xyXG4gICAgdmFyIGNhY2hlID0ge307XHJcbiAgICAkLmV4cGFuZG8gPSBcInZlbG9jaXR5XCIgKyAobmV3IERhdGUoKS5nZXRUaW1lKCkpO1xyXG4gICAgJC51dWlkID0gMDtcclxuXHJcbiAgICAvKiBGb3IgJC5xdWV1ZSgpICovXHJcbiAgICB2YXIgY2xhc3MydHlwZSA9IHt9LFxyXG4gICAgICAgIGhhc093biA9IGNsYXNzMnR5cGUuaGFzT3duUHJvcGVydHksXHJcbiAgICAgICAgdG9TdHJpbmcgPSBjbGFzczJ0eXBlLnRvU3RyaW5nO1xyXG5cclxuICAgIHZhciB0eXBlcyA9IFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvclwiLnNwbGl0KFwiIFwiKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHlwZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjbGFzczJ0eXBlW1wiW29iamVjdCBcIiArIHR5cGVzW2ldICsgXCJdXCJdID0gdHlwZXNbaV0udG9Mb3dlckNhc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiBNYWtlcyAkKG5vZGUpIHBvc3NpYmxlLCB3aXRob3V0IGhhdmluZyB0byBjYWxsIGluaXQuICovXHJcbiAgICAkLmZuLmluaXQucHJvdG90eXBlID0gJC5mbjtcclxuXHJcbiAgICAvKiBHbG9iYWxpemUgVmVsb2NpdHkgb250byB0aGUgd2luZG93LCBhbmQgYXNzaWduIGl0cyBVdGlsaXRpZXMgcHJvcGVydHkuICovXHJcbiAgICB3aW5kb3cuVmVsb2NpdHkgPSB7IFV0aWxpdGllczogJCB9O1xyXG59KSh3aW5kb3cpO1xyXG5cclxuLyoqKioqKioqKioqKioqKioqKlxyXG4gICAgVmVsb2NpdHkuanNcclxuKioqKioqKioqKioqKioqKioqL1xyXG5cclxuOyhmdW5jdGlvbiAoZmFjdG9yeSkge1xyXG4gICAgLyogQ29tbW9uSlMgbW9kdWxlLiAqL1xyXG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XHJcbiAgICAvKiBBTUQgbW9kdWxlLiAqL1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xyXG4gICAgICAgIGRlZmluZShmYWN0b3J5KTtcclxuICAgIC8qIEJyb3dzZXIgZ2xvYmFscy4gKi9cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZmFjdG9yeSgpO1xyXG4gICAgfVxyXG59KGZ1bmN0aW9uKCkge1xyXG5yZXR1cm4gZnVuY3Rpb24gKGdsb2JhbCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKlxyXG4gICAgICAgIFN1bW1hcnlcclxuICAgICoqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAvKlxyXG4gICAgLSBDU1M6IENTUyBzdGFjayB0aGF0IHdvcmtzIGluZGVwZW5kZW50bHkgZnJvbSB0aGUgcmVzdCBvZiBWZWxvY2l0eS5cclxuICAgIC0gYW5pbWF0ZSgpOiBDb3JlIGFuaW1hdGlvbiBtZXRob2QgdGhhdCBpdGVyYXRlcyBvdmVyIHRoZSB0YXJnZXRlZCBlbGVtZW50cyBhbmQgcXVldWVzIHRoZSBpbmNvbWluZyBjYWxsIG9udG8gZWFjaCBlbGVtZW50IGluZGl2aWR1YWxseS5cclxuICAgICAgLSBQcmUtUXVldWVpbmc6IFByZXBhcmUgdGhlIGVsZW1lbnQgZm9yIGFuaW1hdGlvbiBieSBpbnN0YW50aWF0aW5nIGl0cyBkYXRhIGNhY2hlIGFuZCBwcm9jZXNzaW5nIHRoZSBjYWxsJ3Mgb3B0aW9ucy5cclxuICAgICAgLSBRdWV1ZWluZzogVGhlIGxvZ2ljIHRoYXQgcnVucyBvbmNlIHRoZSBjYWxsIGhhcyByZWFjaGVkIGl0cyBwb2ludCBvZiBleGVjdXRpb24gaW4gdGhlIGVsZW1lbnQncyAkLnF1ZXVlKCkgc3RhY2suXHJcbiAgICAgICAgICAgICAgICAgIE1vc3QgbG9naWMgaXMgcGxhY2VkIGhlcmUgdG8gYXZvaWQgcmlza2luZyBpdCBiZWNvbWluZyBzdGFsZSAoaWYgdGhlIGVsZW1lbnQncyBwcm9wZXJ0aWVzIGhhdmUgY2hhbmdlZCkuXHJcbiAgICAgIC0gUHVzaGluZzogQ29uc29saWRhdGlvbiBvZiB0aGUgdHdlZW4gZGF0YSBmb2xsb3dlZCBieSBpdHMgcHVzaCBvbnRvIHRoZSBnbG9iYWwgaW4tcHJvZ3Jlc3MgY2FsbHMgY29udGFpbmVyLlxyXG4gICAgLSB0aWNrKCk6IFRoZSBzaW5nbGUgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGxvb3AgcmVzcG9uc2libGUgZm9yIHR3ZWVuaW5nIGFsbCBpbi1wcm9ncmVzcyBjYWxscy5cclxuICAgIC0gY29tcGxldGVDYWxsKCk6IEhhbmRsZXMgdGhlIGNsZWFudXAgcHJvY2VzcyBmb3IgZWFjaCBWZWxvY2l0eSBjYWxsLlxyXG4gICAgKi9cclxuXHJcbiAgICAvKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICBIZWxwZXIgRnVuY3Rpb25zXHJcbiAgICAqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgLyogSUUgZGV0ZWN0aW9uLiBHaXN0OiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9qdWxpYW5zaGFwaXJvLzkwOTg2MDkgKi9cclxuICAgIHZhciBJRSA9IChmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRNb2RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5kb2N1bWVudE1vZGU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDc7IGkgPiA0OyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBcIjwhLS1baWYgSUUgXCIgKyBpICsgXCJdPjxzcGFuPjwvc3Bhbj48IVtlbmRpZl0tLT5cIjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic3BhblwiKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXYgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH0pKCk7XHJcblxyXG4gICAgLyogckFGIHNoaW0uIEdpc3Q6IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2p1bGlhbnNoYXBpcm8vOTQ5NzUxMyAqL1xyXG4gICAgdmFyIHJBRlNoaW0gPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHRpbWVMYXN0ID0gMDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgICAgICAgICB2YXIgdGltZUN1cnJlbnQgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpLFxyXG4gICAgICAgICAgICAgICAgdGltZURlbHRhO1xyXG5cclxuICAgICAgICAgICAgLyogRHluYW1pY2FsbHkgc2V0IGRlbGF5IG9uIGEgcGVyLXRpY2sgYmFzaXMgdG8gbWF0Y2ggNjBmcHMuICovXHJcbiAgICAgICAgICAgIC8qIFRlY2huaXF1ZSBieSBFcmlrIE1vbGxlci4gTUlUIGxpY2Vuc2U6IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3BhdWxpcmlzaC8xNTc5NjcxICovXHJcbiAgICAgICAgICAgIHRpbWVEZWx0YSA9IE1hdGgubWF4KDAsIDE2IC0gKHRpbWVDdXJyZW50IC0gdGltZUxhc3QpKTtcclxuICAgICAgICAgICAgdGltZUxhc3QgPSB0aW1lQ3VycmVudCArIHRpbWVEZWx0YTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBjYWxsYmFjayh0aW1lQ3VycmVudCArIHRpbWVEZWx0YSk7IH0sIHRpbWVEZWx0YSk7XHJcbiAgICAgICAgfTtcclxuICAgIH0pKCk7XHJcblxyXG4gICAgLyogQXJyYXkgY29tcGFjdGluZy4gQ29weXJpZ2h0IExvLURhc2guIE1JVCBMaWNlbnNlOiBodHRwczovL2dpdGh1Yi5jb20vbG9kYXNoL2xvZGFzaC9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dCAqL1xyXG4gICAgZnVuY3Rpb24gY29tcGFjdFNwYXJzZUFycmF5IChhcnJheSkge1xyXG4gICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDAsXHJcbiAgICAgICAgICAgIHJlc3VsdCA9IFtdO1xyXG5cclxuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBhcnJheVtpbmRleF07XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzYW5pdGl6ZUVsZW1lbnRzIChlbGVtZW50cykge1xyXG4gICAgICAgIC8qIFVud3JhcCBqUXVlcnkvWmVwdG8gb2JqZWN0cy4gKi9cclxuICAgICAgICBpZiAoVHlwZS5pc1dyYXBwZWQoZWxlbWVudHMpKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnRzID0gW10uc2xpY2UuY2FsbChlbGVtZW50cyk7XHJcbiAgICAgICAgLyogV3JhcCBhIHNpbmdsZSBlbGVtZW50IGluIGFuIGFycmF5IHNvIHRoYXQgJC5lYWNoKCkgY2FuIGl0ZXJhdGUgd2l0aCB0aGUgZWxlbWVudCBpbnN0ZWFkIG9mIGl0cyBub2RlJ3MgY2hpbGRyZW4uICovXHJcbiAgICAgICAgfSBlbHNlIGlmIChUeXBlLmlzTm9kZShlbGVtZW50cykpIHtcclxuICAgICAgICAgICAgZWxlbWVudHMgPSBbIGVsZW1lbnRzIF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZWxlbWVudHM7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIFR5cGUgPSB7XHJcbiAgICAgICAgaXNTdHJpbmc6IGZ1bmN0aW9uICh2YXJpYWJsZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKHR5cGVvZiB2YXJpYWJsZSA9PT0gXCJzdHJpbmdcIik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpc0FycmF5OiBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uICh2YXJpYWJsZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhcmlhYmxlKSA9PT0gXCJbb2JqZWN0IEFycmF5XVwiO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaXNGdW5jdGlvbjogZnVuY3Rpb24gKHZhcmlhYmxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFyaWFibGUpID09PSBcIltvYmplY3QgRnVuY3Rpb25dXCI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpc05vZGU6IGZ1bmN0aW9uICh2YXJpYWJsZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFyaWFibGUgJiYgdmFyaWFibGUubm9kZVR5cGU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAvKiBDb3B5cmlnaHQgTWFydGluIEJvaG0uIE1JVCBMaWNlbnNlOiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9Ub21hbGFrLzgxOGE3OGEyMjZhMDczOGVhYWRlICovXHJcbiAgICAgICAgaXNOb2RlTGlzdDogZnVuY3Rpb24gKHZhcmlhYmxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgdmFyaWFibGUgPT09IFwib2JqZWN0XCIgJiZcclxuICAgICAgICAgICAgICAgIC9eXFxbb2JqZWN0IChIVE1MQ29sbGVjdGlvbnxOb2RlTGlzdHxPYmplY3QpXFxdJC8udGVzdChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFyaWFibGUpKSAmJlxyXG4gICAgICAgICAgICAgICAgdmFyaWFibGUubGVuZ3RoICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgICAgICh2YXJpYWJsZS5sZW5ndGggPT09IDAgfHwgKHR5cGVvZiB2YXJpYWJsZVswXSA9PT0gXCJvYmplY3RcIiAmJiB2YXJpYWJsZVswXS5ub2RlVHlwZSA+IDApKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8qIERldGVybWluZSBpZiB2YXJpYWJsZSBpcyBhIHdyYXBwZWQgalF1ZXJ5IG9yIFplcHRvIGVsZW1lbnQuICovXHJcbiAgICAgICAgaXNXcmFwcGVkOiBmdW5jdGlvbiAodmFyaWFibGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhcmlhYmxlICYmICh2YXJpYWJsZS5qcXVlcnkgfHwgKHdpbmRvdy5aZXB0byAmJiB3aW5kb3cuWmVwdG8uemVwdG8uaXNaKHZhcmlhYmxlKSkpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaXNTVkc6IGZ1bmN0aW9uICh2YXJpYWJsZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gd2luZG93LlNWR0VsZW1lbnQgJiYgKHZhcmlhYmxlIGluc3RhbmNlb2Ygd2luZG93LlNWR0VsZW1lbnQpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaXNFbXB0eU9iamVjdDogZnVuY3Rpb24gKHZhcmlhYmxlKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gdmFyaWFibGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKioqKioqKioqKioqKioqKipcclxuICAgICAgIERlcGVuZGVuY2llc1xyXG4gICAgKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgdmFyICQsXHJcbiAgICAgICAgaXNKUXVlcnkgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAoZ2xvYmFsLmZuICYmIGdsb2JhbC5mbi5qcXVlcnkpIHtcclxuICAgICAgICAkID0gZ2xvYmFsO1xyXG4gICAgICAgIGlzSlF1ZXJ5ID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCA9IHdpbmRvdy5WZWxvY2l0eS5VdGlsaXRpZXM7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKElFIDw9IDggJiYgIWlzSlF1ZXJ5KSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmVsb2NpdHk6IElFOCBhbmQgYmVsb3cgcmVxdWlyZSBqUXVlcnkgdG8gYmUgbG9hZGVkIGJlZm9yZSBWZWxvY2l0eS5cIik7XHJcbiAgICB9IGVsc2UgaWYgKElFIDw9IDcpIHtcclxuICAgICAgICAvKiBSZXZlcnQgdG8galF1ZXJ5J3MgJC5hbmltYXRlKCksIGFuZCBsb3NlIFZlbG9jaXR5J3MgZXh0cmEgZmVhdHVyZXMuICovXHJcbiAgICAgICAgalF1ZXJ5LmZuLnZlbG9jaXR5ID0galF1ZXJ5LmZuLmFuaW1hdGU7XHJcblxyXG4gICAgICAgIC8qIE5vdyB0aGF0ICQuZm4udmVsb2NpdHkgaXMgYWxpYXNlZCwgYWJvcnQgdGhpcyBWZWxvY2l0eSBkZWNsYXJhdGlvbi4gKi9cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgQ29uc3RhbnRzXHJcbiAgICAqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICB2YXIgRFVSQVRJT05fREVGQVVMVCA9IDQwMCxcclxuICAgICAgICBFQVNJTkdfREVGQVVMVCA9IFwic3dpbmdcIjtcclxuXHJcbiAgICAvKioqKioqKioqKioqKlxyXG4gICAgICAgIFN0YXRlXHJcbiAgICAqKioqKioqKioqKioqL1xyXG5cclxuICAgIC8qIE5vdGU6IFRoZSBnbG9iYWwgb2JqZWN0IGFsc28gZG91YmxlcyBhcyBhIHB1YmxpY2x5LWFjY2Vzc2libGUgZGF0YSBzdG9yZSBmb3IgdGhlIHB1cnBvc2VzIG9mIHVuaXQgdGVzdGluZy4gKi9cclxuICAgIC8qIE5vdGU6IEFsaWFzIHRoZSBsb3dlcmNhc2UgYW5kIHVwcGVyY2FzZSB2YXJpYW50cyBvZiBcInZlbG9jaXR5XCIgdG8gbWluaW1pemUgdXNlciBjb25mdXNpb24gZHVlIHRvIHRoZSBsb3dlcmNhc2UgbmF0dXJlIG9mIHRoZSAkLmZuIGV4dGVuc2lvbi4gKi9cclxuICAgIHZhciBWZWxvY2l0eSA9IHtcclxuICAgICAgICAvKiBDb250YWluZXIgZm9yIHBhZ2Utd2lkZSBWZWxvY2l0eSBzdGF0ZSBkYXRhLiAqL1xyXG4gICAgICAgIFN0YXRlOiB7XHJcbiAgICAgICAgICAgIC8qIERldGVjdCBtb2JpbGUgZGV2aWNlcyB0byBkZXRlcm1pbmUgaWYgbW9iaWxlSEEgc2hvdWxkIGJlIHR1cm5lZCBvbi4gKi9cclxuICAgICAgICAgICAgaXNNb2JpbGU6IC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxcclxuICAgICAgICAgICAgLyogVGhlIG1vYmlsZUhBIG9wdGlvbidzIGJlaGF2aW9yIGNoYW5nZXMgb24gb2xkZXIgQW5kcm9pZCBkZXZpY2VzIChHaW5nZXJicmVhZCwgdmVyc2lvbnMgMi4zLjMtMi4zLjcpLiAqL1xyXG4gICAgICAgICAgICBpc0FuZHJvaWQ6IC9BbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxcclxuICAgICAgICAgICAgaXNHaW5nZXJicmVhZDogL0FuZHJvaWQgMlxcLjNcXC5bMy03XS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksXHJcbiAgICAgICAgICAgIGlzQ2hyb21lOiB3aW5kb3cuY2hyb21lLFxyXG4gICAgICAgICAgICBpc0ZpcmVmb3g6IC9GaXJlZm94L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxcclxuICAgICAgICAgICAgLyogQ3JlYXRlIGEgY2FjaGVkIGVsZW1lbnQgZm9yIHJlLXVzZSB3aGVuIGNoZWNraW5nIGZvciBDU1MgcHJvcGVydHkgcHJlZml4ZXMuICovXHJcbiAgICAgICAgICAgIHByZWZpeEVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXHJcbiAgICAgICAgICAgIC8qIENhY2hlIGV2ZXJ5IHByZWZpeCBtYXRjaCB0byBhdm9pZCByZXBlYXRpbmcgbG9va3Vwcy4gKi9cclxuICAgICAgICAgICAgcHJlZml4TWF0Y2hlczoge30sXHJcbiAgICAgICAgICAgIC8qIENhY2hlIHRoZSBhbmNob3IgdXNlZCBmb3IgYW5pbWF0aW5nIHdpbmRvdyBzY3JvbGxpbmcuICovXHJcbiAgICAgICAgICAgIHNjcm9sbEFuY2hvcjogbnVsbCxcclxuICAgICAgICAgICAgLyogQ2FjaGUgdGhlIHByb3BlcnR5IG5hbWVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgc2Nyb2xsIGFuY2hvci4gKi9cclxuICAgICAgICAgICAgc2Nyb2xsUHJvcGVydHlMZWZ0OiBudWxsLFxyXG4gICAgICAgICAgICBzY3JvbGxQcm9wZXJ0eVRvcDogbnVsbCxcclxuICAgICAgICAgICAgLyogS2VlcCB0cmFjayBvZiB3aGV0aGVyIG91ciBSQUYgdGljayBpcyBydW5uaW5nLiAqL1xyXG4gICAgICAgICAgICBpc1RpY2tpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAvKiBDb250YWluZXIgZm9yIGV2ZXJ5IGluLXByb2dyZXNzIGNhbGwgdG8gVmVsb2NpdHkuICovXHJcbiAgICAgICAgICAgIGNhbGxzOiBbXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLyogVmVsb2NpdHkncyBjdXN0b20gQ1NTIHN0YWNrLiBNYWRlIGdsb2JhbCBmb3IgdW5pdCB0ZXN0aW5nLiAqL1xyXG4gICAgICAgIENTUzogeyAvKiBEZWZpbmVkIGJlbG93LiAqLyB9LFxyXG4gICAgICAgIC8qIERlZmluZWQgYnkgVmVsb2NpdHkncyBvcHRpb25hbCBqUXVlcnkgc2hpbS4gKi9cclxuICAgICAgICBVdGlsaXRpZXM6ICQsXHJcbiAgICAgICAgLyogQ29udGFpbmVyIGZvciB0aGUgdXNlcidzIGN1c3RvbSBhbmltYXRpb24gcmVkaXJlY3RzIHRoYXQgYXJlIHJlZmVyZW5jZWQgYnkgbmFtZSBpbiBwbGFjZSBvZiBhIHByb3BlcnRpZXMgbWFwIG9iamVjdC4gKi9cclxuICAgICAgICBSZWRpcmVjdHM6IHsgLyogTWFudWFsbHkgcmVnaXN0ZXJlZCBieSB0aGUgdXNlci4gKi8gfSxcclxuICAgICAgICBFYXNpbmdzOiB7IC8qIERlZmluZWQgYmVsb3cuICovIH0sXHJcbiAgICAgICAgLyogQXR0ZW1wdCB0byB1c2UgRVM2IFByb21pc2VzIGJ5IGRlZmF1bHQuIFVzZXJzIGNhbiBvdmVycmlkZSB0aGlzIHdpdGggYSB0aGlyZC1wYXJ0eSBwcm9taXNlcyBsaWJyYXJ5LiAqL1xyXG4gICAgICAgIFByb21pc2U6IHdpbmRvdy5Qcm9taXNlLFxyXG4gICAgICAgIC8qIFBhZ2Utd2lkZSBvcHRpb24gZGVmYXVsdHMsIHdoaWNoIGNhbiBiZSBvdmVycmlkZW4gYnkgdGhlIHVzZXIuICovXHJcbiAgICAgICAgZGVmYXVsdHM6IHtcclxuICAgICAgICAgICAgcXVldWU6IFwiXCIsXHJcbiAgICAgICAgICAgIGR1cmF0aW9uOiBEVVJBVElPTl9ERUZBVUxULFxyXG4gICAgICAgICAgICBlYXNpbmc6IEVBU0lOR19ERUZBVUxULFxyXG4gICAgICAgICAgICBiZWdpbjogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBjb21wbGV0ZTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBwcm9ncmVzczogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBkaXNwbGF5OiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHZpc2liaWxpdHk6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgbG9vcDogZmFsc2UsXHJcbiAgICAgICAgICAgIGRlbGF5OiBmYWxzZSxcclxuICAgICAgICAgICAgbW9iaWxlSEE6IHRydWUsXHJcbiAgICAgICAgICAgIC8qIFNldCB0byBmYWxzZSB0byBwcmV2ZW50IHByb3BlcnR5IHZhbHVlcyBmcm9tIGJlaW5nIGNhY2hlZCBiZXR3ZWVuIGNvbnNlY3V0aXZlIFZlbG9jaXR5LWluaXRpYXRlZCBjaGFpbiBjYWxscy4gKi9cclxuICAgICAgICAgICAgX2NhY2hlVmFsdWVzOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICAvKiBBIGRlc2lnbiBnb2FsIG9mIFZlbG9jaXR5IGlzIHRvIGNhY2hlIGRhdGEgd2hlcmV2ZXIgcG9zc2libGUgaW4gb3JkZXIgdG8gYXZvaWQgRE9NIHJlcXVlcnlpbmcuXHJcbiAgICAgICAgICAgQWNjb3JkaW5nbHksIGVhY2ggZWxlbWVudCBoYXMgYSBkYXRhIGNhY2hlIGluc3RhbnRpYXRlZCBvbiBpdC4gKi9cclxuICAgICAgICBpbml0OiBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAkLmRhdGEoZWxlbWVudCwgXCJ2ZWxvY2l0eVwiLCB7XHJcbiAgICAgICAgICAgICAgICAvKiBTdG9yZSB3aGV0aGVyIHRoaXMgaXMgYW4gU1ZHIGVsZW1lbnQsIHNpbmNlIGl0cyBwcm9wZXJ0aWVzIGFyZSByZXRyaWV2ZWQgYW5kIHVwZGF0ZWQgZGlmZmVyZW50bHkgdGhhbiBzdGFuZGFyZCBIVE1MIGVsZW1lbnRzLiAqL1xyXG4gICAgICAgICAgICAgICAgaXNTVkc6IFR5cGUuaXNTVkcoZWxlbWVudCksXHJcbiAgICAgICAgICAgICAgICAvKiBLZWVwIHRyYWNrIG9mIHdoZXRoZXIgdGhlIGVsZW1lbnQgaXMgY3VycmVudGx5IGJlaW5nIGFuaW1hdGVkIGJ5IFZlbG9jaXR5LlxyXG4gICAgICAgICAgICAgICAgICAgVGhpcyBpcyB1c2VkIHRvIGVuc3VyZSB0aGF0IHByb3BlcnR5IHZhbHVlcyBhcmUgbm90IHRyYW5zZmVycmVkIGJldHdlZW4gbm9uLWNvbnNlY3V0aXZlIChzdGFsZSkgY2FsbHMuICovXHJcbiAgICAgICAgICAgICAgICBpc0FuaW1hdGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAvKiBBIHJlZmVyZW5jZSB0byB0aGUgZWxlbWVudCdzIGxpdmUgY29tcHV0ZWRTdHlsZSBvYmplY3QuIExlYXJuIG1vcmUgaGVyZTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvQVBJL3dpbmRvdy5nZXRDb21wdXRlZFN0eWxlICovXHJcbiAgICAgICAgICAgICAgICBjb21wdXRlZFN0eWxlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgLyogVHdlZW4gZGF0YSBpcyBjYWNoZWQgZm9yIGVhY2ggYW5pbWF0aW9uIG9uIHRoZSBlbGVtZW50IHNvIHRoYXQgZGF0YSBjYW4gYmUgcGFzc2VkIGFjcm9zcyBjYWxscyAtLVxyXG4gICAgICAgICAgICAgICAgICAgaW4gcGFydGljdWxhciwgZW5kIHZhbHVlcyBhcmUgdXNlZCBhcyBzdWJzZXF1ZW50IHN0YXJ0IHZhbHVlcyBpbiBjb25zZWN1dGl2ZSBWZWxvY2l0eSBjYWxscy4gKi9cclxuICAgICAgICAgICAgICAgIHR3ZWVuc0NvbnRhaW5lcjogbnVsbCxcclxuICAgICAgICAgICAgICAgIC8qIFRoZSBmdWxsIHJvb3QgcHJvcGVydHkgdmFsdWVzIG9mIGVhY2ggQ1NTIGhvb2sgYmVpbmcgYW5pbWF0ZWQgb24gdGhpcyBlbGVtZW50IGFyZSBjYWNoZWQgc28gdGhhdDpcclxuICAgICAgICAgICAgICAgICAgIDEpIENvbmN1cnJlbnRseS1hbmltYXRpbmcgaG9va3Mgc2hhcmluZyB0aGUgc2FtZSByb290IGNhbiBoYXZlIHRoZWlyIHJvb3QgdmFsdWVzJyBtZXJnZWQgaW50byBvbmUgd2hpbGUgdHdlZW5pbmcuXHJcbiAgICAgICAgICAgICAgICAgICAyKSBQb3N0LWhvb2staW5qZWN0aW9uIHJvb3QgdmFsdWVzIGNhbiBiZSB0cmFuc2ZlcnJlZCBvdmVyIHRvIGNvbnNlY3V0aXZlbHkgY2hhaW5lZCBWZWxvY2l0eSBjYWxscyBhcyBzdGFydGluZyByb290IHZhbHVlcy4gKi9cclxuICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlQ2FjaGU6IHt9LFxyXG4gICAgICAgICAgICAgICAgLyogQSBjYWNoZSBmb3IgdHJhbnNmb3JtIHVwZGF0ZXMsIHdoaWNoIG11c3QgYmUgbWFudWFsbHkgZmx1c2hlZCB2aWEgQ1NTLmZsdXNoVHJhbnNmb3JtQ2FjaGUoKS4gKi9cclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybUNhY2hlOiB7fVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8qIEEgcGFyYWxsZWwgdG8galF1ZXJ5J3MgJC5jc3MoKSwgdXNlZCBmb3IgZ2V0dGluZy9zZXR0aW5nIFZlbG9jaXR5J3MgaG9va2VkIENTUyBwcm9wZXJ0aWVzLiAqL1xyXG4gICAgICAgIGhvb2s6IG51bGwsIC8qIERlZmluZWQgYmVsb3cuICovXHJcbiAgICAgICAgLyogVmVsb2NpdHktd2lkZSBhbmltYXRpb24gdGltZSByZW1hcHBpbmcgZm9yIHRlc3RpbmcgcHVycG9zZXMuICovXHJcbiAgICAgICAgbW9jazogZmFsc2UsXHJcbiAgICAgICAgdmVyc2lvbjogeyBtYWpvcjogMSwgbWlub3I6IDEsIHBhdGNoOiAwIH0sXHJcbiAgICAgICAgLyogU2V0IHRvIDEgb3IgMiAobW9zdCB2ZXJib3NlKSB0byBvdXRwdXQgZGVidWcgaW5mbyB0byBjb25zb2xlLiAqL1xyXG4gICAgICAgIGRlYnVnOiBmYWxzZVxyXG4gICAgfTtcclxuXHJcbiAgICAvKiBSZXRyaWV2ZSB0aGUgYXBwcm9wcmlhdGUgc2Nyb2xsIGFuY2hvciBhbmQgcHJvcGVydHkgbmFtZSBmb3IgdGhlIGJyb3dzZXI6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XaW5kb3cuc2Nyb2xsWSAqL1xyXG4gICAgaWYgKHdpbmRvdy5wYWdlWU9mZnNldCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgVmVsb2NpdHkuU3RhdGUuc2Nyb2xsQW5jaG9yID0gd2luZG93O1xyXG4gICAgICAgIFZlbG9jaXR5LlN0YXRlLnNjcm9sbFByb3BlcnR5TGVmdCA9IFwicGFnZVhPZmZzZXRcIjtcclxuICAgICAgICBWZWxvY2l0eS5TdGF0ZS5zY3JvbGxQcm9wZXJ0eVRvcCA9IFwicGFnZVlPZmZzZXRcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgVmVsb2NpdHkuU3RhdGUuc2Nyb2xsQW5jaG9yID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZSB8fCBkb2N1bWVudC5ib2R5O1xyXG4gICAgICAgIFZlbG9jaXR5LlN0YXRlLnNjcm9sbFByb3BlcnR5TGVmdCA9IFwic2Nyb2xsTGVmdFwiO1xyXG4gICAgICAgIFZlbG9jaXR5LlN0YXRlLnNjcm9sbFByb3BlcnR5VG9wID0gXCJzY3JvbGxUb3BcIjtcclxuICAgIH1cclxuXHJcbiAgICAvKiBTaG9ydGhhbmQgYWxpYXMgZm9yIGpRdWVyeSdzICQuZGF0YSgpIHV0aWxpdHkuICovXHJcbiAgICBmdW5jdGlvbiBEYXRhIChlbGVtZW50KSB7XHJcbiAgICAgICAgLyogSGFyZGNvZGUgYSByZWZlcmVuY2UgdG8gdGhlIHBsdWdpbiBuYW1lLiAqL1xyXG4gICAgICAgIHZhciByZXNwb25zZSA9ICQuZGF0YShlbGVtZW50LCBcInZlbG9jaXR5XCIpO1xyXG5cclxuICAgICAgICAvKiBqUXVlcnkgPD0xLjQuMiByZXR1cm5zIG51bGwgaW5zdGVhZCBvZiB1bmRlZmluZWQgd2hlbiBubyBtYXRjaCBpcyBmb3VuZC4gV2Ugbm9ybWFsaXplIHRoaXMgYmVoYXZpb3IuICovXHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlID09PSBudWxsID8gdW5kZWZpbmVkIDogcmVzcG9uc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKioqKioqKioqKioqKlxyXG4gICAgICAgIEVhc2luZ1xyXG4gICAgKioqKioqKioqKioqKiovXHJcblxyXG4gICAgLyogU3RlcCBlYXNpbmcgZ2VuZXJhdG9yLiAqL1xyXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVTdGVwIChzdGVwcykge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChwICogc3RlcHMpICogKDEgLyBzdGVwcyk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKiBCZXppZXIgY3VydmUgZnVuY3Rpb24gZ2VuZXJhdG9yLiBDb3B5cmlnaHQgR2FldGFuIFJlbmF1ZGVhdS4gTUlUIExpY2Vuc2U6IGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTUlUX0xpY2Vuc2UgKi9cclxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlQmV6aWVyIChtWDEsIG1ZMSwgbVgyLCBtWTIpIHtcclxuICAgICAgICB2YXIgTkVXVE9OX0lURVJBVElPTlMgPSA0LFxyXG4gICAgICAgICAgICBORVdUT05fTUlOX1NMT1BFID0gMC4wMDEsXHJcbiAgICAgICAgICAgIFNVQkRJVklTSU9OX1BSRUNJU0lPTiA9IDAuMDAwMDAwMSxcclxuICAgICAgICAgICAgU1VCRElWSVNJT05fTUFYX0lURVJBVElPTlMgPSAxMCxcclxuICAgICAgICAgICAga1NwbGluZVRhYmxlU2l6ZSA9IDExLFxyXG4gICAgICAgICAgICBrU2FtcGxlU3RlcFNpemUgPSAxLjAgLyAoa1NwbGluZVRhYmxlU2l6ZSAtIDEuMCksXHJcbiAgICAgICAgICAgIGZsb2F0MzJBcnJheVN1cHBvcnRlZCA9IFwiRmxvYXQzMkFycmF5XCIgaW4gd2luZG93O1xyXG5cclxuICAgICAgICAvKiBNdXN0IGNvbnRhaW4gZm91ciBhcmd1bWVudHMuICovXHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggIT09IDQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogQXJndW1lbnRzIG11c3QgYmUgbnVtYmVycy4gKi9cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7ICsraSkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1tpXSAhPT0gXCJudW1iZXJcIiB8fCBpc05hTihhcmd1bWVudHNbaV0pIHx8ICFpc0Zpbml0ZShhcmd1bWVudHNbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIFggdmFsdWVzIG11c3QgYmUgaW4gdGhlIFswLCAxXSByYW5nZS4gKi9cclxuICAgICAgICBtWDEgPSBNYXRoLm1pbihtWDEsIDEpO1xyXG4gICAgICAgIG1YMiA9IE1hdGgubWluKG1YMiwgMSk7XHJcbiAgICAgICAgbVgxID0gTWF0aC5tYXgobVgxLCAwKTtcclxuICAgICAgICBtWDIgPSBNYXRoLm1heChtWDIsIDApO1xyXG5cclxuICAgICAgICB2YXIgbVNhbXBsZVZhbHVlcyA9IGZsb2F0MzJBcnJheVN1cHBvcnRlZCA/IG5ldyBGbG9hdDMyQXJyYXkoa1NwbGluZVRhYmxlU2l6ZSkgOiBuZXcgQXJyYXkoa1NwbGluZVRhYmxlU2l6ZSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIEEgKGFBMSwgYUEyKSB7IHJldHVybiAxLjAgLSAzLjAgKiBhQTIgKyAzLjAgKiBhQTE7IH1cclxuICAgICAgICBmdW5jdGlvbiBCIChhQTEsIGFBMikgeyByZXR1cm4gMy4wICogYUEyIC0gNi4wICogYUExOyB9XHJcbiAgICAgICAgZnVuY3Rpb24gQyAoYUExKSAgICAgIHsgcmV0dXJuIDMuMCAqIGFBMTsgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjYWxjQmV6aWVyIChhVCwgYUExLCBhQTIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICgoQShhQTEsIGFBMikqYVQgKyBCKGFBMSwgYUEyKSkqYVQgKyBDKGFBMSkpKmFUO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0U2xvcGUgKGFULCBhQTEsIGFBMikge1xyXG4gICAgICAgICAgICByZXR1cm4gMy4wICogQShhQTEsIGFBMikqYVQqYVQgKyAyLjAgKiBCKGFBMSwgYUEyKSAqIGFUICsgQyhhQTEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbmV3dG9uUmFwaHNvbkl0ZXJhdGUgKGFYLCBhR3Vlc3NUKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTkVXVE9OX0lURVJBVElPTlM7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRTbG9wZSA9IGdldFNsb3BlKGFHdWVzc1QsIG1YMSwgbVgyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFNsb3BlID09PSAwLjApIHJldHVybiBhR3Vlc3NUO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50WCA9IGNhbGNCZXppZXIoYUd1ZXNzVCwgbVgxLCBtWDIpIC0gYVg7XHJcbiAgICAgICAgICAgICAgICBhR3Vlc3NUIC09IGN1cnJlbnRYIC8gY3VycmVudFNsb3BlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYUd1ZXNzVDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNhbGNTYW1wbGVWYWx1ZXMgKCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtTcGxpbmVUYWJsZVNpemU7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgbVNhbXBsZVZhbHVlc1tpXSA9IGNhbGNCZXppZXIoaSAqIGtTYW1wbGVTdGVwU2l6ZSwgbVgxLCBtWDIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBiaW5hcnlTdWJkaXZpZGUgKGFYLCBhQSwgYUIpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRYLCBjdXJyZW50VCwgaSA9IDA7XHJcblxyXG4gICAgICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50VCA9IGFBICsgKGFCIC0gYUEpIC8gMi4wO1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFggPSBjYWxjQmV6aWVyKGN1cnJlbnRULCBtWDEsIG1YMikgLSBhWDtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50WCA+IDAuMCkge1xyXG4gICAgICAgICAgICAgICAgICBhQiA9IGN1cnJlbnRUO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgYUEgPSBjdXJyZW50VDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSB3aGlsZSAoTWF0aC5hYnMoY3VycmVudFgpID4gU1VCRElWSVNJT05fUFJFQ0lTSU9OICYmICsraSA8IFNVQkRJVklTSU9OX01BWF9JVEVSQVRJT05TKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50VDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFRGb3JYIChhWCkge1xyXG4gICAgICAgICAgICB2YXIgaW50ZXJ2YWxTdGFydCA9IDAuMCxcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRTYW1wbGUgPSAxLFxyXG4gICAgICAgICAgICAgICAgbGFzdFNhbXBsZSA9IGtTcGxpbmVUYWJsZVNpemUgLSAxO1xyXG5cclxuICAgICAgICAgICAgZm9yICg7IGN1cnJlbnRTYW1wbGUgIT0gbGFzdFNhbXBsZSAmJiBtU2FtcGxlVmFsdWVzW2N1cnJlbnRTYW1wbGVdIDw9IGFYOyArK2N1cnJlbnRTYW1wbGUpIHtcclxuICAgICAgICAgICAgICAgIGludGVydmFsU3RhcnQgKz0ga1NhbXBsZVN0ZXBTaXplO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAtLWN1cnJlbnRTYW1wbGU7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGlzdCA9IChhWCAtIG1TYW1wbGVWYWx1ZXNbY3VycmVudFNhbXBsZV0pIC8gKG1TYW1wbGVWYWx1ZXNbY3VycmVudFNhbXBsZSsxXSAtIG1TYW1wbGVWYWx1ZXNbY3VycmVudFNhbXBsZV0pLFxyXG4gICAgICAgICAgICAgICAgZ3Vlc3NGb3JUID0gaW50ZXJ2YWxTdGFydCArIGRpc3QgKiBrU2FtcGxlU3RlcFNpemUsXHJcbiAgICAgICAgICAgICAgICBpbml0aWFsU2xvcGUgPSBnZXRTbG9wZShndWVzc0ZvclQsIG1YMSwgbVgyKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbml0aWFsU2xvcGUgPj0gTkVXVE9OX01JTl9TTE9QRSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld3RvblJhcGhzb25JdGVyYXRlKGFYLCBndWVzc0ZvclQpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGluaXRpYWxTbG9wZSA9PSAwLjApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBndWVzc0ZvclQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYmluYXJ5U3ViZGl2aWRlKGFYLCBpbnRlcnZhbFN0YXJ0LCBpbnRlcnZhbFN0YXJ0ICsga1NhbXBsZVN0ZXBTaXplKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIF9wcmVjb21wdXRlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBwcmVjb21wdXRlKCkge1xyXG4gICAgICAgICAgICBfcHJlY29tcHV0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAobVgxICE9IG1ZMSB8fCBtWDIgIT0gbVkyKSBjYWxjU2FtcGxlVmFsdWVzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZiA9IGZ1bmN0aW9uIChhWCkge1xyXG4gICAgICAgICAgICBpZiAoIV9wcmVjb21wdXRlZCkgcHJlY29tcHV0ZSgpO1xyXG4gICAgICAgICAgICBpZiAobVgxID09PSBtWTEgJiYgbVgyID09PSBtWTIpIHJldHVybiBhWDtcclxuICAgICAgICAgICAgaWYgKGFYID09PSAwKSByZXR1cm4gMDtcclxuICAgICAgICAgICAgaWYgKGFYID09PSAxKSByZXR1cm4gMTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjYWxjQmV6aWVyKGdldFRGb3JYKGFYKSwgbVkxLCBtWTIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGYuZ2V0Q29udHJvbFBvaW50cyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gW3sgeDogbVgxLCB5OiBtWTEgfSwgeyB4OiBtWDIsIHk6IG1ZMiB9XTsgfTtcclxuXHJcbiAgICAgICAgdmFyIHN0ciA9IFwiZ2VuZXJhdGVCZXppZXIoXCIgKyBbbVgxLCBtWTEsIG1YMiwgbVkyXSArIFwiKVwiO1xyXG4gICAgICAgIGYudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBzdHI7IH07XHJcblxyXG4gICAgICAgIHJldHVybiBmO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIFJ1bmdlLUt1dHRhIHNwcmluZyBwaHlzaWNzIGZ1bmN0aW9uIGdlbmVyYXRvci4gQWRhcHRlZCBmcm9tIEZyYW1lci5qcywgY29weXJpZ2h0IEtvZW4gQm9rLiBNSVQgTGljZW5zZTogaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9NSVRfTGljZW5zZSAqL1xyXG4gICAgLyogR2l2ZW4gYSB0ZW5zaW9uLCBmcmljdGlvbiwgYW5kIGR1cmF0aW9uLCBhIHNpbXVsYXRpb24gYXQgNjBGUFMgd2lsbCBmaXJzdCBydW4gd2l0aG91dCBhIGRlZmluZWQgZHVyYXRpb24gaW4gb3JkZXIgdG8gY2FsY3VsYXRlIHRoZSBmdWxsIHBhdGguIEEgc2Vjb25kIHBhc3NcclxuICAgICAgIHRoZW4gYWRqdXN0cyB0aGUgdGltZSBkZWx0YSAtLSB1c2luZyB0aGUgcmVsYXRpb24gYmV0d2VlbiBhY3R1YWwgdGltZSBhbmQgZHVyYXRpb24gLS0gdG8gY2FsY3VsYXRlIHRoZSBwYXRoIGZvciB0aGUgZHVyYXRpb24tY29uc3RyYWluZWQgYW5pbWF0aW9uLiAqL1xyXG4gICAgdmFyIGdlbmVyYXRlU3ByaW5nUks0ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmdW5jdGlvbiBzcHJpbmdBY2NlbGVyYXRpb25Gb3JTdGF0ZSAoc3RhdGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuICgtc3RhdGUudGVuc2lvbiAqIHN0YXRlLngpIC0gKHN0YXRlLmZyaWN0aW9uICogc3RhdGUudik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzcHJpbmdFdmFsdWF0ZVN0YXRlV2l0aERlcml2YXRpdmUgKGluaXRpYWxTdGF0ZSwgZHQsIGRlcml2YXRpdmUpIHtcclxuICAgICAgICAgICAgdmFyIHN0YXRlID0ge1xyXG4gICAgICAgICAgICAgICAgeDogaW5pdGlhbFN0YXRlLnggKyBkZXJpdmF0aXZlLmR4ICogZHQsXHJcbiAgICAgICAgICAgICAgICB2OiBpbml0aWFsU3RhdGUudiArIGRlcml2YXRpdmUuZHYgKiBkdCxcclxuICAgICAgICAgICAgICAgIHRlbnNpb246IGluaXRpYWxTdGF0ZS50ZW5zaW9uLFxyXG4gICAgICAgICAgICAgICAgZnJpY3Rpb246IGluaXRpYWxTdGF0ZS5mcmljdGlvblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHsgZHg6IHN0YXRlLnYsIGR2OiBzcHJpbmdBY2NlbGVyYXRpb25Gb3JTdGF0ZShzdGF0ZSkgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNwcmluZ0ludGVncmF0ZVN0YXRlIChzdGF0ZSwgZHQpIHtcclxuICAgICAgICAgICAgdmFyIGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHg6IHN0YXRlLnYsXHJcbiAgICAgICAgICAgICAgICAgICAgZHY6IHNwcmluZ0FjY2VsZXJhdGlvbkZvclN0YXRlKHN0YXRlKVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGIgPSBzcHJpbmdFdmFsdWF0ZVN0YXRlV2l0aERlcml2YXRpdmUoc3RhdGUsIGR0ICogMC41LCBhKSxcclxuICAgICAgICAgICAgICAgIGMgPSBzcHJpbmdFdmFsdWF0ZVN0YXRlV2l0aERlcml2YXRpdmUoc3RhdGUsIGR0ICogMC41LCBiKSxcclxuICAgICAgICAgICAgICAgIGQgPSBzcHJpbmdFdmFsdWF0ZVN0YXRlV2l0aERlcml2YXRpdmUoc3RhdGUsIGR0LCBjKSxcclxuICAgICAgICAgICAgICAgIGR4ZHQgPSAxLjAgLyA2LjAgKiAoYS5keCArIDIuMCAqIChiLmR4ICsgYy5keCkgKyBkLmR4KSxcclxuICAgICAgICAgICAgICAgIGR2ZHQgPSAxLjAgLyA2LjAgKiAoYS5kdiArIDIuMCAqIChiLmR2ICsgYy5kdikgKyBkLmR2KTtcclxuXHJcbiAgICAgICAgICAgIHN0YXRlLnggPSBzdGF0ZS54ICsgZHhkdCAqIGR0O1xyXG4gICAgICAgICAgICBzdGF0ZS52ID0gc3RhdGUudiArIGR2ZHQgKiBkdDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBzcHJpbmdSSzRGYWN0b3J5ICh0ZW5zaW9uLCBmcmljdGlvbiwgZHVyYXRpb24pIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbml0U3RhdGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogLTEsXHJcbiAgICAgICAgICAgICAgICAgICAgdjogMCxcclxuICAgICAgICAgICAgICAgICAgICB0ZW5zaW9uOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyaWN0aW9uOiBudWxsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IFswXSxcclxuICAgICAgICAgICAgICAgIHRpbWVfbGFwc2VkID0gMCxcclxuICAgICAgICAgICAgICAgIHRvbGVyYW5jZSA9IDEgLyAxMDAwMCxcclxuICAgICAgICAgICAgICAgIERUID0gMTYgLyAxMDAwLFxyXG4gICAgICAgICAgICAgICAgaGF2ZV9kdXJhdGlvbiwgZHQsIGxhc3Rfc3RhdGU7XHJcblxyXG4gICAgICAgICAgICB0ZW5zaW9uID0gcGFyc2VGbG9hdCh0ZW5zaW9uKSB8fCA1MDA7XHJcbiAgICAgICAgICAgIGZyaWN0aW9uID0gcGFyc2VGbG9hdChmcmljdGlvbikgfHwgMjA7XHJcbiAgICAgICAgICAgIGR1cmF0aW9uID0gZHVyYXRpb24gfHwgbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGluaXRTdGF0ZS50ZW5zaW9uID0gdGVuc2lvbjtcclxuICAgICAgICAgICAgaW5pdFN0YXRlLmZyaWN0aW9uID0gZnJpY3Rpb247XHJcblxyXG4gICAgICAgICAgICBoYXZlX2R1cmF0aW9uID0gZHVyYXRpb24gIT09IG51bGw7XHJcblxyXG4gICAgICAgICAgICAvKiBDYWxjdWxhdGUgdGhlIGFjdHVhbCB0aW1lIGl0IHRha2VzIGZvciB0aGlzIGFuaW1hdGlvbiB0byBjb21wbGV0ZSB3aXRoIHRoZSBwcm92aWRlZCBjb25kaXRpb25zLiAqL1xyXG4gICAgICAgICAgICBpZiAoaGF2ZV9kdXJhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgLyogUnVuIHRoZSBzaW11bGF0aW9uIHdpdGhvdXQgYSBkdXJhdGlvbi4gKi9cclxuICAgICAgICAgICAgICAgIHRpbWVfbGFwc2VkID0gc3ByaW5nUks0RmFjdG9yeSh0ZW5zaW9uLCBmcmljdGlvbik7XHJcbiAgICAgICAgICAgICAgICAvKiBDb21wdXRlIHRoZSBhZGp1c3RlZCB0aW1lIGRlbHRhLiAqL1xyXG4gICAgICAgICAgICAgICAgZHQgPSB0aW1lX2xhcHNlZCAvIGR1cmF0aW9uICogRFQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkdCA9IERUO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgLyogTmV4dC9zdGVwIGZ1bmN0aW9uIC4qL1xyXG4gICAgICAgICAgICAgICAgbGFzdF9zdGF0ZSA9IHNwcmluZ0ludGVncmF0ZVN0YXRlKGxhc3Rfc3RhdGUgfHwgaW5pdFN0YXRlLCBkdCk7XHJcbiAgICAgICAgICAgICAgICAvKiBTdG9yZSB0aGUgcG9zaXRpb24uICovXHJcbiAgICAgICAgICAgICAgICBwYXRoLnB1c2goMSArIGxhc3Rfc3RhdGUueCk7XHJcbiAgICAgICAgICAgICAgICB0aW1lX2xhcHNlZCArPSAxNjtcclxuICAgICAgICAgICAgICAgIC8qIElmIHRoZSBjaGFuZ2UgdGhyZXNob2xkIGlzIHJlYWNoZWQsIGJyZWFrLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKCEoTWF0aC5hYnMobGFzdF9zdGF0ZS54KSA+IHRvbGVyYW5jZSAmJiBNYXRoLmFicyhsYXN0X3N0YXRlLnYpID4gdG9sZXJhbmNlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBJZiBkdXJhdGlvbiBpcyBub3QgZGVmaW5lZCwgcmV0dXJuIHRoZSBhY3R1YWwgdGltZSByZXF1aXJlZCBmb3IgY29tcGxldGluZyB0aGlzIGFuaW1hdGlvbi4gT3RoZXJ3aXNlLCByZXR1cm4gYSBjbG9zdXJlIHRoYXQgaG9sZHMgdGhlXHJcbiAgICAgICAgICAgICAgIGNvbXB1dGVkIHBhdGggYW5kIHJldHVybnMgYSBzbmFwc2hvdCBvZiB0aGUgcG9zaXRpb24gYWNjb3JkaW5nIHRvIGEgZ2l2ZW4gcGVyY2VudENvbXBsZXRlLiAqL1xyXG4gICAgICAgICAgICByZXR1cm4gIWhhdmVfZHVyYXRpb24gPyB0aW1lX2xhcHNlZCA6IGZ1bmN0aW9uKHBlcmNlbnRDb21wbGV0ZSkgeyByZXR1cm4gcGF0aFsgKHBlcmNlbnRDb21wbGV0ZSAqIChwYXRoLmxlbmd0aCAtIDEpKSB8IDAgXTsgfTtcclxuICAgICAgICB9O1xyXG4gICAgfSgpKTtcclxuXHJcbiAgICAvKiBqUXVlcnkgZWFzaW5ncy4gKi9cclxuICAgIFZlbG9jaXR5LkVhc2luZ3MgPSB7XHJcbiAgICAgICAgbGluZWFyOiBmdW5jdGlvbihwKSB7IHJldHVybiBwOyB9LFxyXG4gICAgICAgIHN3aW5nOiBmdW5jdGlvbihwKSB7IHJldHVybiAwLjUgLSBNYXRoLmNvcyggcCAqIE1hdGguUEkgKSAvIDIgfSxcclxuICAgICAgICAvKiBCb251cyBcInNwcmluZ1wiIGVhc2luZywgd2hpY2ggaXMgYSBsZXNzIGV4YWdnZXJhdGVkIHZlcnNpb24gb2YgZWFzZUluT3V0RWxhc3RpYy4gKi9cclxuICAgICAgICBzcHJpbmc6IGZ1bmN0aW9uKHApIHsgcmV0dXJuIDEgLSAoTWF0aC5jb3MocCAqIDQuNSAqIE1hdGguUEkpICogTWF0aC5leHAoLXAgKiA2KSk7IH1cclxuICAgIH07XHJcblxyXG4gICAgLyogQ1NTMyBhbmQgUm9iZXJ0IFBlbm5lciBlYXNpbmdzLiAqL1xyXG4gICAgJC5lYWNoKFxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgWyBcImVhc2VcIiwgWyAwLjI1LCAwLjEsIDAuMjUsIDEuMCBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlLWluXCIsIFsgMC40MiwgMC4wLCAxLjAwLCAxLjAgXSBdLFxyXG4gICAgICAgICAgICBbIFwiZWFzZS1vdXRcIiwgWyAwLjAwLCAwLjAsIDAuNTgsIDEuMCBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlLWluLW91dFwiLCBbIDAuNDIsIDAuMCwgMC41OCwgMS4wIF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VJblNpbmVcIiwgWyAwLjQ3LCAwLCAwLjc0NSwgMC43MTUgXSBdLFxyXG4gICAgICAgICAgICBbIFwiZWFzZU91dFNpbmVcIiwgWyAwLjM5LCAwLjU3NSwgMC41NjUsIDEgXSBdLFxyXG4gICAgICAgICAgICBbIFwiZWFzZUluT3V0U2luZVwiLCBbIDAuNDQ1LCAwLjA1LCAwLjU1LCAwLjk1IF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VJblF1YWRcIiwgWyAwLjU1LCAwLjA4NSwgMC42OCwgMC41MyBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlT3V0UXVhZFwiLCBbIDAuMjUsIDAuNDYsIDAuNDUsIDAuOTQgXSBdLFxyXG4gICAgICAgICAgICBbIFwiZWFzZUluT3V0UXVhZFwiLCBbIDAuNDU1LCAwLjAzLCAwLjUxNSwgMC45NTUgXSBdLFxyXG4gICAgICAgICAgICBbIFwiZWFzZUluQ3ViaWNcIiwgWyAwLjU1LCAwLjA1NSwgMC42NzUsIDAuMTkgXSBdLFxyXG4gICAgICAgICAgICBbIFwiZWFzZU91dEN1YmljXCIsIFsgMC4yMTUsIDAuNjEsIDAuMzU1LCAxIF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VJbk91dEN1YmljXCIsIFsgMC42NDUsIDAuMDQ1LCAwLjM1NSwgMSBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlSW5RdWFydFwiLCBbIDAuODk1LCAwLjAzLCAwLjY4NSwgMC4yMiBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlT3V0UXVhcnRcIiwgWyAwLjE2NSwgMC44NCwgMC40NCwgMSBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlSW5PdXRRdWFydFwiLCBbIDAuNzcsIDAsIDAuMTc1LCAxIF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VJblF1aW50XCIsIFsgMC43NTUsIDAuMDUsIDAuODU1LCAwLjA2IF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VPdXRRdWludFwiLCBbIDAuMjMsIDEsIDAuMzIsIDEgXSBdLFxyXG4gICAgICAgICAgICBbIFwiZWFzZUluT3V0UXVpbnRcIiwgWyAwLjg2LCAwLCAwLjA3LCAxIF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VJbkV4cG9cIiwgWyAwLjk1LCAwLjA1LCAwLjc5NSwgMC4wMzUgXSBdLFxyXG4gICAgICAgICAgICBbIFwiZWFzZU91dEV4cG9cIiwgWyAwLjE5LCAxLCAwLjIyLCAxIF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VJbk91dEV4cG9cIiwgWyAxLCAwLCAwLCAxIF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VJbkNpcmNcIiwgWyAwLjYsIDAuMDQsIDAuOTgsIDAuMzM1IF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VPdXRDaXJjXCIsIFsgMC4wNzUsIDAuODIsIDAuMTY1LCAxIF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VJbk91dENpcmNcIiwgWyAwLjc4NSwgMC4xMzUsIDAuMTUsIDAuODYgXSBdXHJcbiAgICAgICAgXSwgZnVuY3Rpb24oaSwgZWFzaW5nQXJyYXkpIHtcclxuICAgICAgICAgICAgVmVsb2NpdHkuRWFzaW5nc1tlYXNpbmdBcnJheVswXV0gPSBnZW5lcmF0ZUJlemllci5hcHBseShudWxsLCBlYXNpbmdBcnJheVsxXSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLyogRGV0ZXJtaW5lIHRoZSBhcHByb3ByaWF0ZSBlYXNpbmcgdHlwZSBnaXZlbiBhbiBlYXNpbmcgaW5wdXQuICovXHJcbiAgICBmdW5jdGlvbiBnZXRFYXNpbmcodmFsdWUsIGR1cmF0aW9uKSB7XHJcbiAgICAgICAgdmFyIGVhc2luZyA9IHZhbHVlO1xyXG5cclxuICAgICAgICAvKiBUaGUgZWFzaW5nIG9wdGlvbiBjYW4gZWl0aGVyIGJlIGEgc3RyaW5nIHRoYXQgcmVmZXJlbmNlcyBhIHByZS1yZWdpc3RlcmVkIGVhc2luZyxcclxuICAgICAgICAgICBvciBpdCBjYW4gYmUgYSB0d28tL2ZvdXItaXRlbSBhcnJheSBvZiBpbnRlZ2VycyB0byBiZSBjb252ZXJ0ZWQgaW50byBhIGJlemllci9zcHJpbmcgZnVuY3Rpb24uICovXHJcbiAgICAgICAgaWYgKFR5cGUuaXNTdHJpbmcodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIC8qIEVuc3VyZSB0aGF0IHRoZSBlYXNpbmcgaGFzIGJlZW4gYXNzaWduZWQgdG8galF1ZXJ5J3MgVmVsb2NpdHkuRWFzaW5ncyBvYmplY3QuICovXHJcbiAgICAgICAgICAgIGlmICghVmVsb2NpdHkuRWFzaW5nc1t2YWx1ZV0pIHtcclxuICAgICAgICAgICAgICAgIGVhc2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChUeXBlLmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICBlYXNpbmcgPSBnZW5lcmF0ZVN0ZXAuYXBwbHkobnVsbCwgdmFsdWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoVHlwZS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAgICAgLyogc3ByaW5nUks0IG11c3QgYmUgcGFzc2VkIHRoZSBhbmltYXRpb24ncyBkdXJhdGlvbi4gKi9cclxuICAgICAgICAgICAgLyogTm90ZTogSWYgdGhlIHNwcmluZ1JLNCBhcnJheSBjb250YWlucyBub24tbnVtYmVycywgZ2VuZXJhdGVTcHJpbmdSSzQoKSByZXR1cm5zIGFuIGVhc2luZ1xyXG4gICAgICAgICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZWQgd2l0aCBkZWZhdWx0IHRlbnNpb24gYW5kIGZyaWN0aW9uIHZhbHVlcy4gKi9cclxuICAgICAgICAgICAgZWFzaW5nID0gZ2VuZXJhdGVTcHJpbmdSSzQuYXBwbHkobnVsbCwgdmFsdWUuY29uY2F0KFsgZHVyYXRpb24gXSkpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoVHlwZS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDQpIHtcclxuICAgICAgICAgICAgLyogTm90ZTogSWYgdGhlIGJlemllciBhcnJheSBjb250YWlucyBub24tbnVtYmVycywgZ2VuZXJhdGVCZXppZXIoKSByZXR1cm5zIGZhbHNlLiAqL1xyXG4gICAgICAgICAgICBlYXNpbmcgPSBnZW5lcmF0ZUJlemllci5hcHBseShudWxsLCB2YWx1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZWFzaW5nID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBSZXZlcnQgdG8gdGhlIFZlbG9jaXR5LXdpZGUgZGVmYXVsdCBlYXNpbmcgdHlwZSwgb3IgZmFsbCBiYWNrIHRvIFwic3dpbmdcIiAod2hpY2ggaXMgYWxzbyBqUXVlcnkncyBkZWZhdWx0KVxyXG4gICAgICAgICAgIGlmIHRoZSBWZWxvY2l0eS13aWRlIGRlZmF1bHQgaGFzIGJlZW4gaW5jb3JyZWN0bHkgbW9kaWZpZWQuICovXHJcbiAgICAgICAgaWYgKGVhc2luZyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgaWYgKFZlbG9jaXR5LkVhc2luZ3NbVmVsb2NpdHkuZGVmYXVsdHMuZWFzaW5nXSkge1xyXG4gICAgICAgICAgICAgICAgZWFzaW5nID0gVmVsb2NpdHkuZGVmYXVsdHMuZWFzaW5nO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZWFzaW5nID0gRUFTSU5HX0RFRkFVTFQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBlYXNpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgQ1NTIFN0YWNrXHJcbiAgICAqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAvKiBUaGUgQ1NTIG9iamVjdCBpcyBhIGhpZ2hseSBjb25kZW5zZWQgYW5kIHBlcmZvcm1hbnQgQ1NTIHN0YWNrIHRoYXQgZnVsbHkgcmVwbGFjZXMgalF1ZXJ5J3MuXHJcbiAgICAgICBJdCBoYW5kbGVzIHRoZSB2YWxpZGF0aW9uLCBnZXR0aW5nLCBhbmQgc2V0dGluZyBvZiBib3RoIHN0YW5kYXJkIENTUyBwcm9wZXJ0aWVzIGFuZCBDU1MgcHJvcGVydHkgaG9va3MuICovXHJcbiAgICAvKiBOb3RlOiBBIFwiQ1NTXCIgc2hvcnRoYW5kIGlzIGFsaWFzZWQgc28gdGhhdCBvdXIgY29kZSBpcyBlYXNpZXIgdG8gcmVhZC4gKi9cclxuICAgIHZhciBDU1MgPSBWZWxvY2l0eS5DU1MgPSB7XHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqXHJcbiAgICAgICAgICAgIFJlZ0V4XHJcbiAgICAgICAgKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgUmVnRXg6IHtcclxuICAgICAgICAgICAgaXNIZXg6IC9eIyhbQS1mXFxkXXszfSl7MSwyfSQvaSxcclxuICAgICAgICAgICAgLyogVW53cmFwIGEgcHJvcGVydHkgdmFsdWUncyBzdXJyb3VuZGluZyB0ZXh0LCBlLmcuIFwicmdiYSg0LCAzLCAyLCAxKVwiID09PiBcIjQsIDMsIDIsIDFcIiBhbmQgXCJyZWN0KDRweCAzcHggMnB4IDFweClcIiA9PT4gXCI0cHggM3B4IDJweCAxcHhcIi4gKi9cclxuICAgICAgICAgICAgdmFsdWVVbndyYXA6IC9eW0Etel0rXFwoKC4qKVxcKSQvaSxcclxuICAgICAgICAgICAgd3JhcHBlZFZhbHVlQWxyZWFkeUV4dHJhY3RlZDogL1swLTkuXSsgWzAtOS5dKyBbMC05Ll0rKCBbMC05Ll0rKT8vLFxyXG4gICAgICAgICAgICAvKiBTcGxpdCBhIG11bHRpLXZhbHVlIHByb3BlcnR5IGludG8gYW4gYXJyYXkgb2Ygc3VidmFsdWVzLCBlLmcuIFwicmdiYSg0LCAzLCAyLCAxKSA0cHggM3B4IDJweCAxcHhcIiA9PT4gWyBcInJnYmEoNCwgMywgMiwgMSlcIiwgXCI0cHhcIiwgXCIzcHhcIiwgXCIycHhcIiwgXCIxcHhcIiBdLiAqL1xyXG4gICAgICAgICAgICB2YWx1ZVNwbGl0OiAvKFtBLXpdK1xcKC4rXFwpKXwoKFtBLXowLTkjLS5dKz8pKD89XFxzfCQpKS9pZ1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKipcclxuICAgICAgICAgICAgTGlzdHNcclxuICAgICAgICAqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIExpc3RzOiB7XHJcbiAgICAgICAgICAgIGNvbG9yczogWyBcImZpbGxcIiwgXCJzdHJva2VcIiwgXCJzdG9wQ29sb3JcIiwgXCJjb2xvclwiLCBcImJhY2tncm91bmRDb2xvclwiLCBcImJvcmRlckNvbG9yXCIsIFwiYm9yZGVyVG9wQ29sb3JcIiwgXCJib3JkZXJSaWdodENvbG9yXCIsIFwiYm9yZGVyQm90dG9tQ29sb3JcIiwgXCJib3JkZXJMZWZ0Q29sb3JcIiwgXCJvdXRsaW5lQ29sb3JcIiBdLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1zQmFzZTogWyBcInRyYW5zbGF0ZVhcIiwgXCJ0cmFuc2xhdGVZXCIsIFwic2NhbGVcIiwgXCJzY2FsZVhcIiwgXCJzY2FsZVlcIiwgXCJza2V3WFwiLCBcInNrZXdZXCIsIFwicm90YXRlWlwiIF0sXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybXMzRDogWyBcInRyYW5zZm9ybVBlcnNwZWN0aXZlXCIsIFwidHJhbnNsYXRlWlwiLCBcInNjYWxlWlwiLCBcInJvdGF0ZVhcIiwgXCJyb3RhdGVZXCIgXVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKipcclxuICAgICAgICAgICAgSG9va3NcclxuICAgICAgICAqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIC8qIEhvb2tzIGFsbG93IGEgc3VicHJvcGVydHkgKGUuZy4gXCJib3hTaGFkb3dCbHVyXCIpIG9mIGEgY29tcG91bmQtdmFsdWUgQ1NTIHByb3BlcnR5XHJcbiAgICAgICAgICAgKGUuZy4gXCJib3hTaGFkb3c6IFggWSBCbHVyIFNwcmVhZCBDb2xvclwiKSB0byBiZSBhbmltYXRlZCBhcyBpZiBpdCB3ZXJlIGEgZGlzY3JldGUgcHJvcGVydHkuICovXHJcbiAgICAgICAgLyogTm90ZTogQmV5b25kIGVuYWJsaW5nIGZpbmUtZ3JhaW5lZCBwcm9wZXJ0eSBhbmltYXRpb24sIGhvb2tpbmcgaXMgbmVjZXNzYXJ5IHNpbmNlIFZlbG9jaXR5IG9ubHlcclxuICAgICAgICAgICB0d2VlbnMgcHJvcGVydGllcyB3aXRoIHNpbmdsZSBudW1lcmljIHZhbHVlczsgdW5saWtlIENTUyB0cmFuc2l0aW9ucywgVmVsb2NpdHkgZG9lcyBub3QgaW50ZXJwb2xhdGUgY29tcG91bmQtdmFsdWVzLiAqL1xyXG4gICAgICAgIEhvb2tzOiB7XHJcbiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgUmVnaXN0cmF0aW9uXHJcbiAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgLyogVGVtcGxhdGVzIGFyZSBhIGNvbmNpc2Ugd2F5IG9mIGluZGljYXRpbmcgd2hpY2ggc3VicHJvcGVydGllcyBtdXN0IGJlIGluZGl2aWR1YWxseSByZWdpc3RlcmVkIGZvciBlYWNoIGNvbXBvdW5kLXZhbHVlIENTUyBwcm9wZXJ0eS4gKi9cclxuICAgICAgICAgICAgLyogRWFjaCB0ZW1wbGF0ZSBjb25zaXN0cyBvZiB0aGUgY29tcG91bmQtdmFsdWUncyBiYXNlIG5hbWUsIGl0cyBjb25zdGl0dWVudCBzdWJwcm9wZXJ0eSBuYW1lcywgYW5kIHRob3NlIHN1YnByb3BlcnRpZXMnIGRlZmF1bHQgdmFsdWVzLiAqL1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZXM6IHtcclxuICAgICAgICAgICAgICAgIFwidGV4dFNoYWRvd1wiOiBbIFwiQ29sb3IgWCBZIEJsdXJcIiwgXCJibGFjayAwcHggMHB4IDBweFwiIF0sXHJcbiAgICAgICAgICAgICAgICAvKiBUb2RvOiBBZGQgc3VwcG9ydCBmb3IgaW5zZXQgYm94U2hhZG93cy4gKHdlYmtpdCBwbGFjZXMgaXQgbGFzdCB3aGVyZWFzIElFIHBsYWNlcyBpdCBmaXJzdC4pICovXHJcbiAgICAgICAgICAgICAgICBcImJveFNoYWRvd1wiOiBbIFwiQ29sb3IgWCBZIEJsdXIgU3ByZWFkXCIsIFwiYmxhY2sgMHB4IDBweCAwcHggMHB4XCIgXSxcclxuICAgICAgICAgICAgICAgIFwiY2xpcFwiOiBbIFwiVG9wIFJpZ2h0IEJvdHRvbSBMZWZ0XCIsIFwiMHB4IDBweCAwcHggMHB4XCIgXSxcclxuICAgICAgICAgICAgICAgIFwiYmFja2dyb3VuZFBvc2l0aW9uXCI6IFsgXCJYIFlcIiwgXCIwJSAwJVwiIF0sXHJcbiAgICAgICAgICAgICAgICBcInRyYW5zZm9ybU9yaWdpblwiOiBbIFwiWCBZIFpcIiwgXCI1MCUgNTAlIDBweFwiIF0sXHJcbiAgICAgICAgICAgICAgICBcInBlcnNwZWN0aXZlT3JpZ2luXCI6IFsgXCJYIFlcIiwgXCI1MCUgNTAlXCIgXVxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLyogQSBcInJlZ2lzdGVyZWRcIiBob29rIGlzIG9uZSB0aGF0IGhhcyBiZWVuIGNvbnZlcnRlZCBmcm9tIGl0cyB0ZW1wbGF0ZSBmb3JtIGludG8gYSBsaXZlLFxyXG4gICAgICAgICAgICAgICB0d2VlbmFibGUgcHJvcGVydHkuIEl0IGNvbnRhaW5zIGRhdGEgdG8gYXNzb2NpYXRlIGl0IHdpdGggaXRzIHJvb3QgcHJvcGVydHkuICovXHJcbiAgICAgICAgICAgIHJlZ2lzdGVyZWQ6IHtcclxuICAgICAgICAgICAgICAgIC8qIE5vdGU6IEEgcmVnaXN0ZXJlZCBob29rIGxvb2tzIGxpa2UgdGhpcyA9PT4gdGV4dFNoYWRvd0JsdXI6IFsgXCJ0ZXh0U2hhZG93XCIsIDMgXSxcclxuICAgICAgICAgICAgICAgICAgIHdoaWNoIGNvbnNpc3RzIG9mIHRoZSBzdWJwcm9wZXJ0eSdzIG5hbWUsIHRoZSBhc3NvY2lhdGVkIHJvb3QgcHJvcGVydHkncyBuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgYW5kIHRoZSBzdWJwcm9wZXJ0eSdzIHBvc2l0aW9uIGluIHRoZSByb290J3MgdmFsdWUuICovXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8qIENvbnZlcnQgdGhlIHRlbXBsYXRlcyBpbnRvIGluZGl2aWR1YWwgaG9va3MgdGhlbiBhcHBlbmQgdGhlbSB0byB0aGUgcmVnaXN0ZXJlZCBvYmplY3QgYWJvdmUuICovXHJcbiAgICAgICAgICAgIHJlZ2lzdGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBDb2xvciBob29rcyByZWdpc3RyYXRpb246IENvbG9ycyBhcmUgZGVmYXVsdGVkIHRvIHdoaXRlIC0tIGFzIG9wcG9zZWQgdG8gYmxhY2sgLS0gc2luY2UgY29sb3JzIHRoYXQgYXJlXHJcbiAgICAgICAgICAgICAgICAgICBjdXJyZW50bHkgc2V0IHRvIFwidHJhbnNwYXJlbnRcIiBkZWZhdWx0IHRvIHRoZWlyIHJlc3BlY3RpdmUgdGVtcGxhdGUgYmVsb3cgd2hlbiBjb2xvci1hbmltYXRlZCxcclxuICAgICAgICAgICAgICAgICAgIGFuZCB3aGl0ZSBpcyB0eXBpY2FsbHkgYSBjbG9zZXIgbWF0Y2ggdG8gdHJhbnNwYXJlbnQgdGhhbiBibGFjayBpcy4gQW4gZXhjZXB0aW9uIGlzIG1hZGUgZm9yIHRleHQgKFwiY29sb3JcIiksXHJcbiAgICAgICAgICAgICAgICAgICB3aGljaCBpcyBhbG1vc3QgYWx3YXlzIHNldCBjbG9zZXIgdG8gYmxhY2sgdGhhbiB3aGl0ZS4gKi9cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ1NTLkxpc3RzLmNvbG9ycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZ2JDb21wb25lbnRzID0gKENTUy5MaXN0cy5jb2xvcnNbaV0gPT09IFwiY29sb3JcIikgPyBcIjAgMCAwIDFcIiA6IFwiMjU1IDI1NSAyNTUgMVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIENTUy5Ib29rcy50ZW1wbGF0ZXNbQ1NTLkxpc3RzLmNvbG9yc1tpXV0gPSBbIFwiUmVkIEdyZWVuIEJsdWUgQWxwaGFcIiwgcmdiQ29tcG9uZW50cyBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciByb290UHJvcGVydHksXHJcbiAgICAgICAgICAgICAgICAgICAgaG9va1RlbXBsYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIGhvb2tOYW1lcztcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBJbiBJRSwgY29sb3IgdmFsdWVzIGluc2lkZSBjb21wb3VuZC12YWx1ZSBwcm9wZXJ0aWVzIGFyZSBwb3NpdGlvbmVkIGF0IHRoZSBlbmQgdGhlIHZhbHVlIGluc3RlYWQgb2YgYXQgdGhlIGJlZ2lubmluZy5cclxuICAgICAgICAgICAgICAgICAgIFRodXMsIHdlIHJlLWFycmFuZ2UgdGhlIHRlbXBsYXRlcyBhY2NvcmRpbmdseS4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChJRSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAocm9vdFByb3BlcnR5IGluIENTUy5Ib29rcy50ZW1wbGF0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG9va1RlbXBsYXRlID0gQ1NTLkhvb2tzLnRlbXBsYXRlc1tyb290UHJvcGVydHldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBob29rTmFtZXMgPSBob29rVGVtcGxhdGVbMF0uc3BsaXQoXCIgXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRWYWx1ZXMgPSBob29rVGVtcGxhdGVbMV0ubWF0Y2goQ1NTLlJlZ0V4LnZhbHVlU3BsaXQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhvb2tOYW1lc1swXSA9PT0gXCJDb2xvclwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBSZXBvc2l0aW9uIGJvdGggdGhlIGhvb2sncyBuYW1lIGFuZCBpdHMgZGVmYXVsdCB2YWx1ZSB0byB0aGUgZW5kIG9mIHRoZWlyIHJlc3BlY3RpdmUgc3RyaW5ncy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvb2tOYW1lcy5wdXNoKGhvb2tOYW1lcy5zaGlmdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZXMucHVzaChkZWZhdWx0VmFsdWVzLnNoaWZ0KCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJlcGxhY2UgdGhlIGV4aXN0aW5nIHRlbXBsYXRlIGZvciB0aGUgaG9vaydzIHJvb3QgcHJvcGVydHkuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDU1MuSG9va3MudGVtcGxhdGVzW3Jvb3RQcm9wZXJ0eV0gPSBbIGhvb2tOYW1lcy5qb2luKFwiIFwiKSwgZGVmYXVsdFZhbHVlcy5qb2luKFwiIFwiKSBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8qIEhvb2sgcmVnaXN0cmF0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgZm9yIChyb290UHJvcGVydHkgaW4gQ1NTLkhvb2tzLnRlbXBsYXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGhvb2tUZW1wbGF0ZSA9IENTUy5Ib29rcy50ZW1wbGF0ZXNbcm9vdFByb3BlcnR5XTtcclxuICAgICAgICAgICAgICAgICAgICBob29rTmFtZXMgPSBob29rVGVtcGxhdGVbMF0uc3BsaXQoXCIgXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIGhvb2tOYW1lcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnVsbEhvb2tOYW1lID0gcm9vdFByb3BlcnR5ICsgaG9va05hbWVzW2ldLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9va1Bvc2l0aW9uID0gaTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEZvciBlYWNoIGhvb2ssIHJlZ2lzdGVyIGl0cyBmdWxsIG5hbWUgKGUuZy4gdGV4dFNoYWRvd0JsdXIpIHdpdGggaXRzIHJvb3QgcHJvcGVydHkgKGUuZy4gdGV4dFNoYWRvdylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5kIHRoZSBob29rJ3MgcG9zaXRpb24gaW4gaXRzIHRlbXBsYXRlJ3MgZGVmYXVsdCB2YWx1ZSBzdHJpbmcuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENTUy5Ib29rcy5yZWdpc3RlcmVkW2Z1bGxIb29rTmFtZV0gPSBbIHJvb3RQcm9wZXJ0eSwgaG9va1Bvc2l0aW9uIF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgIEluamVjdGlvbiBhbmQgRXh0cmFjdGlvblxyXG4gICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIC8qIExvb2sgdXAgdGhlIHJvb3QgcHJvcGVydHkgYXNzb2NpYXRlZCB3aXRoIHRoZSBob29rIChlLmcuIHJldHVybiBcInRleHRTaGFkb3dcIiBmb3IgXCJ0ZXh0U2hhZG93Qmx1clwiKS4gKi9cclxuICAgICAgICAgICAgLyogU2luY2UgYSBob29rIGNhbm5vdCBiZSBzZXQgZGlyZWN0bHkgKHRoZSBicm93c2VyIHdvbid0IHJlY29nbml6ZSBpdCksIHN0eWxlIHVwZGF0aW5nIGZvciBob29rcyBpcyByb3V0ZWQgdGhyb3VnaCB0aGUgaG9vaydzIHJvb3QgcHJvcGVydHkuICovXHJcbiAgICAgICAgICAgIGdldFJvb3Q6IGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGhvb2tEYXRhID0gQ1NTLkhvb2tzLnJlZ2lzdGVyZWRbcHJvcGVydHldO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChob29rRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBob29rRGF0YVswXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlcmUgd2FzIG5vIGhvb2sgbWF0Y2gsIHJldHVybiB0aGUgcHJvcGVydHkgbmFtZSB1bnRvdWNoZWQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb3BlcnR5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvKiBDb252ZXJ0IGFueSByb290UHJvcGVydHlWYWx1ZSwgbnVsbCBvciBvdGhlcndpc2UsIGludG8gYSBzcGFjZS1kZWxpbWl0ZWQgbGlzdCBvZiBob29rIHZhbHVlcyBzbyB0aGF0XHJcbiAgICAgICAgICAgICAgIHRoZSB0YXJnZXRlZCBob29rIGNhbiBiZSBpbmplY3RlZCBvciBleHRyYWN0ZWQgYXQgaXRzIHN0YW5kYXJkIHBvc2l0aW9uLiAqL1xyXG4gICAgICAgICAgICBjbGVhblJvb3RQcm9wZXJ0eVZhbHVlOiBmdW5jdGlvbihyb290UHJvcGVydHksIHJvb3RQcm9wZXJ0eVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBJZiB0aGUgcm9vdFByb3BlcnR5VmFsdWUgaXMgd3JhcHBlZCB3aXRoIFwicmdiKClcIiwgXCJjbGlwKClcIiwgZXRjLiwgcmVtb3ZlIHRoZSB3cmFwcGluZyB0byBub3JtYWxpemUgdGhlIHZhbHVlIGJlZm9yZSBtYW5pcHVsYXRpb24uICovXHJcbiAgICAgICAgICAgICAgICBpZiAoQ1NTLlJlZ0V4LnZhbHVlVW53cmFwLnRlc3Qocm9vdFByb3BlcnR5VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm9vdFByb3BlcnR5VmFsdWUgPSByb290UHJvcGVydHlWYWx1ZS5tYXRjaChDU1MuUmVnRXgudmFsdWVVbndyYXApWzFdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8qIElmIHJvb3RQcm9wZXJ0eVZhbHVlIGlzIGEgQ1NTIG51bGwtdmFsdWUgKGZyb20gd2hpY2ggdGhlcmUncyBpbmhlcmVudGx5IG5vIGhvb2sgdmFsdWUgdG8gZXh0cmFjdCksXHJcbiAgICAgICAgICAgICAgICAgICBkZWZhdWx0IHRvIHRoZSByb290J3MgZGVmYXVsdCB2YWx1ZSBhcyBkZWZpbmVkIGluIENTUy5Ib29rcy50ZW1wbGF0ZXMuICovXHJcbiAgICAgICAgICAgICAgICAvKiBOb3RlOiBDU1MgbnVsbC12YWx1ZXMgaW5jbHVkZSBcIm5vbmVcIiwgXCJhdXRvXCIsIGFuZCBcInRyYW5zcGFyZW50XCIuIFRoZXkgbXVzdCBiZSBjb252ZXJ0ZWQgaW50byB0aGVpclxyXG4gICAgICAgICAgICAgICAgICAgemVyby12YWx1ZXMgKGUuZy4gdGV4dFNoYWRvdzogXCJub25lXCIgPT0+IHRleHRTaGFkb3c6IFwiMHB4IDBweCAwcHggYmxhY2tcIikgZm9yIGhvb2sgbWFuaXB1bGF0aW9uIHRvIHByb2NlZWQuICovXHJcbiAgICAgICAgICAgICAgICBpZiAoQ1NTLlZhbHVlcy5pc0NTU051bGxWYWx1ZShyb290UHJvcGVydHlWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZSA9IENTUy5Ib29rcy50ZW1wbGF0ZXNbcm9vdFByb3BlcnR5XVsxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcm9vdFByb3BlcnR5VmFsdWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8qIEV4dHJhY3RlZCB0aGUgaG9vaydzIHZhbHVlIGZyb20gaXRzIHJvb3QgcHJvcGVydHkncyB2YWx1ZS4gVGhpcyBpcyB1c2VkIHRvIGdldCB0aGUgc3RhcnRpbmcgdmFsdWUgb2YgYW4gYW5pbWF0aW5nIGhvb2suICovXHJcbiAgICAgICAgICAgIGV4dHJhY3RWYWx1ZTogZnVuY3Rpb24gKGZ1bGxIb29rTmFtZSwgcm9vdFByb3BlcnR5VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBob29rRGF0YSA9IENTUy5Ib29rcy5yZWdpc3RlcmVkW2Z1bGxIb29rTmFtZV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGhvb2tEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhvb2tSb290ID0gaG9va0RhdGFbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvb2tQb3NpdGlvbiA9IGhvb2tEYXRhWzFdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZSA9IENTUy5Ib29rcy5jbGVhblJvb3RQcm9wZXJ0eVZhbHVlKGhvb2tSb290LCByb290UHJvcGVydHlWYWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIFNwbGl0IHJvb3RQcm9wZXJ0eVZhbHVlIGludG8gaXRzIGNvbnN0aXR1ZW50IGhvb2sgdmFsdWVzIHRoZW4gZ3JhYiB0aGUgZGVzaXJlZCBob29rIGF0IGl0cyBzdGFuZGFyZCBwb3NpdGlvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm9vdFByb3BlcnR5VmFsdWUudG9TdHJpbmcoKS5tYXRjaChDU1MuUmVnRXgudmFsdWVTcGxpdClbaG9va1Bvc2l0aW9uXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIHByb3ZpZGVkIGZ1bGxIb29rTmFtZSBpc24ndCBhIHJlZ2lzdGVyZWQgaG9vaywgcmV0dXJuIHRoZSByb290UHJvcGVydHlWYWx1ZSB0aGF0IHdhcyBwYXNzZWQgaW4uICovXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvb3RQcm9wZXJ0eVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvKiBJbmplY3QgdGhlIGhvb2sncyB2YWx1ZSBpbnRvIGl0cyByb290IHByb3BlcnR5J3MgdmFsdWUuIFRoaXMgaXMgdXNlZCB0byBwaWVjZSBiYWNrIHRvZ2V0aGVyIHRoZSByb290IHByb3BlcnR5XHJcbiAgICAgICAgICAgICAgIG9uY2UgVmVsb2NpdHkgaGFzIHVwZGF0ZWQgb25lIG9mIGl0cyBpbmRpdmlkdWFsbHkgaG9va2VkIHZhbHVlcyB0aHJvdWdoIHR3ZWVuaW5nLiAqL1xyXG4gICAgICAgICAgICBpbmplY3RWYWx1ZTogZnVuY3Rpb24gKGZ1bGxIb29rTmFtZSwgaG9va1ZhbHVlLCByb290UHJvcGVydHlWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGhvb2tEYXRhID0gQ1NTLkhvb2tzLnJlZ2lzdGVyZWRbZnVsbEhvb2tOYW1lXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaG9va0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaG9va1Jvb3QgPSBob29rRGF0YVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG9va1Bvc2l0aW9uID0gaG9va0RhdGFbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlUGFydHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlVXBkYXRlZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcm9vdFByb3BlcnR5VmFsdWUgPSBDU1MuSG9va3MuY2xlYW5Sb290UHJvcGVydHlWYWx1ZShob29rUm9vdCwgcm9vdFByb3BlcnR5VmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBTcGxpdCByb290UHJvcGVydHlWYWx1ZSBpbnRvIGl0cyBpbmRpdmlkdWFsIGhvb2sgdmFsdWVzLCByZXBsYWNlIHRoZSB0YXJnZXRlZCB2YWx1ZSB3aXRoIGhvb2tWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICB0aGVuIHJlY29uc3RydWN0IHRoZSByb290UHJvcGVydHlWYWx1ZSBzdHJpbmcuICovXHJcbiAgICAgICAgICAgICAgICAgICAgcm9vdFByb3BlcnR5VmFsdWVQYXJ0cyA9IHJvb3RQcm9wZXJ0eVZhbHVlLnRvU3RyaW5nKCkubWF0Y2goQ1NTLlJlZ0V4LnZhbHVlU3BsaXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlUGFydHNbaG9va1Bvc2l0aW9uXSA9IGhvb2tWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZVVwZGF0ZWQgPSByb290UHJvcGVydHlWYWx1ZVBhcnRzLmpvaW4oXCIgXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm9vdFByb3BlcnR5VmFsdWVVcGRhdGVkO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGUgcHJvdmlkZWQgZnVsbEhvb2tOYW1lIGlzbid0IGEgcmVnaXN0ZXJlZCBob29rLCByZXR1cm4gdGhlIHJvb3RQcm9wZXJ0eVZhbHVlIHRoYXQgd2FzIHBhc3NlZCBpbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm9vdFByb3BlcnR5VmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgIE5vcm1hbGl6YXRpb25zXHJcbiAgICAgICAgKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgLyogTm9ybWFsaXphdGlvbnMgc3RhbmRhcmRpemUgQ1NTIHByb3BlcnR5IG1hbmlwdWxhdGlvbiBieSBwb2xseWZpbGxpbmcgYnJvd3Nlci1zcGVjaWZpYyBpbXBsZW1lbnRhdGlvbnMgKGUuZy4gb3BhY2l0eSlcclxuICAgICAgICAgICBhbmQgcmVmb3JtYXR0aW5nIHNwZWNpYWwgcHJvcGVydGllcyAoZS5nLiBjbGlwLCByZ2JhKSB0byBsb29rIGxpa2Ugc3RhbmRhcmQgb25lcy4gKi9cclxuICAgICAgICBOb3JtYWxpemF0aW9uczoge1xyXG4gICAgICAgICAgICAvKiBOb3JtYWxpemF0aW9ucyBhcmUgcGFzc2VkIGEgbm9ybWFsaXphdGlvbiB0YXJnZXQgKGVpdGhlciB0aGUgcHJvcGVydHkncyBuYW1lLCBpdHMgZXh0cmFjdGVkIHZhbHVlLCBvciBpdHMgaW5qZWN0ZWQgdmFsdWUpLFxyXG4gICAgICAgICAgICAgICB0aGUgdGFyZ2V0ZWQgZWxlbWVudCAod2hpY2ggbWF5IG5lZWQgdG8gYmUgcXVlcmllZCksIGFuZCB0aGUgdGFyZ2V0ZWQgcHJvcGVydHkgdmFsdWUuICovXHJcbiAgICAgICAgICAgIHJlZ2lzdGVyZWQ6IHtcclxuICAgICAgICAgICAgICAgIGNsaXA6IGZ1bmN0aW9uICh0eXBlLCBlbGVtZW50LCBwcm9wZXJ0eVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuYW1lXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjbGlwXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIENsaXAgbmVlZHMgdG8gYmUgdW53cmFwcGVkIGFuZCBzdHJpcHBlZCBvZiBpdHMgY29tbWFzIGR1cmluZyBleHRyYWN0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZXh0cmFjdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dHJhY3RlZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiBWZWxvY2l0eSBhbHNvIGV4dHJhY3RlZCB0aGlzIHZhbHVlLCBza2lwIGV4dHJhY3Rpb24uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQ1NTLlJlZ0V4LndyYXBwZWRWYWx1ZUFscmVhZHlFeHRyYWN0ZWQudGVzdChwcm9wZXJ0eVZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RlZCA9IHByb3BlcnR5VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJlbW92ZSB0aGUgXCJyZWN0KClcIiB3cmFwcGVyLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RlZCA9IHByb3BlcnR5VmFsdWUudG9TdHJpbmcoKS5tYXRjaChDU1MuUmVnRXgudmFsdWVVbndyYXApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTdHJpcCBvZmYgY29tbWFzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RlZCA9IGV4dHJhY3RlZCA/IGV4dHJhY3RlZFsxXS5yZXBsYWNlKC8sKFxccyspPy9nLCBcIiBcIikgOiBwcm9wZXJ0eVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBleHRyYWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIENsaXAgbmVlZHMgdG8gYmUgcmUtd3JhcHBlZCBkdXJpbmcgaW5qZWN0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW5qZWN0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJyZWN0KFwiICsgcHJvcGVydHlWYWx1ZSArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgYmx1cjogZnVuY3Rpb24odHlwZSwgZWxlbWVudCwgcHJvcGVydHlWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibmFtZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiLXdlYmtpdC1maWx0ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImV4dHJhY3RcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHRyYWN0ZWQgPSBwYXJzZUZsb2F0KHByb3BlcnR5VmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIGV4dHJhY3RlZCBpcyBOYU4sIG1lYW5pbmcgdGhlIHZhbHVlIGlzbid0IGFscmVhZHkgZXh0cmFjdGVkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoZXh0cmFjdGVkIHx8IGV4dHJhY3RlZCA9PT0gMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmx1ckNvbXBvbmVudCA9IHByb3BlcnR5VmFsdWUudG9TdHJpbmcoKS5tYXRjaCgvYmx1clxcKChbMC05XStbQS16XSspXFwpL2kpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGUgZmlsdGVyIHN0cmluZyBoYWQgYSBibHVyIGNvbXBvbmVudCwgcmV0dXJuIGp1c3QgdGhlIGJsdXIgdmFsdWUgYW5kIHVuaXQgdHlwZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmx1ckNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0ZWQgPSBibHVyQ29tcG9uZW50WzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZSBjb21wb25lbnQgZG9lc24ndCBleGlzdCwgZGVmYXVsdCBibHVyIHRvIDAuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdGVkID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4dHJhY3RlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogQmx1ciBuZWVkcyB0byBiZSByZS13cmFwcGVkIGR1cmluZyBpbmplY3Rpb24uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbmplY3RcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEZvciB0aGUgYmx1ciBlZmZlY3QgdG8gYmUgZnVsbHkgZGUtYXBwbGllZCwgaXQgbmVlZHMgdG8gYmUgc2V0IHRvIFwibm9uZVwiIGluc3RlYWQgb2YgMC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VGbG9hdChwcm9wZXJ0eVZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm5vbmVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiYmx1cihcIiArIHByb3BlcnR5VmFsdWUgKyBcIilcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8qIDw9SUU4IGRvIG5vdCBzdXBwb3J0IHRoZSBzdGFuZGFyZCBvcGFjaXR5IHByb3BlcnR5LiBUaGV5IHVzZSBmaWx0ZXI6YWxwaGEob3BhY2l0eT1JTlQpIGluc3RlYWQuICovXHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiBmdW5jdGlvbiAodHlwZSwgZWxlbWVudCwgcHJvcGVydHlWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChJRSA8PSA4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5hbWVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJmaWx0ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJleHRyYWN0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogPD1JRTggcmV0dXJuIGEgXCJmaWx0ZXJcIiB2YWx1ZSBvZiBcImFscGhhKG9wYWNpdHk9XFxkezEsM30pXCIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXh0cmFjdCB0aGUgdmFsdWUgYW5kIGNvbnZlcnQgaXQgdG8gYSBkZWNpbWFsIHZhbHVlIHRvIG1hdGNoIHRoZSBzdGFuZGFyZCBDU1Mgb3BhY2l0eSBwcm9wZXJ0eSdzIGZvcm1hdHRpbmcuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dHJhY3RlZCA9IHByb3BlcnR5VmFsdWUudG9TdHJpbmcoKS5tYXRjaCgvYWxwaGFcXChvcGFjaXR5PSguKilcXCkvaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHRyYWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQ29udmVydCB0byBkZWNpbWFsIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eVZhbHVlID0gZXh0cmFjdGVkWzFdIC8gMTAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFdoZW4gZXh0cmFjdGluZyBvcGFjaXR5LCBkZWZhdWx0IHRvIDEgc2luY2UgYSBudWxsIHZhbHVlIG1lYW5zIG9wYWNpdHkgaGFzbid0IGJlZW4gc2V0LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eVZhbHVlID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0eVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluamVjdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIE9wYWNpZmllZCBlbGVtZW50cyBhcmUgcmVxdWlyZWQgdG8gaGF2ZSB0aGVpciB6b29tIHByb3BlcnR5IHNldCB0byBhIG5vbi16ZXJvIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuem9vbSA9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFNldHRpbmcgdGhlIGZpbHRlciBwcm9wZXJ0eSBvbiBlbGVtZW50cyB3aXRoIGNlcnRhaW4gZm9udCBwcm9wZXJ0eSBjb21iaW5hdGlvbnMgY2FuIHJlc3VsdCBpbiBhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGx5IHVuYXBwZWFsaW5nIHVsdHJhLWJvbGRpbmcgZWZmZWN0LiBUaGVyZSdzIG5vIHdheSB0byByZW1lZHkgdGhpcyB0aHJvdWdob3V0IGEgdHdlZW4sIGJ1dCBkcm9wcGluZyB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSBhbHRvZ2V0aGVyICh3aGVuIG9wYWNpdHkgaGl0cyAxKSBhdCBsZWFzdHMgZW5zdXJlcyB0aGF0IHRoZSBnbGl0Y2ggaXMgZ29uZSBwb3N0LXR3ZWVuaW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZUZsb2F0KHByb3BlcnR5VmFsdWUpID49IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEFzIHBlciB0aGUgZmlsdGVyIHByb3BlcnR5J3Mgc3BlYywgY29udmVydCB0aGUgZGVjaW1hbCB2YWx1ZSB0byBhIHdob2xlIG51bWJlciBhbmQgd3JhcCB0aGUgdmFsdWUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJhbHBoYShvcGFjaXR5PVwiICsgcGFyc2VJbnQocGFyc2VGbG9hdChwcm9wZXJ0eVZhbHVlKSAqIDEwMCwgMTApICsgXCIpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLyogV2l0aCBhbGwgb3RoZXIgYnJvd3NlcnMsIG5vcm1hbGl6YXRpb24gaXMgbm90IHJlcXVpcmVkOyByZXR1cm4gdGhlIHNhbWUgdmFsdWVzIHRoYXQgd2VyZSBwYXNzZWQgaW4uICovXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibmFtZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9wYWNpdHlcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJleHRyYWN0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb3BlcnR5VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW5qZWN0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb3BlcnR5VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgIEJhdGNoZWQgUmVnaXN0cmF0aW9uc1xyXG4gICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIC8qIE5vdGU6IEJhdGNoZWQgbm9ybWFsaXphdGlvbnMgZXh0ZW5kIHRoZSBDU1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZCBvYmplY3QuICovXHJcbiAgICAgICAgICAgIHJlZ2lzdGVyOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtc1xyXG4gICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgLyogVHJhbnNmb3JtcyBhcmUgdGhlIHN1YnByb3BlcnRpZXMgY29udGFpbmVkIGJ5IHRoZSBDU1MgXCJ0cmFuc2Zvcm1cIiBwcm9wZXJ0eS4gVHJhbnNmb3JtcyBtdXN0IHVuZGVyZ28gbm9ybWFsaXphdGlvblxyXG4gICAgICAgICAgICAgICAgICAgc28gdGhhdCB0aGV5IGNhbiBiZSByZWZlcmVuY2VkIGluIGEgcHJvcGVydGllcyBtYXAgYnkgdGhlaXIgaW5kaXZpZHVhbCBuYW1lcy4gKi9cclxuICAgICAgICAgICAgICAgIC8qIE5vdGU6IFdoZW4gdHJhbnNmb3JtcyBhcmUgXCJzZXRcIiwgdGhleSBhcmUgYWN0dWFsbHkgYXNzaWduZWQgdG8gYSBwZXItZWxlbWVudCB0cmFuc2Zvcm1DYWNoZS4gV2hlbiBhbGwgdHJhbnNmb3JtXHJcbiAgICAgICAgICAgICAgICAgICBzZXR0aW5nIGlzIGNvbXBsZXRlIGNvbXBsZXRlLCBDU1MuZmx1c2hUcmFuc2Zvcm1DYWNoZSgpIG11c3QgYmUgbWFudWFsbHkgY2FsbGVkIHRvIGZsdXNoIHRoZSB2YWx1ZXMgdG8gdGhlIERPTS5cclxuICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybSBzZXR0aW5nIGlzIGJhdGNoZWQgaW4gdGhpcyB3YXkgdG8gaW1wcm92ZSBwZXJmb3JtYW5jZTogdGhlIHRyYW5zZm9ybSBzdHlsZSBvbmx5IG5lZWRzIHRvIGJlIHVwZGF0ZWRcclxuICAgICAgICAgICAgICAgICAgIG9uY2Ugd2hlbiBtdWx0aXBsZSB0cmFuc2Zvcm0gc3VicHJvcGVydGllcyBhcmUgYmVpbmcgYW5pbWF0ZWQgc2ltdWx0YW5lb3VzbHkuICovXHJcbiAgICAgICAgICAgICAgICAvKiBOb3RlOiBJRTkgYW5kIEFuZHJvaWQgR2luZ2VyYnJlYWQgaGF2ZSBzdXBwb3J0IGZvciAyRCAtLSBidXQgbm90IDNEIC0tIHRyYW5zZm9ybXMuIFNpbmNlIGFuaW1hdGluZyB1bnN1cHBvcnRlZFxyXG4gICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtIHByb3BlcnRpZXMgcmVzdWx0cyBpbiB0aGUgYnJvd3NlciBpZ25vcmluZyB0aGUgKmVudGlyZSogdHJhbnNmb3JtIHN0cmluZywgd2UgcHJldmVudCB0aGVzZSAzRCB2YWx1ZXNcclxuICAgICAgICAgICAgICAgICAgIGZyb20gYmVpbmcgbm9ybWFsaXplZCBmb3IgdGhlc2UgYnJvd3NlcnMgc28gdGhhdCB0d2VlbmluZyBza2lwcyB0aGVzZSBwcm9wZXJ0aWVzIGFsdG9nZXRoZXJcclxuICAgICAgICAgICAgICAgICAgIChzaW5jZSBpdCB3aWxsIGlnbm9yZSB0aGVtIGFzIGJlaW5nIHVuc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyLikgKi9cclxuICAgICAgICAgICAgICAgIGlmICghKElFIDw9IDkpICYmICFWZWxvY2l0eS5TdGF0ZS5pc0dpbmdlcmJyZWFkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogU2luY2UgdGhlIHN0YW5kYWxvbmUgQ1NTIFwicGVyc3BlY3RpdmVcIiBwcm9wZXJ0eSBhbmQgdGhlIENTUyB0cmFuc2Zvcm0gXCJwZXJzcGVjdGl2ZVwiIHN1YnByb3BlcnR5XHJcbiAgICAgICAgICAgICAgICAgICAgc2hhcmUgdGhlIHNhbWUgbmFtZSwgdGhlIGxhdHRlciBpcyBnaXZlbiBhIHVuaXF1ZSB0b2tlbiB3aXRoaW4gVmVsb2NpdHk6IFwidHJhbnNmb3JtUGVyc3BlY3RpdmVcIi4gKi9cclxuICAgICAgICAgICAgICAgICAgICBDU1MuTGlzdHMudHJhbnNmb3Jtc0Jhc2UgPSBDU1MuTGlzdHMudHJhbnNmb3Jtc0Jhc2UuY29uY2F0KENTUy5MaXN0cy50cmFuc2Zvcm1zM0QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ1NTLkxpc3RzLnRyYW5zZm9ybXNCYXNlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogV3JhcCB0aGUgZHluYW1pY2FsbHkgZ2VuZXJhdGVkIG5vcm1hbGl6YXRpb24gZnVuY3Rpb24gaW4gYSBuZXcgc2NvcGUgc28gdGhhdCB0cmFuc2Zvcm1OYW1lJ3MgdmFsdWUgaXNcclxuICAgICAgICAgICAgICAgICAgICBwYWlyZWQgd2l0aCBpdHMgcmVzcGVjdGl2ZSBmdW5jdGlvbi4gKE90aGVyd2lzZSwgYWxsIGZ1bmN0aW9ucyB3b3VsZCB0YWtlIHRoZSBmaW5hbCBmb3IgbG9vcCdzIHRyYW5zZm9ybU5hbWUuKSAqL1xyXG4gICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zZm9ybU5hbWUgPSBDU1MuTGlzdHMudHJhbnNmb3Jtc0Jhc2VbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBDU1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFt0cmFuc2Zvcm1OYW1lXSA9IGZ1bmN0aW9uICh0eXBlLCBlbGVtZW50LCBwcm9wZXJ0eVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBUaGUgbm9ybWFsaXplZCBwcm9wZXJ0eSBuYW1lIGlzIHRoZSBwYXJlbnQgXCJ0cmFuc2Zvcm1cIiBwcm9wZXJ0eSAtLSB0aGUgcHJvcGVydHkgdGhhdCBpcyBhY3R1YWxseSBzZXQgaW4gQ1NTLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuYW1lXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyYW5zZm9ybVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFRyYW5zZm9ybSB2YWx1ZXMgYXJlIGNhY2hlZCBvbnRvIGEgcGVyLWVsZW1lbnQgdHJhbnNmb3JtQ2FjaGUgb2JqZWN0LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJleHRyYWN0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIHRoaXMgdHJhbnNmb3JtIGhhcyB5ZXQgdG8gYmUgYXNzaWduZWQgYSB2YWx1ZSwgcmV0dXJuIGl0cyBudWxsIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGF0YShlbGVtZW50KSA9PT0gdW5kZWZpbmVkIHx8IERhdGEoZWxlbWVudCkudHJhbnNmb3JtQ2FjaGVbdHJhbnNmb3JtTmFtZV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogU2NhbGUgQ1NTLkxpc3RzLnRyYW5zZm9ybXNCYXNlIGRlZmF1bHQgdG8gMSB3aGVyZWFzIGFsbCBvdGhlciB0cmFuc2Zvcm0gcHJvcGVydGllcyBkZWZhdWx0IHRvIDAuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gL15zY2FsZS9pLnRlc3QodHJhbnNmb3JtTmFtZSkgPyAxIDogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogV2hlbiB0cmFuc2Zvcm0gdmFsdWVzIGFyZSBzZXQsIHRoZXkgYXJlIHdyYXBwZWQgaW4gcGFyZW50aGVzZXMgYXMgcGVyIHRoZSBDU1Mgc3BlYy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGh1cywgd2hlbiBleHRyYWN0aW5nIHRoZWlyIHZhbHVlcyAoZm9yIHR3ZWVuIGNhbGN1bGF0aW9ucyksIHdlIHN0cmlwIG9mZiB0aGUgcGFyZW50aGVzZXMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGF0YShlbGVtZW50KS50cmFuc2Zvcm1DYWNoZVt0cmFuc2Zvcm1OYW1lXS5yZXBsYWNlKC9bKCldL2csIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluamVjdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW52YWxpZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgYW4gaW5kaXZpZHVhbCB0cmFuc2Zvcm0gcHJvcGVydHkgY29udGFpbnMgYW4gdW5zdXBwb3J0ZWQgdW5pdCB0eXBlLCB0aGUgYnJvd3NlciBpZ25vcmVzIHRoZSAqZW50aXJlKiB0cmFuc2Zvcm0gcHJvcGVydHkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRodXMsIHByb3RlY3QgdXNlcnMgZnJvbSB0aGVtc2VsdmVzIGJ5IHNraXBwaW5nIHNldHRpbmcgZm9yIHRyYW5zZm9ybSB2YWx1ZXMgc3VwcGxpZWQgd2l0aCBpbnZhbGlkIHVuaXQgdHlwZXMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFN3aXRjaCBvbiB0aGUgYmFzZSB0cmFuc2Zvcm0gdHlwZTsgaWdub3JlIHRoZSBheGlzIGJ5IHJlbW92aW5nIHRoZSBsYXN0IGxldHRlciBmcm9tIHRoZSB0cmFuc2Zvcm0ncyBuYW1lLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRyYW5zZm9ybU5hbWUuc3Vic3RyKDAsIHRyYW5zZm9ybU5hbWUubGVuZ3RoIC0gMSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFdoaXRlbGlzdCB1bml0IHR5cGVzIGZvciBlYWNoIHRyYW5zZm9ybS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2xhdGVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkID0gIS8oJXxweHxlbXxyZW18dnd8dmh8XFxkKSQvaS50ZXN0KHByb3BlcnR5VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogU2luY2UgYW4gYXhpcy1mcmVlIFwic2NhbGVcIiBwcm9wZXJ0eSBpcyBzdXBwb3J0ZWQgYXMgd2VsbCwgYSBsaXR0bGUgaGFjayBpcyB1c2VkIGhlcmUgdG8gZGV0ZWN0IGl0IGJ5IGNob3BwaW5nIG9mZiBpdHMgbGFzdCBsZXR0ZXIuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2NhbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNjYWxlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQ2hyb21lIG9uIEFuZHJvaWQgaGFzIGEgYnVnIGluIHdoaWNoIHNjYWxlZCBlbGVtZW50cyBibHVyIGlmIHRoZWlyIGluaXRpYWwgc2NhbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSBpcyBiZWxvdyAxICh3aGljaCBjYW4gaGFwcGVuIHdpdGggZm9yY2VmZWVkaW5nKS4gVGh1cywgd2UgZGV0ZWN0IGEgeWV0LXVuc2V0IHNjYWxlIHByb3BlcnR5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5kIGVuc3VyZSB0aGF0IGl0cyBmaXJzdCB2YWx1ZSBpcyBhbHdheXMgMS4gTW9yZSBpbmZvOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNDE3ODkwL2NzczMtYW5pbWF0aW9ucy13aXRoLXRyYW5zZm9ybS1jYXVzZXMtYmx1cnJlZC1lbGVtZW50cy1vbi13ZWJraXQvMTA0MTc5NjIjMTA0MTc5NjIgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoVmVsb2NpdHkuU3RhdGUuaXNBbmRyb2lkICYmIERhdGEoZWxlbWVudCkudHJhbnNmb3JtQ2FjaGVbdHJhbnNmb3JtTmFtZV0gPT09IHVuZGVmaW5lZCAmJiBwcm9wZXJ0eVZhbHVlIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eVZhbHVlID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWQgPSAhLyhcXGQpJC9pLnRlc3QocHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2tld1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWQgPSAhLyhkZWd8XFxkKSQvaS50ZXN0KHByb3BlcnR5VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJvdGF0ZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWQgPSAhLyhkZWd8XFxkKSQvaS50ZXN0KHByb3BlcnR5VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWludmFsaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEFzIHBlciB0aGUgQ1NTIHNwZWMsIHdyYXAgdGhlIHZhbHVlIGluIHBhcmVudGhlc2VzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YShlbGVtZW50KS50cmFuc2Zvcm1DYWNoZVt0cmFuc2Zvcm1OYW1lXSA9IFwiKFwiICsgcHJvcGVydHlWYWx1ZSArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBBbHRob3VnaCB0aGUgdmFsdWUgaXMgc2V0IG9uIHRoZSB0cmFuc2Zvcm1DYWNoZSBvYmplY3QsIHJldHVybiB0aGUgbmV3bHktdXBkYXRlZCB2YWx1ZSBmb3IgdGhlIGNhbGxpbmcgY29kZSB0byBwcm9jZXNzIGFzIG5vcm1hbC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGEoZWxlbWVudCkudHJhbnNmb3JtQ2FjaGVbdHJhbnNmb3JtTmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSkoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgIENvbG9yc1xyXG4gICAgICAgICAgICAgICAgKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBTaW5jZSBWZWxvY2l0eSBvbmx5IGFuaW1hdGVzIGEgc2luZ2xlIG51bWVyaWMgdmFsdWUgcGVyIHByb3BlcnR5LCBjb2xvciBhbmltYXRpb24gaXMgYWNoaWV2ZWQgYnkgaG9va2luZyB0aGUgaW5kaXZpZHVhbCBSR0JBIGNvbXBvbmVudHMgb2YgQ1NTIGNvbG9yIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICAgICAgICAgICBBY2NvcmRpbmdseSwgY29sb3IgdmFsdWVzIG11c3QgYmUgbm9ybWFsaXplZCAoZS5nLiBcIiNmZjAwMDBcIiwgXCJyZWRcIiwgYW5kIFwicmdiKDI1NSwgMCwgMClcIiA9PT4gXCIyNTUgMCAwIDFcIikgc28gdGhhdCB0aGVpciBjb21wb25lbnRzIGNhbiBiZSBpbmplY3RlZC9leHRyYWN0ZWQgYnkgQ1NTLkhvb2tzIGxvZ2ljLiAqL1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBDU1MuTGlzdHMuY29sb3JzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogV3JhcCB0aGUgZHluYW1pY2FsbHkgZ2VuZXJhdGVkIG5vcm1hbGl6YXRpb24gZnVuY3Rpb24gaW4gYSBuZXcgc2NvcGUgc28gdGhhdCBjb2xvck5hbWUncyB2YWx1ZSBpcyBwYWlyZWQgd2l0aCBpdHMgcmVzcGVjdGl2ZSBmdW5jdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAoT3RoZXJ3aXNlLCBhbGwgZnVuY3Rpb25zIHdvdWxkIHRha2UgdGhlIGZpbmFsIGZvciBsb29wJ3MgY29sb3JOYW1lLikgKi9cclxuICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3JOYW1lID0gQ1NTLkxpc3RzLmNvbG9yc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IEluIElFPD04LCB3aGljaCBzdXBwb3J0IHJnYiBidXQgbm90IHJnYmEsIGNvbG9yIHByb3BlcnRpZXMgYXJlIHJldmVydGVkIHRvIHJnYiBieSBzdHJpcHBpbmcgb2ZmIHRoZSBhbHBoYSBjb21wb25lbnQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENTUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW2NvbG9yTmFtZV0gPSBmdW5jdGlvbih0eXBlLCBlbGVtZW50LCBwcm9wZXJ0eVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibmFtZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sb3JOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIENvbnZlcnQgYWxsIGNvbG9yIHZhbHVlcyBpbnRvIHRoZSByZ2IgZm9ybWF0LiAoT2xkIElFIGNhbiByZXR1cm4gaGV4IHZhbHVlcyBhbmQgY29sb3IgbmFtZXMgaW5zdGVhZCBvZiByZ2IvcmdiYS4pICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImV4dHJhY3RcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dHJhY3RlZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZSBjb2xvciBpcyBhbHJlYWR5IGluIGl0cyBob29rYWJsZSBmb3JtIChlLmcuIFwiMjU1IDI1NSAyNTUgMVwiKSBkdWUgdG8gaGF2aW5nIGJlZW4gcHJldmlvdXNseSBleHRyYWN0ZWQsIHNraXAgZXh0cmFjdGlvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKENTUy5SZWdFeC53cmFwcGVkVmFsdWVBbHJlYWR5RXh0cmFjdGVkLnRlc3QocHJvcGVydHlWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RlZCA9IHByb3BlcnR5VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udmVydGVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yTmFtZXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWNrOiBcInJnYigwLCAwLCAwKVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibHVlOiBcInJnYigwLCAwLCAyNTUpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyYXk6IFwicmdiKDEyOCwgMTI4LCAxMjgpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyZWVuOiBcInJnYigwLCAxMjgsIDApXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZDogXCJyZ2IoMjU1LCAwLCAwKVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZTogXCJyZ2IoMjU1LCAyNTUsIDI1NSlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQ29udmVydCBjb2xvciBuYW1lcyB0byByZ2IuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoL15bQS16XSskL2kudGVzdChwcm9wZXJ0eVZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2xvck5hbWVzW3Byb3BlcnR5VmFsdWVdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udmVydGVkID0gY29sb3JOYW1lc1twcm9wZXJ0eVZhbHVlXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIGFuIHVubWF0Y2hlZCBjb2xvciBuYW1lIGlzIHByb3ZpZGVkLCBkZWZhdWx0IHRvIGJsYWNrLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJ0ZWQgPSBjb2xvck5hbWVzLmJsYWNrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIENvbnZlcnQgaGV4IHZhbHVlcyB0byByZ2IuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKENTUy5SZWdFeC5pc0hleC50ZXN0KHByb3BlcnR5VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udmVydGVkID0gXCJyZ2IoXCIgKyBDU1MuVmFsdWVzLmhleFRvUmdiKHByb3BlcnR5VmFsdWUpLmpvaW4oXCIgXCIpICsgXCIpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGUgcHJvdmlkZWQgY29sb3IgZG9lc24ndCBtYXRjaCBhbnkgb2YgdGhlIGFjY2VwdGVkIGNvbG9yIGZvcm1hdHMsIGRlZmF1bHQgdG8gYmxhY2suICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCEoL15yZ2JhP1xcKC9pLnRlc3QocHJvcGVydHlWYWx1ZSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udmVydGVkID0gY29sb3JOYW1lcy5ibGFjaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBSZW1vdmUgdGhlIHN1cnJvdW5kaW5nIFwicmdiL3JnYmEoKVwiIHN0cmluZyB0aGVuIHJlcGxhY2UgY29tbWFzIHdpdGggc3BhY2VzIGFuZCBzdHJpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0ZWQgc3BhY2VzIChpbiBjYXNlIHRoZSB2YWx1ZSBpbmNsdWRlZCBzcGFjZXMgdG8gYmVnaW4gd2l0aCkuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0ZWQgPSAoY29udmVydGVkIHx8IHByb3BlcnR5VmFsdWUpLnRvU3RyaW5nKCkubWF0Y2goQ1NTLlJlZ0V4LnZhbHVlVW53cmFwKVsxXS5yZXBsYWNlKC8sKFxccyspPy9nLCBcIiBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFNvIGxvbmcgYXMgdGhpcyBpc24ndCA8PUlFOCwgYWRkIGEgZm91cnRoIChhbHBoYSkgY29tcG9uZW50IGlmIGl0J3MgbWlzc2luZyBhbmQgZGVmYXVsdCBpdCB0byAxICh2aXNpYmxlKS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoSUUgPD0gOCkgJiYgZXh0cmFjdGVkLnNwbGl0KFwiIFwiKS5sZW5ndGggPT09IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RlZCArPSBcIiAxXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBleHRyYWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluamVjdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGlzIGlzIElFPD04IGFuZCBhbiBhbHBoYSBjb21wb25lbnQgZXhpc3RzLCBzdHJpcCBpdCBvZmYuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChJRSA8PSA4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydHlWYWx1ZS5zcGxpdChcIiBcIikubGVuZ3RoID09PSA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlWYWx1ZSA9IHByb3BlcnR5VmFsdWUuc3BsaXQoL1xccysvKS5zbGljZSgwLCAzKS5qb2luKFwiIFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogT3RoZXJ3aXNlLCBhZGQgYSBmb3VydGggKGFscGhhKSBjb21wb25lbnQgaWYgaXQncyBtaXNzaW5nIGFuZCBkZWZhdWx0IGl0IHRvIDEgKHZpc2libGUpLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHByb3BlcnR5VmFsdWUuc3BsaXQoXCIgXCIpLmxlbmd0aCA9PT0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlWYWx1ZSArPSBcIiAxXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJlLWluc2VydCB0aGUgYnJvd3Nlci1hcHByb3ByaWF0ZSB3cmFwcGVyKFwicmdiL3JnYmEoKVwiKSwgaW5zZXJ0IGNvbW1hcywgYW5kIHN0cmlwIG9mZiBkZWNpbWFsIHVuaXRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uIGFsbCB2YWx1ZXMgYnV0IHRoZSBmb3VydGggKFIsIEcsIGFuZCBCIG9ubHkgYWNjZXB0IHdob2xlIG51bWJlcnMpLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKElFIDw9IDggPyBcInJnYlwiIDogXCJyZ2JhXCIpICsgXCIoXCIgKyBwcm9wZXJ0eVZhbHVlLnJlcGxhY2UoL1xccysvZywgXCIsXCIpLnJlcGxhY2UoL1xcLihcXGQpKyg/PSwpL2csIFwiXCIpICsgXCIpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSkoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICBDU1MgUHJvcGVydHkgTmFtZXNcclxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIE5hbWVzOiB7XHJcbiAgICAgICAgICAgIC8qIENhbWVsY2FzZSBhIHByb3BlcnR5IG5hbWUgaW50byBpdHMgSmF2YVNjcmlwdCBub3RhdGlvbiAoZS5nLiBcImJhY2tncm91bmQtY29sb3JcIiA9PT4gXCJiYWNrZ3JvdW5kQ29sb3JcIikuXHJcbiAgICAgICAgICAgICAgIENhbWVsY2FzaW5nIGlzIHVzZWQgdG8gbm9ybWFsaXplIHByb3BlcnR5IG5hbWVzIGJldHdlZW4gYW5kIGFjcm9zcyBjYWxscy4gKi9cclxuICAgICAgICAgICAgY2FtZWxDYXNlOiBmdW5jdGlvbiAocHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0eS5yZXBsYWNlKC8tKFxcdykvZywgZnVuY3Rpb24gKG1hdGNoLCBzdWJNYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWJNYXRjaC50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvKiBGb3IgU1ZHIGVsZW1lbnRzLCBzb21lIHByb3BlcnRpZXMgKG5hbWVseSwgZGltZW5zaW9uYWwgb25lcykgYXJlIEdFVC9TRVQgdmlhIHRoZSBlbGVtZW50J3MgSFRNTCBhdHRyaWJ1dGVzIChpbnN0ZWFkIG9mIHZpYSBDU1Mgc3R5bGVzKS4gKi9cclxuICAgICAgICAgICAgU1ZHQXR0cmlidXRlOiBmdW5jdGlvbiAocHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBTVkdBdHRyaWJ1dGVzID0gXCJ3aWR0aHxoZWlnaHR8eHx5fGN4fGN5fHJ8cnh8cnl8eDF8eDJ8eTF8eTJcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBDZXJ0YWluIGJyb3dzZXJzIHJlcXVpcmUgYW4gU1ZHIHRyYW5zZm9ybSB0byBiZSBhcHBsaWVkIGFzIGFuIGF0dHJpYnV0ZS4gKE90aGVyd2lzZSwgYXBwbGljYXRpb24gdmlhIENTUyBpcyBwcmVmZXJhYmxlIGR1ZSB0byAzRCBzdXBwb3J0LikgKi9cclxuICAgICAgICAgICAgICAgIGlmIChJRSB8fCAoVmVsb2NpdHkuU3RhdGUuaXNBbmRyb2lkICYmICFWZWxvY2l0eS5TdGF0ZS5pc0Nocm9tZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBTVkdBdHRyaWJ1dGVzICs9IFwifHRyYW5zZm9ybVwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKFwiXihcIiArIFNWR0F0dHJpYnV0ZXMgKyBcIikkXCIsIFwiaVwiKS50ZXN0KHByb3BlcnR5KTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8qIERldGVybWluZSB3aGV0aGVyIGEgcHJvcGVydHkgc2hvdWxkIGJlIHNldCB3aXRoIGEgdmVuZG9yIHByZWZpeC4gKi9cclxuICAgICAgICAgICAgLyogSWYgYSBwcmVmaXhlZCB2ZXJzaW9uIG9mIHRoZSBwcm9wZXJ0eSBleGlzdHMsIHJldHVybiBpdC4gT3RoZXJ3aXNlLCByZXR1cm4gdGhlIG9yaWdpbmFsIHByb3BlcnR5IG5hbWUuXHJcbiAgICAgICAgICAgICAgIElmIHRoZSBwcm9wZXJ0eSBpcyBub3QgYXQgYWxsIHN1cHBvcnRlZCBieSB0aGUgYnJvd3NlciwgcmV0dXJuIGEgZmFsc2UgZmxhZy4gKi9cclxuICAgICAgICAgICAgcHJlZml4Q2hlY2s6IGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICAgICAgLyogSWYgdGhpcyBwcm9wZXJ0eSBoYXMgYWxyZWFkeSBiZWVuIGNoZWNrZWQsIHJldHVybiB0aGUgY2FjaGVkIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKFZlbG9jaXR5LlN0YXRlLnByZWZpeE1hdGNoZXNbcHJvcGVydHldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgVmVsb2NpdHkuU3RhdGUucHJlZml4TWF0Y2hlc1twcm9wZXJ0eV0sIHRydWUgXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZlbmRvcnMgPSBbIFwiXCIsIFwiV2Via2l0XCIsIFwiTW96XCIsIFwibXNcIiwgXCJPXCIgXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIHZlbmRvcnNMZW5ndGggPSB2ZW5kb3JzLmxlbmd0aDsgaSA8IHZlbmRvcnNMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcGVydHlQcmVmaXhlZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eVByZWZpeGVkID0gcHJvcGVydHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBDYXBpdGFsaXplIHRoZSBmaXJzdCBsZXR0ZXIgb2YgdGhlIHByb3BlcnR5IHRvIGNvbmZvcm0gdG8gSmF2YVNjcmlwdCB2ZW5kb3IgcHJlZml4IG5vdGF0aW9uIChlLmcuIHdlYmtpdEZpbHRlcikuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eVByZWZpeGVkID0gdmVuZG9yc1tpXSArIHByb3BlcnR5LnJlcGxhY2UoL15cXHcvLCBmdW5jdGlvbihtYXRjaCkgeyByZXR1cm4gbWF0Y2gudG9VcHBlckNhc2UoKTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIENoZWNrIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIHRoaXMgcHJvcGVydHkgYXMgcHJlZml4ZWQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChUeXBlLmlzU3RyaW5nKFZlbG9jaXR5LlN0YXRlLnByZWZpeEVsZW1lbnQuc3R5bGVbcHJvcGVydHlQcmVmaXhlZF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBDYWNoZSB0aGUgbWF0Y2guICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS5TdGF0ZS5wcmVmaXhNYXRjaGVzW3Byb3BlcnR5XSA9IHByb3BlcnR5UHJlZml4ZWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgcHJvcGVydHlQcmVmaXhlZCwgdHJ1ZSBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGUgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgdGhpcyBwcm9wZXJ0eSBpbiBhbnkgZm9ybSwgaW5jbHVkZSBhIGZhbHNlIGZsYWcgc28gdGhhdCB0aGUgY2FsbGVyIGNhbiBkZWNpZGUgaG93IHRvIHByb2NlZWQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgcHJvcGVydHksIGZhbHNlIF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgQ1NTIFByb3BlcnR5IFZhbHVlc1xyXG4gICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgVmFsdWVzOiB7XHJcbiAgICAgICAgICAgIC8qIEhleCB0byBSR0IgY29udmVyc2lvbi4gQ29weXJpZ2h0IFRpbSBEb3duOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzU2MjM4MzgvcmdiLXRvLWhleC1hbmQtaGV4LXRvLXJnYiAqL1xyXG4gICAgICAgICAgICBoZXhUb1JnYjogZnVuY3Rpb24gKGhleCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNob3J0Zm9ybVJlZ2V4ID0gL14jPyhbYS1mXFxkXSkoW2EtZlxcZF0pKFthLWZcXGRdKSQvaSxcclxuICAgICAgICAgICAgICAgICAgICBsb25nZm9ybVJlZ2V4ID0gL14jPyhbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KSQvaSxcclxuICAgICAgICAgICAgICAgICAgICByZ2JQYXJ0cztcclxuXHJcbiAgICAgICAgICAgICAgICBoZXggPSBoZXgucmVwbGFjZShzaG9ydGZvcm1SZWdleCwgZnVuY3Rpb24gKG0sIHIsIGcsIGIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gciArIHIgKyBnICsgZyArIGIgKyBiO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmdiUGFydHMgPSBsb25nZm9ybVJlZ2V4LmV4ZWMoaGV4KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmdiUGFydHMgPyBbIHBhcnNlSW50KHJnYlBhcnRzWzFdLCAxNiksIHBhcnNlSW50KHJnYlBhcnRzWzJdLCAxNiksIHBhcnNlSW50KHJnYlBhcnRzWzNdLCAxNikgXSA6IFsgMCwgMCwgMCBdO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgaXNDU1NOdWxsVmFsdWU6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgLyogVGhlIGJyb3dzZXIgZGVmYXVsdHMgQ1NTIHZhbHVlcyB0aGF0IGhhdmUgbm90IGJlZW4gc2V0IHRvIGVpdGhlciAwIG9yIG9uZSBvZiBzZXZlcmFsIHBvc3NpYmxlIG51bGwtdmFsdWUgc3RyaW5ncy5cclxuICAgICAgICAgICAgICAgICAgIFRodXMsIHdlIGNoZWNrIGZvciBib3RoIGZhbHNpbmVzcyBhbmQgdGhlc2Ugc3BlY2lhbCBzdHJpbmdzLiAqL1xyXG4gICAgICAgICAgICAgICAgLyogTnVsbC12YWx1ZSBjaGVja2luZyBpcyBwZXJmb3JtZWQgdG8gZGVmYXVsdCB0aGUgc3BlY2lhbCBzdHJpbmdzIHRvIDAgKGZvciB0aGUgc2FrZSBvZiB0d2VlbmluZykgb3IgdGhlaXIgaG9va1xyXG4gICAgICAgICAgICAgICAgICAgdGVtcGxhdGVzIGFzIGRlZmluZWQgYXMgQ1NTLkhvb2tzIChmb3IgdGhlIHNha2Ugb2YgaG9vayBpbmplY3Rpb24vZXh0cmFjdGlvbikuICovXHJcbiAgICAgICAgICAgICAgICAvKiBOb3RlOiBDaHJvbWUgcmV0dXJucyBcInJnYmEoMCwgMCwgMCwgMClcIiBmb3IgYW4gdW5kZWZpbmVkIGNvbG9yIHdoZXJlYXMgSUUgcmV0dXJucyBcInRyYW5zcGFyZW50XCIuICovXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHZhbHVlID09IDAgfHwgL14obm9uZXxhdXRvfHRyYW5zcGFyZW50fChyZ2JhXFwoMCwgPzAsID8wLCA/MFxcKSkpJC9pLnRlc3QodmFsdWUpKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8qIFJldHJpZXZlIGEgcHJvcGVydHkncyBkZWZhdWx0IHVuaXQgdHlwZS4gVXNlZCBmb3IgYXNzaWduaW5nIGEgdW5pdCB0eXBlIHdoZW4gb25lIGlzIG5vdCBzdXBwbGllZCBieSB0aGUgdXNlci4gKi9cclxuICAgICAgICAgICAgZ2V0VW5pdFR5cGU6IGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKC9eKHJvdGF0ZXxza2V3KS9pLnRlc3QocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZGVnXCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKC8oXihzY2FsZXxzY2FsZVh8c2NhbGVZfHNjYWxlWnxhbHBoYXxmbGV4R3Jvd3xmbGV4SGVpZ2h0fHpJbmRleHxmb250V2VpZ2h0KSQpfCgob3BhY2l0eXxyZWR8Z3JlZW58Ymx1ZXxhbHBoYSkkKS9pLnRlc3QocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogVGhlIGFib3ZlIHByb3BlcnRpZXMgYXJlIHVuaXRsZXNzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBEZWZhdWx0IHRvIHB4IGZvciBhbGwgb3RoZXIgcHJvcGVydGllcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLyogSFRNTCBlbGVtZW50cyBkZWZhdWx0IHRvIGFuIGFzc29jaWF0ZWQgZGlzcGxheSB0eXBlIHdoZW4gdGhleSdyZSBub3Qgc2V0IHRvIGRpc3BsYXk6bm9uZS4gKi9cclxuICAgICAgICAgICAgLyogTm90ZTogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGZvciBjb3JyZWN0bHkgc2V0dGluZyB0aGUgbm9uLVwibm9uZVwiIGRpc3BsYXkgdmFsdWUgaW4gY2VydGFpbiBWZWxvY2l0eSByZWRpcmVjdHMsIHN1Y2ggYXMgZmFkZUluL091dC4gKi9cclxuICAgICAgICAgICAgZ2V0RGlzcGxheVR5cGU6IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFnTmFtZSA9IGVsZW1lbnQgJiYgZWxlbWVudC50YWdOYW1lLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoL14oYnxiaWd8aXxzbWFsbHx0dHxhYmJyfGFjcm9ueW18Y2l0ZXxjb2RlfGRmbnxlbXxrYmR8c3Ryb25nfHNhbXB8dmFyfGF8YmRvfGJyfGltZ3xtYXB8b2JqZWN0fHF8c2NyaXB0fHNwYW58c3VifHN1cHxidXR0b258aW5wdXR8bGFiZWx8c2VsZWN0fHRleHRhcmVhKSQvaS50ZXN0KHRhZ05hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiaW5saW5lXCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKC9eKGxpKSQvaS50ZXN0KHRhZ05hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibGlzdC1pdGVtXCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKC9eKHRyKSQvaS50ZXN0KHRhZ05hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidGFibGUtcm93XCI7XHJcbiAgICAgICAgICAgICAgICAvKiBEZWZhdWx0IHRvIFwiYmxvY2tcIiB3aGVuIG5vIG1hdGNoIGlzIGZvdW5kLiAqL1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLyogVGhlIGNsYXNzIGFkZC9yZW1vdmUgZnVuY3Rpb25zIGFyZSB1c2VkIHRvIHRlbXBvcmFyaWx5IGFwcGx5IGEgXCJ2ZWxvY2l0eS1hbmltYXRpbmdcIiBjbGFzcyB0byBlbGVtZW50cyB3aGlsZSB0aGV5J3JlIGFuaW1hdGluZy4gKi9cclxuICAgICAgICAgICAgYWRkQ2xhc3M6IGZ1bmN0aW9uIChlbGVtZW50LCBjbGFzc05hbWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSArPSAoZWxlbWVudC5jbGFzc05hbWUubGVuZ3RoID8gXCIgXCIgOiBcIlwiKSArIGNsYXNzTmFtZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIHJlbW92ZUNsYXNzOiBmdW5jdGlvbiAoZWxlbWVudCwgY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZS50b1N0cmluZygpLnJlcGxhY2UobmV3IFJlZ0V4cChcIihefFxcXFxzKVwiICsgY2xhc3NOYW1lLnNwbGl0KFwiIFwiKS5qb2luKFwifFwiKSArIFwiKFxcXFxzfCQpXCIsIFwiZ2lcIiksIFwiIFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgU3R5bGUgR2V0dGluZyAmIFNldHRpbmdcclxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAvKiBUaGUgc2luZ3VsYXIgZ2V0UHJvcGVydHlWYWx1ZSwgd2hpY2ggcm91dGVzIHRoZSBsb2dpYyBmb3IgYWxsIG5vcm1hbGl6YXRpb25zLCBob29rcywgYW5kIHN0YW5kYXJkIENTUyBwcm9wZXJ0aWVzLiAqL1xyXG4gICAgICAgIGdldFByb3BlcnR5VmFsdWU6IGZ1bmN0aW9uIChlbGVtZW50LCBwcm9wZXJ0eSwgcm9vdFByb3BlcnR5VmFsdWUsIGZvcmNlU3R5bGVMb29rdXApIHtcclxuICAgICAgICAgICAgLyogR2V0IGFuIGVsZW1lbnQncyBjb21wdXRlZCBwcm9wZXJ0eSB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgLyogTm90ZTogUmV0cmlldmluZyB0aGUgdmFsdWUgb2YgYSBDU1MgcHJvcGVydHkgY2Fubm90IHNpbXBseSBiZSBwZXJmb3JtZWQgYnkgY2hlY2tpbmcgYW4gZWxlbWVudCdzXHJcbiAgICAgICAgICAgICAgIHN0eWxlIGF0dHJpYnV0ZSAod2hpY2ggb25seSByZWZsZWN0cyB1c2VyLWRlZmluZWQgdmFsdWVzKS4gSW5zdGVhZCwgdGhlIGJyb3dzZXIgbXVzdCBiZSBxdWVyaWVkIGZvciBhIHByb3BlcnR5J3NcclxuICAgICAgICAgICAgICAgKmNvbXB1dGVkKiB2YWx1ZS4gWW91IGNhbiByZWFkIG1vcmUgYWJvdXQgZ2V0Q29tcHV0ZWRTdHlsZSBoZXJlOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9kb2NzL1dlYi9BUEkvd2luZG93LmdldENvbXB1dGVkU3R5bGUgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gY29tcHV0ZVByb3BlcnR5VmFsdWUgKGVsZW1lbnQsIHByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgICAgICAvKiBXaGVuIGJveC1zaXppbmcgaXNuJ3Qgc2V0IHRvIGJvcmRlci1ib3gsIGhlaWdodCBhbmQgd2lkdGggc3R5bGUgdmFsdWVzIGFyZSBpbmNvcnJlY3RseSBjb21wdXRlZCB3aGVuIGFuXHJcbiAgICAgICAgICAgICAgICAgICBlbGVtZW50J3Mgc2Nyb2xsYmFycyBhcmUgdmlzaWJsZSAod2hpY2ggZXhwYW5kcyB0aGUgZWxlbWVudCdzIGRpbWVuc2lvbnMpLiBUaHVzLCB3ZSBkZWZlciB0byB0aGUgbW9yZSBhY2N1cmF0ZVxyXG4gICAgICAgICAgICAgICAgICAgb2Zmc2V0SGVpZ2h0L1dpZHRoIHByb3BlcnR5LCB3aGljaCBpbmNsdWRlcyB0aGUgdG90YWwgZGltZW5zaW9ucyBmb3IgaW50ZXJpb3IsIGJvcmRlciwgcGFkZGluZywgYW5kIHNjcm9sbGJhci5cclxuICAgICAgICAgICAgICAgICAgIFdlIHN1YnRyYWN0IGJvcmRlciBhbmQgcGFkZGluZyB0byBnZXQgdGhlIHN1bSBvZiBpbnRlcmlvciArIHNjcm9sbGJhci4gKi9cclxuICAgICAgICAgICAgICAgIHZhciBjb21wdXRlZFZhbHVlID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBJRTw9OCBkb2Vzbid0IHN1cHBvcnQgd2luZG93LmdldENvbXB1dGVkU3R5bGUsIHRodXMgd2UgZGVmZXIgdG8galF1ZXJ5LCB3aGljaCBoYXMgYW4gZXh0ZW5zaXZlIGFycmF5XHJcbiAgICAgICAgICAgICAgICAgICBvZiBoYWNrcyB0byBhY2N1cmF0ZWx5IHJldHJpZXZlIElFOCBwcm9wZXJ0eSB2YWx1ZXMuIFJlLWltcGxlbWVudGluZyB0aGF0IGxvZ2ljIGhlcmUgaXMgbm90IHdvcnRoIGJsb2F0aW5nIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgY29kZWJhc2UgZm9yIGEgZHlpbmcgYnJvd3Nlci4gVGhlIHBlcmZvcm1hbmNlIHJlcGVyY3Vzc2lvbnMgb2YgdXNpbmcgalF1ZXJ5IGhlcmUgYXJlIG1pbmltYWwgc2luY2VcclxuICAgICAgICAgICAgICAgICAgIFZlbG9jaXR5IGlzIG9wdGltaXplZCB0byByYXJlbHkgKGFuZCBzb21ldGltZXMgbmV2ZXIpIHF1ZXJ5IHRoZSBET00uIEZ1cnRoZXIsIHRoZSAkLmNzcygpIGNvZGVwYXRoIGlzbid0IHRoYXQgc2xvdy4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChJRSA8PSA4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcHV0ZWRWYWx1ZSA9ICQuY3NzKGVsZW1lbnQsIHByb3BlcnR5KTsgLyogR0VUICovXHJcbiAgICAgICAgICAgICAgICAvKiBBbGwgb3RoZXIgYnJvd3NlcnMgc3VwcG9ydCBnZXRDb21wdXRlZFN0eWxlLiBUaGUgcmV0dXJuZWQgbGl2ZSBvYmplY3QgcmVmZXJlbmNlIGlzIGNhY2hlZCBvbnRvIGl0c1xyXG4gICAgICAgICAgICAgICAgICAgYXNzb2NpYXRlZCBlbGVtZW50IHNvIHRoYXQgaXQgZG9lcyBub3QgbmVlZCB0byBiZSByZWZldGNoZWQgdXBvbiBldmVyeSBHRVQuICovXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIEJyb3dzZXJzIGRvIG5vdCByZXR1cm4gaGVpZ2h0IGFuZCB3aWR0aCB2YWx1ZXMgZm9yIGVsZW1lbnRzIHRoYXQgYXJlIHNldCB0byBkaXNwbGF5Olwibm9uZVwiLiBUaHVzLCB3ZSB0ZW1wb3JhcmlseVxyXG4gICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZSBkaXNwbGF5IHRvIHRoZSBlbGVtZW50IHR5cGUncyBkZWZhdWx0IHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0b2dnbGVEaXNwbGF5ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgvXih3aWR0aHxoZWlnaHQpJC8udGVzdChwcm9wZXJ0eSkgJiYgQ1NTLmdldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJkaXNwbGF5XCIpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZURpc3BsYXkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDU1Muc2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCBcImRpc3BsYXlcIiwgQ1NTLlZhbHVlcy5nZXREaXNwbGF5VHlwZShlbGVtZW50KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiByZXZlcnREaXNwbGF5ICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvZ2dsZURpc3BsYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENTUy5zZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZm9yY2VTdHlsZUxvb2t1cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydHkgPT09IFwiaGVpZ2h0XCIgJiYgQ1NTLmdldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJib3hTaXppbmdcIikudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpICE9PSBcImJvcmRlci1ib3hcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRlbnRCb3hIZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodCAtIChwYXJzZUZsb2F0KENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwiYm9yZGVyVG9wV2lkdGhcIikpIHx8IDApIC0gKHBhcnNlRmxvYXQoQ1NTLmdldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJib3JkZXJCb3R0b21XaWR0aFwiKSkgfHwgMCkgLSAocGFyc2VGbG9hdChDU1MuZ2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCBcInBhZGRpbmdUb3BcIikpIHx8IDApIC0gKHBhcnNlRmxvYXQoQ1NTLmdldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJwYWRkaW5nQm90dG9tXCIpKSB8fCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmVydERpc3BsYXkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudEJveEhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eSA9PT0gXCJ3aWR0aFwiICYmIENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwiYm94U2l6aW5nXCIpLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSAhPT0gXCJib3JkZXItYm94XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50Qm94V2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoIC0gKHBhcnNlRmxvYXQoQ1NTLmdldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJib3JkZXJMZWZ0V2lkdGhcIikpIHx8IDApIC0gKHBhcnNlRmxvYXQoQ1NTLmdldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJib3JkZXJSaWdodFdpZHRoXCIpKSB8fCAwKSAtIChwYXJzZUZsb2F0KENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwicGFkZGluZ0xlZnRcIikpIHx8IDApIC0gKHBhcnNlRmxvYXQoQ1NTLmdldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJwYWRkaW5nUmlnaHRcIikpIHx8IDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2ZXJ0RGlzcGxheSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50Qm94V2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb21wdXRlZFN0eWxlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBGb3IgZWxlbWVudHMgdGhhdCBWZWxvY2l0eSBoYXNuJ3QgYmVlbiBjYWxsZWQgb24gZGlyZWN0bHkgKGUuZy4gd2hlbiBWZWxvY2l0eSBxdWVyaWVzIHRoZSBET00gb24gYmVoYWxmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgb2YgYSBwYXJlbnQgb2YgYW4gZWxlbWVudCBpdHMgYW5pbWF0aW5nKSwgcGVyZm9ybSBhIGRpcmVjdCBnZXRDb21wdXRlZFN0eWxlIGxvb2t1cCBzaW5jZSB0aGUgb2JqZWN0IGlzbid0IGNhY2hlZC4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoRGF0YShlbGVtZW50KSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LCBudWxsKTsgLyogR0VUICovXHJcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIGNvbXB1dGVkU3R5bGUgb2JqZWN0IGhhcyB5ZXQgdG8gYmUgY2FjaGVkLCBkbyBzbyBub3cuICovXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghRGF0YShlbGVtZW50KS5jb21wdXRlZFN0eWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkU3R5bGUgPSBEYXRhKGVsZW1lbnQpLmNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LCBudWxsKTsgLyogR0VUICovXHJcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgY29tcHV0ZWRTdHlsZSBpcyBjYWNoZWQsIHVzZSBpdC4gKi9cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlZFN0eWxlID0gRGF0YShlbGVtZW50KS5jb21wdXRlZFN0eWxlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogSUUgYW5kIEZpcmVmb3ggZG8gbm90IHJldHVybiBhIHZhbHVlIGZvciB0aGUgZ2VuZXJpYyBib3JkZXJDb2xvciAtLSB0aGV5IG9ubHkgcmV0dXJuIGluZGl2aWR1YWwgdmFsdWVzIGZvciBlYWNoIGJvcmRlciBzaWRlJ3MgY29sb3IuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgQXMgYSBwb2x5ZmlsbCBmb3IgcXVlcnlpbmcgaW5kaXZpZHVhbCBib3JkZXIgc2lkZSBjb2xvcnMsIGp1c3QgcmV0dXJuIHRoZSB0b3AgYm9yZGVyJ3MgY29sb3IuICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChJRSB8fCBWZWxvY2l0eS5TdGF0ZS5pc0ZpcmVmb3gpICYmIHByb3BlcnR5ID09PSBcImJvcmRlckNvbG9yXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkgPSBcImJvcmRlclRvcENvbG9yXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBJRTkgaGFzIGEgYnVnIGluIHdoaWNoIHRoZSBcImZpbHRlclwiIHByb3BlcnR5IG11c3QgYmUgYWNjZXNzZWQgZnJvbSBjb21wdXRlZFN0eWxlIHVzaW5nIHRoZSBnZXRQcm9wZXJ0eVZhbHVlIG1ldGhvZFxyXG4gICAgICAgICAgICAgICAgICAgICAgIGluc3RlYWQgb2YgYSBkaXJlY3QgcHJvcGVydHkgbG9va3VwLiBUaGUgZ2V0UHJvcGVydHlWYWx1ZSBtZXRob2QgaXMgc2xvd2VyIHRoYW4gYSBkaXJlY3QgbG9va3VwLCB3aGljaCBpcyB3aHkgd2UgYXZvaWQgaXQgYnkgZGVmYXVsdC4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoSUUgPT09IDkgJiYgcHJvcGVydHkgPT09IFwiZmlsdGVyXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZWRWYWx1ZSA9IGNvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShwcm9wZXJ0eSk7IC8qIEdFVCAqL1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkVmFsdWUgPSBjb21wdXRlZFN0eWxlW3Byb3BlcnR5XTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIEZhbGwgYmFjayB0byB0aGUgcHJvcGVydHkncyBzdHlsZSB2YWx1ZSAoaWYgZGVmaW5lZCkgd2hlbiBjb21wdXRlZFZhbHVlIHJldHVybnMgbm90aGluZyxcclxuICAgICAgICAgICAgICAgICAgICAgICB3aGljaCBjYW4gaGFwcGVuIHdoZW4gdGhlIGVsZW1lbnQgaGFzbid0IGJlZW4gcGFpbnRlZC4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29tcHV0ZWRWYWx1ZSA9PT0gXCJcIiB8fCBjb21wdXRlZFZhbHVlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkVmFsdWUgPSBlbGVtZW50LnN0eWxlW3Byb3BlcnR5XTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldmVydERpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBGb3IgdG9wLCByaWdodCwgYm90dG9tLCBhbmQgbGVmdCAoVFJCTCkgdmFsdWVzIHRoYXQgYXJlIHNldCB0byBcImF1dG9cIiBvbiBlbGVtZW50cyBvZiBcImZpeGVkXCIgb3IgXCJhYnNvbHV0ZVwiIHBvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgZGVmZXIgdG8galF1ZXJ5IGZvciBjb252ZXJ0aW5nIFwiYXV0b1wiIHRvIGEgbnVtZXJpYyB2YWx1ZS4gKEZvciBlbGVtZW50cyB3aXRoIGEgXCJzdGF0aWNcIiBvciBcInJlbGF0aXZlXCIgcG9zaXRpb24sIFwiYXV0b1wiIGhhcyB0aGUgc2FtZVxyXG4gICAgICAgICAgICAgICAgICAgZWZmZWN0IGFzIGJlaW5nIHNldCB0byAwLCBzbyBubyBjb252ZXJzaW9uIGlzIG5lY2Vzc2FyeS4pICovXHJcbiAgICAgICAgICAgICAgICAvKiBBbiBleGFtcGxlIG9mIHdoeSBudW1lcmljIGNvbnZlcnNpb24gaXMgbmVjZXNzYXJ5OiBXaGVuIGFuIGVsZW1lbnQgd2l0aCBcInBvc2l0aW9uOmFic29sdXRlXCIgaGFzIGFuIHVudG91Y2hlZCBcImxlZnRcIlxyXG4gICAgICAgICAgICAgICAgICAgcHJvcGVydHksIHdoaWNoIHJldmVydHMgdG8gXCJhdXRvXCIsIGxlZnQncyB2YWx1ZSBpcyAwIHJlbGF0aXZlIHRvIGl0cyBwYXJlbnQgZWxlbWVudCwgYnV0IGlzIG9mdGVuIG5vbi16ZXJvIHJlbGF0aXZlXHJcbiAgICAgICAgICAgICAgICAgICB0byBpdHMgKmNvbnRhaW5pbmcqIChub3QgcGFyZW50KSBlbGVtZW50LCB3aGljaCBpcyB0aGUgbmVhcmVzdCBcInBvc2l0aW9uOnJlbGF0aXZlXCIgYW5jZXN0b3Igb3IgdGhlIHZpZXdwb3J0IChhbmQgYWx3YXlzIHRoZSB2aWV3cG9ydCBpbiB0aGUgY2FzZSBvZiBcInBvc2l0aW9uOmZpeGVkXCIpLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbXB1dGVkVmFsdWUgPT09IFwiYXV0b1wiICYmIC9eKHRvcHxyaWdodHxib3R0b218bGVmdCkkL2kudGVzdChwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBjb21wdXRlUHJvcGVydHlWYWx1ZShlbGVtZW50LCBcInBvc2l0aW9uXCIpOyAvKiBHRVQgKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogRm9yIGFic29sdXRlIHBvc2l0aW9uaW5nLCBqUXVlcnkncyAkLnBvc2l0aW9uKCkgb25seSByZXR1cm5zIHZhbHVlcyBmb3IgdG9wIGFuZCBsZWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0IGFuZCBib3R0b20gd2lsbCBoYXZlIHRoZWlyIFwiYXV0b1wiIHZhbHVlIHJldmVydGVkIHRvIDAuICovXHJcbiAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogQSBqUXVlcnkgb2JqZWN0IG11c3QgYmUgY3JlYXRlZCBoZXJlIHNpbmNlIGpRdWVyeSBkb2Vzbid0IGhhdmUgYSBsb3ctbGV2ZWwgYWxpYXMgZm9yICQucG9zaXRpb24oKS5cclxuICAgICAgICAgICAgICAgICAgICAgICBOb3QgYSBiaWcgZGVhbCBzaW5jZSB3ZSdyZSBjdXJyZW50bHkgaW4gYSBHRVQgYmF0Y2ggYW55d2F5LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PT0gXCJmaXhlZFwiIHx8IChwb3NpdGlvbiA9PT0gXCJhYnNvbHV0ZVwiICYmIC90b3B8bGVmdC9pLnRlc3QocHJvcGVydHkpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBqUXVlcnkgc3RyaXBzIHRoZSBwaXhlbCB1bml0IGZyb20gaXRzIHJldHVybmVkIHZhbHVlczsgd2UgcmUtYWRkIGl0IGhlcmUgdG8gY29uZm9ybSB3aXRoIGNvbXB1dGVQcm9wZXJ0eVZhbHVlJ3MgYmVoYXZpb3IuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkVmFsdWUgPSAkKGVsZW1lbnQpLnBvc2l0aW9uKClbcHJvcGVydHldICsgXCJweFwiOyAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXB1dGVkVmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0eVZhbHVlO1xyXG5cclxuICAgICAgICAgICAgLyogSWYgdGhpcyBpcyBhIGhvb2tlZCBwcm9wZXJ0eSAoZS5nLiBcImNsaXBMZWZ0XCIgaW5zdGVhZCBvZiB0aGUgcm9vdCBwcm9wZXJ0eSBvZiBcImNsaXBcIiksXHJcbiAgICAgICAgICAgICAgIGV4dHJhY3QgdGhlIGhvb2sncyB2YWx1ZSBmcm9tIGEgbm9ybWFsaXplZCByb290UHJvcGVydHlWYWx1ZSB1c2luZyBDU1MuSG9va3MuZXh0cmFjdFZhbHVlKCkuICovXHJcbiAgICAgICAgICAgIGlmIChDU1MuSG9va3MucmVnaXN0ZXJlZFtwcm9wZXJ0eV0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBob29rID0gcHJvcGVydHksXHJcbiAgICAgICAgICAgICAgICAgICAgaG9va1Jvb3QgPSBDU1MuSG9va3MuZ2V0Um9vdChob29rKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBJZiBhIGNhY2hlZCByb290UHJvcGVydHlWYWx1ZSB3YXNuJ3QgcGFzc2VkIGluICh3aGljaCBWZWxvY2l0eSBhbHdheXMgYXR0ZW1wdHMgdG8gZG8gaW4gb3JkZXIgdG8gYXZvaWQgcmVxdWVyeWluZyB0aGUgRE9NKSxcclxuICAgICAgICAgICAgICAgICAgIHF1ZXJ5IHRoZSBET00gZm9yIHRoZSByb290IHByb3BlcnR5J3MgdmFsdWUuICovXHJcbiAgICAgICAgICAgICAgICBpZiAocm9vdFByb3BlcnR5VmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIFNpbmNlIHRoZSBicm93c2VyIGlzIG5vdyBiZWluZyBkaXJlY3RseSBxdWVyaWVkLCB1c2UgdGhlIG9mZmljaWFsIHBvc3QtcHJlZml4aW5nIHByb3BlcnR5IG5hbWUgZm9yIHRoaXMgbG9va3VwLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlID0gQ1NTLmdldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgQ1NTLk5hbWVzLnByZWZpeENoZWNrKGhvb2tSb290KVswXSk7IC8qIEdFVCAqL1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8qIElmIHRoaXMgcm9vdCBoYXMgYSBub3JtYWxpemF0aW9uIHJlZ2lzdGVyZWQsIHBlZm9ybSB0aGUgYXNzb2NpYXRlZCBub3JtYWxpemF0aW9uIGV4dHJhY3Rpb24uICovXHJcbiAgICAgICAgICAgICAgICBpZiAoQ1NTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbaG9va1Jvb3RdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm9vdFByb3BlcnR5VmFsdWUgPSBDU1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtob29rUm9vdF0oXCJleHRyYWN0XCIsIGVsZW1lbnQsIHJvb3RQcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBFeHRyYWN0IHRoZSBob29rJ3MgdmFsdWUuICovXHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eVZhbHVlID0gQ1NTLkhvb2tzLmV4dHJhY3RWYWx1ZShob29rLCByb290UHJvcGVydHlWYWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAvKiBJZiB0aGlzIGlzIGEgbm9ybWFsaXplZCBwcm9wZXJ0eSAoZS5nLiBcIm9wYWNpdHlcIiBiZWNvbWVzIFwiZmlsdGVyXCIgaW4gPD1JRTgpIG9yIFwidHJhbnNsYXRlWFwiIGJlY29tZXMgXCJ0cmFuc2Zvcm1cIiksXHJcbiAgICAgICAgICAgICAgIG5vcm1hbGl6ZSB0aGUgcHJvcGVydHkncyBuYW1lIGFuZCB2YWx1ZSwgYW5kIGhhbmRsZSB0aGUgc3BlY2lhbCBjYXNlIG9mIHRyYW5zZm9ybXMuICovXHJcbiAgICAgICAgICAgIC8qIE5vdGU6IE5vcm1hbGl6aW5nIGEgcHJvcGVydHkgaXMgbXV0dWFsbHkgZXhjbHVzaXZlIGZyb20gaG9va2luZyBhIHByb3BlcnR5IHNpbmNlIGhvb2stZXh0cmFjdGVkIHZhbHVlcyBhcmUgc3RyaWN0bHlcclxuICAgICAgICAgICAgICAgbnVtZXJpY2FsIGFuZCB0aGVyZWZvcmUgZG8gbm90IHJlcXVpcmUgbm9ybWFsaXphdGlvbiBleHRyYWN0aW9uLiAqL1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKENTUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3Byb3BlcnR5XSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5vcm1hbGl6ZWRQcm9wZXJ0eU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZFByb3BlcnR5VmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZFByb3BlcnR5TmFtZSA9IENTUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3Byb3BlcnR5XShcIm5hbWVcIiwgZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLyogVHJhbnNmb3JtIHZhbHVlcyBhcmUgY2FsY3VsYXRlZCB2aWEgbm9ybWFsaXphdGlvbiBleHRyYWN0aW9uIChzZWUgYmVsb3cpLCB3aGljaCBjaGVja3MgYWdhaW5zdCB0aGUgZWxlbWVudCdzIHRyYW5zZm9ybUNhY2hlLlxyXG4gICAgICAgICAgICAgICAgICAgQXQgbm8gcG9pbnQgZG8gdHJhbnNmb3JtIEdFVHMgZXZlciBhY3R1YWxseSBxdWVyeSB0aGUgRE9NOyBpbml0aWFsIHN0eWxlc2hlZXQgdmFsdWVzIGFyZSBuZXZlciBwcm9jZXNzZWQuXHJcbiAgICAgICAgICAgICAgICAgICBUaGlzIGlzIGJlY2F1c2UgcGFyc2luZyAzRCB0cmFuc2Zvcm0gbWF0cmljZXMgaXMgbm90IGFsd2F5cyBhY2N1cmF0ZSBhbmQgd291bGQgYmxvYXQgb3VyIGNvZGViYXNlO1xyXG4gICAgICAgICAgICAgICAgICAgdGh1cywgbm9ybWFsaXphdGlvbiBleHRyYWN0aW9uIGRlZmF1bHRzIGluaXRpYWwgdHJhbnNmb3JtIHZhbHVlcyB0byB0aGVpciB6ZXJvLXZhbHVlcyAoZS5nLiAxIGZvciBzY2FsZVggYW5kIDAgZm9yIHRyYW5zbGF0ZVgpLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRQcm9wZXJ0eU5hbWUgIT09IFwidHJhbnNmb3JtXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkUHJvcGVydHlWYWx1ZSA9IGNvbXB1dGVQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIENTUy5OYW1lcy5wcmVmaXhDaGVjayhub3JtYWxpemVkUHJvcGVydHlOYW1lKVswXSk7IC8qIEdFVCAqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGUgdmFsdWUgaXMgYSBDU1MgbnVsbC12YWx1ZSBhbmQgdGhpcyBwcm9wZXJ0eSBoYXMgYSBob29rIHRlbXBsYXRlLCB1c2UgdGhhdCB6ZXJvLXZhbHVlIHRlbXBsYXRlIHNvIHRoYXQgaG9va3MgY2FuIGJlIGV4dHJhY3RlZCBmcm9tIGl0LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChDU1MuVmFsdWVzLmlzQ1NTTnVsbFZhbHVlKG5vcm1hbGl6ZWRQcm9wZXJ0eVZhbHVlKSAmJiBDU1MuSG9va3MudGVtcGxhdGVzW3Byb3BlcnR5XSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkUHJvcGVydHlWYWx1ZSA9IENTUy5Ib29rcy50ZW1wbGF0ZXNbcHJvcGVydHldWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eVZhbHVlID0gQ1NTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcHJvcGVydHldKFwiZXh0cmFjdFwiLCBlbGVtZW50LCBub3JtYWxpemVkUHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qIElmIGEgKG51bWVyaWMpIHZhbHVlIHdhc24ndCBwcm9kdWNlZCB2aWEgaG9vayBleHRyYWN0aW9uIG9yIG5vcm1hbGl6YXRpb24sIHF1ZXJ5IHRoZSBET00uICovXHJcbiAgICAgICAgICAgIGlmICghL15bXFxkLV0vLnRlc3QocHJvcGVydHlWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIC8qIEZvciBTVkcgZWxlbWVudHMsIGRpbWVuc2lvbmFsIHByb3BlcnRpZXMgKHdoaWNoIFNWR0F0dHJpYnV0ZSgpIGRldGVjdHMpIGFyZSB0d2VlbmVkIHZpYVxyXG4gICAgICAgICAgICAgICAgICAgdGhlaXIgSFRNTCBhdHRyaWJ1dGUgdmFsdWVzIGluc3RlYWQgb2YgdGhlaXIgQ1NTIHN0eWxlIHZhbHVlcy4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChEYXRhKGVsZW1lbnQpICYmIERhdGEoZWxlbWVudCkuaXNTVkcgJiYgQ1NTLk5hbWVzLlNWR0F0dHJpYnV0ZShwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBTaW5jZSB0aGUgaGVpZ2h0L3dpZHRoIGF0dHJpYnV0ZSB2YWx1ZXMgbXVzdCBiZSBzZXQgbWFudWFsbHksIHRoZXkgZG9uJ3QgcmVmbGVjdCBjb21wdXRlZCB2YWx1ZXMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgVGh1cywgd2UgdXNlIHVzZSBnZXRCQm94KCkgdG8gZW5zdXJlIHdlIGFsd2F5cyBnZXQgdmFsdWVzIGZvciBlbGVtZW50cyB3aXRoIHVuZGVmaW5lZCBoZWlnaHQvd2lkdGggYXR0cmlidXRlcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoL14oaGVpZ2h0fHdpZHRoKSQvaS50ZXN0KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eVZhbHVlID0gZWxlbWVudC5nZXRCQm94KClbcHJvcGVydHldO1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIE90aGVyd2lzZSwgYWNjZXNzIHRoZSBhdHRyaWJ1dGUgdmFsdWUgZGlyZWN0bHkuICovXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlWYWx1ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKHByb3BlcnR5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5VmFsdWUgPSBjb21wdXRlUHJvcGVydHlWYWx1ZShlbGVtZW50LCBDU1MuTmFtZXMucHJlZml4Q2hlY2socHJvcGVydHkpWzBdKTsgLyogR0VUICovXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qIFNpbmNlIHByb3BlcnR5IGxvb2t1cHMgYXJlIGZvciBhbmltYXRpb24gcHVycG9zZXMgKHdoaWNoIGVudGFpbHMgY29tcHV0aW5nIHRoZSBudW1lcmljIGRlbHRhIGJldHdlZW4gc3RhcnQgYW5kIGVuZCB2YWx1ZXMpLFxyXG4gICAgICAgICAgICAgICBjb252ZXJ0IENTUyBudWxsLXZhbHVlcyB0byBhbiBpbnRlZ2VyIG9mIHZhbHVlIDAuICovXHJcbiAgICAgICAgICAgIGlmIChDU1MuVmFsdWVzLmlzQ1NTTnVsbFZhbHVlKHByb3BlcnR5VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eVZhbHVlID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKFZlbG9jaXR5LmRlYnVnID49IDIpIGNvbnNvbGUubG9nKFwiR2V0IFwiICsgcHJvcGVydHkgKyBcIjogXCIgKyBwcm9wZXJ0eVZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0eVZhbHVlO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qIFRoZSBzaW5ndWxhciBzZXRQcm9wZXJ0eVZhbHVlLCB3aGljaCByb3V0ZXMgdGhlIGxvZ2ljIGZvciBhbGwgbm9ybWFsaXphdGlvbnMsIGhvb2tzLCBhbmQgc3RhbmRhcmQgQ1NTIHByb3BlcnRpZXMuICovXHJcbiAgICAgICAgc2V0UHJvcGVydHlWYWx1ZTogZnVuY3Rpb24oZWxlbWVudCwgcHJvcGVydHksIHByb3BlcnR5VmFsdWUsIHJvb3RQcm9wZXJ0eVZhbHVlLCBzY3JvbGxEYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eTtcclxuXHJcbiAgICAgICAgICAgIC8qIEluIG9yZGVyIHRvIGJlIHN1YmplY3RlZCB0byBjYWxsIG9wdGlvbnMgYW5kIGVsZW1lbnQgcXVldWVpbmcsIHNjcm9sbCBhbmltYXRpb24gaXMgcm91dGVkIHRocm91Z2ggVmVsb2NpdHkgYXMgaWYgaXQgd2VyZSBhIHN0YW5kYXJkIENTUyBwcm9wZXJ0eS4gKi9cclxuICAgICAgICAgICAgaWYgKHByb3BlcnR5ID09PSBcInNjcm9sbFwiKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBJZiBhIGNvbnRhaW5lciBvcHRpb24gaXMgcHJlc2VudCwgc2Nyb2xsIHRoZSBjb250YWluZXIgaW5zdGVhZCBvZiB0aGUgYnJvd3NlciB3aW5kb3cuICovXHJcbiAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsRGF0YS5jb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxEYXRhLmNvbnRhaW5lcltcInNjcm9sbFwiICsgc2Nyb2xsRGF0YS5kaXJlY3Rpb25dID0gcHJvcGVydHlWYWx1ZTtcclxuICAgICAgICAgICAgICAgIC8qIE90aGVyd2lzZSwgVmVsb2NpdHkgZGVmYXVsdHMgdG8gc2Nyb2xsaW5nIHRoZSBicm93c2VyIHdpbmRvdy4gKi9cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjcm9sbERhdGEuZGlyZWN0aW9uID09PSBcIkxlZnRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8ocHJvcGVydHlWYWx1ZSwgc2Nyb2xsRGF0YS5hbHRlcm5hdGVWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKHNjcm9sbERhdGEuYWx0ZXJuYXRlVmFsdWUsIHByb3BlcnR5VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8qIFRyYW5zZm9ybXMgKHRyYW5zbGF0ZVgsIHJvdGF0ZVosIGV0Yy4pIGFyZSBhcHBsaWVkIHRvIGEgcGVyLWVsZW1lbnQgdHJhbnNmb3JtQ2FjaGUgb2JqZWN0LCB3aGljaCBpcyBtYW51YWxseSBmbHVzaGVkIHZpYSBmbHVzaFRyYW5zZm9ybUNhY2hlKCkuXHJcbiAgICAgICAgICAgICAgICAgICBUaHVzLCBmb3Igbm93LCB3ZSBtZXJlbHkgY2FjaGUgdHJhbnNmb3JtcyBiZWluZyBTRVQuICovXHJcbiAgICAgICAgICAgICAgICBpZiAoQ1NTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcHJvcGVydHldICYmIENTUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3Byb3BlcnR5XShcIm5hbWVcIiwgZWxlbWVudCkgPT09IFwidHJhbnNmb3JtXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBQZXJmb3JtIGEgbm9ybWFsaXphdGlvbiBpbmplY3Rpb24uICovXHJcbiAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogVGhlIG5vcm1hbGl6YXRpb24gbG9naWMgaGFuZGxlcyB0aGUgdHJhbnNmb3JtQ2FjaGUgdXBkYXRpbmcuICovXHJcbiAgICAgICAgICAgICAgICAgICAgQ1NTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcHJvcGVydHldKFwiaW5qZWN0XCIsIGVsZW1lbnQsIHByb3BlcnR5VmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eU5hbWUgPSBcInRyYW5zZm9ybVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5VmFsdWUgPSBEYXRhKGVsZW1lbnQpLnRyYW5zZm9ybUNhY2hlW3Byb3BlcnR5XTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogSW5qZWN0IGhvb2tzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChDU1MuSG9va3MucmVnaXN0ZXJlZFtwcm9wZXJ0eV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhvb2tOYW1lID0gcHJvcGVydHksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob29rUm9vdCA9IENTUy5Ib29rcy5nZXRSb290KHByb3BlcnR5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIGEgY2FjaGVkIHJvb3RQcm9wZXJ0eVZhbHVlIHdhcyBub3QgcHJvdmlkZWQsIHF1ZXJ5IHRoZSBET00gZm9yIHRoZSBob29rUm9vdCdzIGN1cnJlbnQgdmFsdWUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlID0gcm9vdFByb3BlcnR5VmFsdWUgfHwgQ1NTLmdldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgaG9va1Jvb3QpOyAvKiBHRVQgKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5VmFsdWUgPSBDU1MuSG9va3MuaW5qZWN0VmFsdWUoaG9va05hbWUsIHByb3BlcnR5VmFsdWUsIHJvb3RQcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkgPSBob29rUm9vdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIE5vcm1hbGl6ZSBuYW1lcyBhbmQgdmFsdWVzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChDU1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtwcm9wZXJ0eV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlWYWx1ZSA9IENTUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3Byb3BlcnR5XShcImluamVjdFwiLCBlbGVtZW50LCBwcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkgPSBDU1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtwcm9wZXJ0eV0oXCJuYW1lXCIsIGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogQXNzaWduIHRoZSBhcHByb3ByaWF0ZSB2ZW5kb3IgcHJlZml4IGJlZm9yZSBwZXJmb3JtaW5nIGFuIG9mZmljaWFsIHN0eWxlIHVwZGF0ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eU5hbWUgPSBDU1MuTmFtZXMucHJlZml4Q2hlY2socHJvcGVydHkpWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBBIHRyeS9jYXRjaCBpcyB1c2VkIGZvciBJRTw9OCwgd2hpY2ggdGhyb3dzIGFuIGVycm9yIHdoZW4gXCJpbnZhbGlkXCIgQ1NTIHZhbHVlcyBhcmUgc2V0LCBlLmcuIGEgbmVnYXRpdmUgd2lkdGguXHJcbiAgICAgICAgICAgICAgICAgICAgICAgVHJ5L2NhdGNoIGlzIGF2b2lkZWQgZm9yIG90aGVyIGJyb3dzZXJzIHNpbmNlIGl0IGluY3VycyBhIHBlcmZvcm1hbmNlIG92ZXJoZWFkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChJRSA8PSA4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlW3Byb3BlcnR5TmFtZV0gPSBwcm9wZXJ0eVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgeyBpZiAoVmVsb2NpdHkuZGVidWcpIGNvbnNvbGUubG9nKFwiQnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IFtcIiArIHByb3BlcnR5VmFsdWUgKyBcIl0gZm9yIFtcIiArIHByb3BlcnR5TmFtZSArIFwiXVwiKTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8qIFNWRyBlbGVtZW50cyBoYXZlIHRoZWlyIGRpbWVuc2lvbmFsIHByb3BlcnRpZXMgKHdpZHRoLCBoZWlnaHQsIHgsIHksIGN4LCBldGMuKSBhcHBsaWVkIGRpcmVjdGx5IGFzIGF0dHJpYnV0ZXMgaW5zdGVhZCBvZiBhcyBzdHlsZXMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogSUU4IGRvZXMgbm90IHN1cHBvcnQgU1ZHIGVsZW1lbnRzLCBzbyBpdCdzIG9rYXkgdGhhdCB3ZSBza2lwIGl0IGZvciBTVkcgYW5pbWF0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoRGF0YShlbGVtZW50KSAmJiBEYXRhKGVsZW1lbnQpLmlzU1ZHICYmIENTUy5OYW1lcy5TVkdBdHRyaWJ1dGUocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IEZvciBTVkcgYXR0cmlidXRlcywgdmVuZG9yLXByZWZpeGVkIHByb3BlcnR5IG5hbWVzIGFyZSBuZXZlciB1c2VkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBOb3QgYWxsIENTUyBwcm9wZXJ0aWVzIGNhbiBiZSBhbmltYXRlZCB2aWEgYXR0cmlidXRlcywgYnV0IHRoZSBicm93c2VyIHdvbid0IHRocm93IGFuIGVycm9yIGZvciB1bnN1cHBvcnRlZCBwcm9wZXJ0aWVzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShwcm9wZXJ0eSwgcHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZVtwcm9wZXJ0eU5hbWVdID0gcHJvcGVydHlWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChWZWxvY2l0eS5kZWJ1ZyA+PSAyKSBjb25zb2xlLmxvZyhcIlNldCBcIiArIHByb3BlcnR5ICsgXCIgKFwiICsgcHJvcGVydHlOYW1lICsgXCIpOiBcIiArIHByb3BlcnR5VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBSZXR1cm4gdGhlIG5vcm1hbGl6ZWQgcHJvcGVydHkgbmFtZSBhbmQgdmFsdWUgaW4gY2FzZSB0aGUgY2FsbGVyIHdhbnRzIHRvIGtub3cgaG93IHRoZXNlIHZhbHVlcyB3ZXJlIG1vZGlmaWVkIGJlZm9yZSBiZWluZyBhcHBsaWVkIHRvIHRoZSBET00uICovXHJcbiAgICAgICAgICAgIHJldHVybiBbIHByb3BlcnR5TmFtZSwgcHJvcGVydHlWYWx1ZSBdO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qIFRvIGluY3JlYXNlIHBlcmZvcm1hbmNlIGJ5IGJhdGNoaW5nIHRyYW5zZm9ybSB1cGRhdGVzIGludG8gYSBzaW5nbGUgU0VULCB0cmFuc2Zvcm1zIGFyZSBub3QgZGlyZWN0bHkgYXBwbGllZCB0byBhbiBlbGVtZW50IHVudGlsIGZsdXNoVHJhbnNmb3JtQ2FjaGUoKSBpcyBjYWxsZWQuICovXHJcbiAgICAgICAgLyogTm90ZTogVmVsb2NpdHkgYXBwbGllcyB0cmFuc2Zvcm0gcHJvcGVydGllcyBpbiB0aGUgc2FtZSBvcmRlciB0aGF0IHRoZXkgYXJlIGNocm9ub2dpY2FsbHkgaW50cm9kdWNlZCB0byB0aGUgZWxlbWVudCdzIENTUyBzdHlsZXMuICovXHJcbiAgICAgICAgZmx1c2hUcmFuc2Zvcm1DYWNoZTogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgICAgICB2YXIgdHJhbnNmb3JtU3RyaW5nID0gXCJcIjtcclxuXHJcbiAgICAgICAgICAgIC8qIENlcnRhaW4gYnJvd3NlcnMgcmVxdWlyZSB0aGF0IFNWRyB0cmFuc2Zvcm1zIGJlIGFwcGxpZWQgYXMgYW4gYXR0cmlidXRlLiBIb3dldmVyLCB0aGUgU1ZHIHRyYW5zZm9ybSBhdHRyaWJ1dGUgdGFrZXMgYSBtb2RpZmllZCB2ZXJzaW9uIG9mIENTUydzIHRyYW5zZm9ybSBzdHJpbmdcclxuICAgICAgICAgICAgICAgKHVuaXRzIGFyZSBkcm9wcGVkIGFuZCwgZXhjZXB0IGZvciBza2V3WC9ZLCBzdWJwcm9wZXJ0aWVzIGFyZSBtZXJnZWQgaW50byB0aGVpciBtYXN0ZXIgcHJvcGVydHkgLS0gZS5nLiBzY2FsZVggYW5kIHNjYWxlWSBhcmUgbWVyZ2VkIGludG8gc2NhbGUoWCBZKS4gKi9cclxuICAgICAgICAgICAgaWYgKChJRSB8fCAoVmVsb2NpdHkuU3RhdGUuaXNBbmRyb2lkICYmICFWZWxvY2l0eS5TdGF0ZS5pc0Nocm9tZSkpICYmIERhdGEoZWxlbWVudCkuaXNTVkcpIHtcclxuICAgICAgICAgICAgICAgIC8qIFNpbmNlIHRyYW5zZm9ybSB2YWx1ZXMgYXJlIHN0b3JlZCBpbiB0aGVpciBwYXJlbnRoZXNlcy13cmFwcGVkIGZvcm0sIHdlIHVzZSBhIGhlbHBlciBmdW5jdGlvbiB0byBzdHJpcCBvdXQgdGhlaXIgbnVtZXJpYyB2YWx1ZXMuXHJcbiAgICAgICAgICAgICAgICAgICBGdXJ0aGVyLCBTVkcgdHJhbnNmb3JtIHByb3BlcnRpZXMgb25seSB0YWtlIHVuaXRsZXNzIChyZXByZXNlbnRpbmcgcGl4ZWxzKSB2YWx1ZXMsIHNvIGl0J3Mgb2theSB0aGF0IHBhcnNlRmxvYXQoKSBzdHJpcHMgdGhlIHVuaXQgc3VmZml4ZWQgdG8gdGhlIGZsb2F0IHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0VHJhbnNmb3JtRmxvYXQgKHRyYW5zZm9ybVByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoQ1NTLmdldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgdHJhbnNmb3JtUHJvcGVydHkpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBDcmVhdGUgYW4gb2JqZWN0IHRvIG9yZ2FuaXplIGFsbCB0aGUgdHJhbnNmb3JtcyB0aGF0IHdlJ2xsIGFwcGx5IHRvIHRoZSBTVkcgZWxlbWVudC4gVG8ga2VlcCB0aGUgbG9naWMgc2ltcGxlLFxyXG4gICAgICAgICAgICAgICAgICAgd2UgcHJvY2VzcyAqYWxsKiB0cmFuc2Zvcm0gcHJvcGVydGllcyAtLSBldmVuIHRob3NlIHRoYXQgbWF5IG5vdCBiZSBleHBsaWNpdGx5IGFwcGxpZWQgKHNpbmNlIHRoZXkgZGVmYXVsdCB0byB0aGVpciB6ZXJvLXZhbHVlcyBhbnl3YXkpLiAqL1xyXG4gICAgICAgICAgICAgICAgdmFyIFNWR1RyYW5zZm9ybXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlOiBbIGdldFRyYW5zZm9ybUZsb2F0KFwidHJhbnNsYXRlWFwiKSwgZ2V0VHJhbnNmb3JtRmxvYXQoXCJ0cmFuc2xhdGVZXCIpIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2tld1g6IFsgZ2V0VHJhbnNmb3JtRmxvYXQoXCJza2V3WFwiKSBdLCBza2V3WTogWyBnZXRUcmFuc2Zvcm1GbG9hdChcInNrZXdZXCIpIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIHNjYWxlIHByb3BlcnR5IGlzIHNldCAobm9uLTEpLCB1c2UgdGhhdCB2YWx1ZSBmb3IgdGhlIHNjYWxlWCBhbmQgc2NhbGVZIHZhbHVlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICh0aGlzIGJlaGF2aW9yIG1pbWljcyB0aGUgcmVzdWx0IG9mIGFuaW1hdGluZyBhbGwgdGhlc2UgcHJvcGVydGllcyBhdCBvbmNlIG9uIEhUTUwgZWxlbWVudHMpLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlOiBnZXRUcmFuc2Zvcm1GbG9hdChcInNjYWxlXCIpICE9PSAxID8gWyBnZXRUcmFuc2Zvcm1GbG9hdChcInNjYWxlXCIpLCBnZXRUcmFuc2Zvcm1GbG9hdChcInNjYWxlXCIpIF0gOiBbIGdldFRyYW5zZm9ybUZsb2F0KFwic2NhbGVYXCIpLCBnZXRUcmFuc2Zvcm1GbG9hdChcInNjYWxlWVwiKSBdLFxyXG4gICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IFNWRydzIHJvdGF0ZSB0cmFuc2Zvcm0gdGFrZXMgdGhyZWUgdmFsdWVzOiByb3RhdGlvbiBkZWdyZWVzIGZvbGxvd2VkIGJ5IHRoZSBYIGFuZCBZIHZhbHVlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGRlZmluaW5nIHRoZSByb3RhdGlvbidzIG9yaWdpbiBwb2ludC4gV2UgaWdub3JlIHRoZSBvcmlnaW4gdmFsdWVzIChkZWZhdWx0IHRoZW0gdG8gMCkuICovXHJcbiAgICAgICAgICAgICAgICAgICAgcm90YXRlOiBbIGdldFRyYW5zZm9ybUZsb2F0KFwicm90YXRlWlwiKSwgMCwgMCBdXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIEl0ZXJhdGUgdGhyb3VnaCB0aGUgdHJhbnNmb3JtIHByb3BlcnRpZXMgaW4gdGhlIHVzZXItZGVmaW5lZCBwcm9wZXJ0eSBtYXAgb3JkZXIuXHJcbiAgICAgICAgICAgICAgICAgICAoVGhpcyBtaW1pY3MgdGhlIGJlaGF2aW9yIG9mIG5vbi1TVkcgdHJhbnNmb3JtIGFuaW1hdGlvbi4pICovXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goRGF0YShlbGVtZW50KS50cmFuc2Zvcm1DYWNoZSwgZnVuY3Rpb24odHJhbnNmb3JtTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIEV4Y2VwdCBmb3Igd2l0aCBza2V3WC9ZLCByZXZlcnQgdGhlIGF4aXMtc3BlY2lmaWMgdHJhbnNmb3JtIHN1YnByb3BlcnRpZXMgdG8gdGhlaXIgYXhpcy1mcmVlIG1hc3RlclxyXG4gICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMgc28gdGhhdCB0aGV5IG1hdGNoIHVwIHdpdGggU1ZHJ3MgYWNjZXB0ZWQgdHJhbnNmb3JtIHByb3BlcnRpZXMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKC9edHJhbnNsYXRlL2kudGVzdCh0cmFuc2Zvcm1OYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1OYW1lID0gXCJ0cmFuc2xhdGVcIjtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKC9ec2NhbGUvaS50ZXN0KHRyYW5zZm9ybU5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybU5hbWUgPSBcInNjYWxlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvXnJvdGF0ZS9pLnRlc3QodHJhbnNmb3JtTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtTmFtZSA9IFwicm90YXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBDaGVjayB0aGF0IHdlIGhhdmVuJ3QgeWV0IGRlbGV0ZWQgdGhlIHByb3BlcnR5IGZyb20gdGhlIFNWR1RyYW5zZm9ybXMgY29udGFpbmVyLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChTVkdUcmFuc2Zvcm1zW3RyYW5zZm9ybU5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEFwcGVuZCB0aGUgdHJhbnNmb3JtIHByb3BlcnR5IGluIHRoZSBTVkctc3VwcG9ydGVkIHRyYW5zZm9ybSBmb3JtYXQuIEFzIHBlciB0aGUgc3BlYywgc3Vycm91bmQgdGhlIHNwYWNlLWRlbGltaXRlZCB2YWx1ZXMgaW4gcGFyZW50aGVzZXMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybVN0cmluZyArPSB0cmFuc2Zvcm1OYW1lICsgXCIoXCIgKyBTVkdUcmFuc2Zvcm1zW3RyYW5zZm9ybU5hbWVdLmpvaW4oXCIgXCIpICsgXCIpXCIgKyBcIiBcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEFmdGVyIHByb2Nlc3NpbmcgYW4gU1ZHIHRyYW5zZm9ybSBwcm9wZXJ0eSwgZGVsZXRlIGl0IGZyb20gdGhlIFNWR1RyYW5zZm9ybXMgY29udGFpbmVyIHNvIHdlIGRvbid0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlLWluc2VydCB0aGUgc2FtZSBtYXN0ZXIgcHJvcGVydHkgaWYgd2UgZW5jb3VudGVyIGFub3RoZXIgb25lIG9mIGl0cyBheGlzLXNwZWNpZmljIHByb3BlcnRpZXMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBTVkdUcmFuc2Zvcm1zW3RyYW5zZm9ybU5hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zZm9ybVZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHBlcnNwZWN0aXZlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIFRyYW5zZm9ybSBwcm9wZXJ0aWVzIGFyZSBzdG9yZWQgYXMgbWVtYmVycyBvZiB0aGUgdHJhbnNmb3JtQ2FjaGUgb2JqZWN0LiBDb25jYXRlbmF0ZSBhbGwgdGhlIG1lbWJlcnMgaW50byBhIHN0cmluZy4gKi9cclxuICAgICAgICAgICAgICAgICQuZWFjaChEYXRhKGVsZW1lbnQpLnRyYW5zZm9ybUNhY2hlLCBmdW5jdGlvbih0cmFuc2Zvcm1OYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtVmFsdWUgPSBEYXRhKGVsZW1lbnQpLnRyYW5zZm9ybUNhY2hlW3RyYW5zZm9ybU5hbWVdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBUcmFuc2Zvcm0ncyBwZXJzcGVjdGl2ZSBzdWJwcm9wZXJ0eSBtdXN0IGJlIHNldCBmaXJzdCBpbiBvcmRlciB0byB0YWtlIGVmZmVjdC4gU3RvcmUgaXQgdGVtcG9yYXJpbHkuICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zZm9ybU5hbWUgPT09IFwidHJhbnNmb3JtUGVyc3BlY3RpdmVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzcGVjdGl2ZSA9IHRyYW5zZm9ybVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIElFOSBvbmx5IHN1cHBvcnRzIG9uZSByb3RhdGlvbiB0eXBlLCByb3RhdGVaLCB3aGljaCBpdCByZWZlcnMgdG8gYXMgXCJyb3RhdGVcIi4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoSUUgPT09IDkgJiYgdHJhbnNmb3JtTmFtZSA9PT0gXCJyb3RhdGVaXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtTmFtZSA9IFwicm90YXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1TdHJpbmcgKz0gdHJhbnNmb3JtTmFtZSArIHRyYW5zZm9ybVZhbHVlICsgXCIgXCI7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBJZiBwcmVzZW50LCBzZXQgdGhlIHBlcnNwZWN0aXZlIHN1YnByb3BlcnR5IGZpcnN0LiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKHBlcnNwZWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtU3RyaW5nID0gXCJwZXJzcGVjdGl2ZVwiICsgcGVyc3BlY3RpdmUgKyBcIiBcIiArIHRyYW5zZm9ybVN0cmluZztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQ1NTLnNldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJ0cmFuc2Zvcm1cIiwgdHJhbnNmb3JtU3RyaW5nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qIFJlZ2lzdGVyIGhvb2tzIGFuZCBub3JtYWxpemF0aW9ucy4gKi9cclxuICAgIENTUy5Ib29rcy5yZWdpc3RlcigpO1xyXG4gICAgQ1NTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyKCk7XHJcblxyXG4gICAgLyogQWxsb3cgaG9vayBzZXR0aW5nIGluIHRoZSBzYW1lIGZhc2hpb24gYXMgalF1ZXJ5J3MgJC5jc3MoKS4gKi9cclxuICAgIFZlbG9jaXR5Lmhvb2sgPSBmdW5jdGlvbiAoZWxlbWVudHMsIGFyZzIsIGFyZzMpIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIGVsZW1lbnRzID0gc2FuaXRpemVFbGVtZW50cyhlbGVtZW50cyk7XHJcblxyXG4gICAgICAgICQuZWFjaChlbGVtZW50cywgZnVuY3Rpb24oaSwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICAvKiBJbml0aWFsaXplIFZlbG9jaXR5J3MgcGVyLWVsZW1lbnQgZGF0YSBjYWNoZSBpZiB0aGlzIGVsZW1lbnQgaGFzbid0IHByZXZpb3VzbHkgYmVlbiBhbmltYXRlZC4gKi9cclxuICAgICAgICAgICAgaWYgKERhdGEoZWxlbWVudCkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgVmVsb2NpdHkuaW5pdChlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyogR2V0IHByb3BlcnR5IHZhbHVlLiBJZiBhbiBlbGVtZW50IHNldCB3YXMgcGFzc2VkIGluLCBvbmx5IHJldHVybiB0aGUgdmFsdWUgZm9yIHRoZSBmaXJzdCBlbGVtZW50LiAqL1xyXG4gICAgICAgICAgICBpZiAoYXJnMyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gVmVsb2NpdHkuQ1NTLmdldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgYXJnMik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qIFNldCBwcm9wZXJ0eSB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8qIHNQViByZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBub3JtYWxpemVkIHByb3BlcnR5TmFtZS9wcm9wZXJ0eVZhbHVlIHBhaXIgdXNlZCB0byB1cGRhdGUgdGhlIERPTS4gKi9cclxuICAgICAgICAgICAgICAgIHZhciBhZGp1c3RlZFNldCA9IFZlbG9jaXR5LkNTUy5zZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIGFyZzIsIGFyZzMpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIFRyYW5zZm9ybSBwcm9wZXJ0aWVzIGRvbid0IGF1dG9tYXRpY2FsbHkgc2V0LiBUaGV5IGhhdmUgdG8gYmUgZmx1c2hlZCB0byB0aGUgRE9NLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKGFkanVzdGVkU2V0WzBdID09PSBcInRyYW5zZm9ybVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkuQ1NTLmZsdXNoVHJhbnNmb3JtQ2FjaGUoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBhZGp1c3RlZFNldDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKioqKioqKioqKioqKioqKlxyXG4gICAgICAgIEFuaW1hdGlvblxyXG4gICAgKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgdmFyIGFuaW1hdGUgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICBDYWxsIENoYWluXHJcbiAgICAgICAgKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAvKiBMb2dpYyBmb3IgZGV0ZXJtaW5pbmcgd2hhdCB0byByZXR1cm4gdG8gdGhlIGNhbGwgc3RhY2sgd2hlbiBleGl0aW5nIG91dCBvZiBWZWxvY2l0eS4gKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRDaGFpbiAoKSB7XHJcbiAgICAgICAgICAgIC8qIElmIHdlIGFyZSB1c2luZyB0aGUgdXRpbGl0eSBmdW5jdGlvbiwgYXR0ZW1wdCB0byByZXR1cm4gdGhpcyBjYWxsJ3MgcHJvbWlzZS4gSWYgbm8gcHJvbWlzZSBsaWJyYXJ5IHdhcyBkZXRlY3RlZCxcclxuICAgICAgICAgICAgICAgZGVmYXVsdCB0byBudWxsIGluc3RlYWQgb2YgcmV0dXJuaW5nIHRoZSB0YXJnZXRlZCBlbGVtZW50cyBzbyB0aGF0IHV0aWxpdHkgZnVuY3Rpb24ncyByZXR1cm4gdmFsdWUgaXMgc3RhbmRhcmRpemVkLiAqL1xyXG4gICAgICAgICAgICBpZiAoaXNVdGlsaXR5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZURhdGEucHJvbWlzZSB8fCBudWxsO1xyXG4gICAgICAgICAgICAvKiBPdGhlcndpc2UsIGlmIHdlJ3JlIHVzaW5nICQuZm4sIHJldHVybiB0aGUgalF1ZXJ5LS9aZXB0by13cmFwcGVkIGVsZW1lbnQgc2V0LiAqL1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRzV3JhcHBlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICBBcmd1bWVudHMgQXNzaWdubWVudFxyXG4gICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIC8qIFRvIGFsbG93IGZvciBleHByZXNzaXZlIENvZmZlZVNjcmlwdCBjb2RlLCBWZWxvY2l0eSBzdXBwb3J0cyBhbiBhbHRlcm5hdGl2ZSBzeW50YXggaW4gd2hpY2ggXCJwcm9wZXJ0aWVzXCIgYW5kIFwib3B0aW9uc1wiXHJcbiAgICAgICAgICAgb2JqZWN0cyBhcmUgZGVmaW5lZCBvbiBhIGNvbnRhaW5lciBvYmplY3QgdGhhdCdzIHBhc3NlZCBpbiBhcyBWZWxvY2l0eSdzIHNvbGUgYXJndW1lbnQuICovXHJcbiAgICAgICAgLyogTm90ZTogU29tZSBicm93c2VycyBhdXRvbWF0aWNhbGx5IHBvcHVsYXRlIGFyZ3VtZW50cyB3aXRoIGEgXCJwcm9wZXJ0aWVzXCIgb2JqZWN0LiBXZSBkZXRlY3QgaXQgYnkgY2hlY2tpbmcgZm9yIGl0cyBkZWZhdWx0IFwibmFtZXNcIiBwcm9wZXJ0eS4gKi9cclxuICAgICAgICB2YXIgc3ludGFjdGljU3VnYXIgPSAoYXJndW1lbnRzWzBdICYmICgoJC5pc1BsYWluT2JqZWN0KGFyZ3VtZW50c1swXS5wcm9wZXJ0aWVzKSAmJiAhYXJndW1lbnRzWzBdLnByb3BlcnRpZXMubmFtZXMpIHx8IFR5cGUuaXNTdHJpbmcoYXJndW1lbnRzWzBdLnByb3BlcnRpZXMpKSksXHJcbiAgICAgICAgICAgIC8qIFdoZXRoZXIgVmVsb2NpdHkgd2FzIGNhbGxlZCB2aWEgdGhlIHV0aWxpdHkgZnVuY3Rpb24gKGFzIG9wcG9zZWQgdG8gb24gYSBqUXVlcnkvWmVwdG8gb2JqZWN0KS4gKi9cclxuICAgICAgICAgICAgaXNVdGlsaXR5LFxyXG4gICAgICAgICAgICAvKiBXaGVuIFZlbG9jaXR5IGlzIGNhbGxlZCB2aWEgdGhlIHV0aWxpdHkgZnVuY3Rpb24gKCQuVmVsb2NpdHkoKS9WZWxvY2l0eSgpKSwgZWxlbWVudHMgYXJlIGV4cGxpY2l0bHlcclxuICAgICAgICAgICAgICAgcGFzc2VkIGluIGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXIuIFRodXMsIGFyZ3VtZW50IHBvc2l0aW9uaW5nIHZhcmllcy4gV2Ugbm9ybWFsaXplIHRoZW0gaGVyZS4gKi9cclxuICAgICAgICAgICAgZWxlbWVudHNXcmFwcGVkLFxyXG4gICAgICAgICAgICBhcmd1bWVudEluZGV4O1xyXG5cclxuICAgICAgICB2YXIgZWxlbWVudHMsXHJcbiAgICAgICAgICAgIHByb3BlcnRpZXNNYXAsXHJcbiAgICAgICAgICAgIG9wdGlvbnM7XHJcblxyXG4gICAgICAgIC8qIERldGVjdCBqUXVlcnkvWmVwdG8gZWxlbWVudHMgYmVpbmcgYW5pbWF0ZWQgdmlhIHRoZSAkLmZuIG1ldGhvZC4gKi9cclxuICAgICAgICBpZiAoVHlwZS5pc1dyYXBwZWQodGhpcykpIHtcclxuICAgICAgICAgICAgaXNVdGlsaXR5ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBhcmd1bWVudEluZGV4ID0gMDtcclxuICAgICAgICAgICAgZWxlbWVudHMgPSB0aGlzO1xyXG4gICAgICAgICAgICBlbGVtZW50c1dyYXBwZWQgPSB0aGlzO1xyXG4gICAgICAgIC8qIE90aGVyd2lzZSwgcmF3IGVsZW1lbnRzIGFyZSBiZWluZyBhbmltYXRlZCB2aWEgdGhlIHV0aWxpdHkgZnVuY3Rpb24uICovXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaXNVdGlsaXR5ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGFyZ3VtZW50SW5kZXggPSAxO1xyXG4gICAgICAgICAgICBlbGVtZW50cyA9IHN5bnRhY3RpY1N1Z2FyID8gYXJndW1lbnRzWzBdLmVsZW1lbnRzIDogYXJndW1lbnRzWzBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZWxlbWVudHMgPSBzYW5pdGl6ZUVsZW1lbnRzKGVsZW1lbnRzKTtcclxuXHJcbiAgICAgICAgaWYgKCFlbGVtZW50cykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc3ludGFjdGljU3VnYXIpIHtcclxuICAgICAgICAgICAgcHJvcGVydGllc01hcCA9IGFyZ3VtZW50c1swXS5wcm9wZXJ0aWVzO1xyXG4gICAgICAgICAgICBvcHRpb25zID0gYXJndW1lbnRzWzBdLm9wdGlvbnM7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcHJvcGVydGllc01hcCA9IGFyZ3VtZW50c1thcmd1bWVudEluZGV4XTtcclxuICAgICAgICAgICAgb3B0aW9ucyA9IGFyZ3VtZW50c1thcmd1bWVudEluZGV4ICsgMV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBUaGUgbGVuZ3RoIG9mIHRoZSBlbGVtZW50IHNldCAoaW4gdGhlIGZvcm0gb2YgYSBub2RlTGlzdCBvciBhbiBhcnJheSBvZiBlbGVtZW50cykgaXMgZGVmYXVsdGVkIHRvIDEgaW4gY2FzZSBhXHJcbiAgICAgICAgICAgc2luZ2xlIHJhdyBET00gZWxlbWVudCBpcyBwYXNzZWQgaW4gKHdoaWNoIGRvZXNuJ3QgY29udGFpbiBhIGxlbmd0aCBwcm9wZXJ0eSkuICovXHJcbiAgICAgICAgdmFyIGVsZW1lbnRzTGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoLFxyXG4gICAgICAgICAgICBlbGVtZW50c0luZGV4ID0gMDtcclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICBBcmd1bWVudCBPdmVybG9hZGluZ1xyXG4gICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgLyogU3VwcG9ydCBpcyBpbmNsdWRlZCBmb3IgalF1ZXJ5J3MgYXJndW1lbnQgb3ZlcmxvYWRpbmc6ICQuYW5pbWF0ZShwcm9wZXJ0eU1hcCBbLCBkdXJhdGlvbl0gWywgZWFzaW5nXSBbLCBjb21wbGV0ZV0pLlxyXG4gICAgICAgICAgIE92ZXJsb2FkaW5nIGlzIGRldGVjdGVkIGJ5IGNoZWNraW5nIGZvciB0aGUgYWJzZW5jZSBvZiBhbiBvYmplY3QgYmVpbmcgcGFzc2VkIGludG8gb3B0aW9ucy4gKi9cclxuICAgICAgICAvKiBOb3RlOiBUaGUgc3RvcCBhY3Rpb24gZG9lcyBub3QgYWNjZXB0IGFuaW1hdGlvbiBvcHRpb25zLCBhbmQgaXMgdGhlcmVmb3JlIGV4Y2x1ZGVkIGZyb20gdGhpcyBjaGVjay4gKi9cclxuICAgICAgICBpZiAocHJvcGVydGllc01hcCAhPT0gXCJzdG9wXCIgJiYgISQuaXNQbGFpbk9iamVjdChvcHRpb25zKSkge1xyXG4gICAgICAgICAgICAvKiBUaGUgdXRpbGl0eSBmdW5jdGlvbiBzaGlmdHMgYWxsIGFyZ3VtZW50cyBvbmUgcG9zaXRpb24gdG8gdGhlIHJpZ2h0LCBzbyB3ZSBhZGp1c3QgZm9yIHRoYXQgb2Zmc2V0LiAqL1xyXG4gICAgICAgICAgICB2YXIgc3RhcnRpbmdBcmd1bWVudFBvc2l0aW9uID0gYXJndW1lbnRJbmRleCArIDE7XHJcblxyXG4gICAgICAgICAgICBvcHRpb25zID0ge307XHJcblxyXG4gICAgICAgICAgICAvKiBJdGVyYXRlIHRocm91Z2ggYWxsIG9wdGlvbnMgYXJndW1lbnRzICovXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydGluZ0FyZ3VtZW50UG9zaXRpb247IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIC8qIFRyZWF0IGEgbnVtYmVyIGFzIGEgZHVyYXRpb24uIFBhcnNlIGl0IG91dC4gKi9cclxuICAgICAgICAgICAgICAgIC8qIE5vdGU6IFRoZSBmb2xsb3dpbmcgUmVnRXggd2lsbCByZXR1cm4gdHJ1ZSBpZiBwYXNzZWQgYW4gYXJyYXkgd2l0aCBhIG51bWJlciBhcyBpdHMgZmlyc3QgaXRlbS5cclxuICAgICAgICAgICAgICAgICAgIFRodXMsIGFycmF5cyBhcmUgc2tpcHBlZCBmcm9tIHRoaXMgY2hlY2suICovXHJcbiAgICAgICAgICAgICAgICBpZiAoIVR5cGUuaXNBcnJheShhcmd1bWVudHNbaV0pICYmICgvXihmYXN0fG5vcm1hbHxzbG93KSQvaS50ZXN0KGFyZ3VtZW50c1tpXSkgfHwgL15cXGQvLnRlc3QoYXJndW1lbnRzW2ldKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmR1cmF0aW9uID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICAgICAgLyogVHJlYXQgc3RyaW5ncyBhbmQgYXJyYXlzIGFzIGVhc2luZ3MuICovXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFR5cGUuaXNTdHJpbmcoYXJndW1lbnRzW2ldKSB8fCBUeXBlLmlzQXJyYXkoYXJndW1lbnRzW2ldKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZWFzaW5nID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICAgICAgLyogVHJlYXQgYSBmdW5jdGlvbiBhcyBhIGNvbXBsZXRlIGNhbGxiYWNrLiAqL1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChUeXBlLmlzRnVuY3Rpb24oYXJndW1lbnRzW2ldKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY29tcGxldGUgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgUHJvbWlzZXNcclxuICAgICAgICAqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIHZhciBwcm9taXNlRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIHByb21pc2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlcjogbnVsbCxcclxuICAgICAgICAgICAgICAgIHJlamVjdGVyOiBudWxsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qIElmIHRoaXMgY2FsbCB3YXMgbWFkZSB2aWEgdGhlIHV0aWxpdHkgZnVuY3Rpb24gKHdoaWNoIGlzIHRoZSBkZWZhdWx0IG1ldGhvZCBvZiBpbnZvY2F0aW9uIHdoZW4galF1ZXJ5L1plcHRvIGFyZSBub3QgYmVpbmcgdXNlZCksIGFuZCBpZlxyXG4gICAgICAgICAgIHByb21pc2Ugc3VwcG9ydCB3YXMgZGV0ZWN0ZWQsIGNyZWF0ZSBhIHByb21pc2Ugb2JqZWN0IGZvciB0aGlzIGNhbGwgYW5kIHN0b3JlIHJlZmVyZW5jZXMgdG8gaXRzIHJlc29sdmVyIGFuZCByZWplY3RlciBtZXRob2RzLiBUaGUgcmVzb2x2ZVxyXG4gICAgICAgICAgIG1ldGhvZCBpcyB1c2VkIHdoZW4gYSBjYWxsIGNvbXBsZXRlcyBuYXR1cmFsbHkgb3IgaXMgcHJlbWF0dXJlbHkgc3RvcHBlZCBieSB0aGUgdXNlci4gSW4gYm90aCBjYXNlcywgY29tcGxldGVDYWxsKCkgaGFuZGxlcyB0aGUgYXNzb2NpYXRlZFxyXG4gICAgICAgICAgIGNhbGwgY2xlYW51cCBhbmQgcHJvbWlzZSByZXNvbHZpbmcgbG9naWMuIFRoZSByZWplY3QgbWV0aG9kIGlzIHVzZWQgd2hlbiBhbiBpbnZhbGlkIHNldCBvZiBhcmd1bWVudHMgaXMgcGFzc2VkIGludG8gYSBWZWxvY2l0eSBjYWxsLiAqL1xyXG4gICAgICAgIC8qIE5vdGU6IFZlbG9jaXR5IGVtcGxveXMgYSBjYWxsLWJhc2VkIHF1ZXVlaW5nIGFyY2hpdGVjdHVyZSwgd2hpY2ggbWVhbnMgdGhhdCBzdG9wcGluZyBhbiBhbmltYXRpbmcgZWxlbWVudCBhY3R1YWxseSBzdG9wcyB0aGUgZnVsbCBjYWxsIHRoYXRcclxuICAgICAgICAgICB0cmlnZ2VyZWQgaXQgLS0gbm90IHRoYXQgb25lIGVsZW1lbnQgZXhjbHVzaXZlbHkuIFNpbWlsYXJseSwgdGhlcmUgaXMgb25lIHByb21pc2UgcGVyIGNhbGwsIGFuZCBhbGwgZWxlbWVudHMgdGFyZ2V0ZWQgYnkgYSBWZWxvY2l0eSBjYWxsIGFyZVxyXG4gICAgICAgICAgIGdyb3VwZWQgdG9nZXRoZXIgZm9yIHRoZSBwdXJwb3NlcyBvZiByZXNvbHZpbmcgYW5kIHJlamVjdGluZyBhIHByb21pc2UuICovXHJcbiAgICAgICAgaWYgKGlzVXRpbGl0eSAmJiBWZWxvY2l0eS5Qcm9taXNlKSB7XHJcbiAgICAgICAgICAgIHByb21pc2VEYXRhLnByb21pc2UgPSBuZXcgVmVsb2NpdHkuUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlRGF0YS5yZXNvbHZlciA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlRGF0YS5yZWplY3RlciA9IHJlamVjdDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgQWN0aW9uIERldGVjdGlvblxyXG4gICAgICAgICoqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgLyogVmVsb2NpdHkncyBiZWhhdmlvciBpcyBjYXRlZ29yaXplZCBpbnRvIFwiYWN0aW9uc1wiOiBFbGVtZW50cyBjYW4gZWl0aGVyIGJlIHNwZWNpYWxseSBzY3JvbGxlZCBpbnRvIHZpZXcsXHJcbiAgICAgICAgICAgb3IgdGhleSBjYW4gYmUgc3RhcnRlZCwgc3RvcHBlZCwgb3IgcmV2ZXJzZWQuIElmIGEgbGl0ZXJhbCBvciByZWZlcmVuY2VkIHByb3BlcnRpZXMgbWFwIGlzIHBhc3NlZCBpbiBhcyBWZWxvY2l0eSdzXHJcbiAgICAgICAgICAgZmlyc3QgYXJndW1lbnQsIHRoZSBhc3NvY2lhdGVkIGFjdGlvbiBpcyBcInN0YXJ0XCIuIEFsdGVybmF0aXZlbHksIFwic2Nyb2xsXCIsIFwicmV2ZXJzZVwiLCBvciBcInN0b3BcIiBjYW4gYmUgcGFzc2VkIGluIGluc3RlYWQgb2YgYSBwcm9wZXJ0aWVzIG1hcC4gKi9cclxuICAgICAgICB2YXIgYWN0aW9uO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHByb3BlcnRpZXNNYXApIHtcclxuICAgICAgICAgICAgY2FzZSBcInNjcm9sbFwiOlxyXG4gICAgICAgICAgICAgICAgYWN0aW9uID0gXCJzY3JvbGxcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcInJldmVyc2VcIjpcclxuICAgICAgICAgICAgICAgIGFjdGlvbiA9IFwicmV2ZXJzZVwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwic3RvcFwiOlxyXG4gICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICBBY3Rpb246IFN0b3BcclxuICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgLyogQ2xlYXIgdGhlIGN1cnJlbnRseS1hY3RpdmUgZGVsYXkgb24gZWFjaCB0YXJnZXRlZCBlbGVtZW50LiAqL1xyXG4gICAgICAgICAgICAgICAgJC5lYWNoKGVsZW1lbnRzLCBmdW5jdGlvbihpLCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKERhdGEoZWxlbWVudCkgJiYgRGF0YShlbGVtZW50KS5kZWxheVRpbWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFN0b3AgdGhlIHRpbWVyIGZyb20gdHJpZ2dlcmluZyBpdHMgY2FjaGVkIG5leHQoKSBmdW5jdGlvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KERhdGEoZWxlbWVudCkuZGVsYXlUaW1lci5zZXRUaW1lb3V0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIE1hbnVhbGx5IGNhbGwgdGhlIG5leHQoKSBmdW5jdGlvbiBzbyB0aGF0IHRoZSBzdWJzZXF1ZW50IHF1ZXVlIGl0ZW1zIGNhbiBwcm9ncmVzcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERhdGEoZWxlbWVudCkuZGVsYXlUaW1lci5uZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhKGVsZW1lbnQpLmRlbGF5VGltZXIubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgRGF0YShlbGVtZW50KS5kZWxheVRpbWVyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjYWxsc1RvU3RvcCA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIFdoZW4gdGhlIHN0b3AgYWN0aW9uIGlzIHRyaWdnZXJlZCwgdGhlIGVsZW1lbnRzJyBjdXJyZW50bHkgYWN0aXZlIGNhbGwgaXMgaW1tZWRpYXRlbHkgc3RvcHBlZC4gVGhlIGFjdGl2ZSBjYWxsIG1pZ2h0IGhhdmVcclxuICAgICAgICAgICAgICAgICAgIGJlZW4gYXBwbGllZCB0byBtdWx0aXBsZSBlbGVtZW50cywgaW4gd2hpY2ggY2FzZSBhbGwgb2YgdGhlIGNhbGwncyBlbGVtZW50cyB3aWxsIGJlIHN1YmplY3RlZCB0byBzdG9wcGluZy4gV2hlbiBhbiBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICBpcyBzdG9wcGVkLCB0aGUgbmV4dCBpdGVtIGluIGl0cyBhbmltYXRpb24gcXVldWUgaXMgaW1tZWRpYXRlbHkgdHJpZ2dlcmVkLiAqL1xyXG4gICAgICAgICAgICAgICAgLyogQW4gYWRkaXRpb25hbCBhcmd1bWVudCBtYXkgYmUgcGFzc2VkIGluIHRvIGNsZWFyIGFuIGVsZW1lbnQncyByZW1haW5pbmcgcXVldWVkIGNhbGxzLiBFaXRoZXIgdHJ1ZSAod2hpY2ggZGVmYXVsdHMgdG8gdGhlIFwiZnhcIiBxdWV1ZSlcclxuICAgICAgICAgICAgICAgICAgIG9yIGEgY3VzdG9tIHF1ZXVlIHN0cmluZyBjYW4gYmUgcGFzc2VkIGluLiAqL1xyXG4gICAgICAgICAgICAgICAgLyogTm90ZTogVGhlIHN0b3AgY29tbWFuZCBydW5zIHByaW9yIHRvIFF1ZXVlaW5nIHNpbmNlIGl0cyBiZWhhdmlvciBpcyBpbnRlbmRlZCB0byB0YWtlIGVmZmVjdCAqaW1tZWRpYXRlbHkqLFxyXG4gICAgICAgICAgICAgICAgICAgcmVnYXJkbGVzcyBvZiB0aGUgZWxlbWVudCdzIGN1cnJlbnQgcXVldWUgc3RhdGUuICovXHJcblxyXG4gICAgICAgICAgICAgICAgLyogSXRlcmF0ZSB0aHJvdWdoIGV2ZXJ5IGFjdGl2ZSBjYWxsLiAqL1xyXG4gICAgICAgICAgICAgICAgJC5lYWNoKFZlbG9jaXR5LlN0YXRlLmNhbGxzLCBmdW5jdGlvbihpLCBhY3RpdmVDYWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogSW5hY3RpdmUgY2FsbHMgYXJlIHNldCB0byBmYWxzZSBieSB0aGUgbG9naWMgaW5zaWRlIGNvbXBsZXRlQ2FsbCgpLiBTa2lwIHRoZW0uICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUNhbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogSXRlcmF0ZSB0aHJvdWdoIHRoZSBhY3RpdmUgY2FsbCdzIHRhcmdldGVkIGVsZW1lbnRzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goYWN0aXZlQ2FsbFsxXSwgZnVuY3Rpb24oaywgYWN0aXZlRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHF1ZXVlTmFtZSA9IFR5cGUuaXNTdHJpbmcob3B0aW9ucykgPyBvcHRpb25zIDogXCJcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucyAhPT0gdW5kZWZpbmVkICYmIGFjdGl2ZUNhbGxbMl0ucXVldWUgIT09IHF1ZXVlTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEl0ZXJhdGUgdGhyb3VnaCB0aGUgY2FsbHMgdGFyZ2V0ZWQgYnkgdGhlIHN0b3AgY29tbWFuZC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaChlbGVtZW50cywgZnVuY3Rpb24obCwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIENoZWNrIHRoYXQgdGhpcyBjYWxsIHdhcyBhcHBsaWVkIHRvIHRoZSB0YXJnZXQgZWxlbWVudC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PT0gYWN0aXZlRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBPcHRpb25hbGx5IGNsZWFyIHRoZSByZW1haW5pbmcgcXVldWVkIGNhbGxzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJdGVyYXRlIHRocm91Z2ggdGhlIGl0ZW1zIGluIHRoZSBlbGVtZW50J3MgcXVldWUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goJC5xdWV1ZShlbGVtZW50LCBxdWV1ZU5hbWUpLCBmdW5jdGlvbihfLCBpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogVGhlIHF1ZXVlIGFycmF5IGNhbiBjb250YWluIGFuIFwiaW5wcm9ncmVzc1wiIHN0cmluZywgd2hpY2ggd2Ugc2tpcC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoVHlwZS5pc0Z1bmN0aW9uKGl0ZW0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFBhc3MgdGhlIGl0ZW0ncyBjYWxsYmFjayBhIGZsYWcgaW5kaWNhdGluZyB0aGF0IHdlIHdhbnQgdG8gYWJvcnQgZnJvbSB0aGUgcXVldWUgY2FsbC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFNwZWNpZmljYWxseSwgdGhlIHF1ZXVlIHdpbGwgcmVzb2x2ZSB0aGUgY2FsbCdzIGFzc29jaWF0ZWQgcHJvbWlzZSB0aGVuIGFib3J0LikgICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0obnVsbCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQ2xlYXJpbmcgdGhlICQucXVldWUoKSBhcnJheSBpcyBhY2hpZXZlZCBieSByZXNldHRpbmcgaXQgdG8gW10uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLnF1ZXVlKGVsZW1lbnQsIHF1ZXVlTmFtZSwgW10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGF0YShlbGVtZW50KSAmJiBxdWV1ZU5hbWUgPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFNpbmNlIFwicmV2ZXJzZVwiIHVzZXMgY2FjaGVkIHN0YXJ0IHZhbHVlcyAodGhlIHByZXZpb3VzIGNhbGwncyBlbmRWYWx1ZXMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlc2UgdmFsdWVzIG11c3QgYmUgY2hhbmdlZCB0byByZWZsZWN0IHRoZSBmaW5hbCB2YWx1ZSB0aGF0IHRoZSBlbGVtZW50cyB3ZXJlIGFjdHVhbGx5IHR3ZWVuZWQgdG8uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goRGF0YShlbGVtZW50KS50d2VlbnNDb250YWluZXIsIGZ1bmN0aW9uKG0sIGFjdGl2ZVR3ZWVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlVHdlZW4uZW5kVmFsdWUgPSBhY3RpdmVUd2Vlbi5jdXJyZW50VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbHNUb1N0b3AucHVzaChpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLyogUHJlbWF0dXJlbHkgY2FsbCBjb21wbGV0ZUNhbGwoKSBvbiBlYWNoIG1hdGNoZWQgYWN0aXZlIGNhbGwsIHBhc3NpbmcgYW4gYWRkaXRpb25hbCBmbGFnIHRvIGluZGljYXRlXHJcbiAgICAgICAgICAgICAgICAgICB0aGF0IHRoZSBjb21wbGV0ZSBjYWxsYmFjayBhbmQgZGlzcGxheTpub25lIHNldHRpbmcgc2hvdWxkIGJlIHNraXBwZWQgc2luY2Ugd2UncmUgY29tcGxldGluZyBwcmVtYXR1cmVseS4gKi9cclxuICAgICAgICAgICAgICAgICQuZWFjaChjYWxsc1RvU3RvcCwgZnVuY3Rpb24oaSwgaikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlQ2FsbChqLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwcm9taXNlRGF0YS5wcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogSW1tZWRpYXRlbHkgcmVzb2x2ZSB0aGUgcHJvbWlzZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBzdG9wIGNhbGwgc2luY2Ugc3RvcCBydW5zIHN5bmNocm9ub3VzbHkuICovXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZURhdGEucmVzb2x2ZXIoZWxlbWVudHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8qIFNpbmNlIHdlJ3JlIHN0b3BwaW5nLCBhbmQgbm90IHByb2NlZWRpbmcgd2l0aCBxdWV1ZWluZywgZXhpdCBvdXQgb2YgVmVsb2NpdHkuICovXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Q2hhaW4oKTtcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAvKiBUcmVhdCBhIG5vbi1lbXB0eSBwbGFpbiBvYmplY3QgYXMgYSBsaXRlcmFsIHByb3BlcnRpZXMgbWFwLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKCQuaXNQbGFpbk9iamVjdChwcm9wZXJ0aWVzTWFwKSAmJiAhVHlwZS5pc0VtcHR5T2JqZWN0KHByb3BlcnRpZXNNYXApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uID0gXCJzdGFydFwiO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICAgUmVkaXJlY3RzXHJcbiAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIENoZWNrIGlmIGEgc3RyaW5nIG1hdGNoZXMgYSByZWdpc3RlcmVkIHJlZGlyZWN0IChzZWUgUmVkaXJlY3RzIGFib3ZlKS4gKi9cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoVHlwZS5pc1N0cmluZyhwcm9wZXJ0aWVzTWFwKSAmJiBWZWxvY2l0eS5SZWRpcmVjdHNbcHJvcGVydGllc01hcF0pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHt9LCBvcHRpb25zKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb25PcmlnaW5hbCA9IG9wdHMuZHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5T3JpZ2luYWwgPSBvcHRzLmRlbGF5IHx8IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZSBiYWNrd2FyZHMgb3B0aW9uIHdhcyBwYXNzZWQgaW4sIHJldmVyc2UgdGhlIGVsZW1lbnQgc2V0IHNvIHRoYXQgZWxlbWVudHMgYW5pbWF0ZSBmcm9tIHRoZSBsYXN0IHRvIHRoZSBmaXJzdC4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5iYWNrd2FyZHMgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMgPSAkLmV4dGVuZCh0cnVlLCBbXSwgZWxlbWVudHMpLnJldmVyc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIEluZGl2aWR1YWxseSB0cmlnZ2VyIHRoZSByZWRpcmVjdCBmb3IgZWFjaCBlbGVtZW50IGluIHRoZSBzZXQgdG8gcHJldmVudCB1c2VycyBmcm9tIGhhdmluZyB0byBoYW5kbGUgaXRlcmF0aW9uIGxvZ2ljIGluIHRoZWlyIHJlZGlyZWN0LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChlbGVtZW50cywgZnVuY3Rpb24oZWxlbWVudEluZGV4LCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZSBzdGFnZ2VyIG9wdGlvbiB3YXMgcGFzc2VkIGluLCBzdWNjZXNzaXZlbHkgZGVsYXkgZWFjaCBlbGVtZW50IGJ5IHRoZSBzdGFnZ2VyIHZhbHVlIChpbiBtcykuIFJldGFpbiB0aGUgb3JpZ2luYWwgZGVsYXkgdmFsdWUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZUZsb2F0KG9wdHMuc3RhZ2dlcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMuZGVsYXkgPSBkZWxheU9yaWdpbmFsICsgKHBhcnNlRmxvYXQob3B0cy5zdGFnZ2VyKSAqIGVsZW1lbnRJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoVHlwZS5pc0Z1bmN0aW9uKG9wdHMuc3RhZ2dlcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMuZGVsYXkgPSBkZWxheU9yaWdpbmFsICsgb3B0cy5zdGFnZ2VyLmNhbGwoZWxlbWVudCwgZWxlbWVudEluZGV4LCBlbGVtZW50c0xlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZSBkcmFnIG9wdGlvbiB3YXMgcGFzc2VkIGluLCBzdWNjZXNzaXZlbHkgaW5jcmVhc2UvZGVjcmVhc2UgKGRlcGVuZGluZyBvbiB0aGUgcHJlc2Vuc2Ugb2Ygb3B0cy5iYWNrd2FyZHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBkdXJhdGlvbiBvZiBlYWNoIGVsZW1lbnQncyBhbmltYXRpb24sIHVzaW5nIGZsb29ycyB0byBwcmV2ZW50IHByb2R1Y2luZyB2ZXJ5IHNob3J0IGR1cmF0aW9ucy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMuZHJhZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogRGVmYXVsdCB0aGUgZHVyYXRpb24gb2YgVUkgcGFjayBlZmZlY3RzIChjYWxsb3V0cyBhbmQgdHJhbnNpdGlvbnMpIHRvIDEwMDBtcyBpbnN0ZWFkIG9mIHRoZSB1c3VhbCBkZWZhdWx0IGR1cmF0aW9uIG9mIDQwMG1zLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5kdXJhdGlvbiA9IHBhcnNlRmxvYXQoZHVyYXRpb25PcmlnaW5hbCkgfHwgKC9eKGNhbGxvdXR8dHJhbnNpdGlvbikvLnRlc3QocHJvcGVydGllc01hcCkgPyAxMDAwIDogRFVSQVRJT05fREVGQVVMVCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogRm9yIGVhY2ggZWxlbWVudCwgdGFrZSB0aGUgZ3JlYXRlciBkdXJhdGlvbiBvZjogQSkgYW5pbWF0aW9uIGNvbXBsZXRpb24gcGVyY2VudGFnZSByZWxhdGl2ZSB0byB0aGUgb3JpZ2luYWwgZHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCKSA3NSUgb2YgdGhlIG9yaWdpbmFsIGR1cmF0aW9uLCBvciBDKSBhIDIwMG1zIGZhbGxiYWNrIChpbiBjYXNlIGR1cmF0aW9uIGlzIGFscmVhZHkgc2V0IHRvIGEgbG93IHZhbHVlKS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBlbmQgcmVzdWx0IGlzIGEgYmFzZWxpbmUgb2YgNzUlIG9mIHRoZSByZWRpcmVjdCdzIGR1cmF0aW9uIHRoYXQgaW5jcmVhc2VzL2RlY3JlYXNlcyBhcyB0aGUgZW5kIG9mIHRoZSBlbGVtZW50IHNldCBpcyBhcHByb2FjaGVkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5kdXJhdGlvbiA9IE1hdGgubWF4KG9wdHMuZHVyYXRpb24gKiAob3B0cy5iYWNrd2FyZHMgPyAxIC0gZWxlbWVudEluZGV4L2VsZW1lbnRzTGVuZ3RoIDogKGVsZW1lbnRJbmRleCArIDEpIC8gZWxlbWVudHNMZW5ndGgpLCBvcHRzLmR1cmF0aW9uICogMC43NSwgMjAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogUGFzcyBpbiB0aGUgY2FsbCdzIG9wdHMgb2JqZWN0IHNvIHRoYXQgdGhlIHJlZGlyZWN0IGNhbiBvcHRpb25hbGx5IGV4dGVuZCBpdC4gSXQgZGVmYXVsdHMgdG8gYW4gZW1wdHkgb2JqZWN0IGluc3RlYWQgb2YgbnVsbCB0b1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZWR1Y2UgdGhlIG9wdHMgY2hlY2tpbmcgbG9naWMgcmVxdWlyZWQgaW5zaWRlIHRoZSByZWRpcmVjdC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkuUmVkaXJlY3RzW3Byb3BlcnRpZXNNYXBdLmNhbGwoZWxlbWVudCwgZWxlbWVudCwgb3B0cyB8fCB7fSwgZWxlbWVudEluZGV4LCBlbGVtZW50c0xlbmd0aCwgZWxlbWVudHMsIHByb21pc2VEYXRhLnByb21pc2UgPyBwcm9taXNlRGF0YSA6IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIFNpbmNlIHRoZSBhbmltYXRpb24gbG9naWMgcmVzaWRlcyB3aXRoaW4gdGhlIHJlZGlyZWN0J3Mgb3duIGNvZGUsIGFib3J0IHRoZSByZW1haW5kZXIgb2YgdGhpcyBjYWxsLlxyXG4gICAgICAgICAgICAgICAgICAgICAgIChUaGUgcGVyZm9ybWFuY2Ugb3ZlcmhlYWQgdXAgdG8gdGhpcyBwb2ludCBpcyB2aXJ0dWFsbHkgbm9uLWV4aXN0YW50LikgKi9cclxuICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBUaGUgalF1ZXJ5IGNhbGwgY2hhaW4gaXMga2VwdCBpbnRhY3QgYnkgcmV0dXJuaW5nIHRoZSBjb21wbGV0ZSBlbGVtZW50IHNldC4gKi9cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Q2hhaW4oKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFib3J0RXJyb3IgPSBcIlZlbG9jaXR5OiBGaXJzdCBhcmd1bWVudCAoXCIgKyBwcm9wZXJ0aWVzTWFwICsgXCIpIHdhcyBub3QgYSBwcm9wZXJ0eSBtYXAsIGEga25vd24gYWN0aW9uLCBvciBhIHJlZ2lzdGVyZWQgcmVkaXJlY3QuIEFib3J0aW5nLlwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvbWlzZURhdGEucHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlRGF0YS5yZWplY3RlcihuZXcgRXJyb3IoYWJvcnRFcnJvcikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFib3J0RXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldENoYWluKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgQ2FsbC1XaWRlIFZhcmlhYmxlc1xyXG4gICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAvKiBBIGNvbnRhaW5lciBmb3IgQ1NTIHVuaXQgY29udmVyc2lvbiByYXRpb3MgKGUuZy4gJSwgcmVtLCBhbmQgZW0gPT0+IHB4KSB0aGF0IGlzIHVzZWQgdG8gY2FjaGUgcmF0aW9zIGFjcm9zcyBhbGwgZWxlbWVudHNcclxuICAgICAgICAgICBiZWluZyBhbmltYXRlZCBpbiBhIHNpbmdsZSBWZWxvY2l0eSBjYWxsLiBDYWxjdWxhdGluZyB1bml0IHJhdGlvcyBuZWNlc3NpdGF0ZXMgRE9NIHF1ZXJ5aW5nIGFuZCB1cGRhdGluZywgYW5kIGlzIHRoZXJlZm9yZVxyXG4gICAgICAgICAgIGF2b2lkZWQgKHZpYSBjYWNoaW5nKSB3aGVyZXZlciBwb3NzaWJsZS4gVGhpcyBjb250YWluZXIgaXMgY2FsbC13aWRlIGluc3RlYWQgb2YgcGFnZS13aWRlIHRvIGF2b2lkIHRoZSByaXNrIG9mIHVzaW5nIHN0YWxlXHJcbiAgICAgICAgICAgY29udmVyc2lvbiBtZXRyaWNzIGFjcm9zcyBWZWxvY2l0eSBhbmltYXRpb25zIHRoYXQgYXJlIG5vdCBpbW1lZGlhdGVseSBjb25zZWN1dGl2ZWx5IGNoYWluZWQuICovXHJcbiAgICAgICAgdmFyIGNhbGxVbml0Q29udmVyc2lvbkRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBsYXN0UGFyZW50OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbGFzdFBvc2l0aW9uOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbGFzdEZvbnRTaXplOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbGFzdFBlcmNlbnRUb1B4V2lkdGg6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBsYXN0UGVyY2VudFRvUHhIZWlnaHQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBsYXN0RW1Ub1B4OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgcmVtVG9QeDogbnVsbCxcclxuICAgICAgICAgICAgICAgIHZ3VG9QeDogbnVsbCxcclxuICAgICAgICAgICAgICAgIHZoVG9QeDogbnVsbFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKiBBIGNvbnRhaW5lciBmb3IgYWxsIHRoZSBlbnN1aW5nIHR3ZWVuIGRhdGEgYW5kIG1ldGFkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGNhbGwuIFRoaXMgY29udGFpbmVyIGdldHMgcHVzaGVkIHRvIHRoZSBwYWdlLXdpZGVcclxuICAgICAgICAgICBWZWxvY2l0eS5TdGF0ZS5jYWxscyBhcnJheSB0aGF0IGlzIHByb2Nlc3NlZCBkdXJpbmcgYW5pbWF0aW9uIHRpY2tpbmcuICovXHJcbiAgICAgICAgdmFyIGNhbGwgPSBbXTtcclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgIEVsZW1lbnQgUHJvY2Vzc2luZ1xyXG4gICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgLyogRWxlbWVudCBwcm9jZXNzaW5nIGNvbnNpc3RzIG9mIHRocmVlIHBhcnRzIC0tIGRhdGEgcHJvY2Vzc2luZyB0aGF0IGNhbm5vdCBnbyBzdGFsZSBhbmQgZGF0YSBwcm9jZXNzaW5nIHRoYXQgKmNhbiogZ28gc3RhbGUgKGkuZS4gdGhpcmQtcGFydHkgc3R5bGUgbW9kaWZpY2F0aW9ucyk6XHJcbiAgICAgICAgICAgMSkgUHJlLVF1ZXVlaW5nOiBFbGVtZW50LXdpZGUgdmFyaWFibGVzLCBpbmNsdWRpbmcgdGhlIGVsZW1lbnQncyBkYXRhIHN0b3JhZ2UsIGFyZSBpbnN0YW50aWF0ZWQuIENhbGwgb3B0aW9ucyBhcmUgcHJlcGFyZWQuIElmIHRyaWdnZXJlZCwgdGhlIFN0b3AgYWN0aW9uIGlzIGV4ZWN1dGVkLlxyXG4gICAgICAgICAgIDIpIFF1ZXVlaW5nOiBUaGUgbG9naWMgdGhhdCBydW5zIG9uY2UgdGhpcyBjYWxsIGhhcyByZWFjaGVkIGl0cyBwb2ludCBvZiBleGVjdXRpb24gaW4gdGhlIGVsZW1lbnQncyAkLnF1ZXVlKCkgc3RhY2suIE1vc3QgbG9naWMgaXMgcGxhY2VkIGhlcmUgdG8gYXZvaWQgcmlza2luZyBpdCBiZWNvbWluZyBzdGFsZS5cclxuICAgICAgICAgICAzKSBQdXNoaW5nOiBDb25zb2xpZGF0aW9uIG9mIHRoZSB0d2VlbiBkYXRhIGZvbGxvd2VkIGJ5IGl0cyBwdXNoIG9udG8gdGhlIGdsb2JhbCBpbi1wcm9ncmVzcyBjYWxscyBjb250YWluZXIuXHJcbiAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc0VsZW1lbnQgKCkge1xyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgUGFydCBJOiBQcmUtUXVldWVpbmdcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgRWxlbWVudC1XaWRlIFZhcmlhYmxlc1xyXG4gICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAvKiBUaGUgcnVudGltZSBvcHRzIG9iamVjdCBpcyB0aGUgZXh0ZW5zaW9uIG9mIHRoZSBjdXJyZW50IGNhbGwncyBvcHRpb25zIGFuZCBWZWxvY2l0eSdzIHBhZ2Utd2lkZSBvcHRpb24gZGVmYXVsdHMuICovXHJcbiAgICAgICAgICAgICAgICBvcHRzID0gJC5leHRlbmQoe30sIFZlbG9jaXR5LmRlZmF1bHRzLCBvcHRpb25zKSxcclxuICAgICAgICAgICAgICAgIC8qIEEgY29udGFpbmVyIGZvciB0aGUgcHJvY2Vzc2VkIGRhdGEgYXNzb2NpYXRlZCB3aXRoIGVhY2ggcHJvcGVydHkgaW4gdGhlIHByb3BlcnR5TWFwLlxyXG4gICAgICAgICAgICAgICAgICAgKEVhY2ggcHJvcGVydHkgaW4gdGhlIG1hcCBwcm9kdWNlcyBpdHMgb3duIFwidHdlZW5cIi4pICovXHJcbiAgICAgICAgICAgICAgICB0d2VlbnNDb250YWluZXIgPSB7fSxcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRVbml0Q29udmVyc2lvbkRhdGE7XHJcblxyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgIEVsZW1lbnQgSW5pdFxyXG4gICAgICAgICAgICAqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICBpZiAoRGF0YShlbGVtZW50KSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBWZWxvY2l0eS5pbml0KGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgIE9wdGlvbjogRGVsYXlcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgLyogU2luY2UgcXVldWU6ZmFsc2UgZG9lc24ndCByZXNwZWN0IHRoZSBpdGVtJ3MgZXhpc3RpbmcgcXVldWUsIHdlIGF2b2lkIGluamVjdGluZyBpdHMgZGVsYXkgaGVyZSAoaXQncyBzZXQgbGF0ZXIgb24pLiAqL1xyXG4gICAgICAgICAgICAvKiBOb3RlOiBWZWxvY2l0eSByb2xscyBpdHMgb3duIGRlbGF5IGZ1bmN0aW9uIHNpbmNlIGpRdWVyeSBkb2Vzbid0IGhhdmUgYSB1dGlsaXR5IGFsaWFzIGZvciAkLmZuLmRlbGF5KClcclxuICAgICAgICAgICAgICAgKGFuZCB0aHVzIHJlcXVpcmVzIGpRdWVyeSBlbGVtZW50IGNyZWF0aW9uLCB3aGljaCB3ZSBhdm9pZCBzaW5jZSBpdHMgb3ZlcmhlYWQgaW5jbHVkZXMgRE9NIHF1ZXJ5aW5nKS4gKi9cclxuICAgICAgICAgICAgaWYgKHBhcnNlRmxvYXQob3B0cy5kZWxheSkgJiYgb3B0cy5xdWV1ZSAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICQucXVldWUoZWxlbWVudCwgb3B0cy5xdWV1ZSwgZnVuY3Rpb24obmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIFRoaXMgaXMgYSBmbGFnIHVzZWQgdG8gaW5kaWNhdGUgdG8gdGhlIHVwY29taW5nIGNvbXBsZXRlQ2FsbCgpIGZ1bmN0aW9uIHRoYXQgdGhpcyBxdWV1ZSBlbnRyeSB3YXMgaW5pdGlhdGVkIGJ5IFZlbG9jaXR5LiBTZWUgY29tcGxldGVDYWxsKCkgZm9yIGZ1cnRoZXIgZGV0YWlscy4gKi9cclxuICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS52ZWxvY2l0eVF1ZXVlRW50cnlGbGFnID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogVGhlIGVuc3VpbmcgcXVldWUgaXRlbSAod2hpY2ggaXMgYXNzaWduZWQgdG8gdGhlIFwibmV4dFwiIGFyZ3VtZW50IHRoYXQgJC5xdWV1ZSgpIGF1dG9tYXRpY2FsbHkgcGFzc2VzIGluKSB3aWxsIGJlIHRyaWdnZXJlZCBhZnRlciBhIHNldFRpbWVvdXQgZGVsYXkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgVGhlIHNldFRpbWVvdXQgaXMgc3RvcmVkIHNvIHRoYXQgaXQgY2FuIGJlIHN1YmplY3RlZCB0byBjbGVhclRpbWVvdXQoKSBpZiB0aGlzIGFuaW1hdGlvbiBpcyBwcmVtYXR1cmVseSBzdG9wcGVkIHZpYSBWZWxvY2l0eSdzIFwic3RvcFwiIGNvbW1hbmQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgRGF0YShlbGVtZW50KS5kZWxheVRpbWVyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0OiBzZXRUaW1lb3V0KG5leHQsIHBhcnNlRmxvYXQob3B0cy5kZWxheSkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0OiBuZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgIE9wdGlvbjogRHVyYXRpb25cclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgLyogU3VwcG9ydCBmb3IgalF1ZXJ5J3MgbmFtZWQgZHVyYXRpb25zLiAqL1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wdHMuZHVyYXRpb24udG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiZmFzdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMuZHVyYXRpb24gPSAyMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm5vcm1hbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMuZHVyYXRpb24gPSBEVVJBVElPTl9ERUZBVUxUO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzbG93XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cy5kdXJhdGlvbiA9IDYwMDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIC8qIFJlbW92ZSB0aGUgcG90ZW50aWFsIFwibXNcIiBzdWZmaXggYW5kIGRlZmF1bHQgdG8gMSBpZiB0aGUgdXNlciBpcyBhdHRlbXB0aW5nIHRvIHNldCBhIGR1cmF0aW9uIG9mIDAgKGluIG9yZGVyIHRvIHByb2R1Y2UgYW4gaW1tZWRpYXRlIHN0eWxlIGNoYW5nZSkuICovXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cy5kdXJhdGlvbiA9IHBhcnNlRmxvYXQob3B0cy5kdXJhdGlvbikgfHwgMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICBHbG9iYWwgT3B0aW9uOiBNb2NrXHJcbiAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIGlmIChWZWxvY2l0eS5tb2NrICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgLyogSW4gbW9jayBtb2RlLCBhbGwgYW5pbWF0aW9ucyBhcmUgZm9yY2VkIHRvIDFtcyBzbyB0aGF0IHRoZXkgb2NjdXIgaW1tZWRpYXRlbHkgdXBvbiB0aGUgbmV4dCByQUYgdGljay5cclxuICAgICAgICAgICAgICAgICAgIEFsdGVybmF0aXZlbHksIGEgbXVsdGlwbGllciBjYW4gYmUgcGFzc2VkIGluIHRvIHRpbWUgcmVtYXAgYWxsIGRlbGF5cyBhbmQgZHVyYXRpb25zLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKFZlbG9jaXR5Lm1vY2sgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRzLmR1cmF0aW9uID0gb3B0cy5kZWxheSA9IDE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMuZHVyYXRpb24gKj0gcGFyc2VGbG9hdChWZWxvY2l0eS5tb2NrKSB8fCAxO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMuZGVsYXkgKj0gcGFyc2VGbG9hdChWZWxvY2l0eS5tb2NrKSB8fCAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICBPcHRpb246IEVhc2luZ1xyXG4gICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgb3B0cy5lYXNpbmcgPSBnZXRFYXNpbmcob3B0cy5lYXNpbmcsIG9wdHMuZHVyYXRpb24pO1xyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgT3B0aW9uOiBDYWxsYmFja3NcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIC8qIENhbGxiYWNrcyBtdXN0IGZ1bmN0aW9ucy4gT3RoZXJ3aXNlLCBkZWZhdWx0IHRvIG51bGwuICovXHJcbiAgICAgICAgICAgIGlmIChvcHRzLmJlZ2luICYmICFUeXBlLmlzRnVuY3Rpb24ob3B0cy5iZWdpbikpIHtcclxuICAgICAgICAgICAgICAgIG9wdHMuYmVnaW4gPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAob3B0cy5wcm9ncmVzcyAmJiAhVHlwZS5pc0Z1bmN0aW9uKG9wdHMucHJvZ3Jlc3MpKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRzLnByb2dyZXNzID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG9wdHMuY29tcGxldGUgJiYgIVR5cGUuaXNGdW5jdGlvbihvcHRzLmNvbXBsZXRlKSkge1xyXG4gICAgICAgICAgICAgICAgb3B0cy5jb21wbGV0ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgT3B0aW9uOiBEaXNwbGF5ICYgVmlzaWJpbGl0eVxyXG4gICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAvKiBSZWZlciB0byBWZWxvY2l0eSdzIGRvY3VtZW50YXRpb24gKFZlbG9jaXR5SlMub3JnLyNkaXNwbGF5QW5kVmlzaWJpbGl0eSkgZm9yIGEgZGVzY3JpcHRpb24gb2YgdGhlIGRpc3BsYXkgYW5kIHZpc2liaWxpdHkgb3B0aW9ucycgYmVoYXZpb3IuICovXHJcbiAgICAgICAgICAgIC8qIE5vdGU6IFdlIHN0cmljdGx5IGNoZWNrIGZvciB1bmRlZmluZWQgaW5zdGVhZCBvZiBmYWxzaW5lc3MgYmVjYXVzZSBkaXNwbGF5IGFjY2VwdHMgYW4gZW1wdHkgc3RyaW5nIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICBpZiAob3B0cy5kaXNwbGF5ICE9PSB1bmRlZmluZWQgJiYgb3B0cy5kaXNwbGF5ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRzLmRpc3BsYXkgPSBvcHRzLmRpc3BsYXkudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIFVzZXJzIGNhbiBwYXNzIGluIGEgc3BlY2lhbCBcImF1dG9cIiB2YWx1ZSB0byBpbnN0cnVjdCBWZWxvY2l0eSB0byBzZXQgdGhlIGVsZW1lbnQgdG8gaXRzIGRlZmF1bHQgZGlzcGxheSB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChvcHRzLmRpc3BsYXkgPT09IFwiYXV0b1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cy5kaXNwbGF5ID0gVmVsb2NpdHkuQ1NTLlZhbHVlcy5nZXREaXNwbGF5VHlwZShlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG9wdHMudmlzaWJpbGl0eSAhPT0gdW5kZWZpbmVkICYmIG9wdHMudmlzaWJpbGl0eSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgb3B0cy52aXNpYmlsaXR5ID0gb3B0cy52aXNpYmlsaXR5LnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgT3B0aW9uOiBtb2JpbGVIQVxyXG4gICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgLyogV2hlbiBzZXQgdG8gdHJ1ZSwgYW5kIGlmIHRoaXMgaXMgYSBtb2JpbGUgZGV2aWNlLCBtb2JpbGVIQSBhdXRvbWF0aWNhbGx5IGVuYWJsZXMgaGFyZHdhcmUgYWNjZWxlcmF0aW9uICh2aWEgYSBudWxsIHRyYW5zZm9ybSBoYWNrKVxyXG4gICAgICAgICAgICAgICBvbiBhbmltYXRpbmcgZWxlbWVudHMuIEhBIGlzIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudCBhdCB0aGUgY29tcGxldGlvbiBvZiBpdHMgYW5pbWF0aW9uLiAqL1xyXG4gICAgICAgICAgICAvKiBOb3RlOiBBbmRyb2lkIEdpbmdlcmJyZWFkIGRvZXNuJ3Qgc3VwcG9ydCBIQS4gSWYgYSBudWxsIHRyYW5zZm9ybSBoYWNrIChtb2JpbGVIQSkgaXMgaW4gZmFjdCBzZXQsIGl0IHdpbGwgcHJldmVudCBvdGhlciB0cmFuZm9ybSBzdWJwcm9wZXJ0aWVzIGZyb20gdGFraW5nIGVmZmVjdC4gKi9cclxuICAgICAgICAgICAgLyogTm90ZTogWW91IGNhbiByZWFkIG1vcmUgYWJvdXQgdGhlIHVzZSBvZiBtb2JpbGVIQSBpbiBWZWxvY2l0eSdzIGRvY3VtZW50YXRpb246IFZlbG9jaXR5SlMub3JnLyNtb2JpbGVIQS4gKi9cclxuICAgICAgICAgICAgb3B0cy5tb2JpbGVIQSA9IChvcHRzLm1vYmlsZUhBICYmIFZlbG9jaXR5LlN0YXRlLmlzTW9iaWxlICYmICFWZWxvY2l0eS5TdGF0ZS5pc0dpbmdlcmJyZWFkKTtcclxuXHJcbiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICBQYXJ0IElJOiBRdWV1ZWluZ1xyXG4gICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIC8qIFdoZW4gYSBzZXQgb2YgZWxlbWVudHMgaXMgdGFyZ2V0ZWQgYnkgYSBWZWxvY2l0eSBjYWxsLCB0aGUgc2V0IGlzIGJyb2tlbiB1cCBhbmQgZWFjaCBlbGVtZW50IGhhcyB0aGUgY3VycmVudCBWZWxvY2l0eSBjYWxsIGluZGl2aWR1YWxseSBxdWV1ZWQgb250byBpdC5cclxuICAgICAgICAgICAgICAgSW4gdGhpcyB3YXksIGVhY2ggZWxlbWVudCdzIGV4aXN0aW5nIHF1ZXVlIGlzIHJlc3BlY3RlZDsgc29tZSBlbGVtZW50cyBtYXkgYWxyZWFkeSBiZSBhbmltYXRpbmcgYW5kIGFjY29yZGluZ2x5IHNob3VsZCBub3QgaGF2ZSB0aGlzIGN1cnJlbnQgVmVsb2NpdHkgY2FsbCB0cmlnZ2VyZWQgaW1tZWRpYXRlbHkuICovXHJcbiAgICAgICAgICAgIC8qIEluIGVhY2ggcXVldWUsIHR3ZWVuIGRhdGEgaXMgcHJvY2Vzc2VkIGZvciBlYWNoIGFuaW1hdGluZyBwcm9wZXJ0eSB0aGVuIHB1c2hlZCBvbnRvIHRoZSBjYWxsLXdpZGUgY2FsbHMgYXJyYXkuIFdoZW4gdGhlIGxhc3QgZWxlbWVudCBpbiB0aGUgc2V0IGhhcyBoYWQgaXRzIHR3ZWVucyBwcm9jZXNzZWQsXHJcbiAgICAgICAgICAgICAgIHRoZSBjYWxsIGFycmF5IGlzIHB1c2hlZCB0byBWZWxvY2l0eS5TdGF0ZS5jYWxscyBmb3IgbGl2ZSBwcm9jZXNzaW5nIGJ5IHRoZSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgdGljay4gKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRRdWV1ZSAobmV4dCkge1xyXG5cclxuICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICBPcHRpb246IEJlZ2luXHJcbiAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIFRoZSBiZWdpbiBjYWxsYmFjayBpcyBmaXJlZCBvbmNlIHBlciBjYWxsIC0tIG5vdCBvbmNlIHBlciBlbGVtZW5ldCAtLSBhbmQgaXMgcGFzc2VkIHRoZSBmdWxsIHJhdyBET00gZWxlbWVudCBzZXQgYXMgYm90aCBpdHMgY29udGV4dCBhbmQgaXRzIGZpcnN0IGFyZ3VtZW50LiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdHMuYmVnaW4gJiYgZWxlbWVudHNJbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIFdlIHRocm93IGNhbGxiYWNrcyBpbiBhIHNldFRpbWVvdXQgc28gdGhhdCB0aHJvd24gZXJyb3JzIGRvbid0IGhhbHQgdGhlIGV4ZWN1dGlvbiBvZiBWZWxvY2l0eSBpdHNlbGYuICovXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5iZWdpbi5jYWxsKGVsZW1lbnRzLCBlbGVtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgdGhyb3cgZXJyb3I7IH0sIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgIFR3ZWVuIERhdGEgQ29uc3RydWN0aW9uIChmb3IgU2Nyb2xsKVxyXG4gICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgLyogTm90ZTogSW4gb3JkZXIgdG8gYmUgc3ViamVjdGVkIHRvIGNoYWluaW5nIGFuZCBhbmltYXRpb24gb3B0aW9ucywgc2Nyb2xsJ3MgdHdlZW5pbmcgaXMgcm91dGVkIHRocm91Z2ggVmVsb2NpdHkgYXMgaWYgaXQgd2VyZSBhIHN0YW5kYXJkIENTUyBwcm9wZXJ0eSBhbmltYXRpb24uICovXHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uID09PSBcInNjcm9sbFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogVGhlIHNjcm9sbCBhY3Rpb24gdW5pcXVlbHkgdGFrZXMgYW4gb3B0aW9uYWwgXCJvZmZzZXRcIiBvcHRpb24gLS0gc3BlY2lmaWVkIGluIHBpeGVscyAtLSB0aGF0IG9mZnNldHMgdGhlIHRhcmdldGVkIHNjcm9sbCBwb3NpdGlvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsRGlyZWN0aW9uID0gKC9eeCQvaS50ZXN0KG9wdHMuYXhpcykgPyBcIkxlZnRcIiA6IFwiVG9wXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxPZmZzZXQgPSBwYXJzZUZsb2F0KG9wdHMub2Zmc2V0KSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb3NpdGlvbkN1cnJlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvc2l0aW9uQ3VycmVudEFsdGVybmF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9zaXRpb25FbmQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIFNjcm9sbCBhbHNvIHVuaXF1ZWx5IHRha2VzIGFuIG9wdGlvbmFsIFwiY29udGFpbmVyXCIgb3B0aW9uLCB3aGljaCBpbmRpY2F0ZXMgdGhlIHBhcmVudCBlbGVtZW50IHRoYXQgc2hvdWxkIGJlIHNjcm9sbGVkIC0tXHJcbiAgICAgICAgICAgICAgICAgICAgICAgYXMgb3Bwb3NlZCB0byB0aGUgYnJvd3NlciB3aW5kb3cgaXRzZWxmLiBUaGlzIGlzIHVzZWZ1bCBmb3Igc2Nyb2xsaW5nIHRvd2FyZCBhbiBlbGVtZW50IHRoYXQncyBpbnNpZGUgYW4gb3ZlcmZsb3dpbmcgcGFyZW50IGVsZW1lbnQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMuY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEVuc3VyZSB0aGF0IGVpdGhlciBhIGpRdWVyeSBvYmplY3Qgb3IgYSByYXcgRE9NIGVsZW1lbnQgd2FzIHBhc3NlZCBpbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFR5cGUuaXNXcmFwcGVkKG9wdHMuY29udGFpbmVyKSB8fCBUeXBlLmlzTm9kZShvcHRzLmNvbnRhaW5lcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEV4dHJhY3QgdGhlIHJhdyBET00gZWxlbWVudCBmcm9tIHRoZSBqUXVlcnkgd3JhcHBlci4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMuY29udGFpbmVyID0gb3B0cy5jb250YWluZXJbMF0gfHwgb3B0cy5jb250YWluZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBVbmxpa2Ugb3RoZXIgcHJvcGVydGllcyBpbiBWZWxvY2l0eSwgdGhlIGJyb3dzZXIncyBzY3JvbGwgcG9zaXRpb24gaXMgbmV2ZXIgY2FjaGVkIHNpbmNlIGl0IHNvIGZyZXF1ZW50bHkgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGR1ZSB0byB0aGUgdXNlcidzIG5hdHVyYWwgaW50ZXJhY3Rpb24gd2l0aCB0aGUgcGFnZSkuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb3NpdGlvbkN1cnJlbnQgPSBvcHRzLmNvbnRhaW5lcltcInNjcm9sbFwiICsgc2Nyb2xsRGlyZWN0aW9uXTsgLyogR0VUICovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogJC5wb3NpdGlvbigpIHZhbHVlcyBhcmUgcmVsYXRpdmUgdG8gdGhlIGNvbnRhaW5lcidzIGN1cnJlbnRseSB2aWV3YWJsZSBhcmVhICh3aXRob3V0IHRha2luZyBpbnRvIGFjY291bnQgdGhlIGNvbnRhaW5lcidzIHRydWUgZGltZW5zaW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0gc2F5LCBmb3IgZXhhbXBsZSwgaWYgdGhlIGNvbnRhaW5lciB3YXMgbm90IG92ZXJmbG93aW5nKS4gVGh1cywgdGhlIHNjcm9sbCBlbmQgdmFsdWUgaXMgdGhlIHN1bSBvZiB0aGUgY2hpbGQgZWxlbWVudCdzIHBvc2l0aW9uICphbmQqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgc2Nyb2xsIGNvbnRhaW5lcidzIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogalF1ZXJ5IGRvZXMgbm90IG9mZmVyIGEgdXRpbGl0eSBhbGlhcyBmb3IgJC5wb3NpdGlvbigpLCBzbyB3ZSBoYXZlIHRvIGluY3VyIGpRdWVyeSBvYmplY3QgY29udmVyc2lvbiBoZXJlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhpcyBzeW5jcyB1cCB3aXRoIGFuIGVuc3VpbmcgYmF0Y2ggb2YgR0VUcywgc28gaXQgZm9ydHVuYXRlbHkgZG9lcyBub3QgdHJpZ2dlciBsYXlvdXQgdGhyYXNoaW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9zaXRpb25FbmQgPSAoc2Nyb2xsUG9zaXRpb25DdXJyZW50ICsgJChlbGVtZW50KS5wb3NpdGlvbigpW3Njcm9sbERpcmVjdGlvbi50b0xvd2VyQ2FzZSgpXSkgKyBzY3JvbGxPZmZzZXQ7IC8qIEdFVCAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiBhIHZhbHVlIG90aGVyIHRoYW4gYSBqUXVlcnkgb2JqZWN0IG9yIGEgcmF3IERPTSBlbGVtZW50IHdhcyBwYXNzZWQgaW4sIGRlZmF1bHQgdG8gbnVsbCBzbyB0aGF0IHRoaXMgb3B0aW9uIGlzIGlnbm9yZWQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRzLmNvbnRhaW5lciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGUgd2luZG93IGl0c2VsZiBpcyBiZWluZyBzY3JvbGxlZCAtLSBub3QgYSBjb250YWluaW5nIGVsZW1lbnQgLS0gcGVyZm9ybSBhIGxpdmUgc2Nyb2xsIHBvc2l0aW9uIGxvb2t1cCB1c2luZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgYXBwcm9wcmlhdGUgY2FjaGVkIHByb3BlcnR5IG5hbWVzICh3aGljaCBkaWZmZXIgYmFzZWQgb24gYnJvd3NlciB0eXBlKS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9zaXRpb25DdXJyZW50ID0gVmVsb2NpdHkuU3RhdGUuc2Nyb2xsQW5jaG9yW1ZlbG9jaXR5LlN0YXRlW1wic2Nyb2xsUHJvcGVydHlcIiArIHNjcm9sbERpcmVjdGlvbl1dOyAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogV2hlbiBzY3JvbGxpbmcgdGhlIGJyb3dzZXIgd2luZG93LCBjYWNoZSB0aGUgYWx0ZXJuYXRlIGF4aXMncyBjdXJyZW50IHZhbHVlIHNpbmNlIHdpbmRvdy5zY3JvbGxUbygpIGRvZXNuJ3QgbGV0IHVzIGNoYW5nZSBvbmx5IG9uZSB2YWx1ZSBhdCBhIHRpbWUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvc2l0aW9uQ3VycmVudEFsdGVybmF0ZSA9IFZlbG9jaXR5LlN0YXRlLnNjcm9sbEFuY2hvcltWZWxvY2l0eS5TdGF0ZVtcInNjcm9sbFByb3BlcnR5XCIgKyAoc2Nyb2xsRGlyZWN0aW9uID09PSBcIkxlZnRcIiA/IFwiVG9wXCIgOiBcIkxlZnRcIildXTsgLyogR0VUICovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBVbmxpa2UgJC5wb3NpdGlvbigpLCAkLm9mZnNldCgpIHZhbHVlcyBhcmUgcmVsYXRpdmUgdG8gdGhlIGJyb3dzZXIgd2luZG93J3MgdHJ1ZSBkaW1lbnNpb25zIC0tIG5vdCBtZXJlbHkgaXRzIGN1cnJlbnRseSB2aWV3YWJsZSBhcmVhIC0tXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZCB0aGVyZWZvcmUgZW5kIHZhbHVlcyBkbyBub3QgbmVlZCB0byBiZSBjb21wb3VuZGVkIG9udG8gY3VycmVudCB2YWx1ZXMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvc2l0aW9uRW5kID0gJChlbGVtZW50KS5vZmZzZXQoKVtzY3JvbGxEaXJlY3Rpb24udG9Mb3dlckNhc2UoKV0gKyBzY3JvbGxPZmZzZXQ7IC8qIEdFVCAqL1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogU2luY2UgdGhlcmUncyBvbmx5IG9uZSBmb3JtYXQgdGhhdCBzY3JvbGwncyBhc3NvY2lhdGVkIHR3ZWVuc0NvbnRhaW5lciBjYW4gdGFrZSwgd2UgY3JlYXRlIGl0IG1hbnVhbGx5LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHR3ZWVuc0NvbnRhaW5lciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlOiBzY3JvbGxQb3NpdGlvbkN1cnJlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWU6IHNjcm9sbFBvc2l0aW9uQ3VycmVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlOiBzY3JvbGxQb3NpdGlvbkVuZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRUeXBlOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBvcHRzLmVhc2luZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbERhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IG9wdHMuY29udGFpbmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogc2Nyb2xsRGlyZWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdGVybmF0ZVZhbHVlOiBzY3JvbGxQb3NpdGlvbkN1cnJlbnRBbHRlcm5hdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChWZWxvY2l0eS5kZWJ1ZykgY29uc29sZS5sb2coXCJ0d2VlbnNDb250YWluZXIgKHNjcm9sbCk6IFwiLCB0d2VlbnNDb250YWluZXIuc2Nyb2xsLCBlbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICBUd2VlbiBEYXRhIENvbnN0cnVjdGlvbiAoZm9yIFJldmVyc2UpXHJcbiAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgLyogUmV2ZXJzZSBhY3RzIGxpa2UgYSBcInN0YXJ0XCIgYWN0aW9uIGluIHRoYXQgYSBwcm9wZXJ0eSBtYXAgaXMgYW5pbWF0ZWQgdG93YXJkLiBUaGUgb25seSBkaWZmZXJlbmNlIGlzXHJcbiAgICAgICAgICAgICAgICAgICB0aGF0IHRoZSBwcm9wZXJ0eSBtYXAgdXNlZCBmb3IgcmV2ZXJzZSBpcyB0aGUgaW52ZXJzZSBvZiB0aGUgbWFwIHVzZWQgaW4gdGhlIHByZXZpb3VzIGNhbGwuIFRodXMsIHdlIG1hbmlwdWxhdGVcclxuICAgICAgICAgICAgICAgICAgIHRoZSBwcmV2aW91cyBjYWxsIHRvIGNvbnN0cnVjdCBvdXIgbmV3IG1hcDogdXNlIHRoZSBwcmV2aW91cyBtYXAncyBlbmQgdmFsdWVzIGFzIG91ciBuZXcgbWFwJ3Mgc3RhcnQgdmFsdWVzLiBDb3B5IG92ZXIgYWxsIG90aGVyIGRhdGEuICovXHJcbiAgICAgICAgICAgICAgICAvKiBOb3RlOiBSZXZlcnNlIGNhbiBiZSBkaXJlY3RseSBjYWxsZWQgdmlhIHRoZSBcInJldmVyc2VcIiBwYXJhbWV0ZXIsIG9yIGl0IGNhbiBiZSBpbmRpcmVjdGx5IHRyaWdnZXJlZCB2aWEgdGhlIGxvb3Agb3B0aW9uLiAoTG9vcHMgYXJlIGNvbXBvc2VkIG9mIG11bHRpcGxlIHJldmVyc2VzLikgKi9cclxuICAgICAgICAgICAgICAgIC8qIE5vdGU6IFJldmVyc2UgY2FsbHMgZG8gbm90IG5lZWQgdG8gYmUgY29uc2VjdXRpdmVseSBjaGFpbmVkIG9udG8gYSBjdXJyZW50bHktYW5pbWF0aW5nIGVsZW1lbnQgaW4gb3JkZXIgdG8gb3BlcmF0ZSBvbiBjYWNoZWQgdmFsdWVzO1xyXG4gICAgICAgICAgICAgICAgICAgdGhlcmUgaXMgbm8gaGFybSB0byByZXZlcnNlIGJlaW5nIGNhbGxlZCBvbiBhIHBvdGVudGlhbGx5IHN0YWxlIGRhdGEgY2FjaGUgc2luY2UgcmV2ZXJzZSdzIGJlaGF2aW9yIGlzIHNpbXBseSBkZWZpbmVkXHJcbiAgICAgICAgICAgICAgICAgICBhcyByZXZlcnRpbmcgdG8gdGhlIGVsZW1lbnQncyB2YWx1ZXMgYXMgdGhleSB3ZXJlIHByaW9yIHRvIHRoZSBwcmV2aW91cyAqVmVsb2NpdHkqIGNhbGwuICovXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gXCJyZXZlcnNlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBBYm9ydCBpZiB0aGVyZSBpcyBubyBwcmlvciBhbmltYXRpb24gZGF0YSB0byByZXZlcnNlIHRvLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghRGF0YShlbGVtZW50KS50d2VlbnNDb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogRGVxdWV1ZSB0aGUgZWxlbWVudCBzbyB0aGF0IHRoaXMgcXVldWUgZW50cnkgcmVsZWFzZXMgaXRzZWxmIGltbWVkaWF0ZWx5LCBhbGxvd2luZyBzdWJzZXF1ZW50IHF1ZXVlIGVudHJpZXMgdG8gcnVuLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmRlcXVldWUoZWxlbWVudCwgb3B0cy5xdWV1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBPcHRpb25zIFBhcnNpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIGVsZW1lbnQgd2FzIGhpZGRlbiB2aWEgdGhlIGRpc3BsYXkgb3B0aW9uIGluIHRoZSBwcmV2aW91cyBjYWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXZlcnQgZGlzcGxheSB0byBcImF1dG9cIiBwcmlvciB0byByZXZlcnNhbCBzbyB0aGF0IHRoZSBlbGVtZW50IGlzIHZpc2libGUgYWdhaW4uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChEYXRhKGVsZW1lbnQpLm9wdHMuZGlzcGxheSA9PT0gXCJub25lXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGEoZWxlbWVudCkub3B0cy5kaXNwbGF5ID0gXCJhdXRvXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChEYXRhKGVsZW1lbnQpLm9wdHMudmlzaWJpbGl0eSA9PT0gXCJoaWRkZW5cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YShlbGVtZW50KS5vcHRzLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIGxvb3Agb3B0aW9uIHdhcyBzZXQgaW4gdGhlIHByZXZpb3VzIGNhbGwsIGRpc2FibGUgaXQgc28gdGhhdCBcInJldmVyc2VcIiBjYWxscyBhcmVuJ3QgcmVjdXJzaXZlbHkgZ2VuZXJhdGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBGdXJ0aGVyLCByZW1vdmUgdGhlIHByZXZpb3VzIGNhbGwncyBjYWxsYmFjayBvcHRpb25zOyB0eXBpY2FsbHksIHVzZXJzIGRvIG5vdCB3YW50IHRoZXNlIHRvIGJlIHJlZmlyZWQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERhdGEoZWxlbWVudCkub3B0cy5sb29wID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERhdGEoZWxlbWVudCkub3B0cy5iZWdpbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERhdGEoZWxlbWVudCkub3B0cy5jb21wbGV0ZSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBTaW5jZSB3ZSdyZSBleHRlbmRpbmcgYW4gb3B0cyBvYmplY3QgdGhhdCBoYXMgYWxyZWFkeSBiZWVuIGV4dGVuZGVkIHdpdGggdGhlIGRlZmF1bHRzIG9wdGlvbnMgb2JqZWN0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB3ZSByZW1vdmUgbm9uLWV4cGxpY2l0bHktZGVmaW5lZCBwcm9wZXJ0aWVzIHRoYXQgYXJlIGF1dG8tYXNzaWduZWQgdmFsdWVzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMuZWFzaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgb3B0cy5lYXNpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy5kdXJhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9wdHMuZHVyYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFRoZSBvcHRzIG9iamVjdCB1c2VkIGZvciByZXZlcnNhbCBpcyBhbiBleHRlbnNpb24gb2YgdGhlIG9wdGlvbnMgb2JqZWN0IG9wdGlvbmFsbHkgcGFzc2VkIGludG8gdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXZlcnNlIGNhbGwgcGx1cyB0aGUgb3B0aW9ucyB1c2VkIGluIHRoZSBwcmV2aW91cyBWZWxvY2l0eSBjYWxsLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRzID0gJC5leHRlbmQoe30sIERhdGEoZWxlbWVudCkub3B0cywgb3B0cyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbnMgQ29udGFpbmVyIFJlY29uc3RydWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBDcmVhdGUgYSBkZWVweSBjb3B5IChpbmRpY2F0ZWQgdmlhIHRoZSB0cnVlIGZsYWcpIG9mIHRoZSBwcmV2aW91cyBjYWxsJ3MgdHdlZW5zQ29udGFpbmVyLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdFR3ZWVuc0NvbnRhaW5lciA9ICQuZXh0ZW5kKHRydWUsIHt9LCBEYXRhKGVsZW1lbnQpLnR3ZWVuc0NvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBNYW5pcHVsYXRlIHRoZSBwcmV2aW91cyB0d2VlbnNDb250YWluZXIgYnkgcmVwbGFjaW5nIGl0cyBlbmQgdmFsdWVzIGFuZCBjdXJyZW50VmFsdWVzIHdpdGggaXRzIHN0YXJ0IHZhbHVlcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbGFzdFR3ZWVuIGluIGxhc3RUd2VlbnNDb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEluIGFkZGl0aW9uIHRvIHR3ZWVuIGRhdGEsIHR3ZWVuc0NvbnRhaW5lcnMgY29udGFpbiBhbiBlbGVtZW50IHByb3BlcnR5IHRoYXQgd2UgaWdub3JlIGhlcmUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdFR3ZWVuICE9PSBcImVsZW1lbnRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYXN0U3RhcnRWYWx1ZSA9IGxhc3RUd2VlbnNDb250YWluZXJbbGFzdFR3ZWVuXS5zdGFydFZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0VHdlZW5zQ29udGFpbmVyW2xhc3RUd2Vlbl0uc3RhcnRWYWx1ZSA9IGxhc3RUd2VlbnNDb250YWluZXJbbGFzdFR3ZWVuXS5jdXJyZW50VmFsdWUgPSBsYXN0VHdlZW5zQ29udGFpbmVyW2xhc3RUd2Vlbl0uZW5kVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFR3ZWVuc0NvbnRhaW5lcltsYXN0VHdlZW5dLmVuZFZhbHVlID0gbGFzdFN0YXJ0VmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEVhc2luZyBpcyB0aGUgb25seSBvcHRpb24gdGhhdCBlbWJlZHMgaW50byB0aGUgaW5kaXZpZHVhbCB0d2VlbiBkYXRhIChzaW5jZSBpdCBjYW4gYmUgZGVmaW5lZCBvbiBhIHBlci1wcm9wZXJ0eSBiYXNpcykuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWNjb3JkaW5nbHksIGV2ZXJ5IHByb3BlcnR5J3MgZWFzaW5nIHZhbHVlIG11c3QgYmUgdXBkYXRlZCB3aGVuIGFuIG9wdGlvbnMgb2JqZWN0IGlzIHBhc3NlZCBpbiB3aXRoIGEgcmV2ZXJzZSBjYWxsLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBzaWRlIGVmZmVjdCBvZiB0aGlzIGV4dGVuc2liaWxpdHkgaXMgdGhhdCBhbGwgcGVyLXByb3BlcnR5IGVhc2luZyB2YWx1ZXMgYXJlIGZvcmNlZnVsbHkgcmVzZXQgdG8gdGhlIG5ldyB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVR5cGUuaXNFbXB0eU9iamVjdChvcHRpb25zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0VHdlZW5zQ29udGFpbmVyW2xhc3RUd2Vlbl0uZWFzaW5nID0gb3B0cy5lYXNpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoVmVsb2NpdHkuZGVidWcpIGNvbnNvbGUubG9nKFwicmV2ZXJzZSB0d2VlbnNDb250YWluZXIgKFwiICsgbGFzdFR3ZWVuICsgXCIpOiBcIiArIEpTT04uc3RyaW5naWZ5KGxhc3RUd2VlbnNDb250YWluZXJbbGFzdFR3ZWVuXSksIGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0d2VlbnNDb250YWluZXIgPSBsYXN0VHdlZW5zQ29udGFpbmVyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgIFR3ZWVuIERhdGEgQ29uc3RydWN0aW9uIChmb3IgU3RhcnQpXHJcbiAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gXCJzdGFydFwiKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlIFRyYW5zZmVycmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIElmIHRoaXMgcXVldWUgZW50cnkgZm9sbG93cyBhIHByZXZpb3VzIFZlbG9jaXR5LWluaXRpYXRlZCBxdWV1ZSBlbnRyeSAqYW5kKiBpZiB0aGlzIGVudHJ5IHdhcyBjcmVhdGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgdGhlIGVsZW1lbnQgd2FzIGluIHRoZSBwcm9jZXNzIG9mIGJlaW5nIGFuaW1hdGVkIGJ5IFZlbG9jaXR5LCB0aGVuIHRoaXMgY3VycmVudCBjYWxsIGlzIHNhZmUgdG8gdXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgdGhlIGVuZCB2YWx1ZXMgZnJvbSB0aGUgcHJpb3IgY2FsbCBhcyBpdHMgc3RhcnQgdmFsdWVzLiBWZWxvY2l0eSBhdHRlbXB0cyB0byBwZXJmb3JtIHRoaXMgdmFsdWUgdHJhbnNmZXJcclxuICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzIHdoZW5ldmVyIHBvc3NpYmxlIGluIG9yZGVyIHRvIGF2b2lkIHJlcXVlcnlpbmcgdGhlIERPTS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAvKiBJZiB2YWx1ZXMgYXJlbid0IHRyYW5zZmVycmVkIGZyb20gYSBwcmlvciBjYWxsIGFuZCBzdGFydCB2YWx1ZXMgd2VyZSBub3QgZm9yY2VmZWQgYnkgdGhlIHVzZXIgKG1vcmUgb24gdGhpcyBiZWxvdyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgdGhlbiB0aGUgRE9NIGlzIHF1ZXJpZWQgZm9yIHRoZSBlbGVtZW50J3MgY3VycmVudCB2YWx1ZXMgYXMgYSBsYXN0IHJlc29ydC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBDb252ZXJzZWx5LCBhbmltYXRpb24gcmV2ZXJzYWwgKGFuZCBsb29waW5nKSAqYWx3YXlzKiBwZXJmb3JtIGludGVyLWNhbGwgdmFsdWUgdHJhbnNmZXJzOyB0aGV5IG5ldmVyIHJlcXVlcnkgdGhlIERPTS4gKi9cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdFR3ZWVuc0NvbnRhaW5lcjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogVGhlIHBlci1lbGVtZW50IGlzQW5pbWF0aW5nIGZsYWcgaXMgdXNlZCB0byBpbmRpY2F0ZSB3aGV0aGVyIGl0J3Mgc2FmZSAoaS5lLiB0aGUgZGF0YSBpc24ndCBzdGFsZSlcclxuICAgICAgICAgICAgICAgICAgICAgICB0byB0cmFuc2ZlciBvdmVyIGVuZCB2YWx1ZXMgdG8gdXNlIGFzIHN0YXJ0IHZhbHVlcy4gSWYgaXQncyBzZXQgdG8gdHJ1ZSBhbmQgdGhlcmUgaXMgYSBwcmV2aW91c1xyXG4gICAgICAgICAgICAgICAgICAgICAgIFZlbG9jaXR5IGNhbGwgdG8gcHVsbCB2YWx1ZXMgZnJvbSwgZG8gc28uICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKERhdGEoZWxlbWVudCkudHdlZW5zQ29udGFpbmVyICYmIERhdGEoZWxlbWVudCkuaXNBbmltYXRpbmcgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFR3ZWVuc0NvbnRhaW5lciA9IERhdGEoZWxlbWVudCkudHdlZW5zQ29udGFpbmVyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuIERhdGEgQ2FsY3VsYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIFRoaXMgZnVuY3Rpb24gcGFyc2VzIHByb3BlcnR5IGRhdGEgYW5kIGRlZmF1bHRzIGVuZFZhbHVlLCBlYXNpbmcsIGFuZCBzdGFydFZhbHVlIGFzIGFwcHJvcHJpYXRlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIFByb3BlcnR5IG1hcCB2YWx1ZXMgY2FuIGVpdGhlciB0YWtlIHRoZSBmb3JtIG9mIDEpIGEgc2luZ2xlIHZhbHVlIHJlcHJlc2VudGluZyB0aGUgZW5kIHZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgIG9yIDIpIGFuIGFycmF5IGluIHRoZSBmb3JtIG9mIFsgZW5kVmFsdWUsIFssIGVhc2luZ10gWywgc3RhcnRWYWx1ZV0gXS5cclxuICAgICAgICAgICAgICAgICAgICAgICBUaGUgb3B0aW9uYWwgdGhpcmQgcGFyYW1ldGVyIGlzIGEgZm9yY2VmZWQgc3RhcnRWYWx1ZSB0byBiZSB1c2VkIGluc3RlYWQgb2YgcXVlcnlpbmcgdGhlIERPTSBmb3JcclxuICAgICAgICAgICAgICAgICAgICAgICB0aGUgZWxlbWVudCdzIGN1cnJlbnQgdmFsdWUuIFJlYWQgVmVsb2NpdHkncyBkb2NtZW50YXRpb24gdG8gbGVhcm4gbW9yZSBhYm91dCBmb3JjZWZlZWRpbmc6IFZlbG9jaXR5SlMub3JnLyNmb3JjZWZlZWRpbmcgKi9cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBwYXJzZVByb3BlcnR5VmFsdWUgKHZhbHVlRGF0YSwgc2tpcFJlc29sdmluZ0Vhc2luZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kVmFsdWUgPSB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmcgPSB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogSGFuZGxlIHRoZSBhcnJheSBmb3JtYXQsIHdoaWNoIGNhbiBiZSBzdHJ1Y3R1cmVkIGFzIG9uZSBvZiB0aHJlZSBwb3RlbnRpYWwgb3ZlcmxvYWRzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBBKSBbIGVuZFZhbHVlLCBlYXNpbmcsIHN0YXJ0VmFsdWUgXSwgQikgWyBlbmRWYWx1ZSwgZWFzaW5nIF0sIG9yIEMpIFsgZW5kVmFsdWUsIHN0YXJ0VmFsdWUgXSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoVHlwZS5pc0FycmF5KHZhbHVlRGF0YSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVuZFZhbHVlIGlzIGFsd2F5cyB0aGUgZmlyc3QgaXRlbSBpbiB0aGUgYXJyYXkuIERvbid0IGJvdGhlciB2YWxpZGF0aW5nIGVuZFZhbHVlJ3MgdmFsdWUgbm93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW5jZSB0aGUgZW5zdWluZyBwcm9wZXJ0eSBjeWNsaW5nIGxvZ2ljIGRvZXMgdGhhdC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlID0gdmFsdWVEYXRhWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFR3by1pdGVtIGFycmF5IGZvcm1hdDogSWYgdGhlIHNlY29uZCBpdGVtIGlzIGEgbnVtYmVyLCBmdW5jdGlvbiwgb3IgaGV4IHN0cmluZywgdHJlYXQgaXQgYXMgYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQgdmFsdWUgc2luY2UgZWFzaW5ncyBjYW4gb25seSBiZSBub24taGV4IHN0cmluZ3Mgb3IgYXJyYXlzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCghVHlwZS5pc0FycmF5KHZhbHVlRGF0YVsxXSkgJiYgL15bXFxkLV0vLnRlc3QodmFsdWVEYXRhWzFdKSkgfHwgVHlwZS5pc0Z1bmN0aW9uKHZhbHVlRGF0YVsxXSkgfHwgQ1NTLlJlZ0V4LmlzSGV4LnRlc3QodmFsdWVEYXRhWzFdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VmFsdWUgPSB2YWx1ZURhdGFbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBUd28gb3IgdGhyZWUtaXRlbSBhcnJheTogSWYgdGhlIHNlY29uZCBpdGVtIGlzIGEgbm9uLWhleCBzdHJpbmcgb3IgYW4gYXJyYXksIHRyZWF0IGl0IGFzIGFuIGVhc2luZy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKFR5cGUuaXNTdHJpbmcodmFsdWVEYXRhWzFdKSAmJiAhQ1NTLlJlZ0V4LmlzSGV4LnRlc3QodmFsdWVEYXRhWzFdKSkgfHwgVHlwZS5pc0FycmF5KHZhbHVlRGF0YVsxXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmcgPSBza2lwUmVzb2x2aW5nRWFzaW5nID8gdmFsdWVEYXRhWzFdIDogZ2V0RWFzaW5nKHZhbHVlRGF0YVsxXSwgb3B0cy5kdXJhdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIERvbid0IGJvdGhlciB2YWxpZGF0aW5nIHN0YXJ0VmFsdWUncyB2YWx1ZSBub3cgc2luY2UgdGhlIGVuc3VpbmcgcHJvcGVydHkgY3ljbGluZyBsb2dpYyBpbmhlcmVudGx5IGRvZXMgdGhhdC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVEYXRhWzJdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZSA9IHZhbHVlRGF0YVsyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEhhbmRsZSB0aGUgc2luZ2xlLXZhbHVlIGZvcm1hdC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlID0gdmFsdWVEYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBEZWZhdWx0IHRvIHRoZSBjYWxsJ3MgZWFzaW5nIGlmIGEgcGVyLXByb3BlcnR5IGVhc2luZyB0eXBlIHdhcyBub3QgZGVmaW5lZC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFza2lwUmVzb2x2aW5nRWFzaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmcgPSBlYXNpbmcgfHwgb3B0cy5lYXNpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIGZ1bmN0aW9ucyB3ZXJlIHBhc3NlZCBpbiBhcyB2YWx1ZXMsIHBhc3MgdGhlIGZ1bmN0aW9uIHRoZSBjdXJyZW50IGVsZW1lbnQgYXMgaXRzIGNvbnRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsdXMgdGhlIGVsZW1lbnQncyBpbmRleCBhbmQgdGhlIGVsZW1lbnQgc2V0J3Mgc2l6ZSBhcyBhcmd1bWVudHMuIFRoZW4sIGFzc2lnbiB0aGUgcmV0dXJuZWQgdmFsdWUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChUeXBlLmlzRnVuY3Rpb24oZW5kVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZSA9IGVuZFZhbHVlLmNhbGwoZWxlbWVudCwgZWxlbWVudHNJbmRleCwgZWxlbWVudHNMZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoVHlwZS5pc0Z1bmN0aW9uKHN0YXJ0VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlID0gc3RhcnRWYWx1ZS5jYWxsKGVsZW1lbnQsIGVsZW1lbnRzSW5kZXgsIGVsZW1lbnRzTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogQWxsb3cgc3RhcnRWYWx1ZSB0byBiZSBsZWZ0IGFzIHVuZGVmaW5lZCB0byBpbmRpY2F0ZSB0byB0aGUgZW5zdWluZyBjb2RlIHRoYXQgaXRzIHZhbHVlIHdhcyBub3QgZm9yY2VmZWQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIGVuZFZhbHVlIHx8IDAsIGVhc2luZywgc3RhcnRWYWx1ZSBdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogQ3ljbGUgdGhyb3VnaCBlYWNoIHByb3BlcnR5IGluIHRoZSBtYXAsIGxvb2tpbmcgZm9yIHNob3J0aGFuZCBjb2xvciBwcm9wZXJ0aWVzIChlLmcuIFwiY29sb3JcIiBhcyBvcHBvc2VkIHRvIFwiY29sb3JSZWRcIikuIEluamVjdCB0aGUgY29ycmVzcG9uZGluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGNvbG9yUmVkLCBjb2xvckdyZWVuLCBhbmQgY29sb3JCbHVlIFJHQiBjb21wb25lbnQgdHdlZW5zIGludG8gdGhlIHByb3BlcnRpZXNNYXAgKHdoaWNoIFZlbG9jaXR5IHVuZGVyc3RhbmRzKSBhbmQgcmVtb3ZlIHRoZSBzaG9ydGhhbmQgcHJvcGVydHkuICovXHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKHByb3BlcnRpZXNNYXAsIGZ1bmN0aW9uKHByb3BlcnR5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBGaW5kIHNob3J0aGFuZCBjb2xvciBwcm9wZXJ0aWVzIHRoYXQgaGF2ZSBiZWVuIHBhc3NlZCBhIGhleCBzdHJpbmcuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChSZWdFeHAoXCJeXCIgKyBDU1MuTGlzdHMuY29sb3JzLmpvaW4oXCIkfF5cIikgKyBcIiRcIikudGVzdChwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFBhcnNlIHRoZSB2YWx1ZSBkYXRhIGZvciBlYWNoIHNob3J0aGFuZC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZURhdGEgPSBwYXJzZVByb3BlcnR5VmFsdWUodmFsdWUsIHRydWUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlID0gdmFsdWVEYXRhWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZyA9IHZhbHVlRGF0YVsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlID0gdmFsdWVEYXRhWzJdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChDU1MuUmVnRXguaXNIZXgudGVzdChlbmRWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBDb252ZXJ0IHRoZSBoZXggc3RyaW5ncyBpbnRvIHRoZWlyIFJHQiBjb21wb25lbnQgYXJyYXlzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2xvckNvbXBvbmVudHMgPSBbIFwiUmVkXCIsIFwiR3JlZW5cIiwgXCJCbHVlXCIgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWVSR0IgPSBDU1MuVmFsdWVzLmhleFRvUmdiKGVuZFZhbHVlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZVJHQiA9IHN0YXJ0VmFsdWUgPyBDU1MuVmFsdWVzLmhleFRvUmdiKHN0YXJ0VmFsdWUpIDogdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJbmplY3QgdGhlIFJHQiBjb21wb25lbnQgdHdlZW5zIGludG8gcHJvcGVydGllc01hcC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbG9yQ29tcG9uZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YUFycmF5ID0gWyBlbmRWYWx1ZVJHQltpXSBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVhc2luZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUFycmF5LnB1c2goZWFzaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0VmFsdWVSR0IgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUFycmF5LnB1c2goc3RhcnRWYWx1ZVJHQltpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXNNYXBbcHJvcGVydHkgKyBjb2xvckNvbXBvbmVudHNbaV1dID0gZGF0YUFycmF5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogUmVtb3ZlIHRoZSBpbnRlcm1lZGlhcnkgc2hvcnRoYW5kIHByb3BlcnR5IGVudHJ5IG5vdyB0aGF0IHdlJ3ZlIHByb2Nlc3NlZCBpdC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgcHJvcGVydGllc01hcFtwcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogQ3JlYXRlIGEgdHdlZW4gb3V0IG9mIGVhY2ggcHJvcGVydHksIGFuZCBhcHBlbmQgaXRzIGFzc29jaWF0ZWQgZGF0YSB0byB0d2VlbnNDb250YWluZXIuICovXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gcHJvcGVydGllc01hcCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXJ0IFZhbHVlIFNvdXJjaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogUGFyc2Ugb3V0IGVuZFZhbHVlLCBlYXNpbmcsIGFuZCBzdGFydFZhbHVlIGZyb20gdGhlIHByb3BlcnR5J3MgZGF0YS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlRGF0YSA9IHBhcnNlUHJvcGVydHlWYWx1ZShwcm9wZXJ0aWVzTWFwW3Byb3BlcnR5XSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZSA9IHZhbHVlRGF0YVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZyA9IHZhbHVlRGF0YVsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VmFsdWUgPSB2YWx1ZURhdGFbMl07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3cgdGhhdCB0aGUgb3JpZ2luYWwgcHJvcGVydHkgbmFtZSdzIGZvcm1hdCBoYXMgYmVlbiB1c2VkIGZvciB0aGUgcGFyc2VQcm9wZXJ0eVZhbHVlKCkgbG9va3VwIGFib3ZlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB3ZSBmb3JjZSB0aGUgcHJvcGVydHkgdG8gaXRzIGNhbWVsQ2FzZSBzdHlsaW5nIHRvIG5vcm1hbGl6ZSBpdCBmb3IgbWFuaXB1bGF0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eSA9IENTUy5OYW1lcy5jYW1lbENhc2UocHJvcGVydHkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogSW4gY2FzZSB0aGlzIHByb3BlcnR5IGlzIGEgaG9vaywgdGhlcmUgYXJlIGNpcmN1bXN0YW5jZXMgd2hlcmUgd2Ugd2lsbCBpbnRlbmQgdG8gd29yayBvbiB0aGUgaG9vaydzIHJvb3QgcHJvcGVydHkgYW5kIG5vdCB0aGUgaG9va2VkIHN1YnByb3BlcnR5LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm9vdFByb3BlcnR5ID0gQ1NTLkhvb2tzLmdldFJvb3QocHJvcGVydHkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFByb3BlcnR5VmFsdWUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFByb3BlcnRpZXMgdGhhdCBhcmUgbm90IHN1cHBvcnRlZCBieSB0aGUgYnJvd3NlciAoYW5kIGRvIG5vdCBoYXZlIGFuIGFzc29jaWF0ZWQgbm9ybWFsaXphdGlvbikgd2lsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBpbmhlcmVudGx5IHByb2R1Y2Ugbm8gc3R5bGUgY2hhbmdlcyB3aGVuIHNldCwgc28gdGhleSBhcmUgc2tpcHBlZCBpbiBvcmRlciB0byBkZWNyZWFzZSBhbmltYXRpb24gdGljayBvdmVyaGVhZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgUHJvcGVydHkgc3VwcG9ydCBpcyBkZXRlcm1pbmVkIHZpYSBwcmVmaXhDaGVjaygpLCB3aGljaCByZXR1cm5zIGEgZmFsc2UgZmxhZyB3aGVuIG5vIHN1cHBvcnRlZCBpcyBkZXRlY3RlZC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogU2luY2UgU1ZHIGVsZW1lbnRzIGhhdmUgc29tZSBvZiB0aGVpciBwcm9wZXJ0aWVzIGRpcmVjdGx5IGFwcGxpZWQgYXMgSFRNTCBhdHRyaWJ1dGVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVyZSBpcyBubyB3YXkgdG8gY2hlY2sgZm9yIHRoZWlyIGV4cGxpY2l0IGJyb3dzZXIgc3VwcG9ydCwgYW5kIHNvIHdlIHNraXAgc2tpcCB0aGlzIGNoZWNrIGZvciB0aGVtLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIURhdGEoZWxlbWVudCkuaXNTVkcgJiYgQ1NTLk5hbWVzLnByZWZpeENoZWNrKHJvb3RQcm9wZXJ0eSlbMV0gPT09IGZhbHNlICYmIENTUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3Jvb3RQcm9wZXJ0eV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFZlbG9jaXR5LmRlYnVnKSBjb25zb2xlLmxvZyhcIlNraXBwaW5nIFtcIiArIHJvb3RQcm9wZXJ0eSArIFwiXSBkdWUgdG8gYSBsYWNrIG9mIGJyb3dzZXIgc3VwcG9ydC5cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZSBkaXNwbGF5IG9wdGlvbiBpcyBiZWluZyBzZXQgdG8gYSBub24tXCJub25lXCIgKGUuZy4gXCJibG9ja1wiKSBhbmQgb3BhY2l0eSAoZmlsdGVyIG9uIElFPD04KSBpcyBiZWluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRlZCB0byBhbiBlbmRWYWx1ZSBvZiBub24temVybywgdGhlIHVzZXIncyBpbnRlbnRpb24gaXMgdG8gZmFkZSBpbiBmcm9tIGludmlzaWJsZSwgdGh1cyB3ZSBmb3JjZWZlZWQgb3BhY2l0eVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBhIHN0YXJ0VmFsdWUgb2YgMCBpZiBpdHMgc3RhcnRWYWx1ZSBoYXNuJ3QgYWxyZWFkeSBiZWVuIHNvdXJjZWQgYnkgdmFsdWUgdHJhbnNmZXJyaW5nIG9yIHByaW9yIGZvcmNlZmVlZGluZy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgob3B0cy5kaXNwbGF5ICE9PSB1bmRlZmluZWQgJiYgb3B0cy5kaXNwbGF5ICE9PSBudWxsICYmIG9wdHMuZGlzcGxheSAhPT0gXCJub25lXCIpIHx8IChvcHRzLnZpc2liaWxpdHkgIT09IHVuZGVmaW5lZCAmJiBvcHRzLnZpc2liaWxpdHkgIT09IFwiaGlkZGVuXCIpKSAmJiAvb3BhY2l0eXxmaWx0ZXIvLnRlc3QocHJvcGVydHkpICYmICFzdGFydFZhbHVlICYmIGVuZFZhbHVlICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgdmFsdWVzIGhhdmUgYmVlbiB0cmFuc2ZlcnJlZCBmcm9tIHRoZSBwcmV2aW91cyBWZWxvY2l0eSBjYWxsLCBleHRyYWN0IHRoZSBlbmRWYWx1ZSBhbmQgcm9vdFByb3BlcnR5VmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGFsbCBvZiB0aGUgY3VycmVudCBjYWxsJ3MgcHJvcGVydGllcyB0aGF0IHdlcmUgKmFsc28qIGFuaW1hdGVkIGluIHRoZSBwcmV2aW91cyBjYWxsLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBWYWx1ZSB0cmFuc2ZlcnJpbmcgY2FuIG9wdGlvbmFsbHkgYmUgZGlzYWJsZWQgYnkgdGhlIHVzZXIgdmlhIHRoZSBfY2FjaGVWYWx1ZXMgb3B0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5fY2FjaGVWYWx1ZXMgJiYgbGFzdFR3ZWVuc0NvbnRhaW5lciAmJiBsYXN0VHdlZW5zQ29udGFpbmVyW3Byb3BlcnR5XSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0VmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VmFsdWUgPSBsYXN0VHdlZW5zQ29udGFpbmVyW3Byb3BlcnR5XS5lbmRWYWx1ZSArIGxhc3RUd2VlbnNDb250YWluZXJbcHJvcGVydHldLnVuaXRUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFRoZSBwcmV2aW91cyBjYWxsJ3Mgcm9vdFByb3BlcnR5VmFsdWUgaXMgZXh0cmFjdGVkIGZyb20gdGhlIGVsZW1lbnQncyBkYXRhIGNhY2hlIHNpbmNlIHRoYXQncyB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlIG9mIHJvb3RQcm9wZXJ0eVZhbHVlIHRoYXQgZ2V0cyBmcmVzaGx5IHVwZGF0ZWQgYnkgdGhlIHR3ZWVuaW5nIHByb2Nlc3MsIHdoZXJlYXMgdGhlIHJvb3RQcm9wZXJ0eVZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRhY2hlZCB0byB0aGUgaW5jb21pbmcgbGFzdFR3ZWVuc0NvbnRhaW5lciBpcyBlcXVhbCB0byB0aGUgcm9vdCBwcm9wZXJ0eSdzIHZhbHVlIHByaW9yIHRvIGFueSB0d2VlbmluZy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlID0gRGF0YShlbGVtZW50KS5yb290UHJvcGVydHlWYWx1ZUNhY2hlW3Jvb3RQcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIHZhbHVlcyB3ZXJlIG5vdCB0cmFuc2ZlcnJlZCBmcm9tIGEgcHJldmlvdXMgVmVsb2NpdHkgY2FsbCwgcXVlcnkgdGhlIERPTSBhcyBuZWVkZWQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBIYW5kbGUgaG9va2VkIHByb3BlcnRpZXMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQ1NTLkhvb2tzLnJlZ2lzdGVyZWRbcHJvcGVydHldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhcnRWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlID0gQ1NTLmdldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgcm9vdFByb3BlcnR5KTsgLyogR0VUICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IFRoZSBmb2xsb3dpbmcgZ2V0UHJvcGVydHlWYWx1ZSgpIGNhbGwgZG9lcyBub3QgYWN0dWFsbHkgdHJpZ2dlciBhIERPTSBxdWVyeTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UHJvcGVydHlWYWx1ZSgpIHdpbGwgZXh0cmFjdCB0aGUgaG9vayBmcm9tIHJvb3RQcm9wZXJ0eVZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlID0gQ1NTLmdldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgcHJvcGVydHksIHJvb3RQcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiBzdGFydFZhbHVlIGlzIGFscmVhZHkgZGVmaW5lZCB2aWEgZm9yY2VmZWVkaW5nLCBkbyBub3QgcXVlcnkgdGhlIERPTSBmb3IgdGhlIHJvb3QgcHJvcGVydHkncyB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqdXN0IGdyYWIgcm9vdFByb3BlcnR5J3MgemVyby12YWx1ZSB0ZW1wbGF0ZSBmcm9tIENTUy5Ib29rcy4gVGhpcyBvdmVyd3JpdGVzIHRoZSBlbGVtZW50J3MgYWN0dWFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdCBwcm9wZXJ0eSB2YWx1ZSAoaWYgb25lIGlzIHNldCksIGJ1dCB0aGlzIGlzIGFjY2VwdGFibGUgc2luY2UgdGhlIHByaW1hcnkgcmVhc29uIHVzZXJzIGZvcmNlZmVlZCBpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGF2b2lkIERPTSBxdWVyaWVzLCBhbmQgdGh1cyB3ZSBsaWtld2lzZSBhdm9pZCBxdWVyeWluZyB0aGUgRE9NIGZvciB0aGUgcm9vdCBwcm9wZXJ0eSdzIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEdyYWIgdGhpcyBob29rJ3MgemVyby12YWx1ZSB0ZW1wbGF0ZSwgZS5nLiBcIjBweCAwcHggMHB4IGJsYWNrXCIuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlID0gQ1NTLkhvb2tzLnRlbXBsYXRlc1tyb290UHJvcGVydHldWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEhhbmRsZSBub24taG9va2VkIHByb3BlcnRpZXMgdGhhdCBoYXZlbid0IGFscmVhZHkgYmVlbiBkZWZpbmVkIHZpYSBmb3JjZWZlZWRpbmcuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXJ0VmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VmFsdWUgPSBDU1MuZ2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCBwcm9wZXJ0eSk7IC8qIEdFVCAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWUgRGF0YSBFeHRyYWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlcGFyYXRlZFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWVVbml0VHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VmFsdWVVbml0VHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBTZXBhcmF0ZXMgYSBwcm9wZXJ0eSB2YWx1ZSBpbnRvIGl0cyBudW1lcmljIHZhbHVlIGFuZCBpdHMgdW5pdCB0eXBlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXBhcmF0ZVZhbHVlIChwcm9wZXJ0eSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1bml0VHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1lcmljVmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtZXJpY1ZhbHVlID0gKHZhbHVlIHx8IFwiMFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBNYXRjaCB0aGUgdW5pdCB0eXBlIGF0IHRoZSBlbmQgb2YgdGhlIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bJUEtel0rJC8sIGZ1bmN0aW9uKG1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEdyYWIgdGhlIHVuaXQgdHlwZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdFR5cGUgPSBtYXRjaDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFN0cmlwIHRoZSB1bml0IHR5cGUgb2ZmIG9mIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiBubyB1bml0IHR5cGUgd2FzIHN1cHBsaWVkLCBhc3NpZ24gb25lIHRoYXQgaXMgYXBwcm9wcmlhdGUgZm9yIHRoaXMgcHJvcGVydHkgKGUuZy4gXCJkZWdcIiBmb3Igcm90YXRlWiBvciBcInB4XCIgZm9yIHdpZHRoKS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdW5pdFR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml0VHlwZSA9IENTUy5WYWx1ZXMuZ2V0VW5pdFR5cGUocHJvcGVydHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIG51bWVyaWNWYWx1ZSwgdW5pdFR5cGUgXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogU2VwYXJhdGUgc3RhcnRWYWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VwYXJhdGVkVmFsdWUgPSBzZXBhcmF0ZVZhbHVlKHByb3BlcnR5LCBzdGFydFZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZSA9IHNlcGFyYXRlZFZhbHVlWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlVW5pdFR5cGUgPSBzZXBhcmF0ZWRWYWx1ZVsxXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFNlcGFyYXRlIGVuZFZhbHVlLCBhbmQgZXh0cmFjdCBhIHZhbHVlIG9wZXJhdG9yIChlLmcuIFwiKz1cIiwgXCItPVwiKSBpZiBvbmUgZXhpc3RzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXBhcmF0ZWRWYWx1ZSA9IHNlcGFyYXRlVmFsdWUocHJvcGVydHksIGVuZFZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWUgPSBzZXBhcmF0ZWRWYWx1ZVswXS5yZXBsYWNlKC9eKFsrLVxcLypdKT0vLCBmdW5jdGlvbihtYXRjaCwgc3ViTWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yID0gc3ViTWF0Y2g7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogU3RyaXAgdGhlIG9wZXJhdG9yIG9mZiBvZiB0aGUgdmFsdWUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlVW5pdFR5cGUgPSBzZXBhcmF0ZWRWYWx1ZVsxXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFBhcnNlIGZsb2F0IHZhbHVlcyBmcm9tIGVuZFZhbHVlIGFuZCBzdGFydFZhbHVlLiBEZWZhdWx0IHRvIDAgaWYgTmFOIGlzIHJldHVybmVkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlID0gcGFyc2VGbG9hdChzdGFydFZhbHVlKSB8fCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZSA9IHBhcnNlRmxvYXQoZW5kVmFsdWUpIHx8IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFByb3BlcnR5LVNwZWNpZmljIFZhbHVlIENvbnZlcnNpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogQ3VzdG9tIHN1cHBvcnQgZm9yIHByb3BlcnRpZXMgdGhhdCBkb24ndCBhY3R1YWxseSBhY2NlcHQgdGhlICUgdW5pdCB0eXBlLCBidXQgd2hlcmUgcG9sbHlmaWxsaW5nIGlzIHRyaXZpYWwgYW5kIHJlbGF0aXZlbHkgZm9vbHByb29mLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kVmFsdWVVbml0VHlwZSA9PT0gXCIlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEEgJS12YWx1ZSBmb250U2l6ZS9saW5lSGVpZ2h0IGlzIHJlbGF0aXZlIHRvIHRoZSBwYXJlbnQncyBmb250U2l6ZSAoYXMgb3Bwb3NlZCB0byB0aGUgcGFyZW50J3MgZGltZW5zaW9ucyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGljaCBpcyBpZGVudGljYWwgdG8gdGhlIGVtIHVuaXQncyBiZWhhdmlvciwgc28gd2UgcGlnZ3liYWNrIG9mZiBvZiB0aGF0LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC9eKGZvbnRTaXplfGxpbmVIZWlnaHQpJC8udGVzdChwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBDb252ZXJ0ICUgaW50byBhbiBlbSBkZWNpbWFsIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlID0gZW5kVmFsdWUgLyAxMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWVVbml0VHlwZSA9IFwiZW1cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEZvciBzY2FsZVggYW5kIHNjYWxlWSwgY29udmVydCB0aGUgdmFsdWUgaW50byBpdHMgZGVjaW1hbCBmb3JtYXQgYW5kIHN0cmlwIG9mZiB0aGUgdW5pdCB0eXBlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvXnNjYWxlLy50ZXN0KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlID0gZW5kVmFsdWUgLyAxMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWVVbml0VHlwZSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBGb3IgUkdCIGNvbXBvbmVudHMsIHRha2UgdGhlIGRlZmluZWQgcGVyY2VudGFnZSBvZiAyNTUgYW5kIHN0cmlwIG9mZiB0aGUgdW5pdCB0eXBlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvKFJlZHxHcmVlbnxCbHVlKSQvaS50ZXN0KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlID0gKGVuZFZhbHVlIC8gMTAwKSAqIDI1NTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZVVuaXRUeXBlID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBVbml0IFJhdGlvIENhbGN1bGF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFdoZW4gcXVlcmllZCwgdGhlIGJyb3dzZXIgcmV0dXJucyAobW9zdCkgQ1NTIHByb3BlcnR5IHZhbHVlcyBpbiBwaXhlbHMuIFRoZXJlZm9yZSwgaWYgYW4gZW5kVmFsdWUgd2l0aCBhIHVuaXQgdHlwZSBvZlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAlLCBlbSwgb3IgcmVtIGlzIGFuaW1hdGVkIHRvd2FyZCwgc3RhcnRWYWx1ZSBtdXN0IGJlIGNvbnZlcnRlZCBmcm9tIHBpeGVscyBpbnRvIHRoZSBzYW1lIHVuaXQgdHlwZSBhcyBlbmRWYWx1ZSBpbiBvcmRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdmFsdWUgbWFuaXB1bGF0aW9uIGxvZ2ljIChpbmNyZW1lbnQvZGVjcmVtZW50KSB0byBwcm9jZWVkLiBGdXJ0aGVyLCBpZiB0aGUgc3RhcnRWYWx1ZSB3YXMgZm9yY2VmZWQgb3IgdHJhbnNmZXJyZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSBhIHByZXZpb3VzIGNhbGwsIHN0YXJ0VmFsdWUgbWF5IGFsc28gbm90IGJlIGluIHBpeGVscy4gVW5pdCBjb252ZXJzaW9uIGxvZ2ljIHRoZXJlZm9yZSBjb25zaXN0cyBvZiB0d28gc3RlcHM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIDEpIENhbGN1bGF0aW5nIHRoZSByYXRpbyBvZiAlL2VtL3JlbS92aC92dyByZWxhdGl2ZSB0byBwaXhlbHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgMikgQ29udmVydGluZyBzdGFydFZhbHVlIGludG8gdGhlIHNhbWUgdW5pdCBvZiBtZWFzdXJlbWVudCBhcyBlbmRWYWx1ZSBiYXNlZCBvbiB0aGVzZSByYXRpb3MuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFVuaXQgY29udmVyc2lvbiByYXRpb3MgYXJlIGNhbGN1bGF0ZWQgYnkgaW5zZXJ0aW5nIGEgc2libGluZyBub2RlIG5leHQgdG8gdGhlIHRhcmdldCBub2RlLCBjb3B5aW5nIG92ZXIgaXRzIHBvc2l0aW9uIHByb3BlcnR5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nIHZhbHVlcyB3aXRoIHRoZSB0YXJnZXQgdW5pdCB0eXBlIHRoZW4gY29tcGFyaW5nIHRoZSByZXR1cm5lZCBwaXhlbCB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogRXZlbiBpZiBvbmx5IG9uZSBvZiB0aGVzZSB1bml0IHR5cGVzIGlzIGJlaW5nIGFuaW1hdGVkLCBhbGwgdW5pdCByYXRpb3MgYXJlIGNhbGN1bGF0ZWQgYXQgb25jZSBzaW5jZSB0aGUgb3ZlcmhlYWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgb2YgYmF0Y2hpbmcgdGhlIFNFVHMgYW5kIEdFVHMgdG9nZXRoZXIgdXBmcm9udCBvdXR3ZWlnaHRzIHRoZSBwb3RlbnRpYWwgb3ZlcmhlYWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgb2YgbGF5b3V0IHRocmFzaGluZyBjYXVzZWQgYnkgcmUtcXVlcnlpbmcgZm9yIHVuY2FsY3VsYXRlZCByYXRpb3MgZm9yIHN1YnNlcXVlbnRseS1wcm9jZXNzZWQgcHJvcGVydGllcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogVG9kbzogU2hpZnQgdGhpcyBsb2dpYyBpbnRvIHRoZSBjYWxscycgZmlyc3QgdGljayBpbnN0YW5jZSBzbyB0aGF0IGl0J3Mgc3luY2VkIHdpdGggUkFGLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVVbml0UmF0aW9zICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2FtZSBSYXRpbyBDaGVja3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBUaGUgcHJvcGVydGllcyBiZWxvdyBhcmUgdXNlZCB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgZWxlbWVudCBkaWZmZXJzIHN1ZmZpY2llbnRseSBmcm9tIHRoaXMgY2FsbCdzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c2x5IGl0ZXJhdGVkIGVsZW1lbnQgdG8gYWxzbyBkaWZmZXIgaW4gaXRzIHVuaXQgY29udmVyc2lvbiByYXRpb3MuIElmIHRoZSBwcm9wZXJ0aWVzIG1hdGNoIHVwIHdpdGggdGhvc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mIHRoZSBwcmlvciBlbGVtZW50LCB0aGUgcHJpb3IgZWxlbWVudCdzIGNvbnZlcnNpb24gcmF0aW9zIGFyZSB1c2VkLiBMaWtlIG1vc3Qgb3B0aW1pemF0aW9ucyBpbiBWZWxvY2l0eSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMgaXMgZG9uZSB0byBtaW5pbWl6ZSBET00gcXVlcnlpbmcuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2FtZVJhdGlvSW5kaWNhdG9ycyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXlQYXJlbnQ6IGVsZW1lbnQucGFyZW50Tm9kZSB8fCBkb2N1bWVudC5ib2R5LCAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwicG9zaXRpb25cIiksIC8qIEdFVCAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogQ1NTLmdldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJmb250U2l6ZVwiKSAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIERldGVybWluZSBpZiB0aGUgc2FtZSAlIHJhdGlvIGNhbiBiZSB1c2VkLiAlIGlzIGJhc2VkIG9uIHRoZSBlbGVtZW50J3MgcG9zaXRpb24gdmFsdWUgYW5kIGl0cyBwYXJlbnQncyB3aWR0aCBhbmQgaGVpZ2h0IGRpbWVuc2lvbnMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FtZVBlcmNlbnRSYXRpbyA9ICgoc2FtZVJhdGlvSW5kaWNhdG9ycy5wb3NpdGlvbiA9PT0gY2FsbFVuaXRDb252ZXJzaW9uRGF0YS5sYXN0UG9zaXRpb24pICYmIChzYW1lUmF0aW9JbmRpY2F0b3JzLm15UGFyZW50ID09PSBjYWxsVW5pdENvbnZlcnNpb25EYXRhLmxhc3RQYXJlbnQpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBEZXRlcm1pbmUgaWYgdGhlIHNhbWUgZW0gcmF0aW8gY2FuIGJlIHVzZWQuIGVtIGlzIHJlbGF0aXZlIHRvIHRoZSBlbGVtZW50J3MgZm9udFNpemUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FtZUVtUmF0aW8gPSAoc2FtZVJhdGlvSW5kaWNhdG9ycy5mb250U2l6ZSA9PT0gY2FsbFVuaXRDb252ZXJzaW9uRGF0YS5sYXN0Rm9udFNpemUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFN0b3JlIHRoZXNlIHJhdGlvIGluZGljYXRvcnMgY2FsbC13aWRlIGZvciB0aGUgbmV4dCBlbGVtZW50IHRvIGNvbXBhcmUgYWdhaW5zdC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxVbml0Q29udmVyc2lvbkRhdGEubGFzdFBhcmVudCA9IHNhbWVSYXRpb0luZGljYXRvcnMubXlQYXJlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsVW5pdENvbnZlcnNpb25EYXRhLmxhc3RQb3NpdGlvbiA9IHNhbWVSYXRpb0luZGljYXRvcnMucG9zaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsVW5pdENvbnZlcnNpb25EYXRhLmxhc3RGb250U2l6ZSA9IHNhbWVSYXRpb0luZGljYXRvcnMuZm9udFNpemU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudC1TcGVjaWZpYyBVbml0c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IElFOCByb3VuZHMgdG8gdGhlIG5lYXJlc3QgcGl4ZWwgd2hlbiByZXR1cm5pbmcgQ1NTIHZhbHVlcywgdGh1cyB3ZSBwZXJmb3JtIGNvbnZlcnNpb25zIHVzaW5nIGEgbWVhc3VyZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mIDEwMCAoaW5zdGVhZCBvZiAxKSB0byBnaXZlIG91ciByYXRpb3MgYSBwcmVjaXNpb24gb2YgYXQgbGVhc3QgMiBkZWNpbWFsIHZhbHVlcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZWFzdXJlbWVudCA9IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml0UmF0aW9zID0ge307XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzYW1lRW1SYXRpbyB8fCAhc2FtZVBlcmNlbnRSYXRpbykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkdW1teSA9IERhdGEoZWxlbWVudCkuaXNTVkcgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInJlY3RcIikgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS5pbml0KGR1bW15KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYW1lUmF0aW9JbmRpY2F0b3JzLm15UGFyZW50LmFwcGVuZENoaWxkKGR1bW15KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogVG8gYWNjdXJhdGVseSBhbmQgY29uc2lzdGVudGx5IGNhbGN1bGF0ZSBjb252ZXJzaW9uIHJhdGlvcywgdGhlIGVsZW1lbnQncyBjYXNjYWRlZCBvdmVyZmxvdyBhbmQgYm94LXNpemluZyBhcmUgc3RyaXBwZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2ltaWxhcmx5LCBzaW5jZSB3aWR0aC9oZWlnaHQgY2FuIGJlIGFydGlmaWNpYWxseSBjb25zdHJhaW5lZCBieSB0aGVpciBtaW4tL21heC0gZXF1aXZhbGVudHMsIHRoZXNlIGFyZSBjb250cm9sbGVkIGZvciBhcyB3ZWxsLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IE92ZXJmbG93IG11c3QgYmUgYWxzbyBiZSBjb250cm9sbGVkIGZvciBwZXItYXhpcyBzaW5jZSB0aGUgb3ZlcmZsb3cgcHJvcGVydHkgb3ZlcndyaXRlcyBpdHMgcGVyLWF4aXMgdmFsdWVzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaChbIFwib3ZlcmZsb3dcIiwgXCJvdmVyZmxvd1hcIiwgXCJvdmVyZmxvd1lcIiBdLCBmdW5jdGlvbihpLCBwcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS5DU1Muc2V0UHJvcGVydHlWYWx1ZShkdW1teSwgcHJvcGVydHksIFwiaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZlbG9jaXR5LkNTUy5zZXRQcm9wZXJ0eVZhbHVlKGR1bW15LCBcInBvc2l0aW9uXCIsIHNhbWVSYXRpb0luZGljYXRvcnMucG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZlbG9jaXR5LkNTUy5zZXRQcm9wZXJ0eVZhbHVlKGR1bW15LCBcImZvbnRTaXplXCIsIHNhbWVSYXRpb0luZGljYXRvcnMuZm9udFNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZlbG9jaXR5LkNTUy5zZXRQcm9wZXJ0eVZhbHVlKGR1bW15LCBcImJveFNpemluZ1wiLCBcImNvbnRlbnQtYm94XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiB3aWR0aCBhbmQgaGVpZ2h0IGFjdCBhcyBvdXIgcHJveHkgcHJvcGVydGllcyBmb3IgbWVhc3VyaW5nIHRoZSBob3Jpem9udGFsIGFuZCB2ZXJ0aWNhbCAlIHJhdGlvcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goWyBcIm1pbldpZHRoXCIsIFwibWF4V2lkdGhcIiwgXCJ3aWR0aFwiLCBcIm1pbkhlaWdodFwiLCBcIm1heEhlaWdodFwiLCBcImhlaWdodFwiIF0sIGZ1bmN0aW9uKGksIHByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZlbG9jaXR5LkNTUy5zZXRQcm9wZXJ0eVZhbHVlKGR1bW15LCBwcm9wZXJ0eSwgbWVhc3VyZW1lbnQgKyBcIiVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogcGFkZGluZ0xlZnQgYXJiaXRyYXJpbHkgYWN0cyBhcyBvdXIgcHJveHkgcHJvcGVydHkgZm9yIHRoZSBlbSByYXRpby4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS5DU1Muc2V0UHJvcGVydHlWYWx1ZShkdW1teSwgXCJwYWRkaW5nTGVmdFwiLCBtZWFzdXJlbWVudCArIFwiZW1cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIERpdmlkZSB0aGUgcmV0dXJuZWQgdmFsdWUgYnkgdGhlIG1lYXN1cmVtZW50IHRvIGdldCB0aGUgcmF0aW8gYmV0d2VlbiAxJSBhbmQgMXB4LiBEZWZhdWx0IHRvIDEgc2luY2Ugd29ya2luZyB3aXRoIDAgY2FuIHByb2R1Y2UgSW5maW5pdGUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdFJhdGlvcy5wZXJjZW50VG9QeFdpZHRoID0gY2FsbFVuaXRDb252ZXJzaW9uRGF0YS5sYXN0UGVyY2VudFRvUHhXaWR0aCA9IChwYXJzZUZsb2F0KENTUy5nZXRQcm9wZXJ0eVZhbHVlKGR1bW15LCBcIndpZHRoXCIsIG51bGwsIHRydWUpKSB8fCAxKSAvIG1lYXN1cmVtZW50OyAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml0UmF0aW9zLnBlcmNlbnRUb1B4SGVpZ2h0ID0gY2FsbFVuaXRDb252ZXJzaW9uRGF0YS5sYXN0UGVyY2VudFRvUHhIZWlnaHQgPSAocGFyc2VGbG9hdChDU1MuZ2V0UHJvcGVydHlWYWx1ZShkdW1teSwgXCJoZWlnaHRcIiwgbnVsbCwgdHJ1ZSkpIHx8IDEpIC8gbWVhc3VyZW1lbnQ7IC8qIEdFVCAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRSYXRpb3MuZW1Ub1B4ID0gY2FsbFVuaXRDb252ZXJzaW9uRGF0YS5sYXN0RW1Ub1B4ID0gKHBhcnNlRmxvYXQoQ1NTLmdldFByb3BlcnR5VmFsdWUoZHVtbXksIFwicGFkZGluZ0xlZnRcIikpIHx8IDEpIC8gbWVhc3VyZW1lbnQ7IC8qIEdFVCAqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYW1lUmF0aW9JbmRpY2F0b3JzLm15UGFyZW50LnJlbW92ZUNoaWxkKGR1bW15KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdFJhdGlvcy5lbVRvUHggPSBjYWxsVW5pdENvbnZlcnNpb25EYXRhLmxhc3RFbVRvUHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdFJhdGlvcy5wZXJjZW50VG9QeFdpZHRoID0gY2FsbFVuaXRDb252ZXJzaW9uRGF0YS5sYXN0UGVyY2VudFRvUHhXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml0UmF0aW9zLnBlcmNlbnRUb1B4SGVpZ2h0ID0gY2FsbFVuaXRDb252ZXJzaW9uRGF0YS5sYXN0UGVyY2VudFRvUHhIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudC1BZ25vc3RpYyBVbml0c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFdoZXJlYXMgJSBhbmQgZW0gcmF0aW9zIGFyZSBkZXRlcm1pbmVkIG9uIGEgcGVyLWVsZW1lbnQgYmFzaXMsIHRoZSByZW0gdW5pdCBvbmx5IG5lZWRzIHRvIGJlIGNoZWNrZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2UgcGVyIGNhbGwgc2luY2UgaXQncyBleGNsdXNpdmVseSBkZXBlbmRhbnQgdXBvbiBkb2N1bWVudC5ib2R5J3MgZm9udFNpemUuIElmIHRoaXMgaXMgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQgY2FsY3VsYXRlVW5pdFJhdGlvcygpIGlzIGJlaW5nIHJ1biBkdXJpbmcgdGhpcyBjYWxsLCByZW1Ub1B4IHdpbGwgc3RpbGwgYmUgc2V0IHRvIGl0cyBkZWZhdWx0IHZhbHVlIG9mIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbyB3ZSBjYWxjdWxhdGUgaXQgbm93LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxVbml0Q29udmVyc2lvbkRhdGEucmVtVG9QeCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIERlZmF1bHQgdG8gYnJvd3NlcnMnIGRlZmF1bHQgZm9udFNpemUgb2YgMTZweCBpbiB0aGUgY2FzZSBvZiAwLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxVbml0Q29udmVyc2lvbkRhdGEucmVtVG9QeCA9IHBhcnNlRmxvYXQoQ1NTLmdldFByb3BlcnR5VmFsdWUoZG9jdW1lbnQuYm9keSwgXCJmb250U2l6ZVwiKSkgfHwgMTY7IC8qIEdFVCAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFNpbWlsYXJseSwgdmlld3BvcnQgdW5pdHMgYXJlICUtcmVsYXRpdmUgdG8gdGhlIHdpbmRvdydzIGlubmVyIGRpbWVuc2lvbnMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbFVuaXRDb252ZXJzaW9uRGF0YS52d1RvUHggPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsVW5pdENvbnZlcnNpb25EYXRhLnZ3VG9QeCA9IHBhcnNlRmxvYXQod2luZG93LmlubmVyV2lkdGgpIC8gMTAwOyAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsVW5pdENvbnZlcnNpb25EYXRhLnZoVG9QeCA9IHBhcnNlRmxvYXQod2luZG93LmlubmVySGVpZ2h0KSAvIDEwMDsgLyogR0VUICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdFJhdGlvcy5yZW1Ub1B4ID0gY2FsbFVuaXRDb252ZXJzaW9uRGF0YS5yZW1Ub1B4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdFJhdGlvcy52d1RvUHggPSBjYWxsVW5pdENvbnZlcnNpb25EYXRhLnZ3VG9QeDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRSYXRpb3MudmhUb1B4ID0gY2FsbFVuaXRDb252ZXJzaW9uRGF0YS52aFRvUHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFZlbG9jaXR5LmRlYnVnID49IDEpIGNvbnNvbGUubG9nKFwiVW5pdCByYXRpb3M6IFwiICsgSlNPTi5zdHJpbmdpZnkodW5pdFJhdGlvcyksIGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bml0UmF0aW9zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgVW5pdCBDb252ZXJzaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogVGhlICogYW5kIC8gb3BlcmF0b3JzLCB3aGljaCBhcmUgbm90IHBhc3NlZCBpbiB3aXRoIGFuIGFzc29jaWF0ZWQgdW5pdCwgaW5oZXJlbnRseSB1c2Ugc3RhcnRWYWx1ZSdzIHVuaXQuIFNraXAgdmFsdWUgYW5kIHVuaXQgY29udmVyc2lvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC9bXFwvKl0vLnRlc3Qob3BlcmF0b3IpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZVVuaXRUeXBlID0gc3RhcnRWYWx1ZVVuaXRUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiBzdGFydFZhbHVlIGFuZCBlbmRWYWx1ZSBkaWZmZXIgaW4gdW5pdCB0eXBlLCBjb252ZXJ0IHN0YXJ0VmFsdWUgaW50byB0aGUgc2FtZSB1bml0IHR5cGUgYXMgZW5kVmFsdWUgc28gdGhhdCBpZiBlbmRWYWx1ZVVuaXRUeXBlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzIGEgcmVsYXRpdmUgdW5pdCAoJSwgZW0sIHJlbSksIHRoZSB2YWx1ZXMgc2V0IGR1cmluZyB0d2VlbmluZyB3aWxsIGNvbnRpbnVlIHRvIGJlIGFjY3VyYXRlbHkgcmVsYXRpdmUgZXZlbiBpZiB0aGUgbWV0cmljcyB0aGV5IGRlcGVuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBvbiBhcmUgZHluYW1pY2FsbHkgY2hhbmdpbmcgZHVyaW5nIHRoZSBjb3Vyc2Ugb2YgdGhlIGFuaW1hdGlvbi4gQ29udmVyc2VseSwgaWYgd2UgYWx3YXlzIG5vcm1hbGl6ZWQgaW50byBweCBhbmQgdXNlZCBweCBmb3Igc2V0dGluZyB2YWx1ZXMsIHRoZSBweCByYXRpb1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB3b3VsZCBiZWNvbWUgc3RhbGUgaWYgdGhlIG9yaWdpbmFsIHVuaXQgYmVpbmcgYW5pbWF0ZWQgdG93YXJkIHdhcyByZWxhdGl2ZSBhbmQgdGhlIHVuZGVybHlpbmcgbWV0cmljcyBjaGFuZ2UgZHVyaW5nIHRoZSBhbmltYXRpb24uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFNpbmNlIDAgaXMgMCBpbiBhbnkgdW5pdCB0eXBlLCBubyBjb252ZXJzaW9uIGlzIG5lY2Vzc2FyeSB3aGVuIHN0YXJ0VmFsdWUgaXMgMCAtLSB3ZSBqdXN0IHN0YXJ0IGF0IDAgd2l0aCBlbmRWYWx1ZVVuaXRUeXBlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKChzdGFydFZhbHVlVW5pdFR5cGUgIT09IGVuZFZhbHVlVW5pdFR5cGUpICYmIHN0YXJ0VmFsdWUgIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFVuaXQgY29udmVyc2lvbiBpcyBhbHNvIHNraXBwZWQgd2hlbiBlbmRWYWx1ZSBpcyAwLCBidXQgKnN0YXJ0VmFsdWVVbml0VHlwZSogbXVzdCBiZSB1c2VkIGZvciB0d2VlbiB2YWx1ZXMgdG8gcmVtYWluIGFjY3VyYXRlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogU2tpcHBpbmcgdW5pdCBjb252ZXJzaW9uIGhlcmUgbWVhbnMgdGhhdCBpZiBlbmRWYWx1ZVVuaXRUeXBlIHdhcyBvcmlnaW5hbGx5IGEgcmVsYXRpdmUgdW5pdCwgdGhlIGFuaW1hdGlvbiB3b24ndCByZWxhdGl2ZWx5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCB0aGUgdW5kZXJseWluZyBtZXRyaWNzIGlmIHRoZXkgY2hhbmdlLCBidXQgdGhpcyBpcyBhY2NlcHRhYmxlIHNpbmNlIHdlJ3JlIGFuaW1hdGluZyB0b3dhcmQgaW52aXNpYmlsaXR5IGluc3RlYWQgb2YgdG93YXJkIHZpc2liaWxpdHksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGljaCByZW1haW5zIHBhc3QgdGhlIHBvaW50IG9mIHRoZSBhbmltYXRpb24ncyBjb21wbGV0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZFZhbHVlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWVVbml0VHlwZSA9IHN0YXJ0VmFsdWVVbml0VHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQnkgdGhpcyBwb2ludCwgd2UgY2Fubm90IGF2b2lkIHVuaXQgY29udmVyc2lvbiAoaXQncyB1bmRlc2lyYWJsZSBzaW5jZSBpdCBjYXVzZXMgbGF5b3V0IHRocmFzaGluZykuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgd2UgaGF2ZW4ndCBhbHJlYWR5LCB3ZSB0cmlnZ2VyIGNhbGN1bGF0ZVVuaXRSYXRpb3MoKSwgd2hpY2ggcnVucyBvbmNlIHBlciBlbGVtZW50IHBlciBjYWxsLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRVbml0Q29udmVyc2lvbkRhdGEgPSBlbGVtZW50VW5pdENvbnZlcnNpb25EYXRhIHx8IGNhbGN1bGF0ZVVuaXRSYXRpb3MoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogVGhlIGZvbGxvd2luZyBSZWdFeCBtYXRjaGVzIENTUyBwcm9wZXJ0aWVzIHRoYXQgaGF2ZSB0aGVpciAlIHZhbHVlcyBtZWFzdXJlZCByZWxhdGl2ZSB0byB0aGUgeC1heGlzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IFczQyBzcGVjIG1hbmRhdGVzIHRoYXQgYWxsIG9mIG1hcmdpbiBhbmQgcGFkZGluZydzIHByb3BlcnRpZXMgKGV2ZW4gdG9wIGFuZCBib3R0b20pIGFyZSAlLXJlbGF0aXZlIHRvIHRoZSAqd2lkdGgqIG9mIHRoZSBwYXJlbnQgZWxlbWVudC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXhpcyA9ICgvbWFyZ2lufHBhZGRpbmd8bGVmdHxyaWdodHx3aWR0aHx0ZXh0fHdvcmR8bGV0dGVyL2kudGVzdChwcm9wZXJ0eSkgfHwgL1gkLy50ZXN0KHByb3BlcnR5KSB8fCBwcm9wZXJ0eSA9PT0gXCJ4XCIpID8gXCJ4XCIgOiBcInlcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSW4gb3JkZXIgdG8gYXZvaWQgZ2VuZXJhdGluZyBuXjIgYmVzcG9rZSBjb252ZXJzaW9uIGZ1bmN0aW9ucywgdW5pdCBjb252ZXJzaW9uIGlzIGEgdHdvLXN0ZXAgcHJvY2VzczpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxKSBDb252ZXJ0IHN0YXJ0VmFsdWUgaW50byBwaXhlbHMuIDIpIENvbnZlcnQgdGhpcyBuZXcgcGl4ZWwgdmFsdWUgaW50byBlbmRWYWx1ZSdzIHVuaXQgdHlwZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHN0YXJ0VmFsdWVVbml0VHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiJVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogdHJhbnNsYXRlWCBhbmQgdHJhbnNsYXRlWSBhcmUgdGhlIG9ubHkgcHJvcGVydGllcyB0aGF0IGFyZSAlLXJlbGF0aXZlIHRvIGFuIGVsZW1lbnQncyBvd24gZGltZW5zaW9ucyAtLSBub3QgaXRzIHBhcmVudCdzIGRpbWVuc2lvbnMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eSBkb2VzIG5vdCBpbmNsdWRlIGEgc3BlY2lhbCBjb252ZXJzaW9uIHByb2Nlc3MgdG8gYWNjb3VudCBmb3IgdGhpcyBiZWhhdmlvci4gVGhlcmVmb3JlLCBhbmltYXRpbmcgdHJhbnNsYXRlWC9ZIGZyb20gYSAlIHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vbi0lIHZhbHVlIHdpbGwgcHJvZHVjZSBhbiBpbmNvcnJlY3Qgc3RhcnQgdmFsdWUuIEZvcnR1bmF0ZWx5LCB0aGlzIHNvcnQgb2YgY3Jvc3MtdW5pdCBjb252ZXJzaW9uIGlzIHJhcmVseSBkb25lIGJ5IHVzZXJzIGluIHByYWN0aWNlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZSAqPSAoYXhpcyA9PT0gXCJ4XCIgPyBlbGVtZW50VW5pdENvbnZlcnNpb25EYXRhLnBlcmNlbnRUb1B4V2lkdGggOiBlbGVtZW50VW5pdENvbnZlcnNpb25EYXRhLnBlcmNlbnRUb1B4SGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInB4XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBweCBhY3RzIGFzIG91ciBtaWRwb2ludCBpbiB0aGUgdW5pdCBjb252ZXJzaW9uIHByb2Nlc3M7IGRvIG5vdGhpbmcuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlICo9IGVsZW1lbnRVbml0Q29udmVyc2lvbkRhdGFbc3RhcnRWYWx1ZVVuaXRUeXBlICsgXCJUb1B4XCJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSW52ZXJ0IHRoZSBweCByYXRpb3MgdG8gY29udmVydCBpbnRvIHRvIHRoZSB0YXJnZXQgdW5pdC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGVuZFZhbHVlVW5pdFR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VmFsdWUgKj0gMSAvIChheGlzID09PSBcInhcIiA/IGVsZW1lbnRVbml0Q29udmVyc2lvbkRhdGEucGVyY2VudFRvUHhXaWR0aCA6IGVsZW1lbnRVbml0Q29udmVyc2lvbkRhdGEucGVyY2VudFRvUHhIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicHhcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHN0YXJ0VmFsdWUgaXMgYWxyZWFkeSBpbiBweCwgZG8gbm90aGluZzsgd2UncmUgZG9uZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VmFsdWUgKj0gMSAvIGVsZW1lbnRVbml0Q29udmVyc2lvbkRhdGFbZW5kVmFsdWVVbml0VHlwZSArIFwiVG9QeFwiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVsYXRpdmUgVmFsdWVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIE9wZXJhdG9yIGxvZ2ljIG11c3QgYmUgcGVyZm9ybWVkIGxhc3Qgc2luY2UgaXQgcmVxdWlyZXMgdW5pdC1ub3JtYWxpemVkIHN0YXJ0IGFuZCBlbmQgdmFsdWVzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBSZWxhdGl2ZSAqcGVyY2VudCB2YWx1ZXMqIGRvIG5vdCBiZWhhdmUgaG93IG1vc3QgcGVvcGxlIHRoaW5rOyB3aGlsZSBvbmUgd291bGQgZXhwZWN0IFwiKz01MCVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBpbmNyZWFzZSB0aGUgcHJvcGVydHkgMS41eCBpdHMgY3VycmVudCB2YWx1ZSwgaXQgaW4gZmFjdCBpbmNyZWFzZXMgdGhlIHBlcmNlbnQgdW5pdHMgaW4gYWJzb2x1dGUgdGVybXM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIDUwIHBvaW50cyBpcyBhZGRlZCBvbiB0b3Agb2YgdGhlIGN1cnJlbnQgJSB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvcGVyYXRvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIitcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZSA9IHN0YXJ0VmFsdWUgKyBlbmRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiLVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlID0gc3RhcnRWYWx1ZSAtIGVuZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIqXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWUgPSBzdGFydFZhbHVlICogZW5kVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIi9cIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZSA9IHN0YXJ0VmFsdWUgLyBlbmRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuc0NvbnRhaW5lciBQdXNoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogQ29uc3RydWN0IHRoZSBwZXItcHJvcGVydHkgdHdlZW4gb2JqZWN0LCBhbmQgcHVzaCBpdCB0byB0aGUgZWxlbWVudCdzIHR3ZWVuc0NvbnRhaW5lci4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHdlZW5zQ29udGFpbmVyW3Byb3BlcnR5XSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlOiByb290UHJvcGVydHlWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VmFsdWU6IHN0YXJ0VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWU6IHN0YXJ0VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZTogZW5kVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml0VHlwZTogZW5kVmFsdWVVbml0VHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogZWFzaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoVmVsb2NpdHkuZGVidWcpIGNvbnNvbGUubG9nKFwidHdlZW5zQ29udGFpbmVyIChcIiArIHByb3BlcnR5ICsgXCIpOiBcIiArIEpTT04uc3RyaW5naWZ5KHR3ZWVuc0NvbnRhaW5lcltwcm9wZXJ0eV0pLCBlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIEFsb25nIHdpdGggaXRzIHByb3BlcnR5IGRhdGEsIHN0b3JlIGEgcmVmZXJlbmNlIHRvIHRoZSBlbGVtZW50IGl0c2VsZiBvbnRvIHR3ZWVuc0NvbnRhaW5lci4gKi9cclxuICAgICAgICAgICAgICAgICAgICB0d2VlbnNDb250YWluZXIuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICAgQ2FsbCBQdXNoXHJcbiAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBOb3RlOiB0d2VlbnNDb250YWluZXIgY2FuIGJlIGVtcHR5IGlmIGFsbCBvZiB0aGUgcHJvcGVydGllcyBpbiB0aGlzIGNhbGwncyBwcm9wZXJ0eSBtYXAgd2VyZSBza2lwcGVkIGR1ZSB0byBub3RcclxuICAgICAgICAgICAgICAgICAgIGJlaW5nIHN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlci4gVGhlIGVsZW1lbnQgcHJvcGVydHkgaXMgdXNlZCBmb3IgY2hlY2tpbmcgdGhhdCB0aGUgdHdlZW5zQ29udGFpbmVyIGhhcyBiZWVuIGFwcGVuZGVkIHRvLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKHR3ZWVuc0NvbnRhaW5lci5lbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogQXBwbHkgdGhlIFwidmVsb2NpdHktYW5pbWF0aW5nXCIgaW5kaWNhdG9yIGNsYXNzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIENTUy5WYWx1ZXMuYWRkQ2xhc3MoZWxlbWVudCwgXCJ2ZWxvY2l0eS1hbmltYXRpbmdcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIFRoZSBjYWxsIGFycmF5IGhvdXNlcyB0aGUgdHdlZW5zQ29udGFpbmVycyBmb3IgZWFjaCBlbGVtZW50IGJlaW5nIGFuaW1hdGVkIGluIHRoZSBjdXJyZW50IGNhbGwuICovXHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbC5wdXNoKHR3ZWVuc0NvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIFN0b3JlIHRoZSB0d2VlbnNDb250YWluZXIgYW5kIG9wdGlvbnMgaWYgd2UncmUgd29ya2luZyBvbiB0aGUgZGVmYXVsdCBlZmZlY3RzIHF1ZXVlLCBzbyB0aGF0IHRoZXkgY2FuIGJlIHVzZWQgYnkgdGhlIHJldmVyc2UgY29tbWFuZC4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5xdWV1ZSA9PT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEYXRhKGVsZW1lbnQpLnR3ZWVuc0NvbnRhaW5lciA9IHR3ZWVuc0NvbnRhaW5lcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRGF0YShlbGVtZW50KS5vcHRzID0gb3B0cztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIFN3aXRjaCBvbiB0aGUgZWxlbWVudCdzIGFuaW1hdGluZyBmbGFnLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIERhdGEoZWxlbWVudCkuaXNBbmltYXRpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBPbmNlIHRoZSBmaW5hbCBlbGVtZW50IGluIHRoaXMgY2FsbCdzIGVsZW1lbnQgc2V0IGhhcyBiZWVuIHByb2Nlc3NlZCwgcHVzaCB0aGUgY2FsbCBhcnJheSBvbnRvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkuU3RhdGUuY2FsbHMgZm9yIHRoZSBhbmltYXRpb24gdGljayB0byBpbW1lZGlhdGVseSBiZWdpbiBwcm9jZXNzaW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50c0luZGV4ID09PSBlbGVtZW50c0xlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogVG8gc3BlZWQgdXAgaXRlcmF0aW5nIG92ZXIgdGhpcyBhcnJheSwgaXQgaXMgY29tcGFjdGVkIChmYWxzZXkgaXRlbXMgLS0gY2FsbHMgdGhhdCBoYXZlIGNvbXBsZXRlZCAtLSBhcmUgcmVtb3ZlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hlbiBpdHMgbGVuZ3RoIGhhcyBiYWxsb29uZWQgdG8gYSBwb2ludCB0aGF0IGNhbiBpbXBhY3QgdGljayBwZXJmb3JtYW5jZS4gVGhpcyBvbmx5IGJlY29tZXMgbmVjZXNzYXJ5IHdoZW4gYW5pbWF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhcyBiZWVuIGNvbnRpbnVvdXMgd2l0aCBtYW55IGVsZW1lbnRzIG92ZXIgYSBsb25nIHBlcmlvZCBvZiB0aW1lOyB3aGVuZXZlciBhbGwgYWN0aXZlIGNhbGxzIGFyZSBjb21wbGV0ZWQsIGNvbXBsZXRlQ2FsbCgpIGNsZWFycyBWZWxvY2l0eS5TdGF0ZS5jYWxscy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFZlbG9jaXR5LlN0YXRlLmNhbGxzLmxlbmd0aCA+IDEwMDAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS5TdGF0ZS5jYWxscyA9IGNvbXBhY3RTcGFyc2VBcnJheShWZWxvY2l0eS5TdGF0ZS5jYWxscyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEFkZCB0aGUgY3VycmVudCBjYWxsIHBsdXMgaXRzIGFzc29jaWF0ZWQgbWV0YWRhdGEgKHRoZSBlbGVtZW50IHNldCBhbmQgdGhlIGNhbGwncyBvcHRpb25zKSBvbnRvIHRoZSBnbG9iYWwgY2FsbCBjb250YWluZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIEFueXRoaW5nIG9uIHRoaXMgY2FsbCBjb250YWluZXIgaXMgc3ViamVjdGVkIHRvIHRpY2soKSBwcm9jZXNzaW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS5TdGF0ZS5jYWxscy5wdXNoKFsgY2FsbCwgZWxlbWVudHMsIG9wdHMsIG51bGwsIHByb21pc2VEYXRhLnJlc29sdmVyIF0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIGFuaW1hdGlvbiB0aWNrIGlzbid0IHJ1bm5pbmcsIHN0YXJ0IGl0LiAoVmVsb2NpdHkgc2h1dHMgaXQgb2ZmIHdoZW4gdGhlcmUgYXJlIG5vIGFjdGl2ZSBjYWxscyB0byBwcm9jZXNzLikgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFZlbG9jaXR5LlN0YXRlLmlzVGlja2luZyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZlbG9jaXR5LlN0YXRlLmlzVGlja2luZyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogU3RhcnQgdGhlIHRpY2sgbG9vcC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzSW5kZXgrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qIFdoZW4gdGhlIHF1ZXVlIG9wdGlvbiBpcyBzZXQgdG8gZmFsc2UsIHRoZSBjYWxsIHNraXBzIHRoZSBlbGVtZW50J3MgcXVldWUgYW5kIGZpcmVzIGltbWVkaWF0ZWx5LiAqL1xyXG4gICAgICAgICAgICBpZiAob3B0cy5xdWV1ZSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIC8qIFNpbmNlIHRoaXMgYnVpbGRRdWV1ZSBjYWxsIGRvZXNuJ3QgcmVzcGVjdCB0aGUgZWxlbWVudCdzIGV4aXN0aW5nIHF1ZXVlICh3aGljaCBpcyB3aGVyZSBhIGRlbGF5IG9wdGlvbiB3b3VsZCBoYXZlIGJlZW4gYXBwZW5kZWQpLFxyXG4gICAgICAgICAgICAgICAgICAgd2UgbWFudWFsbHkgaW5qZWN0IHRoZSBkZWxheSBwcm9wZXJ0eSBoZXJlIHdpdGggYW4gZXhwbGljaXQgc2V0VGltZW91dC4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChvcHRzLmRlbGF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChidWlsZFF1ZXVlLCBvcHRzLmRlbGF5KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVpbGRRdWV1ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvKiBPdGhlcndpc2UsIHRoZSBjYWxsIHVuZGVyZ29lcyBlbGVtZW50IHF1ZXVlaW5nIGFzIG5vcm1hbC4gKi9cclxuICAgICAgICAgICAgLyogTm90ZTogVG8gaW50ZXJvcGVyYXRlIHdpdGggalF1ZXJ5LCBWZWxvY2l0eSB1c2VzIGpRdWVyeSdzIG93biAkLnF1ZXVlKCkgc3RhY2sgZm9yIHF1ZXVpbmcgbG9naWMuICovXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkLnF1ZXVlKGVsZW1lbnQsIG9wdHMucXVldWUsIGZ1bmN0aW9uKG5leHQsIGNsZWFyUXVldWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGUgY2xlYXJRdWV1ZSBmbGFnIHdhcyBwYXNzZWQgaW4gYnkgdGhlIHN0b3AgY29tbWFuZCwgcmVzb2x2ZSB0aGlzIGNhbGwncyBwcm9taXNlLiAoUHJvbWlzZXMgY2FuIG9ubHkgYmUgcmVzb2x2ZWQgb25jZSxcclxuICAgICAgICAgICAgICAgICAgICAgICBzbyBpdCdzIGZpbmUgaWYgdGhpcyBpcyByZXBlYXRlZGx5IHRyaWdnZXJlZCBmb3IgZWFjaCBlbGVtZW50IGluIHRoZSBhc3NvY2lhdGVkIGNhbGwuKSAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjbGVhclF1ZXVlID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9taXNlRGF0YS5wcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlRGF0YS5yZXNvbHZlcihlbGVtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIERvIG5vdCBjb250aW51ZSB3aXRoIGFuaW1hdGlvbiBxdWV1ZWluZy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBUaGlzIGZsYWcgaW5kaWNhdGVzIHRvIHRoZSB1cGNvbWluZyBjb21wbGV0ZUNhbGwoKSBmdW5jdGlvbiB0aGF0IHRoaXMgcXVldWUgZW50cnkgd2FzIGluaXRpYXRlZCBieSBWZWxvY2l0eS5cclxuICAgICAgICAgICAgICAgICAgICAgICBTZWUgY29tcGxldGVDYWxsKCkgZm9yIGZ1cnRoZXIgZGV0YWlscy4gKi9cclxuICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS52ZWxvY2l0eVF1ZXVlRW50cnlGbGFnID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnVpbGRRdWV1ZShuZXh0KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICBBdXRvLURlcXVldWluZ1xyXG4gICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAvKiBBcyBwZXIgalF1ZXJ5J3MgJC5xdWV1ZSgpIGJlaGF2aW9yLCB0byBmaXJlIHRoZSBmaXJzdCBub24tY3VzdG9tLXF1ZXVlIGVudHJ5IG9uIGFuIGVsZW1lbnQsIHRoZSBlbGVtZW50XHJcbiAgICAgICAgICAgICAgIG11c3QgYmUgZGVxdWV1ZWQgaWYgaXRzIHF1ZXVlIHN0YWNrIGNvbnNpc3RzICpzb2xlbHkqIG9mIHRoZSBjdXJyZW50IGNhbGwuIChUaGlzIGNhbiBiZSBkZXRlcm1pbmVkIGJ5IGNoZWNraW5nXHJcbiAgICAgICAgICAgICAgIGZvciB0aGUgXCJpbnByb2dyZXNzXCIgaXRlbSB0aGF0IGpRdWVyeSBwcmVwZW5kcyB0byBhY3RpdmUgcXVldWUgc3RhY2sgYXJyYXlzLikgUmVnYXJkbGVzcywgd2hlbmV2ZXIgdGhlIGVsZW1lbnQnc1xyXG4gICAgICAgICAgICAgICBxdWV1ZSBpcyBmdXJ0aGVyIGFwcGVuZGVkIHdpdGggYWRkaXRpb25hbCBpdGVtcyAtLSBpbmNsdWRpbmcgJC5kZWxheSgpJ3Mgb3IgZXZlbiAkLmFuaW1hdGUoKSBjYWxscywgdGhlIHF1ZXVlJ3NcclxuICAgICAgICAgICAgICAgZmlyc3QgZW50cnkgaXMgYXV0b21hdGljYWxseSBmaXJlZC4gVGhpcyBiZWhhdmlvciBjb250cmFzdHMgdGhhdCBvZiBjdXN0b20gcXVldWVzLCB3aGljaCBuZXZlciBhdXRvLWZpcmUuICovXHJcbiAgICAgICAgICAgIC8qIE5vdGU6IFdoZW4gYW4gZWxlbWVudCBzZXQgaXMgYmVpbmcgc3ViamVjdGVkIHRvIGEgbm9uLXBhcmFsbGVsIFZlbG9jaXR5IGNhbGwsIHRoZSBhbmltYXRpb24gd2lsbCBub3QgYmVnaW4gdW50aWxcclxuICAgICAgICAgICAgICAgZWFjaCBvbmUgb2YgdGhlIGVsZW1lbnRzIGluIHRoZSBzZXQgaGFzIHJlYWNoZWQgdGhlIGVuZCBvZiBpdHMgaW5kaXZpZHVhbGx5IHByZS1leGlzdGluZyBxdWV1ZSBjaGFpbi4gKi9cclxuICAgICAgICAgICAgLyogTm90ZTogVW5mb3J0dW5hdGVseSwgbW9zdCBwZW9wbGUgZG9uJ3QgZnVsbHkgZ3Jhc3AgalF1ZXJ5J3MgcG93ZXJmdWwsIHlldCBxdWlya3ksICQucXVldWUoKSBmdW5jdGlvbi5cclxuICAgICAgICAgICAgICAgTGVhbiBtb3JlIGhlcmU6IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTA1ODE1OC9jYW4tc29tZWJvZHktZXhwbGFpbi1qcXVlcnktcXVldWUtdG8tbWUgKi9cclxuICAgICAgICAgICAgaWYgKChvcHRzLnF1ZXVlID09PSBcIlwiIHx8IG9wdHMucXVldWUgPT09IFwiZnhcIikgJiYgJC5xdWV1ZShlbGVtZW50KVswXSAhPT0gXCJpbnByb2dyZXNzXCIpIHtcclxuICAgICAgICAgICAgICAgICQuZGVxdWV1ZShlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgRWxlbWVudCBTZXQgSXRlcmF0aW9uXHJcbiAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIC8qIElmIHRoZSBcIm5vZGVUeXBlXCIgcHJvcGVydHkgZXhpc3RzIG9uIHRoZSBlbGVtZW50cyB2YXJpYWJsZSwgd2UncmUgYW5pbWF0aW5nIGEgc2luZ2xlIGVsZW1lbnQuXHJcbiAgICAgICAgICAgUGxhY2UgaXQgaW4gYW4gYXJyYXkgc28gdGhhdCAkLmVhY2goKSBjYW4gaXRlcmF0ZSBvdmVyIGl0LiAqL1xyXG4gICAgICAgICQuZWFjaChlbGVtZW50cywgZnVuY3Rpb24oaSwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICAvKiBFbnN1cmUgZWFjaCBlbGVtZW50IGluIGEgc2V0IGhhcyBhIG5vZGVUeXBlIChpcyBhIHJlYWwgZWxlbWVudCkgdG8gYXZvaWQgdGhyb3dpbmcgZXJyb3JzLiAqL1xyXG4gICAgICAgICAgICBpZiAoVHlwZS5pc05vZGUoZWxlbWVudCkpIHtcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NFbGVtZW50LmNhbGwoZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgIE9wdGlvbjogTG9vcFxyXG4gICAgICAgICoqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgLyogVGhlIGxvb3Agb3B0aW9uIGFjY2VwdHMgYW4gaW50ZWdlciBpbmRpY2F0aW5nIGhvdyBtYW55IHRpbWVzIHRoZSBlbGVtZW50IHNob3VsZCBsb29wIGJldHdlZW4gdGhlIHZhbHVlcyBpbiB0aGVcclxuICAgICAgICAgICBjdXJyZW50IGNhbGwncyBwcm9wZXJ0aWVzIG1hcCBhbmQgdGhlIGVsZW1lbnQncyBwcm9wZXJ0eSB2YWx1ZXMgcHJpb3IgdG8gdGhpcyBjYWxsLiAqL1xyXG4gICAgICAgIC8qIE5vdGU6IFRoZSBsb29wIG9wdGlvbidzIGxvZ2ljIGlzIHBlcmZvcm1lZCBoZXJlIC0tIGFmdGVyIGVsZW1lbnQgcHJvY2Vzc2luZyAtLSBiZWNhdXNlIHRoZSBjdXJyZW50IGNhbGwgbmVlZHNcclxuICAgICAgICAgICB0byB1bmRlcmdvIGl0cyBxdWV1ZSBpbnNlcnRpb24gcHJpb3IgdG8gdGhlIGxvb3Agb3B0aW9uIGdlbmVyYXRpbmcgaXRzIHNlcmllcyBvZiBjb25zdGl0dWVudCBcInJldmVyc2VcIiBjYWxscyxcclxuICAgICAgICAgICB3aGljaCBjaGFpbiBhZnRlciB0aGUgY3VycmVudCBjYWxsLiBUd28gcmV2ZXJzZSBjYWxscyAodHdvIFwiYWx0ZXJuYXRpb25zXCIpIGNvbnN0aXR1dGUgb25lIGxvb3AuICovXHJcbiAgICAgICAgdmFyIG9wdHMgPSAkLmV4dGVuZCh7fSwgVmVsb2NpdHkuZGVmYXVsdHMsIG9wdGlvbnMpLFxyXG4gICAgICAgICAgICByZXZlcnNlQ2FsbHNDb3VudDtcclxuXHJcbiAgICAgICAgb3B0cy5sb29wID0gcGFyc2VJbnQob3B0cy5sb29wKTtcclxuICAgICAgICByZXZlcnNlQ2FsbHNDb3VudCA9IChvcHRzLmxvb3AgKiAyKSAtIDE7XHJcblxyXG4gICAgICAgIGlmIChvcHRzLmxvb3ApIHtcclxuICAgICAgICAgICAgLyogRG91YmxlIHRoZSBsb29wIGNvdW50IHRvIGNvbnZlcnQgaXQgaW50byBpdHMgYXBwcm9wcmlhdGUgbnVtYmVyIG9mIFwicmV2ZXJzZVwiIGNhbGxzLlxyXG4gICAgICAgICAgICAgICBTdWJ0cmFjdCAxIGZyb20gdGhlIHJlc3VsdGluZyB2YWx1ZSBzaW5jZSB0aGUgY3VycmVudCBjYWxsIGlzIGluY2x1ZGVkIGluIHRoZSB0b3RhbCBhbHRlcm5hdGlvbiBjb3VudC4gKi9cclxuICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCByZXZlcnNlQ2FsbHNDb3VudDsgeCsrKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBTaW5jZSB0aGUgbG9naWMgZm9yIHRoZSByZXZlcnNlIGFjdGlvbiBvY2N1cnMgaW5zaWRlIFF1ZXVlaW5nIGFuZCB0aGVyZWZvcmUgdGhpcyBjYWxsJ3Mgb3B0aW9ucyBvYmplY3RcclxuICAgICAgICAgICAgICAgICAgIGlzbid0IHBhcnNlZCB1bnRpbCB0aGVuIGFzIHdlbGwsIHRoZSBjdXJyZW50IGNhbGwncyBkZWxheSBvcHRpb24gbXVzdCBiZSBleHBsaWNpdGx5IHBhc3NlZCBpbnRvIHRoZSByZXZlcnNlXHJcbiAgICAgICAgICAgICAgICAgICBjYWxsIHNvIHRoYXQgdGhlIGRlbGF5IGxvZ2ljIHRoYXQgb2NjdXJzIGluc2lkZSAqUHJlLVF1ZXVlaW5nKiBjYW4gcHJvY2VzcyBpdC4gKi9cclxuICAgICAgICAgICAgICAgIHZhciByZXZlcnNlT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxheTogb3B0cy5kZWxheSxcclxuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogb3B0cy5wcm9ncmVzc1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBJZiBhIGNvbXBsZXRlIGNhbGxiYWNrIHdhcyBwYXNzZWQgaW50byB0aGlzIGNhbGwsIHRyYW5zZmVyIGl0IHRvIHRoZSBsb29wIHJlZGlyZWN0J3MgZmluYWwgXCJyZXZlcnNlXCIgY2FsbFxyXG4gICAgICAgICAgICAgICAgICAgc28gdGhhdCBpdCdzIHRyaWdnZXJlZCB3aGVuIHRoZSBlbnRpcmUgcmVkaXJlY3QgaXMgY29tcGxldGUgKGFuZCBub3Qgd2hlbiB0aGUgdmVyeSBmaXJzdCBhbmltYXRpb24gaXMgY29tcGxldGUpLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKHggPT09IHJldmVyc2VDYWxsc0NvdW50IC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldmVyc2VPcHRpb25zLmRpc3BsYXkgPSBvcHRzLmRpc3BsYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV2ZXJzZU9wdGlvbnMudmlzaWJpbGl0eSA9IG9wdHMudmlzaWJpbGl0eTtcclxuICAgICAgICAgICAgICAgICAgICByZXZlcnNlT3B0aW9ucy5jb21wbGV0ZSA9IG9wdHMuY29tcGxldGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYW5pbWF0ZShlbGVtZW50cywgXCJyZXZlcnNlXCIsIHJldmVyc2VPcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICBDaGFpbmluZ1xyXG4gICAgICAgICoqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgLyogUmV0dXJuIHRoZSBlbGVtZW50cyBiYWNrIHRvIHRoZSBjYWxsIGNoYWluLCB3aXRoIHdyYXBwZWQgZWxlbWVudHMgdGFraW5nIHByZWNlZGVuY2UgaW4gY2FzZSBWZWxvY2l0eSB3YXMgY2FsbGVkIHZpYSB0aGUgJC5mbi4gZXh0ZW5zaW9uLiAqL1xyXG4gICAgICAgIHJldHVybiBnZXRDaGFpbigpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiBUdXJuIFZlbG9jaXR5IGludG8gdGhlIGFuaW1hdGlvbiBmdW5jdGlvbiwgZXh0ZW5kZWQgd2l0aCB0aGUgcHJlLWV4aXN0aW5nIFZlbG9jaXR5IG9iamVjdC4gKi9cclxuICAgIFZlbG9jaXR5ID0gJC5leHRlbmQoYW5pbWF0ZSwgVmVsb2NpdHkpO1xyXG4gICAgLyogRm9yIGxlZ2FjeSBzdXBwb3J0LCBhbHNvIGV4cG9zZSB0aGUgbGl0ZXJhbCBhbmltYXRlIG1ldGhvZC4gKi9cclxuICAgIFZlbG9jaXR5LmFuaW1hdGUgPSBhbmltYXRlO1xyXG5cclxuICAgIC8qKioqKioqKioqKioqKlxyXG4gICAgICAgIFRpbWluZ1xyXG4gICAgKioqKioqKioqKioqKiovXHJcblxyXG4gICAgLyogVGlja2VyIGZ1bmN0aW9uLiAqL1xyXG4gICAgdmFyIHRpY2tlciA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgckFGU2hpbTtcclxuXHJcbiAgICAvKiBJbmFjdGl2ZSBicm93c2VyIHRhYnMgcGF1c2UgckFGLCB3aGljaCByZXN1bHRzIGluIGFsbCBhY3RpdmUgYW5pbWF0aW9ucyBpbW1lZGlhdGVseSBzcHJpbnRpbmcgdG8gdGhlaXIgY29tcGxldGlvbiBzdGF0ZXMgd2hlbiB0aGUgdGFiIHJlZm9jdXNlcy5cclxuICAgICAgIFRvIGdldCBhcm91bmQgdGhpcywgd2UgZHluYW1pY2FsbHkgc3dpdGNoIHJBRiB0byBzZXRUaW1lb3V0ICh3aGljaCB0aGUgYnJvd3NlciAqZG9lc24ndCogcGF1c2UpIHdoZW4gdGhlIHRhYiBsb3NlcyBmb2N1cy4gV2Ugc2tpcCB0aGlzIGZvciBtb2JpbGVcclxuICAgICAgIGRldmljZXMgdG8gYXZvaWQgd2FzdGluZyBiYXR0ZXJ5IHBvd2VyIG9uIGluYWN0aXZlIHRhYnMuICovXHJcbiAgICAvKiBOb3RlOiBUYWIgZm9jdXMgZGV0ZWN0aW9uIGRvZXNuJ3Qgd29yayBvbiBvbGRlciB2ZXJzaW9ucyBvZiBJRSwgYnV0IHRoYXQncyBva2F5IHNpbmNlIHRoZXkgZG9uJ3Qgc3VwcG9ydCByQUYgdG8gYmVnaW4gd2l0aC4gKi9cclxuICAgIGlmICghVmVsb2NpdHkuU3RhdGUuaXNNb2JpbGUgJiYgZG9jdW1lbnQuaGlkZGVuICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLyogUmVhc3NpZ24gdGhlIHJBRiBmdW5jdGlvbiAod2hpY2ggdGhlIGdsb2JhbCB0aWNrKCkgZnVuY3Rpb24gdXNlcykgYmFzZWQgb24gdGhlIHRhYidzIGZvY3VzIHN0YXRlLiAqL1xyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuaGlkZGVuKSB7XHJcbiAgICAgICAgICAgICAgICB0aWNrZXIgPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIFRoZSB0aWNrIGZ1bmN0aW9uIG5lZWRzIGEgdHJ1dGh5IGZpcnN0IGFyZ3VtZW50IGluIG9yZGVyIHRvIHBhc3MgaXRzIGludGVybmFsIHRpbWVzdGFtcCBjaGVjay4gKi9cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHsgY2FsbGJhY2sodHJ1ZSkgfSwgMTYpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBUaGUgckFGIGxvb3AgaGFzIGJlZW4gcGF1c2VkIGJ5IHRoZSBicm93c2VyLCBzbyB3ZSBtYW51YWxseSByZXN0YXJ0IHRoZSB0aWNrLiAqL1xyXG4gICAgICAgICAgICAgICAgdGljaygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGlja2VyID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCByQUZTaGltO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqKioqKioqKioqKlxyXG4gICAgICAgIFRpY2tcclxuICAgICoqKioqKioqKioqKi9cclxuXHJcbiAgICAvKiBOb3RlOiBBbGwgY2FsbHMgdG8gVmVsb2NpdHkgYXJlIHB1c2hlZCB0byB0aGUgVmVsb2NpdHkuU3RhdGUuY2FsbHMgYXJyYXksIHdoaWNoIGlzIGZ1bGx5IGl0ZXJhdGVkIHRocm91Z2ggdXBvbiBlYWNoIHRpY2suICovXHJcbiAgICBmdW5jdGlvbiB0aWNrICh0aW1lc3RhbXApIHtcclxuICAgICAgICAvKiBBbiBlbXB0eSB0aW1lc3RhbXAgYXJndW1lbnQgaW5kaWNhdGVzIHRoYXQgdGhpcyBpcyB0aGUgZmlyc3QgdGljayBvY2N1cmVuY2Ugc2luY2UgdGlja2luZyB3YXMgdHVybmVkIG9uLlxyXG4gICAgICAgICAgIFdlIGxldmVyYWdlIHRoaXMgbWV0YWRhdGEgdG8gZnVsbHkgaWdub3JlIHRoZSBmaXJzdCB0aWNrIHBhc3Mgc2luY2UgUkFGJ3MgaW5pdGlhbCBwYXNzIGlzIGZpcmVkIHdoZW5ldmVyXHJcbiAgICAgICAgICAgdGhlIGJyb3dzZXIncyBuZXh0IHRpY2sgc3luYyB0aW1lIG9jY3Vycywgd2hpY2ggcmVzdWx0cyBpbiB0aGUgZmlyc3QgZWxlbWVudHMgc3ViamVjdGVkIHRvIFZlbG9jaXR5XHJcbiAgICAgICAgICAgY2FsbHMgYmVpbmcgYW5pbWF0ZWQgb3V0IG9mIHN5bmMgd2l0aCBhbnkgZWxlbWVudHMgYW5pbWF0ZWQgaW1tZWRpYXRlbHkgdGhlcmVhZnRlci4gSW4gc2hvcnQsIHdlIGlnbm9yZVxyXG4gICAgICAgICAgIHRoZSBmaXJzdCBSQUYgdGljayBwYXNzIHNvIHRoYXQgZWxlbWVudHMgYmVpbmcgaW1tZWRpYXRlbHkgY29uc2VjdXRpdmVseSBhbmltYXRlZCAtLSBpbnN0ZWFkIG9mIHNpbXVsdGFuZW91c2x5IGFuaW1hdGVkXHJcbiAgICAgICAgICAgYnkgdGhlIHNhbWUgVmVsb2NpdHkgY2FsbCAtLSBhcmUgcHJvcGVybHkgYmF0Y2hlZCBpbnRvIHRoZSBzYW1lIGluaXRpYWwgUkFGIHRpY2sgYW5kIGNvbnNlcXVlbnRseSByZW1haW4gaW4gc3luYyB0aGVyZWFmdGVyLiAqL1xyXG4gICAgICAgIGlmICh0aW1lc3RhbXApIHtcclxuICAgICAgICAgICAgLyogV2UgaWdub3JlIFJBRidzIGhpZ2ggcmVzb2x1dGlvbiB0aW1lc3RhbXAgc2luY2UgaXQgY2FuIGJlIHNpZ25pZmljYW50bHkgb2Zmc2V0IHdoZW4gdGhlIGJyb3dzZXIgaXNcclxuICAgICAgICAgICAgICAgdW5kZXIgaGlnaCBzdHJlc3M7IHdlIG9wdCBmb3IgY2hvcHBpbmVzcyBvdmVyIGFsbG93aW5nIHRoZSBicm93c2VyIHRvIGRyb3AgaHVnZSBjaHVua3Mgb2YgZnJhbWVzLiAqL1xyXG4gICAgICAgICAgICB2YXIgdGltZUN1cnJlbnQgPSAobmV3IERhdGUpLmdldFRpbWUoKTtcclxuXHJcbiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICBDYWxsIEl0ZXJhdGlvblxyXG4gICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIC8qIEl0ZXJhdGUgdGhyb3VnaCBlYWNoIGFjdGl2ZSBjYWxsLiAqL1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgY2FsbHNMZW5ndGggPSBWZWxvY2l0eS5TdGF0ZS5jYWxscy5sZW5ndGg7IGkgPCBjYWxsc0xlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBXaGVuIGEgVmVsb2NpdHkgY2FsbCBpcyBjb21wbGV0ZWQsIGl0cyBWZWxvY2l0eS5TdGF0ZS5jYWxscyBlbnRyeSBpcyBzZXQgdG8gZmFsc2UuIENvbnRpbnVlIG9uIHRvIHRoZSBuZXh0IGNhbGwuICovXHJcbiAgICAgICAgICAgICAgICBpZiAoIVZlbG9jaXR5LlN0YXRlLmNhbGxzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgQ2FsbC1XaWRlIFZhcmlhYmxlc1xyXG4gICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjYWxsQ29udGFpbmVyID0gVmVsb2NpdHkuU3RhdGUuY2FsbHNbaV0sXHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbCA9IGNhbGxDb250YWluZXJbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IGNhbGxDb250YWluZXJbMl0sXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZVN0YXJ0ID0gY2FsbENvbnRhaW5lclszXSxcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdFRpY2sgPSAhIXRpbWVTdGFydDtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBJZiB0aW1lU3RhcnQgaXMgdW5kZWZpbmVkLCB0aGVuIHRoaXMgaXMgdGhlIGZpcnN0IHRpbWUgdGhhdCB0aGlzIGNhbGwgaGFzIGJlZW4gcHJvY2Vzc2VkIGJ5IHRpY2soKS5cclxuICAgICAgICAgICAgICAgICAgIFdlIGFzc2lnbiB0aW1lU3RhcnQgbm93IHNvIHRoYXQgaXRzIHZhbHVlIGlzIGFzIGNsb3NlIHRvIHRoZSByZWFsIGFuaW1hdGlvbiBzdGFydCB0aW1lIGFzIHBvc3NpYmxlLlxyXG4gICAgICAgICAgICAgICAgICAgKENvbnZlcnNlbHksIGhhZCB0aW1lU3RhcnQgYmVlbiBkZWZpbmVkIHdoZW4gdGhpcyBjYWxsIHdhcyBhZGRlZCB0byBWZWxvY2l0eS5TdGF0ZS5jYWxscywgdGhlIGRlbGF5XHJcbiAgICAgICAgICAgICAgICAgICBiZXR3ZWVuIHRoYXQgdGltZSBhbmQgbm93IHdvdWxkIGNhdXNlIHRoZSBmaXJzdCBmZXcgZnJhbWVzIG9mIHRoZSB0d2VlbiB0byBiZSBza2lwcGVkIHNpbmNlXHJcbiAgICAgICAgICAgICAgICAgICBwZXJjZW50Q29tcGxldGUgaXMgY2FsY3VsYXRlZCByZWxhdGl2ZSB0byB0aW1lU3RhcnQuKSAqL1xyXG4gICAgICAgICAgICAgICAgLyogRnVydGhlciwgc3VidHJhY3QgMTZtcyAodGhlIGFwcHJveGltYXRlIHJlc29sdXRpb24gb2YgUkFGKSBmcm9tIHRoZSBjdXJyZW50IHRpbWUgdmFsdWUgc28gdGhhdCB0aGVcclxuICAgICAgICAgICAgICAgICAgIGZpcnN0IHRpY2sgaXRlcmF0aW9uIGlzbid0IHdhc3RlZCBieSBhbmltYXRpbmcgYXQgMCUgdHdlZW4gY29tcGxldGlvbiwgd2hpY2ggd291bGQgcHJvZHVjZSB0aGVcclxuICAgICAgICAgICAgICAgICAgIHNhbWUgc3R5bGUgdmFsdWUgYXMgdGhlIGVsZW1lbnQncyBjdXJyZW50IHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aW1lU3RhcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lU3RhcnQgPSBWZWxvY2l0eS5TdGF0ZS5jYWxsc1tpXVszXSA9IHRpbWVDdXJyZW50IC0gMTY7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyogVGhlIHR3ZWVuJ3MgY29tcGxldGlvbiBwZXJjZW50YWdlIGlzIHJlbGF0aXZlIHRvIHRoZSB0d2VlbidzIHN0YXJ0IHRpbWUsIG5vdCB0aGUgdHdlZW4ncyBzdGFydCB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgKHdoaWNoIHdvdWxkIHJlc3VsdCBpbiB1bnByZWRpY3RhYmxlIHR3ZWVuIGR1cmF0aW9ucyBzaW5jZSBKYXZhU2NyaXB0J3MgdGltZXJzIGFyZSBub3QgcGFydGljdWxhcmx5IGFjY3VyYXRlKS5cclxuICAgICAgICAgICAgICAgICAgIEFjY29yZGluZ2x5LCB3ZSBlbnN1cmUgdGhhdCBwZXJjZW50Q29tcGxldGUgZG9lcyBub3QgZXhjZWVkIDEuICovXHJcbiAgICAgICAgICAgICAgICB2YXIgcGVyY2VudENvbXBsZXRlID0gTWF0aC5taW4oKHRpbWVDdXJyZW50IC0gdGltZVN0YXJ0KSAvIG9wdHMuZHVyYXRpb24sIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICBFbGVtZW50IEl0ZXJhdGlvblxyXG4gICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBGb3IgZXZlcnkgY2FsbCwgaXRlcmF0ZSB0aHJvdWdoIGVhY2ggb2YgdGhlIGVsZW1lbnRzIGluIGl0cyBzZXQuICovXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgY2FsbExlbmd0aCA9IGNhbGwubGVuZ3RoOyBqIDwgY2FsbExlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHR3ZWVuc0NvbnRhaW5lciA9IGNhbGxbal0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSB0d2VlbnNDb250YWluZXIuZWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogQ2hlY2sgdG8gc2VlIGlmIHRoaXMgZWxlbWVudCBoYXMgYmVlbiBkZWxldGVkIG1pZHdheSB0aHJvdWdoIHRoZSBhbmltYXRpb24gYnkgY2hlY2tpbmcgZm9yIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlZCBleGlzdGVuY2Ugb2YgaXRzIGRhdGEgY2FjaGUuIElmIGl0J3MgZ29uZSwgc2tpcCBhbmltYXRpbmcgdGhpcyBlbGVtZW50LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghRGF0YShlbGVtZW50KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2Zvcm1Qcm9wZXJ0eUV4aXN0cyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgIERpc3BsYXkgJiBWaXNpYmlsaXR5IFRvZ2dsaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIGRpc3BsYXkgb3B0aW9uIGlzIHNldCB0byBub24tXCJub25lXCIsIHNldCBpdCB1cGZyb250IHNvIHRoYXQgdGhlIGVsZW1lbnQgY2FuIGJlY29tZSB2aXNpYmxlIGJlZm9yZSB0d2VlbmluZyBiZWdpbnMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgKE90aGVyd2lzZSwgZGlzcGxheSdzIFwibm9uZVwiIHZhbHVlIGlzIHNldCBpbiBjb21wbGV0ZUNhbGwoKSBvbmNlIHRoZSBhbmltYXRpb24gaGFzIGNvbXBsZXRlZC4pICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMuZGlzcGxheSAhPT0gdW5kZWZpbmVkICYmIG9wdHMuZGlzcGxheSAhPT0gbnVsbCAmJiBvcHRzLmRpc3BsYXkgIT09IFwibm9uZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRzLmRpc3BsYXkgPT09IFwiZmxleFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmxleFZhbHVlcyA9IFsgXCItd2Via2l0LWJveFwiLCBcIi1tb3otYm94XCIsIFwiLW1zLWZsZXhib3hcIiwgXCItd2Via2l0LWZsZXhcIiBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaChmbGV4VmFsdWVzLCBmdW5jdGlvbihpLCBmbGV4VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDU1Muc2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCBcImRpc3BsYXlcIiwgZmxleFZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBDU1Muc2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCBcImRpc3BsYXlcIiwgb3B0cy5kaXNwbGF5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIFNhbWUgZ29lcyB3aXRoIHRoZSB2aXNpYmlsaXR5IG9wdGlvbiwgYnV0IGl0cyBcIm5vbmVcIiBlcXVpdmFsZW50IGlzIFwiaGlkZGVuXCIuICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMudmlzaWJpbGl0eSAhPT0gdW5kZWZpbmVkICYmIG9wdHMudmlzaWJpbGl0eSAhPT0gXCJoaWRkZW5cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDU1Muc2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCBcInZpc2liaWxpdHlcIiwgb3B0cy52aXNpYmlsaXR5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICBQcm9wZXJ0eSBJdGVyYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIEZvciBldmVyeSBlbGVtZW50LCBpdGVyYXRlIHRocm91Z2ggZWFjaCBwcm9wZXJ0eS4gKi9cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiB0d2VlbnNDb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogSW4gYWRkaXRpb24gdG8gcHJvcGVydHkgdHdlZW4gZGF0YSwgdHdlZW5zQ29udGFpbmVyIGNvbnRhaW5zIGEgcmVmZXJlbmNlIHRvIGl0cyBhc3NvY2lhdGVkIGVsZW1lbnQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0eSAhPT0gXCJlbGVtZW50XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0d2VlbiA9IHR3ZWVuc0NvbnRhaW5lcltwcm9wZXJ0eV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEVhc2luZyBjYW4gZWl0aGVyIGJlIGEgcHJlLWdlbmVyZWF0ZWQgZnVuY3Rpb24gb3IgYSBzdHJpbmcgdGhhdCByZWZlcmVuY2VzIGEgcHJlLXJlZ2lzdGVyZWQgZWFzaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb24gdGhlIFZlbG9jaXR5LkVhc2luZ3Mgb2JqZWN0LiBJbiBlaXRoZXIgY2FzZSwgcmV0dXJuIHRoZSBhcHByb3ByaWF0ZSBlYXNpbmcgKmZ1bmN0aW9uKi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmcgPSBUeXBlLmlzU3RyaW5nKHR3ZWVuLmVhc2luZykgPyBWZWxvY2l0eS5FYXNpbmdzW3R3ZWVuLmVhc2luZ10gOiB0d2Vlbi5lYXNpbmc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ3VycmVudCBWYWx1ZSBDYWxjdWxhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIHRoaXMgaXMgdGhlIGxhc3QgdGljayBwYXNzIChpZiB3ZSd2ZSByZWFjaGVkIDEwMCUgY29tcGxldGlvbiBmb3IgdGhpcyB0d2VlbiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnN1cmUgdGhhdCBjdXJyZW50VmFsdWUgaXMgZXhwbGljaXRseSBzZXQgdG8gaXRzIHRhcmdldCBlbmRWYWx1ZSBzbyB0aGF0IGl0J3Mgbm90IHN1YmplY3RlZCB0byBhbnkgcm91bmRpbmcuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVyY2VudENvbXBsZXRlID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlID0gdHdlZW4uZW5kVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBPdGhlcndpc2UsIGNhbGN1bGF0ZSBjdXJyZW50VmFsdWUgYmFzZWQgb24gdGhlIGN1cnJlbnQgZGVsdGEgZnJvbSBzdGFydFZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUgPSB0d2Vlbi5zdGFydFZhbHVlICsgKCh0d2Vlbi5lbmRWYWx1ZSAtIHR3ZWVuLnN0YXJ0VmFsdWUpICogZWFzaW5nKHBlcmNlbnRDb21wbGV0ZSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiBubyB2YWx1ZSBjaGFuZ2UgaXMgb2NjdXJyaW5nLCBkb24ndCBwcm9jZWVkIHdpdGggRE9NIHVwZGF0aW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3RUaWNrICYmIChjdXJyZW50VmFsdWUgPT09IHR3ZWVuLmN1cnJlbnRWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuLmN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIb29rczogUGFydCBJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogRm9yIGhvb2tlZCBwcm9wZXJ0aWVzLCB0aGUgbmV3bHktdXBkYXRlZCByb290UHJvcGVydHlWYWx1ZUNhY2hlIGlzIGNhY2hlZCBvbnRvIHRoZSBlbGVtZW50IHNvIHRoYXQgaXQgY2FuIGJlIHVzZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBzdWJzZXF1ZW50IGhvb2tzIGluIHRoaXMgY2FsbCB0aGF0IGFyZSBhc3NvY2lhdGVkIHdpdGggdGhlIHNhbWUgcm9vdCBwcm9wZXJ0eS4gSWYgd2UgZGlkbid0IGNhY2hlIHRoZSB1cGRhdGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZSwgZWFjaCBzdWJzZXF1ZW50IHVwZGF0ZSB0byB0aGUgcm9vdCBwcm9wZXJ0eSBpbiB0aGlzIHRpY2sgcGFzcyB3b3VsZCByZXNldCB0aGUgcHJldmlvdXMgaG9vaydzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVzIHRvIHJvb3RQcm9wZXJ0eVZhbHVlIHByaW9yIHRvIGluamVjdGlvbi4gQSBuaWNlIHBlcmZvcm1hbmNlIGJ5cHJvZHVjdCBvZiByb290UHJvcGVydHlWYWx1ZSBjYWNoaW5nIGlzIHRoYXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNlcXVlbnRseSBjaGFpbmVkIGFuaW1hdGlvbnMgdXNpbmcgdGhlIHNhbWUgaG9va1Jvb3QgYnV0IGEgZGlmZmVyZW50IGhvb2sgY2FuIHVzZSB0aGlzIGNhY2hlZCByb290UHJvcGVydHlWYWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChDU1MuSG9va3MucmVnaXN0ZXJlZFtwcm9wZXJ0eV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaG9va1Jvb3QgPSBDU1MuSG9va3MuZ2V0Um9vdChwcm9wZXJ0eSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlQ2FjaGUgPSBEYXRhKGVsZW1lbnQpLnJvb3RQcm9wZXJ0eVZhbHVlQ2FjaGVbaG9va1Jvb3RdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm9vdFByb3BlcnR5VmFsdWVDYWNoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0d2Vlbi5yb290UHJvcGVydHlWYWx1ZSA9IHJvb3RQcm9wZXJ0eVZhbHVlQ2FjaGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERPTSBVcGRhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHNldFByb3BlcnR5VmFsdWUoKSByZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBwcm9wZXJ0eSBuYW1lIGFuZCBwcm9wZXJ0eSB2YWx1ZSBwb3N0IGFueSBub3JtYWxpemF0aW9uIHRoYXQgbWF5IGhhdmUgYmVlbiBwZXJmb3JtZWQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBUbyBzb2x2ZSBhbiBJRTw9OCBwb3NpdGlvbmluZyBidWcsIHRoZSB1bml0IHR5cGUgaXMgZHJvcHBlZCB3aGVuIHNldHRpbmcgYSBwcm9wZXJ0eSB2YWx1ZSBvZiAwLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFkanVzdGVkU2V0RGF0YSA9IENTUy5zZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIC8qIFNFVCAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuLmN1cnJlbnRWYWx1ZSArIChwYXJzZUZsb2F0KGN1cnJlbnRWYWx1ZSkgPT09IDAgPyBcIlwiIDogdHdlZW4udW5pdFR5cGUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuLnJvb3RQcm9wZXJ0eVZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuLnNjcm9sbERhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIb29rczogUGFydCBJSVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3cgdGhhdCB3ZSBoYXZlIHRoZSBob29rJ3MgdXBkYXRlZCByb290UHJvcGVydHlWYWx1ZSAodGhlIHBvc3QtcHJvY2Vzc2VkIHZhbHVlIHByb3ZpZGVkIGJ5IGFkanVzdGVkU2V0RGF0YSksIGNhY2hlIGl0IG9udG8gdGhlIGVsZW1lbnQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQ1NTLkhvb2tzLnJlZ2lzdGVyZWRbcHJvcGVydHldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogU2luY2UgYWRqdXN0ZWRTZXREYXRhIGNvbnRhaW5zIG5vcm1hbGl6ZWQgZGF0YSByZWFkeSBmb3IgRE9NIHVwZGF0aW5nLCB0aGUgcm9vdFByb3BlcnR5VmFsdWUgbmVlZHMgdG8gYmUgcmUtZXh0cmFjdGVkIGZyb20gaXRzIG5vcm1hbGl6ZWQgZm9ybS4gPz8gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQ1NTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbaG9va1Jvb3RdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGEoZWxlbWVudCkucm9vdFByb3BlcnR5VmFsdWVDYWNoZVtob29rUm9vdF0gPSBDU1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtob29rUm9vdF0oXCJleHRyYWN0XCIsIG51bGwsIGFkanVzdGVkU2V0RGF0YVsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YShlbGVtZW50KS5yb290UHJvcGVydHlWYWx1ZUNhY2hlW2hvb2tSb290XSA9IGFkanVzdGVkU2V0RGF0YVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEZsYWcgd2hldGhlciBhIHRyYW5zZm9ybSBwcm9wZXJ0eSBpcyBiZWluZyBhbmltYXRlZCBzbyB0aGF0IGZsdXNoVHJhbnNmb3JtQ2FjaGUoKSBjYW4gYmUgdHJpZ2dlcmVkIG9uY2UgdGhpcyB0aWNrIHBhc3MgaXMgY29tcGxldGUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWRqdXN0ZWRTZXREYXRhWzBdID09PSBcInRyYW5zZm9ybVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtUHJvcGVydHlFeGlzdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVIQVxyXG4gICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIElmIG1vYmlsZUhBIGlzIGVuYWJsZWQsIHNldCB0aGUgdHJhbnNsYXRlM2QgdHJhbnNmb3JtIHRvIG51bGwgdG8gZm9yY2UgaGFyZHdhcmUgYWNjZWxlcmF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgIEl0J3Mgc2FmZSB0byBvdmVycmlkZSB0aGlzIHByb3BlcnR5IHNpbmNlIFZlbG9jaXR5IGRvZXNuJ3QgYWN0dWFsbHkgc3VwcG9ydCBpdHMgYW5pbWF0aW9uIChob29rcyBhcmUgdXNlZCBpbiBpdHMgcGxhY2UpLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRzLm1vYmlsZUhBKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIERvbid0IHNldCB0aGUgbnVsbCB0cmFuc2Zvcm0gaGFjayBpZiB3ZSd2ZSBhbHJlYWR5IGRvbmUgc28uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChEYXRhKGVsZW1lbnQpLnRyYW5zZm9ybUNhY2hlLnRyYW5zbGF0ZTNkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEFsbCBlbnRyaWVzIG9uIHRoZSB0cmFuc2Zvcm1DYWNoZSBvYmplY3QgYXJlIGxhdGVyIGNvbmNhdGVuYXRlZCBpbnRvIGEgc2luZ2xlIHRyYW5zZm9ybSBzdHJpbmcgdmlhIGZsdXNoVHJhbnNmb3JtQ2FjaGUoKS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGEoZWxlbWVudCkudHJhbnNmb3JtQ2FjaGUudHJhbnNsYXRlM2QgPSBcIigwcHgsIDBweCwgMHB4KVwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybVByb3BlcnR5RXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zZm9ybVByb3BlcnR5RXhpc3RzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENTUy5mbHVzaFRyYW5zZm9ybUNhY2hlKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBUaGUgbm9uLVwibm9uZVwiIGRpc3BsYXkgdmFsdWUgaXMgb25seSBhcHBsaWVkIHRvIGFuIGVsZW1lbnQgb25jZSAtLSB3aGVuIGl0cyBhc3NvY2lhdGVkIGNhbGwgaXMgZmlyc3QgdGlja2VkIHRocm91Z2guXHJcbiAgICAgICAgICAgICAgICAgICBBY2NvcmRpbmdseSwgaXQncyBzZXQgdG8gZmFsc2Ugc28gdGhhdCBpdCBpc24ndCByZS1wcm9jZXNzZWQgYnkgdGhpcyBjYWxsIGluIHRoZSBuZXh0IHRpY2suICovXHJcbiAgICAgICAgICAgICAgICBpZiAob3B0cy5kaXNwbGF5ICE9PSB1bmRlZmluZWQgJiYgb3B0cy5kaXNwbGF5ICE9PSBcIm5vbmVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIFZlbG9jaXR5LlN0YXRlLmNhbGxzW2ldWzJdLmRpc3BsYXkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChvcHRzLnZpc2liaWxpdHkgIT09IHVuZGVmaW5lZCAmJiBvcHRzLnZpc2liaWxpdHkgIT09IFwiaGlkZGVuXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS5TdGF0ZS5jYWxsc1tpXVsyXS52aXNpYmlsaXR5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIC8qIFBhc3MgdGhlIGVsZW1lbnRzIGFuZCB0aGUgdGltaW5nIGRhdGEgKHBlcmNlbnRDb21wbGV0ZSwgbXNSZW1haW5pbmcsIGFuZCB0aW1lU3RhcnQpIGludG8gdGhlIHByb2dyZXNzIGNhbGxiYWNrLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdHMucHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRzLnByb2dyZXNzLmNhbGwoY2FsbENvbnRhaW5lclsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbENvbnRhaW5lclsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudENvbXBsZXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCgwLCAodGltZVN0YXJ0ICsgb3B0cy5kdXJhdGlvbikgLSB0aW1lQ3VycmVudCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVTdGFydCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyogSWYgdGhpcyBjYWxsIGhhcyBmaW5pc2hlZCB0d2VlbmluZywgcGFzcyBpdHMgaW5kZXggdG8gY29tcGxldGVDYWxsKCkgdG8gaGFuZGxlIGNhbGwgY2xlYW51cC4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChwZXJjZW50Q29tcGxldGUgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZUNhbGwoaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIE5vdGU6IGNvbXBsZXRlQ2FsbCgpIHNldHMgdGhlIGlzVGlja2luZyBmbGFnIHRvIGZhbHNlIHdoZW4gdGhlIGxhc3QgY2FsbCBvbiBWZWxvY2l0eS5TdGF0ZS5jYWxscyBoYXMgY29tcGxldGVkLiAqL1xyXG4gICAgICAgIGlmIChWZWxvY2l0eS5TdGF0ZS5pc1RpY2tpbmcpIHtcclxuICAgICAgICAgICAgdGlja2VyKHRpY2spO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgIENhbGwgQ29tcGxldGlvblxyXG4gICAgKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAvKiBOb3RlOiBVbmxpa2UgdGljaygpLCB3aGljaCBwcm9jZXNzZXMgYWxsIGFjdGl2ZSBjYWxscyBhdCBvbmNlLCBjYWxsIGNvbXBsZXRpb24gaXMgaGFuZGxlZCBvbiBhIHBlci1jYWxsIGJhc2lzLiAqL1xyXG4gICAgZnVuY3Rpb24gY29tcGxldGVDYWxsIChjYWxsSW5kZXgsIGlzU3RvcHBlZCkge1xyXG4gICAgICAgIC8qIEVuc3VyZSB0aGUgY2FsbCBleGlzdHMuICovXHJcbiAgICAgICAgaWYgKCFWZWxvY2l0eS5TdGF0ZS5jYWxsc1tjYWxsSW5kZXhdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIFB1bGwgdGhlIG1ldGFkYXRhIGZyb20gdGhlIGNhbGwuICovXHJcbiAgICAgICAgdmFyIGNhbGwgPSBWZWxvY2l0eS5TdGF0ZS5jYWxsc1tjYWxsSW5kZXhdWzBdLFxyXG4gICAgICAgICAgICBlbGVtZW50cyA9IFZlbG9jaXR5LlN0YXRlLmNhbGxzW2NhbGxJbmRleF1bMV0sXHJcbiAgICAgICAgICAgIG9wdHMgPSBWZWxvY2l0eS5TdGF0ZS5jYWxsc1tjYWxsSW5kZXhdWzJdLFxyXG4gICAgICAgICAgICByZXNvbHZlciA9IFZlbG9jaXR5LlN0YXRlLmNhbGxzW2NhbGxJbmRleF1bNF07XHJcblxyXG4gICAgICAgIHZhciByZW1haW5pbmdDYWxsc0V4aXN0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgRWxlbWVudCBGaW5hbGl6YXRpb25cclxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgY2FsbExlbmd0aCA9IGNhbGwubGVuZ3RoOyBpIDwgY2FsbExlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gY2FsbFtpXS5lbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgLyogSWYgdGhlIHVzZXIgc2V0IGRpc3BsYXkgdG8gXCJub25lXCIgKGludGVuZGluZyB0byBoaWRlIHRoZSBlbGVtZW50KSwgc2V0IGl0IG5vdyB0aGF0IHRoZSBhbmltYXRpb24gaGFzIGNvbXBsZXRlZC4gKi9cclxuICAgICAgICAgICAgLyogTm90ZTogZGlzcGxheTpub25lIGlzbid0IHNldCB3aGVuIGNhbGxzIGFyZSBtYW51YWxseSBzdG9wcGVkICh2aWEgVmVsb2NpdHkoXCJzdG9wXCIpLiAqL1xyXG4gICAgICAgICAgICAvKiBOb3RlOiBEaXNwbGF5IGdldHMgaWdub3JlZCB3aXRoIFwicmV2ZXJzZVwiIGNhbGxzIGFuZCBpbmZpbml0ZSBsb29wcywgc2luY2UgdGhpcyBiZWhhdmlvciB3b3VsZCBiZSB1bmRlc2lyYWJsZS4gKi9cclxuICAgICAgICAgICAgaWYgKCFpc1N0b3BwZWQgJiYgIW9wdHMubG9vcCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdHMuZGlzcGxheSA9PT0gXCJub25lXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBDU1Muc2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCBcImRpc3BsYXlcIiwgb3B0cy5kaXNwbGF5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob3B0cy52aXNpYmlsaXR5ID09PSBcImhpZGRlblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1NTLnNldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJ2aXNpYmlsaXR5XCIsIG9wdHMudmlzaWJpbGl0eSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qIElmIHRoZSBlbGVtZW50J3MgcXVldWUgaXMgZW1wdHkgKGlmIG9ubHkgdGhlIFwiaW5wcm9ncmVzc1wiIGl0ZW0gaXMgbGVmdCBhdCBwb3NpdGlvbiAwKSBvciBpZiBpdHMgcXVldWUgaXMgYWJvdXQgdG8gcnVuXHJcbiAgICAgICAgICAgICAgIGEgbm9uLVZlbG9jaXR5LWluaXRpYXRlZCBlbnRyeSwgdHVybiBvZmYgdGhlIGlzQW5pbWF0aW5nIGZsYWcuIEEgbm9uLVZlbG9jaXR5LWluaXRpYXRpZWQgcXVldWUgZW50cnkncyBsb2dpYyBtaWdodCBhbHRlclxyXG4gICAgICAgICAgICAgICBhbiBlbGVtZW50J3MgQ1NTIHZhbHVlcyBhbmQgdGhlcmVieSBjYXVzZSBWZWxvY2l0eSdzIGNhY2hlZCB2YWx1ZSBkYXRhIHRvIGdvIHN0YWxlLiBUbyBkZXRlY3QgaWYgYSBxdWV1ZSBlbnRyeSB3YXMgaW5pdGlhdGVkIGJ5IFZlbG9jaXR5LFxyXG4gICAgICAgICAgICAgICB3ZSBjaGVjayBmb3IgdGhlIGV4aXN0ZW5jZSBvZiBvdXIgc3BlY2lhbCBWZWxvY2l0eS5xdWV1ZUVudHJ5RmxhZyBkZWNsYXJhdGlvbiwgd2hpY2ggbWluaWZpZXJzIHdvbid0IHJlbmFtZSBzaW5jZSB0aGUgZmxhZ1xyXG4gICAgICAgICAgICAgICBpcyBhc3NpZ25lZCB0byBqUXVlcnkncyBnbG9iYWwgJCBvYmplY3QgYW5kIHRodXMgZXhpc3RzIG91dCBvZiBWZWxvY2l0eSdzIG93biBzY29wZS4gKi9cclxuICAgICAgICAgICAgaWYgKG9wdHMubG9vcCAhPT0gdHJ1ZSAmJiAoJC5xdWV1ZShlbGVtZW50KVsxXSA9PT0gdW5kZWZpbmVkIHx8ICEvXFwudmVsb2NpdHlRdWV1ZUVudHJ5RmxhZy9pLnRlc3QoJC5xdWV1ZShlbGVtZW50KVsxXSkpKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBUaGUgZWxlbWVudCBtYXkgaGF2ZSBiZWVuIGRlbGV0ZWQuIEVuc3VyZSB0aGF0IGl0cyBkYXRhIGNhY2hlIHN0aWxsIGV4aXN0cyBiZWZvcmUgYWN0aW5nIG9uIGl0LiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKERhdGEoZWxlbWVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBEYXRhKGVsZW1lbnQpLmlzQW5pbWF0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogQ2xlYXIgdGhlIGVsZW1lbnQncyByb290UHJvcGVydHlWYWx1ZUNhY2hlLCB3aGljaCB3aWxsIGJlY29tZSBzdGFsZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICBEYXRhKGVsZW1lbnQpLnJvb3RQcm9wZXJ0eVZhbHVlQ2FjaGUgPSB7fTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zZm9ybUhBUHJvcGVydHlFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAvKiBJZiBhbnkgM0QgdHJhbnNmb3JtIHN1YnByb3BlcnR5IGlzIGF0IGl0cyBkZWZhdWx0IHZhbHVlIChyZWdhcmRsZXNzIG9mIHVuaXQgdHlwZSksIHJlbW92ZSBpdC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAkLmVhY2goQ1NTLkxpc3RzLnRyYW5zZm9ybXMzRCwgZnVuY3Rpb24oaSwgdHJhbnNmb3JtTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVmYXVsdFZhbHVlID0gL15zY2FsZS8udGVzdCh0cmFuc2Zvcm1OYW1lKSA/IDEgOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlID0gRGF0YShlbGVtZW50KS50cmFuc2Zvcm1DYWNoZVt0cmFuc2Zvcm1OYW1lXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChEYXRhKGVsZW1lbnQpLnRyYW5zZm9ybUNhY2hlW3RyYW5zZm9ybU5hbWVdICE9PSB1bmRlZmluZWQgJiYgbmV3IFJlZ0V4cChcIl5cXFxcKFwiICsgZGVmYXVsdFZhbHVlICsgXCJbXi5dXCIpLnRlc3QoY3VycmVudFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtSEFQcm9wZXJ0eUV4aXN0cyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIERhdGEoZWxlbWVudCkudHJhbnNmb3JtQ2FjaGVbdHJhbnNmb3JtTmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogTW9iaWxlIGRldmljZXMgaGF2ZSBoYXJkd2FyZSBhY2NlbGVyYXRpb24gcmVtb3ZlZCBhdCB0aGUgZW5kIG9mIHRoZSBhbmltYXRpb24gaW4gb3JkZXIgdG8gYXZvaWQgaG9nZ2luZyB0aGUgR1BVJ3MgbWVtb3J5LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRzLm1vYmlsZUhBKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybUhBUHJvcGVydHlFeGlzdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgRGF0YShlbGVtZW50KS50cmFuc2Zvcm1DYWNoZS50cmFuc2xhdGUzZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIEZsdXNoIHRoZSBzdWJwcm9wZXJ0eSByZW1vdmFscyB0byB0aGUgRE9NLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2Zvcm1IQVByb3BlcnR5RXhpc3RzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENTUy5mbHVzaFRyYW5zZm9ybUNhY2hlKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogUmVtb3ZlIHRoZSBcInZlbG9jaXR5LWFuaW1hdGluZ1wiIGluZGljYXRvciBjbGFzcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICBDU1MuVmFsdWVzLnJlbW92ZUNsYXNzKGVsZW1lbnQsIFwidmVsb2NpdHktYW5pbWF0aW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgIE9wdGlvbjogQ29tcGxldGVcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgLyogQ29tcGxldGUgaXMgZmlyZWQgb25jZSBwZXIgY2FsbCAobm90IG9uY2UgcGVyIGVsZW1lbnQpIGFuZCBpcyBwYXNzZWQgdGhlIGZ1bGwgcmF3IERPTSBlbGVtZW50IHNldCBhcyBib3RoIGl0cyBjb250ZXh0IGFuZCBpdHMgZmlyc3QgYXJndW1lbnQuICovXHJcbiAgICAgICAgICAgIC8qIE5vdGU6IENhbGxiYWNrcyBhcmVuJ3QgZmlyZWQgd2hlbiBjYWxscyBhcmUgbWFudWFsbHkgc3RvcHBlZCAodmlhIFZlbG9jaXR5KFwic3RvcFwiKS4gKi9cclxuICAgICAgICAgICAgaWYgKCFpc1N0b3BwZWQgJiYgb3B0cy5jb21wbGV0ZSAmJiAhb3B0cy5sb29wICYmIChpID09PSBjYWxsTGVuZ3RoIC0gMSkpIHtcclxuICAgICAgICAgICAgICAgIC8qIFdlIHRocm93IGNhbGxiYWNrcyBpbiBhIHNldFRpbWVvdXQgc28gdGhhdCB0aHJvd24gZXJyb3JzIGRvbid0IGhhbHQgdGhlIGV4ZWN1dGlvbiBvZiBWZWxvY2l0eSBpdHNlbGYuICovXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMuY29tcGxldGUuY2FsbChlbGVtZW50cywgZWxlbWVudHMpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyB0aHJvdyBlcnJvcjsgfSwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgIFByb21pc2UgUmVzb2x2aW5nXHJcbiAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAvKiBOb3RlOiBJbmZpbml0ZSBsb29wcyBkb24ndCByZXR1cm4gcHJvbWlzZXMuICovXHJcbiAgICAgICAgICAgIGlmIChyZXNvbHZlciAmJiBvcHRzLmxvb3AgIT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmVyKGVsZW1lbnRzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgT3B0aW9uOiBMb29wIChJbmZpbml0ZSlcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRzLmxvb3AgPT09IHRydWUgJiYgIWlzU3RvcHBlZCkge1xyXG4gICAgICAgICAgICAgICAgLyogSWYgYSByb3RhdGVYL1kvWiBwcm9wZXJ0eSBpcyBiZWluZyBhbmltYXRlZCB0byAzNjAgZGVnIHdpdGggbG9vcDp0cnVlLCBzd2FwIHR3ZWVuIHN0YXJ0L2VuZCB2YWx1ZXMgdG8gZW5hYmxlXHJcbiAgICAgICAgICAgICAgICAgICBjb250aW51b3VzIGl0ZXJhdGl2ZSByb3RhdGlvbiBsb29waW5nLiAoT3RoZXJpc2UsIHRoZSBlbGVtZW50IHdvdWxkIGp1c3Qgcm90YXRlIGJhY2sgYW5kIGZvcnRoLikgKi9cclxuICAgICAgICAgICAgICAgICQuZWFjaChEYXRhKGVsZW1lbnQpLnR3ZWVuc0NvbnRhaW5lciwgZnVuY3Rpb24ocHJvcGVydHlOYW1lLCB0d2VlbkNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgvXnJvdGF0ZS8udGVzdChwcm9wZXJ0eU5hbWUpICYmIHBhcnNlRmxvYXQodHdlZW5Db250YWluZXIuZW5kVmFsdWUpID09PSAzNjApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHdlZW5Db250YWluZXIuZW5kVmFsdWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0d2VlbkNvbnRhaW5lci5zdGFydFZhbHVlID0gMzYwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIFZlbG9jaXR5KGVsZW1lbnQsIFwicmV2ZXJzZVwiLCB7IGxvb3A6IHRydWUsIGRlbGF5OiBvcHRzLmRlbGF5IH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgIERlcXVldWVpbmdcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgLyogRmlyZSB0aGUgbmV4dCBjYWxsIGluIHRoZSBxdWV1ZSBzbyBsb25nIGFzIHRoaXMgY2FsbCdzIHF1ZXVlIHdhc24ndCBzZXQgdG8gZmFsc2UgKHRvIHRyaWdnZXIgYSBwYXJhbGxlbCBhbmltYXRpb24pLFxyXG4gICAgICAgICAgICAgICB3aGljaCB3b3VsZCBoYXZlIGFscmVhZHkgY2F1c2VkIHRoZSBuZXh0IGNhbGwgdG8gZmlyZS4gTm90ZTogRXZlbiBpZiB0aGUgZW5kIG9mIHRoZSBhbmltYXRpb24gcXVldWUgaGFzIGJlZW4gcmVhY2hlZCxcclxuICAgICAgICAgICAgICAgJC5kZXF1ZXVlKCkgbXVzdCBzdGlsbCBiZSBjYWxsZWQgaW4gb3JkZXIgdG8gY29tcGxldGVseSBjbGVhciBqUXVlcnkncyBhbmltYXRpb24gcXVldWUuICovXHJcbiAgICAgICAgICAgIGlmIChvcHRzLnF1ZXVlICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgJC5kZXF1ZXVlKGVsZW1lbnQsIG9wdHMucXVldWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgQ2FsbHMgQXJyYXkgQ2xlYW51cFxyXG4gICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgLyogU2luY2UgdGhpcyBjYWxsIGlzIGNvbXBsZXRlLCBzZXQgaXQgdG8gZmFsc2Ugc28gdGhhdCB0aGUgckFGIHRpY2sgc2tpcHMgaXQuIFRoaXMgYXJyYXkgaXMgbGF0ZXIgY29tcGFjdGVkIHZpYSBjb21wYWN0U3BhcnNlQXJyYXkoKS5cclxuICAgICAgICAgIChGb3IgcGVyZm9ybWFuY2UgcmVhc29ucywgdGhlIGNhbGwgaXMgc2V0IHRvIGZhbHNlIGluc3RlYWQgb2YgYmVpbmcgZGVsZXRlZCBmcm9tIHRoZSBhcnJheTogaHR0cDovL3d3dy5odG1sNXJvY2tzLmNvbS9lbi90dXRvcmlhbHMvc3BlZWQvdjgvKSAqL1xyXG4gICAgICAgIFZlbG9jaXR5LlN0YXRlLmNhbGxzW2NhbGxJbmRleF0gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLyogSXRlcmF0ZSB0aHJvdWdoIHRoZSBjYWxscyBhcnJheSB0byBkZXRlcm1pbmUgaWYgdGhpcyB3YXMgdGhlIGZpbmFsIGluLXByb2dyZXNzIGFuaW1hdGlvbi5cclxuICAgICAgICAgICBJZiBzbywgc2V0IGEgZmxhZyB0byBlbmQgdGlja2luZyBhbmQgY2xlYXIgdGhlIGNhbGxzIGFycmF5LiAqL1xyXG4gICAgICAgIGZvciAodmFyIGogPSAwLCBjYWxsc0xlbmd0aCA9IFZlbG9jaXR5LlN0YXRlLmNhbGxzLmxlbmd0aDsgaiA8IGNhbGxzTGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgaWYgKFZlbG9jaXR5LlN0YXRlLmNhbGxzW2pdICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgcmVtYWluaW5nQ2FsbHNFeGlzdCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChyZW1haW5pbmdDYWxsc0V4aXN0ID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAvKiB0aWNrKCkgd2lsbCBkZXRlY3QgdGhpcyBmbGFnIHVwb24gaXRzIG5leHQgaXRlcmF0aW9uIGFuZCBzdWJzZXF1ZW50bHkgdHVybiBpdHNlbGYgb2ZmLiAqL1xyXG4gICAgICAgICAgICBWZWxvY2l0eS5TdGF0ZS5pc1RpY2tpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIC8qIENsZWFyIHRoZSBjYWxscyBhcnJheSBzbyB0aGF0IGl0cyBsZW5ndGggaXMgcmVzZXQuICovXHJcbiAgICAgICAgICAgIGRlbGV0ZSBWZWxvY2l0eS5TdGF0ZS5jYWxscztcclxuICAgICAgICAgICAgVmVsb2NpdHkuU3RhdGUuY2FsbHMgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgIEZyYW1ld29ya3NcclxuICAgICoqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAvKiBCb3RoIGpRdWVyeSBhbmQgWmVwdG8gYWxsb3cgdGhlaXIgJC5mbiBvYmplY3QgdG8gYmUgZXh0ZW5kZWQgdG8gYWxsb3cgd3JhcHBlZCBlbGVtZW50cyB0byBiZSBzdWJqZWN0ZWQgdG8gcGx1Z2luIGNhbGxzLlxyXG4gICAgICAgSWYgZWl0aGVyIGZyYW1ld29yayBpcyBsb2FkZWQsIHJlZ2lzdGVyIGEgXCJ2ZWxvY2l0eVwiIGV4dGVuc2lvbiBwb2ludGluZyB0byBWZWxvY2l0eSdzIGNvcmUgYW5pbWF0ZSgpIG1ldGhvZC4gIFZlbG9jaXR5XHJcbiAgICAgICBhbHNvIHJlZ2lzdGVycyBpdHNlbGYgb250byBhIGdsb2JhbCBjb250YWluZXIgKHdpbmRvdy5qUXVlcnkgfHwgd2luZG93LlplcHRvIHx8IHdpbmRvdykgc28gdGhhdCBjZXJ0YWluIGZlYXR1cmVzIGFyZVxyXG4gICAgICAgYWNjZXNzaWJsZSBiZXlvbmQganVzdCBhIHBlci1lbGVtZW50IHNjb3BlLiBUaGlzIG1hc3RlciBvYmplY3QgY29udGFpbnMgYW4gLmFuaW1hdGUoKSBtZXRob2QsIHdoaWNoIGlzIGxhdGVyIGFzc2lnbmVkIHRvICQuZm5cclxuICAgICAgIChpZiBqUXVlcnkgb3IgWmVwdG8gYXJlIHByZXNlbnQpLiBBY2NvcmRpbmdseSwgVmVsb2NpdHkgY2FuIGJvdGggYWN0IG9uIHdyYXBwZWQgRE9NIGVsZW1lbnRzIGFuZCBzdGFuZCBhbG9uZSBmb3IgdGFyZ2V0aW5nIHJhdyBET00gZWxlbWVudHMuICovXHJcbiAgICBnbG9iYWwuVmVsb2NpdHkgPSBWZWxvY2l0eTtcclxuXHJcbiAgICBpZiAoZ2xvYmFsICE9PSB3aW5kb3cpIHtcclxuICAgICAgICAvKiBBc3NpZ24gdGhlIGVsZW1lbnQgZnVuY3Rpb24gdG8gVmVsb2NpdHkncyBjb3JlIGFuaW1hdGUoKSBtZXRob2QuICovXHJcbiAgICAgICAgZ2xvYmFsLmZuLnZlbG9jaXR5ID0gYW5pbWF0ZTtcclxuICAgICAgICAvKiBBc3NpZ24gdGhlIG9iamVjdCBmdW5jdGlvbidzIGRlZmF1bHRzIHRvIFZlbG9jaXR5J3MgZ2xvYmFsIGRlZmF1bHRzIG9iamVjdC4gKi9cclxuICAgICAgICBnbG9iYWwuZm4udmVsb2NpdHkuZGVmYXVsdHMgPSBWZWxvY2l0eS5kZWZhdWx0cztcclxuICAgIH1cclxuXHJcbiAgICAvKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgIFBhY2thZ2VkIFJlZGlyZWN0c1xyXG4gICAgKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgLyogc2xpZGVVcCwgc2xpZGVEb3duICovXHJcbiAgICAkLmVhY2goWyBcIkRvd25cIiwgXCJVcFwiIF0sIGZ1bmN0aW9uKGksIGRpcmVjdGlvbikge1xyXG4gICAgICAgIFZlbG9jaXR5LlJlZGlyZWN0c1tcInNsaWRlXCIgKyBkaXJlY3Rpb25dID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMsIGVsZW1lbnRzSW5kZXgsIGVsZW1lbnRzU2l6ZSwgZWxlbWVudHMsIHByb21pc2VEYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBvcHRzID0gJC5leHRlbmQoe30sIG9wdGlvbnMpLFxyXG4gICAgICAgICAgICAgICAgYmVnaW4gPSBvcHRzLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgY29tcGxldGUgPSBvcHRzLmNvbXBsZXRlLFxyXG4gICAgICAgICAgICAgICAgY29tcHV0ZWRWYWx1ZXMgPSB7IGhlaWdodDogXCJcIiwgbWFyZ2luVG9wOiBcIlwiLCBtYXJnaW5Cb3R0b206IFwiXCIsIHBhZGRpbmdUb3A6IFwiXCIsIHBhZGRpbmdCb3R0b206IFwiXCIgfSxcclxuICAgICAgICAgICAgICAgIGlubGluZVZhbHVlcyA9IHt9O1xyXG5cclxuICAgICAgICAgICAgaWYgKG9wdHMuZGlzcGxheSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBTaG93IHRoZSBlbGVtZW50IGJlZm9yZSBzbGlkZURvd24gYmVnaW5zIGFuZCBoaWRlIHRoZSBlbGVtZW50IGFmdGVyIHNsaWRlVXAgY29tcGxldGVzLiAqL1xyXG4gICAgICAgICAgICAgICAgLyogTm90ZTogSW5saW5lIGVsZW1lbnRzIGNhbm5vdCBoYXZlIGRpbWVuc2lvbnMgYW5pbWF0ZWQsIHNvIHRoZXkncmUgcmV2ZXJ0ZWQgdG8gaW5saW5lLWJsb2NrLiAqL1xyXG4gICAgICAgICAgICAgICAgb3B0cy5kaXNwbGF5ID0gKGRpcmVjdGlvbiA9PT0gXCJEb3duXCIgPyAoVmVsb2NpdHkuQ1NTLlZhbHVlcy5nZXREaXNwbGF5VHlwZShlbGVtZW50KSA9PT0gXCJpbmxpbmVcIiA/IFwiaW5saW5lLWJsb2NrXCIgOiBcImJsb2NrXCIpIDogXCJub25lXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvcHRzLmJlZ2luID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBJZiB0aGUgdXNlciBwYXNzZWQgaW4gYSBiZWdpbiBjYWxsYmFjaywgZmlyZSBpdCBub3cuICovXHJcbiAgICAgICAgICAgICAgICBiZWdpbiAmJiBiZWdpbi5jYWxsKGVsZW1lbnRzLCBlbGVtZW50cyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLyogQ2FjaGUgdGhlIGVsZW1lbnRzJyBvcmlnaW5hbCB2ZXJ0aWNhbCBkaW1lbnNpb25hbCBwcm9wZXJ0eSB2YWx1ZXMgc28gdGhhdCB3ZSBjYW4gYW5pbWF0ZSBiYWNrIHRvIHRoZW0uICovXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBjb21wdXRlZFZhbHVlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIENhY2hlIGFsbCBpbmxpbmUgdmFsdWVzLCB3ZSByZXNldCB0byB1cG9uIGFuaW1hdGlvbiBjb21wbGV0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlubGluZVZhbHVlc1twcm9wZXJ0eV0gPSBlbGVtZW50LnN0eWxlW3Byb3BlcnR5XTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogRm9yIHNsaWRlRG93biwgdXNlIGZvcmNlZmVlZGluZyB0byBhbmltYXRlIGFsbCB2ZXJ0aWNhbCBwcm9wZXJ0aWVzIGZyb20gMC4gRm9yIHNsaWRlVXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgdXNlIGZvcmNlZmVlZGluZyB0byBzdGFydCBmcm9tIGNvbXB1dGVkIHZhbHVlcyBhbmQgYW5pbWF0ZSBkb3duIHRvIDAuICovXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb3BlcnR5VmFsdWUgPSBWZWxvY2l0eS5DU1MuZ2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCBwcm9wZXJ0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcHV0ZWRWYWx1ZXNbcHJvcGVydHldID0gKGRpcmVjdGlvbiA9PT0gXCJEb3duXCIpID8gWyBwcm9wZXJ0eVZhbHVlLCAwIF0gOiBbIDAsIHByb3BlcnR5VmFsdWUgXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBGb3JjZSB2ZXJ0aWNhbCBvdmVyZmxvdyBjb250ZW50IHRvIGNsaXAgc28gdGhhdCBzbGlkaW5nIHdvcmtzIGFzIGV4cGVjdGVkLiAqL1xyXG4gICAgICAgICAgICAgICAgaW5saW5lVmFsdWVzLm92ZXJmbG93ID0gZWxlbWVudC5zdHlsZS5vdmVyZmxvdztcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvcHRzLmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBSZXNldCBlbGVtZW50IHRvIGl0cyBwcmUtc2xpZGUgaW5saW5lIHZhbHVlcyBvbmNlIGl0cyBzbGlkZSBhbmltYXRpb24gaXMgY29tcGxldGUuICovXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBpbmxpbmVWYWx1ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlW3Byb3BlcnR5XSA9IGlubGluZVZhbHVlc1twcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyogSWYgdGhlIHVzZXIgcGFzc2VkIGluIGEgY29tcGxldGUgY2FsbGJhY2ssIGZpcmUgaXQgbm93LiAqL1xyXG4gICAgICAgICAgICAgICAgY29tcGxldGUgJiYgY29tcGxldGUuY2FsbChlbGVtZW50cywgZWxlbWVudHMpO1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZURhdGEgJiYgcHJvbWlzZURhdGEucmVzb2x2ZXIoZWxlbWVudHMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgVmVsb2NpdHkoZWxlbWVudCwgY29tcHV0ZWRWYWx1ZXMsIG9wdHMpO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKiBmYWRlSW4sIGZhZGVPdXQgKi9cclxuICAgICQuZWFjaChbIFwiSW5cIiwgXCJPdXRcIiBdLCBmdW5jdGlvbihpLCBkaXJlY3Rpb24pIHtcclxuICAgICAgICBWZWxvY2l0eS5SZWRpcmVjdHNbXCJmYWRlXCIgKyBkaXJlY3Rpb25dID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMsIGVsZW1lbnRzSW5kZXgsIGVsZW1lbnRzU2l6ZSwgZWxlbWVudHMsIHByb21pc2VEYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBvcHRzID0gJC5leHRlbmQoe30sIG9wdGlvbnMpLFxyXG4gICAgICAgICAgICAgICAgcHJvcGVydGllc01hcCA9IHsgb3BhY2l0eTogKGRpcmVjdGlvbiA9PT0gXCJJblwiKSA/IDEgOiAwIH0sXHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbENvbXBsZXRlID0gb3B0cy5jb21wbGV0ZTtcclxuXHJcbiAgICAgICAgICAgIC8qIFNpbmNlIHJlZGlyZWN0cyBhcmUgdHJpZ2dlcmVkIGluZGl2aWR1YWxseSBmb3IgZWFjaCBlbGVtZW50IGluIHRoZSBhbmltYXRlZCBzZXQsIGF2b2lkIHJlcGVhdGVkbHkgdHJpZ2dlcmluZ1xyXG4gICAgICAgICAgICAgICBjYWxsYmFja3MgYnkgZmlyaW5nIHRoZW0gb25seSB3aGVuIHRoZSBmaW5hbCBlbGVtZW50IGhhcyBiZWVuIHJlYWNoZWQuICovXHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50c0luZGV4ICE9PSBlbGVtZW50c1NpemUgLSAxKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRzLmNvbXBsZXRlID0gb3B0cy5iZWdpbiA9IG51bGw7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvcHRzLmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsQ29tcGxldGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxDb21wbGV0ZS5jYWxsKGVsZW1lbnRzLCBlbGVtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlRGF0YSAmJiBwcm9taXNlRGF0YS5yZXNvbHZlcihlbGVtZW50cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qIElmIGEgZGlzcGxheSB3YXMgcGFzc2VkIGluLCB1c2UgaXQuIE90aGVyd2lzZSwgZGVmYXVsdCB0byBcIm5vbmVcIiBmb3IgZmFkZU91dCBvciB0aGUgZWxlbWVudC1zcGVjaWZpYyBkZWZhdWx0IGZvciBmYWRlSW4uICovXHJcbiAgICAgICAgICAgIC8qIE5vdGU6IFdlIGFsbG93IHVzZXJzIHRvIHBhc3MgaW4gXCJudWxsXCIgdG8gc2tpcCBkaXNwbGF5IHNldHRpbmcgYWx0b2dldGhlci4gKi9cclxuICAgICAgICAgICAgaWYgKG9wdHMuZGlzcGxheSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRzLmRpc3BsYXkgPSAoZGlyZWN0aW9uID09PSBcIkluXCIgPyBcImF1dG9cIiA6IFwibm9uZVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcywgcHJvcGVydGllc01hcCwgb3B0cyk7XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBWZWxvY2l0eTtcclxufSgod2luZG93LmpRdWVyeSB8fCB3aW5kb3cuWmVwdG8gfHwgd2luZG93KSwgd2luZG93LCBkb2N1bWVudCk7XHJcbn0pKTtcclxuXHJcbi8qKioqKioqKioqKioqKioqKipcclxuICAgS25vd24gSXNzdWVzXHJcbioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8qIFRoZSBDU1Mgc3BlYyBtYW5kYXRlcyB0aGF0IHRoZSB0cmFuc2xhdGVYL1kvWiB0cmFuc2Zvcm1zIGFyZSAlLXJlbGF0aXZlIHRvIHRoZSBlbGVtZW50IGl0c2VsZiAtLSBub3QgaXRzIHBhcmVudC5cclxuVmVsb2NpdHksIGhvd2V2ZXIsIGRvZXNuJ3QgbWFrZSB0aGlzIGRpc3RpbmN0aW9uLiBUaHVzLCBjb252ZXJ0aW5nIHRvIG9yIGZyb20gdGhlICUgdW5pdCB3aXRoIHRoZXNlIHN1YnByb3BlcnRpZXNcclxud2lsbCBwcm9kdWNlIGFuIGluYWNjdXJhdGUgY29udmVyc2lvbiB2YWx1ZS4gVGhlIHNhbWUgaXNzdWUgZXhpc3RzIHdpdGggdGhlIGN4L2N5IGF0dHJpYnV0ZXMgb2YgU1ZHIGNpcmNsZXMgYW5kIGVsbGlwc2VzLiAqL1xyXG4iXX0=
