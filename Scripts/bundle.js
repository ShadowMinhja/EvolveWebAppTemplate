(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"C:\\Users\\htn01\\AppData\\Roaming\\npm\\node_modules\\watchify\\node_modules\\browserify\\node_modules\\process\\browser.js":[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};

process.nextTick = (function () {
    var canSetImmediate = typeof window !== 'undefined'
    && window.setImmediate;
    var canMutationObserver = typeof window !== 'undefined'
    && window.MutationObserver;
    var canPost = typeof window !== 'undefined'
    && window.postMessage && window.addEventListener
    ;

    if (canSetImmediate) {
        return function (f) { return window.setImmediate(f) };
    }

    var queue = [];

    if (canMutationObserver) {
        var hiddenDiv = document.createElement("div");
        var observer = new MutationObserver(function () {
            var queueList = queue.slice();
            queue.length = 0;
            queueList.forEach(function (fn) {
                fn();
            });
        });

        observer.observe(hiddenDiv, { attributes: true });

        return function nextTick(fn) {
            if (!queue.length) {
                hiddenDiv.setAttribute('yes', 'no');
            }
            queue.push(fn);
        };
    }

    if (canPost) {
        window.addEventListener('message', function (ev) {
            var source = ev.source;
            if ((source === window || source === null) && ev.data === 'process-tick') {
                ev.stopPropagation();
                if (queue.length > 0) {
                    var fn = queue.shift();
                    fn();
                }
            }
        }, true);

        return function nextTick(fn) {
            queue.push(fn);
            window.postMessage('process-tick', '*');
        };
    }

    return function nextTick(fn) {
        setTimeout(fn, 0);
    };
})();

process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

// TODO(shtylman)
process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};

},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.controller.js":[function(require,module,exports){
//app.controller.js
var app = require('./app.model.js');

app.controller = function () {
}

//Browserify Directives
module.exports = app.controller
},{"./app.model.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.model.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.model.js":[function(require,module,exports){
//app.model.js
var app = {
}

app.App = function (data) {
}

app.controller = require('./app.controller.js');

app.view = require('./views/app.view.js');

//Browserify Directives
module.exports = app;
},{"./app.controller.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.controller.js","./views/app.view.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\views\\app.view.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.route.js":[function(require,module,exports){
var m = require('../mithril.js');
var app = require('./app.model.js');
var settings = require('./app.settings.js');
var menu = require('./modules/menu.module.js');
var todo = require('./models/todo.model.js');

m.route.mode = "hash";

//setup routes to start w/ the `/` symbol
m.route(settings.rootContainer, "/", {
    "/": menu,
    "/home": app,
    "/profile": app,
    "/todo": todo
});

///////////////////////////////
//a sample module
//var dashboard = {
//    controller: function () {
//        this.id = m.route.param("userID");
//    },
//    view: function (controller) {
//        return m("div", controller.id);
//    }
//}

//var profile = {
//    controller: function () {
//        this.id = m.route.param("userID");
//    },
//    view: function (controller) {
//        return m("div");
//    }
//}

//define a route
//m.route($rootContainer, "/profile/johndoe", {
//    "/profile/:userID": dashboard
//});
},{"../mithril.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js","./app.model.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.model.js","./app.settings.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.settings.js","./models/todo.model.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\models\\todo.model.js","./modules/menu.module.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\modules\\menu.module.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.settings.js":[function(require,module,exports){
var settings = {
    rootContainer : document.getElementsByClassName("container")[0]
};
//Browserify Directives
module.exports = settings;
},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\controllers\\todo.controller.js":[function(require,module,exports){
var m = require('../../mithril.js');
var todo = require('../models/todo.model.js');

todo.controller = function () {
    this.list = new todo.TodoList();
    this.description = m.prop("");

    this.add = function () {
        if (this.description()) {
            this.list.push(new todo.Todo({ description: this.description() }));
            this.description("");
        }
    }.bind(this);
}

//Browserify Directives
module.exports = todo.controller
},{"../../mithril.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js","../models/todo.model.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\models\\todo.model.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\models\\todo.model.js":[function(require,module,exports){
var m = require('../../mithril.js');
var todo = {}

todo.Todo = function (data) {
    this.description = m.prop(data.description);
    this.done = m.prop(false);
}

todo.TodoList = Array;

//Browserify Directives
module.exports = todo; //<-- This export has to be before the requires for todo.controller, because todo.controller relies on todo module (circular dependency)

todo.controller = require('../controllers/todo.controller.js');

todo.view = require('../views/todo.view.js');
},{"../../mithril.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js","../controllers/todo.controller.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\controllers\\todo.controller.js","../views/todo.view.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\views\\todo.view.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\modules\\clearscreen.module.js":[function(require,module,exports){
var clearScreen = {}
clearScreen.controller = function () {

}
clearScreen.view = function () { }
},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\modules\\menu.module.js":[function(require,module,exports){
var m = require('../../mithril.js');
var menu = {}

menu.Menu = function (data) {
}

menu.controller = function () {
}

menu.view = function () {
    return [
        [m(".main", [            
		        m("ul.tile-grid.clearfix[id='tile-grid']", [
			        m("li.tile.icon-clima-2", [
				        m("h3", "Register"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-1", { onclick: function () { window.location = '/#/home'; } }, [
				        m("h3", "Dashboard"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-4", [
				        m("h3", "Admin"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-1", { onclick: function () { window.location = '/#/todo';} }, [
				        m("h3", "todo"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-1.tile-span-2", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-1", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-2", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-11", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-2", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-2.tile-span-2", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-4.tile-span-4", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ])
		        ])
        ])]
    ];
}

//Browserify Directives
module.exports = menu
},{"../../mithril.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\views\\app.view.js":[function(require,module,exports){
//app.view.js
var m = require('../../mithril.js');
var app = require('../app.model.js');
var Controls = require('../../controls.js');
controls = new Controls();

app.view = function (ctrl) {
    return [
	m(".jumbotron", [
		m("h1", "ASP.NET"),
		m("p.lead", "ASP.NET is a free web framework for building great Web sites and Web applications using HTML, CSS, and JavaScript."),
		m("p", [
            [m("button.btn.btn-primary.btn-lg[id='hitme']", { onclick : function () { new controls.PopupDialog().show(null, 'Are you sure you want to continue?', 'Confirmation Needed', function () { alert('You pressed Yes ^^');}, function () { alert('You pressed No TT');});} }, "Hit Me!"), "\n",
             m("button.btn.btn-primary.btn-lg[id='yes']", { onclick: function () { controls.showNotification('YES!!', 'Just a Test', 'Success', 5000, 30, 30, null); } }, "Yes"), "\n",
             m("button.btn.btn-primary.btn-lg[id='no']", { onclick: function () { controls.showNotification('NO!!', 'Just a Test', 'Error', 5000, controls.notificationRightPos, controls.notificationTopPos, null); } }, "No"), "\n",
             m("button.btn.btn-primary.btn-lg[id='maybe']", { onclick: function () { controls.showNotification('MAYBE SO...', 'Just a Test', 'Warning', 5000, controls.notificationRightPos, controls.notificationTopPos, null); } }, "Maybe So")]
		])
	]),
	m(".row", [
		m(".col-md-4", [
			m("h2", "Your information"),
			m("p", "This section shows how you can call ASP.NET Web API to get the user details."),
			m("p[data-bind='text: myHometown']"),
			m("p", [m("a.btn.btn-default[href='http://go.microsoft.com/fwlink/?LinkId=273732']", "Learn more »")])
		]),
		m(".col-md-4", [
			m("h2", "Getting started"),
			m("p", "\n                    ASP.NET Single Page Application (SPA) helps you build applications that include significant client-side interactions using HTML, CSS, and JavaScript.\n                    It's now easier than ever before to getting started writing highly interactive web applications.\n                "),
			m("p", [m("a.btn.btn-default[href='http://go.microsoft.com/fwlink/?LinkId=273732']", "Learn more »")])
		]),
		m(".col-md-4", [
			m("h2", "Web Hosting"),
			m("p", "You can easily find a web hosting company that offers the right mix of features and price for your applications."),
			m("p", [m("a.btn.btn-default[href='http://go.microsoft.com/fwlink/?LinkId=301867']", "Learn more »")])
		])
	])
    ];
}

//Browserify Directives
module.exports = app.view
},{"../../controls.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\controls.js","../../mithril.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js","../app.model.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.model.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\views\\todo.view.js":[function(require,module,exports){
/**
 * JSX version of the Mithril Getting Started documentation's TODO example.
 * http://lhorie.github.io/mithril/getting-started.html
 * @jsx m
 */
var m = require('../../mithril.js');
var todo = require('../models/todo.model.js');

todo.view = function (ctrl) {
    return m("html", [
        m("body", [
            m("input",  {onchange:m.withAttr('value', ctrl.description), value: ctrl.description()}),            
            m("button", {onclick:ctrl.add}, ["Add"]),
            m("table", [            
                ctrl.list.map(function (task, index) {
                    return m("tr", [
                        m("td", [
                            m("input",  {type:'checkbox', onclick: m.withAttr('checked', task.done), checked: task.done()})            
                        ]),
                        m("td", {style:{textDecoration: task.done() ? 'line-through' : 'none'}}, [task.description()])
                    ])
                })
            ])
        ])
    ])
}
//Browserify Directives
module.exports = todo.view
},{"../../mithril.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js","../models/todo.model.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\models\\todo.model.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\controls.js":[function(require,module,exports){
//***********************
//#region Kendo UI Controls
//***********************
var controls = function(){
    this.notificationRightPos = 30;
    this.notificationTopPos = 30;
    //#region Notification Messages
    this.getDialogCriticality = function (message) {
        if (message.toLowerCase().indexOf('success') > 0) {
            return "Success";
        } else if (message.toLowerCase().indexOf('error') > 0) {
            return "Error";
        } else if (message.toLowerCase().indexOf('fail') > 0) {
            return "Error";
        } else {
            return "Warning";
        }
    }
    this.showNotification = function (messageText, titleText, mode, timeOut, posRight, posTop, appendTo) {
        var appendTarget = appendTo;
        if (typeof (notificationHandle) == "undefined") {
            notificationHandle = $("#notificationSpan").kendoNotification({
                "position": { "right": posRight, "top": posTop },
                "autoHideAfter": timeOut,
                "stacking": "down",
                "templates": [
                    { "type": "error", "templateId": "errorTemplate" },
                    { "type": "warning", "templateId": "warningTemplate" },
                    { "type": "success", "templateId": "successTemplate" }
                ]
            });
        }
        var notification = $("#notificationSpan").data("kendoNotification");
        notification.show({
            message: messageText,
            title: titleText,
        }, mode.toLowerCase());
    }
    //#endregion Notification Messages
    //#region Popup Dialog
    this.PopupDialog = function (mute) {
        this.mute = mute;

        this.show = function (e, messageText, titleText, confirmCallback, cancelCallback) {
            var dfd = new $.Deferred(); //Promise object to perform actions based on user input        

            if (this.mute == false && e != null) {
                if (!e.preventDefault) {
                    e = $.event.fix(e);
                }
                e.preventDefault();
            }

            if (messageText != null) {
                $("#modal-confirmation").html("<div class=\"confirmContent\"><p class=\"modal-message\">" + messageText + "</p><button class=\"modal-confirm k-button\">Yes</button>&nbsp;<button class=\"modal-cancel k-button\">No</button></div>");
            }
            var kendoWindow = $("<div />").kendoWindow({
                width: 400,
                //height: 120,
                title: titleText,
                resizable: false,
                modal: true
            });

            if (this.mute == false || this.mute == undefined) {
                kendoWindow.data("kendoWindow")
                    .content($("#modal-confirmation").html())
                    .center().open();

                kendoWindow.find(".modal-confirm,.modal-cancel").click(function () {
                    if ($(this).hasClass("modal-confirm")) {
                        dfd.resolve(true);
                        if (e != null) {
                            e.currentTarget.click();
                        }
                        else {
                            if (confirmCallback !== undefined && confirmCallback != null) {
                                confirmCallback();
                            }
                        }
                    }
                    if ($(this).hasClass("modal-cancel")) {
                        if (cancelCallback !== undefined && cancelCallback != null) {
                            cancelCallback();
                        }
                        dfd.resolve(false);
                    }
                    kendoWindow.data("kendoWindow").close();
                });
            }
            else {
                if (confirmCallback !== undefined && confirmCallback != null) {
                    confirmCallback();
                }
                dfd.resolve(false);
            }
            return dfd.promise(); //Returns a promise
        }
    }
    //#endregion Popup Dialog Section
}
module.exports = controls;

//***********************
//#endregion 
//***********************
},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\core.js":[function(require,module,exports){
//#region Keyboard Shortcuts
    jQuery(document).bind('keypress', 'd', function (event) {
        $("#Dropdown").trigger("click");
    });
    jQuery(document).bind('keypress', 'h', function (event) {
        $("#hitme").trigger("click");
    });
    jQuery(document).bind('keypress', 'y', function (event) {
        $("#yes").trigger("click");
    });
    jQuery(document).bind('keypress', 'n', function (event) {
        $("#no").trigger("click");
    });
    jQuery(document).bind('keypress', 'm', function (event) {
        $("#maybe").trigger("click");
    });
//#endregion Keyboard Shortcuts
},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\jquery.hotkeys.js":[function(require,module,exports){
/*jslint browser: true*/
/*jslint jquery: true*/

/*
 * jQuery Hotkeys Plugin
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Based upon the plugin by Tzury Bar Yochay:
 * http://github.com/tzuryby/hotkeys
 *
 * Original idea by:
 * Binny V A, http://www.openjs.com/scripts/events/keyboard_shortcuts/
 */

/*
 * One small change is: now keys are passed by object { keys: '...' }
 * Might be useful, when you want to pass some other data to your handler
 */
var jQuery = require('./kendo/2014.3.1119/jquery.min.js');
(function(jQuery) {

  jQuery.hotkeys = {
    version: "0.8",

    specialKeys: {
      8: "backspace",
      9: "tab",
      10: "return",
      13: "return",
      16: "shift",
      17: "ctrl",
      18: "alt",
      19: "pause",
      20: "capslock",
      27: "esc",
      32: "space",
      33: "pageup",
      34: "pagedown",
      35: "end",
      36: "home",
      37: "left",
      38: "up",
      39: "right",
      40: "down",
      45: "insert",
      46: "del",
      59: ";",
      61: "=",
      96: "0",
      97: "1",
      98: "2",
      99: "3",
      100: "4",
      101: "5",
      102: "6",
      103: "7",
      104: "8",
      105: "9",
      106: "*",
      107: "+",
      109: "-",
      110: ".",
      111: "/",
      112: "f1",
      113: "f2",
      114: "f3",
      115: "f4",
      116: "f5",
      117: "f6",
      118: "f7",
      119: "f8",
      120: "f9",
      121: "f10",
      122: "f11",
      123: "f12",
      144: "numlock",
      145: "scroll",
      173: "-",
      186: ";",
      187: "=",
      188: ",",
      189: "-",
      190: ".",
      191: "/",
      192: "`",
      219: "[",
      220: "\\",
      221: "]",
      222: "'"
    },

    shiftNums: {
      "`": "~",
      "1": "!",
      "2": "@",
      "3": "#",
      "4": "$",
      "5": "%",
      "6": "^",
      "7": "&",
      "8": "*",
      "9": "(",
      "0": ")",
      "-": "_",
      "=": "+",
      ";": ": ",
      "'": "\"",
      ",": "<",
      ".": ">",
      "/": "?",
      "\\": "|"
    },

    // excludes: button, checkbox, file, hidden, image, password, radio, reset, search, submit, url
    textAcceptingInputTypes: [
      "text", "password", "number", "email", "url", "range", "date", "month", "week", "time", "datetime",
      "datetime-local", "search", "color", "tel"],

    options: {
      filterTextInputs: true
    }
  };

  function keyHandler(handleObj) {
    if (typeof handleObj.data === "string") {
      handleObj.data = {
        keys: handleObj.data
      };
    }

    // Only care when a possible input has been specified
    if (!handleObj.data || !handleObj.data.keys || typeof handleObj.data.keys !== "string") {
      return;
    }

    var origHandler = handleObj.handler,
      keys = handleObj.data.keys.toLowerCase().split(" ");

    handleObj.handler = function(event) {
      //      Don't fire in text-accepting inputs that we didn't directly bind to
      if (this !== event.target && (/textarea|select/i.test(event.target.nodeName) ||
          (jQuery.hotkeys.options.filterTextInputs &&
            jQuery.inArray(event.target.type, jQuery.hotkeys.textAcceptingInputTypes) > -1))) {
        return;
      }

      var special = event.type !== "keypress" && jQuery.hotkeys.specialKeys[event.which],
        character = String.fromCharCode(event.which).toLowerCase(),
        modif = "",
        possible = {};

      jQuery.each(["alt", "ctrl", "shift"], function(index, specialKey) {

        if (event[specialKey + 'Key'] && special !== specialKey) {
          modif += specialKey + '+';
        }
      });

      // metaKey is triggered off ctrlKey erronously
      if (event.metaKey && !event.ctrlKey && special !== "meta") {
        modif += "meta+";
      }

      if (event.metaKey && special !== "meta" && modif.indexOf("alt+ctrl+shift+") > -1) {
        modif = modif.replace("alt+ctrl+shift+", "hyper+");
      }

      if (special) {
        possible[modif + special] = true;
      }
      else {
        possible[modif + character] = true;
        possible[modif + jQuery.hotkeys.shiftNums[character]] = true;

        // "$" can be triggered as "Shift+4" or "Shift+$" or just "$"
        if (modif === "shift+") {
          possible[jQuery.hotkeys.shiftNums[character]] = true;
        }
      }

      for (var i = 0, l = keys.length; i < l; i++) {
        if (possible[keys[i]]) {
          return origHandler.apply(this, arguments);
        }
      }
    };
  }

  jQuery.each(["keydown", "keyup", "keypress"], function() {
    jQuery.event.special[this] = {
      add: keyHandler
    };
  });

})(jQuery || this.jQuery || window.jQuery);

},{"./kendo/2014.3.1119/jquery.min.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\kendo\\2014.3.1119\\jquery.min.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\kendo\\2014.3.1119\\jquery.min.js":[function(require,module,exports){
(function (global){
;__browserify_shim_require__=require;(function browserifyShim(module, exports, require, define, browserify_shim__define__module__export__) {
/*! jQuery v1.9.1 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery.min.map
*/(function(e,t){var n,r,i=typeof t,o=e.document,a=e.location,s=e.jQuery,u=e.$,l={},c=[],p="1.9.1",f=c.concat,d=c.push,h=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,b=function(e,t){return new b.fn.init(e,t,r)},x=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,N=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^[\],:{}\s]*$/,E=/(?:^|:|,)(?:\s*\[)+/g,S=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,j=/^-ms-/,D=/-([\da-z])/gi,L=function(e,t){return t.toUpperCase()},H=function(e){(o.addEventListener||"load"===e.type||"complete"===o.readyState)&&(q(),b.ready())},q=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",H,!1),e.removeEventListener("load",H,!1)):(o.detachEvent("onreadystatechange",H),e.detachEvent("onload",H))};b.fn=b.prototype={jquery:p,constructor:b,init:function(e,n,r){var i,a;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),C.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(a=o.getElementById(i[2]),a&&a.parentNode){if(a.id!==i[2])return r.find(e);this.length=1,this[0]=a}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return h.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||b.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(o=arguments[u]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,a=e&&b.isArray(e)?e:[]):a=e&&b.isPlainObject(e)?e:{},s[i]=b.extend(c,a,r)):r!==t&&(s[i]=r));return s},b.extend({noConflict:function(t){return e.$===b&&(e.$=u),t&&e.jQuery===b&&(e.jQuery=s),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!o.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(o,[b]),b.fn.trigger&&b(o).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||y.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=b.trim(n),n&&k.test(n.replace(S,"@").replace(A,"]").replace(E,"")))?Function("return "+n)():(b.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(j,"ms-").replace(D,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:v&&!v.call("\ufeff\u00a0")?function(e){return null==e?"":v.call(e)}:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?b.merge(n,"string"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(g)return g.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else while(n[o]!==t)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return f.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),b.isFunction(e)?(r=h.call(arguments,2),i=function(){return e.apply(n||this,r.concat(h.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if("object"===b.type(r)){o=!0;for(u in r)b.access(e,n,u,r[u],!0,a,s)}else if(i!==t&&(o=!0,b.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(b(e),n)})),n))for(;l>u;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),"complete"===o.readyState)setTimeout(b.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",H,!1),e.addEventListener("load",H,!1);else{o.attachEvent("onreadystatechange",H),e.attachEvent("onload",H);var r=!1;try{r=null==e.frameElement&&o.documentElement}catch(i){}r&&r.doScroll&&function a(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(a,50)}q(),b.ready()}}()}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function M(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}r=b(o);var _={};function F(e){var t=_[e]={};return b.each(e.match(w)||[],function(e,n){t[n]=!0}),t}b.Callbacks=function(e){e="string"==typeof e?_[e]||F(e):b.extend({},e);var n,r,i,o,a,s,u=[],l=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=u.length,n=!0;u&&o>a;a++)if(u[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,u&&(l?l.length&&c(l.shift()):r?u=[]:p.disable())},p={add:function(){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this},remove:function(){return u&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,u,r))>-1)u.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?b.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=l=r=t,this},disabled:function(){return!u},lock:function(){return l=t,r||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||i&&!l||(n?l.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=h.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,o=1===i?e:b.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?h.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,u,l;if(r>1)for(s=Array(r),u=Array(r),l=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(a(t,l,n)).fail(o.reject).progress(a(t,u,s)):--i;return i||o.resolveWith(l,n),o.promise()}}),b.support=function(){var t,n,r,a,s,u,l,c,p,f,d=o.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),r=d.getElementsByTagName("a")[0],!n||!r||!n.length)return{};s=o.createElement("select"),l=s.appendChild(o.createElement("option")),a=d.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!a.value,optSelected:l.selected,enctype:!!o.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==o.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===o.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!l.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}a=o.createElement("input"),a.setAttribute("value",""),t.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),t.radioValue="t"===a.value,a.setAttribute("checked","t"),a.setAttribute("name","t"),u=o.createDocumentFragment(),u.appendChild(a),t.appendChecked=a.checked,t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+f,"t"),t[f+"Bubbles"]=c in e||d.attributes[c].expando===!1;return d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip,b(function(){var n,r,a,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",u=o.getElementsByTagName("body")[0];u&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",u.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=d.getElementsByTagName("td"),a[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===a[0].offsetHeight,a[0].style.display="",a[1].style.display="none",t.reliableHiddenOffsets=p&&0===a[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===d.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==u.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,r=d.appendChild(o.createElement("div")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(u.style.zoom=1)),u.removeChild(n),n=d=a=r=null)}),n=s=u=l=r=a=null,t}();var O=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,B=/([A-Z])/g;function P(e,n,r,i){if(b.acceptData(e)){var o,a,s=b.expando,u="string"==typeof n,l=e.nodeType,p=l?b.cache:e,f=l?e[s]:e[s]&&s;if(f&&p[f]&&(i||p[f].data)||!u||r!==t)return f||(l?e[s]=f=c.pop()||b.guid++:f=s),p[f]||(p[f]={},l||(p[f].toJSON=b.noop)),("object"==typeof n||"function"==typeof n)&&(i?p[f]=b.extend(p[f],n):p[f].data=b.extend(p[f].data,n)),o=p[f],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[b.camelCase(n)]=r),u?(a=o[n],null==a&&(a=o[b.camelCase(n)])):a=o,a}}function R(e,t,n){if(b.acceptData(e)){var r,i,o,a=e.nodeType,s=a?b.cache:e,u=a?e[b.expando]:b.expando;if(s[u]){if(t&&(o=n?s[u]:s[u].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in o?t=[t]:(t=b.camelCase(t),t=t in o?[t]:t.split(" "));for(r=0,i=t.length;i>r;r++)delete o[t[r]];if(!(n?$:b.isEmptyObject)(o))return}(n||(delete s[u].data,$(s[u])))&&(a?b.cleanData([e],!0):b.support.deleteExpando||s!=s.window?delete s[u]:s[u]=null)}}}b.extend({cache:{},expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!$(e)},data:function(e,t,n){return P(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return P(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,o=this[0],a=0,s=null;if(e===t){if(this.length&&(s=b.data(o),1===o.nodeType&&!b._data(o,"parsedAttrs"))){for(r=o.attributes;r.length>a;a++)i=r[a].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),W(o,i,s[i]));b._data(o,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?o?W(o,e,b.data(o,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function W(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(B,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:O.test(r)?b.parseJSON(r):r}catch(o){}b.data(e,n,r)}else r=t}return r}function $(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}b.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),o=b._queueHooks(e,t),a=function(){b.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),o.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=b.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(s--)r=b._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var I,z,X=/[\t\r\n]/g,U=/\r/g,V=/^(?:input|select|textarea|button|object)$/i,Y=/^(?:a|area)$/i,J=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,G=/^(?:checked|selected)$/i,Q=b.support.getSetAttribute,K=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u="string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):" ")){o=0;while(i=t[o++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||"string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):"")){o=0;while(i=t[o++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var o,a=0,s=b(this),u=t,l=e.match(w)||[];while(o=l[a++])u=r?u:!s.hasClass(o),s[u?"addClass":"removeClass"](o)}else(n===i||"boolean"===n)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=b.isFunction(e),this.each(function(n){var o,a=b(this);1===this.nodeType&&(o=i?e.call(this,n,a.val()):e,null==o?o="":"number"==typeof o?o+="":b.isArray(o)&&(o=b.map(o,function(e){return null==e?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))});if(o)return r=b.valHooks[o.type]||b.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(U,""):null==n?"":n)}}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;for(;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&b.nodeName(n.parentNode,"optgroup"))){if(t=b(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var o,a,s,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return typeof e.getAttribute===i?b.prop(e,n,r):(a=1!==u||!b.isXMLDoc(e),a&&(n=n.toLowerCase(),o=b.attrHooks[n]||(J.test(n)?z:I)),r===t?o&&a&&"get"in o&&null!==(s=o.get(e,n))?s:(typeof e.getAttribute!==i&&(s=e.getAttribute(n)),null==s?t:s):null!==r?o&&a&&"set"in o&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(w);if(o&&1===e.nodeType)while(n=o[i++])r=b.propFix[n]||n,J.test(n)?!Q&&G.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!b.isXMLDoc(e),a&&(n=b.propFix[n]||n,o=b.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):V.test(e.nodeName)||Y.test(e.nodeName)&&e.href?0:t}}}}),z={get:function(e,n){var r=b.prop(e,n),i="boolean"==typeof r&&e.getAttribute(n),o="boolean"==typeof r?K&&Q?null!=i:G.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}},K&&Q||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,"input")?(e.defaultValue=n,t):I&&I.set(e,n,r)}}),Q||(I=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:I.get,set:function(e,t,n){I.set(e,""===t?!1:t,n)}},b.each(["width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;function it(){return!0}function ot(){return!1}b.event={global:{},add:function(e,n,r,o,a){var s,u,l,c,p,f,d,h,g,m,y,v=b._data(e);if(v){r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=b.guid++),(u=v.events)||(u=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||"").match(w)||[""],l=n.length;while(l--)s=rt.exec(n[l])||[],g=y=s[1],m=(s[2]||"").split(".").sort(),p=b.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=b.event.special[g]||{},d=b.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&b.expr.match.needsContext.test(a),namespace:m.join(".")},c),(h=u[g])||(h=u[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent("on"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),b.event.global[g]=!0;e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,p,f,d,h,g,m=b.hasData(e)&&b._data(e);if(m&&(c=m.events)){t=(t||"").match(w)||[""],l=t.length;while(l--)if(s=rt.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){p=b.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=f.length;while(o--)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));u&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||b.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)b.event.remove(e,d+t[l],n,r,!0);b.isEmptyObject(c)&&(delete m.handle,b._removeData(e,"events"))}},trigger:function(n,r,i,a){var s,u,l,c,p,f,d,h=[i||o],g=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];if(l=f=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+b.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),u=0>g.indexOf(":")&&"on"+g,n=n[b.expando]?n:new b.Event(g,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),p=b.event.special[g]||{},a||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!a&&!p.noBubble&&!b.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(l=l.parentNode);l;l=l.parentNode)h.push(l),f=l;f===(i.ownerDocument||o)&&h.push(f.defaultView||f.parentWindow||e)}d=0;while((l=h[d++])&&!n.isPropagationStopped())n.type=d>1?c:p.bindType||g,s=(b._data(l,"events")||{})[n.type]&&b._data(l,"handle"),s&&s.apply(l,r),s=u&&l[u],s&&b.acceptData(l)&&s.apply&&s.apply(l,r)===!1&&n.preventDefault();if(n.type=g,!(a||n.isDefaultPrevented()||p._default&&p._default.apply(i.ownerDocument,r)!==!1||"click"===g&&b.nodeName(i,"a")||!b.acceptData(i)||!u||!i[g]||b.isWindow(i))){f=i[u],f&&(i[u]=null),b.event.triggered=g;try{i[g]()}catch(v){}b.event.triggered=t,f&&(i[u]=f)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,o,a,s=[],u=h.call(arguments),l=(b._data(this,"events")||{})[e.type]||[],c=b.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=b.event.handlers.call(this,e,l),n=0;while((o=s[n++])&&!e.isPropagationStopped()){e.currentTarget=o.elem,a=0;while((i=o.handlers[a++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(o=[],a=0;u>a;a++)i=n[a],r=i.selector+" ",o[r]===t&&(o[r]=i.needsContext?b(r,this).index(l)>=0:b.find(r,this,null,[l]).length),o[r]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return n.length>u&&s.push({elem:this,handlers:n.slice(u)}),s},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,a=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new b.Event(a),t=r.length;while(t--)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,a,s=n.button,u=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||o,a=i.documentElement,r=i.body,e.pageX=n.clientX+(a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==o.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===o.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;
return(!i||i!==r&&!b.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,"form")?!1:(b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,"form")?!1:(b.event.remove(this,"._submit"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return b().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){var n,r,i,o,a,s,u,l,c,p,f,d,h,g,m,y,v,x="sizzle"+-new Date,w=e.document,T={},N=0,C=0,k=it(),E=it(),S=it(),A=typeof t,j=1<<31,D=[],L=D.pop,H=D.push,q=D.slice,M=D.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},_="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=F.replace("w","w#"),B="([*^$|!~]?=)",P="\\["+_+"*("+F+")"+_+"*(?:"+B+_+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+O+")|)|)"+_+"*\\]",R=":("+F+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+P.replace(3,8)+")*)|.*)\\)|)",W=RegExp("^"+_+"+|((?:^|[^\\\\])(?:\\\\.)*)"+_+"+$","g"),$=RegExp("^"+_+"*,"+_+"*"),I=RegExp("^"+_+"*([\\x20\\t\\r\\n\\f>+~])"+_+"*"),z=RegExp(R),X=RegExp("^"+O+"$"),U={ID:RegExp("^#("+F+")"),CLASS:RegExp("^\\.("+F+")"),NAME:RegExp("^\\[name=['\"]?("+F+")['\"]?\\]"),TAG:RegExp("^("+F.replace("w","w*")+")"),ATTR:RegExp("^"+P),PSEUDO:RegExp("^"+R),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+_+"*(even|odd|(([+-]|)(\\d*)n|)"+_+"*(?:([+-]|)"+_+"*(\\d+)|))"+_+"*\\)|)","i"),needsContext:RegExp("^"+_+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+_+"*((?:-\\d)?\\d*)"+_+"*\\)|)(?=[^-]|$)","i")},V=/[\x20\t\r\n\f]*[+~]/,Y=/^[^{]+\{\s*\[native code/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,G=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,K=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{q.call(w.documentElement.childNodes,0)[0].nodeType}catch(nt){q=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}function rt(e){return Y.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function ot(e){return e[x]=!0,e}function at(e){var t=p.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function st(e,t,n,r){var i,o,a,s,u,l,f,g,m,v;if((t?t.ownerDocument||t:w)!==p&&c(t),t=t||p,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(!d&&!r){if(i=J.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&y(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return H.apply(n,q.call(t.getElementsByTagName(e),0)),n;if((a=i[3])&&T.getByClassName&&t.getElementsByClassName)return H.apply(n,q.call(t.getElementsByClassName(a),0)),n}if(T.qsa&&!h.test(e)){if(f=!0,g=x,m=t,v=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){l=ft(e),(f=t.getAttribute("id"))?g=f.replace(K,"\\$&"):t.setAttribute("id",g),g="[id='"+g+"'] ",u=l.length;while(u--)l[u]=g+dt(l[u]);m=V.test(e)&&t.parentNode||t,v=l.join(",")}if(v)try{return H.apply(n,q.call(m.querySelectorAll(v),0)),n}catch(b){}finally{f||t.removeAttribute("id")}}}return wt(e.replace(W,"$1"),t,n,r)}a=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},c=st.setDocument=function(e){var n=e?e.ownerDocument||e:w;return n!==p&&9===n.nodeType&&n.documentElement?(p=n,f=n.documentElement,d=a(n),T.tagNameNoComments=at(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),T.attributes=at(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),T.getByClassName=at(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),T.getByName=at(function(e){e.id=x+0,e.innerHTML="<a name='"+x+"'></a><div name='"+x+"'></div>",f.insertBefore(e,f.firstChild);var t=n.getElementsByName&&n.getElementsByName(x).length===2+n.getElementsByName(x+0).length;return T.getIdNotName=!n.getElementById(x),f.removeChild(e),t}),i.attrHandle=at(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==A&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},T.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==A&&!d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==A&&!d){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==A&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=T.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},i.find.NAME=T.getByName&&function(e,n){return typeof n.getElementsByName!==A?n.getElementsByName(name):t},i.find.CLASS=T.getByClassName&&function(e,n){return typeof n.getElementsByClassName===A||d?t:n.getElementsByClassName(e)},g=[],h=[":focus"],(T.qsa=rt(n.querySelectorAll))&&(at(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||h.push("\\["+_+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||h.push(":checked")}),at(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&h.push("[*^$]="+_+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||h.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),h.push(",.*:")})),(T.matchesSelector=rt(m=f.matchesSelector||f.mozMatchesSelector||f.webkitMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&at(function(e){T.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),g.push("!=",R)}),h=RegExp(h.join("|")),g=RegExp(g.join("|")),y=rt(f.contains)||f.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},v=f.compareDocumentPosition?function(e,t){var r;return e===t?(u=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||y(w,e)?-1:t===n||y(w,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return u=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:0;if(o===a)return ut(e,t);r=e;while(r=r.parentNode)s.unshift(r);r=t;while(r=r.parentNode)l.unshift(r);while(s[i]===l[i])i++;return i?ut(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},u=!1,[0,0].sort(v),T.detectDuplicates=u,p):p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&c(e),t=t.replace(Z,"='$1']"),!(!T.matchesSelector||d||g&&g.test(t)||h.test(t)))try{var n=m.call(e,t);if(n||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&c(e),y(e,t)},st.attr=function(e,t){var n;return(e.ownerDocument||e)!==p&&c(e),d||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):d||T.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},st.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},st.uniqueSort=function(e){var t,n=[],r=1,i=0;if(u=!T.detectDuplicates,e.sort(v),u){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e};function ut(e,t){var n=t&&e,r=n&&(~t.sourceIndex||j)-(~e.sourceIndex||j);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function pt(e){return ot(function(t){return t=+t,ot(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}o=st.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},i=st.selectors={cacheLength:50,createPseudo:ot,match:U,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return U.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&z.test(n)&&(t=ft(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[e+" "];return t||(t=RegExp("(^|"+_+")"+e+"("+_+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(m){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){c=m[x]||(m[x]={}),l=c[e]||[],d=l[0]===N&&l[1],f=l[0]===N&&l[2],p=d&&m.childNodes[d];while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if(1===p.nodeType&&++f&&p===t){c[e]=[N,d,f];break}}else if(v&&(l=(t[x]||(t[x]={}))[e])&&l[0]===N)f=l[1];else while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(v&&((p[x]||(p[x]={}))[e]=[N,f]),p===t))break;return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);return r[x]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ot(function(e,n){var i,o=r(e,t),a=o.length;while(a--)i=M.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ot(function(e){var t=[],n=[],r=s(e.replace(W,"$1"));return r[x]?ot(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:ot(function(e){return function(t){return st(e,t).length>0}}),contains:ot(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:ot(function(e){return X.test(e||"")||st.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=d?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[0>n?n+t:n]}),even:pt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:pt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=lt(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=ct(n);function ft(e,t){var n,r,o,a,s,u,l,c=E[e+" "];if(c)return t?0:c.slice(0);s=e,u=[],l=i.preFilter;while(s){(!n||(r=$.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),n=!1,(r=I.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(W," ")}),s=s.slice(n.length));for(a in i.filter)!(r=U[a].exec(s))||l[a]&&!(r=l[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?st.error(e):E(e,u).slice(0)}function dt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function ht(e,t,n){var i=t.dir,o=n&&"parentNode"===i,a=C++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var u,l,c,p=N+" "+a;if(s){while(t=t[i])if((1===t.nodeType||o)&&e(t,n,s))return!0}else while(t=t[i])if(1===t.nodeType||o)if(c=t[x]||(t[x]={}),(l=c[i])&&l[0]===p){if((u=l[1])===!0||u===r)return u===!0}else if(l=c[i]=[p],l[1]=e(t,n,s)||r,l[1]===!0)return!0}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var o,a=[],s=0,u=e.length,l=null!=t;for(;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s));return a}function yt(e,t,n,r,i,o){return r&&!r[x]&&(r=yt(r)),i&&!i[x]&&(i=yt(i,o)),ot(function(o,a,s,u){var l,c,p,f=[],d=[],h=a.length,g=o||xt(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:mt(g,f,e,s,u),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,u),r){l=mt(y,d),r(l,[],s,u),c=l.length;while(c--)(p=l[c])&&(y[d[c]]=!(m[d[c]]=p))}if(o){if(i||e){if(i){l=[],c=y.length;while(c--)(p=y[c])&&l.push(m[c]=p);i(null,y=[],l,u)}c=y.length;while(c--)(p=y[c])&&(l=i?M.call(o,p):f[c])>-1&&(o[l]=!(a[l]=p))}}else y=mt(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function vt(e){var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],u=a?1:0,c=ht(function(e){return e===t},s,!0),p=ht(function(e){return M.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;o>u;u++)if(n=i.relative[e[u].type])f=[ht(gt(f),n)];else{if(n=i.filter[e[u].type].apply(null,e[u].matches),n[x]){for(r=++u;o>r;r++)if(i.relative[e[r].type])break;return yt(u>1&&gt(f),u>1&&dt(e.slice(0,u-1)).replace(W,"$1"),n,r>u&&vt(e.slice(u,r)),o>r&&vt(e=e.slice(r)),o>r&&dt(e))}f.push(n)}return gt(f)}function bt(e,t){var n=0,o=t.length>0,a=e.length>0,s=function(s,u,c,f,d){var h,g,m,y=[],v=0,b="0",x=s&&[],w=null!=d,T=l,C=s||a&&i.find.TAG("*",d&&u.parentNode||u),k=N+=null==T?1:Math.random()||.1;for(w&&(l=u!==p&&u,r=n);null!=(h=C[b]);b++){if(a&&h){g=0;while(m=e[g++])if(m(h,u,c)){f.push(h);break}w&&(N=k,r=++n)}o&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,o&&b!==v){g=0;while(m=t[g++])m(x,y,u,c);if(s){if(v>0)while(b--)x[b]||y[b]||(y[b]=L.call(f));y=mt(y)}H.apply(f,y),w&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(f)}return w&&(N=k,l=T),x};return o?ot(s):s}s=st.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){t||(t=ft(e)),n=t.length;while(n--)o=vt(t[n]),o[x]?r.push(o):i.push(o);o=S(e,bt(i,r))}return o};function xt(e,t,n){var r=0,i=t.length;for(;i>r;r++)st(e,t[r],n);return n}function wt(e,t,n,r){var o,a,u,l,c,p=ft(e);if(!r&&1===p.length){if(a=p[0]=p[0].slice(0),a.length>2&&"ID"===(u=a[0]).type&&9===t.nodeType&&!d&&i.relative[a[1].type]){if(t=i.find.ID(u.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(a.shift().value.length)}o=U.needsContext.test(e)?0:a.length;while(o--){if(u=a[o],i.relative[l=u.type])break;if((c=i.find[l])&&(r=c(u.matches[0].replace(et,tt),V.test(a[0].type)&&t.parentNode||t))){if(a.splice(o,1),e=r.length&&dt(a),!e)return H.apply(n,q.call(r,0)),n;break}}}return s(e,p)(r,t,d,n,V.test(e)),n}i.pseudos.nth=i.pseudos.eq;function Tt(){}i.filters=Tt.prototype=i.pseudos,i.setFilters=new Tt,c(),st.attr=b.attr,b.find=st,b.expr=st.selectors,b.expr[":"]=b.expr.pseudos,b.unique=st.uniqueSort,b.text=st.getText,b.isXMLDoc=st.isXML,b.contains=st.contains}(e);var at=/Until$/,st=/^(?:parents|prev(?:Until|All))/,ut=/^.[^:#\[\.,]*$/,lt=b.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if("string"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1))},filter:function(e){return this.pushStack(ft(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?lt.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,o=[],a=lt.test(e)||"string"!=typeof e?b(e,t||this.context):0;for(;i>r;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&11!==n.nodeType){if(a?a.index(n)>-1:b.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}}return this.pushStack(o.length>1?b.unique(o):o)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack;function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return pt(e,"nextSibling")},prev:function(e){return pt(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return at.test(e)||(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!ct[e]?b.unique(i):i,this.length>1&&st.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!b(o).is(r)))1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});function ft(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(ut.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function dt(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+ht+")[\\s/>]","i"),yt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,xt=/<tbody/i,wt=/<|&#?\w+;/,Tt=/<(?:script|style|link)/i,Nt=/^(?:checkbox|radio)$/i,Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^$|\/(?:java|ecma)script/i,Et=/^true\/(.*)/,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},jt=dt(o),Dt=jt.appendChild(o.createElement("div"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(Ot(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Mt(Ot(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&b.cleanData(Ot(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,""):t;if(!("string"!=typeof e||Tt.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(Ot(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||"string"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=f.apply([],e);var i,o,a,s,u,l,c=0,p=this.length,d=this,h=p-1,g=e[0],m=b.isFunction(g);if(m||!(1>=p||"string"!=typeof g||b.support.checkClone)&&Ct.test(g))return this.each(function(i){var o=d.eq(i);m&&(e[0]=g.call(this,i,n?o.html():t)),o.domManip(e,n,r)});if(p&&(l=b.buildFragment(e,this[0].ownerDocument,!1,this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(n=n&&b.nodeName(i,"tr"),s=b.map(Ot(l,"script"),Ht),a=s.length;p>c;c++)o=l,c!==h&&(o=b.clone(o,!0,!0),a&&b.merge(s,Ot(o,"script"))),r.call(n&&b.nodeName(this[c],"table")?Lt(this[c],"tbody"):this[c],o,c);if(a)for(u=s[s.length-1].ownerDocument,b.map(s,qt),c=0;a>c;c++)o=s[c],kt.test(o.type||"")&&!b._data(o,"globalEval")&&b.contains(u,o)&&(o.src?b.ajax({url:o.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((o.text||o.textContent||o.innerHTML||"").replace(St,"")));l=i=null}return this}});function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Ht(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Mt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function _t(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,o=b._data(e),a=b._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)b.event.add(t,n,s[n][r])}a.data&&(a.data=b.extend({},a.data))}}function Ft(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}"script"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Nt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],o=b(e),a=o.length-1;for(;a>=r;r++)n=r===a?this:this.clone(!0),b(o[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}});function Ot(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||b.nodeName(o,n)?s.push(o):b.merge(s,Ot(o,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],s):s}function Bt(e){Nt.test(e.type)&&(e.defaultChecked=e.checked)}b.extend({clone:function(e,t,n){var r,i,o,a,s,u=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=Ot(o),s=Ot(e),a=0;null!=(i=s[a]);++a)r[a]&&Ft(i,r[a]);if(t)if(n)for(s=s||Ot(e),r=r||Ot(o),a=0;null!=(i=s[a]);a++)_t(i,r[a]);else _t(e,o);return r=Ot(o,"script"),r.length>0&&Mt(r,!u&&Ot(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){var i,o,a,s,u,l,c,p=e.length,f=dt(t),d=[],h=0;for(;p>h;h++)if(o=e[h],o||0===o)if("object"===b.type(o))b.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){s=s||f.appendChild(t.createElement("div")),u=(bt.exec(o)||["",""])[1].toLowerCase(),c=At[u]||At._default,s.innerHTML=c[1]+o.replace(vt,"<$1></$2>")+c[2],i=c[0];while(i--)s=s.lastChild;if(!b.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!b.support.tbody){o="table"!==u||xt.test(o)?"<table>"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;while(i--)b.nodeName(l=o.childNodes[i],"tbody")&&!l.childNodes.length&&o.removeChild(l)
}b.merge(d,s.childNodes),s.textContent="";while(s.firstChild)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));s&&f.removeChild(s),b.support.appendChecked||b.grep(Ot(d,"input"),Bt),h=0;while(o=d[h++])if((!r||-1===b.inArray(o,r))&&(a=b.contains(o.ownerDocument,o),s=Ot(f.appendChild(o),"script"),a&&Mt(s),n)){i=0;while(o=s[i++])kt.test(o.type||"")&&n.push(o)}return s=null,f},cleanData:function(e,t){var n,r,o,a,s=0,u=b.expando,l=b.cache,p=b.support.deleteExpando,f=b.event.special;for(;null!=(n=e[s]);s++)if((t||b.acceptData(n))&&(o=n[u],a=o&&l[o])){if(a.events)for(r in a.events)f[r]?b.event.remove(n,r):b.removeEvent(n,r,a.handle);l[o]&&(delete l[o],p?delete n[u]:typeof n.removeAttribute!==i?n.removeAttribute(u):n[u]=null,c.push(o))}}});var Pt,Rt,Wt,$t=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp("^("+x+")(.*)$","i"),Yt=RegExp("^("+x+")(?!px)[a-z%]+$","i"),Jt=RegExp("^([+-])=("+x+")","i"),Gt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,o=[],a=0,s=e.length;for(;s>a;a++)r=e[a],r.style&&(o[a]=b._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(o[a]=b._data(r,"olddisplay",un(r.nodeName)))):o[a]||(i=nn(r),(n&&"none"!==n||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,o,a={},s=0;if(b.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=b.css(e,n[s],!1,o);return a}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=b.camelCase(n),l=e.style;if(n=b.cssProps[u]||(b.cssProps[u]=tn(l,u)),s=b.cssHooks[n]||b.cssHooks[u],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:l[n];if(a=typeof r,"string"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(b.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||b.cssNumber[u]||(r+="px"),b.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(l[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{l[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,u=b.camelCase(n);return n=b.cssProps[u]||(b.cssProps[u]=tn(e.style,u)),s=b.cssHooks[n]||b.cssHooks[u],s&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),"normal"===a&&n in Kt&&(a=Kt[n]),""===r||r?(o=parseFloat(a),r===!0||b.isNumeric(o)?o||0:a):a},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(""!==u||b.contains(e.ownerDocument,e)||(u=b.style(e,n)),Yt.test(u)&&Ut.test(n)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):o.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s[n]:t,l=e.style;return null==u&&l&&l[n]&&(u=l[n]),Yt.test(u)&&!zt.test(n)&&(i=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left="fontSize"===n?"1em":u,u=l.pixelLeft+"px",l.left=i,a&&(o.left=a)),""===u?"auto":u});function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function an(e,t,n,r,i){var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;for(;4>o;o+=2)"margin"===n&&(a+=b.css(e,n+Zt[o],!0,i)),r?("content"===n&&(a-=b.css(e,"padding"+Zt[o],!0,i)),"margin"!==n&&(a-=b.css(e,"border"+Zt[o]+"Width",!0,i))):(a+=b.css(e,"padding"+Zt[o],!0,i),"padding"!==n&&(a+=b.css(e,"border"+Zt[o]+"Width",!0,i)));return a}function sn(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?"border":"content"),r,o)+"px"}function un(e){var t=o,n=Gt[e];return n||(n=ln(e,t),"none"!==n&&n||(Pt=(Pt||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=ln(e,t),Pt.detach()),Gt[e]=n),n}function ln(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}b.each(["height","width"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,"display"))?b.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===b.trim(o.replace($t,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+" "+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:"inline-block"},Wt,[e,"marginRight"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?b(e).position()[n]+"px":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||b.css(e,"display"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},o="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(b.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\[\]$/,fn=/\r?\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Nt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(fn,"\r\n")}}):{name:t.name,value:n.replace(fn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],o=function(e,t){t=b.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join("&").replace(cn,"+")};function gn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==b.type(t))r(e,t);else for(i in t)gn(e+"["+i+"]",t[i],n,r)}b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,yn,vn=b.now(),bn=/\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Nn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Cn=/^(?:GET|HEAD)$/,kn=/^\/\//,En=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Sn=b.fn.load,An={},jn={},Dn="*/".concat("*");try{yn=a.href}catch(Ln){yn=o.createElement("a"),yn.href="",yn=yn.href}mn=En.exec(yn.toLowerCase())||[];function Hn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(w)||[];if(b.isFunction(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){var o={},a=e===jn;function s(u){var l;return o[u]=!0,b.each(e[u]||[],function(e,u){var c=u(n,r,i);return"string"!=typeof c||a||o[c]?a?!(l=c):t:(n.dataTypes.unshift(c),s(c),!1)}),l}return s(n.dataTypes[0])||!o["*"]&&s("*")}function Mn(e,n){var r,i,o=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}b.fn.load=function(e,n,r){if("string"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,u=e.indexOf(" ");return u>=0&&(i=e.slice(u,e.length),e=e.slice(0,u)),b.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&b.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,s.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,o){return b.isFunction(r)&&(o=o||i,i=r,r=t),b.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:"GET",isLocal:Nn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Mn(Mn(e,b.ajaxSettings),t):Mn(b.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,u,l,c,p=b.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?b(f):b.event,h=b.Deferred(),g=b.Callbacks("once memory"),m=p.statusCode||{},y={},v={},x=0,T="canceled",N={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else N.always(e[N.status]);return this},abort:function(e){var t=e||T;return l&&l.abort(t),k(0,t),this}};if(h.promise(N).complete=g.add,N.success=N.done,N.error=N.fail,p.url=((e||p.url||yn)+"").replace(xn,"").replace(kn,mn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=b.trim(p.dataType||"*").toLowerCase().match(w)||[""],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?80:443))==(mn[3]||("http:"===mn[1]?80:443)))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=b.param(p.data,p.traditional)),qn(An,p,n,N),2===x)return N;u=p.global,u&&0===b.active++&&b.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Cn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,"$1_="+vn++):o+(bn.test(o)?"&":"?")+"_="+vn++)),p.ifModified&&(b.lastModified[o]&&N.setRequestHeader("If-Modified-Since",b.lastModified[o]),b.etag[o]&&N.setRequestHeader("If-None-Match",b.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&N.setRequestHeader("Content-Type",p.contentType),N.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Dn+"; q=0.01":""):p.accepts["*"]);for(i in p.headers)N.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,N,p)===!1||2===x))return N.abort();T="abort";for(i in{success:1,error:1,complete:1})N[i](p[i]);if(l=qn(jn,p,n,N)){N.readyState=1,u&&d.trigger("ajaxSend",[N,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){N.abort("timeout")},p.timeout));try{x=1,l.send(y,k)}catch(C){if(!(2>x))throw C;k(-1,C)}}else k(-1,"No Transport");function k(e,n,r,i){var c,y,v,w,T,C=n;2!==x&&(x=2,s&&clearTimeout(s),l=t,a=i||"",N.readyState=e>0?4:0,r&&(w=_n(p,N,r)),e>=200&&300>e||304===e?(p.ifModified&&(T=N.getResponseHeader("Last-Modified"),T&&(b.lastModified[o]=T),T=N.getResponseHeader("etag"),T&&(b.etag[o]=T)),204===e?(c=!0,C="nocontent"):304===e?(c=!0,C="notmodified"):(c=Fn(p,w),C=c.state,y=c.data,v=c.error,c=!v)):(v=C,(e||!C)&&(C="error",0>e&&(e=0))),N.status=e,N.statusText=(n||C)+"",c?h.resolveWith(f,[y,C,N]):h.rejectWith(f,[N,C,v]),N.statusCode(m),m=t,u&&d.trigger(c?"ajaxSuccess":"ajaxError",[N,p,c?y:v]),g.fireWith(f,[N,C]),u&&(d.trigger("ajaxComplete",[N,p]),--b.active||b.event.trigger("ajaxStop")))}return N},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}});function _n(e,n,r){var i,o,a,s,u=e.contents,l=e.dataTypes,c=e.responseFields;for(s in c)s in r&&(n[c[s]]=r[s]);while("*"===l[0])l.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in u)if(u[s]&&u[s].test(o)){l.unshift(s);break}if(l[0]in r)a=l[0];else{for(s in r){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==l[0]&&l.unshift(a),r[a]):t}function Fn(e,t){var n,r,i,o,a={},s=0,u=e.dataTypes.slice(),l=u[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u[1])for(i in e.converters)a[i.toLowerCase()]=e.converters[i];for(;r=u[++s];)if("*"!==r){if("*"!==l&&l!==r){if(i=a[l+" "+r]||a["* "+r],!i)for(n in a)if(o=n.split(" "),o[1]===r&&(i=a[l+" "+o[0]]||a["* "+o[0]])){i===!0?i=a[n]:a[n]!==!0&&(r=o[0],u.splice(s--,0,r));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(c){return{state:"parsererror",error:i?c:"No conversion from "+l+" to "+r}}}l=r}return{state:"success",data:t}}b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||b("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var On=[],Bn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=On.pop()||b.expando+"_"+vn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,u=n.jsonp!==!1&&(Bn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Bn,"$1"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||b.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,On.push(o)),s&&b.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=b.ajaxSettings.xhr(),b.support.cors=!!Rn&&"withCredentials"in Rn,Rn=b.support.ajax=!!Rn,Rn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)u.setRequestHeader(s,i[s])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var s,l,c,p;try{if(r&&(i||4===u.readyState))if(r=t,a&&(u.onreadystatechange=b.noop,$n&&delete Pn[a]),i)4!==u.readyState&&u.abort();else{p={},s=u.status,l=u.getAllResponseHeaders(),"string"==typeof u.responseText&&(p.text=u.responseText);try{c=u.statusText}catch(f){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,l)},n.async?4===u.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},b(e).unload($n)),Pn[a]=r),u.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp("^(?:([+-])=|)("+x+")([a-z%]*)$","i"),Jn=/queueHooks$/,Gn=[nr],Qn={"*":[function(e,t){var n,r,i=this.createTween(e,t),o=Yn.exec(t),a=i.cur(),s=+a||0,u=1,l=20;if(o){if(n=+o[2],r=o[3]||(b.cssNumber[e]?"":"px"),"px"!==r&&s){s=b.css(i.elem,e,!0)||n||1;do u=u||".5",s/=u,b.style(i.elem,e,s+r);while(u!==(u=i.cur()/a)&&1!==u&&--l)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};function Kn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Qn[t]||[]).concat(Qn["*"]),i=0,o=r.length;for(;o>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,o=0,a=Gn.length,s=b.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;var t=Xn||Kn(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;for(;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(tr(c,l.opts.specialEasing);a>o;o++)if(r=Gn[o].call(l,e,c,l.opts))return r;return Zn(l,c),b.isFunction(l.opts.start)&&l.opts.start.call(e,l),b.fx.timer(b.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function tr(e,t){var n,r,i,o,a;for(i in e)if(r=b.camelCase(i),o=t[r],n=e[i],b.isArray(n)&&(o=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),a=b.cssHooks[r],a&&"expand"in a){n=a.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=o)}else t[r]=o}b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});function nr(e,t,n){var r,i,o,a,s,u,l,c,p,f=this,d=e.style,h={},g=[],m=e.nodeType&&nn(e);n.queue||(c=b._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,p=c.empty.fire,c.empty.fire=function(){c.unqueued||p()}),c.unqueued++,f.always(function(){f.always(function(){c.unqueued--,b.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==un(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",b.support.shrinkWrapBlocks||f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],Vn.exec(a)){if(delete t[i],u=u||"toggle"===a,a===(m?"hide":"show"))continue;g.push(i)}if(o=g.length){s=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in s&&(m=s.hidden),u&&(s.hidden=!m),m?b(e).show():f.done(function(){b(e).hide()}),f.done(function(){var t;b._removeData(e,"fxshow");for(t in h)b.style(e,t,h[t])});for(i=0;o>i;i++)r=g[i],l=f.createTween(r,m?s[r]:0),h[r]=s[r]||b.style(e,r),r in s||(s[r]=l.start,m&&(l.end=l.start,l.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),o=b.speed(t,n,r),a=function(){var t=er(this,b.extend({},e),o);a.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=b.timers,a=b._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=b.timers,a=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Un||(Un=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Un),Un=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return n=s.documentElement,b.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");"static"===r&&(e.style.position="relative");var i=b(e),o=i.offset(),a=b.css(e,"top"),s=b.css(e,"left"),u=("absolute"===r||"fixed"===r)&&b.inArray("auto",[a,s])>-1,l={},c={},p,f;u?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),b.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(l.top=t.top-o.top+p),null!=t.left&&(l.left=t.left-o.left+f),"using"in t?t.using.call(e,l):i.css(l)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===b.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.documentElement;while(e&&!b.nodeName(e,"html")&&"static"===b.css(e,"position"))e=e.offsetParent;return e||o.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?b(a).scrollLeft():o,r?o:b(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});function or(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return b.access(this,function(n,r,i){var o;return b.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?b.css(n,r,s):b.style(n,r,i,s)},n,a?i:t,a,null)}})}),e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})})(window);
; browserify_shim__define__module__export__(typeof $ != "undefined" ? $ : window.$);

}).call(global, undefined, undefined, undefined, undefined, function defineExport(ex) { module.exports = ex; });

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\kendo\\2014.3.1119\\kendo.web.min.js":[function(require,module,exports){
/*
* Kendo UI v2014.3.1119 (http://www.telerik.com/kendo-ui)
* Copyright 2014 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at
* http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
(function(f,define){define([],f)})(function(){!function(e,t,n){function i(){}function r(e,t){if(t)return"'"+e.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var n=e.charAt(0),i=e.substring(1);return"="===n?"+("+i+")+":":"===n?"+e("+i+")+":";"+e+";o+="}function o(e,t,n){return e+="",t=t||2,n=t-e.length,n?N[t].substring(0,n)+e:e}function a(e){var t=e.css(gt.support.transitions.css+"box-shadow")||e.css("box-shadow"),n=t?t.match(Tt)||[0,0,0,0,0]:[0,0,0,0,0],i=bt.max(+n[3],+(n[4]||0));return{left:-n[1]+i,right:+n[1]+i,bottom:+n[2]+i}}function s(t,n){var i,r,o,s,l,c,d,u,h=xt.browser,p="rtl"==t.css("direction");return t.parent().hasClass("k-animation-container")?(d=t.parent(".k-animation-container"),u=d[0].style,d.is(":hidden")&&d.show(),i=Ct.test(u.width)||Ct.test(u.height),i||d.css({width:t.outerWidth(),height:t.outerHeight(),boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"})):(r=a(t),o=t[0].style.width,s=t[0].style.height,l=Ct.test(o),c=Ct.test(s),h.opera&&(r.left=r.right=r.bottom=5),i=l||c,!l&&(!n||n&&o)&&(o=t.outerWidth()),!c&&(!n||n&&s)&&(s=t.outerHeight()),t.wrap(e("<div/>").addClass("k-animation-container").css({width:o,height:s,marginLeft:r.left*(p?1:-1),paddingLeft:r.left,paddingRight:r.right,paddingBottom:r.bottom})),i&&t.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})),h.msie&&bt.floor(h.version)<=7&&(t.css({zoom:1}),t.children(".k-menu").width(t.width())),t.parent()}function l(e){var t=1,n=arguments.length;for(t=1;n>t;t++)c(e,arguments[t]);return e}function c(e,t){var n,i,r,o,a,s=gt.data.ObservableArray,l=gt.data.LazyObservableArray,d=gt.data.DataSource,u=gt.data.HierarchicalDataSource;for(n in t)i=t[n],r=typeof i,o=r===Pt&&null!==i?i.constructor:null,o&&o!==Array&&o!==s&&o!==l&&o!==d&&o!==u?i instanceof Date?e[n]=new Date(i.getTime()):M(i.clone)?e[n]=i.clone():(a=e[n],e[n]=typeof a===Pt?a||{}:{},c(e[n],i)):r!==Ft&&(e[n]=i);return e}function d(e,t,i){for(var r in t)if(t.hasOwnProperty(r)&&t[r].test(e))return r;return i!==n?i:e}function u(e){return e.replace(/([a-z][A-Z])/g,function(e){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()})}function h(e){return e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})}function p(t,n){var i,r={};return document.defaultView&&document.defaultView.getComputedStyle?(i=document.defaultView.getComputedStyle(t,""),n&&e.each(n,function(e,t){r[t]=i.getPropertyValue(t)})):(i=t.currentStyle,n&&e.each(n,function(e,t){r[t]=i[h(t)]})),gt.size(r)||(r=i),r}function f(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&"toJSON"!=t&&n++;return n}function g(e,n,i){n||(n="offset");var r=e[n]();return xt.browser.msie&&(xt.pointers||xt.msPointers)&&!i&&(r.top-=t.pageYOffset-document.documentElement.scrollTop,r.left-=t.pageXOffset-document.documentElement.scrollLeft),r}function m(e){var t={};return vt("string"==typeof e?e.split(" "):e,function(e){t[e]=this}),t}function v(e){return new gt.effects.Element(e)}function _(e,t,n,i){return typeof e===Et&&(M(t)&&(i=t,t=400,n=!1),M(n)&&(i=n,n=!1),typeof t===zt&&(n=t,t=400),e={effects:e,duration:t,reverse:n,complete:i}),mt({effects:{},duration:400,reverse:!1,init:wt,teardown:wt,hide:!1},e,{completeCallback:e.complete,complete:wt})}function y(t,n,i,r,o){for(var a,s=0,l=t.length;l>s;s++)a=e(t[s]),a.queue(function(){U.promise(a,_(n,i,r,o))});return t}function w(e,t,n,i){return t&&(t=t.split(" "),vt(t,function(t,n){e.toggleClass(n,i)})),e}function b(e){return(""+e).replace(W,"&amp;").replace(j,"&lt;").replace($,"&gt;").replace(G,"&quot;").replace(q,"&#39;")}function k(e,t){var i;return 0===t.indexOf("data")&&(t=t.substring(4),t=t.charAt(0).toLowerCase()+t.substring(1)),t=t.replace(nt,"-$1"),i=e.getAttribute("data-"+gt.ns+t),null===i?i=n:"null"===i?i=null:"true"===i?i=!0:"false"===i?i=!1:Dt.test(i)?i=parseFloat(i):et.test(i)&&!tt.test(i)&&(i=Function("return ("+i+")")()),i}function x(t,i){var r,o,a={};for(r in i)o=k(t,r),o!==n&&(Z.test(r)&&(o=gt.template(e("#"+o).html())),a[r]=o);return a}function C(t,n){return e.contains(t,n)?-1:1}function S(){var t=e(this);return e.inArray(t.attr("data-"+gt.ns+"role"),["slider","rangeslider"])>-1||t.is(":visible")}function T(e,t){var n=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(n)?!e.disabled:"a"===n?e.href||t:t)&&D(e)}function D(t){return!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")||e.expr.filters.hidden(this)}).length}function A(e,t){return new A.fn.init(e,t)}var E,M,P,I,z,F,R,B,L,O,H,N,V,U,W,j,G,q,$,Y,K,Q,X,J,Z,et,tt,nt,it,rt,ot,at,st,lt,ct,dt,ut,ht,pt,ft,gt=t.kendo=t.kendo||{cultures:{}},mt=e.extend,vt=e.each,_t=e.isArray,yt=e.proxy,wt=e.noop,bt=Math,kt=t.JSON||{},xt={},Ct=/%/,St=/\{(\d+)(:[^\}]+)?\}/g,Tt=/(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+)?/i,Dt=/^(\+|-?)\d+(\.?)\d*$/,At="function",Et="string",Mt="number",Pt="object",It="null",zt="boolean",Ft="undefined",Rt={},Bt={},Lt=[].slice,Ot=t.Globalize;gt.version="2014.3.1119",i.extend=function(e){var t,n,i=function(){},r=this,o=e&&e.init?e.init:function(){r.apply(this,arguments)};i.prototype=r.prototype,n=o.fn=o.prototype=new i;for(t in e)n[t]=null!=e[t]&&e[t].constructor===Object?mt(!0,{},i.prototype[t],e[t]):e[t];return n.constructor=o,o.extend=r.extend,o},i.prototype._initOptions=function(e){this.options=l({},this.options,e)},M=gt.isFunction=function(e){return"function"==typeof e},P=function(){this._defaultPrevented=!0},I=function(){return this._defaultPrevented===!0},z=i.extend({init:function(){this._events={}},bind:function(e,t,i){var r,o,a,s,l,c=this,d=typeof e===Et?[e]:e,u=typeof t===At;if(t===n){for(r in e)c.bind(r,e[r]);return c}for(r=0,o=d.length;o>r;r++)e=d[r],s=u?t:t[e],s&&(i&&(a=s,s=function(){c.unbind(e,s),a.apply(c,arguments)},s.original=a),l=c._events[e]=c._events[e]||[],l.push(s));return c},one:function(e,t){return this.bind(e,t,!0)},first:function(e,t){var n,i,r,o,a=this,s=typeof e===Et?[e]:e,l=typeof t===At;for(n=0,i=s.length;i>n;n++)e=s[n],r=l?t:t[e],r&&(o=a._events[e]=a._events[e]||[],o.unshift(r));return a},trigger:function(e,t){var n,i,r=this,o=r._events[e];if(o){for(t=t||{},t.sender=r,t._defaultPrevented=!1,t.preventDefault=P,t.isDefaultPrevented=I,o=o.slice(),n=0,i=o.length;i>n;n++)o[n].call(r,t);return t._defaultPrevented===!0}return!1},unbind:function(e,t){var i,r=this,o=r._events[e];if(e===n)r._events={};else if(o)if(t)for(i=o.length-1;i>=0;i--)(o[i]===t||o[i].original===t)&&o.splice(i,1);else r._events[e]=[];return r}}),F=/^\w+/,R=/\$\{([^}]*)\}/g,B=/\\\}/g,L=/__CURLY__/g,O=/\\#/g,H=/__SHARP__/g,N=["","0","00","000","0000"],E={paramName:"data",useWithBlock:!0,render:function(e,t){var n,i,r="";for(n=0,i=t.length;i>n;n++)r+=e(t[n]);return r},compile:function(e,t){var n,i,o,a=mt({},this,t),s=a.paramName,l=s.match(F)[0],c=a.useWithBlock,d="var o,e=kendo.htmlEncode;";if(M(e))return e;for(d+=c?"with("+s+"){":"",d+="o=",i=e.replace(B,"__CURLY__").replace(R,"#=e($1)#").replace(L,"}").replace(O,"__SHARP__").split("#"),o=0;i.length>o;o++)d+=r(i[o],o%2===0);d+=c?";}":";",d+="return o;",d=d.replace(H,"#");try{return n=Function(l,d),n._slotCount=Math.floor(i.length/2),n}catch(u){throw Error(gt.format("Invalid template:'{0}' Generated code:'{1}'",e,d))}}},function(){function e(e){return a.lastIndex=0,a.test(e)?'"'+e.replace(a,function(e){var t=s[e];return typeof t===Et?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function t(o,a){var s,c,d,u,h,p,f=n,g=a[o];if(g&&typeof g===Pt&&typeof g.toJSON===At&&(g=g.toJSON(o)),typeof r===At&&(g=r.call(a,o,g)),p=typeof g,p===Et)return e(g);if(p===Mt)return isFinite(g)?g+"":It;if(p===zt||p===It)return g+"";if(p===Pt){if(!g)return It;if(n+=i,h=[],"[object Array]"===l.apply(g)){for(u=g.length,s=0;u>s;s++)h[s]=t(s,g)||It;return d=0===h.length?"[]":n?"[\n"+n+h.join(",\n"+n)+"\n"+f+"]":"["+h.join(",")+"]",n=f,d}if(r&&typeof r===Pt)for(u=r.length,s=0;u>s;s++)typeof r[s]===Et&&(c=r[s],d=t(c,g),d&&h.push(e(c)+(n?": ":":")+d));else for(c in g)Object.hasOwnProperty.call(g,c)&&(d=t(c,g),d&&h.push(e(c)+(n?": ":":")+d));return d=0===h.length?"{}":n?"{\n"+n+h.join(",\n"+n)+"\n"+f+"}":"{"+h.join(",")+"}",n=f,d}}var n,i,r,a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l={}.toString;typeof Date.prototype.toJSON!==At&&(Date.prototype.toJSON=function(){var e=this;return isFinite(e.valueOf())?o(e.getUTCFullYear(),4)+"-"+o(e.getUTCMonth()+1)+"-"+o(e.getUTCDate())+"T"+o(e.getUTCHours())+":"+o(e.getUTCMinutes())+":"+o(e.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),typeof kt.stringify!==At&&(kt.stringify=function(e,o,a){var s;if(n="",i="",typeof a===Mt)for(s=0;a>s;s+=1)i+=" ";else typeof a===Et&&(i=a);if(r=o,o&&typeof o!==At&&(typeof o!==Pt||typeof o.length!==Mt))throw Error("JSON.stringify");return t("",{"":e})})}(),function(){function t(e){if(e){if(e.numberFormat)return e;if(typeof e===Et){var t=gt.cultures;return t[e]||t[e.split("-")[0]]||null}return null}return null}function i(e){return e&&(e=t(e)),e||gt.cultures.current}function r(e){e.groupSizes=e.groupSize,e.percent.groupSizes=e.percent.groupSize,e.currency.groupSizes=e.currency.groupSize}function a(e,t,r){r=i(r);var a=r.calendars.standard,s=a.days,l=a.months;return t=a.patterns[t]||t,t.replace(d,function(t){var i,r,c;return"d"===t?r=e.getDate():"dd"===t?r=o(e.getDate()):"ddd"===t?r=s.namesAbbr[e.getDay()]:"dddd"===t?r=s.names[e.getDay()]:"M"===t?r=e.getMonth()+1:"MM"===t?r=o(e.getMonth()+1):"MMM"===t?r=l.namesAbbr[e.getMonth()]:"MMMM"===t?r=l.names[e.getMonth()]:"yy"===t?r=o(e.getFullYear()%100):"yyyy"===t?r=o(e.getFullYear(),4):"h"===t?r=e.getHours()%12||12:"hh"===t?r=o(e.getHours()%12||12):"H"===t?r=e.getHours():"HH"===t?r=o(e.getHours()):"m"===t?r=e.getMinutes():"mm"===t?r=o(e.getMinutes()):"s"===t?r=e.getSeconds():"ss"===t?r=o(e.getSeconds()):"f"===t?r=bt.floor(e.getMilliseconds()/100):"ff"===t?(r=e.getMilliseconds(),r>99&&(r=bt.floor(r/10)),r=o(r)):"fff"===t?r=o(e.getMilliseconds(),3):"tt"===t?r=e.getHours()<12?a.AM[0]:a.PM[0]:"zzz"===t?(i=e.getTimezoneOffset(),c=0>i,r=(""+bt.abs(i/60)).split(".")[0],i=bt.abs(i)-60*r,r=(c?"+":"-")+o(r),r+=":"+o(i)):("zz"===t||"z"===t)&&(r=e.getTimezoneOffset()/60,c=0>r,r=(""+bt.abs(r)).split(".")[0],r=(c?"+":"-")+("zz"===t?o(r):r)),r!==n?r:t.slice(1,t.length-1)})}function s(e,t,r){r=i(r);var o,a,s,c,d,w,b,k,x,C,S,T,D,A,E,M,P,I,z,F,R,B,L,O=r.numberFormat,H=O.groupSize[0],N=O[m],V=O[g],U=O.decimals,W=O.pattern[0],j=[],G=0>e,q=f,$=f,Y=-1;if(e===n)return f;if(!isFinite(e))return e;if(!t)return r.name.length?e.toLocaleString():""+e;if(d=u.exec(t)){if(t=d[1].toLowerCase(),a="c"===t,s="p"===t,(a||s)&&(O=a?O.currency:O.percent,H=O.groupSize[0],N=O[m],V=O[g],U=O.decimals,o=O.symbol,W=O.pattern[G?0:1]),c=d[2],c&&(U=+c),"e"===t)return c?e.toExponential(U):e.toExponential();if(s&&(e*=100),e=l(e,U),G=0>e,e=e.split(g),w=e[0],b=e[1],G&&(w=w.substring(1)),$=w,k=w.length,k>=H)for($=f,C=0;k>C;C++)C>0&&(k-C)%H===0&&($+=N),$+=w.charAt(C);if(b&&($+=V+b),"n"===t&&!G)return $;for(e=f,C=0,S=W.length;S>C;C++)T=W.charAt(C),e+="n"===T?$:"$"===T||"%"===T?o:T;return e}if(G&&(e=-e),(t.indexOf("'")>-1||t.indexOf('"')>-1||t.indexOf("\\")>-1)&&(t=t.replace(h,function(e){var t=e.charAt(0).replace("\\",""),n=e.slice(1).replace(t,"");return j.push(n),y})),t=t.split(";"),G&&t[1])t=t[1],A=!0;else if(0===e){if(t=t[2]||t[0],-1==t.indexOf(v)&&-1==t.indexOf(_))return t}else t=t[0];if(F=t.indexOf("%"),R=t.indexOf("$"),s=-1!=F,a=-1!=R,s&&(e*=100),a&&"\\"===t[R-1]&&(t=t.split("\\").join(""),a=!1),(a||s)&&(O=a?O.currency:O.percent,H=O.groupSize[0],N=O[m],V=O[g],U=O.decimals,o=O.symbol),D=t.indexOf(m)>-1,D&&(t=t.replace(p,f)),E=t.indexOf(g),S=t.length,-1!=E?(b=(""+e).split("e"),b=b[1]?l(e,Math.abs(b[1])):b[0],b=b.split(g)[1]||f,P=t.lastIndexOf(_)-E,M=t.lastIndexOf(v)-E,I=P>-1,z=M>-1,C=b.length,I||z||(t=t.substring(0,E)+t.substring(E+1),S=t.length,E=-1,C=0),I&&P>M?C=P:M>P&&(z&&C>M?C=M:I&&P>C&&(C=P)),C>-1&&(e=l(e,C))):e=l(e),M=t.indexOf(v),B=P=t.indexOf(_),Y=-1==M&&-1!=P?P:-1!=M&&-1==P?M:M>P?P:M,M=t.lastIndexOf(v),P=t.lastIndexOf(_),L=-1==M&&-1!=P?P:-1!=M&&-1==P?M:M>P?M:P,Y==S&&(L=Y),-1!=Y){if($=(""+e).split(g),w=$[0],b=$[1]||f,k=w.length,x=b.length,G&&-1*e>=0&&(G=!1),D)if(k===H&&E-B>k)w=N+w;else if(k>H){for($=f,C=0;k>C;C++)C>0&&(k-C)%H===0&&($+=N),$+=w.charAt(C);w=$}for(e=t.substring(0,Y),G&&!A&&(e+="-"),C=Y;S>C;C++){if(T=t.charAt(C),-1==E){if(k>L-C){e+=w;break}}else if(-1!=P&&C>P&&(q=f),k>=E-C&&E-C>-1&&(e+=w,C=E),E===C){e+=(b?V:f)+b,C+=L-E+1;continue}T===_?(e+=T,q=T):T===v&&(e+=q)}if(L>=Y&&(e+=t.substring(L+1)),a||s){for($=f,C=0,S=e.length;S>C;C++)T=e.charAt(C),$+="$"===T||"%"===T?o:T;e=$}if(S=j.length)for(C=0;S>C;C++)e=e.replace(y,j[C])}return e}var l,c,d=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g,u=/^(n|c|p|e)(\d*)$/i,h=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,p=/\,/g,f="",g=".",m=",",v="#",_="0",y="??",w="en-US",b={}.toString;gt.cultures["en-US"]={name:w,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0,twoDigitYearMax:2029}}},gt.culture=function(e){var i,o=gt.cultures;return e===n?o.current:(i=t(e)||o[w],i.calendar=i.calendars.standard,o.current=i,Ot&&!Ot.load&&r(i.numberFormat),n)},gt.findCulture=t,gt.getCulture=i,gt.culture(w),l=function(e,t){return t=t||0,e=(""+e).split("e"),e=Math.round(+(e[0]+"e"+(e[1]?+e[1]+t:t))),e=(""+e).split("e"),e=+(e[0]+"e"+(e[1]?+e[1]-t:-t)),e.toFixed(t)},c=function(e,t,i){if(t){if("[object Date]"===b.call(e))return a(e,t,i);if(typeof e===Mt)return s(e,t,i)}return e!==n?e:""},Ot&&!Ot.load&&(c=function(t,n,i){return e.isPlainObject(i)&&(i=i.name),Ot.format(t,n,i)}),gt.format=function(e){var t=arguments;return e.replace(St,function(e,n,i){var r=t[parseInt(n,10)+1];return c(r,i?i.substring(1):"")})},gt._extractFormat=function(e){return"{0:"===e.slice(0,3)&&(e=e.slice(3,e.length-1)),e},gt._activeElement=function(){try{return document.activeElement}catch(e){return document.documentElement.activeElement}},gt._round=l,gt.toString=c}(),function(){function t(e,t,n){return!(e>=t&&n>=e)}function i(e){return e.charAt(0)}function r(t){return e.map(t,i)}function o(e,t){t||23!==e.getHours()||e.setHours(e.getHours()+2)}function a(e){for(var t=0,n=e.length,i=[];n>t;t++)i[t]=(e[t]+"").toLowerCase();return i}function s(e){var t,n={};for(t in e)n[t]=a(e[t]);return n}function l(e,i,a){if(!e)return null;var l,c,d,u,f,g,m,_,y,w,b,k,x,C=function(e){for(var t=0;i[B]===e;)t++,B++;return t>0&&(B-=1),t},S=function(t){var n=v[t]||RegExp("^\\d{1,"+t+"}"),i=e.substr(L,t).match(n);return i?(i=i[0],L+=i.length,parseInt(i,10)):null},T=function(t,n){for(var i,r,o,a=0,s=t.length;s>a;a++)if(i=t[a],r=i.length,o=e.substr(L,r),n&&(o=o.toLowerCase()),o==i)return L+=r,a+1;return null},D=function(){var t=!1;return e.charAt(L)===i[B]&&(L++,t=!0),t},A=a.calendars.standard,E=null,M=null,P=null,I=null,z=null,F=null,R=null,B=0,L=0,O=!1,H=new Date,N=A.twoDigitYearMax||2029,V=H.getFullYear();for(i||(i="d"),u=A.patterns[i],u&&(i=u),i=i.split(""),d=i.length;d>B;B++)if(l=i[B],O)"'"===l?O=!1:D();else if("d"===l){if(c=C("d"),A._lowerDays||(A._lowerDays=s(A.days)),P=3>c?S(2):T(A._lowerDays[3==c?"namesAbbr":"names"],!0),null===P||t(P,1,31))return null}else if("M"===l){if(c=C("M"),A._lowerMonths||(A._lowerMonths=s(A.months)),M=3>c?S(2):T(A._lowerMonths[3==c?"namesAbbr":"names"],!0),null===M||t(M,1,12))return null;M-=1}else if("y"===l){if(c=C("y"),E=S(c),null===E)return null;2==c&&("string"==typeof N&&(N=V+parseInt(N,10)),E=V-V%100+E,E>N&&(E-=100))}else if("h"===l){if(C("h"),I=S(2),12==I&&(I=0),null===I||t(I,0,11))return null}else if("H"===l){if(C("H"),I=S(2),null===I||t(I,0,23))return null}else if("m"===l){if(C("m"),z=S(2),null===z||t(z,0,59))return null}else if("s"===l){if(C("s"),F=S(2),null===F||t(F,0,59))return null}else if("f"===l){if(c=C("f"),x=e.substr(L,c).match(v[3]),R=S(c),null!==R&&(x=x[0].length,3>x&&(R*=Math.pow(10,3-x)),c>3&&(R=parseInt((""+R).substring(0,3),10))),null===R||t(R,0,999))return null}else if("t"===l){if(c=C("t"),_=A.AM,y=A.PM,1===c&&(_=r(_),y=r(y)),f=T(y),!f&&!T(_))return null}else if("z"===l){if(g=!0,c=C("z"),"Z"===e.substr(L,1)){D();continue}if(m=e.substr(L,6).match(c>2?p:h),!m)return null;if(m=m[0].split(":"),w=m[0],b=m[1],!b&&w.length>3&&(L=w.length-2,b=w.substring(L),w=w.substring(0,L)),w=parseInt(w,10),t(w,-12,13))return null;if(c>2&&(b=parseInt(b,10),isNaN(b)||t(b,0,59)))return null}else if("'"===l)O=!0,D();else if(!D())return null;return k=null!==I||null!==z||F||null,null===E&&null===M&&null===P&&k?(E=V,M=H.getMonth(),P=H.getDate()):(null===E&&(E=V),null===P&&(P=1)),f&&12>I&&(I+=12),g?(w&&(I+=-w),b&&(z+=-b),e=new Date(Date.UTC(E,M,P,I,z,F,R))):(e=new Date(E,M,P,I,z,F,R),o(e,I)),100>E&&e.setFullYear(E),e.getDate()!==P&&g===n?null:e}function c(e){var t="-"===e.substr(0,1)?-1:1;return e=e.substring(1),e=60*parseInt(e.substr(0,2),10)+parseInt(e.substring(2),10),t*e}var d=/\u00A0/g,u=/[eE][\-+]?[0-9]+/,h=/[+|\-]\d{1,2}/,p=/[+|\-]\d{1,2}:?\d{2}/,f=/^\/Date\((.*?)\)\/$/,g=/[+-]\d*/,m=["G","g","d","F","D","y","m","T","t"],v={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},_={}.toString;gt.parseDate=function(e,t,n){var i,r,o,a,s;if("[object Date]"===_.call(e))return e;if(i=0,r=null,e&&0===e.indexOf("/D")&&(r=f.exec(e)))return r=r[1],s=g.exec(r.substring(1)),r=new Date(parseInt(r,10)),s&&(s=c(s[0]),r=gt.timezone.apply(r,0),r=gt.timezone.convert(r,0,-1*s)),r;if(n=gt.getCulture(n),!t){for(t=[],a=n.calendar.patterns,o=m.length;o>i;i++)t[i]=a[m[i]];i=0,t=["yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","ddd MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.fffffffzzz","yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mm:ss.fffffff","yyyy-MM-ddTHH:mm:ss.fff","yyyy-MM-ddTHH:mmzzz","yyyy-MM-ddTHH:mmzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd","HH:mm:ss","HH:mm"].concat(t)}for(t=_t(t)?t:[t],o=t.length;o>i;i++)if(r=l(e,t[i],n))return r;return r},gt.parseInt=function(e,t){var n=gt.parseFloat(e,t);return n&&(n=0|n),n},gt.parseFloat=function(e,t,n){if(!e&&0!==e)return null;if(typeof e===Mt)return e;e=""+e,t=gt.getCulture(t);var i,r,o=t.numberFormat,a=o.percent,s=o.currency,l=s.symbol,c=a.symbol,h=e.indexOf("-");return u.test(e)?(e=parseFloat(e.replace(o["."],".")),isNaN(e)&&(e=null),e):h>0?null:(h=h>-1,e.indexOf(l)>-1||n&&n.toLowerCase().indexOf("c")>-1?(o=s,i=o.pattern[0].replace("$",l).split("n"),e.indexOf(i[0])>-1&&e.indexOf(i[1])>-1&&(e=e.replace(i[0],"").replace(i[1],""),h=!0)):e.indexOf(c)>-1&&(r=!0,o=a,l=c),e=e.replace("-","").replace(l,"").replace(d," ").split(o[","].replace(d," ")).join("").replace(o["."],"."),e=parseFloat(e),isNaN(e)?e=null:h&&(e*=-1),e&&r&&(e/=100),e)},Ot&&!Ot.load&&(gt.parseDate=function(e,t,n){return"[object Date]"===_.call(e)?e:Ot.parseDate(e,t,n)},gt.parseFloat=function(t,i){return typeof t===Mt?t:t===n||null===t?null:(e.isPlainObject(i)&&(i=i.name),t=Ot.parseFloat(t,i),isNaN(t)?null:t)})}(),function(){var i,r,o,a,s,l,c;xt._scrollbar=n,xt.scrollbar=function(e){if(isNaN(xt._scrollbar)||e){var t,n=document.createElement("div");return n.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",n.innerHTML="&nbsp;",document.body.appendChild(n),xt._scrollbar=t=n.offsetWidth-n.scrollWidth,document.body.removeChild(n),t}return xt._scrollbar},xt.isRtl=function(t){return e(t).closest(".k-rtl").length>0},i=document.createElement("table");try{i.innerHTML="<tr><td></td></tr>",xt.tbodyInnerHtml=!0}catch(u){xt.tbodyInnerHtml=!1}xt.touch="ontouchstart"in t,xt.msPointers=t.MSPointerEvent,xt.pointers=t.PointerEvent,r=xt.transitions=!1,o=xt.transforms=!1,a="HTMLElement"in t?HTMLElement.prototype:[],xt.hasHW3D="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix||"MozPerspective"in document.documentElement.style||"msPerspective"in document.documentElement.style,vt(["Moz","webkit","O","ms"],function(){var e,t=""+this,a=typeof i.style[t+"Transition"]===Et;return a||typeof i.style[t+"Transform"]===Et?(e=t.toLowerCase(),o={css:"ms"!=e?"-"+e+"-":"",prefix:t,event:"o"===e||"webkit"===e?e:""},a&&(r=o,r.event=r.event?r.event+"TransitionEnd":"transitionend"),!1):n}),i=null,xt.transforms=o,xt.transitions=r,xt.devicePixelRatio=t.devicePixelRatio===n?1:t.devicePixelRatio;try{xt.screenWidth=t.outerWidth||t.screen?t.screen.availWidth:t.innerWidth,xt.screenHeight=t.outerHeight||t.screen?t.screen.availHeight:t.innerHeight}catch(u){xt.screenWidth=t.screen.availWidth,xt.screenHeight=t.screen.availHeight}xt.detectOS=function(e){var n,i,r=!1,o=[],a=!/mobile safari/i.test(e),s={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},l={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},c={tablet:/playbook|ipad|fire/i},u={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};for(i in s)if(s.hasOwnProperty(i)&&(o=e.match(s[i]))){if("windows"==i&&"plugins"in navigator)return!1;r={},r.device=i,r.tablet=d(i,c,!1),r.browser=d(e,u,"default"),r.name=d(i,l),r[r.name]=!0,r.majorVersion=o[2],r.minorVersion=o[3].replace("_","."),n=r.minorVersion.replace(".","").substr(0,2),r.flatVersion=r.majorVersion+n+Array(3-(3>n.length?n.length:2)).join("0"),r.cordova=typeof t.PhoneGap!==Ft||typeof t.cordova!==Ft,r.appMode=t.navigator.standalone||/file|local|wmapp/.test(t.location.protocol)||r.cordova,r.android&&(1.5>xt.devicePixelRatio&&400>r.flatVersion||a)&&(xt.screenWidth>800||xt.screenHeight>800)&&(r.tablet=i);break}return r},s=xt.mobileOS=xt.detectOS(navigator.userAgent),xt.wpDevicePixelRatio=s.wp?screen.width/320:0,xt.kineticScrollNeeded=s&&(xt.touch||xt.msPointers||xt.pointers),xt.hasNativeScrolling=!1,(s.ios||s.android&&s.majorVersion>2||s.wp)&&(xt.hasNativeScrolling=s),xt.mouseAndTouchPresent=xt.touch&&!(xt.mobileOS.ios||xt.mobileOS.android),xt.detectBrowser=function(e){var t,n=!1,i=[],r={webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(t in r)if(r.hasOwnProperty(t)&&(i=e.match(r[t]))){n={},n[t]=!0,n[i[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,n.version=parseInt(document.documentMode||i[2],10);break}return n},xt.browser=xt.detectBrowser(navigator.userAgent),xt.zoomLevel=function(){try{return xt.touch?document.documentElement.clientWidth/t.innerWidth:xt.browser.msie&&xt.browser.version>=10?(top||t).document.documentElement.offsetWidth/(top||t).innerWidth:1}catch(e){return 1}},xt.cssBorderSpacing=n!==document.documentElement.style.borderSpacing&&!(xt.browser.msie&&8>xt.browser.version),function(t){var n="",i=e(document.documentElement),r=parseInt(t.version,10);t.msie?n="ie":t.mozilla?n="ff":t.safari?n="safari":t.webkit?n="webkit":t.opera&&(n="opera"),n&&(n="k-"+n+" k-"+n+r),xt.mobileOS&&(n+=" k-mobile"),i.addClass(n)}(xt.browser),xt.eventCapture=document.documentElement.addEventListener,l=document.createElement("input"),xt.placeholder="placeholder"in l,xt.propertyChangeEvent="onpropertychange"in l,xt.input=function(){for(var e,t=["number","date","time","month","week","datetime","datetime-local"],n=t.length,i="test",r={},o=0;n>o;o++)e=t[o],l.setAttribute("type",e),l.value=i,r[e.replace("-","")]="text"!==l.type&&l.value!==i;return r}(),l.style.cssText="float:left;",xt.cssFloat=!!l.style.cssFloat,l=null,xt.stableSort=function(){var e,t=513,n=[{index:0,field:"b"}];for(e=1;t>e;e++)n.push({index:e,field:"a"});return n.sort(function(e,t){return e.field>t.field?1:t.field>e.field?-1:0}),1===n[0].index}(),xt.matchesSelector=a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.matchesSelector||a.matches||function(t){for(var n=document.querySelectorAll?(this.parentNode||document).querySelectorAll(t)||[]:e(t),i=n.length;i--;)if(n[i]==this)return!0;return!1},xt.pushState=t.history&&t.history.pushState,c=document.documentMode,xt.hashChange="onhashchange"in t&&!(xt.browser.msie&&(!c||8>=c))}(),V={left:{reverse:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},"in":{reverse:"out"},out:{reverse:"in"}},U={},e.extend(U,{enabled:!0,Element:function(t){this.element=e(t)},promise:function(e,t){e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.hide&&e.data("olddisplay",e.css("display")).hide(),t.init&&t.init(),t.completeCallback&&t.completeCallback(e),e.dequeue()},disable:function(){this.enabled=!1,this.promise=this.promiseShim},enable:function(){this.enabled=!0,this.promise=this.animatedPromise}}),U.promiseShim=U.promise,"kendoAnimate"in e.fn||mt(e.fn,{kendoStop:function(e,t){return this.stop(e,t)},kendoAnimate:function(e,t,n,i){return y(this,e,t,n,i)},kendoAddClass:function(e,t){return gt.toggleClass(this,e,t,!0)},kendoRemoveClass:function(e,t){return gt.toggleClass(this,e,t,!1)},kendoToggleClass:function(e,t,n){return gt.toggleClass(this,e,t,n)}}),W=/&/g,j=/</g,G=/"/g,q=/'/g,$=/>/g,Y=function(e){return e.target},xt.touch&&(Y=function(e){var t="originalEvent"in e?e.originalEvent.changedTouches:"changedTouches"in e?e.changedTouches:null;return t?document.elementFromPoint(t[0].clientX,t[0].clientY):e.target},vt(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],function(t,n){e.fn[n]=function(e){return this.bind(n,e)}})),xt.touch?xt.mobileOS?(xt.mousedown="touchstart",xt.mouseup="touchend",xt.mousemove="touchmove",xt.mousecancel="touchcancel",xt.click="touchend",xt.resize="orientationchange"):(xt.mousedown="mousedown touchstart",xt.mouseup="mouseup touchend",xt.mousemove="mousemove touchmove",xt.mousecancel="mouseleave touchcancel",xt.click="click",xt.resize="resize"):xt.pointers?(xt.mousemove="pointermove",xt.mousedown="pointerdown",xt.mouseup="pointerup",xt.mousecancel="pointercancel",xt.click="pointerup",xt.resize="orientationchange resize"):xt.msPointers?(xt.mousemove="MSPointerMove",xt.mousedown="MSPointerDown",xt.mouseup="MSPointerUp",xt.mousecancel="MSPointerCancel",xt.click="MSPointerUp",xt.resize="orientationchange resize"):(xt.mousemove="mousemove",xt.mousedown="mousedown",xt.mouseup="mouseup",xt.mousecancel="mouseleave",xt.click="click",xt.resize="resize"),K=function(e,t){var n,i,r,o,a=t||"d",s=1;for(i=0,r=e.length;r>i;i++)o=e[i],""!==o&&(n=o.indexOf("["),0!==n&&(-1==n?o="."+o:(s++,o="."+o.substring(0,n)+" || {})"+o.substring(n))),s++,a+=o+(r-1>i?" || {})":")"));return Array(s).join("(")+a},Q=/^([a-z]+:)?\/\//i,mt(gt,{ui:gt.ui||{},fx:gt.fx||v,effects:gt.effects||U,mobile:gt.mobile||{},data:gt.data||{},dataviz:gt.dataviz||{},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110},support:gt.support||xt,animate:gt.animate||y,ns:"",attr:function(e){return"data-"+gt.ns+e},getShadows:a,wrap:s,deepExtend:l,getComputedStyles:p,size:f,toCamelCase:h,toHyphens:u,getOffset:gt.getOffset||g,parseEffects:gt.parseEffects||m,toggleClass:gt.toggleClass||w,directions:gt.directions||V,Observable:z,Class:i,Template:E,template:yt(E.compile,E),render:yt(E.render,E),stringify:yt(kt.stringify,kt),eventTarget:Y,htmlEncode:b,isLocalUrl:function(e){return e&&!Q.test(e)},expr:function(e,t,n){return e=e||"",typeof t==Et&&(n=t,t=!1),n=n||"d",e&&"["!==e.charAt(0)&&(e="."+e),e=t?K(e.split("."),n):n+e},getter:function(e,t){var n=e+t;return Rt[n]=Rt[n]||Function("d","return "+gt.expr(e,t))},setter:function(e){return Bt[e]=Bt[e]||Function("d,value",gt.expr(e)+"=value")},accessor:function(e){return{get:gt.getter(e),set:gt.setter(e)}},guid:function(){var e,t,n="";for(e=0;32>e;e++)t=16*bt.random()|0,(8==e||12==e||16==e||20==e)&&(n+="-"),n+=(12==e?4:16==e?3&t|8:t).toString(16);return n},roleSelector:function(e){return e.replace(/(\S+)/g,"["+gt.attr("role")+"=$1],").slice(0,-1)},directiveSelector:function(e){var t,n=e.split(" ");if(n)for(t=0;n.length>t;t++)"view"!=n[t]&&(n[t]=n[t].replace(/(\w*)(view|bar|strip|over)$/,"$1-$2"));return n.join(" ").replace(/(\S+)/g,"kendo-mobile-$1,").slice(0,-1)},triggeredByInput:function(e){return/^(label|input|textarea|select)$/i.test(e.target.tagName)},logToConsole:function(e){var i=t.console;!gt.suppressLog&&n!==i&&i.log&&i.log(e)}}),X=z.extend({init:function(e,t){var n,i=this;i.element=gt.jQuery(e).handler(i),i.angular("init",t),z.fn.init.call(i),n=t?t.dataSource:null,n&&(t=mt({},t,{dataSource:{}})),t=i.options=mt(!0,{},i.options,t),n&&(t.dataSource=n),i.element.attr(gt.attr("role"))||i.element.attr(gt.attr("role"),(t.name||"").toLowerCase()),i.element.data("kendo"+t.prefix+t.name,i),i.bind(i.events,t)},events:[],options:{prefix:""},_hasBindingTarget:function(){return!!this.element[0].kendoBindingTarget},_tabindex:function(e){e=e||this.wrapper;var t=this.element,n="tabindex",i=e.attr(n)||t.attr(n);t.removeAttr(n),e.attr(n,isNaN(i)?0:i)},setOptions:function(t){this._setEvents(t),e.extend(this.options,t)},_setEvents:function(e){for(var t,n=this,i=0,r=n.events.length;r>i;i++)t=n.events[i],n.options[t]&&e[t]&&n.unbind(t,n.options[t]);n.bind(n.events,e)},resize:function(e){var t=this.getSize(),n=this._size;(e||!n||t.width!==n.width||t.height!==n.height)&&(this._size=t,this._resize(t),this.trigger("resize",t))},getSize:function(){return gt.dimensions(this.element)},size:function(e){return e?(this.setSize(e),n):this.getSize()},setSize:e.noop,_resize:e.noop,destroy:function(){var e=this;e.element.removeData("kendo"+e.options.prefix+e.options.name),e.element.removeData("handler"),e.unbind()},angular:function(){}}),J=X.extend({dataItems:function(){return this.dataSource.flatView()},_angularItems:function(t){var n=this;n.angular(t,function(){return{elements:n.items(),data:e.map(n.dataItems(),function(e){return{dataItem:e}})}})}}),gt.dimensions=function(e,t){var n=e[0];return t&&e.css(t),{width:n.offsetWidth,height:n.offsetHeight}},gt.notify=wt,Z=/template$/i,et=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,tt=/^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]*\]$/,nt=/([A-Z])/g,gt.initWidget=function(i,r,o){var a,s,l,c,d,u,h,p,f,g,m,v,_;if(o?o.roles&&(o=o.roles):o=gt.ui.roles,i=i.nodeType?i:i[0],u=i.getAttribute("data-"+gt.ns+"role")){f=-1===u.indexOf("."),l=f?o[u]:gt.getter(u)(t),m=e(i).data(),v=l?"kendo"+l.fn.options.prefix+l.fn.options.name:"",g=f?RegExp("^kendo.*"+u+"$","i"):RegExp("^"+v+"$","i");
for(_ in m)if(_.match(g)){if(_!==v)return m[_];a=m[_]}if(l){for(p=k(i,"dataSource"),r=e.extend({},x(i,l.fn.options),r),p&&(r.dataSource=typeof p===Et?gt.getter(p)(t):p),c=0,d=l.fn.events.length;d>c;c++)s=l.fn.events[c],h=k(i,s),h!==n&&(r[s]=gt.getter(h)(t));return a?e.isEmptyObject(r)||a.setOptions(r):a=new l(i,r),a}}},gt.rolesFromNamespaces=function(e){var t,n,i=[];for(e[0]||(e=[gt.ui,gt.dataviz.ui]),t=0,n=e.length;n>t;t++)i[t]=e[t].roles;return mt.apply(null,[{}].concat(i.reverse()))},gt.init=function(t){var n=gt.rolesFromNamespaces(Lt.call(arguments,1));e(t).find("[data-"+gt.ns+"role]").addBack().each(function(){gt.initWidget(this,{},n)})},gt.destroy=function(t){e(t).find("[data-"+gt.ns+"role]").addBack().each(function(){var t,n=e(this).data();for(t in n)0===t.indexOf("kendo")&&typeof n[t].destroy===At&&n[t].destroy()})},gt.resize=function(t,n){var i,r=e(t).find("[data-"+gt.ns+"role]").addBack().filter(S);r.length&&(i=e.makeArray(r),i.sort(C),e.each(i,function(){var t=gt.widgetInstance(e(this));t&&t.resize(n)}))},gt.parseOptions=x,mt(gt.ui,{Widget:X,DataBoundWidget:J,roles:{},progress:function(t,n){var i,r,o,a,s=t.find(".k-loading-mask"),l=gt.support,c=l.browser;n?s.length||(i=l.isRtl(t),r=i?"right":"left",a=t.scrollLeft(),o=c.webkit&&i?t[0].scrollWidth-t.width()-2*a:0,s=e("<div class='k-loading-mask'><span class='k-loading-text'>Loading...</span><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("100%").height("100%").css("top",t.scrollTop()).css(r,Math.abs(a)+o).prependTo(t)):s&&s.remove()},plugin:function(t,i,r){var o,a=t.fn.options.name;i=i||gt.ui,r=r||"",i[a]=t,i.roles[a.toLowerCase()]=t,o="getKendo"+r+a,a="kendo"+r+a,e.fn[a]=function(i){var r,o=this;return typeof i===Et?(r=Lt.call(arguments,1),this.each(function(){var t,s,l=e.data(this,a);if(!l)throw Error(gt.format("Cannot call method '{0}' of {1} before it is initialized",i,a));if(t=l[i],typeof t!==At)throw Error(gt.format("Cannot find method '{0}' of {1}",i,a));return s=t.apply(l,r),s!==n?(o=s,!1):n})):this.each(function(){new t(this,i)}),o},e.fn[a].widget=t,e.fn[o]=function(){return this.data(a)}}}),it={bind:function(){return this},nullObject:!0,options:{}},rt=X.extend({init:function(e,t){X.fn.init.call(this,e,t),this.element.autoApplyNS(),this.wrapper=this.element,this.element.addClass("km-widget")},destroy:function(){X.fn.destroy.call(this),this.element.kendoDestroy()},options:{prefix:"Mobile"},events:[],view:function(){var e=this.element.closest(gt.roleSelector("view splitview modalview drawer"));return gt.widgetInstance(e,gt.mobile.ui)||it},viewHasNativeScrolling:function(){var e=this.view();return e&&e.options.useNativeScrolling},container:function(){var e=this.element.closest(gt.roleSelector("view layout modalview drawer splitview"));return gt.widgetInstance(e.eq(0),gt.mobile.ui)||it}}),mt(gt.mobile,{init:function(e){gt.init(e,gt.mobile.ui,gt.ui,gt.dataviz.ui)},appLevelNativeScrolling:function(){return gt.mobile.application&&gt.mobile.application.options&&gt.mobile.application.options.useNativeScrolling},roles:{},ui:{Widget:rt,DataBoundWidget:J.extend(rt.prototype),roles:{},plugin:function(e){gt.ui.plugin(e,gt.mobile.ui,"Mobile")}}}),l(gt.dataviz,{init:function(e){gt.init(e,gt.dataviz.ui)},ui:{roles:{},themes:{},views:[],plugin:function(e){gt.ui.plugin(e,gt.dataviz.ui)}},roles:{}}),gt.touchScroller=function(t,n){return e(t).map(function(t,i){return i=e(i),xt.kineticScrollNeeded&&gt.mobile.ui.Scroller&&!i.data("kendoMobileScroller")?(i.kendoMobileScroller(n),i.data("kendoMobileScroller")):!1})[0]},gt.preventDefault=function(e){e.preventDefault()},gt.widgetInstance=function(e,n){var i,r,o,a,s=e.data(gt.ns+"role"),l=[];if(s){if("content"===s&&(s="scroller"),n)if(n[0])for(i=0,r=n.length;r>i;i++)l.push(n[i].roles[s]);else l.push(n.roles[s]);else l=[gt.ui.roles[s],gt.dataviz.ui.roles[s],gt.mobile.ui.roles[s]];for(s.indexOf(".")>=0&&(l=[gt.getter(s)(t)]),i=0,r=l.length;r>i;i++)if(o=l[i],o&&(a=e.data("kendo"+o.fn.options.prefix+o.fn.options.name)))return a}},gt.onResize=function(n){var i=n;return xt.mobileOS.android&&(i=function(){setTimeout(n,600)}),e(t).on(xt.resize,i),i},gt.unbindResize=function(n){e(t).off(xt.resize,n)},gt.attrValue=function(e,t){return e.data(gt.ns+t)},gt.days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},e.extend(e.expr[":"],{kendoFocusable:function(t){var n=e.attr(t,"tabindex");return T(t,!isNaN(n)&&n>-1)}}),ot=["mousedown","mousemove","mouseenter","mouseleave","mouseover","mouseout","mouseup","click"],at="label, input, [data-rel=external]",st={setupMouseMute:function(){var t,n=0,i=ot.length,r=document.documentElement;if(!st.mouseTrap&&xt.eventCapture)for(st.mouseTrap=!0,st.bustClick=!1,st.captureMouse=!1,t=function(t){st.captureMouse&&("click"===t.type?st.bustClick&&!e(t.target).is(at)&&(t.preventDefault(),t.stopPropagation()):t.stopPropagation())};i>n;n++)r.addEventListener(ot[n],t,!0)},muteMouse:function(e){st.captureMouse=!0,e.data.bustClick&&(st.bustClick=!0),clearTimeout(st.mouseTrapTimeoutID)},unMuteMouse:function(){clearTimeout(st.mouseTrapTimeoutID),st.mouseTrapTimeoutID=setTimeout(function(){st.captureMouse=!1,st.bustClick=!1},400)}},lt={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"},xt.touch&&(xt.mobileOS.ios||xt.mobileOS.android)?lt={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:xt.pointers?lt={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}:xt.msPointers&&(lt={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}),!xt.msPointers||"onmspointerenter"in t||e.each({MSPointerEnter:"MSPointerOver",MSPointerLeave:"MSPointerOut"},function(t,n){e.event.special[t]={delegateType:n,bindType:n,handle:function(t){var i,r=this,o=t.relatedTarget,a=t.handleObj;return(!o||o!==r&&!e.contains(r,o))&&(t.type=a.origType,i=a.handler.apply(this,arguments),t.type=n),i}}}),ct=function(e){return lt[e]||e},dt=/([^ ]+)/g,gt.applyEventMap=function(e,t){return e=e.replace(dt,ct),t&&(e=e.replace(dt,"$1."+t)),e},ut=e.fn.on,mt(!0,A,e),A.fn=A.prototype=new e,A.fn.constructor=A,A.fn.init=function(t,n){return n&&n instanceof e&&!(n instanceof A)&&(n=A(n)),e.fn.init.call(this,t,n,ht)},A.fn.init.prototype=A.fn,ht=A(document),mt(A.fn,{handler:function(e){return this.data("handler",e),this},autoApplyNS:function(e){return this.data("kendoNS",e||gt.guid()),this},on:function(){var e,t,n,i,r,o,a=this,s=a.data("kendoNS");return 1===arguments.length?ut.call(a,arguments[0]):(e=a,t=Lt.call(arguments),typeof t[t.length-1]===Ft&&t.pop(),n=t[t.length-1],i=gt.applyEventMap(t[0],s),xt.mouseAndTouchPresent&&i.search(/mouse|click/)>-1&&this[0]!==document.documentElement&&(st.setupMouseMute(),r=2===t.length?null:t[1],o=i.indexOf("click")>-1&&i.indexOf("touchend")>-1,ut.call(this,{touchstart:st.muteMouse,touchend:st.unMuteMouse},r,{bustClick:o})),typeof n===Et&&(e=a.data("handler"),n=e[n],t[t.length-1]=function(t){n.call(e,t)}),t[0]=i,ut.apply(a,t),a)},kendoDestroy:function(e){return e=e||this.data("kendoNS"),e&&this.off("."+e),this}}),gt.jQuery=A,gt.eventMap=lt,gt.timezone=function(){function e(e,t){var n,i,r,o=t[3],a=t[4],s=t[5],l=t[8];return l||(t[8]=l={}),l[e]?l[e]:(isNaN(a)?0===a.indexOf("last")?(n=new Date(Date.UTC(e,d[o]+1,1,s[0]-24,s[1],s[2],0)),i=u[a.substr(4,3)],r=n.getUTCDay(),n.setUTCDate(n.getUTCDate()+i-r-(i>r?7:0))):a.indexOf(">=")>=0&&(n=new Date(Date.UTC(e,d[o],a.substr(5),s[0],s[1],s[2],0)),i=u[a.substr(0,3)],r=n.getUTCDay(),n.setUTCDate(n.getUTCDate()+i-r+(r>i?7:0))):n=new Date(Date.UTC(e,d[o],a,s[0],s[1],s[2],0)),l[e]=n)}function t(t,n,i){var r,o,a,s;return(n=n[i])?(a=new Date(t).getUTCFullYear(),n=jQuery.grep(n,function(e){var t=e[0],n=e[1];return a>=t&&(n>=a||t==a&&"only"==n||"max"==n)}),n.push(t),n.sort(function(t,n){return"number"!=typeof t&&(t=+e(a,t)),"number"!=typeof n&&(n=+e(a,n)),t-n}),s=n[jQuery.inArray(t,n)-1]||n[n.length-1],isNaN(s)?s:null):(r=i.split(":"),o=0,r.length>1&&(o=60*r[0]+ +r[1]),[-1e6,"max","-","Jan",1,[0,0,0],o,"-"])}function n(e,t,n){var i,r,o,a=t[n];if("string"==typeof a&&(a=t[a]),!a)throw Error('Timezone "'+n+'" is either incorrect, or kendo.timezones.min.js is not included.');for(i=a.length-1;i>=0&&(r=a[i][3],!(r&&e>r));i--);if(o=a[i+1],!o)throw Error('Timezone "'+n+'" not found on '+e+".");return o}function i(e,i,r,o){typeof e!=Mt&&(e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));var a=n(e,i,o);return{zone:a,rule:t(e,r,a[1])}}function r(e,t){var n,r,o;return"Etc/UTC"==t||"Etc/GMT"==t?0:(n=i(e,this.zones,this.rules,t),r=n.zone,o=n.rule,gt.parseFloat(o?r[0]-o[6]:r[0]))}function o(e,t){var n=i(e,this.zones,this.rules,t),r=n.zone,o=n.rule,a=r[2];return a.indexOf("/")>=0?a.split("/")[o&&+o[6]?1:0]:a.indexOf("%s")>=0?a.replace("%s",o&&"-"!=o[7]?o[7]:""):a}function a(e,t,n){var i,r;return typeof t==Et&&(t=this.offset(e,t)),typeof n==Et&&(n=this.offset(e,n)),i=e.getTimezoneOffset(),e=new Date(e.getTime()+6e4*(t-n)),r=e.getTimezoneOffset(),new Date(e.getTime()+6e4*(r-i))}function s(e,t){return this.convert(e,e.getTimezoneOffset(),t)}function l(e,t){return this.convert(e,t,e.getTimezoneOffset())}function c(e){return this.apply(new Date(e),"Etc/UTC")}var d={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},u={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};return{zones:{},rules:{},offset:r,convert:a,apply:s,remove:l,abbr:o,toLocalDate:c}}(),gt.date=function(){function e(e,t){return 0===t&&23===e.getHours()?(e.setHours(e.getHours()+2),!0):!1}function t(t,n,i){var r=t.getHours();i=i||1,n=(n-t.getDay()+7*i)%7,t.setDate(t.getDate()+n),e(t,r)}function n(e,n,i){return e=new Date(e),t(e,n,i),e}function i(e){return new Date(e.getFullYear(),e.getMonth(),1)}function r(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0),n=i(e),r=Math.abs(t.getTimezoneOffset()-n.getTimezoneOffset());return r&&t.setHours(n.getHours()+r/60),t}function o(t){return t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),e(t,0),t}function a(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function s(e){return e.getTime()-o(e)}function l(e,t,n){var i,r=s(t),o=s(n);return e&&r!=o?(t>=n&&(n+=m),i=s(e),r>i&&(i+=m),r>o&&(o+=m),i>=r&&o>=i):!0}function c(e,t,n){var i,r=t.getTime(),o=n.getTime();return r>=o&&(o+=m),i=e.getTime(),i>=r&&o>=i}function d(t,n){var i=t.getHours();return t=new Date(t),u(t,n*m),e(t,i),t}function u(e,t,n){var i,r=e.getTimezoneOffset();e.setTime(e.getTime()+t),n||(i=e.getTimezoneOffset()-r,e.setTime(e.getTime()+i*g))}function h(){return o(new Date)}function p(e){return o(e).getTime()==h().getTime()}function f(e){var t=new Date(1980,1,1,0,0,0);return e&&t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t}var g=6e4,m=864e5;return{adjustDST:e,dayOfWeek:n,setDayOfWeek:t,getDate:o,isInDateRange:c,isInTimeRange:l,isToday:p,nextDay:function(e){return d(e,1)},previousDay:function(e){return d(e,-1)},toUtcTime:a,MS_PER_DAY:m,MS_PER_HOUR:60*g,MS_PER_MINUTE:g,setTime:u,addDays:d,today:h,toInvariantTime:f,firstDayOfMonth:i,lastDayOfMonth:r,getMilliseconds:s}}(),gt.stripWhitespace=function(e){var t,n,i;if(document.createNodeIterator)for(t=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,function(t){return t.parentNode==e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},!1);t.nextNode();)t.referenceNode&&!t.referenceNode.textContent.trim()&&t.referenceNode.parentNode.removeChild(t.referenceNode);else for(n=0;e.childNodes.length>n;n++)i=e.childNodes[n],3!=i.nodeType||/\S/.test(i.nodeValue)||(e.removeChild(i),n--),1==i.nodeType&&gt.stripWhitespace(i)},pt=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},gt.animationFrame=function(e){pt.call(t,e)},ft=[],gt.queueAnimation=function(e){ft[ft.length]=e,1===ft.length&&gt.runNextAnimation()},gt.runNextAnimation=function(){gt.animationFrame(function(){ft[0]&&(ft.shift()(),ft[0]&&gt.runNextAnimation())})},gt.parseQueryStringParams=function(e){for(var t=e.split("?")[1]||"",n={},i=t.split(/&|=/),r=i.length,o=0;r>o;o+=2)""!==i[o]&&(n[decodeURIComponent(i[o])]=decodeURIComponent(i[o+1]));return n},gt.elementUnderCursor=function(e){return document.elementFromPoint(e.x.client,e.y.client)},gt.wheelDeltaY=function(e){var t,i=e.originalEvent,r=i.wheelDeltaY;return i.wheelDelta?(r===n||r)&&(t=i.wheelDelta):i.detail&&i.axis===i.VERTICAL_AXIS&&(t=10*-i.detail),t},gt.throttle=function(e,t){var i,r=0;return!t||0>=t?e:function(){function o(){e.apply(a,l),r=+new Date}var a=this,s=+new Date-r,l=arguments;return r?(i&&clearTimeout(i),s>t?o():i=setTimeout(o,t-s),n):o()}},gt.caret=function(t,i,r){var o,a,s,l,c=i!==n;if(r===n&&(r=i),t[0]&&(t=t[0]),!c||!t.disabled){try{t.selectionStart!==n?c?(t.focus(),t.setSelectionRange(i,r)):i=[t.selectionStart,t.selectionEnd]:document.selection&&(e(t).is(":visible")&&t.focus(),o=t.createTextRange(),c?(o.collapse(!0),o.moveStart("character",i),o.moveEnd("character",r-i),o.select()):(a=o.duplicate(),o.moveToBookmark(document.selection.createRange().getBookmark()),a.setEndPoint("EndToStart",o),s=a.text.length,l=s+o.text.length,i=[s,l]))}catch(d){i=[]}return i}},gt.compileMobileDirective=function(e,n){var i=t.angular;return e.attr("data-"+gt.ns+"role",e[0].tagName.toLowerCase().replace("kendo-mobile-","").replace("-","")),i.element(e).injector().invoke(["$compile",function(t){var r=i.element(e).scope();n&&n(r),t(e)(r),r.$digest()}]),gt.widgetInstance(e,gt.mobile.ui)},function(){function n(t,n,i){var r=e("<form>").attr({action:i,method:"POST"}),o=t.split(";base64,");e("<input>").attr({value:o[0].replace("data:",""),name:"contentType",type:"hidden"}).appendTo(r),e("<input>").attr({value:o[1],name:"base64",type:"hidden"}).appendTo(r),e("<input>").attr({value:n,name:"fileName",type:"hidden"}).appendTo(r),r.appendTo("body").submit().remove()}function i(e,t){var n,i,r,o,a,s=e;if("string"==typeof e){for(n=e.split(";base64,"),i=n[0],r=atob(n[1]),o=new Uint8Array(r.length),a=0;r.length>a;a++)o[a]=r.charCodeAt(a);s=new Blob([o.buffer],{type:i})}navigator.msSaveBlob(s,t)}function r(e,n){t.Blob&&e instanceof Blob&&(e=URL.createObjectURL(e)),o.download=n,o.href=e;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(i)}var o=document.createElement("a"),a="download"in o;gt.saveAs=function(e){var t=n;e.forceProxy||(a?t=r:navigator.msSaveBlob&&(t=i)),t(e.dataURI,e.fileName,e.proxyURL)}}()}(jQuery,window),function(e,t){function n(e,t){if(!t)return e;e+"/"===t&&(e=t);var n=RegExp("^"+t,"i");return n.test(e)||(e=t+"/"+e),p.protocol+"//"+(p.host+"/"+e).replace(/\/\/+/g,"/")}function i(e){return e?"#!":"#"}function r(e){var t=p.href;return"#!"===e&&t.indexOf("#")>-1&&t.indexOf("#!")<0?null:t.split(e)[1]||""}function o(e,t){return 0===t.indexOf(e)?t.substr(e.length).replace(/\/\//g,"/"):t}function a(e){return e.replace(/^(#)?/,"#")}function s(e){return e.replace(/^(#(!)?)?/,"#!")}var l=window.kendo,c="change",d="back",u="same",h=l.support,p=window.location,f=window.history,g=50,m=l.support.browser.msie,v=/^#*/,_=window.document,y=l.Class.extend({back:function(){m?setTimeout(function(){f.back()}):f.back()},forward:function(){m?setTimeout(function(){f.forward()}):f.forward()},length:function(){return f.length},replaceLocation:function(e){p.replace(e)}}),w=y.extend({init:function(e){this.root=e},navigate:function(e){f.pushState({},_.title,n(e,this.root))},replace:function(e){f.replaceState({},_.title,n(e,this.root))},normalize:function(e){return o(this.root,e)},current:function(){var e=p.pathname;return p.search&&(e+=p.search),o(this.root,e)},change:function(t){e(window).bind("popstate.kendo",t)},stop:function(){e(window).unbind("popstate.kendo")},normalizeCurrent:function(e){var t,o=e.root,a=p.pathname,s=r(i(e.hashBang));o===a+"/"&&(t=o),o===a&&s&&(t=n(s.replace(v,""),o)),t&&f.pushState({},_.title,t)}}),b=y.extend({init:function(e){this._id=l.guid(),this.prefix=i(e),this.fix=e?s:a},navigate:function(e){p.hash=this.fix(e)},replace:function(e){this.replaceLocation(this.fix(e))},normalize:function(e){return e.indexOf(this.prefix)<0?e:e.split(this.prefix)[1]},change:function(t){h.hashChange?e(window).on("hashchange."+this._id,t):this._interval=setInterval(t,g)},stop:function(){e(window).off("hashchange."+this._id),clearInterval(this._interval)},current:function(){return r(this.prefix)},normalizeCurrent:function(e){var t=p.pathname,n=e.root;return e.pushState&&n!==t?(this.replaceLocation(n+this.prefix+o(n,t)),!0):!1}}),k=l.Observable.extend({start:function(t){if(t=t||{},this.bind([c,d,u],t),!this._started){this._started=!0,t.root=t.root||"/";var n,i=this.createAdapter(t);i.normalizeCurrent(t)||(n=i.current(),e.extend(this,{adapter:i,root:t.root,historyLength:i.length(),current:n,locations:[n]}),i.change(e.proxy(this,"_checkUrl")))}},createAdapter:function(e){return h.pushState&&e.pushState?new w(e.root):new b(e.hashBang)},stop:function(){this._started&&(this.adapter.stop(),this.unbind(c),this._started=!1)},change:function(e){this.bind(c,e)},replace:function(e,t){this._navigate(e,t,function(t){t.replace(e),this.locations[this.locations.length-1]=this.current})},navigate:function(e,n){return"#:back"===e?(this.backCalled=!0,this.adapter.back(),t):(this._navigate(e,n,function(t){t.navigate(e),this.locations.push(this.current)}),t)},_navigate:function(e,n,i){var r=this.adapter;return e=r.normalize(e),this.current===e||this.current===decodeURIComponent(e)?(this.trigger(u),t):((n||!this.trigger(c,{url:e}))&&(this.current=e,i.call(this,r),this.historyLength=r.length()),t)},_checkUrl:function(){var e=this.adapter,n=e.current(),i=e.length(),r=this.historyLength===i,o=n===this.locations[this.locations.length-2]&&r,a=this.backCalled,s=this.current;return null===n||this.current===n||this.current===decodeURIComponent(n)?!0:(this.historyLength=i,this.backCalled=!1,this.current=n,o&&this.trigger("back",{url:s,to:n})?(e.forward(),this.current=s,t):this.trigger(c,{url:n,backButtonPressed:!a})?(o?e.forward():(e.back(),this.historyLength--),this.current=s,t):(o?this.locations.pop():this.locations.push(n),t))}});l.History=k,l.History.HistoryAdapter=y,l.History.HashAdapter=b,l.History.PushStateAdapter=w,l.absoluteURL=n,l.history=new k}(window.kendo.jQuery),function(){function e(e,t){return t?e:"([^/]+)"}function t(t,n){return RegExp("^"+t.replace(f,"\\$&").replace(u,"(?:$1)?").replace(h,e).replace(p,"(.*?)")+"$",n?"i":"")}function n(e){return e.replace(/(\?.*)|(#.*)/g,"")}var i=window.kendo,r=i.history,o=i.Observable,a="init",s="routeMissing",l="change",c="back",d="same",u=/\((.*?)\)/g,h=/(\(\?)?:\w+/g,p=/\*\w+/g,f=/[\-{}\[\]+?.,\\\^$|#\s]/g,g=i.Class.extend({init:function(e,n,i){e instanceof RegExp||(e=t(e,i)),this.route=e,this._callback=n},callback:function(e){var t,r,o=0,a=i.parseQueryStringParams(e);for(e=n(e),t=this.route.exec(e).slice(1),r=t.length;r>o;o++)void 0!==t[o]&&(t[o]=decodeURIComponent(t[o]));t.push(a),this._callback.apply(null,t)},worksWith:function(e){return this.route.test(n(e))?(this.callback(e),!0):!1}}),m=o.extend({init:function(e){e||(e={}),o.fn.init.call(this),this.routes=[],this.pushState=e.pushState,this.hashBang=e.hashBang,this.root=e.root,this.ignoreCase=e.ignoreCase!==!1,this.bind([a,s,l,d],e)},destroy:function(){r.unbind(l,this._urlChangedProxy),r.unbind(d,this._sameProxy),r.unbind(c,this._backProxy),this.unbind()},start:function(){var e,t=this,n=function(){t._same()},i=function(e){t._back(e)},o=function(e){t._urlChanged(e)};r.start({same:n,change:o,back:i,pushState:t.pushState,hashBang:t.hashBang,root:t.root}),e={url:r.current||"/",preventDefault:$.noop},t.trigger(a,e)||t._urlChanged(e),this._urlChangedProxy=o,this._backProxy=i},route:function(e,t){this.routes.push(new g(e,t,this.ignoreCase))},navigate:function(e,t){i.history.navigate(e,t)},replace:function(e,t){i.history.replace(e,t)},_back:function(e){this.trigger(c,{url:e.url,to:e.to})&&e.preventDefault()},_same:function(){this.trigger(d)},_urlChanged:function(e){var t,n,r,o,a=e.url;if(a||(a="/"),this.trigger(l,{url:e.url,params:i.parseQueryStringParams(e.url),backButtonPressed:e.backButtonPressed}))return void e.preventDefault();for(t=0,n=this.routes,o=n.length;o>t;t++)if(r=n[t],r.worksWith(a))return;this.trigger(s,{url:a,params:i.parseQueryStringParams(a),backButtonPressed:e.backButtonPressed})&&e.preventDefault()}});i.Router=m}(),function(e,t){function n(r,s){var l,c,d,u,h,p,f,g,m=[],v=r.logic||"and",_=r.filters;for(l=0,c=_.length;c>l;l++)r=_[l],d=r.field,f=r.value,p=r.operator,r.filters?r=n(r,s):(g=r.ignoreCase,d=d.replace(/\./g,"/"),r=o[p],s&&(r=a[p]),r&&f!==t&&(u=e.type(f),"string"===u?(h="'{1}'",f=f.replace(/'/g,"''"),g===!0&&(d="tolower("+d+")")):h="date"===u?s?"{1:yyyy-MM-ddTHH:mm:ss+00:00}":"datetime'{1:yyyy-MM-ddTHH:mm:ss}'":"{1}",r.length>3?"substringof"!==r?h="{0}({2},"+h+")":(h="{0}("+h+",{2})","doesnotcontain"===p&&(s?(h="{0}({2},'{1}') eq -1",r="indexof"):h+=" eq false")):h="{2} {0} "+h,r=i.format(h,r,f,d))),m.push(r);return r=m.join(" "+v+" "),m.length>1&&(r="("+r+")"),r}var i=window.kendo,r=e.extend,o={eq:"eq",neq:"ne",gt:"gt",gte:"ge",lt:"lt",lte:"le",contains:"substringof",doesnotcontain:"substringof",endswith:"endswith",startswith:"startswith"},a=r({},o,{contains:"contains"}),s={pageSize:e.noop,page:e.noop,filter:function(e,t,i){t&&(e.$filter=n(t,i))},sort:function(t,n){var i=e.map(n,function(e){var t=e.field.replace(/\./g,"/");return"desc"===e.dir&&(t+=" desc"),t}).join(",");i&&(t.$orderby=i)},skip:function(e,t){t&&(e.$skip=t)},take:function(e,t){t&&(e.$top=t)}},l={read:{dataType:"jsonp"}};r(!0,i.data,{schemas:{odata:{type:"json",data:function(e){return e.d.results||[e.d]},total:"d.__count"}},transports:{odata:{read:{cache:!0,dataType:"jsonp",jsonp:"$callback"},update:{cache:!0,dataType:"json",contentType:"application/json",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(e,t,n){var r,o,a,c;if(e=e||{},t=t||"read",c=(this.options||l)[t],c=c?c.dataType:"json","read"===t){r={$inlinecount:"allpages"},"json"!=c&&(r.$format="json");for(a in e)s[a]?s[a](r,e[a],n):r[a]=e[a]}else{if("json"!==c)throw Error("Only json dataType can be used for "+t+" operation.");if("destroy"!==t){for(a in e)o=e[a],"number"==typeof o&&(e[a]=o+"");r=i.stringify(e)}}return r}}}}),r(!0,i.data,{schemas:{"odata-v4":{type:"json",data:function(e){return e.value?e.value:(delete e["odata.metadata"],[e])},total:function(e){return e["@odata.count"]}}},transports:{"odata-v4":{read:{cache:!0,dataType:"json"},update:{cache:!0,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(e,t){var n=i.data.transports.odata.parameterMap(e,t,!0);return"read"==t&&(n.$count=!0,delete n.$inlinecount),n}}}})}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=e.isArray,r=e.isPlainObject,o=e.map,a=e.each,s=e.extend,l=n.getter,c=n.Class,d=c.extend({init:function(e){var t,l,c,d,u=this,h=e.total,p=e.model,f=e.parse,g=e.errors,m=e.serialize,v=e.data;p&&(r(p)&&(t=e.modelBase||n.data.Model,p.fields&&a(p.fields,function(e,t){t=r(t)&&t.field?s(t,{field:u.getter(t.field)}):{field:u.getter(t)},p.fields[e]=t}),l=p.id,l&&(c={},c[u.xpathToMember(l,!0)]={field:u.getter(l)},p.fields=s(c,p.fields),p.id=u.xpathToMember(l)),p=t.define(p)),u.model=p),h&&("string"==typeof h?(h=u.getter(h),u.total=function(e){return parseInt(h(e),10)}):"function"==typeof h&&(u.total=h)),g&&("string"==typeof g?(g=u.getter(g),u.errors=function(e){return g(e)||null}):"function"==typeof g&&(u.errors=g)),v&&("string"==typeof v?(v=u.xpathToMember(v),u.data=function(e){var t,n=u.evaluate(e,v);return n=i(n)?n:[n],u.model&&p.fields?(t=new u.model,o(n,function(e){if(e){var n,i={};for(n in p.fields)i[n]=t._parse(n,p.fields[n].field(e));return i}})):n}):"function"==typeof v&&(u.data=v)),"function"==typeof f&&(d=u.parse,u.parse=function(e){var t=f.call(u,e);return d.call(u,t)}),"function"==typeof m&&(u.serialize=m)},total:function(e){return this.data(e).length},errors:function(e){return e?e.errors:null},serialize:function(e){return e},parseDOM:function(e){var n,r,o,a,s,l,c,d={},u=e.attributes,h=u.length;for(c=0;h>c;c++)l=u[c],d["@"+l.nodeName]=l.nodeValue;for(r=e.firstChild;r;r=r.nextSibling)o=r.nodeType,3===o||4===o?d["#text"]=r.nodeValue:1===o&&(n=this.parseDOM(r),a=r.nodeName,s=d[a],i(s)?s.push(n):s=s!==t?[s,n]:n,d[a]=s);return d},evaluate:function(e,t){for(var n,r,o,a,s,l=t.split(".");n=l.shift();)if(e=e[n],i(e)){for(r=[],t=l.join("."),s=0,o=e.length;o>s;s++)a=this.evaluate(e[s],t),a=i(a)?a:[a],r.push.apply(r,a);return r}return e},parse:function(t){var n,i,r={};return n=t.documentElement||e.parseXML(t).documentElement,i=this.parseDOM(n),r[n.nodeName]=i,r},xpathToMember:function(e,t){return e?(e=e.replace(/^\//,"").replace(/\//g,"."),e.indexOf("@")>=0?e.replace(/\.?(@.*)/,t?"$1":'["$1"]'):e.indexOf("text()")>=0?e.replace(/(\.?text\(\))/,t?"#text":'["#text"]'):e):""},getter:function(e){return l(this.xpathToMember(e),!0)}});e.extend(!0,n.data,{XmlDataReader:d,readers:{xml:d}})}(window.kendo.jQuery),function(e,t){function n(e,t,n,i){return function(r){var o,a={};for(o in r)a[o]=r[o];a.field=i?n+"."+r.field:n,t==wt&&e._notifyChange&&e._notifyChange(a),e.trigger(t,a)}}function i(t,n){if(t===n)return!0;var r,o=e.type(t),a=e.type(n);if(o!==a)return!1;if("date"===o)return t.getTime()===n.getTime();if("object"!==o&&"array"!==o)return!1;for(r in t)if(!i(t[r],n[r]))return!1;return!0}function r(e,t){var n,i;for(i in e){if(n=e[i],it(n)&&n.field&&n.field===t)return n;if(n===t)return n}return null}function o(e){this.data=e||[]}function a(e,n){if(e){var i=typeof e===ft?{field:e,dir:n}:e,r=ot(i)?i:i!==t?[i]:[];return at(r,function(e){return!!e.dir})}}function s(e){var t,n,i,r,o=e.filters;if(o)for(t=0,n=o.length;n>t;t++)i=o[t],r=i.operator,r&&typeof r===ft&&(i.operator=W[r.toLowerCase()]||r),s(i)}function l(e){return e&&!rt(e)?((ot(e)||!e.filters)&&(e={logic:"and",filters:ot(e)?e:[e]}),s(e),e):t}function c(e){return ot(e)?e:[e]}function d(e,n){var i=typeof e===ft?{field:e,dir:n}:e,r=ot(i)?i:i!==t?[i]:[];return H(r,function(e){return{field:e.field,dir:e.dir||"asc",aggregates:e.aggregates}})}function u(e,t){return e&&e.getTime&&t&&t.getTime?e.getTime()===t.getTime():e===t}function h(e,t,n,i,r,o){var a,s,l,c,d;for(t=t||[],c=t.length,a=0;c>a;a++)s=t[a],l=s.aggregate,d=s.field,e[d]=e[d]||{},o[d]=o[d]||{},o[d][l]=o[d][l]||{},e[d][l]=j[l.toLowerCase()](e[d][l],n,dt.accessor(d),i,r,o[d][l])}function p(e){return"number"==typeof e&&!isNaN(e)}function f(e){return e&&e.getTime}function g(e){var t,n=e.length,i=Array(n);for(t=0;n>t;t++)i[t]=e[t].toJSON();return i}function m(e,t,n,i,r){var o,a,s,l,c;for(l=0,c=e.length;c>l;l++){o=e[l];for(a in t)s=r[a],s&&s!==a&&(o[s]=t[a](o),delete o[a])}}function v(e,t,n,i,r){var o,a,s,l,c;for(l=0,c=e.length;c>l;l++){o=e[l];for(a in t)o[a]=n._parse(a,t[a](o)),s=r[a],s&&s!==a&&delete o[s]}}function _(e,t,n,i,r){var o,a,s,l;for(a=0,l=e.length;l>a;a++)o=e[a],s=i[o.field],s&&s!=o.field&&(o.field=s),o.value=n._parse(o.field,o.value),o.hasSubgroups?_(o.items,t,n,i,r):v(o.items,t,n,i,r)}function y(e,t,n,i,r,o){return function(a){return a=e(a),a&&!rt(i)&&("[object Array]"===Ht.call(a)||a instanceof jt||(a=[a]),n(a,i,new t,r,o)),a||[]}}function w(e,t,n,i){for(var r,o,a,s=0;t.length&&i&&(r=t[s],o=r.items,a=o.length,e&&e.field===r.field&&e.value===r.value?(e.hasSubgroups&&e.items.length?w(e.items[e.items.length-1],r.items,n,i):(o=o.slice(n,n+i),e.items=e.items.concat(o)),t.splice(s--,1)):r.hasSubgroups&&o.length?w(r,o,n,i):(o=o.slice(n,n+i),r.items=o,r.items.length||t.splice(s--,1)),0===o.length?n-=a:(n=0,i-=o.length),!(++s>=t.length)););t.length>s&&t.splice(s,t.length-s)}function b(e){var t,n,i,r,o,a=[];for(t=0,n=e.length;n>t;t++)if(o=e.at(t),o.hasSubgroups)a=a.concat(b(o.items));else for(i=o.items,r=0;i.length>r;r++)a.push(i.at(r));return a}function k(e,t){var n,i,r;if(t)for(n=0,i=e.length;i>n;n++)r=e.at(n),r.hasSubgroups?k(r.items,t):r.items=new Gt(r.items,t)}function x(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n].hasSubgroups){if(x(e[n].items,t))return!0}else if(t(e[n].items,e[n]))return!0}function C(e,t,n,i){for(var r=0;e.length>r&&e[r].data!==t&&!S(e[r].data,n,i);r++);}function S(e,t,n){for(var i=0,r=e.length;r>i;i++){if(e[i]&&e[i].hasSubgroups)return S(e[i].items,t,n);if(e[i]===t||e[i]===n)return e[i]=n,!0}}function T(e,n,i,r){var o,a,s,l;for(o=0,a=e.length;a>o;o++)if(s=e[o],s&&!(s instanceof r))if(s.hasSubgroups!==t)T(s.items,n,i,r);else for(l=0;n.length>l;l++)if(n[l]===s){e[o]=n.at(l),C(i,n,s,e[o]);break}}function D(e,t){var n,i,r;for(n=0,i=e.length;i>n;n++)if(r=e.at(n),r.uid==t.uid)return e.splice(n,1),r}function A(e,t){var n,i,r,o;for(r=e.length-1,o=0;r>=o;r--)i=e[r],n={value:t.get(i.field),field:i.field,items:n?[n]:[t],hasSubgroups:!!n,aggregates:{}};return n}function E(e,t){return t?P(e,function(e){return e.uid?e.uid==t.uid:e[t.idField]===t.id}):-1}function M(e,t){return t?P(e,function(e){return e.uid==t.uid}):-1}function P(e,t){var n,i;for(n=0,i=e.length;i>n;n++)if(t(e[n]))return n;return-1}function I(e,t){var n,i;return e&&!rt(e)?(n=e[t],i=it(n)?n.from||n.field||t:e[t]||t,ut(i)?t:i):t}function z(e,t){var n,i,r,o={};for(r in e)"filters"!==r&&(o[r]=e[r]);if(e.filters)for(o.filters=[],n=0,i=e.filters.length;i>n;n++)o.filters[n]=z(e.filters[n],t);else o.field=I(t.fields,o.field);return o}function F(e,t){var n,i,r,o,a,s=[];for(n=0,i=e.length;i>n;n++){r={},o=e[n];for(a in o)r[a]=o[a];r.field=I(t.fields,r.field),r.aggregates&&ot(r.aggregates)&&(r.aggregates=F(r.aggregates,t)),s.push(r)}return s}function R(t,n){var i,r,o,a,s,l=e(t)[0].children,c=[],d=n[0],u=n[1];for(i=0,r=l.length;r>i;i++)o={},s=l[i],s.disabled||(o[d.field]=s.text,a=s.attributes.value,a=a&&a.specified?s.value:s.text,o[u.field]=a,c.push(o));return c}function B(t,n){var i,r,o,a,s,l,c,d=e(t)[0].tBodies[0],u=d?d.rows:[],h=n.length,p=[];for(i=0,r=u.length;r>i;i++){for(s={},c=!0,a=u[i].cells,o=0;h>o;o++)l=a[o],"th"!==l.nodeName.toLowerCase()&&(c=!1,s[n[o].field]=l.innerHTML);c||p.push(s)}return p}function L(e){return function(){var t=this._data,n=K.fn[e].apply(this,Lt.call(arguments));return this._data!=t&&this._attachBubbleHandlers(),n}}function O(t,n){function i(e,t){return e.filter(t).add(e.find(t))}var r,o,a,s,l,c,d,u,h=e(t).children(),p=[],f=n[0].field,g=n[1]&&n[1].field,m=n[2]&&n[2].field,v=n[3]&&n[3].field;for(r=0,o=h.length;o>r;r++)a={_loaded:!0},s=h.eq(r),c=s[0].firstChild,u=s.children(),t=u.filter("ul"),u=u.filter(":not(ul)"),l=s.attr("data-id"),l&&(a.id=l),c&&(a[f]=3==c.nodeType?c.nodeValue:u.text()),g&&(a[g]=i(u,"a").attr("href")),v&&(a[v]=i(u,"img").attr("src")),m&&(d=i(u,".k-sprite").prop("className"),a[m]=d&&e.trim(d.replace("k-sprite",""))),t.length&&(a.items=O(t.eq(0),n)),"true"==s.attr("data-hasChildren")&&(a.hasChildren=!0),p.push(a);return p}var H,N,V,U,W,j,G,q,$,Y,K,Q,X,J,Z,et,tt=e.extend,nt=e.proxy,it=e.isPlainObject,rt=e.isEmptyObject,ot=e.isArray,at=e.grep,st=e.ajax,lt=e.each,ct=e.noop,dt=window.kendo,ut=dt.isFunction,ht=dt.Observable,pt=dt.Class,ft="string",gt="function",mt="create",vt="read",_t="update",yt="destroy",wt="change",bt="sync",kt="get",xt="error",Ct="requestStart",St="progress",Tt="requestEnd",Dt=[mt,vt,_t,yt],At=function(e){return e},Et=dt.getter,Mt=dt.stringify,Pt=Math,It=[].push,zt=[].join,Ft=[].pop,Rt=[].splice,Bt=[].shift,Lt=[].slice,Ot=[].unshift,Ht={}.toString,Nt=dt.support.stableSort,Vt=/^\/Date\((.*?)\)\/$/,Ut=/(\r+|\n+)/g,Wt=/(?=['\\])/g,jt=ht.extend({init:function(e,t){var n=this;n.type=t||qt,ht.fn.init.call(n),n.length=e.length,n.wrapAll(e,n)},at:function(e){return this[e]},toJSON:function(){var e,t,n=this.length,i=Array(n);
for(e=0;n>e;e++)t=this[e],t instanceof qt&&(t=t.toJSON()),i[e]=t;return i},parent:ct,wrapAll:function(e,t){var n,i,r=this,o=function(){return r};for(t=t||[],n=0,i=e.length;i>n;n++)t[n]=r.wrap(e[n],o);return t},wrap:function(e,t){var n,i=this;return null!==e&&"[object Object]"===Ht.call(e)&&(n=e instanceof i.type||e instanceof Kt,n||(e=e instanceof qt?e.toJSON():e,e=new i.type(e)),e.parent=t,e.bind(wt,function(e){i.trigger(wt,{field:e.field,node:e.node,index:e.index,items:e.items||[this],action:e.node?e.action||"itemchange":"itemchange"})})),e},push:function(){var e,t=this.length,n=this.wrapAll(arguments);return e=It.apply(this,n),this.trigger(wt,{action:"add",index:t,items:n}),e},slice:Lt,sort:[].sort,join:zt,pop:function(){var e=this.length,t=Ft.apply(this);return e&&this.trigger(wt,{action:"remove",index:e-1,items:[t]}),t},splice:function(e,t,n){var i,r,o,a=this.wrapAll(Lt.call(arguments,2));if(i=Rt.apply(this,[e,t].concat(a)),i.length)for(this.trigger(wt,{action:"remove",index:e,items:i}),r=0,o=i.length;o>r;r++)i[r].children&&i[r].unbind(wt);return n&&this.trigger(wt,{action:"add",index:e,items:a}),i},shift:function(){var e=this.length,t=Bt.apply(this);return e&&this.trigger(wt,{action:"remove",index:0,items:[t]}),t},unshift:function(){var e,t=this.wrapAll(arguments);return e=Ot.apply(this,t),this.trigger(wt,{action:"add",index:0,items:t}),e},indexOf:function(e){var t,n,i=this;for(t=0,n=i.length;n>t;t++)if(i[t]===e)return t;return-1},forEach:function(e){for(var t=0,n=this.length;n>t;t++)e(this[t],t,this)},map:function(e){for(var t=0,n=[],i=this.length;i>t;t++)n[t]=e(this[t],t,this);return n},filter:function(e){for(var t,n=0,i=[],r=this.length;r>n;n++)t=this[n],e(t,n,this)&&(i[i.length]=t);return i},find:function(e){for(var t,n=0,i=this.length;i>n;n++)if(t=this[n],e(t,n,this))return t},every:function(e){for(var t,n=0,i=this.length;i>n;n++)if(t=this[n],!e(t,n,this))return!1;return!0},some:function(e){for(var t,n=0,i=this.length;i>n;n++)if(t=this[n],e(t,n,this))return!0;return!1},remove:function(e){var t=this.indexOf(e);-1!==t&&this.splice(t,1)},empty:function(){this.splice(0,this.length)}}),Gt=jt.extend({init:function(e,t){ht.fn.init.call(this),this.type=t||qt;for(var n=0;e.length>n;n++)this[n]=e[n];this.length=n,this._parent=nt(function(){return this},this)},at:function(e){var t=this[e];return t instanceof this.type?t.parent=this._parent:t=this[e]=this.wrap(t,this._parent),t}}),qt=ht.extend({init:function(e){var t,n,i=this,r=function(){return i};ht.fn.init.call(this);for(n in e)t=e[n],"object"==typeof t&&t&&!t.getTime&&"_"!=n.charAt(0)&&(t=i.wrap(t,n,r)),i[n]=t;i.uid=dt.guid()},shouldSerialize:function(e){return this.hasOwnProperty(e)&&"_events"!==e&&typeof this[e]!==gt&&"uid"!==e},forEach:function(e){for(var t in this)this.shouldSerialize(t)&&e(this[t],t)},toJSON:function(){var e,t,n={};for(t in this)this.shouldSerialize(t)&&(e=this[t],(e instanceof qt||e instanceof jt)&&(e=e.toJSON()),n[t]=e);return n},get:function(e){var t,n=this;return n.trigger(kt,{field:e}),t="this"===e?n:dt.getter(e,!0)(n)},_set:function(e,t){var n,i,r,o=this,a=e.indexOf(".")>=0;if(a)for(n=e.split("."),i="";n.length>1;){if(i+=n.shift(),r=dt.getter(i,!0)(o),r instanceof qt)return r.set(n.join("."),t),a;i+="."}return dt.setter(e)(o,t),a},set:function(e,t){var n=this,i=e.indexOf(".")>=0,r=dt.getter(e,!0)(n);r!==t&&(n.trigger("set",{field:e,value:t})||(i||(t=n.wrap(t,e,function(){return n})),(!n._set(e,t)||e.indexOf("(")>=0||e.indexOf("[")>=0)&&n.trigger(wt,{field:e})))},parent:ct,wrap:function(e,t,i){var r,o,a=this,s=Ht.call(e);return null==e||"[object Object]"!==s&&"[object Array]"!==s||(r=e instanceof jt,o=e instanceof K,"[object Object]"!==s||o||r?("[object Array]"===s||r||o)&&(r||o||(e=new jt(e)),e.parent()!=i()&&e.bind(wt,n(a,wt,t,!1))):(e instanceof qt||(e=new qt(e)),e.parent()!=i()&&(e.bind(kt,n(a,kt,t,!0)),e.bind(wt,n(a,wt,t,!0)))),e.parent=i),e}}),$t={number:function(e){return dt.parseFloat(e)},date:function(e){return dt.parseDate(e)},"boolean":function(e){return typeof e===ft?"true"===e.toLowerCase():null!=e?!!e:e},string:function(e){return null!=e?e+"":e},"default":function(e){return e}},Yt={string:"",number:0,date:new Date,"boolean":!1,"default":""},Kt=qt.extend({init:function(n){var i,r,o=this;if((!n||e.isEmptyObject(n))&&(n=e.extend({},o.defaults,n),o._initializers))for(i=0;o._initializers.length>i;i++)r=o._initializers[i],n[r]=o.defaults[r]();qt.fn.init.call(o,n),o.dirty=!1,o.idField&&(o.id=o.get(o.idField),o.id===t&&(o.id=o._defaultId))},shouldSerialize:function(e){return qt.fn.shouldSerialize.call(this,e)&&"uid"!==e&&!("id"!==this.idField&&"id"===e)&&"dirty"!==e&&"_accessors"!==e},_parse:function(e,t){var n,i=this,o=e,a=i.fields||{};return e=a[e],e||(e=r(a,o)),e&&(n=e.parse,!n&&e.type&&(n=$t[e.type.toLowerCase()])),n?n(t):t},_notifyChange:function(e){var t=e.action;("add"==t||"remove"==t)&&(this.dirty=!0)},editable:function(e){return e=(this.fields||{})[e],e?e.editable!==!1:!0},set:function(e,t,n){var r=this;r.editable(e)&&(t=r._parse(e,t),i(t,r.get(e))||(r.dirty=!0,qt.fn.set.call(r,e,t,n)))},accept:function(e){var t,n,i=this,r=function(){return i};for(t in e)n=e[t],"_"!=t.charAt(0)&&(n=i.wrap(e[t],t,r)),i._set(t,n);i.idField&&(i.id=i.get(i.idField)),i.dirty=!1},isNew:function(){return this.id===this._defaultId}});Kt.define=function(e,n){n===t&&(n=e,e=Kt);var i,r,o,a,s,l,c,d,u=tt({defaults:{}},n),h={},p=u.id,f=[];if(p&&(u.idField=p),u.id&&delete u.id,p&&(u.defaults[p]=u._defaultId=""),"[object Array]"===Ht.call(u.fields)){for(l=0,c=u.fields.length;c>l;l++)o=u.fields[l],typeof o===ft?h[o]={}:o.field&&(h[o.field]=o);u.fields=h}for(r in u.fields)o=u.fields[r],a=o.type||"default",s=null,d=r,r=typeof o.field===ft?o.field:r,o.nullable||(s=u.defaults[d!==r?d:r]=o.defaultValue!==t?o.defaultValue:Yt[a.toLowerCase()],"function"==typeof s&&f.push(r)),n.id===r&&(u._defaultId=s),u.defaults[d!==r?d:r]=s,o.parse=o.parse||$t[a];return f.length>0&&(u._initializers=f),i=e.extend(u),i.define=function(e){return Kt.define(i,e)},u.fields&&(i.fields=u.fields,i.idField=u.idField),i},N={selector:function(e){return ut(e)?e:Et(e)},compare:function(e){var t=this.selector(e);return function(e,n){return e=t(e),n=t(n),null==e&&null==n?0:null==e?-1:null==n?1:e.localeCompare?e.localeCompare(n):e>n?1:n>e?-1:0}},create:function(e){var t=e.compare||this.compare(e.field);return"desc"==e.dir?function(e,n){return t(n,e,!0)}:t},combine:function(e){return function(t,n){var i,r,o=e[0](t,n);for(i=1,r=e.length;r>i;i++)o=o||e[i](t,n);return o}}},V=tt({},N,{asc:function(e){var t=this.selector(e);return function(e,n){var i=t(e),r=t(n);return i&&i.getTime&&r&&r.getTime&&(i=i.getTime(),r=r.getTime()),i===r?e.__position-n.__position:null==i?-1:null==r?1:i.localeCompare?i.localeCompare(r):i>r?1:-1}},desc:function(e){var t=this.selector(e);return function(e,n){var i=t(e),r=t(n);return i&&i.getTime&&r&&r.getTime&&(i=i.getTime(),r=r.getTime()),i===r?e.__position-n.__position:null==i?1:null==r?-1:r.localeCompare?r.localeCompare(i):r>i?1:-1}},create:function(e){return this[e.dir](e.field)}}),H=function(e,t){var n,i=e.length,r=Array(i);for(n=0;i>n;n++)r[n]=t(e[n],n,e);return r},U=function(){function e(e){return e.replace(Wt,"\\").replace(Ut,"")}function t(t,n,i,r){var o;return null!=i&&(typeof i===ft&&(i=e(i),o=Vt.exec(i),o?i=new Date(+o[1]):r?(i="'"+i.toLowerCase()+"'",n="("+n+" || '').toLowerCase()"):i="'"+i+"'"),i.getTime&&(n="("+n+"?"+n+".getTime():"+n+")",i=i.getTime())),n+" "+t+" "+i}return{eq:function(e,n,i){return t("==",e,n,i)},neq:function(e,n,i){return t("!=",e,n,i)},gt:function(e,n,i){return t(">",e,n,i)},gte:function(e,n,i){return t(">=",e,n,i)},lt:function(e,n,i){return t("<",e,n,i)},lte:function(e,n,i){return t("<=",e,n,i)},startswith:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".lastIndexOf('"+n+"', 0) == 0"},endswith:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"', "+t+".length - "+(n||"").length+") >= 0"},contains:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"') >= 0"},doesnotcontain:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"') == -1"}}}(),o.filterExpr=function(e){var n,i,r,a,s,l,c=[],d={and:" && ",or:" || "},u=[],h=[],p=e.filters;for(n=0,i=p.length;i>n;n++)r=p[n],s=r.field,l=r.operator,r.filters?(a=o.filterExpr(r),r=a.expression.replace(/__o\[(\d+)\]/g,function(e,t){return t=+t,"__o["+(h.length+t)+"]"}).replace(/__f\[(\d+)\]/g,function(e,t){return t=+t,"__f["+(u.length+t)+"]"}),h.push.apply(h,a.operators),u.push.apply(u,a.fields)):(typeof s===gt?(a="__f["+u.length+"](d)",u.push(s)):a=dt.expr(s),typeof l===gt?(r="__o["+h.length+"]("+a+", "+r.value+")",h.push(l)):r=U[(l||"eq").toLowerCase()](a,r.value,r.ignoreCase!==t?r.ignoreCase:!0)),c.push(r);return{expression:"("+c.join(d[e.logic])+")",fields:u,operators:h}},W={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain"},o.normalizeFilter=l,o.prototype={toArray:function(){return this.data},range:function(e,t){return new o(this.data.slice(e,e+t))},skip:function(e){return new o(this.data.slice(e))},take:function(e){return new o(this.data.slice(0,e))},select:function(e){return new o(H(this.data,e))},order:function(e,t){var n={dir:t};return e&&(e.compare?n.compare=e.compare:n.field=e),new o(this.data.slice(0).sort(N.create(n)))},orderBy:function(e){return this.order(e,"asc")},orderByDescending:function(e){return this.order(e,"desc")},sort:function(e,t,n){var i,r,o=a(e,t),s=[];if(n=n||N,o.length){for(i=0,r=o.length;r>i;i++)s.push(n.create(o[i]));return this.orderBy({compare:n.combine(s)})}return this},filter:function(e){var t,n,i,r,a,s,c,d,u=this.data,h=[];if(e=l(e),!e||0===e.filters.length)return this;for(r=o.filterExpr(e),s=r.fields,c=r.operators,a=d=Function("d, __f, __o","return "+r.expression),(s.length||c.length)&&(d=function(e){return a(e,s,c)}),t=0,i=u.length;i>t;t++)n=u[t],d(n)&&h.push(n);return new o(h)},group:function(e,t){e=d(e||[]),t=t||this.data;var n,i=this,r=new o(i.data);return e.length>0&&(n=e[0],r=r.groupBy(n).select(function(i){var r=new o(t).filter([{field:i.field,operator:"eq",value:i.value,ignoreCase:!1}]);return{field:i.field,value:i.value,items:e.length>1?new o(i.items).group(e.slice(1),r.toArray()).toArray():i.items,hasSubgroups:e.length>1,aggregates:r.aggregate(n.aggregates)}})),r},groupBy:function(e){if(rt(e)||!this.data.length)return new o([]);var t,n,i,r,a=e.field,s=this._sortForGrouping(a,e.dir||"asc"),l=dt.accessor(a),c=l.get(s[0],a),d={field:a,value:c,items:[]},h=[d];for(i=0,r=s.length;r>i;i++)t=s[i],n=l.get(t,a),u(c,n)||(c=n,d={field:a,value:c,items:[]},h.push(d)),d.items.push(t);return new o(h)},_sortForGrouping:function(e,t){var n,i,r=this.data;if(!Nt){for(n=0,i=r.length;i>n;n++)r[n].__position=n;for(r=new o(r).sort(e,t,V).toArray(),n=0,i=r.length;i>n;n++)delete r[n].__position;return r}return this.sort(e,t).toArray()},aggregate:function(e){var t,n,i={},r={};if(e&&e.length)for(t=0,n=this.data.length;n>t;t++)h(i,e,this.data[t],t,n,r);return i}},j={sum:function(e,t,n){var i=n.get(t);return p(e)?p(i)&&(e+=i):e=i,e},count:function(e){return(e||0)+1},average:function(e,n,i,r,o,a){var s=i.get(n);return a.count===t&&(a.count=0),p(e)?p(s)&&(e+=s):e=s,p(s)&&a.count++,r==o-1&&p(e)&&(e/=a.count),e},max:function(e,t,n){var i=n.get(t);return p(e)||f(e)||(e=i),i>e&&(p(i)||f(i))&&(e=i),e},min:function(e,t,n){var i=n.get(t);return p(e)||f(e)||(e=i),e>i&&(p(i)||f(i))&&(e=i),e}},o.process=function(e,n){n=n||{};var i,r=new o(e),s=n.group,l=d(s||[]).concat(a(n.sort||[])),c=n.filterCallback,u=n.filter,h=n.skip,p=n.take;return u&&(r=r.filter(u),c&&(r=c(r)),i=r.toArray().length),l&&(r=r.sort(l),s&&(e=r.toArray())),h!==t&&p!==t&&(r=r.range(h,p)),s&&(r=r.group(s,e)),{total:i,data:r.toArray()}},G=pt.extend({init:function(e){this.data=e.data},read:function(e){e.success(this.data)},update:function(e){e.success(e.data)},create:function(e){e.success(e.data)},destroy:function(e){e.success(e.data)}}),q=pt.extend({init:function(e){var t,n=this;e=n.options=tt({},n.options,e),lt(Dt,function(t,n){typeof e[n]===ft&&(e[n]={url:e[n]})}),n.cache=e.cache?$.create(e.cache):{find:ct,add:ct},t=e.parameterMap,ut(e.push)&&(n.push=e.push),n.push||(n.push=At),n.parameterMap=ut(t)?t:function(e){var n={};return lt(e,function(e,i){e in t&&(e=t[e],it(e)&&(i=e.value(i),e=e.key)),n[e]=i}),n}},options:{parameterMap:At},create:function(e){return st(this.setup(e,mt))},read:function(n){var i,r,o,a=this,s=a.cache;n=a.setup(n,vt),i=n.success||ct,r=n.error||ct,o=s.find(n.data),o!==t?i(o):(n.success=function(e){s.add(n.data,e),i(e)},e.ajax(n))},update:function(e){return st(this.setup(e,_t))},destroy:function(e){return st(this.setup(e,yt))},setup:function(e,t){e=e||{};var n,i=this,r=i.options[t],o=ut(r.data)?r.data(e.data):r.data;return e=tt(!0,{},r,e),n=tt(!0,{},o,e.data),e.data=i.parameterMap(n,t),ut(e.url)&&(e.url=e.url(n)),e}}),$=pt.extend({init:function(){this._store={}},add:function(e,n){e!==t&&(this._store[Mt(e)]=n)},find:function(e){return this._store[Mt(e)]},clear:function(){this._store={}},remove:function(e){delete this._store[Mt(e)]}}),$.create=function(e){var t={inmemory:function(){return new $}};return it(e)&&ut(e.find)?e:e===!0?new $:t[e]()},Y=pt.extend({init:function(e){var t,n,i,r,o,a,s,l,c,d,u,h,p,f=this;e=e||{};for(t in e)n=e[t],f[t]=typeof n===ft?Et(n):n;r=e.modelBase||Kt,it(f.model)&&(f.model=i=r.define(f.model)),o=nt(f.data,f),f._dataAccessFunction=o,f.model&&(a=nt(f.groups,f),s=nt(f.serialize,f),l={},c={},d={},u={},h=!1,i=f.model,i.fields&&(lt(i.fields,function(e,t){var n;p=e,it(t)&&t.field?p=t.field:typeof t===ft&&(p=t),it(t)&&t.from&&(n=t.from),h=h||n&&n!==e||p!==e,c[e]=Et(n||p),d[e]=Et(e),l[n||p]=e,u[e]=n||p}),!e.serialize&&h&&(f.serialize=y(s,i,m,d,l,u))),f._dataAccessFunction=o,f.data=y(o,i,v,c,l,u),f.groups=y(a,i,_,c,l,u))},errors:function(e){return e?e.errors:null},parse:At,data:At,total:function(e){return e.length},groups:At,aggregates:function(){return{}},serialize:function(e){return e}}),K=ht.extend({init:function(e){var n,i,r,o=this;e&&(i=e.data),e=o.options=tt({},o.options,e),o._map={},o._prefetch={},o._data=[],o._pristineData=[],o._ranges=[],o._view=[],o._pristineTotal=0,o._destroyed=[],o._pageSize=e.pageSize,o._page=e.page||(e.pageSize?1:t),o._sort=a(e.sort),o._filter=l(e.filter),o._group=d(e.group),o._aggregate=e.aggregate,o._total=e.total,o._shouldDetachObservableParents=!0,ht.fn.init.call(o),o.transport=Q.create(e,i),ut(o.transport.push)&&o.transport.push({pushCreate:nt(o._pushCreate,o),pushUpdate:nt(o._pushUpdate,o),pushDestroy:nt(o._pushDestroy,o)}),null!=e.offlineStorage&&("string"==typeof e.offlineStorage?(r=e.offlineStorage,o._storage={getItem:function(){return JSON.parse(localStorage.getItem(r))},setItem:function(e){localStorage.setItem(r,Mt(e))}}):o._storage=e.offlineStorage),o.reader=new dt.data.readers[e.schema.type||"json"](e.schema),n=o.reader.model||{},o._detachObservableParents(),o._data=o._observe(o._data),o._online=!0,o.bind(["push",xt,wt,Ct,bt,Tt,St],e)},options:{data:null,schema:{modelBase:Kt},offlineStorage:null,serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,batch:!1},online:function(e){return e===t?this._online:(this._online!=e&&(this._online=e,e&&this.sync()),t)},offlineData:function(e){return null==this.options.offlineStorage?null:e!==t?this._storage.setItem(e):this._storage.getItem()||{}},_isServerGrouped:function(){var e=this.group()||[];return this.options.serverGrouping&&e.length},_pushCreate:function(e){this._push(e,"pushCreate")},_pushUpdate:function(e){this._push(e,"pushUpdate")},_pushDestroy:function(e){this._push(e,"pushDestroy")},_push:function(e,t){var n=this._readData(e);n||(n=e),this[t](n)},_flatData:function(e,t){if(e){if(this._isServerGrouped())return b(e);if(!t)for(var n=0;e.length>n;n++)e.at(n)}return e},parent:ct,get:function(e){var t,n,i=this._flatData(this._data);for(t=0,n=i.length;n>t;t++)if(i[t].id==e)return i[t]},getByUid:function(e){var t,n,i=this._flatData(this._data);if(i)for(t=0,n=i.length;n>t;t++)if(i[t].uid==e)return i[t]},indexOf:function(e){return M(this._data,e)},at:function(e){return this._data.at(e)},data:function(e){var n,i=this;if(e===t){if(i._data)for(n=0;i._data.length>n;n++)i._data.at(n);return i._data}i._detachObservableParents(),i._data=this._observe(e),i._pristineData=e.slice(0),i._storeData(),i._ranges=[],i.trigger("reset"),i._addRange(i._data),i._total=i._data.length,i._pristineTotal=i._total,i._process(i._data)},view:function(e){return e===t?this._view:(this._view=this._observeView(e),t)},_observeView:function(e){return T(e,this._data,this._ranges,this.reader.model||qt),new Gt(e,this.reader.model)},flatView:function(){var e=this.group()||[];return e.length?b(this._view):this._view},add:function(e){return this.insert(this._data.length,e)},_createNewModel:function(e){return this.reader.model?new this.reader.model(e):e instanceof qt?e:new qt(e)},insert:function(e,t){return t||(t=e,e=0),t instanceof Kt||(t=this._createNewModel(t)),this._isServerGrouped()?this._data.splice(e,0,A(this.group(),t)):this._data.splice(e,0,t),t},pushCreate:function(e){var t,n,i,r,o,a;ot(e)||(e=[e]),t=[],n=this.options.autoSync,this.options.autoSync=!1;try{for(i=0;e.length>i;i++)r=e[i],o=this.add(r),t.push(o),a=o.toJSON(),this._isServerGrouped()&&(a=A(this.group(),a)),this._pristineData.push(a)}finally{this.options.autoSync=n}t.length&&this.trigger("push",{type:"create",items:t})},pushUpdate:function(e){var t,n,i,r,o;for(ot(e)||(e=[e]),t=[],n=0;e.length>n;n++)i=e[n],r=this._createNewModel(i),o=this.get(r.id),o?(t.push(o),o.accept(i),o.trigger("change"),this._updatePristineForModel(o,i)):this.pushCreate(i);t.length&&this.trigger("push",{type:"update",items:t})},pushDestroy:function(e){var t=this._removeItems(e);t.length&&this.trigger("push",{type:"destroy",items:t})},_removeItems:function(e){var t,n,i,r,o,a;ot(e)||(e=[e]),t=[],n=this.options.autoSync,this.options.autoSync=!1;try{for(i=0;e.length>i;i++)r=e[i],o=this._createNewModel(r),a=!1,this._eachItem(this._data,function(e){var n,i;for(n=0;e.length>n;n++)if(i=e.at(n),i.id===o.id){t.push(i),e.splice(n,1),a=!0;break}}),a&&(this._removePristineForModel(o),this._destroyed.pop())}finally{this.options.autoSync=n}return t},remove:function(e){var n,i=this,r=i._isServerGrouped();return this._eachItem(i._data,function(o){return n=D(o,e),n&&r?(n.isNew&&n.isNew()||i._destroyed.push(n),!0):t}),this._removeModelFromRanges(e),this._updateRangesLength(),e},sync:function(){var t,n,i,r,o=this,a=[],s=[],l=o._destroyed,c=o._flatData(o._data);if(o.online()){if(!o.reader.model)return;for(t=0,n=c.length;n>t;t++)c[t].isNew()?a.push(c[t]):c[t].dirty&&s.push(c[t]);r=[],r.push.apply(r,o._send("create",a)),r.push.apply(r,o._send("update",s)),r.push.apply(r,o._send("destroy",l)),i=e.when.apply(null,r).then(function(){var e,t;for(e=0,t=arguments.length;t>e;e++)o._accept(arguments[e]);o._storeData(!0),o._change({action:"sync"}),o.trigger(bt)})}else o._storeData(!0),o._change({action:"sync"}),i=e.Deferred().resolve().promise();return i},cancelChanges:function(e){var t=this;e instanceof dt.data.Model?t._cancelModel(e):(t._destroyed=[],t._detachObservableParents(),t._data=t._observe(t._pristineData),t.options.serverPaging&&(t._total=t._pristineTotal),t._change())},hasChanges:function(){var e,t,n=this._data;if(this._destroyed.length)return!0;for(e=0,t=n.length;t>e;e++)if(n[e].isNew()||n[e].dirty)return!0;return!1},_accept:function(t){var n,i=this,r=t.models,o=t.response,a=0,s=i._isServerGrouped(),l=i._pristineData,c=t.type;if(i.trigger(Tt,{response:o,type:c}),o&&!rt(o)){if(o=i.reader.parse(o),i._handleCustomErrors(o))return;o=i.reader.data(o),ot(o)||(o=[o])}else o=e.map(r,function(e){return e.toJSON()});for("destroy"===c&&(i._destroyed=[]),a=0,n=r.length;n>a;a++)"destroy"!==c?(r[a].accept(o[a]),"create"===c?l.push(s?A(i.group(),r[a]):o[a]):"update"===c&&i._updatePristineForModel(r[a],o[a])):i._removePristineForModel(r[a])},_updatePristineForModel:function(e,t){this._executeOnPristineForModel(e,function(e,n){dt.deepExtend(n[e],t)})},_executeOnPristineForModel:function(e,n){this._eachPristineItem(function(i){var r=E(i,e);return r>-1?(n(r,i),!0):t})},_removePristineForModel:function(e){this._executeOnPristineForModel(e,function(e,t){t.splice(e,1)})},_readData:function(e){var t=this._isServerGrouped()?this.reader.groups:this.reader.data;return t.call(this.reader,e)},_eachPristineItem:function(e){this._eachItem(this._pristineData,e)},_eachItem:function(e,t){e&&e.length&&(this._isServerGrouped()?x(e,t):t(e))},_pristineForModel:function(e){var n,i,r=function(r){return i=E(r,e),i>-1?(n=r[i],!0):t};return this._eachPristineItem(r),n},_cancelModel:function(e){var t=this._pristineForModel(e);this._eachItem(this._data,function(n){var i=M(n,e);i>=0&&(!t||e.isNew()&&!t.__state__?n.splice(i,1):n[i].accept(t))})},_promise:function(t,n,i){var r=this;return e.Deferred(function(e){r.trigger(Ct,{type:i}),r.transport[i].call(r.transport,tt({success:function(t){e.resolve({response:t,models:n,type:i})},error:function(t,n,i){e.reject(t),r.error(t,n,i)}},t))}).promise()},_send:function(e,t){var n,i,r=this,o=[],a=r.reader.serialize(g(t));if(r.options.batch)t.length&&o.push(r._promise({data:{models:a}},t,e));else for(n=0,i=t.length;i>n;n++)o.push(r._promise({data:a[n]},[t[n]],e));return o},read:function(t){var n=this,i=n._params(t),r=e.Deferred();return n._queueRequest(i,function(){n.trigger(Ct,{type:"read"})?(n._dequeueRequest(),r.resolve()):(n.trigger(St),n._ranges=[],n.trigger("reset"),n.online()?n.transport.read({data:i,success:function(e){n.success(e),r.resolve()},error:function(){var e=Lt.call(arguments);n.error.apply(n,e),r.reject.apply(r,e)}}):null!=n.options.offlineStorage&&(n.success(n.offlineData()),r.resolve()))}),r.promise()},_readAggregates:function(e){return this.reader.aggregates(e)},success:function(e){var n,i,r,o,a=this,s=a.options;if(a.trigger(Tt,{response:e,type:"read"}),a.online()){if(e=a.reader.parse(e),a._handleCustomErrors(e))return a._dequeueRequest(),t;a._total=a.reader.total(e),a._aggregate&&s.serverAggregates&&(a._aggregateResult=a._readAggregates(e)),e=a._readData(e)}else{for(e=a._readData(e),n=[],i=0;e.length>i;i++)r=e[i],o=r.__state__,"destroy"==o?this._destroyed.push(this._createNewModel(r)):n.push(r);e=n,a._total=e.length}a._pristineTotal=a._total,a._pristineData=e.slice(0),a._detachObservableParents(),a._data=a._observe(e),null!=a.options.offlineStorage&&a._eachItem(a._data,function(e){var t,n;for(t=0;e.length>t;t++)n=e.at(t),"update"==n.__state__&&(n.dirty=!0)}),a._storeData(),a._addRange(a._data),a._process(a._data),a._dequeueRequest()},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents)for(var e=0;this._data.length>e;e++)this._data[e].parent&&(this._data[e].parent=ct)},_storeData:function(e){function t(e){var n,i,r,s=[];for(n=0;e.length>n;n++)i=e.at(n),r=i.toJSON(),o&&i.items?r.items=t(i.items):(r.uid=i.uid,a&&(i.isNew()?r.__state__="create":i.dirty&&(r.__state__="update"))),s.push(r);return s}var n,i,r,o=this._isServerGrouped(),a=this.reader.model;if(null!=this.options.offlineStorage){for(n=t(this._data),i=0;this._destroyed.length>i;i++)r=this._destroyed[i].toJSON(),r.__state__="destroy",n.push(r);this.offlineData(n),e&&(this._pristineData=n)}},_addRange:function(e){var t=this,n=t._skip||0,i=n+t._flatData(e,!0).length;t._ranges.push({start:n,end:i,data:e}),t._ranges.sort(function(e,t){return e.start-t.start})},error:function(e,t,n){this._dequeueRequest(),this.trigger(Tt,{}),this.trigger(xt,{xhr:e,status:t,errorThrown:n})},_params:function(e){var t=this,n=tt({take:t.take(),skip:t.skip(),page:t.page(),pageSize:t.pageSize(),sort:t._sort,filter:t._filter,group:t._group,aggregate:t._aggregate},e);return t.options.serverPaging||(delete n.take,delete n.skip,delete n.page,delete n.pageSize),t.options.serverGrouping?t.reader.model&&n.group&&(n.group=F(n.group,t.reader.model)):delete n.group,t.options.serverFiltering?t.reader.model&&n.filter&&(n.filter=z(n.filter,t.reader.model)):delete n.filter,t.options.serverSorting?t.reader.model&&n.sort&&(n.sort=F(n.sort,t.reader.model)):delete n.sort,t.options.serverAggregates?t.reader.model&&n.aggregate&&(n.aggregate=F(n.aggregate,t.reader.model)):delete n.aggregate,n},_queueRequest:function(e,n){var i=this;i._requestInProgress?i._pending={callback:nt(n,i),options:e}:(i._requestInProgress=!0,i._pending=t,n())},_dequeueRequest:function(){var e=this;e._requestInProgress=!1,e._pending&&e._queueRequest(e._pending.options,e._pending.callback)},_handleCustomErrors:function(e){if(this.reader.errors){var t=this.reader.errors(e);if(t)return this.trigger(xt,{xhr:null,status:"customerror",errorThrown:"custom error",errors:t}),!0}return!1},_observe:function(e){var t,n=this,i=n.reader.model,r=!1;return n._shouldDetachObservableParents=!0,i&&e.length&&(r=!(e[0]instanceof i)),e instanceof jt?(n._shouldDetachObservableParents=!1,r&&(e.type=n.reader.model,e.wrapAll(e,e))):(t=n.pageSize()?Gt:jt,e=new t(e,n.reader.model),e.parent=function(){return n.parent()}),n._isServerGrouped()&&k(e,i),n._changeHandler&&n._data&&n._data instanceof jt?n._data.unbind(wt,n._changeHandler):n._changeHandler=nt(n._change,n),e.bind(wt,n._changeHandler)},_change:function(e){var t,n,i,r=this,o=e?e.action:"";if("remove"===o)for(t=0,n=e.items.length;n>t;t++)e.items[t].isNew&&e.items[t].isNew()||r._destroyed.push(e.items[t]);!r.options.autoSync||"add"!==o&&"remove"!==o&&"itemchange"!==o?(i=parseInt(r._total,10),p(r._total)||(i=parseInt(r._pristineTotal,10)),"add"===o?i+=e.items.length:"remove"===o?i-=e.items.length:"itemchange"===o||"sync"===o||r.options.serverPaging?"sync"===o&&(i=r._pristineTotal=parseInt(r._total,10)):i=r._pristineTotal,r._total=i,r._process(r._data,e)):r.sync()},_calculateAggregates:function(e,t){t=t||{};var n=new o(e),i=t.aggregate,r=t.filter;return r&&(n=n.filter(r)),n.aggregate(i)},_process:function(e,n){var i,r=this,o={};r.options.serverPaging!==!0&&(o.skip=r._skip,o.take=r._take||r._pageSize,o.skip===t&&r._page!==t&&r._pageSize!==t&&(o.skip=(r._page-1)*r._pageSize)),r.options.serverSorting!==!0&&(o.sort=r._sort),r.options.serverFiltering!==!0&&(o.filter=r._filter),r.options.serverGrouping!==!0&&(o.group=r._group),r.options.serverAggregates!==!0&&(o.aggregate=r._aggregate,r._aggregateResult=r._calculateAggregates(e,o)),i=r._queryProcess(e,o),r.view(i.data),i.total===t||r.options.serverFiltering||(r._total=i.total),n=n||{},n.items=n.items||r._view,r.trigger(wt,n)},_queryProcess:function(e,t){return o.process(e,t)},_mergeState:function(e){var n=this;return e!==t&&(n._pageSize=e.pageSize,n._page=e.page,n._sort=e.sort,n._filter=e.filter,n._group=e.group,n._aggregate=e.aggregate,n._skip=e.skip,n._take=e.take,n._skip===t&&(n._skip=n.skip(),e.skip=n.skip()),n._take===t&&n._pageSize!==t&&(n._take=n._pageSize,e.take=n._take),e.sort&&(n._sort=e.sort=a(e.sort)),e.filter&&(n._filter=e.filter=l(e.filter)),e.group&&(n._group=e.group=d(e.group)),e.aggregate&&(n._aggregate=e.aggregate=c(e.aggregate))),e},query:function(n){var i,r=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates;return r||(this._data===t||0===this._data.length)&&!this._destroyed.length?this.read(this._mergeState(n)):(this.trigger(Ct,{type:"read"})||(this.trigger(St),i=this._queryProcess(this._data,this._mergeState(n)),this.options.serverFiltering||(this._total=i.total!==t?i.total:this._data.length),this._aggregateResult=this._calculateAggregates(this._data,n),this.view(i.data),this.trigger(Tt,{}),this.trigger(wt,{items:i.data})),e.Deferred().resolve().promise())},fetch:function(e){return this._query().then(nt(e,this))},_query:function(e){var t=this;return t.query(tt({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate()},e))},next:function(e){var n=this,i=n.page(),r=n.total();return e=e||{},!i||r&&i+1>n.totalPages()?t:(n._skip=i*n.take(),i+=1,e.page=i,n._query(e),i)},prev:function(e){var n=this,i=n.page();return e=e||{},i&&1!==i?(n._skip=n._skip-n.take(),i-=1,e.page=i,n._query(e),i):t},page:function(e){var n,i=this;return e!==t?(e=Pt.max(Pt.min(Pt.max(e,1),i.totalPages()),1),i._query({page:e}),t):(n=i.skip(),n!==t?Pt.round((n||0)/(i.take()||1))+1:t)},pageSize:function(e){var n=this;return e!==t?(n._query({pageSize:e,page:1}),t):n.take()},sort:function(e){var n=this;return e!==t?(n._query({sort:e}),t):n._sort},filter:function(e){var n=this;return e===t?n._filter:(n._query({filter:e,page:1}),t)},group:function(e){var n=this;return e!==t?(n._query({group:e}),t):n._group},total:function(){return parseInt(this._total||0,10)},aggregate:function(e){var n=this;return e!==t?(n._query({aggregate:e}),t):n._aggregate},aggregates:function(){return this._aggregateResult},totalPages:function(){var e=this,t=e.pageSize()||e.total();return Pt.ceil((e.total()||0)/t)},inRange:function(e,t){var n=this,i=Pt.min(e+t,n.total());return!n.options.serverPaging&&n._data.length>0?!0:n._findRange(e,i).length>0},lastRange:function(){var e=this._ranges;return e[e.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var e=this._ranges;return e.length&&e[0].data.length&&e[0].data[0].uid},enableRequestsInProgress:function(){this._skipRequestsInProgress=!1},range:function(e,n){var i,r,o,a,s,l,c,d;if(e=Pt.min(e||0,this.total()),i=this,r=Pt.max(Pt.floor(e/n),0)*n,o=Pt.min(r+n,i.total()),i._skipRequestsInProgress=!1,a=i._findRange(e,Pt.min(e+n,i.total())),a.length){i._skipRequestsInProgress=!0,i._pending=t,i._skip=e>i.skip()?Pt.min(o,(i.totalPages()-1)*i.take()):r,i._take=n,s=i.options.serverPaging,l=i.options.serverSorting,c=i.options.serverFiltering,d=i.options.serverAggregates;try{i.options.serverPaging=!0,i._isServerGrouped()||i.group()&&i.group().length||(i.options.serverSorting=!0),i.options.serverFiltering=!0,i.options.serverPaging=!0,i.options.serverAggregates=!0,s&&(i._detachObservableParents(),i._data=a=i._observe(a)),i._process(a)}finally{i.options.serverPaging=s,i.options.serverSorting=l,i.options.serverFiltering=c,i.options.serverAggregates=d}}else n!==t&&(i._rangeExists(r,o)?e>r&&i.prefetch(o,n,function(){i.range(e,n)}):i.prefetch(r,n,function(){e>r&&o<i.total()&&!i._rangeExists(o,Pt.min(o+n,i.total()))?i.prefetch(o,n,function(){i.range(e,n)}):i.range(e,n)}))},_findRange:function(e,n){var i,r,o,s,l,c,u,h,p,f,g,m,v=this,_=v._ranges,y=[],w=v.options,b=w.serverSorting||w.serverPaging||w.serverFiltering||w.serverGrouping||w.serverAggregates;for(r=0,g=_.length;g>r;r++)if(i=_[r],e>=i.start&&i.end>=e){for(f=0,o=r;g>o;o++)if(i=_[o],p=v._flatData(i.data,!0),p.length&&e+f>=i.start&&(c=i.data,u=i.end,b||(m=d(v.group()||[]).concat(a(v.sort()||[])),h=v._queryProcess(i.data,{sort:m,filter:v.filter()}),p=c=h.data,h.total!==t&&(u=h.total)),s=0,e+f>i.start&&(s=e+f-i.start),l=p.length,u>n&&(l-=u-n),f+=l-s,y=v._mergeGroups(y,c,s,l),i.end>=n&&f==n-e))return y;break}return[]},_mergeGroups:function(e,t,n,i){if(this._isServerGrouped()){var r,o=t.toJSON();return e.length&&(r=e[e.length-1]),w(r,o,n,i),e.concat(o)}return e.concat(t.slice(n,i))},skip:function(){var e=this;return e._skip===t?e._page!==t?(e._page-1)*(e.take()||1):t:e._skip},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(e,t,n){var i=this;return function(r){var o,a,s,l=!1,c={start:e,end:t,data:[]};if(i._dequeueRequest(),i.trigger(Tt,{response:r,type:"read"}),r=i.reader.parse(r),s=i._readData(r),s.length){for(o=0,a=i._ranges.length;a>o;o++)if(i._ranges[o].start===e){l=!0,c=i._ranges[o];
break}l||i._ranges.push(c)}c.data=i._observe(s),c.end=c.start+i._flatData(c.data,!0).length,i._ranges.sort(function(e,t){return e.start-t.start}),i._total=i.reader.total(r),i._skipRequestsInProgress||(n&&s.length?n():i.trigger(wt,{}))}},prefetch:function(e,t,n){var i=this,r=Pt.min(e+t,i.total()),o={take:t,skip:e,page:e/t+1,pageSize:t,sort:i._sort,filter:i._filter,group:i._group,aggregate:i._aggregate};i._rangeExists(e,r)?n&&n():(clearTimeout(i._timeout),i._timeout=setTimeout(function(){i._queueRequest(o,function(){i.trigger(Ct,{type:"read"})?i._dequeueRequest():i.transport.read({data:i._params(o),success:i._prefetchSuccessHandler(e,r,n)})})},100))},_rangeExists:function(e,t){var n,i,r=this,o=r._ranges;for(n=0,i=o.length;i>n;n++)if(e>=o[n].start&&o[n].end>=t)return!0;return!1},_removeModelFromRanges:function(e){var t,n,i,r,o;for(r=0,o=this._ranges.length;o>r&&(i=this._ranges[r],this._eachItem(i.data,function(i){t=D(i,e),t&&(n=!0)}),!n);r++);},_updateRangesLength:function(){var e,t,n,i,r=0;for(n=0,i=this._ranges.length;i>n;n++)e=this._ranges[n],e.start=e.start-r,t=this._flatData(e.data,!0).length,r=e.end-t,e.end=e.start+t}}),Q={},Q.create=function(e,t){var n,i=e.transport;return i?(i.read=typeof i.read===ft?{url:i.read}:i.read,e.type&&(dt.data.transports=dt.data.transports||{},dt.data.schemas=dt.data.schemas||{},dt.data.transports[e.type]&&!it(dt.data.transports[e.type])?n=new dt.data.transports[e.type](tt(i,{data:t})):i=tt(!0,{},dt.data.transports[e.type],i),e.schema=tt(!0,{},dt.data.schemas[e.type],e.schema)),n||(n=ut(i.read)?i:new q(i))):n=new G({data:e.data||[]}),n},K.create=function(e){(ot(e)||e instanceof jt)&&(e={data:e});var t,n,i,r=e||{},o=r.data,a=r.fields,s=r.table,l=r.select,c={};if(o||!a||r.transport||(s?o=B(s,a):l&&(o=R(l,a))),dt.data.Model&&a&&(!r.schema||!r.schema.model)){for(t=0,n=a.length;n>t;t++)i=a[t],i.type&&(c[i.field]=i);rt(c)||(r.schema=tt(!0,r.schema,{model:{fields:c}}))}return r.data=o,s=null,r.table=null,r instanceof K?r:new K(r)},X=Kt.define({id:"id",init:function(e){var t=this,n=t.hasChildren||e&&e.hasChildren,i="items",r={};dt.data.Model.fn.init.call(t,e),typeof t.children===ft&&(i=t.children),r={schema:{data:i,model:{hasChildren:n,id:t.idField,fields:t.fields}}},typeof t.children!==ft&&tt(r,t.children),r.data=e,n||(n=r.schema.data),typeof n===ft&&(n=dt.getter(n)),ut(n)&&(t.hasChildren=!!n.call(t,t)),t._childrenOptions=r,t.hasChildren&&t._initChildren(),t._loaded=!(!e||!e[i]&&!e._loaded)},_initChildren:function(){var e,t,n,i=this;i.children instanceof J||(e=i.children=new J(i._childrenOptions),t=e.transport,n=t.parameterMap,t.parameterMap=function(e,t){return e[i.idField||"id"]=i.id,n&&(e=n(e,t)),e},e.parent=function(){return i},e.bind(wt,function(e){e.node=e.node||i,i.trigger(wt,e)}),e.bind(xt,function(e){var t=i.parent();t&&(e.node=e.node||i,t.trigger(xt,e))}),i._updateChildrenField())},append:function(e){this._initChildren(),this.loaded(!0),this.children.add(e)},hasChildren:!1,level:function(){for(var e=this.parentNode(),t=0;e&&e.parentNode;)t++,e=e.parentNode?e.parentNode():null;return t},_updateChildrenField:function(){var e=this._childrenOptions.schema.data;this[e||"items"]=this.children.data()},_childrenLoaded:function(){this._loaded=!0,this._updateChildrenField()},load:function(){var e,n={},i="_query";this.hasChildren?(this._initChildren(),e=this.children,n[this.idField||"id"]=this.id,this._loaded||(e._data=t,i="read"),e.one(wt,nt(this._childrenLoaded,this)),e[i](n)):this.loaded(!0)},parentNode:function(){var e=this.parent();return e.parent()},loaded:function(e){return e===t?this._loaded:(this._loaded=e,t)},shouldSerialize:function(e){return Kt.fn.shouldSerialize.call(this,e)&&"children"!==e&&"_loaded"!==e&&"hasChildren"!==e&&"_childrenOptions"!==e}}),J=K.extend({init:function(e){var t=X.define({children:e});K.fn.init.call(this,tt(!0,{},{schema:{modelBase:t,model:t}},e)),this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var e=this;e._data.bind(xt,function(t){e.trigger(xt,t)})},remove:function(e){var t,n=e.parentNode(),i=this;return n&&n._initChildren&&(i=n.children),t=K.fn.remove.call(i,e),n&&!i.data().length&&(n.hasChildren=!1),t},success:L("success"),data:L("data"),insert:function(e,t){var n=this.parent();return n&&n._initChildren&&(n.hasChildren=!0,n._initChildren()),K.fn.insert.call(this,e,t)},_find:function(e,t){var n,i,r,o,a;if(r=K.fn[e].call(this,t))return r;if(o=this._flatData(this._data))for(n=0,i=o.length;i>n;n++)if(a=o[n].children,a instanceof J&&(r=a[e](t)))return r},get:function(e){return this._find("get",e)},getByUid:function(e){return this._find("getByUid",e)}}),J.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},n=t.data,i=t.fields,r=t.list;return n&&n._dataSource?n._dataSource:(n||!i||t.transport||r&&(n=O(r,i)),t.data=n,t instanceof J?t:new J(t))},Z=dt.Observable.extend({init:function(e,t,n){dt.Observable.fn.init.call(this),this._prefetching=!1,this.dataSource=e,this.prefetch=!n;var i=this;e.bind("change",function(){i._change()}),e.bind("reset",function(){i._reset()}),this._syncWithDataSource(),this.setViewSize(t)},setViewSize:function(e){this.viewSize=e,this._recalculate()},at:function(e){var n=this.pageSize,i=!0;return e>=this.total()?(this.trigger("endreached",{index:e}),t):this.useRanges?this.useRanges?((this.dataOffset>e||e>=this.skip+n)&&(i=this.range(Math.floor(e/n)*n)),e===this.prefetchThreshold&&this._prefetch(),e===this.midPageThreshold?this.range(this.nextMidRange,!0):e===this.nextPageThreshold?this.range(this.nextFullRange):e===this.pullBackThreshold&&this.range(this.offset===this.skip?this.previousMidRange:this.previousFullRange),i?this.dataSource.at(e-this.dataOffset):(this.trigger("endreached",{index:e}),null)):t:this.dataSource.view()[e]},indexOf:function(e){return this.dataSource.data().indexOf(e)+this.dataOffset},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var e=this,t=e.pageSize,n=e.skip-e.viewSize+t,i=Pt.max(Pt.floor(n/t),0)*t;this.offset=n,this.dataSource.prefetch(i,t,function(){e._goToRange(n,!0)})},range:function(e,t){if(this.offset===e)return!0;var n=this,i=this.pageSize,r=Pt.max(Pt.floor(e/i),0)*i,o=this.dataSource;return t&&(r+=i),o.inRange(e,i)?(this.offset=e,this._recalculate(),this._goToRange(e),!0):this.prefetch?(o.prefetch(r,i,function(){n.offset=e,n._recalculate(),n._goToRange(e,!0)}),!1):!0},syncDataSource:function(){var e=this.offset;this.offset=null,this.range(e)},destroy:function(){this.unbind()},_prefetch:function(){var e=this,t=this.pageSize,n=this.skip+t,i=this.dataSource;i.inRange(n,t)||this._prefetching||!this.prefetch||(this._prefetching=!0,this.trigger("prefetching",{skip:n,take:t}),i.prefetch(n,t,function(){e._prefetching=!1,e.trigger("prefetched",{skip:n,take:t})}))},_goToRange:function(e,t){this.offset===e&&(this.dataOffset=e,this._expanding=t,this.dataSource.range(e,this.pageSize),this.dataSource.enableRequestsInProgress())},_reset:function(){this._syncPending=!0},_change:function(){var e=this.dataSource;this.length=this.useRanges?e.lastRange().end:e.view().length,this._syncPending&&(this._syncWithDataSource(),this._recalculate(),this._syncPending=!1,this.trigger("reset",{offset:this.offset})),this.trigger("resize"),this._expanding&&this.trigger("expand"),delete this._expanding},_syncWithDataSource:function(){var e=this.dataSource;this._firstItemUid=e.firstItemUid(),this.dataOffset=this.offset=e.skip()||0,this.pageSize=e.pageSize(),this.useRanges=e.options.serverPaging},_recalculate:function(){var e=this.pageSize,t=this.offset,n=this.viewSize,i=Math.ceil(t/e)*e;this.skip=i,this.midPageThreshold=i+e-1,this.nextPageThreshold=i+n-1,this.prefetchThreshold=i+Math.floor(e/3*2),this.pullBackThreshold=this.offset-1,this.nextMidRange=i+e-n,this.nextFullRange=i,this.previousMidRange=t-n,this.previousFullRange=i-e}}),et=dt.Observable.extend({init:function(e,t){var n=this;dt.Observable.fn.init.call(n),this.dataSource=e,this.batchSize=t,this._total=0,this.buffer=new Z(e,3*t),this.buffer.bind({endreached:function(e){n.trigger("endreached",{index:e.index})},prefetching:function(e){n.trigger("prefetching",{skip:e.skip,take:e.take})},prefetched:function(e){n.trigger("prefetched",{skip:e.skip,take:e.take})},reset:function(){n._total=0,n.trigger("reset")},resize:function(){n._total=Math.ceil(this.length/n.batchSize),n.trigger("resize",{total:n.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(e){var n,i,r=this.buffer,o=e*this.batchSize,a=this.batchSize,s=[];for(r.offset>o&&r.at(r.offset-1),i=0;a>i&&(n=r.at(o+i),n!==t);i++)s.push(n);return s},total:function(){return this._total},destroy:function(){this.buffer.destroy(),this.unbind()}}),tt(!0,dt.data,{readers:{json:Y},Query:o,DataSource:K,HierarchicalDataSource:J,Node:X,ObservableObject:qt,ObservableArray:jt,LazyObservableArray:Gt,LocalTransport:G,RemoteTransport:q,Cache:$,DataReader:Y,Model:Kt,Buffer:Z,BatchBuffer:et})}(window.kendo.jQuery),function(e,t){function n(t,n,i){return v.extend({init:function(e,t,n){var i=this;v.fn.init.call(i,e.element[0],t,n),i.widget=e,i._dataBinding=M(i.dataBinding,i),i._dataBound=M(i.dataBound,i),i._itemChange=M(i.itemChange,i)},itemChange:function(e){a(e.item[0],e.data,this._ns(e.ns),[e.data].concat(this.bindings[t]._parents()))},dataBinding:function(e){var t,n,i=this.widget,r=e.removedItems||i.items();for(t=0,n=r.length;n>t;t++)c(r[t])},_ns:function(t){t=t||x.ui;var n=[x.ui,x.dataviz.ui,x.mobile.ui];return n.splice(e.inArray(t,n),1),n.unshift(t),x.rolesFromNamespaces(n)},dataBound:function(e){{var i,r,o,s,l=this.widget,c=e.addedItems||l.items(),d=l[n];d.group()||[]}if(c.length)for(o=e.addedDataItems||d.flatView(),s=this.bindings[t]._parents(),i=0,r=o.length;r>i;i++)a(c[i],o[i],this._ns(e.ns),[o[i]].concat(s))},refresh:function(e){var r,o=this,a=o.widget;e=e||{},e.action||(o.destroy(),a.bind("dataBinding",o._dataBinding),a.bind("dataBound",o._dataBound),a.bind("itemChange",o._itemChange),r=o.bindings[t].get(),a[n]instanceof x.data.DataSource&&a[n]!=r&&(r instanceof x.data.DataSource?a[i](r):r&&r._dataSource?a[i](r._dataSource):a[n].data(r)))},destroy:function(){var e=this.widget;e.unbind("dataBinding",this._dataBinding),e.unbind("dataBound",this._dataBound),e.unbind("itemChange",this._itemChange)}})}function i(e,n){var i=x.initWidget(e,{},n);return i?new w(i):t}function r(e){var t,n,i,o,a,s,l,c={};for(l=e.match(b),t=0,n=l.length;n>t;t++)i=l[t],o=i.indexOf(":"),a=i.substring(0,o),s=i.substring(o+1),"{"==s.charAt(0)&&(s=r(s)),c[a]=s;return c}function o(e,t,n){var i,r={};for(i in e)r[i]=new n(t,e[i]);return r}function a(e,t,n,s){var c,d,u,h=e.getAttribute("data-"+x.ns+"role"),p=e.getAttribute("data-"+x.ns+"bind"),v=e.children,_=[],w=!0,b={};if(s=s||[t],(h||p)&&l(e),h&&(u=i(e,n)),p&&(p=r(p.replace(k,"")),u||(b=x.parseOptions(e,{textField:"",valueField:"",template:"",valueUpdate:B,valuePrimitive:!1,autoBind:!0}),b.roles=n,u=new y(e,b)),u.source=t,d=o(p,s,f),b.template&&(d.template=new m(s,"",b.template)),d.click&&(p.events=p.events||{},p.events.click=p.click,d.click.destroy(),delete d.click),d.source&&(w=!1),p.attr&&(d.attr=o(p.attr,s,f)),p.style&&(d.style=o(p.style,s,f)),p.events&&(d.events=o(p.events,s,g)),u.bind(d)),u&&(e.kendoBindingTarget=u),w&&v){for(c=0;v.length>c;c++)_[c]=v[c];for(c=0;_.length>c;c++)a(_[c],t,n,s)}}function s(t,n){var i,r,o,s=x.rolesFromNamespaces([].slice.call(arguments,2));for(n=x.observable(n),t=e(t),i=0,r=t.length;r>i;i++)o=t[i],1===o.nodeType&&a(o,n,s)}function l(e){var t=e.kendoBindingTarget;t&&(t.destroy(),R?delete e.kendoBindingTarget:e.removeAttribute?e.removeAttribute("kendoBindingTarget"):e.kendoBindingTarget=null)}function c(e){l(e),d(e)}function d(e){var t,n,i=e.children;if(i)for(t=0,n=i.length;n>t;t++)c(i[t])}function u(t){var n,i;for(t=e(t),n=0,i=t.length;i>n;n++)c(t[n])}function h(e,t){var n=e.element,i=n[0].kendoBindingTarget;i&&s(n,i.source,t)}var p,f,g,m,v,_,y,w,b,k,x=window.kendo,C=x.Observable,S=x.data.ObservableObject,T=x.data.ObservableArray,D={}.toString,A={},E=x.Class,M=e.proxy,P="value",I="source",z="events",F="checked",R=!0,B="change";!function(){var e=document.createElement("a");e.innerText!==t?p="innerText":e.textContent!==t&&(p="textContent");try{delete e.test}catch(n){R=!1}}(),f=C.extend({init:function(e,t){var n=this;C.fn.init.call(n),n.source=e[0],n.parents=e,n.path=t,n.dependencies={},n.dependencies[t]=!0,n.observable=n.source instanceof C,n._access=function(e){n.dependencies[e.field]=!0},n.observable&&(n._change=function(e){n.change(e)},n.source.bind(B,n._change))},_parents:function(){var t,n=this.parents,i=this.get();return i&&"function"==typeof i.parent&&(t=i.parent(),e.inArray(t,n)<0&&(n=[t].concat(n))),n},change:function(e){var t,n,i=e.field,r=this;if("this"===r.path)r.trigger(B,e);else for(t in r.dependencies)if(0===t.indexOf(i)&&(n=t.charAt(i.length),!n||"."===n||"["===n)){r.trigger(B,e);break}},start:function(e){e.bind("get",this._access)},stop:function(e){e.unbind("get",this._access)},get:function(){var e=this,n=e.source,i=0,r=e.path,o=n;if(!e.observable)return o;for(e.start(e.source),o=n.get(r);o===t&&n;)n=e.parents[++i],n instanceof S&&(o=n.get(r));if(o===t)for(n=e.source;o===t&&n;)n=n.parent(),n instanceof S&&(o=n.get(r));return"function"==typeof o&&(i=r.lastIndexOf("."),i>0&&(n=n.get(r.substring(0,i))),e.start(n),o=n!==e.source?o.call(n,e.source):o.call(n),e.stop(n)),n&&n!==e.source&&(e.currentSource=n,n.unbind(B,e._change).bind(B,e._change)),e.stop(e.source),o},set:function(e){var t=this.currentSource||this.source,n=x.getter(this.path)(t);"function"==typeof n?t!==this.source?n.call(t,this.source,e):n.call(t,e):t.set(this.path,e)},destroy:function(){this.observable&&(this.source.unbind(B,this._change),this.currentSource&&this.currentSource.unbind(B,this._change)),this.unbind()}}),g=f.extend({get:function(){var e,t=this.source,n=this.path,i=0;for(e=t.get(n);!e&&t;)t=this.parents[++i],t instanceof S&&(e=t.get(n));return M(e,t)}}),m=f.extend({init:function(e,t,n){var i=this;f.fn.init.call(i,e,t),i.template=n},render:function(e){var t;return this.start(this.source),t=x.render(this.template,e),this.stop(this.source),t}}),v=E.extend({init:function(e,t,n){this.element=e,this.bindings=t,this.options=n},bind:function(e,t){var n=this;e=t?e[t]:e,e.bind(B,function(e){n.refresh(t||e)}),n.refresh(t)},destroy:function(){}}),A.attr=v.extend({refresh:function(e){this.element.setAttribute(e,this.bindings.attr[e].get())}}),A.style=v.extend({refresh:function(e){this.element.style[e]=this.bindings.style[e].get()||""}}),A.enabled=v.extend({refresh:function(){this.bindings.enabled.get()?this.element.removeAttribute("disabled"):this.element.setAttribute("disabled","disabled")}}),A.readonly=v.extend({refresh:function(){this.bindings.readonly.get()?this.element.setAttribute("readonly","readonly"):this.element.removeAttribute("readonly")}}),A.disabled=v.extend({refresh:function(){this.bindings.disabled.get()?this.element.setAttribute("disabled","disabled"):this.element.removeAttribute("disabled")}}),A.events=v.extend({init:function(e,t,n){v.fn.init.call(this,e,t,n),this.handlers={}},refresh:function(t){var n=e(this.element),i=this.bindings.events[t],r=this.handlers[t];r&&n.off(t,r),r=this.handlers[t]=i.get(),n.on(t,i.source,r)},destroy:function(){var t,n=e(this.element);for(t in this.handlers)n.off(t,this.handlers[t])}}),A.text=v.extend({refresh:function(){var e=this.bindings.text.get();null==e&&(e=""),this.element[p]=e}}),A.visible=v.extend({refresh:function(){this.element.style.display=this.bindings.visible.get()?"":"none"}}),A.invisible=v.extend({refresh:function(){this.element.style.display=this.bindings.invisible.get()?"none":""}}),A.html=v.extend({refresh:function(){this.element.innerHTML=this.bindings.html.get()}}),A.value=v.extend({init:function(t,n,i){v.fn.init.call(this,t,n,i),this._change=M(this.change,this),this.eventName=i.valueUpdate||B,e(this.element).on(this.eventName,this._change),this._initChange=!1},change:function(){var e,t;this._initChange=this.eventName!=B,e=this.element.value,t=this.element.type,"date"==t?e=x.parseDate(e,"yyyy-MM-dd"):"datetime-local"==t?e=x.parseDate(e,["yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm"]):"number"==t&&(e=x.parseFloat(e)),this.bindings[P].set(e),this._initChange=!1},refresh:function(){var e,t;this._initChange||(e=this.bindings[P].get(),null==e&&(e=""),t=this.element.type,"date"==t?e=x.toString(e,"yyyy-MM-dd"):"datetime-local"==t&&(e=x.toString(e,"yyyy-MM-ddTHH:mm:ss")),this.element.value=e),this._initChange=!1},destroy:function(){e(this.element).off(this.eventName,this._change)}}),A.source=v.extend({init:function(e,t,n){v.fn.init.call(this,e,t,n);var i=this.bindings.source.get();i instanceof x.data.DataSource&&n.autoBind!==!1&&i.fetch()},refresh:function(e){var t=this,n=t.bindings.source.get();n instanceof T||n instanceof x.data.DataSource?(e=e||{},"add"==e.action?t.add(e.index,e.items):"remove"==e.action?t.remove(e.index,e.items):"itemchange"!=e.action&&t.render()):t.render()},container:function(){var e=this.element;return"table"==e.nodeName.toLowerCase()&&(e.tBodies[0]||e.appendChild(document.createElement("tbody")),e=e.tBodies[0]),e},template:function(){var e=this.options,t=e.template,n=this.container().nodeName.toLowerCase();return t||(t="select"==n?e.valueField||e.textField?x.format('<option value="#:{0}#">#:{1}#</option>',e.valueField||e.textField,e.textField||e.valueField):"<option>#:data#</option>":"tbody"==n?"<tr><td>#:data#</td></tr>":"ul"==n||"ol"==n?"<li>#:data#</li>":"#:data#",t=x.template(t)),t},add:function(t,n){var i,r,o,s,l=this.container(),c=l.cloneNode(!1),d=l.children[t];if(e(c).html(x.render(this.template(),n)),c.children.length)for(i=this.bindings.source._parents(),r=0,o=n.length;o>r;r++)s=c.children[0],l.insertBefore(s,d||null),a(s,n[r],this.options.roles,[n[r]].concat(i))},remove:function(e,t){var n,i,r=this.container();for(n=0;t.length>n;n++)i=r.children[e],c(i),r.removeChild(i)},render:function(){var t,n,i,r=this.bindings.source.get(),o=this.container(),s=this.template();if(r instanceof x.data.DataSource&&(r=r.view()),r instanceof T||"[object Array]"===D.call(r)||(r=[r]),this.bindings.template){if(d(o),e(o).html(this.bindings.template.render(r)),o.children.length)for(t=this.bindings.source._parents(),n=0,i=r.length;i>n;n++)a(o.children[n],r[n],this.options.roles,[r[n]].concat(t))}else e(o).html(x.render(s,r))}}),A.input={checked:v.extend({init:function(t,n,i){v.fn.init.call(this,t,n,i),this._change=M(this.change,this),e(this.element).change(this._change)},change:function(){var e,t,n=this.element,i=this.value();"radio"==n.type?this.bindings[F].set(i):"checkbox"==n.type&&(e=this.bindings[F].get(),e instanceof T?(i=this.element.value,"on"!==i&&"off"!==i&&(t=e.indexOf(i),t>-1?e.splice(t,1):e.push(i))):this.bindings[F].set(i))},refresh:function(){var e=this.bindings[F].get(),t=e,n=this.element;"checkbox"==n.type?(t instanceof T&&(e=this.element.value,t.indexOf(e)>=0&&(e=!0)),n.checked=e===!0):"radio"==n.type&&null!=e&&n.value===""+e&&(n.checked=!0)},value:function(){var e=this.element,t=e.value;return"checkbox"==e.type&&(t=e.checked),t},destroy:function(){e(this.element).off(B,this._change)}})},A.select={value:v.extend({init:function(t,n,i){v.fn.init.call(this,t,n,i),this._change=M(this.change,this),e(this.element).change(this._change)},change:function(){var e,n,i,r,o,a,s=[],l=this.element,c=this.options.valueField||this.options.textField,d=this.options.valuePrimitive;for(o=0,a=l.options.length;a>o;o++)n=l.options[o],n.selected&&(r=n.attributes.value,r=r&&r.specified?n.value:n.text,s.push(r));if(c)for(e=this.bindings.source.get(),e instanceof x.data.DataSource&&(e=e.view()),i=0;s.length>i;i++)for(o=0,a=e.length;a>o;o++)if(e[o].get(c)==s[i]){s[i]=e[o];break}r=this.bindings[P].get(),r instanceof T?r.splice.apply(r,[0,r.length].concat(s)):this.bindings[P].set(d||!(r instanceof S||null===r||r===t)&&c?s[0].get(c):s[0])},refresh:function(){var e,t,n,i=this.element,r=i.options,o=this.bindings[P].get(),a=o,s=this.options.valueField||this.options.textField,l=!1;for(a instanceof T||(a=new T([o])),i.selectedIndex=-1,n=0;a.length>n;n++)for(o=a[n],s&&o instanceof S&&(o=o.get(s)),e=0;r.length>e;e++)t=r[e].value,""===t&&""!==o&&(t=r[e].text),t==o&&(r[e].selected=!0,l=!0)},destroy:function(){e(this.element).off(B,this._change)}})},A.widget={events:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e,this.handlers={}},refresh:function(e){var t=this.bindings.events[e],n=this.handlers[e];n&&this.widget.unbind(e,n),n=t.get(),this.handlers[e]=function(e){e.data=t.source,n(e),e.data===t.source&&delete e.data},this.widget.bind(e,this.handlers[e])},destroy:function(){var e;for(e in this.handlers)this.widget.unbind(e,this.handlers[e])}}),checked:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e,this._change=M(this.change,this),this.widget.bind(B,this._change)},change:function(){this.bindings[F].set(this.value())},refresh:function(){this.widget.check(this.bindings[F].get()===!0)},value:function(){var e=this.element,t=e.value;return("on"==t||"off"==t)&&(t=e.checked),t},destroy:function(){this.widget.unbind(B,this._change)}}),visible:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){var e=this.bindings.visible.get();this.widget.wrapper[0].style.display=e?"":"none"}}),invisible:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){var e=this.bindings.invisible.get();this.widget.wrapper[0].style.display=e?"none":""}}),enabled:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(this.bindings.enabled.get())}}),disabled:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(!this.bindings.disabled.get())}}),source:n("source","dataSource","setDataSource"),value:v.extend({init:function(t,n,i){v.fn.init.call(this,t.element[0],n,i),this.widget=t,this._change=e.proxy(this.change,this),this.widget.first(B,this._change);var r=this.bindings.value.get();this._valueIsObservableObject=!i.valuePrimitive&&(null==r||r instanceof S),this._valueIsObservableArray=r instanceof T,this._initChange=!1},change:function(){var e,t,n,i,r,o,a,s=this.widget.value(),l=this.options.dataValueField||this.options.dataTextField,c="[object Array]"===D.call(s),d=this._valueIsObservableObject,u=[];if(this._initChange=!0,l)if(this.bindings.source&&(a=this.bindings.source.get()),""===s&&(d||this.options.valuePrimitive))s=null;else{for((!a||a instanceof x.data.DataSource)&&(a=this.widget.dataSource.view()),c&&(t=s.length,u=s.slice(0)),r=0,o=a.length;o>r;r++)if(n=a[r],i=n.get(l),c){for(e=0;t>e;e++)if(i==u[e]){u[e]=n;break}}else if(i==s){s=d?n:i;break}u[0]&&(s=this._valueIsObservableArray?u:d||!l?u[0]:u[0].get(l))}this.bindings.value.set(s),this._initChange=!1},refresh:function(){if(!this._initChange){var e,n=this.options.dataValueField||this.options.dataTextField,i=this.bindings.value.get(),r=0,o=[];if(i===t&&(i=null),n)if(i instanceof T){for(e=i.length;e>r;r++)o[r]=i[r].get(n);i=o}else i instanceof S&&(i=i.get(n));this.widget.value(i)}this._initChange=!1},destroy:function(){this.widget.unbind(B,this._change)}}),gantt:{dependencies:n("dependencies","dependencies","setDependenciesDataSource")},multiselect:{value:v.extend({init:function(t,n,i){v.fn.init.call(this,t.element[0],n,i),this.widget=t,this._change=e.proxy(this.change,this),this.widget.first(B,this._change),this._initChange=!1},change:function(){var e,t,n,i,r,o,a,s,l,c=this,d=c.bindings[P].get(),u=c.options.valuePrimitive,h=u?c.widget.value():c.widget.dataItems(),p=this.options.dataValueField||this.options.dataTextField;if(h=h.slice(0),c._initChange=!0,d instanceof T){for(e=[],t=h.length,n=0,i=0,r=d[n],o=!1;r;){for(l=!1,i=0;t>i;i++)if(u?o=h[i]==r:(s=h[i],s=s.get?s.get(p):s,o=s==(r.get?r.get(p):r)),o){h.splice(i,1),t-=1,l=!0;break}l?n+=1:(e.push(r),_(d,n,1),a=n),r=d[n]}_(d,d.length,0,h),e.length&&d.trigger("change",{action:"remove",items:e,index:a}),h.length&&d.trigger("change",{action:"add",items:h,index:d.length-1})}else c.bindings[P].set(h);c._initChange=!1},refresh:function(){if(!this._initChange){var e,n,i=this.options.dataValueField||this.options.dataTextField,r=this.bindings.value.get(),o=0,a=[];if(r===t&&(r=null),i)if(r instanceof T){for(e=r.length;e>o;o++)n=r[o],a[o]=n.get?n.get(i):n;r=a}else r instanceof S&&(r=r.get(i));this.widget.value(r)}},destroy:function(){this.widget.unbind(B,this._change)}})},scheduler:{source:n("source","dataSource","setDataSource").extend({dataBound:function(e){{var t,n,i,r,o=this.widget,s=o.view(),l=e.addedItems||o.items(),c=o.dataSource;c.group()||[]}if(l.length)for(i=e.addedDataItems||c.expand(s.startDate(),s.endDate()),r=this.bindings.source._parents(),t=0,n=i.length;n>t;t++)a(l[t],i[t],this._ns(e.ns),[i[t]].concat(r))}})}},_=function(e,t,n,i){var r,o,a,s,l;if(i=i||[],n=n||0,r=i.length,o=e.length,a=[].slice.call(e,t+n),s=a.length,r){for(r=t+r,l=0;r>t;t++)e[t]=i[l],l++;e.length=r}else if(n)for(e.length=t,n+=t;n>t;)delete e[--n];if(s){for(s=t+s,l=0;s>t;t++)e[t]=a[l],l++;e.length=s}for(t=e.length;o>t;)delete e[t],t++},y=E.extend({init:function(e,t){this.target=e,this.options=t,this.toDestroy=[]},bind:function(e){var t,n,i,r,o=this.target.nodeName.toLowerCase(),a=A[o]||{};for(t in e)t==P?n=!0:t==I?i=!0:t==z?r=!0:this.applyBinding(t,e,a);i&&this.applyBinding(I,e,a),n&&this.applyBinding(P,e,a),r&&this.applyBinding(z,e,a)},applyBinding:function(e,t,n){var i,r=n[e]||A[e],o=this.toDestroy,a=t[e];if(r)if(r=new r(this.target,t,this.options),o.push(r),a instanceof f)r.bind(a),o.push(a);else for(i in a)r.bind(a,i),o.push(a[i]);else if("template"!==e)throw Error("The "+e+" binding is not supported by the "+this.target.nodeName.toLowerCase()+" element")},destroy:function(){var e,t,n=this.toDestroy;for(e=0,t=n.length;t>e;e++)n[e].destroy()}}),w=y.extend({bind:function(e){var t,n=this,i=!1,r=!1,o=A.widget[n.target.options.name.toLowerCase()]||{};for(t in e)t==P?i=!0:t==I?r=!0:n.applyBinding(t,e,o);r&&n.applyBinding(I,e,o),i&&n.applyBinding(P,e,o)},applyBinding:function(e,t,n){var i,r=n[e]||A.widget[e],o=this.toDestroy,a=t[e];if(!r)throw Error("The "+e+" binding is not supported by the "+this.target.options.name+" widget");if(r=new r(this.target,t,this.target.options),o.push(r),a instanceof f)r.bind(a),o.push(a);else for(i in a)r.bind(a,i),o.push(a[i])}}),b=/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g,k=/\s/g,x.unbind=u,x.bind=s,x.data.binders=A,x.data.Binder=v,x.notify=h,x.observable=function(e){return e instanceof S||(e=new S(e)),e},x.observableHierarchy=function(e){function t(e){var n,i;for(n=0;e.length>n;n++)e[n]._initChildren(),i=e[n].children,i.fetch(),e[n].items=i.data(),t(e[n].items)}var n=x.data.HierarchicalDataSource.create(e);return n.fetch(),t(n.data()),n._data._dataSource=n,n._data}}(window.kendo.jQuery),function(e,t){function n(e){return parseInt(e,10)}function i(e,t){return n(e.css(t))}function r(e){var t,n=[];for(t in e)n.push(t);return n}function o(e){for(var t in e)-1!=U.indexOf(t)&&-1==W.indexOf(t)&&delete e[t];return e}function a(e,t){var n,i,r,o,a=[],s={};for(i in t)n=i.toLowerCase(),o=P&&-1!=U.indexOf(n),!E.hasHW3D&&o&&-1==W.indexOf(n)?delete t[i]:(r=t[i],o?a.push(i+"("+r+")"):s[i]=r);return a.length&&(s[st]=a.join(" ")),s}function s(e,t){var i,r,o;return P?(i=e.css(st),i==K?"scale"==t?1:0:(r=i.match(RegExp(t+"\\s*\\(([\\d\\w\\.]+)")),o=0,r?o=n(r[1]):(r=i.match(B)||[0,0,0,0,0],t=t.toLowerCase(),O.test(t)?o=parseFloat(r[3]/r[2]):"translatey"==t?o=parseFloat(r[4]/r[2]):"scale"==t?o=parseFloat(r[2]):"rotate"==t&&(o=parseFloat(Math.atan2(r[2],r[1])))),o)):parseFloat(e.css(t))}function l(e){return e.charAt(0).toUpperCase()+e.substring(1)}function c(e,t){var n=f.extend(t),i=n.prototype.directions;S[l(e)]=n,S.Element.prototype[e]=function(e,t,i,r){return new n(this.element,e,t,i,r)},T(i,function(t,i){S.Element.prototype[e+l(i)]=function(e,t,r){return new n(this.element,i,e,t,r)}})}function d(e,n,i,r){c(e,{directions:m,startValue:function(e){return this._startValue=e,this},endValue:function(e){return this._endValue=e,this},shouldHide:function(){return this._shouldHide},prepare:function(e,o){var a,s,l=this,c="out"===this._direction,d=l.element.data(n),u=!(isNaN(d)||d==i);a=u?d:t!==this._startValue?this._startValue:c?i:r,s=t!==this._endValue?this._endValue:c?r:i,this._reverse?(e[n]=s,o[n]=a):(e[n]=a,o[n]=s),l._shouldHide=o[n]===r}})}function u(e,t){var n=C.directions[t].vertical,i=e[n?J:X]()/2+"px";return _[t].replace("$size",i)}var h,p,f,g,m,v,_,y,w,b,k,x,C=window.kendo,S=C.effects,T=e.each,D=e.extend,A=e.proxy,E=C.support,M=E.browser,P=E.transforms,I=E.transitions,z={scale:0,scalex:0,scaley:0,scale3d:0},F={translate:0,translatex:0,translatey:0,translate3d:0},R=t!==document.documentElement.style.zoom&&!P,B=/matrix3?d?\s*\(.*,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?/i,L=/^(-?[\d\.\-]+)?[\w\s]*,?\s*(-?[\d\.\-]+)?[\w\s]*/i,O=/translatex?$/i,H=/(zoom|fade|expand)(\w+)/,N=/(zoom|fade|expand)/,V=/[xy]$/i,U=["perspective","rotate","rotatex","rotatey","rotatez","rotate3d","scale","scalex","scaley","scalez","scale3d","skew","skewx","skewy","translate","translatex","translatey","translatez","translate3d","matrix","matrix3d"],W=["rotate","scale","scalex","scaley","skew","skewx","skewy","translate","translatex","translatey","matrix"],j={rotate:"deg",scale:"",skew:"px",translate:"px"},G=P.css,q=Math.round,$="",Y="px",K="none",Q="auto",X="width",J="height",Z="hidden",et="origin",tt="abortId",nt="overflow",it="translate",rt="position",ot="completeCallback",at=G+"transition",st=G+"transform",lt=G+"backface-visibility",ct=G+"perspective",dt="1500px",ut="perspective("+dt+")",ht={left:{reverse:"right",property:"left",transition:"translatex",vertical:!1,modifier:-1},right:{reverse:"left",property:"left",transition:"translatex",vertical:!1,modifier:1},down:{reverse:"up",property:"top",transition:"translatey",vertical:!0,modifier:1},up:{reverse:"down",property:"top",transition:"translatey",vertical:!0,modifier:-1},top:{reverse:"bottom"},bottom:{reverse:"top"},"in":{reverse:"out",modifier:-1},out:{reverse:"in",modifier:1},vertical:{reverse:"vertical"},horizontal:{reverse:"horizontal"}};C.directions=ht,D(e.fn,{kendoStop:function(e,t){return I?S.stopQueue(this,e||!1,t||!1):this.stop(e,t)}}),P&&!I&&(T(W,function(n,i){e.fn[i]=function(n){if(t===n)return s(this,i);var r=e(this)[0],o=i+"("+n+j[i.replace(V,"")]+")";return-1==r.style.cssText.indexOf(st)?e(this).css(st,o):r.style.cssText=r.style.cssText.replace(RegExp(i+"\\(.*?\\)","i"),o),this},e.fx.step[i]=function(t){e(t.elem)[i](t.now)}}),h=e.fx.prototype.cur,e.fx.prototype.cur=function(){return-1!=W.indexOf(this.prop)?parseFloat(e(this.elem)[this.prop]()):h.apply(this,arguments)}),C.toggleClass=function(e,t,n,i){return t&&(t=t.split(" "),I&&(n=D({exclusive:"all",duration:400,ease:"ease-out"},n),e.css(at,n.exclusive+" "+n.duration+"ms "+n.ease),setTimeout(function(){e.css(at,"").css(J)},n.duration)),T(t,function(t,n){e.toggleClass(n,i)})),e},C.parseEffects=function(e,t){var n={};return"string"==typeof e?T(e.split(" "),function(e,i){var r=!N.test(i),o=i.replace(H,function(e,t,n){return t+":"+n.toLowerCase()}),a=o.split(":"),s=a[1],l={};a.length>1&&(l.direction=t&&r?ht[s].reverse:s),n[a[0]]=l}):T(e,function(e){var i=this.direction;i&&t&&!N.test(e)&&(this.direction=ht[i].reverse),n[e]=this}),n},I&&D(S,{transition:function(t,n,i){var o,s,l,c,d=0,u=t.data("keys")||[];i=D({duration:200,ease:"ease-out",complete:null,exclusive:"all"},i),l=!1,c=function(){l||(l=!0,s&&(clearTimeout(s),s=null),t.removeData(tt).dequeue().css(at,"").css(at),i.complete.call(t))},i.duration=e.fx?e.fx.speeds[i.duration]||i.duration:i.duration,o=a(t,n),e.merge(u,r(o)),t.data("keys",e.unique(u)).height(),t.css(at,i.exclusive+" "+i.duration+"ms "+i.ease).css(at),t.css(o).css(st),I.event&&(t.one(I.event,c),0!==i.duration&&(d=500)),s=setTimeout(c,i.duration+d),t.data(tt,s),t.data(ot,c)
},stopQueue:function(e,t,n){var i,r=e.data("keys"),o=!n&&r,a=e.data(ot);return o&&(i=C.getComputedStyles(e[0],r)),a&&a(),o&&e.css(i),e.removeData("keys").stop(t)}}),p=C.Class.extend({init:function(e,t){var n=this;n.element=e,n.effects=[],n.options=t,n.restore=[]},run:function(t){var n,i,r,s,l,c,d,u=this,h=t.length,p=u.element,f=u.options,g=e.Deferred(),m={},v={};for(u.effects=t,g.then(e.proxy(u,"complete")),p.data("animating",!0),i=0;h>i;i++)for(n=t[i],n.setReverse(f.reverse),n.setOptions(f),u.addRestoreProperties(n.restore),n.prepare(m,v),l=n.children(),r=0,c=l.length;c>r;r++)l[r].duration(f.duration).run();for(d in f.effects)D(v,f.effects[d].properties);for(p.is(":visible")||D(m,{display:p.data("olddisplay")||"block"}),P&&!f.reset&&(s=p.data("targetTransform"),s&&(m=D(s,m))),m=a(p,m),P&&!I&&(m=o(m)),p.css(m).css(st),i=0;h>i;i++)t[i].setup();return f.init&&f.init(),p.data("targetTransform",v),S.animate(p,v,D({},f,{complete:g.resolve})),g.promise()},stop:function(){e(this.element).kendoStop(!0,!0)},addRestoreProperties:function(e){for(var t,n=this.element,i=0,r=e.length;r>i;i++)t=e[i],this.restore.push(t),n.data(t)||n.data(t,n.css(t))},restoreCallback:function(){var e,t,n,i=this.element;for(e=0,t=this.restore.length;t>e;e++)n=this.restore[e],i.css(n,i.data(n))},complete:function(){var t=this,n=0,i=t.element,r=t.options,o=t.effects,a=o.length;for(i.removeData("animating").dequeue(),r.hide&&i.data("olddisplay",i.css("display")).hide(),this.restoreCallback(),R&&!P&&setTimeout(e.proxy(this,"restoreCallback"),0);a>n;n++)o[n].teardown();r.completeCallback&&r.completeCallback(i)}}),S.promise=function(e,t){var n,i,r,o=[],a=new p(e,t),s=C.parseEffects(t.effects);t.effects=s;for(r in s)n=S[l(r)],n&&(i=new n(e,s[r].direction),o.push(i));o[0]?a.run(o):(e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.init&&t.init(),e.dequeue(),a.complete())},D(S,{animate:function(n,r,a){var s=a.transition!==!1;delete a.transition,I&&"transition"in S&&s?S.transition(n,r,a):P?n.animate(o(r),{queue:!1,show:!1,hide:!1,duration:a.duration,complete:a.complete}):n.each(function(){var n=e(this),o={};T(U,function(e,a){var s,l,c,d,u,h,p,f=r?r[a]+" ":null;f&&(l=r,a in z&&r[a]!==t?(s=f.match(L),P&&D(l,{scale:+s[0]})):a in F&&r[a]!==t&&(c=n.css(rt),d="absolute"==c||"fixed"==c,n.data(it)||(d?n.data(it,{top:i(n,"top")||0,left:i(n,"left")||0,bottom:i(n,"bottom"),right:i(n,"right")}):n.data(it,{top:i(n,"marginTop")||0,left:i(n,"marginLeft")||0})),u=n.data(it),s=f.match(L),s&&(h=a==it+"y"?0:+s[1],p=a==it+"y"?+s[1]:+s[2],d?(isNaN(u.right)?isNaN(h)||D(l,{left:u.left+h}):isNaN(h)||D(l,{right:u.right-h}),isNaN(u.bottom)?isNaN(p)||D(l,{top:u.top+p}):isNaN(p)||D(l,{bottom:u.bottom-p})):(isNaN(h)||D(l,{marginLeft:u.left+h}),isNaN(p)||D(l,{marginTop:u.top+p})))),!P&&"scale"!=a&&a in l&&delete l[a],l&&D(o,l))}),M.msie&&delete o.scale,n.animate(o,{queue:!1,show:!1,hide:!1,duration:a.duration,complete:a.complete})})}}),S.animatedPromise=S.promise,f=C.Class.extend({init:function(e,t){var n=this;n.element=e,n._direction=t,n.options={},n._additionalEffects=[],n.restore||(n.restore=[])},reverse:function(){return this._reverse=!0,this.run()},play:function(){return this._reverse=!1,this.run()},add:function(e){return this._additionalEffects.push(e),this},direction:function(e){return this._direction=e,this},duration:function(e){return this._duration=e,this},compositeRun:function(){var e=this,t=new p(e.element,{reverse:e._reverse,duration:e._duration}),n=e._additionalEffects.concat([e]);return t.run(n)},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var t,n,i=this,r=i.element,s=0,l=i.restore,c=l.length,d=e.Deferred(),u={},h={},p=i.children(),f=p.length;for(d.then(e.proxy(i,"_complete")),r.data("animating",!0),s=0;c>s;s++)t=l[s],r.data(t)||r.data(t,r.css(t));for(s=0;f>s;s++)p[s].duration(i._duration).run();return i.prepare(u,h),r.is(":visible")||D(u,{display:r.data("olddisplay")||"block"}),P&&(n=r.data("targetTransform"),n&&(u=D(n,u))),u=a(r,u),P&&!I&&(u=o(u)),r.css(u).css(st),i.setup(),r.data("targetTransform",h),S.animate(r,h,{duration:i._duration,complete:d.resolve}),d.promise()},stop:function(){var t=0,n=this.children(),i=n.length;for(t=0;i>t;t++)n[t].stop();return e(this.element).kendoStop(!0,!0),this},restoreCallback:function(){var e,t,n,i=this.element;for(e=0,t=this.restore.length;t>e;e++)n=this.restore[e],i.css(n,i.data(n))},_complete:function(){var t=this,n=t.element;n.removeData("animating").dequeue(),t.restoreCallback(),t.shouldHide()&&n.data("olddisplay",n.css("display")).hide(),R&&!P&&setTimeout(e.proxy(t,"restoreCallback"),0),t.teardown()},setOptions:function(e){D(!0,this.options,e)},children:function(){return[]},shouldHide:e.noop,setup:e.noop,prepare:e.noop,teardown:e.noop,directions:[],setReverse:function(e){return this._reverse=e,this}}),g=["left","right","up","down"],m=["in","out"],c("slideIn",{directions:g,divisor:function(e){return this.options.divisor=e,this},prepare:function(e,t){var n,i=this,r=i.element,o=ht[i._direction],a=-o.modifier*(o.vertical?r.outerHeight():r.outerWidth()),s=a/(i.options&&i.options.divisor||1)+Y,l="0px";i._reverse&&(n=e,e=t,t=n),P?(e[o.transition]=s,t[o.transition]=l):(e[o.property]=s,t[o.property]=l)}}),c("tile",{directions:g,init:function(e,t,n){f.prototype.init.call(this,e,t),this.options={previous:n}},previousDivisor:function(e){return this.options.previousDivisor=e,this},children:function(){var e=this,t=e._reverse,n=e.options.previous,i=e.options.previousDivisor||1,r=e._direction,o=[C.fx(e.element).slideIn(r).setReverse(t)];return n&&o.push(C.fx(n).slideIn(ht[r].reverse).divisor(i).setReverse(!t)),o}}),d("fade","opacity",1,0),d("zoom","scale",1,.01),c("slideMargin",{prepare:function(e,t){var n,i=this,r=i.element,o=i.options,a=r.data(et),s=o.offset,l=i._reverse;l||null!==a||r.data(et,parseFloat(r.css("margin-"+o.axis))),n=r.data(et)||0,t["margin-"+o.axis]=l?n:n+s}}),c("slideTo",{prepare:function(e,t){var n=this,i=n.element,r=n.options,o=r.offset.split(","),a=n._reverse;P?(t.translatex=a?0:o[0],t.translatey=a?0:o[1]):(t.left=a?0:o[0],t.top=a?0:o[1]),i.css("left")}}),c("expand",{directions:["horizontal","vertical"],restore:[nt],prepare:function(e,n){var i=this,r=i.element,o=i.options,a=i._reverse,s="vertical"===i._direction?J:X,l=r[0].style[s],c=r.data(s),d=parseFloat(c||l),u=q(r.css(s,Q)[s]());e.overflow=Z,d=o&&o.reset?u||d:d||u,n[s]=(a?0:d)+Y,e[s]=(a?d:0)+Y,c===t&&r.data(s,l)},shouldHide:function(){return this._reverse},teardown:function(){var e=this,t=e.element,n="vertical"===e._direction?J:X,i=t.data(n);(i==Q||i===$)&&setTimeout(function(){t.css(n,Q).css(n)},0)}}),v={position:"absolute",marginLeft:0,marginTop:0,scale:1},c("transfer",{init:function(e,t){this.element=e,this.options={target:t},this.restore=[]},setup:function(){this.element.appendTo(document.body)},prepare:function(e,t){var n=this,i=n.element,r=S.box(i),o=S.box(n.options.target),a=s(i,"scale"),l=S.fillScale(o,r),c=S.transformOrigin(o,r);D(e,v),t.scale=1,i.css(st,"scale(1)").css(st),i.css(st,"scale("+a+")"),e.top=r.top,e.left=r.left,e.transformOrigin=c.x+Y+" "+c.y+Y,n._reverse?e.scale=l:t.scale=l}}),_={top:"rect(auto auto $size auto)",bottom:"rect($size auto auto auto)",left:"rect(auto $size auto auto)",right:"rect(auto auto auto $size)"},y={top:{start:"rotatex(0deg)",end:"rotatex(180deg)"},bottom:{start:"rotatex(-180deg)",end:"rotatex(0deg)"},left:{start:"rotatey(0deg)",end:"rotatey(-180deg)"},right:{start:"rotatey(180deg)",end:"rotatey(0deg)"}},c("turningPage",{directions:g,init:function(e,t,n){f.prototype.init.call(this,e,t),this._container=n},prepare:function(e,t){var n=this,i=n._reverse,r=i?ht[n._direction].reverse:n._direction,o=y[r];e.zIndex=1,n._clipInHalf&&(e.clip=u(n._container,C.directions[r].reverse)),e[lt]=Z,t[st]=ut+(i?o.start:o.end),e[st]=ut+(i?o.end:o.start)},setup:function(){this._container.append(this.element)},face:function(e){return this._face=e,this},shouldHide:function(){var e=this,t=e._reverse,n=e._face;return t&&!n||!t&&n},clipInHalf:function(e){return this._clipInHalf=e,this},temporary:function(){return this.element.addClass("temp-page"),this}}),c("staticPage",{directions:g,init:function(e,t,n){f.prototype.init.call(this,e,t),this._container=n},restore:["clip"],prepare:function(e,t){var n=this,i=n._reverse?ht[n._direction].reverse:n._direction;e.clip=u(n._container,i),e.opacity=.999,t.opacity=1},shouldHide:function(){var e=this,t=e._reverse,n=e._face;return t&&!n||!t&&n},face:function(e){return this._face=e,this}}),c("pageturn",{directions:["horizontal","vertical"],init:function(e,t,n,i){f.prototype.init.call(this,e,t),this.options={},this.options.face=n,this.options.back=i},children:function(){var e,t=this,n=t.options,i="horizontal"===t._direction?"left":"top",r=C.directions[i].reverse,o=t._reverse,a=n.face.clone(!0).removeAttr("id"),s=n.back.clone(!0).removeAttr("id"),l=t.element;return o&&(e=i,i=r,r=e),[C.fx(n.face).staticPage(i,l).face(!0).setReverse(o),C.fx(n.back).staticPage(r,l).setReverse(o),C.fx(a).turningPage(i,l).face(!0).clipInHalf(!0).temporary().setReverse(o),C.fx(s).turningPage(r,l).clipInHalf(!0).temporary().setReverse(o)]},prepare:function(e,t){e[ct]=dt,e.transformStyle="preserve-3d",e.opacity=.999,t.opacity=1},teardown:function(){this.element.find(".temp-page").remove()}}),c("flip",{directions:["horizontal","vertical"],init:function(e,t,n,i){f.prototype.init.call(this,e,t),this.options={},this.options.face=n,this.options.back=i},children:function(){var e,t=this,n=t.options,i="horizontal"===t._direction?"left":"top",r=C.directions[i].reverse,o=t._reverse,a=t.element;return o&&(e=i,i=r,r=e),[C.fx(n.face).turningPage(i,a).face(!0).setReverse(o),C.fx(n.back).turningPage(r,a).setReverse(o)]},prepare:function(e){e[ct]=dt,e.transformStyle="preserve-3d"}}),w=!E.mobileOS.android,b=".km-touch-scrollbar, .km-actionsheet-wrapper",c("replace",{_before:e.noop,_after:e.noop,init:function(t,n,i){f.prototype.init.call(this,t),this._previous=e(n),this._transitionClass=i},duration:function(){throw Error("The replace effect does not support duration setting; the effect duration may be customized through the transition class rule")},beforeTransition:function(e){return this._before=e,this},afterTransition:function(e){return this._after=e,this},_both:function(){return e().add(this._element).add(this._previous)},_containerClass:function(){var e=this._direction,t="k-fx k-fx-start k-fx-"+this._transitionClass;return e&&(t+=" k-fx-"+e),this._reverse&&(t+=" k-fx-reverse"),t},complete:function(t){if(!(!this.deferred||t&&e(t.target).is(b))){var n=this.container;n.removeClass("k-fx-end").removeClass(this._containerClass()).off(I.event,this.completeProxy),this._previous.hide().removeClass("k-fx-current"),this.element.removeClass("k-fx-next"),w&&n.css(nt,""),this.isAbsolute||this._both().css(rt,""),this.deferred.resolve(),delete this.deferred}},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var t,n=this,i=n.element,r=n._previous,o=i.parents().filter(r.parents()).first(),a=n._both(),s=e.Deferred(),l=i.css(rt);return o.length||(o=i.parent()),this.container=o,this.deferred=s,this.isAbsolute="absolute"==l,this.isAbsolute||a.css(rt,"absolute"),w&&(t=o.css(nt),o.css(nt,"hidden")),I?(i.addClass("k-fx-hidden"),o.addClass(this._containerClass()),this.completeProxy=e.proxy(this,"complete"),o.on(I.event,this.completeProxy),C.animationFrame(function(){i.removeClass("k-fx-hidden").addClass("k-fx-next"),r.css("display","").addClass("k-fx-current"),n._before(r,i),C.animationFrame(function(){o.removeClass("k-fx-start").addClass("k-fx-end"),n._after(r,i)})})):this.complete(),s.promise()},stop:function(){this.complete()}}),k=C.Class.extend({init:function(){var e=this;e._tickProxy=A(e._tick,e),e._started=!1},tick:e.noop,done:e.noop,onEnd:e.noop,onCancel:e.noop,start:function(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,C.animationFrame(this._tickProxy)))},enabled:function(){return!0},cancel:function(){this._started=!1,this.onCancel()},_tick:function(){var e=this;e._started&&(e.tick(),e.done()?(e._started=!1,e.onEnd()):C.animationFrame(e._tickProxy))}}),x=k.extend({init:function(e){var t=this;D(t,e),k.fn.init.call(t)},done:function(){return this.timePassed()>=this.duration},timePassed:function(){return Math.min(this.duration,new Date-this.startDate)},moveTo:function(e){var t=this,n=t.movable;t.initial=n[t.axis],t.delta=e.location-t.initial,t.duration="number"==typeof e.duration?e.duration:300,t.tick=t._easeProxy(e.ease),t.startDate=new Date,t.start()},_easeProxy:function(e){var t=this;return function(){t.movable.moveAxis(t.axis,e(t.timePassed(),t.initial,t.delta,t.duration))}}}),D(x,{easeOutExpo:function(e,t,n,i){return e==i?t+n:n*(-Math.pow(2,-10*e/i)+1)+t},easeOutBack:function(e,t,n,i,r){return r=1.70158,n*((e=e/i-1)*e*((r+1)*e+r)+1)+t}}),S.Animation=k,S.Transition=x,S.createEffect=c,S.box=function(t){t=e(t);var n=t.offset();return n.width=t.outerWidth(),n.height=t.outerHeight(),n},S.transformOrigin=function(e,t){var n=(e.left-t.left)*t.width/(t.width-e.width),i=(e.top-t.top)*t.height/(t.height-e.height);return{x:isNaN(n)?0:n,y:isNaN(i)?0:i}},S.fillScale=function(e,t){return Math.min(e.width/t.width,e.height/t.height)},S.fitScale=function(e,t){return Math.max(e.width/t.width,e.height/t.height)}}(window.kendo.jQuery),function(e){function t(e){if(!e)return{};var t=e.match(v)||[];return{type:t[1],direction:t[3],reverse:"reverse"===t[5]}}var n=window.kendo,i=n.Observable,r="SCRIPT",o="init",a="show",s="hide",l="transitionStart",c="transitionEnd",d="attach",u="detach",h=/unrecognized expression/,p=i.extend({init:function(e,t){var r=this;t=t||{},i.fn.init.call(r),r.content=e,r.id=n.guid(),r.tagName=t.tagName||"div",r.model=t.model,r._wrap=t.wrap!==!1,this._evalTemplate=t.evalTemplate||!1,r._fragments={},r.bind([o,a,s,l,c],t)},render:function(t){var i=this,r=!i.element;return r&&(i.element=i._createElement()),t&&e(t).append(i.element),r&&(n.bind(i.element,i.model),i.trigger(o)),t&&(i._eachFragment(d),i.trigger(a)),i.element},clone:function(){return new f(this)},triggerBeforeShow:function(){return!0},showStart:function(){this.element.css("display","")},showEnd:function(){},hideStart:function(){},hideEnd:function(){this.hide()},beforeTransition:function(e){this.trigger(l,{type:e})},afterTransition:function(e){this.trigger(c,{type:e})},hide:function(){this._eachFragment(u),this.element.detach(),this.trigger(s)},destroy:function(){var e=this.element;e&&(n.unbind(e),n.destroy(e),e.remove())},fragments:function(t){e.extend(this._fragments,t)},_eachFragment:function(e){for(var t in this._fragments)this._fragments[t][e](this,t)},_createElement:function(){var t,i,o=this,a="<"+o.tagName+" />";try{i=e(document.getElementById(o.content)||o.content),i[0].tagName===r&&(i=i.html())}catch(s){h.test(s.message)&&(i=o.content)}return"string"==typeof i?(i=i.replace(/^\s+|\s+$/g,""),o._evalTemplate&&(i=n.template(i)(o.model||{})),t=e(a).append(i),o._wrap||(t=t.contents())):(t=i,o._wrap&&(t=t.wrapAll(a).parent())),t}}),f=n.Class.extend({init:function(t){e.extend(this,{element:t.element.clone(!0),transition:t.transition,id:t.id}),t.element.parent().append(this.element)},hideStart:e.noop,hideEnd:function(){this.element.remove()},beforeTransition:e.noop,afterTransition:e.noop}),g=p.extend({init:function(e,t){p.fn.init.call(this,e,t),this.containers={}},container:function(e){var t=this.containers[e];return t||(t=this._createContainer(e),this.containers[e]=t),t},showIn:function(e,t,n){this.container(e).show(t,n)},_createContainer:function(e){var t,n=this.render(),i=n.find(e);if(!i.length&&n.is(e)){if(!n.is(e))throw Error("can't find a container with the specified "+e+" selector");i=n}return t=new _(i),t.bind("accepted",function(e){e.view.render(i)}),t}}),m=p.extend({attach:function(e,t){e.element.find(t).replaceWith(this.render())},detach:function(){}}),v=/^(\w+)(:(\w+))?( (\w+))?$/,_=i.extend({init:function(e){i.fn.init.call(this),this.container=e,this.history=[],this.view=null,this.running=!1},after:function(){this.running=!1,this.trigger("complete",{view:this.view}),this.trigger("after")},end:function(){this.view.showEnd(),this.previous.hideEnd(),this.after()},show:function(e,i,r){if(!e.triggerBeforeShow())return this.trigger("after"),!1;r=r||e.id;var o=this,a=e===o.view?e.clone():o.view,s=o.history,l=s[s.length-2]||{},c=l.id===r,d=i||(c?s[s.length-1].transition:e.transition),u=t(d);return o.running&&o.effect.stop(),"none"===d&&(d=null),o.trigger("accepted",{view:e}),o.view=e,o.previous=a,o.running=!0,c?s.pop():s.push({id:r,transition:d}),a?(a.hideStart(),d&&n.effects.enabled?(e.element.addClass("k-fx-hidden"),e.showStart(),c&&!i&&(u.reverse=!u.reverse),o.effect=n.fx(e.element).replace(a.element,u.type).beforeTransition(function(){e.beforeTransition("show"),a.beforeTransition("hide")}).afterTransition(function(){e.afterTransition("show"),a.afterTransition("hide")}).direction(u.direction).setReverse(u.reverse),o.effect.run().then(function(){o.end()})):(e.showStart(),o.end()),!0):(e.showStart(),e.showEnd(),o.after(),!0)}});n.ViewContainer=_,n.Fragment=m,n.Layout=g,n.View=p,n.ViewClone=f}(window.kendo.jQuery),function(e){function t(){this.node=null}function n(e,t,n){this.nodeName=e,this.attr=t||{},this.cssText=null,this.children=n||[]}function i(e){this.nodeValue=e}function r(e){this.html=e}function o(e){return new r(e)}function a(e,t,i){return new n(e,t,i)}function s(e){return new i(e)}function l(e){this.root=e,this.children=[]}t.prototype={remove:function(){this.node.parentNode.removeChild(this.node)}},n.prototype=new t,n.prototype.render=function(e,t){var n,i,r,o,a,s,l,c,d=this.children,u=d.length;if(t&&t.nodeName===this.nodeName){if(n=t.node,r=t.children,Math.abs(r.length-u)>2)return void this.render({appendChild:function(n){e.replaceChild(n,t.node)}},null);for(i=0;u>i;i++)d[i].render(n,r[i]);for(i=u,u=r.length;u>i;i++)r[i].remove()}else{for(t&&(t.remove(),t=null),n=document.createElement(this.nodeName),i=0;u>i;i++)d[i].render(n,null);e.appendChild(n)}o=this.attr;for(a in o)if(!t||o[a]!==t.attr[a])if(void 0!==n[a])if("style"!==a)n[a]=o[a];else{s="",l=o[a];for(c in l)s+=c,s+=":",s+=l[c],s+=";";t&&t.cssText===s||(n.style.cssText=s),this.cssText=s}else n.setAttribute(a,o[a]);if(t)for(a in t.attr)void 0===o[a]&&(void 0!==n[a]?"style"===a?n.style.cssText="":"className"===a?n[a]="":n.removeAttribute(a):n.removeAttribute(a));this.node=n},i.prototype=new t,i.prototype.nodeName="#text",i.prototype.render=function(e,t){var n;t&&t.nodeName===this.nodeName?(n=t.node,this.nodeValue!==t.nodeValue&&(n.nodeValue=this.nodeValue)):(t&&t.remove(),n=document.createTextNode(this.nodeValue),e.appendChild(n)),this.node=n},r.prototype={nodeName:"#html",remove:function(){for(var e=0;this.nodes.length>e;e++)this.nodes[e].parentNode.removeChild(this.nodes[e])},render:function(e,t){var n,i;if(t&&t.nodeName===this.nodeName&&t.html===this.html)this.nodes=t.nodes.slice(0);else for(t&&t.remove(),n=e.lastChild,e.insertAdjacentHTML("beforeend",this.html),this.nodes=[],i=n?n.nextSibling:e.firstChild;i;i=i.nextSibling)this.nodes.push(i)}},l.prototype={html:o,element:a,text:s,render:function(e){var t,n,i=this.children;for(t=0,n=e.length;n>t;t++)e[t].render(this.root,i[t]);for(t=n;i.length>t;t++)i[t].remove();this.children=e}},e.dom={html:o,text:s,element:a,Tree:l}}(window.kendo),function(e){function t(e){var n=Math.floor(e/26)-1;return(n>=0?t(n):"")+String.fromCharCode(65+e%26)}function n(e,n){return t(n)+(e+1)}function i(e){return 6>e.length&&(e=e.replace(/(\w)/g,function(e,t){return t+t})),e=e.substring(1).toUpperCase(),8>e.length&&(e="FF"+e),e}var r='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',o=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>${creator}</dc:creator><cp:lastModifiedBy>${lastModifiedBy}</cp:lastModifiedBy><dcterms:created xsi:type="dcterms:W3CDTF">${created}</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">${modified}</dcterms:modified></cp:coreProperties>'),a=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>${sheets.length}</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="${sheets.length}" baseType="lpstr"># for (var idx = 0; idx < sheets.length; idx++) { ## if (sheets[idx].options.title) { #<vt:lpstr>${sheets[idx].options.title}</vt:lpstr># } else { #<vt:lpstr>Sheet${idx+1}</vt:lpstr># } ## } #</vt:vector></TitlesOfParts><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>14.0300</AppVersion></Properties>'),s=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="xml" ContentType="application/xml" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/># for (var idx = 1; idx <= count; idx++) { #<Override PartName="/xl/worksheets/sheet${idx}.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /># } #<Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml" /><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" /></Types>'),l=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="9303" /><workbookPr defaultThemeVersion="124226" /><bookViews><workbookView xWindow="240" yWindow="45" windowWidth="18195" windowHeight="7995" /></bookViews><sheets># for (var idx = 0; idx < sheets.length; idx++) { ## if (sheets[idx].options.title) { #<sheet name="${sheets[idx].options.title}" sheetId="${idx+1}" r:id="rId${idx+1}" /># } else { #<sheet name="Sheet${idx+1}" sheetId="${idx+1}" r:id="rId${idx+1}" /># } ## } #</sheets><calcPr calcId="145621" /></workbook>'),c=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" mc:Ignorable="x14ac"><dimension ref="A1" /><sheetViews><sheetView tabSelected="1" workbookViewId="0"># if (freezePane) { #<pane state="frozen"# if (freezePane.colSplit) { # xSplit="${freezePane.colSplit}"# } ## if (freezePane.rowSplit) { # ySplit="${freezePane.rowSplit}"# } # topLeftCell="${String.fromCharCode(65 + (freezePane.colSplit || 0))}${(freezePane.rowSplit || 0)+1}"/># } #</sheetView></sheetViews><sheetFormatPr defaultRowHeight="15" x14ac:dyDescent="0.25" /># if (columns) { #<cols># for (var ci = 0; ci < columns.length; ci++) { ## var column = columns[ci]; ## if (column.width) { #<col min="${ci+1}" max="${ci+1}" customWidth="1"# if (column.autoWidth) { # width="${((column.width*7+5)/7*256)/256}" bestFit="1"# } else { # width="${(((column.width)/7)*100+0.5)/100}" # } #/># } ## } #</cols># } #<sheetData># for (var ri = 0; ri < data.length; ri++) { ## var row = data[ri]; #<row r="${ri + 1}"># for (var ci = 0; ci < row.data.length; ci++) { ## var cell = row.data[ci];#<c r="${cell.ref}"# if (cell.style) { # s="${cell.style}" # } ## if (cell.type) { # t="${cell.type}"# } #># if (cell.value != null) { #<v>${cell.value}</v># } #</c># } #</row># } #</sheetData># if (filter) { #<autoFilter ref="${filter.from}:${filter.to}"/># } ## if (mergeCells.length) { #<mergeCells count="${mergeCells.length}"># for (var ci = 0; ci < mergeCells.length; ci++) { #<mergeCell ref="${mergeCells[ci]}"/># } #</mergeCells># } #<pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" /></worksheet>'),d=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"># for (var idx = 1; idx <= count; idx++) { #<Relationship Id="rId${idx}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet${idx}.xml" /># } #<Relationship Id="rId${count+1}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml" /><Relationship Id="rId${count+2}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml" /></Relationships>'),u=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="${count}" uniqueCount="${uniqueCount}"># for (var index in indexes) { #<si><t>${index.substring(1)}</t></si># } #</sst>'),h=e.template('<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="${formats.length}"># for (var fi = 0; fi < formats.length; fi++) { ## var format = formats[fi]; #<numFmt formatCode="${format.format}" numFmtId="${165+fi}" /># } #</numFmts><fonts count="${fonts.length+1}" x14ac:knownFonts="1"><font><sz val="11" /><color theme="1" /><name val="Calibri" /><family val="2" /><scheme val="minor" /></font># for (var fi = 0; fi < fonts.length; fi++) { ## var font = fonts[fi]; #<font># if (font.bold) { #<b/># } ## if (font.italic) { #<i/># } ## if (font.underline) { #<u/># } ## if (font.color) { #<color rgb="${font.color}" /># } else { #<color theme="1" /># } ## if (font.fontSize) { #<sz val="${font.fontSize}" /># } else { #<sz val="11" /># } ## if (font.fontName) { #<name val="${font.fontName}" /># } else { #<name val="Calibri" /><scheme val="minor" /># } #<family val="2" /></font># } #</fonts><fills count="${fills.length+1}"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill># for (var fi = 0; fi < fills.length; fi++) { ## var fill = fills[fi]; ## if (fill.background) { #<fill><patternFill patternType="solid"><fgColor rgb="${fill.background}"/></patternFill></fill># } ## } #</fills><borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellXfs count="${styles.length+1}"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/># for (var si = 0; si < styles.length; si++) { ## var style = styles[si]; #<xf xfid="0"# if (style.fontId) { # fontId="${style.fontId}" applyFont="1"# } ## if (style.fillId) { # fillId="${style.fillId}" applyFill="1"# } ## if (style.numFmtId) { # numFmtId="${style.numFmtId}" applyNumberFormat="1"# } ## if (style.hAlign || style.vAlign) { # applyAlignment="1"# } #># if (style.hAlign || style.vAlign) { #<alignment# if (style.hAlign) { # horizontal="${style.hAlign}"# } ## if (style.vAlign) { # vertical="${style.vAlign}"# } #/># } #</xf># } #</cellXfs><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleMedium9" /></styleSheet>'),p=e.Class.extend({init:function(e,t,n){this.options=e,this._strings=t,this._styles=n,this._mergeCells=[]},toXML:function(){var e=this.options.rows||[],t=this.options.filter;return c({freezePane:this.options.freezePane,columns:this.options.columns,data:$.map(e,$.proxy(this._row,this,e)),mergeCells:this._mergeCells,filter:t?{from:n(0,t.from),to:n(0,t.to)}:null})},_row:function(e,t,n){return this._cellIndex=0,{data:$.map(t.cells,$.proxy(this._cell,this,e,n))}},_lookupString:function(e){var t="$"+e,n=this._strings.indexes[t];return void 0!==n?e=n:(e=this._strings.indexes[t]=this._strings.uniqueCount,this._strings.uniqueCount++),this._strings.count++,e},_lookupStyle:function(t){var n,i=e.stringify(t);return"{}"==i?0:(n=$.inArray(i,this._styles),0>n&&(n=this._styles.push(i)-1),n+1)},_cell:function(t,i,r){var o,a,s,l,c,d,u,h,p,f,g;if(!r)return void this._cellIndex++;if(o=r.value,a={bold:r.bold,color:r.color,background:r.background,italic:r.italic,underline:r.underline,fontName:r.fontName,fontSize:r.fontSize,format:r.format,hAlign:r.hAlign,vAlign:r.vAlign},s=this.options.columns||[],l=s[this._cellIndex],l&&l.autoWidth&&(l.width=Math.max(l.width||0,(""+o).length)),c=typeof o,"string"===c?(o=this._lookupString(o),c="s"):"number"===c?c="n":"boolean"===c?(c="b",o=+o):o&&o.getTime?(c="d",o=e.timezone.remove(o,"Etc/UTC").toJSON(),a.format||(a.format="mm-dd-yy")):(c=null,o=""),a=this._lookupStyle(a),d={value:o,type:c,style:a,ref:n(i,this._cellIndex)},u=r.colSpan||1,h=r.rowSpan||1,u>1||h>1){for(p=[d],f=1;u>f;f++)this._cellIndex++,p[f]={ref:n(i,this._cellIndex)};for(g=1;h>g;g++)t[i+g]&&t[i+g].cells.splice(this._cellIndex,0,{});this._mergeCells.push(d.ref+":"+n(i+h-1,this._cellIndex)),d=p}return this._cellIndex++,d}}),f={General:0,0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49,"[$-404]e/m/d":27,"m/d/yy":30,t0:59,"t0.00":60,"t#,##0":61,"t#,##0.00":62,"t0%":67,"t0.00%":68,"t# ?/?":69,"t# ??/??":70},g=e.Class.extend({init:function(e){this.options=e||{},this._strings={indexes:{},count:0,uniqueCount:0},this._styles=[],this._sheets=$.map(this.options.sheets||[],$.proxy(function(e){return new p(e,this._strings,this._styles)},this))},toDataURL:function(){var t,n,c,p,g,m,v,_,y,w,b,k,x;if("undefined"==typeof JSZip)throw Error("JSZip not found. Check http://docs.telerik.com/kendo-ui/framework/excel/introduction#requirements for more details.");for(t=new JSZip,n=t.folder("docProps"),n.file("core.xml",o({creator:this.options.creator||"Kendo UI",lastModifiedBy:this.options.creator||"Kendo UI",created:this.options.date||(new Date).toJSON(),modified:this.options.date||(new Date).toJSON()})),c=this._sheets.length,n.file("app.xml",a({sheets:this._sheets})),p=t.folder("_rels"),p.file(".rels",r),g=t.folder("xl"),m=g.folder("_rels"),m.file("workbook.xml.rels",d({count:c})),g.file("workbook.xml",l({sheets:this._sheets})),v=g.folder("worksheets"),_=0;c>_;_++)v.file(e.format("sheet{0}.xml",_+1),this._sheets[_].toXML());
return y=$.map(this._styles,$.parseJSON),w=function(e){return e.underline||e.bold||e.italic||e.color||e.fontName||e.fontSize},b=$.map(y,function(e){return e.color&&(e.color=i(e.color)),w(e)?e:void 0}),k=$.map(y,function(e){return e.format&&void 0===f[e.format]?e:void 0}),x=$.map(y,function(e){return e.background?(e.background=i(e.background),e):void 0}),g.file("styles.xml",h({fonts:b,fills:x,formats:k,styles:$.map(y,function(e){var t={};return w(e)&&(t.fontId=$.inArray(e,b)+1),e.background&&(t.fillId=$.inArray(e,x)+2),t.hAlign=e.hAlign,t.vAlign=e.vAlign,e.format&&(t.numFmtId=void 0!==f[e.format]?f[e.format]:165+$.inArray(e,k)),t})})),g.file("sharedStrings.xml",u(this._strings)),t.file("[Content_Types].xml",s({count:c})),"data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,"+t.generate({compression:"DEFLATE"})}});e.ooxml={Workbook:g,Worksheet:p}}(kendo),function(e,t){t.ExcelExporter=t.Class.extend({init:function(n){n.columns=this._trimColumns(n.columns||[]),this.columns=e.map(this._leafColumns(n.columns||[]),this._prepareColumn),this.options=n;var i=n.dataSource;this.dataSource=i instanceof t.data.DataSource?new i.constructor(e.extend({},i.options,{page:n.allPages?0:i.page(),filter:i.filter(),pageSize:n.allPages?i.total():i.pageSize(),sort:i.sort(),group:i.group(),aggregate:i.aggregate()})):t.data.DataSource.create(i),i instanceof t.data.TreeListDataSource&&this.dataSource.data(i.view().toJSON())},_trimColumns:function(t){var n=this;return e.grep(t,function(e){var t=!(!e.field||e.hidden);return!t&&e.columns&&(t=n._trimColumns(e.columns).length>0),t})},_leafColumns:function(e){var t,n=[];for(t=0;e.length>t;t++)e[t].columns?n=n.concat(this._leafColumns(e[t].columns)):n.push(e[t]);return n},workbook:function(){var t=this.dataSource.fetch();return t.then(e.proxy(function(){return{sheets:[{columns:this._columns(),rows:this._rows(),freezePane:this._freezePane(),filter:this._filter()}]}},this))},_prepareColumn:function(n){return n.field&&!n.hidden?e.extend({},n,{groupHeaderTemplate:t.template(n.groupHeaderTemplate||"${title}: ${value}"),groupFooterTemplate:n.groupFooterTemplate?t.template(n.groupFooterTemplate):null,footerTemplate:n.footerTemplate?t.template(n.footerTemplate):null}):void 0},_filter:function(){if(!this.options.filterable)return null;var e=this._depth();return{from:e,to:e+this.columns.length-1}},_dataRows:function(t,n){var i=this._depth(),r=e.map(t,e.proxy(function(t){var r,o,a,s,l,c,d,u;return this._hierarchical()&&(n=this.dataSource.level(t)+1),r=e.map(Array(n),function(){return{background:"#dfdfdf",color:"#333"}}),i&&t.items?(o=e.grep(this.columns,function(e){return e.field==t.field})[0],a=o&&o.title?o.title:t.field,s=o?o.groupHeaderTemplate:null,l=a+": "+t.value,c=e.extend({title:a,field:t.field,value:t.value,aggregates:t.aggregates},t.aggregates[t.field]),s&&(l=s(c)),r.push({value:l,background:"#dfdfdf",color:"#333",colSpan:this.columns.length+i-n}),d=this._dataRows(t.items,n+1),d.unshift({type:"group-header",cells:r}),d.concat(this._footer(t,n+1))):(u=e.map(this.columns,e.proxy(this._cell,this,t)),this._hierarchical()&&(u[0].colSpan=i-n+1),{type:"data",cells:r.concat(u)})},this));return r},_footer:function(t,n){var i=[],r=!1,o=e.map(this.columns,function(e){return e.groupFooterTemplate?(r=!0,{background:"#dfdfdf",color:"#333",value:e.groupFooterTemplate(t.aggregates[e.field])}):{background:"#dfdfdf",color:"#333"}});return r&&i.push({type:"group-footer",cells:e.map(Array(n),function(){return{background:"#dfdfdf",color:"#333"}}).concat(o)}),i},_isColumnVisible:function(e){return this._visibleColumns([e]).length>0&&(e.field||e.columns)},_visibleColumns:function(t){var n=this;return e.grep(t,function(e){var t=!e.hidden;return t&&e.columns&&(t=n._visibleColumns(e.columns).length>0),t})},_headerRow:function(t,n){var i=e.map(t.cells,function(e){return{background:"#7a7a7a",color:"#fff",value:e.title,colSpan:e.colSpan>1?e.colSpan:1,rowSpan:t.rowSpan>1&&!e.colSpan?t.rowSpan:1}});return this._hierarchical()&&(i[0].colSpan=this._depth()+1),{type:"header",cells:e.map(Array(n.length),function(){return{background:"#7a7a7a",color:"#fff"}}).concat(i)}},_prependHeaderRows:function(e){var t,n=this.dataSource.group(),i=[{rowSpan:1,cells:[],index:0}];for(this._prepareHeaderRows(i,this.options.columns),t=i.length-1;t>=0;t--)e.unshift(this._headerRow(i[t],n))},_prepareHeaderRows:function(e,t,n,i){var r,o,a,s=i||e[e.length-1],l=e[s.index+1],c=0;for(a=0;t.length>a;a++)r=t[a],this._isColumnVisible(r)&&(o={title:r.title||r.field,colSpan:0},s.cells.push(o),r.columns&&r.columns.length&&(l||(l={rowSpan:0,cells:[],index:e.length},e.push(l)),o.colSpan=this._trimColumns(this._visibleColumns(r.columns)).length,this._prepareHeaderRows(e,r.columns,o,l),c+=o.colSpan-1,s.rowSpan=e.length-s.index));n&&(n.colSpan+=c)},_rows:function(){var t,n,i=this.dataSource.group(),r=this._dataRows(this.dataSource.view(),0);return this.columns.length&&(this._prependHeaderRows(r),t=!1,n=e.map(this.columns,e.proxy(function(e){return e.footerTemplate?(t=!0,{background:"#dfdfdf",color:"#333",value:e.footerTemplate(this.dataSource.aggregates()[e.field])}):{background:"#dfdfdf",color:"#333"}},this)),t&&r.push({type:"footer",cells:e.map(Array(i.length),function(){return{background:"#dfdfdf",color:"#333"}}).concat(n)})),r},_headerDepth:function(e){var t,n,i=1,r=0;for(t=0;e.length>t;t++)e[t].columns&&(n=this._headerDepth(e[t].columns),n>r&&(r=n));return i+r},_freezePane:function(){var t=this._visibleColumns(this.options.columns||[]),n=this._trimColumns(this._leafColumns(e.grep(t,function(e){return e.locked}))).length;return{rowSplit:this._headerDepth(t),colSplit:n?n+this.dataSource.group().length:0}},_cell:function(e,t){return t.field?{value:e.get(t.field)}:void 0},_hierarchical:function(){return this.options.hierarchy&&this.dataSource.level},_depth:function(){var e,t,n,i=this.dataSource,r=0;if(this._hierarchical()){for(e=i.view(),t=0;e.length>t;t++)n=i.level(e[t]),n>r&&(r=n);r++}else r=i.group().length;return r},_columns:function(){var t=this._depth(),n=e.map(Array(t),function(){return{width:20}});return n.concat(e.map(this.columns,function(e){return{width:parseInt(e.width,10),autoWidth:e.width?!1:!0}}))}}),t.ExcelMixin={extend:function(t){t.events.push("excelExport"),t.options.excel=e.extend(t.options.excel,this.options),t.saveAsExcel=this.saveAsExcel},options:{proxyURL:"",allPages:!1,filterable:!1,fileName:"Export.xlsx"},saveAsExcel:function(){var n=this.options.excel||{},i=new t.ExcelExporter({columns:this.columns,dataSource:this.dataSource,allPages:n.allPages,filterable:n.filterable,hierarchy:n.hierarchy});i.workbook().then(e.proxy(function(e){if(!this.trigger("excelExport",{workbook:e})){var i=new t.ooxml.Workbook(e);t.saveAs({dataURI:i.toDataURL(),fileName:e.fileName||n.fileName,proxyURL:n.proxyURL,forceProxy:n.forceProxy})}},this))}}}(kendo.jQuery,kendo),function(){kendo.data.transports.signalr=kendo.data.RemoteTransport.extend({init:function(e){var t,n=e&&e.signalr?e.signalr:{},i=n.promise;if(!i)throw Error('The "promise" option must be set.');if("function"!=typeof i.done||"function"!=typeof i.fail)throw Error('The "promise" option must be a Promise.');if(this.promise=i,t=n.hub,!t)throw Error('The "hub" option must be set.');if("function"!=typeof t.on||"function"!=typeof t.invoke)throw Error('The "hub" option is not a valid SignalR hub proxy.');this.hub=t,kendo.data.RemoteTransport.fn.init.call(this,e)},push:function(e){var t=this.options.signalr.client||{};t.create&&this.hub.on(t.create,e.pushCreate),t.update&&this.hub.on(t.update,e.pushUpdate),t.destroy&&this.hub.on(t.destroy,e.pushDestroy)},_crud:function(e,t){var n,i,r=this.hub,o=this.options.signalr.server;if(!o||!o[t])throw Error(kendo.format('The "server.{0}" option must be set.',t));n=[o[t]],i=this.parameterMap(e.data,t),$.isEmptyObject(i)||n.push(i),this.promise.done(function(){r.invoke.apply(r,n).done(e.success).fail(e.error)})},read:function(e){this._crud(e,"read")},create:function(e){this._crud(e,"create")},update:function(e){this._crud(e,"update")},destroy:function(e){this._crud(e,"destroy")}})}(),function(e,t,n){function i(e,r){var a,d;if(null==e||"none"==e)return null;if(e instanceof s)return e;if(e=e.toLowerCase(),a=o.exec(e))return e="transparent"==a[1]?new l(1,1,1,0):i(u.namedColors[a[1]],r),e.match=[a[1]],e;if((a=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i.exec(e))?d=new c(n(a[1],16),n(a[2],16),n(a[3],16),1):(a=/^#?([0-9a-f])([0-9a-f])([0-9a-f])/i.exec(e))?d=new c(n(a[1]+a[1],16),n(a[2]+a[2],16),n(a[3]+a[3],16),1):(a=/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(e))?d=new c(n(a[1],10),n(a[2],10),n(a[3],10),1):(a=/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(e))?d=new c(n(a[1],10),n(a[2],10),n(a[3],10),t(a[4])):(a=/^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(e))?d=new l(t(a[1])/100,t(a[2])/100,t(a[3])/100,1):(a=/^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(e))&&(d=new l(t(a[1])/100,t(a[2])/100,t(a[3])/100,t(a[4]))),d)d.match=a;else if(!r)throw Error("Cannot parse color: "+e);return d}function r(e,t,n){for(n||(n="0"),e=e.toString(16);t>e.length;)e="0"+e;return e}var o,a,s,l,c,d,u=function(e){var t,n,i,r,o,a=this,s=u.formats;if(1===arguments.length)for(e=a.resolveColor(e),r=0;s.length>r;r++)t=s[r].re,n=s[r].process,i=t.exec(e),i&&(o=n(i),a.r=o[0],a.g=o[1],a.b=o[2]);else a.r=arguments[0],a.g=arguments[1],a.b=arguments[2];a.r=a.normalizeByte(a.r),a.g=a.normalizeByte(a.g),a.b=a.normalizeByte(a.b)};u.prototype={toHex:function(){var e=this,t=e.padDigit,n=e.r.toString(16),i=e.g.toString(16),r=e.b.toString(16);return"#"+t(n)+t(i)+t(r)},resolveColor:function(e){return e=e||"black","#"==e.charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase(),e=u.namedColors[e]||e},normalizeByte:function(e){return 0>e||isNaN(e)?0:e>255?255:e},padDigit:function(e){return 1===e.length?"0"+e:e},brightness:function(e){var t=this,n=Math.round;return t.r=n(t.normalizeByte(t.r*e)),t.g=n(t.normalizeByte(t.g*e)),t.b=n(t.normalizeByte(t.b*e)),t},percBrightness:function(){var e=this;return Math.sqrt(.241*e.r*e.r+.691*e.g*e.g+.068*e.b*e.b)}},u.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[n(e[1],10),n(e[2],10),n(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[n(e[1],16),n(e[2],16),n(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[n(e[1]+e[1],16),n(e[2]+e[2],16),n(e[3]+e[3],16)]}}],u.namedColors={aqua:"00ffff",azure:"f0ffff",beige:"f5f5dc",black:"000000",blue:"0000ff",brown:"a52a2a",coral:"ff7f50",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgray:"a9a9a9",darkgreen:"006400",darkorange:"ff8c00",darkred:"8b0000",dimgray:"696969",fuchsia:"ff00ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lightblue:"add8e6",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumblue:"0000cd",navy:"000080",olive:"808000",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",pink:"ffc0cb",plum:"dda0dd",purple:"800080",red:"ff0000",royalblue:"4169e1",salmon:"fa8072",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",steelblue:"4682b4",tan:"d2b48c",teal:"008080",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},o=["transparent"];for(a in u.namedColors)u.namedColors.hasOwnProperty(a)&&o.push(a);o=RegExp("^("+o.join("|")+")(\\W|$)","i"),s=kendo.Class.extend({toHSV:function(){return this},toRGB:function(){return this},toHex:function(){return this.toBytes().toHex()},toBytes:function(){return this},toCss:function(){return"#"+this.toHex()},toCssRgba:function(){var e=this.toBytes();return"rgba("+e.r+", "+e.g+", "+e.b+", "+t((+this.a).toFixed(3))+")"},toDisplay:function(){return kendo.support.browser.msie&&9>kendo.support.browser.version?this.toCss():this.toCssRgba()},equals:function(e){return e===this||null!==e&&this.toCssRgba()==i(e).toCssRgba()},diff:function(e){if(null==e)return 0/0;var t=this.toBytes();return e=e.toBytes(),Math.sqrt(Math.pow(.3*(t.r-e.r),2)+Math.pow(.59*(t.g-e.g),2)+Math.pow(.11*(t.b-e.b),2))},clone:function(){var e=this.toBytes();return e===this&&(e=new c(e.r,e.g,e.b,e.a)),e}}),l=s.extend({init:function(e,t,n,i){this.r=e,this.g=t,this.b=n,this.a=i},toHSV:function(){var e,t,n=this.r,i=this.g,r=this.b,o=Math.min(n,i,r),a=Math.max(n,i,r),s=a,l=a-o;return 0===l?new d(0,0,s,this.a):(0!==a?(t=l/a,e=n==a?(i-r)/l:i==a?2+(r-n)/l:4+(n-i)/l,e*=60,0>e&&(e+=360)):(t=0,e=-1),new d(e,t,s,this.a))},toBytes:function(){return new c(255*this.r,255*this.g,255*this.b,this.a)}}),c=l.extend({init:function(e,t,n,i){this.r=Math.round(e),this.g=Math.round(t),this.b=Math.round(n),this.a=i},toRGB:function(){return new l(this.r/255,this.g/255,this.b/255,this.a)},toHSV:function(){return this.toRGB().toHSV()},toHex:function(){return r(this.r,2)+r(this.g,2)+r(this.b,2)},toBytes:function(){return this}}),d=s.extend({init:function(e,t,n,i){this.h=e,this.s=t,this.v=n,this.a=i},toRGB:function(){var e,t,n,i,r,o,a,s,c=this.h,d=this.s,u=this.v;if(0===d)t=n=i=u;else switch(c/=60,e=Math.floor(c),r=c-e,o=u*(1-d),a=u*(1-d*r),s=u*(1-d*(1-r)),e){case 0:t=u,n=s,i=o;break;case 1:t=a,n=u,i=o;break;case 2:t=o,n=u,i=s;break;case 3:t=o,n=a,i=u;break;case 4:t=s,n=o,i=u;break;default:t=u,n=o,i=a}return new l(t,n,i,this.a)},toBytes:function(){return this.toRGB().toBytes()}}),u.fromBytes=function(e,t,n,i){return new c(e,t,n,null!=i?i:1)},u.fromRGB=function(e,t,n,i){return new l(e,t,n,null!=i?i:1)},u.fromHSV=function(e,t,n,i){return new d(e,t,n,null!=i?i:1)},kendo.Color=u,kendo.parseColor=i}(window.kendo.jQuery,parseFloat,parseInt),function(e){function t(e){return typeof e!==F}function n(e,t){var n=i(t);return A.round(e*n)/n}function i(e){return e?A.pow(10,e):1}function r(e,t,n){return A.max(A.min(e,n),t)}function o(e){return e*P}function a(e){return e/P}function s(e){return"number"==typeof e&&!isNaN(e)}function l(e,n){return t(e)?e:n}function c(e){return e*e}function d(e){var t,n=[];for(t in e)n.push(t+e[t]);return n.sort().join("")}function u(e){var t,n=2166136261;for(t=0;e.length>t;++t)n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24),n^=e.charCodeAt(t);return n>>>0}function h(e){return u(d(e))}function p(e){var t,n=e.length,i=I,r=z;for(t=0;n>t;t++)r=A.max(r,e[t]),i=A.min(i,e[t]);return{min:i,max:r}}function f(e){return p(e).min}function g(e){return p(e).max}function m(e){return _(e).min}function v(e){return _(e).max}function _(e){var t,n,i,r=I,o=z;for(t=0,n=e.length;n>t;t++)i=e[t],null!==i&&isFinite(i)&&(r=A.min(r,i),o=A.max(o,i));return{min:r===I?void 0:r,max:o===z?void 0:o}}function y(e){return e?e[e.length-1]:void 0}function w(e,t){return e.push.apply(e,t),e}function b(e){return E.template(e,{useWithBlock:!1,paramName:"d"})}function k(e,n){return t(n)&&null!==n?" "+e+"='"+n+"' ":""}function x(e){var t,n="";for(t=0;e.length>t;t++)n+=k(e[t][0],e[t][1]);return n}function C(e){var n,i,r="";for(n=0;e.length>n;n++)i=e[n][1],t(i)&&(r+=e[n][0]+":"+i+";");return""!==r?r:void 0}function S(e){return"string"!=typeof e&&(e+="px"),e}function T(e){var t,n,i=[];if(e)for(t=E.toHyphens(e).split("-"),n=0;t.length>n;n++)i.push("k-pos-"+t[n]);return i.join(" ")}function D(e){return""===e||null===e||"none"===e||"transparent"===e||!t(e)}var A=Math,E=window.kendo,M=E.deepExtend,P=A.PI/180,I=Number.MAX_VALUE,z=-Number.MAX_VALUE,F="undefined",R=Date.now;R||(R=function(){return(new Date).getTime()}),M(E,{util:{MAX_NUM:I,MIN_NUM:z,append:w,arrayLimits:p,arrayMin:f,arrayMax:g,defined:t,deg:a,hashKey:u,hashObject:h,isNumber:s,isTransparent:D,last:y,limitValue:r,now:R,objectKey:d,round:n,rad:o,renderAttr:k,renderAllAttr:x,renderPos:T,renderSize:S,renderStyle:C,renderTemplate:b,sparseArrayLimits:_,sparseArrayMin:m,sparseArrayMax:v,sqr:c,valueOrDefault:l}}),E.dataviz.util=E.util}(window.kendo.jQuery),function(){function e(e){var n,i,r,a,s,l,c,d="",u=0;for(e=t(e);e.length>u;)n=e.charCodeAt(u++),i=e.charCodeAt(u++),r=e.charCodeAt(u++),a=n>>2,s=(3&n)<<4|i>>4,l=(15&i)<<2|r>>6,c=63&r,isNaN(i)?l=c=64:isNaN(r)&&(c=64),d=d+o.charAt(a)+o.charAt(s)+o.charAt(l)+o.charAt(c);return d}function t(e){var t,n,i;for(e=e.replace(/\r\n/g,"\n"),t="",n=0;e.length>n;n++)i=e.charCodeAt(n),128>i?t+=r(i):2048>i?(t+=r(192|i>>>6),t+=r(128|63&i)):65536>i&&(t+=r(224|i>>>12),t+=r(128|i>>>6&63),t+=r(128|63&i));return t}var n=window.kendo,i=n.deepExtend,r=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i(n.util,{encodeBase64:e,encodeUTF8:t})}(window.kendo.jQuery),function(e){var t=Math,n=window.kendo,i=n.deepExtend,r=e.inArray,o={observers:function(){return this._observers=this._observers||[]},addObserver:function(e){return this._observers?this._observers.push(e):this._observers=[e],this},removeObserver:function(e){var t=this.observers(),n=r(e,t);return-1!=n&&t.splice(n,1),this},trigger:function(e,t){var n,i,r=this._observers;if(r&&!this._suspended)for(i=0;r.length>i;i++)n=r[i],n[e]&&n[e](t);return this},optionsChange:function(e){this.trigger("optionsChange",e)},geometryChange:function(e){this.trigger("geometryChange",e)},suspend:function(){return this._suspended=(this._suspended||0)+1,this},resume:function(){return this._suspended=t.max((this._suspended||0)-1,0),this},_observerField:function(e,t){this[e]&&this[e].removeObserver(this),this[e]=t,t.addObserver(this)}};i(n,{mixins:{ObserversMixin:o}})}(window.kendo.jQuery),function(e){function t(e){return null===e?null:e instanceof m?e:new m(e)}function n(e){return e&&y.isFunction(e.matrix)?e.matrix():e}function i(e,t,n,i){var r=0,o=0;return i&&(r=v.atan2(i.c*n,i.a*t),0!==i.b&&(o=v.atan2(i.d*n,i.b*t))),{x:r,y:o}}function r(e,t){for(;t>e;)e+=90;return e}function o(e,t){var n,i,r;for(n=0;t.length>n;n++)i=t[n],r=i.charAt(0).toUpperCase()+i.substring(1,i.length),e["set"+r]=a(i),e["get"+r]=s(i)}function a(e){return function(t){return this[e]!==t&&(this[e]=t,this.geometryChange()),this}}function s(e){return function(){return this[e]}}function l(e,t,n){e>t&&(t+=360);var i=v.abs(t-e);return n||(i=360-i),i}function c(e,t,n,i,r,o){var a=D((r-e)/n,3),s=D((o-t)/i,3);return D(T(v.atan2(s,a)))}function d(e,t,n,i,r,o,a,s){var d,u,h,p,f,g,m,y,w,b,k,x,C,S,T,D,A,E;if(t!==i)w=n-e,b=i-t,k=_(r,2),x=_(o,2),C=(x*w*(e+n)+k*b*(t+i))/(2*k*b),S=C-i,T=-(w*x)/(k*b),f=1/k+_(T,2)/x,g=2*(T*S/x-n/k),m=_(n,2)/k+_(S,2)/x-1,y=v.sqrt(_(g,2)-4*f*m),d=(-g-y)/(2*f),u=C+T*d,h=(-g+y)/(2*f),p=C+T*h;else{if(e===n)return!1;g=-2*i,m=_((n-e)*o/(2*r),2)+_(i,2)-_(o,2),y=v.sqrt(_(g,2)-4*m),d=h=(e+n)/2,u=(-g-y)/2,p=(-g+y)/2}return D=c(d,u,r,o,e,t),A=c(d,u,r,o,n,i),E=l(D,A,s),(a&&180>=E||!a&&E>180)&&(d=h,u=p,D=c(d,u,r,o,e,t),A=c(d,u,r,o,n,i)),{center:new P(d,u),startAngle:D,endAngle:A}}var u,h,p,f,g,m,v=Math,_=v.pow,y=window.kendo,w=y.Class,b=y.deepExtend,k=y.mixins.ObserversMixin,x=y.util,C=x.defined,S=x.rad,T=x.deg,D=x.round,A=v.PI/2,E=x.MIN_NUM,M=x.MAX_NUM,P=w.extend({init:function(e,t){this.x=e||0,this.y=t||0},equals:function(e){return e&&e.x===this.x&&e.y===this.y},clone:function(){return new P(this.x,this.y)},rotate:function(e,n){return this.transform(t().rotate(e,n))},translate:function(e,t){return this.x+=e,this.y+=t,this.geometryChange(),this},translateWith:function(e){return this.translate(e.x,e.y)},move:function(e,t){return this.x=this.y=0,this.translate(e,t)},scale:function(e,t){return C(t)||(t=e),this.x*=e,this.y*=t,this.geometryChange(),this},scaleCopy:function(e,t){return this.clone().scale(e,t)},transform:function(e){var t=n(e),i=this.x,r=this.y;return this.x=t.a*i+t.c*r+t.e,this.y=t.b*i+t.d*r+t.f,this.geometryChange(),this},transformCopy:function(e){var t=this.clone();return e&&t.transform(e),t},distanceTo:function(e){var t=this.x-e.x,n=this.y-e.y;return v.sqrt(t*t+n*n)},round:function(e){return this.x=D(this.x,e),this.y=D(this.y,e),this.geometryChange(),this},toArray:function(e){var t=C(e),n=t?D(this.x,e):this.x,i=t?D(this.y,e):this.y;return[n,i]}});o(P.fn,["x","y"]),b(P.fn,k),P.fn.toString=function(e,t){var n=this.x,i=this.y;return C(e)&&(n=D(n,e),i=D(i,e)),t=t||" ",n+t+i},P.create=function(e,t){return C(e)?e instanceof P?e:1===arguments.length&&2===e.length?new P(e[0],e[1]):new P(e,t):void 0},P.min=function(){var e,t,n=x.MAX_NUM,i=x.MAX_NUM;for(e=0;arguments.length>e;e++)t=arguments[e],n=v.min(t.x,n),i=v.min(t.y,i);return new P(n,i)},P.max=function(){var e,t,n=x.MIN_NUM,i=x.MIN_NUM;for(e=0;arguments.length>e;e++)t=arguments[e],n=v.max(t.x,n),i=v.max(t.y,i);return new P(n,i)},P.minPoint=function(){return new P(E,E)},P.maxPoint=function(){return new P(M,M)},P.ZERO=new P(0,0),u=w.extend({init:function(e,t){this.width=e||0,this.height=t||0},equals:function(e){return e&&e.width===this.width&&e.height===this.height},clone:function(){return new u(this.width,this.height)},toArray:function(e){var t=C(e),n=t?D(this.width,e):this.width,i=t?D(this.height,e):this.height;return[n,i]}}),o(u.fn,["width","height"]),b(u.fn,k),u.create=function(e,t){return C(e)?e instanceof u?e:1===arguments.length&&2===e.length?new u(e[0],e[1]):new u(e,t):void 0},u.ZERO=new u(0,0),h=w.extend({init:function(e,t){this.setOrigin(e||new P),this.setSize(t||new u)},clone:function(){return new h(this.origin.clone(),this.size.clone())},equals:function(e){return e&&e.origin.equals(this.origin)&&e.size.equals(this.size)},setOrigin:function(e){return this._observerField("origin",P.create(e)),this.geometryChange(),this},getOrigin:function(){return this.origin},setSize:function(e){return this._observerField("size",u.create(e)),this.geometryChange(),this},getSize:function(){return this.size},width:function(){return this.size.width},height:function(){return this.size.height},topLeft:function(){return this.origin.clone()},bottomRight:function(){return this.origin.clone().translate(this.width(),this.height())},topRight:function(){return this.origin.clone().translate(this.width(),0)},bottomLeft:function(){return this.origin.clone().translate(0,this.height())},center:function(){return this.origin.clone().translate(this.width()/2,this.height()/2)},bbox:function(e){var t=this.topLeft().transformCopy(e),n=this.topRight().transformCopy(e),i=this.bottomRight().transformCopy(e),r=this.bottomLeft().transformCopy(e);return h.fromPoints(t,n,i,r)}}),b(h.fn,k),h.fromPoints=function(){var e=P.min.apply(this,arguments),t=P.max.apply(this,arguments),n=new u(t.x-e.x,t.y-e.y);return new h(e,n)},h.union=function(e,t){return h.fromPoints(P.min(e.topLeft(),t.topLeft()),P.max(e.bottomRight(),t.bottomRight()))},h.intersect=function(e,t){return e={left:e.topLeft().x,top:e.topLeft().y,right:e.bottomRight().x,bottom:e.bottomRight().y},t={left:t.topLeft().x,top:t.topLeft().y,right:t.bottomRight().x,bottom:t.bottomRight().y},t.right>=e.left&&e.right>=t.left&&t.bottom>=e.top&&e.bottom>=t.top?h.fromPoints(new P(v.max(e.left,t.left),v.max(e.top,t.top)),new P(v.min(e.right,t.right),v.min(e.bottom,t.bottom))):void 0},p=w.extend({init:function(e,t){this.setCenter(e||new P),this.setRadius(t||0)},setCenter:function(e){return this._observerField("center",P.create(e)),this.geometryChange(),this},getCenter:function(){return this.center},equals:function(e){return e&&e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return new p(this.center.clone(),this.radius)},pointAt:function(e){return this._pointAt(S(e))},bbox:function(e){var t,n,r,o,a=P.maxPoint(),s=P.minPoint(),l=i(this.center,this.radius,this.radius,e);for(t=0;4>t;t++)n=this._pointAt(l.x+t*A).transformCopy(e),r=this._pointAt(l.y+t*A).transformCopy(e),o=new P(n.x,r.y),a=P.min(a,o),s=P.max(s,o);return h.fromPoints(a,s)},_pointAt:function(e){var t=this.center,n=this.radius;return new P(t.x-n*v.cos(e),t.y-n*v.sin(e))}}),o(p.fn,["radius"]),b(p.fn,k),f=w.extend({init:function(e,t){this.setCenter(e||new P),t=t||{},this.radiusX=t.radiusX,this.radiusY=t.radiusY||t.radiusX,this.startAngle=t.startAngle,this.endAngle=t.endAngle,this.anticlockwise=t.anticlockwise||!1},clone:function(){return new f(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})},setCenter:function(e){return this._observerField("center",P.create(e)),this.geometryChange(),this},getCenter:function(){return this.center},MAX_INTERVAL:45,pointAt:function(e){var t=this.center,n=S(e);return new P(t.x+this.radiusX*v.cos(n),t.y+this.radiusY*v.sin(n))},curvePoints:function(){var e,t,n,i=this.startAngle,r=this.anticlockwise?-1:1,o=[this.pointAt(i)],a=i,s=this._arcInterval(),l=s.endAngle-s.startAngle,c=v.ceil(l/this.MAX_INTERVAL),d=l/c;for(e=1;c>=e;e++)t=a+r*d,n=this._intervalCurvePoints(a,t),o.push(n.cp1,n.cp2,n.p2),a=t;return o},bbox:function(e){for(var t,n,o=this,a=o._arcInterval(),s=a.startAngle,l=a.endAngle,c=i(this.center,this.radiusX,this.radiusY,e),d=T(c.x),u=T(c.y),p=o.pointAt(s).transformCopy(e),f=o.pointAt(l).transformCopy(e),g=P.min(p,f),m=P.max(p,f),v=r(d,s),_=r(u,s);l>v||l>_;)l>v&&(t=o.pointAt(v).transformCopy(e),v+=90),l>_&&(n=o.pointAt(_).transformCopy(e),_+=90),p=new P(t.x,n.y),g=P.min(g,p),m=P.max(m,p);return h.fromPoints(g,m)},_arcInterval:function(){var e,t=this.startAngle,n=this.endAngle,i=this.anticlockwise;return i&&(e=t,t=n,n=e),(t>n||i&&t===n)&&(n+=360),{startAngle:t,endAngle:n}},_intervalCurvePoints:function(e,t){var n=this,i=n.pointAt(e),r=n.pointAt(t),o=n._derivativeAt(e),a=n._derivativeAt(t),s=(S(t)-S(e))/3,l=new P(i.x+s*o.x,i.y+s*o.y),c=new P(r.x-s*a.x,r.y-s*a.y);return{p1:i,cp1:l,cp2:c,p2:r}},_derivativeAt:function(e){var t=this,n=S(e);return new P(-t.radiusX*v.sin(n),t.radiusY*v.cos(n))}}),o(f.fn,["radiusX","radiusY","startAngle","endAngle","anticlockwise"]),b(f.fn,k),f.fromPoints=function(e,t,n,i,r,o){var a=d(e.x,e.y,t.x,t.y,n,i,r,o);return new f(a.center,{startAngle:a.startAngle,endAngle:a.endAngle,radiusX:n,radiusY:i,anticlockwise:0===o})},g=w.extend({init:function(e,t,n,i,r,o){this.a=e||0,this.b=t||0,this.c=n||0,this.d=i||0,this.e=r||0,this.f=o||0},multiplyCopy:function(e){return new g(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.e+this.c*e.f+this.e,this.b*e.e+this.d*e.f+this.f)},clone:function(){return new g(this.a,this.b,this.c,this.d,this.e,this.f)},equals:function(e){return e?this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f:!1},round:function(e){return this.a=D(this.a,e),this.b=D(this.b,e),this.c=D(this.c,e),this.d=D(this.d,e),this.e=D(this.e,e),this.f=D(this.f,e),this},toArray:function(e){var t,n=[this.a,this.b,this.c,this.d,this.e,this.f];if(C(e))for(t=0;n.length>t;t++)n[t]=D(n[t],e);return n}}),g.fn.toString=function(e,t){return this.toArray(e).join(t||",")},g.translate=function(e,t){return new g(1,0,0,1,e,t)},g.unit=function(){return new g(1,0,0,1,0,0)},g.rotate=function(e,t,n){var i=new g;return i.a=v.cos(S(e)),i.b=v.sin(S(e)),i.c=-i.b,i.d=i.a,i.e=t-t*i.a+n*i.b||0,i.f=n-n*i.a-t*i.b||0,i},g.scale=function(e,t){return new g(e,0,0,t,0,0)},g.IDENTITY=g.unit(),m=w.extend({init:function(e){this._matrix=e||g.unit()},clone:function(){return new m(this._matrix.clone())},equals:function(e){return e&&e._matrix.equals(this._matrix)},_optionsChange:function(){this.optionsChange({field:"transform",value:this})},translate:function(e,t){return this._matrix=this._matrix.multiplyCopy(g.translate(e,t)),this._optionsChange(),this},scale:function(e,t,n){return C(t)||(t=e),n&&(n=P.create(n),this._matrix=this._matrix.multiplyCopy(g.translate(n.x,n.y))),this._matrix=this._matrix.multiplyCopy(g.scale(e,t)),n&&(this._matrix=this._matrix.multiplyCopy(g.translate(-n.x,-n.y))),this._optionsChange(),this},rotate:function(e,t){return t=P.create(t)||P.ZERO,this._matrix=this._matrix.multiplyCopy(g.rotate(e,t.x,t.y)),this._optionsChange(),this},multiply:function(e){var t=n(e);return this._matrix=this._matrix.multiplyCopy(t),this._optionsChange(),this},matrix:function(){return this._matrix}}),b(m.fn,k),b(y,{geometry:{Arc:f,Circle:p,Matrix:g,Point:P,Rect:h,Size:u,Transformation:m,transform:t,toMatrix:n}}),y.dataviz.geometry=y.geometry}(window.kendo.jQuery),function(e){var t,n,i,r=e.noop,o=Object.prototype.toString,a=window.kendo,s=a.Class,l=a.ui.Widget,c=a.deepExtend,d=a.util,u=d.defined,h=a.Observable.extend({init:function(t,n){a.Observable.fn.init.call(this),this.options=c({},this.options,n),this.bind(this.events,this.options),this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this.element=e(t),this.options.width&&this.element.css("width",this.options.width),this.options.height&&this.element.css("height",this.options.height)},options:{},events:["click","mouseenter","mouseleave","resize"],draw:r,clear:r,destroy:r,resize:l.fn.resize,size:l.fn.size,getSize:function(){return{width:this.element.width(),height:this.element.height()}},setSize:function(e){this.element.css({width:e.width,height:e.height}),this._size=e,this._resize()},eventTarget:function(t){for(var n,i=e(t.touch?t.touch.initialTouch:t.target);!n&&i.length>0&&(n=i[0]._kendoNode,!i.is(this.element)&&0!==i.length);)i=i.parent();return n?n.srcElement:void 0},_resize:r,_handler:function(e){var t=this;return function(n){var i=t.eventTarget(n);i&&t.trigger(e,{element:i,originalEvent:n})}}});h.create=function(e,t){return i.current.create(e,t)},t=s.extend({init:function(e){this.childNodes=[],this.parent=null,e&&(this.srcElement=e,this.observe())},destroy:function(){var e,t;for(this.srcElement&&this.srcElement.removeObserver(this),e=this.childNodes,t=0;e.length>t;t++)this.childNodes[t].destroy();this.parent=null},load:r,observe:function(){this.srcElement&&this.srcElement.addObserver(this)},append:function(e){this.childNodes.push(e),e.parent=this},insertAt:function(e,t){this.childNodes.splice(t,0,e),e.parent=this},remove:function(e,t){var n,i=e+t;for(n=e;i>n;n++)this.childNodes[n].removeSelf();this.childNodes.splice(e,t)},removeSelf:function(){this.clear(),this.destroy()},clear:function(){this.remove(0,this.childNodes.length)},invalidate:function(){this.parent&&this.parent.invalidate()},geometryChange:function(){this.invalidate()},optionsChange:function(){this.invalidate()},childrenChange:function(e){"add"===e.action?this.load(e.items,e.index):"remove"===e.action&&this.remove(e.index,e.items.length),this.invalidate()}}),n=s.extend({init:function(e,t){var n,i;this.prefix=t||"";for(n in e)i=e[n],i=this._wrap(i,n),this[n]=i},get:function(e){return a.getter(e,!0)(this)},set:function(e,t){var n,i=a.getter(e,!0)(this);i!==t&&(n=this._set(e,this._wrap(t,e)),n||this.optionsChange({field:this.prefix+e,value:t}))},_set:function(e,t){var i,r,o,s=e.indexOf(".")>=0;if(s)for(i=e.split("."),r="";i.length>1;){if(r+=i.shift(),o=a.getter(r,!0)(this),o||(o=new n({},r+"."),o.addObserver(this),this[r]=o),o instanceof n)return o.set(i.join("."),t),s;r+="."}return this._clear(e),a.setter(e)(this,t),s},_clear:function(e){var t=a.getter(e,!0)(this);t&&t.removeObserver&&t.removeObserver(this)},_wrap:function(e,t){var i=o.call(e);return null!==e&&u(e)&&"[object Object]"===i&&(e instanceof n||e instanceof s||(e=new n(e,this.prefix+t+".")),e.addObserver(this)),e}}),c(n.fn,a.mixins.ObserversMixin),i=function(){this._items=[]},i.prototype={register:function(e,t,n){var i=this._items,r=i[0],o={name:e,type:t,order:n};!r||r.order>n?i.unshift(o):i.push(o)},create:function(e,t){var n,i,r=this._items,o=r[0];if(t&&t.type)for(n=t.type.toLowerCase(),i=0;r.length>i;i++)if(r[i].name===n){o=r[i];break}return o?new o.type(e,t):void a.logToConsole("Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\n- The browser does not support SVG, VML and Canvas. User agent: "+navigator.userAgent+"\n- The Kendo UI scripts are not fully loaded")}},i.current=new i,c(a,{drawing:{DASH_ARRAYS:{dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]},Color:a.Color,BaseNode:t,OptionsStore:n,Surface:h,SurfaceFactory:i}}),a.dataviz.drawing=a.drawing
}(window.kendo.jQuery),function(){var e=window.kendo,t=e.deepExtend,n=e.util.defined,i="gradient",r={extend:function(e){e.fill=this.fill,e.stroke=this.stroke},fill:function(e,t){var r,o=this.options;return n(e)?(e&&e.nodeType!=i?(r={color:e},n(t)&&(r.opacity=t),o.set("fill",r)):o.set("fill",e),this):o.get("fill")},stroke:function(e,t,i){return n(e)?(this.options.set("stroke.color",e),n(t)&&this.options.set("stroke.width",t),n(i)&&this.options.set("stroke.opacity",i),this):this.options.get("stroke")}},o={extend:function(e,t){e.traverse=function(e){var n,i,r=this[t];for(n=0;r.length>n;n++)i=r[n],i.traverse?i.traverse(e):e(i);return this}}};t(e.drawing,{mixins:{Paintable:r,Traversable:o}})}(window.kendo.jQuery),function(e){function t(e,t){return d.current.measure(e,t)}var n=document,i=window.kendo,r=i.Class,o=i.deepExtend,a=i.util,s=a.defined,l=1,c=r.extend({init:function(e){this._size=e,this._length=0,this._map={}},put:function(e,t){var n=this,i=n._map,r={key:e,value:t};i[e]=r,n._head?(n._tail.newer=r,r.older=n._tail,n._tail=r):n._head=n._tail=r,n._length>=n._size?(i[n._head.key]=null,n._head=n._head.newer,n._head.older=null):n._length++},get:function(e){var t=this,n=t._map[e];return n?(n===t._head&&n!==t._tail&&(t._head=n.newer,t._head.older=null),n!==t._tail&&(n.older&&(n.older.newer=n.newer,n.newer.older=n.older),n.older=t._tail,n.newer=null,t._tail.newer=n,t._tail=n),n.value):void 0}}),d=r.extend({init:function(){this._cache=new c(1e3)},measure:function(e,t){var i,r,o,c,d,u=a.objectKey(t),h=a.hashKey(e+u),p=this._cache.get(h);if(p)return p;i={width:0,height:0,baseline:0},r=this._measureBox,o=this._baselineMarker.cloneNode(!1);for(c in t)d=t[c],s(d)&&(r.style[c]=d);return r.innerHTML=e,r.appendChild(o),n.body.appendChild(r),(e+"").length&&(i.width=r.offsetWidth-l,i.height=r.offsetHeight,i.baseline=o.offsetTop+l),this._cache.put(h,i),r.parentNode.removeChild(r),i}});d.fn._baselineMarker=e("<div class='k-baseline-marker' style='display: inline-block; vertical-align: baseline;width: "+l+"px; height: "+l+"px;overflow: hidden;' />")[0],d.fn._measureBox=e("<div style='position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space:nowrap !important;' />")[0],d.current=new d,o(i.drawing,{util:{TextMetrics:d,LRUCache:c,measureText:t}})}(window.kendo.jQuery),function(e){function t(e,t,n){var i,r,o,a;for(r=0;e.length>r;r++)o=e[r],o.visible()&&(a=t?o.bbox(n):o.rawBBox(),a&&(i=i?M.union(i,a):a));return i}function n(e,t,n){var i,r,o,a;for(r=0;e.length>r;r++)o=e[r],o.visible()&&(a=t?o.clippedBBox(n):o.rawBBox(),a&&(i=i?M.union(i,a):a));return i}function i(e,t){e.origin.x-=t,e.origin.y-=t,e.size.width+=2*t,e.size.height+=2*t}function r(e,t){for(var n=0;t.length>n;n++)e[t[n]]=o(t[n])}function o(e){var t="_"+e;return function(e){return V(e)?(this._observerField(t,e),this.geometryChange(),this):this[t]}}function a(e,t){for(var n=0;t.length>n;n++)e[t[n]]=s(t[n])}function s(e){var t="_"+e;return function(e){return V(e)?(this._observerField(t,E.create(e)),this.geometryChange(),this):this[t]}}function l(e,t){for(var n=0;t.length>n;n++)e[t[n]]=c(t[n])}function c(e){return function(t){return V(t)?(this.options.set(e,t),this):this.options.get(e)}}var d,u,h,p,f,g,m,v,_,y,w,b,k,x,C,S=window.kendo,T=S.Class,D=S.deepExtend,A=S.geometry,E=A.Point,M=A.Rect,P=A.Size,I=A.Matrix,z=A.toMatrix,F=S.drawing,R=F.OptionsStore,B=Math,L=B.pow,O=S.util,H=O.append,N=O.arrayLimits,V=O.defined,U=O.last,W=O.valueOrDefault,j=S.mixins.ObserversMixin,G=e.inArray,q=[].push,$=[].pop,Y=[].splice,K=[].shift,Q=[].slice,X=[].unshift,J=T.extend({nodeType:"Element",init:function(e){this._initOptions(e)},_initOptions:function(e){var t,n;e=e||{},t=e.transform,n=e.clip,t&&(e.transform=A.transform(t)),n&&!n.id&&(n.id=S.guid()),this.options=new R(e),this.options.addObserver(this)},transform:function(e){return V(e)?void this.options.set("transform",A.transform(e)):this.options.get("transform")},parentTransform:function(){for(var e,t,n=this;n.parent;)n=n.parent,e=n.transform(),e&&(t=e.matrix().multiplyCopy(t||I.unit()));return t?A.transform(t):void 0},currentTransform:function(e){var t,n,i=this.transform(),r=z(i);return V(e)||(e=this.parentTransform()),t=z(e),n=r&&t?t.multiplyCopy(r):r||t,n?A.transform(n):void 0},visible:function(e){return V(e)?(this.options.set("visible",e),this):this.options.get("visible")!==!1},clip:function(e){var t=this.options;return V(e)?(e&&!e.id&&(e.id=S.guid()),t.set("clip",e),this):t.get("clip")},opacity:function(e){return V(e)?(this.options.set("opacity",e),this):W(this.options.get("opacity"),1)},clippedBBox:function(e){var t,n=this._clippedBBox(e);return n?(t=this.clip(),t?M.intersect(n,t.bbox(e)):n):void 0},_clippedBBox:function(e){return this.bbox(e)}});D(J.fn,j),d=T.extend({init:function(e){e=e||[],this.length=0,this._splice(0,e.length,e)},elements:function(e){return e?(this._splice(0,this.length,e),this._change(),this):this.slice(0)},push:function(){var e=arguments,t=q.apply(this,e);return this._add(e),t},slice:Q,pop:function(){var e=this.length,t=$.apply(this);return e&&this._remove([t]),t},splice:function(e,t){var n=Q.call(arguments,2),i=this._splice(e,t,n);return this._change(),i},shift:function(){var e=this.length,t=K.apply(this);return e&&this._remove([t]),t},unshift:function(){var e=arguments,t=X.apply(this,e);return this._add(e),t},indexOf:function(e){var t,n,i=this;for(t=0,n=i.length;n>t;t++)if(i[t]===e)return t;return-1},_splice:function(e,t,n){var i=Y.apply(this,[e,t].concat(n));return this._clearObserver(i),this._setObserver(n),i},_add:function(e){this._setObserver(e),this._change()},_remove:function(e){this._clearObserver(e),this._change()},_setObserver:function(e){for(var t=0;e.length>t;t++)e[t].addObserver(this)},_clearObserver:function(e){for(var t=0;e.length>t;t++)e[t].removeObserver(this)},_change:function(){}}),D(d.fn,j),u=J.extend({nodeType:"Group",init:function(e){J.fn.init.call(this,e),this.children=[]},childrenChange:function(e,t,n){this.trigger("childrenChange",{action:e,items:t,index:n})},append:function(){return H(this.children,arguments),this._reparent(arguments,this),this.childrenChange("add",arguments),this},insertAt:function(e,t){return this.children.splice(t,0,e),e.parent=this,this.childrenChange("add",[e],t),this},remove:function(e){var t=G(e,this.children);return t>=0&&(this.children.splice(t,1),e.parent=null,this.childrenChange("remove",[e],t)),this},removeAt:function(e){if(e>=0&&this.children.length>e){var t=this.children[e];this.children.splice(e,1),t.parent=null,this.childrenChange("remove",[t],e)}return this},clear:function(){var e=this.children;return this.children=[],this._reparent(e,null),this.childrenChange("remove",e,0),this},bbox:function(e){return t(this.children,!0,this.currentTransform(e))},rawBBox:function(){return t(this.children,!1)},_clippedBBox:function(e){return n(this.children,this.currentTransform(e))},currentTransform:function(e){return J.fn.currentTransform.call(this,e)||null},_reparent:function(e,t){var n,i,r;for(n=0;e.length>n;n++)i=e[n],r=i.parent,r&&r!=this&&r.remove&&r.remove(i),i.parent=t}}),F.mixins.Traversable.extend(u.fn,"children"),h=J.extend({nodeType:"Text",init:function(e,t,n){J.fn.init.call(this,n),this.content(e),this.position(t||new A.Point),this.options.font||(this.options.font="12px sans-serif"),V(this.options.fill)||this.fill("#000")},content:function(e){return V(e)?(this.options.set("content",e),this):this.options.get("content")},measure:function(){var e=F.util.measureText(this.content(),{font:this.options.get("font")});return e},rect:function(){var e=this.measure(),t=this.position().clone();return new A.Rect(t,[e.width,e.height])},bbox:function(e){var t=z(this.currentTransform(e));return this.rect().bbox(t)},rawBBox:function(){return this.rect().bbox()}}),F.mixins.Paintable.extend(h.fn),a(h.fn,["position"]),p=J.extend({nodeType:"Circle",init:function(e,t){J.fn.init.call(this,t),this.geometry(e||new A.Circle),V(this.options.stroke)||this.stroke("#000")},bbox:function(e){var t=z(this.currentTransform(e)),n=this._geometry.bbox(t),r=this.options.get("stroke.width");return r&&i(n,r/2),n},rawBBox:function(){return this._geometry.bbox()}}),F.mixins.Paintable.extend(p.fn),r(p.fn,["geometry"]),f=J.extend({nodeType:"Arc",init:function(e,t){J.fn.init.call(this,t),this.geometry(e||new A.Arc),V(this.options.stroke)||this.stroke("#000")},bbox:function(e){var t=z(this.currentTransform(e)),n=this.geometry().bbox(t),r=this.options.get("stroke.width");return r&&i(n,r/2),n},rawBBox:function(){return this.geometry().bbox()},toPath:function(){var e,t=new v,n=this.geometry().curvePoints();if(n.length>0)for(t.moveTo(n[0].x,n[0].y),e=1;n.length>e;e+=3)t.curveTo(n[e],n[e+1],n[e+2]);return t}}),F.mixins.Paintable.extend(f.fn),r(f.fn,["geometry"]),g=d.extend({_change:function(){this.geometryChange()}}),m=T.extend({init:function(e,t,n){this.anchor(e||new E),this.controlIn(t),this.controlOut(n)},bboxTo:function(e,t){var n,i=this.anchor().transformCopy(t),r=e.anchor().transformCopy(t);return n=this.controlOut()&&e.controlIn()?this._curveBoundingBox(i,this.controlOut().transformCopy(t),e.controlIn().transformCopy(t),r):this._lineBoundingBox(i,r)},_lineBoundingBox:function(e,t){return M.fromPoints(e,t)},_curveBoundingBox:function(e,t,n,i){var r=[e,t,n,i],o=this._curveExtremesFor(r,"x"),a=this._curveExtremesFor(r,"y"),s=N([o.min,o.max,e.x,i.x]),l=N([a.min,a.max,e.y,i.y]);return M.fromPoints(new E(s.min,l.min),new E(s.max,l.max))},_curveExtremesFor:function(e,t){var n=this._curveExtremes(e[0][t],e[1][t],e[2][t],e[3][t]);return{min:this._calculateCurveAt(n.min,t,e),max:this._calculateCurveAt(n.max,t,e)}},_calculateCurveAt:function(e,t,n){var i=1-e;return L(i,3)*n[0][t]+3*L(i,2)*e*n[1][t]+3*L(e,2)*i*n[2][t]+L(e,3)*n[3][t]},_curveExtremes:function(e,t,n,i){var r,o,a=e-3*t+3*n-i,s=-2*(e-2*t+n),l=e-t,c=B.sqrt(s*s-4*a*l),d=0,u=1;return 0===a?0!==s&&(d=u=-l/s):isNaN(c)||(d=(-s+c)/(2*a),u=(-s-c)/(2*a)),r=B.max(B.min(d,u),0),(0>r||r>1)&&(r=0),o=B.min(B.max(d,u),1),(o>1||0>o)&&(o=1),{min:r,max:o}}}),a(m.fn,["anchor","controlIn","controlOut"]),D(m.fn,j),v=J.extend({nodeType:"Path",init:function(e){J.fn.init.call(this,e),this.segments=new g,this.segments.addObserver(this),V(this.options.stroke)||(this.stroke("#000"),V(this.options.stroke.lineJoin)||this.options.set("stroke.lineJoin","miter"))},moveTo:function(e,t){return this.suspend(),this.segments.elements([]),this.resume(),this.lineTo(e,t),this},lineTo:function(e,t){var n=V(t)?new E(e,t):e,i=new m(n);return this.segments.push(i),this},curveTo:function(e,t,n){var i,r;return this.segments.length>0&&(i=U(this.segments),r=new m(n,t),this.suspend(),i.controlOut(e),this.resume(),this.segments.push(r)),this},arc:function(e,t,n,i,r){var o,a,s,l,c;return this.segments.length>0&&(o=U(this.segments),a=o.anchor(),s=O.rad(e),l=new E(a.x-n*B.cos(s),a.y-i*B.sin(s)),c=new A.Arc(l,{startAngle:e,endAngle:t,radiusX:n,radiusY:i,anticlockwise:r}),this._addArcSegments(c)),this},arcTo:function(e,t,n,i,r){var o,a,s;return this.segments.length>0&&(o=U(this.segments),a=o.anchor(),s=A.Arc.fromPoints(a,e,t,n,i,r),this._addArcSegments(s)),this},_addArcSegments:function(e){var t,n;for(this.suspend(),t=e.curvePoints(),n=1;t.length>n;n+=3)this.curveTo(t[n],t[n+1],t[n+2]);this.resume(),this.geometryChange()},close:function(){return this.options.closed=!0,this.geometryChange(),this},bbox:function(e){var t=z(this.currentTransform(e)),n=this._bbox(t),r=this.options.get("stroke.width");return r&&i(n,r/2),n},rawBBox:function(){return this._bbox()},_bbox:function(e){var t,n,i,r,o=this.segments,a=o.length;if(1===a)n=o[0].anchor().transformCopy(e),t=new M(n,P.ZERO);else if(a>0)for(i=1;a>i;i++)r=o[i-1].bboxTo(o[i],e),t=t?M.union(t,r):r;return t}}),F.mixins.Paintable.extend(v.fn),v.fromRect=function(e,t){return new v(t).moveTo(e.topLeft()).lineTo(e.topRight()).lineTo(e.bottomRight()).lineTo(e.bottomLeft()).close()},v.fromPoints=function(e,t){var n,i,r;if(e){for(n=new v(t),i=0;e.length>i;i++)r=E.create(e[i]),r&&(0===i?n.moveTo(r):n.lineTo(r));return n}},v.fromArc=function(e,t){var n=new v(t),i=e.startAngle,r=e.pointAt(i);return n.moveTo(r.x,r.y),n.arc(i,e.endAngle,e.radiusX,e.radiusY,e.anticlockwise),n},_=J.extend({nodeType:"MultiPath",init:function(e){J.fn.init.call(this,e),this.paths=new g,this.paths.addObserver(this),V(this.options.stroke)||this.stroke("#000")},moveTo:function(e,t){var n=new v;return n.moveTo(e,t),this.paths.push(n),this},lineTo:function(e,t){return this.paths.length>0&&U(this.paths).lineTo(e,t),this},curveTo:function(e,t,n){return this.paths.length>0&&U(this.paths).curveTo(e,t,n),this},arc:function(e,t,n,i,r){return this.paths.length>0&&U(this.paths).arc(e,t,n,i,r),this},arcTo:function(e,t,n,i,r){return this.paths.length>0&&U(this.paths).arcTo(e,t,n,i,r),this},close:function(){return this.paths.length>0&&U(this.paths).close(),this},bbox:function(e){return t(this.paths,!0,this.currentTransform(e))},rawBBox:function(){return t(this.paths,!1)},_clippedBBox:function(e){return n(this.paths,this.currentTransform(e))}}),F.mixins.Paintable.extend(_.fn),y=J.extend({nodeType:"Image",init:function(e,t,n){J.fn.init.call(this,n),this.src(e),this.rect(t||new A.Rect)},src:function(e){return V(e)?(this.options.set("src",e),this):this.options.get("src")},bbox:function(e){var t=z(this.currentTransform(e));return this._rect.bbox(t)},rawBBox:function(){return this._rect.bbox()}}),r(y.fn,["rect"]),w=T.extend({init:function(e,t,n){this.options=new R({offset:e,color:t,opacity:V(n)?n:1}),this.options.addObserver(this)}}),l(w.fn,["offset","color","opacity"]),D(w.fn,j),w.create=function(e){if(V(e)){var t;return t=e instanceof w?e:e.length>1?new w(e[0],e[1],e[2]):new w(e.offset,e.color,e.opacity)}},b=d.extend({_change:function(){this.optionsChange({field:"stops"})}}),k=T.extend({nodeType:"gradient",init:function(e){this.stops=new b(this._createStops(e.stops)),this.stops.addObserver(this),this._userSpace=e.userSpace,this.id=S.guid()},userSpace:function(e){return V(e)?(this._userSpace=e,this.optionsChange(),this):this._userSpace},_createStops:function(e){var t,n=[];for(e=e||[],t=0;e.length>t;t++)n.push(w.create(e[t]));return n},addStop:function(e,t,n){this.stops.push(new w(e,t,n))},removeStop:function(e){var t=this.stops.indexOf(e);t>=0&&this.stops.splice(t,1)}}),D(k.fn,j,{optionsChange:function(e){this.trigger("optionsChange",{field:"gradient"+(e?"."+e.field:""),value:this})},geometryChange:function(){this.optionsChange()}}),x=k.extend({init:function(e){e=e||{},k.fn.init.call(this,e),this.start(e.start||new E),this.end(e.end||new E(1,0))}}),a(x.fn,["start","end"]),C=k.extend({init:function(e){e=e||{},k.fn.init.call(this,e),this.center(e.center||new E),this._radius=V(e.radius)?e.radius:1,this._fallbackFill=e.fallbackFill},radius:function(e){return V(e)?(this._radius=e,this.geometryChange(),this):this._radius},fallbackFill:function(e){return V(e)?(this._fallbackFill=e,this.optionsChange(),this):this._fallbackFill}}),a(C.fn,["center"]),D(F,{Arc:f,Circle:p,Element:J,ElementsArray:d,Gradient:k,GradientStop:w,Group:u,Image:y,LinearGradient:x,MultiPath:_,Path:v,RadialGradient:C,Segment:m,Text:h})}(window.kendo.jQuery),function(e){function t(e){var t=[];return e.replace(g,function(e,n){t.push(parseFloat(n))}),t}function n(e,t,n){var i,r=t?0:1;for(i=0;e.length>i;i+=2)e.splice(i+r,0,n)}function i(e,t){return e&&t?t.scaleCopy(2).translate(-e.x,-e.y):void 0}function r(e,t,n){var i=1/3;return t=t.clone().scale(2/3),{controlOut:t.clone().translateWith(e.scaleCopy(i)),controlIn:t.translateWith(n.scaleCopy(i))}}var o=window.kendo,a=o.drawing,s=o.geometry,l=o.Class,c=s.Point,d=o.deepExtend,u=e.trim,h=o.util,p=h.last,f=/([a-z]{1})([^a-z]*)(z)?/gi,g=/[,\s]?(-?(?:\d+\.)?\d+)/g,m="m",v="z",_=l.extend({parse:function(e,n){var i,r=new a.MultiPath(n),o=new c;return e.replace(f,function(e,n,a,s){var l=n.toLowerCase(),c=l===n,d=t(u(a));if(l===m&&(c?(o.x+=d[0],o.y+=d[1]):(o.x=d[0],o.y=d[1]),r.moveTo(o.x,o.y),d.length>2&&(l="l",d.splice(0,2))),y[l])y[l](r,{parameters:d,position:o,isRelative:c,previousCommand:i}),s&&s.toLowerCase()===v&&r.close();else if(l!==m)throw Error("Error while parsing SVG path. Unsupported command: "+l);i=l}),r}}),y={l:function(e,t){var n,i,r=t.parameters,o=t.position;for(n=0;r.length>n;n+=2)i=new c(r[n],r[n+1]),t.isRelative&&i.translateWith(o),e.lineTo(i.x,i.y),o.x=i.x,o.y=i.y},c:function(e,t){var n,i,r,o,a=t.parameters,s=t.position;for(o=0;a.length>o;o+=6)n=new c(a[o],a[o+1]),i=new c(a[o+2],a[o+3]),r=new c(a[o+4],a[o+5]),t.isRelative&&(i.translateWith(s),n.translateWith(s),r.translateWith(s)),e.curveTo(n,i,r),s.x=r.x,s.y=r.y},v:function(e,t){var i=t.isRelative?0:t.position.x;n(t.parameters,!0,i),this.l(e,t)},h:function(e,t){var i=t.isRelative?0:t.position.y;n(t.parameters,!1,i),this.l(e,t)},a:function(e,t){var n,i,r,o,a,s,l=t.parameters,d=t.position;for(n=0;l.length>n;n+=7)i=l[n],r=l[n+1],o=l[n+3],a=l[n+4],s=new c(l[n+5],l[n+6]),t.isRelative&&s.translateWith(d),e.arcTo(s,i,r,o,a),d.x=s.x,d.y=s.y},s:function(e,t){var n,r,o,a,s,l=t.parameters,d=t.position,u=t.previousCommand;for(("s"==u||"c"==u)&&(a=p(p(e.paths).segments).controlIn()),s=0;l.length>s;s+=4)o=new c(l[s],l[s+1]),r=new c(l[s+2],l[s+3]),t.isRelative&&(o.translateWith(d),r.translateWith(d)),n=a?i(a,d):d.clone(),a=o,e.curveTo(n,o,r),d.x=r.x,d.y=r.y},q:function(e,t){var n,i,o,a,s=t.parameters,l=t.position;for(a=0;s.length>a;a+=4)o=new c(s[a],s[a+1]),i=new c(s[a+2],s[a+3]),t.isRelative&&(o.translateWith(l),i.translateWith(l)),n=r(l,o,i),e.curveTo(n.controlOut,n.controlIn,i),l.x=i.x,l.y=i.y},t:function(e,t){var n,o,a,s,l,d=t.parameters,u=t.position,h=t.previousCommand;for(("q"==h||"t"==h)&&(s=p(p(e.paths).segments),o=s.controlIn().clone().translateWith(u.scaleCopy(-1/3)).scale(1.5)),l=0;d.length>l;l+=2)a=new c(d[l],d[l+1]),t.isRelative&&a.translateWith(u),o=o?i(o,u):u.clone(),n=r(u,o,a),e.curveTo(n.controlOut,n.controlIn,a),u.x=a.x,u.y=a.y}};_.current=new _,a.Path.parse=function(e,t){return _.current.parse(e,t)},d(a,{PathParser:_})}(window.kendo.jQuery),function(e){function t(e){var t,n,i,r;try{t=e.getScreenCTM?e.getScreenCTM():null}catch(o){}t&&(n=-t.e%1,i=-t.f%1,r=e.style,(0!==n||0!==i)&&(r.left=n+"px",r.top=i+"px"))}function n(){var e=document.getElementsByTagName("base")[0],t="",n=document.location.href,i=n.indexOf("#");return e&&!d.support.browser.msie&&(-1!==i&&(n=n.substring(0,i)),t=n),t}function i(e){return"url("+n()+"#"+e+")"}function r(e){var t,n,i,r=new F({encodeText:!0}),o=e.clippedBBox();return o&&(t=o.getOrigin(),n=new p.Group,n.transform(h.transform().translate(-t.x,-t.y)),n.children.push(e),e=n),r.load([e]),i="<?xml version='1.0' ?><svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='"+E+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>"+r.render()+"</svg>",r.destroy(),i}function o(t,n){var i=r(t);return n&&n.raw||(i="data:image/svg+xml;base64,"+g.encodeBase64(i)),e.Deferred().resolve(i).promise()}function a(e,t){return"clip"==e||"fill"==e&&(!t||t.nodeType==C)}function s(e){if(!e||!e.indexOf||e.indexOf("&")<0)return e;var t=s._element;return t.innerHTML=e,t.textContent||t.innerText}var l,c=document,d=window.kendo,u=d.deepExtend,h=d.geometry,p=d.drawing,f=p.BaseNode,g=d.util,m=g.defined,v=g.isTransparent,_=g.renderAttr,y=g.renderAllAttr,w=g.renderTemplate,b=e.inArray,k="butt",x=p.DASH_ARRAYS,C="gradient",S="none",T=".kendo",D="solid",A=" ",E="http://www.w3.org/2000/svg",M="transform",P="undefined",I=p.Surface.extend({init:function(e,n){p.Surface.fn.init.call(this,e,n),this._root=new F(this.options),K(this.element[0],this._template(this)),this._rootElement=this.element[0].firstElementChild,t(this._rootElement),this._root.attachTo(this._rootElement),this.element.on("click"+T,this._click),this.element.on("mouseover"+T,this._mouseenter),this.element.on("mouseout"+T,this._mouseleave),this.resize()},type:"svg",destroy:function(){this._root&&(this._root.destroy(),this._root=null,this._rootElement=null,this.element.off(T)),p.Surface.fn.destroy.call(this)},translate:function(e){var t=d.format("{0} {1} {2} {3}",Math.round(e.x),Math.round(e.y),this._size.width,this._size.height);this._offset=e,this._rootElement.setAttribute("viewBox",t)},draw:function(e){this._root.load([e])},clear:function(){this._root.clear()},svg:function(){return"<?xml version='1.0' ?>"+this._template(this)},_resize:function(){this._offset&&this.translate(this._offset)},_template:w("<svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='"+E+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>#= d._root.render() #</svg>")}),z=f.extend({init:function(e){f.fn.init.call(this,e),this.definitions={}},destroy:function(){this.element&&(this.element._kendoNode=null,this.element=null),this.clearDefinitions(),f.fn.destroy.call(this)},load:function(e,t){var n,i,r,o,a=this,s=a.element;for(o=0;e.length>o;o++)i=e[o],r=i.children,n=new Y[i.nodeType](i),m(t)?a.insertAt(n,t):a.append(n),n.createDefinitions(),r&&r.length>0&&n.load(r),s&&n.attachTo(s,t)},root:function(){for(var e=this;e.parent;)e=e.parent;return e},attachTo:function(e,t){var n,i=c.createElement("div");K(i,"<svg xmlns='"+E+"' version='1.1'>"+this.render()+"</svg>"),n=i.firstChild.firstChild,n&&(m(t)?e.insertBefore(n,e.childNodes[t]):e.appendChild(n),this.setElement(n))},setElement:function(e){var t,n,i=this.childNodes;for(this.element&&(this.element._kendoNode=null),this.element=e,this.element._kendoNode=this,n=0;i.length>n;n++)t=e.childNodes[n],i[n].setElement(t)},clear:function(){var e,t;for(this.clearDefinitions(),this.element&&(this.element.innerHTML=""),e=this.childNodes,t=0;e.length>t;t++)e[t].destroy();this.childNodes=[]},removeSelf:function(){this.element&&(this.element.parentNode.removeChild(this.element),this.element=null),f.fn.removeSelf.call(this)},template:w("#= d.renderChildren() #"),render:function(){return this.template(this)},renderChildren:function(){var e,t=this.childNodes,n="";for(e=0;t.length>e;e++)n+=t[e].render();return n},optionsChange:function(e){var t=e.field,n=e.value;"visible"===t?this.css("display",n?"":S):l[t]&&a(t,n)?this.updateDefinition(t,n):"opacity"===t&&this.attr("opacity",n),f.fn.optionsChange.call(this,e)},attr:function(e,t){this.element&&this.element.setAttribute(e,t)},allAttr:function(e){for(var t=0;e.length>t;t++)this.attr(e[t][0],e[t][1])},css:function(e,t){this.element&&(this.element.style[e]=t)},allCss:function(e){for(var t=0;e.length>t;t++)this.css(e[t][0],e[t][1])},removeAttr:function(e){this.element&&this.element.removeAttribute(e)},mapTransform:function(e){var t=[];return e&&t.push([M,"matrix("+e.matrix().toString(6)+")"]),t},renderTransform:function(){return y(this.mapTransform(this.srcElement.transform()))},transformChange:function(e){e?this.allAttr(this.mapTransform(e)):this.removeAttr(M)},mapStyle:function(){var e=this.srcElement.options,t=[["cursor",e.cursor]];return e.visible===!1&&t.push(["display",S]),t},renderStyle:function(){return _("style",g.renderStyle(this.mapStyle()))},renderOpacity:function(){return _("opacity",this.srcElement.options.opacity)},createDefinitions:function(){var e,t,n,i,r=this.srcElement,o=this.definitions;if(r){n=r.options;for(t in l)e=n.get(t),e&&a(t,e)&&(o[t]=e,i=!0);i&&this.definitionChange({action:"add",definitions:o})}},definitionChange:function(e){this.parent&&this.parent.definitionChange(e)},updateDefinition:function(e,t){var n=this.definitions,r=n[e],o=l[e],a={};r&&(a[e]=r,this.definitionChange({action:"remove",definitions:a}),delete n[e]),t?(a[e]=t,this.definitionChange({action:"add",definitions:a}),n[e]=t,this.attr(o,i(t.id))):r&&this.removeAttr(o)},clearDefinitions:function(){var e,t=this.definitions;for(e in t){this.definitionChange({action:"remove",definitions:t}),this.definitions={};break}},renderDefinitions:function(){return y(this.mapDefinitions())},mapDefinitions:function(){var e,t=this.definitions,n=[];for(e in t)n.push([l[e],i(t[e].id)]);return n}}),F=z.extend({init:function(e){z.fn.init.call(this),this.options=e,this.defs=new R},attachTo:function(e){this.element=e,this.defs.attachTo(e.firstElementChild)},clear:function(){f.fn.clear.call(this)},template:w("#=d.defs.render()##= d.renderChildren() #"),definitionChange:function(e){this.defs.definitionChange(e)}}),R=z.extend({init:function(){z.fn.init.call(this),this.definitionMap={}},attachTo:function(e){this.element=e},template:w("<defs>#= d.renderChildren()#</defs>"),definitionChange:function(e){var t=e.definitions,n=e.action;"add"==n?this.addDefinitions(t):"remove"==n&&this.removeDefinitions(t)},createDefinition:function(e,t){var n;return"clip"==e?n=B:"fill"==e&&(t instanceof p.LinearGradient?n=q:t instanceof p.RadialGradient&&(n=$)),new n(t)},addDefinitions:function(e){for(var t in e)this.addDefinition(t,e[t])},addDefinition:function(e,t){var n,i=this.definitionMap,r=t.id,o=this.element,a=i[r];a?a.count++:(n=this.createDefinition(e,t),i[r]={element:n,count:1},this.append(n),o&&n.attachTo(this.element))},removeDefinitions:function(e){for(var t in e)this.removeDefinition(e[t])},removeDefinition:function(e){var t=this.definitionMap,n=e.id,i=t[n];i&&(i.count--,0===i.count&&(this.remove(b(i.element,this.childNodes),1),delete t[n]))}}),B=z.extend({init:function(e){z.fn.init.call(this),this.srcElement=e,this.id=e.id,this.load([e])},template:w("<clipPath id='#=d.id#'>#= d.renderChildren()#</clipPath>")}),L=z.extend({template:w("<g#= d.renderTransform() + d.renderStyle() + d.renderOpacity() + d.renderDefinitions()#>#= d.renderChildren() #</g>"),optionsChange:function(e){e.field==M&&this.transformChange(e.value),z.fn.optionsChange.call(this,e)}}),O=z.extend({geometryChange:function(){this.attr("d",this.renderData()),this.invalidate()},optionsChange:function(e){switch(e.field){case"fill":e.value?this.allAttr(this.mapFill(e.value)):this.removeAttr("fill");break;case"fill.color":this.allAttr(this.mapFill({color:e.value}));break;case"stroke":e.value?this.allAttr(this.mapStroke(e.value)):this.removeAttr("stroke");break;case M:this.transformChange(e.value);break;default:var t=this.attributeMap[e.field];t&&this.attr(t,e.value)}z.fn.optionsChange.call(this,e)},attributeMap:{"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"},content:function(){this.element&&(this.element.textContent=this.srcElement.content())},renderData:function(){return this.printPath(this.srcElement)},printPath:function(e){var t,n,i,r,o,a=e.segments,s=a.length;if(s>0){for(t=[],o=1;s>o;o++)i=this.segmentType(a[o-1],a[o]),i!==r&&(r=i,t.push(i)),t.push("L"===i?this.printPoints(a[o].anchor()):this.printPoints(a[o-1].controlOut(),a[o].controlIn(),a[o].anchor()));return n="M"+this.printPoints(a[0].anchor())+A+t.join(A),e.options.closed&&(n+="Z"),n}},printPoints:function(){var e,t=arguments,n=t.length,i=[];for(e=0;n>e;e++)i.push(t[e].toString(3));return i.join(A)},segmentType:function(e,t){return e.controlOut()&&t.controlIn()?"C":"L"},mapStroke:function(e){var t=[];return e&&!v(e.color)?(t.push(["stroke",e.color]),t.push(["stroke-width",e.width]),t.push(["stroke-linecap",this.renderLinecap(e)]),t.push(["stroke-linejoin",e.lineJoin]),m(e.opacity)&&t.push(["stroke-opacity",e.opacity]),m(e.dashType)&&t.push(["stroke-dasharray",this.renderDashType(e)])):t.push(["stroke",S]),t},renderStroke:function(){return y(this.mapStroke(this.srcElement.options.stroke))},renderDashType:function(e){var t,n,i,r=e.width||1,o=e.dashType;if(o&&o!=D){for(t=x[o.toLowerCase()],n=[],i=0;t.length>i;i++)n.push(t[i]*r);return n.join(" ")}},renderLinecap:function(e){var t=e.dashType,n=e.lineCap;return t&&t!=D?k:n},mapFill:function(e){var t=[];return e&&e.nodeType==C||(e&&!v(e.color)?(t.push(["fill",e.color]),m(e.opacity)&&t.push(["fill-opacity",e.opacity])):t.push(["fill",S])),t},renderFill:function(){return y(this.mapFill(this.srcElement.options.fill))},template:w("<path #= d.renderStyle() # #= d.renderOpacity() # #= kendo.util.renderAttr('d', d.renderData()) # #= d.renderStroke() # #= d.renderFill() # #= d.renderDefinitions() # #= d.renderTransform() #></path>")}),H=O.extend({renderData:function(){return this.printPath(this.srcElement.toPath())}}),N=O.extend({renderData:function(){var e,t,n=this.srcElement.paths;if(n.length>0){for(e=[],t=0;n.length>t;t++)e.push(this.printPath(n[t]));return e.join(" ")}}}),V=O.extend({geometryChange:function(){var e=this.center();this.attr("cx",e.x),this.attr("cy",e.y),this.attr("r",this.radius()),this.invalidate()},center:function(){return this.srcElement.geometry().center},radius:function(){return this.srcElement.geometry().radius},template:w("<circle #= d.renderStyle() # #= d.renderOpacity() # cx='#= d.center().x #' cy='#= d.center().y #' r='#= d.radius() #' #= d.renderStroke() # #= d.renderFill() # #= d.renderDefinitions() # #= d.renderTransform() # ></circle>")}),U=O.extend({geometryChange:function(){var e=this.pos();this.attr("x",e.x),this.attr("y",e.y),this.invalidate()},optionsChange:function(e){"font"===e.field?(this.attr("style",g.renderStyle(this.mapStyle())),this.geometryChange()):"content"===e.field&&O.fn.content.call(this,this.srcElement.content()),O.fn.optionsChange.call(this,e)},mapStyle:function(){var e=O.fn.mapStyle.call(this),t=this.srcElement.options.font,n=this.root().options;return n&&n.encodeText&&(t=d.htmlEncode(t)),e.push(["font",t]),e},pos:function(){var e=this.srcElement.position(),t=this.srcElement.measure();return e.clone().setY(e.y+t.baseline)},content:function(){var e=this.srcElement.content(),t=this.root().options;return t&&t.encodeText&&(e=s(e),e=d.htmlEncode(e)),e},template:w("<text #= d.renderStyle() # #= d.renderOpacity() # x='#= this.pos().x #' y='#= this.pos().y #' #= d.renderStroke() # #= d.renderTransform() # #= d.renderDefinitions() # #= d.renderFill() #><tspan>#= d.content() #</tspan></text>")}),W=O.extend({geometryChange:function(){this.allAttr(this.mapPosition()),this.invalidate()},optionsChange:function(e){"src"===e.field&&this.allAttr(this.mapSource()),O.fn.optionsChange.call(this,e)},mapPosition:function(){var e=this.srcElement.rect(),t=e.topLeft();return[["x",t.x],["y",t.y],["width",e.width()+"px"],["height",e.height()+"px"]]},renderPosition:function(){return y(this.mapPosition())},mapSource:function(){return[["xlink:href",this.srcElement.src()]]},renderSource:function(){return y(this.mapSource())},template:w("<image preserveAspectRatio='none' #= d.renderStyle() # #= d.renderTransform()# #= d.renderOpacity() # #= d.renderPosition() # #= d.renderSource() # #= d.renderDefinitions()#></image>")}),j=z.extend({template:w("<stop #=d.renderOffset()# #=d.renderStyle()# />"),renderOffset:function(){return _("offset",this.srcElement.offset())},mapStyle:function(){var e=this.srcElement;return[["stop-color",e.color()],["stop-opacity",e.opacity()]]},optionsChange:function(e){"offset"==e.field?this.attr(e.field,e.value):("color"==e.field||"opacity"==e.field)&&this.css("stop-"+e.field,e.value)}}),G=z.extend({init:function(e){z.fn.init.call(this,e),this.id=e.id,this.loadStops()},loadStops:function(){var e,t,n=this.srcElement,i=n.stops,r=this.element;for(t=0;i.length>t;t++)e=new j(i[t]),this.append(e),r&&e.attachTo(r)},optionsChange:function(e){"gradient.stops"==e.field?(f.fn.clear.call(this),this.loadStops()):e.field==C&&this.allAttr(this.mapCoordinates())},renderCoordinates:function(){return y(this.mapCoordinates())},mapSpace:function(){return["gradientUnits",this.srcElement.userSpace()?"userSpaceOnUse":"objectBoundingBox"]}}),q=G.extend({template:w("<linearGradient id='#=d.id#' #=d.renderCoordinates()#>#= d.renderChildren()#</linearGradient>"),mapCoordinates:function(){var e=this.srcElement,t=e.start(),n=e.end(),i=[["x1",t.x],["y1",t.y],["x2",n.x],["y2",n.y],this.mapSpace()];return i}}),$=G.extend({template:w("<radialGradient id='#=d.id#' #=d.renderCoordinates()#>#= d.renderChildren()#</radialGradient>"),mapCoordinates:function(){var e=this.srcElement,t=e.center(),n=e.radius(),i=[["cx",t.x],["cy",t.y],["r",n],this.mapSpace()];
return i}}),Y={Group:L,Text:U,Path:O,MultiPath:N,Circle:V,Arc:H,Image:W},K=function(e,t){e.innerHTML=t};!function(){var e="<svg xmlns='"+E+"'></svg>",t=c.createElement("div"),n=typeof DOMParser!=P;t.innerHTML=e,n&&t.firstChild.namespaceURI!=E&&(K=function(e,t){var n=new DOMParser,i=n.parseFromString(t,"text/xml"),r=c.adoptNode(i.documentElement);e.innerHTML="",e.appendChild(r)})}(),s._element=document.createElement("span"),l={clip:"clip-path",fill:"fill"},d.support.svg=function(){return c.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),d.support.svg&&p.SurfaceFactory.current.register("svg",I,10),u(p,{exportSVG:o,svg:{ArcNode:H,CircleNode:V,ClipNode:B,DefinitionNode:R,GradientStopNode:j,GroupNode:L,ImageNode:W,LinearGradientNode:q,MultiPathNode:N,Node:z,PathNode:O,RadialGradientNode:$,RootNode:F,Surface:I,TextNode:U,_exportGroup:r}})}(window.kendo.jQuery),function(e){function t(t,n){var i,r,o,a,s,l,c={width:"800px",height:"600px",cors:"Anonymous"},d=t.clippedBBox();return d&&(i=d.getOrigin(),r=new w.Group,r.transform(y.transform().translate(-i.x,-i.y)),r.children.push(t),t=r,o=d.getSize(),c.width=o.width+"px",c.height=o.height+"px"),n=p(c,n),a=e("<div />").css({display:"none",width:n.width,height:n.height}).appendTo(document.body),s=new T(a,n),s.draw(t),l=s.image(),l.always(function(){s.destroy(),a.remove()}),l}function n(e,t){var n,i,r;for(r=0;t.length>r;r++)i=t[r],n=h.parseColor(i.color()),n.a*=i.opacity(),e.addColorStop(i.offset(),n.toCssRgba())}var i,r,o,a,s,l,c,d,u=document,h=window.kendo,p=h.deepExtend,f=h.util,g=f.defined,m=f.isTransparent,v=f.renderTemplate,_=f.valueOrDefault,y=h.geometry,w=h.drawing,b=w.BaseNode,k="butt",x=w.DASH_ARRAYS,C=1e3/60,S="solid",T=w.Surface.extend({init:function(t,n){w.Surface.fn.init.call(this,t,n),this.element[0].innerHTML=this._template(this);var r=this.element[0].firstElementChild;r.width=e(t).width(),r.height=e(t).height(),this._rootElement=r,this._root=new i(r)},destroy:function(){w.Surface.fn.destroy.call(this),this._root&&(this._root.destroy(),this._root=null)},type:"canvas",draw:function(e){this._root.load([e],void 0,this.options.cors)},clear:function(){this._root.clear()},image:function(){var t,n=this._root,i=this._rootElement,r=[];return n.traverse(function(e){e.loading&&r.push(e.loading)}),t=e.Deferred(),e.when.apply(e,r).done(function(){n._invalidate();try{var e=i.toDataURL();t.resolve(e)}catch(r){t.reject(r)}}).fail(function(e){t.reject(e)}),t.promise()},_resize:function(){this._rootElement.width=this._size.width,this._rootElement.height=this._size.height,this._root.invalidate()},_template:v("<canvas style='width: 100%; height: 100%;'></canvas>")}),D=b.extend({init:function(e){b.fn.init.call(this,e),e&&this.initClip()},initClip:function(){var e=this.srcElement.clip();e&&(this.clip=e,e.addObserver(this))},clear:function(){this.srcElement&&this.srcElement.removeObserver(this),this.clearClip(),b.fn.clear.call(this)},clearClip:function(){this.clip&&(this.clip.removeObserver(this),delete this.clip)},setClip:function(e){this.clip&&(e.beginPath(),r.fn.renderPoints(e,this.clip),e.clip())},optionsChange:function(e){"clip"==e.field&&(this.clearClip(),this.initClip()),b.fn.optionsChange.call(this,e)},setTransform:function(e){if(this.srcElement){var t=this.srcElement.transform();t&&e.transform.apply(e,t.matrix().toArray(6))}},load:function(e,t,n){var i,r,o,a,s=this;for(a=0;e.length>a;a++)r=e[a],o=r.children,i=new d[r.nodeType](r,n),o&&o.length>0&&i.load(o,t,n),g(t)?s.insertAt(i,t):s.append(i);s.invalidate()},setOpacity:function(e){if(this.srcElement){var t=this.srcElement.opacity();g(t)&&this.globalAlpha(e,t)}},globalAlpha:function(e,t){t&&e.globalAlpha&&(t*=e.globalAlpha),e.globalAlpha=t}}),A=D.extend({renderTo:function(e){var t,n=this.childNodes;for(e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e),t=0;n.length>t;t++)n[t].renderTo(e);e.restore()}});w.mixins.Traversable.extend(A.fn,"childNodes"),i=A.extend({init:function(t){A.fn.init.call(this),this.canvas=t,this.ctx=t.getContext("2d"),this.invalidate=h.throttle(e.proxy(this._invalidate,this),C)},destroy:function(){A.fn.destroy.call(this),this.canvas=null,this.ctx=null},_invalidate:function(){this.ctx&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderTo(this.ctx))}}),w.mixins.Traversable.extend(i.fn,"childNodes"),r=D.extend({renderTo:function(e){e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e),e.beginPath(),this.renderPoints(e,this.srcElement),this.setLineDash(e),this.setLineCap(e),this.setLineJoin(e),this.setFill(e),this.setStroke(e),e.restore()},setFill:function(e){var t=this.srcElement.options.fill,n=!1;return t&&("gradient"==t.nodeType?(this.setGradientFill(e,t),n=!0):m(t.color)||(e.fillStyle=t.color,e.save(),this.globalAlpha(e,t.opacity),e.fill(),e.restore(),n=!0)),n},setGradientFill:function(e,t){var i,r,o,a,s=this.srcElement.rawBBox();t instanceof w.LinearGradient?(r=t.start(),o=t.end(),i=e.createLinearGradient(r.x,r.y,o.x,o.y)):t instanceof w.RadialGradient&&(a=t.center(),i=e.createRadialGradient(a.x,a.y,0,a.x,a.y,t.radius())),n(i,t.stops),e.save(),t.userSpace()||e.transform(s.width(),0,0,s.height(),s.origin.x,s.origin.y),e.fillStyle=i,e.fill(),e.restore()},setStroke:function(e){var t=this.srcElement.options.stroke;return t&&!m(t.color)?(e.strokeStyle=t.color,e.lineWidth=_(t.width,1),e.save(),this.globalAlpha(e,t.opacity),e.stroke(),e.restore(),!0):void 0},dashType:function(){var e=this.srcElement.options.stroke;return e&&e.dashType?e.dashType.toLowerCase():void 0},setLineDash:function(e){var t,n=this.dashType();n&&n!=S&&(t=x[n],e.setLineDash?e.setLineDash(t):(e.mozDash=t,e.webkitLineDash=t))},setLineCap:function(e){var t=this.dashType(),n=this.srcElement.options.stroke;t&&t!==S?e.lineCap=k:n&&n.lineCap&&(e.lineCap=n.lineCap)},setLineJoin:function(e){var t=this.srcElement.options.stroke;t&&t.lineJoin&&(e.lineJoin=t.lineJoin)},renderPoints:function(e,t){var n,i,r,o,a,s,l=t.segments;if(0!==l.length){for(n=l[0],i=n.anchor(),e.moveTo(i.x,i.y),r=1;l.length>r;r++)n=l[r],i=n.anchor(),o=l[r-1],a=o.controlOut(),s=n.controlIn(),a&&s?e.bezierCurveTo(a.x,a.y,s.x,s.y,i.x,i.y):e.lineTo(i.x,i.y);t.options.closed&&e.closePath()}}}),o=r.extend({renderPoints:function(e){var t,n=this.srcElement.paths;for(t=0;n.length>t;t++)r.fn.renderPoints(e,n[t])}}),a=r.extend({renderPoints:function(e){var t=this.srcElement.geometry(),n=t.center,i=t.radius;e.arc(n.x,n.y,i,0,2*Math.PI)}}),s=r.extend({renderPoints:function(e){var t=this.srcElement.toPath();r.fn.renderPoints.call(this,e,t)}}),l=r.extend({renderTo:function(e){var t=this.srcElement,n=t.position(),i=t.measure();e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e),e.beginPath(),e.font=t.options.font,this.setFill(e)&&e.fillText(t.content(),n.x,n.y+i.baseline),this.setStroke(e)&&(this.setLineDash(e),e.strokeText(t.content(),n.x,n.y+i.baseline)),e.restore()}}),c=r.extend({init:function(t,n){var i,o;r.fn.init.call(this,t),this.onLoad=e.proxy(this.onLoad,this),this.onError=e.proxy(this.onError,this),i=this.img=new Image,n&&(i.crossOrigin=n),i.onload=this.onLoad,i.onerror=this.onError,o=i.src=t.src(),(i.complete||void 0===i.complete)&&(i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",i.src=o),this.loading=e.Deferred()},renderTo:function(e){"resolved"===this.loading.state()&&(e.save(),this.setTransform(e),this.setClip(e),this.drawImage(e),e.restore())},optionsChange:function(t){"src"===t.field?(this.loading=e.Deferred(),this.img.src=this.srcElement.src()):r.fn.optionsChange.call(this,t)},onLoad:function(){this.loading.resolve(),this.invalidate()},onError:function(){this.loading.reject(Error("Unable to load image '"+this.img.src+"'. Check for connectivity and verify CORS headers."))},drawImage:function(e){var t=this.srcElement.rect(),n=t.topLeft();e.drawImage(this.img,n.x,n.y,t.width(),t.height())}}),d={Group:A,Text:l,Path:r,MultiPath:o,Circle:a,Arc:s,Image:c},h.support.canvas=function(){return!!u.createElement("canvas").getContext}(),h.support.canvas&&w.SurfaceFactory.current.register("canvas",T,20),p(h.drawing,{exportImage:t,canvas:{ArcNode:s,CircleNode:a,GroupNode:A,ImageNode:c,MultiPathNode:o,Node:D,PathNode:r,RootNode:i,Surface:T,TextNode:l}})}(window.kendo.jQuery),function(e){function t(){if(u.namespaces&&!u.namespaces.kvml){u.namespaces.add("kvml","urn:schemas-microsoft-com:vml");var e=u.styleSheets.length>30?u.styleSheets[0]:u.createStyleSheet();e.addRule(".kvml","behavior:url(#default#VML)")}}function n(e){var t=u.createElement("kvml:"+e);return t.className="kvml",t}function i(e){var t,n=e.length,i=[];for(t=0;n>t;t++)i.push(e[t].scaleCopy(P).toString(0,","));return i.join(" ")}function r(e,t){var n,r,a,s,l,c=e.segments,d=c.length;if(d>0){for(n=[],l=1;d>l;l++)a=o(c[l-1],c[l]),a!==s&&(s=a,n.push(a)),n.push("l"===a?i([c[l].anchor()]):i([c[l-1].controlOut(),c[l].controlIn(),c[l].anchor()]));return r="m "+i([c[0].anchor()])+" "+n.join(" "),e.options.closed&&(r+=" x"),t!==!0&&(r+=" e"),r}}function o(e,t){return e.controlOut()&&t.controlIn()?"c":"l"}function a(e){return 0===e.indexOf("fill")||0===e.indexOf(z)}function s(e,t){var n;return n=e?l(e,t.color(),t.opacity()):l(t.color(),"#fff",1-t.opacity())}function l(e,t,n){var i=new k(e),r=new k(t),o=c(i.r,r.r,n),a=c(i.g,r.g,n),s=c(i.b,r.b,n);return new k(o,a,s).toHex()}function c(e,t,n){return h.round(n*t+(1-n)*e)}var d,u=document,h=Math,p=h.atan2,f=h.sqrt,g=window.kendo,m=g.deepExtend,v=e.noop,_=g.drawing,y=_.BaseNode,w=g.geometry,b=w.toMatrix,k=g.Color,x=g.util,C=x.isTransparent,S=x.defined,T=x.deg,D=x.round,A=x.valueOrDefault,E="none",M=".kendo",P=100,I=P*P,z="gradient",F=4,R=_.Surface.extend({init:function(e,n){_.Surface.fn.init.call(this,e,n),t(),this.element.empty(),this._root=new L,this._root.attachTo(this.element[0]),this.element.on("click"+M,this._click),this.element.on("mouseover"+M,this._mouseenter),this.element.on("mouseout"+M,this._mouseleave)},type:"vml",destroy:function(){this._root&&(this._root.destroy(),this._root=null,this.element.off(M)),_.Surface.fn.destroy.call(this)},draw:function(e){this._root.load([e],void 0,null)},clear:function(){this._root.clear()}}),B=y.extend({init:function(e){y.fn.init.call(this,e),this.createElement(),this.attachReference()},observe:v,destroy:function(){this.element&&(this.element._kendoNode=null,this.element=null),y.fn.destroy.call(this)},clear:function(){var e,t;for(this.element&&(this.element.innerHTML=""),e=this.childNodes,t=0;e.length>t;t++)e[t].destroy();this.childNodes=[]},removeSelf:function(){this.element&&(this.element.parentNode.removeChild(this.element),this.element=null),y.fn.removeSelf.call(this)},createElement:function(){this.element=u.createElement("div")},attachReference:function(){this.element._kendoNode=this},load:function(e,t,n,i){var r,o,a,s,l,c;for(i=A(i,1),this.srcElement&&(i*=A(this.srcElement.options.opacity,1)),r=0;e.length>r;r++)o=e[r],a=o.children,s=o.currentTransform(n),l=i*A(o.options.opacity,1),c=new ot[o.nodeType](o,s,l),a&&a.length>0&&c.load(a,t,s,i),S(t)?this.insertAt(c,t):this.append(c),c.attachTo(this.element,t)},attachTo:function(e,t){S(t)?e.insertBefore(this.element,e.children[t]||null):e.appendChild(this.element)},optionsChange:function(e){"visible"==e.field&&this.css("display",e.value!==!1?"":E)},setStyle:function(){this.allCss(this.mapStyle())},mapStyle:function(){var e=[];return this.srcElement&&this.srcElement.options.visible===!1&&e.push(["display",E]),e},mapOpacityTo:function(e,t){var n=A(this.opacity,1);n*=A(t,1),e.push(["opacity",n])},attr:function(e,t){this.element&&(this.element[e]=t)},allAttr:function(e){for(var t=0;e.length>t;t++)this.attr(e[t][0],e[t][1])},css:function(e,t){this.element&&(this.element.style[e]=t)},allCss:function(e){for(var t=0;e.length>t;t++)this.css(e[t][0],e[t][1])}}),L=B.extend({createElement:function(){B.fn.createElement.call(this),this.allCss([["width","100%"],["height","100%"],["position","relative"],["visibility","visible"]])},attachReference:v}),O=g.Class.extend({init:function(e,t){this.srcElement=e,this.observer=t,e.addObserver(this)},geometryChange:function(){this.observer.optionsChange({field:"clip",value:this.srcElement})},clear:function(){this.srcElement.removeObserver(this)}}),H=B.extend({init:function(e){B.fn.init.call(this,e),e&&this.initClip()},observe:function(){y.fn.observe.call(this)},mapStyle:function(){var e=B.fn.mapStyle.call(this);return this.srcElement&&this.srcElement.clip()&&e.push(["clip",this.clipRect()]),e},optionsChange:function(e){"clip"==e.field&&(this.clearClip(),this.initClip(),this.setClip()),B.fn.optionsChange.call(this,e)},clear:function(){this.clearClip(),B.fn.clear.call(this)},initClip:function(){this.srcElement.clip()&&(this.clip=new O(this.srcElement.clip(),this),this.clip.observer=this)},clearClip:function(){this.clip&&(this.clip.clear(),this.clip=null,this.css("clip",this.clipRect()))},setClip:function(){this.clip&&this.css("clip",this.clipRect())},clipRect:function(){var e,t,n,i=d,r=this.srcElement.clip();return r&&(e=this.clipBBox(r),t=e.topLeft(),n=e.bottomRight(),i=g.format("rect({0}px {1}px {2}px {3}px)",t.y,n.x,n.y,t.x)),i},clipBBox:function(e){var t=this.srcElement.rawBBox().topLeft(),n=e.rawBBox();return n.origin.translate(-t.x,-t.y),n}}),N=H.extend({createElement:function(){B.fn.createElement.call(this),this.setStyle()},attachTo:function(e,t){this.css("display",E),B.fn.attachTo.call(this,e,t),this.srcElement.options.visible!==!1&&this.css("display","")},_attachTo:function(e){var t=document.createDocumentFragment();t.appendChild(this.element),e.appendChild(t)},mapStyle:function(){var e=H.fn.mapStyle.call(this);return e.push(["position","absolute"]),e.push(["white-space","nowrap"]),e},optionsChange:function(e){"transform"===e.field&&this.refreshTransform(),"opacity"===e.field&&this.refreshOpacity(),H.fn.optionsChange.call(this,e)},refreshTransform:function(e){var t,n=this.srcElement.currentTransform(e),i=this.childNodes,r=i.length;for(this.setClip(),t=0;r>t;t++)i[t].refreshTransform(n)},currentOpacity:function(){var e=A(this.srcElement.options.opacity,1);return this.parent&&this.parent.currentOpacity&&(e*=this.parent.currentOpacity()),e},refreshOpacity:function(){var e,t=this.childNodes,n=t.length,i=this.currentOpacity();for(e=0;n>e;e++)t[e].refreshOpacity(i)},initClip:function(){if(H.fn.initClip.call(this),this.clip){var e=this.clip.srcElement.bbox(this.srcElement.currentTransform());e&&(this.css("width",e.width()+e.origin.x),this.css("height",e.height()+e.origin.y))}},clipBBox:function(e){return e.bbox(this.srcElement.currentTransform())},clearClip:function(){H.fn.clearClip.call(this)}}),V=B.extend({init:function(e,t){this.opacity=t,B.fn.init.call(this,e)},createElement:function(){this.element=n("stroke"),this.setOpacity()},optionsChange:function(e){0===e.field.indexOf("stroke")&&this.setStroke()},refreshOpacity:function(e){this.opacity=e,this.setStroke()},setStroke:function(){this.allAttr(this.mapStroke())},setOpacity:function(){this.setStroke()},mapStroke:function(){var e,t=this.srcElement.options.stroke,n=[];return t&&!C(t.color)&&0!==t.width?(n.push(["on","true"]),n.push(["color",t.color]),n.push(["weight",(t.width||1)+"px"]),this.mapOpacityTo(n,t.opacity),S(t.dashType)&&n.push(["dashstyle",t.dashType]),S(t.lineJoin)&&n.push(["joinstyle",t.lineJoin]),S(t.lineCap)&&(e=t.lineCap.toLowerCase(),"butt"===e&&(e="butt"===e?"flat":e),n.push(["endcap",e]))):n.push(["on","false"]),n}}),U=B.extend({init:function(e,t,n){this.opacity=n,B.fn.init.call(this,e)},createElement:function(){this.element=n("fill"),this.setFill()},optionsChange:function(e){a(e.field)&&this.setFill()},refreshOpacity:function(e){this.opacity=e,this.setOpacity()},setFill:function(){this.allAttr(this.mapFill())},setOpacity:function(){this.setFill()},attr:function(e,t){var n,i=this.element;if(i){for(n=e.split(".");n.length>1;)i=i[n.shift()];i[n[0]]=t}},mapFill:function(){var e=this.srcElement.fill(),t=[["on","false"]];return e&&(e.nodeType==z?t=this.mapGradient(e):C(e.color)||(t=this.mapFillColor(e))),t},mapFillColor:function(e){var t=[["on","true"],["color",e.color]];return this.mapOpacityTo(t,e.opacity),t},mapGradient:function(e){var t,n=this.srcElement.options,i=n.fallbackFill||e.fallbackFill&&e.fallbackFill();return t=e instanceof _.LinearGradient?this.mapLinearGradient(e):e instanceof _.RadialGradient&&e.supportVML?this.mapRadialGradient(e):i?this.mapFillColor(i):[["on","false"]]},mapLinearGradient:function(e){var t=e.start(),n=e.end(),i=x.deg(p(n.y-t.y,n.x-t.x)),r=[["on","true"],["type",z],["focus",0],["method","none"],["angle",270-i]];return this.addColors(r),r},mapRadialGradient:function(e){var t=this.srcElement.rawBBox(),n=e.center(),i=(n.x-t.origin.x)/t.width(),r=(n.y-t.origin.y)/t.height(),o=[["on","true"],["type","gradienttitle"],["focus","100%"],["focusposition",i+" "+r],["method","none"]];return this.addColors(o),o},addColors:function(e){var t,n,i=this.srcElement.options,r=[],o=i.fill.stops,a=i.baseColor,l=this.element.colors?"colors.value":"colors",c=s(a,o[0]),d=s(a,o[o.length-1]);for(n=0;o.length>n;n++)t=o[n],r.push(h.round(100*t.offset())+"% "+s(a,t));e.push([l,r.join(",")],["color",c],["color2",d])}}),W=B.extend({init:function(e,t){this.transform=t,B.fn.init.call(this,e)},createElement:function(){this.element=n("skew"),this.setTransform()},optionsChange:function(e){"transform"===e.field&&this.refresh(this.srcElement.currentTransform())},refresh:function(e){this.transform=e,this.setTransform()},transformOrigin:function(){return"-0.5,-0.5"},setTransform:function(){this.allAttr(this.mapTransform())},mapTransform:function(){var e=this.transform,t=[],n=b(e);return n?(n.round(F),t.push(["on","true"],["matrix",[n.a,n.c,n.b,n.d,0,0].join(",")],["offset",n.e+"px,"+n.f+"px"],["origin",this.transformOrigin()])):t.push(["on","false"]),t}}),j=H.extend({init:function(e,t,n){this.fill=this.createFillNode(e,t,n),this.stroke=new V(e,n),this.transform=this.createTransformNode(e,t),H.fn.init.call(this,e)},attachTo:function(e,t){this.fill.attachTo(this.element),this.stroke.attachTo(this.element),this.transform.attachTo(this.element),B.fn.attachTo.call(this,e,t)},createFillNode:function(e,t,n){return new U(e,t,n)},createTransformNode:function(e,t){return new W(e,t)},createElement:function(){this.element=n("shape"),this.setCoordsize(),this.setStyle()},optionsChange:function(e){a(e.field)?this.fill.optionsChange(e):0===e.field.indexOf("stroke")?this.stroke.optionsChange(e):"transform"===e.field?this.transform.optionsChange(e):"opacity"===e.field&&(this.fill.setOpacity(),this.stroke.setOpacity()),H.fn.optionsChange.call(this,e)},refreshTransform:function(e){this.transform.refresh(this.srcElement.currentTransform(e))},refreshOpacity:function(e){e*=A(this.srcElement.options.opacity,1),this.fill.refreshOpacity(e),this.stroke.refreshOpacity(e)},mapStyle:function(e,t){var n,i=H.fn.mapStyle.call(this);return e&&t||(e=t=P),i.push(["position","absolute"],["width",e+"px"],["height",t+"px"]),n=this.srcElement.options.cursor,n&&i.push(["cursor",n]),i},setCoordsize:function(){this.allAttr([["coordorigin","0 0"],["coordsize",I+" "+I]])}}),G=B.extend({createElement:function(){this.element=n("path"),this.setPathData()},geometryChange:function(){this.setPathData()},setPathData:function(){this.attr("v",this.renderData())},renderData:function(){return r(this.srcElement)}}),q=j.extend({init:function(e,t,n){this.pathData=this.createDataNode(e),j.fn.init.call(this,e,t,n)},attachTo:function(e,t){this.pathData.attachTo(this.element),j.fn.attachTo.call(this,e,t)},createDataNode:function(e){return new G(e)},geometryChange:function(){this.pathData.geometryChange(),j.fn.geometryChange.call(this)}}),$=G.extend({renderData:function(){var e,t,n,i=this.srcElement.paths;if(i.length>0){for(e=[],t=0;i.length>t;t++)n=i.length-1>t,e.push(r(i[t],n));return e.join(" ")}}}),Y=q.extend({createDataNode:function(e){return new $(e)}}),K=W.extend({transformOrigin:function(){var e=this.srcElement.geometry().bbox(),t=e.center(),n=-t.x/e.width(),i=-t.y/e.height();return n+","+i}}),Q=j.extend({createElement:function(){this.element=n("oval"),this.setStyle()},createTransformNode:function(e,t){return new K(e,t)},geometryChange:function(){j.fn.geometryChange.call(this),this.setStyle(),this.refreshTransform()},mapStyle:function(){var e=this.srcElement.geometry(),t=e.radius,n=e.center,i=2*t,r=j.fn.mapStyle.call(this,i,i);return r.push(["left",n.x-t+"px"],["top",n.y-t+"px"]),r}}),X=G.extend({renderData:function(){return r(this.srcElement.toPath())}}),J=q.extend({createDataNode:function(e){return new X(e)}}),Z=G.extend({createElement:function(){G.fn.createElement.call(this),this.attr("textpathok",!0)},renderData:function(){var e=this.srcElement.rect(),t=e.center();return"m "+i([new w.Point(e.topLeft().x,t.y)])+" l "+i([new w.Point(e.bottomRight().x,t.y)])}}),et=B.extend({createElement:function(){this.element=n("textpath"),this.attr("on",!0),this.attr("fitpath",!1),this.setStyle(),this.setString()},optionsChange:function(e){"content"===e.field?this.setString():this.setStyle(),B.fn.optionsChange.call(this,e)},mapStyle:function(){return[["font",this.srcElement.options.font]]},setString:function(){this.attr("string",this.srcElement.content())}}),tt=q.extend({init:function(e,t,n){this.path=new et(e),q.fn.init.call(this,e,t,n)},createDataNode:function(e){return new Z(e)},attachTo:function(e,t){this.path.attachTo(this.element),q.fn.attachTo.call(this,e,t)},optionsChange:function(e){("font"===e.field||"content"===e.field)&&(this.path.optionsChange(e),this.pathData.geometryChange(e)),q.fn.optionsChange.call(this,e)}}),nt=G.extend({renderData:function(){var e=this.srcElement.rect(),t=(new _.Path).moveTo(e.topLeft()).lineTo(e.topRight()).lineTo(e.bottomRight()).lineTo(e.bottomLeft()).close();return r(t)}}),it=W.extend({init:function(e,t,n){this.opacity=n,W.fn.init.call(this,e,t)},createElement:function(){this.element=n("fill"),this.attr("type","frame"),this.attr("rotate",!0),this.setOpacity(),this.setSrc(),this.setTransform()},optionsChange:function(e){"src"===e.field&&this.setSrc(),W.fn.optionsChange.call(this,e)},geometryChange:function(){this.refresh()},refreshOpacity:function(e){this.opacity=e,this.setOpacity()},setOpacity:function(){var e=[];this.mapOpacityTo(e,this.srcElement.options.opacity),this.allAttr(e)},setSrc:function(){this.attr("src",this.srcElement.src())},mapTransform:function(){var e,t,n,i,r,o,a,s,l=this.srcElement,c=l.rawBBox(),d=c.center(),u=P/2,h=P,g=c.width()/h,m=c.height()/h,v=0,_=this.transform;return _?(n=b(_),i=f(n.a*n.a+n.b*n.b),r=f(n.c*n.c+n.d*n.d),g*=i,m*=r,o=T(p(n.b,n.d)),a=T(p(-n.c,n.a)),v=(o+a)/2,0!==v?(s=l.bbox().center(),e=(s.x-u)/h,t=(s.y-u)/h):(e=(d.x*i+n.e-u)/h,t=(d.y*r+n.f-u)/h)):(e=(d.x-u)/h,t=(d.y-u)/h),g=D(g,F),m=D(m,F),e=D(e,F),t=D(t,F),v=D(v,F),[["size",g+","+m],["position",e+","+t],["angle",v]]}}),rt=q.extend({createFillNode:function(e,t,n){return new it(e,t,n)},createDataNode:function(e){return new nt(e)},optionsChange:function(e){("src"===e.field||"transform"===e.field)&&this.fill.optionsChange(e),q.fn.optionsChange.call(this,e)},geometryChange:function(){this.fill.geometryChange(),q.fn.geometryChange.call(this)},refreshTransform:function(e){q.fn.refreshTransform.call(this,e),this.fill.refresh(this.srcElement.currentTransform(e))}}),ot={Group:N,Text:tt,Path:q,MultiPath:Y,Circle:Q,Arc:J,Image:rt};g.support.vml=function(){var e=g.support.browser;return e.msie&&9>e.version}(),d="inherit",g.support.browser.msie&&8>g.support.browser.version&&(d="rect(auto auto auto auto)"),g.support.vml&&_.SurfaceFactory.current.register("vml",R,30),m(_,{vml:{ArcDataNode:X,ArcNode:J,CircleTransformNode:K,CircleNode:Q,FillNode:U,GroupNode:N,ImageNode:rt,ImageFillNode:it,ImagePathDataNode:nt,MultiPathDataNode:$,MultiPathNode:Y,Node:B,PathDataNode:G,PathNode:q,RootNode:L,StrokeNode:V,Surface:R,TextNode:tt,TextPathNode:et,TextPathDataNode:Z,TransformNode:W}})}(window.kendo.jQuery),function(e,t,n){"use strict";function i(){function e(){var t,r,o;for(t=0;arguments.length>t;++t){if(r=arguments[t],r===n)throw Error("Cannot output undefined to PDF");if(r instanceof w)r.beforeRender(e),r.render(e);else if(F(r))f(r,e);else if(p(r))g(r,e);else if("number"==typeof r){if(isNaN(r))throw Error("Cannot output NaN to PDF");o=r.toFixed(7),o.indexOf(".")>=0&&(o=o.replace(/\.?0+$/,"")),"-0"==o&&(o="0"),i.writeString(o)}else/string|boolean/.test(typeof r)?i.writeString(r+""):"function"==typeof r.get?i.write(r.get()):"object"==typeof r&&(r?e(new H(r)):i.writeString("null"))}}var t=0,i=D();return e.writeData=function(e){i.write(e)},e.withIndent=function(n){++t,n(e),--t},e.indent=function(){e(Q,d("",2*t,"  ")),e.apply(null,arguments)},e.offset=function(){return i.offset()},e.toString=function(){throw Error("FIX CALLER")},e.get=function(){return i.get()},e.stream=function(){return i},e}function r(e,t){var n=e.beforeRender,i=e.render;e.beforeRender=function(){},e.render=function(e){e(t," 0 R")},e.renderFull=function(r){e._offset=r.offset(),r(t," 0 obj "),n.call(e,r),i.call(e,r),r(" endobj")}}function o(e){function t(t,n){return e&&null!=e[t]?e[t]:n}var n,o,a,s,l,c,d=this,h=i(),p=0,f=[];if(d.getOption=t,d.attach=function(e){return f.indexOf(e)<0&&(r(e,++p),f.push(e)),e},d.FONTS={},d.IMAGES={},n=t("paperSize",Z.a4),"string"==typeof n&&(n=Z[n.toLowerCase()],null==n))throw Error("Unknown paper size");n[0]=y(n[0]),n[1]=y(n[1]),t("landscape",!1)&&(n=[Math.max(n[0],n[1]),Math.min(n[0],n[1])]),o=t("margin"),o&&(o.left=y(o.left,0),o.top=y(o.top,0),o.right=y(o.right,0),o.bottom=y(o.bottom,0),t("addMargin")&&(n[0]+=o.left+o.right,n[1]+=o.top+o.bottom)),a=n[0],s=n[1],o&&(a-=o.left+o.right,s-=o.top+o.bottom),l=d.attach(new V),c=d.attach(new U([0,0,n[0],n[1]])),l.setPages(c),d.addPage=function(){var e=new N(i(),null,!0),t=new q(d,{Contents:d.attach(e),Parent:c});return t._content=e,c.addPage(d.attach(t)),t.transform(1,0,0,-1,0,n[1]),o&&(t.translate(o.left,o.top),t.rect(0,0,a,s),t.clip()),t},d.render=function(){var e,n;for(h("%PDF-1.4",Q,"%ÂÁÚÏÎ",Q,Q),e=0;f.length>e;++e)f[e].renderFull(h),h(Q,Q);for(n=h.offset(),h("xref",Q,0," ",f.length+1,Q),h("0000000000 65535 f ",Q),e=0;f.length>e;++e)h(u(f[e]._offset,10)," 00000 n ",Q);return h(Q),h("trailer",Q),h(new H({Size:f.length+1,Root:l,Info:new H({Producer:new R("Kendo UI PDF Generator"),Title:new R(t("title","")),Author:new R(t("author","")),Subject:new R(t("subject","")),Keywords:new R(t("keywords","")),Creator:new R(t("creator","Kendo UI PDF Generator")),CreationDate:t("date",new Date)})}),Q,Q),h("startxref",Q,n,Q),h("%%EOF",Q),h.stream().offset(0)}}function a(t,n){function i(){e.console&&(e.console.error?e.console.error("Cannot load URL: %s",t):e.console.log("Cannot load URL: %s",t)),n(null)}var r=new XMLHttpRequest;r.open("GET",t,!0),K&&(r.responseType="arraybuffer"),r.onload=function(){200==r.status||304==r.status?n(K?new Uint8Array(r.response):new VBArray(r.responseBody).toArray()):i()},r.onerror=i,r.send(null)}function s(e,t){var n=et[e];n?t(n):a(e,function(n){if(null==n)throw Error("Cannot load font from "+e);var i=new Y.pdf.TTFFont(n);et[e]=i,t(i)})}function l(e,t){var i=tt[e];i?t(i):(i=new Image,i.onload=function(){var n,r,o,a,s,l,c,d,u,h,p=document.createElement("canvas");p.width=i.width,p.height=i.height,n=p.getContext("2d"),n.drawImage(i,0,0);try{r=n.getImageData(0,0,i.width,i.height)}catch(f){return t(tt[e]="TAINTED")}for(o=!1,a=D(),s=D(),l=r.data,c=0;l.length>c;)a.writeByte(l[c++]),a.writeByte(l[c++]),a.writeByte(l[c++]),d=l[c++],255>d&&(o=!0),s.writeByte(d);o?i=new C(i.width,i.height,a,s):(u=p.toDataURL("image/jpeg"),u=u.substr(u.indexOf(";base64,")+8),h=D(),h.writeBase64(u),h.offset(0),i=new x(i.width,i.height,h)),t(tt[e]=i)},i.onerror=function(){t(tt[e]="TAINTED")},i.crossOrigin="Anonymous",i.src=e,(i.complete||i.complete===n)&&(i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",i.src=e))}function c(e){return function(t,n){var i=t.length,r=i;if(0===i)return n();for(;r-->0;)e(t[r],function(){0===--i&&n()})}}function d(e,t,n){for(;t>e.length;)e=n+e;return e}function u(e,t){return d(e+"",t,"0")}function h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function p(e){return e instanceof Date}function f(e,t){t("["),e.length>0&&t.withIndent(function(){for(var n=0;e.length>n;++n)n>0&&n%8===0?t.indent(e[n]):t(" ",e[n])}),t(" ]")}function g(e,t){t("(D:",u(e.getUTCFullYear(),4),u(e.getUTCMonth()+1,2),u(e.getUTCDate(),2),u(e.getUTCHours(),2),u(e.getUTCMinutes(),2),u(e.getUTCSeconds(),2),"Z)")}function m(e){return e*(72/25.4)}function v(e){return m(10*e)}function _(e){return 72*e}function y(e,n){var i,r;if("number"==typeof e)return e;if("string"==typeof e&&(i=/^\s*([0-9.]+)\s*(mm|cm|in|pt)\s*$/.exec(e),i&&(r=t(i[1]),!isNaN(r))))return"pt"==i[2]?r:{mm:m,cm:v,"in":_}[i[2]](r);if(null!=n)return n;throw Error("Can't parse unit: "+e)}function w(){}function b(e,t,n){n||(n=w),e.prototype=new n;for(var i in t)h(t,i)&&(e.prototype[i]=t[i]);return e}function k(e){return h(O,e)?O[e]:O[e]=new L(e)}function x(e,t,n){this.asStream=function(){var i=new N(n,{Type:k("XObject"),Subtype:k("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:k("DeviceRGB"),Filter:k("DCTDecode")});return i._resourceName=k("I"+ ++X),i}}function C(e,t,n,i){this.asStream=function(r){var o=new N(i,{Type:k("XObject"),Subtype:k("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:k("DeviceGray")},!0),a=new N(n,{Type:k("XObject"),Subtype:k("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:k("DeviceRGB"),SMask:r.attach(o)},!0);return a._resourceName=k("I"+ ++X),a}}function S(e){function t(e){return 1==e.length?e[0]:{FunctionType:3,Functions:e,Domain:[0,1],Bounds:d,Encode:u}}var n,i,r,o,a,s=!1,l=[],c=[],d=[],u=[];for(n=1;e.length>n;++n)i=e[n-1],r=e[n],o=i.color,a=r.color,c.push({FunctionType:2,Domain:[0,1],Range:[0,1,0,1,0,1],N:1,C0:[o.r,o.g,o.b],C1:[a.r,a.g,a.b]}),l.push({FunctionType:2,Domain:[0,1],Range:[0,1],N:1,C0:[o.a],C1:[a.a]}),(1>o.a||1>a.a)&&(s=!0),d.push(r.offset),u.push(0,1);return d.pop(),{hasAlpha:s,colors:t(c),opacities:s?t(l):null}}function T(e,t,n){var i="radial"==t.type,r=S(t.stops),o=i?[t.start.x,t.start.y,t.start.r,t.end.x,t.end.y,t.end.r]:[t.start.x,t.start.y,t.end.x,t.end.y],a={Type:k("Shading"),ShadingType:i?3:2,ColorSpace:k("DeviceRGB"),Coords:o,Domain:[0,1],Function:r.colors,Extend:[!0,!0]},s=r.hasAlpha?{Type:k("ExtGState"),AIS:!1,CA:1,ca:1,SMask:{Type:k("Mask"),S:k("Luminosity"),G:e.attach(new N("/a0 gs /s0 sh",{Type:k("XObject"),Subtype:k("Form"),FormType:1,BBox:t.userSpace?[n.left,n.top+n.height,n.left+n.width,n.top]:[0,1,1,0],Group:{Type:k("Group"),S:k("Transparency"),CS:k("DeviceGray"),I:!0},Resources:{ExtGState:{a0:{CA:1,ca:1}},Shading:{s0:{ColorSpace:k("DeviceGray"),Coords:o,Domain:[0,1],ShadingType:i?3:2,Function:r.opacities,Extend:[!0,!0]}}}}))}}:null;return{hasAlpha:r.hasAlpha,shading:new H(a),opacity:new H(s)}}function D(e){function t(){return S>=T}function n(){return T>S?e[S++]:0}function i(t){w(S),e[S++]=255&t,S>T&&(T=S)}function r(){return n()<<8|n()}function o(e){i(e>>8),i(e)}function a(){var e=r();return e>=32768?e-65536:e}function s(e){o(0>e?e+65536:e)}function l(){return 65536*r()+r()}function c(e){o(e>>>16&65535),o(65535&e)}function d(){var e=l();return e>=2147483648?e-4294967296:e}function u(e){c(0>e?e+4294967296:e)}function h(){return l()/65536}function p(e){c(Math.round(65536*e))}function f(){return d()/65536}function g(e){u(Math.round(65536*e))}function m(e){return y(e,n)}function v(e){return String.fromCharCode.apply(String,m(e))}function _(e){for(var t=0;e.length>t;++t)i(e.charCodeAt(t))}function y(e,t){for(var n=Array(e),i=0;e>i;++i)n[i]=t();return n}var w,b,k,x,C,S=0,T=0;return null==e?e=K?new Uint8Array(256):[]:T=e.length,w=K?function(t){if(t>=e.length){var n=new Uint8Array(Math.max(t+256,2*e.length));n.set(e,0),e=n}}:function(){},b=K?function(){return new Uint8Array(e.buffer,0,T)}:function(){return e},k=K?function(t){if("string"==typeof t)return _(t);var n=t.length;w(S+n),e.set(t,S),S+=n,S>T&&(T=S)}:function(e){if("string"==typeof e)return _(e);
for(var t=0;e.length>t;++t)i(e[t])},x=K?function(t,n){if(e.buffer.slice)return new Uint8Array(e.buffer.slice(t,t+n));var i=new Uint8Array(n);return i.set(new Uint8Array(e.buffer,t,n)),i}:function(t,n){return e.slice(t,t+n)},C={eof:t,readByte:n,writeByte:i,readShort:r,writeShort:o,readLong:l,writeLong:c,readFixed:h,writeFixed:p,readShort_:a,writeShort_:s,readLong_:d,writeLong_:u,readFixed_:f,writeFixed_:g,read:m,write:k,readString:v,writeString:_,times:y,get:b,slice:x,offset:function(e){return null!=e?(S=e,C):S},skip:function(e){S+=e},toString:function(){throw Error("FIX CALLER.  BinaryStream is no longer convertible to string!")},length:function(){return T},saveExcursion:function(e){var t=S;try{return e()}finally{S=t}},writeBase64:function(e){window.atob?_(window.atob(e)):k(J.decode(e))},base64:function(){return J.encode(b())}}}function A(e){return e.replace(/^\s*(['"])(.*)\1\s*$/,"$2")}function E(e){var t,n=/^\s*((normal|italic)\s+)?((normal|small-caps)\s+)?((normal|bold|\d+)\s+)?(([0-9.]+)(px|pt))(\/(([0-9.]+)(px|pt)|normal))?\s+(.*?)\s*$/i,i=n.exec(e);return i?(t=i[8]?parseInt(i[8],10):12,{italic:i[2]&&"italic"==i[2].toLowerCase(),variant:i[4],bold:i[6]&&/bold|700/i.test(i[6]),fontSize:t,lineHeight:i[12]?"normal"==i[12]?t:parseInt(i[12],10):null,fontFamily:i[14].split(/\s*,\s*/g).map(A)}):{fontSize:12,fontFamily:"sans-serif"}}function M(e){function t(t){return e.bold&&(t+="|bold"),e.italic&&(t+="|italic"),t.toLowerCase()}var n,i,r,o=e.fontFamily;if(o instanceof Array){for(r=0;o.length>r;++r)if(n=t(o[r]),i=$[n])return i}else i=$[o.toLowerCase()];return i||(i="Times-Roman"),i}function P(e,t){if(1==arguments.length)for(var n in e)P(n,e[n]);else e=e.toLowerCase(),$[e]=t}function I(e,t){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=t[0],c=t[1],d=t[2],u=t[3],h=t[4],p=t[5];return[n*l+i*d,n*c+i*u,r*l+o*d,r*c+o*u,a*l+s*d+h,a*c+s*u+p]}function z(e){return 1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&0===e[4]&&0===e[5]}var F,R,B,L,O,H,N,V,U,W,j,G,q,$,Y=e.kendo,K=!!e.Uint8Array,Q="\n",X=0,J=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{decode:function(t){for(var n,i,r,o,a,s,l,c=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),d=0,u=c.length,h=[];u>d;)n=e.indexOf(c.charAt(d++)),i=e.indexOf(c.charAt(d++)),r=e.indexOf(c.charAt(d++)),o=e.indexOf(c.charAt(d++)),a=n<<2|i>>>4,s=(15&i)<<4|r>>>2,l=(3&r)<<6|o,h.push(a),64!=r&&h.push(s),64!=o&&h.push(l);return h},encode:function(t){for(var n,i,r,o,a,s,l,c=0,d=t.length,u="";d>c;)n=t[c++],i=t[c++],r=t[c++],o=n>>>2,a=(3&n)<<4|i>>>4,s=(15&i)<<2|r>>>6,l=63&r,c-d==2?s=l=64:c-d==1&&(l=64),u+=e.charAt(o)+e.charAt(a)+e.charAt(s)+e.charAt(l);return u}}}(),Z={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],executive:[521.86,756],folio:[612,936],legal:[612,1008],letter:[612,792],tabloid:[792,1224]},et={"Times-Roman":!0,"Times-Bold":!0,"Times-Italic":!0,"Times-BoldItalic":!0,Helvetica:!0,"Helvetica-Bold":!0,"Helvetica-Oblique":!0,"Helvetica-BoldOblique":!0,Courier:!0,"Courier-Bold":!0,"Courier-Oblique":!0,"Courier-BoldOblique":!0,Symbol:!0,ZapfDingbats:!0},tt={},nt=c(s),it=c(l);o.prototype={loadFonts:nt,loadImages:it,getFont:function(e){var t=this.FONTS[e];if(!t){if(t=et[e],!t)throw Error("Font "+e+" has not been loaded");t=this.attach(t===!0?new W(e):new j(this,t)),this.FONTS[e]=t}return t},getImage:function(e){var t=this.IMAGES[e];if(!t){if(t=tt[e],!t)throw Error("Image "+e+" has not been loaded");if("TAINTED"===t)return null;t=this.IMAGES[e]=this.attach(t.asStream(this))}return t},getOpacityGS:function(e,n){var i,r,o,a=t(e).toFixed(3);return e=t(a),a+=n?"S":"F",i=this._opacityGSCache||(this._opacityGSCache={}),r=i[a],r||(o={Type:k("ExtGState")},n?o.CA=e:o.ca=e,r=this.attach(new H(o)),r._resourceName=k("GS"+ ++X),i[a]=r),r},dict:function(e){return new H(e)},name:function(e){return k(e)},stream:function(e,t){return new N(t,e)}},F=Array.isArray||function(e){return e instanceof Array},w.prototype.beforeRender=function(){},R=b(function(e){this.value=e},{render:function(e){var t,n="",i=this.escape();for(t=0;i.length>t;++t)n+=String.fromCharCode(255&i.charCodeAt(t));e("(",n,")")},escape:function(){return this.value.replace(/([\(\)\\])/g,"\\$1")},toString:function(){return this.value}}),B=b(function(e){this.value=e},{render:function(e){e("<");for(var t=0;this.value.length>t;++t)e(u(this.value.charCodeAt(t).toString(16),4));e(">")}},R),L=b(function(e){this.name=e},{render:function(e){e("/"+this.escape())},escape:function(){return this.name.replace(/[^\x21-\x7E]/g,function(e){return"#"+u(e.charCodeAt(0).toString(16),2)})},toString:function(){return this.name}}),O={},L.get=k,H=b(function(e){this.props=e},{render:function(e){var t=this.props,n=!0;e("<<"),e.withIndent(function(){for(var i in t)h(t,i)&&!/^_/.test(i)&&(n=!1,e.indent(k(i)," ",t[i]))}),n||e.indent(),e(">>")}}),N=b(function(e,t,n){if("string"==typeof e){var i=D();i.write(e),e=i}this.data=e,this.props=t||{},this.compress=n},{render:function(t){var n=this.data.get(),i=this.props;this.compress&&e.pako&&"function"==typeof e.pako.deflate&&(i.Filter?i.Filter instanceof Array||(i.Filter=[i.Filter]):i.Filter=[],i.Filter.unshift(k("FlateDecode")),n=e.pako.deflate(n)),i.Length=n.length,t(new H(i)," stream",Q),t.writeData(n),t(Q,"endstream")}}),V=b(function(e){e=this.props=e||{},e.Type=k("Catalog")},{setPages:function(e){this.props.Pages=e}},H),U=b(function(e){this.props={Type:k("Pages"),Kids:[],Count:0,MediaBox:e}},{addPage:function(e){this.props.Kids.push(e),this.props.Count++}},H),W=b(function(e){this.props={Type:k("Font"),Subtype:k("Type1"),BaseFont:k(e)},this._resourceName=k("F"+ ++X)},{encodeText:function(e){return new R(e+"")}},H),j=b(function(e,t,n){var i,r;n=this.props=n||{},n.Type=k("Font"),n.Subtype=k("Type0"),n.Encoding=k("Identity-H"),this._pdf=e,this._font=t,this._sub=t.makeSubset(),this._resourceName=k("F"+ ++X),i=t.head,this.name=t.psName,r=this.scale=t.scale,this.bbox=[i.xMin*r,i.yMin*r,i.xMax*r,i.yMax*r],this.italicAngle=t.post.italicAngle,this.ascent=t.ascent*r,this.descent=t.descent*r,this.lineGap=t.lineGap*r,this.capHeight=t.os2.capHeight||this.ascent,this.xHeight=t.os2.xHeight||0,this.stemV=0,this.familyClass=(t.os2.familyClass||0)>>8,this.isSerif=this.familyClass>=1&&7>=this.familyClass,this.isScript=10==this.familyClass,this.flags=(t.post.isFixedPitch?1:0)|(this.isSerif?2:0)|(this.isScript?8:0)|(0!==this.italicAngle?64:0)|32},{encodeText:function(e){return new B(this._sub.encodeText(e+""))},beforeRender:function(){var e,t,n,r,o=this,a=o._sub,s=a.render(),l=new N(D(s),{Length1:s.length},!0),c=o._pdf.attach(new H({Type:k("FontDescriptor"),FontName:k(o._sub.psName),FontBBox:o.bbox,Flags:o.flags,StemV:o.stemV,ItalicAngle:o.italicAngle,Ascent:o.ascent,Descent:o.descent,CapHeight:o.capHeight,XHeight:o.xHeight,FontFile2:o._pdf.attach(l)})),d=a.ncid2ogid,u=a.firstChar,h=a.lastChar,p=[];!function f(e,t){if(h>=e){var n=d[e];null==n?f(e+1):(t||p.push(e,t=[]),t.push(o._font.widthOfGlyph(n)),f(e+1,t))}}(u),e=new H({Type:k("Font"),Subtype:k("CIDFontType2"),BaseFont:k(o._sub.psName),CIDSystemInfo:new H({Registry:new R("Adobe"),Ordering:new R("Identity"),Supplement:0}),FontDescriptor:c,FirstChar:u,LastChar:h,DW:Math.round(o._font.widthOfGlyph(0)),W:p,CIDToGIDMap:o._pdf.attach(o._makeCidToGidMap())}),t=o.props,t.BaseFont=k(o._sub.psName),t.DescendantFonts=[o._pdf.attach(e)],n=new G(u,h,a.subset),r=new N(i(),null,!0),r.data(n),t.ToUnicode=o._pdf.attach(r)},_makeCidToGidMap:function(){return new N(D(this._sub.cidToGidMap()),null,!0)}},H),G=b(function(e,t,n){this.firstChar=e,this.lastChar=t,this.map=n},{render:function(e){e.indent("/CIDInit /ProcSet findresource begin"),e.indent("12 dict begin"),e.indent("begincmap"),e.indent("/CIDSystemInfo <<"),e.indent("  /Registry (Adobe)"),e.indent("  /Ordering (UCS)"),e.indent("  /Supplement 0"),e.indent(">> def"),e.indent("/CMapName /Adobe-Identity-UCS def"),e.indent("/CMapType 2 def"),e.indent("1 begincodespacerange"),e.indent("  <0000><ffff>"),e.indent("endcodespacerange");var t=this;e.indent(t.lastChar-t.firstChar+1," beginbfchar"),e.withIndent(function(){var n,i;for(n=t.firstChar;t.lastChar>=n;++n)i=t.map[n],e.indent("<",u(n.toString(16),4),">","<",u(i.toString(16),4),">")}),e.indent("endbfchar"),e.indent("endcmap"),e.indent("CMapName currentdict /CMap defineresource pop"),e.indent("end"),e.indent("end")}}),q=b(function(e,t){this._pdf=e,this._rcount=0,this._textMode=!1,this._fontResources={},this._gsResources={},this._xResources={},this._patResources={},this._shResources={},this._opacity=1,this._matrix=[1,0,0,1,0,0],this._font=null,this._fontSize=null,this._contextStack=[],t=this.props=t||{},t.Type=k("Page"),t.ProcSet=[k("PDF"),k("Text"),k("ImageB"),k("ImageC"),k("ImageI")],t.Resources=new H({Font:new H(this._fontResources),ExtGState:new H(this._gsResources),XObject:new H(this._xResources),Pattern:new H(this._patResources),Shading:new H(this._shResources)})},{_out:function(){this._content.data.apply(null,arguments)},transform:function(e,t,n,i,r,o){z(arguments)||(this._matrix=I(this._matrix,arguments),this._out(e," ",t," ",n," ",i," ",r," ",o," cm"),this._out(Q))},translate:function(e,t){this.transform(1,0,0,1,e,t)},scale:function(e,t){this.transform(e,0,0,t,0,0)},rotate:function(e){var t=Math.cos(e),n=Math.sin(e);this.transform(t,n,-n,t,0,0)},beginText:function(){this._textMode=!0,this._out("BT",Q)},endText:function(){this._textMode=!1,this._out("ET",Q)},_requireTextMode:function(){if(!this._textMode)throw Error("Text mode required; call page.beginText() first")},_requireFont:function(){if(!this._font)throw Error("No font selected; call page.setFont() first")},setFont:function(e,t){this._requireTextMode(),null==e?e=this._font:e instanceof j||(e=this._pdf.getFont(e)),null==t&&(t=this._fontSize),this._fontResources[e._resourceName]=e,this._font=e,this._fontSize=t,this._out(e._resourceName," ",t," Tf",Q)},setTextLeading:function(e){this._requireTextMode(),this._out(e," TL",Q)},setTextRenderingMode:function(e){this._requireTextMode(),this._out(e," Tr",Q)},showText:function(e){this._requireFont(),this._out(this._font.encodeText(e)," Tj",Q)},showTextNL:function(e){this._requireFont(),this._out(this._font.encodeText(e)," '",Q)},setStrokeColor:function(e,t,n){this._out(e," ",t," ",n," RG",Q)},setOpacity:function(e){this.setFillOpacity(e),this.setStrokeOpacity(e),this._opacity*=e},setStrokeOpacity:function(e){if(1>e){var t=this._pdf.getOpacityGS(this._opacity*e,!0);this._gsResources[t._resourceName]=t,this._out(t._resourceName," gs",Q)}},setFillColor:function(e,t,n){this._out(e," ",t," ",n," rg",Q)},setFillOpacity:function(e){if(1>e){var t=this._pdf.getOpacityGS(this._opacity*e,!1);this._gsResources[t._resourceName]=t,this._out(t._resourceName," gs",Q)}},gradient:function(e,t){var n,i,r;this.save(),this.rect(t.left,t.top,t.width,t.height),this.clip(),e.userSpace||this.transform(t.width,0,0,t.height,t.left,t.top),n=T(this._pdf,e,t),i="S"+ ++X,this._shResources[i]=this._pdf.attach(n.shading),n.hasAlpha&&(r="O"+ ++X,this._gsResources[r]=this._pdf.attach(n.opacity),this._out("/"+r+" gs ")),this._out("/"+i+" sh",Q),this.restore()},setDashPattern:function(e,t){this._out(e," ",t," d",Q)},setLineWidth:function(e){this._out(e," w",Q)},setLineCap:function(e){this._out(e," J",Q)},setLineJoin:function(e){this._out(e," j",Q)},setMitterLimit:function(e){this._out(e," M",Q)},save:function(){this._contextStack.push(this._context()),this._out("q",Q)},restore:function(){this._out("Q",Q),this._context(this._contextStack.pop())},moveTo:function(e,t){this._out(e," ",t," m",Q)},lineTo:function(e,t){this._out(e," ",t," l",Q)},bezier:function(e,t,n,i,r,o){this._out(e," ",t," ",n," ",i," ",r," ",o," c",Q)},bezier1:function(e,t,n,i){this._out(e," ",t," ",n," ",i," y",Q)},bezier2:function(e,t,n,i){this._out(e," ",t," ",n," ",i," v",Q)},close:function(){this._out("h",Q)},rect:function(e,t,n,i){this._out(e," ",t," ",n," ",i," re",Q)},ellipse:function(e,t,n,i){function r(t){return e+t}function o(e){return t+e}var a=.5522847498307936;this.moveTo(r(0),o(i)),this.bezier(r(n*a),o(i),r(n),o(i*a),r(n),o(0)),this.bezier(r(n),o(-i*a),r(n*a),o(-i),r(0),o(-i)),this.bezier(r(-n*a),o(-i),r(-n),o(-i*a),r(-n),o(0)),this.bezier(r(-n),o(i*a),r(-n*a),o(i),r(0),o(i))},circle:function(e,t,n){this.ellipse(e,t,n,n)},stroke:function(){this._out("S",Q)},nop:function(){this._out("n",Q)},clip:function(){this._out("W n",Q)},closeStroke:function(){this._out("s",Q)},fill:function(){this._out("f",Q)},fillStroke:function(){this._out("B",Q)},drawImage:function(e){var t=this._pdf.getImage(e);t&&(this._xResources[t._resourceName]=t,this._out(t._resourceName," Do",Q))},comment:function(e){var t=this;e.split(/\r?\n/g).forEach(function(e){t._out("% ",e,Q)})},_context:function(e){return null==e?{opacity:this._opacity,matrix:this._matrix}:(this._opacity=e.opacity,this._matrix=e.matrix,n)}},H),$={serif:"Times-Roman","serif|bold":"Times-Bold","serif|italic":"Times-Italic","serif|bold|italic":"Times-BoldItalic","sans-serif":"Helvetica","sans-serif|bold":"Helvetica-Bold","sans-serif|italic":"Helvetica-Oblique","sans-serif|bold|italic":"Helvetica-BoldOblique",monospace:"Courier","monospace|bold":"Courier-Bold","monospace|italic":"Courier-Oblique","monospace|bold|italic":"Courier-BoldOblique"},Y.pdf={Document:o,BinaryStream:D,defineFont:P,parseFontDef:E,getFontURL:M,loadFonts:nt,loadImages:it,TEXT_RENDERING_MODE:{fill:0,stroke:1,fillAndStroke:2,invisible:3,fillAndClip:4,strokeAndClip:5,fillStrokeClip:6,clip:7}}}(this,parseFloat),function(e){"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function n(e){return Object.keys(e).sort(function(e,t){return e-t}).map(parseFloat)}function i(e){var t,n,i;for(this.raw=e,this.scalerType=e.readLong(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),t=this.tables={},n=0;this.tableCount>n;++n)i={tag:e.readString(4),checksum:e.readLong(),offset:e.readLong(),length:e.readLong()},t[i.tag]=i}function r(e){function n(e,t){this.definition=t,this.length=t.length,this.offset=t.offset,this.file=e,this.rawData=e.raw,this.parse(e.raw)}n.prototype.raw=function(){return this.rawData.slice(this.offset,this.length)};for(var i in e)t(e,i)&&(n[i]=n.prototype[i]=e[i]);return n}function o(){var e,t="",n=_+"";for(e=0;n.length>e;++e)t+=String.fromCharCode(n.charCodeAt(e)-48+65);return++_,t}function a(e){this.font=e,this.subset={},this.unicodes={},this.ogid2ngid={0:0},this.ngid2ogid={0:0},this.ncid2ogid={},this.next=this.firstChar=1,this.nextGid=1,this.psName=o()+"+"+this.font.psName}function s(e,t){var n,i,r,o,a=this,s=a.contents=w(e);if("ttcf"==s.readString(4)){if(!t)throw Error("Must specify a name for TTC files");for(n=s.readLong(),i=s.readLong(),r=0;i>r;++r)if(o=s.readLong(),s.saveExcursion(function(){s.offset(o),a.parse()}),a.psName==t)return;throw Error("Font "+t+" not found in collection")}s.offset(0),a.parse()}var l,c,d,u,h,p,f,g,m,v,_,y=e.kendo.pdf,w=y.BinaryStream;i.prototype={readTable:function(e,t){var n=this.tables[e];if(!n)throw Error("Table "+e+" not found in directory");return this[e]=n.table=new t(this,n)},render:function(e){var n,i,r,o,a,s,l,c,d=Object.keys(e).length,u=Math.pow(2,Math.floor(Math.log(d)/Math.LN2)),h=16*u,p=Math.floor(Math.log(u)/Math.LN2),f=16*d-h,g=w();g.writeLong(this.scalerType),g.writeShort(d),g.writeShort(h),g.writeShort(p),g.writeShort(f),n=16*d,i=g.offset()+n,r=null,o=w();for(a in e)if(t(e,a))for(s=e[a],g.writeString(a),g.writeLong(this.checksum(s)),g.writeLong(i),g.writeLong(s.length),o.write(s),"head"==a&&(r=i),i+=s.length;i%4;)o.writeByte(0),i++;return g.write(o.get()),l=this.checksum(g.get()),c=2981146554-l,g.offset(r+8),g.writeLong(c),g.get()},checksum:function(e){e=w(e);for(var t=0;!e.eof();)t+=e.readLong();return 4294967295&t}},l=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.revision=e.readLong(),this.checkSumAdjustment=e.readLong(),this.magicNumber=e.readLong(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.read(8),this.modified=e.read(8),this.xMin=e.readShort_(),this.yMin=e.readShort_(),this.xMax=e.readShort_(),this.yMax=e.readShort_(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort_(),this.indexToLocFormat=e.readShort_(),this.glyphDataFormat=e.readShort_()},render:function(e){var t=w();return t.writeLong(this.version),t.writeLong(this.revision),t.writeLong(0),t.writeLong(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.write(this.created),t.write(this.modified),t.writeShort_(this.xMin),t.writeShort_(this.yMin),t.writeShort_(this.xMax),t.writeShort_(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort_(this.fontDirectionHint),t.writeShort_(e),t.writeShort_(this.glyphDataFormat),t.get()}}),c=r({parse:function(e){e.offset(this.offset);var t=this.file.head.indexToLocFormat;this.offsets=0===t?e.times(this.length/2,function(){return 2*e.readShort()}):e.times(this.length/4,e.readLong)},offsetOf:function(e){return this.offsets[e]},lengthOf:function(e){return this.offsets[e+1]-this.offsets[e]},render:function(e){var t,n=w(),i=e[e.length-1]>65535;for(t=0;e.length>t;++t)i?n.writeLong(e[t]):n.writeShort(e[t]/2);return{format:i?1:0,table:n.get()}}}),d=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.ascent=e.readShort_(),this.descent=e.readShort_(),this.lineGap=e.readShort_(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort_(),this.minRightSideBearing=e.readShort_(),this.xMaxExtent=e.readShort_(),this.caretSlopeRise=e.readShort_(),this.caretSlopeRun=e.readShort_(),this.caretOffset=e.readShort_(),e.skip(8),this.metricDataFormat=e.readShort_(),this.numOfLongHorMetrics=e.readShort()},render:function(e){var t=w();return t.writeLong(this.version),t.writeShort_(this.ascent),t.writeShort_(this.descent),t.writeShort_(this.lineGap),t.writeShort(this.advanceWidthMax),t.writeShort_(this.minLeftSideBearing),t.writeShort_(this.minRightSideBearing),t.writeShort_(this.xMaxExtent),t.writeShort_(this.caretSlopeRise),t.writeShort_(this.caretSlopeRun),t.writeShort_(this.caretOffset),t.write([0,0,0,0,0,0,0,0]),t.writeShort_(this.metricDataFormat),t.writeShort(e.length),t.get()}}),u=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.numGlyphs=e.readShort(),this.maxPoints=e.readShort(),this.maxContours=e.readShort(),this.maxComponentPoints=e.readShort(),this.maxComponentContours=e.readShort(),this.maxZones=e.readShort(),this.maxTwilightPoints=e.readShort(),this.maxStorage=e.readShort(),this.maxFunctionDefs=e.readShort(),this.maxInstructionDefs=e.readShort(),this.maxStackElements=e.readShort(),this.maxSizeOfInstructions=e.readShort(),this.maxComponentElements=e.readShort(),this.maxComponentDepth=e.readShort()},render:function(e){var t=w();return t.writeLong(this.version),t.writeShort(e.length),t.writeShort(this.maxPoints),t.writeShort(this.maxContours),t.writeShort(this.maxComponentPoints),t.writeShort(this.maxComponentContours),t.writeShort(this.maxZones),t.writeShort(this.maxTwilightPoints),t.writeShort(this.maxStorage),t.writeShort(this.maxFunctionDefs),t.writeShort(this.maxInstructionDefs),t.writeShort(this.maxStackElements),t.writeShort(this.maxSizeOfInstructions),t.writeShort(this.maxComponentElements),t.writeShort(this.maxComponentDepth),t.get()}}),h=r({parse:function(e){var t,n,i;e.offset(this.offset),t=this.file,n=t.hhea,this.metrics=e.times(n.numOfLongHorMetrics,function(){return{advance:e.readShort(),lsb:e.readShort_()}}),i=t.maxp.numGlyphs-t.hhea.numOfLongHorMetrics,this.leftSideBearings=e.times(i,e.readShort_)},forGlyph:function(e){var t=this.metrics,n=t.length;return n>e?t[e]:{advance:t[n-1].advance,lsb:this.leftSideBearings[e-n]}},render:function(e){var t,n,i=w();for(t=0;e.length>t;++t)n=this.forGlyph(e[t]),i.writeShort(n.advance),i.writeShort_(n.lsb);return i.get()}}),p=function(){function e(e){this.raw=e}function n(e){var t,n,r;for(this.raw=e,t=this.glyphIds=[],n=this.idOffsets=[];;){if(r=e.readShort(),n.push(e.offset()),t.push(e.readShort()),!(r&a))break;e.skip(r&i?4:2),r&l?e.skip(8):r&s?e.skip(4):r&o&&e.skip(2)}}var i,o,a,s,l,c;return e.prototype={compound:!1,render:function(){return this.raw.get()}},i=1,o=8,a=32,s=64,l=128,c=256,n.prototype={compound:!0,render:function(e){var t,n,i=w(this.raw.get());for(t=0;this.glyphIds.length>t;++t)n=this.glyphIds[t],i.offset(this.idOffsets[t]),i.writeShort(e[n]);return i.get()}},r({parse:function(){this.cache={}},glyphFor:function(i){var r,o,a,s,l,c,d,u,h,p,f,g=this.cache;return t(g,i)?g[i]:(r=this.file.loca,o=r.lengthOf(i),0===o?g[i]=null:(a=this.rawData,s=this.offset+r.offsetOf(i),l=w(a.slice(s,o)),c=l.readShort_(),d=l.readShort_(),u=l.readShort_(),h=l.readShort_(),p=l.readShort_(),f=g[i]=-1==c?new n(l):new e(l),f.numberOfContours=c,f.xMin=d,f.yMin=u,f.xMax=h,f.yMax=p,f))},render:function(e,t,n){var i,r,o,a=w(),s=[];for(i=0;t.length>i;++i)r=t[i],o=e[r],s.push(a.offset()),o&&a.write(o.render(n));return s.push(a.offset()),{table:a.get(),offsets:s}}})}(),f=function(){function e(e,t){this.text=e,this.length=e.length,this.platformID=t.platformID,this.platformSpecificID=t.platformSpecificID,this.languageID=t.languageID,this.nameID=t.nameID}return r({parse:function(t){var n,i,r,o,a,s,l,c;for(t.offset(this.offset),n=t.readShort(),i=t.readShort(),r=this.offset+t.readShort(),o=t.times(i,function(){return{platformID:t.readShort(),platformSpecificID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:t.readShort()+r}}),a=this.strings={},s=0;o.length>s;++s)l=o[s],t.offset(l.offset),c=t.readString(l.length),a[l.nameID]||(a[l.nameID]=[]),a[l.nameID].push(new e(c,l));this.postscriptEntry=a[6][0],this.postscriptName=this.postscriptEntry.text.replace(/[^\x20-\x7F]/g,"")},render:function(n){var i,r,o,a,s,l,c=this.strings,d=0;for(i in c)t(c,i)&&(d+=c[i].length);r=w(),o=w(),r.writeShort(0),r.writeShort(d),r.writeShort(6+12*d);for(i in c)if(t(c,i))for(a=6==i?[new e(n,this.postscriptEntry)]:c[i],s=0;a.length>s;++s)l=a[s],r.writeShort(l.platformID),r.writeShort(l.platformSpecificID),r.writeShort(l.languageID),r.writeShort(l.nameID),r.writeShort(l.length),r.writeShort(o.offset()),o.writeString(l.text);return r.write(o.get()),r.get()}})}(),g=function(){var e=".notdef .null nonmarkingreturn space exclam quotedbl numbersign dollar percent ampersand quotesingle parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore grave a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde Adieresis Aring Ccedilla Eacute Ntilde Odieresis Udieresis aacute agrave acircumflex adieresis atilde aring ccedilla eacute egrave ecircumflex edieresis iacute igrave icircumflex idieresis ntilde oacute ograve ocircumflex odieresis otilde uacute ugrave ucircumflex udieresis dagger degree cent sterling section bullet paragraph germandbls registered copyright trademark acute dieresis notequal AE Oslash infinity plusminus lessequal greaterequal yen mu partialdiff summation product pi integral ordfeminine ordmasculine Omega ae oslash questiondown exclamdown logicalnot radical florin approxequal Delta guillemotleft guillemotright ellipsis nonbreakingspace Agrave Atilde Otilde OE oe endash emdash quotedblleft quotedblright quoteleft quoteright divide lozenge ydieresis Ydieresis fraction currency guilsinglleft guilsinglright fi fl daggerdbl periodcentered quotesinglbase quotedblbase perthousand Acircumflex Ecircumflex Aacute Edieresis Egrave Iacute Icircumflex Idieresis Igrave Oacute Ocircumflex apple Ograve Uacute Ucircumflex Ugrave dotlessi circumflex tilde macron breve dotaccent ring cedilla hungarumlaut ogonek caron Lslash lslash Scaron scaron Zcaron zcaron brokenbar Eth eth Yacute yacute Thorn thorn minus multiply onesuperior twosuperior threesuperior onehalf onequarter threequarters franc Gbreve gbreve Idotaccent Scedilla scedilla Cacute cacute Ccaron ccaron dcroat".split(/\s+/g);return r({parse:function(e){var t,n;switch(e.offset(this.offset),this.format=e.readLong(),this.italicAngle=e.readFixed_(),this.underlinePosition=e.readShort_(),this.underlineThickness=e.readShort_(),this.isFixedPitch=e.readLong(),this.minMemType42=e.readLong(),this.maxMemType42=e.readLong(),this.minMemType1=e.readLong(),this.maxMemType1=e.readLong(),this.format){case 65536:case 196608:break;case 131072:for(t=e.readShort(),this.glyphNameIndex=e.times(t,e.readShort),this.names=[],n=this.offset+this.length;e.offset()<n;)this.names.push(e.readString(e.readByte()));break;case 151552:t=e.readShort(),this.offsets=e.read(t);break;case 262144:this.map=e.times(this.file.maxp.numGlyphs,e.readShort)}},glyphFor:function(t){switch(this.format){case 65536:return e[t]||".notdef";case 131072:var n=this.glyphNameIndex[t];return e.length>n?e[n]:this.names[n-e.length]||".notdef";case 151552:case 196608:return".notdef";case 262144:return this.map[t]||65535}},render:function(t){var n,i,r,o,a,s,l;if(196608==this.format)return this.raw();for(n=w(this.rawData.slice(this.offset,32)),n.writeLong(131072),n.offset(32),i=[],r=[],o=0;t.length>o;++o)a=t[o],s=this.glyphFor(a),l=e.indexOf(s),l>=0?i.push(l):(i.push(e.length+r.length),r.push(s));for(n.writeShort(t.length),o=0;i.length>o;++o)n.writeShort(i[o]);for(o=0;r.length>o;++o)n.writeByte(r[o].length),n.writeString(r[o]);return n.get()}})}(),m=function(){function e(e,t){var n=this;n.platformID=e.readShort(),n.platformSpecificID=e.readShort(),n.offset=t+e.readLong(),e.saveExcursion(function(){var t,i,r,o,a,s,l,c,d,u,h,p,f;switch(e.offset(n.offset),n.format=e.readShort(),n.length=e.readShort(),n.language=e.readShort(),n.isUnicode=3==n.platformID&&1==n.platformSpecificID&&4==n.format||0===n.platformID&&4==n.format,n.codeMap={},n.format){case 0:for(t=0;256>t;++t)n.codeMap[t]=e.readByte();break;case 4:for(i=e.readShort()/2,e.skip(6),r=e.times(i,e.readShort),e.skip(2),o=e.times(i,e.readShort),a=e.times(i,e.readShort_),s=e.times(i,e.readShort),l=(n.length+n.offset-e.offset())/2,c=e.times(l,e.readShort),t=0;i>t;++t)for(d=o[t],u=r[t],h=d;u>=h;++h)0===s[t]?p=h+a[t]:(f=s[t]/2-(i-t)+(h-d),p=c[f]||0,0!==p&&(p+=a[t])),n.codeMap[h]=65535&p}})}function t(e,t){function i(n){return t[e[n]]}var r,o,a,s,l,c,d,u,h,p,f,g,m,v,_,y,b,k=n(e),x=[],C=[],S=null,T=null;for(r=0;k.length>r;++r)o=k[r],a=i(o),s=a-o,(null==S||s!==T)&&(S&&C.push(S),x.push(o),T=s),S=o;for(S&&C.push(S),C.push(65535),x.push(65535),l=x.length,c=2*l,d=2*Math.pow(2,Math.floor(Math.log(l)/Math.LN2)),u=Math.log(d/2)/Math.LN2,h=c-d,p=[],f=[],g=[],r=0;l>r;++r){if(m=x[r],v=C[r],65535==m){p.push(0),f.push(0);break}if(_=i(m),m-_>=32768)for(p.push(0),f.push(2*(g.length+l-r)),y=m;v>=y;++y)g.push(i(y));else p.push(_-m),f.push(0)}return b=w(),b.writeShort(3),b.writeShort(1),b.writeLong(12),b.writeShort(4),b.writeShort(16+8*l+2*g.length),b.writeShort(0),b.writeShort(c),b.writeShort(d),b.writeShort(u),b.writeShort(h),C.forEach(b.writeShort),b.writeShort(0),x.forEach(b.writeShort),p.forEach(b.writeShort_),f.forEach(b.writeShort),g.forEach(b.writeShort),b.get()}return r({parse:function(t){var n,i=this,r=i.offset;t.offset(r),i.version=t.readShort(),n=t.readShort(),i.unicodeEntry=null,i.tables=t.times(n,function(){var n=new e(t,r);return n.isUnicode&&(i.unicodeEntry=n),n})},render:function(e,n){var i=w();return i.writeShort(0),i.writeShort(1),i.write(t(e,n)),i.get()},getUnicodeEntry:function(){if(!this.unicodeEntry)throw Error("Font doesn't have an Unicode encoding");return this.unicodeEntry}})}(),v=r({parse:function(e){e.offset(this.offset),this.version=e.readShort(),this.averageCharWidth=e.readShort_(),this.weightClass=e.readShort(),this.widthClass=e.readShort(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort_(),this.ySubscriptYSize=e.readShort_(),this.ySubscriptXOffset=e.readShort_(),this.ySubscriptYOffset=e.readShort_(),this.ySuperscriptXSize=e.readShort_(),this.ySuperscriptYSize=e.readShort_(),this.ySuperscriptXOffset=e.readShort_(),this.ySuperscriptYOffset=e.readShort_(),this.yStrikeoutSize=e.readShort_(),this.yStrikeoutPosition=e.readShort_(),this.familyClass=e.readShort_(),this.panose=e.times(10,e.readByte),this.charRange=e.times(4,e.readLong),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort_(),this.descent=e.readShort_(),this.lineGap=e.readShort_(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=e.times(2,e.readLong),this.version>1&&(this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()))},render:function(){return this.raw()}}),_=1e5,a.prototype={use:function(e){var t,n,i,r,o;if("string"==typeof e){for(n="",i=0;e.length>i;++i)t=this.use(e.charCodeAt(i)),n+=String.fromCharCode(t);return n}return t=this.unicodes[e],t||(t=this.next++,this.subset[t]=e,this.unicodes[e]=t,r=this.font.cmap.getUnicodeEntry().codeMap[e],r&&(this.ncid2ogid[t]=r,null==this.ogid2ngid[r]&&(o=this.nextGid++,this.ogid2ngid[r]=o,this.ngid2ogid[o]=r))),t},encodeText:function(e){return this.use(e)},glyphIds:function(){return n(this.ogid2ngid)},glyphsFor:function(e,t){var n,i,r;for(t||(t={}),n=0;e.length>n;++n)i=e[n],t[i]||(r=t[i]=this.font.glyf.glyphFor(i),r&&r.compound&&this.glyphsFor(r.glyphIds,t));return t},render:function(){var e,i,r,o,a,s,l,c,d=this.glyphsFor(this.glyphIds());for(e in d)t(d,e)&&(e=parseInt(e,10),null==this.ogid2ngid[e]&&(i=this.nextGid++,this.ogid2ngid[e]=i,this.ngid2ogid[i]=e));return r=n(this.ngid2ogid),o=r.map(function(e){return this.ngid2ogid[e]},this),a=this.font,s=a.glyf.render(d,o,this.ogid2ngid),l=a.loca.render(s.offsets),this.lastChar=this.next-1,c={cmap:m.render(this.ncid2ogid,this.ogid2ngid),glyf:s.table,loca:l.table,hmtx:a.hmtx.render(o),hhea:a.hhea.render(o),maxp:a.maxp.render(o),post:a.post.render(o),name:a.name.render(this.psName),head:a.head.render(l.format),"OS/2":a.os2.render()},this.font.directory.render(c)},cidToGidMap:function(){var e,t,n,i=w(),r=0;for(e=this.firstChar;this.next>e;++e){for(;e>r;)i.writeShort(0),r++;t=this.ncid2ogid[e],t?(n=this.ogid2ngid[t],i.writeShort(n)):i.writeShort(0),r++}return i.get()}},s.prototype={parse:function(){var e=this.directory=new i(this.contents);this.head=e.readTable("head",l),this.loca=e.readTable("loca",c),this.hhea=e.readTable("hhea",d),this.maxp=e.readTable("maxp",u),this.hmtx=e.readTable("hmtx",h),this.glyf=e.readTable("glyf",p),this.name=e.readTable("name",f),this.post=e.readTable("post",g),this.cmap=e.readTable("cmap",m),this.os2=e.readTable("OS/2",v),this.psName=this.name.postscriptName,this.ascent=this.os2.ascent||this.hhea.ascent,this.descent=this.os2.descent||this.hhea.descent,this.lineGap=this.os2.lineGap||this.hhea.lineGap,this.scale=1e3/this.head.unitsPerEm},widthOfGlyph:function(e){return this.hmtx.forGlyph(e).advance*this.scale},makeSubset:function(){return new a(this)}},y.TTFFont=s}(this),function(e){e.PDFMixin={extend:function(e){e.events.push("pdfExport"),e.options.pdf=this.options,e.saveAsPDF=this.saveAsPDF},options:{fileName:"Export.pdf",proxyURL:"",paperSize:"auto",landscape:!1,margin:null,title:null,author:null,subject:null,keywords:null,creator:"Kendo UI PDF Generator",date:null},saveAsPDF:function(){if(!this.trigger("pdfExport")){var t=this.options.pdf;
e.drawing.drawDOM(this.wrapper[0]).then(function(n){return e.drawing.exportPDF(n,t)}).done(function(n){e.saveAs({dataURI:n,fileName:t.fileName,proxyURL:t.proxyURL,forceProxy:t.forceProxy})})}}}}(kendo),function(e,t){"use strict";function n(){if(!e.pdf)throw Error("kendo.pdf.js is not loaded");return e.pdf}function i(e,t){function i(e,t){return d.pdf&&null!=d.pdf[e]?d.pdf[e]:t}function r(){var r,a,s,c,d,u,p;--o>0||(r=i("paperSize","auto"),a=!1,"auto"==r&&(h?(s=h.getSize(),r=[s.width,s.height],a=!0,c=h.getOrigin(),d=new D.Group,d.transform(new A.Matrix(1,0,0,1,-c.x,-c.y)),d.append(e),e=d):r="A4"),u=new(n().Document)({paperSize:r,landscape:i("landscape",!1),margin:i("margin"),addMargin:a,title:i("title"),author:i("author"),subject:i("subject"),keywords:i("keywords"),creator:i("creator"),date:i("date")}),p=u.addPage(),l(e,p,u),t(u.render(),u,p))}var o,a=[],c=[],d=e.options,u=T(e),h=u.bbox;e=u.root,e.traverse(function(e){s({Image:function(e){c.indexOf(e.src())<0&&c.push(e.src())},Text:function(e){var t=n().parseFontDef(e.options.font),i=n().getFontURL(t);a.indexOf(i)<0&&a.push(i)}},e)}),o=2,n().loadFonts(a,r),n().loadImages(c,r)}function r(e,t){i(e,function(e){t("data:application/pdf;base64,"+e.base64())})}function o(e,t){i(e,function(e){t(new Blob([e.get()],{type:"application/pdf"}))})}function a(t,n,i,a){window.Blob&&!e.support.browser.safari?o(t,function(t){e.saveAs({dataURI:t,fileName:n}),a&&a(t)}):r(t,function(t){e.saveAs({dataURI:t,fileName:n,proxyURL:i}),a&&a(t)})}function s(e,t){var n=e[t.nodeType];return n?n.call.apply(n,arguments):t}function l(e,t,n){var i,r,o;e.DEBUG&&t.comment(e.DEBUG),i=e.transform(),r=e.opacity(),t.save(),null!=r&&1>r&&t.setOpacity(r),c(e,t,n),d(e,t,n),u(e,t,n),i&&(o=i.matrix(),t.transform(o.a,o.b,o.c,o.d,o.e,o.f)),s({Path:v,MultiPath:_,Circle:y,Arc:w,Text:b,Image:x,Group:k},e,t,n),t.restore()}function c(e,t){var n,i,r,o,a,s,l=e.stroke&&e.stroke();if(l){if(n=l.color){if(n=S(n),null==n)return;t.setStrokeColor(n.r,n.g,n.b),1!=n.a&&t.setStrokeOpacity(n.a)}if(i=l.width,null!=i){if(0===i)return;t.setLineWidth(i)}r=l.dashType,r&&t.setDashPattern(E[r],0),o=l.lineCap,o&&t.setLineCap(M[o]),a=l.lineJoin,a&&t.setLineJoin(P[a]),s=l.opacity,null!=s&&t.setStrokeOpacity(s)}}function d(e,t){var n,i,r=e.fill&&e.fill();if(r&&!(r instanceof D.Gradient)){if(n=r.color){if(n=S(n),null==n)return;t.setFillColor(n.r,n.g,n.b),1!=n.a&&t.setFillOpacity(n.a)}i=r.opacity,null!=i&&t.setFillOpacity(i)}}function u(e,t,n){var i=e.clip();i&&(m(i,t,n),t.clip())}function h(e){return e&&(e instanceof D.Gradient||e.color&&!/^(none|transparent)$/i.test(e.color)&&(null==e.width||e.width>0)&&(null==e.opacity||e.opacity>0))}function p(e,t,n,i){var r,o,a,s,l,c,d=e.fill();return d instanceof D.Gradient?(i?t.stroke():t.nop(),d instanceof D.LinearGradient?(r={x:d.start().x,y:d.start().y},o={x:d.end().x,y:d.end().y},a={type:"linear",start:r,end:o,userSpace:d.userSpace(),stops:d.stops.elements().map(function(e){var t,n=e.offset();return n=/%$/.test(n)?parseFloat(n)/100:parseFloat(n),t=S(e.color()),t.a*=e.opacity(),{offset:n,color:t}})},s=e.rawBBox(),l=s.topLeft(),c=s.getSize(),s={left:l.x,top:l.y,width:c.width,height:c.height},t.gradient(a,s),!0):void(window.console&&window.console.log&&window.console.log("Radial gradients are not yet supported in PDF output."))):void 0}function f(e,t,n){h(e.fill())&&h(e.stroke())?p(e,t,n,!0)||t.fillStroke():h(e.fill())?p(e,t,n,!1)||t.fill():h(e.stroke())?t.stroke():t.nop()}function g(e,t){var n,i,r,o=e.segments;if(4==o.length&&e.options.closed){for(n=[],i=0;o.length>i;++i){if(o[i].controlIn())return!1;n[i]=o[i].anchor()}if(r=n[0].y==n[1].y&&n[1].x==n[2].x&&n[2].y==n[3].y&&n[3].x==n[0].x||n[0].x==n[1].x&&n[1].y==n[2].y&&n[2].x==n[3].x&&n[3].y==n[0].y)return t.rect(n[0].x,n[0].y,n[2].x-n[0].x,n[2].y-n[0].y),!0}}function m(e,t,n){var i,r,o,a,s,l,c=e.segments;if(0!==c.length&&!g(e,t,n)){for(r=0;c.length>r;++r)o=c[r],a=o.anchor(),i?(s=i.controlOut(),l=o.controlIn(),s&&l?t.bezier(s.x,s.y,l.x,l.y,a.x,a.y):t.lineTo(a.x,a.y)):t.moveTo(a.x,a.y),i=o;e.options.closed&&t.close()}}function v(e,t,n){m(e,t,n),f(e,t,n)}function _(e,t,n){var i,r=e.paths;for(i=0;r.length>i;++i)m(r[i],t,n);f(e,t,n)}function y(e,t,n){var i=e.geometry();t.circle(i.center.x,i.center.y,i.radius),f(e,t,n)}function w(e,t,n){var i,r=e.geometry().curvePoints();for(t.moveTo(r[0].x,r[0].y),i=1;r.length>i;)t.bezier(r[i].x,r[i++].y,r[i].x,r[i++].y,r[i].x,r[i++].y);f(e,t,n)}function b(e,t){var i,r=n().parseFontDef(e.options.font),o=e._position;e.fill()&&e.stroke()?i=n().TEXT_RENDERING_MODE.fillAndStroke:e.fill()?i=n().TEXT_RENDERING_MODE.fill:e.stroke()&&(i=n().TEXT_RENDERING_MODE.stroke),t.transform(1,0,0,-1,o.x,o.y+r.fontSize),t.beginText(),t.setFont(n().getFontURL(r),r.fontSize),t.setTextRenderingMode(i),t.showText(e.content()),t.endText()}function k(e,t,n){var i,r=e.children;for(i=0;r.length>i;++i)l(r[i],t,n)}function x(e,t){var n=e.src(),i=e.rect(),r=i.getOrigin(),o=i.getSize();t.transform(o.width,0,0,-o.height,r.x,r.y+o.height),t.drawImage(n)}function C(e,n){var i=t.Deferred();return e.options.set("pdf",n),D.pdf.toDataURL(e,i.resolve),i.promise()}function S(t){var n=e.parseColor(t,!0);return n?n.toRGB():null}function T(e){function t(e){return l=!0,e}function n(e){return e.visible()&&e.opacity()>0&&(h(e.fill())||h(e.stroke()))}function i(e){var t,n,i=[];for(t=0;e.length>t;++t)n=a(e[t]),null!=n&&i.push(n);return i}function r(e,t){var n,i=c,r=d;e.transform()&&(d=d.multiplyCopy(e.transform().matrix())),n=e.clip(),n&&(n=n.bbox(),n&&(n=n.bbox(d),c=c?A.Rect.intersect(c,n):n));try{return t()}finally{c=i,d=r}}function o(e){if(null==c)return!1;var t=e.rawBBox().bbox(d);return c&&t&&(t=A.Rect.intersect(t,c)),t}function a(a){if(!(a instanceof D.Group||a instanceof D.MultiPath)){var l=o(a);if(!l)return t(null);u=u?A.Rect.union(u,l):l}return s({Path:function(e){return 0!==e.segments.length&&n(e)?e:t(null)},MultiPath:function(e){if(!n(e))return t(null);var r=new D.MultiPath(e.options);return r.paths=i(e.paths),0===r.paths.length?t(null):r},Circle:function(e){return n(e)?e:t(null)},Arc:function(e){return n(e)?e:t(null)},Text:function(e){return/\S/.test(e.content())&&n(e)?e:t(null)},Image:function(e){return e.visible()&&e.opacity()>0?e:t(null)},Group:function(n){return r(n,function(){var r=new D.Group(n.options);return r.children=i(n.children),n!==e&&0===r.children.length?t(null):r})}},a)}var l,c=!1,d=A.Matrix.unit(),u=null;do l=!1,e=a(e);while(e&&l);return{root:e,bbox:u}}var D=e.drawing,A=e.geometry,E={dash:[4],dashDot:[4,2,1,2],dot:[1,2],longDash:[8,2],longDashDot:[8,2,1,2],longDashDotDot:[8,2,1,2,1,2],solid:[]},M={butt:0,round:1,square:2},P={miter:0,round:1,bevel:2};e.deepExtend(D,{exportPDF:C,pdf:{toDataURL:r,toBlob:o,saveAs:a,toStream:i}})}(window.kendo,window.kendo.jQuery),function(e,t,n){"use strict";function i(e){function t(t){return i=t.exec(e.substr(a))}function n(e){return e.replace(/^\s+|\s+$/g,"")}for(var i,r=[],o=0,a=0,s=0,l=!1;e.length>a;)t(/^\s+/)?a+=i[0].length:t(/^[\(\[\{]/)?(s++,a++):t(/^[\)\]\}]/)?(s--,a++):!l&&t(/^[\"\']/)?(l=i[0],a++):"'"==l&&t(/^\\\'/)?a+=2:'"'==l&&t(/^\\\"/)?a+=2:"'"==l&&t(/^\'/)?(l=!1,a++):'"'==l&&t(/^\"/)?(l=!1,a++):t(/^\s*,\s*/)?(!l&&!s&&a>o&&(r.push(n(e.substring(o,a))),o=a+i[0].length),a+=i[0].length):a++;return a>o&&r.push(n(e.substring(o,a))),r}function r(e,t){var n=kendo.parseColor(e);return n&&(n=n.toRGB(),t?n=n.toCssRgba():0===n.a&&(n=null)),n}function o(e,t){function n(e){j[e]||(j[e]=!0,o.push(e))}function i(){--r<=0&&t()}var r,o=[];!function s(e){var t,i=a(h(u(e),"background-image"));for(/^img$/i.test(e.tagName)&&n(e.src),i&&n(i),t=e.firstChild;t;t=t.nextSibling)1==t.nodeType&&s(t)}(e),r=o.length,0===r&&i(),o.forEach(function(e){var t=j[e]=new Image;t.onload=i,t.onerror=function(){j[e]=null,i()},t.src=e,(t.complete||void 0===t.complete)&&(t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",t.src=e)})}function a(e){var t=/^\s*url\((['"]?)(.*?)\1\)\s*$/i.exec(e);return t?t[2]:void 0}function s(e,t,n){var i,r;O=Object.create(O),O[e.tagName.toLowerCase()]={element:e,style:t},i=h(t,"text-decoration"),i&&"none"!=i&&(r=h(t,"color"),i.split(/\s+/g).forEach(function(e){O[e]||(O[e]=r)})),d(e)&&(O._stackingContext={element:e,group:n})}function l(){O=Object.getPrototypeOf(O)}function c(e){if(null!=O._clipbox){var t=e.bbox(O._matrix);O._clipbox=O._clipbox?V.Rect.intersect(O._clipbox,t):t}}function d(e){function t(e){return h(n,e)}var n=u(e);return"none"!=t("transform")||"static"!=t("position")&&"auto"!=t("z-index")||t("opacity")<1?!0:void 0}function u(e){return window.getComputedStyle(e)}function h(e,t){return e.getPropertyValue(t)||W.webkit&&e.getPropertyValue("-webkit-"+t)||W.firefox&&e.getPropertyValue("-moz-"+t)||W.opera&&e.getPropertyValue("-o-"+t)||W.msie&&e.getPropertyValue("-ms-"+t)}function p(e,t,n,i){e.setProperty(t,n,i),W.webkit?e.setProperty("-webkit-"+t,n,i):W.firefox?e.setProperty("-moz-"+t,n,i):W.opera?e.setProperty("-o-"+t,n,i):W.msie&&(e.setProperty("-ms-"+t,n,i),t="ms"+t.replace(/(^|-)([a-z])/g,function(e,t,n){return t+n.toUpperCase()}),e[t]=n)}function f(e,n){return n="border-"+n,{width:t(h(e,n+"-width")),style:h(e,n+"-style"),color:r(h(e,n+"-color"),!0)}}function g(e,t){var n=e.style.cssText,i=t();return e.style.cssText=n,i}function m(e,n){var i=h(e,"border-"+n+"-radius").split(/\s+/g).map(t);return 1==i.length&&i.push(i[0]),S({x:i[0],y:i[1]})}function v(e){var t=e.getBoundingClientRect();return t=_(t,"border-*-width",e),t=_(t,"padding-*",e)}function _(e,n,i){var r,o,a,s,l;return"string"==typeof n?(r=u(i),o=t(h(r,n.replace("*","top"))),a=t(h(r,n.replace("*","right"))),s=t(h(r,n.replace("*","bottom"))),l=t(h(r,n.replace("*","left")))):"number"==typeof n&&(o=a=s=l=n),{top:e.top+o,right:e.right-a,bottom:e.bottom-s,left:e.left+l,width:e.right-e.left-a-l,height:e.bottom-e.top-s-o}}function y(e){var n,i,r=h(e,"transform");return"none"==r?null:(n=/^\s*matrix\(\s*(.*?)\s*\)\s*$/.exec(r),n?(i=h(e,"transform-origin"),n=n[1].split(/\s*,\s*/g).map(t),i=i.split(/\s+/g).map(t),{matrix:n,origin:i}):void 0)}function w(e){return 180*e/n.PI%360}function b(e){var i=t(e);return/grad$/.test(e)?n.PI*i/200:/rad$/.test(e)?i:/turn$/.test(e)?n.PI*i*2:/deg$/.test(e)?n.PI*i/180:void 0}function k(e,t){return t=new V.Matrix(t[0],t[1],t[2],t[3],t[4],t[5]),e.transform(t),t}function x(e,t){e.clip(t)}function C(e,t,n,i){for(var r=new V.Arc([t,n],i).curvePoints(),o=1;r.length>o;)e.curveTo(r[o++],r[o++],r[o++])}function S(e){return(0>=e.x||0>=e.y)&&(e.x=e.y=0),e}function T(e,n,i){var r,o,a,s,l,c,d,p,g=u(e),v=m(g,"top-left"),_=m(g,"top-right"),y=m(g,"bottom-left"),w=m(g,"bottom-right");return("padding"==i||"content"==i)&&(r=f(g,"top"),o=f(g,"right"),a=f(g,"bottom"),s=f(g,"left"),v.x-=s.width,v.y-=r.width,_.x-=o.width,_.y-=r.width,w.x-=o.width,w.y-=a.width,y.x-=s.width,y.y-=a.width,"content"==i&&(l=t(h(g,"padding-top")),c=t(h(g,"padding-right")),d=t(h(g,"padding-bottom")),p=t(h(g,"padding-left")),v.x-=p,v.y-=l,_.x-=c,_.y-=l,w.x-=c,w.y-=d,y.x-=p,y.y-=d)),"number"==typeof i&&(v.x-=i,v.y-=i,_.x-=i,_.y-=i,w.x-=i,w.y-=i,y.x-=i,y.y-=i),D(n,v,_,w,y)}function D(e,t,n,i,r){var o=new N.Path({fill:null,stroke:null});return S(t),S(n),S(i),S(r),o.moveTo(e.left,e.top+t.y),t.x&&C(o,e.left+t.x,e.top+t.y,{startAngle:-180,endAngle:-90,radiusX:t.x,radiusY:t.y}),o.lineTo(e.right-n.x,e.top),n.x&&C(o,e.right-n.x,e.top+n.y,{startAngle:-90,endAngle:0,radiusX:n.x,radiusY:n.y}),o.lineTo(e.right,e.bottom-i.y),i.x&&C(o,e.right-i.x,e.bottom-i.y,{startAngle:0,endAngle:90,radiusX:i.x,radiusY:i.y}),o.lineTo(e.left+r.x,e.bottom),r.x&&C(o,e.left+r.x,e.bottom-r.y,{startAngle:90,endAngle:180,radiusX:r.x,radiusY:r.y}),o.close()}function A(e,o){function s(t){var n,i,r,o,a,s;if(/^td$/i.test(e.tagName)&&(n=O.table,n&&"collapse"==h(n.style,"border-collapse"))){if(i=f(n.style,"left").width,r=f(n.style,"top").width,0===i&&0===r)return t;if(o=n.element.getBoundingClientRect(),a=n.element.rows[0].cells[0],s=a.getBoundingClientRect(),s.top==o.top||s.left==o.left)return U.call(t).map(function(e){return{left:e.left+i,top:e.top+r,right:e.right+i,bottom:e.bottom+r,height:e.height,width:e.width}})}return t}function l(e,t,i,r,a,s,l,c){function d(t,r,o){var a=n.PI/2*t/(t+i),s={x:r.x-t,y:r.y-i},l=new N.Path({fill:{color:e},stroke:null}).moveTo(0,0);k(l,o),C(l,0,r.y,{startAngle:-90,endAngle:-w(a),radiusX:r.x,radiusY:r.y}),s.x>0&&s.y>0?(l.lineTo(s.x*n.cos(a),r.y-s.y*n.sin(a)),C(l,0,r.y,{startAngle:-w(a),endAngle:-90,radiusX:s.x,radiusY:s.y,anticlockwise:!0})):s.x>0?l.lineTo(s.x,i).lineTo(0,i):l.lineTo(s.x,i).lineTo(s.x,0),h.append(l.close())}if(!(0>=i)){var u,h=new N.Group;k(h,c),o.append(h),S(s),S(l),u=new N.Path({fill:{color:e},stroke:null}),h.append(u),u.moveTo(s.x?n.max(s.x,r):0,0).lineTo(t-(l.x?n.max(l.x,a):0),0).lineTo(t-n.max(l.x,a),i).lineTo(n.max(s.x,r),i).close(),s.x&&d(r,s,[-1,0,0,1,s.x,0]),l.x&&d(a,l,[1,0,0,1,t-l.x,0])}}function d(e){var t,n,i,r,a,s,l,c=new N.Group;for(x(c,D(e,Y,K,X,Q)),o.append(c),Z&&(t=new N.Path({fill:{color:Z.toCssRgba()},stroke:null}),t.moveTo(e.left,e.top).lineTo(e.right,e.top).lineTo(e.right,e.bottom).lineTo(e.left,e.bottom).close(),c.append(t)),l=v.length;--l>=0;)n=v[l],i=y[l]||y[y.length-1],r=b[l]||b[b.length-1],a=A[l]||A[A.length-1],s=P[l]||P[P.length-1],p(c,e,n,i,r,a,s)}function p(n,i,r,o,s,l,c){function d(n,i,r,a,d){function u(){for(;m.origin.x>i.left;)m.origin.x-=r}function h(){for(;m.origin.y>i.top;)m.origin.y-=a}function p(){for(;i.right>m.origin.x;)d(n,m.clone()),m.origin.x+=r}var f,g,m,v,y=r/a,w=i;if("content-box"==l?(w=_(w,"border-*-width",e),w=_(w,"padding-*",e)):"padding-box"==l&&(w=_(w,"border-*-width",e)),/^\s*auto(\s+auto)?\s*$/.test(c)||(f=c.split(/\s+/g),r=/%$/.test(f[0])?w.width*t(f[0])/100:t(f[0]),a=1==f.length||"auto"==f[1]?r/y:/%$/.test(f[1])?w.height*t(f[1])/100:t(f[1])),g=(s+"").split(/\s+/),1==g.length&&(g[1]="50%"),g[0]=/%$/.test(g[0])?t(g[0])/100*(w.width-r):t(g[0]),g[1]=/%$/.test(g[1])?t(g[1])/100*(w.height-a):t(g[1]),m=new V.Rect([w.left+g[0],w.top+g[1]],[r,a]),"no-repeat"==o)d(n,m);else if("repeat-x"==o)u(),p();else if("repeat-y"==o)for(h();i.bottom>m.origin.y;)d(n,m.clone()),m.origin.y+=a;else if("repeat"==o)for(u(),h(),v=m.origin.clone();i.bottom>m.origin.y;)m.origin.x=v.x,p(),m.origin.y+=a}var u,h,p;r&&"none"!=r&&(/^url\(\"data:image\/svg/i.test(r)||(u=a(r),u?(h=j[u],h&&h.width>0&&h.height>0&&d(n,i,h.width,h.height,function(e,t){e.append(new N.Image(u,t))})):(p=H(r),p&&d(n,i,i.width,i.height,E(p)))))}function g(t,n,i){function r(e){return{x:e.y,y:e.x}}var a,s,c;if(0!==t.width&&0!==t.height&&(d(t),a=$.width>0&&(n&&"ltr"==J||i&&"rtl"==J),s=G.width>0&&(i&&"ltr"==J||n&&"rtl"==J),0!==L.width||0!==$.width||0!==G.width||0!==q.width)){if(L.color==G.color&&L.color==q.color&&L.color==$.color&&L.width==G.width&&L.width==q.width&&L.width==$.width&&a&&s)return t=_(t,L.width/2),c=T(e,t,L.width/2),c.options.stroke={color:L.color,width:L.width},void o.append(c);if(0===Y.x&&0===K.x&&0===X.x&&0===Q.x&&2>L.width&&2>$.width&&2>G.width&&2>q.width)return L.width>0&&o.append(new N.Path({stroke:{width:L.width,color:L.color}}).moveTo(t.left,t.top+L.width/2).lineTo(t.right,t.top+L.width/2)),q.width>0&&o.append(new N.Path({stroke:{width:q.width,color:q.color}}).moveTo(t.left,t.bottom-q.width/2).lineTo(t.right,t.bottom-q.width/2)),a&&o.append(new N.Path({stroke:{width:$.width,color:$.color}}).moveTo(t.left+$.width/2,t.top).lineTo(t.left+$.width/2,t.bottom)),void(s&&o.append(new N.Path({stroke:{width:G.width,color:G.color}}).moveTo(t.right-G.width/2,t.top).lineTo(t.right-G.width/2,t.bottom)));l(L.color,t.width,L.width,$.width,G.width,Y,K,[1,0,0,1,t.left,t.top]),l(q.color,t.width,q.width,G.width,$.width,X,Q,[-1,0,0,-1,t.right,t.bottom]),l($.color,t.height,$.width,q.width,L.width,r(Q),r(Y),[0,-1,1,0,t.left,t.bottom]),l(G.color,t.height,G.width,L.width,q.width,r(K),r(X),[0,1,-1,0,t.right,t.top])}}var v,y,b,A,P,I,F,R,B=u(e),L=f(B,"top"),G=f(B,"right"),q=f(B,"bottom"),$=f(B,"left"),Y=m(B,"top-left"),K=m(B,"top-right"),Q=m(B,"bottom-left"),X=m(B,"bottom-right"),J=h(B,"direction"),Z=h(B,"background-color");for(Z=r(Z),v=i(h(B,"background-image")),y=i(h(B,"background-repeat")),b=i(h(B,"background-position")),A=i(h(B,"background-origin")),P=i(h(B,"background-size")),W.msie&&10>W.version&&(b=i(e.currentStyle.backgroundPosition)),I=_(e.getBoundingClientRect(),"border-*-width",e),function(){var e,n,i,r,a,s,l,d=h(B,"clip"),u=/^\s*rect\((.*)\)\s*$/.exec(d);u&&(e=u[1].split(/[ ,]+/g),n="auto"==e[0]?I.top:t(e[0])+I.top,i="auto"==e[1]?I.right:t(e[1])+I.left,r="auto"==e[2]?I.bottom:t(e[2])+I.top,a="auto"==e[3]?I.left:t(e[3])+I.left,s=new N.Group,l=(new N.Path).moveTo(a,n).lineTo(i,n).lineTo(i,r).lineTo(a,r).close(),x(s,l),o.append(s),o=s,c(l))}(),F=e.getClientRects(),1==F.length&&(F=[e.getBoundingClientRect()]),F=s(F),R=0;F.length>R;++R)g(F[R],0===R,R==F.length-1);return function(){function t(){var t=T(e,I,"padding"),n=new N.Group;x(n,t),o.append(n),o=n,c(t)}/^(hidden|auto|scroll)/.test(h(B,"overflow"))?t():/^(hidden|auto|scroll)/.test(h(B,"overflow-x"))?t():/^(hidden|auto|scroll)/.test(h(B,"overflow-y"))&&t()}(),M(e,o)||z(e,o),o}function E(e){return function(i,r){{var o,a,s,l,c,d,u,h,p,f,g,m,v,_=r.width(),y=r.height();r.topLeft()}switch(e.type){case"linear":switch(o=null!=e.angle?e.angle:n.PI,e.to){case"top":o=0;break;case"left":o=-n.PI/2;break;case"bottom":o=n.PI;break;case"right":o=n.PI/2;break;case"top left":case"left top":o=-n.atan2(y,_);break;case"top right":case"right top":o=n.atan2(y,_);break;case"bottom left":case"left bottom":o=n.PI+n.atan2(y,_);break;case"bottom right":case"right bottom":o=n.PI-n.atan2(y,_)}e.reverse&&(o-=n.PI),o%=2*n.PI,0>o&&(o+=2*n.PI),a=n.abs(_*n.sin(o))+n.abs(y*n.cos(o)),s=n.atan(_*n.tan(o)/y),l=n.sin(s),c=n.cos(s),d=n.abs(l)+n.abs(c),u=d/2*l,h=d/2*c,o>n.PI/2&&3*n.PI/2>=o&&(u=-u,h=-h),p=[],f=0,g=e.stops.map(function(n,i){var r,o=n.percent;return o?o=t(o)/100:n.length?o=t(n.length)/a:0===i?o=0:i==e.stops.length-1&&(o=1),r={color:n.color.toCssRgba(),offset:o},null!=o?(f=o,p.forEach(function(e,t){var n=e.stop;n.offset=e.left+(f-e.left)*(t+1)/(p.length+1)}),p=[]):p.push({left:f,stop:r}),r}),m=[.5-u,.5+h],v=[.5+u,.5-h],i.append(N.Path.fromRect(r).stroke(null).fill(new N.LinearGradient({start:m,end:v,stops:g,userSpace:!1})));break;case"radial":window.console&&window.console.log&&window.console.log("Radial gradients are not yet supported in HTML renderer")}}}function M(t,n){var i,r,o,a;return t.getAttribute(kendo.attr("role"))&&(i=kendo.widgetInstance(e(t)),i&&(i.exportDOMVisual||i.exportVisual))?(r=i.exportDOMVisual?i.exportDOMVisual():i.exportVisual(),o=new N.Group,o.children.push(r),a=t.getBoundingClientRect(),o.transform(V.transform().translate(a.left,a.top)),n.append(o),!0):void 0}function P(e,t,n){var i=v(e),r=new V.Rect([i.left,i.top],[i.width,i.height]),o=new N.Image(t,r);x(o,T(e,i,"content")),n.append(o)}function I(e,n){var i=u(e),r=u(n),o=t(h(i,"z-index")),a=t(h(r,"z-index")),s=h(i,"position"),l=h(r,"position");return isNaN(o)&&isNaN(a)?/static|absolute/.test(s)&&/static|absolute/.test(l)?0:"static"==s?-1:"static"==l?1:0:isNaN(o)?0===a?0:a>0?-1:1:isNaN(a)?0===o?0:o>0?1:-1:t(o)-t(a)}function z(e,t){var n,i,r,o,a,s,l,c,d;switch(e.tagName.toLowerCase()){case"img":P(e,e.src,t);break;case"canvas":try{P(e,e.toDataURL("image/jpeg"),t)}catch(p){}break;case"textarea":case"input":break;default:for(n=[],i=[],r=[],o=[],a=e.firstChild;a;a=a.nextSibling)switch(a.nodeType){case 3:/\S/.test(a.data)&&F(e,a,t);break;case 1:s=u(a),l=h(s,"display"),c=h(s,"float"),d=h(s,"position"),"static"!=d?o.push(a):"inline"!=l?"none"!=c?i.push(a):n.push(a):r.push(a)}n.sort(I).forEach(function(e){B(e,t)}),i.sort(I).forEach(function(e){B(e,t)}),r.sort(I).forEach(function(e){B(e,t)}),o.sort(I).forEach(function(e){B(e,t)})}}function F(e,n,i){function r(){for(var e,t,i;!/\S/.test(s.charAt(p));){if(p>=f)return!0;p++}for(l.setStart(n,p),e=0;++p<=f;)if(++e,l.setEnd(n,p),e>1&&(d&&/\s/.test(s.charAt(p-1))||l.getClientRects().length>1)){l.setEnd(n,--p);break}t=l.getClientRects()[0],i=(""+l).replace(/\s+$/,""),o(i,t)}function o(e,t){var n,r,o;e=e.replace(/[\r\n ]+/g," "),W.msie&&!isNaN(m)&&(n=N.util.measureText(e,{font:v}),r=(t.top+t.bottom-n.height)/2,t={top:r,right:t.right,bottom:r+n.height,left:t.left,height:n.height,width:t.right-t.left}),o=new N.Text(e,new V.Point(t.left,t.top),{font:v,fill:{color:_}}),i.append(o),a(t)}function a(e){function t(t,n){var r,o;t&&(r=g/12,o=new N.Path({stroke:{width:r,color:t}}),n-=r,o.moveTo(e.left,n).lineTo(e.right,n),i.append(o))}t(O.underline,e.bottom),t(O["line-through"],e.bottom-e.height/2.7),t(O.overline,e.top)}var s,l,c,d,p,f,g,m,v,_,y=u(e);if(!(t(h(y,"text-indent"))<-500)&&(s=n.data,l=e.ownerDocument.createRange(),c=h(y,"text-align"),d="justify"==c,p=0,f=/\S\s*$/.exec(n.data).index+1,g=h(y,"font-size"),m=h(y,"line-height"),v=[h(y,"font-style"),h(y,"font-variant"),h(y,"font-weight"),g,h(y,"font-family")].join(" "),g=t(g),m=t(m),0!==g))for(_=h(y,"color");!r(););}function R(e,t){var n,i,r=O._stackingContext.group,o=r.children;for(n=0;o.length>n&&!(null!=o[n]._dom_zIndex&&o[n]._dom_zIndex>t);++n);return i=new N.Group,r.insertAt(i,n),i._dom_zIndex=t,O._clipbox&&i.clip(N.Path.fromRect(O._clipbox)),i}function B(n,i){var r,o,a,c,d,f,m;/^(style|script|link|meta|iframe|svg)$/i.test(n.tagName)||null!=O._clipbox&&(r=u(n),o=t(h(r,"opacity")),a=h(r,"visibility"),c=h(r,"display"),0!==o&&"hidden"!=a&&"none"!=c&&(d=y(r),m=h(r,"z-index"),(d||1>o)&&"auto"==m&&(m=0),"auto"!=m?f=R(i,m):(f=new N.Group,i.append(f)),f.DEBUG=e(n).data("debug"),1>o&&f.opacity(o*f.opacity()),s(n,r,f),d?g(n,function(){var e,t,i,o;p(n.style,"transform","none","important"),p(n.style,"transition","none","important"),"static"==h(r,"position")&&p(n.style,"position","relative","important"),e=n.getBoundingClientRect(),t=e.left+d.origin[0],i=e.top+d.origin[1],o=[1,0,0,1,-t,-i],o=L(o,d.matrix),o=L(o,[1,0,0,1,t,i]),o=k(f,o),O._matrix=O._matrix.multiplyCopy(o),A(n,f)}):A(n,f),l()))}function L(e,t){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=t[0],c=t[1],d=t[2],u=t[3],h=t[4],p=t[5];return[n*l+i*d,n*c+i*u,r*l+o*d,r*c+o*u,a*l+s*d+h,a*c+s*u+p]}var O,H,N=kendo.drawing,V=kendo.geometry,U=Array.prototype.slice,W=kendo.support.browser,j={};N.drawDOM=function(t){var n=e.Deferred();return t=e(t)[0],t?o(t,function(){var e=new N.Group,i=t.getBoundingClientRect();k(e,[1,0,0,1,-i.left,-i.top]),O._clipbox=!1,O._matrix=V.Matrix.unit(),O._stackingContext={element:t,group:e},B(t,e),n.resolve(e)}):n.reject("No element to export"),n.promise()},O={},H=function(){var e=/^((-webkit-|-moz-|-o-|-ms-)?linear-gradient\s*)\(/,t=/^([-0-9.]+%)/,n=/^([-0-9.]+px)/,i=/^(left|right|top|bottom|to|center)\W/,r=/^([-0-9.]+(deg|grad|rad|turn))/,o=/^(\s+)/,a=/^(\()/,s=/^(\))/,l=/^(,)/;return function(c){function d(){var e=o.exec(c);e&&(c=c.substr(e[1].length))}function u(e){d();var t=e.exec(c);return t?(c=c.substr(t[1].length),t[1]):void 0}function h(){var e,i,r=kendo.parseColor(c,!0);return r?(c=c.substr(r.match[0].length),r=r.toRGB(),(e=u(n))||(i=u(t)),{color:r,length:e,percent:i}):void 0}function p(e){var n,o,d,p,g,m,v=[],_=!1;if(u(a)){for(n=u(r),n?(n=b(n),u(l)):(o=u(i),"to"==o?o=u(i):o&&/^-/.test(e)&&(_=!0),d=u(i),u(l)),/-moz-/.test(e)&&null==n&&null==o&&(p=u(t),g=u(t),_=!0,"0%"==p?o="left":"100%"==p&&(o="right"),"0%"==g?d="top":"100%"==g&&(d="bottom"),u(l));c&&!u(s)&&(m=h());)v.push(m),u(l);return{type:"linear",angle:n,to:o&&d?o+" "+d:o?o:d?d:null,stops:v,reverse:_,orig:f}}}var f=c,g=u(e);return g?p(g):void 0}}()}(window.kendo.jQuery,parseFloat,Math),function(e){var t=e.noop,n=window.kendo,i=n.Class,r=n.util,o=n.animationFrame,a=n.deepExtend,s=i.extend({init:function(e,t){var n=this;n.options=a({},n.options,t),n.element=e},options:{duration:500,easing:"swing"},setup:t,step:t,play:function(){var t=this,n=t.options,i=e.easing[n.easing],a=n.duration,s=n.delay||0,l=r.now()+s,c=l+a;0===a?(t.step(1),t.abort()):setTimeout(function(){var e=function(){var n,s,d,u;t._stopped||(n=r.now(),s=r.limitValue(n-l,0,a),d=s/a,u=i(d,s,0,1,a),t.step(u),c>n?o(e):t.abort())};e()},s)},abort:function(){this._stopped=!0},destroy:function(){this.abort()}}),l=function(){this._items=[]};l.prototype={register:function(e,t){this._items.push({name:e,type:t})},create:function(e,t){var n,i,r,o=this._items;if(t&&t.type)for(i=t.type.toLowerCase(),r=0;o.length>r;r++)if(o[r].name.toLowerCase()===i){n=o[r];break}return n?new n.type(e,t):void 0}},l.current=new l,s.create=function(e,t,n){return l.current.create(e,t,n)},a(n.drawing,{Animation:s,AnimationFactory:l})}(window.kendo.jQuery,Math),function(e){function t(t){var n,i=s.ui.validator.ruleResolvers||{},r={};for(n in i)e.extend(!0,r,i[n].resolve(t));return r}function n(e){return e.replace(/&amp/g,"&amp;").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")}function i(e){return e=(e+"").split("."),e.length>1?e[1].length:0}function r(t){return e(e.parseHTML?e.parseHTML(t):t)}function o(t,n){var i,r,o,a,l=e();for(o=0,a=t.length;a>o;o++)i=t[o],u.test(i.className)&&(r=i.getAttribute(s.attr("for")),r===n&&(l=l.add(i)));return l}var a,s=window.kendo,l=s.ui.Widget,c=".kendoValidator",d="k-invalid-msg",u=RegExp(d,"i"),h="k-invalid",p=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,f=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,g=":input:not(:button,[type=submit],[type=reset],[disabled],[readonly])",m=":checkbox:not([disabled],[readonly])",v="[type=number],[type=range]",_="blur",y="name",w="form",b="novalidate",k=e.proxy,x=function(e,t){return"string"==typeof t&&(t=RegExp("^(?:"+t+")$")),t.test(e)},C=function(e,t,n){var i=e.val();return e.filter(t).length&&""!==i?x(i,n):!0},S=function(e,t){return e.length?null!=e[0].attributes[t]:!1};s.ui.validator||(s.ui.validator={rules:{},messages:{}}),a=l.extend({init:function(n,i){var r=this,o=t(n),a="["+s.attr("validate")+"!=false]";i=i||{},i.rules=e.extend({},s.ui.validator.rules,o.rules,i.rules),i.messages=e.extend({},s.ui.validator.messages,o.messages,i.messages),l.fn.init.call(r,n,i),r._errorTemplate=s.template(r.options.errorTemplate),r.element.is(w)&&r.element.attr(b,b),r._inputSelector=g+a,r._checkboxSelector=m+a,r._errors={},r._attachEvents(),r._isValidated=!1},events:["validate","change"],options:{name:"Validator",errorTemplate:'<span class="k-widget k-tooltip k-tooltip-validation"><span class="k-icon k-warning"> </span> #=message#</span>',messages:{required:"{0} is required",pattern:"{0} is not valid",min:"{0} should be greater than or equal to {1}",max:"{0} should be smaller than or equal to {1}",step:"{0} is not valid",email:"{0} is not valid email",url:"{0} is not valid URL",date:"{0} is not valid date"},rules:{required:function(e){var t=e.filter("[type=checkbox]").length&&!e.is(":checked"),n=e.val();return!(S(e,"required")&&(""===n||!n||t))},pattern:function(e){return e.filter("[type=text],[type=email],[type=url],[type=tel],[type=search],[type=password]").filter("[pattern]").length&&""!==e.val()?x(e.val(),e.attr("pattern")):!0},min:function(e){if(e.filter(v+",["+s.attr("type")+"=number]").filter("[min]").length&&""!==e.val()){var t=parseFloat(e.attr("min"))||0,n=s.parseFloat(e.val());return n>=t}return!0},max:function(e){if(e.filter(v+",["+s.attr("type")+"=number]").filter("[max]").length&&""!==e.val()){var t=parseFloat(e.attr("max"))||0,n=s.parseFloat(e.val());return t>=n}return!0},step:function(e){if(e.filter(v+",["+s.attr("type")+"=number]").filter("[step]").length&&""!==e.val()){var t,n=parseFloat(e.attr("min"))||0,r=parseFloat(e.attr("step"))||1,o=parseFloat(e.val()),a=i(r);return a?(t=Math.pow(10,a),(o-n)*t%(r*t)/Math.pow(100,a)===0):(o-n)%r===0}return!0},email:function(e){return C(e,"[type=email],["+s.attr("type")+"=email]",p)},url:function(e){return C(e,"[type=url],["+s.attr("type")+"=url]",f)},date:function(e){return e.filter("[type^=date],["+s.attr("type")+"=date]").length&&""!==e.val()?null!==s.parseDate(e.val(),e.attr(s.attr("format"))):!0}},validateOnBlur:!0},destroy:function(){l.fn.destroy.call(this),this.element.off(c)},value:function(){return this._isValidated?0===this.errors().length:!1},_submit:function(e){return this.validate()?!0:(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1)},_checkElement:function(e){var t=this.value();this.validateInput(e),this.value()!==t&&this.trigger("change")},_attachEvents:function(){var t=this;t.element.is(w)&&t.element.on("submit"+c,k(t._submit,t)),t.options.validateOnBlur&&(t.element.is(g)?(t.element.on(_+c,function(){t._checkElement(t.element)}),t.element.is(m)&&t.element.on("click"+c,function(){t._checkElement(t.element)})):(t.element.on(_+c,t._inputSelector,function(){t._checkElement(e(this))}),t.element.on("click"+c,t._checkboxSelector,function(){t._checkElement(e(this))})))},validate:function(){var e,t,n,i,r=!1,o=this.value();if(this._errors={},this.element.is(g))r=this.validateInput(this.element);else{for(i=!1,e=this.element.find(this._inputSelector),t=0,n=e.length;n>t;t++)this.validateInput(e.eq(t))||(i=!0);r=!i}return this.trigger("validate",{valid:r}),o!==r&&this.trigger("change"),r},validateInput:function(t){var i,o,a,l,c,u,p,f,g;return t=e(t),this._isValidated=!0,i=this,o=i._errorTemplate,a=i._checkValidity(t),l=a.valid,c="."+d,u=t.attr(y)||"",p=i._findMessageContainer(u).add(t.next(c).filter(function(){var t=e(this);return t.filter("["+s.attr("for")+"]").length?t.attr(s.attr("for"))===u:!0})).hide(),t.removeAttr("aria-invalid"),l?delete i._errors[u]:(f=i._extractMessage(t,a.key),i._errors[u]=f,g=r(o({message:n(f)})),i._decorateMessageContainer(g,u),p.replaceWith(g).length||g.insertAfter(t),g.show(),t.attr("aria-invalid",!0)),t.toggleClass(h,!l),l},hideMessages:function(){var e=this,t="."+d,n=e.element;n.is(g)?n.next(t).hide():n.find(t).hide()},_findMessageContainer:function(t){var n,i,r,a=s.ui.validator.messageLocators,l=e();for(i=0,r=this.element.length;r>i;i++)l=l.add(o(this.element[i].getElementsByTagName("*"),t));for(n in a)l=l.add(a[n].locate(this.element,t));return l},_decorateMessageContainer:function(e,t){var n,i=s.ui.validator.messageLocators;e.addClass(d).attr(s.attr("for"),t||"");for(n in i)i[n].decorate(e,t);e.attr("role","alert")
},_extractMessage:function(e,t){var n=this,i=n.options.messages[t],r=e.attr(y);return i=s.isFunction(i)?i(e):i,s.format(e.attr(s.attr(t+"-msg"))||e.attr("validationMessage")||e.attr("title")||i||"",r,e.attr(t))},_checkValidity:function(e){var t,n=this.options.rules;for(t in n)if(!n[t].call(this,e))return{valid:!1,key:t};return{valid:!0}},errors:function(){var e,t=[],n=this._errors;for(e in n)t.push(n[e]);return t}}),s.ui.plugin(a)}(window.kendo.jQuery),function(e){function t(e,t){var n=e.x.location,i=e.y.location,r=t.x.location,o=t.y.location,a=n-r,s=i-o;return{center:{x:(n+r)/2,y:(i+o)/2},distance:Math.sqrt(a*a+s*s)}}function n(e){var t,n,i,r=[],a=e.originalEvent,s=e.currentTarget,l=0;if(e.api)r.push({id:2,event:e,target:e.target,currentTarget:e.target,location:e,type:"api"});else if(e.type.match(/touch/))for(n=a?a.changedTouches:[],t=n.length;t>l;l++)i=n[l],r.push({location:i,event:e,target:i.target,currentTarget:s,id:i.identifier,type:"touch"});else r.push(o.pointers||o.msPointers?{location:a,event:e,target:e.target,currentTarget:s,id:a.pointerId,type:"pointer"}:{id:1,event:e,target:e.target,currentTarget:s,location:e,type:"mouse"});return r}function i(e){for(var t=r.eventMap.up.split(" "),n=0,i=t.length;i>n;n++)e(t[n])}var r=window.kendo,o=r.support,a=window.document,s=r.Class,l=r.Observable,c=e.now,d=e.extend,u=o.mobileOS,h=u&&u.android,p=800,f=o.browser.msie?5:0,g="press",m="hold",v="select",_="start",y="move",w="end",b="cancel",k="tap",x="release",C="gesturestart",S="gesturechange",T="gestureend",D="gesturetap",A={api:0,touch:0,mouse:9,pointer:9},E=s.extend({init:function(e,t){var n=this;n.axis=e,n._updateLocationData(t),n.startLocation=n.location,n.velocity=n.delta=0,n.timeStamp=c()},move:function(e){var t=this,n=e["page"+t.axis],i=c(),r=i-t.timeStamp||1;(n||!h)&&(t.delta=n-t.location,t._updateLocationData(e),t.initialDelta=n-t.startLocation,t.velocity=t.delta/r,t.timeStamp=i)},_updateLocationData:function(e){var t=this,n=t.axis;t.location=e["page"+n],t.client=e["client"+n],t.screen=e["screen"+n]}}),M=s.extend({init:function(e,t,n){d(this,{x:new E("X",n.location),y:new E("Y",n.location),type:n.type,threshold:e.threshold||A[n.type],userEvents:e,target:t,currentTarget:n.currentTarget,initialTouch:n.target,id:n.id,pressEvent:n,_moved:!1,_finished:!1})},press:function(){this._holdTimeout=setTimeout(e.proxy(this,"_hold"),this.userEvents.minHold),this._trigger(g,this.pressEvent)},_hold:function(){this._trigger(m,this.pressEvent)},move:function(e){var t=this;if(!t._finished){if(t.x.move(e.location),t.y.move(e.location),!t._moved){if(t._withinIgnoreThreshold())return;if(P.current&&P.current!==t.userEvents)return t.dispose();t._start(e)}t._finished||t._trigger(y,e)}},end:function(e){var t=this;t.endTime=c(),t._finished||(t._finished=!0,t._trigger(x,e),t._moved?t._trigger(w,e):t._trigger(k,e),clearTimeout(t._holdTimeout),t.dispose())},dispose:function(){var t=this.userEvents,n=t.touches;this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout),n.splice(e.inArray(this,n),1)},skip:function(){this.dispose()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(e){clearTimeout(this._holdTimeout),this.startTime=c(),this._moved=!0,this._trigger(_,e)},_trigger:function(e,t){var n=this,i=t.event,r={touch:n,x:n.x,y:n.y,target:n.target,event:i};n.userEvents.notify(e,r)&&i.preventDefault()},_withinIgnoreThreshold:function(){var e=this.x.initialDelta,t=this.y.initialDelta;return Math.sqrt(e*e+t*t)<=this.threshold}}),P=l.extend({init:function(t,n){var s,c,u,h=this,A=r.guid();n=n||{},s=h.filter=n.filter,h.threshold=n.threshold||f,h.minHold=n.minHold||p,h.touches=[],h._maxTouches=n.multiTouch?2:1,h.allowSelection=n.allowSelection,h.captureUpIfMoved=n.captureUpIfMoved,h.eventNS=A,t=e(t).handler(h),l.fn.init.call(h),d(h,{element:t,surface:e(n.global&&!o.touch?a.documentElement:n.surface||t),stopPropagation:n.stopPropagation,pressed:!1}),h.surface.handler(h).on(r.applyEventMap("move",A),"_move").on(r.applyEventMap("up cancel",A),"_end"),t.on(r.applyEventMap("down",A),s,"_start"),(o.pointers||o.msPointers)&&t.css("-ms-touch-action","pinch-zoom double-tap-zoom"),n.preventDragEvent&&t.on(r.applyEventMap("dragstart",A),r.preventDefault),t.on(r.applyEventMap("mousedown",A),s,{root:t},"_select"),h.captureUpIfMoved&&o.eventCapture&&(c=h.surface[0],u=e.proxy(h.preventIfMoving,h),i(function(e){c.addEventListener(e,u,!0)})),h.bind([g,m,k,_,y,w,x,b,C,S,T,D,v],n)},preventIfMoving:function(e){this._isMoved()&&e.preventDefault()},destroy:function(){var e,t=this;t._destroyed||(t._destroyed=!0,t.captureUpIfMoved&&o.eventCapture&&(e=t.surface[0],i(function(n){e.removeEventListener(n,t.preventIfMoving)})),t.element.kendoDestroy(t.eventNS),t.surface.kendoDestroy(t.eventNS),t.element.removeData("handler"),t.surface.removeData("handler"),t._disposeAll(),t.unbind(),delete t.surface,delete t.element,delete t.currentTarget)},capture:function(){P.current=this},cancel:function(){this._disposeAll(),this.trigger(b)},notify:function(e,n){var i=this,r=i.touches;if(this._isMultiTouch()){switch(e){case y:e=S;break;case w:e=T;break;case k:e=D}d(n,{touches:r},t(r[0],r[1]))}return this.trigger(e,d(n,{type:e}))},press:function(e,t,n){this._apiCall("_start",e,t,n)},move:function(e,t){this._apiCall("_move",e,t)},end:function(e,t){this._apiCall("_end",e,t)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){for(var e=this.touches;e.length>0;)e.pop().dispose()},_isMoved:function(){return e.grep(this.touches,function(e){return e.isMoved()}).length},_select:function(e){(!this.allowSelection||this.trigger(v,{event:e}))&&e.preventDefault()},_start:function(t){var i,r,o=this,a=0,s=o.filter,l=n(t),c=l.length,d=t.which;if(!(d&&d>1||o._maxTouchesReached()))for(P.current=null,o.currentTarget=t.currentTarget,o.stopPropagation&&t.stopPropagation();c>a&&!o._maxTouchesReached();a++)r=l[a],i=s?e(r.currentTarget):o.element,i.length&&(r=new M(o,i,r),o.touches.push(r),r.press(),o._isMultiTouch()&&o.notify("gesturestart",{}))},_move:function(e){this._eachTouch("move",e)},_end:function(e){this._eachTouch("end",e)},_eachTouch:function(e,t){var i,r,o,a,s=this,l={},c=n(t),d=s.touches;for(i=0;d.length>i;i++)r=d[i],l[r.id]=r;for(i=0;c.length>i;i++)o=c[i],a=l[o.id],a&&a[e](o)},_apiCall:function(t,n,i,r){this[t]({api:!0,pageX:n,pageY:i,clientX:n,clientY:i,target:e(r||this.element)[0],stopPropagation:e.noop,preventDefault:e.noop})}});P.defaultThreshold=function(e){f=e},P.minHold=function(e){p=e},r.getTouches=n,r.touchDelta=t,r.UserEvents=P}(window.kendo.jQuery),function(e,t){function n(t,n){try{return e.contains(t,n)||t==n}catch(i){return!1}}function i(e,t){return parseInt(e.css(t),10)||0}function r(e,t){return Math.min(Math.max(e,t.min),t.max)}function o(e,t){var n=k(e),r=n.left+i(e,"borderLeftWidth")+i(e,"paddingLeft"),o=n.top+i(e,"borderTopWidth")+i(e,"paddingTop"),a=r+e.width()-t.outerWidth(!0),s=o+e.height()-t.outerHeight(!0);return{x:{min:r,max:a},y:{min:o,max:s}}}function a(e,n,i){for(var r,o,a=0,s=n&&n.length,l=i&&i.length;e&&e.parentNode;){for(a=0;s>a;a++)if(r=n[a],r.element[0]===e)return{target:r,targetElement:e};for(a=0;l>a;a++)if(o=i[a],f.matchesSelector.call(e,o.options.filter))return{target:o,targetElement:e};e=e.parentNode}return t}var s,l,c,d,u,h,p=window.kendo,f=p.support,g=window.document,m=p.Class,v=p.ui.Widget,_=p.Observable,y=p.UserEvents,w=e.proxy,b=e.extend,k=p.getOffset,x={},C={},S={},T=p.elementUnderCursor,D="keyup",A="change",E="dragstart",M="hold",P="drag",I="dragend",z="dragcancel",F="dragenter",R="dragleave",B="drop",L=_.extend({init:function(t,n){var i=this,r=t[0];i.capture=!1,r.addEventListener?(e.each(p.eventMap.down.split(" "),function(){r.addEventListener(this,w(i._press,i),!0)}),e.each(p.eventMap.up.split(" "),function(){r.addEventListener(this,w(i._release,i),!0)})):(e.each(p.eventMap.down.split(" "),function(){r.attachEvent(this,w(i._press,i))}),e.each(p.eventMap.up.split(" "),function(){r.attachEvent(this,w(i._release,i))})),_.fn.init.call(i),i.bind(["press","release"],n||{})},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1},_press:function(e){var t=this;t.trigger("press"),t.capture&&e.preventDefault()},_release:function(e){var t=this;t.trigger("release"),t.capture&&(e.preventDefault(),t.cancelCapture())}}),O=_.extend({init:function(t){var n=this;_.fn.init.call(n),n.forcedEnabled=!1,e.extend(n,t),n.scale=1,n.horizontal?(n.measure="offsetWidth",n.scrollSize="scrollWidth",n.axis="x"):(n.measure="offsetHeight",n.scrollSize="scrollHeight",n.axis="y")},makeVirtual:function(){e.extend(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},virtualSize:function(e,t){(this._virtualMin!==e||this._virtualMax!==t)&&(this._virtualMin=e,this._virtualMax=t,this.update())},outOfBounds:function(e){return e>this.max||this.min>e},forceEnabled:function(){this.forcedEnabled=!0},getSize:function(){return this.container[0][this.measure]},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(e){this.scale=e},update:function(e){var t=this,n=t.virtual?t._virtualMax:t.getTotal(),i=n*t.scale,r=t.getSize();0!==n&&(t.max=t.virtual?-t._virtualMin:0,t.size=r,t.total=i,t.min=Math.min(t.max,r-i),t.minScale=r/n,t.centerOffset=(i-r)/2,t.enabled=t.forcedEnabled||i>r,e||t.trigger(A,t))}}),H=_.extend({init:function(e){var t=this;_.fn.init.call(t),t.x=new O(b({horizontal:!0},e)),t.y=new O(b({horizontal:!1},e)),t.container=e.container,t.forcedMinScale=e.minScale,t.maxScale=e.maxScale||100,t.bind(A,e)},rescale:function(e){this.x.rescale(e),this.y.rescale(e),this.refresh()},centerCoordinates:function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},refresh:function(){var e=this;e.x.update(),e.y.update(),e.enabled=e.x.enabled||e.y.enabled,e.minScale=e.forcedMinScale||Math.min(e.x.minScale,e.y.minScale),e.fitScale=Math.max(e.x.minScale,e.y.minScale),e.trigger(A)}}),N=_.extend({init:function(e){var t=this;b(t,e),_.fn.init.call(t)},outOfBounds:function(){return this.dimension.outOfBounds(this.movable[this.axis])},dragMove:function(e){var t=this,n=t.dimension,i=t.axis,r=t.movable,o=r[i]+e;n.enabled&&((n.min>o&&0>e||o>n.max&&e>0)&&(e*=t.resistance),r.translateAxis(i,e),t.trigger(A,t))}}),V=m.extend({init:function(e){var t,n,i,r,o=this;b(o,{elastic:!0},e),i=o.elastic?.5:0,r=o.movable,o.x=t=new N({axis:"x",dimension:o.dimensions.x,resistance:i,movable:r}),o.y=n=new N({axis:"y",dimension:o.dimensions.y,resistance:i,movable:r}),o.userEvents.bind(["move","end","gesturestart","gesturechange"],{gesturestart:function(e){o.gesture=e,o.offset=o.dimensions.container.offset()},gesturechange:function(e){var i,a,s,l=o.gesture,c=l.center,d=e.center,u=e.distance/l.distance,h=o.dimensions.minScale,p=o.dimensions.maxScale;h>=r.scale&&1>u&&(u+=.8*(1-u)),r.scale*u>=p&&(u=p/r.scale),a=r.x+o.offset.left,s=r.y+o.offset.top,i={x:(a-c.x)*u+d.x-a,y:(s-c.y)*u+d.y-s},r.scaleWith(u),t.dragMove(i.x),n.dragMove(i.y),o.dimensions.rescale(r.scale),o.gesture=e,e.preventDefault()},move:function(e){e.event.target.tagName.match(/textarea|input/i)||(t.dimension.enabled||n.dimension.enabled?(t.dragMove(e.x.delta),n.dragMove(e.y.delta),e.preventDefault()):e.touch.skip())},end:function(e){e.preventDefault()}})}}),U=f.transitions.prefix+"Transform";l=f.hasHW3D?function(e,t,n){return"translate3d("+e+"px,"+t+"px,0) scale("+n+")"}:function(e,t,n){return"translate("+e+"px,"+t+"px) scale("+n+")"},c=_.extend({init:function(t){var n=this;_.fn.init.call(n),n.element=e(t),n.element[0].style.webkitTransformOrigin="left top",n.x=0,n.y=0,n.scale=1,n._saveCoordinates(l(n.x,n.y,n.scale))},translateAxis:function(e,t){this[e]+=t,this.refresh()},scaleTo:function(e){this.scale=e,this.refresh()},scaleWith:function(e){this.scale*=e,this.refresh()},translate:function(e){this.x+=e.x,this.y+=e.y,this.refresh()},moveAxis:function(e,t){this[e]=t,this.refresh()},moveTo:function(e){b(this,e),this.refresh()},refresh:function(){var e,t=this,n=t.x,i=t.y;t.round&&(n=Math.round(n),i=Math.round(i)),e=l(n,i,t.scale),e!=t.coordinates&&(p.support.browser.msie&&10>p.support.browser.version?(t.element[0].style.position="absolute",t.element[0].style.left=t.x+"px",t.element[0].style.top=t.y+"px"):t.element[0].style[U]=e,t._saveCoordinates(e),t.trigger(A))},_saveCoordinates:function(e){this.coordinates=e}}),d=v.extend({init:function(e,t){var n,i=this;v.fn.init.call(i,e,t),n=i.options.group,n in C?C[n].push(i):C[n]=[i]},events:[F,R,B],options:{name:"DropTarget",group:"default"},destroy:function(){var e,t=this.options.group,n=C[t]||S[t];if(n.length>1){for(v.fn.destroy.call(this),e=0;n.length>e;e++)if(n[e]==this){n.splice(e,1);break}}else d.destroyGroup(t)},_trigger:function(e,n){var i=this,r=x[i.options.group];return r?i.trigger(e,b({},n.event,{draggable:r,dropTarget:n.dropTarget})):t},_over:function(e){this._trigger(F,e)},_out:function(e){this._trigger(R,e)},_drop:function(e){var t=this,n=x[t.options.group];n&&(n.dropped=!t._trigger(B,e))}}),d.destroyGroup=function(e){var t,n=C[e]||S[e];if(n){for(t=0;n.length>t;t++)v.fn.destroy.call(n[t]);n.length=0,delete C[e],delete S[e]}},d._cache=C,u=d.extend({init:function(e,t){var n,i=this;v.fn.init.call(i,e,t),n=i.options.group,n in S?S[n].push(i):S[n]=[i]},options:{name:"DropTargetArea",group:"default",filter:null}}),h=v.extend({init:function(e,t){var n=this;v.fn.init.call(n,e,t),n._activated=!1,n.userEvents=new y(n.element,{global:!0,allowSelection:!0,filter:n.options.filter,threshold:n.options.distance,start:w(n._start,n),hold:w(n._hold,n),move:w(n._drag,n),end:w(n._end,n),cancel:w(n._cancel,n),select:w(n._select,n)}),n._afterEndHandler=w(n._afterEnd,n),n._captureEscape=w(n._captureEscape,n)},events:[M,E,P,I,z],options:{name:"Draggable",distance:p.support.touch?0:5,group:"default",cursorOffset:null,axis:null,container:null,filter:null,ignore:null,holdToDrag:!1,dropped:!1},cancelHold:function(){this._activated=!1},_captureEscape:function(e){var t=this;e.keyCode===p.keys.ESC&&(t._trigger(z,{event:e}),t.userEvents.cancel())},_updateHint:function(t){var n,i=this,o=i.options,a=i.boundaries,s=o.axis,l=i.options.cursorOffset;l?n={left:t.x.location+l.left,top:t.y.location+l.top}:(i.hintOffset.left+=t.x.delta,i.hintOffset.top+=t.y.delta,n=e.extend({},i.hintOffset)),a&&(n.top=r(n.top,a.y),n.left=r(n.left,a.x)),"x"===s?delete n.top:"y"===s&&delete n.left,i.hint.css(n)},_shouldIgnoreTarget:function(t){var n=this.options.ignore;return n&&e(t).is(n)},_select:function(e){this._shouldIgnoreTarget(e.event.target)||e.preventDefault()},_start:function(n){var i,r=this,a=r.options,s=a.container,l=a.hint;return this._shouldIgnoreTarget(n.touch.initialTouch)||a.holdToDrag&&!r._activated?(r.userEvents.cancel(),t):(r.currentTarget=n.target,r.currentTargetOffset=k(r.currentTarget),l&&(r.hint&&r.hint.stop(!0,!0).remove(),r.hint=p.isFunction(l)?e(l.call(r,r.currentTarget)):l,i=k(r.currentTarget),r.hintOffset=i,r.hint.css({position:"absolute",zIndex:2e4,left:i.left,top:i.top}).appendTo(g.body),r.angular("compile",function(){return r.hint.removeAttr("ng-repeat"),{elements:r.hint.get(),scopeFrom:n.target}})),x[a.group]=r,r.dropped=!1,s&&(r.boundaries=o(s,r.hint)),r._trigger(E,n)&&(r.userEvents.cancel(),r._afterEnd()),r.userEvents.capture(),e(g).on(D,r._captureEscape),t)},_hold:function(e){this.currentTarget=e.target,this._trigger(M,e)?this.userEvents.cancel():this._activated=!0},_drag:function(n){var i=this;n.preventDefault(),i._withDropTarget(n,function(i,r){if(!i)return s&&(s._trigger(R,b(n,{dropTarget:e(s.targetElement)})),s=null),t;if(s){if(r===s.targetElement)return;s._trigger(R,b(n,{dropTarget:e(s.targetElement)}))}i._trigger(F,b(n,{dropTarget:e(r)})),s=b(i,{targetElement:r})}),i._trigger(P,b(n,{dropTarget:s})),i.hint&&i._updateHint(n)},_end:function(t){var n=this;n._withDropTarget(t,function(n,i){n&&(n._drop(b({},t,{dropTarget:e(i)})),s=null)}),n._trigger(I,t),n._cancel(t.event)},_cancel:function(){var e=this;e._activated=!1,e.hint&&!e.dropped?setTimeout(function(){e.hint.stop(!0,!0).animate(e.currentTargetOffset,"fast",e._afterEndHandler)},0):e._afterEnd()},_trigger:function(e,t){var n=this;return n.trigger(e,b({},t.event,{x:t.x,y:t.y,currentTarget:n.currentTarget,dropTarget:t.dropTarget}))},_withDropTarget:function(e,t){var i,r,o=this,s=o.options,l=C[s.group],c=S[s.group];(l&&l.length||c&&c.length)&&(i=T(e),o.hint&&n(o.hint[0],i)&&(o.hint.hide(),i=T(e),i||(i=T(e)),o.hint.show()),r=a(i,l,c),r?t(r.target,r.targetElement):t())},destroy:function(){var e=this;v.fn.destroy.call(e),e._afterEnd(),e.userEvents.destroy(),e.currentTarget=null},_afterEnd:function(){var t=this;t.hint&&t.hint.remove(),delete x[t.options.group],t.trigger("destroy"),e(g).off(D,t._captureEscape)}}),p.ui.plugin(d),p.ui.plugin(u),p.ui.plugin(h),p.TapCapture=L,p.containerBoundaries=o,b(p.ui,{Pane:V,PaneDimensions:H,Movable:c})}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.mobile,r=n.effects,o=i.ui,a=e.proxy,s=e.extend,l=o.Widget,c=n.Class,d=n.ui.Movable,u=n.ui.Pane,h=n.ui.PaneDimensions,p=r.Transition,f=r.Animation,g=Math.abs,m=500,v=.7,_=.96,y=10,w=55,b=.5,k=5,x="km-scroller-release",C="km-scroller-refresh",S="pull",T="change",D="resize",A="scroll",E=2,M=f.extend({init:function(e){var t=this;f.fn.init.call(t),s(t,e),t.userEvents.bind("gestureend",a(t.start,t)),t.tapCapture.bind("press",a(t.cancel,t))},enabled:function(){return this.dimensions.minScale>this.movable.scale},done:function(){return.01>this.dimensions.minScale-this.movable.scale},tick:function(){var e=this.movable;e.scaleWith(1.1),this.dimensions.rescale(e.scale)},onEnd:function(){var e=this.movable;e.scaleTo(this.dimensions.minScale),this.dimensions.rescale(e.scale)}}),P=f.extend({init:function(e){var t=this;f.fn.init.call(t),s(t,e,{transition:new p({axis:e.axis,movable:e.movable,onEnd:function(){t._end()}})}),t.tapCapture.bind("press",function(){t.cancel()}),t.userEvents.bind("end",a(t.start,t)),t.userEvents.bind("gestureend",a(t.start,t)),t.userEvents.bind("tap",a(t.onEnd,t))},onCancel:function(){this.transition.cancel()},freeze:function(e){var t=this;t.cancel(),t._moveTo(e)},onEnd:function(){var e=this;e.paneAxis.outOfBounds()?e._snapBack():e._end()},done:function(){return g(this.velocity)<1},start:function(e){var t,n=this;n.dimension.enabled&&(n.paneAxis.outOfBounds()?n._snapBack():(t=e.touch.id===E?0:e.touch[n.axis].velocity,n.velocity=Math.max(Math.min(t*n.velocityMultiplier,w),-w),n.tapCapture.captureNext(),f.fn.start.call(n)))},tick:function(){var e=this,t=e.dimension,n=e.paneAxis.outOfBounds()?b:e.friction,i=e.velocity*=n,r=e.movable[e.axis]+i;!e.elastic&&t.outOfBounds(r)&&(r=Math.max(Math.min(r,t.max),t.min),e.velocity=0),e.movable.moveAxis(e.axis,r)},_end:function(){this.tapCapture.cancelCapture(),this.end()},_snapBack:function(){var e=this,t=e.dimension,n=e.movable[e.axis]>t.max?t.max:t.min;e._moveTo(n)},_moveTo:function(e){this.transition.moveTo({location:e,duration:m,ease:p.easeOutExpo})}}),I=f.extend({init:function(e){var t=this;n.effects.Animation.fn.init.call(this),s(t,e,{origin:{},destination:{},offset:{}})},tick:function(){this._updateCoordinates(),this.moveTo(this.origin)},done:function(){return g(this.offset.y)<k&&g(this.offset.x)<k},onEnd:function(){this.moveTo(this.destination),this.callback&&this.callback.call()},setCoordinates:function(e,t){this.offset={},this.origin=e,this.destination=t},setCallback:function(e){e&&n.isFunction(e)?this.callback=e:e=t},_updateCoordinates:function(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}}}),z=c.extend({init:function(t){var n=this,i="x"===t.axis,r=e('<div class="km-touch-scrollbar km-'+(i?"horizontal":"vertical")+'-scrollbar" />');s(n,t,{element:r,elementSize:0,movable:new d(r),scrollMovable:t.movable,alwaysVisible:t.alwaysVisible,size:i?"width":"height"}),n.scrollMovable.bind(T,a(n.refresh,n)),n.container.append(r),t.alwaysVisible&&n.show()},refresh:function(){var e=this,t=e.axis,n=e.dimension,i=n.size,r=e.scrollMovable,o=i/n.total,a=Math.round(-r[t]*o),s=Math.round(i*o);o>=1?this.element.css("display","none"):this.element.css("display",""),a+s>i?s=i-a:0>a&&(s+=a,a=0),e.elementSize!=s&&(e.element.css(e.size,s+"px"),e.elementSize=s),e.movable.moveAxis(t,a)},show:function(){this.element.css({opacity:v,visibility:"visible"})},hide:function(){this.alwaysVisible||this.element.css({opacity:0})}}),F=l.extend({init:function(i,r){var o,c,p,f,m,v,_,y,w,b=this;return l.fn.init.call(b,i,r),i=b.element,(b._native=b.options.useNative&&n.support.hasNativeScrolling)?(i.addClass("km-native-scroller").prepend('<div class="km-scroll-header"/>'),s(b,{scrollElement:i,fixedContainer:i.children().first()}),t):(i.css("overflow","hidden").addClass("km-scroll-wrapper").wrapInner('<div class="km-scroll-container"/>').prepend('<div class="km-scroll-header"/>'),o=i.children().eq(1),c=new n.TapCapture(i),p=new d(o),f=new h({element:o,container:i,forcedEnabled:b.options.zoom}),m=this.options.avoidScrolling,v=new n.UserEvents(i,{allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:b.options.zoom,start:function(t){f.refresh();var n=g(t.x.velocity),i=g(t.y.velocity),r=2*n>=i,o=e.contains(b.fixedContainer[0],t.event.target),a=2*i>=n;!o&&!m(t)&&b.enabled&&(f.x.enabled&&r||f.y.enabled&&a)?v.capture():v.cancel()}}),_=new u({movable:p,dimensions:f,userEvents:v,elastic:b.options.elastic}),y=new M({movable:p,dimensions:f,userEvents:v,tapCapture:c}),w=new I({moveTo:function(e){b.scrollTo(e.x,e.y)}}),p.bind(T,function(){b.scrollTop=-p.y,b.scrollLeft=-p.x,b.trigger(A,{scrollTop:b.scrollTop,scrollLeft:b.scrollLeft})}),b.options.mousewheelScrolling&&i.on("DOMMouseScroll mousewheel",a(this,"_wheelScroll")),s(b,{movable:p,dimensions:f,zoomSnapBack:y,animatedScroller:w,userEvents:v,pane:_,tapCapture:c,pulled:!1,enabled:!0,scrollElement:o,scrollTop:0,scrollLeft:0,fixedContainer:i.children().first()}),b._initAxis("x"),b._initAxis("y"),b._wheelEnd=function(){b._wheel=!1,b.userEvents.end(0,b._wheelY)},f.refresh(),b.options.pullToRefresh&&b._initPullToRefresh(),t)},_wheelScroll:function(e){this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);var t=n.wheelDeltaY(e);t&&(this._wheelY+=t,this.userEvents.move(0,this._wheelY)),e.preventDefault()},makeVirtual:function(){this.dimensions.y.makeVirtual()},virtualSize:function(e,t){this.dimensions.y.virtualSize(e,t)},height:function(){return this.dimensions.y.size},scrollHeight:function(){return this.scrollElement[0].scrollHeight},scrollWidth:function(){return this.scrollElement[0].scrollWidth},options:{name:"Scroller",zoom:!1,pullOffset:140,visibleScrollHints:!1,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling:function(){return!1},pullToRefresh:!1,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}},events:[S,A,D],_resize:function(){this._native||this.contentResized()},setOptions:function(e){var t=this;l.fn.setOptions.call(t,e),e.pullToRefresh&&t._initPullToRefresh()},reset:function(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))},contentResized:function(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)},zoomOut:function(){var e=this.dimensions;e.refresh(),this._scale(e.fitScale),this.movable.moveTo(e.centerCoordinates())},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},scrollTo:function(e,t){this._native?(this.scrollElement.scrollLeft(g(e)),this.scrollElement.scrollTop(g(t))):(this.dimensions.refresh(),this.movable.moveTo({x:e,y:t}))},animatedScrollTo:function(e,t,n){var i,r;this._native?this.scrollTo(e,t):(i={x:this.movable.x,y:this.movable.y},r={x:e,y:t},this.animatedScroller.setCoordinates(i,r),this.animatedScroller.setCallback(n),this.animatedScroller.start())},pullHandled:function(){var e=this;e.refreshHint.removeClass(C),e.hintContainer.html(e.pullTemplate({})),e.yinertia.onEnd(),e.xinertia.onEnd(),e.userEvents.cancel()},destroy:function(){l.fn.destroy.call(this),this.userEvents&&this.userEvents.destroy()},_scale:function(e){this.dimensions.rescale(e),this.movable.scaleTo(e)},_initPullToRefresh:function(){var e=this;e.dimensions.y.forceEnabled(),e.pullTemplate=n.template(e.options.messages.pullTemplate),e.releaseTemplate=n.template(e.options.messages.releaseTemplate),e.refreshTemplate=n.template(e.options.messages.refreshTemplate),e.scrollElement.prepend('<span class="km-scroller-pull"><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span><span class="km-template">'+e.pullTemplate({})+"</span></span>"),e.refreshHint=e.scrollElement.children().first(),e.hintContainer=e.refreshHint.children(".km-template"),e.pane.y.bind("change",a(e._paneChange,e)),e.userEvents.bind("end",a(e._dragEnd,e))},_dragEnd:function(){var e=this;e.pulled&&(e.pulled=!1,e.refreshHint.removeClass(x).addClass(C),e.hintContainer.html(e.refreshTemplate({})),e.yinertia.freeze(e.options.pullOffset/2),e.trigger("pull"))},_paneChange:function(){var e=this;e.movable.y/b>e.options.pullOffset?e.pulled||(e.pulled=!0,e.refreshHint.removeClass(C).addClass(x),e.hintContainer.html(e.releaseTemplate({}))):e.pulled&&(e.pulled=!1,e.refreshHint.removeClass(x),e.hintContainer.html(e.pullTemplate({})))},_initAxis:function(e){var t=this,n=t.movable,i=t.dimensions[e],r=t.tapCapture,o=t.pane[e],a=new z({axis:e,movable:n,dimension:i,container:t.element,alwaysVisible:t.options.visibleScrollHints});i.bind(T,function(){a.refresh()}),o.bind(T,function(){a.show()}),t[e+"inertia"]=new P({axis:e,paneAxis:o,movable:n,tapCapture:r,userEvents:t.userEvents,dimension:i,elastic:t.options.elastic,friction:t.options.friction||_,velocityMultiplier:t.options.velocityMultiplier||y,end:function(){a.hide(),t.trigger("scrollEnd",{axis:e,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft})}})}});o.plugin(F)}(window.kendo.jQuery),function(e,t){function n(e){return e.position().top+3}var i=window.kendo,r=i.ui.Widget,o=e.proxy,a=!1,s=".kendoGroupable",l="change",c=i.template('<div class="k-group-indicator" data-#=data.ns#field="${data.field}" data-#=data.ns#title="${data.title || ""}" data-#=data.ns#dir="${data.dir || "asc"}"><a href="\\#" class="k-link"><span class="k-icon k-si-arrow-${(data.dir || "asc") == "asc" ? "n" : "s"}">(sorted ${(data.dir || "asc") == "asc" ? "ascending": "descending"})</span>${data.title ? data.title: data.field}</a><a class="k-button k-button-icon k-button-bare"><span class="k-icon k-group-delete"></span></a></div>',{useWithBlock:!1}),d=function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(i.attr("title"))||t.attr(i.attr("field"))).prepend('<span class="k-icon k-drag-status k-denied" />')},u=e('<div class="k-grouping-dropclue"/>'),h=/("|\%|'|\[|\]|\$|\.|\,|\:|\;|\+|\*|\&|\!|\#|\(|\)|<|>|\=|\?|\@|\^|\{|\}|\~|\/|\||`)/g,p=r.extend({init:function(c,h){var p,f,g=this,m=i.guid(),v=o(g._intializePositions,g),_=g._dropCuePositions=[];r.fn.init.call(g,c,h),a=i.support.isRtl(c),f=a?"right":"left",g.draggable=p=g.options.draggable||new i.ui.Draggable(g.element,{filter:g.options.draggableElements,hint:d,group:m}),g.groupContainer=e(g.options.groupContainer,g.element).kendoDropTarget({group:p.options.group,dragenter:function(e){g._canDrag(e.draggable.currentTarget)&&(e.draggable.hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add"),u.css("top",n(g.groupContainer)).css(f,0).appendTo(g.groupContainer))},dragleave:function(e){e.draggable.hint.find(".k-drag-status").removeClass("k-add").addClass("k-denied"),u.remove()},drop:function(t){var n,r=t.draggable.currentTarget,o=r.attr(i.attr("field")),s=r.attr(i.attr("title")),l=g.indicator(o),c=g._dropCuePositions,d=c[c.length-1];(r.hasClass("k-group-indicator")||g._canDrag(r))&&(d?(n=g._dropCuePosition(i.getOffset(u).left+parseInt(d.element.css("marginLeft"),10)*(a?-1:1)+parseInt(d.element.css("marginRight"),10)),n&&g._canDrop(e(l),n.element,n.left)&&(n.before?n.element.before(l||g.buildIndicator(o,s)):n.element.after(l||g.buildIndicator(o,s)),g._change())):(g.groupContainer.append(g.buildIndicator(o,s)),g._change()))}}).kendoDraggable({filter:"div.k-group-indicator",hint:d,group:p.options.group,dragcancel:o(g._dragCancel,g),dragstart:function(e){var t=e.currentTarget,i=parseInt(t.css("marginLeft"),10),r=t.position(),o=a?r.left-i:r.left+t.outerWidth();v(),u.css({top:n(g.groupContainer),left:o}).appendTo(g.groupContainer),this.hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add")},dragend:function(){g._dragEnd(this)},drag:o(g._drag,g)}).on("click"+s,".k-button",function(t){t.preventDefault(),g._removeIndicator(e(this).parent())}).on("click"+s,".k-link",function(t){var n=e(this).parent(),r=g.buildIndicator(n.attr(i.attr("field")),n.attr(i.attr("title")),"asc"==n.attr(i.attr("dir"))?"desc":"asc");n.before(r).remove(),g._change(),t.preventDefault()}),p.bind(["dragend","dragcancel","dragstart","drag"],{dragend:function(){g._dragEnd(this)},dragcancel:o(g._dragCancel,g),dragstart:function(e){var n,i,r;return g.options.allowDrag||g._canDrag(e.currentTarget)?(v(),_.length?(n=_[_.length-1].element,i=parseInt(n.css("marginRight"),10),r=n.position().left+n.outerWidth()+i):r=0,t):(e.preventDefault(),t)},drag:o(g._drag,g)}),g.dataSource=g.options.dataSource,g.dataSource&&g._refreshHandler?g.dataSource.unbind(l,g._refreshHandler):g._refreshHandler=o(g.refresh,g),g.dataSource&&(g.dataSource.bind("change",g._refreshHandler),g.refresh())},refresh:function(){var t=this,n=t.dataSource;t.groupContainer&&t.groupContainer.empty().append(e.map(n.group()||[],function(e){var n=e.field.replace(h,"\\$1"),r=t.element.find(t.options.filter).filter("["+i.attr("field")+"="+n+"]");return t.buildIndicator(e.field,r.attr(i.attr("title")),e.dir)}).join("")),t._invalidateGroupContainer()},destroy:function(){var e=this;r.fn.destroy.call(e),e.groupContainer.off(s),e.groupContainer.data("kendoDropTarget")&&e.groupContainer.data("kendoDropTarget").destroy(),e.groupContainer.data("kendoDraggable")&&e.groupContainer.data("kendoDraggable").destroy(),e.options.draggable||e.draggable.destroy(),e.dataSource&&e._refreshHandler&&(e.dataSource.unbind("change",e._refreshHandler),e._refreshHandler=null),e.groupContainer=e.element=e.draggable=null},options:{name:"Groupable",filter:"th",draggableElements:"th",messages:{empty:"Drag a column header and drop it here to group by that column"}},indicator:function(t){var n=e(".k-group-indicator",this.groupContainer);return e.grep(n,function(n){return e(n).attr(i.attr("field"))===t})[0]},buildIndicator:function(e,t,n){return c({field:e.replace(/"/g,"'"),dir:n,title:t,ns:i.ns})},descriptors:function(){var t,n,r,o,a,s=this,l=e(".k-group-indicator",s.groupContainer);return t=s.element.find(s.options.filter).map(function(){var t=e(this),r=t.attr(i.attr("aggregates")),s=t.attr(i.attr("field"));if(r&&""!==r)for(n=r.split(","),r=[],o=0,a=n.length;a>o;o++)r.push({field:s,aggregate:n[o]});return r}).toArray(),e.map(l,function(n){return n=e(n),r=n.attr(i.attr("field")),{field:r,dir:n.attr(i.attr("dir")),aggregates:t||[]}})},_removeIndicator:function(e){var t=this;e.remove(),t._invalidateGroupContainer(),t._change()},_change:function(){var e=this;e.dataSource&&e.dataSource.group(e.descriptors())},_dropCuePosition:function(t){var n,i,r,o,s,l=this._dropCuePositions;if(u.is(":visible")&&0!==l.length)return t=Math.ceil(t),n=l[l.length-1],i=n.left,r=n.right,o=parseInt(n.element.css("marginLeft"),10),s=parseInt(n.element.css("marginRight"),10),t>=r&&!a||i>t&&a?t={left:n.element.position().left+(a?-o:n.element.outerWidth()+s),element:n.element,before:!1}:(t=e.grep(l,function(e){return t>=e.left&&e.right>=t||a&&t>e.right
})[0],t&&(t={left:a?t.element.position().left+t.element.outerWidth()+s:t.element.position().left-o,element:t.element,before:!0})),t},_drag:function(e){var t=this._dropCuePosition(e.x.location);t&&u.css({left:t.left,right:"auto"})},_canDrag:function(e){var t=e.attr(i.attr("field"));return"false"!=e.attr(i.attr("groupable"))&&t&&(e.hasClass("k-group-indicator")||!this.indicator(t))},_canDrop:function(e,t,n){var i=e.next(),r=e[0]!==t[0]&&(!i[0]||t[0]!==i[0]||!a&&n>i.position().left||a&&n<i.position().left);return r},_dragEnd:function(t){var n=this,r=t.currentTarget.attr(i.attr("field")),o=n.indicator(r);t!==n.options.draggable&&!t.dropped&&o&&n._removeIndicator(e(o)),n._dragCancel()},_dragCancel:function(){u.remove(),this._dropCuePositions=[]},_intializePositions:function(){var t,n=this,r=e(".k-group-indicator",n.groupContainer);n._dropCuePositions=e.map(r,function(n){return n=e(n),t=i.getOffset(n).left,{left:parseInt(t,10),right:parseInt(t+n.outerWidth(),10),element:n}})},_invalidateGroupContainer:function(){var e=this.groupContainer;e&&e.is(":empty")&&e.html(this.options.messages.empty)}});i.ui.plugin(p)}(window.kendo.jQuery),function(e){function t(t,n){t=e(t),n?t.find(".k-drag-status").removeClass("k-add").addClass("k-denied"):t.find(".k-drag-status").removeClass("k-denied").addClass("k-add")}var n=window.kendo,i=n.getOffset,r=n.ui.Widget,o="change",a="k-reorderable",s=r.extend({init:function(s,l){var c,d=this,u=n.guid()+"-reorderable";r.fn.init.call(d,s,l),s=d.element.addClass(a),l=d.options,d.draggable=c=l.draggable||new n.ui.Draggable(s,{group:u,filter:l.filter,hint:l.hint}),d.reorderDropCue=e('<div class="k-reorder-cue"><div class="k-icon k-i-arrow-s"></div><div class="k-icon k-i-arrow-n"></div></div>'),s.find(c.options.filter).kendoDropTarget({group:c.options.group,dragenter:function(e){var n,r,o,a;d._draggable&&(n=this.element,o=!d._dropTargetAllowed(n)||d._isLastDraggable(),t(e.draggable.hint,o),o||(r=i(n),a=r.left,l.inSameContainer&&!l.inSameContainer({source:n,target:d._draggable,sourceIndex:d._index(n),targetIndex:d._index(d._draggable)})?d._dropTarget=n:d._index(n)>d._index(d._draggable)&&(a+=n.outerWidth()),d.reorderDropCue.css({height:n.outerHeight(),top:r.top,left:a}).appendTo(document.body)))},dragleave:function(e){t(e.draggable.hint,!0),d.reorderDropCue.remove(),d._dropTarget=null},drop:function(){var e,t,n;d._dropTarget=null,d._draggable&&(e=this.element,t=d._draggable,n=!1,d._dropTargetAllowed(e)&&!d._isLastDraggable()&&d.trigger(o,{element:d._draggable,target:e,oldIndex:d._index(t),newIndex:d._index(e),position:i(d.reorderDropCue).left>i(e).left?"after":"before"}))}}),c.bind(["dragcancel","dragend","dragstart","drag"],{dragcancel:function(){d.reorderDropCue.remove(),d._draggable=null,d._elements=null},dragend:function(){d.reorderDropCue.remove(),d._draggable=null,d._elements=null},dragstart:function(e){d._draggable=e.currentTarget,d._elements=d.element.find(d.draggable.options.filter)},drag:function(e){var t,n;d._dropTarget&&!this.hint.find(".k-drag-status").hasClass("k-denied")&&(t=i(d._dropTarget).left,n=d._dropTarget.outerWidth(),d.reorderDropCue.css(e.pageX>t+n/2?{left:t+n}:{left:t}))}})},options:{name:"Reorderable",filter:"*"},events:[o],_isLastDraggable:function(){var e,t=this.options.inSameContainer,n=this._draggable[0],i=this._elements.get(),r=!1;if(!t)return!1;for(;!r&&i.length>0;)e=i.pop(),r=n!==e&&t({source:n,target:e,sourceIndex:this._index(n),targetIndex:this._index(e)});return!r},_dropTargetAllowed:function(e){var t=this.options.inSameContainer,n=this.options.dragOverContainers,i=this._draggable;return i[0]===e[0]?!1:t&&n?t({source:i,target:e,sourceIndex:this._index(i),targetIndex:this._index(e)})?!0:n(this._index(i),this._index(e)):!0},_index:function(e){return this._elements.index(e)},destroy:function(){var t=this;r.fn.destroy.call(t),t.element.find(t.draggable.options.filter).each(function(){var t=e(this);t.data("kendoDropTarget")&&t.data("kendoDropTarget").destroy()}),t.draggable&&(t.draggable.destroy(),t.draggable.element=t.draggable=null),t.elements=t.reorderDropCue=t._elements=t._draggable=null}});n.ui.plugin(s)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.Widget,o=e.proxy,a=n.isFunction,s=e.extend,l="horizontal",c="vertical",d="start",u="resize",h="resizeend",p=r.extend({init:function(e,t){var n=this;r.fn.init.call(n,e,t),n.orientation=n.options.orientation.toLowerCase()!=c?l:c,n._positionMouse=n.orientation==l?"x":"y",n._position=n.orientation==l?"left":"top",n._sizingDom=n.orientation==l?"outerWidth":"outerHeight",n.draggable=new i.Draggable(e,{distance:0,filter:t.handle,drag:o(n._resize,n),dragcancel:o(n._cancel,n),dragstart:o(n._start,n),dragend:o(n._stop,n)}),n.userEvents=n.draggable.userEvents},events:[u,h,d],options:{name:"Resizable",orientation:l},resize:function(){},_max:function(e){var n=this,i=n.hint?n.hint[n._sizingDom]():0,r=n.options.max;return a(r)?r(e):r!==t?n._initialElementPosition+r-i:r},_min:function(e){var n=this,i=n.options.min;return a(i)?i(e):i!==t?n._initialElementPosition+i:i},_start:function(t){var n=this,i=n.options.hint,r=e(t.currentTarget);n._initialElementPosition=r.position()[n._position],n._initialMousePosition=t[n._positionMouse].startLocation,i&&(n.hint=a(i)?e(i(r)):i,n.hint.css({position:"absolute"}).css(n._position,n._initialElementPosition).appendTo(n.element)),n.trigger(d,t),n._maxPosition=n._max(t),n._minPosition=n._min(t),e(document.body).css("cursor",r.css("cursor"))},_resize:function(e){var n,i=this,r=i._maxPosition,o=i._minPosition,a=i._initialElementPosition+(e[i._positionMouse].location-i._initialMousePosition);n=o!==t?Math.max(o,a):a,i.position=n=r!==t?Math.min(r,n):n,i.hint&&i.hint.toggleClass(i.options.invalidClass||"",n==r||n==o).css(i._position,n),i.resizing=!0,i.trigger(u,s(e,{position:n}))},_stop:function(t){var n=this;n.hint&&n.hint.remove(),n.resizing=!1,n.trigger(h,s(t,{position:n.position})),e(document.body).css("cursor","")},_cancel:function(e){var n=this;n.hint&&(n.position=t,n.hint.css(n._position,n._initialElementPosition),n._stop(e))},destroy:function(){var e=this;r.fn.destroy.call(e),e.draggable&&e.draggable.destroy()},press:function(e){if(e){var t=e.position(),n=this;n.userEvents.press(t.left,t.top,e[0]),n.targetPosition=t,n.target=e}},move:function(e){var n=this,i=n._position,r=n.targetPosition,o=n.position;o===t&&(o=r[i]),r[i]=o+e,n.userEvents.move(r.left,r.top)},end:function(){this.userEvents.end(),this.target=this.position=t}});n.ui.plugin(p)}(window.kendo.jQuery),function(e,t){function n(t,n){try{return e.contains(t,n)||t==n}catch(i){return!1}}function i(e){return e.clone()}function r(e){return e.clone().removeAttr("id").css("visibility","hidden")}var o=window.kendo,a=o.ui.Widget,s="start",l="beforeMove",c="move",d="end",u="change",h="cancel",p="sort",f="remove",g="receive",m=">*",v=-1,_=a.extend({init:function(e,t){var n=this;a.fn.init.call(n,e,t),n.options.placeholder||(n.options.placeholder=r),n.options.hint||(n.options.hint=i),n._draggable=n._createDraggable()},events:[s,l,c,d,u,h],options:{name:"Sortable",hint:null,placeholder:null,filter:m,holdToDrag:!1,disabled:null,container:null,connectWith:null,handler:null,cursorOffset:null,axis:null,ignore:null,cursor:"auto"},destroy:function(){this._draggable.destroy(),a.fn.destroy.call(this)},_createDraggable:function(){var t=this,n=t.element,i=t.options;return new o.ui.Draggable(n,{filter:i.filter,hint:o.isFunction(i.hint)?i.hint:e(i.hint),holdToDrag:i.holdToDrag,container:i.container?e(i.container):null,cursorOffset:i.cursorOffset,axis:i.axis,ignore:i.ignore,dragstart:e.proxy(t._dragstart,t),dragcancel:e.proxy(t._dragcancel,t),drag:e.proxy(t._drag,t),dragend:e.proxy(t._dragend,t)})},_dragstart:function(t){var n=this.draggedElement=t.currentTarget,i=t.target||o.elementUnderCursor(t),r=this.options.disabled,a=this.options.handler,l=this.options.placeholder,c=this.placeholder=e(o.isFunction(l)?l.call(this,n):l);r&&n.is(r)?t.preventDefault():a&&!e(i).is(a)?t.preventDefault():this.trigger(s,{item:n,draggableEvent:t})?t.preventDefault():(n.css("display","none"),n.before(c),this._setCursor())},_dragcancel:function(){this._cancel(),this.trigger(h,{item:this.draggedElement}),this._resetCursor()},_drag:function(n){var i,r,o,a,s,l=this.draggedElement,c=this._findTarget(n),d={left:n.x.location,top:n.y.location},u={x:n.x.delta,y:n.y.delta},h=this.options.axis,p={item:l,list:this,draggableEvent:n};if("x"===h||"y"===h)return this._movementByAxis(h,d,u[h],p),t;if(c){if(i=this._getElementCenter(c.element),r={left:Math.round(d.left-i.left),top:Math.round(d.top-i.top)},e.extend(p,{target:c.element}),c.appendToBottom)return this._movePlaceholder(c,null,p),t;if(c.appendAfterHidden&&this._movePlaceholder(c,"next",p),this._isFloating(c.element)?0>u.x&&0>r.left?o="prev":u.x>0&&r.left>0&&(o="next"):0>u.y&&0>r.top?o="prev":u.y>0&&r.top>0&&(o="next"),o){for(s="prev"===o?jQuery.fn.prev:jQuery.fn.next,a=s.call(c.element);a.length&&!a.is(":visible");)a=s.call(a);a[0]!=this.placeholder[0]&&this._movePlaceholder(c,o,p)}}},_dragend:function(n){var i,r,o,a,s=this.placeholder,l=this.draggedElement,c=this.indexOf(l),h=this.indexOf(s),m=this.options.connectWith;return this._resetCursor(),o={action:p,item:l,oldIndex:c,newIndex:h,draggableEvent:n},h>=0?r=this.trigger(d,o):(i=s.parents(m).getKendoSortable(),o.action=f,a=e.extend({},o,{action:g,oldIndex:v,newIndex:i.indexOf(s)}),r=!(!this.trigger(d,o)&&!i.trigger(d,a))),r||h===c?(this._cancel(),t):(s.replaceWith(l),l.show(),this._draggable.dropped=!0,o={action:this.indexOf(l)!=v?p:f,item:l,oldIndex:c,newIndex:this.indexOf(l),draggableEvent:n},this.trigger(u,o),i&&(a=e.extend({},o,{action:g,oldIndex:v,newIndex:i.indexOf(l)}),i.trigger(u,a)),t)},_findTarget:function(n){var i,r,o=this._findElementUnderCursor(n),a=this.options.connectWith;return e.contains(this.element[0],o)?(i=this.items(),r=i.filter(o)[0]||i.has(o)[0],r?{element:e(r),sortable:this}:null):this.element[0]==o&&this._isEmpty()?{element:this.element,sortable:this,appendToBottom:!0}:this.element[0]==o&&this._isLastHidden()?(r=this.items().eq(0),{element:r,sortable:this,appendAfterHidden:!0}):a?this._searchConnectedTargets(o,n):t},_findElementUnderCursor:function(e){{var t=o.elementUnderCursor(e),i=e.sender;this.items()}return n(i.hint[0],t)&&(i.hint.hide(),t=o.elementUnderCursor(e),t||(t=o.elementUnderCursor(e)),i.hint.show()),t},_searchConnectedTargets:function(t,n){var i,r,o,a,s=e(this.options.connectWith);for(a=0;s.length>a;a++)if(i=s.eq(a).getKendoSortable(),e.contains(s[a],t)){if(i)return r=i.items(),o=r.filter(t)[0]||r.has(t)[0],o?(i.placeholder=this.placeholder,{element:e(o),sortable:i}):null}else if(s[a]==t){if(i&&i._isEmpty())return{element:s.eq(a),sortable:i,appendToBottom:!0};if(this._isCursorAfterLast(i,n))return o=i.items().last(),{element:o,sortable:i}}},_isCursorAfterLast:function(e,t){var n,i,r=e.items().last(),a={left:t.x.location,top:t.y.location};return n=o.getOffset(r),n.top+=r.outerHeight(),n.left+=r.outerWidth(),i=this._isFloating(r)?n.left-a.left:n.top-a.top,0>i?!0:!1},_movementByAxis:function(t,n,i,r){var o,a="x"===t?n.left:n.top,s=0>i?this.placeholder.prev():this.placeholder.next();s.length&&!s.is(":visible")&&(s=0>i?s.prev():s.next()),e.extend(r,{target:s}),o=this._getElementCenter(s),o&&(o="x"===t?o.left:o.top),s.length&&0>i&&0>a-o?this._movePlaceholder({element:s,sortable:this},"prev",r):s.length&&i>0&&a-o>0&&this._movePlaceholder({element:s,sortable:this},"next",r)},_movePlaceholder:function(e,t,n){var i=this.placeholder;e.sortable.trigger(l,n)||(t?"prev"===t?e.element.before(i):"next"===t&&e.element.after(i):e.element.append(i),e.sortable.trigger(c,n))},_setCursor:function(){var t,n=this.options.cursor;n&&"auto"!==n&&(t=e(document.body),this._originalCursorType=t.css("cursor"),t.css({cursor:n}),this._cursorStylesheet||(this._cursorStylesheet=e("<style>* { cursor: "+n+" !important; }</style>")),this._cursorStylesheet.appendTo(t))},_resetCursor:function(){this._originalCursorType&&(e(document.body).css("cursor",this._originalCursorType),this._originalCursorType=null,this._cursorStylesheet.remove())},_getElementCenter:function(e){var t=e.length?o.getOffset(e):null;return t&&(t.top+=e.outerHeight()/2,t.left+=e.outerWidth()/2),t},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_cancel:function(){this.draggedElement.show(),this.placeholder.remove()},_items:function(){var e,t=this.options.filter;return e=t?this.element.find(t):this.element.children()},indexOf:function(e){var t=this._items(),n=this.placeholder,i=this.draggedElement;return n&&e[0]==n[0]?t.not(i).index(e):t.not(n).index(e)},items:function(){var e=this.placeholder,t=this._items();return e&&(t=t.not(e)),t},_isEmpty:function(){return!this.items().length},_isLastHidden:function(){return 1===this.items().length&&this.items().is(":hidden")}});o.ui.plugin(_)}(window.kendo.jQuery),function(e,t){function n(e,t){var n=r.getOffset(e),i=t.left+t.width,o=t.top+t.height;return n.right=n.left+e.outerWidth(),n.bottom=n.top+e.outerHeight(),!(n.left>i||t.left>n.right||n.top>o||t.top>n.bottom)}var i,r=window.kendo,o=r.ui.Widget,a=e.proxy,s=Math.abs,l="aria-selected",c="k-state-selected",d="k-state-selecting",u="k-selectable",h="change",p=".kendoSelectable",f="k-state-unselecting",g="input,a,textarea,.k-multiselect-wrap,select,button",m=r.support.browser.msie,v=!1;!function(e){!function(){e('<div class="parent"><span /></div>').on("click",">*",function(){v=!0}).find("span").click().end().off()}()}(e),i=o.extend({init:function(t,n){var i,s=this;o.fn.init.call(s,t,n),s._marquee=e("<div class='k-marquee'><div class='k-marquee-color'></div></div>"),s._lastActive=null,s.element.addClass(u),s.relatedTarget=s.options.relatedTarget,i=s.options.multiple,this.options.aria&&i&&s.element.attr("aria-multiselectable",!0),s.userEvents=new r.UserEvents(s.element,{global:!0,allowSelection:!0,filter:(v?"":"."+u+" ")+s.options.filter,tap:a(s._tap,s)}),i&&s.userEvents.bind("start",a(s._start,s)).bind("move",a(s._move,s)).bind("end",a(s._end,s)).bind("select",a(s._select,s))},events:[h],options:{name:"Selectable",filter:">*",multiple:!1,relatedTarget:e.noop},_isElement:function(e){var t,n=this.element,i=n.length,r=!1;for(e=e[0],t=0;i>t;t++)if(n[t]===e){r=!0;break}return r},_tap:function(t){var n,i=e(t.target),r=this,o=t.event.ctrlKey||t.event.metaKey,a=r.options.multiple,s=a&&t.event.shiftKey,l=t.event.which,d=t.event.button;!r._isElement(i.closest("."+u))||l&&3==l||d&&2==d||this._allowSelection(t.event.target)&&(n=i.hasClass(c),a&&o||r.clear(),i=i.add(r.relatedTarget(i)),s?r.selectRange(r._firstSelectee(),i):(n&&o?(r._unselect(i),r._notify(h)):r.value(i),r._lastActive=r._downTarget=i))},_start:function(n){var i,r=this,o=e(n.target),a=o.hasClass(c),s=n.event.ctrlKey||n.event.metaKey;if(this._allowSelection(n.event.target)){if(r._downTarget=o,!r._isElement(o.closest("."+u)))return r.userEvents.cancel(),t;r.options.useAllItems?r._items=r.element.find(r.options.filter):(i=o.closest(r.element),r._items=i.find(r.options.filter)),n.sender.capture(),r._marquee.appendTo(document.body).css({left:n.x.client+1,top:n.y.client+1,width:0,height:0}),s||r.clear(),o=o.add(r.relatedTarget(o)),a&&(r._selectElement(o,!0),s&&o.addClass(f))}},_move:function(e){var t=this,n={left:e.x.startLocation>e.x.location?e.x.location:e.x.startLocation,top:e.y.startLocation>e.y.location?e.y.location:e.y.startLocation,width:s(e.x.initialDelta),height:s(e.y.initialDelta)};t._marquee.css(n),t._invalidateSelectables(n,e.event.ctrlKey||e.event.metaKey),e.preventDefault()},_end:function(){var e,t=this;t._marquee.remove(),t._unselect(t.element.find(t.options.filter+"."+f)).removeClass(f),e=t.element.find(t.options.filter+"."+d),e=e.add(t.relatedTarget(e)),t.value(e),t._lastActive=t._downTarget,t._items=null},_invalidateSelectables:function(e,t){var i,r,o,a,s=this._downTarget[0],l=this._items;for(i=0,r=l.length;r>i;i++)a=l.eq(i),o=a.add(this.relatedTarget(a)),n(a,e)?a.hasClass(c)?t&&s!==a[0]&&o.removeClass(c).addClass(f):a.hasClass(d)||a.hasClass(f)||o.addClass(d):a.hasClass(d)?o.removeClass(d):t&&a.hasClass(f)&&o.removeClass(f).addClass(c)},value:function(e){var n=this,i=a(n._selectElement,n);return e?(e.each(function(){i(this)}),n._notify(h),t):n.element.find(n.options.filter+"."+c)},_firstSelectee:function(){var e,t=this;return null!==t._lastActive?t._lastActive:(e=t.value(),e.length>0?e[0]:t.element.find(t.options.filter)[0])},_selectElement:function(t,n){var i=e(t),r=!n&&this._notify("select",{element:t});i.removeClass(d),r||(i.addClass(c),this.options.aria&&i.attr(l,!0))},_notify:function(e,t){return t=t||{},this.trigger(e,t)},_unselect:function(e){return e.removeClass(c),this.options.aria&&e.attr(l,!1),e},_select:function(t){this._allowSelection(t.event.target)&&(!m||m&&!e(r._activeElement()).is(g))&&t.preventDefault()},_allowSelection:function(t){return e(t).is(g)?(this.userEvents.cancel(),this._downTarget=null,!1):!0},resetTouchEvents:function(){this.userEvents.cancel()},clear:function(){var e=this.element.find(this.options.filter+"."+c);this._unselect(e)},selectRange:function(t,n){var i,r,o,a=this;for(a.clear(),a.element.length>1&&(o=a.options.continuousItems()),o&&o.length||(o=a.element.find(a.options.filter)),t=e.inArray(e(t)[0],o),n=e.inArray(e(n)[0],o),t>n&&(r=t,t=n,n=r),a.options.useAllItems||(n+=a.element.length-1),i=t;n>=i;i++)a._selectElement(o[i]);a._notify(h)},destroy:function(){var e=this;o.fn.destroy.call(e),e.element.off(p),e.userEvents.destroy(),e._marquee=e._lastActive=e.element=e.userEvents=null}}),i.parseOptions=function(e){var t="string"==typeof e&&e.toLowerCase();return{multiple:t&&t.indexOf("multiple")>-1,cell:t&&t.indexOf("cell")>-1}},r.ui.plugin(i)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui.Widget,r=e.proxy,o=n.keys,a="click",s="k-button",l="k-button-icon",c="k-button-icontext",d=".kendoButton",u="disabled",h="k-state-disabled",p="k-state-focused",f="k-state-selected",g=i.extend({init:function(e,t){var o=this;i.fn.init.call(o,e,t),e=o.wrapper=o.element,t=o.options,e.addClass(s).attr("role","button"),t.enable=t.enable&&!e.attr(u),o.enable(t.enable),o._tabindex(),o._graphics(),e.on(a+d,r(o._click,o)).on("focus"+d,r(o._focus,o)).on("blur"+d,r(o._blur,o)).on("keydown"+d,r(o._keydown,o)).on("keyup"+d,r(o._keyup,o)),n.notify(o)},destroy:function(){var e=this;e.wrapper.off(d),i.fn.destroy.call(e)},events:[a],options:{name:"Button",icon:"",spriteCssClass:"",imageUrl:"",enable:!0},_isNativeButton:function(){return"button"==this.element.prop("tagName").toLowerCase()},_click:function(e){this.options.enable&&this.trigger(a,{event:e})},_focus:function(){this.options.enable&&this.element.addClass(p)},_blur:function(){this.element.removeClass(p)},_keydown:function(e){var t=this;t._isNativeButton()||(e.keyCode==o.ENTER||e.keyCode==o.SPACEBAR)&&(e.keyCode==o.SPACEBAR&&(e.preventDefault(),t.options.enable&&t.element.addClass(f)),t._click(e))},_keyup:function(){this.element.removeClass(f)},_graphics:function(){var t,n,i,r=this,o=r.element,a=r.options,s=a.icon,d=a.spriteCssClass,u=a.imageUrl;(d||u||s)&&(i=!0,o.contents().not("span.k-sprite").not("span.k-icon").not("img.k-image").each(function(t,n){(1==n.nodeType||3==n.nodeType&&e.trim(n.nodeValue).length>0)&&(i=!1)}),o.addClass(i?l:c)),s?(t=o.children("span.k-icon").first(),t[0]||(t=e('<span class="k-icon"></span>').prependTo(o)),t.addClass("k-i-"+s)):d?(t=o.children("span.k-sprite").first(),t[0]||(t=e('<span class="k-sprite"></span>').prependTo(o)),t.addClass(d)):u&&(n=o.children("img.k-image").first(),n[0]||(n=e('<img alt="icon" class="k-image" />').prependTo(o)),n.attr("src",u))},enable:function(e){var n=this,i=n.element;e===t&&(e=!0),e=!!e,n.options.enable=e,i.toggleClass(h,!e).attr("aria-disabled",!e).attr(u,!e);try{i.blur()}catch(r){}}});n.ui.plugin(g)}(window.kendo.jQuery),function(e,t){function n(e,t,n,i,r){return e({idx:t,text:n,ns:c.ns,numeric:i,title:r||""})}function i(e,t,n){return k({className:e.substring(1),text:t,wrapClassName:n||""})}function r(e,t,n,i){e.find(t).parent().attr(c.attr("page"),n).attr("tabindex",-1).toggleClass("k-state-disabled",i)}function o(e,t){r(e,p,1,1>=t)}function a(e,t){r(e,g,Math.max(1,t-1),1>=t)}function s(e,t,n){r(e,m,Math.min(n,t+1),t>=n)}function l(e,t,n){r(e,f,n,t>=n)}var c=window.kendo,d=c.ui,u=d.Widget,h=e.proxy,p=".k-i-seek-w",f=".k-i-seek-e",g=".k-i-arrow-w",m=".k-i-arrow-e",v="change",_=".kendoPager",y="click",w="keydown",b="disabled",k=c.template('<a href="\\#" title="#=text#" class="k-link k-pager-nav #= wrapClassName #"><span class="k-icon #= className #">#=text#</span></a>'),x=u.extend({init:function(t,n){var r,d,b=this;u.fn.init.call(b,t,n),n=b.options,b.dataSource=c.data.DataSource.create(n.dataSource),b.linkTemplate=c.template(b.options.linkTemplate),b.selectTemplate=c.template(b.options.selectTemplate),r=b.page(),d=b.totalPages(),b._refreshHandler=h(b.refresh,b),b.dataSource.bind(v,b._refreshHandler),n.previousNext&&(b.element.find(p).length||(b.element.append(i(p,n.messages.first,"k-pager-first")),o(b.element,r,d)),b.element.find(g).length||(b.element.append(i(g,n.messages.previous)),a(b.element,r,d))),n.numeric&&(b.list=b.element.find(".k-pager-numbers"),b.list.length||(b.list=e('<ul class="k-pager-numbers k-reset" />').appendTo(b.element))),n.input&&(b.element.find(".k-pager-input").length||b.element.append('<span class="k-pager-input k-label">'+n.messages.page+'<input class="k-textbox">'+c.format(n.messages.of,d)+"</span>"),b.element.on(w+_,".k-pager-input input",h(b._keydown,b))),n.previousNext&&(b.element.find(m).length||(b.element.append(i(m,n.messages.next)),s(b.element,r,d)),b.element.find(f).length||(b.element.append(i(f,n.messages.last,"k-pager-last")),l(b.element,r,d))),n.pageSizes&&(b.element.find(".k-pager-sizes").length||e('<span class="k-pager-sizes k-label"><select/>'+n.messages.itemsPerPage+"</span>").appendTo(b.element).find("select").html(e.map(e.isArray(n.pageSizes)?n.pageSizes:[5,10,20],function(e){return"<option>"+e+"</option>"}).join("")).end().appendTo(b.element),b.element.find(".k-pager-sizes select").val(b.pageSize()),c.ui.DropDownList&&b.element.find(".k-pager-sizes select").show().kendoDropDownList(),b.element.on(v+_,".k-pager-sizes select",h(b._change,b))),n.refresh&&(b.element.find(".k-pager-refresh").length||b.element.append('<a href="#" class="k-pager-refresh k-link" title="'+n.messages.refresh+'"><span class="k-icon k-i-refresh">'+n.messages.refresh+"</span></a>"),b.element.on(y+_,".k-pager-refresh",h(b._refreshClick,b))),n.info&&(b.element.find(".k-pager-info").length||b.element.append('<span class="k-pager-info k-label" />')),b.element.on(y+_,"a",h(b._click,b)).addClass("k-pager-wrap k-widget"),n.autoBind&&b.refresh(),c.notify(b)},destroy:function(){var e=this;u.fn.destroy.call(e),e.element.off(_),e.dataSource.unbind(v,e._refreshHandler),e._refreshHandler=null,c.destroy(e.element),e.element=e.list=null},events:[v],options:{name:"Pager",selectTemplate:'<li><span class="k-state-selected">#=text#</span></li>',linkTemplate:'<li><a tabindex="-1" href="\\#" class="k-link" data-#=ns#page="#=idx#" #if (title !== "") {# title="#=title#" #}#>#=text#</a></li>',buttonCount:10,autoBind:!0,numeric:!0,info:!0,input:!1,previousNext:!0,pageSizes:!1,refresh:!1,messages:{display:"{0} - {1} of {2} items",empty:"No items to display",page:"Page",of:"of {0}",itemsPerPage:"items per page",first:"Go to the first page",previous:"Go to the previous page",next:"Go to the next page",last:"Go to the last page",refresh:"Refresh",morePages:"More pages"}},setDataSource:function(e){var t=this;t.dataSource.unbind(v,t._refreshHandler),t.dataSource=t.options.dataSource=e,e.bind(v,t._refreshHandler),t.options.autoBind&&e.fetch()},refresh:function(e){var t,i,r,d=this,u=1,h="",p=d.page(),f=d.options,g=d.pageSize(),m=d.dataSource.total(),v=d.totalPages(),_=d.linkTemplate,y=f.buttonCount;if(!e||"itemchange"!=e.action){if(f.numeric){for(p>y&&(r=p%y,u=0===r?p-y+1:p-r+1),i=Math.min(u+y-1,v),u>1&&(h+=n(_,u-1,"...",!1,f.messages.morePages)),t=u;i>=t;t++)h+=n(t==p?d.selectTemplate:_,t,t,!0);v>i&&(h+=n(_,t,"...",!1,f.messages.morePages)),""===h&&(h=d.selectTemplate({text:0})),d.list.html(h)}f.info&&(h=m>0?c.format(f.messages.display,(p-1)*g+1,Math.min(p*g,m),m):f.messages.empty,d.element.find(".k-pager-info").html(h)),f.input&&d.element.find(".k-pager-input").html(d.options.messages.page+'<input class="k-textbox">'+c.format(f.messages.of,v)).find("input").val(p).attr(b,1>m).toggleClass("k-state-disabled",1>m),f.previousNext&&(o(d.element,p,v),a(d.element,p,v),s(d.element,p,v),l(d.element,p,v)),f.pageSizes&&d.element.find(".k-pager-sizes select").val(g).filter("["+c.attr("role")+"=dropdownlist]").kendoDropDownList("value",g).kendoDropDownList("text",g)}},_keydown:function(e){if(e.keyCode===c.keys.ENTER){var t=this.element.find(".k-pager-input").find("input"),n=parseInt(t.val(),10);(isNaN(n)||1>n||n>this.totalPages())&&(n=this.page()),t.val(n),this.page(n)}},_refreshClick:function(e){e.preventDefault(),this.dataSource.read()},_change:function(e){var t=parseInt(e.currentTarget.value,10);isNaN(t)||this.dataSource.pageSize(t)},_click:function(t){var n=e(t.currentTarget);t.preventDefault(),n.is(".k-state-disabled")||this.page(n.attr(c.attr("page")))},totalPages:function(){return Math.ceil((this.dataSource.total()||0)/this.pageSize())},pageSize:function(){return this.dataSource.pageSize()||this.dataSource.total()},page:function(e){return e===t?this.dataSource.total()>0?this.dataSource.page():0:(this.dataSource.page(e),this.trigger(v,{index:e}),t)}});d.plugin(x)}(window.kendo.jQuery),function(e){function t(t,n){return t===n||e.contains(t,n)}var n=window.kendo,i=n.ui,r=i.Widget,o=n.support,a=n.getOffset,s=n._activeElement,l="open",c="close",d="deactivate",u="activate",h="center",p="left",f="right",g="top",m="bottom",v="absolute",_="hidden",y="body",w="location",b="position",k="visible",x="effects",C="k-state-active",S="k-state-border",T=/k-state-border-(\w+)/,D=".k-picker-wrap, .k-dropdown-wrap, .k-link",A="down",E=e(document.documentElement),M=e(window),P="scroll",I="resize scroll",z=o.transitions.css,F=z+"transform",R=e.extend,B=".kendoPopup",L=["font-size","font-family","font-stretch","font-style","font-weight","line-height"],O=r.extend({init:function(t,i){var o,a=this;i=i||{},i.isRtl&&(i.origin=i.origin||m+" "+f,i.position=i.position||g+" "+f),r.fn.init.call(a,t,i),t=a.element,i=a.options,a.collisions=i.collision?i.collision.split(" "):[],a.downEvent=n.applyEventMap(A,n.guid()),1===a.collisions.length&&a.collisions.push(a.collisions[0]),o=e(a.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])"),i.appendTo=e(e(i.appendTo)[0]||o[0]||y),a.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!i.isRtl).css({position:v}).appendTo(i.appendTo).on("mouseenter"+B,function(){a._hovered=!0}).on("mouseleave"+B,function(){a._hovered=!1}),a.wrapper=e(),i.animation===!1&&(i.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),R(i.animation.open,{complete:function(){a.wrapper.css({overflow:k}),a._trigger(u)}}),R(i.animation.close,{complete:function(){a._animationClose()}}),a._mousedownProxy=function(e){a._mousedown(e)},a._resizeProxy=function(e){a._resize(e)},i.toggleTarget&&e(i.toggleTarget).on(i.toggleEvent+B,e.proxy(a.toggle,a))},events:[l,u,c,d],options:{name:"Popup",toggleEvent:"click",origin:m+" "+p,position:g+" "+p,anchor:y,appendTo:null,collision:"flip fit",viewport:window,copyAnchorStyles:!0,autosize:!1,modal:!1,animation:{open:{effects:"slideIn:down",transition:!0,duration:200},close:{duration:100,hide:!0}}},_animationClose:function(){var t,i,r,o,a=this,s=a.options;a.wrapper.hide(),t=a.wrapper.data(w),i=e(s.anchor),t&&a.wrapper.css(t),s.anchor!=y&&(r=((i.attr("class")||"").match(T)||["","down"])[1],o=S+"-"+r,i.removeClass(o).children(D).removeClass(C).removeClass(o),a.element.removeClass(S+"-"+n.directions[r].reverse)),a._closing=!1,a._trigger(d)},destroy:function(){var t,i=this,o=i.options,a=i.element.off(B);r.fn.destroy.call(i),o.toggleTarget&&e(o.toggleTarget).off(B),o.modal||(E.unbind(i.downEvent,i._mousedownProxy),i._scrollableParents().unbind(P,i._resizeProxy),M.unbind(I,i._resizeProxy)),n.destroy(i.element.children()),a.removeData(),o.appendTo[0]===document.body&&(t=a.parent(".k-animation-container"),t[0]?t.remove():a.remove())},open:function(t,i){var r,a,s,c=this,d={isFixed:!isNaN(parseInt(i,10)),x:t,y:i},u=c.element,h=c.options,p="down",f=e(h.anchor),m=u[0]&&u.hasClass("km-widget");if(!c.visible()){if(h.copyAnchorStyles&&(m&&"font-size"==L[0]&&L.shift(),u.css(n.getComputedStyles(f[0],L))),u.data("animating")||c._trigger(l))return;h.modal||(E.unbind(c.downEvent,c._mousedownProxy).bind(c.downEvent,c._mousedownProxy),o.mobileOS.ios||o.mobileOS.android||(c._scrollableParents().unbind(P,c._resizeProxy).bind(P,c._resizeProxy),M.unbind(I,c._resizeProxy).bind(I,c._resizeProxy))),c.wrapper=a=n.wrap(u,h.autosize).css({overflow:_,display:"block",position:v}),o.mobileOS.android&&a.css(F,"translatez(0)"),a.css(b),e(h.appendTo)[0]==document.body&&a.css(g,"-10000px"),r=R(!0,{},h.animation.open),c.flipped=c._position(d),r.effects=n.parseEffects(r.effects,c.flipped),p=r.effects.slideIn?r.effects.slideIn.direction:p,h.anchor!=y&&(s=S+"-"+p,u.addClass(S+"-"+n.directions[p].reverse),f.addClass(s).children(D).addClass(C).addClass(s)),u.data(x,r.effects).kendoStop(!0).kendoAnimate(r)}},toggle:function(){var e=this;e[e.visible()?c:l]()},visible:function(){return this.element.is(":"+k)},close:function(t){var i,r,o,a,s=this,l=s.options;if(s.visible()){if(i=s.wrapper[0]?s.wrapper:n.wrap(s.element).hide(),s._closing||s._trigger(c))return;s.element.find(".k-popup").each(function(){var n=e(this),i=n.data("kendoPopup");i&&i.close(t)}),E.unbind(s.downEvent,s._mousedownProxy),s._scrollableParents().unbind(P,s._resizeProxy),M.unbind(I,s._resizeProxy),t?r={hide:!0,effects:{}}:(r=R(!0,{},l.animation.close),o=s.element.data(x),a=r.effects,!a&&!n.size(a)&&o&&n.size(o)&&(r.effects=o,r.reverse=!0),s._closing=!0),s.element.kendoStop(!0),i.css({overflow:_}),s.element.kendoAnimate(r)}},_trigger:function(e){return this.trigger(e,{type:e})},_resize:function(e){var n=this;"resize"===e.type?(clearTimeout(n._resizeTimeout),n._resizeTimeout=setTimeout(function(){n._position(),n._resizeTimeout=null},50)):n._hovered||t(n.element[0],s())||n.close()},_mousedown:function(i){var r=this,o=r.element[0],a=r.options,s=e(a.anchor)[0],l=a.toggleTarget,c=n.eventTarget(i),d=e(c).closest(".k-popup"),u=d.parent().parent(".km-shim").length;d=d[0],(u||!d||d===r.element[0])&&"popover"!==e(i.target).closest("a").data("rel")&&(t(o,c)||t(s,c)||l&&t(e(l)[0],c)||r.close())},_fit:function(e,t,n){var i=0;return e+t>n&&(i=n-(e+t)),0>e&&(i=-e),i},_flip:function(e,t,n,i,r,o,a){var s=0;return a=a||t,o!==r&&o!==h&&r!==h&&(e+a>i&&(s+=-(n+t)),0>e+s&&(s+=n+t)),s},_scrollableParents:function(){return e(this.options.anchor).parentsUntil("body").filter(function(e,t){var i=n.getComputedStyles(t,["overflow"]);return"visible"!=i.overflow})},_position:function(t){var n,i,r,s,l,c,d,u,h,p=this,f=p.element.css(b,""),g=p.wrapper,m=p.options,_=e(m.viewport),y=_.offset(),k=e(m.anchor),x=m.origin.toLowerCase().split(" "),C=m.position.toLowerCase().split(" "),S=p.collisions,T=o.zoomLevel(),D=10002,A=!!(_[0]==window&&window.innerWidth&&1.02>=T),E=0,M=A?window.innerWidth:_.width(),P=A?window.innerHeight:_.height(),I=k.parents().filter(g.siblings());if(I[0])if(i=Math.max(+I.css("zIndex"),0))D=i+10;else for(n=k.parentsUntil(I),r=n.length;r>E;E++)i=+e(n[E]).css("zIndex"),i&&i>D&&(D=i+10);return g.css("zIndex",D),g.css(t&&t.isFixed?{left:t.x,top:t.y}:p._align(x,C)),s=a(g,b,k[0]===g.offsetParent()[0]),l=a(g),c=k.offsetParent().parent(".k-animation-container,.k-popup,.k-group"),c.length&&(s=a(g,b,!0),l=a(g)),_[0]===window?(l.top-=window.pageYOffset||document.documentElement.scrollTop||0,l.left-=window.pageXOffset||document.documentElement.scrollLeft||0):(l.top-=y.top,l.left-=y.left),p.wrapper.data(w)||g.data(w,R({},s)),d=R({},l),u=R({},s),"fit"===S[0]&&(u.top+=p._fit(d.top,g.outerHeight(),P/T)),"fit"===S[1]&&(u.left+=p._fit(d.left,g.outerWidth(),M/T)),h=R({},u),"flip"===S[0]&&(u.top+=p._flip(d.top,f.outerHeight(),k.outerHeight(),P/T,x[0],C[0],g.outerHeight())),"flip"===S[1]&&(u.left+=p._flip(d.left,f.outerWidth(),k.outerWidth(),M/T,x[1],C[1],g.outerWidth())),f.css(b,v),g.css(u),u.left!=h.left||u.top!=h.top
},_align:function(t,n){var i,r=this,o=r.wrapper,s=e(r.options.anchor),l=t[0],c=t[1],d=n[0],u=n[1],p=a(s),g=e(r.options.appendTo),v=o.outerWidth(),_=o.outerHeight(),y=s.outerWidth(),w=s.outerHeight(),b=p.top,k=p.left,x=Math.round;return g[0]!=document.body&&(i=a(g),b-=i.top,k-=i.left),l===m&&(b+=w),l===h&&(b+=x(w/2)),d===m&&(b-=_),d===h&&(b-=x(_/2)),c===f&&(k+=y),c===h&&(k+=x(y/2)),u===f&&(k-=v),u===h&&(k-=x(v/2)),{top:b,left:k}}});i.plugin(O)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui.Widget,r=e.proxy,o=e.extend,a=window.setTimeout,s="click",l="show",c="hide",d="k-notification",u=".k-notification-wrap .k-i-close",h="info",p="success",f="warning",g="error",m="top",v="left",_="bottom",y="right",w="up",b=".kendoNotification",k='<div class="k-widget k-notification"></div>',x='<div class="k-notification-wrap"><span class="k-icon k-i-note">#=typeIcon#</span>#=content#<span class="k-icon k-i-close">Hide</span></div>',C=i.extend({init:function(t,r){var o=this;i.fn.init.call(o,t,r),r=o.options,r.appendTo&&e(r.appendTo).is(t)||o.element.hide(),o._compileTemplates(r.templates),o._guid="_"+n.guid(),o._isRtl=n.support.isRtl(t),o._compileStacking(r.stacking,r.position.top),n.notify(o)},events:[l,c],options:{name:"Notification",position:{pinned:!0,top:null,left:null,bottom:20,right:20},stacking:"default",hideOnClick:!0,button:!1,allowHideAfter:0,autoHideAfter:5e3,appendTo:null,width:null,height:null,templates:[],animation:{open:{effects:"fade:in",duration:300},close:{effects:"fade:out",duration:600,hide:!0}}},_compileTemplates:function(t){var i=this,r=n.template;i._compiled={},e.each(t,function(t,n){i._compiled[n.type]=r(n.template||e("#"+n.templateId).html())}),i._defaultCompiled=r(x)},_getCompiled:function(e){var t=this,n=t._defaultCompiled;return e?t._compiled[e]||n:n},_compileStacking:function(e,t){var n,i,r=this,o={paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0};switch(e){case"down":n=_+" "+v,i=m+" "+v,delete o.paddingBottom;break;case y:n=m+" "+y,i=m+" "+v,delete o.paddingRight;break;case v:n=m+" "+v,i=m+" "+y,delete o.paddingLeft;break;case w:n=m+" "+v,i=_+" "+v,delete o.paddingTop;break;default:null!==t?(n=_+" "+v,i=m+" "+v,delete o.paddingBottom):(n=m+" "+v,i=_+" "+v,delete o.paddingTop)}r._popupOrigin=n,r._popupPosition=i,r._popupPaddings=o},_attachPopupEvents:function(e,t){function n(e){e.on(s+b,function(){t.close()})}var i,r=e.allowHideAfter,o=!isNaN(r)&&r>0;e.hideOnClick?t.bind("activate",function(){o?a(function(){n(t.element)},r):n(t.element)}):e.button&&(i=t.element.find(u),o?a(function(){n(i)},r):n(i))},_showPopup:function(t,i){var r,s,l=this,c=i.autoHideAfter,d=i.position.left,h=i.position.top;s=e("."+l._guid).last(),r=new n.ui.Popup(t,{anchor:s[0]?s:document.body,origin:l._popupOrigin,position:l._popupPosition,animation:i.animation,modal:!0,collision:"",isRtl:l._isRtl,close:function(){l._triggerHide(this.element)},deactivate:function(e){e.sender.element.off(b),e.sender.element.find(u).off(b),e.sender.destroy()}}),l._attachPopupEvents(i,r),s[0]?r.open():(null===d&&(d=e(window).width()-t.width()-i.position.right),null===h&&(h=e(window).height()-t.height()-i.position.bottom),r.open(d,h)),r.wrapper.addClass(l._guid).css(o({margin:0},l._popupPaddings)),i.position.pinned?(r.wrapper.css("position","fixed"),s[0]&&l._togglePin(r.wrapper,!0)):s[0]||l._togglePin(r.wrapper,!1),c>0&&a(function(){r.close()},c)},_togglePin:function(t,n){var i=e(window),r=n?-1:1;t.css({top:parseInt(t.css(m),10)+r*i.scrollTop(),left:parseInt(t.css(v),10)+r*i.scrollLeft()})},_attachStaticEvents:function(e,t){function n(e){e.on(s+b,r(i._hideStatic,i,t))}var i=this,o=e.allowHideAfter,l=!isNaN(o)&&o>0;e.hideOnClick?l?a(function(){n(t)},o):n(t):e.button&&(l?a(function(){n(t.find(u))},o):n(t.find(u)))},_showStatic:function(e,t){var n=this,i=t.autoHideAfter,r=t.animation,o=t.stacking==w||t.stacking==v?"prependTo":"appendTo";e.addClass(n._guid)[o](t.appendTo).hide().kendoAnimate(r.open||!1),n._attachStaticEvents(t,e),i>0&&a(function(){n._hideStatic(e)},i)},_hideStatic:function(e){e.kendoAnimate(o(this.options.animation.close||!1,{complete:function(){e.off(b).find(u).off(b),e.remove()}})),this._triggerHide(e)},_triggerHide:function(e){this.trigger(c,{element:e}),this.angular("cleanup",function(){return{elements:e}})},show:function(i,r){var a,s,c=this,u=c.options,p=e(k);return r||(r=h),null!==i&&i!==t&&""!==i&&(n.isFunction(i)&&(i=i()),s={typeIcon:r,content:""},a=e.isPlainObject(i)?o(s,i):o(s,{content:i}),p.addClass(d+"-"+r).toggleClass(d+"-button",u.button).attr("data-role","alert").css({width:u.width,height:u.height}).append(c._getCompiled(r)(a)),c.angular("compile",function(){return{elements:p,data:[{dataItem:a}]}}),e(u.appendTo)[0]?c._showStatic(p,u):c._showPopup(p,u),c.trigger(l,{element:p})),c},info:function(e){return this.show(e,h)},success:function(e){return this.show(e,p)},warning:function(e){return this.show(e,f)},error:function(e){return this.show(e,g)},hide:function(){var t=this,n=t.getNotifications();return n.each(t.options.appendTo?function(n,i){t._hideStatic(e(i))}:function(t,n){var i=e(n).data("kendoPopup");i&&i.close()}),t},getNotifications:function(){var t=this,n=e("."+t._guid);return t.options.appendTo?n:n.children("."+d)},setOptions:function(e){var n,r=this;i.fn.setOptions.call(r,e),n=r.options,e.templates!==t&&r._compileTemplates(n.templates),(e.stacking!==t||e.position!==t)&&r._compileStacking(n.stacking,n.position.top)},destroy:function(){i.fn.destroy.call(this),this.getNotifications().off(b).find(u).off(b)}});n.ui.plugin(C)}(window.kendo.jQuery),function(e){function t(e){for(;e.length;)n(e),e=e.parent()}function n(e){var t=e.data(o.ns+"title");t&&(e.attr("title",t),e.removeData(o.ns+"title"))}function i(e){var t=e.attr("title");t&&(e.data(o.ns+"title",t),e.attr("title",""))}function r(e){for(;e.length&&!e.is("body");)i(e),e=e.parent()}var o=window.kendo,a=o.ui.Widget,s=o.ui.Popup,l=o.isFunction,c=e.isPlainObject,d=e.extend,u=e.proxy,h=e(document),p=o.isLocalUrl,f="_tt_active",g="aria-describedby",m="show",v="hide",_="error",y="contentLoad",w="requestStart",b="k-content-frame",k='<div role="tooltip" class="k-widget k-tooltip#if (!autoHide) {# k-tooltip-closable#}#">#if (!autoHide) {# <div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close">close</a></div> #}#<div class="k-tooltip-content"></div>#if (callout){ #<div class="k-callout k-callout-#=dir#"></div>#}#</div>',x=o.template("<iframe frameborder='0' class='"+b+"' src='#= content.url #'>This page requires frames in order to show content</iframe>"),C=".kendoTooltip",S={bottom:{origin:"bottom center",position:"top center"},top:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"},center:{position:"center center",origin:"center center"}},T={top:"bottom",bottom:"top",left:"right",right:"left",center:"center"},D={bottom:"n",top:"s",left:"e",right:"w",center:"n"},A={horizontal:{offset:"top",size:"outerHeight"},vertical:{offset:"left",size:"outerWidth"}},E=function(e){return e.target.data(o.ns+"title")},M=a.extend({init:function(e,t){var n,i=this;a.fn.init.call(i,e,t),n=i.options.position.match(/left|right/)?"horizontal":"vertical",i.dimensions=A[n],i._documentKeyDownHandler=u(i._documentKeyDown,i),i.element.on(i.options.showOn+C,i.options.filter,u(i._showOn,i)).on("mouseenter"+C,i.options.filter,u(i._mouseenter,i)),this.options.autoHide&&i.element.on("mouseleave"+C,i.options.filter,u(i._mouseleave,i))},options:{name:"Tooltip",filter:"",content:E,showAfter:100,callout:!0,position:"bottom",showOn:"mouseenter",autoHide:!0,width:null,height:null,animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:40,hide:!0}}},events:[m,v,y,_,w],_mouseenter:function(t){r(e(t.currentTarget))},_showOn:function(t){var n=this,i=e(t.currentTarget);n.options.showOn&&n.options.showOn.match(/click|focus/)?n._show(i):(clearTimeout(n.timeout),n.timeout=setTimeout(function(){n._show(i)},n.options.showAfter))},_appendContent:function(e){var t,n=this,i=n.options.content,r=n.content,a=n.options.iframe;c(i)&&i.url?("iframe"in n.options||(a=!p(i.url)),n.trigger(w,{options:i,target:e}),a?(r.hide(),t=r.find("."+b)[0],t?t.src=i.url||t.src:r.html(x({content:i})),r.find("."+b).off("load"+C).on("load"+C,function(){n.trigger(y),r.show()})):(r.empty(),o.ui.progress(r,!0),n._ajaxRequest(i))):i&&l(i)?(i=i({sender:this,target:e}),r.html(i||"")):r.html(i),n.angular("compile",function(){return{elements:r}})},_ajaxRequest:function(e){var t=this;jQuery.ajax(d({type:"GET",dataType:"html",cache:!1,error:function(e,n){o.ui.progress(t.content,!1),t.trigger(_,{status:n,xhr:e})},success:u(function(e){o.ui.progress(t.content,!1),t.content.html(e),t.trigger(y)},t)},e))},_documentKeyDown:function(e){e.keyCode===o.keys.ESC&&this.hide()},refresh:function(){var e=this,t=e.popup;t&&t.options.anchor&&e._appendContent(t.options.anchor)},hide:function(){this.popup&&this.popup.close()},show:function(e){e=e||this.element,r(e),this._show(e)},_show:function(e){var n=this,i=n.target();n.popup||n._initPopup(),i&&i[0]!=e[0]&&(n.popup.close(),n.popup.element.kendoStop(!0,!0)),i&&i[0]==e[0]||(n._appendContent(e),n.popup.options.anchor=e),n.popup.one("deactivate",function(){t(e),e.removeAttr(g),this.element.removeAttr("id").attr("aria-hidden",!0),h.off("keydown"+C,n._documentKeyDownHandler)}),n.popup.open()},_initPopup:function(){var t=this,n=t.options,i=e(o.template(k)({callout:n.callout&&"center"!==n.position,dir:D[n.position],autoHide:n.autoHide}));t.popup=new s(i,d({activate:function(){var e=this.options.anchor,i=e[0].id||t.element[0].id;i&&(e.attr(g,i+f),this.element.attr("id",i+f)),n.callout&&t._positionCallout(),this.element.removeAttr("aria-hidden"),h.on("keydown"+C,t._documentKeyDownHandler),t.trigger(m)},close:function(){t.trigger(v)},copyAnchorStyles:!1,animation:n.animation},S[n.position])),i.css({width:n.width,height:n.height}),t.content=i.find(".k-tooltip-content"),t.arrow=i.find(".k-callout"),n.autoHide?i.on("mouseleave"+C,u(t._mouseleave,t)):i.on("click"+C,".k-tooltip-button",u(t._closeButtonClick,t))},_closeButtonClick:function(e){e.preventDefault(),this.hide()},_mouseleave:function(n){if(this.popup){var i=e(n.currentTarget),r=i.offset(),o=n.pageX,a=n.pageY;if(r.right=r.left+i.outerWidth(),r.bottom=r.top+i.outerHeight(),o>r.left&&r.right>o&&a>r.top&&r.bottom>a)return;this.popup.close()}else t(e(n.currentTarget));clearTimeout(this.timeout)},_positionCallout:function(){var t=this,n=t.options.position,i=t.dimensions,r=i.offset,o=t.popup,a=o.options.anchor,s=e(a).offset(),l=parseInt(t.arrow.css("border-top-width"),10),c=e(o.element).offset(),d=D[o.flipped?T[n]:n],u=s[r]-c[r]+e(a)[i.size]()/2-l;t.arrow.removeClass("k-callout-n k-callout-s k-callout-w k-callout-e").addClass("k-callout-"+d).css(r,u)},target:function(){return this.popup?this.popup.options.anchor:null},destroy:function(){var e=this.popup;e&&(e.element.off(C),e.destroy()),this.element.off(C),h.off("keydown"+C,this._documentKeyDownHandler),a.fn.destroy.call(this)}});o.ui.plugin(M)}(window.kendo.jQuery),function(e,t){function n(t,i){var r,o=!1;return t.filters&&(r=e.grep(t.filters,function(e){return o=n(e,i),e.filters?e.filters.length:e.field!=i}),o||t.filters.length===r.length||(o=!0),t.filters=r),o}var i=window.kendo,r=i.ui,o=r.Widget,a=i.keys,s=i.support,l=i.htmlEncode,c=i._activeElement,d="id",u="li",h="change",p="k-state-focused",f="k-state-hover",g="k-loading",m="open",v="close",_="select",y="selected",w="progress",b="requestEnd",k="width",x=e.extend,C=e.proxy,S=s.browser,T=S.msie&&9>S.version,D=/"/g,A={ComboBox:"DropDownList",DropDownList:"ComboBox"},E=i.ui.DataBoundWidget.extend({init:function(t,n){var i,r=this,a=r.ns;o.fn.init.call(r,t,n),t=r.element,r._isSelect=t.is(_),r._template(),r.ul=e('<ul unselectable="on" class="k-list k-reset"/>').css({overflow:s.kineticScrollNeeded?"":"auto"}).on("mouseenter"+a,u,function(){e(this).addClass(f)}).on("mouseleave"+a,u,function(){e(this).removeClass(f)}).on("click"+a,u,C(r._click,r)).attr({tabIndex:-1,role:"listbox","aria-hidden":!0}),r.list=e("<div class='k-list-container'/>").append(r.ul).on("mousedown"+a,C(r._listMousedown,r)),i=t.attr(d),i&&(r.list.attr(d,i+"-list"),r.ul.attr(d,i+"_listbox"),r._optionID=i+"_option_selected"),r._header(),r._accessors(),r._initValue()},options:{valuePrimitive:!1,headerTemplate:""},setOptions:function(e){o.fn.setOptions.call(this,e),e&&e.enable!==t&&(e.enabled=e.enable)},focus:function(){this._focused.focus()},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},_listMousedown:function(e){this.filterInput&&this.filterInput[0]===e.target||e.preventDefault()},_filterSource:function(e,t){var i=this,r=i.options,o=i.dataSource,a=x({},o.filter()||{}),s=n(a,r.dataTextField);(e||s)&&i.trigger("filtering",{filter:e})||(e&&(a=a.filters||[],a.push(e)),t?o.read(a):o.filter(a))},_header:function(){var t,n=this,i=n.options.headerTemplate;e.isFunction(i)&&(i=i({})),i&&(n.list.prepend(i),t=n.ul.prev(),n.header=t[0]?t:null,n.header&&n.angular("compile",function(){return{elements:n.header}}))},_initValue:function(){var e=this,t=e.options.value;null!==t?e.element.val(t):(t=e._accessor(),e.options.value=t),e._old=t},_ignoreCase:function(){var e,t=this,n=t.dataSource.reader.model;n&&n.fields&&(e=n.fields[t.options.dataTextField],e&&e.type&&"string"!==e.type&&(t.options.ignoreCase=!1))},items:function(){return this.ul[0].children},current:function(e){var n=this,i=n._focused.add(n.filterInput),r=n._optionID;return e===t?n._current:(n._current&&(n._current.removeClass(p).removeAttr("aria-selected").removeAttr(d),i.removeAttr("aria-activedescendant")),e&&(e.addClass(p),n._scroll(e),r&&(e.attr("id",r),i.attr("aria-activedescendant",r))),n._current=e,t)},destroy:function(){var e=this,t=e.ns;o.fn.destroy.call(e),e._unbindDataSource(),e.ul.off(t),e.list.off(t),e._touchScroller&&e._touchScroller.destroy(),e.popup.destroy(),e._form&&e._form.off("reset",e._resetHandler)},dataItem:function(n){var i=this;return n===t?n=i.selectedIndex:"number"!=typeof n&&(n=e(i.items()).index(n)),i._data()[n]},_accessors:function(){var e=this,t=e.element,n=e.options,r=i.getter,o=t.attr(i.attr("text-field")),a=t.attr(i.attr("value-field"));!n.dataTextField&&o&&(n.dataTextField=o),!n.dataValueField&&a&&(n.dataValueField=a),e._text=r(n.dataTextField),e._value=r(n.dataValueField)},_aria:function(e){var n=this,i=n.options,r=n._focused.add(n.filterInput);i.suggest!==t&&r.attr("aria-autocomplete",i.suggest?"both":"list"),e=e?e+" "+n.ul[0].id:n.ul[0].id,r.attr("aria-owns",e),n.ul.attr("aria-live",i.filter&&"none"!==i.filter?"polite":"off")},_blur:function(){var e=this;e._change(),e.close()},_change:function(){var e,n=this,i=n.selectedIndex,r=n.options.value,o=n.value();n._isSelect&&!n._bound&&r&&(o=r),o!==n._old?e=!0:i!==t&&i!==n._oldIndex&&(e=!0),e&&(n._old=o,n._oldIndex=i,n.element.trigger(h),n.trigger(h))},_click:function(t){t.isDefaultPrevented()||this._accept(e(t.currentTarget))},_data:function(){return this.dataSource.view()},_enable:function(){var e=this,n=e.options,i=e.element.is("[disabled]");n.enable!==t&&(n.enabled=n.enable),!n.enabled||i?e.enable(!1):e.readonly(e.element.is("[readonly]"))},_focus:function(e){var n=this,i=!0;return n.popup.visible()&&e&&n.trigger(_,{item:e})?(n.close(),t):(n._select(e),n._triggerCascade(i),n._blur(),t)},_index:function(e){var t,n,i=this,r=i._data();for(t=0,n=r.length;n>t;t++)if(i._dataValue(r[t])==e)return t;return-1},_dataValue:function(e){var n=this._value(e);return n===t&&(n=this._text(e)),n},_height:function(e){if(e){var t,n,i=this,r=i.list,o=i.options.height,a=i.popup.visible();n=r.add(r.parent(".k-animation-container")).show(),o=i.ul[0].scrollHeight>o?o:"auto",n.height(o),"auto"!==o&&(t=i.ul[0].offsetTop,t&&(o=r.height()-t)),i.ul.height(o),a||n.hide()}},_adjustListWidth:function(){var e,t,n=this.list,i=n[0].style.width,r=this.wrapper;if(n.data(k)||!i)return e=window.getComputedStyle?window.getComputedStyle(r[0],null):0,t=e?parseFloat(e.width):r.outerWidth(),e&&S.msie&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),i="border-box"!==n.css("box-sizing")?t-(n.outerWidth()-n.width()):t,n.css({fontFamily:r.css("font-family"),width:i}).data(k,i),!0},_openHandler:function(e){this._adjustListWidth(),this.trigger(m)?e.preventDefault():(this._focused.attr("aria-expanded",!0),this.ul.attr("aria-hidden",!1))},_closeHandler:function(e){this.trigger(v)?e.preventDefault():(this._focused.attr("aria-expanded",!1),this.ul.attr("aria-hidden",!0))},_firstOpen:function(){this._height(this._data().length)},_popup:function(){var e=this;e.popup=new r.Popup(e.list,x({},e.options.popup,{anchor:e.wrapper,open:C(e._openHandler,e),close:C(e._closeHandler,e),animation:e.options.animation,isRtl:s.isRtl(e.wrapper)})),e.popup.one(m,C(e._firstOpen,e)),e._touchScroller=i.touchScroller(e.popup.element)},_makeUnselectable:function(){T&&this.list.find("*").not(".k-textbox").attr("unselectable","on")},_toggleHover:function(t){e(t.currentTarget).toggleClass(f,"mouseenter"===t.type)},_toggle:function(e,n){var i=this,r=s.touch&&s.MSPointers&&s.pointers;e=e!==t?e:!i.popup.visible(),n||r||i._focused[0]===c()||i._focused.focus(),i[e?m:v]()},_scroll:function(e){if(e){e[0]&&(e=e[0]);var t,n,i=this.ul[0],r=e.offsetTop,o=e.offsetHeight,a=i.scrollTop,s=i.clientHeight,l=r+o,c=this._touchScroller;c?(t=c.dimensions.y,t.enabled&&r>t.size&&(r=r-t.size+o+4,c.scrollTo(0,-r))):(n=this.header?this.header.outerHeight():0,n+=this.filterInput?this.filterInput.outerHeight():0,i.scrollTop=a>r?r-n:l>a+s?l-s-n:a)}},_template:function(){var e=this,t=e.options,n=t.template,r=t.dataSource;e._isSelect&&e.element[0].length&&(r||(t.dataTextField=t.dataTextField||"text",t.dataValueField=t.dataValueField||"value")),n?(n=i.template(n),e.template=function(e){return'<li tabindex="-1" role="option" unselectable="on" class="k-item">'+n(e)+"</li>"}):e.template=i.template('<li tabindex="-1" role="option" unselectable="on" class="k-item">${'+i.expr(t.dataTextField,"data")+"}</li>",{useWithBlock:!1})},_triggerCascade:function(e){var t=this,n=t.value();(!t._bound&&n||t._old!==n)&&t.trigger("cascade",{userTriggered:e})},_unbindDataSource:function(){var e=this;e.dataSource.unbind(h,e._refreshHandler).unbind(w,e._progressHandler).unbind(b,e._requestEndHandler).unbind("error",e._errorHandler)}});x(E,{inArray:function(e,t){var n,i,r=t.children;if(!e||e.parentNode!==t)return-1;for(n=0,i=r.length;i>n;n++)if(e===r[n])return n;return-1}}),i.ui.List=E,r.Select=E.extend({init:function(e,t){E.fn.init.call(this,e,t),this._initial=this.element.val()},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this._bound=!1,this.options.autoBind&&this.dataSource.fetch()},close:function(){this.popup.close()},select:function(e){var n=this;return e===t?n.selectedIndex:(n._select(e),n._triggerCascade(),n._old=n._accessor(),n._oldIndex=n.selectedIndex,t)},search:function(e){var t,n,i,r,o,a;e="string"==typeof e?e:this.text(),t=this,n=e.length,i=t.options,r=i.ignoreCase,o=i.filter,a=i.dataTextField,clearTimeout(t._typing),(!n||n>=i.minLength)&&(t._state="filter","none"===o?t._filter(e):(t._open=!0,t._filterSource({value:r?e.toLowerCase():e,field:a,operator:o,ignoreCase:r})))},_accessor:function(e,n){var i,r=this.element[0],o=this._isSelect,a=r.selectedIndex;return e===t?(o?a>-1&&(i=r.options[a],i&&(e=i.value)):e=r.value,e):(o?(a>-1&&r.options[a].removeAttribute(y),r.selectedIndex=n,i=r.options[n],i&&i.setAttribute(y,y)):r.value=e,t)},_hideBusy:function(){var e=this;clearTimeout(e._busy),e._arrow.removeClass(g),e._focused.attr("aria-busy",!1),e._busy=null},_showBusy:function(){var e=this;e._request=!0,e._busy||(e._busy=setTimeout(function(){e._arrow&&(e._focused.attr("aria-busy",!0),e._arrow.addClass(g))},100))},_requestEnd:function(){this._request=!1},_dataSource:function(){var t,n=this,r=n.element,o=n.options,a=o.dataSource||{};a=e.isArray(a)?{data:a}:a,n._isSelect&&(t=r[0].selectedIndex,t>-1&&(o.index=t),a.select=r,a.fields=[{field:o.dataTextField},{field:o.dataValueField}]),n.dataSource&&n._refreshHandler?n._unbindDataSource():(n._refreshHandler=C(n.refresh,n),n._progressHandler=C(n._showBusy,n),n._requestEndHandler=C(n._requestEnd,n),n._errorHandler=C(n._hideBusy,n)),n.dataSource=i.data.DataSource.create(a).bind(h,n._refreshHandler).bind(w,n._progressHandler).bind(b,n._requestEndHandler).bind("error",n._errorHandler)},_get:function(t){var n,i,r=this,o=r._data();if("function"==typeof t)for(n=0,i=o.length;i>n;n++)if(t(o[n])){t=n;break}if("number"==typeof t){if(0>t)return e();t=e(r.ul[0].children[t])}return t&&t.nodeType&&(t=e(t)),t},_move:function(e){var t,n,i=this,r=e.keyCode,o=i.ul[0],s=i.popup.visible()?"_select":"_accept",l=i._current,c=r===a.DOWN;if(r===a.UP||c){if(e.altKey)i.toggle(c);else{if(t=o.firstChild,!t&&!i._accessor()&&"filter"!==i._state)return i._fetch||(i.dataSource.one(h,function(){i._move(e),i._fetch=!1}),i._fetch=!0,i._filterSource()),e.preventDefault(),!0;c?(!l||-1===i.selectedIndex&&!i.value()&&l[0]===t?l=t:(l=l[0].nextSibling,l||t!==o.lastChild||(l=t)),i[s](l)):(l=l?l[0].previousSibling:o.lastChild,l||t!==o.lastChild||(l=t),i[s](l))}e.preventDefault(),n=!0}else r===a.ENTER||r===a.TAB?(i.popup.visible()&&e.preventDefault(),i.popup.visible()||l&&l.hasClass("k-state-selected")||(l=null),i._accept(l,r),n=!0):r===a.ESC&&(i.popup.visible()&&e.preventDefault(),i.close(),n=!0);return n},_selectItem:function(){var e,n,i=this,r=i._bound===t,o=i.options;e=i._isSelect&&!i._initial&&!o.value&&o.index&&!i._bound,e||(n=i._selectedValue||r&&o.value||i._accessor()),n?i.value(n):r&&i.select(o.index)},_fetchItems:function(e){var n=this,i=n.ul[0].firstChild;return n._request?!0:n._bound||n._fetch||i?t:n.options.cascadeFrom?!i:(n.dataSource.one(h,function(){n._old=t,n.value(e),n._fetch=!1}),n._fetch=!0,n.dataSource.fetch(),!0)},_options:function(e,n){var i,r,o,a,s=this,c=s.element,d=e.length,u="",h=0;for(n&&(h=1,u=n);d>h;h++)i="<option",r=e[h],o=s._text(r),a=s._value(r),a!==t&&(a+="",-1!==a.indexOf('"')&&(a=a.replace(D,"&quot;")),i+=' value="'+a+'"'),i+=">",o!==t&&(i+=l(o)),i+="</option>",u+=i;c.html(u)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(t._initial)})},t._form=r.on("reset",t._resetHandler))},_cascade:function(){var t,i,r,o,a,s=this,l=s.options,c=l.cascadeFrom;if(c){if(s._selectedValue=l.value||s._accessor(),i=e("#"+c),t=i.data("kendo"+l.name),t||(t=i.data("kendo"+A[l.name])),!t)return;l.autoBind=!1,o=l.cascadeFromField||t.options.dataValueField,a=function(){s.dataSource.unbind(h,a);var e=s._selectedValue||s.value();s._userTriggered?s._clearSelection(t,!0):e?(s.value(e),s.dataSource.view()[0]&&-1!==s.selectedIndex||s._clearSelection(t,!0)):s.select(l.index),s.enable(),s._triggerCascade(s._userTriggered),s._userTriggered=!1},r=function(){var e,i,r,l=t.dataItem(),c=l?t._value(l):null;c||0===c?(e=s.dataSource.filter()||{},n(e,o),i=e.filters||[],i.push({field:o,operator:"eq",value:c}),r=function(){s.unbind("dataBound",r),a.apply(s,arguments)},s.first("dataBound",r),s.dataSource.filter(i)):(s.enable(!1),s._clearSelection(t),s._triggerCascade(s._userTriggered),s._userTriggered=!1)},t.first("cascade",function(e){s._userTriggered=e.userTriggered,r()}),t._bound?r():t.value()||s.enable(!1)}}})}(window.kendo.jQuery),function(e,t){function n(e,t,n,i){var r,o=e.getFullYear(),a=t.getFullYear(),s=n.getFullYear();return o-=o%i,r=o+(i-1),a>o&&(o=a),r>s&&(r=s),o+"-"+r}function i(e){for(var t,n=0,i=e.min,r=e.max,o=e.start,a=e.setter,l=e.build,c=e.cells||12,d=e.perRow||4,u=e.content||P,h=e.empty||I,p=e.html||'<table tabindex="0" role="grid" class="k-content k-meta-view" cellspacing="0"><tbody><tr role="row">';c>n;n++)n>0&&n%d===0&&(p+='</tr><tr role="row">'),t=l(o,n),p+=s(o,i,r)?u(t):h(t),a(o,1);return p+"</tr></tbody></table>"}function r(e,t,n){var i=e.getFullYear(),r=t.getFullYear(),o=r,a=0;return n&&(r-=r%n,o=r-r%n+n-1),i>o?a=1:r>i&&(a=-1),a}function o(){var e=new ft;return new ft(e.getFullYear(),e.getMonth(),e.getDate())}function a(e,t,n){var i=o();return e&&(i=new ft(+e)),t>i?i=new ft(+t):i>n&&(i=new ft(+n)),i}function s(e,t,n){return+e>=+t&&+n>=+e}function l(e,t){return e.slice(t).concat(e.slice(0,t))}function c(e,t,n){t=t instanceof ft?t.getFullYear():e.getFullYear()+n*t,e.setFullYear(t)}function d(t){e(this).toggleClass($,it.indexOf(t.type)>-1||t.type==tt)}function u(e){e.preventDefault()}function h(e){return A(e).calendars.standard}function p(e){var n=gt[e.start],i=gt[e.depth],r=A(e.culture);e.format=T(e.format||r.calendars.standard.patterns.d),isNaN(n)&&(n=0,e.start=U),(i===t||i>n)&&(e.depth=U),e.dates||(e.dates=[])}function f(e){F&&e.find("*").attr("unselectable","on")}function g(e,t){for(var n=0,i=t.length;i>n;n++)if(e===+t[n])return!0;return!1}function m(e,t){return e?e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate():!1}function v(e,t){return e?e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth():!1}var _,y=window.kendo,w=y.support,b=y.ui,k=b.Widget,x=y.keys,C=y.parseDate,S=y.date.adjustDST,T=y._extractFormat,D=y.template,A=y.getCulture,E=y.support.transitions,M=E?E.css+"transform-origin":"",P=D('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link" href="\\#" data-#=data.ns#value="#=data.dateString#">#=data.value#</a></td>',{useWithBlock:!1}),I=D('<td role="gridcell">&nbsp;</td>',{useWithBlock:!1}),z=y.support.browser,F=z.msie&&9>z.version,R=".kendoCalendar",B="click"+R,L="keydown"+R,O="id",H="min",N="left",V="slideIn",U="month",W="century",j="change",G="navigate",q="value",$="k-state-hover",Y="k-state-disabled",K="k-state-focused",Q="k-other-month",X=' class="'+Q+'"',J="k-nav-today",Z="td:has(.k-link)",et="blur"+R,tt="focus",nt=tt+R,it=w.touch?"touchstart":"mouseenter",rt=w.touch?"touchstart"+R:"mouseenter"+R,ot=w.touch?"touchend"+R+" touchmove"+R:"mouseleave"+R,at=6e4,st=864e5,lt="_prevArrow",ct="_nextArrow",dt="aria-disabled",ut="aria-selected",ht=e.proxy,pt=e.extend,ft=Date,gt={month:0,year:1,decade:2,century:3},mt=k.extend({init:function(t,n){var i,r,o=this;k.fn.init.call(o,t,n),t=o.wrapper=o.element,n=o.options,n.url=window.unescape(n.url),o._templates(),o._header(),o._footer(o.footer),r=t.addClass("k-widget k-calendar").on(rt+" "+ot,Z,d).on(L,"table.k-content",ht(o._move,o)).on(B,Z,function(t){var n=t.currentTarget.firstChild;-1!=n.href.indexOf("#")&&t.preventDefault(),o._click(e(n))}).on("mouseup"+R,"table.k-content, .k-footer",function(){o._focusView(o.options.focusOnNav!==!1)}).attr(O),r&&(o._cellID=r+"_cell_selected"),p(n),i=C(n.value,n.format,n.culture),o._index=gt[n.start],o._current=new ft(+a(i,n.min,n.max)),o._addClassProxy=function(){o._active=!0,o._cell.addClass(K)},o._removeClassProxy=function(){o._active=!1,o._cell.removeClass(K)},o.value(i),y.notify(o)},options:{name:"Calendar",value:null,min:new ft(1900,0,1),max:new ft(2099,11,31),dates:[],url:"",culture:"",footer:"",format:"",month:{},start:U,depth:U,animation:{horizontal:{effects:V,reverse:!0,duration:500,divisor:2},vertical:{effects:"zoomIn",duration:400}}},events:[j,G],setOptions:function(e){var t=this;p(e),e.dates[0]||(e.dates=t.options.dates),k.fn.setOptions.call(t,e),t._templates(),t._footer(t.footer),t._index=gt[t.options.start],t.navigate()},destroy:function(){var e=this,t=e._today;e.element.off(R),e._title.off(R),e[lt].off(R),e[ct].off(R),y.destroy(e._table),t&&y.destroy(t.off(R)),k.fn.destroy.call(e)},current:function(){return this._current},view:function(){return this._view},focus:function(e){e=e||this._table,this._bindTable(e),e.focus()},min:function(e){return this._option(H,e)},max:function(e){return this._option("max",e)},navigateToPast:function(){this._navigate(lt,-1)},navigateToFuture:function(){this._navigate(ct,1)},navigateUp:function(){var e=this,t=e._index;e._title.hasClass(Y)||e.navigate(e._current,++t)},navigateDown:function(e){var n=this,i=n._index,r=n.options.depth;if(e)return i===gt[r]?(+n._value!=+e&&(n.value(e),n.trigger(j)),t):(n.navigate(e,--i),t)},navigate:function(n,i){i=isNaN(i)?gt[i]:i;var r,o,s,l,c=this,d=c.options,u=d.culture,h=d.min,p=d.max,g=c._title,m=c._table,v=c._oldTable,y=c._value,w=c._current,b=n&&+n>+w,k=i!==t&&i!==c._index;n||(n=w),c._current=n=new ft(+a(n,h,p)),i===t?i=c._index:c._index=i,c._view=o=_.views[i],s=o.compare,l=i===gt[W],g.toggleClass(Y,l).attr(dt,l),l=s(n,h)<1,c[lt].toggleClass(Y,l).attr(dt,l),l=s(n,p)>-1,c[ct].toggleClass(Y,l).attr(dt,l),m&&v&&v.data("animating")&&(v.kendoStop(!0,!0),m.kendoStop(!0,!0)),c._oldTable=m,(!m||c._changeView)&&(g.html(o.title(n,h,p,u)),c._table=r=e(o.content(pt({min:h,max:p,date:n,url:d.url,dates:d.dates,format:d.format,culture:u},c[o.name]))),f(r),c._animate({from:m,to:r,vertical:k,future:b}),c._focus(n),c.trigger(G)),i===gt[d.depth]&&y&&c._class("k-state-selected",o.toDateString(y)),c._class(K,o.toDateString(n)),!m&&c._cell&&c._cell.removeClass(K),c._changeView=!0},value:function(e){var n=this,i=n._view,r=n.options,o=n._view,a=r.min,l=r.max;return e===t?n._value:(e=C(e,r.format,r.culture),null!==e&&(e=new ft(+e),s(e,a,l)||(e=null)),n._value=e,o&&null===e&&n._cell?n._cell.removeClass("k-state-selected"):(n._changeView=!e||i&&0!==i.compare(e,n._current),n.navigate(e)),t)},_move:function(t){var n,i,r,o,s=this,l=s.options,c=t.keyCode,d=s._view,u=s._index,h=new ft(+s._current),p=y.support.isRtl(s.wrapper);return t.target===s._table[0]&&(s._active=!0),t.ctrlKey?c==x.RIGHT&&!p||c==x.LEFT&&p?(s.navigateToFuture(),i=!0):c==x.LEFT&&!p||c==x.RIGHT&&p?(s.navigateToPast(),i=!0):c==x.UP?(s.navigateUp(),i=!0):c==x.DOWN&&(s._click(e(s._cell[0].firstChild)),i=!0):(c==x.RIGHT&&!p||c==x.LEFT&&p?(n=1,i=!0):c==x.LEFT&&!p||c==x.RIGHT&&p?(n=-1,i=!0):c==x.UP?(n=0===u?-7:-4,i=!0):c==x.DOWN?(n=0===u?7:4,i=!0):c==x.ENTER?(s._click(e(s._cell[0].firstChild)),i=!0):c==x.HOME||c==x.END?(r=c==x.HOME?"first":"last",o=d[r](h),h=new ft(o.getFullYear(),o.getMonth(),o.getDate(),h.getHours(),h.getMinutes(),h.getSeconds(),h.getMilliseconds()),i=!0):c==x.PAGEUP?(i=!0,s.navigateToPast()):c==x.PAGEDOWN&&(i=!0,s.navigateToFuture()),(n||r)&&(r||d.setDate(h,n),s._focus(a(h,l.min,l.max)))),i&&t.preventDefault(),s._current},_animate:function(e){var t=this,n=e.from,i=e.to,r=t._active;n?n.parent().data("animating")?(n.off(R),n.parent().kendoStop(!0,!0).remove(),n.remove(),i.insertAfter(t.element[0].firstChild),t._focusView(r)):n.is(":visible")&&t.options.animation!==!1?t[e.vertical?"_vertical":"_horizontal"](n,i,e.future):(i.insertAfter(n),n.off(R).remove(),t._focusView(r)):(i.insertAfter(t.element[0].firstChild),t._bindTable(i))},_horizontal:function(e,t,n){var i=this,r=i._active,o=i.options.animation.horizontal,a=o.effects,s=e.outerWidth();a&&-1!=a.indexOf(V)&&(e.add(t).css({width:s}),e.wrap("<div/>"),i._focusView(r,e),e.parent().css({position:"relative",width:2*s,"float":N,"margin-left":n?0:-s}),t[n?"insertAfter":"insertBefore"](e),pt(o,{effects:V+":"+(n?"right":N),complete:function(){e.off(R).remove(),i._oldTable=null,t.unwrap(),i._focusView(r)}}),e.parent().kendoStop(!0,!0).kendoAnimate(o))},_vertical:function(e,t){var n,i,r=this,o=r.options.animation.vertical,a=o.effects,s=r._active;a&&-1!=a.indexOf("zoom")&&(t.css({position:"absolute",top:e.prev().outerHeight(),left:0}).insertBefore(e),M&&(n=r._cellByDate(r._view.toDateString(r._current)),i=n.position(),i=i.left+parseInt(n.width()/2,10)+"px "+(i.top+parseInt(n.height()/2,10)+"px"),t.css(M,i)),e.kendoStop(!0,!0).kendoAnimate({effects:"fadeOut",duration:600,complete:function(){e.off(R).remove(),r._oldTable=null,t.css({position:"static",top:0,left:0}),r._focusView(s)}}),t.kendoStop(!0,!0).kendoAnimate(o))},_cellByDate:function(t){return this._table.find("td:not(."+Q+")").filter(function(){return e(this.firstChild).attr(y.attr(q))===t})},_class:function(t,n){var i=this,r=i._cellID,o=i._cell;
o&&o.removeAttr(ut).removeAttr("aria-label").removeAttr(O),o=i._table.find("td:not(."+Q+")").removeClass(t).filter(function(){return e(this.firstChild).attr(y.attr(q))===n}).attr(ut,!0),t!==K||i._active||i.options.focusOnNav===!1||(t=""),o.addClass(t),o[0]&&(i._cell=o),r&&(o.attr(O,r),i._table.removeAttr("aria-activedescendant").attr("aria-activedescendant",r))},_bindTable:function(e){e.on(nt,this._addClassProxy).on(et,this._removeClassProxy)},_click:function(e){var t=this,n=t.options,i=new Date(+t._current),r=e.attr(y.attr(q)).split("/");r=new ft(r[0],r[1],r[2]),S(r,0),t._view.setDate(i,r),t.navigateDown(a(i,n.min,n.max))},_focus:function(e){var t=this,n=t._view;0!==n.compare(e,t._current)?t.navigate(e):(t._current=e,t._class(K,n.toDateString(e)))},_focusView:function(e,t){e&&this.focus(t)},_footer:function(n){var i=this,r=o(),a=i.element,s=a.find(".k-footer");return n?(s[0]||(s=e('<div class="k-footer"><a href="#" class="k-link k-nav-today"></a></div>').appendTo(a)),i._today=s.show().find(".k-link").html(n(r)).attr("title",y.toString(r,"D",i.options.culture)),i._toggle(),t):(i._toggle(!1),s.hide(),t)},_header:function(){var e,t=this,n=t.element;n.find(".k-header")[0]||n.html('<div class="k-header"><a href="#" role="button" class="k-link k-nav-prev"><span class="k-icon k-i-arrow-w"></span></a><a href="#" role="button" aria-live="assertive" aria-atomic="true" class="k-link k-nav-fast"></a><a href="#" role="button" class="k-link k-nav-next"><span class="k-icon k-i-arrow-e"></span></a></div>'),e=n.find(".k-link").on(rt+" "+ot+" "+nt+" "+et,d).click(!1),t._title=e.eq(1).on(B,function(){t._active=t.options.focusOnNav!==!1,t.navigateUp()}),t[lt]=e.eq(0).on(B,function(){t._active=t.options.focusOnNav!==!1,t.navigateToPast()}),t[ct]=e.eq(2).on(B,function(){t._active=t.options.focusOnNav!==!1,t.navigateToFuture()})},_navigate:function(e,t){var n=this,i=n._index+1,r=new ft(+n._current);e=n[e],e.hasClass(Y)||(i>3?r.setFullYear(r.getFullYear()+100*t):_.views[i].setDate(r,t),n.navigate(r))},_option:function(e,n){var i,r=this,o=r.options,a=r._value||r._current;return n===t?o[e]:(n=C(n,o.format,o.culture),n&&(o[e]=new ft(+n),i=e===H?n>a:a>n,(i||v(a,n))&&(i&&(r._value=null),r._changeView=!0),r._changeView||(r._changeView=!(!o.month.content&&!o.month.empty)),r.navigate(r._value),r._toggle()),t)},_toggle:function(e){var n=this,i=n.options,r=n._today;e===t&&(e=s(o(),i.min,i.max)),r&&(r.off(B),e?r.addClass(J).removeClass(Y).on(B,ht(n._todayClick,n)):r.removeClass(J).addClass(Y).on(B,u))},_todayClick:function(e){var t=this,n=gt[t.options.depth],i=o();e.preventDefault(),0===t._view.compare(t._current,i)&&t._index==n&&(t._changeView=!1),t._value=i,t.navigate(i,n),t.trigger(j)},_templates:function(){var e=this,t=e.options,n=t.footer,i=t.month,r=i.content,o=i.empty;e.month={content:D('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link#=data.linkClass#" href="#=data.url#" '+y.attr("value")+'="#=data.dateString#" title="#=data.title#">'+(r||"#=data.value#")+"</a></td>",{useWithBlock:!!r}),empty:D('<td role="gridcell">'+(o||"&nbsp;")+"</td>",{useWithBlock:!!o})},e.footer=n!==!1?D(n||'#= kendo.toString(data,"D","'+t.culture+'") #',{useWithBlock:!1}):null}});b.plugin(mt),_={firstDayOfMonth:function(e){return new ft(e.getFullYear(),e.getMonth(),1)},firstVisibleDay:function(e,t){t=t||y.culture().calendar;for(var n=t.firstDay,i=new ft(e.getFullYear(),e.getMonth(),0,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());i.getDay()!=n;)_.setTime(i,-1*st);return i},setTime:function(e,t){var n=e.getTimezoneOffset(),i=new ft(e.getTime()+t),r=i.getTimezoneOffset()-n;e.setTime(i.getTime()+r*at)},views:[{name:U,title:function(e,t,n,i){return h(i).months.names[e.getMonth()]+" "+e.getFullYear()},content:function(e){for(var t=this,n=0,r=e.min,o=e.max,a=e.date,s=e.dates,c=e.format,d=e.culture,u=e.url,p=u&&s[0],f=h(d),m=f.firstDay,v=f.days,w=l(v.names,m),b=l(v.namesShort,m),k=_.firstVisibleDay(a,f),x=t.first(a),C=t.last(a),T=t.toDateString,D=new ft,A='<table tabindex="0" role="grid" class="k-content" cellspacing="0"><thead><tr role="row">';7>n;n++)A+='<th scope="col" title="'+w[n]+'">'+b[n]+"</th>";return D=new ft(D.getFullYear(),D.getMonth(),D.getDate()),S(D,0),D=+D,i({cells:42,perRow:7,html:A+='</tr></thead><tbody><tr role="row">',start:new ft(k.getFullYear(),k.getMonth(),k.getDate()),min:new ft(r.getFullYear(),r.getMonth(),r.getDate()),max:new ft(o.getFullYear(),o.getMonth(),o.getDate()),content:e.content,empty:e.empty,setter:t.setDate,build:function(e){var t=[],n=e.getDay(),i="",r="#";return(x>e||e>C)&&t.push(Q),+e===D&&t.push("k-today"),(0===n||6===n)&&t.push("k-weekend"),p&&g(+e,s)&&(r=u.replace("{0}",y.toString(e,c,d)),i=" k-action-link"),{date:e,dates:s,ns:y.ns,title:y.toString(e,"D",d),value:e.getDate(),dateString:T(e),cssClass:t[0]?' class="'+t.join(" ")+'"':"",linkClass:i,url:r}}})},first:function(e){return _.firstDayOfMonth(e)},last:function(e){var t=new ft(e.getFullYear(),e.getMonth()+1,0),n=_.firstDayOfMonth(e),i=Math.abs(t.getTimezoneOffset()-n.getTimezoneOffset());return i&&t.setHours(n.getHours()+i/60),t},compare:function(e,t){var n,i=e.getMonth(),r=e.getFullYear(),o=t.getMonth(),a=t.getFullYear();return n=r>a?1:a>r?-1:i==o?0:i>o?1:-1},setDate:function(e,t){var n=e.getHours();t instanceof ft?e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()):_.setTime(e,t*st),S(e,n)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/"+e.getDate()}},{name:"year",title:function(e){return e.getFullYear()},content:function(e){var t=h(e.culture).months.namesAbbr,n=this.toDateString,r=e.min,o=e.max;return i({min:new ft(r.getFullYear(),r.getMonth(),1),max:new ft(o.getFullYear(),o.getMonth(),1),start:new ft(e.date.getFullYear(),0,1),setter:this.setDate,build:function(e){return{value:t[e.getMonth()],ns:y.ns,dateString:n(e),cssClass:""}}})},first:function(e){return new ft(e.getFullYear(),0,e.getDate())},last:function(e){return new ft(e.getFullYear(),11,e.getDate())},compare:function(e,t){return r(e,t)},setDate:function(e,t){var n,i=e.getHours();t instanceof ft?(n=t.getMonth(),e.setFullYear(t.getFullYear(),n,e.getDate()),n!==e.getMonth()&&e.setDate(0)):(n=e.getMonth()+t,e.setMonth(n),n>11&&(n-=12),n>0&&e.getMonth()!=n&&e.setDate(0)),S(e,i)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/1"}},{name:"decade",title:function(e,t,i){return n(e,t,i,10)},content:function(e){var t=e.date.getFullYear(),n=this.toDateString;return i({start:new ft(t-t%10-1,0,1),min:new ft(e.min.getFullYear(),0,1),max:new ft(e.max.getFullYear(),0,1),setter:this.setDate,build:function(e,t){return{value:e.getFullYear(),ns:y.ns,dateString:n(e),cssClass:0===t||11==t?X:""}}})},first:function(e){var t=e.getFullYear();return new ft(t-t%10,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return new ft(t-t%10+9,e.getMonth(),e.getDate())},compare:function(e,t){return r(e,t,10)},setDate:function(e,t){c(e,t,1)},toDateString:function(e){return e.getFullYear()+"/0/1"}},{name:W,title:function(e,t,i){return n(e,t,i,100)},content:function(e){var t=e.date.getFullYear(),n=e.min.getFullYear(),r=e.max.getFullYear(),o=this.toDateString,a=n,s=r;return a-=a%10,s-=s%10,10>s-a&&(s=a+9),i({start:new ft(t-t%100-10,0,1),min:new ft(a,0,1),max:new ft(s,0,1),setter:this.setDate,build:function(e,t){var i=e.getFullYear(),a=i+9;return n>i&&(i=n),a>r&&(a=r),{ns:y.ns,value:i+" - "+a,dateString:o(e),cssClass:0===t||11==t?X:""}}})},first:function(e){var t=e.getFullYear();return new ft(t-t%100,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return new ft(t-t%100+99,e.getMonth(),e.getDate())},compare:function(e,t){return r(e,t,100)},setDate:function(e,t){c(e,t,10)},toDateString:function(e){var t=e.getFullYear();return t-t%10+"/0/1"}}]},_.isEqualDatePart=m,_.makeUnselectable=f,_.restrictValue=a,_.isInRange=s,_.normalize=p,_.viewsEnum=gt,y.calendar=_}(window.kendo.jQuery),function(e,t){function n(t){var n=t.parseFormats,i=t.format;B.normalize(t),n=e.isArray(n)?n:[n],-1===e.inArray(i,n)&&n.splice(0,0,t.format),t.parseFormats=n}function i(e){e.preventDefault()}var r,o=window.kendo,a=o.ui,s=a.Widget,l=o.parseDate,c=o.keys,d=o.template,u=o._activeElement,h="<div />",p="<span />",f=".kendoDatePicker",g="click"+f,m="open",v="close",_="change",y="disabled",w="readonly",b="k-state-default",k="k-state-focused",x="k-state-selected",C="k-state-disabled",S="k-state-hover",T="mouseenter"+f+" mouseleave"+f,D="mousedown"+f,A="id",E="min",M="max",P="month",I="aria-disabled",z="aria-expanded",F="aria-hidden",R="aria-readonly",B=o.calendar,L=B.isInRange,O=B.restrictValue,H=B.isEqualDatePart,N=e.extend,V=e.proxy,U=Date,W=function(t){var n,i=this,r=document.body,s=e(h).attr(F,"true").addClass("k-calendar-container").appendTo(r);i.options=t=t||{},n=t.id,n&&(n+="_dateview",s.attr(A,n),i._dateViewID=n),i.popup=new a.Popup(s,N(t.popup,t,{name:"Popup",isRtl:o.support.isRtl(t.anchor)})),i.div=s,i.value(t.value)};W.prototype={_calendar:function(){var t,n=this,r=n.calendar,s=n.options;r||(t=e(h).attr(A,o.guid()).appendTo(n.popup.element).on(D,i).on(g,"td:has(.k-link)",V(n._click,n)),n.calendar=r=new a.Calendar(t),n._setOptions(s),o.calendar.makeUnselectable(r.element),r.navigate(n._value||n._current,s.start),n.value(n._value))},_setOptions:function(e){this.calendar.setOptions({focusOnNav:!1,change:e.change,culture:e.culture,dates:e.dates,depth:e.depth,footer:e.footer,format:e.format,max:e.max,min:e.min,month:e.month,start:e.start})},setOptions:function(e){var t=this.options;this.options=N(t,e,{change:t.change,close:t.close,open:t.open}),this.calendar&&this._setOptions(this.options)},destroy:function(){this.popup.destroy()},open:function(){var e=this;e._calendar(),e.popup.open()},close:function(){this.popup.close()},min:function(e){this._option(E,e)},max:function(e){this._option(M,e)},toggle:function(){var e=this;e[e.popup.visible()?v:m]()},move:function(e){var n=this,i=e.keyCode,r=n.calendar,o=e.ctrlKey&&i==c.DOWN||i==c.ENTER;if(i==c.ESC)return n.close(),t;if(e.altKey)return i==c.DOWN?(n.open(),e.preventDefault()):i==c.UP&&(n.close(),e.preventDefault()),t;if(n.popup.visible())return o&&r._cell.hasClass(x)?(n.close(),e.preventDefault(),t):(n._current=r._move(e),t)},current:function(e){this._current=e,this.calendar._focus(e)},value:function(e){var t=this,n=t.calendar,i=t.options;t._value=e,t._current=new U(+O(e,i.min,i.max)),n&&n.value(e)},_click:function(e){-1!==e.currentTarget.className.indexOf(x)&&this.close()},_option:function(e,t){var n=this,i=n.calendar;n.options[e]=t,i&&i[e](t)}},W.normalize=n,o.DateView=W,r=s.extend({init:function(e,t){var i,r,a=this;s.fn.init.call(a,e,t),e=a.element,t=a.options,t.min=l(e.attr("min"))||l(t.min),t.max=l(e.attr("max"))||l(t.max),n(t),a._wrapper(),a.dateView=new W(N({},t,{id:e.attr(A),anchor:a.wrapper,change:function(){a._change(this.value()),a.close()},close:function(t){a.trigger(v)?t.preventDefault():(e.attr(z,!1),r.attr(F,!0))},open:function(t){var n,i=a.options;a.trigger(m)?t.preventDefault():(a.element.val()!==a._oldText&&(n=l(e.val(),i.parseFormats,i.culture),a.dateView[n?"current":"value"](n)),e.attr(z,!0),r.attr(F,!1),a._updateARIA(n))}})),r=a.dateView.div,a._icon();try{e[0].setAttribute("type","text")}catch(c){e[0].type="text"}e.addClass("k-input").attr({role:"combobox","aria-expanded":!1,"aria-owns":a.dateView._dateViewID}),a._reset(),a._template(),i=e.is("[disabled]"),i?a.enable(!1):a.readonly(e.is("[readonly]")),a._old=a._update(t.value||a.element.val()),a._oldText=e.val(),o.notify(a)},events:[m,v,_],options:{name:"DatePicker",value:null,footer:"",format:"",culture:"",parseFormats:[],min:new Date(1900,0,1),max:new Date(2099,11,31),start:P,depth:P,animation:{},month:{},dates:[],ARIATemplate:'Current focused date is #=kendo.toString(data.current, "D")#'},setOptions:function(e){var t=this,i=t._value;s.fn.setOptions.call(t,e),e=t.options,e.min=l(e.min),e.max=l(e.max),n(e),t.dateView.setOptions(e),i&&(t.element.val(o.toString(i,e.format,e.culture)),t._updateARIA(i))},_editable:function(e){var t=this,n=t._dateIcon.off(f),r=t.element.off(f),o=t._inputWrapper.off(f),a=e.readonly,s=e.disable;a||s?(o.addClass(s?C:b).removeClass(s?b:C),r.attr(y,s).attr(w,a).attr(I,s).attr(R,a)):(o.addClass(b).removeClass(C).on(T,t._toggleHover),r.removeAttr(y).removeAttr(w).attr(I,!1).attr(R,!1).on("keydown"+f,V(t._keydown,t)).on("focusout"+f,V(t._blur,t)).on("focus"+f,function(){t._inputWrapper.addClass(k)}),n.on(g,V(t._click,t)).on(D,i))},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},destroy:function(){var e=this;s.fn.destroy.call(e),e.dateView.destroy(),e.element.off(f),e._dateIcon.off(f),e._inputWrapper.off(f),e._form&&e._form.off("reset",e._resetHandler)},open:function(){this.dateView.open()},close:function(){this.dateView.close()},min:function(e){return this._option(E,e)},max:function(e){return this._option(M,e)},value:function(e){var n=this;return e===t?n._value:(n._old=n._update(e),null===n._old&&n.element.val(""),n._oldText=n.element.val(),t)},_toggleHover:function(t){e(t.currentTarget).toggleClass(S,"mouseenter"===t.type)},_blur:function(){var e=this,t=e.element.val();e.close(),t!==e._oldText&&e._change(t),e._inputWrapper.removeClass(k)},_click:function(){var e=this,t=e.element;e.dateView.toggle(),o.support.touch||t[0]===u()||t.focus()},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t.element.trigger(_),t.trigger(_))},_keydown:function(e){var t=this,n=t.dateView,i=t.element.val();n.popup.visible()||e.keyCode!=c.ENTER||i===t._oldText?(n.move(e),t._updateARIA(n._current)):t._change(i)},_icon:function(){var t,n=this,i=n.element;t=i.next("span.k-select"),t[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span></span>').insertAfter(i)),n._dateIcon=t.attr({role:"button","aria-controls":n.dateView._dateViewID})},_option:function(e,n){var i=this,r=i.options;return n===t?r[e]:(n=l(n,r.parseFormats,r.culture),n&&(r[e]=new U(+n),i.dateView[e](n)),t)},_update:function(e){var t,n=this,i=n.options,r=i.min,a=i.max,s=n._value,c=l(e,i.parseFormats,i.culture),d=null===c&&null===s||c instanceof Date&&s instanceof Date;return+c===+s&&d?(t=o.toString(c,i.format,i.culture),t!==e&&n.element.val(null===c?e:t),c):(null!==c&&H(c,r)?c=O(c,r,a):L(c,r,a)||(c=null),n._value=c,n.dateView.value(c),n.element.val(c?o.toString(c,i.format,i.culture):e),n._updateARIA(c),c)},_wrapper:function(){var t,n=this,i=n.element;t=i.parents(".k-datepicker"),t[0]||(t=i.wrap(p).parent().addClass("k-picker-wrap k-state-default"),t=t.wrap(p).parent()),t[0].style.cssText=i[0].style.cssText,i.css({width:"100%",height:i[0].style.height}),n.wrapper=t.addClass("k-widget k-datepicker k-header").addClass(i[0].className),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){t.value(n[0].defaultValue)},t._form=r.on("reset",t._resetHandler))},_template:function(){this._ariaTemplate=d(this.options.ARIATemplate)},_updateARIA:function(e){var t,n=this,i=n.dateView.calendar;n.element.removeAttr("aria-activedescendant"),i&&(t=i._cell,t.attr("aria-label",n._ariaTemplate({current:e||i.current()})),n.element.attr("aria-activedescendant",t.attr("id")))}}),a.plugin(r)}(window.kendo.jQuery),function(e,t){function n(e,t,n){return n?t.substring(0,e).split(n).length-1:0}function i(e,t,i){return t.split(i)[n(e,t,i)]}function r(e,t,i,r){var o=t.split(r);return o.splice(n(e,t,r),1,i),r&&""!==o[o.length-1]&&o.push(""),o.join(r)}var o=window.kendo,a=o.support,s=o.caret,l=o._activeElement,c=a.placeholder,d=o.ui,u=d.List,h=o.keys,p=o.data.DataSource,f="aria-disabled",g="aria-readonly",m="k-state-default",v="disabled",_="readonly",y="k-state-focused",w="k-state-selected",b="k-state-disabled",k="k-state-hover",x=".kendoAutoComplete",C="mouseenter"+x+" mouseleave"+x,S=e.proxy,T=u.extend({init:function(t,n){var i,r=this;r.ns=x,n=e.isArray(n)?{dataSource:n}:n,u.fn.init.call(r,t,n),t=r.element,n=r.options,n.placeholder=n.placeholder||t.attr("placeholder"),c&&t.attr("placeholder",n.placeholder),r._wrapper(),r._loader(),r._dataSource(),r._ignoreCase(),t[0].type="text",i=r.wrapper,r._popup(),t.addClass("k-input").on("keydown"+x,S(r._keydown,r)).on("paste"+x,S(r._search,r)).on("focus"+x,function(){r._prev=r._accessor(),r._placeholder(!1),i.addClass(y)}).on("focusout"+x,function(){r._change(),r._placeholder(),i.removeClass(y)}).attr({autocomplete:"off",role:"textbox","aria-haspopup":!0}),r._enable(),r._old=r._accessor(),t[0].id&&t.attr("aria-owns",r.ul[0].id),r._aria(),r._placeholder(),o.notify(r)},options:{name:"AutoComplete",enabled:!0,suggest:!1,template:"",dataTextField:"",minLength:1,delay:200,height:200,filter:"startswith",ignoreCase:!0,highlightFirst:!1,separator:null,placeholder:"",animation:{},value:null},_dataSource:function(){var e=this;e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._refreshHandler=S(e.refresh,e),e._progressHandler=S(e._showBusy,e)),e.dataSource=p.create(e.options.dataSource).bind("change",e._refreshHandler).bind("progress",e._progressHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource()},events:["open","close","change","select","filtering","dataBinding","dataBound"],setOptions:function(e){u.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria()},_editable:function(e){var t=this,n=t.element,i=t.wrapper.off(x),r=e.readonly,o=e.disable;r||o?(i.addClass(o?b:m).removeClass(o?m:b),n.attr(v,o).attr(_,r).attr(f,o).attr(g,r)):(i.addClass(m).removeClass(b).on(C,t._toggleHover),n.removeAttr(v).removeAttr(_).attr(f,!1).attr(g,!1))},close:function(){var e=this,t=e._current;t&&t.removeClass(w),e.current(null),e.popup.close()},destroy:function(){var e=this;e.element.off(x),e.wrapper.off(x),u.fn.destroy.call(e)},refresh:function(){var n,i=this,r=i.ul[0],a=i.popup,s=i.options,c=i._data(),d=c.length,u=i.element[0]===l();i._angularItems("cleanup"),i.trigger("dataBinding"),r.innerHTML=o.render(i.template,c),i._height(d),a.visible()&&a._position(),d&&(s.highlightFirst&&i.current(e(r.firstChild)),s.suggest&&u&&i.suggest(e(r.firstChild))),i._open&&(i._open=!1,n=d?"open":"close",i._typing&&!u&&(n="close"),a[n](),i._typing=t),i._touchScroller&&i._touchScroller.reset(),i._makeUnselectable(),i._hideBusy(),i._angularItems("compile"),i.trigger("dataBound")},select:function(e){this._select(e)},search:function(e){var t,n=this,r=n.options,o=r.ignoreCase,a=r.separator;e=e||n._accessor(),n._current=null,clearTimeout(n._typing),a&&(e=i(s(n.element)[0],e,a)),t=e.length,(!t||t>=r.minLength)&&(n._open=!0,n._filterSource({value:o?e.toLowerCase():e,operator:r.filter,field:r.dataTextField,ignoreCase:o}))},suggest:function(e){var i,r=this,o=r._last,a=r._accessor(),c=r.element[0],d=s(c)[0],p=r.options.separator,f=a.split(p),g=n(d,a,p),m=d;return o==h.BACKSPACE||o==h.DELETE?(r._last=t,t):(e=e||"","string"!=typeof e&&(i=u.inArray(e[0],r.ul[0]),e=i>-1?r._text(r._data()[i]):""),0>=d&&(d=a.toLowerCase().indexOf(e.toLowerCase())+1),i=a.substring(0,d).lastIndexOf(p),i=i>-1?d-(i+p.length):d,a=f[g].substring(0,i),e&&(i=e.toLowerCase().indexOf(a.toLowerCase()),i>-1&&(e=e.substring(i+a.length),m=d+e.length,a+=e),p&&""!==f[f.length-1]&&f.push("")),f[g]=a,r._accessor(f.join(p||"")),c===l()&&s(c,d,m),t)},value:function(e){return e===t?this._accessor():(this._accessor(e),this._old=this._accessor(),t)},_accessor:function(e){var n=this,i=n.element[0];return e===t?(e=i.value,i.className.indexOf("k-readonly")>-1&&e===n.options.placeholder?"":e):(i.value=null===e?"":e,n._placeholder(),t)},_accept:function(e){var t=this.element;this._focus(e),s(t,t.val().length)},_keydown:function(t){var n=this,i=n.ul[0],r=t.keyCode,o=n._current,a=n.popup.visible();n._last=r,r===h.DOWN?(a&&n._move(o?o.next():e(i.firstChild)),t.preventDefault()):r===h.UP?(a&&n._move(o?o.prev():e(i.lastChild)),t.preventDefault()):r===h.ENTER||r===h.TAB?(r===h.ENTER&&n.popup.visible()&&t.preventDefault(),n._accept(o)):r===h.ESC?(n.popup.visible()&&t.preventDefault(),n.close()):n._search()},_move:function(e){var t=this;e=e[0]?e:null,t.current(e),t.options.suggest&&t.suggest(e)},_hideBusy:function(){var e=this;clearTimeout(e._busy),e._loading.hide(),e.element.attr("aria-busy",!1),e._busy=null},_showBusy:function(){var e=this;e._busy||(e._busy=setTimeout(function(){e.element.attr("aria-busy",!0),e._loading.show()},100))},_placeholder:function(e){if(!c){var n,i=this,r=i.element,o=i.options.placeholder;if(o){if(n=r.val(),e===t&&(e=!n),e||(o=n!==o?n:""),n===i._old&&!e)return;r.toggleClass("k-readonly",e).val(o),o||r[0]!==document.activeElement||s(r[0],0,0)}}},_search:function(){var e=this;clearTimeout(e._typing),e._typing=setTimeout(function(){e._prev!==e._accessor()&&(e._prev=e._accessor(),e.search())},e.options.delay)},_select:function(t){var n,i,o=this,a=o.options.separator,l=o._data();t=e(t),t[0]&&!t.hasClass(w)&&(i=u.inArray(t[0],o.ul[0]),i>-1&&(l=l[i],n=o._text(l),a&&(n=r(s(o.element)[0],o._accessor(),n,a)),o._accessor(n),o._prev=o._accessor(),o.current(t.addClass(w))))},_loader:function(){this._loading=e('<span class="k-icon k-loading" style="display:none"></span>').insertAfter(this.element)},_toggleHover:function(t){e(t.currentTarget).toggleClass(k,"mouseenter"===t.type)},_wrapper:function(){var e,t=this,n=t.element,i=n[0];e=n.parent(),e.is("span.k-widget")||(e=n.wrap("<span />").parent()),e.attr("tabindex",-1),e.attr("role","presentation"),e[0].style.cssText=i.style.cssText,n.css({width:"100%",height:i.style.height}),t._focused=t.element,t.wrapper=e.addClass("k-widget k-autocomplete k-header").addClass(i.className)}});d.plugin(T)}(window.kendo.jQuery),function(e,t){function n(e,t,n){for(var i,r=0,o=t.length-1;o>r;++r)i=t[r],i in e||(e[i]={}),e=e[i];e[t[o]]=n}var i=window.kendo,r=i.ui,o=r.Select,a=i.support.mobileOS,s=i._activeElement,l=i.keys,c=".kendoDropDownList",d="disabled",u="readonly",h="change",p="k-state-focused",f="k-state-default",g="k-state-disabled",m="aria-disabled",v="aria-readonly",_="k-state-selected",y="mouseenter"+c+" mouseleave"+c,w="tabindex",b="filter",k="accept",x=e.proxy,C=o.extend({init:function(n,r){var a,s,l,d=this,u=r&&r.index;d.ns=c,r=e.isArray(r)?{dataSource:r}:r,o.fn.init.call(d,n,r),r=d.options,n=d.element.on("focus"+c,x(d._focusHandler,d)),d._inputTemplate(),d._reset(),d._prev="",d._word="",d._wrapper(),d._tabindex(),d.wrapper.data(w,d.wrapper.attr(w)),d._span(),d._popup(),d._mobile(),d._dataSource(),d._ignoreCase(),d._filterHeader(),d._aria(),d._enable(),d._oldIndex=d.selectedIndex=-1,d._cascade(),u!==t&&(r.index=u),r.autoBind?d.dataSource.fetch():-1===d.selectedIndex&&(l=r.text||"",l||(a=r.optionLabel,s=a&&0===r.index,d._isSelect?l=s?a:n.children(":selected").text():!n[0].value&&s&&(l=a)),d._textAccessor(l)),i.notify(d)},options:{name:"DropDownList",enabled:!0,autoBind:!0,index:0,text:null,value:null,template:"",valueTemplate:"",delay:500,height:200,dataTextField:"",dataValueField:"",optionLabel:"",cascadeFrom:"",cascadeFromField:"",ignoreCase:!0,animation:{},filter:"none",minLength:1},events:["open","close",h,"select","filtering","dataBinding","dataBound","cascade"],setOptions:function(e){o.fn.setOptions.call(this,e),this._template(),this._inputTemplate(),this._accessors(),this._filterHeader(),this._enable(),this._aria()},destroy:function(){var e=this;e.wrapper.off(c),e.element.off(c),e._inputWrapper.off(c),e._arrow.off(),e._arrow=null,o.fn.destroy.call(e)},open:function(){var e=this;e.popup.visible()||(e.ul[0].firstChild&&e._state!==k?(e.popup.open(),e._focusElement(e.filterInput),e._scroll(e._current)):(e._open=!0,e._state="rebind",e.filterInput&&e.filterInput.val(""),e._filterSource()))},toggle:function(e){this._toggle(e,!0)},refresh:function(){var t,n,r=this,o=r._data(),a=o.length,s=r.options.optionLabel,l=r._state===b,c=r.element[0];r.trigger("dataBinding"),r._current&&r.current(null),r._angularItems("cleanup"),r.ul[0].innerHTML=i.render(r.template,o),r._angularItems("compile"),r._height(l?a||1:a),r.popup.visible()&&r.popup._position(),r._isSelect&&(t=c.selectedIndex,n=r.value(),a?s&&(s=r._option("",r._optionLabelText(s))):n&&(t=0,s=r._option(n,r.text())),r._options(o,s),c.selectedIndex=-1===t?0:t),r._hideBusy(),r._makeUnselectable(),l?r.current(e(r.ul[0].firstChild)):(r._open&&r.toggle(!!a),r._open=!1,r._fetch||(a?r._selectItem():r._textAccessor()!==s&&(r.element.val(""),r._textAccessor("")))),r._bound=!!a,r.trigger("dataBound")},text:function(e){var n,i,r=this,o=r.options.ignoreCase;return e=null===e?"":e,e===t?r._textAccessor():("string"==typeof e&&(i=o?e.toLowerCase():e,n=r._select(function(e){return e=r._text(e),o&&(e=(e+"").toLowerCase()),e===i}),n&&(e=n)),r._textAccessor(e),t)},value:function(e){var n,i,r=this;return e===t?r._accessor():(null!==e&&(e=""+e),r._selectedValue=e,i=e||r.options.optionLabel&&!r.element[0].disabled&&""===e,i&&r._fetchItems(e)||(n=r._index(e),r.select(n>-1?n:0)),t)},_focusHandler:function(){this.wrapper.focus()},_focusinHandler:function(){this._inputWrapper.addClass(p),this._prevent=!1},_focusoutHandler:function(){var e=this,t=e._state===b,n=window.self!==window.top;e._prevent||(t&&e._select(e._current),(!t||e.dataItem())&&e._triggerCascade(),i.support.mobileOS.ios&&n?e._change():e._blur(),e._inputWrapper.removeClass(p),e._prevent=!0,e._open=!1,e.element.blur())},_wrapperMousedown:function(){this._prevent=!!this.filterInput},_wrapperClick:function(e){e.preventDefault(),this._focused=this.wrapper,this._toggle()},_editable:function(e){var t=this,n=t.element,i=e.disable,r=e.readonly,o=t.wrapper.add(t.filterInput).off(c),a=t._inputWrapper.off(y);r||i?i?(o.removeAttr(w),a.addClass(g).removeClass(f)):(a.addClass(f).removeClass(g),o.on("focusin"+c,x(t._focusinHandler,t)).on("focusout"+c,x(t._focusoutHandler,t))):(n.removeAttr(d).removeAttr(u),a.addClass(f).removeClass(g).on(y,t._toggleHover),o.attr(w,o.data(w)).attr(m,!1).attr(v,!1).on("keydown"+c,x(t._keydown,t)).on("focusin"+c,x(t._focusinHandler,t)).on("focusout"+c,x(t._focusoutHandler,t)).on("mousedown"+c,x(t._wrapperMousedown,t)),t.wrapper.on("click"+c,x(t._wrapperClick,t)),t.filterInput||o.on("keypress"+c,x(t._keypress,t))),n.attr(d,i).attr(u,r),o.attr(m,i).attr(v,r)},_accept:function(e,t){var n=this,i=n.filterInput&&n.filterInput[0]===s();n._focus(e),n._focusElement(n.wrapper),i&&t===l.TAB&&n.wrapper.focusout()},_option:function(e,t){return'<option value="'+e+'">'+t+"</option>"},_optionLabelText:function(){var e=this.options,t=e.dataTextField,n=e.optionLabel;return n&&t&&"object"==typeof n?this._text(n):n},_data:function(){var e=this,t=e.options,r=t.optionLabel,o=t.dataTextField,a=t.dataValueField,s=e.dataSource.view(),l=s.length,c=r,d=0;if(r&&l){for("object"==typeof r?c=r:o&&(c={},o=o.split("."),a=a.split("."),n(c,a,""),n(c,o,r)),c=new i.data.ObservableArray([c]);l>d;d++)c.push(s[d]);s=c}return s},_selectItem:function(){o.fn._selectItem.call(this),this.current()||this.select(0)},_keydown:function(e){var t,n=this,i=e.keyCode,r=e.altKey,o=n.ul[0];i===l.LEFT?i=l.UP:i===l.RIGHT&&(i=l.DOWN),e.keyCode=i,t=n._move(e),n.popup.visible()&&n.filterInput||(i===l.HOME?(t=!0,e.preventDefault(),n._select(o.firstChild)):i===l.END&&(t=!0,e.preventDefault(),n._select(o.lastChild))),r&&i===l.UP&&n._focusElement(n.wrapper),r||t||!n.filterInput||n._search()},_selectNext:function(e,n){for(var i,r=this,o=n,a=r._data(),s=a.length,l=r.options.ignoreCase,c=function(n,i){return n+="",l&&(n=n.toLowerCase()),0===n.indexOf(e)?(r._select(i),r._triggerEvents(),!0):t};s>n;n++)if(i=r._text(a[n]),i&&c(i,n))return!0;if(o>0&&s>o)for(n=0;o>=n;n++)if(i=r._text(a[n]),i&&c(i,n))return!0;return!1},_keypress:function(e){var t,n,r,o=this;0!==e.which&&e.keyCode!==i.keys.ENTER&&(t=String.fromCharCode(e.charCode||e.keyCode),n=o.selectedIndex,r=o._word,o.options.ignoreCase&&(t=t.toLowerCase())," "===t&&e.preventDefault(),o._last===t&&1>=r.length&&n>-1&&(r||(r=t),o._selectNext(r,n+1))||(o._word=r+t,o._last=t,o._search()))},_popupOpen:function(){var e=this.popup;e.wrapper=i.wrap(e.element),e.element.closest(".km-root")[0]&&(e.wrapper.addClass("km-popup km-widget"),this.wrapper.addClass("km-widget"))},_popup:function(){o.fn._popup.call(this),this.popup.one("open",x(this._popupOpen,this))},_focusElement:function(e){var t=s(),n=this.wrapper,i=this.filterInput,r=e===i?n:i;i&&r[0]===t&&(this._prevent=!0,this._focused=e.focus())},_filter:function(e){var n,i;e&&(n=this,i=n.options.ignoreCase,i&&(e=e.toLowerCase()),n._select(function(r){var o=n._text(r);return o!==t?(o+="",i&&(o=o.toLowerCase()),0===o.indexOf(e)):t}))},_search:function(){var e=this,n=e.dataSource,i=e.selectedIndex,r=e._word;if(clearTimeout(e._typing),"none"!==e.options.filter)e._typing=setTimeout(function(){var t=e.filterInput.val();e._prev!==t&&(e._prev=t,e.search(t)),e._typing=null},e.options.delay);else{if(e._typing=setTimeout(function(){e._word=""},e.options.delay),-1===i&&(i=0),!e.ul[0].firstChild)return n.one(h,function(){n.data()[0]&&i>-1&&e._selectNext(r,i)}).fetch(),t;e._selectNext(r,i),e._triggerEvents()}},_select:function(e){var n,i,o=this,a=o._current,s=null;return e=o._get(e),e&&e[0]&&!e.hasClass(_)&&(o._state===b&&(o._state=k),a&&a.removeClass(_),i=r.List.inArray(e[0],o.ul[0]),i>-1&&(o.selectedIndex=i,s=o._data()[i],n=o._value(s),null===n&&(n=""),o._textAccessor(s),o._accessor(n!==t?n:o._text(s),i),o._selectedValue=o._accessor(),o.current(e.addClass(_)),o._optionID&&o._current.attr("aria-selected",!0))),s},_triggerEvents:function(){this.popup.visible()||(this._triggerCascade(),this._change())},_mobile:function(){var e=this,t=e.popup,n=t.element.parents(".km-root").eq(0);n.length&&a&&(t.options.animation.open.effects=a.android||a.meego?"fadeIn":a.ios||a.wp?"slideIn:up":t.options.animation.open.effects)},_filterHeader:function(){var t,n=this.options,i="none"!==n.filter;this.filterInput&&(this.filterInput.off(c).parent().remove(),this.filterInput=null),i&&(t='<span unselectable="on" class="k-icon k-i-search">select</span>',this.filterInput=e('<input class="k-textbox"/>').attr({role:"listbox","aria-haspopup":!0,"aria-expanded":!1}),this.list.prepend(e('<span class="k-list-filter" />').append(this.filterInput.add(t))))},_span:function(){var t,n=this,i=n.wrapper,r="span.k-input";t=i.find(r),t[0]||(i.append('<span unselectable="on" class="k-dropdown-wrap k-state-default"><span unselectable="on" class="k-input">&nbsp;</span><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(n.element),t=i.find(r)),n.span=t,n._inputWrapper=e(i[0].firstChild),n._arrow=i.find(".k-icon")},_wrapper:function(){var e,t=this,n=t.element,i=n[0];e=n.parent(),e.is("span.k-widget")||(e=n.wrap("<span />").parent(),e[0].style.cssText=i.style.cssText),n.hide(),t._focused=t.wrapper=e.addClass("k-widget k-dropdown k-header").addClass(i.className).css("display","").attr({unselectable:"on",role:"listbox","aria-haspopup":!0,"aria-expanded":!1})},_clearSelection:function(){var e=this,n=e.options.optionLabel;return e.options.value="",e._selectedValue="",e.dataSource.view()[0]&&(n||e._userTriggered)?(e.select(0),t):(e.selectedIndex=-1,e.element.val(""),e._textAccessor(e.options.optionLabel),t)},_inputTemplate:function(){var t=this,n=t.options.valueTemplate;n=n?i.template(n):e.proxy(i.template("#:this._text(data)#",{useWithBlock:!1}),t),t.valueTemplate=n},_textAccessor:function(r){var o,a=this.dataItem(),s=this.options,l=this.span;return r===t?l.text():(e.isPlainObject(r)||r instanceof i.data.ObservableObject?a=r:a&&this._text(a)===r||(s.dataTextField?(a={},n(a,s.dataTextField.split("."),r),n(a,s.dataValueField.split("."),this._accessor())):a=r),o=function(){return{elements:l.get(),data:[{dataItem:a}]}},this.angular("cleanup",o),l.html(this.valueTemplate(a)),this.angular("compile",o),t)}});r.plugin(C)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.List,o=i.Select,a=n.caret,s=n.support,l=s.placeholder,c=n._activeElement,d=n.keys,u=".kendoComboBox",h="click"+u,p="mousedown"+u,f="disabled",g="readonly",m="change",v="k-state-default",_="k-state-focused",y="k-state-disabled",w="aria-disabled",b="aria-readonly",k="k-state-selected",x="filter",C="accept",S="rebind",T="mouseenter"+u+" mouseleave"+u,D=null,A=e.proxy,E=o.extend({init:function(t,i){var r,a=this;
a.ns=u,i=e.isArray(i)?{dataSource:i}:i,o.fn.init.call(a,t,i),i=a.options,t=a.element.on("focus"+u,A(a._focusHandler,a)),i.placeholder=i.placeholder||t.attr("placeholder"),a._reset(),a._wrapper(),a._input(),a._tabindex(a.input),a._popup(),a._dataSource(),a._ignoreCase(),a._enable(),a._oldIndex=a.selectedIndex=-1,a._cascade(),a._aria(),i.autoBind?a._filterSource():(r=i.text,!r&&a._isSelect&&(r=t.children(":selected").text()),r&&(a.input.val(r),a._prev=r)),r||a._placeholder(),n.notify(a)},options:{name:"ComboBox",enabled:!0,index:-1,text:null,value:null,autoBind:!0,delay:200,dataTextField:"",dataValueField:"",minLength:0,height:200,highlightFirst:!0,template:"",filter:"none",placeholder:"",suggest:!1,cascadeFrom:"",cascadeFromField:"",ignoreCase:!0,animation:{}},events:["open","close",m,"select","filtering","dataBinding","dataBound","cascade"],setOptions:function(e){o.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria()},current:function(e){var n=this,i=n._current;return e===t?i:(i&&i.removeClass(k),o.fn.current.call(n,e),t)},destroy:function(){var e=this;e.input.off(u),e.element.off(u),e._inputWrapper.off(u),o.fn.destroy.call(e)},_focusHandler:function(){this.input.focus()},_arrowClick:function(){this._toggle()},_inputFocus:function(){this._inputWrapper.addClass(_),this._placeholder(!1)},_inputFocusout:function(){var e=this;e._inputWrapper.removeClass(_),clearTimeout(e._typing),e._typing=null,e.options.text!==e.input.val()&&e.text(e.text()),e._placeholder(),e._blur(),e.element.blur()},_editable:function(e){var t=this,n=e.disable,i=e.readonly,r=t._inputWrapper.off(u),o=t.element.add(t.input.off(u)),a=t._arrow.parent().off(h+" "+p);i||n?(r.addClass(n?y:v).removeClass(n?v:y),o.attr(f,n).attr(g,i).attr(w,n).attr(b,i)):(r.addClass(v).removeClass(y).on(T,t._toggleHover),o.removeAttr(f).removeAttr(g).attr(w,!1).attr(b,!1),a.on(h,A(t._arrowClick,t)).on(p,function(e){e.preventDefault()}),t.input.on("keydown"+u,A(t._keydown,t)).on("focus"+u,A(t._inputFocus,t)).on("focusout"+u,A(t._inputFocusout,t)))},open:function(){var e=this,t=e._state,n=e.dataSource.options.serverFiltering;e.popup.visible()||(!e.ul[0].firstChild&&t!==x||t===C&&!n?(e._open=!0,e._state=S,e._filterSource()):(e.popup.open(),e._scroll(e._current)))},refresh:function(){var i,r,o=this,a=o.ul[0],s=o.options,l=o._state,d=o._data(),u=d.length,h=!0;o._angularItems("cleanup"),o.trigger("dataBinding"),a.innerHTML=n.render(o.template,d),o._height(u),o.popup.visible()&&o.popup._position(),o._isSelect&&(i=o.element[0].children[0],l===S&&(o._state=""),r=o._option,o._option=t,o._options(d),r&&r[0].selected?o._custom(r.val(),h):o._bound||i||o._custom("",h)),u&&(s.highlightFirst&&o.current(e(a.firstChild)),s.suggest&&o.input.val()&&o._request!==t&&o.suggest(e(a.firstChild))),l===x||o._fetch||o._selectItem(),o._open&&(o._open=!1,o._typing&&o.input[0]!==c()?o.popup.close():o.toggle(!!u),o._typing=null),o._touchScroller&&o._touchScroller.reset(),o._makeUnselectable(),o._hideBusy(),o._bound=!0,o._angularItems("compile"),o.trigger("dataBound")},suggest:function(e){var n,i=this,o=i.input[0],s=i.text(),l=a(o)[0],u=i._last;return u==d.BACKSPACE||u==d.DELETE?(i._last=t,t):(e=e||"","string"!=typeof e&&(n=r.inArray(e[0],i.ul[0]),e=n>-1?i._text(i.dataSource.view()[n]):""),0>=l&&(l=s.toLowerCase().indexOf(e.toLowerCase())+1),e?(n=e.toLowerCase().indexOf(s.toLowerCase()),n>-1&&(s+=e.substring(n+s.length))):s=s.substring(0,l),s.length===l&&e||(o.value=s,o===c()&&a(o,l,s.length)),t)},text:function(e){var n,i,r,o,a,s;return e=null===e?"":e,n=this,i=n.input[0],r=n.options.ignoreCase,o=e,e===t?i.value:(a=n.dataItem(),a&&n._text(a)===e&&(s=n._value(a),null===s?s="":s+="",s===n._old)?(n._triggerCascade(),t):(r&&(o=o.toLowerCase()),n._select(function(e){return e=n._text(e),r&&(e=(e+"").toLowerCase()),e===o}),0>n.selectedIndex&&(n._custom(e),i.value=e),n._prev=i.value,n._triggerCascade(),t))},toggle:function(e){this._toggle(e,!0)},value:function(e){var n,i=this,r=i.options;return e===t?i._accessor():(null!==e&&(e=""+e),i._selectedValue=e,!i._open&&e&&i._fetchItems(e)||(n=i._index(e),n>-1?i.select(n):(i.current(D),i._custom(e),(r.value!==e||r.text!==i.input.val())&&(i.text(e),i._placeholder())),i._old=i._accessor(),i._oldIndex=i.selectedIndex),t)},_accept:function(e){var t=this;e?t._focus(e):(t.text(t.text()),t._change())},_custom:function(t,n){var i=this,r=i.element,o=i._option;i._state!==x||n||(i._state=C),i._isSelect?(o||(o=i._option=e("<option/>"),r.append(o)),o.text(t),o[0].selected=!0):r.val(t),i._selectedValue=t},_filter:function(e){var n=this,i=n.options,r=n.dataSource,o=i.ignoreCase,a=function(i){var r=n._text(i);return r!==t?(r+="",""!==r&&""===e?!1:(o&&(r=r.toLowerCase()),0===r.indexOf(e))):t};return o&&(e=e.toLowerCase()),n.ul[0].firstChild?(-1!==n._highlight(a)&&(i.suggest&&n._current&&n.suggest(n._current),n.open()),n._hideBusy(),t):(r.one(m,function(){r.view()[0]&&n.search(e)}).fetch(),t)},_highlight:function(n){var i,o=this;return n===t||null===n?-1:(n=o._get(n),i=r.inArray(n[0],o.ul[0]),-1==i&&(o.options.highlightFirst&&!o.text()?(n=o.ul[0].firstChild,n&&(n=e(n))):n=D),o.current(n),i)},_input:function(){var t,n=this,i=n.element.removeClass("k-input")[0],r=i.accessKey,o=n.wrapper,a="input.k-input",s=i.name||"";s&&(s='name="'+s+'_input" '),t=o.find(a),t[0]||(o.append('<span tabindex="-1" unselectable="on" class="k-dropdown-wrap k-state-default"><input '+s+'class="k-input" type="text" autocomplete="off"/><span tabindex="-1" unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(n.element),t=o.find(a)),t[0].style.cssText=i.style.cssText,i.maxLength>-1&&(t[0].maxLength=i.maxLength),t.addClass(i.className).val(this.options.text||i.value).css({width:"100%",height:i.style.height}).attr({role:"combobox","aria-expanded":!1}).show(),l&&t.attr("placeholder",n.options.placeholder),r&&(i.accessKey="",t[0].accessKey=r),n._focused=n.input=t,n._inputWrapper=e(o[0].firstChild),n._arrow=o.find(".k-icon").attr({role:"button",tabIndex:-1}),i.id&&n._arrow.attr("aria-controls",n.ul[0].id)},_keydown:function(e){var t=this,n=e.keyCode;t._last=n,clearTimeout(t._typing),t._typing=null,n==d.TAB||t._move(e)||t._search()},_placeholder:function(e){if(!l){var n,i=this,r=i.input,o=i.options.placeholder;if(o){if(n=i.value(),e===t&&(e=!n),r.toggleClass("k-readonly",e),!e){if(n)return;o=""}r.val(o),o||r[0]!==c()||a(r[0],0,0)}}},_search:function(){var e=this;e._typing=setTimeout(function(){var t=e.text();e._prev!==t&&(e._prev=t,e.search(t)),e._typing=null},e.options.delay)},_select:function(e){var n,i,r=this,o=r._data(),a=r._highlight(e);r.selectedIndex=a,-1!==a&&(r._state===x&&(r._state=C),r._current.addClass(k),o=o[a],n=r._text(o),i=r._value(o),null===i&&(i=""),r._prev=r.input[0].value=n,r._accessor(i!==t?i:n,a),r._selectedValue=r._accessor(),r._placeholder(),r._optionID&&r._current.attr("aria-selected",!0))},_wrapper:function(){var e=this,t=e.element,n=t.parent();n.is("span.k-widget")||(n=t.hide().wrap("<span />").parent(),n[0].style.cssText=t[0].style.cssText),e.wrapper=n.addClass("k-widget k-combobox k-header").addClass(t[0].className).css("display","")},_clearSelection:function(e,t){var n=this,i=e._selectedValue||e.value(),r=i&&-1===e.selectedIndex;(t||!i||r)&&(n.value(""),n.options.value="")}});i.plugin(E)}(window.kendo.jQuery),function(e,t){function n(e,t){var n;if(null===e&&null!==t||null!==e&&null===t)return!1;if(n=e.length,n!==t.length)return!1;for(;n--;)if(e[n]!==t[n])return!1;return!0}function i(t){var n=t.firstChild;return n&&"none"===n.style.display&&(n=o(n,k)),n?e(n):n}function r(t){var n=t.lastChild;return n&&"none"===n.style.display&&(n=o(n,x)),n?e(n):n}function o(e,t){return e=e[t],e&&"none"===e.style.display&&(e=o(e,t)),e}var a=window.kendo,s=a.ui,l=s.List,c=a.keys,d=a._activeElement,u=a.data.ObservableArray,h=e.proxy,p="id",f="li",g="accept",m="filter",v="open",_="close",y="change",w="progress",b="select",k="nextSibling",x="previousSibling",C=' style="display:none"',S="aria-disabled",T="aria-readonly",D="k-state-focused",A="k-loading-hidden",E="k-state-hover",M="k-state-disabled",P="disabled",I="readonly",z=".kendoMultiSelect",F="click"+z,R="keydown"+z,B="mouseenter"+z,L="mouseleave"+z,O=B+" "+L,H=/"/g,N=e.isArray,V=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"],U=l.extend({init:function(t,n){var i,r,o=this;o.ns=z,l.fn.init.call(o,t,n),o._wrapper(),o._tagList(),o._input(),o._textContainer(),o._loader(),o._tabindex(o.input),t=o.element.attr("multiple","multiple").hide(),n=o.options,r=n.value,n.placeholder||(n.placeholder=t.data("placeholder")),i=t.attr(p),i&&(o._tagID=i+"_tag_active",i+="_taglist",o.tagList.attr(p,i)),o._aria(i),o._dataSource(),o._ignoreCase(),o._popup(),o._values=[],o._dataItems=[],o._reset(),o._enable(),o._placeholder(),n.autoBind?o.dataSource.fetch():r&&(N(r)||(r=[r]),(e.isPlainObject(r[0])||!n.dataValueField)&&(o._retrieveData=!0,o.dataSource.data(r),o.value(o._initialValues))),a.notify(o)},options:{name:"MultiSelect",enabled:!0,autoBind:!0,autoClose:!0,highlightFirst:!0,dataTextField:"",dataValueField:"",filter:"startswith",ignoreCase:!0,minLength:0,delay:100,value:null,maxSelectedItems:null,itemTemplate:"",tagTemplate:"",placeholder:"",height:200,animation:{}},events:[v,_,y,b,"filtering","dataBinding","dataBound"],setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&this.dataSource.fetch()},setOptions:function(e){l.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria(this.tagList.attr(p))},current:function(e){return this.currentTag(null),l.fn.current.call(this,e)},currentTag:function(e){var n=this;return e===t?n._currentTag:(n._currentTag&&(n._currentTag.removeClass(D).removeAttr(p),n.input.removeAttr("aria-activedescendant")),e&&(e.addClass(D).attr(p,n._tagID),n.input.attr("aria-activedescendant",n._tagID)),n._currentTag=e,t)},dataItems:function(){return this._dataItems},destroy:function(){var e=this,t=e.ns;clearTimeout(e._busy),clearTimeout(e._typing),e.wrapper.off(t),e.tagList.off(t),e.input.off(t),l.fn.destroy.call(e)},_wrapperMousedown:function(e){var t=this,n="input"!==e.target.nodeName.toLowerCase();n&&e.preventDefault(),-1===e.target.className.indexOf("k-delete")&&(t.input[0]!==d()&&n&&t.input.focus(),0===t.options.minLength&&t.open())},_inputFocus:function(){this._placeholder(!1),this.wrapper.addClass(D)},_inputFocusout:function(){var e=this;clearTimeout(e._typing),e.wrapper.removeClass(D),e._placeholder(!e._dataItems[0],!0),e.close(),e._state===m&&(e._state=g),e.element.blur()},_tagListClick:function(t){this._unselect(e(t.target).closest(f)),this._change(),this.close()},_editable:function(t){var n=this,i=t.disable,r=t.readonly,o=n.wrapper.off(z),a=n.tagList.off(z),s=n.element.add(n.input.off(z));r||i?(i?o.addClass(M):o.removeClass(M),s.attr(P,i).attr(I,r).attr(S,i).attr(T,r)):(o.removeClass(M).on(O,n._toggleHover).on("mousedown"+z,h(n._wrapperMousedown,n)),n.input.on(R,h(n._keydown,n)).on("paste"+z,h(n._search,n)).on("focus"+z,h(n._inputFocus,n)).on("focusout"+z,h(n._inputFocusout,n)),s.removeAttr(P).removeAttr(I).attr(S,!1).attr(T,!1),a.on(B,f,function(){e(this).addClass(E)}).on(L,f,function(){e(this).removeClass(E)}).on(F,".k-delete",h(n._tagListClick,n)))},_close:function(){var e=this;e.options.autoClose||!e._visibleItems?e.close():(e.current(e.options.highlightFirst?i(e.ul[0]):null),e.popup._position())},close:function(){this.popup.close(),this.current(null)},open:function(){var e=this;e._request&&(e._retrieveData=!1),!e.ul[0].firstChild||e._state===g||e._retrieveData?(e._state="",e._open=!0,e._retrieveData=!1,e._filterSource()):e._visibleItems&&e._allowSelection()&&(e.popup.open(),e.current(e.options.highlightFirst?i(e.ul[0]):null))},toggle:function(e){e=e!==t?e:!this.popup.visible(),this[e?v:_]()},refresh:function(){var e,t=this,n=null;t.trigger("dataBinding"),e=t._render(t.dataSource.view()),t._height(e),t._setInitialValues&&(t._setInitialValues=!1,t.value(t._initialValues)),t._open&&(t._open=!1,t.toggle(e)),t.popup.visible()&&(t.popup._position(),t.options.highlightFirst&&(n=i(t.ul[0]))),t.current(n),t._touchScroller&&t._touchScroller.reset(),t._makeUnselectable(),t._hideBusy(),t.trigger("dataBound")},search:function(e){var t,n,i=this,r=i.options,o=r.ignoreCase,a=r.filter,s=r.dataTextField,l=i.input.val();r.placeholder===l&&(l=""),clearTimeout(i._typing),e="string"==typeof e?e:l,n=e.length,(!n||n>=r.minLength)&&(i._state=m,i._open=!0,t={value:o?e.toLowerCase():e,field:s,operator:a,ignoreCase:o},i._filterSource(t,i._retrieveData),i._retrieveData=!1)},value:function(n){var i,r=this,o=e(r.tagList[0].children),a=o.length,s=0;if(n===t)return r._values;if(!r._fetchItems(n)){for(;a>s;s++)r._unselect(o.eq(s));if(null!==n){for(n=N(n)||n instanceof u?n:[n],s=0,a=n.length;a>s;s++)i=r._index(n[s]),i>-1&&r._select(i);r._old=r._values.slice()}}},_dataSource:function(){var e=this,t=e.element,n=e.options,i=n.dataSource||{};i=N(i)?{data:i}:i,i.select=t,i.fields=[{field:n.dataTextField},{field:n.dataValueField}],e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._refreshHandler=h(e.refresh,e),e._progressHandler=h(e._showBusy,e)),e.dataSource=a.data.DataSource.create(i).bind(y,e._refreshHandler).bind(w,e._progressHandler)},_fetchItems:function(n){var i=this,r=e.isArray(n)&&0===n.length;if(!r&&n)return i._fetch||i.ul[0].firstChild?t:(i.dataSource.one(y,function(){i.value(n),i._fetch=!1}),i._fetch=!0,i.dataSource.fetch(),!0)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(t._initialValues),t._placeholder()})},t._form=r.on("reset",t._resetHandler))},_initValue:function(){var e=this,n=e.options.value||e.element.val();null===n?n=[]:(N(n)||(n=[n]),n=e._mapValues(n)),e._old=e._initialValues=n,e._setInitialValues=n[0]!==t},_mapValues:function(t){var n=this;return t&&e.isPlainObject(t[0])&&(t=e.map(t,function(e){return n._value(e)})),t},_change:function(){var e=this,t=e.value();n(t,e._old)||(e._old=t.slice(),e.trigger(y),e.element.trigger(y))},_click:function(n){var i=this,r=e(n.currentTarget);if(!n.isDefaultPrevented()){if(i.trigger(b,{item:r}))return i._close(),t;i._select(r),i._change(),i._close()}},_item:function(e,t){return e=e[t](),e[0]&&!e.is(":visible")&&(e=this._item(e,t)),e},_keydown:function(n){var s=this,l=n.keyCode,d=s._currentTag,u=s._current,h=s.input.val(),p=a.support.isRtl(s.wrapper),f=s.popup.visible();if(l===c.DOWN){if(n.preventDefault(),!f)return s.open(),t;u=u?o(u[0],k):i(s.ul[0]),u&&s.current(e(u))}else if(l===c.UP)f&&(u=u?o(u[0],x):r(s.ul[0]),s.current(e(u)),s._current[0]||s.close()),n.preventDefault();else if(l===c.LEFT&&!p||l===c.RIGHT&&p)h||(d=d?d.prev():e(s.tagList[0].lastChild),d[0]&&s.currentTag(d));else if(l===c.RIGHT&&!p||l===c.LEFT&&p)!h&&d&&(d=d.next(),s.currentTag(d[0]?d:null));else if(l===c.ENTER&&f){if(u){if(s.trigger(b,{item:u}))return s._close(),t;s._select(u)}s._change(),s._close(),n.preventDefault()}else l===c.ESC?(f?n.preventDefault():s.currentTag(null),s.close()):l===c.HOME?f?s.current(i(s.ul[0])):h||(d=s.tagList[0].firstChild,d&&s.currentTag(e(d))):l===c.END?f?s.current(r(s.ul[0])):h||(d=s.tagList[0].lastChild,d&&s.currentTag(e(d))):l!==c.DELETE&&l!==c.BACKSPACE||h?(clearTimeout(s._typing),setTimeout(function(){s._scale()}),s._search()):(l!==c.BACKSPACE||d||(d=e(s.tagList[0].lastChild)),d&&d[0]&&(s._unselect(d),s._change(),s._close()))},_hideBusy:function(){var e=this;clearTimeout(e._busy),e.input.attr("aria-busy",!1),e._loading.addClass(A),e._request=!1,e._busy=null},_showBusyHandler:function(){this.input.attr("aria-busy",!0),this._loading.removeClass(A)},_showBusy:function(){var e=this;e._request=!0,e._busy||(e._busy=setTimeout(h(e._showBusyHandler,e),100))},_placeholder:function(e,n){var i=this,r=i.input,o=d();e===t&&(e=!1,r[0]!==o&&(e=!i._dataItems[0])),i._prev="",r.toggleClass("k-readonly",e).val(e?i.options.placeholder:""),r[0]!==o||n||a.caret(r[0],0,0),i._scale()},_scale:function(){var e,t=this,n=t.wrapper,i=n.width(),r=t._span.text(t.input.val());n.is(":visible")?e=r.width()+25:(r.appendTo(document.documentElement),i=e=r.width()+25,r.appendTo(n)),t.input.width(e>i?i:e)},_option:function(e,n){var i="<option",r=this._text(e),o=this._value(e);return o!==t&&(o+="",-1!==o.indexOf('"')&&(o=o.replace(H,"&quot;")),i+=' value="'+o+'"'),n&&(i+=' selected="selected"'),i+=">",r!==t&&(i+=a.htmlEncode(r)),i+="</option>"},_render:function(e){for(var t,n,i=this,r=e.length,o=i.itemTemplate,a=i._dataItems.slice(0),s=0,l=0,c="",d="";r>l;l++)t=e[l],n=i._selected(a,t),d+=o(t,l,n),c+=i._option(t,n),n||(s+=1);if(r=a.length)for(l=0;r>l;l++)c+=i._option(a[l],!0);return i.ul[0].innerHTML=d,i.element.html(c),i._visibleItems=s,s},_selected:function(e,n){var i,r=this,o=r._text,a=r._value,s=a(n),l=e.length,c=!1,d=0;for(s===t&&(s=o(n));l>d;d++)if(n=e[d],i=a(n),i===t&&(i=o(n)),i!==t&&i===s){c=!0;break}return c&&e.splice(d,1),c},_search:function(){var e=this;e._typing=setTimeout(function(){var t=e.input.val();e._prev!==t&&(e._prev=t,e.search(t))},e.options.delay)},_allowSelection:function(){var e=this.options.maxSelectedItems;return null===e||e>this._values.length},_select:function(e){var t,n,i=this,r=i._values;i._allowSelection()&&(isNaN(e)?n=e.hide().data("idx"):(n=e,i.ul[0].children[n].style.display="none"),i.element[0].children[n].selected=!0,t=i.dataSource.view()[n],i.tagList.append(i.tagTemplate(t)),i._dataItems.push(t),r.push(i._dataValue(t)),i._visibleItems-=1,i.currentTag(null),i._placeholder(),i._height(i._visibleItems),i._state===m&&(i._state=g))},_unselect:function(t){var n,i,r,o,a,s=this,l=t.index();if(t.remove(),s.currentTag(null),s._values.splice(l,1),n=s._dataItems.splice(l,1)[0],i=s._dataValue(n),l=s._index(i),-1!==l)e(s.ul[0].children[l]).show(),s.element[0].children[l].selected=!1,s._visibleItems+=1,s._height(s._visibleItems);else for(l=s.dataSource.view().length,r=s.element[0].children,a=r.length;a>l;l++)if(o=r[l],o.value==i){o.selected=!1;break}s._placeholder()},_template:function(){var e,t=this,n=t.options,i=n.itemTemplate,r=n.tagTemplate,o=n.dataSource;t.element[0].length&&!o&&(n.dataTextField=n.dataTextField||"text",n.dataValueField=n.dataValueField||"value"),e=a.template("#:"+a.expr(n.dataTextField,"data")+"#",{useWithBlock:!1}),i=i?a.template(i):e,r=r?a.template(r):e,t.itemTemplate=function(e,t,n){return'<li tabindex="-1" role="option" data-idx="'+t+'" unselectable="on" class="k-item"'+(n?C:"")+">"+i(e)+"</li>"},t.tagTemplate=function(e){return'<li class="k-button" unselectable="on"><span unselectable="on">'+r(e)+'</span><span unselectable="on" class="k-icon k-delete">delete</span></li>'}},_input:function(){var t=this,n=t.element[0].accessKey,i=t._innerWrapper.children("input.k-input");i[0]||(i=e('<input class="k-input" style="width: 25px" />').appendTo(t._innerWrapper)),t.element.removeAttr("accesskey"),t._focused=t.input=i.attr({accesskey:n,autocomplete:"off",role:"listbox","aria-expanded":!1})},_tagList:function(){var t=this,n=t._innerWrapper.children("ul");n[0]||(n=e('<ul role="listbox" unselectable="on" class="k-reset"/>').appendTo(t._innerWrapper)),t.tagList=n},_loader:function(){this._loading=e('<span class="k-icon k-loading '+A+'"></span>').insertAfter(this.input)},_textContainer:function(){var t=a.getComputedStyles(this.input[0],V);t.position="absolute",t.visibility="hidden",t.top=-3333,t.left=-3333,this._span=e("<span/>").css(t).appendTo(this.wrapper)},_wrapper:function(){var t=this,n=t.element,i=n.parent("span.k-multiselect");i[0]||(i=n.wrap('<div class="k-widget k-multiselect k-header" unselectable="on" />').parent(),i[0].style.cssText=n[0].style.cssText,e('<div class="k-multiselect-wrap k-floatwrap" unselectable="on" />').insertBefore(n)),t.wrapper=i.addClass(n[0].className).css("display",""),t._innerWrapper=e(i[0].firstChild)}});s.plugin(U)}(window.kendo.jQuery),function(e,t){function n(e,t,n){var i=n?" k-slider-horizontal":" k-slider-vertical",r=e.style?e.style:t.attr("style"),o=t.attr("class")?" "+t.attr("class"):"",a="";return"bottomRight"==e.tickPlacement?a=" k-slider-bottomright":"topLeft"==e.tickPlacement&&(a=" k-slider-topleft"),r=r?" style='"+r+"'":"","<div class='k-widget k-slider"+i+o+"'"+r+"><div class='k-slider-wrap"+(e.showButtons?" k-slider-buttons":"")+a+"'></div></div>"}function i(e,t,n){var i="";return i="increase"==t?n?"k-i-arrow-e":"k-i-arrow-n":n?"k-i-arrow-w":"k-i-arrow-s","<a class='k-button k-button-"+t+"'><span class='k-icon "+i+"' title='"+e[t+"ButtonTitle"]+"'>"+e[t+"ButtonTitle"]+"</span></a>"}function r(e,t){var n,i="<ul class='k-reset k-slider-items'>",r=k.floor(c(t/e.smallStep))+1;for(n=0;r>n;n++)i+="<li class='k-tick' role='presentation'>&nbsp;</li>";return i+="</ul>"}function o(e,t){var n=t.is("input")?1:2,i=2==n?e.leftDragHandleTitle:e.dragHandleTitle;return"<div class='k-slider-track'><div class='k-slider-selection'><!-- --></div><a href='#' class='k-draghandle' title='"+i+"' role='slider' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+(n>1?e.selectionStart||e.min:e.value||e.min)+"'>Drag</a>"+(n>1?"<a href='#' class='k-draghandle' title='"+e.rightDragHandleTitle+"'role='slider' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+(e.selectionEnd||e.max)+"'>Drag</a>":"")+"</div>"}function a(e){return function(t){return t+e}}function s(e){return function(){return e}}function l(e){return(e+"").replace(".",f.cultures.current.numberFormat["."])}function c(e){e=parseFloat(e,10);var t=k.pow(10,q||0);return k.round(e*t)/t}function d(e,n){var i=y(e.getAttribute(n));return null===i&&(i=t),i}function u(e){return typeof e!==Y}function h(e){return 1e4*e}var p,f=window.kendo,g=f.ui.Widget,m=f.ui.Draggable,v=e.extend,_=f.format,y=f.parseFloat,w=e.proxy,b=e.isArray,k=Math,x=f.support,C=x.pointers,S=x.msPointers,T="change",D="slide",A=".slider",E="touchstart"+A+" mousedown"+A,M=C?"pointerdown"+A:S?"MSPointerDown"+A:E,P="touchend"+A+" mouseup"+A,I=C?"pointerup":S?"MSPointerUp"+A:P,z="moveSelection",F="keydown"+A,R="click"+A,B="mouseover"+A,L="focus"+A,O="blur"+A,H=".k-draghandle",N=".k-slider-track",V=".k-tick",U="k-state-selected",W="k-state-focused",j="k-state-default",G="k-state-disabled",q=3,$="disabled",Y="undefined",K="tabindex",Q=f.getTouches,X=g.extend({init:function(e,t){var n,i=this;g.fn.init.call(i,e,t),t=i.options,i._distance=c(t.max-t.min),i._isHorizontal="horizontal"==t.orientation,i._isRtl=i._isHorizontal&&f.support.isRtl(e),i._position=i._isHorizontal?"left":"bottom",i._sizeFn=i._isHorizontal?"width":"height",i._outerSize=i._isHorizontal?"outerWidth":"outerHeight",t.tooltip.format=t.tooltip.enabled?t.tooltip.format||"{0}":"{0}",i._createHtml(),i.wrapper=i.element.closest(".k-slider"),i._trackDiv=i.wrapper.find(N),i._setTrackDivWidth(),i._maxSelection=i._trackDiv[i._sizeFn](),i._sliderItemsInit(),i._tabindex(i.wrapper.find(H)),i[t.enabled?"enable":"disable"](),n=f.support.isRtl(i.wrapper)?-1:1,i._keyMap={37:a(-1*n*t.smallStep),40:a(-t.smallStep),39:a(1*n*t.smallStep),38:a(+t.smallStep),35:s(t.max),36:s(t.min),33:a(+t.largeStep),34:a(-t.largeStep)},f.notify(i)},events:[T,D],options:{enabled:!0,min:0,max:10,smallStep:1,largeStep:5,orientation:"horizontal",tickPlacement:"both",tooltip:{enabled:!0,format:"{0}"}},_resize:function(){this._setTrackDivWidth(),this.wrapper.find(".k-slider-items").remove(),this._maxSelection=this._trackDiv[this._sizeFn](),this._sliderItemsInit(),this._refresh()},_sliderItemsInit:function(){var e=this,t=e.options,n=e._maxSelection/((t.max-t.min)/t.smallStep),i=e._calculateItemsWidth(k.floor(e._distance/t.smallStep));"none"!=t.tickPlacement&&n>=2&&(e._trackDiv.before(r(t,e._distance)),e._setItemsWidth(i),e._setItemsTitle()),e._calculateSteps(i),"none"!=t.tickPlacement&&n>=2&&t.largeStep>=t.smallStep&&e._setItemsLargeTick()},getSize:function(){return f.dimensions(this.wrapper)},_setTrackDivWidth:function(){var e=this,t=2*parseFloat(e._trackDiv.css(e._isRtl?"right":e._position),10);e._trackDiv[e._sizeFn](e.wrapper[e._sizeFn]()-2-t)},_setItemsWidth:function(t){var n,i=this,r=i.options,o=0,a=t.length-1,s=i.wrapper.find(V),l=0,c=2,d=s.length,u=0;for(n=0;d-2>n;n++)e(s[n+1])[i._sizeFn](t[n]);if(i._isHorizontal?(e(s[o]).addClass("k-first")[i._sizeFn](t[a-1]),e(s[a]).addClass("k-last")[i._sizeFn](t[a])):(e(s[a]).addClass("k-first")[i._sizeFn](t[a]),e(s[o]).addClass("k-last")[i._sizeFn](t[a-1])),i._distance%r.smallStep!==0&&!i._isHorizontal){for(n=0;t.length>n;n++)u+=t[n];l=i._maxSelection-u,l+=parseFloat(i._trackDiv.css(i._position),10)+c,i.wrapper.find(".k-slider-items").css("padding-top",l)}},_setItemsTitle:function(){for(var t=this,n=t.options,i=t.wrapper.find(V),r=n.min,o=i.length,a=t._isHorizontal&&!t._isRtl?0:o-1,s=t._isHorizontal&&!t._isRtl?o:-1,l=t._isHorizontal&&!t._isRtl?1:-1;a-s!==0;a+=l)e(i[a]).attr("title",_(n.tooltip.format,c(r))),r+=n.smallStep},_setItemsLargeTick:function(){var t,n,i,r=this,o=r.options,a=r.wrapper.find(V),s=0;if(h(o.largeStep)%h(o.smallStep)===0||r._distance/o.largeStep>=3)for(r._isHorizontal||r._isRtl||(a=e.makeArray(a).reverse()),s=0;a.length>s;s++)t=e(a[s]),n=r._values[s],i=h(n-this.options.min),i%h(o.smallStep)===0&&i%h(o.largeStep)===0&&(t.addClass("k-tick-large").html("<span class='k-label'>"+t.attr("title")+"</span>"),0!==s&&s!==a.length-1&&t.css("line-height",t[r._sizeFn]()+"px"))},_calculateItemsWidth:function(e){var t,n,i,r=this,o=r.options,a=parseFloat(r._trackDiv.css(r._sizeFn))+1,s=a/r._distance;for(r._distance/o.smallStep-k.floor(r._distance/o.smallStep)>0&&(a-=r._distance%o.smallStep*s),t=a/e,n=[],i=0;e-1>i;i++)n[i]=t;return n[e-1]=n[e]=t/2,r._roundWidths(n)},_roundWidths:function(e){var t,n=0,i=e.length;for(t=0;i>t;t++)n+=e[t]-k.floor(e[t]),e[t]=k.floor(e[t]);return n=k.round(n),this._addAdditionalSize(n,e)},_addAdditionalSize:function(e,t){if(0===e)return t;var n,i=parseFloat(t.length-1)/parseFloat(1==e?e:e-1);for(n=0;e>n;n++)t[parseInt(k.round(i*n),10)]+=1;return t},_calculateSteps:function(e){var t,n=this,i=n.options,r=i.min,o=0,a=k.ceil(n._distance/i.smallStep),s=1;if(a+=n._distance/i.smallStep%1===0?1:0,e.splice(0,0,2*e[a-2]),e.splice(a-1,1,2*e.pop()),n._pixelSteps=[o],n._values=[r],0!==a){for(;a>s;)o+=(e[s-1]+e[s])/2,n._pixelSteps[s]=o,r+=i.smallStep,n._values[s]=c(r),s++;t=n._distance%i.smallStep===0?a-1:a,n._pixelSteps[t]=n._maxSelection,n._values[t]=i.max,n._isRtl&&(n._pixelSteps.reverse(),n._values.reverse())}},_getValueFromPosition:function(e,t){var n,i=this,r=i.options,o=k.max(r.smallStep*(i._maxSelection/i._distance),0),a=0,s=o/2;if(i._isHorizontal?(a=e-t.startPoint,i._isRtl&&(a=i._maxSelection-a)):a=t.startPoint-e,i._maxSelection-(parseInt(i._maxSelection%o,10)-3)/2<a)return r.max;for(n=0;i._pixelSteps.length>n;n++)if(k.abs(i._pixelSteps[n]-a)-1<=s)return c(i._values[n])},_getFormattedValue:function(e,t){var n,i,r,o=this,a="",s=o.options.tooltip;return b(e)?(i=e[0],r=e[1]):t&&t.type&&(i=t.selectionStart,r=t.selectionEnd),t&&(n=t.tooltipTemplate),!n&&s.template&&(n=f.template(s.template)),b(e)||t&&t.type?n?a=n({selectionStart:i,selectionEnd:r}):(i=_(s.format,i),r=_(s.format,r),a=i+" - "+r):(t&&(t.val=e),a=n?n({value:e}):_(s.format,e)),a},_getDraggableArea:function(){var e=this,t=f.getOffset(e._trackDiv);return{startPoint:e._isHorizontal?t.left:t.top+e._maxSelection,endPoint:e._isHorizontal?t.left+e._maxSelection:t.top}},_createHtml:function(){var e=this,t=e.element,r=e.options,a=t.find("input");2==a.length?(a.eq(0).prop("value",l(r.selectionStart)),a.eq(1).prop("value",l(r.selectionEnd))):t.prop("value",l(r.value)),t.wrap(n(r,t,e._isHorizontal)).hide(),r.showButtons&&t.before(i(r,"increase",e._isHorizontal)).before(i(r,"decrease",e._isHorizontal)),t.before(o(r,t))},_focus:function(t){var n=this,i=t.target,r=n.value(),o=n._drag;o||(i==n.wrapper.find(H).eq(0)[0]?(o=n._firstHandleDrag,n._activeHandle=0):(o=n._lastHandleDrag,n._activeHandle=1),r=r[n._activeHandle]),e(i).addClass(W+" "+U),o&&(n._activeHandleDrag=o,o.selectionStart=n.options.selectionStart,o.selectionEnd=n.options.selectionEnd,o._updateTooltip(r))},_focusWithMouse:function(t){t=e(t);var n=this,i=t.is(H)?t.index():0;window.setTimeout(function(){n.wrapper.find(H)[2==i?1:0].focus()},1),n._setTooltipTimeout()},_blur:function(t){var n=this,i=n._activeHandleDrag;e(t.target).removeClass(W+" "+U),i&&(i._removeTooltip(),delete n._activeHandleDrag,delete n._activeHandle)},_setTooltipTimeout:function(){var e=this;e._tooltipTimeout=window.setTimeout(function(){var t=e._drag||e._activeHandleDrag;t&&t._removeTooltip()},300)},_clearTooltipTimeout:function(){var e,t=this;window.clearTimeout(this._tooltipTimeout),e=t._drag||t._activeHandleDrag,e&&e.tooltipDiv&&e.tooltipDiv.stop(!0,!1).css("opacity",1)}}),J=X.extend({init:function(n,i){var r,o=this;n.type="text",i=v({},{value:d(n,"value"),min:d(n,"min"),max:d(n,"max"),smallStep:d(n,"step")},i),n=e(n),i&&i.enabled===t&&(i.enabled=!n.is("[disabled]")),X.fn.init.call(o,n,i),i=o.options,u(i.value)&&null!==i.value||(i.value=i.min,n.prop("value",l(i.min))),i.value=k.max(k.min(i.value,i.max),i.min),r=o.wrapper.find(H),new J.Selection(r,o,i),o._drag=new J.Drag(r,"",o,i)},options:{name:"Slider",showButtons:!0,increaseButtonTitle:"Increase",decreaseButtonTitle:"Decrease",dragHandleTitle:"drag",tooltip:{format:"{0:#,#.##}"},value:null},enable:function(n){var i,r,o,a=this,s=a.options;a.disable(),n!==!1&&(a.wrapper.removeClass(G).addClass(j),a.wrapper.find("input").removeAttr($),i=function(n){var i,r,o,s=Q(n)[0];if(s){if(i=a._isHorizontal?s.location.pageX:s.location.pageY,r=a._getDraggableArea(),o=e(n.target),o.hasClass("k-draghandle"))return o.addClass(W+" "+U),t;a._update(a._getValueFromPosition(i,r)),a._focusWithMouse(n.target),a._drag.dragstart(n),n.preventDefault()}},a.wrapper.find(V+", "+N).on(M,i).end().on(M,function(){e(document.documentElement).one("selectstart",f.preventDefault)}).on(I,function(){a._drag._end()}),a.wrapper.find(H).attr(K,0).on(P,function(){a._setTooltipTimeout()}).on(R,function(e){a._focusWithMouse(e.target),e.preventDefault()}).on(L,w(a._focus,a)).on(O,w(a._blur,a)),r=w(function(e){var t=a._nextValueByIndex(a._valueIndex+1*e);a._setValueInRange(t),a._drag._updateTooltip(t)},a),s.showButtons&&(o=w(function(e,t){this._clearTooltipTimeout(),(1===e.which||x.touch&&0===e.which)&&(r(t),this.timeout=setTimeout(w(function(){this.timer=setInterval(function(){r(t)},60)},this),200))},a),a.wrapper.find(".k-button").on(P,w(function(e){this._clearTimer(),a._focusWithMouse(e.target)},a)).on(B,function(t){e(t.currentTarget).addClass("k-state-hover")}).on("mouseout"+A,w(function(t){e(t.currentTarget).removeClass("k-state-hover"),this._clearTimer()},a)).eq(0).on(E,w(function(e){o(e,1)},a)).click(!1).end().eq(1).on(E,w(function(e){o(e,-1)},a)).click(f.preventDefault)),a.wrapper.find(H).off(F,!1).on(F,w(this._keydown,a)),s.enabled=!0)},disable:function(){var t=this;t.wrapper.removeClass(j).addClass(G),e(t.element).prop($,$),t.wrapper.find(".k-button").off(E).on(E,f.preventDefault).off(P).on(P,f.preventDefault).off("mouseleave"+A).on("mouseleave"+A,f.preventDefault).off(B).on(B,f.preventDefault),t.wrapper.find(V+", "+N).off(M).off(I),t.wrapper.find(H).attr(K,-1).off(P).off(F).off(R).off(L).off(O),t.options.enabled=!1},_update:function(e){var t=this,n=t.value()!=e;t.value(e),n&&t.trigger(T,{value:t.options.value})},value:function(e){var n=this,i=n.options;return e=c(e),isNaN(e)?i.value:(e>=i.min&&i.max>=e&&i.value!=e&&(n.element.prop("value",l(e)),i.value=e,n._refreshAriaAttr(e),n._refresh()),t)},_refresh:function(){this.trigger(z,{value:this.options.value})},_refreshAriaAttr:function(e){var t,n=this,i=n._drag;t=i&&i._tooltipDiv?i._tooltipDiv.text():n._getFormattedValue(e,null),this.wrapper.find(H).attr("aria-valuenow",e).attr("aria-valuetext",t)},_clearTimer:function(){clearTimeout(this.timeout),clearInterval(this.timer)},_keydown:function(e){var t=this;e.keyCode in t._keyMap&&(t._clearTooltipTimeout(),t._setValueInRange(t._keyMap[e.keyCode](t.options.value)),t._drag._updateTooltip(t.value()),e.preventDefault())
},_setValueInRange:function(e){var n=this,i=n.options;return e=c(e),isNaN(e)?(n._update(i.min),t):(e=k.max(k.min(e,i.max),i.min),n._update(e),t)},_nextValueByIndex:function(e){var t=this._values.length;return this._isRtl&&(e=t-1-e),this._values[k.max(0,k.min(e,t-1))]},destroy:function(){var e=this;g.fn.destroy.call(e),e.wrapper.off(A).find(".k-button").off(A).end().find(H).off(A).end().find(V+", "+N).off(A).end(),e._drag.draggable.destroy(),e._drag._removeTooltip(!0)}});J.Selection=function(e,t,n){function i(i){var r=i-n.min,o=t._valueIndex=k.ceil(c(r/n.smallStep)),a=parseInt(t._pixelSteps[o],10),s=t._trackDiv.find(".k-slider-selection"),l=parseInt(e[t._outerSize]()/2,10),d=t._isRtl?2:0;s[t._sizeFn](t._isRtl?t._maxSelection-a:a),e.css(t._position,a-l-d)}i(n.value),t.bind([T,D,z],function(e){i(parseFloat(e.value,10))})},J.Drag=function(e,t,n,i){var r=this;r.owner=n,r.options=i,r.element=e,r.type=t,r.draggable=new m(e,{distance:0,dragstart:w(r._dragstart,r),drag:w(r.drag,r),dragend:w(r.dragend,r),dragcancel:w(r.dragcancel,r)}),e.click(!1)},J.Drag.prototype={dragstart:function(e){this.owner._activeDragHandle=this,this.draggable.userEvents.cancel(),this.draggable.userEvents._start(e)},_dragstart:function(n){var i=this,r=i.owner,o=i.options;return o.enabled?(this.owner._activeDragHandle=this,r.element.off(B),r.wrapper.find("."+W).removeClass(W+" "+U),i.element.addClass(W+" "+U),e(document.documentElement).css("cursor","pointer"),i.dragableArea=r._getDraggableArea(),i.step=k.max(o.smallStep*(r._maxSelection/r._distance),0),i.type?(i.selectionStart=o.selectionStart,i.selectionEnd=o.selectionEnd,r._setZIndex(i.type)):i.oldVal=i.val=o.value,i._removeTooltip(!0),i._createTooltip(),t):(n.preventDefault(),t)},_createTooltip:function(){var t,n,i=this,r=i.owner,o=i.options.tooltip,a="",s=e(window);o.enabled&&(o.template&&(t=i.tooltipTemplate=f.template(o.template)),e(".k-slider-tooltip").remove(),i.tooltipDiv=e("<div class='k-widget k-tooltip k-slider-tooltip'><!-- --></div>").appendTo(document.body),a=r._getFormattedValue(i.val||r.value(),i),i.type||(n="k-callout-"+(r._isHorizontal?"s":"e"),i.tooltipInnerDiv="<div class='k-callout "+n+"'><!-- --></div>",a+=i.tooltipInnerDiv),i.tooltipDiv.html(a),i._scrollOffset={top:s.scrollTop(),left:s.scrollLeft()},i.moveTooltip())},drag:function(e){var t,n=this,i=n.owner,r=e.x.location,o=e.y.location,a=n.dragableArea.startPoint,s=n.dragableArea.endPoint;e.preventDefault(),n.val=i._isHorizontal?i._isRtl?n.constrainValue(r,a,s,s>r):n.constrainValue(r,a,s,r>=s):n.constrainValue(o,s,a,s>=o),n.oldVal!=n.val&&(n.oldVal=n.val,n.type?("firstHandle"==n.type?n.selectionStart=n.selectionEnd>n.val?n.val:n.selectionEnd=n.val:n.val>n.selectionStart?n.selectionEnd=n.val:n.selectionStart=n.selectionEnd=n.val,t={values:[n.selectionStart,n.selectionEnd],value:[n.selectionStart,n.selectionEnd]}):t={value:n.val},i.trigger(D,t)),n._updateTooltip(n.val)},_updateTooltip:function(e){var t=this,n=t.options,i=n.tooltip,r="";i.enabled&&(t.tooltipDiv||t._createTooltip(),r=t.owner._getFormattedValue(c(e),t),t.type||(r+=t.tooltipInnerDiv),t.tooltipDiv.html(r),t.moveTooltip())},dragcancel:function(){return this.owner._refresh(),e(document.documentElement).css("cursor",""),this._end()},dragend:function(){var t=this,n=t.owner;return e(document.documentElement).css("cursor",""),t.type?n._update(t.selectionStart,t.selectionEnd):(n._update(t.val),t.draggable.userEvents._disposeAll()),t._end()},_end:function(){var e=this,t=e.owner;return t._focusWithMouse(e.element),t.element.on(B),!1},_removeTooltip:function(t){var n=this,i=n.owner;n.tooltipDiv&&i.options.tooltip.enabled&&i.options.enabled&&(t?(n.tooltipDiv.remove(),n.tooltipDiv=null):n.tooltipDiv.fadeOut("slow",function(){e(this).remove(),n.tooltipDiv=null}))},moveTooltip:function(){var t,n,i,r,o=this,a=o.owner,s=0,l=0,c=o.element,d=f.getOffset(c),u=8,h=e(window),p=o.tooltipDiv.find(".k-callout"),g=o.tooltipDiv.outerWidth(),m=o.tooltipDiv.outerHeight();o.type?(t=a.wrapper.find(H),d=f.getOffset(t.eq(0)),n=f.getOffset(t.eq(1)),a._isHorizontal?(s=n.top,l=d.left+(n.left-d.left)/2):(s=d.top+(n.top-d.top)/2,l=n.left),r=t.eq(0).outerWidth()+2*u):(s=d.top,l=d.left,r=c.outerWidth()+2*u),a._isHorizontal?(l-=parseInt((g-c[a._outerSize]())/2,10),s-=m+p.height()+u):(s-=parseInt((m-c[a._outerSize]())/2,10),l-=g+p.width()+u),a._isHorizontal?(i=o._flip(s,m,r,h.outerHeight()+o._scrollOffset.top),s+=i,l+=o._fit(l,g,h.outerWidth()+o._scrollOffset.left)):(i=o._flip(l,g,r,h.outerWidth()+o._scrollOffset.left),s+=o._fit(s,m,h.outerHeight()+o._scrollOffset.top),l+=i),i>0&&p&&(p.removeClass(),p.addClass("k-callout k-callout-"+(a._isHorizontal?"n":"w"))),o.tooltipDiv.css({top:s,left:l})},_fit:function(e,t,n){var i=0;return e+t>n&&(i=n-(e+t)),0>e&&(i=-e),i},_flip:function(e,t,n,i){var r=0;return e+t>i&&(r+=-(n+t)),0>e+r&&(r+=n+t),r},constrainValue:function(e,t,n,i){var r=this,o=0;return o=e>t&&n>e?r.owner._getValueFromPosition(e,r.dragableArea):i?r.options.max:r.options.min}},f.ui.plugin(J),p=X.extend({init:function(n,i){var r,o=this,a=e(n).find("input"),s=a.eq(0)[0],c=a.eq(1)[0];s.type="text",c.type="text",i=v({},{selectionStart:d(s,"value"),min:d(s,"min"),max:d(s,"max"),smallStep:d(s,"step")},{selectionEnd:d(c,"value"),min:d(c,"min"),max:d(c,"max"),smallStep:d(c,"step")},i),i&&i.enabled===t&&(i.enabled=!a.is("[disabled]")),X.fn.init.call(o,n,i),i=o.options,u(i.selectionStart)&&null!==i.selectionStart||(i.selectionStart=i.min,a.eq(0).prop("value",l(i.min))),u(i.selectionEnd)&&null!==i.selectionEnd||(i.selectionEnd=i.max,a.eq(1).prop("value",l(i.max))),r=o.wrapper.find(H),new p.Selection(r,o,i),o._firstHandleDrag=new J.Drag(r.eq(0),"firstHandle",o,i),o._lastHandleDrag=new J.Drag(r.eq(1),"lastHandle",o,i)},options:{name:"RangeSlider",leftDragHandleTitle:"drag",rightDragHandleTitle:"drag",tooltip:{format:"{0:#,#.##}"},selectionStart:null,selectionEnd:null},enable:function(n){var i,r=this,o=r.options;r.disable(),n!==!1&&(r.wrapper.removeClass(G).addClass(j),r.wrapper.find("input").removeAttr($),i=function(n){var i,a,s,l,c,d,u,h=Q(n)[0];if(h){if(i=r._isHorizontal?h.location.pageX:h.location.pageY,a=r._getDraggableArea(),s=r._getValueFromPosition(i,a),l=e(n.target),l.hasClass("k-draghandle"))return r.wrapper.find("."+W).removeClass(W+" "+U),l.addClass(W+" "+U),t;o.selectionStart>s?(c=s,d=o.selectionEnd,u=r._firstHandleDrag):s>r.selectionEnd?(c=o.selectionStart,d=s,u=r._lastHandleDrag):o.selectionEnd-s>=s-o.selectionStart?(c=s,d=o.selectionEnd,u=r._firstHandleDrag):(c=o.selectionStart,d=s,u=r._lastHandleDrag),u.dragstart(n),r._setValueInRange(c,d),r._focusWithMouse(u.element)}},r.wrapper.find(V+", "+N).on(M,i).end().on(M,function(){e(document.documentElement).one("selectstart",f.preventDefault)}).on(I,function(){r._activeDragHandle&&r._activeDragHandle._end()}),r.wrapper.find(H).attr(K,0).on(P,function(){r._setTooltipTimeout()}).on(R,function(e){r._focusWithMouse(e.target),e.preventDefault()}).on(L,w(r._focus,r)).on(O,w(r._blur,r)),r.wrapper.find(H).off(F,f.preventDefault).eq(0).on(F,w(function(e){this._keydown(e,"firstHandle")},r)).end().eq(1).on(F,w(function(e){this._keydown(e,"lastHandle")},r)),r.options.enabled=!0)},disable:function(){var e=this;e.wrapper.removeClass(j).addClass(G),e.wrapper.find("input").prop($,$),e.wrapper.find(V+", "+N).off(M).off(I),e.wrapper.find(H).attr(K,-1).off(P).off(F).off(R).off(L).off(O),e.options.enabled=!1},_keydown:function(e,t){var n,i,r,o=this,a=o.options.selectionStart,s=o.options.selectionEnd;e.keyCode in o._keyMap&&(o._clearTooltipTimeout(),"firstHandle"==t?(r=o._activeHandleDrag=o._firstHandleDrag,a=o._keyMap[e.keyCode](a),a>s&&(s=a)):(r=o._activeHandleDrag=o._lastHandleDrag,s=o._keyMap[e.keyCode](s),a>s&&(a=s)),o._setValueInRange(a,s),n=Math.max(a,o.options.selectionStart),i=Math.min(s,o.options.selectionEnd),r.selectionEnd=Math.max(i,o.options.selectionStart),r.selectionStart=Math.min(n,o.options.selectionEnd),r._updateTooltip(o.value()[o._activeHandle]),e.preventDefault())},_update:function(e,t){var n=this,i=n.value(),r=i[0]!=e||i[1]!=t;n.value([e,t]),r&&n.trigger(T,{values:[e,t],value:[e,t]})},value:function(e){return e&&e.length?this._value(e[0],e[1]):this._value()},_value:function(e,n){var i=this,r=i.options,o=r.selectionStart,a=r.selectionEnd;return isNaN(e)&&isNaN(n)?[o,a]:(e=c(e),n=c(n),e>=r.min&&r.max>=e&&n>=r.min&&r.max>=n&&n>=e&&(o!=e||a!=n)&&(i.element.find("input").eq(0).prop("value",l(e)).end().eq(1).prop("value",l(n)),r.selectionStart=e,r.selectionEnd=n,i._refresh(),i._refreshAriaAttr(e,n)),t)},values:function(e,t){return b(e)?this._value(e[0],e[1]):this._value(e,t)},_refresh:function(){var e=this,t=e.options;e.trigger(z,{values:[t.selectionStart,t.selectionEnd],value:[t.selectionStart,t.selectionEnd]}),t.selectionStart==t.max&&t.selectionEnd==t.max&&e._setZIndex("firstHandle")},_refreshAriaAttr:function(e,t){var n,i=this,r=i.wrapper.find(H),o=i._activeHandleDrag;n=i._getFormattedValue([e,t],o),r.eq(0).attr("aria-valuenow",e),r.eq(1).attr("aria-valuenow",t),r.attr("aria-valuetext",n)},_setValueInRange:function(e,t){var n=this.options;e=k.max(k.min(e,n.max),n.min),t=k.max(k.min(t,n.max),n.min),e==n.max&&t==n.max&&this._setZIndex("firstHandle"),this._update(k.min(e,t),k.max(e,t))},_setZIndex:function(t){this.wrapper.find(H).each(function(n){e(this).css("z-index","firstHandle"==t?1-n:n)})},destroy:function(){var e=this;g.fn.destroy.call(e),e.wrapper.off(A).find(V+", "+N).off(A).end().find(H).off(A),e._firstHandleDrag.draggable.destroy(),e._lastHandleDrag.draggable.destroy()}}),p.Selection=function(e,t,n){function i(i){i=i||[];var o=i[0]-n.min,a=i[1]-n.min,s=k.ceil(c(o/n.smallStep)),l=k.ceil(c(a/n.smallStep)),d=t._pixelSteps[s],u=t._pixelSteps[l],h=parseInt(e.eq(0)[t._outerSize]()/2,10),p=t._isRtl?2:0;e.eq(0).css(t._position,d-h-p).end().eq(1).css(t._position,u-h-p),r(d,u)}function r(e,n){var i,r,o=t._trackDiv.find(".k-slider-selection");i=k.abs(e-n),o[t._sizeFn](i),t._isRtl?(r=k.max(e,n),o.css("right",t._maxSelection-r-1)):(r=k.min(e,n),o.css(t._position,r-1))}i(t.value()),t.bind([T,D,z],function(e){i(e.values)})},f.ui.plugin(p)}(window.kendo.jQuery),function(e,t,n){function i(e,t,n){n=d(n),n&&!n.equals(e.color())&&("change"==t&&(e._value=n),n=1!=n.a?n.toCssRgba():n.toCss(),e.trigger(t,{value:n}))}function r(e,t,n){var i,r;return e=Array.prototype.slice.call(e),i=e.length,r=e.indexOf(t),0>r?0>n?e[i-1]:e[0]:(r+=n,0>r?r+=i:r%=i,e[r])}function o(e){e.preventDefault()}function a(e,t){return function(){return e.apply(t,arguments)}}var s=window.kendo,l=s.ui,c=l.Widget,d=s.parseColor,u=s.Color,h=s.keys,p="background-color",f="k-state-selected",g="000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7",m="FFFFFF,FFCCFF,FF99FF,FF66FF,FF33FF,FF00FF,CCFFFF,CCCCFF,CC99FF,CC66FF,CC33FF,CC00FF,99FFFF,99CCFF,9999FF,9966FF,9933FF,9900FF,FFFFCC,FFCCCC,FF99CC,FF66CC,FF33CC,FF00CC,CCFFCC,CCCCCC,CC99CC,CC66CC,CC33CC,CC00CC,99FFCC,99CCCC,9999CC,9966CC,9933CC,9900CC,FFFF99,FFCC99,FF9999,FF6699,FF3399,FF0099,CCFF99,CCCC99,CC9999,CC6699,CC3399,CC0099,99FF99,99CC99,999999,996699,993399,990099,FFFF66,FFCC66,FF9966,FF6666,FF3366,FF0066,CCFF66,CCCC66,CC9966,CC6666,CC3366,CC0066,99FF66,99CC66,999966,996666,993366,990066,FFFF33,FFCC33,FF9933,FF6633,FF3333,FF0033,CCFF33,CCCC33,CC9933,CC6633,CC3333,CC0033,99FF33,99CC33,999933,996633,993333,990033,FFFF00,FFCC00,FF9900,FF6600,FF3300,FF0000,CCFF00,CCCC00,CC9900,CC6600,CC3300,CC0000,99FF00,99CC00,999900,996600,993300,990000,66FFFF,66CCFF,6699FF,6666FF,6633FF,6600FF,33FFFF,33CCFF,3399FF,3366FF,3333FF,3300FF,00FFFF,00CCFF,0099FF,0066FF,0033FF,0000FF,66FFCC,66CCCC,6699CC,6666CC,6633CC,6600CC,33FFCC,33CCCC,3399CC,3366CC,3333CC,3300CC,00FFCC,00CCCC,0099CC,0066CC,0033CC,0000CC,66FF99,66CC99,669999,666699,663399,660099,33FF99,33CC99,339999,336699,333399,330099,00FF99,00CC99,009999,006699,003399,000099,66FF66,66CC66,669966,666666,663366,660066,33FF66,33CC66,339966,336666,333366,330066,00FF66,00CC66,009966,006666,003366,000066,66FF33,66CC33,669933,666633,663333,660033,33FF33,33CC33,339933,336633,333333,330033,00FF33,00CC33,009933,006633,003333,000033,66FF00,66CC00,669900,666600,663300,660000,33FF00,33CC00,339900,336600,333300,330000,00FF00,00CC00,009900,006600,003300,000000",v={apply:"Apply",cancel:"Cancel"},_=".kendoColorTools",y="click"+_,w="keydown"+_,b=s.support.browser,k=b.msie&&9>b.version,x=c.extend({init:function(e,t){var n,i=this;c.fn.init.call(i,e,t),e=i.element,t=i.options,i._value=t.value=d(t.value),i._tabIndex=e.attr("tabIndex")||0,n=i._ariaId=t.ariaId,n&&e.attr("aria-labelledby",n),t._standalone&&(i._triggerSelect=i._triggerChange)},options:{name:"ColorSelector",value:null,_standalone:!0},events:["change","select","cancel"],color:function(e){return e!==n&&(this._value=d(e),this._updateUI(this._value)),this._value},value:function(e){return e=this.color(e),e&&(e=this.options.opacity?e.toCssRgba():e.toCss()),e||null},enable:function(t){0===arguments.length&&(t=!0),e(".k-disabled-overlay",this.wrapper).remove(),t||this.wrapper.append("<div class='k-disabled-overlay'></div>"),this._onEnable(t)},_select:function(e,t){var n=this._value;e=this.color(e),t||(this.element.trigger("change"),e.equals(n)?this._standalone||this.trigger("cancel"):this.trigger("change",{value:this.value()}))},_triggerSelect:function(e){i(this,"select",e)},_triggerChange:function(e){i(this,"change",e)},destroy:function(){this.element&&this.element.off(_),this.wrapper&&this.wrapper.off(_).find("*").off(_),this.wrapper=null,c.fn.destroy.call(this)},_updateUI:e.noop,_selectOnHide:function(){return null},_cancel:function(){this.trigger("cancel")}}),C=x.extend({init:function(t,n){var i,r,o,l,c=this;if(x.fn.init.call(c,t,n),t=c.wrapper=c.element,n=c.options,i=n.palette,"websafe"==i?(i=m,n.columns=18):"basic"==i&&(i=g),"string"==typeof i&&(i=i.split(",")),e.isArray(i)&&(i=e.map(i,function(e){return d(e)})),c._selectedID=(n.ariaId||s.guid())+"_selected",t.addClass("k-widget k-colorpalette").attr("role","grid").attr("aria-readonly","true").append(e(c._template({colors:i,columns:n.columns,tileSize:n.tileSize,value:c._value,id:n.ariaId}))).on(y,".k-item",function(t){c._select(e(t.currentTarget).css(p))}).attr("tabIndex",c._tabIndex).on(w,a(c._keydown,c)),r=n.tileSize){if(/number|string/.test(typeof r))o=l=parseFloat(r);else{if("object"!=typeof r)throw Error("Unsupported value for the 'tileSize' argument");o=parseFloat(r.width),l=parseFloat(r.height)}t.find(".k-item").css({width:o,height:l})}},focus:function(){this.wrapper.focus()},options:{name:"ColorPalette",columns:10,tileSize:null,palette:"basic"},_onEnable:function(e){e?this.wrapper.attr("tabIndex",this._tabIndex):this.wrapper.removeAttr("tabIndex")},_keydown:function(t){var n,i,a=this.wrapper,s=a.find(".k-item"),l=s.filter("."+f).get(0),c=t.keyCode;if(c==h.LEFT?n=r(s,l,-1):c==h.RIGHT?n=r(s,l,1):c==h.DOWN?n=r(s,l,this.options.columns):c==h.UP?n=r(s,l,-this.options.columns):c==h.ENTER?(o(t),l&&this._select(e(l).css(p))):c==h.ESC&&this._cancel(),n){o(t),this._current(n);try{i=d(n.css(p)),this._triggerSelect(i)}catch(u){}}},_current:function(t){this.wrapper.find("."+f).removeClass(f).attr("aria-selected",!1).removeAttr("id"),e(t).addClass(f).attr("aria-selected",!0).attr("id",this._selectedID),this.element.removeAttr("aria-activedescendant").attr("aria-activedescendant",this._selectedID)},_updateUI:function(t){var i=null;this.wrapper.find(".k-item").each(function(){var r=d(e(this).css(p));return r&&r.equals(t)?(i=this,!1):n}),this._current(i)},_template:s.template('<table class="k-palette k-reset" role="presentation"><tr role="row"># for (var i = 0; i < colors.length; ++i) { ## var selected = colors[i].equals(value); ## if (i && i % columns == 0) { # </tr><tr role="row"> # } #<td role="gridcell" unselectable="on" style="background-color:#= colors[i].toCss() #"#= selected ? " aria-selected=true" : "" # #=(id && i === 0) ? "id=\\""+id+"\\" " : "" # class="k-item#= selected ? " '+f+'" : "" #" aria-label="#= colors[i].toCss() #"></td># } #</tr></table>')}),S=x.extend({init:function(t,n){var i=this;x.fn.init.call(i,t,n),n=i.options,t=i.element,i.wrapper=t.addClass("k-widget k-flatcolorpicker").append(i._template(n)),i._hueElements=e(".k-hsv-rectangle, .k-transparency-slider .k-slider-track",t),i._selectedColor=e(".k-selected-color-display",t),i._colorAsText=e("input.k-color-value",t),i._sliders(),i._hsvArea(),i._updateUI(i._value||d("#f00")),t.find("input.k-color-value").on(w,function(t){var n,r,o=this;if(t.keyCode==h.ENTER)try{n=d(o.value),r=i.color(),i._select(n,n.equals(r))}catch(a){e(o).addClass("k-state-error")}else i.options.autoupdate&&setTimeout(function(){var e=d(o.value,!0);e&&i._updateUI(e,!0)},10)}).end().on(y,".k-controls button.apply",function(){i._select(i._getHSV())}).on(y,".k-controls button.cancel",function(){i._updateUI(i.color()),i._cancel()}),k&&i._applyIEFilter()},destroy:function(){this._hueSlider.destroy(),this._opacitySlider&&this._opacitySlider.destroy(),this._hueSlider=this._opacitySlider=this._hsvRect=this._hsvHandle=this._hueElements=this._selectedColor=this._colorAsText=null,x.fn.destroy.call(this)},options:{name:"FlatColorPicker",opacity:!1,buttons:!1,input:!0,preview:!0,autoupdate:!0,messages:v},_applyIEFilter:function(){var e=this.element.find(".k-hue-slider .k-slider-track")[0],t=e.currentStyle.backgroundImage;t=t.replace(/^url\([\'\"]?|[\'\"]?\)$/g,""),e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"', sizingMethod='scale')"},_sliders:function(){function e(e){n._updateUI(n._getHSV(e.value,null,null,null))}function t(e){n._updateUI(n._getHSV(null,null,null,e.value/100))}var n=this,i=n.element;n._hueSlider=i.find(".k-hue-slider").kendoSlider({min:0,max:359,tickPlacement:"none",showButtons:!1,slide:e,change:e}).data("kendoSlider"),n._opacitySlider=i.find(".k-transparency-slider").kendoSlider({min:0,max:100,tickPlacement:"none",showButtons:!1,slide:t,change:t}).data("kendoSlider")},_hsvArea:function(){function e(e,n){var i=this.offset,r=e-i.left,o=n-i.top,a=this.width,s=this.height;r=0>r?0:r>a?a:r,o=0>o?0:o>s?s:o,t._svChange(r/a,1-o/s)}var t=this,n=t.element,i=n.find(".k-hsv-rectangle"),r=i.find(".k-draghandle").attr("tabIndex",0).on(w,a(t._keydown,t));t._hsvEvents=new s.UserEvents(i,{global:!0,press:function(t){this.offset=s.getOffset(i),this.width=i.width(),this.height=i.height(),r.focus(),e.call(this,t.x.location,t.y.location)},start:function(){i.addClass("k-dragging"),r.focus()},move:function(t){t.preventDefault(),e.call(this,t.x.location,t.y.location)},end:function(){i.removeClass("k-dragging")}}),t._hsvRect=i,t._hsvHandle=r},_onEnable:function(e){this._hueSlider.enable(e),this._opacitySlider&&this._opacitySlider.enable(e),this.wrapper.find("input").attr("disabled",!e);var t=this._hsvRect.find(".k-draghandle");e?t.attr("tabIndex",this._tabIndex):t.removeAttr("tabIndex")},_keydown:function(e){function t(t,n){var r=i._getHSV();r[t]+=n*(e.shiftKey?.01:.05),0>r[t]&&(r[t]=0),r[t]>1&&(r[t]=1),i._updateUI(r),o(e)}function n(t){var n=i._getHSV();n.h+=t*(e.shiftKey?1:5),0>n.h&&(n.h=0),n.h>359&&(n.h=359),i._updateUI(n),o(e)}var i=this;switch(e.keyCode){case h.LEFT:e.ctrlKey?n(-1):t("s",-1);break;case h.RIGHT:e.ctrlKey?n(1):t("s",1);break;case h.UP:t(e.ctrlKey&&i._opacitySlider?"a":"v",1);break;case h.DOWN:t(e.ctrlKey&&i._opacitySlider?"a":"v",-1);break;case h.ENTER:i._select(i._getHSV());break;case h.F2:i.wrapper.find("input.k-color-value").focus().select();break;case h.ESC:i._cancel()}},focus:function(){this._hsvHandle.focus()},_getHSV:function(e,t,n,i){var r=this._hsvRect,o=r.width(),a=r.height(),s=this._hsvHandle.position();return null==e&&(e=this._hueSlider.value()),null==t&&(t=s.left/o),null==n&&(n=1-s.top/a),null==i&&(i=this._opacitySlider?this._opacitySlider.value()/100:1),u.fromHSV(e,t,n,i)},_svChange:function(e,t){var n=this._getHSV(null,e,t,null);this._updateUI(n)},_updateUI:function(e,t){var n=this,i=n._hsvRect;e&&(this._colorAsText.removeClass("k-state-error"),n._selectedColor.css(p,e.toDisplay()),t||n._colorAsText.val(n._opacitySlider?e.toCssRgba():e.toCss()),n._triggerSelect(e),e=e.toHSV(),n._hsvHandle.css({left:e.s*i.width()+"px",top:(1-e.v)*i.height()+"px"}),n._hueElements.css(p,u.fromHSV(e.h,1,1,1).toCss()),n._hueSlider.value(e.h),n._opacitySlider&&n._opacitySlider.value(100*e.a))},_selectOnHide:function(){return this.options.buttons?null:this._getHSV()},_template:s.template('# if (preview) { #<div class="k-selected-color"><div class="k-selected-color-display"><input class="k-color-value" #= !data.input ? \'style="visibility: hidden;"\' : "" #></div></div># } #<div class="k-hsv-rectangle"><div class="k-hsv-gradient"></div><div class="k-draghandle"></div></div><input class="k-hue-slider" /># if (opacity) { #<input class="k-transparency-slider" /># } ## if (buttons) { #<div unselectable="on" class="k-controls"><button class="k-button k-primary apply">#: messages.apply #</button> <button class="k-button cancel">#: messages.cancel #</button></div># } #')}),T=c.extend({init:function(t,n){var i,r,o,a,s,l=this;c.fn.init.call(l,t,n),n=l.options,t=l.element,i=t.attr("value")||t.val(),i=i?d(i,!0):d(n.value,!0),l._value=n.value=i,r=l.wrapper=e(l._template(n)),t.hide().after(r),t.is("input")&&(t.appendTo(r),o=t.closest("label"),a=t.attr("id"),a&&(o=o.add('label[for="'+a+'"]')),o.click(function(e){l.open(),e.preventDefault()})),l._tabIndex=t.attr("tabIndex")||0,l.enable(!t.attr("disabled")),s=t.attr("accesskey"),s&&(t.attr("accesskey",null),r.attr("accesskey",s)),l.bind("activate",function(e){e.isDefaultPrevented()||l.toggle()}),l._updateUI(i)},destroy:function(){this.wrapper.off(_).find("*").off(_),this._popup&&(this._selector.destroy(),this._popup.destroy()),this._selector=this._popup=this.wrapper=null,c.fn.destroy.call(this)},enable:function(e){var t=this,n=t.wrapper,i=n.children(".k-picker-wrap"),r=i.find(".k-select");0===arguments.length&&(e=!0),t.element.attr("disabled",!e),n.attr("aria-disabled",!e),r.off(_).on("mousedown"+_,o),n.addClass("k-state-disabled").removeAttr("tabIndex").add("*",n).off(_),e&&n.removeClass("k-state-disabled").attr("tabIndex",t._tabIndex).on("mouseenter"+_,function(){i.addClass("k-state-hover")}).on("mouseleave"+_,function(){i.removeClass("k-state-hover")}).on("focus"+_,function(){i.addClass("k-state-focused")}).on("blur"+_,function(){i.removeClass("k-state-focused")}).on(w,a(t._keydown,t)).on(y,".k-icon",a(t.toggle,t)).on(y,t.options.toolIcon?".k-tool-icon":".k-selected-color",function(){t.trigger("activate")})},_template:s.template('<span role="textbox" aria-haspopup="true" class="k-widget k-colorpicker k-header"><span class="k-picker-wrap k-state-default"># if (toolIcon) { #<span class="k-tool-icon #= toolIcon #"><span class="k-selected-color"></span></span># } else { #<span class="k-selected-color"></span># } #<span class="k-select" unselectable="on"><span class="k-icon k-i-arrow-s" unselectable="on"></span></span></span></span>'),options:{name:"ColorPicker",palette:null,columns:10,toolIcon:null,value:null,messages:v,opacity:!1,buttons:!0,preview:!0,ARIATemplate:'Current selected color is #=data || ""#'},events:["activate","change","select","open","close"],open:function(){this._getPopup().open()},close:function(){this._getPopup().close()},toggle:function(){this._getPopup().toggle()},color:x.fn.color,value:x.fn.value,_select:x.fn._select,_triggerSelect:x.fn._triggerSelect,_isInputTypeColor:function(){var e=this.element[0];return/^input$/i.test(e.tagName)&&/^color$/i.test(e.type)},_updateUI:function(e){var t="";e&&(t=this._isInputTypeColor()||1==e.a?e.toCss():e.toCssRgba(),this.element.val(t)),this._ariaTemplate||(this._ariaTemplate=s.template(this.options.ARIATemplate)),this.wrapper.attr("aria-label",this._ariaTemplate(t)),this._triggerSelect(e),this.wrapper.find(".k-selected-color").css(p,e?e.toDisplay():"transparent")},_keydown:function(e){var t=e.keyCode;this._getPopup().visible()?(t==h.ESC?this._selector._cancel():this._selector._keydown(e),o(e)):(t==h.ENTER||t==h.DOWN)&&(this.open(),o(e))},_getPopup:function(){var t,i,r,o,a=this,l=a._popup;return l||(t=a.options,i=t.palette?C:S,t._standalone=!1,delete t.select,delete t.change,delete t.cancel,r=s.guid(),o=a._selector=new i(e('<div id="'+r+'"/>').appendTo(document.body),t),a.wrapper.attr("aria-owns",r),a._popup=l=o.wrapper.kendoPopup({anchor:a.wrapper}).data("kendoPopup"),o.bind({select:function(e){a._updateUI(d(e.value))},change:function(){a._select(o.color()),a.close()},cancel:function(){a.close()}}),l.bind({close:function(e){if(a.trigger("close"))return e.preventDefault(),n;a.wrapper.children(".k-picker-wrap").removeClass("k-state-focused");var t=o._selectOnHide();t?a._select(t):(a.wrapper.focus(),a._updateUI(a.color()))},open:function(e){a.trigger("open")?e.preventDefault():a.wrapper.children(".k-picker-wrap").addClass("k-state-focused")},activate:function(){o._select(a.color(),!0),o.focus(),a.wrapper.children(".k-picker-wrap").addClass("k-state-focused")}})),l}});l.plugin(C),l.plugin(S),l.plugin(T)}(jQuery,parseInt),function(e,t){function n(e,t){return'<span unselectable="on" class="k-link"><span unselectable="on" class="k-icon k-i-arrow-'+e+'" title="'+t+'">'+t+"</span></span>"}var i=window.kendo,r=i.caret,o=i.keys,a=i.ui,s=a.Widget,l=i._activeElement,c=i._extractFormat,d=i.parseFloat,u=i.support.placeholder,h=i.getCulture,p=i._round,f="change",g="disabled",m="readonly",v="k-input",_="spin",y=".kendoNumericTextBox",w="touchend",b="mouseleave"+y,k="mouseenter"+y+" "+b,x="k-state-default",C="k-state-focused",S="k-state-hover",T="focus",D=".",A="k-state-selected",E="k-state-disabled",M="aria-disabled",P="aria-readonly",I=/^(-)?(\d*)$/,z=null,F=e.proxy,R=s.extend({init:function(e,n){var r,o,a,l,d,u=this,h=n&&n.step!==t;s.fn.init.call(u,e,n),n=u.options,e=u.element.on("focusout"+y,F(u._focusout,u)).attr("role","spinbutton"),n.placeholder=n.placeholder||e.attr("placeholder"),u._reset(),u._wrapper(),u._arrows(),u._input(),i.support.mobileOS?u._text.on(w+y+" "+T+y,function(t){u._toggleText(!1),t.type===T&&e.focus()}):u._text.on(T+y,F(u._click,u)),r=u.min(e.attr("min")),o=u.max(e.attr("max")),a=u._parse(e.attr("step")),n.min===z&&r!==z&&(n.min=r),n.max===z&&o!==z&&(n.max=o),h||a===z||(n.step=a),e.attr("aria-valuemin",n.min).attr("aria-valuemax",n.max),n.format=c(n.format),l=n.value,u.value(l!==z?l:e.val()),d=e.is("[disabled]"),d?u.enable(!1):u.readonly(e.is("[readonly]")),i.notify(u)},options:{name:"NumericTextBox",decimals:z,min:z,max:z,value:z,step:1,culture:"",format:"n",spinners:!0,placeholder:"",upArrowText:"Increase value",downArrowText:"Decrease value"},events:[f,_],_editable:function(e){var t=this,n=t.element,i=e.disable,r=e.readonly,o=t._text.add(n),a=t._inputWrapper.off(k);t._toggleText(!0),t._upArrowEventHandler.unbind("press"),t._downArrowEventHandler.unbind("press"),n.off("keydown"+y).off("keypress"+y).off("paste"+y),r||i?(a.addClass(i?E:x).removeClass(i?x:E),o.attr(g,i).attr(m,r).attr(M,i).attr(P,r)):(a.addClass(x).removeClass(E).on(k,t._toggleHover),o.removeAttr(g).removeAttr(m).attr(M,!1).attr(P,!1),t._upArrowEventHandler.bind("press",function(e){e.preventDefault(),t._spin(1),t._upArrow.addClass(A)}),t._downArrowEventHandler.bind("press",function(e){e.preventDefault(),t._spin(-1),t._downArrow.addClass(A)}),t.element.on("keydown"+y,F(t._keydown,t)).on("keypress"+y,F(t._keypress,t)).on("paste"+y,F(t._paste,t)))},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},destroy:function(){var e=this;e.element.add(e._text).add(e._upArrow).add(e._downArrow).add(e._inputWrapper).off(y),e._upArrowEventHandler.destroy(),e._downArrowEventHandler.destroy(),e._form&&e._form.off("reset",e._resetHandler),s.fn.destroy.call(e)},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},step:function(e){return this._option("step",e)},value:function(e){var n,i=this;return e===t?i._value:(e=i._parse(e),n=i._adjust(e),e===n&&(i._update(e),i._old=i._value),t)},focus:function(){this._focusin()},_adjust:function(e){var t=this,n=t.options,i=n.min,r=n.max;return e===z?e:(i!==z&&i>e?e=i:r!==z&&e>r&&(e=r),e)},_arrows:function(){var t,r=this,o=function(){clearTimeout(r._spinning),t.removeClass(A)},a=r.options,s=a.spinners,l=r.element;t=l.siblings(".k-icon"),t[0]||(t=e(n("n",a.upArrowText)+n("s",a.downArrowText)).insertAfter(l),t.wrapAll('<span class="k-select"/>')),s||(t.parent().toggle(s),r._inputWrapper.addClass("k-expand-padding")),r._upArrow=t.eq(0),r._upArrowEventHandler=new i.UserEvents(r._upArrow,{release:o}),r._downArrow=t.eq(1),r._downArrowEventHandler=new i.UserEvents(r._downArrow,{release:o})},_blur:function(){var e=this;e._toggleText(!0),e._change(e.element.val())},_click:function(e){var t=this;clearTimeout(t._focusing),t._focusing=setTimeout(function(){var n,i,o,a=e.target,s=r(a)[0],l=a.value.substring(0,s),c=t._format(t.options.format),d=c[","],u=0;d&&(i=RegExp("\\"+d,"g"),o=RegExp("([\\d\\"+d+"]+)(\\"+c[D]+")?(\\d+)?")),o&&(n=o.exec(l)),n&&(u=n[0].replace(i,"").length,-1!=l.indexOf("(")&&0>t._value&&u++),t._focusin(),r(t.element[0],u)})},_change:function(e){var t=this;t._update(e),e=t._value,t._old!=e&&(t._old=e,t.element.trigger(f),t.trigger(f))},_culture:function(e){return e||h(this.options.culture)},_focusin:function(){var e=this;e._inputWrapper.addClass(C),e._toggleText(!1),e.element[0].focus()},_focusout:function(){var e=this;clearTimeout(e._focusing),e._inputWrapper.removeClass(C).removeClass(S),e._blur()},_format:function(e,t){var n=this._culture(t).numberFormat;return e=e.toLowerCase(),e.indexOf("c")>-1?n=n.currency:e.indexOf("p")>-1&&(n=n.percent),n},_input:function(){var t,n=this,i="k-formatted-value",r=n.element.addClass(v).show()[0],o=r.accessKey,a=n.wrapper;t=a.find(D+i),t[0]||(t=e('<input type="text"/>').insertBefore(r).addClass(i));try{r.setAttribute("type","text")}catch(s){r.type="text"}t[0].tabIndex=r.tabIndex,t[0].style.cssText=r.style.cssText,t.prop("placeholder",n.options.placeholder),o&&(t.attr("accesskey",o),r.accessKey=""),n._text=t.addClass(r.className)},_keydown:function(e){var t=this,n=e.keyCode;t._key=n,n==o.DOWN?t._step(-1):n==o.UP?t._step(1):n==o.ENTER&&t._change(t.element.val())},_keypress:function(e){var t,n,i,a,s,l,c,d,u,h,p;0===e.which||e.ctrlKey||e.keyCode===o.BACKSPACE||e.keyCode===o.ENTER||(t=this,n=t.options.min,i=t.element,a=r(i),s=a[0],l=a[1],c=String.fromCharCode(e.which),d=t._format(t.options.format),u=t._key===o.NUMPAD_DOT,h=i.val(),u&&(c=d[D]),h=h.substring(0,s)+c+h.substring(l),p=t._numericRegex(d).test(h),p&&u?(i.val(h),r(i,s+c.length),e.preventDefault()):(null!==n&&n>=0&&"-"===h.charAt(0)||!p)&&e.preventDefault(),t._key=0)},_numericRegex:function(e){var t=this,n=e[D],i=t.options.decimals;return n===D&&(n="\\"+n),i===z&&(i=e.decimals),0===i?I:(t._separator!==n&&(t._separator=n,t._floatRegExp=RegExp("^(-)?(((\\d+("+n+"\\d*)?)|("+n+"\\d*)))?$")),t._floatRegExp)},_paste:function(e){var t=this,n=e.target,i=n.value;setTimeout(function(){t._parse(n.value)===z&&t._update(i)})},_option:function(e,n){var i=this,r=i.options;return n===t?r[e]:(n=i._parse(n),(n||"step"!==e)&&(r[e]=n,i.element.attr("aria-value"+e,n).attr(e,n)),t)},_spin:function(e,t){var n=this;t=t||500,clearTimeout(n._spinning),n._spinning=setTimeout(function(){n._spin(e,50)},t),n._step(e)},_step:function(e){var t=this,n=t.element,i=t._parse(n.val())||0;l()!=n[0]&&t._focusin(),i+=t.options.step*e,t._update(t._adjust(i)),t.trigger(_)},_toggleHover:function(t){e(t.currentTarget).toggleClass(S,"mouseenter"===t.type)},_toggleText:function(e){var t=this;t._text.toggle(e),t.element.toggle(!e)},_parse:function(e,t){return d(e,this._culture(t),this.options.format)},_update:function(e){var t,n=this,r=n.options,o=r.format,a=r.decimals,s=n._culture(),l=n._format(o,s);a===z&&(a=l.decimals),e=n._parse(e,s),t=e!==z,t&&(e=parseFloat(p(e,a))),n._value=e=n._adjust(e),n._placeholder(i.toString(e,o,s)),t?(e=""+e,-1!==e.indexOf("e")&&(e=p(+e,a)),e=e.replace(D,l[D])):e="",n.element.val(e).attr("aria-valuenow",e)
},_placeholder:function(e){this._text.val(e),u||e||this._text.val(this.options.placeholder)},_wrapper:function(){var t,n=this,i=n.element,r=i[0];t=i.parents(".k-numerictextbox"),t.is("span.k-numerictextbox")||(t=i.hide().wrap('<span class="k-numeric-wrap k-state-default" />').parent(),t=t.wrap("<span/>").parent()),t[0].style.cssText=r.style.cssText,r.style.width="",n.wrapper=t.addClass("k-widget k-numerictextbox").addClass(r.className).css("display",""),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(n[0].value)})},t._form=r.on("reset",t._resetHandler))}});a.plugin(R)}(window.kendo.jQuery),function(e){function t(n,i){n.filters&&(n.filters=e.grep(n.filters,function(e){return t(e,i),e.filters?e.filters.length:e.field!=i}))}function n(e){var t,n,i,r,o,a;if(e&&e.length)for(a=[],t=0,n=e.length;n>t;t++)i=e[t],o=i.text||i.value||i,r=null==i.value?i.text||i:i.value,a[t]={text:o,value:r};return a}function i(t,n){return e.grep(t,function(t){return t.filters?(t.filters=e.grep(t.filters,function(e){return e.field!=n}),t.filters.length):t.field!=n})}var r=window.kendo,o=r.ui,a=e.proxy,s="kendoPopup",l="init",c=".kendoFilterMenu",d="Is equal to",u="Is not equal to",h={number:"numerictextbox",date:"datepicker"},p={string:"text",number:"number",date:"date"},f=r.isFunction,g=o.Widget,m='<div><div class="k-filter-help-text">#=messages.info#</div><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label><div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>',v='<div><div class="k-filter-help-text">#=messages.info#</div><select data-#=ns#bind="value: filters[0].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[0].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#"></select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}##if(extra){#<select class="k-filter-and" data-#=ns#bind="value: logic" data-#=ns#role="dropdownlist"><option value="and">#=messages.and#</option><option value="or">#=messages.or#</option></select><select data-#=ns#bind="value: filters[1].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[1].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#"></select>#}else{#<input data-#=ns#bind="value: filters[1].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""#/>#}##}#<div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>',_='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=field#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[0].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[0].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#if(extra){#</ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="and" />#=messages.and#</label></li><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="or" />#=messages.or#</label></li></ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[1].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[1].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[1].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#}#</ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></div></form></div>',y='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=field#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label></li><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label></li></ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></form></div>',w=g.extend({init:function(t,n){var i,o,s,l,d=this,u="string";g.fn.init.call(d,t,n),i=d.operators=n.operators||{},t=d.element,n=d.options,n.appendToElement||(s=t.addClass("k-with-icon k-filterable").find(".k-grid-filter"),s[0]||(s=t.prepend('<a class="k-grid-filter" href="#"><span class="k-icon k-filter"/></a>').find(".k-grid-filter")),s.attr("tabindex",-1).on("click"+c,a(d._click,d))),d.link=s||e(),d.dataSource=n.dataSource,d.field=n.field||t.attr(r.attr("field")),d.model=d.dataSource.reader.model,d._parse=function(e){return e+""},d.model&&d.model.fields&&(l=d.model.fields[d.field],l&&(u=l.type||"string",l.parse&&(d._parse=a(l.parse,l)))),n.values&&(u="enums"),d.type=u,i=i[u]||n.operators[u];for(o in i)break;d._defaultFilter=function(){return{field:d.field,operator:o||"eq",value:""}},d._refreshHandler=a(d.refresh,d),d.dataSource.bind("change",d._refreshHandler),n.appendToElement?d._init():d.refresh()},_init:function(){var t,n=this,i=n.options.ui,o=f(i);n.pane=n.options.pane,n.pane&&(n._isMobile=!0),o||(t=i||h[n.type]),n._isMobile?n._createMobileForm(t):n._createForm(t),n.form.on("submit"+c,a(n._submit,n)).on("reset"+c,a(n._reset,n)),o&&n.form.find(".k-textbox").removeClass("k-textbox").each(function(){i(e(this))}),n.form.find("["+r.attr("role")+"=numerictextbox]").removeClass("k-textbox").end().find("["+r.attr("role")+"=datetimepicker]").removeClass("k-textbox").end().find("["+r.attr("role")+"=timepicker]").removeClass("k-textbox").end().find("["+r.attr("role")+"=datepicker]").removeClass("k-textbox"),n.refresh(),n.trigger(l,{field:n.field,container:n.form})},_createForm:function(t){var i=this,o=i.options,l=i.operators||{},d=i.type;l=l[d]||o.operators[d],i.form=e('<form class="k-filter-menu"/>').html(r.template("boolean"===d?m:v)({field:i.field,format:o.format,ns:r.ns,messages:o.messages,extra:o.extra,operators:l,type:d,role:t,values:n(o.values)})),o.appendToElement?(i.element.append(i.form),i.popup=i.element.closest(".k-popup").data(s)):i.popup=i.form[s]({anchor:i.link,open:a(i._open,i),activate:a(i._activate,i),close:function(){i.options.closeCallback&&i.options.closeCallback(i.element)}}).data(s),i.form.on("keydown"+c,a(i._keydown,i))},_createMobileForm:function(t){var i=this,o=i.options,a=i.operators||{},s=i.type;a=a[s]||o.operators[s],i.form=e("<div />").html(r.template("boolean"===s?y:_)({field:i.field,format:o.format,ns:r.ns,messages:o.messages,extra:o.extra,operators:a,type:s,role:t,useRole:!r.support.input.date&&"date"===s||"number"===s,inputType:p[s],values:n(o.values)})),i.view=i.pane.append(i.form.html()),i.form=i.view.element.find("form"),i.view.element.on("click",".k-submit",function(e){i.form.submit(),e.preventDefault()}).on("click",".k-cancel",function(e){i._closeForm(),e.preventDefault()})},refresh:function(){var e=this,t=e.dataSource.filter()||{filters:[],logic:"and"};e.filterModel=r.observable({logic:"and",filters:[e._defaultFilter(),e._defaultFilter()]}),e.form&&r.bind(e.form.children().first(),e.filterModel),e._bind(t)?e.link.addClass("k-state-active"):e.link.removeClass("k-state-active")},destroy:function(){var e=this;g.fn.destroy.call(e),e.form&&(r.unbind(e.form),r.destroy(e.form),e.form.unbind(c),e.popup&&(e.popup.destroy(),e.popup=null),e.form=null),e.view&&(e.view.purge(),e.view=null),e.link.unbind(c),e._refreshHandler&&(e.dataSource.unbind("change",e._refreshHandler),e.dataSource=null),e.element=e.link=e._refreshHandler=e.filterModel=null},_bind:function(e){var t,n,i,r,o=this,a=e.filters,s=!1,l=0,c=o.filterModel;for(t=0,n=a.length;n>t;t++)r=a[t],r.field==o.field?(c.set("logic",e.logic),i=c.filters[l],i||(c.filters.push({field:o.field}),i=c.filters[l]),i.set("value",o._parse(r.value)),i.set("operator",r.operator),l++,s=!0):r.filters&&(s=s||o._bind(r));return s},_merge:function(n){var i,r,o,a=this,s=n.logic||"and",l=n.filters,c=a.dataSource.filter()||{filters:[],logic:"and"};for(t(c,a.field),l=e.grep(l,function(e){return""!==e.value&&null!=e.value}),r=0,o=l.length;o>r;r++)i=l[r],i.value=a._parse(i.value);return l.length&&(c.filters.length?(n.filters=l,"and"!==c.logic&&(c.filters=[{logic:c.logic,filters:c.filters}],c.logic="and"),c.filters.push(l.length>1?n:l[0])):(c.filters=l,c.logic=s)),c},filter:function(e){e=this._merge(e),e.filters.length&&this.dataSource.filter(e)},clear:function(){var t=this,n=t.dataSource.filter()||{filters:[]};n.filters=e.grep(n.filters,function(e){return e.filters?(e.filters=i(e.filters,t.field),e.filters.length):e.field!=t.field}),n.filters.length||(n=null),t.dataSource.filter(n)},_submit:function(e){e.preventDefault(),e.stopPropagation(),this.filter(this.filterModel.toJSON()),this._closeForm()},_reset:function(){this.clear(),this._closeForm()},_closeForm:function(){this._isMobile?this.pane.navigate("",this.options.animations.right):this.popup.close()},_click:function(e){e.preventDefault(),e.stopPropagation(),this.popup||this.pane||this._init(),this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle()},_open:function(){var t;e(".k-filter-menu").not(this.form).each(function(){t=e(this).data(s),t&&t.close()})},_activate:function(){this.form.find(":kendoFocusable:first").focus()},_keydown:function(e){e.keyCode==r.keys.ESC&&this.popup.close()},events:[l],options:{name:"FilterMenu",extra:!0,appendToElement:!1,type:"string",operators:{string:{eq:d,neq:u,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{eq:d,neq:u,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"},date:{eq:d,neq:u,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},enums:{eq:d,neq:u}},messages:{info:"Show items with value that:",isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",and:"And",or:"Or",selectValue:"-Select value-",operator:"Operator",value:"Value",cancel:"Cancel"},animations:{left:"slide",right:"slide:right"}}});o.plugin(w)}(window.kendo.jQuery),function(e,t){function n(e,t){return e=e.split(" ")[!t+0]||e,e.replace("top","up").replace("bottom","down")}function i(e,t,n){e=e.split(" ")[!t+0]||e;var i={origin:["bottom",n?"right":"left"],position:["top",n?"right":"left"]},r=/left|right/.test(e);return r?(i.origin=["top",e],i.position[1]=c.directions[e].reverse):(i.origin[0]=e,i.position[0]=c.directions[e].reverse),i.origin=i.origin.join(" "),i.position=i.position.join(" "),i}function r(t,n){try{return e.contains(t,n)}catch(i){return!1}}function o(t){t=e(t),t.addClass("k-item").children(x).addClass(P),t.children("a").addClass(T).children(x).addClass(P),t.filter(":not([disabled])").addClass(G),t.filter(".k-separator:empty").append("&nbsp;"),t.filter("li[disabled]").addClass(Y).removeAttr("disabled").attr("aria-disabled",!0),t.filter("[role]").length||t.attr("role","menuitem"),t.children("."+T).length||t.contents().filter(function(){return!(this.nodeName.match(b)||3==this.nodeType&&!e.trim(this.nodeValue))}).wrapAll("<span class='"+T+"'/>"),a(t),s(t)}function a(t){t=e(t),t.find("> .k-link > [class*=k-i-arrow]:not(.k-sprite)").remove(),t.filter(":has(.k-menu-group)").children(".k-link:not(:has([class*=k-i-arrow]:not(.k-sprite)))").each(function(){var t=e(this),n=t.parent().parent();t.append("<span class='k-icon "+(n.hasClass(S+"-horizontal")?"k-i-arrow-s":"k-i-arrow-e")+"'/>")})}function s(t){t=e(t),t.filter(".k-first:not(:first-child)").removeClass(M),t.filter(".k-last:not(:last-child)").removeClass(D),t.filter(":first-child").addClass(M),t.filter(":last-child").addClass(D)}var l,c=window.kendo,d=c.ui,u=c._activeElement,h=c.support.touch&&c.support.mobileOS,p="mousedown",f="click",g=e.extend,m=e.proxy,v=e.each,_=c.template,y=c.keys,w=d.Widget,b=/^(ul|a|div)$/i,k=".kendoMenu",x="img",C="open",S="k-menu",T="k-link",D="k-last",A="close",E="timer",M="k-first",P="k-image",I="select",z="zIndex",F="activate",R="deactivate",B="touchstart"+k+" MSPointerDown"+k+" pointerdown"+k,L=c.support.pointers,O=c.support.msPointers,H=O||L,N=L?"pointerover":O?"MSPointerOver":"mouseenter",V=L?"pointerout":O?"MSPointerOut":"mouseleave",U=h||H,W=e(document.documentElement),j="kendoPopup",G="k-state-default",q="k-state-hover",$="k-state-focused",Y="k-state-disabled",K=".k-menu",Q=".k-menu-group",X=Q+",.k-animation-container",J=":not(.k-list) > .k-item",Z=".k-item.k-state-disabled",et=".k-item:not(.k-state-disabled)",tt=".k-item:not(.k-state-disabled) > .k-link",nt=":not(.k-item.k-separator)",it=nt+":eq(0)",rt=nt+":last",ot="div:not(.k-animation-container,.k-list-container)",at={2:1,touch:1},st={content:_("<div class='k-content #= groupCssClass() #' tabindex='-1'>#= content(item) #</div>"),group:_("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) # role='menu' aria-hidden='true'>#= renderItems(data) #</ul>"),itemWrapper:_("<#= tag(item) # class='#= textClass(item) #'#= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:_("<li class='#= wrapperCssClass(group, item) #' role='menuitem' #=item.items ? \"aria-haspopup='true'\": \"\"##=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:_("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:_("<span class='#= arrowClass(item, group) #'></span>"),sprite:_("<span class='k-sprite #= spriteCssClass #'></span>"),empty:_("")},lt={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return n+=t.enabled===!1?" k-state-disabled":" k-state-default",e.firstLevel&&0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),t.cssClass&&(n+=" "+t.cssClass),n},textClass:function(){return T},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e,t){var n="k-icon";return n+=t.horizontal?" k-i-arrow-s":" k-i-arrow-e"},text:function(e){return e.encoded===!1?e.text:c.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},groupAttributes:function(e){return e.expanded!==!0?" style='display:none'":""},groupCssClass:function(){return"k-group k-menu-group"},content:function(e){return e.content?e.content:"&nbsp;"}},ct=w.extend({init:function(t,n){var i=this;w.fn.init.call(i,t,n),t=i.wrapper=i.element,n=i.options,i._initData(n),i._updateClasses(),i._animations(n),i.nextItemZIndex=100,i._tabindex(),i._focusProxy=m(i._focusHandler,i),t.on(B,i._focusProxy).on(f+k,Z,!1).on(f+k,et,m(i._click,i)).on("keydown"+k,m(i._keydown,i)).on("focus"+k,m(i._focus,i)).on("focus"+k,".k-content",m(i._focus,i)).on(B+" "+p+k,".k-content",m(i._preventClose,i)).on("blur"+k,m(i._removeHoverItem,i)).on("blur"+k,"[tabindex]",m(i._checkActiveElement,i)).on(N+k,et,m(i._mouseenter,i)).on(V+k,et,m(i._mouseleave,i)).on(N+k+" "+V+k+" "+p+k+" "+f+k,tt,m(i._toggleHover,i)),n.openOnClick&&(i.clicked=!1,i._documentClickHandler=m(i._documentClick,i),e(document).click(i._documentClickHandler)),t.attr("role","menubar"),t[0].id&&(i._ariaId=c.format("{0}_mn_active",t[0].id)),c.notify(i)},events:[C,A,F,R,I],options:{name:"Menu",animation:{open:{duration:200},close:{duration:100}},orientation:"horizontal",direction:"default",openOnClick:!1,closeOnClick:!0,hoverDelay:100,popupCollision:t},_initData:function(e){var t=this;e.dataSource&&(t.angular("cleanup",function(){return{elements:t.element.children()}}),t.element.empty(),t.append(e.dataSource,t.element),t.angular("compile",function(){return{elements:t.element.children()}}))},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=g(!0,t,e.animation),"dataSource"in e&&this._initData(e),this._updateClasses(),w.fn.setOptions.call(this,e)},destroy:function(){var t=this;w.fn.destroy.call(t),t.element.off(k),t._documentClickHandler&&e(document).unbind("click",t._documentClickHandler),c.destroy(t.element)},enable:function(e,t){return this._toggleDisabled(e,t!==!1),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.length?t.find("> .k-menu-group, > .k-animation-container > .k-menu-group"):null);return v(n.items,function(){n.group.append(this),a(this)}),a(t),s(n.group.find(".k-first, .k-last").add(n.items)),this},insertBefore:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return v(n.items,function(){t.before(this),a(this),s(this)}),s(t),this},insertAfter:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return v(n.items,function(){t.after(this),a(this),s(this)}),s(t),this},_insert:function(t,n,i){var r,a,s,l,c=this;return n&&n.length||(i=c.element),s=e.isPlainObject(t),l={firstLevel:i.hasClass(S),horizontal:i.hasClass(S+"-horizontal"),expanded:!0,length:i.children().length},n&&!i.length&&(i=e(ct.renderGroup({group:l})).appendTo(n)),s||e.isArray(t)?r=e(e.map(s?[t]:t,function(t,n){return"string"==typeof t?e(t).get():e(ct.renderItem({group:l,item:g(t,{index:n})})).get()})):(r="string"==typeof t&&"<"!=t[0]?c.element.find(t):e(t),a=r.find("> ul").addClass("k-menu-group").attr("role","menu"),r=r.filter("li"),r.add(a.find("> li")).each(function(){o(this)})),{items:r,group:i}},remove:function(e){var t,n,i,r;return e=this.element.find(e),t=this,n=e.parentsUntil(t.element,J),i=e.parent("ul:not(.k-menu)"),e.remove(),i&&!i.children(J).length&&(r=i.parent(".k-animation-container"),r.length?r.remove():i.remove()),n.length&&(n=n.eq(0),a(n),s(n)),t},open:function(r){var o=this,a=o.options,s="horizontal"==a.orientation,l=a.direction,d=c.support.isRtl(o.wrapper);return r=o.element.find(r),/^(top|bottom|default)$/.test(l)&&(l=d?s?(l+" left").replace("default","bottom"):"left":s?(l+" right").replace("default","bottom"):"right"),r.siblings().find(">.k-popup:visible,>.k-animation-container>.k-popup:visible").each(function(){var t=e(this).data("kendoPopup");t&&t.close()}),r.each(function(){var r=e(this);clearTimeout(r.data(E)),r.data(E,setTimeout(function(){var u,h,p,f,m,v,_,y,w=r.find(".k-menu-group:first:hidden");w[0]&&o._triggerEvent({item:r[0],type:C})===!1&&(!w.find(".k-menu-group")[0]&&w.children(".k-item").length>1?(h=e(window).height(),p=function(){w.css({maxHeight:h-(w.outerHeight()-w.height())-c.getShadows(w).bottom,overflow:"auto"})},c.support.browser.msie&&7>=c.support.browser.version?setTimeout(p,0):p()):w.css({maxHeight:"",overflow:""}),r.data(z,r.css(z)),r.css(z,o.nextItemZIndex++),u=w.data(j),f=r.parent().hasClass(S),m=f&&s,v=i(l,f,d),_=a.animation.open.effects,y=_!==t?_:"slideIn:"+n(l,f),u?(u=w.data(j),u.options.origin=v.origin,u.options.position=v.position,u.options.animation.open.effects=y):u=w.kendoPopup({activate:function(){o._triggerEvent({item:this.wrapper.parent(),type:F})},deactivate:function(e){e.sender.element.removeData("targetTransform").css({opacity:""}),o._triggerEvent({item:this.wrapper.parent(),type:R})},origin:v.origin,position:v.position,collision:a.popupCollision!==t?a.popupCollision:m?"fit":"fit flip",anchor:r,appendTo:r,animation:{open:g(!0,{effects:y},a.animation.open),close:a.animation.close},close:function(e){var t=e.sender.wrapper.parent();o._triggerEvent({item:t[0],type:A})?e.preventDefault():(t.css(z,t.data(z)),t.removeData(z),U&&(t.removeClass(q),o._removeHoverItem()))}}).data(j),w.removeAttr("aria-hidden"),u.open())},o.options.hoverDelay))}),o},close:function(t,n){var i=this,r=i.element;return t=r.find(t),t.length||(t=r.find(">.k-item")),t.each(function(){var t=e(this);!n&&i._isRootItem(t)&&(i.clicked=!1),clearTimeout(t.data(E)),t.data(E,setTimeout(function(){var e=t.find(".k-menu-group:not(.k-list-container):not(.k-calendar-container):first:visible").data(j);e&&(e.close(),e.element.attr("aria-hidden",!0))},i.options.hoverDelay))}),i},_toggleDisabled:function(t,n){this.element.find(t).each(function(){e(this).toggleClass(G,n).toggleClass(Y,!n).attr("aria-disabled",!n)})},_toggleHover:function(t){var n=e(c.eventTarget(t)||t.target).closest(J),i=t.type==N||-1!==p.indexOf(t.type);n.parents("li."+Y).length||n.toggleClass(q,i||"mousedown"==t.type||"click"==t.type),this._removeHoverItem()},_preventClose:function(){this.options.closeOnClick||(this._closurePrevented=!0)},_checkActiveElement:function(t){var n=this,i=e(t?t.currentTarget:this._hoverItem()),o=n._findRootParent(i)[0];this._closurePrevented||setTimeout(function(){(!document.hasFocus()||!r(o,c._activeElement())&&t&&!r(o,t.currentTarget))&&n.close(o)},0),this._closurePrevented=!1},_removeHoverItem:function(){var e=this._hoverItem();e&&e.hasClass($)&&(e.removeClass($),this._oldHoverItem=null)},_updateClasses:function(){var e,t=this.element,n=".k-menu-init div ul";t.removeClass("k-menu-horizontal k-menu-vertical"),t.addClass("k-widget k-reset k-header k-menu-init "+S).addClass(S+"-"+this.options.orientation),t.find("li > ul").filter(function(){return!c.support.matchesSelector.call(this,n)}).addClass("k-group k-menu-group").attr("role","menu").attr("aria-hidden",t.is(":visible")).end().find("li > div").addClass("k-content").attr("tabindex","-1"),e=t.find("> li,.k-menu-group > li"),t.removeClass("k-menu-init"),e.each(function(){o(this)})},_mouseenter:function(t){var n=this,i=e(t.currentTarget),o=i.children(".k-animation-container").length||i.children(Q).length;t.delegateTarget==i.parents(K)[0]&&(n.options.openOnClick&&!n.clicked||h||(L||O)&&t.originalEvent.pointerType in at&&n._isRootItem(i.closest(J))||!r(t.currentTarget,t.relatedTarget)&&o&&n.open(i),(n.options.openOnClick&&n.clicked||U)&&i.siblings().each(m(function(e,t){n.close(t,!0)},n)))},_mouseleave:function(n){var i=this,o=e(n.currentTarget),a=o.children(".k-animation-container").length||o.children(Q).length;return o.parentsUntil(".k-animation-container",".k-list-container,.k-calendar-container")[0]?(n.stopImmediatePropagation(),t):(i.options.openOnClick||h||(L||O)&&n.originalEvent.pointerType in at||r(n.currentTarget,n.relatedTarget||n.target)||!a||r(n.currentTarget,c._activeElement())||i.close(o),t)},_click:function(n){var i,r,o,a=this,s=a.options,l=e(c.eventTarget(n)),d=l[0]?l[0].nodeName.toUpperCase():"",u="INPUT"==d||"SELECT"==d||"BUTTON"==d||"LABEL"==d,h=l.closest("."+T),p=l.closest(J),f=h.attr("href"),g=l.attr("href"),m=e("<a href='#' />").attr("href"),v=!!f&&f!==m,_=v&&!!f.match(/^#/),y=!!g&&g!==m,w=s.openOnClick&&o&&a._isRootItem(p);if(s.openOnClick||!p.children(ot)[0]){if(p.hasClass(Y))return n.preventDefault(),t;if(n.handled||!a._triggerEvent({item:p[0],type:I})||u||n.preventDefault(),n.handled=!0,r=p.children(X),o=r.is(":visible"),s.closeOnClick&&(!v||_)&&(!r.length||w))return p.removeClass(q).css("height"),a._oldHoverItem=a._findRootParent(p),a.close(h.parentsUntil(a.element,J)),a.clicked=!1,-1!="MSPointerUp".indexOf(n.type)&&n.preventDefault(),t;v&&n.enterKey&&h[0].click(),(a._isRootItem(p)&&s.openOnClick||c.support.touch||(L||O)&&a._isRootItem(p.closest(J)))&&(v||u||y||n.preventDefault(),a.clicked=!0,i=r.is(":visible")?A:C,(s.closeOnClick||i!=A)&&a[i](p))}},_documentClick:function(e){r(this.element[0],e.target)||(this.clicked=!1)},_focus:function(n){var i=this,r=n.target,o=i._hoverItem(),a=u();return r==i.wrapper[0]||e(r).is(":kendoFocusable")?(a===n.currentTarget&&(o.length?i._moveHover([],o):i._oldHoverItem||i._moveHover([],i.wrapper.children().first())),t):(n.stopPropagation(),e(r).closest(".k-content").closest(".k-menu-group").closest(".k-item").addClass($),i.wrapper.focus(),t)},_keydown:function(e){var n,i,r,o=this,a=e.keyCode,s=o._oldHoverItem,l=c.support.isRtl(o.wrapper);if(e.target==e.currentTarget||a==y.ESC){if(s||(s=o._oldHoverItem=o._hoverItem()),i=o._itemBelongsToVertival(s),r=o._itemHasChildren(s),a==y.RIGHT)n=o[l?"_itemLeft":"_itemRight"](s,i,r);else if(a==y.LEFT)n=o[l?"_itemRight":"_itemLeft"](s,i,r);else if(a==y.DOWN)n=o._itemDown(s,i,r);else if(a==y.UP)n=o._itemUp(s,i,r);else if(a==y.ESC)n=o._itemEsc(s,i);else if(a==y.ENTER||a==y.SPACEBAR)n=s.children(".k-link"),n.length>0&&(o._click({target:n[0],preventDefault:function(){},enterKey:!0}),o._moveHover(s,o._findRootParent(s)));else if(a==y.TAB)return n=o._findRootParent(s),o._moveHover(s,n),o._checkActiveElement(),t;n&&n[0]&&(e.preventDefault(),e.stopPropagation())}},_hoverItem:function(){return this.wrapper.find(".k-item.k-state-hover,.k-item.k-state-focused").filter(":visible")},_itemBelongsToVertival:function(e){var t=this.wrapper.hasClass("k-menu-vertical");return e.length?e.parent().hasClass("k-menu-group")||t:t},_itemHasChildren:function(e){return e.length?e.children("ul.k-menu-group, div.k-animation-container").length>0:!1},_moveHover:function(t,n){var i=this,r=i._ariaId;t.length&&n.length&&t.removeClass($),n.length&&(n[0].id&&(r=n[0].id),n.addClass($),i._oldHoverItem=n,r&&(i.element.removeAttr("aria-activedescendant"),e("#"+r).removeAttr("id"),n.attr("id",r),i.element.attr("aria-activedescendant",r)))},_findRootParent:function(e){return this._isRootItem(e)?e:e.parentsUntil(K,"li.k-item").last()},_isRootItem:function(e){return e.parent().hasClass(S)},_itemRight:function(e,t,n){var i,r,o=this;if(!e.hasClass(Y))return t?n?(o.open(e),i=e.find(".k-menu-group").children().first()):"horizontal"==o.options.orientation&&(r=o._findRootParent(e),o.close(r),i=r.nextAll(it)):(i=e.nextAll(it),i.length||(i=e.prevAll(rt))),i&&!i.length?i=o.wrapper.children(".k-item").first():i||(i=[]),o._moveHover(e,i),i},_itemLeft:function(e,t){var n,i=this;return t?(n=e.parent().closest(".k-item"),i.close(n),i._isRootItem(n)&&"horizontal"==i.options.orientation&&(n=n.prevAll(it))):(n=e.prevAll(it),n.length||(n=e.nextAll(rt))),n.length||(n=i.wrapper.children(".k-item").last()),i._moveHover(e,n),n},_itemDown:function(e,t,n){var i,r=this;if(t)i=e.nextAll(it);else{if(!n||e.hasClass(Y))return;r.open(e),i=e.find(".k-menu-group").children().first()}return!i.length&&e.length?i=e.parent().children().first():e.length||(i=r.wrapper.children(".k-item").first()),r._moveHover(e,i),i},_itemUp:function(e,t){var n,i=this;if(t)return n=e.prevAll(it),!n.length&&e.length?n=e.parent().children().last():e.length||(n=i.wrapper.children(".k-item").last()),i._moveHover(e,n),n},_itemEsc:function(e,t){var n,i=this;return t?(n=e.parent().closest(".k-item"),i.close(n),i._moveHover(e,n),n):e},_triggerEvent:function(e){var t=this;return t.trigger(e.type,{type:e.type,item:e.item})},_focusHandler:function(t){var n=this,i=e(c.eventTarget(t)).closest(J);setTimeout(function(){n._moveHover([],i),i.children(".k-content")[0]&&i.parent().closest(".k-item").removeClass($)},200)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{}},close:{hide:!0,effects:{}}})}});g(ct,{renderItem:function(e){e=g({menu:{},group:{}},e);var t=st.empty,n=e.item;return st.item(g(e,{image:n.imageUrl?st.image:t,sprite:n.spriteCssClass?st.sprite:t,itemWrapper:st.itemWrapper,renderContent:ct.renderContent,arrow:n.items||n.content?st.arrow:t,subGroup:ct.renderGroup},lt))},renderGroup:function(e){return st.group(g({renderItems:function(e){for(var t="",n=0,i=e.items,r=i?i.length:0,o=g({length:r},e.group);r>n;n++)t+=ct.renderItem(g(e,{group:o,item:g({index:n},i[n])}));return t}},e,lt))},renderContent:function(e){return st.content(g(e,lt))}}),l=ct.extend({init:function(t,n){var i=this;ct.fn.init.call(i,t,n),i.target=e(i.options.target),i._popup(),i._wire()},options:{name:"ContextMenu",filter:null,showOn:"contextmenu",orientation:"vertical",alignToAnchor:!1,target:"body"},events:[C,A,F,R,I],setOptions:function(t){var n=this;ct.fn.setOptions.call(n,t),n.target.off(n.showOn+k,n._showProxy),n.userEvents&&n.userEvents.destroy(),n.target=e(n.options.target),t.orientation&&n.popup.wrapper[0]&&n.popup.element.unwrap(),n._wire(),ct.fn.setOptions.call(this,t)},destroy:function(){var e=this;e.target.off(e.options.showOn+k),W.off(c.support.mousedown+k,e._closeProxy),e.userEvents&&e.userEvents.destroy(),ct.fn.destroy.call(e)},open:function(n,i){var o=this;return n=e(n)[0],r(o.element[0],e(n)[0])?ct.fn.open.call(o,n):o._triggerEvent({item:o.element,type:C})===!1&&(o.popup.visible()&&o.options.filter&&o.popup.close(!0),i!==t?(o.popup.wrapper.hide(),o.popup.open(n,i)):(o.popup.options.anchor=(n?n:o.popup.anchor)||o.target,o.popup.open()),W.off(o.popup.downEvent,o.popup._mousedownProxy),W.on(c.support.mousedown+k,o._closeProxy)),o},close:function(){var t=this;r(t.element[0],e(arguments[0])[0])?ct.fn.close.call(t,arguments[0]):t.popup.visible()&&t._triggerEvent({item:t.element,type:A})===!1&&(t.popup.close(),W.off(c.support.mousedown+k,t._closeProxy),t.unbind(I,t._closeTimeoutProxy))},_showHandler:function(e){var t,n=e,i=this,o=i.options;e.event&&(n=e.event,n.pageX=e.x.location,n.pageY=e.y.location),r(i.element[0],e.relatedTarget||e.target)||(i._eventOrigin=n,n.preventDefault(),n.stopImmediatePropagation(),i.element.find("."+$).removeClass($),(o.filter&&c.support.matchesSelector.call(n.currentTarget,o.filter)||!o.filter)&&(o.alignToAnchor?i.open(n.currentTarget):(i.popup.options.anchor=n.currentTarget,i._targetChild?(t=i.target.offset(),i.open(n.pageX-t.left,n.pageY-t.top)):i.open(n.pageX,n.pageY))))},_closeHandler:function(t){var n=this,i=e(t.relatedTarget||t.target),o=i.closest(n.target.selector)[0]==n.target[0],a=i.closest(et).children(X),s=r(n.element[0],i[0]);n._eventOrigin=t,!n.popup.visible()||(3===t.which||!o)&&o||(!n.options.closeOnClick||h||(L||O)&&t.originalEvent.pointerType in at||a[0]||!s)&&s||(s?(this.unbind(I,this._closeTimeoutProxy),n.bind(I,n._closeTimeoutProxy)):n.close())
},_wire:function(){var e=this,t=e.options,n=e.target;e._showProxy=m(e._showHandler,e),e._closeProxy=m(e._closeHandler,e),e._closeTimeoutProxy=m(e.close,e),n[0]&&(c.support.mobileOS&&"contextmenu"==t.showOn?(e.userEvents=new c.UserEvents(n,{filter:t.filter,allowSelection:!1}),n.on(t.showOn+k,!1),e.userEvents.bind("hold",e._showProxy)):t.filter?n.on(t.showOn+k,t.filter,e._showProxy):n.on(t.showOn+k,e._showProxy))},_triggerEvent:function(n){var i=this,r=e(i.popup.options.anchor)[0],o=i._eventOrigin;return i._eventOrigin=t,i.trigger(n.type,g({type:n.type,item:n.item||this.element[0],target:r},o?{event:o}:{}))},_popup:function(){var e=this;e._triggerProxy=m(e._triggerEvent,e),e.popup=e.element.addClass("k-context-menu").kendoPopup({anchor:e.target||"body",copyAnchorStyles:e.options.copyAnchorStyles,collision:e.options.popupCollision||"fit",animation:e.options.animation,activate:e._triggerProxy,deactivate:e._triggerProxy}).data("kendoPopup"),e._targetChild=r(e.target[0],e.popup.element[0])}}),d.plugin(ct),d.plugin(l)}(window.kendo.jQuery),function(e,t){function n(t){return e.trim(t).replace(/&nbsp;/gi,"")}function i(e,t){var n,i,r,o={};for(n=0,i=e.length;i>n;n++)r=e[n],o[r[t]]=r;return o}function r(e){var t,n=[];for(t=0;e.length>t;t++)e[t].columns?n=n.concat(r(e[t].columns)):n.push(e[t]);return n}var o=window.kendo,a=o.ui,s=e.proxy,l=e.extend,c=e.grep,d=e.map,u=e.inArray,h="k-state-selected",p="asc",f="desc",g="change",m="init",v="select",_="kendoPopup",y="kendoFilterMenu",w="kendoMenu",b=".kendoColumnMenu",k=a.Widget,x=k.extend({init:function(t,n){var i,r=this;k.fn.init.call(r,t,n),t=r.element,n=r.options,r.owner=n.owner,r.dataSource=n.dataSource,r.field=t.attr(o.attr("field")),r.title=t.attr(o.attr("title")),i=t.find(".k-header-column-menu"),i[0]||(i=t.addClass("k-with-icon").prepend('<a class="k-header-column-menu" href="#"><span class="k-icon k-i-arrowhead-s"/></a>').find(".k-header-column-menu")),r.link=i.attr("tabindex",-1).on("click"+b,s(r._click,r)),r.wrapper=e('<div class="k-column-menu"/>')},_init:function(){var e=this;e.pane=e.options.pane,e.pane&&(e._isMobile=!0),e._isMobile?e._createMobileMenu():e._createMenu(),e._angularItems("compile"),e._sort(),e._columns(),e._filter(),e._lockColumns(),e.trigger(m,{field:e.field,container:e.wrapper})},events:[m],options:{name:"ColumnMenu",messages:{sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filter:"Filter",columns:"Columns",done:"Done",settings:"Column Settings",lock:"Lock",unlock:"Unlock"},filter:"",columns:!0,sortable:!0,filterable:!0,animations:{left:"slide"}},_createMenu:function(){var e=this,t=e.options;e.wrapper.html(o.template(C)({ns:o.ns,messages:t.messages,sortable:t.sortable,filterable:t.filterable,columns:e._ownerColumns(),showColumns:t.columns,lockedColumns:t.lockedColumns})),e.popup=e.wrapper[_]({anchor:e.link,open:s(e._open,e),activate:s(e._activate,e),close:function(){e.options.closeCallback&&e.options.closeCallback(e.element)}}).data(_),e.menu=e.wrapper.children()[w]({orientation:"vertical",closeOnClick:!1}).data(w)},_createMobileMenu:function(){var e=this,t=e.options,n=o.template(S)({ns:o.ns,field:e.field,title:e.title||e.field,messages:t.messages,sortable:t.sortable,filterable:t.filterable,columns:e._ownerColumns(),showColumns:t.columns,lockedColumns:t.lockedColumns});e.view=e.pane.append(n),e.wrapper=e.view.element.find(".k-column-menu"),e.menu=new T(e.wrapper.children(),{pane:e.pane}),e.view.element.on("click",".k-done",function(t){e.close(),t.preventDefault()}),e.options.lockedColumns&&e.view.bind("show",function(){e._updateLockedColumns()})},_angularItems:function(t){var n=this;n.angular(t,function(){var t=n.wrapper.find(".k-columns-item input["+o.attr("field")+"]").map(function(){return e(this).closest("li")}),i=d(n._ownerColumns(),function(e){return{column:e._originalObject}});return{elements:t,data:i}})},destroy:function(){var e=this;e._angularItems("cleanup"),k.fn.destroy.call(e),e.filterMenu&&e.filterMenu.destroy(),e._refreshHandler&&e.dataSource.unbind(g,e._refreshHandler),e.options.columns&&e.owner&&e._updateColumnsMenuHandler&&(e.owner.unbind("columnShow",e._updateColumnsMenuHandler),e.owner.unbind("columnHide",e._updateColumnsMenuHandler)),e.menu&&(e.menu.element.off(b),e.menu.destroy()),e.wrapper.off(b),e.popup&&e.popup.destroy(),e.view&&e.view.purge(),e.link.off(b),e.owner=null,e.wrapper=null,e.element=null},close:function(){this.menu.close(),this.popup&&(this.popup.close(),this.popup.element.off("keydown"+b))},_click:function(e){e.preventDefault(),e.stopPropagation();var t=this.options;t.filter&&this.element.is(!t.filter)||(this.popup||this.pane||this._init(),this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle())},_open:function(){var t=this;e(".k-column-menu").not(t.wrapper).each(function(){e(this).data(_).close()}),t.popup.element.on("keydown"+b,function(e){e.keyCode==o.keys.ESC&&t.close()}),t.options.lockedColumns&&t._updateLockedColumns()},_activate:function(){this.menu.element.focus()},_ownerColumns:function(){var e=r(this.owner.columns),t=c(e,function(e){var t=!0,i=n(e.title||"");return(e.menu===!1||!e.field&&!i.length)&&(t=!1),t});return d(t,function(t){return{originalField:t.field,field:t.field||t.title,title:t.title||t.field,hidden:t.hidden,index:u(t,e),locked:!!t.locked,_originalObject:t}})},_sort:function(){var t=this;t.options.sortable&&(t.refresh(),t._refreshHandler=s(t.refresh,t),t.dataSource.bind(g,t._refreshHandler),t.menu.bind(v,function(n){var i,r=e(n.item);r.hasClass("k-sort-asc")?i=p:r.hasClass("k-sort-desc")&&(i=f),i&&(r.parent().find(".k-sort-"+(i==p?f:p)).removeClass(h),t._sortDataSource(r,i),t.close())}))},_sortDataSource:function(e,n){var i,r,o=this,a=o.options.sortable,s=null===a.compare?t:a.compare,l=o.dataSource,c=l.sort()||[];if(e.hasClass(h)&&a&&a.allowUnsort!==!1?(e.removeClass(h),n=t):e.addClass(h),a===!0||"single"===a.mode)c=[{field:o.field,dir:n,compare:s}];else{for(i=0,r=c.length;r>i;i++)if(c[i].field===o.field){c.splice(i,1);break}c.push({field:o.field,dir:n,compare:s})}l.sort(c)},_columns:function(){var t=this;t.options.columns&&(t._updateColumnsMenu(),t._updateColumnsMenuHandler=s(t._updateColumnsMenu,t),t.owner.bind(["columnHide","columnShow"],t._updateColumnsMenuHandler),t.menu.bind(v,function(n){var i,a,s,l=e(n.item),d=r(t.owner.columns);t._isMobile&&n.preventDefault(),l.parent().closest("li.k-columns-item")[0]&&(i=l.find(":checkbox"),i.attr("disabled")||(s=i.attr(o.attr("field")),a=c(d,function(e){return e.field==s||e.title==s})[0],a.hidden===!0?t.owner.showColumn(a):t.owner.hideColumn(a)))}))},_updateColumnsMenu:function(){var e,t,n,i,r,a,s=o.attr("field"),l=o.attr("locked"),h=c(this._ownerColumns(),function(e){return!e.hidden}),p=c(h,function(e){return e.originalField}),f=c(p,function(e){return e.locked===!0}).length,g=c(p,function(e){return e.locked!==!0}).length;for(h=d(h,function(e){return e.field}),a=this.wrapper.find(".k-columns-item input["+s+"]").prop("disabled",!1).prop("checked",!1),e=0,t=a.length;t>e;e++)n=a.eq(e),r="true"===n.attr(l),i=!1,u(n.attr(s),h)>-1&&(i=!0,n.prop("checked",i)),i&&(1==f&&r&&n.prop("disabled",!0),1!=g||r||n.prop("disabled",!0))},_updateColumnsLockedState:function(){var e,t,n,r,a=o.attr("field"),s=o.attr("locked"),l=i(this._ownerColumns(),"field"),c=this.wrapper.find(".k-columns-item input[type=checkbox]");for(e=0,t=c.length;t>e;e++)n=c.eq(e),r=l[n.attr(a)],r&&n.attr(s,r.locked);this._updateColumnsMenu()},_filter:function(){var t=this,n=t.options;n.filterable!==!1&&(t.filterMenu=t.wrapper.find(".k-filterable")[y](l(!0,{},{appendToElement:!0,dataSource:n.dataSource,values:n.values,field:t.field},n.filterable)).data(y),t._isMobile&&t.menu.bind(v,function(n){var i=e(n.item);i.hasClass("k-filter-item")&&t.pane.navigate(t.filterMenu.view,t.options.animations.left)}))},_lockColumns:function(){var t=this;t.menu.bind(v,function(n){var i=e(n.item);i.hasClass("k-lock")?(t.owner.lockColumn(t.field),t.close()):i.hasClass("k-unlock")&&(t.owner.unlockColumn(t.field),t.close())})},_updateLockedColumns:function(){var e,t,n,i,r=this.field,o=this.owner.columns,a=c(o,function(e){return e.field==r||e.title==r})[0];a&&(e=a.locked===!0,t=c(o,function(t){return!t.hidden&&(t.locked&&e||!t.locked&&!e)}).length,n=this.wrapper.find(".k-lock").removeClass("k-state-disabled"),i=this.wrapper.find(".k-unlock").removeClass("k-state-disabled"),(e||1==t)&&n.addClass("k-state-disabled"),e&&1!=t||i.addClass("k-state-disabled"),this._updateColumnsLockedState())},refresh:function(){var e,t,n,i=this,r=i.options.dataSource.sort()||[],o=i.field;for(i.wrapper.find(".k-sort-asc, .k-sort-desc").removeClass(h),t=0,n=r.length;n>t;t++)e=r[t],o==e.field&&i.wrapper.find(".k-sort-"+e.dir).addClass(h)}}),C='<ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-sprite k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-sprite k-i-sort-desc"></span>${messages.sortDescending}</span></li>#if(showColumns || filterable){#<li class="k-separator"></li>#}##}##if(showColumns){#<li class="k-item k-columns-item"><span class="k-link"><span class="k-sprite k-i-columns"></span>${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li><input type="checkbox" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</li>#}#</ul></li>#if(filterable || lockedColumns){#<li class="k-separator"></li>#}##}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link"><span class="k-sprite k-filter"></span>${messages.filter}</span><ul><li><div class="k-filterable"></div></li></ul></li>#if(lockedColumns){#<li class="k-separator"></li>#}##}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-sprite k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-sprite k-i-unlock"></span>${messages.unlock}</span></li>#}#</ul>',S='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-column-menu"><div data-#=ns#role="header" class="k-header">${messages.settings}<button class="k-button k-done">#=messages.done#</button></div><div class="k-column-menu k-mobile-list"><ul><li><span class="k-link">${title}</span><ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-sprite k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-sprite k-i-sort-desc"></span>${messages.sortDescending}</span></li>#}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-sprite k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-sprite k-i-unlock"></span>${messages.unlock}</span></li>#}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link k-filterable"><span class="k-sprite k-filter"></span>${messages.filter}</span></li>#}#</ul></li>#if(showColumns){#<li class="k-columns-item"><span class="k-link">${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li class="k-item"><label class="k-label"><input type="checkbox" class="k-check" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</label></li>#}#</ul></li>#}#</ul></div></div>',T=k.extend({init:function(e,t){k.fn.init.call(this,e,t),this.element.on("click"+b,"li:not(.k-separator):not(.k-state-disabled)","_click")},events:[v],_click:function(e){e.preventDefault(),this.trigger(v,{item:e.currentTarget})},close:function(){this.options.pane.navigate("")},destroy:function(){k.fn.destroy.call(this),this.element.off(b)}});a.plugin(x)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.Widget,o="dir",a="asc",s="single",l="field",c="desc",d=".kendoColumnSorter",u=".k-link",h="aria-sort",p=e.proxy,f=r.extend({init:function(e,t){var n,i=this;r.fn.init.call(i,e,t),i._refreshHandler=p(i.refresh,i),i.dataSource=i.options.dataSource.bind("change",i._refreshHandler),n=i.element.find(u),n[0]||(n=i.element.wrapInner('<a class="k-link" href="#"/>').find(u)),i.link=n,i.element.on("click"+d,p(i._click,i))},options:{name:"ColumnSorter",mode:s,allowUnsort:!0,compare:null,filter:""},destroy:function(){var e=this;r.fn.destroy.call(e),e.element.off(d),e.dataSource.unbind("change",e._refreshHandler),e._refreshHandler=e.element=e.link=e.dataSource=null},refresh:function(){var t,i,r,s,d=this,u=d.dataSource.sort()||[],p=d.element,f=p.attr(n.attr(l));for(p.removeAttr(n.attr(o)),p.removeAttr(h),t=0,i=u.length;i>t;t++)r=u[t],f==r.field&&p.attr(n.attr(o),r.dir);s=p.attr(n.attr(o)),p.find(".k-i-arrow-n,.k-i-arrow-s").remove(),s===a?(e('<span class="k-icon k-i-arrow-n" />').appendTo(d.link),p.attr(h,"ascending")):s===c&&(e('<span class="k-icon k-i-arrow-s" />').appendTo(d.link),p.attr(h,"descending"))},_click:function(e){var i,r,d=this,u=d.element,h=u.attr(n.attr(l)),p=u.attr(n.attr(o)),f=d.options,g=null===d.options.compare?t:d.options.compare,m=d.dataSource.sort()||[];if(e.preventDefault(),!f.filter||u.is(f.filter)){if(p=p===a?c:p===c&&f.allowUnsort?t:a,f.mode===s)m=[{field:h,dir:p,compare:g}];else if("multiple"===f.mode){for(i=0,r=m.length;r>i;i++)if(m[i].field===h){m.splice(i,1);break}m.push({field:h,dir:p,compare:g})}this.dataSource.sort(m)}}});i.plugin(f)}(window.kendo.jQuery),function(e,t){function n(t){return t=null!=t?t:"",t.type||e.type(t)||"string"}function i(t){t.find(":input:not(:button, ["+s.attr("role")+"=upload], ["+s.attr("skip")+"], [type=file]), select").each(function(){var t=s.attr("bind"),n=this.getAttribute(t)||"",i="checkbox"===this.type||"radio"===this.type?"checked:":"value:",r=this.name;-1===n.indexOf(i)&&r&&(n+=(n.length?",":"")+i+r,e(this).attr(t,n))})}function r(e){var t,i,r=(e.model.fields||e.model)[e.field],o=n(r),a=r?r.validation:{},l=s.attr("type"),c=s.attr("bind"),d={name:e.field};for(t in a)i=a[t],f(t,_)>=0?d[l]=t:h(i)||(d[t]=p(i)?i.value||t:i),d[s.attr(t+"-msg")]=i.message;return f(o,_)>=0&&(d[l]=o),d[c]=("boolean"===o?"checked:":"value:")+e.field,d}function o(e){var t,n,i,r,o,a;if(e&&e.length)for(a=[],t=0,n=e.length;n>t;t++)i=e[t],o=i.text||i.value||i,r=null==i.value?i.text||i:i.value,a[t]={text:o,value:r};return a}function a(e,t){var n,i,r=e?e.validation||{}:{};for(n in r)i=r[n],p(i)&&i.value&&(i=i.value),h(i)&&(t[n]=i)}var s=window.kendo,l=s.ui,c=l.Widget,d=e.extend,u=s.support.browser.msie&&9>s.support.browser.version,h=s.isFunction,p=e.isPlainObject,f=e.inArray,g=/("|\%|'|\[|\]|\$|\.|\,|\:|\;|\+|\*|\&|\!|\#|\(|\)|<|>|\=|\?|\@|\^|\{|\}|\~|\/|\||`)/g,m='<div class="k-widget k-tooltip k-tooltip-validation" style="margin:0.5em"><span class="k-icon k-warning"> </span>#=message#<div class="k-callout k-callout-n"></div></div>',v="change",_=["url","email","number","date","boolean"],y={number:function(t,n){var i=r(n);e('<input type="text"/>').attr(i).appendTo(t).kendoNumericTextBox({format:n.format}),e("<span "+s.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},date:function(t,n){var i=r(n),o=n.format;o&&(o=s._extractFormat(o)),i[s.attr("format")]=o,e('<input type="text"/>').attr(i).appendTo(t).kendoDatePicker({format:n.format}),e("<span "+s.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},string:function(t,n){var i=r(n);e('<input type="text" class="k-input k-textbox"/>').attr(i).appendTo(t)},"boolean":function(t,n){var i=r(n);e('<input type="checkbox" />').attr(i).appendTo(t)},values:function(t,n){var i=r(n);e("<select "+s.attr("text-field")+'="text"'+s.attr("value-field")+'="value"'+s.attr("source")+"='"+s.stringify(o(n.values)).replace(/\'/g,"&apos;")+"'"+s.attr("role")+'="dropdownlist"/>').attr(i).appendTo(t),e("<span "+s.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)}},w=c.extend({init:function(t,n){var i=this;n.target&&(n.$angular=n.target.options.$angular),c.fn.init.call(i,t,n),i._validateProxy=e.proxy(i._validate,i),i.refresh()},events:[v],options:{name:"Editable",editors:y,clearContainer:!0,errorTemplate:m},editor:function(e,t){var i=this,r=i.options.editors,o=p(e),a=o?e.field:e,l=i.options.model||{},c=o&&e.values,u=c?"values":n(t),h=o&&e.editor,f=h?e.editor:r[u],m=i.element.find("["+s.attr("container-for")+"="+a.replace(g,"\\$1")+"]");f=f?f:r.string,h&&"string"==typeof e.editor&&(f=function(t){t.append(e.editor)}),m=m.length?m:i.element,f(m,d(!0,{},o?e:{field:a},{model:l}))},_validate:function(t){var n,i=this,r=t.value,o=i._validationEventInProgress,a={},l=s.attr("bind"),c=t.field.replace(g,"\\$1"),d="checked:"+c,u="value:"+c;a[t.field]=t.value,n=e(":input["+l+'*="'+u+'"],:input['+l+'*="'+d+'"]',i.element).filter("["+s.attr("validate")+"!='false']"),n.length>1&&(n=n.filter(function(){var t=e(this),n=t.attr(l).split(","),i=f(u,n)>=0||f(d,n)>=0;return i&&(!t.is(":radio")||t.val()==r)}));try{i._validationEventInProgress=!0,(!i.validatable.validateInput(n)||!o&&i.trigger(v,{values:a}))&&t.preventDefault()}finally{i._validationEventInProgress=!1}},end:function(){return this.validatable.validate()},destroy:function(){var e=this;e.angular("cleanup",function(){return{elements:e.element}}),c.fn.destroy.call(e),e.options.model.unbind("set",e._validateProxy),s.unbind(e.element),e.validatable&&e.validatable.destroy(),s.destroy(e.element),e.element.removeData("kendoValidator")},refresh:function(){var n,r,o,l,c,d,h,f,g=this,m=g.options.fields||[],v=g.options.clearContainer?g.element.empty():g.element,_=g.options.model||{},y={};for(e.isArray(m)||(m=[m]),n=0,r=m.length;r>n;n++)o=m[n],l=p(o),c=l?o.field:o,d=(_.fields||_)[c],a(d,y),g.editor(o,d);if(g.options.target&&g.angular("compile",function(){return{elements:v,data:[{dataItem:_}]}}),!r){h=_.fields||_;for(c in h)a(h[c],y)}i(v),g.validatable&&g.validatable.destroy(),s.bind(v,g.options.model),g.options.model.unbind("set",g._validateProxy),g.options.model.bind("set",g._validateProxy),g.validatable=new s.ui.Validator(v,{validateOnBlur:!1,errorTemplate:g.options.errorTemplate||t,rules:y}),f=v.find(":kendoFocusable").eq(0).focus(),u&&f.focus()}});l.plugin(w)}(window.kendo.jQuery),function(e,t){function n(e){return t!==e}function i(e,t,n){return Math.max(Math.min(parseInt(e,10),1/0===n?n:parseInt(n,10)),parseInt(t,10))}function r(e,t){return function(){var n=this,i=n.wrapper,r=i[0].style,o=n.options;if(!o.isMaximized&&!o.isMinimized)return n.restoreOptions={width:r.width,height:r.height},i.children(x).hide().end().children(b).find(G).parent().hide().eq(0).before(Z.action({name:"Restore"})),t.call(n),"maximize"==e?n.wrapper.children(b).find(Y).parent().hide():n.wrapper.children(b).find(Y).parent().show(),n}}function o(){return!this.type||this.type.toLowerCase().indexOf("script")>=0}function a(e){var t=this;t.owner=e,t._draggable=new d(e.wrapper,{filter:">"+x,group:e.wrapper.id+"-resizing",dragstart:p(t.dragstart,t),drag:p(t.drag,t),dragend:p(t.dragend,t)}),t._draggable.userEvents.bind("press",p(t.addOverlay,t)),t._draggable.userEvents.bind("release",p(t.removeOverlay,t))}function s(e,t){var n=this;n.owner=e,n._draggable=new d(e.wrapper,{filter:t,group:e.wrapper.id+"-moving",dragstart:p(n.dragstart,n),drag:p(n.drag,n),dragend:p(n.dragend,n),dragcancel:p(n.dragcancel,n)}),n._draggable.userEvents.stopPropagation=!1}var l=window.kendo,c=l.ui.Widget,d=l.ui.Draggable,u=e.isPlainObject,h=l._activeElement,p=e.proxy,f=e.extend,g=e.each,m=l.template,v="body",_=".kendoWindow",y=".k-window",w=".k-window-title",b=w+"bar",k=".k-window-content",x=".k-resize-handle",C=".k-overlay",S="k-content-frame",T="k-loading",D="k-state-hover",A="k-state-focused",E="k-window-maximized",M=":visible",P="hidden",I="cursor",z="open",F="activate",R="deactivate",B="close",L="refresh",O="resize",H="resizeEnd",N="dragstart",V="dragend",U="error",W="overflow",j="zIndex",G=".k-window-actions .k-i-minimize,.k-window-actions .k-i-maximize",q=".k-i-pin",$=".k-i-unpin",Y=q+","+$,K=".k-window-titlebar .k-window-action",Q=".k-window-titlebar .k-i-refresh",X=l.isLocalUrl,J=c.extend({init:function(i,r){var a,s,d,h,f,g,m,v=this,x={},C=!1,S=r&&r.actions&&!r.actions.length;c.fn.init.call(v,i,r),r=v.options,h=r.position,i=v.element,f=r.content,S&&(r.actions=[]),v.appendTo=e(r.appendTo),v._animations(),f&&!u(f)&&(f=r.content={url:f}),i.find("script").filter(o).remove(),i.parent().is(v.appendTo)||h.top!==t&&h.left!==t||(i.is(M)?(x=i.offset(),C=!0):(s=i.css("visibility"),d=i.css("display"),i.css({visibility:P,display:""}),x=i.offset(),i.css({visibility:s,display:d})),h.top===t&&(h.top=x.top),h.left===t&&(h.left=x.left)),n(r.visible)&&null!==r.visible||(r.visible=i.is(M)),a=v.wrapper=i.closest(y),i.is(".k-content")&&a[0]||(i.addClass("k-window-content k-content"),v._createWindow(i,r),a=v.wrapper=i.closest(y),v._dimensions()),v._position(),r.pinned&&v.pin(!0),f&&v.refresh(f),r.visible&&v.toFront(),g=a.children(k),v._tabindex(g),r.visible&&r.modal&&v._overlay(a.is(M)).css({opacity:.5}),a.on("mouseenter"+_,K,p(v._buttonEnter,v)).on("mouseleave"+_,K,p(v._buttonLeave,v)).on("click"+_,"> "+K,p(v._windowActionHandler,v)),g.on("keydown"+_,p(v._keydown,v)).on("focus"+_,p(v._focus,v)).on("blur"+_,p(v._blur,v)),this._resizable(),this._draggable(),m=i.attr("id"),m&&(m+="_wnd_title",a.children(b).children(w).attr("id",m),g.attr({role:"dialog","aria-labelledby":m})),a.add(a.children(".k-resize-handle,"+b)).on("mousedown"+_,p(v.toFront,v)),v.touchScroller=l.touchScroller(i),v._resizeHandler=p(v._onDocumentResize,v),v._marker=l.guid().substring(0,8),e(window).on("resize"+_+v._marker,v._resizeHandler),r.visible&&(v.trigger(z),v.trigger(F)),l.notify(v)},_buttonEnter:function(t){e(t.currentTarget).addClass(D)},_buttonLeave:function(t){e(t.currentTarget).removeClass(D)},_focus:function(){this.wrapper.addClass(A)},_blur:function(){this.wrapper.removeClass(A)},_dimensions:function(){var e,t,n=this.wrapper,r=this.options,o=r.width,a=r.height,s=r.maxHeight,l=["minWidth","minHeight","maxWidth","maxHeight"];for(this.title(r.title),e=0;l.length>e;e++)t=r[l[e]],t&&1/0!=t&&n.css(l[e],t);s&&1/0!=s&&this.element.css("maxHeight",s),o&&n.width((""+o).indexOf("%")>0?o:i(o,r.minWidth,r.maxWidth)),a&&n.height((""+a).indexOf("%")>0?a:i(a,r.minHeight,r.maxHeight)),r.visible||n.hide()},_position:function(){var e=this.wrapper,t=this.options.position;0===t.top&&(t.top=""+t.top),0===t.left&&(t.left=""+t.left),e.css({top:t.top||"",left:t.left||""})},_animations:function(){var e=this.options;e.animation===!1&&(e.animation={open:{effects:{}},close:{hide:!0,effects:{}}})},_resize:function(){l.resize(this.element.children())},_resizable:function(){var t=this.options.resizable,n=this.wrapper;this.resizing&&(n.off("dblclick"+_).children(x).remove(),this.resizing.destroy(),this.resizing=null),t&&(n.on("dblclick"+_,b,p(function(t){e(t.target).closest(".k-window-action").length||this.toggleMaximization()},this)),g("n e s w se sw ne nw".split(" "),function(e,t){n.append(Z.resizeHandle(t))}),this.resizing=new a(this)),n=null},_draggable:function(){var e=this.options.draggable;this.dragging&&(this.dragging.destroy(),this.dragging=null),e&&(this.dragging=new s(this,e.dragHandle||b))},_actions:function(){var t=this.options.actions,n=this.wrapper.children(b),i=n.find(".k-window-actions");t=e.map(t,function(e){return{name:e}}),i.html(l.render(Z.action,t))},setOptions:function(e){c.fn.setOptions.call(this,e),this._animations(),this._dimensions(),this._position(),this._resizable(),this._draggable(),this._actions()},events:[z,F,R,B,L,O,H,N,V,U],options:{name:"Window",animation:{open:{effects:{zoom:{direction:"in"},fade:{direction:"in"}},duration:350},close:{effects:{zoom:{direction:"out",properties:{scale:.7}},fade:{direction:"out"}},duration:350,hide:!0}},title:"",actions:["Close"],autoFocus:!0,modal:!1,resizable:!0,draggable:!0,minWidth:90,minHeight:50,maxWidth:1/0,maxHeight:1/0,pinned:!1,position:{},content:null,visible:null,height:null,width:null,appendTo:"body"},_closable:function(){return e.inArray("close",e.map(this.options.actions,function(e){return e.toLowerCase()}))>-1},_keydown:function(e){var t,n,r,o,a,s,c=this,d=c.options,u=l.keys,h=e.keyCode,p=c.wrapper,f=10,g=c.options.isMaximized;e.target!=e.currentTarget||c._closing||(h==u.ESC&&c._closable()&&c._close(!1),!d.draggable||e.ctrlKey||g||(t=l.getOffset(p),h==u.UP?n=p.css("top",t.top-f):h==u.DOWN?n=p.css("top",t.top+f):h==u.LEFT?n=p.css("left",t.left-f):h==u.RIGHT&&(n=p.css("left",t.left+f))),d.resizable&&e.ctrlKey&&!g&&(h==u.UP?(n=!0,o=p.height()-f):h==u.DOWN&&(n=!0,o=p.height()+f),h==u.LEFT?(n=!0,r=p.width()-f):h==u.RIGHT&&(n=!0,r=p.width()+f),n&&(a=i(r,d.minWidth,d.maxWidth),s=i(o,d.minHeight,d.maxHeight),isNaN(a)||(p.width(a),c.options.width=a+"px"),isNaN(s)||(p.height(s),c.options.height=s+"px"),c.resize())),n&&e.preventDefault())},_overlay:function(t){var n=this.appendTo.children(C),i=this.wrapper;return n.length||(n=e("<div class='k-overlay' />")),n.insertBefore(i[0]).toggle(t).css(j,parseInt(i.css(j),10)-1),n},_actionForIcon:function(e){var t=/\bk-i-\w+\b/.exec(e[0].className)[0];return{"k-i-close":"_close","k-i-maximize":"maximize","k-i-minimize":"minimize","k-i-restore":"restore","k-i-refresh":"refresh","k-i-pin":"pin","k-i-unpin":"unpin"}[t]},_windowActionHandler:function(n){var i,r;if(!this._closing)return i=e(n.target).closest(".k-window-action").find(".k-icon"),r=this._actionForIcon(i),r?(n.preventDefault(),this[r](),!1):t},_modals:function(){var t=this,n=e(y).filter(function(){var n=e(this),i=t._object(n),r=i&&i.options;return r&&r.modal&&r.visible&&n.is(M)}).sort(function(t,n){return+e(t).css("zIndex")-+e(n).css("zIndex")});return t=null,n},_object:function(e){var t=e.children(k);return t.data("kendoWindow")||t.data("kendo"+this.options.name)},center:function(){var t,n,i=this,r=i.options.position,o=i.wrapper,a=e(window),s=0,l=0;return i.options.isMaximized?i:(i.options.pinned||(s=a.scrollTop(),l=a.scrollLeft()),n=l+Math.max(0,(a.width()-o.width())/2),t=s+Math.max(0,(a.height()-o.height()-parseInt(o.css("paddingTop"),10))/2),o.css({left:n,top:t}),r.top=t,r.left=n,i)},title:function(e){var t,n=this,i=n.wrapper,r=n.options,o=i.children(b),a=o.children(w);return arguments.length?(e===!1?(i.addClass("k-window-titleless"),o.remove()):(o.length?a.html(e):(i.prepend(Z.titlebar(r)),n._actions(),o=i.children(b)),t=o.outerHeight(),i.css("padding-top",t),o.css("margin-top",-t)),n.options.title=e,n):a.text()},content:function(e,t){var i=this.wrapper.children(k),r=i.children(".km-scroll-container");return i=r[0]?r:i,n(e)?(this.angular("cleanup",function(){return{elements:i.children()}}),l.destroy(this.element.children()),i.empty().html(e),this.angular("compile",function(){var e,n=[];for(e=i.length;--e>=0;)n.push({dataItem:t});return{elements:i.children(),data:n}}),this):i.html()},open:function(){var t,n,i=this,r=i.wrapper,o=i.options,a=o.animation.open,s=r.children(k);return i.trigger(z)||(i._closing&&r.kendoStop(!0,!0),i._closing=!1,i.toFront(),o.autoFocus&&i.element.focus(),o.visible=!0,o.modal&&(t=i._overlay(!1),t.kendoStop(!0,!0),a.duration&&l.effects.Fade?(n=l.fx(t).fadeIn(),n.duration(a.duration||0),n.endValue(.5),n.play()):t.css("opacity",.5),t.show()),r.is(M)||(s.css(W,P),r.show().kendoStop().kendoAnimate({effects:a.effects,duration:a.duration,complete:p(this._activate,this)}))),o.isMaximized&&(i._documentScrollTop=e(document).scrollTop(),e("html, body").css(W,P)),i},_activate:function(){this.options.autoFocus&&this.element.focus(),this.trigger(F),this.wrapper.children(k).css(W,"")},_removeOverlay:function(n){var i,r=this._modals(),o=this.options,a=o.modal&&!r.length,s=o.modal?this._overlay(!0):e(t),c=o.animation.close;a?!n&&c.duration&&l.effects.Fade?(i=l.fx(s).fadeOut(),i.duration(c.duration||0),i.startValue(.5),i.play()):this._overlay(!1).remove():r.length&&this._object(r.last())._overlay(!0)},_close:function(t){var n=this,i=n.wrapper,r=n.options,o=r.animation.open,a=r.animation.close;if(i.is(M)&&!n.trigger(B,{userTriggered:!t})){if(n._closing)return;n._closing=!0,r.visible=!1,e(y).each(function(t,n){var r=e(n).children(k);n!=i&&r.find("> ."+S).length>0&&r.children(C).remove()}),this._removeOverlay(),i.kendoStop().kendoAnimate({effects:a.effects||o.effects,reverse:a.reverse===!0,duration:a.duration,complete:p(this._deactivate,this)})}n.options.isMaximized&&(e("html, body").css(W,""),n._documentScrollTop&&n._documentScrollTop>0&&e(document).scrollTop(n._documentScrollTop))},_deactivate:function(){this.wrapper.hide().css("opacity",""),this.trigger(R);var e=this._object(this._modals().last());e&&e.toFront()},close:function(){return this._close(!0),this},_actionable:function(t){return e(t).is(K+","+K+" .k-icon,:input,a")},_shouldFocus:function(t){var n=h(),i=this.element;return!(!this.options.autoFocus||e(n).is(i)||this._actionable(t)||i.find(n).length&&i.find(t).length)},toFront:function(t){var n,i,r=this,o=r.wrapper,a=o[0],s=+o.css(j),l=s,c=t&&t.target||null;return e(y).each(function(t,n){var i=e(n),r=i.css(j),o=i.children(k);isNaN(r)||(s=Math.max(+r,s)),n!=a&&o.find("> ."+S).length>0&&o.append(Z.overlay)}),(!o[0].style.zIndex||s>l)&&o.css(j,s+2),r.element.find("> .k-overlay").remove(),r._shouldFocus(c)&&(r.element.focus(),n=e(window).scrollTop(),i=parseInt(o.position().top,10),i>0&&n>i&&(n>0?e(window).scrollTop(i):o.css("top",n))),o=null,r},toggleMaximization:function(){return this._closing?this:this[this.options.isMaximized?"restore":"maximize"]()},restore:function(){var t=this,n=t.options,i=n.minHeight,r=t.restoreOptions;return n.isMaximized||n.isMinimized?(i&&1/0!=i&&t.wrapper.css("min-height",i),t.wrapper.css({position:n.pinned?"fixed":"absolute",left:r.left,top:r.top,width:r.width,height:r.height}).removeClass(E).find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-restore").parent().remove().end().end().find(G).parent().show().end().end().find(Y).parent().show(),t.options.width=r.width,t.options.height=r.height,e("html, body").css(W,""),this._documentScrollTop&&this._documentScrollTop>0&&e(document).scrollTop(this._documentScrollTop),n.isMaximized=n.isMinimized=!1,t.resize(),t):t},maximize:r("maximize",function(){var t=this,n=t.wrapper,i=n.position();f(t.restoreOptions,{left:i.left,top:i.top}),n.css({left:0,top:0,position:"fixed"}).addClass(E),this._documentScrollTop=e(document).scrollTop(),e("html, body").css(W,P),t.options.isMaximized=!0,t._onDocumentResize()}),minimize:r("minimize",function(){var e=this;e.wrapper.css({height:"",minHeight:""}),e.element.hide(),e.options.isMinimized=!0}),pin:function(t){var n=this,i=e(window),r=n.wrapper,o=parseInt(r.css("top"),10),a=parseInt(r.css("left"),10);(t||!n.options.pinned&&!n.options.isMaximized)&&(r.css({position:"fixed",top:o-i.scrollTop(),left:a-i.scrollLeft()}),r.children(b).find(q).addClass("k-i-unpin").removeClass("k-i-pin"),n.options.pinned=!0)},unpin:function(){var t=this,n=e(window),i=t.wrapper,r=parseInt(i.css("top"),10),o=parseInt(i.css("left"),10);t.options.pinned&&!t.options.isMaximized&&(i.css({position:"",top:r+n.scrollTop(),left:o+n.scrollLeft()}),i.children(b).find($).addClass("k-i-pin").removeClass("k-i-unpin"),t.options.pinned=!1)},_onDocumentResize:function(){var t,n,i=this,r=i.wrapper,o=e(window);i.options.isMaximized&&(t=o.width(),n=o.height()-parseInt(r.css("padding-top"),10),r.css({width:t,height:n}),i.options.width=t,i.options.height=n,i.resize())},refresh:function(t){var i,r,o,a=this,s=a.options,l=e(a.element);return u(t)||(t={url:t}),t=f({},s.content,t),r=n(s.iframe)?s.iframe:t.iframe,o=t.url,o?(n(r)||(r=!X(o)),r?(i=l.find("."+S)[0],i?i.src=o||i.src:l.html(Z.contentFrame(f({},s,{content:t}))),l.find("."+S).unbind("load"+_).on("load"+_,p(this._triggerRefresh,this))):a._ajaxRequest(t)):(t.template&&a.content(m(t.template)({})),a.trigger(L)),l.toggleClass("k-window-iframecontent",!!r),a},_triggerRefresh:function(){this.trigger(L)},_ajaxComplete:function(){clearTimeout(this._loadingIconTimeout),this.wrapper.find(Q).removeClass(T)
},_ajaxError:function(e,t){this.trigger(U,{status:t,xhr:e})},_ajaxSuccess:function(e){return function(t){var n=t;e&&(n=m(e)(t||{})),this.content(n,t),this.element.prop("scrollTop",0),this.trigger(L)}},_showLoading:function(){this.wrapper.find(Q).addClass(T)},_ajaxRequest:function(t){this._loadingIconTimeout=setTimeout(p(this._showLoading,this),100),e.ajax(f({type:"GET",dataType:"html",cache:!1,error:p(this._ajaxError,this),complete:p(this._ajaxComplete,this),success:p(this._ajaxSuccess(t.template),this)},t))},destroy:function(){var n=this;n.resizing&&n.resizing.destroy(),n.dragging&&n.dragging.destroy(),n.wrapper.off(_).children(k).off(_).end().find(".k-resize-handle,.k-window-titlebar").off(_),e(window).off("resize"+_+n._marker),clearTimeout(n._loadingIconTimeout),c.fn.destroy.call(n),n.unbind(t),l.destroy(n.wrapper),n._removeOverlay(!0),n.wrapper.empty().remove(),n.wrapper=n.appendTo=n.element=e()},_createWindow:function(){var t,n,i=this.element,r=this.options,o=l.support.isRtl(i);r.scrollable===!1&&i.attr("style","overflow:hidden;"),n=e(Z.wrapper(r)),t=i.find("iframe:not(.k-content)").map(function(){var e=this.getAttribute("src");return this.src="",e}),n.toggleClass("k-rtl",o).appendTo(this.appendTo).append(i).find("iframe:not(.k-content)").each(function(e){this.src=t[e]}),n.find(".k-window-title").css(o?"left":"right",n.find(".k-window-actions").outerWidth()+10),i.css("visibility","").show(),i.find("[data-role=editor]").each(function(){var t=e(this).data("kendoEditor");t&&t.refresh()}),n=i=null}}),Z={wrapper:m("<div class='k-widget k-window' />"),action:m("<a role='button' href='\\#' class='k-window-action k-link'><span role='presentation' class='k-icon k-i-#= name.toLowerCase() #'>#= name #</span></a>"),titlebar:m("<div class='k-window-titlebar k-header'>&nbsp;<span class='k-window-title'>#= title #</span><div class='k-window-actions' /></div>"),overlay:"<div class='k-overlay' />",contentFrame:m("<iframe frameborder='0' title='#= title #' class='"+S+"' src='#= content.url #'>This page requires frames in order to show content</iframe>"),resizeHandle:m("<div class='k-resize-handle k-resize-#= data #'></div>")};a.prototype={addOverlay:function(){this.owner.wrapper.append(Z.overlay)},removeOverlay:function(){this.owner.wrapper.find(C).remove()},dragstart:function(t){var n=this,i=n.owner,r=i.wrapper;n.elementPadding=parseInt(r.css("padding-top"),10),n.initialPosition=l.getOffset(r,"position"),n.resizeDirection=t.currentTarget.prop("className").replace("k-resize-handle k-resize-",""),n.initialSize={width:r.width(),height:r.height()},n.containerOffset=l.getOffset(i.appendTo,"position"),r.children(x).not(t.currentTarget).hide(),e(v).css(I,t.currentTarget.css(I))},drag:function(e){var t,n,r,o,a=this,s=a.owner,l=s.wrapper,c=s.options,d=a.resizeDirection,u=a.containerOffset,h=a.initialPosition,p=a.initialSize,f=Math.max(e.x.location,u.left),g=Math.max(e.y.location,u.top);d.indexOf("e")>=0?(t=f-h.left,l.width(i(t,c.minWidth,c.maxWidth))):d.indexOf("w")>=0&&(o=h.left+p.width,t=i(o-f,c.minWidth,c.maxWidth),l.css({left:o-t-u.left,width:t})),d.indexOf("s")>=0?(n=g-h.top-a.elementPadding,l.height(i(n,c.minHeight,c.maxHeight))):d.indexOf("n")>=0&&(r=h.top+p.height,n=i(r-g,c.minHeight,c.maxHeight),l.css({top:r-n-u.top,height:n})),t&&(s.options.width=t+"px"),n&&(s.options.height=n+"px"),s.resize()},dragend:function(t){var n=this,i=n.owner,r=i.wrapper;return r.children(x).not(t.currentTarget).show(),e(v).css(I,""),i.touchScroller&&i.touchScroller.reset(),27==t.keyCode&&r.css(n.initialPosition).css(n.initialSize),i.trigger(H),!1},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},s.prototype={dragstart:function(t){var n=this.owner,i=n.element,r=i.find(".k-window-actions"),o=l.getOffset(n.appendTo);n.trigger(N),n.initialWindowPosition=l.getOffset(n.wrapper,"position"),n.startPosition={left:t.x.client-n.initialWindowPosition.left,top:t.y.client-n.initialWindowPosition.top},n.minLeftPosition=r.length>0?r.outerWidth()+parseInt(r.css("right"),10)-i.outerWidth():20-i.outerWidth(),n.minLeftPosition-=o.left,n.minTopPosition=-o.top,n.wrapper.append(Z.overlay).children(x).hide(),e(v).css(I,t.currentTarget.css(I))},drag:function(t){var n=this.owner,i=n.options.position,r=Math.max(t.y.client-n.startPosition.top,n.minTopPosition),o=Math.max(t.x.client-n.startPosition.left,n.minLeftPosition),a={left:o,top:r};e(n.wrapper).css(a),i.top=r,i.left=o},_finishDrag:function(){var t=this.owner;t.wrapper.children(x).toggle(!t.options.isMinimized).end().find(C).remove(),e(v).css(I,"")},dragcancel:function(e){this._finishDrag(),e.currentTarget.closest(y).css(this.owner.initialWindowPosition)},dragend:function(){return this._finishDrag(),this.owner.trigger(V),!1},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},l.ui.plugin(J)}(window.kendo.jQuery),function(e,t){function n(e){var t,n,i=e.find(k("popover")),r=s.roles;for(t=0,n=i.length;n>t;t++)o.initWidget(i[t],{},r)}function i(e){o.triggeredByInput(e)||e.preventDefault()}function r(t){t.each(function(){o.initWidget(e(this),{},s.roles)})}var o=window.kendo,a=o.mobile,s=a.ui,l=o.attr,c=s.Widget,d=o.ViewClone,u="init",h='<div style="height: 100%; width: 100%; position: absolute; top: 0; left: 0; z-index: 20000; display: none" />',p="beforeShow",f="show",g="afterShow",m="beforeHide",v="transitionEnd",_="transitionStart",y="hide",w="destroy",b=o.attrValue,k=o.roleSelector,x=o.directiveSelector,C=o.compileMobileDirective,S=c.extend({init:function(t,n){c.fn.init.call(this,t,n),this.params={},e.extend(this,n),this.transition=this.transition||this.defaultTransition,this._id(),this.options.$angular?this._overlay():(this._layout(),this._overlay(),this._scroller(),this._model())},events:[u,p,f,g,m,y,w,_,v],options:{name:"View",title:"",layout:null,getLayout:e.noop,reload:!1,transition:"",defaultTransition:"",useNativeScrolling:!1,stretch:!1,zoom:!1,model:null,modelScope:window,scroller:{},initWidgets:!0},enable:function(e){t===e&&(e=!0),e?this.overlay.hide():this.overlay.show()},destroy:function(){this.layout&&this.layout.detach(this),this.trigger(w),c.fn.destroy.call(this),this.scroller&&this.scroller.destroy(),this.options.$angular&&this.element.scope().$destroy(),o.destroy(this.element)},purge:function(){this.destroy(),this.element.remove()},triggerBeforeShow:function(){return this.trigger(p,{view:this})?!1:!0},showStart:function(){var e=this.element;e.css("display",""),this.inited?this._invokeNgController():(this.inited=!0,this.trigger(u,{view:this})),this.layout&&this.layout.attach(this),this._padIfNativeScrolling(),this.trigger(f,{view:this}),o.resize(e)},showEnd:function(){this.trigger(g,{view:this}),this._padIfNativeScrolling()},hideStart:function(){this.trigger(m,{view:this})},hideEnd:function(){var e=this;e.element.hide(),e.trigger(y,{view:e}),e.layout&&e.layout.trigger(y,{view:e,layout:e.layout})},beforeTransition:function(e){this.trigger(_,{type:e})},afterTransition:function(e){this.trigger(v,{type:e})},_padIfNativeScrolling:function(){if(a.appLevelNativeScrolling()){var e=o.support.mobileOS&&o.support.mobileOS.android,t=a.application.os.android||a.application.skin().indexOf("android")>-1,n=e||t?"footer":"header",i=e||t?"header":"footer";this.content.css({paddingTop:this[n].height(),paddingBottom:this[i].height()})}},contentElement:function(){var e=this;return e.options.stretch?e.content:e.scrollerContent},clone:function(){return new d(this)},_scroller:function(){var t=this;a.appLevelNativeScrolling()||(t.options.stretch?t.content.addClass("km-stretched-view"):(t.content.kendoMobileScroller(e.extend(t.options.scroller,{zoom:t.options.zoom,useNative:t.options.useNativeScrolling})),t.scroller=t.content.data("kendoMobileScroller"),t.scrollerContent=t.scroller.scrollElement),o.support.kineticScrollNeeded&&(e(t.element).on("touchmove",".km-header",i),t.options.useNativeScrolling||e(t.element).on("touchmove",".km-content",i)))},_model:function(){var e=this,t=e.element,i=e.options.model;"string"==typeof i&&(i=o.getter(i)(e.options.modelScope)),e.model=i,n(t),e.element.css("display",""),e.options.initWidgets&&(i?o.bind(t,i,s,o.ui,o.dataviz.ui):a.init(t.children())),e.element.css("display","none")},_id:function(){var e=this.element,t=e.attr("id")||"";this.id=b(e,"url")||"#"+t,"#"==this.id&&(this.id=o.guid(),e.attr("id",this.id))},_layout:function(){var e=k("content"),t=this.element;t.addClass("km-view"),this.header=t.children(k("header")).addClass("km-header"),this.footer=t.children(k("footer")).addClass("km-footer"),t.children(e)[0]||t.wrapInner("<div "+l("role")+'="content"></div>'),this.content=t.children(k("content")).addClass("km-content"),this.element.prepend(this.header).append(this.footer),this.layout=this.options.getLayout(this.layout),this.layout&&this.layout.setup(this)},_overlay:function(){this.overlay=e(h).appendTo(this.element)},_invokeNgController:function(){var e,t,n=this.element;this.options.$angular&&(e=n.controller(),t=n.scope(),e&&t.$apply(function(){n.injector().invoke(e.constructor,null,{$scope:t})}))}}),T=c.extend({init:function(e,t){c.fn.init.call(this,e,t),e=this.element,this.header=e.children(this._locate("header")).addClass("km-header"),this.footer=e.children(this._locate("footer")).addClass("km-footer"),this.elements=this.header.add(this.footer),n(e),this.options.$angular||o.mobile.init(this.element.children()),this.element.detach(),this.trigger(u,{layout:this})},_locate:function(e){return this.options.$angular?x(e):k(e)},options:{name:"Layout",id:null,platform:null},events:[u,f,y],setup:function(e){e.header[0]||(e.header=this.header),e.footer[0]||(e.footer=this.footer)},detach:function(e){var t=this;e.header===t.header&&t.header[0]&&e.element.prepend(t.header.detach()[0].cloneNode(!0)),e.footer===t.footer&&t.footer.length&&e.element.append(t.footer.detach()[0].cloneNode(!0))},attach:function(e){var t=this,n=t.currentView;n&&t.detach(n),e.header===t.header&&(t.header.detach(),e.element.children(k("header")).remove(),e.element.prepend(t.header)),e.footer===t.footer&&(t.footer.detach(),e.element.children(k("footer")).remove(),e.element.append(t.footer)),t.trigger(f,{layout:t,view:e}),t.currentView=e}}),D=o.Observable,A=/<body[^>]*>(([\u000a\u000d\u2028\u2029]|.)*)<\/body>/i,E="loadStart",M="loadComplete",P="showStart",I="sameViewRequested",z="viewShow",F="viewTypeDetermined",R="after",B=D.extend({init:function(t){var n,i,a,s,l=this;if(D.fn.init.call(l),e.extend(l,t),l.sandbox=e("<div />"),a=l.container,n=l._hideViews(a),l.rootView=n.first(),!l.rootView[0]&&t.rootNeeded)throw i=a[0]==o.mobile.application.element[0]?'Your kendo mobile application element does not contain any direct child elements with data-role="view" attribute set. Make sure that you instantiate the mobile application using the correct container.':'Your pane element does not contain any direct child elements with data-role="view" attribute set.',Error(i);l.layouts={},l.viewContainer=new o.ViewContainer(l.container),l.viewContainer.bind("accepted",function(e){e.view.params=l.params}),l.viewContainer.bind("complete",function(e){l.trigger(z,{view:e.view})}),l.viewContainer.bind(R,function(){l.trigger(R)}),this.getLayoutProxy=e.proxy(this,"_getLayout"),l._setupLayouts(a),s=a.children(l._locate("modalview drawer")),l.$angular?s.each(function(t,n){C(e(n),function(){})}):r(s),this.bind(this.events,t)},events:[P,R,z,E,M,I,F],destroy:function(){o.destroy(this.container);for(var e in this.layouts)this.layouts[e].destroy()},view:function(){return this.viewContainer.view},showView:function(e,t,n){if(e=e.replace(RegExp("^"+this.remoteViewURLPrefix),""),""===e&&this.remoteViewURLPrefix&&(e="/"),e===this.url)return this.trigger(I),!1;this.trigger(P);var i=this,r=function(n){return i.viewContainer.show(n,t,e)},a=i._findViewElement(e),s=o.widgetInstance(a);return i.url=e,i.params=n,s&&s.reload&&(s.purge(),a=[]),this.trigger(F,{remote:0===a.length,url:e}),a[0]?(s||(s=i._createView(a)),r(s)):(this.serverNavigation?location.href=e:i._loadView(e,r),!0)},append:function(e,t){var n,i,o,a=this.sandbox,s=(t||"").split("?")[0],c=this.container;return A.test(e)&&(e=RegExp.$1),a[0].innerHTML=e,c.append(a.children("script, style")),n=this._hideViews(a),o=n.first(),o.length||(n=o=a.wrapInner("<div data-role=view />").children()),s&&o.hide().attr(l("url"),s),this._setupLayouts(a),i=a.children(this._locate("modalview drawer")),c.append(a.children(this._locate("layout modalview drawer")).add(n)),r(i),this._createView(o)},_locate:function(e){return this.$angular?x(e):k(e)},_findViewElement:function(e){var t,n=e.split("?")[0];return n?(t=this.container.children("["+l("url")+"='"+n+"']"),t[0]||-1!==n.indexOf("/")||(t=this.container.children("#"===n.charAt(0)?n:"#"+n)),t):this.rootView},_createView:function(e){if(this.$angular){var t=this;return C(e,function(e){e.viewOptions={defaultTransition:t.transition,loader:t.loader,container:t.container,getLayout:t.getLayoutProxy}})}return o.initWidget(e,{defaultTransition:this.transition,loader:this.loader,container:this.container,getLayout:this.getLayoutProxy,modelScope:this.modelScope,reload:b(e,"reload")},s.roles)},_getLayout:function(e){return""===e?null:e?this.layouts[e]:this.layouts[this.layout]},_loadView:function(t,n){this._xhr&&this._xhr.abort(),this.trigger(E),this._xhr=e.get(o.absoluteURL(t,this.remoteViewURLPrefix),"html").always(e.proxy(this,"_xhrComplete",n,t))},_xhrComplete:function(e,t,n){var i=!0;"object"==typeof n&&(i=0===n.status&&n.responseText.length>0,n=n.responseText),this.trigger(M),i&&e(this.append(n,t))},_hideViews:function(e){return e.children(this._locate("view splitview")).hide()},_setupLayouts:function(t){var n,i=this;t.children(i._locate("layout")).each(function(){n=i.$angular?C(e(this)):o.initWidget(e(this),{},s.roles);var t=n.options.platform;t&&t!==a.application.os.name?n.destroy():i.layouts[n.options.id]=n})}});o.mobile.ViewEngine=B,s.plugin(S),s.plugin(T)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.mobile.ui,i=n.Widget,r=e.map(t.eventMap,function(e){return e}).join(" ").split(" "),o=i.extend({init:function(t,n){var r=this,o=e('<div class="km-loader"><span class="km-loading km-spin"></span><span class="km-loading-left"></span><span class="km-loading-right"></span></div>');i.fn.init.call(r,o,n),r.container=t,r.captureEvents=!1,r._attachCapture(),o.append(r.options.loading).hide().appendTo(t)},options:{name:"Loader",loading:"<h1>Loading...</h1>",timeout:100},show:function(){var e=this;clearTimeout(e._loading),e.options.loading!==!1&&(e.captureEvents=!0,e._loading=setTimeout(function(){e.element.show()},e.options.timeout))},hide:function(){this.captureEvents=!1,clearTimeout(this._loading),this.element.hide()},changeMessage:function(e){this.options.loading=e,this.element.find(">h1").html(e)},transition:function(){this.captureEvents=!0,this.container.css("pointer-events","none")},transitionDone:function(){this.captureEvents=!1,this.container.css("pointer-events","")},_attachCapture:function(){function e(e){n.captureEvents&&e.preventDefault()}var t,n=this;for(n.captureEvents=!1,t=0;r.length>t;t++)n.container[0].addEventListener(r[t],e,!0)}});n.plugin(o)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.mobile,r=n.roleSelector,o=i.ui,a=o.Widget,s=i.ViewEngine,l=o.View,c=i.ui.Loader,d="external",u="href",h="#!",p="navigate",f="viewShow",g="sameViewRequested",m=n.support.mobileOS,v=m.ios&&!m.appMode&&m.flatVersion>=700,_=/popover|actionsheet|modalview|drawer/,y="#:back",w=n.attrValue,b="button backbutton detailbutton listview-link",k="tab",x=a.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t),t=i.options,e=i.element,e.addClass("km-pane"),i.options.collapsible&&e.addClass("km-collapsible-pane"),this.history=[],this.historyCallback=function(e,t,n){var r=i.transition;return i.transition=null,v&&n&&(r="none"),i.viewEngine.showView(e,r,t)},this._historyNavigate=function(e){if(e===y){if(1===i.history.length)return;i.history.pop(),e=i.history[i.history.length-1]}else i.history.push(e);i.historyCallback(e,n.parseQueryStringParams(e))},this._historyReplace=function(e){var t=n.parseQueryStringParams(e);i.history[i.history.length-1]=e,i.historyCallback(e,t)},i.loader=new c(e,{loading:i.options.loading}),i.viewEngine=new s({container:e,transition:t.transition,modelScope:t.modelScope,rootNeeded:!t.initial,serverNavigation:t.serverNavigation,remoteViewURLPrefix:t.root||"",layout:t.layout,$angular:t.$angular,loader:i.loader,showStart:function(){i.loader.transition(),i.closeActiveDialogs()},after:function(){i.loader.transitionDone()},viewShow:function(e){i.trigger(f,e)},loadStart:function(){i.loader.show()},loadComplete:function(){i.loader.hide()},sameViewRequested:function(){i.trigger(g)},viewTypeDetermined:function(e){e.remote&&i.options.serverNavigation||i.trigger(p,{url:e.url})}}),this._setPortraitWidth(),n.onResize(function(){i._setPortraitWidth()}),i._setupAppLinks()},closeActiveDialogs:function(){var t=this.element.find(r("actionsheet popover modalview")).filter(":visible");t.each(function(){n.widgetInstance(e(this),o).close()})},navigateToInitial:function(){var e=this.options.initial;e&&this.navigate(e)},options:{name:"Pane",portraitWidth:"",transition:"",layout:"",collapsible:!1,initial:null,modelScope:window,loading:"<h1>Loading...</h1>"},events:[p,f,g],append:function(e){return this.viewEngine.append(e)},destroy:function(){a.fn.destroy.call(this),this.viewEngine.destroy(),this.userEvents.destroy()},navigate:function(e,t){e instanceof l&&(e=e.id),this.transition=t,this._historyNavigate(e)},replace:function(e,t){e instanceof l&&(e=e.id),this.transition=t,this._historyReplace(e)},bindToRouter:function(e){var t=this,i=this.history,r=this.viewEngine;e.bind("init",function(t){var o,a=t.url,s=e.pushState?a:"/";r.rootView.attr(n.attr("url"),s),o=i.length,"/"===a&&o&&(e.navigate(i[o-1],!0),t.preventDefault())}),e.bind("routeMissing",function(e){t.historyCallback(e.url,e.params,e.backButtonPressed)||e.preventDefault()}),e.bind("same",function(){t.trigger(g)}),t._historyNavigate=function(t){e.navigate(t)},t._historyReplace=function(t){e.replace(t)}},hideLoading:function(){this.loader.hide()},showLoading:function(){this.loader.show()},changeLoadingMessage:function(e){this.loader.changeMessage(e)},view:function(){return this.viewEngine.view()},_setPortraitWidth:function(){var e,t=this.options.portraitWidth;t&&(e=n.mobile.application.element.is(".km-vertical")?t:"auto",this.element.css("width",e))},_setupAppLinks:function(){var e=this;this.element.handler(this).on("down",r(k),"_mouseup").on("click",r(k+" "+b),"_appLinkClick"),this.userEvents=new n.UserEvents(this.element,{filter:r(b),tap:function(t){t.event.currentTarget=t.touch.currentTarget,e._mouseup(t.event)}})},_appLinkClick:function(t){var n=e(t.currentTarget).attr("href"),i=n&&"#"!==n[0]&&this.options.serverNavigation;i||w(e(t.currentTarget),"rel")==d||t.preventDefault()},_mouseup:function(r){if(!(r.which>1||r.isDefaultPrevented())){var a=this,s=e(r.currentTarget),l=w(s,"transition"),c=w(s,"rel")||"",p=w(s,"target"),f=s.attr(u),g=v&&0===s[0].offsetHeight,m=f&&"#"!==f[0]&&this.options.serverNavigation;g||m||c===d||t===f||f===h||(s.attr(u,h),setTimeout(function(){s.attr(u,f)}),c.match(_)?(n.widgetInstance(e(f),o).openFor(s),("actionsheet"===c||"drawer"===c)&&r.stopPropagation()):("_top"===p?a=i.application.pane:p&&(a=e("#"+p).data("kendoMobilePane")),a.navigate(f,l)),r.preventDefault())}}});x.wrap=function(e){e.is(r("view"))||(e=e.wrap("<div data-"+n.ns+'role="view" data-stretch="true"></div>').parent());var t=e.wrap('<div class="km-pane-wrapper"><div></div></div>').parent(),i=new x(t);return i.navigate(""),i},o.plugin(x)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.mobile,i=n.ui,r="hide",o="open",a="close",s='<div class="km-popup-wrapper" />',l='<div class="km-popup-arrow" />',c='<div class="km-popup-overlay" />',d="km-up km-down km-left km-right",u=i.Widget,h={down:{origin:"bottom center",position:"top center"},up:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"}},p={animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:400}}},f={horizontal:{offset:"top",size:"height"},vertical:{offset:"left",size:"width"}},g={up:"down",down:"up",left:"right",right:"left"},m=u.extend({init:function(n,i){var o,a,d=this,g=n.closest(".km-modalview-wrapper"),m=n.closest(".km-root").children(".km-pane").first(),v=g[0]?g:m;i.viewport?m=i.viewport:m[0]||(m=window),i.container?v=i.container:v[0]||(v=document.body),o={viewport:m,copyAnchorStyles:!1,autosize:!0,open:function(){d.overlay.show()},activate:e.proxy(d._activate,d),deactivate:function(){d.overlay.hide(),d._apiCall||d.trigger(r),d._apiCall=!1}},u.fn.init.call(d,n,i),n=d.element,i=d.options,n.wrap(s).addClass("km-popup").show(),a=d.options.direction.match(/left|right/)?"horizontal":"vertical",d.dimensions=f[a],d.wrapper=n.parent().css({width:i.width,height:i.height}).addClass("km-popup-wrapper km-"+i.direction).hide(),d.arrow=e(l).prependTo(d.wrapper).hide(),d.overlay=e(c).appendTo(v).hide(),o.appendTo=d.overlay,i.className&&d.overlay.addClass(i.className),d.popup=new t.ui.Popup(d.wrapper,e.extend(!0,o,p,h[i.direction]))},options:{name:"Popup",width:240,height:"",direction:"down",container:null,viewport:null},events:[r],show:function(t){this.popup.options.anchor=e(t),this.popup.open()},hide:function(){this._apiCall=!0,this.popup.close()},destroy:function(){u.fn.destroy.call(this),this.popup.destroy(),this.overlay.remove()},target:function(){return this.popup.options.anchor},_activate:function(){var t=this,n=t.options.direction,i=t.dimensions,r=i.offset,o=t.popup,a=o.options.anchor,s=e(a).offset(),l=e(o.element).offset(),c=o.flipped?g[n]:n,u=2*t.arrow[i.size](),h=t.element[i.size]()-t.arrow[i.size](),p=e(a)[i.size](),f=s[r]-l[r]+p/2;u>f&&(f=u),f>h&&(f=h),t.wrapper.removeClass(d).addClass("km-"+c),t.arrow.css(r,f).show()}}),v=u.extend({init:function(n,r){var o,s=this;s.initialOpen=!1,u.fn.init.call(s,n,r),o=e.extend({className:"km-popover-root",hide:function(){s.trigger(a)}},this.options.popup),s.popup=new m(s.element,o),s.popup.overlay.on("move",function(e){e.target==s.popup.overlay[0]&&e.preventDefault()}),s.pane=new i.Pane(s.element,e.extend(this.options.pane,{$angular:this.options.$angular})),s.pane.navigateToInitial(),t.notify(s,i)},options:{name:"PopOver",popup:{},pane:{}},events:[o,a],open:function(e){this.popup.show(e),this.initialOpen?this.pane.view()._invokeNgController():(this.pane.navigate(""),this.popup.popup._position(),this.initialOpen=!0)},openFor:function(e){this.open(e),this.trigger(o,{target:this.popup.target()})},close:function(){this.popup.hide()},destroy:function(){u.fn.destroy.call(this),this.pane.destroy(),this.popup.destroy(),t.destroy(this.element)}});i.plugin(m),i.plugin(v)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.mobile.ui,r=n.ui.Popup,o='<div class="km-shim"/>',a="hide",s=i.Widget,l=s.extend({init:function(t,i){var l=this,c=n.mobile.application,d=n.support.mobileOS,u=c?c.os.name:d?d.name:"ios",h="ios"===u||"wp"===u||(c?c.os.skin:!1),p="blackberry"===u,f=i.align||(h?"bottom center":p?"center right":"center center"),g=i.position||(h?"bottom center":p?"center right":"center center"),m=i.effect||(h?"slideIn:up":p?"slideIn:left":"fade:in"),v=e(o).handler(l).hide();s.fn.init.call(l,t,i),l.shim=v,t=l.element,i=l.options,i.className&&l.shim.addClass(i.className),i.modal||l.shim.on("up","_hide"),(c?c.element:e(document.body)).append(v),l.popup=new r(l.element,{anchor:v,modal:!0,appendTo:v,origin:f,position:g,animation:{open:{effects:m,duration:i.duration},close:{duration:i.duration}},close:function(e){var t=!1;l._apiCall||(t=l.trigger(a)),t&&e.preventDefault(),l._apiCall=!1},deactivate:function(){v.hide()},open:function(){v.show()}}),n.notify(l)},events:[a],options:{name:"Shim",modal:!1,align:t,position:t,effect:t,duration:200},show:function(){this.popup.open()},hide:function(){this._apiCall=!0,this.popup.close()},destroy:function(){s.fn.destroy.call(this),this.shim.kendoDestroy(),this.popup.destroy(),this.shim.remove()},_hide:function(t){t&&e.contains(this.shim.children().children(".k-popup")[0],t.target)||this.popup.close()}});i.plugin(l)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.support,i=t.mobile.ui,r=i.Shim,o=i.Popup,a=i.Widget,s="open",l="close",c="command",d="li>a",u="actionsheetContext",h='<div class="km-actionsheet-wrapper" />',p=t.template('<li class="km-actionsheet-cancel"><a href="\\#">#:cancel#</a></li>'),f=a.extend({init:function(s,l){var c,u,f,g=this,m=n.mobileOS;a.fn.init.call(g,s,l),l=g.options,f=l.type,s=g.element,u="auto"===f?m&&m.tablet:"tablet"===f,c=u?o:r,l.cancelTemplate&&(p=t.template(l.cancelTemplate)),s.addClass("km-actionsheet").append(p({cancel:g.options.cancel})).wrap(h).on("up",d,"_click").on("click",d,t.preventDefault),g.view().bind("destroy",function(){g.destroy()}),g.wrapper=s.parent().addClass(f?" km-actionsheet-"+f:""),g.shim=new c(g.wrapper,e.extend({modal:m.ios&&7>m.majorVersion,className:"km-actionsheet-root"},g.options.popup)),g._closeProxy=e.proxy(g,"_close"),g.shim.bind("hide",g._closeProxy),u&&t.onResize(g._closeProxy),t.notify(g,i)},events:[s,l,c],options:{name:"ActionSheet",cancel:"Cancel",type:"auto",popup:{height:"auto"}},open:function(t,n){var i=this;i.target=e(t),i.context=n,i.shim.show(t)},close:function(){this.context=this.target=null,this.shim.hide()},openFor:function(e){var t=this,n=e.data(u);t.open(e,n),t.trigger(s,{target:e,context:n})},destroy:function(){a.fn.destroy.call(this),t.unbindResize(this._closeProxy),this.shim.destroy()},_click:function(n){var i,r,o,a;n.isDefaultPrevented()||(i=e(n.currentTarget),r=i.data("action"),r&&(o={target:this.target,context:this.context},a=this.options.$angular,a?this.element.injector().get("$parse")(r)(a[0])(o):t.getter(r)(window)(o)),this.trigger(c,{target:this.target,context:this.context,currentTarget:i}),n.preventDefault(),this._close())},_close:function(e){this.trigger(l)?e.preventDefault():this.close()}});i.plugin(f)}(window.kendo.jQuery),function(e,t){function n(e){return Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function i(e){var t,n=" ";if(e){if(typeof e===cn)return e;for(t in e)n+=t+'="'+e[t]+'"'}return n}function r(t,n){e("th, th .k-grid-filter, th .k-link",t).add(document.body).css("cursor",n)}function o(e){var t,n,i={},r={};if(!At(e))for(xt(e)||(e=[e]),t=0,n=e.length;n>t;t++)i[e[t].aggregate]=0,r[e[t].field]=i;return r}function a(t,n,i,r,o){var a,s=n;for(n=e(),o=o||1,a=0;o>a;a++)n=n.add(t.eq(s+a));"number"==typeof i?n[r?"insertBefore":"insertAfter"](t.eq(i)):n.appendTo(i)}function s(t,n,i){return e(t).add(n).find(i)}function l(e,t,n){var i,r,o,a;for(n=xt(n)?n:[n],i=0,r=n.length;r>i;i++)o=n[i],yt(o)&&o.click&&(a=o.name||o.text,t.on(on+Ot,"a.k-grid-"+(a||"").replace(/\s/g,""),{commandName:a},Tt(o.click,e)))}function c(e,t,n){return bt(e,function(e){e=typeof e===cn?{field:e}:e;var i;return(!p(e)||n)&&(e.attributes=U(e.attributes),e.footerAttributes=U(e.footerAttributes),e.headerAttributes=U(e.headerAttributes),i=!0),e.columns&&(e.columns=c(e.columns,t,i)),wt({encoded:t,hidden:i},e)})}function d(e,t){var n=[];return u(e,t,n),n[n.length-1]}function u(e,t,n){var i,r;for(n=n||[],i=0;t.length>i;i++){if(e===t[i])return!0;if(t[i].columns){if(r=n.length,n.push(t[i]),u(e,t[i].columns,n))return!0;n.splice(r,n.length-r)}}return!1}function h(e,t){var n=t?W:U;e.hidden=!t,e.attributes=n(e.attributes),e.footerAttributes=n(e.footerAttributes),e.headerAttributes=n(e.headerAttributes)}function p(e){return f([e]).length>0}function f(e){return kt(e,function(e){var t=!e.hidden;return t&&e.columns&&(t=f(e.columns).length>0),t})}function g(t){return e(t).map(function(){return this.toArray()})}function m(e,t,n){var i=y(I(t)),r=y(z(t)),o=e.rowSpan;e.rowSpan=n?i>r?o-(i-r)||1:o+(r-i):i>r?o+(i-r):o-(r-i)||1}function v(t,n,i,r,o,a,s){var l,c,d=y(t),u=y([n]);d>u&&(l=Array(s+1).join('<th class="k-group-cell k-header">&nbsp;</th>'),c=a.children(":not(.k-filter-row)"),e(Array(d-u+1).join("<tr>"+l+"</tr>")).insertAfter(c.last())),E(a,d-u),w(i,r,o,a)}function _(e,t,n){var i,r,o,a,s;for(n=n||0,o=t,t=L(t),a=0,s=t.length;s>a;a++)i=b(t[a],o),r=e.find(">tr:not(.k-filter-row)").eq(i.row).find(".k-header:not(.k-group-cell,.k-hierarchy-cell)").eq(i.cell),r.attr(ut.attr("index"),n+a);return t.length}function y(e){var t,n,i=1,r=0;for(t=0;e.length>t;t++)e[t].columns&&(n=y(e[t].columns),n>r&&(r=n));return i+r}function w(t,n,i,r){var o,a,s=x(t[0],n),l=i.find(">tr:not(.k-filter-row):eq("+s.row+")>th.k-header"),c=e(),d=s.cell;for(o=0;t.length>o;o++)c=c.add(l.eq(d+o));for(r.find(">tr:not(.k-filter-row)").eq(s.row).append(c),a=[],o=0;t.length>o;o++)t[o].columns&&(a=a.concat(t[o].columns));a.length&&w(a,n,i,r)}function b(e,t,n,i){var r,o;for(n=n||0,i=i||{},i[n]=i[n]||0,o=0;t.length>o;o++){if(t[o]==e){r={cell:i[n],row:n};break}if(t[o].columns&&(r=b(e,t[o].columns,n+1,i)))break;i[n]++}return r}function k(e,t,n,i){var r,o,a;return t.columns?(t=t.columns,t[i?0:t.length-1]):(r=d(t,e),o=r?r.columns:e,a=Ct(t,o),0===a&&i?a++:a!=o.length-1||i?(a>0||0===a&&!i)&&(a+=i?-1:1):a--,t=o[Math.max(a,0)],t&&t!=n&&t.columns?k(e,t,n,i):null)}function x(e,t,n,i){var r,o;for(n=n||0,i=i||{},i[n]=i[n]||0,o=0;t.length>o;o++){if(t[o]==e){r={cell:i[n],row:n};break}if(t[o].columns&&(r=x(e,t[o].columns,n+1,i)))break;t[o].hidden||i[n]++}return r}function C(e){var t=S(I(e));return t.concat(S(z(e)))}function S(e){var t,n=[],i=[];for(t=0;e.length>t;t++)n.push(e[t]),e[t].columns&&(i=i.concat(e[t].columns));return i.length&&(n=n.concat(S(i))),n}function T(e){var t,n,i=0;for(n=0;e.length>n;n++)t=e[n],t.columns?i+=T(t.columns):t.hidden&&i++;return i}function D(e){var t,n,i,r=0;for(n=0,i=e.length;i>n;n++)t=e[n].style.width,t&&-1==t.indexOf("%")&&(r+=parseInt(t,10));return r}function A(e,t){var n,i,r=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(i=0;r.length>i;i++)n=r[i].rowSpan,n>1&&(r[i].rowSpan=n-t||1)}function E(e,t){var n,i=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(n=0;i.length>n;n++)i[n].rowSpan+=t}function M(t){var n,i=t.find("tr:not(.k-filter-row)"),r=i.filter(function(){return!e(this).children().length}).remove().length,o=i.find("th:not(.k-group-cell,.k-hierarchy-cell)");for(n=0;o.length>n;n++)o[n].rowSpan>1&&(o[n].rowSpan-=r);return i.length-r}function P(e,t,n,i,r){var o,a,s,l=[];for(o=0,s=e.length;s>o;o++)a=n[i]||[],a.push(t.eq(r+o)),n[i]=a,e[o].columns&&(l=l.concat(e[o].columns));l.length&&P(l,t,n,i+1,r+e.length)}function I(e){return kt(e,function(e){return e.locked})}function z(e){return kt(e,function(e){return!e.locked})}function F(e){return kt(e,function(e){return!e.locked&&p(e)})}function R(e){return kt(e,function(e){return e.locked&&p(e)})}function B(e){var t,n=[];for(t=0;e.length>t;t++)e[t].hidden||(e[t].columns?n=n.concat(B(e[t].columns)):n.push(e[t]));return n}function L(e){var t,n=[];for(t=0;e.length>t;t++)e[t].columns?n=n.concat(L(e[t].columns)):n.push(e[t]);return n}function O(t){var n,i=t.find(">tr:not(.k-filter-row)"),r=e();return i.length>1&&(r=i.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.rowSpan>1})),r=r.add(i.last().find("th:not(.k-group-cell,.k-hierarchy-cell)")),n=ut.attr("index"),r.sort(function(t,i){return t=parseInt(e(t).attr(n),10),i=parseInt(e(i).attr(n),10),t>i?1:i>t?-1:0}),r}function H(t){var n,i,r,o,a,s,l,c=t.closest("table"),d=e().add(t),u=t.closest("tr"),h=c.find("tr:not(.k-filter-row)"),p=h.index(u);if(p>0){for(n=h.eq(p-1),i=n.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return!e(this).attr("rowspan")}),r=0,o=u.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),a=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1}),s=0;a.length>s;s++)r+=a[s].colSpan||1;for(o+=Math.max(r-1,0),r=0,s=0;i.length>s;s++)if(l=i.eq(s),r+=l.attr("colSpan")?l[0].colSpan:1,o>=s&&r>o){d=H(l).add(d);
break}}return d}function N(t){var n,i,r,o,a,s,l,c,d=t.closest("table"),u=e().add(t),h=t.closest("tr"),p=d.find("tr:not(.k-filter-row)"),f=p.index(h)+t[0].rowSpan,g=ut.attr("colspan");if(p.length-1>=f){for(n=h.next(),i=h.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),r=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)"),r=r.filter(function(){return!this.rowSpan||1===this.rowSpan}),a=0,o=0;r.length>o;o++)a+=parseInt(r.eq(o).attr(g),10)||1;for(s=n.find("th:not(.k-group-cell,.k-hierarchy-cell)"),l=parseInt(t.attr(g),10)||1,o=0;l>o;)n=s.eq(o+a),u=u.add(N(n)),c=parseInt(n.attr(g),10),c>1&&(l-=c-1),o++}return u}function V(t,n,i){var r,o=t;return gt?t[0].innerHTML=i:(r=document.createElement("div"),r.innerHTML="<table><tbody>"+i+"</tbody></table>",t=r.firstChild.firstChild,n[0].replaceChild(t,o[0]),t=e(t)),t}function U(e){e=e||{};var t=e.style;return t?(t=t.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none"),t===e.style&&(t=t.replace(/(.*)?/i,"display:none;$1"))):t="display:none",wt({},e,{style:t})}function W(e){e=e||{};var t=e.style;return t&&(e.style=t.replace(/(display\s*:\s*none\s*;?)*/gi,"")),e}function j(t,n,i,r){var o,a=t.find(">colgroup"),s=bt(n,function(e){return o=e.width,o&&0!==parseInt(o,10)?ut.format('<col style="width:{0}"/>',typeof o===cn?o:o+"px"):"<col />"});(i||a.find(".k-hierarchy-col").length)&&s.splice(0,0,'<col class="k-hierarchy-col" />'),a.length&&a.remove(),a=e(Array(r+1).join('<col class="k-group-col">')+s.join("")),a.is("colgroup")||(a=e("<colgroup/>").append(a)),t.prepend(a),wn.msie&&8==wn.version&&(t.css("display","inline-table"),window.setTimeout(function(){t.css("display","")},1))}function G(e,t){var n,i,r=0;for(n=0,i=t.length;i>n;n++)t[n].locked&&(e.eq(n).insertBefore(e.eq(r)),r++)}function q(e){var t,n,i,r={};for(n=0,i=e.length;i>n;n++)t=e[n],r[t.value]=t.text;return r}function $(e,t,n){var i=n&&n.length&&yt(n[0])&&"value"in n[0],r=i?q(n)[e]:e;return r=null!=r?r:"",t?ut.format(t,r):r}function Y(e,t,n){for(var i,r=0,o=e[r];o;){if(i=n?!0:"none"!==o.style.display,i&&!mn.test(o.className)&&--t<0){o.style.display=n?"":"none";break}o=e[++r]}}function K(t,n){for(var i,r,o=0,a=t.length;a>o;o+=1)r=t.eq(o),r.is(".k-grouping-row,.k-detail-row")?(i=r.children(":not(.k-group-cell):first,.k-detail-cell").last(),i.attr("colspan",parseInt(i.attr("colspan"),10)-1)):(r.hasClass("k-grid-edit-row")&&(i=r.children(".k-edit-container")[0])&&(i=e(i),i.attr("colspan",parseInt(i.attr("colspan"),10)-1),i.find("col").eq(n).remove(),r=i.find("tr:first")),Y(r[0].cells,n,!1))}function Q(t,n){for(var i,r,o,a=0,s=t.length;s>a;a+=1)r=t.eq(a),r.is(".k-grouping-row,.k-detail-row")?(i=r.children(":not(.k-group-cell):first,.k-detail-cell").last(),i.attr("colspan",parseInt(i.attr("colspan"),10)+1)):(r.hasClass("k-grid-edit-row")&&(i=r.children(".k-edit-container")[0])&&(i=e(i),i.attr("colspan",parseInt(i.attr("colspan"),10)+1),j(i.find(">form>table"),f(o),!1,0),r=i.find("tr:first")),Y(r[0].cells,n,!0))}function X(e,t,n){n=n||1;var i,r,o;for(r=0,o=e.length;o>r;r++)i=e.eq(r).children().last(),i.attr("colspan",parseInt(i.attr("colspan"),10)+n),i=t.eq(r).children().last(),i.attr("colspan",parseInt(i.attr("colspan"),10)-n)}function J(e){var t,n,i=0,r=e.find(">colgroup>col");for(t=0,n=r.length;n>t;t+=1)i+=parseInt(r[t].style.width,10);return i}function Z(e,t){var n,i,r,o;e=e[0],t=t[0],e.rows.length!==t.rows.length&&(n=e.offsetHeight,i=t.offsetHeight,n>i?(r=t.rows[t.rows.length-1],vn.test(r.className)&&(r=t.rows[t.rows.length-2]),o=n-i):(r=e.rows[e.rows.length-1],vn.test(r.className)&&(r=e.rows[e.rows.length-2]),o=i-n),r.style.height=r.offsetHeight+o+"px")}function et(e,t){var n,i=e.offsetHeight,r=t.offsetHeight;i>r?n=i+"px":r>i&&(n=r+"px"),n&&(e.style.height=t.style.height=n)}function tt(e,t){var n,i,r;if(typeof e===cn&&e===t)return e;if(yt(e)&&e.name===t)return e;if(xt(e))for(n=0,i=e.length;i>n;n++)if(r=e[n],typeof r===cn&&r===t||r.name===t)return r;return null}function nt(t,n){var i,r,o,a=wn.msie;if(n===!0){if(t=e(t),i=!0,i&&(r=t.parent().scrollTop(),o=t.parent().scrollLeft()),a)try{t[0].setActive()}catch(s){t[0].focus()}else t[0].focus();i&&(t.parent().scrollTop(r),t.parent().scrollLeft(o))}else e(t).one("focusin",function(e){e.preventDefault()}).focus()}function it(t){var n=e(t.currentTarget),i=n.is("th"),r=this.table.add(this.lockedTable),o=this.thead.parent().add(e(">table",this.lockedHeader)),a=e(t.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap"),s=n.closest("table")[0];ut.support.touch||a&&n.find(ut.roleSelector("filtercell")).length||(s===r[0]||s===r[1]||s===o[0]||s===o[1])&&(e(t.target).is("a.k-i-collapse, a.k-i-expand")||(this.current(n),(i||!a)&&setTimeout(function(){kn&&e(ut._activeElement()).hasClass("k-widget")||nt(s,!0)}),i&&t.preventDefault()))}function rt(t,n,i,r){if(t=e(t),r){var o=n;n=i,i=o}return n.not(t).length!=n.length?t:n.eq(t[0]==i[0]?0:1)}function ot(e,n,i,r,o){var a,s,l,c=o?"prevAll":"nextAll";if(e){if(a=e.parent()[c](Ft).first(),!a[0]&&(o||e.is("th"))||!o&&e[0].rowSpan>1){if(n=rt(n,i,r,o),nt(n),o&&!e.is(".k-header"))return O(n.find("thead:first")).eq(e.index());a=n.find((o?">thead>":">tbody>")+Ft).first()}!o&&e[0].colSpan>1&&e.is(".k-header")?e=N(e).eq(1):e.is(".k-header")&&o?(l=H(e),e=l.eq(l.length-2)):(s=e.attr(ut.attr("index")),(s===t||o)&&(s=e.index()),e=a.children().eq(s)),e[0]&&e.is(Rt)||(e=a.children(Rt).first())}else e=i.find(Bt);return e}function at(e,t,n,i,r){var o=n.length>1;return e?e.prevAll(":visible")[0]?e=e.prevAll(It).first():o&&(t==n[1]?(nt(n[0]),e=r(e.parent()).children(It).last()):t==i[1]&&(nt(i[0]),e=i.eq(0).find("tr>"+It).last())):e=n.find(Bt),e}function st(e,t,n,i,r){var o=n.length>1;return e?e.nextAll(":visible")[0]?e=e.nextAll(It).first():o&&(t==n[0]?(nt(n[1]),e=r(e.parent()).children(It).first()):t==i[0]&&(nt(i[1]),e=i.eq(1).find("tr>"+It).first())):e=n.find(Bt),e}function lt(e,t,n,i,r){var o=2==n.length,a=!0,s=r?e.prevAll(It+":first"):e.nextAll(":visible:first");return s.length||(s=e.parent(),o&&(a=r&&t==n[0]||!r&&t==n[1],s=i(s)),a&&(s=s[r?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")),s=s.children(It+(r?":last":":first"))),s}function ct(e,t,i){return'<tr class="k-grouping-row">'+n(t)+'<td colspan="'+e+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1"></a>'+i+"</p></td></tr>"}function dt(e){return'<tr class="k-grouping-row"><td colspan="'+e+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>'}var ut=window.kendo,ht=ut.ui,pt=ut.data.DataSource,ft=ht.Groupable,gt=ut.support.tbodyInnerHtml,mt=ut._activeElement,vt=ht.Widget,_t=ut.keys,yt=e.isPlainObject,wt=e.extend,bt=e.map,kt=e.grep,xt=e.isArray,Ct=e.inArray,St=Array.prototype.push,Tt=e.proxy,Dt=ut.isFunction,At=e.isEmptyObject,Et=Math,Mt="progress",Pt="error",It=":not(.k-group-cell):not(.k-hierarchy-cell):visible",zt="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",Ft="tr:not(.k-footer-template):visible",Rt=":not(.k-group-cell):not(.k-hierarchy-cell):visible",Bt=Ft+":first>"+Rt+":first",Lt="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",Ot=".kendoGrid",Ht="edit",Nt="save",Vt="remove",Ut="detailInit",Wt="filterMenuInit",jt="columnMenuInit",Gt="change",qt="columnHide",$t="columnShow",Yt="saveChanges",Kt="dataBound",Qt="detailExpand",Xt="detailCollapse",Jt="k-state-focused",Zt="k-state-selected",en="columnResize",tn="columnReorder",nn="columnLock",rn="columnUnlock",on="click",an="height",sn="tabIndex",ln="function",cn="string",dn="Are you sure you want to delete this record?",un="Delete",hn="Cancel",pn=/(\}|\#)/gi,fn=/#/gi,gn="[\\x20\\t\\r\\n\\f]",mn=RegExp("(^|"+gn+")(k-group-cell|k-hierarchy-cell)("+gn+"|$)"),vn=RegExp("(^|"+gn+")(k-filter-row)("+gn+"|$)"),_n='<a class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',yn=!1,wn=ut.support.browser,bn=wn.msie&&7==wn.version,kn=wn.msie&&8==wn.version,xn=vt.extend({init:function(e,t){var n=this;vt.fn.init.call(n,e,t),n._refreshHandler=Tt(n.refresh,n),n.setDataSource(t.dataSource),n.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(Gt,t._refreshHandler),t.dataSource=e,t.dataSource.bind(Gt,t._refreshHandler)},options:{name:"VirtualScrollable",itemHeight:e.noop},destroy:function(){var e=this;vt.fn.destroy.call(e),e.dataSource.unbind(Gt,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(Ot),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,n=this,i=ut.support.scrollbar()+1,r=n.element;r.css({width:"auto",overflow:"hidden"}).css(yn?"padding-left":"padding-right",i),n.content=r.children().first(),t=n.wrapper=n.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+Ot+" mousewheel"+Ot,Tt(n._wheelScroll,n)),ut.support.kineticScrollNeeded&&(n.drag=new ut.UserEvents(n.wrapper,{global:!0,start:function(e){e.sender.capture()},move:function(e){n.verticalScrollbar.scrollTop(n.verticalScrollbar.scrollTop()-e.y.delta),t.scrollLeft(t.scrollLeft()-e.x.delta),e.preventDefault()}})),n.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:i}).appendTo(r).bind("scroll"+Ot,Tt(n._scroll,n))},_wheelScroll:function(t){if(!t.ctrlKey){var n=this.verticalScrollbar.scrollTop(),i=ut.wheelDeltaY(t);i&&(t.preventDefault(),e(t.currentTarget).one("wheel"+Ot,!1),this.verticalScrollbar.scrollTop(n+-i))}},_scroll:function(e){var t=this,n=e.currentTarget.scrollTop,i=t.dataSource,r=t.itemHeight,o=i.skip()||0,a=t._rangeStart||o,s=t.element.innerHeight(),l=!!(t._scrollbarTop&&t._scrollbarTop>n),c=Et.max(Et.floor(n/r),0),d=Et.max(c+Et.floor(s/r),0);t._scrollTop=n-a*r,t._scrollbarTop=n,t._fetch(c,d,l)||(t.wrapper[0].scrollTop=t._scrollTop)},_fetch:function(e,t,n){var i=this,r=i.dataSource,o=i.itemHeight,a=r.take(),s=i._rangeStart||r.skip()||0,l=Et.floor(e/a)*a,c=!1,d=.33;return s>e?(c=!0,s=Et.max(0,t-a),i._scrollTop=(e-s)*o,i._page(s,a)):t>=s+a&&!n?(c=!0,s=e,i._scrollTop=o,i._page(s,a)):i._fetching||(l+a-a*d>e&&e>a&&r.prefetch(l-a,a),t>l+a*d&&r.prefetch(l+a,a)),c},_page:function(e,t){var n=this,i=n.dataSource;clearTimeout(n._timeout),n._fetching=!0,n._rangeStart=e,i.inRange(e,t)?i.range(e,t):(ut.ui.progress(n.wrapper.parent(),!0),n._timeout=setTimeout(function(){i.range(e,t)},100))},refresh:function(){var e,t,n,i,r=this,o="",a=25e4,s=r.dataSource,l=r._rangeStart,c=ut.support.kineticScrollNeeded?0:ut.support.scrollbar(),d=r.wrapper[0];for(ut.ui.progress(r.wrapper.parent(),!1),clearTimeout(r._timeout),n=r.itemHeight=r.options.itemHeight()||0,i=d.scrollWidth>d.offsetWidth?c:0,e=s.total()*n+i,t=0;t<Et.floor(e/a);t++)o+='<div style="width:1px;height:'+a+'px"></div>';e%a&&(o+='<div style="width:1px;height:'+e%a+'px"></div>'),r.verticalScrollbar.html(o),d.scrollTop=r._scrollTop,r.drag&&r.drag.cancel(),l&&!r._fetching&&(r._rangeStart=s.skip(),1===s.page()&&(r.verticalScrollbar[0].scrollTop=0)),r._fetching=!1}}),Cn={create:{text:"Add new record",imageClass:"k-add",className:"k-grid-add",iconClass:"k-icon"},cancel:{text:"Cancel changes",imageClass:"k-cancel",className:"k-grid-cancel-changes",iconClass:"k-icon"},save:{text:"Save changes",imageClass:"k-update",className:"k-grid-save-changes",iconClass:"k-icon"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-grid-delete",iconClass:"k-icon"},edit:{text:"Edit",imageClass:"k-edit",className:"k-grid-edit",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-update",className:"k-primary k-grid-update",iconClass:"k-icon"},canceledit:{text:"Cancel",imageClass:"k-cancel",className:"k-grid-cancel",iconClass:"k-icon"},excel:{text:"Export to Excel",imageClass:"k-i-excel",className:"k-grid-excel",iconClass:"k-icon"},pdf:{text:"Export to PDF",imageClass:"k-i-pdf",className:"k-grid-pdf",iconClass:"k-icon"}},Sn=ut.ui.DataBoundWidget.extend({init:function(t,n,i){var r=this;n=xt(n)?{dataSource:n}:n,vt.fn.init.call(r,t,n),i&&(r._events=i),yn=ut.support.isRtl(t),r._element(),r._aria(),r._columns(r.options.columns),r._dataSource(),r._tbody(),r._pageable(),r._thead(),r._groupable(),r._toolbar(),r._setContentHeight(),r._templates(),r._navigatable(),r._selectable(),r._details(),r._editable(),r._attachCustomCommandsEvent(),r.options.autoBind?r.dataSource.fetch():r._footer(),r.lockedContent&&(r.wrapper.addClass("k-grid-lockedcolumns"),r._resizeHandler=function(){r.resize()},e(window).on("resize"+Ot,r._resizeHandler)),ut.notify(r)},events:[Gt,"dataBinding","cancel","pdfExport",Kt,Qt,Xt,Ut,Wt,jt,Ht,Nt,Vt,Yt,en,tn,$t,qt,nn,rn],setDataSource:function(e){var t=this,n=t.options.scrollable;t.options.dataSource=e,t._dataSource(),t._pageable(),t._thead(),n&&(n.virtual?t.content.find(">.k-virtual-scrollable-wrap").scrollLeft(0):t.content.scrollLeft(0)),t.options.groupable&&t._groupable(),t.virtualScrollable&&t.virtualScrollable.setDataSource(t.options.dataSource),t.options.navigatable&&t._navigatable(),t.options.selectable&&t._selectable(),t.options.autoBind&&e.fetch()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,navigatable:!1,pageable:!1,editable:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:hn,confirmation:dn,confirmDelete:un},commands:{create:Cn.create.text,cancel:Cn.cancel.text,save:Cn.save.text,destroy:Cn.destroy.text,edit:Cn.edit.text,update:Cn.update.text,canceledit:Cn.canceledit.text,excel:Cn.excel.text,pdf:Cn.pdf.text}}},destroy:function(){var t,n=this;vt.fn.destroy.call(n),n._resizeHandler&&e(window).off("resize"+Ot,n._resizeHandler),n.pager&&n.pager.element&&n.pager.destroy(),n.pager=null,n.groupable&&n.groupable.element&&n.groupable.element.kendoGroupable("destroy"),n.groupable=null,n.options.reorderable&&n.wrapper.data("kendoReorderable").destroy(),n.selectable&&n.selectable.element&&n.selectable.destroy(),n.selectable=null,n.resizable&&(n.resizable.destroy(),n._resizeUserEvents&&(n._resizeHandleDocumentClickHandler&&e(document).off("click",n._resizeHandleDocumentClickHandler),n._resizeUserEvents.destroy(),n._resizeUserEvents=null),n.resizable=null),n.virtualScrollable&&n.virtualScrollable.element&&n.virtualScrollable.destroy(),n.virtualScrollable=null,n._destroyColumnAttachments(),n._destroyEditable(),n.dataSource&&(n.dataSource.unbind(Gt,n._refreshHandler).unbind(Mt,n._progressHandler).unbind(Pt,n._errorHandler),n._refreshHandler=n._progressHandler=n._errorHandler=null),t=n.element.add(n.wrapper).add(n.table).add(n.thead).add(n.wrapper.find(">.k-grid-toolbar")),n.content&&(t=t.add(n.content).add(n.content.find(">.k-virtual-scrollable-wrap"))),n.lockedHeader&&n._removeLockedContainers(),n.pane&&n.pane.destroy(),n._draggableInstance&&n._draggableInstance.element&&n._draggableInstance.destroy(),n._draggableInstance=null,t.off(Ot),ut.destroy(n.wrapper),n.scrollables=n.thead=n.tbody=n.element=n.table=n.content=n.footer=n.wrapper=n._groupableClickHandler=n._setContentWidthHandler=null},getOptions:function(){var n,i=wt(!0,{},this.options);return i.columns=ut.deepExtend([],this.columns),n=this.dataSource,i.dataSource=e.extend(!0,{},n.options),i.dataSource.page=n.page(),i.dataSource.filter=n.filter(),i.dataSource.pageSize=n.pageSize(),i.dataSource.sort=n.sort(),i.dataSource.group=n.group(),i.dataSource.aggregate=n.aggregate(),i.$angular=t,i},setOptions:function(e){var t,n,i,r=this.getOptions();ut.deepExtend(r,e),t=this.wrapper,n=this._events,i=this.element,this.destroy(),this.options=null,t[0]!==i[0]&&(t.before(i),t.remove()),i.empty(),this.init(i,r,n),this._setEvents(r)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t){return t.children().filter(function(){var t=e(this);return!t.hasClass("k-grouping-row")&&!t.hasClass("k-detail-row")&&!t.hasClass("k-group-footer")})},dataItems:function(){var e,t,n,i=ut.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(e=i.length,t=Array(2*e),n=e;--n>=0;)t[n]=t[n+e]=i[n];i=t}return i},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&(this.angular("cleanup",function(){return{elements:t.thead.get()}}),t.thead.find("th").each(function(){var t=e(this),n=t.data("kendoFilterMenu"),i=t.data("kendoColumnSorter"),r=t.data("kendoColumnMenu");n&&n.destroy(),i&&i.destroy(),r&&r.destroy()}))},_attachCustomCommandsEvent:function(){var e,t,n,i=this,r=L(i.columns||[]);for(t=0,n=r.length;n>t;t++)e=r[t].command,e&&l(i,i.wrapper,e)},_aria:function(){var e=this.element.attr("id")||"aria";e&&(this._cellId=e+"_active_cell")},_element:function(){var t=this,n=t.element;n.is("table")||(n=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table"),n.length||(n=e("<table />").appendTo(t.element))),bn&&n.attr("cellspacing",0),t.table=n.attr("role",t._hasDetails()?"treegrid":"grid"),t._wrapper()},_createResizeHandle:function(t,n){var i,r,o,a,s,l,c,d=this,u=d.options.columnResizeHandleWidth,h=d.options.scrollable,p=d.resizeHandle,f=this._groups();if(p&&d.lockedContent&&p.data("th")[0]!==n[0]&&(p.remove(),p=null),p||(p=d.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(p)),yn)i=n.position().left,h&&(a=n.closest(".k-grid-header-wrap, .k-grid-header-locked"),s=wn.msie?a.scrollLeft():0,l=wn.webkit?a[0].scrollWidth-a[0].offsetWidth-a.scrollLeft():0,c=wn.mozilla?a[0].scrollWidth-a[0].offsetWidth-(a[0].scrollWidth-a[0].offsetWidth-a.scrollLeft()):0,i-=l-c+s);else{for(i=n[0].offsetWidth,r=O(n.closest("thead")),o=0;r.length>o&&r[o]!=n[0];o++)i+=r[o].offsetWidth;f>0&&(i+=t.find(".k-group-cell:first").outerWidth()*f)}p.css({top:n.position().top,left:i-u,height:n.outerHeight(),width:3*u}).data("th",n).show()},_positionColumnResizeHandle:function(){var t=this,n=t.options.columnResizeHandleWidth,i=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t.thead.add(i).on("mousemove"+Ot,"th",function(i){var o,a,s,l=e(this);l.hasClass("k-group-cell")||l.hasClass("k-hierarchy-cell")||(o=i.clientX,a=e(window).scrollLeft(),s=l.offset().left+(yn?0:this.offsetWidth),o+a>s-n&&s+n>o+a?t._createResizeHandle(l.closest("div"),l):t.resizeHandle?t.resizeHandle.hide():r(t.wrapper,""))})},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._hideResizeHandle())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,n=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t._resizeUserEvents=new ut.UserEvents(n.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,hold:function(n){var i=e(n.target);n.preventDefault(),i.addClass("k-column-active"),t._createResizeHandle(i.closest("div"),i),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=Tt(t._resizeHandleDocumentClick,t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},_resizable:function(){var t,n,i,o,a,s,l,c=this,d=c.options,u=this._isMobile,h=ut.support.mobileOS?0:ut.support.scrollbar();d.resizable&&(t=d.scrollable?c.wrapper.find(".k-grid-header-wrap:first"):c.wrapper,u?c._positionColumnResizeHandleTouch(t):c._positionColumnResizeHandle(t),c.resizable&&c.resizable.destroy(),c.resizable=new ht.Resizable(t.add(c.lockedHeader),{handle:".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:t.data("th").outerHeight()+c.tbody.attr("clientHeight")})},start:function(t){var h,p,f,g;l=e(t.currentTarget).data("th"),u&&c._hideResizeHandle(),h=l.closest("table"),p=e.inArray(l[0],O(l.closest("thead")).filter(":visible")),a=h.parent().hasClass("k-grid-header-locked"),f=a?c.lockedTable:c.table,g=c.footer||e(),c.footer&&c.lockedContent&&(g=c.footer.children(a?".k-grid-footer-locked":".k-grid-footer-wrap")),r(c.wrapper,"col-resize"),s=d.scrollable?h.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")").add(f.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")")).add(g.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")")):f.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")"),n=t.x.location,i=l.outerWidth(),o=a?f.children("tbody").outerWidth():c.tbody.outerWidth()},resize:function(t){var r,u,p,f,g,m,v=yn?-1:1,_=i+t.x.location*v-n*v;d.scrollable?(a&&c.lockedFooter?r=c.lockedFooter.children("table"):c.footer&&(r=c.footer.find(">.k-grid-footer-wrap>table")),r&&r[0]||(r=e()),u=l.closest("table"),p=a?c.lockedTable:c.table,f=!1,g=c.wrapper.width()-h,m=_,a&&o-i+m>g&&(m=i+(g-o-2*h),0>m&&(m=_),f=!0),m>10&&(s.css("width",m),o&&(m=f?g-2*h:o+t.x.location*v-n*v,p.add(u).add(r).css("width",m),a||(c._footerWidth=m)))):_>10&&s.css("width",_)},resizeend:function(){var e,t,n,o=l.outerWidth();r(c.wrapper,""),i!=o&&(t=c.lockedHeader?c.lockedHeader.find("thead:first tr:first").add(c.thead.find("tr:first")):l.parent(),n=l.attr(ut.attr("index")),n||(n=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(l)),e=L(c.columns)[n],e.width=o,c.trigger(en,{column:e,oldWidth:i,newWidth:o}),c._applyLockedContainersWidth(),c._syncLockedContentHeight(),c._syncLockedHeaderHeight()),c._hideResizeHandle(),l=null}}))},_draggable:function(){var t=this;t.options.reorderable&&(t._draggableInstance&&t._draggableInstance.destroy(),t._draggableInstance=t.wrapper.kendoDraggable({group:ut.guid(),filter:t.content?".k-grid-header:first "+Lt:"table:first>.k-grid-header "+Lt,drag:function(){t._hideResizeHandle()},hint:function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(ut.attr("title"))||t.attr(ut.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-denied" />')}}).data("kendoDraggable"))},_reorderable:function(){var t,n=this;n.options.reorderable&&(n.wrapper.data("kendoReorderable")&&n.wrapper.data("kendoReorderable").destroy(),t=function(e,t,i){var r=e[t],o=e[i],a=d(r,n.columns);return e=a?a.columns:n.columns,Ct(o,e)},n.wrapper.kendoReorderable({draggable:n._draggableInstance,dragOverContainers:function(e,i){var r=C(n.columns);return r[e].lockable!==!1&&t(r,e,i)>-1},inSameContainer:function(i){return e(i.source).parent()[0]===e(i.target).parent()[0]&&t(C(n.columns),i.sourceIndex,i.targetIndex)>-1},change:function(e){var i=C(n.columns),r=i[e.oldIndex],o=t(i,e.oldIndex,e.newIndex);n.trigger(tn,{newIndex:o,oldIndex:Ct(r,i),column:r}),n.reorderColumn(o,r,"before"===e.position)}}))},_reorderHeader:function(e,t,n){var i,r,o,l,c=this,d=x(e[0],c.columns),u=x(t,c.columns),h=[];for(i=0;e.length>i;i++)e[i].columns&&(h=h.concat(e[i].columns));r=s(c.lockedHeader,c.thead,"tr:eq("+d.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"),o=I(e).length,l=I([t]).length,h.length?(o>0&&0===l?v(e,t,h,c.columns,c.lockedHeader.find("thead"),c.thead,this._groups()):0===o&&l>0&&v(e,t,h,c.columns,c.thead,c.lockedHeader.find("thead"),this._groups()),t=k(c.columns,t,e[0],n),t&&c._reorderHeader(h,t,n)):o!==l&&m(r[d.cell],c.columns,o),a(r,d.cell,u.cell,n,e.length)},_reorderContent:function(t,n,i){var r,o,l,c,d=this,u=e(),h=t[0],p=Ct(h,L(d.columns)),f=Ct(n,L(d.columns)),g=Ct(h,B(d.columns)),m=Ct(n,B(d.columns)),v=I(d.columns).length,_=!!n.locked,y=d.footer||d.wrapper.find(".k-grid-footer"),w=r=m;for(n.hidden&&(_?(m=d.lockedTable.find("colgroup"),w=d.lockedHeader.find("colgroup"),r=e(d.lockedFooter).find(">table>colgroup")):(m=d.tbody.prev(),w=d.thead.prev(),r=y.find(".k-grid-footer-wrap").find(">table>colgroup"))),d._hasFilterRow()&&a(d.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),p,f,i,t.length),a(s(d.lockedHeader,d.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),g,w,i,t.length),d.options.scrollable&&a(s(d.lockedTable,d.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),g,m,i,t.length),y&&y.length&&(a(s(d.lockedFooter,y.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),g,r,i,t.length),a(y.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),p,f,i,t.length)),o=d.tbody.children(":not(.k-grouping-row,.k-detail-row)"),d.lockedTable&&(v>f?p>=v&&X(d.lockedTable.find(">tbody>tr.k-grouping-row"),d.table.find(">tbody>tr.k-grouping-row"),t.length):v>p&&X(d.table.find(">tbody>tr.k-grouping-row"),d.lockedTable.find(">tbody>tr.k-grouping-row"),t.length),u=d.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)")),l=0,c=o.length;c>l;l+=1)a(s(u[l],o[l],">td:not(.k-group-cell,.k-hierarchy-cell)"),p,f,i,t.length)},reorderColumn:function(e,n,i){var r,o,a=this,s=d(n,a.columns),l=s?s.columns:a.columns,c=Ct(n,l),u=l[e],h=!!u.locked,p=I(a.columns).length;c!==e&&(n.locked||!h||1!=z(a.columns).length)&&(!n.locked||h||1!=p)&&(a._hideResizeHandle(),i===t&&(i=c>e),o=[n],a._reorderHeader(o,u,i),a.lockedHeader&&(M(a.thead),M(a.lockedHeader)),u.columns&&(u=L(u.columns),u=u[i?0:u.length-1]),n.columns&&(o=L(n.columns)),a._reorderContent(o,u,i),r=!!n.locked,r=r!=h,n.locked=h,l.splice(i?e:e+1,0,n),l.splice(e>c?c:c+1,1),a._templates(),a._updateColumnCellIndex(),a._updateTablesWidth(),a._applyLockedContainersWidth(),a._syncLockedHeaderHeight(),a._syncLockedContentHeight(),a._updateFirstColumnClass(),r&&(h?a.trigger(nn,{column:n}):a.trigger(rn,{column:n})))},_updateColumnCellIndex:function(){var e,t=0;this.lockedHeader&&(e=this.lockedHeader.find("thead"),t=_(e,I(this.columns))),_(this.thead,z(this.columns),t)},lockColumn:function(e){var t,n=this.columns;e="number"==typeof e?n[e]:kt(n,function(t){return t.field===e})[0],!e||e.locked||e.hidden||(t=I(n).length-1,this.reorderColumn(t,e,!1))},unlockColumn:function(e){var t,n=this.columns;e="number"==typeof e?n[e]:kt(n,function(t){return t.field===e})[0],e&&e.locked&&!e.hidden&&(t=I(n).length,this.reorderColumn(t,e,!0))},cellIndex:function(t){var n=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(n=L(I(this.columns)).length),e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+n},_modelForContainer:function(t){t=e(t),t.is("tr")||"popup"===this._editMode()||(t=t.closest("tr"));var n=t.attr(ut.attr("uid"));return this.dataSource.getByUid(n)},_editable:function(){var t,n=this,i=n.selectable&&n.selectable.options.multiple,r=n.options.editable,o=function(){var t=mt(),i=n._editContainer;!i||e.contains(i[0],t)||i[0]===t||e(t).closest(".k-animation-container").length||n.editable.end()&&n.closeCell()};r&&(t=n._editMode(),"incell"===t?r.update!==!1&&n.wrapper.on(on+Ot,"tr:not(.k-grouping-row) > td",function(t){var r=e(this),o=n.lockedTable&&r.closest("table")[0]===n.lockedTable[0];r.hasClass("k-hierarchy-cell")||r.hasClass("k-detail-cell")||r.hasClass("k-group-cell")||r.hasClass("k-edit-cell")||r.has("a.k-grid-delete").length||r.has("button.k-grid-delete").length||r.closest("tbody")[0]!==n.tbody[0]&&!o||e(t.target).is(":input")||(n.editable?n.editable.end()&&(i&&e(mt()).blur(),n.closeCell(),n.editCell(r)):n.editCell(r))}).on("focusin"+Ot,function(){clearTimeout(n.timer),n.timer=null}).on("focusout"+Ot,function(){n.timer=setTimeout(o,1)}):r.update!==!1&&n.wrapper.on(on+Ot,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(t){t.preventDefault(),n.editRow(e(this).closest("tr"))}),r.destroy!==!1?n.wrapper.on(on+Ot,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(t){t.preventDefault(),t.stopPropagation(),n.removeRow(e(this).closest("tr"))}):n.wrapper.on(on+Ot,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(e){e.stopPropagation(),n._confirmation()||e.preventDefault()}))},editCell:function(t){var n,i,r,o;t=e(t),n=this,i=L(n.columns)[n.cellIndex(t)],r=n._modelForContainer(t),n.closeCell(),!r||r.editable&&!r.editable(i.field)||i.command||!i.field||(n._attachModelChange(r),n._editContainer=t,n.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:i.field,format:i.format,editor:i.editor,values:i.values},model:r,target:n,change:function(e){n.trigger(Nt,{values:e.values,container:t,model:r})&&e.preventDefault()}}).data("kendoEditable"),o=t.parent().addClass("k-grid-edit-row"),n.lockedContent&&et(o[0],n._relatedRow(o).addClass("k-grid-edit-row")[0]),n.trigger(Ht,{container:t,model:r}))},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),n=e[0].offsetWidth>t[0].clientWidth?ut.support.scrollbar():0;this.lockedContent.height(t.height()-n)},_syncLockedContentHeight:function(){this.lockedTable&&(this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){var e,t;this.lockedHeader&&(e=this.lockedHeader.children("table"),t=this.thead.parent(),this._adjustRowsHeight(e,t),Z(e,t))},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var e=this,t=function(){if(e.editable){var t=e.editView?e.editView.element:e._editContainer;t&&(t.off(on+Ot,"a.k-grid-cancel",e._editCancelClickHandler),t.off(on+Ot,"a.k-grid-update",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,e._editContainer=null,e._destroyEditView()}};e.editable&&("popup"!==e._editMode()||e._isMobile?t():e._editContainer.data("kendoWindow").bind("deactivate",t).close()),e._actionSheet&&(e._actionSheet.destroy(),e._actionSheet=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t);n&&n.unbind(Gt,e._modelChangeHandler)},closeCell:function(t){var n,i,r,o,a=this,s=a._editContainer;s&&(n=s.closest("tr").attr(ut.attr("uid")),o=a.dataSource.getByUid(n),t&&a.trigger("cancel",{container:s,model:o})||(s.removeClass("k-edit-cell"),i=L(a.columns)[a.cellIndex(s)],r=s.parent().removeClass("k-grid-edit-row"),a._destroyEditable(),a._displayCell(s,i,o),s.hasClass("k-dirty-cell")&&e('<span class="k-dirty"/>').prependTo(s),a.lockedContent&&et(r.css("height","")[0],a._relatedRow(r).css("height","")[0])))},_displayCell:function(e,t,n){var i=this,r={storage:{},count:0},o=wt({},ut.Template,i.options.templateSettings),a=ut.template(i._cellTmpl(t,r),o);r.count>0&&(a=Tt(a,r.storage)),e.empty().html(a(n)),i.angular("compile",function(){return{elements:e,data:[{dataItem:n}]}})},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(t){var n,i=this,r=i._editMode();"incell"!==r&&i.cancelRow(),t=e(t).hide(),n=i._modelForContainer(t),n&&!i.trigger(Vt,{row:t,model:n})?(i.dataSource.remove(n),("inline"===r||"popup"===r)&&i.dataSource.sync()):"incell"===r&&i._destroyEditable()},_editMode:function(){var e="incell",t=this.options.editable;return t!==!0&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(n){var i,r,o,a=this;n instanceof ut.data.ObservableObject?i=n:(n=e(n),i=a._modelForContainer(n)),r=a._editMode(),a.cancelRow(),i&&(a._attachModelChange(i),"popup"===r?a._createPopupEditor(i):"inline"===r?a._createInlineEditor(n,i):"incell"===r&&e(n).children(It).each(function(){var n=e(this),r=L(a.columns)[n.index()];return i=a._modelForContainer(n),i&&(!i.editable||i.editable(r.field))&&r.field?(a.editCell(n),!1):t}),o=a.editView?a.editView.element:a._editContainer,o&&(this._editCancelClickHandler||(this._editCancelClickHandler=Tt(this._editCancelClick,this)),o.on(on+Ot,"a.k-grid-cancel",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=Tt(this._editUpdateClick,this)),o.on(on+Ot,"a.k-grid-update",this._editUpdateClickHandler)))
},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation(),this.saveRow()},_editCancelClick:function(t){var n,i=this,r=i.options.navigatable,o=i.editable.options.model,a=i.editView?i.editView.element:i._editContainer;t.preventDefault(),t.stopPropagation(),i.trigger("cancel",{container:a,model:o})||(n=i.items().index(e(i.current()).parent()),i.cancelRow(),r&&(i.current(i.items().eq(n).children().filter(Rt).first()),nt(i.table,!0)))},_createPopupEditor:function(n){var i,r,o,a,s,l,c,d,u,h,p,f=this,g="<div "+ut.attr("uid")+'="'+n.uid+'" class="k-popup-edit-form'+(f._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container">',m=[],v=L(f.columns),_=f.options.editable,y=_.template,w=yt(_)?_.window:{},b=wt({},ut.Template,f.options.templateSettings);if(w=w||{},y)for(typeof y===cn&&(y=window.unescape(y)),g+=ut.template(y,b)(n),o=0,a=v.length;a>o;o++)i=v[o],i.command&&(d=tt(i.command,"edit"),d&&(r=d));else for(o=0,a=v.length;a>o;o++)i=v[o],i.command?i.command&&(d=tt(i.command,"edit"),d&&(r=d)):(g+='<div class="k-edit-label"><label for="'+i.field+'">'+(i.title||i.field||"")+"</label></div>",n.editable&&!n.editable(i.field)||!i.field?(h={storage:{},count:0},s=ut.template(f._cellTmpl(i,h),b),h.count>0&&(s=Tt(s,h.storage)),g+='<div class="k-edit-field">'+s(n)+"</div>"):(m.push({field:i.field,format:i.format,editor:i.editor,values:i.values}),g+="<div "+ut.attr("container-for")+'="'+i.field+'" class="k-edit-field"></div>'));r&&yt(r)&&(r.text&&yt(r.text)&&(l=r.text.update,c=r.text.cancel),r.attr&&(u=r.attr)),f._isMobile?(g+="</div></div>",f.editView=f.pane.append("<div data-"+ut.ns+'role="view" data-'+ut.ns+'init-widgets="false" class="k-grid-edit-form"><div data-'+ut.ns+'role="header" class="k-header">'+f._createButton({name:"update",text:l,attr:u})+(w.title||"Edit")+f._createButton({name:"canceledit",text:c,attr:u})+"</div>"+g+"</div>"),p=f._editContainer=f.editView.element.find(".k-popup-edit-form")):(g+='<div class="k-edit-buttons k-state-default">',g+=f._createButton({name:"update",text:l,attr:u})+f._createButton({name:"canceledit",text:c,attr:u}),g+="</div></div></div>",p=f._editContainer=e(g).appendTo(f.wrapper).eq(0).kendoWindow(wt({modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1,close:function(i){if(i.userTriggered){if(i.sender.element.focus(),f.trigger("cancel",{container:p,model:n}))return i.preventDefault(),t;var r=f.items().index(e(f.current()).parent());f.cancelRow(),f.options.navigatable&&(f.current(f.items().eq(r).children().filter(Rt).first()),nt(f.table,!0))}}},w))),f.editable=f._editContainer.kendoEditable({fields:m,model:n,clearContainer:!1,target:f}).data("kendoEditable"),f._isMobile&&p.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){e(this).next().children("input").click()}),f._openPopUpEditor(),f.trigger(Ht,{container:p,model:n})},_openPopUpEditor:function(){this._isMobile?this.pane.navigate(this.editView,this._editAnimation):this._editContainer.data("kendoWindow").center().open()},_createInlineEditor:function(t,n){var i,r,o,a=this,s=[];a.lockedContent&&(t=t.add(a._relatedRow(t))),t.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){if(r=e(this),i=L(a.columns)[a.cellIndex(r)],i.command||!i.field||n.editable&&!n.editable(i.field)){if(i.command&&(o=tt(i.command,"edit"))){r.empty();var t,l,c;yt(o)&&(o.text&&yt(o.text)&&(t=o.text.update,l=o.text.cancel),o.attr&&(c=o.attr)),e(a._createButton({name:"update",text:t,attr:c})+a._createButton({name:"canceledit",text:l,attr:c})).appendTo(r)}}else s.push({field:i.field,format:i.format,editor:i.editor,values:i.values}),r.attr(ut.attr("container-for"),i.field),r.empty()}),a._editContainer=t,a.editable=new ut.ui.Editable(t.addClass("k-grid-edit-row"),{target:a,fields:s,model:n,clearContainer:!1}),t.length>1&&(et(t[0],t[1]),a._applyLockedContainersWidth()),a.trigger(Ht,{container:t,model:n})},cancelRow:function(){var e,t=this,n=t._editContainer;n&&(e=t._modelForContainer(n),t._destroyEditable(),t.dataSource.cancelChanges(e),t._displayRow("popup"!==t._editMode()?n:t.tbody.find("["+ut.attr("uid")+"="+e.uid+"]")))},saveRow:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t),i=e.editable;t&&i&&i.end()&&!e.trigger(Nt,{container:t,model:n})&&e.dataSource.sync()},_displayRow:function(t){var n,i,r,o=this,a=o._modelForContainer(t),s=t.hasClass("k-state-selected"),l=t.hasClass("k-alt");a&&(o.lockedContent&&(n=e((l?o.lockedAltRowTemplate:o.lockedRowTemplate)(a)),o._relatedRow(t.last()).replaceWith(n)),o.angular("cleanup",function(){return{elements:t.get()}}),i=e((l?o.altRowTemplate:o.rowTemplate)(a)),t.replaceWith(i),o.angular("compile",function(){return{elements:i.get(),data:[{dataItem:a}]}}),s&&o.options.selectable&&o.select(i.add(n)),n&&et(i[0],n[0]),r=i.next(),r.hasClass("k-detail-row")&&r.is(":visible")&&i.find(".k-hierarchy-cell .k-icon").removeClass("k-plus").addClass("k-minus"))},_showMessage:function(t,n){var i,r,o,a=this;return a._isMobile?(i=ut.template('<ul><li class="km-actionsheet-title">#:title#</li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#</a></li></ul>'),r=e(i(t)).appendTo(a.view.element),o=a._actionSheet=new ut.mobile.ui.ActionSheet(r,{cancel:t.cancelDelete,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(t){var i=e(t.currentTarget).parent();i.hasClass("km-actionsheet-cancel")||a._removeRow(n)},popup:a._actionSheetPopupOptions}),o.open(n),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,n=t.options.editable,i=n===!0||typeof n===cn?t.options.messages.editable.confirmation:n.confirmation;return i!==!1&&null!=i?(typeof i===ln&&(i=i(t._modelForContainer(e))),t._showMessage({confirmDelete:n.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:n.cancelDelete||t.options.messages.editable.cancelDelete,title:i===!0?t.options.messages.editable.confirmation:i},e)):!0},cancelChanges:function(){this.dataSource.cancelChanges()},saveChanges:function(){var e=this;(e.editable&&e.editable.end()||!e.editable)&&!e.trigger(Yt)&&e.dataSource.sync()},addRow:function(){var e,t,n,i,r,o,a=this,s=a.dataSource,l=a._editMode(),c=a.options.editable.createAt||"",d=s.pageSize(),u=s.view()||[];(a.editable&&a.editable.end()||!a.editable)&&("incell"!=l&&a.cancelRow(),e=s.indexOf(u[0]),"bottom"==c.toLowerCase()&&(e+=u.length,d&&!s.options.serverPaging&&u.length>=d&&(e-=1)),0>e&&(e=s.page()>s.totalPages()?(s.page()-1)*d:0),t=s.insert(e,{}),n=t.uid,i=a.lockedContent?a.lockedTable:a.table,r=i.find("tr["+ut.attr("uid")+"="+n+"]"),o=r.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(a._firstEditableColumnIndex(r)),"inline"===l&&r.length?a.editRow(r):"popup"===l?a.editRow(t):o.length&&a.editCell(o),"bottom"==c.toLowerCase()&&a.lockedContent&&(a.lockedContent[0].scrollTop=a.content[0].scrollTop=a.content[0].offsetHeight))},_firstEditableColumnIndex:function(e){var t,n,i,r=this,o=L(r.columns),a=r._modelForContainer(e);for(n=0,i=o.length;i>n;n++)if(t=o[n],a&&(!a.editable||a.editable(t.field))&&!t.command&&t.field)return n;return-1},_toolbar:function(){var t,n=this,i=n.wrapper,r=n.options.toolbar,o=n.options.editable;r&&(t=n.wrapper.find(".k-grid-toolbar"),t.length||(Dt(r)||(r=typeof r===cn?r:n._toolbarTmpl(r).replace(fn,"\\#"),r=Tt(ut.template(r),n)),t=e('<div class="k-header k-grid-toolbar" />').html(r({})).prependTo(i),n.angular("compile",function(){return{elements:t.get()}})),o&&o.create!==!1&&t.on(on+Ot,".k-grid-add",function(e){e.preventDefault(),n.addRow()}).on(on+Ot,".k-grid-cancel-changes",function(e){e.preventDefault(),n.cancelChanges()}).on(on+Ot,".k-grid-save-changes",function(e){e.preventDefault(),n.saveChanges()}),t.on(on+Ot,".k-grid-excel",function(e){e.preventDefault(),n.saveAsExcel()}),t.on(on+Ot,".k-grid-pdf",function(e){e.preventDefault(),n.saveAsPDF()}))},_toolbarTmpl:function(e){var t,n,i=this,r="";if(xt(e))for(t=0,n=e.length;n>t;t++)r+=i._createButton(e[t]);return r},_createButton:function(e){var n,r=e.template||_n,o=typeof e===cn?e:e.name||e.text,a=Cn[o]?Cn[o].className:"k-grid-"+(o||"").replace(/\s/g,""),s={className:a,text:o,imageClass:"",attr:"",iconClass:""},l=this.options.messages.commands;if(!(o||yt(e)&&e.template))throw Error("Custom commands should have name specified");return yt(e)?(e.className&&Ct(s.className,e.className.split(" "))<0?e.className+=" "+s.className:e.className===t&&(e.className=s.className),"edit"===o&&yt(e.text)&&(e=wt(!0,{},e),e.text=e.text.edit),e.attr&&(yt(e.attr)&&(e.attr=i(e.attr)),typeof e.attr===cn&&(n=e.attr.match(/class="(.+?)"/),n&&Ct(n[1],e.className.split(" "))<0&&(e.className+=" "+n[1]))),s=wt(!0,s,Cn[o],{text:l[o]},e)):s=wt(!0,s,Cn[o],{text:l[o]}),ut.template(r)(s)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(on+Ot,t._groupableClickHandler):t._groupableClickHandler=function(n){var i=e(this),r=i.closest("tr");i.hasClass("k-i-collapse")?t.collapseGroup(r):t.expandGroup(r),n.preventDefault(),n.stopPropagation()},t._isLocked()?t.lockedTable.on(on+Ot,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler):t.table.on(on+Ot,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this,n=t.wrapper,i=t.options.groupable,r=Lt+"["+ut.attr("field")+"]",o=t.content?".k-grid-header:first "+r:"table:first>.k-grid-header "+r;i&&i.enabled!==!1&&(n.has("div.k-grouping-header")[0]||e("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(n),t.groupable&&t.groupable.destroy(),t.groupable=new ft(n,wt({},i,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:o,filter:o,allowDrag:t.options.reorderable})))},_continuousItems:function(t,n){var i,r,o,a,s,l,c,d;if(this.lockedContent){for(i=this,r=i.table.add(i.lockedTable),o=e(t,r[0]),a=e(t,r[1]),s=n?I(i.columns).length:1,l=n?i.columns.length-s:1,c=[],d=0;o.length>d;d+=s)St.apply(c,o.slice(d,d+s)),St.apply(c,a.splice(0,l));return c}},_selectable:function(){var n,i,r,o,a=this,s=[],l=a._isLocked(),c=a.options.selectable;c&&(a.selectable&&a.selectable.destroy(),c=ut.ui.Selectable.parseOptions(c),n=c.multiple,i=c.cell,a._hasDetails()&&(s[s.length]=".k-detail-row"),(a.options.groupable||a._hasFooters())&&(s[s.length]=".k-grouping-row,.k-group-footer"),s=s.join(","),""!==s&&(s=":not("+s+")"),r=a.table,l&&(r=r.add(a.lockedTable)),o=">"+(i?zt:"tbody>tr"+s),a.selectable=new ut.ui.Selectable(r,{filter:o,aria:!0,multiple:n,change:function(){a.trigger(Gt)},useAllItems:l&&n&&i,relatedTarget:function(t){var n,r,o,s;if(!i&&l){for(r=e(),o=0,s=t.length;s>o;o++)n=a._relatedRow(t[o]),Ct(n[0],t)<0&&(r=r.add(n));return r}},continuousItems:function(){return a._continuousItems(o,i)}}),a.options.navigatable&&r.on("keydown"+Ot,function(o){var s=a.current(),c=o.target;if(o.keyCode===_t.SPACEBAR&&e.inArray(c,r)>-1&&!s.is(".k-edit-cell,.k-header")&&s.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(o.preventDefault(),o.stopPropagation(),s=i?s:s.parent(),l&&!i&&(s=s.add(a._relatedRow(s))),n)if(o.ctrlKey){if(s.hasClass(Zt))return s.removeClass(Zt),a.trigger(Gt),t}else a.selectable.clear();else a.selectable.clear();a.selectable.value(s)}}))},_relatedRow:function(t){var n,i,r=this.lockedTable;return t=e(t),r?(n=t.closest(this.table.add(this.lockedTable)),i=n.find(">tbody>tr").index(t),n=n[0]===this.table[0]?r:this.table,n.find(">tbody>tr").eq(i)):t},clearSelection:function(){var e=this;e.selectable.clear(),e.trigger(Gt)},select:function(n){var i=this,r=i.selectable;return n=e(n),n.length?(r.options.multiple||(r.clear(),n=n.first()),i._isLocked()&&(n=n.add(n.map(function(){return i._relatedRow(this)}))),r.value(n),t):r.value()},current:function(e){var n,i=this,r=i.options.scrollable,o=i._current,a=i.table.add(i.thead.parent());return e!==t&&e.length&&(o&&o[0]===e[0]||(o&&(o.removeClass(Jt).removeAttr("id"),a.removeAttr("aria-activedescendant")),e.attr("id",i._cellId),i._current=e.addClass(Jt),a.attr("aria-activedescendant",i._cellId),e.length&&r&&(n=e.closest("table").parent(),n.is(".k-grid-content")?i._scrollTo(e.parent()[0],i.content[0]):n.is(".k-grid-content-locked")&&(i._scrollTo(i._relatedRow(e.parent())[0],i.content[0]),i.lockedContent[0].scrollTop=i.content[0].scrollTop),n.is(".k-grid-content-locked,.k-grid-header-locked")||(r.virtual?i._scrollTo(e[0],i.content.find(">.k-virtual-scrollable-wrap")[0]):i._scrollTo(e[0],i.content[0]))))),i._current},_removeCurrent:function(){this._current&&(this._current.removeClass(Jt),this._current=null)},_scrollTo:function(e,t){var n=e.tagName.toLowerCase(),i="td"===n||"th"===n,r=e[i?"offsetLeft":"offsetTop"],o=e[i?"offsetWidth":"offsetHeight"],a=t[i?"scrollLeft":"scrollTop"],s=t[i?"clientWidth":"clientHeight"],l=r+o,c=0;c=a>r?r:l>a+s?s>=o?l-s:r:a,t[i?"scrollLeft":"scrollTop"]=c},_navigatable:function(){var t=this,n=Tt(t.current,t),i=t.table.add(t.lockedTable),r=t.thead.parent().add(e(">table",t.lockedHeader)),o=(t._isLocked(),i),a=ut.support.isRtl(t.element);t.options.navigatable&&(t.options.scrollable&&(o=i.add(r),r.attr(sn,-1)),o.off("mousedown"+Ot+" focus"+Ot+" focusout"+Ot+" keydown"+Ot),r.on("keydown"+Ot,function(e){e.altKey&&e.keyCode==_t.DOWN&&(n().find(".k-grid-filter, .k-header-column-menu").click(),e.stopImmediatePropagation())}).find("a.k-link").attr("tabIndex",-1),i.attr(sn,Et.max(i.attr(sn)||0,0)).on("mousedown"+Ot+" keydown"+Ot,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}),o.on(ut.support.touch?"touchstart"+Ot:"mousedown"+Ot,Ft+">"+Rt,Tt(it,t)).on("focus"+Ot,function(){if(!ut.support.touch){var t=n();t&&t.is(":visible")?t.addClass(Jt):n(e(this).find(Bt)),i.attr(sn,-1),r.attr(sn,-1),e(this).attr(sn,0)}}).on("focusout"+Ot,function(){var e=n();e&&e.removeClass(Jt)}).on("keydown"+Ot,function(o){var s,l,c,d,u,h=o.keyCode,p=!1,f=!o.isDefaultPrevented()&&!e(o.target).is(":button,a,:input,a>.k-icon"),g=t.options.pageable,m=t.dataSource,v="incell"==t._editMode(),_=o.shiftKey,y=Tt(t._relatedRow,t),w=n();if(w&&w.is("th")&&(f=!0),f&&h==_t.UP)n(ot(w,o.currentTarget,i,r,!0)),p=!0;else if(f&&h==_t.DOWN)n(ot(w,o.currentTarget,i,r)),p=!0;else if(f&&h==(a?_t.RIGHT:_t.LEFT))n(at(w,o.currentTarget,i,r,y)),p=!0;else if(f&&h==(a?_t.LEFT:_t.RIGHT))n(st(w,o.currentTarget,i,r,y)),p=!0;else if(f&&g&&_t.PAGEDOWN==h)m.page(m.page()+1),p=!0;else if(f&&g&&_t.PAGEUP==h)m.page(m.page()-1),p=!0;else if(h==_t.ENTER||_t.F2==h){if(w=w?w:i.find(Bt),!w.length)return;e(o.target).is("table")||e.contains(w[0],o.target)||(w=e(o.target).closest("[role=gridcell]")),w.is("th")?(w.find(".k-link").click(),p=!0):w.parent().is(".k-master-row,.k-grouping-row")?(w.parent().find(".k-icon:first").click(),p=!0):(c=w.find(":kendoFocusable:first"),!w.hasClass("k-edit-cell")&&c[0]&&w.hasClass("k-state-focused")?(c.focus(),p=!0):t.options.editable&&!e(o.target).is(":button,.k-button,textarea")&&(d=e(o.target).closest("[role=gridcell]"),d[0]||(d=w),t._handleEditing(d,!1,v?o.currentTarget:i[0]),p=!0))}else _t.ESC==h?(s=mt(),w&&e.contains(w[0],s)&&!w.hasClass("k-edit-cell")&&!w.parent().hasClass("k-grid-edit-row")?(nt(o.currentTarget,!0),p=!0):!t._editContainer||w&&!t._editContainer.has(w[0])&&w[0]!==t._editContainer[0]||(v?t.closeCell(!0):(l=e(w).parent().index(),s&&s.blur(),t.cancelRow(),l>=0&&t.current(i.find(">tbody>tr").eq(l).children().filter(Rt).first())),wn.msie&&9>wn.version&&document.body.focus(),nt(v?o.currentTarget:i[0],!0),p=!0)):_t.TAB==h&&(w=e(w),t.options.editable&&v&&(u=e(mt()).closest(".k-edit-cell"),u[0]&&u[0]!==w[0]&&(w=u)),u=lt(w,o.currentTarget,i,y,_),!w.is("th")&&u.length&&t.options.editable&&v&&(t._handleEditing(w,u,u.closest(i)),p=!0));p&&(o.preventDefault(),o.stopPropagation())}))},_handleEditing:function(n,i,r){var o,a,s=this,l=e(mt()),c=s._editMode(),d=wn.msie,u=d&&9>wn.version,h=s._editContainer;if(r=e(r),a="incell"==c?n.hasClass("k-edit-cell"):n.parent().hasClass("k-grid-edit-row"),s.editable){if(e.contains(h[0],l[0])&&(wn.opera||u?l.change().triggerHandler("blur"):(l.blur(),d&&l.blur())),!s.editable)return nt(r),t;if(!s.editable.end())return s.current("incell"==c?h:h.children().filter(It).first()),o=h.find(":kendoFocusable:first")[0],o&&o.focus(),t;"incell"==c?s.closeCell():(s.saveRow(),a=!0)}i&&s.current(i),u&&document.body.focus(),nt(r,!0),(!a&&!i||i)&&("incell"==c?s.editCell(s.current()):s.editRow(s.current().parent()))},_wrapper:function(){var e=this,t=e.table,n=e.options.height,i=e.element;i.is("div")||(i=i.wrap("<div/>").parent()),e.wrapper=i.addClass("k-grid k-widget"),n&&(e.wrapper.css(an,n),t.css(an,"auto")),e._initMobile()},_initMobile:function(){var t,n=this.options,i=this;this._isMobile=n.mobile===!0&&ut.support.mobileOS||"phone"===n.mobile||"tablet"===n.mobile,this._isMobile&&(t=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+ut.ns+'role="view" data-'+ut.ns+'init-widgets="false"></div>').parent(),this.pane=ut.mobile.ui.Pane.wrap(t),this.view=this.pane.view(),this._actionSheetPopupOptions=e(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"},n.height&&this.pane.element.parent().css(an,n.height),this._editAnimation="slide",this.view.bind("show",function(){i._isLocked()&&(i._updateTablesWidth(),i._applyLockedContainersWidth(),i._syncLockedContentHeight(),i._syncLockedHeaderHeight(),i._syncLockedFooterHeight())}))},_tbody:function(){var t,n=this,i=n.table;t=i.find(">tbody"),t.length||(t=e("<tbody/>").appendTo(i)),n.tbody=t.attr("role","rowgroup")},_scrollable:function(){var t,n,i,r,o=this,a=o.options,s=a.scrollable,l=s!==!0&&s.virtual&&!o.virtualScrollable,c=!ut.support.kineticScrollNeeded||l?ut.support.scrollbar():0;s&&(t=o.wrapper.children(".k-grid-header"),t[0]||(t=e('<div class="k-grid-header" />').insertBefore(o.table)),t.css(yn?"padding-left":"padding-right",s.virtual?c+1:c),n=e('<table role="grid" />'),bn&&n.attr("cellspacing",0),n.append(o.thead),t.empty().append(e('<div class="k-grid-header-wrap" />').append(n)),o.content=o.table.parent(),o.content.is(".k-virtual-scrollable-wrap, .km-scroll-container")&&(o.content=o.content.parent()),o.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(o.content=o.table.wrap('<div class="k-grid-content" />').parent()),l&&(o.virtualScrollable=new xn(o.content,{dataSource:o.dataSource,itemHeight:function(){return o._averageRowHeight()}})),o.scrollables=t.children(".k-grid-header-wrap"),i=o.wrapper.find(".k-grid-footer"),i.length&&(o.scrollables=o.scrollables.add(i.children(".k-grid-footer-wrap"))),s.virtual?o.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+Ot).bind("scroll"+Ot,function(){o.scrollables.scrollLeft(this.scrollLeft),o.lockedContent&&(o.lockedContent[0].scrollTop=this.scrollTop)}):(o.content.unbind("scroll"+Ot).bind("scroll"+Ot,function(){o.scrollables.scrollLeft(this.scrollLeft),o.lockedContent&&(o.lockedContent[0].scrollTop=this.scrollTop)}),r=o.content.data("kendoTouchScroller"),r&&r.destroy(),r=ut.touchScroller(o.content),r&&r.movable&&(o.touchScroller=r,r.movable.bind("change",function(e){o.scrollables.scrollLeft(-e.sender.x),o.lockedContent&&o.lockedContent.scrollTop(-e.sender.y)}),o.one(Kt,function(e){e.sender.wrapper.addClass("k-grid-backface")}))))},_setContentWidth:function(){var t,n=this,i="k-grid-content-expander",r='<div class="'+i+'"></div>',o=n.resizable;n.options.scrollable&&n.wrapper.is(":visible")&&(t=n.table.parent().children("."+i),n._setContentWidthHandler=Tt(n._setContentWidth,n),n.dataSource&&n.dataSource.view().length?t[0]&&(t.remove(),o&&o.unbind("resize",n._setContentWidthHandler)):(t[0]||(t=e(r).appendTo(n.table.parent()),o&&o.bind("resize",n._setContentWidthHandler)),n.thead&&t.width(n.thead.width())),n._applyLockedContainersWidth())},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var e,t=this.thead.parent(),n=t.parent(),i=this.wrapper[0].clientWidth,r=this._groups(),o=ut.support.scrollbar(),a=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),s=t.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),l=D(a),c=D(s);r>0&&(l+=this.lockedHeader.find(".k-group-cell:first").outerWidth()*r),l>=i&&(l=i-3*o),this.lockedHeader.add(this.lockedContent).width(l),n[0].style.width=n.parent().width()-l-2+"px",t.add(this.table).width(c),this.virtualScrollable&&(i-=o),this.content[0].style.width=i-l-2+"px",this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(l),e=this.footer.find(".k-grid-footer-wrap"),e[0].style.width=n[0].clientWidth+"px",e.children().first().width(c))}},_setContentHeight:function(){var e,t=this,n=t.options,i=t.wrapper.innerHeight(),r=t.wrapper.children(".k-grid-header"),o=ut.support.scrollbar();n.scrollable&&t.wrapper.is(":visible")&&(i-=r.outerHeight(),t.pager&&(i-=t.pager.element.outerHeight()),n.groupable&&(i-=t.wrapper.children(".k-grouping-header").outerHeight()),n.toolbar&&(i-=t.wrapper.children(".k-grid-toolbar").outerHeight()),t.footerTemplate&&(i-=t.wrapper.children(".k-grid-footer").outerHeight()),e=function(e){var t,n;return e[0].style.height?!0:(t=e.height(),e.height("auto"),n=e.height(),t!=n?(e.height(""),!0):(e.height(""),!1))},e(t.wrapper)&&(i>2*o?(t.lockedContent&&(o=t.table[0].offsetWidth>t.table.parent()[0].clientWidth?o:0,t.lockedContent.height(i-o)),t.content.height(i)):t.content.height(2*o+1)))},_averageRowHeight:function(){var e,t=this,n=t._items(t.tbody).length,i=t._rowHeight;return 0===n?i:(t._rowHeight||(t._rowHeight=i=t.table.outerHeight()/n,t._sum=i,t._measures=1),e=t.table.outerHeight()/n,i!==e&&(t._measures++,t._sum+=e,t._rowHeight=t._sum/t._measures),i)},_dataSource:function(){var e,n=this,i=n.options,r=i.dataSource;r=xt(r)?{data:r}:r,yt(r)&&(wt(r,{table:n.table,fields:n.columns}),e=i.pageable,yt(e)&&e.pageSize!==t&&(r.pageSize=e.pageSize)),n.dataSource&&n._refreshHandler?n.dataSource.unbind(Gt,n._refreshHandler).unbind(Mt,n._progressHandler).unbind(Pt,n._errorHandler):(n._refreshHandler=Tt(n.refresh,n),n._progressHandler=Tt(n._requestStart,n),n._errorHandler=Tt(n._error,n)),n.dataSource=pt.create(r).bind(Gt,n._refreshHandler).bind(Mt,n._progressHandler).bind(Pt,n._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var n,i,r,o,a,s,l,c,d,u=this,h=u.tbody,p=t.model,f=u.tbody.find("tr["+ut.attr("uid")+"="+p.uid+"]"),g=f.hasClass("k-alt"),m=u._items(h).index(f),v=u.lockedContent;if(v&&(n=u._relatedRow(f)),f.add(n).children(".k-edit-cell").length&&!u.options.rowTemplate)f.add(n).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){i=e(this),r=L(u.columns)[u.cellIndex(i)],r.field===t.field&&(i.hasClass("k-edit-cell")?i.addClass("k-dirty-cell"):(u._displayCell(i,r,p),e('<span class="k-dirty"/>').prependTo(i)))});else if(!f.hasClass("k-grid-edit-row")){for(s=e().add(f),v&&(o=(g?u.lockedAltRowTemplate:u.lockedRowTemplate)(p),s=s.add(n),n.replaceWith(o)),o=(g?u.altRowTemplate:u.rowTemplate)(p),f.replaceWith(o),o=u._items(h).eq(m),v&&(f=f.add(n),n=u._relatedRow(o)[0],et(o[0],n),o=o.add(n)),a=u.options.selectable,a&&f.hasClass("k-state-selected")&&u.select(o),c=s.children(":not(.k-group-cell,.k-hierarchy-cell)"),l=o.children(":not(.k-group-cell,.k-hierarchy-cell)"),m=0,d=u.columns.length;d>m;m++)r=u.columns[m],i=l.eq(m),a&&c.eq(m).hasClass("k-state-selected")&&i.addClass("k-state-selected"),r.field===t.field&&e('<span class="k-dirty"/>').prependTo(i);u.trigger("itemChange",{item:o,data:p,ns:ht})}},_pageable:function(){var t,n=this,i=n.options.pageable;i&&(t=n.wrapper.children("div.k-grid-pager"),t.length||(t=e('<div class="k-pager-wrap k-grid-pager"/>').appendTo(n.wrapper)),n.pager&&n.pager.destroy(),n.pager="object"==typeof i&&i instanceof ut.ui.Pager?i:new ut.ui.Pager(t,wt({},i,{dataSource:n.dataSource})))},_footer:function(){var t,n,i,r,a=this,s=a.dataSource.aggregates(),l="",c=a.footerTemplate,d=a.options,u=a.footer||a.wrapper.find(".k-grid-footer");c?(s=At(s)?o(a.dataSource.aggregate()):s,l=e(a._wrapFooter(c(s))),u.length?(n=l,a.angular("cleanup",function(){return{elements:u.get()}}),u.replaceWith(n),u=a.footer=n):u=a.footer=d.scrollable?d.pageable?l.insertBefore(a.wrapper.children("div.k-grid-pager")):l.appendTo(a.wrapper):l.insertBefore(a.tbody),a.angular("compile",function(){return{elements:u.find("td").get(),data:bt(a.columns,function(e){return{column:e,aggregate:s[e.field]}})}})):u&&!a.footer&&(a.footer=u),u.length&&(d.scrollable&&(t=u.attr("tabindex",-1).children(".k-grid-footer-wrap"),a.scrollables=a.scrollables.filter(function(){return!e(this).is(".k-grid-footer-wrap")}).add(t)),a._footerWidth&&u.find("table").css("width",a._footerWidth),t&&(i=a.content.scrollLeft(),r=d.scrollable!==!0&&d.scrollable.virtual&&!a.virtualScrollable,r&&(i=a.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft()),t.scrollLeft(i))),a.lockedContent&&(a._appendLockedColumnFooter(),a._applyLockedContainersWidth(),a._syncLockedFooterHeight())},_wrapFooter:function(t){var n=this,i="",r=ut.support.mobileOS?0:ut.support.scrollbar();return n.options.scrollable?(i=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(bn?' cellspacing="0"':"")+"><tbody>"+t+"</tbody></table></div></div>"),n._appendCols(i.find("table")),i.css(yn?"padding-left":"padding-right",r),i):'<tfoot class="k-grid-footer">'+t+"</tfoot>"},_columnMenu:function(){var e,n,i,r,o,a,s,l,c,d=this,u=L(d.columns),h=d.options,p=h.columnMenu,f=kt(d.columns,function(e){return e.columns!==t}).length>0,g=this._isMobile,m=function(e){d.trigger(jt,{field:e.field,container:e.container})},v=function(e){nt(e.closest("table"),!0)},_=h.$angular;if(p)for("boolean"==typeof p&&(p={}),a=O(d.thead),s=0,l=a.length;l>s;s++)n=u[s],c=a.eq(s),n.command||!n.field&&!c.attr("data-"+ut.ns+"field")||(e=c.data("kendoColumnMenu"),e&&e.destroy(),r=n.sortable!==!1&&p.sortable!==!1&&h.sortable!==!1?wt({},h.sortable,{compare:(n.sortable||{}).compare}):!1,o=h.filterable&&n.filterable!==!1&&p.filterable!==!1?wt({pane:d.pane},n.filterable,h.filterable):!1,i={dataSource:d.dataSource,values:n.values,columns:p.columns,sortable:r,filterable:o,messages:p.messages,owner:d,closeCallback:v,init:m,pane:d.pane,filter:g?":not(.k-column-active)":"",lockedColumns:!f&&n.lockable!==!1&&I(u).length>0},_&&(i.$angular=_),c.kendoColumnMenu(i))},_headerCells:function(){return this.thead.find("th").filter(function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")})},_filterable:function(){var e,t,n,i,r,o,a,s=this,l=L(s.columns),c=function(e){s.trigger(Wt,{field:e.field,container:e.container})},d=function(e){nt(e.closest("table"),!0)},u=s.options.filterable;if(u&&typeof u.mode==cn&&-1==u.mode.indexOf("menu")&&(u=!1),u&&!s.options.columnMenu)for(t=O(s.thead),i=0,r=t.length;r>i;i++)n=t.eq(i),l[i].filterable===!1||l[i].command||!l[i].field&&!n.attr("data-"+ut.ns+"field")||(e=n.data("kendoFilterMenu"),e&&e.destroy(),o=l[i].filterable,a=wt({},u,o,{dataSource:s.dataSource,values:l[i].values,closeCallback:d,init:c,pane:s.pane}),o&&o.messages&&(a.messages=wt(!0,{},u.messages,o.messages)),n.kendoFilterMenu(a))},_filterRow:function(){var t,n,i,r,o,a,s,l,c,d,u,h,p=this;if(p._hasFilterRow())for(t=L(p.columns),n=p.options.filterable,i=p.thead.find(".k-filter-row"),this._updateHeader(this.dataSource.group().length),r=0;t.length>r;r++)if(a=t[r],s=p.options.filterable.operators,l=!1,c=e("<th/>"),d=a.field,a.hidden&&c.hide(),i.append(c),d&&a.filterable!==!1){if(u=a.filterable&&a.filterable.cell||{},o=p.options.dataSource,o instanceof pt&&(o=p.options.dataSource.options),h=wt(!0,{},n.messages),a.filterable&&wt(!0,h,a.filterable.messages),u.enabled===!1){c.html("&nbsp;");continue}u.dataSource&&(o=u.dataSource,l=!0),a.filterable&&a.filterable.operators&&(s=a.filterable.operators),e("<span/>").attr(ut.attr("field"),d).kendoFilterCell({dataSource:p.dataSource,suggestDataSource:o,customDataSource:l,field:d,messages:h,values:a.values,template:u.template,delay:u.delay,inputWidth:u.inputWidth,suggestionOperator:u.suggestionOperator,minLength:u.minLength,dataTextField:u.dataTextField,operator:u.operator,operators:s,showOperators:u.showOperators}).appendTo(c)}else c.html("&nbsp;")},_sortable:function(){var e,t,n,i,r,o,a=this,s=L(a.columns),l=a.options.sortable;if(l){for(i=O(a.thead),r=0,o=i.length;o>r;r++)e=s[r],e.sortable!==!1&&!e.command&&e.field&&(n=i.eq(r),t=n.data("kendoColumnSorter"),t&&t.destroy(),n.attr("data-"+ut.ns+"field",e.field).kendoColumnSorter(wt({},l,e.sortable,{dataSource:a.dataSource,aria:!0,filter:":not(.k-column-active)"})));i=null}},_columns:function(t){var n,i,r,o=this,a=o.table,s=a.find("col"),l=o.options.dataSource;if(t=t.length?t:bt(a.find("th"),function(t,n){t=e(t);var i=t.attr(ut.attr("sortable")),r=t.attr(ut.attr("filterable")),o=t.attr(ut.attr("type")),a=t.attr(ut.attr("groupable")),l=t.attr(ut.attr("field")),c=t.attr(ut.attr("menu"));return l||(l=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:l,type:o,sortable:"false"!==i,filterable:"false"!==r,groupable:"false"!==a,menu:c,template:t.attr(ut.attr("template")),width:s.eq(n).css("width")}}),n=!(o.table.find("tbody tr").length>0&&(!l||!l.transport)),o.options.scrollable){if(r=t,i=I(t),t=z(t),i.length>0&&0===t.length)throw Error("There should be at least one non locked columns");G(o.element.find("tr:has(th):first").find("th:not(.k-group-cell)"),r),t=i.concat(t)}o.columns=c(t,n)},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(e,t,r,o){var a,s,l,c,d=this,u=wt({},ut.Template,d.options.templateSettings),h=t.length,p={storage:{},count:0},f=d._hasDetails(),g=[],m=d._groups();if(!e){for(e="<tr",r&&g.push("k-alt"),f&&g.push("k-master-row"),g.length&&(e+=' class="'+g.join(" ")+'"'),h&&(e+=" "+ut.attr("uid")+'="#='+ut.expr("uid",u.paramName)+'#"'),e+=" role='row'>",m>0&&!o&&(e+=n(m)),f&&(e+='<td class="k-hierarchy-cell"><a class="k-icon k-plus" href="\\#" tabindex="-1"></a></td>'),a=0;h>a;a++)l=t[a],s=l.template,c=typeof s,e+="<td"+i(l.attributes)+" role='gridcell'>",e+=d._cellTmpl(l,p),e+="</td>";e+="</tr>"}return e=ut.template(e,u),p.count>0?Tt(e,p.storage):e},_headerCellText:function(e){var t=this,n=wt({},ut.Template,t.options.templateSettings),i=e.headerTemplate,r=typeof i,o=e.title||e.field||"";return r===ln?o=ut.template(i,n)({}):r===cn&&(o=i),o},_cellTmpl:function(e,t){var n,i,r=this,o=wt({},ut.Template,r.options.templateSettings),a=e.template,s=o.paramName,l=e.field,c="",d=e.format,u=typeof a,h=e.values;if(e.command){if(xt(e.command)){for(n=0,i=e.command.length;i>n;n++)c+=r._createButton(e.command[n]);return c.replace(fn,"\\#")}return r._createButton(e.command).replace(fn,"\\#")}return u===ln?(t.storage["tmpl"+t.count]=a,c+="#=this.tmpl"+t.count+"("+s+")#",t.count++):u===cn?c+=a:h&&h.length&&yt(h[0])&&"value"in h[0]&&l?(c+="#var v ="+ut.stringify(q(h)).replace(fn,"\\#")+"#",c+="#var f = v[",o.useWithBlock||(c+=s+"."),c+=l+"]#",c+="${f != null ? f : ''}"):(c+=e.encoded?"#:":"#=",d&&(c+='kendo.format("'+d.replace(pn,"\\$1")+'",'),l?(l=ut.expr(l,s),c+=l+"==null?'':"+l):c+="''",d&&(c+=")"),c+="#"),c},_templates:function(){var t=this,n=t.options,i=t.dataSource,r=i.group(),o=t.footer||t.wrapper.find(".k-grid-footer"),a=i.aggregate(),s=L(t.columns),l=L(I(t.columns)),c=n.scrollable?L(z(t.columns)):s;if(n.scrollable&&l.length){if(n.rowTemplate||n.altRowTemplate)throw Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(n.rowTemplate,c,!1,!0),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,c,!0,!0),t.lockedRowTemplate=t._tmpl(n.rowTemplate,l),t.lockedAltRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,l,!0)}else t.rowTemplate=t._tmpl(n.rowTemplate,c),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,c,!0);
t._hasDetails()&&(t.detailTemplate=t._detailTmpl(n.detailTemplate||"")),(t._group&&!At(a)||!At(a)&&!o.length||kt(s,function(e){return e.footerTemplate}).length)&&(t.footerTemplate=t._footerTmpl(s,a,"footerTemplate","k-footer-template")),r&&kt(s,function(e){return e.groupFooterTemplate}).length&&(a=e.map(r,function(e){return e.aggregates}),t.groupFooterTemplate=t._footerTmpl(c,a,"groupFooterTemplate","k-group-footer",l.length),n.scrollable&&l.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(l,a,"groupFooterTemplate","k-group-footer")))},_footerTmpl:function(e,t,r,a,s){var l,c,d,u,h,p=this,f=wt({},ut.Template,p.options.templateSettings),g=f.paramName,m="",v={},_=0,y={},w=p._groups(),b=o(t);for(m+='<tr class="'+a+'">',w>0&&!s&&(m+=n(w)),p._hasDetails()&&(m+='<td class="k-hierarchy-cell">&nbsp;</td>'),l=0,c=e.length;c>l;l++)h=e[l],d=h[r],u=typeof d,m+="<td"+i(h.footerAttributes)+">",d?(u!==ln&&(y=b[h.field]?wt({},f,{paramName:g+"['"+h.field+"']"}):{},d=ut.template(d,y)),v["tmpl"+_]=d,m+="#=this.tmpl"+_+"("+g+")#",_++):m+="&nbsp;",m+="</td>";return m+="</tr>",m=ut.template(m,f),_>0?Tt(m,v):m},_detailTmpl:function(e){var t=this,i="",r=wt({},ut.Template,t.options.templateSettings),o=r.paramName,a={},s=0,l=t._groups(),c=f(L(t.columns)).length,d=typeof e;return i+='<tr class="k-detail-row">',l>0&&(i+=n(l)),i+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(c?' colspan="'+c+'"':"")+">",d===ln?(a["tmpl"+s]=e,i+="#=this.tmpl"+s+"("+o+")#",s++):i+=e,i+="</td></tr>",i=ut.template(i,r),s>0?Tt(i,a):i},_hasDetails:function(){var e=this;return null!==e.options.detailTemplate||(e._events[Ut]||[]).length},_hasFilterRow:function(){var t=this.options.filterable,n=t&&typeof t.mode==cn&&-1!=t.mode.indexOf("row"),i=this.columns,r=e.grep(i,function(e){return e.filterable===!1});return i.length&&r.length==i.length&&(n=!1),n},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&I(t.columns).length)throw Error("Having both detail template and locked columns is not supported");t.table.on(on+Ot,".k-hierarchy-cell .k-plus, .k-hierarchy-cell .k-minus",function(n){var i,r,o=e(this),a=o.hasClass("k-plus"),s=o.closest("tr.k-master-row"),l=t.detailTemplate,c=t._hasDetails();return o.toggleClass("k-plus",!a).toggleClass("k-minus",a),i=s.next(),c&&!i.hasClass("k-detail-row")&&(r=t.dataItem(s),i=e(l(r)).addClass(s.hasClass("k-alt")?"k-alt":"").insertAfter(s),t.angular("compile",function(){return{elements:i.get(),data:[{dataItem:r}]}}),t.trigger(Ut,{masterRow:s,detailRow:i,data:r,detailCell:i.find(".k-detail-cell")})),t.trigger(a?Qt:Xt,{masterRow:s,detailRow:i}),i.toggle(a),t._current&&t._current.attr("aria-expanded",a),n.preventDefault(),!1})},dataItem:function(t){if(t=e(t)[0],!t)return null;var n,i,r=this.tbody.children(),o=/k-grouping-row|k-detail-row|k-group-footer/,a=t.sectionRowIndex;for(i=a,n=0;a>n;n++)o.test(r[n].className)&&i--;return this._data[i]},expandRow:function(t){e(t).find("> td .k-plus, > td .k-i-expand").click()},collapseRow:function(t){e(t).find("> td .k-minus, > td .k-i-collapse").click()},_createHeaderCells:function(e,n){var r,o,a,s,l,c=this,d="",u=L(c.columns);for(r=0,s=e.length;s>r;r++)o=e[r].column||e[r],a=c._headerCellText(o),l=Ct(o,u),o.command?(d+="<th"+i(o.headerAttributes),n&&!e[r].colSpan&&(d+=" rowspan='"+n+"'"),l>-1&&(d+=ut.attr("index")+"='"+l+"'"),d+=">"+a+"</th>"):(d+="<th role='columnheader' "+ut.attr("field")+"='"+(o.field||"")+"' ",n&&!e[r].colSpan&&(d+=" rowspan='"+n+"'"),e[r].colSpan>1&&(d+='colspan="'+(e[r].colSpan-T(o.columns))+'" ',d+=ut.attr("colspan")+"='"+e[r].colSpan+"'"),o.title&&(d+=ut.attr("title")+'="'+o.title.replace(/'/g,"'")+'" '),o.groupable!==t&&(d+=ut.attr("groupable")+"='"+o.groupable+"' "),o.aggregates&&o.aggregates.length&&(d+=ut.attr("aggregates")+"='"+o.aggregates+"'"),l>-1&&(d+=ut.attr("index")+"='"+l+"'"),d+=i(o.headerAttributes),d+=">"+a+"</th>");return d},_appendLockedColumnContent:function(){var t,n,i,r,o,a=this.columns,s=this.table.find("colgroup"),l=s.find("col:not(.k-group-col,.k-hierarchy-col)"),c=e(),d=0,u=0;for(t=0,n=a.length;n>t;t++)if(a[t].locked)if(p(a[t])){for(r=1,a[t].columns&&(r=L(a[t].columns).length-T(a[t].columns)),r=r||1,o=0;r>o;o++)c=c.add(l.eq(t+u+o-d));u+=r-1}else d++;i=e('<div class="k-grid-content-locked"><table'+(bn?' cellspacing="0"':"")+"><colgroup/><tbody></tbody></table></div>"),s.detach(),i.find("colgroup").append(c),s.insertBefore(this.table.find("tbody")),this.lockedContent=i.insertBefore(this.content),this.lockedTable=i.children("table")},_appendLockedColumnFooter:function(){var t,n,i=this,r=i.footer,o=r.find(".k-footer-template>td"),a=r.find(".k-grid-footer-wrap>table>colgroup>col"),s=e('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>'),l=i._groups(),c=e(),d=e();for(c=c.add(o.filter(".k-group-cell")),t=0,n=L(I(i.columns)).length;n>t;t++)c=c.add(o.eq(t+l));for(d=d.add(a.filter(".k-group-col")),t=0,n=L(R(i.columns)).length;n>t;t++)d=d.add(a.eq(t+l));c.appendTo(s.find("tr")),d.appendTo(s.find("colgroup")),i.lockedFooter=s.prependTo(r)},_appendLockedColumnHeader:function(t){var n,i,r,o,a,s,l,c,d,u,h,f=this,m=this.columns,v=[],_=0,y=e(),w=f._hasFilterRow(),b=0,k=e(),x=0,C=e(),S=f.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)"),D=f.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)"),E=f.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)"),I=0;for(n=0,r=m.length;r>n;n++){if(m[n].locked){if(l=D.eq(n),x=L(m[n].columns||[]).length,p(m[n])){for(m[n].columns&&(c=x-T(m[n].columns)),c=c||1,d=0;c>d;d++)y=y.add(S.eq(n+I+d-_));I+=c-1}for(P([m[n]],N(l),v,0,0),x=x||1,u=0;x>u;u++)k=k.add(E.eq(b+u));b+=x}m[n].columns&&(_+=T(m[n].columns)),p(m[n])||_++}if(v.length){for(i='<div class="k-grid-header-locked" style="width:1px"><table'+(bn?' cellspacing="0"':"")+"><colgroup/><thead>",i+=Array(v.length+1).join("<tr></tr>"),i+=(w?'<tr class="k-filter-row" />':"")+"</thead></table></div>",s=e(i),S=s.find("colgroup"),S.append(f.thead.prev().find("col.k-group-col").add(y)),o=s.find("thead tr:not(.k-filter-row)"),n=0,r=v.length;r>n;n++)C=g(v[n]),o.eq(n).append(f.thead.find("tr:eq("+n+") .k-group-cell").add(C));h=M(this.thead),h>v.length&&A(s,h),a=s.find(".k-filter-row"),a.append(f.thead.find(".k-filter-row .k-group-cell").add(k)),this.lockedHeader=s.prependTo(t),this._syncLockedHeaderHeight()}},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);ut.destroy(e),e.off(Ot).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,n,i,r,o=this,a=o.columns,s=o._hasDetails()&&a.length,l=o._hasFilterRow(),c="",d=o.table.find(">thead"),u=o.element.find("thead:first").length>0;if(d.length||(d=e("<thead/>").insertBefore(o.tbody)),o.lockedHeader&&o.thead?(n=o.thead.find("tr:has(th):not(.k-filter-row)").html(""),o._removeLockedContainers()):n=o.element.find(u?"thead:first tr:has(th):not(.k-filter-row)":"tr:has(th):first"),!n.length&&(n=d.children().first(),!n.length)){for(i=[{rowSpan:1,cells:[],index:0}],o._prepareColumns(i,a),t=0;i.length>t;t++)c+="<tr>",s&&(c+='<th class="k-hierarchy-cell">&nbsp;</th>'),c+=o._createHeaderCells(i[t].cells,i[t].rowSpan),c+="</tr>";n=e(c)}l&&(r=e("<tr/>"),r.addClass("k-filter-row"),s&&r.prepend('<th class="k-hierarchy-cell">&nbsp;</th>'),d.append(r)),n.children().length?s&&!n.find(".k-hierarchy-cell")[0]&&n.prepend('<th class="k-hierarchy-cell">&nbsp;</th>'):(c="",s&&(c+='<th class="k-hierarchy-cell">&nbsp;</th>'),c+=o._createHeaderCells(a),n.html(c)),n.attr("role","row").find("th").addClass("k-header"),o.options.scrollable||d.addClass("k-grid-header"),n.find("script").remove().end().prependTo(d),o.thead&&o._destroyColumnAttachments(),this.angular("cleanup",function(){return{elements:d.find("th").get()}}),this.angular("compile",function(){return{elements:d.find("th").get(),data:bt(a,function(e){return{column:e}})}}),o.thead=d.attr("role","rowgroup"),o._sortable(),o._filterable(),o._filterRow(),o._scrollable(),o._updateCols(),o._columnMenu(),this.options.scrollable&&I(this.columns).length&&(o._appendLockedColumnHeader(o.thead.closest(".k-grid-header")),o._appendLockedColumnContent(),o.lockedContent.bind("DOMMouseScroll"+Ot+" mousewheel"+Ot,Tt(o._wheelScroll,o)),o._applyLockedContainersWidth()),o._updateFirstColumnClass(),o._resizable(),o._draggable(),o._reorderable(),o.groupable&&o._attachGroupable()},_updateFirstColumnClass:function(){var t,n,i=this,r=i.columns||[],o=i._hasDetails()&&r.length;o||i._groups()||(t=e(),n=i.thead.find(">tr:not(.k-filter-row):not(:first)"),r=z(r),n.length&&r[0]&&!r[0].columns&&(t=t.add(n)),i._isLocked()&&(n=i.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),r=I(i.columns),n.length&&r[0]&&!r[0].columns&&(t=t.add(n))),t.each(function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")}))},_prepareColumns:function(e,t,n,i){var r,o,a=i||e[e.length-1],s=e[a.index+1],l=0;for(r=0;t.length>r;r++)o={column:t[r],colSpan:0},a.cells.push(o),t[r].columns&&t[r].columns.length&&(s||(s={rowSpan:0,cells:[],index:e.length},e.push(s)),o.colSpan=t[r].columns.length,this._prepareColumns(e,t[r].columns,o,s),l+=o.colSpan-1,a.rowSpan=e.length-a.index);n&&(n.colSpan+=l)},_wheelScroll:function(t){var n,i,r;t.ctrlKey||(n=this.content,this.options.scrollable.virtual&&(n=this.virtualScrollable.verticalScrollbar),i=n.scrollTop(),r=ut.wheelDeltaY(t),r&&(t.preventDefault(),e(t.currentTarget).one("wheel"+Ot,!1),n.scrollTop(i+-r)))},_isLocked:function(){return null!=this.lockedHeader},_updateCols:function(e){e=e||this.thead.parent().add(this.table),this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&(e=e||this.lockedHeader.find("table").add(this.lockedTable),j(e,B(R(this.columns)),this._hasDetails(),this._groups()))},_appendCols:function(e,t){t?j(e,B(F(this.columns)),this._hasDetails(),0):j(e,B(f(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,n=this;e=e.toJSON();for(t in e)n.columns.push({field:t});n._thead(),n._templates()}},_rowsHtml:function(e,t){var n,i,r=this,o="",a=t.rowTemplate,s=t.altRowTemplate;for(n=0,i=e.length;i>n;n++)o+=n%2?s(e[n]):a(e[n]),r._data.push(e[n]);return o},_groupRowHtml:function(e,t,n,i,r,o){var a,s,l=this,c="",d=e.field,u=kt(l.columns,function(e){return e.field==d})[0]||{},h=u.groupHeaderTemplate,p=(u.title||d)+": "+$(e.value,u.format,u.values),f=l._groupAggregatesDefaultObject||{},g=wt(f,e.aggregates),m=wt({},{field:e.field,value:e.value,aggregates:g},e.aggregates[e.field]),v=r.groupFooterTemplate,_=e.items;if(h&&(p=typeof h===ln?h(m):ut.template(h)(m)),c+=i(t,n,p),e.hasSubgroups)for(a=0,s=_.length;s>a;a++)c+=l._groupRowHtml(_[a],o?t:t-1,n+1,i,r,o);else c+=l._rowsHtml(_,r);return v&&(c+=v(g)),c},collapseGroup:function(t){t=e(t);var n,i,r,o,a,s=this.options.groupable,l=s.showFooter,c=l?0:1,d=e();for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?d=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(d=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),n=t.find(".k-group-cell").length,t.find(".k-icon").addClass("k-i-expand").removeClass("k-i-collapse"),t.find("td:first").attr("aria-expanded",!1),t=t.nextAll("tr"),r=0,o=t.length;o>r&&(a=t.eq(r),i=a.find(".k-group-cell").length,a.hasClass("k-grouping-row")?c++:a.hasClass("k-group-footer")&&c--,!(n>=i||a.hasClass("k-group-footer")&&0>c));r++)a.hide(),d.eq(r).hide()},expandGroup:function(t){t=e(t);var n,i,r,o,a,s=this,l=e(),c=1;for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?l=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(l=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),n=t.find(".k-group-cell").length,t.find(".k-icon").addClass("k-i-collapse").removeClass("k-i-expand"),t.find("td:first").attr("aria-expanded",!0),t=t.nextAll("tr"),o=0,a=t.length;a>o&&(i=t.eq(o),r=i.find(".k-group-cell").length,!(n>=r));o++)r!=n+1||i.hasClass("k-detail-row")||(i.show(),l.eq(o).show(),i.hasClass("k-grouping-row")&&i.find(".k-icon").hasClass("k-i-collapse")&&s.expandGroup(i),i.hasClass("k-master-row")&&i.find(".k-icon").hasClass("k-minus")&&(i.next().show(),l.eq(o+1).show())),i.hasClass("k-grouping-row")&&c++,i.hasClass("k-group-footer")&&(1==c?(i.show(),l.eq(o).show()):c--)},_updateHeader:function(t){var n=this,i=n._isLocked()?n.lockedHeader.find("thead"):n.thead,r=i.find("tr.k-filter-row").find("th.k-group-cell").length,o=i.find("tr:first").find("th.k-group-cell").length,a=i.children("tr:not(:first)").filter(function(){return!e(this).children(":visible").length});t>o?(e(Array(t-o+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(i.children("tr:not(.k-filter-row)")),n.element.is(":visible")&&a.find("th.k-group-cell").hide()):o>t&&i.find("tr").each(function(){e(this).find("th.k-group-cell").filter(":eq("+t+"),:gt("+t+")").remove()}),t>r&&e(Array(t-r+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(i.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,n=this;n._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",n.wrapper).add(n.thead.parent()).add(n.table),n._footerWidth=J(t.eq(0)),t.width(n._footerWidth),t=e(">.k-grid-footer>.k-grid-footer-locked>table",n.wrapper).add(n.lockedHeader.find(">table")).add(n.lockedTable),t.width(J(t.eq(0))))},hideColumn:function(n){var i,r,o,a,l,c,d,u,g,m,v=this,_=0,y=v.footer||v.wrapper.find(".k-grid-footer"),w=v.columns,b=v.lockedHeader?O(v.lockedHeader.find(">table>thead")).filter(":visible").length:0;if(n="number"==typeof n?w[n]:yt(n)?kt(S(w),function(e){return e===n})[0]:kt(S(w),function(e){return e.field===n})[0],n&&p(n)){if(n.columns&&n.columns.length){for(c=x(n,w),h(n,!1),Y(s(e(">table>thead",v.lockedHeader),v.thead,">tr:eq("+c.row+")>th"),c.cell,!1),o=0;n.columns.length>o;o++)this.hideColumn(n.columns[o]);return v.trigger(qt,{column:n}),t}if(g=Ct(n,f(L(w))),h(n,!1),v._setParentsVisibility(n,!1),v._templates(),v._updateCols(),v._updateLockedCols(),m=v.thead,d=g,v.lockedHeader&&b>g?m=v.lockedHeader.find(">table>thead"):d-=b,i=O(m).filter(":visible").eq(d),i[0].style.display="none",Y(s(e(">table>thead",v.lockedHeader),v.thead,">tr.k-filter-row>th"),g,!1),y[0]&&(v._updateCols(y.find(">.k-grid-footer-wrap>table")),v._updateLockedCols(y.find(">.k-grid-footer-locked>table")),Y(y.find(".k-footer-template>td"),g,!1)),v.lockedTable&&b>g?K(v.lockedTable.find(">tbody>tr"),g):K(v.tbody.children(),g-b),v.lockedTable)v._updateTablesWidth(),v._applyLockedContainersWidth(),v._syncLockedContentHeight(),v._syncLockedHeaderHeight(),v._syncLockedFooterHeight();else{for(a=v.thead.prev().find("col"),o=0,u=a.length;u>o;o+=1){if(l=a[o].style.width,!l||-1!=l.indexOf("%")){_=0;break}_+=parseInt(l,10)}r=e(">.k-grid-header table:first,>.k-grid-footer table:first",v.wrapper).add(v.table),v._footerWidth=null,_&&(r.width(_),v._footerWidth=_),wn.msie&&8==wn.version&&(r.css("display","inline-table"),setTimeout(function(){r.css("display","table")},1))}v._updateFirstColumnClass(),v.trigger(qt,{column:n})}},_setParentsVisibility:function(t,n){var i,r,o,a,l,c=this.columns,d=[],p=n?function(e){return f(e.columns).length&&e.hidden}:function(e){return!f(e.columns).length&&!e.hidden};if(u(t,c,d)&&d.length)for(i=d.length-1;i>=0;i--)r=d[i],o=b(r,c),a=s(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+o.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(o.cell),p(r)&&(h(r,n),a[0].style.display=n?"":"none"),a.filter("["+ut.attr("colspan")+"]").length&&(l=parseInt(a.attr(ut.attr("colspan")),10),a[0].colSpan=l-T(r.columns)||1)},showColumn:function(n){var i,r,o,a,l,c,d,u,f,g,m,v=this,_=v.columns,y=v.footer||v.wrapper.find(".k-grid-footer"),w=v.lockedHeader?O(v.lockedHeader.find(">table>thead")).length:0;if(n="number"==typeof n?_[n]:yt(n)?kt(S(_),function(e){return e===n})[0]:kt(S(_),function(e){return e.field===n})[0],n&&!p(n)){if(n.columns&&n.columns.length){for(d=x(n,_),h(n,!0),Y(s(e(">table>thead",v.lockedHeader),v.thead,">tr:eq("+d.row+")>th"),d.cell,!0),i=0;n.columns.length>i;i++)this.showColumn(n.columns[i]);return v.trigger($t,{column:n}),t}if(g=Ct(n,L(_)),h(n,!0),v._setParentsVisibility(n,!0),v._templates(),v._updateCols(),v._updateLockedCols(),m=v.thead,c=g,v.lockedHeader&&w>g?m=v.lockedHeader.find(">table>thead"):c-=w,o=O(m).eq(c),o[0].style.display="",Y(s(e(">table>thead",v.lockedHeader),v.thead,">tr.k-filter-row>th"),g,!0),y[0]&&(v._updateCols(y.find(">.k-grid-footer-wrap>table")),v._updateLockedCols(y.find(">.k-grid-footer-locked>table")),Y(y.find(".k-footer-template>td"),g,!0)),v.lockedTable&&w>g?Q(v.lockedTable.find(">tbody>tr"),g):Q(v.tbody.children(),g-w),v.lockedTable)v._updateTablesWidth(),v._applyLockedContainersWidth(),v._syncLockedContentHeight(),v._syncLockedHeaderHeight();else if(a=e(">.k-grid-header table:first,>.k-grid-footer table:first",v.wrapper).add(v.table),n.width){for(l=0,f=v.thead.prev().find("col"),i=0,r=f.length;r>i;i+=1){if(u=f[i].style.width,u.indexOf("%")>-1){l=0;break}l+=parseInt(u,10)}v._footerWidth=null,l&&(a.width(l),v._footerWidth=l)}else a.width("");v._updateFirstColumnClass(),v.trigger($t,{column:n})}},_progress:function(e){var t=this.element;this.lockedContent?t=this.wrapper:this.element.is("table")?t=this.element.parent():this.content&&this.content.length&&(t=this.content),ut.ui.progress(t,e)},_resize:function(){this.content&&(this._setContentHeight(),this._setContentWidth())},_isActiveInTable:function(){var t=mt();return this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t))},refresh:function(t){var n,i=this,r=i.dataSource.view(),o=i.options.navigatable,a=e(i.current()),s=!1,l=(i.dataSource.group()||[]).length,c=l+B(f(i.columns)).length;t&&"itemchange"===t.action&&i.editable||(t=t||{},i.trigger("dataBinding",{action:t.action||"rebind",index:t.index,items:t.items})||(i._angularItems("cleanup"),o&&(i._isActiveInTable()||i._editContainer&&i._editContainer.data("kendoWindow"))&&(s=a.is("th"),n=0,s&&(n=i.thead.find("th:not(.k-group-cell)").index(a))),i._destroyEditable(),i._progress(!1),i._hideResizeHandle(),i._data=[],i.columns.length||(i._autoColumns(i._firstDataItem(r[0],l)),c=l+i.columns.length),i._group=l>0||i._group,i._group&&(i._templates(),i._updateCols(),i._updateLockedCols(),i._updateHeader(l),i._group=l>0),i._renderContent(r,c,l),i._renderLockedContent(r,c,l),i._footer(),i._setContentHeight(),i._setContentWidth(),i.lockedTable&&(i.options.scrollable.virtual?i.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):i.content.trigger("scroll")),n>=0&&(i._removeCurrent(),i.current(s?i.thead.find("th:not(.k-group-cell)").eq(n):i.table.add(i.lockedTable).find(Bt).first()),i._current&&nt(i._current.closest("table")[0],!0)),i.touchScroller&&i.touchScroller.contentResized(),i.selectable&&i.selectable.resetTouchEvents(),i._angularItems("compile"),i.trigger(Kt)))},_renderContent:function(e,t,n){var i,r,a=this,s="",l=null!=a.lockedContent,c={rowTemplate:a.rowTemplate,altRowTemplate:a.altRowTemplate,groupFooterTemplate:a.groupFooterTemplate};if(t=l?t-B(R(a.columns)).length:t,n>0)for(t=l?t-n:t,a.detailTemplate&&t++,a.groupFooterTemplate&&(a._groupAggregatesDefaultObject=o(a.dataSource.aggregate())),i=0,r=e.length;r>i;i++)s+=a._groupRowHtml(e[i],t,0,l?dt:ct,c,l);else s+=a._rowsHtml(e,c);a.tbody=V(a.tbody,a.table,s)},_renderLockedContent:function(e,t,n){var i,r,o,a="",s={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate};if(this.lockedContent){if(o=this.lockedTable,n>0)for(t-=f(L(z(this.columns))).length,i=0,r=e.length;r>i;i++)a+=this._groupRowHtml(e[i],t,0,ct,s);else a=this._rowsHtml(e,s);V(o.children("tbody"),o,a),this._syncLockedContentHeight()}},_adjustRowsHeight:function(e,t){var n,i,r,o,a=e[0].rows,s=a.length,l=t[0].rows,c=e.add(t),d=c.length,u=[];for(n=0;s>n&&l[n];n++)a[n].style.height&&(a[n].style.height=l[n].style.height=""),i=a[n].offsetHeight,r=l[n].offsetHeight,o=0,i>r?o=i:r>i&&(o=r),u.push(o);for(n=0;d>n;n++)c[n].style.display="none";for(n=0;s>n;n++)u[n]&&(a[n].style.height=l[n].style.height=u[n]+"px");for(n=0;d>n;n++)c[n].style.display=""}});ut.ExcelMixin&&ut.ExcelMixin.extend(Sn.prototype),ut.PDFMixin&&ut.PDFMixin.extend(Sn.prototype),ht.plugin(Sn),ht.plugin(xn)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i="change",r="cancel",o="dataBound",a="dataBinding",s=n.ui.Widget,l=n.keys,c=">*",d="progress",u="error",h="k-state-focused",p="k-state-selected",f="k-edit-item",g="edit",m="remove",v="save",_="click",y=".kendoListView",w=e.proxy,b=n._activeElement,k=n.ui.progress,x=n.data.DataSource,C=n.ui.DataBoundWidget.extend({init:function(t,i){var r=this;i=e.isArray(i)?{dataSource:i}:i,s.fn.init.call(r,t,i),i=r.options,r.wrapper=t=r.element,t[0].id&&(r._itemId=t[0].id+"_lv_active"),r._element(),r._dataSource(),r._templates(),r._navigatable(),r._selectable(),r._pageable(),r._crudHandlers(),r.options.autoBind&&r.dataSource.fetch(),n.notify(r)},events:[i,r,a,o,g,m,v],options:{name:"ListView",autoBind:!0,selectable:!1,navigatable:!1,template:"",altTemplate:"",editTemplate:""},setOptions:function(e){s.fn.setOptions.call(this,e),this._templates()},_templates:function(){var e=this.options;this.template=n.template(e.template||""),this.altTemplate=n.template(e.altTemplate||e.template),this.editTemplate=n.template(e.editTemplate||"")},_item:function(e){return this.element.children()[e]()},items:function(){return this.element.children()},dataItem:function(t){var i=n.attr("uid"),r=e(t).closest("["+i+"]").attr(i);return this.dataSource.getByUid(r)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch()},_unbindDataSource:function(){var e=this;e.dataSource.unbind(i,e._refreshHandler).unbind(d,e._progressHandler).unbind(u,e._errorHandler)},_dataSource:function(){var e=this;e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._refreshHandler=w(e.refresh,e),e._progressHandler=w(e._progress,e),e._errorHandler=w(e._error,e)),e.dataSource=x.create(e.options.dataSource).bind(i,e._refreshHandler).bind(d,e._progressHandler).bind(u,e._errorHandler)},_progress:function(){k(this.element,!0)},_error:function(){k(this.element,!1)},_element:function(){this.element.addClass("k-widget k-listview").attr("role","listbox")},refresh:function(e){var i,r,s,l,c,d=this,u=d.dataSource.view(),h="",p=d.template,f=d.altTemplate,g=b();if(e=e||{},"itemchange"===e.action)return d._hasBindingTarget()||d.editable||(i=e.items[0],s=d.items().filter("["+n.attr("uid")+"="+i.uid+"]"),s.length>0&&(l=s.index(),d.angular("cleanup",function(){return{elements:[s]}}),s.replaceWith(p(i)),s=d.items().eq(l),s.attr(n.attr("uid"),i.uid),d.angular("compile",function(){return{elements:[s],data:[{dataItem:i}]}}),d.trigger("itemChange",{item:s,data:i}))),t;if(!d.trigger(a,{action:e.action||"rebind",items:e.items,index:e.index})){for(d._angularItems("cleanup"),d._destroyEditable(),l=0,c=u.length;c>l;l++)h+=l%2?f(u[l]):p(u[l]);for(d.element.html(h),r=d.items(),l=0,c=u.length;c>l;l++)r.eq(l).attr(n.attr("uid"),u[l].uid).attr("role","option").attr("aria-selected","false");d.element[0]===g&&d.options.navigatable&&d.current(r.eq(0)),d._angularItems("compile"),d.trigger(o)}},_pageable:function(){var t,i,r=this,o=r.options.pageable;e.isPlainObject(o)&&(i=o.pagerId,t=e.extend({},o,{dataSource:r.dataSource,pagerId:null}),r.pager=new n.ui.Pager(e("#"+i),t))},_selectable:function(){var e,r,o=this,a=o.options.selectable,s=o.options.navigatable;a&&(e=n.ui.Selectable.parseOptions(a).multiple,o.selectable=new n.ui.Selectable(o.element,{aria:!0,multiple:e,filter:c,change:function(){o.trigger(i)}}),s&&o.element.on("keydown"+y,function(n){if(n.keyCode===l.SPACEBAR){if(r=o.current(),n.target==n.currentTarget&&n.preventDefault(),e)if(n.ctrlKey){if(r&&r.hasClass(p))return r.removeClass(p),t}else o.selectable.clear();else o.selectable.clear();o.selectable.value(r)}}))},current:function(e){var n=this,i=n.element,r=n._current,o=n._itemId;return e===t?r:(r&&r[0]&&(r[0].id===o&&r.removeAttr("id"),r.removeClass(h),i.removeAttr("aria-activedescendant")),e&&e[0]&&(o=e[0].id||o,n._scrollTo(e[0]),i.attr("aria-activedescendant",o),e.addClass(h).attr("id",o)),n._current=e,t)},_scrollTo:function(t){var n,i,r=this,o=!1,a="scroll";"auto"==r.wrapper.css("overflow")||r.wrapper.css("overflow")==a?n=r.wrapper[0]:(n=window,o=!0),i=function(i,r){var s=o?e(t).offset()[i.toLowerCase()]:t["offset"+i],l=t["client"+r],c=e(n)[a+i](),d=e(n)[r.toLowerCase()]();s+l>c+d?e(n)[a+i](s+l-d):c>s&&e(n)[a+i](s)},i("Top","Height"),i("Left","Width")},_navigatable:function(){var t=this,i=t.options.navigatable,r=t.element,o=function(n){t.current(e(n.currentTarget)),e(n.target).is(":button,a,:input,a>.k-icon,textarea")||r.focus()};i&&(t._tabindex(),r.on("focus"+y,function(){var e=t._current;e&&e.is(":visible")||(e=t._item("first")),t.current(e)}).on("focusout"+y,function(){t._current&&t._current.removeClass(h)}).on("keydown"+y,function(i){var o,a,s=i.keyCode,c=t.current(),d=e(i.target),u=!d.is(":button,textarea,a,a>.t-icon,input"),h=d.is(":text"),p=n.preventDefault,g=r.find("."+f),m=b();if(!(!u&&!h&&l.ESC!=s||h&&l.ESC!=s&&l.ENTER!=s))if(l.UP===s||l.LEFT===s)c&&(c=c.prev()),t.current(c&&c[0]?c:t._item("last")),p(i);else if(l.DOWN===s||l.RIGHT===s)c&&(c=c.next()),t.current(c&&c[0]?c:t._item("first")),p(i);else if(l.PAGEUP===s)t.current(null),t.dataSource.page(t.dataSource.page()-1),p(i);else if(l.PAGEDOWN===s)t.current(null),t.dataSource.page(t.dataSource.page()+1),p(i);else if(l.HOME===s)t.current(t._item("first")),p(i);else if(l.END===s)t.current(t._item("last")),p(i);else if(l.ENTER===s)0!==g.length&&(u||h)?(o=t.items().index(g),m&&m.blur(),t.save(),a=function(){t.element.trigger("focus"),t.current(t.items().eq(o))},t.one("dataBound",a)):""!==t.options.editTemplate&&t.edit(c);else if(l.ESC===s){if(g=r.find("."+f),0===g.length)return;o=t.items().index(g),t.cancel(),t.element.trigger("focus"),t.current(t.items().eq(o))}}),r.on("mousedown"+y+" touchstart"+y,c,w(o,t)))},clearSelection:function(){var e=this;e.selectable.clear(),e.trigger(i)},select:function(n){var i=this,r=i.selectable;return n=e(n),n.length?(r.options.multiple||(r.clear(),n=n.first()),r.value(n),t):r.value()},_destroyEditable:function(){var e=this;e.editable&&(e.editable.destroy(),delete e.editable)},_modelFromElement:function(e){var t=e.attr(n.attr("uid"));return this.dataSource.getByUid(t)},_closeEditable:function(e){var t,i,r,o=this,a=o.editable,s=o.template,l=!0;return a&&(e&&(l=a.end()),l&&(a.element.index()%2&&(s=o.altTemplate),t=o._modelFromElement(a.element),o._destroyEditable(),r=a.element.index(),a.element.replaceWith(s(t)),i=o.items().eq(r),i.attr(n.attr("uid"),t.uid),o._hasBindingTarget()&&n.bind(i,t))),l},edit:function(e){var t,i,r=this,o=r._modelFromElement(e),a=o.uid;r.cancel(),e=r.items().filter("["+n.attr("uid")+"="+a+"]"),i=e.index(),e.replaceWith(r.editTemplate(o)),t=r.items().eq(i).addClass(f).attr(n.attr("uid"),o.uid),r.editable=t.kendoEditable({model:o,clearContainer:!1,errorTemplate:!1,target:r}).data("kendoEditable"),r.trigger(g,{model:o,item:t})},save:function(){var e,t=this,n=t.editable;n&&(n=n.element,e=t._modelFromElement(n),!t.trigger(v,{model:e,item:n})&&t._closeEditable(!0)&&t.dataSource.sync())},remove:function(e){var t=this,n=t.dataSource,i=t._modelFromElement(e);t.trigger(m,{model:i,item:e})||(e.hide(),n.remove(i),n.sync())},add:function(){var e=this,t=e.dataSource,n=t.indexOf((t.view()||[])[0]);0>n&&(n=0),e.cancel(),t.insert(n,{}),e.edit(e.element.children().first())},cancel:function(){var e,t,n=this,i=n.dataSource;n.editable&&(e=n.editable.element,t=n._modelFromElement(e),n.trigger(r,{model:t,container:e})||(i.cancelChanges(t),n._closeEditable(!1)))},_crudHandlers:function(){var t=this,i=_+y;t.element.on(i,".k-edit-button",function(i){var r=e(this).closest("["+n.attr("uid")+"]");t.edit(r),i.preventDefault()}),t.element.on(i,".k-delete-button",function(i){var r=e(this).closest("["+n.attr("uid")+"]");t.remove(r),i.preventDefault()}),t.element.on(i,".k-update-button",function(e){t.save(),e.preventDefault()}),t.element.on(i,".k-cancel-button",function(e){t.cancel(),e.preventDefault()})},destroy:function(){var e=this;s.fn.destroy.call(e),e._unbindDataSource(),e._destroyEditable(),e.element.off(y),e.pager&&e.pager.destroy(),n.destroy(e.element)}});n.ui.plugin(C)}(window.kendo.jQuery),function(e,t){function n(t){return e.map(i(t),function(e){return e.name}).join(", ")}function i(e){var t=e[0];return t.files?r(t.files):[{name:s(t.value),extension:a(t.value),size:null}]}function r(t){return e.map(t,function(e){return o(e)})}function o(e){var t=e.name||e.fileName;return{name:y.htmlEncode(t),extension:a(t),size:e.size||e.fileSize,rawFile:e}}function a(e){var t=e.match(k);return t?t[0]:""}function s(e){var t=e.lastIndexOf("\\");return-1!=t?e.substr(t+1):e}function l(t,n){var i=y.guid();return e.map(t,function(e){return e.uid=n?y.guid():i,e})}function c(t,n,i){var r,o;n._supportsRemove()&&(r=t.data("fileNames"),o=e.map(r,function(e){return e.name}),n._submitRemove(o,i,function(e,i,o){n._removeFileEntry(t),n.trigger(T,{operation:"remove",files:r,response:e,XMLHttpRequest:o})},function(e){n.trigger(D,{operation:"remove",files:r,XMLHttpRequest:e}),b("Server response: "+e.responseText)}))}function d(t,n,i){var r=!1,o="";try{o=e.parseJSON(u(t)),r=!0}catch(a){i()}r&&n(o)}function u(e){return(t===e||""===e)&&(e="{}"),e}function h(e){e.stopPropagation(),e.preventDefault()}function p(e,t,n,i){var r,o;e.on("dragenter"+t,function(){n(),o=new Date,r||(r=setInterval(function(){var e=new Date-o;e>100&&(i(),clearInterval(r),r=null)},100))}).on("dragover"+t,function(){o=new Date})}function f(e){return e.is(".k-file-progress, .k-file-success, .k-file-error")}function g(t){return e(t.target).closest(".k-file")}function m(){var n={},i=e("meta[name=csrf-token]").attr("content"),r=e("meta[name=csrf-param]").attr("content");return e("input[name^='__RequestVerificationToken']").each(function(){n[this.name]=this.value}),r!==t&&i!==t&&(n[r]=i),n}var v,_,y=window.kendo,w=y.ui.Widget,b=y.logToConsole,k=/\.([^\.]+)$/,x=".kendoUpload",C="select",S="upload",T="success",D="error",A="complete",E="cancel",M="progress",P="remove",I=w.extend({init:function(t,n){var i,r,o,a=this;w.fn.init.call(a,t,n),a.name=t.name,a.multiple=a.options.multiple,a.localization=a.options.localization,i=a.element,a.wrapper=i.closest(".k-upload"),0===a.wrapper.length&&(a.wrapper=a._wrapInput(i)),a._activeInput(i),a.toggle(a.options.enabled),r=a._ns=x+"-"+y.guid(),i.closest("form").on("submit"+r,e.proxy(a._onParentFormSubmit,a)).on("reset"+r,e.proxy(a._onParentFormReset,a)),a.options.async.saveUrl?(a._module=a._supportsFormData()?new _(a):new v(a),a._async=!0,o=a.options.files,o.length>0&&a._renderInitialFiles(o)):a._module=new z(a),a._supportsDrop()&&a._setupDropZone(),a.wrapper.on("click",".k-upload-action",e.proxy(a._onFileAction,a)).on("click",".k-upload-selected",e.proxy(a._onUploadSelected,a)),a.element.val()&&a._onInputChange({target:a.element})},events:[C,S,T,D,A,E,M,P],options:{name:"Upload",enabled:!0,multiple:!0,showFileList:!0,template:"",files:[],async:{removeVerb:"POST",autoUpload:!0,withCredentials:!0},localization:{select:"Select files...",cancel:"Cancel",retry:"Retry",remove:"Remove",uploadSelectedFiles:"Upload files",dropFilesHere:"drop files here to upload",statusUploading:"uploading",statusUploaded:"uploaded",statusWarning:"warning",statusFailed:"failed",headerStatusUploading:"Uploading...",headerStatusUploaded:"Done"}},setOptions:function(e){var t=this,n=t.element;w.fn.setOptions.call(t,e),t.multiple=t.options.multiple,n.attr("multiple",t._supportsMultiple()?t.multiple:!1),t.toggle(t.options.enabled)},enable:function(e){e=t===e?!0:e,this.toggle(e)
},disable:function(){this.toggle(!1)},toggle:function(e){e=t===e?e:!e,this.wrapper.toggleClass("k-state-disabled",e),this.element.prop("disabled",e)},destroy:function(){var t=this;e(document).add(e(".k-dropzone",t.wrapper)).add(t.wrapper.closest("form")).off(t._ns),e(t.element).off(x),w.fn.destroy.call(t)},_addInput:function(t){if(t[0].nodeType){var n=this,i=t.clone().val("");i.insertAfter(n.element).data("kendoUpload",n),e(n.element).hide().attr("tabindex","-1").removeAttr("id").off(x),n._activeInput(i),n.element.focus()}},_activeInput:function(t){var n=this,i=n.wrapper;n.element=t,t.attr("multiple",n._supportsMultiple()?n.multiple:!1).attr("autocomplete","off").on("click"+x,function(e){i.hasClass("k-state-disabled")&&e.preventDefault()}).on("focus"+x,function(){e(this).parent().addClass("k-state-focused")}).on("blur"+x,function(){e(this).parent().removeClass("k-state-focused")}).on("change"+x,e.proxy(n._onInputChange,n)).on("keydown"+x,e.proxy(n._onInputKeyDown,n))},_onInputKeyDown:function(e){var t=this,n=t.wrapper.find(".k-upload-action:first");e.keyCode===y.keys.TAB&&n.length>0&&(e.preventDefault(),n.focus())},_onInputChange:function(t){var n=this,i=e(t.target),r=l(n._inputFiles(i),n._isAsyncNonBatch()),o=n.trigger(C,{files:r});o?(n._addInput(i),i.remove()):n._module.onSelect({target:i},r)},_onDrop:function(t){var n,i=t.originalEvent.dataTransfer,o=this,a=i.files,s=l(r(a),o._isAsyncNonBatch());h(t),a.length>0&&(n=o.trigger(C,{files:s}),n||o._module.onSelect({target:e(".k-dropzone",o.wrapper)},s))},_isAsyncNonBatch:function(){return this._async&&!this.options.async.batch||!1},_renderInitialFiles:function(t){var n,i,r=this,o=0;for(t=l(t,!0),o=0;t.length>o;o++)n=t[o],i=r._enqueueFile(n.name,{fileNames:[n]}),i.addClass("k-file-success").data("files",[t[o]]),e(".k-progress",i).width("100%"),e(".k-upload-status",i).prepend("<span class='k-upload-pct'>100%</span>"),r._fileAction(i,P)},_prepareTemplateData:function(e,t){var n=t.fileNames,i={},r=0,o=0;for(o=0;n.length>o;o++)r+=n[o].size;return i.name=e,i.size=r,i.files=t.fileNames,i},_prepareDefaultFileEntryTemplate:function(t,n){var i="",r=e("<li class='k-file'><span class='k-progress'></span><span class='k-icon'></span><span class='k-filename' title='"+t+"'>"+t+"</span><strong class='k-upload-status'></strong></li>");return 1==n.fileNames.length&&n.fileNames[0].extension&&(i=n.fileNames[0].extension.substring(1),e(".k-icon",r).addClass("k-i-"+i)),r},_enqueueFile:function(t,n){var i,r,o,a=this,s=n.fileNames[0].uid,l=e(".k-upload-files",a.wrapper),c=a.options,d=c.template;return 0===l.length&&(l=e("<ul class='k-upload-files k-reset'></ul>").appendTo(a.wrapper),a.options.showFileList||l.hide(),a.wrapper.removeClass("k-upload-empty")),i=e(".k-file",l),d?(o=a._prepareTemplateData(t,n),d=y.template(d),r=e("<li class='k-file'>"+d(o)+"</li>"),r.find(".k-upload-action").addClass("k-button k-button-bare")):r=a._prepareDefaultFileEntryTemplate(t,n),r.attr(y.attr("uid"),s).appendTo(l).data(n),a._async||e(".k-progress",r).width("100%"),!a.multiple&&i.length>0&&a._module.onRemove({target:e(i,a.wrapper)}),r},_removeFileEntry:function(t){var n,i,r=this,o=t.closest(".k-upload-files");t.remove(),n=e(".k-file",o),i=e(".k-file-success, .k-file-error",o),i.length===n.length&&this._hideUploadButton(),0===n.length&&(o.remove(),r.wrapper.addClass("k-upload-empty"),r._hideHeaderUploadstatus())},_fileAction:function(e,t){var n={remove:"k-delete",cancel:"k-cancel",retry:"k-retry"},i={remove:"k-i-close",cancel:"k-i-close",retry:"k-i-refresh"};n.hasOwnProperty(t)&&(this._clearFileAction(e),this.options.template?e.find(".k-upload-action").addClass("k-button k-button-bare").append("<span class='k-icon "+i[t]+" "+n[t]+"' title='"+this.localization[t]+"'></span>").show():(e.find(".k-upload-status .k-upload-action").remove(),e.find(".k-upload-status").append(this._renderAction(n[t],this.localization[t],i[t]))))},_fileState:function(t,n){var i=this.localization,r={uploading:{text:i.statusUploading},uploaded:{text:i.statusUploaded},failed:{text:i.statusFailed}},o=r[n];o&&e(".k-icon:not(.k-delete, .k-cancel, .k-retry)",t).text(o.text)},_renderAction:function(t,n,i){return e(""!==t?"<button type='button' class='k-button k-button-bare k-upload-action'><span class='k-icon "+i+" "+t+"' title='"+n+"'></span></button>":"<button type='button' class='k-button'>"+n+"</button>")},_clearFileAction:function(t){e(".k-upload-action",t).empty().hide()},_onFileAction:function(t){var n,i,r,o,a=this;return a.wrapper.hasClass("k-state-disabled")||(n=e(t.target).closest(".k-upload-action"),i=n.find(".k-icon"),r=n.closest(".k-file"),o={files:r.data("fileNames")},i.hasClass("k-delete")?a.trigger(P,o)||a._module.onRemove({target:e(r,a.wrapper)},o.data):i.hasClass("k-cancel")?(a.trigger(E,o),a._module.onCancel({target:e(r,a.wrapper)}),this._checkAllComplete(),a._updateHeaderUploadStatus()):i.hasClass("k-retry")&&(e(".k-warning",r).remove(),a._module.onRetry({target:e(r,a.wrapper)}))),!1},_onUploadSelected:function(){var e=this,t=e.wrapper;return t.hasClass("k-state-disabled")||this._module.onSaveSelected(),!1},_onFileProgress:function(t,n){var i;this.options.template?e(".k-progress",t.target).width(n+"%"):(i=e(".k-upload-pct",t.target),0===i.length&&e(".k-upload-status",t.target).prepend("<span class='k-upload-pct'></span>"),e(".k-upload-pct",t.target).text(n+"%"),e(".k-progress",t.target).width(n+"%")),this.trigger(M,{files:g(t).data("fileNames"),percentComplete:n})},_onUploadSuccess:function(e,t,n){var i=g(e);this._fileState(i,"uploaded"),i.removeClass("k-file-progress").addClass("k-file-success"),this._updateHeaderUploadStatus(),this.trigger(T,{files:i.data("fileNames"),response:t,operation:"upload",XMLHttpRequest:n}),this._supportsRemove()?this._fileAction(i,P):this._clearFileAction(i),this._checkAllComplete()},_onUploadError:function(t,n){var i=g(t),r=e(".k-upload-pct",i);this._fileState(i,"failed"),i.removeClass("k-file-progress").addClass("k-file-error"),e(".k-progress",i).width("100%"),r.length>0?r.empty().removeClass("k-upload-pct").addClass("k-icon k-warning"):e(".k-upload-status",i).prepend("<span class='k-icon k-warning'></span>"),this._updateHeaderUploadStatus(),this._fileAction(i,"retry"),this.trigger(D,{operation:"upload",files:i.data("fileNames"),XMLHttpRequest:n}),b("Server response: "+n.responseText),this._checkAllComplete()},_showUploadButton:function(){var t=e(".k-upload-selected",this.wrapper);0===t.length&&(t=this._renderAction("",this.localization.uploadSelectedFiles).addClass("k-upload-selected")),this.wrapper.append(t)},_hideUploadButton:function(){e(".k-upload-selected",this.wrapper).remove()},_showHeaderUploadStatus:function(){var t=this.localization,n=e(".k-dropzone",this.wrapper),i=e(".k-upload-status-total",this.wrapper);0!==i.length&&i.remove(),i='<strong class="k-upload-status k-upload-status-total">'+t.headerStatusUploading+'<span class="k-icon k-loading">'+t.statusUploading+"</span></strong>",n.length>0?n.append(i):e(".k-upload-button",this.wrapper).after(i)},_updateHeaderUploadStatus:function(){var t,n,i,r=this,o=r.localization,a=e(".k-file",r.wrapper).not(".k-file-success, .k-file-error");0===a.length&&(t=e(".k-file.k-file-error",r.wrapper),n=e(".k-upload-status-total",r.wrapper),i=e(".k-icon",n).removeClass("k-loading").addClass(0!==t.length?"k-warning":"k-i-tick").text(0!==t.length?o.statusWarning:o.statusUploaded),n.text(r.localization.headerStatusUploaded).append(i))},_hideHeaderUploadstatus:function(){e(".k-upload-status-total",this.wrapper).remove()},_onParentFormSubmit:function(){var n,i=this,r=i.element;t!==this._module.onAbort&&this._module.onAbort(),r.value||(n=e(r),n.attr("disabled","disabled"),window.setTimeout(function(){n.removeAttr("disabled")},0))},_onParentFormReset:function(){e(".k-upload-files",this.wrapper).remove()},_supportsFormData:function(){return"undefined"!=typeof FormData},_supportsMultiple:function(){var e=this._userAgent().indexOf("Windows")>-1;return!(y.support.browser.opera||y.support.browser.safari&&e)},_supportsDrop:function(){var e=this._userAgent().toLowerCase(),t=/chrome/.test(e),n=!t&&/safari/.test(e),i=n&&/windows/.test(e);return!i&&this._supportsFormData()&&this.options.async.saveUrl},_userAgent:function(){return navigator.userAgent},_setupDropZone:function(){var t,n,i=this;e(".k-upload-button",this.wrapper).wrap("<div class='k-dropzone'></div>"),t=i._ns,n=e(".k-dropzone",i.wrapper).append(e("<em>"+i.localization.dropFilesHere+"</em>")).on("dragenter"+t,h).on("dragover"+t,function(e){e.preventDefault()}).on("drop"+t,e.proxy(this._onDrop,this)),p(n,t,function(){n.addClass("k-dropzone-hovered")},function(){n.removeClass("k-dropzone-hovered")}),p(e(document),t,function(){n.addClass("k-dropzone-active"),n.closest(".k-upload").removeClass("k-upload-empty")},function(){n.removeClass("k-dropzone-active"),0===e("li.k-file",n.closest(".k-upload")).length&&n.closest(".k-upload").addClass("k-upload-empty")})},_supportsRemove:function(){return!!this.options.async.removeUrl},_submitRemove:function(t,n,i,r){var o=this,a=o.options.async.removeField||"fileNames",s=e.extend(n,m());s[a]=t,jQuery.ajax({type:this.options.async.removeVerb,dataType:"json",dataFilter:u,url:this.options.async.removeUrl,traditional:!0,data:s,success:i,error:r})},_wrapInput:function(e){var t=this,n=t.options;return e.wrap("<div class='k-widget k-upload k-header'><div class='k-button k-upload-button'></div></div>"),n.async.saveUrl||e.closest(".k-upload").addClass("k-upload-sync"),e.closest(".k-upload").addClass("k-upload-empty"),e.closest(".k-button").append("<span>"+this.localization.select+"</span>"),e.closest(".k-upload")},_checkAllComplete:function(){0===e(".k-file.k-file-progress",this.wrapper).length&&this.trigger(A)},_inputFiles:function(e){return i(e)}}),z=function(e){this.name="syncUploadModule",this.element=e.wrapper,this.upload=e,this.element.closest("form").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data")};z.prototype={onSelect:function(t,i){var r,o=this.upload,a=e(t.target);o._addInput(a),r=o._enqueueFile(n(a),{relatedInput:a,fileNames:i}),o._fileAction(r,P)},onRemove:function(e){var t=g(e);t.data("relatedInput").remove(),this.upload._removeFileEntry(t)}},v=function(e){this.name="iframeUploadModule",this.element=e.wrapper,this.upload=e,this.iframes=[]},I._frameId=0,v.prototype={onSelect:function(t,n){var i=this.upload,r=e(t.target),o=this.prepareUpload(r,n);i.options.async.autoUpload?this.performUpload(o):(i._supportsRemove()&&this.upload._fileAction(o,P),i._showUploadButton())},prepareUpload:function(t,i){var r,o,a,s=this.upload,l=e(s.element),c=s.options.async.saveField||t.attr("name");return s._addInput(t),t.attr("name",c),r=this.createFrame(s.name+"_"+I._frameId++),this.registerFrame(r),o=this.createForm(s.options.async.saveUrl,r.attr("name")).append(l),a=s._enqueueFile(n(t),{frame:r,relatedInput:l,fileNames:i}),r.data({form:o,file:a}),a},performUpload:function(t){var n,i,r,o={files:t.data("fileNames")},a=t.data("frame"),s=this.upload;if(s.trigger(S,o))s._removeFileEntry(a.data("file")),this.cleanupFrame(a),this.unregisterFrame(a);else{s._hideUploadButton(),s._showHeaderUploadStatus(),a.appendTo(document.body),n=a.data("form").attr("action",s.options.async.saveUrl).appendTo(document.body),o.data=e.extend({},o.data,m());for(i in o.data)r=n.find("input[name='"+i+"']"),0===r.length&&(r=e("<input>",{type:"hidden",name:i}).prependTo(n)),r.val(o.data[i]);s._fileAction(t,E),s._fileState(t,"uploading"),e(t).removeClass("k-file-error").addClass("k-file-progress"),a.one("load",e.proxy(this.onIframeLoad,this)),n[0].submit()}},onSaveSelected:function(){var t=this;e(".k-file",this.element).each(function(){var n=e(this),i=f(n);i||t.performUpload(n)})},onIframeLoad:function(t){var n,i=e(t.target);try{n=i.contents().text()}catch(r){n="Error trying to get server response: "+r}this.processResponse(i,n)},processResponse:function(t,n){var i=t.data("file"),r=this,o={responseText:n};d(n,function(n){e.extend(o,{statusText:"OK",status:"200"}),r.upload._onFileProgress({target:e(i,r.upload.wrapper)},100),r.upload._onUploadSuccess({target:e(i,r.upload.wrapper)},n,o),r.cleanupFrame(t),r.unregisterFrame(t)},function(){e.extend(o,{statusText:"error",status:"500"}),r.upload._onUploadError({target:e(i,r.upload.wrapper)},o)})},onCancel:function(t){var n=e(t.target).data("frame");this.stopFrameSubmit(n),this.cleanupFrame(n),this.unregisterFrame(n),this.upload._removeFileEntry(n.data("file"))},onRetry:function(e){var t=g(e);this.performUpload(t)},onRemove:function(e,t){var n=g(e),i=n.data("frame");i?(this.unregisterFrame(i),this.upload._removeFileEntry(n),this.cleanupFrame(i)):c(n,this.upload,t)},onAbort:function(){var t=this.element,n=this;e.each(this.iframes,function(){e("input",this.data("form")).appendTo(t),n.stopFrameSubmit(this[0]),this.data("form").remove(),this.remove()}),this.iframes=[]},createFrame:function(t){return e("<iframe name='"+t+"' id='"+t+"' style='display:none;' />")},createForm:function(t,n){return e("<form enctype='multipart/form-data' method='POST' action='"+t+"' target='"+n+"'/>")},stopFrameSubmit:function(e){t!==e.stop?e.stop():e.document&&e.document.execCommand("Stop")},registerFrame:function(e){this.iframes.push(e)},unregisterFrame:function(t){this.iframes=e.grep(this.iframes,function(e){return e.attr("name")!=t.attr("name")})},cleanupFrame:function(e){var t=e.data("form");e.data("file").data("frame",null),setTimeout(function(){t.remove(),e.remove()},1)}},_=function(e){this.name="formDataUploadModule",this.element=e.wrapper,this.upload=e},_.prototype={onSelect:function(t,n){var i=this.upload,r=this,o=e(t.target),a=this.prepareUpload(o,n);e.each(a,function(){i.options.async.autoUpload?r.performUpload(this):(i._supportsRemove()&&i._fileAction(this,P),i._showUploadButton())})},prepareUpload:function(t,n){var i=this.enqueueFiles(n);return t.is("input")&&(e.each(i,function(){e(this).data("relatedInput",t)}),t.data("relatedFileEntries",i),this.upload._addInput(t)),i},enqueueFiles:function(t){var n,i,r,o,a=this.upload,s=t.length,l=[];if(a.options.async.batch===!0)n=e.map(t,function(e){return e.name}).join(", "),o=a._enqueueFile(n,{fileNames:t}),o.data("files",t),l.push(o);else for(i=0;s>i;i++)r=t[i],n=r.name,o=a._enqueueFile(n,{fileNames:[r]}),o.data("files",[r]),l.push(o);return l},performUpload:function(t){var n,i=this.upload,r=this.createFormData(),o=this.createXHR(),a={files:t.data("fileNames"),XMLHttpRequest:o};if(i.trigger(S,a))this.removeFileEntry(t);else{i._fileAction(t,E),i._hideUploadButton(),i._showHeaderUploadStatus(),a.data=e.extend({},a.data,m());for(n in a.data)r.append(n,a.data[n]);this.populateFormData(r,t.data("files")),i._fileState(t,"uploading"),e(t).removeClass("k-file-error").addClass("k-file-progress"),this.postFormData(i.options.async.saveUrl,r,t,o)}},onSaveSelected:function(){var t=this;e(".k-file",this.element).each(function(){var n=e(this),i=f(n);i||t.performUpload(n)})},onCancel:function(e){var t=g(e);this.stopUploadRequest(t),this.removeFileEntry(t)},onRetry:function(e){var t=g(e);this.performUpload(t)},onRemove:function(e,t){var n=g(e);n.hasClass("k-file-success")?c(n,this.upload,t):this.removeFileEntry(n)},createXHR:function(){return new XMLHttpRequest},postFormData:function(e,t,n,i){var r=this;n.data("request",i),i.addEventListener("load",function(e){r.onRequestSuccess.call(r,e,n)},!1),i.addEventListener(D,function(e){r.onRequestError.call(r,e,n)},!1),i.upload.addEventListener("progress",function(e){r.onRequestProgress.call(r,e,n)},!1),i.open("POST",e,!0),i.withCredentials=this.upload.options.async.withCredentials,i.send(t)},createFormData:function(){return new FormData},populateFormData:function(e,t){var n,i=this.upload,r=t.length;for(n=0;r>n;n++)e.append(i.options.async.saveField||i.name,t[n].rawFile);return e},onRequestSuccess:function(t,n){function i(){o.upload._onUploadError({target:e(n,o.upload.wrapper)},r)}var r=t.target,o=this;r.status>=200&&299>=r.status?d(r.responseText,function(t){o.upload._onFileProgress({target:e(n,o.upload.wrapper)},100),o.upload._onUploadSuccess({target:e(n,o.upload.wrapper)},t,r),o.cleanupFileEntry(n)},i):i()},onRequestError:function(t,n){var i=t.target;this.upload._onUploadError({target:e(n,this.upload.wrapper)},i)},cleanupFileEntry:function(t){var n=t.data("relatedInput"),i=!0;n&&(e.each(n.data("relatedFileEntries")||[],function(){this.parent().length>0&&this[0]!=t[0]&&(i=i&&this.hasClass("k-file-success"))}),i&&n.remove())},removeFileEntry:function(e){this.cleanupFileEntry(e),this.upload._removeFileEntry(e)},onRequestProgress:function(t,n){var i=Math.round(100*t.loaded/t.total);this.upload._onFileProgress({target:e(n,this.upload.wrapper)},i)},stopUploadRequest:function(e){e.data("request").abort()}},y.ui.plugin(I)}(window.kendo.jQuery),function(e,t){function n(e,t,n){var i,r;e.on("dragenter"+x,function(){t(),r=new Date,i||(i=setInterval(function(){var e=new Date-r;e>100&&(n(),clearInterval(i),i=null)},100))}).on("dragover"+x,function(){r=new Date})}function i(e,n){return e!==t&&e.match(/\/$/)||(e=(e||"")+"/"),e+n}function r(e){if(!e)return"";var t=" bytes";return e>=1073741824?(t=" GB",e/=1073741824):e>=1048576?(t=" MB",e/=1048576):e>=1024&&(t=" KB",e/=1024),Math.round(100*e)/100+t}function o(e,t){var n=e[t];return h(n)?n.from||n.field||t:n}var a,s,l,c,d=window.kendo,u=d.ui.Widget,h=e.isPlainObject,p=e.proxy,f=e.extend,g=d.support.placeholder,m=d.support.browser,v=d.isFunction,_=/(^\/|\/$)/g,y="change",w="apply",b="error",k="click",x=".kendoFileBrowser",C=".kendoBreadcrumbs",S=".kendoSearchBox",T="name",D="size",A="type",E={field:A,dir:"asc"},M=d.template('<li class="k-tile-empty"><strong>${text}</strong></li>'),P='<div class="k-widget k-filebrowser-toolbar k-header k-floatwrap"><div class="k-toolbar-wrap"># if (showUpload) { # <div class="k-widget k-upload"><div class="k-button k-button-icontext k-upload-button"><span class="k-icon k-add"></span>#=messages.uploadFile#<input type="file" name="file" /></div></div># } ## if (showCreate) { #<button type="button" class="k-button k-button-icon"><span class="k-icon k-addfolder" /></button># } ## if (showDelete) { #<button type="button" class="k-button k-button-icon k-state-disabled"><span class="k-icon k-delete" /></button>&nbsp;# } #</div><div class="k-tiles-arrange"><label>#=messages.orderBy#: <select /></label></a></div></div>';f(!0,d.data,{schemas:{filebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}}),f(!0,d.data,{transports:{filebrowser:d.data.RemoteTransport.extend({init:function(t){d.data.RemoteTransport.fn.init.call(this,e.extend(!0,{},this.options,t))},_call:function(t,n){n.data=e.extend({},n.data,{path:this.options.path()}),v(this.options[t])?this.options[t].call(this,n):d.data.RemoteTransport.fn[t].call(this,n)},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}}),a=m.msie&&8>m.version?function(e){return e.offsetTop}:function(t){return t.offsetTop-e(t).height()},s=u.extend({init:function(e,t){var n=this;t=t||{},u.fn.init.call(n,e,t),n.element.addClass("k-filebrowser"),n.element.on(k+x,".k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-delete)",p(n._deleteClick,n)).on(k+x,".k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-addfolder)",p(n._addClick,n)).on("keydown"+x,"li.k-state-selected input",p(n._directoryKeyDown,n)).on("blur"+x,"li.k-state-selected input",p(n._directoryBlur,n)),n._dataSource(),n.refresh(),n.path(n.options.path)},options:{name:"FileBrowser",messages:{uploadFile:"Upload",orderBy:"Arrange by",orderByName:"Name",orderBySize:"Size",directoryNotFound:"A directory with this name was not found.",emptyFolder:"Empty Folder",deleteFile:'Are you sure you want to delete "{0}"?',invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',dropFilesHere:"drop file here to upload",search:"Search"},transport:{},path:"/",fileTypes:"*.*"},events:[b,y,w],destroy:function(){var e=this;u.fn.destroy.call(e),e.dataSource.unbind(b,e._errorHandler),e.element.add(e.list).add(e.toolbar).off(x),d.destroy(e.element)},value:function(){var e,n=this,r=n._selectedItem(),o=n.options.transport.fileUrl;return r&&"f"===r.get(A)?(e=i(n.path(),r.get(T)).replace(_,""),o&&(e=v(o)?o(e):d.format(o,encodeURIComponent(e))),e):t},_selectedItem:function(){var e=this.listView,n=e.select();return n.length?this.dataSource.getByUid(n.attr(d.attr("uid"))):t},_toolbar:function(){var t=this,n=d.template(P),i=t.options.messages,r=[{text:i.orderByName,value:"name"},{text:i.orderBySize,value:"size"}];t.toolbar=e(n({messages:i,showUpload:t.options.transport.uploadUrl,showCreate:t.options.transport.create,showDelete:t.options.transport.destroy})).appendTo(t.element).find(".k-upload input").kendoUpload({multiple:!1,localization:{dropFilesHere:i.dropFilesHere},async:{saveUrl:t.options.transport.uploadUrl,autoUpload:!0},upload:p(t._fileUpload,t),error:function(e){t._error({xhr:e.XMLHttpRequest,status:"error"})}}).end(),t.upload=t.toolbar.find(".k-upload input").data("kendoUpload"),t.arrangeBy=t.toolbar.find(".k-tiles-arrange select").kendoDropDownList({dataSource:r,dataTextField:"text",dataValueField:"value",change:function(){t.orderBy(this.value())}}).data("kendoDropDownList"),t._attachDropzoneEvents()},_attachDropzoneEvents:function(){var t=this;t.options.transport.uploadUrl&&(n(e(document.documentElement),e.proxy(t._dropEnter,t),e.proxy(t._dropLeave,t)),t._scrollHandler=p(t._positionDropzone,t))},_dropEnter:function(){this._positionDropzone(),e(document).on("scroll"+x,this._scrollHandler)},_dropLeave:function(){this._removeDropzone(),e(document).off("scroll"+x,this._scrollHandler)},_positionDropzone:function(){var e=this,t=e.element,n=t.offset();e.toolbar.find(".k-dropzone").addClass("k-filebrowser-dropzone").offset(n).css({width:t[0].clientWidth,height:t[0].clientHeight,lineHeight:t[0].clientHeight+"px"})},_removeDropzone:function(){this.toolbar.find(".k-dropzone").removeClass("k-filebrowser-dropzone").css({width:"",height:"",lineHeight:"",top:"",left:""})},_deleteClick:function(){var e=this,t=e.listView.select(),n=d.format(e.options.messages.deleteFile,t.find("strong").text());t.length&&e._showMessage(n,"confirm")&&e.listView.remove(t)},_addClick:function(){this.createDirectory()},_getFieldName:function(e){return o(this.dataSource.reader.model.fields,e)},_fileUpload:function(e){var t,n=this,i=n.options,r=i.fileTypes,o=RegExp(("("+r.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),a=e.files[0].name,s=T,l=D;o.test(a)?(e.data={path:n.path()},t=n._createFile(a),t?n.upload.one("success",function(e){t.set(s,e.response[n._getFieldName(s)]),t.set(l,e.response[n._getFieldName(l)]),n._tiles=n.listView.items().filter("["+d.attr("type")+"=f]")}):e.preventDefault()):(e.preventDefault(),n._showMessage(d.format(i.messages.invalidFileType,a,r)))},_findFile:function(e){var t,n,i,r=this.dataSource.data(),o=A,a=T;for(e=e.toLowerCase(),t=0,i=r.length;i>t;t++)if("f"===r[t].get(o)&&r[t].get(a).toLowerCase()===e){n=r[t];break}return n},_createFile:function(e){var t,n,i=this,r=0,o={},a=A,s=i.dataSource.view(),l=i._findFile(e);if(l&&!i._showMessage(d.format(i.options.messages.overwriteFile,e),"confirm"))return null;if(l)return l;for(t=0,n=s.length;n>t;t++)if("f"===s[t].get(a)){r=t;break}return o[a]="f",o[T]=e,o[D]=0,i.dataSource.insert(++r,o)},createDirectory:function(){var e,t,n=this,i=0,r=A,o=T,a=n.dataSource.data(),s=n._nameDirectory(),l=new n.dataSource.reader.model;for(e=0,t=a.length;t>e;e++)"d"===a[e].get(r)&&(i=e);l.set(r,"d"),l.set(o,s),n.listView.one("dataBound",function(){var e=n.listView.items().filter("["+d.attr("uid")+"="+l.uid+"]"),t=e.find("input");e.length&&this.edit(e),this.element.scrollTop(e.attr("offsetTop")-this.element[0].offsetHeight),setTimeout(function(){t.select()})}).one("save",function(e){var t=e.model.get(o);t?e.model.set(o,n._nameExists(t,l.uid)?n._nameDirectory():t):e.model.set(o,s)}),n.dataSource.insert(++i,l)},_directoryKeyDown:function(e){13==e.keyCode&&e.currentTarget.blur()},_directoryBlur:function(){this.listView.save()},_nameExists:function(e,t){var n,i,r=this.dataSource.data(),o=A,a=T;for(n=0,i=r.length;i>n;n++)if("d"===r[n].get(o)&&r[n].get(a).toLowerCase()===e.toLowerCase()&&r[n].uid!==t)return!0;return!1},_nameDirectory:function(){var t,n,i,r="New folder",o=this.dataSource.data(),a=[],s=A,l=T;for(n=0,i=o.length;i>n;n++)"d"===o[n].get(s)&&o[n].get(l).toLowerCase().indexOf(r.toLowerCase())>-1&&a.push(o[n].get(l));if(e.inArray(r,a)>-1){n=2;do t=r+" ("+n+")",n++;while(e.inArray(t,a)>-1);r=t}return r},orderBy:function(e){this.dataSource.sort([{field:A,dir:"asc"},{field:e,dir:"asc"}])},search:function(e){this.dataSource.filter({field:T,operator:"contains",value:e})},_content:function(){var t=this;t.list=e('<ul class="k-reset k-floats k-tiles" />').appendTo(t.element).on("dblclick"+x,"li",p(t._dblClick,t)),t.listView=new d.ui.ListView(t.list,{dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:!0,autoBind:!1,dataBinding:function(e){t.toolbar.find(".k-delete").parent().addClass("k-state-disabled"),("remove"===e.action||"sync"===e.action)&&e.preventDefault()},dataBound:function(){t.dataSource.view().length?t._tiles=this.items().filter("["+d.attr("type")+"=f]"):this.wrapper.append(M({text:t.options.messages.emptyFolder}))},change:p(t._listViewChange,t)})},_dblClick:function(t){var n,r=this,o=e(t.currentTarget);o.hasClass("k-edit-item")&&r._directoryBlur(),o.filter("["+d.attr("type")+"=d]").length?(n=r.dataSource.getByUid(o.attr(d.attr("uid"))),n&&(r.path(i(r.path(),n.get(T))),r.breadcrumbs.value(r.path()))):o.filter("["+d.attr("type")+"=f]").length&&r.trigger(w)},_listViewChange:function(){var e=this._selectedItem();e&&(this.toolbar.find(".k-delete").parent().removeClass("k-state-disabled"),"f"===e.get(A)&&this.trigger(y))},_dataSource:function(){var e,t=this,n=t.options,i=n.transport,r=f({},E),o={field:T,dir:"asc"},a={type:i.type||"filebrowser",sort:[r,o]};h(i)&&(i.path=p(t.path,t),a.transport=i),h(n.schema)?a.schema=n.schema:i.type&&h(d.data.schemas[i.type])&&(e=d.data.schemas[i.type]),t.dataSource&&t._errorHandler?t.dataSource.unbind(b,t._errorHandler):t._errorHandler=p(t._error,t),t.dataSource=d.data.DataSource.create(a).bind(b,t._errorHandler)},_navigation:function(){var t=this,n=e('<div class="k-floatwrap"><input/><input/></div>').appendTo(this.element);t.breadcrumbs=n.find("input:first").kendoBreadcrumbs({value:t.options.path,change:function(){t.path(this.value())}}).data("kendoBreadcrumbs"),t.searchBox=n.parent().find("input:last").kendoSearchBox({label:t.options.messages.search,change:function(){t.search(this.value())}}).data("kendoSearchBox")},_error:function(e){var t,n=this;n.trigger(b,e)||(t=e.xhr.status,"error"==e.status?"404"==t?n._showMessage(n.options.messages.directoryNotFound):"0"!=t&&n._showMessage("Error! The requested URL returned "+t+" - "+e.xhr.statusText):"timeout"==t&&n._showMessage("Error! Server timeout."))},_showMessage:function(e,t){return window[t||"alert"](e)},refresh:function(){var e=this;e._navigation(),e._toolbar(),e._content()},_editTmpl:function(){var e='<li class="k-tile k-state-selected" '+d.attr("uid")+'="#=uid#" ';return e+=d.attr("type")+'="${'+A+'}">',e+="#if("+A+' == "d") { #',e+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',e+="#}else{#",e+='<div class="k-thumb"><span class="k-icon k-loading"></span></div>',e+="#}#",e+="#if("+A+' == "d") { #',e+='<input class="k-input" '+d.attr("bind")+'="value:'+T+'"/>',e+="#}#",e+="</li>",p(d.template(e),{sizeFormatter:r})},_itemTmpl:function(){var e='<li class="k-tile" '+d.attr("uid")+'="#=uid#" ';return e+=d.attr("type")+'="${'+A+'}">',e+="#if("+A+' == "d") { #',e+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',e+="#}else{#",e+='<div class="k-thumb"><span class="k-icon k-file"></span></div>',e+="#}#",e+="<strong>${"+T+"}</strong>",e+="#if("+A+' == "f") { # <span class="k-filesize">${this.sizeFormatter('+D+")}</span> #}#",e+="</li>",p(d.template(e),{sizeFormatter:r})},path:function(e){var n=this,i=n._path||"";return e!==t?(n._path=e.replace(_,"")+"/",n.dataSource.read({path:n._path}),t):(i&&(i=i.replace(_,"")),"/"===i||""===i?"":i+"/")}}),l=u.extend({init:function(e,t){var n=this;t=t||{},u.fn.init.call(n,e,t),g&&n.element.attr("placeholder",n.options.label),n._wrapper(),n.element.on("keydown"+S,p(n._keydown,n)).on("change"+S,p(n._updateValue,n)),n.wrapper.on(k+S,"a",p(n._click,n)),g||n.element.on("focus"+S,p(n._focus,n)).on("blur"+S,p(n._blur,n))},options:{name:"SearchBox",label:"Search",value:""},events:[y],destroy:function(){var e=this;e.wrapper.add(e.element).add(e.label).off(S),u.fn.destroy.call(e)},_keydown:function(e){13===e.keyCode&&this._updateValue()},_click:function(e){e.preventDefault(),this._updateValue()},_updateValue:function(){var e=this,t=e.element.val();t!==e.value()&&(e.value(t),e.trigger(y))},_blur:function(){this._updateValue(),this._toggleLabel()},_toggleLabel:function(){g||this.label.toggle(!this.element.val())},_focus:function(){this.label.hide()},_wrapper:function(){var t=this.element,n=t.parents(".k-search-wrap");t[0].style.width="",t.addClass("k-input"),n.length||(n=t.wrap(e('<div class="k-widget k-search-wrap k-textbox"/>')).parent(),g||e('<label style="display:block">'+this.options.label+"</label>").insertBefore(t),e('<a href="#" class="k-icon k-i-search k-search"/>').appendTo(n)),this.wrapper=n,this.label=n.find(">label")},value:function(e){var n=this;return e!==t?(n.options.value=e,n.element.val(e),n._toggleLabel(),t):n.options.value}}),c=u.extend({init:function(e,t){var n=this;t=t||{},u.fn.init.call(n,e,t),n._wrapper(),n.wrapper.on("focus"+C,"input",p(n._focus,n)).on("blur"+C,"input",p(n._blur,n)).on("keydown"+C,"input",p(n._keydown,n)).on(k+C,"a.k-i-arrow-n:first",p(n._rootClick,n)).on(k+C,"a:not(.k-i-arrow-n)",p(n._click,n)),n.value(n.options.value)},options:{name:"Breadcrumbs",gap:50},events:[y],destroy:function(){var e=this;u.fn.destroy.call(e),e.wrapper.add(e.wrapper.find("input")).add(e.wrapper.find("a")).off(C)},_update:function(e){e="/"===(e||"").charAt(0)?e:"/"+(e||""),e!==this.value()&&(this.value(e),this.trigger(y))},_click:function(t){t.preventDefault(),this._update(this._path(e(t.target).prevAll("a:not(.k-i-arrow-n)").addBack()))},_rootClick:function(e){e.preventDefault(),this._update("")},_focus:function(){var e=this,t=e.element;e.overlay.hide(),e.element.val(e.value()),setTimeout(function(){t.select()})},_blur:function(){if(!this.overlay.is(":visible")){var e=this,t=e.element,n=t.val().replace(/\/{2,}/g,"/");e.overlay.show(),t.val(""),e._update(n)}},_keydown:function(e){var t=this;13===e.keyCode&&(t._blur(),setTimeout(function(){t.overlay.find("a:first").focus()}))},_wrapper:function(){var t,n=this.element,i=n.parents(".k-breadcrumbs");n[0].style.width="",n.addClass("k-input"),i.length||(i=n.wrap(e('<div class="k-widget k-breadcrumbs k-textbox"/>')).parent()),t=i.find(".k-breadcrumbs-wrap"),t.length||(t=e('<div class="k-breadcrumbs-wrap"/>').appendTo(i)),this.wrapper=i,this.overlay=t},refresh:function(){var n,i,r,o,a="",s=this.value();for(s!==t&&s.match(/^\//)||(s="/"+(s||"")),n=s.split("/"),r=0,o=n.length;o>r;r++)i=n[r],i&&(a||(a+='<a href="#" class="k-icon k-i-arrow-n">root</a>'),a+='<a class="k-link" href="#">'+n[r]+"</a>",a+='<span class="k-icon k-i-arrow-e">&gt;</span>');this.overlay.empty().append(e(a)),this._adjustSectionWidth()},_adjustSectionWidth:function(){var t,n=this,i=n.wrapper,r=i.width()-n.options.gap,o=n.overlay.find("a");o.each(function(n){t=e(this),t.parent().width()>r&&(n==o.length-1?t.width(r):t.prev().addBack().hide())})},value:function(e){return e!==t?(this._value=e.replace(/\/{2,}/g,"/"),this.refresh(),t):this._value
},_path:function(t){return"/"+e.map(t,function(t){return e(t).text()}).join("/")}}),d.ui.plugin(s),d.ui.plugin(c),d.ui.plugin(l)}(window.kendo.jQuery),function(e,t){function n(e,n){return e!==t&&e.match(/\/$/)||(e=(e||"")+"/"),e+n}function i(e){if(!e)return"";var t=" bytes";return e>=1073741824?(t=" GB",e/=1073741824):e>=1048576?(t=" MB",e/=1048576):e>=1024&&(t=" KB",e/=1024),Math.round(100*e)/100+t}var r,o,a=window.kendo,s=a.ui.FileBrowser,l=e.isPlainObject,c=e.proxy,d=e.extend,u=a.support.browser,h=a.isFunction,p=/(^\/|\/$)/g,f="error",g=".kendoImageBrowser",m="name",v="size",_="type",y={field:_,dir:"asc"},w=a.template('<li class="k-tile-empty"><strong>${text}</strong></li>');d(!0,a.data,{schemas:{imagebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}}),d(!0,a.data,{transports:{imagebrowser:a.data.RemoteTransport.extend({init:function(t){a.data.RemoteTransport.fn.init.call(this,e.extend(!0,{},this.options,t))},_call:function(t,n){n.data=e.extend({},n.data,{path:this.options.path()}),h(this.options[t])?this.options[t].call(this,n):a.data.RemoteTransport.fn[t].call(this,n)},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}}),r=u.msie&&8>u.version?function(e){return e.offsetTop}:function(t){return t.offsetTop-e(t).height()},o=s.extend({init:function(e,t){var n=this;t=t||{},s.fn.init.call(n,e,t),n.element.addClass("k-imagebrowser")},options:{name:"ImageBrowser",fileTypes:"*.png,*.gif,*.jpg,*.jpeg"},value:function(){var e,i=this,r=i._selectedItem(),o=i.options.transport.imageUrl;return r&&"f"===r.get(_)?(e=n(i.path(),r.get(m)).replace(p,""),o&&(e=h(o)?o(e):a.format(o,encodeURIComponent(e))),e):t},_fileUpload:function(e){var t,n=this,i=n.options,r=i.fileTypes,o=RegExp(("("+r.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),s=e.files[0].name,l=m,c=v;o.test(s)?(e.data={path:n.path()},t=n._createFile(s),t?(t._uploading=!0,n.upload.one("success",function(e){delete t._uploading,t.set(l,e.response[n._getFieldName(l)]),t.set(c,e.response[n._getFieldName(c)]),n._tiles=n.listView.items().filter("["+a.attr("type")+"=f]"),n._scroll()})):e.preventDefault()):(e.preventDefault(),n._showMessage(a.format(i.messages.invalidFileType,s,r)))},_content:function(){var t=this;t.list=e('<ul class="k-reset k-floats k-tiles" />').appendTo(t.element).on("scroll"+g,c(t._scroll,t)).on("dblclick"+g,"li",c(t._dblClick,t)),t.listView=new a.ui.ListView(t.list,{dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:!0,autoBind:!1,dataBinding:function(e){t.toolbar.find(".k-delete").parent().addClass("k-state-disabled"),("remove"===e.action||"sync"===e.action)&&e.preventDefault()},dataBound:function(){t.dataSource.view().length?(t._tiles=this.items().filter("["+a.attr("type")+"=f]"),t._scroll()):this.wrapper.append(w({text:t.options.messages.emptyFolder}))},change:c(t._listViewChange,t)})},_dataSource:function(){var e,t=this,n=t.options,i=n.transport,r=d({},y),o={field:m,dir:"asc"},s={type:i.type||"imagebrowser",sort:[r,o]};l(i)&&(i.path=c(t.path,t),s.transport=i),l(n.schema)?s.schema=n.schema:i.type&&l(a.data.schemas[i.type])&&(e=a.data.schemas[i.type]),t.dataSource&&t._errorHandler?t.dataSource.unbind(f,t._errorHandler):t._errorHandler=c(t._error,t),t.dataSource=a.data.DataSource.create(s).bind(f,t._errorHandler)},_loadImage:function(t){var n=this,i=e(t),r=n.dataSource.getByUid(i.attr(a.attr("uid"))),o=r.get(m),s=n.options.transport.thumbnailUrl,l=e("<img />",{alt:o}),c="?";r._uploading||(l.hide().on("load"+g,function(){e(this).prev().remove().end().addClass("k-image").fadeIn()}),i.find(".k-loading").after(l),h(s)?s=s(n.path(),encodeURIComponent(o)):(s.indexOf("?")>=0&&(c="&"),s=s+c+"path="+n.path()+encodeURIComponent(o)),l.attr("src",s),t.loaded=!0)},_scroll:function(){var e=this;e.options.transport&&e.options.transport.thumbnailUrl&&(clearTimeout(e._timeout),e._timeout=setTimeout(function(){var n=e.list.outerHeight(),i=e.list.scrollTop(),o=i+n;e._tiles.each(function(){var n=r(this),a=n+this.offsetHeight;return(n>=i&&o>n||a>=i&&o>a)&&e._loadImage(this),n>o?!1:t}),e._tiles=e._tiles.filter(function(){return!this.loaded})},250))},_itemTmpl:function(){var e=this,t='<li class="k-tile" '+a.attr("uid")+'="#=uid#" ';return t+=a.attr("type")+'="${'+_+'}">',t+="#if("+_+' == "d") { #',t+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',t+="#}else{#",t+=e.options.transport&&e.options.transport.thumbnailUrl?'<div class="k-thumb"><span class="k-icon k-loading"></span></div>':'<div class="k-thumb"><span class="k-icon k-file"></span></div>',t+="#}#",t+="<strong>${"+m+"}</strong>",t+="#if("+_+' == "f") { # <span class="k-filesize">${this.sizeFormatter('+v+")}</span> #}#",t+="</li>",c(a.template(t),{sizeFormatter:i})}}),a.ui.plugin(o)}(window.kendo.jQuery),function(e,t){var n,i,r,o,a=window.kendo,s=a.Class,l=a.ui.Widget,c=a.support.mobileOS,d=a.support.browser,u=e.extend,h=e.proxy,p=a.deepExtend,f=".kendoEditor",g=a.keys,m=s.extend({init:function(e){this.options=e},getHtml:function(){var e=this.options;return a.template(e.template,{useWithBlock:!1})(e)}}),v={editorWrapperTemplate:'<table cellspacing="4" cellpadding="0" class="k-widget k-editor k-header" role="presentation"><tbody><tr role="presentation"><td class="k-editor-toolbar-wrap" role="presentation"><ul class="k-editor-toolbar" role="toolbar" /></td></tr><tr><td class="k-editable-area" /></tr></tbody></table>',buttonTemplate:'<a href="" role="button" class="k-tool"#= data.popup ? " data-popup" : "" # unselectable="on" title="#= data.title #"><span unselectable="on" class="k-tool-icon #= data.cssClass #">#= data.title #</span></a>',colorPickerTemplate:'<div class="k-colorpicker #= data.cssClass #" />',comboBoxTemplate:'<select title="#= data.title #" class="#= data.cssClass #" />',dropDownListTemplate:'<span class="k-editor-dropdown"><select title="#= data.title #" class="#= data.cssClass #" /></span>',separatorTemplate:'<span class="k-separator" />',formatByName:function(t,n){for(var i=0;n.length>i;i++)if(e.inArray(t,n[i].tags)>=0)return n[i]},registerTool:function(e,t){var n=t.options;n&&n.template&&(n.template.options.cssClass="k-"+e),t.name||(t.options.name=e,t.name=e.toLowerCase()),b.defaultTools[e]=t},registerFormat:function(e,t){b.fn.options.formats[e]=t}},_={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyCenter:"Center text",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",insertUnorderedList:"Insert unordered list",insertOrderedList:"Insert ordered list",indent:"Indent",outdent:"Outdent",createLink:"Insert hyperlink",unlink:"Remove hyperlink",insertImage:"Insert image",insertFile:"Insert file",insertHtml:"Insert HTML",viewHtml:"View HTML",fontName:"Select font family",fontNameInherit:"(inherited font)",fontSize:"Select font size",fontSizeInherit:"(inherited size)",formatBlock:"Format",formatting:"Format",foreColor:"Color",backColor:"Background color",style:"Styles",emptyFolder:"Empty Folder",uploadFile:"Upload",orderBy:"Arrange by:",orderBySize:"Size",orderByName:"Name",invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',deleteFile:'Are you sure you want to delete "{0}"?',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',directoryNotFound:"A directory with this name was not found.",imageWebAddress:"Web address",imageAltText:"Alternate text",imageWidth:"Width (px)",imageHeight:"Height (px)",fileWebAddress:"Web address",fileTitle:"Title",linkWebAddress:"Web address",linkText:"Text",linkToolTip:"ToolTip",linkOpenInNewWindow:"Open link in new window",dialogUpdate:"Update",dialogInsert:"Insert",dialogCancel:"Cancel",createTable:"Create table",createTableHint:"Create a {0} x {1} table",addColumnLeft:"Add column on the left",addColumnRight:"Add column on the right",addRowAbove:"Add row above",addRowBelow:"Add row below",deleteRow:"Delete row",deleteColumn:"Delete column"},y=!c||c.ios&&c.flatVersion>=500||!c.ios&&t!==document.documentElement.contentEditable,w={basic:["bold","italic","underline"],alignment:["justifyLeft","justifyCenter","justifyRight"],lists:["insertUnorderedList","insertOrderedList"],indenting:["indent","outdent"],links:["createLink","unlink"],tables:["createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"]},b=l.extend({init:function(t,n){var i,r,o,s,c=this,d=a.ui.editor;y&&(l.fn.init.call(c,t,n),c.options=p({},c.options,n),t=c.element,s=d.Dom.name(t[0]),t.closest("form").on("submit"+f,function(){c.update()}),o=u({},c.options),o.editor=c,"textarea"==s?(c._wrapTextarea(),r=c.wrapper.find(".k-editor-toolbar"),t[0].id&&r.attr("aria-controls",t[0].id)):(c.element.attr("contenteditable",!0).addClass("k-widget k-editor k-editor-inline"),o.popup=!0,r=e('<ul class="k-editor-toolbar" role="toolbar" />').insertBefore(t)),c.toolbar=new d.Toolbar(r[0],o),c.toolbar.bindTo(c),"textarea"==s&&setTimeout(function(){var e=c.wrapper[0].style.height,t=parseInt(e,10),n=c.wrapper.height();e.indexOf("px")>0&&!isNaN(t)&&n>t&&c.wrapper.height(t-(n-t))}),c._initializeContentElement(c),c.keyboard=new d.Keyboard([new d.TypingHandler(c),new d.BackspaceHandler(c),new d.SystemHandler(c)]),c.clipboard=new d.Clipboard(this),c.undoRedoStack=new d.UndoRedoStack,i=n&&n.value?n.value:c.textarea?t.val().replace(/[\r\n\v\f\t ]+/gi," "):t[0].innerHTML,c.value(i),e(document).on("mousedown",h(c._endTyping,c)).on("mouseup",h(c._mouseup,c)),a.notify(c))},_endTyping:function(){var e=this.keyboard;try{e.isTypingInProgress()&&(e.endTyping(!0),this.saveSelection())}catch(t){}},_selectionChange:function(){d.msie||a.ui.editor.Dom.ensureTrailingBreaks(this.body),this._selectionStarted=!1,this.saveSelection(),this.trigger("select",{})},_wrapTextarea:function(){var t=this,n=t.element,i=n[0].style.width,r=n[0].style.height,o=v.editorWrapperTemplate,a=e(o).insertBefore(n).width(i).height(r),s=a.find(".k-editable-area");n.attr("autocomplete","off").appendTo(s).addClass("k-content k-raw-content").css("display","none"),t.textarea=n,t.wrapper=a},_createContentElement:function(t){var n,i,r,o=this,s=o.textarea,l=o.options.domain,c=l||document.domain,d="",u='javascript:""';return(l||c!=location.hostname)&&(d='<script>document.domain="'+c+'"</script>',u="javascript:document.write('"+d+"')"),s.hide(),n=e("<iframe />",{frameBorder:"0"})[0],e(n).css("display","").addClass("k-content").insertBefore(s),n.src=u,i=n.contentWindow||n,r=i.document||n.contentDocument,e(n).one("load",function(){o.toolbar.decorateFrom(r.body)}),r.open(),r.write("<!DOCTYPE html><html><head><meta charset='utf-8' /><style>html,body{padding:0;margin:0;height:100%;min-height:100%;}body{font-size:12px;font-family:Verdana,Geneva,sans-serif;padding-top:1px;margin-top:-1px;word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;"+(a.support.isRtl(s)?"direction:rtl;":"")+"}h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}p{margin:0 0 1em;padding:0 .2em}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}ul,ol{padding-left:2.5em}span{-ms-high-contrast-adjust:none;}a{color:#00a}code{font-size:1.23em}telerik\\3Ascript{display: none;}.k-table{table-layout:fixed;width:100%;border-spacing:0;margin: 0 0 1em;}.k-table td{min-width:1px;padding:.2em .3em;}.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}.k-table p{margin:0;padding:0;}</style>"+d+"<script>(function(d,c){d[c]('header'),d[c]('article'),d[c]('nav'),d[c]('section'),d[c]('footer');})(document, 'createElement');</script>"+e.map(t,function(e){return"<link rel='stylesheet' href='"+e+"'>"}).join("")+"</head><body autocorrect='off' contenteditable='true'></body></html>"),r.close(),i},_blur:function(){var e=this.textarea,t=e?e.val():this._oldValue,n=this.options.encoded?this.encodedValue():this.value();this.update(),e&&e.trigger("blur"),n!=t&&this.trigger("change")},_initializeContentElement:function(){var n,i,r=this;r.textarea?(r.window=r._createContentElement(r.options.stylesheets),n=r.document=r.window.contentDocument||r.window.document,r.body=n.body,i=r.window,e(n).on("mouseup"+f,h(r._mouseup,r))):(r.window=window,n=r.document=document,r.body=r.element[0],i=r.body,r.toolbar.decorateFrom(r.body)),e(i).on("blur"+f,h(this._blur,this));try{n.execCommand("enableInlineTableEditing",null,!1)}catch(o){}a.support.touch&&e(n).on("selectionchange"+f,h(this._selectionChange,this)).on("keydown"+f,function(){a._activeElement()!=n.body&&r.window.focus()}),e(r.body).on("keydown"+f,function(e){var n,i,o,a,s,l;return e.keyCode===g.F10?(setTimeout(h(r.toolbar.focus,r.toolbar),100),e.preventDefault(),t):((e.keyCode==g.LEFT||e.keyCode==g.RIGHT)&&(n=r.getRange(),i=e.keyCode==g.LEFT,o=n[i?"startContainer":"endContainer"],a=n[i?"startOffset":"endOffset"],s=i?-1:1,i&&(a-=1),a+s>0&&3==o.nodeType&&"﻿"==o.nodeValue[a]&&(n.setStart(o,a+s),n.collapse(!0),r.selectRange(n))),(l=r.keyboard.toolFromShortcut(r.toolbar.tools,e))?(e.preventDefault(),/^(undo|redo)$/.test(l)||r.keyboard.endTyping(!0),r.trigger("keydown",e),r.exec(l),!1):(r.keyboard.clearTimeout(),r.keyboard.keydown(e),t))}).on("keyup"+f,function(t){var n=[8,9,33,34,35,36,37,38,39,40,40,45,46];(e.inArray(t.keyCode,n)>-1||65==t.keyCode&&t.ctrlKey&&!t.altKey&&!t.shiftKey)&&r._selectionChange(),r.keyboard.keyup(t)}).on("mousedown"+f,function(t){if(r._selectionStarted=!0,!d.gecko){var n=e(t.target);(2==t.which||1==t.which&&t.ctrlKey)&&n.is("a[href]")&&window.open(n.attr("href"),"_new")}}).on("click"+f,function(e){var t,n=a.ui.editor.Dom;"img"===n.name(e.target)&&(t=r.createRange(),t.selectNode(e.target),r.selectRange(t))}).on("cut"+f+" paste"+f,function(e){r.clipboard["on"+e.type](e)}).on("focusin"+f,function(){e(this).addClass("k-state-active"),r.toolbar.show(),r.textarea&&r.selectRange(r.getRange())}).on("focusout"+f,function(){setTimeout(function(){var t=a._activeElement(),n=r.body,i=r.toolbar;t==n||e.contains(n,t)||e(t).is(".k-editortoolbar-dragHandle")||i.focused()||(e(n).removeClass("k-state-active"),i.hide())},10)})},_mouseup:function(){var e=this;e._selectionStarted&&setTimeout(function(){e._selectionChange()},1)},refresh:function(){var e=this;e.textarea&&(e.textarea.val(e.value()),e.wrapper.find("iframe").remove(),e._initializeContentElement(e),e.value(e.textarea.val()))},events:["select","change","execute","error","paste","keydown","keyup"],options:{name:"Editor",messages:_,formats:{},encoded:!0,domain:null,serialization:{entities:!0,scripts:!1},stylesheets:[],dialogOptions:{modal:!0,resizable:!1,draggable:!0,animation:!1},fontName:[{text:"Arial",value:"Arial,Helvetica,sans-serif"},{text:"Courier New",value:"'Courier New',Courier,monospace"},{text:"Georgia",value:"Georgia,serif"},{text:"Impact",value:"Impact,Charcoal,sans-serif"},{text:"Lucida Console",value:"'Lucida Console',Monaco,monospace"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"Times New Roman",value:"'Times New Roman',Times,serif"},{text:"Trebuchet MS",value:"'Trebuchet MS',Helvetica,sans-serif"},{text:"Verdana",value:"Verdana,Geneva,sans-serif"}],fontSize:[{text:"1 (8pt)",value:"xx-small"},{text:"2 (10pt)",value:"x-small"},{text:"3 (12pt)",value:"small"},{text:"4 (14pt)",value:"medium"},{text:"5 (18pt)",value:"large"},{text:"6 (24pt)",value:"x-large"},{text:"7 (36pt)",value:"xx-large"}],formatBlock:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],tools:[].concat.call(["formatting"],w.basic,w.alignment,w.lists,w.indenting,w.links,["insertImage"],w.tables)},destroy:function(){var t=this;l.fn.destroy.call(t),e(t.window).add(t.document).add(t.body).add(t.wrapper).add(t.element.closest("form")).off(f),e(document).off("mousedown",h(t._endTyping,t)).off("mouseup",h(t._mouseup,t)),t._focusOutside(),t.toolbar.destroy(),a.destroy(t.wrapper)},_focusOutside:function(){if(a.support.browser.msie&&this.textarea){var t=e("<input style='position:absolute;left:-10px;top:-10px;width:1px;height:1px;font-size:0;border:0;' />").appendTo(document.body).focus();t.blur().remove()}},state:function(e){var t,n,i=b.defaultTools[e],r=i&&(i.options.finder||i.finder),o=a.ui.editor.RangeUtils;return r?(t=this.getRange(),n=o.textNodes(t),!n.length&&t.collapsed&&(n=[t.startContainer]),r.getFormat?r.getFormat(n):r.isFormatted(n)):!1},value:function(e){var n=this.body,i=a.ui.editor,r=i.Serializer.domToXhtml(n,this.options.serialization);return e===t?r:(e!=r&&(i.Serializer.htmlToDom(e,n),d.msie||a.ui.editor.Dom.ensureTrailingBreaks(this.body),this.selectionRestorePoint=null,this.update(),this.toolbar.refreshTools()),t)},saveSelection:function(t){t=t||this.getRange();var n=t.commonAncestorContainer,i=this.body;(n==i||e.contains(i,n))&&(this.selectionRestorePoint=new a.ui.editor.RestorePoint(t))},_focusBody:function(){var e,t=this.body,n=this.wrapper&&this.wrapper.find("iframe")[0],i=this.document.documentElement,r=a._activeElement();r!=t&&r!=n&&(e=i.scrollTop,t.focus(),i.scrollTop=e)},restoreSelection:function(){this._focusBody(),this.selectionRestorePoint&&this.selectRange(this.selectionRestorePoint.toRange())},focus:function(){this.restoreSelection()},update:function(e){e=e||this.options.encoded?this.encodedValue():this.value(),this.textarea?this.textarea.val(e):this._oldValue=e},encodedValue:function(){return a.ui.editor.Dom.encode(this.value())},createRange:function(e){return a.ui.editor.RangeUtils.createRange(e||this.document)},getSelection:function(){return a.ui.editor.SelectionUtils.selectionFromDocument(this.document)},selectRange:function(e){this._focusBody();var t=this.getSelection();t.removeAllRanges(),t.addRange(e),this.saveSelection(e)},getRange:function(){var e=this.getSelection(),t=e&&e.rangeCount>0?e.getRangeAt(0):this.createRange(),n=this.document;return t.startContainer!=n||t.endContainer!=n||t.startOffset||t.endOffset||(t.setStart(this.body,0),t.collapse(!0)),t},selectedHtml:function(){return a.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents())},paste:function(e,t){this.clipboard.paste(e,t)},exec:function(e,n){var i,r,o,a=this,s=null;if(!e)throw Error("kendoEditor.exec(): `name` parameter cannot be empty");if(e=e.toLowerCase(),a.keyboard.isTypingInProgress()||a.restoreSelection(),r=a.toolbar.toolById(e),!r)for(o in b.defaultTools)if(o.toLowerCase()==e){r=b.defaultTools[o];break}if(r){if(i=a.getRange(),r.command&&(s=r.command(u({range:i},n))),a.trigger("execute",{name:e,command:s}),/^(undo|redo)$/i.test(e))a.undoRedoStack[e]();else if(s&&(s.managesUndoRedo||a.undoRedoStack.push(s),s.editor=a,s.exec(),s.async))return s.change=h(a._selectionChange,a),t;a._selectionChange()}}});b.defaultTools={undo:{options:{key:"Z",ctrl:!0}},redo:{options:{key:"Y",ctrl:!0}}},a.ui.plugin(b),n=s.extend({init:function(e){this.options=e},initialize:function(e,t){e.attr({unselectable:"on",title:t.title})},command:function(e){return new this.options.command(e)},update:e.noop}),n.exec=function(e,t,n){e.exec(t,{value:n})},i=n.extend({init:function(e){n.fn.init.call(this,e)},command:function(e){var t=this;return new a.ui.editor.FormatCommand(u(e,{formatter:t.options.formatter}))},update:function(e,t){var n=this.options.finder.isFormatted(t);e.toggleClass("k-state-selected",n),e.attr("aria-pressed",n)}}),v.registerTool("separator",new n({template:new m({template:v.separatorTemplate})})),r=d.msie&&9>d.version?"﻿":"",o='<br class="k-br" />',d.msie&&(10>d.version?o="﻿":11>d.version&&(o=" ")),u(a.ui,{editor:{ToolTemplate:m,EditorUtils:v,Tool:n,FormatTool:i,_bomFill:r,emptyElementContent:o}})}(window.jQuery),function(e){function t(e){var t,n,i={};for(t=0,n=e.length;n>t;t++)i[e[t]]=!0;return i}var n,i,r,o,a,s,l,c,d,u,h=window.kendo,p=e.map,f=e.extend,g=h.support.browser,m="style",v="float",_="cssFloat",y="styleFloat",w="class",b="k-marker",k=t("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed".split(",")),x="div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption".split(","),C=x.concat(["ul","ol","li"]),S=t(C),T="span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby".split(","),D=t(T),A=t("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected".split(",")),E=function(e){1==e.nodeType&&e.normalize()};g.msie&&g.version>=8&&(E=function(e){if(1==e.nodeType&&e.firstChild)for(var t=e.firstChild,n=t;;){if(n=n.nextSibling,!n)break;3==n.nodeType&&3==t.nodeType&&(n.nodeValue=t.nodeValue+n.nodeValue,u.remove(t)),t=n}}),n=/^\s+$/,i=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,r=/\ufeff/g,o=/^(\s+|\ufeff)$/,s="color,padding-left,padding-right,padding-top,padding-bottom,background-color,background-attachment,background-image,background-position,background-repeat,border-top-style,border-top-width,border-top-color,border-bottom-style,border-bottom-width,border-bottom-color,border-left-style,border-left-width,border-left-color,border-right-style,border-right-width,border-right-color,font-family,font-size,font-style,font-variant,font-weight,line-height".split(","),l=/[<>\&]/g,c=/[\u00A0-\u2666<>\&]/g,d={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",402:"fnof",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",978:"upsih",982:"piv",8226:"bull",8230:"hellip",8242:"prime",8243:"Prime",8254:"oline",8260:"frasl",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"},u={block:S,inline:D,findNodeIndex:function(e,t){var n=0;if(!e)return-1;for(;;){if(e=e.previousSibling,!e)break;t&&3==e.nodeType||n++}return n},isDataNode:function(e){return e&&null!==e.nodeValue&&null!==e.data},isAncestorOf:function(t,n){try{return!u.isDataNode(t)&&(e.contains(t,u.isDataNode(n)?n.parentNode:n)||n.parentNode==t)}catch(i){return!1}},isAncestorOrSelf:function(e,t){return u.isAncestorOf(e,t)||e==t},findClosestAncestor:function(e,t){if(u.isAncestorOf(e,t))for(;t&&t.parentNode!=e;)t=t.parentNode;return t},getNodeLength:function(e){return u.isDataNode(e)?e.length:e.childNodes.length},splitDataNode:function(e,t){for(var n=e.cloneNode(!1),i="",r=e;r.nextSibling&&3==r.nextSibling.nodeType&&r.nextSibling.nodeValue;)i+=r.nextSibling.nodeValue,r=r.nextSibling;e.deleteData(t,e.length),n.deleteData(0,t),n.nodeValue+=i,u.insertAfter(n,e)},attrEquals:function(e,t){var n,i;for(n in t)if(i=e[n],n==v&&(i=e[h.support.cssFloat?_:y]),"object"==typeof i){if(!u.attrEquals(i,t[n]))return!1}else if(i!=t[n])return!1;return!0},blockParentOrBody:function(e){return u.parentOfType(e,C)||e.ownerDocument.body},blockParents:function(t){var n,i,r,o=[];for(n=0,i=t.length;i>n;n++)r=u.parentOfType(t[n],u.blockElements),r&&e.inArray(r,o)<0&&o.push(r);return o},windowFromDocument:function(e){return e.defaultView||e.parentWindow},normalize:E,blockElements:C,nonListBlockElements:x,inlineElements:T,empty:k,fillAttrs:A,toHex:function(e){var t=i.exec(e);return t?"#"+p(t.slice(1),function(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}).join(""):e},encode:function(e,t){var n=!t||t.entities?c:l;return e.replace(n,function(e){var t=e.charCodeAt(0),n=d[t];return n?"&"+n+";":e})},stripBom:function(e){return(e||"").replace(r,"")},insignificant:function(e){var t=e.attributes;return"k-marker"==e.className||u.is(e,"br")&&("k-br"==e.className||t._moz_dirty||t._moz_editor_bogus_node)},emptyNode:function(t){var n=e.grep(t.childNodes,function(e){return u.is(e,"br")?!1:u.insignificant(e)?!1:3==e.nodeType&&o.test(e.nodeValue)?!1:u.is(e,"p")&&u.emptyNode(e)?!1:!0});return!n.length},name:function(e){return e.nodeName.toLowerCase()},significantChildNodes:function(t){return e.grep(t.childNodes,function(e){return 3!=e.nodeType||!u.isWhitespace(e)})},lastTextNode:function(e){var t,n=null;if(3==e.nodeType)return e;for(t=e.lastChild;t;t=t.previousSibling)if(n=u.lastTextNode(t))return n;return n},is:function(e,t){return u.name(e)==t},isMarker:function(e){return e.className==b},isWhitespace:function(e){return n.test(e.nodeValue)},isBlock:function(e){return S[u.name(e)]},isEmpty:function(e){return k[u.name(e)]},isInline:function(e){return D[u.name(e)]},scrollContainer:function(e){var t=u.windowFromDocument(e),n=(t.contentWindow||t).document||t.ownerDocument||t;return n=h.support.browser.webkit||"BackCompat"==n.compatMode?n.body:n.documentElement},scrollTo:function(t){var n,i,r=e(u.isDataNode(t)?t.parentNode:t),o=u.windowFromDocument(t.ownerDocument),a=o.innerHeight,s=u.scrollContainer(t.ownerDocument);"br"==u.name(r[0])&&(r=r.parent()),n=r.offset().top,i=r[0].offsetHeight,i+n>s.scrollTop+a&&(s.scrollTop=i+n-a)},persistScrollTop:function(e){a=u.scrollContainer(e).scrollTop},restoreScrollTop:function(e){u.scrollContainer(e).scrollTop=a},insertAt:function(e,t,n){e.insertBefore(t,e.childNodes[n]||null)},insertBefore:function(e,t){return t.parentNode?t.parentNode.insertBefore(e,t):t},insertAfter:function(e,t){return t.parentNode.insertBefore(e,t.nextSibling)},remove:function(e){e.parentNode.removeChild(e)},removeTextSiblings:function(e){for(var t=e.parentNode;e.nextSibling&&3==e.nextSibling.nodeType;)t.removeChild(e.nextSibling);for(;e.previousSibling&&3==e.previousSibling.nodeType;)t.removeChild(e.previousSibling)},trim:function(e){var t,n;for(t=e.childNodes.length-1;t>=0;t--)n=e.childNodes[t],u.isDataNode(n)?(u.stripBom(n.nodeValue).length||u.remove(n),u.isWhitespace(n)&&u.insertBefore(n,e)):n.className!=b&&(u.trim(n),n.childNodes.length||u.isEmpty(n)||u.remove(n));return e},closest:function(e,t){for(;e&&u.name(e)!=t;)e=e.parentNode;return e},sibling:function(e,t){do e=e[t];while(e&&1!=e.nodeType);return e},next:function(e){return u.sibling(e,"nextSibling")},prev:function(e){return u.sibling(e,"previousSibling")},parentOfType:function(e,t){do e=e.parentNode;while(e&&!u.ofType(e,t));return e},ofType:function(t,n){return e.inArray(u.name(t),n)>=0},changeTag:function(e,t,n){var i,r,o,a,s,l=u.create(e.ownerDocument,t),c=e.attributes;if(!n)for(i=0,r=c.length;r>i;i++)s=c[i],s.specified&&(o=s.nodeName,a=s.nodeValue,o==w?l.className=a:o==m?l.style.cssText=e.style.cssText:l.setAttribute(o,a));for(;e.firstChild;)l.appendChild(e.firstChild);return u.insertBefore(l,e),u.remove(e),l},editableParent:function(e){for(;e&&(3==e.nodeType||"true"!==e.contentEditable);)e=e.parentNode;return e},wrap:function(e,t){return u.insertBefore(t,e),t.appendChild(e),t},unwrap:function(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)},create:function(e,t,n){return u.attr(e.createElement(t),n)},attr:function(e,t){t=f({},t),t&&m in t&&(u.style(e,t.style),delete t.style);for(var n in t)null===t[n]?(e.removeAttribute(n),delete t[n]):"className"==n&&(e[n]=t[n]);return f(e,t)},style:function(t,n){e(t).css(n||{})},unstyle:function(e,t){for(var n in t)n==v&&(n=h.support.cssFloat?_:y),e.style[n]="";""===e.style.cssText&&e.removeAttribute(m)},inlineStyle:function(t,n,i){var r,o=e(u.create(t.ownerDocument,n,i));return t.appendChild(o[0]),r=p(s,function(e){return g.msie&&"line-height"==e&&"1px"==o.css(e)?"line-height:1.5":e+":"+o.css(e)}).join(";"),o.remove(),r},getEffectiveBackground:function(e){var t=e.css("background-color");return t.indexOf("rgba(0, 0, 0, 0")<0&&"transparent"!==t?t:"html"===e[0].tagName.toLowerCase()?"Window":u.getEffectiveBackground(e.parent())},removeClass:function(t,n){var i,r,o=" "+t.className+" ",a=n.split(" ");for(i=0,r=a.length;r>i;i++)o=o.replace(" "+a[i]+" "," ");o=e.trim(o),o.length?t.className=o:t.removeAttribute(w)},commonAncestor:function(){var e,t,n,i,r,o=arguments.length,a=[],s=1/0,l=null;if(!o)return null;if(1==o)return arguments[0];for(e=0;o>e;e++){for(t=[],n=arguments[e];n;)t.push(n),n=n.parentNode;a.push(t.reverse()),s=Math.min(s,t.length)}if(1==o)return a[0][0];for(e=0;s>e;e++){for(i=a[0][e],r=1;o>r;r++)if(i!=a[r][e])return l;l=i}return l},closestSplittableParent:function(t){var n,i,r;return n=1==t.length?u.parentOfType(t[0],["ul","ol"]):u.commonAncestor.apply(null,t),n||(n=u.parentOfType(t[0],["p","td"])||t[0].ownerDocument.body),u.isInline(n)&&(n=u.blockParentOrBody(n)),i=p(t,u.editableParent),r=u.commonAncestor(i)[0],e.contains(n,r)&&(n=r),n},closestEditable:function(t,n){var i=u.parentOfType(t,n),r=u.editableParent(t);return i&&r&&e.contains(i,r)?i=r:!i&&r&&(i=r),i},closestEditableOfType:function(e,t){var n=u.closestEditable(e,t);return n&&u.ofType(n,t)?n:void 0},filter:function(e,t,n){for(var i,r=0,o=t.length,a=[];o>r;r++)i=u.name(t[r]),(!n&&i==e||n&&i!=e)&&a.push(t[r]);return a},ensureTrailingBreaks:function(t){var n=e(t).find("p,td,th"),i=n.length,r=0;
if(i)for(;i>r;r++)u.ensureTrailingBreak(n[r]);else u.ensureTrailingBreak(t)},ensureTrailingBreak:function(e){var t,n=e.lastChild,i=n&&u.name(n);(!i||"br"!=i&&"img"!=i||"br"==i&&"k-br"!=n.className)&&(t=e.ownerDocument.createElement("br"),t.className="k-br",e.appendChild(t))}},h.ui.editor.Dom=u}(window.kendo.jQuery),function(e,t){var n,i,r=window.kendo,o=r.ui.editor,a=o.Dom,s=e.extend,l="xx-small,x-small,small,medium,large,x-large,xx-large".split(","),c=/"/g,d=/<br[^>]*>/i,u=/^\d+(\.\d*)?(px)?$/i,h=/<p><\/p>/i,p=/([\w|\-]+)\s*:\s*([^;]+);?/i,f=/^sizzle-\d+/i,g=/^k-script-/i,m=/\s*onerror\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/i,v=document.createElement("div");v.innerHTML=" <hr>",n=3===v.firstChild.nodeType,v=null,i={toEditableHtml:function(e){var t='<br class="k-br">';return e=e||"",e.replace(/<!\[CDATA\[(.*)?\]\]>/g,"<!--[CDATA[$1]]-->").replace(/<script([^>]*)>(.*)?<\/script>/gi,"<telerik:script$1>$2</telerik:script>").replace(/<img([^>]*)>/gi,function(e){return e.replace(m,"")}).replace(/(<\/?img[^>]*>)[\r\n\v\f\t ]+/gi,"$1").replace(/^<(table|blockquote)/i,t+"<$1").replace(/<\/(table|blockquote)>$/i,"</$1>"+t)},_fillEmptyElements:function(t){e(t).find("p").each(function(){var t,n=e(this);if(/^\s*$/g.test(n.text())&&!n.find("img,input").length){for(t=this;t.firstChild&&3!=t.firstChild.nodeType;)t=t.firstChild;1!=t.nodeType||a.empty[a.name(t)]||(t.innerHTML=r.ui.editor.emptyElementContent)}})},_removeSystemElements:function(t){e(".k-paste-container",t).remove()},_resetOrderedLists:function(e){var t,n,i,r=e.getElementsByTagName("ol");for(t=0;r.length>t;t++)n=r[t],i=n.getAttribute("start"),n.setAttribute("start",1),i?n.setAttribute("start",i):n.removeAttribute(i)},_preventScriptExecution:function(t){e(t).find("*").each(function(){var e,t,n,i,r=this.attributes;for(t=0,n=r.length;n>t;t++)e=r[t],i=e.nodeName,e.specified&&/^on/i.test(i)&&(this.removeAttribute(i),this.setAttribute("k-script-"+i,e.nodeValue))})},htmlToDom:function(t,n){var o,s,l=r.support.browser,c=l.msie,d=c&&9>l.version;return t=i.toEditableHtml(t),d&&(t="<br/>"+t,o="originalsrc",s="originalhref",t=t.replace(/href\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,s+'="$1"'),t=t.replace(/src\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,o+'="$1"')),n.innerHTML=t,d?(a.remove(n.firstChild),e(n).find("telerik\\:script,script,link,img,a").each(function(){var e=this;e[s]&&(e.setAttribute("href",e[s]),e.removeAttribute(s)),e[o]&&(e.setAttribute("src",e[o]),e.removeAttribute(o))})):c&&(a.normalize(n),i._resetOrderedLists(n)),i._preventScriptExecution(n),i._fillEmptyElements(n),i._removeSystemElements(n),e("table",n).addClass("k-table"),n},domToXhtml:function(i,o){function s(t){var n,i,r,o,s=e.trim,l=s(t).split(";"),d=l.length;for(n=0,d=l.length;d>n;n++)l[n].length&&(i=p.exec(l[n]),i&&(r=s(i[1].toLowerCase()),o=s(i[2]),"font-size-adjust"!=r&&"font-stretch"!=r&&(r.indexOf("color")>=0?o=a.toHex(o):r.indexOf("font")>=0?o=o.replace(c,"'"):/\burl\(/g.test(o)&&(o=o.replace(c,"")),b.push(r),b.push(":"),b.push(o),b.push(";"))))}function m(n){var i,l,c,d,h,p,m,v,_,y=[],w=n.attributes;for(a.is(n,"img")&&(m=n.style.width,v=n.style.height,_=e(n),m&&u.test(m)&&(_.attr("width",parseInt(m,10)),a.unstyle(n,{width:t})),v&&u.test(v)&&(_.attr("height",parseInt(v,10)),a.unstyle(n,{height:t}))),l=0,c=w.length;c>l;l++)i=w[l],d=i.nodeName,h=i.nodeValue,p=i.specified,"value"==d&&"value"in n&&n.value?p=!0:"type"==d&&"text"==h?p=!0:"class"!=d||h?f.test(d)?p=!1:"complete"==d?p=!1:"altHtml"==d?p=!1:"start"==d&&(a.is(n,"ul")||a.is(n,"ol"))?p=!1:d.indexOf("_moz")>=0?p=!1:g.test(d)&&(p=!!o.scripts):p=!1,p&&y.push(i);if(y.length)for(y.sort(function(e,t){return e.nodeName>t.nodeName?1:t.nodeName>e.nodeName?-1:0}),l=0,c=y.length;c>l;l++)i=y[l],d=i.nodeName,h=i.nodeValue,("class"!=d||"k-table"!=h)&&(d=d.replace(g,""),b.push(" "),b.push(d),b.push('="'),"style"==d?s(h||n.style.cssText):b.push("src"==d||"href"==d?r.htmlEncode(n.getAttribute(d,2)):a.fillAttrs[d]?d:h),b.push('"'))}function v(e,t,n){for(var i=e.firstChild;i;i=i.nextSibling)y(i,t,n)}function _(e){return e.nodeValue.replace(/\ufeff/g,"")}function y(e,i,r){var s,l,c,d,u,h=e.nodeType;if(1==h){if(s=a.name(e),!s||a.insignificant(e))return;if(a.isInline(e)&&1==e.childNodes.length&&3==e.firstChild.nodeType&&!_(e.firstChild))return;if(!o.scripts&&"telerik:script"==s)return;if(l=k[s])return l.start(e),v(e,!1,l.skipEncoding),l.end(e),t;b.push("<"),b.push(s),m(e),a.empty[s]?b.push(" />"):(b.push(">"),v(e,i||a.is(e,"pre")),b.push("</"),b.push(s),b.push(">"))}else 3==h?(d=_(e),!i&&n&&(c=e.parentNode,u=e.previousSibling,u||(u=(a.isInline(c)?c:e).previousSibling),(!u||""===u.innerHTML||a.isBlock(u))&&(d=d.replace(/^[\r\n\v\f\t ]+/,"")),d=d.replace(/ +/," ")),b.push(r?d:a.encode(d,o))):4==h?(b.push("<![CDATA["),b.push(e.data),b.push("]]>")):8==h&&(e.data.indexOf("[CDATA[")<0?(b.push("<!--"),b.push(e.data),b.push("-->")):(b.push("<!"),b.push(e.data),b.push(">")))}function w(e){var t=e.childNodes.length,n=t&&3==e.firstChild.nodeType;return n&&(1==t||2==t&&a.insignificant(e.lastChild))}var b=[],k={"telerik:script":{start:function(e){b.push("<script"),m(e),b.push(">")},end:function(){b.push("</script>")},skipEncoding:!0},b:{start:function(){b.push("<strong>")},end:function(){b.push("</strong>")}},i:{start:function(){b.push("<em>")},end:function(){b.push("</em>")}},u:{start:function(){b.push('<span style="text-decoration:underline;">')},end:function(){b.push("</span>")}},iframe:{start:function(e){b.push("<iframe"),m(e),b.push(">")},end:function(){b.push("</iframe>")}},font:{start:function(e){var t,n,i;b.push('<span style="'),t=e.getAttribute("color"),n=l[e.getAttribute("size")],i=e.getAttribute("face"),t&&(b.push("color:"),b.push(a.toHex(t)),b.push(";")),i&&(b.push("font-face:"),b.push(i),b.push(";")),n&&(b.push("font-size:"),b.push(n),b.push(";")),b.push('">')},end:function(){b.push("</span>")}}};return o=o||{},w(i)?a.encode(_(i.firstChild).replace(/[\r\n\v\f\t ]+/," "),o):(v(i),b=b.join(""),""===b.replace(d,"").replace(h,"")?"":b)}},s(o,{Serializer:i})}(window.kendo.jQuery),function(e){function t(e,t,n,i){var r,o,a,s;if(e==t)return i-n;for(r=t;r&&r.parentNode!=e;)r=r.parentNode;if(r)return p(r)-n;for(r=e;r&&r.parentNode!=t;)r=r.parentNode;if(r)return i-p(r)-1;for(o=h.commonAncestor(e,t),a=e;a&&a.parentNode!=o;)a=a.parentNode;for(a||(a=o),s=t;s&&s.parentNode!=o;)s=s.parentNode;return s||(s=o),a==s?0:p(s)-p(a)}function n(e,n){function i(e){try{return t(e.startContainer,e.endContainer,e.startOffset,e.endOffset)<0}catch(n){return!0}}i(e)&&(n?(e.commonAncestorContainer=e.endContainer=e.startContainer,e.endOffset=e.startOffset):(e.commonAncestorContainer=e.startContainer=e.endContainer,e.startOffset=e.endOffset),e.collapsed=!0)}function i(e){e.collapsed=e.startContainer==e.endContainer&&e.startOffset==e.endOffset;for(var t=e.startContainer;t&&t!=e.endContainer&&!h.isAncestorOf(t,e.endContainer);)t=t.parentNode;e.commonAncestorContainer=t}function r(e){var t=e.duplicate(),n=e.duplicate();return t.collapse(!0),n.collapse(!1),h.commonAncestor(e.parentElement(),t.parentElement(),n.parentElement())}function o(e,t,n){var i,r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],a=0,s=f(r),l=s?r:r.childNodes[o]||null,c=s?r.parentNode:r,d=t.ownerDocument,u=d.body.createTextRange();(3==r.nodeType||4==r.nodeType)&&(a=o),c||(c=d.body),"img"==c.nodeName.toLowerCase()?(u.moveToElementText(c),u.collapse(!1),e.setEndPoint(n?"StartToStart":"EndToStart",u)):(i=c.insertBefore(h.create(d,"a"),l),u.moveToElementText(i),h.remove(i),u[n?"moveStart":"moveEnd"]("character",a),u.collapse(!1),e.setEndPoint(n?"StartToStart":"EndToStart",u))}function a(e,t,n,i){var r,o,a,s,l,c,d,u=h.create(t.ownerDocument,"a"),g=e.duplicate(),m=i?"StartToStart":"StartToEnd",v=!1;u.innerHTML="﻿",g.collapse(i),o=g.parentElement(),h.isAncestorOrSelf(n,o)||(o=n);do v?o.insertBefore(u,u.previousSibling):(o.appendChild(u),v=!0),g.moveToElementText(u);while((r=g.compareEndPoints(m,e))>0&&u.previousSibling);a=u.nextSibling,-1==r&&f(a)?(g.setEndPoint(i?"EndToStart":"EndToEnd",e),h.remove(u),c=[a,g.text.length]):(s=!i&&u.previousSibling,l=i&&u.nextSibling,f(l)?c=[l,0]:f(s)?c=[s,s.length]:(d=p(u),c=o.nextSibling&&d==o.childNodes.length-1?[o.nextSibling,0]:[o,d]),h.remove(u)),t[i?"setStart":"setEnd"].apply(t,c)}var s=window.kendo,l=s.Class,c=e.extend,d=s.ui.editor,u=s.support.browser,h=d.Dom,p=h.findNodeIndex,f=h.isDataNode,g=h.findClosestAncestor,m=h.getNodeLength,v=h.normalize,_={selectionFromWindow:function(e){return"getSelection"in e?e.getSelection():new b(e.document)},selectionFromRange:function(e){var t=T.documentFromRange(e);return _.selectionFromDocument(t)},selectionFromDocument:function(e){return _.selectionFromWindow(h.windowFromDocument(e))}},y=l.extend({init:function(t){e.extend(this,{ownerDocument:t,startContainer:t,endContainer:t,commonAncestorContainer:t,startOffset:0,endOffset:0,collapsed:!0})},setStart:function(e,t){this.startContainer=e,this.startOffset=t,i(this),n(this,!0)},setEnd:function(e,t){this.endContainer=e,this.endOffset=t,i(this),n(this,!1)},setStartBefore:function(e){this.setStart(e.parentNode,p(e))},setStartAfter:function(e){this.setStart(e.parentNode,p(e)+1)},setEndBefore:function(e){this.setEnd(e.parentNode,p(e))},setEndAfter:function(e){this.setEnd(e.parentNode,p(e)+1)},selectNode:function(e){this.setStartBefore(e),this.setEndAfter(e)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e[1===e.nodeType?"childNodes":"nodeValue"].length)},collapse:function(e){var t=this;e?t.setEnd(t.startContainer,t.startOffset):t.setStart(t.endContainer,t.endOffset)},deleteContents:function(){var e=this,t=e.cloneRange();e.startContainer!=e.commonAncestorContainer&&e.setStartAfter(g(e.commonAncestorContainer,e.startContainer)),e.collapse(!0),function n(e){for(;e.next();)e.hasPartialSubtree()?n(e.getSubtreeIterator()):e.remove()}(new w(t))},cloneContents:function(){var e=T.documentFromRange(this);return function t(n){for(var i,r=e.createDocumentFragment();i=n.next();)i=i.cloneNode(!n.hasPartialSubtree()),n.hasPartialSubtree()&&i.appendChild(t(n.getSubtreeIterator())),r.appendChild(i);return r}(new w(this))},extractContents:function(){var e,t=this,n=t.cloneRange();return t.startContainer!=t.commonAncestorContainer&&t.setStartAfter(g(t.commonAncestorContainer,t.startContainer)),t.collapse(!0),e=T.documentFromRange(t),function i(n){for(var r,o=e.createDocumentFragment();r=n.next();)n.hasPartialSubtree()?(r=r.cloneNode(!1),r.appendChild(i(n.getSubtreeIterator()))):n.remove(t.originalRange),o.appendChild(r);return o}(new w(n))},insertNode:function(e){var t=this;f(t.startContainer)?(t.startOffset!=t.startContainer.nodeValue.length&&h.splitDataNode(t.startContainer,t.startOffset),h.insertAfter(e,t.startContainer)):h.insertAt(t.startContainer,e,t.startOffset),t.setStart(t.startContainer,t.startOffset)},cloneRange:function(){return e.extend(new y(this.ownerDocument),{startContainer:this.startContainer,endContainer:this.endContainer,commonAncestorContainer:this.commonAncestorContainer,startOffset:this.startOffset,endOffset:this.endOffset,collapsed:this.collapsed,originalRange:this})},toString:function(){var e=this.startContainer.nodeName,t=this.endContainer.nodeName;return("#text"==e?this.startContainer.nodeValue:e)+"("+this.startOffset+") : "+("#text"==t?this.endContainer.nodeValue:t)+"("+this.endOffset+")"}}),w=l.extend({init:function(t){if(e.extend(this,{range:t,_current:null,_next:null,_end:null}),!t.collapsed){var n=t.commonAncestorContainer;this._next=t.startContainer!=n||f(t.startContainer)?g(n,t.startContainer):t.startContainer.childNodes[t.startOffset],this._end=t.endContainer!=n||f(t.endContainer)?g(n,t.endContainer).nextSibling:t.endContainer.childNodes[t.endOffset]}},hasNext:function(){return!!this._next},next:function(){var e=this,t=e._current=e._next;return e._next=e._current&&e._current.nextSibling!=e._end?e._current.nextSibling:null,f(e._current)&&(e.range.endContainer==e._current&&(t=t.cloneNode(!0),t.deleteData(e.range.endOffset,t.length-e.range.endOffset)),e.range.startContainer==e._current&&(t=t.cloneNode(!0),t.deleteData(0,e.range.startOffset))),t},traverse:function(e){function t(){return i._current=i._next,i._next=i._current&&i._current.nextSibling!=i._end?i._current.nextSibling:null,i._current}for(var n,i=this;n=t();)i.hasPartialSubtree()?i.getSubtreeIterator().traverse(e):e(n);return n},remove:function(e){var t,n,i,r,o,a=this,s=a.range.startContainer==a._current,l=a.range.endContainer==a._current;f(a._current)&&(s||l)?(t=s?a.range.startOffset:0,n=l?a.range.endOffset:a._current.length,i=n-t,e&&(s||l)&&(a._current==e.startContainer&&e.startOffset>=t&&(e.startOffset-=i),a._current==e.endContainer&&e.endOffset>=n&&(e.endOffset-=i)),a._current.deleteData(t,i)):(r=a._current.parentNode,!e||a.range.startContainer!=r&&a.range.endContainer!=r||(o=p(a._current),r==e.startContainer&&e.startOffset>=o&&(e.startOffset-=1),r==e.endContainer&&e.endOffset>o&&(e.endOffset-=1)),h.remove(a._current))},hasPartialSubtree:function(){return!f(this._current)&&(h.isAncestorOrSelf(this._current,this.range.startContainer)||h.isAncestorOrSelf(this._current,this.range.endContainer))},getSubtreeIterator:function(){var e=this,t=e.range.cloneRange();return t.selectNodeContents(e._current),h.isAncestorOrSelf(e._current,e.range.startContainer)&&t.setStart(e.range.startContainer,e.range.startOffset),h.isAncestorOrSelf(e._current,e.range.endContainer)&&t.setEnd(e.range.endContainer,e.range.endOffset),new w(t)}}),b=l.extend({init:function(e){this.ownerDocument=e,this.rangeCount=1},addRange:function(e){var t=this.ownerDocument.body.createTextRange();o(t,e,!1),o(t,e,!0),t.select()},removeAllRanges:function(){var e=this.ownerDocument.selection;"None"!=e.type&&e.empty()},getRangeAt:function(){var e,t,n,i,o,s,l,c,d=new y(this.ownerDocument),u=this.ownerDocument.selection;try{if(e=u.createRange(),t=e.item?e.item(0):e.parentElement(),t.ownerDocument!=this.ownerDocument)return d}catch(h){return d}if("Control"==u.type)d.selectNode(e.item(0));else if(n=r(e),a(e,d,n,!0),a(e,d,n,!1),9==d.startContainer.nodeType&&d.setStart(d.endContainer,d.startOffset),9==d.endContainer.nodeType&&d.setEnd(d.startContainer,d.endOffset),0===e.compareEndPoints("StartToEnd",e)&&d.collapse(!1),i=d.startContainer,o=d.endContainer,s=this.ownerDocument.body,!(d.collapsed||0!==d.startOffset||d.endOffset!=m(d.endContainer)||i==o&&f(i)&&i.parentNode==s)){for(l=!1,c=!1;0===p(i)&&i==i.parentNode.firstChild&&i!=s;)i=i.parentNode,l=!0;for(;p(o)==m(o.parentNode)-1&&o==o.parentNode.lastChild&&o!=s;)o=o.parentNode,c=!0;i==s&&o==s&&l&&c&&(d.setStart(i,0),d.setEnd(o,m(s)))}return d}}),k=l.extend({init:function(e){this.enumerate=function(){function t(e){if(h.is(e,"img")||3==e.nodeType&&(!h.isWhitespace(e)||"﻿"==e.nodeValue))n.push(e);else for(e=e.firstChild;e;)t(e),e=e.nextSibling}var n=[];return new w(e).traverse(t),n}}}),x=l.extend({init:function(e,t){var n=this;n.range=e,n.rootNode=T.documentFromRange(e),n.body=t||n.getEditable(e),"body"!=h.name(n.body)&&(n.rootNode=n.body),n.html=n.body.innerHTML,n.startContainer=n.nodeToPath(e.startContainer),n.endContainer=n.nodeToPath(e.endContainer),n.startOffset=n.offset(e.startContainer,e.startOffset),n.endOffset=n.offset(e.endContainer,e.endOffset)},index:function(e){for(var t,n=0,i=e.nodeType;e=e.previousSibling;)t=e.nodeType,(3!=t||i!=t)&&n++,i=t;return n},getEditable:function(e){for(var t=e.commonAncestorContainer;t&&(3==t.nodeType||t.attributes&&!t.attributes.contentEditable);)t=t.parentNode;return t},restoreHtml:function(){this.body.innerHTML=this.html},offset:function(e,t){if(3==e.nodeType)for(;(e=e.previousSibling)&&3==e.nodeType;)t+=e.nodeValue.length;return t},nodeToPath:function(e){for(var t=[];e!=this.rootNode;)t.push(this.index(e)),e=e.parentNode;return t},toRangePoint:function(e,t,n,i){for(var r=this.rootNode,o=n.length,a=i;o--;)r=r.childNodes[n[o]];for(;r&&3==r.nodeType&&a>r.nodeValue.length;)a-=r.nodeValue.length,r=r.nextSibling;r&&a>=0&&e[t?"setStart":"setEnd"](r,a)},toRange:function(){var e=this,t=e.range.cloneRange();return e.toRangePoint(t,!0,e.startContainer,e.startOffset),e.toRangePoint(t,!1,e.endContainer,e.endOffset),t}}),C=l.extend({init:function(){this.caret=null},addCaret:function(e){var t=this;return t.caret=h.create(T.documentFromRange(e),"span",{className:"k-marker"}),e.insertNode(t.caret),e.selectNode(t.caret),t.caret},removeCaret:function(e){var t,n,i,r,o=this,a=o.caret.previousSibling,s=0;a&&(s=f(a)?a.nodeValue.length:p(a)),t=o.caret.parentNode,n=a?p(a):0,h.remove(o.caret),v(t),i=t.childNodes[n],f(i)?e.setStart(i,s):i?(r=h.lastTextNode(i),r?e.setStart(r,r.nodeValue.length):e[a?"setStartAfter":"setStartBefore"](i)):(u.msie||t.innerHTML||(t.innerHTML='<br _moz_dirty="" />'),e.selectNodeContents(t)),e.collapse(!0)},add:function(e,t){var n,i,r=this,o=e.collapsed&&!T.isExpandable(e),a=T.documentFromRange(e);return t&&e.collapsed&&(r.addCaret(e),e=T.expand(e)),n=e.cloneRange(),n.collapse(!1),r.end=h.create(a,"span",{className:"k-marker"}),n.insertNode(r.end),n=e.cloneRange(),n.collapse(!0),r.start=r.end.cloneNode(!0),n.insertNode(r.start),r._removeDeadMarkers(r.start,r.end),o&&(i=a.createTextNode("﻿"),h.insertAfter(i.cloneNode(),r.start),h.insertBefore(i,r.end)),e.setStartBefore(r.start),e.setEndAfter(r.end),v(e.commonAncestorContainer),e},_removeDeadMarkers:function(e,t){e.previousSibling&&"﻿"==e.previousSibling.nodeValue&&h.remove(e.previousSibling),t.nextSibling&&"﻿"==t.nextSibling.nodeValue&&h.remove(t.nextSibling)},remove:function(e){var t,n,i,r,o,a,s,l,c,d,u,g,m,_=this,y=_.start,w=_.end;for(v(e.commonAncestorContainer);!y.nextSibling&&y.parentNode;)y=y.parentNode;for(;!w.previousSibling&&w.parentNode;)w=w.parentNode;if(t=y.previousSibling&&3==y.previousSibling.nodeType&&y.nextSibling&&3==y.nextSibling.nodeType,n=w.previousSibling&&3==w.previousSibling.nodeType&&w.nextSibling&&3==w.nextSibling.nodeType,i=t&&n,y=y.nextSibling,w=w.previousSibling,r=!1,o=!1,y==_.end&&(o=!!_.start.previousSibling,y=w=_.start.previousSibling||_.end.nextSibling,r=!0),h.remove(_.start),h.remove(_.end),!y||!w)return e.selectNodeContents(e.commonAncestorContainer),void e.collapse(!0);if(a=r?f(y)?y.nodeValue.length:y.childNodes.length:0,s=f(w)?w.nodeValue.length:w.childNodes.length,3==y.nodeType)for(;y.previousSibling&&3==y.previousSibling.nodeType;)y=y.previousSibling,a+=y.nodeValue.length;if(3==w.nodeType)for(;w.previousSibling&&3==w.previousSibling.nodeType;)w=w.previousSibling,s+=w.nodeValue.length;for(l=p(y),c=y.parentNode,d=p(w),u=w.parentNode,g=y;g.previousSibling;g=g.previousSibling)3==g.nodeType&&3==g.previousSibling.nodeType&&l--;for(m=w;m.previousSibling;m=m.previousSibling)3==m.nodeType&&3==m.previousSibling.nodeType&&d--;v(c),3==y.nodeType&&(y=c.childNodes[l]),v(u),3==w.nodeType&&(w=u.childNodes[d]),r?(3==y.nodeType?e.setStart(y,a):e[o?"setStartAfter":"setStartBefore"](y),e.collapse(!0)):(3==y.nodeType?e.setStart(y,a):e.setStartBefore(y),3==w.nodeType?e.setEnd(w,s):e.setEndAfter(w)),_.caret&&_.removeCaret(e)}}),S=/[\u0009-\u000d]|\u0020|\u00a0|\ufeff|\.|,|;|:|!|\(|\)|\?/,T={nodes:function(e){var t=T.textNodes(e);return t.length||(e.selectNodeContents(e.commonAncestorContainer),t=T.textNodes(e),t.length||(t=h.significantChildNodes(e.commonAncestorContainer))),t},textNodes:function(e){return new k(e).enumerate()},documentFromRange:function(e){var t=e.startContainer;return 9==t.nodeType?t:t.ownerDocument},createRange:function(e){return u.msie&&9>u.version?new y(e):e.createRange()},selectRange:function(e){var t,n=T.image(e);n&&(e.setStartAfter(n),e.setEndAfter(n)),t=_.selectionFromRange(e),t.removeAllRanges(),t.addRange(e)},stringify:function(e){return s.format("{0}:{1} - {2}:{3}",h.name(e.startContainer),e.startOffset,h.name(e.endContainer),e.endOffset)},split:function(e,t,n){function i(i){var r,o=e.cloneRange();o.collapse(i),o[i?"setStartBefore":"setEndAfter"](t),r=o.extractContents(),n&&(r=h.trim(r)),h[i?"insertBefore":"insertAfter"](r,t)}i(!0),i(!1)},mapAll:function(t,n){var i=[];return new w(t).traverse(function(t){var r=n(t);r&&e.inArray(r,i)<0&&i.push(r)}),i},getAll:function(e,t){var n=t;return"string"==typeof t&&(t=function(e){return h.is(e,n)}),T.mapAll(e,function(e){return t(e)?e:void 0})},getMarkers:function(e){return T.getAll(e,function(e){return"k-marker"==e.className})},image:function(e){var t=T.getAll(e,"img");return 1==t.length?t[0]:void 0},wrapSelectedElements:function(e){function t(e,t){var n,i=h.getNodeLength(t);if(e==i)return!0;for(n=e;i>n;n++)if(!h.insignificant(t.childNodes[n]))return!1;return!0}for(var n=h.editableParent(e.startContainer),i=h.editableParent(e.endContainer);0===e.startOffset&&e.startContainer!=n;)e.setStart(e.startContainer.parentNode,h.findNodeIndex(e.startContainer));for(;t(e.endOffset,e.endContainer)&&e.endContainer!=i;)e.setEnd(e.endContainer.parentNode,h.findNodeIndex(e.endContainer)+1);return e},expand:function(e){var t,n,i,r,o=e.cloneRange(),a=o.startContainer.childNodes[0===o.startOffset?0:o.startOffset-1],s=o.endContainer.childNodes[o.endOffset];return f(a)&&f(s)?(t=a.nodeValue,n=s.nodeValue,t&&n?(i=t.split("").reverse().join("").search(S),r=n.search(S),i&&r?(r=-1==r?n.length:r,i=-1==i?0:t.length-i,o.setStart(a,i),o.setEnd(s,r),o):o):o):o},isExpandable:function(e){var t,n,i,r,o,a,s=e.startContainer,l=T.documentFromRange(e);return s==l||s==l.body?!1:(t=e.cloneRange(),(n=s.nodeValue)?(i=n.substring(0,t.startOffset),r=n.substring(t.startOffset),o=0,a=0,i&&(o=i.split("").reverse().join("").search(S)),r&&(a=r.search(S)),o&&a):!1)}};c(d,{SelectionUtils:_,W3CRange:y,RangeIterator:w,W3CSelection:b,RangeEnumerator:k,RestorePoint:x,Marker:C,RangeUtils:T})}(window.kendo.jQuery),function(e){function t(e,t){var n=e.selectionRestorePoint=new d(e.getRange()),i=new f(t,n);return i.editor=e,e.undoRedoStack.push(i),n}var n=window.kendo,i=n.Class,r=n.ui.editor,o=r.EditorUtils,a=o.registerTool,s=r.Dom,l=r.Tool,c=r.ToolTemplate,d=r.RestorePoint,u=r.Marker,h=e.extend,p=i.extend({init:function(e){this.options=e,this.restorePoint=new d(e.range),this.marker=new u,this.formatter=e.formatter},getRange:function(){return this.restorePoint.toRange()},lockRange:function(e){return this.marker.add(this.getRange(),e)},releaseRange:function(e){this.marker.remove(e),this.editor.selectRange(e)},undo:function(){var e=this.restorePoint;e.restoreHtml(),this.editor.selectRange(e.toRange())},redo:function(){this.exec()},createDialog:function(t,i){var r=this.editor;return e(t).appendTo(document.body).kendoWindow(h({},r.options.dialogOptions,i)).closest(".k-window").toggleClass("k-rtl",n.support.isRtl(r.wrapper)).end()},exec:function(){var e=this.lockRange(!0);this.formatter.editor=this.editor,this.formatter.toggle(e),this.releaseRange(e)}}),f=i.extend({init:function(e,t){this.body=e.body,this.startRestorePoint=e,this.endRestorePoint=t},redo:function(){this.body.innerHTML=this.endRestorePoint.html,this.editor.selectRange(this.endRestorePoint.toRange())},undo:function(){this.body.innerHTML=this.startRestorePoint.html,this.editor.selectRange(this.startRestorePoint.toRange())}}),g=p.extend({init:function(e){p.fn.init.call(this,e),this.managesUndoRedo=!0},exec:function(){var e,t=this.editor,n=this.options,i=n.range,r=t.body,o=new d(i,r),a=n.html||n.value||"";t.selectRange(i),t.clipboard.paste(a,n),n.postProcess&&n.postProcess(t,t.getRange()),e=new f(o,new d(t.getRange(),r)),e.editor=t,t.undoRedoStack.push(e),t.focus()}}),m=l.extend({initialize:function(e,t){var n=t.editor,i=this.options,o=i.items?i.items:n.options.insertHtml;new r.SelectBox(e,{dataSource:o,dataTextField:"text",dataValueField:"value",change:function(){l.exec(n,"insertHtml",this.value())},title:n.options.messages.insertHtml,highlightFirst:!1})},command:function(e){return new g(e)},update:function(e){var t=e.data("kendoSelectBox")||e.find("select").data("kendoSelectBox");t.close(),t.value(t.options.title)}}),v=i.extend({init:function(){this.stack=[],this.currentCommandIndex=-1},push:function(e){this.stack=this.stack.slice(0,this.currentCommandIndex+1),this.currentCommandIndex=this.stack.push(e)-1},undo:function(){this.canUndo()&&this.stack[this.currentCommandIndex--].undo()},redo:function(){this.canRedo()&&this.stack[++this.currentCommandIndex].redo()},canUndo:function(){return this.currentCommandIndex>=0},canRedo:function(){return this.currentCommandIndex!=this.stack.length-1}}),_=i.extend({init:function(e){this.editor=e},keydown:function(n){var i,r=this,o=r.editor,a=o.keyboard,s=a.isTypingKey(n),l=h(e.Event(),n);return r.editor.trigger("keydown",l),l.isDefaultPrevented()?(n.preventDefault(),!0):l.isDefaultPrevented()||!s||a.isTypingInProgress()?!1:(i=o.getRange(),r.startRestorePoint=new d(i),a.startTyping(function(){r.endRestorePoint=t(o,r.startRestorePoint)}),!0)},keyup:function(e){var t=this.editor.keyboard;return this.editor.trigger("keyup",e),t.isTypingInProgress()?(t.endTyping(),!0):!1}}),y=i.extend({init:function(e){this.editor=e},keydown:function(e){var i,r,o,a,l;if(e.keyCode===n.keys.BACKSPACE){if(i=this.editor,r=i.getRange(),o=n.support.browser.msie?"":'<br _moz_dirty="" />',r.collapsed)return;e.preventDefault(),a=new d(r),l=r.commonAncestorContainer,/t(able|body|r)/i.test(s.name(l))&&r.selectNode(s.closest(l,"table")),r.deleteContents(),l=r.commonAncestorContainer,"p"===s.name(l)&&""===l.innerHTML&&(l.innerHTML=o,r.setStart(l,0),r.collapse(!0),i.selectRange(r)),t(i,a)}},keyup:function(){}}),w=i.extend({init:function(e){this.editor=e,this.systemCommandIsInProgress=!1},createUndoCommand:function(){this.startRestorePoint=this.endRestorePoint=t(this.editor,this.startRestorePoint)},changed:function(){return this.startRestorePoint?this.startRestorePoint.html!=this.editor.body.innerHTML:!1},keydown:function(e){var t=this,n=t.editor,i=n.keyboard;return i.isModifierKey(e)?(i.isTypingInProgress()&&i.endTyping(!0),t.startRestorePoint=new d(n.getRange()),!0):i.isSystem(e)?(t.systemCommandIsInProgress=!0,t.changed()&&(t.systemCommandIsInProgress=!1,t.createUndoCommand()),!0):!1},keyup:function(){var e=this;return e.systemCommandIsInProgress&&e.changed()?(e.systemCommandIsInProgress=!1,e.createUndoCommand(),!0):!1}}),b=i.extend({init:function(e){this.handlers=e,this.typingInProgress=!1},isCharacter:function(e){return e>=48&&90>=e||e>=96&&111>=e||e>=186&&192>=e||e>=219&&222>=e||229==e},toolFromShortcut:function(t,n){var i,r,o=String.fromCharCode(n.keyCode);for(i in t)if(r=e.extend({ctrl:!1,alt:!1,shift:!1},t[i].options),(r.key==o||r.key==n.keyCode)&&r.ctrl==n.ctrlKey&&r.alt==n.altKey&&r.shift==n.shiftKey)return i},isTypingKey:function(e){var t=e.keyCode;return this.isCharacter(t)&&!e.ctrlKey&&!e.altKey||32==t||13==t||8==t||46==t&&!e.shiftKey&&!e.ctrlKey&&!e.altKey},isModifierKey:function(e){var t=e.keyCode;return 17==t&&!e.shiftKey&&!e.altKey||16==t&&!e.ctrlKey&&!e.altKey||18==t&&!e.ctrlKey&&!e.shiftKey},isSystem:function(e){return 46==e.keyCode&&e.ctrlKey&&!e.altKey&&!e.shiftKey},startTyping:function(e){this.onEndTyping=e,this.typingInProgress=!0},stopTyping:function(){this.typingInProgress&&this.onEndTyping&&this.onEndTyping(),this.typingInProgress=!1},endTyping:function(t){var n=this;n.clearTimeout(),t?n.stopTyping():n.timeout=window.setTimeout(e.proxy(n.stopTyping,n),1e3)},isTypingInProgress:function(){return this.typingInProgress},clearTimeout:function(){window.clearTimeout(this.timeout)},notify:function(e,t){var n,i=this.handlers;for(n=0;i.length>n&&!i[n][t](e);n++);},keydown:function(e){this.notify(e,"keydown")},keyup:function(e){this.notify(e,"keyup")}}),k=i.extend({init:function(e){this.editor=e,this.cleaners=[new C,new S,new T]},htmlToFragment:function(e){var t=this.editor,n=t.document,i=s.create(n,"div"),r=n.createDocumentFragment();for(i.innerHTML=e;i.firstChild;)r.appendChild(i.firstChild);return r},isBlock:function(e){return/<(div|p|ul|ol|table|h[1-6])/i.test(e)},_startModification:function(){var e,t,n=this.editor;if(!this._inProgress)return this._inProgress=!0,e=n.getRange(),t=new d(e),s.persistScrollTop(n.document),{range:e,restorePoint:t}},_endModification:function(e){t(this.editor,e.restorePoint),this.editor._selectionChange(),this._inProgress=!1},_contentModification:function(e,t){var n=this,i=n.editor,r=n._startModification();r&&(e.call(n,i,r.range),setTimeout(function(){t.call(n,i,r.range),n._endModification(r)}))},oncut:function(){this._contentModification(e.noop,e.noop)},_fileToDataURL:function(t,n){var i=t.getAsFile(),r=new FileReader;r.onload=n||e.noop,r.readAsDataURL(i)},_triggerPaste:function(e,t){var n={html:e||""};n.html=n.html.replace(/\ufeff/g,""),this.editor.trigger("paste",n),this.paste(n.html,t||{})},_handleImagePaste:function(e){var t,n,i,r;if("FileReader"in window&&(t=this,n=e.clipboardData||e.originalEvent.clipboardData,i=n&&(n.items||n.files),i&&i.length&&/^image\//i.test(i[0].type)&&(r=t._startModification())))return this._fileToDataURL(i[0],function(e){t._triggerPaste('<img src="'+e.target.result+'" />'),t._endModification(r)}),!0},onpaste:function(t){this._handleImagePaste(t)||this._contentModification(function(i,r){var o,a,l,c=s.create(i.document,"div",{className:"k-paste-container",innerHTML:"﻿"}),d=n.support.browser;i.body.appendChild(c),d.msie&&11>d.version?(t.preventDefault(),o=i.createRange(),o.selectNodeContents(c),i.selectRange(o),a=i.document.body.createTextRange(),a.moveToElementText(c),e(i.body).unbind("paste"),a.execCommand("Paste"),e(i.body).bind("paste",e.proxy(this.onpaste,this))):(l=i.createRange(),l.selectNodeContents(c),i.selectRange(l)),r.deleteContents()},function(t,n){var i,r="";t.selectRange(n),i=e(t.body).children(".k-paste-container"),i.each(function(){var e=this.lastChild;e&&s.is(e,"br")&&s.remove(e),r+=this.innerHTML}),i.remove(),this._triggerPaste(r,{clean:!0})})},splittableParent:function(e,t){var n,i;if(e)return s.closestEditableOfType(t,["p","ul","ol"])||t.parentNode;if(n=t.parentNode,i=t.ownerDocument.body,s.isInline(n))for(;n.parentNode!=i&&!s.isBlock(n.parentNode);)n=n.parentNode;return n},paste:function(t,n){var i,o,a,l,c,d,p,f,g,m,v,_=this.editor;for(n=h({clean:!1,split:!0},n),i=0,o=this.cleaners.length;o>i;i++)this.cleaners[i].applicable(t)&&(t=this.cleaners[i].clean(t));if(n.clean&&(t=t.replace(/(<br>(\s|&nbsp;)*)+(<\/?(div|p|li|col|t))/gi,"$3"),t=t.replace(/<(a|span)[^>]*><\/\1>/gi,"")),t=t.replace(/^<li/i,"<ul><li").replace(/li>$/g,"li></ul>"),a=this.isBlock(t),_.focus(),l=_.getRange(),l.deleteContents(),l.startContainer==_.document&&l.selectNodeContents(_.body),c=new u,d=c.addCaret(l),p=this.splittableParent(a,d),f=!1,g=p!=_.body&&!s.is(p,"td"),n.split&&g&&(a||s.isInline(p))&&(l.selectNode(d),r.RangeUtils.split(l,p,!0),f=!0),m=this.htmlToFragment(t),m.firstChild&&"k-paste-container"===m.firstChild.className){for(v=[],i=0,o=m.childNodes.length;o>i;i++)v.push(m.childNodes[i].innerHTML);m=this.htmlToFragment(v.join("<br />"))}if(e(m.childNodes).filter("table").addClass("k-table").end().find("table").addClass("k-table"),l.insertNode(m),p=this.splittableParent(a,d),f){for(;d.parentNode!=p;)s.unwrap(d.parentNode);s.unwrap(d.parentNode)}s.normalize(l.commonAncestorContainer),d.style.display="inline",s.restoreScrollTop(_.document),s.scrollTo(d),c.removeCaret(l),_.selectRange(l)}}),x=i.extend({clean:function(e){var t,n,i=this,r=i.replacements;for(t=0,n=r.length;n>t;t+=2)e=e.replace(r[t],r[t+1]);return e}}),C=x.extend({init:function(){this.replacements=[/<(\/?)script([^>]*)>/i,"<$1telerik:script$2>"]},applicable:function(e){return/<script[^>]*>/i.test(e)}}),S=x.extend({init:function(){this.replacements=[/<\?xml[^>]*>/gi,"",/<!--(.|\n)*?-->/g,"",/&quot;/g,"'",/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1",/<br><br>/g,"<BR><BR>",/<br>(?!\n)/g," ",/<table([^>]*)>(\s|&nbsp;)+<t/gi,"<table$1><t",/<tr[^>]*>(\s|&nbsp;)*<\/tr>/gi,"",/<tbody[^>]*>(\s|&nbsp;)*<\/tbody>/gi,"",/<table[^>]*>(\s|&nbsp;)*<\/table>/gi,"",/<BR><BR>/g,"<br>",/^\s*(&nbsp;)+/gi,"",/(&nbsp;|<br[^>]*>)+\s*$/gi,"",/mso-[^;"]*;?/gi,"",/<(\/?)b(\s[^>]*)?>/gi,"<$1strong$2>",/<(\/?)i(\s[^>]*)?>/gi,"<$1em$2>",/<o:p>&nbsp;<\/o:p>/gi,"&nbsp;",/<\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\n)*?<\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,"",/<\/o>/g,"",/style=(["|'])\s*\1/g,"",/(<br[^>]*>)?\n/g,function(e,t){return t?e:" "
}]},applicable:function(e){return/class="?Mso|style="[^"]*mso-/i.test(e)||/urn:schemas-microsoft-com:office/.test(e)},stripEmptyAnchors:function(e){return e.replace(/<a([^>]*)>\s*<\/a>/gi,function(e,t){return!t||t.indexOf("href")<0?"":e})},listType:function(e){var t;return/^(<span [^>]*texhtml[^>]*>)?<span [^>]*(Symbol|Wingdings)[^>]*>/i.test(e)&&(t=!0),e=e.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g," "),!t&&/^[\u2022\u00b7\u00a7\u00d8o]\u00a0+/.test(e)||t&&/^.\u00a0+/.test(e)?"ul":/^\s*\w+[\.\)]\u00a0{2,}/.test(e)?"ol":void 0},_convertToLi:function(e){var t;return 1==e.childNodes.length?t=e.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,""):(s.remove(e.firstChild),3==e.firstChild.nodeType&&/^[ivx]+\.$/i.test(e.firstChild.nodeValue)&&s.remove(e.firstChild),/^(&nbsp;|\s)+$/i.test(e.firstChild.innerHTML)&&s.remove(e.firstChild),t=e.innerHTML),s.remove(e),s.create(document,"li",{innerHTML:t})},lists:function(t){var n,i,r,o,a,l,c,d,u,h=e(s.blockElements.join(","),t),p=-1,f={ul:{},ol:{}},g=t;for(r=0;h.length>r;r++)if(o=h[r],a=this.listType(o.innerHTML),i=s.name(o),"td"!=i)if(a&&"p"==i){if(l=parseFloat(o.style.marginLeft||0),c=f[a][l],(l>p||!c)&&(c=s.create(document,a),g==t?s.insertBefore(c,o):g.appendChild(c),f[a][l]=c),n!=a)for(d in f)for(u in f[d])e.contains(c,f[d][u])&&delete f[d][u];g=this._convertToLi(o),c.appendChild(g),p=l,n=a}else o.innerHTML?(f={ul:{},ol:{}},g=t,p=-1):s.remove(o)},removeAttributes:function(e){for(var t=e.attributes,n=t.length;n--;)"colspan"!=s.name(t[n])&&e.removeAttributeNode(t[n])},createColGroup:function(t){var i=t.cells,r=e(t).closest("table"),o=r.children("colgroup");2>i.length||(o.length&&(i=o.children(),o[0].parentNode.removeChild(o[0])),o=e(e.map(i,function(e){var t=e.width;return t&&0!==parseInt(t,10)?n.format('<col style="width:{0}px;"/>',t):"<col />"}).join("")),o.is("colgroup")||(o=e("<colgroup/>").append(o)),o.prependTo(r))},convertHeaders:function(t){var n,i=t.cells,r=e.map(i,function(t){var n=e(t).children("p").children("strong")[0];return n&&"strong"==s.name(n)?n:void 0});if(r.length==i.length){for(n=0;r.length>n;n++)s.unwrap(r[n]);for(e(t).closest("table").find("colgroup").after("<thead></thead>").end().find("thead").append(t),n=0;i.length>n;n++)s.changeTag(i[n],"th")}},removeParagraphs:function(t){var n,i,r,o,a;for(n=0;t.length>n;n++)for(this.removeAttributes(t[n]),o=e(t[n]),a=o.children("p"),i=0,r=a.length;r>i;i++)r-1>i&&s.insertAfter(s.create(document,"br"),a[i]),s.unwrap(a[i])},removeDefaultColors:function(e){for(var t=0;e.length>t;t++)/^\s*color:\s*[^;]*;?$/i.test(e[t].style.cssText)&&s.unwrap(e[t])},tables:function(t){var n,i,r,o,a,s=e(t).find("table"),l=this;for(o=0;s.length>o;o++){for(n=s[o].rows,r=i=n[0],a=1;n.length>a;a++)n[a].cells.length>r.cells.length&&(r=n[a]);l.createColGroup(r),l.convertHeaders(i),l.removeAttributes(s[o]),l.removeParagraphs(s.eq(o).find("td,th")),l.removeDefaultColors(s.eq(o).find("span"))}},headers:function(t){var n,i=e(t).find("p.MsoTitle");for(n=0;i.length>n;n++)s.changeTag(i[n],"h1")},clean:function(e){var t,n=this;return e=x.fn.clean.call(n,e),e=n.stripEmptyAnchors(e),t=s.create(document,"div",{innerHTML:e}),n.headers(t),n.lists(t),n.tables(t),e=t.innerHTML.replace(/(<[^>]*)\s+class="?[^"\s>]*"?/gi,"$1")}}),T=x.extend({init:function(){this.replacements=[/\s+class="Apple-style-span[^"]*"/gi,"",/<(div|p|h[1-6])\s+style="[^"]*"/gi,"<$1",/^<div>(.*)<\/div>$/,"$1"]},applicable:function(e){return/class="?Apple-style-span|style="[^"]*-webkit-nbsp-mode/i.test(e)}});h(r,{Command:p,GenericCommand:f,InsertHtmlCommand:g,InsertHtmlTool:m,UndoRedoStack:v,TypingHandler:_,SystemHandler:w,BackspaceHandler:y,Keyboard:b,Clipboard:k,Cleaner:x,MSWordFormatCleaner:S,WebkitFormatCleaner:T}),a("insertHtml",new m({template:new c({template:o.dropDownListTemplate,title:"Insert HTML",initialValue:"Insert HTML"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Class,i=t.ui.editor,r=t.ui.Editor.fn.options.formats,o=i.EditorUtils,a=i.Tool,s=i.ToolTemplate,l=i.FormatTool,c=i.Dom,d=i.RangeUtils,u=e.extend,h=i.EditorUtils.registerTool,p=i.EditorUtils.registerFormat,f="k-marker",g=n.extend({init:function(e){this.format=e},numberOfSiblings:function(e){var t,n=0,i=0,r=0,o=e.parentNode;for(t=o.firstChild;t;t=t.nextSibling)t!=e&&(t.className==f?r++:3==t.nodeType?n++:i++);return r>1&&o.firstChild.className==f&&o.lastChild.className==f?0:i+n},findSuitable:function(e,t){return!t&&this.numberOfSiblings(e)>0?null:c.parentOfType(e,this.format[0].tags)},findFormat:function(e){var t,n,i,r,o,a=this.format,s=c.attrEquals;for(t=0,n=a.length;n>t;t++){if(i=e,r=a[t].tags,o=a[t].attr,i&&c.ofType(i,r)&&s(i,o))return i;for(;i;)if(i=c.parentOfType(i,r),i&&s(i,o))return i}return null},isFormatted:function(e){var t,n;for(t=0,n=e.length;n>t;t++)if(this.findFormat(e[t]))return!0;return!1}}),m=n.extend({init:function(e,t){this.finder=new g(e),this.attributes=u({},e[0].attr,t),this.tag=e[0].tags[0]},wrap:function(e){return c.wrap(e,c.create(e.ownerDocument,this.tag,this.attributes))},activate:function(e,t){this.finder.isFormatted(t)?(this.split(e),this.remove(t)):this.apply(t)},toggle:function(e){var t=d.textNodes(e);t.length>0&&this.activate(e,t)},apply:function(e){var t,n,i,r,o=[];for(t=0,n=e.length;n>t;t++)i=e[t],r=this.finder.findSuitable(i),r?c.attr(r,this.attributes):r=this.wrap(i),o.push(r);this.consolidate(o)},remove:function(e){var t,n,i;for(t=0,n=e.length;n>t;t++)i=this.finder.findFormat(e[t]),i&&(this.attributes&&this.attributes.style?(c.unstyle(i,this.attributes.style),i.style.cssText||i.attributes["class"]||c.unwrap(i)):c.unwrap(i))},split:function(e){var t,n,i=d.textNodes(e),r=i.length;if(r>0)for(t=0;r>t;t++)n=this.finder.findFormat(i[t]),n&&d.split(e,n,!0)},consolidate:function(e){for(var t,n;e.length>1;)if(t=e.pop(),n=e[e.length-1],t.previousSibling&&t.previousSibling.className==f&&n.appendChild(t.previousSibling),t.tagName==n.tagName&&t.previousSibling==n&&t.style.cssText==n.style.cssText){for(;t.firstChild;)n.appendChild(t.firstChild);c.remove(t)}}}),v=g.extend({init:function(e,t){this.format=e,this.greedyProperty=t,g.fn.init.call(this,e)},getInlineCssValue:function(t){var n,i,r,o,a,s,l,d,u,h,p,f,g=t.attributes,m=e.trim;if(g)for(n=0,i=g.length;i>n;n++)if(r=g[n],o=r.nodeName,a=r.nodeValue,r.specified&&"style"==o)for(s=m(a||t.style.cssText).split(";"),d=0,u=s.length;u>d;d++)if(l=s[d],l.length){if(h=l.split(":"),p=m(h[0].toLowerCase()),f=m(h[1]),p!=this.greedyProperty)continue;return p.indexOf("color")>=0?c.toHex(f):f}},getFormatInner:function(t){var n,i,r,o=e(c.isDataNode(t)?t.parentNode:t),a=o.parentsUntil("[contentEditable]").addBack().toArray().reverse();for(n=0,i=a.length;i>n;n++)if(r="className"==this.greedyProperty?a[n].className:this.getInlineCssValue(a[n]))return r;return"inherit"},getFormat:function(e){var t,n,i=this.getFormatInner(e[0]);for(t=1,n=e.length;n>t;t++)if(i!=this.getFormatInner(e[t]))return"";return i},isFormatted:function(e){return""!==this.getFormat(e)}}),_=m.extend({init:function(e,n,i){m.fn.init.call(this,e,n),this.values=n,this.finder=new v(e,i),i&&(this.greedyProperty=t.toCamelCase(i))},activate:function(e,t){var n=this.greedyProperty,i="apply";this.split(e),n&&"inherit"==this.values.style[n]&&(i="remove"),this[i](t)}}),y=l.extend({init:function(e){l.fn.init.call(this,u(e,{finder:new g(e.format),formatter:function(){return new m(e.format)}}))}}),w=a.extend({update:function(e,t){var n=e.data(this.type);n.close(),n.value(this.finder.getFormat(t))}}),b=w.extend({init:function(e){a.fn.init.call(this,e),this.type=t.support.browser.msie||t.support.touch?"kendoDropDownList":"kendoComboBox",this.format=[{tags:["span"]}],this.finder=new v(this.format,e.cssAttr)},command:function(e){var t=this.options,n=this.format,r={};return new i.FormatCommand(u(e,{formatter:function(){return r[t.domAttr]=e.value,new _(n,{style:r},t.cssAttr)}}))},initialize:function(e,t){var n,i=t.editor,r=this.options,o=r.name,s=[];r.defaultValue&&(s=[{text:i.options.messages[r.defaultValue[0].text],value:r.defaultValue[0].value}]),n=s.concat(r.items?r.items:i.options[o]||[]),e[this.type]({dataTextField:"text",dataValueField:"value",dataSource:n,change:function(){a.exec(i,o,this.value())},highlightFirst:!1}),e.closest(".k-widget").removeClass("k-"+o).find("*").addBack().attr("unselectable","on"),e.data(this.type).value("inherit")}}),k=a.extend({init:function(e){a.fn.init.call(this,e),this.format=[{tags:["span"]}],this.finder=new v(this.format,e.cssAttr)},options:{palette:"websafe"},update:function(){this._widget.close()},command:function(e){var t=this.options,n=this.format,r={};return new i.FormatCommand(u(e,{formatter:function(){return r[t.domAttr]=e.value,new _(n,{style:r},t.cssAttr)}}))},initialize:function(n,i){var r=i.editor,o=this.name,s=u({},k.fn.options,this.options),l=s.palette;n=this._widget=new t.ui.ColorPicker(n,{value:e.isArray(l)?l[0]:"#000",toolIcon:"k-"+s.name,palette:l,change:function(){var e=n.value();e&&a.exec(r,o,e),r.focus()},activate:function(e){e.preventDefault(),n.trigger("change")}}),n.wrapper.attr({title:i.title,unselectable:"on"}).find("*").attr("unselectable","on")}});u(i,{InlineFormatFinder:g,InlineFormatter:m,DelayedExecutionTool:w,GreedyInlineFormatFinder:v,GreedyInlineFormatter:_,InlineFormatTool:y,FontTool:b,ColorTool:k}),p("bold",[{tags:["strong","b"]},{tags:["span"],attr:{style:{fontWeight:"bold"}}}]),h("bold",new y({key:"B",ctrl:!0,format:r.bold,template:new s({template:o.buttonTemplate,title:"Bold"})})),p("italic",[{tags:["em","i"]},{tags:["span"],attr:{style:{fontStyle:"italic"}}}]),h("italic",new y({key:"I",ctrl:!0,format:r.italic,template:new s({template:o.buttonTemplate,title:"Italic"})})),p("underline",[{tags:["span"],attr:{style:{textDecoration:"underline"}}},{tags:["u"]}]),h("underline",new y({key:"U",ctrl:!0,format:r.underline,template:new s({template:o.buttonTemplate,title:"Underline"})})),p("strikethrough",[{tags:["del","strike"]},{tags:["span"],attr:{style:{textDecoration:"line-through"}}}]),h("strikethrough",new y({format:r.strikethrough,template:new s({template:o.buttonTemplate,title:"Strikethrough"})})),p("superscript",[{tags:["sup"]}]),h("superscript",new y({format:r.superscript,template:new s({template:o.buttonTemplate,title:"Superscript"})})),p("subscript",[{tags:["sub"]}]),h("subscript",new y({format:r.subscript,template:new s({template:o.buttonTemplate,title:"Subscript"})})),h("foreColor",new k({cssAttr:"color",domAttr:"color",name:"foreColor",template:new s({template:o.colorPickerTemplate,title:"Color"})})),h("backColor",new k({cssAttr:"background-color",domAttr:"backgroundColor",name:"backColor",template:new s({template:o.colorPickerTemplate,title:"Background Color"})})),h("fontName",new b({cssAttr:"font-family",domAttr:"fontFamily",name:"fontName",defaultValue:[{text:"fontNameInherit",value:"inherit"}],template:new s({template:o.comboBoxTemplate,title:"Font Name"})})),h("fontSize",new b({cssAttr:"font-size",domAttr:"fontSize",name:"fontSize",defaultValue:[{text:"fontSizeInherit",value:"inherit"}],template:new s({template:o.comboBoxTemplate,title:"Font Size"})}))}(window.kendo.jQuery),function(e){var t,n=window.kendo,i=n.Class,r=e.extend,o=n.ui.editor,a=n.ui.Editor.fn.options.formats,s=o.Dom,l=o.Command,c=o.ToolTemplate,d=o.FormatTool,u=o.EditorUtils,h=u.registerTool,p=u.registerFormat,f=o.RangeUtils,g=i.extend({init:function(e){this.format=e},contains:function(e,t){var n,i,r;for(n=0,i=t.length;i>n;n++)if(r=t[n],!r||!s.isAncestorOrSelf(e,r))return!1;return!0},findSuitable:function(t){var n,i,r,o,a=this.format,l=[];for(n=0,i=t.length;i>n;n++){for(o=a.length-1;o>=0&&!(r=s.ofType(t[n],a[o].tags)?t[n]:s.parentOfType(t[n],a[o].tags));o--);if(!r||"true"===r.contentEditable)return[];e.inArray(r,l)<0&&l.push(r)}for(n=0,i=l.length;i>n;n++)if(this.contains(l[n],l))return[l[n]];return l},findFormat:function(e){var t,n,i,r,o,a=this.format,l=s.editableParent(e);for(t=0,n=a.length;n>t;t++)for(i=e,r=a[t].tags,o=a[t].attr;i&&s.isAncestorOf(l,i);){if(s.ofType(i,r)&&s.attrEquals(i,o))return i;i=i.parentNode}return null},getFormat:function(e){var t,n,i=this,r=function(e){return i.findFormat(s.isDataNode(e)?e.parentNode:e)},o=r(e[0]);if(!o)return"";for(t=1,n=e.length;n>t;t++)if(o!=r(e[t]))return"";return o.nodeName.toLowerCase()},isFormatted:function(e){for(var t=0,n=e.length;n>t;t++)if(!this.findFormat(e[t]))return!1;return!0}}),m=i.extend({init:function(e,t){this.format=e,this.values=t,this.finder=new g(e)},wrap:function(e,t,n){var i,r,o,a,l,c=1==n.length?s.blockParentOrBody(n[0]):s.commonAncestor.apply(null,n);for(s.isInline(c)&&(c=s.blockParentOrBody(c)),i=s.significantChildNodes(c),r=s.findNodeIndex(i[0]),o=s.create(c.ownerDocument,e,t),a=0;i.length>a;a++)l=i[a],s.isBlock(l)?(s.attr(l,t),o.childNodes.length&&(s.insertBefore(o,l),o=o.cloneNode(!1)),r=s.findNodeIndex(l)+1):o.appendChild(l);o.firstChild&&s.insertAt(c,o,r)},apply:function(t){function n(e){return r({},e&&e.attr,d)}var i,o,a,l,c,d=this.values,h=s.filter("img",t),p=u.formatByName("img",this.format),f=n(p);if(e.each(h,function(){s.attr(this,f)}),h.length!=t.length)if(o=s.filter("img",t,!0),a=this.finder.findSuitable(o),a.length)for(l=0,c=a.length;c>l;l++)i=u.formatByName(s.name(a[l]),this.format),s.attr(a[l],n(i));else i=this.format[0],this.wrap(i.tags[0],n(i),o)},remove:function(e){var t,n,i,r,o;for(t=0,n=e.length;n>t;t++)i=this.finder.findFormat(e[t]),i&&(o=s.name(i),"div"!=o||i.getAttribute("class")?(r=u.formatByName(o,this.format),r.attr.style&&s.unstyle(i,r.attr.style),r.attr.className&&s.removeClass(i,r.attr.className)):s.unwrap(i))},toggle:function(e){var t=this,n=f.nodes(e);t.finder.isFormatted(n)?t.remove(n):t.apply(n)}}),v=i.extend({init:function(e,t){var n=this;n.format=e,n.values=t,n.finder=new g(e)},apply:function(e){var t,n,i,r,a,l,c,d=this.format,u=s.blockParents(e),h=d[0].tags[0];if(u.length)for(t=0,n=u.length;n>t;t++)c=s.name(u[t]),"li"==c?(i=u[t].parentNode,r=new o.ListFormatter(i.nodeName.toLowerCase(),h),a=this.editor.createRange(),a.selectNode(u[t]),r.toggle(a)):h&&("td"==c||u[t].attributes.contentEditable)?new m(d,this.values).apply(u[t].childNodes):(l=s.changeTag(u[t],h),s.attr(l,d[0].attr));else new m(d,this.values).apply(e)},toggle:function(e){var t=f.textNodes(e);t.length||(e.selectNodeContents(e.commonAncestorContainer),t=f.textNodes(e),t.length||(t=s.significantChildNodes(e.commonAncestorContainer))),this.apply(t)}}),_=l.extend({init:function(e){e.formatter=e.formatter(),l.fn.init.call(this,e)}}),y=d.extend({init:function(e){d.fn.init.call(this,r(e,{finder:new g(e.format),formatter:function(){return new m(e.format)}}))}});r(o,{BlockFormatFinder:g,BlockFormatter:m,GreedyBlockFormatter:v,FormatCommand:_,BlockFormatTool:y}),t=["ul","ol","li"],p("justifyLeft",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"left"}}},{tags:["img"],attr:{style:{"float":"left",display:"",marginLeft:"",marginRight:""}}},{tags:t,attr:{style:{textAlign:"left",listStylePosition:""}}}]),h("justifyLeft",new y({format:a.justifyLeft,template:new c({template:u.buttonTemplate,title:"Justify Left"})})),p("justifyCenter",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"center"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto","float":""}}},{tags:t,attr:{style:{textAlign:"center",listStylePosition:"inside"}}}]),h("justifyCenter",new y({format:a.justifyCenter,template:new c({template:u.buttonTemplate,title:"Justify Center"})})),p("justifyRight",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"right"}}},{tags:["img"],attr:{style:{"float":"right",display:"",marginLeft:"",marginRight:""}}},{tags:t,attr:{style:{textAlign:"right",listStylePosition:"inside"}}}]),h("justifyRight",new y({format:a.justifyRight,template:new c({template:u.buttonTemplate,title:"Justify Right"})})),p("justifyFull",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"justify"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto","float":""}}},{tags:t,attr:{style:{textAlign:"justify",listStylePosition:""}}}]),h("justifyFull",new y({format:a.justifyFull,template:new c({template:u.buttonTemplate,title:"Justify Full"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=e.extend,i=t.ui.editor,r=i.Dom,o=i.Command,a=i.Tool,s=i.BlockFormatter,l=r.normalize,c=i.RangeUtils,d=i.EditorUtils.registerTool,u=o.extend({init:function(e){this.options=e,o.fn.init.call(this,e)},_insertMarker:function(e,t){var n,i=r.create(e,"a");return i.className="k-marker",t.insertNode(i),i.parentNode||(n=t.commonAncestorContainer,n.innerHTML="",n.appendChild(i)),l(i.parentNode),i},_moveFocus:function(e,t){if(r.is(t,"img"))e.setStartBefore(t);else{e.selectNodeContents(t);var n=c.textNodes(e)[0];if(n)r.is(n,"img")?e.setStartBefore(n):e.selectNodeContents(n);else{for(;t.childNodes.length&&!r.is(t.firstChild,"br");)t=t.firstChild;e.selectNodeContents(t)}}},shouldTrim:function(e){var t="p,h1,h2,h3,h4,h5,h6".split(","),n=r.parentOfType(e.startContainer,t),i=r.parentOfType(e.endContainer,t);return n&&!i||!n&&i},_blankAfter:function(e){for(;e&&(r.isMarker(e)||""===r.stripBom(e.nodeValue));)e=e.nextSibling;return!e},exec:function(){var e,t,n,o,a,d,u,h,p=this.getRange(),f=c.documentFromRange(p),g=i.emptyElementContent,m=this.shouldTrim(p);p.deleteContents(),a=this._insertMarker(f,p),d=r.closestEditableOfType(a,["li"]),u=r.closestEditableOfType(a,"h1,h2,h3,h4,h5,h6".split(",")),d?r.emptyNode(d)&&(o=r.create(f,"p"),d.nextSibling&&(h=p.cloneRange(),h.selectNode(d),c.split(h,d.parentNode)),r.insertAfter(o,d.parentNode),r.remove(1==d.parentNode.childNodes.length?d.parentNode:d),o.innerHTML=g,n=o):u&&this._blankAfter(a)&&(o=r.create(f,"p"),r.insertAfter(o,u),o.innerHTML=g,r.remove(a),n=o),n||(d||u||new s([{tags:["p"]}]).apply([a]),p.selectNode(a),e=r.parentOfType(a,[d?"li":u?r.name(u):"p"]),c.split(p,e,m),t=e.previousSibling,r.is(t,"li")&&t.firstChild&&!r.is(t.firstChild,"br")&&(t=t.firstChild),n=e.nextSibling,r.is(n,"li")&&n.firstChild&&!r.is(n.firstChild,"br")&&(n=n.firstChild),r.remove(e),this.clean(t),this.clean(n,{links:!0}),l(t)),l(n),this._moveFocus(p,n),p.collapse(!0),r.scrollTo(n),c.selectRange(p)},clean:function(e,t){var n=e;if(e.firstChild&&r.is(e.firstChild,"br")&&r.remove(e.firstChild),r.isDataNode(e)&&!e.nodeValue&&(e=e.parentNode),e){for(;e.firstChild&&1==e.firstChild.nodeType;)e=e.firstChild;if(!r.isEmpty(e)&&/^\s*$/.test(e.innerHTML)&&(e.innerHTML=i.emptyElementContent),t&&t.links)for(;e!=n;){if(r.is(e,"a")&&r.emptyNode(e)){r.unwrap(e);break}e=e.parentNode}}}}),h=o.extend({init:function(e){this.options=e,o.fn.init.call(this,e)},exec:function(){var e,n=this.getRange(),i=r.create(c.documentFromRange(n),"br"),o=t.support.browser,a=o.msie&&11>o.version;n.deleteContents(),n.insertNode(i),l(i.parentNode),a||i.nextSibling&&!r.isWhitespace(i.nextSibling)||(e=i.cloneNode(!0),e.className="k-br",r.insertAfter(e,i)),n.setStartAfter(i),n.collapse(!0),r.scrollTo(i.nextSibling||i),c.selectRange(n)}});n(i,{ParagraphCommand:u,NewLineCommand:h}),d("insertLineBreak",new a({key:13,shift:!0,command:h})),d("insertParagraph",new a({key:13,command:u}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Class,i=e.extend,r=t.ui.editor,o=r.Dom,a=r.RangeUtils,s=r.EditorUtils,l=r.Command,c=r.ToolTemplate,d=r.FormatTool,u=r.BlockFormatFinder,h=a.textNodes,p=r.EditorUtils.registerTool,f=u.extend({init:function(e){this.tag=e;var t=this.tags=["ul"==e?"ol":"ul",e];u.fn.init.call(this,[{tags:t}])},isFormatted:function(e){var t,n,i=[];for(n=0;e.length>n;n++)(t=this.findFormat(e[n]))&&o.name(t)==this.tag&&i.push(t);if(1>i.length)return!1;if(i.length!=e.length)return!1;for(n=0;i.length>n&&i[n].parentNode==t.parentNode;n++)if(i[n]!=t)return!1;return!0},findSuitable:function(e){var t=o.parentOfType(e[0],this.tags);return t&&o.name(t)==this.tag?t:null}}),g=n.extend({init:function(e,t){var n=this;n.finder=new f(e),n.tag=e,n.unwrapTag=t},isList:function(e){var t=o.name(e);return"ul"==t||"ol"==t||"dl"==t},wrap:function(e,t){var n,i,r=o.create(e.ownerDocument,"li");for(n=0;t.length>n;n++)if(i=t[n],o.is(i,"li"))e.appendChild(i);else if(this.isList(i))for(;i.firstChild;)e.appendChild(i.firstChild);else if(o.is(i,"td")){for(;i.firstChild;)r.appendChild(i.firstChild);e.appendChild(r),i.appendChild(e),e=e.cloneNode(!1),r=r.cloneNode(!1)}else r.appendChild(i),o.isBlock(i)&&(e.appendChild(r),o.unwrap(i),r=r.cloneNode(!1));r.firstChild&&e.appendChild(r)},containsAny:function(e,t){for(var n=0;t.length>n;n++)if(o.isAncestorOrSelf(e,t[n]))return!0;return!1},suitable:function(e,t){if("k-marker"==e.className){var n=e.nextSibling;if(n&&o.isBlock(n))return!1;if(n=e.previousSibling,n&&o.isBlock(n))return!1}return this.containsAny(e,t)||o.isInline(e)||3==e.nodeType},split:function(t){var n,i,r,s,l,c,d=h(t);if(d.length)for(n=o.parentOfType(d[0],["li"]),i=o.parentOfType(d[d.length-1],["li"]),t.setStartBefore(n),t.setEndAfter(i),r=0,s=d.length;s>r;r++)l=this.finder.findFormat(d[r]),l&&(c=e(l).parents("ul,ol"),c[0]?a.split(t,c.last()[0],!0):a.split(t,l,!0))},merge:function(e,t){for(var n,i=t.previousSibling;i&&("k-marker"==i.className||3==i.nodeType&&o.isWhitespace(i));)i=i.previousSibling;if(i&&o.name(i)==e){for(;t.firstChild;)i.appendChild(t.firstChild);o.remove(t),t=i}for(n=t.nextSibling;n&&("k-marker"==n.className||3==n.nodeType&&o.isWhitespace(n));)n=n.nextSibling;if(n&&o.name(n)==e){for(;t.lastChild;)n.insertBefore(t.lastChild,n.firstChild);o.remove(t)}},breakable:function(e){return e!=e.ownerDocument.body&&!/table|tbody|tr|td/.test(o.name(e))&&!e.attributes.contentEditable},applyOnSection:function(t,n){function i(){u.push(this)}var r,a,s,l,c=this.tag,d=o.closestSplittableParent(n),u=[],h=this.finder.findSuitable(n);for(h||(h=new f("ul"==c?"ol":"ul").findSuitable(n)),/table|tbody/.test(o.name(d))?r=e.map(n,function(e){return o.parentOfType(e,["td"])}):(r=o.significantChildNodes(d),e.grep(r,o.isBlock).length&&(r=e.grep(r,e.proxy(function(e){return this.containsAny(e,n)},this))),r.length||(r=n)),a=0;r.length>a;a++)s=r[a],l=(!h||!o.isAncestorOrSelf(h,s))&&this.suitable(s,n),l&&(h&&this.isList(s)?(e.each(s.childNodes,i),o.remove(s)):u.push(s));u.length==r.length&&this.breakable(d)&&(u=[d]),h||(h=o.create(d.ownerDocument,c),o.insertBefore(h,u[0])),this.wrap(h,u),o.is(h,c)||o.changeTag(h,c),this.merge(c,h)},apply:function(e){var t,n,i,r=0,a=[];do i=o.closestEditable(e[r],["td","body"]),t&&i==t?n.push(e[r]):(t&&a.push({section:t,nodes:n}),n=[e[r]],t=i),r++;while(e.length>r);for(a.push({section:t,nodes:n}),r=0;a.length>r;r++)this.applyOnSection(a[r].section,a[r].nodes)},unwrap:function(t){var n,i,r,a,s=t.ownerDocument.createDocumentFragment(),l=this.unwrapTag;for(i=t.firstChild;i;i=i.nextSibling){for(r=o.create(t.ownerDocument,l||"p");i.firstChild;)a=i.firstChild,o.isBlock(a)?(r.firstChild&&(s.appendChild(r),r=o.create(t.ownerDocument,l||"p")),s.appendChild(a)):r.appendChild(a);r.firstChild&&s.appendChild(r)}n=e(t).parents("ul,ol"),n[0]?(o.insertAfter(s,n.last()[0]),n.last().remove()):o.insertAfter(s,t),o.remove(t)},remove:function(e){var t,n,i;for(n=0,i=e.length;i>n;n++)t=this.finder.findFormat(e[n]),t&&this.unwrap(t)},toggle:function(e){var t,n=this,i=h(e),r=e.commonAncestorContainer;i.length||(e.selectNodeContents(r),i=h(e),i.length||(t=r.ownerDocument.createTextNode(""),e.startContainer.appendChild(t),i=[t],e.selectNode(t.parentNode))),n.finder.isFormatted(i)?(n.split(e),n.remove(i)):n.apply(i)}}),m=l.extend({init:function(e){e.formatter=new g(e.tag),l.fn.init.call(this,e)}}),v=d.extend({init:function(e){this.options=e,d.fn.init.call(this,i(e,{finder:new f(e.tag)}))},command:function(e){return new m(i(e,{tag:this.options.tag}))}});i(r,{ListFormatFinder:f,ListFormatter:g,ListCommand:m,ListTool:v}),p("insertUnorderedList",new v({tag:"ul",template:new c({template:s.buttonTemplate,title:"Insert unordered list"})})),p("insertOrderedList",new v({tag:"ol",template:new c({template:s.buttonTemplate,title:"Insert ordered list"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Class,i=e.extend,r=e.proxy,o=t.ui.editor,a=o.Dom,s=o.RangeUtils,l=o.EditorUtils,c=o.Command,d=o.Tool,u=o.ToolTemplate,h=o.InlineFormatter,p=o.InlineFormatFinder,f=s.textNodes,g=o.EditorUtils.registerTool,m=n.extend({findSuitable:function(e){return a.parentOfType(e,["a"])}}),v=n.extend({init:function(){this.finder=new m},apply:function(e,t){var n,i,r,o,l,c=f(e);t.innerHTML?(n=s.getMarkers(e),i=s.documentFromRange(e),e.deleteContents(),o=a.create(i,"a",t),e.insertNode(o),l=o.parentNode,"a"==a.name(l)&&a.insertAfter(o,l),a.emptyNode(l)&&a.remove(l),n.length>1&&(a.insertAfter(n[n.length-1],o),a.insertAfter(n[1],o),a[c.length>0?"insertBefore":"insertAfter"](n[0],o))):(r=new h([{tags:["a"]}],t),r.finder=this.finder,r.apply(c))}}),_=c.extend({init:function(e){e.formatter={toggle:function(e){new h([{tags:["a"]}]).remove(f(e))}},this.options=e,c.fn.init.call(this,e)}}),y=c.extend({init:function(e){var t=this;t.options=e,c.fn.init.call(t,e),t.formatter=new v,e.url?this.exec=function(){this.formatter.apply(e.range,{href:e.url,innerHTML:e.text||e.url,target:e.target})}:(t.attributes=null,t.async=!0)},_dialogTemplate:function(){return t.template("<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\"><div class='k-edit-label'><label for='k-editor-link-url'>#: messages.linkWebAddress #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-url'></div><div class='k-edit-label k-editor-link-text-row'><label for='k-editor-link-text'>#: messages.linkText #</label></div><div class='k-edit-field k-editor-link-text-row'><input type='text' class='k-input k-textbox' id='k-editor-link-text'></div><div class='k-edit-label'><label for='k-editor-link-title'>#: messages.linkToolTip #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-title'></div><div class='k-edit-label'></div><div class='k-edit-field'><input type='checkbox' class='k-checkbox' id='k-editor-link-target'><label for='k-editor-link-target'>#: messages.linkOpenInNewWindow #</label></div><div class='k-edit-buttons k-state-default'><button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button><button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button></div></div>")({messages:this.editor.options.messages})},exec:function(){var t,n,i,o,s=this.getRange().collapsed,l=this.editor.options.messages;this._initialText="",this._range=this.lockRange(!0),t=f(this._range),n=t.length?this.formatter.finder.findSuitable(t[0]):null,i=t.length&&"img"==a.name(t[0]),o=this.createDialog(this._dialogTemplate(),{title:l.createLink,close:r(this._close,this),visible:!1}),o.find(".k-dialog-insert").click(r(this._apply,this)).end().find(".k-dialog-close").click(r(this._close,this)).end().find(".k-edit-field input").keydown(r(this._keydown,this)).end().find("#k-editor-link-url").val(this.linkUrl(n)).end().find("#k-editor-link-text").val(this.linkText(t)).end().find("#k-editor-link-title").val(n?n.title:"").end().find("#k-editor-link-target").attr("checked",n?"_blank"==n.target:!1).end().find(".k-editor-link-text-row").toggle(!i),t.length>0&&!s&&(this._initialText=e("#k-editor-link-text",o).val()),this._dialog=o.data("kendoWindow").center().open(),e("#k-editor-link-url",o).focus().select()},_keydown:function(e){var n=t.keys;e.keyCode==n.ENTER?this._apply(e):e.keyCode==n.ESC&&this._close(e)},_apply:function(t){var n,i,r,o=this._dialog.element,s=e("#k-editor-link-url",o).val(),l=e("#k-editor-link-text",o);s&&"http://"!=s&&(s.indexOf("@")>0&&!/^(\w+:)|(\/\/)/i.test(s)&&(s="mailto:"+s),this.attributes={href:s},n=e("#k-editor-link-title",o).val(),n&&(this.attributes.title=n),l.is(":visible")&&(i=l.val(),i||this._initialText?i&&i!==this._initialText&&(this.attributes.innerHTML=a.stripBom(i)):this.attributes.innerHTML=s),r=e("#k-editor-link-target",o).is(":checked"),this.attributes.target=r?"_blank":null,this.formatter.apply(this._range,this.attributes)),this._close(t),this.change&&this.change()},_close:function(e){e.preventDefault(),this._dialog.destroy(),a.windowFromDocument(s.documentFromRange(this._range)).focus(),this.releaseRange(this._range)},linkUrl:function(e){return e?e.getAttribute("href",2):"http://"},linkText:function(e){var t="";return 1==e.length?t=e[0].nodeValue:e.length&&(t=e[0].nodeValue+e[1].nodeValue),a.stripBom(t||"")},redo:function(){var e=this.lockRange(!0);this.formatter.apply(e,this.attributes),this.releaseRange(e)}}),w=d.extend({init:function(t){this.options=t,this.finder=new p([{tags:["a"]}]),d.fn.init.call(this,e.extend(t,{command:_}))},initialize:function(e,t){d.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(e,t){e.toggleClass("k-state-disabled",!this.finder.isFormatted(t)).removeClass("k-state-hover")}});i(t.ui.editor,{LinkFormatFinder:m,LinkFormatter:v,UnlinkCommand:_,LinkCommand:y,UnlinkTool:w}),g("createLink",new d({key:"K",ctrl:!0,command:y,template:new u({template:l.buttonTemplate,title:"Create Link"})})),g("unlink",new w({key:"K",ctrl:!0,shift:!0,template:new u({template:l.buttonTemplate,title:"Remove Link"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=e.extend,r=n.ui.editor,o=r.EditorUtils,a=r.Dom,s=o.registerTool,l=r.ToolTemplate,c=r.RangeUtils,d=r.Command,u=r.LinkFormatter,h=c.textNodes,p=n.keys,f="#k-editor-file-url",g="#k-editor-file-title",m=d.extend({init:function(e){var t=this;d.fn.init.call(t,e),t.formatter=new u,t.async=!0,t.attributes={}},insertFile:function(e,t){var n=this.attributes,i=c.documentFromRange(t);if(n.href&&"http://"!=n.href){if(!e)return e=a.create(i,"a",{href:n.href}),e.innerHTML=n.innerHTML,t.deleteContents(),t.insertNode(e),e.nextSibling||a.insertAfter(i.createTextNode("﻿"),e),t.setStartAfter(e),t.setEndAfter(e),c.selectRange(t),!0;a.attr(e,n)}return!1},_dialogTemplate:function(e){return n.template('<div class="k-editor-dialog k-popup-edit-form k-edit-form-container"># if (showBrowser) { #<div class="k-filebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-file-url">#: messages.fileWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-url"></div><div class=\'k-edit-label\'><label for="k-editor-file-title">#: messages.fileTitle #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-title"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button><button class="k-dialog-close k-button">#: messages.dialogCancel #</button></div></div>')({messages:this.editor.options.messages,showBrowser:e})},redo:function(){var e=this,t=e.lockRange();this.formatter.apply(t,this.attributes),e.releaseRange(t)},exec:function(){function e(e){var t=s.element,n=t.find(f).val().replace(/ /g,"%20"),i=t.find(g).val();l.attributes={href:n,innerHTML:""!==i?i:n},m=l.insertFile(v,d),r(e),l.change&&l.change()}function r(e){e.preventDefault(),s.destroy(),a.windowFromDocument(c.documentFromRange(d)).focus(),m||l.releaseRange(d)}function o(t){t.keyCode==p.ENTER?e(t):t.keyCode==p.ESC&&r(t)}var s,l=this,d=l.lockRange(),u=h(d),m=!1,v=u.length?this.formatter.finder.findSuitable(u[0]):null,_=l.editor.options,y=_.messages,w=_.fileBrowser,b=!!(n.ui.FileBrowser&&w&&w.transport&&w.transport.read!==t),k={title:y.insertFile,visible:!1,resizable:b};k.close=r,b&&(k.width=750),s=this.createDialog(l._dialogTemplate(b),k).toggleClass("k-filebrowser-dialog",b).find(".k-dialog-insert").click(e).end().find(".k-dialog-close").click(r).end().find(".k-edit-field input").keydown(o).end().find(f).val(v?v.getAttribute("href",2):"http://").end().find(g).val(v?v.title:"").end().data("kendoWindow"),b&&new n.ui.FileBrowser(s.element.find(".k-filebrowser"),i({},w,{change:function(){s.element.find(f).val(this.value())},apply:e})),s.center().open(),s.element.find(f).focus().select()}});n.ui.editor.FileCommand=m,s("insertFile",new r.Tool({command:m,template:new l({template:o.buttonTemplate,title:"Insert File"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=e.extend,r=n.ui.editor,o=r.EditorUtils,a=r.Dom,s=o.registerTool,l=r.ToolTemplate,c=r.RangeUtils,d=r.Command,u=n.keys,h="#k-editor-image-url",p="#k-editor-image-title",f="#k-editor-image-width",g="#k-editor-image-height",m=d.extend({init:function(e){var t=this;
d.fn.init.call(t,e),t.async=!0,t.attributes={}},insertImage:function(e,t){var n,i=this.attributes,r=c.documentFromRange(t);if(i.src&&"http://"!=i.src){if(n=function(){setTimeout(function(){i.width||e.removeAttribute("width"),i.height||e.removeAttribute("height"),e.removeAttribute("complete")})},!e)return e=a.create(r,"img",i),e.onload=e.onerror=function(){n()},t.deleteContents(),t.insertNode(e),e.nextSibling||a.insertAfter(r.createTextNode("﻿"),e),n(),t.setStartAfter(e),t.setEndAfter(e),c.selectRange(t),!0;a.attr(e,i),n()}return!1},_dialogTemplate:function(e){return n.template('<div class="k-editor-dialog k-popup-edit-form k-edit-form-container"># if (showBrowser) { #<div class="k-filebrowser k-imagebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-image-url">#: messages.imageWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-url"></div><div class=\'k-edit-label\'><label for="k-editor-image-title">#: messages.imageAltText #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-title"></div><div class=\'k-edit-label\'><label for="k-editor-image-width">#: messages.imageWidth #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-width"></div><div class=\'k-edit-label\'><label for="k-editor-image-height">#: messages.imageHeight #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-height"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button><button class="k-dialog-close k-button">#: messages.dialogCancel #</button></div></div>')({messages:this.editor.options.messages,showBrowser:e})},redo:function(){var e=this,t=e.lockRange();e.insertImage(c.image(t),t)||e.releaseRange(t)},exec:function(){function e(e){var t=s.element,n=parseInt(t.find(f).val(),10),i=parseInt(t.find(g).val(),10);l.attributes={src:t.find(h).val().replace(/ /g,"%20"),alt:t.find(p).val()},l.attributes.width=null,l.attributes.height=null,!isNaN(n)&&n>0&&(l.attributes.width=n),!isNaN(i)&&i>0&&(l.attributes.height=i),m=l.insertImage(v,d),r(e),l.change&&l.change()}function r(e){e.preventDefault(),s.destroy(),a.windowFromDocument(c.documentFromRange(d)).focus(),m||l.releaseRange(d)}function o(t){t.keyCode==u.ENTER?e(t):t.keyCode==u.ESC&&r(t)}var s,l=this,d=l.lockRange(),m=!1,v=c.image(d),_=v&&v.getAttribute("width")||"",y=v&&v.getAttribute("height")||"",w=l.editor.options,b=w.messages,k=w.imageBrowser,x=!!(n.ui.ImageBrowser&&k&&k.transport&&k.transport.read!==t),C={title:b.insertImage,visible:!1,resizable:x};C.close=r,x&&(C.width=750),s=this.createDialog(l._dialogTemplate(x),C).toggleClass("k-filebrowser-dialog",x).find(".k-dialog-insert").click(e).end().find(".k-dialog-close").click(r).end().find(".k-edit-field input").keydown(o).end().find(h).val(v?v.getAttribute("src",2):"http://").end().find(p).val(v?v.alt:"").end().find(f).val(_).end().find(g).val(y).end().data("kendoWindow"),x&&new n.ui.ImageBrowser(s.element.find(".k-imagebrowser"),i({},k,{change:function(){s.element.find(h).val(this.value())},apply:e})),s.center().open(),s.element.find(h).focus().select()}});n.ui.editor.ImageCommand=m,s("insertImage",new r.Tool({command:m,template:new l({template:o.buttonTemplate,title:"Insert Image"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui.DropDownList,r=n.ui.editor.Dom,o=i.extend({init:function(t,r){var o=this;i.fn.init.call(o,t,r),n.support.mobileOS.ios&&(this._initSelectOverlay(),this.bind("dataBound",e.proxy(this._initSelectOverlay,this))),o.value(o.options.title),o.bind("open",function(){if(o.options.autoSize){var e,t=o.list;t.css({whiteSpace:"nowrap",width:"auto"}),e=t.width(),e?e+=20:e=o._listWidth,t.css("width",e+n.support.scrollbar()),o._listWidth=e}})},options:{name:"SelectBox"},_initSelectOverlay:function(){var t,i,r,o,a=this,s=a.value(),l=this.dataSource.view(),c="",d=n.htmlEncode;for(i=0;l.length>i;i++)t=l[i],c+="<option value='"+d(t.value)+"'",t.value==s&&(c+=" selected"),c+=">"+d(t.text)+"</option>";r=e("<select class='k-select-overlay'>"+c+"</select>"),o=e(this.element).closest(".k-widget"),o.next(".k-select-overlay").remove(),r.insertAfter(o),r.on("change",function(){a.value(this.value),a.trigger("change")})},value:function(e){var n=this,r=i.fn.value.call(n,e);return e===t?r:(e!==i.fn.value.call(n)&&(n.text(n.options.title),n._current&&n._current.removeClass("k-state-selected"),n.current(null),n._oldIndex=n.selectedIndex=-1),t)},decorate:function(t){var n,i,o,a,s=this,l=s.dataSource,c=l.data();for(t&&s.list.css("background-color",r.getEffectiveBackground(e(t))),n=0;c.length>n;n++)i=c[n].tag||"span",o=c[n].className,a=r.inlineStyle(t,i,{className:o}),a=a.replace(/"/g,"'"),c[n].style=a+";display:inline-block";l.trigger("change")}});n.ui.plugin(o),n.ui.editor.SelectBox=o}(window.kendo.jQuery),function(e,t){function n(n,i){var r="rtl"==e(n).css("direction"),o=r?"Right":"Left",a="td"!=s.name(n)?"margin"+o:"padding"+o;return i===t?n.style[a]||0:(i>0?n.style[a]=i+"px":(n.style[a]="",n.style.cssText||n.removeAttribute("style")),t)}var i=window.kendo,r=i.Class,o=e.extend,a=i.ui.editor,s=a.Dom,l=a.EditorUtils,c=l.registerTool,d=a.Command,u=a.Tool,h=a.ToolTemplate,p=a.RangeUtils,f=s.blockElements,g=a.BlockFormatFinder,m=a.BlockFormatter,v=r.extend({init:function(){this.finder=new g([{tags:s.blockElements}])},apply:function(t){var i,r,o,a,l,c,d,u,h,p,f=this.finder.findSuitable(t),g=[];if(f.length){for(i=0,r=f.length;r>i;i++)s.is(f[i],"li")?e(f[i]).index()?e.inArray(f[i].parentNode,g)<0&&g.push(f[i]):g.push(f[i].parentNode):g.push(f[i]);for(;g.length;)if(o=g.shift(),s.is(o,"li"))if(a=o.parentNode,l=e(o).prev("li"),c=l.find("ul,ol").last(),d=e(o).children("ul,ol")[0],d&&l[0])c[0]?(c.append(o),c.append(e(d).children()),s.remove(d)):(l.append(d),d.insertBefore(o,d.firstChild));else for(d=l.children("ul,ol")[0],d||(d=s.create(o.ownerDocument,s.name(a)),l.append(d));o&&o.parentNode==a;)d.appendChild(o),o=g.shift();else for(u=parseInt(n(o),10)+30,n(o,u),h=0;g.length>h;h++)e.contains(o,g[h])&&g.splice(h,1)}else p=new m([{tags:["p"]}],{style:{marginLeft:30}}),p.apply(t)},remove:function(t){var i,r,o,a,s,l,c,d,u=this.finder.findSuitable(t);for(r=0,o=u.length;o>r;r++){if(c=e(u[r]),c.is("li")){if(a=c.parent(),s=a.parent(),s.is("li,ul,ol")&&!n(a[0])){if(i&&e.contains(i,s[0]))continue;l=c.nextAll("li"),l.length&&e(a[0].cloneNode(!1)).appendTo(c).append(l),s.is("li")?c.insertAfter(s):c.appendTo(s),a.children("li").length||a.remove();continue}if(i==a[0])continue;i=a[0]}else i=u[r];d=parseInt(n(i),10)-30,n(i,d)}}}),_=d.extend({init:function(e){e.formatter={toggle:function(e){(new v).apply(p.nodes(e))}},d.fn.init.call(this,e)}}),y=d.extend({init:function(e){e.formatter={toggle:function(e){(new v).remove(p.nodes(e))}},d.fn.init.call(this,e)}}),w=u.extend({init:function(e){u.fn.init.call(this,e),this.finder=new g([{tags:f}])},initialize:function(e,t){u.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(i,r){var o,a,l,c,d=this.finder.findSuitable(r);for(l=0,c=d.length;c>l;l++)if(o=n(d[l]),o||(a=e(d[l]).parents("ul,ol").length,o=s.is(d[l],"li")&&(a>1||n(d[l].parentNode))||s.ofType(d[l],["ul","ol"])&&a>0),o)return i.removeClass("k-state-disabled"),t;i.addClass("k-state-disabled").removeClass("k-state-hover")}});o(a,{IndentFormatter:v,IndentCommand:_,OutdentCommand:y,OutdentTool:w}),c("indent",new u({command:_,template:new h({template:l.buttonTemplate,title:"Indent"})})),c("outdent",new w({command:y,template:new h({template:l.buttonTemplate,title:"Outdent"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=e.extend,i=t.ui.editor,r=i.EditorUtils,o=i.Command,a=i.Tool,s=i.ToolTemplate,l=o.extend({init:function(e){var t=this;t.options=e,o.fn.init.call(t,e),t.attributes=null,t.async=!0},exec:function(){function n(e){o.value(s.find(d).val()),i(e),r.change&&r.change(),o.trigger("change")}function i(e){e.preventDefault(),s.data("kendoWindow").destroy(),o.focus()}var r=this,o=r.editor,a=o.options.messages,s=e(t.template(l.template)(a)).appendTo(document.body),c=l.indent(o.value()),d=".k-editor-textarea";this.createDialog(s,{title:a.viewHtml,close:i,visible:!1}).find(d).val(c).end().find(".k-dialog-update").click(n).end().find(".k-dialog-close").click(i).end().data("kendoWindow").center().open(),s.find(d).focus()}});n(l,{template:"<div class='k-editor-dialog k-popup-edit-form k-edit-form-container k-viewhtml-dialog'><textarea class='k-editor-textarea k-input'></textarea><div class='k-edit-buttons k-state-default'><button class='k-dialog-update k-button k-primary'>#: dialogUpdate #</button><button class='k-dialog-close k-button'>#: dialogCancel #</button></div></div>",indent:function(e){return e.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")}}),t.ui.editor.ViewHtmlCommand=l,i.EditorUtils.registerTool("viewHtml",new a({command:l,template:new s({template:r.buttonTemplate,title:"View HTML"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.ui.editor,i=n.Tool,r=n.ToolTemplate,o=n.DelayedExecutionTool,a=n.Command,s=n.Dom,l=n.EditorUtils,c=n.RangeUtils,d=l.registerTool,u=o.extend({init:function(e){var n=this;i.fn.init.call(n,t.deepExtend({},n.options,e)),n.type="kendoSelectBox",n.finder={getFormat:function(){return""}}},options:{items:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],width:110},toFormattingItem:function(e){var t,n=e.value;return n?e.tag||e.className?e:(t=n.indexOf("."),0===t?e.className=n.substring(1):-1==t?e.tag=n:(e.tag=n.substring(0,t),e.className=n.substring(t+1)),e):e},command:function(t){var i=t.value;return i=this.toFormattingItem(i),new n.FormatCommand({range:t.range,formatter:function(){var t,r=(i.tag||i.context||"span").split(","),o=[{tags:r,attr:{className:i.className||""}}];return t=e.inArray(r[0],s.inlineElements)>=0?new n.GreedyInlineFormatter(o):new n.GreedyBlockFormatter(o)}})},initialize:function(e,n){var r=n.editor,o=this.options,a=o.name,s=this;e.width(o.width),e.kendoSelectBox({dataTextField:"text",dataValueField:"value",dataSource:o.items||r.options[a],title:r.options.messages[a],autoSize:!0,change:function(){i.exec(r,a,this.dataItem().toJSON())},dataBound:function(){var e,t=this.dataSource.data();for(e=0;t.length>e;e++)t[e]=s.toFormattingItem(t[e])},highlightFirst:!1,template:t.template('<span unselectable="on" style="display:block;#=(data.style||"")#">#:data.text#</span>')}),e.addClass("k-decorated").closest(".k-widget").removeClass("k-"+a).find("*").addBack().attr("unselectable","on")},getFormattingValue:function(t,n){var i,r,o,a,s,l,c;for(i=0;t.length>i;i++)if(r=t[i],o=r.tag||r.context||"",a=r.className?"."+r.className:"",s=o+a,l=e(n[0]).closest(s)[0]){if(1==n.length)return r.value;for(c=1;n.length>c&&e(n[c]).closest(s)[0];c++)if(c==n.length-1)return r.value}return""},update:function(t,n){var i,r,a,l,c,d=e(t).data(this.type);if(d){for(i=d.dataSource,r=i.data(),c=s.commonAncestor.apply(null,n),a=0;r.length>a;a++)l=r[a].context,r[a].visible=!l||!!e(c).closest(l).length;i.filter([{field:"visible",operator:"eq",value:!0}]),o.fn.update.call(this,t,n),d.value(this.getFormattingValue(i.view(),n)),d.wrapper.toggleClass("k-state-disabled",!i.view().length)}}}),h=a.extend({exec:function(){var e,t=this.lockRange(!0),i=this.options.remove||"strong,em,span".split(",");c.wrapSelectedElements(t),e=new n.RangeIterator(t),e.traverse(function r(e){if(e&&!s.isMarker(e)){if(1==e.nodeType&&!s.insignificant(e)){for(var t=e.childNodes.length-1;t>=0;t--)r(e.childNodes[t]);e.removeAttribute("style"),e.removeAttribute("class")}i.indexOf(s.name(e))>-1&&s.unwrap(e)}}),this.releaseRange(t)}});e.extend(n,{FormattingTool:u,CleanFormatCommand:h}),d("formatting",new u({template:new r({template:l.dropDownListTemplate,title:"Format"})})),d("cleanFormatting",new i({command:h,template:new r({template:l.buttonTemplate,title:"Clean formatting"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.ui,i=n.editor,r=n.Widget,o=e.extend,a=e.proxy,s=t.keys,l=".kendoEditor",c="a.k-tool:not(.k-state-disabled),.k-widget.k-colorpicker,.k-selectbox,.k-dropdown,.k-combobox .k-input",d=r.extend({init:function(e,t){var n=this;t=o({},t,{name:"EditorToolbar"}),r.fn.init.call(n,e,t),t.popup&&n._initPopup()},events:["execute"],groups:{basic:["bold","italic","underline","strikethrough"],scripts:["subscript","superscript"],alignment:["justifyLeft","justifyCenter","justifyRight","justifyFull"],links:["insertImage","insertFile","createLink","unlink"],lists:["insertUnorderedList","insertOrderedList","indent","outdent"],tables:["createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"],advanced:["viewHtml","cleanFormatting"]},_initPopup:function(){this.window=e(this.element).wrap("<div class='editorToolbarWindow k-header' />").parent().prepend("<button class='k-button k-button-bare k-editortoolbar-dragHandle'><span class='k-icon k-i-move' /></button>").kendoWindow({title:!1,resizable:!1,draggable:{dragHandle:".k-editortoolbar-dragHandle"},animation:{open:{effects:"fade:in"},close:{effects:"fade:out"}},minHeight:42,visible:!1,autoFocus:!1,actions:[],dragend:function(){this._moved=!0}}).on("mousedown",function(t){e(t.target).is(".k-icon")||t.preventDefault()}).data("kendoWindow")},items:function(){return this.element.children().find("> *, select")},focused:function(){return this.element.find(".k-state-focused").length>0},toolById:function(e){var t,n=this.tools;for(t in n)if(t.toLowerCase()==e)return n[t]},toolGroupFor:function(t){var n,i=this.groups;if(this.isCustomTool(t))return"custom";for(n in i)if(e.inArray(t,i[n])>=0)return n},bindTo:function(t){var n=this,i=n.window;n._editor&&n._editor.unbind("select",a(n.refreshTools,n)),n._editor=t,n.tools=n.expandTools(t.options.tools),n.render(),n.element.find(".k-combobox .k-input").keydown(function(t){var n=e(this).closest(".k-combobox").data("kendoComboBox"),i=t.keyCode;i==s.RIGHT||i==s.LEFT?n.close():i==s.DOWN&&(n.dropDown.isOpened()||(t.stopImmediatePropagation(),n.open()))}),n._attachEvents(),n.items().each(function(){var i,r=n._toolName(this),o=n.tools[r],a=o&&o.options,s=t.options.messages,l=a&&a.tooltip||s[r],c=e(this);o&&o.initialize&&(("fontSize"==r||"fontName"==r)&&(i=s[r+"Inherit"],c.find("input").val(i).end().find("span.k-input").text(i).end()),o.initialize(c,{title:n._appendShortcutSequence(l,o),editor:n._editor}),c.closest(".k-widget",n.element).addClass("k-editor-widget"),c.closest(".k-colorpicker",n.element).next(".k-colorpicker").addClass("k-editor-widget"))}),t.bind("select",a(n.refreshTools,n)),n.update(),i&&i.wrapper.css({top:"",left:"",width:""})},show:function(){var e,t,n,i=this,r=i.window,o=i.options.editor;r&&(e=r.wrapper,t=o.element,e.is(":visible")&&i.window.options.visible||(e[0].style.width||e.width(t.outerWidth()-parseInt(e.css("border-left-width"),10)-parseInt(e.css("border-right-width"),10)),r._moved||(n=t.offset(),e.css({top:Math.max(0,parseInt(n.top,10)-e.outerHeight()-parseInt(i.window.element.css("padding-bottom"),10)),left:Math.max(0,parseInt(n.left,10))})),r.open()))},hide:function(){this.window&&this.window.close()},focus:function(){var e="tabIndex",t=this.element,n=this._editor.element.attr(e);t.attr(e,n||0).focus().find(c).first().focus(),n||0===n||t.removeAttr(e)},_appendShortcutSequence:function(e,t){if(!t.key)return e;var n=e+" (";return t.ctrl&&(n+="Ctrl + "),t.shift&&(n+="Shift + "),t.alt&&(n+="Alt + "),n+=t.key+")"},_nativeTools:["insertLineBreak","insertParagraph","redo","undo"],tools:{},isCustomTool:function(e){return!(e in t.ui.Editor.defaultTools)},expandTools:function(n){var r,a,s,l,c=this._nativeTools,d=t.deepExtend({},t.ui.Editor.defaultTools),u={};for(a=0;n.length>a;a++)r=n[a],l=r.name,e.isPlainObject(r)?l&&d[l]?(u[l]=o({},d[l]),o(u[l].options,r)):(s=o({cssClass:"k-i-custom",type:"button",title:""},r),s.name||(s.name="custom"),s.cssClass="k-"+("custom"==s.name?"i-custom":s.name),s.template||"button"!=s.type||(s.template=i.EditorUtils.buttonTemplate,s.title=s.title||s.tooltip),u[l]={options:s}):d[r]&&(u[r]=d[r]);for(a=0;c.length>a;a++)u[c[a]]||(u[c[a]]=d[c[a]]);return u},render:function(){function n(n){var i;return n.getHtml?i=n.getHtml():(e.isFunction(n)||(n=t.template(n)),i=n(o)),e.trim(i)}function i(){h.children().length&&h.appendTo(v)}function r(){h=e("<li class='k-tool-group' role='presentation' />")}var o,s,l,c,d,u,h,p,f=this,g=f.tools,m=f._editor.element,v=f.element.empty(),_=f._editor.options.tools,y=t.support.browser;for(v.empty(),r(),p=0;_.length>p;p++)c=_[p].name||_[p],o=g[c]&&g[c].options,!o&&e.isPlainObject(c)&&(o=c),s=o&&o.template,"break"==c&&(i(),e("<li class='k-row-break' />").appendTo(f.element),r()),s&&(u=f.toolGroupFor(c),d!=u&&(i(),r(),d=u),s=n(s),l=e(s).appendTo(h),"custom"==u&&(i(),r()),o.exec&&l.hasClass("k-tool")&&l.click(a(o.exec,m[0])));i(),e(f.element).children(":has(> .k-tool)").addClass("k-button-group"),f.options.popup&&y.msie&&9>y.version&&f.window.wrapper.find("*").attr("unselectable","on"),f.updateGroups(),f.angular("compile",function(){return{elements:f.element}})},updateGroups:function(){e(this.element).children().each(function(){e(this).children().filter(function(){return"none"!==this.style.display}).removeClass("k-group-end").first().addClass("k-group-start").end().last().addClass("k-group-end").end()})},decorateFrom:function(t){this.items().filter(".k-decorated").each(function(){var n=e(this).data("kendoSelectBox");n&&n.decorate(t)})},destroy:function(){r.fn.destroy.call(this);var e,t=this.tools;for(e in t)t[e].destroy&&t[e].destroy();this.window&&this.window.destroy()},_attachEvents:function(){var t=this,n="[role=button].k-tool",i=n+":not(.k-state-disabled)",r=n+".k-state-disabled";t.element.off(l).on("mouseenter"+l,i,function(){e(this).addClass("k-state-hover")}).on("mouseleave"+l,i,function(){e(this).removeClass("k-state-hover")}).on("mousedown"+l,n,function(e){e.preventDefault()}).on("keydown"+l,c,function(n){function i(e,n){var i=t.element.find(c),r=i.index(o)+e;return n&&(r=Math.max(0,Math.min(i.length-1,r))),i[r]}var r,o=this,a=n.keyCode;a==s.RIGHT||a==s.LEFT?e(o).hasClass(".k-dropdown")||(r=i(a==s.RIGHT?1:-1,!0)):a==s.ESC?r=t._editor:a!=s.TAB||n.ctrlKey||n.altKey||(n.shiftKey?r=i(-1):(r=i(1),r||(r=t._editor))),r&&(n.preventDefault(),r.focus())}).on("click"+l,i,function(n){var i=e(this);n.preventDefault(),n.stopPropagation(),i.removeClass("k-state-hover"),i.is("[data-popup]")||t._editor.exec(t._toolName(this))}).on("click"+l,r,function(e){e.preventDefault()})},_toolName:function(t){var n,i;if(t)return n=t.className,/k-tool\b/i.test(n)&&(n=t.firstChild.className),i=e.grep(n.split(" "),function(e){return!/^k-(widget|tool|tool-icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(e)}),i[0]?i[0].substring(i[0].lastIndexOf("-")+1):"custom"},refreshTools:function(){var n=this,i=n._editor,r=i.getRange(),o=t.ui.editor.RangeUtils.textNodes(r);o.length||(o=[r.startContainer]),n.items().each(function(){var t=n.tools[n._toolName(this)];t&&t.update&&t.update(e(this),o)}),this.update()},update:function(){this.element.children().children().each(function(){var t=e(this);t.css("display",t.hasClass("k-state-disabled")?"none":"")}),this.updateGroups()}});e.extend(i,{Toolbar:d})}(window.jQuery),function(e){var t=window.kendo,n=e.extend,i=e.proxy,r=t.ui.editor,o=r.Dom,a=r.EditorUtils,s=r.RangeUtils,l=r.Command,c=".kendoEditor",d="k-state-active",u="k-state-selected",h=r.Tool,p=r.ToolTemplate,f=r.InsertHtmlCommand,g=r.BlockFormatFinder,m=r.EditorUtils.registerTool,v="<td>"+r.emptyElementContent+"</td>",_=new g([{tags:["table"]}]),y=f.extend({_tableHtml:function(e,t){return e=e||1,t=t||1,"<table class='k-table' data-last>"+Array(e+1).join("<tr>"+Array(t+1).join(v)+"</tr>")+"</table>"},postProcess:function(t,n){var i=e("table[data-last]",t.document).removeAttr("data-last");n.selectNodeContents(i.find("td")[0]),t.selectRange(n)},exec:function(){var e=this.options;e.html=this._tableHtml(e.rows,e.columns),e.postProcess=this.postProcess,f.fn.exec.call(this)}}),w=h.extend({initialize:function(t,n){h.fn.initialize.call(this,t,n);var r=e(this.options.popupTemplate).appendTo("body").kendoPopup({anchor:t,copyAnchorStyles:!1,open:i(this._open,this),activate:i(this._activate,this),close:i(this._close,this)}).data("kendoPopup");t.click(i(this._toggle,this)).keydown(i(this._keydown,this)),this._editor=n.editor,this._popup=r},popup:function(){return this._popup},_activate:e.noop,_open:function(){this._popup.options.anchor.addClass(d)},_close:function(){this._popup.options.anchor.removeClass(d)},_keydown:function(e){var n=t.keys,i=e.keyCode;i==n.DOWN&&e.altKey?this._popup.open():i==n.ESC&&this._popup.close()},_toggle:function(t){var n=e(t.target).closest(".k-tool");n.hasClass("k-state-disabled")||this.popup().toggle()},update:function(e){this.popup().close(),e.removeClass("k-state-hover")},destroy:function(){this._popup.destroy()}}),b=w.extend({init:function(t){this.cols=8,this.rows=6,w.fn.init.call(this,e.extend(t,{command:y,popupTemplate:"<div class='k-ct-popup'>"+Array(this.cols*this.rows+1).join("<span class='k-ct-cell k-state-disabled' />")+"<div class='k-status'></div></div>"}))},_activate:function(){function n(t){var n=e(window);return{row:Math.floor((t.clientY+n.scrollTop()-u.top)/r)+1,col:Math.floor((t.clientX+n.scrollLeft()-u.left)/i)+1}}var i,r,o=this,a=o._popup.element,s=a.find(".k-ct-cell"),l=s.eq(0),d=s.eq(s.length-1),u=t.getOffset(l),h=t.getOffset(d),p=o.cols,f=o.rows;h.left+=d[0].offsetWidth,h.top+=d[0].offsetHeight,i=(h.left-u.left)/p,r=(h.top-u.top)/f,a.on("mousemove"+c,function(e){o._setTableSize(n(e))}).on("mouseleave"+c,function(){o._setTableSize()}).on("mouseup"+c,function(e){o._exec(n(e))})},_valid:function(e){return e&&e.row>0&&e.col>0&&this.rows>=e.row&&this.cols>=e.col},_exec:function(e){this._valid(e)&&(this._editor.exec("createTable",{rows:e.row,columns:e.col}),this._popup.close())},_setTableSize:function(n){var i=this._popup.element,r=i.find(".k-status"),o=i.find(".k-ct-cell"),a=this.cols,s=this._editor.options.messages;this._valid(n)?(r.text(t.format(s.createTableHint,n.row,n.col)),o.each(function(t){e(this).toggleClass(u,n.col>t%a&&n.row>t/a)})):(r.text(s.dialogCancel),o.removeClass(u))},_keydown:function(e){var n,i,r,o,a,s,l,c;w.fn._keydown.call(this,e),n=t.keys,i=e.keyCode,r=this._popup.element.find(".k-ct-cell"),o=Math.max(r.filter(".k-state-selected").last().index(),0),a=Math.floor(o/this.cols),s=o%this.cols,l=!1,i!=n.DOWN||e.altKey?i==n.UP?(l=!0,a--):i==n.RIGHT?(l=!0,s++):i==n.LEFT&&(l=!0,s--):(l=!0,a++),c={row:Math.max(1,Math.min(this.rows,a+1)),col:Math.max(1,Math.min(this.cols,s+1))},i==n.ENTER?this._exec(c):this._setTableSize(c),l&&(e.preventDefault(),e.stopImmediatePropagation())},_open:function(){var e=this._editor.options.messages;w.fn._open.call(this),this.popup().element.find(".k-status").text(e.dialogCancel).end().find(".k-ct-cell").removeClass(u)},_close:function(){w.fn._close.call(this),this.popup().element.off(c)},update:function(e,t){var n;w.fn.update.call(this,e),n=_.isFormatted(t),e.toggleClass("k-state-disabled",n)}}),k=l.extend({exec:function(){for(var e,t,n,i,a=this.lockRange(!0),s=a.endContainer;"td"!=o.name(s);)s=s.parentNode;for(t=s.parentNode,e=t.children.length,n=t.cloneNode(!0),i=0;t.cells.length>i;i++)n.cells[i].innerHTML=r.emptyElementContent;"before"==this.options.position?o.insertBefore(n,t):o.insertAfter(n,t),this.releaseRange(a)}}),x=l.extend({exec:function(){var e,t,n,i,a=this.lockRange(!0),s=o.closest(a.endContainer,"td"),l=o.closest(s,"table"),c=l.rows,d=this.options.position;for(e=o.findNodeIndex(s),t=0;c.length>t;t++)n=c[t].cells[e],i=n.cloneNode(),i.innerHTML=r.emptyElementContent,"before"==d?o.insertBefore(i,n):o.insertAfter(i,n);this.releaseRange(a)}}),C=l.extend({exec:function(){var t,n,i,r=this.lockRange(),a=s.mapAll(r,function(t){return e(t).closest("tr")[0]}),l=o.closest(a[0],"table");if(a.length>=l.rows.length)t=o.next(l),(!t||o.insignificant(t))&&(t=o.prev(l)),o.remove(l);else for(n=0;a.length>n;n++)i=a[n],o.removeTextSiblings(i),t=o.next(i)||o.prev(i),t=t.cells[0],o.remove(i);t&&(r.setStart(t,0),r.collapse(!0),this.editor.selectRange(r))}}),S=l.extend({exec:function(){var e,t,n=this.lockRange(),i=o.closest(n.endContainer,"td"),r=o.closest(i,"table"),a=r.rows,s=o.findNodeIndex(i,!0),l=a[0].cells.length;if(1==l)e=o.next(r),(!e||o.insignificant(e))&&(e=o.prev(r)),o.remove(r);else for(o.removeTextSiblings(i),e=o.next(i)||o.prev(i),t=0;a.length>t;t++)o.remove(a[t].cells[s]);e&&(n.setStart(e,0),n.collapse(!0),this.editor.selectRange(n))}}),T=h.extend({command:function(e){return e=n(e,this.options),"delete"==e.action?"row"==e.type?new C(e):new S(e):"row"==e.type?new k(e):new x(e)},initialize:function(e,t){h.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(e,t){var n=!_.isFormatted(t);e.toggleClass("k-state-disabled",n)}});n(t.ui.editor,{PopupTool:w,TableCommand:y,InsertTableTool:b,TableModificationTool:T,InsertRowCommand:k,InsertColumnCommand:x,DeleteRowCommand:C,DeleteColumnCommand:S}),m("createTable",new b({template:new p({template:a.buttonTemplate,popup:!0,title:"Create table"})})),m("addColumnLeft",new T({type:"column",position:"before",template:new p({template:a.buttonTemplate,title:"Add column on the left"})})),m("addColumnRight",new T({type:"column",template:new p({template:a.buttonTemplate,title:"Add column on the right"})})),m("addRowAbove",new T({type:"row",position:"before",template:new p({template:a.buttonTemplate,title:"Add row above"})})),m("addRowBelow",new T({type:"row",template:new p({template:a.buttonTemplate,title:"Add row below"})})),m("deleteRow",new T({type:"row",action:"delete",template:new p({template:a.buttonTemplate,title:"Delete row"})})),m("deleteColumn",new T({type:"column",action:"delete",template:new p({template:a.buttonTemplate,title:"Delete column"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.caret,r=n.keys,o=n.ui,a=o.Widget,s=".kendoMaskedTextBox",l=e.proxy,c=(n.support.propertyChangeEvent?"propertychange":"input")+s,d="k-state-disabled",u="disabled",h="readonly",p="change",f=a.extend({init:function(t,r){var o,l,c=this;a.fn.init.call(c,t,r),c._rules=e.extend({},c.rules,c.options.rules),t=c.element,o=t[0],c.wrapper=t,c._tokenize(),c._reset(),c.element.addClass("k-textbox").attr("autocomplete","off").on("focus"+s,function(){var e=o.value;e?c._togglePrompt(!0):o.value=c._old=c._emptyMask,c._oldValue=e,c._timeoutId=setTimeout(function(){i(t,0,e?c._maskLength:0)})}).on("focusout"+s,function(){var e=t.val();clearTimeout(c._timeoutId),o.value=c._old="",e!==c._emptyMask&&(o.value=c._old=e),c._change(),c._togglePrompt()}),l=t.is("[disabled]"),l?c.enable(!1):c.readonly(t.is("[readonly]")),c.value(c.options.value||t.val()),n.notify(c)},options:{name:"MaskedTextBox",promptChar:"_",clearPromptChar:!1,culture:"",rules:{},value:"",mask:""},events:[p],rules:{0:/\d/,9:/\d|\s/,"#":/\d|\s|\+|\-/,L:/[a-zA-Z]/,"?":/[a-zA-Z]|\s/,"&":/\S/,C:/./,A:/[a-zA-Z0-9]/,a:/[a-zA-Z0-9]|\s/},setOptions:function(t){var n=this;a.fn.setOptions.call(n,t),n._rules=e.extend({},n.rules,n.options.rules),n._tokenize(),this._unbindInput(),this._bindInput(),n.value(n.element.val())},destroy:function(){var e=this;e.element.off(s),e._form&&e._form.off("reset",e._resetHandler),a.fn.destroy.call(e)},value:function(e){var i=this.element,r=this._emptyMask;return e===t?this.element.val():(null===e&&(e=""),r?(e=this._unmask(e+""),i.val(e?r:""),this._mask(0,this._maskLength,e),e=i.val(),this._oldValue=e,n._activeElement()!==i&&(e===r?i.val(""):this._togglePrompt()),t):(i.val(e),t))},_togglePrompt:function(e){var t=this.element[0],n=t.value;this.options.clearPromptChar&&(n=e?this._oldValue:n.replace(RegExp(this.options.promptChar,"g")," "),t.value=this._old=n)},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},_bindInput:function(){var e=this;e._maskLength&&e.element.on("keydown"+s,l(e._keydown,e)).on("keypress"+s,l(e._keypress,e)).on("paste"+s,l(e._paste,e)).on(c,l(e._propertyChange,e))},_unbindInput:function(){this.element.off("keydown"+s).off("keypress"+s).off("paste"+s).off(c)},_editable:function(e){var t=this,n=t.element,i=e.disable,r=e.readonly;t._unbindInput(),r||i?n.attr(u,i).attr(h,r).toggleClass(d,i):(n.removeAttr(u).removeAttr(h).removeClass(d),t._bindInput())},_change:function(){var e=this,t=e.value();t!==e._oldValue&&(e._oldValue=t,e.trigger(p),e.element.trigger(p))},_propertyChange:function(){var e,t,n=this,r=n.element[0],o=r.value;o===n._old||n._pasting||(t=i(r)[0],e=n._unmask(o.substring(t),t),r.value=n._old=o.substring(0,t)+n._emptyMask.substring(t),n._mask(t,t,e),i(r,t))},_paste:function(e){var t=this,n=e.target,r=i(n),o=r[0],a=r[1],s=t._unmask(n.value.substring(a),a);t._pasting=!0,setTimeout(function(){var e=n.value,r=e.substring(o,i(n)[0]);n.value=t._old=e.substring(0,o)+t._emptyMask.substring(o),t._mask(o,o,r),o=i(n)[0],t._mask(o,o,s),i(n,o),t._pasting=!1})},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(n[0].value)})},t._form=r.on("reset",t._resetHandler))},_keydown:function(e){var n,o=e.keyCode,a=this.element[0],s=i(a),l=s[0],c=s[1],d=o===r.BACKSPACE;d||o===r.DELETE?(l===c&&(d?l-=1:c+=1,n=this._find(l,d)),n!==t&&n!==l?(d&&(n+=1),i(a,n)):l>-1&&this._mask(l,c,"",d),e.preventDefault()):o===r.ENTER&&this._change()},_keypress:function(e){var t,n;0===e.which||e.ctrlKey||e.keyCode===r.ENTER||(t=String.fromCharCode(e.which),n=i(this.element),this._mask(n[0],n[1],t),(e.keyCode===r.BACKSPACE||t)&&e.preventDefault())},_find:function(e,t){var n=this.element.val()||this._emptyMask,i=1;for(t===!0&&(i=-1);e>-1||this._maskLength>=e;){if(n.charAt(e)!==this.tokens[e])return e;e+=i}return-1},_mask:function(e,r,o,a){var s,l,c,d,u=this.element[0],h=u.value||this._emptyMask,p=this.options.promptChar,f=0;for(e=this._find(e,a),e>r&&(r=e),l=this._unmask(h.substring(r),r),o=this._unmask(o,e),s=o.length,o&&(l=l.replace(RegExp("^_{0,"+s+"}"),"")),o+=l,h=h.split(""),c=o.charAt(f);this._maskLength>e;)h[e]=c||p,c=o.charAt(++f),d===t&&f>s&&(d=e),e=this._find(e+1);u.value=this._old=h.join(""),n._activeElement()===u&&(d===t&&(d=this._maskLength),i(u,d))},_unmask:function(t,n){var i,r,o,a,s,l,c,d;if(!t)return"";for(t=(t+"").split(""),o=0,a=n||0,s=this.options.promptChar,l=t.length,c=this.tokens.length,d="";c>a&&(i=t[o],r=this.tokens[a],i===r||i===s?(d+=i===s?s:"",o+=1,a+=1):"string"!=typeof r?((r.test&&r.test(i)||e.isFunction(r)&&r(i))&&(d+=i,a+=1),o+=1):a+=1,!(o>=l)););return d},_tokenize:function(){for(var e,t,i,r,o=[],a=0,s=this.options.mask||"",l=s.split(""),c=l.length,d=0,u="",h=this.options.promptChar,p=n.getCulture(this.options.culture).numberFormat,f=this._rules;c>d;d++)if(e=l[d],t=f[e])o[a]=t,u+=h,a+=1;else for("."===e||","===e?e=p[e]:"$"===e?e=p.currency.symbol:"\\"===e&&(d+=1,e=l[d]),e=e.split(""),i=0,r=e.length;r>i;i++)o[a]=e[i],u+=e[i],a+=1;this.tokens=o,this._emptyMask=u,this._maskLength=u.length}});o.plugin(f)}(window.kendo.jQuery),function(e,t){function n(e){var n="string"==typeof e?[{name:e}]:e,i="[object Array]"===_t.call(n)?n:n!==t?[n]:[];return wt(i,function(e){return"string"==typeof e?{name:e}:{name:e.name,type:e.type}})}function i(e){var n="string"==typeof e?[{name:[e],expand:!1}]:e,i="[object Array]"===_t.call(n)?n:n!==t?[n]:[];return wt(i,function(e){return"string"==typeof e?{name:[e],expand:!1}:{name:"[object Array]"===_t.call(e.name)?e.name.slice():[e.name],expand:e.expand}})}function r(e,t,n,i){var o,a,s,l;if(n||(n=t),i||(i=0),l=n.members[i],l&&!l.measure){if(s=l.children,a=s.length,n===t?e[pt.stringify([l.name])]=!!a:a&&(e[pt.stringify(lt(n,i))]=!0),a)for(o=0;a>o;o++)r(e,t,s[o],i);
r(e,t,n,i+1)}}function o(t){var n,i,o={};t.length&&r(o,t[0]),n=[];for(i in o)n.push({name:e.parseJSON(i),expand:o[i]});return n}function a(e,t){var n,i,r,o,a=t.tuples||[],s=a[0];if(s&&s.members.length>e.length)for(n=s.members,i=0;n.length>i;i++)if(!n[i].measure){for(r=!1,o=0;e.length>o;o++)if(0===O(e[o]).indexOf(n[i].hierarchy)){r=!0;break}r||e.push({name:[n[i].name],expand:!1})}}function s(e){var t,n=[],i=e.members;for(t=0;i.length>t;t++)i[t].measure||n.push({name:[i[t].name],expand:i[t].children.length>0});return n}function l(e,t,n){var r,o;return e=e||{},a(t,e),n.length>1&&t.push({name:"Measures",measure:!0,children:i(n)}),r={members:t},e.tuples&&(o=x(e.tuples,r),o.tuple&&(t=s(o.tuple))),t}function c(e,t,n,i,r,o,a){var s,l,c,d,u,h,p,f=0,g=t;for(l in n[i].aggregates)s=n[i].aggregates[l],d=r[l],u=o[l],s=d?d(s):s.accumulator,e[g]={ordinal:g,value:s,fmtValue:u?pt.format(u,s):s},++f,g+=a;h=n[i].items;for(c in h){p=h[c].index*f,p=g+p*a;for(l in h[c].aggregates)s=h[c].aggregates[l],d=r[l],u=o[l],s=d?d(s):s.accumulator,e[p]={ordinal:p,value:s,fmtValue:u?pt.format(u,s):s},p+=a}}function d(e,t,n,i,r,o){var a,s,l,c,d,u,h,p=0;for(s in n[i].aggregates)a=n[i].aggregates[s],c=r[s],d=o[s],a=c?c(a):a.accumulator,e[e.length]={ordinal:t++,value:a,fmtValue:d?pt.format(d,a):a},++p;u=n[i].items;for(l in u){h=u[l].index*p;for(s in u[l].aggregates)a=u[l].aggregates[s],c=r[s],d=o[s],a=c?c(a):a.accumulator,e[e.length]={ordinal:t+h++,value:a,fmtValue:d?pt.format(d,a):a}}}function u(e){var t=pt.getter(e.field,!0);return function(n,i){return e.aggregate(t(n.dataItem),i,n)}}function h(e){return"number"==typeof e&&!isNaN(e)}function p(e){return e&&e.getTime}function f(e,n,i){return e.tuples.length<_(n.tuples,i)?n:t}function g(e,t,n,i,r){var o,a,s,l=e.length,c=_(t,i),d=i.length||1;for(a=0;n>a;a++)for(o=0;l>o;o++)s=v(e[o],t)*d,s+=o%d,r[a*l+o].ordinal=a*c+s}function m(e,t,n,i,r){var o,a,s,l=e.length,c=(_(t,i),i.length||1);for(a=0;l>a;a++)for(s=v(e[a],t),s*=c,s+=a%c,o=0;n>o;o++)r[a*n+o].ordinal=s*n+o}function v(e,t){return x(t,e).index}function _(e,t){var n,i,r;if(!e.length)return 0;for(n=e.slice(),i=n.shift(),r=1;i;)i.members?[].push.apply(n,i.members):i.children&&(i.measure||(r+=i.children.length),[].push.apply(n,i.children)),i=n.shift();return t.length&&(r*=t.length),r}function y(e){return e||(e={tuples:[]}),e.tuples||(e.tuples=[]),e}function w(e,t,n){var i,r,o;if(!e)return 0;for(i=Math.max(n.length,1),r=e.members.slice(0,t),o=r.shift();o;)o.children?[].push.apply(r,o.children):(i++,[].push.apply(r,o.members)),o=r.shift();return i}function b(e,t,n){var i,r,o,a,s,l;if(!t[0])return{parsedRoot:null,tuples:e,memberIndex:0,index:0};if(i=x(e,t[0]),!i.tuple)return{parsedRoot:null,tuples:t,memberIndex:0,index:0};if(r=i.tuple.members,o=t[0].members,a=-1,r.length!==o.length)return{parsedRoot:null,tuples:t,memberIndex:0,index:0};for(s=0,l=r.length;l>s;s++)!r[s].measure&&o[s].children[0]&&(-1==a&&o[s].children.length&&(a=s),r[s].children=o[s].children);return n=Math.max(n.length,1),{parsedRoot:i.tuple,index:i.index*n,memberIndex:a,tuples:e}}function k(e,t){var n,i,r=!0;for(e=e.members,t=t.members,n=0,i=e.length;i>n;n++)e[n].measure||t[n].measure||(r=r&&O(e[n])===O(t[n]));return r}function x(e,t){var n,i,r,o,a,s,l,c=0;for(n=0,i=e.length;i>n;n++){if(r=e[n],k(r,t))return{tuple:r,index:c};for(c++,a=0,s=r.members.length;s>a;a++)if(l=r.members[a],!l.measure&&(o=x(l.children,t),c+=o.index,o.tuple))return{tuple:o.tuple,index:c}}return{index:c}}function C(e,t){var n,i,r,o="";for(i=0,r=e.length;r>i;i++)n=e[i],o+=n.name,t[o]||(t[o]=n)}function S(e,t){var n,i,r,o,a=e.members,s="",l="";for(n=0,i=a.length;i>n;n++){if(r=a[n],o){if(t[s+r.name]){s+=r.name,o=t[s];continue}return t[s+r.parentName]?t[s+r.parentName]:(r.parentName&&(l+=r.parentName),t[l])}if(s+=r.name,o=t[r.parentName],!o&&(o=t[s],!o))return null;o&&(l+=o.name)}return o}function T(e,t){var n,i,r,o;if(0===t.length)return-1;for(n=t[0],i=e.members,r=0,o=i.length;o>r;r++)if(i[r].name==n.name)return r}function D(n,i){if(!(0>i)){var r={name:"Measures",measure:!0,children:[e.extend({members:[],dataIndex:n.dataIndex},n.members[i])]};n.members.splice(i,1,r),n.dataIndex=t}}function A(e,t){var n,i,r,o,a,s;if(1>e.length)return[];for(n=[],i={},r=T(e[0],t),o=0;e.length>o;o++)a=e[o],a.dataIndex=o,D(a,r),s=S(a,i),s?s.children.push(0>r||!s.measure?a:a.members[r].children[0]):n.push(a),C(a.members,i);return n}function E(e,t){var n,i,r,o,a,s,l,c,d;if(!e||!e.length)return t;for(n=[],i=P(e),r=i.length,o=Math.max(t.length/r,1),a=0;r>a;a++)for(l=o*a,c=o*i[a],s=0;o>s;s++)d=parseInt(c+s,10),n[parseInt(l+s,10)]=t[d]||{value:"",fmtValue:"",ordinal:d};return n}function M(e,t){var n,i,r,o,a,s,l,c;if(!e||!e.length)return t;for(n=[],i=P(e),r=i.length,o=Math.max(t.length/r,1),s=0;o>s;s++)for(l=r*s,a=0;r>a;a++)c=i[a]+l,n[l+a]=t[c]||{value:"",fmtValue:"",ordinal:c};return n}function P(e){var n,i,r,o,a,s,l;for(e=e.slice(),n=[],i=e.shift();i;){for(i.dataIndex!==t&&n.push(i.dataIndex),a=0,r=0,o=i.members.length;o>r;r++)l=i.members[r],s=l.children,l.measure?[].splice.apply(e,[0,0].concat(s)):[].splice.apply(e,[a,0].concat(s)),a+=s.length;i=e.shift()}return n}function I(e){var t=e.split(".");return t.length>2?t[0]+"."+t[1]:e}function z(e,t){var n=e.length-1,i=e[n],r=F(t,i);return r&&r.dir?i="ORDER("+i+".Children,"+r.field+".CurrentMember.MEMBER_CAPTION,"+r.dir+")":i+=".Children",e[n]=i,e}function F(e,t){for(var n=0,i=e.length;i>n;n++)if(0===t.indexOf(e[n].field))return e[n];return null}function R(e){var t,n="CROSSJOIN({";return e.length>2?(t=e.pop(),n+=R(e)):(n+=e.shift(),t=e.pop()),n+="},{",n+=t,n+="})"}function B(e,t){var n=e.slice(0);return t.length>1&&n.push("{"+L(t).join(",")+"}"),R(n)}function L(e){for(var n,i=0,r=e.length,o=[];r>i;i++)n=e[i],o.push(n.name!==t?n.name:n);return o}function O(e){return e=e.name||e,"[object Array]"===_t.call(e)&&(e=e[e.length-1]),e}function H(e){for(var t=e.length,n=[],i=0;t>i;i++)n.push(e[i].name[0]);return n}function N(e,t){var n,i,r,o=0,a=e.length,s=t.length;for(t=t.slice(0);a>o;o++)for(n=e[o],r=0;s>r;r++)if(i=I(t[r]),-1!==n.indexOf(i)){t[r]=n;break}return t}function V(e){for(var t,n,i,r,o,a,s=[],l=[],c=[],d=0,u=e.length;u>d;d++)if(t=e[d],r=t.name,a=!1,"[object Array]"!==_t.call(r)&&(t.name=r=[r]),r.length>1)l.push(t);else{for(o=I(r[0]),n=0,i=c.length;i>n;n++)if(0===c[n].name[0].indexOf(o)){a=!0;break}a||c.push(t),t.expand&&s.push(t)}return s=s.concat(l),{root:c,expanded:s}}function U(e,t,n){var i,r,o,a,s,l,c,d,u="";if(e=e||[],i=V(e),r=i.root,o=H(r),a=[],i=i.expanded,s=i.length,l=0,d=[],o.length>1||t.length>1){for(a.push(B(o,t));s>l;l++)c=z(i[l].name,n),d=N(c,o),a.push(B(d,t));u+=a.join(",")}else{for(;s>l;l++)c=z(i[l].name,n),d.push(c[0]);u+=o.concat(d).join(",")}return u}function W(e){var t="",n=e.value,i=e.field,r=e.operator;return"in"==r?(t+="{",t+=n,t+="}"):(t+="Filter(",t+=i+".Children",t+=pt.format(Y[r],i,n),t+=")"),t}function j(e,t){var n,i,r="",o=e.filters,a=o.length;for(i=a-1;i>=0;i--)n="SELECT (",n+=W(o[i]),n+=") ON 0",i==a-1?(n+=" FROM ["+t+"]",r=n):r=n+" FROM ( "+r+" )";return r}function G(e,t,n){var i,r,o="";if(t){o+="<"+e+">";for(r in t)i=t[r],n&&(r=r.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g,"$1_").toUpperCase().replace(/_$/,"")),o+="<"+r+">"+i+"</"+r+">";o+="</"+e+">"}else o+="<"+e+"/>";return o}function q(e){if(null==e)return[];var t=_t.call(e);return"[object Array]"!==t?[e]:e}function $(e){var t,n,i,r,o={tuples:[]},a=q(pt.getter("Tuples.Tuple",!0)(e)),s=pt.getter("Caption['#text']"),l=pt.getter("UName['#text']"),c=pt.getter("LName['#text']"),d=pt.getter("LNum['#text']"),u=pt.getter("CHILDREN_CARDINALITY['#text']",!0),h=pt.getter("['@Hierarchy']"),p=pt.getter("PARENT_UNIQUE_NAME['#text']",!0);for(t=0;a.length>t;t++){for(n=[],i=q(a[t].Member),r=0;i.length>r;r++)n.push({children:[],caption:s(i[r]),name:l(i[r]),levelName:c(i[r]),levelNum:d(i[r]),hasChildren:parseInt(u(i[r]),10)>0,parentName:p(i[r]),hierarchy:h(i[r])});o.tuples.push({members:n})}return o}var Y,K,Q,X,J,Z,et,tt,nt,it,rt,ot,at,st,lt,ct,dt,ut,ht,pt=window.kendo,ft=pt.ui,gt=pt.Class,mt=ft.Widget,vt=pt.data.DataSource,_t={}.toString,yt=function(e){return e},wt=e.map,bt=e.extend,kt=pt.isFunction,xt="change",Ct="error",St="progress",Tt="stateReset",Dt="auto",At="<div/>",Et=".kendoPivotGrid",Mt="__row_total__",Pt="dataBinding",It="dataBound",zt="expandMember",Ft="collapseMember",Rt="k-i-arrow-s",Bt="k-i-arrow-e",Lt="#: data.member.caption || data.member.name #",Ot='<span class="k-icon k-i-kpi-#=data.dataItem.value > 0 ? "open" : data.dataItem.value < 0 ? "denied" : "hold"#">#:data.dataItem.value#</span>',Ht='<span class="k-icon k-i-kpi-#=data.dataItem.value > 0 ? "increase" : data.dataItem.value < 0 ? "decrease" : "equal"#">#:data.dataItem.value#</span>',Nt='#= data.dataItem ? kendo.htmlEncode(data.dataItem.fmtValue || data.dataItem.value) || "&nbsp;" : "&nbsp;" #',Vt='<table class="k-pivot-layout"><tr><td><div class="k-pivot-rowheaders"></div></td><td><div class="k-pivot-table k-state-default"></div></td></tr></table>',Ut={sum:function(e,t){var n=t.accumulator;return h(n)?h(e)&&(n+=e):n=e,n},count:function(e,t){return(t.accumulator||0)+1},average:{aggregate:function(e,n){var i=n.accumulator;return n.count===t&&(n.count=0),h(i)?h(e)&&(i+=e):i=e,h(e)&&n.count++,i},result:function(e){var t=e.accumulator;return h(t)&&(t/=e.count),t}},max:function(e,t){var n=t.accumulator;return h(n)||p(n)||(n=e),e>n&&(h(e)||p(e))&&(n=e),n},min:function(e,t){var n=t.accumulator;return h(n)||p(n)||(n=e),n>e&&(h(e)||p(e))&&(n=e),n}},Wt=gt.extend({init:function(e){this.options=bt({},this.options,e),this.dimensions=this._normalizeDescriptors("field",this.options.dimensions),this.measures=this._normalizeDescriptors("name",this.options.measures)},_normalizeDescriptors:function(e,t){var n,i,r,o;if(t=t||{},n={},"[object Array]"===_t.call(t)){for(r=0,o=t.length;o>r;r++)i=t[r],"string"==typeof i?n[i]={}:i[e]&&(n[i[e]]=i);t=n}return t},_asTuples:function(e,n,i){var r,o,a,s,l,c,d,u,h,p;if(i=i||[],r=this.dimensions||[],o=[],h=i.length||1,n.length||i.length)for(c=0;h>c;c++){for(a={members:[]},s=0,l=n.length;l>s;s++)u=O(n[s].name),a.members[a.members.length]={children:[],caption:(r[u]||{}).caption||"All",name:u,levelName:u,levelNum:"0",hasChildren:!0,parentName:t,hierarchy:u};h>1&&(a.members[a.members.length]={children:[],caption:i[c].caption,name:i[c].descriptor.name,levelName:"MEASURES",levelNum:"0",hasChildren:!1,parentName:t,hierarchy:"MEASURES"}),o[o.length]=a}for(p in e)for(c=0;h>c;c++){for(d={members:[]},s=0,l=n.length;l>s;s++)u=O(n[s].name),d.members[d.members.length]=0===e[p].parentName.indexOf(u)?{children:[],caption:e[p].value,name:e[p].name,levelName:e[p].name,levelNum:1,hasChildren:!1,parentName:u,hierarchy:u}:{children:[],caption:(r[u]||{}).caption||"All",name:u,levelName:u,levelNum:"0",hasChildren:!0,parentName:t,hierarchy:u};h>1&&(d.members[d.members.length]={children:[],caption:i[c].caption,name:i[c].descriptor.name,levelName:"MEASURES",levelNum:"0",hasChildren:!0,parentName:t,hierarchy:"MEASURES"}),o[o.length]=d}return o},_toDataArray:function(e,t,n,i,r){var o,a,s,l,c,d,u={},h={},p=0,f=n&&n.length;if(f)for(o=this.measures||{};f>p;p++)s=n[p].name,a=o[s],a.result&&(h[s]=a.result),a.format&&(u[s]=a.format);l=[],c=0,r(l,c,e,Mt,h,u,t);for(d in e)d!==Mt&&(c+=i,r(l,c,e,d,h,u,t));return l},_matchDescriptors:function(e,t,n,i){for(var r,o,a,s,l;i>0;)if(r=t[--i],o=O(r).split("&"),o.length>1&&(a=o[0],s=o[1],l=n[a],l(e)!=s))return!1;return!0},_isExpanded:function(e){for(var t=0,n=e.length;n>t;t++)if(e[t].expand)return!0;return!1},_calculateAggregate:function(e,t,n){var i,r,o,a={};for(o=0;e.length>o;o++)r=e[o].descriptor.name,i=n.aggregates[r]||{},i.accumulator=e[o].aggregator(t,i),a[r]=i;return a},_processColumns:function(e,n,i,r,o,a,s,l){var c,d,u,h,p,f,g=o.dataItem;for(f=0;n.length>f;f++)if(d=n[f],d.expand){if(!this._matchDescriptors(g,n,i,f))continue;u=O(d),c=i[u](g),c=c!==t?""+c:c,u=u+"&"+c,h=r[u]||{index:s.columnIndex,name:u,parentName:u,value:c},p=a.items[u]||{aggregates:{}},a.items[u]={index:h.index,aggregates:this._calculateAggregate(e,o,p)},l&&(r[u]||s.columnIndex++,r[u]=h)}},_measureAggregators:function(e){var t,n,i,r,o,a,s=e.measures||[],l=this.measures||{},c=[];if(s.length){for(i=0,r=s.length;r>i;i++)if(t=s[i],n=l[t.name],o=null,n){if(a=n.aggregate,"string"==typeof a){if(o=Ut[a.toLowerCase()],!o)throw Error("There is no such aggregate function");n.aggregate=o.aggregate||o,n.result=o.result}c.push({descriptor:t,caption:n.caption,result:n.result,aggregator:u(n)})}}else c.push({descriptor:{name:"default"},caption:"default",aggregator:function(){return 1}});return c},_buildGetters:function(e){var t,n,i,r,o,a={};for(r=0,o=e.length;o>r;r++)t=e[r],i=O(t),n=i.split("&"),n.length>1?a[n[0]]=pt.getter(n[0],!0):a[i]=pt.getter(i,!0);return a},process:function(e,n){var r,o,a,s,l,u,h,p,f,g,m,v,_,y,w,b,k,x,C,S,T,D,A,E,M,P;if(e=e||[],n=n||{},r=n.measures||[],o="rows"===n.measuresAxis,a=(o?n.rows:n.columns)||[],s=(o?n.columns:n.rows)||[],!a.length&&s.length&&(!r.length||r.length&&o)&&(a=s,s=[],o=!1),a.length||s.length||(o=!1),!a.length&&r.length&&(a=i(n.measures)),l={},u={},h={},f={columnIndex:0},g=this._measureAggregators(n),m=this._buildGetters(a),v=this._buildGetters(s),_=!1,a.length||s.length)for(b=this._isExpanded(s),_=!0,k=0,x=e.length;x>k;k++)for(y=e[k],w={dataItem:y,index:k},C=l[Mt]||{items:{},aggregates:{}},this._processColumns(g,a,m,u,w,C,f,!b),C.aggregates=this._calculateAggregate(g,w,C),l[Mt]=C,S=0,T=s.length;T>S;S++)if(D=s[S],D.expand){if(!this._matchDescriptors(y,s,v,S))continue;A=O(D),p=v[A](y),p=p!==t?""+p:p,h[p]={name:A+"&"+p,parentName:A,value:p},E=l[p]||{items:{},aggregates:{}},this._processColumns(g,a,m,u,w,E,f,!0),E.aggregates=this._calculateAggregate(g,w,E),l[p]=E}return _&&e.length?(!(g.length>1)||n.columns&&n.columns.length||(a=[]),u=this._asTuples(u,a,g),h=this._asTuples(h,s,[]),M=u.length,o&&(M=1,P=u,u=h,h=P),l=this._toDataArray(l,u.length,n.measures,M,o?c:d),l=this._normalizeData(l,u.length,h.length)):l=u=h=[],{axes:{columns:{tuples:u},rows:{tuples:h}},data:l}},_normalizeData:function(e,t,n){var i,r,o=(t||1)*(n||1),a=Array(o),s=e.length;if(s===o)return e;for(r=0;o>r;r++)a[r]={value:"",fmtValue:"",ordinal:r};for(r=0;s>r;r++)i=e[r],i&&(a[i.ordinal]=i);return a}}),jt=gt.extend({init:function(e,t){this.transport=t,this.options=t.options||{},this.transport.discover||kt(e.discover)&&(this.discover=e.discover)},read:function(e){return this.transport.read(e)},update:function(e){return this.transport.update(e)},create:function(e){return this.transport.create(e)},destroy:function(e){return this.transport.destroy(e)},discover:function(e){return this.transport.discover?this.transport.discover(e):(e.success({}),t)},catalog:function(n){var i,r=this.options||{};return n===t?(r.connection||{}).catalog:(i=r.connection||{},i.catalog=n,this.options.connection=i,e.extend(this.transport.options,{connection:i}),t)},cube:function(e){var n,i=this.options||{};return e===t?(i.connection||{}).cube:(n=i.connection||{},n.cube=e,this.options.connection=n,bt(!0,this.transport.options,{connection:n}),t)}}),Gt=vt.extend({init:function(t){var r,o=((t||{}).schema||{}).cube,a="columns",s={axes:yt,cubes:yt,catalogs:yt,measures:yt,dimensions:yt,hierarchies:yt,levels:yt,members:yt};o&&(s=e.extend(s,this._cubeSchema(o)),this.cubeBuilder=new Wt(o)),vt.fn.init.call(this,bt(!0,{},{schema:s},t)),this.transport=new jt(this.options.transport||{},this.transport),this._columns=i(this.options.columns),this._rows=i(this.options.rows),r=this.options.measures||[],null!==this.options.measures&&"[object Object]"===_t.call(this.options.measures)&&(r=this.options.measures.values||[],a=this.options.measures.axis||"columns"),this._measures=n(r||[]),this._measuresAxis=a,this._axes={}},_cubeSchema:function(e){return{dimensions:function(){var t,n=[],i=e.dimensions;for(t in i)n.push({name:t,caption:i[t].caption||t,uniqueName:t,defaultHierarchy:t,type:1});return e.measures&&n.push({name:"Measures",caption:"Measures",uniqueName:"Measures",type:2}),n},hierarchies:function(){return[]},measures:function(){var t,n=[],i=e.measures;for(t in i)n.push({name:t,caption:t,uniqueName:t,aggregator:t});return n}}},options:{serverSorting:!0,serverPaging:!0,serverFiltering:!0,serverGrouping:!0,serverAggregates:!0},catalog:function(e){return e===t?this.transport.catalog():(this.transport.catalog(e),this._mergeState({}),this._axes={},this.data([]),t)},cube:function(e){return e===t?this.transport.cube():(this.transport.cube(e),this._axes={},this._mergeState({}),this.data([]),t)},axes:function(){return this._axes},columns:function(e){return e===t?this._columns:(this._clearAxesData=!0,this._columns=i(e),this.query({columns:e,rows:this.rowsAxisDescriptors(),measures:this.measures()}),t)},rows:function(e){return e===t?this._rows:(this._clearAxesData=!0,this._rows=i(e),this.query({columns:this.columnsAxisDescriptors(),rows:e,measures:this.measures()}),t)},measures:function(e){return e===t?this._measures:(this._clearAxesData=!0,this.query({columns:this.columnsAxisDescriptors(),rows:this.rowsAxisDescriptors(),measures:n(e)}),t)},measuresAxis:function(){return this._measuresAxis||"columns"},_expandPath:function(e,t){var n,r,o,a="columns"===t?"columns":"rows",s="columns"===t?"rows":"columns",c=i(e),d=O(c[c.length-1]);for(this._lastExpanded=a,c=l(this.axes()[a],c,this.measures()),n=0;c.length>n;n++)if(r=O(c[n]),r===d){if(c[n].expand)return;c[n].expand=!0}else c[n].expand=!1;o={},o[a]=c,o[s]=this._descriptorsForAxis(s),this._query(o)},_descriptorsForAxis:function(e){var t=this.axes(),n=this[e]()||[];return t&&t[e]&&t[e].tuples&&t[e].tuples[0]&&(n=o(t[e].tuples||[])),n},columnsAxisDescriptors:function(){return this._descriptorsForAxis("columns")},rowsAxisDescriptors:function(){return this._descriptorsForAxis("rows")},_process:function(e,t){this._view=e,t=t||{},t.items=t.items||this._view,this.trigger(xt,t)},_query:function(e){var t=this;return e||(this._clearAxesData=!0),t.query(bt({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate(),columns:this.columnsAxisDescriptors(),rows:this.rowsAxisDescriptors(),measures:this.measures()},e))},query:function(t){var n=this._mergeState(t);return this._data.length&&this.cubeBuilder?(this._params(n),this._updateLocalData(this._pristineData),e.Deferred().resolve().promise()):this.read(n)},_mergeState:function(e){return e=vt.fn._mergeState.call(this,e),e!==t&&(this._measures=n(e.measures),e.columns?e.columns=i(e.columns):e.columns||(this._columns=[]),e.rows?e.rows=i(e.rows):e.rows||(this._rows=[])),e},filter:function(e){return e===t?this._filter:(this._clearAxesData=!0,this._query({filter:e,page:1}),t)},expandColumn:function(e){this._expandPath(e,"columns")},expandRow:function(e){this._expandPath(e,"rows")},success:function(e){var t;this.cubeBuilder&&(t=(this.reader.data(e)||[]).slice(0)),vt.fn.success.call(this,e),t&&(this._pristineData=t)},_processResult:function(e,t){var n,i,r,o,a,s,l,c,d,u,h;return this.cubeBuilder&&(n=this.cubeBuilder.process(e,this._requestData),e=n.data,t=n.axes),c=this.columns().length,d=this.rows().length,u=t.columns&&t.columns.tuples,c||!d||!u||!this._rowMeasures().length&&this.measures().length||(t={columns:{},rows:t.columns}),c||d||"rows"!==this.measuresAxis()||!u||(t={columns:{},rows:t.columns}),this._axes={columns:y(this._axes.columns),rows:y(this._axes.rows)},t={columns:y(t.columns),rows:y(t.rows)},i=this._normalizeTuples(t.columns.tuples,this._axes.columns.tuples,this._columnMeasures()),r=this._normalizeTuples(t.rows.tuples,this._axes.rows.tuples,this._rowMeasures()),this.cubeBuilder||(e=this._normalizeData({columnsLength:t.columns.tuples.length,rowsLength:t.rows.tuples.length,columnIndexes:i,rowIndexes:r,data:e})),"rows"==this._lastExpanded?(o=t.columns.tuples,s=this._columnMeasures(),a=f(t.columns,this._axes.columns,s),a&&(l="columns",t.columns=a,g(o,a.tuples,t.rows.tuples.length,s,e),e=this._normalizeData({columnsLength:_(t.columns.tuples,s),rowsLength:t.rows.tuples.length,data:e}))):"columns"==this._lastExpanded&&(o=t.rows.tuples,s=this._rowMeasures(),a=f(t.rows,this._axes.rows,s),a&&(l="rows",t.rows=a,m(o,a.tuples,t.columns.tuples.length,s,e),e=this._normalizeData({columnsLength:_(t.rows.tuples,s),rowsLength:t.columns.tuples.length,data:e}))),this._lastExpanded=null,h=this._mergeAxes(t,e,l),this._axes=h.axes,h.data},_readData:function(e){var t=this.reader.axes(e),n=this.reader.data(e);return this._processResult(n,t)},_createTuple:function(e,t,n){var i,r,o,a,s,l=e.members,c=l.length,d={members:[]},u=0;for(t&&(c-=1);c>u;u++)r=l[u],a=+r.levelNum,i=r.name,o=r.parentName,s=r.caption||i,n&&(s="All",0===a?o=r.name:a-=1,i=o),d.members.push({name:i,children:[],caption:s,levelName:o,levelNum:""+a,hasChildren:n,hierarchy:o,parentName:n?"":o});return t&&d.members.push({name:t.name,children:[]}),d},_hasRoot:function(e,t){var n,i,r,o,a,s;if(t.length)return x(t,e).tuple;for(n=e.members,r=!0,a=0,s=n.length;s>a;a++)if(i=n[a],o=+i.levelNum||0,0!==o){r=!1;break}return r},_mergeAxes:function(e,t,n){var i,r,o,a,s,l=this._columnMeasures(),c=this._rowMeasures(),d=this.axes(),u=e.rows.tuples.length,h=_(d.columns.tuples,l),p=e.columns.tuples.length;return"columns"==n?(p=h,r=e.columns.tuples):(r=A(e.columns.tuples,l),t=M(r,t)),o=b(d.columns.tuples,r,l),"rows"==n?(u=_(e.rows.tuples,c),r=e.rows.tuples):(r=A(e.rows.tuples,c),t=E(r,t)),a=b(d.rows.tuples,r,c),d.columns.tuples=o.tuples,d.rows.tuples=a.tuples,h!==_(d.columns.tuples,l)?(i=o.index+w(o.parsedRoot,o.memberIndex,l),s=h+p,t=this._mergeColumnData(t,i,u,p,s)):(i=a.index+w(a.parsedRoot,a.memberIndex,c),t=this._mergeRowData(t,i,u,p)),{axes:d,data:t}},_mergeColumnData:function(e,t,n,i,r){var o,a,s,l=this.data().toJSON(),c=0,d=Math.max(this._columnMeasures().length,1);for(n=Math.max(n,1),l.length>0&&(c=d,r-=d),o=0;n>o;o++)a=t+o*r,s=e.splice(0,i),s.splice(0,c),[].splice.apply(l,[a,0].concat(s));return l},_mergeRowData:function(e,t,n,i){var r,o,a,s=this.data().toJSON(),l=Math.max(this._rowMeasures().length,1);for(i=Math.max(i,1),s.length>0&&(n-=l,e.splice(0,i*l)),r=0;n>r;r++)a=e.splice(0,i),o=t*i+r*i,[].splice.apply(s,[o,0].concat(a));return s},_columnMeasures:function(){var e=this.measures(),t=[];return"columns"===this.measuresAxis()&&(0===this.columns().length?t=e:e.length>1&&(t=e)),t},_rowMeasures:function(){var e=this.measures(),t=[];return"rows"===this.measuresAxis()&&(0===this.rows().length?t=e:e.length>1&&(t=e)),t},_updateLocalData:function(e,t){this.cubeBuilder&&(t&&(this._requestData=t),e=this._processResult(e)),this._data=this._observe(e),this._ranges=[],this._addRange(this._data),this._total=this._data.length,this._pristineTotal=this._total,this._process(this._data)},data:function(e){var n=this;return e===t?n._data:(this._pristineData=e.slice(0),this._updateLocalData(e,{columns:this.columns(),rows:this.rows(),measures:this.measures()}),t)},_normalizeTuples:function(e,t,n){var i,r,o,a=n.length||1,s=0,l=[],c={},d=0;if(e.length){if(!this._hasRoot(e[0],t)){for(;a>s;s++)l.push(this._createTuple(e[0],n[s],!0)),c[s]=s;e.splice.apply(e,[0,e.length].concat(l).concat(e)),s=a}if(n.length)for(o=i=e[s],r=i.members.length-1;i;){if(d>=a&&(d=0),i.members[r].name!==n[d].name&&(e.splice(s,0,this._createTuple(i,n[d])),c[s]=s),s+=1,d+=1,i=e[s],a>d&&(!i||ct(o,r-1)!==ct(i,r-1))){for(;a>d;d++)e.splice(s,0,this._createTuple(o,n[d])),c[s]=s,s+=1;i=e[s]}o=i}return c}},_normalizeData:function(e){var n,i,r=e.data,o=e.columnIndexes||{},a=e.rowIndexes||{},s=e.columnsLength||1,l=s*(e.rowsLength||1),c=0,d=0,u=0,h=Array(l);if(r.length===l)return r;for(;l>c;c++){if(a[parseInt(c/s,10)]!==t)for(i=0;s>i;i++)h[c]={value:"",fmtValue:"",ordinal:c},c+=1;if(o[c%s]!==t&&(h[c]={value:"",fmtValue:"",ordinal:c},c+=1),n=r[d]){if(n.ordinal-u>1)for(u+=1;n.ordinal>u;u++)h[c]={value:"",fmtValue:"",ordinal:c},c+=1;u=n.ordinal,n.ordinal=c,h[c]=n,d+=1}else h[c]={value:"",fmtValue:"",ordinal:c}}return h},discover:function(t,n){var i=this,r=i.transport;return e.Deferred(function(e){r.discover(bt({success:function(t){t=i.reader.parse(t),i._handleCustomErrors(t)||(n&&(t=n(t)),e.resolve(t))},error:function(t,n,r){e.reject(t),i.error(t,n,r)}},t))}).promise().done(function(){i.trigger("schemaChange")})},schemaMeasures:function(){var e=this;return e.discover({data:{command:"schemaMeasures",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.measures(t)})},schemaKPIs:function(){var e=this;return e.discover({data:{command:"schemaKPIs",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.kpis(t)})},schemaDimensions:function(){var e=this;return e.discover({data:{command:"schemaDimensions",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.dimensions(t)})},schemaHierarchies:function(e){var t=this;return t.discover({data:{command:"schemaHierarchies",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube(),dimensionUniqueName:e}}},function(e){return t.reader.hierarchies(e)})},schemaLevels:function(e){var t=this;return t.discover({data:{command:"schemaLevels",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube(),hierarchyUniqueName:e}}},function(e){return t.reader.levels(e)})},schemaCubes:function(){var e=this;return e.discover({data:{command:"schemaCubes",restrictions:{catalogName:e.transport.catalog()}}},function(t){return e.reader.cubes(t)})},schemaCatalogs:function(){var e=this;return e.discover({data:{command:"schemaCatalogs"}},function(t){return e.reader.catalogs(t)})},schemaMembers:function(e){var t=this;return t.discover({data:{command:"schemaMembers",restrictions:bt({catalogName:t.transport.catalog(),cubeName:t.transport.cube()},e)}},function(e){return t.reader.members(e)})},_params:function(e){this._clearAxesData&&(this._axes={},this._data=this._observe([]),this._clearAxesData=!1,this.trigger(Tt));var t=vt.fn._params.call(this,e);return t=bt({measures:this.measures(),measuresAxis:this.measuresAxis(),columns:this.columns(),rows:this.rows()},t),this.cubeBuilder&&(this._requestData=t),t}});Gt.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},n=t.data;if(t.data=n,!(t instanceof Gt)&&t instanceof pt.data.DataSource)throw Error("Incorrect DataSource type. Only PivotDataSource instances are supported");return t instanceof Gt?t:new Gt(t)},Y={contains:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") > 0',doesnotcontain:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") = 0',startswith:', Left({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',endswith:', Right({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',eq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',neq:', NOT {0}.CurrentMember.MEMBER_CAPTION = "{1}"'},K={schemaCubes:"MDSCHEMA_CUBES",schemaCatalogs:"DBSCHEMA_CATALOGS",schemaMeasures:"MDSCHEMA_MEASURES",schemaDimensions:"MDSCHEMA_DIMENSIONS",schemaHierarchies:"MDSCHEMA_HIERARCHIES",schemaLevels:"MDSCHEMA_LEVELS",schemaMembers:"MDSCHEMA_MEMBERS",schemaKPIs:"MDSCHEMA_KPIS"},Q={read:function(e){var t,n,i,r,o,a='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement>';return a+="SELECT NON EMPTY {",t=e.columns||[],n=e.rows||[],i=e.measures||[],r="rows"===e.measuresAxis,o=e.sort||[],!t.length&&n.length&&(!i.length||i.length&&r)&&(t=n,n=[],r=!1),t.length||n.length||(r=!1),t.length?a+=U(t,r?[]:i,o):i.length&&!r&&(a+=L(i).join(",")),a+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS",(n.length||r&&i.length>1)&&(a+=", NON EMPTY {",a+=n.length?U(n,r?i:[],o):L(i).join(","),a+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS"),e.filter?(a+=" FROM ",a+="(",a+=j(e.filter,e.connection.cube),a+=")"):a+=" FROM ["+e.connection.cube+"]",1==i.length&&t.length&&(a+=" WHERE ("+L(i).join(",")+")"),a+="</Statement></Command><Properties><PropertyList><Catalog>"+e.connection.catalog+"</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>",a.replace(/\&/g,"&amp;")},discover:function(t){t=t||{};var n='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis">';return n+="<RequestType>"+(K[t.command]||t.command)+"</RequestType>",n+="<Restrictions>"+G("RestrictionList",t.restrictions,!0)+"</Restrictions>",t.connection&&t.connection.catalog&&(t.properties=e.extend({},{Catalog:t.connection.catalog},t.properties)),n+="<Properties>"+G("PropertyList",t.properties)+"</Properties>",n+="</Discover></Body></Envelope>"}},X=pt.data.RemoteTransport.extend({init:function(e){var t=e;e=this.options=bt(!0,{},this.options,e),pt.data.RemoteTransport.call(this,e),kt(t.discover)?this.discover=t.discover:"string"==typeof t.discover?this.options.discover={url:t.discover}:t.discover||(this.options.discover=this.options.read)},setup:function(t,n){return t.data=t.data||{},e.extend(!0,t.data,{connection:this.options.connection}),pt.data.RemoteTransport.fn.setup.call(this,t,n)},options:{read:{dataType:"text",contentType:"text/xml",type:"POST"},discover:{dataType:"text",contentType:"text/xml",type:"POST"},parameterMap:function(e,t){return Q[t](e,t)}},discover:function(t){return e.ajax(this.setup(t,"discover"))}}),J={cubes:{name:pt.getter("CUBE_NAME['#text']",!0),caption:pt.getter("CUBE_CAPTION['#text']",!0),description:pt.getter("DESCRIPTION['#text']",!0),type:pt.getter("CUBE_TYPE['#text']",!0)},catalogs:{name:pt.getter("CATALOG_NAME['#text']",!0),description:pt.getter("DESCRIPTION['#text']",!0)},measures:{name:pt.getter("MEASURE_NAME['#text']",!0),caption:pt.getter("MEASURE_CAPTION['#text']",!0),uniqueName:pt.getter("MEASURE_UNIQUE_NAME['#text']",!0),description:pt.getter("DESCRIPTION['#text']",!0),aggregator:pt.getter("MEASURE_AGGREGATOR['#text']",!0),groupName:pt.getter("MEASUREGROUP_NAME['#text']",!0),displayFolder:pt.getter("MEASURE_DISPLAY_FOLDER['#text']",!0),defaultFormat:pt.getter("DEFAULT_FORMAT_STRING['#text']",!0)},kpis:{name:pt.getter("KPI_NAME['#text']",!0),caption:pt.getter("KPI_CAPTION['#text']",!0),value:pt.getter("KPI_VALUE['#text']",!0),goal:pt.getter("KPI_GOAL['#text']",!0),status:pt.getter("KPI_STATUS['#text']",!0),trend:pt.getter("KPI_TREND['#text']",!0),statusGraphic:pt.getter("KPI_STATUS_GRAPHIC['#text']",!0),trendGraphic:pt.getter("KPI_TREND_GRAPHIC['#text']",!0),description:pt.getter("KPI_DESCRIPTION['#text']",!0),groupName:pt.getter("MEASUREGROUP_NAME['#text']",!0)},dimensions:{name:pt.getter("DIMENSION_NAME['#text']",!0),caption:pt.getter("DIMENSION_CAPTION['#text']",!0),description:pt.getter("DESCRIPTION['#text']",!0),uniqueName:pt.getter("DIMENSION_UNIQUE_NAME['#text']",!0),defaultHierarchy:pt.getter("DEFAULT_HIERARCHY['#text']",!0),type:pt.getter("DIMENSION_TYPE['#text']",!0)},hierarchies:{name:pt.getter("HIERARCHY_NAME['#text']",!0),caption:pt.getter("HIERARCHY_CAPTION['#text']",!0),description:pt.getter("DESCRIPTION['#text']",!0),uniqueName:pt.getter("HIERARCHY_UNIQUE_NAME['#text']",!0),dimensionUniqueName:pt.getter("DIMENSION_UNIQUE_NAME['#text']",!0),displayFolder:pt.getter("HIERARCHY_DISPLAY_FOLDER['#text']",!0),origin:pt.getter("HIERARCHY_ORIGIN['#text']",!0),defaultMember:pt.getter("DEFAULT_MEMBER['#text']",!0)},levels:{name:pt.getter("LEVEL_NAME['#text']",!0),caption:pt.getter("LEVEL_CAPTION['#text']",!0),description:pt.getter("DESCRIPTION['#text']",!0),uniqueName:pt.getter("LEVEL_UNIQUE_NAME['#text']",!0),dimensionUniqueName:pt.getter("DIMENSION_UNIQUE_NAME['#text']",!0),displayFolder:pt.getter("LEVEL_DISPLAY_FOLDER['#text']",!0),orderingProperty:pt.getter("LEVEL_ORDERING_PROPERTY['#text']",!0),origin:pt.getter("LEVEL_ORIGIN['#text']",!0),hierarchyUniqueName:pt.getter("HIERARCHY_UNIQUE_NAME['#text']",!0)},members:{name:pt.getter("MEMBER_NAME['#text']",!0),caption:pt.getter("MEMBER_CAPTION['#text']",!0),uniqueName:pt.getter("MEMBER_UNIQUE_NAME['#text']",!0),dimensionUniqueName:pt.getter("DIMENSION_UNIQUE_NAME['#text']",!0),hierarchyUniqueName:pt.getter("HIERARCHY_UNIQUE_NAME['#text']",!0),levelUniqueName:pt.getter("LEVEL_UNIQUE_NAME['#text']",!0),childrenCardinality:pt.getter("CHILDREN_CARDINALITY['#text']",!0)}},Z=["axes","catalogs","cubes","dimensions","hierarchies","levels","measures"],et=pt.data.XmlDataReader.extend({init:function(e){pt.data.XmlDataReader.call(this,e),this._extend(e)
},_extend:function(e){for(var t,n,i=0,r=Z.length;r>i;i++)t=Z[i],n=e[t],n&&n!==yt&&(this[t]=n)},parse:function(e){var t=pt.data.XmlDataReader.fn.parse(e.replace(/<(\/?)(\w|-)+:/g,"<$1"));return pt.getter("['Envelope']['Body']",!0)(t)},errors:function(e){var t=pt.getter("['Fault']",!0)(e);return t?[{faultstring:pt.getter("faultstring['#text']",!0)(t),faultcode:pt.getter("faultcode['#text']",!0)(t)}]:null},axes:function(e){var t,n,i;return e=pt.getter("ExecuteResponse.return.root",!0)(e),t=q(pt.getter("Axes.Axis",!0)(e)),n=$(t[0]),i={},t.length>2&&(i=$(t[1])),{columns:n,rows:i}},data:function(e){var t,n,i,r,o,a;for(e=pt.getter("ExecuteResponse.return.root",!0)(e),t=q(pt.getter("CellData.Cell",!0)(e)),n=[],i=pt.getter("['@CellOrdinal']"),r=pt.getter("Value['#text']"),o=pt.getter("FmtValue['#text']"),a=0;t.length>a;a++)n.push({value:r(t[a]),fmtValue:o(t[a]),ordinal:parseInt(i(t[a]),10)});return n},_mapSchema:function(e,t){var n,i,r,o,a;for(e=pt.getter("DiscoverResponse.return.root",!0)(e),n=q(pt.getter("row",!0)(e)),i=[],r=0;n.length>r;r++){o={};for(a in t)o[a]=t[a](n[r]);i.push(o)}return i},measures:function(e){return this._mapSchema(e,J.measures)},kpis:function(e){return this._mapSchema(e,J.kpis)},hierarchies:function(e){return this._mapSchema(e,J.hierarchies)},levels:function(e){return this._mapSchema(e,J.levels)},dimensions:function(e){return this._mapSchema(e,J.dimensions)},cubes:function(e){return this._mapSchema(e,J.cubes)},catalogs:function(e){return this._mapSchema(e,J.catalogs)},members:function(e){return this._mapSchema(e,J.members)}}),bt(!0,pt.data,{PivotDataSource:Gt,XmlaTransport:X,XmlaDataReader:et,PivotCubeBuilder:Wt,transports:{xmla:X},readers:{xmla:et}}),tt=function(e,t){if(!e)return null;for(var n=0,i=e.length;i>n;n++)if(e[n].field===t)return e[n];return null},nt=function(e,t){var n,i,r=[];for(n=0,i=e.length;i>n;n++)e[n].field!==t&&r.push(e[n]);return r},pt.ui.PivotSettingTarget=mt.extend({init:function(t,n){var i=this;mt.fn.init.call(i,t,n),i.element.addClass("k-pivot-setting"),i.dataSource=pt.data.PivotDataSource.create(n.dataSource),i._refreshHandler=e.proxy(i.refresh,i),i.dataSource.first(xt,i._refreshHandler),n.template||(i.options.template="<div data-"+pt.ns+'name="${data.name || data}">${data.name || data}'+(i.options.enabled?'<a class="k-button k-button-icon k-button-bare"><span class="k-icon k-setting-delete"></span></a>':"")+"</div>"),i.template=pt.template(i.options.template),i.emptyTemplate=pt.template(i.options.emptyTemplate),i._sortable(),i.element.on("click"+Et,".k-button,.k-item",function(t){var n=e(t.target),r=n.closest("["+pt.attr("name")+"]").attr(pt.attr("name"));r&&(n.hasClass("k-setting-delete")?i.remove(r):i.options.sortable&&n[0]===t.currentTarget&&i.sort({field:r,dir:n.find(".k-i-sort-asc")[0]?"desc":"asc"}))}),(n.filterable||n.sortable)&&(i.fieldMenu=new ft.PivotFieldMenu(i.element,{messages:i.options.messages.fieldMenu,filter:".k-setting-fieldmenu",filterable:n.filterable,sortable:n.sortable,dataSource:i.dataSource})),i.refresh()},options:{name:"PivotSettingTarget",template:null,filterable:!1,sortable:!1,emptyTemplate:"<div class='k-empty'>${data}</div>",setting:"columns",enabled:!0,messages:{empty:"Drop Fields Here"}},setDataSource:function(e){this.dataSource.unbind(xt,this._refreshHandler),this.dataSource=this.options.dataSource=e,this.fieldMenu&&this.fieldMenu.setDataSource(e),e.first(xt,this._refreshHandler),this.refresh()},_sortable:function(){var e=this;e.options.enabled&&(this.sortable=this.element.kendoSortable({connectWith:this.options.connectWith,filter:">:not(.k-empty)",hint:e.options.hint,cursor:"move",start:function(e){e.item.focus().blur()},change:function(t){var n=t.item.attr(pt.attr("name"));"receive"==t.action?e.add(n):"remove"==t.action?e.remove(n):"sort"==t.action&&e.move(n,t.newIndex)}}).data("kendoSortable"))},_indexOf:function(e,t){var n,i,r=-1;for(n=0,i=t.length;i>n;n++)if(O(t[n])===e){r=n;break}return r},_isKPI:function(e){return"kpi"===e.type||e.measure},validate:function(e){var t,n,i=2==e.type||"aggregator"in e||this._isKPI(e);return i?"measures"===this.options.setting:"measures"===this.options.setting?i:(t=this.dataSource[this.options.setting](),n=e.defaultHierarchy||e.uniqueName,this._indexOf(n,t)>-1?!1:(t=this.dataSource["columns"===this.options.setting?"rows":"columns"](),this._indexOf(n,t)>-1?!1:!0))},add:function(t){var n,i,r=this.dataSource[this.options.setting]();for(t=e.isArray(t)?t.slice(0):[t],n=0,i=t.length;i>n;n++)-1!==this._indexOf(t[n],r)&&(t.splice(n,1),n-=1,i-=1);t.length&&(r=r.concat(t),this.dataSource[this.options.setting](r))},move:function(e,t){var n=this.dataSource[this.options.setting](),i=this._indexOf(e,n);i>-1&&(e=n.splice(i,1)[0],n.splice(t,0,e),this.dataSource[this.options.setting](n))},remove:function(e){var t=this.dataSource[this.options.setting](),n=this._indexOf(e,t);n>-1&&(t.splice(n,1),this.dataSource[this.options.setting](t))},sort:function(e){var t=this.options.sortable,n=t===!0||t.allowUnsort,i=n&&"asc"===e.dir,r=this.dataSource.sort()||[],o=nt(r,e.field);i&&r.length!==o.length&&(e=null),e&&o.push(e),this.dataSource.sort(o)},refresh:function(){var e,n="",i=this.dataSource[this.options.setting](),r=i.length,o=0;if(r)for(;r>o;o++)e=i[o],e=e.name===t?{name:e}:e,n+=this.template(bt({sortIcon:this._sortIcon(e.name)},e));else n=this.emptyTemplate(this.options.messages.empty);this.element.html(n)},destroy:function(){mt.fn.destroy.call(this),this.dataSource.unbind(xt,this._refreshHandler),this.element.off(Et),this.sortable&&this.sortable.destroy(),this.fieldMenu&&this.fieldMenu.destroy(),this.element=null,this._refreshHandler=null},_sortIcon:function(e){var t=this.dataSource.sort(),n=tt(t,O(e)),i="";return n&&(i="k-i-sort-"+n.dir),i}}),it=mt.extend({init:function(n,i){var r,o,a=this;mt.fn.init.call(a,n,i),a._dataSource(),a._bindConfigurator(),a._wrapper(),a._createLayout(),a._columnBuilder=r=new dt,a._rowBuilder=o=new ut,a._contentBuilder=new ht,a._templates(),a.columnsHeader.add(a.rowsHeader).on("click","span.k-icon",function(){var n,i,s,l,c=e(this),d=r,u="expandColumn",h=c.attr(pt.attr("path")),p={axis:"columns",path:e.parseJSON(h)};c.parent().is("td")&&(d=o,u="expandRow",p.axis="rows"),i=c.hasClass(Rt),s=d.metadata[h],l=s.expanded===t,n=i?Ft:zt,a.trigger(n,p)||(d.metadata[h].expanded=!i,c.toggleClass(Rt,!i).toggleClass(Bt,i),!i&&l?a.dataSource[u](p.path):a.refresh())}),a._scrollable(),a.options.autoBind&&a.dataSource.fetch(),pt.notify(a)},events:[Pt,It,zt,Ft],options:{name:"PivotGrid",autoBind:!0,reorderable:!0,filterable:!1,sortable:!1,height:null,columnWidth:100,configurator:"",columnHeaderTemplate:null,rowHeaderTemplate:null,dataCellTemplate:null,kpiStatusTemplate:null,kpiTrendTemplate:null,messages:{measureFields:"Drop Data Fields Here",columnFields:"Drop Column Fields Here",rowFields:"Drop Rows Fields Here"}},_templates:function(){var e=this.options.columnHeaderTemplate,t=this.options.rowHeaderTemplate,n=this.options.dataCellTemplate,i=this.options.kpiStatusTemplate,r=this.options.kpiTrendTemplate;this._columnBuilder.template=pt.template(e||Lt,{useWithBlock:!!e}),this._contentBuilder.dataTemplate=pt.template(n||Nt,{useWithBlock:!!n}),this._contentBuilder.kpiStatusTemplate=pt.template(i||Ot,{useWithBlock:!!i}),this._contentBuilder.kpiTrendTemplate=pt.template(r||Ht,{useWithBlock:!!r}),this._rowBuilder.template=pt.template(t||Lt,{useWithBlock:!!t})},_bindConfigurator:function(){var t=this.options.configurator;t&&e(t).kendoPivotConfigurator("setDataSource",this.dataSource)},cellInfoByElement:function(t){return t=e(t),this.cellInfo(t.index(),t.parent("tr").index())},cellInfo:function(e,t){var n,i=this._contentBuilder,r=i.columnIndexes[e||0],o=i.rowIndexes[t||0];return r&&o?(n=o.index*i.rowLength+r.index,{columnTuple:r.tuple,rowTuple:o.tuple,measure:r.measure||o.measure,dataItem:this.dataSource.view()[n]}):null},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.measuresTarget&&this.measuresTarget.setDataSource(e),this.rowsTarget&&this.rowsTarget.setDataSource(e),this.columnsTarget&&this.columnsTarget.setDataSource(e),this._bindConfigurator(),this.options.autoBind&&e.fetch()},setOptions:function(e){mt.fn.setOptions.call(this,e),this._templates()},_dataSource:function(){var t=this,n=t.options.dataSource;n=e.isArray(n)?{data:n}:n,t.dataSource&&this._refreshHandler?t.dataSource.unbind(xt,t._refreshHandler).unbind(Tt,t._stateResetHandler).unbind(St,t._progressHandler).unbind(Ct,t._errorHandler):(t._refreshHandler=e.proxy(t.refresh,t),t._progressHandler=e.proxy(t._requestStart,t),t._stateResetHandler=e.proxy(t._stateReset,t),t._errorHandler=e.proxy(t._error,t)),t.dataSource=pt.data.PivotDataSource.create(n).bind(xt,t._refreshHandler).bind(St,t._progressHandler).bind(Tt,t._stateResetHandler).bind(Ct,t._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_stateReset:function(){this._columnBuilder.reset(),this._rowBuilder.reset()},_wrapper:function(){var e=this.options.height;this.wrapper=this.element.addClass("k-widget k-pivot"),e&&this.wrapper.css("height",e)},_measureFields:function(){this.measureFields=e(At).addClass("k-pivot-toolbar k-header k-settings-measures"),this.measuresTarget=this._createSettingTarget(this.measureFields,{setting:"measures",messages:{empty:this.options.messages.measureFields}})},_createSettingTarget:function(t,n){var i='<span tabindex="0" class="k-button" data-'+pt.ns+'name="${data.name}">${data.name}',r=n.sortable,o="";return r&&(o+="#if (data.sortIcon) {#",o+='<span class="k-icon ${data.sortIcon} k-setting-sort"></span>',o+="#}#"),(n.filterable||r)&&(o+='<span class="k-icon k-i-arrowhead-s k-setting-fieldmenu"></span>'),this.options.reorderable&&(o+='<span class="k-icon k-si-close k-setting-delete"></span>'),o&&(i+='<span class="k-field-actions">'+o+"</span>"),i+="</span>",new pt.ui.PivotSettingTarget(t,e.extend({template:i,emptyTemplate:'<span class="k-empty">${data}</span>',enabled:this.options.reorderable,dataSource:this.dataSource},n))},_initSettingTargets:function(){this.columnsTarget=this._createSettingTarget(this.columnFields,{connectWith:this.rowFields,setting:"columns",filterable:this.options.filterable,sortable:this.options.sortable,messages:{empty:this.options.messages.columnFields,fieldMenu:this.options.messages.fieldMenu}}),this.rowsTarget=this._createSettingTarget(this.rowFields,{connectWith:this.columnFields,setting:"rows",filterable:this.options.filterable,sortable:this.options.sortable,messages:{empty:this.options.messages.rowFields,fieldMenu:this.options.messages.fieldMenu}})},_createLayout:function(){var t=this,n=e(Vt),i=n.find(".k-pivot-rowheaders"),r=n.find(".k-pivot-table"),o=e(At).addClass("k-grid k-widget");t._measureFields(),t.columnFields=e(At).addClass("k-pivot-toolbar k-header k-settings-columns"),t.rowFields=e(At).addClass("k-pivot-toolbar k-header k-settings-rows"),t.columnsHeader=e('<div class="k-grid-header-wrap" />').wrap('<div class="k-grid-header" />'),t.columnsHeader.parent().css("padding-right",pt.support.scrollbar()),t.rowsHeader=e('<div class="k-grid k-widget k-alt"/>'),t.content=e('<div class="k-grid-content" />'),i.append(t.measureFields),i.append(t.rowFields),i.append(t.rowsHeader),o.append(t.columnsHeader.parent()),o.append(t.content),r.append(t.columnFields),r.append(o),t.wrapper.append(n),t.columnsHeaderTree=new pt.dom.Tree(t.columnsHeader[0]),t.rowsHeaderTree=new pt.dom.Tree(t.rowsHeader[0]),t.contentTree=new pt.dom.Tree(t.content[0]),t._initSettingTargets()},_progress:function(e){pt.ui.progress(this.wrapper,e)},_resize:function(){var e=this.columnsHeader.children("table");this.content[0].firstChild&&(this._setSectionsWidth(),this._setSectionsHeight(),this._setContentWidth(),this._setContentHeight(),e.css("table-layout",Dt),clearTimeout(this._layoutTimeout),this._layoutTimeout=setTimeout(function(){e.css("table-layout","fixed")}))},_setSectionsWidth:function(){var e=this.rowsHeader,t=e.parent(".k-pivot-rowheaders").width(Dt),n=Math.max(this.measureFields.outerWidth(),this.rowFields.outerWidth());n=Math.max(e.children("table").width(),n),t.width(n)},_setSectionsHeight:function(){var e=this.measureFields.height(Dt).height(),t=this.columnFields.height(Dt).height(),n=this.rowFields.height(Dt).innerHeight(),i=this.columnsHeader.height(Dt).innerHeight(),r=n-this.rowFields.height(),o=t>e?t:e,a=i>n?i:n;this.measureFields.height(o),this.columnFields.height(o),this.rowFields.height(a-r),this.columnsHeader.height(a)},_setContentWidth:function(){var e=this.content.find("table"),t=this.content.width(),n=e.children("colgroup").children().length,i=100,r=n*this.options.columnWidth;r>t&&(i=Math.ceil(r/t*100)),e.add(this.columnsHeader.children("table")).css("min-width",i+"%")},_setContentHeight:function(){var e=this,n=e.content,i=e.rowsHeader,r=e.wrapper.innerHeight(),o=pt.support.scrollbar(),a=n[0].offsetHeight===n[0].clientHeight;if(e.wrapper.is(":visible")){if(!r)return a&&(o=0),i.height(n.height()-o),t;r-=e.columnFields.outerHeight(),r-=e.columnsHeader.outerHeight(),2*o>=r&&(r=2*o+1,a||(r+=o)),n.height(r),a&&(o=0),i.height(r-o)}},_axisMeasures:function(e){var t=[],n=this.dataSource,i=n.measures(),r=i.length>1||i[0]&&i[0].type;return n.measuresAxis()===e&&(0===n[e]().length||r)&&(t=i),t},refresh:function(){var e,t=this,n=t.dataSource,i=n.axes(),r=(i.columns||{}).tuples||[],o=(i.rows||{}).tuples||[],a=t._columnBuilder,s=t._rowBuilder,l={},c={};t.trigger(Pt,{action:"rebind"})||(a.measures=this._axisMeasures("columns"),t.columnsHeaderTree.render(a.build(r)),t.rowsHeaderTree.render(s.build(o)),l={indexes:a._indexes,measures:a.measures,metadata:a.metadata},c={indexes:s._indexes,measures:this._axisMeasures("rows"),metadata:s.metadata},t.contentTree.render(t._contentBuilder.build(n.view(),l,c)),t._resize(),t.touchScroller?t.touchScroller.contentResized():(e=pt.touchScroller(t.content),e&&e.movable&&(t.touchScroller=e,e.movable.bind("change",function(e){t.columnsHeader.scrollLeft(-e.sender.x),t.rowsHeader.scrollTop(-e.sender.y)}))),t._progress(!1),t.trigger(It))},_scrollable:function(){var t=this,n=t.columnsHeader,i=t.rowsHeader;t.content.scroll(function(){n.scrollLeft(this.scrollLeft),i.scrollTop(this.scrollTop)}),i.bind("DOMMouseScroll"+Et+" mousewheel"+Et,e.proxy(t._wheelScroll,t))},_wheelScroll:function(t){var n,i;t.ctrlKey||(n=pt.wheelDeltaY(t),i=this.content.scrollTop(),n&&(t.preventDefault(),e(t.currentTarget).one("wheel"+Et,!1),this.rowsHeader.scrollTop(i+-n),this.content.scrollTop(i+-n)))}}),rt=pt.dom.element,ot=pt.dom.html,at=pt.dom.text,st=function(e,t){return{maxChildren:0,children:0,maxMembers:0,members:0,measures:1,levelNum:e,parentMember:0!==t}},lt=function(e,t){for(var n=[],i=0;t>=i;i++)n.push(e.members[i].name);return n},ct=function(e,t){for(var n="",i=0;t>=i;i++)n+=e.members[i].name;return n},dt=gt.extend({init:function(){this.measures=1,this.metadata={}},build:function(e){var t=this._tbody(e),n=this._colGroup();return[rt("table",null,[n,t])]},reset:function(){this.metadata={}},_colGroup:function(){for(var e=this._rowLength(),t=[],n=0;e>n;n++)t.push(rt("col",null));return rt("colgroup",null,t)},_tbody:function(e){var t=e[0];return this.map={},this.rows=[],this.rootTuple=t,this._indexes=[],t?(this._buildRows(t,0),this._normalize()):this.rows.push(rt("tr",null,[rt("th",null,[ot("&nbsp;")])])),rt("tbody",null,this.rows)},_normalize:function(){for(var e,t,n,i,r,o=this.rows,a=o.length,s=0;a>s;s++)if(e=o[s],1!==e.rowSpan)for(i=e.children,n=0,t=i.length;t>n;n++)r=i[n],r.tupleAll&&(r.attr.rowSpan=e.rowSpan)},_rowIndex:function(e){for(var t=this.rows,n=t.length,i=0;n>i&&t[i]!==e;i++);return i},_rowLength:function(){var e=this.rows[0]?this.rows[0].children:[],t=e.length,n=0,i=0;if(t)for(;t>i;i++)n+=e[i].attr.colSpan||1;return n||(n=this.measures),n},_row:function(e,t,n){var i,r,o=this.rootTuple.members[t].name,a=e.members[t].levelNum,s=o+a,l=this.map,c=l[s];return c?(c.notFirst=!1,c.parentMember&&c.parentMember===n||(c.parentMember=n,c.colSpan=0)):(c=rt("tr",null,[]),c.parentMember=n,c.colSpan=0,c.rowSpan=1,l[s]=c,i=l[o+(+a-1)],i&&(r=i.children,c.notFirst=r[1]&&-1===r[1].attr.className.indexOf("k-alt")?!0:i.notFirst),this.rows.splice(this._rowIndex(i)+1,0,c)),c},_measures:function(e,t,n){var i,r,o,a=this.map,s=a.measureRow;for(s||(s=rt("tr",null,[]),a.measureRow=s,this.rows.push(s)),r=0,o=e.length;o>r;r++)i=e[r],s.children.push(rt("th",{className:"k-header"+(n||"")},[this._content(i,t)]));return o},_content:function(e,t){return ot(this.template({member:e,tuple:t}))},_cell:function(e,t){return rt("th",{className:"k-header"+e},t)},_buildRows:function(e,n,i){var r,o,a,s,l,c,d,u,h,p,f=e.members,g=f[n],m=f[n+1],v=[],_=0;if(g.measure)return this._measures(g.children,e),t;if(u=pt.stringify(lt(e,n)),r=this._row(e,n,i),a=g.children,s=a.length,p=this.metadata[u],p||(this.metadata[u]=p=st(+g.levelNum,n)),this._indexes.push({path:u,tuple:e}),g.hasChildren&&(p.expanded===!1&&(s=0,p.children=0),d={className:"k-icon "+(s?Rt:Bt)},d[pt.attr("path")]=u,v.push(rt("span",d))),v.push(this._content(g,e)),l=this._cell(r.notFirst?" k-first":"",v),r.children.push(l),r.colSpan+=1,s){for(c=this._cell(" k-alt",[this._content(g,e)]),r.children.push(c);s>_;_++)o=this._buildRows(a[_],n,g);h=o.colSpan,l.attr.colSpan=h,p.children=h,p.members=1,r.colSpan+=h,r.rowSpan=o.rowSpan+1,m&&(h=m.measure?this._measures(m.children,e," k-alt"):this._buildRows(e,n+1).colSpan,c.attr.colSpan=h,h-=1,p.members+=h,r.colSpan+=h)}else m&&(h=m.measure?this._measures(m.children,e):this._buildRows(e,n+1).colSpan,p.members=h,h>1&&(l.attr.colSpan=h,r.colSpan+=h-1));return p.children>p.maxChildren&&(p.maxChildren=p.children),p.members>p.maxMembers&&(p.maxMembers=p.members),(c||l).tupleAll=!0,r}}),ut=gt.extend({init:function(){this.metadata={}},build:function(e){var t=this._tbody(e),n=this._colGroup();return[rt("table",null,[n,t])]},reset:function(){this.metadata={}},_colGroup:function(){for(var e=this.rows[0].children.length,t=[],n=0;e>n;n++)t.push(rt("col",null));return rt("colgroup",null,t)},_tbody:function(e){var t=e[0];return this.rootTuple=t,this.rows=[],this.map={},this._indexes=[],t?(this._buildRows(t,0),this._normalize()):this.rows.push(rt("tr",null,[rt("td",null,[ot("&nbsp;")])])),rt("tbody",null,this.rows)},_normalize:function(){for(var e,t,n,i,r=this.rows,o=r.length,a=0,s=this.rootTuple.members,l=s[0].name,c=s.length,d=0,u=this.map;o>a;a++)for(e=r[a],d=0;c>d;d++)n=this[s[d].name],t=e.colSpan["dim"+d],t&&n>t.levelNum&&(t.attr.colSpan=n-t.levelNum+1);e=u[l],i=u[l+"all"],e&&(e.children[0].attr.className="k-first"),i&&(i.children[0].attr.className+=" k-first")},_row:function(e){var t=rt("tr",null,e);return t.rowSpan=1,t.colSpan={},this.rows.push(t),t},_content:function(e,t){return ot(this.template({member:e,tuple:t}))},_buildRows:function(e,t){var n,i,r,o,a,s,l,c,d,u=this.map,h=e.members,p=h[t],f=h[t+1],g=p.children,m=g.length,v=+p.levelNum+1,_=this.rootTuple.members[t].name,y=lt(e,t-1).join(""),w=y+(p.parentName||""),b=u[w+"all"]||u[w],k=[];if(!b||b.hasChild?b=this._row():b.hasChild=!0,p.measure){for(c={className:b.allCell?"k-grid-footer":""},b.children.push(rt("td",c,[this._content(g[0],e)])),b.rowSpan=m,d=1;m>d;d++)this._row([rt("td",c,[this._content(g[d],e)])]);return b}if(u[y+p.name]=b,n=pt.stringify(lt(e,t)),o=this.metadata[n],o||(this.metadata[n]=o=st(v-1,t)),this._indexes.push({path:n,tuple:e}),p.hasChildren&&(o.expanded===!1&&(m=0,o.children=0),a={className:"k-icon "+(m?Rt:Bt)},a[pt.attr("path")]=n,k.push(rt("span",a))),k.push(this._content(p,e)),l=rt("td",{className:b.allCell&&!m?"k-grid-footer":""},k),l.levelNum=v,b.children.push(l),b.colSpan["dim"+t]=l,(!this[_]||v>this[_])&&(this[_]=v),m){for(b.allCell=!1,b.hasChild=!1,d=0;m>d;d++)i=this._buildRows(g[d],t),b!==i&&(b.rowSpan+=i.rowSpan);b.rowSpan>1&&(l.attr.rowSpan=b.rowSpan),o.children=b.rowSpan,s=rt("td",{className:"k-grid-footer"},[this._content(p,e)]),s.levelNum=v,r=this._row([s]),r.colSpan["dim"+t]=s,r.allCell=!0,u[y+p.name+"all"]=r,f&&(i=this._buildRows(e,t+1),s.attr.rowSpan=i.rowSpan),b.rowSpan+=r.rowSpan,o.members=r.rowSpan}else f&&(b.hasChild=!1,this._buildRows(e,t+1),(s||l).attr.rowSpan=b.rowSpan,o.members=b.rowSpan);return o.children>o.maxChildren&&(o.maxChildren=o.children),o.members>o.maxMembers&&(o.maxMembers=o.members),b}}),ht=gt.extend({init:function(){this.columnAxis={},this.rowAxis={}},build:function(e,n,i){var r,o,a=n.indexes[0],s=n.metadata[a?a.path:t];return this.columnAxis=n,this.rowAxis=i,this.data=e,this.rowLength=s?s.maxChildren+s.maxMembers:n.measures.length||1,this.rowLength||(this.rowLength=1),r=this._tbody(),o=this._colGroup(),[rt("table",null,[o,r])]},_colGroup:function(){var e=this.columnAxis.measures.length||1,t=[],n=0;for(this.rows[0]&&(e=this.rows[0].children.length);e>n;n++)t.push(rt("col",null));return rt("colgroup",null,t)},_tbody:function(){return this.rows=[],this.data[0]?(this.columnIndexes=this._indexes(this.columnAxis),this.rowIndexes=this._indexes(this.rowAxis),this._buildRows()):this.rows.push(rt("tr",null,[rt("td",null,[ot("&nbsp;")])])),rt("tbody",null,this.rows)},_indexes:function(e){var n,i,r,o,a,s=[],l=e.indexes,c=e.metadata,d=e.measures,u=d.length||1,h=0,p=0,f=0,g=l.length;if(!g){for(r=0;u>r;r++)s[r]={index:r,measure:d[r],tuple:null};return s}for(;g>f;f++){if(n=l[f],i=c[n.path],o=i.children+i.members,a=0,o&&(o-=u),i.expanded===!1&&i.children!==i.maxChildren&&(a=i.maxChildren),i.parentMember&&0===i.levelNum&&(o=-1),o>-1){for(r=0;u>r;r++)s[o+p+r]={children:o,index:h,measure:d[r],tuple:n.tuple},h+=1;for(;s[p]!==t;)p+=1}h+=a}return s},_buildRows:function(){for(var e=this.rowIndexes,t=e.length,n=0;t>n;n++)this.rows.push(this._buildRow(e[n]))},_buildRow:function(e){for(var t,n,i,r,o,a,s=e.index*this.rowLength,l=this.columnIndexes,c=l.length,d=[],u=0;c>u;u++)t=l[u],r={},t.children&&(r.className="k-alt"),i="",o=this.data[s+t.index],a=t.measure||e.measure,n={columnTuple:t.tuple,rowTuple:e.tuple,measure:a,dataItem:o},""!==o.value&&a&&a.type&&("status"===a.type?i=this.kpiStatusTemplate(n):"trend"===a.type&&(i=this.kpiTrendTemplate(n))),i||(i=this.dataTemplate(n)),d.push(rt("td",r,[ot(i)]));return r={},e.children&&(r.className="k-grid-footer"),rt("tr",r,d)}}),ft.plugin(it)}(window.kendo.jQuery),function(e,t){function n(e){return function(t){var n=t.children(".k-animation-container");return n.length||(n=t),n.children(e)}}function i(e){return f.template(e,{useWithBlock:!1})}function r(e){return e.find("> div .k-checkbox [type=checkbox]")}function o(e){return function(t,n){n=n.closest(G);var i,r=n.parent();return r.parent().is("li")&&(i=r.parent()),this._dataSourceMove(t,r,i,function(t,i){return this._insert(t.data(),i,n.index()+e)})}}function a(t,n){for(var i;t&&"ul"!=t.nodeName.toLowerCase();)i=t,t=t.nextSibling,3==i.nodeType&&(i.nodeValue=e.trim(i.nodeValue)),p.test(i.className)?n.insertBefore(i,n.firstChild):n.appendChild(i)}function s(t){var n=t.children("div"),i=t.children("ul"),r=n.children(".k-icon"),o=t.children(":checkbox"),s=n.children(".k-in");t.hasClass("k-treeview")||(n.length||(n=e("<div />").prependTo(t)),!r.length&&i.length?r=e("<span class='k-icon' />").prependTo(n):i.length&&i.children().length||(r.remove(),i.remove()),o.length&&e("<span class='k-checkbox' />").appendTo(n).append(o),s.length||(s=t.children("a").eq(0).addClass("k-in"),s.length||(s=e("<span class='k-in' />")),s.appendTo(n),n.length&&a(n[0].nextSibling,s[0])))}function l(e){var t=this;t.treeview=e,t.hovered=e.element,t._draggable=new g.Draggable(e.element,{filter:"div:not(.k-state-disabled) .k-in",hint:function(t){return e.templates.dragClue({item:e.dataItem(t),treeview:e.options})},cursorOffset:{left:10,top:f.support.mobileOS?-40/f.support.zoomLevel():10},dragstart:k(t.dragstart,t),dragcancel:k(t.dragcancel,t),drag:k(t.drag,t),dragend:k(t.dragend,t),$angular:e.options.$angular})}var c,d,u,h,p,f=window.kendo,g=f.ui,m=f.data,v=e.extend,_=f.template,y=e.isArray,w=g.Widget,b=m.HierarchicalDataSource,k=e.proxy,x=f.keys,C=".kendoTreeView",S="select",T="check",D="navigate",A="expand",E="change",M="error",P="checked",I="indeterminate",z="collapse",F="dragstart",R="drag",B="drop",L="dragend",O="dataBound",H="click",N="visibility",V="undefined",U="k-state-hover",W="k-treeview",j=":visible",G=".k-item",q="string",$="aria-selected",Y="aria-disabled",K={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},Q=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&typeof e.nodeName===q};d=n(".k-group"),u=n(".k-group,.k-content"),h=function(e){return e.children("div").children(".k-icon")},p=/k-sprite/,c=f.ui.DataBoundWidget.extend({init:function(e,t){var n,i,r=this,o=!1,a=t&&!!t.dataSource;y(t)&&(n=!0,t={dataSource:t}),t&&typeof t.loadOnDemand==V&&y(t.dataSource)&&(t.loadOnDemand=!1),w.prototype.init.call(r,e,t),e=r.element,t=r.options,i=e.is("ul")&&e||e.hasClass(W)&&e.children("ul"),o=!a&&i.length,o&&(t.dataSource.list=i),r._animation(),r._accessors(),r._templates(),e.hasClass(W)?(r.wrapper=e,r.root=e.children("ul").eq(0)):(r._wrapper(),i&&(r.root=e,r._group(r.wrapper))),r._tabindex(),r.root.attr("role","tree"),r._dataSource(o),r._attachEvents(),r._dragging(),o?r._syncHtmlAndDataSource():t.autoBind&&(r._progress(!0),r.dataSource.fetch()),t.checkboxes&&t.checkboxes.checkChildren&&r.updateIndeterminate(),r.element[0].id&&(r._ariaId=f.format("{0}_tv_active",r.element[0].id)),f.notify(r)},_attachEvents:function(){var t=this,n=".k-in:not(.k-state-selected,.k-state-disabled)",i="mouseenter";t.wrapper.on(i+C,".k-in.k-state-selected",function(e){e.preventDefault()}).on(i+C,n,function(){e(this).addClass(U)}).on("mouseleave"+C,n,function(){e(this).removeClass(U)}).on(H+C,n,k(t._click,t)).on("dblclick"+C,".k-in:not(.k-state-disabled)",k(t._toggleButtonClick,t)).on(H+C,".k-plus,.k-minus",k(t._toggleButtonClick,t)).on("keydown"+C,k(t._keydown,t)).on("focus"+C,k(t._focus,t)).on("blur"+C,k(t._blur,t)).on("mousedown"+C,".k-in,.k-checkbox :checkbox,.k-plus,.k-minus",k(t._mousedown,t)).on("change"+C,".k-checkbox :checkbox",k(t._checkboxChange,t)).on("click"+C,".k-checkbox :checkbox",k(t._checkboxClick,t)).on("click"+C,".k-request-retry",k(t._retryRequest,t)).on("click"+C,function(n){e(n.target).is(":kendoFocusable")||t.focus()})},_checkboxClick:function(t){var n=e(t.target);n.data(I)&&(n.data(I,!1).prop(I,!1).prop(P,!0),this._checkboxChange(t))},_syncHtmlAndDataSource:function(e,t){var n,i,o,a,s,l,c,d;for(e=e||this.root,t=t||this.dataSource,n=t.view(),i=f.attr("uid"),o=f.attr("expanded"),a=this.options.checkboxes,s=e.children("li"),l=0;s.length>l;l++)d=n[l],c=s.eq(l),c.attr("role","treeitem").attr(i,d.uid),d.expanded="true"===c.attr(o),a&&(d.checked=r(c).prop(P)),this._syncHtmlAndDataSource(c.children("ul"),d.children)},_animation:function(){var e=this.options,t=e.animation;t===!1?t={expand:{effects:{}},collapse:{hide:!0,effects:{}}}:t.collapse&&"effects"in t.collapse||(t.collapse=v({reverse:!0},t.expand)),v(t.collapse,{hide:!0}),e.animation=t},_dragging:function(){var e=this.options.dragAndDrop,t=this.dragging;e&&!t?this.dragging=new l(this):!e&&t&&(t.destroy(),this.dragging=null)},_templates:function(){var e=this,t=e.options,n=k(e._fieldAccessor,e);t.template&&typeof t.template==q?t.template=_(t.template):t.template||(t.template=i("# var text = "+n("text")+"(data.item); ## if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {##= text ## } else { ##: text ## } #")),e._checkboxes(),e.templates={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return e.firstLevel&&0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),n},cssClass:function(e,t){var n="",i=t.index,r=e.length-1;return e.firstLevel&&0===i&&(n+="k-top "),n+=0===i&&i!=r?"k-top":i==r?"k-bot":"k-mid"},textClass:function(e){var t="k-in";return e.enabled===!1&&(t+=" k-state-disabled"),e.selected===!0&&(t+=" k-state-selected"),t},toggleButtonClass:function(e){var t="k-icon";return t+=e.expanded!==!0?" k-plus":" k-minus",e.enabled===!1&&(t+="-disabled"),t},groupAttributes:function(e){var t="";return e.firstLevel||(t="role='group'"),t+(e.expanded!==!0?" style='display:none'":"")},groupCssClass:function(e){var t="k-group";return e.firstLevel&&(t+=" k-treeview-lines"),t},dragClue:i("<div class='k-header k-drag-clue'><span class='k-icon k-drag-status' />#= data.treeview.template(data) #</div>"),group:i("<ul class='#= data.r.groupCssClass(data.group) #'#= data.r.groupAttributes(data.group) #>#= data.renderItems(data) #</ul>"),itemContent:i("# var imageUrl = "+n("imageUrl")+"(data.item); ## var spriteCssClass = "+n("spriteCssClass")+"(data.item); ## if (imageUrl) { #<img class='k-image' alt='' src='#= imageUrl #'># } ## if (spriteCssClass) { #<span class='k-sprite #= spriteCssClass #' /># } ##= data.treeview.template(data) #"),itemElement:i("# var item = data.item, r = data.r; ## var url = "+n("url")+"(item); #<div class='#= r.cssClass(data.group, item) #'># if (item.hasChildren) { #<span class='#= r.toggleButtonClass(item) #' role='presentation' /># } ## if (data.treeview.checkboxes) { #<span class='k-checkbox' role='presentation'>#= data.treeview.checkboxes.template(data) #</span># } ## var tag = url ? 'a' : 'span'; ## var textAttr = url ? ' href=\\'' + url + '\\'' : ''; #<#=tag#  class='#= r.textClass(item) #'#= textAttr #>#= r.itemContent(data) #</#=tag#></div>"),item:i("# var item = data.item, r = data.r; #<li role='treeitem' class='#= r.wrapperCssClass(data.group, item) #' "+f.attr("uid")+"='#= item.uid #' aria-selected='#= item.selected ? \"true\" : \"false \" #' #=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= r.itemElement(data) #</li>"),loading:i("<div class='k-icon k-loading' /> #: data.messages.loading #"),retry:i("#: data.messages.requestFailed # <button class='k-button k-request-retry'>#: data.messages.retry #</button>")}},items:function(){return this.element.find(".k-item div:first-child")},setDataSource:function(e){var t=this.options;t.dataSource=e,this._dataSource(),this.dataSource.fetch(),t.checkboxes&&t.checkboxes.checkChildren&&this.updateIndeterminate()},_bindDataSource:function(){this._refreshHandler=k(this.refresh,this),this._errorHandler=k(this._error,this),this.dataSource.bind(E,this._refreshHandler),this.dataSource.bind(M,this._errorHandler)},_unbindDataSource:function(){var e=this.dataSource;e&&(e.unbind(E,this._refreshHandler),e.unbind(M,this._errorHandler))},_dataSource:function(e){function t(e){for(var n=0;e.length>n;n++)e[n]._initChildren(),e[n].children.fetch(),t(e[n].children.view())}var n=this,i=n.options,r=i.dataSource;r=y(r)?{data:r}:r,n._unbindDataSource(),r.fields||(r.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]),n.dataSource=r=b.create(r),e&&(r.fetch(),t(r.view())),n._bindDataSource()},events:[F,R,B,L,O,A,z,S,E,D,T],options:{name:"TreeView",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:100}},messages:{loading:"Loading...",requestFailed:"Request failed.",retry:"Retry"},dragAndDrop:!1,checkboxes:!1,autoBind:!0,loadOnDemand:!0,template:"",dataTextField:null},_accessors:function(){var e,t,n,i=this,r=i.options,o=i.element;for(e in K)t=r[K[e]],n=o.attr(f.attr(e+"-field")),!t&&n&&(t=n),t||(t=e),y(t)||(t=[t]),r[K[e]]=t},_fieldAccessor:function(t){var n=this.options[K[t]],i=n.length,r="(function(item) {";return 0===i?r+="return item['"+t+"'];":(r+="var levels = ["+e.map(n,function(e){return"function(d){ return "+f.expr(e)+"}"}).join(",")+"];",r+="return levels[Math.min(item.level(), "+i+"-1)](item)"),r+="})"},setOptions:function(e){w.fn.setOptions.call(this,e),this._animation(),this._dragging(),this._templates()},_trigger:function(e,t){return this.trigger(e,{node:t.closest(G)[0]})},_setChecked:function(t,n){if(t&&e.isFunction(t.view))for(var i=0,r=t.view();r.length>i;i++)r[i][P]=n,r[i].children&&this._setChecked(r[i].children,n)},_setIndeterminate:function(e){var t,n,i,o=d(e),a=!0;if(o.length&&(t=r(o.children()),n=t.length)){if(n>1){for(i=1;n>i;i++)if(t[i].checked!=t[i-1].checked||t[i].indeterminate||t[i-1].indeterminate){a=!1;
break}}else a=!t[0].indeterminate;return r(e).data(I,!a).prop(I,!a).prop(P,a&&t[0].checked)}},updateIndeterminate:function(e){var t,n,i;if(e=e||this.wrapper,t=d(e).children(),t.length){for(n=0;t.length>n;n++)this.updateIndeterminate(t.eq(n));i=this._setIndeterminate(e),i&&i.prop(P)&&(this.dataItem(e).checked=!0)}},_bubbleIndeterminate:function(e){if(e.length){var t,n=this.parent(e);n.length&&(this._setIndeterminate(n),t=n.children("div").find(".k-checkbox :checkbox"),t.prop(I)===!1?this.dataItem(n).set(P,t.prop(P)):this.dataItem(n).checked=!1,this._bubbleIndeterminate(n))}},_checkboxChange:function(t){var n=e(t.target),i=n.prop(P),r=n.closest(G);this.dataItem(r).set(P,i),this._trigger(T,r)},_toggleButtonClick:function(t){this.toggle(e(t.target).closest(G))},_mousedown:function(t){var n=e(t.currentTarget).closest(G);this._clickTarget=n,this.current(n)},_focusable:function(e){return e&&e.length&&e.is(":visible")&&!e.find(".k-in:first").hasClass("k-state-disabled")},_focus:function(){var t=this.select(),n=this._clickTarget;f.support.touch||(n&&n.length&&(t=n),this._focusable(t)||(t=this.current()),this._focusable(t)||(t=this._nextVisible(e())),this.current(t))},focus:function(){var e,t=this.wrapper,n=t[0],i=[],r=[],o=document.documentElement;do n=n.parentNode,n.scrollHeight>n.clientHeight&&(i.push(n),r.push(n.scrollTop));while(n!=o);for(t.focus(),e=0;i.length>e;e++)i[e].scrollTop=r[e]},_blur:function(){this.current().find(".k-in:first").removeClass("k-state-focused")},_enabled:function(e){return!e.children("div").children(".k-in").hasClass("k-state-disabled")},parent:function(t){var n,i,r=/\bk-treeview\b/,o=/\bk-item\b/;typeof t==q&&(t=this.element.find(t)),Q(t)||(t=t[0]),i=o.test(t.className);do t=t.parentNode,o.test(t.className)&&(i?n=t:i=!0);while(!r.test(t.className)&&!n);return e(n)},_nextVisible:function(e){function t(e){for(;e.length&&!e.next().length;)e=i.parent(e);return e.next().length?e.next():e}var n,i=this,r=i._expanded(e);return e.length&&e.is(":visible")?r?(n=d(e).children().first(),n.length||(n=t(e))):n=t(e):n=i.root.children().eq(0),i._enabled(n)||(n=i._nextVisible(n)),n},_previousVisible:function(e){var t,n,i=this;if(!e.length||e.prev().length)for(n=e.length?e.prev():i.root.children().last();i._expanded(n)&&(t=d(n).children().last(),t.length);)n=t;else n=i.parent(e)||e;return i._enabled(n)||(n=i._previousVisible(n)),n},_keydown:function(n){var i,r=this,o=n.keyCode,a=r.current(),s=r._expanded(a),l=a.find(".k-checkbox:first :checkbox"),c=f.support.isRtl(r.element);n.target==n.currentTarget&&(!c&&o==x.RIGHT||c&&o==x.LEFT?s?i=r._nextVisible(a):r.expand(a):!c&&o==x.LEFT||c&&o==x.RIGHT?s?r.collapse(a):(i=r.parent(a),r._enabled(i)||(i=t)):o==x.DOWN?i=r._nextVisible(a):o==x.UP?i=r._previousVisible(a):o==x.HOME?i=r._nextVisible(e()):o==x.END?i=r._previousVisible(e()):o==x.ENTER?a.find(".k-in:first").hasClass("k-state-selected")||r._trigger(S,a)||r.select(a):o==x.SPACEBAR&&l.length&&(l.prop(P,!l.prop(P)).data(I,!1).prop(I,!1),r._checkboxChange({target:l}),i=a),i&&(n.preventDefault(),a[0]!=i[0]&&(r._trigger(D,i),r.current(i))))},_click:function(t){var n,i=this,r=e(t.currentTarget),o=u(r.closest(G)),a=r.attr("href");n=a?"#"==a||a.indexOf("#"+this.element.id+"-")>=0:o.length&&!o.children().length,n&&t.preventDefault(),r.hasClass(".k-state-selected")||i._trigger(S,r)||i.select(r)},_wrapper:function(){var e,t,n=this,i=n.element,r="k-widget k-treeview";i.is("ul")?(e=i.wrap("<div />").parent(),t=i):(e=i,t=e.children("ul").eq(0)),n.wrapper=e.addClass(r),n.root=t},_group:function(e){var t=this,n=e.hasClass(W),i={firstLevel:n,expanded:n||t._expanded(e)},r=e.children("ul");r.addClass(t.templates.groupCssClass(i)).css("display",i.expanded?"":"none"),t._nodes(r,i)},_nodes:function(t,n){var i,r=this,o=t.children("li");n=v({length:o.length},n),o.each(function(t,o){o=e(o),i={index:t,expanded:r._expanded(o)},s(o),r._updateNodeClasses(o,n,i),r._group(o)})},_checkboxes:function(){var e,t=this.options,n=t.checkboxes;n&&(e="<input type='checkbox' #= (item.enabled === false) ? 'disabled' : '' # #= item.checked ? 'checked' : '' #",n.name&&(e+=" name='"+n.name+"'"),e+=" />",n=v({template:e},t.checkboxes),typeof n.template==q&&(n.template=_(n.template)),t.checkboxes=n)},_updateNodeClasses:function(e,t,n){var i=e.children("div"),r=e.children("ul"),o=this.templates;e.hasClass("k-treeview")||(n=n||{},n.expanded=typeof n.expanded!=V?n.expanded:this._expanded(e),n.index=typeof n.index!=V?n.index:e.index(),n.enabled=typeof n.enabled!=V?n.enabled:!i.children(".k-in").hasClass("k-state-disabled"),t=t||{},t.firstLevel=typeof t.firstLevel!=V?t.firstLevel:e.parent().parent().hasClass(W),t.length=typeof t.length!=V?t.length:e.parent().children().length,e.removeClass("k-first k-last").addClass(o.wrapperCssClass(t,n)),i.removeClass("k-top k-mid k-bot").addClass(o.cssClass(t,n)),i.children(".k-in").removeClass("k-in k-state-default k-state-disabled").addClass(o.textClass(n)),(r.length||"true"==e.attr("data-hasChildren"))&&(i.children(".k-icon").removeClass("k-plus k-minus k-plus-disabled k-minus-disabled").addClass(o.toggleButtonClass(n)),r.addClass("k-group")))},_processNodes:function(t,n){var i=this;i.element.find(t).each(function(t,r){n.call(i,t,e(r).closest(G))})},dataItem:function(t){var n=e(t).closest(G).attr(f.attr("uid")),i=this.dataSource;return i&&i.getByUid(n)},_insertNode:function(t,n,i,r,o){var a,l,c,u,h=this,p=d(i),f=p.children().length+1,g={firstLevel:i.hasClass(W),expanded:!o,length:f},m="",v=function(e,t){e.appendTo(t)};for(c=0;t.length>c;c++)u=t[c],u.index=n+c,m+=h._renderItem({group:g,item:u});if(l=e(m),l.length){for(h.angular("compile",function(){return{elements:l.get(),data:t.map(function(e){return{dataItem:e}})}}),p.length||(p=e(h._renderGroup({group:g})).appendTo(i)),r(l,p),i.hasClass("k-item")&&(s(i),h._updateNodeClasses(i)),h._updateNodeClasses(l.prev().first()),h._updateNodeClasses(l.next().last()),c=0;t.length>c;c++)u=t[c],u.hasChildren&&(a=u.children.data(),a.length&&h._insertNode(a,u.index,l.eq(c),v,!h._expanded(l.eq(c))));return l}},_updateNode:function(t,n){function i(){p=!0}function r(e,t){e.find(".k-checkbox :checkbox").prop(P,t).data(I,!1).prop(I,!1)}var o,a,s,l,c,d=this,h={treeview:d.options,item:s},p=!1;if("selected"==t)s=n[0],a=d.findByUid(s.uid).find(".k-in:first").removeClass("k-state-hover").toggleClass("k-state-selected",s[t]).end(),s[t]?(d.current(a),a.attr($,!0)):a.attr($,!1);else for(e.inArray(t,d.options.dataTextField)>=0?p=!0:(h.item=n[0],h.item.bind("get",i),d.templates.itemContent(h),h.item.unbind("set",i)),o=0;n.length>o;o++)h.item=s=n[o],("spriteCssClass"==t||"imageUrl"==t||p)&&d.findByUid(s.uid).find(">div>.k-in").html(d.templates.itemContent(h)),t==P?(a=d.findByUid(s.uid),l=s[t],r(a.children("div"),l),d.options.checkboxes.checkChildren&&(r(a.children(".k-group"),l),d._setChecked(s.children,l),d._bubbleIndeterminate(a))):"expanded"==t?d._toggle(d.findByUid(s.uid),s,s[t]):"enabled"==t&&(a=d.findByUid(s.uid),a.find(".k-checkbox :checkbox").prop("disabled",!s[t]),c=!u(a).is(j),a.removeAttr(Y),s[t]||(s.selected&&s.set("selected",!1),s.expanded&&s.set("expanded",!1),c=!0,a.attr($,!1).attr(Y,!0)),d._updateNodeClasses(a,{},{enabled:s[t],expanded:!c}))},_appendItems:function(e,t,n){var i=d(n),r=i.children(),o=!this._expanded(n);typeof e==V&&(e=r.length),this._insertNode(t,e,n,function(t,n){e>=r.length?t.appendTo(n):t.insertBefore(r.eq(e))},o),this._expanded(n)&&(this._updateNodeClasses(n),d(n).css("display","block"))},refresh:function(n){var i,r,o,a,l,c,u=this.wrapper,h=n.node,p=n.action,f=n.items,m=this.options,v=m.loadOnDemand,_=m.checkboxes&&m.checkboxes.checkChildren;if(n.field){if(!f[0]||!f[0].level)return;return this._updateNode(n.field,f)}if(h&&(u=this.findByUid(h.uid),this._progress(u,!1)),_&&"remove"!=p){for(r=!1,i=0;f.length>i;i++)if("checked"in f[i]){r=!0;break}if(!r&&h&&h.checked)for(i=0;f.length>i;i++)f[i].checked=!0}if("add"==p)this._appendItems(n.index,f,u);else if("remove"==p)this._remove(this.findByUid(f[0].uid),!1);else if(h)if(d(u).empty(),f.length)for(this._appendItems(n.index,f,u),o=d(u).children(),v&&_&&this._bubbleIndeterminate(o.last()),i=0;o.length>i;i++)a=o.eq(i),this.trigger("itemChange",{item:a,data:this.dataItem(a),ns:g});else s(u),this.trigger("itemChange",{item:u,data:h,ns:g});else l=this._renderGroup({items:f,group:{firstLevel:!0,expanded:!0}}),this.root.length?(this._angularItems("cleanup"),c=e(l),this.root.attr("class",c.attr("class")).html(c.html())):this.root=this.wrapper.html(l).children("ul"),this.root.attr("role","tree"),this._angularItems("compile");for(i=0;f.length>i;i++)(!v||f[i].expanded)&&f[i].load();this.trigger(O,{node:h?u:t})},_error:function(e){var t=e.node&&this.findByUid(e.node.uid),n=this.templates.retry({messages:this.options.messages});t?(this._progress(t,!1),this._expanded(t,!1),h(t).addClass("k-i-refresh"),e.node.loaded(!1)):(this._progress(!1),this.element.html(n))},_retryRequest:function(e){e.preventDefault(),this.dataSource.fetch()},expand:function(e){this._processNodes(e,function(e,t){this.toggle(t,!0)})},collapse:function(e){this._processNodes(e,function(e,t){this.toggle(t,!1)})},enable:function(e,t){t=2==arguments.length?!!t:!0,this._processNodes(e,function(e,n){this.dataItem(n).set("enabled",t)})},current:function(n){var i=this,r=i._current,o=i.element,a=i._ariaId;return arguments.length>0&&n&&n.length?(r&&(r[0].id===a&&r.removeAttr("id"),r.find(".k-in:first").removeClass("k-state-focused")),r=i._current=e(n,o).closest(G),r.find(".k-in:first").addClass("k-state-focused"),a=r[0].id||a,a&&(i.wrapper.removeAttr("aria-activedescendant"),r.attr("id",a),i.wrapper.attr("aria-activedescendant",a)),t):(r||(r=i._nextVisible(e())),r)},select:function(n){var i=this,r=i.element;return arguments.length?(n=e(n,r).closest(G),r.find(".k-state-selected").each(function(){var e=i.dataItem(this);e.set("selected",!1),delete e.selected}),n.length&&i.dataItem(n).set("selected",!0),i.trigger(E),t):r.find(".k-state-selected").closest(G)},_toggle:function(e,t,n){var i,r,o=this.options,a=u(e),s=n?"expand":"collapse";if(!a.data("animating")&&!this._trigger(s,e))if(this._expanded(e,n),i=t&&t.loaded(),r=!a.children().length,!n||i&&!r){if(this._updateNodeClasses(e,{},{expanded:n}),a.css("display")==(n?"block":"none"))return;n||a.css("height",a.height()).css("height"),a.kendoStop(!0,!0).kendoAnimate(v({reset:!0},o.animation[s],{complete:function(){n&&a.css("height","")}}))}else o.loadOnDemand&&this._progress(e,!0),a.remove(),t.load()},toggle:function(t,n){t=e(t),h(t).is(".k-minus,.k-plus,.k-minus-disabled,.k-plus-disabled")&&(1==arguments.length&&(n=!this._expanded(t)),this._expanded(t,n))},destroy:function(){var e=this;w.fn.destroy.call(e),e.wrapper.off(C),e._unbindDataSource(),e.dragging&&e.dragging.destroy(),f.destroy(e.element),e.root=e.wrapper=e.element=null},_expanded:function(e,n){var i=f.attr("expanded"),r=this.dataItem(e);return 1==arguments.length?"true"===e.attr(i)||r&&r.expanded:(u(e).data("animating")||(r&&(r.set("expanded",n),n=r.expanded),n?(e.attr(i,"true"),e.attr("aria-expanded","true")):(e.removeAttr(i),e.attr("aria-expanded","false"))),t)},_progress:function(e,t){var n=this.element,i=this.templates.loading({messages:this.options.messages});1==arguments.length?(t=e,t?n.html(i):n.empty()):h(e).toggleClass("k-loading",t).removeClass("k-i-refresh")},text:function(e,n){var i=this.dataItem(e),r=this.options[K.text],o=i.level(),a=r.length,s=r[Math.min(o,a-1)];return n?(i.set(s,n),t):i[s]},_objectOrSelf:function(t){return e(t).closest("[data-role=treeview]").data("kendoTreeView")||this},_dataSourceMove:function(e,t,n,i){var r,o=this._objectOrSelf(n||t),a=o.dataSource;return n&&n[0]!=o.element[0]&&(r=o.dataItem(n),r.loaded()||(o._progress(n,!0),r.load()),n!=this.root&&(a=r.children,a&&a instanceof b||(r._initChildren(),r.loaded(!0),a=r.children))),e=this._toObservableData(e),i.call(this,a,e)},_toObservableData:function(t){var n,i,r=t;return(t instanceof window.jQuery||Q(t))&&(n=this._objectOrSelf(t).dataSource,i=e(t).attr(f.attr("uid")),r=n.getByUid(i),r&&(r=n.remove(r))),r},_insert:function(e,t,n){t instanceof f.data.ObservableArray?t=t.toJSON():y(t)||(t=[t]);var i=e.parent();return i&&i._initChildren&&(i.hasChildren=!0,i._initChildren()),e.splice.apply(e,[n,0].concat(t)),this.findByUid(e[n].uid)},insertAfter:o(1),insertBefore:o(0),append:function(t,n,i){var r=this,o=r.root;return i=i||e.noop,n&&(o=d(n)),r._dataSourceMove(t,o,n,function(e,t){function o(){n&&r._expanded(n,!0);var i=e.data(),o=Math.max(i.length,0);return r._insert(i,t,o)}var a;return e.data()?(a=o(),i(a),a):(e.one(E,function(){i(o())}),null)})},_remove:function(t,n){var i,r,o,a=this;return t=e(t,a.element),this.angular("cleanup",function(){return{elements:t.get()}}),i=t.parent().parent(),r=t.prev(),o=t.next(),t[n?"detach":"remove"](),i.hasClass("k-item")&&(s(i),a._updateNodeClasses(i)),a._updateNodeClasses(r),a._updateNodeClasses(o),t},remove:function(e){var t=this.dataItem(e);t&&this.dataSource.remove(t)},detach:function(e){return this._remove(e,!0)},findByText:function(t){return e(this.element).find(".k-in").filter(function(n,i){return e(i).text()==t}).closest(G)},findByUid:function(e){return this.element.find(".k-item["+f.attr("uid")+"="+e+"]")},expandPath:function(n,i){var r,o,a;for(n=n.slice(0),r=this,o=this.dataSource,a=o.get(n[0]),i=i||e.noop;n.length>0&&(a.expanded||a.loaded());)a.set("expanded",!0),n.shift(),a=o.get(n[0]);return n.length?(o.bind("change",function(e){var t=e.node&&e.node.id;t&&t===n[0]&&(n.shift(),n.length?o.get(n[0]).set("expanded",!0):i.call(r))}),a.set("expanded",!0),t):i.call(r)},_parents:function(e){for(var t=e&&e.parentNode(),n=[];t;)n.push(t),t=t.parentNode();return n},expandTo:function(e){var t,n;for(e instanceof f.data.Node||(e=this.dataSource.get(e)),t=this._parents(e),n=0;t.length>n;n++)t[n].set("expanded",!0)},_renderItem:function(e){return e.group||(e.group={}),e.treeview=this.options,e.r=this.templates,this.templates.item(e)},_renderGroup:function(e){var t=this;return e.renderItems=function(e){var n="",i=0,r=e.items,o=r?r.length:0,a=e.group;for(a.length=o;o>i;i++)e.group=a,e.item=r[i],e.item.index=i,n+=t._renderItem(e);return n},e.r=t.templates,t.templates.group(e)}}),l.prototype={_removeTouchHover:function(){var e=this;f.support.touch&&e.hovered&&(e.hovered.find("."+U).removeClass(U),e.hovered=!1)},_hintStatus:function(n){var i=this._draggable.hint.find(".k-drag-status")[0];return n?(i.className="k-icon k-drag-status "+n,t):e.trim(i.className.replace(/k-(icon|drag-status)/g,""))},dragstart:function(t){var n=this,i=n.treeview,r=n.sourceNode=t.currentTarget.closest(G);i.trigger(F,{sourceNode:r[0]})&&t.preventDefault(),n.dropHint=e("<div class='k-drop-hint' />").css(N,"hidden").appendTo(i.element)},drag:function(t){var n,i,r,o,a,s,l,c,d,u,h=this,p=h.treeview,g=h.sourceNode,m=h.dropTarget=e(f.eventTarget(t)),v=m.closest(".k-treeview");v.length?e.contains(g[0],m[0])?n="k-denied":(n="k-insert-middle",i=m.closest(".k-top,.k-mid,.k-bot"),i.length?(o=i.outerHeight(),a=f.getOffset(i).top,s=m.closest(".k-in"),l=o/(s.length>0?4:2),c=a+l>t.y.location,d=t.y.location>a+o-l,h._removeTouchHover(),u=s.length&&!c&&!d,h.hovered=u?v:!1,h.dropHint.css(N,u?"hidden":"visible"),s.toggleClass(U,u),u?n="k-add":(r=i.position(),r.top+=c?0:o,h.dropHint.css(r)[c?"prependTo":"appendTo"](m.closest(G).children("div:first")),c&&i.hasClass("k-top")&&(n="k-insert-top"),d&&i.hasClass("k-bot")&&(n="k-insert-bottom"))):m[0]!=h.dropHint[0]&&(n=v[0]!=p.element[0]?"k-add":"k-denied")):(n="k-denied",h._removeTouchHover()),p.trigger(R,{sourceNode:g[0],dropTarget:m[0],pageY:t.y.location,pageX:t.x.location,statusClass:n.substring(2),setStatusClass:function(e){n=e}}),0!==n.indexOf("k-insert")&&h.dropHint.css(N,"hidden"),h._hintStatus(n)},dragcancel:function(){this.dropHint.remove()},dragend:function(){function e(e){a.updateIndeterminate(),a.trigger(L,{sourceNode:e&&e[0],destinationNode:n[0],dropPosition:s})}var n,i,r,o=this,a=o.treeview,s="over",l=o.sourceNode,c=o.dropHint,d=o.dropTarget;return"visible"==c.css(N)?(s=c.prevAll(".k-in").length>0?"after":"before",n=c.closest(G)):d&&(n=d.closest(".k-treeview .k-item"),n.length||(n=d.closest(".k-treeview"))),i={sourceNode:l[0],destinationNode:n[0],valid:"k-denied"!=o._hintStatus(),setValid:function(e){this.valid=e},dropTarget:d[0],dropPosition:s},r=a.trigger(B,i),c.remove(),o._removeTouchHover(),!i.valid||r?(o._draggable.dropped=i.valid,t):(o._draggable.dropped=!0,"over"==s?a.append(l,n,e):("before"==s?l=a.insertBefore(l,n):"after"==s&&(l=a.insertAfter(l,n)),e(l)),t)},destroy:function(){this._draggable.destroy()}},g.plugin(c)}(window.kendo.jQuery),function(e,t){function n(e,t){var n,i,r=[];for(n=0,i=e.length;i>n;n++)e[n].field!==t&&r.push(e[n]);return r}function i(e,t,n){var i,r,o,a;if(!e)return[];for(e=e.filters,i=0,r=[],o=e.length;o>i;i++)a=e[i].operator,(n||"in"===a)&&a!==n||e[i].field!==t||r.push(e[i]);return r}function r(t,n,r){var o,a=0,s=r.length;if(t=i(t,n,"in")[0])for(o=t.value.split(",");s>a;a++)r[a].checked=e.inArray(r[a].uniqueName,o)>=0;else for(;s>a;a++)r[a].checked=!0}function o(e,t){var n,i=e.length;for(n=0;i>n;n++)e[n].checked&&0!==e[n].level()&&t.push(e[n].uniqueName),e[n].hasChildren&&o(e[n].children.view(),t)}var a=window.kendo,s=a.ui,l="kendoContextMenu",c=e.proxy,d=".kendoPivotFieldMenu",u=s.Widget,h=u.extend({init:function(e,t){u.fn.init.call(this,e,t),this._dataSource(),this._layout(),a.notify(this)},events:[],options:{name:"PivotFieldMenu",filter:null,filterable:!0,sortable:!0,messages:{info:"Show items with value that:",sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filterFields:"Fields Filter",filter:"Filter",include:"Include Fields...",title:"Fields to include",clear:"Clear",ok:"OK",cancel:"Cancel",operators:{contains:"Contains",doesnotcontain:"Does not contain",startswith:"Starts with",endswith:"Ends with",eq:"Is equal to",neq:"Is not equal to"}}},_layout:function(){var t=this.options;this.wrapper=e(a.template(f)({ns:a.ns,filterable:t.filterable,sortable:t.sortable,messages:t.messages})),this.menu=this.wrapper[l]({filter:t.filter,target:this.element,orientation:"vertical",showOn:"click",closeOnClick:!1,open:c(this._menuOpen,this),select:c(this._select,this),copyAnchorStyles:!1}).data(l),this._createWindow(),t.filterable&&this._initFilterForm()},_initFilterForm:function(){var e=this.menu.element.find(".k-filter-item"),t=c(this._filter,this);this._filterOperator=new a.ui.DropDownList(e.find("select")),this._filterValue=e.find(".k-textbox"),e.on("submit"+d,t).on("click"+d,".k-button-filter",t).on("click"+d,".k-button-clear",c(this._reset,this))},_setFilterForm:function(e){var t="",n="";e&&(t=e.operator,n=e.value),this._filterOperator.value(t),this._filterValue.val(n)},_clearFilters:function(e){var t,n,r=this.dataSource.filter()||{},o=0;for(r.filters=r.filters||[],t=i(r,e),n=t.length;n>o;o++)r.filters.splice(r.filters.indexOf(t[o]),1);return r},_filter:function(e){var n,i,r=this,o=r._filterValue.val();return e.preventDefault(),o?(n={field:r.currentMember,operator:r._filterOperator.value(),value:o},i=r._clearFilters(r.currentMember),i.filters.push(n),r.dataSource.filter(i),r.menu.close(),t):(r.menu.close(),t)},_reset:function(e){var t=this,n=t._clearFilters(t.currentMember);e.preventDefault(),n.filters[0]||(n={}),t.dataSource.filter(n),t._setFilterForm(null),t.menu.close()},_sort:function(e){var t=this.currentMember,i=this.dataSource.sort()||[];i=n(i,t),i.push({field:t,dir:e}),this.dataSource.sort(i),this.menu.close()},setDataSource:function(e){this.options.dataSource=e,this._dataSource()},_dataSource:function(){this.dataSource=a.data.PivotDataSource.create(this.options.dataSource)},_createWindow:function(){var t=this.options.messages;this.includeWindow=e(a.template(g)({messages:t})).on("click"+d,".k-button-ok",c(this._applyIncludes,this)).on("click"+d,".k-button-cancel",c(this._closeWindow,this)),this.includeWindow=new s.Window(this.includeWindow,{title:t.title,visible:!1,resizable:!1,open:c(this._windowOpen,this)})},_applyIncludes:function(e){var t,n=[],r=this.treeView.dataSource.view(),a=r[0].checked,s=this.dataSource.filter(),l=i(s,this.currentMember,"in")[0];o(r,n),l&&(a?(s.filters.splice(s.filters.indexOf(l),1),s.filters.length||(s={})):l.value=n.join(","),t=s),n.length&&(t||a||(t={field:this.currentMember,operator:"in",value:n.join(",")},s&&(s.filters.push(t),t=s))),t&&this.dataSource.filter(t),this._closeWindow(e)},_closeWindow:function(e){e.preventDefault(),this.includeWindow.close()},_treeViewDataSource:function(){var e=this;return a.data.HierarchicalDataSource.create({schema:{model:{id:"uniqueName",hasChildren:function(e){return parseInt(e.childrenCardinality,10)>0}}},transport:{read:function(t){var n={},i=e.treeView.dataSource.get(t.data.uniqueName),o=t.data.uniqueName;o?(n.memberUniqueName=i.uniqueName.replace(/\&/g,"&amp;"),n.treeOp=1):n.levelUniqueName=e.currentMember+".[(ALL)]",e.dataSource.schemaMembers(n).done(function(n){r(e.dataSource.filter(),e.currentMember,n),t.success(n)}).fail(t.error)}}})},_createTreeView:function(e){var t=this;t.treeView=new s.TreeView(e,{autoBind:!1,dataSource:t._treeViewDataSource(),dataTextField:"name",checkboxes:{checkChildren:!0},dataBound:function(){s.progress(t.includeWindow.element,!1)}})},_menuOpen:function(t){var n;t.event&&(n=a.attr("name"),this.currentMember=e(t.event.target).closest("["+n+"]").attr(n),this.options.filterable&&this._setFilterForm(i(this.dataSource.filter(),this.currentMember)[0]))},_select:function(t){var n=e(t.item);e(".k-pivot-filter-window").not(this.includeWindow.element).kendoWindow("close"),n.hasClass("k-include-item")?this.includeWindow.center().open():n.hasClass("k-sort-asc")?this._sort("asc"):n.hasClass("k-sort-desc")&&this._sort("desc")},_windowOpen:function(){this.treeView||this._createTreeView(this.includeWindow.element.find(".k-treeview")),s.progress(this.includeWindow.element,!0),this.treeView.dataSource.read()},destroy:function(){u.fn.destroy.call(this),this.menu&&(this.menu.destroy(),this.menu=null),this.reeeView&&(this.treeView.destroy(),this.treeView=null),this.includeWindow&&(this.includeWindow.destroy(),this.includeWindow=null),this.wrapper=null,this.element=null}}),p='<div class="k-filterable k-content" tabindex="-1" data-role="fieldmenu"><form class="k-filter-menu"><div><div class="k-filter-help-text">#=messages.info#</div><select>#for(var op in messages.operators){#<option value="#=op#">#=messages.operators[op]#</option>#}#</select><input class="k-textbox" type="text" /><div><a class="k-button k-primary k-button-filter" href="\\#">#=messages.filter#</a><a class="k-button k-button-clear" href="\\#">#=messages.clear#</a></div></div></form></div>',f='<ul class="k-pivot-fieldmenu"># if (sortable) {#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-icon k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-icon k-i-sort-desc"></span>${messages.sortDescending}</span></li># if (filterable) {#<li class="k-separator"></li># } ## } ## if (filterable) {#<li class="k-item k-include-item"><span class="k-link"><span class="k-icon k-filter"></span>${messages.include}</span></li><li class="k-separator"></li><li class="k-item k-filter-item"><span class="k-link"><span class="k-icon k-filter"></span>${messages.filterFields}</span><ul><li>'+p+"</li></ul></li># } #</ul>",g='<div class="k-popup-edit-form k-pivot-filter-window"><div class="k-edit-form-container"><div class="k-treeview"></div><div class="k-edit-buttons k-state-default"><a class="k-button k-primary k-button-ok" href="\\#">${messages.ok}</a><a class="k-button k-button-cancel" href="\\#">${messages.cancel}</a></div></div>';s.plugin(h)}(window.kendo.jQuery),function(e,t){function n(t,i){var r,o,a=[];if(e.isPlainObject(t))if(t.hasOwnProperty("filters"))a=t.filters;else if(t.field==i)return t;for(e.isArray(t)&&(a=t),r=0;a.length>r;r++)if(o=n(a[r],i))return o}function i(t,n){t.filters&&(t.filters=e.grep(t.filters,function(e){return i(e,n),e.filters?e.filters.length:e.field!=n}))}function r(e,t){var n=o.getter(t,!0);return function(t){for(var i,r,o=e(t),a=[],s=0,l={};o.length>s;)i=o[s++],r=n(i),l.hasOwnProperty(r)||(a.push(i),l[r]=!0);return a}}var o=window.kendo,a=o.ui,s=o.data.DataSource,l=a.Widget,c="change",d="boolean",u="enums",h="string",p="Is equal to",f="Is not equal to",g=e.proxy,m=l.extend({init:function(n,i){var r,a,s,p,f,m,v,_,y,w;n=e(n).addClass("k-filtercell"),r=this.wrapper=e("<span/>").appendTo(n),a=this,m=a.operators=i.operators||{},v=a.input=e("<input/>").attr(o.attr("bind"),"value: value").appendTo(r),l.fn.init.call(a,n[0],i),i=a.options,s=a.dataSource=i.dataSource,a.model=s.reader.model,f=i.type=h,_=o.getter("reader.model.fields",!0)(s)||{},y=_[i.field],y&&y.type&&(f=i.type=y.type),i.values&&(i.type=f=u),m=m[f]||i.operators[f],a._parse=function(e){return e+""},a.model&&a.model.fields&&(w=a.model.fields[i.field],w&&w.parse&&(a._parse=g(w.parse,w))),a.viewModel=p=o.observable({operator:i.operator,value:null,operatorVisible:function(){var e=this.get("value");return null!==e&&e!==t&&"undefined"!=e}}),p.bind(c,g(a.updateDsFilter,a)),f==h&&a.initSuggestDataSource(i),null!==i.inputWidth&&v.width(i.inputWidth),a._setInputType(i,f),f!=d&&i.showOperators!==!1?a._createOperatorDropDown(m):r.addClass("k-operator-hidden"),a._createClearIcon(),o.bind(this.wrapper,p),f==h&&(i.template||a.setAutoCompleteSource()),f==u&&a.setComboBoxSource(a.options.values),a._refreshUI(),a._refreshHandler=g(a._refreshUI,a),a.dataSource.bind(c,a._refreshHandler)},_setInputType:function(t,n){var i,r,a,s,l,c=this,p=c.input;"function"==typeof t.template?t.template.call(c.viewModel,{element:c.input,dataSource:c.suggestDataSource}):n==h?p.attr(o.attr("role"),"autocomplete").attr(o.attr("text-field"),t.dataTextField||t.field).attr(o.attr("filter"),t.suggestionOperator).attr(o.attr("delay"),t.delay).attr(o.attr("min-length"),t.minLength).attr(o.attr("value-primitive"),!0):"date"==n?p.attr(o.attr("role"),"datepicker"):n==d?(p.remove(),i=e("<input type='radio'/>"),r=c.wrapper,a=o.guid(),s=e("<label/>").text(t.messages.isTrue).append(i),i.attr(o.attr("bind"),"checked:value").attr("name",a).val("true"),l=s.clone().text(t.messages.isFalse),i.clone().val("false").appendTo(l),r.append([s,l])):"number"==n?p.attr(o.attr("role"),"numerictextbox"):n==u&&p.attr(o.attr("role"),"combobox").attr(o.attr("text-field"),"text").attr(o.attr("suggest"),!0).attr(o.attr("filter"),"contains").attr(o.attr("value-field"),"value").attr(o.attr("value-primitive"),!0)},_createOperatorDropDown:function(t){var n,i,r=[];for(n in t)r.push({text:t[n],value:n});i=e('<input class="k-dropdown-operator" '+o.attr("bind")+'="value: operator"/>').appendTo(this.wrapper),this.operatorDropDown=i.kendoDropDownList({dataSource:r,dataTextField:"text",dataValueField:"value",open:function(){this.popup.element.width(150)},valuePrimitive:!0}).data("kendoDropDownList"),this.operatorDropDown.wrapper.find(".k-i-arrow-s").removeClass("k-i-arrow-s").addClass("k-filter")},initSuggestDataSource:function(e){var n=e.suggestDataSource;n instanceof s||(!e.customDataSource&&n&&(n.group=t),n=this.suggestDataSource=s.create(n)),e.customDataSource||(n._pageSize=t,n.reader.data=r(n.reader.data,this.options.field)),this.suggestDataSource=n},setAutoCompleteSource:function(){var e=this.input.data("kendoAutoComplete");e&&e.setDataSource(this.suggestDataSource)},setComboBoxSource:function(e){var t=s.create({data:e}),n=this.input.data("kendoComboBox");n&&n.setDataSource(t)},_refreshUI:function(){var t=this,i=n(t.dataSource.filter(),this.options.field)||{},r=t.viewModel;t.manuallyUpdatingVM=!0,i=e.extend(!0,{},i),t.options.type==d&&r.value!==i.value&&t.wrapper.find(":radio").prop("checked",!1),i.operator&&r.set("operator",i.operator),r.set("value",i.value),t.manuallyUpdatingVM=!1},updateDsFilter:function(n){var i,r,o,a=this,s=a.viewModel;a.manuallyUpdatingVM||"operator"==n.field&&s.value===t||(i=e.extend({},a.viewModel.toJSON(),{field:a.options.field}),r={logic:"and",filters:[]},i.value!==t&&null!==i.value&&r.filters.push(i),o=a._merge(r),a.dataSource.filter(o.filters.length?o:{}))},_merge:function(t){var n,r,o,a=this,s=t.logic||"and",l=t.filters,c=a.dataSource.filter()||{filters:[],logic:"and"};for(i(c,a.options.field),r=0,o=l.length;o>r;r++)n=l[r],n.value=a._parse(n.value);return l=e.grep(l,function(e){return""!==e.value&&null!==e.value}),l.length&&(c.filters.length?(t.filters=l,"and"!==c.logic&&(c.filters=[{logic:c.logic,filters:c.filters}],c.logic="and"),c.filters.push(l.length>1?t:l[0])):(c.filters=l,c.logic=s)),c},_createClearIcon:function(){var t=this;e("<button type='button' class='k-button k-button-icon'/>").attr(o.attr("bind"),"visible:operatorVisible").html("<span class='k-icon k-i-close'/>").click(g(t.clearFilter,t)).appendTo(t.wrapper)},clearFilter:function(){this.viewModel.set("value",null)},destroy:function(){var e=this;e.filterModel=null,l.fn.destroy.call(e),o.destroy(e.element)},events:[c],options:{name:"FilterCell",delay:200,minLength:1,inputWidth:null,values:t,customDataSource:!1,field:"",dataTextField:"",type:"string",suggestDataSource:null,suggestionOperator:"startswith",operator:"eq",showOperators:!0,template:null,messages:{isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",operator:"Operator"},operators:{string:{eq:p,neq:f,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{eq:p,neq:f,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"},date:{eq:p,neq:f,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},enums:{eq:p,neq:f}}}});a.plugin(m)}(window.kendo.jQuery),function(e,t){function n(t){t=e(t),t.children(v).children(".k-icon").remove(),t.filter(":has(.k-panel),:has(.k-content)").children(".k-link:not(:has([class*=k-i-arrow]))").each(function(){var t=e(this),n=t.parent();t.append("<span class='k-icon "+(n.hasClass(I)?"k-i-arrow-n k-panelbar-collapse":"k-i-arrow-s k-panelbar-expand")+"'/>")})}function i(t){t=e(t),t.filter(".k-first:not(:first-child)").removeClass(x),t.filter(".k-last:not(:last-child)").removeClass(g),t.filter(":first-child").addClass(x),t.filter(":last-child").addClass(g)}var r=window.kendo,o=r.ui,a=r.keys,s=e.extend,l=e.each,c=r.template,d=o.Widget,u=/^(ul|a|div)$/i,h=".kendoPanelBar",p="img",f="href",g="k-last",m="k-link",v="."+m,_="error",y=".k-item",w=".k-group",b=w+":visible",k="k-image",x="k-first",C="expand",S="select",T="k-content",D="activate",A="collapse",E="mouseenter",M="mouseleave",P="contentLoad",I="k-state-active",z="> .k-panel",F="> .k-content",R="k-state-focused",B="k-state-disabled",L="k-state-selected",O="."+L,H="k-state-highlight",N=y+":not(.k-state-disabled)",V=N+" > .k-link",U=y+".k-state-disabled > .k-link",W="> li > "+O+", .k-panel > li > "+O,j="k-state-default",G="aria-disabled",q="aria-expanded",$="aria-hidden",Y="aria-selected",K=":visible",Q=":empty",X="single",J={content:c("<div role='region' class='k-content'#= contentAttributes(data) #>#= content(item) #</div>"),group:c("<ul role='group' aria-hidden='true' class='#= groupCssClass(group) #'#= groupAttributes(group) #>#= renderItems(data) #</ul>"),itemWrapper:c("<#= tag(item) # class='#= textClass(item, group) #' #= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:c("<li role='menuitem' #=aria(item)#class='#= wrapperCssClass(group, item) #'>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, panelBar: panelBar, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:c("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:c("<span class='#= arrowClass(item) #'></span>"),sprite:c("<span class='k-sprite #= spriteCssClass #'></span>"),empty:c("")},Z={aria:function(e){var t="";return(e.items||e.content||e.contentUrl)&&(t+=q+"='"+(e.expanded?"true":"false")+"' "),e.enabled===!1&&(t+=G+"='true'"),t
},wrapperCssClass:function(e,t){var n="k-item",i=t.index;return n+=t.enabled===!1?" "+B:t.expanded===!0?" "+I:" k-state-default",0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),t.cssClass&&(n+=" "+t.cssClass),n},textClass:function(e,t){var n=m;return t.firstLevel&&(n+=" k-header"),n},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e){var t="k-icon";return t+=e.expanded?" k-i-arrow-n k-panelbar-collapse":" k-i-arrow-s k-panelbar-expand"},text:function(e){return e.encoded===!1?e.text:r.htmlEncode(e.text)},tag:function(e){return e.url||e.contentUrl?"a":"span"},groupAttributes:function(e){return e.expanded!==!0?" style='display:none'":""},groupCssClass:function(){return"k-group k-panel"},contentAttributes:function(e){return e.item.expanded!==!0?" style='display:none'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?'href="'+e.contentUrl+'"':""}},et=d.extend({init:function(t,n){var i,o=this;d.fn.init.call(o,t,n),t=o.wrapper=o.element.addClass("k-widget k-reset k-header k-panelbar"),n=o.options,t[0].id&&(o._itemId=t[0].id+"_pb_active"),o._tabindex(),o._initData(n),o._updateClasses(),o._animations(n),t.on("click"+h,V,function(t){o._click(e(t.currentTarget))&&t.preventDefault()}).on(E+h+" "+M+h,V,o._toggleHover).on("click"+h,U,!1).on("keydown"+h,e.proxy(o._keydown,o)).on("focus"+h,function(){var e=o.select();o._current(e[0]?e:o._first())}).on("blur"+h,function(){o._current(null)}).attr("role","menu"),i=t.find("li."+I+" > ."+T),i[0]&&o.expand(i.parent(),!1),r.notify(o)},events:[C,A,S,D,_,P],options:{name:"PanelBar",animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:200}},expandMode:"multiple"},destroy:function(){d.fn.destroy.call(this),this.element.off(h),r.destroy(this.element)},_initData:function(e){var t=this;e.dataSource&&(t.element.empty(),t.append(e.dataSource,t.element))},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=s(!0,t,e.animation),"dataSource"in e&&this._initData(e),d.fn.setOptions.call(this,e)},expand:function(t,n){var i=this,r={};return n=n!==!1,t=this.element.find(t),t.each(function(o,a){a=e(a);var s=a.find(z).add(a.find(F));if(!a.hasClass(B)&&s.length>0){if(i.options.expandMode==X&&i._collapseAllExpanded(a))return i;t.find("."+H).removeClass(H),a.addClass(H),n||(r=i.options.animation,i.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),i._triggerEvent(C,a)||i._toggleItem(a,!1),n||(i.options.animation=r)}}),i},collapse:function(t,n){var i=this,r={};return n=n!==!1,t=i.element.find(t),t.each(function(t,o){o=e(o);var a=o.find(z).add(o.find(F));!o.hasClass(B)&&a.is(K)&&(o.removeClass(H),n||(r=i.options.animation,i.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),i._triggerEvent(A,o)||i._toggleItem(o,!0),n||(i.options.animation=r))}),i},_toggleDisabled:function(e,t){e=this.element.find(e),e.toggleClass(j,t).toggleClass(B,!t).attr(G,!t)},select:function(n){var i=this;return n===t?i.element.find(W).parent():(n=i.element.find(n),n.length?n.each(function(){var n=e(this),r=n.children(v);return n.hasClass(B)?i:(i._triggerEvent(S,n)||i._updateSelected(r),t)}):this._updateSelected(n),i)},clearSelection:function(){this.select(e())},enable:function(e,t){return this._toggleDisabled(e,t!==!1),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(e,t){t=this.element.find(t);var r=this._insert(e,t,t.length?t.find(z):null);return l(r.items,function(){r.group.append(this),i(this)}),n(t),i(r.group.find(".k-first, .k-last")),r.group.height("auto"),this},insertBefore:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return l(n.items,function(){t.before(this),i(this)}),i(t),n.group.height("auto"),this},insertAfter:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return l(n.items,function(){t.after(this),i(this)}),i(t),n.group.height("auto"),this},remove:function(e){e=this.element.find(e);var t=this,r=e.parentsUntil(t.element,y),o=e.parent("ul");return e.remove(),!o||o.hasClass("k-panelbar")||o.children(y).length||o.remove(),r.length&&(r=r.eq(0),n(r),i(r)),t},reload:function(t){var n=this;t=n.element.find(t),t.each(function(){var t=e(this);n._ajaxRequest(t,t.children("."+T),!t.is(K))})},_first:function(){return this.element.children(N).first()},_last:function(){var e=this.element.children(N).last(),t=e.children(b);return t[0]?t.children(N).last():e},_current:function(e){var n=this,i=n._focused,r=n._itemId;return e===t?i:(n.element.removeAttr("aria-activedescendant"),i&&(i[0].id===r&&i.removeAttr("id"),i.children(v).removeClass(R)),e&&(r=e[0].id||r,e.attr("id",r).children(v).addClass(R),n.element.attr("aria-activedescendant",r)),n._focused=e,t)},_keydown:function(e){var t=this,n=e.keyCode,i=t._current();e.target==e.currentTarget&&(n==a.DOWN||n==a.RIGHT?(t._current(t._nextItem(i)),e.preventDefault()):n==a.UP||n==a.LEFT?(t._current(t._prevItem(i)),e.preventDefault()):n==a.ENTER||n==a.SPACEBAR?(t._click(i.children(v)),e.preventDefault()):n==a.HOME?(t._current(t._first()),e.preventDefault()):n==a.END&&(t._current(t._last()),e.preventDefault()))},_nextItem:function(e){if(!e)return this._first();var t=e.children(b),n=e.nextAll(":visible").first();return t[0]&&(n=t.children("."+x)),n[0]||(n=e.parent(b).parent(y).next()),n[0]||(n=this._first()),n.hasClass(B)&&(n=this._nextItem(n)),n},_prevItem:function(e){if(!e)return this._last();var t,n=e.prevAll(":visible").first();if(n[0])for(t=n;t[0];)t=t.children(b).children("."+g),t[0]&&(n=t);else n=e.parent(b).parent(y),n[0]||(n=this._last());return n.hasClass(B)&&(n=this._prevItem(n)),n},_insert:function(t,n,i){var r,o,a=this,l=e.isPlainObject(t),c=n&&n[0];return c||(i=a.element),o={firstLevel:i.hasClass("k-panelbar"),expanded:i.parent().hasClass(I),length:i.children().length},c&&!i.length&&(i=e(et.renderGroup({group:o})).appendTo(n)),l||e.isArray(t)?(r=e.map(l?[t]:t,function(t,n){return e("string"==typeof t?t:et.renderItem({group:o,item:s(t,{index:n})}))}),c&&n.attr(q,!1)):(r="string"==typeof t&&"<"!=t[0]?a.element.find(t):e(t),a._updateItemsClasses(r)),{items:r,group:i}},_toggleHover:function(t){var n=e(t.currentTarget);n.parents("li."+B).length||n.toggleClass("k-state-hover",t.type==E)},_updateClasses:function(){var t,r,o=this;t=o.element.find("li > ul").not(function(){return e(this).parentsUntil(".k-panelbar","div").length}).addClass("k-group k-panel").attr("role","group"),t.parent().attr(q,!1).not("."+I).children("ul").attr($,!0).hide(),r=o.element.add(t).children(),o._updateItemsClasses(r),n(r),i(r)},_updateItemsClasses:function(e){for(var t=e.length,n=0;t>n;n++)this._updateItemClasses(e[n],n)},_updateItemClasses:function(t,n){var i,o,a=this._selected,s=this.options.contentUrls,l=s&&s[n],c=this.element[0];t=e(t).addClass("k-item").attr("role","menuitem"),r.support.browser.msie&&t.css("list-style-position","inside").css("list-style-position",""),t.children(p).addClass(k),o=t.children("a").addClass(m),o[0]&&(o.attr("href",l),o.children(p).addClass(k)),t.filter(":not([disabled]):not([class*=k-state])").addClass("k-state-default"),t.filter("li[disabled]").addClass("k-state-disabled").attr(G,!0).removeAttr("disabled"),t.children("div").addClass(T).attr("role","region").attr($,!0).hide().parent().attr(q,!1),o=t.children(O),o[0]&&(a&&a.removeAttr(Y).children(O).removeClass(L),o.addClass(L),this._selected=t.attr(Y,!0)),t.children(v)[0]||(i="<span class='"+m+"'/>",s&&s[n]&&t[0].parentNode==c&&(i='<a class="k-link k-header" href="'+s[n]+'"/>'),t.contents().filter(function(){return!(this.nodeName.match(u)||3==this.nodeType&&!e.trim(this.nodeValue))}).wrapAll(i)),t.parent(".k-panelbar")[0]&&t.children(v).addClass("k-header")},_click:function(e){var t,n,i,r,o,a,s,l=this,c=l.element;if(!e.parents("li."+B).length&&e.closest(".k-widget")[0]==c[0]){if(o=e.closest(v),a=o.closest(y),l._updateSelected(o),n=a.find(z).add(a.find(F)),i=o.attr(f),r=i&&("#"==i.charAt(i.length-1)||-1!=i.indexOf("#"+l.element[0].id+"-")),t=!(!r&&!n.length),n.data("animating"))return t;if(l._triggerEvent(S,a)&&(t=!0),t!==!1)return l.options.expandMode==X&&l._collapseAllExpanded(a)?t:(n.length&&(s=n.is(K),l._triggerEvent(s?A:C,a)||(t=l._toggleItem(a,s))),t)}},_toggleItem:function(e,n){var i,r,o=this,a=e.find(z),s=e.find(v),l=s.attr(f);return a.length?(this._toggleGroup(a,n),i=!0):(r=e.children("."+T),r.length&&(i=!0,r.is(Q)&&l!==t?o._ajaxRequest(e,r,n):o._toggleGroup(r,n))),i},_toggleGroup:function(e,t){var n=this,i=n.options.animation,r=i.expand,o=s({},i.collapse),a=o&&"effects"in o;e.is(K)==t&&(e.parent().attr(q,!t).attr($,t).toggleClass(I,!t).find("> .k-link > .k-icon").toggleClass("k-i-arrow-n",!t).toggleClass("k-panelbar-collapse",!t).toggleClass("k-i-arrow-s",t).toggleClass("k-panelbar-expand",t),r=t?s(a?o:s({reverse:!0},r),{hide:!0}):s({complete:function(e){n._triggerEvent(D,e.closest(y))}},r),e.kendoStop(!0,!0).kendoAnimate(r))},_collapseAllExpanded:function(t){var n,i=this,r=!1,o=t.find(z).add(t.find(F));return o.is(K)&&(r=!0),o.is(K)||0===o.length||(n=t.siblings(),n.find(z).add(n.find(F)).filter(function(){return e(this).is(K)}).each(function(t,n){n=e(n),r=i._triggerEvent(A,n.closest(y)),r||i._toggleGroup(n,!0)})),r},_ajaxRequest:function(t,n,i){var r=this,o=t.find(".k-panelbar-collapse, .k-panelbar-expand"),a=t.find(v),s=setTimeout(function(){o.addClass("k-loading")},100),l={},c=a.attr(f);e.ajax({type:"GET",cache:!1,url:c,dataType:"html",data:l,error:function(e,t){o.removeClass("k-loading"),r.trigger(_,{xhr:e,status:t})&&this.complete()},complete:function(){clearTimeout(s),o.removeClass("k-loading")},success:function(e){function o(){return{elements:n.get()}}try{r.angular("cleanup",o),n.html(e),r.angular("compile",o)}catch(a){var s=window.console;s&&s.error&&s.error(a.name+": "+a.message+" in "+c),this.error(this.xhr,"error")}r._toggleGroup(n,i),r.trigger(P,{item:t[0],contentElement:n[0]})}})},_triggerEvent:function(e,t){var n=this;return n.trigger(e,{item:t[0]})},_updateSelected:function(e){var t=this,n=t.element,i=e.parent(y),r=t._selected;r&&r.removeAttr(Y),t._selected=i.attr(Y,!0),n.find(W).removeClass(L),n.find("> ."+H+", .k-panel > ."+H).removeClass(H),e.addClass(L),e.parentsUntil(n,y).filter(":has(.k-header)").addClass(H),t._current(i[0]?i:null)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}})}});s(et,{renderItem:function(e){e=s({panelBar:{},group:{}},e);var t=J.empty,n=e.item;return J.item(s(e,{image:n.imageUrl?J.image:t,sprite:n.spriteCssClass?J.sprite:t,itemWrapper:J.itemWrapper,renderContent:et.renderContent,arrow:n.items||n.content||n.contentUrl?J.arrow:t,subGroup:et.renderGroup},Z))},renderGroup:function(e){return J.group(s({renderItems:function(e){for(var t="",n=0,i=e.items,r=i?i.length:0,o=s({length:r},e.group);r>n;n++)t+=et.renderItem(s(e,{group:o,item:s({index:n},i[n])}));return t}},e,Z))},renderContent:function(e){return J.content(s(e,Z))}}),r.ui.plugin(et)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.Widget,o="horizontal",a="vertical",s=0,l=100,c=0,d=5,u="k-progressbar",h="k-progressbar-reverse",p="k-progressbar-indeterminate",f="k-complete",g="k-state-selected",m="k-progress-status",v="k-state-selected",_="k-state-default",y="k-state-disabled",w={VALUE:"value",PERCENT:"percent",CHUNK:"chunk"},b="change",k="complete",x="boolean",C=Math,S=e.extend,T=e.proxy,D=100,A=400,E=3,M={progressStatus:"<span class='k-progress-status-wrap'><span class='k-progress-status'></span></span>"},P=r.extend({init:function(e,t){var n=this;r.fn.init.call(this,e,t),t=n.options,n._progressProperty=t.orientation===o?"width":"height",n._fields(),t.value=n._validateValue(t.value),n._validateType(t.type),n._wrapper(),n._progressAnimation(),t.value!==t.min&&t.value!==!1&&n._updateProgress()},setOptions:function(e){var t=this;r.fn.setOptions.call(t,e),e.hasOwnProperty("reverse")&&t.wrapper.toggleClass("k-progressbar-reverse",e.reverse),e.hasOwnProperty("enable")&&t.enable(e.enable),t._progressAnimation(),t._validateValue(),t._updateProgress()},events:[b,k],options:{name:"ProgressBar",orientation:o,reverse:!1,min:s,max:l,value:c,enable:!0,type:w.VALUE,chunkCount:d,showStatus:!0,animation:{}},_fields:function(){var t=this;t._isStarted=!1,t.progressWrapper=t.progressStatus=e()},_validateType:function(i){var r=!1;if(e.each(w,function(e,n){return n===i?(r=!0,!1):t}),!r)throw Error(n.format("Invalid ProgressBar type '{0}'",i))},_wrapper:function(){var e,t=this,n=t.wrapper=t.element,i=t.options,r=i.orientation;n.addClass("k-widget "+u),n.addClass(u+"-"+(r===o?o:a)),i.enable===!1&&n.addClass(y),i.reverse&&n.addClass(h),i.value===!1&&n.addClass(p),i.type===w.CHUNK?t._addChunkProgressWrapper():i.showStatus&&(t.progressStatus=t.wrapper.prepend(M.progressStatus).find("."+m),e=i.value!==!1?i.value:i.min,t.progressStatus.text(i.type===w.VALUE?e:t._calculatePercentage(e)+"%"))},value:function(e){return this._value(e)},_value:function(e){var n,i=this,r=i.options;return e===t?r.value:(typeof e!==x?(e=i._roundValue(e),isNaN(e)||(n=i._validateValue(e),n!==r.value&&(i.wrapper.removeClass(p),r.value=n,i._isStarted=!0,i._updateProgress()))):e||(i.wrapper.addClass(p),r.value=!1),t)},_roundValue:function(e){e=parseFloat(e);var t=C.pow(10,E);return C.floor(e*t)/t},_validateValue:function(e){var t=this,n=t.options;if(e!==!1){if(n.min>=e||e===!0)return n.min;if(e>=n.max)return n.max}else if(e===!1)return!1;return isNaN(t._roundValue(e))?n.min:e},_updateProgress:function(){var e=this,t=e.options,n=e._calculatePercentage();t.type===w.CHUNK?(e._updateChunks(n),e._onProgressUpdateAlways(t.value)):e._updateProgressWrapper(n)},_updateChunks:function(e){var t,n=this,i=n.options,r=i.chunkCount,s=parseInt(D/r*100,10)/100,l=parseInt(100*e,10)/100,c=C.floor(l/s);t=n.wrapper.find(i.orientation===o&&!i.reverse||i.orientation===a&&i.reverse?"li.k-item:lt("+c+")":"li.k-item:gt(-"+(c+1)+")"),n.wrapper.find("."+v).removeClass(v).addClass(_),t.removeClass(_).addClass(v)},_updateProgressWrapper:function(e){var t=this,n=t.options,i=t.wrapper.find("."+g),r=t._isStarted?t._animation.duration:0,o={};0===i.length&&t._addRegularProgressWrapper(),o[t._progressProperty]=e+"%",t.progressWrapper.animate(o,{duration:r,start:T(t._onProgressAnimateStart,t),progress:T(t._onProgressAnimate,t),complete:T(t._onProgressAnimateComplete,t,n.value),always:T(t._onProgressUpdateAlways,t,n.value)})},_onProgressAnimateStart:function(){this.progressWrapper.show()},_onProgressAnimate:function(e){var t,n=this,i=n.options,r=parseFloat(e.elem.style[n._progressProperty],10);i.showStatus&&(t=1e4/parseFloat(n.progressWrapper[0].style[n._progressProperty]),n.progressWrapper.find(".k-progress-status-wrap").css(n._progressProperty,t+"%")),i.type!==w.CHUNK&&98>=r&&n.progressWrapper.removeClass(f)},_onProgressAnimateComplete:function(e){var t=this,n=t.options,i=parseFloat(t.progressWrapper[0].style[t._progressProperty]);n.type!==w.CHUNK&&i>98&&t.progressWrapper.addClass(f),n.showStatus&&t.progressStatus.text(n.type===w.VALUE?e:C.floor(t._calculatePercentage(e))+"%"),e===n.min&&t.progressWrapper.hide()},_onProgressUpdateAlways:function(e){var t=this,n=t.options;t._isStarted&&t.trigger(b,{value:e}),e===n.max&&t._isStarted&&t.trigger(k,{value:n.max})},enable:function(e){var n=this,i=n.options;i.enable=t===e?!0:e,n.wrapper.toggleClass(y,!i.enable)},destroy:function(){var e=this;r.fn.destroy.call(e)},_addChunkProgressWrapper:function(){var e,t=this,n=t.options,i=t.wrapper,r=D/n.chunkCount,o="";for(1>=n.chunkCount&&(n.chunkCount=d),o+="<ul class='k-reset'>",e=n.chunkCount-1;e>=0;e--)o+="<li class='k-item k-state-default'></li>";o+="</ul>",i.append(o).find(".k-item").css(t._progressProperty,r+"%").first().addClass("k-first").end().last().addClass("k-last"),t._normalizeChunkSize()},_normalizeChunkSize:function(){var e=this,t=e.options,n=e.wrapper.find(".k-item:last"),i=parseFloat(n[0].style[e._progressProperty]),r=D-t.chunkCount*i;r>0&&n.css(e._progressProperty,i+r+"%")},_addRegularProgressWrapper:function(){var t=this;t.progressWrapper=e("<div class='"+g+"'></div>").appendTo(t.wrapper),t.options.showStatus&&(t.progressWrapper.append(M.progressStatus),t.progressStatus=t.wrapper.find("."+m))},_calculateChunkSize:function(){var e=this,t=e.options.chunkCount,n=e.wrapper.find("ul.k-reset");return(parseInt(n.css(e._progressProperty),10)-(t-1))/t},_calculatePercentage:function(e){var n=this,i=n.options,r=e!==t?e:i.value,o=i.min,a=i.max;return n._onePercent=C.abs((a-o)/100),C.abs((r-o)/n._onePercent)},_progressAnimation:function(){var e=this,t=e.options,n=t.animation;e._animation=n===!1?{duration:0}:S({duration:A},t.animation)}});n.ui.plugin(P)}(window.kendo.jQuery),function(e,t){function n(t){t.children(g).addClass(C),t.children("a").addClass(y).children(g).addClass(C),t.filter(":not([disabled]):not([class*=k-state-disabled])").addClass(F),t.filter("li[disabled]").addClass(z).removeAttr("disabled"),t.filter(":not([class*=k-state])").children("a").filter(":focus").parent().addClass(R+" "+O),t.attr("role","tab"),t.filter("."+R).attr("aria-selected",!0),t.each(function(){var t=e(this);t.children("."+y).length||t.contents().filter(function(){return!(this.nodeName.match(p)||3==this.nodeType&&!c(this.nodeValue))}).wrapAll("<a class='"+y+"'/>")})}function i(e){var t=e.children(".k-item");t.filter(".k-first:not(:first-child)").removeClass(S),t.filter(".k-last:not(:last-child)").removeClass(w),t.filter(":first-child").addClass(S),t.filter(":last-child").addClass(w)}var r=window.kendo,o=r.ui,a=r.keys,s=e.map,l=e.each,c=e.trim,d=e.extend,u=r.template,h=o.Widget,p=/^(a|div)$/i,f=".kendoTabStrip",g="img",m="href",v="prev",_="show",y="k-link",w="k-last",b="click",k="error",x=":empty",C="k-image",S="k-first",T="select",D="activate",A="k-content",E="contentUrl",M="mouseenter",P="mouseleave",I="contentLoad",z="k-state-disabled",F="k-state-default",R="k-state-active",B="k-state-focused",L="k-state-hover",O="k-tab-on-top",H=".k-item:not(."+z+")",N=".k-tabstrip-items > "+H+":not(."+R+")",V={content:u("<div class='k-content'#= contentAttributes(data) # role='tabpanel'>#= content(item) #</div>"),itemWrapper:u("<#= tag(item) # class='k-link'#= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) #</#= tag(item) #>"),item:u("<li class='#= wrapperCssClass(group, item) #' role='tab' #=item.active ? \"aria-selected='true'\" : ''#>#= itemWrapper(data) #</li>"),image:u("<img class='k-image' alt='' src='#= imageUrl #' />"),sprite:u("<span class='k-sprite #= spriteCssClass #'></span>"),empty:u("")},U={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return n+=t.enabled===!1?" k-state-disabled":" k-state-default",0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),n},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},text:function(e){return e.encoded===!1?e.text:r.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},contentAttributes:function(e){return e.active!==!0?" style='display:none' aria-hidden='true' aria-expanded='false'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?r.attr("content-url")+'="'+e.contentUrl+'"':""}},W=h.extend({init:function(t,n){var i,o,a=this;h.fn.init.call(a,t,n),a._animations(a.options),n=a.options,a._wrapper(),a._isRtl=r.support.isRtl(a.wrapper),a._tabindex(),a._updateClasses(),a._dataSource(),n.dataSource&&a.dataSource.fetch(),a.options.contentUrls&&a.wrapper.find(".k-tabstrip-items > .k-item").each(function(t,n){e(n).find(">."+y).data(E,a.options.contentUrls[t])}),a.wrapper.on(M+f+" "+P+f,N,a._toggleHover).on("focus"+f,e.proxy(a._active,a)).on("blur"+f,function(){a._current(null)}),a._keyDownProxy=e.proxy(a._keydown,a),n.navigatable&&a.wrapper.on("keydown"+f,a._keyDownProxy),a.wrapper.children(".k-tabstrip-items").on(b+f,".k-state-disabled .k-link",!1).on(b+f," > "+H,function(t){var n,i=a.wrapper[0];if(i!==document.activeElement)if(n=r.support.browser.msie)try{i.setActive()}catch(o){i.focus()}else i.focus();a._click(e(t.currentTarget))&&t.preventDefault()}),i=a.tabGroup.children("li."+R),o=a.contentHolder(i.index()),i[0]&&o.length>0&&0===o[0].childNodes.length&&a.activateTab(i.eq(0)),a.element.attr("role","tablist"),a.element[0].id&&(a._ariaId=a.element[0].id+"_ts_active"),r.notify(a)},_active:function(){var e=this.tabGroup.children().filter("."+R);e=e[0]?e:this._endItem("first"),e[0]&&this._current(e)},_endItem:function(e){return this.tabGroup.children(H)[e]()},_item:function(e,t){var n;return n=t===v?"last":"first",e?(e=e[t](),e[0]||(e=this._endItem(n)),e.hasClass(z)&&(e=this._item(e,t)),e):this._endItem(n)},_current:function(e){var n=this,i=n._focused,r=n._ariaId;return e===t?i:(i&&(i[0].id===r&&i.removeAttr("id"),i.removeClass(B)),e&&(e.hasClass(R)||e.addClass(B),n.element.removeAttr("aria-activedescendant"),r=e[0].id||r,r&&(e.attr("id",r),n.element.attr("aria-activedescendant",r))),n._focused=e,t)},_keydown:function(e){var n,i=this,r=e.keyCode,o=i._current(),s=i._isRtl;if(e.target==e.currentTarget){if(r==a.DOWN||r==a.RIGHT)n=s?v:"next";else if(r==a.UP||r==a.LEFT)n=s?"next":v;else if(r==a.ENTER||r==a.SPACEBAR)i._click(o),e.preventDefault();else{if(r==a.HOME)return i._click(i._endItem("first")),e.preventDefault(),t;if(r==a.END)return i._click(i._endItem("last")),e.preventDefault(),t}n&&(i._click(i._item(o,n)),e.preventDefault())}},_dataSource:function(){var t=this;t.dataSource&&t._refreshHandler?t.dataSource.unbind("change",t._refreshHandler):t._refreshHandler=e.proxy(t.refresh,t),t.dataSource=r.data.DataSource.create(t.options.dataSource).bind("change",t._refreshHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),e.fetch()},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{}},close:{effects:{}}})},refresh:function(e){var t,n,i,o,a=this,s=a.options,l=r.getter(s.dataTextField),c=r.getter(s.dataContentField),d=r.getter(s.dataContentUrlField),u=r.getter(s.dataImageUrlField),h=r.getter(s.dataUrlField),p=r.getter(s.dataSpriteCssClass),f=[],g=a.dataSource.view();for(e=e||{},i=e.action,i&&(g=e.items),t=0,o=g.length;o>t;t++)n={text:l(g[t])},s.dataContentField&&(n.content=c(g[t])),s.dataContentUrlField&&(n.contentUrl=d(g[t])),s.dataUrlField&&(n.url=h(g[t])),s.dataImageUrlField&&(n.imageUrl=u(g[t])),s.dataSpriteCssClass&&(n.spriteCssClass=p(g[t])),f[t]=n;if("add"==e.action)e.index<a.tabGroup.children().length?a.insertBefore(f,a.tabGroup.children().eq(e.index)):a.append(f);else if("remove"==e.action)for(t=0;g.length>t;t++)a.remove(e.index);else"itemchange"==e.action?(t=a.dataSource.view().indexOf(g[0]),e.field===s.dataTextField&&a.tabGroup.children().eq(t).find(".k-link").text(g[0].get(e.field))):(a.trigger("dataBinding"),a.remove("li"),a.append(f),a.trigger("dataBound"))},value:function(n){var i=this;return n===t?i.select().text():(n!=i.value()&&i.tabGroup.children().each(function(){e.trim(e(this).text())==n&&i.select(this)}),t)},items:function(){return this.tabGroup[0].children},setOptions:function(e){var t=this,n=t.options.animation;t._animations(e),e.animation=d(!0,n,e.animation),e.navigatable?t.wrapper.on("keydown"+f,t._keyDownProxy):t.wrapper.off("keydown"+f,t._keyDownProxy),h.fn.setOptions.call(t,e)},events:[T,D,_,k,I,"change","dataBinding","dataBound"],options:{name:"TabStrip",dataTextField:"",dataContentField:"",dataImageUrlField:"",dataUrlField:"",dataSpriteCssClass:"",dataContentUrlField:"",animation:{open:{effects:"expand:vertical fadeIn",duration:200},close:{duration:200}},collapsible:!1,navigatable:!0,contentUrls:!1},destroy:function(){var e=this;h.fn.destroy.call(e),e._refreshHandler&&e.dataSource.unbind("change",e._refreshHandler),e.wrapper.off(f),e.wrapper.children(".k-tabstrip-items").off(f),e.scrollWrap.children(".k-tabstrip").unwrap(),r.destroy(e.wrapper)},select:function(t){var n=this;return 0===arguments.length?n.tabGroup.children("li."+R):(isNaN(t)||(t=n.tabGroup.children().get(t)),t=n.tabGroup.find(t),e(t).each(function(t,i){i=e(i),i.hasClass(R)||n.trigger(T,{item:i[0],contentElement:n.contentHolder(i.index())[0]})||n.activateTab(i)}),n)},enable:function(e,t){return this._toggleDisabled(e,t!==!1),this},disable:function(e){return this._toggleDisabled(e,!1),this},reload:function(t){t=this.tabGroup.find(t);var n=this;return t.each(function(){var t=e(this),i=t.find("."+y).data(E),r=n.contentHolder(t.index());i&&n.ajaxRequest(t,r,null,i)}),n},append:function(e){var t=this,n=t._create(e);return l(n.tabs,function(e){t.tabGroup.append(this),t.wrapper.append(n.contents[e])}),i(t.tabGroup),t._updateContentElements(),t},insertBefore:function(t,n){n=this.tabGroup.find(n);var r=this,o=r._create(t),a=e(r.contentElement(n.index()));return l(o.tabs,function(e){n.before(this),a.before(o.contents[e])}),i(r.tabGroup),r._updateContentElements(),r},insertAfter:function(t,n){n=this.tabGroup.find(n);var r=this,o=r._create(t),a=e(r.contentElement(n.index()));return l(o.tabs,function(e){n.after(this),a.after(o.contents[e])}),i(r.tabGroup),r._updateContentElements(),r},remove:function(t){var n,i=this,o=typeof t;return"string"===o?t=i.tabGroup.find(t):"number"===o&&(t=i.tabGroup.children().eq(t)),n=t.map(function(){var t=i.contentElement(e(this).index());return r.destroy(t),t}),t.remove(),n.remove(),i._updateContentElements(),i},_create:function(i){var r,o,a,l=e.isPlainObject(i),c=this;return l||e.isArray(i)?(i=e.isArray(i)?i:[i],r=s(i,function(t,n){return e(W.renderItem({group:c.tabGroup,item:d(t,{index:n})}))}),o=s(i,function(n,i){return"string"==typeof n.content||n.contentUrl?e(W.renderContent({item:d(n,{index:i})})):t})):(r="string"==typeof i&&"<"!=i[0]?c.element.find(i):e(i),o=e(),r.each(function(){if(a=e("<div class='"+A+"'/>"),/k-tabstrip-items/.test(this.parentNode.className)){var t=parseInt(this.getAttribute("aria-controls").replace(/^.*-/,""),10)-1;a=e(c.contentElement(t))}o=o.add(a)}),n(r)),{tabs:r,contents:o}},_toggleDisabled:function(t,n){t=this.tabGroup.find(t),t.each(function(){e(this).toggleClass(F,n).toggleClass(z,!n)})},_updateClasses:function(){var r,o,a,s=this;s.wrapper.addClass("k-widget k-header k-tabstrip"),s.tabGroup=s.wrapper.children("ul").addClass("k-tabstrip-items k-reset"),s.tabGroup[0]||(s.tabGroup=e("<ul class='k-tabstrip-items k-reset'/>").appendTo(s.wrapper)),r=s.tabGroup.find("li").addClass("k-item"),r.length&&(o=r.filter("."+R).index(),a=o>=0?o:t,s.tabGroup.contents().filter(function(){return 3==this.nodeType&&!c(this.nodeValue)}).remove()),o>=0&&r.eq(o).addClass(O),s.contentElements=s.wrapper.children("div"),s.contentElements.addClass(A).eq(a).addClass(R).css({display:"block"}),r.length&&(n(r),i(s.tabGroup),s._updateContentElements())},_updateContentElements:function(){var t=this,n=t.options.contentUrls||[],i=t.tabGroup.find(".k-item"),o=(t.element.attr("id")||r.guid())+"-",a=t.wrapper.children("div");a.length&&i.length>a.length?(a.each(function(e){var t=parseInt(this.id.replace(o,""),10),n=i.filter("[aria-controls="+o+t+"]"),r=o+(e+1);n.data("aria",r),this.setAttribute("id",r)}),i.each(function(){var t=e(this);this.setAttribute("aria-controls",t.data("aria")),t.removeData("aria")})):i.each(function(i){var r=a.eq(i),s=o+(i+1);this.setAttribute("aria-controls",s),!r.length&&n[i]?e("<div class='"+A+"'/>").appendTo(t.wrapper).attr("id",s):(r.attr("id",s),e(this).children(".k-loading")[0]||n[i]||e("<span class='k-loading k-complete'/>").prependTo(this)),r.attr("role","tabpanel"),r.filter(":not(."+R+")").attr("aria-hidden",!0).attr("aria-expanded",!1),r.filter("."+R).attr("aria-expanded",!0)}),t.contentElements=t.contentAnimators=t.wrapper.children("div"),t.tabsHeight=t.tabGroup.outerHeight()+parseInt(t.wrapper.css("border-top-width"),10)+parseInt(t.wrapper.css("border-bottom-width"),10),r.kineticScrollNeeded&&r.mobile.ui.Scroller&&(r.touchScroller(t.contentElements),t.contentElements=t.contentElements.children(".km-scroll-container"))},_wrapper:function(){var e=this;e.wrapper=e.element.is("ul")?e.element.wrapAll("<div />").parent():e.element,e.scrollWrap=e.wrapper.parent(".k-tabstrip-wrapper"),e.scrollWrap[0]||(e.scrollWrap=e.wrapper.wrapAll("<div class='k-tabstrip-wrapper' />").parent())},_sizeScrollWrap:function(e){this.scrollWrap.css("height",Math.floor(e.outerHeight(!0))+this.tabsHeight).css("height")},_toggleHover:function(t){e(t.currentTarget).toggleClass(L,t.type==M)},_click:function(e){var t,n,i=this,r=e.find("."+y),o=r.attr(m),a=i.options.collapsible,s=i.contentHolder(e.index());if(e.closest(".k-widget")[0]==i.wrapper[0]){if(e.is("."+z+(a?"":",."+R)))return!0;if(n=r.data(E)||o&&("#"==o.charAt(o.length-1)||-1!=o.indexOf("#"+i.element[0].id+"-")),t=!o||n,i.tabGroup.children("[data-animating]").length)return t;if(i.trigger(T,{item:e[0],contentElement:s[0]}))return!0;if(t!==!1)return a&&e.is("."+R)?(i.deactivateTab(e),!0):(i.activateTab(e)&&(t=!0),t)}},deactivateTab:function(e){var t=this,n=t.options.animation,i=n.open,o=d({},n.close),a=o&&"effects"in o;e=t.tabGroup.find(e),o=d(a?o:d({reverse:!0},i),{hide:!0}),r.size(i.effects)?(e.kendoAddClass(F,{duration:i.duration}),e.kendoRemoveClass(R,{duration:i.duration})):(e.addClass(F),e.removeClass(R)),e.removeAttr("aria-selected"),t.contentAnimators.filter("."+R).kendoStop(!0,!0).kendoAnimate(o).removeClass(R).attr("aria-hidden",!0)},activateTab:function(e){var t,n,i,o,a,s,l,c,u,h,p,f,g,m,v;if(!this.tabGroup.children("[data-animating]").length)return e=this.tabGroup.find(e),t=this,n=t.options.animation,i=n.open,o=d({},n.close),a=o&&"effects"in o,s=e.parent().children(),l=s.filter("."+R),c=s.index(e),o=d(a?o:d({reverse:!0},i),{hide:!0}),r.size(i.effects)?(l.kendoRemoveClass(R,{duration:o.duration}),e.kendoRemoveClass(L,{duration:o.duration})):(l.removeClass(R),e.removeClass(L)),u=t.contentAnimators,t.inRequest&&(t.xhr.abort(),t.inRequest=!1),0===u.length?(l.removeClass(O),e.addClass(O).css("z-index"),e.addClass(R),t._current(e),t.trigger("change"),!1):(h=u.filter("."+R),p=t.contentHolder(c),f=p.closest(".k-content"),t.tabsHeight=t.tabGroup.outerHeight()+parseInt(t.wrapper.css("border-top-width"),10)+parseInt(t.wrapper.css("border-bottom-width"),10),t._sizeScrollWrap(h),0===p.length?(h.removeClass(R).attr("aria-hidden",!0).kendoStop(!0,!0).kendoAnimate(o),!1):(e.attr("data-animating",!0),g=(e.children("."+y).data(E)||!1)&&p.is(x),m=function(){l.removeClass(O),e.addClass(O).css("z-index"),r.size(i.effects)?(l.kendoAddClass(F,{duration:i.duration}),e.kendoAddClass(R,{duration:i.duration})):(l.addClass(F),e.addClass(R)),l.removeAttr("aria-selected"),e.attr("aria-selected",!0),t._current(e),t._sizeScrollWrap(f),f.addClass(R).removeAttr("aria-hidden").kendoStop(!0,!0).attr("aria-expanded",!0).kendoAnimate(d({init:function(){t.trigger(_,{item:e[0],contentElement:p[0]}),r.resize(p)}},i,{complete:function(){e.removeAttr("data-animating"),t.trigger(D,{item:e[0],contentElement:p[0]}),r.resize(p),t.scrollWrap.css("height","").css("height")}}))},v=function(){g?(e.removeAttr("data-animating"),t.ajaxRequest(e,p,function(){e.attr("data-animating",!0),m(),t.trigger("change")})):(m(),t.trigger("change"))},h.removeClass(R),h.attr("aria-hidden",!0),h.attr("aria-expanded",!1),h.length?h.kendoStop(!0,!0).kendoAnimate(d({complete:v},o)):v(),!0))},contentElement:function(e){var n,i,o,a;if(isNaN(e-0))return t;if(n=this.contentElements&&this.contentElements[0]&&!r.kineticScrollNeeded?this.contentElements:this.contentAnimators,e=n&&0>e?n.length+e:e,i=RegExp("-"+(e+1)+"$"),n)for(o=0,a=n.length;a>o;o++)if(i.test(n.eq(o).closest(".k-content")[0].id))return n[o];return t},contentHolder:function(t){var n=e(this.contentElement(t)),i=n.children(".km-scroll-container");return r.support.touch&&i[0]?i:n},ajaxRequest:function(t,n,i,o){var a,s,l,c,d,u,h,p,f;t=this.tabGroup.find(t),a=this,s=e.ajaxSettings.xhr,l=t.find("."+y),c={},d=t.width()/2,u=!1,h=t.find(".k-loading").removeClass("k-complete"),h[0]||(h=e("<span class='k-loading'/>").prependTo(t)),p=2*d-h.width(),f=function(){h.animate({marginLeft:(parseInt(h.css("marginLeft"),10)||0)<d?p:0},500,f)
},r.support.browser.msie&&10>r.support.browser.version&&setTimeout(f,40),o=o||l.data(E)||l.attr(m),a.inRequest=!0,a.xhr=e.ajax({type:"GET",cache:!1,url:o,dataType:"html",data:c,xhr:function(){var t=this,n=s(),i=t.progressUpload?"progressUpload":t.progress?"progress":!1;return n&&e.each([n,n.upload],function(){this.addEventListener&&this.addEventListener("progress",function(e){i&&t[i](e)},!1)}),t.noProgress=!(window.XMLHttpRequest&&"upload"in new XMLHttpRequest),n},progress:function(e){if(e.lengthComputable){var t=parseInt(e.loaded/e.total*100,10)+"%";h.stop(!0).addClass("k-progress").css({width:t,marginLeft:0})}},error:function(e,t){a.trigger("error",{xhr:e,status:t})&&this.complete()},stopProgress:function(){clearInterval(u),h.stop(!0).addClass("k-progress")[0].style.cssText=""},complete:function(e){a.inRequest=!1,this.noProgress?setTimeout(this.stopProgress,500):this.stopProgress(),"abort"==e.statusText&&h.remove()},success:function(e){var s,l,c;h.addClass("k-complete");try{s=this,l=10,s.noProgress&&(h.width(l+"%"),u=setInterval(function(){s.progress({lengthComputable:!0,loaded:Math.min(l,100),total:100}),l+=10},40)),a.angular("cleanup",function(){return{elements:n.get()}}),r.destroy(n),n.html(e)}catch(d){c=window.console,c&&c.error&&c.error(d.name+": "+d.message+" in "+o),this.error(this.xhr,"error")}i&&i.call(a,n),a.angular("compile",function(){return{elements:n.get()}}),a.trigger(I,{item:t[0],contentElement:n[0]})}})}});d(W,{renderItem:function(e){e=d({tabStrip:{},group:{}},e);var t=V.empty,n=e.item;return V.item(d(e,{image:n.imageUrl?V.image:t,sprite:n.spriteCssClass?V.sprite:t,itemWrapper:V.itemWrapper},U))},renderContent:function(e){return V.content(d(e,U))}}),r.ui.plugin(W)}(window.kendo.jQuery),function(e,t){function n(e,t,n){var i,r=e.getTimezoneOffset();e.setTime(e.getTime()+t),n||(i=e.getTimezoneOffset()-r,e.setTime(e.getTime()+i*z))}function i(){var e=new $,t=new $(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),n=new $(e.getFullYear(),e.getMonth(),e.getDate(),12,0,0);return-1*(t.getTimezoneOffset()-n.getTimezoneOffset())}function r(e){return 60*e.getHours()*z+e.getMinutes()*z+1e3*e.getSeconds()+e.getMilliseconds()}function o(e,t,n){var i,o=r(t),a=r(n);return e&&o!=a?(i=r(e),o>i&&(i+=F),o>a&&(a+=F),i>=o&&a>=i):!0}function a(e){var t=e.parseFormats;e.format=f(e.format||d.getCulture(e.culture).calendars.standard.patterns.t),t=j(t)?t:[t],t.splice(0,0,e.format),e.parseFormats=t}function s(e){e.preventDefault()}var l,c,d=window.kendo,u=d.keys,h=d.parseDate,p=d._activeElement,f=d._extractFormat,g=d.support,m=g.browser,v=d.ui,_=v.Widget,y="open",w="close",b="change",k=".kendoTimePicker",x="click"+k,C="k-state-default",S="disabled",T="readonly",D="li",A="<span/>",E="k-state-focused",M="k-state-hover",P="mouseenter"+k+" mouseleave"+k,I="mousedown"+k,z=6e4,F=864e5,R="k-state-selected",B="k-state-disabled",L="aria-selected",O="aria-expanded",H="aria-hidden",N="aria-disabled",V="aria-readonly",U="aria-activedescendant",W="id",j=e.isArray,G=e.extend,q=e.proxy,$=Date,Y=new $;Y=new $(Y.getFullYear(),Y.getMonth(),Y.getDate(),0,0,0),l=function(t){var n=this,i=t.id;n.options=t,n.ul=e('<ul tabindex="-1" role="listbox" aria-hidden="true" unselectable="on" class="k-list k-reset"/>').css({overflow:g.kineticScrollNeeded?"":"auto"}).on(x,D,q(n._click,n)).on("mouseenter"+k,D,function(){e(this).addClass(M)}).on("mouseleave"+k,D,function(){e(this).removeClass(M)}),n.list=e("<div class='k-list-container'/>").append(n.ul).on(I,s),i&&(n._timeViewID=i+"_timeview",n._optionID=i+"_option_selected",n.ul.attr(W,n._timeViewID)),n._popup(),n._heightHandler=q(n._height,n),n.template=d.template('<li tabindex="-1" role="option" class="k-item" unselectable="on">#=data#</li>',{useWithBlock:!1})},l.prototype={current:function(n){var i=this,r=i.options.active;return n===t?i._current:(i._current&&i._current.removeClass(R).removeAttr(L).removeAttr(W),n&&(n=e(n).addClass(R).attr(W,i._optionID).attr(L,!0),i.scroll(n[0])),i._current=n,r&&r(n),t)},close:function(){this.popup.close()},destroy:function(){var e=this;e.ul.off(k),e.list.off(k),e._touchScroller&&e._touchScroller.destroy(),e.popup.destroy()},open:function(){var e=this;e.ul[0].firstChild||e.bind(),e.popup.open(),e._current&&e.scroll(e._current[0])},dataBind:function(e){for(var t,n=this,i=n.options,r=i.format,a=d.toString,s=n.template,l=e.length,c=0,u="";l>c;c++)t=e[c],o(t,i.min,i.max)&&(u+=s(a(t,r,i.culture)));n._html(u)},refresh:function(){var e,t,o,a=this,s=a.options,l=s.format,c=i(),u=0>c,h=s.min,p=s.max,f=r(h),g=r(p),m=s.interval*z,v=d.toString,_=a.template,y=new $(+h),w=y.getDate(),b=0,k="";for(o=u?(F+c*z)/m:F/m,f!=g&&(f>g&&(g+=F),o=(g-f)/m+1),t=parseInt(o,10);o>b;b++)b&&n(y,m,u),g&&t==b&&(e=r(y),w<y.getDate()&&(e+=F),e>g&&(y=new $(+p))),k+=_(v(y,l,s.culture));a._html(k)},bind:function(){var e=this,t=e.options.dates;t&&t[0]?e.dataBind(t):e.refresh()},_html:function(e){var t=this;t.ul[0].innerHTML=e,t.popup.unbind(y,t._heightHandler),t.popup.one(y,t._heightHandler),t.current(null),t.select(t._value)},scroll:function(e){if(e){var t,n=this.ul[0],i=e.offsetTop,r=e.offsetHeight,o=n.scrollTop,a=n.clientHeight,s=i+r,l=this._touchScroller;l?(t=this.list.height(),i>t&&(i=i-t+r),l.scrollTo(0,-i)):n.scrollTop=o>i?i:s>o+a?s-a:o}},select:function(t){var n=this,i=n.options,r=n._current;t instanceof Date&&(t=d.toString(t,i.format,i.culture)),"string"==typeof t&&(r&&r.text()===t?t=r:(t=e.grep(n.ul[0].childNodes,function(e){return(e.textContent||e.innerText)==t}),t=t[0]?t:null)),n.current(t)},setOptions:function(e){var t=this.options;e.min=h(e.min),e.max=h(e.max),this.options=G(t,e,{active:t.active,change:t.change,close:t.close,open:t.open}),this.bind()},toggle:function(){var e=this;e.popup.visible()?e.close():e.open()},value:function(e){var t=this;t._value=e,t.ul[0].firstChild&&t.select(e)},_click:function(t){var n=this,i=e(t.currentTarget);t.isDefaultPrevented()||(n.select(i),n.options.change(i.text(),!0),n.close())},_height:function(){var e=this,t=e.list,n=t.parent(".k-animation-container"),i=e.options.height;e.ul[0].children.length&&t.add(n).show().height(e.ul[0].scrollHeight>i?i:"auto").hide()},_parse:function(e){var t=this,n=t.options,i=t._value||Y;return e instanceof $?e:(e=h(e,n.parseFormats,n.culture),e&&(e=new $(i.getFullYear(),i.getMonth(),i.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())),e)},_adjustListWidth:function(){var e,t,n=this.list,i=n[0].style.width,r=this.options.anchor;(n.data("width")||!i)&&(e=window.getComputedStyle?window.getComputedStyle(r[0],null):0,t=e?parseFloat(e.width):r.outerWidth(),e&&(m.mozilla||m.msie)&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),i=t-(n.outerWidth()-n.width()),n.css({fontFamily:r.css("font-family"),width:i}).data("width",i))},_popup:function(){var e=this,t=e.list,n=e.options,i=n.anchor;e.popup=new v.Popup(t,G(n.popup,{anchor:i,open:n.open,close:n.close,animation:n.animation,isRtl:g.isRtl(n.anchor)})),e._touchScroller=d.touchScroller(e.popup.element)},move:function(e){var n=this,i=e.keyCode,r=n.ul[0],o=n._current,a=i===u.DOWN;if(i===u.UP||a){if(e.altKey)return n.toggle(a),t;o=a?o?o[0].nextSibling:r.firstChild:o?o[0].previousSibling:r.lastChild,o&&n.select(o),n.options.change(n._current.text()),e.preventDefault()}else(i===u.ENTER||i===u.TAB||i===u.ESC)&&(e.preventDefault(),o&&n.options.change(o.text(),!0),n.close())}},l.getMilliseconds=r,d.TimeView=l,c=_.extend({init:function(e,t){var n,i,r,o=this;_.fn.init.call(o,e,t),e=o.element,t=o.options,t.min=h(e.attr("min"))||h(t.min),t.max=h(e.attr("max"))||h(t.max),a(t),o._wrapper(),o.timeView=i=new l(G({},t,{id:e.attr(W),anchor:o.wrapper,format:t.format,change:function(t,n){n?o._change(t):e.val(t)},open:function(t){o.timeView._adjustListWidth(),o.trigger(y)?t.preventDefault():(e.attr(O,!0),n.attr(H,!1))},close:function(t){o.trigger(w)?t.preventDefault():(e.attr(O,!1),n.attr(H,!0))},active:function(t){e.removeAttr(U),t&&e.attr(U,i._optionID)}})),n=i.ul,o._icon(),o._reset();try{e[0].setAttribute("type","text")}catch(s){e[0].type="text"}e.addClass("k-input").attr({role:"combobox","aria-expanded":!1,"aria-owns":i._timeViewID}),r=e.is("[disabled]"),r?o.enable(!1):o.readonly(e.is("[readonly]")),o._old=o._update(t.value||o.element.val()),o._oldText=e.val(),d.notify(o)},options:{name:"TimePicker",min:Y,max:Y,format:"",dates:[],parseFormats:[],value:null,interval:30,height:200,animation:{}},events:[y,w,b],setOptions:function(e){var t=this,n=t._value;_.fn.setOptions.call(t,e),e=t.options,a(e),t.timeView.setOptions(e),n&&t.element.val(d.toString(n,e.format,e.culture))},dataBind:function(e){j(e)&&this.timeView.dataBind(e)},_editable:function(e){var t=this,n=e.disable,i=e.readonly,r=t._arrow.off(k),o=t.element.off(k),a=t._inputWrapper.off(k);i||n?(a.addClass(n?B:C).removeClass(n?C:B),o.attr(S,n).attr(T,i).attr(N,n).attr(V,i)):(a.addClass(C).removeClass(B).on(P,t._toggleHover),o.removeAttr(S).removeAttr(T).attr(N,!1).attr(V,!1).on("keydown"+k,q(t._keydown,t)).on("focusout"+k,q(t._blur,t)).on("focus"+k,function(){t._inputWrapper.addClass(E)}),r.on(x,q(t._click,t)).on(I,s))},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},destroy:function(){var e=this;_.fn.destroy.call(e),e.timeView.destroy(),e.element.off(k),e._arrow.off(k),e._inputWrapper.off(k),e._form&&e._form.off("reset",e._resetHandler)},close:function(){this.timeView.close()},open:function(){this.timeView.open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},value:function(e){var n=this;return e===t?n._value:(n._old=n._update(e),null===n._old&&n.element.val(""),n._oldText=n.element.val(),t)},_blur:function(){var e=this,t=e.element.val();e.close(),t!==e._oldText&&e._change(t),e._inputWrapper.removeClass(E)},_click:function(){var e=this,t=e.element;e.timeView.toggle(),g.touch||t[0]===p()||t.focus()},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t.element.trigger(b),t.trigger(b))},_icon:function(){var t,n=this,i=n.element;t=i.next("span.k-select"),t[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(i)),n._arrow=t.attr({role:"button","aria-controls":n.timeView._timeViewID})},_keydown:function(e){var t=this,n=e.keyCode,i=t.timeView,r=t.element.val();i.popup.visible()||e.altKey?i.move(e):n===u.ENTER&&r!==t._oldText&&t._change(r)},_option:function(e,n){var i=this,r=i.options;return n===t?r[e]:(n=i.timeView._parse(n),n&&(n=new $(+n),r[e]=n,i.timeView.options[e]=n,i.timeView.bind()),t)},_toggleHover:function(t){e(t.currentTarget).toggleClass(M,"mouseenter"===t.type)},_update:function(e){var t=this,n=t.options,i=t.timeView,r=i._parse(e);return o(r,n.min,n.max)||(r=null),t._value=r,t.element.val(r?d.toString(r,n.format,n.culture):e),i.value(r),r},_wrapper:function(){var t,n=this,i=n.element;t=i.parents(".k-timepicker"),t[0]||(t=i.wrap(A).parent().addClass("k-picker-wrap k-state-default"),t=t.wrap(A).parent()),t[0].style.cssText=i[0].style.cssText,n.wrapper=t.addClass("k-widget k-timepicker k-header").addClass(i[0].className),i.css({width:"100%",height:i[0].style.height}),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){t.value(n[0].defaultValue)},t._form=r.on("reset",t._resetHandler))}}),v.plugin(c)}(window.kendo.jQuery),function(e,t){function n(n){var i=e(n.useButtonTag?"<button></button>":"<a></a>");return i.data({type:"button"}),i.attr($,n.uid),n.attributes&&i.attr(n.attributes),n.togglable&&(i.addClass(m),n.selected&&i.addClass(k)),n.enable===!1&&i.addClass(x),n.url===t||n.useButtonTag||(i.attr("href",n.url),n.mobile&&i.attr(c.attr("role"),"button")),n.group&&i.attr(c.attr("group"),n.group),!n.togglable&&n.click&&h(n.click)&&i.data("click",n.click),n.togglable&&n.toggle&&h(n.toggle)&&i.data("toggle",n.toggle),i}function i(e){var t,n=Y.button.base(e);return n.addClass(f),e.primary&&n.addClass(T),e.align&&n.addClass("k-align-"+e.align),e.id&&n.attr("id",e.id),"overflow"!=e.showText&&e.text&&n.html(e.mobile?'<span class="km-text">'+e.text+"</span>":e.text),t="overflow"!=e.showIcon&&(e.icon||e.spriteCssClass||e.imageUrl),t&&o(e,n),n}function r(e){var t,n=Y.button.base(e);return n.addClass(g+" "+f),e.primary&&n.addClass(T),e.id&&n.attr("id",e.id+"_overflow"),"toolbar"!=e.showText&&e.text&&n.html(e.mobile?'<span class="km-text">'+e.text+"</span>":e.text),t="toolbar"!=e.showIcon&&(e.icon||e.spriteCssClass||e.imageUrl),t&&o(e,n),n}function o(t,n){var i,r,o,a=t.icon,s=t.spriteCssClass,l=t.imageUrl;(s||l||a)&&(i=!0,n.contents().not("span.k-sprite,span."+D+",img.k-image").each(function(t,n){(1==n.nodeType||3==n.nodeType&&e.trim(n.nodeValue).length>0)&&(i=!1)}),n.addClass(i?E:M)),a?(r=n.children("span."+D).first(),r[0]||(r=e('<span class="'+D+'"></span>').prependTo(n)),r.addClass(A+a)):s?(r=n.children("span.k-sprite").first(),r[0]||(r=e('<span class="k-sprite"></span>').prependTo(n)),r.addClass(s)):l&&(o=n.children("img.k-image").first(),o[0]||(o=e('<img alt="icon" class="k-image" />').prependTo(n)),o.attr("src",l))}function a(){var e,t=this.options.anchor,n=t.outerWidth();c.wrap(this.element).addClass("k-split-wrapper"),e="border-box"!==this.element.css("box-sizing")?n-(this.element.outerWidth()-this.element.width()):n,this.element.css({fontFamily:t.css("font-family"),"min-width":e})}function s(e){e.target.is(".k-toggle-button")||e.target.toggleClass(k,"press"==e.type)}function l(t){return t=e(t),t.hasClass("km-actionsheet")?t.closest(".km-popup-wrapper"):t.addClass("km-widget km-actionsheet").wrap('<div class="km-actionsheet-wrapper km-actionsheet-tablet km-widget km-popup"></div>').parent().wrap('<div class="km-popup-wrapper k-popup"></div>').parent()}var c=window.kendo,d=c.ui.Widget,u=e.proxy,h=c.isFunction,p="k-toolbar",f="k-button",g="k-overflow-button",m="k-toggle-button",v="k-button-group",_="k-split-button",y="k-separator",w="k-popup",b="k-toolbar-resizable",k="k-state-active",x="k-state-disabled",C="k-group-start",S="k-group-end",T="k-primary",D="k-icon",A="k-i-",E="k-button-icon",M="k-button-icontext",P="k-list-container k-split-container",I="k-split-button-arrow",z="k-overflow-anchor",F="k-overflow-container",R="k-toolbar-first-visible",B="k-toolbar-last-visible",L="click",O="toggle",H="open",N="close",V="overflowOpen",U="overflowClose",W="never",j="auto",G="always",q="k-overflow-hidden",$=c.attr("uid"),Y={button:{base:n,toolbar:i,overflow:r},buttonGroup:{base:function(t,n,i){var r,o,a=t.buttons;if(a){for(t.attributes&&i.attr(t.attributes),i.data({type:"buttonGroup"}),i.attr($,t.uid),o=0;a.length>o;o++)a[o].uid||(a[o].uid=c.guid()),r=n(e.extend({mobile:t.mobile},a[o])),r.appendTo(i);i.children().first().addClass(C),i.children().last().addClass(S)}},toolbar:function(t){var n=e("<div></div>");return Y.buttonGroup.base(t,Y.button.toolbar,n),n.addClass(v),t.align&&n.addClass("k-align-"+t.align),t.id&&n.attr("id",t.id),n},overflow:function(t){var n=e("<li></li>");return Y.buttonGroup.base(t,Y.button.overflow,n),n.addClass((t.mobile?"":v)+" k-overflow-group"),t.id&&n.attr("id",t.id+"_overflow"),n}},splitButton:{toolbar:function(t){var n,i,r,o=e('<div class="'+_+'"></div>'),s=Y.button.toolbar(t),c=e('<a class="'+f+" "+I+'"><span class="'+(t.mobile?"km-icon km-arrowdown":"k-icon k-i-arrow-s")+'"></span></a>'),d=e('<ul class="'+P+'"></ul>'),u=t.menuButtons;for(s.appendTo(o),c.appendTo(o),d.appendTo(o),r=0;u.length>r;r++)i=Y.button.toolbar(e.extend({mobile:t.mobile,click:t.click},u[r])),i.wrap("<li></li>").parent().appendTo(d);return t.align&&o.addClass("k-align-"+t.align),t.id||(t.id=t.uid),o.attr("id",t.id+"_wrapper"),d.attr("id",t.id+"_optionlist").attr($,t.rootUid),t.mobile&&(d=l(d)),n=d.kendoPopup({appendTo:t.mobile?e(t.mobile).children(".km-pane"):null,anchor:o,copyAnchorStyles:!1,animation:t.animation,open:a}).data("kendoPopup"),o.data({type:"splitButton",kendoPopup:n}),o.attr($,t.uid),o},overflow:function(t){var n,i,r=e('<li class="'+_+'"></li>'),o=Y.button.overflow(t),a=t.menuButtons;for(o.appendTo(r),i=0;a.length>i;i++)n=Y.button.overflow(e.extend({mobile:t.mobile},a[i])),n.appendTo(r);return t.id&&r.attr("id",t.id+"_overflow"),r.data({type:"splitButton"}),r.attr($,t.uid),r}},separator:{base:function(t,n){var i=e(n?"<li>&nbsp;</li>":"<div>&nbsp;</div>");return i.data({type:"separator"}),i.attr($,t.uid),t.attributes&&i.attr(t.attributes),i.addClass(y),i},toolbar:function(e){return Y.separator.base(e,!1)},overflow:function(e){return Y.separator.base(e,!0)}},overflowAnchor:'<div class="k-overflow-anchor"></div>',overflowContainer:'<ul class="k-overflow-container k-list-container"></ul>'},K=d.extend({init:function(t,n){var i,r=this;if(d.fn.init.call(r,t,n),n=r.options,t=r.wrapper=r.element,t.addClass(p+" k-widget"),this.uid=c.guid(),t.attr($,this.uid),r.isMobile="boolean"==typeof n.mobile?n.mobile:r.element.closest(".km-root")[0],r.animation=r.isMobile?{open:{effects:"fade"}}:{},r.isMobile&&(t.addClass("km-widget"),D="km-icon",A="km-",f="km-button",v="km-buttongroup km-widget",k="km-state-active",x="km-state-disabled"),n.resizable?(r._renderOverflow(),t.addClass(b),r.overflowUserEvents=new c.UserEvents(r.element,{threshold:5,allowSelection:!0,filter:"."+z,tap:u(r._toggleOverflow,r)}),c.onResize(function(){r.resize()})):r.popup={element:e([])},n.items&&n.items.length)for(i=0;n.items.length>i;i++)r.add(n.items[i]);r.userEvents=new c.UserEvents(document,{threshold:5,allowSelection:!0,filter:"["+$+"="+this.uid+"] ."+f+", ["+$+"="+this.uid+"] ."+g,tap:u(r._buttonClick,r),press:s,release:s}),n.resizable&&this._toggleOverflowAnchor(),c.notify(r)},events:[L,O,H,N,V,U],options:{name:"ToolBar",items:[],resizable:!0,mobile:null},destroy:function(){var t=this;t.element.find("."+_).each(function(t,n){e(n).data("kendoPopup").destroy()}),t.userEvents.destroy(),t.options.resizable&&(t.overflowUserEvents.destroy(),t.popup.destroy()),d.fn.destroy.call(t)},add:function(t){var n,i,r=Y[t.type],o=t.template,a=this,s=a.isMobile?"":"k-item k-state-default",l=t.overflowTemplate;e.extend(t,{uid:c.guid(),animation:a.animation,mobile:a.isMobile,rootUid:a.uid}),o&&!l&&(t.overflow=W),t.overflow!==W&&a.options.resizable&&(l?i=e(h(l)?l(t):l):r&&(i=(r.overflow||e.noop)(t)),i&&i.length&&("LI"!==i.prop("tagName")&&(i.removeAttr($),i=i.wrap("<li></li>").parent(),i.attr($,t.uid)),a._attributes(i,t),i.addClass(s).appendTo(a.popup.container),i.data("overflow")===j&&i.addClass(q),a.angular("compile",function(){return{elements:i.get()}}))),t.overflow!==G&&(o?(n=h(o)?o(t):o,n instanceof jQuery||(n=e(n.replace(/^\s+|\s+$/g,""))),n=n.wrap("<div></div>").parent(),n.attr($,t.uid)):r&&(n=(r.toolbar||e.noop)(t)),n&&n.length&&(a._attributes(n,t),a.options.resizable?(n.appendTo(a.element).css("visibility","hidden"),a._shrink(a.element.innerWidth()),n.css("visibility","visible")):n.appendTo(a.element),a.angular("compile",function(){return{elements:n.get()}})))},remove:function(e){var t,n,i=this.element.find(e);!i.length&&this.options.resizable?(i=this.popup.element.find(e),n=i.parent().attr($)):n=i.attr($),t=i.data("type"),i.parent("."+_).data("type")&&(t="splitButton",i=i.parent()),"splitButton"===t&&i.data("kendoPopup").destroy(),i.add(this.popup.element.find("["+$+"='"+n+"']")).remove()},enable:function(n,i){var r=this.element.find(n).attr($);!r&&this.popup&&(r=this.popup.element.find(n).parent("li").attr($)),t===i&&(i=!0),i?e("["+$+"='"+r+"']").removeClass(x):e("["+$+"='"+r+"']").addClass(x)},getSelectedFromGroup:function(e){return this.element.find("."+m+"[data-group='"+e+"']").filter("."+k)},toggle:function(t,n){var i,r=e(t),o=r.data("uid"),a=r.data("group");r.hasClass(m)&&(a&&this.element.add(this.popup.element).find("."+m+"[data-group='"+a+"']").filter("."+k).removeClass(k),e.contains(this.element[0],r[0])?(i=this.popup.element.find("["+$+"='"+o+"']"),"LI"===i.prop("tagName")&&(i=i.find("."+m+":first"))):(o=o?o:r.parent().data("uid"),i=this.element.find("["+$+"='"+o+"']")),r.add(i).toggleClass(k,n))},_attributes:function(e,t){e.attr(c.attr("overflow"),t.overflow||j)},_renderOverflow:function(){var t=this,n=Y.overflowContainer;t.overflowAnchor=e(Y.overflowAnchor).addClass(f),t.element.append(t.overflowAnchor),t.isMobile?(t.overflowAnchor.append('<span class="km-icon km-more"></span>'),n=l(n)):t.overflowAnchor.append('<span class="k-icon k-i-more"></span>'),t.popup=new c.ui.Popup(n,{origin:"bottom right",position:"top right",anchor:t.overflowAnchor,animation:t.animation,appendTo:t.isMobile?e(t.isMobile).children(".km-pane"):null,copyAnchorStyles:!1,open:function(n){var i=c.wrap(t.popup.element).addClass("k-overflow-wrapper");t.isMobile?t.popup.container.css("max-height",parseFloat(e(".km-content:visible").innerHeight())-15+"px"):i.css("margin-left",(i.outerWidth()-i.width())/2+1),t.trigger(V)&&n.preventDefault()},close:function(e){t.trigger(U)&&e.preventDefault()}}),t.popup.container=t.isMobile?t.popup.element.find("."+F):t.popup.element,t.popup.container.attr($,this.uid)},_toggleOverflowAnchor:function(){this.overflowAnchor.css(this.popup.element.children(":not(."+q+", ."+w+")").length>0?{visibility:"visible",width:""}:{visibility:"hidden",width:"1px"})},_buttonClick:function(n){var i,r,o,a,s,l,c,d,u,p=this;if(n.preventDefault(),r=e(n.target).closest("."+f,p.element),!r.hasClass(z)&&(!r.length&&p.popup&&(r=e(n.target).closest("."+g,p.popup.container)),a=r.hasClass(g)?r.parent("li").hasClass(x):r.hasClass(x),!a)){if(n.target.closest("."+I).length)return p._toggle(n),t;u=r.attr("id")?r.attr("id").replace(/(_overflow$)/,""):t,r.hasClass(m)?(l=r.data("group"),c=h(r.data("toggle"))?r.data("toggle"):null,p.toggle(r),s=r.hasClass(k),d={target:r,group:l,checked:s,id:u},c&&c.call(p,d),p.trigger(O,d)):(c=h(r.data("click"))?r.data("click"):null,d={target:r,id:u},c&&c.call(p,d),p.trigger(L,d)),r.hasClass(g)&&p.popup.close(),o=r.closest(".k-split-container"),o[0]&&(i=o.data("kendoPopup"),(i?i:o.parents(".km-popup-wrapper").data("kendoPopup")).close())}},_toggle:function(t){var n,i=e(t.target).closest("."+_),r=i.data("kendoPopup");t.preventDefault(),i.hasClass(x)||(n=r.element.is(":visible")?this.trigger(N,{target:i}):this.trigger(H,{target:i}),n||r.toggle())},_toggleOverflow:function(){this.popup.toggle()},_resize:function(e){var t=e.width;this.options.resizable&&(this.popup.close(),this._shrink(t),this._stretch(t),this._markVisibles(),this._toggleOverflowAnchor())},_childrenWidth:function(){var t=0;return this.element.children(":visible").each(function(){t+=e(this).outerWidth(!0)}),Math.ceil(t)},_shrink:function(e){var t,n,i;if(e<this._childrenWidth())for(n=this.element.children(":visible:not([data-overflow='never'], ."+z+")"),i=n.length-1;i>=0&&(t=n.eq(i),!(e>this._childrenWidth()));i--)this._hideItem(t)},_stretch:function(e){var t,n,i;if(e>this._childrenWidth())for(n=this.element.children(":hidden"),i=0;n.length>i&&(t=n.eq(i),!(e<this._childrenWidth())&&this._showItem(t,e));i++);},_hideItem:function(e){e.hide(),this.popup&&this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").removeClass(q)},_showItem:function(e,t){return e.length&&t>this._childrenWidth()+e.outerWidth(!0)?(e.show(),this.popup&&this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").addClass(q),!0):!1},_markVisibles:function(){var e=this.popup.container.children(),t=this.element.children(":not(.k-overflow-anchor)"),n=e.filter(":not(.k-overflow-hidden)"),i=t.filter(":visible");e.add(t).removeClass(R+" "+B),n.first().add(i.first()).addClass(R),n.last().add(i.last()).addClass(B)}});c.ui.plugin(K)}(window.kendo.jQuery),function(e,t){function n(e){var t=new Date(2100,0,1);return t.setMinutes(-e),t}function i(e){e.preventDefault()}function r(t){var n,i=o.getCulture(t.culture).calendars.standard.patterns;t.format=c(t.format||i.g),t.timeFormat=n=c(t.timeFormat||i.t),o.DateView.normalize(t),-1===e.inArray(n,t.parseFormats)&&t.parseFormats.splice(1,0,n)}var o=window.kendo,a=o.TimeView,s=o.parseDate,l=o._activeElement,c=o._extractFormat,d=o.calendar,u=d.isInRange,h=d.restrictValue,p=d.isEqualDatePart,f=a.getMilliseconds,g=o.ui,m=g.Widget,v="open",_="close",y="change",w=".kendoDateTimePicker",b="click"+w,k="disabled",x="readonly",C="k-state-default",S="k-state-focused",T="k-state-hover",D="k-state-disabled",A="mouseenter"+w+" mouseleave"+w,E="mousedown"+w,M="month",P="<span/>",I="aria-activedescendant",z="aria-expanded",F="aria-hidden",R="aria-owns",B="aria-disabled",L="aria-readonly",O=Date,H=new O(1900,0,1),N=new O(2099,11,31),V={view:"date"},U={view:"time"},W=e.extend,j=m.extend({init:function(e,t){var n,i=this;m.fn.init.call(i,e,t),e=i.element,t=i.options,t.min=s(e.attr("min"))||s(t.min),t.max=s(e.attr("max"))||s(t.max),r(t),i._wrapper(),i._views(),i._icons(),i._reset(),i._template();try{e[0].setAttribute("type","text")}catch(a){e[0].type="text"}e.addClass("k-input").attr({role:"combobox","aria-expanded":!1}),i._midnight=f(t.min)+f(t.max)===0,n=e.is("[disabled]"),n?i.enable(!1):i.readonly(e.is("[readonly]")),i._old=i._update(t.value||i.element.val()),i._oldText=e.val(),o.notify(i)},options:{name:"DateTimePicker",value:null,format:"",timeFormat:"",culture:"",parseFormats:[],dates:[],min:new O(H),max:new O(N),interval:30,height:200,footer:"",start:M,depth:M,animation:{},month:{},ARIATemplate:'Current focused date is #=kendo.toString(data.current, "d")#'},events:[v,_,y],setOptions:function(e){var t,n,i,a=this,l=a._value;m.fn.setOptions.call(a,e),e=a.options,e.min=t=s(e.min),e.max=n=s(e.max),r(e),i=e.value||a._value||a.dateView._current,t&&!p(t,i)&&(t=new O(H)),n&&!p(n,i)&&(n=new O(N)),a.dateView.setOptions(e),a.timeView.setOptions(W({},e,{format:e.timeFormat,min:t,max:n})),l&&(a.element.val(o.toString(l,e.format,e.culture)),a._updateARIA(l))},_editable:function(t){var n=this,r=n.element.off(w),a=n._dateIcon.off(w),s=n._timeIcon.off(w),c=n._inputWrapper.off(w),d=t.readonly,u=t.disable;d||u?(c.addClass(u?D:C).removeClass(u?C:D),r.attr(k,u).attr(x,d).attr(B,u).attr(L,d)):(c.addClass(C).removeClass(D).on(A,n._toggleHover),r.removeAttr(k).removeAttr(x).attr(B,!1).attr(L,!1).on("keydown"+w,e.proxy(n._keydown,n)).on("focus"+w,function(){n._inputWrapper.addClass(S)}).on("focusout"+w,function(){n._inputWrapper.removeClass(S),r.val()!==n._oldText&&n._change(r.val()),n.close("date"),n.close("time")}),a.on(E,i).on(b,function(){n.toggle("date"),o.support.touch||r[0]===l()||r.focus()}),s.on(E,i).on(b,function(){n.toggle("time"),o.support.touch||r[0]===l()||r.focus()}))},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},destroy:function(){var e=this;m.fn.destroy.call(e),e.dateView.destroy(),e.timeView.destroy(),e.element.off(w),e._dateIcon.off(w),e._timeIcon.off(w),e._inputWrapper.off(w),e._form&&e._form.off("reset",e._resetHandler)},close:function(e){"time"!==e&&(e="date"),this[e+"View"].close()},open:function(e){"time"!==e&&(e="date"),this[e+"View"].open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},toggle:function(e){var t="timeView";"time"!==e?e="date":t="dateView",this[e+"View"].toggle(),this[t].close()},value:function(e){var n=this;return e===t?n._value:(n._old=n._update(e),null===n._old&&n.element.val(""),n._oldText=n.element.val(),t)},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t.trigger(y),t.element.trigger(y))},_option:function(e,i){var r,o,a=this,l=a.options,c=a.timeView,d=c.options,u=a._value||a._old;if(i===t)return l[e];if(i=s(i,l.parseFormats,l.culture)){if(l.min.getTime()===l.max.getTime()&&(d.dates=[]),l[e]=new O(i.getTime()),a.dateView[e](i),a._midnight=f(l.min)+f(l.max)===0,u&&(r=p(l.min,u),o=p(l.max,u)),r||o){if(d[e]=i,r&&!o&&(d.max=n(l.interval)),o){if(a._midnight)return c.dataBind([N]),t;r||(d.min=H)}}else d.max=N,d.min=H;c.bind()}},_toggleHover:function(t){e(t.currentTarget).toggleClass(T,"mouseenter"===t.type)},_update:function(t){var i,r,a,l,c,d=this,f=d.options,g=f.min,m=f.max,v=f.dates,_=d.timeView,y=d._value,w=s(t,f.parseFormats,f.culture),b=null===w&&null===y||w instanceof Date&&y instanceof Date;return+w===+y&&b?(c=o.toString(w,f.format,f.culture),c!==t&&d.element.val(null===w?t:c),w):(null!==w&&p(w,g)?w=h(w,g,m):u(w,g,m)||(w=null),d._value=w,_.value(w),d.dateView.value(w),w&&(a=d._old,r=_.options,v[0]&&(v=e.grep(v,function(e){return p(w,e)}),v[0]&&(_.dataBind(v),l=!0)),l||(p(w,g)&&(r.min=g,r.max=n(f.interval),i=!0),p(w,m)&&(d._midnight?(_.dataBind([N]),l=!0):(r.max=m,i||(r.min=H),i=!0))),!l&&(!a&&i||a&&!p(a,w))&&(i||(r.max=N,r.min=H),_.bind())),d.element.val(w?o.toString(w,f.format,f.culture):t),d._updateARIA(w),w)},_keydown:function(e){var t=this,n=t.dateView,i=t.timeView,r=t.element.val(),a=n.popup.visible();e.altKey&&e.keyCode===o.keys.DOWN?t.toggle(a?"time":"date"):a?(n.move(e),t._updateARIA(n._current)):i.popup.visible()?i.move(e):e.keyCode===o.keys.ENTER&&r!==t._oldText&&t._change(r)},_views:function(){var e,t,n,i,r,l,c=this,d=c.element,h=c.options,p=d.attr("id");c.dateView=e=new o.DateView(W({},h,{id:p,anchor:c.wrapper,change:function(){var t,n=e.calendar.value(),i=+n,r=+h.min,o=+h.max;(i===r||i===o)&&(t=new O(+c._value),t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),u(t,r,o)&&(n=t)),c._change(n),c.close("date")},close:function(e){c.trigger(_,V)?e.preventDefault():(d.attr(z,!1),n.attr(F,!0),t.popup.visible()||d.removeAttr(R))},open:function(t){c.trigger(v,V)?t.preventDefault():(c.element.val()!==c._oldText&&(l=s(d.val(),h.parseFormats,h.culture),c.dateView[l?"current":"value"](l)),n.attr(F,!1),d.attr(z,!0).attr(R,e._dateViewID),c._updateARIA(l))}})),n=e.div,r=h.min.getTime(),c.timeView=t=new a({id:p,value:h.value,anchor:c.wrapper,animation:h.animation,format:h.timeFormat,culture:h.culture,height:h.height,interval:h.interval,min:new O(H),max:new O(N),dates:r===h.max.getTime()?[new Date(r)]:[],parseFormats:h.parseFormats,change:function(n,i){n=t._parse(n),h.min>n?(n=new O(+h.min),t.options.min=n):n>h.max&&(n=new O(+h.max),t.options.max=n),i?(c._timeSelected=!0,c._change(n)):(d.val(o.toString(n,h.format,h.culture)),e.value(n),c._updateARIA(n))},close:function(t){c.trigger(_,U)?t.preventDefault():(i.attr(F,!0),d.attr(z,!1),e.popup.visible()||d.removeAttr(R))},open:function(e){t._adjustListWidth(),c.trigger(v,U)?e.preventDefault():(i.attr(F,!1),d.attr(z,!0).attr(R,t._timeViewID),t.options.active(t.current()))},active:function(e){d.removeAttr(I),e&&d.attr(I,t._optionID)}}),i=t.ul},_icons:function(){var t,n=this,i=n.element;t=i.next("span.k-select"),t[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(i)),t=t.children(),n._dateIcon=t.eq(0).attr({role:"button","aria-controls":n.dateView._dateViewID}),n._timeIcon=t.eq(1).attr({role:"button","aria-controls":n.timeView._timeViewID})},_wrapper:function(){var t,n=this,i=n.element;t=i.parents(".k-datetimepicker"),t[0]||(t=i.wrap(P).parent().addClass("k-picker-wrap k-state-default"),t=t.wrap(P).parent()),t[0].style.cssText=i[0].style.cssText,i.css({width:"100%",height:i[0].style.height}),n.wrapper=t.addClass("k-widget k-datetimepicker k-header").addClass(i[0].className),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){t.value(n[0].defaultValue)},t._form=r.on("reset",t._resetHandler))},_template:function(){this._ariaTemplate=o.template(this.options.ARIATemplate)},_updateARIA:function(e){var t,n=this,i=n.dateView.calendar;n.element.removeAttr(I),i&&(t=i._cell,t.attr("aria-label",n._ariaTemplate({current:e||i.current()})),n.element.attr(I,t.attr("id")))}});g.plugin(j)}(window.kendo.jQuery),function(e,t){function n(e){return v.test(e)}function i(e){return m.test(e)||/^\d+$/.test(e)
}function r(e){return!n(e)&&!i(e)}function o(e,t){var i=parseInt(e,10);return n(e)&&(i=Math.floor(i*t/100)),i}function a(e,n){return function(i,r){var o,a=this.element.find(i).data(E);return 1==arguments.length?a[e]:(a[e]=r,n&&(o=this.element.data("kendo"+this.options.name),o.resize(!0)),t)}}function s(e){var t=this,n=e.orientation;t.owner=e,t._element=e.element,t.orientation=n,p(t,n===S?c:l),t._resizable=new d.ui.Resizable(e.element,{orientation:n,handle:".k-splitbar-draggable-"+n+"[data-marker="+e._marker+"]",hint:f(t._createHint,t),start:f(t._start,t),max:f(t._max,t),min:f(t._min,t),invalidClass:"k-restricted-size-"+n,resizeend:f(t._stop,t)})}var l,c,d=window.kendo,u=d.ui,h=d.keys,p=e.extend,f=e.proxy,g=u.Widget,m=/^\d+(\.\d+)?px$/i,v=/^\d+(\.\d+)?%$/i,_=".kendoSplitter",y="expand",w="collapse",b="contentLoad",k="error",x="resize",C="layoutChange",S="horizontal",T="vertical",D="mouseenter",A="click",E="pane",M="mouseleave",P="k-state-focused",I="k-"+E,z="."+I,F=g.extend({init:function(e,t){var n,i=this;g.fn.init.call(i,e,t),i.wrapper=i.element,n=i.options.orientation.toLowerCase()!=T,i.orientation=n?S:T,i._dimension=n?"width":"height",i._keys={decrease:n?h.LEFT:h.UP,increase:n?h.RIGHT:h.DOWN},i._resizeStep=10,i._marker=d.guid().substring(0,8),i._initPanes(),i.resizing=new s(i),i.element.triggerHandler("init"+_)},events:[y,w,b,k,x,C],_attachEvents:function(){var t=this,n=t.options.orientation;t.element.children(".k-splitbar-draggable-"+n).on("keydown"+_,e.proxy(t._keydown,t)).on("mousedown"+_,function(e){e.currentTarget.focus()}).on("focus"+_,function(t){e(t.currentTarget).addClass(P)}).on("blur"+_,function(n){e(n.currentTarget).removeClass(P),t.resizing&&t.resizing.end()}).on(D+_,function(){e(this).addClass("k-splitbar-"+t.orientation+"-hover")}).on(M+_,function(){e(this).removeClass("k-splitbar-"+t.orientation+"-hover")}).on("mousedown"+_,function(){t._panes().append("<div class='k-splitter-overlay k-overlay' />")}).on("mouseup"+_,function(){t._panes().children(".k-splitter-overlay").remove()}).end().children(".k-splitbar").on("dblclick"+_,f(t._togglePane,t)).children(".k-collapse-next, .k-collapse-prev").on(A+_,t._arrowClick(w)).end().children(".k-expand-next, .k-expand-prev").on(A+_,t._arrowClick(y)).end().end(),e(window).on("resize"+_+t._marker,f(t.resize,t))},_detachEvents:function(){var t=this;t.element.children(".k-splitbar-draggable-"+t.orientation).off(_).end().children(".k-splitbar").off("dblclick"+_).children(".k-collapse-next, .k-collapse-prev, .k-expand-next, .k-expand-prev").off(_),e(window).off("resize"+_+t._marker)},options:{name:"Splitter",orientation:S,panes:[]},destroy:function(){g.fn.destroy.call(this),this._detachEvents(),this.resizing&&this.resizing.destroy(),d.destroy(this.element),this.wrapper=this.element=null},_keydown:function(t){var n,i=this,r=t.keyCode,o=i.resizing,a=e(t.currentTarget),s=i._keys,l=r===s.increase,c=r===s.decrease;l||c?(t.ctrlKey?(n=a[c?"next":"prev"](),o&&o.isResizing()&&o.end(),n[i._dimension]()?i._triggerAction(w,a[c?"prev":"next"]()):i._triggerAction(y,n)):o&&o.move((c?-1:1)*i._resizeStep,a),t.preventDefault()):r===h.ENTER&&o&&(o.end(),t.preventDefault())},_initPanes:function(){var e=this.options.panes||[],t=this;this.element.addClass("k-widget").addClass("k-splitter").children().each(function(n,i){"script"!=i.nodeName.toLowerCase()&&t._initPane(i,e[n])}),this.resize()},_initPane:function(t,n){t=e(t).attr("role","group").addClass(I),t.data(E,n?n:{}).toggleClass("k-scrollable",n?n.scrollable!==!1:!0),this.ajaxRequest(t)},ajaxRequest:function(e,t,n){var i,r=this;e=r.element.find(e),i=e.data(E),t=t||i.contentUrl,t&&(e.append("<span class='k-icon k-loading k-pane-loading' />"),d.isLocalUrl(t)?jQuery.ajax({url:t,data:n||{},type:"GET",dataType:"html",success:function(t){r.angular("cleanup",function(){return{elements:e.get()}}),e.html(t),r.angular("compile",function(){return{elements:e.get()}}),r.trigger(b,{pane:e[0]})},error:function(t,n){r.trigger(k,{pane:e[0],status:n,xhr:t})}}):e.removeClass("k-scrollable").html("<iframe src='"+t+"' frameborder='0' class='k-content-frame'>This page requires frames in order to show content</iframe>"))},_triggerAction:function(e,t){this.trigger(e,{pane:t[0]})||this[e](t[0])},_togglePane:function(t){var n,i=this,r=e(t.target);r.closest(".k-splitter")[0]==i.element[0]&&(n=r.children(".k-icon:not(.k-resize-handle)"),1===n.length&&(n.is(".k-collapse-prev")?i._triggerAction(w,r.prev()):n.is(".k-collapse-next")?i._triggerAction(w,r.next()):n.is(".k-expand-prev")?i._triggerAction(y,r.prev()):n.is(".k-expand-next")&&i._triggerAction(y,r.next())))},_arrowClick:function(t){var n=this;return function(i){var r,o=e(i.target);o.closest(".k-splitter")[0]==n.element[0]&&(r=o.is(".k-"+t+"-prev")?o.parent().prev():o.parent().next(),n._triggerAction(t,r))}},_updateSplitBar:function(e,t,n){var i=function(e,t){return t?"<div class='k-icon "+e+"' />":""},r=this.orientation,o=t.resizable!==!1&&n.resizable!==!1,a=t.collapsible,s=t.collapsed,l=n.collapsible,c=n.collapsed;e.addClass("k-splitbar k-state-default k-splitbar-"+r).attr("role","separator").attr("aria-expanded",!(s||c)).removeClass("k-splitbar-"+r+"-hover").toggleClass("k-splitbar-draggable-"+r,o&&!s&&!c).toggleClass("k-splitbar-static-"+r,!o&&!a&&!l).html(i("k-collapse-prev",a&&!s&&!c)+i("k-expand-prev",a&&s&&!c)+i("k-resize-handle",o)+i("k-collapse-next",l&&!c&&!s)+i("k-expand-next",l&&c&&!s)),o||a||l||e.removeAttr("tabindex")},_updateSplitBars:function(){var t=this;this.element.children(".k-splitbar").each(function(){var n=e(this),i=n.prevAll(z).first().data(E),r=n.nextAll(z).first().data(E);r&&t._updateSplitBar(n,i,r)})},_removeSplitBars:function(){this.element.children(".k-splitbar").remove()},_panes:function(){return this.element.children(z)},_resize:function(){var n,i,a,s,l,c,u,h,p,f,g=this,m=g.element,v=m.children(z),_=g.orientation==S,y=m.children(".k-splitbar"),w=y.length,b=_?"width":"height",k=m[b]();0===w?(w=v.length-1,v.slice(0,w).after("<div tabindex='0' class='k-splitbar' data-marker='"+g._marker+"' />"),g._updateSplitBars(),y=m.children(".k-splitbar")):g._updateSplitBars(),y.each(function(){k-=this[_?"offsetWidth":"offsetHeight"]}),n=0,i=0,a=e(),v.css({position:"absolute",top:0})[b](function(){var s,l=e(this),c=l.data(E)||{};if(l.removeClass("k-state-collapsed"),c.collapsed)s=c.collapsedSize?o(c.collapsedSize,k):0,l.css("overflow","hidden").addClass("k-state-collapsed");else{if(r(c.size))return a=a.add(this),t;s=o(c.size,k)}return i++,n+=s,s}),k-=n,s=a.length,l=Math.floor(k/s),a.slice(0,s-1).css(b,l).end().eq(s-1).css(b,k-(s-1)*l),c=0,u=_?"height":"width",h=_?"left":"top",p=_?"offsetWidth":"offsetHeight",0===s&&(f=v.filter(function(){return!(e(this).data(E)||{}).collapsed}).last(),f[b](k+f[0][p])),m.children().css(u,m[u]()).each(function(e,t){"script"!=t.tagName.toLowerCase()&&(t.style[h]=Math.floor(c)+"px",c+=t[p])}),g._detachEvents(),g._attachEvents(),d.resize(v),g.trigger(C)},toggle:function(e,n){var i,r=this;e=r.element.find(e),i=e.data(E),(n||i.collapsible)&&(1==arguments.length&&(n=i.collapsed===t?!1:i.collapsed),i.collapsed=!n,i.collapsed?e.css("overflow","hidden"):e.css("overflow",""),r.resize(!0))},collapse:function(e){this.toggle(e,!1)},expand:function(e){this.toggle(e,!0)},_addPane:function(e,t,n){var i=this;return n.length&&(i.options.panes.splice(t,0,e),i._initPane(n,e),i._removeSplitBars(),i.resize(!0)),n},append:function(t){t=t||{};var n=this,i=e("<div />").appendTo(n.element);return n._addPane(t,n.options.panes.length,i)},insertBefore:function(t,n){n=e(n),t=t||{};var i=this,r=i.wrapper.children(".k-pane").index(n),o=e("<div />").insertBefore(e(n));return i._addPane(t,r,o)},insertAfter:function(t,n){n=e(n),t=t||{};var i=this,r=i.wrapper.children(".k-pane").index(n),o=e("<div />").insertAfter(e(n));return i._addPane(t,r+1,o)},remove:function(t){t=e(t);var n=this;return t.length&&(d.destroy(t),t.each(function(t,i){n.options.panes.splice(n.wrapper.children(".k-pane").index(i),1),e(i).remove()}),n._removeSplitBars(),n.options.panes.length&&n.resize(!0)),n},size:a("size",!0),min:a("min"),max:a("max")});u.plugin(F),l={sizingProperty:"height",sizingDomProperty:"offsetHeight",alternateSizingProperty:"width",positioningProperty:"top",mousePositioningProperty:"pageY"},c={sizingProperty:"width",sizingDomProperty:"offsetWidth",alternateSizingProperty:"height",positioningProperty:"left",mousePositioningProperty:"pageX"},s.prototype={press:function(e){this._resizable.press(e)},move:function(e,t){this.pressed||(this.press(t),this.pressed=!0),this._resizable.target||this._resizable.press(t),this._resizable.move(e)},end:function(){this._resizable.end(),this.pressed=!1},destroy:function(){this._resizable.destroy(),this._resizable=this._element=this.owner=null},isResizing:function(){return this._resizable.resizing},_createHint:function(t){var n=this;return e("<div class='k-ghost-splitbar k-ghost-splitbar-"+n.orientation+" k-state-default' />").css(n.alternateSizingProperty,t[n.alternateSizingProperty]())},_start:function(t){var n=this,r=e(t.currentTarget),o=r.prev(),a=r.next(),s=o.data(E),l=a.data(E),c=parseInt(o[0].style[n.positioningProperty],10),d=parseInt(a[0].style[n.positioningProperty],10)+a[0][n.sizingDomProperty]-r[0][n.sizingDomProperty],u=parseInt(n._element.css(n.sizingProperty),10),h=function(e){var t=parseInt(e,10);return(i(e)?t:u*t/100)||0},p=h(s.min),f=h(s.max)||d-c,g=h(l.min),m=h(l.max)||d-c;n.previousPane=o,n.nextPane=a,n._maxPosition=Math.min(d-g,c+f),n._minPosition=Math.max(c+p,d-m)},_max:function(){return this._maxPosition},_min:function(){return this._minPosition},_stop:function(t){var n,i,o,a,s,l,c,u,h=this,p=e(t.currentTarget),f=h.owner;return f._panes().children(".k-splitter-overlay").remove(),t.keyCode!==d.keys.ESC&&(n=t.position,i=p.prev(),o=p.next(),a=i.data(E),s=o.data(E),l=n-parseInt(i[0].style[h.positioningProperty],10),c=parseInt(o[0].style[h.positioningProperty],10)+o[0][h.sizingDomProperty]-n-p[0][h.sizingDomProperty],u=h._element.children(z).filter(function(){return r(e(this).data(E).size)}).length,(!r(a.size)||u>1)&&(r(a.size)&&u--,a.size=l+"px"),(!r(s.size)||u>1)&&(s.size=c+"px"),f.resize(!0)),!1}}}(window.kendo.jQuery),function(e){function t(e,t){function n(e,r){var o,a;if(r=r[t])for(o=i[e]=i[e]||[],a=0;r.length>a;a++)o.push(r[a]),n(e+1,r[a])}var i=[];return n(0,e),i}function n(){return M.support.cssBorderSpacing?"":'cellspacing="0"'}function i(t,i){return t.length?"<table "+n()+' class="'+e.trim("k-scheduler-table "+(i||""))+'"><tr>'+t.join("</tr><tr>")+"</tr></table>":""}function r(e,t){return e.length?"<div style='position:relative'>"+i(e,t)+"</div>":""}function o(t,n,r){var o,a=[];if(r>0)for(o=0;t>o;o++)a.push("<th>&nbsp;</th>");return n&&a.push('<th class="k-scheduler-times-all-day">'+n.text+"</th>"),1>r?e():e('<div class="k-scheduler-times">'+i(a)+"</div>")}function a(t,n,o){var a,s,l,c,d,u,h,p,f,g,m=[];for(s=0;t.length>s;s++){for(l=t[s],c=[],d=n/l.length,a=0;l.length>a;a++)u=l[a],c.push('<th colspan="'+(u.colspan||d)+'" class="'+(u.className||"")+'">'+u.text+"</th>");m.push(c.join(""))}if(h=[],o){for(p=t[t.length-1],f=[],g=o.cellContent,a=0;p.length>a;a++)f.push('<td class="'+(p[a].className||"")+'">'+(g?g(a):"&nbsp;")+"</th>");h.push(f.join(""))}return e('<div class="k-scheduler-header k-state-default"><div class="k-scheduler-header-wrap">'+i(m)+r(h,"k-scheduler-header-all-day")+"</div></div>")}function s(t,n){var r,o,a,s,l,c=Array(n).join().split(","),d=[];for(o=0;t.length>o;o++)for(a=t[o],s=n/a.length,r=0;a.length>r;r++)l=a[r].className||"",a[r].allDay&&(l="k-scheduler-times-all-day"),c[s*r]+='<th class="'+l+'" rowspan="'+s+'">'+a[r].text+"</th>";for(r=0;n>r;r++)d.push(c[r]);return 1>n?e():e('<div class="k-scheduler-times">'+i(d)+"</div>")}function l(){return e('<div class="k-scheduler-content"><table '+n()+' class="k-scheduler-table"/></div>')}function c(){return D=D?D:M.support.scrollbar()}function d(e,t,n){var i,r,o,a,s;for(i=e.length-1;i>=0;i--)r=u(e[i]),o=r.start,s=r.end,a=t>=o&&s>=t,(a||o>=t&&n>=s||o>=t&&n>=o)&&(t>o&&(t=o),s>n&&(n=s));return h(e,t,n)}function u(e){return{start:e.start,end:e.end}}function h(e,t,n){var i,r,o=[];for(i=0;e.length>i;i++)r=u(e[i]),(t>r.start&&r.end>t||r.start>=t&&n>=r.end)&&o.push(e[i]);return o}function p(e){return g(e)}function f(e){return g(e)}function g(e){var t,n,i,r,o,a,s,l=[];for(t=0;e.length>t;t++){for(n=e[t],i=u(n),r=null,o=0,a=l.length;a>o;o++)if(s=i.start>l[o].end,l[o].start>i.start||s){r=l[o],i.end>r.end&&(r.end=i.end);break}r||(r={start:i.start,end:i.end,events:[]},l.push(r)),r.events.push(n)}return l}function m(e,t,n,i){var r,o,a,s,l=t[0];if(l){for(r=[],o=l.dataSource.view(),a=0;o.length>a;a++)s={text:i({text:M.htmlEncode(M.getter(l.dataTextField)(o[a])),color:M.getter(l.dataColorField)(o[a]),field:l.field,title:l.title,name:l.name,value:M.getter(l.dataValueField)(o[a])}),className:"k-slot-cell"},s[e]=m(e,t.slice(1),n,i),r.push(s);return r}return n}function v(t){return function(n){if(e.isArray(n)||n instanceof M.data.ObservableArray){for(var i=0;n.length>i;i++)if(n[i]==t)return!0;return!1}return n==t}}function _(e){e.className=e.className.replace(E,"")+" k-state-selected"}var y,w,b,k,x,C,S,T,D,A,E,M=window.kendo,P=M.ui,I=P.Widget,z=M.keys,F=".kendoSchedulerView",R=Math,B='<div class="k-marquee k-scheduler-marquee"><div class="k-marquee-color"></div><div class="k-marquee-text"><div class="k-label-top"></div><div class="k-label-bottom"></div></div></div>';M.ui.scheduler={},y=M.Class.extend({init:function(e){this._index=e,this._timeSlotCollections=[],this._daySlotCollections=[]},addTimeSlotCollection:function(e,t){return this._addCollection(e,t,this._timeSlotCollections)},addDaySlotCollection:function(e,t){return this._addCollection(e,t,this._daySlotCollections)},_addCollection:function(e,t,n){var i=new x(e,t,this._index,n.length);return n.push(i),i},timeSlotCollectionCount:function(){return this._timeSlotCollections.length},daySlotCollectionCount:function(){return this._daySlotCollections.length},daySlotByPosition:function(e,t){return this._slotByPosition(e,t,this._daySlotCollections)},timeSlotByPosition:function(e,t){return this._slotByPosition(e,t,this._timeSlotCollections)},_slotByPosition:function(e,t,n){var i,r,o,a;for(i=0;n.length>i;i++)for(r=n[i],o=0;o<r.count();o++)if(a=r.at(o),e>=a.offsetLeft&&a.offsetLeft+a.clientWidth>e&&t>=a.offsetTop&&a.offsetTop+a.clientHeight>=t)return a},refresh:function(){var e;for(e=0;this._daySlotCollections.length>e;e++)this._daySlotCollections[e].refresh();for(e=0;this._timeSlotCollections.length>e;e++)this._timeSlotCollections[e].refresh()},timeSlotRanges:function(e,t){var n,i=this._timeSlotCollections,r=this._startSlot(e,i);return!r.inRange&&e>=r.slot.end&&(r=null),n=r,t>e&&(n=this._endSlot(t,i)),n&&!n.inRange&&n.slot.start>=t&&(n=null),null===r&&null===n?[]:(null===r&&(r={inRange:!0,slot:i[n.slot.collectionIndex].first()}),null===n&&(n={inRange:!0,slot:i[r.slot.collectionIndex].last()}),this._continuousRange(b,i,r,n))},daySlotRanges:function(e,t,n){var i,r=this._daySlotCollections,o=this._startSlot(e,r,n);if(!o.inRange&&e>=o.slot.end&&(o=null),i=o,t>e&&(i=this._endSlot(t,r,n)),i&&!i.inRange&&i.slot.start>=t&&(i=null),null===o&&null===i)return[];if(null===o)do e+=M.date.MS_PER_DAY,o=this._startSlot(e,r,n);while(!o.inRange&&e>=o.slot.end);if(null===i)do t-=M.date.MS_PER_DAY,i=this._endSlot(t,r,n);while(!i.inRange&&i.slot.start>=t);return this._continuousRange(k,r,o,i)},_continuousRange:function(e,t,n,i){var r,o,a,s,l,c,d=n.slot,u=i.slot,h=d.collectionIndex,p=u.collectionIndex,f=[];for(r=h;p>=r;r++)o=t[r],a=o.first(),s=o.last(),l=!1,c=!1,r==h&&(c=!n.inRange),r==p&&(l=!i.inRange),d.start>a.start&&(a=d),s.start>u.start&&(s=u),p>h&&(r==h?l=!0:r==p?c=!0:l=c=!0),f.push(new e({start:a,end:s,collection:o,head:l,tail:c}));return f},slotRanges:function(e,t){var n=e.startTime||M.date.toUtcTime(e.start),i=e.endTime||M.date.toUtcTime(e.end);return void 0===t&&(t=e.isMultiDay()),t?this.daySlotRanges(n,i,e.isAllDay):this.timeSlotRanges(n,i)},ranges:function(e,t,n,i){return"number"!=typeof e&&(e=M.date.toUtcTime(e)),"number"!=typeof t&&(t=M.date.toUtcTime(t)),n?this.daySlotRanges(e,t,i):this.timeSlotRanges(e,t)},_startCollection:function(e,t){var n,i;for(n=0;t.length>n;n++)if(i=t[n],i.startInRange(e))return i;return null},_endCollection:function(e,t,n){var i,r;for(i=0;t.length>i;i++)if(r=t[i],r.endInRange(e,n))return r;return null},_getCollections:function(e){return e?this._daySlotCollections:this._timeSlotCollections},continuousSlot:function(e,t){var n=t?-1:1,i=this._getCollections(e.isDaySlot),r=i[e.collectionIndex+n];return r?r[t?"last":"first"]():void 0},firstSlot:function(){var e=this._getCollections(this.daySlotCollectionCount());return e[0].first()},lastSlot:function(){var e=this._getCollections(this.daySlotCollectionCount());return e[e.length-1].last()},upSlot:function(e,t){var n=this,i=function(e,i,r){var o=0===r;return!t&&!e&&o&&n.daySlotCollectionCount()?n._daySlotCollections[0].at(i):void 0};return this.timeSlotCollectionCount()||(t=!0),this._verticalSlot(e,-1,i)},downSlot:function(e,t){var n=this,i=function(e,i,r){return!t&&e&&n.timeSlotCollectionCount()?n._timeSlotCollections[r].at(0):void 0};return this.timeSlotCollectionCount()||(t=!0),this._verticalSlot(e,1,i)},leftSlot:function(e){return this._horizontalSlot(e,-1)},rightSlot:function(e){return this._horizontalSlot(e,1)},_horizontalSlot:function(e,t){var n,i=e.index,r=e.isDaySlot,o=e.collectionIndex,a=this._getCollections(r);return r?i+=t:o+=t,n=a[o],n?n.at(i):void 0},_verticalSlot:function(e,t,n){var i,r=e.index,o=e.isDaySlot,a=e.collectionIndex,s=this._getCollections(o);return(e=n(o,a,r))?e:(o?a+=t:r+=t,i=s[a],i?i.at(r):void 0)},_collection:function(e,t){var n=t?this._daySlotCollections:this._timeSlotCollections;return n[e]},_startSlot:function(e,t,n){var i,r=this._startCollection(e,t),o=!0;return r||(r=t[0],o=!1),i=r.slotByStartDate(e,n),i||(i=r.first(),o=!1),{slot:i,inRange:o}},_endSlot:function(e,t,n){var i,r=this._endCollection(e,t,n),o=!0;return r||(r=t[t.length-1],o=!1),i=r.slotByEndDate(e,n),i||(i=r.last(),o=!1),{slot:i,inRange:o}},getSlotCollection:function(e,t){return this[t?"getDaySlotCollection":"getTimeSlotCollection"](e)},getTimeSlotCollection:function(e){return this._timeSlotCollections[e]},getDaySlotCollection:function(e){return this._daySlotCollections[e]}}),w=M.Class.extend({init:function(t){e.extend(this,t)},innerHeight:function(){var e,t=this.collection,n=this.start.index,i=this.end.index,r=0;for(e=n;i>=e;e++)r+=t.at(e).offsetHeight;return r},events:function(){return this.collection.events()},addEvent:function(e){this.events().push(e)},startSlot:function(){return this.start.offsetLeft>this.end.offsetLeft?this.end:this.start},endSlot:function(){return this.start.offsetLeft>this.end.offsetLeft?this.start:this.end}}),b=w.extend({innerHeight:function(){var e,t=this.collection,n=this.start.index,i=this.end.index,r=0;for(e=n;i>=e;e++)r+=t.at(e).offsetHeight;return r},outerRect:function(e,t,n){return this._rect("offset",e,t,n)},_rect:function(e,t,n,i){var r,o,a,s,l,c,d,u,h=this.start,p=this.end,f=M.support.isRtl(h.element);return"number"!=typeof t&&(t=M.date.toUtcTime(t)),"number"!=typeof n&&(n=M.date.toUtcTime(n)),i?(r=h.offsetTop,o=p.offsetTop+p[e+"Height"],f?(a=p.offsetLeft,s=h.offsetLeft+h[e+"Width"]):(a=h.offsetLeft,s=p.offsetLeft+p[e+"Width"])):(l=t-h.start,0>l&&(l=0),c=h.end-h.start,r=h.offsetTop+h[e+"Height"]*l/c,d=p.end-n,0>d&&(d=0),u=p.end-p.start,o=p.offsetTop+p[e+"Height"]-p[e+"Height"]*d/u,f?(a=Math.round(p.offsetLeft+p[e+"Width"]*d/u),s=Math.round(h.offsetLeft+h[e+"Width"]-h[e+"Width"]*l/c)):(a=Math.round(h.offsetLeft+h[e+"Width"]*l/c),s=Math.round(p.offsetLeft+p[e+"Width"]-p[e+"Width"]*d/u))),{top:r,bottom:o,left:0===a?a:a+1,right:s}},innerRect:function(e,t,n){return this._rect("client",e,t,n)}}),k=w.extend({innerWidth:function(){var e,t=this.collection,n=this.start.index,i=this.end.index,r=0,o=n!==i?"offsetWidth":"clientWidth";for(e=n;i>=e;e++)r+=t.at(e)[o];return r}}),x=M.Class.extend({init:function(e,t,n,i){this._slots=[],this._events=[],this._start=M.date.toUtcTime(e),this._end=M.date.toUtcTime(t),this._groupIndex=n,this._collectionIndex=i},refresh:function(){for(var e=0;this._slots.length>e;e++)this._slots[e].refresh()},startInRange:function(e){return e>=this._start&&this._end>e},endInRange:function(e,t){var n=t?this._end>e:this._end>=e;return e>=this._start&&n},slotByStartDate:function(e){var t,n,i=e;for("number"!=typeof i&&(i=M.date.toUtcTime(e)),t=0;this._slots.length>t;t++)if(n=this._slots[t],n.startInRange(i))return n;return null},slotByEndDate:function(e,t){var n,i,r=e;if("number"!=typeof r&&(r=M.date.toUtcTime(e)),t)return this.slotByStartDate(e,!1);for(n=0;this._slots.length>n;n++)if(i=this._slots[n],i.endInRange(r))return i;return null},count:function(){return this._slots.length},events:function(){return this._events},addTimeSlot:function(e,t,n,i){var r=new S(e,t,n,this._groupIndex,this._collectionIndex,this._slots.length,i);this._slots.push(r)},addDaySlot:function(e,t,n,i){var r=new T(e,t,n,this._groupIndex,this._collectionIndex,this._slots.length,i);this._slots.push(r)},first:function(){return this._slots[0]},last:function(){return this._slots[this._slots.length-1]},at:function(e){return this._slots[e]}}),C=M.Class.extend({init:function(e,t,n,i,r,o){this.element=e,this.clientWidth=e.clientWidth,this.clientHeight=e.clientHeight,this.offsetWidth=e.offsetWidth,this.offsetHeight=e.offsetHeight,this.offsetTop=e.offsetTop,this.offsetLeft=e.offsetLeft,this.start=t,this.end=n,this.element=e,this.groupIndex=i,this.collectionIndex=r,this.index=o,this.isDaySlot=!1},startDate:function(){return M.timezone.toLocalDate(this.start)},endDate:function(){return M.timezone.toLocalDate(this.end)},startInRange:function(e){return e>=this.start&&this.end>e},endInRange:function(e){return e>this.start&&this.end>=e},startOffset:function(){return this.start},endOffset:function(){return this.end}}),S=C.extend({init:function(e,t,n,i,r,o,a){C.fn.init.apply(this,arguments),this.isHorizontal=a?!0:!1},refresh:function(){var e=this.element;this.clientWidth=e.clientWidth,this.clientHeight=e.clientHeight,this.offsetWidth=e.offsetWidth,this.offsetHeight=e.offsetHeight,this.offsetTop=e.offsetTop,this.offsetLeft=e.offsetLeft},offsetX:function(e,t){return e?this.offsetLeft+t:this.offsetLeft+t},startInRange:function(e){return e>=this.start&&this.end>e},endInRange:function(e){return e>this.start&&this.end>=e},startOffset:function(t,n,i){var r,o,a,s,l;if(i)return this.start;if(r=e(this.element).offset(),o=this.end-this.start,this.isHorizontal){if(l=M.support.isRtl(this.element),a=t-r.left,s=Math.floor(o*(a/this.offsetWidth)),l)return this.start+o-s}else a=n-r.top,s=Math.floor(o*(a/this.offsetHeight));return this.start+s},endOffset:function(t,n,i){var r,o,a,s,l;if(i)return this.end;if(r=e(this.element).offset(),o=this.end-this.start,this.isHorizontal){if(l=M.support.isRtl(this.element),a=t-r.left,s=Math.floor(o*(a/this.offsetWidth)),l)return this.start+o-s}else a=n-r.top,s=Math.floor(o*(a/this.offsetHeight));return this.start+s}}),T=C.extend({init:function(e,t,n,i,r,o,a){C.fn.init.apply(this,arguments),this.eventCount=a,this.isDaySlot=!0,this.element.children.length?(this.firstChildHeight=this.element.children[0].offsetHeight+3,this.firstChildTop=this.element.children[0].offsetTop):(this.firstChildHeight=3,this.firstChildTop=0)},refresh:function(){this.clientHeight=this.element.clientHeight,this.offsetTop=this.element.offsetTop},startDate:function(){var e=new Date(this.start);return M.timezone.apply(e,"Etc/UTC")},endDate:function(){var e=new Date(this.end);return M.timezone.apply(e,"Etc/UTC")},startInRange:function(e){return e>=this.start&&this.end>e},endInRange:function(e){return e>this.start&&this.end>=e}}),M.ui.SchedulerView=I.extend({init:function(t,n){I.fn.init.call(this,t,n),this._scrollbar=c(),this._isRtl=M.support.isRtl(t),this._resizeHint=e(),this._moveHint=e(),this._cellId=M.guid(),this._resourcesForGroups(),this._selectedSlots=[]},_isMobile:function(){var e=this.options;return e.mobile===!0&&M.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile},_isMobilePhoneView:function(){var e=this.options;return e.mobile===!0&&M.support.mobileOS&&!M.support.mobileOS.tablet||"phone"===e.mobile},_addResourceView:function(){var e=new y(this.groups.length);return this.groups.push(e),e},dateForTitle:function(){return M.format(this.options.selectedDateFormat,this.startDate(),this.endDate())},_changeGroup:function(e,t){var n=t?"prevGroupSlot":"nextGroupSlot",i=this[n](e.start,e.groupIndex,e.isAllDay);return i&&(e.groupIndex+=t?-1:1),i},_changeGroupContinuously:function(){return null},_changeViewPeriod:function(){return!1},_horizontalSlots:function(e,t,n,i){var r,o,a=i?"leftSlot":"rightSlot",s=t[0].start,l=t[t.length-1].end,c=this.groups[e.groupIndex];return n||(r=this._normalizeHorizontalSelection(e,t,i),r&&(s=l=r)),s=c[a](s),l=c[a](l),n||this._isVerticallyGrouped()||s&&l||(s=l=this._changeGroup(e,i)),s&&l||(o=this._continuousSlot(e,t,i),o=this._changeGroupContinuously(e,o,n,i),o&&(s=l=o)),{startSlot:s,endSlot:l}},_verticalSlots:function(e,t,n,i){var r,o,a=t[0].start,s=t[t.length-1].end,l=this.groups[e.groupIndex];return n||(r=this._normalizeVerticalSelection(e,t,i),r&&(a=s=r)),o=i?"upSlot":"downSlot",a=l[o](a,n),s=l[o](s,n),n||!this._isVerticallyGrouped()||a&&s||(a=s=this._changeGroup(e,i)),{startSlot:a,endSlot:s}},_normalizeHorizontalSelection:function(){return null},_normalizeVerticalSelection:function(e,t,n){var i;return i=n?t[0].start:t[t.length-1].end},_continuousSlot:function(){return null},constrainSelection:function(e){var t,n=this.groups[0];this.inRange(e)?n.daySlotCollectionCount()||(e.isAllDay=!1):(t=n.firstSlot(),e.isAllDay=t.isDaySlot,e.start=t.startDate(),e.end=t.endDate()),this.groups[e.groupIndex]||(e.groupIndex=0)},move:function(e,t,n){var i,r,o,a,s,l,c=!1,d=this.groups[e.groupIndex];if(d.timeSlotCollectionCount()||(e.isAllDay=!0),i=d.ranges(e.start,e.end,e.isAllDay,!1),t===z.DOWN||t===z.UP){if(c=!0,a=t===z.UP,this._updateDirection(e,i,n,a,!0),s=this._verticalSlots(e,i,n,a),!s.startSlot&&!n&&this._changeViewPeriod(e,a,!0))return c}else if((t===z.LEFT||t===z.RIGHT)&&(c=!0,a=t===z.LEFT,this._updateDirection(e,i,n,a,!1),s=this._horizontalSlots(e,i,n,a),!s.startSlot&&!n&&this._changeViewPeriod(e,a,!1)))return c;return c&&(r=s.startSlot,o=s.endSlot,n?(l=e.backward,l&&r?e.start=r.startDate():!l&&o&&(e.end=o.endDate())):r&&o&&(e.isAllDay=r.isDaySlot,e.start=r.startDate(),e.end=o.endDate()),e.events=[]),c},moveToEventInGroup:function(t,n,i,r){for(var o,a,s=t._continuousEvents||[],l=r?-1:1,c=s.length,d=r?c-1:0;c>d&&d>-1;){if(a=s[d],(!r&&a.start.startDate()>=n.startDate()||r&&a.start.startDate()<=n.startDate())&&(i.length&&(a=s[d+l]),a&&-1===e.inArray(a.uid,i))){o=!!a;break}d+=l}return a},moveToEvent:function(e,t){for(var n,i=e.groupIndex,r=this.groups[i],o=r.ranges(e.start,e.end,e.isAllDay,!1)[0].start,a=this.groups.length,s=t?-1:1,l=e.events;a>i&&i>-1&&(n=this.moveToEventInGroup(r,o,l,t),i+=s,r=this.groups[i],r&&!n);)l=[],o=t?r.lastSlot():r.firstSlot(!0);return n&&(e.events=[n.uid],e.start=n.start.startDate(),e.end=n.end.endDate(),e.isAllDay=n.start.isDaySlot,e.groupIndex=n.start.groupIndex),!!n},current:function(e){return void 0===e?this._current:(this._current=e,void this._scrollTo(e,this.content[0]))},select:function(e){this.clearSelection(),this._selectEvents(e)||this._selectSlots(e)},_selectSlots:function(e){var t,n,i,r,o,a,s,l=e.isAllDay,c=this.groups[e.groupIndex];for(c.timeSlotCollectionCount()||(l=!0),this._selectedSlots=[],t=c.ranges(e.start,e.end,l,!1),r=0;t.length>r;r++)for(o=t[r],a=o.collection,s=o.start.index;o.end.index>=s;s++)i=a.at(s),n=i.element,n.setAttribute("aria-selected",!0),_(n),this._selectedSlots.push({start:i.startDate(),end:i.endDate(),element:n});e.backward&&(n=t[0].start.element),this.current(n)},_selectEvents:function(t){var n,i,r=!1,o=t.events,a=this.groups[t.groupIndex]._continuousEvents||[],s=a.length;if(!o[0]||!a[0])return r;for(i=e(),t.events=[],n=0;s>n;n++)e.inArray(a[n].uid,o)>-1&&(i=i.add(a[n].element),t.events.push(a[n].uid));return i[0]&&(i.addClass("k-state-selected").attr("aria-selected",!0),this.current(i.last()[0]),this._selectedSlots=[],r=!0),r},inRange:function(e){var t=this.startDate(),n=M.date.addDays(this.endDate(),1),i=e.start,r=e.end;return i>=t&&n>i&&r>t&&n>=r},_resourceValue:function(e,t){return e.valuePrimitive&&(t=M.getter(e.dataValueField)(t)),t},_resourceBySlot:function(e){var t,n,i,r,o,a=this.groupedResources,s={};if(a.length)for(t=e.groupIndex,n=a.length-1;n>=0;n--)i=a[n],r=this._resourceValue(i,i.dataSource.view()[t%i.dataSource.total()]),i.multiple&&(r=[r]),o=M.setter(i.field),o(s,r),t=Math.floor(t/i.dataSource.total());return s},_createResizeHint:function(t,n,i,r){return e(B).css({left:t,top:n,width:i,height:r})},_removeResizeHint:function(){this._resizeHint.remove(),this._resizeHint=e()},_removeMoveHint:function(){this._moveHint.remove(),this._moveHint=e()},_scrollTo:function(e,t){var n=e.offsetTop,i=e.offsetHeight,r=t.scrollTop,o=t.clientHeight,a=n+i,s=0;s=r>n?n:a>r+o?o>=i?a-o:n:r,t.scrollTop=s},_shouldInverseResourceColor:function(e){var t=new A(e.color).isDark(),n=this.element.css("color"),i=new A(n).isDark();return t==i},_eventTmpl:function(t,n){var i,r=this.options,o=e.extend({},M.Template,r.templateSettings),a=o.paramName,s="",l=typeof t,c={storage:{},count:0};return"function"===l?(c.storage["tmpl"+c.count]=t,s+="#=this.tmpl"+c.count+"("+a+")#",c.count++):"string"===l&&(s+=t),i=M.template(M.format(n,s),o),c.count>0&&(i=e.proxy(i,c.storage)),i},eventResources:function(e){var t,n,i,r,o,a,s,l,c,d,u=[],h=this.options;if(!h.resources)return u;for(t=0;h.resources.length>t;t++)if(n=h.resources[t],i=n.field,r=M.getter(i)(e))for(n.multiple||(r=[r]),o=n.dataSource.view(),a=0;r.length>a;a++){for(s=null,l=r[a],n.valuePrimitive||(l=M.getter(n.dataValueField)(l)),c=0;o.length>c;c++)if(o[c].get(n.dataValueField)==l){s=o[c];break}null!==s&&(d=M.getter(n.dataColorField)(s),u.push({field:n.field,title:n.title,name:n.name,text:M.getter(n.dataTextField)(s),value:l,color:d}))}return u},createLayout:function(i){var r,o,a,s,l,c=-1;for(i.rows||(i.rows=[]),r=0;i.rows.length>r;r++)if(i.rows[r].allDay){c=r;break}o=i.rows[c],c>=0&&i.rows.splice(c,1),a=this.columnLevels=t(i,"columns"),s=this.rowLevels=t(i,"rows"),this.table=e("<table "+n()+' class="k-scheduler-layout k-scheduler-'+this.name+'view"/>'),l=s[s.length-1].length,this.table.append(this._topSection(a,o,l)),this.table.append(this._bottomSection(a,s,l)),this.element.append(this.table),this._scroller()},refreshLayout:function(){var t,n,i,r,o,a,s=this,l=s.element.find(">.k-scheduler-toolbar"),c=s.element.innerHeight(),d=this._scrollbar,u=0,h=this._isRtl?"left":"right";for(t=0;l.length>t;t++)c-=l.eq(t).outerHeight();s.datesHeader&&(u=s.datesHeader.outerHeight()),s.timesHeader&&s.timesHeader.outerHeight()>u&&(u=s.timesHeader.outerHeight()),s.datesHeader&&s.timesHeader&&(n=s.datesHeader.find("table:first tr"),s.timesHeader.find("tr").height(function(t){e(this).height(n.eq(t).height())})),u&&(c-=u),s.footer&&(c-=s.footer.outerHeight()),i=function(e){var t,n;return e[0].style.height?!0:(t=e.height(),e.height("auto"),n=e.height(),t!=n?(e.height(""),!0):(e.height(""),!1))},r=s.content[0],o=M.support.kineticScrollNeeded?0:d,i(s.element)&&(s.content.height(c>2*d?c:2*d+1),s.times.height(r.clientHeight),a=s.times.find("table"),a.length&&a.height(s.content.find("table")[0].clientHeight)),r.offsetWidth-r.clientWidth>0?(s.table.addClass("k-scrollbar-v"),s.datesHeader.css("padding-"+h,o-parseInt(s.datesHeader.children().css("border-"+h+"-width"),10))):s.datesHeader.css("padding-"+h,""),r.offsetHeight-r.clientHeight>0||r.clientHeight>s.content.children(".k-scheduler-table").height()?s.table.addClass("k-scrollbar-h"):s.table.removeClass("k-scrollbar-h")},_topSection:function(t,n,i){this.timesHeader=o(t.length,n,i);var r=t[t.length-1].length;return this.datesHeader=a(t,r,n),e("<tr>").append(this.timesHeader.add(this.datesHeader).wrap("<td>").parent())
},_bottomSection:function(t,n,i){return this.times=s(n,i),this.content=l(t[t.length-1],n[n.length-1]),e("<tr>").append(this.times.add(this.content).wrap("<td>").parent())},_scroller:function(){var t,n=this;this.content.bind("scroll"+F,function(){n.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(this.scrollLeft),n.times.scrollTop(this.scrollTop)}),t=M.touchScroller(this.content,{avoidScrolling:function(t){return e(t.event.target).closest(".k-event.k-event-active").length>0}}),t&&t.movable&&(this._touchScroller=t,this.content=t.scrollElement,t.movable.bind("change",function(e){n.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(-e.sender.x),n.times.scrollTop(-e.sender.y)}))},_resourcesForGroups:function(){var e,t,n,i,r=[],o=this.options.group,a=this.options.resources;if(o=o&&o.resources?o.resources:[],a&&o.length)for(e=0,t=a.length;t>e;e++)for(n=0,i=o.length;i>n;n++)a[e].name===o[n]&&r.push(a[e]);this.groupedResources=r},_createColumnsLayout:function(e,t,n){return m("columns",e,t,n)},_groupOrientation:function(){var e=this.options.group;return e&&e.resources?e.orientation:"horizontal"},_isVerticallyGrouped:function(){return this.groupedResources.length&&"vertical"===this._groupOrientation()},_createRowsLayout:function(e,t,n){return m("rows",e,t,n)},selectionByElement:function(){return null},clearSelection:function(){this.content.find(".k-state-selected").removeAttr("id").attr("aria-selected",!1).removeClass("k-state-selected")},destroy:function(){var e=this;I.fn.destroy.call(this),e.table&&(M.destroy(e.table),e.table.remove()),e.groups=null,e.table=null,e.content=null,e.times=null,e.datesHeader=null,e.timesHeader=null,e.footer=null,e._resizeHint=null,e._moveHint=null},calendarInfo:function(){return M.getCulture().calendars.standard},prevGroupSlot:function(e,t,n){var i,r=this.groups[t],o=r.ranges(e,e,n,!1)[0].start;if(!(0>=t))return this._isVerticallyGrouped()?r.timeSlotCollectionCount()?(i=r._collection(n?o.index:o.collectionIndex,!1),i.last()):(i=r._collection(r.daySlotCollectionCount()-1,!0),i.at(o.index)):r.timeSlotCollectionCount()?(i=r._collection(n?0:r.timeSlotCollectionCount()-1,n),n?i.last():i.at(o.index)):(i=r._collection(o.collectionIndex,!0),i.last())},nextGroupSlot:function(e,t,n){var i,r,o=this.groups[t],a=o.ranges(e,e,n,!1)[0].start;if(!(t>=this.groups.length-1))return this._isVerticallyGrouped()?o.timeSlotCollectionCount()?(r=o.daySlotCollectionCount(),i=o._collection(r?0:a.collectionIndex,r),n?i.first():i.at(a.collectionIndex)):(i=o._collection(0,!0),i.at(a.index)):o.timeSlotCollectionCount()?(i=o._collection(0,n),n?i.first():i.at(a.index)):(i=o._collection(a.collectionIndex,!0),i.first())},_updateEventForMove:function(){},_updateEventForResize:function(){},_updateEventForSelection:function(e){return e}}),A=function(e){var t,n,i,r,o,a=this,s=A.formats;if(1===arguments.length)for(e=a.resolveColor(e),r=0;s.length>r;r++)t=s[r].re,n=s[r].process,i=t.exec(e),i&&(o=n(i),a.r=o[0],a.g=o[1],a.b=o[2]);else a.r=arguments[0],a.g=arguments[1],a.b=arguments[2];a.r=a.normalizeByte(a.r),a.g=a.normalizeByte(a.g),a.b=a.normalizeByte(a.b)},A.prototype={resolveColor:function(e){return e=e||"#000","#"==e.charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase(),e=A.namedColors[e]||e},normalizeByte:function(e){return 0>e||isNaN(e)?0:e>255?255:e},percBrightness:function(){var e=this;return R.sqrt(.241*e.r*e.r+.691*e.g*e.g+.068*e.b*e.b)},isDark:function(){var e=this,t=e.percBrightness();return 180>t}},A.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],A.namedColors={aqua:"00ffff",azure:"f0ffff",beige:"f5f5dc",black:"000000",blue:"0000ff",brown:"a52a2a",coral:"ff7f50",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgray:"a9a9a9",darkgreen:"006400",darkorange:"ff8c00",darkred:"8b0000",dimgray:"696969",fuchsia:"ff00ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lightblue:"add8e6",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumblue:"0000cd",navy:"000080",olive:"808000",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",pink:"ffc0cb",plum:"dda0dd",purple:"800080",red:"ff0000",royalblue:"4169e1",salmon:"fa8072",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",steelblue:"4682b4",tan:"d2b48c",teal:"008080",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},E=/\s*k-state-selected/,e.extend(P.SchedulerView,{createColumns:p,createRows:f,rangeIndex:u,collidingEvents:d,groupEqFilter:v})}(window.kendo.jQuery),function(e,t){function n(e){var t=new Date(1980,1,1,0,0,0);return c(t,m(e)),t}function i(e,t,n){return e>=t&&n>=e}function r(e,t,n,i){return i=i?n>=e:n>e,e>t&&i}function o(e,t,n,i){var r,o=e._continuousEvents,a=o[o.length-1],l=p(t.start.startDate()).getTime();if(i&&a&&p(a.start.startDate()).getTime()==l){for(r=o.length-1;r>-1&&!(o[r].isAllDay||p(o[r].start.startDate()).getTime()<l);r--);o.splice(r+1,0,{element:n,isAllDay:!0,uid:n.attr(s.attr("uid")),start:t.start,end:t.end})}else o.push({element:n,isAllDay:i,uid:n.attr(s.attr("uid")),start:t.start,end:t.end})}function a(e){var t=[],n=e.workWeekStart;for(t.push(n);e.workWeekEnd!=n;)n>6?n-=7:n++,t.push(n);return t}var s=window.kendo,l=s.ui,c=s.date.setTime,d=l.SchedulerView,u=e.extend,h=e.proxy,p=s.date.getDate,f=s.date.MS_PER_MINUTE,g=s.date.MS_PER_DAY,m=s.date.getMilliseconds,v=".kendoMultiDayView",_=s.template('<div title="(#=kendo.format("{0:t} - {1:t}", start, end)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),y=s.template('<div title="(#=kendo.format("{0:t}", start)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">${title}</div></div>'),w=s.template("<span class='k-link k-nav-day'>#=kendo.toString(date, 'ddd M/dd')#</span>"),b='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-e"></span>#}#</span>#if(resizable && !singleDay && !data.tail && !data.middle){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !singleDay && !data.head && !data.middle){#<span class="k-resize-handle k-resize-e"></span>#}#</div>',k='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#" #if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}#</span><span class="k-event-top-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-n"></span># } #</span><span class="k-event-bottom-actions"># if(data.head || data.middle) {#<span class="k-icon k-i-arrow-s"></span># } #</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-n"></span># } ## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-s"></span># } #</div>',x=d.extend({init:function(e,t){var n=this;d.fn.init.call(n,e,t),n.title=n.options.title||n.options.name,n._workDays=a(n.options),n._templates(),n._editable(),n.calculateDateRange(),n._groups(),n._currentTime()},_currentTimeMarkerUpdater:function(){var t,n,i,r,o,a,l,c,d,u,h=new Date,p=this.options;for(p.currentTimeMarker.useLocalTimezone===!1&&(t=p.dataSource.options.schema.timezone,p.dataSource&&t&&(n=s.timezone.offset(h,t),h=s.timezone.convert(h,h.getTimezoneOffset(),n))),this.times.find(".k-current-time").remove(),i=p.group&&"horizontal"!=p.group.orientation?this.groups.length:1,r=0;i>r;r++){if(o=this.groups[r],a=s.date.toUtcTime(h),l=o.timeSlotRanges(a,a+1),0===l.length)return;c=l[0].collection,d=c.slotByStartDate(h),d&&(u=e("<div class='k-current-time'></div>"),u.appendTo(this.times).css({top:Math.round(l[0].innerRect(h,new Date(h.getTime()+1),!1).top),height:"1px",right:"1px",left:0}))}},_currentTime:function(){var e,n=this,i=n.options.currentTimeMarker;i!==!1&&i.updateInterval!==t&&(e=i.updateInterval,n._currentTimeMarkerUpdater(),n._currentTimeUpdateTimer=setInterval(h(this._currentTimeMarkerUpdater,n),e))},_updateResizeHint:function(e,t,n,i){var r,o,a,l,c,u,h,p,f,g,m=e.isMultiDay(),v=this.groups[t],_=v.ranges(n,i,m,e.isAllDay);for(this._removeResizeHint(),r=0;_.length>r;r++)o=_[r],a=o.startSlot(),l=a.offsetWidth,c=a.clientHeight,u=a.offsetTop,m?l=o.innerWidth():(h=o.outerRect(n,i,this.options.snap),u=h.top,c=h.bottom-h.top),p=d.fn._createResizeHint.call(this,a.offsetLeft,u,l,c),this._resizeHint=this._resizeHint.add(p);f="t",g=this.content,m&&(f="M/dd",g=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div"),g.length||(g=this.content)),this._resizeHint.appendTo(g),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(s.toString(s.timezone.toLocalDate(n),f)),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(s.toString(s.timezone.toLocalDate(i),f))},_updateMoveHint:function(e,t,n){var i,r,o,a,l,c,d,u=e.isMultiDay(),h=this.groups[t],p=s.date.toUtcTime(e.start)+n,f=p+e.duration(),g=h.ranges(p,f,u,e.isAllDay);for(p=s.timezone.toLocalDate(p),f=s.timezone.toLocalDate(f),this._removeMoveHint(),!u&&(0===m(f)||m(f)<m(this.startTime()))&&g.length>1&&g.pop(),i=0;g.length>i;i++)r=g[i],o=r.start,a=this._createEventElement(e.clone({start:p,end:f}),!u),a.addClass("k-event-drag-hint"),l={left:o.offsetLeft+2,top:o.offsetTop},this._isRtl&&(l.left=.1*o.clientWidth+o.offsetLeft+2),u?l.width=r.innerWidth()-4:(c=r.outerRect(p,f,this.options.snap),l.top=c.top,l.height=c.bottom-c.top,l.width=.9*o.clientWidth-4),a.css(l),this._moveHint=this._moveHint.add(a);d=this.content,u&&(d=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div"),d.length||(d=this.content)),this._moveHint.appendTo(d)},_slotByPosition:function(e,t){var n,i,r,o;for(this._isVerticallyGrouped()?(i=this.content.offset(),t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft):i=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day)").find(">div").offset(),i&&(e-=i.left,t-=i.top),e=Math.ceil(e),t=Math.ceil(t),o=0;this.groups.length>o;o++)if(r=this.groups[o],n=r.daySlotByPosition(e,t))return n;for(i&&(e+=i.left,t+=i.top),i=this.content.offset(),e-=i.left,t-=i.top,this._isVerticallyGrouped()||(t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft),e=Math.ceil(e),t=Math.ceil(t),o=0;this.groups.length>o;o++)if(r=this.groups[o],n=r.timeSlotByPosition(e,t))return n;return null},_groupCount:function(){var e=this.groupedResources;return e.length?"vertical"===this._groupOrientation()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length):1},_columnCountInResourceView:function(){var e=this.groupedResources;return!e.length||this._isVerticallyGrouped()?this._columnCountForLevel(0):this._columnOffsetForResource(e.length)},_timeSlotGroups:function(e,t){var n,i,r,o,a,s,l,c,d,u,h,p,f,g,v,_,y=this._timeSlotInterval(),w=this.content.find("tr:not(.k-scheduler-header-all-day)");for(w.attr("role","row"),n=w.length,this._isVerticallyGrouped()&&(n=Math.floor(n/e)),i=0;e>i;i++)for(r=0,this._isVerticallyGrouped()&&(r=i),o=r*n,s=0,this._isVerticallyGrouped()||(s=i);(r+1)*n>o;){for(l=w[o].children,c=this.groups[i],o%n===0&&(a=m(new Date(+this.startTime()))),d=s*t;(s+1)*t>d;d++)u=l[d],h=d%t,p=c.getTimeSlotCollection(h),f=this._dates[h],g=Date.UTC(f.getFullYear(),f.getMonth(),f.getDate()),v=g+a,_=v+y,u.setAttribute("role","gridcell"),u.setAttribute("aria-selected",!1),p.addTimeSlot(u,v,_);a+=y,o++}},_daySlotGroups:function(e,t){var n,i,r,o,a,l,c,d,u,h,p,f;for(n=this.element.find(this._isVerticallyGrouped()?".k-scheduler-header-all-day":".k-scheduler-header-all-day tr"),n.attr("role","row"),i=0;e>i;i++)for(r=0,this._isVerticallyGrouped()&&(r=i),o=this.groups[i],a=o.getDaySlotCollection(0),l=n[r].children,c=0,this._isVerticallyGrouped()||(c=i),d=0,u=c*t;(c+1)*t>u;u++)h=l[u],u%t===0&&(d=0),p=this._dates[d],f=Date.UTC(p.getFullYear(),p.getMonth(),p.getDate()),d++,h.setAttribute("role","gridcell"),h.setAttribute("aria-selected",!1),a.addDaySlot(h,f,f+s.date.MS_PER_DAY)},_groups:function(){var e,t,n,i=this._groupCount(),r=this._columnCountInResourceView();for(this.groups=[],e=0;i>e;e++){for(t=this._addResourceView(e),n=0;r>n;n++)t.addTimeSlotCollection(this._dates[n],s.date.addDays(this._dates[n],1));this.options.allDaySlot&&t.addDaySlotCollection(this._dates[0],s.date.addDays(this._dates[this._dates.length-1],1))}this._timeSlotGroups(i,r),this.options.allDaySlot&&this._daySlotGroups(i,r)},options:{name:"MultiDayView",selectedDateFormat:"{0:D}",allDaySlot:!0,showWorkHours:!1,title:"",startTime:s.date.today(),endTime:s.date.today(),minorTickCount:2,majorTick:60,majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",minorTimeHeaderTemplate:"&nbsp;",groupHeaderTemplate:"#=text#",slotTemplate:"&nbsp;",allDaySlotTemplate:"&nbsp;",eventTemplate:_,allDayEventTemplate:y,dateHeaderTemplate:w,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,footer:{command:"workDay"},messages:{allDay:"all day",showFullDay:"Show full day",showWorkDay:"Show business hours"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=u({},s.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,k),this.allDayEventTemplate=this._eventTmpl(e.allDayEventTemplate,b),this.majorTimeHeaderTemplate=s.template(e.majorTimeHeaderTemplate,t),this.minorTimeHeaderTemplate=s.template(e.minorTimeHeaderTemplate,t),this.dateHeaderTemplate=s.template(e.dateHeaderTemplate,t),this.slotTemplate=s.template(e.slotTemplate,t),this.allDaySlotTemplate=s.template(e.allDaySlotTemplate,t),this.groupHeaderTemplate=s.template(e.groupHeaderTemplate,t)},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+v,".k-event a:has(.k-si-close)",function(n){t.trigger("remove",{uid:e(this).closest(".k-event").attr(s.attr("uid"))}),n.preventDefault()}),t.options.editable.create!==!1&&t.element.on("dblclick"+v,".k-scheduler-content td",function(n){var i,r;e(this).parent().hasClass("k-scheduler-header-all-day")||(i=t._slotByPosition(n.pageX,n.pageY),i&&(r=t._resourceBySlot(i),t.trigger("add",{eventInfo:u({start:i.startDate(),end:i.endDate()},r)})),n.preventDefault())}).on("dblclick"+v,".k-scheduler-header-all-day td",function(e){var n,i=t._slotByPosition(e.pageX,e.pageY);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:u({},{isAllDay:!0,start:s.date.getDate(i.startDate()),end:s.date.getDate(i.startDate())},n)})),e.preventDefault()}),t.options.editable.update!==!1&&t.element.on("dblclick"+v,".k-event",function(n){t.trigger("edit",{uid:e(this).closest(".k-event").attr(s.attr("uid"))}),n.preventDefault()})},_touchEditable:function(){var t=this;t.options.editable.create!==!1&&(t._addUserEvents=new s.UserEvents(t.element,{filter:".k-scheduler-content td",tap:function(n){var i,r;e(n.target).parent().hasClass("k-scheduler-header-all-day")||(i=t._slotByPosition(n.x.location,n.y.location),i&&(r=t._resourceBySlot(i),t.trigger("add",{eventInfo:u({start:i.startDate(),end:i.endDate()},r)})),n.preventDefault())}}),t._allDayUserEvents=new s.UserEvents(t.element,{filter:".k-scheduler-header-all-day td",tap:function(e){var n,i=t._slotByPosition(e.x.location,e.y.location);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:u({},{isAllDay:!0,start:s.date.getDate(i.startDate()),end:s.date.getDate(i.startDate())},n)})),e.preventDefault()}})),t.options.editable.update!==!1&&(t._editUserEvents=new s.UserEvents(t.element,{filter:".k-event",tap:function(n){var i=e(n.target).closest(".k-event");i.hasClass("k-event-active")||t.trigger("edit",{uid:i.attr(s.attr("uid"))}),n.preventDefault()}}))},_layout:function(e){var t,n,i,r=[],o=[],a=this.options,l=this;for(t=0;e.length>t;t++)n={},n.text=l.dateHeaderTemplate({date:e[t]}),s.date.isToday(e[t])&&(n.className="k-today"),r.push(n);return i=this.groupedResources,a.allDaySlot&&o.push({text:a.messages.allDay,allDay:!0,cellContent:function(t){var n=t;return t=i.length&&"vertical"!==l._groupOrientation()?t%e.length:t,l.allDaySlotTemplate({date:e[t],resources:function(){return l._resourceBySlot({groupIndex:n})}})}}),this._forTimeRange(this.startTime(),this.endTime(),function(e,t,n,i){var r=t?l.majorTimeHeaderTemplate:l.minorTimeHeaderTemplate,a={text:r({date:e}),className:i?"k-slot-cell":""};o.push(a)}),i.length&&("vertical"===this._groupOrientation()?o=this._createRowsLayout(i,o,this.groupHeaderTemplate):r=this._createColumnsLayout(i,r,this.groupHeaderTemplate)),{columns:r,rows:o}},_footer:function(){var t,n,i,r=this.options;r.footer!==!1&&(t='<div class="k-header k-scheduler-footer">',n=r.footer.command,n&&"workDay"===n?(t+='<ul class="k-reset k-header">',t+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>',t+=(r.showWorkHours?r.messages.showFullDay:r.messages.showWorkDay)+"</a></li>",t+="</ul>"):t+="&nbsp;",t+="</div>",this.footer=e(t).appendTo(this.element),i=this,this.footer.on("click"+v,".k-scheduler-fullday",function(e){e.preventDefault(),i.trigger("navigate",{view:i.name||r.name,date:i.startDate(),isWorkDay:!r.showWorkHours})}))},_forTimeRange:function(e,t,i,r){var o,a,s,l,d,u,h,p,v,_,y,w,b,k,x,C;for(e=n(e),t=n(t),o=this,a=m(e),s=m(t),l=o.options.minorTickCount,d=o.options.majorTick*f,u=d/l||1,h=new Date(+e),p=h.getDate(),_=0,w="",y=g/u,a!=s&&(a>s&&(s+=g),y=(s-a)/u),y=Math.round(y);y>_;_++)b=_%(d/u),k=0===b,x=l-1>b,C=b===l-1,w+=i(h,k,x,C),c(h,u,!1);return s&&(v=m(h),p<h.getDate()&&(v+=g),v>s&&(h=new Date(+t))),r&&(w+=r(h)),w},_content:function(e){var t,n,i,r=this,o=r.options,a=r.startTime(),l=this.endTime(),c=1,d=1,u=e.length,h="",p=this.groupedResources,f=this.slotTemplate,g=this.allDaySlotTemplate,m=!1;for(p.length&&(m="vertical"===r._groupOrientation(),m?(d=this._rowCountForLevel(this.rowLevels.length-2),o.allDaySlot&&(t=function(t){var n,i,o='<tr class="k-scheduler-header-all-day">',a=function(){return r._resourceBySlot({groupIndex:t})};for(n=0,i=e.length;i>n;n++)o+="<td>"+g({date:e[n],resources:a})+"</td>";return o+"</tr>"})):c=this._columnCountForLevel(this.columnLevels.length-2)),h+="<tbody>",n=function(t,n){var o,a,l,d,h="",p="",g=0;for(h="<tr"+(n?' class="k-middle-row"':"")+">",d=function(e){return function(){return r._resourceBySlot({groupIndex:e})}};c>g;g++)for(o=0,a=u;a>o;o++)p="",s.date.isToday(e[o])&&(p+="k-today"),(s.date.getMilliseconds(t)<s.date.getMilliseconds(r.options.workDayStart)||s.date.getMilliseconds(t)>=s.date.getMilliseconds(r.options.workDayEnd)||!r._isWorkDay(e[o]))&&(p+=" k-nonwork-hour"),h+="<td"+(""!==p?' class="'+p+'"':"")+">",l=s.date.getDate(e[o]),s.date.setTime(l,s.date.getMilliseconds(t)),h+=f({date:l,resources:d(m?i:g)}),h+="</td>";return h+="</tr>"},i=0;d>i;i++)h+=t?t(i):"",h+=this._forTimeRange(a,l,n);h+="</tbody>",this.content.find("table").append(h)},_isWorkDay:function(e){var t,n=e.getDay(),i=this._workDays;for(t=0;i.length>t;t++)if(i[t]===n)return!0;return!1},_render:function(t){var n,i=this;t=t||[],this._dates=t,this._startDate=t[0],this._endDate=t[t.length-1||0],this.createLayout(this._layout(t)),this._content(t),this._footer(),this.refreshLayout(),n=this.element.find(".k-scheduler-header-all-day td"),n.length&&(this._allDayHeaderHeight=n.first()[0].clientHeight),i.datesHeader.on("click"+v,".k-nav-day",function(t){var n=e(t.currentTarget).closest("th"),r=n.offset(),o=i._slotByPosition(r.left,r.top+n.outerHeight());i.trigger("navigate",{view:"day",date:o.startDate()})})},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_end:function(e){var t=m(this.endTime())||g;return e&&(t=0),new Date(this._endDate.getTime()+t)},nextDate:function(){return s.date.nextDay(this.endDate())},previousDate:function(){return s.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},destroy:function(){var e=this;e._currentTimeUpdateTimer&&clearInterval(e._currentTimeUpdateTimer),e.datesHeader&&e.datesHeader.off(v),e.element&&e.element.off(v),e.footer&&e.footer.remove(),d.fn.destroy.call(this),this._isMobile()&&e.options.editable&&(e.options.editable.create!==!1&&(e._addUserEvents.destroy(),e._allDayUserEvents.destroy()),e.options.editable.update!==!1&&e._editUserEvents.destroy())},inRange:function(e){var t=d.fn.inRange.call(this,e),n=m(this.startTime()),i=m(this.endTime())||s.date.MS_PER_DAY,r=m(e.start),o=m(e.end)||s.date.MS_PER_DAY;return t&&r>=n&&i>=o},selectionByElement:function(e){var t=e.offset();return this._slotByPosition(t.left,t.top)},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*f},_timeSlotIndex:function(e){var t=this.options,n=m(e),i=m(this.startTime()),r=t.majorTick/t.minorTickCount*f;return(n-i)/r},_slotIndex:function(e,t){return t?this._dateSlotIndex(e):this._timeSlotIndex(e)},_dateSlotIndex:function(e,t){var n,r,o,a,l=this._dates||[],c=1;for(n=0,r=l.length;r>n;n++)if(o=s.date.getDate(l[n]),a=new Date(s.date.getDate(l[n]).getTime()+g-(t?0:1)),i(e,o,a))return n*c;return-1},_positionAllDayEvent:function(t,n){var i,r,o,a,s,l,c,u=n.innerWidth(),h=n.start.index,p=n.end.index,f=d.collidingEvents(n.events(),h,p),g=this._headerColumnCount||0,m=2,v=h!==p?5:4,_=this._allDayHeaderHeight,y=n.startSlot();for(t.css({left:y.offsetLeft+m,width:u-v}),n.addEvent({slotIndex:h,start:h,end:p,element:t}),f.push({slotIndex:h,start:h,end:p,element:t}),i=d.createRows(f),i.length&&i.length>g&&(this._headerColumnCount=i.length),r=n.start.offsetTop,o=0,a=i.length;a>o;o++)for(s=i[o].events,l=0,c=s.length;c>l;l++)e(s[l].element).css({top:r+o*_})},_arrangeColumns:function(e,t,n,i){var r,o,a,s,l,c,u,h,p,f,g,m=i.start;for(e={element:e,slotIndex:m.index,start:t,end:t+n},o=m.clientWidth,a=.1*o,l=i.events(),c=d.collidingEvents(l,e.start,e.end),i.addEvent(e),c.push(e),r=d.createColumns(c),u=(o-a)/r.length,h=0,p=r.length;p>h;h++)for(s=r[h].events,f=0,g=s.length;g>f;f++)s[f].element[0].style.width=u-4+"px",s[f].element[0].style.left=(this._isRtl?a:0)+m.offsetLeft+h*u+2+"px"},_positionEvent:function(e,t,n){var i=e.startTime||e.start,r=e.endTime||e.end,o=n.innerRect(i,r,!1),a=o.bottom-o.top-2;0>a&&(a=0),t.css({top:o.top,height:a}),this._arrangeColumns(t,o.top,t[0].clientHeight,n)},_createEventElement:function(t,n,r,o){var a,l,c,d,h,f,v=n?this.eventTemplate:this.allDayEventTemplate,_=this.options,y=_.editable,w=this._isMobile(),b=y&&y.destroy!==!1&&!w,k=y&&y.resize!==!1,x=p(this.startDate()),C=p(this.endDate()),S=m(this.startTime()),T=m(this.endTime()),D=t._time("start"),A=t._time("end");return S>=T&&(T=m(new Date(this.endTime().getTime()+g-1))),n||t.isAllDay||(C=new Date(C.getTime()+g)),l=t.start,c=t.end,t.isAllDay&&(c=p(t.end)),!i(p(l),x,C)&&!i(c,x,C)||n&&S>D&&A>T?a=!0:p(l)<x||n&&S>D?o=!0:(c>C&&!n||n&&A>T)&&(r=!0),d=this.eventResources(t),t.startTime&&(l=new Date(D),l=s.timezone.apply(l,"Etc/UTC")),t.endTime&&(c=new Date(A),c=s.timezone.apply(c,"Etc/UTC")),h=u({},{ns:s.ns,resizable:k,showDelete:b,middle:a,head:r,tail:o,singleDay:1==this._dates.length,resources:d,inverseColor:d&&d[0]?this._shouldInverseResourceColor(d[0]):!1},t,{start:l,end:c}),f=e(v(h)),this.angular("compile",function(){return{elements:f,data:[{dataItem:h}]}}),f},_isInTimeSlot:function(e){var t,n=this.startTime(),i=this.endTime(),o=e.startTime||e.start,a=e.endTime||e.end;return m(i)===m(s.date.getDate(i))&&(i=s.date.getDate(i),c(i,g-1)),e._date("end")>e._date("start")&&(a=+e._date("end")+(g-1)),a-=e._date("end"),o-=e._date("start"),i=m(i),n=m(n),n===o&&o===a?!0:(t=o!==i,r(o,n,i,t)||r(a,n,i,t)||r(n,o,a)||r(i,o,a))},_isInDateSlot:function(e){var t=this.groups[0],n=t.firstSlot().start,r=t.lastSlot().end-1,o=s.date.toUtcTime(e.start),a=s.date.toUtcTime(e.end);return(i(o,n,r)||i(a,n,r)||i(n,o,a)||i(r,o,a))&&(!i(a,n,n)||i(a,o,o)||e.isAllDay)},_updateAllDayHeaderHeight:function(e){var t,n;if(this._height!==e&&(this._height=e,t=this.element.find(".k-scheduler-header-all-day td"),t.length))for(t.parent().add(this.element.find(".k-scheduler-times-all-day").parent()).height(e),n=0;this.groups.length>n;n++)this.groups[n].refresh()},_renderEvents:function(e,t){var n,i,r,a,s,l,c,d,u,h,p,f,m,v,_,y=this.datesHeader.find(".k-scheduler-header-wrap > div");for(i=0,r=e.length;r>i;i++)if(n=e[i],this._isInDateSlot(n))if(a=n.isAllDay||n.end.getTime()-n.start.getTime()>=g,s=a&&!this._isVerticallyGrouped()?y:this.content,a)this.options.allDaySlot&&(d=this.groups[t],d._continuousEvents||(d._continuousEvents=[]),c=d.slotRanges(n),c.length&&(l=this._createEventElement(n,!a),this._positionAllDayEvent(l,c[0]),o(d,c[0],l,!0),l.appendTo(s)));else if(this._isInTimeSlot(n))for(d=this.groups[t],d._continuousEvents||(d._continuousEvents=[]),c=d.slotRanges(n),u=c.length,h=0;u>h;h++)p=c[h],f=n.start,m=n.end,u>1&&(0===h?m=p.end.endDate():h==u-1?f=p.start.startDate():(f=p.start.startDate(),m=p.end.endDate())),v=n.clone({start:f,end:m,startTime:n.startTime,endTime:n.endTime}),this._isInTimeSlot(v)&&(_=p.head,l=this._createEventElement(n,!a,_,p.tail),l.appendTo(s),this._positionEvent(v,l,p),o(d,p,l,!1))},render:function(t){var n,r,o,a,l;for(this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),t=new s.data.Query(t).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray(),n=[],this._eventsByResource(t,this.groupedResources,n),r=this,o=e.map(this._dates,function(t){return Math.max.apply(null,e.map(n,function(n){return e.grep(n,function(e){return e.isMultiDay()&&i(t,p(e.start),p(e.end))}).length}))}),a=Math.max.apply(null,o),this._updateAllDayHeaderHeight((a+1)*this._allDayHeaderHeight),l=0;n.length>l;l++)this._renderEvents(n[l],l);this.refreshLayout(),this.trigger("activate")},_eventsByResource:function(e,t,n){var i,r,o,a,l=t[0];if(l)for(i=l.dataSource.view(),r=0;i.length>r;r++)o=this._resourceValue(l,i[r]),a=new s.data.Query(e).filter({field:l.field,operator:d.groupEqFilter(o)}).toArray(),t.length>1?this._eventsByResource(a,t.slice(1),n):n.push(a);else n.push(e)},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},clearSelection:function(){this.content.add(this.datesHeader).find(".k-state-selected").removeAttr("id").attr("aria-selected",!1).removeClass("k-state-selected")},_updateDirection:function(e,t,n,i,r){var o=e.isAllDay,a=t[0].start,s=t[t.length-1].end;n&&(r?o||a.index!==s.index||a.collectionIndex!==s.collectionIndex||(e.backward=i):(o&&a.index===s.index||!o&&a.collectionIndex===s.collectionIndex)&&(e.backward=i))},_changeViewPeriod:function(e,n,i){var r,o,a,s;return i?t:(r=n?this.previousDate():this.nextDate(),o=e.start,a=e.end,e.start=new Date(r),e.end=new Date(r),s=e.isAllDay?g:m(a),c(e.start,m(o)),c(e.end,s),this._isVerticallyGrouped()||(e.groupIndex=n?this.groups.length-1:0),e.events=[],!0)}});u(!0,l,{MultiDayView:x,DayView:x.extend({options:{name:"DayView",title:"Day"},name:"day"}),WeekView:x.extend({options:{name:"WeekView",title:"Week",selectedDateFormat:"{0:D} - {1:D}"},name:"week",calculateDateRange:function(){var e,t,n=this.options.date,i=s.date.dayOfWeek(n,this.calendarInfo().firstDay,-1),r=[];for(e=0,t=7;t>e;e++)r.push(i),i=s.date.nextDay(i);this._render(r)}}),WorkWeekView:x.extend({options:{name:"WorkWeekView",title:"Work Week",selectedDateFormat:"{0:D} - {1:D}"},name:"workWeek",nextDate:function(){return s.date.dayOfWeek(s.date.nextDay(this.endDate()),this.options.workWeekStart,1)},previousDate:function(){return s.date.previousDay(this.startDate())},calculateDateRange:function(){for(var e=this.options.date,t=s.date.dayOfWeek(e,this.options.workWeekStart,-1),n=s.date.dayOfWeek(t,this.options.workWeekEnd,1),i=[];n>=t;)i.push(t),t=s.date.nextDay(t);this._render(i)}})})}(window.kendo.jQuery),function(e){function t(e){var t,n,i=0;for(t=0,n=e.length;n>t;t++)i+=e[t].items.length;return i}function n(e,t){return e.valuePrimitive&&(t=o.getter(e.dataValueField)(t)),t}function i(e){for(var t,n=0,i=e.length,o=[];i>n;n++)t=e[n],t.groups?(t=r(t.groups),o=o.concat(t)):o=o.concat(r(t.items));return o}function r(e){for(var t=[].concat(e),n=t.shift(),i=[],r=[].push;n;)n.groups?r.apply(t,n.groups):n.items?r.apply(t,n.items):r.call(i,n),n=t.shift();return i}var o=window.kendo,a=o.ui,s=".kendoAgendaView",l='<div class="k-task" title="#:title.replace(/"/g,"\'")#" data-#=kendo.ns#uid="#=uid#"># if (resources[0]) {#<span class="k-scheduler-mark" style="background-color:#=resources[0].color#"></span># } ## if (data.isException()) { #<span class="k-icon k-i-exception"></span># } else if (data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #{0}#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}#</div>';a.AgendaView=a.SchedulerView.extend({init:function(t,n){a.SchedulerView.fn.init.call(this,t,n),n=this.options,n.editable&&(n.editable=e.extend({"delete":!0},n.editable,{create:!1,update:!1})),this.title=n.title,this.name="agenda",this._eventTemplate=this._eventTmpl(n.eventTemplate,l),this._dateTemplate=o.template(n.eventDateTemplate),this._groupTemplate=o.template(n.eventGroupTemplate),this._timeTemplate=o.template(n.eventTimeTemplate),this.element.on("mouseenter"+s,".k-scheduler-agenda .k-scheduler-content tr","_mouseenter").on("mouseleave"+s,".k-scheduler-agenda .k-scheduler-content tr","_mouseleave").on("click"+s,".k-scheduler-agenda .k-scheduler-content .k-link:has(.k-si-close)","_remove"),this._renderLayout(n.date)},_mouseenter:function(t){e(t.currentTarget).addClass("k-state-hover")},_mouseleave:function(t){e(t.currentTarget).removeClass("k-state-hover")},_remove:function(t){t.preventDefault(),this.trigger("remove",{uid:e(t.currentTarget).closest(".k-task").attr(o.attr("uid"))})},nextDate:function(){return o.date.nextDay(this.startDate())},startDate:function(){return this._startDate},endDate:function(){return this._endDate},previousDate:function(){return o.date.previousDay(this.startDate())},_renderLayout:function(e){this._startDate=e,this._endDate=o.date.addDays(e,7),this.createLayout(this._layout()),this.table.addClass("k-scheduler-agenda")
},_layout:function(){var e,t,n,i=[{text:this.options.messages.time,className:"k-scheduler-timecolumn"},{text:this.options.messages.event}];if(this._isMobilePhoneView()||i.splice(0,0,{text:this.options.messages.date,className:"k-scheduler-datecolumn"}),e=this.groupedResources,e.length){for(t=[],n=0;e.length>n;n++)t.push({text:"",className:"k-scheduler-groupcolumn"});i=t.concat(i)}return{columns:i}},_tasks:function(e){var t,n,i,r,a,s,l,c=[];for(t=0;e.length>t;t++)if(n=e[t],i=n.start,r=n.end,a=(o.date.getDate(r)-o.date.getDate(i))/o.date.MS_PER_DAY+1,s=n.clone(),s.startDate=o.date.getDate(i),s.startDate>=this.startDate()&&c.push(s),a>1)for(s.end=o.date.nextDay(i),s.head=!0,l=1;a>l;l++)i=s.end,s=n.clone(),s.start=i,s.startDate=o.date.getDate(i),s.end=o.date.nextDay(i),l==a-1?(s.end=new Date(s.start.getFullYear(),s.start.getMonth(),s.start.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),s.tail=!0):(s.isAllDay=!0,s.middle=!0),s.end<=this.endDate()&&s.start>=this.startDate()&&c.push(s);return new o.data.Query(c).sort([{field:"start",dir:"asc"},{field:"end",dir:"asc"}]).groupBy({field:"startDate"}).toArray()},_renderTaskGroups:function(e,t){var n,i,r,a,s,l,c,d,u,h=[],p=this.options.editable,f=p&&p.destroy!==!1&&!this._isMobile(),g=this._isMobilePhoneView();for(n=0;e.length>n;n++)for(i=e[n].value,r=e[n].items,a=o.date.isToday(i),s=0;r.length>s;s++){if(l=r[s],c=[],d=g?[]:c,0===n&&0===s&&t.length)for(u=0;t.length>u;u++)d.push(o.format('<td class="k-scheduler-groupcolumn{2}" rowspan="{0}">{1}</td>',t[u].rowSpan,this._groupTemplate({value:t[u].text}),t[u].className));0===s&&(g?(d.push(o.format('<td class="k-scheduler-datecolumn" colspan="2">{0}</td>',this._dateTemplate({date:i}))),h.push('<tr role="row" aria-selected="false"'+(a?' class="k-today">':">")+d.join("")+"</tr>")):c.push(o.format('<td class="k-scheduler-datecolumn{3}{2}" rowspan="{0}">{1}</td>',r.length,this._dateTemplate({date:i}),n!=e.length-1||t.length?"":" k-last",t.length?"":" k-first"))),l.format=l.head?"{0:t}":l.tail?"{1:t}":"{0:t}-{1:t}",l.resources=this.eventResources(l),c.push(o.format('<td class="k-scheduler-timecolumn"><div>{0}{1}{2}</div></td><td>{3}</td>',l.tail||l.middle?'<span class="k-icon k-i-arrow-w"></span>':"",this._timeTemplate(l.clone({start:l.startTime||l.start,end:l.endTime||l.end})),l.head||l.middle?'<span class="k-icon k-i-arrow-e"></span>':"",this._eventTemplate(l.clone({showDelete:f})))),h.push('<tr role="row" aria-selected="false"'+(a?' class="k-today">':">")+c.join("")+"</tr>")}return h.join("")},render:function(e){var t,n,r=this.content.find("table").empty(),o=[];e.length>0&&(t=this.groupedResources,t.length?(o=this._createGroupConfiguration(e,t,null),this._renderGroups(o,r,[])):(o=this._tasks(e),r.append(this._renderTaskGroups(o,[])))),n=this._eventsList=i(o),this._angularItems(r,n),this.refreshLayout(),this.trigger("activate")},_angularItems:function(e,t){this.angular("compile",function(){var n=[],i=t.map(function(t){return n.push({dataItem:t}),e.find(".k-task["+o.attr("uid")+"="+t.uid+"]")});return{elements:i,data:n}})},_renderGroups:function(e,t,n){var i,r,o;for(i=0,r=e.length;r>i;i++)o=n.splice(0),o.push(e[i]),e[i].groups?this._renderGroups(e[i].groups,t,o):t.append(this._renderTaskGroups(e[i].items,o))},_createGroupConfiguration:function(e,i,r){var s,l,c,d,u,h,p,f=i[0],g=[],m=f.dataSource.view(),v=this._isMobilePhoneView();for(s=0;m.length>s;s++)l=n(f,m[s]),c=new o.data.Query(e).filter({field:f.field,operator:a.SchedulerView.groupEqFilter(l)}).toArray(),c.length&&(d=this._tasks(c),u=r?"":" k-first",s===m.length-1&&(!r||r.className.indexOf("k-last")>-1)&&(u+=" k-last"),h={text:o.getter(f.dataTextField)(m[s]),value:l,rowSpan:0,className:u},i.length>1?(h.groups=this._createGroupConfiguration(c,i.slice(1),h),r&&(r.rowSpan+=h.rowSpan)):(h.items=d,p=t(h.items),v&&(p+=h.items.length),h.rowSpan=p,r&&(r.rowSpan+=p)),g.push(h));return g},selectionByElement:function(t){var n,i,r;return t=e(t),t.hasClass("k-scheduler-datecolumn")?void 0:(this._isMobile()?(r=t.parent(),n=r.parent().children().filter(function(){return e(this).children(":not(.k-scheduler-datecolumn)").length}).index(r)):n=t.parent().index(),i=this._eventsList[n],{index:n,start:i.start,end:i.end,isAllDay:i.isAllDay,uid:i.uid})},select:function(e){this.clearSelection();var t=this.table.find(".k-task").eq(e.index).closest("tr").addClass("k-state-selected").attr("aria-selected",!0)[0];this.current(t)},move:function(e,t){var n,i=!1,r=e.index;return t==o.keys.UP?(r--,i=!0):t==o.keys.DOWN&&(r++,i=!0),i&&(n=this._eventsList[r],n&&(e.start=n.start,e.end=n.end,e.isAllDay=n.isAllDay,e.events=[n.uid],e.index=r)),i},moveToEvent:function(){return!1},constrainSelection:function(e){var t=this._eventsList[0];t&&(e.start=t.start,e.end=t.end,e.isAllDay=t.isAllDay,e.events=[t.uid],e.index=0)},isInRange:function(){return!0},destroy:function(){this.element&&this.element.off(s),a.SchedulerView.fn.destroy.call(this)},options:{title:"Agenda",name:"agenda",editable:!0,selectedDateFormat:"{0:D}-{1:D}",eventTemplate:"#:title#",eventTimeTemplate:"#if(data.isAllDay) {##=this.options.messages.allDay##} else { ##=kendo.format(format, start, end)## } #",eventDateTemplate:'<strong class="k-scheduler-agendaday">#=kendo.toString(date, "dd")#</strong><em class="k-scheduler-agendaweek">#=kendo.toString(date,"dddd")#</em><span class="k-scheduler-agendadate">#=kendo.toString(date, "y")#</span>',eventGroupTemplate:'<strong class="k-scheduler-adgendagroup">#=value#</strong>',messages:{event:"Event",date:"Date",time:"Time",allDay:"all day"}}})}(window.kendo.jQuery),function(e){function t(e,t){return e.slice(t).concat(e.slice(0,t))}function n(e,t){for(var n=t.firstDay,i=new Date(e.getFullYear(),e.getMonth(),0,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());i.getDay()!=n;)r.date.setTime(i,-1*d);return i}function i(e,t,n){var i,r=t,o=n;return i=e,i>=r&&o>=i}var r=window.kendo,o=r.ui,a=o.SchedulerView,s=".kendoMonthView",l=e.extend,c=r.date.getDate,d=r.date.MS_PER_DAY,u=6,h=7,p=r.template('<span class="k-link k-nav-day">#:kendo.toString(date, "dd")#</span>'),f='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span>#}#</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-e"></span>#}#</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-w"></span>#}## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-e"></span>#}#</div>',g=r.template('<div title="#=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">#:title#</div></div>'),m=r.template('<div style="width:#=width#px;left:#=left#px;top:#=top#px" class="k-more-events k-button"><span>...</span></div>');o.MonthView=a.extend({init:function(e,t){var n=this;a.fn.init.call(n,e,t),n.title=n.options.title,n.name="month",n._templates(),n._editable(),n._renderLayout(n.options.date),n._groups()},_updateDirection:function(e,t,n,i,r){var o,a,s,l,c;n&&(o=t[0].start,a=t[t.length-1].end,s=o.index===a.index,l=o.collectionIndex===a.collectionIndex,c=r?s&&l||l:s&&l,c&&(e.backward=i))},_changeViewPeriod:function(e,t,n){var i=n?7:1;return t&&(i*=-1),e.start=r.date.addDays(e.start,i),e.end=r.date.addDays(e.end,i),(!n||n&&this._isVerticallyGrouped())&&(e.groupIndex=t?this.groups.length-1:0),e.events=[],!0},_continuousSlot:function(e,t,n){var i=e.backward?0:t.length-1,r=this.groups[e.groupIndex];return r.continuousSlot(t[i].start,n)},_changeGroupContinuously:function(e,t,n,i){var r,o,a,s;return n||(r=e.groupIndex,o=this.groups.length-1,a=this._isVerticallyGrouped(),s=this.groups[r],!t&&a?(t=s[i?"lastSlot":"firstSlot"](),r+=i?-1:1):t&&!a&&(r=i?o:0),(0>r||r>o)&&(r=i?o:0,t=null),e.groupIndex=r),t},_normalizeHorizontalSelection:function(e,t,n){var i;return i=n?t[0].start:t[t.length-1].end},_normalizeVerticalSelection:function(e,t){var n;return n=e.backward?t[0].start:t[t.length-1].end},_templates:function(){var e=this.options,t=l({},r.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,f),this.dayTemplate=r.template(e.dayTemplate,t),this.groupHeaderTemplate=r.template(e.groupHeaderTemplate,t)},dateForTitle:function(){return r.format(this.options.selectedDateFormat,this._firstDayOfMonth,this._lastDayOfMonth)},nextDate:function(){return r.date.nextDay(this._lastDayOfMonth)},previousDate:function(){return r.date.previousDay(this._firstDayOfMonth)},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_renderLayout:function(t){var i=this;this._firstDayOfMonth=r.date.firstDayOfMonth(t),this._lastDayOfMonth=r.date.lastDayOfMonth(t),this._startDate=n(t,this.calendarInfo()),this.createLayout(this._layout()),this._content(),this.refreshLayout(),this.content.on("click"+s,".k-nav-day,.k-more-events",function(t){var n=e(t.currentTarget).offset(),r=i._slotByPosition(n.left,n.top);t.preventDefault(),i.trigger("navigate",{view:"day",date:r.startDate()})})},_editable:function(){this.options.editable&&!this._isMobilePhoneView()&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+s,".k-scheduler-monthview .k-event a:has(.k-si-close)",function(n){t.trigger("remove",{uid:e(this).closest(".k-event").attr(r.attr("uid"))}),n.preventDefault()}),t.options.editable.create!==!1&&t.element.on("dblclick"+s,".k-scheduler-monthview .k-scheduler-content td",function(n){var i,r=e(n.currentTarget).offset(),o=t._slotByPosition(r.left,r.top);o&&(i=t._resourceBySlot(o),t.trigger("add",{eventInfo:l({isAllDay:!0,start:o.startDate(),end:o.startDate()},i)})),n.preventDefault()}),t.options.editable.update!==!1&&t.element.on("dblclick"+s,".k-scheduler-monthview .k-event",function(n){t.trigger("edit",{uid:e(this).closest(".k-event").attr(r.attr("uid"))}),n.preventDefault()})},_touchEditable:function(){var t=this;t.options.editable.create!==!1&&(t._addUserEvents=new r.UserEvents(t.element,{filter:".k-scheduler-monthview .k-scheduler-content td",tap:function(n){var i,r=e(n.target).offset(),o=t._slotByPosition(r.left,r.top);o&&(i=t._resourceBySlot(o),t.trigger("add",{eventInfo:l({isAllDay:!0,start:o.startDate(),end:o.startDate()},i)})),n.preventDefault()}})),t.options.editable.update!==!1&&(t._editUserEvents=new r.UserEvents(t.element,{filter:".k-scheduler-monthview .k-event",tap:function(n){0===e(n.event.target).closest("a:has(.k-si-close)").length&&(t.trigger("edit",{uid:e(n.target).closest(".k-event").attr(r.attr("uid"))}),n.preventDefault())}}))},selectionByElement:function(t){var n=e(t).offset();return this._slotByPosition(n.left,n.top)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},_content:function(){var e,t="<tbody>",n=1,i=this.groupedResources;for(i.length&&this._isVerticallyGrouped()&&(n=this._rowCountForLevel(i.length-1)),e=0;n>e;e++)t+=this._createCalendar(e);t+="</tbody>",this.content.find("table").html(t)},_createCalendar:function(e){var t,n,i,o,a=this.startDate(),s=h*u,l=h,c=[a],d="",p=1,f=this._isVerticallyGrouped(),g=this.groupedResources;for(g.length&&(f||(p=this._columnCountForLevel(g.length-1))),this._slotIndices={},t=0,n=s/l;n>t;t++){for(d+="<tr>",c.push(a),i=t*l,o=0;p>o;o++)d+=this._createRow(a,i,l,f?e:o);a=r.date.addDays(a,l),d+="</tr>"}return this._weekStartDates=c,this._endDate=r.date.previousDay(a),d},_createRow:function(e,t,n,i){var o,a=this,s=a._firstDayOfMonth,l=a._lastDayOfMonth,d=a.dayTemplate,u="",h="",p=function(){return a._resourceBySlot({groupIndex:i})};for(o=0;n>o;o++)u="",r.date.isToday(e)&&(u+="k-today"),r.date.isInDateRange(e,s,l)||(u+=" k-other-month"),h+="<td ",""!==u&&(h+='class="'+u+'"'),h+=">",h+=d({date:e,resources:p}),h+="</td>",a._slotIndices[c(e).getTime()]=t+o,e=r.date.nextDay(e);return h},_layout:function(){var n,i,r,o=this.calendarInfo(),a=this._isMobile()?o.days.namesShort:o.days.names,s=t(a,o.firstDay),l=e.map(s,function(e){return{text:e}}),c=this.groupedResources;if(c.length)if(this._isVerticallyGrouped()){for(i=[],r=0;6>r;r++)i.push({text:"<div>&nbsp;</div>",className:"k-hidden k-slot-cell"});n=this._createRowsLayout(c,i,this.groupHeaderTemplate)}else l=this._createColumnsLayout(c,l,this.groupHeaderTemplate);return{columns:l,rows:n}},_createEventElement:function(t){var n,i=this.options,o=i.editable,a=this._isMobile();return t.showDelete=o&&o.destroy!==!1&&!a,t.resizable=o&&o.resize!==!1&&!a,t.ns=r.ns,t.resources=this.eventResources(t),t.inverseColor=t.resources&&t.resources[0]?this._shouldInverseResourceColor(t.resources[0]):!1,n=e(this.eventTemplate(t)),this.angular("compile",function(){return{elements:n,data:[{dataItem:t}]}}),n},_isInDateSlot:function(e){var t=this.groups[0],n=t.firstSlot().start,o=t.lastSlot().end-1,a=r.date.toUtcTime(e.start),s=r.date.toUtcTime(e.end);return(i(a,n,o)||i(s,n,o)||i(n,a,s)||i(o,a,s))&&(!i(s,n,n)||i(s,a,a)||e.isAllDay)},_slotIndex:function(e){return this._slotIndices[c(e).getTime()]},_positionMobileEvent:function(t,n,i){var o,s,l,c,d,u,h,p=t.start;t.start.offsetLeft>t.end.offsetLeft&&(p=t.end),o=t.start.index,s=o,l=3,c=a.collidingEvents(t.events(),o,s),c.push({element:n,start:o,end:s}),d=a.createRows(c),u=t.collection.at(o),h=u.container,h||(h=e(r.format('<div class="k-events-container" style="top:{0};left:{1};width:{2}"/>',p.offsetTop+p.firstChildTop+p.firstChildHeight-3+"px",p.offsetLeft+"px",p.offsetWidth+"px")),u.container=h,this.content[0].appendChild(h[0])),l>=d.length&&(t.addEvent({element:n,start:o,end:s,groupIndex:p.groupIndex}),i._continuousEvents.push({element:n,uid:n.attr(r.attr("uid")),start:t.start,end:t.end}),h[0].appendChild(n[0]))},_positionEvent:function(t,n,i){var o,s,l,c,d,u,h,p,f,g,v,_,y,w,b,k=this.options.eventHeight,x=t.start;for(t.start.offsetLeft>t.end.offsetLeft&&(x=t.end),o=t.start.index,s=t.end.index,l=x.eventCount,c=a.collidingEvents(t.events(),o,s),d=o!==s?5:4,c.push({element:n,start:o,end:s}),u=a.createRows(c),h=0,p=Math.min(u.length,l);p>h;h++)for(f=u[h].events,g=x.offsetTop+x.firstChildHeight+h*k+3*h+"px",v=0,_=f.length;_>v;v++)f[v].element[0].style.top=g;if(u.length>l)for(y=o;s>=y;y++){if(w=t.collection,b=w.at(y),b.more)return;b.more=e(m({ns:r.ns,start:y,end:y,width:b.clientWidth-2,left:b.offsetLeft+2,top:b.offsetTop+b.firstChildHeight+l*k+3*l})),this.content[0].appendChild(b.more[0])}else t.addEvent({element:n,start:o,end:s,groupIndex:x.groupIndex}),n[0].style.width=t.innerWidth()-d+"px",n[0].style.left=x.offsetLeft+2+"px",n[0].style.height=k+"px",i._continuousEvents.push({element:n,uid:n.attr(r.attr("uid")),start:t.start,end:t.end}),this.content[0].appendChild(n[0])},_slotByPosition:function(e,t){var n,i,r=this.content.offset();for(e-=r.left,t-=r.top,t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft,e=Math.ceil(e),t=Math.ceil(t),n=0;this.groups.length>n;n++)if(i=this.groups[n].daySlotByPosition(e,t))return i;return null},_createResizeHint:function(e){var t=e.startSlot().offsetLeft,n=e.start.offsetTop,i=e.innerWidth(),r=e.start.clientHeight-2,o=a.fn._createResizeHint.call(this,t,n,i,r);o.appendTo(this.content),this._resizeHint=this._resizeHint.add(o)},_updateResizeHint:function(e,t,n,i){var o,a,s;for(this._removeResizeHint(),o=this.groups[t],a=o.ranges(n,i,!0,e.isAllDay),s=0;a.length>s;s++)this._createResizeHint(a[s]);this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(r.toString(r.timezone.toLocalDate(n),"M/dd")),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(r.toString(r.timezone.toLocalDate(i),"M/dd"))},_updateMoveHint:function(e,t,n){var i,o,a,s,l,c=r.date.toUtcTime(e.start)+n,d=c+e.duration(),u=this.groups[t],h=u.ranges(c,d,!0,e.isAllDay);for(this._removeMoveHint(),i=0;h.length>i;i++)o=h[i],a=o.startSlot(),s=o.endSlot(),l=this._createEventElement(e.clone({head:o.head,tail:o.tail})),l.css({left:a.offsetLeft+2,top:a.offsetTop+a.firstChildHeight,height:this.options.eventHeight,width:o.innerWidth()-(a.index!==s.index?5:4)}),l.addClass("k-event-drag-hint"),l.appendTo(this.content),this._moveHint=this._moveHint.add(l)},_groups:function(){var e,t,n,i,o,a,s,l,c,d,p,f,g,m,v,_,y,w=this._groupCount(),b=h,k=u;for(this.groups=[],e=0;w>e;e++)this._addResourceView(e);for(t=this.content[0].getElementsByTagName("tr"),n=0;w>n;n++)for(i=0,o=0,this._isVerticallyGrouped()&&(o=n),a=o*k;(o+1)*k>a;a++)for(s=this.groups[n],l=s.addDaySlotCollection(r.date.addDays(this.startDate(),i),r.date.addDays(this.startDate(),i+b)),c=t[a],d=c.children,p=0,c.setAttribute("role","row"),this._isVerticallyGrouped()||(p=n),f=p*b;(p+1)*b>f;f++)g=d[f],m=g.clientHeight,v=g.children.length?g.children[0].offsetHeight+3:0,_=r.date.toUtcTime(r.date.addDays(this.startDate(),i)),i++,y=Math.floor((m-v-this.options.moreButtonHeight)/(this.options.eventHeight+3)),g.setAttribute("role","gridcell"),g.setAttribute("aria-selected",!1),l.addDaySlot(g,_,_+r.date.MS_PER_DAY,y)},render:function(e){this.content.children(".k-event,.k-more-events,.k-events-container").remove(),this._groups(),e=new r.data.Query(e).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var t=this.groupedResources;t.length?this._renderGroups(e,t,0,1):this._renderEvents(e,0),this.refreshLayout(),this.trigger("activate")},_renderEvents:function(e,t){var n,i,r,o,a,s,l,c,d,u,h,p=this._isMobilePhoneView();for(i=0,r=e.length;r>i;i++)if(n=e[i],this._isInDateSlot(n))for(o=this.groups[t],o._continuousEvents||(o._continuousEvents=[]),a=o.slotRanges(n,!0),s=a.length,l=0;s>l;l++)c=a[l],d=n.start,u=n.end,s>1&&(0===l?u=c.end.endDate():l==s-1?d=c.start.startDate():(d=c.start.startDate(),u=c.end.endDate())),h=n.clone({start:d,end:u,head:c.head,tail:c.tail}),p?this._positionMobileEvent(c,this._createEventElement(h),o):this._positionEvent(c,this._createEventElement(h),o)},_renderGroups:function(e,t,n,i){var o,s,l,c,d=t[0];if(d)for(o=d.dataSource.view(),s=0;o.length>s;s++)l=this._resourceValue(d,o[s]),c=new r.data.Query(e).filter({field:d.field,operator:a.groupEqFilter(l)}).toArray(),t.length>1?n=this._renderGroups(c,t.slice(1),n++,i+1):this._renderEvents(c,n++);return n},_groupCount:function(){var e=this.groupedResources;return e.length?this._isVerticallyGrouped()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length):1},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},destroy:function(){this.table&&this.table.removeClass("k-scheduler-monthview"),this.content&&this.content.off(s),this.element&&this.element.off(s),a.fn.destroy.call(this),this._isMobile()&&!this._isMobilePhoneView()&&this.options.editable&&(this.options.editable.create!==!1&&this._addUserEvents.destroy(),this.options.editable.update!==!1&&this._editUserEvents.destroy())},events:["remove","add","edit","navigate"],options:{title:"Month",name:"month",eventHeight:25,moreButtonHeight:13,editable:!0,selectedDateFormat:"{0:y}",groupHeaderTemplate:"#=text#",dayTemplate:p,eventTemplate:g}})}(window.kendo.jQuery),function(e,t){function n(e,t){var n;return 0!==e&&t>e?n=t-e:(n=e%t,n&&(n=t-n)),n}function i(e){var t=e.getMonth(),n=m(e)?et[t]:tt[t];return n+e.getDate()}function r(e,n){var i,r;return e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),X(e,0),i=e.getFullYear(),n!==t?(Q(e,n,-1),e.setDate(e.getDate()+4)):e.setDate(e.getDate()+(4-(e.getDay()||7))),X(e,0),r=Math.floor((e.getTime()-new Date(i,0,1,-6))/864e5),1+Math.floor(r/7)}function o(e,t){var n=J(e).getDay(),i=7-(n+7-(t||7))||7;return 0>i&&(i+=7),Math.ceil((e.getDate()-i)/7)+1}function a(e,t){return e+(t>e?7:0)}function s(e,t,n){var i,r,s,l,c,d=t.offset;return d?(i=new Date(e.getFullYear(),e.getMonth()+1,0),r=o(i,n),s=a(t.day,n),l=s<a(new Date(e.getFullYear(),e.getMonth(),1).getDay(),n),c=s>a(i.getDay(),n),0>d?d=r+(d+1-(c?1:0)):l&&(d+=1),r-=c?1:0,(l?1:0)>d||d>r?null:d):o(e,n)}function l(e,t){return o(new Date(e.getFullYear(),e.getMonth()+1,0),t)}function c(e,t,n){return o(e,n)===s(e,t,n)}function d(e,t,n){for(var i,r,l,c,d=a(t.getDay(),n),u=e.length,h=[],p=0;u>p;p++)if(r=e[p],c=o(t,n),i=s(t,r,n),null!==i)if(i>c)h.push(r);else if(c===i)if(l=a(r.day,n),l>d)h.push(r);else if(d===l)return null;return h}function u(e,t,n){for(var i,r=0,o=e.length,a=[];o>r;r++){if(i=e[r],n&&(i=n(i)),t===i)return null;i>t&&a.push(i)}return a}function h(e,t){for(var n,i=0,r=e.length;r>i;i++){if(n=parseInt(e[i],10),isNaN(n)||t.start>n||n>t.end||0===n&&0>t.start)return null;e[i]=n}return e.sort(v)}function p(e){for(var n,i,r,o=0,a=e.length;a>o;o++){if(n=e[o],i=n.length,r=n.substring(i-2).toUpperCase(),r=rt[r],r===t)return null;e[o]={offset:parseInt(n.substring(0,i-2),10)||0,day:r}}return e}function f(e){for(var t,n,i=0,r=e.length,o=[];r>i;i++)t=e[i],"string"==typeof t?n=t:(n=""+it[t.day],t.offset&&(n=t.offset+n)),o.push(n);return""+o}function g(e){var t=e.getMonth();return 1===t?1===new Date(e.getFullYear(),1,29).getMonth()?29:28:nt[t]}function m(e){return e=e.getFullYear(),e%4===0&&e%100!==0||e%400===0}function v(e,t){return e-t}function _(e,t){var n,i,r=0,o=[];if(e)for(e=e.split(";"),n=e.length;n>r;r++)i=S(e[r],t),i&&o.push(i);return o}function y(t,n,i){for(var r=e.isArray(t)?t:_(t,i),o=n.getTime()-n.getMilliseconds(),a=0,s=r.length;s>a;a++)if(r[a].getTime()===o)return!0;return!1}function w(e,t){var n,i,r=0,o=[].concat(e);for(n=o.length;n>r;r++)i=o[r],i=U.timezone.convert(i,t||i.getTimezoneOffset(),"Etc/UTC"),o[r]=U.toString(i,lt);return o.join(";")+";"}function b(e,t){var n=new Date(e);switch(t.freq){case"yearly":n.setFullYear(n.getFullYear(),0,1);break;case"monthly":n.setFullYear(n.getFullYear(),n.getMonth(),1);break;case"weekly":Q(n,t.weekStart,-1)}return t.hours&&n.setHours(0),t.minutes&&n.setMinutes(0),t.seconds&&n.setSeconds(0),n}function k(e,t){var n=new Date(e);switch(t.freq){case"yearly":n.setFullYear(n.getFullYear(),11,31);break;case"monthly":n.setFullYear(n.getFullYear(),n.getMonth()+1,0);break;case"weekly":Q(n,t.weekStart,-1),n.setDate(n.getDate()+6)}return t.hours&&n.setHours(23),t.minutes&&n.setMinutes(59),t.seconds&&n.setSeconds(59),n}function x(e,t,n){var i,r,o,a,s=e.slice(n._startIdx),l=s.length,c=n.positions,d=[];for(o=0,a=c.length;a>o;o++)i=c[o],0>i?i=l+i:i-=1,r=s[i],r&&r.start>=t&&d.push(r);return e=e.slice(0,n._startIdx).concat(d),n._startIdx=e.length,e}function C(e,n,i,r){var o,a,s,l,c,d,u,h,p,f,g,m,v,C,S,T,A,E,M,P,I,z,F=D(e.recurrenceRule,r),R=[];if(!F)return[e];for(P=F.positions,I=P?0:1,f=F.start,g=F.end,(f||g)&&(e=e.clone({start:f?new Date(f.value[0]):t,end:g?new Date(g.value[0]):t})),A=e.start,T=A.getTime(),S=Z(A),C=_(e.recurrenceException,r),!C[0]&&F.exdates&&(C=F.exdates.value,e.set("recurrenceException",w(C,r))),h=n=new Date(n),i=new Date(i),v=F.freq,M=mt[v],E=F.count,F.until&&i>F.until&&(i=new Date(F.until)),m="yearly"===v||"monthly"===v||"weekly"===v,T>n||E||F.interval>1||m?n=new Date(T):(l=n.getHours(),c=n.getMinutes(),d=n.getSeconds(),F.hours||(l=A.getHours()),F.minutes||(c=A.getMinutes()),F.seconds||(d=A.getSeconds()),n.setHours(l,c,d,A.getMilliseconds())),F._startPeriod=new Date(n),P&&(n=b(n,F),i=k(i,F),z=Z(i)-Z(n),0>z&&(l=n.getHours(),i.setHours(l,n.getMinutes(),n.getSeconds(),n.getMilliseconds()),Y.adjustDST(i,l)),F._startPeriod=new Date(n),F._endPeriod=k(n,F),F._startIdx=0),u=e.duration(),F._startTime=o=Y.toInvariantTime(n),M.setup&&M.setup(F,A,n),M.limit(n,i,F);i>=n;)if(s=new Date(n),K(s,u),p=n>=h||s>h,(p&&!y(C,n,r)||P)&&(o=Y.toUtcTime(Y.getDate(n))+Z(F._startTime),a=o+u,T!==n.getTime()||S!==Z(F._startTime)?R.push(e.toOccurrence({start:new Date(n),end:s,startTime:o,endTime:a})):(e.startTime=o,e.endTime=a,R.push(e))),P){if(M.next(n,F),M.limit(n,i,F),n>F._endPeriod&&(R=x(R,A,F),F._endPeriod=k(n,F),I=R.length),E&&E===I)break}else{if(E&&E===I)break;I++,M.next(n,F),M.limit(n,i,F)}return R}function S(e,t){return e=U.parseDate(e,ot),e&&t&&(e=W.convert(e,e.getTimezoneOffset(),t)),e}function T(e,n){var i,r,o,a,s,l,c,d,u=e.split(";");for(c=0,d=u.length;d>c;c++)if(i=u[c].split(":"),r=i[0],o=i[1],-1!==r.indexOf("TZID")&&(a=r.substring(r.indexOf("TZID")).split("=")[1]),o)for(o=o.split(","),s=0,l=o.length;l>s;s++)o[s]=S(o[s],a||n);return o?{value:o,tzid:a}:t}function D(n,i){var r,o,a,s,l,c,d,u,f,g={},m=0,v=!1,_=function(e,t){var n=e.day,i=t.day;return u>n&&(n+=7),u>i&&(i+=7),n-i};if(!n)return null;for(c=n.split("\n"),c[1]||-1===n.indexOf("DTSTART")&&-1===n.indexOf("DTEND")&&-1===n.indexOf("EXDATE")||(c=n.split(" ")),m=0,a=c.length;a>m;m++)l=c[m],-1!==l.indexOf("DTSTART")?g.start=T(l,i):-1!==l.indexOf("DTEND")?g.end=T(l,i):-1!==l.indexOf("EXDATE")?g.exdates=T(l,i):s=-1!==l.indexOf("RRULE")?l.substring(6):l;for(s=s.split(";"),m=0,a=s.length;a>m;m++)switch(d=s[m],r=d.split("="),o=e.trim(r[1]).split(","),e.trim(r[0]).toUpperCase()){case"FREQ":g.freq=o[0].toLowerCase();break;case"UNTIL":g.until=S(o[0],i);break;case"COUNT":g.count=parseInt(o[0],10);break;case"INTERVAL":g.interval=parseInt(o[0],10);break;case"BYSECOND":g.seconds=h(o,{start:0,end:60}),v=!0;break;case"BYMINUTE":g.minutes=h(o,{start:0,end:59}),v=!0;break;case"BYHOUR":g.hours=h(o,{start:0,end:23}),v=!0;break;case"BYMONTHDAY":g.monthDays=h(o,{start:-31,end:31}),v=!0;break;case"BYYEARDAY":g.yearDays=h(o,{start:-366,end:366}),v=!0;break;case"BYMONTH":g.months=h(o,{start:1,end:12}),v=!0;break;case"BYDAY":g.weekDays=f=p(o),v=!0;break;case"BYWEEKNO":g.weeks=h(o,{start:-53,end:53}),v=!0;break;case"BYSETPOS":g.positions=h(o,{start:-366,end:366});break;case"WKST":g.weekStart=u=rt[o[0]]}return g.freq===t||g.count!==t&&g.until?null:(g.interval||(g.interval=1),u===t&&(g.weekStart=u=U.culture().calendar.firstDay),f&&(g.weekDays=f.sort(_)),g.positions&&!v&&(g.positions=null),g._hasRuleValue=v,g)}function A(e,t){for(var n,i=e.value,r=e.tzid||"",o=i.length,a=0;o>a;a++)n=i[a],n=W.convert(n,r||t||n.getTimezoneOffset(),"Etc/UTC"),i[a]=U.toString(n,"yyyyMMddTHHmmssZ");return r&&(r=";TZID="+r),r+":"+i.join(",")+" "}function E(e,n){var i=e.weekStart,r="FREQ="+e.freq.toUpperCase(),o=e.exdates||"",a=e.start||"",s=e.end||"",l=e.until;return e.interval>1&&(r+=";INTERVAL="+e.interval),e.count&&(r+=";COUNT="+e.count),l&&(l=W.convert(l,n||l.getTimezoneOffset(),"Etc/UTC"),r+=";UNTIL="+U.toString(l,"yyyyMMddTHHmmssZ")),e.months&&(r+=";BYMONTH="+e.months),e.weeks&&(r+=";BYWEEKNO="+e.weeks),e.yearDays&&(r+=";BYYEARDAY="+e.yearDays),e.monthDays&&(r+=";BYMONTHDAY="+e.monthDays),e.weekDays&&(r+=";BYDAY="+f(e.weekDays)),e.hours&&(r+=";BYHOUR="+e.hours),e.minutes&&(r+=";BYMINUTE="+e.minutes),e.seconds&&(r+=";BYSECOND="+e.seconds),e.positions&&(r+=";BYSETPOS="+e.positions),i!==t&&(r+=";WKST="+it[i]),a&&(a="DTSTART"+A(a,n)),s&&(s="DTEND"+A(s,n)),o&&(o="EXDATE"+A(o,n)),(a||s||o)&&(r=a+s+o+"RRULE:"+r),r}var M,P,I,z,F,R,B,L,O,H,N,V,U=window.kendo,W=U.timezone,j=U.Class,G=U.ui,q=G.Widget,$=G.DropDownList,Y=U.date,K=Y.setTime,Q=Y.setDayOfWeek,X=Y.adjustDST,J=Y.firstDayOfMonth,Z=Y.getMilliseconds,et=[0,31,60,91,121,152,182,213,244,274,305,335,366],tt=[0,31,59,90,120,151,181,212,243,273,304,334,365],nt=[31,28,30,31,30,31,30,31,30,31,30,31],it={0:"SU",1:"MO",2:"TU",3:"WE",4:"TH",5:"FR",6:"SA"},rt={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},ot=["yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-ddTHH","yyyy-MM-dd","yyyyMMddTHHmmssfffzzz","yyyyMMddTHHmmsszzz","yyyyMMddTHHmmss","yyyyMMddTHHmm","yyyyMMddTHH","yyyyMMdd"],at=["months","weeks","yearDays","monthDays","weekDays","hours","minutes","seconds"],st=at.length,lt="yyyyMMddTHHmmssZ",ct={months:function(e,t,n){var i=n.months,r=u(i,e.getMonth()+1),o=!1;return null!==r&&(r.length?e.setMonth(r[0]-1,1):e.setFullYear(e.getFullYear()+1,i[0]-1,1),o=!0),o},monthDays:function(e,t,n){for(var i,r,o,a=!1,s=e.getHours(),l=function(e){return 0>e&&(e=i+e),e};t>=e;){if(r=e.getMonth(),i=g(e),o=u(n.monthDays,e.getDate(),l),null===o)return a;if(a=!0,o.length){if(e.setMonth(r,o.sort(v)[0]),X(e,s),r===e.getMonth())break}else e.setMonth(r+1,1)}return a},yearDays:function(e,t,n){for(var r,o,a=!1,s=e.getHours(),l=function(e){return 0>e&&(e=r+e),e};t>e;){if(r=m(e)?366:365,o=u(n.yearDays,i(e),l),null===o)return a;if(a=!0,r=e.getFullYear(),o.length){e.setFullYear(r,0,o.sort(v)[0]),X(e,s);break}e.setFullYear(r+1,0,1)}return a},weeks:function(e,t,n){for(var i,o,a,s=n.weekStart,l=!1,c=e.getHours(),d=function(e){return 0>e&&(e=53+e),e};t>e;){if(o=u(n.weeks,r(e,s),d),null===o)return l;if(l=!0,i=e.getFullYear(),o.length){a=7*o.sort(v)[0]-1,e.setFullYear(i,0,a),Q(e,s,-1),X(e,c);break}e.setFullYear(i+1,0,1)}return l},weekDays:function(e,t,n){var i,r,a=n.weekDays,s=n.weekStart,u=d(a,e,s),h=e.getHours();if(null===u)return!1;if(i=u[0],i||(i=a[0],Q(e,s)),r=i.day,i.offset)for(;t>=e&&!c(e,i,s);)o(e,s)===l(e,s)?(e.setMonth(e.getMonth()+1,1),X(e,h)):(e.setDate(e.getDate()+7),X(e,h),Q(e,s,-1));return e.getDay()!==r&&Q(e,r),!0},hours:function(e,t,n){var i=n.hours,r=n._startTime,o=r.getHours(),a=u(i,o),s=!1;return null!==a&&(s=!0,e.setHours(o),X(e,o),a.length?(a=a[0],e.setHours(a)):(a=e.getHours(),e.setDate(e.getDate()+1),X(e,a),a=i[0],e.setHours(a),X(e,a)),n.minutes&&e.setMinutes(0),r.setHours(a,e.getMinutes())),s},minutes:function(e,t,n){var i=n.minutes,r=e.getMinutes(),o=u(i,r),a=n._startTime.getHours(),s=!1;return null!==o&&(s=!0,o.length?o=o[0]:(a+=1,o=i[0]),n.seconds&&e.setSeconds(0),e.setHours(a,o),a%=24,X(e,a),n._startTime.setHours(a,o,e.getSeconds())),s},seconds:function(e,t,n){var i=n.seconds,r=n._startTime.getHours(),o=u(i,e.getSeconds()),a=e.getMinutes(),s=!1;return null!==o&&(s=!0,o.length?e.setSeconds(o[0]):(a+=1,e.setMinutes(a,i[0]),a>59&&(a%=60,r=(r+1)%24)),n._startTime.setHours(r,a,e.getSeconds())),s}},dt=j.extend({next:function(e,t){var n,i,r=t._startTime,o=r.getDate();if(t.seconds)i=e.getSeconds()+1,e.setSeconds(i),r.setSeconds(i),r.setDate(o);else{if(!t.minutes)return!1;n=e.getMinutes()+1,e.setMinutes(n),r.setMinutes(n),r.setDate(o)}return!0},normalize:function(e){var t=e.rule;4===e.idx&&t.hours&&(t._startTime.setHours(0),this._hour(e.date,t))},limit:function(e,n,i){for(var r,o,a,s,l,c=i.interval;n>=e;){for(a=o=t,l=e.getDate(),s=0;st>s;s++){if(r=at[s],i[r]){if(a=ct[r](e,n,i),o!==t&&a)break;o=a}a&&this.normalize({date:e,rule:i,day:l,idx:s})}if((1===c||!this.interval(i,e))&&s===st)break}},interval:function(e,t){var i,o,a=new Date(e._startPeriod),s=new Date(t),l=t.getHours(),c=e.weekStart,d=e.interval,u=e.freq,h=!1,p=0,f=0,g=1;return"hourly"===u?(i=s.getTimezoneOffset()-a.getTimezoneOffset(),o=e._startTime.getHours(),s=s.getTime(),l!==o&&(s+=(o-l)*Y.MS_PER_HOUR),s-=a,i&&(s-=i*Y.MS_PER_MINUTE),i=Math.floor(s/Y.MS_PER_HOUR),p=n(i,d),0!==p&&(this._hour(t,e,p),h=!0)):"daily"===u?(Y.setTime(s,-a),i=Math.floor(s/Y.MS_PER_DAY),p=n(i,d),0!==p&&(this._date(t,e,p),h=!0)):"weekly"===u?(i=52*(t.getFullYear()-a.getFullYear()),p=r(t,c)-r(a,c)+i,p=n(p,d),0!==p&&(Y.setDayOfWeek(t,e.weekStart,-1),t.setDate(t.getDate()+7*p),X(t,l),h=!0)):"monthly"===u?(i=t.getFullYear()-a.getFullYear(),i=t.getMonth()-a.getMonth()+12*i,p=n(i,d),0!==p&&(g=e._hasRuleValue?1:t.getDate(),t.setFullYear(t.getFullYear(),t.getMonth()+p,g),X(t,l),h=!0)):"yearly"===u&&(i=t.getFullYear()-a.getFullYear(),p=n(i,d),e.months||(f=t.getMonth()),e.yearDays||e.monthDays||e.weekDays||(g=t.getDate()),0!==p&&(t.setFullYear(t.getFullYear()+p,f,g),X(t,l),h=!0)),h},_hour:function(e,t,n){var i=t._startTime,r=i.getHours();n&&(r+=n),e.setHours(r),r%=24,i.setHours(r),X(e,r)},_date:function(e,t,n){var i=e.getHours();e.setDate(e.getDate()+n),X(e,i)||this._hour(e,t)}}),ut=dt.extend({next:function(e,t){dt.fn.next(e,t)||this._hour(e,t,1)
},normalize:function(e){var t=e.rule;4===e.idx&&(t._startTime.setHours(0),this._hour(e.date,t))}}),ht=dt.extend({next:function(e,t){dt.fn.next(e,t)||this[t.hours?"_hour":"_date"](e,t,1)}}),pt=ht.extend({setup:function(e,t){e.weekDays||(e.weekDays=[{day:t.getDay(),offset:0}])}}),ft=dt.extend({next:function(e,t){var n,i;if(!dt.fn.next(e,t))if(t.hours)this._hour(e,t,1);else if(t.monthDays||t.weekDays||t.yearDays||t.weeks)this._date(e,t,1);else{for(n=e.getDate(),i=e.getHours(),e.setMonth(e.getMonth()+1),X(e,i);e.getDate()!==n;)e.setDate(n),X(e,i);this._hour(e,t)}},normalize:function(e){var t=e.rule,n=e.date,i=n.getHours();0!==e.idx||t.monthDays||t.weekDays?dt.fn.normalize(e):(n.setDate(e.day),X(n,i))},setup:function(e,t,n){e.monthDays||e.weekDays||n.setDate(t.getDate())}}),gt=ft.extend({next:function(e,t){var n,i=e.getHours();if(!dt.fn.next(e,t))if(t.hours)this._hour(e,t,1);else if(t.monthDays||t.weekDays||t.yearDays||t.weeks)this._date(e,t,1);else if(t.months){for(n=e.getDate(),e.setMonth(e.getMonth()+1),X(e,i);e.getDate()!==n;)e.setDate(n),X(e,i);this._hour(e,t)}else e.setFullYear(e.getFullYear()+1),X(e,i),this._hour(e,t)},setup:function(){}}),mt={hourly:new ut,daily:new ht,weekly:new pt,monthly:new ft,yearly:new gt},vt="click";U.recurrence={rule:{parse:D,serialize:E},expand:C,dayInYear:i,weekInYear:r,weekInMonth:o,numberOfWeeks:l,isException:y,toExceptionString:w},M=function(e){for(var t=U.culture().calendar.days.namesShort,n=t.length,i="",r=0,o=[];n>r;r++)o.push(r);for(t=t.slice(e).concat(t.slice(0,e)),o=o.slice(e).concat(o.slice(0,e)),r=0;n>r;r++)i+='<label class="k-check"><input class="k-recur-weekday-checkbox" type="checkbox" value="'+o[r]+'" /> '+t[r]+"</label>";return i},P=U.template('# if (frequency !== "never") { #<div class="k-edit-label"><label>#:messages.repeatEvery#</label></div><div class="k-edit-field"><input class="k-recur-interval"/>#:messages.interval#</div># } ## if (frequency === "weekly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field">#=weekDayCheckBoxes(firstWeekDay)#</div># } else if (frequency === "monthly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field"><ul class="k-reset"><li><label><input class="k-recur-month-radio" type="radio" name="month" value="monthday" />#:messages.day#</label><input class="k-recur-monthday" /></li><li><input class="k-recur-month-radio" type="radio" name="month" value="weekday" /><input class="k-recur-weekday-offset" /><input class="k-recur-weekday" /></li></ul></div># } else if (frequency === "yearly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field"><ul class="k-reset"><li><input class="k-recur-year-radio" type="radio" name="year" value="monthday" /><input class="k-recur-month" /><input class="k-recur-monthday" /></li><li><input class="k-recur-year-radio" type="radio" name="year" value="weekday" /><input class="k-recur-weekday-offset" /><input class="k-recur-weekday" />#:messages.of#<input class="k-recur-month" /></li></ul></div># } ## if (frequency !== "never") { #<div class="k-edit-label"><label>#:end.label#</label></div><div class="k-edit-field"><ul class="k-reset"><li><label><input class="k-recur-end-never" type="radio" name="end" value="never" />#:end.never#</label></li><li><label><input class="k-recur-end-count" type="radio" name="end" value="count" />#:end.after#</label><input class="k-recur-count" />#:end.occurrence#</li><li><label><input class="k-recur-end-until" type="radio" name="end" value="until" />#:end.on#</label><input class="k-recur-until" /></li></ul></div># } #'),I=[{day:0,offset:0},{day:1,offset:0},{day:2,offset:0},{day:3,offset:0},{day:4,offset:0},{day:5,offset:0},{day:6,offset:0}],z=[{day:1,offset:0},{day:2,offset:0},{day:3,offset:0},{day:4,offset:0},{day:5,offset:0}],F=[{day:0,offset:0},{day:6,offset:0}],R=q.extend({init:function(e,t){var n,i=this,r=t&&t.frequencies;q.fn.init.call(i,e,t),i.wrapper=i.element,t=i.options,t.start=n=t.start||Y.today(),r&&(t.frequencies=r),"string"==typeof n&&(t.start=U.parseDate(n,"yyyyMMddTHHmmss")),null===t.firstWeekDay&&(t.firstWeekDay=U.culture().calendar.firstDay),i._namespace="."+t.name},options:{value:"",start:"",timezone:"",spinners:!0,firstWeekDay:null,frequencies:["never","daily","weekly","monthly","yearly"],mobile:!1,messages:{frequencies:{never:"Never",hourly:"Hourly",daily:"Daily",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly"},hourly:{repeatEvery:"Repeat every: ",interval:" hour(s)"},daily:{repeatEvery:"Repeat every: ",interval:" day(s)"},weekly:{interval:" week(s)",repeatEvery:"Repeat every: ",repeatOn:"Repeat on: "},monthly:{repeatEvery:"Repeat every: ",repeatOn:"Repeat on: ",interval:" month(s)",day:"Day "},yearly:{repeatEvery:"Repeat every: ",repeatOn:"Repeat on: ",interval:" year(s)",of:" of "},end:{label:"End:",mobileLabel:"Ends",never:"Never",after:"After ",occurrence:" occurrence(s)",on:"On "},offsetPositions:{first:"first",second:"second",third:"third",fourth:"fourth",last:"last"},weekdays:{day:"day",weekday:"weekday",weekend:"weekend day"}}},events:["change"],_initInterval:function(){var e=this,t=e._value;e._container.find(".k-recur-interval").kendoNumericTextBox({spinners:e.options.spinners,value:t.interval||1,decimals:0,format:"#",min:1,change:function(){t.interval=this.value(),e._trigger()}})},_weekDayRule:function(e){var t=this,n=(t._weekDay.element||t._weekDay).val(),i=+(t._weekDayOffset.element||t._weekDayOffset).val(),r=null,o=null;e||("day"===n?(r=I,o=i):"weekday"===n?(r=z,o=i):"weekend"===n?(r=F,o=i):r=[{offset:i,day:+n}]),t._value.weekDays=r,t._value.positions=o},_weekDayView:function(){var e,t,n,i,r=this,o=r._value.weekDays,a=r._value.positions,s=r._weekDayOffset;o&&(n=o.length,a&&(7===n?(t="day",e=a):5===n?(t="weekday",e=a):2===n&&(t="weekend",e=a)),t||(o=o[0],t=o.day,e=o.offset||""),i=s.value?"value":"val",s[i](e),r._weekDay[i](t))},_initWeekDay:function(){var t,n=this,i=n.options.messages.weekdays,r=n.options.messages.offsetPositions,o=n._container.find(".k-recur-weekday"),a=function(){n._weekDayRule(),n._trigger()};o[0]&&(n._weekDayOffset=new $(n._container.find(".k-recur-weekday-offset"),{change:a,dataTextField:"text",dataValueField:"value",dataSource:[{text:r.first,value:"1"},{text:r.second,value:"2"},{text:r.third,value:"3"},{text:r.fourth,value:"4"},{text:r.last,value:"-1"}]}),t=[{text:i.day,value:"day"},{text:i.weekday,value:"weekday"},{text:i.weekend,value:"weekend"}],n._weekDay=new $(o,{value:n.options.start.getDay(),change:a,dataTextField:"text",dataValueField:"value",dataSource:t.concat(e.map(U.culture().calendar.days.names,function(e,t){return{text:e,value:t}}))}),n._weekDayView())},_initWeekDays:function(){var t,n,i,r,o,a=this,s=a._value,l=a._container.find(".k-recur-weekday-checkbox");if(l[0]&&(l.on(vt+a._namespace,function(){s.weekDays=e.map(l.filter(":checked"),function(e){return{day:+e.value,offset:0}}),a.options.mobile||a._trigger()}),s.weekDays))for(i=0,r=l.length,o=s.weekDays.length;r>i;i++)for(n=l[i],t=0;o>t;t++)n.value==s.weekDays[t].day&&(n.checked=!0)},_initMonthDay:function(){var e=this,t=e._value,n=e._container.find(".k-recur-monthday");n[0]&&(e._monthDay=new U.ui.NumericTextBox(n,{spinners:e.options.spinners,min:1,max:31,decimals:0,format:"#",value:t.monthDays?t.monthDays[0]:e.options.start.getDate(),change:function(){var n=this.value();t.monthDays=n?[n]:n,e._trigger()}}))},_initCount:function(){var e=this,t=e._container.find(".k-recur-count"),n=e._value;e._count=t.kendoNumericTextBox({spinners:e.options.spinners,value:n.count||1,decimals:0,format:"#",min:1,change:function(){n.count=this.value(),e._trigger()}}).data("kendoNumericTextBox")},_initUntil:function(){var e=this,t=e._container.find(".k-recur-until"),n=e.options.start,i=e._value,r=i.until;e._until=t.kendoDatePicker({min:r&&n>r?r:n,value:r||n,change:function(){i.until=this.value(),e._trigger()}}).data("kendoDatePicker")},_trigger:function(){this.options.mobile||this.trigger("change")}}),B=R.extend({init:function(e,t){var n=this;R.fn.init.call(n,e,t),n._initFrequency(),n._initContainer(),n.value(n.options.value)},options:{name:"RecurrenceEditor"},events:["change"],destroy:function(){var e=this;e._frequency.destroy(),e._container.find("input[type=radio],input[type=checkbox]").off(vt+e._namespace),U.destroy(e._container),R.fn.destroy.call(e)},value:function(e){var n=this,i=n.options.timezone;return e===t?n._value.freq?E(n._value,i):"":(n._value=D(e,i)||{},n._frequency.value(n._value.freq||""),n._initView(n._frequency.value()),t)},_initContainer:function(){var t=this.element,n=e('<div class="k-recur-view" />'),i=t.parent(".k-edit-field");i[0]?n.insertAfter(i):t.append(n),this._container=n},_initFrequency:function(){var t,n=this,i=n.options,r=i.frequencies,o=i.messages.frequencies,a=e("<input />");r=e.map(r,function(e){return{text:o[e],value:e}}),t=r[0],t&&"never"===t.value&&(t.value=""),n.element.append(a),n._frequency=new $(a,{dataTextField:"text",dataValueField:"value",dataSource:r,change:function(){n._value={},n._initView(n._frequency.value()),n.trigger("change")}})},_initView:function(e){var n=this,i=n._value,r=n.options,o={frequency:e||"never",weekDayCheckBoxes:M,firstWeekDay:r.firstWeekDay,messages:r.messages[e],end:r.messages.end};return U.destroy(n._container),n._container.html(P(o)),e?(i.freq=e,"weekly"!==e||i.weekDays||(i.weekDays=[{day:r.start.getDay(),offset:0}]),n._initInterval(),n._initWeekDays(),n._initMonthDay(),n._initWeekDay(),n._initMonth(),n._initCount(),n._initUntil(),n._period(),n._end(),t):(n._value={},t)},_initMonth:function(){var t,n=this,i=n._value,r=i.months||[n.options.start.getMonth()+1],o=n._container.find(".k-recur-month");o[0]&&(t={change:function(){i.months=[+this.value()],n.trigger("change")},dataTextField:"text",dataValueField:"value",dataSource:e.map(U.culture().calendar.months.names,function(e,t){return{text:e,value:t+1}})},n._month1=new $(o[0],t),n._month2=new $(o[1],t),r&&(r=r[0],n._month1.value(r),n._month2.value(r)))},_end:function(){var e,t=this,n=t._value,i=t._container,r=t._namespace,o=function(e){t._toggleEnd(e.currentTarget.value),t.trigger("change")};t._buttonNever=i.find(".k-recur-end-never").on(vt+r,o),t._buttonCount=i.find(".k-recur-end-count").on(vt+r,o),t._buttonUntil=i.find(".k-recur-end-until").on(vt+r,o),n.count?e="count":n.until&&(e="until"),t._toggleEnd(e)},_period:function(){var e=this,t=e._value,n="monthly"===t.freq,i=n?e._toggleMonthDay:e._toggleYear,r=".k-recur-"+(n?"month":"year")+"-radio",o=e._container.find(r);(n||"yearly"===t.freq)&&(o.on(vt+e._namespace,function(t){i.call(e,t.currentTarget.value),e.trigger("change")}),e._buttonMonthDay=o.eq(0),e._buttonWeekDay=o.eq(1),i.call(e,t.weekDays?"weekday":"monthday"))},_toggleEnd:function(e){var t,n,i,r,o=this;"count"===e?(o._buttonCount.prop("checked",!0),i=!0,r=!1,t=o._count.value(),n=null):"until"===e?(o._buttonUntil.prop("checked",!0),i=!1,r=!0,t=null,n=o._until.value()):(o._buttonNever.prop("checked",!0),i=r=!1,t=n=null),o._count.enable(i),o._until.enable(r),o._value.count=t,o._value.until=n},_toggleMonthDay:function(e){var t,n=this,i=!1,r=!0,o=!1;"monthday"===e?(n._buttonMonthDay.prop("checked",!0),t=[n._monthDay.value()],i=!0,r=!1,o=!0):(n._buttonWeekDay.prop("checked",!0),t=null),n._weekDay.enable(r),n._weekDayOffset.enable(r),n._monthDay.enable(i),n._value.monthDays=t,n._weekDayRule(o)},_toggleYear:function(e){var t,n=this,i=!1,r=!0;"monthday"===e?(i=!0,r=!1,t=n._month1.value()):t=n._month2.value(),n._month1.enable(i),n._month2.enable(r),n._value.months=[t],n._toggleMonthDay(e)}}),G.plugin(B),L=U.template('<div class="k-edit-label"><label>#:headerTitle#</label></div><div class="k-edit-field k-recur-pattern k-scheduler-toolbar"></div><div class="k-recur-view"></div>'),O=U.template('# if (frequency !== "never") { #<div class="k-edit-label"><label>#:messages.repeatEvery#</label></div><div class="k-edit-field"><input class="k-recur-interval" pattern="\\\\d*"/>#:messages.interval#</div># } ## if (frequency === "weekly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field">#=weekDayCheckBoxes(firstWeekDay)#</div># } else if (frequency === "monthly") { #<div class="k-edit-label"><label>#:messages.repeatBy#</label></div><div class="k-edit-field k-scheduler-toolbar k-repeat-rule"></div><div class="k-monthday-view" style="display:none"><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><input class="k-recur-monthday" pattern="\\\\d*"/></div></div><div class="k-weekday-view" style="display:none"><div class="k-edit-label"><label>#:messages.every#</label></div><div class="k-edit-field"><select class="k-recur-weekday-offset"></select></div><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><select class="k-recur-weekday"></select></div></div># } else if (frequency === "yearly") { #<div class="k-edit-label"><label>#:messages.repeatBy#</label></div><div class="k-edit-field k-scheduler-toolbar k-repeat-rule"></div><div class="k-monthday-view" style="display:none"><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><input class="k-recur-monthday" pattern="\\\\d*"/></div></div><div class="k-weekday-view" style="display:none"><div class="k-edit-label"><label>#:messages.every#</label></div><div class="k-edit-field"><select class="k-recur-weekday-offset"></select></div><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><select class="k-recur-weekday"></select></div></div><div class="k-edit-label"><label>#:messages.month#</label></div><div class="k-edit-field"><select class="k-recur-month"></select></div># } #'),H=U.template('# if (endPattern === "count") { #<div class="k-edit-label"><label>#:messages.after#</label></div><div class="k-edit-field"><input class="k-recur-count" pattern="\\\\d*" /></div># } else if (endPattern === "until") { #<div class="k-edit-label"><label>#:messages.on#</label></div><div class="k-edit-field"><input type="date" class="k-recur-until" /></div># } #'),N=U.template('<ul class="k-reset k-header k-scheduler-navigation">#for (var i = 0, length = dataSource.length; i < length; i++) {#<li class="k-state-default #= value === dataSource[i].value ? "k-state-selected" : "" #"><a role="button" href="\\#" class="k-link" data-#=ns#value="#=dataSource[i].value#">#:dataSource[i].text#</a></li>#}#</ul>'),V=R.extend({init:function(e,t){var n=this;R.fn.init.call(n,e,t),t=n.options,n._optionTemplate=U.template('<option value="#:value#">#:text#</option>'),n.value(t.value),n._pane=t.pane,n._initRepeatButton(),n._initRepeatEnd(),n._defaultValue=n._value},options:{name:"MobileRecurrenceEditor",animations:{left:"slide",right:"slide:right"},mobile:!0,messages:{cancel:"Cancel",update:"Save",endTitle:"Repeat ends",repeatTitle:"Repeat pattern",headerTitle:"Repeat event",end:{patterns:{never:"Never",after:"After...",on:"On..."},never:"Never",after:"End repeat after",on:"End repeat on"},daily:{interval:""},hourly:{interval:""},weekly:{interval:""},monthly:{interval:"",repeatBy:"Repeat by: ",dayOfMonth:"Day of the month",dayOfWeek:"Day of the week",repeatEvery:"Repeat every",every:"Every",day:"Day "},yearly:{interval:"",repeatBy:"Repeat by: ",dayOfMonth:"Day of the month",dayOfWeek:"Day of the week",repeatEvery:"Repeat every: ",every:"Every",month:"Month",day:"Day"}}},events:["change"],value:function(e){var n=this,i=n.options.timezone;return e===t?n._value.freq?E(n._value,i):"":(n._value=D(e,i)||{},t)},destroy:function(){this._destroyView(),U.destroy(this._endFields),this._repeatButton.off(vt+this._namespace),R.fn.destroy.call(this)},_initRepeatButton:function(){var t=this,n=t.options.messages.frequencies[this._value.freq||"never"];t._repeatButton=e('<a href="#" class="k-button k-scheduler-recur">'+n+"</a>").on(vt+t._namespace,function(e){e.preventDefault(),t._createView("repeat"),t._pane.navigate("recurrence",t.options.animations.left)}),t.element.append(t._repeatButton)},_initRepeatEnd:function(){var t=this,n=e('<div class="k-edit-label"><label>'+t.options.messages.end.mobileLabel+"</label></div>").insertAfter(t.element.parent(".k-edit-field")),i=e('<div class="k-edit-field"><a href="#" class="k-button k-scheduler-recur-end"></a></div>').on(vt+t._namespace,function(e){e.preventDefault(),t._value.freq&&(t._createView("end"),t._pane.navigate("recurrence",t.options.animations.left))}).insertAfter(n);t._endFields=n.add(i).toggleClass("k-state-disabled",!t._value.freq),t._endButton=i.find(".k-scheduler-recur-end").text(t._endText())},_endText:function(){var e=this._value,t=this.options.messages.end,n=t.never;return e.count?n=U.format("{0} {1}",t.after,e.count):e.until&&(n=U.format("{0} {1:d}",t.on,e.until)),n},_initFrequency:function(){var t=this,n=t.options.messages.frequencies,i=N({dataSource:e.map(this.options.frequencies,function(e){return{text:n[e],value:"never"!==e?e:""}}),value:t._value.freq||"",ns:U.ns});t._view.element.find(".k-recur-pattern").append(i).on(vt+t._namespace,".k-scheduler-navigation li",function(n){var i=e(this);n.preventDefault(),i.addClass("k-state-selected").siblings().removeClass("k-state-selected"),t._value={freq:i.children("a").attr(U.attr("value"))},t._initRepeatView()})},_initEndNavigation:function(){var t,n=this,i=n.options.messages.end.patterns,r=n._value,o="";r.count?o="count":r.until&&(o="until"),t=N({dataSource:[{text:i.never,value:""},{text:i.after,value:"count"},{text:i.on,value:"until"}],value:o,ns:U.ns}),n._view.element.find(".k-recur-pattern").append(t).on(vt+n._namespace,".k-scheduler-navigation li",function(t){var i=e(this),o=null,a=null;t.preventDefault(),i.addClass("k-state-selected").siblings().removeClass("k-state-selected"),n._initEndView(i.children("a").attr(U.attr("value"))),n._count?(o=n._count.value(),a=null):n._until&&(o=null,a=n._until.val?U.parseDate(n._until.val(),"yyyy-MM-dd"):n._until.value()),r.count=o,r.until=a})},_createView:function(t){var n=this,i=n.options,r=i.messages,o=r["repeat"===t?"repeatTitle":"endTitle"],a='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list" id="recurrence"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+r.cancel+"</a>"+r.headerTitle+'<a href="#" class="k-button k-scheduler-update">'+r.update+"</a></div>",s=n._pane.view().id;n._view=n._pane.append(a+L({headerTitle:o})),n._view.element.on(vt+n._namespace,"a.k-scheduler-cancel, a.k-scheduler-update",function(t){t.preventDefault(),t.stopPropagation(),e(this).hasClass("k-scheduler-update")?(n.trigger("change"),n._defaultValue=e.extend({},n._value)):n._value=n._defaultValue;var i=n._value.freq;n._endButton.text(n._endText()),n._endFields.toggleClass("k-state-disabled",!i),n._repeatButton.text(r.frequencies[i||"never"]),n._pane.one("viewShow",function(){n._destroyView()}),n._pane.navigate(s,n.options.animations.right)}),n._container=n._view.element.find(".k-recur-view"),"repeat"===t?(n._initFrequency(),n._initRepeatView()):(n._initEndNavigation(),n._initEndView())},_destroyView:function(){this._view&&(this._view.destroy(),this._view.element.remove()),this._view=null},_initRepeatView:function(){var e=this,n=e._value.freq||"never",i={frequency:n,weekDayCheckBoxes:M,firstWeekDay:e.options.firstWeekDay,messages:e.options.messages[n]},r=O(i),o=e._container,a=e._value;return U.destroy(o),o.html(r),r?("weekly"!==n||a.weekDays||(a.weekDays=[{day:e.options.start.getDay(),offset:0}]),e._initInterval(),e._initMonthDay(),e._initWeekDays(),e._initWeekDay(),e._initMonth(),e._period(),t):(e._value={},t)},_initEndView:function(e){var n,i=this,r=i._value;e===t&&(r.count?e="count":r.until&&(e="until")),n={endPattern:e,messages:i.options.messages.end},U.destroy(i._container),i._container.html(H(n)),i._initCount(),i._initUntil()},_initWeekDay:function(){var t,n=this,i=n.options.messages.weekdays,r=n.options.messages.offsetPositions,o=n._container.find(".k-recur-weekday"),a=function(){n._weekDayRule(),n.trigger("change")};o[0]&&(n._weekDayOffset=n._container.find(".k-recur-weekday-offset").html(n._options([{text:r.first,value:"1"},{text:r.second,value:"2"},{text:r.third,value:"3"},{text:r.fourth,value:"4"},{text:r.last,value:"-1"}])).change(a),t=[{text:i.day,value:"day"},{text:i.weekday,value:"weekday"},{text:i.weekend,value:"weekend"}],t=t.concat(e.map(U.culture().calendar.days.names,function(e,t){return{text:e,value:t}})),n._weekDay=o.html(n._options(t)).change(a).val(n.options.start.getDay()),n._weekDayView())},_initMonth:function(){var t,n=this,i=n._value,r=n.options.start,o=i.months||[r.getMonth()+1],a=n._container.find(".k-recur-month"),s=U.culture().calendar.months.names;a[0]&&(t=e.map(s,function(e,t){return{text:e,value:t+1}}),a.html(n._options(t)).change(function(){i.months=[+this.value]}),n._monthSelect=a,o&&a.val(o[0]))},_period:function(){var t,n,i,r=this,o=r._value,a=r._container,s=r.options.messages[o.freq],l=a.find(".k-repeat-rule"),c=a.find(".k-weekday-view"),d=a.find(".k-monthday-view");l[0]&&(t=o.weekDays?"weekday":"monthday",n=N({value:t,dataSource:[{text:s.dayOfMonth,value:"monthday"},{text:s.dayOfWeek,value:"weekday"}],ns:U.ns}),i=function(e){var t=r._weekDay.val(),n=r._weekDayOffset.val(),i=r._monthDay.value(),a=r._monthSelect?r._monthSelect.val():null;"monthday"===e?(o.weekDays=null,o.monthDays=i?[i]:i,o.months=a?[+a]:a,c.hide(),d.show()):(o.monthDays=null,o.months=a?[+a]:a,o.weekDays=[{offset:+n,day:+t}],c.show(),d.hide())},l.append(n).on(vt+r._namespace,".k-scheduler-navigation li",function(t){var n,r=e(this).addClass("k-state-selected");t.preventDefault(),r.siblings().removeClass("k-state-selected"),n=r.children("a").attr(U.attr("value")),i(n)}),i(t))},_initUntil:function(){var e=this,t=e._container.find(".k-recur-until"),n=e.options.start,i=e._value,r=i.until,o=r&&n>r?r:n;e._until=U.support.input.date?t.attr("min",U.toString(o,"yyyy-MM-dd")).val(U.toString(r||n,"yyyy-MM-dd")).on("change",function(){i.until=U.parseDate(this.value,"yyyy-MM-dd")}):t.kendoDatePicker({min:o,value:r||n,change:function(){i.until=this.value()}}).data("kendoDatePicker")},_options:function(e,t){var n=0,i="",r=e.length,o=this._optionTemplate;for(t&&(i+=o({value:"",text:t}));r>n;n++)i+=o(e[n]);return i}}),G.plugin(V)}(window.kendo.jQuery),function(e,t){function n(e){var t=new Date(1980,1,1,0,0,0);return l(t,p(e)),t}function i(e,t,n){return e>=t&&n>=e}function r(e){var t=[],n=e.workWeekStart;for(t.push(n);e.workWeekEnd!=n;)n>6?n-=7:n++,t.push(n);return t}function o(e){var t,n=0;if(e.columns){for(t=0;e.columns.length>t;t++)n+=o(e.columns[t]);return e.colspan=n,n}return e.colspan=1,1}var a=window.kendo,s=a.ui,l=a.date.setTime,c=s.SchedulerView,d=e.extend,u=e.proxy,h=a.date.getDate,p=a.date.getMilliseconds,f=a.date.MS_PER_DAY,g=a.date.MS_PER_MINUTE,m=".kendoTimelineView",v=a.template('<div><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),_=a.template("<span class='k-link k-nav-day'>#=kendo.toString(date, 'ddd M/dd')#</span>"),y='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head) {#<span class="k-icon k-i-arrow-e"></span>#}#</span>#if(resizable && !data.tail){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !data.head){#<span class="k-resize-handle k-resize-e"></span>#}#</div>',w=c.extend({init:function(e,t){var n=this;c.fn.init.call(n,e,t),n.title=n.options.title||n.options.name,n._workDays=r(n.options),n._templates(),n._editable(),n.calculateDateRange(),n._groups(),n._currentTime()},name:"timeline",_currentTimeMarkerUpdater:function(){var t,n,i,r,o,s,l,c,d,u,h,p=new Date,f=this.options;if(this.datesHeader.find(".k-current-time").remove(),this._isInDateSlot({start:p,end:p}))for(f.currentTimeMarker.useLocalTimezone===!1&&(t=f.dataSource.options.schema.timezone,f.dataSource&&t&&(n=a.timezone.offset(p,t),p=a.timezone.convert(p,p.getTimezoneOffset(),n))),i=f.group&&"vertical"!=f.group.orientation?this.groups.length:1,r=0;i>r;r++){if(o=this.groups[r],s=a.date.toUtcTime(p),l=o.timeSlotRanges(s,s+1),0===l.length)return;c=l[0].collection,d=c.slotByStartDate(p),d&&(u=e("<div class='k-current-time'></div>"),h=this.datesHeader,u.appendTo(h.find(".k-scheduler-header-wrap")).css({left:Math.round(l[0].innerRect(p,new Date(p.getTime()+1),!1).left),width:"1px",bottom:"1px",top:0}))}},_currentTime:function(){var e,n=this,i=n.options.currentTimeMarker;i!==!1&&i.updateInterval!==t&&(e=i.updateInterval,n._currentTimeMarkerUpdater(),n._currentTimeUpdateTimer=setInterval(u(this._currentTimeMarkerUpdater,n),e))},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+m,".k-event a:has(.k-si-close)",function(n){t.trigger("remove",{uid:e(this).closest(".k-event").attr(a.attr("uid"))}),n.preventDefault()}),t.options.editable.create!==!1&&t.element.on("dblclick"+m,".k-scheduler-content td",function(e){var n,i=t._slotByPosition(e.pageX,e.pageY);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:d({start:i.startDate(),end:i.endDate()},n)})),e.preventDefault()}),t.options.editable.update!==!1&&t.element.on("dblclick"+m,".k-event",function(n){t.trigger("edit",{uid:e(this).closest(".k-event").attr(a.attr("uid"))}),n.preventDefault()})},_touchEditable:function(){var t=this;t.options.editable.create!==!1&&(t._addUserEvents=new a.UserEvents(t.element,{filter:".k-scheduler-content td",tap:function(e){var n,i=t._slotByPosition(e.x.location,e.y.location);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:d({start:i.startDate(),end:i.endDate()},n)})),e.preventDefault()}})),t.options.editable.update!==!1&&(t._editUserEvents=new a.UserEvents(t.element,{filter:".k-event",tap:function(n){var i=e(n.target).closest(".k-event");i.hasClass("k-event-active")||t.trigger("edit",{uid:i.attr(a.attr("uid"))}),n.preventDefault()}}))},_slotByPosition:function(e,t){var n,i,r,o,s=this.content,l=s.offset();for(e-=l.left,t-=l.top,this._isRtl?(o=a.support.browser,o.mozilla?(e+=s[0].scrollWidth-s[0].offsetWidth,e+=s[0].scrollLeft):o.msie?(e-=s.scrollLeft(),e+=s[0].scrollWidth-this.content[0].offsetWidth):o.webkit&&(e+=s[0].scrollLeft)):e+=s[0].scrollLeft,t+=s[0].scrollTop,e=Math.ceil(e),t=Math.ceil(t),r=0;this.groups.length>r;r++)if(i=this.groups[r],n=i.timeSlotByPosition(e,t))return n;return null},options:{name:"TimelineView",title:"Timeline",selectedDateFormat:"{0:D}",date:a.date.today(),startTime:a.date.today(),endTime:a.date.today(),showWorkHours:!1,minorTickCount:2,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,majorTick:60,eventHeight:25,columnWidth:100,groupHeaderTemplate:"#=text#",majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",slotTemplate:"&nbsp;",eventTemplate:v,dateHeaderTemplate:_,footer:{command:"workDay"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0},messages:{defaultRowText:"All events",showFullDay:"Show full day",showWorkDay:"Show business hours"}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=d({},a.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,y),this.majorTimeHeaderTemplate=a.template(e.majorTimeHeaderTemplate,t),this.dateHeaderTemplate=a.template(e.dateHeaderTemplate,t),this.slotTemplate=a.template(e.slotTemplate,t),this.groupHeaderTemplate=a.template(e.groupHeaderTemplate,t)},_render:function(e){var t=this;e=e||[],t._dates=e,t._startDate=e[0],t._endDate=e[e.length-1||0],t._calculateSlotRanges(),t.createLayout(t._layout(e)),t._content(e),t._footer(),t._setContentWidth(),t.refreshLayout(),this.timesHeader.find("table tr:last").hide(),this.datesHeader.find("table tr:last").hide()},_setContentWidth:function(){var e=this.content,t=e.width(),n=this.content.find("table"),i=n.find("tr:first").children().length,r=100,o=i*this.options.columnWidth;o>t&&(r=Math.ceil(o/t*100)),n.add(this.datesHeader.find("table")).css("width",r+"%")},_calculateSlotRanges:function(){var e,t,n,i,r=this._dates,o=this.startTime(),s=this.endTime();for(p(s)===p(a.date.getDate(s))&&(s=a.date.getDate(s),l(s,f-1)),s=p(s),o=p(o),e=[],t=0;r.length>t;t++)n=h(r[t]),l(n,o),i=h(r[t]),l(i,s),e.push({start:a.date.toUtcTime(n),end:a.date.toUtcTime(i)});this._slotRanges=e},_forTimeRange:function(e,t,i,r){var o,a,s,c,d,u,h,m,v,_,y,w,b,k,x,C,S,T;for(e=n(e),t=n(t),o=this,a=p(e),s=p(t),c=o.options.minorTickCount,d=o.options.majorTick*g,u=d/c||1,h=new Date(+e),m=h.getDate(),_=0,w="",y=f/u,a!=s&&(a>s&&(s+=f),y=(s-a)/u),y=Math.round(y);y>_;_++)b=_%(d/u),k=0===b,x=c-1>b,C=b===c-1,S=c,y%c!==0&&(T=c>y-(_+1),k&&T&&(S=y%c)),w+=i(h,k,x,C,S),l(h,u,!1);return s&&(v=p(h),m<h.getDate()&&(v+=f),v>s&&(h=new Date(+t))),r&&(w+=r(h)),w},_layout:function(e){var t,n,i,r=[],s=[],l=this,c=[{text:l.options.messages.defaultRowText}],d=[];for(t=0;l.options.minorTickCount>t;t++)d.push({text:"",className:""});for(this._forTimeRange(l.startTime(),l.endTime(),function(e,t,n,i,a){var s,c=l.majorTimeHeaderTemplate;t&&(s={text:c({date:e}),className:i?"k-slot-cell":"",columns:d.slice(0,a)},o(s),r.push(s))}),n=0;e.length>n;n++)s.push({text:a.format("{0:m}",e[n]),className:"k-slot-cell",columns:r.slice(0)});return i=this.groupedResources,i.length&&("vertical"===this._groupOrientation()?c=l._createRowsLayout(i,null,this.groupHeaderTemplate):s=l._createColumnsLayout(i,s,this.groupHeaderTemplate)),{columns:s,rows:c}},_footer:function(){var t,n,i,r=this.options;r.footer!==!1&&(t='<div class="k-header k-scheduler-footer">',n=r.footer.command,n&&"workDay"===n?(t+='<ul class="k-reset k-header">',t+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>',t+=(r.showWorkHours?r.messages.showFullDay:r.messages.showWorkDay)+"</a></li>",t+="</ul>"):t+="&nbsp;",t+="</div>",this.footer=e(t).appendTo(this.element),i=this,this.footer.on("click"+m,".k-scheduler-fullday",function(e){e.preventDefault(),i.trigger("navigate",{view:i.name||r.name,date:i.startDate(),isWorkDay:!r.showWorkHours})}))},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},_isWorkDay:function(e){var t,n=e.getDay(),i=this._workDays;for(t=0;i.length>t;t++)if(i[t]===n)return!0;return!1},_content:function(e){var t,n,i,r,o,s=this,l=s.options,c=s.startTime(),d=this.endTime(),u=1,h=1,p=e.length,f="",g=this.groupedResources,m=this.slotTemplate,v=!1;for(g.length&&(v="vertical"===s._groupOrientation(),v?h=s._groupCount():u=s._groupCount()),f+="<tbody>",t=function(t){var o,c="",d="",u=function(e){return function(){return s._resourceBySlot({groupIndex:e})}};return a.date.isToday(e[r])&&(d+="k-today"),(a.date.getMilliseconds(t)<a.date.getMilliseconds(l.workDayStart)||a.date.getMilliseconds(t)>=a.date.getMilliseconds(l.workDayEnd)||!s._isWorkDay(e[r]))&&(d+=" k-nonwork-hour"),c+="<td"+(""!==d?' class="'+d+'"':"")+">",o=a.date.getDate(e[r]),a.date.setTime(o,a.date.getMilliseconds(t)),c+=m({date:o,resources:u(v?n:i)}),c+="</td>"},n=0;h>n;n++){for(f+="<tr>",i=0;u>i;i++)for(r=0,o=p;o>r;r++)f+=this._forTimeRange(c,d,t);f+="</tr>"}f+="</tbody>",this.content.find("table").append(f)},_groups:function(){var e,t,n,i,r=this._groupCount(),o=this._dates,s=o.length;for(this.groups=[],e=0;r>e;e++)t=this._addResourceView(e),n=o[0],i=o[o.length-1||0],t.addTimeSlotCollection(n,a.date.addDays(i,1));
this._timeSlotGroups(r,s)},_isVerticallyGrouped:function(){return this.groupedResources.length&&"vertical"===this._groupOrientation()},_isHorizontallyGrouped:function(){return this.groupedResources.length&&"horizontal"===this._groupOrientation()},_timeSlotGroups:function(e,t){var n,i,r,o,a,s,l,c,d,u,h,f,g,m,v,_,y,w,b=this._timeSlotInterval(),k=this._isVerticallyGrouped(),x=this.content.find("tr"),C=x.length;for(x.attr("role","row"),k&&(C=Math.floor(C/e)),n=0;e>n;n++)for(i=0,r=this.groups[n],k&&(i=n),a=i*C,s=0,k||(s=n),l=x[a].children,c=l.length/(k?1:e),d=c/t,u=0;t>u;u++)for(h=u*d+c*s,o=p(new Date(+this.startTime())),f=0;d>f;f++)g=l[f+h],m=r.getTimeSlotCollection(0),v=this._dates[u],_=Date.UTC(v.getFullYear(),v.getMonth(),v.getDate()),y=_+o,w=y+b,g.setAttribute("role","gridcell"),g.setAttribute("aria-selected",!1),m.addTimeSlot(g,y,w,!0),o+=b},startDate:function(){return this._startDate},endDate:function(){return this._endDate},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*g},nextDate:function(){return a.date.nextDay(this.endDate())},previousDate:function(){return a.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},render:function(t){var n,r,o,s,l,c;for(this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),t=new a.data.Query(t).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray(),n=[],this._eventsByResource(t,this.groupedResources,n),r=e.map(this._dates,function(t){return Math.max.apply(null,e.map(n,function(n){return e.grep(n,function(e){return i(t,h(e.start),h(e.end))}).length}))}),o=[],s=0,l=0;n.length>l;l++)c={groupIndex:l,maxRowCount:0,events:{}},o.push(c),this._renderEvents(n[l],l,c),c.maxRowCount>s&&(s=c.maxRowCount);this._setRowsHeight(o,n.length,s),this._positionEvents(o,n.length),this.trigger("activate")},_positionEvents:function(e,t){var n,i,r,o;for(n=0;t>n;n++){i=e[n].events;for(r in i)o=i[r],this._positionEvent(o)}},_setRowsHeight:function(e,t,n){var i,r,o,s,l,c=this.options.eventHeight+2,d=this._getBottomRowOffset();for(t=this._isVerticallyGrouped()?t:1,i=0;t>i;i++)r=this._isVerticallyGrouped()?e[i].maxRowCount:n,r=r?r:1,o=(c+2)*r+d,s=this.times.find(a.format("tr:nth-child({0})",i+1)),l=this.content.find(a.format("tr:nth-child({0})",i+1)),s.height(o),l.height(o);this._setContentWidth(),this.refreshLayout(),this._refreshSlots()},_getBottomRowOffset:function(){var e,t,n=.5*this.options.eventHeight,i=this._isMobile();return i?(e=30,t=60):(e=15,t=30),n>t?n=t:e>n&&(n=e),n},_positionEvent:function(e){var t,n,i=this.options.eventHeight+2,r=e.slotRange.innerRect(e.start,e.end,!1);r.top=e.slotRange.start.offsetTop,t=r.right-r.left-2,0>t&&(t=0),n=r.left,this._isRtl&&(n-=this.content[0].scrollWidth-this.content[0].offsetWidth),e.element.css({top:e.slotRange.start.offsetTop+e.rowIndex*(i+2)+"px",left:n,width:t})},_refreshSlots:function(){for(var e=0;this.groups.length>e;e++)this.groups[e].refresh()},_eventsByResource:function(e,t,n){var i,r,o,s,l=t[0];if(l)for(i=l.dataSource.view(),r=0;i.length>r;r++)o=this._resourceValue(l,i[r]),s=new a.data.Query(e).filter({field:l.field,operator:c.groupEqFilter(o)}).toArray(),t.length>1?this._eventsByResource(s,t.slice(1),n):n.push(s);else n.push(e)},_isInDateSlot:function(e){var t=e.start,n=e.end,i=h(this._startDate),r=a.date.addDays(h(this._endDate),1);return r>t&&n>=i?!0:!1},_isInTimeSlot:function(e){var t,n=e.startTime||a.date.toUtcTime(e.start),i=e.endTime||a.date.toUtcTime(e.end),r=this._slotRanges;for(n===i&&(i+=1),t=0;r.length>t;t++)if(r[t].end>n&&i>r[t].start)return!0;return!1},_adjustEvent:function(e){var t,n=e.start,i=e.end,r=e._time("start"),o=e._time("end"),s=p(this.startTime()),c=p(this.endTime()),d=null,u=null,g=!1,m=!1;return e.isAllDay?(d=h(n),s>r&&(l(d,s),m=!0),u=h(i),c===p(h(this.endTime()))?u=a.date.addDays(u,1):(l(u,c),g=!0)):(c=0===c?f:c,s>r?(d=h(n),l(d,s),m=!0):r>c&&(d=h(n),d=a.date.addDays(d,1),l(d,s),m=!0),o>c?(u=h(i),l(u,c),g=!0):s>o&&(u=h(i),u=a.date.addDays(u,-1),l(u,c),g=!0)),t=e.clone({start:d?d:n,end:u?u:i,startTime:d?a.date.toUtcTime(d):e.startTime,endTime:u?a.date.toUtcTime(u):e.endTime,isAllDay:!1}),{occurrence:t,head:g,tail:m}},_renderEvents:function(e,t,n){var i,r,o,a,s,l,c,d,u,h,p;for(r=0,o=e.length;o>r;r++)i=e[r],this._isInDateSlot(i)&&(a=i.isAllDay||i.end.getTime()-i.start.getTime()>=f,s=this.content,(a||this._isInTimeSlot(i))&&(l=this._adjustEvent(i),c=this.groups[t],c._continuousEvents||(c._continuousEvents=[]),d=c.slotRanges(l.occurrence,!1),u=d[0],this._isInTimeSlot(l.occurrence)&&(h=this._createEventElement(l.occurrence,i,u.head||l.head,u.tail||l.tail),h.appendTo(s).css({top:0,height:this.options.eventHeight}),p={start:l.occurrence.startTime||l.occurrence.start,end:l.occurrence.endTime||l.occurrence.end,element:h,uid:i.uid,slotRange:u,rowIndex:0,offsetTop:0},n.events[i.uid]=p,this.addContinuousEvent(c,u,h,i.isAllDay),this._arrangeRows(p,u,n))))},addContinuousEvent:function(e,t,n,i){var r=e._continuousEvents;r.push({element:n,isAllDay:i,uid:n.attr(a.attr("uid")),start:t.start,end:t.end})},_createEventElement:function(t,n,i,r){var o,s,l=this.eventTemplate,c=this.options.editable,u=this._isMobile(),h=c&&c.destroy!==!1&&!u,p=c&&c.resize!==!1,f=n._time("start"),g=n._time("end"),m=n.start,v=n.end,_=this.eventResources(n);return n.startTime&&(m=new Date(f),m=a.timezone.apply(m,"Etc/UTC")),n.endTime&&(v=new Date(g),v=a.timezone.apply(v,"Etc/UTC")),o=d({},{ns:a.ns,resizable:p,showDelete:h,head:i,tail:r,singleDay:1==this._dates.length,resources:_,inverseColor:_&&_[0]?this._shouldInverseResourceColor(_[0]):!1},n,{start:m,end:v}),s=e(l(o)),this.angular("compile",function(){return{elements:s,data:[{dataItem:o}]}}),s},_arrangeRows:function(e,t,n){var i,r,o,a,s,l,d=t.start.index,u=t.end.index,h=c.collidingEvents(t.events(),d,u);for(t.addEvent({slotIndex:d,start:d,end:u,element:e.element,uid:e.uid}),h.push({slotIndex:d,start:d,end:u,element:e.element,uid:e.uid}),i=c.createRows(h),i.length>n.maxRowCount&&(n.maxRowCount=i.length),r=0,o=i.length;o>r;r++)for(a=i[r].events,s=0,l=a.length;l>s;s++)n.events[a[s].uid].rowIndex=r},_groupCount:function(){var e=this.groupedResources;return e.length?"vertical"===this._groupOrientation()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length-1):1},_updateEventForSelection:function(e){var t=this._adjustEvent(e.clone());return t.occurrence},_updateEventForMove:function(e){e.isAllDay&&e.set("isAllDay",!1)},_updateEventForResize:function(e){e.isAllDay&&e.set("isAllDay",!1)},_updateMoveHint:function(e,t,n){var i,r,o,a,s,l,c,d,u,h,p,f=this.groups[t],g=e.clone({start:e.start,end:e.end}),m=g.duration();for(g.start=new Date(g.start.getTime()+n),g.end=new Date(+g.start+m),i=this._adjustEvent(g),r=f.slotRanges(i.occurrence,!1),this._removeMoveHint(),o=0;r.length>o;o++)a=r[o],s=a.start,l=this._createEventElement(i.occurrence,i.occurrence,!1,!1),l.addClass("k-event-drag-hint"),c=a.innerRect(i.occurrence.start,i.occurrence.end,this.options.snap),d=c.right-c.left-2,0>d&&(d=0),u=c.left,this._isRtl&&(u-=this.content[0].scrollWidth-this.content[0].offsetWidth),h={left:u,top:s.offsetTop,height:s.offsetHeight-2,width:d},l.css(h),this._moveHint=this._moveHint.add(l);p=this.content,this._moveHint.appendTo(p)},_updateResizeHint:function(e,t,n,i){var r,o,s,l,d,u,h,p,f,g,m,v=this.groups[t],_=v.ranges(n,i,!1,!1);for(this._removeResizeHint(),r=0;_.length>r;r++)o=_[r],s=o.startSlot(),l=o.innerRect(n,i,!1),l.top=s.offsetTop,d=l.right-l.left,u=s.offsetHeight,h=l.left,p=this.content,this._isRtl&&(h-=p[0].scrollWidth-p[0].offsetWidth),f=c.fn._createResizeHint.call(this,h,l.top,d,u),this._resizeHint=this._resizeHint.add(f);g="t",m=this.content,this._resizeHint.appendTo(m),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(a.toString(a.timezone.toLocalDate(n),g)),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(a.toString(a.timezone.toLocalDate(i),g))},selectionByElement:function(e){var t=e.offset();return this._slotByPosition(t.left,t.top)},_updateDirection:function(e,t,n,i,r){var o=t[0].start,a=t[t.length-1].end;n&&!r&&o.index===a.index&&o.collectionIndex===a.collectionIndex&&(e.backward=i)},_changeGroup:function(e,t){var n=t?"prevGroupSlot":"nextGroupSlot",i=this[n](e.start,e.groupIndex,!1);return i&&(e.groupIndex+=t?-1:1),i},prevGroupSlot:function(e,t,n){var i,r=this.groups[t],o=r.ranges(e,e,n,!1)[0].start;if(!(0>=t))return this._isVerticallyGrouped()?o:(i=r._collection(0,n),i.last())},nextGroupSlot:function(e,t,n){var i,r=this.groups[t],o=r.ranges(e,e,n,!1)[0].start;if(!(t>=this.groups.length-1))return this._isVerticallyGrouped()?o:(i=r._collection(0,n),i.first())},_verticalSlots:function(e,t,n,i){var r=i?"leftSlot":"rightSlot",o=t[0].start,a=t[t.length-1].end,s=this.groups[e.groupIndex];return o=s[r](o),a=s[r](a),n||!this._isVerticallyGrouped()||o&&a||(o=a=this._changeGroup(e,i)),{startSlot:o,endSlot:a}},_horizontalSlots:function(e,t,n,i){var r=i?"upSlot":"downSlot",o=t[0].start,a=t[t.length-1].end,s=this.groups[e.groupIndex];return o=s[r](o),a=s[r](a),n||!this._isHorizontallyGrouped()||o&&a||(o=a=this._changeGroup(e,i)),{startSlot:o,endSlot:a}},_changeViewPeriod:function(e,t){var n,i=t?this.previousDate():this.nextDate(),r=e.start,o=e.end;return e.start=new Date(i),e.end=new Date(i),this._isHorizontallyGrouped()&&(e.groupIndex=t?this.groups.length-1:0),n=o-r,t?(o=p(this.endTime()),o=0===o?f:o,l(e.start,o-n),l(e.end,o)):(r=p(this.startTime()),l(e.start,r),l(e.end,r+n)),e.events=[],!0},move:function(e,t,n){var i,r,o,s,l,c=!1,d=this.groups[e.groupIndex],u=a.keys,h=d.ranges(e.start,e.end,!1,!1);if(t===u.DOWN||t===u.UP)c=!0,o=t===u.UP,this._updateDirection(e,h,n,o,!0),s=this._verticalSlots(e,h,n,o);else if(!(t!==u.LEFT&&t!==u.RIGHT||(c=!0,o=t===u.LEFT,this._updateDirection(e,h,n,o,!1),s=this._horizontalSlots(e,h,n,o),s.startSlot&&s.endSlot||n||!this._changeViewPeriod(e,o,!1))))return c;return c&&(i=s.startSlot,r=s.endSlot,n?(l=e.backward,l&&i?e.start=i.startDate():!l&&r&&(e.end=r.endDate())):i&&r&&(e.start=i.startDate(),e.end=r.endDate()),e.events=[]),c},destroy:function(){var e=this;e.element&&e.element.off(m),e.footer&&e.footer.remove(),e._currentTimeUpdateTimer&&clearInterval(e._currentTimeUpdateTimer),c.fn.destroy.call(this),this._isMobile()&&e.options.editable&&(e.options.editable.create!==!1&&(e._addUserEvents.destroy(),e._allDayUserEvents.destroy()),e.options.editable.update!==!1&&e._editUserEvents.destroy())}});d(!0,s,{TimelineView:w,TimelineWeekView:w.extend({options:{name:"TimelineWeekView",title:"Timeline Week",selectedDateFormat:"{0:D} - {1:D}",majorTick:120},name:"timelineWeek",calculateDateRange:function(){var e,t,n=this.options.date,i=a.date.dayOfWeek(n,this.calendarInfo().firstDay,-1),r=[];for(e=0,t=7;t>e;e++)r.push(i),i=a.date.nextDay(i);this._render(r)}}),TimelineWorkWeekView:w.extend({options:{name:"TimelineWorkWeekView",title:"Timeline Work Week",selectedDateFormat:"{0:D} - {1:D}",majorTick:120},name:"timelineWorkWeek",nextDate:function(){return a.date.dayOfWeek(a.date.nextDay(this.endDate()),this.options.workWeekStart,1)},previousDate:function(){return a.date.previousDay(this.startDate())},calculateDateRange:function(){for(var e=this.options.date,t=a.date.dayOfWeek(e,this.options.workWeekStart,-1),n=a.date.dayOfWeek(t,this.options.workWeekEnd,1),i=[];n>=t;)i.push(t),t=a.date.nextDay(t);this._render(i)}}),TimelineMonthView:w.extend({options:{name:"TimelineMonthView",title:"Timeline Month",selectedDateFormat:"{0:D} - {1:D}",workDayStart:new Date(1980,1,1,0,0,0),workDayEnd:new Date(1980,1,1,0,0,0),footer:!1,majorTick:1440,minorTickCount:1},name:"timelineWeek",calculateDateRange:function(){var e,t,n=this.options.date,i=a.date.firstDayOfMonth(n),r=a.date.lastDayOfMonth(n),o=[];for(e=0,t=r.getDate();t>e;e++)o.push(i),i=a.date.nextDay(i);this._render(o)}})})}(window.kendo.jQuery),function(e,t){function n(e,t){return t=t||"",e.startTimezone&&(t=e.startTimezone,e.endTimezone&&(t+=" | "+e.endTimezone)),t}function i(e,t){var n=t.timezone;n&&(e[A.attr("timezone")]=n)}function r(e,t){var n,i=t.model.fields[t.field].validation;i&&(n=i.dateCompare,n&&U(n)&&n.message&&(e[A.attr("dateCompare-msg")]=n.message))}function o(e,t){return function(n){return n=e(n),s(n,"apply",t),n||[]}}function a(e,t){return function(n){return n&&("[object Array]"===G.call(n)||n instanceof A.data.ObservableArray||(n=[n])),s(n,"remove",t,!0),n=e(n),n||[]}}function s(e,t,n,i){var r,o,a;for(e=e||[],o=0,a=e.length;a>o;o++)r=e[o],i?r.startTimezone||r.endTimezone?n?(r.start=A.timezone.convert(r.start,r.startTimezone||r.endTimezone,n),r.end=A.timezone.convert(r.end,r.endTimezone||r.startTimezone,n),r.start=A.timezone[t](r.start,n),r.end=A.timezone[t](r.end,n)):(r.start=A.timezone[t](r.start,r.startTimezone||r.endTimezone),r.end=A.timezone[t](r.end,r.endTimezone||r.startTimezone)):n&&(r.start=A.timezone[t](r.start,n),r.end=A.timezone[t](r.end,n)):r.startTimezone||r.endTimezone?(r.start=A.timezone[t](r.start,r.startTimezone||r.endTimezone),r.end=A.timezone[t](r.end,r.endTimezone||r.startTimezone),n&&(r.start=A.timezone.convert(r.start,r.startTimezone||r.endTimezone,n),r.end=A.timezone.convert(r.end,r.endTimezone||r.startTimezone,n))):n&&(r.start=A.timezone[t](r.start,n),r.end=A.timezone[t](r.end,n)),i&&delete r.uid;return e}function l(e,t){for(var n,i=e.length,r=0;i>r;r++)if(n=e[r],n.uid===t)return n}function c(e,t,n){return e=n?A.timezone.convert(e,t,n):A.timezone.remove(e,t)}function d(e){var t,n,i,r,o,a,s,l,d,u,h,p;return e.filter("[name=end]").length&&(t=e.closest(".k-scheduler-edit-form"),n=t.find("[name=start]:visible"),i=t.find("[name=end]:visible"),i[0]&&n[0]&&(a=A.widgetInstance(n,A.ui),s=A.widgetInstance(i,A.ui),l=t.data("kendoEditable"),d=l?l.options.model:null,a&&s?(r=a.value(),o=s.value()):(r=A.parseDate(n.val()),o=A.parseDate(i.val())),r&&o))?(d&&(u=n.attr(A.attr("timezone")),h=d.startTimezone,p=d.endTimezone,h=h||p,p=p||h,h&&(r=c(r,h,u),o=c(o,p,u))),o>=r):!0}function u(e,t,n,i){for(var r=e.length,o=[],a=0;r>a;a++)o=o.concat(e[a].expand(t,n,i));return o}function h(e){return delete e.name,delete e.prefix,delete e.remove,delete e.edit,delete e.add,delete e.navigate,e}function p(t){return function(n){e(A.format('<select data-{0}bind="value:{1}">',A.ns,t.field)).appendTo(n).kendoDropDownList({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,optionLabel:"None",template:A.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}}function f(t){return function(n){e(A.format('<select data-{0}bind="value:{1}">',A.ns,t.field)).appendTo(n).kendoMultiSelect({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,itemTemplate:A.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField),tagTemplate:A.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}}function g(t){return function(n){var i,r,o="",a=t.dataSource.view();for(i=0,r=a.length;r>i;i++)o+=A.format('<option value="{0}">{1}</option>',A.getter(t.dataValueField)(a[i]),A.getter(t.dataTextField)(a[i]));e(A.format('<select data-{0}bind="value:{1}" multiple="multiple" data-{0}value-primitive="{3}">{2}</select>',A.ns,t.field,o,t.valuePrimitive)).appendTo(n)}}function m(e,t){var n,i=e.end.getTime()-e.start.getTime(),r=new Date(e.start.getTime());return A.date.setTime(r,t),n=new Date(r.getTime()),A.date.setTime(n,i,!0),{start:r,end:n}}var v,_,y,w,b,k,x,C,S,T,D,A=window.kendo,E=A.date,M=A.support.input,P=E.MS_PER_DAY,I=E.getDate,z=A.date.getMilliseconds,F=A.recurrence,R=A.keys,B=A.ui,L=B.Widget,O="string",H=B.Popup,N=B.Calendar,V=A.data.DataSource,U=e.isPlainObject,W=e.extend,j=e.proxy,G=Object.prototype.toString,q=e.isArray,$=".kendoScheduler",Y="click",K="change",Q="cancel",X="remove",J="save",Z="add",et="edit",tt=/(?:value:start|value:end)(?:,|$)/,nt=I(new Date),it="recurrenceException",rt="Are you sure you want to delete this event?",ot="Do you want to delete only this event occurrence or the whole series?",at="Do you want to edit only this event occurrence or the whole series?",st='<a class="k-button #=className#" #=attr# href="\\#">#=text#</a>',lt=A.template('<div class="k-floatwrap k-header k-scheduler-toolbar"># if (pdf) { #<ul class="k-reset k-scheduler-tools"><li><a role="button" href="\\#" class="k-button k-pdf"><span class="k-icon k-i-pdf"></span>${messages.pdf}</a></li></ul># } #<ul class="k-reset k-scheduler-navigation"><li class="k-state-default k-header k-nav-today"><a role="button" href="\\#" class="k-link">${messages.today}</a></li><li class="k-state-default k-header k-nav-prev"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-w"></span></a></li><li class="k-state-default k-header k-nav-next"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-e"></span></a></li><li class="k-state-default k-nav-current"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-calendar"></span><span data-#=ns#bind="text: formattedDate"></span></a></li></ul><ul class="k-reset k-header k-scheduler-views">#for(var view in views){#<li class="k-state-default k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>#}#</ul></div>'),ct=A.template('<div class="k-floatwrap k-header k-scheduler-toolbar"><ul class="k-reset k-header k-scheduler-navigation"><li class="k-state-default k-nav-today"><a role="button" href="\\#" class="k-link">${messages.today}</a></li></ul><ul class="k-reset k-header k-scheduler-views">#for(var view in views){#<li class="k-state-default k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>#}#</ul></div><div class="k-floatwrap k-header k-scheduler-toolbar"><ul class="k-reset k-header k-scheduler-navigation"><li class="k-state-default k-nav-prev"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-w"></span></a></li><li class="k-state-default k-nav-current"><span data-#=ns#bind="text: formattedDate"></span></li><li class="k-state-default k-nav-next"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-e"></span></a></li></ul></div>'),dt=function(t,n){var o={name:n.field},a=M.date?"":A.attr("role")+'="datepicker" ',s=A.attr("role")+'="datetimepicker" ',l=n.model.isAllDay,c=A.attr("validate")+"='"+!l+"'",d=A.attr("validate")+"='"+l+"'";i(o,n),r(o,n),e('<input type="datetime-local" required '+A.attr("type")+'="date" '+s+A.attr("bind")+'="value:'+n.field+',invisible:isAllDay" '+c+"/>").attr(o).appendTo(t),e('<input type="date" required '+A.attr("type")+'="date" '+a+A.attr("bind")+'="value:'+n.field+',visible:isAllDay" '+d+"/>").attr(o).appendTo(t),e("<span "+A.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},ut=function(t,n){var o={name:n.field},a=n.model.isAllDay,s=A.attr("validate")+"='"+!a+"' ",l=A.attr("validate")+"='"+a+"' ";i(o,n),r(o,n),e('<input type="text" required '+A.attr("type")+'="date" '+A.attr("role")+'="datetimepicker" '+A.attr("bind")+'="value:'+n.field+',invisible:isAllDay" '+s+"/>").attr(o).appendTo(t),e('<input type="text" required '+A.attr("type")+'="date" '+A.attr("role")+'="datepicker" '+A.attr("bind")+'="value:'+n.field+',visible:isAllDay" '+l+"/>").attr(o).appendTo(t),e("<span "+A.attr("bind")+'="text: '+n.field+'Timezone"></span>').appendTo(t),"end"===n.field&&e("<span "+A.attr("bind")+'="text: startTimezone, invisible: endTimezone"></span>').appendTo(t),e("<span "+A.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},ht=function(t,n){e("<div "+A.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).appendTo(t).kendoRecurrenceEditor({start:n.model.start,timezone:n.timezone,messages:n.messages})},pt=function(t,n){e("<div "+A.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).appendTo(t).kendoMobileRecurrenceEditor({start:n.model.start,timezone:n.timezone,messages:n.messages,pane:n.pane,value:n.model[n.field]})},ft=function(t,i){var r=n(i.model,i.messages.noTimezone);e('<a href="#" class="k-button k-timezone-button" data-bind="invisible:isAllDay">'+r+"</a>").click(i.click).appendTo(t)},gt=function(t,n){e('<a href="#" class="k-button" data-bind="invisible:isAllDay">'+n.messages.timezoneEditorButton+"</a>").click(n.click).appendTo(t)},mt=function(t,n){e("<div "+A.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).toggle(n.visible).appendTo(t).kendoMobileTimezoneEditor({optionLabel:n.noTimezone})},vt=function(t,n){e("<div "+A.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).toggle(n.visible).appendTo(t).kendoTimezoneEditor({optionLabel:n.noTimezone})},_t=A.Class.extend({init:function(t,n){var i=t.timezone;this.reader=n,n.model&&(this.model=n.model),this.timezone=i,this.data=o(e.proxy(this.data,this),i),this.serialize=a(e.proxy(this.serialize,this),i)},errors:function(e){return this.reader.errors(e)},parse:function(e){return this.reader.parse(e)},data:function(e){return this.reader.data(e)},total:function(e){return this.reader.total(e)},groups:function(e){return this.reader.groups(e)},aggregates:function(e){return this.reader.aggregates(e)},serialize:function(e){return this.reader.serialize(e)}}),yt=A.data.Model.define({init:function(e){var t=this;A.data.Model.fn.init.call(t,e),t._defaultId=t.defaults[t.idField]},_time:function(e){var t=this[e],n=e+"Time";return this[n]?this[n]-A.date.toUtcTime(A.date.getDate(t)):z(t)},_date:function(e){var t=e+"Time";return this[t]?this[t]-this._time(e):A.date.getDate(this[e])},clone:function(t,n){var i=this.uid,r=new this.constructor(e.extend({},this.toJSON(),t));return n||(r.uid=i),r},duration:function(){var e=this.end,t=this.start,n=(e.getTimezoneOffset()-t.getTimezoneOffset())*A.date.MS_PER_MINUTE;return e-t-n},expand:function(e,t,n){return F?F.expand(this,e,t,n):[this]},update:function(e){for(var t in e)this.set(t,e[t]);this.startTime&&this.set("startTime",A.date.toUtcTime(this.start)),this.endTime&&this.set("endTime",A.date.toUtcTime(this.end))},isMultiDay:function(){return this.isAllDay||this.duration()>=A.date.MS_PER_DAY},isException:function(){return!this.isNew()&&this.recurrenceId},isOccurrence:function(){return this.isNew()&&this.recurrenceId},isRecurring:function(){return!(!this.recurrenceRule&&!this.recurrenceId)},isRecurrenceHead:function(){return!(!this.id||!this.recurrenceRule)},toOccurrence:function(t){return t=e.extend(t,{recurrenceException:null,recurrenceRule:null,recurrenceId:this.id||this.recurrenceId}),t[this.idField]=this.defaults[this.idField],this.clone(t,!0)},toJSON:function(){var e=A.data.Model.fn.toJSON.call(this);return e.uid=this.uid,delete e.startTime,delete e.endTime,e},shouldSerialize:function(e){return A.data.Model.fn.shouldSerialize.call(this,e)&&"_defaultId"!==e},set:function(e,t){var n,i,r,o=this.isAllDay||!1;A.data.Model.fn.set.call(this,e,t),"isAllDay"==e&&t!=o&&(n=A.date.getDate(this.start),i=new Date(this.end),r=A.date.getMilliseconds(i),0===r&&t&&(r=P),this.set("start",n),t===!0?(A.date.setTime(i,-r),n>i&&(i=n)):A.date.setTime(i,P-r),this.set("end",i))},id:"id",fields:{id:{type:"number"},title:{defaultValue:"",type:"string"},start:{type:"date",validation:{required:!0}},startTimezone:{type:"string"},end:{type:"date",validation:{required:!0,dateCompare:{value:d,message:"End date should be greater than or equal to the start date"}}},endTimezone:{type:"string"},recurrenceRule:{defaultValue:"",type:"string"},recurrenceException:{defaultValue:"",type:"string"},isAllDay:{type:"boolean",defaultValue:!1},description:{type:"string"}}}),wt=V.extend({init:function(e){V.fn.init.call(this,W(!0,{},{schema:{modelBase:yt,model:yt}},e)),this.reader=new _t(this.options.schema,this.reader)},expand:function(e,t){var n=this.view(),i={};return e&&t&&(t=new Date(t.getTime()+P-1),i={logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lte",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:new Date(e.getTime()+P-1)},{field:"end",operator:"gte",value:e}]}]},n=new A.data.Query(u(n,e,t,this.reader.timezone)).filter(i).toArray()),n},cancelChanges:function(e){e&&e.isOccurrence()&&this._removeExceptionDate(e),V.fn.cancelChanges.call(this,e)},insert:function(e,t){if(t){if(!(t instanceof yt)){var n=t;t=this._createNewModel(),t.accept(n)}return(t.isRecurrenceHead()||t.recurrenceId)&&(t=t.recurrenceId?t:t.toOccurrence(),this._addExceptionDate(t)),V.fn.insert.call(this,e,t)}},remove:function(e){return e.isRecurrenceHead()?this._removeExceptions(e):e.isRecurring()&&this._addExceptionDate(e),V.fn.remove.call(this,e)},_removeExceptions:function(e){for(var t=this.data().slice(0),n=t.shift(),i=e.id;n;)n.recurrenceId===i&&V.fn.remove.call(this,n),n=t.shift();e.set(it,"")},_removeExceptionDate:function(e){var t,n;e.recurrenceId&&(t=this.get(e.recurrenceId),t&&(n=e.start,t.set(it,t.recurrenceException.replace(F.toExceptionString(n,this.reader.timezone),""))))},_addExceptionDate:function(e){var t=e.start,n=this.reader.timezone,i=this.get(e.recurrenceId),r=i.recurrenceException||"";F.isException(r,t,n)||i.set(it,r+F.toExceptionString(t,n))}});wt.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},n=t.data;if(t.data=n,!(t instanceof wt)&&t instanceof A.data.DataSource)throw Error("Incorrect DataSource type. Only SchedulerDataSource instances are supported");return t instanceof wt?t:new wt(t)},W(!0,A.data,{SchedulerDataSource:wt,SchedulerDataReader:_t,SchedulerEvent:yt}),v={update:{text:"Save",className:"k-primary k-scheduler-update"},canceledit:{text:"Cancel",className:"k-scheduler-cancel"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-primary k-scheduler-delete",iconClass:"k-icon"}},_={mobile:{dateRange:dt,timezonePopUp:ft,timezone:mt,recurrence:pt,description:'<textarea name="description" class="k-textbox"/>',multipleResources:g,resources:p},desktop:{dateRange:ut,timezonePopUp:gt,timezone:vt,recurrence:ht,description:'<textarea name="description" class="k-textbox"/>',multipleResources:f,resources:p}},y=A.Observable.extend({init:function(e,t){A.Observable.fn.init.call(this),this.element=e,this.options=W(!0,{},this.options,t),this.createButton=this.options.createButton,this.toggleDateValidationHandler=j(this._toggleDateValidation,this)},_toggleDateValidation:function(t){if("isAllDay"==t.field){var n,i,r,o=this.container,a=this.editable.options.model.isAllDay,s=A.attr("bind");o.find("["+s+"*=end],["+s+"*=start]").each(function(){n=e(this),tt.test(n.attr(s))&&(i=n.is("["+A.attr("role")+"=datetimepicker],[type*=datetime]"),r=a!==i,n.attr(A.attr("validate"),r))})}},fields:function(e,t){var n,i,r=this,o=r.options.messages,a=r.options.timezone,s=function(e){e.preventDefault(),r._initTimezoneEditor(t,this)},l=[{field:"title",title:o.editor.title},{field:"start",title:o.editor.start,editor:e.dateRange,timezone:a},{field:"end",title:o.editor.end,editor:e.dateRange,timezone:a},{field:"isAllDay",title:o.editor.allDayEvent}];A.timezone.windows_zones&&(l.push({field:"timezone",title:o.editor.timezone,editor:e.timezonePopUp,click:s,messages:o.editor,model:t}),l.push({field:"startTimezone",title:o.editor.startTimezone,editor:e.timezone,noTimezone:o.editor.noTimezone}),l.push({field:"endTimezone",title:o.editor.endTimezone,editor:e.timezone,noTimezone:o.editor.noTimezone})),t.recurrenceId||l.push({field:"recurrenceRule",title:o.editor.repeat,editor:e.recurrence,timezone:a,messages:o.recurrenceEditor,pane:this.pane}),"description"in t&&l.push({field:"description",title:o.editor.description,editor:e.description});for(n=0;this.options.resources.length>n;n++)i=this.options.resources[n],l.push({field:i.field,title:i.title,editor:i.multiple?e.multipleResources(i):e.resources(i)});return l},end:function(){return this.editable.end()},_buildEditTemplate:function(e,t,n){var i,r,o,a,s=this.options.messages,l=W({},A.Template,this.options.templateSettings),c=l.paramName,d=this.options.editable.template,u="";if(d)typeof d===O&&(d=window.unescape(d)),u+=A.template(d,l)(e);else for(i=0,r=t.length;r>i;i++)o=t[i],"startTimezone"===o.field&&(u+='<div class="k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones" style="display:none">',u+='<div class="k-edit-form-container">',u+='<div class="k-edit-label"></div>',u+='<div class="k-edit-field"><label class="k-check"><input class="k-timezone-toggle" type="checkbox" />'+s.editor.separateTimezones+"</label></div>"),u+='<div class="k-edit-label"><label for="'+o.field+'">'+(o.title||o.field||"")+"</label></div>",!e.editable||e.editable(o.field)?(n.push(o),u+="<div "+A.attr("container-for")+'="'+o.field+'" class="k-edit-field"></div>'):(a="#:",o.field?(o=A.expr(o.field,c),a+=o+"==null?'':"+o):a+="''",a+="#",a=A.template(a,l),u+='<div class="k-edit-field">'+a(e)+"</div>"),"endTimezone"===o.field&&(u+=this._createEndTimezoneButton());return u},_createEndTimezoneButton:function(){return"</div></div>"},_revertTimezones:function(e){e.set("startTimezone",this._startTimezone),e.set("endTimezone",this._endTimezone),delete this._startTimezone,delete this._endTimezone}}),w=y.extend({init:function(){y.fn.init.apply(this,arguments),this.pane=A.mobile.ui.Pane.wrap(this.element),this.pane.element.parent().css("height",this.options.height),this.view=this.pane.view(),this._actionSheetButtonTemplate=A.template('<li><a #=attr# class="k-button #=className#" href="\\#">#:text#</a></li>'),this._actionSheetPopupOptions=e(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"}},options:{animations:{left:"slide",right:"slide:right"}},destroy:function(){this.close(),this.unbind(),this.pane.destroy()},_initTimezoneEditor:function(t){var i,r=this,o=r.pane,a=r.options.messages,s=r.timezoneView,l=r.container.find(".k-scheduler-timezones"),c=l.find(".k-timezone-toggle"),d=l.find(".k-edit-label:last").add(l.find(".k-edit-field:last")),u=function(e){if("startTimezone"===e.field){var n=t.startTimezone;c.prop("disabled",!n),n||(d.hide(),t.set("endTimezone",""),c.prop("checked",!1))}};r._startTimezone=t.startTimezone||"",r._endTimezone=t.endTimezone||"",s||(i='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+a.cancel+"</a>"+a.editor.timezoneTitle+'<a href="#" class="k-button k-scheduler-update">'+a.save+"</a></div></div>",this.timezoneView=s=o.append(i),s.contentElement().append(l.show()),s.element.on(Y+$,".k-scheduler-cancel, .k-scheduler-update",function(i){var s,l;i.preventDefault(),i.stopPropagation(),e(this).hasClass("k-scheduler-cancel")&&r._revertTimezones(t),t.unbind("change",u),s=o.element.find("#edit").data("kendoMobileView"),l=n(t,a.editor.noTimezone),s.contentElement().find(".k-timezone-button").text(l),o.navigate(s,r.options.animations.right)}),c.click(function(){d.toggle(c.prop("checked")),t.set("endTimezone","")}),t.bind("change",u)),c.prop("checked",t.endTimezone).prop("disabled",!t.startTimezone),t.endTimezone?d.show():d.hide(),o.navigate(s,r.options.animations.left)},_createActionSheetButton:function(e){return e.template=this._actionSheetButtonTemplate,this.createButton(e)},showDialog:function(t){var n,i,r="",o='<ul><li class="km-actionsheet-title">'+t.title+"</li>",a=this.element.find(".k-event["+A.attr("uid")+"='"+t.model.uid+"']");for(this.container&&(a=this.container.find(".k-scheduler-delete"),a[0]&&(r="phone")),n=0;t.buttons.length>n;n++)o+=this._createActionSheetButton(t.buttons[n]);
o+="</ul>",i=e(o).appendTo(this.pane.view().element).kendoMobileActionSheet({type:r,cancel:this.options.messages.cancel,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(n){var r=i.element.find("li:not(.km-actionsheet-cancel) > .k-button").index(e(n.currentTarget));r>-1&&(i.close(),t.buttons[r].click())},popup:this._actionSheetPopupOptions}).data("kendoMobileActionSheet"),i.open(a)},editEvent:function(t){var n,i,r,o,a,s=this.pane,l="",c=this.options.messages,d=c.save,u=c.destroy,h=c.cancel,p=c.editor.editorTitle;return l+='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list" id="edit" '+A.attr("uid")+'="'+t.uid+'"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+h+"</a>"+p+'<a href="#" class="k-button k-scheduler-update">'+d+"</a></div>",n=this.fields(_.mobile,t),i=this,r=[],l+=this._buildEditTemplate(t,n,r),!t.isNew()&&this.options.editable&&this.options.editable.destroy!==!1&&(l+='<div class="k-edit-buttons"><a href="#" class="k-scheduler-delete k-button">'+u+"</a></div>"),l+="</div>",o=s.append(l),a=this.container=o.element,this.editable=a.kendoEditable({fields:r,model:t,clearContainer:!1,target:i.options.target,validateOnBlur:!0}).data("kendoEditable"),a.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){e(this).next().children("input").click()}),this.trigger("edit",{container:a,model:t})?this.trigger("cancel",{container:a,model:t}):(a.on(Y+$,"a.k-scheduler-edit, a.k-scheduler-cancel, a.k-scheduler-update, a.k-scheduler-delete",function(n){var r,o;n.preventDefault(),n.stopPropagation(),r=e(this),r.hasClass("k-scheduler-edit")?s.navigate("#edit",i.options.animations.right):(o="cancel",r.hasClass("k-scheduler-update")?o="save":r.hasClass("k-scheduler-delete")&&(o="remove"),i.trigger(o,{container:a,model:t}))}),s.navigate(o,i.options.animations.left),t.bind("change",i.toggleDateValidationHandler)),this.editable},_views:function(){return this.pane.element.find(A.roleSelector("view")).not(this.view.element)},close:function(){var e,t,n,i;if(this.container){for(this.pane.navigate("",this.options.animations.right),e=this._views(),n=0,i=e.length;i>n;n++)t=e.eq(n).data("kendoMobileView"),t&&t.purge();e.remove(),this.container=null,this.editable&&(this.editable.options.model.unbind("change",this.toggleDateValidationHandler),this.editable.destroy(),this.editable=null),this.timezoneView=null}}}),b=y.extend({destroy:function(){this.close(),this.unbind()},editEvent:function(t){var n,i,r,o=this,a=o.options.editable,s="<div "+A.attr("uid")+'="'+t.uid+'" class="k-popup-edit-form k-scheduler-edit-form"><div class="k-edit-form-container">',l=o.options.messages,c=l.save,d=l.cancel,u=l.destroy,h=this.fields(_.desktop,t),p=[];return s+=this._buildEditTemplate(t,h,p),i=U(a)?a.window:{},s+='<div class="k-edit-buttons k-state-default">',s+=this.createButton({name:"update",text:c,attr:n})+this.createButton({name:"canceledit",text:d,attr:n}),t.isNew()||a.destroy===!1||(s+=this.createButton({name:"delete",text:u,attr:n})),s+="</div></div></div>",r=this.container=e(s).appendTo(o.element).eq(0).kendoWindow(W({modal:!0,resizable:!1,draggable:!0,title:l.editor.editorTitle,visible:!1,close:function(e){e.userTriggered&&o.trigger(Q,{container:r,model:t})&&e.preventDefault()}},i)),o.editable=r.kendoEditable({fields:p,model:t,clearContainer:!1,validateOnBlur:!0,target:o.options.target}).data("kendoEditable"),o.trigger(et,{container:r,model:t})?o.trigger(Q,{container:r,model:t}):(r.data("kendoWindow").center().open(),r.on(Y+$,"a.k-scheduler-cancel",function(e){e.preventDefault(),e.stopPropagation(),o.trigger(Q,{container:r,model:t})}),r.on(Y+$,"a.k-scheduler-update",function(e){e.preventDefault(),e.stopPropagation(),o.trigger("save",{container:r,model:t})}),r.on(Y+$,"a.k-scheduler-delete",function(e){e.preventDefault(),e.stopPropagation(),o.trigger(X,{container:r,model:t})}),t.bind("change",o.toggleDateValidationHandler)),o.editable},close:function(){var e=this,t=function(){e.editable&&(e.editable.options.model.unbind("change",e.toggleDateValidationHandler),e.editable.destroy(),e.editable=null,e.container=null),e.popup&&(e.popup.destroy(),e.popup=null)};e.editable?(e._timezonePopup&&e._timezonePopup.data("kendoWindow")&&(e._timezonePopup.data("kendoWindow").destroy(),e._timezonePopup=null),e.container.is(":visible")?e.container.data("kendoWindow").bind("deactivate",t).close():t()):t()},_createEndTimezoneButton:function(){var e=this.options.messages,t="";return t+='<div class="k-edit-buttons k-state-default">',t+=this.createButton({name:"savetimezone",text:e.save})+this.createButton({name:"canceltimezone",text:e.cancel}),t+="</div></div></div>"},showDialog:function(t){var n,i,r,o=A.format("<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>",t.text);for(o+='<div class="k-edit-buttons k-state-default">',n=0;t.buttons.length>n;n++)o+=this.createButton(t.buttons[n]);o+="</div></div></div>",i=this.element,this.popup&&this.popup.destroy(),r=this.popup=e(o).appendTo(i).eq(0).on("click",".k-button",function(n){n.preventDefault(),r.close();var i=e(n.currentTarget).index();t.buttons[i].click()}).kendoWindow({modal:!0,resizable:!1,draggable:!1,title:t.title,visible:!1,close:function(){this.destroy(),i.focus()}}).getKendoWindow(),r.center().open()},_initTimezoneEditor:function(e,t){var n,i=this,r=i.container.find(".k-scheduler-timezones"),o=r.find(".k-timezone-toggle"),a=r.find(".k-edit-label:last").add(r.find(".k-edit-field:last")),s=r.find(".k-scheduler-savetimezone"),l=r.find(".k-scheduler-canceltimezone"),c=i._timezonePopup,d=function(t){if("startTimezone"===t.field){var n=e.startTimezone;o.prop("disabled",!n),n||(a.hide(),e.set("endTimezone",""),o.prop("checked",!1))}};i._startTimezone=e.startTimezone,i._endTimezone=e.endTimezone,c||(i._timezonePopup=c=r.kendoWindow({modal:!0,resizable:!1,draggable:!0,title:i.options.messages.editor.timezoneEditorTitle,visible:!1,close:function(n){e.unbind("change",d),n.userTriggered&&i._revertTimezones(e),t&&t.focus()}}),o.click(function(){a.toggle(o.prop("checked")),e.set("endTimezone","")}),s.click(function(e){e.preventDefault(),n.close()}),l.click(function(t){t.preventDefault(),i._revertTimezones(e),n.close()}),e.bind("change",d)),o.prop("checked",e.endTimezone).prop("disabled",!e.startTimezone),e.endTimezone?a.show():a.hide(),n=c.data("kendoWindow"),n.center().open()}}),k=L.extend({init:function(t,n){var i=this;L.fn.init.call(i,t,n),i.options.views&&i.options.views.length||(i.options.views=["day","week"]),i.resources=[],i._initModel(),i._wrapper(),i._views(),i._toolbar(),i._dataSource(),i._resources(),i._resizeHandler=j(i.resize,i),i.wrapper.on("mousedown"+$+" selectstart"+$,function(e){e.preventDefault()}),i.options.editable&&i.options.editable.resize!==!1&&i._resizable(),i._movable(),e(window).on("resize"+$,i._resizeHandler),i.options.messages&&i.options.messages.recurrence&&(F.options=i.options.messages.recurrence),i._selectable(),i._ariaId=A.guid(),i._createEditor()},_isMobile:function(){var e=this.options;return e.mobile===!0&&A.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile},_isMobilePhoneView:function(){var e=this.options;return e.mobile===!0&&A.support.mobileOS&&!A.support.mobileOS.tablet||"phone"===e.mobile},_selectable:function(){var t,n=this,i=n.wrapper,r=A.support.mobileOS?"touchend":"mousedown";n.options.selectable&&(n._tabindex(),i.on(r+$,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",function(e){var t=e.which,r=e.button,o=A.support.browser,a=t&&3===t||r&&2==r;A.support.mobileOS&&e.isDefaultPrevented()||(a||n._createSelection(e.currentTarget),i.focus(),o.msie&&9>o.version&&setTimeout(function(){i.focus()}))}),t=e.proxy(n._mouseMove,n),i.on("mousedown"+$,".k-scheduler-header-all-day td, .k-scheduler-content td",function(e){var n=e.which,r=e.button,o=n&&3===n||r&&2==r;o||i.on("mousemove"+$,".k-scheduler-header-all-day td, .k-scheduler-content td",t)}),i.on("mouseup"+$+" mouseleave"+$,function(){i.off("mousemove"+$,".k-scheduler-header-all-day td, .k-scheduler-content td",t)}),i.on("focus"+$,function(){n._selection||n._createSelection(e(".k-scheduler-content").find("td:first")),n._select()}),i.on("focusout"+$,function(){n.view().clearSelection(),n._ctrlKey=n._shiftKey=!1}),i.on("keydown"+$,j(n._keydown,n)),i.on("keyup"+$,function(e){n._ctrlKey=e.ctrlKey,n._shiftKey=e.shiftKey}))},_select:function(){var e,t,n,i,r=this,o=r.view(),a=r.wrapper,s=o.current(),l=r._selection;s&&(s.removeAttribute("id"),s.removeAttribute("aria-label"),a.removeAttr("aria-activedescendant")),o.select(l),s=o.current(),s&&r._old!==s&&(t=l,n=r._selectedEvents(),i=o._selectedSlots,n[0]?(t=n[0]||l,e=A.format(r.options.messages.ariaEventLabel,t.title,t.start,t.start)):e=A.format(r.options.messages.ariaSlotLabel,t.start,t.end),s.setAttribute("id",r._ariaId),s.setAttribute("aria-label",e),a.attr("aria-activedescendant",r._ariaId),r._old=s,r.trigger("change",{start:l.start,end:l.end,events:n,slots:i,resources:o._resourceBySlot(l)}))},_selectedEvents:function(){for(var e,t=this._selection.events,n=t.length,i=0,r=[];n>i;i++)e=this.occurrenceByUid(t[i]),e&&r.push(e);return r},_mouseMove:function(t){var n=this;clearTimeout(n._moveTimer),n._moveTimer=setTimeout(function(){var i,r,o,a=n.view(),s=n._selection;s&&(i=a.selectionByElement(e(t.currentTarget)),i&&s.groupIndex===i.groupIndex&&(r=i.startDate(),o=i.endDate(),r>=s.end?s.backward=!1:s.start>=o&&(s.backward=!0),s.backward?s.start=r:s.end=o,n._select()))},5)},_viewByIndex:function(e){var t,n=this.views;for(t in n){if(!e)return t;e--}},_keydown:function(t){var n=this,i=t.keyCode,r=n.view(),o=r.options.editable,a=n._selection,s=t.shiftKey;n._ctrlKey=t.ctrlKey,n._shiftKey=t.shiftKey,i===R.TAB?r.moveToEvent(a,s)&&(n._select(),t.preventDefault()):o&&i===R.ENTER?a.events.length?o.update!==!1&&n.editEvent(a.events[0]):o.create!==!1&&(a.isAllDay&&(a=e.extend({},a,{end:A.date.addDays(a.end,-1)})),n.addEvent(W({},a,r._resourceBySlot(a)))):i===R.DELETE&&o!==!1&&o.destroy!==!1?n.removeEvent(a.events[0]):i>=49&&57>=i?n.view(n._viewByIndex(i-49)):r.move(a,i,s)&&(r.inRange(a)?n._select():n.date(a.start),t.preventDefault()),n._adjustSelectedDate()},_createSelection:function(t){var n,i,r;this._selection&&(this._ctrlKey||this._shiftKey)||(this._selection={events:[],groupIndex:0}),t=e(t),r=this._selection,n=t.attr(A.attr("uid")),i=this.view().selectionByElement(t),i&&(r.groupIndex=i.groupIndex||0),n&&(i=l(this._data,n)),i&&i.uid&&(n=[i.uid]),this._updateSelection(i,n),this._adjustSelectedDate()},_updateSelection:function(e,t){var n,i,r=this._selection;e&&r&&(n=this.view(),e.uid&&(e=n._updateEventForSelection(e)),this._shiftKey&&r.start&&r.end?(i=r.end>e.end,r.end=e.endDate?e.endDate():e.end,i&&n._timeSlotInterval&&A.date.setTime(r.end,-n._timeSlotInterval())):(r.start=e.startDate?e.startDate():e.start,r.end=e.endDate?e.endDate():e.end),r.isAllDay="isDaySlot"in e?e.isDaySlot:e.isAllDay,r.index=e.index,r.events=this._ctrlKey?r.events.concat(t||[]):t||[])},options:{name:"Scheduler",date:nt,editable:!0,autoBind:!0,snap:!0,mobile:!1,timezone:"",allDaySlot:!0,min:new Date(1900,0,1),max:new Date(2099,11,31),toolbar:null,messages:{today:"Today",pdf:"Export to PDF",save:"Save",cancel:"Cancel",destroy:"Delete",deleteWindowTitle:"Delete event",ariaSlotLabel:"Selected from {0:t} to {1:t}",ariaEventLabel:"{0} on {1:D} at {2:t}",views:{day:"Day",week:"Week",workWeek:"Work Week",agenda:"Agenda",month:"Month",timeline:"Timeline",timelineWeek:"Timeline Week",timelineWorkWeek:"Timeline Work Week",timelineMonth:"Timeline Month"},recurrenceMessages:{deleteWindowTitle:"Delete Recurring Item",deleteWindowOccurrence:"Delete current occurrence",deleteWindowSeries:"Delete the series",editWindowTitle:"Edit Recurring Item",editWindowOccurrence:"Edit current occurrence",editWindowSeries:"Edit the series"},editor:{title:"Title",start:"Start",end:"End",allDayEvent:"All day event",description:"Description",repeat:"Repeat",timezone:" ",startTimezone:"Start timezone",endTimezone:"End timezone",separateTimezones:"Use separate start and end time zones",timezoneEditorTitle:"Timezones",timezoneEditorButton:"Time zone",timezoneTitle:"Time zones",noTimezone:"No timezone",editorTitle:"Event"}},height:null,width:null,resources:[],group:{resources:[],direction:"horizontal"},views:[],selectable:!1},events:[X,et,Q,J,"add","dataBinding","dataBound","moveStart","move","moveEnd","resizeStart","resize","resizeEnd","navigate","change"],destroy:function(){var t,n=this;L.fn.destroy.call(n),n.dataSource&&(n.dataSource.unbind(K,n._refreshHandler),n.dataSource.unbind("progress",n._progressHandler),n.dataSource.unbind("error",n._errorHandler)),n.calendar&&(n.calendar.destroy(),n.popup.destroy()),n.view()&&n.view().destroy(),n._editor&&n._editor.destroy(),this._moveDraggable&&this._moveDraggable.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),t=n.element.add(n.wrapper).add(n.toolbar).add(n.popup),t.off($),clearTimeout(n._moveTimer),n._model=null,n.toolbar=null,n.element=null,e(window).off("resize"+$,n._resizeHandler),A.destroy(n.wrapper)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch()},items:function(){return this.wrapper.find(".k-event, .k-task")},_movable:function(){var n,i,r,o,a,s,l=this,c=l._isMobile(),d=l.options.editable&&l.options.editable.move!==!1,u=l.options.editable&&l.options.editable.resize!==!1;(d||u&&c)&&(l._moveDraggable=new A.ui.Draggable(l.element,{distance:0,filter:".k-event",ignore:".k-resize-handle",holdToDrag:c}),d&&l._moveDraggable.bind("dragstart",function(e){var o=l.view(),d=e.currentTarget;return o.options.editable&&o.options.editable.move!==!1?c&&!d.hasClass("k-event-active")?(l.element.find(".k-event-active").removeClass("k-event-active"),e.preventDefault(),t):(a=l.occurrenceByUid(d.attr(A.attr("uid"))),s=a.clone(),o._updateEventForMove(s),n=o._slotByPosition(e.x.startLocation,e.y.startLocation),r=n.startOffset(e.x.startLocation,e.y.startLocation,l.options.snap),i=n,(!n||l.trigger("moveStart",{event:a}))&&e.preventDefault(),t):(e.preventDefault(),t)}).bind("drag",function(e){var t,n,c=l.view(),d=c._slotByPosition(e.x.location,e.y.location);d&&(o=d.startOffset(e.x.location,e.y.location,l.options.snap),t=o-r,c._updateMoveHint(s,d.groupIndex,t),n=m(s,t),l.trigger("move",{event:a,slot:{element:d.element,start:d.startDate(),end:d.endDate()},resources:c._resourceBySlot(d),start:n.start,end:n.end})?c._updateMoveHint(s,d.groupIndex,t):i=d)}).bind("dragend",function(t){var c,d,u,h,p,f,g;l.view()._removeMoveHint(),c=o-r,d=m(s,c),u=d.start,h=d.end,p=l.view()._resourceBySlot(i),f=l.view()._resourceBySlot(n),g=l.trigger("moveEnd",{event:a,slot:{element:i.element,start:i.startDate(),end:i.endDate()},start:u,end:h,resources:p}),g||s.start.getTime()==u.getTime()&&s.end.getTime()==h.getTime()&&A.stringify(p)==A.stringify(f)||(l.view()._updateEventForMove(a),l._updateEvent(null,a,e.extend({start:u,end:h},p))),t.currentTarget.removeClass("k-event-active"),this.cancelHold()}).bind("dragcancel",function(){l.view()._removeMoveHint(),this.cancelHold()}),c&&(l._moveDraggable.bind("hold",function(e){l.element.find(".k-scheduler-monthview").length&&e.preventDefault(),l.element.find(".k-event-active").removeClass("k-event-active"),e.currentTarget.addClass("k-event-active")}),l._moveDraggable.userEvents.bind("press",function(e){e.preventDefault()})))},_resizable:function(){function t(e){var t,n={"k-resize-e":"east","k-resize-w":"west","k-resize-n":"north","k-resize-s":"south"};for(t in n)if(e.hasClass(t))return n[t]}var n,i,r,o,a,s=this;s._resizeDraggable=new A.ui.Draggable(s.element,{distance:0,filter:".k-resize-handle",dragstart:function(t){var l=e(t.currentTarget),c=l.closest(".k-event"),d=c.attr(A.attr("uid")),u=s.view();r=s.occurrenceByUid(d),o=r.clone(),u._updateEventForResize(o),a=u._slotByPosition(t.x.startLocation,t.y.startLocation),s.trigger("resizeStart",{event:r})&&t.preventDefault(),n=A.date.toUtcTime(o.start),i=A.date.toUtcTime(o.end)},drag:function(l){var c,d,u,h,p,f;a&&(c=e(l.currentTarget),d=t(c),u=s.view(),h=u._slotByPosition(l.x.location,l.y.location),h&&a.groupIndex==h.groupIndex&&(a=h,p=n,f=i,"south"==d?!a.isDaySlot&&a.end-A.date.toUtcTime(o.start)>=u._timeSlotInterval()&&(i=o.isAllDay?a.startOffset(l.x.location,l.y.location,s.options.snap):a.endOffset(l.x.location,l.y.location,s.options.snap)):"north"==d?!a.isDaySlot&&A.date.toUtcTime(o.end)-a.start>=u._timeSlotInterval()&&(n=a.startOffset(l.x.location,l.y.location,s.options.snap)):"east"==d?a.isDaySlot&&A.date.toUtcTime(A.date.getDate(a.endDate()))>=A.date.toUtcTime(A.date.getDate(o.start))?i=o.isAllDay?a.startOffset(l.x.location,l.y.location,s.options.snap):a.endOffset(l.x.location,l.y.location,s.options.snap):!a.isDaySlot&&a.end-A.date.toUtcTime(o.start)>=u._timeSlotInterval()&&(i=a.endOffset(l.x.location,l.y.location,s.options.snap)):"west"==d&&(a.isDaySlot&&A.date.toUtcTime(A.date.getDate(o.end))>=A.date.toUtcTime(A.date.getDate(a.startDate()))?n=a.startOffset(l.x.location,l.y.location,s.options.snap):!a.isDaySlot&&A.date.toUtcTime(o.end)-a.start>=u._timeSlotInterval()&&(n=a.startOffset(l.x.location,l.y.location,s.options.snap))),s.trigger("resize",{event:r,slot:{element:a.element,start:a.startDate(),end:a.endDate()},start:A.timezone.toLocalDate(n),end:A.timezone.toLocalDate(i),resources:u._resourceBySlot(a)})?(n=p,i=f):u._updateResizeHint(o,a.groupIndex,n,i)))},dragend:function(l){var c,d=e(l.currentTarget),u=new Date(o.start.getTime()),h=new Date(o.end.getTime()),p=t(d);s.view()._removeResizeHint(),"south"==p?h=A.timezone.toLocalDate(i):"north"==p?u=A.timezone.toLocalDate(n):"east"==p?h=a.isDaySlot?A.date.getDate(A.timezone.toLocalDate(i)):A.timezone.toLocalDate(i):"west"==p&&(a.isDaySlot?(u=new Date(A.timezone.toLocalDate(n)),u.setHours(0),u.setMinutes(0)):u=A.timezone.toLocalDate(n)),c=s.trigger("resizeEnd",{event:r,slot:{element:a.element,start:a.startDate(),end:a.endDate()},start:u,end:h,resources:s.view()._resourceBySlot(a)}),!c&&h.getTime()>=u.getTime()&&(o.start.getTime()!=u.getTime()||o.end.getTime()!=h.getTime())&&(s.view()._updateEventForResize(r),s._updateEvent(p,r,{start:u,end:h})),a=null,r=null},dragcancel:function(){s.view()._removeResizeHint(),a=null,r=null}})},_updateEvent:function(e,t,n){var i=this,r=function(e,t){try{i._preventRefresh=!0,e.update(n),i._convertDates(e)}finally{i._preventRefresh=!1}i.trigger(J,{event:e})||(t&&t(),i._updateSelection(e),i.dataSource.sync())},o=function(e){return e.recurrenceRule?i.dataSource.getByUid(e.uid):i.dataSource.get(e.recurrenceId)},a=function(){var a,s,l=o(t);("south"==e||"north"==e)&&(n.start&&(a=A.date.getDate(l.start),A.date.setTime(a,z(n.start)),n.start=a),n.end&&(s=A.date.getDate(l.end),A.date.setTime(s,z(n.end)),n.end=s)),i.dataSource._removeExceptions(l),r(l)},s=function(){var e=o(t),n=function(){i._convertDates(e)},a=e.toOccurrence({start:t.start,end:t.end});r(i.dataSource.add(a),n)},l=i.options.messages.recurrenceMessages;t.recurrenceRule||t.isOccurrence()?i.showDialog({model:t,title:l.editWindowTitle,text:l.editRecurring?l.editRecurring:at,buttons:[{text:l.editWindowOccurrence,click:s},{text:l.editWindowSeries,click:a}]}):r(i.dataSource.getByUid(t.uid))},_modelForContainer:function(t){return t=e(t).closest("["+A.attr("uid")+"]"),this.dataSource.getByUid(t.attr(A.attr("uid")))},showDialog:function(e){this._editor.showDialog(e)},focus:function(){this.wrapper.focus()},_confirmation:function(e,t){var n,i,r,o=this.options.editable;o===!0||o.confirmation!==!1?(n=this.options.messages,i=typeof o.confirmation===O?o.confirmation:rt,r=[{name:"destroy",text:n.destroy,click:function(){e()}}],this._isMobile()&&A.mobile.ui.Pane||r.push({name:"canceledit",text:n.cancel,click:function(){e(!0)}}),this.showDialog({model:t,text:i,title:n.deleteWindowTitle,buttons:r})):e()},addEvent:function(e){var t,n,i=this._editor.editable,r=this.dataSource;e=e||{},n=this.trigger("add",{event:e}),!n&&(i&&i.end()||!i)&&(this.cancelEvent(),e&&e.toJSON&&(e=e.toJSON()),t=r.add(e),t&&(this.cancelEvent(),this._editEvent(t)))},saveEvent:function(){var e,t,n,i=this._editor;i&&(e=i.editable,t=i.container,n=this._modelForContainer(t),t&&e&&e.end()&&!this.trigger(J,{container:t,event:n})&&(n.isRecurrenceHead()&&this.dataSource._removeExceptions(n),n.dirty||n.isOccurrence()||this._convertDates(n,"remove"),this.dataSource.sync()))},cancelEvent:function(){var e,t=this._editor,n=t.container;n&&(e=this._modelForContainer(n),e&&e.isOccurrence()&&(this._convertDates(e,"remove"),this._convertDates(this.dataSource.get(e.recurrenceId),"remove")),this.dataSource.cancelChanges(e),t.close())},editEvent:function(e){var t="string"==typeof e?this.occurrenceByUid(e):e;t&&(this.cancelEvent(),t.isRecurring()?this._editRecurringDialog(t):this._editEvent(t))},_editEvent:function(e){this._createPopupEditor(e)},_editRecurringDialog:function(e){var t=this,n=function(){e.isException()?t._editEvent(e):t.addEvent(e)},i=function(){e.recurrenceId&&(e=t.dataSource.get(e.recurrenceId)),t._editEvent(e)},r=t.options.messages.recurrenceMessages;t.showDialog({model:e,title:r.editWindowTitle,text:r.editRecurring?r.editRecurring:at,buttons:[{text:r.editWindowOccurrence,click:n},{text:r.editWindowSeries,click:i}]})},_createButton:function(e){var t=e.template||st,n=typeof e===O?e:e.name||e.text,i={className:"k-scheduler-"+(n||"").replace(/\s/g,""),text:n,attr:""};if(!(n||U(e)&&e.template))throw Error("Custom commands should have name specified");return U(e)?(e.className&&(e.className+=" "+i.className),"edit"===n&&U(e.text)&&(e=W(!0,{},e),e.text=e.text.edit),i=W(!0,i,v[n],e)):i=W(!0,i,v[n]),A.template(t)(i)},_convertDates:function(e,t){var n=this.dataSource.reader.timezone,i=e.startTimezone,r=e.endTimezone,o=e.start,a=e.start;t=t||"apply",i=i||r,r=r||i,i&&(n?"apply"===t?(o=A.timezone.convert(e.start,n,i),a=A.timezone.convert(e.end,n,r)):(o=A.timezone.convert(e.start,i,n),a=A.timezone.convert(e.end,r,n)):(o=A.timezone[t](e.start,i),a=A.timezone[t](e.end,r)),e._set("start",o),e._set("end",a))},_createEditor:function(){var e,n=this;e=n._editor=this._isMobile()&&A.mobile.ui.Pane?new w(this.wrapper,W({},this.options,{target:this,timezone:n.dataSource.reader.timezone,resources:n.resources,createButton:j(this._createButton,this)})):new b(this.wrapper,W({},this.options,{target:this,createButton:j(this._createButton,this),timezone:n.dataSource.reader.timezone,resources:n.resources})),e.bind("cancel",function(e){return n.trigger("cancel",{container:e.container,event:e.model})?(e.preventDefault(),t):(n.cancelEvent(),n.focus(),t)}),e.bind("edit",function(e){n.trigger(et,{container:e.container,event:e.model})&&e.preventDefault()}),e.bind("save",function(){n.saveEvent()}),e.bind("remove",function(e){n.removeEvent(e.model)})},_createPopupEditor:function(e){var t=this._editor;(!e.isNew()||e.isOccurrence())&&(e.isOccurrence()&&this._convertDates(e.recurrenceId?this.dataSource.get(e.recurrenceId):e),this._convertDates(e)),this.editable=t.editEvent(e)},removeEvent:function(e){var t=this,n="string"==typeof e?t.occurrenceByUid(e):e;n&&(n.isRecurring()?t._deleteRecurringDialog(n):t._confirmation(function(e){e||t._removeEvent(n)},n))},occurrenceByUid:function(e){var t=this.dataSource.getByUid(e);return t||(t=l(this._data,e)),t},occurrencesInRange:function(e,t){return new A.data.Query(this._data).filter({logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lt",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:e},{field:"end",operator:"gt",value:e}]}]}).toArray()},_removeEvent:function(e){this.trigger(X,{event:e})||this.dataSource.remove(e)&&this.dataSource.sync()},_deleteRecurringDialog:function(e){var t=this,n=e,i=function(){var e=n.recurrenceId?n:n.toOccurrence(),i=t.dataSource.get(e.recurrenceId);t._convertDates(i),t._removeEvent(e)},r=function(){n.recurrenceId&&(n=t.dataSource.get(n.recurrenceId)),t._removeEvent(n)},o=t.options.messages.recurrenceMessages;t.showDialog({model:e,title:o.deleteWindowTitle,text:o.deleteRecurring?o.deleteRecurring:ot,buttons:[{text:o.deleteWindowOccurrence,click:i},{text:o.deleteWindowSeries,click:r}]})},_unbindView:function(e){var t=this;t.angular("cleanup",function(){return{elements:t.items()}}),e.destroy()},_bindView:function(e){var t=this;t.options.editable&&(t._viewRemoveHandler&&e.unbind(X,t._viewRemoveHandler),t._viewRemoveHandler=function(e){t.removeEvent(e.uid)},e.bind(X,t._viewRemoveHandler),t._viewAddHandler&&e.unbind(Z,t._viewAddHandler),t._viewAddHandler=function(e){t.addEvent(e.eventInfo)},e.bind(Z,this._viewAddHandler),t._viewEditHandler&&e.unbind(et,t._viewEditHandler),t._viewEditHandler=function(e){t.editEvent(e.uid)},e.bind(et,this._viewEditHandler)),t._viewNavigateHandler&&e.unbind("navigate",t._viewNavigateHandler),t._viewNavigateHandler=function(e){var n,i;e.view&&(n="isWorkDay"in e,i=n?"changeWorkDay":"changeView",t.trigger("navigate",{view:e.view,isWorkDay:e.isWorkDay,action:i,date:e.date})||(n&&(t._workDayMode=e.isWorkDay),t._selectView(e.view),t.date(e.date)))},e.bind("navigate",t._viewNavigateHandler),t._viewActivateHandler&&e.unbind("activate",t._viewActivateHandler),t._viewActivateHandler=function(){var e=this;t._selection&&(e.constrainSelection(t._selection),t._select(),t._adjustSelectedDate())},e.bind("activate",t._viewActivateHandler)},_selectView:function(e){var t=this;e&&t.views[e]&&(t._selectedView&&t._unbindView(t._selectedView),t._selectedView=t._renderView(e),t._selectedViewName=e,t.toolbar.find(".k-scheduler-views li").removeClass("k-state-selected").end().find(".k-view-"+e.replace(/\./g,"\\.").toLowerCase()).addClass("k-state-selected"))},view:function(e){var n=this;return e?(n._selectView(e),n.rebind(),t):n._selectedView},_renderView:function(e){var t=this._initializeView(e);return this._bindView(t),this._model.set("formattedDate",t.dateForTitle()),t},resize:function(e){var t=this.getSize(),n=this._size,i=this.view();i&&i.groups&&(e||!n||t.width!==n.width||t.height!==n.height)&&(this.refresh({action:"resize"}),this._size=t)},_adjustSelectedDate:function(){var e=this._model.selectedDate,t=this._selection,n=t.start;n&&!A.date.isInDateRange(e,I(n),I(t.end))&&e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate())},_initializeView:function(e){var t,n,i=this.views[e];if(i){if(t=U(i),n=i.type,typeof n===O&&(n=A.getter(i.type)(window)),!n)throw Error("There is no such view");i=new n(this.wrapper,h(W(!0,{},this.options,t?i:{},{resources:this.resources,date:this.date(),showWorkHours:this._workDayMode})))}return i},_views:function(){var e,t,n,i,r,o,a,s,l,c=this.options.views;for(this.views={},a=0,s=c.length;s>a;a++)l=!1,e=c[a],i=U(e),i?(o=r=e.type?e.type:e,typeof o!==O&&(r=e.title,l=!0)):o=r=e,t=x[r],t&&!l&&(e.type=t.type,t.title=this.options.messages.views[r],"day"===t.type?t.messages={allDay:this.options.messages.allDay}:"agenda"===t.type&&(t.messages={event:this.options.messages.event,date:this.options.messages.date,time:this.options.messages.time})),e=W({title:r},t,i?e:{}),r&&(this.views[r]=e,(!n||e.selected)&&(n=r));n&&(this._selectedViewName=n)},rebind:function(){this.dataSource.fetch()},_dataSource:function(){var e=this,t=e.options,n=t.dataSource;n=q(n)?{data:n}:n,!t.timezone||n instanceof wt?n instanceof wt&&(t.timezone=n.schema?n.schema.timezone:""):n=W(!0,n,{schema:{timezone:t.timezone}}),e.dataSource&&e._refreshHandler?e.dataSource.unbind(K,e._refreshHandler).unbind("progress",e._progressHandler).unbind("error",e._errorHandler):(e._refreshHandler=j(e.refresh,e),e._progressHandler=j(e._requestStart,e),e._errorHandler=j(e._error,e)),e.dataSource=A.data.SchedulerDataSource.create(n).bind(K,e._refreshHandler).bind("progress",e._progressHandler).bind("error",e._errorHandler),e.options.dataSource=e.dataSource},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_progress:function(e){var t=this.element.find(".k-scheduler-content");A.ui.progress(t,e)},_resources:function(){var t,n,i,r,o,a=this,s=a.options.resources;for(t=0;s.length>t;t++){if(n=s[t],i=n.field,r=n.dataSource,!i||!r)throw Error('The "field" and "dataSource" options of the scheduler resource are mandatory.');a.resources.push({field:i,name:n.name||i,title:n.title||i,dataTextField:n.dataTextField||"text",dataValueField:n.dataValueField||"value",dataColorField:n.dataColorField||"color",valuePrimitive:null!=n.valuePrimitive?n.valuePrimitive:!0,multiple:n.multiple||!1,dataSource:A.data.DataSource.create(r)})}o=e.map(a.resources,function(e){return e.dataSource.fetch()}),e.when.apply(null,o).then(function(){a.options.autoBind?a.view(a._selectedViewName):a._selectView(a._selectedViewName)})},_initModel:function(){var e=this;e._model=A.observable({selectedDate:new Date(this.options.date),formattedDate:""}),e._model.bind("change",function(t){"selectedDate"===t.field&&e.view(e._selectedViewName)})},_wrapper:function(){var e=this,t=e.options,n=t.height,i=t.width;e.wrapper=e.element.addClass("k-widget k-scheduler k-floatwrap").attr("role","grid").attr("aria-multiselectable",!0),e._isMobile()&&e.wrapper.addClass("k-scheduler-mobile"),e._isMobilePhoneView()&&e.wrapper.addClass("k-scheduler-phone"),n&&e.wrapper.height(n),i&&e.wrapper.width(i)},date:function(e){return null!=e&&I(e)>=I(this.options.min)&&I(e)<=I(this.options.max)&&this._model.set("selectedDate",e),I(this._model.get("selectedDate"))},_toolbar:function(){var n,i,r=this,o=r.options,a=[];o.toolbar&&(a=e.isArray(o.toolbar)?o.toolbar:[o.toolbar]),n=this._isMobilePhoneView()?ct:lt,i=e(n({messages:o.messages,pdf:e.grep(a,function(e){return"pdf"==e||"pdf"==e.name}).length>0,ns:A.ns,views:r.views})),r.wrapper.append(i),r.toolbar=i,A.bind(r.toolbar,r._model),i.on(Y+$,".k-pdf",function(e){e.preventDefault(),r.saveAsPDF()}),i.on(Y+$,".k-scheduler-navigation li",function(n){var i=e(this),o=new Date(r.date()),a="";if(n.preventDefault(),i.hasClass("k-nav-today"))a="today",o=new Date;else if(i.hasClass("k-nav-next"))a="next",o=r.view().nextDate();else if(i.hasClass("k-nav-prev"))a="previous",o=r.view().previousDate();else if(i.hasClass("k-nav-current")&&!r._isMobilePhoneView())return r._showCalendar(),t;r.trigger("navigate",{view:r._selectedViewName,action:a,date:o})||r.date(o)}),i.on(Y+$,".k-scheduler-views li",function(t){t.preventDefault();var n=e(this).attr(A.attr("name"));r.trigger("navigate",{view:n,action:"changeView",date:r.date()})||r.view(n)}),i.find("li").hover(function(){e(this).addClass("k-state-hover")},function(){e(this).removeClass("k-state-hover")})},_showCalendar:function(){var t=this,n=t.toolbar.find(".k-nav-current"),i=e('<div class="k-calendar-container"><div class="k-scheduler-calendar"/></div>');t.popup||(t.popup=new H(i,{anchor:n,activate:function(){t.calendar||(t.calendar=new N(this.element.find(".k-scheduler-calendar"),{change:function(){var e=this.value();t.trigger("navigate",{view:t._selectedViewName,action:"changeDate",date:e})||(t.date(e),t.popup.close())},min:t.options.min,max:t.options.max})),t.calendar.value(t.date())},copyAnchorStyles:!1})),t.popup.open()},refresh:function(e){var t=this,n=this.view();this._progress(!1),this.angular("cleanup",function(){return{elements:t.items()}}),e=e||{},n&&(e&&"itemchange"===e.action&&(this._editor.editable||this._preventRefresh)||this.trigger("dataBinding",{action:e.action||"rebind",index:e.index,items:e.items})||(e&&"resize"===e.action||!this._editor||this._editor.close(),this._data=this.dataSource.expand(n.startDate(),n.endDate()),n.render(this._data),this.trigger("dataBound")))},slotByPosition:function(e,t){var n,i=this.view();return i._slotByPosition?(n=i._slotByPosition(e,t),n?{startDate:n.startDate(),endDate:n.endDate(),groupIndex:n.groupIndex,element:n.element,isDaySlot:n.isDaySlot}:null):null},slotByElement:function(t){var n=e(t).offset();
return this.slotByPosition(n.left,n.top)},resourcesBySlot:function(e){return this.view()._resourceBySlot(e)}}),x={day:{type:"kendo.ui.DayView"},week:{type:"kendo.ui.WeekView"},workWeek:{type:"kendo.ui.WorkWeekView"},agenda:{type:"kendo.ui.AgendaView"},month:{type:"kendo.ui.MonthView"},timeline:{type:"kendo.ui.TimelineView"},timelineWeek:{type:"kendo.ui.TimelineWeekView"},timelineWorkWeek:{type:"kendo.ui.TimelineWorkWeekView"},timelineMonth:{type:"kendo.ui.TimelineMonthView"}},B.plugin(k),A.PDFMixin&&A.PDFMixin.extend(k.prototype),C=L.extend({init:function(e,t){var n=this,i=A.timezone.windows_zones;if(!i||!A.timezone.zones_titles)throw Error("kendo.timezones.min.js is not included.");L.fn.init.call(n,e,t),n.wrapper=n.element,n._zonesQuery=new A.data.Query(i),n._zoneTitleId=A.guid(),n._zoneTitlePicker(),n._zonePicker(),n.value(n.options.value)},options:{name:"TimezoneEditor",value:"",optionLabel:"No timezone"},events:["change"],_zoneTitlePicker:function(){var t=this,n=e('<input id="'+t._zoneTitleId+'"/>').appendTo(t.wrapper);t._zoneTitle=new A.ui.DropDownList(n,{dataSource:A.timezone.zones_titles,dataValueField:"other_zone",dataTextField:"name",optionLabel:t.options.optionLabel,cascade:function(){this.value()||t._zone.wrapper.hide()}})},_zonePicker:function(){var t=this,n=e("<input />").appendTo(this.wrapper);t._zone=new A.ui.DropDownList(n,{dataValueField:"zone",dataTextField:"territory",dataSource:t._zonesQuery.data,cascadeFrom:t._zoneTitleId,cascade:function(){t._value=this.value(),t.trigger("change")},dataBound:function(){t._value=this.value(),this.wrapper.toggle(this.dataSource.view().length>1)}}),t._zone.wrapper.hide()},destroy:function(){L.fn.destroy.call(this),A.destroy(this.wrapper)},value:function(e){var n,i=this;return e===t?i._value:(n=i._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0],n?(i._zoneTitle.value(n.other_zone),i._zone.value(n.zone)):i._zoneTitle.value(""),t)}}),B.plugin(C),S=A.template('<option value="#=other_zone#">#=name#</option>'),T=A.template('<option value="#=zone#">#=territory#</option>'),D=L.extend({init:function(e,t){var n=this,i=A.timezone.windows_zones;if(!i||!A.timezone.zones_titles)throw Error("kendo.timezones.min.js is not included.");L.fn.init.call(n,e,t),n.wrapper=n.element,n._zonesQuery=new A.data.Query(i),n._zoneTitlePicker(),n._zonePicker(),n.value(n.options.value)},options:{name:"MobileTimezoneEditor",optionLabel:"No timezone",value:""},events:["change"],_bindZones:function(e){var t=e?this._filter(e):[];this._zone.html(this._options(t,T))},_filter:function(e){return this._zonesQuery.filter({field:"other_zone",operator:"eq",value:e}).data},_options:function(e,t,n){var i=0,r="",o=e.length;for(n&&(r+=t({other_zone:"",name:n}));o>i;i++)r+=t(e[i]);return r},_zoneTitlePicker:function(){var t=this,n=t._options(A.timezone.zones_titles,S,t.options.optionLabel);t._zoneTitle=e("<select>"+n+"</select>").appendTo(t.wrapper).change(function(){var e=this.value,n=t._zone;t._bindZones(e),e&&n[0].children.length>1?n.show():n.hide(),t._value=n[0].value,t.trigger("change")})},_zonePicker:function(){var t=this;t._zone=e('<select style="display:none"></select>').appendTo(this.wrapper).change(function(){t._value=this.value,t.trigger("change")}),t._bindZones(t._zoneTitle.val()),t._value=t._zone[0].value},destroy:function(){L.fn.destroy.call(this),A.destroy(this.wrapper)},value:function(e){var n,i=this,r=i._zone,o="",a="";return e===t?i._value:(n=i._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0],n&&(a=n.zone,o=n.other_zone),i._zoneTitle.val(o),i._bindZones(o),r.val(a),a=r[0].value,a&&r[0].children.length>1?r.show():r.hide(),i._value=a,t)}}),B.plugin(D)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.ui.Widget,i=e.proxy,r=Math.abs,o=20,a=t.Class.extend({init:function(n,i,o){o=e.extend({minXDelta:30,maxYDelta:20,maxDuration:1e3},o),new t.UserEvents(n,{surface:o.surface,allowSelection:!0,start:function(e){2*r(e.x.velocity)>=r(e.y.velocity)&&e.sender.capture()},move:function(e){var t=e.touch,n=e.event.timeStamp-t.startTime,a=t.x.initialDelta>0?"right":"left";r(t.x.initialDelta)>=o.minXDelta&&r(t.y.initialDelta)<o.maxYDelta&&o.maxDuration>n&&(i({direction:a,touch:t,target:t.target}),t.cancel())}})}}),s=n.extend({init:function(e,r){function o(e){return function(t){s._triggerTouch(e,t)}}function a(e){return function(t){s.trigger(e,{touches:t.touches,distance:t.distance,center:t.center,event:t.event})}}var s=this;n.fn.init.call(s,e,r),r=s.options,e=s.element,s.events=new t.UserEvents(e,{filter:r.filter,surface:r.surface,minHold:r.minHold,multiTouch:r.multiTouch,allowSelection:!0,press:o("touchstart"),hold:o("hold"),tap:i(s,"_tap"),gesturestart:a("gesturestart"),gesturechange:a("gesturechange"),gestureend:a("gestureend")}),r.enableSwipe?(s.events.bind("start",i(s,"_swipestart")),s.events.bind("move",i(s,"_swipemove"))):(s.events.bind("start",i(s,"_dragstart")),s.events.bind("move",o("drag")),s.events.bind("end",o("dragend"))),t.notify(s)},events:["touchstart","dragstart","drag","dragend","tap","doubletap","hold","swipe","gesturestart","gesturechange","gestureend"],options:{name:"Touch",surface:null,global:!1,multiTouch:!1,enableSwipe:!1,minXDelta:30,maxYDelta:20,maxDuration:1e3,minHold:800,doubleTapTimeout:800},cancel:function(){this.events.cancel()},_triggerTouch:function(e,t){this.trigger(e,{touch:t.touch,event:t.event})&&t.preventDefault()},_tap:function(e){var n=this,i=n.lastTap,r=e.touch;i&&n.options.doubleTapTimeout>r.endTime-i.endTime&&t.touchDelta(r,i).distance<o?(n._triggerTouch("doubletap",e),n.lastTap=null):(n._triggerTouch("tap",e),n.lastTap=r)},_dragstart:function(e){this._triggerTouch("dragstart",e)},_swipestart:function(e){2*r(e.x.velocity)>=r(e.y.velocity)&&e.sender.capture()},_swipemove:function(e){var t=this,n=t.options,i=e.touch,o=e.event.timeStamp-i.startTime,a=i.x.initialDelta>0?"right":"left";r(i.x.initialDelta)>=n.minXDelta&&r(i.y.initialDelta)<n.maxYDelta&&n.maxDuration>o&&(t.trigger("swipe",{direction:a,touch:e.touch}),i.cancel())}});window.jQuery.fn.kendoMobileSwipe=function(e,t){this.each(function(){new a(this,e,t)})},t.ui.plugin(s)}(window.kendo.jQuery),function(e){function t(e){var t,n,i=[],r=e.className;for(t=0,n=e.level;n>t;t++)i.push(o("span",{className:r}));return i}function n(){var t=i._activeElement();"body"!==t.nodeName.toLowerCase()&&e(t).blur()}var i=window.kendo,r=i.dom,o=r.element,a=r.text,s=i.support.mobileOS,l=i.ui,c=l.Widget,d=e.extend,u=e.map,h=e.isFunction,p=i.keys,f={title:"Title",start:"Start Time",end:"End Time",percentComplete:"% Done",parentId:"Predecessor ID",id:"ID",orderId:"Order ID"},g="string",m=".kendoGanttList",v="click",_=".",y={wrapper:"k-treelist k-grid k-widget",header:"k-header",alt:"k-alt",editCell:"k-edit-cell",group:"k-treelist-group",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",selected:"k-state-selected",icon:"k-icon",iconCollapse:"k-i-collapse",iconExpand:"k-i-expand",iconHidden:"k-i-none",iconPlaceHolder:"k-icon k-i-none",input:"k-input",dropPositions:"k-insert-top k-insert-bottom k-add k-insert-middle",dropTop:"k-insert-top",dropBottom:"k-insert-bottom",dropAdd:"k-add",dropMiddle:"k-insert-middle",dropDenied:"k-denied",dragStatus:"k-drag-status",dragClue:"k-drag-clue",dragClueText:"k-clue-text"},w=l.GanttList=c.extend({init:function(e,t){c.fn.init.call(this,e,t),0===this.options.columns.length&&this.options.columns.push("title"),this.dataSource=this.options.dataSource,this._columns(),this._layout(),this._domTrees(),this._header(),this._sortable(),this._editable(),this._selectable(),this._draggable(),this._attachEvents(),this._adjustHeight()},_adjustHeight:function(){this.content.height(this.element.height()-this.header.parent().outerHeight())},destroy:function(){c.fn.destroy.call(this),this._reorderDraggable&&this._reorderDraggable.destroy(),this._tableDropArea&&this._tableDropArea.destroy(),this._contentDropArea&&this._contentDropArea.destroy(),this.touch&&this.touch.destroy(),this.content.off(m),this.header=null,this.content=null,this.levels=null,i.destroy(this.element)},options:{name:"GanttList",selectable:!0,editable:!0},_attachEvents:function(){var t=this,n=w.styles;t.content.on(v+m,"td > span."+n.icon+":not(."+n.iconHidden+")",function(n){var i=e(this),r=t._modelFromElement(i);r.set("expanded",!r.get("expanded")),n.stopPropagation()})},_domTrees:function(){this.headerTree=new r.Tree(this.header[0]),this.contentTree=new r.Tree(this.content[0])},_columns:function(){var e=this.options.columns,t=function(){this.field="",this.title="",this.editable=!1,this.sortable=!1};this.columns=u(e,function(e){return e="string"==typeof e?{field:e,title:f[e]}:e,d(new t,e)})},_layout:function(){var e=this.element,t=w.styles;e.addClass(t.wrapper).append("<div class='"+t.gridHeader+"'><div class='"+t.gridHeaderWrap+"'></div></div>").append("<div class='"+t.gridContentWrap+"'></div>"),this.header=e.find(_+t.gridHeaderWrap),this.content=e.find(_+t.gridContent)},_header:function(){var e=this.headerTree,t=o("colgroup",null,this._cols()),n=o("thead",{role:"rowgroup"},[o("tr",{role:"row"},this._ths())]),i=o("table",{style:{"min-width":this.options.listWidth+"px"},role:"grid"},[t,n]);e.render([i])},_render:function(e){var t,n,i;this.levels=[{field:null,value:0}],t=o("colgroup",null,this._cols()),n=o("tbody",{role:"rowgroup"},this._trs(e)),i=o("table",{style:{"min-width":this.options.listWidth+"px"},tabIndex:0,role:"treegrid"},[t,n]),this.contentTree.render([i]),this.trigger("render")},_ths:function(){var e,t,n,i,r=this.columns,s=[];for(n=0,i=r.length;i>n;n++)e=r[n],t={"data-field":e.field,"data-title":e.title,className:w.styles.header,role:"columnheader"},s.push(o("th",t,[a(e.title)]));return s},_cols:function(){var e,t,n,i,r,a=this.columns,s=[];for(i=0,r=a.length;r>i;i++)e=a[i],n=e.width,t=n&&0!==parseInt(n,10)?{style:{width:typeof n===g?n:n+"px"}}:null,s.push(o("col",t,[]));return s},_trs:function(e){var t,n,i,r,o,a=[],s=[],l=w.styles;for(r=0,o=e.length;o>r;r++)t=e[r],i=this._levels({idx:t.parentId,id:t.id,summary:t.summary}),n={"data-uid":t.uid,"data-level":i,role:"row"},t.summary&&(n["aria-expanded"]=t.expanded),r%2!==0&&s.push(l.alt),t.summary&&s.push(l.group),s.length&&(n.className=s.join(" ")),a.push(this._tds({task:t,attr:n,level:i})),s=[];return a},_tds:function(e){var t,n,i,r=[],a=this.columns;for(n=0,i=a.length;i>n;n++)t=a[n],r.push(this._td({task:e.task,column:t,level:e.level}));return o("tr",e.attr,r)},_td:function(e){var n,r,s=[],l=this.options.resourcesField,c=w.styles,d=e.task,u=e.column,h=d.get(u.field)||[];if(u.field==l){for(n=[],r=0;h.length>r;r++)n.push(i.format("{0} [{1}]",h[r].get("name"),h[r].get("formatedValue")));n=n.join(", ")}else n=u.format?i.format(u.format,h):h;return"title"===u.field&&(s=t({level:e.level,className:c.iconPlaceHolder}),s.push(o("span",{className:c.icon+" "+(d.summary?d.expanded?c.iconCollapse:c.iconExpand:c.iconHidden)}))),s.push(o("span",null,[a(n)])),o("td",{role:"gridcell"},s)},_levels:function(e){var t,n,i,r=this.levels,o=e.summary,a=e.idx,s=e.id;for(n=0,i=r.length;i>n;n++)if(t=r[n],t.field==a)return o&&r.push({field:s,value:t.value+1}),t.value},_sortable:function(){var e,t,n,r,o,a=this.options.resourcesField,s=this.columns,l=this.header.find("th");for(r=0,o=l.length;o>r;r++)e=s[r],e.sortable&&e.field!==a&&(n=l.eq(r),t=n.data("kendoColumnSorter"),t&&t.destroy(),n.attr("data-"+i.ns+"field",e.field).kendoColumnSorter({dataSource:this.dataSource}));l=null},_selectable:function(){var t=this,n=this.options.selectable;n&&this.content.on(v+m,"tr",function(n){var i=e(this);n.ctrlKey?t.clearSelection():t.select(i)})},select:function(e){var t=this.content.find(e),n=w.styles.selected;return t.length?(t.siblings(_+n).removeClass(n).attr("aria-selected",!1).end().addClass(n).attr("aria-selected",!0),void this.trigger("change")):this.content.find(_+n)},clearSelection:function(){var e=this.select();e.length&&(e.removeClass(w.styles.selected),this.trigger("change"))},_setDataSource:function(e){this.dataSource=e},_editable:function(){var t=this,i=w.styles,r="span."+i.icon+":not("+i.iconHidden+")",o=function(){t.editable&&t.editable.end()&&t._closeCell()},a=function(t){var r=e(t.currentTarget);r.hasClass(i.editCell)||n()};this.options.editable&&(this._startEditHandler=function(n){var i=n.currentTarget?e(n.currentTarget):n,r=t._columnFromElement(i);t.editable||r.editable&&t._editCell({cell:i,column:r})},t.content.on("focusin"+m,function(){clearTimeout(t.timer),t.timer=null}).on("focusout"+m,function(){t.timer=setTimeout(o,1)}).on("keydown"+m,function(e){var i,r,a=e.keyCode;switch(a){case p.ENTER:n(),o();break;case p.ESC:t.editable&&(i=t._editableContainer,r=t._modelFromElement(i),t.trigger("cancel",{model:r,cell:i})||t._closeCell(!0))}}),s?t.touch=t.content.kendoTouch({filter:"td",touchstart:function(e){a(e.touch)},doubletap:function(n){e(n.touch.initialTouch).is(r)||t._startEditHandler(n.touch)}}).data("kendoTouch"):t.content.on("mousedown"+m,"td",function(e){a(e)}).on("dblclick"+m,"td",function(n){e(n.target).is(r)||t._startEditHandler(n)}))},_editCell:function(t){var n,r=this.options.resourcesField,o=w.styles,a=t.cell,s=t.column,l=this._modelFromElement(a),c=this.dataSource._createNewModel(l.toJSON()),d=c.fields[s.field]||c[s.field],u=d.validation,p=i.attr("type"),f=i.attr("bind"),g={name:s.field,required:d.validation?d.validation.required===!0:!1};return s.field===r?void s.editor(a,c):(this._editableContent=a.children().detach(),this._editableContainer=a,a.data("modelCopy",c),"date"!==d.type&&"date"!==e.type(d)||!/H|m|s|F|g|u/.test(s.format)||("start"===s.field&&delete d.validation.dateCompare,g[f]="value:"+s.field,g[p]="date",n=function(t,n){e('<input type="text"/>').attr(g).appendTo(t).kendoDateTimePicker({format:n.format})}),this.editable=a.addClass(o.editCell).kendoEditable({fields:{field:s.field,format:s.format,editor:s.editor||n},model:c,clearContainer:!1}).data("kendoEditable"),u&&u.dateCompare&&h(u.dateCompare)&&u.message&&(e("<span "+i.attr("for")+'="'+s.field+'" class="k-invalid-msg"/>').hide().appendTo(a),a.find("[name="+s.field+"]").attr(i.attr("dateCompare-msg"),u.message)),void(this.trigger("edit",{model:l,cell:a})&&this._closeCell(!0)))},_closeCell:function(e){var t=w.styles,n=this._editableContainer,i=this._modelFromElement(n),r=this._columnFromElement(n),o=r.field,a=n.data("modelCopy"),s={};s[o]=a.get(o),n.empty().removeData("modelCopy").removeClass(t.editCell).append(this._editableContent),this.editable.destroy(),this.editable=null,this._editableContainer=null,this._editableContent=null,e||("start"===o&&(s.end=new Date(s.start.getTime()+i.duration())),this.trigger("update",{task:i,updateInfo:s}))},_draggable:function(){var t,n=this,r=null,o=!0,a=w.styles,l="tr["+i.attr("level")+" = 0]:last",c={},u=function(){r=null,t=null,o=!0,c={}},h=function(e){for(var t=e;t;){if(r.get("id")===t.get("id")){o=!1;break}t=n.dataSource.taskParent(t)}},p=function(){var n=e(t).height(),r=i.getOffset(t).top;d(t,{beforeLimit:r+.25*n,afterLimit:r+.75*n})},f=function(e){var n,r=e.location,o=a.dropAdd,s="add",l=parseInt(t.attr(i.attr("level")),10);t.beforeLimit>=r?(n=t.prev(),o=a.dropTop,s="insert-before"):r>=t.afterLimit&&(n=t.next(),o=a.dropBottom,s="insert-after"),n&&parseInt(n.attr(i.attr("level")),10)===l&&(o=a.dropMiddle),c.className=o,c.command=s},g=function(){return n._reorderDraggable.hint.children(_+a.dragStatus).removeClass(a.dropPositions)};this.options.editable&&(this._reorderDraggable=this.content.kendoDraggable({distance:10,holdToDrag:s,group:"listGroup",filter:"tr[data-uid]",ignore:_+a.input,hint:function(t){return e('<div class="'+a.header+" "+a.dragClue+'"/>').css({width:300,paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).append('<span class="'+a.icon+" "+a.dragStatus+'" /><span class="'+a.dragClueText+'"/>')},cursorOffset:{top:-20,left:0},container:this.content,dragstart:function(e){n.editable&&e.preventDefault(),r=n._modelFromElement(e.currentTarget),this.hint.children(_+a.dragClueText).text(r.get("title"))},drag:function(e){o&&(f(e.y),g().addClass(c.className))},dragend:function(){u()},dragcancel:function(){u()}}).data("kendoDraggable"),this._tableDropArea=this.content.kendoDropTargetArea({distance:0,group:"listGroup",filter:"tr[data-uid]",dragenter:function(e){t=e.dropTarget,h(n._modelFromElement(t)),p(),g().toggleClass(a.dropDenied,!o)},dragleave:function(){o=!0,g()},drop:function(){var e=n._modelFromElement(t),i=e.orderId,a={parentId:e.parentId};if(o){switch(c.command){case"add":a.parentId=e.id;break;case"insert-before":a.orderId=e.parentId===r.parentId&&e.orderId>r.orderId?i-1:i;break;case"insert-after":a.orderId=e.parentId===r.parentId&&e.orderId>r.orderId?i:i+1}n.trigger("update",{task:r,updateInfo:a})}}}).data("kendoDropTargetArea"),this._contentDropArea=this.element.kendoDropTargetArea({distance:0,group:"listGroup",filter:_+a.gridContent,drop:function(){var e=n._modelFromElement(n.content.find(l)),t=e.orderId,i={parentId:null,orderId:null!==r.parentId?t+1:t};n.trigger("update",{task:r,updateInfo:i})}}).data("kendoDropTargetArea"))},_modelFromElement:function(e){var t=e.closest("tr"),n=this.dataSource.getByUid(t.attr(i.attr("uid")));return n},_columnFromElement:function(e){var t=e.closest("td"),n=t.parent(),i=n.children().index(t);return this.columns[i]}});d(!0,l.GanttList,{styles:y})}(window.kendo.jQuery),function(e){function t(e){return delete e.name,delete e.prefix,delete e.views,e}function n(e){var t=[],n=e.workWeekStart;for(t.push(n);e.workWeekEnd!=n;)n>6?n-=7:n++,t.push(n);return t}function i(){var t=kendo._activeElement();"body"!==t.nodeName.toLowerCase()&&e(t).blur()}var r,o,a=kendo.ui.Widget,s=kendo.dom.element,l=kendo.dom.text,c=e.isPlainObject,d=e.extend,u=kendo.support.browser,h=kendo.keys,p=kendo.data.Query,f=".kendoGanttTimeline",g="click",m="dblclick",v="keydown",_=".",y=kendo.template("#=kendo.toString(start, 't')#"),w=kendo.template("#=kendo.toString(start, 'ddd M/dd')#"),b=kendo.template("#=kendo.toString(start, 'ddd M/dd')# - #=kendo.toString(kendo.date.addDays(end, -1), 'ddd M/dd')#"),k=kendo.template("#=kendo.toString(start, 'MMM')#"),x=kendo.template("#=kendo.toString(start, 'yyyy')#"),C=kendo.template('<div class="#=styles.marquee#"><div class="#=styles.marqueeColor#"></div></div>'),S=kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper#"><div class="#=styles.tooltipContent#"><div>Start: #=kendo.toString(start, "ddd M/dd HH:mm")#</div><div>End: #=kendo.toString(end, "ddd M/dd HH:mm")#</div></div></div>'),T=kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper#" ><div class="#=styles.tooltipContent#">#=text#%</div><div class="#=styles.tooltipCallout#" style="left:13px;"></div></div>'),D={day:{type:"kendo.ui.GanttDayView"},week:{type:"kendo.ui.GanttWeekView"},month:{type:"kendo.ui.GanttMonthView"},year:{type:"kendo.ui.GanttYearView"}},A={alt:"k-alt",nonWorking:"k-nonwork-hour",header:"k-header",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",rowsTable:"k-gantt-rows",columnsTable:"k-gantt-columns",tasksTable:"k-gantt-tasks",resource:"k-resource",resourceAlt:"k-resource k-alt",task:"k-task",taskSingle:"k-task-single",taskMilestone:"k-task-milestone",taskSummary:"k-task-summary",taskWrap:"k-task-wrap",taskMilestoneWrap:"k-milestone-wrap",resourcesWrap:"k-resources-wrap",taskDot:"k-task-dot",taskDotStart:"k-task-start",taskDotEnd:"k-task-end",taskDragHandle:"k-task-draghandle",taskContent:"k-task-content",taskTemplate:"k-task-template",taskActions:"k-task-actions",taskDelete:"k-task-delete",taskComplete:"k-task-complete",link:"k-link",icon:"k-icon",iconDelete:"k-si-close",taskResizeHandle:"k-resize-handle",taskResizeHandleWest:"k-resize-w",taskResizeHandleEast:"k-resize-e",taskSummaryProgress:"k-task-summary-progress",taskSummaryComplete:"k-task-summary-complete",line:"k-line",lineHorizontal:"k-line-h",lineVertical:"k-line-v",arrowWest:"k-arrow-w",arrowEast:"k-arrow-e",dragHint:"k-drag-hint",dependencyHint:"k-dependency-hint",tooltipWrapper:"k-widget k-tooltip k-popup k-group k-reset",tooltipContent:"k-tooltip-content",tooltipCallout:"k-callout k-callout-s",callout:"k-callout",marquee:"k-marquee k-gantt-marquee",marqueeColor:"k-marquee-color"},E=kendo.ui.GanttView=a.extend({init:function(e,t){a.fn.init.call(this,e,t),this.title=this.options.title||this.options.name,this.header=this.element.find(_+E.styles.gridHeader),this.content=this.element.find(_+E.styles.gridContent),this.contentWidth=this.content.width(),this._workDays=n(this.options),this._headerTree=t.headerTree,this._taskTree=t.taskTree,this._dependencyTree=t.dependencyTree,this._taskCoordinates={}},destroy:function(){a.fn.destroy.call(this),this.headerRow=null,this.header=null,this.content=null,this._dragHint=null,this._resizeHint=null,this._resizeTooltip=null,this._percentCompleteResizeTooltip=null,this._headerTree=null,this._taskTree=null,this._dependencyTree=null},options:{showWorkHours:!1,showWorkDays:!1,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,slotSize:100},renderLayout:function(){this._slots=this._createSlots(),this._tableWidth=this._calculateTableWidth(),this.createLayout(this._layout()),this._slotDimensions(),this._adjustHeight()},_adjustHeight:function(){this.content.height(this.element.height()-this.header.outerHeight())},createLayout:function(e){var t=this._headers(e),n=this._colgroup(),i=this._headerTree,r=s("thead",null,t),o=s("table",{style:{width:this._tableWidth+"px"}},[n,r]);i.render([o]),this.headerRow=this.header.find("table:first tr").last()},_slotDimensions:function(){var e,t,n,i,r=this.headerRow[0].children,o=this._timeSlots();for(n=0,i=r.length;i>n;n++)t=r[n],e=o[n],e.offsetLeft=t.offsetLeft,e.offsetWidth=t.offsetWidth},render:function(e){var t,n=e.length,i=E.styles,r=this._rowsTable(n),o=this._columnsTable(n),a=this._tasksTable(e);this._taskTree.render([r,o,a]),t=this.content.find(_+i.rowsTable),this._contentHeight=t.height(),this._rowHeight=t.find("tr").height(),this.content.find(_+i.columnsTable).height(this._contentHeight)},_rowsTable:function(e){var t,n,i=[],r=E.styles,o=[null,{className:r.alt}];for(n=0;e>n;n++)t=s("tr",o[n%2],[s("td",null,[l(" ")])]),i.push(t);return this._createTable(1,i,{className:r.rowsTable})},_columnsTable:function(){var e,t,n,i,r,o=[],a=E.styles,c=this._timeSlots(),d=c.length,u=0;for(r=0;d>r;r++)t=c[r],i={},n=t.span,u+=n,1!==n&&(i.colspan=n),t.isNonWorking&&(i.className=a.nonWorking),o.push(s("td",i,[l(" ")]));return e=s("tr",null,o),this._createTable(u,[e],{className:a.columnsTable})},_tasksTable:function(e){var t,n,i,r,o,a,l,c=[],d=E.styles,u=this._taskCoordinates={},h=this._calculateMilestoneWidth(),p=Math.round(h.width),f=this.options.resourcesField,g=[d.resource,d.resourceAlt],m=this._calculateResourcesMargin(),v=function(e){var t=i.left,n=t+i.width;r.isMilestone()&&(t-=p/2,n=t+p),u[r.id]={start:t,end:n,rowIndex:e}};for(a=0,l=e.length;l>a;a++)r=e[a],i=this._taskPosition(r),t=s("tr",null),n=s("td",null,[this._renderTask(e[a],i)]),r[f]&&r[f].length&&(o=Math.max(i.width||h.clientWidth,0)+i.left,n.children.push(s("div",{className:d.resourcesWrap,style:{left:o+"px",width:this._tableWidth-(o+m)+"px"}},this._renderResources(r[f],g[a%2])))),t.children.push(n),c.push(t),v(a);return this._createTable(1,c,{className:E.styles.tasksTable})},_createTable:function(e,t,n){var i,r,o,a=[];for(o=0;e>o;o++)a.push(s("col"));return i=s("colgroup",null,a),r=s("tbody",null,t),n.style||(n.style={}),n.style.width=this._tableWidth+"px",s("table",n,[i,r])},_calculateTableWidth:function(){var e,t,n,i,r=this._timeSlots(),o=0,a=0;for(n=0,i=r.length;i>n;n++)e=r[n].span,a+=e,e>o&&(o=e);return t=Math.round(a*this.options.slotSize/o)},_calculateMilestoneWidth:function(){var t,n=E.styles.task+" "+E.styles.taskMilestone,i=e("<div class='"+n+"' style='visibility: hidden; position: absolute'>");return this.content.append(i),t={width:i[0].getBoundingClientRect().width,clientWidth:i[0].clientWidth},i.remove(),t},_calculateResourcesMargin:function(){var t,n=e("<div class='"+E.styles.resourcesWrap+"' style='visibility: hidden; position: absolute'>");return this.content.append(n),t=parseInt(n.css("margin-left"),10),n.remove(),t},_renderTask:function(e,t){var n,i,r,o=this.options.editable,a=t.left,l=E.styles,c=l.taskWrap;return e.summary?i=this._renderSummary(e,t):e.isMilestone()?(i=this._renderMilestone(e,t),c+=" "+l.taskMilestoneWrap):i=this._renderSingleTask(e,t),n=s("div",{className:c,style:{left:a+"px"}},[i]),o&&(n.children.push(s("div",{className:l.taskDot+" "+l.taskDotStart})),n.children.push(s("div",{className:l.taskDot+" "+l.taskDotEnd}))),e.summary||e.isMilestone()||!o||(r=Math.round(t.width*e.percentComplete),n.children.push(s("div",{className:l.taskDragHandle,style:{left:r+"px"}}))),n},_renderSingleTask:function(e,t){var n,i=E.styles,r=Math.round(t.width*e.percentComplete),o=s("div",{className:i.taskContent},[s("div",{className:i.taskTemplate},[l(e.title)])]);return this.options.editable&&(o.children.push(s("span",{className:i.taskActions},[s("a",{className:i.link+" "+i.taskDelete,href:"#"},[s("span",{className:i.icon+" "+i.iconDelete})])])),o.children.push(s("span",{className:i.taskResizeHandle+" "+i.taskResizeHandleWest})),o.children.push(s("span",{className:i.taskResizeHandle+" "+i.taskResizeHandleEast}))),n=s("div",{className:i.task+" "+i.taskSingle,"data-uid":e.uid,style:{width:Math.max(t.width-2,0)+"px"}},[s("div",{className:i.taskComplete,style:{width:r+"px"}}),o])},_renderMilestone:function(e){var t=E.styles,n=s("div",{className:t.task+" "+t.taskMilestone,"data-uid":e.uid});return n},_renderSummary:function(e,t){var n=E.styles,i=Math.round(t.width*e.percentComplete),r=s("div",{className:n.task+" "+n.taskSummary,"data-uid":e.uid,style:{width:t.width+"px"}},[s("div",{className:n.taskSummaryProgress,style:{width:i+"px"}},[s("div",{className:n.taskSummaryComplete,style:{width:t.width+"px"}})])]);return r},_renderResources:function(e,t){var n,i,r,o=[];for(i=0,r=e.length;r>i;i++)n=e[i],o.push(s("span",{className:t,style:{color:n.get("color")}},[l(n.get("name"))]));return o},_taskPosition:function(e){var t=Math.round,n=t(this._offset(e.start)),i=t(this._offset(e.end));return{left:n,width:i-n}},_offset:function(e){var t,n,i,r=this._timeSlots(),o=this._slotIndex("start",e),a=r[o];return e>a.end?a.offsetLeft+a.offsetWidth:a.start>e?a.offsetLeft:(t=e-a.start,n=a.end-a.start,i=t/n*a.offsetWidth,a.offsetLeft+i)},_slotIndex:function(e,t){var n,i=this._timeSlots(),r=0,o=i.length-1;do n=Math.ceil((o+r)/2),t>i[n][e]?r=n:(n===o&&n--,o=n);while(r!==o);return r},_timeByPosition:function(e,t,n){var i,r,o,a=this._slotByPosition(e);return t?n?a.end:a.start:(i=e-(this.content.offset().left-this.content.scrollLeft()),r=a.end-a.start,o=r*((i-a.offsetLeft)/a.offsetWidth),new Date(a.start.getTime()+o))},_slotByPosition:function(e){var t=e-(this.content.offset().left-this.content.scrollLeft()),n=this._slotIndex("offsetLeft",t);return this._timeSlots()[n]},_renderDependencies:function(e){var t,n,i=[],r=this._dependencyTree;for(t=0,n=e.length;n>t;t++)i.push.apply(i,this._renderDependency(e[t]));r.render(i)},_renderDependency:function(e){var t,n,i,r,o=this._taskCoordinates[e.predecessorId],a=this._taskCoordinates[e.successorId];if(!o||!a)return[];for(n="_render"+["FF","FS","SF","SS"][e.type],t=this[n](o,a),i=0,r=t.length;r>i;i++)t[i].attr["data-uid"]=e.uid;return t},_renderFF:function(e,t){var n=this._dependencyFF(e,t,!1);return n[n.length-1].children[0]=this._arrow(!0),n},_renderSS:function(e,t){var n=this._dependencyFF(t,e,!0);return n[0].children[0]=this._arrow(!1),n.reverse()},_renderFS:function(e,t){var n=this._dependencyFS(e,t,!1);return n[n.length-1].children[0]=this._arrow(!1),n},_renderSF:function(e,t){var n=this._dependencyFS(t,e,!0);return n[0].children[0]=this._arrow(!0),n.reverse()},_dependencyFF:function(e,t,n){var i,r=this,o=[],a=0,s=0,l=0,c=0,d=n?"start":"end",u=2,h=1,p=this._rowHeight,f=10,g=e.rowIndex*p+Math.floor(p/2)-1,m=t.rowIndex*p+Math.floor(p/2)-1,v=E.styles,_=function(){o.push(r._line(v.line+" "+v.lineHorizontal,{left:a+"px",top:s+"px",width:l+"px"}))},y=function(){o.push(r._line(v.line+" "+v.lineVertical,{left:a+"px",top:s+"px",height:c+"px"}))};return a=e[d],s=g,l=f,i=t[d]-e[d],i>0!==n&&(l=Math.abs(i)+f),n?(a-=l,l-=h,_()):(_(),a+=l-u),s>m?(c=s-m,c+=u,s=m,y()):(c=m-s,c+=u,y(),s+=c-u),l=Math.abs(a-t[d]),n||(l-=h,a-=l),_(),o},_dependencyFS:function(e,t,n){var i=this,r=[],o=0,a=0,s=0,l=0,c=this._rowHeight,d=Math.floor(c/2),u=10,h=2*u,p=t.start-e.end,f=2,g=1,m=e.rowIndex*c+Math.floor(c/2)-1,v=t.rowIndex*c+Math.floor(c/2)-1,_=E.styles,y=function(){r.push(i._line(_.line+" "+_.lineHorizontal,{left:o+"px",top:a+"px",width:s+"px"}))},w=function(){r.push(i._line(_.line+" "+_.lineVertical,{left:o+"px",top:a+"px",height:l+"px"}))};return o=e.end,a=m,s=u,n&&(o+=g,p>h&&(s=p-(u-f)),s-=g),y(),o+=s-f,h>=p&&(l=n?Math.abs(v-m)-d:d,m>v?(a-=l,l+=f,w()):(w(),a+=l),s=e.end-t.start+h,u>s&&(s=u),o-=s-f,y()),m>v?(l=a-v,a=v,l+=f,w()):(l=v-a,w(),a+=l),s=t.start-o,n||(s-=g),y(),r},_line:function(e,t){return s("div",{className:e,style:t})},_arrow:function(e){return s("span",{className:e?E.styles.arrowWest:E.styles.arrowEast})},_colgroup:function(){var e,t,n,i=this._timeSlots(),r=i.length,o=[];for(e=0;r>e;e++)for(t=0,n=i[e].span;n>t;t++)o.push(s("col"));return s("colgroup",null,o)},_createDragHint:function(e){this._dragHint=e.clone().addClass(E.styles.dragHint).css("cursor","move"),e.parent().append(this._dragHint)},_updateDragHint:function(e){var t=this._offset(e);this._dragHint.css({left:t})},_removeDragHint:function(){this._dragHint.remove(),this._dragHint=null},_createResizeHint:function(t){var n,i,r=E.styles,o=this._taskCoordinates[t.id].rowIndex*this._rowHeight;this._resizeHint=e(C({styles:r})).css({top:0,height:this._contentHeight}),this.content.append(this._resizeHint),this._resizeTooltip=e(S({styles:r,start:t.start,end:t.end})).css({top:0,left:0}),this.content.append(this._resizeTooltip),this._resizeTooltipWidth=this._resizeTooltip.outerWidth(),n=this._resizeTooltip.outerHeight(),i=o-n,0>i&&(i=o+this._rowHeight),this._resizeTooltipTop=i},_updateResizeHint:function(t,n,i){var r=this._offset(t),o=this._offset(n),a=o-r,s=i?r:o,l=this._tableWidth-17,c=this._resizeTooltipWidth;this._resizeHint.css({left:r,width:a}),this._resizeTooltip&&this._resizeTooltip.remove(),s-=Math.round(c/2),0>s?s=0:s+c>l&&(s=l-c),this._resizeTooltip=e(S({styles:E.styles,start:t,end:n})).css({top:this._resizeTooltipTop,left:s,"min-width":c}),this.content.append(this._resizeTooltip)},_removeResizeHint:function(){this._resizeHint.remove(),this._resizeHint=null,this._resizeTooltip.remove(),this._resizeTooltip=null},_updatePercentCompleteTooltip:function(t,n,i){var r,o,a,s;this._removePercentCompleteTooltip(),r=this._percentCompleteResizeTooltip=e(T({styles:E.styles,text:i})).appendTo(this.element),o=Math.round(r.outerWidth()/2),a=r.find(_+E.styles.callout),s=Math.round(a.outerWidth()/2),r.css({top:t-(r.outerHeight()+s),left:n-o}),a.css("left",o-s)},_removePercentCompleteTooltip:function(){this._percentCompleteResizeTooltip&&this._percentCompleteResizeTooltip.remove(),this._percentCompleteResizeTooltip=null},_updateDependencyDragHint:function(e,t,n){this._removeDependencyDragHint(),n?this._creteVmlDependencyDragHint(e,t):this._creteDependencyDragHint(e,t)},_creteDependencyDragHint:function(t,n){var i=E.styles,r=n.x-t.x,o=n.y-t.y,a=Math.sqrt(r*r+o*o),s=Math.atan(o/r);0>r&&(s+=Math.PI),e("<div class='"+i.line+" "+i.lineHorizontal+" "+i.dependencyHint+"'></div>").css({top:t.y,left:t.x,width:a,"transform-origin":"0% 0","-ms-transform-origin":"0% 0","-webkit-transform-origin":"0% 0",transform:"rotate("+s+"rad)","-ms-transform":"rotate("+s+"rad)","-webkit-transform":"rotate("+s+"rad)"}).appendTo(this.content)},_creteVmlDependencyDragHint:function(t,n){var i=e("<kvml:line class='"+E.styles.dependencyHint+"' style='position:absolute; top: 0px;' strokecolor='black' strokeweight='2px' from='"+t.x+"px,"+t.y+"px' to='"+n.x+"px,"+n.y+"px'></kvml:line>").appendTo(this.content);
i[0].outerHTML=i[0].outerHTML},_removeDependencyDragHint:function(){this.content.find(_+E.styles.dependencyHint).remove()},_scrollTo:function(e){var t=e.offset().left,n=e.width(),i=t+n,r=e.closest("tr"),o=r.offset().top,a=r.height(),s=o+a,l=this.content,c=l.offset(),d=c.top,u=l.height(),h=d+u,p=c.left,f=l.width(),g=p+f,m=kendo.support.scrollbar();d>o?l.scrollTop(l.scrollTop()+(o-d)):s>h&&l.scrollTop(l.scrollTop()+(s+m-h)),p>t&&n>f&&g>i||i>g&&f>n?l.scrollLeft(l.scrollLeft()+(i+m-g)):(i>g&&n>f&&t>p||p>t&&f>n)&&l.scrollLeft(l.scrollLeft()+(t-p))},_timeSlots:function(){return this._slots[this._slots.length-1]},_headers:function(e){var t,n,i,r,o,a,c,d,u=[],h=E.styles;for(o=0,a=e.length;a>o;o++){for(t=e[o],n=[],c=0,d=t.length;d>c;c++)i=t[c],r=l(i.text),n.push(s("th",{colspan:i.span,className:h.header+(i.isNonWorking?" "+h.nonWorking:"")},[r]));u.push(s("tr",null,n))}return u},_hours:function(e,t){var n,i,r,o=[],a=this.options,s=a.workDayStart.getHours(),l=a.workDayEnd.getHours(),c=a.hourSpan;for(e=new Date(e),t=new Date(t);t>e;)n=new Date(e),r=n.getHours(),i=r>=s&&l>r,n.setHours(n.getHours()+c),r==n.getHours()&&n.setHours(n.getHours()+2*c),(!a.showWorkHours||i)&&o.push({start:e,end:n,isNonWorking:!i,span:1}),e=n;return o},_days:function(e,t){var n,i,r=[];for(e=new Date(e),t=new Date(t);t>e;)n=kendo.date.nextDay(e),i=this._isWorkDay(e),(!this.options.showWorkDays||i)&&r.push({start:e,end:n,isNonWorking:!i,span:1}),e=n;return r},_weeks:function(e,t){var n,i,r,o=[],a=this.calendarInfo().firstDay;for(e=new Date(e),t=new Date(t);t>e;)n=kendo.date.dayOfWeek(kendo.date.addDays(e,1),a,1),n>t&&(n=t),i=this._days(e,n),r=i.length,r>0&&o.push({start:i[0].start,end:i[r-1].end,span:r}),e=n;return o},_months:function(e,t){var n,i,r,o=[];for(e=new Date(e),t=new Date(t);t>e;)n=new Date(e),n.setMonth(n.getMonth()+1),i=this._days(e,n),r=i.length,r>0&&o.push({start:i[0].start,end:i[r-1].end,span:r}),e=n;return o},_years:function(e,t){var n,i=[];for(e=new Date(e),t=new Date(t);t>e;)n=new Date(e),n.setFullYear(n.getFullYear()+1),i.push({start:e,end:n,span:12}),e=n;return i},_slotHeaders:function(e,t){var n,i,r,o=[];for(i=0,r=e.length;r>i;i++)n=e[i],o.push({text:t(n),isNonWorking:!!n.isNonWorking,span:n.span});return o},_isWorkDay:function(e){var t,n,i=e.getDay(),r=this._workDays;for(t=0,n=r.length;n>t;t++)if(r[t]===i)return!0;return!1},calendarInfo:function(){return kendo.getCulture().calendars.standard}});d(!0,E,{styles:A}),kendo.ui.GanttDayView=E.extend({name:"day",options:{timeHeaderTemplate:y,dayHeaderTemplate:w},range:function(e){this.start=kendo.date.getDate(e.start),this.end=kendo.date.getDate(e.end),(kendo.date.getMilliseconds(e.end)>0||this.end.getTime()===this.start.getTime())&&(this.end=kendo.date.addDays(this.end,1))},_createSlots:function(){var e,t,n,i,r=[],o=this._days(this.start,this.end),a=[];for(n=0,i=o.length;i>n;n++)e=o[n],t=this._hours(e.start,e.end),e.span=t.length,a.push.apply(a,t);return r.push(o),r.push(a),r},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.dayHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.timeHeaderTemplate))),e}}),kendo.ui.GanttWeekView=E.extend({name:"week",options:{dayHeaderTemplate:w,weekHeaderTemplate:b},range:function(e){var t=this.calendarInfo(),n=t.firstDay;this.start=kendo.date.getDate(kendo.date.dayOfWeek(e.start,n,-1)),this.end=kendo.date.getDate(kendo.date.dayOfWeek(e.end,n,1))},_createSlots:function(){var e=[];return e.push(this._weeks(this.start,this.end)),e.push(this._days(this.start,this.end)),e},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.weekHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.dayHeaderTemplate))),e}}),kendo.ui.GanttMonthView=E.extend({name:"month",options:{weekHeaderTemplate:b,monthHeaderTemplate:k},range:function(e){this.start=kendo.date.firstDayOfMonth(e.start),this.end=kendo.date.addDays(kendo.date.getDate(kendo.date.lastDayOfMonth(e.end)),1)},_createSlots:function(){var e=[];return e.push(this._months(this.start,this.end)),e.push(this._weeks(this.start,this.end)),e},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.monthHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.weekHeaderTemplate))),e}}),kendo.ui.GanttYearView=E.extend({name:"year",options:{yearHeaderTemplate:x,monthHeaderTemplate:k},range:function(e){this.start=kendo.date.firstDayOfMonth(new Date(e.start.setMonth(0))),this.end=kendo.date.firstDayOfMonth(new Date(e.end.setMonth(12)))},_createSlots:function(){var t=[],n=this._months(this.start,this.end);return e(n).each(function(e,t){t.span=1}),t.push(this._years(this.start,this.end)),t.push(n),t},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.yearHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.monthHeaderTemplate))),e}}),r={wrapper:"k-timeline k-grid k-widget",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",tasksWrapper:"k-gantt-tables",dependenciesWrapper:"k-gantt-dependencies",task:"k-task",line:"k-line",taskResizeHandle:"k-resize-handle",taskResizeHandleWest:"k-resize-w",taskDragHandle:"k-task-draghandle",taskComplete:"k-task-complete",taskDelete:"k-task-delete",taskWrapActive:"k-task-wrap-active",taskWrap:"k-task-wrap",taskDot:"k-task-dot",taskDotStart:"k-task-start",taskDotEnd:"k-task-end",hovered:"k-state-hover",selected:"k-state-selected",origin:"k-origin"},o=kendo.ui.GanttTimeline=a.extend({init:function(e,t){a.fn.init.call(this,e,t),this.options.views&&this.options.views.length||(this.options.views=["day","week","month"]),this._wrapper(),this._domTrees(),this._views(),this._selectable(),this._draggable(),this._resizable(),this._percentResizeDraggable(),this._createDependencyDraggable(),this._attachEvents()},options:{name:"GanttTimeline",messages:{views:{day:"Day",week:"Week",month:"Month",year:"Year"}},snap:!0,selectable:!0,editable:!0},destroy:function(){a.fn.destroy.call(this),this._unbindView(this._selectedView),this._moveDraggable&&this._moveDraggable.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),this._percentDraggable&&this._percentDraggable.destroy(),this._dependencyDraggable&&this._dependencyDraggable.destroy(),this._headerTree=null,this._taskTree=null,this._dependencyTree=null,this.wrapper.off(f),kendo.destroy(this.wrapper)},_wrapper:function(){var e=o.styles;this.wrapper=this.element.addClass(e.wrapper).append("<div class='"+e.gridHeader+"'><div class='"+e.gridHeaderWrap+"'></div></div>").append("<div class='"+e.gridContentWrap+"'><div class='"+e.tasksWrapper+"'></div><div class='"+e.dependenciesWrapper+"'></div></div>")},_domTrees:function(){var e=o.styles,t=kendo.dom.Tree,n=this.wrapper;this._headerTree=new t(n.find(_+e.gridHeaderWrap)[0]),this._taskTree=new t(n.find(_+e.tasksWrapper)[0]),this._dependencyTree=new t(n.find(_+e.dependenciesWrapper)[0])},_views:function(){var e,t,n,i,r,o,a,s=this.options.views;for(this.views={},o=0,a=s.length;a>o;o++)e=s[o],t=c(e),t&&e.selectable===!1||(n=t?"string"!=typeof e.type?e.title:e.type:e,i=D[n],i&&(t&&(e.type=i.type),i.title=this.options.messages.views[n]),e=d({title:n},i,t?e:{}),n&&(this.views[n]=e,(!r||e.selected)&&(r=n)));r&&(this._selectedViewName=r)},view:function(e){return e&&(this._selectView(e),this.trigger("navigate",{view:e,action:"changeView"})),this._selectedView},_selectView:function(e){e&&this.views[e]&&(this._selectedView&&this._unbindView(this._selectedView),this._selectedView=this._initializeView(e),this._selectedViewName=e)},_viewByIndex:function(e){var t,n=this.views;for(t in n){if(!e)return t;e--}},_initializeView:function(e){var n,i=this.views[e];if(i){if(n=i.type,"string"==typeof n&&(n=kendo.getter(i.type)(window)),!n)throw Error("There is no such view");i=new n(this.wrapper,t(d(!0,{headerTree:this._headerTree,taskTree:this._taskTree,dependencyTree:this._dependencyTree},i,this.options)))}return i},_unbindView:function(e){e&&e.destroy()},_range:function(e){var t,n,i={field:"start",dir:"asc"},r={field:"end",dir:"desc"};return e&&e.length?(t=new p(e).sort(i).toArray()[0].start||new Date,n=new p(e).sort(r).toArray()[0].end||new Date,{start:new Date(t),end:new Date(n)}):{start:new Date,end:new Date}},_render:function(e){var t=this.view(),n=this._range(e);this._tasks=e,t.range(n),t.renderLayout(),t.render(e)},_renderDependencies:function(e){this.view()._renderDependencies(e)},_taskByUid:function(e){var t,n,i=this._tasks,r=i.length;for(n=0;r>n;n++)if(t=i[n],t.uid===e)return t},_draggable:function(){var e,t,n,r,a,s=this,l=this.options.snap,c=o.styles,d=function(){s.view()._removeDragHint(),e&&e.css("opacity",1),e=null,t=null,a=!1};this.options.editable&&(this._moveDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:_+c.task,holdToDrag:kendo.support.mobileOS,ignore:_+c.taskResizeHandle}),this._moveDraggable.bind("dragstart",function(i){var o=s.view();return e=i.currentTarget.parent(),t=s._taskByUid(i.currentTarget.attr("data-uid")),s.trigger("moveStart",{task:t})?void i.preventDefault():(n=t.start,r=o._timeByPosition(i.x.location,l)-n,o._createDragHint(e),e.css("opacity",.5),void(a=!0))}).bind("drag",kendo.throttle(function(e){var i,o;a&&(i=s.view(),o=new Date(i._timeByPosition(e.x.location,l)-r),s.trigger("move",{task:t,start:o})||(n=o,i._updateDragHint(n)))},15)).bind("dragend",function(){s.trigger("moveEnd",{task:t,start:n}),d()}).bind("dragcancel",function(){d()}).userEvents.bind("select",function(){i()}))},_resizable:function(){var e,t,n,r,a,s,l=this,c=this.options.snap,d=o.styles,u=function(){l.view()._removeResizeHint(),e=null,t=null,s=!1};this.options.editable&&(this._resizeDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:_+d.taskResizeHandle,holdToDrag:!1}),this._resizeDraggable.bind("dragstart",function(i){return a=i.currentTarget.hasClass(d.taskResizeHandleWest),e=i.currentTarget.closest(_+d.task),t=l._taskByUid(e.attr("data-uid")),l.trigger("resizeStart",{task:t})?void i.preventDefault():(n=t.start,r=t.end,l.view()._createResizeHint(t),void(s=!0))}).bind("drag",kendo.throttle(function(e){var i,o;s&&(i=l.view(),o=i._timeByPosition(e.x.location,c,!a),a?n=r>o?o:r:r=o>n?o:n,l.trigger("resize",{task:t,start:n,end:r})||i._updateResizeHint(n,r,a))},15)).bind("dragend",function(){l.trigger("resizeEnd",{task:t,resizeStart:a,start:n,end:r}),u()}).bind("dragcancel",function(){u()}).userEvents.bind("select",function(){i()}))},_percentResizeDraggable:function(){var e,t,n,r,a,s,l,c,d,u,h=this,p=o.styles,f=function(){h.view()._removePercentCompleteTooltip(),t=null,e=null,u=!1},g=function(e){t.find(_+p.taskComplete).width(e).end().siblings(_+p.taskDragHandle).css("left",e)};this.options.editable&&(this._percentDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:_+p.taskDragHandle,holdToDrag:!1}),this._percentDraggable.bind("dragstart",function(i){t=i.currentTarget.siblings(_+p.task),e=h._taskByUid(t.attr("data-uid")),l=e.percentComplete,n=t.offset(),r=this.element.offset(),a=t.find(_+p.taskComplete).width(),s=t.outerWidth(),u=!0}).bind("drag",kendo.throttle(function(e){if(u){var t=Math.max(0,Math.min(s,a+e.x.initialDelta));l=Math.round(t/s*100),g(t),c=n.top-r.top,d=n.left+t-r.left,h.view()._updatePercentCompleteTooltip(c,d,l)}},15)).bind("dragend",function(){h.trigger("percentResizeEnd",{task:e,percentComplete:l/100}),f()}).bind("dragcancel",function(){g(a),f()}).userEvents.bind("select",function(){i()}))},_createDependencyDraggable:function(){var t,n,r,a,s,l,c=this,d=e(),h=e(),p=u.msie&&9>u.version,f=o.styles,g=function(){t.css("display","").removeClass(f.hovered),t.parent().removeClass(f.origin),t=null,m(!1),h=e(),d=e(),c.view()._removeDependencyDragHint(),n=!1},m=function(e){h.hasClass(f.origin)||(h.find(_+f.taskDot).css("display",e?"block":""),d.toggleClass(f.hovered,e))};this.options.editable&&(p&&document.namespaces&&document.namespaces.add("kvml","urn:schemas-microsoft-com:vml","#default#VML"),this._dependencyDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:_+f.taskDot,holdToDrag:!1}),this._dependencyDraggable.bind("dragstart",function(e){t=e.currentTarget.css("display","block").addClass(f.hovered),t.parent().addClass(f.origin);var i=t.offset();s=c.view().content,l=s.offset(),r=Math.round(i.left+s.scrollLeft()-l.left+t.outerHeight()/2),a=Math.round(i.top+s.scrollTop()-l.top+t.outerWidth()/2),n=!0}).bind("drag",kendo.throttle(function(t){var i,o,u;n&&(c.view()._removeDependencyDragHint(),i=e(kendo.elementUnderCursor(t)),o=t.x.location+s.scrollLeft()-l.left,u=t.y.location+s.scrollTop()-l.top,c.view()._updateDependencyDragHint({x:r,y:a},{x:o,y:u},p),m(!1),d=i.hasClass(f.taskDot)?i:e(),h=i.closest(_+f.taskWrap),m(!0))},15)).bind("dragend",function(){var e,n,i,r,o;d.length&&(e=t.hasClass(f.taskDotStart),n=d.hasClass(f.taskDotStart),i=e?n?3:2:n?1:0,r=c._taskByUid(t.siblings(_+f.task).attr("data-uid")),o=c._taskByUid(d.siblings(_+f.task).attr("data-uid")),r!==o&&c.trigger("dependencyDragEnd",{type:i,predecessor:r,successor:o})),g()}).bind("dragcancel",function(){g()}).userEvents.bind("select",function(){i()}))},_selectable:function(){var t=this,n=o.styles;this.options.selectable&&this.wrapper.on(g+f,_+n.task,function(n){n.stopPropagation(),n.ctrlKey?t.trigger("clear"):t.trigger("select",{uid:e(this).attr("data-uid")})}).on(g+f,_+n.tasksWrapper,function(){t.selectDependency().length>0?t.clearSelection():t.trigger("clear")}).on(g+f,_+n.line,function(e){e.stopPropagation(),t.selectDependency(this)})},select:function(e){var t=this.wrapper.find(e),n=o.styles;return t.length?(this.clearSelection(),t.addClass(n.selected),void(kendo.support.mobileOS&&t.parent().addClass(n.taskWrapActive))):this.wrapper.find(_+n.task+_+n.selected)},selectDependency:function(t){var n,i=this.wrapper.find(t),r=o.styles;return i.length?(this.clearSelection(),this.trigger("clear"),n=e(i).attr("data-uid"),void this.wrapper.find(_+r.line+"[data-uid='"+n+"']").addClass(r.selected)):this.wrapper.find(_+r.line+_+r.selected)},clearSelection:function(){var e=o.styles;this.wrapper.find(_+e.selected).removeClass(e.selected),kendo.support.mobileOS&&this.wrapper.find(_+e.taskWrapActive).removeClass(e.taskWrapActive)},_attachEvents:function(){var t=this,n=o.styles;this.options.editable&&(this._tabindex(),this.wrapper.on(g+f,_+n.taskDelete,function(i){t.trigger("removeTask",{uid:e(this).closest(_+n.task).attr("data-uid")}),i.stopPropagation(),i.preventDefault()}).on(m+f,_+n.task,function(n){t.trigger("editTask",{uid:e(this).attr("data-uid")}),n.stopPropagation(),n.preventDefault()}).on(v+f,function(e){var n;e.keyCode===h.DELETE&&(n=t.selectDependency(),n.length&&(t.trigger("removeDependency",{uid:n.attr("data-uid")}),t.clearSelection()))}))}}),d(!0,o,{styles:r})}(window.kendo.jQuery),function(e,t){function n(e){return"["+f.attr("uid")+(e?"='"+e+"']":"]")}function i(e){return delete e.name,delete e.prefix,delete e.remove,delete e.edit,delete e.add,delete e.navigate,e}function r(e){var t,n,i,r,o,a;if(e.filter("[name=end], [name=start]").length){for(t=e.attr("name"),n=f.widgetInstance(e,f.ui),i={},r=e;r!==window&&!o;)r=r.parent(),o=r.data("kendoEditable");return(a=o?o.options.model:null)?(i.start=a.start,i.end=a.end,i[t]=n?n.value():f.parseDate(e.value()),i.end>=i.start):!0}return!0}function o(t,n){var i=t.parents("["+f.attr("role")+'="gantt"]'),r=[],o=a(i);t.attr(I,0),n&&o.each(function(t,n){r[t]=e(n).scrollTop()});try{t[0].setActive()}catch(s){t[0].focus()}n&&o.each(function(t,n){e(n).scrollTop(r[t])})}function a(t){return e(t).parentsUntil("body").filter(function(e,t){var n=f.getComputedStyles(t,["overflow"]);return"visible"!=n.overflow}).add(window)}var s,l,c,d,u,h,p,f=window.kendo,g=f.support.browser,m=f.Observable,v=f.ui.Widget,_=f.data.DataSource,y=f.data.ObservableObject,w=f.data.ObservableArray,b=f.data.Query,k=e.isArray,x=e.inArray,C=f.isFunction,S=e.proxy,T=e.extend,D=e.isPlainObject,A=e.map,E=f.keys,M=".kendoGantt",P="p0",I="tabIndex",z="click",F="width",R="string",B={down:{origin:"bottom center",position:"top center"},up:{origin:"top center",position:"bottom center"}},L="aria-activedescendant",O="gantt_active_cell",H="action-option-focused",N=".",V="Are you sure you want to delete this task?",U="Are you sure you want to delete this dependency?",W='<button class="#=styles.button# #=className#" #if (action) {#data-action="#=action#"#}#><span class="#=iconClass#"></span>#=text#</button>',j='<a class="#=className#" #=attr# href="\\#">#=text#</a>',G=f.template('<ul class="#=styles.viewsWrapper#">#for(var view in views){#<li class="#=styles.viewButtonDefault# #=styles.viewButton#-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a href="\\#" class="#=styles.link#">#=views[view].title#</a></li>#}#</ul>'),q=f.template('<div class="#=styles.popupWrapper#"><ul class="#=styles.popupList#" role="listbox">#for(var i = 0, l = actions.length; i < l; i++){#<li class="#=styles.item#" data-action="#=actions[i].data#" role="option">#=actions[i].text#</span>#}#</ul></div>'),$=f.template('<div class="#=styles.footerWrapper#"><div class="#=styles.actions#"><button class="#=styles.button#" data-action="#=action.data#"><span class="#=styles.iconPlus#"></span>#=action.title#</button></div></div>'),Y=function(t,n){var i={name:n.field},r=n.model.fields[n.field].validation;r&&D(r)&&r.message&&(i[f.attr("dateCompare-msg")]=r.message),e('<input type="text" required '+f.attr("type")+'="date" '+f.attr("role")+'="datetimepicker" '+f.attr("bind")+'="value:'+n.field+'" '+f.attr("validate")+"='true' />").attr(i).appendTo(t),e("<span "+f.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},K=function(t,n){e('<a href="#" class="'+n.styles.button+'">'+n.messages.assingButton+"</a>").click(n.click).appendTo(t)},Q={wrapper:"k-widget k-gantt",listWrapper:"k-gantt-layout k-gantt-treelist",list:"k-gantt-treelist",timelineWrapper:"k-gantt-layout k-gantt-timeline",timeline:"k-gantt-timeline",splitBarWrapper:"k-splitbar k-state-default k-splitbar-horizontal k-splitbar-draggable-horizontal k-gantt-layout",splitBar:"k-splitbar",splitBarHover:"k-splitbar-horizontal-hover",popupWrapper:"k-list-container",popupList:"k-list k-reset",resizeHandle:"k-resize-handle",icon:"k-icon",item:"k-item",line:"k-line",buttonDelete:"k-gantt-delete",buttonCancel:"k-gantt-cancel",buttonSave:"k-gantt-update",primary:"k-primary",hovered:"k-state-hover",selected:"k-state-selected",focused:"k-state-focused",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",popup:{form:"k-popup-edit-form",editForm:"k-gantt-edit-form",formContainer:"k-edit-form-container",resourcesFormContainer:"k-resources-form-container",message:"k-popup-message",buttonsContainer:"k-edit-buttons k-state-default",button:"k-button",editField:"k-edit-field",editLabel:"k-edit-label",resourcesField:"k-gantt-resources"},toolbar:{headerWrapper:"k-floatwrap k-header k-gantt-toolbar",footerWrapper:"k-floatwrap k-header k-gantt-toolbar",toolbar:"k-gantt-toolbar",views:"k-gantt-views",viewsWrapper:"k-reset k-header k-gantt-views",actions:"k-gantt-actions",button:"k-button k-button-icontext",iconPlus:"k-icon k-i-plus",iconPdf:"k-icon k-i-pdf",viewButtonDefault:"k-state-default",viewButton:"k-view",link:"k-link",pdfButton:"k-gantt-pdf",appendButton:"k-gantt-create"}},X={append:{text:"Add Task",action:"add",className:Q.toolbar.appendButton,iconClass:Q.toolbar.iconPlus},pdf:{text:"Export to PDF",className:Q.toolbar.pdfButton,iconClass:Q.toolbar.iconPdf}},J=m.extend({init:function(e,t){m.fn.init.call(this),this.element=e,this.options=T(!0,{},this.options,t),this._popup()},options:{direction:"down",navigatable:!1},_current:function(e){var t=p.styles,n=this.list.find(N+t.focused),i=n[e]();i.length&&(n.removeClass(t.focused).removeAttr("id"),i.addClass(t.focused).attr("id",H),this.list.find("ul").removeAttr(L).attr(L,H))},_popup:function(){var t=this,n=p.styles,i="li"+N+n.item,r=this.options.messages.actions,o=this.options.navigatable;this.list=e(q({styles:n,actions:[{data:"add",text:r.addChild},{data:"insert-before",text:r.insertBefore},{data:"insert-after",text:r.insertAfter}]})),this.element.append(this.list),this.popup=new f.ui.Popup(this.list,T({anchor:this.element,open:function(){t._adjustListWidth()},animation:this.options.animation},B[this.options.direction])),this.element.on(z+M,N+n.toolbar.appendButton,function(i){var r=e(this),a=r.attr(f.attr("action"));i.preventDefault(),a?t.trigger("command",{type:a}):(t.popup.open(),o&&t.list.find("li:first").addClass(n.focused).attr("id",H).end().find("ul").attr({TABINDEX:0,"aria-activedescendant":H}).focus())}),this.list.find(i).hover(function(){e(this).addClass(n.hovered)},function(){e(this).removeClass(n.hovered)}).end().on(z+M,i,function(){t.trigger("command",{type:e(this).attr(f.attr("action"))}),t.popup.close()}),o&&(this.popup.bind("close",function(){t.list.find(i).removeClass(n.focused).end().find("ul").attr(I,0),t.element.parents("["+f.attr("role")+'="gantt"]').find(N+n.gridContent+" > table:first").focus()}),this.list.find("ul").on("keydown"+M,function(e){var i=e.keyCode;switch(i){case E.UP:e.preventDefault(),t._current("prev");break;case E.DOWN:e.preventDefault(),t._current("next");break;case E.ENTER:t.list.find(N+n.focused).click();break;case E.ESC:e.preventDefault(),t.popup.close()}}))},_adjustListWidth:function(){var e,t,n=this.list,i=n[0].style.width,r=this.element;(n.data(F)||!i)&&(e=window.getComputedStyle?window.getComputedStyle(r[0],null):0,t=e?parseFloat(e.width):r.outerWidth(),e&&(g.mozilla||g.msie)&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),i="border-box"!==n.css("box-sizing")?t-(n.outerWidth()-n.width()):t,n.css({fontFamily:r.css("font-family"),width:i}).data(F,i))},destroy:function(){this.popup.destroy(),this.element.off(M),this.list.off(M),this.unbind()}}),Z=function(e,t){return function(n){var i,r;if(n=k(i)?{data:n}:n,i=n||{},r=i.data,i.data=r,!(i instanceof e)&&i instanceof _)throw Error("Incorrect DataSource type. Only "+t+" instances are supported");return i instanceof e?i:new e(i)}},et=f.data.Model.define({id:"id",fields:{id:{type:"number"},predecessorId:{type:"number"},successorId:{type:"number"},type:{type:"number"}}}),tt=_.extend({init:function(e){_.fn.init.call(this,T(!0,{},{schema:{modelBase:et,model:et}},e))},successors:function(e){return this._dependencies("predecessorId",e)},predecessors:function(e){return this._dependencies("successorId",e)},dependencies:function(e){var t=this.predecessors(e),n=this.successors(e);return t.push.apply(t,n),t},_dependencies:function(e,t){var n=this.view(),i={field:e,operator:"eq",value:t};return n=new b(n).filter(i).toArray()}});tt.create=Z(tt,"GanttDependencyDataSource"),s=f.data.Model.define({duration:function(){var e=this.end,t=this.start;return e-t},isMilestone:function(){return 0===this.duration()},_offset:function(e){var t,n,i=["start","end"];for(n=0;i.length>n;n++)t=new Date(this.get(i[n]).getTime()+e),this.set(i[n],t)},id:"id",fields:{id:{type:"number"},parentId:{type:"number",defaultValue:null,validation:{required:!0}},orderId:{type:"number",validation:{required:!0}},title:{type:"string",defaultValue:""},start:{type:"date",validation:{required:!0,dateCompare:r,message:"Start date should be before or equal to the end date"}},end:{type:"date",validation:{required:!0,dateCompare:r,message:"End date should be after or equal to the start date"}},percentComplete:{type:"number",validation:{required:!0,min:0,max:1,step:.01}},summary:{type:"boolean"},expanded:{type:"boolean",defaultValue:!0}}}),l=_.extend({init:function(e){_.fn.init.call(this,T(!0,{},{schema:{modelBase:s,model:s}},e))},remove:function(e){var t=e.get("parentId"),n=this.taskAllChildren(e);return this._removeItems(n),e=_.fn.remove.call(this,e),this._childRemoved(t,e.get("orderId")),e},add:function(e){return e?(e=this._toGanttTask(e),this.insert(this.taskSiblings(e).length,e)):t},insert:function(e,n){return n?(n=this._toGanttTask(n),n.set("orderId",e),n=_.fn.insert.call(this,e,n),this._reorderSiblings(n,this.taskSiblings(n).length-1),this._resolveSummaryFields(this.taskParent(n)),n):t},taskChildren:function(e){var n,i=this.view(),r={field:"parentId",operator:"eq",value:null},o=this._sort||{field:"orderId",dir:"asc"};if(e){if(n=e.get("id"),n===t||null===n)return[];r.value=n}return i=new b(i).filter(r).sort(o).toArray()},taskAllChildren:function(e){var t=[],n=this,i=function(e){var r=n.taskChildren(e);t.push.apply(t,r),A(r,i)};return e?i(e):t=this.view(),t},taskSiblings:function(e){if(!e)return null;var t=this.taskParent(e);return this.taskChildren(t)},taskParent:function(e){return e&&null!==e.get("parentId")?this.get(e.parentId):null},taskLevel:function(e){for(var t=0,n=this.taskParent(e);null!==n;)t+=1,n=this.taskParent(n);return t},taskTree:function(e){var t,n,i,r,o=[],a=this.taskChildren(e);for(n=0,i=a.length;i>n;n++)t=a[n],o.push(t),t.get("expanded")&&(r=this.taskTree(t),o.push.apply(o,r));return o},update:function(e,n){var i,r,o=this,a=function(e,t){var n,i,r=o.taskAllChildren(e);for(n=0,i=r.length;i>n;n++)r[n]._offset(t)},s=function(e){var t=e.field,n=e.sender;switch(t){case"start":o._resolveSummaryStart(o.taskParent(n)),a(n,n.get(t).getTime()-i.getTime());break;case"end":o._resolveSummaryEnd(o.taskParent(n));break;case"percentComplete":o._resolveSummaryPercentComplete(o.taskParent(n));break;case"orderId":o._reorderSiblings(n,i)}};n.parentId!==t&&(i=e.get("parentId"),i!==n.parentId&&(e.set("parentId",n.parentId),o._childRemoved(i,e.get("orderId")),e.set("orderId",o.taskSiblings(e).length-1),o._resolveSummaryFields(o.taskParent(e))),delete n.parentId),e.bind("change",s);for(r in n)i=e.get(r),e.set(r,n[r]);e.unbind("change",s)},_resolveSummaryFields:function(e){e&&(this._updateSummary(e),this.taskChildren(e).length&&(this._resolveSummaryStart(e),this._resolveSummaryEnd(e),this._resolveSummaryPercentComplete(e)))},_resolveSummaryStart:function(e){var t=this,n=function(e){var n,i,r,o=t.taskChildren(e),a=o[0].start.getTime();for(i=1,r=o.length;r>i;i++)n=o[i].start.getTime(),a>n&&(a=n);return new Date(a)};this._updateSummaryRecursive(e,"start",n)},_resolveSummaryEnd:function(e){var t=this,n=function(e){var n,i,r,o=t.taskChildren(e),a=o[0].end.getTime();for(i=1,r=o.length;r>i;i++)n=o[i].end.getTime(),n>a&&(a=n);return new Date(a)};this._updateSummaryRecursive(e,"end",n)},_resolveSummaryPercentComplete:function(e){var t=this,n=function(e){var n=t.taskChildren(e),i=new b(n).aggregate([{field:"percentComplete",aggregate:"average"}]);return i.percentComplete.average};this._updateSummaryRecursive(e,"percentComplete",n)},_updateSummaryRecursive:function(e,t,n){var i,r;e&&(i=n(e),e.set(t,i),r=this.taskParent(e),r&&this._updateSummaryRecursive(r,t,n))},_childRemoved:function(e,t){var n,i,r=null===e?null:this.get(e),o=this.taskChildren(r);for(n=t,i=o.length;i>n;n++)o[n].set("orderId",n);this._resolveSummaryFields(r)},_reorderSiblings:function(e,t){var n,i=e.get("orderId"),r=i>t,o=r?t:i,a=r?i:t,s=r?o:o+1,l=this.taskSiblings(e);for(a=Math.min(a,l.length-1),n=o;a>=n;n++)l[n]!==e&&(l[n].set("orderId",s),s+=1)},_updateSummary:function(e){if(null!==e){var t=this.taskChildren(e).length;e.set("summary",t>0)}},_toGanttTask:function(e){if(!(e instanceof s)){var t=e;e=this._createNewModel(),e.accept(t)}return e}}),l.create=Z(l,"GanttDataSource"),T(!0,f.data,{GanttDataSource:l,GanttTask:s,GanttDependencyDataSource:tt,GanttDependency:et}),c={desktop:{dateRange:Y,resources:K}},d=f.Observable.extend({init:function(e,t){f.Observable.fn.init.call(this),this.element=e,this.options=T(!0,{},this.options,t),this.createButton=this.options.createButton},fields:function(e,t){var n=this,i=this.options.messages.editor,r=this.options.resources,o=function(e){e.preventDefault(),r.editor(n.container.find(N+p.styles.popup.resourcesField),t)},a=[{field:"title",title:i.title},{field:"start",title:i.start,editor:e.dateRange},{field:"end",title:i.end,editor:e.dateRange},{field:"percentComplete",title:i.percentComplete,format:P}];return t.get(r.field)&&a.push({field:r.field,title:i.resources,messages:i,editor:e.resources,click:o,styles:p.styles.popup}),a},_buildEditTemplate:function(e,t,n){var i,r,o,a,s=this.options.resources,l=this.options.editable.template,c=T({},f.Template,this.options.templateSettings),d=c.paramName,u=p.styles.popup,h="";if(l)typeof l===R&&(l=window.unescape(l)),h+=f.template(l,c)(e);else for(i=0,r=t.length;r>i;i++)o=t[i],h+='<div class="'+u.editLabel+'"><label for="'+o.field+'">'+(o.title||o.field||"")+"</label></div>",o.field===s.field&&(h+='<div class="'+u.resourcesField+'" style="display:none"></div>'),!e.editable||e.editable(o.field)?(n.push(o),h+="<div "+f.attr("container-for")+'="'+o.field+'" class="'+u.editField+'"></div>'):(a="#:",o.field?(o=f.expr(o.field,d),a+=o+"==null?'':"+o):a+="''",a+="#",a=f.template(a,c),h+='<div class="'+u.editField+'">'+a(e)+"</div>");return h}}),u=d.extend({destroy:function(){this.close(),this.unbind()},editTask:function(e){this.editable=this._createPopupEditor(e)},close:function(){var e=this,t=function(){e.editable&&(e.editable.destroy(),e.editable=null,e.container=null),e.popup&&(e.popup.destroy(),e.popup=null)};this.editable&&this.container.is(":visible")?this.container.data("kendoWindow").bind("deactivate",t).close():t()},showDialog:function(t){var n,i,r,o,a=t.buttons,s=p.styles.popup,l=f.format('<div class="{0}"><div class="{1}"><p class="{2}">{3}</p><div class="{4}">',s.form,s.formContainer,s.message,t.text,s.buttonsContainer);for(n=0,i=a.length;i>n;n++)l+=this.createButton(a[n]);l+="</div></div></div>",r=this.element,this.popup&&this.popup.destroy(),o=this.popup=e(l).appendTo(r).eq(0).on("click",N+s.button,function(t){t.preventDefault(),o.close();var n=e(t.currentTarget).index();a[n].click()}).kendoWindow({modal:!0,resizable:!1,draggable:!1,title:t.title,visible:!1,close:function(){this.destroy(),r.focus()}}).getKendoWindow(),o.center().open()},_createPopupEditor:function(t){var n,i,r=this,o={},a=this.options.messages,s=p.styles,l=s.popup,d=f.format('<div {0}="{1}" class="{2} {3}"><div class="{4}">',f.attr("uid"),t.uid,l.form,l.editForm,l.formContainer),u=this.fields(c.desktop,t),h=[];return d+=this._buildEditTemplate(t,u,h),d+='<div class="'+l.buttonsContainer+'">',d+=this.createButton({name:"update",text:a.save,className:p.styles.primary}),d+=this.createButton({name:"cancel",text:a.cancel}),d+=this.createButton({name:"delete",text:a.destroy}),d+="</div></div></div>",n=this.container=e(d).appendTo(this.element).eq(0).kendoWindow(T({modal:!0,resizable:!1,draggable:!0,title:a.editor.editorTitle,visible:!1,close:function(e){e.userTriggered&&r.trigger("cancel",{container:n,model:t})&&e.preventDefault()}},o)),i=n.kendoEditable({fields:h,model:t,clearContainer:!1,validateOnBlur:!0,target:r.options.target}).data("kendoEditable"),this.trigger("edit",{container:n,model:t})?r.trigger("cancel",{container:n,model:t}):(n.data("kendoWindow").center().open(),n.on(z+M,N+s.buttonCancel,function(e){e.preventDefault(),e.stopPropagation(),r.trigger("cancel",{container:n,model:t})}),n.on(z+M,N+s.buttonSave,function(e){var i,o,a,s,l;for(e.preventDefault(),e.stopPropagation(),i=r.fields(c.desktop,t),o={},s=0,l=i.length;l>s;s++)a=i[s].field,o[a]=t.get(a);r.trigger("save",{container:n,model:t,updateInfo:o})}),n.on(z+M,N+s.buttonDelete,function(e){e.preventDefault(),e.stopPropagation(),r.trigger("remove",{container:n,model:t})})),i}}),h=v.extend({init:function(e,t){v.fn.init.call(this,e,t),this.wrapper=this.element,this.model=this.options.model,this.resourcesField=this.options.resourcesField,this.createButton=this.options.createButton,this._initContainer(),this._attachHandlers()},events:["save"],open:function(){this.window.center().open(),this.grid.resize(!0)},close:function(){this.window.bind("deactivate",S(this.destroy,this)).close()
},destroy:function(){this._dettachHandlers(),this.grid.destroy(),this.grid=null,this.window.destroy(),this.window=null,v.fn.destroy.call(this),f.destroy(this.wrapper),this.element=this.wrapper=null},_attachHandlers:function(){var t=p.styles,n=this.grid,i=this._cancelProxy=S(this._cancel,this);this.container.on(z+M,N+t.buttonCancel,this._cancelProxy),this._saveProxy=S(this._save,this),this.container.on(z+M,N+t.buttonSave,this._saveProxy),this.window.bind("close",function(e){e.userTriggered&&i(e)}),n.wrapper.on(z+M,"input[type='checkbox']",function(){var t=e(this),i=e(t).closest("tr"),r=n.dataSource.getByUid(i.attr(f.attr("uid"))),o=e(t).is(":checked")?1:"";r.set("value",o)})},_dettachHandlers:function(){this._cancelProxy=null,this._saveProxy=null,this.container.off(M),this.grid.wrapper.off()},_cancel:function(e){e.preventDefault(),this.close()},_save:function(e){e.preventDefault(),this._updateModel(),this.wrapper.is(N+p.styles.popup.resourcesField)||this.trigger("save",{container:this.wrapper,model:this.model}),this.close()},_initContainer:function(){var t=p.styles.popup,n=f.format('<div class="{0} {1}"><div class="{2} {3}"/></div>"',t.form,t.editForm,t.formContainer,t.resourcesFormContainer);n=e(n),this.container=n.find(N+t.resourcesFormContainer),this.window=n.kendoWindow({modal:!0,resizable:!1,draggable:!0,visible:!1,title:this.options.messages.resourcesEditorTitle}).data("kendoWindow"),this._resourceGrid(),this._createButtons()},_resourceGrid:function(){var t=this,n=this.options.messages,i=e('<div id="resources-grid"/>').appendTo(this.container);this.grid=new f.ui.Grid(i,{columns:[{field:"name",title:n.resourcesHeader,template:"<label><input type='checkbox' value='#=name#'# if (value > 0 && value !== null) {#checked='checked'# } #/>#=name#</labe>"},{field:"value",title:n.unitsHeader,template:function(e){var t=e.format,n=null!==e.value?e.value:"";return t?f.toString(n,t):n}}],height:280,sortable:!0,editable:!0,filterable:!0,dataSource:{data:t.options.data,schema:{model:{id:"id",fields:{id:{from:"id",type:"number"},name:{from:"name",type:"string",editable:!1},value:{from:"value",type:"number",defaultValue:""},format:{from:"format",type:"string"}}}}},save:function(e){var t=!!e.values.value;e.container.parent().find("input[type='checkbox']").prop("checked",t)}})},_createButtons:function(){var e,t,n=this.options.buttons,i='<div class="'+p.styles.popup.buttonsContainer+'">';for(e=0,t=n.length;t>e;e++)i+=this.createButton(n[e]);i+="</div>",this.container.append(i)},_updateModel:function(){var e,t,n,i=[],r=this.grid.dataSource.data();for(t=0,n=r.length;n>t;t++)e=r[t].get("value"),null!==e&&e>0&&i.push(r[t]);this.model[this.resourcesField]=i}}),p=v.extend({init:function(e,t){k(t)&&(t={dataSource:t}),v.fn.init.call(this,e,t),this._wrapper(),this._resources(),this._timeline(),this._toolbar(),this._footer(),this._adjustDimensions(),this._preventRefresh=!0,this.view(this.timeline._selectedViewName),this._preventRefresh=!1,this._dataSource(),this._assignments(),this._dropDowns(),this._list(),this._dependencies(),this._resizable(),this._scrollable(),this._dataBind(),this._attachEvents(),this._createEditor(),f.notify(this)},events:["dataBinding","dataBound","add","edit","remove","cancel","save","change","navigate","moveStart","move","moveEnd","resizeStart","resize","resizeEnd"],options:{name:"Gantt",autoBind:!0,navigatable:!1,selectable:!0,editable:!0,columns:[],views:[],dataSource:{},dependencies:{},resources:{},assignments:{},messages:{save:"Save",cancel:"Cancel",destroy:"Delete",deleteTaskWindowTitle:"Delete task",deleteDependencyWindowTitle:"Delete dependency",views:{day:"Day",week:"Week",month:"Month",year:"Year"},actions:{append:"Add Task",addChild:"Add Child",insertBefore:"Add Above",insertAfter:"Add Below",pdf:"Export to PDF"},editor:{editorTitle:"Task",resourcesEditorTitle:"Resources",title:"Title",start:"Start",end:"End",percentComplete:"Complete",resources:"Resources",assingButton:"Assign",resourcesHeader:"Resources",unitsHeader:"Units"}},showWorkHours:!0,showWorkDays:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,snap:!0,height:600,listWidth:"30%"},select:function(e){var n=this.list;return e?(n.select(e),t):n.select()},clearSelection:function(){this.list.clearSelection()},destroy:function(){v.fn.destroy.call(this),this.dataSource&&(this.dataSource.unbind("change",this._refreshHandler),this.dataSource.unbind("progress",this._progressHandler),this.dataSource.unbind("error",this._errorHandler)),this.dependencies&&(this.dependencies.unbind("change",this._dependencyRefreshHandler),this.dependencies.unbind("error",this._dependencyErrorHandler)),this.timeline&&(this.timeline.unbind(),this.timeline.destroy()),this.list&&(this.list.unbind(),this.list.destroy()),this.footerDropDown&&this.footerDropDown.destroy(),this.headerDropDown&&this.headerDropDown.destroy(),this._editor&&this._editor.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),this.toolbar.off(M),e(window).off("resize"+M,this._resizeHandler),e(this.wrapper).off(M),this.toolbar=null,this.footer=null},_attachEvents:function(){this._resizeHandler=S(this.resize,this),e(window).on("resize"+M,this._resizeHandler)},_wrapper:function(){var e=p.styles,t=[e.icon,e.resizeHandle].join(" "),n=this.options,i=n.height,r=n.width;this.wrapper=this.element.addClass(e.wrapper).append("<div class='"+e.listWrapper+"'><div></div></div>").append("<div class='"+e.splitBarWrapper+"'><div class='"+t+"'></div></div>").append("<div class='"+e.timelineWrapper+"'><div></div></div>"),this.wrapper.find(N+e.list).width(n.listWidth),i&&this.wrapper.height(i),r&&this.wrapper.width(r)},_toolbar:function(){var t,n,i=this,r=p.styles,o=N+r.toolbar.views+" > li",a=N+r.toolbar.pdfButton,s=r.hovered,l=this.options.toolbar,c=e("<div class='"+r.toolbar.actions+"'>");C(l)||(l=typeof l===R?l:this._actions(l),l=S(f.template(l),this)),n=e(G({ns:f.ns,views:this.timeline.views,styles:r.toolbar})),c.append(l({})),t=e("<div class='"+r.toolbar.headerWrapper+"'>").append(c).append(n),this.wrapper.prepend(t),this.toolbar=t,t.on(z+M,o,function(t){t.preventDefault();var n=e(this).attr(f.attr("name"));i.trigger("navigate",{view:n})||i.view(n)}).on(z+M,a,function(){i.saveAsPDF()}),this.wrapper.find(N+r.toolbar.toolbar+" li").hover(function(){e(this).addClass(s)},function(){e(this).removeClass(s)})},_actions:function(){var e,t,n=this.options,i=n.toolbar,r="";if(!k(i)){if(!n.editable)return r;i=["append"]}for(e=0,t=i.length;t>e;e++)r+=this._createButton(i[e]);return r},_footer:function(){if(this.options.editable){var t=e($({styles:p.styles.toolbar,action:{data:"add",title:this.options.messages.actions.append}}));this.wrapper.append(t),this.footer=t}},_createButton:function(e){var t=e.template||W,n=this.options.messages.actions,i=typeof e===R?e:e.name||e.text,r=X[i]?X[i].className:"k-gantt-"+(i||"").replace(/\s/g,""),o={iconClass:"",action:"",text:i,className:r,styles:p.styles.toolbar};if(!(i||D(e)&&e.template))throw Error("Custom commands should have name specified");return o=T(!0,o,X[i],{text:n[i]}),D(e)&&(e.className&&x(o.className,e.className.split(" "))<0&&(e.className+=" "+o.className),o=T(!0,o,e)),f.template(t)(o)},_adjustDimensions:function(){var e=this.element,t=p.styles,n=N+t.list,i=N+t.timeline,r=N+t.splitBar,o=this.toolbar.outerHeight(),a=this.footer?this.footer.outerHeight():0,s=e.height(),l=e.width(),c=e.find(r).outerWidth(),d=e.find(n).outerWidth();e.children([n,i,r].join(",")).height(s-(o+a)).end().children(i).width(l-(c+d))},_scrollTo:function(e){var t=this.timeline.view(),i=f.attr("uid"),r="string"==typeof e?e:e.closest("tr"+n()).attr(i),o=t.content.find(n(r));0!==o.length&&t._scrollTo(o)},_dropDowns:function(){var e=this,t=N+p.styles.toolbar.actions,n=this.options.messages.actions,i=this.dataSource,r=this.timeline,o=function(t){var n,o=t.type,a=i._createNewModel(),s=e.dataItem(e.select()),l=i.taskParent(s),c=r.view()._timeSlots()[0],d="add"===o?s:l;a.set("title","New task"),d?(a.set("parentId",d.get("id")),a.set("start",d.get("start")),a.set("end",d.get("end"))):(a.set("start",c.start),a.set("end",c.end)),"add"!==o&&(n=s.get("orderId"),n="insert-before"===o?n:n+1),e._createTask(a,n)};this.options.editable&&(this.footerDropDown=new J(this.footer.children(t).eq(0),{messages:{actions:n},direction:"up",animation:{open:{effects:"slideIn:up"}},navigatable:e.options.navigatable}),this.headerDropDown=new J(this.toolbar.children(t).eq(0),{messages:{actions:n},navigatable:e.options.navigatable}),this.footerDropDown.bind("command",o),this.headerDropDown.bind("command",o))},_list:function(){var e,t,n=this,i=n.options.navigatable,r=p.styles,a=this.wrapper.find(N+r.list),s=a.find("> div"),l=this.wrapper.find(N+r.toolbar.actions+" > button"),c={columns:this.options.columns||[],dataSource:this.dataSource,selectable:this.options.selectable,editable:this.options.editable,listWidth:a.outerWidth(),resourcesField:this.resources.field},d=c.columns,u=function(){i&&(n._current(n._cachedCurrent),o(n.list.content.find("table"),!0)),delete n._cachedCurrent};for(t=0;d.length>t;t++)e=d[t],e.field===this.resources.field&&"function"!=typeof e.editor&&(e.editor=S(this._createResourceEditor,this));this.list=new f.ui.GanttList(s,c),this.list.bind("render",function(){n._navigatable()},!0).bind("edit",function(e){n._cachedCurrent=e.cell,n.trigger("edit",{task:e.model,container:e.cell})&&e.preventDefault()}).bind("cancel",function(e){n.trigger("cancel",{task:e.model,container:e.cell})&&e.preventDefault(),u()}).bind("update",function(e){n._updateTask(e.task,e.updateInfo),u()}).bind("change",function(){n.trigger("change");var e=n.list.select();e.length?(l.removeAttr("data-action","add"),n.timeline.select("[data-uid='"+e.attr("data-uid")+"']")):(l.attr("data-action","add"),n.timeline.clearSelection())})},_timeline:function(){var e=this,t=p.styles,n=i(T(!0,{resourcesField:this.resources.field},this.options)),r=this.wrapper.find(N+t.timeline+" > div");this.timeline=new f.ui.GanttTimeline(r,n),this.timeline.bind("navigate",function(n){e.toolbar.find(N+t.toolbar.views+" > li").removeClass(t.selected).end().find(N+t.toolbar.viewButton+"-"+n.view.replace(/\./g,"\\.").toLowerCase()).addClass(t.selected),e.refresh()}).bind("moveStart",function(t){e.trigger("moveStart",{task:t.task})&&t.preventDefault()}).bind("move",function(t){var n=t.task,i=t.start,r=new Date(i.getTime()+n.duration());e.trigger("move",{task:n,start:i,end:r})&&t.preventDefault()}).bind("moveEnd",function(t){var n=t.task,i=t.start,r=new Date(i.getTime()+n.duration());e.trigger("moveEnd",{task:n,start:i,end:r})||e._updateTask(e.dataSource.getByUid(n.uid),{start:i,end:r})}).bind("resizeStart",function(t){e.trigger("resizeStart",{task:t.task})&&t.preventDefault()}).bind("resize",function(t){e.trigger("resize",{task:t.task,start:t.start,end:t.end})&&t.preventDefault()}).bind("resizeEnd",function(t){var n=t.task,i={};t.resizeStart?i.start=t.start:i.end=t.end,e.trigger("resizeEnd",{task:n,start:t.start,end:t.end})||e._updateTask(e.dataSource.getByUid(n.uid),i)}).bind("percentResizeEnd",function(t){e._updateTask(e.dataSource.getByUid(t.task.uid),{percentComplete:t.percentComplete})}).bind("dependencyDragEnd",function(t){var n=e.dependencies._createNewModel({type:t.type,predecessorId:t.predecessor.id,successorId:t.successor.id});e._createDependency(n)}).bind("select",function(t){e.select("[data-uid='"+t.uid+"']")}).bind("editTask",function(t){e.editTask(t.uid)}).bind("clear",function(){e.clearSelection()}).bind("removeTask",function(t){e.removeTask(e.dataSource.getByUid(t.uid))}).bind("removeDependency",function(t){e.removeDependency(e.dependencies.getByUid(t.uid))})},_dataSource:function(){var e=this.options,t=e.dataSource;t=k(t)?{data:t}:t,this.dataSource&&this._refreshHandler?this.dataSource.unbind("change",this._refreshHandler).unbind("progress",this._progressHandler).unbind("error",this._errorHandler):(this._refreshHandler=S(this.refresh,this),this._progressHandler=S(this._requestStart,this),this._errorHandler=S(this._error,this)),this.dataSource=f.data.GanttDataSource.create(t).bind("change",this._refreshHandler).bind("progress",this._progressHandler).bind("error",this._errorHandler)},_dependencies:function(){var e=this.options.dependencies||{},t=k(e)?{data:e}:e;this.dependencies&&this._dependencyRefreshHandler?this.dependencies.unbind("change",this._dependencyRefreshHandler).unbind("error",this._dependencyErrorHandler):(this._dependencyRefreshHandler=S(this.refreshDependencies,this),this._dependencyErrorHandler=S(this._error,this)),this.dependencies=f.data.GanttDependencyDataSource.create(t).bind("change",this._dependencyRefreshHandler).bind("error",this._dependencyErrorHandler)},_resources:function(){var e=this.options.resources,t=e.dataSource||{};this.resources={field:"resources",dataTextField:"name",dataColorField:"color",dataFormatField:"format"},T(this.resources,e),this.resources.dataSource=f.data.DataSource.create(t)},_assignments:function(){var e=this.options.assignments,t=e.dataSource||{};this.assignments?this.assignments.dataSource.unbind("change",this._assignmentsRefreshHandler):this._assignmentsRefreshHandler=S(this.refresh,this),this.assignments={dataTaskIdField:"taskId",dataResourceIdField:"resourceId",dataValueField:"value"},T(this.assignments,e),this.assignments.dataSource=f.data.DataSource.create(t),this.assignments.dataSource.bind("change",this._assignmentsRefreshHandler)},_createEditor:function(){var e=this,n=this._editor=new u(this.wrapper,T({},this.options,{target:this,resources:{field:this.resources.field,editor:S(this._createResourceEditor,this)},createButton:S(this._createPopupButton,this)}));n.bind("cancel",function(n){var i=e.dataSource.getByUid(n.model.uid);return e.trigger("cancel",{container:n.container,task:i})?(n.preventDefault(),t):(e.cancelTask(),t)}).bind("edit",function(t){var n=e.dataSource.getByUid(t.model.uid);e.trigger("edit",{container:t.container,task:n})&&t.preventDefault()}).bind("save",function(t){var n=e.dataSource.getByUid(t.model.uid);e.saveTask(n,t.updateInfo)}).bind("remove",function(t){e.removeTask(t.model.uid)})},_createResourceEditor:function(e,t){var n=this,i=t instanceof y?t:t.model,r=i.get("id"),o=this.options.messages,a=n.resources.field,s=this._resourceEditor=new h(e,{resourcesField:a,data:this._wrapResourceData(r),model:i,messages:T({},o.editor),buttons:[{name:"update",text:o.save,className:p.styles.primary},{name:"cancel",text:o.cancel}],createButton:S(this._createPopupButton,this),save:function(e){n._updateAssignments(e.model.get("id"),e.model.get(a))}});s.open()},_createPopupButton:function(e){var t=e.name||e.text,n={className:p.styles.popup.button+" k-gantt-"+(t||"").replace(/\s/g,""),text:t,attr:""};if(!(t||D(e)&&e.template))throw Error("Custom commands should have name specified");return D(e)&&(e.className&&(e.className+=" "+n.className),n=T(!0,n,e)),f.template(j)(n)},view:function(e){return this.timeline.view(e)},dataItem:function(e){var t,n;return e?(t=this.list,n=t.content.find(e),t._modelFromElement(n)):null},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.list._setDataSource(this.dataSource),this.options.autoBind&&e.fetch()},setDependenciesDataSource:function(e){this.options.dependencies=e,this._dependencies(),this.options.autoBind&&e.fetch()},items:function(){return this.wrapper.children(".k-task")},_updateAssignments:function(e,t){for(var n,i,r,o,a,s,l,c=this.assignments.dataSource,d=this.assignments.dataTaskIdField,u=this.assignments.dataResourceIdField,h=this.assignments.dataValueField,p=!1,f=new b(c.view()).filter({field:d,operator:"eq",value:e}).toArray();f.length;){for(n=f[0],o=0,a=t.length;a>o;o++)if(i=t[o],n.get(u)===i.get("id")){r=t[o].get("value"),n.set(h,r),t.splice(o,1),p=!0;break}p||c.remove(n),p=!1,f.shift()}for(s=0,l=t.length;l>s;s++)i=t[s],n=c._createNewModel(),n[d]=e,n[u]=i.get("id"),n[h]=i.get("value"),c.add(n);c.sync()},cancelTask:function(){var e=this._editor,t=e.container;t&&e.close()},editTask:function(e){var t,n="string"==typeof e?this.dataSource.getByUid(e):e;n&&(t=this.dataSource._createNewModel(n.toJSON()),t.uid=n.uid,this.cancelTask(),this._editTask(t))},_editTask:function(e){this._editor.editTask(e)},saveTask:function(e,t){var n=this._editor,i=n.container,r=n.editable;i&&r&&r.end()&&this._updateTask(e,t)},_updateTask:function(e,t){var n=this.resources.field;this.trigger("save",{task:e,values:t})||(this._preventRefresh=!0,this.dataSource.update(e,t),t[n]&&this._updateAssignments(e.get("id"),t[n]),this._syncDataSource())},removeTask:function(e){var t=this,n="string"==typeof e?this.dataSource.getByUid(e):e;n&&this._taskConfirm(function(e){e||t._removeTask(n)},n)},_createTask:function(e,n){if(!this.trigger("add",{task:e,dependency:null})){var i=this.dataSource;this._preventRefresh=!0,n===t?i.add(e):i.insert(n,e),this._scrollToUid=e.uid,this._syncDataSource()}},_createDependency:function(e){this.trigger("add",{task:null,dependency:e})||(this._preventDependencyRefresh=!0,this.dependencies.add(e),this._preventDependencyRefresh=!1,this.dependencies.sync())},removeDependency:function(e){var t=this,n="string"==typeof e?this.dependencies.getByUid(e):e;n&&this._dependencyConfirm(function(e){e||t._removeDependency(n)},n)},_removeTaskDependencies:function(e,t){this._preventDependencyRefresh=!0;for(var n=0,i=t.length;i>n;n++)this.dependencies.remove(t[n]);this._preventDependencyRefresh=!1,this.dependencies.sync()},_removeResourceAssignments:function(e){var t,n,i=this.assignments.dataSource,r=i.view(),o={field:this.assignments.dataTaskIdField,operator:"eq",value:e.get("id")};for(r=new b(r).filter(o).toArray(),this._preventRefresh=!0,t=0,n=r.length;n>t;t++)i.remove(r[t]);this._preventRefresh=!1,i.sync()},_removeTask:function(e){var t=this.dependencies.dependencies(e.id);this.trigger("remove",{task:e,dependencies:t})||(this._removeTaskDependencies(e,t),this._removeResourceAssignments(e),this._preventRefresh=!0,this.dataSource.remove(e)&&this._syncDataSource(),this._preventRefresh=!1)},_removeDependency:function(e){this.trigger("remove",{task:null,dependencies:[e]})||this.dependencies.remove(e)&&this.dependencies.sync()},_taskConfirm:function(e,t){this._confirm(e,{model:t,text:V,title:this.options.messages.deleteTaskWindowTitle})},_dependencyConfirm:function(e,t){this._confirm(e,{model:t,text:U,title:this.options.messages.deleteDependencyWindowTitle})},_confirm:function(e,t){var n,i,r=this.options.editable;r===!0||r.confirmation!==!1?(n=this.options.messages,i=[{name:"delete",text:n.destroy,className:p.styles.primary,click:function(){e()}},{name:"cancel",text:n.cancel,click:function(){e(!0)}}],this.showDialog(T(!0,{},t,{buttons:i}))):e()},showDialog:function(e){this._editor.showDialog(e)},refresh:function(){var e,t,i,r,o,a;this._preventRefresh||this.list.editable||(this._progress(!1),e=this.dataSource,t=e.taskTree(),i=this._scrollToUid,a=-1,this.current&&(o=this.current.closest("tr").attr(f.attr("uid")),a=this.current.index()),this.trigger("dataBinding")||(0!==this.resources.dataSource.data().length&&this._assignResources(t),this._editor&&this._editor.close(),this.clearSelection(),this.list._render(t),this.timeline._render(t),this.timeline._renderDependencies(this.dependencies.view()),i&&(this._scrollTo(i),this.select(n(i))),(i||o)&&a>=0&&(r=this.list.content.find("tr"+n(i||o)+" > td:eq("+a+")"),this._current(r)),this._scrollToUid=null,this.trigger("dataBound")))},refreshDependencies:function(){this._preventDependencyRefresh||this.trigger("dataBinding")||(this.timeline._renderDependencies(this.dependencies.view()),this.trigger("dataBound"))},_assignResources:function(e){var t,n,i=this.resources,r=this.assignments,o=function(){var e=r.dataSource.view(),t={field:r.dataTaskIdField};return e=new b(e).group(t).toArray()},a=o(),s=function(e,t){var n,r,o=e.get("id");for(f.setter(i.field)(e,new w([])),n=0,r=a.length;r>n;n++)a[n].value===o&&t(e,a[n].items)},l=function(e,t){var n,o,a,s,l,c,d,u;for(n=0,o=t.length;o>n;n++)a=t[n],s=i.dataSource.get(a.get(r.dataResourceIdField)),l=a.get(r.dataValueField),c=a.get(r.dataResourceIdField),d=s.get(i.dataFormatField)||P,u=f.toString(l,d),e[i.field].push(new y({id:c,name:s.get(i.dataTextField),color:s.get(i.dataColorField),value:l,formatedValue:u}))};for(t=0,n=e.length;n>t;t++)s(e[t],l)},_wrapResourceData:function(e){var t,n,i,r=this,o=[],a=this.resources.dataSource.view(),s=this.assignments.dataSource.view(),l=new b(s).filter({field:r.assignments.dataTaskIdField,operator:"eq",value:e}).toArray(),c=function(e){var t=null;return new b(l).filter({field:r.assignments.dataResourceIdField,operator:"eq",value:e}).select(function(e){t+=e.get(r.assignments.dataValueField)}),t};for(n=0,i=a.length;i>n;n++)t=a[n],o.push({id:t.get("id"),name:t.get(r.resources.dataTextField),format:t.get(r.resources.dataFormatField)||P,value:c(t.id)});return o},_syncDataSource:function(){this._preventRefresh=!1,this._requestStart(),this.dataSource.sync()},_requestStart:function(){this._progress(!0)},_error:function(){this._progress(!1)},_progress:function(e){f.ui.progress(this.element,e)},_resizable:function(){var t,n,i,r=this.wrapper,o=p.styles,a=N+o.gridContent,s=r.find(N+o.list),l=r.find(N+o.timeline);this._resizeDraggable=r.find(N+o.splitBar).height(s.height()).hover(function(){e(this).addClass(o.splitBarHover)},function(){e(this).removeClass(o.splitBarHover)}).end().kendoResizable({orientation:"horizontal",handle:N+o.splitBar,start:function(){t=s.width(),n=l.width(),i=l.find(a).scrollLeft()},resize:function(e){var r=e.x.initialDelta;0>t+r||0>n-r||(s.width(t+r),l.width(n-r),l.find(a).scrollLeft(i+r))}}).data("kendoResizable")},_scrollable:function(){var t=p.styles,n=N+t.gridContent,i=N+t.gridHeaderWrap,r=this.timeline.element,o=this.list.element;r.find(n).on("scroll",function(){r.find(i).scrollLeft(this.scrollLeft),o.find(n).scrollTop(this.scrollTop)}),o.find(n).on("scroll",function(){o.find(i).scrollLeft(this.scrollLeft)}).on("DOMMouseScroll"+M+" mousewheel"+M,function(t){var i=r.find(n),o=i.scrollTop(),a=f.wheelDeltaY(t);a&&(t.preventDefault(),e(t.currentTarget).one("wheel"+M,!1),i.scrollTop(o+-a))})},_navigatable:function(){var i,r=this,a=this.options.navigatable,s=this.options.editable,l=this.list.header.find("table"),c=this.list.content.find("table"),d=p.styles,u=this.timeline.element.find(N+d.gridContent),h=l.add(c),g=n(),m={collapse:!1,expand:!0},v=function(e){var t=r.timeline.view()._timeSlots()[0].offsetWidth;u.scrollLeft(u.scrollLeft()+(e?-t:t))},_=function(e){var t=r.current.parent("tr"+n()),i=r.current.index(),a=t[e]();0!==r.select().length&&r.clearSelection(),0!==a.length?(r._current(a.children("td:eq("+i+")")),r._scrollTo(r.current)):r.current.is("td")&&"prev"==e?o(l):r.current.is("th")&&"next"==e&&o(c)},y=function(e){var t=r.current[e]();0!==t.length&&(r._current(t),i=r.current.index())},w=function(e){var t=r.dataItem(r.current);t.summary&&t.expanded!==e&&t.set("expanded",e)},b=function(){var e,t;r.options.editable&&!r.list.editable&&(e=r.select(),t=f.attr("uid"),e.length&&r.removeTask(e.attr(t)))};return e(this.wrapper).on("mousedown"+M,"tr"+g+", div"+g+":not("+N+d.line+")",function(t){var i,l=e(t.currentTarget),c=e(t.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap");t.ctrlKey||(a&&(i=l.is("tr")?e(t.target).closest("td"):r.list.content.find("tr"+n(l.attr(f.attr("uid")))+" > td:first"),r._current(i)),!a&&!s||c||setTimeout(function(){o(r.list.content.find("table"),!0)},2))}),a!==!0?(c.on("keydown"+M,function(e){e.keyCode==E.DELETE&&b()}),t):(h.on("focus"+M,function(){var t=this===c.get(0)?"td":"th",n=(e(this),r.select()),o=r.current||e(n.length?n:this).find(t+":eq("+(i||0)+")");r._current(o)}).on("blur"+M,function(){r._current(),this==l&&e(this).attr(I,-1)}).on("keydown"+M,function(e){var t,n=e.keyCode;if(r.current)switch(t=r.current.is("td"),n){case E.RIGHT:e.preventDefault(),e.altKey?v():e.ctrlKey?w(m.expand):y("next");break;case E.LEFT:e.preventDefault(),e.altKey?v(!0):e.ctrlKey?w(m.collapse):y("prev");break;case E.UP:e.preventDefault(),_("prev");break;case E.DOWN:e.preventDefault(),_("next");break;case E.SPACEBAR:e.preventDefault(),t&&r.select(r.current.closest("tr"));break;case E.ENTER:e.preventDefault(),t?r.options.editable&&(r._cachedCurrent=r.current,r.list._startEditHandler(r.current),e.stopPropagation()):r.current.children("a.k-link").click();break;case E.ESC:e.stopPropagation();break;case E.DELETE:t&&b();break;default:n>=49&&57>=n&&r.view(r.timeline._viewByIndex(n-49))}}),t)},_current:function(t){var n,i=p.styles;this.current&&this.current.length&&this.current.removeClass(i.focused).removeAttr("id"),t&&t.length?(this.current=t.addClass(i.focused).attr("id",O),n=e(f._activeElement()),n.is("table")&&this.wrapper.find(n).length>0&&n.removeAttr(L).attr(L,O)):this.current=null},_dataBind:function(){var t,n=this;n.options.autoBind&&(this._preventRefresh=!0,this._preventDependencyRefresh=!0,t=e.map([this.dataSource,this.dependencies,this.resources.dataSource,this.assignments.dataSource],function(e){return e.fetch()}),e.when.apply(null,t).done(function(){n._preventRefresh=!1,n._preventDependencyRefresh=!1,n.refresh()}))},_resize:function(){this._adjustDimensions(),this.timeline.view()._adjustHeight(),this.list._adjustHeight()}}),f.PDFMixin&&f.PDFMixin.extend(p.prototype),f.ui.plugin(p),T(!0,p,{styles:Q})}(window.kendo.jQuery),function(e,t){function n(e){var t,n,i=[],r=e.className;for(t=0,n=e.level;n>t;t++)i.push(c("span",{className:r}));return i}var i,r,o,a=kendo.data,s=e.extend,l=kendo.dom,c=l.element,d=l.text,u=l.html,h=kendo.ui,p=h.DataBoundWidget,f=a.DataSource,g=a.ObservableArray,m=a.Query,v=a.Model,_=e.proxy,y=e.map,w=e.grep,b="string",k="change",x="error",C="progress",S=".",T=".kendoTreeList",D="click",A="mousedown",E="edit",M="save",P="expand",I="collapse",z="remove",F="dataBinding",R="dataBound",B="cancel",L="filterMenuInit",O={wrapper:"k-treelist k-grid k-widget",header:"k-header",button:"k-button",alt:"k-alt",editCell:"k-edit-cell",group:"k-treelist-group",gridToolbar:"k-grid-toolbar",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",gridFilter:"k-grid-filter",footerTemplate:"k-footer-template",loading:"k-loading",refresh:"k-i-refresh",retry:"k-request-retry",selected:"k-state-selected",status:"k-status",link:"k-link",withIcon:"k-with-icon",filterable:"k-filterable",icon:"k-icon",iconFilter:"k-filter",iconCollapse:"k-i-collapse",iconExpand:"k-i-expand",iconHidden:"k-i-none",iconPlaceHolder:"k-icon k-i-none",input:"k-input",dropPositions:"k-insert-top k-insert-bottom k-add k-insert-middle",dropTop:"k-insert-top",dropBottom:"k-insert-bottom",dropAdd:"k-add",dropMiddle:"k-insert-middle",dropDenied:"k-denied",dragStatus:"k-drag-status",dragClue:"k-drag-clue",dragClueText:"k-clue-text"},H={create:{imageClass:"k-add",className:"k-grid-add",methodName:"addRow"},createchild:{imageClass:"k-add",className:"k-grid-add",methodName:"addRow"},destroy:{imageClass:"k-delete",className:"k-grid-delete",methodName:"removeRow"},edit:{imageClass:"k-edit",className:"k-grid-edit",methodName:"editRow"},update:{imageClass:"k-update",className:"k-primary k-grid-update",methodName:"saveRow"},canceledit:{imageClass:"k-cancel",className:"k-grid-cancel",methodName:"_cancelEdit"},excel:{imageClass:"k-i-excel",className:"k-grid-excel",methodName:"saveAsExcel"},pdf:{imageClass:"k-i-pdf",className:"k-grid-pdf",methodName:"saveAsPDF"}},N=v.define({id:"id",fields:{id:{type:"number"},parentId:{type:"number",nullable:!0}},init:function(e){v.fn.init.call(this,e),this._loaded=!1},loaded:function(e){return e===t?this._loaded:(this._loaded=e,t)},shouldSerialize:function(e){return v.fn.shouldSerialize.call(this,e)&&"_loaded"!==e&&"_error"!=e&&"_edit"!=e}}),V=f.extend({init:function(e){f.fn.init.call(this,s(!0,{},{schema:{modelBase:N,model:N}},e))},_readData:function(e){var t,n,i=[],r=this.data();for(t=0,n=r.length;n>t;t++)i.push(r[t]);return i.concat(f.fn._readData.call(this,e))},_readAggregates:function(e){var t=s(this._aggregateResult,this.reader.aggregates(e));return""in t&&(t[this._defaultParentId()]=t[""],delete t[""]),t},remove:function(e){var t=this._subtree(this._childrenMap(this.data()),e.id);this._removeItems(t),f.fn.remove.call(this,e)},_filterCallback:function(e){var t,n,i=[],r=e.toArray(),o={};for(t=0;r.length>t;t++)for(n=r[t];n&&(o[n.id]=!0,!o[n.parentId]);)o[n.parentId]=!0,n=this.parentNode(n),n&&i.push(n);return new m(r.concat(i))},_subtree:function(e,t){var n,i,r=e[t]||[],o=this._defaultParentId();for(n=0,i=r.length;i>n;n++)r[n].id!==o&&(r=r.concat(this._subtree(e,r[n].id)));return r},_childrenMap:function(e){var t,n,i,r,o={};for(e=this._observeView(e),t=0;e.length>t;t++)n=e[t],i=n.id,r=n.parentId,o[i]=o[i]||[],o[r]=o[r]||[],o[r].push(n);return o},_calculateAggregates:function(e,t){var n,i,r,o,a,s;for(t=t||{},n={},a=t.filter,a&&(e=m.process(e,{filter:a,filterCallback:_(this._filterCallback,this)}).data),s=this._childrenMap(e),n[this._defaultParentId()]=new m(this._subtree(s,this._defaultParentId())).aggregate(t.aggregate),o=0;e.length>o;o++)i=e[o],r=this._subtree(s,i.id),n[i.id]=new m(r).aggregate(t.aggregate);return n},_queryProcess:function(e,t){var n,i,r,o,a,s,l;for(t=t||{},t.filterCallback=_(this._filterCallback,this),n=this._defaultParentId(),i=m.process(e,t),r=this._childrenMap(i.data),e=r[n]||[],a=0;e.length>a;a++)s=e[a],s.id!==n&&(l=r[s.id],o=!(!l||!l.length),s.loaded()||s.loaded(o),(s.loaded()||s.hasChildren!==!0)&&(s.hasChildren=o),o&&e.splice.apply(e,[a+1,0].concat(l)));return i.data=e,i},_queueRequest:function(e,t){t.call(this)},_modelLoaded:function(e){var t=this.get(e);t.loaded(!0),t.hasChildren=this.childNodes(t).length>0},_modelError:function(e,t){this.get(e)._error=t},read:function(e){return e&&e.id||(this._data=this._observe([])),f.fn.read.call(this,e)},load:function(e){var t="_query";return!e.loaded()&&e.hasChildren&&(t="read"),this[t]({id:e.id}).then(_(this._modelLoaded,this,e.id),_(this._modelError,this,e.id))},_byParentId:function(e,t){var n,i,r=[],o=this.view();if(e===t)return[];for(i=0;o.length>i;i++)n=o.at(i),n.parentId==e&&r.push(n);return r},_defaultParentId:function(){return this.reader.model.fn.defaults.parentId},childNodes:function(e){return this._byParentId(e.id,this._defaultParentId())},rootNodes:function(){return this._byParentId(this._defaultParentId())},parentNode:function(e){return this.get(e.parentId)},level:function(e){var t=-1;e instanceof N||(e=this.get(e));do e=this.parentNode(e),t++;while(e);return t},filter:function(e){var n=f.fn.filter;return e===t?n.call(this,e):(n.call(this,e),t)}});V.create=function(t){return e.isArray(t)?t={data:t}:t instanceof g&&(t={data:t.toJSON()}),t instanceof V?t:new V(t)},i=kendo.Observable.extend({init:function(e,t){kendo.Observable.fn.init.call(this),t=this.options=s(!0,{},this.options,t),this.element=e,this.bind(this.events,t),this.model=this.options.model,this.fields=this._fields(this.options.columns),this._initContainer(),this.createEditable()},events:[],_initContainer:function(){this.wrapper=this.element},createEditable:function(){var e=this.options;this.editable=new h.Editable(this.wrapper,{fields:this.fields,target:e.target,clearContainer:e.clearContainer,model:this.model})},_isEditable:function(e){return e.field&&this.model.editable(e.field)},_fields:function(e){var t,n,i,r=[];for(t=0,n=e.length;n>t;t++)i=e[t],this._isEditable(i)&&r.push({field:i.field,format:i.format,editor:i.editor});return r},end:function(){return this.editable.end()},close:function(){this.destroy()},destroy:function(){this.editable.destroy(),this.editable.element.find("["+kendo.attr("container-for")+"]").empty(),this.model=this.wrapper=this.element=this.columns=this.editable=null}}),r=i.extend({init:function(e,t){i.fn.init.call(this,e,t),this._attachHandlers(),this.open()},events:[B,M],options:{window:{modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1}},_initContainer:function(){var t=this.options,n=[];
this.wrapper=e('<div class="k-popup-edit-form"/>').attr(kendo.attr("uid"),this.model.uid).append('<div class="k-edit-form-container"/>'),t.template?(this._appendTemplate(n),this.fields=[]):this._appendFields(n),this._appendButtons(n),new l.Tree(this.wrapper.children()[0]).render(n),this.wrapper.appendTo(t.appendTo),this.window=new h.Window(this.wrapper,t.window)},_appendTemplate:function(e){var t=this.options.template;typeof t===b&&(t=window.unescape(t)),t=kendo.template(t)(this.model),e.push(u(t))},_appendFields:function(e){var t,n,i,r=this.options.columns;for(t=0,n=r.length;n>t;t++)i=r[t],i.command||(e.push(u('<div class="k-edit-label"><label for="'+i.field+'">'+(i.title||i.field||"")+"</label></div>")),e.push(this._isEditable(i)?u("<div "+kendo.attr("container-for")+'="'+i.field+'" class="k-edit-field"></div>'):c("div",{"class":"k-edit-field"},[this.options.fieldRenderer(i,this.model)])))},_appendButtons:function(e){e.push(c("div",{"class":"k-edit-buttons k-state-default"},this.options.commandRenderer()))},_attachHandlers:function(){var e=this._cancelProxy=_(this._cancel,this);this.wrapper.on(D+T,".k-grid-cancel",this._cancelProxy),this._saveProxy=_(this._save,this),this.wrapper.on(D+T,".k-grid-update",this._saveProxy),this.window.bind("close",function(t){t.userTriggered&&e(t)})},_dettachHandlers:function(){this._cancelProxy=null,this._saveProxy=null,this.wrapper.off(T)},_cancel:function(e){this.trigger(B,e)},_save:function(){this.trigger(M)},open:function(){this.window.center().open()},close:function(){this.window.bind("deactivate",_(this.destroy,this)).close()},destroy:function(){this.window.destroy(),this.window=null,this._dettachHandlers(),i.fn.destroy.call(this)}}),o=p.extend({init:function(e,t){p.fn.init.call(this,e,t),this._dataSource(this.options.dataSource),this._columns(),this._layout(),this._sortable(),this._filterable(),this._selectable(),this._attachEvents(),this._toolbar(),this._scrollable(),this.options.autoBind&&this.dataSource.fetch(),this._adjustHeight(),kendo.notify(this)},_scrollable:function(){var e,t;this.options.scrollable&&(e=this.header.closest(".k-grid-header-wrap"),this.content.closest(".k-grid-content").bind("scroll"+T,function(){e.scrollLeft(this.scrollLeft)}),t=kendo.touchScroller(this.content.closest("div")),t&&t.movable&&(this._touchScroller=t))},_progress:function(){var e=this.options.messages;this.content.find("tr").length||this._showStatus(kendo.template("<span class='#= className #' /> #: messages.loading #")({className:O.icon+" "+O.loading,messages:e}))},_error:function(e){this.dataSource.rootNodes().length||this._render({error:e})},refresh:function(e){e=e||{},"itemchange"==e.action&&this.editor||this.trigger(F)||(this._angularItems("cleanup"),this._angularFooters("cleanup"),this._cancelEditor(),this._render(),this._adjustHeight(),this._angularItems("compile"),this._angularFooters("compile"),this.trigger(R))},_angularFooters:function(t){var n,i,r,o=this.dataSource.aggregates(),a=this.content.find("tr").filter(function(){return e(this).hasClass(O.footerTemplate)});for(n=0;a.length>n;n++)i=a.eq(n),r=o[i.attr("data-parentId")],this._angularFooter(t,i.find("td").get(),r)},_angularFooter:function(e,t,n){var i=this.columns;this.angular(e,function(){return{elements:t,data:y(i,function(e){return{column:e,aggregate:n&&n[e.field]}})}})},items:function(){return this.content.find("tr").filter(function(){return!e(this).hasClass(O.footerTemplate)})},_showStatus:function(t){var n=this.element.find(".k-status");n.length||(n=e("<div class='k-status' />").appendTo(this.element)),this._contentTree.render([]),this.content.closest(S+O.gridContent).hide(),n.html(t)},_hideStatus:function(){this.element.find(".k-status").remove(),this.content.closest(S+O.gridContent).show()},_adjustHeight:function(){var e,t=this.element,n=t.find(S+O.gridContentWrap),i=t.find(S+O.gridHeader),r=t.find(S+O.gridToolbar);t.height(this.options.height),e=function(e){var t,n;return e[0].style.height?!0:(t=e.height(),e.height("auto"),n=e.height(),e.height(""),t!=n)},e(t)&&n.height(t.height()-i.outerHeight()-r.outerHeight())},destroy:function(){p.fn.destroy.call(this);var e=this.dataSource;e.unbind(k,this._refreshHandler),e.unbind(x,this._errorHandler),e.unbind(C,this._progressHandler),this._destroyEditor(),this.element.off(T),this._touchScroller&&this._touchScroller.destroy(),this._refreshHandler=this._errorHandler=this._progressHandler=null,this.header=this.content=this.element=null,this._statusTree=this._headerTree=this._contentTree=null},options:{name:"TreeList",columns:[],autoBind:!0,scrollable:!0,selectable:!1,sortable:!1,toolbar:null,height:null,messages:{noRows:"No records to display",loading:"Loading...",requestFailed:"Request failed.",retry:"Retry",commands:{edit:"Edit",update:"Update",canceledit:"Cancel",create:"Add new record",createchild:"Add child record",destroy:"Delete",excel:"Export to Excel",pdf:"Export to PDF"}},excel:{hierarchy:!0},filterable:!1,editable:!1},events:[k,E,M,z,P,I,F,R,B,L],_toggle:function(e,n){var i=e.loaded();e._error&&(e.expanded=!1,e._error=t),(i||!e.expanded)&&(t===n&&(n=!e.expanded),e.expanded=n,i||this.dataSource.load(e).always(_(this.refresh,this)),this.refresh())},expand:function(e){this._toggle(this.dataItem(e),!0)},collapse:function(e){this._toggle(this.dataItem(e),!1)},_toggleChildren:function(t){var n=e(t.currentTarget),i=this.dataItem(n),r=i.expanded?I:P;this.trigger(r,{model:i})||this._toggle(i),t.preventDefault()},_attachEvents:function(){var e=S+O.iconCollapse+", ."+O.iconExpand+", ."+O.refresh,t=S+O.retry,n=this.dataSource;this.element.on(A+T,e,_(this._toggleChildren,this)).on(D+T,t,_(n.fetch,n)).on(D+T,".k-button[data-command]",_(this._commandClick,this))},_commandByName:function(e){var t,n,i,r=this.columns;if(e=e.toLowerCase(),H[e])return H[e];for(t=0;r.length>t;t++)if(i=r[t].command)for(n=0;i.length>n;n++)if(i[n].name.toLowerCase()==e)return i[n]},_commandClick:function(n){var i=e(n.currentTarget),r=i.attr("data-command"),o=this._commandByName(r),a=i.closest("tr");a=a.length?a:t,o&&(o.methodName?this[o.methodName](a):o.click&&o.click.call(this,n))},_columns:function(){var e,t=this.options.columns||[];this.columns=y(t,function(e){return e="string"==typeof e?{field:e}:e,s({encoded:!0},e)}),e=w(this.columns,function(e){return e.expandable}),this.columns.length&&!e.length&&(this.columns[0].expandable=!0),this._columnTemplates(),this._columnAttributes()},_columnTemplates:function(){var e,t,n,i=this.columns;for(e=0,t=i.length;t>e;e++)n=i[e],n.template&&(n.template=kendo.template(n.template)),n.headerTemplate&&(n.headerTemplate=kendo.template(n.headerTemplate)),n.footerTemplate&&(n.footerTemplate=kendo.template(n.footerTemplate))},_columnAttributes:function(){var e,t,n,i,r,o,a=this.columns;for(e=0,t=a.length;t>e;e++)if(n=a[e].attributes,n&&n.style)for(i=n.style.split(";"),n.style={},r=0;i.length>r;r++)o=i[r].split(":"),n.style[o[0]]=o[1]},_layout:function(){var e,t,n=this.element,i=this._colgroup(),r="";this.wrapper=n.addClass(O.wrapper),r="<div class='#= gridHeader #' style=\"padding-right: "+kendo.support.scrollbar()+"px;\"><div class='#= gridHeaderWrap #'><table role='grid'>"+i+"<thead role='rowgroup' /></table></div></div><div class='#= gridContentWrap #'><table role='treegrid' tabindex='0'>"+i+"<tbody /></table></div>",this.options.scrollable||(r="<table role='treegrid' tabindex='0'>"+i+"<thead class='#= gridHeader #' role='rowgroup' /><tbody /></table>"),this.options.toolbar&&(r="<div class='#= header # #= gridToolbar #' />"+r),n.append(kendo.template(r)(O)+"<div class='k-status' />"),this.toolbar=n.find(S+O.gridToolbar),e=this.header=n.find(S+O.gridHeader).find("thead").addBack().filter("thead"),this._headerTree=new l.Tree(this.header[0]),this._headerTree.render([c("tr",{role:"row"},this._ths())]),t=this.columns,this.angular("compile",function(){return{elements:e.find("th.k-header").get(),data:y(t,function(e){return{column:e}})}}),this.content=n.find(S+O.gridContentWrap).find("tbody"),this.content.length||(this.content=n.find("tbody")),this._contentTree=new l.Tree(this.content[0]),this._statusTree=new l.Tree(this.element.children(".k-status")[0])},_toolbar:function(){var t,n=this.options.toolbar,i=this.toolbar;n&&(e.isArray(n)?(t=this._buildCommands(n),new l.Tree(i[0]).render(t)):i.append(kendo.template(n)({})),this.angular("compile",function(){return{elements:i.get()}}))},_render:function(e){var t,n,i;e=e||{},t=this.options.messages,n=this.dataSource.rootNodes(),i=this.dataSource.aggregates(),this._absoluteIndex=0,e.error?this._showStatus(kendo.template("#: messages.requestFailed # <button class='#= buttonClass #'>#: messages.retry #</button>")({buttonClass:[O.button,O.retry].join(" "),messages:t})):n.length?(this._hideStatus(),this._contentTree.render(this._trs({aggregates:e.aggregates,data:n,visible:!0,level:0}))):this._showStatus(kendo.htmlEncode(t.noRows))},_ths:function(){var e,t,n,i,r,o,a=this.columns,s=[];for(r=0,o=a.length;o>r;r++)e=a[r],n=[],i=[O.header],t=e.headerTemplate?e.headerTemplate({}):e.title||e.field||"",n.push(e.sortable?c("a",{href:"#",className:O.link},[d(t)]):e.headerTemplate?u(t):d(t)),s.push(c("th",{"data-field":e.field,"data-title":e.title,className:i.join(" "),role:"columnheader"},n));return s},_colgroup:function(){var e,t,n,i=this.columns,r=[];for(t=0,n=i.length;n>t;t++)r.push("<col "),e=i[t].width,e&&0!==parseInt(e,10)&&(r.push("style='width:"),r.push("string"==typeof e?e:e+"px"),r.push("'")),r.push("/>");return"<colgroup>"+r.join("")+"</colgroup>"},_trs:function(e){var n,i,r,o,a,s,l,c,d=[],u=e.level,h=e.data,p=this.dataSource,f=p.aggregates()||{};for(s=0,l=h.length;l>s;s++)r=[],n=h[s],a=n.loaded()&&p.childNodes(n),o=a&&a.length,i={"data-uid":n.uid,role:"row"},o&&(i["aria-expanded"]=!!n.expanded),this._absoluteIndex%2!==0&&r.push(O.alt),e.visible?this._absoluteIndex++:i.style={display:"none"},o&&r.push(O.group),n._edit&&r.push("k-grid-edit-row"),i.className=r.join(" ")||t,d.push(this._tds({model:n,attr:i,level:u},_(this._td,this))),o&&(d=d.concat(this._trs({parentId:n.id,aggregates:f,visible:e.visible&&!!n.expanded,data:a,level:u+1})));return this._hasFooterTemplate()&&(c=e.parentId||null,i={className:O.footerTemplate,"data-parentId":c},e.visible||(i.style={display:"none"}),d.push(this._tds({model:f[c],attr:i,level:u},this._footerTd))),d},_footerTd:function(t){var i=[],r=t.column,o=t.column.footerTemplate||e.noop,a=t.model[r.field]||{},l={role:"gridcell"};return r.expandable&&(i=i.concat(n({level:t.level+1,className:O.iconPlaceHolder}))),r.attributes&&s(l,r.attributes),i.push(d(o(a)||"")),c("td",l,i)},_hasFooterTemplate:function(){return!!w(this.columns,function(e){return e.footerTemplate}).length},_tds:function(e,t){var n,i,r,o=[],a=this.columns;for(i=0,r=a.length;r>i;i++)n=a[i],o.push(t({model:e.model,column:n,level:e.level}));return c("tr",e.attr,o)},_td:function(e){var t,i=[],r=e.model,o=e.column,a={role:"gridcell"};return r._edit&&o.field&&r.editable(o.field)?a[kendo.attr("container-for")]=o.field:(o.expandable&&(i=n({level:e.level,className:O.iconPlaceHolder}),t=[O.icon],t.push(r.hasChildren?r.expanded?O.iconCollapse:O.iconExpand:O.iconHidden),r._error?t.push(O.refresh):!r.loaded()&&r.expanded&&t.push(O.loading),i.push(c("span",{className:t.join(" ")}))),o.attributes&&s(a,o.attributes),o.command?i=this._buildCommands(r._edit?["update","canceledit"]:o.command):i.push(this._cellContent(o,r))),c("td",a,i)},_cellContent:function(e,n){var i;return e.template?i=e.template(n):e.field&&(i=n.get(e.field),e.format&&(i=kendo.format(e.format,i))),t===i&&(i=""),e.template||!e.encoded?u(i):d(i)},_buildCommands:function(e){var t,n=[];for(t=0;e.length>t;t++)n.push(this._button(e[t]));return n},_button:function(e){var t=(e.name||e).toLowerCase(),n=this.options.messages.commands[t],i=[];return e=s({},H[t],{text:n},e),e.imageClass&&i.push(c("span",{className:["k-icon",e.imageClass].join(" ")})),c("button",{"data-command":t,className:["k-button k-button-icontext",e.className].join(" ")},i.concat([d(e.text||e.name)]))},_sortable:function(){var e,t,n,i,r,o=this.columns,a=this.header.find("th"),l=kendo.attr("field"),c=this.options.sortable;if(c)for(i=0,r=a.length;r>i;i++)e=o[i],e.sortable!==!1&&!e.command&&e.field&&(n=a.eq(i),t=n.data("kendoColumnSorter"),t&&t.destroy(),n.attr(l,e.field).kendoColumnSorter(s({},c,e.sortable,{dataSource:this.dataSource})))},_filterable:function(){var e,t,n,i,r=this.header.find("th"),o=this.options.filterable;if(o)for(i=_(function(e){this.trigger(L,{field:e.field,container:e.container})},this),e=0,t=r.length;t>e;e++)n=this.columns[e],n.command||n.filterable===!1||r.eq(e).kendoFilterMenu(s(!0,{},o,n.filterable,{dataSource:this.dataSource,init:i}))},_change:function(){this.trigger(k)},_selectable:function(){var e,t=this.options.selectable;t&&(t=kendo.ui.Selectable.parseOptions(t),e=">tr:not(.k-footer-template)",t.cell&&(e+=">td"),this.selectable=new kendo.ui.Selectable(this.content,{filter:e,aria:!0,multiple:t.multiple,change:_(this._change,this)}))},select:function(e){var n=this.selectable;return t===e||n.options.multiple||(n.clear(),e=e.first()),n.value(e)},clearSelection:function(){var e=this.select();e.length&&(this.selectable.clear(),this.trigger(k))},_dataSource:function(e){var t=this.dataSource;t&&(t.unbind(k,this._refreshHandler),t.unbind(x,this._errorHandler),t.unbind(C,this._progressHandler)),this._refreshHandler=_(this.refresh,this),this._errorHandler=_(this._error,this),this._progressHandler=_(this._progress,this),t=this.dataSource=V.create(e),t.bind(k,this._refreshHandler),t.bind(x,this._errorHandler),t.bind(C,this._progressHandler)},setDataSource:function(e){this._dataSource(e),this.options.autoBind&&this.dataSource.fetch()},dataItem:function(t){var n=e(t).closest("tr"),i=this.dataSource.getByUid(n.attr(kendo.attr("uid")));return i},editRow:function(e){var t;typeof e===b&&(e=this.content.find(e)),t=this.dataItem(e),t&&("popup"!=this._editMode()&&(t._edit=!0),this._cancelEditor(),this._render(),this._createEditor(t),this.trigger(E,{container:this.editor.element,model:t}))},_cancelEdit:function(e){e=s(e,{container:this.editor.wrapper,model:this.editor.model}),this.trigger(B,e)||this.cancelRow()},cancelRow:function(){this._cancelEditor(),this._render()},saveRow:function(){var e,t=this.editor;t&&(e={model:t.model,container:t.element},t.end()&&!this.trigger(M,e)&&this.dataSource.sync())},addRow:function(e){var n=this.editor,i=0,r={};if(!n||n.end())return e?(e instanceof N||(e=this.dataItem(e)),r.parentId=e.id,i=this.dataSource.indexOf(e)+1,e.set("expanded",!0),this.dataSource.load(e).then(_(this._insertAt,this,r,i)),t):(this._insertAt(r,i),t)},_insertAt:function(e,t){e=this.dataSource.insert(t,e);var n=this.content.find("["+kendo.attr("uid")+"="+e.uid+"]");this.editRow(n)},removeRow:function(e){var t=this.dataItem(e),n={model:t,row:e};t&&!this.trigger(z,n)&&(this.dataSource.remove(t),this.dataSource.sync())},_cancelEditor:function(){var e,t=this.editor;t&&(e=t.model,this._destroyEditor(),this.dataSource.cancelChanges(e),e._edit=!1)},_destroyEditor:function(){this.editor&&(this.editor.close(),this.editor=null)},_createEditor:function(e){var t=this.content.find("["+kendo.attr("uid")+"="+e.uid+"]"),n=this._editMode(),o={columns:this.columns,model:e,target:this,clearContainer:!1,template:this.options.editable.template};"inline"==n?this.editor=new i(t,o):(s(o,{window:this.options.editable.window,commandRenderer:_(function(){return this._buildCommands(["update","canceledit"])},this),fieldRenderer:this._cellContent,save:_(this.saveRow,this),cancel:_(this._cancelEdit,this),appendTo:this.wrapper}),this.editor=new r(t,o))},_editMode:function(){var e="inline",t=this.options.editable;return t!==!0&&(e="string"==typeof t?t:t.mode||e),e.toLowerCase()}}),kendo.ExcelMixin&&kendo.ExcelMixin.extend(o.prototype),kendo.PDFMixin&&kendo.PDFMixin.extend(o.prototype),s(!0,kendo.data,{TreeListDataSource:V,TreeListModel:N}),s(!0,kendo.ui,{TreeList:o}),h.plugin(o)}(window.kendo.jQuery),function(e){function t(e){for(var t,n=0,i=e.length;i>n;n++)if(2==e[n].type){t=!0;break}t&&e.splice(n+1,0,{caption:"KPIs",defaultHierarchy:"[KPIs]",name:"KPIs",uniqueName:"[KPIs]"})}function n(e){return{name:e.uniqueName,type:e.type}}function i(e){for(var t=0,n=e.length;n>t;t++)e[t].uniqueName=e[t].name,e[t].type="kpi";return e}function r(t){var n=e(t).closest(".k-pivot-setting");return n.length?n.data("kendoPivotSettingTarget"):null}function o(e,t,n){return{hierarchyUniqueName:e,uniqueName:t,caption:t,measure:t,name:t,type:n}}function a(e){var t=e.name;return[o(t,e.value,"value"),o(t,e.goal,"goal"),o(t,e.status,"status"),o(t,e.trend,"trend")]}var s=window.kendo,l=s.ui,c=l.Widget,d=".kendoPivotConfigurator",u="mouseenter"+d+" mouseleave"+d,h=s.template('<p class="k-reset"><span class="k-icon #=icon#"></span>${name}</p><div class="k-list-container k-reset"/>'),p=c.extend({init:function(e,t){c.fn.init.call(this,e,t),this.element.addClass("k-widget k-fieldselector k-alt k-edit-form-container"),this._dataSource(),this._layout(),this.refresh(),s.notify(this)},events:[],options:{name:"PivotConfigurator",filterable:!1,sortable:!1,messages:{measures:"Drop Data Fields Here",columns:"Drop Column Fields Here",rows:"Drop Rows Fields Here",measuresLabel:"Measures",columnsLabel:"Columns",rowsLabel:"Rows",fieldsLabel:"Fields"}},_dataSource:function(){this.dataSource&&this._refreshHandler?this.dataSource.unbind("change",this._refreshHandler):this._refreshHandler=e.proxy(this.refresh,this),this.dataSource=s.data.PivotDataSource.create(this.options.dataSource),this.dataSource.bind("change",this._refreshHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.measures&&this.measures.setDataSource(e),this.rows&&this.rows.setDataSource(e),this.columns&&this.columns.setDataSource(e),this.refresh()},_treeViewDataSource:function(){var n=this;return s.data.HierarchicalDataSource.create({schema:{model:{id:"uniqueName",hasChildren:function(e){return!("hierarchyUniqueName"in e||"aggregator"in e)}}},transport:{read:function(r){var o,s,l;e.isEmptyObject(r.data)?(o=n.dataSource.schemaDimensions(),o.done(function(e){n.dataSource.cubeBuilder||t(e),r.success(e)}).fail(r.error)):(s=n.treeView.dataSource.get(r.data.uniqueName),"[KPIs]"===s.uniqueName?(l=!0,o=n.dataSource.schemaKPIs(),o.done(function(e){r.success(i(e))}).fail(r.error)):"kpi"==s.type&&(l=!0,r.success(a(s))),l||(o=2==s.type?n.dataSource.schemaMeasures():s.dimensionUniqueName?n.dataSource.schemaLevels(r.data.uniqueName):n.dataSource.schemaHierarchies(r.data.uniqueName),o.done(r.success).fail(r.error)))}}})},_layout:function(){this.form=e('<div class="k-columns k-state-default k-floatwrap"/>').appendTo(this.element),this._fields(),this._targets()},_fields:function(){var t=e('<div class="k-state-default"><p class="k-reset"><span class="k-icon k-i-group"></span>'+this.options.messages.fieldsLabel+"</p></div>").appendTo(this.form),i='# if (item.type == 2 || item.uniqueName == "[KPIs]") { #<span class="k-icon k-i-#= (item.type == 2 ? "sum" : "kpi") #"></span># } else if (item.type && item.type !== "kpi") { #<span class="k-icon k-i-dimension"></span># } ##: item.name #';this.treeView=e("<div/>").appendTo(t).kendoTreeView({template:i,dataTextField:"name",dragAndDrop:!0,autoBind:!1,dataSource:this._treeViewDataSource(),dragstart:function(e){var t=this.dataItem(e.sourceNode);(t.hasChildren||t.aggregator||t.measure)&&2!=t.type&&"[KPIs]"!==t.uniqueName||e.preventDefault()},drag:function(e){var t="k-denied",n=r(e.dropTarget);n&&n.validate(this.dataItem(e.sourceNode))&&(t="k-add"),e.setStatusClass(t)},drop:function(e){var t,i,o,s,l,c;if(e.preventDefault(),t=r(e.dropTarget),i=this.dataItem(e.sourceNode),t&&t.validate(i)){if(c=i.defaultHierarchy||i.uniqueName,"kpi"===i.type)for(l=a(i),s=l.length,c=[],o=0;s>o;o++)c.push(n(l[o]));else i.type&&(c=[n(i)]);t.add(c)}}}).data("kendoTreeView")},_createTarget:function(t,n){var i='<li class="k-item k-header" data-'+s.ns+'name="${data.name}">${data.name}',r=n.sortable,o="";return r&&(o+="#if (data.sortIcon) {#",o+='<span class="k-icon ${data.sortIcon} k-setting-sort"></span>',o+="#}#"),(n.filterable||r)&&(o+='<span class="k-icon k-i-arrowhead-s k-setting-fieldmenu"></span>'),o+='<span class="k-icon k-si-close k-setting-delete"></span>',i+='<span class="k-field-actions">'+o+"</span></li>",new s.ui.PivotSettingTarget(t,e.extend({dataSource:this.dataSource,hint:function(t){var n=e('<div class="k-fieldselector"><ul class="k-list k-reset"></ul></div>');return n.find(".k-list").append(t.clone()),n},template:i,emptyTemplate:'<li class="k-item k-empty">${data}</li>'},n))},_targets:function(){var t=e('<div class="k-state-default"/>').appendTo(this.form),n=e(h({name:this.options.messages.columnsLabel,icon:"k-i-vbars"})).appendTo(t),i=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(n.last()),r=e(h({name:this.options.messages.rowsLabel,icon:"k-i-hbars"})).appendTo(t),o=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(r.last()),a=e(h({name:this.options.messages.measuresLabel,icon:"k-i-sum"})).appendTo(t),s=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(a.last()),l=this.options;this.columns=this._createTarget(i,{filterable:l.filterable,sortable:l.sortable,connectWith:o,messages:{empty:l.messages.columns,fieldMenu:l.messages.fieldMenu}}),this.rows=this._createTarget(o,{filterable:l.filterable,setting:"rows",connectWith:i,messages:{empty:this.options.messages.rows,fieldMenu:this.options.messages.fieldMenu}}),this.measures=this._createTarget(s,{setting:"measures",messages:{empty:l.messages.measures}}),i.add(o).add(s).on(u,".k-item:not(.k-empty)",this._toggleHover)},_toggleHover:function(t){e(t.currentTarget).toggleClass("k-state-hover","mouseenter"===t.type)},_resize:function(){var e,t,n=this.element,i=this.options.height;i&&n.is(":visible")&&(n.height(i),t=n.children(".k-columns").children("div.k-state-default"),e=(n.outerHeight()-n.innerHeight())/2,i=i-(t.outerHeight(!0)-t.height())-e,t.height(i))},refresh:function(){var e=this.dataSource;(e.cubeBuilder||this._cube!==e.cube()||this._catalog!==e.catalog())&&this.treeView.dataSource.fetch(),this._catalog=this.dataSource.catalog(),this._cube=this.dataSource.cube(),this._resize()},destroy:function(){c.fn.destroy.call(this),this.dataSource.unbind("change",this._refreshHandler),this.form.find(".k-list").off(d),this.rows.destroy(),this.columns.destroy(),this.measures.destroy(),this.treeView.destroy(),this.element=null,this._refreshHandler=null}});l.plugin(p)}(window.kendo.jQuery),function(e,t,n){"use strict";function i(e){var t=k;try{return k=function(e){return e()},e()}finally{k=t}}function r(e,i,r,o){i[r]=t.copy(e.$eval(o)),i[r]===n&&o.match(/^\w*$/)&&C.warn(r+" attribute resolved to undefined. Maybe you meant to use a string literal like: '"+o+"'?")}function o(i,o,s,l,c){function d(){var n,d,h,f,g,m,v,_,y;return s.kRebind&&(n=e(e(o)[0].cloneNode(!0))),d=l.replace(/^kendo/,""),h=t.extend({},s.defaultOptions,i.$eval(s.kOptions||s.options)),(f=e(o)[l])?(g=f.widget.prototype.options,m=f.widget.prototype.events,e.each(s,function(e,t){var n,o,a,s;"source"!==e&&"kDataSource"!==e&&(n="data"+e.charAt(0).toUpperCase()+e.slice(1),0===e.indexOf("on")&&(o=e.replace(/^on./,function(e){return e.charAt(2).toLowerCase()}),m.indexOf(o)>-1&&(h[o]=t)),g.hasOwnProperty(n)?r(i,h,n,t):g.hasOwnProperty(e)&&!A[e]?r(i,h,e,t):D[e]||(a=e.match(/^k(On)?([A-Z].*)/),a&&(s=a[2].charAt(0).toLowerCase()+a[2].slice(1),a[1]&&"kOnLabel"!=e?h[s]=t:("kOnLabel"==e&&(s="onLabel"),r(i,h,s,t)))))}),v=s.kDataSource||s.source,v&&(h.dataSource=T(i,o,d,v)),h.$angular=[i],o.is("select")&&!function(t){if(t.length>0){var n=e(t[0]);!/\S/.test(n.text())&&/^\?/.test(n.val())&&n.remove()}}(o[0].options),_=f.call(o,S=h).data(l),a(_,i,s,l,c),i.$emit("kendoWidgetCreated",_),y=u(i,_),s.kRebind&&p(_,i,o,n,s.kRebind,y),_):(window.console.error("Could not find: "+l),null)}var h,f=s.kNgDelay,g=i.$eval(f);return f&&!g?(h=i.$watch(f,function(e,t){e!==t&&(h(),o.removeAttr(s.$attr.kNgDelay),f=null,k(d))}),n):d()}function a(e,t,n,i,r){if(n[r]){var o=b(n[r]).assign;if(!o)throw Error(r+" attribute used but expression in it is not assignable: "+n[i]);o(t,e)}}function s(e){return/checkbox|radio/i.test(e.attr("type"))?e.prop("checked"):e.val()}function l(e){return E.test(e[0].tagName)}function c(e,t,i,r,o){var a,c,d,u;e.value&&(a=l(i)?function(){return s(i)}:function(){return e.value()},r.$render=function(){var t=r.$viewValue;t===n&&(t=r.$modelValue),setTimeout(function(){e&&e.value(t)},0)},c=!1,l(i)&&i.on("change",function(){c=!0}),d=function(e){return function(){var n;c||(c=!1,e&&o&&(n=o.$pristine),r.$setViewValue(a()),e&&(r.$setPristine(),n&&o.$setPristine()),m(t))}},e.first("change",d(!1)),e.first("dataBound",d(!0)),u=a(),u!=r.$viewValue&&(r.$isEmpty(r.$viewValue)?null!=u&&""!==u&&u!=r.$viewValue&&r.$setViewValue(u):e.value(r.$viewValue)),r.$setPristine())}function d(e,t,i){var r,o,a;return"function"!=typeof e.value?(C.warn("k-ng-model specified on a widget that does not have the value() method: "+e.options.name),n):(r=b(i),o=r.assign,a=!1,e.$angular_setLogicValue(r(t)),t.$watch(i,function(t,i){t===n&&(t=null),a||t!==i&&e.$angular_setLogicValue(t)}),e.first("change",function(){a=!0,t.$apply(function(){o(t,e.$angular_getLogicValue())}),a=!1}),n)}function u(e,t){var n=e.$on("$destroy",function(){n(),t&&(t.element&&(t=g(t.element),t&&t.destroy()),t=null)});return n}function h(t,n){function i(){a.disconnect()}function r(){a.observe(e(n)[0],{attributes:!0})}var o,a;window.MutationObserver&&t.wrapper&&(o=[].slice.call(e(n)[0].classList),a=new MutationObserver(function(n){i(),t&&(n.forEach(function(n){var i,r=e(t.wrapper)[0];switch(n.attributeName){case"class":i=[].slice.call(n.target.classList),i.forEach(function(e){o.indexOf(e)<0&&(r.classList.add(e),kendo.ui.ComboBox&&t instanceof kendo.ui.ComboBox&&t.input[0].classList.add(e))}),o.forEach(function(e){i.indexOf(e)<0&&(r.classList.remove(e),kendo.ui.ComboBox&&t instanceof kendo.ui.ComboBox&&t.input[0].classList.remove(e))}),o=i;break;case"disabled":"function"==typeof t.enable&&t.enable(!e(n.target).attr("disabled"));break;case"readonly":"function"==typeof t.readonly&&t.readonly(!!e(n.target).attr("readonly"))}}),r())}),r(),t.first("destroy",i))}function p(t,n,i,r,o,a){var s=n.$watch(o,function(o,l){var c,d,u;o!==l&&(s(),c=e(t.wrapper)[0],d=e(t.element)[0],u=i.injector().get("$compile"),t.destroy(),a&&a(),t=null,c&&d&&(c.parentNode.replaceChild(d,c),e(i).replaceWith(r)),u(r)(n))},!0);m(n)}function f(e,n){function i(e,t){y.directive(e,["directiveFactory",function(n){return n.create(t,e)}])}var r,o,a,s,l=n?"Mobile":"";l+=e.fn.options.name,r=l,o="kendo"+l.charAt(0)+l.substr(1).toLowerCase(),l="kendo"+l,a=l.replace(/([A-Z])/g,"-$1"),-1==P.indexOf(l.replace("kendo",""))&&(s=l===o?[l]:[l,o],t.forEach(s,function(e){y.directive(e,function(){return{restrict:"E",replace:!0,template:function(e){var t=M[r]||"div";return"<"+t+" "+a+">"+e.html()+"</"+t+">"}}})})),I.indexOf(l.replace("kendo",""))>-1||(i(l,l),o!=l&&i(o,l))}function g(t){return t=e(t),kendo.widgetInstance(t,kendo.ui)||kendo.widgetInstance(t,kendo.mobile.ui)||kendo.widgetInstance(t,kendo.dataviz.ui)}function m(e,t){var n=e.$root||e,i=/^\$(digest|apply)$/.test(n.$$phase);t?i?t():n.$apply(t):i||n.$digest()}function v(t,n){t.$destroy(),n&&e(n).removeData("$scope").removeData("$isolateScope").removeData("$isolateScopeNoTemplate").removeClass("ng-scope")}function _(n,i,r){var o,a,s;if(e.isArray(n))return t.forEach(n,function(e){_(e,i,r)});if("string"==typeof n){for(o=n.split("."),a=kendo;a&&o.length>0;)a=a[o.shift()];if(!a)return z.push([n,i,r]),!1;n=a.prototype}return s=n[i],n[i]=function(){var e=this,t=arguments;return r.apply({self:e,next:function(){return s.apply(e,arguments.length>0?arguments:t)}},t)},!0}var y,w,b,k,x,C,S,T,D,A,E,M,P,I,z,F;t&&(y=t.module("kendo.directives",[]),w=t.injector(["ng"]),b=w.get("$parse"),k=w.get("$timeout"),C=w.get("$log"),T=function(){var e={TreeList:"TreeListDataSource",TreeView:"HierarchicalDataSource",Scheduler:"SchedulerDataSource",PanelBar:"$PLAIN",Menu:"$PLAIN",ContextMenu:"$PLAIN"},t=function(e,t){return"$PLAIN"==t?e:kendo.data[t].create(e)};return function(n,i,r,o){var a=e[r]||"DataSource",s=t(n.$eval(o),a);return n.$watch(o,function(e,n){var r,o;e!==n&&(r=t(e,a),o=g(i),o&&"function"==typeof o.setDataSource&&o.setDataSource(r))}),s}}(),D={kDataSource:!0,kOptions:!0,kRebind:!0,kNgModel:!0,kNgDelay:!0},A={name:!0,title:!0,style:!0},E=/^(input|select|textarea)$/i,y.factory("directiveFactory",["$compile",function(t){var n,i=0,r=!1;return x=t,n=function(t,n){return{restrict:"AC",require:["?ngModel","^?form"],scope:!1,controller:["$scope","$attrs","$element",function(e,t){this.template=function(e,n){t[e]=kendo.stringify(n)}}],link:function(a,s,l,u){var p=u[0],f=u[1],g=e(s),m=t.replace(/([A-Z])/g,"-$1"),v="hidden"!==g.css("visibility");g.attr(m,g.attr("data-"+m)),g[0].removeAttribute("data-"+m),v&&g.css("visibility","hidden"),++i,k(function(){v&&g.css("visibility","");var u=o(a,s,l,t,n);u&&(p&&c(u,a,s,p,f),l.kNgModel&&d(u,a,l.kNgModel),h(u,s),--i,0===i&&(r||(r=!0,a.$emit("kendoRendered"),e("form").each(function(){var t=e(this).controller("form");t&&t.$setPristine()}))))})}}},{create:n}}]),M={Editor:"textarea",NumericTextBox:"input",DatePicker:"input",DateTimePicker:"input",TimePicker:"input",AutoComplete:"input",ColorPicker:"input",MaskedTextBox:"input",MultiSelect:"input",Upload:"input",Validator:"form",Button:"button",MobileButton:"a",MobileBackButton:"a",MobileDetailButton:"a",ListView:"ul",MobileListView:"ul",TreeView:"ul",Menu:"ul",ContextMenu:"ul",ActionSheet:"ul"},P=["MobileView","MobileLayout","MobileSplitView","MobilePane","MobileModalView"],I=["MobileApplication","MobileView","MobileModalView","MobileLayout","MobileActionSheet","MobileDrawer","MobileSplitView","MobilePane","MobileScrollView","MobilePopOver"],t.forEach(["MobileNavBar","MobileButton","MobileBackButton","MobileDetailButton","MobileTabStrip","MobileScrollView"],function(e){I.push(e),e="kendo"+e,y.directive(e,function(){return{restrict:"A",link:function(t,n,i){o(t,n,i,e,e)}}})}),function(){function e(e){return function(n){t.forEach(n,function(t){t.fn&&t.fn.options&&t.fn.options.name&&/^[A-Z]/.test(t.fn.options.name)&&f(t,e)})}}t.forEach([kendo.ui,kendo.dataviz&&kendo.dataviz.ui],e(!1)),t.forEach([kendo.mobile&&kendo.mobile.ui],e(!0))}(),z=[],_(kendo.ui,"plugin",function(t,n,i){this.next(),z=e.grep(z,function(e){return!_.apply(null,e)}),f(t,"Mobile"==i)}),_(["ui.Widget","mobile.ui.Widget"],"angular",function(r,o){var a,s=this.self;return"init"==r?(!o&&S&&(o=S),S=null,o&&o.$angular&&(s.$angular_scope=o.$angular[0],s.$angular_init(s.element,o)),n):(a=s.$angular_scope,a&&i(function(){var i,l,c=o(),d=c.elements,u=c.data;if(d.length>0)switch(r){case"cleanup":t.forEach(d,function(e){var n=t.element(e).scope();n&&n!==a&&n.$$kendoScope&&v(n,e)});break;case"compile":i=s.element.injector(),l=i?i.get("$compile"):x,t.forEach(d,function(i,r){var o,s;c.scopeFrom?o=t.element(c.scopeFrom).scope():(s=u&&u[r],s!==n&&(o=e.extend(a.$new(),s),o.$$kendoScope=!0)),l(i)(o||a)}),m(a)}}),n)}),_("ui.Widget","$angular_getLogicValue",function(){return this.self.value()}),_("ui.Widget","$angular_setLogicValue",function(e){this.self.value(e)}),_("ui.Select","$angular_getLogicValue",function(){var e=this.self.dataItem();return e?this.self.options.valuePrimitive?e[this.self.options.dataValueField]:e.toJSON():null}),_("ui.Select","$angular_setLogicValue",function(e){var t=this.self,n=t.options,i=n.dataValueField;i&&!n.valuePrimitive&&(e=null!=e?e[n.dataValueField||n.dataTextField]:null),t.value(e)}),_("ui.MultiSelect","$angular_getLogicValue",function(){var t=this.self.dataItems(),n=this.self.options.dataValueField;return n&&this.self.options.valuePrimitive&&(t=e.map(t,function(e){return e[n]})),t}),_("ui.MultiSelect","$angular_setLogicValue",function(t){null==t&&(t=[]);var n=this.self,i=n.options.dataValueField;i&&!n.options.valuePrimitive&&(t=e.map(t,function(e){return e[i]
})),n.value(t)}),_("ui.AutoComplete","$angular_getLogicValue",function(){var e,t,n,i,r,o=this.self.options,a=this.self.value().split(o.separator),s=o.valuePrimitive,l=this.self.dataSource.data(),c=[];for(e=0,t=l.length;t>e;e++)for(n=l[e],i=o.dataTextField?n[o.dataTextField]:n,r=0;a.length>r;r++)if(i===a[r]){c.push(s?i:n.toJSON());break}return c}),_("ui.AutoComplete","$angular_setLogicValue",function(t){null==t&&(t=[]);var n=this.self,i=n.options.dataTextField;i&&!n.options.valuePrimitive&&(t=e.map(t,function(e){return e[i]})),n.value(t)}),_("ui.Widget","$angular_init",function(t,n){var i,r,o,a,s=this.self;if(n&&!e.isArray(n))for(i=s.$angular_scope,r=s.events.length;--r>=0;)o=s.events[r],a=n[o],a&&"string"==typeof a&&(n[o]=s.$angular_makeEventHandler(o,i,a))}),_("ui.Widget","$angular_makeEventHandler",function(e,t,n){return n=b(n),function(e){m(t,function(){n(t,{kendoEvent:e})})}}),_(["ui.Grid","ui.ListView","ui.TreeView"],"$angular_makeEventHandler",function(e,n,i){return"change"!=e?this.next():(i=b(i),function(e){var r,o,a,s,l,c,d,u,h,p=e.sender,f=p.options,g={kendoEvent:e};for(t.isString(f.selectable)&&(r=-1!==f.selectable.indexOf("cell"),o=-1!==f.selectable.indexOf("multiple")),a=g.selected=this.select(),s=g.data=[],l=g.columns=[],d=0;a.length>d;d++)u=r?a[d].parentNode:a[d],h=p.dataItem(u),r?(t.element.inArray(h,s)<0&&s.push(h),c=t.element(a[d]).index(),t.element.inArray(c,l)<0&&l.push(c)):s.push(h);o||(g.dataItem=g.data=s[0],g.selected=a[0]),m(n,function(){i(n,g)})})}),_("ui.Grid","$angular_init",function(i,r){if(this.next(),r.columns){var o=e.extend({},kendo.Template,r.templateSettings);t.forEach(r.columns,function(e){!e.field||e.template||e.format||e.values||e.encoded!==n&&!e.encoded||(e.template="<span ng-bind='"+kendo.expr(e.field,"dataItem")+"'>#: "+kendo.expr(e.field,o.paramName)+"#</span>")})}}),_("mobile.ui.ButtonGroup","value",function(e){var t=this.self;return null!=e&&(t.select(t.element.children("li.km-button").eq(e)),t.trigger("change"),t.trigger("select",{index:t.selectedIndex})),t.selectedIndex}),_("mobile.ui.ButtonGroup","_select",function(){this.next(),this.self.trigger("change")}),y.directive("kendoMobileApplication",function(){return{terminal:!0,link:function(e,t,n){o(e,t,n,"kendoMobileApplication","kendoMobileApplication")}}}).directive("kendoMobileView",function(){return{scope:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,n._instance=o(e,t,n,"kendoMobileView","kendoMobileView")},post:function(e,t,n){n._instance._layout(),n._instance._scroller()}}}}).directive("kendoMobileDrawer",function(){return{scope:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,n._instance=o(e,t,n,"kendoMobileDrawer","kendoMobileDrawer")},post:function(e,t,n){n._instance._layout(),n._instance._scroller()}}}}).directive("kendoMobileModalView",function(){return{scope:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,n._instance=o(e,t,n,"kendoMobileModalView","kendoMobileModalView")},post:function(e,t,n){n._instance._layout(),n._instance._scroller()}}}}).directive("kendoMobileSplitView",function(){return{terminal:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,n._instance=o(e,t,n,"kendoMobileSplitView","kendoMobileSplitView")},post:function(e,t,n){n._instance._layout()}}}}).directive("kendoMobilePane",function(){return{terminal:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,o(e,t,n,"kendoMobilePane","kendoMobilePane")}}}}).directive("kendoMobileLayout",function(){return{link:{pre:function(e,t,n){o(e,t,n,"kendoMobileLayout","kendoMobileLayout")}}}}).directive("kendoMobileActionSheet",function(){return{restrict:"A",link:function(t,n,i){n.find("a[k-action]").each(function(){e(this).attr("data-"+kendo.ns+"action",e(this).attr("k-action"))}),o(t,n,i,"kendoMobileActionSheet","kendoMobileActionSheet")}}}).directive("kendoMobilePopOver",function(){return{terminal:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,o(e,t,n,"kendoMobilePopOver","kendoMobilePopOver")}}}}).directive("kendoViewTitle",function(){return{restrict:"E",replace:!0,template:function(e){return"<span data-"+kendo.ns+"role='view-title'>"+e.html()+"</span>"}}}).directive("kendoMobileHeader",function(){return{restrict:"E",link:function(e,t){t.addClass("km-header").attr("data-role","header")}}}).directive("kendoMobileFooter",function(){return{restrict:"E",link:function(e,t){t.addClass("km-footer").attr("data-role","footer")}}}).directive("kendoMobileScrollViewPage",function(){return{restrict:"E",replace:!0,template:function(e){return"<div data-"+kendo.ns+"role='page'>"+e.html()+"</div>"}}}),t.forEach(["align","icon","rel","transition","actionsheetContext"],function(e){var t="k"+e.slice(0,1).toUpperCase()+e.slice(1);y.directive(t,function(){return{restrict:"A",priority:2,link:function(n,i,r){i.attr(kendo.attr(kendo.toHyphens(e)),n.$eval(r[t]))}}})}),F={TreeMap:["Template"],MobileListView:["HeaderTemplate","Template"],MobileScrollView:["EmptyTemplate","Template"],Grid:["AltRowTemplate","DetailTemplate","RowTemplate"],ListView:["EditTemplate","Template","AltTemplate"],Pager:["SelectTemplate","LinkTemplate"],PivotGrid:["ColumnHeaderTemplate","DataCellTemplate","RowHeaderTemplate"],Scheduler:["AllDayEventTemplate","DateHeaderTemplate","EventTemplate","MajorTimeHeaderTemplate","MinorTimeHeaderTemplate"],TreeView:["Template"],Validator:["ErrorTemplate"]},function(){var e={};t.forEach(F,function(n,i){t.forEach(n,function(t){e[t]||(e[t]=[]),e[t].push("?^^kendo"+i)})}),t.forEach(e,function(e,t){var n="k"+t,i=kendo.toHyphens(n);y.directive(n,function(){return{restrict:"A",require:e,terminal:!0,compile:function(t,r){if(""===r[n]){t.removeAttr(i);var o=t[0].outerHTML;return function(r,a,s,l){for(var c;!c&&l.length;)c=l.shift();c?(c.template(n,o),t.remove()):C.warn(i+" without a matching parent widget found. It can be one of the following: "+e.join(", "))}}}}})})}())}(window.kendo.jQuery,window.angular);return window.kendo},typeof define=="function"&&define.amd?define:function(_,f){f()});
},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\layout.js":[function(require,module,exports){

},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\main.js":[function(require,module,exports){
(function (process){
﻿process.env.BROWSERIFYSHIM_DIAGNOSTICS = 1
// Start loading the main app file. Put all of
// your application logic in there.
var $ = jQuery = require('./kendo/2014.3.1119/jquery.min.js');
var m = require('./mithril.js');
//require('./bootstrap.min.js');
require("./ripples.min.js");
require("./material.min.js");
require('./kendo/2014.3.1119/kendo.web.min.js');
require('./jquery.hotkeys.js');
require('./velocity.js');
require('./core.js');
require('./layout.js');
require('./controls.js');
//        <!-- Top level Mithril References -->
require('./app/modules/clearscreen.module.js');
require('./app/app.route.js');

$(document).ready(function () {
    $.material.init();
});
}).call(this,require('_process'))
},{"./app/app.route.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.route.js","./app/modules/clearscreen.module.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\modules\\clearscreen.module.js","./controls.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\controls.js","./core.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\core.js","./jquery.hotkeys.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\jquery.hotkeys.js","./kendo/2014.3.1119/jquery.min.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\kendo\\2014.3.1119\\jquery.min.js","./kendo/2014.3.1119/kendo.web.min.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\kendo\\2014.3.1119\\kendo.web.min.js","./layout.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\layout.js","./material.min.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\material.min.js","./mithril.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js","./ripples.min.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\ripples.min.js","./velocity.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\velocity.js","_process":"C:\\Users\\htn01\\AppData\\Roaming\\npm\\node_modules\\watchify\\node_modules\\browserify\\node_modules\\process\\browser.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\material.min.js":[function(require,module,exports){
(function(n){function t(n){return typeof n.which=="undefined"?!0:typeof n.which=="number"&&n.which>0?!n.ctrlKey&&!n.metaKey&&!n.altKey&&n.which!=8:!1}n.expr[":"].notmdproc=function(t){return n(t).data("mdproc")?!1:!0};n.material={options:{withRipples:".tile,.btn:not(.btn-link),.card-image,.navbar a:not(.withoutripple),.dropdown-menu a,.nav-tabs a:not(.withoutripple),.withripple",inputElements:"input.form-control, textarea.form-control, select.form-control",checkboxElements:".checkbox > label > input[type=checkbox]",radioElements:".radio > label > input[type=radio]"},checkbox:function(t){n(t?t:this.options.checkboxElements).filter(":notmdproc").data("mdproc",!0).after("<span class=ripple><\/span><span class=check><\/span>")},radio:function(t){n(t?t:this.options.radioElements).filter(":notmdproc").data("mdproc",!0).after("<span class=circle><\/span><span class=check><\/span>")},input:function(i){n(i?i:this.options.inputElements).filter(":notmdproc").data("mdproc",!0).each(function(){var t=n(this),i,r;t.wrap("<div class=form-control-wrapper><\/div>");t.after("<span class=material-input><\/span>");t.hasClass("floating-label")&&(i=t.attr("placeholder"),t.attr("placeholder",null).removeClass("floating-label"),t.after("<div class=floating-label>"+i+"<\/div>"));(t.val()===null||t.val()=="undefined"||t.val()==="")&&t.addClass("empty");t.parent().next().is("[type=file]")&&(t.parent().addClass("fileinput"),r=t.parent().next().detach(),t.after(r))});n(document).on("change",".checkbox input",function(){n(this).blur()}).on("keydown paste",".form-control",function(i){t(i)&&n(this).removeClass("empty")}).on("keyup change",".form-control",function(){var t=n(this);t.val()===""?t.addClass("empty"):t.removeClass("empty")}).on("focus",".form-control-wrapper.fileinput",function(){n(this).find("input").addClass("focus")}).on("blur",".form-control-wrapper.fileinput",function(){n(this).find("input").removeClass("focus")}).on("change",".form-control-wrapper.fileinput [type=file]",function(){var t="";n.each(n(this)[0].files,function(n,i){console.log(i);t+=i.name+", "});t=t.substring(0,t.length-2);t?n(this).prev().removeClass("empty"):n(this).prev().addClass("empty");n(this).prev().val(t)})},ripples:function(n){ripples.init(n?n:this.options.withRipples)},init:function(){this.ripples();this.input();this.checkbox();this.radio();document.arrive&&document.arrive("input, textarea, select",function(){n.material.init()}),function(){var i=setInterval(function(){n("input").each(function(){n(this).val()!==n(this).attr("value")&&n(this).trigger("change")})},100),t;setTimeout(function(){clearInterval(i)},1e4);n(document).on("focus","input",function(){var i=n(this).parents("form").find("input");t=setInterval(function(){i.each(function(){n(this).val()!==n(this).attr("value")&&n(this).trigger("change")})},100)}).on("blur","input",function(){clearInterval(t)})}()}}})(jQuery);
/*
//# sourceMappingURL=material.min.js.map
*/
},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js":[function(require,module,exports){
var m = (function app(window, undefined) {
	var OBJECT = "[object Object]", ARRAY = "[object Array]", STRING = "[object String]", FUNCTION = "function";
	var type = {}.toString;
	var parser = /(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g, attrParser = /\[(.+?)(?:=("|'|)(.*?)\2)?\]/;
	var voidElements = /^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/;

	// caching commonly used variables
	var $document, $location, $requestAnimationFrame, $cancelAnimationFrame;

	// self invoking function needed because of the way mocks work
	function initialize(window){
		$document = window.document;
		$location = window.location;
		$cancelAnimationFrame = window.cancelAnimationFrame || window.clearTimeout;
		$requestAnimationFrame = window.requestAnimationFrame || window.setTimeout;
	}

	initialize(window);


	/*
	 * @typedef {String} Tag
	 * A string that looks like -> div.classname#id[param=one][param2=two]
	 * Which describes a DOM node
	 */

	/*
	 *
	 * @param {Tag} The DOM node tag
	 * @param {Object=[]} optional key-value pairs to be mapped to DOM attrs
	 * @param {...mNode=[]} Zero or more Mithril child nodes. Can be an array, or splat (optional)
	 *
	 */
	function m() {
		var args = [].slice.call(arguments);
		var hasAttrs = args[1] != null && type.call(args[1]) == OBJECT && !("tag" in args[1]) && !("subtree" in args[1]);
		var attrs = hasAttrs ? args[1] : {};
		var classAttrName = "class" in attrs ? "class" : "className";
		var cell = {tag: "div", attrs: {}};
		var match, classes = [];
		if (type.call(args[0]) != STRING) throw new Error("selector in m(selector, attrs, children) should be a string")
		while (match = parser.exec(args[0])) {
			if (match[1] == "" && match[2]) cell.tag = match[2];
			else if (match[1] == "#") cell.attrs.id = match[2];
			else if (match[1] == ".") classes.push(match[2]);
			else if (match[3][0] == "[") {
				var pair = attrParser.exec(match[3]);
				cell.attrs[pair[1]] = pair[3] || (pair[2] ? "" :true)
			}
		}
		if (classes.length > 0) cell.attrs[classAttrName] = classes.join(" ");


		var children = hasAttrs ? args[2] : args[1];
		if (type.call(children) == ARRAY) {
			cell.children = children
		}
		else {
			cell.children = hasAttrs ? args.slice(2) : args.slice(1)
		}

		for (var attrName in attrs) {
			if (attrName == classAttrName) cell.attrs[attrName] = (cell.attrs[attrName] || "") + " " + attrs[attrName];
			else cell.attrs[attrName] = attrs[attrName]
		}
		return cell
	}
	function build(parentElement, parentTag, parentCache, parentIndex, data, cached, shouldReattach, index, editable, namespace, configs) {
		//`build` is a recursive function that manages creation/diffing/removal of DOM elements based on comparison between `data` and `cached`
		//the diff algorithm can be summarized as this:
		//1 - compare `data` and `cached`
		//2 - if they are different, copy `data` to `cached` and update the DOM based on what the difference is
		//3 - recursively apply this algorithm for every array and for the children of every virtual element

		//the `cached` data structure is essentially the same as the previous redraw's `data` data structure, with a few additions:
		//- `cached` always has a property called `nodes`, which is a list of DOM elements that correspond to the data represented by the respective virtual element
		//- in order to support attaching `nodes` as a property of `cached`, `cached` is *always* a non-primitive object, i.e. if the data was a string, then cached is a String instance. If data was `null` or `undefined`, cached is `new String("")`
		//- `cached also has a `configContext` property, which is the state storage object exposed by config(element, isInitialized, context)
		//- when `cached` is an Object, it represents a virtual element; when it's an Array, it represents a list of elements; when it's a String, Number or Boolean, it represents a text node

		//`parentElement` is a DOM element used for W3C DOM API calls
		//`parentTag` is only used for handling a corner case for textarea values
		//`parentCache` is used to remove nodes in some multi-node cases
		//`parentIndex` and `index` are used to figure out the offset of nodes. They're artifacts from before arrays started being flattened and are likely refactorable
		//`data` and `cached` are, respectively, the new and old nodes being diffed
		//`shouldReattach` is a flag indicating whether a parent node was recreated (if so, and if this node is reused, then this node must reattach itself to the new parent)
		//`editable` is a flag that indicates whether an ancestor is contenteditable
		//`namespace` indicates the closest HTML namespace as it cascades down from an ancestor
		//`configs` is a list of config functions to run after the topmost `build` call finishes running

		//there's logic that relies on the assumption that null and undefined data are equivalent to empty strings
		//- this prevents lifecycle surprises from procedural helpers that mix implicit and explicit return statements (e.g. function foo() {if (cond) return m("div")}
		//- it simplifies diffing code
		if (data == null) data = "";
		if (data.subtree === "retain") return cached;
		var cachedType = type.call(cached), dataType = type.call(data);
		if (cached == null || cachedType != dataType) {
			if (cached != null) {
				if (parentCache && parentCache.nodes) {
					var offset = index - parentIndex;
					var end = offset + (dataType == ARRAY ? data : cached.nodes).length;
					clear(parentCache.nodes.slice(offset, end), parentCache.slice(offset, end))
				}
				else if (cached.nodes) clear(cached.nodes, cached)
			}
			cached = new data.constructor;
			if (cached.tag) cached = {}; //if constructor creates a virtual dom element, use a blank object as the base cached node instead of copying the virtual el (#277)
			cached.nodes = []
		}

		if (dataType == ARRAY) {
			//recursively flatten array
			for (var i = 0; i < data.length; i++) {
				if (type.call(data[i]) == ARRAY) {
					data = data.concat.apply([], data);
					i-- //check current index again and flatten until there are no more nested arrays at that index
				}
			}
			
			var nodes = [], intact = cached.length === data.length, subArrayCount = 0;

			//keys algorithm: sort elements without recreating them if keys are present
			//1) create a map of all existing keys, and mark all for deletion
			//2) add new keys to map and mark them for addition
			//3) if key exists in new list, change action from deletion to a move
			//4) for each key, handle its corresponding action as marked in previous steps
			//5) copy unkeyed items into their respective gaps
			var DELETION = 1, INSERTION = 2 , MOVE = 3;
			var existing = {}, unkeyed = [], shouldMaintainIdentities = false;
			for (var i = 0; i < cached.length; i++) {
				if (cached[i] && cached[i].attrs && cached[i].attrs.key != null) {
					shouldMaintainIdentities = true;
					existing[cached[i].attrs.key] = {action: DELETION, index: i}
				}
			}
			if (shouldMaintainIdentities) {
				for (var i = 0; i < data.length; i++) {
					if (data[i] && data[i].attrs) {
						if (data[i].attrs.key != null) {
							var key = data[i].attrs.key;
							if (!existing[key]) existing[key] = {action: INSERTION, index: i};
							else existing[key] = {
								action: MOVE,
								index: i,
								from: existing[key].index,
								element: parentElement.childNodes[existing[key].index] || $document.createElement("div")
							}
						}
						else unkeyed.push({index: i, element: parentElement.childNodes[i] || $document.createElement("div")})
					}
				}
				var actions = Object.keys(existing).map(function(key) {return existing[key]});
				var changes = actions.sort(function(a, b) {return a.action - b.action || a.index - b.index});
				var newCached = cached.slice();

				for (var i = 0, change; change = changes[i]; i++) {
					if (change.action == DELETION) {
						clear(cached[change.index].nodes, cached[change.index]);
						newCached.splice(change.index, 1)
					}
					if (change.action == INSERTION) {
						var dummy = $document.createElement("div");
						dummy.key = data[change.index].attrs.key;
						parentElement.insertBefore(dummy, parentElement.childNodes[change.index] || null);
						newCached.splice(change.index, 0, {attrs: {key: data[change.index].attrs.key}, nodes: [dummy]})
					}

					if (change.action == MOVE) {
						if (parentElement.childNodes[change.index] !== change.element && change.element !== null) {
							parentElement.insertBefore(change.element, parentElement.childNodes[change.index] || null)
						}
						newCached[change.index] = cached[change.from]
					}
				}
				for (var i = 0; i < unkeyed.length; i++) {
					var change = unkeyed[i];
					parentElement.insertBefore(change.element, parentElement.childNodes[change.index] || null);
					newCached[change.index] = cached[change.index]
				}
				cached = newCached;
				cached.nodes = [];
				for (var i = 0, child; child = parentElement.childNodes[i]; i++) cached.nodes.push(child)
			}
			//end key algorithm

			for (var i = 0, cacheCount = 0; i < data.length; i++) {
				//diff each item in the array
				var item = build(parentElement, parentTag, cached, index, data[i], cached[cacheCount], shouldReattach, index + subArrayCount || subArrayCount, editable, namespace, configs);
				if (item === undefined) continue;
				if (!item.nodes.intact) intact = false;
				if (item.$trusted) {
					//fix offset of next element if item was a trusted string w/ more than one html element
					//the first clause in the regexp matches elements
					//the second clause (after the pipe) matches text nodes
					subArrayCount += (item.match(/<[^\/]|\>\s*[^<]/g) || []).length
				}
				else subArrayCount += type.call(item) == ARRAY ? item.length : 1;
				cached[cacheCount++] = item
			}
			if (!intact) {
				//diff the array itself
				
				//update the list of DOM nodes by collecting the nodes from each item
				for (var i = 0; i < data.length; i++) {
					if (cached[i] != null) nodes.push.apply(nodes, cached[i].nodes)
				}
				//remove items from the end of the array if the new array is shorter than the old one
				//if errors ever happen here, the issue is most likely a bug in the construction of the `cached` data structure somewhere earlier in the program
				for (var i = 0, node; node = cached.nodes[i]; i++) {
					if (node.parentNode != null && nodes.indexOf(node) < 0) clear([node], [cached[i]])
				}
				if (data.length < cached.length) cached.length = data.length;
				cached.nodes = nodes
			}
		}
		else if (data != null && dataType == OBJECT) {
			if (!data.attrs) data.attrs = {};
			if (!cached.attrs) cached.attrs = {};

			var dataAttrKeys = Object.keys(data.attrs);
			var hasKeys = dataAttrKeys.length > ("key" in data.attrs ? 1 : 0)
			//if an element is different enough from the one in cache, recreate it
			if (data.tag != cached.tag || dataAttrKeys.join() != Object.keys(cached.attrs).join() || data.attrs.id != cached.attrs.id) {
				if (cached.nodes.length) clear(cached.nodes);
				if (cached.configContext && typeof cached.configContext.onunload == FUNCTION) cached.configContext.onunload()
			}
			if (type.call(data.tag) != STRING) return;

			var node, isNew = cached.nodes.length === 0;
			if (data.attrs.xmlns) namespace = data.attrs.xmlns;
			else if (data.tag === "svg") namespace = "http://www.w3.org/2000/svg";
			else if (data.tag === "math") namespace = "http://www.w3.org/1998/Math/MathML";
			if (isNew) {
				if (data.attrs.is) node = namespace === undefined ? $document.createElement(data.tag, data.attrs.is) : $document.createElementNS(namespace, data.tag, data.attrs.is);
				else node = namespace === undefined ? $document.createElement(data.tag) : $document.createElementNS(namespace, data.tag);
				cached = {
					tag: data.tag,
					//set attributes first, then create children
					attrs: dataAttrKeys.length ? setAttributes(node, data.tag, data.attrs, {}, namespace) : {},
					children: data.children != null && data.children.length > 0 ?
						build(node, data.tag, undefined, undefined, data.children, cached.children, true, 0, data.attrs.contenteditable ? node : editable, namespace, configs) :
						data.children,
					nodes: [node]
				};
				if (cached.children && !cached.children.nodes) cached.children.nodes = [];
				//edge case: setting value on <select> doesn't work before children exist, so set it again after children have been created
				if (data.tag == "select" && data.attrs.value) setAttributes(node, data.tag, {value: data.attrs.value}, {}, namespace);
				parentElement.insertBefore(node, parentElement.childNodes[index] || null)
			}
			else {
				node = cached.nodes[0];
				if (dataAttrKeys.length) setAttributes(node, data.tag, data.attrs, cached.attrs, namespace);
				cached.children = build(node, data.tag, undefined, undefined, data.children, cached.children, false, 0, data.attrs.contenteditable ? node : editable, namespace, configs);
				cached.nodes.intact = true;
				if (shouldReattach === true && node != null) parentElement.insertBefore(node, parentElement.childNodes[index] || null)
			}
			//schedule configs to be called. They are called after `build` finishes running
			if (typeof data.attrs["config"] == FUNCTION) {
				var context = cached.configContext = cached.configContext || {};

				// bind
				var callback = function(data, args) {
					return function() {
						return data.attrs["config"].apply(data, args)
					}
				};
				configs.push(callback(data, [node, !isNew, context, cached]))
			}
		}
		else if (typeof dataType != FUNCTION) {
			//handle text nodes
			var nodes;
			if (cached.nodes.length === 0) {
				if (data.$trusted) {
					nodes = injectHTML(parentElement, index, data)
				}
				else {
					nodes = [$document.createTextNode(data)];
					if (!parentElement.nodeName.match(voidElements)) parentElement.insertBefore(nodes[0], parentElement.childNodes[index] || null)
				}
				cached = "string number boolean".indexOf(typeof data) > -1 ? new data.constructor(data) : data;
				cached.nodes = nodes
			}
			else if (cached.valueOf() !== data.valueOf() || shouldReattach === true) {
				nodes = cached.nodes;
				if (!editable || editable !== $document.activeElement) {
					if (data.$trusted) {
						clear(nodes, cached);
						nodes = injectHTML(parentElement, index, data)
					}
					else {
						//corner case: replacing the nodeValue of a text node that is a child of a textarea/contenteditable doesn't work
						//we need to update the value property of the parent textarea or the innerHTML of the contenteditable element instead
						if (parentTag === "textarea") parentElement.value = data;
						else if (editable) editable.innerHTML = data;
						else {
							if (nodes[0].nodeType == 1 || nodes.length > 1) { //was a trusted string
								clear(cached.nodes, cached);
								nodes = [$document.createTextNode(data)]
							}
							parentElement.insertBefore(nodes[0], parentElement.childNodes[index] || null);
							nodes[0].nodeValue = data
						}
					}
				}
				cached = new data.constructor(data);
				cached.nodes = nodes
			}
			else cached.nodes.intact = true
		}

		return cached
	}
	function setAttributes(node, tag, dataAttrs, cachedAttrs, namespace) {
		for (var attrName in dataAttrs) {
			var dataAttr = dataAttrs[attrName];
			var cachedAttr = cachedAttrs[attrName];
			if (!(attrName in cachedAttrs) || (cachedAttr !== dataAttr)) {
				cachedAttrs[attrName] = dataAttr;
				try {
					//`config` isn't a real attributes, so ignore it
					//we don't ignore `key` because it must be unique and having it on the DOM helps debugging
					if (attrName === "config") continue;
					//hook event handlers to the auto-redrawing system
					else if (typeof dataAttr == FUNCTION && attrName.indexOf("on") == 0) {
						node[attrName] = autoredraw(dataAttr, node)
					}
					//handle `style: {...}`
					else if (attrName === "style" && dataAttr != null && type.call(dataAttr) == OBJECT) {
						for (var rule in dataAttr) {
							if (cachedAttr == null || cachedAttr[rule] !== dataAttr[rule]) node.style[rule] = dataAttr[rule]
						}
						for (var rule in cachedAttr) {
							if (!(rule in dataAttr)) node.style[rule] = ""
						}
					}
					//handle SVG
					else if (namespace != null) {
						if (attrName === "href") node.setAttributeNS("http://www.w3.org/1999/xlink", "href", dataAttr);
						else if (attrName === "className") node.setAttribute("class", dataAttr);
						else node.setAttribute(attrName, dataAttr)
					}
					//handle cases that are properties (but ignore cases where we should use setAttribute instead)
					//- list and form are typically used as strings, but are DOM element references in js
					//- when using CSS selectors (e.g. `m("[style='']")`), style is used as a string, but it's an object in js
					else if (attrName in node && !(attrName == "list" || attrName == "style" || attrName == "form")) {
						//#348 don't set the value if not needed otherwise cursor placement breaks in Chrome
						if (node[attrName] != dataAttr) node[attrName] = dataAttr
					}
					else node.setAttribute(attrName, dataAttr)
				}
				catch (e) {
					//swallow IE's invalid argument errors to mimic HTML's fallback-to-doing-nothing-on-invalid-attributes behavior
					if (e.message.indexOf("Invalid argument") < 0) throw e
				}
			}
			//#348 dataAttr may not be a string, so use loose comparison (double equal) instead of strict (triple equal)
			else if (attrName === "value" && tag === "input" && node.value != dataAttr) {
				node.value = dataAttr
			}
		}
		return cachedAttrs
	}
	function clear(nodes, cached) {
		for (var i = nodes.length - 1; i > -1; i--) {
			if (nodes[i] && nodes[i].parentNode) {
				try {nodes[i].parentNode.removeChild(nodes[i])}
				catch (e) {} //ignore if this fails due to order of events (see http://stackoverflow.com/questions/21926083/failed-to-execute-removechild-on-node)
				cached = [].concat(cached);
				if (cached[i]) unload(cached[i])
			}
		}
		if (nodes.length != 0) nodes.length = 0
	}
	function unload(cached) {
		if (cached.configContext && typeof cached.configContext.onunload == FUNCTION) cached.configContext.onunload();
		if (cached.children) {
			if (type.call(cached.children) == ARRAY) {
				for (var i = 0; i < cached.children.length; i++) unload(cached.children[i])
			}
			else if (cached.children.tag) unload(cached.children)
		}
	}
	function injectHTML(parentElement, index, data) {
		var nextSibling = parentElement.childNodes[index];
		if (nextSibling) {
			var isElement = nextSibling.nodeType != 1;
			var placeholder = $document.createElement("span");
			if (isElement) {
				parentElement.insertBefore(placeholder, nextSibling || null);
				placeholder.insertAdjacentHTML("beforebegin", data);
				parentElement.removeChild(placeholder)
			}
			else nextSibling.insertAdjacentHTML("beforebegin", data)
		}
		else parentElement.insertAdjacentHTML("beforeend", data);
		var nodes = [];
		while (parentElement.childNodes[index] !== nextSibling) {
			nodes.push(parentElement.childNodes[index]);
			index++
		}
		return nodes
	}
	function autoredraw(callback, object) {
		return function(e) {
			e = e || event;
			m.redraw.strategy("diff");
			m.startComputation();
			try {return callback.call(object, e)}
			finally {
				m.endComputation()
			}
		}
	}

	var html;
	var documentNode = {
		appendChild: function(node) {
			if (html === undefined) html = $document.createElement("html");
			if ($document.documentElement && $document.documentElement !== node) {
				$document.replaceChild(node, $document.documentElement)
			}
			else $document.appendChild(node);
			this.childNodes = $document.childNodes
		},
		insertBefore: function(node) {
			this.appendChild(node)
		},
		childNodes: []
	};
	var nodeCache = [], cellCache = {};
	m.render = function(root, cell, forceRecreation) {
		var configs = [];
		if (!root) throw new Error("Please ensure the DOM element exists before rendering a template into it.");
		var id = getCellCacheKey(root);
		var isDocumentRoot = root == $document;
		var node = isDocumentRoot || root == $document.documentElement ? documentNode : root;
		if (isDocumentRoot && cell.tag != "html") cell = {tag: "html", attrs: {}, children: cell};
		if (cellCache[id] === undefined) clear(node.childNodes);
		if (forceRecreation === true) reset(root);
		cellCache[id] = build(node, null, undefined, undefined, cell, cellCache[id], false, 0, null, undefined, configs);
		for (var i = 0; i < configs.length; i++) configs[i]()
	};
	function getCellCacheKey(element) {
		var index = nodeCache.indexOf(element);
		return index < 0 ? nodeCache.push(element) - 1 : index
	}

	m.trust = function(value) {
		value = new String(value);
		value.$trusted = true;
		return value
	};

	function gettersetter(store) {
		var prop = function() {
			if (arguments.length) store = arguments[0];
			return store
		};

		prop.toJSON = function() {
			return store
		};

		return prop
	}

	m.prop = function (store) {
		//note: using non-strict equality check here because we're checking if store is null OR undefined
		if (((store != null && type.call(store) == OBJECT) || typeof store == FUNCTION) && typeof store.then == FUNCTION) {
			return propify(store)
		}

		return gettersetter(store)
	};

	var roots = [], modules = [], controllers = [], lastRedrawId = null, lastRedrawCallTime = 0, computePostRedrawHook = null, prevented = false, topModule;
	var FRAME_BUDGET = 16; //60 frames per second = 1 call per 16 ms
	m.module = function(root, module) {
		var index = roots.indexOf(root);
		if (index < 0) index = roots.length;
		var isPrevented = false;
		if (controllers[index] && typeof controllers[index].onunload == FUNCTION) {
			var event = {
				preventDefault: function() {isPrevented = true}
			};
			controllers[index].onunload(event)
		}
		if (!isPrevented) {
			m.redraw.strategy("all");
			m.startComputation();
			roots[index] = root;
			var currentModule = topModule = module;
			var controller = new module.controller;
			//controllers may call m.module recursively (via m.route redirects, for example)
			//this conditional ensures only the last recursive m.module call is applied
			if (currentModule == topModule) {
				controllers[index] = controller;
				modules[index] = module
			}
			m.endComputation();
			return controllers[index]
		}
	};
	m.redraw = function(force) {
		//lastRedrawId is a positive number if a second redraw is requested before the next animation frame
		//lastRedrawID is null if it's the first redraw and not an event handler
		if (lastRedrawId && force !== true) {
			//when setTimeout: only reschedule redraw if time between now and previous redraw is bigger than a frame, otherwise keep currently scheduled timeout
			//when rAF: always reschedule redraw
			if (new Date - lastRedrawCallTime > FRAME_BUDGET || $requestAnimationFrame == window.requestAnimationFrame) {
				if (lastRedrawId > 0) $cancelAnimationFrame(lastRedrawId);
				lastRedrawId = $requestAnimationFrame(redraw, FRAME_BUDGET)
			}
		}
		else {
			redraw();
			lastRedrawId = $requestAnimationFrame(function() {lastRedrawId = null}, FRAME_BUDGET)
		}
	};
	m.redraw.strategy = m.prop();
	function redraw() {
		var mode = m.redraw.strategy();
		for (var i = 0; i < roots.length; i++) {
			if (controllers[i] && mode != "none") {
				m.render(roots[i], modules[i].view(controllers[i]), mode == "all")
			}
		}
		//after rendering within a routed context, we need to scroll back to the top, and fetch the document title for history.pushState
		if (computePostRedrawHook) {
			computePostRedrawHook();
			computePostRedrawHook = null
		}
		lastRedrawId = null;
		lastRedrawCallTime = new Date;
		m.redraw.strategy("diff")
	}

	var pendingRequests = 0;
	m.startComputation = function() {pendingRequests++};
	m.endComputation = function() {
		pendingRequests = Math.max(pendingRequests - 1, 0);
		if (pendingRequests == 0) m.redraw()
	};

	m.withAttr = function(prop, withAttrCallback) {
		return function(e) {
			e = e || event;
			var currentTarget = e.currentTarget || this;
			withAttrCallback(prop in currentTarget ? currentTarget[prop] : currentTarget.getAttribute(prop))
		}
	};

	//routing
	var modes = {pathname: "", hash: "#", search: "?"};
	var redirect = function() {}, routeParams = {}, currentRoute;
	m.route = function() {
		//m.route()
		if (arguments.length === 0) return currentRoute;
		else if (arguments.length === 3 && type.call(arguments[1]) == STRING) {
			var root = arguments[0], defaultRoute = arguments[1], router = arguments[2];
			redirect = function(source) {
				var path = currentRoute = normalizeRoute(source);
				if (!routeByValue(root, router, path)) {
					m.route(defaultRoute, true)
				}
			};
			var listener = m.route.mode == "hash" ? "onhashchange" : "onpopstate";
			window[listener] = function() {
				if (currentRoute != normalizeRoute($location[m.route.mode])) {
					redirect($location[m.route.mode])
				}
			};
			computePostRedrawHook = setScroll;
			window[listener]()
		}
		//config: m.route
		else if (arguments[0].addEventListener) {
			var element = arguments[0];
			var isInitialized = arguments[1];
			var context = arguments[2];
			element.href = (m.route.mode !== 'pathname' ? $location.pathname : '') + modes[m.route.mode] + this.attrs.href;
			element.removeEventListener("click", routeUnobtrusive);
			element.addEventListener("click", routeUnobtrusive)
		}
		//m.route(route, params)
		else if (type.call(arguments[0]) == STRING) {
			currentRoute = arguments[0];
			var args = arguments[1] || {}
			var queryIndex = currentRoute.indexOf("?")
			var params = queryIndex > -1 ? parseQueryString(currentRoute.slice(queryIndex + 1)) : {}
			for (var i in args) params[i] = args[i]
			var querystring = buildQueryString(params)
			var currentPath = queryIndex > -1 ? currentRoute.slice(0, queryIndex) : currentRoute
			if (querystring) currentRoute = currentPath + (currentPath.indexOf("?") === -1 ? "?" : "&") + querystring;

			var shouldReplaceHistoryEntry = (arguments.length == 3 ? arguments[2] : arguments[1]) === true;

			if (window.history.pushState) {
				computePostRedrawHook = function() {
					window.history[shouldReplaceHistoryEntry ? "replaceState" : "pushState"](null, $document.title, modes[m.route.mode] + currentRoute);
					setScroll()
				};
				redirect(modes[m.route.mode] + currentRoute)
			}
			else $location[m.route.mode] = currentRoute
		}
	};
	m.route.param = function(key) {return routeParams[key]};
	m.route.mode = "search";
	function normalizeRoute(route) {return route.slice(modes[m.route.mode].length)}
	function routeByValue(root, router, path) {
		routeParams = {};

		var queryStart = path.indexOf("?");
		if (queryStart !== -1) {
			routeParams = parseQueryString(path.substr(queryStart + 1, path.length));
			path = path.substr(0, queryStart)
		}

		for (var route in router) {
			if (route == path) {
				m.module(root, router[route]);
				return true
			}

			var matcher = new RegExp("^" + route.replace(/:[^\/]+?\.{3}/g, "(.*?)").replace(/:[^\/]+/g, "([^\\/]+)") + "\/?$");

			if (matcher.test(path)) {
				path.replace(matcher, function() {
					var keys = route.match(/:[^\/]+/g) || [];
					var values = [].slice.call(arguments, 1, -2);
					for (var i = 0; i < keys.length; i++) routeParams[keys[i].replace(/:|\./g, "")] = decodeURIComponent(values[i])
					m.module(root, router[route])
				});
				return true
			}
		}
	}
	function routeUnobtrusive(e) {
		e = e || event;
		if (e.ctrlKey || e.metaKey || e.which == 2) return;
		if (e.preventDefault) e.preventDefault();
		else e.returnValue = false;
		var currentTarget = e.currentTarget || this;
		var args = m.route.mode == "pathname" && currentTarget.search ? parseQueryString(currentTarget.search.slice(1)) : {};
		m.route(currentTarget[m.route.mode].slice(modes[m.route.mode].length), args)
	}
	function setScroll() {
		if (m.route.mode != "hash" && $location.hash) $location.hash = $location.hash;
		else window.scrollTo(0, 0)
	}
	function buildQueryString(object, prefix) {
		var str = [];
		for(var prop in object) {
			var key = prefix ? prefix + "[" + prop + "]" : prop, value = object[prop];
			str.push(value != null && type.call(value) == OBJECT ? buildQueryString(value, key) : encodeURIComponent(key) + "=" + encodeURIComponent(value))
		}
		return str.join("&")
	}
	function parseQueryString(str) {
		var pairs = str.split("&"), params = {};
		for (var i = 0; i < pairs.length; i++) {
			var pair = pairs[i].split("=");
			params[decodeSpace(pair[0])] = pair[1] ? decodeSpace(pair[1]) : ""
		}
		return params
	}
	function decodeSpace(string) {
		return decodeURIComponent(string.replace(/\+/g, " "))
	}
	function reset(root) {
		var cacheKey = getCellCacheKey(root);
		clear(root.childNodes, cellCache[cacheKey]);
		cellCache[cacheKey] = undefined
	}

	m.deferred = function () {
		var deferred = new Deferred();
		deferred.promise = propify(deferred.promise);
		return deferred
	};
	function propify(promise) {
		var prop = m.prop();
		promise.then(prop);
		prop.then = function(resolve, reject) {
			return propify(promise.then(resolve, reject))
		};
		return prop
	}
	//Promiz.mithril.js | Zolmeister | MIT
	//a modified version of Promiz.js, which does not conform to Promises/A+ for two reasons:
	//1) `then` callbacks are called synchronously (because setTimeout is too slow, and the setImmediate polyfill is too big
	//2) throwing subclasses of Error cause the error to be bubbled up instead of triggering rejection (because the spec does not account for the important use case of default browser error handling, i.e. message w/ line number)
	function Deferred(successCallback, failureCallback) {
		var RESOLVING = 1, REJECTING = 2, RESOLVED = 3, REJECTED = 4;
		var self = this, state = 0, promiseValue = 0, next = [];

		self["promise"] = {};

		self["resolve"] = function(value) {
			if (!state) {
				promiseValue = value;
				state = RESOLVING;

				fire()
			}
			return this
		};

		self["reject"] = function(value) {
			if (!state) {
				promiseValue = value;
				state = REJECTING;

				fire()
			}
			return this
		};

		self.promise["then"] = function(successCallback, failureCallback) {
			var deferred = new Deferred(successCallback, failureCallback);
			if (state == RESOLVED) {
				deferred.resolve(promiseValue)
			}
			else if (state == REJECTED) {
				deferred.reject(promiseValue)
			}
			else {
				next.push(deferred)
			}
			return deferred.promise
		};

		function finish(type) {
			state = type || REJECTED;
			next.map(function(deferred) {
				state == RESOLVED && deferred.resolve(promiseValue) || deferred.reject(promiseValue)
			})
		}

		function thennable(then, successCallback, failureCallback, notThennableCallback) {
			if (((promiseValue != null && type.call(promiseValue) == OBJECT) || typeof promiseValue == FUNCTION) && typeof then == FUNCTION) {
				try {
					// count protects against abuse calls from spec checker
					var count = 0;
					then.call(promiseValue, function(value) {
						if (count++) return;
						promiseValue = value;
						successCallback()
					}, function (value) {
						if (count++) return;
						promiseValue = value;
						failureCallback()
					})
				}
				catch (e) {
					m.deferred.onerror(e);
					promiseValue = e;
					failureCallback()
				}
			} else {
				notThennableCallback()
			}
		}

		function fire() {
			// check if it's a thenable
			var then;
			try {
				then = promiseValue && promiseValue.then
			}
			catch (e) {
				m.deferred.onerror(e);
				promiseValue = e;
				state = REJECTING;
				return fire()
			}
			thennable(then, function() {
				state = RESOLVING;
				fire()
			}, function() {
				state = REJECTING;
				fire()
			}, function() {
				try {
					if (state == RESOLVING && typeof successCallback == FUNCTION) {
						promiseValue = successCallback(promiseValue)
					}
					else if (state == REJECTING && typeof failureCallback == "function") {
						promiseValue = failureCallback(promiseValue);
						state = RESOLVING
					}
				}
				catch (e) {
					m.deferred.onerror(e);
					promiseValue = e;
					return finish()
				}

				if (promiseValue == self) {
					promiseValue = TypeError();
					finish()
				}
				else {
					thennable(then, function () {
						finish(RESOLVED)
					}, finish, function () {
						finish(state == RESOLVING && RESOLVED)
					})
				}
			})
		}
	}
	m.deferred.onerror = function(e) {
		if (type.call(e) == "[object Error]" && !e.constructor.toString().match(/ Error/)) throw e
	};

	m.sync = function(args) {
		var method = "resolve";
		function synchronizer(pos, resolved) {
			return function(value) {
				results[pos] = value;
				if (!resolved) method = "reject";
				if (--outstanding == 0) {
					deferred.promise(results);
					deferred[method](results)
				}
				return value
			}
		}

		var deferred = m.deferred();
		var outstanding = args.length;
		var results = new Array(outstanding);
		if (args.length > 0) {
			for (var i = 0; i < args.length; i++) {
				args[i].then(synchronizer(i, true), synchronizer(i, false))
			}
		}
		else deferred.resolve([]);

		return deferred.promise
	};
	function identity(value) {return value}

	function ajax(options) {
		if (options.dataType && options.dataType.toLowerCase() === "jsonp") {
			var callbackKey = "mithril_callback_" + new Date().getTime() + "_" + (Math.round(Math.random() * 1e16)).toString(36);
			var script = $document.createElement("script");

			window[callbackKey] = function(resp) {
				$document.body.removeChild(script);
				options.onload({
					type: "load",
					target: {
						responseText: resp
					}
				});
				window[callbackKey] = undefined
			};

			script.onerror = function(e) {
				$document.body.removeChild(script);

				options.onerror({
					type: "error",
					target: {
						status: 500,
						responseText: JSON.stringify({error: "Error making jsonp request"})
					}
				});
				window[callbackKey] = undefined;

				return false
			};

			script.onload = function(e) {
				return false
			};

			script.src = options.url
				+ (options.url.indexOf("?") > 0 ? "&" : "?")
				+ (options.callbackKey ? options.callbackKey : "callback")
				+ "=" + callbackKey
				+ "&" + buildQueryString(options.data || {});
			$document.body.appendChild(script)
		}
		else {
			var xhr = new window.XMLHttpRequest;
			xhr.open(options.method, options.url, true, options.user, options.password);
			xhr.onreadystatechange = function() {
				if (xhr.readyState === 4) {
					if (xhr.status >= 200 && xhr.status < 300) options.onload({type: "load", target: xhr});
					else options.onerror({type: "error", target: xhr})
				}
			};
			if (options.serialize == JSON.stringify && options.data && options.method != "GET") {
				xhr.setRequestHeader("Content-Type", "application/json; charset=utf-8")
			}
			if (options.deserialize == JSON.parse) {
				xhr.setRequestHeader("Accept", "application/json, text/*");
			}
			if (typeof options.config == FUNCTION) {
				var maybeXhr = options.config(xhr, options);
				if (maybeXhr != null) xhr = maybeXhr
			}

			var data = options.method == "GET" || !options.data ? "" : options.data
			if (data && (type.call(data) != STRING && data.constructor != window.FormData)) {
				throw "Request data should be either be a string or FormData. Check the `serialize` option in `m.request`";
			}
			xhr.send(data);
			return xhr
		}
	}
	function bindData(xhrOptions, data, serialize) {
		if (xhrOptions.method == "GET" && xhrOptions.dataType != "jsonp") {
			var prefix = xhrOptions.url.indexOf("?") < 0 ? "?" : "&";
			var querystring = buildQueryString(data);
			xhrOptions.url = xhrOptions.url + (querystring ? prefix + querystring : "")
		}
		else xhrOptions.data = serialize(data);
		return xhrOptions
	}
	function parameterizeUrl(url, data) {
		var tokens = url.match(/:[a-z]\w+/gi);
		if (tokens && data) {
			for (var i = 0; i < tokens.length; i++) {
				var key = tokens[i].slice(1);
				url = url.replace(tokens[i], data[key]);
				delete data[key]
			}
		}
		return url
	}

	m.request = function(xhrOptions) {
		if (xhrOptions.background !== true) m.startComputation();
		var deferred = m.deferred();
		var isJSONP = xhrOptions.dataType && xhrOptions.dataType.toLowerCase() === "jsonp";
		var serialize = xhrOptions.serialize = isJSONP ? identity : xhrOptions.serialize || JSON.stringify;
		var deserialize = xhrOptions.deserialize = isJSONP ? identity : xhrOptions.deserialize || JSON.parse;
		var extract = xhrOptions.extract || function(xhr) {
			return xhr.responseText.length === 0 && deserialize === JSON.parse ? null : xhr.responseText
		};
		xhrOptions.url = parameterizeUrl(xhrOptions.url, xhrOptions.data);
		xhrOptions = bindData(xhrOptions, xhrOptions.data, serialize);
		xhrOptions.onload = xhrOptions.onerror = function(e) {
			try {
				e = e || event;
				var unwrap = (e.type == "load" ? xhrOptions.unwrapSuccess : xhrOptions.unwrapError) || identity;
				var response = unwrap(deserialize(extract(e.target, xhrOptions)));
				if (e.type == "load") {
					if (type.call(response) == ARRAY && xhrOptions.type) {
						for (var i = 0; i < response.length; i++) response[i] = new xhrOptions.type(response[i])
					}
					else if (xhrOptions.type) response = new xhrOptions.type(response)
				}
				deferred[e.type == "load" ? "resolve" : "reject"](response)
			}
			catch (e) {
				m.deferred.onerror(e);
				deferred.reject(e)
			}
			if (xhrOptions.background !== true) m.endComputation()
		};
		ajax(xhrOptions);
		deferred.promise(xhrOptions.initialValue);
		return deferred.promise
	};

	//testing API
	m.deps = function(mock) {
		initialize(window = mock || window);
		return window;
	};
	//for internal testing only, do not use `m.deps.factory`
	m.deps.factory = app;

	return m
})(typeof window != "undefined" ? window : {});

if (typeof module != "undefined" && module !== null && module.exports) module.exports = m;
else if (typeof define == "function" && define.amd) define(function() {return m});

},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\ripples.min.js":[function(require,module,exports){
window.ripples={init:function(n){"use strict";function o(n,t){var i=n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;return i.call(n,t)}var s=100,h=500,t=function(n,t,i){typeof n=="string"&&(n=[n]);n.forEach(function(n){document.addEventListener(n,function(n){var r=typeof n.detail!="number"?n.detail:n.target;o(r,t)&&i(n,r)})})},r=function(n,t,i){var s=t,l=s.parentNode,r=document.createElement("div"),u=l.getBoundingClientRect(),c={x:n.clientX-u.left,y:(window.ontouchstart?n.clientY-window.scrollY:n.clientY)-u.top},f="scale("+Math.round(s.offsetWidth/5)+")",v=new CustomEvent("rippleEnd",{detail:r}),y,o,a;n.touches&&(c={x:n.touches[0].clientX-u.left,y:n.touches[0].clientY-u.top});e=r;r.className="ripple";r.setAttribute("style","left:"+c.x+"px; top:"+c.y+"px;");o=window.getComputedStyle(l).color;o=o.replace("rgb","rgba").replace(")",", "+.3+")");s.appendChild(r);y=window.getComputedStyle(r).opacity;r.dataset.animating=1;r.className="ripple ripple-on";a=[r.getAttribute("style"),"background-color: "+o,"-ms-transform: "+f,"-moz-transform"+f,"-webkit-transform"+f,"transform: "+f];r.setAttribute("style",a.join(";"));setTimeout(function(){r.dataset.animating=0;document.dispatchEvent(v);i&&i()},h)},u=function(n){n.className="ripple ripple-on ripple-out";setTimeout(function(){n.remove()},s)},i=!1,f,e;t(["mousedown","touchstart"],"*",function(){i=!0});t(["mouseup","touchend","mouseout"],"*",function(){i=!1});f=function(n,t){if(t.getElementsByClassName("ripple-wrapper").length===0){t.className+=" withripple";var i=document.createElement("div");i.className="ripple-wrapper";t.appendChild(i);window.ontouchstart===null&&r(n,i,function(){i.getElementsByClassName("ripple")[0].remove()})}};t(["mouseover","touchstart"],n,f);t(["mousedown","touchstart"],".ripple-wrapper",function(n,t){(n.which===0||n.which===1||n.which===2)&&r(n,t)});t("rippleEnd",".ripple-wrapper .ripple",function(n,t){var r=t.parentNode.getElementsByClassName("ripple");(!i||r[0]==t&&r.length>1)&&u(t)});t(["mouseup","touchend","mouseout"],".ripple-wrapper",function(){var n=e;n&&n.dataset.animating!=1&&u(n)})}};
/*
//# sourceMappingURL=ripples.min.js.map
*/
},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\velocity.js":[function(require,module,exports){
/*! VelocityJS.org (1.1.0). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License */

/*************************
   Velocity jQuery Shim
*************************/

/*! VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. */

/* This file contains the jQuery functions that Velocity relies on, thereby removing Velocity's dependency on a full copy of jQuery, and allowing it to work in any environment. */
/* These shimmed functions are only used if jQuery isn't present. If both this shim and jQuery are loaded, Velocity defaults to jQuery proper. */
/* Browser support: Using this shim instead of jQuery proper removes support for IE8. */

;(function (window) {
    /***************
         Setup
    ***************/

    /* If jQuery is already loaded, there's no point in loading this shim. */
    if (window.jQuery) {
        return;
    }

    /* jQuery base. */
    var $ = function (selector, context) {
        return new $.fn.init(selector, context);
    };

    /********************
       Private Methods
    ********************/

    /* jQuery */
    $.isWindow = function (obj) {
        /* jshint eqeqeq: false */
        return obj != null && obj == obj.window;
    };

    /* jQuery */
    $.type = function (obj) {
        if (obj == null) {
            return obj + "";
        }

        return typeof obj === "object" || typeof obj === "function" ?
            class2type[toString.call(obj)] || "object" :
            typeof obj;
    };

    /* jQuery */
    $.isArray = Array.isArray || function (obj) {
        return $.type(obj) === "array";
    };

    /* jQuery */
    function isArraylike (obj) {
        var length = obj.length,
            type = $.type(obj);

        if (type === "function" || $.isWindow(obj)) {
            return false;
        }

        if (obj.nodeType === 1 && length) {
            return true;
        }

        return type === "array" || length === 0 || typeof length === "number" && length > 0 && (length - 1) in obj;
    }

    /***************
       $ Methods
    ***************/

    /* jQuery: Support removed for IE<9. */
    $.isPlainObject = function (obj) {
        var key;

        if (!obj || $.type(obj) !== "object" || obj.nodeType || $.isWindow(obj)) {
            return false;
        }

        try {
            if (obj.constructor &&
                !hasOwn.call(obj, "constructor") &&
                !hasOwn.call(obj.constructor.prototype, "isPrototypeOf")) {
                return false;
            }
        } catch (e) {
            return false;
        }

        for (key in obj) {}

        return key === undefined || hasOwn.call(obj, key);
    };

    /* jQuery */
    $.each = function(obj, callback, args) {
        var value,
            i = 0,
            length = obj.length,
            isArray = isArraylike(obj);

        if (args) {
            if (isArray) {
                for (; i < length; i++) {
                    value = callback.apply(obj[i], args);

                    if (value === false) {
                        break;
                    }
                }
            } else {
                for (i in obj) {
                    value = callback.apply(obj[i], args);

                    if (value === false) {
                        break;
                    }
                }
            }

        } else {
            if (isArray) {
                for (; i < length; i++) {
                    value = callback.call(obj[i], i, obj[i]);

                    if (value === false) {
                        break;
                    }
                }
            } else {
                for (i in obj) {
                    value = callback.call(obj[i], i, obj[i]);

                    if (value === false) {
                        break;
                    }
                }
            }
        }

        return obj;
    };

    /* Custom */
    $.data = function (node, key, value) {
        /* $.getData() */
        if (value === undefined) {
            var id = node[$.expando],
                store = id && cache[id];

            if (key === undefined) {
                return store;
            } else if (store) {
                if (key in store) {
                    return store[key];
                }
            }
        /* $.setData() */
        } else if (key !== undefined) {
            var id = node[$.expando] || (node[$.expando] = ++$.uuid);

            cache[id] = cache[id] || {};
            cache[id][key] = value;

            return value;
        }
    };

    /* Custom */
    $.removeData = function (node, keys) {
        var id = node[$.expando],
            store = id && cache[id];

        if (store) {
            $.each(keys, function(_, key) {
                delete store[key];
            });
        }
    };

    /* jQuery */
    $.extend = function () {
        var src, copyIsArray, copy, name, options, clone,
            target = arguments[0] || {},
            i = 1,
            length = arguments.length,
            deep = false;

        if (typeof target === "boolean") {
            deep = target;

            target = arguments[i] || {};
            i++;
        }

        if (typeof target !== "object" && $.type(target) !== "function") {
            target = {};
        }

        if (i === length) {
            target = this;
            i--;
        }

        for (; i < length; i++) {
            if ((options = arguments[i]) != null) {
                for (name in options) {
                    src = target[name];
                    copy = options[name];

                    if (target === copy) {
                        continue;
                    }

                    if (deep && copy && ($.isPlainObject(copy) || (copyIsArray = $.isArray(copy)))) {
                        if (copyIsArray) {
                            copyIsArray = false;
                            clone = src && $.isArray(src) ? src : [];

                        } else {
                            clone = src && $.isPlainObject(src) ? src : {};
                        }

                        target[name] = $.extend(deep, clone, copy);

                    } else if (copy !== undefined) {
                        target[name] = copy;
                    }
                }
            }
        }

        return target;
    };

    /* jQuery 1.4.3 */
    $.queue = function (elem, type, data) {
        function $makeArray (arr, results) {
            var ret = results || [];

            if (arr != null) {
                if (isArraylike(Object(arr))) {
                    /* $.merge */
                    (function(first, second) {
                        var len = +second.length,
                            j = 0,
                            i = first.length;

                        while (j < len) {
                            first[i++] = second[j++];
                        }

                        if (len !== len) {
                            while (second[j] !== undefined) {
                                first[i++] = second[j++];
                            }
                        }

                        first.length = i;

                        return first;
                    })(ret, typeof arr === "string" ? [arr] : arr);
                } else {
                    [].push.call(ret, arr);
                }
            }

            return ret;
        }

        if (!elem) {
            return;
        }

        type = (type || "fx") + "queue";

        var q = $.data(elem, type);

        if (!data) {
            return q || [];
        }

        if (!q || $.isArray(data)) {
            q = $.data(elem, type, $makeArray(data));
        } else {
            q.push(data);
        }

        return q;
    };

    /* jQuery 1.4.3 */
    $.dequeue = function (elems, type) {
        /* Custom: Embed element iteration. */
        $.each(elems.nodeType ? [ elems ] : elems, function(i, elem) {
            type = type || "fx";

            var queue = $.queue(elem, type),
                fn = queue.shift();

            if (fn === "inprogress") {
                fn = queue.shift();
            }

            if (fn) {
                if (type === "fx") {
                    queue.unshift("inprogress");
                }

                fn.call(elem, function() {
                    $.dequeue(elem, type);
                });
            }
        });
    };

    /******************
       $.fn Methods
    ******************/

    /* jQuery */
    $.fn = $.prototype = {
        init: function (selector) {
            /* Just return the element wrapped inside an array; don't proceed with the actual jQuery node wrapping process. */
            if (selector.nodeType) {
                this[0] = selector;

                return this;
            } else {
                throw new Error("Not a DOM node.");
            }
        },

        offset: function () {
            /* jQuery altered code: Dropped disconnected DOM node checking. */
            var box = this[0].getBoundingClientRect ? this[0].getBoundingClientRect() : { top: 0, left: 0 };

            return {
                top: box.top + (window.pageYOffset || document.scrollTop  || 0)  - (document.clientTop  || 0),
                left: box.left + (window.pageXOffset || document.scrollLeft  || 0) - (document.clientLeft || 0)
            };
        },

        position: function () {
            /* jQuery */
            function offsetParent() {
                var offsetParent = this.offsetParent || document;

                while (offsetParent && (!offsetParent.nodeType.toLowerCase === "html" && offsetParent.style.position === "static")) {
                    offsetParent = offsetParent.offsetParent;
                }

                return offsetParent || document;
            }

            /* Zepto */
            var elem = this[0],
                offsetParent = offsetParent.apply(elem),
                offset = this.offset(),
                parentOffset = /^(?:body|html)$/i.test(offsetParent.nodeName) ? { top: 0, left: 0 } : $(offsetParent).offset()

            offset.top -= parseFloat(elem.style.marginTop) || 0;
            offset.left -= parseFloat(elem.style.marginLeft) || 0;

            if (offsetParent.style) {
                parentOffset.top += parseFloat(offsetParent.style.borderTopWidth) || 0
                parentOffset.left += parseFloat(offsetParent.style.borderLeftWidth) || 0
            }

            return {
                top: offset.top - parentOffset.top,
                left: offset.left - parentOffset.left
            };
        }
    };

    /**********************
       Private Variables
    **********************/

    /* For $.data() */
    var cache = {};
    $.expando = "velocity" + (new Date().getTime());
    $.uuid = 0;

    /* For $.queue() */
    var class2type = {},
        hasOwn = class2type.hasOwnProperty,
        toString = class2type.toString;

    var types = "Boolean Number String Function Array Date RegExp Object Error".split(" ");
    for (var i = 0; i < types.length; i++) {
        class2type["[object " + types[i] + "]"] = types[i].toLowerCase();
    }

    /* Makes $(node) possible, without having to call init. */
    $.fn.init.prototype = $.fn;

    /* Globalize Velocity onto the window, and assign its Utilities property. */
    window.Velocity = { Utilities: $ };
})(window);

/******************
    Velocity.js
******************/

;(function (factory) {
    /* CommonJS module. */
    if (typeof module === "object" && typeof module.exports === "object") {
        module.exports = factory();
    /* AMD module. */
    } else if (typeof define === "function" && define.amd) {
        define(factory);
    /* Browser globals. */
    } else {
        factory();
    }
}(function() {
return function (global, window, document, undefined) {

    /***************
        Summary
    ***************/

    /*
    - CSS: CSS stack that works independently from the rest of Velocity.
    - animate(): Core animation method that iterates over the targeted elements and queues the incoming call onto each element individually.
      - Pre-Queueing: Prepare the element for animation by instantiating its data cache and processing the call's options.
      - Queueing: The logic that runs once the call has reached its point of execution in the element's $.queue() stack.
                  Most logic is placed here to avoid risking it becoming stale (if the element's properties have changed).
      - Pushing: Consolidation of the tween data followed by its push onto the global in-progress calls container.
    - tick(): The single requestAnimationFrame loop responsible for tweening all in-progress calls.
    - completeCall(): Handles the cleanup process for each Velocity call.
    */

    /*********************
       Helper Functions
    *********************/

    /* IE detection. Gist: https://gist.github.com/julianshapiro/9098609 */
    var IE = (function() {
        if (document.documentMode) {
            return document.documentMode;
        } else {
            for (var i = 7; i > 4; i--) {
                var div = document.createElement("div");

                div.innerHTML = "<!--[if IE " + i + "]><span></span><![endif]-->";

                if (div.getElementsByTagName("span").length) {
                    div = null;

                    return i;
                }
            }
        }

        return undefined;
    })();

    /* rAF shim. Gist: https://gist.github.com/julianshapiro/9497513 */
    var rAFShim = (function() {
        var timeLast = 0;

        return window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function(callback) {
            var timeCurrent = (new Date()).getTime(),
                timeDelta;

            /* Dynamically set delay on a per-tick basis to match 60fps. */
            /* Technique by Erik Moller. MIT license: https://gist.github.com/paulirish/1579671 */
            timeDelta = Math.max(0, 16 - (timeCurrent - timeLast));
            timeLast = timeCurrent + timeDelta;

            return setTimeout(function() { callback(timeCurrent + timeDelta); }, timeDelta);
        };
    })();

    /* Array compacting. Copyright Lo-Dash. MIT License: https://github.com/lodash/lodash/blob/master/LICENSE.txt */
    function compactSparseArray (array) {
        var index = -1,
            length = array ? array.length : 0,
            result = [];

        while (++index < length) {
            var value = array[index];

            if (value) {
                result.push(value);
            }
        }

        return result;
    }

    function sanitizeElements (elements) {
        /* Unwrap jQuery/Zepto objects. */
        if (Type.isWrapped(elements)) {
            elements = [].slice.call(elements);
        /* Wrap a single element in an array so that $.each() can iterate with the element instead of its node's children. */
        } else if (Type.isNode(elements)) {
            elements = [ elements ];
        }

        return elements;
    }

    var Type = {
        isString: function (variable) {
            return (typeof variable === "string");
        },
        isArray: Array.isArray || function (variable) {
            return Object.prototype.toString.call(variable) === "[object Array]";
        },
        isFunction: function (variable) {
            return Object.prototype.toString.call(variable) === "[object Function]";
        },
        isNode: function (variable) {
            return variable && variable.nodeType;
        },
        /* Copyright Martin Bohm. MIT License: https://gist.github.com/Tomalak/818a78a226a0738eaade */
        isNodeList: function (variable) {
            return typeof variable === "object" &&
                /^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(variable)) &&
                variable.length !== undefined &&
                (variable.length === 0 || (typeof variable[0] === "object" && variable[0].nodeType > 0));
        },
        /* Determine if variable is a wrapped jQuery or Zepto element. */
        isWrapped: function (variable) {
            return variable && (variable.jquery || (window.Zepto && window.Zepto.zepto.isZ(variable)));
        },
        isSVG: function (variable) {
            return window.SVGElement && (variable instanceof window.SVGElement);
        },
        isEmptyObject: function (variable) {
            for (var name in variable) {
                return false;
            }

            return true;
        }
    };

    /*****************
       Dependencies
    *****************/

    var $,
        isJQuery = false;

    if (global.fn && global.fn.jquery) {
        $ = global;
        isJQuery = true;
    } else {
        $ = window.Velocity.Utilities;
    }

    if (IE <= 8 && !isJQuery) {
        throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");
    } else if (IE <= 7) {
        /* Revert to jQuery's $.animate(), and lose Velocity's extra features. */
        jQuery.fn.velocity = jQuery.fn.animate;

        /* Now that $.fn.velocity is aliased, abort this Velocity declaration. */
        return;
    }

    /*****************
        Constants
    *****************/

    var DURATION_DEFAULT = 400,
        EASING_DEFAULT = "swing";

    /*************
        State
    *************/

    /* Note: The global object also doubles as a publicly-accessible data store for the purposes of unit testing. */
    /* Note: Alias the lowercase and uppercase variants of "velocity" to minimize user confusion due to the lowercase nature of the $.fn extension. */
    var Velocity = {
        /* Container for page-wide Velocity state data. */
        State: {
            /* Detect mobile devices to determine if mobileHA should be turned on. */
            isMobile: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),
            /* The mobileHA option's behavior changes on older Android devices (Gingerbread, versions 2.3.3-2.3.7). */
            isAndroid: /Android/i.test(navigator.userAgent),
            isGingerbread: /Android 2\.3\.[3-7]/i.test(navigator.userAgent),
            isChrome: window.chrome,
            isFirefox: /Firefox/i.test(navigator.userAgent),
            /* Create a cached element for re-use when checking for CSS property prefixes. */
            prefixElement: document.createElement("div"),
            /* Cache every prefix match to avoid repeating lookups. */
            prefixMatches: {},
            /* Cache the anchor used for animating window scrolling. */
            scrollAnchor: null,
            /* Cache the property names associated with the scroll anchor. */
            scrollPropertyLeft: null,
            scrollPropertyTop: null,
            /* Keep track of whether our RAF tick is running. */
            isTicking: false,
            /* Container for every in-progress call to Velocity. */
            calls: []
        },
        /* Velocity's custom CSS stack. Made global for unit testing. */
        CSS: { /* Defined below. */ },
        /* Defined by Velocity's optional jQuery shim. */
        Utilities: $,
        /* Container for the user's custom animation redirects that are referenced by name in place of a properties map object. */
        Redirects: { /* Manually registered by the user. */ },
        Easings: { /* Defined below. */ },
        /* Attempt to use ES6 Promises by default. Users can override this with a third-party promises library. */
        Promise: window.Promise,
        /* Page-wide option defaults, which can be overriden by the user. */
        defaults: {
            queue: "",
            duration: DURATION_DEFAULT,
            easing: EASING_DEFAULT,
            begin: undefined,
            complete: undefined,
            progress: undefined,
            display: undefined,
            visibility: undefined,
            loop: false,
            delay: false,
            mobileHA: true,
            /* Set to false to prevent property values from being cached between consecutive Velocity-initiated chain calls. */
            _cacheValues: true
        },
        /* A design goal of Velocity is to cache data wherever possible in order to avoid DOM requerying.
           Accordingly, each element has a data cache instantiated on it. */
        init: function (element) {
            $.data(element, "velocity", {
                /* Store whether this is an SVG element, since its properties are retrieved and updated differently than standard HTML elements. */
                isSVG: Type.isSVG(element),
                /* Keep track of whether the element is currently being animated by Velocity.
                   This is used to ensure that property values are not transferred between non-consecutive (stale) calls. */
                isAnimating: false,
                /* A reference to the element's live computedStyle object. Learn more here: https://developer.mozilla.org/en/docs/Web/API/window.getComputedStyle */
                computedStyle: null,
                /* Tween data is cached for each animation on the element so that data can be passed across calls --
                   in particular, end values are used as subsequent start values in consecutive Velocity calls. */
                tweensContainer: null,
                /* The full root property values of each CSS hook being animated on this element are cached so that:
                   1) Concurrently-animating hooks sharing the same root can have their root values' merged into one while tweening.
                   2) Post-hook-injection root values can be transferred over to consecutively chained Velocity calls as starting root values. */
                rootPropertyValueCache: {},
                /* A cache for transform updates, which must be manually flushed via CSS.flushTransformCache(). */
                transformCache: {}
            });
        },
        /* A parallel to jQuery's $.css(), used for getting/setting Velocity's hooked CSS properties. */
        hook: null, /* Defined below. */
        /* Velocity-wide animation time remapping for testing purposes. */
        mock: false,
        version: { major: 1, minor: 1, patch: 0 },
        /* Set to 1 or 2 (most verbose) to output debug info to console. */
        debug: false
    };

    /* Retrieve the appropriate scroll anchor and property name for the browser: https://developer.mozilla.org/en-US/docs/Web/API/Window.scrollY */
    if (window.pageYOffset !== undefined) {
        Velocity.State.scrollAnchor = window;
        Velocity.State.scrollPropertyLeft = "pageXOffset";
        Velocity.State.scrollPropertyTop = "pageYOffset";
    } else {
        Velocity.State.scrollAnchor = document.documentElement || document.body.parentNode || document.body;
        Velocity.State.scrollPropertyLeft = "scrollLeft";
        Velocity.State.scrollPropertyTop = "scrollTop";
    }

    /* Shorthand alias for jQuery's $.data() utility. */
    function Data (element) {
        /* Hardcode a reference to the plugin name. */
        var response = $.data(element, "velocity");

        /* jQuery <=1.4.2 returns null instead of undefined when no match is found. We normalize this behavior. */
        return response === null ? undefined : response;
    };

    /**************
        Easing
    **************/

    /* Step easing generator. */
    function generateStep (steps) {
        return function (p) {
            return Math.round(p * steps) * (1 / steps);
        };
    }

    /* Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */
    function generateBezier (mX1, mY1, mX2, mY2) {
        var NEWTON_ITERATIONS = 4,
            NEWTON_MIN_SLOPE = 0.001,
            SUBDIVISION_PRECISION = 0.0000001,
            SUBDIVISION_MAX_ITERATIONS = 10,
            kSplineTableSize = 11,
            kSampleStepSize = 1.0 / (kSplineTableSize - 1.0),
            float32ArraySupported = "Float32Array" in window;

        /* Must contain four arguments. */
        if (arguments.length !== 4) {
            return false;
        }

        /* Arguments must be numbers. */
        for (var i = 0; i < 4; ++i) {
            if (typeof arguments[i] !== "number" || isNaN(arguments[i]) || !isFinite(arguments[i])) {
                return false;
            }
        }

        /* X values must be in the [0, 1] range. */
        mX1 = Math.min(mX1, 1);
        mX2 = Math.min(mX2, 1);
        mX1 = Math.max(mX1, 0);
        mX2 = Math.max(mX2, 0);

        var mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);

        function A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }
        function B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }
        function C (aA1)      { return 3.0 * aA1; }

        function calcBezier (aT, aA1, aA2) {
            return ((A(aA1, aA2)*aT + B(aA1, aA2))*aT + C(aA1))*aT;
        }

        function getSlope (aT, aA1, aA2) {
            return 3.0 * A(aA1, aA2)*aT*aT + 2.0 * B(aA1, aA2) * aT + C(aA1);
        }

        function newtonRaphsonIterate (aX, aGuessT) {
            for (var i = 0; i < NEWTON_ITERATIONS; ++i) {
                var currentSlope = getSlope(aGuessT, mX1, mX2);

                if (currentSlope === 0.0) return aGuessT;

                var currentX = calcBezier(aGuessT, mX1, mX2) - aX;
                aGuessT -= currentX / currentSlope;
            }

            return aGuessT;
        }

        function calcSampleValues () {
            for (var i = 0; i < kSplineTableSize; ++i) {
                mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);
            }
        }

        function binarySubdivide (aX, aA, aB) {
            var currentX, currentT, i = 0;

            do {
                currentT = aA + (aB - aA) / 2.0;
                currentX = calcBezier(currentT, mX1, mX2) - aX;
                if (currentX > 0.0) {
                  aB = currentT;
                } else {
                  aA = currentT;
                }
            } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);

            return currentT;
        }

        function getTForX (aX) {
            var intervalStart = 0.0,
                currentSample = 1,
                lastSample = kSplineTableSize - 1;

            for (; currentSample != lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {
                intervalStart += kSampleStepSize;
            }

            --currentSample;

            var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample+1] - mSampleValues[currentSample]),
                guessForT = intervalStart + dist * kSampleStepSize,
                initialSlope = getSlope(guessForT, mX1, mX2);

            if (initialSlope >= NEWTON_MIN_SLOPE) {
                return newtonRaphsonIterate(aX, guessForT);
            } else if (initialSlope == 0.0) {
                return guessForT;
            } else {
                return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize);
            }
        }

        var _precomputed = false;

        function precompute() {
            _precomputed = true;
            if (mX1 != mY1 || mX2 != mY2) calcSampleValues();
        }

        var f = function (aX) {
            if (!_precomputed) precompute();
            if (mX1 === mY1 && mX2 === mY2) return aX;
            if (aX === 0) return 0;
            if (aX === 1) return 1;

            return calcBezier(getTForX(aX), mY1, mY2);
        };

        f.getControlPoints = function() { return [{ x: mX1, y: mY1 }, { x: mX2, y: mY2 }]; };

        var str = "generateBezier(" + [mX1, mY1, mX2, mY2] + ")";
        f.toString = function () { return str; };

        return f;
    }

    /* Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */
    /* Given a tension, friction, and duration, a simulation at 60FPS will first run without a defined duration in order to calculate the full path. A second pass
       then adjusts the time delta -- using the relation between actual time and duration -- to calculate the path for the duration-constrained animation. */
    var generateSpringRK4 = (function () {
        function springAccelerationForState (state) {
            return (-state.tension * state.x) - (state.friction * state.v);
        }

        function springEvaluateStateWithDerivative (initialState, dt, derivative) {
            var state = {
                x: initialState.x + derivative.dx * dt,
                v: initialState.v + derivative.dv * dt,
                tension: initialState.tension,
                friction: initialState.friction
            };

            return { dx: state.v, dv: springAccelerationForState(state) };
        }

        function springIntegrateState (state, dt) {
            var a = {
                    dx: state.v,
                    dv: springAccelerationForState(state)
                },
                b = springEvaluateStateWithDerivative(state, dt * 0.5, a),
                c = springEvaluateStateWithDerivative(state, dt * 0.5, b),
                d = springEvaluateStateWithDerivative(state, dt, c),
                dxdt = 1.0 / 6.0 * (a.dx + 2.0 * (b.dx + c.dx) + d.dx),
                dvdt = 1.0 / 6.0 * (a.dv + 2.0 * (b.dv + c.dv) + d.dv);

            state.x = state.x + dxdt * dt;
            state.v = state.v + dvdt * dt;

            return state;
        }

        return function springRK4Factory (tension, friction, duration) {

            var initState = {
                    x: -1,
                    v: 0,
                    tension: null,
                    friction: null
                },
                path = [0],
                time_lapsed = 0,
                tolerance = 1 / 10000,
                DT = 16 / 1000,
                have_duration, dt, last_state;

            tension = parseFloat(tension) || 500;
            friction = parseFloat(friction) || 20;
            duration = duration || null;

            initState.tension = tension;
            initState.friction = friction;

            have_duration = duration !== null;

            /* Calculate the actual time it takes for this animation to complete with the provided conditions. */
            if (have_duration) {
                /* Run the simulation without a duration. */
                time_lapsed = springRK4Factory(tension, friction);
                /* Compute the adjusted time delta. */
                dt = time_lapsed / duration * DT;
            } else {
                dt = DT;
            }

            while (true) {
                /* Next/step function .*/
                last_state = springIntegrateState(last_state || initState, dt);
                /* Store the position. */
                path.push(1 + last_state.x);
                time_lapsed += 16;
                /* If the change threshold is reached, break. */
                if (!(Math.abs(last_state.x) > tolerance && Math.abs(last_state.v) > tolerance)) {
                    break;
                }
            }

            /* If duration is not defined, return the actual time required for completing this animation. Otherwise, return a closure that holds the
               computed path and returns a snapshot of the position according to a given percentComplete. */
            return !have_duration ? time_lapsed : function(percentComplete) { return path[ (percentComplete * (path.length - 1)) | 0 ]; };
        };
    }());

    /* jQuery easings. */
    Velocity.Easings = {
        linear: function(p) { return p; },
        swing: function(p) { return 0.5 - Math.cos( p * Math.PI ) / 2 },
        /* Bonus "spring" easing, which is a less exaggerated version of easeInOutElastic. */
        spring: function(p) { return 1 - (Math.cos(p * 4.5 * Math.PI) * Math.exp(-p * 6)); }
    };

    /* CSS3 and Robert Penner easings. */
    $.each(
        [
            [ "ease", [ 0.25, 0.1, 0.25, 1.0 ] ],
            [ "ease-in", [ 0.42, 0.0, 1.00, 1.0 ] ],
            [ "ease-out", [ 0.00, 0.0, 0.58, 1.0 ] ],
            [ "ease-in-out", [ 0.42, 0.0, 0.58, 1.0 ] ],
            [ "easeInSine", [ 0.47, 0, 0.745, 0.715 ] ],
            [ "easeOutSine", [ 0.39, 0.575, 0.565, 1 ] ],
            [ "easeInOutSine", [ 0.445, 0.05, 0.55, 0.95 ] ],
            [ "easeInQuad", [ 0.55, 0.085, 0.68, 0.53 ] ],
            [ "easeOutQuad", [ 0.25, 0.46, 0.45, 0.94 ] ],
            [ "easeInOutQuad", [ 0.455, 0.03, 0.515, 0.955 ] ],
            [ "easeInCubic", [ 0.55, 0.055, 0.675, 0.19 ] ],
            [ "easeOutCubic", [ 0.215, 0.61, 0.355, 1 ] ],
            [ "easeInOutCubic", [ 0.645, 0.045, 0.355, 1 ] ],
            [ "easeInQuart", [ 0.895, 0.03, 0.685, 0.22 ] ],
            [ "easeOutQuart", [ 0.165, 0.84, 0.44, 1 ] ],
            [ "easeInOutQuart", [ 0.77, 0, 0.175, 1 ] ],
            [ "easeInQuint", [ 0.755, 0.05, 0.855, 0.06 ] ],
            [ "easeOutQuint", [ 0.23, 1, 0.32, 1 ] ],
            [ "easeInOutQuint", [ 0.86, 0, 0.07, 1 ] ],
            [ "easeInExpo", [ 0.95, 0.05, 0.795, 0.035 ] ],
            [ "easeOutExpo", [ 0.19, 1, 0.22, 1 ] ],
            [ "easeInOutExpo", [ 1, 0, 0, 1 ] ],
            [ "easeInCirc", [ 0.6, 0.04, 0.98, 0.335 ] ],
            [ "easeOutCirc", [ 0.075, 0.82, 0.165, 1 ] ],
            [ "easeInOutCirc", [ 0.785, 0.135, 0.15, 0.86 ] ]
        ], function(i, easingArray) {
            Velocity.Easings[easingArray[0]] = generateBezier.apply(null, easingArray[1]);
        });

    /* Determine the appropriate easing type given an easing input. */
    function getEasing(value, duration) {
        var easing = value;

        /* The easing option can either be a string that references a pre-registered easing,
           or it can be a two-/four-item array of integers to be converted into a bezier/spring function. */
        if (Type.isString(value)) {
            /* Ensure that the easing has been assigned to jQuery's Velocity.Easings object. */
            if (!Velocity.Easings[value]) {
                easing = false;
            }
        } else if (Type.isArray(value) && value.length === 1) {
            easing = generateStep.apply(null, value);
        } else if (Type.isArray(value) && value.length === 2) {
            /* springRK4 must be passed the animation's duration. */
            /* Note: If the springRK4 array contains non-numbers, generateSpringRK4() returns an easing
               function generated with default tension and friction values. */
            easing = generateSpringRK4.apply(null, value.concat([ duration ]));
        } else if (Type.isArray(value) && value.length === 4) {
            /* Note: If the bezier array contains non-numbers, generateBezier() returns false. */
            easing = generateBezier.apply(null, value);
        } else {
            easing = false;
        }

        /* Revert to the Velocity-wide default easing type, or fall back to "swing" (which is also jQuery's default)
           if the Velocity-wide default has been incorrectly modified. */
        if (easing === false) {
            if (Velocity.Easings[Velocity.defaults.easing]) {
                easing = Velocity.defaults.easing;
            } else {
                easing = EASING_DEFAULT;
            }
        }

        return easing;
    }

    /*****************
        CSS Stack
    *****************/

    /* The CSS object is a highly condensed and performant CSS stack that fully replaces jQuery's.
       It handles the validation, getting, and setting of both standard CSS properties and CSS property hooks. */
    /* Note: A "CSS" shorthand is aliased so that our code is easier to read. */
    var CSS = Velocity.CSS = {

        /*************
            RegEx
        *************/

        RegEx: {
            isHex: /^#([A-f\d]{3}){1,2}$/i,
            /* Unwrap a property value's surrounding text, e.g. "rgba(4, 3, 2, 1)" ==> "4, 3, 2, 1" and "rect(4px 3px 2px 1px)" ==> "4px 3px 2px 1px". */
            valueUnwrap: /^[A-z]+\((.*)\)$/i,
            wrappedValueAlreadyExtracted: /[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,
            /* Split a multi-value property into an array of subvalues, e.g. "rgba(4, 3, 2, 1) 4px 3px 2px 1px" ==> [ "rgba(4, 3, 2, 1)", "4px", "3px", "2px", "1px" ]. */
            valueSplit: /([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/ig
        },

        /************
            Lists
        ************/

        Lists: {
            colors: [ "fill", "stroke", "stopColor", "color", "backgroundColor", "borderColor", "borderTopColor", "borderRightColor", "borderBottomColor", "borderLeftColor", "outlineColor" ],
            transformsBase: [ "translateX", "translateY", "scale", "scaleX", "scaleY", "skewX", "skewY", "rotateZ" ],
            transforms3D: [ "transformPerspective", "translateZ", "scaleZ", "rotateX", "rotateY" ]
        },

        /************
            Hooks
        ************/

        /* Hooks allow a subproperty (e.g. "boxShadowBlur") of a compound-value CSS property
           (e.g. "boxShadow: X Y Blur Spread Color") to be animated as if it were a discrete property. */
        /* Note: Beyond enabling fine-grained property animation, hooking is necessary since Velocity only
           tweens properties with single numeric values; unlike CSS transitions, Velocity does not interpolate compound-values. */
        Hooks: {
            /********************
                Registration
            ********************/

            /* Templates are a concise way of indicating which subproperties must be individually registered for each compound-value CSS property. */
            /* Each template consists of the compound-value's base name, its constituent subproperty names, and those subproperties' default values. */
            templates: {
                "textShadow": [ "Color X Y Blur", "black 0px 0px 0px" ],
                /* Todo: Add support for inset boxShadows. (webkit places it last whereas IE places it first.) */
                "boxShadow": [ "Color X Y Blur Spread", "black 0px 0px 0px 0px" ],
                "clip": [ "Top Right Bottom Left", "0px 0px 0px 0px" ],
                "backgroundPosition": [ "X Y", "0% 0%" ],
                "transformOrigin": [ "X Y Z", "50% 50% 0px" ],
                "perspectiveOrigin": [ "X Y", "50% 50%" ]
            },

            /* A "registered" hook is one that has been converted from its template form into a live,
               tweenable property. It contains data to associate it with its root property. */
            registered: {
                /* Note: A registered hook looks like this ==> textShadowBlur: [ "textShadow", 3 ],
                   which consists of the subproperty's name, the associated root property's name,
                   and the subproperty's position in the root's value. */
            },
            /* Convert the templates into individual hooks then append them to the registered object above. */
            register: function () {
                /* Color hooks registration: Colors are defaulted to white -- as opposed to black -- since colors that are
                   currently set to "transparent" default to their respective template below when color-animated,
                   and white is typically a closer match to transparent than black is. An exception is made for text ("color"),
                   which is almost always set closer to black than white. */
                for (var i = 0; i < CSS.Lists.colors.length; i++) {
                    var rgbComponents = (CSS.Lists.colors[i] === "color") ? "0 0 0 1" : "255 255 255 1";
                    CSS.Hooks.templates[CSS.Lists.colors[i]] = [ "Red Green Blue Alpha", rgbComponents ];
                }

                var rootProperty,
                    hookTemplate,
                    hookNames;

                /* In IE, color values inside compound-value properties are positioned at the end the value instead of at the beginning.
                   Thus, we re-arrange the templates accordingly. */
                if (IE) {
                    for (rootProperty in CSS.Hooks.templates) {
                        hookTemplate = CSS.Hooks.templates[rootProperty];
                        hookNames = hookTemplate[0].split(" ");

                        var defaultValues = hookTemplate[1].match(CSS.RegEx.valueSplit);

                        if (hookNames[0] === "Color") {
                            /* Reposition both the hook's name and its default value to the end of their respective strings. */
                            hookNames.push(hookNames.shift());
                            defaultValues.push(defaultValues.shift());

                            /* Replace the existing template for the hook's root property. */
                            CSS.Hooks.templates[rootProperty] = [ hookNames.join(" "), defaultValues.join(" ") ];
                        }
                    }
                }

                /* Hook registration. */
                for (rootProperty in CSS.Hooks.templates) {
                    hookTemplate = CSS.Hooks.templates[rootProperty];
                    hookNames = hookTemplate[0].split(" ");

                    for (var i in hookNames) {
                        var fullHookName = rootProperty + hookNames[i],
                            hookPosition = i;

                        /* For each hook, register its full name (e.g. textShadowBlur) with its root property (e.g. textShadow)
                           and the hook's position in its template's default value string. */
                        CSS.Hooks.registered[fullHookName] = [ rootProperty, hookPosition ];
                    }
                }
            },

            /*****************************
               Injection and Extraction
            *****************************/

            /* Look up the root property associated with the hook (e.g. return "textShadow" for "textShadowBlur"). */
            /* Since a hook cannot be set directly (the browser won't recognize it), style updating for hooks is routed through the hook's root property. */
            getRoot: function (property) {
                var hookData = CSS.Hooks.registered[property];

                if (hookData) {
                    return hookData[0];
                } else {
                    /* If there was no hook match, return the property name untouched. */
                    return property;
                }
            },
            /* Convert any rootPropertyValue, null or otherwise, into a space-delimited list of hook values so that
               the targeted hook can be injected or extracted at its standard position. */
            cleanRootPropertyValue: function(rootProperty, rootPropertyValue) {
                /* If the rootPropertyValue is wrapped with "rgb()", "clip()", etc., remove the wrapping to normalize the value before manipulation. */
                if (CSS.RegEx.valueUnwrap.test(rootPropertyValue)) {
                    rootPropertyValue = rootPropertyValue.match(CSS.RegEx.valueUnwrap)[1];
                }

                /* If rootPropertyValue is a CSS null-value (from which there's inherently no hook value to extract),
                   default to the root's default value as defined in CSS.Hooks.templates. */
                /* Note: CSS null-values include "none", "auto", and "transparent". They must be converted into their
                   zero-values (e.g. textShadow: "none" ==> textShadow: "0px 0px 0px black") for hook manipulation to proceed. */
                if (CSS.Values.isCSSNullValue(rootPropertyValue)) {
                    rootPropertyValue = CSS.Hooks.templates[rootProperty][1];
                }

                return rootPropertyValue;
            },
            /* Extracted the hook's value from its root property's value. This is used to get the starting value of an animating hook. */
            extractValue: function (fullHookName, rootPropertyValue) {
                var hookData = CSS.Hooks.registered[fullHookName];

                if (hookData) {
                    var hookRoot = hookData[0],
                        hookPosition = hookData[1];

                    rootPropertyValue = CSS.Hooks.cleanRootPropertyValue(hookRoot, rootPropertyValue);

                    /* Split rootPropertyValue into its constituent hook values then grab the desired hook at its standard position. */
                    return rootPropertyValue.toString().match(CSS.RegEx.valueSplit)[hookPosition];
                } else {
                    /* If the provided fullHookName isn't a registered hook, return the rootPropertyValue that was passed in. */
                    return rootPropertyValue;
                }
            },
            /* Inject the hook's value into its root property's value. This is used to piece back together the root property
               once Velocity has updated one of its individually hooked values through tweening. */
            injectValue: function (fullHookName, hookValue, rootPropertyValue) {
                var hookData = CSS.Hooks.registered[fullHookName];

                if (hookData) {
                    var hookRoot = hookData[0],
                        hookPosition = hookData[1],
                        rootPropertyValueParts,
                        rootPropertyValueUpdated;

                    rootPropertyValue = CSS.Hooks.cleanRootPropertyValue(hookRoot, rootPropertyValue);

                    /* Split rootPropertyValue into its individual hook values, replace the targeted value with hookValue,
                       then reconstruct the rootPropertyValue string. */
                    rootPropertyValueParts = rootPropertyValue.toString().match(CSS.RegEx.valueSplit);
                    rootPropertyValueParts[hookPosition] = hookValue;
                    rootPropertyValueUpdated = rootPropertyValueParts.join(" ");

                    return rootPropertyValueUpdated;
                } else {
                    /* If the provided fullHookName isn't a registered hook, return the rootPropertyValue that was passed in. */
                    return rootPropertyValue;
                }
            }
        },

        /*******************
           Normalizations
        *******************/

        /* Normalizations standardize CSS property manipulation by pollyfilling browser-specific implementations (e.g. opacity)
           and reformatting special properties (e.g. clip, rgba) to look like standard ones. */
        Normalizations: {
            /* Normalizations are passed a normalization target (either the property's name, its extracted value, or its injected value),
               the targeted element (which may need to be queried), and the targeted property value. */
            registered: {
                clip: function (type, element, propertyValue) {
                    switch (type) {
                        case "name":
                            return "clip";
                        /* Clip needs to be unwrapped and stripped of its commas during extraction. */
                        case "extract":
                            var extracted;

                            /* If Velocity also extracted this value, skip extraction. */
                            if (CSS.RegEx.wrappedValueAlreadyExtracted.test(propertyValue)) {
                                extracted = propertyValue;
                            } else {
                                /* Remove the "rect()" wrapper. */
                                extracted = propertyValue.toString().match(CSS.RegEx.valueUnwrap);

                                /* Strip off commas. */
                                extracted = extracted ? extracted[1].replace(/,(\s+)?/g, " ") : propertyValue;
                            }

                            return extracted;
                        /* Clip needs to be re-wrapped during injection. */
                        case "inject":
                            return "rect(" + propertyValue + ")";
                    }
                },

                blur: function(type, element, propertyValue) {
                    switch (type) {
                        case "name":
                            return "-webkit-filter";
                        case "extract":
                            var extracted = parseFloat(propertyValue);

                            /* If extracted is NaN, meaning the value isn't already extracted. */
                            if (!(extracted || extracted === 0)) {
                                var blurComponent = propertyValue.toString().match(/blur\(([0-9]+[A-z]+)\)/i);

                                /* If the filter string had a blur component, return just the blur value and unit type. */
                                if (blurComponent) {
                                    extracted = blurComponent[1];
                                /* If the component doesn't exist, default blur to 0. */
                                } else {
                                    extracted = 0;
                                }
                            }

                            return extracted;
                        /* Blur needs to be re-wrapped during injection. */
                        case "inject":
                            /* For the blur effect to be fully de-applied, it needs to be set to "none" instead of 0. */
                            if (!parseFloat(propertyValue)) {
                                return "none";
                            } else {
                                return "blur(" + propertyValue + ")";
                            }
                    }
                },

                /* <=IE8 do not support the standard opacity property. They use filter:alpha(opacity=INT) instead. */
                opacity: function (type, element, propertyValue) {
                    if (IE <= 8) {
                        switch (type) {
                            case "name":
                                return "filter";
                            case "extract":
                                /* <=IE8 return a "filter" value of "alpha(opacity=\d{1,3})".
                                   Extract the value and convert it to a decimal value to match the standard CSS opacity property's formatting. */
                                var extracted = propertyValue.toString().match(/alpha\(opacity=(.*)\)/i);

                                if (extracted) {
                                    /* Convert to decimal value. */
                                    propertyValue = extracted[1] / 100;
                                } else {
                                    /* When extracting opacity, default to 1 since a null value means opacity hasn't been set. */
                                    propertyValue = 1;
                                }

                                return propertyValue;
                            case "inject":
                                /* Opacified elements are required to have their zoom property set to a non-zero value. */
                                element.style.zoom = 1;

                                /* Setting the filter property on elements with certain font property combinations can result in a
                                   highly unappealing ultra-bolding effect. There's no way to remedy this throughout a tween, but dropping the
                                   value altogether (when opacity hits 1) at leasts ensures that the glitch is gone post-tweening. */
                                if (parseFloat(propertyValue) >= 1) {
                                    return "";
                                } else {
                                  /* As per the filter property's spec, convert the decimal value to a whole number and wrap the value. */
                                  return "alpha(opacity=" + parseInt(parseFloat(propertyValue) * 100, 10) + ")";
                                }
                        }
                    /* With all other browsers, normalization is not required; return the same values that were passed in. */
                    } else {
                        switch (type) {
                            case "name":
                                return "opacity";
                            case "extract":
                                return propertyValue;
                            case "inject":
                                return propertyValue;
                        }
                    }
                }
            },

            /*****************************
                Batched Registrations
            *****************************/

            /* Note: Batched normalizations extend the CSS.Normalizations.registered object. */
            register: function () {

                /*****************
                    Transforms
                *****************/

                /* Transforms are the subproperties contained by the CSS "transform" property. Transforms must undergo normalization
                   so that they can be referenced in a properties map by their individual names. */
                /* Note: When transforms are "set", they are actually assigned to a per-element transformCache. When all transform
                   setting is complete complete, CSS.flushTransformCache() must be manually called to flush the values to the DOM.
                   Transform setting is batched in this way to improve performance: the transform style only needs to be updated
                   once when multiple transform subproperties are being animated simultaneously. */
                /* Note: IE9 and Android Gingerbread have support for 2D -- but not 3D -- transforms. Since animating unsupported
                   transform properties results in the browser ignoring the *entire* transform string, we prevent these 3D values
                   from being normalized for these browsers so that tweening skips these properties altogether
                   (since it will ignore them as being unsupported by the browser.) */
                if (!(IE <= 9) && !Velocity.State.isGingerbread) {
                    /* Note: Since the standalone CSS "perspective" property and the CSS transform "perspective" subproperty
                    share the same name, the latter is given a unique token within Velocity: "transformPerspective". */
                    CSS.Lists.transformsBase = CSS.Lists.transformsBase.concat(CSS.Lists.transforms3D);
                }

                for (var i = 0; i < CSS.Lists.transformsBase.length; i++) {
                    /* Wrap the dynamically generated normalization function in a new scope so that transformName's value is
                    paired with its respective function. (Otherwise, all functions would take the final for loop's transformName.) */
                    (function() {
                        var transformName = CSS.Lists.transformsBase[i];

                        CSS.Normalizations.registered[transformName] = function (type, element, propertyValue) {
                            switch (type) {
                                /* The normalized property name is the parent "transform" property -- the property that is actually set in CSS. */
                                case "name":
                                    return "transform";
                                /* Transform values are cached onto a per-element transformCache object. */
                                case "extract":
                                    /* If this transform has yet to be assigned a value, return its null value. */
                                    if (Data(element) === undefined || Data(element).transformCache[transformName] === undefined) {
                                        /* Scale CSS.Lists.transformsBase default to 1 whereas all other transform properties default to 0. */
                                        return /^scale/i.test(transformName) ? 1 : 0;
                                    /* When transform values are set, they are wrapped in parentheses as per the CSS spec.
                                       Thus, when extracting their values (for tween calculations), we strip off the parentheses. */
                                    } else {
                                        return Data(element).transformCache[transformName].replace(/[()]/g, "");
                                    }
                                case "inject":
                                    var invalid = false;

                                    /* If an individual transform property contains an unsupported unit type, the browser ignores the *entire* transform property.
                                       Thus, protect users from themselves by skipping setting for transform values supplied with invalid unit types. */
                                    /* Switch on the base transform type; ignore the axis by removing the last letter from the transform's name. */
                                    switch (transformName.substr(0, transformName.length - 1)) {
                                        /* Whitelist unit types for each transform. */
                                        case "translate":
                                            invalid = !/(%|px|em|rem|vw|vh|\d)$/i.test(propertyValue);
                                            break;
                                        /* Since an axis-free "scale" property is supported as well, a little hack is used here to detect it by chopping off its last letter. */
                                        case "scal":
                                        case "scale":
                                            /* Chrome on Android has a bug in which scaled elements blur if their initial scale
                                               value is below 1 (which can happen with forcefeeding). Thus, we detect a yet-unset scale property
                                               and ensure that its first value is always 1. More info: http://stackoverflow.com/questions/10417890/css3-animations-with-transform-causes-blurred-elements-on-webkit/10417962#10417962 */
                                            if (Velocity.State.isAndroid && Data(element).transformCache[transformName] === undefined && propertyValue < 1) {
                                                propertyValue = 1;
                                            }

                                            invalid = !/(\d)$/i.test(propertyValue);
                                            break;
                                        case "skew":
                                            invalid = !/(deg|\d)$/i.test(propertyValue);
                                            break;
                                        case "rotate":
                                            invalid = !/(deg|\d)$/i.test(propertyValue);
                                            break;
                                    }

                                    if (!invalid) {
                                        /* As per the CSS spec, wrap the value in parentheses. */
                                        Data(element).transformCache[transformName] = "(" + propertyValue + ")";
                                    }

                                    /* Although the value is set on the transformCache object, return the newly-updated value for the calling code to process as normal. */
                                    return Data(element).transformCache[transformName];
                            }
                        };
                    })();
                }

                /*************
                    Colors
                *************/

                /* Since Velocity only animates a single numeric value per property, color animation is achieved by hooking the individual RGBA components of CSS color properties.
                   Accordingly, color values must be normalized (e.g. "#ff0000", "red", and "rgb(255, 0, 0)" ==> "255 0 0 1") so that their components can be injected/extracted by CSS.Hooks logic. */
                for (var i = 0; i < CSS.Lists.colors.length; i++) {
                    /* Wrap the dynamically generated normalization function in a new scope so that colorName's value is paired with its respective function.
                       (Otherwise, all functions would take the final for loop's colorName.) */
                    (function () {
                        var colorName = CSS.Lists.colors[i];

                        /* Note: In IE<=8, which support rgb but not rgba, color properties are reverted to rgb by stripping off the alpha component. */
                        CSS.Normalizations.registered[colorName] = function(type, element, propertyValue) {
                            switch (type) {
                                case "name":
                                    return colorName;
                                /* Convert all color values into the rgb format. (Old IE can return hex values and color names instead of rgb/rgba.) */
                                case "extract":
                                    var extracted;

                                    /* If the color is already in its hookable form (e.g. "255 255 255 1") due to having been previously extracted, skip extraction. */
                                    if (CSS.RegEx.wrappedValueAlreadyExtracted.test(propertyValue)) {
                                        extracted = propertyValue;
                                    } else {
                                        var converted,
                                            colorNames = {
                                                black: "rgb(0, 0, 0)",
                                                blue: "rgb(0, 0, 255)",
                                                gray: "rgb(128, 128, 128)",
                                                green: "rgb(0, 128, 0)",
                                                red: "rgb(255, 0, 0)",
                                                white: "rgb(255, 255, 255)"
                                            };

                                        /* Convert color names to rgb. */
                                        if (/^[A-z]+$/i.test(propertyValue)) {
                                            if (colorNames[propertyValue] !== undefined) {
                                                converted = colorNames[propertyValue]
                                            } else {
                                                /* If an unmatched color name is provided, default to black. */
                                                converted = colorNames.black;
                                            }
                                        /* Convert hex values to rgb. */
                                        } else if (CSS.RegEx.isHex.test(propertyValue)) {
                                            converted = "rgb(" + CSS.Values.hexToRgb(propertyValue).join(" ") + ")";
                                        /* If the provided color doesn't match any of the accepted color formats, default to black. */
                                        } else if (!(/^rgba?\(/i.test(propertyValue))) {
                                            converted = colorNames.black;
                                        }

                                        /* Remove the surrounding "rgb/rgba()" string then replace commas with spaces and strip
                                           repeated spaces (in case the value included spaces to begin with). */
                                        extracted = (converted || propertyValue).toString().match(CSS.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g, " ");
                                    }

                                    /* So long as this isn't <=IE8, add a fourth (alpha) component if it's missing and default it to 1 (visible). */
                                    if (!(IE <= 8) && extracted.split(" ").length === 3) {
                                        extracted += " 1";
                                    }

                                    return extracted;
                                case "inject":
                                    /* If this is IE<=8 and an alpha component exists, strip it off. */
                                    if (IE <= 8) {
                                        if (propertyValue.split(" ").length === 4) {
                                            propertyValue = propertyValue.split(/\s+/).slice(0, 3).join(" ");
                                        }
                                    /* Otherwise, add a fourth (alpha) component if it's missing and default it to 1 (visible). */
                                    } else if (propertyValue.split(" ").length === 3) {
                                        propertyValue += " 1";
                                    }

                                    /* Re-insert the browser-appropriate wrapper("rgb/rgba()"), insert commas, and strip off decimal units
                                       on all values but the fourth (R, G, and B only accept whole numbers). */
                                    return (IE <= 8 ? "rgb" : "rgba") + "(" + propertyValue.replace(/\s+/g, ",").replace(/\.(\d)+(?=,)/g, "") + ")";
                            }
                        };
                    })();
                }
            }
        },

        /************************
           CSS Property Names
        ************************/

        Names: {
            /* Camelcase a property name into its JavaScript notation (e.g. "background-color" ==> "backgroundColor").
               Camelcasing is used to normalize property names between and across calls. */
            camelCase: function (property) {
                return property.replace(/-(\w)/g, function (match, subMatch) {
                    return subMatch.toUpperCase();
                });
            },

            /* For SVG elements, some properties (namely, dimensional ones) are GET/SET via the element's HTML attributes (instead of via CSS styles). */
            SVGAttribute: function (property) {
                var SVGAttributes = "width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";

                /* Certain browsers require an SVG transform to be applied as an attribute. (Otherwise, application via CSS is preferable due to 3D support.) */
                if (IE || (Velocity.State.isAndroid && !Velocity.State.isChrome)) {
                    SVGAttributes += "|transform";
                }

                return new RegExp("^(" + SVGAttributes + ")$", "i").test(property);
            },

            /* Determine whether a property should be set with a vendor prefix. */
            /* If a prefixed version of the property exists, return it. Otherwise, return the original property name.
               If the property is not at all supported by the browser, return a false flag. */
            prefixCheck: function (property) {
                /* If this property has already been checked, return the cached value. */
                if (Velocity.State.prefixMatches[property]) {
                    return [ Velocity.State.prefixMatches[property], true ];
                } else {
                    var vendors = [ "", "Webkit", "Moz", "ms", "O" ];

                    for (var i = 0, vendorsLength = vendors.length; i < vendorsLength; i++) {
                        var propertyPrefixed;

                        if (i === 0) {
                            propertyPrefixed = property;
                        } else {
                            /* Capitalize the first letter of the property to conform to JavaScript vendor prefix notation (e.g. webkitFilter). */
                            propertyPrefixed = vendors[i] + property.replace(/^\w/, function(match) { return match.toUpperCase(); });
                        }

                        /* Check if the browser supports this property as prefixed. */
                        if (Type.isString(Velocity.State.prefixElement.style[propertyPrefixed])) {
                            /* Cache the match. */
                            Velocity.State.prefixMatches[property] = propertyPrefixed;

                            return [ propertyPrefixed, true ];
                        }
                    }

                    /* If the browser doesn't support this property in any form, include a false flag so that the caller can decide how to proceed. */
                    return [ property, false ];
                }
            }
        },

        /************************
           CSS Property Values
        ************************/

        Values: {
            /* Hex to RGB conversion. Copyright Tim Down: http://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb */
            hexToRgb: function (hex) {
                var shortformRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i,
                    longformRegex = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,
                    rgbParts;

                hex = hex.replace(shortformRegex, function (m, r, g, b) {
                    return r + r + g + g + b + b;
                });

                rgbParts = longformRegex.exec(hex);

                return rgbParts ? [ parseInt(rgbParts[1], 16), parseInt(rgbParts[2], 16), parseInt(rgbParts[3], 16) ] : [ 0, 0, 0 ];
            },

            isCSSNullValue: function (value) {
                /* The browser defaults CSS values that have not been set to either 0 or one of several possible null-value strings.
                   Thus, we check for both falsiness and these special strings. */
                /* Null-value checking is performed to default the special strings to 0 (for the sake of tweening) or their hook
                   templates as defined as CSS.Hooks (for the sake of hook injection/extraction). */
                /* Note: Chrome returns "rgba(0, 0, 0, 0)" for an undefined color whereas IE returns "transparent". */
                return (value == 0 || /^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(value));
            },

            /* Retrieve a property's default unit type. Used for assigning a unit type when one is not supplied by the user. */
            getUnitType: function (property) {
                if (/^(rotate|skew)/i.test(property)) {
                    return "deg";
                } else if (/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(property)) {
                    /* The above properties are unitless. */
                    return "";
                } else {
                    /* Default to px for all other properties. */
                    return "px";
                }
            },

            /* HTML elements default to an associated display type when they're not set to display:none. */
            /* Note: This function is used for correctly setting the non-"none" display value in certain Velocity redirects, such as fadeIn/Out. */
            getDisplayType: function (element) {
                var tagName = element && element.tagName.toString().toLowerCase();

                if (/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(tagName)) {
                    return "inline";
                } else if (/^(li)$/i.test(tagName)) {
                    return "list-item";
                } else if (/^(tr)$/i.test(tagName)) {
                    return "table-row";
                /* Default to "block" when no match is found. */
                } else {
                    return "block";
                }
            },

            /* The class add/remove functions are used to temporarily apply a "velocity-animating" class to elements while they're animating. */
            addClass: function (element, className) {
                if (element.classList) {
                    element.classList.add(className);
                } else {
                    element.className += (element.className.length ? " " : "") + className;
                }
            },

            removeClass: function (element, className) {
                if (element.classList) {
                    element.classList.remove(className);
                } else {
                    element.className = element.className.toString().replace(new RegExp("(^|\\s)" + className.split(" ").join("|") + "(\\s|$)", "gi"), " ");
                }
            }
        },

        /****************************
           Style Getting & Setting
        ****************************/

        /* The singular getPropertyValue, which routes the logic for all normalizations, hooks, and standard CSS properties. */
        getPropertyValue: function (element, property, rootPropertyValue, forceStyleLookup) {
            /* Get an element's computed property value. */
            /* Note: Retrieving the value of a CSS property cannot simply be performed by checking an element's
               style attribute (which only reflects user-defined values). Instead, the browser must be queried for a property's
               *computed* value. You can read more about getComputedStyle here: https://developer.mozilla.org/en/docs/Web/API/window.getComputedStyle */
            function computePropertyValue (element, property) {
                /* When box-sizing isn't set to border-box, height and width style values are incorrectly computed when an
                   element's scrollbars are visible (which expands the element's dimensions). Thus, we defer to the more accurate
                   offsetHeight/Width property, which includes the total dimensions for interior, border, padding, and scrollbar.
                   We subtract border and padding to get the sum of interior + scrollbar. */
                var computedValue = 0;

                /* IE<=8 doesn't support window.getComputedStyle, thus we defer to jQuery, which has an extensive array
                   of hacks to accurately retrieve IE8 property values. Re-implementing that logic here is not worth bloating the
                   codebase for a dying browser. The performance repercussions of using jQuery here are minimal since
                   Velocity is optimized to rarely (and sometimes never) query the DOM. Further, the $.css() codepath isn't that slow. */
                if (IE <= 8) {
                    computedValue = $.css(element, property); /* GET */
                /* All other browsers support getComputedStyle. The returned live object reference is cached onto its
                   associated element so that it does not need to be refetched upon every GET. */
                } else {
                    /* Browsers do not return height and width values for elements that are set to display:"none". Thus, we temporarily
                       toggle display to the element type's default value. */
                    var toggleDisplay = false;

                    if (/^(width|height)$/.test(property) && CSS.getPropertyValue(element, "display") === 0) {
                        toggleDisplay = true;
                        CSS.setPropertyValue(element, "display", CSS.Values.getDisplayType(element));
                    }

                    function revertDisplay () {
                        if (toggleDisplay) {
                            CSS.setPropertyValue(element, "display", "none");
                        }
                    }

                    if (!forceStyleLookup) {
                        if (property === "height" && CSS.getPropertyValue(element, "boxSizing").toString().toLowerCase() !== "border-box") {
                            var contentBoxHeight = element.offsetHeight - (parseFloat(CSS.getPropertyValue(element, "borderTopWidth")) || 0) - (parseFloat(CSS.getPropertyValue(element, "borderBottomWidth")) || 0) - (parseFloat(CSS.getPropertyValue(element, "paddingTop")) || 0) - (parseFloat(CSS.getPropertyValue(element, "paddingBottom")) || 0);
                            revertDisplay();

                            return contentBoxHeight;
                        } else if (property === "width" && CSS.getPropertyValue(element, "boxSizing").toString().toLowerCase() !== "border-box") {
                            var contentBoxWidth = element.offsetWidth - (parseFloat(CSS.getPropertyValue(element, "borderLeftWidth")) || 0) - (parseFloat(CSS.getPropertyValue(element, "borderRightWidth")) || 0) - (parseFloat(CSS.getPropertyValue(element, "paddingLeft")) || 0) - (parseFloat(CSS.getPropertyValue(element, "paddingRight")) || 0);
                            revertDisplay();

                            return contentBoxWidth;
                        }
                    }

                    var computedStyle;

                    /* For elements that Velocity hasn't been called on directly (e.g. when Velocity queries the DOM on behalf
                       of a parent of an element its animating), perform a direct getComputedStyle lookup since the object isn't cached. */
                    if (Data(element) === undefined) {
                        computedStyle = window.getComputedStyle(element, null); /* GET */
                    /* If the computedStyle object has yet to be cached, do so now. */
                    } else if (!Data(element).computedStyle) {
                        computedStyle = Data(element).computedStyle = window.getComputedStyle(element, null); /* GET */
                    /* If computedStyle is cached, use it. */
                    } else {
                        computedStyle = Data(element).computedStyle;
                    }

                    /* IE and Firefox do not return a value for the generic borderColor -- they only return individual values for each border side's color.
                       As a polyfill for querying individual border side colors, just return the top border's color. */
                    if ((IE || Velocity.State.isFirefox) && property === "borderColor") {
                        property = "borderTopColor";
                    }

                    /* IE9 has a bug in which the "filter" property must be accessed from computedStyle using the getPropertyValue method
                       instead of a direct property lookup. The getPropertyValue method is slower than a direct lookup, which is why we avoid it by default. */
                    if (IE === 9 && property === "filter") {
                        computedValue = computedStyle.getPropertyValue(property); /* GET */
                    } else {
                        computedValue = computedStyle[property];
                    }

                    /* Fall back to the property's style value (if defined) when computedValue returns nothing,
                       which can happen when the element hasn't been painted. */
                    if (computedValue === "" || computedValue === null) {
                        computedValue = element.style[property];
                    }

                    revertDisplay();
                }

                /* For top, right, bottom, and left (TRBL) values that are set to "auto" on elements of "fixed" or "absolute" position,
                   defer to jQuery for converting "auto" to a numeric value. (For elements with a "static" or "relative" position, "auto" has the same
                   effect as being set to 0, so no conversion is necessary.) */
                /* An example of why numeric conversion is necessary: When an element with "position:absolute" has an untouched "left"
                   property, which reverts to "auto", left's value is 0 relative to its parent element, but is often non-zero relative
                   to its *containing* (not parent) element, which is the nearest "position:relative" ancestor or the viewport (and always the viewport in the case of "position:fixed"). */
                if (computedValue === "auto" && /^(top|right|bottom|left)$/i.test(property)) {
                    var position = computePropertyValue(element, "position"); /* GET */

                    /* For absolute positioning, jQuery's $.position() only returns values for top and left;
                       right and bottom will have their "auto" value reverted to 0. */
                    /* Note: A jQuery object must be created here since jQuery doesn't have a low-level alias for $.position().
                       Not a big deal since we're currently in a GET batch anyway. */
                    if (position === "fixed" || (position === "absolute" && /top|left/i.test(property))) {
                        /* Note: jQuery strips the pixel unit from its returned values; we re-add it here to conform with computePropertyValue's behavior. */
                        computedValue = $(element).position()[property] + "px"; /* GET */
                    }
                }

                return computedValue;
            }

            var propertyValue;

            /* If this is a hooked property (e.g. "clipLeft" instead of the root property of "clip"),
               extract the hook's value from a normalized rootPropertyValue using CSS.Hooks.extractValue(). */
            if (CSS.Hooks.registered[property]) {
                var hook = property,
                    hookRoot = CSS.Hooks.getRoot(hook);

                /* If a cached rootPropertyValue wasn't passed in (which Velocity always attempts to do in order to avoid requerying the DOM),
                   query the DOM for the root property's value. */
                if (rootPropertyValue === undefined) {
                    /* Since the browser is now being directly queried, use the official post-prefixing property name for this lookup. */
                    rootPropertyValue = CSS.getPropertyValue(element, CSS.Names.prefixCheck(hookRoot)[0]); /* GET */
                }

                /* If this root has a normalization registered, peform the associated normalization extraction. */
                if (CSS.Normalizations.registered[hookRoot]) {
                    rootPropertyValue = CSS.Normalizations.registered[hookRoot]("extract", element, rootPropertyValue);
                }

                /* Extract the hook's value. */
                propertyValue = CSS.Hooks.extractValue(hook, rootPropertyValue);

            /* If this is a normalized property (e.g. "opacity" becomes "filter" in <=IE8) or "translateX" becomes "transform"),
               normalize the property's name and value, and handle the special case of transforms. */
            /* Note: Normalizing a property is mutually exclusive from hooking a property since hook-extracted values are strictly
               numerical and therefore do not require normalization extraction. */
            } else if (CSS.Normalizations.registered[property]) {
                var normalizedPropertyName,
                    normalizedPropertyValue;

                normalizedPropertyName = CSS.Normalizations.registered[property]("name", element);

                /* Transform values are calculated via normalization extraction (see below), which checks against the element's transformCache.
                   At no point do transform GETs ever actually query the DOM; initial stylesheet values are never processed.
                   This is because parsing 3D transform matrices is not always accurate and would bloat our codebase;
                   thus, normalization extraction defaults initial transform values to their zero-values (e.g. 1 for scaleX and 0 for translateX). */
                if (normalizedPropertyName !== "transform") {
                    normalizedPropertyValue = computePropertyValue(element, CSS.Names.prefixCheck(normalizedPropertyName)[0]); /* GET */

                    /* If the value is a CSS null-value and this property has a hook template, use that zero-value template so that hooks can be extracted from it. */
                    if (CSS.Values.isCSSNullValue(normalizedPropertyValue) && CSS.Hooks.templates[property]) {
                        normalizedPropertyValue = CSS.Hooks.templates[property][1];
                    }
                }

                propertyValue = CSS.Normalizations.registered[property]("extract", element, normalizedPropertyValue);
            }

            /* If a (numeric) value wasn't produced via hook extraction or normalization, query the DOM. */
            if (!/^[\d-]/.test(propertyValue)) {
                /* For SVG elements, dimensional properties (which SVGAttribute() detects) are tweened via
                   their HTML attribute values instead of their CSS style values. */
                if (Data(element) && Data(element).isSVG && CSS.Names.SVGAttribute(property)) {
                    /* Since the height/width attribute values must be set manually, they don't reflect computed values.
                       Thus, we use use getBBox() to ensure we always get values for elements with undefined height/width attributes. */
                    if (/^(height|width)$/i.test(property)) {
                        propertyValue = element.getBBox()[property];
                    /* Otherwise, access the attribute value directly. */
                    } else {
                        propertyValue = element.getAttribute(property);
                    }
                } else {
                    propertyValue = computePropertyValue(element, CSS.Names.prefixCheck(property)[0]); /* GET */
                }
            }

            /* Since property lookups are for animation purposes (which entails computing the numeric delta between start and end values),
               convert CSS null-values to an integer of value 0. */
            if (CSS.Values.isCSSNullValue(propertyValue)) {
                propertyValue = 0;
            }

            if (Velocity.debug >= 2) console.log("Get " + property + ": " + propertyValue);

            return propertyValue;
        },

        /* The singular setPropertyValue, which routes the logic for all normalizations, hooks, and standard CSS properties. */
        setPropertyValue: function(element, property, propertyValue, rootPropertyValue, scrollData) {
            var propertyName = property;

            /* In order to be subjected to call options and element queueing, scroll animation is routed through Velocity as if it were a standard CSS property. */
            if (property === "scroll") {
                /* If a container option is present, scroll the container instead of the browser window. */
                if (scrollData.container) {
                    scrollData.container["scroll" + scrollData.direction] = propertyValue;
                /* Otherwise, Velocity defaults to scrolling the browser window. */
                } else {
                    if (scrollData.direction === "Left") {
                        window.scrollTo(propertyValue, scrollData.alternateValue);
                    } else {
                        window.scrollTo(scrollData.alternateValue, propertyValue);
                    }
                }
            } else {
                /* Transforms (translateX, rotateZ, etc.) are applied to a per-element transformCache object, which is manually flushed via flushTransformCache().
                   Thus, for now, we merely cache transforms being SET. */
                if (CSS.Normalizations.registered[property] && CSS.Normalizations.registered[property]("name", element) === "transform") {
                    /* Perform a normalization injection. */
                    /* Note: The normalization logic handles the transformCache updating. */
                    CSS.Normalizations.registered[property]("inject", element, propertyValue);

                    propertyName = "transform";
                    propertyValue = Data(element).transformCache[property];
                } else {
                    /* Inject hooks. */
                    if (CSS.Hooks.registered[property]) {
                        var hookName = property,
                            hookRoot = CSS.Hooks.getRoot(property);

                        /* If a cached rootPropertyValue was not provided, query the DOM for the hookRoot's current value. */
                        rootPropertyValue = rootPropertyValue || CSS.getPropertyValue(element, hookRoot); /* GET */

                        propertyValue = CSS.Hooks.injectValue(hookName, propertyValue, rootPropertyValue);
                        property = hookRoot;
                    }

                    /* Normalize names and values. */
                    if (CSS.Normalizations.registered[property]) {
                        propertyValue = CSS.Normalizations.registered[property]("inject", element, propertyValue);
                        property = CSS.Normalizations.registered[property]("name", element);
                    }

                    /* Assign the appropriate vendor prefix before performing an official style update. */
                    propertyName = CSS.Names.prefixCheck(property)[0];

                    /* A try/catch is used for IE<=8, which throws an error when "invalid" CSS values are set, e.g. a negative width.
                       Try/catch is avoided for other browsers since it incurs a performance overhead. */
                    if (IE <= 8) {
                        try {
                            element.style[propertyName] = propertyValue;
                        } catch (error) { if (Velocity.debug) console.log("Browser does not support [" + propertyValue + "] for [" + propertyName + "]"); }
                    /* SVG elements have their dimensional properties (width, height, x, y, cx, etc.) applied directly as attributes instead of as styles. */
                    /* Note: IE8 does not support SVG elements, so it's okay that we skip it for SVG animation. */
                    } else if (Data(element) && Data(element).isSVG && CSS.Names.SVGAttribute(property)) {
                        /* Note: For SVG attributes, vendor-prefixed property names are never used. */
                        /* Note: Not all CSS properties can be animated via attributes, but the browser won't throw an error for unsupported properties. */
                        element.setAttribute(property, propertyValue);
                    } else {
                        element.style[propertyName] = propertyValue;
                    }

                    if (Velocity.debug >= 2) console.log("Set " + property + " (" + propertyName + "): " + propertyValue);
                }
            }

            /* Return the normalized property name and value in case the caller wants to know how these values were modified before being applied to the DOM. */
            return [ propertyName, propertyValue ];
        },

        /* To increase performance by batching transform updates into a single SET, transforms are not directly applied to an element until flushTransformCache() is called. */
        /* Note: Velocity applies transform properties in the same order that they are chronogically introduced to the element's CSS styles. */
        flushTransformCache: function(element) {
            var transformString = "";

            /* Certain browsers require that SVG transforms be applied as an attribute. However, the SVG transform attribute takes a modified version of CSS's transform string
               (units are dropped and, except for skewX/Y, subproperties are merged into their master property -- e.g. scaleX and scaleY are merged into scale(X Y). */
            if ((IE || (Velocity.State.isAndroid && !Velocity.State.isChrome)) && Data(element).isSVG) {
                /* Since transform values are stored in their parentheses-wrapped form, we use a helper function to strip out their numeric values.
                   Further, SVG transform properties only take unitless (representing pixels) values, so it's okay that parseFloat() strips the unit suffixed to the float value. */
                function getTransformFloat (transformProperty) {
                    return parseFloat(CSS.getPropertyValue(element, transformProperty));
                }

                /* Create an object to organize all the transforms that we'll apply to the SVG element. To keep the logic simple,
                   we process *all* transform properties -- even those that may not be explicitly applied (since they default to their zero-values anyway). */
                var SVGTransforms = {
                    translate: [ getTransformFloat("translateX"), getTransformFloat("translateY") ],
                    skewX: [ getTransformFloat("skewX") ], skewY: [ getTransformFloat("skewY") ],
                    /* If the scale property is set (non-1), use that value for the scaleX and scaleY values
                       (this behavior mimics the result of animating all these properties at once on HTML elements). */
                    scale: getTransformFloat("scale") !== 1 ? [ getTransformFloat("scale"), getTransformFloat("scale") ] : [ getTransformFloat("scaleX"), getTransformFloat("scaleY") ],
                    /* Note: SVG's rotate transform takes three values: rotation degrees followed by the X and Y values
                       defining the rotation's origin point. We ignore the origin values (default them to 0). */
                    rotate: [ getTransformFloat("rotateZ"), 0, 0 ]
                };

                /* Iterate through the transform properties in the user-defined property map order.
                   (This mimics the behavior of non-SVG transform animation.) */
                $.each(Data(element).transformCache, function(transformName) {
                    /* Except for with skewX/Y, revert the axis-specific transform subproperties to their axis-free master
                       properties so that they match up with SVG's accepted transform properties. */
                    if (/^translate/i.test(transformName)) {
                        transformName = "translate";
                    } else if (/^scale/i.test(transformName)) {
                        transformName = "scale";
                    } else if (/^rotate/i.test(transformName)) {
                        transformName = "rotate";
                    }

                    /* Check that we haven't yet deleted the property from the SVGTransforms container. */
                    if (SVGTransforms[transformName]) {
                        /* Append the transform property in the SVG-supported transform format. As per the spec, surround the space-delimited values in parentheses. */
                        transformString += transformName + "(" + SVGTransforms[transformName].join(" ") + ")" + " ";

                        /* After processing an SVG transform property, delete it from the SVGTransforms container so we don't
                           re-insert the same master property if we encounter another one of its axis-specific properties. */
                        delete SVGTransforms[transformName];
                    }
                });
            } else {
                var transformValue,
                    perspective;

                /* Transform properties are stored as members of the transformCache object. Concatenate all the members into a string. */
                $.each(Data(element).transformCache, function(transformName) {
                    transformValue = Data(element).transformCache[transformName];

                    /* Transform's perspective subproperty must be set first in order to take effect. Store it temporarily. */
                    if (transformName === "transformPerspective") {
                        perspective = transformValue;
                        return true;
                    }

                    /* IE9 only supports one rotation type, rotateZ, which it refers to as "rotate". */
                    if (IE === 9 && transformName === "rotateZ") {
                        transformName = "rotate";
                    }

                    transformString += transformName + transformValue + " ";
                });

                /* If present, set the perspective subproperty first. */
                if (perspective) {
                    transformString = "perspective" + perspective + " " + transformString;
                }
            }

            CSS.setPropertyValue(element, "transform", transformString);
        }
    };

    /* Register hooks and normalizations. */
    CSS.Hooks.register();
    CSS.Normalizations.register();

    /* Allow hook setting in the same fashion as jQuery's $.css(). */
    Velocity.hook = function (elements, arg2, arg3) {
        var value = undefined;

        elements = sanitizeElements(elements);

        $.each(elements, function(i, element) {
            /* Initialize Velocity's per-element data cache if this element hasn't previously been animated. */
            if (Data(element) === undefined) {
                Velocity.init(element);
            }

            /* Get property value. If an element set was passed in, only return the value for the first element. */
            if (arg3 === undefined) {
                if (value === undefined) {
                    value = Velocity.CSS.getPropertyValue(element, arg2);
                }
            /* Set property value. */
            } else {
                /* sPV returns an array of the normalized propertyName/propertyValue pair used to update the DOM. */
                var adjustedSet = Velocity.CSS.setPropertyValue(element, arg2, arg3);

                /* Transform properties don't automatically set. They have to be flushed to the DOM. */
                if (adjustedSet[0] === "transform") {
                    Velocity.CSS.flushTransformCache(element);
                }

                value = adjustedSet;
            }
        });

        return value;
    };

    /*****************
        Animation
    *****************/

    var animate = function() {

        /******************
            Call Chain
        ******************/

        /* Logic for determining what to return to the call stack when exiting out of Velocity. */
        function getChain () {
            /* If we are using the utility function, attempt to return this call's promise. If no promise library was detected,
               default to null instead of returning the targeted elements so that utility function's return value is standardized. */
            if (isUtility) {
                return promiseData.promise || null;
            /* Otherwise, if we're using $.fn, return the jQuery-/Zepto-wrapped element set. */
            } else {
                return elementsWrapped;
            }
        }

        /*************************
           Arguments Assignment
        *************************/

        /* To allow for expressive CoffeeScript code, Velocity supports an alternative syntax in which "properties" and "options"
           objects are defined on a container object that's passed in as Velocity's sole argument. */
        /* Note: Some browsers automatically populate arguments with a "properties" object. We detect it by checking for its default "names" property. */
        var syntacticSugar = (arguments[0] && (($.isPlainObject(arguments[0].properties) && !arguments[0].properties.names) || Type.isString(arguments[0].properties))),
            /* Whether Velocity was called via the utility function (as opposed to on a jQuery/Zepto object). */
            isUtility,
            /* When Velocity is called via the utility function ($.Velocity()/Velocity()), elements are explicitly
               passed in as the first parameter. Thus, argument positioning varies. We normalize them here. */
            elementsWrapped,
            argumentIndex;

        var elements,
            propertiesMap,
            options;

        /* Detect jQuery/Zepto elements being animated via the $.fn method. */
        if (Type.isWrapped(this)) {
            isUtility = false;

            argumentIndex = 0;
            elements = this;
            elementsWrapped = this;
        /* Otherwise, raw elements are being animated via the utility function. */
        } else {
            isUtility = true;

            argumentIndex = 1;
            elements = syntacticSugar ? arguments[0].elements : arguments[0];
        }

        elements = sanitizeElements(elements);

        if (!elements) {
            return;
        }

        if (syntacticSugar) {
            propertiesMap = arguments[0].properties;
            options = arguments[0].options;
        } else {
            propertiesMap = arguments[argumentIndex];
            options = arguments[argumentIndex + 1];
        }

        /* The length of the element set (in the form of a nodeList or an array of elements) is defaulted to 1 in case a
           single raw DOM element is passed in (which doesn't contain a length property). */
        var elementsLength = elements.length,
            elementsIndex = 0;

        /***************************
            Argument Overloading
        ***************************/

        /* Support is included for jQuery's argument overloading: $.animate(propertyMap [, duration] [, easing] [, complete]).
           Overloading is detected by checking for the absence of an object being passed into options. */
        /* Note: The stop action does not accept animation options, and is therefore excluded from this check. */
        if (propertiesMap !== "stop" && !$.isPlainObject(options)) {
            /* The utility function shifts all arguments one position to the right, so we adjust for that offset. */
            var startingArgumentPosition = argumentIndex + 1;

            options = {};

            /* Iterate through all options arguments */
            for (var i = startingArgumentPosition; i < arguments.length; i++) {
                /* Treat a number as a duration. Parse it out. */
                /* Note: The following RegEx will return true if passed an array with a number as its first item.
                   Thus, arrays are skipped from this check. */
                if (!Type.isArray(arguments[i]) && (/^(fast|normal|slow)$/i.test(arguments[i]) || /^\d/.test(arguments[i]))) {
                    options.duration = arguments[i];
                /* Treat strings and arrays as easings. */
                } else if (Type.isString(arguments[i]) || Type.isArray(arguments[i])) {
                    options.easing = arguments[i];
                /* Treat a function as a complete callback. */
                } else if (Type.isFunction(arguments[i])) {
                    options.complete = arguments[i];
                }
            }
        }

        /***************
            Promises
        ***************/

        var promiseData = {
                promise: null,
                resolver: null,
                rejecter: null
            };

        /* If this call was made via the utility function (which is the default method of invocation when jQuery/Zepto are not being used), and if
           promise support was detected, create a promise object for this call and store references to its resolver and rejecter methods. The resolve
           method is used when a call completes naturally or is prematurely stopped by the user. In both cases, completeCall() handles the associated
           call cleanup and promise resolving logic. The reject method is used when an invalid set of arguments is passed into a Velocity call. */
        /* Note: Velocity employs a call-based queueing architecture, which means that stopping an animating element actually stops the full call that
           triggered it -- not that one element exclusively. Similarly, there is one promise per call, and all elements targeted by a Velocity call are
           grouped together for the purposes of resolving and rejecting a promise. */
        if (isUtility && Velocity.Promise) {
            promiseData.promise = new Velocity.Promise(function (resolve, reject) {
                promiseData.resolver = resolve;
                promiseData.rejecter = reject;
            });
        }

        /*********************
           Action Detection
        *********************/

        /* Velocity's behavior is categorized into "actions": Elements can either be specially scrolled into view,
           or they can be started, stopped, or reversed. If a literal or referenced properties map is passed in as Velocity's
           first argument, the associated action is "start". Alternatively, "scroll", "reverse", or "stop" can be passed in instead of a properties map. */
        var action;

        switch (propertiesMap) {
            case "scroll":
                action = "scroll";
                break;

            case "reverse":
                action = "reverse";
                break;

            case "stop":
                /*******************
                    Action: Stop
                *******************/

                /* Clear the currently-active delay on each targeted element. */
                $.each(elements, function(i, element) {
                    if (Data(element) && Data(element).delayTimer) {
                        /* Stop the timer from triggering its cached next() function. */
                        clearTimeout(Data(element).delayTimer.setTimeout);

                        /* Manually call the next() function so that the subsequent queue items can progress. */
                        if (Data(element).delayTimer.next) {
                            Data(element).delayTimer.next();
                        }

                        delete Data(element).delayTimer;
                    }
                });

                var callsToStop = [];

                /* When the stop action is triggered, the elements' currently active call is immediately stopped. The active call might have
                   been applied to multiple elements, in which case all of the call's elements will be subjected to stopping. When an element
                   is stopped, the next item in its animation queue is immediately triggered. */
                /* An additional argument may be passed in to clear an element's remaining queued calls. Either true (which defaults to the "fx" queue)
                   or a custom queue string can be passed in. */
                /* Note: The stop command runs prior to Queueing since its behavior is intended to take effect *immediately*,
                   regardless of the element's current queue state. */

                /* Iterate through every active call. */
                $.each(Velocity.State.calls, function(i, activeCall) {
                    /* Inactive calls are set to false by the logic inside completeCall(). Skip them. */
                    if (activeCall) {
                        /* Iterate through the active call's targeted elements. */
                        $.each(activeCall[1], function(k, activeElement) {
                            var queueName = Type.isString(options) ? options : "";

                            if (options !== undefined && activeCall[2].queue !== queueName) {
                                return true;
                            }

                            /* Iterate through the calls targeted by the stop command. */
                            $.each(elements, function(l, element) {
                                /* Check that this call was applied to the target element. */
                                if (element === activeElement) {
                                    /* Optionally clear the remaining queued calls. */
                                    if (options !== undefined) {
                                        /* Iterate through the items in the element's queue. */
                                        $.each($.queue(element, queueName), function(_, item) {
                                            /* The queue array can contain an "inprogress" string, which we skip. */
                                            if (Type.isFunction(item)) {
                                                /* Pass the item's callback a flag indicating that we want to abort from the queue call.
                                                   (Specifically, the queue will resolve the call's associated promise then abort.)  */
                                                item(null, true);
                                            }
                                        });

                                        /* Clearing the $.queue() array is achieved by resetting it to []. */
                                        $.queue(element, queueName, []);
                                    }

                                    if (Data(element) && queueName === "") {
                                        /* Since "reverse" uses cached start values (the previous call's endValues),
                                           these values must be changed to reflect the final value that the elements were actually tweened to. */
                                        $.each(Data(element).tweensContainer, function(m, activeTween) {
                                            activeTween.endValue = activeTween.currentValue;
                                        });
                                    }

                                    callsToStop.push(i);
                                }
                            });
                        });
                    }
                });

                /* Prematurely call completeCall() on each matched active call, passing an additional flag to indicate
                   that the complete callback and display:none setting should be skipped since we're completing prematurely. */
                $.each(callsToStop, function(i, j) {
                    completeCall(j, true);
                });

                if (promiseData.promise) {
                    /* Immediately resolve the promise associated with this stop call since stop runs synchronously. */
                    promiseData.resolver(elements);
                }

                /* Since we're stopping, and not proceeding with queueing, exit out of Velocity. */
                return getChain();

            default:
                /* Treat a non-empty plain object as a literal properties map. */
                if ($.isPlainObject(propertiesMap) && !Type.isEmptyObject(propertiesMap)) {
                    action = "start";

                /****************
                    Redirects
                ****************/

                /* Check if a string matches a registered redirect (see Redirects above). */
                } else if (Type.isString(propertiesMap) && Velocity.Redirects[propertiesMap]) {
                    var opts = $.extend({}, options),
                        durationOriginal = opts.duration,
                        delayOriginal = opts.delay || 0;

                    /* If the backwards option was passed in, reverse the element set so that elements animate from the last to the first. */
                    if (opts.backwards === true) {
                        elements = $.extend(true, [], elements).reverse();
                    }

                    /* Individually trigger the redirect for each element in the set to prevent users from having to handle iteration logic in their redirect. */
                    $.each(elements, function(elementIndex, element) {
                        /* If the stagger option was passed in, successively delay each element by the stagger value (in ms). Retain the original delay value. */
                        if (parseFloat(opts.stagger)) {
                            opts.delay = delayOriginal + (parseFloat(opts.stagger) * elementIndex);
                        } else if (Type.isFunction(opts.stagger)) {
                            opts.delay = delayOriginal + opts.stagger.call(element, elementIndex, elementsLength);
                        }

                        /* If the drag option was passed in, successively increase/decrease (depending on the presense of opts.backwards)
                           the duration of each element's animation, using floors to prevent producing very short durations. */
                        if (opts.drag) {
                            /* Default the duration of UI pack effects (callouts and transitions) to 1000ms instead of the usual default duration of 400ms. */
                            opts.duration = parseFloat(durationOriginal) || (/^(callout|transition)/.test(propertiesMap) ? 1000 : DURATION_DEFAULT);

                            /* For each element, take the greater duration of: A) animation completion percentage relative to the original duration,
                               B) 75% of the original duration, or C) a 200ms fallback (in case duration is already set to a low value).
                               The end result is a baseline of 75% of the redirect's duration that increases/decreases as the end of the element set is approached. */
                            opts.duration = Math.max(opts.duration * (opts.backwards ? 1 - elementIndex/elementsLength : (elementIndex + 1) / elementsLength), opts.duration * 0.75, 200);
                        }

                        /* Pass in the call's opts object so that the redirect can optionally extend it. It defaults to an empty object instead of null to
                           reduce the opts checking logic required inside the redirect. */
                        Velocity.Redirects[propertiesMap].call(element, element, opts || {}, elementIndex, elementsLength, elements, promiseData.promise ? promiseData : undefined);
                    });

                    /* Since the animation logic resides within the redirect's own code, abort the remainder of this call.
                       (The performance overhead up to this point is virtually non-existant.) */
                    /* Note: The jQuery call chain is kept intact by returning the complete element set. */
                    return getChain();
                } else {
                    var abortError = "Velocity: First argument (" + propertiesMap + ") was not a property map, a known action, or a registered redirect. Aborting.";

                    if (promiseData.promise) {
                        promiseData.rejecter(new Error(abortError));
                    } else {
                        console.log(abortError);
                    }

                    return getChain();
                }
        }

        /**************************
            Call-Wide Variables
        **************************/

        /* A container for CSS unit conversion ratios (e.g. %, rem, and em ==> px) that is used to cache ratios across all elements
           being animated in a single Velocity call. Calculating unit ratios necessitates DOM querying and updating, and is therefore
           avoided (via caching) wherever possible. This container is call-wide instead of page-wide to avoid the risk of using stale
           conversion metrics across Velocity animations that are not immediately consecutively chained. */
        var callUnitConversionData = {
                lastParent: null,
                lastPosition: null,
                lastFontSize: null,
                lastPercentToPxWidth: null,
                lastPercentToPxHeight: null,
                lastEmToPx: null,
                remToPx: null,
                vwToPx: null,
                vhToPx: null
            };

        /* A container for all the ensuing tween data and metadata associated with this call. This container gets pushed to the page-wide
           Velocity.State.calls array that is processed during animation ticking. */
        var call = [];

        /************************
           Element Processing
        ************************/

        /* Element processing consists of three parts -- data processing that cannot go stale and data processing that *can* go stale (i.e. third-party style modifications):
           1) Pre-Queueing: Element-wide variables, including the element's data storage, are instantiated. Call options are prepared. If triggered, the Stop action is executed.
           2) Queueing: The logic that runs once this call has reached its point of execution in the element's $.queue() stack. Most logic is placed here to avoid risking it becoming stale.
           3) Pushing: Consolidation of the tween data followed by its push onto the global in-progress calls container.
        */

        function processElement () {

            /*************************
               Part I: Pre-Queueing
            *************************/

            /***************************
               Element-Wide Variables
            ***************************/

            var element = this,
                /* The runtime opts object is the extension of the current call's options and Velocity's page-wide option defaults. */
                opts = $.extend({}, Velocity.defaults, options),
                /* A container for the processed data associated with each property in the propertyMap.
                   (Each property in the map produces its own "tween".) */
                tweensContainer = {},
                elementUnitConversionData;

            /******************
               Element Init
            ******************/

            if (Data(element) === undefined) {
                Velocity.init(element);
            }

            /******************
               Option: Delay
            ******************/

            /* Since queue:false doesn't respect the item's existing queue, we avoid injecting its delay here (it's set later on). */
            /* Note: Velocity rolls its own delay function since jQuery doesn't have a utility alias for $.fn.delay()
               (and thus requires jQuery element creation, which we avoid since its overhead includes DOM querying). */
            if (parseFloat(opts.delay) && opts.queue !== false) {
                $.queue(element, opts.queue, function(next) {
                    /* This is a flag used to indicate to the upcoming completeCall() function that this queue entry was initiated by Velocity. See completeCall() for further details. */
                    Velocity.velocityQueueEntryFlag = true;

                    /* The ensuing queue item (which is assigned to the "next" argument that $.queue() automatically passes in) will be triggered after a setTimeout delay.
                       The setTimeout is stored so that it can be subjected to clearTimeout() if this animation is prematurely stopped via Velocity's "stop" command. */
                    Data(element).delayTimer = {
                        setTimeout: setTimeout(next, parseFloat(opts.delay)),
                        next: next
                    };
                });
            }

            /*********************
               Option: Duration
            *********************/

            /* Support for jQuery's named durations. */
            switch (opts.duration.toString().toLowerCase()) {
                case "fast":
                    opts.duration = 200;
                    break;

                case "normal":
                    opts.duration = DURATION_DEFAULT;
                    break;

                case "slow":
                    opts.duration = 600;
                    break;

                default:
                    /* Remove the potential "ms" suffix and default to 1 if the user is attempting to set a duration of 0 (in order to produce an immediate style change). */
                    opts.duration = parseFloat(opts.duration) || 1;
            }

            /************************
               Global Option: Mock
            ************************/

            if (Velocity.mock !== false) {
                /* In mock mode, all animations are forced to 1ms so that they occur immediately upon the next rAF tick.
                   Alternatively, a multiplier can be passed in to time remap all delays and durations. */
                if (Velocity.mock === true) {
                    opts.duration = opts.delay = 1;
                } else {
                    opts.duration *= parseFloat(Velocity.mock) || 1;
                    opts.delay *= parseFloat(Velocity.mock) || 1;
                }
            }

            /*******************
               Option: Easing
            *******************/

            opts.easing = getEasing(opts.easing, opts.duration);

            /**********************
               Option: Callbacks
            **********************/

            /* Callbacks must functions. Otherwise, default to null. */
            if (opts.begin && !Type.isFunction(opts.begin)) {
                opts.begin = null;
            }

            if (opts.progress && !Type.isFunction(opts.progress)) {
                opts.progress = null;
            }

            if (opts.complete && !Type.isFunction(opts.complete)) {
                opts.complete = null;
            }

            /*********************************
               Option: Display & Visibility
            *********************************/

            /* Refer to Velocity's documentation (VelocityJS.org/#displayAndVisibility) for a description of the display and visibility options' behavior. */
            /* Note: We strictly check for undefined instead of falsiness because display accepts an empty string value. */
            if (opts.display !== undefined && opts.display !== null) {
                opts.display = opts.display.toString().toLowerCase();

                /* Users can pass in a special "auto" value to instruct Velocity to set the element to its default display value. */
                if (opts.display === "auto") {
                    opts.display = Velocity.CSS.Values.getDisplayType(element);
                }
            }

            if (opts.visibility !== undefined && opts.visibility !== null) {
                opts.visibility = opts.visibility.toString().toLowerCase();
            }

            /**********************
               Option: mobileHA
            **********************/

            /* When set to true, and if this is a mobile device, mobileHA automatically enables hardware acceleration (via a null transform hack)
               on animating elements. HA is removed from the element at the completion of its animation. */
            /* Note: Android Gingerbread doesn't support HA. If a null transform hack (mobileHA) is in fact set, it will prevent other tranform subproperties from taking effect. */
            /* Note: You can read more about the use of mobileHA in Velocity's documentation: VelocityJS.org/#mobileHA. */
            opts.mobileHA = (opts.mobileHA && Velocity.State.isMobile && !Velocity.State.isGingerbread);

            /***********************
               Part II: Queueing
            ***********************/

            /* When a set of elements is targeted by a Velocity call, the set is broken up and each element has the current Velocity call individually queued onto it.
               In this way, each element's existing queue is respected; some elements may already be animating and accordingly should not have this current Velocity call triggered immediately. */
            /* In each queue, tween data is processed for each animating property then pushed onto the call-wide calls array. When the last element in the set has had its tweens processed,
               the call array is pushed to Velocity.State.calls for live processing by the requestAnimationFrame tick. */
            function buildQueue (next) {

                /*******************
                   Option: Begin
                *******************/

                /* The begin callback is fired once per call -- not once per elemenet -- and is passed the full raw DOM element set as both its context and its first argument. */
                if (opts.begin && elementsIndex === 0) {
                    /* We throw callbacks in a setTimeout so that thrown errors don't halt the execution of Velocity itself. */
                    try {
                        opts.begin.call(elements, elements);
                    } catch (error) {
                        setTimeout(function() { throw error; }, 1);
                    }
                }

                /*****************************************
                   Tween Data Construction (for Scroll)
                *****************************************/

                /* Note: In order to be subjected to chaining and animation options, scroll's tweening is routed through Velocity as if it were a standard CSS property animation. */
                if (action === "scroll") {
                    /* The scroll action uniquely takes an optional "offset" option -- specified in pixels -- that offsets the targeted scroll position. */
                    var scrollDirection = (/^x$/i.test(opts.axis) ? "Left" : "Top"),
                        scrollOffset = parseFloat(opts.offset) || 0,
                        scrollPositionCurrent,
                        scrollPositionCurrentAlternate,
                        scrollPositionEnd;

                    /* Scroll also uniquely takes an optional "container" option, which indicates the parent element that should be scrolled --
                       as opposed to the browser window itself. This is useful for scrolling toward an element that's inside an overflowing parent element. */
                    if (opts.container) {
                        /* Ensure that either a jQuery object or a raw DOM element was passed in. */
                        if (Type.isWrapped(opts.container) || Type.isNode(opts.container)) {
                            /* Extract the raw DOM element from the jQuery wrapper. */
                            opts.container = opts.container[0] || opts.container;
                            /* Note: Unlike other properties in Velocity, the browser's scroll position is never cached since it so frequently changes
                               (due to the user's natural interaction with the page). */
                            scrollPositionCurrent = opts.container["scroll" + scrollDirection]; /* GET */

                            /* $.position() values are relative to the container's currently viewable area (without taking into account the container's true dimensions
                               -- say, for example, if the container was not overflowing). Thus, the scroll end value is the sum of the child element's position *and*
                               the scroll container's current scroll position. */
                            /* Note: jQuery does not offer a utility alias for $.position(), so we have to incur jQuery object conversion here.
                               This syncs up with an ensuing batch of GETs, so it fortunately does not trigger layout thrashing. */
                            scrollPositionEnd = (scrollPositionCurrent + $(element).position()[scrollDirection.toLowerCase()]) + scrollOffset; /* GET */
                        /* If a value other than a jQuery object or a raw DOM element was passed in, default to null so that this option is ignored. */
                        } else {
                            opts.container = null;
                        }
                    } else {
                        /* If the window itself is being scrolled -- not a containing element -- perform a live scroll position lookup using
                           the appropriate cached property names (which differ based on browser type). */
                        scrollPositionCurrent = Velocity.State.scrollAnchor[Velocity.State["scrollProperty" + scrollDirection]]; /* GET */
                        /* When scrolling the browser window, cache the alternate axis's current value since window.scrollTo() doesn't let us change only one value at a time. */
                        scrollPositionCurrentAlternate = Velocity.State.scrollAnchor[Velocity.State["scrollProperty" + (scrollDirection === "Left" ? "Top" : "Left")]]; /* GET */

                        /* Unlike $.position(), $.offset() values are relative to the browser window's true dimensions -- not merely its currently viewable area --
                           and therefore end values do not need to be compounded onto current values. */
                        scrollPositionEnd = $(element).offset()[scrollDirection.toLowerCase()] + scrollOffset; /* GET */
                    }

                    /* Since there's only one format that scroll's associated tweensContainer can take, we create it manually. */
                    tweensContainer = {
                        scroll: {
                            rootPropertyValue: false,
                            startValue: scrollPositionCurrent,
                            currentValue: scrollPositionCurrent,
                            endValue: scrollPositionEnd,
                            unitType: "",
                            easing: opts.easing,
                            scrollData: {
                                container: opts.container,
                                direction: scrollDirection,
                                alternateValue: scrollPositionCurrentAlternate
                            }
                        },
                        element: element
                    };

                    if (Velocity.debug) console.log("tweensContainer (scroll): ", tweensContainer.scroll, element);

                /******************************************
                   Tween Data Construction (for Reverse)
                ******************************************/

                /* Reverse acts like a "start" action in that a property map is animated toward. The only difference is
                   that the property map used for reverse is the inverse of the map used in the previous call. Thus, we manipulate
                   the previous call to construct our new map: use the previous map's end values as our new map's start values. Copy over all other data. */
                /* Note: Reverse can be directly called via the "reverse" parameter, or it can be indirectly triggered via the loop option. (Loops are composed of multiple reverses.) */
                /* Note: Reverse calls do not need to be consecutively chained onto a currently-animating element in order to operate on cached values;
                   there is no harm to reverse being called on a potentially stale data cache since reverse's behavior is simply defined
                   as reverting to the element's values as they were prior to the previous *Velocity* call. */
                } else if (action === "reverse") {
                    /* Abort if there is no prior animation data to reverse to. */
                    if (!Data(element).tweensContainer) {
                        /* Dequeue the element so that this queue entry releases itself immediately, allowing subsequent queue entries to run. */
                        $.dequeue(element, opts.queue);

                        return;
                    } else {
                        /*********************
                           Options Parsing
                        *********************/

                        /* If the element was hidden via the display option in the previous call,
                           revert display to "auto" prior to reversal so that the element is visible again. */
                        if (Data(element).opts.display === "none") {
                            Data(element).opts.display = "auto";
                        }

                        if (Data(element).opts.visibility === "hidden") {
                            Data(element).opts.visibility = "visible";
                        }

                        /* If the loop option was set in the previous call, disable it so that "reverse" calls aren't recursively generated.
                           Further, remove the previous call's callback options; typically, users do not want these to be refired. */
                        Data(element).opts.loop = false;
                        Data(element).opts.begin = null;
                        Data(element).opts.complete = null;

                        /* Since we're extending an opts object that has already been extended with the defaults options object,
                           we remove non-explicitly-defined properties that are auto-assigned values. */
                        if (!options.easing) {
                            delete opts.easing;
                        }

                        if (!options.duration) {
                            delete opts.duration;
                        }

                        /* The opts object used for reversal is an extension of the options object optionally passed into this
                           reverse call plus the options used in the previous Velocity call. */
                        opts = $.extend({}, Data(element).opts, opts);

                        /*************************************
                           Tweens Container Reconstruction
                        *************************************/

                        /* Create a deepy copy (indicated via the true flag) of the previous call's tweensContainer. */
                        var lastTweensContainer = $.extend(true, {}, Data(element).tweensContainer);

                        /* Manipulate the previous tweensContainer by replacing its end values and currentValues with its start values. */
                        for (var lastTween in lastTweensContainer) {
                            /* In addition to tween data, tweensContainers contain an element property that we ignore here. */
                            if (lastTween !== "element") {
                                var lastStartValue = lastTweensContainer[lastTween].startValue;

                                lastTweensContainer[lastTween].startValue = lastTweensContainer[lastTween].currentValue = lastTweensContainer[lastTween].endValue;
                                lastTweensContainer[lastTween].endValue = lastStartValue;

                                /* Easing is the only option that embeds into the individual tween data (since it can be defined on a per-property basis).
                                   Accordingly, every property's easing value must be updated when an options object is passed in with a reverse call.
                                   The side effect of this extensibility is that all per-property easing values are forcefully reset to the new value. */
                                if (!Type.isEmptyObject(options)) {
                                    lastTweensContainer[lastTween].easing = opts.easing;
                                }

                                if (Velocity.debug) console.log("reverse tweensContainer (" + lastTween + "): " + JSON.stringify(lastTweensContainer[lastTween]), element);
                            }
                        }

                        tweensContainer = lastTweensContainer;
                    }

                /*****************************************
                   Tween Data Construction (for Start)
                *****************************************/

                } else if (action === "start") {

                    /*************************
                        Value Transferring
                    *************************/

                    /* If this queue entry follows a previous Velocity-initiated queue entry *and* if this entry was created
                       while the element was in the process of being animated by Velocity, then this current call is safe to use
                       the end values from the prior call as its start values. Velocity attempts to perform this value transfer
                       process whenever possible in order to avoid requerying the DOM. */
                    /* If values aren't transferred from a prior call and start values were not forcefed by the user (more on this below),
                       then the DOM is queried for the element's current values as a last resort. */
                    /* Note: Conversely, animation reversal (and looping) *always* perform inter-call value transfers; they never requery the DOM. */
                    var lastTweensContainer;

                    /* The per-element isAnimating flag is used to indicate whether it's safe (i.e. the data isn't stale)
                       to transfer over end values to use as start values. If it's set to true and there is a previous
                       Velocity call to pull values from, do so. */
                    if (Data(element).tweensContainer && Data(element).isAnimating === true) {
                        lastTweensContainer = Data(element).tweensContainer;
                    }

                    /***************************
                       Tween Data Calculation
                    ***************************/

                    /* This function parses property data and defaults endValue, easing, and startValue as appropriate. */
                    /* Property map values can either take the form of 1) a single value representing the end value,
                       or 2) an array in the form of [ endValue, [, easing] [, startValue] ].
                       The optional third parameter is a forcefed startValue to be used instead of querying the DOM for
                       the element's current value. Read Velocity's docmentation to learn more about forcefeeding: VelocityJS.org/#forcefeeding */
                    function parsePropertyValue (valueData, skipResolvingEasing) {
                        var endValue = undefined,
                            easing = undefined,
                            startValue = undefined;

                        /* Handle the array format, which can be structured as one of three potential overloads:
                           A) [ endValue, easing, startValue ], B) [ endValue, easing ], or C) [ endValue, startValue ] */
                        if (Type.isArray(valueData)) {
                            /* endValue is always the first item in the array. Don't bother validating endValue's value now
                               since the ensuing property cycling logic does that. */
                            endValue = valueData[0];

                            /* Two-item array format: If the second item is a number, function, or hex string, treat it as a
                               start value since easings can only be non-hex strings or arrays. */
                            if ((!Type.isArray(valueData[1]) && /^[\d-]/.test(valueData[1])) || Type.isFunction(valueData[1]) || CSS.RegEx.isHex.test(valueData[1])) {
                                startValue = valueData[1];
                            /* Two or three-item array: If the second item is a non-hex string or an array, treat it as an easing. */
                            } else if ((Type.isString(valueData[1]) && !CSS.RegEx.isHex.test(valueData[1])) || Type.isArray(valueData[1])) {
                                easing = skipResolvingEasing ? valueData[1] : getEasing(valueData[1], opts.duration);

                                /* Don't bother validating startValue's value now since the ensuing property cycling logic inherently does that. */
                                if (valueData[2] !== undefined) {
                                    startValue = valueData[2];
                                }
                            }
                        /* Handle the single-value format. */
                        } else {
                            endValue = valueData;
                        }

                        /* Default to the call's easing if a per-property easing type was not defined. */
                        if (!skipResolvingEasing) {
                            easing = easing || opts.easing;
                        }

                        /* If functions were passed in as values, pass the function the current element as its context,
                           plus the element's index and the element set's size as arguments. Then, assign the returned value. */
                        if (Type.isFunction(endValue)) {
                            endValue = endValue.call(element, elementsIndex, elementsLength);
                        }

                        if (Type.isFunction(startValue)) {
                            startValue = startValue.call(element, elementsIndex, elementsLength);
                        }

                        /* Allow startValue to be left as undefined to indicate to the ensuing code that its value was not forcefed. */
                        return [ endValue || 0, easing, startValue ];
                    }

                    /* Cycle through each property in the map, looking for shorthand color properties (e.g. "color" as opposed to "colorRed"). Inject the corresponding
                       colorRed, colorGreen, and colorBlue RGB component tweens into the propertiesMap (which Velocity understands) and remove the shorthand property. */
                    $.each(propertiesMap, function(property, value) {
                        /* Find shorthand color properties that have been passed a hex string. */
                        if (RegExp("^" + CSS.Lists.colors.join("$|^") + "$").test(property)) {
                            /* Parse the value data for each shorthand. */
                            var valueData = parsePropertyValue(value, true),
                                endValue = valueData[0],
                                easing = valueData[1],
                                startValue = valueData[2];

                            if (CSS.RegEx.isHex.test(endValue)) {
                                /* Convert the hex strings into their RGB component arrays. */
                                var colorComponents = [ "Red", "Green", "Blue" ],
                                    endValueRGB = CSS.Values.hexToRgb(endValue),
                                    startValueRGB = startValue ? CSS.Values.hexToRgb(startValue) : undefined;

                                /* Inject the RGB component tweens into propertiesMap. */
                                for (var i = 0; i < colorComponents.length; i++) {
                                    var dataArray = [ endValueRGB[i] ];

                                    if (easing) {
                                        dataArray.push(easing);
                                    }

                                    if (startValueRGB !== undefined) {
                                        dataArray.push(startValueRGB[i]);
                                    }

                                    propertiesMap[property + colorComponents[i]] = dataArray;
                                }

                                /* Remove the intermediary shorthand property entry now that we've processed it. */
                                delete propertiesMap[property];
                            }
                        }
                    });

                    /* Create a tween out of each property, and append its associated data to tweensContainer. */
                    for (var property in propertiesMap) {

                        /**************************
                           Start Value Sourcing
                        **************************/

                        /* Parse out endValue, easing, and startValue from the property's data. */
                        var valueData = parsePropertyValue(propertiesMap[property]),
                            endValue = valueData[0],
                            easing = valueData[1],
                            startValue = valueData[2];

                        /* Now that the original property name's format has been used for the parsePropertyValue() lookup above,
                           we force the property to its camelCase styling to normalize it for manipulation. */
                        property = CSS.Names.camelCase(property);

                        /* In case this property is a hook, there are circumstances where we will intend to work on the hook's root property and not the hooked subproperty. */
                        var rootProperty = CSS.Hooks.getRoot(property),
                            rootPropertyValue = false;

                        /* Properties that are not supported by the browser (and do not have an associated normalization) will
                           inherently produce no style changes when set, so they are skipped in order to decrease animation tick overhead.
                           Property support is determined via prefixCheck(), which returns a false flag when no supported is detected. */
                        /* Note: Since SVG elements have some of their properties directly applied as HTML attributes,
                           there is no way to check for their explicit browser support, and so we skip skip this check for them. */
                        if (!Data(element).isSVG && CSS.Names.prefixCheck(rootProperty)[1] === false && CSS.Normalizations.registered[rootProperty] === undefined) {
                            if (Velocity.debug) console.log("Skipping [" + rootProperty + "] due to a lack of browser support.");

                            continue;
                        }

                        /* If the display option is being set to a non-"none" (e.g. "block") and opacity (filter on IE<=8) is being
                           animated to an endValue of non-zero, the user's intention is to fade in from invisible, thus we forcefeed opacity
                           a startValue of 0 if its startValue hasn't already been sourced by value transferring or prior forcefeeding. */
                        if (((opts.display !== undefined && opts.display !== null && opts.display !== "none") || (opts.visibility !== undefined && opts.visibility !== "hidden")) && /opacity|filter/.test(property) && !startValue && endValue !== 0) {
                            startValue = 0;
                        }

                        /* If values have been transferred from the previous Velocity call, extract the endValue and rootPropertyValue
                           for all of the current call's properties that were *also* animated in the previous call. */
                        /* Note: Value transferring can optionally be disabled by the user via the _cacheValues option. */
                        if (opts._cacheValues && lastTweensContainer && lastTweensContainer[property]) {
                            if (startValue === undefined) {
                                startValue = lastTweensContainer[property].endValue + lastTweensContainer[property].unitType;
                            }

                            /* The previous call's rootPropertyValue is extracted from the element's data cache since that's the
                               instance of rootPropertyValue that gets freshly updated by the tweening process, whereas the rootPropertyValue
                               attached to the incoming lastTweensContainer is equal to the root property's value prior to any tweening. */
                            rootPropertyValue = Data(element).rootPropertyValueCache[rootProperty];
                        /* If values were not transferred from a previous Velocity call, query the DOM as needed. */
                        } else {
                            /* Handle hooked properties. */
                            if (CSS.Hooks.registered[property]) {
                               if (startValue === undefined) {
                                    rootPropertyValue = CSS.getPropertyValue(element, rootProperty); /* GET */
                                    /* Note: The following getPropertyValue() call does not actually trigger a DOM query;
                                       getPropertyValue() will extract the hook from rootPropertyValue. */
                                    startValue = CSS.getPropertyValue(element, property, rootPropertyValue);
                                /* If startValue is already defined via forcefeeding, do not query the DOM for the root property's value;
                                   just grab rootProperty's zero-value template from CSS.Hooks. This overwrites the element's actual
                                   root property value (if one is set), but this is acceptable since the primary reason users forcefeed is
                                   to avoid DOM queries, and thus we likewise avoid querying the DOM for the root property's value. */
                                } else {
                                    /* Grab this hook's zero-value template, e.g. "0px 0px 0px black". */
                                    rootPropertyValue = CSS.Hooks.templates[rootProperty][1];
                                }
                            /* Handle non-hooked properties that haven't already been defined via forcefeeding. */
                            } else if (startValue === undefined) {
                                startValue = CSS.getPropertyValue(element, property); /* GET */
                            }
                        }

                        /**************************
                           Value Data Extraction
                        **************************/

                        var separatedValue,
                            endValueUnitType,
                            startValueUnitType,
                            operator = false;

                        /* Separates a property value into its numeric value and its unit type. */
                        function separateValue (property, value) {
                            var unitType,
                                numericValue;

                            numericValue = (value || "0")
                                .toString()
                                .toLowerCase()
                                /* Match the unit type at the end of the value. */
                                .replace(/[%A-z]+$/, function(match) {
                                    /* Grab the unit type. */
                                    unitType = match;

                                    /* Strip the unit type off of value. */
                                    return "";
                                });

                            /* If no unit type was supplied, assign one that is appropriate for this property (e.g. "deg" for rotateZ or "px" for width). */
                            if (!unitType) {
                                unitType = CSS.Values.getUnitType(property);
                            }

                            return [ numericValue, unitType ];
                        }

                        /* Separate startValue. */
                        separatedValue = separateValue(property, startValue);
                        startValue = separatedValue[0];
                        startValueUnitType = separatedValue[1];

                        /* Separate endValue, and extract a value operator (e.g. "+=", "-=") if one exists. */
                        separatedValue = separateValue(property, endValue);
                        endValue = separatedValue[0].replace(/^([+-\/*])=/, function(match, subMatch) {
                            operator = subMatch;

                            /* Strip the operator off of the value. */
                            return "";
                        });
                        endValueUnitType = separatedValue[1];

                        /* Parse float values from endValue and startValue. Default to 0 if NaN is returned. */
                        startValue = parseFloat(startValue) || 0;
                        endValue = parseFloat(endValue) || 0;

                        /***************************************
                           Property-Specific Value Conversion
                        ***************************************/

                        /* Custom support for properties that don't actually accept the % unit type, but where pollyfilling is trivial and relatively foolproof. */
                        if (endValueUnitType === "%") {
                            /* A %-value fontSize/lineHeight is relative to the parent's fontSize (as opposed to the parent's dimensions),
                               which is identical to the em unit's behavior, so we piggyback off of that. */
                            if (/^(fontSize|lineHeight)$/.test(property)) {
                                /* Convert % into an em decimal value. */
                                endValue = endValue / 100;
                                endValueUnitType = "em";
                            /* For scaleX and scaleY, convert the value into its decimal format and strip off the unit type. */
                            } else if (/^scale/.test(property)) {
                                endValue = endValue / 100;
                                endValueUnitType = "";
                            /* For RGB components, take the defined percentage of 255 and strip off the unit type. */
                            } else if (/(Red|Green|Blue)$/i.test(property)) {
                                endValue = (endValue / 100) * 255;
                                endValueUnitType = "";
                            }
                        }

                        /***************************
                           Unit Ratio Calculation
                        ***************************/

                        /* When queried, the browser returns (most) CSS property values in pixels. Therefore, if an endValue with a unit type of
                           %, em, or rem is animated toward, startValue must be converted from pixels into the same unit type as endValue in order
                           for value manipulation logic (increment/decrement) to proceed. Further, if the startValue was forcefed or transferred
                           from a previous call, startValue may also not be in pixels. Unit conversion logic therefore consists of two steps:
                           1) Calculating the ratio of %/em/rem/vh/vw relative to pixels
                           2) Converting startValue into the same unit of measurement as endValue based on these ratios. */
                        /* Unit conversion ratios are calculated by inserting a sibling node next to the target node, copying over its position property,
                           setting values with the target unit type then comparing the returned pixel value. */
                        /* Note: Even if only one of these unit types is being animated, all unit ratios are calculated at once since the overhead
                           of batching the SETs and GETs together upfront outweights the potential overhead
                           of layout thrashing caused by re-querying for uncalculated ratios for subsequently-processed properties. */
                        /* Todo: Shift this logic into the calls' first tick instance so that it's synced with RAF. */
                        function calculateUnitRatios () {

                            /************************
                                Same Ratio Checks
                            ************************/

                            /* The properties below are used to determine whether the element differs sufficiently from this call's
                               previously iterated element to also differ in its unit conversion ratios. If the properties match up with those
                               of the prior element, the prior element's conversion ratios are used. Like most optimizations in Velocity,
                               this is done to minimize DOM querying. */
                            var sameRatioIndicators = {
                                    myParent: element.parentNode || document.body, /* GET */
                                    position: CSS.getPropertyValue(element, "position"), /* GET */
                                    fontSize: CSS.getPropertyValue(element, "fontSize") /* GET */
                                },
                                /* Determine if the same % ratio can be used. % is based on the element's position value and its parent's width and height dimensions. */
                                samePercentRatio = ((sameRatioIndicators.position === callUnitConversionData.lastPosition) && (sameRatioIndicators.myParent === callUnitConversionData.lastParent)),
                                /* Determine if the same em ratio can be used. em is relative to the element's fontSize. */
                                sameEmRatio = (sameRatioIndicators.fontSize === callUnitConversionData.lastFontSize);

                            /* Store these ratio indicators call-wide for the next element to compare against. */
                            callUnitConversionData.lastParent = sameRatioIndicators.myParent;
                            callUnitConversionData.lastPosition = sameRatioIndicators.position;
                            callUnitConversionData.lastFontSize = sameRatioIndicators.fontSize;

                            /***************************
                               Element-Specific Units
                            ***************************/

                            /* Note: IE8 rounds to the nearest pixel when returning CSS values, thus we perform conversions using a measurement
                               of 100 (instead of 1) to give our ratios a precision of at least 2 decimal values. */
                            var measurement = 100,
                                unitRatios = {};

                            if (!sameEmRatio || !samePercentRatio) {
                                var dummy = Data(element).isSVG ? document.createElementNS("http://www.w3.org/2000/svg", "rect") : document.createElement("div");

                                Velocity.init(dummy);
                                sameRatioIndicators.myParent.appendChild(dummy);

                                /* To accurately and consistently calculate conversion ratios, the element's cascaded overflow and box-sizing are stripped.
                                   Similarly, since width/height can be artificially constrained by their min-/max- equivalents, these are controlled for as well. */
                                /* Note: Overflow must be also be controlled for per-axis since the overflow property overwrites its per-axis values. */
                                $.each([ "overflow", "overflowX", "overflowY" ], function(i, property) {
                                    Velocity.CSS.setPropertyValue(dummy, property, "hidden");
                                });
                                Velocity.CSS.setPropertyValue(dummy, "position", sameRatioIndicators.position);
                                Velocity.CSS.setPropertyValue(dummy, "fontSize", sameRatioIndicators.fontSize);
                                Velocity.CSS.setPropertyValue(dummy, "boxSizing", "content-box");

                                /* width and height act as our proxy properties for measuring the horizontal and vertical % ratios. */
                                $.each([ "minWidth", "maxWidth", "width", "minHeight", "maxHeight", "height" ], function(i, property) {
                                    Velocity.CSS.setPropertyValue(dummy, property, measurement + "%");
                                });
                                /* paddingLeft arbitrarily acts as our proxy property for the em ratio. */
                                Velocity.CSS.setPropertyValue(dummy, "paddingLeft", measurement + "em");

                                /* Divide the returned value by the measurement to get the ratio between 1% and 1px. Default to 1 since working with 0 can produce Infinite. */
                                unitRatios.percentToPxWidth = callUnitConversionData.lastPercentToPxWidth = (parseFloat(CSS.getPropertyValue(dummy, "width", null, true)) || 1) / measurement; /* GET */
                                unitRatios.percentToPxHeight = callUnitConversionData.lastPercentToPxHeight = (parseFloat(CSS.getPropertyValue(dummy, "height", null, true)) || 1) / measurement; /* GET */
                                unitRatios.emToPx = callUnitConversionData.lastEmToPx = (parseFloat(CSS.getPropertyValue(dummy, "paddingLeft")) || 1) / measurement; /* GET */

                                sameRatioIndicators.myParent.removeChild(dummy);
                            } else {
                                unitRatios.emToPx = callUnitConversionData.lastEmToPx;
                                unitRatios.percentToPxWidth = callUnitConversionData.lastPercentToPxWidth;
                                unitRatios.percentToPxHeight = callUnitConversionData.lastPercentToPxHeight;
                            }

                            /***************************
                               Element-Agnostic Units
                            ***************************/

                            /* Whereas % and em ratios are determined on a per-element basis, the rem unit only needs to be checked
                               once per call since it's exclusively dependant upon document.body's fontSize. If this is the first time
                               that calculateUnitRatios() is being run during this call, remToPx will still be set to its default value of null,
                               so we calculate it now. */
                            if (callUnitConversionData.remToPx === null) {
                                /* Default to browsers' default fontSize of 16px in the case of 0. */
                                callUnitConversionData.remToPx = parseFloat(CSS.getPropertyValue(document.body, "fontSize")) || 16; /* GET */
                            }

                            /* Similarly, viewport units are %-relative to the window's inner dimensions. */
                            if (callUnitConversionData.vwToPx === null) {
                                callUnitConversionData.vwToPx = parseFloat(window.innerWidth) / 100; /* GET */
                                callUnitConversionData.vhToPx = parseFloat(window.innerHeight) / 100; /* GET */
                            }

                            unitRatios.remToPx = callUnitConversionData.remToPx;
                            unitRatios.vwToPx = callUnitConversionData.vwToPx;
                            unitRatios.vhToPx = callUnitConversionData.vhToPx;

                            if (Velocity.debug >= 1) console.log("Unit ratios: " + JSON.stringify(unitRatios), element);

                            return unitRatios;
                        }

                        /********************
                           Unit Conversion
                        ********************/

                        /* The * and / operators, which are not passed in with an associated unit, inherently use startValue's unit. Skip value and unit conversion. */
                        if (/[\/*]/.test(operator)) {
                            endValueUnitType = startValueUnitType;
                        /* If startValue and endValue differ in unit type, convert startValue into the same unit type as endValue so that if endValueUnitType
                           is a relative unit (%, em, rem), the values set during tweening will continue to be accurately relative even if the metrics they depend
                           on are dynamically changing during the course of the animation. Conversely, if we always normalized into px and used px for setting values, the px ratio
                           would become stale if the original unit being animated toward was relative and the underlying metrics change during the animation. */
                        /* Since 0 is 0 in any unit type, no conversion is necessary when startValue is 0 -- we just start at 0 with endValueUnitType. */
                        } else if ((startValueUnitType !== endValueUnitType) && startValue !== 0) {
                            /* Unit conversion is also skipped when endValue is 0, but *startValueUnitType* must be used for tween values to remain accurate. */
                            /* Note: Skipping unit conversion here means that if endValueUnitType was originally a relative unit, the animation won't relatively
                               match the underlying metrics if they change, but this is acceptable since we're animating toward invisibility instead of toward visibility,
                               which remains past the point of the animation's completion. */
                            if (endValue === 0) {
                                endValueUnitType = startValueUnitType;
                            } else {
                                /* By this point, we cannot avoid unit conversion (it's undesirable since it causes layout thrashing).
                                   If we haven't already, we trigger calculateUnitRatios(), which runs once per element per call. */
                                elementUnitConversionData = elementUnitConversionData || calculateUnitRatios();

                                /* The following RegEx matches CSS properties that have their % values measured relative to the x-axis. */
                                /* Note: W3C spec mandates that all of margin and padding's properties (even top and bottom) are %-relative to the *width* of the parent element. */
                                var axis = (/margin|padding|left|right|width|text|word|letter/i.test(property) || /X$/.test(property) || property === "x") ? "x" : "y";

                                /* In order to avoid generating n^2 bespoke conversion functions, unit conversion is a two-step process:
                                   1) Convert startValue into pixels. 2) Convert this new pixel value into endValue's unit type. */
                                switch (startValueUnitType) {
                                    case "%":
                                        /* Note: translateX and translateY are the only properties that are %-relative to an element's own dimensions -- not its parent's dimensions.
                                           Velocity does not include a special conversion process to account for this behavior. Therefore, animating translateX/Y from a % value
                                           to a non-% value will produce an incorrect start value. Fortunately, this sort of cross-unit conversion is rarely done by users in practice. */
                                        startValue *= (axis === "x" ? elementUnitConversionData.percentToPxWidth : elementUnitConversionData.percentToPxHeight);
                                        break;

                                    case "px":
                                        /* px acts as our midpoint in the unit conversion process; do nothing. */
                                        break;

                                    default:
                                        startValue *= elementUnitConversionData[startValueUnitType + "ToPx"];
                                }

                                /* Invert the px ratios to convert into to the target unit. */
                                switch (endValueUnitType) {
                                    case "%":
                                        startValue *= 1 / (axis === "x" ? elementUnitConversionData.percentToPxWidth : elementUnitConversionData.percentToPxHeight);
                                        break;

                                    case "px":
                                        /* startValue is already in px, do nothing; we're done. */
                                        break;

                                    default:
                                        startValue *= 1 / elementUnitConversionData[endValueUnitType + "ToPx"];
                                }
                            }
                        }

                        /*********************
                           Relative Values
                        *********************/

                        /* Operator logic must be performed last since it requires unit-normalized start and end values. */
                        /* Note: Relative *percent values* do not behave how most people think; while one would expect "+=50%"
                           to increase the property 1.5x its current value, it in fact increases the percent units in absolute terms:
                           50 points is added on top of the current % value. */
                        switch (operator) {
                            case "+":
                                endValue = startValue + endValue;
                                break;

                            case "-":
                                endValue = startValue - endValue;
                                break;

                            case "*":
                                endValue = startValue * endValue;
                                break;

                            case "/":
                                endValue = startValue / endValue;
                                break;
                        }

                        /**************************
                           tweensContainer Push
                        **************************/

                        /* Construct the per-property tween object, and push it to the element's tweensContainer. */
                        tweensContainer[property] = {
                            rootPropertyValue: rootPropertyValue,
                            startValue: startValue,
                            currentValue: startValue,
                            endValue: endValue,
                            unitType: endValueUnitType,
                            easing: easing
                        };

                        if (Velocity.debug) console.log("tweensContainer (" + property + "): " + JSON.stringify(tweensContainer[property]), element);
                    }

                    /* Along with its property data, store a reference to the element itself onto tweensContainer. */
                    tweensContainer.element = element;
                }

                /*****************
                    Call Push
                *****************/

                /* Note: tweensContainer can be empty if all of the properties in this call's property map were skipped due to not
                   being supported by the browser. The element property is used for checking that the tweensContainer has been appended to. */
                if (tweensContainer.element) {
                    /* Apply the "velocity-animating" indicator class. */
                    CSS.Values.addClass(element, "velocity-animating");

                    /* The call array houses the tweensContainers for each element being animated in the current call. */
                    call.push(tweensContainer);

                    /* Store the tweensContainer and options if we're working on the default effects queue, so that they can be used by the reverse command. */
                    if (opts.queue === "") {
                        Data(element).tweensContainer = tweensContainer;
                        Data(element).opts = opts;
                    }

                    /* Switch on the element's animating flag. */
                    Data(element).isAnimating = true;

                    /* Once the final element in this call's element set has been processed, push the call array onto
                       Velocity.State.calls for the animation tick to immediately begin processing. */
                    if (elementsIndex === elementsLength - 1) {
                        /* To speed up iterating over this array, it is compacted (falsey items -- calls that have completed -- are removed)
                           when its length has ballooned to a point that can impact tick performance. This only becomes necessary when animation
                           has been continuous with many elements over a long period of time; whenever all active calls are completed, completeCall() clears Velocity.State.calls. */
                        if (Velocity.State.calls.length > 10000) {
                            Velocity.State.calls = compactSparseArray(Velocity.State.calls);
                        }

                        /* Add the current call plus its associated metadata (the element set and the call's options) onto the global call container.
                           Anything on this call container is subjected to tick() processing. */
                        Velocity.State.calls.push([ call, elements, opts, null, promiseData.resolver ]);

                        /* If the animation tick isn't running, start it. (Velocity shuts it off when there are no active calls to process.) */
                        if (Velocity.State.isTicking === false) {
                            Velocity.State.isTicking = true;

                            /* Start the tick loop. */
                            tick();
                        }
                    } else {
                        elementsIndex++;
                    }
                }
            }

            /* When the queue option is set to false, the call skips the element's queue and fires immediately. */
            if (opts.queue === false) {
                /* Since this buildQueue call doesn't respect the element's existing queue (which is where a delay option would have been appended),
                   we manually inject the delay property here with an explicit setTimeout. */
                if (opts.delay) {
                    setTimeout(buildQueue, opts.delay);
                } else {
                    buildQueue();
                }
            /* Otherwise, the call undergoes element queueing as normal. */
            /* Note: To interoperate with jQuery, Velocity uses jQuery's own $.queue() stack for queuing logic. */
            } else {
                $.queue(element, opts.queue, function(next, clearQueue) {
                    /* If the clearQueue flag was passed in by the stop command, resolve this call's promise. (Promises can only be resolved once,
                       so it's fine if this is repeatedly triggered for each element in the associated call.) */
                    if (clearQueue === true) {
                        if (promiseData.promise) {
                            promiseData.resolver(elements);
                        }

                        /* Do not continue with animation queueing. */
                        return true;
                    }

                    /* This flag indicates to the upcoming completeCall() function that this queue entry was initiated by Velocity.
                       See completeCall() for further details. */
                    Velocity.velocityQueueEntryFlag = true;

                    buildQueue(next);
                });
            }

            /*********************
                Auto-Dequeuing
            *********************/

            /* As per jQuery's $.queue() behavior, to fire the first non-custom-queue entry on an element, the element
               must be dequeued if its queue stack consists *solely* of the current call. (This can be determined by checking
               for the "inprogress" item that jQuery prepends to active queue stack arrays.) Regardless, whenever the element's
               queue is further appended with additional items -- including $.delay()'s or even $.animate() calls, the queue's
               first entry is automatically fired. This behavior contrasts that of custom queues, which never auto-fire. */
            /* Note: When an element set is being subjected to a non-parallel Velocity call, the animation will not begin until
               each one of the elements in the set has reached the end of its individually pre-existing queue chain. */
            /* Note: Unfortunately, most people don't fully grasp jQuery's powerful, yet quirky, $.queue() function.
               Lean more here: http://stackoverflow.com/questions/1058158/can-somebody-explain-jquery-queue-to-me */
            if ((opts.queue === "" || opts.queue === "fx") && $.queue(element)[0] !== "inprogress") {
                $.dequeue(element);
            }
        }

        /**************************
           Element Set Iteration
        **************************/

        /* If the "nodeType" property exists on the elements variable, we're animating a single element.
           Place it in an array so that $.each() can iterate over it. */
        $.each(elements, function(i, element) {
            /* Ensure each element in a set has a nodeType (is a real element) to avoid throwing errors. */
            if (Type.isNode(element)) {
                processElement.call(element);
            }
        });

        /******************
           Option: Loop
        ******************/

        /* The loop option accepts an integer indicating how many times the element should loop between the values in the
           current call's properties map and the element's property values prior to this call. */
        /* Note: The loop option's logic is performed here -- after element processing -- because the current call needs
           to undergo its queue insertion prior to the loop option generating its series of constituent "reverse" calls,
           which chain after the current call. Two reverse calls (two "alternations") constitute one loop. */
        var opts = $.extend({}, Velocity.defaults, options),
            reverseCallsCount;

        opts.loop = parseInt(opts.loop);
        reverseCallsCount = (opts.loop * 2) - 1;

        if (opts.loop) {
            /* Double the loop count to convert it into its appropriate number of "reverse" calls.
               Subtract 1 from the resulting value since the current call is included in the total alternation count. */
            for (var x = 0; x < reverseCallsCount; x++) {
                /* Since the logic for the reverse action occurs inside Queueing and therefore this call's options object
                   isn't parsed until then as well, the current call's delay option must be explicitly passed into the reverse
                   call so that the delay logic that occurs inside *Pre-Queueing* can process it. */
                var reverseOptions = {
                    delay: opts.delay,
                    progress: opts.progress
                };

                /* If a complete callback was passed into this call, transfer it to the loop redirect's final "reverse" call
                   so that it's triggered when the entire redirect is complete (and not when the very first animation is complete). */
                if (x === reverseCallsCount - 1) {
                    reverseOptions.display = opts.display;
                    reverseOptions.visibility = opts.visibility;
                    reverseOptions.complete = opts.complete;
                }

                animate(elements, "reverse", reverseOptions);
            }
        }

        /***************
            Chaining
        ***************/

        /* Return the elements back to the call chain, with wrapped elements taking precedence in case Velocity was called via the $.fn. extension. */
        return getChain();
    };

    /* Turn Velocity into the animation function, extended with the pre-existing Velocity object. */
    Velocity = $.extend(animate, Velocity);
    /* For legacy support, also expose the literal animate method. */
    Velocity.animate = animate;

    /**************
        Timing
    **************/

    /* Ticker function. */
    var ticker = window.requestAnimationFrame || rAFShim;

    /* Inactive browser tabs pause rAF, which results in all active animations immediately sprinting to their completion states when the tab refocuses.
       To get around this, we dynamically switch rAF to setTimeout (which the browser *doesn't* pause) when the tab loses focus. We skip this for mobile
       devices to avoid wasting battery power on inactive tabs. */
    /* Note: Tab focus detection doesn't work on older versions of IE, but that's okay since they don't support rAF to begin with. */
    if (!Velocity.State.isMobile && document.hidden !== undefined) {
        document.addEventListener("visibilitychange", function() {
            /* Reassign the rAF function (which the global tick() function uses) based on the tab's focus state. */
            if (document.hidden) {
                ticker = function(callback) {
                    /* The tick function needs a truthy first argument in order to pass its internal timestamp check. */
                    return setTimeout(function() { callback(true) }, 16);
                };

                /* The rAF loop has been paused by the browser, so we manually restart the tick. */
                tick();
            } else {
                ticker = window.requestAnimationFrame || rAFShim;
            }
        });
    }

    /************
        Tick
    ************/

    /* Note: All calls to Velocity are pushed to the Velocity.State.calls array, which is fully iterated through upon each tick. */
    function tick (timestamp) {
        /* An empty timestamp argument indicates that this is the first tick occurence since ticking was turned on.
           We leverage this metadata to fully ignore the first tick pass since RAF's initial pass is fired whenever
           the browser's next tick sync time occurs, which results in the first elements subjected to Velocity
           calls being animated out of sync with any elements animated immediately thereafter. In short, we ignore
           the first RAF tick pass so that elements being immediately consecutively animated -- instead of simultaneously animated
           by the same Velocity call -- are properly batched into the same initial RAF tick and consequently remain in sync thereafter. */
        if (timestamp) {
            /* We ignore RAF's high resolution timestamp since it can be significantly offset when the browser is
               under high stress; we opt for choppiness over allowing the browser to drop huge chunks of frames. */
            var timeCurrent = (new Date).getTime();

            /********************
               Call Iteration
            ********************/

            /* Iterate through each active call. */
            for (var i = 0, callsLength = Velocity.State.calls.length; i < callsLength; i++) {
                /* When a Velocity call is completed, its Velocity.State.calls entry is set to false. Continue on to the next call. */
                if (!Velocity.State.calls[i]) {
                    continue;
                }

                /************************
                   Call-Wide Variables
                ************************/

                var callContainer = Velocity.State.calls[i],
                    call = callContainer[0],
                    opts = callContainer[2],
                    timeStart = callContainer[3],
                    firstTick = !!timeStart;

                /* If timeStart is undefined, then this is the first time that this call has been processed by tick().
                   We assign timeStart now so that its value is as close to the real animation start time as possible.
                   (Conversely, had timeStart been defined when this call was added to Velocity.State.calls, the delay
                   between that time and now would cause the first few frames of the tween to be skipped since
                   percentComplete is calculated relative to timeStart.) */
                /* Further, subtract 16ms (the approximate resolution of RAF) from the current time value so that the
                   first tick iteration isn't wasted by animating at 0% tween completion, which would produce the
                   same style value as the element's current value. */
                if (!timeStart) {
                    timeStart = Velocity.State.calls[i][3] = timeCurrent - 16;
                }

                /* The tween's completion percentage is relative to the tween's start time, not the tween's start value
                   (which would result in unpredictable tween durations since JavaScript's timers are not particularly accurate).
                   Accordingly, we ensure that percentComplete does not exceed 1. */
                var percentComplete = Math.min((timeCurrent - timeStart) / opts.duration, 1);

                /**********************
                   Element Iteration
                **********************/

                /* For every call, iterate through each of the elements in its set. */
                for (var j = 0, callLength = call.length; j < callLength; j++) {
                    var tweensContainer = call[j],
                        element = tweensContainer.element;

                    /* Check to see if this element has been deleted midway through the animation by checking for the
                       continued existence of its data cache. If it's gone, skip animating this element. */
                    if (!Data(element)) {
                        continue;
                    }

                    var transformPropertyExists = false;

                    /**********************************
                       Display & Visibility Toggling
                    **********************************/

                    /* If the display option is set to non-"none", set it upfront so that the element can become visible before tweening begins.
                       (Otherwise, display's "none" value is set in completeCall() once the animation has completed.) */
                    if (opts.display !== undefined && opts.display !== null && opts.display !== "none") {
                        if (opts.display === "flex") {
                            var flexValues = [ "-webkit-box", "-moz-box", "-ms-flexbox", "-webkit-flex" ];

                            $.each(flexValues, function(i, flexValue) {
                                CSS.setPropertyValue(element, "display", flexValue);
                            });
                        }

                        CSS.setPropertyValue(element, "display", opts.display);
                    }

                    /* Same goes with the visibility option, but its "none" equivalent is "hidden". */
                    if (opts.visibility !== undefined && opts.visibility !== "hidden") {
                        CSS.setPropertyValue(element, "visibility", opts.visibility);
                    }

                    /************************
                       Property Iteration
                    ************************/

                    /* For every element, iterate through each property. */
                    for (var property in tweensContainer) {
                        /* Note: In addition to property tween data, tweensContainer contains a reference to its associated element. */
                        if (property !== "element") {
                            var tween = tweensContainer[property],
                                currentValue,
                                /* Easing can either be a pre-genereated function or a string that references a pre-registered easing
                                   on the Velocity.Easings object. In either case, return the appropriate easing *function*. */
                                easing = Type.isString(tween.easing) ? Velocity.Easings[tween.easing] : tween.easing;

                            /******************************
                               Current Value Calculation
                            ******************************/

                            /* If this is the last tick pass (if we've reached 100% completion for this tween),
                               ensure that currentValue is explicitly set to its target endValue so that it's not subjected to any rounding. */
                            if (percentComplete === 1) {
                                currentValue = tween.endValue;
                            /* Otherwise, calculate currentValue based on the current delta from startValue. */
                            } else {
                                currentValue = tween.startValue + ((tween.endValue - tween.startValue) * easing(percentComplete));

                                /* If no value change is occurring, don't proceed with DOM updating. */
                                if (!firstTick && (currentValue === tween.currentValue)) {
                                    continue;
                                }
                            }

                            tween.currentValue = currentValue;

                            /******************
                               Hooks: Part I
                            ******************/

                            /* For hooked properties, the newly-updated rootPropertyValueCache is cached onto the element so that it can be used
                               for subsequent hooks in this call that are associated with the same root property. If we didn't cache the updated
                               rootPropertyValue, each subsequent update to the root property in this tick pass would reset the previous hook's
                               updates to rootPropertyValue prior to injection. A nice performance byproduct of rootPropertyValue caching is that
                               subsequently chained animations using the same hookRoot but a different hook can use this cached rootPropertyValue. */
                            if (CSS.Hooks.registered[property]) {
                                var hookRoot = CSS.Hooks.getRoot(property),
                                    rootPropertyValueCache = Data(element).rootPropertyValueCache[hookRoot];

                                if (rootPropertyValueCache) {
                                    tween.rootPropertyValue = rootPropertyValueCache;
                                }
                            }

                            /*****************
                                DOM Update
                            *****************/

                            /* setPropertyValue() returns an array of the property name and property value post any normalization that may have been performed. */
                            /* Note: To solve an IE<=8 positioning bug, the unit type is dropped when setting a property value of 0. */
                            var adjustedSetData = CSS.setPropertyValue(element, /* SET */
                                                                       property,
                                                                       tween.currentValue + (parseFloat(currentValue) === 0 ? "" : tween.unitType),
                                                                       tween.rootPropertyValue,
                                                                       tween.scrollData);

                            /*******************
                               Hooks: Part II
                            *******************/

                            /* Now that we have the hook's updated rootPropertyValue (the post-processed value provided by adjustedSetData), cache it onto the element. */
                            if (CSS.Hooks.registered[property]) {
                                /* Since adjustedSetData contains normalized data ready for DOM updating, the rootPropertyValue needs to be re-extracted from its normalized form. ?? */
                                if (CSS.Normalizations.registered[hookRoot]) {
                                    Data(element).rootPropertyValueCache[hookRoot] = CSS.Normalizations.registered[hookRoot]("extract", null, adjustedSetData[1]);
                                } else {
                                    Data(element).rootPropertyValueCache[hookRoot] = adjustedSetData[1];
                                }
                            }

                            /***************
                               Transforms
                            ***************/

                            /* Flag whether a transform property is being animated so that flushTransformCache() can be triggered once this tick pass is complete. */
                            if (adjustedSetData[0] === "transform") {
                                transformPropertyExists = true;
                            }
                        }
                    }

                    /****************
                        mobileHA
                    ****************/

                    /* If mobileHA is enabled, set the translate3d transform to null to force hardware acceleration.
                       It's safe to override this property since Velocity doesn't actually support its animation (hooks are used in its place). */
                    if (opts.mobileHA) {
                        /* Don't set the null transform hack if we've already done so. */
                        if (Data(element).transformCache.translate3d === undefined) {
                            /* All entries on the transformCache object are later concatenated into a single transform string via flushTransformCache(). */
                            Data(element).transformCache.translate3d = "(0px, 0px, 0px)";

                            transformPropertyExists = true;
                        }
                    }

                    if (transformPropertyExists) {
                        CSS.flushTransformCache(element);
                    }
                }

                /* The non-"none" display value is only applied to an element once -- when its associated call is first ticked through.
                   Accordingly, it's set to false so that it isn't re-processed by this call in the next tick. */
                if (opts.display !== undefined && opts.display !== "none") {
                    Velocity.State.calls[i][2].display = false;
                }
                if (opts.visibility !== undefined && opts.visibility !== "hidden") {
                    Velocity.State.calls[i][2].visibility = false;
                }


                /* Pass the elements and the timing data (percentComplete, msRemaining, and timeStart) into the progress callback. */
                if (opts.progress) {
                    opts.progress.call(callContainer[1],
                                       callContainer[1],
                                       percentComplete,
                                       Math.max(0, (timeStart + opts.duration) - timeCurrent),
                                       timeStart);
                }

                /* If this call has finished tweening, pass its index to completeCall() to handle call cleanup. */
                if (percentComplete === 1) {
                    completeCall(i);
                }
            }
        }

        /* Note: completeCall() sets the isTicking flag to false when the last call on Velocity.State.calls has completed. */
        if (Velocity.State.isTicking) {
            ticker(tick);
        }
    }

    /**********************
        Call Completion
    **********************/

    /* Note: Unlike tick(), which processes all active calls at once, call completion is handled on a per-call basis. */
    function completeCall (callIndex, isStopped) {
        /* Ensure the call exists. */
        if (!Velocity.State.calls[callIndex]) {
            return false;
        }

        /* Pull the metadata from the call. */
        var call = Velocity.State.calls[callIndex][0],
            elements = Velocity.State.calls[callIndex][1],
            opts = Velocity.State.calls[callIndex][2],
            resolver = Velocity.State.calls[callIndex][4];

        var remainingCallsExist = false;

        /*************************
           Element Finalization
        *************************/

        for (var i = 0, callLength = call.length; i < callLength; i++) {
            var element = call[i].element;

            /* If the user set display to "none" (intending to hide the element), set it now that the animation has completed. */
            /* Note: display:none isn't set when calls are manually stopped (via Velocity("stop"). */
            /* Note: Display gets ignored with "reverse" calls and infinite loops, since this behavior would be undesirable. */
            if (!isStopped && !opts.loop) {
                if (opts.display === "none") {
                    CSS.setPropertyValue(element, "display", opts.display);
                }

                if (opts.visibility === "hidden") {
                    CSS.setPropertyValue(element, "visibility", opts.visibility);
                }
            }

            /* If the element's queue is empty (if only the "inprogress" item is left at position 0) or if its queue is about to run
               a non-Velocity-initiated entry, turn off the isAnimating flag. A non-Velocity-initiatied queue entry's logic might alter
               an element's CSS values and thereby cause Velocity's cached value data to go stale. To detect if a queue entry was initiated by Velocity,
               we check for the existence of our special Velocity.queueEntryFlag declaration, which minifiers won't rename since the flag
               is assigned to jQuery's global $ object and thus exists out of Velocity's own scope. */
            if (opts.loop !== true && ($.queue(element)[1] === undefined || !/\.velocityQueueEntryFlag/i.test($.queue(element)[1]))) {
                /* The element may have been deleted. Ensure that its data cache still exists before acting on it. */
                if (Data(element)) {
                    Data(element).isAnimating = false;
                    /* Clear the element's rootPropertyValueCache, which will become stale. */
                    Data(element).rootPropertyValueCache = {};

                    var transformHAPropertyExists = false;
                    /* If any 3D transform subproperty is at its default value (regardless of unit type), remove it. */
                    $.each(CSS.Lists.transforms3D, function(i, transformName) {
                        var defaultValue = /^scale/.test(transformName) ? 1 : 0,
                            currentValue = Data(element).transformCache[transformName];

                        if (Data(element).transformCache[transformName] !== undefined && new RegExp("^\\(" + defaultValue + "[^.]").test(currentValue)) {
                            transformHAPropertyExists = true;

                            delete Data(element).transformCache[transformName];
                        }
                    });

                    /* Mobile devices have hardware acceleration removed at the end of the animation in order to avoid hogging the GPU's memory. */
                    if (opts.mobileHA) {
                        transformHAPropertyExists = true;
                        delete Data(element).transformCache.translate3d;
                    }

                    /* Flush the subproperty removals to the DOM. */
                    if (transformHAPropertyExists) {
                        CSS.flushTransformCache(element);
                    }

                    /* Remove the "velocity-animating" indicator class. */
                    CSS.Values.removeClass(element, "velocity-animating");
                }
            }

            /*********************
               Option: Complete
            *********************/

            /* Complete is fired once per call (not once per element) and is passed the full raw DOM element set as both its context and its first argument. */
            /* Note: Callbacks aren't fired when calls are manually stopped (via Velocity("stop"). */
            if (!isStopped && opts.complete && !opts.loop && (i === callLength - 1)) {
                /* We throw callbacks in a setTimeout so that thrown errors don't halt the execution of Velocity itself. */
                try {
                    opts.complete.call(elements, elements);
                } catch (error) {
                    setTimeout(function() { throw error; }, 1);
                }
            }

            /**********************
               Promise Resolving
            **********************/

            /* Note: Infinite loops don't return promises. */
            if (resolver && opts.loop !== true) {
                resolver(elements);
            }

            /****************************
               Option: Loop (Infinite)
            ****************************/

            if (opts.loop === true && !isStopped) {
                /* If a rotateX/Y/Z property is being animated to 360 deg with loop:true, swap tween start/end values to enable
                   continuous iterative rotation looping. (Otherise, the element would just rotate back and forth.) */
                $.each(Data(element).tweensContainer, function(propertyName, tweenContainer) {
                    if (/^rotate/.test(propertyName) && parseFloat(tweenContainer.endValue) === 360) {
                        tweenContainer.endValue = 0;
                        tweenContainer.startValue = 360;
                    }
                });

                Velocity(element, "reverse", { loop: true, delay: opts.delay });
            }

            /***************
               Dequeueing
            ***************/

            /* Fire the next call in the queue so long as this call's queue wasn't set to false (to trigger a parallel animation),
               which would have already caused the next call to fire. Note: Even if the end of the animation queue has been reached,
               $.dequeue() must still be called in order to completely clear jQuery's animation queue. */
            if (opts.queue !== false) {
                $.dequeue(element, opts.queue);
            }
        }

        /************************
           Calls Array Cleanup
        ************************/

        /* Since this call is complete, set it to false so that the rAF tick skips it. This array is later compacted via compactSparseArray().
          (For performance reasons, the call is set to false instead of being deleted from the array: http://www.html5rocks.com/en/tutorials/speed/v8/) */
        Velocity.State.calls[callIndex] = false;

        /* Iterate through the calls array to determine if this was the final in-progress animation.
           If so, set a flag to end ticking and clear the calls array. */
        for (var j = 0, callsLength = Velocity.State.calls.length; j < callsLength; j++) {
            if (Velocity.State.calls[j] !== false) {
                remainingCallsExist = true;

                break;
            }
        }

        if (remainingCallsExist === false) {
            /* tick() will detect this flag upon its next iteration and subsequently turn itself off. */
            Velocity.State.isTicking = false;

            /* Clear the calls array so that its length is reset. */
            delete Velocity.State.calls;
            Velocity.State.calls = [];
        }
    }

    /******************
        Frameworks
    ******************/

    /* Both jQuery and Zepto allow their $.fn object to be extended to allow wrapped elements to be subjected to plugin calls.
       If either framework is loaded, register a "velocity" extension pointing to Velocity's core animate() method.  Velocity
       also registers itself onto a global container (window.jQuery || window.Zepto || window) so that certain features are
       accessible beyond just a per-element scope. This master object contains an .animate() method, which is later assigned to $.fn
       (if jQuery or Zepto are present). Accordingly, Velocity can both act on wrapped DOM elements and stand alone for targeting raw DOM elements. */
    global.Velocity = Velocity;

    if (global !== window) {
        /* Assign the element function to Velocity's core animate() method. */
        global.fn.velocity = animate;
        /* Assign the object function's defaults to Velocity's global defaults object. */
        global.fn.velocity.defaults = Velocity.defaults;
    }

    /***********************
       Packaged Redirects
    ***********************/

    /* slideUp, slideDown */
    $.each([ "Down", "Up" ], function(i, direction) {
        Velocity.Redirects["slide" + direction] = function (element, options, elementsIndex, elementsSize, elements, promiseData) {
            var opts = $.extend({}, options),
                begin = opts.begin,
                complete = opts.complete,
                computedValues = { height: "", marginTop: "", marginBottom: "", paddingTop: "", paddingBottom: "" },
                inlineValues = {};

            if (opts.display === undefined) {
                /* Show the element before slideDown begins and hide the element after slideUp completes. */
                /* Note: Inline elements cannot have dimensions animated, so they're reverted to inline-block. */
                opts.display = (direction === "Down" ? (Velocity.CSS.Values.getDisplayType(element) === "inline" ? "inline-block" : "block") : "none");
            }

            opts.begin = function() {
                /* If the user passed in a begin callback, fire it now. */
                begin && begin.call(elements, elements);

                /* Cache the elements' original vertical dimensional property values so that we can animate back to them. */
                for (var property in computedValues) {
                    /* Cache all inline values, we reset to upon animation completion. */
                    inlineValues[property] = element.style[property];

                    /* For slideDown, use forcefeeding to animate all vertical properties from 0. For slideUp,
                       use forcefeeding to start from computed values and animate down to 0. */
                    var propertyValue = Velocity.CSS.getPropertyValue(element, property);
                    computedValues[property] = (direction === "Down") ? [ propertyValue, 0 ] : [ 0, propertyValue ];
                }

                /* Force vertical overflow content to clip so that sliding works as expected. */
                inlineValues.overflow = element.style.overflow;
                element.style.overflow = "hidden";
            }

            opts.complete = function() {
                /* Reset element to its pre-slide inline values once its slide animation is complete. */
                for (var property in inlineValues) {
                    element.style[property] = inlineValues[property];
                }

                /* If the user passed in a complete callback, fire it now. */
                complete && complete.call(elements, elements);
                promiseData && promiseData.resolver(elements);
            };

            Velocity(element, computedValues, opts);
        };
    });

    /* fadeIn, fadeOut */
    $.each([ "In", "Out" ], function(i, direction) {
        Velocity.Redirects["fade" + direction] = function (element, options, elementsIndex, elementsSize, elements, promiseData) {
            var opts = $.extend({}, options),
                propertiesMap = { opacity: (direction === "In") ? 1 : 0 },
                originalComplete = opts.complete;

            /* Since redirects are triggered individually for each element in the animated set, avoid repeatedly triggering
               callbacks by firing them only when the final element has been reached. */
            if (elementsIndex !== elementsSize - 1) {
                opts.complete = opts.begin = null;
            } else {
                opts.complete = function() {
                    if (originalComplete) {
                        originalComplete.call(elements, elements);
                    }

                    promiseData && promiseData.resolver(elements);
                }
            }

            /* If a display was passed in, use it. Otherwise, default to "none" for fadeOut or the element-specific default for fadeIn. */
            /* Note: We allow users to pass in "null" to skip display setting altogether. */
            if (opts.display === undefined) {
                opts.display = (direction === "In" ? "auto" : "none");
            }

            Velocity(this, propertiesMap, opts);
        };
    });

    return Velocity;
}((window.jQuery || window.Zepto || window), window, document);
}));

/******************
   Known Issues
******************/

/* The CSS spec mandates that the translateX/Y/Z transforms are %-relative to the element itself -- not its parent.
Velocity, however, doesn't make this distinction. Thus, converting to or from the % unit with these subproperties
will produce an inaccurate conversion value. The same issue exists with the cx/cy attributes of SVG circles and ellipses. */

},{}]},{},["C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\main.js"])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXEFwcERhdGFcXFJvYW1pbmdcXG5wbVxcbm9kZV9tb2R1bGVzXFx3YXRjaGlmeVxcbm9kZV9tb2R1bGVzXFxicm93c2VyaWZ5XFxub2RlX21vZHVsZXNcXGJyb3dzZXItcGFja1xcX3ByZWx1ZGUuanMiLCIuLlxcLi5cXC4uXFxBcHBEYXRhXFxSb2FtaW5nXFxucG1cXG5vZGVfbW9kdWxlc1xcd2F0Y2hpZnlcXG5vZGVfbW9kdWxlc1xcYnJvd3NlcmlmeVxcbm9kZV9tb2R1bGVzXFxwcm9jZXNzXFxicm93c2VyLmpzIiwiU2NyaXB0c1xcYXBwXFxhcHAuY29udHJvbGxlci5qcyIsIlNjcmlwdHNcXGFwcFxcYXBwLm1vZGVsLmpzIiwiU2NyaXB0c1xcYXBwXFxhcHAucm91dGUuanMiLCJTY3JpcHRzXFxhcHBcXGFwcC5zZXR0aW5ncy5qcyIsIlNjcmlwdHNcXGFwcFxcY29udHJvbGxlcnNcXHRvZG8uY29udHJvbGxlci5qcyIsIlNjcmlwdHNcXGFwcFxcbW9kZWxzXFx0b2RvLm1vZGVsLmpzIiwiU2NyaXB0c1xcYXBwXFxtb2R1bGVzXFxjbGVhcnNjcmVlbi5tb2R1bGUuanMiLCJTY3JpcHRzXFxhcHBcXG1vZHVsZXNcXG1lbnUubW9kdWxlLmpzIiwiU2NyaXB0c1xcYXBwXFx2aWV3c1xcYXBwLnZpZXcuanMiLCJTY3JpcHRzXFxhcHBcXHZpZXdzXFx0b2RvLnZpZXcuanMiLCJTY3JpcHRzXFxjb250cm9scy5qcyIsIlNjcmlwdHNcXGNvcmUuanMiLCJTY3JpcHRzXFxqcXVlcnkuaG90a2V5cy5qcyIsIlNjcmlwdHNcXGtlbmRvXFwyMDE0LjMuMTExOVxcanF1ZXJ5Lm1pbi5qcyIsIlNjcmlwdHNcXGtlbmRvXFwyMDE0LjMuMTExOVxca2VuZG8ud2ViLm1pbi5qcyIsIlNjcmlwdHNcXGxheW91dC5qcyIsIlNjcmlwdHNcXG1haW4uanMiLCJTY3JpcHRzXFxtYXRlcmlhbC5taW4uanMiLCJTY3JpcHRzXFxtaXRocmlsLmpzIiwiU2NyaXB0c1xccmlwcGxlcy5taW4uanMiLCJTY3JpcHRzXFx2ZWxvY2l0eS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xEQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3o5QkE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxucHJvY2Vzcy5uZXh0VGljayA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNhblNldEltbWVkaWF0ZSA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgJiYgd2luZG93LnNldEltbWVkaWF0ZTtcbiAgICB2YXIgY2FuTXV0YXRpb25PYnNlcnZlciA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgJiYgd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXI7XG4gICAgdmFyIGNhblBvc3QgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJ1xuICAgICYmIHdpbmRvdy5wb3N0TWVzc2FnZSAmJiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lclxuICAgIDtcblxuICAgIGlmIChjYW5TZXRJbW1lZGlhdGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB3aW5kb3cuc2V0SW1tZWRpYXRlKGYpIH07XG4gICAgfVxuXG4gICAgdmFyIHF1ZXVlID0gW107XG5cbiAgICBpZiAoY2FuTXV0YXRpb25PYnNlcnZlcikge1xuICAgICAgICB2YXIgaGlkZGVuRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHF1ZXVlTGlzdCA9IHF1ZXVlLnNsaWNlKCk7XG4gICAgICAgICAgICBxdWV1ZS5sZW5ndGggPSAwO1xuICAgICAgICAgICAgcXVldWVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGhpZGRlbkRpdiwgeyBhdHRyaWJ1dGVzOiB0cnVlIH0pO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBuZXh0VGljayhmbikge1xuICAgICAgICAgICAgaWYgKCFxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBoaWRkZW5EaXYuc2V0QXR0cmlidXRlKCd5ZXMnLCAnbm8nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHF1ZXVlLnB1c2goZm4pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGlmIChjYW5Qb3N0KSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gZXYuc291cmNlO1xuICAgICAgICAgICAgaWYgKChzb3VyY2UgPT09IHdpbmRvdyB8fCBzb3VyY2UgPT09IG51bGwpICYmIGV2LmRhdGEgPT09ICdwcm9jZXNzLXRpY2snKSB7XG4gICAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZuID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHRydWUpO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBuZXh0VGljayhmbikge1xuICAgICAgICAgICAgcXVldWUucHVzaChmbik7XG4gICAgICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2UoJ3Byb2Nlc3MtdGljaycsICcqJyk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5leHRUaWNrKGZuKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZm4sIDApO1xuICAgIH07XG59KSgpO1xuXG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbi8vIFRPRE8oc2h0eWxtYW4pXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbiIsIi8vYXBwLmNvbnRyb2xsZXIuanNcclxudmFyIGFwcCA9IHJlcXVpcmUoJy4vYXBwLm1vZGVsLmpzJyk7XHJcblxyXG5hcHAuY29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcclxufVxyXG5cclxuLy9Ccm93c2VyaWZ5IERpcmVjdGl2ZXNcclxubW9kdWxlLmV4cG9ydHMgPSBhcHAuY29udHJvbGxlciIsIi8vYXBwLm1vZGVsLmpzXHJcbnZhciBhcHAgPSB7XHJcbn1cclxuXHJcbmFwcC5BcHAgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG59XHJcblxyXG5hcHAuY29udHJvbGxlciA9IHJlcXVpcmUoJy4vYXBwLmNvbnRyb2xsZXIuanMnKTtcclxuXHJcbmFwcC52aWV3ID0gcmVxdWlyZSgnLi92aWV3cy9hcHAudmlldy5qcycpO1xyXG5cclxuLy9Ccm93c2VyaWZ5IERpcmVjdGl2ZXNcclxubW9kdWxlLmV4cG9ydHMgPSBhcHA7IiwidmFyIG0gPSByZXF1aXJlKCcuLi9taXRocmlsLmpzJyk7XHJcbnZhciBhcHAgPSByZXF1aXJlKCcuL2FwcC5tb2RlbC5qcycpO1xyXG52YXIgc2V0dGluZ3MgPSByZXF1aXJlKCcuL2FwcC5zZXR0aW5ncy5qcycpO1xyXG52YXIgbWVudSA9IHJlcXVpcmUoJy4vbW9kdWxlcy9tZW51Lm1vZHVsZS5qcycpO1xyXG52YXIgdG9kbyA9IHJlcXVpcmUoJy4vbW9kZWxzL3RvZG8ubW9kZWwuanMnKTtcclxuXHJcbm0ucm91dGUubW9kZSA9IFwiaGFzaFwiO1xyXG5cclxuLy9zZXR1cCByb3V0ZXMgdG8gc3RhcnQgdy8gdGhlIGAvYCBzeW1ib2xcclxubS5yb3V0ZShzZXR0aW5ncy5yb290Q29udGFpbmVyLCBcIi9cIiwge1xyXG4gICAgXCIvXCI6IG1lbnUsXHJcbiAgICBcIi9ob21lXCI6IGFwcCxcclxuICAgIFwiL3Byb2ZpbGVcIjogYXBwLFxyXG4gICAgXCIvdG9kb1wiOiB0b2RvXHJcbn0pO1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vL2Egc2FtcGxlIG1vZHVsZVxyXG4vL3ZhciBkYXNoYm9hcmQgPSB7XHJcbi8vICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uICgpIHtcclxuLy8gICAgICAgIHRoaXMuaWQgPSBtLnJvdXRlLnBhcmFtKFwidXNlcklEXCIpO1xyXG4vLyAgICB9LFxyXG4vLyAgICB2aWV3OiBmdW5jdGlvbiAoY29udHJvbGxlcikge1xyXG4vLyAgICAgICAgcmV0dXJuIG0oXCJkaXZcIiwgY29udHJvbGxlci5pZCk7XHJcbi8vICAgIH1cclxuLy99XHJcblxyXG4vL3ZhciBwcm9maWxlID0ge1xyXG4vLyAgICBjb250cm9sbGVyOiBmdW5jdGlvbiAoKSB7XHJcbi8vICAgICAgICB0aGlzLmlkID0gbS5yb3V0ZS5wYXJhbShcInVzZXJJRFwiKTtcclxuLy8gICAgfSxcclxuLy8gICAgdmlldzogZnVuY3Rpb24gKGNvbnRyb2xsZXIpIHtcclxuLy8gICAgICAgIHJldHVybiBtKFwiZGl2XCIpO1xyXG4vLyAgICB9XHJcbi8vfVxyXG5cclxuLy9kZWZpbmUgYSByb3V0ZVxyXG4vL20ucm91dGUoJHJvb3RDb250YWluZXIsIFwiL3Byb2ZpbGUvam9obmRvZVwiLCB7XHJcbi8vICAgIFwiL3Byb2ZpbGUvOnVzZXJJRFwiOiBkYXNoYm9hcmRcclxuLy99KTsiLCJ2YXIgc2V0dGluZ3MgPSB7XHJcbiAgICByb290Q29udGFpbmVyIDogZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNvbnRhaW5lclwiKVswXVxyXG59O1xyXG4vL0Jyb3dzZXJpZnkgRGlyZWN0aXZlc1xyXG5tb2R1bGUuZXhwb3J0cyA9IHNldHRpbmdzOyIsInZhciBtID0gcmVxdWlyZSgnLi4vLi4vbWl0aHJpbC5qcycpO1xyXG52YXIgdG9kbyA9IHJlcXVpcmUoJy4uL21vZGVscy90b2RvLm1vZGVsLmpzJyk7XHJcblxyXG50b2RvLmNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmxpc3QgPSBuZXcgdG9kby5Ub2RvTGlzdCgpO1xyXG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IG0ucHJvcChcIlwiKTtcclxuXHJcbiAgICB0aGlzLmFkZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5kZXNjcmlwdGlvbigpKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdC5wdXNoKG5ldyB0b2RvLlRvZG8oeyBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbigpIH0pKTtcclxuICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbihcIlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9LmJpbmQodGhpcyk7XHJcbn1cclxuXHJcbi8vQnJvd3NlcmlmeSBEaXJlY3RpdmVzXHJcbm1vZHVsZS5leHBvcnRzID0gdG9kby5jb250cm9sbGVyIiwidmFyIG0gPSByZXF1aXJlKCcuLi8uLi9taXRocmlsLmpzJyk7XHJcbnZhciB0b2RvID0ge31cclxuXHJcbnRvZG8uVG9kbyA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gbS5wcm9wKGRhdGEuZGVzY3JpcHRpb24pO1xyXG4gICAgdGhpcy5kb25lID0gbS5wcm9wKGZhbHNlKTtcclxufVxyXG5cclxudG9kby5Ub2RvTGlzdCA9IEFycmF5O1xyXG5cclxuLy9Ccm93c2VyaWZ5IERpcmVjdGl2ZXNcclxubW9kdWxlLmV4cG9ydHMgPSB0b2RvOyAvLzwtLSBUaGlzIGV4cG9ydCBoYXMgdG8gYmUgYmVmb3JlIHRoZSByZXF1aXJlcyBmb3IgdG9kby5jb250cm9sbGVyLCBiZWNhdXNlIHRvZG8uY29udHJvbGxlciByZWxpZXMgb24gdG9kbyBtb2R1bGUgKGNpcmN1bGFyIGRlcGVuZGVuY3kpXHJcblxyXG50b2RvLmNvbnRyb2xsZXIgPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy90b2RvLmNvbnRyb2xsZXIuanMnKTtcclxuXHJcbnRvZG8udmlldyA9IHJlcXVpcmUoJy4uL3ZpZXdzL3RvZG8udmlldy5qcycpOyIsInZhciBjbGVhclNjcmVlbiA9IHt9XHJcbmNsZWFyU2NyZWVuLmNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG59XHJcbmNsZWFyU2NyZWVuLnZpZXcgPSBmdW5jdGlvbiAoKSB7IH0iLCJ2YXIgbSA9IHJlcXVpcmUoJy4uLy4uL21pdGhyaWwuanMnKTtcclxudmFyIG1lbnUgPSB7fVxyXG5cclxubWVudS5NZW51ID0gZnVuY3Rpb24gKGRhdGEpIHtcclxufVxyXG5cclxubWVudS5jb250cm9sbGVyID0gZnVuY3Rpb24gKCkge1xyXG59XHJcblxyXG5tZW51LnZpZXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgIFttKFwiLm1haW5cIiwgWyAgICAgICAgICAgIFxyXG5cdFx0ICAgICAgICBtKFwidWwudGlsZS1ncmlkLmNsZWFyZml4W2lkPSd0aWxlLWdyaWQnXVwiLCBbXHJcblx0XHRcdCAgICAgICAgbShcImxpLnRpbGUuaWNvbi1jbGltYS0yXCIsIFtcclxuXHRcdFx0XHQgICAgICAgIG0oXCJoM1wiLCBcIlJlZ2lzdGVyXCIpLFxyXG5cdFx0XHRcdCAgICAgICAgbShcIi50aWxlLW92ZXJsYXlcIiwgW1xyXG5cdFx0XHRcdFx0ICAgICAgICBtKFwic3Bhbi50aWxlLWNsb3NlXCIsIFwiY2xvc2VcIilcclxuXHRcdFx0XHQgICAgICAgIF0pXHJcblx0XHRcdCAgICAgICAgXSksXHJcblx0XHRcdCAgICAgICAgbShcImxpLnRpbGUuaWNvbi1jbGltYS0xXCIsIHsgb25jbGljazogZnVuY3Rpb24gKCkgeyB3aW5kb3cubG9jYXRpb24gPSAnLyMvaG9tZSc7IH0gfSwgW1xyXG5cdFx0XHRcdCAgICAgICAgbShcImgzXCIsIFwiRGFzaGJvYXJkXCIpLFxyXG5cdFx0XHRcdCAgICAgICAgbShcIi50aWxlLW92ZXJsYXlcIiwgW1xyXG5cdFx0XHRcdFx0ICAgICAgICBtKFwic3Bhbi50aWxlLWNsb3NlXCIsIFwiY2xvc2VcIilcclxuXHRcdFx0XHQgICAgICAgIF0pXHJcblx0XHRcdCAgICAgICAgXSksXHJcblx0XHRcdCAgICAgICAgbShcImxpLnRpbGUuaWNvbi1jbGltYS00XCIsIFtcclxuXHRcdFx0XHQgICAgICAgIG0oXCJoM1wiLCBcIkFkbWluXCIpLFxyXG5cdFx0XHRcdCAgICAgICAgbShcIi50aWxlLW92ZXJsYXlcIiwgW1xyXG5cdFx0XHRcdFx0ICAgICAgICBtKFwic3Bhbi50aWxlLWNsb3NlXCIsIFwiY2xvc2VcIilcclxuXHRcdFx0XHQgICAgICAgIF0pXHJcblx0XHRcdCAgICAgICAgXSksXHJcblx0XHRcdCAgICAgICAgbShcImxpLnRpbGUuaWNvbi1jbGltYS0xXCIsIHsgb25jbGljazogZnVuY3Rpb24gKCkgeyB3aW5kb3cubG9jYXRpb24gPSAnLyMvdG9kbyc7fSB9LCBbXHJcblx0XHRcdFx0ICAgICAgICBtKFwiaDNcIiwgXCJ0b2RvXCIpLFxyXG5cdFx0XHRcdCAgICAgICAgbShcIi50aWxlLW92ZXJsYXlcIiwgW1xyXG5cdFx0XHRcdFx0ICAgICAgICBtKFwic3Bhbi50aWxlLWNsb3NlXCIsIFwiY2xvc2VcIilcclxuXHRcdFx0XHQgICAgICAgIF0pXHJcblx0XHRcdCAgICAgICAgXSksXHJcblx0XHRcdCAgICAgICAgbShcImxpLnRpbGUuaWNvbi1jbGltYS0xLnRpbGUtc3Bhbi0yXCIsIFtcclxuXHRcdFx0XHQgICAgICAgIG0oXCJoM1wiKSxcclxuXHRcdFx0XHQgICAgICAgIG0oXCJzcGFuLnRpbGUtdGVtcFwiKSxcclxuXHRcdFx0XHQgICAgICAgIG0oXCIudGlsZS1vdmVybGF5XCIsIFtcclxuXHRcdFx0XHRcdCAgICAgICAgbShcInNwYW4udGlsZS1jbG9zZVwiLCBcImNsb3NlXCIpXHJcblx0XHRcdFx0ICAgICAgICBdKVxyXG5cdFx0XHQgICAgICAgIF0pLFxyXG5cdFx0XHQgICAgICAgIG0oXCJsaS50aWxlLmljb24tY2xpbWEtMVwiLCBbXHJcblx0XHRcdFx0ICAgICAgICBtKFwiaDNcIiksXHJcblx0XHRcdFx0ICAgICAgICBtKFwic3Bhbi50aWxlLXRlbXBcIiksXHJcblx0XHRcdFx0ICAgICAgICBtKFwiLnRpbGUtb3ZlcmxheVwiLCBbXHJcblx0XHRcdFx0XHQgICAgICAgIG0oXCJzcGFuLnRpbGUtY2xvc2VcIiwgXCJjbG9zZVwiKVxyXG5cdFx0XHRcdCAgICAgICAgXSlcclxuXHRcdFx0ICAgICAgICBdKSxcclxuXHRcdFx0ICAgICAgICBtKFwibGkudGlsZS5pY29uLWNsaW1hLTJcIiwgW1xyXG5cdFx0XHRcdCAgICAgICAgbShcImgzXCIpLFxyXG5cdFx0XHRcdCAgICAgICAgbShcInNwYW4udGlsZS10ZW1wXCIpLFxyXG5cdFx0XHRcdCAgICAgICAgbShcIi50aWxlLW92ZXJsYXlcIiwgW1xyXG5cdFx0XHRcdFx0ICAgICAgICBtKFwic3Bhbi50aWxlLWNsb3NlXCIsIFwiY2xvc2VcIilcclxuXHRcdFx0XHQgICAgICAgIF0pXHJcblx0XHRcdCAgICAgICAgXSksXHJcblx0XHRcdCAgICAgICAgbShcImxpLnRpbGUuaWNvbi1jbGltYS0xMVwiLCBbXHJcblx0XHRcdFx0ICAgICAgICBtKFwiaDNcIiksXHJcblx0XHRcdFx0ICAgICAgICBtKFwic3Bhbi50aWxlLXRlbXBcIiksXHJcblx0XHRcdFx0ICAgICAgICBtKFwiLnRpbGUtb3ZlcmxheVwiLCBbXHJcblx0XHRcdFx0XHQgICAgICAgIG0oXCJzcGFuLnRpbGUtY2xvc2VcIiwgXCJjbG9zZVwiKVxyXG5cdFx0XHRcdCAgICAgICAgXSlcclxuXHRcdFx0ICAgICAgICBdKSxcclxuXHRcdFx0ICAgICAgICBtKFwibGkudGlsZS5pY29uLWNsaW1hLTJcIiwgW1xyXG5cdFx0XHRcdCAgICAgICAgbShcImgzXCIpLFxyXG5cdFx0XHRcdCAgICAgICAgbShcInNwYW4udGlsZS10ZW1wXCIpLFxyXG5cdFx0XHRcdCAgICAgICAgbShcIi50aWxlLW92ZXJsYXlcIiwgW1xyXG5cdFx0XHRcdFx0ICAgICAgICBtKFwic3Bhbi50aWxlLWNsb3NlXCIsIFwiY2xvc2VcIilcclxuXHRcdFx0XHQgICAgICAgIF0pXHJcblx0XHRcdCAgICAgICAgXSksXHJcblx0XHRcdCAgICAgICAgbShcImxpLnRpbGUuaWNvbi1jbGltYS0yLnRpbGUtc3Bhbi0yXCIsIFtcclxuXHRcdFx0XHQgICAgICAgIG0oXCJoM1wiKSxcclxuXHRcdFx0XHQgICAgICAgIG0oXCJzcGFuLnRpbGUtdGVtcFwiKSxcclxuXHRcdFx0XHQgICAgICAgIG0oXCIudGlsZS1vdmVybGF5XCIsIFtcclxuXHRcdFx0XHRcdCAgICAgICAgbShcInNwYW4udGlsZS1jbG9zZVwiLCBcImNsb3NlXCIpXHJcblx0XHRcdFx0ICAgICAgICBdKVxyXG5cdFx0XHQgICAgICAgIF0pLFxyXG5cdFx0XHQgICAgICAgIG0oXCJsaS50aWxlLmljb24tY2xpbWEtNC50aWxlLXNwYW4tNFwiLCBbXHJcblx0XHRcdFx0ICAgICAgICBtKFwiaDNcIiksXHJcblx0XHRcdFx0ICAgICAgICBtKFwic3Bhbi50aWxlLXRlbXBcIiksXHJcblx0XHRcdFx0ICAgICAgICBtKFwiLnRpbGUtb3ZlcmxheVwiLCBbXHJcblx0XHRcdFx0XHQgICAgICAgIG0oXCJzcGFuLnRpbGUtY2xvc2VcIiwgXCJjbG9zZVwiKVxyXG5cdFx0XHRcdCAgICAgICAgXSlcclxuXHRcdFx0ICAgICAgICBdKVxyXG5cdFx0ICAgICAgICBdKVxyXG4gICAgICAgIF0pXVxyXG4gICAgXTtcclxufVxyXG5cclxuLy9Ccm93c2VyaWZ5IERpcmVjdGl2ZXNcclxubW9kdWxlLmV4cG9ydHMgPSBtZW51IiwiLy9hcHAudmlldy5qc1xyXG52YXIgbSA9IHJlcXVpcmUoJy4uLy4uL21pdGhyaWwuanMnKTtcclxudmFyIGFwcCA9IHJlcXVpcmUoJy4uL2FwcC5tb2RlbC5qcycpO1xyXG52YXIgQ29udHJvbHMgPSByZXF1aXJlKCcuLi8uLi9jb250cm9scy5qcycpO1xyXG5jb250cm9scyA9IG5ldyBDb250cm9scygpO1xyXG5cclxuYXBwLnZpZXcgPSBmdW5jdGlvbiAoY3RybCkge1xyXG4gICAgcmV0dXJuIFtcclxuXHRtKFwiLmp1bWJvdHJvblwiLCBbXHJcblx0XHRtKFwiaDFcIiwgXCJBU1AuTkVUXCIpLFxyXG5cdFx0bShcInAubGVhZFwiLCBcIkFTUC5ORVQgaXMgYSBmcmVlIHdlYiBmcmFtZXdvcmsgZm9yIGJ1aWxkaW5nIGdyZWF0IFdlYiBzaXRlcyBhbmQgV2ViIGFwcGxpY2F0aW9ucyB1c2luZyBIVE1MLCBDU1MsIGFuZCBKYXZhU2NyaXB0LlwiKSxcclxuXHRcdG0oXCJwXCIsIFtcclxuICAgICAgICAgICAgW20oXCJidXR0b24uYnRuLmJ0bi1wcmltYXJ5LmJ0bi1sZ1tpZD0naGl0bWUnXVwiLCB7IG9uY2xpY2sgOiBmdW5jdGlvbiAoKSB7IG5ldyBjb250cm9scy5Qb3B1cERpYWxvZygpLnNob3cobnVsbCwgJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjb250aW51ZT8nLCAnQ29uZmlybWF0aW9uIE5lZWRlZCcsIGZ1bmN0aW9uICgpIHsgYWxlcnQoJ1lvdSBwcmVzc2VkIFllcyBeXicpO30sIGZ1bmN0aW9uICgpIHsgYWxlcnQoJ1lvdSBwcmVzc2VkIE5vIFRUJyk7fSk7fSB9LCBcIkhpdCBNZSFcIiksIFwiXFxuXCIsXHJcbiAgICAgICAgICAgICBtKFwiYnV0dG9uLmJ0bi5idG4tcHJpbWFyeS5idG4tbGdbaWQ9J3llcyddXCIsIHsgb25jbGljazogZnVuY3Rpb24gKCkgeyBjb250cm9scy5zaG93Tm90aWZpY2F0aW9uKCdZRVMhIScsICdKdXN0IGEgVGVzdCcsICdTdWNjZXNzJywgNTAwMCwgMzAsIDMwLCBudWxsKTsgfSB9LCBcIlllc1wiKSwgXCJcXG5cIixcclxuICAgICAgICAgICAgIG0oXCJidXR0b24uYnRuLmJ0bi1wcmltYXJ5LmJ0bi1sZ1tpZD0nbm8nXVwiLCB7IG9uY2xpY2s6IGZ1bmN0aW9uICgpIHsgY29udHJvbHMuc2hvd05vdGlmaWNhdGlvbignTk8hIScsICdKdXN0IGEgVGVzdCcsICdFcnJvcicsIDUwMDAsIGNvbnRyb2xzLm5vdGlmaWNhdGlvblJpZ2h0UG9zLCBjb250cm9scy5ub3RpZmljYXRpb25Ub3BQb3MsIG51bGwpOyB9IH0sIFwiTm9cIiksIFwiXFxuXCIsXHJcbiAgICAgICAgICAgICBtKFwiYnV0dG9uLmJ0bi5idG4tcHJpbWFyeS5idG4tbGdbaWQ9J21heWJlJ11cIiwgeyBvbmNsaWNrOiBmdW5jdGlvbiAoKSB7IGNvbnRyb2xzLnNob3dOb3RpZmljYXRpb24oJ01BWUJFIFNPLi4uJywgJ0p1c3QgYSBUZXN0JywgJ1dhcm5pbmcnLCA1MDAwLCBjb250cm9scy5ub3RpZmljYXRpb25SaWdodFBvcywgY29udHJvbHMubm90aWZpY2F0aW9uVG9wUG9zLCBudWxsKTsgfSB9LCBcIk1heWJlIFNvXCIpXVxyXG5cdFx0XSlcclxuXHRdKSxcclxuXHRtKFwiLnJvd1wiLCBbXHJcblx0XHRtKFwiLmNvbC1tZC00XCIsIFtcclxuXHRcdFx0bShcImgyXCIsIFwiWW91ciBpbmZvcm1hdGlvblwiKSxcclxuXHRcdFx0bShcInBcIiwgXCJUaGlzIHNlY3Rpb24gc2hvd3MgaG93IHlvdSBjYW4gY2FsbCBBU1AuTkVUIFdlYiBBUEkgdG8gZ2V0IHRoZSB1c2VyIGRldGFpbHMuXCIpLFxyXG5cdFx0XHRtKFwicFtkYXRhLWJpbmQ9J3RleHQ6IG15SG9tZXRvd24nXVwiKSxcclxuXHRcdFx0bShcInBcIiwgW20oXCJhLmJ0bi5idG4tZGVmYXVsdFtocmVmPSdodHRwOi8vZ28ubWljcm9zb2Z0LmNvbS9md2xpbmsvP0xpbmtJZD0yNzM3MzInXVwiLCBcIkxlYXJuIG1vcmUgwrtcIildKVxyXG5cdFx0XSksXHJcblx0XHRtKFwiLmNvbC1tZC00XCIsIFtcclxuXHRcdFx0bShcImgyXCIsIFwiR2V0dGluZyBzdGFydGVkXCIpLFxyXG5cdFx0XHRtKFwicFwiLCBcIlxcbiAgICAgICAgICAgICAgICAgICAgQVNQLk5FVCBTaW5nbGUgUGFnZSBBcHBsaWNhdGlvbiAoU1BBKSBoZWxwcyB5b3UgYnVpbGQgYXBwbGljYXRpb25zIHRoYXQgaW5jbHVkZSBzaWduaWZpY2FudCBjbGllbnQtc2lkZSBpbnRlcmFjdGlvbnMgdXNpbmcgSFRNTCwgQ1NTLCBhbmQgSmF2YVNjcmlwdC5cXG4gICAgICAgICAgICAgICAgICAgIEl0J3Mgbm93IGVhc2llciB0aGFuIGV2ZXIgYmVmb3JlIHRvIGdldHRpbmcgc3RhcnRlZCB3cml0aW5nIGhpZ2hseSBpbnRlcmFjdGl2ZSB3ZWIgYXBwbGljYXRpb25zLlxcbiAgICAgICAgICAgICAgICBcIiksXHJcblx0XHRcdG0oXCJwXCIsIFttKFwiYS5idG4uYnRuLWRlZmF1bHRbaHJlZj0naHR0cDovL2dvLm1pY3Jvc29mdC5jb20vZndsaW5rLz9MaW5rSWQ9MjczNzMyJ11cIiwgXCJMZWFybiBtb3JlIMK7XCIpXSlcclxuXHRcdF0pLFxyXG5cdFx0bShcIi5jb2wtbWQtNFwiLCBbXHJcblx0XHRcdG0oXCJoMlwiLCBcIldlYiBIb3N0aW5nXCIpLFxyXG5cdFx0XHRtKFwicFwiLCBcIllvdSBjYW4gZWFzaWx5IGZpbmQgYSB3ZWIgaG9zdGluZyBjb21wYW55IHRoYXQgb2ZmZXJzIHRoZSByaWdodCBtaXggb2YgZmVhdHVyZXMgYW5kIHByaWNlIGZvciB5b3VyIGFwcGxpY2F0aW9ucy5cIiksXHJcblx0XHRcdG0oXCJwXCIsIFttKFwiYS5idG4uYnRuLWRlZmF1bHRbaHJlZj0naHR0cDovL2dvLm1pY3Jvc29mdC5jb20vZndsaW5rLz9MaW5rSWQ9MzAxODY3J11cIiwgXCJMZWFybiBtb3JlIMK7XCIpXSlcclxuXHRcdF0pXHJcblx0XSlcclxuICAgIF07XHJcbn1cclxuXHJcbi8vQnJvd3NlcmlmeSBEaXJlY3RpdmVzXHJcbm1vZHVsZS5leHBvcnRzID0gYXBwLnZpZXciLCIvKipcclxuICogSlNYIHZlcnNpb24gb2YgdGhlIE1pdGhyaWwgR2V0dGluZyBTdGFydGVkIGRvY3VtZW50YXRpb24ncyBUT0RPIGV4YW1wbGUuXHJcbiAqIGh0dHA6Ly9saG9yaWUuZ2l0aHViLmlvL21pdGhyaWwvZ2V0dGluZy1zdGFydGVkLmh0bWxcclxuICogQGpzeCBtXHJcbiAqL1xyXG52YXIgbSA9IHJlcXVpcmUoJy4uLy4uL21pdGhyaWwuanMnKTtcclxudmFyIHRvZG8gPSByZXF1aXJlKCcuLi9tb2RlbHMvdG9kby5tb2RlbC5qcycpO1xyXG5cclxudG9kby52aWV3ID0gZnVuY3Rpb24gKGN0cmwpIHtcclxuICAgIHJldHVybiBtKFwiaHRtbFwiLCBbXHJcbiAgICAgICAgbShcImJvZHlcIiwgW1xyXG4gICAgICAgICAgICBtKFwiaW5wdXRcIiwgIHtvbmNoYW5nZTptLndpdGhBdHRyKCd2YWx1ZScsIGN0cmwuZGVzY3JpcHRpb24pLCB2YWx1ZTogY3RybC5kZXNjcmlwdGlvbigpfSksICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG0oXCJidXR0b25cIiwge29uY2xpY2s6Y3RybC5hZGR9LCBbXCJBZGRcIl0pLFxyXG4gICAgICAgICAgICBtKFwidGFibGVcIiwgWyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY3RybC5saXN0Lm1hcChmdW5jdGlvbiAodGFzaywgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbShcInRyXCIsIFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbShcInRkXCIsIFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0oXCJpbnB1dFwiLCAge3R5cGU6J2NoZWNrYm94Jywgb25jbGljazogbS53aXRoQXR0cignY2hlY2tlZCcsIHRhc2suZG9uZSksIGNoZWNrZWQ6IHRhc2suZG9uZSgpfSkgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgXSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0oXCJ0ZFwiLCB7c3R5bGU6e3RleHREZWNvcmF0aW9uOiB0YXNrLmRvbmUoKSA/ICdsaW5lLXRocm91Z2gnIDogJ25vbmUnfX0sIFt0YXNrLmRlc2NyaXB0aW9uKCldKVxyXG4gICAgICAgICAgICAgICAgICAgIF0pXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBdKVxyXG4gICAgICAgIF0pXHJcbiAgICBdKVxyXG59XHJcbi8vQnJvd3NlcmlmeSBEaXJlY3RpdmVzXHJcbm1vZHVsZS5leHBvcnRzID0gdG9kby52aWV3IiwiLy8qKioqKioqKioqKioqKioqKioqKioqKlxyXG4vLyNyZWdpb24gS2VuZG8gVUkgQ29udHJvbHNcclxuLy8qKioqKioqKioqKioqKioqKioqKioqKlxyXG52YXIgY29udHJvbHMgPSBmdW5jdGlvbigpe1xyXG4gICAgdGhpcy5ub3RpZmljYXRpb25SaWdodFBvcyA9IDMwO1xyXG4gICAgdGhpcy5ub3RpZmljYXRpb25Ub3BQb3MgPSAzMDtcclxuICAgIC8vI3JlZ2lvbiBOb3RpZmljYXRpb24gTWVzc2FnZXNcclxuICAgIHRoaXMuZ2V0RGlhbG9nQ3JpdGljYWxpdHkgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgIGlmIChtZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignc3VjY2VzcycpID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJTdWNjZXNzXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignZXJyb3InKSA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiRXJyb3JcIjtcclxuICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdmYWlsJykgPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIkVycm9yXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiV2FybmluZ1wiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuc2hvd05vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uIChtZXNzYWdlVGV4dCwgdGl0bGVUZXh0LCBtb2RlLCB0aW1lT3V0LCBwb3NSaWdodCwgcG9zVG9wLCBhcHBlbmRUbykge1xyXG4gICAgICAgIHZhciBhcHBlbmRUYXJnZXQgPSBhcHBlbmRUbztcclxuICAgICAgICBpZiAodHlwZW9mIChub3RpZmljYXRpb25IYW5kbGUpID09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9uSGFuZGxlID0gJChcIiNub3RpZmljYXRpb25TcGFuXCIpLmtlbmRvTm90aWZpY2F0aW9uKHtcclxuICAgICAgICAgICAgICAgIFwicG9zaXRpb25cIjogeyBcInJpZ2h0XCI6IHBvc1JpZ2h0LCBcInRvcFwiOiBwb3NUb3AgfSxcclxuICAgICAgICAgICAgICAgIFwiYXV0b0hpZGVBZnRlclwiOiB0aW1lT3V0LFxyXG4gICAgICAgICAgICAgICAgXCJzdGFja2luZ1wiOiBcImRvd25cIixcclxuICAgICAgICAgICAgICAgIFwidGVtcGxhdGVzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IFwidHlwZVwiOiBcImVycm9yXCIsIFwidGVtcGxhdGVJZFwiOiBcImVycm9yVGVtcGxhdGVcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgXCJ0eXBlXCI6IFwid2FybmluZ1wiLCBcInRlbXBsYXRlSWRcIjogXCJ3YXJuaW5nVGVtcGxhdGVcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgXCJ0eXBlXCI6IFwic3VjY2Vzc1wiLCBcInRlbXBsYXRlSWRcIjogXCJzdWNjZXNzVGVtcGxhdGVcIiB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbm90aWZpY2F0aW9uID0gJChcIiNub3RpZmljYXRpb25TcGFuXCIpLmRhdGEoXCJrZW5kb05vdGlmaWNhdGlvblwiKTtcclxuICAgICAgICBub3RpZmljYXRpb24uc2hvdyh7XHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VUZXh0LFxyXG4gICAgICAgICAgICB0aXRsZTogdGl0bGVUZXh0LFxyXG4gICAgICAgIH0sIG1vZGUudG9Mb3dlckNhc2UoKSk7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb24gTm90aWZpY2F0aW9uIE1lc3NhZ2VzXHJcbiAgICAvLyNyZWdpb24gUG9wdXAgRGlhbG9nXHJcbiAgICB0aGlzLlBvcHVwRGlhbG9nID0gZnVuY3Rpb24gKG11dGUpIHtcclxuICAgICAgICB0aGlzLm11dGUgPSBtdXRlO1xyXG5cclxuICAgICAgICB0aGlzLnNob3cgPSBmdW5jdGlvbiAoZSwgbWVzc2FnZVRleHQsIHRpdGxlVGV4dCwgY29uZmlybUNhbGxiYWNrLCBjYW5jZWxDYWxsYmFjaykge1xyXG4gICAgICAgICAgICB2YXIgZGZkID0gbmV3ICQuRGVmZXJyZWQoKTsgLy9Qcm9taXNlIG9iamVjdCB0byBwZXJmb3JtIGFjdGlvbnMgYmFzZWQgb24gdXNlciBpbnB1dCAgICAgICAgXHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5tdXRlID09IGZhbHNlICYmIGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlLnByZXZlbnREZWZhdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZSA9ICQuZXZlbnQuZml4KGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobWVzc2FnZVRleHQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgJChcIiNtb2RhbC1jb25maXJtYXRpb25cIikuaHRtbChcIjxkaXYgY2xhc3M9XFxcImNvbmZpcm1Db250ZW50XFxcIj48cCBjbGFzcz1cXFwibW9kYWwtbWVzc2FnZVxcXCI+XCIgKyBtZXNzYWdlVGV4dCArIFwiPC9wPjxidXR0b24gY2xhc3M9XFxcIm1vZGFsLWNvbmZpcm0gay1idXR0b25cXFwiPlllczwvYnV0dG9uPiZuYnNwOzxidXR0b24gY2xhc3M9XFxcIm1vZGFsLWNhbmNlbCBrLWJ1dHRvblxcXCI+Tm88L2J1dHRvbj48L2Rpdj5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGtlbmRvV2luZG93ID0gJChcIjxkaXYgLz5cIikua2VuZG9XaW5kb3coe1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDQwMCxcclxuICAgICAgICAgICAgICAgIC8vaGVpZ2h0OiAxMjAsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGVUZXh0LFxyXG4gICAgICAgICAgICAgICAgcmVzaXphYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIG1vZGFsOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubXV0ZSA9PSBmYWxzZSB8fCB0aGlzLm11dGUgPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBrZW5kb1dpbmRvdy5kYXRhKFwia2VuZG9XaW5kb3dcIilcclxuICAgICAgICAgICAgICAgICAgICAuY29udGVudCgkKFwiI21vZGFsLWNvbmZpcm1hdGlvblwiKS5odG1sKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNlbnRlcigpLm9wZW4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBrZW5kb1dpbmRvdy5maW5kKFwiLm1vZGFsLWNvbmZpcm0sLm1vZGFsLWNhbmNlbFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoXCJtb2RhbC1jb25maXJtXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRmZC5yZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQuY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maXJtQ2FsbGJhY2sgIT09IHVuZGVmaW5lZCAmJiBjb25maXJtQ2FsbGJhY2sgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1DYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKFwibW9kYWwtY2FuY2VsXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYW5jZWxDYWxsYmFjayAhPT0gdW5kZWZpbmVkICYmIGNhbmNlbENhbGxiYWNrICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbENhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGZkLnJlc29sdmUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBrZW5kb1dpbmRvdy5kYXRhKFwia2VuZG9XaW5kb3dcIikuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1DYWxsYmFjayAhPT0gdW5kZWZpbmVkICYmIGNvbmZpcm1DYWxsYmFjayAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlybUNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkZmQucmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGRmZC5wcm9taXNlKCk7IC8vUmV0dXJucyBhIHByb21pc2VcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb24gUG9wdXAgRGlhbG9nIFNlY3Rpb25cclxufVxyXG5tb2R1bGUuZXhwb3J0cyA9IGNvbnRyb2xzO1xyXG5cclxuLy8qKioqKioqKioqKioqKioqKioqKioqKlxyXG4vLyNlbmRyZWdpb24gXHJcbi8vKioqKioqKioqKioqKioqKioqKioqKioiLCIvLyNyZWdpb24gS2V5Ym9hcmQgU2hvcnRjdXRzXHJcbiAgICBqUXVlcnkoZG9jdW1lbnQpLmJpbmQoJ2tleXByZXNzJywgJ2QnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAkKFwiI0Ryb3Bkb3duXCIpLnRyaWdnZXIoXCJjbGlja1wiKTtcclxuICAgIH0pO1xyXG4gICAgalF1ZXJ5KGRvY3VtZW50KS5iaW5kKCdrZXlwcmVzcycsICdoJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgJChcIiNoaXRtZVwiKS50cmlnZ2VyKFwiY2xpY2tcIik7XHJcbiAgICB9KTtcclxuICAgIGpRdWVyeShkb2N1bWVudCkuYmluZCgna2V5cHJlc3MnLCAneScsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICQoXCIjeWVzXCIpLnRyaWdnZXIoXCJjbGlja1wiKTtcclxuICAgIH0pO1xyXG4gICAgalF1ZXJ5KGRvY3VtZW50KS5iaW5kKCdrZXlwcmVzcycsICduJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgJChcIiNub1wiKS50cmlnZ2VyKFwiY2xpY2tcIik7XHJcbiAgICB9KTtcclxuICAgIGpRdWVyeShkb2N1bWVudCkuYmluZCgna2V5cHJlc3MnLCAnbScsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICQoXCIjbWF5YmVcIikudHJpZ2dlcihcImNsaWNrXCIpO1xyXG4gICAgfSk7XHJcbi8vI2VuZHJlZ2lvbiBLZXlib2FyZCBTaG9ydGN1dHMiLCIvKmpzbGludCBicm93c2VyOiB0cnVlKi9cclxuLypqc2xpbnQganF1ZXJ5OiB0cnVlKi9cclxuXHJcbi8qXHJcbiAqIGpRdWVyeSBIb3RrZXlzIFBsdWdpblxyXG4gKiBDb3B5cmlnaHQgMjAxMCwgSm9obiBSZXNpZ1xyXG4gKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy5cclxuICpcclxuICogQmFzZWQgdXBvbiB0aGUgcGx1Z2luIGJ5IFR6dXJ5IEJhciBZb2NoYXk6XHJcbiAqIGh0dHA6Ly9naXRodWIuY29tL3R6dXJ5YnkvaG90a2V5c1xyXG4gKlxyXG4gKiBPcmlnaW5hbCBpZGVhIGJ5OlxyXG4gKiBCaW5ueSBWIEEsIGh0dHA6Ly93d3cub3BlbmpzLmNvbS9zY3JpcHRzL2V2ZW50cy9rZXlib2FyZF9zaG9ydGN1dHMvXHJcbiAqL1xyXG5cclxuLypcclxuICogT25lIHNtYWxsIGNoYW5nZSBpczogbm93IGtleXMgYXJlIHBhc3NlZCBieSBvYmplY3QgeyBrZXlzOiAnLi4uJyB9XHJcbiAqIE1pZ2h0IGJlIHVzZWZ1bCwgd2hlbiB5b3Ugd2FudCB0byBwYXNzIHNvbWUgb3RoZXIgZGF0YSB0byB5b3VyIGhhbmRsZXJcclxuICovXHJcbnZhciBqUXVlcnkgPSByZXF1aXJlKCcuL2tlbmRvLzIwMTQuMy4xMTE5L2pxdWVyeS5taW4uanMnKTtcclxuKGZ1bmN0aW9uKGpRdWVyeSkge1xyXG5cclxuICBqUXVlcnkuaG90a2V5cyA9IHtcclxuICAgIHZlcnNpb246IFwiMC44XCIsXHJcblxyXG4gICAgc3BlY2lhbEtleXM6IHtcclxuICAgICAgODogXCJiYWNrc3BhY2VcIixcclxuICAgICAgOTogXCJ0YWJcIixcclxuICAgICAgMTA6IFwicmV0dXJuXCIsXHJcbiAgICAgIDEzOiBcInJldHVyblwiLFxyXG4gICAgICAxNjogXCJzaGlmdFwiLFxyXG4gICAgICAxNzogXCJjdHJsXCIsXHJcbiAgICAgIDE4OiBcImFsdFwiLFxyXG4gICAgICAxOTogXCJwYXVzZVwiLFxyXG4gICAgICAyMDogXCJjYXBzbG9ja1wiLFxyXG4gICAgICAyNzogXCJlc2NcIixcclxuICAgICAgMzI6IFwic3BhY2VcIixcclxuICAgICAgMzM6IFwicGFnZXVwXCIsXHJcbiAgICAgIDM0OiBcInBhZ2Vkb3duXCIsXHJcbiAgICAgIDM1OiBcImVuZFwiLFxyXG4gICAgICAzNjogXCJob21lXCIsXHJcbiAgICAgIDM3OiBcImxlZnRcIixcclxuICAgICAgMzg6IFwidXBcIixcclxuICAgICAgMzk6IFwicmlnaHRcIixcclxuICAgICAgNDA6IFwiZG93blwiLFxyXG4gICAgICA0NTogXCJpbnNlcnRcIixcclxuICAgICAgNDY6IFwiZGVsXCIsXHJcbiAgICAgIDU5OiBcIjtcIixcclxuICAgICAgNjE6IFwiPVwiLFxyXG4gICAgICA5NjogXCIwXCIsXHJcbiAgICAgIDk3OiBcIjFcIixcclxuICAgICAgOTg6IFwiMlwiLFxyXG4gICAgICA5OTogXCIzXCIsXHJcbiAgICAgIDEwMDogXCI0XCIsXHJcbiAgICAgIDEwMTogXCI1XCIsXHJcbiAgICAgIDEwMjogXCI2XCIsXHJcbiAgICAgIDEwMzogXCI3XCIsXHJcbiAgICAgIDEwNDogXCI4XCIsXHJcbiAgICAgIDEwNTogXCI5XCIsXHJcbiAgICAgIDEwNjogXCIqXCIsXHJcbiAgICAgIDEwNzogXCIrXCIsXHJcbiAgICAgIDEwOTogXCItXCIsXHJcbiAgICAgIDExMDogXCIuXCIsXHJcbiAgICAgIDExMTogXCIvXCIsXHJcbiAgICAgIDExMjogXCJmMVwiLFxyXG4gICAgICAxMTM6IFwiZjJcIixcclxuICAgICAgMTE0OiBcImYzXCIsXHJcbiAgICAgIDExNTogXCJmNFwiLFxyXG4gICAgICAxMTY6IFwiZjVcIixcclxuICAgICAgMTE3OiBcImY2XCIsXHJcbiAgICAgIDExODogXCJmN1wiLFxyXG4gICAgICAxMTk6IFwiZjhcIixcclxuICAgICAgMTIwOiBcImY5XCIsXHJcbiAgICAgIDEyMTogXCJmMTBcIixcclxuICAgICAgMTIyOiBcImYxMVwiLFxyXG4gICAgICAxMjM6IFwiZjEyXCIsXHJcbiAgICAgIDE0NDogXCJudW1sb2NrXCIsXHJcbiAgICAgIDE0NTogXCJzY3JvbGxcIixcclxuICAgICAgMTczOiBcIi1cIixcclxuICAgICAgMTg2OiBcIjtcIixcclxuICAgICAgMTg3OiBcIj1cIixcclxuICAgICAgMTg4OiBcIixcIixcclxuICAgICAgMTg5OiBcIi1cIixcclxuICAgICAgMTkwOiBcIi5cIixcclxuICAgICAgMTkxOiBcIi9cIixcclxuICAgICAgMTkyOiBcImBcIixcclxuICAgICAgMjE5OiBcIltcIixcclxuICAgICAgMjIwOiBcIlxcXFxcIixcclxuICAgICAgMjIxOiBcIl1cIixcclxuICAgICAgMjIyOiBcIidcIlxyXG4gICAgfSxcclxuXHJcbiAgICBzaGlmdE51bXM6IHtcclxuICAgICAgXCJgXCI6IFwiflwiLFxyXG4gICAgICBcIjFcIjogXCIhXCIsXHJcbiAgICAgIFwiMlwiOiBcIkBcIixcclxuICAgICAgXCIzXCI6IFwiI1wiLFxyXG4gICAgICBcIjRcIjogXCIkXCIsXHJcbiAgICAgIFwiNVwiOiBcIiVcIixcclxuICAgICAgXCI2XCI6IFwiXlwiLFxyXG4gICAgICBcIjdcIjogXCImXCIsXHJcbiAgICAgIFwiOFwiOiBcIipcIixcclxuICAgICAgXCI5XCI6IFwiKFwiLFxyXG4gICAgICBcIjBcIjogXCIpXCIsXHJcbiAgICAgIFwiLVwiOiBcIl9cIixcclxuICAgICAgXCI9XCI6IFwiK1wiLFxyXG4gICAgICBcIjtcIjogXCI6IFwiLFxyXG4gICAgICBcIidcIjogXCJcXFwiXCIsXHJcbiAgICAgIFwiLFwiOiBcIjxcIixcclxuICAgICAgXCIuXCI6IFwiPlwiLFxyXG4gICAgICBcIi9cIjogXCI/XCIsXHJcbiAgICAgIFwiXFxcXFwiOiBcInxcIlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBleGNsdWRlczogYnV0dG9uLCBjaGVja2JveCwgZmlsZSwgaGlkZGVuLCBpbWFnZSwgcGFzc3dvcmQsIHJhZGlvLCByZXNldCwgc2VhcmNoLCBzdWJtaXQsIHVybFxyXG4gICAgdGV4dEFjY2VwdGluZ0lucHV0VHlwZXM6IFtcclxuICAgICAgXCJ0ZXh0XCIsIFwicGFzc3dvcmRcIiwgXCJudW1iZXJcIiwgXCJlbWFpbFwiLCBcInVybFwiLCBcInJhbmdlXCIsIFwiZGF0ZVwiLCBcIm1vbnRoXCIsIFwid2Vla1wiLCBcInRpbWVcIiwgXCJkYXRldGltZVwiLFxyXG4gICAgICBcImRhdGV0aW1lLWxvY2FsXCIsIFwic2VhcmNoXCIsIFwiY29sb3JcIiwgXCJ0ZWxcIl0sXHJcblxyXG4gICAgb3B0aW9uczoge1xyXG4gICAgICBmaWx0ZXJUZXh0SW5wdXRzOiB0cnVlXHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24ga2V5SGFuZGxlcihoYW5kbGVPYmopIHtcclxuICAgIGlmICh0eXBlb2YgaGFuZGxlT2JqLmRhdGEgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgaGFuZGxlT2JqLmRhdGEgPSB7XHJcbiAgICAgICAga2V5czogaGFuZGxlT2JqLmRhdGFcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBPbmx5IGNhcmUgd2hlbiBhIHBvc3NpYmxlIGlucHV0IGhhcyBiZWVuIHNwZWNpZmllZFxyXG4gICAgaWYgKCFoYW5kbGVPYmouZGF0YSB8fCAhaGFuZGxlT2JqLmRhdGEua2V5cyB8fCB0eXBlb2YgaGFuZGxlT2JqLmRhdGEua2V5cyAhPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG9yaWdIYW5kbGVyID0gaGFuZGxlT2JqLmhhbmRsZXIsXHJcbiAgICAgIGtleXMgPSBoYW5kbGVPYmouZGF0YS5rZXlzLnRvTG93ZXJDYXNlKCkuc3BsaXQoXCIgXCIpO1xyXG5cclxuICAgIGhhbmRsZU9iai5oYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgLy8gICAgICBEb24ndCBmaXJlIGluIHRleHQtYWNjZXB0aW5nIGlucHV0cyB0aGF0IHdlIGRpZG4ndCBkaXJlY3RseSBiaW5kIHRvXHJcbiAgICAgIGlmICh0aGlzICE9PSBldmVudC50YXJnZXQgJiYgKC90ZXh0YXJlYXxzZWxlY3QvaS50ZXN0KGV2ZW50LnRhcmdldC5ub2RlTmFtZSkgfHxcclxuICAgICAgICAgIChqUXVlcnkuaG90a2V5cy5vcHRpb25zLmZpbHRlclRleHRJbnB1dHMgJiZcclxuICAgICAgICAgICAgalF1ZXJ5LmluQXJyYXkoZXZlbnQudGFyZ2V0LnR5cGUsIGpRdWVyeS5ob3RrZXlzLnRleHRBY2NlcHRpbmdJbnB1dFR5cGVzKSA+IC0xKSkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBzcGVjaWFsID0gZXZlbnQudHlwZSAhPT0gXCJrZXlwcmVzc1wiICYmIGpRdWVyeS5ob3RrZXlzLnNwZWNpYWxLZXlzW2V2ZW50LndoaWNoXSxcclxuICAgICAgICBjaGFyYWN0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGV2ZW50LndoaWNoKS50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgIG1vZGlmID0gXCJcIixcclxuICAgICAgICBwb3NzaWJsZSA9IHt9O1xyXG5cclxuICAgICAgalF1ZXJ5LmVhY2goW1wiYWx0XCIsIFwiY3RybFwiLCBcInNoaWZ0XCJdLCBmdW5jdGlvbihpbmRleCwgc3BlY2lhbEtleSkge1xyXG5cclxuICAgICAgICBpZiAoZXZlbnRbc3BlY2lhbEtleSArICdLZXknXSAmJiBzcGVjaWFsICE9PSBzcGVjaWFsS2V5KSB7XHJcbiAgICAgICAgICBtb2RpZiArPSBzcGVjaWFsS2V5ICsgJysnO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBtZXRhS2V5IGlzIHRyaWdnZXJlZCBvZmYgY3RybEtleSBlcnJvbm91c2x5XHJcbiAgICAgIGlmIChldmVudC5tZXRhS2V5ICYmICFldmVudC5jdHJsS2V5ICYmIHNwZWNpYWwgIT09IFwibWV0YVwiKSB7XHJcbiAgICAgICAgbW9kaWYgKz0gXCJtZXRhK1wiO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZXZlbnQubWV0YUtleSAmJiBzcGVjaWFsICE9PSBcIm1ldGFcIiAmJiBtb2RpZi5pbmRleE9mKFwiYWx0K2N0cmwrc2hpZnQrXCIpID4gLTEpIHtcclxuICAgICAgICBtb2RpZiA9IG1vZGlmLnJlcGxhY2UoXCJhbHQrY3RybCtzaGlmdCtcIiwgXCJoeXBlcitcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChzcGVjaWFsKSB7XHJcbiAgICAgICAgcG9zc2libGVbbW9kaWYgKyBzcGVjaWFsXSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgcG9zc2libGVbbW9kaWYgKyBjaGFyYWN0ZXJdID0gdHJ1ZTtcclxuICAgICAgICBwb3NzaWJsZVttb2RpZiArIGpRdWVyeS5ob3RrZXlzLnNoaWZ0TnVtc1tjaGFyYWN0ZXJdXSA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vIFwiJFwiIGNhbiBiZSB0cmlnZ2VyZWQgYXMgXCJTaGlmdCs0XCIgb3IgXCJTaGlmdCskXCIgb3IganVzdCBcIiRcIlxyXG4gICAgICAgIGlmIChtb2RpZiA9PT0gXCJzaGlmdCtcIikge1xyXG4gICAgICAgICAgcG9zc2libGVbalF1ZXJ5LmhvdGtleXMuc2hpZnROdW1zW2NoYXJhY3Rlcl1dID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBpZiAocG9zc2libGVba2V5c1tpXV0pIHtcclxuICAgICAgICAgIHJldHVybiBvcmlnSGFuZGxlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGpRdWVyeS5lYWNoKFtcImtleWRvd25cIiwgXCJrZXl1cFwiLCBcImtleXByZXNzXCJdLCBmdW5jdGlvbigpIHtcclxuICAgIGpRdWVyeS5ldmVudC5zcGVjaWFsW3RoaXNdID0ge1xyXG4gICAgICBhZGQ6IGtleUhhbmRsZXJcclxuICAgIH07XHJcbiAgfSk7XHJcblxyXG59KShqUXVlcnkgfHwgdGhpcy5qUXVlcnkgfHwgd2luZG93LmpRdWVyeSk7XHJcbiIsIihmdW5jdGlvbiAoZ2xvYmFsKXtcbjtfX2Jyb3dzZXJpZnlfc2hpbV9yZXF1aXJlX189cmVxdWlyZTsoZnVuY3Rpb24gYnJvd3NlcmlmeVNoaW0obW9kdWxlLCBleHBvcnRzLCByZXF1aXJlLCBkZWZpbmUsIGJyb3dzZXJpZnlfc2hpbV9fZGVmaW5lX19tb2R1bGVfX2V4cG9ydF9fKSB7XG4vKiEgalF1ZXJ5IHYxLjkuMSB8IChjKSAyMDA1LCAyMDEyIGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIHwganF1ZXJ5Lm9yZy9saWNlbnNlXG4vL0Agc291cmNlTWFwcGluZ1VSTD1qcXVlcnkubWluLm1hcFxuKi8oZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk9dHlwZW9mIHQsbz1lLmRvY3VtZW50LGE9ZS5sb2NhdGlvbixzPWUualF1ZXJ5LHU9ZS4kLGw9e30sYz1bXSxwPVwiMS45LjFcIixmPWMuY29uY2F0LGQ9Yy5wdXNoLGg9Yy5zbGljZSxnPWMuaW5kZXhPZixtPWwudG9TdHJpbmcseT1sLmhhc093blByb3BlcnR5LHY9cC50cmltLGI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IGIuZm4uaW5pdChlLHQscil9LHg9L1srLV0/KD86XFxkKlxcLnwpXFxkKyg/OltlRV1bKy1dP1xcZCt8KS8uc291cmNlLHc9L1xcUysvZyxUPS9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZyxOPS9eKD86KDxbXFx3XFxXXSs+KVtePl0qfCMoW1xcdy1dKikpJC8sQz0vXjwoXFx3KylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8saz0vXltcXF0sOnt9XFxzXSokLyxFPS8oPzpefDp8LCkoPzpcXHMqXFxbKSsvZyxTPS9cXFxcKD86W1wiXFxcXFxcL2JmbnJ0XXx1W1xcZGEtZkEtRl17NH0pL2csQT0vXCJbXlwiXFxcXFxcclxcbl0qXCJ8dHJ1ZXxmYWxzZXxudWxsfC0/KD86XFxkK1xcLnwpXFxkKyg/OltlRV1bKy1dP1xcZCt8KS9nLGo9L14tbXMtLyxEPS8tKFtcXGRhLXpdKS9naSxMPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQudG9VcHBlckNhc2UoKX0sSD1mdW5jdGlvbihlKXsoby5hZGRFdmVudExpc3RlbmVyfHxcImxvYWRcIj09PWUudHlwZXx8XCJjb21wbGV0ZVwiPT09by5yZWFkeVN0YXRlKSYmKHEoKSxiLnJlYWR5KCkpfSxxPWZ1bmN0aW9uKCl7by5hZGRFdmVudExpc3RlbmVyPyhvLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsSCwhMSksZS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLEgsITEpKTooby5kZXRhY2hFdmVudChcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLEgpLGUuZGV0YWNoRXZlbnQoXCJvbmxvYWRcIixIKSl9O2IuZm49Yi5wcm90b3R5cGU9e2pxdWVyeTpwLGNvbnN0cnVjdG9yOmIsaW5pdDpmdW5jdGlvbihlLG4scil7dmFyIGksYTtpZighZSlyZXR1cm4gdGhpcztpZihcInN0cmluZ1wiPT10eXBlb2YgZSl7aWYoaT1cIjxcIj09PWUuY2hhckF0KDApJiZcIj5cIj09PWUuY2hhckF0KGUubGVuZ3RoLTEpJiZlLmxlbmd0aD49Mz9bbnVsbCxlLG51bGxdOk4uZXhlYyhlKSwhaXx8IWlbMV0mJm4pcmV0dXJuIW58fG4uanF1ZXJ5PyhufHxyKS5maW5kKGUpOnRoaXMuY29uc3RydWN0b3IobikuZmluZChlKTtpZihpWzFdKXtpZihuPW4gaW5zdGFuY2VvZiBiP25bMF06bixiLm1lcmdlKHRoaXMsYi5wYXJzZUhUTUwoaVsxXSxuJiZuLm5vZGVUeXBlP24ub3duZXJEb2N1bWVudHx8bjpvLCEwKSksQy50ZXN0KGlbMV0pJiZiLmlzUGxhaW5PYmplY3QobikpZm9yKGkgaW4gbiliLmlzRnVuY3Rpb24odGhpc1tpXSk/dGhpc1tpXShuW2ldKTp0aGlzLmF0dHIoaSxuW2ldKTtyZXR1cm4gdGhpc31pZihhPW8uZ2V0RWxlbWVudEJ5SWQoaVsyXSksYSYmYS5wYXJlbnROb2RlKXtpZihhLmlkIT09aVsyXSlyZXR1cm4gci5maW5kKGUpO3RoaXMubGVuZ3RoPTEsdGhpc1swXT1hfXJldHVybiB0aGlzLmNvbnRleHQ9byx0aGlzLnNlbGVjdG9yPWUsdGhpc31yZXR1cm4gZS5ub2RlVHlwZT8odGhpcy5jb250ZXh0PXRoaXNbMF09ZSx0aGlzLmxlbmd0aD0xLHRoaXMpOmIuaXNGdW5jdGlvbihlKT9yLnJlYWR5KGUpOihlLnNlbGVjdG9yIT09dCYmKHRoaXMuc2VsZWN0b3I9ZS5zZWxlY3Rvcix0aGlzLmNvbnRleHQ9ZS5jb250ZXh0KSxiLm1ha2VBcnJheShlLHRoaXMpKX0sc2VsZWN0b3I6XCJcIixsZW5ndGg6MCxzaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RofSx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIGguY2FsbCh0aGlzKX0sZ2V0OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP3RoaXMudG9BcnJheSgpOjA+ZT90aGlzW3RoaXMubGVuZ3RoK2VdOnRoaXNbZV19LHB1c2hTdGFjazpmdW5jdGlvbihlKXt2YXIgdD1iLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxlKTtyZXR1cm4gdC5wcmV2T2JqZWN0PXRoaXMsdC5jb250ZXh0PXRoaXMuY29udGV4dCx0fSxlYWNoOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGIuZWFjaCh0aGlzLGUsdCl9LHJlYWR5OmZ1bmN0aW9uKGUpe3JldHVybiBiLnJlYWR5LnByb21pc2UoKS5kb25lKGUpLHRoaXN9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGguYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5sZW5ndGgsbj0rZSsoMD5lP3Q6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4+PTAmJnQ+bj9bdGhpc1tuXV06W10pfSxtYXA6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGIubWFwKHRoaXMsZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5jYWxsKHQsbix0KX0pKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8dGhpcy5jb25zdHJ1Y3RvcihudWxsKX0scHVzaDpkLHNvcnQ6W10uc29ydCxzcGxpY2U6W10uc3BsaWNlfSxiLmZuLmluaXQucHJvdG90eXBlPWIuZm4sYi5leHRlbmQ9Yi5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgZSxuLHIsaSxvLGEscz1hcmd1bWVudHNbMF18fHt9LHU9MSxsPWFyZ3VtZW50cy5sZW5ndGgsYz0hMTtmb3IoXCJib29sZWFuXCI9PXR5cGVvZiBzJiYoYz1zLHM9YXJndW1lbnRzWzFdfHx7fSx1PTIpLFwib2JqZWN0XCI9PXR5cGVvZiBzfHxiLmlzRnVuY3Rpb24ocyl8fChzPXt9KSxsPT09dSYmKHM9dGhpcywtLXUpO2w+dTt1KyspaWYobnVsbCE9KG89YXJndW1lbnRzW3VdKSlmb3IoaSBpbiBvKWU9c1tpXSxyPW9baV0scyE9PXImJihjJiZyJiYoYi5pc1BsYWluT2JqZWN0KHIpfHwobj1iLmlzQXJyYXkocikpKT8obj8obj0hMSxhPWUmJmIuaXNBcnJheShlKT9lOltdKTphPWUmJmIuaXNQbGFpbk9iamVjdChlKT9lOnt9LHNbaV09Yi5leHRlbmQoYyxhLHIpKTpyIT09dCYmKHNbaV09cikpO3JldHVybiBzfSxiLmV4dGVuZCh7bm9Db25mbGljdDpmdW5jdGlvbih0KXtyZXR1cm4gZS4kPT09YiYmKGUuJD11KSx0JiZlLmpRdWVyeT09PWImJihlLmpRdWVyeT1zKSxifSxpc1JlYWR5OiExLHJlYWR5V2FpdDoxLGhvbGRSZWFkeTpmdW5jdGlvbihlKXtlP2IucmVhZHlXYWl0Kys6Yi5yZWFkeSghMCl9LHJlYWR5OmZ1bmN0aW9uKGUpe2lmKGU9PT0hMD8hLS1iLnJlYWR5V2FpdDohYi5pc1JlYWR5KXtpZighby5ib2R5KXJldHVybiBzZXRUaW1lb3V0KGIucmVhZHkpO2IuaXNSZWFkeT0hMCxlIT09ITAmJi0tYi5yZWFkeVdhaXQ+MHx8KG4ucmVzb2x2ZVdpdGgobyxbYl0pLGIuZm4udHJpZ2dlciYmYihvKS50cmlnZ2VyKFwicmVhZHlcIikub2ZmKFwicmVhZHlcIikpfX0saXNGdW5jdGlvbjpmdW5jdGlvbihlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PT1iLnR5cGUoZSl9LGlzQXJyYXk6QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuXCJhcnJheVwiPT09Yi50eXBlKGUpfSxpc1dpbmRvdzpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZSYmZT09ZS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihlKXtyZXR1cm4haXNOYU4ocGFyc2VGbG9hdChlKSkmJmlzRmluaXRlKGUpfSx0eXBlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP2UrXCJcIjpcIm9iamVjdFwiPT10eXBlb2YgZXx8XCJmdW5jdGlvblwiPT10eXBlb2YgZT9sW20uY2FsbChlKV18fFwib2JqZWN0XCI6dHlwZW9mIGV9LGlzUGxhaW5PYmplY3Q6ZnVuY3Rpb24oZSl7aWYoIWV8fFwib2JqZWN0XCIhPT1iLnR5cGUoZSl8fGUubm9kZVR5cGV8fGIuaXNXaW5kb3coZSkpcmV0dXJuITE7dHJ5e2lmKGUuY29uc3RydWN0b3ImJiF5LmNhbGwoZSxcImNvbnN0cnVjdG9yXCIpJiYheS5jYWxsKGUuY29uc3RydWN0b3IucHJvdG90eXBlLFwiaXNQcm90b3R5cGVPZlwiKSlyZXR1cm4hMX1jYXRjaChuKXtyZXR1cm4hMX12YXIgcjtmb3IociBpbiBlKTtyZXR1cm4gcj09PXR8fHkuY2FsbChlLHIpfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIGUpcmV0dXJuITE7cmV0dXJuITB9LGVycm9yOmZ1bmN0aW9uKGUpe3Rocm93IEVycm9yKGUpfSxwYXJzZUhUTUw6ZnVuY3Rpb24oZSx0LG4pe2lmKCFlfHxcInN0cmluZ1wiIT10eXBlb2YgZSlyZXR1cm4gbnVsbDtcImJvb2xlYW5cIj09dHlwZW9mIHQmJihuPXQsdD0hMSksdD10fHxvO3ZhciByPUMuZXhlYyhlKSxpPSFuJiZbXTtyZXR1cm4gcj9bdC5jcmVhdGVFbGVtZW50KHJbMV0pXToocj1iLmJ1aWxkRnJhZ21lbnQoW2VdLHQsaSksaSYmYihpKS5yZW1vdmUoKSxiLm1lcmdlKFtdLHIuY2hpbGROb2RlcykpfSxwYXJzZUpTT046ZnVuY3Rpb24obil7cmV0dXJuIGUuSlNPTiYmZS5KU09OLnBhcnNlP2UuSlNPTi5wYXJzZShuKTpudWxsPT09bj9uOlwic3RyaW5nXCI9PXR5cGVvZiBuJiYobj1iLnRyaW0obiksbiYmay50ZXN0KG4ucmVwbGFjZShTLFwiQFwiKS5yZXBsYWNlKEEsXCJdXCIpLnJlcGxhY2UoRSxcIlwiKSkpP0Z1bmN0aW9uKFwicmV0dXJuIFwiK24pKCk6KGIuZXJyb3IoXCJJbnZhbGlkIEpTT046IFwiK24pLHQpfSxwYXJzZVhNTDpmdW5jdGlvbihuKXt2YXIgcixpO2lmKCFufHxcInN0cmluZ1wiIT10eXBlb2YgbilyZXR1cm4gbnVsbDt0cnl7ZS5ET01QYXJzZXI/KGk9bmV3IERPTVBhcnNlcixyPWkucGFyc2VGcm9tU3RyaW5nKG4sXCJ0ZXh0L3htbFwiKSk6KHI9bmV3IEFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MRE9NXCIpLHIuYXN5bmM9XCJmYWxzZVwiLHIubG9hZFhNTChuKSl9Y2F0Y2gobyl7cj10fXJldHVybiByJiZyLmRvY3VtZW50RWxlbWVudCYmIXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJwYXJzZXJlcnJvclwiKS5sZW5ndGh8fGIuZXJyb3IoXCJJbnZhbGlkIFhNTDogXCIrbikscn0sbm9vcDpmdW5jdGlvbigpe30sZ2xvYmFsRXZhbDpmdW5jdGlvbih0KXt0JiZiLnRyaW0odCkmJihlLmV4ZWNTY3JpcHR8fGZ1bmN0aW9uKHQpe2UuZXZhbC5jYWxsKGUsdCl9KSh0KX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoaixcIm1zLVwiKS5yZXBsYWNlKEQsTCl9LG5vZGVOYW1lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubm9kZU5hbWUmJmUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXQudG9Mb3dlckNhc2UoKX0sZWFjaDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT0wLG89ZS5sZW5ndGgsYT1NKGUpO2lmKG4pe2lmKGEpe2Zvcig7bz5pO2krKylpZihyPXQuYXBwbHkoZVtpXSxuKSxyPT09ITEpYnJlYWt9ZWxzZSBmb3IoaSBpbiBlKWlmKHI9dC5hcHBseShlW2ldLG4pLHI9PT0hMSlicmVha31lbHNlIGlmKGEpe2Zvcig7bz5pO2krKylpZihyPXQuY2FsbChlW2ldLGksZVtpXSkscj09PSExKWJyZWFrfWVsc2UgZm9yKGkgaW4gZSlpZihyPXQuY2FsbChlW2ldLGksZVtpXSkscj09PSExKWJyZWFrO3JldHVybiBlfSx0cmltOnYmJiF2LmNhbGwoXCJcXHVmZWZmXFx1MDBhMFwiKT9mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT9cIlwiOnYuY2FsbChlKX06ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/XCJcIjooZStcIlwiKS5yZXBsYWNlKFQsXCJcIil9LG1ha2VBcnJheTpmdW5jdGlvbihlLHQpe3ZhciBuPXR8fFtdO3JldHVybiBudWxsIT1lJiYoTShPYmplY3QoZSkpP2IubWVyZ2UobixcInN0cmluZ1wiPT10eXBlb2YgZT9bZV06ZSk6ZC5jYWxsKG4sZSkpLG59LGluQXJyYXk6ZnVuY3Rpb24oZSx0LG4pe3ZhciByO2lmKHQpe2lmKGcpcmV0dXJuIGcuY2FsbCh0LGUsbik7Zm9yKHI9dC5sZW5ndGgsbj1uPzA+bj9NYXRoLm1heCgwLHIrbik6bjowO3I+bjtuKyspaWYobiBpbiB0JiZ0W25dPT09ZSlyZXR1cm4gbn1yZXR1cm4tMX0sbWVyZ2U6ZnVuY3Rpb24oZSxuKXt2YXIgcj1uLmxlbmd0aCxpPWUubGVuZ3RoLG89MDtpZihcIm51bWJlclwiPT10eXBlb2Ygcilmb3IoO3I+bztvKyspZVtpKytdPW5bb107ZWxzZSB3aGlsZShuW29dIT09dCllW2krK109bltvKytdO3JldHVybiBlLmxlbmd0aD1pLGV9LGdyZXA6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9W10sbz0wLGE9ZS5sZW5ndGg7Zm9yKG49ISFuO2E+bztvKyspcj0hIXQoZVtvXSxvKSxuIT09ciYmaS5wdXNoKGVbb10pO3JldHVybiBpfSxtYXA6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9MCxvPWUubGVuZ3RoLGE9TShlKSxzPVtdO2lmKGEpZm9yKDtvPmk7aSsrKXI9dChlW2ldLGksbiksbnVsbCE9ciYmKHNbcy5sZW5ndGhdPXIpO2Vsc2UgZm9yKGkgaW4gZSlyPXQoZVtpXSxpLG4pLG51bGwhPXImJihzW3MubGVuZ3RoXT1yKTtyZXR1cm4gZi5hcHBseShbXSxzKX0sZ3VpZDoxLHByb3h5OmZ1bmN0aW9uKGUsbil7dmFyIHIsaSxvO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBuJiYobz1lW25dLG49ZSxlPW8pLGIuaXNGdW5jdGlvbihlKT8ocj1oLmNhbGwoYXJndW1lbnRzLDIpLGk9ZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseShufHx0aGlzLHIuY29uY2F0KGguY2FsbChhcmd1bWVudHMpKSl9LGkuZ3VpZD1lLmd1aWQ9ZS5ndWlkfHxiLmd1aWQrKyxpKTp0fSxhY2Nlc3M6ZnVuY3Rpb24oZSxuLHIsaSxvLGEscyl7dmFyIHU9MCxsPWUubGVuZ3RoLGM9bnVsbD09cjtpZihcIm9iamVjdFwiPT09Yi50eXBlKHIpKXtvPSEwO2Zvcih1IGluIHIpYi5hY2Nlc3MoZSxuLHUsclt1XSwhMCxhLHMpfWVsc2UgaWYoaSE9PXQmJihvPSEwLGIuaXNGdW5jdGlvbihpKXx8KHM9ITApLGMmJihzPyhuLmNhbGwoZSxpKSxuPW51bGwpOihjPW4sbj1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGMuY2FsbChiKGUpLG4pfSkpLG4pKWZvcig7bD51O3UrKyluKGVbdV0scixzP2k6aS5jYWxsKGVbdV0sdSxuKGVbdV0scikpKTtyZXR1cm4gbz9lOmM/bi5jYWxsKGUpOmw/bihlWzBdLHIpOmF9LG5vdzpmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfX0pLGIucmVhZHkucHJvbWlzZT1mdW5jdGlvbih0KXtpZighbilpZihuPWIuRGVmZXJyZWQoKSxcImNvbXBsZXRlXCI9PT1vLnJlYWR5U3RhdGUpc2V0VGltZW91dChiLnJlYWR5KTtlbHNlIGlmKG8uYWRkRXZlbnRMaXN0ZW5lcilvLmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsSCwhMSksZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLEgsITEpO2Vsc2V7by5hdHRhY2hFdmVudChcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLEgpLGUuYXR0YWNoRXZlbnQoXCJvbmxvYWRcIixIKTt2YXIgcj0hMTt0cnl7cj1udWxsPT1lLmZyYW1lRWxlbWVudCYmby5kb2N1bWVudEVsZW1lbnR9Y2F0Y2goaSl7fXImJnIuZG9TY3JvbGwmJmZ1bmN0aW9uIGEoKXtpZighYi5pc1JlYWR5KXt0cnl7ci5kb1Njcm9sbChcImxlZnRcIil9Y2F0Y2goZSl7cmV0dXJuIHNldFRpbWVvdXQoYSw1MCl9cSgpLGIucmVhZHkoKX19KCl9cmV0dXJuIG4ucHJvbWlzZSh0KX0sYi5lYWNoKFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvclwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihlLHQpe2xbXCJbb2JqZWN0IFwiK3QrXCJdXCJdPXQudG9Mb3dlckNhc2UoKX0pO2Z1bmN0aW9uIE0oZSl7dmFyIHQ9ZS5sZW5ndGgsbj1iLnR5cGUoZSk7cmV0dXJuIGIuaXNXaW5kb3coZSk/ITE6MT09PWUubm9kZVR5cGUmJnQ/ITA6XCJhcnJheVwiPT09bnx8XCJmdW5jdGlvblwiIT09biYmKDA9PT10fHxcIm51bWJlclwiPT10eXBlb2YgdCYmdD4wJiZ0LTEgaW4gZSl9cj1iKG8pO3ZhciBfPXt9O2Z1bmN0aW9uIEYoZSl7dmFyIHQ9X1tlXT17fTtyZXR1cm4gYi5lYWNoKGUubWF0Y2godyl8fFtdLGZ1bmN0aW9uKGUsbil7dFtuXT0hMH0pLHR9Yi5DYWxsYmFja3M9ZnVuY3Rpb24oZSl7ZT1cInN0cmluZ1wiPT10eXBlb2YgZT9fW2VdfHxGKGUpOmIuZXh0ZW5kKHt9LGUpO3ZhciBuLHIsaSxvLGEscyx1PVtdLGw9IWUub25jZSYmW10sYz1mdW5jdGlvbih0KXtmb3Iocj1lLm1lbW9yeSYmdCxpPSEwLGE9c3x8MCxzPTAsbz11Lmxlbmd0aCxuPSEwO3UmJm8+YTthKyspaWYodVthXS5hcHBseSh0WzBdLHRbMV0pPT09ITEmJmUuc3RvcE9uRmFsc2Upe3I9ITE7YnJlYWt9bj0hMSx1JiYobD9sLmxlbmd0aCYmYyhsLnNoaWZ0KCkpOnI/dT1bXTpwLmRpc2FibGUoKSl9LHA9e2FkZDpmdW5jdGlvbigpe2lmKHUpe3ZhciB0PXUubGVuZ3RoOyhmdW5jdGlvbiBpKHQpe2IuZWFjaCh0LGZ1bmN0aW9uKHQsbil7dmFyIHI9Yi50eXBlKG4pO1wiZnVuY3Rpb25cIj09PXI/ZS51bmlxdWUmJnAuaGFzKG4pfHx1LnB1c2gobik6biYmbi5sZW5ndGgmJlwic3RyaW5nXCIhPT1yJiZpKG4pfSl9KShhcmd1bWVudHMpLG4/bz11Lmxlbmd0aDpyJiYocz10LGMocikpfXJldHVybiB0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdSYmYi5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihlLHQpe3ZhciByO3doaWxlKChyPWIuaW5BcnJheSh0LHUscikpPi0xKXUuc3BsaWNlKHIsMSksbiYmKG8+PXImJm8tLSxhPj1yJiZhLS0pfSksdGhpc30saGFzOmZ1bmN0aW9uKGUpe3JldHVybiBlP2IuaW5BcnJheShlLHUpPi0xOiEoIXV8fCF1Lmxlbmd0aCl9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIHU9W10sdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiB1PWw9cj10LHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIXV9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gbD10LHJ8fHAuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiFsfSxmaXJlV2l0aDpmdW5jdGlvbihlLHQpe3JldHVybiB0PXR8fFtdLHQ9W2UsdC5zbGljZT90LnNsaWNlKCk6dF0sIXV8fGkmJiFsfHwobj9sLnB1c2godCk6Yyh0KSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBwLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhaX19O3JldHVybiBwfSxiLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9W1tcInJlc29sdmVcIixcImRvbmVcIixiLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLFwicmVzb2x2ZWRcIl0sW1wicmVqZWN0XCIsXCJmYWlsXCIsYi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxcInJlamVjdGVkXCJdLFtcIm5vdGlmeVwiLFwicHJvZ3Jlc3NcIixiLkNhbGxiYWNrcyhcIm1lbW9yeVwiKV1dLG49XCJwZW5kaW5nXCIscj17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gbn0sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGkuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVybiBiLkRlZmVycmVkKGZ1bmN0aW9uKG4pe2IuZWFjaCh0LGZ1bmN0aW9uKHQsbyl7dmFyIGE9b1swXSxzPWIuaXNGdW5jdGlvbihlW3RdKSYmZVt0XTtpW29bMV1dKGZ1bmN0aW9uKCl7dmFyIGU9cyYmcy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZSYmYi5pc0Z1bmN0aW9uKGUucHJvbWlzZSk/ZS5wcm9taXNlKCkuZG9uZShuLnJlc29sdmUpLmZhaWwobi5yZWplY3QpLnByb2dyZXNzKG4ubm90aWZ5KTpuW2ErXCJXaXRoXCJdKHRoaXM9PT1yP24ucHJvbWlzZSgpOnRoaXMscz9bZV06YXJndW1lbnRzKX0pfSksZT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lP2IuZXh0ZW5kKGUscik6cn19LGk9e307cmV0dXJuIHIucGlwZT1yLnRoZW4sYi5lYWNoKHQsZnVuY3Rpb24oZSxvKXt2YXIgYT1vWzJdLHM9b1szXTtyW29bMV1dPWEuYWRkLHMmJmEuYWRkKGZ1bmN0aW9uKCl7bj1zfSx0WzFeZV1bMl0uZGlzYWJsZSx0WzJdWzJdLmxvY2spLGlbb1swXV09ZnVuY3Rpb24oKXtyZXR1cm4gaVtvWzBdK1wiV2l0aFwiXSh0aGlzPT09aT9yOnRoaXMsYXJndW1lbnRzKSx0aGlzfSxpW29bMF0rXCJXaXRoXCJdPWEuZmlyZVdpdGh9KSxyLnByb21pc2UoaSksZSYmZS5jYWxsKGksaSksaX0sd2hlbjpmdW5jdGlvbihlKXt2YXIgdD0wLG49aC5jYWxsKGFyZ3VtZW50cykscj1uLmxlbmd0aCxpPTEhPT1yfHxlJiZiLmlzRnVuY3Rpb24oZS5wcm9taXNlKT9yOjAsbz0xPT09aT9lOmIuRGVmZXJyZWQoKSxhPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZnVuY3Rpb24ocil7dFtlXT10aGlzLG5bZV09YXJndW1lbnRzLmxlbmd0aD4xP2guY2FsbChhcmd1bWVudHMpOnIsbj09PXM/by5ub3RpZnlXaXRoKHQsbik6LS1pfHxvLnJlc29sdmVXaXRoKHQsbil9fSxzLHUsbDtpZihyPjEpZm9yKHM9QXJyYXkociksdT1BcnJheShyKSxsPUFycmF5KHIpO3I+dDt0Kyspblt0XSYmYi5pc0Z1bmN0aW9uKG5bdF0ucHJvbWlzZSk/blt0XS5wcm9taXNlKCkuZG9uZShhKHQsbCxuKSkuZmFpbChvLnJlamVjdCkucHJvZ3Jlc3MoYSh0LHUscykpOi0taTtyZXR1cm4gaXx8by5yZXNvbHZlV2l0aChsLG4pLG8ucHJvbWlzZSgpfX0pLGIuc3VwcG9ydD1mdW5jdGlvbigpe3ZhciB0LG4scixhLHMsdSxsLGMscCxmLGQ9by5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2lmKGQuc2V0QXR0cmlidXRlKFwiY2xhc3NOYW1lXCIsXCJ0XCIpLGQuaW5uZXJIVE1MPVwiICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+XCIsbj1kLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSxyPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJhXCIpWzBdLCFufHwhcnx8IW4ubGVuZ3RoKXJldHVybnt9O3M9by5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpLGw9cy5hcHBlbmRDaGlsZChvLmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpLGE9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpWzBdLHIuc3R5bGUuY3NzVGV4dD1cInRvcDoxcHg7ZmxvYXQ6bGVmdDtvcGFjaXR5Oi41XCIsdD17Z2V0U2V0QXR0cmlidXRlOlwidFwiIT09ZC5jbGFzc05hbWUsbGVhZGluZ1doaXRlc3BhY2U6Mz09PWQuZmlyc3RDaGlsZC5ub2RlVHlwZSx0Ym9keTohZC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRib2R5XCIpLmxlbmd0aCxodG1sU2VyaWFsaXplOiEhZC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImxpbmtcIikubGVuZ3RoLHN0eWxlOi90b3AvLnRlc3Qoci5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSksaHJlZk5vcm1hbGl6ZWQ6XCIvYVwiPT09ci5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpLG9wYWNpdHk6L14wLjUvLnRlc3Qoci5zdHlsZS5vcGFjaXR5KSxjc3NGbG9hdDohIXIuc3R5bGUuY3NzRmxvYXQsY2hlY2tPbjohIWEudmFsdWUsb3B0U2VsZWN0ZWQ6bC5zZWxlY3RlZCxlbmN0eXBlOiEhby5jcmVhdGVFbGVtZW50KFwiZm9ybVwiKS5lbmN0eXBlLGh0bWw1Q2xvbmU6XCI8Om5hdj48LzpuYXY+XCIhPT1vLmNyZWF0ZUVsZW1lbnQoXCJuYXZcIikuY2xvbmVOb2RlKCEwKS5vdXRlckhUTUwsYm94TW9kZWw6XCJDU1MxQ29tcGF0XCI9PT1vLmNvbXBhdE1vZGUsZGVsZXRlRXhwYW5kbzohMCxub0Nsb25lRXZlbnQ6ITAsaW5saW5lQmxvY2tOZWVkc0xheW91dDohMSxzaHJpbmtXcmFwQmxvY2tzOiExLHJlbGlhYmxlTWFyZ2luUmlnaHQ6ITAsYm94U2l6aW5nUmVsaWFibGU6ITAscGl4ZWxQb3NpdGlvbjohMX0sYS5jaGVja2VkPSEwLHQubm9DbG9uZUNoZWNrZWQ9YS5jbG9uZU5vZGUoITApLmNoZWNrZWQscy5kaXNhYmxlZD0hMCx0Lm9wdERpc2FibGVkPSFsLmRpc2FibGVkO3RyeXtkZWxldGUgZC50ZXN0fWNhdGNoKGgpe3QuZGVsZXRlRXhwYW5kbz0hMX1hPW8uY3JlYXRlRWxlbWVudChcImlucHV0XCIpLGEuc2V0QXR0cmlidXRlKFwidmFsdWVcIixcIlwiKSx0LmlucHV0PVwiXCI9PT1hLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpLGEudmFsdWU9XCJ0XCIsYS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJyYWRpb1wiKSx0LnJhZGlvVmFsdWU9XCJ0XCI9PT1hLnZhbHVlLGEuc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLFwidFwiKSxhLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcInRcIiksdT1vLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSx1LmFwcGVuZENoaWxkKGEpLHQuYXBwZW5kQ2hlY2tlZD1hLmNoZWNrZWQsdC5jaGVja0Nsb25lPXUuY2xvbmVOb2RlKCEwKS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5jaGVja2VkLGQuYXR0YWNoRXZlbnQmJihkLmF0dGFjaEV2ZW50KFwib25jbGlja1wiLGZ1bmN0aW9uKCl7dC5ub0Nsb25lRXZlbnQ9ITF9KSxkLmNsb25lTm9kZSghMCkuY2xpY2soKSk7Zm9yKGYgaW57c3VibWl0OiEwLGNoYW5nZTohMCxmb2N1c2luOiEwfSlkLnNldEF0dHJpYnV0ZShjPVwib25cIitmLFwidFwiKSx0W2YrXCJCdWJibGVzXCJdPWMgaW4gZXx8ZC5hdHRyaWJ1dGVzW2NdLmV4cGFuZG89PT0hMTtyZXR1cm4gZC5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD1cImNvbnRlbnQtYm94XCIsZC5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPVwiXCIsdC5jbGVhckNsb25lU3R5bGU9XCJjb250ZW50LWJveFwiPT09ZC5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCxiKGZ1bmN0aW9uKCl7dmFyIG4scixhLHM9XCJwYWRkaW5nOjA7bWFyZ2luOjA7Ym9yZGVyOjA7ZGlzcGxheTpibG9jaztib3gtc2l6aW5nOmNvbnRlbnQtYm94Oy1tb3otYm94LXNpemluZzpjb250ZW50LWJveDstd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7XCIsdT1vLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXTt1JiYobj1vLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksbi5zdHlsZS5jc3NUZXh0PVwiYm9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0Oi05OTk5cHg7bWFyZ2luLXRvcDoxcHhcIix1LmFwcGVuZENoaWxkKG4pLmFwcGVuZENoaWxkKGQpLGQuaW5uZXJIVE1MPVwiPHRhYmxlPjx0cj48dGQ+PC90ZD48dGQ+dDwvdGQ+PC90cj48L3RhYmxlPlwiLGE9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRkXCIpLGFbMF0uc3R5bGUuY3NzVGV4dD1cInBhZGRpbmc6MDttYXJnaW46MDtib3JkZXI6MDtkaXNwbGF5Om5vbmVcIixwPTA9PT1hWzBdLm9mZnNldEhlaWdodCxhWzBdLnN0eWxlLmRpc3BsYXk9XCJcIixhWzFdLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdC5yZWxpYWJsZUhpZGRlbk9mZnNldHM9cCYmMD09PWFbMF0ub2Zmc2V0SGVpZ2h0LGQuaW5uZXJIVE1MPVwiXCIsZC5zdHlsZS5jc3NUZXh0PVwiYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94Oy13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94O3BhZGRpbmc6MXB4O2JvcmRlcjoxcHg7ZGlzcGxheTpibG9jazt3aWR0aDo0cHg7bWFyZ2luLXRvcDoxJTtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MSU7XCIsdC5ib3hTaXppbmc9ND09PWQub2Zmc2V0V2lkdGgsdC5kb2VzTm90SW5jbHVkZU1hcmdpbkluQm9keU9mZnNldD0xIT09dS5vZmZzZXRUb3AsZS5nZXRDb21wdXRlZFN0eWxlJiYodC5waXhlbFBvc2l0aW9uPVwiMSVcIiE9PShlLmdldENvbXB1dGVkU3R5bGUoZCxudWxsKXx8e30pLnRvcCx0LmJveFNpemluZ1JlbGlhYmxlPVwiNHB4XCI9PT0oZS5nZXRDb21wdXRlZFN0eWxlKGQsbnVsbCl8fHt3aWR0aDpcIjRweFwifSkud2lkdGgscj1kLmFwcGVuZENoaWxkKG8uY3JlYXRlRWxlbWVudChcImRpdlwiKSksci5zdHlsZS5jc3NUZXh0PWQuc3R5bGUuY3NzVGV4dD1zLHIuc3R5bGUubWFyZ2luUmlnaHQ9ci5zdHlsZS53aWR0aD1cIjBcIixkLnN0eWxlLndpZHRoPVwiMXB4XCIsdC5yZWxpYWJsZU1hcmdpblJpZ2h0PSFwYXJzZUZsb2F0KChlLmdldENvbXB1dGVkU3R5bGUocixudWxsKXx8e30pLm1hcmdpblJpZ2h0KSksdHlwZW9mIGQuc3R5bGUuem9vbSE9PWkmJihkLmlubmVySFRNTD1cIlwiLGQuc3R5bGUuY3NzVGV4dD1zK1wid2lkdGg6MXB4O3BhZGRpbmc6MXB4O2Rpc3BsYXk6aW5saW5lO3pvb206MVwiLHQuaW5saW5lQmxvY2tOZWVkc0xheW91dD0zPT09ZC5vZmZzZXRXaWR0aCxkLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiLGQuaW5uZXJIVE1MPVwiPGRpdj48L2Rpdj5cIixkLmZpcnN0Q2hpbGQuc3R5bGUud2lkdGg9XCI1cHhcIix0LnNocmlua1dyYXBCbG9ja3M9MyE9PWQub2Zmc2V0V2lkdGgsdC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0JiYodS5zdHlsZS56b29tPTEpKSx1LnJlbW92ZUNoaWxkKG4pLG49ZD1hPXI9bnVsbCl9KSxuPXM9dT1sPXI9YT1udWxsLHR9KCk7dmFyIE89Lyg/Olxce1tcXHNcXFNdKlxcfXxcXFtbXFxzXFxTXSpcXF0pJC8sQj0vKFtBLVpdKS9nO2Z1bmN0aW9uIFAoZSxuLHIsaSl7aWYoYi5hY2NlcHREYXRhKGUpKXt2YXIgbyxhLHM9Yi5leHBhbmRvLHU9XCJzdHJpbmdcIj09dHlwZW9mIG4sbD1lLm5vZGVUeXBlLHA9bD9iLmNhY2hlOmUsZj1sP2Vbc106ZVtzXSYmcztpZihmJiZwW2ZdJiYoaXx8cFtmXS5kYXRhKXx8IXV8fHIhPT10KXJldHVybiBmfHwobD9lW3NdPWY9Yy5wb3AoKXx8Yi5ndWlkKys6Zj1zKSxwW2ZdfHwocFtmXT17fSxsfHwocFtmXS50b0pTT049Yi5ub29wKSksKFwib2JqZWN0XCI9PXR5cGVvZiBufHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBuKSYmKGk/cFtmXT1iLmV4dGVuZChwW2ZdLG4pOnBbZl0uZGF0YT1iLmV4dGVuZChwW2ZdLmRhdGEsbikpLG89cFtmXSxpfHwoby5kYXRhfHwoby5kYXRhPXt9KSxvPW8uZGF0YSksciE9PXQmJihvW2IuY2FtZWxDYXNlKG4pXT1yKSx1PyhhPW9bbl0sbnVsbD09YSYmKGE9b1tiLmNhbWVsQ2FzZShuKV0pKTphPW8sYX19ZnVuY3Rpb24gUihlLHQsbil7aWYoYi5hY2NlcHREYXRhKGUpKXt2YXIgcixpLG8sYT1lLm5vZGVUeXBlLHM9YT9iLmNhY2hlOmUsdT1hP2VbYi5leHBhbmRvXTpiLmV4cGFuZG87aWYoc1t1XSl7aWYodCYmKG89bj9zW3VdOnNbdV0uZGF0YSkpe2IuaXNBcnJheSh0KT90PXQuY29uY2F0KGIubWFwKHQsYi5jYW1lbENhc2UpKTp0IGluIG8/dD1bdF06KHQ9Yi5jYW1lbENhc2UodCksdD10IGluIG8/W3RdOnQuc3BsaXQoXCIgXCIpKTtmb3Iocj0wLGk9dC5sZW5ndGg7aT5yO3IrKylkZWxldGUgb1t0W3JdXTtpZighKG4/JDpiLmlzRW1wdHlPYmplY3QpKG8pKXJldHVybn0obnx8KGRlbGV0ZSBzW3VdLmRhdGEsJChzW3VdKSkpJiYoYT9iLmNsZWFuRGF0YShbZV0sITApOmIuc3VwcG9ydC5kZWxldGVFeHBhbmRvfHxzIT1zLndpbmRvdz9kZWxldGUgc1t1XTpzW3VdPW51bGwpfX19Yi5leHRlbmQoe2NhY2hlOnt9LGV4cGFuZG86XCJqUXVlcnlcIisocCtNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cXEQvZyxcIlwiKSxub0RhdGE6e2VtYmVkOiEwLG9iamVjdDpcImNsc2lkOkQyN0NEQjZFLUFFNkQtMTFjZi05NkI4LTQ0NDU1MzU0MDAwMFwiLGFwcGxldDohMH0saGFzRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gZT1lLm5vZGVUeXBlP2IuY2FjaGVbZVtiLmV4cGFuZG9dXTplW2IuZXhwYW5kb10sISFlJiYhJChlKX0sZGF0YTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIFAoZSx0LG4pfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIFIoZSx0KX0sX2RhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBQKGUsdCxuLCEwKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gUihlLHQsITApfSxhY2NlcHREYXRhOmZ1bmN0aW9uKGUpe2lmKGUubm9kZVR5cGUmJjEhPT1lLm5vZGVUeXBlJiY5IT09ZS5ub2RlVHlwZSlyZXR1cm4hMTt2YXIgdD1lLm5vZGVOYW1lJiZiLm5vRGF0YVtlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldO3JldHVybiF0fHx0IT09ITAmJmUuZ2V0QXR0cmlidXRlKFwiY2xhc3NpZFwiKT09PXR9fSksYi5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oZSxuKXt2YXIgcixpLG89dGhpc1swXSxhPTAscz1udWxsO2lmKGU9PT10KXtpZih0aGlzLmxlbmd0aCYmKHM9Yi5kYXRhKG8pLDE9PT1vLm5vZGVUeXBlJiYhYi5fZGF0YShvLFwicGFyc2VkQXR0cnNcIikpKXtmb3Iocj1vLmF0dHJpYnV0ZXM7ci5sZW5ndGg+YTthKyspaT1yW2FdLm5hbWUsaS5pbmRleE9mKFwiZGF0YS1cIil8fChpPWIuY2FtZWxDYXNlKGkuc2xpY2UoNSkpLFcobyxpLHNbaV0pKTtiLl9kYXRhKG8sXCJwYXJzZWRBdHRyc1wiLCEwKX1yZXR1cm4gc31yZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgZT90aGlzLmVhY2goZnVuY3Rpb24oKXtiLmRhdGEodGhpcyxlKX0pOmIuYWNjZXNzKHRoaXMsZnVuY3Rpb24obil7cmV0dXJuIG49PT10P28/VyhvLGUsYi5kYXRhKG8sZSkpOm51bGw6KHRoaXMuZWFjaChmdW5jdGlvbigpe2IuZGF0YSh0aGlzLGUsbil9KSx0KX0sbnVsbCxuLGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLCEwKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yi5yZW1vdmVEYXRhKHRoaXMsZSl9KX19KTtmdW5jdGlvbiBXKGUsbixyKXtpZihyPT09dCYmMT09PWUubm9kZVR5cGUpe3ZhciBpPVwiZGF0YS1cIituLnJlcGxhY2UoQixcIi0kMVwiKS50b0xvd2VyQ2FzZSgpO2lmKHI9ZS5nZXRBdHRyaWJ1dGUoaSksXCJzdHJpbmdcIj09dHlwZW9mIHIpe3RyeXtyPVwidHJ1ZVwiPT09cj8hMDpcImZhbHNlXCI9PT1yPyExOlwibnVsbFwiPT09cj9udWxsOityK1wiXCI9PT1yPytyOk8udGVzdChyKT9iLnBhcnNlSlNPTihyKTpyfWNhdGNoKG8pe31iLmRhdGEoZSxuLHIpfWVsc2Ugcj10fXJldHVybiByfWZ1bmN0aW9uICQoZSl7dmFyIHQ7Zm9yKHQgaW4gZSlpZigoXCJkYXRhXCIhPT10fHwhYi5pc0VtcHR5T2JqZWN0KGVbdF0pKSYmXCJ0b0pTT05cIiE9PXQpcmV0dXJuITE7cmV0dXJuITB9Yi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGUsbixyKXt2YXIgaTtyZXR1cm4gZT8obj0obnx8XCJmeFwiKStcInF1ZXVlXCIsaT1iLl9kYXRhKGUsbiksciYmKCFpfHxiLmlzQXJyYXkocik/aT1iLl9kYXRhKGUsbixiLm1ha2VBcnJheShyKSk6aS5wdXNoKHIpKSxpfHxbXSk6dH0sZGVxdWV1ZTpmdW5jdGlvbihlLHQpe3Q9dHx8XCJmeFwiO3ZhciBuPWIucXVldWUoZSx0KSxyPW4ubGVuZ3RoLGk9bi5zaGlmdCgpLG89Yi5fcXVldWVIb29rcyhlLHQpLGE9ZnVuY3Rpb24oKXtiLmRlcXVldWUoZSx0KX07XCJpbnByb2dyZXNzXCI9PT1pJiYoaT1uLnNoaWZ0KCksci0tKSxvLmN1cj1pLGkmJihcImZ4XCI9PT10JiZuLnVuc2hpZnQoXCJpbnByb2dyZXNzXCIpLGRlbGV0ZSBvLnN0b3AsaS5jYWxsKGUsYSxvKSksIXImJm8mJm8uZW1wdHkuZmlyZSgpfSxfcXVldWVIb29rczpmdW5jdGlvbihlLHQpe3ZhciBuPXQrXCJxdWV1ZUhvb2tzXCI7cmV0dXJuIGIuX2RhdGEoZSxuKXx8Yi5fZGF0YShlLG4se2VtcHR5OmIuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIikuYWRkKGZ1bmN0aW9uKCl7Yi5fcmVtb3ZlRGF0YShlLHQrXCJxdWV1ZVwiKSxiLl9yZW1vdmVEYXRhKGUsbil9KX0pfX0pLGIuZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLG4pe3ZhciByPTI7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGUmJihuPWUsZT1cImZ4XCIsci0tKSxyPmFyZ3VtZW50cy5sZW5ndGg/Yi5xdWV1ZSh0aGlzWzBdLGUpOm49PT10P3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9Yi5xdWV1ZSh0aGlzLGUsbik7Yi5fcXVldWVIb29rcyh0aGlzLGUpLFwiZnhcIj09PWUmJlwiaW5wcm9ncmVzc1wiIT09dFswXSYmYi5kZXF1ZXVlKHRoaXMsZSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yi5kZXF1ZXVlKHRoaXMsZSl9KX0sZGVsYXk6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1iLmZ4P2IuZnguc3BlZWRzW2VdfHxlOmUsdD10fHxcImZ4XCIsdGhpcy5xdWV1ZSh0LGZ1bmN0aW9uKHQsbil7dmFyIHI9c2V0VGltZW91dCh0LGUpO24uc3RvcD1mdW5jdGlvbigpe2NsZWFyVGltZW91dChyKX19KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5xdWV1ZShlfHxcImZ4XCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGUsbil7dmFyIHIsaT0xLG89Yi5EZWZlcnJlZCgpLGE9dGhpcyxzPXRoaXMubGVuZ3RoLHU9ZnVuY3Rpb24oKXstLWl8fG8ucmVzb2x2ZVdpdGgoYSxbYV0pfTtcInN0cmluZ1wiIT10eXBlb2YgZSYmKG49ZSxlPXQpLGU9ZXx8XCJmeFwiO3doaWxlKHMtLSlyPWIuX2RhdGEoYVtzXSxlK1wicXVldWVIb29rc1wiKSxyJiZyLmVtcHR5JiYoaSsrLHIuZW1wdHkuYWRkKHUpKTtyZXR1cm4gdSgpLG8ucHJvbWlzZShuKX19KTt2YXIgSSx6LFg9L1tcXHRcXHJcXG5dL2csVT0vXFxyL2csVj0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0KSQvaSxZPS9eKD86YXxhcmVhKSQvaSxKPS9eKD86Y2hlY2tlZHxzZWxlY3RlZHxhdXRvZm9jdXN8YXV0b3BsYXl8YXN5bmN8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWQpJC9pLEc9L14oPzpjaGVja2VkfHNlbGVjdGVkKSQvaSxRPWIuc3VwcG9ydC5nZXRTZXRBdHRyaWJ1dGUsSz1iLnN1cHBvcnQuaW5wdXQ7Yi5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYi5hY2Nlc3ModGhpcyxiLmF0dHIsZSx0LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2IucmVtb3ZlQXR0cih0aGlzLGUpfSl9LHByb3A6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYi5hY2Nlc3ModGhpcyxiLnByb3AsZSx0LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9Yi5wcm9wRml4W2VdfHxlLHRoaXMuZWFjaChmdW5jdGlvbigpe3RyeXt0aGlzW2VdPXQsZGVsZXRlIHRoaXNbZV19Y2F0Y2gobil7fX0pfSxhZGRDbGFzczpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLGE9MCxzPXRoaXMubGVuZ3RoLHU9XCJzdHJpbmdcIj09dHlwZW9mIGUmJmU7aWYoYi5pc0Z1bmN0aW9uKGUpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24odCl7Yih0aGlzKS5hZGRDbGFzcyhlLmNhbGwodGhpcyx0LHRoaXMuY2xhc3NOYW1lKSl9KTtpZih1KWZvcih0PShlfHxcIlwiKS5tYXRjaCh3KXx8W107cz5hO2ErKylpZihuPXRoaXNbYV0scj0xPT09bi5ub2RlVHlwZSYmKG4uY2xhc3NOYW1lPyhcIiBcIituLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZShYLFwiIFwiKTpcIiBcIikpe289MDt3aGlsZShpPXRbbysrXSkwPnIuaW5kZXhPZihcIiBcIitpK1wiIFwiKSYmKHIrPWkrXCIgXCIpO24uY2xhc3NOYW1lPWIudHJpbShyKX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGksbyxhPTAscz10aGlzLmxlbmd0aCx1PTA9PT1hcmd1bWVudHMubGVuZ3RofHxcInN0cmluZ1wiPT10eXBlb2YgZSYmZTtpZihiLmlzRnVuY3Rpb24oZSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih0KXtiKHRoaXMpLnJlbW92ZUNsYXNzKGUuY2FsbCh0aGlzLHQsdGhpcy5jbGFzc05hbWUpKX0pO2lmKHUpZm9yKHQ9KGV8fFwiXCIpLm1hdGNoKHcpfHxbXTtzPmE7YSsrKWlmKG49dGhpc1thXSxyPTE9PT1uLm5vZGVUeXBlJiYobi5jbGFzc05hbWU/KFwiIFwiK24uY2xhc3NOYW1lK1wiIFwiKS5yZXBsYWNlKFgsXCIgXCIpOlwiXCIpKXtvPTA7d2hpbGUoaT10W28rK10pd2hpbGUoci5pbmRleE9mKFwiIFwiK2krXCIgXCIpPj0wKXI9ci5yZXBsYWNlKFwiIFwiK2krXCIgXCIsXCIgXCIpO24uY2xhc3NOYW1lPWU/Yi50cmltKHIpOlwiXCJ9cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGUsdCl7dmFyIG49dHlwZW9mIGUscj1cImJvb2xlYW5cIj09dHlwZW9mIHQ7cmV0dXJuIGIuaXNGdW5jdGlvbihlKT90aGlzLmVhY2goZnVuY3Rpb24obil7Yih0aGlzKS50b2dnbGVDbGFzcyhlLmNhbGwodGhpcyxuLHRoaXMuY2xhc3NOYW1lLHQpLHQpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7aWYoXCJzdHJpbmdcIj09PW4pe3ZhciBvLGE9MCxzPWIodGhpcyksdT10LGw9ZS5tYXRjaCh3KXx8W107d2hpbGUobz1sW2ErK10pdT1yP3U6IXMuaGFzQ2xhc3Mobyksc1t1P1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKG8pfWVsc2Uobj09PWl8fFwiYm9vbGVhblwiPT09bikmJih0aGlzLmNsYXNzTmFtZSYmYi5fZGF0YSh0aGlzLFwiX19jbGFzc05hbWVfX1wiLHRoaXMuY2xhc3NOYW1lKSx0aGlzLmNsYXNzTmFtZT10aGlzLmNsYXNzTmFtZXx8ZT09PSExP1wiXCI6Yi5fZGF0YSh0aGlzLFwiX19jbGFzc05hbWVfX1wiKXx8XCJcIil9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQ9XCIgXCIrZStcIiBcIixuPTAscj10aGlzLmxlbmd0aDtmb3IoO3I+bjtuKyspaWYoMT09PXRoaXNbbl0ubm9kZVR5cGUmJihcIiBcIit0aGlzW25dLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZShYLFwiIFwiKS5pbmRleE9mKHQpPj0wKXJldHVybiEwO3JldHVybiExfSx2YWw6ZnVuY3Rpb24oZSl7dmFyIG4scixpLG89dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gaT1iLmlzRnVuY3Rpb24oZSksdGhpcy5lYWNoKGZ1bmN0aW9uKG4pe3ZhciBvLGE9Yih0aGlzKTsxPT09dGhpcy5ub2RlVHlwZSYmKG89aT9lLmNhbGwodGhpcyxuLGEudmFsKCkpOmUsbnVsbD09bz9vPVwiXCI6XCJudW1iZXJcIj09dHlwZW9mIG8/bys9XCJcIjpiLmlzQXJyYXkobykmJihvPWIubWFwKG8sZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/XCJcIjplK1wiXCJ9KSkscj1iLnZhbEhvb2tzW3RoaXMudHlwZV18fGIudmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxyJiZcInNldFwiaW4gciYmci5zZXQodGhpcyxvLFwidmFsdWVcIikhPT10fHwodGhpcy52YWx1ZT1vKSl9KTtpZihvKXJldHVybiByPWIudmFsSG9va3Nbby50eXBlXXx8Yi52YWxIb29rc1tvLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLHImJlwiZ2V0XCJpbiByJiYobj1yLmdldChvLFwidmFsdWVcIikpIT09dD9uOihuPW8udmFsdWUsXCJzdHJpbmdcIj09dHlwZW9mIG4/bi5yZXBsYWNlKFUsXCJcIik6bnVsbD09bj9cIlwiOm4pfX19KSxiLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUuYXR0cmlidXRlcy52YWx1ZTtyZXR1cm4hdHx8dC5zcGVjaWZpZWQ/ZS52YWx1ZTplLnRleHR9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihlKXt2YXIgdCxuLHI9ZS5vcHRpb25zLGk9ZS5zZWxlY3RlZEluZGV4LG89XCJzZWxlY3Qtb25lXCI9PT1lLnR5cGV8fDA+aSxhPW8/bnVsbDpbXSxzPW8/aSsxOnIubGVuZ3RoLHU9MD5pP3M6bz9pOjA7Zm9yKDtzPnU7dSsrKWlmKG49clt1XSwhKCFuLnNlbGVjdGVkJiZ1IT09aXx8KGIuc3VwcG9ydC5vcHREaXNhYmxlZD9uLmRpc2FibGVkOm51bGwhPT1uLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpKXx8bi5wYXJlbnROb2RlLmRpc2FibGVkJiZiLm5vZGVOYW1lKG4ucGFyZW50Tm9kZSxcIm9wdGdyb3VwXCIpKSl7aWYodD1iKG4pLnZhbCgpLG8pcmV0dXJuIHQ7YS5wdXNoKHQpfXJldHVybiBhfSxzZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1iLm1ha2VBcnJheSh0KTtyZXR1cm4gYihlKS5maW5kKFwib3B0aW9uXCIpLmVhY2goZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGVkPWIuaW5BcnJheShiKHRoaXMpLnZhbCgpLG4pPj0wfSksbi5sZW5ndGh8fChlLnNlbGVjdGVkSW5kZXg9LTEpLG59fX0sYXR0cjpmdW5jdGlvbihlLG4scil7dmFyIG8sYSxzLHU9ZS5ub2RlVHlwZTtpZihlJiYzIT09dSYmOCE9PXUmJjIhPT11KXJldHVybiB0eXBlb2YgZS5nZXRBdHRyaWJ1dGU9PT1pP2IucHJvcChlLG4scik6KGE9MSE9PXV8fCFiLmlzWE1MRG9jKGUpLGEmJihuPW4udG9Mb3dlckNhc2UoKSxvPWIuYXR0ckhvb2tzW25dfHwoSi50ZXN0KG4pP3o6SSkpLHI9PT10P28mJmEmJlwiZ2V0XCJpbiBvJiZudWxsIT09KHM9by5nZXQoZSxuKSk/czoodHlwZW9mIGUuZ2V0QXR0cmlidXRlIT09aSYmKHM9ZS5nZXRBdHRyaWJ1dGUobikpLG51bGw9PXM/dDpzKTpudWxsIT09cj9vJiZhJiZcInNldFwiaW4gbyYmKHM9by5zZXQoZSxyLG4pKSE9PXQ/czooZS5zZXRBdHRyaWJ1dGUobixyK1wiXCIpLHIpOihiLnJlbW92ZUF0dHIoZSxuKSx0KSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk9MCxvPXQmJnQubWF0Y2godyk7aWYobyYmMT09PWUubm9kZVR5cGUpd2hpbGUobj1vW2krK10pcj1iLnByb3BGaXhbbl18fG4sSi50ZXN0KG4pPyFRJiZHLnRlc3Qobik/ZVtiLmNhbWVsQ2FzZShcImRlZmF1bHQtXCIrbildPWVbcl09ITE6ZVtyXT0hMTpiLmF0dHIoZSxuLFwiXCIpLGUucmVtb3ZlQXR0cmlidXRlKFE/bjpyKX0sYXR0ckhvb2tzOnt0eXBlOntzZXQ6ZnVuY3Rpb24oZSx0KXtpZighYi5zdXBwb3J0LnJhZGlvVmFsdWUmJlwicmFkaW9cIj09PXQmJmIubm9kZU5hbWUoZSxcImlucHV0XCIpKXt2YXIgbj1lLnZhbHVlO3JldHVybiBlLnNldEF0dHJpYnV0ZShcInR5cGVcIix0KSxuJiYoZS52YWx1ZT1uKSx0fX19fSxwcm9wRml4Ont0YWJpbmRleDpcInRhYkluZGV4XCIscmVhZG9ubHk6XCJyZWFkT25seVwiLFwiZm9yXCI6XCJodG1sRm9yXCIsXCJjbGFzc1wiOlwiY2xhc3NOYW1lXCIsbWF4bGVuZ3RoOlwibWF4TGVuZ3RoXCIsY2VsbHNwYWNpbmc6XCJjZWxsU3BhY2luZ1wiLGNlbGxwYWRkaW5nOlwiY2VsbFBhZGRpbmdcIixyb3dzcGFuOlwicm93U3BhblwiLGNvbHNwYW46XCJjb2xTcGFuXCIsdXNlbWFwOlwidXNlTWFwXCIsZnJhbWVib3JkZXI6XCJmcmFtZUJvcmRlclwiLGNvbnRlbnRlZGl0YWJsZTpcImNvbnRlbnRFZGl0YWJsZVwifSxwcm9wOmZ1bmN0aW9uKGUsbixyKXt2YXIgaSxvLGEscz1lLm5vZGVUeXBlO2lmKGUmJjMhPT1zJiY4IT09cyYmMiE9PXMpcmV0dXJuIGE9MSE9PXN8fCFiLmlzWE1MRG9jKGUpLGEmJihuPWIucHJvcEZpeFtuXXx8bixvPWIucHJvcEhvb2tzW25dKSxyIT09dD9vJiZcInNldFwiaW4gbyYmKGk9by5zZXQoZSxyLG4pKSE9PXQ/aTplW25dPXI6byYmXCJnZXRcImluIG8mJm51bGwhPT0oaT1vLmdldChlLG4pKT9pOmVbbl19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihlKXt2YXIgbj1lLmdldEF0dHJpYnV0ZU5vZGUoXCJ0YWJpbmRleFwiKTtyZXR1cm4gbiYmbi5zcGVjaWZpZWQ/cGFyc2VJbnQobi52YWx1ZSwxMCk6Vi50ZXN0KGUubm9kZU5hbWUpfHxZLnRlc3QoZS5ub2RlTmFtZSkmJmUuaHJlZj8wOnR9fX19KSx6PXtnZXQ6ZnVuY3Rpb24oZSxuKXt2YXIgcj1iLnByb3AoZSxuKSxpPVwiYm9vbGVhblwiPT10eXBlb2YgciYmZS5nZXRBdHRyaWJ1dGUobiksbz1cImJvb2xlYW5cIj09dHlwZW9mIHI/SyYmUT9udWxsIT1pOkcudGVzdChuKT9lW2IuY2FtZWxDYXNlKFwiZGVmYXVsdC1cIituKV06ISFpOmUuZ2V0QXR0cmlidXRlTm9kZShuKTtyZXR1cm4gbyYmby52YWx1ZSE9PSExP24udG9Mb3dlckNhc2UoKTp0fSxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0PT09ITE/Yi5yZW1vdmVBdHRyKGUsbik6SyYmUXx8IUcudGVzdChuKT9lLnNldEF0dHJpYnV0ZSghUSYmYi5wcm9wRml4W25dfHxuLG4pOmVbYi5jYW1lbENhc2UoXCJkZWZhdWx0LVwiK24pXT1lW25dPSEwLG59fSxLJiZRfHwoYi5hdHRySG9va3MudmFsdWU9e2dldDpmdW5jdGlvbihlLG4pe3ZhciByPWUuZ2V0QXR0cmlidXRlTm9kZShuKTtyZXR1cm4gYi5ub2RlTmFtZShlLFwiaW5wdXRcIik/ZS5kZWZhdWx0VmFsdWU6ciYmci5zcGVjaWZpZWQ/ci52YWx1ZTp0fSxzZXQ6ZnVuY3Rpb24oZSxuLHIpe3JldHVybiBiLm5vZGVOYW1lKGUsXCJpbnB1dFwiKT8oZS5kZWZhdWx0VmFsdWU9bix0KTpJJiZJLnNldChlLG4scil9fSksUXx8KEk9Yi52YWxIb29rcy5idXR0b249e2dldDpmdW5jdGlvbihlLG4pe3ZhciByPWUuZ2V0QXR0cmlidXRlTm9kZShuKTtyZXR1cm4gciYmKFwiaWRcIj09PW58fFwibmFtZVwiPT09bnx8XCJjb29yZHNcIj09PW4/XCJcIiE9PXIudmFsdWU6ci5zcGVjaWZpZWQpP3IudmFsdWU6dH0sc2V0OmZ1bmN0aW9uKGUsbixyKXt2YXIgaT1lLmdldEF0dHJpYnV0ZU5vZGUocik7cmV0dXJuIGl8fGUuc2V0QXR0cmlidXRlTm9kZShpPWUub3duZXJEb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUocikpLGkudmFsdWU9bis9XCJcIixcInZhbHVlXCI9PT1yfHxuPT09ZS5nZXRBdHRyaWJ1dGUocik/bjp0fX0sYi5hdHRySG9va3MuY29udGVudGVkaXRhYmxlPXtnZXQ6SS5nZXQsc2V0OmZ1bmN0aW9uKGUsdCxuKXtJLnNldChlLFwiXCI9PT10PyExOnQsbil9fSxiLmVhY2goW1wid2lkdGhcIixcImhlaWdodFwiXSxmdW5jdGlvbihlLG4pe2IuYXR0ckhvb2tzW25dPWIuZXh0ZW5kKGIuYXR0ckhvb2tzW25dLHtzZXQ6ZnVuY3Rpb24oZSxyKXtyZXR1cm5cIlwiPT09cj8oZS5zZXRBdHRyaWJ1dGUobixcImF1dG9cIikscik6dH19KX0pKSxiLnN1cHBvcnQuaHJlZk5vcm1hbGl6ZWR8fChiLmVhY2goW1wiaHJlZlwiLFwic3JjXCIsXCJ3aWR0aFwiLFwiaGVpZ2h0XCJdLGZ1bmN0aW9uKGUsbil7Yi5hdHRySG9va3Nbbl09Yi5leHRlbmQoYi5hdHRySG9va3Nbbl0se2dldDpmdW5jdGlvbihlKXt2YXIgcj1lLmdldEF0dHJpYnV0ZShuLDIpO3JldHVybiBudWxsPT1yP3Q6cn19KX0pLGIuZWFjaChbXCJocmVmXCIsXCJzcmNcIl0sZnVuY3Rpb24oZSx0KXtiLnByb3BIb29rc1t0XT17Z2V0OmZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSh0LDQpfX19KSksYi5zdXBwb3J0LnN0eWxlfHwoYi5hdHRySG9va3Muc3R5bGU9e2dldDpmdW5jdGlvbihlKXtyZXR1cm4gZS5zdHlsZS5jc3NUZXh0fHx0fSxzZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5zdHlsZS5jc3NUZXh0PXQrXCJcIn19KSxiLnN1cHBvcnQub3B0U2VsZWN0ZWR8fChiLnByb3BIb29rcy5zZWxlY3RlZD1iLmV4dGVuZChiLnByb3BIb29rcy5zZWxlY3RlZCx7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyZW50Tm9kZTtyZXR1cm4gdCYmKHQuc2VsZWN0ZWRJbmRleCx0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4KSxudWxsfX0pKSxiLnN1cHBvcnQuZW5jdHlwZXx8KGIucHJvcEZpeC5lbmN0eXBlPVwiZW5jb2RpbmdcIiksYi5zdXBwb3J0LmNoZWNrT258fGIuZWFjaChbXCJyYWRpb1wiLFwiY2hlY2tib3hcIl0sZnVuY3Rpb24oKXtiLnZhbEhvb2tzW3RoaXNdPXtnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PT1lLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpP1wib25cIjplLnZhbHVlfX19KSxiLmVhY2goW1wicmFkaW9cIixcImNoZWNrYm94XCJdLGZ1bmN0aW9uKCl7Yi52YWxIb29rc1t0aGlzXT1iLmV4dGVuZChiLnZhbEhvb2tzW3RoaXNdLHtzZXQ6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gYi5pc0FycmF5KG4pP2UuY2hlY2tlZD1iLmluQXJyYXkoYihlKS52YWwoKSxuKT49MDp0fX0pfSk7dmFyIFo9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWEpJC9pLGV0PS9ea2V5Lyx0dD0vXig/Om1vdXNlfGNvbnRleHRtZW51KXxjbGljay8sbnQ9L14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLHJ0PS9eKFteLl0qKSg/OlxcLiguKyl8KSQvO2Z1bmN0aW9uIGl0KCl7cmV0dXJuITB9ZnVuY3Rpb24gb3QoKXtyZXR1cm4hMX1iLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGUsbixyLG8sYSl7dmFyIHMsdSxsLGMscCxmLGQsaCxnLG0seSx2PWIuX2RhdGEoZSk7aWYodil7ci5oYW5kbGVyJiYoYz1yLHI9Yy5oYW5kbGVyLGE9Yy5zZWxlY3Rvciksci5ndWlkfHwoci5ndWlkPWIuZ3VpZCsrKSwodT12LmV2ZW50cyl8fCh1PXYuZXZlbnRzPXt9KSwoZj12LmhhbmRsZSl8fChmPXYuaGFuZGxlPWZ1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgYj09PWl8fGUmJmIuZXZlbnQudHJpZ2dlcmVkPT09ZS50eXBlP3Q6Yi5ldmVudC5kaXNwYXRjaC5hcHBseShmLmVsZW0sYXJndW1lbnRzKX0sZi5lbGVtPWUpLG49KG58fFwiXCIpLm1hdGNoKHcpfHxbXCJcIl0sbD1uLmxlbmd0aDt3aGlsZShsLS0pcz1ydC5leGVjKG5bbF0pfHxbXSxnPXk9c1sxXSxtPShzWzJdfHxcIlwiKS5zcGxpdChcIi5cIikuc29ydCgpLHA9Yi5ldmVudC5zcGVjaWFsW2ddfHx7fSxnPShhP3AuZGVsZWdhdGVUeXBlOnAuYmluZFR5cGUpfHxnLHA9Yi5ldmVudC5zcGVjaWFsW2ddfHx7fSxkPWIuZXh0ZW5kKHt0eXBlOmcsb3JpZ1R5cGU6eSxkYXRhOm8saGFuZGxlcjpyLGd1aWQ6ci5ndWlkLHNlbGVjdG9yOmEsbmVlZHNDb250ZXh0OmEmJmIuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChhKSxuYW1lc3BhY2U6bS5qb2luKFwiLlwiKX0sYyksKGg9dVtnXSl8fChoPXVbZ109W10saC5kZWxlZ2F0ZUNvdW50PTAscC5zZXR1cCYmcC5zZXR1cC5jYWxsKGUsbyxtLGYpIT09ITF8fChlLmFkZEV2ZW50TGlzdGVuZXI/ZS5hZGRFdmVudExpc3RlbmVyKGcsZiwhMSk6ZS5hdHRhY2hFdmVudCYmZS5hdHRhY2hFdmVudChcIm9uXCIrZyxmKSkpLHAuYWRkJiYocC5hZGQuY2FsbChlLGQpLGQuaGFuZGxlci5ndWlkfHwoZC5oYW5kbGVyLmd1aWQ9ci5ndWlkKSksYT9oLnNwbGljZShoLmRlbGVnYXRlQ291bnQrKywwLGQpOmgucHVzaChkKSxiLmV2ZW50Lmdsb2JhbFtnXT0hMDtlPW51bGx9fSxyZW1vdmU6ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbyxhLHMsdSxsLGMscCxmLGQsaCxnLG09Yi5oYXNEYXRhKGUpJiZiLl9kYXRhKGUpO2lmKG0mJihjPW0uZXZlbnRzKSl7dD0odHx8XCJcIikubWF0Y2godyl8fFtcIlwiXSxsPXQubGVuZ3RoO3doaWxlKGwtLSlpZihzPXJ0LmV4ZWModFtsXSl8fFtdLGQ9Zz1zWzFdLGg9KHNbMl18fFwiXCIpLnNwbGl0KFwiLlwiKS5zb3J0KCksZCl7cD1iLmV2ZW50LnNwZWNpYWxbZF18fHt9LGQ9KHI/cC5kZWxlZ2F0ZVR5cGU6cC5iaW5kVHlwZSl8fGQsZj1jW2RdfHxbXSxzPXNbMl0mJlJlZ0V4cChcIihefFxcXFwuKVwiK2guam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpK1wiKFxcXFwufCQpXCIpLHU9bz1mLmxlbmd0aDt3aGlsZShvLS0pYT1mW29dLCFpJiZnIT09YS5vcmlnVHlwZXx8biYmbi5ndWlkIT09YS5ndWlkfHxzJiYhcy50ZXN0KGEubmFtZXNwYWNlKXx8ciYmciE9PWEuc2VsZWN0b3ImJihcIioqXCIhPT1yfHwhYS5zZWxlY3Rvcil8fChmLnNwbGljZShvLDEpLGEuc2VsZWN0b3ImJmYuZGVsZWdhdGVDb3VudC0tLHAucmVtb3ZlJiZwLnJlbW92ZS5jYWxsKGUsYSkpO3UmJiFmLmxlbmd0aCYmKHAudGVhcmRvd24mJnAudGVhcmRvd24uY2FsbChlLGgsbS5oYW5kbGUpIT09ITF8fGIucmVtb3ZlRXZlbnQoZSxkLG0uaGFuZGxlKSxkZWxldGUgY1tkXSl9ZWxzZSBmb3IoZCBpbiBjKWIuZXZlbnQucmVtb3ZlKGUsZCt0W2xdLG4sciwhMCk7Yi5pc0VtcHR5T2JqZWN0KGMpJiYoZGVsZXRlIG0uaGFuZGxlLGIuX3JlbW92ZURhdGEoZSxcImV2ZW50c1wiKSl9fSx0cmlnZ2VyOmZ1bmN0aW9uKG4scixpLGEpe3ZhciBzLHUsbCxjLHAsZixkLGg9W2l8fG9dLGc9eS5jYWxsKG4sXCJ0eXBlXCIpP24udHlwZTpuLG09eS5jYWxsKG4sXCJuYW1lc3BhY2VcIik/bi5uYW1lc3BhY2Uuc3BsaXQoXCIuXCIpOltdO2lmKGw9Zj1pPWl8fG8sMyE9PWkubm9kZVR5cGUmJjghPT1pLm5vZGVUeXBlJiYhbnQudGVzdChnK2IuZXZlbnQudHJpZ2dlcmVkKSYmKGcuaW5kZXhPZihcIi5cIik+PTAmJihtPWcuc3BsaXQoXCIuXCIpLGc9bS5zaGlmdCgpLG0uc29ydCgpKSx1PTA+Zy5pbmRleE9mKFwiOlwiKSYmXCJvblwiK2csbj1uW2IuZXhwYW5kb10/bjpuZXcgYi5FdmVudChnLFwib2JqZWN0XCI9PXR5cGVvZiBuJiZuKSxuLmlzVHJpZ2dlcj0hMCxuLm5hbWVzcGFjZT1tLmpvaW4oXCIuXCIpLG4ubmFtZXNwYWNlX3JlPW4ubmFtZXNwYWNlP1JlZ0V4cChcIihefFxcXFwuKVwiK20uam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpK1wiKFxcXFwufCQpXCIpOm51bGwsbi5yZXN1bHQ9dCxuLnRhcmdldHx8KG4udGFyZ2V0PWkpLHI9bnVsbD09cj9bbl06Yi5tYWtlQXJyYXkocixbbl0pLHA9Yi5ldmVudC5zcGVjaWFsW2ddfHx7fSxhfHwhcC50cmlnZ2VyfHxwLnRyaWdnZXIuYXBwbHkoaSxyKSE9PSExKSl7aWYoIWEmJiFwLm5vQnViYmxlJiYhYi5pc1dpbmRvdyhpKSl7Zm9yKGM9cC5kZWxlZ2F0ZVR5cGV8fGcsbnQudGVzdChjK2cpfHwobD1sLnBhcmVudE5vZGUpO2w7bD1sLnBhcmVudE5vZGUpaC5wdXNoKGwpLGY9bDtmPT09KGkub3duZXJEb2N1bWVudHx8bykmJmgucHVzaChmLmRlZmF1bHRWaWV3fHxmLnBhcmVudFdpbmRvd3x8ZSl9ZD0wO3doaWxlKChsPWhbZCsrXSkmJiFuLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpbi50eXBlPWQ+MT9jOnAuYmluZFR5cGV8fGcscz0oYi5fZGF0YShsLFwiZXZlbnRzXCIpfHx7fSlbbi50eXBlXSYmYi5fZGF0YShsLFwiaGFuZGxlXCIpLHMmJnMuYXBwbHkobCxyKSxzPXUmJmxbdV0scyYmYi5hY2NlcHREYXRhKGwpJiZzLmFwcGx5JiZzLmFwcGx5KGwscik9PT0hMSYmbi5wcmV2ZW50RGVmYXVsdCgpO2lmKG4udHlwZT1nLCEoYXx8bi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8cC5fZGVmYXVsdCYmcC5fZGVmYXVsdC5hcHBseShpLm93bmVyRG9jdW1lbnQscikhPT0hMXx8XCJjbGlja1wiPT09ZyYmYi5ub2RlTmFtZShpLFwiYVwiKXx8IWIuYWNjZXB0RGF0YShpKXx8IXV8fCFpW2ddfHxiLmlzV2luZG93KGkpKSl7Zj1pW3VdLGYmJihpW3VdPW51bGwpLGIuZXZlbnQudHJpZ2dlcmVkPWc7dHJ5e2lbZ10oKX1jYXRjaCh2KXt9Yi5ldmVudC50cmlnZ2VyZWQ9dCxmJiYoaVt1XT1mKX1yZXR1cm4gbi5yZXN1bHR9fSxkaXNwYXRjaDpmdW5jdGlvbihlKXtlPWIuZXZlbnQuZml4KGUpO3ZhciBuLHIsaSxvLGEscz1bXSx1PWguY2FsbChhcmd1bWVudHMpLGw9KGIuX2RhdGEodGhpcyxcImV2ZW50c1wiKXx8e30pW2UudHlwZV18fFtdLGM9Yi5ldmVudC5zcGVjaWFsW2UudHlwZV18fHt9O2lmKHVbMF09ZSxlLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWMucHJlRGlzcGF0Y2h8fGMucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGUpIT09ITEpe3M9Yi5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsZSxsKSxuPTA7d2hpbGUoKG89c1tuKytdKSYmIWUuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7ZS5jdXJyZW50VGFyZ2V0PW8uZWxlbSxhPTA7d2hpbGUoKGk9by5oYW5kbGVyc1thKytdKSYmIWUuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSkoIWUubmFtZXNwYWNlX3JlfHxlLm5hbWVzcGFjZV9yZS50ZXN0KGkubmFtZXNwYWNlKSkmJihlLmhhbmRsZU9iaj1pLGUuZGF0YT1pLmRhdGEscj0oKGIuZXZlbnQuc3BlY2lhbFtpLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8aS5oYW5kbGVyKS5hcHBseShvLmVsZW0sdSksciE9PXQmJihlLnJlc3VsdD1yKT09PSExJiYoZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCkpKX1yZXR1cm4gYy5wb3N0RGlzcGF0Y2gmJmMucG9zdERpc3BhdGNoLmNhbGwodGhpcyxlKSxlLnJlc3VsdH19LGhhbmRsZXJzOmZ1bmN0aW9uKGUsbil7dmFyIHIsaSxvLGEscz1bXSx1PW4uZGVsZWdhdGVDb3VudCxsPWUudGFyZ2V0O2lmKHUmJmwubm9kZVR5cGUmJighZS5idXR0b258fFwiY2xpY2tcIiE9PWUudHlwZSkpZm9yKDtsIT10aGlzO2w9bC5wYXJlbnROb2RlfHx0aGlzKWlmKDE9PT1sLm5vZGVUeXBlJiYobC5kaXNhYmxlZCE9PSEwfHxcImNsaWNrXCIhPT1lLnR5cGUpKXtmb3Iobz1bXSxhPTA7dT5hO2ErKylpPW5bYV0scj1pLnNlbGVjdG9yK1wiIFwiLG9bcl09PT10JiYob1tyXT1pLm5lZWRzQ29udGV4dD9iKHIsdGhpcykuaW5kZXgobCk+PTA6Yi5maW5kKHIsdGhpcyxudWxsLFtsXSkubGVuZ3RoKSxvW3JdJiZvLnB1c2goaSk7by5sZW5ndGgmJnMucHVzaCh7ZWxlbTpsLGhhbmRsZXJzOm99KX1yZXR1cm4gbi5sZW5ndGg+dSYmcy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6bi5zbGljZSh1KX0pLHN9LGZpeDpmdW5jdGlvbihlKXtpZihlW2IuZXhwYW5kb10pcmV0dXJuIGU7dmFyIHQsbixyLGk9ZS50eXBlLGE9ZSxzPXRoaXMuZml4SG9va3NbaV07c3x8KHRoaXMuZml4SG9va3NbaV09cz10dC50ZXN0KGkpP3RoaXMubW91c2VIb29rczpldC50ZXN0KGkpP3RoaXMua2V5SG9va3M6e30pLHI9cy5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChzLnByb3BzKTp0aGlzLnByb3BzLGU9bmV3IGIuRXZlbnQoYSksdD1yLmxlbmd0aDt3aGlsZSh0LS0pbj1yW3RdLGVbbl09YVtuXTtyZXR1cm4gZS50YXJnZXR8fChlLnRhcmdldD1hLnNyY0VsZW1lbnR8fG8pLDM9PT1lLnRhcmdldC5ub2RlVHlwZSYmKGUudGFyZ2V0PWUudGFyZ2V0LnBhcmVudE5vZGUpLGUubWV0YUtleT0hIWUubWV0YUtleSxzLmZpbHRlcj9zLmZpbHRlcihlLGEpOmV9LHByb3BzOlwiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoXCIuc3BsaXQoXCIgXCIpLGZpeEhvb2tzOnt9LGtleUhvb2tzOntwcm9wczpcImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGVcIi5zcGxpdChcIiBcIiksZmlsdGVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG51bGw9PWUud2hpY2gmJihlLndoaWNoPW51bGwhPXQuY2hhckNvZGU/dC5jaGFyQ29kZTp0LmtleUNvZGUpLGV9fSxtb3VzZUhvb2tzOntwcm9wczpcImJ1dHRvbiBidXR0b25zIGNsaWVudFggY2xpZW50WSBmcm9tRWxlbWVudCBvZmZzZXRYIG9mZnNldFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudFwiLnNwbGl0KFwiIFwiKSxmaWx0ZXI6ZnVuY3Rpb24oZSxuKXt2YXIgcixpLGEscz1uLmJ1dHRvbix1PW4uZnJvbUVsZW1lbnQ7cmV0dXJuIG51bGw9PWUucGFnZVgmJm51bGwhPW4uY2xpZW50WCYmKGk9ZS50YXJnZXQub3duZXJEb2N1bWVudHx8byxhPWkuZG9jdW1lbnRFbGVtZW50LHI9aS5ib2R5LGUucGFnZVg9bi5jbGllbnRYKyhhJiZhLnNjcm9sbExlZnR8fHImJnIuc2Nyb2xsTGVmdHx8MCktKGEmJmEuY2xpZW50TGVmdHx8ciYmci5jbGllbnRMZWZ0fHwwKSxlLnBhZ2VZPW4uY2xpZW50WSsoYSYmYS5zY3JvbGxUb3B8fHImJnIuc2Nyb2xsVG9wfHwwKS0oYSYmYS5jbGllbnRUb3B8fHImJnIuY2xpZW50VG9wfHwwKSksIWUucmVsYXRlZFRhcmdldCYmdSYmKGUucmVsYXRlZFRhcmdldD11PT09ZS50YXJnZXQ/bi50b0VsZW1lbnQ6dSksZS53aGljaHx8cz09PXR8fChlLndoaWNoPTEmcz8xOjImcz8zOjQmcz8yOjApLGV9fSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sY2xpY2s6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gYi5ub2RlTmFtZSh0aGlzLFwiaW5wdXRcIikmJlwiY2hlY2tib3hcIj09PXRoaXMudHlwZSYmdGhpcy5jbGljaz8odGhpcy5jbGljaygpLCExKTp0fX0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZih0aGlzIT09by5hY3RpdmVFbGVtZW50JiZ0aGlzLmZvY3VzKXRyeXtyZXR1cm4gdGhpcy5mb2N1cygpLCExfWNhdGNoKGUpe319LGRlbGVnYXRlVHlwZTpcImZvY3VzaW5cIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzPT09by5hY3RpdmVFbGVtZW50JiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp0fSxkZWxlZ2F0ZVR5cGU6XCJmb2N1c291dFwifSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihlKXtlLnJlc3VsdCE9PXQmJihlLm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9ZS5yZXN1bHQpfX19LHNpbXVsYXRlOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpPWIuZXh0ZW5kKG5ldyBiLkV2ZW50LG4se3R5cGU6ZSxpc1NpbXVsYXRlZDohMCxvcmlnaW5hbEV2ZW50Ont9fSk7cj9iLmV2ZW50LnRyaWdnZXIoaSxudWxsLHQpOmIuZXZlbnQuZGlzcGF0Y2guY2FsbCh0LGkpLGkuaXNEZWZhdWx0UHJldmVudGVkKCkmJm4ucHJldmVudERlZmF1bHQoKX19LGIucmVtb3ZlRXZlbnQ9by5yZW1vdmVFdmVudExpc3RlbmVyP2Z1bmN0aW9uKGUsdCxuKXtlLnJlbW92ZUV2ZW50TGlzdGVuZXImJmUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LG4sITEpfTpmdW5jdGlvbihlLHQsbil7dmFyIHI9XCJvblwiK3Q7ZS5kZXRhY2hFdmVudCYmKHR5cGVvZiBlW3JdPT09aSYmKGVbcl09bnVsbCksZS5kZXRhY2hFdmVudChyLG4pKX0sYi5FdmVudD1mdW5jdGlvbihlLG4pe3JldHVybiB0aGlzIGluc3RhbmNlb2YgYi5FdmVudD8oZSYmZS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9ZSx0aGlzLnR5cGU9ZS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWUuZGVmYXVsdFByZXZlbnRlZHx8ZS5yZXR1cm5WYWx1ZT09PSExfHxlLmdldFByZXZlbnREZWZhdWx0JiZlLmdldFByZXZlbnREZWZhdWx0KCk/aXQ6b3QpOnRoaXMudHlwZT1lLG4mJmIuZXh0ZW5kKHRoaXMsbiksdGhpcy50aW1lU3RhbXA9ZSYmZS50aW1lU3RhbXB8fGIubm93KCksdGhpc1tiLmV4cGFuZG9dPSEwLHQpOm5ldyBiLkV2ZW50KGUsbil9LGIuRXZlbnQucHJvdG90eXBlPXtpc0RlZmF1bHRQcmV2ZW50ZWQ6b3QsaXNQcm9wYWdhdGlvblN0b3BwZWQ6b3QsaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6b3QscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9aXQsZSYmKGUucHJldmVudERlZmF1bHQ/ZS5wcmV2ZW50RGVmYXVsdCgpOmUucmV0dXJuVmFsdWU9ITEpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1pdCxlJiYoZS5zdG9wUHJvcGFnYXRpb24mJmUuc3RvcFByb3BhZ2F0aW9uKCksZS5jYW5jZWxCdWJibGU9ITApfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPWl0LHRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9fSxiLmVhY2goe21vdXNlZW50ZXI6XCJtb3VzZW92ZXJcIixtb3VzZWxlYXZlOlwibW91c2VvdXRcIn0sZnVuY3Rpb24oZSx0KXtiLmV2ZW50LnNwZWNpYWxbZV09e2RlbGVnYXRlVHlwZTp0LGJpbmRUeXBlOnQsaGFuZGxlOmZ1bmN0aW9uKGUpe3ZhciBuLHI9dGhpcyxpPWUucmVsYXRlZFRhcmdldCxvPWUuaGFuZGxlT2JqO1xucmV0dXJuKCFpfHxpIT09ciYmIWIuY29udGFpbnMocixpKSkmJihlLnR5cGU9by5vcmlnVHlwZSxuPW8uaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksZS50eXBlPXQpLG59fX0pLGIuc3VwcG9ydC5zdWJtaXRCdWJibGVzfHwoYi5ldmVudC5zcGVjaWFsLnN1Ym1pdD17c2V0dXA6ZnVuY3Rpb24oKXtyZXR1cm4gYi5ub2RlTmFtZSh0aGlzLFwiZm9ybVwiKT8hMTooYi5ldmVudC5hZGQodGhpcyxcImNsaWNrLl9zdWJtaXQga2V5cHJlc3MuX3N1Ym1pdFwiLGZ1bmN0aW9uKGUpe3ZhciBuPWUudGFyZ2V0LHI9Yi5ub2RlTmFtZShuLFwiaW5wdXRcIil8fGIubm9kZU5hbWUobixcImJ1dHRvblwiKT9uLmZvcm06dDtyJiYhYi5fZGF0YShyLFwic3VibWl0QnViYmxlc1wiKSYmKGIuZXZlbnQuYWRkKHIsXCJzdWJtaXQuX3N1Ym1pdFwiLGZ1bmN0aW9uKGUpe2UuX3N1Ym1pdF9idWJibGU9ITB9KSxiLl9kYXRhKHIsXCJzdWJtaXRCdWJibGVzXCIsITApKX0pLHQpfSxwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oZSl7ZS5fc3VibWl0X2J1YmJsZSYmKGRlbGV0ZSBlLl9zdWJtaXRfYnViYmxlLHRoaXMucGFyZW50Tm9kZSYmIWUuaXNUcmlnZ2VyJiZiLmV2ZW50LnNpbXVsYXRlKFwic3VibWl0XCIsdGhpcy5wYXJlbnROb2RlLGUsITApKX0sdGVhcmRvd246ZnVuY3Rpb24oKXtyZXR1cm4gYi5ub2RlTmFtZSh0aGlzLFwiZm9ybVwiKT8hMTooYi5ldmVudC5yZW1vdmUodGhpcyxcIi5fc3VibWl0XCIpLHQpfX0pLGIuc3VwcG9ydC5jaGFuZ2VCdWJibGVzfHwoYi5ldmVudC5zcGVjaWFsLmNoYW5nZT17c2V0dXA6ZnVuY3Rpb24oKXtyZXR1cm4gWi50ZXN0KHRoaXMubm9kZU5hbWUpPygoXCJjaGVja2JveFwiPT09dGhpcy50eXBlfHxcInJhZGlvXCI9PT10aGlzLnR5cGUpJiYoYi5ldmVudC5hZGQodGhpcyxcInByb3BlcnR5Y2hhbmdlLl9jaGFuZ2VcIixmdW5jdGlvbihlKXtcImNoZWNrZWRcIj09PWUub3JpZ2luYWxFdmVudC5wcm9wZXJ0eU5hbWUmJih0aGlzLl9qdXN0X2NoYW5nZWQ9ITApfSksYi5ldmVudC5hZGQodGhpcyxcImNsaWNrLl9jaGFuZ2VcIixmdW5jdGlvbihlKXt0aGlzLl9qdXN0X2NoYW5nZWQmJiFlLmlzVHJpZ2dlciYmKHRoaXMuX2p1c3RfY2hhbmdlZD0hMSksYi5ldmVudC5zaW11bGF0ZShcImNoYW5nZVwiLHRoaXMsZSwhMCl9KSksITEpOihiLmV2ZW50LmFkZCh0aGlzLFwiYmVmb3JlYWN0aXZhdGUuX2NoYW5nZVwiLGZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0O1oudGVzdCh0Lm5vZGVOYW1lKSYmIWIuX2RhdGEodCxcImNoYW5nZUJ1YmJsZXNcIikmJihiLmV2ZW50LmFkZCh0LFwiY2hhbmdlLl9jaGFuZ2VcIixmdW5jdGlvbihlKXshdGhpcy5wYXJlbnROb2RlfHxlLmlzU2ltdWxhdGVkfHxlLmlzVHJpZ2dlcnx8Yi5ldmVudC5zaW11bGF0ZShcImNoYW5nZVwiLHRoaXMucGFyZW50Tm9kZSxlLCEwKX0pLGIuX2RhdGEodCxcImNoYW5nZUJ1YmJsZXNcIiwhMCkpfSksdCl9LGhhbmRsZTpmdW5jdGlvbihlKXt2YXIgbj1lLnRhcmdldDtyZXR1cm4gdGhpcyE9PW58fGUuaXNTaW11bGF0ZWR8fGUuaXNUcmlnZ2VyfHxcInJhZGlvXCIhPT1uLnR5cGUmJlwiY2hlY2tib3hcIiE9PW4udHlwZT9lLmhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0fSx0ZWFyZG93bjpmdW5jdGlvbigpe3JldHVybiBiLmV2ZW50LnJlbW92ZSh0aGlzLFwiLl9jaGFuZ2VcIiksIVoudGVzdCh0aGlzLm5vZGVOYW1lKX19KSxiLnN1cHBvcnQuZm9jdXNpbkJ1YmJsZXN8fGIuZWFjaCh7Zm9jdXM6XCJmb2N1c2luXCIsYmx1cjpcImZvY3Vzb3V0XCJ9LGZ1bmN0aW9uKGUsdCl7dmFyIG49MCxyPWZ1bmN0aW9uKGUpe2IuZXZlbnQuc2ltdWxhdGUodCxlLnRhcmdldCxiLmV2ZW50LmZpeChlKSwhMCl9O2IuZXZlbnQuc3BlY2lhbFt0XT17c2V0dXA6ZnVuY3Rpb24oKXswPT09bisrJiZvLmFkZEV2ZW50TGlzdGVuZXIoZSxyLCEwKX0sdGVhcmRvd246ZnVuY3Rpb24oKXswPT09LS1uJiZvLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxyLCEwKX19fSksYi5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGUsbixyLGksbyl7dmFyIGEscztpZihcIm9iamVjdFwiPT10eXBlb2YgZSl7XCJzdHJpbmdcIiE9dHlwZW9mIG4mJihyPXJ8fG4sbj10KTtmb3IoYSBpbiBlKXRoaXMub24oYSxuLHIsZVthXSxvKTtyZXR1cm4gdGhpc31pZihudWxsPT1yJiZudWxsPT1pPyhpPW4scj1uPXQpOm51bGw9PWkmJihcInN0cmluZ1wiPT10eXBlb2Ygbj8oaT1yLHI9dCk6KGk9cixyPW4sbj10KSksaT09PSExKWk9b3Q7ZWxzZSBpZighaSlyZXR1cm4gdGhpcztyZXR1cm4gMT09PW8mJihzPWksaT1mdW5jdGlvbihlKXtyZXR1cm4gYigpLm9mZihlKSxzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saS5ndWlkPXMuZ3VpZHx8KHMuZ3VpZD1iLmd1aWQrKykpLHRoaXMuZWFjaChmdW5jdGlvbigpe2IuZXZlbnQuYWRkKHRoaXMsZSxpLHIsbil9KX0sb25lOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLm9uKGUsdCxuLHIsMSl9LG9mZjpmdW5jdGlvbihlLG4scil7dmFyIGksbztpZihlJiZlLnByZXZlbnREZWZhdWx0JiZlLmhhbmRsZU9iailyZXR1cm4gaT1lLmhhbmRsZU9iaixiKGUuZGVsZWdhdGVUYXJnZXQpLm9mZihpLm5hbWVzcGFjZT9pLm9yaWdUeXBlK1wiLlwiK2kubmFtZXNwYWNlOmkub3JpZ1R5cGUsaS5zZWxlY3RvcixpLmhhbmRsZXIpLHRoaXM7aWYoXCJvYmplY3RcIj09dHlwZW9mIGUpe2ZvcihvIGluIGUpdGhpcy5vZmYobyxuLGVbb10pO3JldHVybiB0aGlzfXJldHVybihuPT09ITF8fFwiZnVuY3Rpb25cIj09dHlwZW9mIG4pJiYocj1uLG49dCkscj09PSExJiYocj1vdCksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yi5ldmVudC5yZW1vdmUodGhpcyxlLHIsbil9KX0sYmluZDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMub24oZSxudWxsLHQsbil9LHVuYmluZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm9mZihlLG51bGwsdCl9LGRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLm9uKHQsZSxuLHIpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vZmYoZSxcIioqXCIpOnRoaXMub2ZmKHQsZXx8XCIqKlwiLG4pfSx0cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2IuZXZlbnQudHJpZ2dlcihlLHQsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oZSxuKXt2YXIgcj10aGlzWzBdO3JldHVybiByP2IuZXZlbnQudHJpZ2dlcihlLG4sciwhMCk6dH19KSxmdW5jdGlvbihlLHQpe3ZhciBuLHIsaSxvLGEscyx1LGwsYyxwLGYsZCxoLGcsbSx5LHYseD1cInNpenpsZVwiKy1uZXcgRGF0ZSx3PWUuZG9jdW1lbnQsVD17fSxOPTAsQz0wLGs9aXQoKSxFPWl0KCksUz1pdCgpLEE9dHlwZW9mIHQsaj0xPDwzMSxEPVtdLEw9RC5wb3AsSD1ELnB1c2gscT1ELnNsaWNlLE09RC5pbmRleE9mfHxmdW5jdGlvbihlKXt2YXIgdD0wLG49dGhpcy5sZW5ndGg7Zm9yKDtuPnQ7dCsrKWlmKHRoaXNbdF09PT1lKXJldHVybiB0O3JldHVybi0xfSxfPVwiW1xcXFx4MjBcXFxcdFxcXFxyXFxcXG5cXFxcZl1cIixGPVwiKD86XFxcXFxcXFwufFtcXFxcdy1dfFteXFxcXHgwMC1cXFxceGEwXSkrXCIsTz1GLnJlcGxhY2UoXCJ3XCIsXCJ3I1wiKSxCPVwiKFsqXiR8IX5dPz0pXCIsUD1cIlxcXFxbXCIrXytcIiooXCIrRitcIilcIitfK1wiKig/OlwiK0IrXytcIiooPzooWydcXFwiXSkoKD86XFxcXFxcXFwufFteXFxcXFxcXFxdKSo/KVxcXFwzfChcIitPK1wiKXwpfClcIitfK1wiKlxcXFxdXCIsUj1cIjooXCIrRitcIikoPzpcXFxcKCgoWydcXFwiXSkoKD86XFxcXFxcXFwufFteXFxcXFxcXFxdKSo/KVxcXFwzfCgoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpW1xcXFxdXXxcIitQLnJlcGxhY2UoMyw4KStcIikqKXwuKilcXFxcKXwpXCIsVz1SZWdFeHAoXCJeXCIrXytcIit8KCg/Ol58W15cXFxcXFxcXF0pKD86XFxcXFxcXFwuKSopXCIrXytcIiskXCIsXCJnXCIpLCQ9UmVnRXhwKFwiXlwiK18rXCIqLFwiK18rXCIqXCIpLEk9UmVnRXhwKFwiXlwiK18rXCIqKFtcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGY+K35dKVwiK18rXCIqXCIpLHo9UmVnRXhwKFIpLFg9UmVnRXhwKFwiXlwiK08rXCIkXCIpLFU9e0lEOlJlZ0V4cChcIl4jKFwiK0YrXCIpXCIpLENMQVNTOlJlZ0V4cChcIl5cXFxcLihcIitGK1wiKVwiKSxOQU1FOlJlZ0V4cChcIl5cXFxcW25hbWU9WydcXFwiXT8oXCIrRitcIilbJ1xcXCJdP1xcXFxdXCIpLFRBRzpSZWdFeHAoXCJeKFwiK0YucmVwbGFjZShcIndcIixcIncqXCIpK1wiKVwiKSxBVFRSOlJlZ0V4cChcIl5cIitQKSxQU0VVRE86UmVnRXhwKFwiXlwiK1IpLENISUxEOlJlZ0V4cChcIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcXFwoXCIrXytcIiooZXZlbnxvZGR8KChbKy1dfCkoXFxcXGQqKW58KVwiK18rXCIqKD86KFsrLV18KVwiK18rXCIqKFxcXFxkKyl8KSlcIitfK1wiKlxcXFwpfClcIixcImlcIiksbmVlZHNDb250ZXh0OlJlZ0V4cChcIl5cIitfK1wiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFxcXChcIitfK1wiKigoPzotXFxcXGQpP1xcXFxkKilcIitfK1wiKlxcXFwpfCkoPz1bXi1dfCQpXCIsXCJpXCIpfSxWPS9bXFx4MjBcXHRcXHJcXG5cXGZdKlsrfl0vLFk9L15bXntdK1xce1xccypcXFtuYXRpdmUgY29kZS8sSj0vXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxHPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksUT0vXmhcXGQkL2ksSz0vJ3xcXFxcL2csWj0vXFw9W1xceDIwXFx0XFxyXFxuXFxmXSooW14nXCJcXF1dKilbXFx4MjBcXHRcXHJcXG5cXGZdKlxcXS9nLGV0PS9cXFxcKFtcXGRhLWZBLUZdezEsNn1bXFx4MjBcXHRcXHJcXG5cXGZdP3wuKS9nLHR0PWZ1bmN0aW9uKGUsdCl7dmFyIG49XCIweFwiK3QtNjU1MzY7cmV0dXJuIG4hPT1uP3Q6MD5uP1N0cmluZy5mcm9tQ2hhckNvZGUobis2NTUzNik6U3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NnxuPj4xMCw1NjMyMHwxMDIzJm4pfTt0cnl7cS5jYWxsKHcuZG9jdW1lbnRFbGVtZW50LmNoaWxkTm9kZXMsMClbMF0ubm9kZVR5cGV9Y2F0Y2gobnQpe3E9ZnVuY3Rpb24oZSl7dmFyIHQsbj1bXTt3aGlsZSh0PXRoaXNbZSsrXSluLnB1c2godCk7cmV0dXJuIG59fWZ1bmN0aW9uIHJ0KGUpe3JldHVybiBZLnRlc3QoZStcIlwiKX1mdW5jdGlvbiBpdCgpe3ZhciBlLHQ9W107cmV0dXJuIGU9ZnVuY3Rpb24obixyKXtyZXR1cm4gdC5wdXNoKG4rPVwiIFwiKT5pLmNhY2hlTGVuZ3RoJiZkZWxldGUgZVt0LnNoaWZ0KCldLGVbbl09cn19ZnVuY3Rpb24gb3QoZSl7cmV0dXJuIGVbeF09ITAsZX1mdW5jdGlvbiBhdChlKXt2YXIgdD1wLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dHJ5e3JldHVybiBlKHQpfWNhdGNoKG4pe3JldHVybiExfWZpbmFsbHl7dD1udWxsfX1mdW5jdGlvbiBzdChlLHQsbixyKXt2YXIgaSxvLGEscyx1LGwsZixnLG0sdjtpZigodD90Lm93bmVyRG9jdW1lbnR8fHQ6dykhPT1wJiZjKHQpLHQ9dHx8cCxuPW58fFtdLCFlfHxcInN0cmluZ1wiIT10eXBlb2YgZSlyZXR1cm4gbjtpZigxIT09KHM9dC5ub2RlVHlwZSkmJjkhPT1zKXJldHVybltdO2lmKCFkJiYhcil7aWYoaT1KLmV4ZWMoZSkpaWYoYT1pWzFdKXtpZig5PT09cyl7aWYobz10LmdldEVsZW1lbnRCeUlkKGEpLCFvfHwhby5wYXJlbnROb2RlKXJldHVybiBuO2lmKG8uaWQ9PT1hKXJldHVybiBuLnB1c2gobyksbn1lbHNlIGlmKHQub3duZXJEb2N1bWVudCYmKG89dC5vd25lckRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpKSYmeSh0LG8pJiZvLmlkPT09YSlyZXR1cm4gbi5wdXNoKG8pLG59ZWxzZXtpZihpWzJdKXJldHVybiBILmFwcGx5KG4scS5jYWxsKHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSksMCkpLG47aWYoKGE9aVszXSkmJlQuZ2V0QnlDbGFzc05hbWUmJnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gSC5hcHBseShuLHEuY2FsbCh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYSksMCkpLG59aWYoVC5xc2EmJiFoLnRlc3QoZSkpe2lmKGY9ITAsZz14LG09dCx2PTk9PT1zJiZlLDE9PT1zJiZcIm9iamVjdFwiIT09dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXtsPWZ0KGUpLChmPXQuZ2V0QXR0cmlidXRlKFwiaWRcIikpP2c9Zi5yZXBsYWNlKEssXCJcXFxcJCZcIik6dC5zZXRBdHRyaWJ1dGUoXCJpZFwiLGcpLGc9XCJbaWQ9J1wiK2crXCInXSBcIix1PWwubGVuZ3RoO3doaWxlKHUtLSlsW3VdPWcrZHQobFt1XSk7bT1WLnRlc3QoZSkmJnQucGFyZW50Tm9kZXx8dCx2PWwuam9pbihcIixcIil9aWYodil0cnl7cmV0dXJuIEguYXBwbHkobixxLmNhbGwobS5xdWVyeVNlbGVjdG9yQWxsKHYpLDApKSxufWNhdGNoKGIpe31maW5hbGx5e2Z8fHQucmVtb3ZlQXR0cmlidXRlKFwiaWRcIil9fX1yZXR1cm4gd3QoZS5yZXBsYWNlKFcsXCIkMVwiKSx0LG4scil9YT1zdC5pc1hNTD1mdW5jdGlvbihlKXt2YXIgdD1lJiYoZS5vd25lckRvY3VtZW50fHxlKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIHQ/XCJIVE1MXCIhPT10Lm5vZGVOYW1lOiExfSxjPXN0LnNldERvY3VtZW50PWZ1bmN0aW9uKGUpe3ZhciBuPWU/ZS5vd25lckRvY3VtZW50fHxlOnc7cmV0dXJuIG4hPT1wJiY5PT09bi5ub2RlVHlwZSYmbi5kb2N1bWVudEVsZW1lbnQ/KHA9bixmPW4uZG9jdW1lbnRFbGVtZW50LGQ9YShuKSxULnRhZ05hbWVOb0NvbW1lbnRzPWF0KGZ1bmN0aW9uKGUpe3JldHVybiBlLmFwcGVuZENoaWxkKG4uY3JlYXRlQ29tbWVudChcIlwiKSksIWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLmxlbmd0aH0pLFQuYXR0cmlidXRlcz1hdChmdW5jdGlvbihlKXtlLmlubmVySFRNTD1cIjxzZWxlY3Q+PC9zZWxlY3Q+XCI7dmFyIHQ9dHlwZW9mIGUubGFzdENoaWxkLmdldEF0dHJpYnV0ZShcIm11bHRpcGxlXCIpO3JldHVyblwiYm9vbGVhblwiIT09dCYmXCJzdHJpbmdcIiE9PXR9KSxULmdldEJ5Q2xhc3NOYW1lPWF0KGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD1cIjxkaXYgY2xhc3M9J2hpZGRlbiBlJz48L2Rpdj48ZGl2IGNsYXNzPSdoaWRkZW4nPjwvZGl2PlwiLGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZVwiKS5sZW5ndGg/KGUubGFzdENoaWxkLmNsYXNzTmFtZT1cImVcIiwyPT09ZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZVwiKS5sZW5ndGgpOiExfSksVC5nZXRCeU5hbWU9YXQoZnVuY3Rpb24oZSl7ZS5pZD14KzAsZS5pbm5lckhUTUw9XCI8YSBuYW1lPSdcIit4K1wiJz48L2E+PGRpdiBuYW1lPSdcIit4K1wiJz48L2Rpdj5cIixmLmluc2VydEJlZm9yZShlLGYuZmlyc3RDaGlsZCk7dmFyIHQ9bi5nZXRFbGVtZW50c0J5TmFtZSYmbi5nZXRFbGVtZW50c0J5TmFtZSh4KS5sZW5ndGg9PT0yK24uZ2V0RWxlbWVudHNCeU5hbWUoeCswKS5sZW5ndGg7cmV0dXJuIFQuZ2V0SWROb3ROYW1lPSFuLmdldEVsZW1lbnRCeUlkKHgpLGYucmVtb3ZlQ2hpbGQoZSksdH0pLGkuYXR0ckhhbmRsZT1hdChmdW5jdGlvbihlKXtyZXR1cm4gZS5pbm5lckhUTUw9XCI8YSBocmVmPScjJz48L2E+XCIsZS5maXJzdENoaWxkJiZ0eXBlb2YgZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSE9PUEmJlwiI1wiPT09ZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcImhyZWZcIil9KT97fTp7aHJlZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIsMil9LHR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKFwidHlwZVwiKX19LFQuZ2V0SWROb3ROYW1lPyhpLmZpbmQuSUQ9ZnVuY3Rpb24oZSx0KXtpZih0eXBlb2YgdC5nZXRFbGVtZW50QnlJZCE9PUEmJiFkKXt2YXIgbj10LmdldEVsZW1lbnRCeUlkKGUpO3JldHVybiBuJiZuLnBhcmVudE5vZGU/W25dOltdfX0saS5maWx0ZXIuSUQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKGV0LHR0KTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKFwiaWRcIik9PT10fX0pOihpLmZpbmQuSUQ9ZnVuY3Rpb24oZSxuKXtpZih0eXBlb2Ygbi5nZXRFbGVtZW50QnlJZCE9PUEmJiFkKXt2YXIgcj1uLmdldEVsZW1lbnRCeUlkKGUpO3JldHVybiByP3IuaWQ9PT1lfHx0eXBlb2Ygci5nZXRBdHRyaWJ1dGVOb2RlIT09QSYmci5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIikudmFsdWU9PT1lP1tyXTp0OltdfX0saS5maWx0ZXIuSUQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKGV0LHR0KTtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49dHlwZW9mIGUuZ2V0QXR0cmlidXRlTm9kZSE9PUEmJmUuZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpO3JldHVybiBuJiZuLnZhbHVlPT09dH19KSxpLmZpbmQuVEFHPVQudGFnTmFtZU5vQ29tbWVudHM/ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdHlwZW9mIG4uZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1BP24uZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk6dH06ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9MCxvPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk7aWYoXCIqXCI9PT1lKXt3aGlsZShuPW9baSsrXSkxPT09bi5ub2RlVHlwZSYmci5wdXNoKG4pO3JldHVybiByfXJldHVybiBvfSxpLmZpbmQuTkFNRT1ULmdldEJ5TmFtZSYmZnVuY3Rpb24oZSxuKXtyZXR1cm4gdHlwZW9mIG4uZ2V0RWxlbWVudHNCeU5hbWUhPT1BP24uZ2V0RWxlbWVudHNCeU5hbWUobmFtZSk6dH0saS5maW5kLkNMQVNTPVQuZ2V0QnlDbGFzc05hbWUmJmZ1bmN0aW9uKGUsbil7cmV0dXJuIHR5cGVvZiBuLmdldEVsZW1lbnRzQnlDbGFzc05hbWU9PT1BfHxkP3Q6bi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGUpfSxnPVtdLGg9W1wiOmZvY3VzXCJdLChULnFzYT1ydChuLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGF0KGZ1bmN0aW9uKGUpe2UuaW5uZXJIVE1MPVwiPHNlbGVjdD48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PlwiLGUucXVlcnlTZWxlY3RvckFsbChcIltzZWxlY3RlZF1cIikubGVuZ3RofHxoLnB1c2goXCJcXFxcW1wiK18rXCIqKD86Y2hlY2tlZHxkaXNhYmxlZHxpc21hcHxtdWx0aXBsZXxyZWFkb25seXxzZWxlY3RlZHx2YWx1ZSlcIiksZS5xdWVyeVNlbGVjdG9yQWxsKFwiOmNoZWNrZWRcIikubGVuZ3RofHxoLnB1c2goXCI6Y2hlY2tlZFwiKX0pLGF0KGZ1bmN0aW9uKGUpe2UuaW5uZXJIVE1MPVwiPGlucHV0IHR5cGU9J2hpZGRlbicgaT0nJy8+XCIsZS5xdWVyeVNlbGVjdG9yQWxsKFwiW2lePScnXVwiKS5sZW5ndGgmJmgucHVzaChcIlsqXiRdPVwiK18rXCIqKD86XFxcIlxcXCJ8JycpXCIpLGUucXVlcnlTZWxlY3RvckFsbChcIjplbmFibGVkXCIpLmxlbmd0aHx8aC5wdXNoKFwiOmVuYWJsZWRcIixcIjpkaXNhYmxlZFwiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqLDp4XCIpLGgucHVzaChcIiwuKjpcIil9KSksKFQubWF0Y2hlc1NlbGVjdG9yPXJ0KG09Zi5tYXRjaGVzU2VsZWN0b3J8fGYubW96TWF0Y2hlc1NlbGVjdG9yfHxmLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8Zi5vTWF0Y2hlc1NlbGVjdG9yfHxmLm1zTWF0Y2hlc1NlbGVjdG9yKSkmJmF0KGZ1bmN0aW9uKGUpe1QuZGlzY29ubmVjdGVkTWF0Y2g9bS5jYWxsKGUsXCJkaXZcIiksbS5jYWxsKGUsXCJbcyE9JyddOnhcIiksZy5wdXNoKFwiIT1cIixSKX0pLGg9UmVnRXhwKGguam9pbihcInxcIikpLGc9UmVnRXhwKGcuam9pbihcInxcIikpLHk9cnQoZi5jb250YWlucyl8fGYuY29tcGFyZURvY3VtZW50UG9zaXRpb24/ZnVuY3Rpb24oZSx0KXt2YXIgbj05PT09ZS5ub2RlVHlwZT9lLmRvY3VtZW50RWxlbWVudDplLHI9dCYmdC5wYXJlbnROb2RlO3JldHVybiBlPT09cnx8ISghcnx8MSE9PXIubm9kZVR5cGV8fCEobi5jb250YWlucz9uLmNvbnRhaW5zKHIpOmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24ocikpKX06ZnVuY3Rpb24oZSx0KXtpZih0KXdoaWxlKHQ9dC5wYXJlbnROb2RlKWlmKHQ9PT1lKXJldHVybiEwO3JldHVybiExfSx2PWYuY29tcGFyZURvY3VtZW50UG9zaXRpb24/ZnVuY3Rpb24oZSx0KXt2YXIgcjtyZXR1cm4gZT09PXQ/KHU9ITAsMCk6KHI9dC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0KSk/MSZyfHxlLnBhcmVudE5vZGUmJjExPT09ZS5wYXJlbnROb2RlLm5vZGVUeXBlP2U9PT1ufHx5KHcsZSk/LTE6dD09PW58fHkodyx0KT8xOjA6NCZyPy0xOjE6ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj8tMToxfTpmdW5jdGlvbihlLHQpe3ZhciByLGk9MCxvPWUucGFyZW50Tm9kZSxhPXQucGFyZW50Tm9kZSxzPVtlXSxsPVt0XTtpZihlPT09dClyZXR1cm4gdT0hMCwwO2lmKCFvfHwhYSlyZXR1cm4gZT09PW4/LTE6dD09PW4/MTpvPy0xOmE/MTowO2lmKG89PT1hKXJldHVybiB1dChlLHQpO3I9ZTt3aGlsZShyPXIucGFyZW50Tm9kZSlzLnVuc2hpZnQocik7cj10O3doaWxlKHI9ci5wYXJlbnROb2RlKWwudW5zaGlmdChyKTt3aGlsZShzW2ldPT09bFtpXSlpKys7cmV0dXJuIGk/dXQoc1tpXSxsW2ldKTpzW2ldPT09dz8tMTpsW2ldPT09dz8xOjB9LHU9ITEsWzAsMF0uc29ydCh2KSxULmRldGVjdER1cGxpY2F0ZXM9dSxwKTpwfSxzdC5tYXRjaGVzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHN0KGUsbnVsbCxudWxsLHQpfSxzdC5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oZSx0KXtpZigoZS5vd25lckRvY3VtZW50fHxlKSE9PXAmJmMoZSksdD10LnJlcGxhY2UoWixcIj0nJDEnXVwiKSwhKCFULm1hdGNoZXNTZWxlY3Rvcnx8ZHx8ZyYmZy50ZXN0KHQpfHxoLnRlc3QodCkpKXRyeXt2YXIgbj1tLmNhbGwoZSx0KTtpZihufHxULmRpc2Nvbm5lY3RlZE1hdGNofHxlLmRvY3VtZW50JiYxMSE9PWUuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIG59Y2F0Y2gocil7fXJldHVybiBzdCh0LHAsbnVsbCxbZV0pLmxlbmd0aD4wfSxzdC5jb250YWlucz1mdW5jdGlvbihlLHQpe3JldHVybihlLm93bmVyRG9jdW1lbnR8fGUpIT09cCYmYyhlKSx5KGUsdCl9LHN0LmF0dHI9ZnVuY3Rpb24oZSx0KXt2YXIgbjtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxlKSE9PXAmJmMoZSksZHx8KHQ9dC50b0xvd2VyQ2FzZSgpKSwobj1pLmF0dHJIYW5kbGVbdF0pP24oZSk6ZHx8VC5hdHRyaWJ1dGVzP2UuZ2V0QXR0cmlidXRlKHQpOigobj1lLmdldEF0dHJpYnV0ZU5vZGUodCkpfHxlLmdldEF0dHJpYnV0ZSh0KSkmJmVbdF09PT0hMD90Om4mJm4uc3BlY2lmaWVkP24udmFsdWU6bnVsbH0sc3QuZXJyb3I9ZnVuY3Rpb24oZSl7dGhyb3cgRXJyb3IoXCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiBcIitlKX0sc3QudW5pcXVlU29ydD1mdW5jdGlvbihlKXt2YXIgdCxuPVtdLHI9MSxpPTA7aWYodT0hVC5kZXRlY3REdXBsaWNhdGVzLGUuc29ydCh2KSx1KXtmb3IoO3Q9ZVtyXTtyKyspdD09PWVbci0xXSYmKGk9bi5wdXNoKHIpKTt3aGlsZShpLS0pZS5zcGxpY2UobltpXSwxKX1yZXR1cm4gZX07ZnVuY3Rpb24gdXQoZSx0KXt2YXIgbj10JiZlLHI9biYmKH50LnNvdXJjZUluZGV4fHxqKS0ofmUuc291cmNlSW5kZXh8fGopO2lmKHIpcmV0dXJuIHI7aWYobil3aGlsZShuPW4ubmV4dFNpYmxpbmcpaWYobj09PXQpcmV0dXJuLTE7cmV0dXJuIGU/MTotMX1mdW5jdGlvbiBsdChlKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PW4mJnQudHlwZT09PWV9fWZ1bmN0aW9uIGN0KGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKFwiaW5wdXRcIj09PW58fFwiYnV0dG9uXCI9PT1uKSYmdC50eXBlPT09ZX19ZnVuY3Rpb24gcHQoZSl7cmV0dXJuIG90KGZ1bmN0aW9uKHQpe3JldHVybiB0PSt0LG90KGZ1bmN0aW9uKG4scil7dmFyIGksbz1lKFtdLG4ubGVuZ3RoLHQpLGE9by5sZW5ndGg7d2hpbGUoYS0tKW5baT1vW2FdXSYmKG5baV09IShyW2ldPW5baV0pKX0pfSl9bz1zdC5nZXRUZXh0PWZ1bmN0aW9uKGUpe3ZhciB0LG49XCJcIixyPTAsaT1lLm5vZGVUeXBlO2lmKGkpe2lmKDE9PT1pfHw5PT09aXx8MTE9PT1pKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZS50ZXh0Q29udGVudClyZXR1cm4gZS50ZXh0Q29udGVudDtmb3IoZT1lLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpbis9byhlKX1lbHNlIGlmKDM9PT1pfHw0PT09aSlyZXR1cm4gZS5ub2RlVmFsdWV9ZWxzZSBmb3IoO3Q9ZVtyXTtyKyspbis9byh0KTtyZXR1cm4gbn0saT1zdC5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpvdCxtYXRjaDpVLGZpbmQ6e30scmVsYXRpdmU6e1wiPlwiOntkaXI6XCJwYXJlbnROb2RlXCIsZmlyc3Q6ITB9LFwiIFwiOntkaXI6XCJwYXJlbnROb2RlXCJ9LFwiK1wiOntkaXI6XCJwcmV2aW91c1NpYmxpbmdcIixmaXJzdDohMH0sXCJ+XCI6e2RpcjpcInByZXZpb3VzU2libGluZ1wifX0scHJlRmlsdGVyOntBVFRSOmZ1bmN0aW9uKGUpe3JldHVybiBlWzFdPWVbMV0ucmVwbGFjZShldCx0dCksZVszXT0oZVs0XXx8ZVs1XXx8XCJcIikucmVwbGFjZShldCx0dCksXCJ+PVwiPT09ZVsyXSYmKGVbM109XCIgXCIrZVszXStcIiBcIiksZS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnRvTG93ZXJDYXNlKCksXCJudGhcIj09PWVbMV0uc2xpY2UoMCwzKT8oZVszXXx8c3QuZXJyb3IoZVswXSksZVs0XT0rKGVbNF0/ZVs1XSsoZVs2XXx8MSk6MiooXCJldmVuXCI9PT1lWzNdfHxcIm9kZFwiPT09ZVszXSkpLGVbNV09KyhlWzddK2VbOF18fFwib2RkXCI9PT1lWzNdKSk6ZVszXSYmc3QuZXJyb3IoZVswXSksZX0sUFNFVURPOmZ1bmN0aW9uKGUpe3ZhciB0LG49IWVbNV0mJmVbMl07cmV0dXJuIFUuQ0hJTEQudGVzdChlWzBdKT9udWxsOihlWzRdP2VbMl09ZVs0XTpuJiZ6LnRlc3QobikmJih0PWZ0KG4sITApKSYmKHQ9bi5pbmRleE9mKFwiKVwiLG4ubGVuZ3RoLXQpLW4ubGVuZ3RoKSYmKGVbMF09ZVswXS5zbGljZSgwLHQpLGVbMl09bi5zbGljZSgwLHQpKSxlLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oZSl7cmV0dXJuXCIqXCI9PT1lP2Z1bmN0aW9uKCl7cmV0dXJuITB9OihlPWUucmVwbGFjZShldCx0dCkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbih0KXtyZXR1cm4gdC5ub2RlTmFtZSYmdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09ZX0pfSxDTEFTUzpmdW5jdGlvbihlKXt2YXIgdD1rW2UrXCIgXCJdO3JldHVybiB0fHwodD1SZWdFeHAoXCIoXnxcIitfK1wiKVwiK2UrXCIoXCIrXytcInwkKVwiKSkmJmsoZSxmdW5jdGlvbihlKXtyZXR1cm4gdC50ZXN0KGUuY2xhc3NOYW1lfHx0eXBlb2YgZS5nZXRBdHRyaWJ1dGUhPT1BJiZlLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKX0pfSxBVFRSOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIGk9c3QuYXR0cihyLGUpO3JldHVybiBudWxsPT1pP1wiIT1cIj09PXQ6dD8oaSs9XCJcIixcIj1cIj09PXQ/aT09PW46XCIhPVwiPT09dD9pIT09bjpcIl49XCI9PT10P24mJjA9PT1pLmluZGV4T2Yobik6XCIqPVwiPT09dD9uJiZpLmluZGV4T2Yobik+LTE6XCIkPVwiPT09dD9uJiZpLnNsaWNlKC1uLmxlbmd0aCk9PT1uOlwifj1cIj09PXQ/KFwiIFwiK2krXCIgXCIpLmluZGV4T2Yobik+LTE6XCJ8PVwiPT09dD9pPT09bnx8aS5zbGljZSgwLG4ubGVuZ3RoKzEpPT09bitcIi1cIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvPVwibnRoXCIhPT1lLnNsaWNlKDAsMyksYT1cImxhc3RcIiE9PWUuc2xpY2UoLTQpLHM9XCJvZi10eXBlXCI9PT10O3JldHVybiAxPT09ciYmMD09PWk/ZnVuY3Rpb24oZSl7cmV0dXJuISFlLnBhcmVudE5vZGV9OmZ1bmN0aW9uKHQsbix1KXt2YXIgbCxjLHAsZixkLGgsZz1vIT09YT9cIm5leHRTaWJsaW5nXCI6XCJwcmV2aW91c1NpYmxpbmdcIixtPXQucGFyZW50Tm9kZSx5PXMmJnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSx2PSF1JiYhcztpZihtKXtpZihvKXt3aGlsZShnKXtwPXQ7d2hpbGUocD1wW2ddKWlmKHM/cC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09eToxPT09cC5ub2RlVHlwZSlyZXR1cm4hMTtoPWc9XCJvbmx5XCI9PT1lJiYhaCYmXCJuZXh0U2libGluZ1wifXJldHVybiEwfWlmKGg9W2E/bS5maXJzdENoaWxkOm0ubGFzdENoaWxkXSxhJiZ2KXtjPW1beF18fChtW3hdPXt9KSxsPWNbZV18fFtdLGQ9bFswXT09PU4mJmxbMV0sZj1sWzBdPT09TiYmbFsyXSxwPWQmJm0uY2hpbGROb2Rlc1tkXTt3aGlsZShwPSsrZCYmcCYmcFtnXXx8KGY9ZD0wKXx8aC5wb3AoKSlpZigxPT09cC5ub2RlVHlwZSYmKytmJiZwPT09dCl7Y1tlXT1bTixkLGZdO2JyZWFrfX1lbHNlIGlmKHYmJihsPSh0W3hdfHwodFt4XT17fSkpW2VdKSYmbFswXT09PU4pZj1sWzFdO2Vsc2Ugd2hpbGUocD0rK2QmJnAmJnBbZ118fChmPWQ9MCl8fGgucG9wKCkpaWYoKHM/cC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09eToxPT09cC5ub2RlVHlwZSkmJisrZiYmKHYmJigocFt4XXx8KHBbeF09e30pKVtlXT1bTixmXSkscD09PXQpKWJyZWFrO3JldHVybiBmLT1pLGY9PT1yfHwwPT09ZiVyJiZmL3I+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1pLnBzZXVkb3NbZV18fGkuc2V0RmlsdGVyc1tlLnRvTG93ZXJDYXNlKCldfHxzdC5lcnJvcihcInVuc3VwcG9ydGVkIHBzZXVkbzogXCIrZSk7cmV0dXJuIHJbeF0/cih0KTpyLmxlbmd0aD4xPyhuPVtlLGUsXCJcIix0XSxpLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoZS50b0xvd2VyQ2FzZSgpKT9vdChmdW5jdGlvbihlLG4pe3ZhciBpLG89cihlLHQpLGE9by5sZW5ndGg7d2hpbGUoYS0tKWk9TS5jYWxsKGUsb1thXSksZVtpXT0hKG5baV09b1thXSl9KTpmdW5jdGlvbihlKXtyZXR1cm4gcihlLDAsbil9KTpyfX0scHNldWRvczp7bm90Om90KGZ1bmN0aW9uKGUpe3ZhciB0PVtdLG49W10scj1zKGUucmVwbGFjZShXLFwiJDFcIikpO3JldHVybiByW3hdP290KGZ1bmN0aW9uKGUsdCxuLGkpe3ZhciBvLGE9cihlLG51bGwsaSxbXSkscz1lLmxlbmd0aDt3aGlsZShzLS0pKG89YVtzXSkmJihlW3NdPSEodFtzXT1vKSl9KTpmdW5jdGlvbihlLGksbyl7cmV0dXJuIHRbMF09ZSxyKHQsbnVsbCxvLG4pLCFuLnBvcCgpfX0pLGhhczpvdChmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIHN0KGUsdCkubGVuZ3RoPjB9fSksY29udGFpbnM6b3QoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybih0LnRleHRDb250ZW50fHx0LmlubmVyVGV4dHx8byh0KSkuaW5kZXhPZihlKT4tMX19KSxsYW5nOm90KGZ1bmN0aW9uKGUpe3JldHVybiBYLnRlc3QoZXx8XCJcIil8fHN0LmVycm9yKFwidW5zdXBwb3J0ZWQgbGFuZzogXCIrZSksZT1lLnJlcGxhY2UoZXQsdHQpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24odCl7dmFyIG47ZG8gaWYobj1kP3QuZ2V0QXR0cmlidXRlKFwieG1sOmxhbmdcIil8fHQuZ2V0QXR0cmlidXRlKFwibGFuZ1wiKTp0LmxhbmcpcmV0dXJuIG49bi50b0xvd2VyQ2FzZSgpLG49PT1lfHwwPT09bi5pbmRleE9mKGUrXCItXCIpO3doaWxlKCh0PXQucGFyZW50Tm9kZSkmJjE9PT10Lm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24odCl7dmFyIG49ZS5sb2NhdGlvbiYmZS5sb2NhdGlvbi5oYXNoO3JldHVybiBuJiZuLnNsaWNlKDEpPT09dC5pZH0scm9vdDpmdW5jdGlvbihlKXtyZXR1cm4gZT09PWZ9LGZvY3VzOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09cC5hY3RpdmVFbGVtZW50JiYoIXAuaGFzRm9jdXN8fHAuaGFzRm9jdXMoKSkmJiEhKGUudHlwZXx8ZS5ocmVmfHx+ZS50YWJJbmRleCl9LGVuYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWQ9PT0hMX0sZGlzYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWQ9PT0hMH0sY2hlY2tlZDpmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09dCYmISFlLmNoZWNrZWR8fFwib3B0aW9uXCI9PT10JiYhIWUuc2VsZWN0ZWR9LHNlbGVjdGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLnBhcmVudE5vZGUmJmUucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LGUuc2VsZWN0ZWQ9PT0hMH0sZW1wdHk6ZnVuY3Rpb24oZSl7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWlmKGUubm9kZU5hbWU+XCJAXCJ8fDM9PT1lLm5vZGVUeXBlfHw0PT09ZS5ub2RlVHlwZSlyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGUpe3JldHVybiFpLnBzZXVkb3MuZW1wdHkoZSl9LGhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gUS50ZXN0KGUubm9kZU5hbWUpfSxpbnB1dDpmdW5jdGlvbihlKXtyZXR1cm4gRy50ZXN0KGUubm9kZU5hbWUpfSxidXR0b246ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PXQmJlwiYnV0dG9uXCI9PT1lLnR5cGV8fFwiYnV0dG9uXCI9PT10fSx0ZXh0OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVyblwiaW5wdXRcIj09PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmXCJ0ZXh0XCI9PT1lLnR5cGUmJihudWxsPT0odD1lLmdldEF0dHJpYnV0ZShcInR5cGVcIikpfHx0LnRvTG93ZXJDYXNlKCk9PT1lLnR5cGUpfSxmaXJzdDpwdChmdW5jdGlvbigpe3JldHVyblswXX0pLGxhc3Q6cHQoZnVuY3Rpb24oZSx0KXtyZXR1cm5bdC0xXX0pLGVxOnB0KGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm5bMD5uP24rdDpuXX0pLGV2ZW46cHQoZnVuY3Rpb24oZSx0KXt2YXIgbj0wO2Zvcig7dD5uO24rPTIpZS5wdXNoKG4pO3JldHVybiBlfSksb2RkOnB0KGZ1bmN0aW9uKGUsdCl7dmFyIG49MTtmb3IoO3Q+bjtuKz0yKWUucHVzaChuKTtyZXR1cm4gZX0pLGx0OnB0KGZ1bmN0aW9uKGUsdCxuKXt2YXIgcj0wPm4/bit0Om47Zm9yKDstLXI+PTA7KWUucHVzaChyKTtyZXR1cm4gZX0pLGd0OnB0KGZ1bmN0aW9uKGUsdCxuKXt2YXIgcj0wPm4/bit0Om47Zm9yKDt0PisrcjspZS5wdXNoKHIpO3JldHVybiBlfSl9fTtmb3IobiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlpLnBzZXVkb3Nbbl09bHQobik7Zm9yKG4gaW57c3VibWl0OiEwLHJlc2V0OiEwfSlpLnBzZXVkb3Nbbl09Y3Qobik7ZnVuY3Rpb24gZnQoZSx0KXt2YXIgbixyLG8sYSxzLHUsbCxjPUVbZStcIiBcIl07aWYoYylyZXR1cm4gdD8wOmMuc2xpY2UoMCk7cz1lLHU9W10sbD1pLnByZUZpbHRlcjt3aGlsZShzKXsoIW58fChyPSQuZXhlYyhzKSkpJiYociYmKHM9cy5zbGljZShyWzBdLmxlbmd0aCl8fHMpLHUucHVzaChvPVtdKSksbj0hMSwocj1JLmV4ZWMocykpJiYobj1yLnNoaWZ0KCksby5wdXNoKHt2YWx1ZTpuLHR5cGU6clswXS5yZXBsYWNlKFcsXCIgXCIpfSkscz1zLnNsaWNlKG4ubGVuZ3RoKSk7Zm9yKGEgaW4gaS5maWx0ZXIpIShyPVVbYV0uZXhlYyhzKSl8fGxbYV0mJiEocj1sW2FdKHIpKXx8KG49ci5zaGlmdCgpLG8ucHVzaCh7dmFsdWU6bix0eXBlOmEsbWF0Y2hlczpyfSkscz1zLnNsaWNlKG4ubGVuZ3RoKSk7aWYoIW4pYnJlYWt9cmV0dXJuIHQ/cy5sZW5ndGg6cz9zdC5lcnJvcihlKTpFKGUsdSkuc2xpY2UoMCl9ZnVuY3Rpb24gZHQoZSl7dmFyIHQ9MCxuPWUubGVuZ3RoLHI9XCJcIjtmb3IoO24+dDt0Kyspcis9ZVt0XS52YWx1ZTtyZXR1cm4gcn1mdW5jdGlvbiBodChlLHQsbil7dmFyIGk9dC5kaXIsbz1uJiZcInBhcmVudE5vZGVcIj09PWksYT1DKys7cmV0dXJuIHQuZmlyc3Q/ZnVuY3Rpb24odCxuLHIpe3doaWxlKHQ9dFtpXSlpZigxPT09dC5ub2RlVHlwZXx8bylyZXR1cm4gZSh0LG4scil9OmZ1bmN0aW9uKHQsbixzKXt2YXIgdSxsLGMscD1OK1wiIFwiK2E7aWYocyl7d2hpbGUodD10W2ldKWlmKCgxPT09dC5ub2RlVHlwZXx8bykmJmUodCxuLHMpKXJldHVybiEwfWVsc2Ugd2hpbGUodD10W2ldKWlmKDE9PT10Lm5vZGVUeXBlfHxvKWlmKGM9dFt4XXx8KHRbeF09e30pLChsPWNbaV0pJiZsWzBdPT09cCl7aWYoKHU9bFsxXSk9PT0hMHx8dT09PXIpcmV0dXJuIHU9PT0hMH1lbHNlIGlmKGw9Y1tpXT1bcF0sbFsxXT1lKHQsbixzKXx8cixsWzFdPT09ITApcmV0dXJuITB9fWZ1bmN0aW9uIGd0KGUpe3JldHVybiBlLmxlbmd0aD4xP2Z1bmN0aW9uKHQsbixyKXt2YXIgaT1lLmxlbmd0aDt3aGlsZShpLS0paWYoIWVbaV0odCxuLHIpKXJldHVybiExO3JldHVybiEwfTplWzBdfWZ1bmN0aW9uIG10KGUsdCxuLHIsaSl7dmFyIG8sYT1bXSxzPTAsdT1lLmxlbmd0aCxsPW51bGwhPXQ7Zm9yKDt1PnM7cysrKShvPWVbc10pJiYoIW58fG4obyxyLGkpKSYmKGEucHVzaChvKSxsJiZ0LnB1c2gocykpO3JldHVybiBhfWZ1bmN0aW9uIHl0KGUsdCxuLHIsaSxvKXtyZXR1cm4gciYmIXJbeF0mJihyPXl0KHIpKSxpJiYhaVt4XSYmKGk9eXQoaSxvKSksb3QoZnVuY3Rpb24obyxhLHMsdSl7dmFyIGwsYyxwLGY9W10sZD1bXSxoPWEubGVuZ3RoLGc9b3x8eHQodHx8XCIqXCIscy5ub2RlVHlwZT9bc106cyxbXSksbT0hZXx8IW8mJnQ/ZzptdChnLGYsZSxzLHUpLHk9bj9pfHwobz9lOmh8fHIpP1tdOmE6bTtpZihuJiZuKG0seSxzLHUpLHIpe2w9bXQoeSxkKSxyKGwsW10scyx1KSxjPWwubGVuZ3RoO3doaWxlKGMtLSkocD1sW2NdKSYmKHlbZFtjXV09IShtW2RbY11dPXApKX1pZihvKXtpZihpfHxlKXtpZihpKXtsPVtdLGM9eS5sZW5ndGg7d2hpbGUoYy0tKShwPXlbY10pJiZsLnB1c2gobVtjXT1wKTtpKG51bGwseT1bXSxsLHUpfWM9eS5sZW5ndGg7d2hpbGUoYy0tKShwPXlbY10pJiYobD1pP00uY2FsbChvLHApOmZbY10pPi0xJiYob1tsXT0hKGFbbF09cCkpfX1lbHNlIHk9bXQoeT09PWE/eS5zcGxpY2UoaCx5Lmxlbmd0aCk6eSksaT9pKG51bGwsYSx5LHUpOkguYXBwbHkoYSx5KX0pfWZ1bmN0aW9uIHZ0KGUpe3ZhciB0LG4scixvPWUubGVuZ3RoLGE9aS5yZWxhdGl2ZVtlWzBdLnR5cGVdLHM9YXx8aS5yZWxhdGl2ZVtcIiBcIl0sdT1hPzE6MCxjPWh0KGZ1bmN0aW9uKGUpe3JldHVybiBlPT09dH0scywhMCkscD1odChmdW5jdGlvbihlKXtyZXR1cm4gTS5jYWxsKHQsZSk+LTF9LHMsITApLGY9W2Z1bmN0aW9uKGUsbixyKXtyZXR1cm4hYSYmKHJ8fG4hPT1sKXx8KCh0PW4pLm5vZGVUeXBlP2MoZSxuLHIpOnAoZSxuLHIpKX1dO2Zvcig7bz51O3UrKylpZihuPWkucmVsYXRpdmVbZVt1XS50eXBlXSlmPVtodChndChmKSxuKV07ZWxzZXtpZihuPWkuZmlsdGVyW2VbdV0udHlwZV0uYXBwbHkobnVsbCxlW3VdLm1hdGNoZXMpLG5beF0pe2ZvcihyPSsrdTtvPnI7cisrKWlmKGkucmVsYXRpdmVbZVtyXS50eXBlXSlicmVhaztyZXR1cm4geXQodT4xJiZndChmKSx1PjEmJmR0KGUuc2xpY2UoMCx1LTEpKS5yZXBsYWNlKFcsXCIkMVwiKSxuLHI+dSYmdnQoZS5zbGljZSh1LHIpKSxvPnImJnZ0KGU9ZS5zbGljZShyKSksbz5yJiZkdChlKSl9Zi5wdXNoKG4pfXJldHVybiBndChmKX1mdW5jdGlvbiBidChlLHQpe3ZhciBuPTAsbz10Lmxlbmd0aD4wLGE9ZS5sZW5ndGg+MCxzPWZ1bmN0aW9uKHMsdSxjLGYsZCl7dmFyIGgsZyxtLHk9W10sdj0wLGI9XCIwXCIseD1zJiZbXSx3PW51bGwhPWQsVD1sLEM9c3x8YSYmaS5maW5kLlRBRyhcIipcIixkJiZ1LnBhcmVudE5vZGV8fHUpLGs9Tis9bnVsbD09VD8xOk1hdGgucmFuZG9tKCl8fC4xO2Zvcih3JiYobD11IT09cCYmdSxyPW4pO251bGwhPShoPUNbYl0pO2IrKyl7aWYoYSYmaCl7Zz0wO3doaWxlKG09ZVtnKytdKWlmKG0oaCx1LGMpKXtmLnB1c2goaCk7YnJlYWt9dyYmKE49ayxyPSsrbil9byYmKChoPSFtJiZoKSYmdi0tLHMmJngucHVzaChoKSl9aWYodis9YixvJiZiIT09dil7Zz0wO3doaWxlKG09dFtnKytdKW0oeCx5LHUsYyk7aWYocyl7aWYodj4wKXdoaWxlKGItLSl4W2JdfHx5W2JdfHwoeVtiXT1MLmNhbGwoZikpO3k9bXQoeSl9SC5hcHBseShmLHkpLHcmJiFzJiZ5Lmxlbmd0aD4wJiZ2K3QubGVuZ3RoPjEmJnN0LnVuaXF1ZVNvcnQoZil9cmV0dXJuIHcmJihOPWssbD1UKSx4fTtyZXR1cm4gbz9vdChzKTpzfXM9c3QuY29tcGlsZT1mdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT1bXSxvPVNbZStcIiBcIl07aWYoIW8pe3R8fCh0PWZ0KGUpKSxuPXQubGVuZ3RoO3doaWxlKG4tLSlvPXZ0KHRbbl0pLG9beF0/ci5wdXNoKG8pOmkucHVzaChvKTtvPVMoZSxidChpLHIpKX1yZXR1cm4gb307ZnVuY3Rpb24geHQoZSx0LG4pe3ZhciByPTAsaT10Lmxlbmd0aDtmb3IoO2k+cjtyKyspc3QoZSx0W3JdLG4pO3JldHVybiBufWZ1bmN0aW9uIHd0KGUsdCxuLHIpe3ZhciBvLGEsdSxsLGMscD1mdChlKTtpZighciYmMT09PXAubGVuZ3RoKXtpZihhPXBbMF09cFswXS5zbGljZSgwKSxhLmxlbmd0aD4yJiZcIklEXCI9PT0odT1hWzBdKS50eXBlJiY5PT09dC5ub2RlVHlwZSYmIWQmJmkucmVsYXRpdmVbYVsxXS50eXBlXSl7aWYodD1pLmZpbmQuSUQodS5tYXRjaGVzWzBdLnJlcGxhY2UoZXQsdHQpLHQpWzBdLCF0KXJldHVybiBuO2U9ZS5zbGljZShhLnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1vPVUubmVlZHNDb250ZXh0LnRlc3QoZSk/MDphLmxlbmd0aDt3aGlsZShvLS0pe2lmKHU9YVtvXSxpLnJlbGF0aXZlW2w9dS50eXBlXSlicmVhaztpZigoYz1pLmZpbmRbbF0pJiYocj1jKHUubWF0Y2hlc1swXS5yZXBsYWNlKGV0LHR0KSxWLnRlc3QoYVswXS50eXBlKSYmdC5wYXJlbnROb2RlfHx0KSkpe2lmKGEuc3BsaWNlKG8sMSksZT1yLmxlbmd0aCYmZHQoYSksIWUpcmV0dXJuIEguYXBwbHkobixxLmNhbGwociwwKSksbjticmVha319fXJldHVybiBzKGUscCkocix0LGQsbixWLnRlc3QoZSkpLG59aS5wc2V1ZG9zLm50aD1pLnBzZXVkb3MuZXE7ZnVuY3Rpb24gVHQoKXt9aS5maWx0ZXJzPVR0LnByb3RvdHlwZT1pLnBzZXVkb3MsaS5zZXRGaWx0ZXJzPW5ldyBUdCxjKCksc3QuYXR0cj1iLmF0dHIsYi5maW5kPXN0LGIuZXhwcj1zdC5zZWxlY3RvcnMsYi5leHByW1wiOlwiXT1iLmV4cHIucHNldWRvcyxiLnVuaXF1ZT1zdC51bmlxdWVTb3J0LGIudGV4dD1zdC5nZXRUZXh0LGIuaXNYTUxEb2M9c3QuaXNYTUwsYi5jb250YWlucz1zdC5jb250YWluc30oZSk7dmFyIGF0PS9VbnRpbCQvLHN0PS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLHV0PS9eLlteOiNcXFtcXC4sXSokLyxsdD1iLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LGN0PXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O2IuZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpPXRoaXMubGVuZ3RoO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXJldHVybiByPXRoaXMsdGhpcy5wdXNoU3RhY2soYihlKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodD0wO2k+dDt0KyspaWYoYi5jb250YWlucyhyW3RdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihuPVtdLHQ9MDtpPnQ7dCsrKWIuZmluZChlLHRoaXNbdF0sbik7cmV0dXJuIG49dGhpcy5wdXNoU3RhY2soaT4xP2IudW5pcXVlKG4pOm4pLG4uc2VsZWN0b3I9KHRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcitcIiBcIjpcIlwiKStlLG59LGhhczpmdW5jdGlvbihlKXt2YXIgdCxuPWIoZSx0aGlzKSxyPW4ubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih0PTA7cj50O3QrKylpZihiLmNvbnRhaW5zKHRoaXMsblt0XSkpcmV0dXJuITB9KX0sbm90OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhmdCh0aGlzLGUsITEpKX0sZmlsdGVyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhmdCh0aGlzLGUsITApKX0saXM6ZnVuY3Rpb24oZSl7cmV0dXJuISFlJiYoXCJzdHJpbmdcIj09dHlwZW9mIGU/bHQudGVzdChlKT9iKGUsdGhpcy5jb250ZXh0KS5pbmRleCh0aGlzWzBdKT49MDpiLmZpbHRlcihlLHRoaXMpLmxlbmd0aD4wOnRoaXMuZmlsdGVyKGUpLmxlbmd0aD4wKX0sY2xvc2VzdDpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MCxpPXRoaXMubGVuZ3RoLG89W10sYT1sdC50ZXN0KGUpfHxcInN0cmluZ1wiIT10eXBlb2YgZT9iKGUsdHx8dGhpcy5jb250ZXh0KTowO2Zvcig7aT5yO3IrKyl7bj10aGlzW3JdO3doaWxlKG4mJm4ub3duZXJEb2N1bWVudCYmbiE9PXQmJjExIT09bi5ub2RlVHlwZSl7aWYoYT9hLmluZGV4KG4pPi0xOmIuZmluZC5tYXRjaGVzU2VsZWN0b3IobixlKSl7by5wdXNoKG4pO2JyZWFrfW49bi5wYXJlbnROb2RlfX1yZXR1cm4gdGhpcy5wdXNoU3RhY2soby5sZW5ndGg+MT9iLnVuaXF1ZShvKTpvKX0saW5kZXg6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/XCJzdHJpbmdcIj09dHlwZW9mIGU/Yi5pbkFycmF5KHRoaXNbMF0sYihlKSk6Yi5pbkFycmF5KGUuanF1ZXJ5P2VbMF06ZSx0aGlzKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihlLHQpe3ZhciBuPVwic3RyaW5nXCI9PXR5cGVvZiBlP2IoZSx0KTpiLm1ha2VBcnJheShlJiZlLm5vZGVUeXBlP1tlXTplKSxyPWIubWVyZ2UodGhpcy5nZXQoKSxuKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soYi51bmlxdWUocikpfSxhZGRCYWNrOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmFkZChudWxsPT1lP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKGUpKX19KSxiLmZuLmFuZFNlbGY9Yi5mbi5hZGRCYWNrO2Z1bmN0aW9uIHB0KGUsdCl7ZG8gZT1lW3RdO3doaWxlKGUmJjEhPT1lLm5vZGVUeXBlKTtyZXR1cm4gZX1iLmVhY2goe3BhcmVudDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJjExIT09dC5ub2RlVHlwZT90Om51bGx9LHBhcmVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGIuZGlyKGUsXCJwYXJlbnROb2RlXCIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBiLmRpcihlLFwicGFyZW50Tm9kZVwiLG4pfSxuZXh0OmZ1bmN0aW9uKGUpe3JldHVybiBwdChlLFwibmV4dFNpYmxpbmdcIil9LHByZXY6ZnVuY3Rpb24oZSl7cmV0dXJuIHB0KGUsXCJwcmV2aW91c1NpYmxpbmdcIil9LG5leHRBbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIGIuZGlyKGUsXCJuZXh0U2libGluZ1wiKX0scHJldkFsbDpmdW5jdGlvbihlKXtyZXR1cm4gYi5kaXIoZSxcInByZXZpb3VzU2libGluZ1wiKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gYi5kaXIoZSxcIm5leHRTaWJsaW5nXCIsbil9LHByZXZVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGIuZGlyKGUsXCJwcmV2aW91c1NpYmxpbmdcIixuKX0sc2libGluZ3M6ZnVuY3Rpb24oZSl7cmV0dXJuIGIuc2libGluZygoZS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxlKX0sY2hpbGRyZW46ZnVuY3Rpb24oZSl7cmV0dXJuIGIuc2libGluZyhlLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihlKXtyZXR1cm4gYi5ub2RlTmFtZShlLFwiaWZyYW1lXCIpP2UuY29udGVudERvY3VtZW50fHxlLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ6Yi5tZXJnZShbXSxlLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24oZSx0KXtiLmZuW2VdPWZ1bmN0aW9uKG4scil7dmFyIGk9Yi5tYXAodGhpcyx0LG4pO3JldHVybiBhdC50ZXN0KGUpfHwocj1uKSxyJiZcInN0cmluZ1wiPT10eXBlb2YgciYmKGk9Yi5maWx0ZXIocixpKSksaT10aGlzLmxlbmd0aD4xJiYhY3RbZV0/Yi51bmlxdWUoaSk6aSx0aGlzLmxlbmd0aD4xJiZzdC50ZXN0KGUpJiYoaT1pLnJldmVyc2UoKSksdGhpcy5wdXNoU3RhY2soaSl9fSksYi5leHRlbmQoe2ZpbHRlcjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIG4mJihlPVwiOm5vdChcIitlK1wiKVwiKSwxPT09dC5sZW5ndGg/Yi5maW5kLm1hdGNoZXNTZWxlY3Rvcih0WzBdLGUpP1t0WzBdXTpbXTpiLmZpbmQubWF0Y2hlcyhlLHQpfSxkaXI6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpPVtdLG89ZVtuXTt3aGlsZShvJiY5IT09by5ub2RlVHlwZSYmKHI9PT10fHwxIT09by5ub2RlVHlwZXx8IWIobykuaXMocikpKTE9PT1vLm5vZGVUeXBlJiZpLnB1c2gobyksbz1vW25dO3JldHVybiBpfSxzaWJsaW5nOmZ1bmN0aW9uKGUsdCl7dmFyIG49W107Zm9yKDtlO2U9ZS5uZXh0U2libGluZykxPT09ZS5ub2RlVHlwZSYmZSE9PXQmJm4ucHVzaChlKTtyZXR1cm4gbn19KTtmdW5jdGlvbiBmdChlLHQsbil7aWYodD10fHwwLGIuaXNGdW5jdGlvbih0KSlyZXR1cm4gYi5ncmVwKGUsZnVuY3Rpb24oZSxyKXt2YXIgaT0hIXQuY2FsbChlLHIsZSk7cmV0dXJuIGk9PT1ufSk7aWYodC5ub2RlVHlwZSlyZXR1cm4gYi5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10PT09bn0pO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXt2YXIgcj1iLmdyZXAoZSxmdW5jdGlvbihlKXtyZXR1cm4gMT09PWUubm9kZVR5cGV9KTtpZih1dC50ZXN0KHQpKXJldHVybiBiLmZpbHRlcih0LHIsIW4pO3Q9Yi5maWx0ZXIodCxyKX1yZXR1cm4gYi5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGIuaW5BcnJheShlLHQpPj0wPT09bn0pfWZ1bmN0aW9uIGR0KGUpe3ZhciB0PWh0LnNwbGl0KFwifFwiKSxuPWUuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2lmKG4uY3JlYXRlRWxlbWVudCl3aGlsZSh0Lmxlbmd0aCluLmNyZWF0ZUVsZW1lbnQodC5wb3AoKSk7cmV0dXJuIG59dmFyIGh0PVwiYWJicnxhcnRpY2xlfGFzaWRlfGF1ZGlvfGJkaXxjYW52YXN8ZGF0YXxkYXRhbGlzdHxkZXRhaWxzfGZpZ2NhcHRpb258ZmlndXJlfGZvb3RlcnxoZWFkZXJ8aGdyb3VwfG1hcmt8bWV0ZXJ8bmF2fG91dHB1dHxwcm9ncmVzc3xzZWN0aW9ufHN1bW1hcnl8dGltZXx2aWRlb1wiLGd0PS8galF1ZXJ5XFxkKz1cIig/Om51bGx8XFxkKylcIi9nLG10PVJlZ0V4cChcIjwoPzpcIitodCtcIilbXFxcXHMvPl1cIixcImlcIikseXQ9L15cXHMrLyx2dD0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXFx3Ol0rKVtePl0qKVxcLz4vZ2ksYnQ9LzwoW1xcdzpdKykvLHh0PS88dGJvZHkvaSx3dD0vPHwmIz9cXHcrOy8sVHQ9LzwoPzpzY3JpcHR8c3R5bGV8bGluaykvaSxOdD0vXig/OmNoZWNrYm94fHJhZGlvKSQvaSxDdD0vY2hlY2tlZFxccyooPzpbXj1dfD1cXHMqLmNoZWNrZWQuKS9pLGt0PS9eJHxcXC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksRXQ9L150cnVlXFwvKC4qKS8sU3Q9L15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nLEF0PXtvcHRpb246WzEsXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsXCI8L3NlbGVjdD5cIl0sbGVnZW5kOlsxLFwiPGZpZWxkc2V0PlwiLFwiPC9maWVsZHNldD5cIl0sYXJlYTpbMSxcIjxtYXA+XCIsXCI8L21hcD5cIl0scGFyYW06WzEsXCI8b2JqZWN0PlwiLFwiPC9vYmplY3Q+XCJdLHRoZWFkOlsxLFwiPHRhYmxlPlwiLFwiPC90YWJsZT5cIl0sdHI6WzIsXCI8dGFibGU+PHRib2R5PlwiLFwiPC90Ym9keT48L3RhYmxlPlwiXSxjb2w6WzIsXCI8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPlwiLFwiPC9jb2xncm91cD48L3RhYmxlPlwiXSx0ZDpbMyxcIjx0YWJsZT48dGJvZHk+PHRyPlwiLFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCJdLF9kZWZhdWx0OmIuc3VwcG9ydC5odG1sU2VyaWFsaXplP1swLFwiXCIsXCJcIl06WzEsXCJYPGRpdj5cIixcIjwvZGl2PlwiXX0sanQ9ZHQobyksRHQ9anQuYXBwZW5kQ2hpbGQoby5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtBdC5vcHRncm91cD1BdC5vcHRpb24sQXQudGJvZHk9QXQudGZvb3Q9QXQuY29sZ3JvdXA9QXQuY2FwdGlvbj1BdC50aGVhZCxBdC50aD1BdC50ZCxiLmZuLmV4dGVuZCh7dGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gYi5hY2Nlc3ModGhpcyxmdW5jdGlvbihlKXtyZXR1cm4gZT09PXQ/Yi50ZXh0KHRoaXMpOnRoaXMuZW1wdHkoKS5hcHBlbmQoKHRoaXNbMF0mJnRoaXNbMF0ub3duZXJEb2N1bWVudHx8bykuY3JlYXRlVGV4dE5vZGUoZSkpfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LHdyYXBBbGw6ZnVuY3Rpb24oZSl7aWYoYi5pc0Z1bmN0aW9uKGUpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24odCl7Yih0aGlzKS53cmFwQWxsKGUuY2FsbCh0aGlzLHQpKX0pO2lmKHRoaXNbMF0pe3ZhciB0PWIoZSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKTt0aGlzWzBdLnBhcmVudE5vZGUmJnQuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLHQubWFwKGZ1bmN0aW9uKCl7dmFyIGU9dGhpczt3aGlsZShlLmZpcnN0Q2hpbGQmJjE9PT1lLmZpcnN0Q2hpbGQubm9kZVR5cGUpZT1lLmZpcnN0Q2hpbGQ7cmV0dXJuIGV9KS5hcHBlbmQodGhpcyl9cmV0dXJuIHRoaXN9LHdyYXBJbm5lcjpmdW5jdGlvbihlKXtyZXR1cm4gYi5pc0Z1bmN0aW9uKGUpP3RoaXMuZWFjaChmdW5jdGlvbih0KXtiKHRoaXMpLndyYXBJbm5lcihlLmNhbGwodGhpcyx0KSl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1iKHRoaXMpLG49dC5jb250ZW50cygpO24ubGVuZ3RoP24ud3JhcEFsbChlKTp0LmFwcGVuZChlKX0pfSx3cmFwOmZ1bmN0aW9uKGUpe3ZhciB0PWIuaXNGdW5jdGlvbihlKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKG4pe2IodGhpcykud3JhcEFsbCh0P2UuY2FsbCh0aGlzLG4pOmUpfSl9LHVud3JhcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudCgpLmVhY2goZnVuY3Rpb24oKXtiLm5vZGVOYW1lKHRoaXMsXCJib2R5XCIpfHxiKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLCEwLGZ1bmN0aW9uKGUpeygxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSkmJnRoaXMuYXBwZW5kQ2hpbGQoZSl9KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cywhMCxmdW5jdGlvbihlKXsoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpJiZ0aGlzLmluc2VydEJlZm9yZShlLHRoaXMuZmlyc3RDaGlsZCl9KX0sYmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLCExLGZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHRoaXMpfSl9LGFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLCExLGZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHRoaXMubmV4dFNpYmxpbmcpfSl9LHJlbW92ZTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MDtmb3IoO251bGwhPShuPXRoaXNbcl0pO3IrKykoIWV8fGIuZmlsdGVyKGUsW25dKS5sZW5ndGg+MCkmJih0fHwxIT09bi5ub2RlVHlwZXx8Yi5jbGVhbkRhdGEoT3QobikpLG4ucGFyZW50Tm9kZSYmKHQmJmIuY29udGFpbnMobi5vd25lckRvY3VtZW50LG4pJiZNdChPdChuLFwic2NyaXB0XCIpKSxuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobikpKTtyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXt2YXIgZSx0PTA7Zm9yKDtudWxsIT0oZT10aGlzW3RdKTt0KyspezE9PT1lLm5vZGVUeXBlJiZiLmNsZWFuRGF0YShPdChlLCExKSk7d2hpbGUoZS5maXJzdENoaWxkKWUucmVtb3ZlQ2hpbGQoZS5maXJzdENoaWxkKTtlLm9wdGlvbnMmJmIubm9kZU5hbWUoZSxcInNlbGVjdFwiKSYmKGUub3B0aW9ucy5sZW5ndGg9MCl9cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9bnVsbD09ZT8hMTplLHQ9bnVsbD09dD9lOnQsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gYi5jbG9uZSh0aGlzLGUsdCl9KX0saHRtbDpmdW5jdGlvbihlKXtyZXR1cm4gYi5hY2Nlc3ModGhpcyxmdW5jdGlvbihlKXt2YXIgbj10aGlzWzBdfHx7fSxyPTAsaT10aGlzLmxlbmd0aDtpZihlPT09dClyZXR1cm4gMT09PW4ubm9kZVR5cGU/bi5pbm5lckhUTUwucmVwbGFjZShndCxcIlwiKTp0O2lmKCEoXCJzdHJpbmdcIiE9dHlwZW9mIGV8fFR0LnRlc3QoZSl8fCFiLnN1cHBvcnQuaHRtbFNlcmlhbGl6ZSYmbXQudGVzdChlKXx8IWIuc3VwcG9ydC5sZWFkaW5nV2hpdGVzcGFjZSYmeXQudGVzdChlKXx8QXRbKGJ0LmV4ZWMoZSl8fFtcIlwiLFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpXSkpe2U9ZS5yZXBsYWNlKHZ0LFwiPCQxPjwvJDI+XCIpO3RyeXtmb3IoO2k+cjtyKyspbj10aGlzW3JdfHx7fSwxPT09bi5ub2RlVHlwZSYmKGIuY2xlYW5EYXRhKE90KG4sITEpKSxuLmlubmVySFRNTD1lKTtuPTB9Y2F0Y2gobyl7fX1uJiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGUpfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKGUpe3ZhciB0PWIuaXNGdW5jdGlvbihlKTtyZXR1cm4gdHx8XCJzdHJpbmdcIj09dHlwZW9mIGV8fChlPWIoZSkubm90KHRoaXMpLmRldGFjaCgpKSx0aGlzLmRvbU1hbmlwKFtlXSwhMCxmdW5jdGlvbihlKXt2YXIgdD10aGlzLm5leHRTaWJsaW5nLG49dGhpcy5wYXJlbnROb2RlO24mJihiKHRoaXMpLnJlbW92ZSgpLG4uaW5zZXJ0QmVmb3JlKGUsdCkpfSl9LGRldGFjaDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZW1vdmUoZSwhMCl9LGRvbU1hbmlwOmZ1bmN0aW9uKGUsbixyKXtlPWYuYXBwbHkoW10sZSk7dmFyIGksbyxhLHMsdSxsLGM9MCxwPXRoaXMubGVuZ3RoLGQ9dGhpcyxoPXAtMSxnPWVbMF0sbT1iLmlzRnVuY3Rpb24oZyk7aWYobXx8ISgxPj1wfHxcInN0cmluZ1wiIT10eXBlb2YgZ3x8Yi5zdXBwb3J0LmNoZWNrQ2xvbmUpJiZDdC50ZXN0KGcpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaSl7dmFyIG89ZC5lcShpKTttJiYoZVswXT1nLmNhbGwodGhpcyxpLG4/by5odG1sKCk6dCkpLG8uZG9tTWFuaXAoZSxuLHIpfSk7aWYocCYmKGw9Yi5idWlsZEZyYWdtZW50KGUsdGhpc1swXS5vd25lckRvY3VtZW50LCExLHRoaXMpLGk9bC5maXJzdENoaWxkLDE9PT1sLmNoaWxkTm9kZXMubGVuZ3RoJiYobD1pKSxpKSl7Zm9yKG49biYmYi5ub2RlTmFtZShpLFwidHJcIikscz1iLm1hcChPdChsLFwic2NyaXB0XCIpLEh0KSxhPXMubGVuZ3RoO3A+YztjKyspbz1sLGMhPT1oJiYobz1iLmNsb25lKG8sITAsITApLGEmJmIubWVyZ2UocyxPdChvLFwic2NyaXB0XCIpKSksci5jYWxsKG4mJmIubm9kZU5hbWUodGhpc1tjXSxcInRhYmxlXCIpP0x0KHRoaXNbY10sXCJ0Ym9keVwiKTp0aGlzW2NdLG8sYyk7aWYoYSlmb3IodT1zW3MubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQsYi5tYXAocyxxdCksYz0wO2E+YztjKyspbz1zW2NdLGt0LnRlc3Qoby50eXBlfHxcIlwiKSYmIWIuX2RhdGEobyxcImdsb2JhbEV2YWxcIikmJmIuY29udGFpbnModSxvKSYmKG8uc3JjP2IuYWpheCh7dXJsOm8uc3JjLHR5cGU6XCJHRVRcIixkYXRhVHlwZTpcInNjcmlwdFwiLGFzeW5jOiExLGdsb2JhbDohMSxcInRocm93c1wiOiEwfSk6Yi5nbG9iYWxFdmFsKChvLnRleHR8fG8udGV4dENvbnRlbnR8fG8uaW5uZXJIVE1MfHxcIlwiKS5yZXBsYWNlKFN0LFwiXCIpKSk7bD1pPW51bGx9cmV0dXJuIHRoaXN9fSk7ZnVuY3Rpb24gTHQoZSx0KXtyZXR1cm4gZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0KVswXXx8ZS5hcHBlbmRDaGlsZChlLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0KSl9ZnVuY3Rpb24gSHQoZSl7dmFyIHQ9ZS5nZXRBdHRyaWJ1dGVOb2RlKFwidHlwZVwiKTtyZXR1cm4gZS50eXBlPSh0JiZ0LnNwZWNpZmllZCkrXCIvXCIrZS50eXBlLGV9ZnVuY3Rpb24gcXQoZSl7dmFyIHQ9RXQuZXhlYyhlLnR5cGUpO3JldHVybiB0P2UudHlwZT10WzFdOmUucmVtb3ZlQXR0cmlidXRlKFwidHlwZVwiKSxlfWZ1bmN0aW9uIE10KGUsdCl7dmFyIG4scj0wO2Zvcig7bnVsbCE9KG49ZVtyXSk7cisrKWIuX2RhdGEobixcImdsb2JhbEV2YWxcIiwhdHx8Yi5fZGF0YSh0W3JdLFwiZ2xvYmFsRXZhbFwiKSl9ZnVuY3Rpb24gX3QoZSx0KXtpZigxPT09dC5ub2RlVHlwZSYmYi5oYXNEYXRhKGUpKXt2YXIgbixyLGksbz1iLl9kYXRhKGUpLGE9Yi5fZGF0YSh0LG8pLHM9by5ldmVudHM7aWYocyl7ZGVsZXRlIGEuaGFuZGxlLGEuZXZlbnRzPXt9O2ZvcihuIGluIHMpZm9yKHI9MCxpPXNbbl0ubGVuZ3RoO2k+cjtyKyspYi5ldmVudC5hZGQodCxuLHNbbl1bcl0pfWEuZGF0YSYmKGEuZGF0YT1iLmV4dGVuZCh7fSxhLmRhdGEpKX19ZnVuY3Rpb24gRnQoZSx0KXt2YXIgbixyLGk7aWYoMT09PXQubm9kZVR5cGUpe2lmKG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLCFiLnN1cHBvcnQubm9DbG9uZUV2ZW50JiZ0W2IuZXhwYW5kb10pe2k9Yi5fZGF0YSh0KTtmb3IociBpbiBpLmV2ZW50cyliLnJlbW92ZUV2ZW50KHQscixpLmhhbmRsZSk7dC5yZW1vdmVBdHRyaWJ1dGUoYi5leHBhbmRvKX1cInNjcmlwdFwiPT09biYmdC50ZXh0IT09ZS50ZXh0PyhIdCh0KS50ZXh0PWUudGV4dCxxdCh0KSk6XCJvYmplY3RcIj09PW4/KHQucGFyZW50Tm9kZSYmKHQub3V0ZXJIVE1MPWUub3V0ZXJIVE1MKSxiLnN1cHBvcnQuaHRtbDVDbG9uZSYmZS5pbm5lckhUTUwmJiFiLnRyaW0odC5pbm5lckhUTUwpJiYodC5pbm5lckhUTUw9ZS5pbm5lckhUTUwpKTpcImlucHV0XCI9PT1uJiZOdC50ZXN0KGUudHlwZSk/KHQuZGVmYXVsdENoZWNrZWQ9dC5jaGVja2VkPWUuY2hlY2tlZCx0LnZhbHVlIT09ZS52YWx1ZSYmKHQudmFsdWU9ZS52YWx1ZSkpOlwib3B0aW9uXCI9PT1uP3QuZGVmYXVsdFNlbGVjdGVkPXQuc2VsZWN0ZWQ9ZS5kZWZhdWx0U2VsZWN0ZWQ6KFwiaW5wdXRcIj09PW58fFwidGV4dGFyZWFcIj09PW4pJiYodC5kZWZhdWx0VmFsdWU9ZS5kZWZhdWx0VmFsdWUpfX1iLmVhY2goe2FwcGVuZFRvOlwiYXBwZW5kXCIscHJlcGVuZFRvOlwicHJlcGVuZFwiLGluc2VydEJlZm9yZTpcImJlZm9yZVwiLGluc2VydEFmdGVyOlwiYWZ0ZXJcIixyZXBsYWNlQWxsOlwicmVwbGFjZVdpdGhcIn0sZnVuY3Rpb24oZSx0KXtiLmZuW2VdPWZ1bmN0aW9uKGUpe3ZhciBuLHI9MCxpPVtdLG89YihlKSxhPW8ubGVuZ3RoLTE7Zm9yKDthPj1yO3IrKyluPXI9PT1hP3RoaXM6dGhpcy5jbG9uZSghMCksYihvW3JdKVt0XShuKSxkLmFwcGx5KGksbi5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGkpfX0pO2Z1bmN0aW9uIE90KGUsbil7dmFyIHIsbyxhPTAscz10eXBlb2YgZS5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PWk/ZS5nZXRFbGVtZW50c0J5VGFnTmFtZShufHxcIipcIik6dHlwZW9mIGUucXVlcnlTZWxlY3RvckFsbCE9PWk/ZS5xdWVyeVNlbGVjdG9yQWxsKG58fFwiKlwiKTp0O2lmKCFzKWZvcihzPVtdLHI9ZS5jaGlsZE5vZGVzfHxlO251bGwhPShvPXJbYV0pO2ErKykhbnx8Yi5ub2RlTmFtZShvLG4pP3MucHVzaChvKTpiLm1lcmdlKHMsT3QobyxuKSk7cmV0dXJuIG49PT10fHxuJiZiLm5vZGVOYW1lKGUsbik/Yi5tZXJnZShbZV0scyk6c31mdW5jdGlvbiBCdChlKXtOdC50ZXN0KGUudHlwZSkmJihlLmRlZmF1bHRDaGVja2VkPWUuY2hlY2tlZCl9Yi5leHRlbmQoe2Nsb25lOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYSxzLHU9Yi5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSk7aWYoYi5zdXBwb3J0Lmh0bWw1Q2xvbmV8fGIuaXNYTUxEb2MoZSl8fCFtdC50ZXN0KFwiPFwiK2Uubm9kZU5hbWUrXCI+XCIpP289ZS5jbG9uZU5vZGUoITApOihEdC5pbm5lckhUTUw9ZS5vdXRlckhUTUwsRHQucmVtb3ZlQ2hpbGQobz1EdC5maXJzdENoaWxkKSksIShiLnN1cHBvcnQubm9DbG9uZUV2ZW50JiZiLnN1cHBvcnQubm9DbG9uZUNoZWNrZWR8fDEhPT1lLm5vZGVUeXBlJiYxMSE9PWUubm9kZVR5cGV8fGIuaXNYTUxEb2MoZSkpKWZvcihyPU90KG8pLHM9T3QoZSksYT0wO251bGwhPShpPXNbYV0pOysrYSlyW2FdJiZGdChpLHJbYV0pO2lmKHQpaWYobilmb3Iocz1zfHxPdChlKSxyPXJ8fE90KG8pLGE9MDtudWxsIT0oaT1zW2FdKTthKyspX3QoaSxyW2FdKTtlbHNlIF90KGUsbyk7cmV0dXJuIHI9T3QobyxcInNjcmlwdFwiKSxyLmxlbmd0aD4wJiZNdChyLCF1JiZPdChlLFwic2NyaXB0XCIpKSxyPXM9aT1udWxsLG99LGJ1aWxkRnJhZ21lbnQ6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHMsdSxsLGMscD1lLmxlbmd0aCxmPWR0KHQpLGQ9W10saD0wO2Zvcig7cD5oO2grKylpZihvPWVbaF0sb3x8MD09PW8paWYoXCJvYmplY3RcIj09PWIudHlwZShvKSliLm1lcmdlKGQsby5ub2RlVHlwZT9bb106byk7ZWxzZSBpZih3dC50ZXN0KG8pKXtzPXN8fGYuYXBwZW5kQ2hpbGQodC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSx1PShidC5leGVjKG8pfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKSxjPUF0W3VdfHxBdC5fZGVmYXVsdCxzLmlubmVySFRNTD1jWzFdK28ucmVwbGFjZSh2dCxcIjwkMT48LyQyPlwiKStjWzJdLGk9Y1swXTt3aGlsZShpLS0pcz1zLmxhc3RDaGlsZDtpZighYi5zdXBwb3J0LmxlYWRpbmdXaGl0ZXNwYWNlJiZ5dC50ZXN0KG8pJiZkLnB1c2godC5jcmVhdGVUZXh0Tm9kZSh5dC5leGVjKG8pWzBdKSksIWIuc3VwcG9ydC50Ym9keSl7bz1cInRhYmxlXCIhPT11fHx4dC50ZXN0KG8pP1wiPHRhYmxlPlwiIT09Y1sxXXx8eHQudGVzdChvKT8wOnM6cy5maXJzdENoaWxkLGk9byYmby5jaGlsZE5vZGVzLmxlbmd0aDt3aGlsZShpLS0pYi5ub2RlTmFtZShsPW8uY2hpbGROb2Rlc1tpXSxcInRib2R5XCIpJiYhbC5jaGlsZE5vZGVzLmxlbmd0aCYmby5yZW1vdmVDaGlsZChsKVxufWIubWVyZ2UoZCxzLmNoaWxkTm9kZXMpLHMudGV4dENvbnRlbnQ9XCJcIjt3aGlsZShzLmZpcnN0Q2hpbGQpcy5yZW1vdmVDaGlsZChzLmZpcnN0Q2hpbGQpO3M9Zi5sYXN0Q2hpbGR9ZWxzZSBkLnB1c2godC5jcmVhdGVUZXh0Tm9kZShvKSk7cyYmZi5yZW1vdmVDaGlsZChzKSxiLnN1cHBvcnQuYXBwZW5kQ2hlY2tlZHx8Yi5ncmVwKE90KGQsXCJpbnB1dFwiKSxCdCksaD0wO3doaWxlKG89ZFtoKytdKWlmKCghcnx8LTE9PT1iLmluQXJyYXkobyxyKSkmJihhPWIuY29udGFpbnMoby5vd25lckRvY3VtZW50LG8pLHM9T3QoZi5hcHBlbmRDaGlsZChvKSxcInNjcmlwdFwiKSxhJiZNdChzKSxuKSl7aT0wO3doaWxlKG89c1tpKytdKWt0LnRlc3Qoby50eXBlfHxcIlwiKSYmbi5wdXNoKG8pfXJldHVybiBzPW51bGwsZn0sY2xlYW5EYXRhOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixvLGEscz0wLHU9Yi5leHBhbmRvLGw9Yi5jYWNoZSxwPWIuc3VwcG9ydC5kZWxldGVFeHBhbmRvLGY9Yi5ldmVudC5zcGVjaWFsO2Zvcig7bnVsbCE9KG49ZVtzXSk7cysrKWlmKCh0fHxiLmFjY2VwdERhdGEobikpJiYobz1uW3VdLGE9byYmbFtvXSkpe2lmKGEuZXZlbnRzKWZvcihyIGluIGEuZXZlbnRzKWZbcl0/Yi5ldmVudC5yZW1vdmUobixyKTpiLnJlbW92ZUV2ZW50KG4scixhLmhhbmRsZSk7bFtvXSYmKGRlbGV0ZSBsW29dLHA/ZGVsZXRlIG5bdV06dHlwZW9mIG4ucmVtb3ZlQXR0cmlidXRlIT09aT9uLnJlbW92ZUF0dHJpYnV0ZSh1KTpuW3VdPW51bGwsYy5wdXNoKG8pKX19fSk7dmFyIFB0LFJ0LFd0LCR0PS9hbHBoYVxcKFteKV0qXFwpL2ksSXQ9L29wYWNpdHlcXHMqPVxccyooW14pXSopLyx6dD0vXih0b3B8cmlnaHR8Ym90dG9tfGxlZnQpJC8sWHQ9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFV0PS9ebWFyZ2luLyxWdD1SZWdFeHAoXCJeKFwiK3grXCIpKC4qKSRcIixcImlcIiksWXQ9UmVnRXhwKFwiXihcIit4K1wiKSg/IXB4KVthLXolXSskXCIsXCJpXCIpLEp0PVJlZ0V4cChcIl4oWystXSk9KFwiK3grXCIpXCIsXCJpXCIpLEd0PXtCT0RZOlwiYmxvY2tcIn0sUXQ9e3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix2aXNpYmlsaXR5OlwiaGlkZGVuXCIsZGlzcGxheTpcImJsb2NrXCJ9LEt0PXtsZXR0ZXJTcGFjaW5nOjAsZm9udFdlaWdodDo0MDB9LFp0PVtcIlRvcFwiLFwiUmlnaHRcIixcIkJvdHRvbVwiLFwiTGVmdFwiXSxlbj1bXCJXZWJraXRcIixcIk9cIixcIk1velwiLFwibXNcIl07ZnVuY3Rpb24gdG4oZSx0KXtpZih0IGluIGUpcmV0dXJuIHQ7dmFyIG49dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpLHI9dCxpPWVuLmxlbmd0aDt3aGlsZShpLS0paWYodD1lbltpXStuLHQgaW4gZSlyZXR1cm4gdDtyZXR1cm4gcn1mdW5jdGlvbiBubihlLHQpe3JldHVybiBlPXR8fGUsXCJub25lXCI9PT1iLmNzcyhlLFwiZGlzcGxheVwiKXx8IWIuY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfWZ1bmN0aW9uIHJuKGUsdCl7dmFyIG4scixpLG89W10sYT0wLHM9ZS5sZW5ndGg7Zm9yKDtzPmE7YSsrKXI9ZVthXSxyLnN0eWxlJiYob1thXT1iLl9kYXRhKHIsXCJvbGRkaXNwbGF5XCIpLG49ci5zdHlsZS5kaXNwbGF5LHQ/KG9bYV18fFwibm9uZVwiIT09bnx8KHIuc3R5bGUuZGlzcGxheT1cIlwiKSxcIlwiPT09ci5zdHlsZS5kaXNwbGF5JiZubihyKSYmKG9bYV09Yi5fZGF0YShyLFwib2xkZGlzcGxheVwiLHVuKHIubm9kZU5hbWUpKSkpOm9bYV18fChpPW5uKHIpLChuJiZcIm5vbmVcIiE9PW58fCFpKSYmYi5fZGF0YShyLFwib2xkZGlzcGxheVwiLGk/bjpiLmNzcyhyLFwiZGlzcGxheVwiKSkpKTtmb3IoYT0wO3M+YTthKyspcj1lW2FdLHIuc3R5bGUmJih0JiZcIm5vbmVcIiE9PXIuc3R5bGUuZGlzcGxheSYmXCJcIiE9PXIuc3R5bGUuZGlzcGxheXx8KHIuc3R5bGUuZGlzcGxheT10P29bYV18fFwiXCI6XCJub25lXCIpKTtyZXR1cm4gZX1iLmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGUsbil7cmV0dXJuIGIuYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSxuLHIpe3ZhciBpLG8sYT17fSxzPTA7aWYoYi5pc0FycmF5KG4pKXtmb3Iobz1SdChlKSxpPW4ubGVuZ3RoO2k+cztzKyspYVtuW3NdXT1iLmNzcyhlLG5bc10sITEsbyk7cmV0dXJuIGF9cmV0dXJuIHIhPT10P2Iuc3R5bGUoZSxuLHIpOmIuY3NzKGUsbil9LGUsbixhcmd1bWVudHMubGVuZ3RoPjEpfSxzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIHJuKHRoaXMsITApfSxoaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIHJuKHRoaXMpfSx0b2dnbGU6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJib29sZWFuXCI9PXR5cGVvZiBlO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXsodD9lOm5uKHRoaXMpKT9iKHRoaXMpLnNob3coKTpiKHRoaXMpLmhpZGUoKX0pfX0pLGIuZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGUsdCl7aWYodCl7dmFyIG49V3QoZSxcIm9wYWNpdHlcIik7cmV0dXJuXCJcIj09PW4/XCIxXCI6bn19fX0sY3NzTnVtYmVyOntjb2x1bW5Db3VudDohMCxmaWxsT3BhY2l0eTohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6e1wiZmxvYXRcIjpiLnN1cHBvcnQuY3NzRmxvYXQ/XCJjc3NGbG9hdFwiOlwic3R5bGVGbG9hdFwifSxzdHlsZTpmdW5jdGlvbihlLG4scixpKXtpZihlJiYzIT09ZS5ub2RlVHlwZSYmOCE9PWUubm9kZVR5cGUmJmUuc3R5bGUpe3ZhciBvLGEscyx1PWIuY2FtZWxDYXNlKG4pLGw9ZS5zdHlsZTtpZihuPWIuY3NzUHJvcHNbdV18fChiLmNzc1Byb3BzW3VdPXRuKGwsdSkpLHM9Yi5jc3NIb29rc1tuXXx8Yi5jc3NIb29rc1t1XSxyPT09dClyZXR1cm4gcyYmXCJnZXRcImluIHMmJihvPXMuZ2V0KGUsITEsaSkpIT09dD9vOmxbbl07aWYoYT10eXBlb2YgcixcInN0cmluZ1wiPT09YSYmKG89SnQuZXhlYyhyKSkmJihyPShvWzFdKzEpKm9bMl0rcGFyc2VGbG9hdChiLmNzcyhlLG4pKSxhPVwibnVtYmVyXCIpLCEobnVsbD09cnx8XCJudW1iZXJcIj09PWEmJmlzTmFOKHIpfHwoXCJudW1iZXJcIiE9PWF8fGIuY3NzTnVtYmVyW3VdfHwocis9XCJweFwiKSxiLnN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlfHxcIlwiIT09cnx8MCE9PW4uaW5kZXhPZihcImJhY2tncm91bmRcIil8fChsW25dPVwiaW5oZXJpdFwiKSxzJiZcInNldFwiaW4gcyYmKHI9cy5zZXQoZSxyLGkpKT09PXQpKSl0cnl7bFtuXT1yfWNhdGNoKGMpe319fSxjc3M6ZnVuY3Rpb24oZSxuLHIsaSl7dmFyIG8sYSxzLHU9Yi5jYW1lbENhc2Uobik7cmV0dXJuIG49Yi5jc3NQcm9wc1t1XXx8KGIuY3NzUHJvcHNbdV09dG4oZS5zdHlsZSx1KSkscz1iLmNzc0hvb2tzW25dfHxiLmNzc0hvb2tzW3VdLHMmJlwiZ2V0XCJpbiBzJiYoYT1zLmdldChlLCEwLHIpKSxhPT09dCYmKGE9V3QoZSxuLGkpKSxcIm5vcm1hbFwiPT09YSYmbiBpbiBLdCYmKGE9S3Rbbl0pLFwiXCI9PT1yfHxyPyhvPXBhcnNlRmxvYXQoYSkscj09PSEwfHxiLmlzTnVtZXJpYyhvKT9vfHwwOmEpOmF9LHN3YXA6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhPXt9O2ZvcihvIGluIHQpYVtvXT1lLnN0eWxlW29dLGUuc3R5bGVbb109dFtvXTtpPW4uYXBwbHkoZSxyfHxbXSk7Zm9yKG8gaW4gdCllLnN0eWxlW29dPWFbb107cmV0dXJuIGl9fSksZS5nZXRDb21wdXRlZFN0eWxlPyhSdD1mdW5jdGlvbih0KXtyZXR1cm4gZS5nZXRDb21wdXRlZFN0eWxlKHQsbnVsbCl9LFd0PWZ1bmN0aW9uKGUsbixyKXt2YXIgaSxvLGEscz1yfHxSdChlKSx1PXM/cy5nZXRQcm9wZXJ0eVZhbHVlKG4pfHxzW25dOnQsbD1lLnN0eWxlO3JldHVybiBzJiYoXCJcIiE9PXV8fGIuY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfHwodT1iLnN0eWxlKGUsbikpLFl0LnRlc3QodSkmJlV0LnRlc3QobikmJihpPWwud2lkdGgsbz1sLm1pbldpZHRoLGE9bC5tYXhXaWR0aCxsLm1pbldpZHRoPWwubWF4V2lkdGg9bC53aWR0aD11LHU9cy53aWR0aCxsLndpZHRoPWksbC5taW5XaWR0aD1vLGwubWF4V2lkdGg9YSkpLHV9KTpvLmRvY3VtZW50RWxlbWVudC5jdXJyZW50U3R5bGUmJihSdD1mdW5jdGlvbihlKXtyZXR1cm4gZS5jdXJyZW50U3R5bGV9LFd0PWZ1bmN0aW9uKGUsbixyKXt2YXIgaSxvLGEscz1yfHxSdChlKSx1PXM/c1tuXTp0LGw9ZS5zdHlsZTtyZXR1cm4gbnVsbD09dSYmbCYmbFtuXSYmKHU9bFtuXSksWXQudGVzdCh1KSYmIXp0LnRlc3QobikmJihpPWwubGVmdCxvPWUucnVudGltZVN0eWxlLGE9byYmby5sZWZ0LGEmJihvLmxlZnQ9ZS5jdXJyZW50U3R5bGUubGVmdCksbC5sZWZ0PVwiZm9udFNpemVcIj09PW4/XCIxZW1cIjp1LHU9bC5waXhlbExlZnQrXCJweFwiLGwubGVmdD1pLGEmJihvLmxlZnQ9YSkpLFwiXCI9PT11P1wiYXV0b1wiOnV9KTtmdW5jdGlvbiBvbihlLHQsbil7dmFyIHI9VnQuZXhlYyh0KTtyZXR1cm4gcj9NYXRoLm1heCgwLHJbMV0tKG58fDApKSsoclsyXXx8XCJweFwiKTp0fWZ1bmN0aW9uIGFuKGUsdCxuLHIsaSl7dmFyIG89bj09PShyP1wiYm9yZGVyXCI6XCJjb250ZW50XCIpPzQ6XCJ3aWR0aFwiPT09dD8xOjAsYT0wO2Zvcig7ND5vO28rPTIpXCJtYXJnaW5cIj09PW4mJihhKz1iLmNzcyhlLG4rWnRbb10sITAsaSkpLHI/KFwiY29udGVudFwiPT09biYmKGEtPWIuY3NzKGUsXCJwYWRkaW5nXCIrWnRbb10sITAsaSkpLFwibWFyZ2luXCIhPT1uJiYoYS09Yi5jc3MoZSxcImJvcmRlclwiK1p0W29dK1wiV2lkdGhcIiwhMCxpKSkpOihhKz1iLmNzcyhlLFwicGFkZGluZ1wiK1p0W29dLCEwLGkpLFwicGFkZGluZ1wiIT09biYmKGErPWIuY3NzKGUsXCJib3JkZXJcIitadFtvXStcIldpZHRoXCIsITAsaSkpKTtyZXR1cm4gYX1mdW5jdGlvbiBzbihlLHQsbil7dmFyIHI9ITAsaT1cIndpZHRoXCI9PT10P2Uub2Zmc2V0V2lkdGg6ZS5vZmZzZXRIZWlnaHQsbz1SdChlKSxhPWIuc3VwcG9ydC5ib3hTaXppbmcmJlwiYm9yZGVyLWJveFwiPT09Yi5jc3MoZSxcImJveFNpemluZ1wiLCExLG8pO2lmKDA+PWl8fG51bGw9PWkpe2lmKGk9V3QoZSx0LG8pLCgwPml8fG51bGw9PWkpJiYoaT1lLnN0eWxlW3RdKSxZdC50ZXN0KGkpKXJldHVybiBpO3I9YSYmKGIuc3VwcG9ydC5ib3hTaXppbmdSZWxpYWJsZXx8aT09PWUuc3R5bGVbdF0pLGk9cGFyc2VGbG9hdChpKXx8MH1yZXR1cm4gaSthbihlLHQsbnx8KGE/XCJib3JkZXJcIjpcImNvbnRlbnRcIikscixvKStcInB4XCJ9ZnVuY3Rpb24gdW4oZSl7dmFyIHQ9byxuPUd0W2VdO3JldHVybiBufHwobj1sbihlLHQpLFwibm9uZVwiIT09biYmbnx8KFB0PShQdHx8YihcIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHdpZHRoPScwJyBoZWlnaHQ9JzAnLz5cIikuY3NzKFwiY3NzVGV4dFwiLFwiZGlzcGxheTpibG9jayAhaW1wb3J0YW50XCIpKS5hcHBlbmRUbyh0LmRvY3VtZW50RWxlbWVudCksdD0oUHRbMF0uY29udGVudFdpbmRvd3x8UHRbMF0uY29udGVudERvY3VtZW50KS5kb2N1bWVudCx0LndyaXRlKFwiPCFkb2N0eXBlIGh0bWw+PGh0bWw+PGJvZHk+XCIpLHQuY2xvc2UoKSxuPWxuKGUsdCksUHQuZGV0YWNoKCkpLEd0W2VdPW4pLG59ZnVuY3Rpb24gbG4oZSx0KXt2YXIgbj1iKHQuY3JlYXRlRWxlbWVudChlKSkuYXBwZW5kVG8odC5ib2R5KSxyPWIuY3NzKG5bMF0sXCJkaXNwbGF5XCIpO3JldHVybiBuLnJlbW92ZSgpLHJ9Yi5lYWNoKFtcImhlaWdodFwiLFwid2lkdGhcIl0sZnVuY3Rpb24oZSxuKXtiLmNzc0hvb2tzW25dPXtnZXQ6ZnVuY3Rpb24oZSxyLGkpe3JldHVybiByPzA9PT1lLm9mZnNldFdpZHRoJiZYdC50ZXN0KGIuY3NzKGUsXCJkaXNwbGF5XCIpKT9iLnN3YXAoZSxRdCxmdW5jdGlvbigpe3JldHVybiBzbihlLG4saSl9KTpzbihlLG4saSk6dH0sc2V0OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT1yJiZSdChlKTtyZXR1cm4gb24oZSx0LHI/YW4oZSxuLHIsYi5zdXBwb3J0LmJveFNpemluZyYmXCJib3JkZXItYm94XCI9PT1iLmNzcyhlLFwiYm94U2l6aW5nXCIsITEsaSksaSk6MCl9fX0pLGIuc3VwcG9ydC5vcGFjaXR5fHwoYi5jc3NIb29rcy5vcGFjaXR5PXtnZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gSXQudGVzdCgodCYmZS5jdXJyZW50U3R5bGU/ZS5jdXJyZW50U3R5bGUuZmlsdGVyOmUuc3R5bGUuZmlsdGVyKXx8XCJcIik/LjAxKnBhcnNlRmxvYXQoUmVnRXhwLiQxKStcIlwiOnQ/XCIxXCI6XCJcIn0sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5zdHlsZSxyPWUuY3VycmVudFN0eWxlLGk9Yi5pc051bWVyaWModCk/XCJhbHBoYShvcGFjaXR5PVwiKzEwMCp0K1wiKVwiOlwiXCIsbz1yJiZyLmZpbHRlcnx8bi5maWx0ZXJ8fFwiXCI7bi56b29tPTEsKHQ+PTF8fFwiXCI9PT10KSYmXCJcIj09PWIudHJpbShvLnJlcGxhY2UoJHQsXCJcIikpJiZuLnJlbW92ZUF0dHJpYnV0ZSYmKG4ucmVtb3ZlQXR0cmlidXRlKFwiZmlsdGVyXCIpLFwiXCI9PT10fHxyJiYhci5maWx0ZXIpfHwobi5maWx0ZXI9JHQudGVzdChvKT9vLnJlcGxhY2UoJHQsaSk6bytcIiBcIitpKX19KSxiKGZ1bmN0aW9uKCl7Yi5zdXBwb3J0LnJlbGlhYmxlTWFyZ2luUmlnaHR8fChiLmNzc0hvb2tzLm1hcmdpblJpZ2h0PXtnZXQ6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gbj9iLnN3YXAoZSx7ZGlzcGxheTpcImlubGluZS1ibG9ja1wifSxXdCxbZSxcIm1hcmdpblJpZ2h0XCJdKTp0fX0pLCFiLnN1cHBvcnQucGl4ZWxQb3NpdGlvbiYmYi5mbi5wb3NpdGlvbiYmYi5lYWNoKFtcInRvcFwiLFwibGVmdFwiXSxmdW5jdGlvbihlLG4pe2IuY3NzSG9va3Nbbl09e2dldDpmdW5jdGlvbihlLHIpe3JldHVybiByPyhyPVd0KGUsbiksWXQudGVzdChyKT9iKGUpLnBvc2l0aW9uKClbbl0rXCJweFwiOnIpOnR9fX0pfSksYi5leHByJiZiLmV4cHIuZmlsdGVycyYmKGIuZXhwci5maWx0ZXJzLmhpZGRlbj1mdW5jdGlvbihlKXtyZXR1cm4gMD49ZS5vZmZzZXRXaWR0aCYmMD49ZS5vZmZzZXRIZWlnaHR8fCFiLnN1cHBvcnQucmVsaWFibGVIaWRkZW5PZmZzZXRzJiZcIm5vbmVcIj09PShlLnN0eWxlJiZlLnN0eWxlLmRpc3BsYXl8fGIuY3NzKGUsXCJkaXNwbGF5XCIpKX0sYi5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihlKXtyZXR1cm4hYi5leHByLmZpbHRlcnMuaGlkZGVuKGUpfSksYi5lYWNoKHttYXJnaW46XCJcIixwYWRkaW5nOlwiXCIsYm9yZGVyOlwiV2lkdGhcIn0sZnVuY3Rpb24oZSx0KXtiLmNzc0hvb2tzW2UrdF09e2V4cGFuZDpmdW5jdGlvbihuKXt2YXIgcj0wLGk9e30sbz1cInN0cmluZ1wiPT10eXBlb2Ygbj9uLnNwbGl0KFwiIFwiKTpbbl07Zm9yKDs0PnI7cisrKWlbZStadFtyXSt0XT1vW3JdfHxvW3ItMl18fG9bMF07cmV0dXJuIGl9fSxVdC50ZXN0KGUpfHwoYi5jc3NIb29rc1tlK3RdLnNldD1vbil9KTt2YXIgY249LyUyMC9nLHBuPS9cXFtcXF0kLyxmbj0vXFxyP1xcbi9nLGRuPS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxobj0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7Yi5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBiLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGU9Yi5wcm9wKHRoaXMsXCJlbGVtZW50c1wiKTtyZXR1cm4gZT9iLm1ha2VBcnJheShlKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFiKHRoaXMpLmlzKFwiOmRpc2FibGVkXCIpJiZobi50ZXN0KHRoaXMubm9kZU5hbWUpJiYhZG4udGVzdChlKSYmKHRoaXMuY2hlY2tlZHx8IU50LnRlc3QoZSkpfSkubWFwKGZ1bmN0aW9uKGUsdCl7dmFyIG49Yih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09bj9udWxsOmIuaXNBcnJheShuKT9iLm1hcChuLGZ1bmN0aW9uKGUpe3JldHVybntuYW1lOnQubmFtZSx2YWx1ZTplLnJlcGxhY2UoZm4sXCJcXHJcXG5cIil9fSk6e25hbWU6dC5uYW1lLHZhbHVlOm4ucmVwbGFjZShmbixcIlxcclxcblwiKX19KS5nZXQoKX19KSxiLnBhcmFtPWZ1bmN0aW9uKGUsbil7dmFyIHIsaT1bXSxvPWZ1bmN0aW9uKGUsdCl7dD1iLmlzRnVuY3Rpb24odCk/dCgpOm51bGw9PXQ/XCJcIjp0LGlbaS5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChlKStcIj1cIitlbmNvZGVVUklDb21wb25lbnQodCl9O2lmKG49PT10JiYobj1iLmFqYXhTZXR0aW5ncyYmYi5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLGIuaXNBcnJheShlKXx8ZS5qcXVlcnkmJiFiLmlzUGxhaW5PYmplY3QoZSkpYi5lYWNoKGUsZnVuY3Rpb24oKXtvKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKHIgaW4gZSlnbihyLGVbcl0sbixvKTtyZXR1cm4gaS5qb2luKFwiJlwiKS5yZXBsYWNlKGNuLFwiK1wiKX07ZnVuY3Rpb24gZ24oZSx0LG4scil7dmFyIGk7aWYoYi5pc0FycmF5KHQpKWIuZWFjaCh0LGZ1bmN0aW9uKHQsaSl7bnx8cG4udGVzdChlKT9yKGUsaSk6Z24oZStcIltcIisoXCJvYmplY3RcIj09dHlwZW9mIGk/dDpcIlwiKStcIl1cIixpLG4scil9KTtlbHNlIGlmKG58fFwib2JqZWN0XCIhPT1iLnR5cGUodCkpcihlLHQpO2Vsc2UgZm9yKGkgaW4gdClnbihlK1wiW1wiK2krXCJdXCIsdFtpXSxuLHIpfWIuZWFjaChcImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnVcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oZSx0KXtiLmZuW3RdPWZ1bmN0aW9uKGUsbil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKHQsbnVsbCxlLG4pOnRoaXMudHJpZ2dlcih0KX19KSxiLmZuLmhvdmVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubW91c2VlbnRlcihlKS5tb3VzZWxlYXZlKHR8fGUpfTt2YXIgbW4seW4sdm49Yi5ub3coKSxibj0vXFw/Lyx4bj0vIy4qJC8sd249LyhbPyZdKV89W14mXSovLFRuPS9eKC4qPyk6WyBcXHRdKihbXlxcclxcbl0qKVxccj8kL2dtLE5uPS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLENuPS9eKD86R0VUfEhFQUQpJC8sa249L15cXC9cXC8vLEVuPS9eKFtcXHcuKy1dKzopKD86XFwvXFwvKFteXFwvPyM6XSopKD86OihcXGQrKXwpfCkvLFNuPWIuZm4ubG9hZCxBbj17fSxqbj17fSxEbj1cIiovXCIuY29uY2F0KFwiKlwiKTt0cnl7eW49YS5ocmVmfWNhdGNoKExuKXt5bj1vLmNyZWF0ZUVsZW1lbnQoXCJhXCIpLHluLmhyZWY9XCJcIix5bj15bi5ocmVmfW1uPUVuLmV4ZWMoeW4udG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIEhuKGUpe3JldHVybiBmdW5jdGlvbih0LG4pe1wic3RyaW5nXCIhPXR5cGVvZiB0JiYobj10LHQ9XCIqXCIpO3ZhciByLGk9MCxvPXQudG9Mb3dlckNhc2UoKS5tYXRjaCh3KXx8W107aWYoYi5pc0Z1bmN0aW9uKG4pKXdoaWxlKHI9b1tpKytdKVwiK1wiPT09clswXT8ocj1yLnNsaWNlKDEpfHxcIipcIiwoZVtyXT1lW3JdfHxbXSkudW5zaGlmdChuKSk6KGVbcl09ZVtyXXx8W10pLnB1c2gobil9fWZ1bmN0aW9uIHFuKGUsbixyLGkpe3ZhciBvPXt9LGE9ZT09PWpuO2Z1bmN0aW9uIHModSl7dmFyIGw7cmV0dXJuIG9bdV09ITAsYi5lYWNoKGVbdV18fFtdLGZ1bmN0aW9uKGUsdSl7dmFyIGM9dShuLHIsaSk7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGN8fGF8fG9bY10/YT8hKGw9Yyk6dDoobi5kYXRhVHlwZXMudW5zaGlmdChjKSxzKGMpLCExKX0pLGx9cmV0dXJuIHMobi5kYXRhVHlwZXNbMF0pfHwhb1tcIipcIl0mJnMoXCIqXCIpfWZ1bmN0aW9uIE1uKGUsbil7dmFyIHIsaSxvPWIuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3IoaSBpbiBuKW5baV0hPT10JiYoKG9baV0/ZTpyfHwocj17fSkpW2ldPW5baV0pO3JldHVybiByJiZiLmV4dGVuZCghMCxlLHIpLGV9Yi5mbi5sb2FkPWZ1bmN0aW9uKGUsbixyKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSYmU24pcmV0dXJuIFNuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgaSxvLGEscz10aGlzLHU9ZS5pbmRleE9mKFwiIFwiKTtyZXR1cm4gdT49MCYmKGk9ZS5zbGljZSh1LGUubGVuZ3RoKSxlPWUuc2xpY2UoMCx1KSksYi5pc0Z1bmN0aW9uKG4pPyhyPW4sbj10KTpuJiZcIm9iamVjdFwiPT10eXBlb2YgbiYmKGE9XCJQT1NUXCIpLHMubGVuZ3RoPjAmJmIuYWpheCh7dXJsOmUsdHlwZTphLGRhdGFUeXBlOlwiaHRtbFwiLGRhdGE6bn0pLmRvbmUoZnVuY3Rpb24oZSl7bz1hcmd1bWVudHMscy5odG1sKGk/YihcIjxkaXY+XCIpLmFwcGVuZChiLnBhcnNlSFRNTChlKSkuZmluZChpKTplKX0pLmNvbXBsZXRlKHImJmZ1bmN0aW9uKGUsdCl7cy5lYWNoKHIsb3x8W2UucmVzcG9uc2VUZXh0LHQsZV0pfSksdGhpc30sYi5lYWNoKFtcImFqYXhTdGFydFwiLFwiYWpheFN0b3BcIixcImFqYXhDb21wbGV0ZVwiLFwiYWpheEVycm9yXCIsXCJhamF4U3VjY2Vzc1wiLFwiYWpheFNlbmRcIl0sZnVuY3Rpb24oZSx0KXtiLmZuW3RdPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9uKHQsZSl9fSksYi5lYWNoKFtcImdldFwiLFwicG9zdFwiXSxmdW5jdGlvbihlLG4pe2Jbbl09ZnVuY3Rpb24oZSxyLGksbyl7cmV0dXJuIGIuaXNGdW5jdGlvbihyKSYmKG89b3x8aSxpPXIscj10KSxiLmFqYXgoe3VybDplLHR5cGU6bixkYXRhVHlwZTpvLGRhdGE6cixzdWNjZXNzOml9KX19KSxiLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6eW4sdHlwZTpcIkdFVFwiLGlzTG9jYWw6Tm4udGVzdChtblsxXSksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOlwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04XCIsYWNjZXB0czp7XCIqXCI6RG4sdGV4dDpcInRleHQvcGxhaW5cIixodG1sOlwidGV4dC9odG1sXCIseG1sOlwiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbFwiLGpzb246XCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHRcIn0sY29udGVudHM6e3htbDoveG1sLyxodG1sOi9odG1sLyxqc29uOi9qc29uL30scmVzcG9uc2VGaWVsZHM6e3htbDpcInJlc3BvbnNlWE1MXCIsdGV4dDpcInJlc3BvbnNlVGV4dFwifSxjb252ZXJ0ZXJzOntcIiogdGV4dFwiOmUuU3RyaW5nLFwidGV4dCBodG1sXCI6ITAsXCJ0ZXh0IGpzb25cIjpiLnBhcnNlSlNPTixcInRleHQgeG1sXCI6Yi5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e3VybDohMCxjb250ZXh0OiEwfX0sYWpheFNldHVwOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/TW4oTW4oZSxiLmFqYXhTZXR0aW5ncyksdCk6TW4oYi5hamF4U2V0dGluZ3MsZSl9LGFqYXhQcmVmaWx0ZXI6SG4oQW4pLGFqYXhUcmFuc3BvcnQ6SG4oam4pLGFqYXg6ZnVuY3Rpb24oZSxuKXtcIm9iamVjdFwiPT10eXBlb2YgZSYmKG49ZSxlPXQpLG49bnx8e307dmFyIHIsaSxvLGEscyx1LGwsYyxwPWIuYWpheFNldHVwKHt9LG4pLGY9cC5jb250ZXh0fHxwLGQ9cC5jb250ZXh0JiYoZi5ub2RlVHlwZXx8Zi5qcXVlcnkpP2IoZik6Yi5ldmVudCxoPWIuRGVmZXJyZWQoKSxnPWIuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksbT1wLnN0YXR1c0NvZGV8fHt9LHk9e30sdj17fSx4PTAsVD1cImNhbmNlbGVkXCIsTj17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGUpe3ZhciB0O2lmKDI9PT14KXtpZighYyl7Yz17fTt3aGlsZSh0PVRuLmV4ZWMoYSkpY1t0WzFdLnRvTG93ZXJDYXNlKCldPXRbMl19dD1jW2UudG9Mb3dlckNhc2UoKV19cmV0dXJuIG51bGw9PXQ/bnVsbDp0fSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gMj09PXg/YTpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS50b0xvd2VyQ2FzZSgpO3JldHVybiB4fHwoZT12W25dPXZbbl18fGUseVtlXT10KSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGUpe3JldHVybiB4fHwocC5taW1lVHlwZT1lKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGUpe3ZhciB0O2lmKGUpaWYoMj54KWZvcih0IGluIGUpbVt0XT1bbVt0XSxlW3RdXTtlbHNlIE4uYWx3YXlzKGVbTi5zdGF0dXNdKTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZXx8VDtyZXR1cm4gbCYmbC5hYm9ydCh0KSxrKDAsdCksdGhpc319O2lmKGgucHJvbWlzZShOKS5jb21wbGV0ZT1nLmFkZCxOLnN1Y2Nlc3M9Ti5kb25lLE4uZXJyb3I9Ti5mYWlsLHAudXJsPSgoZXx8cC51cmx8fHluKStcIlwiKS5yZXBsYWNlKHhuLFwiXCIpLnJlcGxhY2Uoa24sbW5bMV0rXCIvL1wiKSxwLnR5cGU9bi5tZXRob2R8fG4udHlwZXx8cC5tZXRob2R8fHAudHlwZSxwLmRhdGFUeXBlcz1iLnRyaW0ocC5kYXRhVHlwZXx8XCIqXCIpLnRvTG93ZXJDYXNlKCkubWF0Y2godyl8fFtcIlwiXSxudWxsPT1wLmNyb3NzRG9tYWluJiYocj1Fbi5leGVjKHAudXJsLnRvTG93ZXJDYXNlKCkpLHAuY3Jvc3NEb21haW49ISghcnx8clsxXT09PW1uWzFdJiZyWzJdPT09bW5bMl0mJihyWzNdfHwoXCJodHRwOlwiPT09clsxXT84MDo0NDMpKT09KG1uWzNdfHwoXCJodHRwOlwiPT09bW5bMV0/ODA6NDQzKSkpKSxwLmRhdGEmJnAucHJvY2Vzc0RhdGEmJlwic3RyaW5nXCIhPXR5cGVvZiBwLmRhdGEmJihwLmRhdGE9Yi5wYXJhbShwLmRhdGEscC50cmFkaXRpb25hbCkpLHFuKEFuLHAsbixOKSwyPT09eClyZXR1cm4gTjt1PXAuZ2xvYmFsLHUmJjA9PT1iLmFjdGl2ZSsrJiZiLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RhcnRcIikscC50eXBlPXAudHlwZS50b1VwcGVyQ2FzZSgpLHAuaGFzQ29udGVudD0hQ24udGVzdChwLnR5cGUpLG89cC51cmwscC5oYXNDb250ZW50fHwocC5kYXRhJiYobz1wLnVybCs9KGJuLnRlc3Qobyk/XCImXCI6XCI/XCIpK3AuZGF0YSxkZWxldGUgcC5kYXRhKSxwLmNhY2hlPT09ITEmJihwLnVybD13bi50ZXN0KG8pP28ucmVwbGFjZSh3bixcIiQxXz1cIit2bisrKTpvKyhibi50ZXN0KG8pP1wiJlwiOlwiP1wiKStcIl89XCIrdm4rKykpLHAuaWZNb2RpZmllZCYmKGIubGFzdE1vZGlmaWVkW29dJiZOLnNldFJlcXVlc3RIZWFkZXIoXCJJZi1Nb2RpZmllZC1TaW5jZVwiLGIubGFzdE1vZGlmaWVkW29dKSxiLmV0YWdbb10mJk4uc2V0UmVxdWVzdEhlYWRlcihcIklmLU5vbmUtTWF0Y2hcIixiLmV0YWdbb10pKSwocC5kYXRhJiZwLmhhc0NvbnRlbnQmJnAuY29udGVudFR5cGUhPT0hMXx8bi5jb250ZW50VHlwZSkmJk4uc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLHAuY29udGVudFR5cGUpLE4uc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLHAuZGF0YVR5cGVzWzBdJiZwLmFjY2VwdHNbcC5kYXRhVHlwZXNbMF1dP3AuYWNjZXB0c1twLmRhdGFUeXBlc1swXV0rKFwiKlwiIT09cC5kYXRhVHlwZXNbMF0/XCIsIFwiK0RuK1wiOyBxPTAuMDFcIjpcIlwiKTpwLmFjY2VwdHNbXCIqXCJdKTtmb3IoaSBpbiBwLmhlYWRlcnMpTi5zZXRSZXF1ZXN0SGVhZGVyKGkscC5oZWFkZXJzW2ldKTtpZihwLmJlZm9yZVNlbmQmJihwLmJlZm9yZVNlbmQuY2FsbChmLE4scCk9PT0hMXx8Mj09PXgpKXJldHVybiBOLmFib3J0KCk7VD1cImFib3J0XCI7Zm9yKGkgaW57c3VjY2VzczoxLGVycm9yOjEsY29tcGxldGU6MX0pTltpXShwW2ldKTtpZihsPXFuKGpuLHAsbixOKSl7Ti5yZWFkeVN0YXRlPTEsdSYmZC50cmlnZ2VyKFwiYWpheFNlbmRcIixbTixwXSkscC5hc3luYyYmcC50aW1lb3V0PjAmJihzPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtOLmFib3J0KFwidGltZW91dFwiKX0scC50aW1lb3V0KSk7dHJ5e3g9MSxsLnNlbmQoeSxrKX1jYXRjaChDKXtpZighKDI+eCkpdGhyb3cgQztrKC0xLEMpfX1lbHNlIGsoLTEsXCJObyBUcmFuc3BvcnRcIik7ZnVuY3Rpb24gayhlLG4scixpKXt2YXIgYyx5LHYsdyxULEM9bjsyIT09eCYmKHg9MixzJiZjbGVhclRpbWVvdXQocyksbD10LGE9aXx8XCJcIixOLnJlYWR5U3RhdGU9ZT4wPzQ6MCxyJiYodz1fbihwLE4scikpLGU+PTIwMCYmMzAwPmV8fDMwND09PWU/KHAuaWZNb2RpZmllZCYmKFQ9Ti5nZXRSZXNwb25zZUhlYWRlcihcIkxhc3QtTW9kaWZpZWRcIiksVCYmKGIubGFzdE1vZGlmaWVkW29dPVQpLFQ9Ti5nZXRSZXNwb25zZUhlYWRlcihcImV0YWdcIiksVCYmKGIuZXRhZ1tvXT1UKSksMjA0PT09ZT8oYz0hMCxDPVwibm9jb250ZW50XCIpOjMwND09PWU/KGM9ITAsQz1cIm5vdG1vZGlmaWVkXCIpOihjPUZuKHAsdyksQz1jLnN0YXRlLHk9Yy5kYXRhLHY9Yy5lcnJvcixjPSF2KSk6KHY9QywoZXx8IUMpJiYoQz1cImVycm9yXCIsMD5lJiYoZT0wKSkpLE4uc3RhdHVzPWUsTi5zdGF0dXNUZXh0PShufHxDKStcIlwiLGM/aC5yZXNvbHZlV2l0aChmLFt5LEMsTl0pOmgucmVqZWN0V2l0aChmLFtOLEMsdl0pLE4uc3RhdHVzQ29kZShtKSxtPXQsdSYmZC50cmlnZ2VyKGM/XCJhamF4U3VjY2Vzc1wiOlwiYWpheEVycm9yXCIsW04scCxjP3k6dl0pLGcuZmlyZVdpdGgoZixbTixDXSksdSYmKGQudHJpZ2dlcihcImFqYXhDb21wbGV0ZVwiLFtOLHBdKSwtLWIuYWN0aXZlfHxiLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RvcFwiKSkpfXJldHVybiBOfSxnZXRTY3JpcHQ6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gYi5nZXQoZSx0LG4sXCJzY3JpcHRcIil9LGdldEpTT046ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBiLmdldChlLHQsbixcImpzb25cIil9fSk7ZnVuY3Rpb24gX24oZSxuLHIpe3ZhciBpLG8sYSxzLHU9ZS5jb250ZW50cyxsPWUuZGF0YVR5cGVzLGM9ZS5yZXNwb25zZUZpZWxkcztmb3IocyBpbiBjKXMgaW4gciYmKG5bY1tzXV09cltzXSk7d2hpbGUoXCIqXCI9PT1sWzBdKWwuc2hpZnQoKSxvPT09dCYmKG89ZS5taW1lVHlwZXx8bi5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSk7aWYobylmb3IocyBpbiB1KWlmKHVbc10mJnVbc10udGVzdChvKSl7bC51bnNoaWZ0KHMpO2JyZWFrfWlmKGxbMF1pbiByKWE9bFswXTtlbHNle2ZvcihzIGluIHIpe2lmKCFsWzBdfHxlLmNvbnZlcnRlcnNbcytcIiBcIitsWzBdXSl7YT1zO2JyZWFrfWl8fChpPXMpfWE9YXx8aX1yZXR1cm4gYT8oYSE9PWxbMF0mJmwudW5zaGlmdChhKSxyW2FdKTp0fWZ1bmN0aW9uIEZuKGUsdCl7dmFyIG4scixpLG8sYT17fSxzPTAsdT1lLmRhdGFUeXBlcy5zbGljZSgpLGw9dVswXTtpZihlLmRhdGFGaWx0ZXImJih0PWUuZGF0YUZpbHRlcih0LGUuZGF0YVR5cGUpKSx1WzFdKWZvcihpIGluIGUuY29udmVydGVycylhW2kudG9Mb3dlckNhc2UoKV09ZS5jb252ZXJ0ZXJzW2ldO2Zvcig7cj11Wysrc107KWlmKFwiKlwiIT09cil7aWYoXCIqXCIhPT1sJiZsIT09cil7aWYoaT1hW2wrXCIgXCIrcl18fGFbXCIqIFwiK3JdLCFpKWZvcihuIGluIGEpaWYobz1uLnNwbGl0KFwiIFwiKSxvWzFdPT09ciYmKGk9YVtsK1wiIFwiK29bMF1dfHxhW1wiKiBcIitvWzBdXSkpe2k9PT0hMD9pPWFbbl06YVtuXSE9PSEwJiYocj1vWzBdLHUuc3BsaWNlKHMtLSwwLHIpKTticmVha31pZihpIT09ITApaWYoaSYmZVtcInRocm93c1wiXSl0PWkodCk7ZWxzZSB0cnl7dD1pKHQpfWNhdGNoKGMpe3JldHVybntzdGF0ZTpcInBhcnNlcmVycm9yXCIsZXJyb3I6aT9jOlwiTm8gY29udmVyc2lvbiBmcm9tIFwiK2wrXCIgdG8gXCIrcn19fWw9cn1yZXR1cm57c3RhdGU6XCJzdWNjZXNzXCIsZGF0YTp0fX1iLmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OlwidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHRcIn0sY29udGVudHM6e3NjcmlwdDovKD86amF2YXxlY21hKXNjcmlwdC99LGNvbnZlcnRlcnM6e1widGV4dCBzY3JpcHRcIjpmdW5jdGlvbihlKXtyZXR1cm4gYi5nbG9iYWxFdmFsKGUpLGV9fX0pLGIuYWpheFByZWZpbHRlcihcInNjcmlwdFwiLGZ1bmN0aW9uKGUpe2UuY2FjaGU9PT10JiYoZS5jYWNoZT0hMSksZS5jcm9zc0RvbWFpbiYmKGUudHlwZT1cIkdFVFwiLGUuZ2xvYmFsPSExKX0pLGIuYWpheFRyYW5zcG9ydChcInNjcmlwdFwiLGZ1bmN0aW9uKGUpe2lmKGUuY3Jvc3NEb21haW4pe3ZhciBuLHI9by5oZWFkfHxiKFwiaGVhZFwiKVswXXx8by5kb2N1bWVudEVsZW1lbnQ7cmV0dXJue3NlbmQ6ZnVuY3Rpb24odCxpKXtuPW8uY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxuLmFzeW5jPSEwLGUuc2NyaXB0Q2hhcnNldCYmKG4uY2hhcnNldD1lLnNjcmlwdENoYXJzZXQpLG4uc3JjPWUudXJsLG4ub25sb2FkPW4ub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKGUsdCl7KHR8fCFuLnJlYWR5U3RhdGV8fC9sb2FkZWR8Y29tcGxldGUvLnRlc3Qobi5yZWFkeVN0YXRlKSkmJihuLm9ubG9hZD1uLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLG4ucGFyZW50Tm9kZSYmbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG4pLG49bnVsbCx0fHxpKDIwMCxcInN1Y2Nlc3NcIikpfSxyLmluc2VydEJlZm9yZShuLHIuZmlyc3RDaGlsZCl9LGFib3J0OmZ1bmN0aW9uKCl7biYmbi5vbmxvYWQodCwhMCl9fX19KTt2YXIgT249W10sQm49Lyg9KVxcPyg/PSZ8JCl8XFw/XFw/LztiLmFqYXhTZXR1cCh7anNvbnA6XCJjYWxsYmFja1wiLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgZT1Pbi5wb3AoKXx8Yi5leHBhbmRvK1wiX1wiK3ZuKys7cmV0dXJuIHRoaXNbZV09ITAsZX19KSxiLmFqYXhQcmVmaWx0ZXIoXCJqc29uIGpzb25wXCIsZnVuY3Rpb24obixyLGkpe3ZhciBvLGEscyx1PW4uanNvbnAhPT0hMSYmKEJuLnRlc3Qobi51cmwpP1widXJsXCI6XCJzdHJpbmdcIj09dHlwZW9mIG4uZGF0YSYmIShuLmNvbnRlbnRUeXBlfHxcIlwiKS5pbmRleE9mKFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpJiZCbi50ZXN0KG4uZGF0YSkmJlwiZGF0YVwiKTtyZXR1cm4gdXx8XCJqc29ucFwiPT09bi5kYXRhVHlwZXNbMF0/KG89bi5qc29ucENhbGxiYWNrPWIuaXNGdW5jdGlvbihuLmpzb25wQ2FsbGJhY2spP24uanNvbnBDYWxsYmFjaygpOm4uanNvbnBDYWxsYmFjayx1P25bdV09blt1XS5yZXBsYWNlKEJuLFwiJDFcIitvKTpuLmpzb25wIT09ITEmJihuLnVybCs9KGJuLnRlc3Qobi51cmwpP1wiJlwiOlwiP1wiKStuLmpzb25wK1wiPVwiK28pLG4uY29udmVydGVyc1tcInNjcmlwdCBqc29uXCJdPWZ1bmN0aW9uKCl7cmV0dXJuIHN8fGIuZXJyb3IobytcIiB3YXMgbm90IGNhbGxlZFwiKSxzWzBdfSxuLmRhdGFUeXBlc1swXT1cImpzb25cIixhPWVbb10sZVtvXT1mdW5jdGlvbigpe3M9YXJndW1lbnRzfSxpLmFsd2F5cyhmdW5jdGlvbigpe2Vbb109YSxuW29dJiYobi5qc29ucENhbGxiYWNrPXIuanNvbnBDYWxsYmFjayxPbi5wdXNoKG8pKSxzJiZiLmlzRnVuY3Rpb24oYSkmJmEoc1swXSkscz1hPXR9KSxcInNjcmlwdFwiKTp0fSk7dmFyIFBuLFJuLFduPTAsJG49ZS5BY3RpdmVYT2JqZWN0JiZmdW5jdGlvbigpe3ZhciBlO2ZvcihlIGluIFBuKVBuW2VdKHQsITApfTtmdW5jdGlvbiBJbigpe3RyeXtyZXR1cm4gbmV3IGUuWE1MSHR0cFJlcXVlc3R9Y2F0Y2godCl7fX1mdW5jdGlvbiB6bigpe3RyeXtyZXR1cm4gbmV3IGUuQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxIVFRQXCIpfWNhdGNoKHQpe319Yi5hamF4U2V0dGluZ3MueGhyPWUuQWN0aXZlWE9iamVjdD9mdW5jdGlvbigpe3JldHVybiF0aGlzLmlzTG9jYWwmJkluKCl8fHpuKCl9OkluLFJuPWIuYWpheFNldHRpbmdzLnhocigpLGIuc3VwcG9ydC5jb3JzPSEhUm4mJlwid2l0aENyZWRlbnRpYWxzXCJpbiBSbixSbj1iLnN1cHBvcnQuYWpheD0hIVJuLFJuJiZiLmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24obil7aWYoIW4uY3Jvc3NEb21haW58fGIuc3VwcG9ydC5jb3JzKXt2YXIgcjtyZXR1cm57c2VuZDpmdW5jdGlvbihpLG8pe3ZhciBhLHMsdT1uLnhocigpO2lmKG4udXNlcm5hbWU/dS5vcGVuKG4udHlwZSxuLnVybCxuLmFzeW5jLG4udXNlcm5hbWUsbi5wYXNzd29yZCk6dS5vcGVuKG4udHlwZSxuLnVybCxuLmFzeW5jKSxuLnhockZpZWxkcylmb3IocyBpbiBuLnhockZpZWxkcyl1W3NdPW4ueGhyRmllbGRzW3NdO24ubWltZVR5cGUmJnUub3ZlcnJpZGVNaW1lVHlwZSYmdS5vdmVycmlkZU1pbWVUeXBlKG4ubWltZVR5cGUpLG4uY3Jvc3NEb21haW58fGlbXCJYLVJlcXVlc3RlZC1XaXRoXCJdfHwoaVtcIlgtUmVxdWVzdGVkLVdpdGhcIl09XCJYTUxIdHRwUmVxdWVzdFwiKTt0cnl7Zm9yKHMgaW4gaSl1LnNldFJlcXVlc3RIZWFkZXIocyxpW3NdKX1jYXRjaChsKXt9dS5zZW5kKG4uaGFzQ29udGVudCYmbi5kYXRhfHxudWxsKSxyPWZ1bmN0aW9uKGUsaSl7dmFyIHMsbCxjLHA7dHJ5e2lmKHImJihpfHw0PT09dS5yZWFkeVN0YXRlKSlpZihyPXQsYSYmKHUub25yZWFkeXN0YXRlY2hhbmdlPWIubm9vcCwkbiYmZGVsZXRlIFBuW2FdKSxpKTQhPT11LnJlYWR5U3RhdGUmJnUuYWJvcnQoKTtlbHNle3A9e30scz11LnN0YXR1cyxsPXUuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCksXCJzdHJpbmdcIj09dHlwZW9mIHUucmVzcG9uc2VUZXh0JiYocC50ZXh0PXUucmVzcG9uc2VUZXh0KTt0cnl7Yz11LnN0YXR1c1RleHR9Y2F0Y2goZil7Yz1cIlwifXN8fCFuLmlzTG9jYWx8fG4uY3Jvc3NEb21haW4/MTIyMz09PXMmJihzPTIwNCk6cz1wLnRleHQ/MjAwOjQwNH19Y2F0Y2goZCl7aXx8bygtMSxkKX1wJiZvKHMsYyxwLGwpfSxuLmFzeW5jPzQ9PT11LnJlYWR5U3RhdGU/c2V0VGltZW91dChyKTooYT0rK1duLCRuJiYoUG58fChQbj17fSxiKGUpLnVubG9hZCgkbikpLFBuW2FdPXIpLHUub25yZWFkeXN0YXRlY2hhbmdlPXIpOnIoKX0sYWJvcnQ6ZnVuY3Rpb24oKXtyJiZyKHQsITApfX19fSk7dmFyIFhuLFVuLFZuPS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxZbj1SZWdFeHAoXCJeKD86KFsrLV0pPXwpKFwiK3grXCIpKFthLXolXSopJFwiLFwiaVwiKSxKbj0vcXVldWVIb29rcyQvLEduPVtucl0sUW49e1wiKlwiOltmdW5jdGlvbihlLHQpe3ZhciBuLHIsaT10aGlzLmNyZWF0ZVR3ZWVuKGUsdCksbz1Zbi5leGVjKHQpLGE9aS5jdXIoKSxzPSthfHwwLHU9MSxsPTIwO2lmKG8pe2lmKG49K29bMl0scj1vWzNdfHwoYi5jc3NOdW1iZXJbZV0/XCJcIjpcInB4XCIpLFwicHhcIiE9PXImJnMpe3M9Yi5jc3MoaS5lbGVtLGUsITApfHxufHwxO2RvIHU9dXx8XCIuNVwiLHMvPXUsYi5zdHlsZShpLmVsZW0sZSxzK3IpO3doaWxlKHUhPT0odT1pLmN1cigpL2EpJiYxIT09dSYmLS1sKX1pLnVuaXQ9cixpLnN0YXJ0PXMsaS5lbmQ9b1sxXT9zKyhvWzFdKzEpKm46bn1yZXR1cm4gaX1dfTtmdW5jdGlvbiBLbigpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7WG49dH0pLFhuPWIubm93KCl9ZnVuY3Rpb24gWm4oZSx0KXtiLmVhY2godCxmdW5jdGlvbih0LG4pe3ZhciByPShRblt0XXx8W10pLmNvbmNhdChRbltcIipcIl0pLGk9MCxvPXIubGVuZ3RoO2Zvcig7bz5pO2krKylpZihyW2ldLmNhbGwoZSx0LG4pKXJldHVybn0pfWZ1bmN0aW9uIGVyKGUsdCxuKXt2YXIgcixpLG89MCxhPUduLmxlbmd0aCxzPWIuRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgdS5lbGVtfSksdT1mdW5jdGlvbigpe2lmKGkpcmV0dXJuITE7dmFyIHQ9WG58fEtuKCksbj1NYXRoLm1heCgwLGwuc3RhcnRUaW1lK2wuZHVyYXRpb24tdCkscj1uL2wuZHVyYXRpb258fDAsbz0xLXIsYT0wLHU9bC50d2VlbnMubGVuZ3RoO2Zvcig7dT5hO2ErKylsLnR3ZWVuc1thXS5ydW4obyk7cmV0dXJuIHMubm90aWZ5V2l0aChlLFtsLG8sbl0pLDE+byYmdT9uOihzLnJlc29sdmVXaXRoKGUsW2xdKSwhMSl9LGw9cy5wcm9taXNlKHtlbGVtOmUscHJvcHM6Yi5leHRlbmQoe30sdCksb3B0czpiLmV4dGVuZCghMCx7c3BlY2lhbEVhc2luZzp7fX0sbiksb3JpZ2luYWxQcm9wZXJ0aWVzOnQsb3JpZ2luYWxPcHRpb25zOm4sc3RhcnRUaW1lOlhufHxLbigpLGR1cmF0aW9uOm4uZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKHQsbil7dmFyIHI9Yi5Ud2VlbihlLGwub3B0cyx0LG4sbC5vcHRzLnNwZWNpYWxFYXNpbmdbdF18fGwub3B0cy5lYXNpbmcpO3JldHVybiBsLnR3ZWVucy5wdXNoKHIpLHJ9LHN0b3A6ZnVuY3Rpb24odCl7dmFyIG49MCxyPXQ/bC50d2VlbnMubGVuZ3RoOjA7aWYoaSlyZXR1cm4gdGhpcztmb3IoaT0hMDtyPm47bisrKWwudHdlZW5zW25dLnJ1bigxKTtyZXR1cm4gdD9zLnJlc29sdmVXaXRoKGUsW2wsdF0pOnMucmVqZWN0V2l0aChlLFtsLHRdKSx0aGlzfX0pLGM9bC5wcm9wcztmb3IodHIoYyxsLm9wdHMuc3BlY2lhbEVhc2luZyk7YT5vO28rKylpZihyPUduW29dLmNhbGwobCxlLGMsbC5vcHRzKSlyZXR1cm4gcjtyZXR1cm4gWm4obCxjKSxiLmlzRnVuY3Rpb24obC5vcHRzLnN0YXJ0KSYmbC5vcHRzLnN0YXJ0LmNhbGwoZSxsKSxiLmZ4LnRpbWVyKGIuZXh0ZW5kKHUse2VsZW06ZSxhbmltOmwscXVldWU6bC5vcHRzLnF1ZXVlfSkpLGwucHJvZ3Jlc3MobC5vcHRzLnByb2dyZXNzKS5kb25lKGwub3B0cy5kb25lLGwub3B0cy5jb21wbGV0ZSkuZmFpbChsLm9wdHMuZmFpbCkuYWx3YXlzKGwub3B0cy5hbHdheXMpfWZ1bmN0aW9uIHRyKGUsdCl7dmFyIG4scixpLG8sYTtmb3IoaSBpbiBlKWlmKHI9Yi5jYW1lbENhc2UoaSksbz10W3JdLG49ZVtpXSxiLmlzQXJyYXkobikmJihvPW5bMV0sbj1lW2ldPW5bMF0pLGkhPT1yJiYoZVtyXT1uLGRlbGV0ZSBlW2ldKSxhPWIuY3NzSG9va3Nbcl0sYSYmXCJleHBhbmRcImluIGEpe249YS5leHBhbmQobiksZGVsZXRlIGVbcl07Zm9yKGkgaW4gbilpIGluIGV8fChlW2ldPW5baV0sdFtpXT1vKX1lbHNlIHRbcl09b31iLkFuaW1hdGlvbj1iLmV4dGVuZChlcix7dHdlZW5lcjpmdW5jdGlvbihlLHQpe2IuaXNGdW5jdGlvbihlKT8odD1lLGU9W1wiKlwiXSk6ZT1lLnNwbGl0KFwiIFwiKTt2YXIgbixyPTAsaT1lLmxlbmd0aDtmb3IoO2k+cjtyKyspbj1lW3JdLFFuW25dPVFuW25dfHxbXSxRbltuXS51bnNoaWZ0KHQpfSxwcmVmaWx0ZXI6ZnVuY3Rpb24oZSx0KXt0P0duLnVuc2hpZnQoZSk6R24ucHVzaChlKX19KTtmdW5jdGlvbiBucihlLHQsbil7dmFyIHIsaSxvLGEscyx1LGwsYyxwLGY9dGhpcyxkPWUuc3R5bGUsaD17fSxnPVtdLG09ZS5ub2RlVHlwZSYmbm4oZSk7bi5xdWV1ZXx8KGM9Yi5fcXVldWVIb29rcyhlLFwiZnhcIiksbnVsbD09Yy51bnF1ZXVlZCYmKGMudW5xdWV1ZWQ9MCxwPWMuZW1wdHkuZmlyZSxjLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtjLnVucXVldWVkfHxwKCl9KSxjLnVucXVldWVkKyssZi5hbHdheXMoZnVuY3Rpb24oKXtmLmFsd2F5cyhmdW5jdGlvbigpe2MudW5xdWV1ZWQtLSxiLnF1ZXVlKGUsXCJmeFwiKS5sZW5ndGh8fGMuZW1wdHkuZmlyZSgpfSl9KSksMT09PWUubm9kZVR5cGUmJihcImhlaWdodFwiaW4gdHx8XCJ3aWR0aFwiaW4gdCkmJihuLm92ZXJmbG93PVtkLm92ZXJmbG93LGQub3ZlcmZsb3dYLGQub3ZlcmZsb3dZXSxcImlubGluZVwiPT09Yi5jc3MoZSxcImRpc3BsYXlcIikmJlwibm9uZVwiPT09Yi5jc3MoZSxcImZsb2F0XCIpJiYoYi5zdXBwb3J0LmlubGluZUJsb2NrTmVlZHNMYXlvdXQmJlwiaW5saW5lXCIhPT11bihlLm5vZGVOYW1lKT9kLnpvb209MTpkLmRpc3BsYXk9XCJpbmxpbmUtYmxvY2tcIikpLG4ub3ZlcmZsb3cmJihkLm92ZXJmbG93PVwiaGlkZGVuXCIsYi5zdXBwb3J0LnNocmlua1dyYXBCbG9ja3N8fGYuYWx3YXlzKGZ1bmN0aW9uKCl7ZC5vdmVyZmxvdz1uLm92ZXJmbG93WzBdLGQub3ZlcmZsb3dYPW4ub3ZlcmZsb3dbMV0sZC5vdmVyZmxvd1k9bi5vdmVyZmxvd1syXX0pKTtmb3IoaSBpbiB0KWlmKGE9dFtpXSxWbi5leGVjKGEpKXtpZihkZWxldGUgdFtpXSx1PXV8fFwidG9nZ2xlXCI9PT1hLGE9PT0obT9cImhpZGVcIjpcInNob3dcIikpY29udGludWU7Zy5wdXNoKGkpfWlmKG89Zy5sZW5ndGgpe3M9Yi5fZGF0YShlLFwiZnhzaG93XCIpfHxiLl9kYXRhKGUsXCJmeHNob3dcIix7fSksXCJoaWRkZW5cImluIHMmJihtPXMuaGlkZGVuKSx1JiYocy5oaWRkZW49IW0pLG0/YihlKS5zaG93KCk6Zi5kb25lKGZ1bmN0aW9uKCl7YihlKS5oaWRlKCl9KSxmLmRvbmUoZnVuY3Rpb24oKXt2YXIgdDtiLl9yZW1vdmVEYXRhKGUsXCJmeHNob3dcIik7Zm9yKHQgaW4gaCliLnN0eWxlKGUsdCxoW3RdKX0pO2ZvcihpPTA7bz5pO2krKylyPWdbaV0sbD1mLmNyZWF0ZVR3ZWVuKHIsbT9zW3JdOjApLGhbcl09c1tyXXx8Yi5zdHlsZShlLHIpLHIgaW4gc3x8KHNbcl09bC5zdGFydCxtJiYobC5lbmQ9bC5zdGFydCxsLnN0YXJ0PVwid2lkdGhcIj09PXJ8fFwiaGVpZ2h0XCI9PT1yPzE6MCkpfX1mdW5jdGlvbiBycihlLHQsbixyLGkpe3JldHVybiBuZXcgcnIucHJvdG90eXBlLmluaXQoZSx0LG4scixpKX1iLlR3ZWVuPXJyLHJyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6cnIsaW5pdDpmdW5jdGlvbihlLHQsbixyLGksbyl7dGhpcy5lbGVtPWUsdGhpcy5wcm9wPW4sdGhpcy5lYXNpbmc9aXx8XCJzd2luZ1wiLHRoaXMub3B0aW9ucz10LHRoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKSx0aGlzLmVuZD1yLHRoaXMudW5pdD1vfHwoYi5jc3NOdW1iZXJbbl0/XCJcIjpcInB4XCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgZT1yci5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gZSYmZS5nZXQ/ZS5nZXQodGhpcyk6cnIucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGUpe3ZhciB0LG49cnIucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMucG9zPXQ9dGhpcy5vcHRpb25zLmR1cmF0aW9uP2IuZWFzaW5nW3RoaXMuZWFzaW5nXShlLHRoaXMub3B0aW9ucy5kdXJhdGlvbiplLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOmUsdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKnQrdGhpcy5zdGFydCx0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyksbiYmbi5zZXQ/bi5zZXQodGhpcyk6cnIucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0scnIucHJvdG90eXBlLmluaXQucHJvdG90eXBlPXJyLnByb3RvdHlwZSxyci5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIG51bGw9PWUuZWxlbVtlLnByb3BdfHxlLmVsZW0uc3R5bGUmJm51bGwhPWUuZWxlbS5zdHlsZVtlLnByb3BdPyh0PWIuY3NzKGUuZWxlbSxlLnByb3AsXCJcIiksdCYmXCJhdXRvXCIhPT10P3Q6MCk6ZS5lbGVtW2UucHJvcF19LHNldDpmdW5jdGlvbihlKXtiLmZ4LnN0ZXBbZS5wcm9wXT9iLmZ4LnN0ZXBbZS5wcm9wXShlKTplLmVsZW0uc3R5bGUmJihudWxsIT1lLmVsZW0uc3R5bGVbYi5jc3NQcm9wc1tlLnByb3BdXXx8Yi5jc3NIb29rc1tlLnByb3BdKT9iLnN0eWxlKGUuZWxlbSxlLnByb3AsZS5ub3crZS51bml0KTplLmVsZW1bZS5wcm9wXT1lLm5vd319fSxyci5wcm9wSG9va3Muc2Nyb2xsVG9wPXJyLnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24oZSl7ZS5lbGVtLm5vZGVUeXBlJiZlLmVsZW0ucGFyZW50Tm9kZSYmKGUuZWxlbVtlLnByb3BdPWUubm93KX19LGIuZWFjaChbXCJ0b2dnbGVcIixcInNob3dcIixcImhpZGVcIl0sZnVuY3Rpb24oZSx0KXt2YXIgbj1iLmZuW3RdO2IuZm5bdF09ZnVuY3Rpb24oZSxyLGkpe3JldHVybiBudWxsPT1lfHxcImJvb2xlYW5cIj09dHlwZW9mIGU/bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKGlyKHQsITApLGUscixpKX19KSxiLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLmZpbHRlcihubikuY3NzKFwib3BhY2l0eVwiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OnR9LGUsbixyKX0sYW5pbWF0ZTpmdW5jdGlvbihlLHQsbixyKXt2YXIgaT1iLmlzRW1wdHlPYmplY3QoZSksbz1iLnNwZWVkKHQsbixyKSxhPWZ1bmN0aW9uKCl7dmFyIHQ9ZXIodGhpcyxiLmV4dGVuZCh7fSxlKSxvKTthLmZpbmlzaD1mdW5jdGlvbigpe3Quc3RvcCghMCl9LChpfHxiLl9kYXRhKHRoaXMsXCJmaW5pc2hcIikpJiZ0LnN0b3AoITApfTtyZXR1cm4gYS5maW5pc2g9YSxpfHxvLnF1ZXVlPT09ITE/dGhpcy5lYWNoKGEpOnRoaXMucXVldWUoby5xdWV1ZSxhKX0sc3RvcDpmdW5jdGlvbihlLG4scil7dmFyIGk9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdG9wO2RlbGV0ZSBlLnN0b3AsdChyKX07cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGUmJihyPW4sbj1lLGU9dCksbiYmZSE9PSExJiZ0aGlzLnF1ZXVlKGV8fFwiZnhcIixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ITAsbj1udWxsIT1lJiZlK1wicXVldWVIb29rc1wiLG89Yi50aW1lcnMsYT1iLl9kYXRhKHRoaXMpO2lmKG4pYVtuXSYmYVtuXS5zdG9wJiZpKGFbbl0pO2Vsc2UgZm9yKG4gaW4gYSlhW25dJiZhW25dLnN0b3AmJkpuLnRlc3QobikmJmkoYVtuXSk7Zm9yKG49by5sZW5ndGg7bi0tOylvW25dLmVsZW0hPT10aGlzfHxudWxsIT1lJiZvW25dLnF1ZXVlIT09ZXx8KG9bbl0uYW5pbS5zdG9wKHIpLHQ9ITEsby5zcGxpY2UobiwxKSk7KHR8fCFyKSYmYi5kZXF1ZXVlKHRoaXMsZSl9KX0sZmluaXNoOmZ1bmN0aW9uKGUpe3JldHVybiBlIT09ITEmJihlPWV8fFwiZnhcIiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQsbj1iLl9kYXRhKHRoaXMpLHI9bltlK1wicXVldWVcIl0saT1uW2UrXCJxdWV1ZUhvb2tzXCJdLG89Yi50aW1lcnMsYT1yP3IubGVuZ3RoOjA7Zm9yKG4uZmluaXNoPSEwLGIucXVldWUodGhpcyxlLFtdKSxpJiZpLmN1ciYmaS5jdXIuZmluaXNoJiZpLmN1ci5maW5pc2guY2FsbCh0aGlzKSx0PW8ubGVuZ3RoO3QtLTspb1t0XS5lbGVtPT09dGhpcyYmb1t0XS5xdWV1ZT09PWUmJihvW3RdLmFuaW0uc3RvcCghMCksby5zcGxpY2UodCwxKSk7Zm9yKHQ9MDthPnQ7dCsrKXJbdF0mJnJbdF0uZmluaXNoJiZyW3RdLmZpbmlzaC5jYWxsKHRoaXMpO2RlbGV0ZSBuLmZpbmlzaH0pfX0pO2Z1bmN0aW9uIGlyKGUsdCl7dmFyIG4scj17aGVpZ2h0OmV9LGk9MDtmb3IodD10PzE6MDs0Pmk7aSs9Mi10KW49WnRbaV0scltcIm1hcmdpblwiK25dPXJbXCJwYWRkaW5nXCIrbl09ZTtyZXR1cm4gdCYmKHIub3BhY2l0eT1yLndpZHRoPWUpLHJ9Yi5lYWNoKHtzbGlkZURvd246aXIoXCJzaG93XCIpLHNsaWRlVXA6aXIoXCJoaWRlXCIpLHNsaWRlVG9nZ2xlOmlyKFwidG9nZ2xlXCIpLGZhZGVJbjp7b3BhY2l0eTpcInNob3dcIn0sZmFkZU91dDp7b3BhY2l0eTpcImhpZGVcIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eTpcInRvZ2dsZVwifX0sZnVuY3Rpb24oZSx0KXtiLmZuW2VdPWZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gdGhpcy5hbmltYXRlKHQsZSxuLHIpfX0pLGIuc3BlZWQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUmJlwib2JqZWN0XCI9PXR5cGVvZiBlP2IuZXh0ZW5kKHt9LGUpOntjb21wbGV0ZTpufHwhbiYmdHx8Yi5pc0Z1bmN0aW9uKGUpJiZlLGR1cmF0aW9uOmUsZWFzaW5nOm4mJnR8fHQmJiFiLmlzRnVuY3Rpb24odCkmJnR9O3JldHVybiByLmR1cmF0aW9uPWIuZngub2ZmPzA6XCJudW1iZXJcIj09dHlwZW9mIHIuZHVyYXRpb24/ci5kdXJhdGlvbjpyLmR1cmF0aW9uIGluIGIuZnguc3BlZWRzP2IuZnguc3BlZWRzW3IuZHVyYXRpb25dOmIuZnguc3BlZWRzLl9kZWZhdWx0LChudWxsPT1yLnF1ZXVlfHxyLnF1ZXVlPT09ITApJiYoci5xdWV1ZT1cImZ4XCIpLHIub2xkPXIuY29tcGxldGUsci5jb21wbGV0ZT1mdW5jdGlvbigpe2IuaXNGdW5jdGlvbihyLm9sZCkmJnIub2xkLmNhbGwodGhpcyksci5xdWV1ZSYmYi5kZXF1ZXVlKHRoaXMsci5xdWV1ZSl9LHJ9LGIuZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHN3aW5nOmZ1bmN0aW9uKGUpe3JldHVybi41LU1hdGguY29zKGUqTWF0aC5QSSkvMn19LGIudGltZXJzPVtdLGIuZng9cnIucHJvdG90eXBlLmluaXQsYi5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGUsbj1iLnRpbWVycyxyPTA7Zm9yKFhuPWIubm93KCk7bi5sZW5ndGg+cjtyKyspZT1uW3JdLGUoKXx8bltyXSE9PWV8fG4uc3BsaWNlKHItLSwxKTtuLmxlbmd0aHx8Yi5meC5zdG9wKCksWG49dH0sYi5meC50aW1lcj1mdW5jdGlvbihlKXtlKCkmJmIudGltZXJzLnB1c2goZSkmJmIuZnguc3RhcnQoKX0sYi5meC5pbnRlcnZhbD0xMyxiLmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7VW58fChVbj1zZXRJbnRlcnZhbChiLmZ4LnRpY2ssYi5meC5pbnRlcnZhbCkpfSxiLmZ4LnN0b3A9ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKFVuKSxVbj1udWxsfSxiLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxiLmZ4LnN0ZXA9e30sYi5leHByJiZiLmV4cHIuZmlsdGVycyYmKGIuZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBiLmdyZXAoYi50aW1lcnMsZnVuY3Rpb24odCl7cmV0dXJuIGU9PT10LmVsZW19KS5sZW5ndGh9KSxiLmZuLm9mZnNldD1mdW5jdGlvbihlKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBlPT09dD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbih0KXtiLm9mZnNldC5zZXRPZmZzZXQodGhpcyxlLHQpfSk7dmFyIG4scixvPXt0b3A6MCxsZWZ0OjB9LGE9dGhpc1swXSxzPWEmJmEub3duZXJEb2N1bWVudDtpZihzKXJldHVybiBuPXMuZG9jdW1lbnRFbGVtZW50LGIuY29udGFpbnMobixhKT8odHlwZW9mIGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IT09aSYmKG89YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSkscj1vcihzKSx7dG9wOm8udG9wKyhyLnBhZ2VZT2Zmc2V0fHxuLnNjcm9sbFRvcCktKG4uY2xpZW50VG9wfHwwKSxsZWZ0Om8ubGVmdCsoci5wYWdlWE9mZnNldHx8bi5zY3JvbGxMZWZ0KS0obi5jbGllbnRMZWZ0fHwwKX0pOm99LGIub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWIuY3NzKGUsXCJwb3NpdGlvblwiKTtcInN0YXRpY1wiPT09ciYmKGUuc3R5bGUucG9zaXRpb249XCJyZWxhdGl2ZVwiKTt2YXIgaT1iKGUpLG89aS5vZmZzZXQoKSxhPWIuY3NzKGUsXCJ0b3BcIikscz1iLmNzcyhlLFwibGVmdFwiKSx1PShcImFic29sdXRlXCI9PT1yfHxcImZpeGVkXCI9PT1yKSYmYi5pbkFycmF5KFwiYXV0b1wiLFthLHNdKT4tMSxsPXt9LGM9e30scCxmO3U/KGM9aS5wb3NpdGlvbigpLHA9Yy50b3AsZj1jLmxlZnQpOihwPXBhcnNlRmxvYXQoYSl8fDAsZj1wYXJzZUZsb2F0KHMpfHwwKSxiLmlzRnVuY3Rpb24odCkmJih0PXQuY2FsbChlLG4sbykpLG51bGwhPXQudG9wJiYobC50b3A9dC50b3Atby50b3ArcCksbnVsbCE9dC5sZWZ0JiYobC5sZWZ0PXQubGVmdC1vLmxlZnQrZiksXCJ1c2luZ1wiaW4gdD90LnVzaW5nLmNhbGwoZSxsKTppLmNzcyhsKX19LGIuZm4uZXh0ZW5kKHtwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBlLHQsbj17dG9wOjAsbGVmdDowfSxyPXRoaXNbMF07cmV0dXJuXCJmaXhlZFwiPT09Yi5jc3MocixcInBvc2l0aW9uXCIpP3Q9ci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTooZT10aGlzLm9mZnNldFBhcmVudCgpLHQ9dGhpcy5vZmZzZXQoKSxiLm5vZGVOYW1lKGVbMF0sXCJodG1sXCIpfHwobj1lLm9mZnNldCgpKSxuLnRvcCs9Yi5jc3MoZVswXSxcImJvcmRlclRvcFdpZHRoXCIsITApLG4ubGVmdCs9Yi5jc3MoZVswXSxcImJvcmRlckxlZnRXaWR0aFwiLCEwKSkse3RvcDp0LnRvcC1uLnRvcC1iLmNzcyhyLFwibWFyZ2luVG9wXCIsITApLGxlZnQ6dC5sZWZ0LW4ubGVmdC1iLmNzcyhyLFwibWFyZ2luTGVmdFwiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9mZnNldFBhcmVudHx8by5kb2N1bWVudEVsZW1lbnQ7d2hpbGUoZSYmIWIubm9kZU5hbWUoZSxcImh0bWxcIikmJlwic3RhdGljXCI9PT1iLmNzcyhlLFwicG9zaXRpb25cIikpZT1lLm9mZnNldFBhcmVudDtyZXR1cm4gZXx8by5kb2N1bWVudEVsZW1lbnR9KX19KSxiLmVhY2goe3Njcm9sbExlZnQ6XCJwYWdlWE9mZnNldFwiLHNjcm9sbFRvcDpcInBhZ2VZT2Zmc2V0XCJ9LGZ1bmN0aW9uKGUsbil7dmFyIHI9L1kvLnRlc3Qobik7Yi5mbltlXT1mdW5jdGlvbihpKXtyZXR1cm4gYi5hY2Nlc3ModGhpcyxmdW5jdGlvbihlLGksbyl7dmFyIGE9b3IoZSk7cmV0dXJuIG89PT10P2E/biBpbiBhP2Fbbl06YS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbaV06ZVtpXTooYT9hLnNjcm9sbFRvKHI/YihhKS5zY3JvbGxMZWZ0KCk6byxyP286YihhKS5zY3JvbGxUb3AoKSk6ZVtpXT1vLHQpfSxlLGksYXJndW1lbnRzLmxlbmd0aCxudWxsKX19KTtmdW5jdGlvbiBvcihlKXtyZXR1cm4gYi5pc1dpbmRvdyhlKT9lOjk9PT1lLm5vZGVUeXBlP2UuZGVmYXVsdFZpZXd8fGUucGFyZW50V2luZG93OiExfWIuZWFjaCh7SGVpZ2h0OlwiaGVpZ2h0XCIsV2lkdGg6XCJ3aWR0aFwifSxmdW5jdGlvbihlLG4pe2IuZWFjaCh7cGFkZGluZzpcImlubmVyXCIrZSxjb250ZW50Om4sXCJcIjpcIm91dGVyXCIrZX0sZnVuY3Rpb24ocixpKXtiLmZuW2ldPWZ1bmN0aW9uKGksbyl7dmFyIGE9YXJndW1lbnRzLmxlbmd0aCYmKHJ8fFwiYm9vbGVhblwiIT10eXBlb2YgaSkscz1yfHwoaT09PSEwfHxvPT09ITA/XCJtYXJnaW5cIjpcImJvcmRlclwiKTtyZXR1cm4gYi5hY2Nlc3ModGhpcyxmdW5jdGlvbihuLHIsaSl7dmFyIG87cmV0dXJuIGIuaXNXaW5kb3cobik/bi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbXCJjbGllbnRcIitlXTo5PT09bi5ub2RlVHlwZT8obz1uLmRvY3VtZW50RWxlbWVudCxNYXRoLm1heChuLmJvZHlbXCJzY3JvbGxcIitlXSxvW1wic2Nyb2xsXCIrZV0sbi5ib2R5W1wib2Zmc2V0XCIrZV0sb1tcIm9mZnNldFwiK2VdLG9bXCJjbGllbnRcIitlXSkpOmk9PT10P2IuY3NzKG4scixzKTpiLnN0eWxlKG4scixpLHMpfSxuLGE/aTp0LGEsbnVsbCl9fSl9KSxlLmpRdWVyeT1lLiQ9YixcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZS5hbWQualF1ZXJ5JiZkZWZpbmUoXCJqcXVlcnlcIixbXSxmdW5jdGlvbigpe3JldHVybiBifSl9KSh3aW5kb3cpO1xuOyBicm93c2VyaWZ5X3NoaW1fX2RlZmluZV9fbW9kdWxlX19leHBvcnRfXyh0eXBlb2YgJCAhPSBcInVuZGVmaW5lZFwiID8gJCA6IHdpbmRvdy4kKTtcblxufSkuY2FsbChnbG9iYWwsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgZnVuY3Rpb24gZGVmaW5lRXhwb3J0KGV4KSB7IG1vZHVsZS5leHBvcnRzID0gZXg7IH0pO1xuXG59KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSkiLCIvKlxuKiBLZW5kbyBVSSB2MjAxNC4zLjExMTkgKGh0dHA6Ly93d3cudGVsZXJpay5jb20va2VuZG8tdWkpXG4qIENvcHlyaWdodCAyMDE0IFRlbGVyaWsgQUQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4qXG4qIEtlbmRvIFVJIGNvbW1lcmNpYWwgbGljZW5zZXMgbWF5IGJlIG9idGFpbmVkIGF0XG4qIGh0dHA6Ly93d3cudGVsZXJpay5jb20vcHVyY2hhc2UvbGljZW5zZS1hZ3JlZW1lbnQva2VuZG8tdWktY29tcGxldGVcbiogSWYgeW91IGRvIG5vdCBvd24gYSBjb21tZXJjaWFsIGxpY2Vuc2UsIHRoaXMgZmlsZSBzaGFsbCBiZSBnb3Zlcm5lZCBieSB0aGUgdHJpYWwgbGljZW5zZSB0ZXJtcy5cbiovXG4oZnVuY3Rpb24oZixkZWZpbmUpe2RlZmluZShbXSxmKX0pKGZ1bmN0aW9uKCl7IWZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiBpKCl7fWZ1bmN0aW9uIHIoZSx0KXtpZih0KXJldHVyblwiJ1wiK2Uuc3BsaXQoXCInXCIpLmpvaW4oXCJcXFxcJ1wiKS5zcGxpdCgnXFxcXFwiJykuam9pbignXFxcXFxcXFxcXFxcXCInKS5yZXBsYWNlKC9cXG4vZyxcIlxcXFxuXCIpLnJlcGxhY2UoL1xcci9nLFwiXFxcXHJcIikucmVwbGFjZSgvXFx0L2csXCJcXFxcdFwiKStcIidcIjt2YXIgbj1lLmNoYXJBdCgwKSxpPWUuc3Vic3RyaW5nKDEpO3JldHVyblwiPVwiPT09bj9cIisoXCIraStcIikrXCI6XCI6XCI9PT1uP1wiK2UoXCIraStcIikrXCI6XCI7XCIrZStcIjtvKz1cIn1mdW5jdGlvbiBvKGUsdCxuKXtyZXR1cm4gZSs9XCJcIix0PXR8fDIsbj10LWUubGVuZ3RoLG4/Tlt0XS5zdWJzdHJpbmcoMCxuKStlOmV9ZnVuY3Rpb24gYShlKXt2YXIgdD1lLmNzcyhndC5zdXBwb3J0LnRyYW5zaXRpb25zLmNzcytcImJveC1zaGFkb3dcIil8fGUuY3NzKFwiYm94LXNoYWRvd1wiKSxuPXQ/dC5tYXRjaChUdCl8fFswLDAsMCwwLDBdOlswLDAsMCwwLDBdLGk9YnQubWF4KCtuWzNdLCsobls0XXx8MCkpO3JldHVybntsZWZ0Oi1uWzFdK2kscmlnaHQ6K25bMV0raSxib3R0b206K25bMl0raX19ZnVuY3Rpb24gcyh0LG4pe3ZhciBpLHIsbyxzLGwsYyxkLHUsaD14dC5icm93c2VyLHA9XCJydGxcIj09dC5jc3MoXCJkaXJlY3Rpb25cIik7cmV0dXJuIHQucGFyZW50KCkuaGFzQ2xhc3MoXCJrLWFuaW1hdGlvbi1jb250YWluZXJcIik/KGQ9dC5wYXJlbnQoXCIuay1hbmltYXRpb24tY29udGFpbmVyXCIpLHU9ZFswXS5zdHlsZSxkLmlzKFwiOmhpZGRlblwiKSYmZC5zaG93KCksaT1DdC50ZXN0KHUud2lkdGgpfHxDdC50ZXN0KHUuaGVpZ2h0KSxpfHxkLmNzcyh7d2lkdGg6dC5vdXRlcldpZHRoKCksaGVpZ2h0OnQub3V0ZXJIZWlnaHQoKSxib3hTaXppbmc6XCJjb250ZW50LWJveFwiLG1vekJveFNpemluZzpcImNvbnRlbnQtYm94XCIsd2Via2l0Qm94U2l6aW5nOlwiY29udGVudC1ib3hcIn0pKToocj1hKHQpLG89dFswXS5zdHlsZS53aWR0aCxzPXRbMF0uc3R5bGUuaGVpZ2h0LGw9Q3QudGVzdChvKSxjPUN0LnRlc3QocyksaC5vcGVyYSYmKHIubGVmdD1yLnJpZ2h0PXIuYm90dG9tPTUpLGk9bHx8YywhbCYmKCFufHxuJiZvKSYmKG89dC5vdXRlcldpZHRoKCkpLCFjJiYoIW58fG4mJnMpJiYocz10Lm91dGVySGVpZ2h0KCkpLHQud3JhcChlKFwiPGRpdi8+XCIpLmFkZENsYXNzKFwiay1hbmltYXRpb24tY29udGFpbmVyXCIpLmNzcyh7d2lkdGg6byxoZWlnaHQ6cyxtYXJnaW5MZWZ0OnIubGVmdCoocD8xOi0xKSxwYWRkaW5nTGVmdDpyLmxlZnQscGFkZGluZ1JpZ2h0OnIucmlnaHQscGFkZGluZ0JvdHRvbTpyLmJvdHRvbX0pKSxpJiZ0LmNzcyh7d2lkdGg6XCIxMDAlXCIsaGVpZ2h0OlwiMTAwJVwiLGJveFNpemluZzpcImJvcmRlci1ib3hcIixtb3pCb3hTaXppbmc6XCJib3JkZXItYm94XCIsd2Via2l0Qm94U2l6aW5nOlwiYm9yZGVyLWJveFwifSkpLGgubXNpZSYmYnQuZmxvb3IoaC52ZXJzaW9uKTw9NyYmKHQuY3NzKHt6b29tOjF9KSx0LmNoaWxkcmVuKFwiLmstbWVudVwiKS53aWR0aCh0LndpZHRoKCkpKSx0LnBhcmVudCgpfWZ1bmN0aW9uIGwoZSl7dmFyIHQ9MSxuPWFyZ3VtZW50cy5sZW5ndGg7Zm9yKHQ9MTtuPnQ7dCsrKWMoZSxhcmd1bWVudHNbdF0pO3JldHVybiBlfWZ1bmN0aW9uIGMoZSx0KXt2YXIgbixpLHIsbyxhLHM9Z3QuZGF0YS5PYnNlcnZhYmxlQXJyYXksbD1ndC5kYXRhLkxhenlPYnNlcnZhYmxlQXJyYXksZD1ndC5kYXRhLkRhdGFTb3VyY2UsdT1ndC5kYXRhLkhpZXJhcmNoaWNhbERhdGFTb3VyY2U7Zm9yKG4gaW4gdClpPXRbbl0scj10eXBlb2YgaSxvPXI9PT1QdCYmbnVsbCE9PWk/aS5jb25zdHJ1Y3RvcjpudWxsLG8mJm8hPT1BcnJheSYmbyE9PXMmJm8hPT1sJiZvIT09ZCYmbyE9PXU/aSBpbnN0YW5jZW9mIERhdGU/ZVtuXT1uZXcgRGF0ZShpLmdldFRpbWUoKSk6TShpLmNsb25lKT9lW25dPWkuY2xvbmUoKTooYT1lW25dLGVbbl09dHlwZW9mIGE9PT1QdD9hfHx7fTp7fSxjKGVbbl0saSkpOnIhPT1GdCYmKGVbbl09aSk7cmV0dXJuIGV9ZnVuY3Rpb24gZChlLHQsaSl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSYmdFtyXS50ZXN0KGUpKXJldHVybiByO3JldHVybiBpIT09bj9pOmV9ZnVuY3Rpb24gdShlKXtyZXR1cm4gZS5yZXBsYWNlKC8oW2Etel1bQS1aXSkvZyxmdW5jdGlvbihlKXtyZXR1cm4gZS5jaGFyQXQoMCkrXCItXCIrZS5jaGFyQXQoMSkudG9Mb3dlckNhc2UoKX0pfWZ1bmN0aW9uIGgoZSl7cmV0dXJuIGUucmVwbGFjZSgvXFwtKFxcdykvZyxmdW5jdGlvbihlLHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9KX1mdW5jdGlvbiBwKHQsbil7dmFyIGkscj17fTtyZXR1cm4gZG9jdW1lbnQuZGVmYXVsdFZpZXcmJmRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGU/KGk9ZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh0LFwiXCIpLG4mJmUuZWFjaChuLGZ1bmN0aW9uKGUsdCl7clt0XT1pLmdldFByb3BlcnR5VmFsdWUodCl9KSk6KGk9dC5jdXJyZW50U3R5bGUsbiYmZS5lYWNoKG4sZnVuY3Rpb24oZSx0KXtyW3RdPWlbaCh0KV19KSksZ3Quc2l6ZShyKXx8KHI9aSkscn1mdW5jdGlvbiBmKGUpe3ZhciB0LG49MDtmb3IodCBpbiBlKWUuaGFzT3duUHJvcGVydHkodCkmJlwidG9KU09OXCIhPXQmJm4rKztyZXR1cm4gbn1mdW5jdGlvbiBnKGUsbixpKXtufHwobj1cIm9mZnNldFwiKTt2YXIgcj1lW25dKCk7cmV0dXJuIHh0LmJyb3dzZXIubXNpZSYmKHh0LnBvaW50ZXJzfHx4dC5tc1BvaW50ZXJzKSYmIWkmJihyLnRvcC09dC5wYWdlWU9mZnNldC1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wLHIubGVmdC09dC5wYWdlWE9mZnNldC1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCkscn1mdW5jdGlvbiBtKGUpe3ZhciB0PXt9O3JldHVybiB2dChcInN0cmluZ1wiPT10eXBlb2YgZT9lLnNwbGl0KFwiIFwiKTplLGZ1bmN0aW9uKGUpe3RbZV09dGhpc30pLHR9ZnVuY3Rpb24gdihlKXtyZXR1cm4gbmV3IGd0LmVmZmVjdHMuRWxlbWVudChlKX1mdW5jdGlvbiBfKGUsdCxuLGkpe3JldHVybiB0eXBlb2YgZT09PUV0JiYoTSh0KSYmKGk9dCx0PTQwMCxuPSExKSxNKG4pJiYoaT1uLG49ITEpLHR5cGVvZiB0PT09enQmJihuPXQsdD00MDApLGU9e2VmZmVjdHM6ZSxkdXJhdGlvbjp0LHJldmVyc2U6bixjb21wbGV0ZTppfSksbXQoe2VmZmVjdHM6e30sZHVyYXRpb246NDAwLHJldmVyc2U6ITEsaW5pdDp3dCx0ZWFyZG93bjp3dCxoaWRlOiExfSxlLHtjb21wbGV0ZUNhbGxiYWNrOmUuY29tcGxldGUsY29tcGxldGU6d3R9KX1mdW5jdGlvbiB5KHQsbixpLHIsbyl7Zm9yKHZhciBhLHM9MCxsPXQubGVuZ3RoO2w+cztzKyspYT1lKHRbc10pLGEucXVldWUoZnVuY3Rpb24oKXtVLnByb21pc2UoYSxfKG4saSxyLG8pKX0pO3JldHVybiB0fWZ1bmN0aW9uIHcoZSx0LG4saSl7cmV0dXJuIHQmJih0PXQuc3BsaXQoXCIgXCIpLHZ0KHQsZnVuY3Rpb24odCxuKXtlLnRvZ2dsZUNsYXNzKG4saSl9KSksZX1mdW5jdGlvbiBiKGUpe3JldHVybihcIlwiK2UpLnJlcGxhY2UoVyxcIiZhbXA7XCIpLnJlcGxhY2UoaixcIiZsdDtcIikucmVwbGFjZSgkLFwiJmd0O1wiKS5yZXBsYWNlKEcsXCImcXVvdDtcIikucmVwbGFjZShxLFwiJiMzOTtcIil9ZnVuY3Rpb24gayhlLHQpe3ZhciBpO3JldHVybiAwPT09dC5pbmRleE9mKFwiZGF0YVwiKSYmKHQ9dC5zdWJzdHJpbmcoNCksdD10LmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpK3Quc3Vic3RyaW5nKDEpKSx0PXQucmVwbGFjZShudCxcIi0kMVwiKSxpPWUuZ2V0QXR0cmlidXRlKFwiZGF0YS1cIitndC5ucyt0KSxudWxsPT09aT9pPW46XCJudWxsXCI9PT1pP2k9bnVsbDpcInRydWVcIj09PWk/aT0hMDpcImZhbHNlXCI9PT1pP2k9ITE6RHQudGVzdChpKT9pPXBhcnNlRmxvYXQoaSk6ZXQudGVzdChpKSYmIXR0LnRlc3QoaSkmJihpPUZ1bmN0aW9uKFwicmV0dXJuIChcIitpK1wiKVwiKSgpKSxpfWZ1bmN0aW9uIHgodCxpKXt2YXIgcixvLGE9e307Zm9yKHIgaW4gaSlvPWsodCxyKSxvIT09biYmKFoudGVzdChyKSYmKG89Z3QudGVtcGxhdGUoZShcIiNcIitvKS5odG1sKCkpKSxhW3JdPW8pO3JldHVybiBhfWZ1bmN0aW9uIEModCxuKXtyZXR1cm4gZS5jb250YWlucyh0LG4pPy0xOjF9ZnVuY3Rpb24gUygpe3ZhciB0PWUodGhpcyk7cmV0dXJuIGUuaW5BcnJheSh0LmF0dHIoXCJkYXRhLVwiK2d0Lm5zK1wicm9sZVwiKSxbXCJzbGlkZXJcIixcInJhbmdlc2xpZGVyXCJdKT4tMXx8dC5pcyhcIjp2aXNpYmxlXCIpfWZ1bmN0aW9uIFQoZSx0KXt2YXIgbj1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKC9pbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdC8udGVzdChuKT8hZS5kaXNhYmxlZDpcImFcIj09PW4/ZS5ocmVmfHx0OnQpJiZEKGUpfWZ1bmN0aW9uIEQodCl7cmV0dXJuIWUodCkucGFyZW50cygpLmFkZEJhY2soKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm5cImhpZGRlblwiPT09ZS5jc3ModGhpcyxcInZpc2liaWxpdHlcIil8fGUuZXhwci5maWx0ZXJzLmhpZGRlbih0aGlzKX0pLmxlbmd0aH1mdW5jdGlvbiBBKGUsdCl7cmV0dXJuIG5ldyBBLmZuLmluaXQoZSx0KX12YXIgRSxNLFAsSSx6LEYsUixCLEwsTyxILE4sVixVLFcsaixHLHEsJCxZLEssUSxYLEosWixldCx0dCxudCxpdCxydCxvdCxhdCxzdCxsdCxjdCxkdCx1dCxodCxwdCxmdCxndD10LmtlbmRvPXQua2VuZG98fHtjdWx0dXJlczp7fX0sbXQ9ZS5leHRlbmQsdnQ9ZS5lYWNoLF90PWUuaXNBcnJheSx5dD1lLnByb3h5LHd0PWUubm9vcCxidD1NYXRoLGt0PXQuSlNPTnx8e30seHQ9e30sQ3Q9LyUvLFN0PS9cXHsoXFxkKykoOlteXFx9XSspP1xcfS9nLFR0PS8oXFxkKyg/OlxcLj8pXFxkKilweFxccyooXFxkKyg/OlxcLj8pXFxkKilweFxccyooXFxkKyg/OlxcLj8pXFxkKilweFxccyooXFxkKyk/L2ksRHQ9L14oXFwrfC0/KVxcZCsoXFwuPylcXGQqJC8sQXQ9XCJmdW5jdGlvblwiLEV0PVwic3RyaW5nXCIsTXQ9XCJudW1iZXJcIixQdD1cIm9iamVjdFwiLEl0PVwibnVsbFwiLHp0PVwiYm9vbGVhblwiLEZ0PVwidW5kZWZpbmVkXCIsUnQ9e30sQnQ9e30sTHQ9W10uc2xpY2UsT3Q9dC5HbG9iYWxpemU7Z3QudmVyc2lvbj1cIjIwMTQuMy4xMTE5XCIsaS5leHRlbmQ9ZnVuY3Rpb24oZSl7dmFyIHQsbixpPWZ1bmN0aW9uKCl7fSxyPXRoaXMsbz1lJiZlLmluaXQ/ZS5pbml0OmZ1bmN0aW9uKCl7ci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2kucHJvdG90eXBlPXIucHJvdG90eXBlLG49by5mbj1vLnByb3RvdHlwZT1uZXcgaTtmb3IodCBpbiBlKW5bdF09bnVsbCE9ZVt0XSYmZVt0XS5jb25zdHJ1Y3Rvcj09PU9iamVjdD9tdCghMCx7fSxpLnByb3RvdHlwZVt0XSxlW3RdKTplW3RdO3JldHVybiBuLmNvbnN0cnVjdG9yPW8sby5leHRlbmQ9ci5leHRlbmQsb30saS5wcm90b3R5cGUuX2luaXRPcHRpb25zPWZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucz1sKHt9LHRoaXMub3B0aW9ucyxlKX0sTT1ndC5pc0Z1bmN0aW9uPWZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGV9LFA9ZnVuY3Rpb24oKXt0aGlzLl9kZWZhdWx0UHJldmVudGVkPSEwfSxJPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlZmF1bHRQcmV2ZW50ZWQ9PT0hMH0sej1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbigpe3RoaXMuX2V2ZW50cz17fX0sYmluZDpmdW5jdGlvbihlLHQsaSl7dmFyIHIsbyxhLHMsbCxjPXRoaXMsZD10eXBlb2YgZT09PUV0P1tlXTplLHU9dHlwZW9mIHQ9PT1BdDtpZih0PT09bil7Zm9yKHIgaW4gZSljLmJpbmQocixlW3JdKTtyZXR1cm4gY31mb3Iocj0wLG89ZC5sZW5ndGg7bz5yO3IrKyllPWRbcl0scz11P3Q6dFtlXSxzJiYoaSYmKGE9cyxzPWZ1bmN0aW9uKCl7Yy51bmJpbmQoZSxzKSxhLmFwcGx5KGMsYXJndW1lbnRzKX0scy5vcmlnaW5hbD1hKSxsPWMuX2V2ZW50c1tlXT1jLl9ldmVudHNbZV18fFtdLGwucHVzaChzKSk7cmV0dXJuIGN9LG9uZTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmJpbmQoZSx0LCEwKX0sZmlyc3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxhPXRoaXMscz10eXBlb2YgZT09PUV0P1tlXTplLGw9dHlwZW9mIHQ9PT1BdDtmb3Iobj0wLGk9cy5sZW5ndGg7aT5uO24rKyllPXNbbl0scj1sP3Q6dFtlXSxyJiYobz1hLl9ldmVudHNbZV09YS5fZXZlbnRzW2VdfHxbXSxvLnVuc2hpZnQocikpO3JldHVybiBhfSx0cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMsbz1yLl9ldmVudHNbZV07aWYobyl7Zm9yKHQ9dHx8e30sdC5zZW5kZXI9cix0Ll9kZWZhdWx0UHJldmVudGVkPSExLHQucHJldmVudERlZmF1bHQ9UCx0LmlzRGVmYXVsdFByZXZlbnRlZD1JLG89by5zbGljZSgpLG49MCxpPW8ubGVuZ3RoO2k+bjtuKyspb1tuXS5jYWxsKHIsdCk7cmV0dXJuIHQuX2RlZmF1bHRQcmV2ZW50ZWQ9PT0hMH1yZXR1cm4hMX0sdW5iaW5kOmZ1bmN0aW9uKGUsdCl7dmFyIGkscj10aGlzLG89ci5fZXZlbnRzW2VdO2lmKGU9PT1uKXIuX2V2ZW50cz17fTtlbHNlIGlmKG8paWYodClmb3IoaT1vLmxlbmd0aC0xO2k+PTA7aS0tKShvW2ldPT09dHx8b1tpXS5vcmlnaW5hbD09PXQpJiZvLnNwbGljZShpLDEpO2Vsc2Ugci5fZXZlbnRzW2VdPVtdO3JldHVybiByfX0pLEY9L15cXHcrLyxSPS9cXCRcXHsoW159XSopXFx9L2csQj0vXFxcXFxcfS9nLEw9L19fQ1VSTFlfXy9nLE89L1xcXFwjL2csSD0vX19TSEFSUF9fL2csTj1bXCJcIixcIjBcIixcIjAwXCIsXCIwMDBcIixcIjAwMDBcIl0sRT17cGFyYW1OYW1lOlwiZGF0YVwiLHVzZVdpdGhCbG9jazohMCxyZW5kZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9XCJcIjtmb3Iobj0wLGk9dC5sZW5ndGg7aT5uO24rKylyKz1lKHRbbl0pO3JldHVybiByfSxjb21waWxlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxvLGE9bXQoe30sdGhpcyx0KSxzPWEucGFyYW1OYW1lLGw9cy5tYXRjaChGKVswXSxjPWEudXNlV2l0aEJsb2NrLGQ9XCJ2YXIgbyxlPWtlbmRvLmh0bWxFbmNvZGU7XCI7aWYoTShlKSlyZXR1cm4gZTtmb3IoZCs9Yz9cIndpdGgoXCIrcytcIil7XCI6XCJcIixkKz1cIm89XCIsaT1lLnJlcGxhY2UoQixcIl9fQ1VSTFlfX1wiKS5yZXBsYWNlKFIsXCIjPWUoJDEpI1wiKS5yZXBsYWNlKEwsXCJ9XCIpLnJlcGxhY2UoTyxcIl9fU0hBUlBfX1wiKS5zcGxpdChcIiNcIiksbz0wO2kubGVuZ3RoPm87bysrKWQrPXIoaVtvXSxvJTI9PT0wKTtkKz1jP1wiO31cIjpcIjtcIixkKz1cInJldHVybiBvO1wiLGQ9ZC5yZXBsYWNlKEgsXCIjXCIpO3RyeXtyZXR1cm4gbj1GdW5jdGlvbihsLGQpLG4uX3Nsb3RDb3VudD1NYXRoLmZsb29yKGkubGVuZ3RoLzIpLG59Y2F0Y2godSl7dGhyb3cgRXJyb3IoZ3QuZm9ybWF0KFwiSW52YWxpZCB0ZW1wbGF0ZTonezB9JyBHZW5lcmF0ZWQgY29kZTonezF9J1wiLGUsZCkpfX19LGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gYS5sYXN0SW5kZXg9MCxhLnRlc3QoZSk/J1wiJytlLnJlcGxhY2UoYSxmdW5jdGlvbihlKXt2YXIgdD1zW2VdO3JldHVybiB0eXBlb2YgdD09PUV0P3Q6XCJcXFxcdVwiKyhcIjAwMDBcIitlLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCl9KSsnXCInOidcIicrZSsnXCInfWZ1bmN0aW9uIHQobyxhKXt2YXIgcyxjLGQsdSxoLHAsZj1uLGc9YVtvXTtpZihnJiZ0eXBlb2YgZz09PVB0JiZ0eXBlb2YgZy50b0pTT049PT1BdCYmKGc9Zy50b0pTT04obykpLHR5cGVvZiByPT09QXQmJihnPXIuY2FsbChhLG8sZykpLHA9dHlwZW9mIGcscD09PUV0KXJldHVybiBlKGcpO2lmKHA9PT1NdClyZXR1cm4gaXNGaW5pdGUoZyk/ZytcIlwiOkl0O2lmKHA9PT16dHx8cD09PUl0KXJldHVybiBnK1wiXCI7aWYocD09PVB0KXtpZighZylyZXR1cm4gSXQ7aWYobis9aSxoPVtdLFwiW29iamVjdCBBcnJheV1cIj09PWwuYXBwbHkoZykpe2Zvcih1PWcubGVuZ3RoLHM9MDt1PnM7cysrKWhbc109dChzLGcpfHxJdDtyZXR1cm4gZD0wPT09aC5sZW5ndGg/XCJbXVwiOm4/XCJbXFxuXCIrbitoLmpvaW4oXCIsXFxuXCIrbikrXCJcXG5cIitmK1wiXVwiOlwiW1wiK2guam9pbihcIixcIikrXCJdXCIsbj1mLGR9aWYociYmdHlwZW9mIHI9PT1QdClmb3IodT1yLmxlbmd0aCxzPTA7dT5zO3MrKyl0eXBlb2YgcltzXT09PUV0JiYoYz1yW3NdLGQ9dChjLGcpLGQmJmgucHVzaChlKGMpKyhuP1wiOiBcIjpcIjpcIikrZCkpO2Vsc2UgZm9yKGMgaW4gZylPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChnLGMpJiYoZD10KGMsZyksZCYmaC5wdXNoKGUoYykrKG4/XCI6IFwiOlwiOlwiKStkKSk7cmV0dXJuIGQ9MD09PWgubGVuZ3RoP1wie31cIjpuP1wie1xcblwiK24raC5qb2luKFwiLFxcblwiK24pK1wiXFxuXCIrZitcIn1cIjpcIntcIitoLmpvaW4oXCIsXCIpK1wifVwiLG49ZixkfX12YXIgbixpLHIsYT0vW1xcXFxcXFwiXFx4MDAtXFx4MWZcXHg3Zi1cXHg5ZlxcdTAwYWRcXHUwNjAwLVxcdTA2MDRcXHUwNzBmXFx1MTdiNFxcdTE3YjVcXHUyMDBjLVxcdTIwMGZcXHUyMDI4LVxcdTIwMmZcXHUyMDYwLVxcdTIwNmZcXHVmZWZmXFx1ZmZmMC1cXHVmZmZmXS9nLHM9e1wiXFxiXCI6XCJcXFxcYlwiLFwiXHRcIjpcIlxcXFx0XCIsXCJcXG5cIjpcIlxcXFxuXCIsXCJcXGZcIjpcIlxcXFxmXCIsXCJcXHJcIjpcIlxcXFxyXCIsJ1wiJzonXFxcXFwiJyxcIlxcXFxcIjpcIlxcXFxcXFxcXCJ9LGw9e30udG9TdHJpbmc7dHlwZW9mIERhdGUucHJvdG90eXBlLnRvSlNPTiE9PUF0JiYoRGF0ZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gaXNGaW5pdGUoZS52YWx1ZU9mKCkpP28oZS5nZXRVVENGdWxsWWVhcigpLDQpK1wiLVwiK28oZS5nZXRVVENNb250aCgpKzEpK1wiLVwiK28oZS5nZXRVVENEYXRlKCkpK1wiVFwiK28oZS5nZXRVVENIb3VycygpKStcIjpcIitvKGUuZ2V0VVRDTWludXRlcygpKStcIjpcIitvKGUuZ2V0VVRDU2Vjb25kcygpKStcIlpcIjpudWxsfSxTdHJpbmcucHJvdG90eXBlLnRvSlNPTj1OdW1iZXIucHJvdG90eXBlLnRvSlNPTj1Cb29sZWFuLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZU9mKCl9KSx0eXBlb2Yga3Quc3RyaW5naWZ5IT09QXQmJihrdC5zdHJpbmdpZnk9ZnVuY3Rpb24oZSxvLGEpe3ZhciBzO2lmKG49XCJcIixpPVwiXCIsdHlwZW9mIGE9PT1NdClmb3Iocz0wO2E+cztzKz0xKWkrPVwiIFwiO2Vsc2UgdHlwZW9mIGE9PT1FdCYmKGk9YSk7aWYocj1vLG8mJnR5cGVvZiBvIT09QXQmJih0eXBlb2YgbyE9PVB0fHx0eXBlb2Ygby5sZW5ndGghPT1NdCkpdGhyb3cgRXJyb3IoXCJKU09OLnN0cmluZ2lmeVwiKTtyZXR1cm4gdChcIlwiLHtcIlwiOmV9KX0pfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZihlKXtpZihlLm51bWJlckZvcm1hdClyZXR1cm4gZTtpZih0eXBlb2YgZT09PUV0KXt2YXIgdD1ndC5jdWx0dXJlcztyZXR1cm4gdFtlXXx8dFtlLnNwbGl0KFwiLVwiKVswXV18fG51bGx9cmV0dXJuIG51bGx9cmV0dXJuIG51bGx9ZnVuY3Rpb24gaShlKXtyZXR1cm4gZSYmKGU9dChlKSksZXx8Z3QuY3VsdHVyZXMuY3VycmVudH1mdW5jdGlvbiByKGUpe2UuZ3JvdXBTaXplcz1lLmdyb3VwU2l6ZSxlLnBlcmNlbnQuZ3JvdXBTaXplcz1lLnBlcmNlbnQuZ3JvdXBTaXplLGUuY3VycmVuY3kuZ3JvdXBTaXplcz1lLmN1cnJlbmN5Lmdyb3VwU2l6ZX1mdW5jdGlvbiBhKGUsdCxyKXtyPWkocik7dmFyIGE9ci5jYWxlbmRhcnMuc3RhbmRhcmQscz1hLmRheXMsbD1hLm1vbnRocztyZXR1cm4gdD1hLnBhdHRlcm5zW3RdfHx0LHQucmVwbGFjZShkLGZ1bmN0aW9uKHQpe3ZhciBpLHIsYztyZXR1cm5cImRcIj09PXQ/cj1lLmdldERhdGUoKTpcImRkXCI9PT10P3I9byhlLmdldERhdGUoKSk6XCJkZGRcIj09PXQ/cj1zLm5hbWVzQWJicltlLmdldERheSgpXTpcImRkZGRcIj09PXQ/cj1zLm5hbWVzW2UuZ2V0RGF5KCldOlwiTVwiPT09dD9yPWUuZ2V0TW9udGgoKSsxOlwiTU1cIj09PXQ/cj1vKGUuZ2V0TW9udGgoKSsxKTpcIk1NTVwiPT09dD9yPWwubmFtZXNBYmJyW2UuZ2V0TW9udGgoKV06XCJNTU1NXCI9PT10P3I9bC5uYW1lc1tlLmdldE1vbnRoKCldOlwieXlcIj09PXQ/cj1vKGUuZ2V0RnVsbFllYXIoKSUxMDApOlwieXl5eVwiPT09dD9yPW8oZS5nZXRGdWxsWWVhcigpLDQpOlwiaFwiPT09dD9yPWUuZ2V0SG91cnMoKSUxMnx8MTI6XCJoaFwiPT09dD9yPW8oZS5nZXRIb3VycygpJTEyfHwxMik6XCJIXCI9PT10P3I9ZS5nZXRIb3VycygpOlwiSEhcIj09PXQ/cj1vKGUuZ2V0SG91cnMoKSk6XCJtXCI9PT10P3I9ZS5nZXRNaW51dGVzKCk6XCJtbVwiPT09dD9yPW8oZS5nZXRNaW51dGVzKCkpOlwic1wiPT09dD9yPWUuZ2V0U2Vjb25kcygpOlwic3NcIj09PXQ/cj1vKGUuZ2V0U2Vjb25kcygpKTpcImZcIj09PXQ/cj1idC5mbG9vcihlLmdldE1pbGxpc2Vjb25kcygpLzEwMCk6XCJmZlwiPT09dD8ocj1lLmdldE1pbGxpc2Vjb25kcygpLHI+OTkmJihyPWJ0LmZsb29yKHIvMTApKSxyPW8ocikpOlwiZmZmXCI9PT10P3I9byhlLmdldE1pbGxpc2Vjb25kcygpLDMpOlwidHRcIj09PXQ/cj1lLmdldEhvdXJzKCk8MTI/YS5BTVswXTphLlBNWzBdOlwienp6XCI9PT10PyhpPWUuZ2V0VGltZXpvbmVPZmZzZXQoKSxjPTA+aSxyPShcIlwiK2J0LmFicyhpLzYwKSkuc3BsaXQoXCIuXCIpWzBdLGk9YnQuYWJzKGkpLTYwKnIscj0oYz9cIitcIjpcIi1cIikrbyhyKSxyKz1cIjpcIitvKGkpKTooXCJ6elwiPT09dHx8XCJ6XCI9PT10KSYmKHI9ZS5nZXRUaW1lem9uZU9mZnNldCgpLzYwLGM9MD5yLHI9KFwiXCIrYnQuYWJzKHIpKS5zcGxpdChcIi5cIilbMF0scj0oYz9cIitcIjpcIi1cIikrKFwienpcIj09PXQ/byhyKTpyKSksciE9PW4/cjp0LnNsaWNlKDEsdC5sZW5ndGgtMSl9KX1mdW5jdGlvbiBzKGUsdCxyKXtyPWkocik7dmFyIG8sYSxzLGMsZCx3LGIsayx4LEMsUyxULEQsQSxFLE0sUCxJLHosRixSLEIsTCxPPXIubnVtYmVyRm9ybWF0LEg9Ty5ncm91cFNpemVbMF0sTj1PW21dLFY9T1tnXSxVPU8uZGVjaW1hbHMsVz1PLnBhdHRlcm5bMF0saj1bXSxHPTA+ZSxxPWYsJD1mLFk9LTE7aWYoZT09PW4pcmV0dXJuIGY7aWYoIWlzRmluaXRlKGUpKXJldHVybiBlO2lmKCF0KXJldHVybiByLm5hbWUubGVuZ3RoP2UudG9Mb2NhbGVTdHJpbmcoKTpcIlwiK2U7aWYoZD11LmV4ZWModCkpe2lmKHQ9ZFsxXS50b0xvd2VyQ2FzZSgpLGE9XCJjXCI9PT10LHM9XCJwXCI9PT10LChhfHxzKSYmKE89YT9PLmN1cnJlbmN5Ok8ucGVyY2VudCxIPU8uZ3JvdXBTaXplWzBdLE49T1ttXSxWPU9bZ10sVT1PLmRlY2ltYWxzLG89Ty5zeW1ib2wsVz1PLnBhdHRlcm5bRz8wOjFdKSxjPWRbMl0sYyYmKFU9K2MpLFwiZVwiPT09dClyZXR1cm4gYz9lLnRvRXhwb25lbnRpYWwoVSk6ZS50b0V4cG9uZW50aWFsKCk7aWYocyYmKGUqPTEwMCksZT1sKGUsVSksRz0wPmUsZT1lLnNwbGl0KGcpLHc9ZVswXSxiPWVbMV0sRyYmKHc9dy5zdWJzdHJpbmcoMSkpLCQ9dyxrPXcubGVuZ3RoLGs+PUgpZm9yKCQ9ZixDPTA7az5DO0MrKylDPjAmJihrLUMpJUg9PT0wJiYoJCs9TiksJCs9dy5jaGFyQXQoQyk7aWYoYiYmKCQrPVYrYiksXCJuXCI9PT10JiYhRylyZXR1cm4gJDtmb3IoZT1mLEM9MCxTPVcubGVuZ3RoO1M+QztDKyspVD1XLmNoYXJBdChDKSxlKz1cIm5cIj09PVQ/JDpcIiRcIj09PVR8fFwiJVwiPT09VD9vOlQ7cmV0dXJuIGV9aWYoRyYmKGU9LWUpLCh0LmluZGV4T2YoXCInXCIpPi0xfHx0LmluZGV4T2YoJ1wiJyk+LTF8fHQuaW5kZXhPZihcIlxcXFxcIik+LTEpJiYodD10LnJlcGxhY2UoaCxmdW5jdGlvbihlKXt2YXIgdD1lLmNoYXJBdCgwKS5yZXBsYWNlKFwiXFxcXFwiLFwiXCIpLG49ZS5zbGljZSgxKS5yZXBsYWNlKHQsXCJcIik7cmV0dXJuIGoucHVzaChuKSx5fSkpLHQ9dC5zcGxpdChcIjtcIiksRyYmdFsxXSl0PXRbMV0sQT0hMDtlbHNlIGlmKDA9PT1lKXtpZih0PXRbMl18fHRbMF0sLTE9PXQuaW5kZXhPZih2KSYmLTE9PXQuaW5kZXhPZihfKSlyZXR1cm4gdH1lbHNlIHQ9dFswXTtpZihGPXQuaW5kZXhPZihcIiVcIiksUj10LmluZGV4T2YoXCIkXCIpLHM9LTEhPUYsYT0tMSE9UixzJiYoZSo9MTAwKSxhJiZcIlxcXFxcIj09PXRbUi0xXSYmKHQ9dC5zcGxpdChcIlxcXFxcIikuam9pbihcIlwiKSxhPSExKSwoYXx8cykmJihPPWE/Ty5jdXJyZW5jeTpPLnBlcmNlbnQsSD1PLmdyb3VwU2l6ZVswXSxOPU9bbV0sVj1PW2ddLFU9Ty5kZWNpbWFscyxvPU8uc3ltYm9sKSxEPXQuaW5kZXhPZihtKT4tMSxEJiYodD10LnJlcGxhY2UocCxmKSksRT10LmluZGV4T2YoZyksUz10Lmxlbmd0aCwtMSE9RT8oYj0oXCJcIitlKS5zcGxpdChcImVcIiksYj1iWzFdP2woZSxNYXRoLmFicyhiWzFdKSk6YlswXSxiPWIuc3BsaXQoZylbMV18fGYsUD10Lmxhc3RJbmRleE9mKF8pLUUsTT10Lmxhc3RJbmRleE9mKHYpLUUsST1QPi0xLHo9TT4tMSxDPWIubGVuZ3RoLEl8fHp8fCh0PXQuc3Vic3RyaW5nKDAsRSkrdC5zdWJzdHJpbmcoRSsxKSxTPXQubGVuZ3RoLEU9LTEsQz0wKSxJJiZQPk0/Qz1QOk0+UCYmKHomJkM+TT9DPU06SSYmUD5DJiYoQz1QKSksQz4tMSYmKGU9bChlLEMpKSk6ZT1sKGUpLE09dC5pbmRleE9mKHYpLEI9UD10LmluZGV4T2YoXyksWT0tMT09TSYmLTEhPVA/UDotMSE9TSYmLTE9PVA/TTpNPlA/UDpNLE09dC5sYXN0SW5kZXhPZih2KSxQPXQubGFzdEluZGV4T2YoXyksTD0tMT09TSYmLTEhPVA/UDotMSE9TSYmLTE9PVA/TTpNPlA/TTpQLFk9PVMmJihMPVkpLC0xIT1ZKXtpZigkPShcIlwiK2UpLnNwbGl0KGcpLHc9JFswXSxiPSRbMV18fGYsaz13Lmxlbmd0aCx4PWIubGVuZ3RoLEcmJi0xKmU+PTAmJihHPSExKSxEKWlmKGs9PT1IJiZFLUI+ayl3PU4rdztlbHNlIGlmKGs+SCl7Zm9yKCQ9ZixDPTA7az5DO0MrKylDPjAmJihrLUMpJUg9PT0wJiYoJCs9TiksJCs9dy5jaGFyQXQoQyk7dz0kfWZvcihlPXQuc3Vic3RyaW5nKDAsWSksRyYmIUEmJihlKz1cIi1cIiksQz1ZO1M+QztDKyspe2lmKFQ9dC5jaGFyQXQoQyksLTE9PUUpe2lmKGs+TC1DKXtlKz13O2JyZWFrfX1lbHNlIGlmKC0xIT1QJiZDPlAmJihxPWYpLGs+PUUtQyYmRS1DPi0xJiYoZSs9dyxDPUUpLEU9PT1DKXtlKz0oYj9WOmYpK2IsQys9TC1FKzE7Y29udGludWV9VD09PV8/KGUrPVQscT1UKTpUPT09diYmKGUrPXEpfWlmKEw+PVkmJihlKz10LnN1YnN0cmluZyhMKzEpKSxhfHxzKXtmb3IoJD1mLEM9MCxTPWUubGVuZ3RoO1M+QztDKyspVD1lLmNoYXJBdChDKSwkKz1cIiRcIj09PVR8fFwiJVwiPT09VD9vOlQ7ZT0kfWlmKFM9ai5sZW5ndGgpZm9yKEM9MDtTPkM7QysrKWU9ZS5yZXBsYWNlKHksaltDXSl9cmV0dXJuIGV9dmFyIGwsYyxkPS9kZGRkfGRkZHxkZHxkfE1NTU18TU1NfE1NfE18eXl5eXx5eXxISHxIfGhofGh8bW18bXxmZmZ8ZmZ8Znx0dHxzc3xzfHp6enx6enx6fFwiW15cIl0qXCJ8J1teJ10qJy9nLHU9L14obnxjfHB8ZSkoXFxkKikkL2ksaD0vKFxcXFwuKXwoWyddW14nXSpbJ10/KXwoW1wiXVteXCJdKltcIl0/KS9nLHA9L1xcLC9nLGY9XCJcIixnPVwiLlwiLG09XCIsXCIsdj1cIiNcIixfPVwiMFwiLHk9XCI/P1wiLHc9XCJlbi1VU1wiLGI9e30udG9TdHJpbmc7Z3QuY3VsdHVyZXNbXCJlbi1VU1wiXT17bmFtZTp3LG51bWJlckZvcm1hdDp7cGF0dGVybjpbXCItblwiXSxkZWNpbWFsczoyLFwiLFwiOlwiLFwiLFwiLlwiOlwiLlwiLGdyb3VwU2l6ZTpbM10scGVyY2VudDp7cGF0dGVybjpbXCItbiAlXCIsXCJuICVcIl0sZGVjaW1hbHM6MixcIixcIjpcIixcIixcIi5cIjpcIi5cIixncm91cFNpemU6WzNdLHN5bWJvbDpcIiVcIn0sY3VycmVuY3k6e3BhdHRlcm46W1wiKCRuKVwiLFwiJG5cIl0sZGVjaW1hbHM6MixcIixcIjpcIixcIixcIi5cIjpcIi5cIixncm91cFNpemU6WzNdLHN5bWJvbDpcIiRcIn19LGNhbGVuZGFyczp7c3RhbmRhcmQ6e2RheXM6e25hbWVzOltcIlN1bmRheVwiLFwiTW9uZGF5XCIsXCJUdWVzZGF5XCIsXCJXZWRuZXNkYXlcIixcIlRodXJzZGF5XCIsXCJGcmlkYXlcIixcIlNhdHVyZGF5XCJdLG5hbWVzQWJicjpbXCJTdW5cIixcIk1vblwiLFwiVHVlXCIsXCJXZWRcIixcIlRodVwiLFwiRnJpXCIsXCJTYXRcIl0sbmFtZXNTaG9ydDpbXCJTdVwiLFwiTW9cIixcIlR1XCIsXCJXZVwiLFwiVGhcIixcIkZyXCIsXCJTYVwiXX0sbW9udGhzOntuYW1lczpbXCJKYW51YXJ5XCIsXCJGZWJydWFyeVwiLFwiTWFyY2hcIixcIkFwcmlsXCIsXCJNYXlcIixcIkp1bmVcIixcIkp1bHlcIixcIkF1Z3VzdFwiLFwiU2VwdGVtYmVyXCIsXCJPY3RvYmVyXCIsXCJOb3ZlbWJlclwiLFwiRGVjZW1iZXJcIl0sbmFtZXNBYmJyOltcIkphblwiLFwiRmViXCIsXCJNYXJcIixcIkFwclwiLFwiTWF5XCIsXCJKdW5cIixcIkp1bFwiLFwiQXVnXCIsXCJTZXBcIixcIk9jdFwiLFwiTm92XCIsXCJEZWNcIl19LEFNOltcIkFNXCIsXCJhbVwiLFwiQU1cIl0sUE06W1wiUE1cIixcInBtXCIsXCJQTVwiXSxwYXR0ZXJuczp7ZDpcIk0vZC95eXl5XCIsRDpcImRkZGQsIE1NTU0gZGQsIHl5eXlcIixGOlwiZGRkZCwgTU1NTSBkZCwgeXl5eSBoOm1tOnNzIHR0XCIsZzpcIk0vZC95eXl5IGg6bW0gdHRcIixHOlwiTS9kL3l5eXkgaDptbTpzcyB0dFwiLG06XCJNTU1NIGRkXCIsTTpcIk1NTU0gZGRcIixzOlwieXl5eSctJ01NJy0nZGRUSEgnOidtbSc6J3NzXCIsdDpcImg6bW0gdHRcIixUOlwiaDptbTpzcyB0dFwiLHU6XCJ5eXl5Jy0nTU0nLSdkZCBISCc6J21tJzonc3MnWidcIix5OlwiTU1NTSwgeXl5eVwiLFk6XCJNTU1NLCB5eXl5XCJ9LFwiL1wiOlwiL1wiLFwiOlwiOlwiOlwiLGZpcnN0RGF5OjAsdHdvRGlnaXRZZWFyTWF4OjIwMjl9fX0sZ3QuY3VsdHVyZT1mdW5jdGlvbihlKXt2YXIgaSxvPWd0LmN1bHR1cmVzO3JldHVybiBlPT09bj9vLmN1cnJlbnQ6KGk9dChlKXx8b1t3XSxpLmNhbGVuZGFyPWkuY2FsZW5kYXJzLnN0YW5kYXJkLG8uY3VycmVudD1pLE90JiYhT3QubG9hZCYmcihpLm51bWJlckZvcm1hdCksbil9LGd0LmZpbmRDdWx0dXJlPXQsZ3QuZ2V0Q3VsdHVyZT1pLGd0LmN1bHR1cmUodyksbD1mdW5jdGlvbihlLHQpe3JldHVybiB0PXR8fDAsZT0oXCJcIitlKS5zcGxpdChcImVcIiksZT1NYXRoLnJvdW5kKCsoZVswXStcImVcIisoZVsxXT8rZVsxXSt0OnQpKSksZT0oXCJcIitlKS5zcGxpdChcImVcIiksZT0rKGVbMF0rXCJlXCIrKGVbMV0/K2VbMV0tdDotdCkpLGUudG9GaXhlZCh0KX0sYz1mdW5jdGlvbihlLHQsaSl7aWYodCl7aWYoXCJbb2JqZWN0IERhdGVdXCI9PT1iLmNhbGwoZSkpcmV0dXJuIGEoZSx0LGkpO2lmKHR5cGVvZiBlPT09TXQpcmV0dXJuIHMoZSx0LGkpfXJldHVybiBlIT09bj9lOlwiXCJ9LE90JiYhT3QubG9hZCYmKGM9ZnVuY3Rpb24odCxuLGkpe3JldHVybiBlLmlzUGxhaW5PYmplY3QoaSkmJihpPWkubmFtZSksT3QuZm9ybWF0KHQsbixpKX0pLGd0LmZvcm1hdD1mdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHM7cmV0dXJuIGUucmVwbGFjZShTdCxmdW5jdGlvbihlLG4saSl7dmFyIHI9dFtwYXJzZUludChuLDEwKSsxXTtyZXR1cm4gYyhyLGk/aS5zdWJzdHJpbmcoMSk6XCJcIil9KX0sZ3QuX2V4dHJhY3RGb3JtYXQ9ZnVuY3Rpb24oZSl7cmV0dXJuXCJ7MDpcIj09PWUuc2xpY2UoMCwzKSYmKGU9ZS5zbGljZSgzLGUubGVuZ3RoLTEpKSxlfSxndC5fYWN0aXZlRWxlbWVudD1mdW5jdGlvbigpe3RyeXtyZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudH1jYXRjaChlKXtyZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFjdGl2ZUVsZW1lbnR9fSxndC5fcm91bmQ9bCxndC50b1N0cmluZz1jfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLHQsbil7cmV0dXJuIShlPj10JiZuPj1lKX1mdW5jdGlvbiBpKGUpe3JldHVybiBlLmNoYXJBdCgwKX1mdW5jdGlvbiByKHQpe3JldHVybiBlLm1hcCh0LGkpfWZ1bmN0aW9uIG8oZSx0KXt0fHwyMyE9PWUuZ2V0SG91cnMoKXx8ZS5zZXRIb3VycyhlLmdldEhvdXJzKCkrMil9ZnVuY3Rpb24gYShlKXtmb3IodmFyIHQ9MCxuPWUubGVuZ3RoLGk9W107bj50O3QrKylpW3RdPShlW3RdK1wiXCIpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGl9ZnVuY3Rpb24gcyhlKXt2YXIgdCxuPXt9O2Zvcih0IGluIGUpblt0XT1hKGVbdF0pO3JldHVybiBufWZ1bmN0aW9uIGwoZSxpLGEpe2lmKCFlKXJldHVybiBudWxsO3ZhciBsLGMsZCx1LGYsZyxtLF8seSx3LGIsayx4LEM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7aVtCXT09PWU7KXQrKyxCKys7cmV0dXJuIHQ+MCYmKEItPTEpLHR9LFM9ZnVuY3Rpb24odCl7dmFyIG49dlt0XXx8UmVnRXhwKFwiXlxcXFxkezEsXCIrdCtcIn1cIiksaT1lLnN1YnN0cihMLHQpLm1hdGNoKG4pO3JldHVybiBpPyhpPWlbMF0sTCs9aS5sZW5ndGgscGFyc2VJbnQoaSwxMCkpOm51bGx9LFQ9ZnVuY3Rpb24odCxuKXtmb3IodmFyIGkscixvLGE9MCxzPXQubGVuZ3RoO3M+YTthKyspaWYoaT10W2FdLHI9aS5sZW5ndGgsbz1lLnN1YnN0cihMLHIpLG4mJihvPW8udG9Mb3dlckNhc2UoKSksbz09aSlyZXR1cm4gTCs9cixhKzE7cmV0dXJuIG51bGx9LEQ9ZnVuY3Rpb24oKXt2YXIgdD0hMTtyZXR1cm4gZS5jaGFyQXQoTCk9PT1pW0JdJiYoTCsrLHQ9ITApLHR9LEE9YS5jYWxlbmRhcnMuc3RhbmRhcmQsRT1udWxsLE09bnVsbCxQPW51bGwsST1udWxsLHo9bnVsbCxGPW51bGwsUj1udWxsLEI9MCxMPTAsTz0hMSxIPW5ldyBEYXRlLE49QS50d29EaWdpdFllYXJNYXh8fDIwMjksVj1ILmdldEZ1bGxZZWFyKCk7Zm9yKGl8fChpPVwiZFwiKSx1PUEucGF0dGVybnNbaV0sdSYmKGk9dSksaT1pLnNwbGl0KFwiXCIpLGQ9aS5sZW5ndGg7ZD5CO0IrKylpZihsPWlbQl0sTylcIidcIj09PWw/Tz0hMTpEKCk7ZWxzZSBpZihcImRcIj09PWwpe2lmKGM9QyhcImRcIiksQS5fbG93ZXJEYXlzfHwoQS5fbG93ZXJEYXlzPXMoQS5kYXlzKSksUD0zPmM/UygyKTpUKEEuX2xvd2VyRGF5c1szPT1jP1wibmFtZXNBYmJyXCI6XCJuYW1lc1wiXSwhMCksbnVsbD09PVB8fHQoUCwxLDMxKSlyZXR1cm4gbnVsbH1lbHNlIGlmKFwiTVwiPT09bCl7aWYoYz1DKFwiTVwiKSxBLl9sb3dlck1vbnRoc3x8KEEuX2xvd2VyTW9udGhzPXMoQS5tb250aHMpKSxNPTM+Yz9TKDIpOlQoQS5fbG93ZXJNb250aHNbMz09Yz9cIm5hbWVzQWJiclwiOlwibmFtZXNcIl0sITApLG51bGw9PT1NfHx0KE0sMSwxMikpcmV0dXJuIG51bGw7TS09MX1lbHNlIGlmKFwieVwiPT09bCl7aWYoYz1DKFwieVwiKSxFPVMoYyksbnVsbD09PUUpcmV0dXJuIG51bGw7Mj09YyYmKFwic3RyaW5nXCI9PXR5cGVvZiBOJiYoTj1WK3BhcnNlSW50KE4sMTApKSxFPVYtViUxMDArRSxFPk4mJihFLT0xMDApKX1lbHNlIGlmKFwiaFwiPT09bCl7aWYoQyhcImhcIiksST1TKDIpLDEyPT1JJiYoST0wKSxudWxsPT09SXx8dChJLDAsMTEpKXJldHVybiBudWxsfWVsc2UgaWYoXCJIXCI9PT1sKXtpZihDKFwiSFwiKSxJPVMoMiksbnVsbD09PUl8fHQoSSwwLDIzKSlyZXR1cm4gbnVsbH1lbHNlIGlmKFwibVwiPT09bCl7aWYoQyhcIm1cIiksej1TKDIpLG51bGw9PT16fHx0KHosMCw1OSkpcmV0dXJuIG51bGx9ZWxzZSBpZihcInNcIj09PWwpe2lmKEMoXCJzXCIpLEY9UygyKSxudWxsPT09Rnx8dChGLDAsNTkpKXJldHVybiBudWxsfWVsc2UgaWYoXCJmXCI9PT1sKXtpZihjPUMoXCJmXCIpLHg9ZS5zdWJzdHIoTCxjKS5tYXRjaCh2WzNdKSxSPVMoYyksbnVsbCE9PVImJih4PXhbMF0ubGVuZ3RoLDM+eCYmKFIqPU1hdGgucG93KDEwLDMteCkpLGM+MyYmKFI9cGFyc2VJbnQoKFwiXCIrUikuc3Vic3RyaW5nKDAsMyksMTApKSksbnVsbD09PVJ8fHQoUiwwLDk5OSkpcmV0dXJuIG51bGx9ZWxzZSBpZihcInRcIj09PWwpe2lmKGM9QyhcInRcIiksXz1BLkFNLHk9QS5QTSwxPT09YyYmKF89cihfKSx5PXIoeSkpLGY9VCh5KSwhZiYmIVQoXykpcmV0dXJuIG51bGx9ZWxzZSBpZihcInpcIj09PWwpe2lmKGc9ITAsYz1DKFwielwiKSxcIlpcIj09PWUuc3Vic3RyKEwsMSkpe0QoKTtjb250aW51ZX1pZihtPWUuc3Vic3RyKEwsNikubWF0Y2goYz4yP3A6aCksIW0pcmV0dXJuIG51bGw7aWYobT1tWzBdLnNwbGl0KFwiOlwiKSx3PW1bMF0sYj1tWzFdLCFiJiZ3Lmxlbmd0aD4zJiYoTD13Lmxlbmd0aC0yLGI9dy5zdWJzdHJpbmcoTCksdz13LnN1YnN0cmluZygwLEwpKSx3PXBhcnNlSW50KHcsMTApLHQodywtMTIsMTMpKXJldHVybiBudWxsO2lmKGM+MiYmKGI9cGFyc2VJbnQoYiwxMCksaXNOYU4oYil8fHQoYiwwLDU5KSkpcmV0dXJuIG51bGx9ZWxzZSBpZihcIidcIj09PWwpTz0hMCxEKCk7ZWxzZSBpZighRCgpKXJldHVybiBudWxsO3JldHVybiBrPW51bGwhPT1JfHxudWxsIT09enx8Rnx8bnVsbCxudWxsPT09RSYmbnVsbD09PU0mJm51bGw9PT1QJiZrPyhFPVYsTT1ILmdldE1vbnRoKCksUD1ILmdldERhdGUoKSk6KG51bGw9PT1FJiYoRT1WKSxudWxsPT09UCYmKFA9MSkpLGYmJjEyPkkmJihJKz0xMiksZz8odyYmKEkrPS13KSxiJiYoeis9LWIpLGU9bmV3IERhdGUoRGF0ZS5VVEMoRSxNLFAsSSx6LEYsUikpKTooZT1uZXcgRGF0ZShFLE0sUCxJLHosRixSKSxvKGUsSSkpLDEwMD5FJiZlLnNldEZ1bGxZZWFyKEUpLGUuZ2V0RGF0ZSgpIT09UCYmZz09PW4/bnVsbDplfWZ1bmN0aW9uIGMoZSl7dmFyIHQ9XCItXCI9PT1lLnN1YnN0cigwLDEpPy0xOjE7cmV0dXJuIGU9ZS5zdWJzdHJpbmcoMSksZT02MCpwYXJzZUludChlLnN1YnN0cigwLDIpLDEwKStwYXJzZUludChlLnN1YnN0cmluZygyKSwxMCksdCplfXZhciBkPS9cXHUwMEEwL2csdT0vW2VFXVtcXC0rXT9bMC05XSsvLGg9L1srfFxcLV1cXGR7MSwyfS8scD0vWyt8XFwtXVxcZHsxLDJ9Oj9cXGR7Mn0vLGY9L15cXC9EYXRlXFwoKC4qPylcXClcXC8kLyxnPS9bKy1dXFxkKi8sbT1bXCJHXCIsXCJnXCIsXCJkXCIsXCJGXCIsXCJEXCIsXCJ5XCIsXCJtXCIsXCJUXCIsXCJ0XCJdLHY9ezI6L15cXGR7MSwyfS8sMzovXlxcZHsxLDN9Lyw0Oi9eXFxkezR9L30sXz17fS50b1N0cmluZztndC5wYXJzZURhdGU9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhLHM7aWYoXCJbb2JqZWN0IERhdGVdXCI9PT1fLmNhbGwoZSkpcmV0dXJuIGU7aWYoaT0wLHI9bnVsbCxlJiYwPT09ZS5pbmRleE9mKFwiL0RcIikmJihyPWYuZXhlYyhlKSkpcmV0dXJuIHI9clsxXSxzPWcuZXhlYyhyLnN1YnN0cmluZygxKSkscj1uZXcgRGF0ZShwYXJzZUludChyLDEwKSkscyYmKHM9YyhzWzBdKSxyPWd0LnRpbWV6b25lLmFwcGx5KHIsMCkscj1ndC50aW1lem9uZS5jb252ZXJ0KHIsMCwtMSpzKSkscjtpZihuPWd0LmdldEN1bHR1cmUobiksIXQpe2Zvcih0PVtdLGE9bi5jYWxlbmRhci5wYXR0ZXJucyxvPW0ubGVuZ3RoO28+aTtpKyspdFtpXT1hW21baV1dO2k9MCx0PVtcInl5eXkvTU0vZGQgSEg6bW06c3NcIixcInl5eXkvTU0vZGQgSEg6bW1cIixcInl5eXkvTU0vZGRcIixcImRkZCBNTU0gZGQgeXl5eSBISDptbTpzc1wiLFwieXl5eS1NTS1kZFRISDptbTpzcy5mZmZmZmZmenp6XCIsXCJ5eXl5LU1NLWRkVEhIOm1tOnNzLmZmZnp6elwiLFwieXl5eS1NTS1kZFRISDptbTpzc3p6elwiLFwieXl5eS1NTS1kZFRISDptbTpzcy5mZmZmZmZmXCIsXCJ5eXl5LU1NLWRkVEhIOm1tOnNzLmZmZlwiLFwieXl5eS1NTS1kZFRISDptbXp6elwiLFwieXl5eS1NTS1kZFRISDptbXp6XCIsXCJ5eXl5LU1NLWRkVEhIOm1tOnNzXCIsXCJ5eXl5LU1NLWRkVEhIOm1tXCIsXCJ5eXl5LU1NLWRkIEhIOm1tOnNzXCIsXCJ5eXl5LU1NLWRkIEhIOm1tXCIsXCJ5eXl5LU1NLWRkXCIsXCJISDptbTpzc1wiLFwiSEg6bW1cIl0uY29uY2F0KHQpfWZvcih0PV90KHQpP3Q6W3RdLG89dC5sZW5ndGg7bz5pO2krKylpZihyPWwoZSx0W2ldLG4pKXJldHVybiByO3JldHVybiByfSxndC5wYXJzZUludD1mdW5jdGlvbihlLHQpe3ZhciBuPWd0LnBhcnNlRmxvYXQoZSx0KTtyZXR1cm4gbiYmKG49MHxuKSxufSxndC5wYXJzZUZsb2F0PWZ1bmN0aW9uKGUsdCxuKXtpZighZSYmMCE9PWUpcmV0dXJuIG51bGw7aWYodHlwZW9mIGU9PT1NdClyZXR1cm4gZTtlPVwiXCIrZSx0PWd0LmdldEN1bHR1cmUodCk7dmFyIGkscixvPXQubnVtYmVyRm9ybWF0LGE9by5wZXJjZW50LHM9by5jdXJyZW5jeSxsPXMuc3ltYm9sLGM9YS5zeW1ib2wsaD1lLmluZGV4T2YoXCItXCIpO3JldHVybiB1LnRlc3QoZSk/KGU9cGFyc2VGbG9hdChlLnJlcGxhY2Uob1tcIi5cIl0sXCIuXCIpKSxpc05hTihlKSYmKGU9bnVsbCksZSk6aD4wP251bGw6KGg9aD4tMSxlLmluZGV4T2YobCk+LTF8fG4mJm4udG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiY1wiKT4tMT8obz1zLGk9by5wYXR0ZXJuWzBdLnJlcGxhY2UoXCIkXCIsbCkuc3BsaXQoXCJuXCIpLGUuaW5kZXhPZihpWzBdKT4tMSYmZS5pbmRleE9mKGlbMV0pPi0xJiYoZT1lLnJlcGxhY2UoaVswXSxcIlwiKS5yZXBsYWNlKGlbMV0sXCJcIiksaD0hMCkpOmUuaW5kZXhPZihjKT4tMSYmKHI9ITAsbz1hLGw9YyksZT1lLnJlcGxhY2UoXCItXCIsXCJcIikucmVwbGFjZShsLFwiXCIpLnJlcGxhY2UoZCxcIiBcIikuc3BsaXQob1tcIixcIl0ucmVwbGFjZShkLFwiIFwiKSkuam9pbihcIlwiKS5yZXBsYWNlKG9bXCIuXCJdLFwiLlwiKSxlPXBhcnNlRmxvYXQoZSksaXNOYU4oZSk/ZT1udWxsOmgmJihlKj0tMSksZSYmciYmKGUvPTEwMCksZSl9LE90JiYhT3QubG9hZCYmKGd0LnBhcnNlRGF0ZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuXCJbb2JqZWN0IERhdGVdXCI9PT1fLmNhbGwoZSk/ZTpPdC5wYXJzZURhdGUoZSx0LG4pfSxndC5wYXJzZUZsb2F0PWZ1bmN0aW9uKHQsaSl7cmV0dXJuIHR5cGVvZiB0PT09TXQ/dDp0PT09bnx8bnVsbD09PXQ/bnVsbDooZS5pc1BsYWluT2JqZWN0KGkpJiYoaT1pLm5hbWUpLHQ9T3QucGFyc2VGbG9hdCh0LGkpLGlzTmFOKHQpP251bGw6dCl9KX0oKSxmdW5jdGlvbigpe3ZhciBpLHIsbyxhLHMsbCxjO3h0Ll9zY3JvbGxiYXI9bix4dC5zY3JvbGxiYXI9ZnVuY3Rpb24oZSl7aWYoaXNOYU4oeHQuX3Njcm9sbGJhcil8fGUpe3ZhciB0LG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXR1cm4gbi5zdHlsZS5jc3NUZXh0PVwib3ZlcmZsb3c6c2Nyb2xsO292ZXJmbG93LXg6aGlkZGVuO3pvb206MTtjbGVhcjpib3RoO2Rpc3BsYXk6YmxvY2tcIixuLmlubmVySFRNTD1cIiZuYnNwO1wiLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobikseHQuX3Njcm9sbGJhcj10PW4ub2Zmc2V0V2lkdGgtbi5zY3JvbGxXaWR0aCxkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG4pLHR9cmV0dXJuIHh0Ll9zY3JvbGxiYXJ9LHh0LmlzUnRsPWZ1bmN0aW9uKHQpe3JldHVybiBlKHQpLmNsb3Nlc3QoXCIuay1ydGxcIikubGVuZ3RoPjB9LGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRhYmxlXCIpO3RyeXtpLmlubmVySFRNTD1cIjx0cj48dGQ+PC90ZD48L3RyPlwiLHh0LnRib2R5SW5uZXJIdG1sPSEwfWNhdGNoKHUpe3h0LnRib2R5SW5uZXJIdG1sPSExfXh0LnRvdWNoPVwib250b3VjaHN0YXJ0XCJpbiB0LHh0Lm1zUG9pbnRlcnM9dC5NU1BvaW50ZXJFdmVudCx4dC5wb2ludGVycz10LlBvaW50ZXJFdmVudCxyPXh0LnRyYW5zaXRpb25zPSExLG89eHQudHJhbnNmb3Jtcz0hMSxhPVwiSFRNTEVsZW1lbnRcImluIHQ/SFRNTEVsZW1lbnQucHJvdG90eXBlOltdLHh0Lmhhc0hXM0Q9XCJXZWJLaXRDU1NNYXRyaXhcImluIHQmJlwibTExXCJpbiBuZXcgdC5XZWJLaXRDU1NNYXRyaXh8fFwiTW96UGVyc3BlY3RpdmVcImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZXx8XCJtc1BlcnNwZWN0aXZlXCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUsdnQoW1wiTW96XCIsXCJ3ZWJraXRcIixcIk9cIixcIm1zXCJdLGZ1bmN0aW9uKCl7dmFyIGUsdD1cIlwiK3RoaXMsYT10eXBlb2YgaS5zdHlsZVt0K1wiVHJhbnNpdGlvblwiXT09PUV0O3JldHVybiBhfHx0eXBlb2YgaS5zdHlsZVt0K1wiVHJhbnNmb3JtXCJdPT09RXQ/KGU9dC50b0xvd2VyQ2FzZSgpLG89e2NzczpcIm1zXCIhPWU/XCItXCIrZStcIi1cIjpcIlwiLHByZWZpeDp0LGV2ZW50Olwib1wiPT09ZXx8XCJ3ZWJraXRcIj09PWU/ZTpcIlwifSxhJiYocj1vLHIuZXZlbnQ9ci5ldmVudD9yLmV2ZW50K1wiVHJhbnNpdGlvbkVuZFwiOlwidHJhbnNpdGlvbmVuZFwiKSwhMSk6bn0pLGk9bnVsbCx4dC50cmFuc2Zvcm1zPW8seHQudHJhbnNpdGlvbnM9cix4dC5kZXZpY2VQaXhlbFJhdGlvPXQuZGV2aWNlUGl4ZWxSYXRpbz09PW4/MTp0LmRldmljZVBpeGVsUmF0aW87dHJ5e3h0LnNjcmVlbldpZHRoPXQub3V0ZXJXaWR0aHx8dC5zY3JlZW4/dC5zY3JlZW4uYXZhaWxXaWR0aDp0LmlubmVyV2lkdGgseHQuc2NyZWVuSGVpZ2h0PXQub3V0ZXJIZWlnaHR8fHQuc2NyZWVuP3Quc2NyZWVuLmF2YWlsSGVpZ2h0OnQuaW5uZXJIZWlnaHR9Y2F0Y2godSl7eHQuc2NyZWVuV2lkdGg9dC5zY3JlZW4uYXZhaWxXaWR0aCx4dC5zY3JlZW5IZWlnaHQ9dC5zY3JlZW4uYXZhaWxIZWlnaHR9eHQuZGV0ZWN0T1M9ZnVuY3Rpb24oZSl7dmFyIG4saSxyPSExLG89W10sYT0hL21vYmlsZSBzYWZhcmkvaS50ZXN0KGUpLHM9e3dwOi8oV2luZG93cyBQaG9uZSg/OiBPUyk/KVxccyhcXGQrKVxcLihcXGQrKFxcLlxcZCspPykvLGZpcmU6LyhTaWxrKVxcLyhcXGQrKVxcLihcXGQrKFxcLlxcZCspPykvLGFuZHJvaWQ6LyhBbmRyb2lkfEFuZHJvaWQuKig/Ok9wZXJhfEZpcmVmb3gpLio/XFwvKVxccyooXFxkKylcXC4oXFxkKyhcXC5cXGQrKT8pLyxpcGhvbmU6LyhpUGhvbmV8aVBvZCkuKk9TXFxzKyhcXGQrKVtcXC5fXShbXFxkXFwuX10rKS8saXBhZDovKGlQYWQpLipPU1xccysoXFxkKylbXFwuX10oW1xcZF9dKykvLG1lZWdvOi8oTWVlR28pLitOb2tpYUJyb3dzZXJcXC8oXFxkKylcXC4oW1xcZFxcLl9dKykvLHdlYm9zOi8od2ViT1MpXFwvKFxcZCspXFwuKFxcZCsoXFwuXFxkKyk/KS8sYmxhY2tiZXJyeTovKEJsYWNrQmVycnl8QkIxMCkuKj9WZXJzaW9uXFwvKFxcZCspXFwuKFxcZCsoXFwuXFxkKyk/KS8scGxheWJvb2s6LyhQbGF5Qm9vaykuKj9UYWJsZXRcXHMqT1NcXHMqKFxcZCspXFwuKFxcZCsoXFwuXFxkKyk/KS8sd2luZG93czovKE1TSUUpXFxzKyhcXGQrKVxcLihcXGQrKFxcLlxcZCspPykvLHRpemVuOi8odGl6ZW4pLio/VmVyc2lvblxcLyhcXGQrKVxcLihcXGQrKFxcLlxcZCspPykvaSxzYWlsZmlzaDovKHNhaWxmaXNoKS4qcnY6KFxcZCspXFwuKFxcZCsoXFwuXFxkKyk/KS4qZmlyZWZveC9pLGZmb3M6LyhNb2JpbGUpLipydjooXFxkKylcXC4oXFxkKyhcXC5cXGQrKT8pLipGaXJlZm94L30sbD17aW9zOi9eaShwaG9uZXxwYWR8cG9kKSQvaSxhbmRyb2lkOi9eYW5kcm9pZHxmaXJlJC9pLGJsYWNrYmVycnk6L15ibGFja2JlcnJ5fHBsYXlib29rL2ksd2luZG93czovd2luZG93cy8sd3A6L3dwLyxmbGF0Oi9zYWlsZmlzaHxmZm9zfHRpemVuL2ksbWVlZ286L21lZWdvL30sYz17dGFibGV0Oi9wbGF5Ym9va3xpcGFkfGZpcmUvaX0sdT17b21pbmk6L09wZXJhXFxzTWluaS9pLG9tb2JpbGU6L09wZXJhXFxzTW9iaS9pLGZpcmVmb3g6L0ZpcmVmb3h8RmVubmVjL2ksbW9iaWxlc2FmYXJpOi92ZXJzaW9uXFwvLipzYWZhcmkvaSxpZTovTVNJRXxXaW5kb3dzXFxzUGhvbmUvaSxjaHJvbWU6L2Nocm9tZXxjcmlvcy9pLHdlYmtpdDovd2Via2l0L2l9O2ZvcihpIGluIHMpaWYocy5oYXNPd25Qcm9wZXJ0eShpKSYmKG89ZS5tYXRjaChzW2ldKSkpe2lmKFwid2luZG93c1wiPT1pJiZcInBsdWdpbnNcImluIG5hdmlnYXRvcilyZXR1cm4hMTtyPXt9LHIuZGV2aWNlPWksci50YWJsZXQ9ZChpLGMsITEpLHIuYnJvd3Nlcj1kKGUsdSxcImRlZmF1bHRcIiksci5uYW1lPWQoaSxsKSxyW3IubmFtZV09ITAsci5tYWpvclZlcnNpb249b1syXSxyLm1pbm9yVmVyc2lvbj1vWzNdLnJlcGxhY2UoXCJfXCIsXCIuXCIpLG49ci5taW5vclZlcnNpb24ucmVwbGFjZShcIi5cIixcIlwiKS5zdWJzdHIoMCwyKSxyLmZsYXRWZXJzaW9uPXIubWFqb3JWZXJzaW9uK24rQXJyYXkoMy0oMz5uLmxlbmd0aD9uLmxlbmd0aDoyKSkuam9pbihcIjBcIiksci5jb3Jkb3ZhPXR5cGVvZiB0LlBob25lR2FwIT09RnR8fHR5cGVvZiB0LmNvcmRvdmEhPT1GdCxyLmFwcE1vZGU9dC5uYXZpZ2F0b3Iuc3RhbmRhbG9uZXx8L2ZpbGV8bG9jYWx8d21hcHAvLnRlc3QodC5sb2NhdGlvbi5wcm90b2NvbCl8fHIuY29yZG92YSxyLmFuZHJvaWQmJigxLjU+eHQuZGV2aWNlUGl4ZWxSYXRpbyYmNDAwPnIuZmxhdFZlcnNpb258fGEpJiYoeHQuc2NyZWVuV2lkdGg+ODAwfHx4dC5zY3JlZW5IZWlnaHQ+ODAwKSYmKHIudGFibGV0PWkpO2JyZWFrfXJldHVybiByfSxzPXh0Lm1vYmlsZU9TPXh0LmRldGVjdE9TKG5hdmlnYXRvci51c2VyQWdlbnQpLHh0LndwRGV2aWNlUGl4ZWxSYXRpbz1zLndwP3NjcmVlbi53aWR0aC8zMjA6MCx4dC5raW5ldGljU2Nyb2xsTmVlZGVkPXMmJih4dC50b3VjaHx8eHQubXNQb2ludGVyc3x8eHQucG9pbnRlcnMpLHh0Lmhhc05hdGl2ZVNjcm9sbGluZz0hMSwocy5pb3N8fHMuYW5kcm9pZCYmcy5tYWpvclZlcnNpb24+Mnx8cy53cCkmJih4dC5oYXNOYXRpdmVTY3JvbGxpbmc9cykseHQubW91c2VBbmRUb3VjaFByZXNlbnQ9eHQudG91Y2gmJiEoeHQubW9iaWxlT1MuaW9zfHx4dC5tb2JpbGVPUy5hbmRyb2lkKSx4dC5kZXRlY3RCcm93c2VyPWZ1bmN0aW9uKGUpe3ZhciB0LG49ITEsaT1bXSxyPXt3ZWJraXQ6LyhjaHJvbWUpWyBcXC9dKFtcXHcuXSspL2ksc2FmYXJpOi8od2Via2l0KVsgXFwvXShbXFx3Ll0rKS9pLG9wZXJhOi8ob3BlcmEpKD86Lip2ZXJzaW9ufClbIFxcL10oW1xcdy5dKykvaSxtc2llOi8obXNpZVxcc3x0cmlkZW50Lio/IHJ2OikoW1xcdy5dKykvaSxtb3ppbGxhOi8obW96aWxsYSkoPzouKj8gcnY6KFtcXHcuXSspfCkvaX07Zm9yKHQgaW4gcilpZihyLmhhc093blByb3BlcnR5KHQpJiYoaT1lLm1hdGNoKHJbdF0pKSl7bj17fSxuW3RdPSEwLG5baVsxXS50b0xvd2VyQ2FzZSgpLnNwbGl0KFwiIFwiKVswXS5zcGxpdChcIi9cIilbMF1dPSEwLG4udmVyc2lvbj1wYXJzZUludChkb2N1bWVudC5kb2N1bWVudE1vZGV8fGlbMl0sMTApO2JyZWFrfXJldHVybiBufSx4dC5icm93c2VyPXh0LmRldGVjdEJyb3dzZXIobmF2aWdhdG9yLnVzZXJBZ2VudCkseHQuem9vbUxldmVsPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB4dC50b3VjaD9kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgvdC5pbm5lcldpZHRoOnh0LmJyb3dzZXIubXNpZSYmeHQuYnJvd3Nlci52ZXJzaW9uPj0xMD8odG9wfHx0KS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0V2lkdGgvKHRvcHx8dCkuaW5uZXJXaWR0aDoxfWNhdGNoKGUpe3JldHVybiAxfX0seHQuY3NzQm9yZGVyU3BhY2luZz1uIT09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLmJvcmRlclNwYWNpbmcmJiEoeHQuYnJvd3Nlci5tc2llJiY4Pnh0LmJyb3dzZXIudmVyc2lvbiksZnVuY3Rpb24odCl7dmFyIG49XCJcIixpPWUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSxyPXBhcnNlSW50KHQudmVyc2lvbiwxMCk7dC5tc2llP249XCJpZVwiOnQubW96aWxsYT9uPVwiZmZcIjp0LnNhZmFyaT9uPVwic2FmYXJpXCI6dC53ZWJraXQ/bj1cIndlYmtpdFwiOnQub3BlcmEmJihuPVwib3BlcmFcIiksbiYmKG49XCJrLVwiK24rXCIgay1cIituK3IpLHh0Lm1vYmlsZU9TJiYobis9XCIgay1tb2JpbGVcIiksaS5hZGRDbGFzcyhuKX0oeHQuYnJvd3NlcikseHQuZXZlbnRDYXB0dXJlPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyLGw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLHh0LnBsYWNlaG9sZGVyPVwicGxhY2Vob2xkZXJcImluIGwseHQucHJvcGVydHlDaGFuZ2VFdmVudD1cIm9ucHJvcGVydHljaGFuZ2VcImluIGwseHQuaW5wdXQ9ZnVuY3Rpb24oKXtmb3IodmFyIGUsdD1bXCJudW1iZXJcIixcImRhdGVcIixcInRpbWVcIixcIm1vbnRoXCIsXCJ3ZWVrXCIsXCJkYXRldGltZVwiLFwiZGF0ZXRpbWUtbG9jYWxcIl0sbj10Lmxlbmd0aCxpPVwidGVzdFwiLHI9e30sbz0wO24+bztvKyspZT10W29dLGwuc2V0QXR0cmlidXRlKFwidHlwZVwiLGUpLGwudmFsdWU9aSxyW2UucmVwbGFjZShcIi1cIixcIlwiKV09XCJ0ZXh0XCIhPT1sLnR5cGUmJmwudmFsdWUhPT1pO3JldHVybiByfSgpLGwuc3R5bGUuY3NzVGV4dD1cImZsb2F0OmxlZnQ7XCIseHQuY3NzRmxvYXQ9ISFsLnN0eWxlLmNzc0Zsb2F0LGw9bnVsbCx4dC5zdGFibGVTb3J0PWZ1bmN0aW9uKCl7dmFyIGUsdD01MTMsbj1be2luZGV4OjAsZmllbGQ6XCJiXCJ9XTtmb3IoZT0xO3Q+ZTtlKyspbi5wdXNoKHtpbmRleDplLGZpZWxkOlwiYVwifSk7cmV0dXJuIG4uc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBlLmZpZWxkPnQuZmllbGQ/MTp0LmZpZWxkPmUuZmllbGQ/LTE6MH0pLDE9PT1uWzBdLmluZGV4fSgpLHh0Lm1hdGNoZXNTZWxlY3Rvcj1hLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8YS5tb3pNYXRjaGVzU2VsZWN0b3J8fGEubXNNYXRjaGVzU2VsZWN0b3J8fGEub01hdGNoZXNTZWxlY3Rvcnx8YS5tYXRjaGVzU2VsZWN0b3J8fGEubWF0Y2hlc3x8ZnVuY3Rpb24odCl7Zm9yKHZhciBuPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw/KHRoaXMucGFyZW50Tm9kZXx8ZG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwodCl8fFtdOmUodCksaT1uLmxlbmd0aDtpLS07KWlmKG5baV09PXRoaXMpcmV0dXJuITA7cmV0dXJuITF9LHh0LnB1c2hTdGF0ZT10Lmhpc3RvcnkmJnQuaGlzdG9yeS5wdXNoU3RhdGUsYz1kb2N1bWVudC5kb2N1bWVudE1vZGUseHQuaGFzaENoYW5nZT1cIm9uaGFzaGNoYW5nZVwiaW4gdCYmISh4dC5icm93c2VyLm1zaWUmJighY3x8OD49YykpfSgpLFY9e2xlZnQ6e3JldmVyc2U6XCJyaWdodFwifSxyaWdodDp7cmV2ZXJzZTpcImxlZnRcIn0sZG93bjp7cmV2ZXJzZTpcInVwXCJ9LHVwOntyZXZlcnNlOlwiZG93blwifSx0b3A6e3JldmVyc2U6XCJib3R0b21cIn0sYm90dG9tOntyZXZlcnNlOlwidG9wXCJ9LFwiaW5cIjp7cmV2ZXJzZTpcIm91dFwifSxvdXQ6e3JldmVyc2U6XCJpblwifX0sVT17fSxlLmV4dGVuZChVLHtlbmFibGVkOiEwLEVsZW1lbnQ6ZnVuY3Rpb24odCl7dGhpcy5lbGVtZW50PWUodCl9LHByb21pc2U6ZnVuY3Rpb24oZSx0KXtlLmlzKFwiOnZpc2libGVcIil8fGUuY3NzKHtkaXNwbGF5OmUuZGF0YShcIm9sZGRpc3BsYXlcIil8fFwiYmxvY2tcIn0pLmNzcyhcImRpc3BsYXlcIiksdC5oaWRlJiZlLmRhdGEoXCJvbGRkaXNwbGF5XCIsZS5jc3MoXCJkaXNwbGF5XCIpKS5oaWRlKCksdC5pbml0JiZ0LmluaXQoKSx0LmNvbXBsZXRlQ2FsbGJhY2smJnQuY29tcGxldGVDYWxsYmFjayhlKSxlLmRlcXVldWUoKX0sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuZW5hYmxlZD0hMSx0aGlzLnByb21pc2U9dGhpcy5wcm9taXNlU2hpbX0sZW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy5lbmFibGVkPSEwLHRoaXMucHJvbWlzZT10aGlzLmFuaW1hdGVkUHJvbWlzZX19KSxVLnByb21pc2VTaGltPVUucHJvbWlzZSxcImtlbmRvQW5pbWF0ZVwiaW4gZS5mbnx8bXQoZS5mbix7a2VuZG9TdG9wOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuc3RvcChlLHQpfSxrZW5kb0FuaW1hdGU6ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIHkodGhpcyxlLHQsbixpKX0sa2VuZG9BZGRDbGFzczpmdW5jdGlvbihlLHQpe3JldHVybiBndC50b2dnbGVDbGFzcyh0aGlzLGUsdCwhMCl9LGtlbmRvUmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZ3QudG9nZ2xlQ2xhc3ModGhpcyxlLHQsITEpfSxrZW5kb1RvZ2dsZUNsYXNzOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZ3QudG9nZ2xlQ2xhc3ModGhpcyxlLHQsbil9fSksVz0vJi9nLGo9LzwvZyxHPS9cIi9nLHE9LycvZywkPS8+L2csWT1mdW5jdGlvbihlKXtyZXR1cm4gZS50YXJnZXR9LHh0LnRvdWNoJiYoWT1mdW5jdGlvbihlKXt2YXIgdD1cIm9yaWdpbmFsRXZlbnRcImluIGU/ZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzOlwiY2hhbmdlZFRvdWNoZXNcImluIGU/ZS5jaGFuZ2VkVG91Y2hlczpudWxsO3JldHVybiB0P2RvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQodFswXS5jbGllbnRYLHRbMF0uY2xpZW50WSk6ZS50YXJnZXR9LHZ0KFtcInN3aXBlXCIsXCJzd2lwZUxlZnRcIixcInN3aXBlUmlnaHRcIixcInN3aXBlVXBcIixcInN3aXBlRG93blwiLFwiZG91YmxlVGFwXCIsXCJ0YXBcIl0sZnVuY3Rpb24odCxuKXtlLmZuW25dPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmJpbmQobixlKX19KSkseHQudG91Y2g/eHQubW9iaWxlT1M/KHh0Lm1vdXNlZG93bj1cInRvdWNoc3RhcnRcIix4dC5tb3VzZXVwPVwidG91Y2hlbmRcIix4dC5tb3VzZW1vdmU9XCJ0b3VjaG1vdmVcIix4dC5tb3VzZWNhbmNlbD1cInRvdWNoY2FuY2VsXCIseHQuY2xpY2s9XCJ0b3VjaGVuZFwiLHh0LnJlc2l6ZT1cIm9yaWVudGF0aW9uY2hhbmdlXCIpOih4dC5tb3VzZWRvd249XCJtb3VzZWRvd24gdG91Y2hzdGFydFwiLHh0Lm1vdXNldXA9XCJtb3VzZXVwIHRvdWNoZW5kXCIseHQubW91c2Vtb3ZlPVwibW91c2Vtb3ZlIHRvdWNobW92ZVwiLHh0Lm1vdXNlY2FuY2VsPVwibW91c2VsZWF2ZSB0b3VjaGNhbmNlbFwiLHh0LmNsaWNrPVwiY2xpY2tcIix4dC5yZXNpemU9XCJyZXNpemVcIik6eHQucG9pbnRlcnM/KHh0Lm1vdXNlbW92ZT1cInBvaW50ZXJtb3ZlXCIseHQubW91c2Vkb3duPVwicG9pbnRlcmRvd25cIix4dC5tb3VzZXVwPVwicG9pbnRlcnVwXCIseHQubW91c2VjYW5jZWw9XCJwb2ludGVyY2FuY2VsXCIseHQuY2xpY2s9XCJwb2ludGVydXBcIix4dC5yZXNpemU9XCJvcmllbnRhdGlvbmNoYW5nZSByZXNpemVcIik6eHQubXNQb2ludGVycz8oeHQubW91c2Vtb3ZlPVwiTVNQb2ludGVyTW92ZVwiLHh0Lm1vdXNlZG93bj1cIk1TUG9pbnRlckRvd25cIix4dC5tb3VzZXVwPVwiTVNQb2ludGVyVXBcIix4dC5tb3VzZWNhbmNlbD1cIk1TUG9pbnRlckNhbmNlbFwiLHh0LmNsaWNrPVwiTVNQb2ludGVyVXBcIix4dC5yZXNpemU9XCJvcmllbnRhdGlvbmNoYW5nZSByZXNpemVcIik6KHh0Lm1vdXNlbW92ZT1cIm1vdXNlbW92ZVwiLHh0Lm1vdXNlZG93bj1cIm1vdXNlZG93blwiLHh0Lm1vdXNldXA9XCJtb3VzZXVwXCIseHQubW91c2VjYW5jZWw9XCJtb3VzZWxlYXZlXCIseHQuY2xpY2s9XCJjbGlja1wiLHh0LnJlc2l6ZT1cInJlc2l6ZVwiKSxLPWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYT10fHxcImRcIixzPTE7Zm9yKGk9MCxyPWUubGVuZ3RoO3I+aTtpKyspbz1lW2ldLFwiXCIhPT1vJiYobj1vLmluZGV4T2YoXCJbXCIpLDAhPT1uJiYoLTE9PW4/bz1cIi5cIitvOihzKyssbz1cIi5cIitvLnN1YnN0cmluZygwLG4pK1wiIHx8IHt9KVwiK28uc3Vic3RyaW5nKG4pKSkscysrLGErPW8rKHItMT5pP1wiIHx8IHt9KVwiOlwiKVwiKSk7cmV0dXJuIEFycmF5KHMpLmpvaW4oXCIoXCIpK2F9LFE9L14oW2Etel0rOik/XFwvXFwvL2ksbXQoZ3Qse3VpOmd0LnVpfHx7fSxmeDpndC5meHx8dixlZmZlY3RzOmd0LmVmZmVjdHN8fFUsbW9iaWxlOmd0Lm1vYmlsZXx8e30sZGF0YTpndC5kYXRhfHx7fSxkYXRhdml6Omd0LmRhdGF2aXp8fHt9LGtleXM6e0lOU0VSVDo0NSxERUxFVEU6NDYsQkFDS1NQQUNFOjgsVEFCOjksRU5URVI6MTMsRVNDOjI3LExFRlQ6MzcsVVA6MzgsUklHSFQ6MzksRE9XTjo0MCxFTkQ6MzUsSE9NRTozNixTUEFDRUJBUjozMixQQUdFVVA6MzMsUEFHRURPV046MzQsRjI6MTEzLEYxMDoxMjEsRjEyOjEyMyxOVU1QQURfUExVUzoxMDcsTlVNUEFEX01JTlVTOjEwOSxOVU1QQURfRE9UOjExMH0sc3VwcG9ydDpndC5zdXBwb3J0fHx4dCxhbmltYXRlOmd0LmFuaW1hdGV8fHksbnM6XCJcIixhdHRyOmZ1bmN0aW9uKGUpe3JldHVyblwiZGF0YS1cIitndC5ucytlfSxnZXRTaGFkb3dzOmEsd3JhcDpzLGRlZXBFeHRlbmQ6bCxnZXRDb21wdXRlZFN0eWxlczpwLHNpemU6Zix0b0NhbWVsQ2FzZTpoLHRvSHlwaGVuczp1LGdldE9mZnNldDpndC5nZXRPZmZzZXR8fGcscGFyc2VFZmZlY3RzOmd0LnBhcnNlRWZmZWN0c3x8bSx0b2dnbGVDbGFzczpndC50b2dnbGVDbGFzc3x8dyxkaXJlY3Rpb25zOmd0LmRpcmVjdGlvbnN8fFYsT2JzZXJ2YWJsZTp6LENsYXNzOmksVGVtcGxhdGU6RSx0ZW1wbGF0ZTp5dChFLmNvbXBpbGUsRSkscmVuZGVyOnl0KEUucmVuZGVyLEUpLHN0cmluZ2lmeTp5dChrdC5zdHJpbmdpZnksa3QpLGV2ZW50VGFyZ2V0OlksaHRtbEVuY29kZTpiLGlzTG9jYWxVcmw6ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJiFRLnRlc3QoZSl9LGV4cHI6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlPWV8fFwiXCIsdHlwZW9mIHQ9PUV0JiYobj10LHQ9ITEpLG49bnx8XCJkXCIsZSYmXCJbXCIhPT1lLmNoYXJBdCgwKSYmKGU9XCIuXCIrZSksZT10P0soZS5zcGxpdChcIi5cIiksbik6bitlfSxnZXR0ZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lK3Q7cmV0dXJuIFJ0W25dPVJ0W25dfHxGdW5jdGlvbihcImRcIixcInJldHVybiBcIitndC5leHByKGUsdCkpfSxzZXR0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIEJ0W2VdPUJ0W2VdfHxGdW5jdGlvbihcImQsdmFsdWVcIixndC5leHByKGUpK1wiPXZhbHVlXCIpfSxhY2Nlc3NvcjpmdW5jdGlvbihlKXtyZXR1cm57Z2V0Omd0LmdldHRlcihlKSxzZXQ6Z3Quc2V0dGVyKGUpfX0sZ3VpZDpmdW5jdGlvbigpe3ZhciBlLHQsbj1cIlwiO2ZvcihlPTA7MzI+ZTtlKyspdD0xNipidC5yYW5kb20oKXwwLCg4PT1lfHwxMj09ZXx8MTY9PWV8fDIwPT1lKSYmKG4rPVwiLVwiKSxuKz0oMTI9PWU/NDoxNj09ZT8zJnR8ODp0KS50b1N0cmluZygxNik7cmV0dXJuIG59LHJvbGVTZWxlY3RvcjpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKC8oXFxTKykvZyxcIltcIitndC5hdHRyKFwicm9sZVwiKStcIj0kMV0sXCIpLnNsaWNlKDAsLTEpfSxkaXJlY3RpdmVTZWxlY3RvcjpmdW5jdGlvbihlKXt2YXIgdCxuPWUuc3BsaXQoXCIgXCIpO2lmKG4pZm9yKHQ9MDtuLmxlbmd0aD50O3QrKylcInZpZXdcIiE9blt0XSYmKG5bdF09blt0XS5yZXBsYWNlKC8oXFx3Kikodmlld3xiYXJ8c3RyaXB8b3ZlcikkLyxcIiQxLSQyXCIpKTtyZXR1cm4gbi5qb2luKFwiIFwiKS5yZXBsYWNlKC8oXFxTKykvZyxcImtlbmRvLW1vYmlsZS0kMSxcIikuc2xpY2UoMCwtMSl9LHRyaWdnZXJlZEJ5SW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuL14obGFiZWx8aW5wdXR8dGV4dGFyZWF8c2VsZWN0KSQvaS50ZXN0KGUudGFyZ2V0LnRhZ05hbWUpfSxsb2dUb0NvbnNvbGU6ZnVuY3Rpb24oZSl7dmFyIGk9dC5jb25zb2xlOyFndC5zdXBwcmVzc0xvZyYmbiE9PWkmJmkubG9nJiZpLmxvZyhlKX19KSxYPXouZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzO2kuZWxlbWVudD1ndC5qUXVlcnkoZSkuaGFuZGxlcihpKSxpLmFuZ3VsYXIoXCJpbml0XCIsdCksei5mbi5pbml0LmNhbGwoaSksbj10P3QuZGF0YVNvdXJjZTpudWxsLG4mJih0PW10KHt9LHQse2RhdGFTb3VyY2U6e319KSksdD1pLm9wdGlvbnM9bXQoITAse30saS5vcHRpb25zLHQpLG4mJih0LmRhdGFTb3VyY2U9biksaS5lbGVtZW50LmF0dHIoZ3QuYXR0cihcInJvbGVcIikpfHxpLmVsZW1lbnQuYXR0cihndC5hdHRyKFwicm9sZVwiKSwodC5uYW1lfHxcIlwiKS50b0xvd2VyQ2FzZSgpKSxpLmVsZW1lbnQuZGF0YShcImtlbmRvXCIrdC5wcmVmaXgrdC5uYW1lLGkpLGkuYmluZChpLmV2ZW50cyx0KX0sZXZlbnRzOltdLG9wdGlvbnM6e3ByZWZpeDpcIlwifSxfaGFzQmluZGluZ1RhcmdldDpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5lbGVtZW50WzBdLmtlbmRvQmluZGluZ1RhcmdldH0sX3RhYmluZGV4OmZ1bmN0aW9uKGUpe2U9ZXx8dGhpcy53cmFwcGVyO3ZhciB0PXRoaXMuZWxlbWVudCxuPVwidGFiaW5kZXhcIixpPWUuYXR0cihuKXx8dC5hdHRyKG4pO3QucmVtb3ZlQXR0cihuKSxlLmF0dHIobixpc05hTihpKT8wOmkpfSxzZXRPcHRpb25zOmZ1bmN0aW9uKHQpe3RoaXMuX3NldEV2ZW50cyh0KSxlLmV4dGVuZCh0aGlzLm9wdGlvbnMsdCl9LF9zZXRFdmVudHM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49dGhpcyxpPTAscj1uLmV2ZW50cy5sZW5ndGg7cj5pO2krKyl0PW4uZXZlbnRzW2ldLG4ub3B0aW9uc1t0XSYmZVt0XSYmbi51bmJpbmQodCxuLm9wdGlvbnNbdF0pO24uYmluZChuLmV2ZW50cyxlKX0scmVzaXplOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0U2l6ZSgpLG49dGhpcy5fc2l6ZTsoZXx8IW58fHQud2lkdGghPT1uLndpZHRofHx0LmhlaWdodCE9PW4uaGVpZ2h0KSYmKHRoaXMuX3NpemU9dCx0aGlzLl9yZXNpemUodCksdGhpcy50cmlnZ2VyKFwicmVzaXplXCIsdCkpfSxnZXRTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIGd0LmRpbWVuc2lvbnModGhpcy5lbGVtZW50KX0sc2l6ZTpmdW5jdGlvbihlKXtyZXR1cm4gZT8odGhpcy5zZXRTaXplKGUpLG4pOnRoaXMuZ2V0U2l6ZSgpfSxzZXRTaXplOmUubm9vcCxfcmVzaXplOmUubm9vcCxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLmVsZW1lbnQucmVtb3ZlRGF0YShcImtlbmRvXCIrZS5vcHRpb25zLnByZWZpeCtlLm9wdGlvbnMubmFtZSksZS5lbGVtZW50LnJlbW92ZURhdGEoXCJoYW5kbGVyXCIpLGUudW5iaW5kKCl9LGFuZ3VsYXI6ZnVuY3Rpb24oKXt9fSksSj1YLmV4dGVuZCh7ZGF0YUl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YVNvdXJjZS5mbGF0VmlldygpfSxfYW5ndWxhckl0ZW1zOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7bi5hbmd1bGFyKHQsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6bi5pdGVtcygpLGRhdGE6ZS5tYXAobi5kYXRhSXRlbXMoKSxmdW5jdGlvbihlKXtyZXR1cm57ZGF0YUl0ZW06ZX19KX19KX19KSxndC5kaW1lbnNpb25zPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZVswXTtyZXR1cm4gdCYmZS5jc3ModCkse3dpZHRoOm4ub2Zmc2V0V2lkdGgsaGVpZ2h0Om4ub2Zmc2V0SGVpZ2h0fX0sZ3Qubm90aWZ5PXd0LFo9L3RlbXBsYXRlJC9pLGV0PS9eXFxzKig/Olxceyg/Oi58XFxyXFxufFxcbikqXFx9fFxcWyg/Oi58XFxyXFxufFxcbikqXFxdKVxccyokLyx0dD0vXlxceyhcXGQrKSg6W15cXH1dKyk/XFx9fF5cXFtbQS1aYS16X10qXFxdJC8sbnQ9LyhbQS1aXSkvZyxndC5pbml0V2lkZ2V0PWZ1bmN0aW9uKGkscixvKXt2YXIgYSxzLGwsYyxkLHUsaCxwLGYsZyxtLHYsXztpZihvP28ucm9sZXMmJihvPW8ucm9sZXMpOm89Z3QudWkucm9sZXMsaT1pLm5vZGVUeXBlP2k6aVswXSx1PWkuZ2V0QXR0cmlidXRlKFwiZGF0YS1cIitndC5ucytcInJvbGVcIikpe2Y9LTE9PT11LmluZGV4T2YoXCIuXCIpLGw9Zj9vW3VdOmd0LmdldHRlcih1KSh0KSxtPWUoaSkuZGF0YSgpLHY9bD9cImtlbmRvXCIrbC5mbi5vcHRpb25zLnByZWZpeCtsLmZuLm9wdGlvbnMubmFtZTpcIlwiLGc9Zj9SZWdFeHAoXCJea2VuZG8uKlwiK3UrXCIkXCIsXCJpXCIpOlJlZ0V4cChcIl5cIit2K1wiJFwiLFwiaVwiKTtcbmZvcihfIGluIG0paWYoXy5tYXRjaChnKSl7aWYoXyE9PXYpcmV0dXJuIG1bX107YT1tW19dfWlmKGwpe2ZvcihwPWsoaSxcImRhdGFTb3VyY2VcIikscj1lLmV4dGVuZCh7fSx4KGksbC5mbi5vcHRpb25zKSxyKSxwJiYoci5kYXRhU291cmNlPXR5cGVvZiBwPT09RXQ/Z3QuZ2V0dGVyKHApKHQpOnApLGM9MCxkPWwuZm4uZXZlbnRzLmxlbmd0aDtkPmM7YysrKXM9bC5mbi5ldmVudHNbY10saD1rKGkscyksaCE9PW4mJihyW3NdPWd0LmdldHRlcihoKSh0KSk7cmV0dXJuIGE/ZS5pc0VtcHR5T2JqZWN0KHIpfHxhLnNldE9wdGlvbnMocik6YT1uZXcgbChpLHIpLGF9fX0sZ3Qucm9sZXNGcm9tTmFtZXNwYWNlcz1mdW5jdGlvbihlKXt2YXIgdCxuLGk9W107Zm9yKGVbMF18fChlPVtndC51aSxndC5kYXRhdml6LnVpXSksdD0wLG49ZS5sZW5ndGg7bj50O3QrKylpW3RdPWVbdF0ucm9sZXM7cmV0dXJuIG10LmFwcGx5KG51bGwsW3t9XS5jb25jYXQoaS5yZXZlcnNlKCkpKX0sZ3QuaW5pdD1mdW5jdGlvbih0KXt2YXIgbj1ndC5yb2xlc0Zyb21OYW1lc3BhY2VzKEx0LmNhbGwoYXJndW1lbnRzLDEpKTtlKHQpLmZpbmQoXCJbZGF0YS1cIitndC5ucytcInJvbGVdXCIpLmFkZEJhY2soKS5lYWNoKGZ1bmN0aW9uKCl7Z3QuaW5pdFdpZGdldCh0aGlzLHt9LG4pfSl9LGd0LmRlc3Ryb3k9ZnVuY3Rpb24odCl7ZSh0KS5maW5kKFwiW2RhdGEtXCIrZ3QubnMrXCJyb2xlXVwiKS5hZGRCYWNrKCkuZWFjaChmdW5jdGlvbigpe3ZhciB0LG49ZSh0aGlzKS5kYXRhKCk7Zm9yKHQgaW4gbikwPT09dC5pbmRleE9mKFwia2VuZG9cIikmJnR5cGVvZiBuW3RdLmRlc3Ryb3k9PT1BdCYmblt0XS5kZXN0cm95KCl9KX0sZ3QucmVzaXplPWZ1bmN0aW9uKHQsbil7dmFyIGkscj1lKHQpLmZpbmQoXCJbZGF0YS1cIitndC5ucytcInJvbGVdXCIpLmFkZEJhY2soKS5maWx0ZXIoUyk7ci5sZW5ndGgmJihpPWUubWFrZUFycmF5KHIpLGkuc29ydChDKSxlLmVhY2goaSxmdW5jdGlvbigpe3ZhciB0PWd0LndpZGdldEluc3RhbmNlKGUodGhpcykpO3QmJnQucmVzaXplKG4pfSkpfSxndC5wYXJzZU9wdGlvbnM9eCxtdChndC51aSx7V2lkZ2V0OlgsRGF0YUJvdW5kV2lkZ2V0Okoscm9sZXM6e30scHJvZ3Jlc3M6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG8sYSxzPXQuZmluZChcIi5rLWxvYWRpbmctbWFza1wiKSxsPWd0LnN1cHBvcnQsYz1sLmJyb3dzZXI7bj9zLmxlbmd0aHx8KGk9bC5pc1J0bCh0KSxyPWk/XCJyaWdodFwiOlwibGVmdFwiLGE9dC5zY3JvbGxMZWZ0KCksbz1jLndlYmtpdCYmaT90WzBdLnNjcm9sbFdpZHRoLXQud2lkdGgoKS0yKmE6MCxzPWUoXCI8ZGl2IGNsYXNzPSdrLWxvYWRpbmctbWFzayc+PHNwYW4gY2xhc3M9J2stbG9hZGluZy10ZXh0Jz5Mb2FkaW5nLi4uPC9zcGFuPjxkaXYgY2xhc3M9J2stbG9hZGluZy1pbWFnZScvPjxkaXYgY2xhc3M9J2stbG9hZGluZy1jb2xvcicvPjwvZGl2PlwiKS53aWR0aChcIjEwMCVcIikuaGVpZ2h0KFwiMTAwJVwiKS5jc3MoXCJ0b3BcIix0LnNjcm9sbFRvcCgpKS5jc3MocixNYXRoLmFicyhhKStvKS5wcmVwZW5kVG8odCkpOnMmJnMucmVtb3ZlKCl9LHBsdWdpbjpmdW5jdGlvbih0LGkscil7dmFyIG8sYT10LmZuLm9wdGlvbnMubmFtZTtpPWl8fGd0LnVpLHI9cnx8XCJcIixpW2FdPXQsaS5yb2xlc1thLnRvTG93ZXJDYXNlKCldPXQsbz1cImdldEtlbmRvXCIrcithLGE9XCJrZW5kb1wiK3IrYSxlLmZuW2FdPWZ1bmN0aW9uKGkpe3ZhciByLG89dGhpcztyZXR1cm4gdHlwZW9mIGk9PT1FdD8ocj1MdC5jYWxsKGFyZ3VtZW50cywxKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdCxzLGw9ZS5kYXRhKHRoaXMsYSk7aWYoIWwpdGhyb3cgRXJyb3IoZ3QuZm9ybWF0KFwiQ2Fubm90IGNhbGwgbWV0aG9kICd7MH0nIG9mIHsxfSBiZWZvcmUgaXQgaXMgaW5pdGlhbGl6ZWRcIixpLGEpKTtpZih0PWxbaV0sdHlwZW9mIHQhPT1BdCl0aHJvdyBFcnJvcihndC5mb3JtYXQoXCJDYW5ub3QgZmluZCBtZXRob2QgJ3swfScgb2YgezF9XCIsaSxhKSk7cmV0dXJuIHM9dC5hcHBseShsLHIpLHMhPT1uPyhvPXMsITEpOm59KSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7bmV3IHQodGhpcyxpKX0pLG99LGUuZm5bYV0ud2lkZ2V0PXQsZS5mbltvXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEoYSl9fX0pLGl0PXtiaW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LG51bGxPYmplY3Q6ITAsb3B0aW9uczp7fX0scnQ9WC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXtYLmZuLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy5lbGVtZW50LmF1dG9BcHBseU5TKCksdGhpcy53cmFwcGVyPXRoaXMuZWxlbWVudCx0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJrbS13aWRnZXRcIil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtYLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLmVsZW1lbnQua2VuZG9EZXN0cm95KCl9LG9wdGlvbnM6e3ByZWZpeDpcIk1vYmlsZVwifSxldmVudHM6W10sdmlldzpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudC5jbG9zZXN0KGd0LnJvbGVTZWxlY3RvcihcInZpZXcgc3BsaXR2aWV3IG1vZGFsdmlldyBkcmF3ZXJcIikpO3JldHVybiBndC53aWRnZXRJbnN0YW5jZShlLGd0Lm1vYmlsZS51aSl8fGl0fSx2aWV3SGFzTmF0aXZlU2Nyb2xsaW5nOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy52aWV3KCk7cmV0dXJuIGUmJmUub3B0aW9ucy51c2VOYXRpdmVTY3JvbGxpbmd9LGNvbnRhaW5lcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudC5jbG9zZXN0KGd0LnJvbGVTZWxlY3RvcihcInZpZXcgbGF5b3V0IG1vZGFsdmlldyBkcmF3ZXIgc3BsaXR2aWV3XCIpKTtyZXR1cm4gZ3Qud2lkZ2V0SW5zdGFuY2UoZS5lcSgwKSxndC5tb2JpbGUudWkpfHxpdH19KSxtdChndC5tb2JpbGUse2luaXQ6ZnVuY3Rpb24oZSl7Z3QuaW5pdChlLGd0Lm1vYmlsZS51aSxndC51aSxndC5kYXRhdml6LnVpKX0sYXBwTGV2ZWxOYXRpdmVTY3JvbGxpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gZ3QubW9iaWxlLmFwcGxpY2F0aW9uJiZndC5tb2JpbGUuYXBwbGljYXRpb24ub3B0aW9ucyYmZ3QubW9iaWxlLmFwcGxpY2F0aW9uLm9wdGlvbnMudXNlTmF0aXZlU2Nyb2xsaW5nfSxyb2xlczp7fSx1aTp7V2lkZ2V0OnJ0LERhdGFCb3VuZFdpZGdldDpKLmV4dGVuZChydC5wcm90b3R5cGUpLHJvbGVzOnt9LHBsdWdpbjpmdW5jdGlvbihlKXtndC51aS5wbHVnaW4oZSxndC5tb2JpbGUudWksXCJNb2JpbGVcIil9fX0pLGwoZ3QuZGF0YXZpeix7aW5pdDpmdW5jdGlvbihlKXtndC5pbml0KGUsZ3QuZGF0YXZpei51aSl9LHVpOntyb2xlczp7fSx0aGVtZXM6e30sdmlld3M6W10scGx1Z2luOmZ1bmN0aW9uKGUpe2d0LnVpLnBsdWdpbihlLGd0LmRhdGF2aXoudWkpfX0scm9sZXM6e319KSxndC50b3VjaFNjcm9sbGVyPWZ1bmN0aW9uKHQsbil7cmV0dXJuIGUodCkubWFwKGZ1bmN0aW9uKHQsaSl7cmV0dXJuIGk9ZShpKSx4dC5raW5ldGljU2Nyb2xsTmVlZGVkJiZndC5tb2JpbGUudWkuU2Nyb2xsZXImJiFpLmRhdGEoXCJrZW5kb01vYmlsZVNjcm9sbGVyXCIpPyhpLmtlbmRvTW9iaWxlU2Nyb2xsZXIobiksaS5kYXRhKFwia2VuZG9Nb2JpbGVTY3JvbGxlclwiKSk6ITF9KVswXX0sZ3QucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSxndC53aWRnZXRJbnN0YW5jZT1mdW5jdGlvbihlLG4pe3ZhciBpLHIsbyxhLHM9ZS5kYXRhKGd0Lm5zK1wicm9sZVwiKSxsPVtdO2lmKHMpe2lmKFwiY29udGVudFwiPT09cyYmKHM9XCJzY3JvbGxlclwiKSxuKWlmKG5bMF0pZm9yKGk9MCxyPW4ubGVuZ3RoO3I+aTtpKyspbC5wdXNoKG5baV0ucm9sZXNbc10pO2Vsc2UgbC5wdXNoKG4ucm9sZXNbc10pO2Vsc2UgbD1bZ3QudWkucm9sZXNbc10sZ3QuZGF0YXZpei51aS5yb2xlc1tzXSxndC5tb2JpbGUudWkucm9sZXNbc11dO2ZvcihzLmluZGV4T2YoXCIuXCIpPj0wJiYobD1bZ3QuZ2V0dGVyKHMpKHQpXSksaT0wLHI9bC5sZW5ndGg7cj5pO2krKylpZihvPWxbaV0sbyYmKGE9ZS5kYXRhKFwia2VuZG9cIitvLmZuLm9wdGlvbnMucHJlZml4K28uZm4ub3B0aW9ucy5uYW1lKSkpcmV0dXJuIGF9fSxndC5vblJlc2l6ZT1mdW5jdGlvbihuKXt2YXIgaT1uO3JldHVybiB4dC5tb2JpbGVPUy5hbmRyb2lkJiYoaT1mdW5jdGlvbigpe3NldFRpbWVvdXQobiw2MDApfSksZSh0KS5vbih4dC5yZXNpemUsaSksaX0sZ3QudW5iaW5kUmVzaXplPWZ1bmN0aW9uKG4pe2UodCkub2ZmKHh0LnJlc2l6ZSxuKX0sZ3QuYXR0clZhbHVlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuZGF0YShndC5ucyt0KX0sZ3QuZGF5cz17U3VuZGF5OjAsTW9uZGF5OjEsVHVlc2RheToyLFdlZG5lc2RheTozLFRodXJzZGF5OjQsRnJpZGF5OjUsU2F0dXJkYXk6Nn0sZS5leHRlbmQoZS5leHByW1wiOlwiXSx7a2VuZG9Gb2N1c2FibGU6ZnVuY3Rpb24odCl7dmFyIG49ZS5hdHRyKHQsXCJ0YWJpbmRleFwiKTtyZXR1cm4gVCh0LCFpc05hTihuKSYmbj4tMSl9fSksb3Q9W1wibW91c2Vkb3duXCIsXCJtb3VzZW1vdmVcIixcIm1vdXNlZW50ZXJcIixcIm1vdXNlbGVhdmVcIixcIm1vdXNlb3ZlclwiLFwibW91c2VvdXRcIixcIm1vdXNldXBcIixcImNsaWNrXCJdLGF0PVwibGFiZWwsIGlucHV0LCBbZGF0YS1yZWw9ZXh0ZXJuYWxdXCIsc3Q9e3NldHVwTW91c2VNdXRlOmZ1bmN0aW9uKCl7dmFyIHQsbj0wLGk9b3QubGVuZ3RoLHI9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2lmKCFzdC5tb3VzZVRyYXAmJnh0LmV2ZW50Q2FwdHVyZSlmb3Ioc3QubW91c2VUcmFwPSEwLHN0LmJ1c3RDbGljaz0hMSxzdC5jYXB0dXJlTW91c2U9ITEsdD1mdW5jdGlvbih0KXtzdC5jYXB0dXJlTW91c2UmJihcImNsaWNrXCI9PT10LnR5cGU/c3QuYnVzdENsaWNrJiYhZSh0LnRhcmdldCkuaXMoYXQpJiYodC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCkpOnQuc3RvcFByb3BhZ2F0aW9uKCkpfTtpPm47bisrKXIuYWRkRXZlbnRMaXN0ZW5lcihvdFtuXSx0LCEwKX0sbXV0ZU1vdXNlOmZ1bmN0aW9uKGUpe3N0LmNhcHR1cmVNb3VzZT0hMCxlLmRhdGEuYnVzdENsaWNrJiYoc3QuYnVzdENsaWNrPSEwKSxjbGVhclRpbWVvdXQoc3QubW91c2VUcmFwVGltZW91dElEKX0sdW5NdXRlTW91c2U6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoc3QubW91c2VUcmFwVGltZW91dElEKSxzdC5tb3VzZVRyYXBUaW1lb3V0SUQ9c2V0VGltZW91dChmdW5jdGlvbigpe3N0LmNhcHR1cmVNb3VzZT0hMSxzdC5idXN0Q2xpY2s9ITF9LDQwMCl9fSxsdD17ZG93bjpcInRvdWNoc3RhcnQgbW91c2Vkb3duXCIsbW92ZTpcIm1vdXNlbW92ZSB0b3VjaG1vdmVcIix1cDpcIm1vdXNldXAgdG91Y2hlbmQgdG91Y2hjYW5jZWxcIixjYW5jZWw6XCJtb3VzZWxlYXZlIHRvdWNoY2FuY2VsXCJ9LHh0LnRvdWNoJiYoeHQubW9iaWxlT1MuaW9zfHx4dC5tb2JpbGVPUy5hbmRyb2lkKT9sdD17ZG93bjpcInRvdWNoc3RhcnRcIixtb3ZlOlwidG91Y2htb3ZlXCIsdXA6XCJ0b3VjaGVuZCB0b3VjaGNhbmNlbFwiLGNhbmNlbDpcInRvdWNoY2FuY2VsXCJ9Onh0LnBvaW50ZXJzP2x0PXtkb3duOlwicG9pbnRlcmRvd25cIixtb3ZlOlwicG9pbnRlcm1vdmVcIix1cDpcInBvaW50ZXJ1cFwiLGNhbmNlbDpcInBvaW50ZXJjYW5jZWwgcG9pbnRlcmxlYXZlXCJ9Onh0Lm1zUG9pbnRlcnMmJihsdD17ZG93bjpcIk1TUG9pbnRlckRvd25cIixtb3ZlOlwiTVNQb2ludGVyTW92ZVwiLHVwOlwiTVNQb2ludGVyVXBcIixjYW5jZWw6XCJNU1BvaW50ZXJDYW5jZWwgTVNQb2ludGVyTGVhdmVcIn0pLCF4dC5tc1BvaW50ZXJzfHxcIm9ubXNwb2ludGVyZW50ZXJcImluIHR8fGUuZWFjaCh7TVNQb2ludGVyRW50ZXI6XCJNU1BvaW50ZXJPdmVyXCIsTVNQb2ludGVyTGVhdmU6XCJNU1BvaW50ZXJPdXRcIn0sZnVuY3Rpb24odCxuKXtlLmV2ZW50LnNwZWNpYWxbdF09e2RlbGVnYXRlVHlwZTpuLGJpbmRUeXBlOm4saGFuZGxlOmZ1bmN0aW9uKHQpe3ZhciBpLHI9dGhpcyxvPXQucmVsYXRlZFRhcmdldCxhPXQuaGFuZGxlT2JqO3JldHVybighb3x8byE9PXImJiFlLmNvbnRhaW5zKHIsbykpJiYodC50eXBlPWEub3JpZ1R5cGUsaT1hLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLHQudHlwZT1uKSxpfX19KSxjdD1mdW5jdGlvbihlKXtyZXR1cm4gbHRbZV18fGV9LGR0PS8oW14gXSspL2csZ3QuYXBwbHlFdmVudE1hcD1mdW5jdGlvbihlLHQpe3JldHVybiBlPWUucmVwbGFjZShkdCxjdCksdCYmKGU9ZS5yZXBsYWNlKGR0LFwiJDEuXCIrdCkpLGV9LHV0PWUuZm4ub24sbXQoITAsQSxlKSxBLmZuPUEucHJvdG90eXBlPW5ldyBlLEEuZm4uY29uc3RydWN0b3I9QSxBLmZuLmluaXQ9ZnVuY3Rpb24odCxuKXtyZXR1cm4gbiYmbiBpbnN0YW5jZW9mIGUmJiEobiBpbnN0YW5jZW9mIEEpJiYobj1BKG4pKSxlLmZuLmluaXQuY2FsbCh0aGlzLHQsbixodCl9LEEuZm4uaW5pdC5wcm90b3R5cGU9QS5mbixodD1BKGRvY3VtZW50KSxtdChBLmZuLHtoYW5kbGVyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmRhdGEoXCJoYW5kbGVyXCIsZSksdGhpc30sYXV0b0FwcGx5TlM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZGF0YShcImtlbmRvTlNcIixlfHxndC5ndWlkKCkpLHRoaXN9LG9uOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixvLGE9dGhpcyxzPWEuZGF0YShcImtlbmRvTlNcIik7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3V0LmNhbGwoYSxhcmd1bWVudHNbMF0pOihlPWEsdD1MdC5jYWxsKGFyZ3VtZW50cyksdHlwZW9mIHRbdC5sZW5ndGgtMV09PT1GdCYmdC5wb3AoKSxuPXRbdC5sZW5ndGgtMV0saT1ndC5hcHBseUV2ZW50TWFwKHRbMF0scykseHQubW91c2VBbmRUb3VjaFByZXNlbnQmJmkuc2VhcmNoKC9tb3VzZXxjbGljay8pPi0xJiZ0aGlzWzBdIT09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50JiYoc3Quc2V0dXBNb3VzZU11dGUoKSxyPTI9PT10Lmxlbmd0aD9udWxsOnRbMV0sbz1pLmluZGV4T2YoXCJjbGlja1wiKT4tMSYmaS5pbmRleE9mKFwidG91Y2hlbmRcIik+LTEsdXQuY2FsbCh0aGlzLHt0b3VjaHN0YXJ0OnN0Lm11dGVNb3VzZSx0b3VjaGVuZDpzdC51bk11dGVNb3VzZX0scix7YnVzdENsaWNrOm99KSksdHlwZW9mIG49PT1FdCYmKGU9YS5kYXRhKFwiaGFuZGxlclwiKSxuPWVbbl0sdFt0Lmxlbmd0aC0xXT1mdW5jdGlvbih0KXtuLmNhbGwoZSx0KX0pLHRbMF09aSx1dC5hcHBseShhLHQpLGEpfSxrZW5kb0Rlc3Ryb3k6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZXx8dGhpcy5kYXRhKFwia2VuZG9OU1wiKSxlJiZ0aGlzLm9mZihcIi5cIitlKSx0aGlzfX0pLGd0LmpRdWVyeT1BLGd0LmV2ZW50TWFwPWx0LGd0LnRpbWV6b25lPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3ZhciBuLGkscixvPXRbM10sYT10WzRdLHM9dFs1XSxsPXRbOF07cmV0dXJuIGx8fCh0WzhdPWw9e30pLGxbZV0/bFtlXTooaXNOYU4oYSk/MD09PWEuaW5kZXhPZihcImxhc3RcIik/KG49bmV3IERhdGUoRGF0ZS5VVEMoZSxkW29dKzEsMSxzWzBdLTI0LHNbMV0sc1syXSwwKSksaT11W2Euc3Vic3RyKDQsMyldLHI9bi5nZXRVVENEYXkoKSxuLnNldFVUQ0RhdGUobi5nZXRVVENEYXRlKCkraS1yLShpPnI/NzowKSkpOmEuaW5kZXhPZihcIj49XCIpPj0wJiYobj1uZXcgRGF0ZShEYXRlLlVUQyhlLGRbb10sYS5zdWJzdHIoNSksc1swXSxzWzFdLHNbMl0sMCkpLGk9dVthLnN1YnN0cigwLDMpXSxyPW4uZ2V0VVRDRGF5KCksbi5zZXRVVENEYXRlKG4uZ2V0VVRDRGF0ZSgpK2ktcisocj5pPzc6MCkpKTpuPW5ldyBEYXRlKERhdGUuVVRDKGUsZFtvXSxhLHNbMF0sc1sxXSxzWzJdLDApKSxsW2VdPW4pfWZ1bmN0aW9uIHQodCxuLGkpe3ZhciByLG8sYSxzO3JldHVybihuPW5baV0pPyhhPW5ldyBEYXRlKHQpLmdldFVUQ0Z1bGxZZWFyKCksbj1qUXVlcnkuZ3JlcChuLGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0sbj1lWzFdO3JldHVybiBhPj10JiYobj49YXx8dD09YSYmXCJvbmx5XCI9PW58fFwibWF4XCI9PW4pfSksbi5wdXNoKHQpLG4uc29ydChmdW5jdGlvbih0LG4pe3JldHVyblwibnVtYmVyXCIhPXR5cGVvZiB0JiYodD0rZShhLHQpKSxcIm51bWJlclwiIT10eXBlb2YgbiYmKG49K2UoYSxuKSksdC1ufSkscz1uW2pRdWVyeS5pbkFycmF5KHQsbiktMV18fG5bbi5sZW5ndGgtMV0saXNOYU4ocyk/czpudWxsKToocj1pLnNwbGl0KFwiOlwiKSxvPTAsci5sZW5ndGg+MSYmKG89NjAqclswXSsgK3JbMV0pLFstMWU2LFwibWF4XCIsXCItXCIsXCJKYW5cIiwxLFswLDAsMF0sbyxcIi1cIl0pfWZ1bmN0aW9uIG4oZSx0LG4pe3ZhciBpLHIsbyxhPXRbbl07aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEmJihhPXRbYV0pLCFhKXRocm93IEVycm9yKCdUaW1lem9uZSBcIicrbisnXCIgaXMgZWl0aGVyIGluY29ycmVjdCwgb3Iga2VuZG8udGltZXpvbmVzLm1pbi5qcyBpcyBub3QgaW5jbHVkZWQuJyk7Zm9yKGk9YS5sZW5ndGgtMTtpPj0wJiYocj1hW2ldWzNdLCEociYmZT5yKSk7aS0tKTtpZihvPWFbaSsxXSwhbyl0aHJvdyBFcnJvcignVGltZXpvbmUgXCInK24rJ1wiIG5vdCBmb3VuZCBvbiAnK2UrXCIuXCIpO3JldHVybiBvfWZ1bmN0aW9uIGkoZSxpLHIsbyl7dHlwZW9mIGUhPU10JiYoZT1EYXRlLlVUQyhlLmdldEZ1bGxZZWFyKCksZS5nZXRNb250aCgpLGUuZ2V0RGF0ZSgpLGUuZ2V0SG91cnMoKSxlLmdldE1pbnV0ZXMoKSxlLmdldFNlY29uZHMoKSxlLmdldE1pbGxpc2Vjb25kcygpKSk7dmFyIGE9bihlLGksbyk7cmV0dXJue3pvbmU6YSxydWxlOnQoZSxyLGFbMV0pfX1mdW5jdGlvbiByKGUsdCl7dmFyIG4scixvO3JldHVyblwiRXRjL1VUQ1wiPT10fHxcIkV0Yy9HTVRcIj09dD8wOihuPWkoZSx0aGlzLnpvbmVzLHRoaXMucnVsZXMsdCkscj1uLnpvbmUsbz1uLnJ1bGUsZ3QucGFyc2VGbG9hdChvP3JbMF0tb1s2XTpyWzBdKSl9ZnVuY3Rpb24gbyhlLHQpe3ZhciBuPWkoZSx0aGlzLnpvbmVzLHRoaXMucnVsZXMsdCkscj1uLnpvbmUsbz1uLnJ1bGUsYT1yWzJdO3JldHVybiBhLmluZGV4T2YoXCIvXCIpPj0wP2Euc3BsaXQoXCIvXCIpW28mJitvWzZdPzE6MF06YS5pbmRleE9mKFwiJXNcIik+PTA/YS5yZXBsYWNlKFwiJXNcIixvJiZcIi1cIiE9b1s3XT9vWzddOlwiXCIpOmF9ZnVuY3Rpb24gYShlLHQsbil7dmFyIGkscjtyZXR1cm4gdHlwZW9mIHQ9PUV0JiYodD10aGlzLm9mZnNldChlLHQpKSx0eXBlb2Ygbj09RXQmJihuPXRoaXMub2Zmc2V0KGUsbikpLGk9ZS5nZXRUaW1lem9uZU9mZnNldCgpLGU9bmV3IERhdGUoZS5nZXRUaW1lKCkrNmU0Kih0LW4pKSxyPWUuZ2V0VGltZXpvbmVPZmZzZXQoKSxuZXcgRGF0ZShlLmdldFRpbWUoKSs2ZTQqKHItaSkpfWZ1bmN0aW9uIHMoZSx0KXtyZXR1cm4gdGhpcy5jb252ZXJ0KGUsZS5nZXRUaW1lem9uZU9mZnNldCgpLHQpfWZ1bmN0aW9uIGwoZSx0KXtyZXR1cm4gdGhpcy5jb252ZXJ0KGUsdCxlLmdldFRpbWV6b25lT2Zmc2V0KCkpfWZ1bmN0aW9uIGMoZSl7cmV0dXJuIHRoaXMuYXBwbHkobmV3IERhdGUoZSksXCJFdGMvVVRDXCIpfXZhciBkPXtKYW46MCxGZWI6MSxNYXI6MixBcHI6MyxNYXk6NCxKdW46NSxKdWw6NixBdWc6NyxTZXA6OCxPY3Q6OSxOb3Y6MTAsRGVjOjExfSx1PXtTdW46MCxNb246MSxUdWU6MixXZWQ6MyxUaHU6NCxGcmk6NSxTYXQ6Nn07cmV0dXJue3pvbmVzOnt9LHJ1bGVzOnt9LG9mZnNldDpyLGNvbnZlcnQ6YSxhcHBseTpzLHJlbW92ZTpsLGFiYnI6byx0b0xvY2FsRGF0ZTpjfX0oKSxndC5kYXRlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3JldHVybiAwPT09dCYmMjM9PT1lLmdldEhvdXJzKCk/KGUuc2V0SG91cnMoZS5nZXRIb3VycygpKzIpLCEwKTohMX1mdW5jdGlvbiB0KHQsbixpKXt2YXIgcj10LmdldEhvdXJzKCk7aT1pfHwxLG49KG4tdC5nZXREYXkoKSs3KmkpJTcsdC5zZXREYXRlKHQuZ2V0RGF0ZSgpK24pLGUodCxyKX1mdW5jdGlvbiBuKGUsbixpKXtyZXR1cm4gZT1uZXcgRGF0ZShlKSx0KGUsbixpKSxlfWZ1bmN0aW9uIGkoZSl7cmV0dXJuIG5ldyBEYXRlKGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCksMSl9ZnVuY3Rpb24gcihlKXt2YXIgdD1uZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCksZS5nZXRNb250aCgpKzEsMCksbj1pKGUpLHI9TWF0aC5hYnModC5nZXRUaW1lem9uZU9mZnNldCgpLW4uZ2V0VGltZXpvbmVPZmZzZXQoKSk7cmV0dXJuIHImJnQuc2V0SG91cnMobi5nZXRIb3VycygpK3IvNjApLHR9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gdD1uZXcgRGF0ZSh0LmdldEZ1bGxZZWFyKCksdC5nZXRNb250aCgpLHQuZ2V0RGF0ZSgpLDAsMCwwKSxlKHQsMCksdH1mdW5jdGlvbiBhKGUpe3JldHVybiBEYXRlLlVUQyhlLmdldEZ1bGxZZWFyKCksZS5nZXRNb250aCgpLGUuZ2V0RGF0ZSgpLGUuZ2V0SG91cnMoKSxlLmdldE1pbnV0ZXMoKSxlLmdldFNlY29uZHMoKSxlLmdldE1pbGxpc2Vjb25kcygpKX1mdW5jdGlvbiBzKGUpe3JldHVybiBlLmdldFRpbWUoKS1vKGUpfWZ1bmN0aW9uIGwoZSx0LG4pe3ZhciBpLHI9cyh0KSxvPXMobik7cmV0dXJuIGUmJnIhPW8/KHQ+PW4mJihuKz1tKSxpPXMoZSkscj5pJiYoaSs9bSkscj5vJiYobys9bSksaT49ciYmbz49aSk6ITB9ZnVuY3Rpb24gYyhlLHQsbil7dmFyIGkscj10LmdldFRpbWUoKSxvPW4uZ2V0VGltZSgpO3JldHVybiByPj1vJiYobys9bSksaT1lLmdldFRpbWUoKSxpPj1yJiZvPj1pfWZ1bmN0aW9uIGQodCxuKXt2YXIgaT10LmdldEhvdXJzKCk7cmV0dXJuIHQ9bmV3IERhdGUodCksdSh0LG4qbSksZSh0LGkpLHR9ZnVuY3Rpb24gdShlLHQsbil7dmFyIGkscj1lLmdldFRpbWV6b25lT2Zmc2V0KCk7ZS5zZXRUaW1lKGUuZ2V0VGltZSgpK3QpLG58fChpPWUuZ2V0VGltZXpvbmVPZmZzZXQoKS1yLGUuc2V0VGltZShlLmdldFRpbWUoKStpKmcpKX1mdW5jdGlvbiBoKCl7cmV0dXJuIG8obmV3IERhdGUpfWZ1bmN0aW9uIHAoZSl7cmV0dXJuIG8oZSkuZ2V0VGltZSgpPT1oKCkuZ2V0VGltZSgpfWZ1bmN0aW9uIGYoZSl7dmFyIHQ9bmV3IERhdGUoMTk4MCwxLDEsMCwwLDApO3JldHVybiBlJiZ0LnNldEhvdXJzKGUuZ2V0SG91cnMoKSxlLmdldE1pbnV0ZXMoKSxlLmdldFNlY29uZHMoKSxlLmdldE1pbGxpc2Vjb25kcygpKSx0fXZhciBnPTZlNCxtPTg2NGU1O3JldHVybnthZGp1c3REU1Q6ZSxkYXlPZldlZWs6bixzZXREYXlPZldlZWs6dCxnZXREYXRlOm8saXNJbkRhdGVSYW5nZTpjLGlzSW5UaW1lUmFuZ2U6bCxpc1RvZGF5OnAsbmV4dERheTpmdW5jdGlvbihlKXtyZXR1cm4gZChlLDEpfSxwcmV2aW91c0RheTpmdW5jdGlvbihlKXtyZXR1cm4gZChlLC0xKX0sdG9VdGNUaW1lOmEsTVNfUEVSX0RBWTptLE1TX1BFUl9IT1VSOjYwKmcsTVNfUEVSX01JTlVURTpnLHNldFRpbWU6dSxhZGREYXlzOmQsdG9kYXk6aCx0b0ludmFyaWFudFRpbWU6ZixmaXJzdERheU9mTW9udGg6aSxsYXN0RGF5T2ZNb250aDpyLGdldE1pbGxpc2Vjb25kczpzfX0oKSxndC5zdHJpcFdoaXRlc3BhY2U9ZnVuY3Rpb24oZSl7dmFyIHQsbixpO2lmKGRvY3VtZW50LmNyZWF0ZU5vZGVJdGVyYXRvcilmb3IodD1kb2N1bWVudC5jcmVhdGVOb2RlSXRlcmF0b3IoZSxOb2RlRmlsdGVyLlNIT1dfVEVYVCxmdW5jdGlvbih0KXtyZXR1cm4gdC5wYXJlbnROb2RlPT1lP05vZGVGaWx0ZXIuRklMVEVSX0FDQ0VQVDpOb2RlRmlsdGVyLkZJTFRFUl9SRUpFQ1R9LCExKTt0Lm5leHROb2RlKCk7KXQucmVmZXJlbmNlTm9kZSYmIXQucmVmZXJlbmNlTm9kZS50ZXh0Q29udGVudC50cmltKCkmJnQucmVmZXJlbmNlTm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQucmVmZXJlbmNlTm9kZSk7ZWxzZSBmb3Iobj0wO2UuY2hpbGROb2Rlcy5sZW5ndGg+bjtuKyspaT1lLmNoaWxkTm9kZXNbbl0sMyE9aS5ub2RlVHlwZXx8L1xcUy8udGVzdChpLm5vZGVWYWx1ZSl8fChlLnJlbW92ZUNoaWxkKGkpLG4tLSksMT09aS5ub2RlVHlwZSYmZ3Quc3RyaXBXaGl0ZXNwYWNlKGkpfSxwdD10LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8dC53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHQubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx0Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHQubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGZ1bmN0aW9uKGUpe3NldFRpbWVvdXQoZSwxZTMvNjApfSxndC5hbmltYXRpb25GcmFtZT1mdW5jdGlvbihlKXtwdC5jYWxsKHQsZSl9LGZ0PVtdLGd0LnF1ZXVlQW5pbWF0aW9uPWZ1bmN0aW9uKGUpe2Z0W2Z0Lmxlbmd0aF09ZSwxPT09ZnQubGVuZ3RoJiZndC5ydW5OZXh0QW5pbWF0aW9uKCl9LGd0LnJ1bk5leHRBbmltYXRpb249ZnVuY3Rpb24oKXtndC5hbmltYXRpb25GcmFtZShmdW5jdGlvbigpe2Z0WzBdJiYoZnQuc2hpZnQoKSgpLGZ0WzBdJiZndC5ydW5OZXh0QW5pbWF0aW9uKCkpfSl9LGd0LnBhcnNlUXVlcnlTdHJpbmdQYXJhbXM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuc3BsaXQoXCI/XCIpWzFdfHxcIlwiLG49e30saT10LnNwbGl0KC8mfD0vKSxyPWkubGVuZ3RoLG89MDtyPm87bys9MilcIlwiIT09aVtvXSYmKG5bZGVjb2RlVVJJQ29tcG9uZW50KGlbb10pXT1kZWNvZGVVUklDb21wb25lbnQoaVtvKzFdKSk7cmV0dXJuIG59LGd0LmVsZW1lbnRVbmRlckN1cnNvcj1mdW5jdGlvbihlKXtyZXR1cm4gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChlLnguY2xpZW50LGUueS5jbGllbnQpfSxndC53aGVlbERlbHRhWT1mdW5jdGlvbihlKXt2YXIgdCxpPWUub3JpZ2luYWxFdmVudCxyPWkud2hlZWxEZWx0YVk7cmV0dXJuIGkud2hlZWxEZWx0YT8ocj09PW58fHIpJiYodD1pLndoZWVsRGVsdGEpOmkuZGV0YWlsJiZpLmF4aXM9PT1pLlZFUlRJQ0FMX0FYSVMmJih0PTEwKi1pLmRldGFpbCksdH0sZ3QudGhyb3R0bGU9ZnVuY3Rpb24oZSx0KXt2YXIgaSxyPTA7cmV0dXJuIXR8fDA+PXQ/ZTpmdW5jdGlvbigpe2Z1bmN0aW9uIG8oKXtlLmFwcGx5KGEsbCkscj0rbmV3IERhdGV9dmFyIGE9dGhpcyxzPStuZXcgRGF0ZS1yLGw9YXJndW1lbnRzO3JldHVybiByPyhpJiZjbGVhclRpbWVvdXQoaSkscz50P28oKTppPXNldFRpbWVvdXQobyx0LXMpLG4pOm8oKX19LGd0LmNhcmV0PWZ1bmN0aW9uKHQsaSxyKXt2YXIgbyxhLHMsbCxjPWkhPT1uO2lmKHI9PT1uJiYocj1pKSx0WzBdJiYodD10WzBdKSwhY3x8IXQuZGlzYWJsZWQpe3RyeXt0LnNlbGVjdGlvblN0YXJ0IT09bj9jPyh0LmZvY3VzKCksdC5zZXRTZWxlY3Rpb25SYW5nZShpLHIpKTppPVt0LnNlbGVjdGlvblN0YXJ0LHQuc2VsZWN0aW9uRW5kXTpkb2N1bWVudC5zZWxlY3Rpb24mJihlKHQpLmlzKFwiOnZpc2libGVcIikmJnQuZm9jdXMoKSxvPXQuY3JlYXRlVGV4dFJhbmdlKCksYz8oby5jb2xsYXBzZSghMCksby5tb3ZlU3RhcnQoXCJjaGFyYWN0ZXJcIixpKSxvLm1vdmVFbmQoXCJjaGFyYWN0ZXJcIixyLWkpLG8uc2VsZWN0KCkpOihhPW8uZHVwbGljYXRlKCksby5tb3ZlVG9Cb29rbWFyayhkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKS5nZXRCb29rbWFyaygpKSxhLnNldEVuZFBvaW50KFwiRW5kVG9TdGFydFwiLG8pLHM9YS50ZXh0Lmxlbmd0aCxsPXMrby50ZXh0Lmxlbmd0aCxpPVtzLGxdKSl9Y2F0Y2goZCl7aT1bXX1yZXR1cm4gaX19LGd0LmNvbXBpbGVNb2JpbGVEaXJlY3RpdmU9ZnVuY3Rpb24oZSxuKXt2YXIgaT10LmFuZ3VsYXI7cmV0dXJuIGUuYXR0cihcImRhdGEtXCIrZ3QubnMrXCJyb2xlXCIsZVswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZShcImtlbmRvLW1vYmlsZS1cIixcIlwiKS5yZXBsYWNlKFwiLVwiLFwiXCIpKSxpLmVsZW1lbnQoZSkuaW5qZWN0b3IoKS5pbnZva2UoW1wiJGNvbXBpbGVcIixmdW5jdGlvbih0KXt2YXIgcj1pLmVsZW1lbnQoZSkuc2NvcGUoKTtuJiZuKHIpLHQoZSkociksci4kZGlnZXN0KCl9XSksZ3Qud2lkZ2V0SW5zdGFuY2UoZSxndC5tb2JpbGUudWkpfSxmdW5jdGlvbigpe2Z1bmN0aW9uIG4odCxuLGkpe3ZhciByPWUoXCI8Zm9ybT5cIikuYXR0cih7YWN0aW9uOmksbWV0aG9kOlwiUE9TVFwifSksbz10LnNwbGl0KFwiO2Jhc2U2NCxcIik7ZShcIjxpbnB1dD5cIikuYXR0cih7dmFsdWU6b1swXS5yZXBsYWNlKFwiZGF0YTpcIixcIlwiKSxuYW1lOlwiY29udGVudFR5cGVcIix0eXBlOlwiaGlkZGVuXCJ9KS5hcHBlbmRUbyhyKSxlKFwiPGlucHV0PlwiKS5hdHRyKHt2YWx1ZTpvWzFdLG5hbWU6XCJiYXNlNjRcIix0eXBlOlwiaGlkZGVuXCJ9KS5hcHBlbmRUbyhyKSxlKFwiPGlucHV0PlwiKS5hdHRyKHt2YWx1ZTpuLG5hbWU6XCJmaWxlTmFtZVwiLHR5cGU6XCJoaWRkZW5cIn0pLmFwcGVuZFRvKHIpLHIuYXBwZW5kVG8oXCJib2R5XCIpLnN1Ym1pdCgpLnJlbW92ZSgpfWZ1bmN0aW9uIGkoZSx0KXt2YXIgbixpLHIsbyxhLHM9ZTtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl7Zm9yKG49ZS5zcGxpdChcIjtiYXNlNjQsXCIpLGk9blswXSxyPWF0b2IoblsxXSksbz1uZXcgVWludDhBcnJheShyLmxlbmd0aCksYT0wO3IubGVuZ3RoPmE7YSsrKW9bYV09ci5jaGFyQ29kZUF0KGEpO3M9bmV3IEJsb2IoW28uYnVmZmVyXSx7dHlwZTppfSl9bmF2aWdhdG9yLm1zU2F2ZUJsb2Iocyx0KX1mdW5jdGlvbiByKGUsbil7dC5CbG9iJiZlIGluc3RhbmNlb2YgQmxvYiYmKGU9VVJMLmNyZWF0ZU9iamVjdFVSTChlKSksby5kb3dubG9hZD1uLG8uaHJlZj1lO3ZhciBpPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiTW91c2VFdmVudHNcIik7aS5pbml0TW91c2VFdmVudChcImNsaWNrXCIsITAsITEsdCwwLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsKSxvLmRpc3BhdGNoRXZlbnQoaSl9dmFyIG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIiksYT1cImRvd25sb2FkXCJpbiBvO2d0LnNhdmVBcz1mdW5jdGlvbihlKXt2YXIgdD1uO2UuZm9yY2VQcm94eXx8KGE/dD1yOm5hdmlnYXRvci5tc1NhdmVCbG9iJiYodD1pKSksdChlLmRhdGFVUkksZS5maWxlTmFtZSxlLnByb3h5VVJMKX19KCl9KGpRdWVyeSx3aW5kb3cpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQpe2lmKCF0KXJldHVybiBlO2UrXCIvXCI9PT10JiYoZT10KTt2YXIgbj1SZWdFeHAoXCJeXCIrdCxcImlcIik7cmV0dXJuIG4udGVzdChlKXx8KGU9dCtcIi9cIitlKSxwLnByb3RvY29sK1wiLy9cIisocC5ob3N0K1wiL1wiK2UpLnJlcGxhY2UoL1xcL1xcLysvZyxcIi9cIil9ZnVuY3Rpb24gaShlKXtyZXR1cm4gZT9cIiMhXCI6XCIjXCJ9ZnVuY3Rpb24gcihlKXt2YXIgdD1wLmhyZWY7cmV0dXJuXCIjIVwiPT09ZSYmdC5pbmRleE9mKFwiI1wiKT4tMSYmdC5pbmRleE9mKFwiIyFcIik8MD9udWxsOnQuc3BsaXQoZSlbMV18fFwiXCJ9ZnVuY3Rpb24gbyhlLHQpe3JldHVybiAwPT09dC5pbmRleE9mKGUpP3Quc3Vic3RyKGUubGVuZ3RoKS5yZXBsYWNlKC9cXC9cXC8vZyxcIi9cIik6dH1mdW5jdGlvbiBhKGUpe3JldHVybiBlLnJlcGxhY2UoL14oIyk/LyxcIiNcIil9ZnVuY3Rpb24gcyhlKXtyZXR1cm4gZS5yZXBsYWNlKC9eKCMoISk/KT8vLFwiIyFcIil9dmFyIGw9d2luZG93LmtlbmRvLGM9XCJjaGFuZ2VcIixkPVwiYmFja1wiLHU9XCJzYW1lXCIsaD1sLnN1cHBvcnQscD13aW5kb3cubG9jYXRpb24sZj13aW5kb3cuaGlzdG9yeSxnPTUwLG09bC5zdXBwb3J0LmJyb3dzZXIubXNpZSx2PS9eIyovLF89d2luZG93LmRvY3VtZW50LHk9bC5DbGFzcy5leHRlbmQoe2JhY2s6ZnVuY3Rpb24oKXttP3NldFRpbWVvdXQoZnVuY3Rpb24oKXtmLmJhY2soKX0pOmYuYmFjaygpfSxmb3J3YXJkOmZ1bmN0aW9uKCl7bT9zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zi5mb3J3YXJkKCl9KTpmLmZvcndhcmQoKX0sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIGYubGVuZ3RofSxyZXBsYWNlTG9jYXRpb246ZnVuY3Rpb24oZSl7cC5yZXBsYWNlKGUpfX0pLHc9eS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5yb290PWV9LG5hdmlnYXRlOmZ1bmN0aW9uKGUpe2YucHVzaFN0YXRlKHt9LF8udGl0bGUsbihlLHRoaXMucm9vdCkpfSxyZXBsYWNlOmZ1bmN0aW9uKGUpe2YucmVwbGFjZVN0YXRlKHt9LF8udGl0bGUsbihlLHRoaXMucm9vdCkpfSxub3JtYWxpemU6ZnVuY3Rpb24oZSl7cmV0dXJuIG8odGhpcy5yb290LGUpfSxjdXJyZW50OmZ1bmN0aW9uKCl7dmFyIGU9cC5wYXRobmFtZTtyZXR1cm4gcC5zZWFyY2gmJihlKz1wLnNlYXJjaCksbyh0aGlzLnJvb3QsZSl9LGNoYW5nZTpmdW5jdGlvbih0KXtlKHdpbmRvdykuYmluZChcInBvcHN0YXRlLmtlbmRvXCIsdCl9LHN0b3A6ZnVuY3Rpb24oKXtlKHdpbmRvdykudW5iaW5kKFwicG9wc3RhdGUua2VuZG9cIil9LG5vcm1hbGl6ZUN1cnJlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQsbz1lLnJvb3QsYT1wLnBhdGhuYW1lLHM9cihpKGUuaGFzaEJhbmcpKTtvPT09YStcIi9cIiYmKHQ9byksbz09PWEmJnMmJih0PW4ocy5yZXBsYWNlKHYsXCJcIiksbykpLHQmJmYucHVzaFN0YXRlKHt9LF8udGl0bGUsdCl9fSksYj15LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLl9pZD1sLmd1aWQoKSx0aGlzLnByZWZpeD1pKGUpLHRoaXMuZml4PWU/czphfSxuYXZpZ2F0ZTpmdW5jdGlvbihlKXtwLmhhc2g9dGhpcy5maXgoZSl9LHJlcGxhY2U6ZnVuY3Rpb24oZSl7dGhpcy5yZXBsYWNlTG9jYXRpb24odGhpcy5maXgoZSkpfSxub3JtYWxpemU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5kZXhPZih0aGlzLnByZWZpeCk8MD9lOmUuc3BsaXQodGhpcy5wcmVmaXgpWzFdfSxjaGFuZ2U6ZnVuY3Rpb24odCl7aC5oYXNoQ2hhbmdlP2Uod2luZG93KS5vbihcImhhc2hjaGFuZ2UuXCIrdGhpcy5faWQsdCk6dGhpcy5faW50ZXJ2YWw9c2V0SW50ZXJ2YWwodCxnKX0sc3RvcDpmdW5jdGlvbigpe2Uod2luZG93KS5vZmYoXCJoYXNoY2hhbmdlLlwiK3RoaXMuX2lkKSxjbGVhckludGVydmFsKHRoaXMuX2ludGVydmFsKX0sY3VycmVudDpmdW5jdGlvbigpe3JldHVybiByKHRoaXMucHJlZml4KX0sbm9ybWFsaXplQ3VycmVudDpmdW5jdGlvbihlKXt2YXIgdD1wLnBhdGhuYW1lLG49ZS5yb290O3JldHVybiBlLnB1c2hTdGF0ZSYmbiE9PXQ/KHRoaXMucmVwbGFjZUxvY2F0aW9uKG4rdGhpcy5wcmVmaXgrbyhuLHQpKSwhMCk6ITF9fSksaz1sLk9ic2VydmFibGUuZXh0ZW5kKHtzdGFydDpmdW5jdGlvbih0KXtpZih0PXR8fHt9LHRoaXMuYmluZChbYyxkLHVdLHQpLCF0aGlzLl9zdGFydGVkKXt0aGlzLl9zdGFydGVkPSEwLHQucm9vdD10LnJvb3R8fFwiL1wiO3ZhciBuLGk9dGhpcy5jcmVhdGVBZGFwdGVyKHQpO2kubm9ybWFsaXplQ3VycmVudCh0KXx8KG49aS5jdXJyZW50KCksZS5leHRlbmQodGhpcyx7YWRhcHRlcjppLHJvb3Q6dC5yb290LGhpc3RvcnlMZW5ndGg6aS5sZW5ndGgoKSxjdXJyZW50Om4sbG9jYXRpb25zOltuXX0pLGkuY2hhbmdlKGUucHJveHkodGhpcyxcIl9jaGVja1VybFwiKSkpfX0sY3JlYXRlQWRhcHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gaC5wdXNoU3RhdGUmJmUucHVzaFN0YXRlP25ldyB3KGUucm9vdCk6bmV3IGIoZS5oYXNoQmFuZyl9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLl9zdGFydGVkJiYodGhpcy5hZGFwdGVyLnN0b3AoKSx0aGlzLnVuYmluZChjKSx0aGlzLl9zdGFydGVkPSExKX0sY2hhbmdlOmZ1bmN0aW9uKGUpe3RoaXMuYmluZChjLGUpfSxyZXBsYWNlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fbmF2aWdhdGUoZSx0LGZ1bmN0aW9uKHQpe3QucmVwbGFjZShlKSx0aGlzLmxvY2F0aW9uc1t0aGlzLmxvY2F0aW9ucy5sZW5ndGgtMV09dGhpcy5jdXJyZW50fSl9LG5hdmlnYXRlOmZ1bmN0aW9uKGUsbil7cmV0dXJuXCIjOmJhY2tcIj09PWU/KHRoaXMuYmFja0NhbGxlZD0hMCx0aGlzLmFkYXB0ZXIuYmFjaygpLHQpOih0aGlzLl9uYXZpZ2F0ZShlLG4sZnVuY3Rpb24odCl7dC5uYXZpZ2F0ZShlKSx0aGlzLmxvY2F0aW9ucy5wdXNoKHRoaXMuY3VycmVudCl9KSx0KX0sX25hdmlnYXRlOmZ1bmN0aW9uKGUsbixpKXt2YXIgcj10aGlzLmFkYXB0ZXI7cmV0dXJuIGU9ci5ub3JtYWxpemUoZSksdGhpcy5jdXJyZW50PT09ZXx8dGhpcy5jdXJyZW50PT09ZGVjb2RlVVJJQ29tcG9uZW50KGUpPyh0aGlzLnRyaWdnZXIodSksdCk6KChufHwhdGhpcy50cmlnZ2VyKGMse3VybDplfSkpJiYodGhpcy5jdXJyZW50PWUsaS5jYWxsKHRoaXMsciksdGhpcy5oaXN0b3J5TGVuZ3RoPXIubGVuZ3RoKCkpLHQpfSxfY2hlY2tVcmw6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmFkYXB0ZXIsbj1lLmN1cnJlbnQoKSxpPWUubGVuZ3RoKCkscj10aGlzLmhpc3RvcnlMZW5ndGg9PT1pLG89bj09PXRoaXMubG9jYXRpb25zW3RoaXMubG9jYXRpb25zLmxlbmd0aC0yXSYmcixhPXRoaXMuYmFja0NhbGxlZCxzPXRoaXMuY3VycmVudDtyZXR1cm4gbnVsbD09PW58fHRoaXMuY3VycmVudD09PW58fHRoaXMuY3VycmVudD09PWRlY29kZVVSSUNvbXBvbmVudChuKT8hMDoodGhpcy5oaXN0b3J5TGVuZ3RoPWksdGhpcy5iYWNrQ2FsbGVkPSExLHRoaXMuY3VycmVudD1uLG8mJnRoaXMudHJpZ2dlcihcImJhY2tcIix7dXJsOnMsdG86bn0pPyhlLmZvcndhcmQoKSx0aGlzLmN1cnJlbnQ9cyx0KTp0aGlzLnRyaWdnZXIoYyx7dXJsOm4sYmFja0J1dHRvblByZXNzZWQ6IWF9KT8obz9lLmZvcndhcmQoKTooZS5iYWNrKCksdGhpcy5oaXN0b3J5TGVuZ3RoLS0pLHRoaXMuY3VycmVudD1zLHQpOihvP3RoaXMubG9jYXRpb25zLnBvcCgpOnRoaXMubG9jYXRpb25zLnB1c2gobiksdCkpfX0pO2wuSGlzdG9yeT1rLGwuSGlzdG9yeS5IaXN0b3J5QWRhcHRlcj15LGwuSGlzdG9yeS5IYXNoQWRhcHRlcj1iLGwuSGlzdG9yeS5QdXNoU3RhdGVBZGFwdGVyPXcsbC5hYnNvbHV0ZVVSTD1uLGwuaGlzdG9yeT1uZXcga30od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7cmV0dXJuIHQ/ZTpcIihbXi9dKylcIn1mdW5jdGlvbiB0KHQsbil7cmV0dXJuIFJlZ0V4cChcIl5cIit0LnJlcGxhY2UoZixcIlxcXFwkJlwiKS5yZXBsYWNlKHUsXCIoPzokMSk/XCIpLnJlcGxhY2UoaCxlKS5yZXBsYWNlKHAsXCIoLio/KVwiKStcIiRcIixuP1wiaVwiOlwiXCIpfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIGUucmVwbGFjZSgvKFxcPy4qKXwoIy4qKS9nLFwiXCIpfXZhciBpPXdpbmRvdy5rZW5kbyxyPWkuaGlzdG9yeSxvPWkuT2JzZXJ2YWJsZSxhPVwiaW5pdFwiLHM9XCJyb3V0ZU1pc3NpbmdcIixsPVwiY2hhbmdlXCIsYz1cImJhY2tcIixkPVwic2FtZVwiLHU9L1xcKCguKj8pXFwpL2csaD0vKFxcKFxcPyk/OlxcdysvZyxwPS9cXCpcXHcrL2csZj0vW1xcLXt9XFxbXFxdKz8uLFxcXFxcXF4kfCNcXHNdL2csZz1pLkNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLG4saSl7ZSBpbnN0YW5jZW9mIFJlZ0V4cHx8KGU9dChlLGkpKSx0aGlzLnJvdXRlPWUsdGhpcy5fY2FsbGJhY2s9bn0sY2FsbGJhY2s6ZnVuY3Rpb24oZSl7dmFyIHQscixvPTAsYT1pLnBhcnNlUXVlcnlTdHJpbmdQYXJhbXMoZSk7Zm9yKGU9bihlKSx0PXRoaXMucm91dGUuZXhlYyhlKS5zbGljZSgxKSxyPXQubGVuZ3RoO3I+bztvKyspdm9pZCAwIT09dFtvXSYmKHRbb109ZGVjb2RlVVJJQ29tcG9uZW50KHRbb10pKTt0LnB1c2goYSksdGhpcy5fY2FsbGJhY2suYXBwbHkobnVsbCx0KX0sd29ya3NXaXRoOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJvdXRlLnRlc3QobihlKSk/KHRoaXMuY2FsbGJhY2soZSksITApOiExfX0pLG09by5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7ZXx8KGU9e30pLG8uZm4uaW5pdC5jYWxsKHRoaXMpLHRoaXMucm91dGVzPVtdLHRoaXMucHVzaFN0YXRlPWUucHVzaFN0YXRlLHRoaXMuaGFzaEJhbmc9ZS5oYXNoQmFuZyx0aGlzLnJvb3Q9ZS5yb290LHRoaXMuaWdub3JlQ2FzZT1lLmlnbm9yZUNhc2UhPT0hMSx0aGlzLmJpbmQoW2EscyxsLGRdLGUpfSxkZXN0cm95OmZ1bmN0aW9uKCl7ci51bmJpbmQobCx0aGlzLl91cmxDaGFuZ2VkUHJveHkpLHIudW5iaW5kKGQsdGhpcy5fc2FtZVByb3h5KSxyLnVuYmluZChjLHRoaXMuX2JhY2tQcm94eSksdGhpcy51bmJpbmQoKX0sc3RhcnQ6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj1mdW5jdGlvbigpe3QuX3NhbWUoKX0saT1mdW5jdGlvbihlKXt0Ll9iYWNrKGUpfSxvPWZ1bmN0aW9uKGUpe3QuX3VybENoYW5nZWQoZSl9O3Iuc3RhcnQoe3NhbWU6bixjaGFuZ2U6byxiYWNrOmkscHVzaFN0YXRlOnQucHVzaFN0YXRlLGhhc2hCYW5nOnQuaGFzaEJhbmcscm9vdDp0LnJvb3R9KSxlPXt1cmw6ci5jdXJyZW50fHxcIi9cIixwcmV2ZW50RGVmYXVsdDokLm5vb3B9LHQudHJpZ2dlcihhLGUpfHx0Ll91cmxDaGFuZ2VkKGUpLHRoaXMuX3VybENoYW5nZWRQcm94eT1vLHRoaXMuX2JhY2tQcm94eT1pfSxyb3V0ZTpmdW5jdGlvbihlLHQpe3RoaXMucm91dGVzLnB1c2gobmV3IGcoZSx0LHRoaXMuaWdub3JlQ2FzZSkpfSxuYXZpZ2F0ZTpmdW5jdGlvbihlLHQpe2kuaGlzdG9yeS5uYXZpZ2F0ZShlLHQpfSxyZXBsYWNlOmZ1bmN0aW9uKGUsdCl7aS5oaXN0b3J5LnJlcGxhY2UoZSx0KX0sX2JhY2s6ZnVuY3Rpb24oZSl7dGhpcy50cmlnZ2VyKGMse3VybDplLnVybCx0bzplLnRvfSkmJmUucHJldmVudERlZmF1bHQoKX0sX3NhbWU6ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIoZCl9LF91cmxDaGFuZ2VkOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixvLGE9ZS51cmw7aWYoYXx8KGE9XCIvXCIpLHRoaXMudHJpZ2dlcihsLHt1cmw6ZS51cmwscGFyYW1zOmkucGFyc2VRdWVyeVN0cmluZ1BhcmFtcyhlLnVybCksYmFja0J1dHRvblByZXNzZWQ6ZS5iYWNrQnV0dG9uUHJlc3NlZH0pKXJldHVybiB2b2lkIGUucHJldmVudERlZmF1bHQoKTtmb3IodD0wLG49dGhpcy5yb3V0ZXMsbz1uLmxlbmd0aDtvPnQ7dCsrKWlmKHI9blt0XSxyLndvcmtzV2l0aChhKSlyZXR1cm47dGhpcy50cmlnZ2VyKHMse3VybDphLHBhcmFtczppLnBhcnNlUXVlcnlTdHJpbmdQYXJhbXMoYSksYmFja0J1dHRvblByZXNzZWQ6ZS5iYWNrQnV0dG9uUHJlc3NlZH0pJiZlLnByZXZlbnREZWZhdWx0KCl9fSk7aS5Sb3V0ZXI9bX0oKSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4ocixzKXt2YXIgbCxjLGQsdSxoLHAsZixnLG09W10sdj1yLmxvZ2ljfHxcImFuZFwiLF89ci5maWx0ZXJzO2ZvcihsPTAsYz1fLmxlbmd0aDtjPmw7bCsrKXI9X1tsXSxkPXIuZmllbGQsZj1yLnZhbHVlLHA9ci5vcGVyYXRvcixyLmZpbHRlcnM/cj1uKHIscyk6KGc9ci5pZ25vcmVDYXNlLGQ9ZC5yZXBsYWNlKC9cXC4vZyxcIi9cIikscj1vW3BdLHMmJihyPWFbcF0pLHImJmYhPT10JiYodT1lLnR5cGUoZiksXCJzdHJpbmdcIj09PXU/KGg9XCInezF9J1wiLGY9Zi5yZXBsYWNlKC8nL2csXCInJ1wiKSxnPT09ITAmJihkPVwidG9sb3dlcihcIitkK1wiKVwiKSk6aD1cImRhdGVcIj09PXU/cz9cInsxOnl5eXktTU0tZGRUSEg6bW06c3MrMDA6MDB9XCI6XCJkYXRldGltZSd7MTp5eXl5LU1NLWRkVEhIOm1tOnNzfSdcIjpcInsxfVwiLHIubGVuZ3RoPjM/XCJzdWJzdHJpbmdvZlwiIT09cj9oPVwiezB9KHsyfSxcIitoK1wiKVwiOihoPVwiezB9KFwiK2grXCIsezJ9KVwiLFwiZG9lc25vdGNvbnRhaW5cIj09PXAmJihzPyhoPVwiezB9KHsyfSwnezF9JykgZXEgLTFcIixyPVwiaW5kZXhvZlwiKTpoKz1cIiBlcSBmYWxzZVwiKSk6aD1cInsyfSB7MH0gXCIraCxyPWkuZm9ybWF0KGgscixmLGQpKSksbS5wdXNoKHIpO3JldHVybiByPW0uam9pbihcIiBcIit2K1wiIFwiKSxtLmxlbmd0aD4xJiYocj1cIihcIityK1wiKVwiKSxyfXZhciBpPXdpbmRvdy5rZW5kbyxyPWUuZXh0ZW5kLG89e2VxOlwiZXFcIixuZXE6XCJuZVwiLGd0OlwiZ3RcIixndGU6XCJnZVwiLGx0OlwibHRcIixsdGU6XCJsZVwiLGNvbnRhaW5zOlwic3Vic3RyaW5nb2ZcIixkb2Vzbm90Y29udGFpbjpcInN1YnN0cmluZ29mXCIsZW5kc3dpdGg6XCJlbmRzd2l0aFwiLHN0YXJ0c3dpdGg6XCJzdGFydHN3aXRoXCJ9LGE9cih7fSxvLHtjb250YWluczpcImNvbnRhaW5zXCJ9KSxzPXtwYWdlU2l6ZTplLm5vb3AscGFnZTplLm5vb3AsZmlsdGVyOmZ1bmN0aW9uKGUsdCxpKXt0JiYoZS4kZmlsdGVyPW4odCxpKSl9LHNvcnQ6ZnVuY3Rpb24odCxuKXt2YXIgaT1lLm1hcChuLGZ1bmN0aW9uKGUpe3ZhciB0PWUuZmllbGQucmVwbGFjZSgvXFwuL2csXCIvXCIpO3JldHVyblwiZGVzY1wiPT09ZS5kaXImJih0Kz1cIiBkZXNjXCIpLHR9KS5qb2luKFwiLFwiKTtpJiYodC4kb3JkZXJieT1pKX0sc2tpcDpmdW5jdGlvbihlLHQpe3QmJihlLiRza2lwPXQpfSx0YWtlOmZ1bmN0aW9uKGUsdCl7dCYmKGUuJHRvcD10KX19LGw9e3JlYWQ6e2RhdGFUeXBlOlwianNvbnBcIn19O3IoITAsaS5kYXRhLHtzY2hlbWFzOntvZGF0YTp7dHlwZTpcImpzb25cIixkYXRhOmZ1bmN0aW9uKGUpe3JldHVybiBlLmQucmVzdWx0c3x8W2UuZF19LHRvdGFsOlwiZC5fX2NvdW50XCJ9fSx0cmFuc3BvcnRzOntvZGF0YTp7cmVhZDp7Y2FjaGU6ITAsZGF0YVR5cGU6XCJqc29ucFwiLGpzb25wOlwiJGNhbGxiYWNrXCJ9LHVwZGF0ZTp7Y2FjaGU6ITAsZGF0YVR5cGU6XCJqc29uXCIsY29udGVudFR5cGU6XCJhcHBsaWNhdGlvbi9qc29uXCIsdHlwZTpcIlBVVFwifSxjcmVhdGU6e2NhY2hlOiEwLGRhdGFUeXBlOlwianNvblwiLGNvbnRlbnRUeXBlOlwiYXBwbGljYXRpb24vanNvblwiLHR5cGU6XCJQT1NUXCJ9LGRlc3Ryb3k6e2NhY2hlOiEwLGRhdGFUeXBlOlwianNvblwiLHR5cGU6XCJERUxFVEVcIn0scGFyYW1ldGVyTWFwOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixvLGEsYztpZihlPWV8fHt9LHQ9dHx8XCJyZWFkXCIsYz0odGhpcy5vcHRpb25zfHxsKVt0XSxjPWM/Yy5kYXRhVHlwZTpcImpzb25cIixcInJlYWRcIj09PXQpe3I9eyRpbmxpbmVjb3VudDpcImFsbHBhZ2VzXCJ9LFwianNvblwiIT1jJiYoci4kZm9ybWF0PVwianNvblwiKTtmb3IoYSBpbiBlKXNbYV0/c1thXShyLGVbYV0sbik6clthXT1lW2FdfWVsc2V7aWYoXCJqc29uXCIhPT1jKXRocm93IEVycm9yKFwiT25seSBqc29uIGRhdGFUeXBlIGNhbiBiZSB1c2VkIGZvciBcIit0K1wiIG9wZXJhdGlvbi5cIik7aWYoXCJkZXN0cm95XCIhPT10KXtmb3IoYSBpbiBlKW89ZVthXSxcIm51bWJlclwiPT10eXBlb2YgbyYmKGVbYV09bytcIlwiKTtyPWkuc3RyaW5naWZ5KGUpfX1yZXR1cm4gcn19fX0pLHIoITAsaS5kYXRhLHtzY2hlbWFzOntcIm9kYXRhLXY0XCI6e3R5cGU6XCJqc29uXCIsZGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gZS52YWx1ZT9lLnZhbHVlOihkZWxldGUgZVtcIm9kYXRhLm1ldGFkYXRhXCJdLFtlXSl9LHRvdGFsOmZ1bmN0aW9uKGUpe3JldHVybiBlW1wiQG9kYXRhLmNvdW50XCJdfX19LHRyYW5zcG9ydHM6e1wib2RhdGEtdjRcIjp7cmVhZDp7Y2FjaGU6ITAsZGF0YVR5cGU6XCJqc29uXCJ9LHVwZGF0ZTp7Y2FjaGU6ITAsZGF0YVR5cGU6XCJqc29uXCIsY29udGVudFR5cGU6XCJhcHBsaWNhdGlvbi9qc29uO0lFRUU3NTRDb21wYXRpYmxlPXRydWVcIix0eXBlOlwiUFVUXCJ9LGNyZWF0ZTp7Y2FjaGU6ITAsZGF0YVR5cGU6XCJqc29uXCIsY29udGVudFR5cGU6XCJhcHBsaWNhdGlvbi9qc29uO0lFRUU3NTRDb21wYXRpYmxlPXRydWVcIix0eXBlOlwiUE9TVFwifSxkZXN0cm95OntjYWNoZTohMCxkYXRhVHlwZTpcImpzb25cIix0eXBlOlwiREVMRVRFXCJ9LHBhcmFtZXRlck1hcDpmdW5jdGlvbihlLHQpe3ZhciBuPWkuZGF0YS50cmFuc3BvcnRzLm9kYXRhLnBhcmFtZXRlck1hcChlLHQsITApO3JldHVyblwicmVhZFwiPT10JiYobi4kY291bnQ9ITAsZGVsZXRlIG4uJGlubGluZWNvdW50KSxufX19fSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG49d2luZG93LmtlbmRvLGk9ZS5pc0FycmF5LHI9ZS5pc1BsYWluT2JqZWN0LG89ZS5tYXAsYT1lLmVhY2gscz1lLmV4dGVuZCxsPW4uZ2V0dGVyLGM9bi5DbGFzcyxkPWMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0LGwsYyxkLHU9dGhpcyxoPWUudG90YWwscD1lLm1vZGVsLGY9ZS5wYXJzZSxnPWUuZXJyb3JzLG09ZS5zZXJpYWxpemUsdj1lLmRhdGE7cCYmKHIocCkmJih0PWUubW9kZWxCYXNlfHxuLmRhdGEuTW9kZWwscC5maWVsZHMmJmEocC5maWVsZHMsZnVuY3Rpb24oZSx0KXt0PXIodCkmJnQuZmllbGQ/cyh0LHtmaWVsZDp1LmdldHRlcih0LmZpZWxkKX0pOntmaWVsZDp1LmdldHRlcih0KX0scC5maWVsZHNbZV09dH0pLGw9cC5pZCxsJiYoYz17fSxjW3UueHBhdGhUb01lbWJlcihsLCEwKV09e2ZpZWxkOnUuZ2V0dGVyKGwpfSxwLmZpZWxkcz1zKGMscC5maWVsZHMpLHAuaWQ9dS54cGF0aFRvTWVtYmVyKGwpKSxwPXQuZGVmaW5lKHApKSx1Lm1vZGVsPXApLGgmJihcInN0cmluZ1wiPT10eXBlb2YgaD8oaD11LmdldHRlcihoKSx1LnRvdGFsPWZ1bmN0aW9uKGUpe3JldHVybiBwYXJzZUludChoKGUpLDEwKX0pOlwiZnVuY3Rpb25cIj09dHlwZW9mIGgmJih1LnRvdGFsPWgpKSxnJiYoXCJzdHJpbmdcIj09dHlwZW9mIGc/KGc9dS5nZXR0ZXIoZyksdS5lcnJvcnM9ZnVuY3Rpb24oZSl7cmV0dXJuIGcoZSl8fG51bGx9KTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBnJiYodS5lcnJvcnM9ZykpLHYmJihcInN0cmluZ1wiPT10eXBlb2Ygdj8odj11LnhwYXRoVG9NZW1iZXIodiksdS5kYXRhPWZ1bmN0aW9uKGUpe3ZhciB0LG49dS5ldmFsdWF0ZShlLHYpO3JldHVybiBuPWkobik/bjpbbl0sdS5tb2RlbCYmcC5maWVsZHM/KHQ9bmV3IHUubW9kZWwsbyhuLGZ1bmN0aW9uKGUpe2lmKGUpe3ZhciBuLGk9e307Zm9yKG4gaW4gcC5maWVsZHMpaVtuXT10Ll9wYXJzZShuLHAuZmllbGRzW25dLmZpZWxkKGUpKTtyZXR1cm4gaX19KSk6bn0pOlwiZnVuY3Rpb25cIj09dHlwZW9mIHYmJih1LmRhdGE9dikpLFwiZnVuY3Rpb25cIj09dHlwZW9mIGYmJihkPXUucGFyc2UsdS5wYXJzZT1mdW5jdGlvbihlKXt2YXIgdD1mLmNhbGwodSxlKTtyZXR1cm4gZC5jYWxsKHUsdCl9KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBtJiYodS5zZXJpYWxpemU9bSl9LHRvdGFsOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmRhdGEoZSkubGVuZ3RofSxlcnJvcnM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/ZS5lcnJvcnM6bnVsbH0sc2VyaWFsaXplOmZ1bmN0aW9uKGUpe3JldHVybiBlfSxwYXJzZURPTTpmdW5jdGlvbihlKXt2YXIgbixyLG8sYSxzLGwsYyxkPXt9LHU9ZS5hdHRyaWJ1dGVzLGg9dS5sZW5ndGg7Zm9yKGM9MDtoPmM7YysrKWw9dVtjXSxkW1wiQFwiK2wubm9kZU5hbWVdPWwubm9kZVZhbHVlO2ZvcihyPWUuZmlyc3RDaGlsZDtyO3I9ci5uZXh0U2libGluZylvPXIubm9kZVR5cGUsMz09PW98fDQ9PT1vP2RbXCIjdGV4dFwiXT1yLm5vZGVWYWx1ZToxPT09byYmKG49dGhpcy5wYXJzZURPTShyKSxhPXIubm9kZU5hbWUscz1kW2FdLGkocyk/cy5wdXNoKG4pOnM9cyE9PXQ/W3Msbl06bixkW2FdPXMpO3JldHVybiBkfSxldmFsdWF0ZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixyLG8sYSxzLGw9dC5zcGxpdChcIi5cIik7bj1sLnNoaWZ0KCk7KWlmKGU9ZVtuXSxpKGUpKXtmb3Iocj1bXSx0PWwuam9pbihcIi5cIikscz0wLG89ZS5sZW5ndGg7bz5zO3MrKylhPXRoaXMuZXZhbHVhdGUoZVtzXSx0KSxhPWkoYSk/YTpbYV0sci5wdXNoLmFwcGx5KHIsYSk7cmV0dXJuIHJ9cmV0dXJuIGV9LHBhcnNlOmZ1bmN0aW9uKHQpe3ZhciBuLGkscj17fTtyZXR1cm4gbj10LmRvY3VtZW50RWxlbWVudHx8ZS5wYXJzZVhNTCh0KS5kb2N1bWVudEVsZW1lbnQsaT10aGlzLnBhcnNlRE9NKG4pLHJbbi5ub2RlTmFtZV09aSxyfSx4cGF0aFRvTWVtYmVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU/KGU9ZS5yZXBsYWNlKC9eXFwvLyxcIlwiKS5yZXBsYWNlKC9cXC8vZyxcIi5cIiksZS5pbmRleE9mKFwiQFwiKT49MD9lLnJlcGxhY2UoL1xcLj8oQC4qKS8sdD9cIiQxXCI6J1tcIiQxXCJdJyk6ZS5pbmRleE9mKFwidGV4dCgpXCIpPj0wP2UucmVwbGFjZSgvKFxcLj90ZXh0XFwoXFwpKS8sdD9cIiN0ZXh0XCI6J1tcIiN0ZXh0XCJdJyk6ZSk6XCJcIn0sZ2V0dGVyOmZ1bmN0aW9uKGUpe3JldHVybiBsKHRoaXMueHBhdGhUb01lbWJlcihlKSwhMCl9fSk7ZS5leHRlbmQoITAsbi5kYXRhLHtYbWxEYXRhUmVhZGVyOmQscmVhZGVyczp7eG1sOmR9fSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQsbixpKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIG8sYT17fTtmb3IobyBpbiByKWFbb109cltvXTthLmZpZWxkPWk/bitcIi5cIityLmZpZWxkOm4sdD09d3QmJmUuX25vdGlmeUNoYW5nZSYmZS5fbm90aWZ5Q2hhbmdlKGEpLGUudHJpZ2dlcih0LGEpfX1mdW5jdGlvbiBpKHQsbil7aWYodD09PW4pcmV0dXJuITA7dmFyIHIsbz1lLnR5cGUodCksYT1lLnR5cGUobik7aWYobyE9PWEpcmV0dXJuITE7aWYoXCJkYXRlXCI9PT1vKXJldHVybiB0LmdldFRpbWUoKT09PW4uZ2V0VGltZSgpO2lmKFwib2JqZWN0XCIhPT1vJiZcImFycmF5XCIhPT1vKXJldHVybiExO2ZvcihyIGluIHQpaWYoIWkodFtyXSxuW3JdKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiByKGUsdCl7dmFyIG4saTtmb3IoaSBpbiBlKXtpZihuPWVbaV0saXQobikmJm4uZmllbGQmJm4uZmllbGQ9PT10KXJldHVybiBuO2lmKG49PT10KXJldHVybiBufXJldHVybiBudWxsfWZ1bmN0aW9uIG8oZSl7dGhpcy5kYXRhPWV8fFtdfWZ1bmN0aW9uIGEoZSxuKXtpZihlKXt2YXIgaT10eXBlb2YgZT09PWZ0P3tmaWVsZDplLGRpcjpufTplLHI9b3QoaSk/aTppIT09dD9baV06W107cmV0dXJuIGF0KHIsZnVuY3Rpb24oZSl7cmV0dXJuISFlLmRpcn0pfX1mdW5jdGlvbiBzKGUpe3ZhciB0LG4saSxyLG89ZS5maWx0ZXJzO2lmKG8pZm9yKHQ9MCxuPW8ubGVuZ3RoO24+dDt0KyspaT1vW3RdLHI9aS5vcGVyYXRvcixyJiZ0eXBlb2Ygcj09PWZ0JiYoaS5vcGVyYXRvcj1XW3IudG9Mb3dlckNhc2UoKV18fHIpLHMoaSl9ZnVuY3Rpb24gbChlKXtyZXR1cm4gZSYmIXJ0KGUpPygob3QoZSl8fCFlLmZpbHRlcnMpJiYoZT17bG9naWM6XCJhbmRcIixmaWx0ZXJzOm90KGUpP2U6W2VdfSkscyhlKSxlKTp0fWZ1bmN0aW9uIGMoZSl7cmV0dXJuIG90KGUpP2U6W2VdfWZ1bmN0aW9uIGQoZSxuKXt2YXIgaT10eXBlb2YgZT09PWZ0P3tmaWVsZDplLGRpcjpufTplLHI9b3QoaSk/aTppIT09dD9baV06W107cmV0dXJuIEgocixmdW5jdGlvbihlKXtyZXR1cm57ZmllbGQ6ZS5maWVsZCxkaXI6ZS5kaXJ8fFwiYXNjXCIsYWdncmVnYXRlczplLmFnZ3JlZ2F0ZXN9fSl9ZnVuY3Rpb24gdShlLHQpe3JldHVybiBlJiZlLmdldFRpbWUmJnQmJnQuZ2V0VGltZT9lLmdldFRpbWUoKT09PXQuZ2V0VGltZSgpOmU9PT10fWZ1bmN0aW9uIGgoZSx0LG4saSxyLG8pe3ZhciBhLHMsbCxjLGQ7Zm9yKHQ9dHx8W10sYz10Lmxlbmd0aCxhPTA7Yz5hO2ErKylzPXRbYV0sbD1zLmFnZ3JlZ2F0ZSxkPXMuZmllbGQsZVtkXT1lW2RdfHx7fSxvW2RdPW9bZF18fHt9LG9bZF1bbF09b1tkXVtsXXx8e30sZVtkXVtsXT1qW2wudG9Mb3dlckNhc2UoKV0oZVtkXVtsXSxuLGR0LmFjY2Vzc29yKGQpLGkscixvW2RdW2xdKX1mdW5jdGlvbiBwKGUpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBlJiYhaXNOYU4oZSl9ZnVuY3Rpb24gZihlKXtyZXR1cm4gZSYmZS5nZXRUaW1lfWZ1bmN0aW9uIGcoZSl7dmFyIHQsbj1lLmxlbmd0aCxpPUFycmF5KG4pO2Zvcih0PTA7bj50O3QrKylpW3RdPWVbdF0udG9KU09OKCk7cmV0dXJuIGl9ZnVuY3Rpb24gbShlLHQsbixpLHIpe3ZhciBvLGEscyxsLGM7Zm9yKGw9MCxjPWUubGVuZ3RoO2M+bDtsKyspe289ZVtsXTtmb3IoYSBpbiB0KXM9clthXSxzJiZzIT09YSYmKG9bc109dFthXShvKSxkZWxldGUgb1thXSl9fWZ1bmN0aW9uIHYoZSx0LG4saSxyKXt2YXIgbyxhLHMsbCxjO2ZvcihsPTAsYz1lLmxlbmd0aDtjPmw7bCsrKXtvPWVbbF07Zm9yKGEgaW4gdClvW2FdPW4uX3BhcnNlKGEsdFthXShvKSkscz1yW2FdLHMmJnMhPT1hJiZkZWxldGUgb1tzXX19ZnVuY3Rpb24gXyhlLHQsbixpLHIpe3ZhciBvLGEscyxsO2ZvcihhPTAsbD1lLmxlbmd0aDtsPmE7YSsrKW89ZVthXSxzPWlbby5maWVsZF0scyYmcyE9by5maWVsZCYmKG8uZmllbGQ9cyksby52YWx1ZT1uLl9wYXJzZShvLmZpZWxkLG8udmFsdWUpLG8uaGFzU3ViZ3JvdXBzP18oby5pdGVtcyx0LG4saSxyKTp2KG8uaXRlbXMsdCxuLGkscil9ZnVuY3Rpb24geShlLHQsbixpLHIsbyl7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBhPWUoYSksYSYmIXJ0KGkpJiYoXCJbb2JqZWN0IEFycmF5XVwiPT09SHQuY2FsbChhKXx8YSBpbnN0YW5jZW9mIGp0fHwoYT1bYV0pLG4oYSxpLG5ldyB0LHIsbykpLGF8fFtdfX1mdW5jdGlvbiB3KGUsdCxuLGkpe2Zvcih2YXIgcixvLGEscz0wO3QubGVuZ3RoJiZpJiYocj10W3NdLG89ci5pdGVtcyxhPW8ubGVuZ3RoLGUmJmUuZmllbGQ9PT1yLmZpZWxkJiZlLnZhbHVlPT09ci52YWx1ZT8oZS5oYXNTdWJncm91cHMmJmUuaXRlbXMubGVuZ3RoP3coZS5pdGVtc1tlLml0ZW1zLmxlbmd0aC0xXSxyLml0ZW1zLG4saSk6KG89by5zbGljZShuLG4raSksZS5pdGVtcz1lLml0ZW1zLmNvbmNhdChvKSksdC5zcGxpY2Uocy0tLDEpKTpyLmhhc1N1Ymdyb3VwcyYmby5sZW5ndGg/dyhyLG8sbixpKToobz1vLnNsaWNlKG4sbitpKSxyLml0ZW1zPW8sci5pdGVtcy5sZW5ndGh8fHQuc3BsaWNlKHMtLSwxKSksMD09PW8ubGVuZ3RoP24tPWE6KG49MCxpLT1vLmxlbmd0aCksISgrK3M+PXQubGVuZ3RoKSk7KTt0Lmxlbmd0aD5zJiZ0LnNwbGljZShzLHQubGVuZ3RoLXMpfWZ1bmN0aW9uIGIoZSl7dmFyIHQsbixpLHIsbyxhPVtdO2Zvcih0PTAsbj1lLmxlbmd0aDtuPnQ7dCsrKWlmKG89ZS5hdCh0KSxvLmhhc1N1Ymdyb3VwcylhPWEuY29uY2F0KGIoby5pdGVtcykpO2Vsc2UgZm9yKGk9by5pdGVtcyxyPTA7aS5sZW5ndGg+cjtyKyspYS5wdXNoKGkuYXQocikpO3JldHVybiBhfWZ1bmN0aW9uIGsoZSx0KXt2YXIgbixpLHI7aWYodClmb3Iobj0wLGk9ZS5sZW5ndGg7aT5uO24rKylyPWUuYXQobiksci5oYXNTdWJncm91cHM/ayhyLml0ZW1zLHQpOnIuaXRlbXM9bmV3IEd0KHIuaXRlbXMsdCl9ZnVuY3Rpb24geChlLHQpe2Zvcih2YXIgbj0wLGk9ZS5sZW5ndGg7aT5uO24rKylpZihlW25dLmhhc1N1Ymdyb3Vwcyl7aWYoeChlW25dLml0ZW1zLHQpKXJldHVybiEwfWVsc2UgaWYodChlW25dLml0ZW1zLGVbbl0pKXJldHVybiEwfWZ1bmN0aW9uIEMoZSx0LG4saSl7Zm9yKHZhciByPTA7ZS5sZW5ndGg+ciYmZVtyXS5kYXRhIT09dCYmIVMoZVtyXS5kYXRhLG4saSk7cisrKTt9ZnVuY3Rpb24gUyhlLHQsbil7Zm9yKHZhciBpPTAscj1lLmxlbmd0aDtyPmk7aSsrKXtpZihlW2ldJiZlW2ldLmhhc1N1Ymdyb3VwcylyZXR1cm4gUyhlW2ldLml0ZW1zLHQsbik7aWYoZVtpXT09PXR8fGVbaV09PT1uKXJldHVybiBlW2ldPW4sITB9fWZ1bmN0aW9uIFQoZSxuLGkscil7dmFyIG8sYSxzLGw7Zm9yKG89MCxhPWUubGVuZ3RoO2E+bztvKyspaWYocz1lW29dLHMmJiEocyBpbnN0YW5jZW9mIHIpKWlmKHMuaGFzU3ViZ3JvdXBzIT09dClUKHMuaXRlbXMsbixpLHIpO2Vsc2UgZm9yKGw9MDtuLmxlbmd0aD5sO2wrKylpZihuW2xdPT09cyl7ZVtvXT1uLmF0KGwpLEMoaSxuLHMsZVtvXSk7YnJlYWt9fWZ1bmN0aW9uIEQoZSx0KXt2YXIgbixpLHI7Zm9yKG49MCxpPWUubGVuZ3RoO2k+bjtuKyspaWYocj1lLmF0KG4pLHIudWlkPT10LnVpZClyZXR1cm4gZS5zcGxpY2UobiwxKSxyfWZ1bmN0aW9uIEEoZSx0KXt2YXIgbixpLHIsbztmb3Iocj1lLmxlbmd0aC0xLG89MDtyPj1vO3ItLSlpPWVbcl0sbj17dmFsdWU6dC5nZXQoaS5maWVsZCksZmllbGQ6aS5maWVsZCxpdGVtczpuP1tuXTpbdF0saGFzU3ViZ3JvdXBzOiEhbixhZ2dyZWdhdGVzOnt9fTtyZXR1cm4gbn1mdW5jdGlvbiBFKGUsdCl7cmV0dXJuIHQ/UChlLGZ1bmN0aW9uKGUpe3JldHVybiBlLnVpZD9lLnVpZD09dC51aWQ6ZVt0LmlkRmllbGRdPT09dC5pZH0pOi0xfWZ1bmN0aW9uIE0oZSx0KXtyZXR1cm4gdD9QKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGUudWlkPT10LnVpZH0pOi0xfWZ1bmN0aW9uIFAoZSx0KXt2YXIgbixpO2ZvcihuPTAsaT1lLmxlbmd0aDtpPm47bisrKWlmKHQoZVtuXSkpcmV0dXJuIG47cmV0dXJuLTF9ZnVuY3Rpb24gSShlLHQpe3ZhciBuLGk7cmV0dXJuIGUmJiFydChlKT8obj1lW3RdLGk9aXQobik/bi5mcm9tfHxuLmZpZWxkfHx0OmVbdF18fHQsdXQoaSk/dDppKTp0fWZ1bmN0aW9uIHooZSx0KXt2YXIgbixpLHIsbz17fTtmb3IociBpbiBlKVwiZmlsdGVyc1wiIT09ciYmKG9bcl09ZVtyXSk7aWYoZS5maWx0ZXJzKWZvcihvLmZpbHRlcnM9W10sbj0wLGk9ZS5maWx0ZXJzLmxlbmd0aDtpPm47bisrKW8uZmlsdGVyc1tuXT16KGUuZmlsdGVyc1tuXSx0KTtlbHNlIG8uZmllbGQ9SSh0LmZpZWxkcyxvLmZpZWxkKTtyZXR1cm4gb31mdW5jdGlvbiBGKGUsdCl7dmFyIG4saSxyLG8sYSxzPVtdO2ZvcihuPTAsaT1lLmxlbmd0aDtpPm47bisrKXtyPXt9LG89ZVtuXTtmb3IoYSBpbiBvKXJbYV09b1thXTtyLmZpZWxkPUkodC5maWVsZHMsci5maWVsZCksci5hZ2dyZWdhdGVzJiZvdChyLmFnZ3JlZ2F0ZXMpJiYoci5hZ2dyZWdhdGVzPUYoci5hZ2dyZWdhdGVzLHQpKSxzLnB1c2gocil9cmV0dXJuIHN9ZnVuY3Rpb24gUih0LG4pe3ZhciBpLHIsbyxhLHMsbD1lKHQpWzBdLmNoaWxkcmVuLGM9W10sZD1uWzBdLHU9blsxXTtmb3IoaT0wLHI9bC5sZW5ndGg7cj5pO2krKylvPXt9LHM9bFtpXSxzLmRpc2FibGVkfHwob1tkLmZpZWxkXT1zLnRleHQsYT1zLmF0dHJpYnV0ZXMudmFsdWUsYT1hJiZhLnNwZWNpZmllZD9zLnZhbHVlOnMudGV4dCxvW3UuZmllbGRdPWEsYy5wdXNoKG8pKTtyZXR1cm4gY31mdW5jdGlvbiBCKHQsbil7dmFyIGkscixvLGEscyxsLGMsZD1lKHQpWzBdLnRCb2RpZXNbMF0sdT1kP2Qucm93czpbXSxoPW4ubGVuZ3RoLHA9W107Zm9yKGk9MCxyPXUubGVuZ3RoO3I+aTtpKyspe2ZvcihzPXt9LGM9ITAsYT11W2ldLmNlbGxzLG89MDtoPm87bysrKWw9YVtvXSxcInRoXCIhPT1sLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJihjPSExLHNbbltvXS5maWVsZF09bC5pbm5lckhUTUwpO2N8fHAucHVzaChzKX1yZXR1cm4gcH1mdW5jdGlvbiBMKGUpe3JldHVybiBmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2RhdGEsbj1LLmZuW2VdLmFwcGx5KHRoaXMsTHQuY2FsbChhcmd1bWVudHMpKTtyZXR1cm4gdGhpcy5fZGF0YSE9dCYmdGhpcy5fYXR0YWNoQnViYmxlSGFuZGxlcnMoKSxufX1mdW5jdGlvbiBPKHQsbil7ZnVuY3Rpb24gaShlLHQpe3JldHVybiBlLmZpbHRlcih0KS5hZGQoZS5maW5kKHQpKX12YXIgcixvLGEscyxsLGMsZCx1LGg9ZSh0KS5jaGlsZHJlbigpLHA9W10sZj1uWzBdLmZpZWxkLGc9blsxXSYmblsxXS5maWVsZCxtPW5bMl0mJm5bMl0uZmllbGQsdj1uWzNdJiZuWzNdLmZpZWxkO2ZvcihyPTAsbz1oLmxlbmd0aDtvPnI7cisrKWE9e19sb2FkZWQ6ITB9LHM9aC5lcShyKSxjPXNbMF0uZmlyc3RDaGlsZCx1PXMuY2hpbGRyZW4oKSx0PXUuZmlsdGVyKFwidWxcIiksdT11LmZpbHRlcihcIjpub3QodWwpXCIpLGw9cy5hdHRyKFwiZGF0YS1pZFwiKSxsJiYoYS5pZD1sKSxjJiYoYVtmXT0zPT1jLm5vZGVUeXBlP2Mubm9kZVZhbHVlOnUudGV4dCgpKSxnJiYoYVtnXT1pKHUsXCJhXCIpLmF0dHIoXCJocmVmXCIpKSx2JiYoYVt2XT1pKHUsXCJpbWdcIikuYXR0cihcInNyY1wiKSksbSYmKGQ9aSh1LFwiLmstc3ByaXRlXCIpLnByb3AoXCJjbGFzc05hbWVcIiksYVttXT1kJiZlLnRyaW0oZC5yZXBsYWNlKFwiay1zcHJpdGVcIixcIlwiKSkpLHQubGVuZ3RoJiYoYS5pdGVtcz1PKHQuZXEoMCksbikpLFwidHJ1ZVwiPT1zLmF0dHIoXCJkYXRhLWhhc0NoaWxkcmVuXCIpJiYoYS5oYXNDaGlsZHJlbj0hMCkscC5wdXNoKGEpO3JldHVybiBwfXZhciBILE4sVixVLFcsaixHLHEsJCxZLEssUSxYLEosWixldCx0dD1lLmV4dGVuZCxudD1lLnByb3h5LGl0PWUuaXNQbGFpbk9iamVjdCxydD1lLmlzRW1wdHlPYmplY3Qsb3Q9ZS5pc0FycmF5LGF0PWUuZ3JlcCxzdD1lLmFqYXgsbHQ9ZS5lYWNoLGN0PWUubm9vcCxkdD13aW5kb3cua2VuZG8sdXQ9ZHQuaXNGdW5jdGlvbixodD1kdC5PYnNlcnZhYmxlLHB0PWR0LkNsYXNzLGZ0PVwic3RyaW5nXCIsZ3Q9XCJmdW5jdGlvblwiLG10PVwiY3JlYXRlXCIsdnQ9XCJyZWFkXCIsX3Q9XCJ1cGRhdGVcIix5dD1cImRlc3Ryb3lcIix3dD1cImNoYW5nZVwiLGJ0PVwic3luY1wiLGt0PVwiZ2V0XCIseHQ9XCJlcnJvclwiLEN0PVwicmVxdWVzdFN0YXJ0XCIsU3Q9XCJwcm9ncmVzc1wiLFR0PVwicmVxdWVzdEVuZFwiLER0PVttdCx2dCxfdCx5dF0sQXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LEV0PWR0LmdldHRlcixNdD1kdC5zdHJpbmdpZnksUHQ9TWF0aCxJdD1bXS5wdXNoLHp0PVtdLmpvaW4sRnQ9W10ucG9wLFJ0PVtdLnNwbGljZSxCdD1bXS5zaGlmdCxMdD1bXS5zbGljZSxPdD1bXS51bnNoaWZ0LEh0PXt9LnRvU3RyaW5nLE50PWR0LnN1cHBvcnQuc3RhYmxlU29ydCxWdD0vXlxcL0RhdGVcXCgoLio/KVxcKVxcLyQvLFV0PS8oXFxyK3xcXG4rKS9nLFd0PS8oPz1bJ1xcXFxdKS9nLGp0PWh0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7bi50eXBlPXR8fHF0LGh0LmZuLmluaXQuY2FsbChuKSxuLmxlbmd0aD1lLmxlbmd0aCxuLndyYXBBbGwoZSxuKX0sYXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXNbZV19LHRvSlNPTjpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLmxlbmd0aCxpPUFycmF5KG4pO1xuZm9yKGU9MDtuPmU7ZSsrKXQ9dGhpc1tlXSx0IGluc3RhbmNlb2YgcXQmJih0PXQudG9KU09OKCkpLGlbZV09dDtyZXR1cm4gaX0scGFyZW50OmN0LHdyYXBBbGw6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcyxvPWZ1bmN0aW9uKCl7cmV0dXJuIHJ9O2Zvcih0PXR8fFtdLG49MCxpPWUubGVuZ3RoO2k+bjtuKyspdFtuXT1yLndyYXAoZVtuXSxvKTtyZXR1cm4gdH0sd3JhcDpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcztyZXR1cm4gbnVsbCE9PWUmJlwiW29iamVjdCBPYmplY3RdXCI9PT1IdC5jYWxsKGUpJiYobj1lIGluc3RhbmNlb2YgaS50eXBlfHxlIGluc3RhbmNlb2YgS3Qsbnx8KGU9ZSBpbnN0YW5jZW9mIHF0P2UudG9KU09OKCk6ZSxlPW5ldyBpLnR5cGUoZSkpLGUucGFyZW50PXQsZS5iaW5kKHd0LGZ1bmN0aW9uKGUpe2kudHJpZ2dlcih3dCx7ZmllbGQ6ZS5maWVsZCxub2RlOmUubm9kZSxpbmRleDplLmluZGV4LGl0ZW1zOmUuaXRlbXN8fFt0aGlzXSxhY3Rpb246ZS5ub2RlP2UuYWN0aW9ufHxcIml0ZW1jaGFuZ2VcIjpcIml0ZW1jaGFuZ2VcIn0pfSkpLGV9LHB1c2g6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMubGVuZ3RoLG49dGhpcy53cmFwQWxsKGFyZ3VtZW50cyk7cmV0dXJuIGU9SXQuYXBwbHkodGhpcyxuKSx0aGlzLnRyaWdnZXIod3Qse2FjdGlvbjpcImFkZFwiLGluZGV4OnQsaXRlbXM6bn0pLGV9LHNsaWNlOkx0LHNvcnQ6W10uc29ydCxqb2luOnp0LHBvcDpmdW5jdGlvbigpe3ZhciBlPXRoaXMubGVuZ3RoLHQ9RnQuYXBwbHkodGhpcyk7cmV0dXJuIGUmJnRoaXMudHJpZ2dlcih3dCx7YWN0aW9uOlwicmVtb3ZlXCIsaW5kZXg6ZS0xLGl0ZW1zOlt0XX0pLHR9LHNwbGljZTpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGE9dGhpcy53cmFwQWxsKEx0LmNhbGwoYXJndW1lbnRzLDIpKTtpZihpPVJ0LmFwcGx5KHRoaXMsW2UsdF0uY29uY2F0KGEpKSxpLmxlbmd0aClmb3IodGhpcy50cmlnZ2VyKHd0LHthY3Rpb246XCJyZW1vdmVcIixpbmRleDplLGl0ZW1zOml9KSxyPTAsbz1pLmxlbmd0aDtvPnI7cisrKWlbcl0uY2hpbGRyZW4mJmlbcl0udW5iaW5kKHd0KTtyZXR1cm4gbiYmdGhpcy50cmlnZ2VyKHd0LHthY3Rpb246XCJhZGRcIixpbmRleDplLGl0ZW1zOmF9KSxpfSxzaGlmdDpmdW5jdGlvbigpe3ZhciBlPXRoaXMubGVuZ3RoLHQ9QnQuYXBwbHkodGhpcyk7cmV0dXJuIGUmJnRoaXMudHJpZ2dlcih3dCx7YWN0aW9uOlwicmVtb3ZlXCIsaW5kZXg6MCxpdGVtczpbdF19KSx0fSx1bnNoaWZ0OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLndyYXBBbGwoYXJndW1lbnRzKTtyZXR1cm4gZT1PdC5hcHBseSh0aGlzLHQpLHRoaXMudHJpZ2dlcih3dCx7YWN0aW9uOlwiYWRkXCIsaW5kZXg6MCxpdGVtczp0fSksZX0saW5kZXhPZjpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcztmb3IodD0wLG49aS5sZW5ndGg7bj50O3QrKylpZihpW3RdPT09ZSlyZXR1cm4gdDtyZXR1cm4tMX0sZm9yRWFjaDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxuPXRoaXMubGVuZ3RoO24+dDt0KyspZSh0aGlzW3RdLHQsdGhpcyl9LG1hcDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxuPVtdLGk9dGhpcy5sZW5ndGg7aT50O3QrKyluW3RdPWUodGhpc1t0XSx0LHRoaXMpO3JldHVybiBufSxmaWx0ZXI6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49MCxpPVtdLHI9dGhpcy5sZW5ndGg7cj5uO24rKyl0PXRoaXNbbl0sZSh0LG4sdGhpcykmJihpW2kubGVuZ3RoXT10KTtyZXR1cm4gaX0sZmluZDpmdW5jdGlvbihlKXtmb3IodmFyIHQsbj0wLGk9dGhpcy5sZW5ndGg7aT5uO24rKylpZih0PXRoaXNbbl0sZSh0LG4sdGhpcykpcmV0dXJuIHR9LGV2ZXJ5OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTAsaT10aGlzLmxlbmd0aDtpPm47bisrKWlmKHQ9dGhpc1tuXSwhZSh0LG4sdGhpcykpcmV0dXJuITE7cmV0dXJuITB9LHNvbWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49MCxpPXRoaXMubGVuZ3RoO2k+bjtuKyspaWYodD10aGlzW25dLGUodCxuLHRoaXMpKXJldHVybiEwO3JldHVybiExfSxyZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5pbmRleE9mKGUpOy0xIT09dCYmdGhpcy5zcGxpY2UodCwxKX0sZW1wdHk6ZnVuY3Rpb24oKXt0aGlzLnNwbGljZSgwLHRoaXMubGVuZ3RoKX19KSxHdD1qdC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXtodC5mbi5pbml0LmNhbGwodGhpcyksdGhpcy50eXBlPXR8fHF0O2Zvcih2YXIgbj0wO2UubGVuZ3RoPm47bisrKXRoaXNbbl09ZVtuXTt0aGlzLmxlbmd0aD1uLHRoaXMuX3BhcmVudD1udChmdW5jdGlvbigpe3JldHVybiB0aGlzfSx0aGlzKX0sYXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpc1tlXTtyZXR1cm4gdCBpbnN0YW5jZW9mIHRoaXMudHlwZT90LnBhcmVudD10aGlzLl9wYXJlbnQ6dD10aGlzW2VdPXRoaXMud3JhcCh0LHRoaXMuX3BhcmVudCksdH19KSxxdD1odC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMscj1mdW5jdGlvbigpe3JldHVybiBpfTtodC5mbi5pbml0LmNhbGwodGhpcyk7Zm9yKG4gaW4gZSl0PWVbbl0sXCJvYmplY3RcIj09dHlwZW9mIHQmJnQmJiF0LmdldFRpbWUmJlwiX1wiIT1uLmNoYXJBdCgwKSYmKHQ9aS53cmFwKHQsbixyKSksaVtuXT10O2kudWlkPWR0Lmd1aWQoKX0sc2hvdWxkU2VyaWFsaXplOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmhhc093blByb3BlcnR5KGUpJiZcIl9ldmVudHNcIiE9PWUmJnR5cGVvZiB0aGlzW2VdIT09Z3QmJlwidWlkXCIhPT1lfSxmb3JFYWNoOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiB0aGlzKXRoaXMuc2hvdWxkU2VyaWFsaXplKHQpJiZlKHRoaXNbdF0sdCl9LHRvSlNPTjpmdW5jdGlvbigpe3ZhciBlLHQsbj17fTtmb3IodCBpbiB0aGlzKXRoaXMuc2hvdWxkU2VyaWFsaXplKHQpJiYoZT10aGlzW3RdLChlIGluc3RhbmNlb2YgcXR8fGUgaW5zdGFuY2VvZiBqdCkmJihlPWUudG9KU09OKCkpLG5bdF09ZSk7cmV0dXJuIG59LGdldDpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXM7cmV0dXJuIG4udHJpZ2dlcihrdCx7ZmllbGQ6ZX0pLHQ9XCJ0aGlzXCI9PT1lP246ZHQuZ2V0dGVyKGUsITApKG4pfSxfc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG89dGhpcyxhPWUuaW5kZXhPZihcIi5cIik+PTA7aWYoYSlmb3Iobj1lLnNwbGl0KFwiLlwiKSxpPVwiXCI7bi5sZW5ndGg+MTspe2lmKGkrPW4uc2hpZnQoKSxyPWR0LmdldHRlcihpLCEwKShvKSxyIGluc3RhbmNlb2YgcXQpcmV0dXJuIHIuc2V0KG4uam9pbihcIi5cIiksdCksYTtpKz1cIi5cIn1yZXR1cm4gZHQuc2V0dGVyKGUpKG8sdCksYX0sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPWUuaW5kZXhPZihcIi5cIik+PTAscj1kdC5nZXR0ZXIoZSwhMCkobik7ciE9PXQmJihuLnRyaWdnZXIoXCJzZXRcIix7ZmllbGQ6ZSx2YWx1ZTp0fSl8fChpfHwodD1uLndyYXAodCxlLGZ1bmN0aW9uKCl7cmV0dXJuIG59KSksKCFuLl9zZXQoZSx0KXx8ZS5pbmRleE9mKFwiKFwiKT49MHx8ZS5pbmRleE9mKFwiW1wiKT49MCkmJm4udHJpZ2dlcih3dCx7ZmllbGQ6ZX0pKSl9LHBhcmVudDpjdCx3cmFwOmZ1bmN0aW9uKGUsdCxpKXt2YXIgcixvLGE9dGhpcyxzPUh0LmNhbGwoZSk7cmV0dXJuIG51bGw9PWV8fFwiW29iamVjdCBPYmplY3RdXCIhPT1zJiZcIltvYmplY3QgQXJyYXldXCIhPT1zfHwocj1lIGluc3RhbmNlb2YganQsbz1lIGluc3RhbmNlb2YgSyxcIltvYmplY3QgT2JqZWN0XVwiIT09c3x8b3x8cj8oXCJbb2JqZWN0IEFycmF5XVwiPT09c3x8cnx8bykmJihyfHxvfHwoZT1uZXcganQoZSkpLGUucGFyZW50KCkhPWkoKSYmZS5iaW5kKHd0LG4oYSx3dCx0LCExKSkpOihlIGluc3RhbmNlb2YgcXR8fChlPW5ldyBxdChlKSksZS5wYXJlbnQoKSE9aSgpJiYoZS5iaW5kKGt0LG4oYSxrdCx0LCEwKSksZS5iaW5kKHd0LG4oYSx3dCx0LCEwKSkpKSxlLnBhcmVudD1pKSxlfX0pLCR0PXtudW1iZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGR0LnBhcnNlRmxvYXQoZSl9LGRhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGR0LnBhcnNlRGF0ZShlKX0sXCJib29sZWFuXCI6ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlPT09ZnQ/XCJ0cnVlXCI9PT1lLnRvTG93ZXJDYXNlKCk6bnVsbCE9ZT8hIWU6ZX0sc3RyaW5nOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lP2UrXCJcIjplfSxcImRlZmF1bHRcIjpmdW5jdGlvbihlKXtyZXR1cm4gZX19LFl0PXtzdHJpbmc6XCJcIixudW1iZXI6MCxkYXRlOm5ldyBEYXRlLFwiYm9vbGVhblwiOiExLFwiZGVmYXVsdFwiOlwiXCJ9LEt0PXF0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihuKXt2YXIgaSxyLG89dGhpcztpZigoIW58fGUuaXNFbXB0eU9iamVjdChuKSkmJihuPWUuZXh0ZW5kKHt9LG8uZGVmYXVsdHMsbiksby5faW5pdGlhbGl6ZXJzKSlmb3IoaT0wO28uX2luaXRpYWxpemVycy5sZW5ndGg+aTtpKyspcj1vLl9pbml0aWFsaXplcnNbaV0sbltyXT1vLmRlZmF1bHRzW3JdKCk7cXQuZm4uaW5pdC5jYWxsKG8sbiksby5kaXJ0eT0hMSxvLmlkRmllbGQmJihvLmlkPW8uZ2V0KG8uaWRGaWVsZCksby5pZD09PXQmJihvLmlkPW8uX2RlZmF1bHRJZCkpfSxzaG91bGRTZXJpYWxpemU6ZnVuY3Rpb24oZSl7cmV0dXJuIHF0LmZuLnNob3VsZFNlcmlhbGl6ZS5jYWxsKHRoaXMsZSkmJlwidWlkXCIhPT1lJiYhKFwiaWRcIiE9PXRoaXMuaWRGaWVsZCYmXCJpZFwiPT09ZSkmJlwiZGlydHlcIiE9PWUmJlwiX2FjY2Vzc29yc1wiIT09ZX0sX3BhcnNlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzLG89ZSxhPWkuZmllbGRzfHx7fTtyZXR1cm4gZT1hW2VdLGV8fChlPXIoYSxvKSksZSYmKG49ZS5wYXJzZSwhbiYmZS50eXBlJiYobj0kdFtlLnR5cGUudG9Mb3dlckNhc2UoKV0pKSxuP24odCk6dH0sX25vdGlmeUNoYW5nZTpmdW5jdGlvbihlKXt2YXIgdD1lLmFjdGlvbjsoXCJhZGRcIj09dHx8XCJyZW1vdmVcIj09dCkmJih0aGlzLmRpcnR5PSEwKX0sZWRpdGFibGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9KHRoaXMuZmllbGRzfHx7fSlbZV0sZT9lLmVkaXRhYmxlIT09ITE6ITB9LHNldDpmdW5jdGlvbihlLHQsbil7dmFyIHI9dGhpcztyLmVkaXRhYmxlKGUpJiYodD1yLl9wYXJzZShlLHQpLGkodCxyLmdldChlKSl8fChyLmRpcnR5PSEwLHF0LmZuLnNldC5jYWxsKHIsZSx0LG4pKSl9LGFjY2VwdDpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcyxyPWZ1bmN0aW9uKCl7cmV0dXJuIGl9O2Zvcih0IGluIGUpbj1lW3RdLFwiX1wiIT10LmNoYXJBdCgwKSYmKG49aS53cmFwKGVbdF0sdCxyKSksaS5fc2V0KHQsbik7aS5pZEZpZWxkJiYoaS5pZD1pLmdldChpLmlkRmllbGQpKSxpLmRpcnR5PSExfSxpc05ldzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlkPT09dGhpcy5fZGVmYXVsdElkfX0pO0t0LmRlZmluZT1mdW5jdGlvbihlLG4pe249PT10JiYobj1lLGU9S3QpO3ZhciBpLHIsbyxhLHMsbCxjLGQsdT10dCh7ZGVmYXVsdHM6e319LG4pLGg9e30scD11LmlkLGY9W107aWYocCYmKHUuaWRGaWVsZD1wKSx1LmlkJiZkZWxldGUgdS5pZCxwJiYodS5kZWZhdWx0c1twXT11Ll9kZWZhdWx0SWQ9XCJcIiksXCJbb2JqZWN0IEFycmF5XVwiPT09SHQuY2FsbCh1LmZpZWxkcykpe2ZvcihsPTAsYz11LmZpZWxkcy5sZW5ndGg7Yz5sO2wrKylvPXUuZmllbGRzW2xdLHR5cGVvZiBvPT09ZnQ/aFtvXT17fTpvLmZpZWxkJiYoaFtvLmZpZWxkXT1vKTt1LmZpZWxkcz1ofWZvcihyIGluIHUuZmllbGRzKW89dS5maWVsZHNbcl0sYT1vLnR5cGV8fFwiZGVmYXVsdFwiLHM9bnVsbCxkPXIscj10eXBlb2Ygby5maWVsZD09PWZ0P28uZmllbGQ6cixvLm51bGxhYmxlfHwocz11LmRlZmF1bHRzW2QhPT1yP2Q6cl09by5kZWZhdWx0VmFsdWUhPT10P28uZGVmYXVsdFZhbHVlOll0W2EudG9Mb3dlckNhc2UoKV0sXCJmdW5jdGlvblwiPT10eXBlb2YgcyYmZi5wdXNoKHIpKSxuLmlkPT09ciYmKHUuX2RlZmF1bHRJZD1zKSx1LmRlZmF1bHRzW2QhPT1yP2Q6cl09cyxvLnBhcnNlPW8ucGFyc2V8fCR0W2FdO3JldHVybiBmLmxlbmd0aD4wJiYodS5faW5pdGlhbGl6ZXJzPWYpLGk9ZS5leHRlbmQodSksaS5kZWZpbmU9ZnVuY3Rpb24oZSl7cmV0dXJuIEt0LmRlZmluZShpLGUpfSx1LmZpZWxkcyYmKGkuZmllbGRzPXUuZmllbGRzLGkuaWRGaWVsZD11LmlkRmllbGQpLGl9LE49e3NlbGVjdG9yOmZ1bmN0aW9uKGUpe3JldHVybiB1dChlKT9lOkV0KGUpfSxjb21wYXJlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc2VsZWN0b3IoZSk7cmV0dXJuIGZ1bmN0aW9uKGUsbil7cmV0dXJuIGU9dChlKSxuPXQobiksbnVsbD09ZSYmbnVsbD09bj8wOm51bGw9PWU/LTE6bnVsbD09bj8xOmUubG9jYWxlQ29tcGFyZT9lLmxvY2FsZUNvbXBhcmUobik6ZT5uPzE6bj5lPy0xOjB9fSxjcmVhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb21wYXJlfHx0aGlzLmNvbXBhcmUoZS5maWVsZCk7cmV0dXJuXCJkZXNjXCI9PWUuZGlyP2Z1bmN0aW9uKGUsbil7cmV0dXJuIHQobixlLCEwKX06dH0sY29tYmluZTpmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxuKXt2YXIgaSxyLG89ZVswXSh0LG4pO2ZvcihpPTEscj1lLmxlbmd0aDtyPmk7aSsrKW89b3x8ZVtpXSh0LG4pO3JldHVybiBvfX19LFY9dHQoe30sTix7YXNjOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc2VsZWN0b3IoZSk7cmV0dXJuIGZ1bmN0aW9uKGUsbil7dmFyIGk9dChlKSxyPXQobik7cmV0dXJuIGkmJmkuZ2V0VGltZSYmciYmci5nZXRUaW1lJiYoaT1pLmdldFRpbWUoKSxyPXIuZ2V0VGltZSgpKSxpPT09cj9lLl9fcG9zaXRpb24tbi5fX3Bvc2l0aW9uOm51bGw9PWk/LTE6bnVsbD09cj8xOmkubG9jYWxlQ29tcGFyZT9pLmxvY2FsZUNvbXBhcmUocik6aT5yPzE6LTF9fSxkZXNjOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc2VsZWN0b3IoZSk7cmV0dXJuIGZ1bmN0aW9uKGUsbil7dmFyIGk9dChlKSxyPXQobik7cmV0dXJuIGkmJmkuZ2V0VGltZSYmciYmci5nZXRUaW1lJiYoaT1pLmdldFRpbWUoKSxyPXIuZ2V0VGltZSgpKSxpPT09cj9lLl9fcG9zaXRpb24tbi5fX3Bvc2l0aW9uOm51bGw9PWk/MTpudWxsPT1yPy0xOnIubG9jYWxlQ29tcGFyZT9yLmxvY2FsZUNvbXBhcmUoaSk6cj5pPzE6LTF9fSxjcmVhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXNbZS5kaXJdKGUuZmllbGQpfX0pLEg9ZnVuY3Rpb24oZSx0KXt2YXIgbixpPWUubGVuZ3RoLHI9QXJyYXkoaSk7Zm9yKG49MDtpPm47bisrKXJbbl09dChlW25dLG4sZSk7cmV0dXJuIHJ9LFU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3JldHVybiBlLnJlcGxhY2UoV3QsXCJcXFxcXCIpLnJlcGxhY2UoVXQsXCJcIil9ZnVuY3Rpb24gdCh0LG4saSxyKXt2YXIgbztyZXR1cm4gbnVsbCE9aSYmKHR5cGVvZiBpPT09ZnQmJihpPWUoaSksbz1WdC5leGVjKGkpLG8/aT1uZXcgRGF0ZSgrb1sxXSk6cj8oaT1cIidcIitpLnRvTG93ZXJDYXNlKCkrXCInXCIsbj1cIihcIituK1wiIHx8ICcnKS50b0xvd2VyQ2FzZSgpXCIpOmk9XCInXCIraStcIidcIiksaS5nZXRUaW1lJiYobj1cIihcIituK1wiP1wiK24rXCIuZ2V0VGltZSgpOlwiK24rXCIpXCIsaT1pLmdldFRpbWUoKSkpLG4rXCIgXCIrdCtcIiBcIitpfXJldHVybntlcTpmdW5jdGlvbihlLG4saSl7cmV0dXJuIHQoXCI9PVwiLGUsbixpKX0sbmVxOmZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gdChcIiE9XCIsZSxuLGkpfSxndDpmdW5jdGlvbihlLG4saSl7cmV0dXJuIHQoXCI+XCIsZSxuLGkpfSxndGU6ZnVuY3Rpb24oZSxuLGkpe3JldHVybiB0KFwiPj1cIixlLG4saSl9LGx0OmZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gdChcIjxcIixlLG4saSl9LGx0ZTpmdW5jdGlvbihlLG4saSl7cmV0dXJuIHQoXCI8PVwiLGUsbixpKX0sc3RhcnRzd2l0aDpmdW5jdGlvbih0LG4saSl7cmV0dXJuIGkmJih0PVwiKFwiK3QrXCIgfHwgJycpLnRvTG93ZXJDYXNlKClcIixuJiYobj1uLnRvTG93ZXJDYXNlKCkpKSxuJiYobj1lKG4pKSx0K1wiLmxhc3RJbmRleE9mKCdcIituK1wiJywgMCkgPT0gMFwifSxlbmRzd2l0aDpmdW5jdGlvbih0LG4saSl7cmV0dXJuIGkmJih0PVwiKFwiK3QrXCIgfHwgJycpLnRvTG93ZXJDYXNlKClcIixuJiYobj1uLnRvTG93ZXJDYXNlKCkpKSxuJiYobj1lKG4pKSx0K1wiLmluZGV4T2YoJ1wiK24rXCInLCBcIit0K1wiLmxlbmd0aCAtIFwiKyhufHxcIlwiKS5sZW5ndGgrXCIpID49IDBcIn0sY29udGFpbnM6ZnVuY3Rpb24odCxuLGkpe3JldHVybiBpJiYodD1cIihcIit0K1wiIHx8ICcnKS50b0xvd2VyQ2FzZSgpXCIsbiYmKG49bi50b0xvd2VyQ2FzZSgpKSksbiYmKG49ZShuKSksdCtcIi5pbmRleE9mKCdcIituK1wiJykgPj0gMFwifSxkb2Vzbm90Y29udGFpbjpmdW5jdGlvbih0LG4saSl7cmV0dXJuIGkmJih0PVwiKFwiK3QrXCIgfHwgJycpLnRvTG93ZXJDYXNlKClcIixuJiYobj1uLnRvTG93ZXJDYXNlKCkpKSxuJiYobj1lKG4pKSx0K1wiLmluZGV4T2YoJ1wiK24rXCInKSA9PSAtMVwifX19KCksby5maWx0ZXJFeHByPWZ1bmN0aW9uKGUpe3ZhciBuLGkscixhLHMsbCxjPVtdLGQ9e2FuZDpcIiAmJiBcIixvcjpcIiB8fCBcIn0sdT1bXSxoPVtdLHA9ZS5maWx0ZXJzO2ZvcihuPTAsaT1wLmxlbmd0aDtpPm47bisrKXI9cFtuXSxzPXIuZmllbGQsbD1yLm9wZXJhdG9yLHIuZmlsdGVycz8oYT1vLmZpbHRlckV4cHIocikscj1hLmV4cHJlc3Npb24ucmVwbGFjZSgvX19vXFxbKFxcZCspXFxdL2csZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD0rdCxcIl9fb1tcIisoaC5sZW5ndGgrdCkrXCJdXCJ9KS5yZXBsYWNlKC9fX2ZcXFsoXFxkKylcXF0vZyxmdW5jdGlvbihlLHQpe3JldHVybiB0PSt0LFwiX19mW1wiKyh1Lmxlbmd0aCt0KStcIl1cIn0pLGgucHVzaC5hcHBseShoLGEub3BlcmF0b3JzKSx1LnB1c2guYXBwbHkodSxhLmZpZWxkcykpOih0eXBlb2Ygcz09PWd0PyhhPVwiX19mW1wiK3UubGVuZ3RoK1wiXShkKVwiLHUucHVzaChzKSk6YT1kdC5leHByKHMpLHR5cGVvZiBsPT09Z3Q/KHI9XCJfX29bXCIraC5sZW5ndGgrXCJdKFwiK2ErXCIsIFwiK3IudmFsdWUrXCIpXCIsaC5wdXNoKGwpKTpyPVVbKGx8fFwiZXFcIikudG9Mb3dlckNhc2UoKV0oYSxyLnZhbHVlLHIuaWdub3JlQ2FzZSE9PXQ/ci5pZ25vcmVDYXNlOiEwKSksYy5wdXNoKHIpO3JldHVybntleHByZXNzaW9uOlwiKFwiK2Muam9pbihkW2UubG9naWNdKStcIilcIixmaWVsZHM6dSxvcGVyYXRvcnM6aH19LFc9e1wiPT1cIjpcImVxXCIsZXF1YWxzOlwiZXFcIixpc2VxdWFsdG86XCJlcVwiLGVxdWFsdG86XCJlcVwiLGVxdWFsOlwiZXFcIixcIiE9XCI6XCJuZXFcIixuZTpcIm5lcVwiLG5vdGVxdWFsczpcIm5lcVwiLGlzbm90ZXF1YWx0bzpcIm5lcVwiLG5vdGVxdWFsdG86XCJuZXFcIixub3RlcXVhbDpcIm5lcVwiLFwiPFwiOlwibHRcIixpc2xlc3N0aGFuOlwibHRcIixsZXNzdGhhbjpcImx0XCIsbGVzczpcImx0XCIsXCI8PVwiOlwibHRlXCIsbGU6XCJsdGVcIixpc2xlc3N0aGFub3JlcXVhbHRvOlwibHRlXCIsbGVzc3RoYW5lcXVhbDpcImx0ZVwiLFwiPlwiOlwiZ3RcIixpc2dyZWF0ZXJ0aGFuOlwiZ3RcIixncmVhdGVydGhhbjpcImd0XCIsZ3JlYXRlcjpcImd0XCIsXCI+PVwiOlwiZ3RlXCIsaXNncmVhdGVydGhhbm9yZXF1YWx0bzpcImd0ZVwiLGdyZWF0ZXJ0aGFuZXF1YWw6XCJndGVcIixnZTpcImd0ZVwiLG5vdHN1YnN0cmluZ29mOlwiZG9lc25vdGNvbnRhaW5cIn0sby5ub3JtYWxpemVGaWx0ZXI9bCxvLnByb3RvdHlwZT17dG9BcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGF9LHJhbmdlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBvKHRoaXMuZGF0YS5zbGljZShlLGUrdCkpfSxza2lwOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgbyh0aGlzLmRhdGEuc2xpY2UoZSkpfSx0YWtlOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgbyh0aGlzLmRhdGEuc2xpY2UoMCxlKSl9LHNlbGVjdDpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IG8oSCh0aGlzLmRhdGEsZSkpfSxvcmRlcjpmdW5jdGlvbihlLHQpe3ZhciBuPXtkaXI6dH07cmV0dXJuIGUmJihlLmNvbXBhcmU/bi5jb21wYXJlPWUuY29tcGFyZTpuLmZpZWxkPWUpLG5ldyBvKHRoaXMuZGF0YS5zbGljZSgwKS5zb3J0KE4uY3JlYXRlKG4pKSl9LG9yZGVyQnk6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub3JkZXIoZSxcImFzY1wiKX0sb3JkZXJCeURlc2NlbmRpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub3JkZXIoZSxcImRlc2NcIil9LHNvcnQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbz1hKGUsdCkscz1bXTtpZihuPW58fE4sby5sZW5ndGgpe2ZvcihpPTAscj1vLmxlbmd0aDtyPmk7aSsrKXMucHVzaChuLmNyZWF0ZShvW2ldKSk7cmV0dXJuIHRoaXMub3JkZXJCeSh7Y29tcGFyZTpuLmNvbWJpbmUocyl9KX1yZXR1cm4gdGhpc30sZmlsdGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLGEscyxjLGQsdT10aGlzLmRhdGEsaD1bXTtpZihlPWwoZSksIWV8fDA9PT1lLmZpbHRlcnMubGVuZ3RoKXJldHVybiB0aGlzO2ZvcihyPW8uZmlsdGVyRXhwcihlKSxzPXIuZmllbGRzLGM9ci5vcGVyYXRvcnMsYT1kPUZ1bmN0aW9uKFwiZCwgX19mLCBfX29cIixcInJldHVybiBcIityLmV4cHJlc3Npb24pLChzLmxlbmd0aHx8Yy5sZW5ndGgpJiYoZD1mdW5jdGlvbihlKXtyZXR1cm4gYShlLHMsYyl9KSx0PTAsaT11Lmxlbmd0aDtpPnQ7dCsrKW49dVt0XSxkKG4pJiZoLnB1c2gobik7cmV0dXJuIG5ldyBvKGgpfSxncm91cDpmdW5jdGlvbihlLHQpe2U9ZChlfHxbXSksdD10fHx0aGlzLmRhdGE7dmFyIG4saT10aGlzLHI9bmV3IG8oaS5kYXRhKTtyZXR1cm4gZS5sZW5ndGg+MCYmKG49ZVswXSxyPXIuZ3JvdXBCeShuKS5zZWxlY3QoZnVuY3Rpb24oaSl7dmFyIHI9bmV3IG8odCkuZmlsdGVyKFt7ZmllbGQ6aS5maWVsZCxvcGVyYXRvcjpcImVxXCIsdmFsdWU6aS52YWx1ZSxpZ25vcmVDYXNlOiExfV0pO3JldHVybntmaWVsZDppLmZpZWxkLHZhbHVlOmkudmFsdWUsaXRlbXM6ZS5sZW5ndGg+MT9uZXcgbyhpLml0ZW1zKS5ncm91cChlLnNsaWNlKDEpLHIudG9BcnJheSgpKS50b0FycmF5KCk6aS5pdGVtcyxoYXNTdWJncm91cHM6ZS5sZW5ndGg+MSxhZ2dyZWdhdGVzOnIuYWdncmVnYXRlKG4uYWdncmVnYXRlcyl9fSkpLHJ9LGdyb3VwQnk6ZnVuY3Rpb24oZSl7aWYocnQoZSl8fCF0aGlzLmRhdGEubGVuZ3RoKXJldHVybiBuZXcgbyhbXSk7dmFyIHQsbixpLHIsYT1lLmZpZWxkLHM9dGhpcy5fc29ydEZvckdyb3VwaW5nKGEsZS5kaXJ8fFwiYXNjXCIpLGw9ZHQuYWNjZXNzb3IoYSksYz1sLmdldChzWzBdLGEpLGQ9e2ZpZWxkOmEsdmFsdWU6YyxpdGVtczpbXX0saD1bZF07Zm9yKGk9MCxyPXMubGVuZ3RoO3I+aTtpKyspdD1zW2ldLG49bC5nZXQodCxhKSx1KGMsbil8fChjPW4sZD17ZmllbGQ6YSx2YWx1ZTpjLGl0ZW1zOltdfSxoLnB1c2goZCkpLGQuaXRlbXMucHVzaCh0KTtyZXR1cm4gbmV3IG8oaCl9LF9zb3J0Rm9yR3JvdXBpbmc6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcy5kYXRhO2lmKCFOdCl7Zm9yKG49MCxpPXIubGVuZ3RoO2k+bjtuKyspcltuXS5fX3Bvc2l0aW9uPW47Zm9yKHI9bmV3IG8ocikuc29ydChlLHQsVikudG9BcnJheSgpLG49MCxpPXIubGVuZ3RoO2k+bjtuKyspZGVsZXRlIHJbbl0uX19wb3NpdGlvbjtyZXR1cm4gcn1yZXR1cm4gdGhpcy5zb3J0KGUsdCkudG9BcnJheSgpfSxhZ2dyZWdhdGU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXt9LHI9e307aWYoZSYmZS5sZW5ndGgpZm9yKHQ9MCxuPXRoaXMuZGF0YS5sZW5ndGg7bj50O3QrKyloKGksZSx0aGlzLmRhdGFbdF0sdCxuLHIpO3JldHVybiBpfX0saj17c3VtOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1uLmdldCh0KTtyZXR1cm4gcChlKT9wKGkpJiYoZSs9aSk6ZT1pLGV9LGNvdW50OmZ1bmN0aW9uKGUpe3JldHVybihlfHwwKSsxfSxhdmVyYWdlOmZ1bmN0aW9uKGUsbixpLHIsbyxhKXt2YXIgcz1pLmdldChuKTtyZXR1cm4gYS5jb3VudD09PXQmJihhLmNvdW50PTApLHAoZSk/cChzKSYmKGUrPXMpOmU9cyxwKHMpJiZhLmNvdW50Kysscj09by0xJiZwKGUpJiYoZS89YS5jb3VudCksZX0sbWF4OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1uLmdldCh0KTtyZXR1cm4gcChlKXx8ZihlKXx8KGU9aSksaT5lJiYocChpKXx8ZihpKSkmJihlPWkpLGV9LG1pbjpmdW5jdGlvbihlLHQsbil7dmFyIGk9bi5nZXQodCk7cmV0dXJuIHAoZSl8fGYoZSl8fChlPWkpLGU+aSYmKHAoaSl8fGYoaSkpJiYoZT1pKSxlfX0sby5wcm9jZXNzPWZ1bmN0aW9uKGUsbil7bj1ufHx7fTt2YXIgaSxyPW5ldyBvKGUpLHM9bi5ncm91cCxsPWQoc3x8W10pLmNvbmNhdChhKG4uc29ydHx8W10pKSxjPW4uZmlsdGVyQ2FsbGJhY2ssdT1uLmZpbHRlcixoPW4uc2tpcCxwPW4udGFrZTtyZXR1cm4gdSYmKHI9ci5maWx0ZXIodSksYyYmKHI9YyhyKSksaT1yLnRvQXJyYXkoKS5sZW5ndGgpLGwmJihyPXIuc29ydChsKSxzJiYoZT1yLnRvQXJyYXkoKSkpLGghPT10JiZwIT09dCYmKHI9ci5yYW5nZShoLHApKSxzJiYocj1yLmdyb3VwKHMsZSkpLHt0b3RhbDppLGRhdGE6ci50b0FycmF5KCl9fSxHPXB0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLmRhdGE9ZS5kYXRhfSxyZWFkOmZ1bmN0aW9uKGUpe2Uuc3VjY2Vzcyh0aGlzLmRhdGEpfSx1cGRhdGU6ZnVuY3Rpb24oZSl7ZS5zdWNjZXNzKGUuZGF0YSl9LGNyZWF0ZTpmdW5jdGlvbihlKXtlLnN1Y2Nlc3MoZS5kYXRhKX0sZGVzdHJveTpmdW5jdGlvbihlKXtlLnN1Y2Nlc3MoZS5kYXRhKX19KSxxPXB0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXM7ZT1uLm9wdGlvbnM9dHQoe30sbi5vcHRpb25zLGUpLGx0KER0LGZ1bmN0aW9uKHQsbil7dHlwZW9mIGVbbl09PT1mdCYmKGVbbl09e3VybDplW25dfSl9KSxuLmNhY2hlPWUuY2FjaGU/JC5jcmVhdGUoZS5jYWNoZSk6e2ZpbmQ6Y3QsYWRkOmN0fSx0PWUucGFyYW1ldGVyTWFwLHV0KGUucHVzaCkmJihuLnB1c2g9ZS5wdXNoKSxuLnB1c2h8fChuLnB1c2g9QXQpLG4ucGFyYW1ldGVyTWFwPXV0KHQpP3Q6ZnVuY3Rpb24oZSl7dmFyIG49e307cmV0dXJuIGx0KGUsZnVuY3Rpb24oZSxpKXtlIGluIHQmJihlPXRbZV0saXQoZSkmJihpPWUudmFsdWUoaSksZT1lLmtleSkpLG5bZV09aX0pLG59fSxvcHRpb25zOntwYXJhbWV0ZXJNYXA6QXR9LGNyZWF0ZTpmdW5jdGlvbihlKXtyZXR1cm4gc3QodGhpcy5zZXR1cChlLG10KSl9LHJlYWQ6ZnVuY3Rpb24obil7dmFyIGkscixvLGE9dGhpcyxzPWEuY2FjaGU7bj1hLnNldHVwKG4sdnQpLGk9bi5zdWNjZXNzfHxjdCxyPW4uZXJyb3J8fGN0LG89cy5maW5kKG4uZGF0YSksbyE9PXQ/aShvKToobi5zdWNjZXNzPWZ1bmN0aW9uKGUpe3MuYWRkKG4uZGF0YSxlKSxpKGUpfSxlLmFqYXgobikpfSx1cGRhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHN0KHRoaXMuc2V0dXAoZSxfdCkpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3JldHVybiBzdCh0aGlzLnNldHVwKGUseXQpKX0sc2V0dXA6ZnVuY3Rpb24oZSx0KXtlPWV8fHt9O3ZhciBuLGk9dGhpcyxyPWkub3B0aW9uc1t0XSxvPXV0KHIuZGF0YSk/ci5kYXRhKGUuZGF0YSk6ci5kYXRhO3JldHVybiBlPXR0KCEwLHt9LHIsZSksbj10dCghMCx7fSxvLGUuZGF0YSksZS5kYXRhPWkucGFyYW1ldGVyTWFwKG4sdCksdXQoZS51cmwpJiYoZS51cmw9ZS51cmwobikpLGV9fSksJD1wdC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt0aGlzLl9zdG9yZT17fX0sYWRkOmZ1bmN0aW9uKGUsbil7ZSE9PXQmJih0aGlzLl9zdG9yZVtNdChlKV09bil9LGZpbmQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3N0b3JlW010KGUpXX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLl9zdG9yZT17fX0scmVtb3ZlOmZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLl9zdG9yZVtNdChlKV19fSksJC5jcmVhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9e2lubWVtb3J5OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyAkfX07cmV0dXJuIGl0KGUpJiZ1dChlLmZpbmQpP2U6ZT09PSEwP25ldyAkOnRbZV0oKX0sWT1wdC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhLHMsbCxjLGQsdSxoLHAsZj10aGlzO2U9ZXx8e307Zm9yKHQgaW4gZSluPWVbdF0sZlt0XT10eXBlb2Ygbj09PWZ0P0V0KG4pOm47cj1lLm1vZGVsQmFzZXx8S3QsaXQoZi5tb2RlbCkmJihmLm1vZGVsPWk9ci5kZWZpbmUoZi5tb2RlbCkpLG89bnQoZi5kYXRhLGYpLGYuX2RhdGFBY2Nlc3NGdW5jdGlvbj1vLGYubW9kZWwmJihhPW50KGYuZ3JvdXBzLGYpLHM9bnQoZi5zZXJpYWxpemUsZiksbD17fSxjPXt9LGQ9e30sdT17fSxoPSExLGk9Zi5tb2RlbCxpLmZpZWxkcyYmKGx0KGkuZmllbGRzLGZ1bmN0aW9uKGUsdCl7dmFyIG47cD1lLGl0KHQpJiZ0LmZpZWxkP3A9dC5maWVsZDp0eXBlb2YgdD09PWZ0JiYocD10KSxpdCh0KSYmdC5mcm9tJiYobj10LmZyb20pLGg9aHx8biYmbiE9PWV8fHAhPT1lLGNbZV09RXQobnx8cCksZFtlXT1FdChlKSxsW258fHBdPWUsdVtlXT1ufHxwfSksIWUuc2VyaWFsaXplJiZoJiYoZi5zZXJpYWxpemU9eShzLGksbSxkLGwsdSkpKSxmLl9kYXRhQWNjZXNzRnVuY3Rpb249byxmLmRhdGE9eShvLGksdixjLGwsdSksZi5ncm91cHM9eShhLGksXyxjLGwsdSkpfSxlcnJvcnM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/ZS5lcnJvcnM6bnVsbH0scGFyc2U6QXQsZGF0YTpBdCx0b3RhbDpmdW5jdGlvbihlKXtyZXR1cm4gZS5sZW5ndGh9LGdyb3VwczpBdCxhZ2dyZWdhdGVzOmZ1bmN0aW9uKCl7cmV0dXJue319LHNlcmlhbGl6ZTpmdW5jdGlvbihlKXtyZXR1cm4gZX19KSxLPWh0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt2YXIgbixpLHIsbz10aGlzO2UmJihpPWUuZGF0YSksZT1vLm9wdGlvbnM9dHQoe30sby5vcHRpb25zLGUpLG8uX21hcD17fSxvLl9wcmVmZXRjaD17fSxvLl9kYXRhPVtdLG8uX3ByaXN0aW5lRGF0YT1bXSxvLl9yYW5nZXM9W10sby5fdmlldz1bXSxvLl9wcmlzdGluZVRvdGFsPTAsby5fZGVzdHJveWVkPVtdLG8uX3BhZ2VTaXplPWUucGFnZVNpemUsby5fcGFnZT1lLnBhZ2V8fChlLnBhZ2VTaXplPzE6dCksby5fc29ydD1hKGUuc29ydCksby5fZmlsdGVyPWwoZS5maWx0ZXIpLG8uX2dyb3VwPWQoZS5ncm91cCksby5fYWdncmVnYXRlPWUuYWdncmVnYXRlLG8uX3RvdGFsPWUudG90YWwsby5fc2hvdWxkRGV0YWNoT2JzZXJ2YWJsZVBhcmVudHM9ITAsaHQuZm4uaW5pdC5jYWxsKG8pLG8udHJhbnNwb3J0PVEuY3JlYXRlKGUsaSksdXQoby50cmFuc3BvcnQucHVzaCkmJm8udHJhbnNwb3J0LnB1c2goe3B1c2hDcmVhdGU6bnQoby5fcHVzaENyZWF0ZSxvKSxwdXNoVXBkYXRlOm50KG8uX3B1c2hVcGRhdGUsbykscHVzaERlc3Ryb3k6bnQoby5fcHVzaERlc3Ryb3ksbyl9KSxudWxsIT1lLm9mZmxpbmVTdG9yYWdlJiYoXCJzdHJpbmdcIj09dHlwZW9mIGUub2ZmbGluZVN0b3JhZ2U/KHI9ZS5vZmZsaW5lU3RvcmFnZSxvLl9zdG9yYWdlPXtnZXRJdGVtOmZ1bmN0aW9uKCl7cmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0ocikpfSxzZXRJdGVtOmZ1bmN0aW9uKGUpe2xvY2FsU3RvcmFnZS5zZXRJdGVtKHIsTXQoZSkpfX0pOm8uX3N0b3JhZ2U9ZS5vZmZsaW5lU3RvcmFnZSksby5yZWFkZXI9bmV3IGR0LmRhdGEucmVhZGVyc1tlLnNjaGVtYS50eXBlfHxcImpzb25cIl0oZS5zY2hlbWEpLG49by5yZWFkZXIubW9kZWx8fHt9LG8uX2RldGFjaE9ic2VydmFibGVQYXJlbnRzKCksby5fZGF0YT1vLl9vYnNlcnZlKG8uX2RhdGEpLG8uX29ubGluZT0hMCxvLmJpbmQoW1wicHVzaFwiLHh0LHd0LEN0LGJ0LFR0LFN0XSxlKX0sb3B0aW9uczp7ZGF0YTpudWxsLHNjaGVtYTp7bW9kZWxCYXNlOkt0fSxvZmZsaW5lU3RvcmFnZTpudWxsLHNlcnZlclNvcnRpbmc6ITEsc2VydmVyUGFnaW5nOiExLHNlcnZlckZpbHRlcmluZzohMSxzZXJ2ZXJHcm91cGluZzohMSxzZXJ2ZXJBZ2dyZWdhdGVzOiExLGJhdGNoOiExfSxvbmxpbmU6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10P3RoaXMuX29ubGluZToodGhpcy5fb25saW5lIT1lJiYodGhpcy5fb25saW5lPWUsZSYmdGhpcy5zeW5jKCkpLHQpfSxvZmZsaW5lRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09dGhpcy5vcHRpb25zLm9mZmxpbmVTdG9yYWdlP251bGw6ZSE9PXQ/dGhpcy5fc3RvcmFnZS5zZXRJdGVtKGUpOnRoaXMuX3N0b3JhZ2UuZ2V0SXRlbSgpfHx7fX0sX2lzU2VydmVyR3JvdXBlZDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ3JvdXAoKXx8W107cmV0dXJuIHRoaXMub3B0aW9ucy5zZXJ2ZXJHcm91cGluZyYmZS5sZW5ndGh9LF9wdXNoQ3JlYXRlOmZ1bmN0aW9uKGUpe3RoaXMuX3B1c2goZSxcInB1c2hDcmVhdGVcIil9LF9wdXNoVXBkYXRlOmZ1bmN0aW9uKGUpe3RoaXMuX3B1c2goZSxcInB1c2hVcGRhdGVcIil9LF9wdXNoRGVzdHJveTpmdW5jdGlvbihlKXt0aGlzLl9wdXNoKGUsXCJwdXNoRGVzdHJveVwiKX0sX3B1c2g6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9yZWFkRGF0YShlKTtufHwobj1lKSx0aGlzW3RdKG4pfSxfZmxhdERhdGE6ZnVuY3Rpb24oZSx0KXtpZihlKXtpZih0aGlzLl9pc1NlcnZlckdyb3VwZWQoKSlyZXR1cm4gYihlKTtpZighdClmb3IodmFyIG49MDtlLmxlbmd0aD5uO24rKyllLmF0KG4pfXJldHVybiBlfSxwYXJlbnQ6Y3QsZ2V0OmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLl9mbGF0RGF0YSh0aGlzLl9kYXRhKTtmb3IodD0wLG49aS5sZW5ndGg7bj50O3QrKylpZihpW3RdLmlkPT1lKXJldHVybiBpW3RdfSxnZXRCeVVpZDpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcy5fZmxhdERhdGEodGhpcy5fZGF0YSk7aWYoaSlmb3IodD0wLG49aS5sZW5ndGg7bj50O3QrKylpZihpW3RdLnVpZD09ZSlyZXR1cm4gaVt0XX0saW5kZXhPZjpmdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLl9kYXRhLGUpfSxhdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZGF0YS5hdChlKX0sZGF0YTpmdW5jdGlvbihlKXt2YXIgbixpPXRoaXM7aWYoZT09PXQpe2lmKGkuX2RhdGEpZm9yKG49MDtpLl9kYXRhLmxlbmd0aD5uO24rKylpLl9kYXRhLmF0KG4pO3JldHVybiBpLl9kYXRhfWkuX2RldGFjaE9ic2VydmFibGVQYXJlbnRzKCksaS5fZGF0YT10aGlzLl9vYnNlcnZlKGUpLGkuX3ByaXN0aW5lRGF0YT1lLnNsaWNlKDApLGkuX3N0b3JlRGF0YSgpLGkuX3Jhbmdlcz1bXSxpLnRyaWdnZXIoXCJyZXNldFwiKSxpLl9hZGRSYW5nZShpLl9kYXRhKSxpLl90b3RhbD1pLl9kYXRhLmxlbmd0aCxpLl9wcmlzdGluZVRvdGFsPWkuX3RvdGFsLGkuX3Byb2Nlc3MoaS5fZGF0YSl9LHZpZXc6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10P3RoaXMuX3ZpZXc6KHRoaXMuX3ZpZXc9dGhpcy5fb2JzZXJ2ZVZpZXcoZSksdCl9LF9vYnNlcnZlVmlldzpmdW5jdGlvbihlKXtyZXR1cm4gVChlLHRoaXMuX2RhdGEsdGhpcy5fcmFuZ2VzLHRoaXMucmVhZGVyLm1vZGVsfHxxdCksbmV3IEd0KGUsdGhpcy5yZWFkZXIubW9kZWwpfSxmbGF0VmlldzpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ3JvdXAoKXx8W107cmV0dXJuIGUubGVuZ3RoP2IodGhpcy5fdmlldyk6dGhpcy5fdmlld30sYWRkOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmluc2VydCh0aGlzLl9kYXRhLmxlbmd0aCxlKX0sX2NyZWF0ZU5ld01vZGVsOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlYWRlci5tb2RlbD9uZXcgdGhpcy5yZWFkZXIubW9kZWwoZSk6ZSBpbnN0YW5jZW9mIHF0P2U6bmV3IHF0KGUpfSxpbnNlcnQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8KHQ9ZSxlPTApLHQgaW5zdGFuY2VvZiBLdHx8KHQ9dGhpcy5fY3JlYXRlTmV3TW9kZWwodCkpLHRoaXMuX2lzU2VydmVyR3JvdXBlZCgpP3RoaXMuX2RhdGEuc3BsaWNlKGUsMCxBKHRoaXMuZ3JvdXAoKSx0KSk6dGhpcy5fZGF0YS5zcGxpY2UoZSwwLHQpLHR9LHB1c2hDcmVhdGU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhO290KGUpfHwoZT1bZV0pLHQ9W10sbj10aGlzLm9wdGlvbnMuYXV0b1N5bmMsdGhpcy5vcHRpb25zLmF1dG9TeW5jPSExO3RyeXtmb3IoaT0wO2UubGVuZ3RoPmk7aSsrKXI9ZVtpXSxvPXRoaXMuYWRkKHIpLHQucHVzaChvKSxhPW8udG9KU09OKCksdGhpcy5faXNTZXJ2ZXJHcm91cGVkKCkmJihhPUEodGhpcy5ncm91cCgpLGEpKSx0aGlzLl9wcmlzdGluZURhdGEucHVzaChhKX1maW5hbGx5e3RoaXMub3B0aW9ucy5hdXRvU3luYz1ufXQubGVuZ3RoJiZ0aGlzLnRyaWdnZXIoXCJwdXNoXCIse3R5cGU6XCJjcmVhdGVcIixpdGVtczp0fSl9LHB1c2hVcGRhdGU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbztmb3Iob3QoZSl8fChlPVtlXSksdD1bXSxuPTA7ZS5sZW5ndGg+bjtuKyspaT1lW25dLHI9dGhpcy5fY3JlYXRlTmV3TW9kZWwoaSksbz10aGlzLmdldChyLmlkKSxvPyh0LnB1c2gobyksby5hY2NlcHQoaSksby50cmlnZ2VyKFwiY2hhbmdlXCIpLHRoaXMuX3VwZGF0ZVByaXN0aW5lRm9yTW9kZWwobyxpKSk6dGhpcy5wdXNoQ3JlYXRlKGkpO3QubGVuZ3RoJiZ0aGlzLnRyaWdnZXIoXCJwdXNoXCIse3R5cGU6XCJ1cGRhdGVcIixpdGVtczp0fSl9LHB1c2hEZXN0cm95OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3JlbW92ZUl0ZW1zKGUpO3QubGVuZ3RoJiZ0aGlzLnRyaWdnZXIoXCJwdXNoXCIse3R5cGU6XCJkZXN0cm95XCIsaXRlbXM6dH0pfSxfcmVtb3ZlSXRlbXM6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhO290KGUpfHwoZT1bZV0pLHQ9W10sbj10aGlzLm9wdGlvbnMuYXV0b1N5bmMsdGhpcy5vcHRpb25zLmF1dG9TeW5jPSExO3RyeXtmb3IoaT0wO2UubGVuZ3RoPmk7aSsrKXI9ZVtpXSxvPXRoaXMuX2NyZWF0ZU5ld01vZGVsKHIpLGE9ITEsdGhpcy5fZWFjaEl0ZW0odGhpcy5fZGF0YSxmdW5jdGlvbihlKXt2YXIgbixpO2ZvcihuPTA7ZS5sZW5ndGg+bjtuKyspaWYoaT1lLmF0KG4pLGkuaWQ9PT1vLmlkKXt0LnB1c2goaSksZS5zcGxpY2UobiwxKSxhPSEwO2JyZWFrfX0pLGEmJih0aGlzLl9yZW1vdmVQcmlzdGluZUZvck1vZGVsKG8pLHRoaXMuX2Rlc3Ryb3llZC5wb3AoKSl9ZmluYWxseXt0aGlzLm9wdGlvbnMuYXV0b1N5bmM9bn1yZXR1cm4gdH0scmVtb3ZlOmZ1bmN0aW9uKGUpe3ZhciBuLGk9dGhpcyxyPWkuX2lzU2VydmVyR3JvdXBlZCgpO3JldHVybiB0aGlzLl9lYWNoSXRlbShpLl9kYXRhLGZ1bmN0aW9uKG8pe3JldHVybiBuPUQobyxlKSxuJiZyPyhuLmlzTmV3JiZuLmlzTmV3KCl8fGkuX2Rlc3Ryb3llZC5wdXNoKG4pLCEwKTp0fSksdGhpcy5fcmVtb3ZlTW9kZWxGcm9tUmFuZ2VzKGUpLHRoaXMuX3VwZGF0ZVJhbmdlc0xlbmd0aCgpLGV9LHN5bmM6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscixvPXRoaXMsYT1bXSxzPVtdLGw9by5fZGVzdHJveWVkLGM9by5fZmxhdERhdGEoby5fZGF0YSk7aWYoby5vbmxpbmUoKSl7aWYoIW8ucmVhZGVyLm1vZGVsKXJldHVybjtmb3IodD0wLG49Yy5sZW5ndGg7bj50O3QrKyljW3RdLmlzTmV3KCk/YS5wdXNoKGNbdF0pOmNbdF0uZGlydHkmJnMucHVzaChjW3RdKTtyPVtdLHIucHVzaC5hcHBseShyLG8uX3NlbmQoXCJjcmVhdGVcIixhKSksci5wdXNoLmFwcGx5KHIsby5fc2VuZChcInVwZGF0ZVwiLHMpKSxyLnB1c2guYXBwbHkocixvLl9zZW5kKFwiZGVzdHJveVwiLGwpKSxpPWUud2hlbi5hcHBseShudWxsLHIpLnRoZW4oZnVuY3Rpb24oKXt2YXIgZSx0O2ZvcihlPTAsdD1hcmd1bWVudHMubGVuZ3RoO3Q+ZTtlKyspby5fYWNjZXB0KGFyZ3VtZW50c1tlXSk7by5fc3RvcmVEYXRhKCEwKSxvLl9jaGFuZ2Uoe2FjdGlvbjpcInN5bmNcIn0pLG8udHJpZ2dlcihidCl9KX1lbHNlIG8uX3N0b3JlRGF0YSghMCksby5fY2hhbmdlKHthY3Rpb246XCJzeW5jXCJ9KSxpPWUuRGVmZXJyZWQoKS5yZXNvbHZlKCkucHJvbWlzZSgpO3JldHVybiBpfSxjYW5jZWxDaGFuZ2VzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZSBpbnN0YW5jZW9mIGR0LmRhdGEuTW9kZWw/dC5fY2FuY2VsTW9kZWwoZSk6KHQuX2Rlc3Ryb3llZD1bXSx0Ll9kZXRhY2hPYnNlcnZhYmxlUGFyZW50cygpLHQuX2RhdGE9dC5fb2JzZXJ2ZSh0Ll9wcmlzdGluZURhdGEpLHQub3B0aW9ucy5zZXJ2ZXJQYWdpbmcmJih0Ll90b3RhbD10Ll9wcmlzdGluZVRvdGFsKSx0Ll9jaGFuZ2UoKSl9LGhhc0NoYW5nZXM6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy5fZGF0YTtpZih0aGlzLl9kZXN0cm95ZWQubGVuZ3RoKXJldHVybiEwO2ZvcihlPTAsdD1uLmxlbmd0aDt0PmU7ZSsrKWlmKG5bZV0uaXNOZXcoKXx8bltlXS5kaXJ0eSlyZXR1cm4hMDtyZXR1cm4hMX0sX2FjY2VwdDpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXMscj10Lm1vZGVscyxvPXQucmVzcG9uc2UsYT0wLHM9aS5faXNTZXJ2ZXJHcm91cGVkKCksbD1pLl9wcmlzdGluZURhdGEsYz10LnR5cGU7aWYoaS50cmlnZ2VyKFR0LHtyZXNwb25zZTpvLHR5cGU6Y30pLG8mJiFydChvKSl7aWYobz1pLnJlYWRlci5wYXJzZShvKSxpLl9oYW5kbGVDdXN0b21FcnJvcnMobykpcmV0dXJuO289aS5yZWFkZXIuZGF0YShvKSxvdChvKXx8KG89W29dKX1lbHNlIG89ZS5tYXAocixmdW5jdGlvbihlKXtyZXR1cm4gZS50b0pTT04oKX0pO2ZvcihcImRlc3Ryb3lcIj09PWMmJihpLl9kZXN0cm95ZWQ9W10pLGE9MCxuPXIubGVuZ3RoO24+YTthKyspXCJkZXN0cm95XCIhPT1jPyhyW2FdLmFjY2VwdChvW2FdKSxcImNyZWF0ZVwiPT09Yz9sLnB1c2gocz9BKGkuZ3JvdXAoKSxyW2FdKTpvW2FdKTpcInVwZGF0ZVwiPT09YyYmaS5fdXBkYXRlUHJpc3RpbmVGb3JNb2RlbChyW2FdLG9bYV0pKTppLl9yZW1vdmVQcmlzdGluZUZvck1vZGVsKHJbYV0pfSxfdXBkYXRlUHJpc3RpbmVGb3JNb2RlbDpmdW5jdGlvbihlLHQpe3RoaXMuX2V4ZWN1dGVPblByaXN0aW5lRm9yTW9kZWwoZSxmdW5jdGlvbihlLG4pe2R0LmRlZXBFeHRlbmQobltlXSx0KX0pfSxfZXhlY3V0ZU9uUHJpc3RpbmVGb3JNb2RlbDpmdW5jdGlvbihlLG4pe3RoaXMuX2VhY2hQcmlzdGluZUl0ZW0oZnVuY3Rpb24oaSl7dmFyIHI9RShpLGUpO3JldHVybiByPi0xPyhuKHIsaSksITApOnR9KX0sX3JlbW92ZVByaXN0aW5lRm9yTW9kZWw6ZnVuY3Rpb24oZSl7dGhpcy5fZXhlY3V0ZU9uUHJpc3RpbmVGb3JNb2RlbChlLGZ1bmN0aW9uKGUsdCl7dC5zcGxpY2UoZSwxKX0pfSxfcmVhZERhdGE6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5faXNTZXJ2ZXJHcm91cGVkKCk/dGhpcy5yZWFkZXIuZ3JvdXBzOnRoaXMucmVhZGVyLmRhdGE7cmV0dXJuIHQuY2FsbCh0aGlzLnJlYWRlcixlKX0sX2VhY2hQcmlzdGluZUl0ZW06ZnVuY3Rpb24oZSl7dGhpcy5fZWFjaEl0ZW0odGhpcy5fcHJpc3RpbmVEYXRhLGUpfSxfZWFjaEl0ZW06ZnVuY3Rpb24oZSx0KXtlJiZlLmxlbmd0aCYmKHRoaXMuX2lzU2VydmVyR3JvdXBlZCgpP3goZSx0KTp0KGUpKX0sX3ByaXN0aW5lRm9yTW9kZWw6ZnVuY3Rpb24oZSl7dmFyIG4saSxyPWZ1bmN0aW9uKHIpe3JldHVybiBpPUUocixlKSxpPi0xPyhuPXJbaV0sITApOnR9O3JldHVybiB0aGlzLl9lYWNoUHJpc3RpbmVJdGVtKHIpLG59LF9jYW5jZWxNb2RlbDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9wcmlzdGluZUZvck1vZGVsKGUpO3RoaXMuX2VhY2hJdGVtKHRoaXMuX2RhdGEsZnVuY3Rpb24obil7dmFyIGk9TShuLGUpO2k+PTAmJighdHx8ZS5pc05ldygpJiYhdC5fX3N0YXRlX18/bi5zcGxpY2UoaSwxKTpuW2ldLmFjY2VwdCh0KSl9KX0sX3Byb21pc2U6ZnVuY3Rpb24odCxuLGkpe3ZhciByPXRoaXM7cmV0dXJuIGUuRGVmZXJyZWQoZnVuY3Rpb24oZSl7ci50cmlnZ2VyKEN0LHt0eXBlOml9KSxyLnRyYW5zcG9ydFtpXS5jYWxsKHIudHJhbnNwb3J0LHR0KHtzdWNjZXNzOmZ1bmN0aW9uKHQpe2UucmVzb2x2ZSh7cmVzcG9uc2U6dCxtb2RlbHM6bix0eXBlOml9KX0sZXJyb3I6ZnVuY3Rpb24odCxuLGkpe2UucmVqZWN0KHQpLHIuZXJyb3IodCxuLGkpfX0sdCkpfSkucHJvbWlzZSgpfSxfc2VuZDpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj10aGlzLG89W10sYT1yLnJlYWRlci5zZXJpYWxpemUoZyh0KSk7aWYoci5vcHRpb25zLmJhdGNoKXQubGVuZ3RoJiZvLnB1c2goci5fcHJvbWlzZSh7ZGF0YTp7bW9kZWxzOmF9fSx0LGUpKTtlbHNlIGZvcihuPTAsaT10Lmxlbmd0aDtpPm47bisrKW8ucHVzaChyLl9wcm9taXNlKHtkYXRhOmFbbl19LFt0W25dXSxlKSk7cmV0dXJuIG99LHJlYWQ6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPW4uX3BhcmFtcyh0KSxyPWUuRGVmZXJyZWQoKTtyZXR1cm4gbi5fcXVldWVSZXF1ZXN0KGksZnVuY3Rpb24oKXtuLnRyaWdnZXIoQ3Qse3R5cGU6XCJyZWFkXCJ9KT8obi5fZGVxdWV1ZVJlcXVlc3QoKSxyLnJlc29sdmUoKSk6KG4udHJpZ2dlcihTdCksbi5fcmFuZ2VzPVtdLG4udHJpZ2dlcihcInJlc2V0XCIpLG4ub25saW5lKCk/bi50cmFuc3BvcnQucmVhZCh7ZGF0YTppLHN1Y2Nlc3M6ZnVuY3Rpb24oZSl7bi5zdWNjZXNzKGUpLHIucmVzb2x2ZSgpfSxlcnJvcjpmdW5jdGlvbigpe3ZhciBlPUx0LmNhbGwoYXJndW1lbnRzKTtuLmVycm9yLmFwcGx5KG4sZSksci5yZWplY3QuYXBwbHkocixlKX19KTpudWxsIT1uLm9wdGlvbnMub2ZmbGluZVN0b3JhZ2UmJihuLnN1Y2Nlc3Mobi5vZmZsaW5lRGF0YSgpKSxyLnJlc29sdmUoKSkpfSksci5wcm9taXNlKCl9LF9yZWFkQWdncmVnYXRlczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZWFkZXIuYWdncmVnYXRlcyhlKX0sc3VjY2VzczpmdW5jdGlvbihlKXt2YXIgbixpLHIsbyxhPXRoaXMscz1hLm9wdGlvbnM7aWYoYS50cmlnZ2VyKFR0LHtyZXNwb25zZTplLHR5cGU6XCJyZWFkXCJ9KSxhLm9ubGluZSgpKXtpZihlPWEucmVhZGVyLnBhcnNlKGUpLGEuX2hhbmRsZUN1c3RvbUVycm9ycyhlKSlyZXR1cm4gYS5fZGVxdWV1ZVJlcXVlc3QoKSx0O2EuX3RvdGFsPWEucmVhZGVyLnRvdGFsKGUpLGEuX2FnZ3JlZ2F0ZSYmcy5zZXJ2ZXJBZ2dyZWdhdGVzJiYoYS5fYWdncmVnYXRlUmVzdWx0PWEuX3JlYWRBZ2dyZWdhdGVzKGUpKSxlPWEuX3JlYWREYXRhKGUpfWVsc2V7Zm9yKGU9YS5fcmVhZERhdGEoZSksbj1bXSxpPTA7ZS5sZW5ndGg+aTtpKyspcj1lW2ldLG89ci5fX3N0YXRlX18sXCJkZXN0cm95XCI9PW8/dGhpcy5fZGVzdHJveWVkLnB1c2godGhpcy5fY3JlYXRlTmV3TW9kZWwocikpOm4ucHVzaChyKTtlPW4sYS5fdG90YWw9ZS5sZW5ndGh9YS5fcHJpc3RpbmVUb3RhbD1hLl90b3RhbCxhLl9wcmlzdGluZURhdGE9ZS5zbGljZSgwKSxhLl9kZXRhY2hPYnNlcnZhYmxlUGFyZW50cygpLGEuX2RhdGE9YS5fb2JzZXJ2ZShlKSxudWxsIT1hLm9wdGlvbnMub2ZmbGluZVN0b3JhZ2UmJmEuX2VhY2hJdGVtKGEuX2RhdGEsZnVuY3Rpb24oZSl7dmFyIHQsbjtmb3IodD0wO2UubGVuZ3RoPnQ7dCsrKW49ZS5hdCh0KSxcInVwZGF0ZVwiPT1uLl9fc3RhdGVfXyYmKG4uZGlydHk9ITApfSksYS5fc3RvcmVEYXRhKCksYS5fYWRkUmFuZ2UoYS5fZGF0YSksYS5fcHJvY2VzcyhhLl9kYXRhKSxhLl9kZXF1ZXVlUmVxdWVzdCgpfSxfZGV0YWNoT2JzZXJ2YWJsZVBhcmVudHM6ZnVuY3Rpb24oKXtpZih0aGlzLl9kYXRhJiZ0aGlzLl9zaG91bGREZXRhY2hPYnNlcnZhYmxlUGFyZW50cylmb3IodmFyIGU9MDt0aGlzLl9kYXRhLmxlbmd0aD5lO2UrKyl0aGlzLl9kYXRhW2VdLnBhcmVudCYmKHRoaXMuX2RhdGFbZV0ucGFyZW50PWN0KX0sX3N0b3JlRGF0YTpmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3ZhciBuLGkscixzPVtdO2ZvcihuPTA7ZS5sZW5ndGg+bjtuKyspaT1lLmF0KG4pLHI9aS50b0pTT04oKSxvJiZpLml0ZW1zP3IuaXRlbXM9dChpLml0ZW1zKTooci51aWQ9aS51aWQsYSYmKGkuaXNOZXcoKT9yLl9fc3RhdGVfXz1cImNyZWF0ZVwiOmkuZGlydHkmJihyLl9fc3RhdGVfXz1cInVwZGF0ZVwiKSkpLHMucHVzaChyKTtyZXR1cm4gc312YXIgbixpLHIsbz10aGlzLl9pc1NlcnZlckdyb3VwZWQoKSxhPXRoaXMucmVhZGVyLm1vZGVsO2lmKG51bGwhPXRoaXMub3B0aW9ucy5vZmZsaW5lU3RvcmFnZSl7Zm9yKG49dCh0aGlzLl9kYXRhKSxpPTA7dGhpcy5fZGVzdHJveWVkLmxlbmd0aD5pO2krKylyPXRoaXMuX2Rlc3Ryb3llZFtpXS50b0pTT04oKSxyLl9fc3RhdGVfXz1cImRlc3Ryb3lcIixuLnB1c2gocik7dGhpcy5vZmZsaW5lRGF0YShuKSxlJiYodGhpcy5fcHJpc3RpbmVEYXRhPW4pfX0sX2FkZFJhbmdlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Ll9za2lwfHwwLGk9bit0Ll9mbGF0RGF0YShlLCEwKS5sZW5ndGg7dC5fcmFuZ2VzLnB1c2goe3N0YXJ0Om4sZW5kOmksZGF0YTplfSksdC5fcmFuZ2VzLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5zdGFydC10LnN0YXJ0fSl9LGVycm9yOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLl9kZXF1ZXVlUmVxdWVzdCgpLHRoaXMudHJpZ2dlcihUdCx7fSksdGhpcy50cmlnZ2VyKHh0LHt4aHI6ZSxzdGF0dXM6dCxlcnJvclRocm93bjpufSl9LF9wYXJhbXM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXR0KHt0YWtlOnQudGFrZSgpLHNraXA6dC5za2lwKCkscGFnZTp0LnBhZ2UoKSxwYWdlU2l6ZTp0LnBhZ2VTaXplKCksc29ydDp0Ll9zb3J0LGZpbHRlcjp0Ll9maWx0ZXIsZ3JvdXA6dC5fZ3JvdXAsYWdncmVnYXRlOnQuX2FnZ3JlZ2F0ZX0sZSk7cmV0dXJuIHQub3B0aW9ucy5zZXJ2ZXJQYWdpbmd8fChkZWxldGUgbi50YWtlLGRlbGV0ZSBuLnNraXAsZGVsZXRlIG4ucGFnZSxkZWxldGUgbi5wYWdlU2l6ZSksdC5vcHRpb25zLnNlcnZlckdyb3VwaW5nP3QucmVhZGVyLm1vZGVsJiZuLmdyb3VwJiYobi5ncm91cD1GKG4uZ3JvdXAsdC5yZWFkZXIubW9kZWwpKTpkZWxldGUgbi5ncm91cCx0Lm9wdGlvbnMuc2VydmVyRmlsdGVyaW5nP3QucmVhZGVyLm1vZGVsJiZuLmZpbHRlciYmKG4uZmlsdGVyPXoobi5maWx0ZXIsdC5yZWFkZXIubW9kZWwpKTpkZWxldGUgbi5maWx0ZXIsdC5vcHRpb25zLnNlcnZlclNvcnRpbmc/dC5yZWFkZXIubW9kZWwmJm4uc29ydCYmKG4uc29ydD1GKG4uc29ydCx0LnJlYWRlci5tb2RlbCkpOmRlbGV0ZSBuLnNvcnQsdC5vcHRpb25zLnNlcnZlckFnZ3JlZ2F0ZXM/dC5yZWFkZXIubW9kZWwmJm4uYWdncmVnYXRlJiYobi5hZ2dyZWdhdGU9RihuLmFnZ3JlZ2F0ZSx0LnJlYWRlci5tb2RlbCkpOmRlbGV0ZSBuLmFnZ3JlZ2F0ZSxufSxfcXVldWVSZXF1ZXN0OmZ1bmN0aW9uKGUsbil7dmFyIGk9dGhpcztpLl9yZXF1ZXN0SW5Qcm9ncmVzcz9pLl9wZW5kaW5nPXtjYWxsYmFjazpudChuLGkpLG9wdGlvbnM6ZX06KGkuX3JlcXVlc3RJblByb2dyZXNzPSEwLGkuX3BlbmRpbmc9dCxuKCkpfSxfZGVxdWV1ZVJlcXVlc3Q6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3JlcXVlc3RJblByb2dyZXNzPSExLGUuX3BlbmRpbmcmJmUuX3F1ZXVlUmVxdWVzdChlLl9wZW5kaW5nLm9wdGlvbnMsZS5fcGVuZGluZy5jYWxsYmFjayl9LF9oYW5kbGVDdXN0b21FcnJvcnM6ZnVuY3Rpb24oZSl7aWYodGhpcy5yZWFkZXIuZXJyb3JzKXt2YXIgdD10aGlzLnJlYWRlci5lcnJvcnMoZSk7aWYodClyZXR1cm4gdGhpcy50cmlnZ2VyKHh0LHt4aHI6bnVsbCxzdGF0dXM6XCJjdXN0b21lcnJvclwiLGVycm9yVGhyb3duOlwiY3VzdG9tIGVycm9yXCIsZXJyb3JzOnR9KSwhMH1yZXR1cm4hMX0sX29ic2VydmU6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLGk9bi5yZWFkZXIubW9kZWwscj0hMTtyZXR1cm4gbi5fc2hvdWxkRGV0YWNoT2JzZXJ2YWJsZVBhcmVudHM9ITAsaSYmZS5sZW5ndGgmJihyPSEoZVswXWluc3RhbmNlb2YgaSkpLGUgaW5zdGFuY2VvZiBqdD8obi5fc2hvdWxkRGV0YWNoT2JzZXJ2YWJsZVBhcmVudHM9ITEsciYmKGUudHlwZT1uLnJlYWRlci5tb2RlbCxlLndyYXBBbGwoZSxlKSkpOih0PW4ucGFnZVNpemUoKT9HdDpqdCxlPW5ldyB0KGUsbi5yZWFkZXIubW9kZWwpLGUucGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIG4ucGFyZW50KCl9KSxuLl9pc1NlcnZlckdyb3VwZWQoKSYmayhlLGkpLG4uX2NoYW5nZUhhbmRsZXImJm4uX2RhdGEmJm4uX2RhdGEgaW5zdGFuY2VvZiBqdD9uLl9kYXRhLnVuYmluZCh3dCxuLl9jaGFuZ2VIYW5kbGVyKTpuLl9jaGFuZ2VIYW5kbGVyPW50KG4uX2NoYW5nZSxuKSxlLmJpbmQod3Qsbi5fY2hhbmdlSGFuZGxlcil9LF9jaGFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9dGhpcyxvPWU/ZS5hY3Rpb246XCJcIjtpZihcInJlbW92ZVwiPT09bylmb3IodD0wLG49ZS5pdGVtcy5sZW5ndGg7bj50O3QrKyllLml0ZW1zW3RdLmlzTmV3JiZlLml0ZW1zW3RdLmlzTmV3KCl8fHIuX2Rlc3Ryb3llZC5wdXNoKGUuaXRlbXNbdF0pOyFyLm9wdGlvbnMuYXV0b1N5bmN8fFwiYWRkXCIhPT1vJiZcInJlbW92ZVwiIT09byYmXCJpdGVtY2hhbmdlXCIhPT1vPyhpPXBhcnNlSW50KHIuX3RvdGFsLDEwKSxwKHIuX3RvdGFsKXx8KGk9cGFyc2VJbnQoci5fcHJpc3RpbmVUb3RhbCwxMCkpLFwiYWRkXCI9PT1vP2krPWUuaXRlbXMubGVuZ3RoOlwicmVtb3ZlXCI9PT1vP2ktPWUuaXRlbXMubGVuZ3RoOlwiaXRlbWNoYW5nZVwiPT09b3x8XCJzeW5jXCI9PT1vfHxyLm9wdGlvbnMuc2VydmVyUGFnaW5nP1wic3luY1wiPT09byYmKGk9ci5fcHJpc3RpbmVUb3RhbD1wYXJzZUludChyLl90b3RhbCwxMCkpOmk9ci5fcHJpc3RpbmVUb3RhbCxyLl90b3RhbD1pLHIuX3Byb2Nlc3Moci5fZGF0YSxlKSk6ci5zeW5jKCl9LF9jYWxjdWxhdGVBZ2dyZWdhdGVzOmZ1bmN0aW9uKGUsdCl7dD10fHx7fTt2YXIgbj1uZXcgbyhlKSxpPXQuYWdncmVnYXRlLHI9dC5maWx0ZXI7cmV0dXJuIHImJihuPW4uZmlsdGVyKHIpKSxuLmFnZ3JlZ2F0ZShpKX0sX3Byb2Nlc3M6ZnVuY3Rpb24oZSxuKXt2YXIgaSxyPXRoaXMsbz17fTtyLm9wdGlvbnMuc2VydmVyUGFnaW5nIT09ITAmJihvLnNraXA9ci5fc2tpcCxvLnRha2U9ci5fdGFrZXx8ci5fcGFnZVNpemUsby5za2lwPT09dCYmci5fcGFnZSE9PXQmJnIuX3BhZ2VTaXplIT09dCYmKG8uc2tpcD0oci5fcGFnZS0xKSpyLl9wYWdlU2l6ZSkpLHIub3B0aW9ucy5zZXJ2ZXJTb3J0aW5nIT09ITAmJihvLnNvcnQ9ci5fc29ydCksci5vcHRpb25zLnNlcnZlckZpbHRlcmluZyE9PSEwJiYoby5maWx0ZXI9ci5fZmlsdGVyKSxyLm9wdGlvbnMuc2VydmVyR3JvdXBpbmchPT0hMCYmKG8uZ3JvdXA9ci5fZ3JvdXApLHIub3B0aW9ucy5zZXJ2ZXJBZ2dyZWdhdGVzIT09ITAmJihvLmFnZ3JlZ2F0ZT1yLl9hZ2dyZWdhdGUsci5fYWdncmVnYXRlUmVzdWx0PXIuX2NhbGN1bGF0ZUFnZ3JlZ2F0ZXMoZSxvKSksaT1yLl9xdWVyeVByb2Nlc3MoZSxvKSxyLnZpZXcoaS5kYXRhKSxpLnRvdGFsPT09dHx8ci5vcHRpb25zLnNlcnZlckZpbHRlcmluZ3x8KHIuX3RvdGFsPWkudG90YWwpLG49bnx8e30sbi5pdGVtcz1uLml0ZW1zfHxyLl92aWV3LHIudHJpZ2dlcih3dCxuKX0sX3F1ZXJ5UHJvY2VzczpmdW5jdGlvbihlLHQpe3JldHVybiBvLnByb2Nlc3MoZSx0KX0sX21lcmdlU3RhdGU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztyZXR1cm4gZSE9PXQmJihuLl9wYWdlU2l6ZT1lLnBhZ2VTaXplLG4uX3BhZ2U9ZS5wYWdlLG4uX3NvcnQ9ZS5zb3J0LG4uX2ZpbHRlcj1lLmZpbHRlcixuLl9ncm91cD1lLmdyb3VwLG4uX2FnZ3JlZ2F0ZT1lLmFnZ3JlZ2F0ZSxuLl9za2lwPWUuc2tpcCxuLl90YWtlPWUudGFrZSxuLl9za2lwPT09dCYmKG4uX3NraXA9bi5za2lwKCksZS5za2lwPW4uc2tpcCgpKSxuLl90YWtlPT09dCYmbi5fcGFnZVNpemUhPT10JiYobi5fdGFrZT1uLl9wYWdlU2l6ZSxlLnRha2U9bi5fdGFrZSksZS5zb3J0JiYobi5fc29ydD1lLnNvcnQ9YShlLnNvcnQpKSxlLmZpbHRlciYmKG4uX2ZpbHRlcj1lLmZpbHRlcj1sKGUuZmlsdGVyKSksZS5ncm91cCYmKG4uX2dyb3VwPWUuZ3JvdXA9ZChlLmdyb3VwKSksZS5hZ2dyZWdhdGUmJihuLl9hZ2dyZWdhdGU9ZS5hZ2dyZWdhdGU9YyhlLmFnZ3JlZ2F0ZSkpKSxlfSxxdWVyeTpmdW5jdGlvbihuKXt2YXIgaSxyPXRoaXMub3B0aW9ucy5zZXJ2ZXJTb3J0aW5nfHx0aGlzLm9wdGlvbnMuc2VydmVyUGFnaW5nfHx0aGlzLm9wdGlvbnMuc2VydmVyRmlsdGVyaW5nfHx0aGlzLm9wdGlvbnMuc2VydmVyR3JvdXBpbmd8fHRoaXMub3B0aW9ucy5zZXJ2ZXJBZ2dyZWdhdGVzO3JldHVybiByfHwodGhpcy5fZGF0YT09PXR8fDA9PT10aGlzLl9kYXRhLmxlbmd0aCkmJiF0aGlzLl9kZXN0cm95ZWQubGVuZ3RoP3RoaXMucmVhZCh0aGlzLl9tZXJnZVN0YXRlKG4pKToodGhpcy50cmlnZ2VyKEN0LHt0eXBlOlwicmVhZFwifSl8fCh0aGlzLnRyaWdnZXIoU3QpLGk9dGhpcy5fcXVlcnlQcm9jZXNzKHRoaXMuX2RhdGEsdGhpcy5fbWVyZ2VTdGF0ZShuKSksdGhpcy5vcHRpb25zLnNlcnZlckZpbHRlcmluZ3x8KHRoaXMuX3RvdGFsPWkudG90YWwhPT10P2kudG90YWw6dGhpcy5fZGF0YS5sZW5ndGgpLHRoaXMuX2FnZ3JlZ2F0ZVJlc3VsdD10aGlzLl9jYWxjdWxhdGVBZ2dyZWdhdGVzKHRoaXMuX2RhdGEsbiksdGhpcy52aWV3KGkuZGF0YSksdGhpcy50cmlnZ2VyKFR0LHt9KSx0aGlzLnRyaWdnZXIod3Qse2l0ZW1zOmkuZGF0YX0pKSxlLkRlZmVycmVkKCkucmVzb2x2ZSgpLnByb21pc2UoKSl9LGZldGNoOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9xdWVyeSgpLnRoZW4obnQoZSx0aGlzKSl9LF9xdWVyeTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0LnF1ZXJ5KHR0KHt9LHtwYWdlOnQucGFnZSgpLHBhZ2VTaXplOnQucGFnZVNpemUoKSxzb3J0OnQuc29ydCgpLGZpbHRlcjp0LmZpbHRlcigpLGdyb3VwOnQuZ3JvdXAoKSxhZ2dyZWdhdGU6dC5hZ2dyZWdhdGUoKX0sZSkpfSxuZXh0OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLnBhZ2UoKSxyPW4udG90YWwoKTtyZXR1cm4gZT1lfHx7fSwhaXx8ciYmaSsxPm4udG90YWxQYWdlcygpP3Q6KG4uX3NraXA9aSpuLnRha2UoKSxpKz0xLGUucGFnZT1pLG4uX3F1ZXJ5KGUpLGkpfSxwcmV2OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLnBhZ2UoKTtyZXR1cm4gZT1lfHx7fSxpJiYxIT09aT8obi5fc2tpcD1uLl9za2lwLW4udGFrZSgpLGktPTEsZS5wYWdlPWksbi5fcXVlcnkoZSksaSk6dH0scGFnZTpmdW5jdGlvbihlKXt2YXIgbixpPXRoaXM7cmV0dXJuIGUhPT10PyhlPVB0Lm1heChQdC5taW4oUHQubWF4KGUsMSksaS50b3RhbFBhZ2VzKCkpLDEpLGkuX3F1ZXJ5KHtwYWdlOmV9KSx0KToobj1pLnNraXAoKSxuIT09dD9QdC5yb3VuZCgobnx8MCkvKGkudGFrZSgpfHwxKSkrMTp0KX0scGFnZVNpemU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztyZXR1cm4gZSE9PXQ/KG4uX3F1ZXJ5KHtwYWdlU2l6ZTplLHBhZ2U6MX0pLHQpOm4udGFrZSgpfSxzb3J0OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGUhPT10PyhuLl9xdWVyeSh7c29ydDplfSksdCk6bi5fc29ydH0sZmlsdGVyOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGU9PT10P24uX2ZpbHRlcjoobi5fcXVlcnkoe2ZpbHRlcjplLHBhZ2U6MX0pLHQpfSxncm91cDpmdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiBlIT09dD8obi5fcXVlcnkoe2dyb3VwOmV9KSx0KTpuLl9ncm91cH0sdG90YWw6ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VJbnQodGhpcy5fdG90YWx8fDAsMTApfSxhZ2dyZWdhdGU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztyZXR1cm4gZSE9PXQ/KG4uX3F1ZXJ5KHthZ2dyZWdhdGU6ZX0pLHQpOm4uX2FnZ3JlZ2F0ZX0sYWdncmVnYXRlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hZ2dyZWdhdGVSZXN1bHR9LHRvdGFsUGFnZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5wYWdlU2l6ZSgpfHxlLnRvdGFsKCk7cmV0dXJuIFB0LmNlaWwoKGUudG90YWwoKXx8MCkvdCl9LGluUmFuZ2U6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9UHQubWluKGUrdCxuLnRvdGFsKCkpO3JldHVybiFuLm9wdGlvbnMuc2VydmVyUGFnaW5nJiZuLl9kYXRhLmxlbmd0aD4wPyEwOm4uX2ZpbmRSYW5nZShlLGkpLmxlbmd0aD4wfSxsYXN0UmFuZ2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9yYW5nZXM7cmV0dXJuIGVbZS5sZW5ndGgtMV18fHtzdGFydDowLGVuZDowLGRhdGE6W119fSxmaXJzdEl0ZW1VaWQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9yYW5nZXM7cmV0dXJuIGUubGVuZ3RoJiZlWzBdLmRhdGEubGVuZ3RoJiZlWzBdLmRhdGFbMF0udWlkfSxlbmFibGVSZXF1ZXN0c0luUHJvZ3Jlc3M6ZnVuY3Rpb24oKXt0aGlzLl9za2lwUmVxdWVzdHNJblByb2dyZXNzPSExfSxyYW5nZTpmdW5jdGlvbihlLG4pe3ZhciBpLHIsbyxhLHMsbCxjLGQ7aWYoZT1QdC5taW4oZXx8MCx0aGlzLnRvdGFsKCkpLGk9dGhpcyxyPVB0Lm1heChQdC5mbG9vcihlL24pLDApKm4sbz1QdC5taW4ocituLGkudG90YWwoKSksaS5fc2tpcFJlcXVlc3RzSW5Qcm9ncmVzcz0hMSxhPWkuX2ZpbmRSYW5nZShlLFB0Lm1pbihlK24saS50b3RhbCgpKSksYS5sZW5ndGgpe2kuX3NraXBSZXF1ZXN0c0luUHJvZ3Jlc3M9ITAsaS5fcGVuZGluZz10LGkuX3NraXA9ZT5pLnNraXAoKT9QdC5taW4obywoaS50b3RhbFBhZ2VzKCktMSkqaS50YWtlKCkpOnIsaS5fdGFrZT1uLHM9aS5vcHRpb25zLnNlcnZlclBhZ2luZyxsPWkub3B0aW9ucy5zZXJ2ZXJTb3J0aW5nLGM9aS5vcHRpb25zLnNlcnZlckZpbHRlcmluZyxkPWkub3B0aW9ucy5zZXJ2ZXJBZ2dyZWdhdGVzO3RyeXtpLm9wdGlvbnMuc2VydmVyUGFnaW5nPSEwLGkuX2lzU2VydmVyR3JvdXBlZCgpfHxpLmdyb3VwKCkmJmkuZ3JvdXAoKS5sZW5ndGh8fChpLm9wdGlvbnMuc2VydmVyU29ydGluZz0hMCksaS5vcHRpb25zLnNlcnZlckZpbHRlcmluZz0hMCxpLm9wdGlvbnMuc2VydmVyUGFnaW5nPSEwLGkub3B0aW9ucy5zZXJ2ZXJBZ2dyZWdhdGVzPSEwLHMmJihpLl9kZXRhY2hPYnNlcnZhYmxlUGFyZW50cygpLGkuX2RhdGE9YT1pLl9vYnNlcnZlKGEpKSxpLl9wcm9jZXNzKGEpfWZpbmFsbHl7aS5vcHRpb25zLnNlcnZlclBhZ2luZz1zLGkub3B0aW9ucy5zZXJ2ZXJTb3J0aW5nPWwsaS5vcHRpb25zLnNlcnZlckZpbHRlcmluZz1jLGkub3B0aW9ucy5zZXJ2ZXJBZ2dyZWdhdGVzPWR9fWVsc2UgbiE9PXQmJihpLl9yYW5nZUV4aXN0cyhyLG8pP2U+ciYmaS5wcmVmZXRjaChvLG4sZnVuY3Rpb24oKXtpLnJhbmdlKGUsbil9KTppLnByZWZldGNoKHIsbixmdW5jdGlvbigpe2U+ciYmbzxpLnRvdGFsKCkmJiFpLl9yYW5nZUV4aXN0cyhvLFB0Lm1pbihvK24saS50b3RhbCgpKSk/aS5wcmVmZXRjaChvLG4sZnVuY3Rpb24oKXtpLnJhbmdlKGUsbil9KTppLnJhbmdlKGUsbil9KSl9LF9maW5kUmFuZ2U6ZnVuY3Rpb24oZSxuKXt2YXIgaSxyLG8scyxsLGMsdSxoLHAsZixnLG0sdj10aGlzLF89di5fcmFuZ2VzLHk9W10sdz12Lm9wdGlvbnMsYj13LnNlcnZlclNvcnRpbmd8fHcuc2VydmVyUGFnaW5nfHx3LnNlcnZlckZpbHRlcmluZ3x8dy5zZXJ2ZXJHcm91cGluZ3x8dy5zZXJ2ZXJBZ2dyZWdhdGVzO2ZvcihyPTAsZz1fLmxlbmd0aDtnPnI7cisrKWlmKGk9X1tyXSxlPj1pLnN0YXJ0JiZpLmVuZD49ZSl7Zm9yKGY9MCxvPXI7Zz5vO28rKylpZihpPV9bb10scD12Ll9mbGF0RGF0YShpLmRhdGEsITApLHAubGVuZ3RoJiZlK2Y+PWkuc3RhcnQmJihjPWkuZGF0YSx1PWkuZW5kLGJ8fChtPWQodi5ncm91cCgpfHxbXSkuY29uY2F0KGEodi5zb3J0KCl8fFtdKSksaD12Ll9xdWVyeVByb2Nlc3MoaS5kYXRhLHtzb3J0Om0sZmlsdGVyOnYuZmlsdGVyKCl9KSxwPWM9aC5kYXRhLGgudG90YWwhPT10JiYodT1oLnRvdGFsKSkscz0wLGUrZj5pLnN0YXJ0JiYocz1lK2YtaS5zdGFydCksbD1wLmxlbmd0aCx1Pm4mJihsLT11LW4pLGYrPWwtcyx5PXYuX21lcmdlR3JvdXBzKHksYyxzLGwpLGkuZW5kPj1uJiZmPT1uLWUpKXJldHVybiB5O2JyZWFrfXJldHVybltdfSxfbWVyZ2VHcm91cHM6ZnVuY3Rpb24oZSx0LG4saSl7aWYodGhpcy5faXNTZXJ2ZXJHcm91cGVkKCkpe3ZhciByLG89dC50b0pTT04oKTtyZXR1cm4gZS5sZW5ndGgmJihyPWVbZS5sZW5ndGgtMV0pLHcocixvLG4saSksZS5jb25jYXQobyl9cmV0dXJuIGUuY29uY2F0KHQuc2xpY2UobixpKSl9LHNraXA6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBlLl9za2lwPT09dD9lLl9wYWdlIT09dD8oZS5fcGFnZS0xKSooZS50YWtlKCl8fDEpOnQ6ZS5fc2tpcH0sdGFrZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90YWtlfHx0aGlzLl9wYWdlU2l6ZX0sX3ByZWZldGNoU3VjY2Vzc0hhbmRsZXI6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBvLGEscyxsPSExLGM9e3N0YXJ0OmUsZW5kOnQsZGF0YTpbXX07aWYoaS5fZGVxdWV1ZVJlcXVlc3QoKSxpLnRyaWdnZXIoVHQse3Jlc3BvbnNlOnIsdHlwZTpcInJlYWRcIn0pLHI9aS5yZWFkZXIucGFyc2Uocikscz1pLl9yZWFkRGF0YShyKSxzLmxlbmd0aCl7Zm9yKG89MCxhPWkuX3Jhbmdlcy5sZW5ndGg7YT5vO28rKylpZihpLl9yYW5nZXNbb10uc3RhcnQ9PT1lKXtsPSEwLGM9aS5fcmFuZ2VzW29dO1xuYnJlYWt9bHx8aS5fcmFuZ2VzLnB1c2goYyl9Yy5kYXRhPWkuX29ic2VydmUocyksYy5lbmQ9Yy5zdGFydCtpLl9mbGF0RGF0YShjLmRhdGEsITApLmxlbmd0aCxpLl9yYW5nZXMuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBlLnN0YXJ0LXQuc3RhcnR9KSxpLl90b3RhbD1pLnJlYWRlci50b3RhbChyKSxpLl9za2lwUmVxdWVzdHNJblByb2dyZXNzfHwobiYmcy5sZW5ndGg/bigpOmkudHJpZ2dlcih3dCx7fSkpfX0scHJlZmV0Y2g6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMscj1QdC5taW4oZSt0LGkudG90YWwoKSksbz17dGFrZTp0LHNraXA6ZSxwYWdlOmUvdCsxLHBhZ2VTaXplOnQsc29ydDppLl9zb3J0LGZpbHRlcjppLl9maWx0ZXIsZ3JvdXA6aS5fZ3JvdXAsYWdncmVnYXRlOmkuX2FnZ3JlZ2F0ZX07aS5fcmFuZ2VFeGlzdHMoZSxyKT9uJiZuKCk6KGNsZWFyVGltZW91dChpLl90aW1lb3V0KSxpLl90aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpLl9xdWV1ZVJlcXVlc3QobyxmdW5jdGlvbigpe2kudHJpZ2dlcihDdCx7dHlwZTpcInJlYWRcIn0pP2kuX2RlcXVldWVSZXF1ZXN0KCk6aS50cmFuc3BvcnQucmVhZCh7ZGF0YTppLl9wYXJhbXMobyksc3VjY2VzczppLl9wcmVmZXRjaFN1Y2Nlc3NIYW5kbGVyKGUscixuKX0pfSl9LDEwMCkpfSxfcmFuZ2VFeGlzdHM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcyxvPXIuX3Jhbmdlcztmb3Iobj0wLGk9by5sZW5ndGg7aT5uO24rKylpZihlPj1vW25dLnN0YXJ0JiZvW25dLmVuZD49dClyZXR1cm4hMDtyZXR1cm4hMX0sX3JlbW92ZU1vZGVsRnJvbVJhbmdlczpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvO2ZvcihyPTAsbz10aGlzLl9yYW5nZXMubGVuZ3RoO28+ciYmKGk9dGhpcy5fcmFuZ2VzW3JdLHRoaXMuX2VhY2hJdGVtKGkuZGF0YSxmdW5jdGlvbihpKXt0PUQoaSxlKSx0JiYobj0hMCl9KSwhbik7cisrKTt9LF91cGRhdGVSYW5nZXNMZW5ndGg6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyPTA7Zm9yKG49MCxpPXRoaXMuX3Jhbmdlcy5sZW5ndGg7aT5uO24rKyllPXRoaXMuX3Jhbmdlc1tuXSxlLnN0YXJ0PWUuc3RhcnQtcix0PXRoaXMuX2ZsYXREYXRhKGUuZGF0YSwhMCkubGVuZ3RoLHI9ZS5lbmQtdCxlLmVuZD1lLnN0YXJ0K3R9fSksUT17fSxRLmNyZWF0ZT1mdW5jdGlvbihlLHQpe3ZhciBuLGk9ZS50cmFuc3BvcnQ7cmV0dXJuIGk/KGkucmVhZD10eXBlb2YgaS5yZWFkPT09ZnQ/e3VybDppLnJlYWR9OmkucmVhZCxlLnR5cGUmJihkdC5kYXRhLnRyYW5zcG9ydHM9ZHQuZGF0YS50cmFuc3BvcnRzfHx7fSxkdC5kYXRhLnNjaGVtYXM9ZHQuZGF0YS5zY2hlbWFzfHx7fSxkdC5kYXRhLnRyYW5zcG9ydHNbZS50eXBlXSYmIWl0KGR0LmRhdGEudHJhbnNwb3J0c1tlLnR5cGVdKT9uPW5ldyBkdC5kYXRhLnRyYW5zcG9ydHNbZS50eXBlXSh0dChpLHtkYXRhOnR9KSk6aT10dCghMCx7fSxkdC5kYXRhLnRyYW5zcG9ydHNbZS50eXBlXSxpKSxlLnNjaGVtYT10dCghMCx7fSxkdC5kYXRhLnNjaGVtYXNbZS50eXBlXSxlLnNjaGVtYSkpLG58fChuPXV0KGkucmVhZCk/aTpuZXcgcShpKSkpOm49bmV3IEcoe2RhdGE6ZS5kYXRhfHxbXX0pLG59LEsuY3JlYXRlPWZ1bmN0aW9uKGUpeyhvdChlKXx8ZSBpbnN0YW5jZW9mIGp0KSYmKGU9e2RhdGE6ZX0pO3ZhciB0LG4saSxyPWV8fHt9LG89ci5kYXRhLGE9ci5maWVsZHMscz1yLnRhYmxlLGw9ci5zZWxlY3QsYz17fTtpZihvfHwhYXx8ci50cmFuc3BvcnR8fChzP289QihzLGEpOmwmJihvPVIobCxhKSkpLGR0LmRhdGEuTW9kZWwmJmEmJighci5zY2hlbWF8fCFyLnNjaGVtYS5tb2RlbCkpe2Zvcih0PTAsbj1hLmxlbmd0aDtuPnQ7dCsrKWk9YVt0XSxpLnR5cGUmJihjW2kuZmllbGRdPWkpO3J0KGMpfHwoci5zY2hlbWE9dHQoITAsci5zY2hlbWEse21vZGVsOntmaWVsZHM6Y319KSl9cmV0dXJuIHIuZGF0YT1vLHM9bnVsbCxyLnRhYmxlPW51bGwsciBpbnN0YW5jZW9mIEs/cjpuZXcgSyhyKX0sWD1LdC5kZWZpbmUoe2lkOlwiaWRcIixpbml0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Lmhhc0NoaWxkcmVufHxlJiZlLmhhc0NoaWxkcmVuLGk9XCJpdGVtc1wiLHI9e307ZHQuZGF0YS5Nb2RlbC5mbi5pbml0LmNhbGwodCxlKSx0eXBlb2YgdC5jaGlsZHJlbj09PWZ0JiYoaT10LmNoaWxkcmVuKSxyPXtzY2hlbWE6e2RhdGE6aSxtb2RlbDp7aGFzQ2hpbGRyZW46bixpZDp0LmlkRmllbGQsZmllbGRzOnQuZmllbGRzfX19LHR5cGVvZiB0LmNoaWxkcmVuIT09ZnQmJnR0KHIsdC5jaGlsZHJlbiksci5kYXRhPWUsbnx8KG49ci5zY2hlbWEuZGF0YSksdHlwZW9mIG49PT1mdCYmKG49ZHQuZ2V0dGVyKG4pKSx1dChuKSYmKHQuaGFzQ2hpbGRyZW49ISFuLmNhbGwodCx0KSksdC5fY2hpbGRyZW5PcHRpb25zPXIsdC5oYXNDaGlsZHJlbiYmdC5faW5pdENoaWxkcmVuKCksdC5fbG9hZGVkPSEoIWV8fCFlW2ldJiYhZS5fbG9hZGVkKX0sX2luaXRDaGlsZHJlbjpmdW5jdGlvbigpe3ZhciBlLHQsbixpPXRoaXM7aS5jaGlsZHJlbiBpbnN0YW5jZW9mIEp8fChlPWkuY2hpbGRyZW49bmV3IEooaS5fY2hpbGRyZW5PcHRpb25zKSx0PWUudHJhbnNwb3J0LG49dC5wYXJhbWV0ZXJNYXAsdC5wYXJhbWV0ZXJNYXA9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZVtpLmlkRmllbGR8fFwiaWRcIl09aS5pZCxuJiYoZT1uKGUsdCkpLGV9LGUucGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIGl9LGUuYmluZCh3dCxmdW5jdGlvbihlKXtlLm5vZGU9ZS5ub2RlfHxpLGkudHJpZ2dlcih3dCxlKX0pLGUuYmluZCh4dCxmdW5jdGlvbihlKXt2YXIgdD1pLnBhcmVudCgpO3QmJihlLm5vZGU9ZS5ub2RlfHxpLHQudHJpZ2dlcih4dCxlKSl9KSxpLl91cGRhdGVDaGlsZHJlbkZpZWxkKCkpfSxhcHBlbmQ6ZnVuY3Rpb24oZSl7dGhpcy5faW5pdENoaWxkcmVuKCksdGhpcy5sb2FkZWQoITApLHRoaXMuY2hpbGRyZW4uYWRkKGUpfSxoYXNDaGlsZHJlbjohMSxsZXZlbDpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLnBhcmVudE5vZGUoKSx0PTA7ZSYmZS5wYXJlbnROb2RlOyl0KyssZT1lLnBhcmVudE5vZGU/ZS5wYXJlbnROb2RlKCk6bnVsbDtyZXR1cm4gdH0sX3VwZGF0ZUNoaWxkcmVuRmllbGQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9jaGlsZHJlbk9wdGlvbnMuc2NoZW1hLmRhdGE7dGhpc1tlfHxcIml0ZW1zXCJdPXRoaXMuY2hpbGRyZW4uZGF0YSgpfSxfY2hpbGRyZW5Mb2FkZWQ6ZnVuY3Rpb24oKXt0aGlzLl9sb2FkZWQ9ITAsdGhpcy5fdXBkYXRlQ2hpbGRyZW5GaWVsZCgpfSxsb2FkOmZ1bmN0aW9uKCl7dmFyIGUsbj17fSxpPVwiX3F1ZXJ5XCI7dGhpcy5oYXNDaGlsZHJlbj8odGhpcy5faW5pdENoaWxkcmVuKCksZT10aGlzLmNoaWxkcmVuLG5bdGhpcy5pZEZpZWxkfHxcImlkXCJdPXRoaXMuaWQsdGhpcy5fbG9hZGVkfHwoZS5fZGF0YT10LGk9XCJyZWFkXCIpLGUub25lKHd0LG50KHRoaXMuX2NoaWxkcmVuTG9hZGVkLHRoaXMpKSxlW2ldKG4pKTp0aGlzLmxvYWRlZCghMCl9LHBhcmVudE5vZGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnBhcmVudCgpO3JldHVybiBlLnBhcmVudCgpfSxsb2FkZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10P3RoaXMuX2xvYWRlZDoodGhpcy5fbG9hZGVkPWUsdCl9LHNob3VsZFNlcmlhbGl6ZTpmdW5jdGlvbihlKXtyZXR1cm4gS3QuZm4uc2hvdWxkU2VyaWFsaXplLmNhbGwodGhpcyxlKSYmXCJjaGlsZHJlblwiIT09ZSYmXCJfbG9hZGVkXCIhPT1lJiZcImhhc0NoaWxkcmVuXCIhPT1lJiZcIl9jaGlsZHJlbk9wdGlvbnNcIiE9PWV9fSksSj1LLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt2YXIgdD1YLmRlZmluZSh7Y2hpbGRyZW46ZX0pO0suZm4uaW5pdC5jYWxsKHRoaXMsdHQoITAse30se3NjaGVtYTp7bW9kZWxCYXNlOnQsbW9kZWw6dH19LGUpKSx0aGlzLl9hdHRhY2hCdWJibGVIYW5kbGVycygpfSxfYXR0YWNoQnViYmxlSGFuZGxlcnM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2RhdGEuYmluZCh4dCxmdW5jdGlvbih0KXtlLnRyaWdnZXIoeHQsdCl9KX0scmVtb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5wYXJlbnROb2RlKCksaT10aGlzO3JldHVybiBuJiZuLl9pbml0Q2hpbGRyZW4mJihpPW4uY2hpbGRyZW4pLHQ9Sy5mbi5yZW1vdmUuY2FsbChpLGUpLG4mJiFpLmRhdGEoKS5sZW5ndGgmJihuLmhhc0NoaWxkcmVuPSExKSx0fSxzdWNjZXNzOkwoXCJzdWNjZXNzXCIpLGRhdGE6TChcImRhdGFcIiksaW5zZXJ0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5wYXJlbnQoKTtyZXR1cm4gbiYmbi5faW5pdENoaWxkcmVuJiYobi5oYXNDaGlsZHJlbj0hMCxuLl9pbml0Q2hpbGRyZW4oKSksSy5mbi5pbnNlcnQuY2FsbCh0aGlzLGUsdCl9LF9maW5kOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYTtpZihyPUsuZm5bZV0uY2FsbCh0aGlzLHQpKXJldHVybiByO2lmKG89dGhpcy5fZmxhdERhdGEodGhpcy5fZGF0YSkpZm9yKG49MCxpPW8ubGVuZ3RoO2k+bjtuKyspaWYoYT1vW25dLmNoaWxkcmVuLGEgaW5zdGFuY2VvZiBKJiYocj1hW2VdKHQpKSlyZXR1cm4gcn0sZ2V0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9maW5kKFwiZ2V0XCIsZSl9LGdldEJ5VWlkOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9maW5kKFwiZ2V0QnlVaWRcIixlKX19KSxKLmNyZWF0ZT1mdW5jdGlvbihlKXtlPWUmJmUucHVzaD97ZGF0YTplfTplO3ZhciB0PWV8fHt9LG49dC5kYXRhLGk9dC5maWVsZHMscj10Lmxpc3Q7cmV0dXJuIG4mJm4uX2RhdGFTb3VyY2U/bi5fZGF0YVNvdXJjZToobnx8IWl8fHQudHJhbnNwb3J0fHxyJiYobj1PKHIsaSkpLHQuZGF0YT1uLHQgaW5zdGFuY2VvZiBKP3Q6bmV3IEoodCkpfSxaPWR0Lk9ic2VydmFibGUuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXtkdC5PYnNlcnZhYmxlLmZuLmluaXQuY2FsbCh0aGlzKSx0aGlzLl9wcmVmZXRjaGluZz0hMSx0aGlzLmRhdGFTb3VyY2U9ZSx0aGlzLnByZWZldGNoPSFuO3ZhciBpPXRoaXM7ZS5iaW5kKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXtpLl9jaGFuZ2UoKX0pLGUuYmluZChcInJlc2V0XCIsZnVuY3Rpb24oKXtpLl9yZXNldCgpfSksdGhpcy5fc3luY1dpdGhEYXRhU291cmNlKCksdGhpcy5zZXRWaWV3U2l6ZSh0KX0sc2V0Vmlld1NpemU6ZnVuY3Rpb24oZSl7dGhpcy52aWV3U2l6ZT1lLHRoaXMuX3JlY2FsY3VsYXRlKCl9LGF0OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMucGFnZVNpemUsaT0hMDtyZXR1cm4gZT49dGhpcy50b3RhbCgpPyh0aGlzLnRyaWdnZXIoXCJlbmRyZWFjaGVkXCIse2luZGV4OmV9KSx0KTp0aGlzLnVzZVJhbmdlcz90aGlzLnVzZVJhbmdlcz8oKHRoaXMuZGF0YU9mZnNldD5lfHxlPj10aGlzLnNraXArbikmJihpPXRoaXMucmFuZ2UoTWF0aC5mbG9vcihlL24pKm4pKSxlPT09dGhpcy5wcmVmZXRjaFRocmVzaG9sZCYmdGhpcy5fcHJlZmV0Y2goKSxlPT09dGhpcy5taWRQYWdlVGhyZXNob2xkP3RoaXMucmFuZ2UodGhpcy5uZXh0TWlkUmFuZ2UsITApOmU9PT10aGlzLm5leHRQYWdlVGhyZXNob2xkP3RoaXMucmFuZ2UodGhpcy5uZXh0RnVsbFJhbmdlKTplPT09dGhpcy5wdWxsQmFja1RocmVzaG9sZCYmdGhpcy5yYW5nZSh0aGlzLm9mZnNldD09PXRoaXMuc2tpcD90aGlzLnByZXZpb3VzTWlkUmFuZ2U6dGhpcy5wcmV2aW91c0Z1bGxSYW5nZSksaT90aGlzLmRhdGFTb3VyY2UuYXQoZS10aGlzLmRhdGFPZmZzZXQpOih0aGlzLnRyaWdnZXIoXCJlbmRyZWFjaGVkXCIse2luZGV4OmV9KSxudWxsKSk6dDp0aGlzLmRhdGFTb3VyY2UudmlldygpW2VdfSxpbmRleE9mOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmRhdGFTb3VyY2UuZGF0YSgpLmluZGV4T2YoZSkrdGhpcy5kYXRhT2Zmc2V0fSx0b3RhbDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUludCh0aGlzLmRhdGFTb3VyY2UudG90YWwoKSwxMCl9LG5leHQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5wYWdlU2l6ZSxuPWUuc2tpcC1lLnZpZXdTaXplK3QsaT1QdC5tYXgoUHQuZmxvb3Iobi90KSwwKSp0O3RoaXMub2Zmc2V0PW4sdGhpcy5kYXRhU291cmNlLnByZWZldGNoKGksdCxmdW5jdGlvbigpe2UuX2dvVG9SYW5nZShuLCEwKX0pfSxyYW5nZTpmdW5jdGlvbihlLHQpe2lmKHRoaXMub2Zmc2V0PT09ZSlyZXR1cm4hMDt2YXIgbj10aGlzLGk9dGhpcy5wYWdlU2l6ZSxyPVB0Lm1heChQdC5mbG9vcihlL2kpLDApKmksbz10aGlzLmRhdGFTb3VyY2U7cmV0dXJuIHQmJihyKz1pKSxvLmluUmFuZ2UoZSxpKT8odGhpcy5vZmZzZXQ9ZSx0aGlzLl9yZWNhbGN1bGF0ZSgpLHRoaXMuX2dvVG9SYW5nZShlKSwhMCk6dGhpcy5wcmVmZXRjaD8oby5wcmVmZXRjaChyLGksZnVuY3Rpb24oKXtuLm9mZnNldD1lLG4uX3JlY2FsY3VsYXRlKCksbi5fZ29Ub1JhbmdlKGUsITApfSksITEpOiEwfSxzeW5jRGF0YVNvdXJjZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMub2Zmc2V0O3RoaXMub2Zmc2V0PW51bGwsdGhpcy5yYW5nZShlKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMudW5iaW5kKCl9LF9wcmVmZXRjaDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLnBhZ2VTaXplLG49dGhpcy5za2lwK3QsaT10aGlzLmRhdGFTb3VyY2U7aS5pblJhbmdlKG4sdCl8fHRoaXMuX3ByZWZldGNoaW5nfHwhdGhpcy5wcmVmZXRjaHx8KHRoaXMuX3ByZWZldGNoaW5nPSEwLHRoaXMudHJpZ2dlcihcInByZWZldGNoaW5nXCIse3NraXA6bix0YWtlOnR9KSxpLnByZWZldGNoKG4sdCxmdW5jdGlvbigpe2UuX3ByZWZldGNoaW5nPSExLGUudHJpZ2dlcihcInByZWZldGNoZWRcIix7c2tpcDpuLHRha2U6dH0pfSkpfSxfZ29Ub1JhbmdlOmZ1bmN0aW9uKGUsdCl7dGhpcy5vZmZzZXQ9PT1lJiYodGhpcy5kYXRhT2Zmc2V0PWUsdGhpcy5fZXhwYW5kaW5nPXQsdGhpcy5kYXRhU291cmNlLnJhbmdlKGUsdGhpcy5wYWdlU2l6ZSksdGhpcy5kYXRhU291cmNlLmVuYWJsZVJlcXVlc3RzSW5Qcm9ncmVzcygpKX0sX3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fc3luY1BlbmRpbmc9ITB9LF9jaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRhdGFTb3VyY2U7dGhpcy5sZW5ndGg9dGhpcy51c2VSYW5nZXM/ZS5sYXN0UmFuZ2UoKS5lbmQ6ZS52aWV3KCkubGVuZ3RoLHRoaXMuX3N5bmNQZW5kaW5nJiYodGhpcy5fc3luY1dpdGhEYXRhU291cmNlKCksdGhpcy5fcmVjYWxjdWxhdGUoKSx0aGlzLl9zeW5jUGVuZGluZz0hMSx0aGlzLnRyaWdnZXIoXCJyZXNldFwiLHtvZmZzZXQ6dGhpcy5vZmZzZXR9KSksdGhpcy50cmlnZ2VyKFwicmVzaXplXCIpLHRoaXMuX2V4cGFuZGluZyYmdGhpcy50cmlnZ2VyKFwiZXhwYW5kXCIpLGRlbGV0ZSB0aGlzLl9leHBhbmRpbmd9LF9zeW5jV2l0aERhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRhdGFTb3VyY2U7dGhpcy5fZmlyc3RJdGVtVWlkPWUuZmlyc3RJdGVtVWlkKCksdGhpcy5kYXRhT2Zmc2V0PXRoaXMub2Zmc2V0PWUuc2tpcCgpfHwwLHRoaXMucGFnZVNpemU9ZS5wYWdlU2l6ZSgpLHRoaXMudXNlUmFuZ2VzPWUub3B0aW9ucy5zZXJ2ZXJQYWdpbmd9LF9yZWNhbGN1bGF0ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucGFnZVNpemUsdD10aGlzLm9mZnNldCxuPXRoaXMudmlld1NpemUsaT1NYXRoLmNlaWwodC9lKSplO3RoaXMuc2tpcD1pLHRoaXMubWlkUGFnZVRocmVzaG9sZD1pK2UtMSx0aGlzLm5leHRQYWdlVGhyZXNob2xkPWkrbi0xLHRoaXMucHJlZmV0Y2hUaHJlc2hvbGQ9aStNYXRoLmZsb29yKGUvMyoyKSx0aGlzLnB1bGxCYWNrVGhyZXNob2xkPXRoaXMub2Zmc2V0LTEsdGhpcy5uZXh0TWlkUmFuZ2U9aStlLW4sdGhpcy5uZXh0RnVsbFJhbmdlPWksdGhpcy5wcmV2aW91c01pZFJhbmdlPXQtbix0aGlzLnByZXZpb3VzRnVsbFJhbmdlPWktZX19KSxldD1kdC5PYnNlcnZhYmxlLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7ZHQuT2JzZXJ2YWJsZS5mbi5pbml0LmNhbGwobiksdGhpcy5kYXRhU291cmNlPWUsdGhpcy5iYXRjaFNpemU9dCx0aGlzLl90b3RhbD0wLHRoaXMuYnVmZmVyPW5ldyBaKGUsMyp0KSx0aGlzLmJ1ZmZlci5iaW5kKHtlbmRyZWFjaGVkOmZ1bmN0aW9uKGUpe24udHJpZ2dlcihcImVuZHJlYWNoZWRcIix7aW5kZXg6ZS5pbmRleH0pfSxwcmVmZXRjaGluZzpmdW5jdGlvbihlKXtuLnRyaWdnZXIoXCJwcmVmZXRjaGluZ1wiLHtza2lwOmUuc2tpcCx0YWtlOmUudGFrZX0pfSxwcmVmZXRjaGVkOmZ1bmN0aW9uKGUpe24udHJpZ2dlcihcInByZWZldGNoZWRcIix7c2tpcDplLnNraXAsdGFrZTplLnRha2V9KX0scmVzZXQ6ZnVuY3Rpb24oKXtuLl90b3RhbD0wLG4udHJpZ2dlcihcInJlc2V0XCIpfSxyZXNpemU6ZnVuY3Rpb24oKXtuLl90b3RhbD1NYXRoLmNlaWwodGhpcy5sZW5ndGgvbi5iYXRjaFNpemUpLG4udHJpZ2dlcihcInJlc2l6ZVwiLHt0b3RhbDpuLnRvdGFsKCksb2Zmc2V0OnRoaXMub2Zmc2V0fSl9fSl9LHN5bmNEYXRhU291cmNlOmZ1bmN0aW9uKCl7dGhpcy5idWZmZXIuc3luY0RhdGFTb3VyY2UoKX0sYXQ6ZnVuY3Rpb24oZSl7dmFyIG4saSxyPXRoaXMuYnVmZmVyLG89ZSp0aGlzLmJhdGNoU2l6ZSxhPXRoaXMuYmF0Y2hTaXplLHM9W107Zm9yKHIub2Zmc2V0Pm8mJnIuYXQoci5vZmZzZXQtMSksaT0wO2E+aSYmKG49ci5hdChvK2kpLG4hPT10KTtpKyspcy5wdXNoKG4pO3JldHVybiBzfSx0b3RhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b3RhbH0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuYnVmZmVyLmRlc3Ryb3koKSx0aGlzLnVuYmluZCgpfX0pLHR0KCEwLGR0LmRhdGEse3JlYWRlcnM6e2pzb246WX0sUXVlcnk6byxEYXRhU291cmNlOkssSGllcmFyY2hpY2FsRGF0YVNvdXJjZTpKLE5vZGU6WCxPYnNlcnZhYmxlT2JqZWN0OnF0LE9ic2VydmFibGVBcnJheTpqdCxMYXp5T2JzZXJ2YWJsZUFycmF5Okd0LExvY2FsVHJhbnNwb3J0OkcsUmVtb3RlVHJhbnNwb3J0OnEsQ2FjaGU6JCxEYXRhUmVhZGVyOlksTW9kZWw6S3QsQnVmZmVyOlosQmF0Y2hCdWZmZXI6ZXR9KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKHQsbixpKXtyZXR1cm4gdi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXM7di5mbi5pbml0LmNhbGwoaSxlLmVsZW1lbnRbMF0sdCxuKSxpLndpZGdldD1lLGkuX2RhdGFCaW5kaW5nPU0oaS5kYXRhQmluZGluZyxpKSxpLl9kYXRhQm91bmQ9TShpLmRhdGFCb3VuZCxpKSxpLl9pdGVtQ2hhbmdlPU0oaS5pdGVtQ2hhbmdlLGkpfSxpdGVtQ2hhbmdlOmZ1bmN0aW9uKGUpe2EoZS5pdGVtWzBdLGUuZGF0YSx0aGlzLl9ucyhlLm5zKSxbZS5kYXRhXS5jb25jYXQodGhpcy5iaW5kaW5nc1t0XS5fcGFyZW50cygpKSl9LGRhdGFCaW5kaW5nOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLndpZGdldCxyPWUucmVtb3ZlZEl0ZW1zfHxpLml0ZW1zKCk7Zm9yKHQ9MCxuPXIubGVuZ3RoO24+dDt0KyspYyhyW3RdKX0sX25zOmZ1bmN0aW9uKHQpe3Q9dHx8eC51aTt2YXIgbj1beC51aSx4LmRhdGF2aXoudWkseC5tb2JpbGUudWldO3JldHVybiBuLnNwbGljZShlLmluQXJyYXkodCxuKSwxKSxuLnVuc2hpZnQodCkseC5yb2xlc0Zyb21OYW1lc3BhY2VzKG4pfSxkYXRhQm91bmQ6ZnVuY3Rpb24oZSl7e3ZhciBpLHIsbyxzLGw9dGhpcy53aWRnZXQsYz1lLmFkZGVkSXRlbXN8fGwuaXRlbXMoKSxkPWxbbl07ZC5ncm91cCgpfHxbXX1pZihjLmxlbmd0aClmb3Iobz1lLmFkZGVkRGF0YUl0ZW1zfHxkLmZsYXRWaWV3KCkscz10aGlzLmJpbmRpbmdzW3RdLl9wYXJlbnRzKCksaT0wLHI9by5sZW5ndGg7cj5pO2krKylhKGNbaV0sb1tpXSx0aGlzLl9ucyhlLm5zKSxbb1tpXV0uY29uY2F0KHMpKX0scmVmcmVzaDpmdW5jdGlvbihlKXt2YXIgcixvPXRoaXMsYT1vLndpZGdldDtlPWV8fHt9LGUuYWN0aW9ufHwoby5kZXN0cm95KCksYS5iaW5kKFwiZGF0YUJpbmRpbmdcIixvLl9kYXRhQmluZGluZyksYS5iaW5kKFwiZGF0YUJvdW5kXCIsby5fZGF0YUJvdW5kKSxhLmJpbmQoXCJpdGVtQ2hhbmdlXCIsby5faXRlbUNoYW5nZSkscj1vLmJpbmRpbmdzW3RdLmdldCgpLGFbbl1pbnN0YW5jZW9mIHguZGF0YS5EYXRhU291cmNlJiZhW25dIT1yJiYociBpbnN0YW5jZW9mIHguZGF0YS5EYXRhU291cmNlP2FbaV0ocik6ciYmci5fZGF0YVNvdXJjZT9hW2ldKHIuX2RhdGFTb3VyY2UpOmFbbl0uZGF0YShyKSkpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy53aWRnZXQ7ZS51bmJpbmQoXCJkYXRhQmluZGluZ1wiLHRoaXMuX2RhdGFCaW5kaW5nKSxlLnVuYmluZChcImRhdGFCb3VuZFwiLHRoaXMuX2RhdGFCb3VuZCksZS51bmJpbmQoXCJpdGVtQ2hhbmdlXCIsdGhpcy5faXRlbUNoYW5nZSl9fSl9ZnVuY3Rpb24gaShlLG4pe3ZhciBpPXguaW5pdFdpZGdldChlLHt9LG4pO3JldHVybiBpP25ldyB3KGkpOnR9ZnVuY3Rpb24gcihlKXt2YXIgdCxuLGksbyxhLHMsbCxjPXt9O2ZvcihsPWUubWF0Y2goYiksdD0wLG49bC5sZW5ndGg7bj50O3QrKylpPWxbdF0sbz1pLmluZGV4T2YoXCI6XCIpLGE9aS5zdWJzdHJpbmcoMCxvKSxzPWkuc3Vic3RyaW5nKG8rMSksXCJ7XCI9PXMuY2hhckF0KDApJiYocz1yKHMpKSxjW2FdPXM7cmV0dXJuIGN9ZnVuY3Rpb24gbyhlLHQsbil7dmFyIGkscj17fTtmb3IoaSBpbiBlKXJbaV09bmV3IG4odCxlW2ldKTtyZXR1cm4gcn1mdW5jdGlvbiBhKGUsdCxuLHMpe3ZhciBjLGQsdSxoPWUuZ2V0QXR0cmlidXRlKFwiZGF0YS1cIit4Lm5zK1wicm9sZVwiKSxwPWUuZ2V0QXR0cmlidXRlKFwiZGF0YS1cIit4Lm5zK1wiYmluZFwiKSx2PWUuY2hpbGRyZW4sXz1bXSx3PSEwLGI9e307aWYocz1zfHxbdF0sKGh8fHApJiZsKGUpLGgmJih1PWkoZSxuKSkscCYmKHA9cihwLnJlcGxhY2UoayxcIlwiKSksdXx8KGI9eC5wYXJzZU9wdGlvbnMoZSx7dGV4dEZpZWxkOlwiXCIsdmFsdWVGaWVsZDpcIlwiLHRlbXBsYXRlOlwiXCIsdmFsdWVVcGRhdGU6Qix2YWx1ZVByaW1pdGl2ZTohMSxhdXRvQmluZDohMH0pLGIucm9sZXM9bix1PW5ldyB5KGUsYikpLHUuc291cmNlPXQsZD1vKHAscyxmKSxiLnRlbXBsYXRlJiYoZC50ZW1wbGF0ZT1uZXcgbShzLFwiXCIsYi50ZW1wbGF0ZSkpLGQuY2xpY2smJihwLmV2ZW50cz1wLmV2ZW50c3x8e30scC5ldmVudHMuY2xpY2s9cC5jbGljayxkLmNsaWNrLmRlc3Ryb3koKSxkZWxldGUgZC5jbGljayksZC5zb3VyY2UmJih3PSExKSxwLmF0dHImJihkLmF0dHI9byhwLmF0dHIscyxmKSkscC5zdHlsZSYmKGQuc3R5bGU9byhwLnN0eWxlLHMsZikpLHAuZXZlbnRzJiYoZC5ldmVudHM9byhwLmV2ZW50cyxzLGcpKSx1LmJpbmQoZCkpLHUmJihlLmtlbmRvQmluZGluZ1RhcmdldD11KSx3JiZ2KXtmb3IoYz0wO3YubGVuZ3RoPmM7YysrKV9bY109dltjXTtmb3IoYz0wO18ubGVuZ3RoPmM7YysrKWEoX1tjXSx0LG4scyl9fWZ1bmN0aW9uIHModCxuKXt2YXIgaSxyLG8scz14LnJvbGVzRnJvbU5hbWVzcGFjZXMoW10uc2xpY2UuY2FsbChhcmd1bWVudHMsMikpO2ZvcihuPXgub2JzZXJ2YWJsZShuKSx0PWUodCksaT0wLHI9dC5sZW5ndGg7cj5pO2krKylvPXRbaV0sMT09PW8ubm9kZVR5cGUmJmEobyxuLHMpfWZ1bmN0aW9uIGwoZSl7dmFyIHQ9ZS5rZW5kb0JpbmRpbmdUYXJnZXQ7dCYmKHQuZGVzdHJveSgpLFI/ZGVsZXRlIGUua2VuZG9CaW5kaW5nVGFyZ2V0OmUucmVtb3ZlQXR0cmlidXRlP2UucmVtb3ZlQXR0cmlidXRlKFwia2VuZG9CaW5kaW5nVGFyZ2V0XCIpOmUua2VuZG9CaW5kaW5nVGFyZ2V0PW51bGwpfWZ1bmN0aW9uIGMoZSl7bChlKSxkKGUpfWZ1bmN0aW9uIGQoZSl7dmFyIHQsbixpPWUuY2hpbGRyZW47aWYoaSlmb3IodD0wLG49aS5sZW5ndGg7bj50O3QrKyljKGlbdF0pfWZ1bmN0aW9uIHUodCl7dmFyIG4saTtmb3IodD1lKHQpLG49MCxpPXQubGVuZ3RoO2k+bjtuKyspYyh0W25dKX1mdW5jdGlvbiBoKGUsdCl7dmFyIG49ZS5lbGVtZW50LGk9blswXS5rZW5kb0JpbmRpbmdUYXJnZXQ7aSYmcyhuLGkuc291cmNlLHQpfXZhciBwLGYsZyxtLHYsXyx5LHcsYixrLHg9d2luZG93LmtlbmRvLEM9eC5PYnNlcnZhYmxlLFM9eC5kYXRhLk9ic2VydmFibGVPYmplY3QsVD14LmRhdGEuT2JzZXJ2YWJsZUFycmF5LEQ9e30udG9TdHJpbmcsQT17fSxFPXguQ2xhc3MsTT1lLnByb3h5LFA9XCJ2YWx1ZVwiLEk9XCJzb3VyY2VcIix6PVwiZXZlbnRzXCIsRj1cImNoZWNrZWRcIixSPSEwLEI9XCJjaGFuZ2VcIjshZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtlLmlubmVyVGV4dCE9PXQ/cD1cImlubmVyVGV4dFwiOmUudGV4dENvbnRlbnQhPT10JiYocD1cInRleHRDb250ZW50XCIpO3RyeXtkZWxldGUgZS50ZXN0fWNhdGNoKG4pe1I9ITF9fSgpLGY9Qy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO0MuZm4uaW5pdC5jYWxsKG4pLG4uc291cmNlPWVbMF0sbi5wYXJlbnRzPWUsbi5wYXRoPXQsbi5kZXBlbmRlbmNpZXM9e30sbi5kZXBlbmRlbmNpZXNbdF09ITAsbi5vYnNlcnZhYmxlPW4uc291cmNlIGluc3RhbmNlb2YgQyxuLl9hY2Nlc3M9ZnVuY3Rpb24oZSl7bi5kZXBlbmRlbmNpZXNbZS5maWVsZF09ITB9LG4ub2JzZXJ2YWJsZSYmKG4uX2NoYW5nZT1mdW5jdGlvbihlKXtuLmNoYW5nZShlKX0sbi5zb3VyY2UuYmluZChCLG4uX2NoYW5nZSkpfSxfcGFyZW50czpmdW5jdGlvbigpe3ZhciB0LG49dGhpcy5wYXJlbnRzLGk9dGhpcy5nZXQoKTtyZXR1cm4gaSYmXCJmdW5jdGlvblwiPT10eXBlb2YgaS5wYXJlbnQmJih0PWkucGFyZW50KCksZS5pbkFycmF5KHQsbik8MCYmKG49W3RdLmNvbmNhdChuKSkpLG59LGNoYW5nZTpmdW5jdGlvbihlKXt2YXIgdCxuLGk9ZS5maWVsZCxyPXRoaXM7aWYoXCJ0aGlzXCI9PT1yLnBhdGgpci50cmlnZ2VyKEIsZSk7ZWxzZSBmb3IodCBpbiByLmRlcGVuZGVuY2llcylpZigwPT09dC5pbmRleE9mKGkpJiYobj10LmNoYXJBdChpLmxlbmd0aCksIW58fFwiLlwiPT09bnx8XCJbXCI9PT1uKSl7ci50cmlnZ2VyKEIsZSk7YnJlYWt9fSxzdGFydDpmdW5jdGlvbihlKXtlLmJpbmQoXCJnZXRcIix0aGlzLl9hY2Nlc3MpfSxzdG9wOmZ1bmN0aW9uKGUpe2UudW5iaW5kKFwiZ2V0XCIsdGhpcy5fYWNjZXNzKX0sZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxuPWUuc291cmNlLGk9MCxyPWUucGF0aCxvPW47aWYoIWUub2JzZXJ2YWJsZSlyZXR1cm4gbztmb3IoZS5zdGFydChlLnNvdXJjZSksbz1uLmdldChyKTtvPT09dCYmbjspbj1lLnBhcmVudHNbKytpXSxuIGluc3RhbmNlb2YgUyYmKG89bi5nZXQocikpO2lmKG89PT10KWZvcihuPWUuc291cmNlO289PT10JiZuOyluPW4ucGFyZW50KCksbiBpbnN0YW5jZW9mIFMmJihvPW4uZ2V0KHIpKTtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBvJiYoaT1yLmxhc3RJbmRleE9mKFwiLlwiKSxpPjAmJihuPW4uZ2V0KHIuc3Vic3RyaW5nKDAsaSkpKSxlLnN0YXJ0KG4pLG89biE9PWUuc291cmNlP28uY2FsbChuLGUuc291cmNlKTpvLmNhbGwobiksZS5zdG9wKG4pKSxuJiZuIT09ZS5zb3VyY2UmJihlLmN1cnJlbnRTb3VyY2U9bixuLnVuYmluZChCLGUuX2NoYW5nZSkuYmluZChCLGUuX2NoYW5nZSkpLGUuc3RvcChlLnNvdXJjZSksb30sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY3VycmVudFNvdXJjZXx8dGhpcy5zb3VyY2Usbj14LmdldHRlcih0aGlzLnBhdGgpKHQpO1wiZnVuY3Rpb25cIj09dHlwZW9mIG4/dCE9PXRoaXMuc291cmNlP24uY2FsbCh0LHRoaXMuc291cmNlLGUpOm4uY2FsbCh0LGUpOnQuc2V0KHRoaXMucGF0aCxlKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMub2JzZXJ2YWJsZSYmKHRoaXMuc291cmNlLnVuYmluZChCLHRoaXMuX2NoYW5nZSksdGhpcy5jdXJyZW50U291cmNlJiZ0aGlzLmN1cnJlbnRTb3VyY2UudW5iaW5kKEIsdGhpcy5fY2hhbmdlKSksdGhpcy51bmJpbmQoKX19KSxnPWYuZXh0ZW5kKHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuc291cmNlLG49dGhpcy5wYXRoLGk9MDtmb3IoZT10LmdldChuKTshZSYmdDspdD10aGlzLnBhcmVudHNbKytpXSx0IGluc3RhbmNlb2YgUyYmKGU9dC5nZXQobikpO3JldHVybiBNKGUsdCl9fSksbT1mLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcztmLmZuLmluaXQuY2FsbChpLGUsdCksaS50ZW1wbGF0ZT1ufSxyZW5kZXI6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHRoaXMuc3RhcnQodGhpcy5zb3VyY2UpLHQ9eC5yZW5kZXIodGhpcy50ZW1wbGF0ZSxlKSx0aGlzLnN0b3AodGhpcy5zb3VyY2UpLHR9fSksdj1FLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbil7dGhpcy5lbGVtZW50PWUsdGhpcy5iaW5kaW5ncz10LHRoaXMub3B0aW9ucz1ufSxiaW5kOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztlPXQ/ZVt0XTplLGUuYmluZChCLGZ1bmN0aW9uKGUpe24ucmVmcmVzaCh0fHxlKX0pLG4ucmVmcmVzaCh0KX0sZGVzdHJveTpmdW5jdGlvbigpe319KSxBLmF0dHI9di5leHRlbmQoe3JlZnJlc2g6ZnVuY3Rpb24oZSl7dGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShlLHRoaXMuYmluZGluZ3MuYXR0cltlXS5nZXQoKSl9fSksQS5zdHlsZT12LmV4dGVuZCh7cmVmcmVzaDpmdW5jdGlvbihlKXt0aGlzLmVsZW1lbnQuc3R5bGVbZV09dGhpcy5iaW5kaW5ncy5zdHlsZVtlXS5nZXQoKXx8XCJcIn19KSxBLmVuYWJsZWQ9di5leHRlbmQoe3JlZnJlc2g6ZnVuY3Rpb24oKXt0aGlzLmJpbmRpbmdzLmVuYWJsZWQuZ2V0KCk/dGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpOnRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLFwiZGlzYWJsZWRcIil9fSksQS5yZWFkb25seT12LmV4dGVuZCh7cmVmcmVzaDpmdW5jdGlvbigpe3RoaXMuYmluZGluZ3MucmVhZG9ubHkuZ2V0KCk/dGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcInJlYWRvbmx5XCIsXCJyZWFkb25seVwiKTp0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwicmVhZG9ubHlcIil9fSksQS5kaXNhYmxlZD12LmV4dGVuZCh7cmVmcmVzaDpmdW5jdGlvbigpe3RoaXMuYmluZGluZ3MuZGlzYWJsZWQuZ2V0KCk/dGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsXCJkaXNhYmxlZFwiKTp0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIil9fSksQS5ldmVudHM9di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3YuZm4uaW5pdC5jYWxsKHRoaXMsZSx0LG4pLHRoaXMuaGFuZGxlcnM9e319LHJlZnJlc2g6ZnVuY3Rpb24odCl7dmFyIG49ZSh0aGlzLmVsZW1lbnQpLGk9dGhpcy5iaW5kaW5ncy5ldmVudHNbdF0scj10aGlzLmhhbmRsZXJzW3RdO3ImJm4ub2ZmKHQscikscj10aGlzLmhhbmRsZXJzW3RdPWkuZ2V0KCksbi5vbih0LGkuc291cmNlLHIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIHQsbj1lKHRoaXMuZWxlbWVudCk7Zm9yKHQgaW4gdGhpcy5oYW5kbGVycyluLm9mZih0LHRoaXMuaGFuZGxlcnNbdF0pfX0pLEEudGV4dD12LmV4dGVuZCh7cmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuYmluZGluZ3MudGV4dC5nZXQoKTtudWxsPT1lJiYoZT1cIlwiKSx0aGlzLmVsZW1lbnRbcF09ZX19KSxBLnZpc2libGU9di5leHRlbmQoe3JlZnJlc2g6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheT10aGlzLmJpbmRpbmdzLnZpc2libGUuZ2V0KCk/XCJcIjpcIm5vbmVcIn19KSxBLmludmlzaWJsZT12LmV4dGVuZCh7cmVmcmVzaDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5PXRoaXMuYmluZGluZ3MuaW52aXNpYmxlLmdldCgpP1wibm9uZVwiOlwiXCJ9fSksQS5odG1sPXYuZXh0ZW5kKHtyZWZyZXNoOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LmlubmVySFRNTD10aGlzLmJpbmRpbmdzLmh0bWwuZ2V0KCl9fSksQS52YWx1ZT12LmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4saSl7di5mbi5pbml0LmNhbGwodGhpcyx0LG4saSksdGhpcy5fY2hhbmdlPU0odGhpcy5jaGFuZ2UsdGhpcyksdGhpcy5ldmVudE5hbWU9aS52YWx1ZVVwZGF0ZXx8QixlKHRoaXMuZWxlbWVudCkub24odGhpcy5ldmVudE5hbWUsdGhpcy5fY2hhbmdlKSx0aGlzLl9pbml0Q2hhbmdlPSExfSxjaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZSx0O3RoaXMuX2luaXRDaGFuZ2U9dGhpcy5ldmVudE5hbWUhPUIsZT10aGlzLmVsZW1lbnQudmFsdWUsdD10aGlzLmVsZW1lbnQudHlwZSxcImRhdGVcIj09dD9lPXgucGFyc2VEYXRlKGUsXCJ5eXl5LU1NLWRkXCIpOlwiZGF0ZXRpbWUtbG9jYWxcIj09dD9lPXgucGFyc2VEYXRlKGUsW1wieXl5eS1NTS1kZFRISDptbTpzc1wiLFwieXl5eS1NTS1kZFRISDptbVwiXSk6XCJudW1iZXJcIj09dCYmKGU9eC5wYXJzZUZsb2F0KGUpKSx0aGlzLmJpbmRpbmdzW1BdLnNldChlKSx0aGlzLl9pbml0Q2hhbmdlPSExfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGUsdDt0aGlzLl9pbml0Q2hhbmdlfHwoZT10aGlzLmJpbmRpbmdzW1BdLmdldCgpLG51bGw9PWUmJihlPVwiXCIpLHQ9dGhpcy5lbGVtZW50LnR5cGUsXCJkYXRlXCI9PXQ/ZT14LnRvU3RyaW5nKGUsXCJ5eXl5LU1NLWRkXCIpOlwiZGF0ZXRpbWUtbG9jYWxcIj09dCYmKGU9eC50b1N0cmluZyhlLFwieXl5eS1NTS1kZFRISDptbTpzc1wiKSksdGhpcy5lbGVtZW50LnZhbHVlPWUpLHRoaXMuX2luaXRDaGFuZ2U9ITF9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtlKHRoaXMuZWxlbWVudCkub2ZmKHRoaXMuZXZlbnROYW1lLHRoaXMuX2NoYW5nZSl9fSksQS5zb3VyY2U9di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3YuZm4uaW5pdC5jYWxsKHRoaXMsZSx0LG4pO3ZhciBpPXRoaXMuYmluZGluZ3Muc291cmNlLmdldCgpO2kgaW5zdGFuY2VvZiB4LmRhdGEuRGF0YVNvdXJjZSYmbi5hdXRvQmluZCE9PSExJiZpLmZldGNoKCl9LHJlZnJlc2g6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuYmluZGluZ3Muc291cmNlLmdldCgpO24gaW5zdGFuY2VvZiBUfHxuIGluc3RhbmNlb2YgeC5kYXRhLkRhdGFTb3VyY2U/KGU9ZXx8e30sXCJhZGRcIj09ZS5hY3Rpb24/dC5hZGQoZS5pbmRleCxlLml0ZW1zKTpcInJlbW92ZVwiPT1lLmFjdGlvbj90LnJlbW92ZShlLmluZGV4LGUuaXRlbXMpOlwiaXRlbWNoYW5nZVwiIT1lLmFjdGlvbiYmdC5yZW5kZXIoKSk6dC5yZW5kZXIoKX0sY29udGFpbmVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50O3JldHVyblwidGFibGVcIj09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYoZS50Qm9kaWVzWzBdfHxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0Ym9keVwiKSksZT1lLnRCb2RpZXNbMF0pLGV9LHRlbXBsYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLHQ9ZS50ZW1wbGF0ZSxuPXRoaXMuY29udGFpbmVyKCkubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4gdHx8KHQ9XCJzZWxlY3RcIj09bj9lLnZhbHVlRmllbGR8fGUudGV4dEZpZWxkP3guZm9ybWF0KCc8b3B0aW9uIHZhbHVlPVwiIzp7MH0jXCI+Izp7MX0jPC9vcHRpb24+JyxlLnZhbHVlRmllbGR8fGUudGV4dEZpZWxkLGUudGV4dEZpZWxkfHxlLnZhbHVlRmllbGQpOlwiPG9wdGlvbj4jOmRhdGEjPC9vcHRpb24+XCI6XCJ0Ym9keVwiPT1uP1wiPHRyPjx0ZD4jOmRhdGEjPC90ZD48L3RyPlwiOlwidWxcIj09bnx8XCJvbFwiPT1uP1wiPGxpPiM6ZGF0YSM8L2xpPlwiOlwiIzpkYXRhI1wiLHQ9eC50ZW1wbGF0ZSh0KSksdH0sYWRkOmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLHMsbD10aGlzLmNvbnRhaW5lcigpLGM9bC5jbG9uZU5vZGUoITEpLGQ9bC5jaGlsZHJlblt0XTtpZihlKGMpLmh0bWwoeC5yZW5kZXIodGhpcy50ZW1wbGF0ZSgpLG4pKSxjLmNoaWxkcmVuLmxlbmd0aClmb3IoaT10aGlzLmJpbmRpbmdzLnNvdXJjZS5fcGFyZW50cygpLHI9MCxvPW4ubGVuZ3RoO28+cjtyKyspcz1jLmNoaWxkcmVuWzBdLGwuaW5zZXJ0QmVmb3JlKHMsZHx8bnVsbCksYShzLG5bcl0sdGhpcy5vcHRpb25zLnJvbGVzLFtuW3JdXS5jb25jYXQoaSkpfSxyZW1vdmU6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcy5jb250YWluZXIoKTtmb3Iobj0wO3QubGVuZ3RoPm47bisrKWk9ci5jaGlsZHJlbltlXSxjKGkpLHIucmVtb3ZlQ2hpbGQoaSl9LHJlbmRlcjpmdW5jdGlvbigpe3ZhciB0LG4saSxyPXRoaXMuYmluZGluZ3Muc291cmNlLmdldCgpLG89dGhpcy5jb250YWluZXIoKSxzPXRoaXMudGVtcGxhdGUoKTtpZihyIGluc3RhbmNlb2YgeC5kYXRhLkRhdGFTb3VyY2UmJihyPXIudmlldygpKSxyIGluc3RhbmNlb2YgVHx8XCJbb2JqZWN0IEFycmF5XVwiPT09RC5jYWxsKHIpfHwocj1bcl0pLHRoaXMuYmluZGluZ3MudGVtcGxhdGUpe2lmKGQobyksZShvKS5odG1sKHRoaXMuYmluZGluZ3MudGVtcGxhdGUucmVuZGVyKHIpKSxvLmNoaWxkcmVuLmxlbmd0aClmb3IodD10aGlzLmJpbmRpbmdzLnNvdXJjZS5fcGFyZW50cygpLG49MCxpPXIubGVuZ3RoO2k+bjtuKyspYShvLmNoaWxkcmVuW25dLHJbbl0sdGhpcy5vcHRpb25zLnJvbGVzLFtyW25dXS5jb25jYXQodCkpfWVsc2UgZShvKS5odG1sKHgucmVuZGVyKHMscikpfX0pLEEuaW5wdXQ9e2NoZWNrZWQ6di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuLGkpe3YuZm4uaW5pdC5jYWxsKHRoaXMsdCxuLGkpLHRoaXMuX2NoYW5nZT1NKHRoaXMuY2hhbmdlLHRoaXMpLGUodGhpcy5lbGVtZW50KS5jaGFuZ2UodGhpcy5fY2hhbmdlKX0sY2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMuZWxlbWVudCxpPXRoaXMudmFsdWUoKTtcInJhZGlvXCI9PW4udHlwZT90aGlzLmJpbmRpbmdzW0ZdLnNldChpKTpcImNoZWNrYm94XCI9PW4udHlwZSYmKGU9dGhpcy5iaW5kaW5nc1tGXS5nZXQoKSxlIGluc3RhbmNlb2YgVD8oaT10aGlzLmVsZW1lbnQudmFsdWUsXCJvblwiIT09aSYmXCJvZmZcIiE9PWkmJih0PWUuaW5kZXhPZihpKSx0Pi0xP2Uuc3BsaWNlKHQsMSk6ZS5wdXNoKGkpKSk6dGhpcy5iaW5kaW5nc1tGXS5zZXQoaSkpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5iaW5kaW5nc1tGXS5nZXQoKSx0PWUsbj10aGlzLmVsZW1lbnQ7XCJjaGVja2JveFwiPT1uLnR5cGU/KHQgaW5zdGFuY2VvZiBUJiYoZT10aGlzLmVsZW1lbnQudmFsdWUsdC5pbmRleE9mKGUpPj0wJiYoZT0hMCkpLG4uY2hlY2tlZD1lPT09ITApOlwicmFkaW9cIj09bi50eXBlJiZudWxsIT1lJiZuLnZhbHVlPT09XCJcIitlJiYobi5jaGVja2VkPSEwKX0sdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnQsdD1lLnZhbHVlO3JldHVyblwiY2hlY2tib3hcIj09ZS50eXBlJiYodD1lLmNoZWNrZWQpLHR9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtlKHRoaXMuZWxlbWVudCkub2ZmKEIsdGhpcy5fY2hhbmdlKX19KX0sQS5zZWxlY3Q9e3ZhbHVlOnYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbixpKXt2LmZuLmluaXQuY2FsbCh0aGlzLHQsbixpKSx0aGlzLl9jaGFuZ2U9TSh0aGlzLmNoYW5nZSx0aGlzKSxlKHRoaXMuZWxlbWVudCkuY2hhbmdlKHRoaXMuX2NoYW5nZSl9LGNoYW5nZTpmdW5jdGlvbigpe3ZhciBlLG4saSxyLG8sYSxzPVtdLGw9dGhpcy5lbGVtZW50LGM9dGhpcy5vcHRpb25zLnZhbHVlRmllbGR8fHRoaXMub3B0aW9ucy50ZXh0RmllbGQsZD10aGlzLm9wdGlvbnMudmFsdWVQcmltaXRpdmU7Zm9yKG89MCxhPWwub3B0aW9ucy5sZW5ndGg7YT5vO28rKyluPWwub3B0aW9uc1tvXSxuLnNlbGVjdGVkJiYocj1uLmF0dHJpYnV0ZXMudmFsdWUscj1yJiZyLnNwZWNpZmllZD9uLnZhbHVlOm4udGV4dCxzLnB1c2gocikpO2lmKGMpZm9yKGU9dGhpcy5iaW5kaW5ncy5zb3VyY2UuZ2V0KCksZSBpbnN0YW5jZW9mIHguZGF0YS5EYXRhU291cmNlJiYoZT1lLnZpZXcoKSksaT0wO3MubGVuZ3RoPmk7aSsrKWZvcihvPTAsYT1lLmxlbmd0aDthPm87bysrKWlmKGVbb10uZ2V0KGMpPT1zW2ldKXtzW2ldPWVbb107YnJlYWt9cj10aGlzLmJpbmRpbmdzW1BdLmdldCgpLHIgaW5zdGFuY2VvZiBUP3Iuc3BsaWNlLmFwcGx5KHIsWzAsci5sZW5ndGhdLmNvbmNhdChzKSk6dGhpcy5iaW5kaW5nc1tQXS5zZXQoZHx8IShyIGluc3RhbmNlb2YgU3x8bnVsbD09PXJ8fHI9PT10KSYmYz9zWzBdLmdldChjKTpzWzBdKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlLHQsbixpPXRoaXMuZWxlbWVudCxyPWkub3B0aW9ucyxvPXRoaXMuYmluZGluZ3NbUF0uZ2V0KCksYT1vLHM9dGhpcy5vcHRpb25zLnZhbHVlRmllbGR8fHRoaXMub3B0aW9ucy50ZXh0RmllbGQsbD0hMTtmb3IoYSBpbnN0YW5jZW9mIFR8fChhPW5ldyBUKFtvXSkpLGkuc2VsZWN0ZWRJbmRleD0tMSxuPTA7YS5sZW5ndGg+bjtuKyspZm9yKG89YVtuXSxzJiZvIGluc3RhbmNlb2YgUyYmKG89by5nZXQocykpLGU9MDtyLmxlbmd0aD5lO2UrKyl0PXJbZV0udmFsdWUsXCJcIj09PXQmJlwiXCIhPT1vJiYodD1yW2VdLnRleHQpLHQ9PW8mJihyW2VdLnNlbGVjdGVkPSEwLGw9ITApfSxkZXN0cm95OmZ1bmN0aW9uKCl7ZSh0aGlzLmVsZW1lbnQpLm9mZihCLHRoaXMuX2NoYW5nZSl9fSl9LEEud2lkZ2V0PXtldmVudHM6di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3YuZm4uaW5pdC5jYWxsKHRoaXMsZS5lbGVtZW50WzBdLHQsbiksdGhpcy53aWRnZXQ9ZSx0aGlzLmhhbmRsZXJzPXt9fSxyZWZyZXNoOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuYmluZGluZ3MuZXZlbnRzW2VdLG49dGhpcy5oYW5kbGVyc1tlXTtuJiZ0aGlzLndpZGdldC51bmJpbmQoZSxuKSxuPXQuZ2V0KCksdGhpcy5oYW5kbGVyc1tlXT1mdW5jdGlvbihlKXtlLmRhdGE9dC5zb3VyY2UsbihlKSxlLmRhdGE9PT10LnNvdXJjZSYmZGVsZXRlIGUuZGF0YX0sdGhpcy53aWRnZXQuYmluZChlLHRoaXMuaGFuZGxlcnNbZV0pfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU7Zm9yKGUgaW4gdGhpcy5oYW5kbGVycyl0aGlzLndpZGdldC51bmJpbmQoZSx0aGlzLmhhbmRsZXJzW2VdKX19KSxjaGVja2VkOnYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXt2LmZuLmluaXQuY2FsbCh0aGlzLGUuZWxlbWVudFswXSx0LG4pLHRoaXMud2lkZ2V0PWUsdGhpcy5fY2hhbmdlPU0odGhpcy5jaGFuZ2UsdGhpcyksdGhpcy53aWRnZXQuYmluZChCLHRoaXMuX2NoYW5nZSl9LGNoYW5nZTpmdW5jdGlvbigpe3RoaXMuYmluZGluZ3NbRl0uc2V0KHRoaXMudmFsdWUoKSl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt0aGlzLndpZGdldC5jaGVjayh0aGlzLmJpbmRpbmdzW0ZdLmdldCgpPT09ITApfSx2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudCx0PWUudmFsdWU7cmV0dXJuKFwib25cIj09dHx8XCJvZmZcIj09dCkmJih0PWUuY2hlY2tlZCksdH0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMud2lkZ2V0LnVuYmluZChCLHRoaXMuX2NoYW5nZSl9fSksdmlzaWJsZTp2LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbil7di5mbi5pbml0LmNhbGwodGhpcyxlLmVsZW1lbnRbMF0sdCxuKSx0aGlzLndpZGdldD1lfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5iaW5kaW5ncy52aXNpYmxlLmdldCgpO3RoaXMud2lkZ2V0LndyYXBwZXJbMF0uc3R5bGUuZGlzcGxheT1lP1wiXCI6XCJub25lXCJ9fSksaW52aXNpYmxlOnYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXt2LmZuLmluaXQuY2FsbCh0aGlzLGUuZWxlbWVudFswXSx0LG4pLHRoaXMud2lkZ2V0PWV9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmJpbmRpbmdzLmludmlzaWJsZS5nZXQoKTt0aGlzLndpZGdldC53cmFwcGVyWzBdLnN0eWxlLmRpc3BsYXk9ZT9cIm5vbmVcIjpcIlwifX0pLGVuYWJsZWQ6di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3YuZm4uaW5pdC5jYWxsKHRoaXMsZS5lbGVtZW50WzBdLHQsbiksdGhpcy53aWRnZXQ9ZX0scmVmcmVzaDpmdW5jdGlvbigpe3RoaXMud2lkZ2V0LmVuYWJsZSYmdGhpcy53aWRnZXQuZW5hYmxlKHRoaXMuYmluZGluZ3MuZW5hYmxlZC5nZXQoKSl9fSksZGlzYWJsZWQ6di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3YuZm4uaW5pdC5jYWxsKHRoaXMsZS5lbGVtZW50WzBdLHQsbiksdGhpcy53aWRnZXQ9ZX0scmVmcmVzaDpmdW5jdGlvbigpe3RoaXMud2lkZ2V0LmVuYWJsZSYmdGhpcy53aWRnZXQuZW5hYmxlKCF0aGlzLmJpbmRpbmdzLmRpc2FibGVkLmdldCgpKX19KSxzb3VyY2U6bihcInNvdXJjZVwiLFwiZGF0YVNvdXJjZVwiLFwic2V0RGF0YVNvdXJjZVwiKSx2YWx1ZTp2LmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4saSl7di5mbi5pbml0LmNhbGwodGhpcyx0LmVsZW1lbnRbMF0sbixpKSx0aGlzLndpZGdldD10LHRoaXMuX2NoYW5nZT1lLnByb3h5KHRoaXMuY2hhbmdlLHRoaXMpLHRoaXMud2lkZ2V0LmZpcnN0KEIsdGhpcy5fY2hhbmdlKTt2YXIgcj10aGlzLmJpbmRpbmdzLnZhbHVlLmdldCgpO3RoaXMuX3ZhbHVlSXNPYnNlcnZhYmxlT2JqZWN0PSFpLnZhbHVlUHJpbWl0aXZlJiYobnVsbD09cnx8ciBpbnN0YW5jZW9mIFMpLHRoaXMuX3ZhbHVlSXNPYnNlcnZhYmxlQXJyYXk9ciBpbnN0YW5jZW9mIFQsdGhpcy5faW5pdENoYW5nZT0hMX0sY2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixvLGEscz10aGlzLndpZGdldC52YWx1ZSgpLGw9dGhpcy5vcHRpb25zLmRhdGFWYWx1ZUZpZWxkfHx0aGlzLm9wdGlvbnMuZGF0YVRleHRGaWVsZCxjPVwiW29iamVjdCBBcnJheV1cIj09PUQuY2FsbChzKSxkPXRoaXMuX3ZhbHVlSXNPYnNlcnZhYmxlT2JqZWN0LHU9W107aWYodGhpcy5faW5pdENoYW5nZT0hMCxsKWlmKHRoaXMuYmluZGluZ3Muc291cmNlJiYoYT10aGlzLmJpbmRpbmdzLnNvdXJjZS5nZXQoKSksXCJcIj09PXMmJihkfHx0aGlzLm9wdGlvbnMudmFsdWVQcmltaXRpdmUpKXM9bnVsbDtlbHNle2ZvcigoIWF8fGEgaW5zdGFuY2VvZiB4LmRhdGEuRGF0YVNvdXJjZSkmJihhPXRoaXMud2lkZ2V0LmRhdGFTb3VyY2UudmlldygpKSxjJiYodD1zLmxlbmd0aCx1PXMuc2xpY2UoMCkpLHI9MCxvPWEubGVuZ3RoO28+cjtyKyspaWYobj1hW3JdLGk9bi5nZXQobCksYyl7Zm9yKGU9MDt0PmU7ZSsrKWlmKGk9PXVbZV0pe3VbZV09bjticmVha319ZWxzZSBpZihpPT1zKXtzPWQ/bjppO2JyZWFrfXVbMF0mJihzPXRoaXMuX3ZhbHVlSXNPYnNlcnZhYmxlQXJyYXk/dTpkfHwhbD91WzBdOnVbMF0uZ2V0KGwpKX10aGlzLmJpbmRpbmdzLnZhbHVlLnNldChzKSx0aGlzLl9pbml0Q2hhbmdlPSExfSxyZWZyZXNoOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2luaXRDaGFuZ2Upe3ZhciBlLG49dGhpcy5vcHRpb25zLmRhdGFWYWx1ZUZpZWxkfHx0aGlzLm9wdGlvbnMuZGF0YVRleHRGaWVsZCxpPXRoaXMuYmluZGluZ3MudmFsdWUuZ2V0KCkscj0wLG89W107aWYoaT09PXQmJihpPW51bGwpLG4paWYoaSBpbnN0YW5jZW9mIFQpe2ZvcihlPWkubGVuZ3RoO2U+cjtyKyspb1tyXT1pW3JdLmdldChuKTtpPW99ZWxzZSBpIGluc3RhbmNlb2YgUyYmKGk9aS5nZXQobikpO3RoaXMud2lkZ2V0LnZhbHVlKGkpfXRoaXMuX2luaXRDaGFuZ2U9ITF9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLndpZGdldC51bmJpbmQoQix0aGlzLl9jaGFuZ2UpfX0pLGdhbnR0OntkZXBlbmRlbmNpZXM6bihcImRlcGVuZGVuY2llc1wiLFwiZGVwZW5kZW5jaWVzXCIsXCJzZXREZXBlbmRlbmNpZXNEYXRhU291cmNlXCIpfSxtdWx0aXNlbGVjdDp7dmFsdWU6di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuLGkpe3YuZm4uaW5pdC5jYWxsKHRoaXMsdC5lbGVtZW50WzBdLG4saSksdGhpcy53aWRnZXQ9dCx0aGlzLl9jaGFuZ2U9ZS5wcm94eSh0aGlzLmNoYW5nZSx0aGlzKSx0aGlzLndpZGdldC5maXJzdChCLHRoaXMuX2NoYW5nZSksdGhpcy5faW5pdENoYW5nZT0hMX0sY2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixvLGEscyxsLGM9dGhpcyxkPWMuYmluZGluZ3NbUF0uZ2V0KCksdT1jLm9wdGlvbnMudmFsdWVQcmltaXRpdmUsaD11P2Mud2lkZ2V0LnZhbHVlKCk6Yy53aWRnZXQuZGF0YUl0ZW1zKCkscD10aGlzLm9wdGlvbnMuZGF0YVZhbHVlRmllbGR8fHRoaXMub3B0aW9ucy5kYXRhVGV4dEZpZWxkO2lmKGg9aC5zbGljZSgwKSxjLl9pbml0Q2hhbmdlPSEwLGQgaW5zdGFuY2VvZiBUKXtmb3IoZT1bXSx0PWgubGVuZ3RoLG49MCxpPTAscj1kW25dLG89ITE7cjspe2ZvcihsPSExLGk9MDt0Pmk7aSsrKWlmKHU/bz1oW2ldPT1yOihzPWhbaV0scz1zLmdldD9zLmdldChwKTpzLG89cz09KHIuZ2V0P3IuZ2V0KHApOnIpKSxvKXtoLnNwbGljZShpLDEpLHQtPTEsbD0hMDticmVha31sP24rPTE6KGUucHVzaChyKSxfKGQsbiwxKSxhPW4pLHI9ZFtuXX1fKGQsZC5sZW5ndGgsMCxoKSxlLmxlbmd0aCYmZC50cmlnZ2VyKFwiY2hhbmdlXCIse2FjdGlvbjpcInJlbW92ZVwiLGl0ZW1zOmUsaW5kZXg6YX0pLGgubGVuZ3RoJiZkLnRyaWdnZXIoXCJjaGFuZ2VcIix7YWN0aW9uOlwiYWRkXCIsaXRlbXM6aCxpbmRleDpkLmxlbmd0aC0xfSl9ZWxzZSBjLmJpbmRpbmdzW1BdLnNldChoKTtjLl9pbml0Q2hhbmdlPSExfSxyZWZyZXNoOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2luaXRDaGFuZ2Upe3ZhciBlLG4saT10aGlzLm9wdGlvbnMuZGF0YVZhbHVlRmllbGR8fHRoaXMub3B0aW9ucy5kYXRhVGV4dEZpZWxkLHI9dGhpcy5iaW5kaW5ncy52YWx1ZS5nZXQoKSxvPTAsYT1bXTtpZihyPT09dCYmKHI9bnVsbCksaSlpZihyIGluc3RhbmNlb2YgVCl7Zm9yKGU9ci5sZW5ndGg7ZT5vO28rKyluPXJbb10sYVtvXT1uLmdldD9uLmdldChpKTpuO3I9YX1lbHNlIHIgaW5zdGFuY2VvZiBTJiYocj1yLmdldChpKSk7dGhpcy53aWRnZXQudmFsdWUocil9fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy53aWRnZXQudW5iaW5kKEIsdGhpcy5fY2hhbmdlKX19KX0sc2NoZWR1bGVyOntzb3VyY2U6bihcInNvdXJjZVwiLFwiZGF0YVNvdXJjZVwiLFwic2V0RGF0YVNvdXJjZVwiKS5leHRlbmQoe2RhdGFCb3VuZDpmdW5jdGlvbihlKXt7dmFyIHQsbixpLHIsbz10aGlzLndpZGdldCxzPW8udmlldygpLGw9ZS5hZGRlZEl0ZW1zfHxvLml0ZW1zKCksYz1vLmRhdGFTb3VyY2U7Yy5ncm91cCgpfHxbXX1pZihsLmxlbmd0aClmb3IoaT1lLmFkZGVkRGF0YUl0ZW1zfHxjLmV4cGFuZChzLnN0YXJ0RGF0ZSgpLHMuZW5kRGF0ZSgpKSxyPXRoaXMuYmluZGluZ3Muc291cmNlLl9wYXJlbnRzKCksdD0wLG49aS5sZW5ndGg7bj50O3QrKylhKGxbdF0saVt0XSx0aGlzLl9ucyhlLm5zKSxbaVt0XV0uY29uY2F0KHIpKX19KX19LF89ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbyxhLHMsbDtpZihpPWl8fFtdLG49bnx8MCxyPWkubGVuZ3RoLG89ZS5sZW5ndGgsYT1bXS5zbGljZS5jYWxsKGUsdCtuKSxzPWEubGVuZ3RoLHIpe2ZvcihyPXQrcixsPTA7cj50O3QrKyllW3RdPWlbbF0sbCsrO2UubGVuZ3RoPXJ9ZWxzZSBpZihuKWZvcihlLmxlbmd0aD10LG4rPXQ7bj50OylkZWxldGUgZVstLW5dO2lmKHMpe2ZvcihzPXQrcyxsPTA7cz50O3QrKyllW3RdPWFbbF0sbCsrO2UubGVuZ3RoPXN9Zm9yKHQ9ZS5sZW5ndGg7bz50OylkZWxldGUgZVt0XSx0Kyt9LHk9RS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLnRhcmdldD1lLHRoaXMub3B0aW9ucz10LHRoaXMudG9EZXN0cm95PVtdfSxiaW5kOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG89dGhpcy50YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxhPUFbb118fHt9O2Zvcih0IGluIGUpdD09UD9uPSEwOnQ9PUk/aT0hMDp0PT16P3I9ITA6dGhpcy5hcHBseUJpbmRpbmcodCxlLGEpO2kmJnRoaXMuYXBwbHlCaW5kaW5nKEksZSxhKSxuJiZ0aGlzLmFwcGx5QmluZGluZyhQLGUsYSksciYmdGhpcy5hcHBseUJpbmRpbmcoeixlLGEpfSxhcHBseUJpbmRpbmc6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI9bltlXXx8QVtlXSxvPXRoaXMudG9EZXN0cm95LGE9dFtlXTtpZihyKWlmKHI9bmV3IHIodGhpcy50YXJnZXQsdCx0aGlzLm9wdGlvbnMpLG8ucHVzaChyKSxhIGluc3RhbmNlb2YgZilyLmJpbmQoYSksby5wdXNoKGEpO2Vsc2UgZm9yKGkgaW4gYSlyLmJpbmQoYSxpKSxvLnB1c2goYVtpXSk7ZWxzZSBpZihcInRlbXBsYXRlXCIhPT1lKXRocm93IEVycm9yKFwiVGhlIFwiK2UrXCIgYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBcIit0aGlzLnRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpK1wiIGVsZW1lbnRcIil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy50b0Rlc3Ryb3k7Zm9yKGU9MCx0PW4ubGVuZ3RoO3Q+ZTtlKyspbltlXS5kZXN0cm95KCl9fSksdz15LmV4dGVuZCh7YmluZDpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMsaT0hMSxyPSExLG89QS53aWRnZXRbbi50YXJnZXQub3B0aW9ucy5uYW1lLnRvTG93ZXJDYXNlKCldfHx7fTtmb3IodCBpbiBlKXQ9PVA/aT0hMDp0PT1JP3I9ITA6bi5hcHBseUJpbmRpbmcodCxlLG8pO3ImJm4uYXBwbHlCaW5kaW5nKEksZSxvKSxpJiZuLmFwcGx5QmluZGluZyhQLGUsbyl9LGFwcGx5QmluZGluZzpmdW5jdGlvbihlLHQsbil7dmFyIGkscj1uW2VdfHxBLndpZGdldFtlXSxvPXRoaXMudG9EZXN0cm95LGE9dFtlXTtpZighcil0aHJvdyBFcnJvcihcIlRoZSBcIitlK1wiIGJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgXCIrdGhpcy50YXJnZXQub3B0aW9ucy5uYW1lK1wiIHdpZGdldFwiKTtpZihyPW5ldyByKHRoaXMudGFyZ2V0LHQsdGhpcy50YXJnZXQub3B0aW9ucyksby5wdXNoKHIpLGEgaW5zdGFuY2VvZiBmKXIuYmluZChhKSxvLnB1c2goYSk7ZWxzZSBmb3IoaSBpbiBhKXIuYmluZChhLGkpLG8ucHVzaChhW2ldKX19KSxiPS9bQS1aYS16MC05X1xcLV0rOihcXHsoW159XSopXFx9fFteLH1dKykvZyxrPS9cXHMvZyx4LnVuYmluZD11LHguYmluZD1zLHguZGF0YS5iaW5kZXJzPUEseC5kYXRhLkJpbmRlcj12LHgubm90aWZ5PWgseC5vYnNlcnZhYmxlPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgU3x8KGU9bmV3IFMoZSkpLGV9LHgub2JzZXJ2YWJsZUhpZXJhcmNoeT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3ZhciBuLGk7Zm9yKG49MDtlLmxlbmd0aD5uO24rKyllW25dLl9pbml0Q2hpbGRyZW4oKSxpPWVbbl0uY2hpbGRyZW4saS5mZXRjaCgpLGVbbl0uaXRlbXM9aS5kYXRhKCksdChlW25dLml0ZW1zKX12YXIgbj14LmRhdGEuSGllcmFyY2hpY2FsRGF0YVNvdXJjZS5jcmVhdGUoZSk7cmV0dXJuIG4uZmV0Y2goKSx0KG4uZGF0YSgpKSxuLl9kYXRhLl9kYXRhU291cmNlPW4sbi5fZGF0YX19KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXtyZXR1cm4gcGFyc2VJbnQoZSwxMCl9ZnVuY3Rpb24gaShlLHQpe3JldHVybiBuKGUuY3NzKHQpKX1mdW5jdGlvbiByKGUpe3ZhciB0LG49W107Zm9yKHQgaW4gZSluLnB1c2godCk7cmV0dXJuIG59ZnVuY3Rpb24gbyhlKXtmb3IodmFyIHQgaW4gZSktMSE9VS5pbmRleE9mKHQpJiYtMT09Vy5pbmRleE9mKHQpJiZkZWxldGUgZVt0XTtyZXR1cm4gZX1mdW5jdGlvbiBhKGUsdCl7dmFyIG4saSxyLG8sYT1bXSxzPXt9O2ZvcihpIGluIHQpbj1pLnRvTG93ZXJDYXNlKCksbz1QJiYtMSE9VS5pbmRleE9mKG4pLCFFLmhhc0hXM0QmJm8mJi0xPT1XLmluZGV4T2Yobik/ZGVsZXRlIHRbaV06KHI9dFtpXSxvP2EucHVzaChpK1wiKFwiK3IrXCIpXCIpOnNbaV09cik7cmV0dXJuIGEubGVuZ3RoJiYoc1tzdF09YS5qb2luKFwiIFwiKSksc31mdW5jdGlvbiBzKGUsdCl7dmFyIGkscixvO3JldHVybiBQPyhpPWUuY3NzKHN0KSxpPT1LP1wic2NhbGVcIj09dD8xOjA6KHI9aS5tYXRjaChSZWdFeHAodCtcIlxcXFxzKlxcXFwoKFtcXFxcZFxcXFx3XFxcXC5dKylcIikpLG89MCxyP289bihyWzFdKToocj1pLm1hdGNoKEIpfHxbMCwwLDAsMCwwXSx0PXQudG9Mb3dlckNhc2UoKSxPLnRlc3QodCk/bz1wYXJzZUZsb2F0KHJbM10vclsyXSk6XCJ0cmFuc2xhdGV5XCI9PXQ/bz1wYXJzZUZsb2F0KHJbNF0vclsyXSk6XCJzY2FsZVwiPT10P289cGFyc2VGbG9hdChyWzJdKTpcInJvdGF0ZVwiPT10JiYobz1wYXJzZUZsb2F0KE1hdGguYXRhbjIoclsyXSxyWzFdKSkpKSxvKSk6cGFyc2VGbG9hdChlLmNzcyh0KSl9ZnVuY3Rpb24gbChlKXtyZXR1cm4gZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStlLnN1YnN0cmluZygxKX1mdW5jdGlvbiBjKGUsdCl7dmFyIG49Zi5leHRlbmQodCksaT1uLnByb3RvdHlwZS5kaXJlY3Rpb25zO1NbbChlKV09bixTLkVsZW1lbnQucHJvdG90eXBlW2VdPWZ1bmN0aW9uKGUsdCxpLHIpe3JldHVybiBuZXcgbih0aGlzLmVsZW1lbnQsZSx0LGkscil9LFQoaSxmdW5jdGlvbih0LGkpe1MuRWxlbWVudC5wcm90b3R5cGVbZStsKGkpXT1mdW5jdGlvbihlLHQscil7cmV0dXJuIG5ldyBuKHRoaXMuZWxlbWVudCxpLGUsdCxyKX19KX1mdW5jdGlvbiBkKGUsbixpLHIpe2MoZSx7ZGlyZWN0aW9uczptLHN0YXJ0VmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3N0YXJ0VmFsdWU9ZSx0aGlzfSxlbmRWYWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZW5kVmFsdWU9ZSx0aGlzfSxzaG91bGRIaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Nob3VsZEhpZGV9LHByZXBhcmU6ZnVuY3Rpb24oZSxvKXt2YXIgYSxzLGw9dGhpcyxjPVwib3V0XCI9PT10aGlzLl9kaXJlY3Rpb24sZD1sLmVsZW1lbnQuZGF0YShuKSx1PSEoaXNOYU4oZCl8fGQ9PWkpO2E9dT9kOnQhPT10aGlzLl9zdGFydFZhbHVlP3RoaXMuX3N0YXJ0VmFsdWU6Yz9pOnIscz10IT09dGhpcy5fZW5kVmFsdWU/dGhpcy5fZW5kVmFsdWU6Yz9yOmksdGhpcy5fcmV2ZXJzZT8oZVtuXT1zLG9bbl09YSk6KGVbbl09YSxvW25dPXMpLGwuX3Nob3VsZEhpZGU9b1tuXT09PXJ9fSl9ZnVuY3Rpb24gdShlLHQpe3ZhciBuPUMuZGlyZWN0aW9uc1t0XS52ZXJ0aWNhbCxpPWVbbj9KOlhdKCkvMitcInB4XCI7cmV0dXJuIF9bdF0ucmVwbGFjZShcIiRzaXplXCIsaSl9dmFyIGgscCxmLGcsbSx2LF8seSx3LGIsayx4LEM9d2luZG93LmtlbmRvLFM9Qy5lZmZlY3RzLFQ9ZS5lYWNoLEQ9ZS5leHRlbmQsQT1lLnByb3h5LEU9Qy5zdXBwb3J0LE09RS5icm93c2VyLFA9RS50cmFuc2Zvcm1zLEk9RS50cmFuc2l0aW9ucyx6PXtzY2FsZTowLHNjYWxleDowLHNjYWxleTowLHNjYWxlM2Q6MH0sRj17dHJhbnNsYXRlOjAsdHJhbnNsYXRleDowLHRyYW5zbGF0ZXk6MCx0cmFuc2xhdGUzZDowfSxSPXQhPT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuem9vbSYmIVAsQj0vbWF0cml4Mz9kP1xccypcXCguKixcXHMqKFtcXGRcXC5cXC1dKylcXHcqPyxcXHMqKFtcXGRcXC5cXC1dKylcXHcqPyxcXHMqKFtcXGRcXC5cXC1dKylcXHcqPyxcXHMqKFtcXGRcXC5cXC1dKylcXHcqPy9pLEw9L14oLT9bXFxkXFwuXFwtXSspP1tcXHdcXHNdKiw/XFxzKigtP1tcXGRcXC5cXC1dKyk/W1xcd1xcc10qL2ksTz0vdHJhbnNsYXRleD8kL2ksSD0vKHpvb218ZmFkZXxleHBhbmQpKFxcdyspLyxOPS8oem9vbXxmYWRlfGV4cGFuZCkvLFY9L1t4eV0kL2ksVT1bXCJwZXJzcGVjdGl2ZVwiLFwicm90YXRlXCIsXCJyb3RhdGV4XCIsXCJyb3RhdGV5XCIsXCJyb3RhdGV6XCIsXCJyb3RhdGUzZFwiLFwic2NhbGVcIixcInNjYWxleFwiLFwic2NhbGV5XCIsXCJzY2FsZXpcIixcInNjYWxlM2RcIixcInNrZXdcIixcInNrZXd4XCIsXCJza2V3eVwiLFwidHJhbnNsYXRlXCIsXCJ0cmFuc2xhdGV4XCIsXCJ0cmFuc2xhdGV5XCIsXCJ0cmFuc2xhdGV6XCIsXCJ0cmFuc2xhdGUzZFwiLFwibWF0cml4XCIsXCJtYXRyaXgzZFwiXSxXPVtcInJvdGF0ZVwiLFwic2NhbGVcIixcInNjYWxleFwiLFwic2NhbGV5XCIsXCJza2V3XCIsXCJza2V3eFwiLFwic2tld3lcIixcInRyYW5zbGF0ZVwiLFwidHJhbnNsYXRleFwiLFwidHJhbnNsYXRleVwiLFwibWF0cml4XCJdLGo9e3JvdGF0ZTpcImRlZ1wiLHNjYWxlOlwiXCIsc2tldzpcInB4XCIsdHJhbnNsYXRlOlwicHhcIn0sRz1QLmNzcyxxPU1hdGgucm91bmQsJD1cIlwiLFk9XCJweFwiLEs9XCJub25lXCIsUT1cImF1dG9cIixYPVwid2lkdGhcIixKPVwiaGVpZ2h0XCIsWj1cImhpZGRlblwiLGV0PVwib3JpZ2luXCIsdHQ9XCJhYm9ydElkXCIsbnQ9XCJvdmVyZmxvd1wiLGl0PVwidHJhbnNsYXRlXCIscnQ9XCJwb3NpdGlvblwiLG90PVwiY29tcGxldGVDYWxsYmFja1wiLGF0PUcrXCJ0cmFuc2l0aW9uXCIsc3Q9RytcInRyYW5zZm9ybVwiLGx0PUcrXCJiYWNrZmFjZS12aXNpYmlsaXR5XCIsY3Q9RytcInBlcnNwZWN0aXZlXCIsZHQ9XCIxNTAwcHhcIix1dD1cInBlcnNwZWN0aXZlKFwiK2R0K1wiKVwiLGh0PXtsZWZ0OntyZXZlcnNlOlwicmlnaHRcIixwcm9wZXJ0eTpcImxlZnRcIix0cmFuc2l0aW9uOlwidHJhbnNsYXRleFwiLHZlcnRpY2FsOiExLG1vZGlmaWVyOi0xfSxyaWdodDp7cmV2ZXJzZTpcImxlZnRcIixwcm9wZXJ0eTpcImxlZnRcIix0cmFuc2l0aW9uOlwidHJhbnNsYXRleFwiLHZlcnRpY2FsOiExLG1vZGlmaWVyOjF9LGRvd246e3JldmVyc2U6XCJ1cFwiLHByb3BlcnR5OlwidG9wXCIsdHJhbnNpdGlvbjpcInRyYW5zbGF0ZXlcIix2ZXJ0aWNhbDohMCxtb2RpZmllcjoxfSx1cDp7cmV2ZXJzZTpcImRvd25cIixwcm9wZXJ0eTpcInRvcFwiLHRyYW5zaXRpb246XCJ0cmFuc2xhdGV5XCIsdmVydGljYWw6ITAsbW9kaWZpZXI6LTF9LHRvcDp7cmV2ZXJzZTpcImJvdHRvbVwifSxib3R0b206e3JldmVyc2U6XCJ0b3BcIn0sXCJpblwiOntyZXZlcnNlOlwib3V0XCIsbW9kaWZpZXI6LTF9LG91dDp7cmV2ZXJzZTpcImluXCIsbW9kaWZpZXI6MX0sdmVydGljYWw6e3JldmVyc2U6XCJ2ZXJ0aWNhbFwifSxob3Jpem9udGFsOntyZXZlcnNlOlwiaG9yaXpvbnRhbFwifX07Qy5kaXJlY3Rpb25zPWh0LEQoZS5mbix7a2VuZG9TdG9wOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIEk/Uy5zdG9wUXVldWUodGhpcyxlfHwhMSx0fHwhMSk6dGhpcy5zdG9wKGUsdCl9fSksUCYmIUkmJihUKFcsZnVuY3Rpb24obixpKXtlLmZuW2ldPWZ1bmN0aW9uKG4pe2lmKHQ9PT1uKXJldHVybiBzKHRoaXMsaSk7dmFyIHI9ZSh0aGlzKVswXSxvPWkrXCIoXCIrbitqW2kucmVwbGFjZShWLFwiXCIpXStcIilcIjtyZXR1cm4tMT09ci5zdHlsZS5jc3NUZXh0LmluZGV4T2Yoc3QpP2UodGhpcykuY3NzKHN0LG8pOnIuc3R5bGUuY3NzVGV4dD1yLnN0eWxlLmNzc1RleHQucmVwbGFjZShSZWdFeHAoaStcIlxcXFwoLio/XFxcXClcIixcImlcIiksbyksdGhpc30sZS5meC5zdGVwW2ldPWZ1bmN0aW9uKHQpe2UodC5lbGVtKVtpXSh0Lm5vdyl9fSksaD1lLmZ4LnByb3RvdHlwZS5jdXIsZS5meC5wcm90b3R5cGUuY3VyPWZ1bmN0aW9uKCl7cmV0dXJuLTEhPVcuaW5kZXhPZih0aGlzLnByb3ApP3BhcnNlRmxvYXQoZSh0aGlzLmVsZW0pW3RoaXMucHJvcF0oKSk6aC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KSxDLnRvZ2dsZUNsYXNzPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB0JiYodD10LnNwbGl0KFwiIFwiKSxJJiYobj1EKHtleGNsdXNpdmU6XCJhbGxcIixkdXJhdGlvbjo0MDAsZWFzZTpcImVhc2Utb3V0XCJ9LG4pLGUuY3NzKGF0LG4uZXhjbHVzaXZlK1wiIFwiK24uZHVyYXRpb24rXCJtcyBcIituLmVhc2UpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLmNzcyhhdCxcIlwiKS5jc3MoSil9LG4uZHVyYXRpb24pKSxUKHQsZnVuY3Rpb24odCxuKXtlLnRvZ2dsZUNsYXNzKG4saSl9KSksZX0sQy5wYXJzZUVmZmVjdHM9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZT9UKGUuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGUsaSl7dmFyIHI9IU4udGVzdChpKSxvPWkucmVwbGFjZShILGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdCtcIjpcIituLnRvTG93ZXJDYXNlKCl9KSxhPW8uc3BsaXQoXCI6XCIpLHM9YVsxXSxsPXt9O2EubGVuZ3RoPjEmJihsLmRpcmVjdGlvbj10JiZyP2h0W3NdLnJldmVyc2U6cyksblthWzBdXT1sfSk6VChlLGZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMuZGlyZWN0aW9uO2kmJnQmJiFOLnRlc3QoZSkmJih0aGlzLmRpcmVjdGlvbj1odFtpXS5yZXZlcnNlKSxuW2VdPXRoaXN9KSxufSxJJiZEKFMse3RyYW5zaXRpb246ZnVuY3Rpb24odCxuLGkpe3ZhciBvLHMsbCxjLGQ9MCx1PXQuZGF0YShcImtleXNcIil8fFtdO2k9RCh7ZHVyYXRpb246MjAwLGVhc2U6XCJlYXNlLW91dFwiLGNvbXBsZXRlOm51bGwsZXhjbHVzaXZlOlwiYWxsXCJ9LGkpLGw9ITEsYz1mdW5jdGlvbigpe2x8fChsPSEwLHMmJihjbGVhclRpbWVvdXQocykscz1udWxsKSx0LnJlbW92ZURhdGEodHQpLmRlcXVldWUoKS5jc3MoYXQsXCJcIikuY3NzKGF0KSxpLmNvbXBsZXRlLmNhbGwodCkpfSxpLmR1cmF0aW9uPWUuZng/ZS5meC5zcGVlZHNbaS5kdXJhdGlvbl18fGkuZHVyYXRpb246aS5kdXJhdGlvbixvPWEodCxuKSxlLm1lcmdlKHUscihvKSksdC5kYXRhKFwia2V5c1wiLGUudW5pcXVlKHUpKS5oZWlnaHQoKSx0LmNzcyhhdCxpLmV4Y2x1c2l2ZStcIiBcIitpLmR1cmF0aW9uK1wibXMgXCIraS5lYXNlKS5jc3MoYXQpLHQuY3NzKG8pLmNzcyhzdCksSS5ldmVudCYmKHQub25lKEkuZXZlbnQsYyksMCE9PWkuZHVyYXRpb24mJihkPTUwMCkpLHM9c2V0VGltZW91dChjLGkuZHVyYXRpb24rZCksdC5kYXRhKHR0LHMpLHQuZGF0YShvdCxjKVxufSxzdG9wUXVldWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI9ZS5kYXRhKFwia2V5c1wiKSxvPSFuJiZyLGE9ZS5kYXRhKG90KTtyZXR1cm4gbyYmKGk9Qy5nZXRDb21wdXRlZFN0eWxlcyhlWzBdLHIpKSxhJiZhKCksbyYmZS5jc3MoaSksZS5yZW1vdmVEYXRhKFwia2V5c1wiKS5zdG9wKHQpfX0pLHA9Qy5DbGFzcy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO24uZWxlbWVudD1lLG4uZWZmZWN0cz1bXSxuLm9wdGlvbnM9dCxuLnJlc3RvcmU9W119LHJ1bjpmdW5jdGlvbih0KXt2YXIgbixpLHIscyxsLGMsZCx1PXRoaXMsaD10Lmxlbmd0aCxwPXUuZWxlbWVudCxmPXUub3B0aW9ucyxnPWUuRGVmZXJyZWQoKSxtPXt9LHY9e307Zm9yKHUuZWZmZWN0cz10LGcudGhlbihlLnByb3h5KHUsXCJjb21wbGV0ZVwiKSkscC5kYXRhKFwiYW5pbWF0aW5nXCIsITApLGk9MDtoPmk7aSsrKWZvcihuPXRbaV0sbi5zZXRSZXZlcnNlKGYucmV2ZXJzZSksbi5zZXRPcHRpb25zKGYpLHUuYWRkUmVzdG9yZVByb3BlcnRpZXMobi5yZXN0b3JlKSxuLnByZXBhcmUobSx2KSxsPW4uY2hpbGRyZW4oKSxyPTAsYz1sLmxlbmd0aDtjPnI7cisrKWxbcl0uZHVyYXRpb24oZi5kdXJhdGlvbikucnVuKCk7Zm9yKGQgaW4gZi5lZmZlY3RzKUQodixmLmVmZmVjdHNbZF0ucHJvcGVydGllcyk7Zm9yKHAuaXMoXCI6dmlzaWJsZVwiKXx8RChtLHtkaXNwbGF5OnAuZGF0YShcIm9sZGRpc3BsYXlcIil8fFwiYmxvY2tcIn0pLFAmJiFmLnJlc2V0JiYocz1wLmRhdGEoXCJ0YXJnZXRUcmFuc2Zvcm1cIikscyYmKG09RChzLG0pKSksbT1hKHAsbSksUCYmIUkmJihtPW8obSkpLHAuY3NzKG0pLmNzcyhzdCksaT0wO2g+aTtpKyspdFtpXS5zZXR1cCgpO3JldHVybiBmLmluaXQmJmYuaW5pdCgpLHAuZGF0YShcInRhcmdldFRyYW5zZm9ybVwiLHYpLFMuYW5pbWF0ZShwLHYsRCh7fSxmLHtjb21wbGV0ZTpnLnJlc29sdmV9KSksZy5wcm9taXNlKCl9LHN0b3A6ZnVuY3Rpb24oKXtlKHRoaXMuZWxlbWVudCkua2VuZG9TdG9wKCEwLCEwKX0sYWRkUmVzdG9yZVByb3BlcnRpZXM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49dGhpcy5lbGVtZW50LGk9MCxyPWUubGVuZ3RoO3I+aTtpKyspdD1lW2ldLHRoaXMucmVzdG9yZS5wdXNoKHQpLG4uZGF0YSh0KXx8bi5kYXRhKHQsbi5jc3ModCkpfSxyZXN0b3JlQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT10aGlzLmVsZW1lbnQ7Zm9yKGU9MCx0PXRoaXMucmVzdG9yZS5sZW5ndGg7dD5lO2UrKyluPXRoaXMucmVzdG9yZVtlXSxpLmNzcyhuLGkuZGF0YShuKSl9LGNvbXBsZXRlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPTAsaT10LmVsZW1lbnQscj10Lm9wdGlvbnMsbz10LmVmZmVjdHMsYT1vLmxlbmd0aDtmb3IoaS5yZW1vdmVEYXRhKFwiYW5pbWF0aW5nXCIpLmRlcXVldWUoKSxyLmhpZGUmJmkuZGF0YShcIm9sZGRpc3BsYXlcIixpLmNzcyhcImRpc3BsYXlcIikpLmhpZGUoKSx0aGlzLnJlc3RvcmVDYWxsYmFjaygpLFImJiFQJiZzZXRUaW1lb3V0KGUucHJveHkodGhpcyxcInJlc3RvcmVDYWxsYmFja1wiKSwwKTthPm47bisrKW9bbl0udGVhcmRvd24oKTtyLmNvbXBsZXRlQ2FsbGJhY2smJnIuY29tcGxldGVDYWxsYmFjayhpKX19KSxTLnByb21pc2U9ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbz1bXSxhPW5ldyBwKGUsdCkscz1DLnBhcnNlRWZmZWN0cyh0LmVmZmVjdHMpO3QuZWZmZWN0cz1zO2ZvcihyIGluIHMpbj1TW2wocildLG4mJihpPW5ldyBuKGUsc1tyXS5kaXJlY3Rpb24pLG8ucHVzaChpKSk7b1swXT9hLnJ1bihvKTooZS5pcyhcIjp2aXNpYmxlXCIpfHxlLmNzcyh7ZGlzcGxheTplLmRhdGEoXCJvbGRkaXNwbGF5XCIpfHxcImJsb2NrXCJ9KS5jc3MoXCJkaXNwbGF5XCIpLHQuaW5pdCYmdC5pbml0KCksZS5kZXF1ZXVlKCksYS5jb21wbGV0ZSgpKX0sRChTLHthbmltYXRlOmZ1bmN0aW9uKG4scixhKXt2YXIgcz1hLnRyYW5zaXRpb24hPT0hMTtkZWxldGUgYS50cmFuc2l0aW9uLEkmJlwidHJhbnNpdGlvblwiaW4gUyYmcz9TLnRyYW5zaXRpb24obixyLGEpOlA/bi5hbmltYXRlKG8ocikse3F1ZXVlOiExLHNob3c6ITEsaGlkZTohMSxkdXJhdGlvbjphLmR1cmF0aW9uLGNvbXBsZXRlOmEuY29tcGxldGV9KTpuLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1lKHRoaXMpLG89e307VChVLGZ1bmN0aW9uKGUsYSl7dmFyIHMsbCxjLGQsdSxoLHAsZj1yP3JbYV0rXCIgXCI6bnVsbDtmJiYobD1yLGEgaW4geiYmclthXSE9PXQ/KHM9Zi5tYXRjaChMKSxQJiZEKGwse3NjYWxlOitzWzBdfSkpOmEgaW4gRiYmclthXSE9PXQmJihjPW4uY3NzKHJ0KSxkPVwiYWJzb2x1dGVcIj09Y3x8XCJmaXhlZFwiPT1jLG4uZGF0YShpdCl8fChkP24uZGF0YShpdCx7dG9wOmkobixcInRvcFwiKXx8MCxsZWZ0OmkobixcImxlZnRcIil8fDAsYm90dG9tOmkobixcImJvdHRvbVwiKSxyaWdodDppKG4sXCJyaWdodFwiKX0pOm4uZGF0YShpdCx7dG9wOmkobixcIm1hcmdpblRvcFwiKXx8MCxsZWZ0OmkobixcIm1hcmdpbkxlZnRcIil8fDB9KSksdT1uLmRhdGEoaXQpLHM9Zi5tYXRjaChMKSxzJiYoaD1hPT1pdCtcInlcIj8wOitzWzFdLHA9YT09aXQrXCJ5XCI/K3NbMV06K3NbMl0sZD8oaXNOYU4odS5yaWdodCk/aXNOYU4oaCl8fEQobCx7bGVmdDp1LmxlZnQraH0pOmlzTmFOKGgpfHxEKGwse3JpZ2h0OnUucmlnaHQtaH0pLGlzTmFOKHUuYm90dG9tKT9pc05hTihwKXx8RChsLHt0b3A6dS50b3ArcH0pOmlzTmFOKHApfHxEKGwse2JvdHRvbTp1LmJvdHRvbS1wfSkpOihpc05hTihoKXx8RChsLHttYXJnaW5MZWZ0OnUubGVmdCtofSksaXNOYU4ocCl8fEQobCx7bWFyZ2luVG9wOnUudG9wK3B9KSkpKSwhUCYmXCJzY2FsZVwiIT1hJiZhIGluIGwmJmRlbGV0ZSBsW2FdLGwmJkQobyxsKSl9KSxNLm1zaWUmJmRlbGV0ZSBvLnNjYWxlLG4uYW5pbWF0ZShvLHtxdWV1ZTohMSxzaG93OiExLGhpZGU6ITEsZHVyYXRpb246YS5kdXJhdGlvbixjb21wbGV0ZTphLmNvbXBsZXRlfSl9KX19KSxTLmFuaW1hdGVkUHJvbWlzZT1TLnByb21pc2UsZj1DLkNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7bi5lbGVtZW50PWUsbi5fZGlyZWN0aW9uPXQsbi5vcHRpb25zPXt9LG4uX2FkZGl0aW9uYWxFZmZlY3RzPVtdLG4ucmVzdG9yZXx8KG4ucmVzdG9yZT1bXSl9LHJldmVyc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmV2ZXJzZT0hMCx0aGlzLnJ1bigpfSxwbGF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JldmVyc2U9ITEsdGhpcy5ydW4oKX0sYWRkOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9hZGRpdGlvbmFsRWZmZWN0cy5wdXNoKGUpLHRoaXN9LGRpcmVjdGlvbjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZGlyZWN0aW9uPWUsdGhpc30sZHVyYXRpb246ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2R1cmF0aW9uPWUsdGhpc30sY29tcG9zaXRlUnVuOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PW5ldyBwKGUuZWxlbWVudCx7cmV2ZXJzZTplLl9yZXZlcnNlLGR1cmF0aW9uOmUuX2R1cmF0aW9ufSksbj1lLl9hZGRpdGlvbmFsRWZmZWN0cy5jb25jYXQoW2VdKTtyZXR1cm4gdC5ydW4obil9LHJ1bjpmdW5jdGlvbigpe2lmKHRoaXMuX2FkZGl0aW9uYWxFZmZlY3RzJiZ0aGlzLl9hZGRpdGlvbmFsRWZmZWN0c1swXSlyZXR1cm4gdGhpcy5jb21wb3NpdGVSdW4oKTt2YXIgdCxuLGk9dGhpcyxyPWkuZWxlbWVudCxzPTAsbD1pLnJlc3RvcmUsYz1sLmxlbmd0aCxkPWUuRGVmZXJyZWQoKSx1PXt9LGg9e30scD1pLmNoaWxkcmVuKCksZj1wLmxlbmd0aDtmb3IoZC50aGVuKGUucHJveHkoaSxcIl9jb21wbGV0ZVwiKSksci5kYXRhKFwiYW5pbWF0aW5nXCIsITApLHM9MDtjPnM7cysrKXQ9bFtzXSxyLmRhdGEodCl8fHIuZGF0YSh0LHIuY3NzKHQpKTtmb3Iocz0wO2Y+cztzKyspcFtzXS5kdXJhdGlvbihpLl9kdXJhdGlvbikucnVuKCk7cmV0dXJuIGkucHJlcGFyZSh1LGgpLHIuaXMoXCI6dmlzaWJsZVwiKXx8RCh1LHtkaXNwbGF5OnIuZGF0YShcIm9sZGRpc3BsYXlcIil8fFwiYmxvY2tcIn0pLFAmJihuPXIuZGF0YShcInRhcmdldFRyYW5zZm9ybVwiKSxuJiYodT1EKG4sdSkpKSx1PWEocix1KSxQJiYhSSYmKHU9byh1KSksci5jc3ModSkuY3NzKHN0KSxpLnNldHVwKCksci5kYXRhKFwidGFyZ2V0VHJhbnNmb3JtXCIsaCksUy5hbmltYXRlKHIsaCx7ZHVyYXRpb246aS5fZHVyYXRpb24sY29tcGxldGU6ZC5yZXNvbHZlfSksZC5wcm9taXNlKCl9LHN0b3A6ZnVuY3Rpb24oKXt2YXIgdD0wLG49dGhpcy5jaGlsZHJlbigpLGk9bi5sZW5ndGg7Zm9yKHQ9MDtpPnQ7dCsrKW5bdF0uc3RvcCgpO3JldHVybiBlKHRoaXMuZWxlbWVudCkua2VuZG9TdG9wKCEwLCEwKSx0aGlzfSxyZXN0b3JlQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT10aGlzLmVsZW1lbnQ7Zm9yKGU9MCx0PXRoaXMucmVzdG9yZS5sZW5ndGg7dD5lO2UrKyluPXRoaXMucmVzdG9yZVtlXSxpLmNzcyhuLGkuZGF0YShuKSl9LF9jb21wbGV0ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LmVsZW1lbnQ7bi5yZW1vdmVEYXRhKFwiYW5pbWF0aW5nXCIpLmRlcXVldWUoKSx0LnJlc3RvcmVDYWxsYmFjaygpLHQuc2hvdWxkSGlkZSgpJiZuLmRhdGEoXCJvbGRkaXNwbGF5XCIsbi5jc3MoXCJkaXNwbGF5XCIpKS5oaWRlKCksUiYmIVAmJnNldFRpbWVvdXQoZS5wcm94eSh0LFwicmVzdG9yZUNhbGxiYWNrXCIpLDApLHQudGVhcmRvd24oKX0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXtEKCEwLHRoaXMub3B0aW9ucyxlKX0sY2hpbGRyZW46ZnVuY3Rpb24oKXtyZXR1cm5bXX0sc2hvdWxkSGlkZTplLm5vb3Asc2V0dXA6ZS5ub29wLHByZXBhcmU6ZS5ub29wLHRlYXJkb3duOmUubm9vcCxkaXJlY3Rpb25zOltdLHNldFJldmVyc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3JldmVyc2U9ZSx0aGlzfX0pLGc9W1wibGVmdFwiLFwicmlnaHRcIixcInVwXCIsXCJkb3duXCJdLG09W1wiaW5cIixcIm91dFwiXSxjKFwic2xpZGVJblwiLHtkaXJlY3Rpb25zOmcsZGl2aXNvcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vcHRpb25zLmRpdmlzb3I9ZSx0aGlzfSxwcmVwYXJlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzLHI9aS5lbGVtZW50LG89aHRbaS5fZGlyZWN0aW9uXSxhPS1vLm1vZGlmaWVyKihvLnZlcnRpY2FsP3Iub3V0ZXJIZWlnaHQoKTpyLm91dGVyV2lkdGgoKSkscz1hLyhpLm9wdGlvbnMmJmkub3B0aW9ucy5kaXZpc29yfHwxKStZLGw9XCIwcHhcIjtpLl9yZXZlcnNlJiYobj1lLGU9dCx0PW4pLFA/KGVbby50cmFuc2l0aW9uXT1zLHRbby50cmFuc2l0aW9uXT1sKTooZVtvLnByb3BlcnR5XT1zLHRbby5wcm9wZXJ0eV09bCl9fSksYyhcInRpbGVcIix7ZGlyZWN0aW9uczpnLGluaXQ6ZnVuY3Rpb24oZSx0LG4pe2YucHJvdG90eXBlLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy5vcHRpb25zPXtwcmV2aW91czpufX0scHJldmlvdXNEaXZpc29yOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9wdGlvbnMucHJldmlvdXNEaXZpc29yPWUsdGhpc30sY2hpbGRyZW46ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5fcmV2ZXJzZSxuPWUub3B0aW9ucy5wcmV2aW91cyxpPWUub3B0aW9ucy5wcmV2aW91c0Rpdmlzb3J8fDEscj1lLl9kaXJlY3Rpb24sbz1bQy5meChlLmVsZW1lbnQpLnNsaWRlSW4ocikuc2V0UmV2ZXJzZSh0KV07cmV0dXJuIG4mJm8ucHVzaChDLmZ4KG4pLnNsaWRlSW4oaHRbcl0ucmV2ZXJzZSkuZGl2aXNvcihpKS5zZXRSZXZlcnNlKCF0KSksb319KSxkKFwiZmFkZVwiLFwib3BhY2l0eVwiLDEsMCksZChcInpvb21cIixcInNjYWxlXCIsMSwuMDEpLGMoXCJzbGlkZU1hcmdpblwiLHtwcmVwYXJlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzLHI9aS5lbGVtZW50LG89aS5vcHRpb25zLGE9ci5kYXRhKGV0KSxzPW8ub2Zmc2V0LGw9aS5fcmV2ZXJzZTtsfHxudWxsIT09YXx8ci5kYXRhKGV0LHBhcnNlRmxvYXQoci5jc3MoXCJtYXJnaW4tXCIrby5heGlzKSkpLG49ci5kYXRhKGV0KXx8MCx0W1wibWFyZ2luLVwiK28uYXhpc109bD9uOm4rc319KSxjKFwic2xpZGVUb1wiLHtwcmVwYXJlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPW4uZWxlbWVudCxyPW4ub3B0aW9ucyxvPXIub2Zmc2V0LnNwbGl0KFwiLFwiKSxhPW4uX3JldmVyc2U7UD8odC50cmFuc2xhdGV4PWE/MDpvWzBdLHQudHJhbnNsYXRleT1hPzA6b1sxXSk6KHQubGVmdD1hPzA6b1swXSx0LnRvcD1hPzA6b1sxXSksaS5jc3MoXCJsZWZ0XCIpfX0pLGMoXCJleHBhbmRcIix7ZGlyZWN0aW9uczpbXCJob3Jpem9udGFsXCIsXCJ2ZXJ0aWNhbFwiXSxyZXN0b3JlOltudF0scHJlcGFyZTpmdW5jdGlvbihlLG4pe3ZhciBpPXRoaXMscj1pLmVsZW1lbnQsbz1pLm9wdGlvbnMsYT1pLl9yZXZlcnNlLHM9XCJ2ZXJ0aWNhbFwiPT09aS5fZGlyZWN0aW9uP0o6WCxsPXJbMF0uc3R5bGVbc10sYz1yLmRhdGEocyksZD1wYXJzZUZsb2F0KGN8fGwpLHU9cShyLmNzcyhzLFEpW3NdKCkpO2Uub3ZlcmZsb3c9WixkPW8mJm8ucmVzZXQ/dXx8ZDpkfHx1LG5bc109KGE/MDpkKStZLGVbc109KGE/ZDowKStZLGM9PT10JiZyLmRhdGEocyxsKX0sc2hvdWxkSGlkZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXZlcnNlfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmVsZW1lbnQsbj1cInZlcnRpY2FsXCI9PT1lLl9kaXJlY3Rpb24/SjpYLGk9dC5kYXRhKG4pOyhpPT1RfHxpPT09JCkmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LmNzcyhuLFEpLmNzcyhuKX0sMCl9fSksdj17cG9zaXRpb246XCJhYnNvbHV0ZVwiLG1hcmdpbkxlZnQ6MCxtYXJnaW5Ub3A6MCxzY2FsZToxfSxjKFwidHJhbnNmZXJcIix7aW5pdDpmdW5jdGlvbihlLHQpe3RoaXMuZWxlbWVudD1lLHRoaXMub3B0aW9ucz17dGFyZ2V0OnR9LHRoaXMucmVzdG9yZT1bXX0sc2V0dXA6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSl9LHByZXBhcmU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9bi5lbGVtZW50LHI9Uy5ib3goaSksbz1TLmJveChuLm9wdGlvbnMudGFyZ2V0KSxhPXMoaSxcInNjYWxlXCIpLGw9Uy5maWxsU2NhbGUobyxyKSxjPVMudHJhbnNmb3JtT3JpZ2luKG8scik7RChlLHYpLHQuc2NhbGU9MSxpLmNzcyhzdCxcInNjYWxlKDEpXCIpLmNzcyhzdCksaS5jc3Moc3QsXCJzY2FsZShcIithK1wiKVwiKSxlLnRvcD1yLnRvcCxlLmxlZnQ9ci5sZWZ0LGUudHJhbnNmb3JtT3JpZ2luPWMueCtZK1wiIFwiK2MueStZLG4uX3JldmVyc2U/ZS5zY2FsZT1sOnQuc2NhbGU9bH19KSxfPXt0b3A6XCJyZWN0KGF1dG8gYXV0byAkc2l6ZSBhdXRvKVwiLGJvdHRvbTpcInJlY3QoJHNpemUgYXV0byBhdXRvIGF1dG8pXCIsbGVmdDpcInJlY3QoYXV0byAkc2l6ZSBhdXRvIGF1dG8pXCIscmlnaHQ6XCJyZWN0KGF1dG8gYXV0byBhdXRvICRzaXplKVwifSx5PXt0b3A6e3N0YXJ0Olwicm90YXRleCgwZGVnKVwiLGVuZDpcInJvdGF0ZXgoMTgwZGVnKVwifSxib3R0b206e3N0YXJ0Olwicm90YXRleCgtMTgwZGVnKVwiLGVuZDpcInJvdGF0ZXgoMGRlZylcIn0sbGVmdDp7c3RhcnQ6XCJyb3RhdGV5KDBkZWcpXCIsZW5kOlwicm90YXRleSgtMTgwZGVnKVwifSxyaWdodDp7c3RhcnQ6XCJyb3RhdGV5KDE4MGRlZylcIixlbmQ6XCJyb3RhdGV5KDBkZWcpXCJ9fSxjKFwidHVybmluZ1BhZ2VcIix7ZGlyZWN0aW9uczpnLGluaXQ6ZnVuY3Rpb24oZSx0LG4pe2YucHJvdG90eXBlLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy5fY29udGFpbmVyPW59LHByZXBhcmU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9bi5fcmV2ZXJzZSxyPWk/aHRbbi5fZGlyZWN0aW9uXS5yZXZlcnNlOm4uX2RpcmVjdGlvbixvPXlbcl07ZS56SW5kZXg9MSxuLl9jbGlwSW5IYWxmJiYoZS5jbGlwPXUobi5fY29udGFpbmVyLEMuZGlyZWN0aW9uc1tyXS5yZXZlcnNlKSksZVtsdF09Wix0W3N0XT11dCsoaT9vLnN0YXJ0Om8uZW5kKSxlW3N0XT11dCsoaT9vLmVuZDpvLnN0YXJ0KX0sc2V0dXA6ZnVuY3Rpb24oKXt0aGlzLl9jb250YWluZXIuYXBwZW5kKHRoaXMuZWxlbWVudCl9LGZhY2U6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2ZhY2U9ZSx0aGlzfSxzaG91bGRIaWRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX3JldmVyc2Usbj1lLl9mYWNlO3JldHVybiB0JiYhbnx8IXQmJm59LGNsaXBJbkhhbGY6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NsaXBJbkhhbGY9ZSx0aGlzfSx0ZW1wb3Jhcnk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50LmFkZENsYXNzKFwidGVtcC1wYWdlXCIpLHRoaXN9fSksYyhcInN0YXRpY1BhZ2VcIix7ZGlyZWN0aW9uczpnLGluaXQ6ZnVuY3Rpb24oZSx0LG4pe2YucHJvdG90eXBlLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy5fY29udGFpbmVyPW59LHJlc3RvcmU6W1wiY2xpcFwiXSxwcmVwYXJlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPW4uX3JldmVyc2U/aHRbbi5fZGlyZWN0aW9uXS5yZXZlcnNlOm4uX2RpcmVjdGlvbjtlLmNsaXA9dShuLl9jb250YWluZXIsaSksZS5vcGFjaXR5PS45OTksdC5vcGFjaXR5PTF9LHNob3VsZEhpZGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5fcmV2ZXJzZSxuPWUuX2ZhY2U7cmV0dXJuIHQmJiFufHwhdCYmbn0sZmFjZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZmFjZT1lLHRoaXN9fSksYyhcInBhZ2V0dXJuXCIse2RpcmVjdGlvbnM6W1wiaG9yaXpvbnRhbFwiLFwidmVydGljYWxcIl0saW5pdDpmdW5jdGlvbihlLHQsbixpKXtmLnByb3RvdHlwZS5pbml0LmNhbGwodGhpcyxlLHQpLHRoaXMub3B0aW9ucz17fSx0aGlzLm9wdGlvbnMuZmFjZT1uLHRoaXMub3B0aW9ucy5iYWNrPWl9LGNoaWxkcmVuOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLG49dC5vcHRpb25zLGk9XCJob3Jpem9udGFsXCI9PT10Ll9kaXJlY3Rpb24/XCJsZWZ0XCI6XCJ0b3BcIixyPUMuZGlyZWN0aW9uc1tpXS5yZXZlcnNlLG89dC5fcmV2ZXJzZSxhPW4uZmFjZS5jbG9uZSghMCkucmVtb3ZlQXR0cihcImlkXCIpLHM9bi5iYWNrLmNsb25lKCEwKS5yZW1vdmVBdHRyKFwiaWRcIiksbD10LmVsZW1lbnQ7cmV0dXJuIG8mJihlPWksaT1yLHI9ZSksW0MuZngobi5mYWNlKS5zdGF0aWNQYWdlKGksbCkuZmFjZSghMCkuc2V0UmV2ZXJzZShvKSxDLmZ4KG4uYmFjaykuc3RhdGljUGFnZShyLGwpLnNldFJldmVyc2UobyksQy5meChhKS50dXJuaW5nUGFnZShpLGwpLmZhY2UoITApLmNsaXBJbkhhbGYoITApLnRlbXBvcmFyeSgpLnNldFJldmVyc2UobyksQy5meChzKS50dXJuaW5nUGFnZShyLGwpLmNsaXBJbkhhbGYoITApLnRlbXBvcmFyeSgpLnNldFJldmVyc2UobyldfSxwcmVwYXJlOmZ1bmN0aW9uKGUsdCl7ZVtjdF09ZHQsZS50cmFuc2Zvcm1TdHlsZT1cInByZXNlcnZlLTNkXCIsZS5vcGFjaXR5PS45OTksdC5vcGFjaXR5PTF9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LmZpbmQoXCIudGVtcC1wYWdlXCIpLnJlbW92ZSgpfX0pLGMoXCJmbGlwXCIse2RpcmVjdGlvbnM6W1wiaG9yaXpvbnRhbFwiLFwidmVydGljYWxcIl0saW5pdDpmdW5jdGlvbihlLHQsbixpKXtmLnByb3RvdHlwZS5pbml0LmNhbGwodGhpcyxlLHQpLHRoaXMub3B0aW9ucz17fSx0aGlzLm9wdGlvbnMuZmFjZT1uLHRoaXMub3B0aW9ucy5iYWNrPWl9LGNoaWxkcmVuOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLG49dC5vcHRpb25zLGk9XCJob3Jpem9udGFsXCI9PT10Ll9kaXJlY3Rpb24/XCJsZWZ0XCI6XCJ0b3BcIixyPUMuZGlyZWN0aW9uc1tpXS5yZXZlcnNlLG89dC5fcmV2ZXJzZSxhPXQuZWxlbWVudDtyZXR1cm4gbyYmKGU9aSxpPXIscj1lKSxbQy5meChuLmZhY2UpLnR1cm5pbmdQYWdlKGksYSkuZmFjZSghMCkuc2V0UmV2ZXJzZShvKSxDLmZ4KG4uYmFjaykudHVybmluZ1BhZ2UocixhKS5zZXRSZXZlcnNlKG8pXX0scHJlcGFyZTpmdW5jdGlvbihlKXtlW2N0XT1kdCxlLnRyYW5zZm9ybVN0eWxlPVwicHJlc2VydmUtM2RcIn19KSx3PSFFLm1vYmlsZU9TLmFuZHJvaWQsYj1cIi5rbS10b3VjaC1zY3JvbGxiYXIsIC5rbS1hY3Rpb25zaGVldC13cmFwcGVyXCIsYyhcInJlcGxhY2VcIix7X2JlZm9yZTplLm5vb3AsX2FmdGVyOmUubm9vcCxpbml0OmZ1bmN0aW9uKHQsbixpKXtmLnByb3RvdHlwZS5pbml0LmNhbGwodGhpcyx0KSx0aGlzLl9wcmV2aW91cz1lKG4pLHRoaXMuX3RyYW5zaXRpb25DbGFzcz1pfSxkdXJhdGlvbjpmdW5jdGlvbigpe3Rocm93IEVycm9yKFwiVGhlIHJlcGxhY2UgZWZmZWN0IGRvZXMgbm90IHN1cHBvcnQgZHVyYXRpb24gc2V0dGluZzsgdGhlIGVmZmVjdCBkdXJhdGlvbiBtYXkgYmUgY3VzdG9taXplZCB0aHJvdWdoIHRoZSB0cmFuc2l0aW9uIGNsYXNzIHJ1bGVcIil9LGJlZm9yZVRyYW5zaXRpb246ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2JlZm9yZT1lLHRoaXN9LGFmdGVyVHJhbnNpdGlvbjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYWZ0ZXI9ZSx0aGlzfSxfYm90aDpmdW5jdGlvbigpe3JldHVybiBlKCkuYWRkKHRoaXMuX2VsZW1lbnQpLmFkZCh0aGlzLl9wcmV2aW91cyl9LF9jb250YWluZXJDbGFzczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2RpcmVjdGlvbix0PVwiay1meCBrLWZ4LXN0YXJ0IGstZngtXCIrdGhpcy5fdHJhbnNpdGlvbkNsYXNzO3JldHVybiBlJiYodCs9XCIgay1meC1cIitlKSx0aGlzLl9yZXZlcnNlJiYodCs9XCIgay1meC1yZXZlcnNlXCIpLHR9LGNvbXBsZXRlOmZ1bmN0aW9uKHQpe2lmKCEoIXRoaXMuZGVmZXJyZWR8fHQmJmUodC50YXJnZXQpLmlzKGIpKSl7dmFyIG49dGhpcy5jb250YWluZXI7bi5yZW1vdmVDbGFzcyhcImstZngtZW5kXCIpLnJlbW92ZUNsYXNzKHRoaXMuX2NvbnRhaW5lckNsYXNzKCkpLm9mZihJLmV2ZW50LHRoaXMuY29tcGxldGVQcm94eSksdGhpcy5fcHJldmlvdXMuaGlkZSgpLnJlbW92ZUNsYXNzKFwiay1meC1jdXJyZW50XCIpLHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhcImstZngtbmV4dFwiKSx3JiZuLmNzcyhudCxcIlwiKSx0aGlzLmlzQWJzb2x1dGV8fHRoaXMuX2JvdGgoKS5jc3MocnQsXCJcIiksdGhpcy5kZWZlcnJlZC5yZXNvbHZlKCksZGVsZXRlIHRoaXMuZGVmZXJyZWR9fSxydW46ZnVuY3Rpb24oKXtpZih0aGlzLl9hZGRpdGlvbmFsRWZmZWN0cyYmdGhpcy5fYWRkaXRpb25hbEVmZmVjdHNbMF0pcmV0dXJuIHRoaXMuY29tcG9zaXRlUnVuKCk7dmFyIHQsbj10aGlzLGk9bi5lbGVtZW50LHI9bi5fcHJldmlvdXMsbz1pLnBhcmVudHMoKS5maWx0ZXIoci5wYXJlbnRzKCkpLmZpcnN0KCksYT1uLl9ib3RoKCkscz1lLkRlZmVycmVkKCksbD1pLmNzcyhydCk7cmV0dXJuIG8ubGVuZ3RofHwobz1pLnBhcmVudCgpKSx0aGlzLmNvbnRhaW5lcj1vLHRoaXMuZGVmZXJyZWQ9cyx0aGlzLmlzQWJzb2x1dGU9XCJhYnNvbHV0ZVwiPT1sLHRoaXMuaXNBYnNvbHV0ZXx8YS5jc3MocnQsXCJhYnNvbHV0ZVwiKSx3JiYodD1vLmNzcyhudCksby5jc3MobnQsXCJoaWRkZW5cIikpLEk/KGkuYWRkQ2xhc3MoXCJrLWZ4LWhpZGRlblwiKSxvLmFkZENsYXNzKHRoaXMuX2NvbnRhaW5lckNsYXNzKCkpLHRoaXMuY29tcGxldGVQcm94eT1lLnByb3h5KHRoaXMsXCJjb21wbGV0ZVwiKSxvLm9uKEkuZXZlbnQsdGhpcy5jb21wbGV0ZVByb3h5KSxDLmFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7aS5yZW1vdmVDbGFzcyhcImstZngtaGlkZGVuXCIpLmFkZENsYXNzKFwiay1meC1uZXh0XCIpLHIuY3NzKFwiZGlzcGxheVwiLFwiXCIpLmFkZENsYXNzKFwiay1meC1jdXJyZW50XCIpLG4uX2JlZm9yZShyLGkpLEMuYW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXtvLnJlbW92ZUNsYXNzKFwiay1meC1zdGFydFwiKS5hZGRDbGFzcyhcImstZngtZW5kXCIpLG4uX2FmdGVyKHIsaSl9KX0pKTp0aGlzLmNvbXBsZXRlKCkscy5wcm9taXNlKCl9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLmNvbXBsZXRlKCl9fSksaz1DLkNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fdGlja1Byb3h5PUEoZS5fdGljayxlKSxlLl9zdGFydGVkPSExfSx0aWNrOmUubm9vcCxkb25lOmUubm9vcCxvbkVuZDplLm5vb3Asb25DYW5jZWw6ZS5ub29wLHN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5lbmFibGVkKCkmJih0aGlzLmRvbmUoKT90aGlzLm9uRW5kKCk6KHRoaXMuX3N0YXJ0ZWQ9ITAsQy5hbmltYXRpb25GcmFtZSh0aGlzLl90aWNrUHJveHkpKSl9LGVuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5fc3RhcnRlZD0hMSx0aGlzLm9uQ2FuY2VsKCl9LF90aWNrOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9zdGFydGVkJiYoZS50aWNrKCksZS5kb25lKCk/KGUuX3N0YXJ0ZWQ9ITEsZS5vbkVuZCgpKTpDLmFuaW1hdGlvbkZyYW1lKGUuX3RpY2tQcm94eSkpfX0pLHg9ay5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztEKHQsZSksay5mbi5pbml0LmNhbGwodCl9LGRvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aW1lUGFzc2VkKCk+PXRoaXMuZHVyYXRpb259LHRpbWVQYXNzZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5taW4odGhpcy5kdXJhdGlvbixuZXcgRGF0ZS10aGlzLnN0YXJ0RGF0ZSl9LG1vdmVUbzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5tb3ZhYmxlO3QuaW5pdGlhbD1uW3QuYXhpc10sdC5kZWx0YT1lLmxvY2F0aW9uLXQuaW5pdGlhbCx0LmR1cmF0aW9uPVwibnVtYmVyXCI9PXR5cGVvZiBlLmR1cmF0aW9uP2UuZHVyYXRpb246MzAwLHQudGljaz10Ll9lYXNlUHJveHkoZS5lYXNlKSx0LnN0YXJ0RGF0ZT1uZXcgRGF0ZSx0LnN0YXJ0KCl9LF9lYXNlUHJveHk6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gZnVuY3Rpb24oKXt0Lm1vdmFibGUubW92ZUF4aXModC5heGlzLGUodC50aW1lUGFzc2VkKCksdC5pbml0aWFsLHQuZGVsdGEsdC5kdXJhdGlvbikpfX19KSxEKHgse2Vhc2VPdXRFeHBvOmZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBlPT1pP3QrbjpuKigtTWF0aC5wb3coMiwtMTAqZS9pKSsxKSt0fSxlYXNlT3V0QmFjazpmdW5jdGlvbihlLHQsbixpLHIpe3JldHVybiByPTEuNzAxNTgsbiooKGU9ZS9pLTEpKmUqKChyKzEpKmUrcikrMSkrdH19KSxTLkFuaW1hdGlvbj1rLFMuVHJhbnNpdGlvbj14LFMuY3JlYXRlRWZmZWN0PWMsUy5ib3g9ZnVuY3Rpb24odCl7dD1lKHQpO3ZhciBuPXQub2Zmc2V0KCk7cmV0dXJuIG4ud2lkdGg9dC5vdXRlcldpZHRoKCksbi5oZWlnaHQ9dC5vdXRlckhlaWdodCgpLG59LFMudHJhbnNmb3JtT3JpZ2luPWZ1bmN0aW9uKGUsdCl7dmFyIG49KGUubGVmdC10LmxlZnQpKnQud2lkdGgvKHQud2lkdGgtZS53aWR0aCksaT0oZS50b3AtdC50b3ApKnQuaGVpZ2h0Lyh0LmhlaWdodC1lLmhlaWdodCk7cmV0dXJue3g6aXNOYU4obik/MDpuLHk6aXNOYU4oaSk/MDppfX0sUy5maWxsU2NhbGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTWF0aC5taW4oZS53aWR0aC90LndpZHRoLGUuaGVpZ2h0L3QuaGVpZ2h0KX0sUy5maXRTY2FsZT1mdW5jdGlvbihlLHQpe3JldHVybiBNYXRoLm1heChlLndpZHRoL3Qud2lkdGgsZS5oZWlnaHQvdC5oZWlnaHQpfX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXtpZighZSlyZXR1cm57fTt2YXIgdD1lLm1hdGNoKHYpfHxbXTtyZXR1cm57dHlwZTp0WzFdLGRpcmVjdGlvbjp0WzNdLHJldmVyc2U6XCJyZXZlcnNlXCI9PT10WzVdfX12YXIgbj13aW5kb3cua2VuZG8saT1uLk9ic2VydmFibGUscj1cIlNDUklQVFwiLG89XCJpbml0XCIsYT1cInNob3dcIixzPVwiaGlkZVwiLGw9XCJ0cmFuc2l0aW9uU3RhcnRcIixjPVwidHJhbnNpdGlvbkVuZFwiLGQ9XCJhdHRhY2hcIix1PVwiZGV0YWNoXCIsaD0vdW5yZWNvZ25pemVkIGV4cHJlc3Npb24vLHA9aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3Q9dHx8e30saS5mbi5pbml0LmNhbGwociksci5jb250ZW50PWUsci5pZD1uLmd1aWQoKSxyLnRhZ05hbWU9dC50YWdOYW1lfHxcImRpdlwiLHIubW9kZWw9dC5tb2RlbCxyLl93cmFwPXQud3JhcCE9PSExLHRoaXMuX2V2YWxUZW1wbGF0ZT10LmV2YWxUZW1wbGF0ZXx8ITEsci5fZnJhZ21lbnRzPXt9LHIuYmluZChbbyxhLHMsbCxjXSx0KX0scmVuZGVyOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMscj0haS5lbGVtZW50O3JldHVybiByJiYoaS5lbGVtZW50PWkuX2NyZWF0ZUVsZW1lbnQoKSksdCYmZSh0KS5hcHBlbmQoaS5lbGVtZW50KSxyJiYobi5iaW5kKGkuZWxlbWVudCxpLm1vZGVsKSxpLnRyaWdnZXIobykpLHQmJihpLl9lYWNoRnJhZ21lbnQoZCksaS50cmlnZ2VyKGEpKSxpLmVsZW1lbnR9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBmKHRoaXMpfSx0cmlnZ2VyQmVmb3JlU2hvdzpmdW5jdGlvbigpe3JldHVybiEwfSxzaG93U3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuY3NzKFwiZGlzcGxheVwiLFwiXCIpfSxzaG93RW5kOmZ1bmN0aW9uKCl7fSxoaWRlU3RhcnQ6ZnVuY3Rpb24oKXt9LGhpZGVFbmQ6ZnVuY3Rpb24oKXt0aGlzLmhpZGUoKX0sYmVmb3JlVHJhbnNpdGlvbjpmdW5jdGlvbihlKXt0aGlzLnRyaWdnZXIobCx7dHlwZTplfSl9LGFmdGVyVHJhbnNpdGlvbjpmdW5jdGlvbihlKXt0aGlzLnRyaWdnZXIoYyx7dHlwZTplfSl9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLl9lYWNoRnJhZ21lbnQodSksdGhpcy5lbGVtZW50LmRldGFjaCgpLHRoaXMudHJpZ2dlcihzKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudDtlJiYobi51bmJpbmQoZSksbi5kZXN0cm95KGUpLGUucmVtb3ZlKCkpfSxmcmFnbWVudHM6ZnVuY3Rpb24odCl7ZS5leHRlbmQodGhpcy5fZnJhZ21lbnRzLHQpfSxfZWFjaEZyYWdtZW50OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiB0aGlzLl9mcmFnbWVudHMpdGhpcy5fZnJhZ21lbnRzW3RdW2VdKHRoaXMsdCl9LF9jcmVhdGVFbGVtZW50OmZ1bmN0aW9uKCl7dmFyIHQsaSxvPXRoaXMsYT1cIjxcIitvLnRhZ05hbWUrXCIgLz5cIjt0cnl7aT1lKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG8uY29udGVudCl8fG8uY29udGVudCksaVswXS50YWdOYW1lPT09ciYmKGk9aS5odG1sKCkpfWNhdGNoKHMpe2gudGVzdChzLm1lc3NhZ2UpJiYoaT1vLmNvbnRlbnQpfXJldHVyblwic3RyaW5nXCI9PXR5cGVvZiBpPyhpPWkucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKSxvLl9ldmFsVGVtcGxhdGUmJihpPW4udGVtcGxhdGUoaSkoby5tb2RlbHx8e30pKSx0PWUoYSkuYXBwZW5kKGkpLG8uX3dyYXB8fCh0PXQuY29udGVudHMoKSkpOih0PWksby5fd3JhcCYmKHQ9dC53cmFwQWxsKGEpLnBhcmVudCgpKSksdH19KSxmPW4uQ2xhc3MuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQpe2UuZXh0ZW5kKHRoaXMse2VsZW1lbnQ6dC5lbGVtZW50LmNsb25lKCEwKSx0cmFuc2l0aW9uOnQudHJhbnNpdGlvbixpZDp0LmlkfSksdC5lbGVtZW50LnBhcmVudCgpLmFwcGVuZCh0aGlzLmVsZW1lbnQpfSxoaWRlU3RhcnQ6ZS5ub29wLGhpZGVFbmQ6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQucmVtb3ZlKCl9LGJlZm9yZVRyYW5zaXRpb246ZS5ub29wLGFmdGVyVHJhbnNpdGlvbjplLm5vb3B9KSxnPXAuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7cC5mbi5pbml0LmNhbGwodGhpcyxlLHQpLHRoaXMuY29udGFpbmVycz17fX0sY29udGFpbmVyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY29udGFpbmVyc1tlXTtyZXR1cm4gdHx8KHQ9dGhpcy5fY3JlYXRlQ29udGFpbmVyKGUpLHRoaXMuY29udGFpbmVyc1tlXT10KSx0fSxzaG93SW46ZnVuY3Rpb24oZSx0LG4pe3RoaXMuY29udGFpbmVyKGUpLnNob3codCxuKX0sX2NyZWF0ZUNvbnRhaW5lcjpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMucmVuZGVyKCksaT1uLmZpbmQoZSk7aWYoIWkubGVuZ3RoJiZuLmlzKGUpKXtpZighbi5pcyhlKSl0aHJvdyBFcnJvcihcImNhbid0IGZpbmQgYSBjb250YWluZXIgd2l0aCB0aGUgc3BlY2lmaWVkIFwiK2UrXCIgc2VsZWN0b3JcIik7aT1ufXJldHVybiB0PW5ldyBfKGkpLHQuYmluZChcImFjY2VwdGVkXCIsZnVuY3Rpb24oZSl7ZS52aWV3LnJlbmRlcihpKX0pLHR9fSksbT1wLmV4dGVuZCh7YXR0YWNoOmZ1bmN0aW9uKGUsdCl7ZS5lbGVtZW50LmZpbmQodCkucmVwbGFjZVdpdGgodGhpcy5yZW5kZXIoKSl9LGRldGFjaDpmdW5jdGlvbigpe319KSx2PS9eKFxcdyspKDooXFx3KykpPyggKFxcdyspKT8kLyxfPWkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe2kuZm4uaW5pdC5jYWxsKHRoaXMpLHRoaXMuY29udGFpbmVyPWUsdGhpcy5oaXN0b3J5PVtdLHRoaXMudmlldz1udWxsLHRoaXMucnVubmluZz0hMX0sYWZ0ZXI6ZnVuY3Rpb24oKXt0aGlzLnJ1bm5pbmc9ITEsdGhpcy50cmlnZ2VyKFwiY29tcGxldGVcIix7dmlldzp0aGlzLnZpZXd9KSx0aGlzLnRyaWdnZXIoXCJhZnRlclwiKX0sZW5kOmZ1bmN0aW9uKCl7dGhpcy52aWV3LnNob3dFbmQoKSx0aGlzLnByZXZpb3VzLmhpZGVFbmQoKSx0aGlzLmFmdGVyKCl9LHNob3c6ZnVuY3Rpb24oZSxpLHIpe2lmKCFlLnRyaWdnZXJCZWZvcmVTaG93KCkpcmV0dXJuIHRoaXMudHJpZ2dlcihcImFmdGVyXCIpLCExO3I9cnx8ZS5pZDt2YXIgbz10aGlzLGE9ZT09PW8udmlldz9lLmNsb25lKCk6by52aWV3LHM9by5oaXN0b3J5LGw9c1tzLmxlbmd0aC0yXXx8e30sYz1sLmlkPT09cixkPWl8fChjP3Nbcy5sZW5ndGgtMV0udHJhbnNpdGlvbjplLnRyYW5zaXRpb24pLHU9dChkKTtyZXR1cm4gby5ydW5uaW5nJiZvLmVmZmVjdC5zdG9wKCksXCJub25lXCI9PT1kJiYoZD1udWxsKSxvLnRyaWdnZXIoXCJhY2NlcHRlZFwiLHt2aWV3OmV9KSxvLnZpZXc9ZSxvLnByZXZpb3VzPWEsby5ydW5uaW5nPSEwLGM/cy5wb3AoKTpzLnB1c2goe2lkOnIsdHJhbnNpdGlvbjpkfSksYT8oYS5oaWRlU3RhcnQoKSxkJiZuLmVmZmVjdHMuZW5hYmxlZD8oZS5lbGVtZW50LmFkZENsYXNzKFwiay1meC1oaWRkZW5cIiksZS5zaG93U3RhcnQoKSxjJiYhaSYmKHUucmV2ZXJzZT0hdS5yZXZlcnNlKSxvLmVmZmVjdD1uLmZ4KGUuZWxlbWVudCkucmVwbGFjZShhLmVsZW1lbnQsdS50eXBlKS5iZWZvcmVUcmFuc2l0aW9uKGZ1bmN0aW9uKCl7ZS5iZWZvcmVUcmFuc2l0aW9uKFwic2hvd1wiKSxhLmJlZm9yZVRyYW5zaXRpb24oXCJoaWRlXCIpfSkuYWZ0ZXJUcmFuc2l0aW9uKGZ1bmN0aW9uKCl7ZS5hZnRlclRyYW5zaXRpb24oXCJzaG93XCIpLGEuYWZ0ZXJUcmFuc2l0aW9uKFwiaGlkZVwiKX0pLmRpcmVjdGlvbih1LmRpcmVjdGlvbikuc2V0UmV2ZXJzZSh1LnJldmVyc2UpLG8uZWZmZWN0LnJ1bigpLnRoZW4oZnVuY3Rpb24oKXtvLmVuZCgpfSkpOihlLnNob3dTdGFydCgpLG8uZW5kKCkpLCEwKTooZS5zaG93U3RhcnQoKSxlLnNob3dFbmQoKSxvLmFmdGVyKCksITApfX0pO24uVmlld0NvbnRhaW5lcj1fLG4uRnJhZ21lbnQ9bSxuLkxheW91dD1nLG4uVmlldz1wLG4uVmlld0Nsb25lPWZ9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt0aGlzLm5vZGU9bnVsbH1mdW5jdGlvbiBuKGUsdCxuKXt0aGlzLm5vZGVOYW1lPWUsdGhpcy5hdHRyPXR8fHt9LHRoaXMuY3NzVGV4dD1udWxsLHRoaXMuY2hpbGRyZW49bnx8W119ZnVuY3Rpb24gaShlKXt0aGlzLm5vZGVWYWx1ZT1lfWZ1bmN0aW9uIHIoZSl7dGhpcy5odG1sPWV9ZnVuY3Rpb24gbyhlKXtyZXR1cm4gbmV3IHIoZSl9ZnVuY3Rpb24gYShlLHQsaSl7cmV0dXJuIG5ldyBuKGUsdCxpKX1mdW5jdGlvbiBzKGUpe3JldHVybiBuZXcgaShlKX1mdW5jdGlvbiBsKGUpe3RoaXMucm9vdD1lLHRoaXMuY2hpbGRyZW49W119dC5wcm90b3R5cGU9e3JlbW92ZTpmdW5jdGlvbigpe3RoaXMubm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMubm9kZSl9fSxuLnByb3RvdHlwZT1uZXcgdCxuLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxhLHMsbCxjLGQ9dGhpcy5jaGlsZHJlbix1PWQubGVuZ3RoO2lmKHQmJnQubm9kZU5hbWU9PT10aGlzLm5vZGVOYW1lKXtpZihuPXQubm9kZSxyPXQuY2hpbGRyZW4sTWF0aC5hYnMoci5sZW5ndGgtdSk+MilyZXR1cm4gdm9pZCB0aGlzLnJlbmRlcih7YXBwZW5kQ2hpbGQ6ZnVuY3Rpb24obil7ZS5yZXBsYWNlQ2hpbGQobix0Lm5vZGUpfX0sbnVsbCk7Zm9yKGk9MDt1Pmk7aSsrKWRbaV0ucmVuZGVyKG4scltpXSk7Zm9yKGk9dSx1PXIubGVuZ3RoO3U+aTtpKyspcltpXS5yZW1vdmUoKX1lbHNle2Zvcih0JiYodC5yZW1vdmUoKSx0PW51bGwpLG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0aGlzLm5vZGVOYW1lKSxpPTA7dT5pO2krKylkW2ldLnJlbmRlcihuLG51bGwpO2UuYXBwZW5kQ2hpbGQobil9bz10aGlzLmF0dHI7Zm9yKGEgaW4gbylpZighdHx8b1thXSE9PXQuYXR0clthXSlpZih2b2lkIDAhPT1uW2FdKWlmKFwic3R5bGVcIiE9PWEpblthXT1vW2FdO2Vsc2V7cz1cIlwiLGw9b1thXTtmb3IoYyBpbiBsKXMrPWMscys9XCI6XCIscys9bFtjXSxzKz1cIjtcIjt0JiZ0LmNzc1RleHQ9PT1zfHwobi5zdHlsZS5jc3NUZXh0PXMpLHRoaXMuY3NzVGV4dD1zfWVsc2Ugbi5zZXRBdHRyaWJ1dGUoYSxvW2FdKTtpZih0KWZvcihhIGluIHQuYXR0cil2b2lkIDA9PT1vW2FdJiYodm9pZCAwIT09blthXT9cInN0eWxlXCI9PT1hP24uc3R5bGUuY3NzVGV4dD1cIlwiOlwiY2xhc3NOYW1lXCI9PT1hP25bYV09XCJcIjpuLnJlbW92ZUF0dHJpYnV0ZShhKTpuLnJlbW92ZUF0dHJpYnV0ZShhKSk7dGhpcy5ub2RlPW59LGkucHJvdG90eXBlPW5ldyB0LGkucHJvdG90eXBlLm5vZGVOYW1lPVwiI3RleHRcIixpLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbjt0JiZ0Lm5vZGVOYW1lPT09dGhpcy5ub2RlTmFtZT8obj10Lm5vZGUsdGhpcy5ub2RlVmFsdWUhPT10Lm5vZGVWYWx1ZSYmKG4ubm9kZVZhbHVlPXRoaXMubm9kZVZhbHVlKSk6KHQmJnQucmVtb3ZlKCksbj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLm5vZGVWYWx1ZSksZS5hcHBlbmRDaGlsZChuKSksdGhpcy5ub2RlPW59LHIucHJvdG90eXBlPXtub2RlTmFtZTpcIiNodG1sXCIscmVtb3ZlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7dGhpcy5ub2Rlcy5sZW5ndGg+ZTtlKyspdGhpcy5ub2Rlc1tlXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMubm9kZXNbZV0pfSxyZW5kZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbixpO2lmKHQmJnQubm9kZU5hbWU9PT10aGlzLm5vZGVOYW1lJiZ0Lmh0bWw9PT10aGlzLmh0bWwpdGhpcy5ub2Rlcz10Lm5vZGVzLnNsaWNlKDApO2Vsc2UgZm9yKHQmJnQucmVtb3ZlKCksbj1lLmxhc3RDaGlsZCxlLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLHRoaXMuaHRtbCksdGhpcy5ub2Rlcz1bXSxpPW4/bi5uZXh0U2libGluZzplLmZpcnN0Q2hpbGQ7aTtpPWkubmV4dFNpYmxpbmcpdGhpcy5ub2Rlcy5wdXNoKGkpfX0sbC5wcm90b3R5cGU9e2h0bWw6byxlbGVtZW50OmEsdGV4dDpzLHJlbmRlcjpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcy5jaGlsZHJlbjtmb3IodD0wLG49ZS5sZW5ndGg7bj50O3QrKyllW3RdLnJlbmRlcih0aGlzLnJvb3QsaVt0XSk7Zm9yKHQ9bjtpLmxlbmd0aD50O3QrKylpW3RdLnJlbW92ZSgpO3RoaXMuY2hpbGRyZW49ZX19LGUuZG9tPXtodG1sOm8sdGV4dDpzLGVsZW1lbnQ6YSxUcmVlOmx9fSh3aW5kb3cua2VuZG8pLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dmFyIG49TWF0aC5mbG9vcihlLzI2KS0xO3JldHVybihuPj0wP3Qobik6XCJcIikrU3RyaW5nLmZyb21DaGFyQ29kZSg2NStlJTI2KX1mdW5jdGlvbiBuKGUsbil7cmV0dXJuIHQobikrKGUrMSl9ZnVuY3Rpb24gaShlKXtyZXR1cm4gNj5lLmxlbmd0aCYmKGU9ZS5yZXBsYWNlKC8oXFx3KS9nLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQrdH0pKSxlPWUuc3Vic3RyaW5nKDEpLnRvVXBwZXJDYXNlKCksOD5lLmxlbmd0aCYmKGU9XCJGRlwiK2UpLGV9dmFyIHI9Jzw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCIgc3RhbmRhbG9uZT1cInllc1wiPz5cXHJcXG48UmVsYXRpb25zaGlwcyB4bWxucz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9wYWNrYWdlLzIwMDYvcmVsYXRpb25zaGlwc1wiPjxSZWxhdGlvbnNoaXAgSWQ9XCJySWQzXCIgVHlwZT1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMvZXh0ZW5kZWQtcHJvcGVydGllc1wiIFRhcmdldD1cImRvY1Byb3BzL2FwcC54bWxcIi8+PFJlbGF0aW9uc2hpcCBJZD1cInJJZDJcIiBUeXBlPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9yZWxhdGlvbnNoaXBzL21ldGFkYXRhL2NvcmUtcHJvcGVydGllc1wiIFRhcmdldD1cImRvY1Byb3BzL2NvcmUueG1sXCIvPjxSZWxhdGlvbnNoaXAgSWQ9XCJySWQxXCIgVHlwZT1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMvb2ZmaWNlRG9jdW1lbnRcIiBUYXJnZXQ9XCJ4bC93b3JrYm9vay54bWxcIi8+PC9SZWxhdGlvbnNoaXBzPicsbz1lLnRlbXBsYXRlKCc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiIHN0YW5kYWxvbmU9XCJ5ZXNcIj8+XFxyXFxuPGNwOmNvcmVQcm9wZXJ0aWVzIHhtbG5zOmNwPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9tZXRhZGF0YS9jb3JlLXByb3BlcnRpZXNcIiB4bWxuczpkYz1cImh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvXCIgeG1sbnM6ZGN0ZXJtcz1cImh0dHA6Ly9wdXJsLm9yZy9kYy90ZXJtcy9cIiB4bWxuczpkY21pdHlwZT1cImh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9cIiB4bWxuczp4c2k9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZVwiPjxkYzpjcmVhdG9yPiR7Y3JlYXRvcn08L2RjOmNyZWF0b3I+PGNwOmxhc3RNb2RpZmllZEJ5PiR7bGFzdE1vZGlmaWVkQnl9PC9jcDpsYXN0TW9kaWZpZWRCeT48ZGN0ZXJtczpjcmVhdGVkIHhzaTp0eXBlPVwiZGN0ZXJtczpXM0NEVEZcIj4ke2NyZWF0ZWR9PC9kY3Rlcm1zOmNyZWF0ZWQ+PGRjdGVybXM6bW9kaWZpZWQgeHNpOnR5cGU9XCJkY3Rlcm1zOlczQ0RURlwiPiR7bW9kaWZpZWR9PC9kY3Rlcm1zOm1vZGlmaWVkPjwvY3A6Y29yZVByb3BlcnRpZXM+JyksYT1lLnRlbXBsYXRlKCc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiIHN0YW5kYWxvbmU9XCJ5ZXNcIj8+XFxyXFxuPFByb3BlcnRpZXMgeG1sbnM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9leHRlbmRlZC1wcm9wZXJ0aWVzXCIgeG1sbnM6dnQ9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9kb2NQcm9wc1ZUeXBlc1wiPjxBcHBsaWNhdGlvbj5NaWNyb3NvZnQgRXhjZWw8L0FwcGxpY2F0aW9uPjxEb2NTZWN1cml0eT4wPC9Eb2NTZWN1cml0eT48U2NhbGVDcm9wPmZhbHNlPC9TY2FsZUNyb3A+PEhlYWRpbmdQYWlycz48dnQ6dmVjdG9yIHNpemU9XCIyXCIgYmFzZVR5cGU9XCJ2YXJpYW50XCI+PHZ0OnZhcmlhbnQ+PHZ0Omxwc3RyPldvcmtzaGVldHM8L3Z0Omxwc3RyPjwvdnQ6dmFyaWFudD48dnQ6dmFyaWFudD48dnQ6aTQ+JHtzaGVldHMubGVuZ3RofTwvdnQ6aTQ+PC92dDp2YXJpYW50PjwvdnQ6dmVjdG9yPjwvSGVhZGluZ1BhaXJzPjxUaXRsZXNPZlBhcnRzPjx2dDp2ZWN0b3Igc2l6ZT1cIiR7c2hlZXRzLmxlbmd0aH1cIiBiYXNlVHlwZT1cImxwc3RyXCI+IyBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBzaGVldHMubGVuZ3RoOyBpZHgrKykgeyAjIyBpZiAoc2hlZXRzW2lkeF0ub3B0aW9ucy50aXRsZSkgeyAjPHZ0Omxwc3RyPiR7c2hlZXRzW2lkeF0ub3B0aW9ucy50aXRsZX08L3Z0Omxwc3RyPiMgfSBlbHNlIHsgIzx2dDpscHN0cj5TaGVldCR7aWR4KzF9PC92dDpscHN0cj4jIH0gIyMgfSAjPC92dDp2ZWN0b3I+PC9UaXRsZXNPZlBhcnRzPjxMaW5rc1VwVG9EYXRlPmZhbHNlPC9MaW5rc1VwVG9EYXRlPjxTaGFyZWREb2M+ZmFsc2U8L1NoYXJlZERvYz48SHlwZXJsaW5rc0NoYW5nZWQ+ZmFsc2U8L0h5cGVybGlua3NDaGFuZ2VkPjxBcHBWZXJzaW9uPjE0LjAzMDA8L0FwcFZlcnNpb24+PC9Qcm9wZXJ0aWVzPicpLHM9ZS50ZW1wbGF0ZSgnPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIiBzdGFuZGFsb25lPVwieWVzXCI/PlxcclxcbjxUeXBlcyB4bWxucz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9wYWNrYWdlLzIwMDYvY29udGVudC10eXBlc1wiPjxEZWZhdWx0IEV4dGVuc2lvbj1cInJlbHNcIiBDb250ZW50VHlwZT1cImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1wYWNrYWdlLnJlbGF0aW9uc2hpcHMreG1sXCIgLz48RGVmYXVsdCBFeHRlbnNpb249XCJ4bWxcIiBDb250ZW50VHlwZT1cImFwcGxpY2F0aW9uL3htbFwiIC8+PE92ZXJyaWRlIFBhcnROYW1lPVwiL3hsL3dvcmtib29rLnhtbFwiIENvbnRlbnRUeXBlPVwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQubWFpbit4bWxcIiAvPjxPdmVycmlkZSBQYXJ0TmFtZT1cIi94bC9zdHlsZXMueG1sXCIgQ29udGVudFR5cGU9XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zdHlsZXMreG1sXCIvPjxPdmVycmlkZSBQYXJ0TmFtZT1cIi94bC9zaGFyZWRTdHJpbmdzLnhtbFwiIENvbnRlbnRUeXBlPVwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hhcmVkU3RyaW5ncyt4bWxcIi8+IyBmb3IgKHZhciBpZHggPSAxOyBpZHggPD0gY291bnQ7IGlkeCsrKSB7ICM8T3ZlcnJpZGUgUGFydE5hbWU9XCIveGwvd29ya3NoZWV0cy9zaGVldCR7aWR4fS54bWxcIiBDb250ZW50VHlwZT1cImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLndvcmtzaGVldCt4bWxcIiAvPiMgfSAjPE92ZXJyaWRlIFBhcnROYW1lPVwiL2RvY1Byb3BzL2NvcmUueG1sXCIgQ29udGVudFR5cGU9XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtcGFja2FnZS5jb3JlLXByb3BlcnRpZXMreG1sXCIgLz48T3ZlcnJpZGUgUGFydE5hbWU9XCIvZG9jUHJvcHMvYXBwLnhtbFwiIENvbnRlbnRUeXBlPVwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LmV4dGVuZGVkLXByb3BlcnRpZXMreG1sXCIgLz48L1R5cGVzPicpLGw9ZS50ZW1wbGF0ZSgnPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIiBzdGFuZGFsb25lPVwieWVzXCI/Plxcclxcbjx3b3JrYm9vayB4bWxucz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9zcHJlYWRzaGVldG1sLzIwMDYvbWFpblwiIHhtbG5zOnI9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzXCI+PGZpbGVWZXJzaW9uIGFwcE5hbWU9XCJ4bFwiIGxhc3RFZGl0ZWQ9XCI1XCIgbG93ZXN0RWRpdGVkPVwiNVwiIHJ1cEJ1aWxkPVwiOTMwM1wiIC8+PHdvcmtib29rUHIgZGVmYXVsdFRoZW1lVmVyc2lvbj1cIjEyNDIyNlwiIC8+PGJvb2tWaWV3cz48d29ya2Jvb2tWaWV3IHhXaW5kb3c9XCIyNDBcIiB5V2luZG93PVwiNDVcIiB3aW5kb3dXaWR0aD1cIjE4MTk1XCIgd2luZG93SGVpZ2h0PVwiNzk5NVwiIC8+PC9ib29rVmlld3M+PHNoZWV0cz4jIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IHNoZWV0cy5sZW5ndGg7IGlkeCsrKSB7ICMjIGlmIChzaGVldHNbaWR4XS5vcHRpb25zLnRpdGxlKSB7ICM8c2hlZXQgbmFtZT1cIiR7c2hlZXRzW2lkeF0ub3B0aW9ucy50aXRsZX1cIiBzaGVldElkPVwiJHtpZHgrMX1cIiByOmlkPVwicklkJHtpZHgrMX1cIiAvPiMgfSBlbHNlIHsgIzxzaGVldCBuYW1lPVwiU2hlZXQke2lkeCsxfVwiIHNoZWV0SWQ9XCIke2lkeCsxfVwiIHI6aWQ9XCJySWQke2lkeCsxfVwiIC8+IyB9ICMjIH0gIzwvc2hlZXRzPjxjYWxjUHIgY2FsY0lkPVwiMTQ1NjIxXCIgLz48L3dvcmtib29rPicpLGM9ZS50ZW1wbGF0ZSgnPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIiBzdGFuZGFsb25lPVwieWVzXCI/Plxcclxcbjx3b3Jrc2hlZXQgeG1sbnM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvc3ByZWFkc2hlZXRtbC8yMDA2L21haW5cIiB4bWxuczptYz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9tYXJrdXAtY29tcGF0aWJpbGl0eS8yMDA2XCIgeG1sbnM6cj1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHNcIiB4bWxuczp4MTRhYz1cImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vb2ZmaWNlL3NwcmVhZHNoZWV0bWwvMjAwOS85L2FjXCIgbWM6SWdub3JhYmxlPVwieDE0YWNcIj48ZGltZW5zaW9uIHJlZj1cIkExXCIgLz48c2hlZXRWaWV3cz48c2hlZXRWaWV3IHRhYlNlbGVjdGVkPVwiMVwiIHdvcmtib29rVmlld0lkPVwiMFwiPiMgaWYgKGZyZWV6ZVBhbmUpIHsgIzxwYW5lIHN0YXRlPVwiZnJvemVuXCIjIGlmIChmcmVlemVQYW5lLmNvbFNwbGl0KSB7ICMgeFNwbGl0PVwiJHtmcmVlemVQYW5lLmNvbFNwbGl0fVwiIyB9ICMjIGlmIChmcmVlemVQYW5lLnJvd1NwbGl0KSB7ICMgeVNwbGl0PVwiJHtmcmVlemVQYW5lLnJvd1NwbGl0fVwiIyB9ICMgdG9wTGVmdENlbGw9XCIke1N0cmluZy5mcm9tQ2hhckNvZGUoNjUgKyAoZnJlZXplUGFuZS5jb2xTcGxpdCB8fCAwKSl9JHsoZnJlZXplUGFuZS5yb3dTcGxpdCB8fCAwKSsxfVwiLz4jIH0gIzwvc2hlZXRWaWV3Pjwvc2hlZXRWaWV3cz48c2hlZXRGb3JtYXRQciBkZWZhdWx0Um93SGVpZ2h0PVwiMTVcIiB4MTRhYzpkeURlc2NlbnQ9XCIwLjI1XCIgLz4jIGlmIChjb2x1bW5zKSB7ICM8Y29scz4jIGZvciAodmFyIGNpID0gMDsgY2kgPCBjb2x1bW5zLmxlbmd0aDsgY2krKykgeyAjIyB2YXIgY29sdW1uID0gY29sdW1uc1tjaV07ICMjIGlmIChjb2x1bW4ud2lkdGgpIHsgIzxjb2wgbWluPVwiJHtjaSsxfVwiIG1heD1cIiR7Y2krMX1cIiBjdXN0b21XaWR0aD1cIjFcIiMgaWYgKGNvbHVtbi5hdXRvV2lkdGgpIHsgIyB3aWR0aD1cIiR7KChjb2x1bW4ud2lkdGgqNys1KS83KjI1NikvMjU2fVwiIGJlc3RGaXQ9XCIxXCIjIH0gZWxzZSB7ICMgd2lkdGg9XCIkeygoKGNvbHVtbi53aWR0aCkvNykqMTAwKzAuNSkvMTAwfVwiICMgfSAjLz4jIH0gIyMgfSAjPC9jb2xzPiMgfSAjPHNoZWV0RGF0YT4jIGZvciAodmFyIHJpID0gMDsgcmkgPCBkYXRhLmxlbmd0aDsgcmkrKykgeyAjIyB2YXIgcm93ID0gZGF0YVtyaV07ICM8cm93IHI9XCIke3JpICsgMX1cIj4jIGZvciAodmFyIGNpID0gMDsgY2kgPCByb3cuZGF0YS5sZW5ndGg7IGNpKyspIHsgIyMgdmFyIGNlbGwgPSByb3cuZGF0YVtjaV07IzxjIHI9XCIke2NlbGwucmVmfVwiIyBpZiAoY2VsbC5zdHlsZSkgeyAjIHM9XCIke2NlbGwuc3R5bGV9XCIgIyB9ICMjIGlmIChjZWxsLnR5cGUpIHsgIyB0PVwiJHtjZWxsLnR5cGV9XCIjIH0gIz4jIGlmIChjZWxsLnZhbHVlICE9IG51bGwpIHsgIzx2PiR7Y2VsbC52YWx1ZX08L3Y+IyB9ICM8L2M+IyB9ICM8L3Jvdz4jIH0gIzwvc2hlZXREYXRhPiMgaWYgKGZpbHRlcikgeyAjPGF1dG9GaWx0ZXIgcmVmPVwiJHtmaWx0ZXIuZnJvbX06JHtmaWx0ZXIudG99XCIvPiMgfSAjIyBpZiAobWVyZ2VDZWxscy5sZW5ndGgpIHsgIzxtZXJnZUNlbGxzIGNvdW50PVwiJHttZXJnZUNlbGxzLmxlbmd0aH1cIj4jIGZvciAodmFyIGNpID0gMDsgY2kgPCBtZXJnZUNlbGxzLmxlbmd0aDsgY2krKykgeyAjPG1lcmdlQ2VsbCByZWY9XCIke21lcmdlQ2VsbHNbY2ldfVwiLz4jIH0gIzwvbWVyZ2VDZWxscz4jIH0gIzxwYWdlTWFyZ2lucyBsZWZ0PVwiMC43XCIgcmlnaHQ9XCIwLjdcIiB0b3A9XCIwLjc1XCIgYm90dG9tPVwiMC43NVwiIGhlYWRlcj1cIjAuM1wiIGZvb3Rlcj1cIjAuM1wiIC8+PC93b3Jrc2hlZXQ+JyksZD1lLnRlbXBsYXRlKCc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiIHN0YW5kYWxvbmU9XCJ5ZXNcIj8+XFxyXFxuPFJlbGF0aW9uc2hpcHMgeG1sbnM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvcGFja2FnZS8yMDA2L3JlbGF0aW9uc2hpcHNcIj4jIGZvciAodmFyIGlkeCA9IDE7IGlkeCA8PSBjb3VudDsgaWR4KyspIHsgIzxSZWxhdGlvbnNoaXAgSWQ9XCJySWQke2lkeH1cIiBUeXBlPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy93b3Jrc2hlZXRcIiBUYXJnZXQ9XCJ3b3Jrc2hlZXRzL3NoZWV0JHtpZHh9LnhtbFwiIC8+IyB9ICM8UmVsYXRpb25zaGlwIElkPVwicklkJHtjb3VudCsxfVwiIFR5cGU9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL3N0eWxlc1wiIFRhcmdldD1cInN0eWxlcy54bWxcIiAvPjxSZWxhdGlvbnNoaXAgSWQ9XCJySWQke2NvdW50KzJ9XCIgVHlwZT1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMvc2hhcmVkU3RyaW5nc1wiIFRhcmdldD1cInNoYXJlZFN0cmluZ3MueG1sXCIgLz48L1JlbGF0aW9uc2hpcHM+JyksdT1lLnRlbXBsYXRlKCc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiIHN0YW5kYWxvbmU9XCJ5ZXNcIj8+XFxyXFxuPHNzdCB4bWxucz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9zcHJlYWRzaGVldG1sLzIwMDYvbWFpblwiIGNvdW50PVwiJHtjb3VudH1cIiB1bmlxdWVDb3VudD1cIiR7dW5pcXVlQ291bnR9XCI+IyBmb3IgKHZhciBpbmRleCBpbiBpbmRleGVzKSB7ICM8c2k+PHQ+JHtpbmRleC5zdWJzdHJpbmcoMSl9PC90Pjwvc2k+IyB9ICM8L3NzdD4nKSxoPWUudGVtcGxhdGUoJzw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/PjxzdHlsZVNoZWV0IHhtbG5zPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3NwcmVhZHNoZWV0bWwvMjAwNi9tYWluXCIgeG1sbnM6bWM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvbWFya3VwLWNvbXBhdGliaWxpdHkvMjAwNlwiIG1jOklnbm9yYWJsZT1cIngxNGFjXCIgeG1sbnM6eDE0YWM9XCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL29mZmljZS9zcHJlYWRzaGVldG1sLzIwMDkvOS9hY1wiPjxudW1GbXRzIGNvdW50PVwiJHtmb3JtYXRzLmxlbmd0aH1cIj4jIGZvciAodmFyIGZpID0gMDsgZmkgPCBmb3JtYXRzLmxlbmd0aDsgZmkrKykgeyAjIyB2YXIgZm9ybWF0ID0gZm9ybWF0c1tmaV07ICM8bnVtRm10IGZvcm1hdENvZGU9XCIke2Zvcm1hdC5mb3JtYXR9XCIgbnVtRm10SWQ9XCIkezE2NStmaX1cIiAvPiMgfSAjPC9udW1GbXRzPjxmb250cyBjb3VudD1cIiR7Zm9udHMubGVuZ3RoKzF9XCIgeDE0YWM6a25vd25Gb250cz1cIjFcIj48Zm9udD48c3ogdmFsPVwiMTFcIiAvPjxjb2xvciB0aGVtZT1cIjFcIiAvPjxuYW1lIHZhbD1cIkNhbGlicmlcIiAvPjxmYW1pbHkgdmFsPVwiMlwiIC8+PHNjaGVtZSB2YWw9XCJtaW5vclwiIC8+PC9mb250PiMgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZvbnRzLmxlbmd0aDsgZmkrKykgeyAjIyB2YXIgZm9udCA9IGZvbnRzW2ZpXTsgIzxmb250PiMgaWYgKGZvbnQuYm9sZCkgeyAjPGIvPiMgfSAjIyBpZiAoZm9udC5pdGFsaWMpIHsgIzxpLz4jIH0gIyMgaWYgKGZvbnQudW5kZXJsaW5lKSB7ICM8dS8+IyB9ICMjIGlmIChmb250LmNvbG9yKSB7ICM8Y29sb3IgcmdiPVwiJHtmb250LmNvbG9yfVwiIC8+IyB9IGVsc2UgeyAjPGNvbG9yIHRoZW1lPVwiMVwiIC8+IyB9ICMjIGlmIChmb250LmZvbnRTaXplKSB7ICM8c3ogdmFsPVwiJHtmb250LmZvbnRTaXplfVwiIC8+IyB9IGVsc2UgeyAjPHN6IHZhbD1cIjExXCIgLz4jIH0gIyMgaWYgKGZvbnQuZm9udE5hbWUpIHsgIzxuYW1lIHZhbD1cIiR7Zm9udC5mb250TmFtZX1cIiAvPiMgfSBlbHNlIHsgIzxuYW1lIHZhbD1cIkNhbGlicmlcIiAvPjxzY2hlbWUgdmFsPVwibWlub3JcIiAvPiMgfSAjPGZhbWlseSB2YWw9XCIyXCIgLz48L2ZvbnQ+IyB9ICM8L2ZvbnRzPjxmaWxscyBjb3VudD1cIiR7ZmlsbHMubGVuZ3RoKzF9XCI+PGZpbGw+PHBhdHRlcm5GaWxsIHBhdHRlcm5UeXBlPVwibm9uZVwiLz48L2ZpbGw+PGZpbGw+PHBhdHRlcm5GaWxsIHBhdHRlcm5UeXBlPVwiZ3JheTEyNVwiLz48L2ZpbGw+IyBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZmlsbHMubGVuZ3RoOyBmaSsrKSB7ICMjIHZhciBmaWxsID0gZmlsbHNbZmldOyAjIyBpZiAoZmlsbC5iYWNrZ3JvdW5kKSB7ICM8ZmlsbD48cGF0dGVybkZpbGwgcGF0dGVyblR5cGU9XCJzb2xpZFwiPjxmZ0NvbG9yIHJnYj1cIiR7ZmlsbC5iYWNrZ3JvdW5kfVwiLz48L3BhdHRlcm5GaWxsPjwvZmlsbD4jIH0gIyMgfSAjPC9maWxscz48Ym9yZGVycyBjb3VudD1cIjFcIj48Ym9yZGVyPjxsZWZ0Lz48cmlnaHQvPjx0b3AvPjxib3R0b20vPjxkaWFnb25hbC8+PC9ib3JkZXI+PC9ib3JkZXJzPjxjZWxsWGZzIGNvdW50PVwiJHtzdHlsZXMubGVuZ3RoKzF9XCI+PHhmIG51bUZtdElkPVwiMFwiIGZvbnRJZD1cIjBcIiBmaWxsSWQ9XCIwXCIgYm9yZGVySWQ9XCIwXCIgeGZJZD1cIjBcIi8+IyBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc3R5bGVzLmxlbmd0aDsgc2krKykgeyAjIyB2YXIgc3R5bGUgPSBzdHlsZXNbc2ldOyAjPHhmIHhmaWQ9XCIwXCIjIGlmIChzdHlsZS5mb250SWQpIHsgIyBmb250SWQ9XCIke3N0eWxlLmZvbnRJZH1cIiBhcHBseUZvbnQ9XCIxXCIjIH0gIyMgaWYgKHN0eWxlLmZpbGxJZCkgeyAjIGZpbGxJZD1cIiR7c3R5bGUuZmlsbElkfVwiIGFwcGx5RmlsbD1cIjFcIiMgfSAjIyBpZiAoc3R5bGUubnVtRm10SWQpIHsgIyBudW1GbXRJZD1cIiR7c3R5bGUubnVtRm10SWR9XCIgYXBwbHlOdW1iZXJGb3JtYXQ9XCIxXCIjIH0gIyMgaWYgKHN0eWxlLmhBbGlnbiB8fCBzdHlsZS52QWxpZ24pIHsgIyBhcHBseUFsaWdubWVudD1cIjFcIiMgfSAjPiMgaWYgKHN0eWxlLmhBbGlnbiB8fCBzdHlsZS52QWxpZ24pIHsgIzxhbGlnbm1lbnQjIGlmIChzdHlsZS5oQWxpZ24pIHsgIyBob3Jpem9udGFsPVwiJHtzdHlsZS5oQWxpZ259XCIjIH0gIyMgaWYgKHN0eWxlLnZBbGlnbikgeyAjIHZlcnRpY2FsPVwiJHtzdHlsZS52QWxpZ259XCIjIH0gIy8+IyB9ICM8L3hmPiMgfSAjPC9jZWxsWGZzPjxkeGZzIGNvdW50PVwiMFwiIC8+PHRhYmxlU3R5bGVzIGNvdW50PVwiMFwiIGRlZmF1bHRUYWJsZVN0eWxlPVwiVGFibGVTdHlsZU1lZGl1bTJcIiBkZWZhdWx0UGl2b3RTdHlsZT1cIlBpdm90U3R5bGVNZWRpdW05XCIgLz48L3N0eWxlU2hlZXQ+JykscD1lLkNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbil7dGhpcy5vcHRpb25zPWUsdGhpcy5fc3RyaW5ncz10LHRoaXMuX3N0eWxlcz1uLHRoaXMuX21lcmdlQ2VsbHM9W119LHRvWE1MOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLnJvd3N8fFtdLHQ9dGhpcy5vcHRpb25zLmZpbHRlcjtyZXR1cm4gYyh7ZnJlZXplUGFuZTp0aGlzLm9wdGlvbnMuZnJlZXplUGFuZSxjb2x1bW5zOnRoaXMub3B0aW9ucy5jb2x1bW5zLGRhdGE6JC5tYXAoZSwkLnByb3h5KHRoaXMuX3Jvdyx0aGlzLGUpKSxtZXJnZUNlbGxzOnRoaXMuX21lcmdlQ2VsbHMsZmlsdGVyOnQ/e2Zyb206bigwLHQuZnJvbSksdG86bigwLHQudG8pfTpudWxsfSl9LF9yb3c6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9jZWxsSW5kZXg9MCx7ZGF0YTokLm1hcCh0LmNlbGxzLCQucHJveHkodGhpcy5fY2VsbCx0aGlzLGUsbikpfX0sX2xvb2t1cFN0cmluZzpmdW5jdGlvbihlKXt2YXIgdD1cIiRcIitlLG49dGhpcy5fc3RyaW5ncy5pbmRleGVzW3RdO3JldHVybiB2b2lkIDAhPT1uP2U9bjooZT10aGlzLl9zdHJpbmdzLmluZGV4ZXNbdF09dGhpcy5fc3RyaW5ncy51bmlxdWVDb3VudCx0aGlzLl9zdHJpbmdzLnVuaXF1ZUNvdW50KyspLHRoaXMuX3N0cmluZ3MuY291bnQrKyxlfSxfbG9va3VwU3R5bGU6ZnVuY3Rpb24odCl7dmFyIG4saT1lLnN0cmluZ2lmeSh0KTtyZXR1cm5cInt9XCI9PWk/MDoobj0kLmluQXJyYXkoaSx0aGlzLl9zdHlsZXMpLDA+biYmKG49dGhpcy5fc3R5bGVzLnB1c2goaSktMSksbisxKX0sX2NlbGw6ZnVuY3Rpb24odCxpLHIpe3ZhciBvLGEscyxsLGMsZCx1LGgscCxmLGc7aWYoIXIpcmV0dXJuIHZvaWQgdGhpcy5fY2VsbEluZGV4Kys7aWYobz1yLnZhbHVlLGE9e2JvbGQ6ci5ib2xkLGNvbG9yOnIuY29sb3IsYmFja2dyb3VuZDpyLmJhY2tncm91bmQsaXRhbGljOnIuaXRhbGljLHVuZGVybGluZTpyLnVuZGVybGluZSxmb250TmFtZTpyLmZvbnROYW1lLGZvbnRTaXplOnIuZm9udFNpemUsZm9ybWF0OnIuZm9ybWF0LGhBbGlnbjpyLmhBbGlnbix2QWxpZ246ci52QWxpZ259LHM9dGhpcy5vcHRpb25zLmNvbHVtbnN8fFtdLGw9c1t0aGlzLl9jZWxsSW5kZXhdLGwmJmwuYXV0b1dpZHRoJiYobC53aWR0aD1NYXRoLm1heChsLndpZHRofHwwLChcIlwiK28pLmxlbmd0aCkpLGM9dHlwZW9mIG8sXCJzdHJpbmdcIj09PWM/KG89dGhpcy5fbG9va3VwU3RyaW5nKG8pLGM9XCJzXCIpOlwibnVtYmVyXCI9PT1jP2M9XCJuXCI6XCJib29sZWFuXCI9PT1jPyhjPVwiYlwiLG89K28pOm8mJm8uZ2V0VGltZT8oYz1cImRcIixvPWUudGltZXpvbmUucmVtb3ZlKG8sXCJFdGMvVVRDXCIpLnRvSlNPTigpLGEuZm9ybWF0fHwoYS5mb3JtYXQ9XCJtbS1kZC15eVwiKSk6KGM9bnVsbCxvPVwiXCIpLGE9dGhpcy5fbG9va3VwU3R5bGUoYSksZD17dmFsdWU6byx0eXBlOmMsc3R5bGU6YSxyZWY6bihpLHRoaXMuX2NlbGxJbmRleCl9LHU9ci5jb2xTcGFufHwxLGg9ci5yb3dTcGFufHwxLHU+MXx8aD4xKXtmb3IocD1bZF0sZj0xO3U+ZjtmKyspdGhpcy5fY2VsbEluZGV4KysscFtmXT17cmVmOm4oaSx0aGlzLl9jZWxsSW5kZXgpfTtmb3IoZz0xO2g+ZztnKyspdFtpK2ddJiZ0W2krZ10uY2VsbHMuc3BsaWNlKHRoaXMuX2NlbGxJbmRleCwwLHt9KTt0aGlzLl9tZXJnZUNlbGxzLnB1c2goZC5yZWYrXCI6XCIrbihpK2gtMSx0aGlzLl9jZWxsSW5kZXgpKSxkPXB9cmV0dXJuIHRoaXMuX2NlbGxJbmRleCsrLGR9fSksZj17R2VuZXJhbDowLDA6MSxcIjAuMDBcIjoyLFwiIywjIzBcIjozLFwiIywjIzAuMDBcIjo0LFwiMCVcIjo5LFwiMC4wMCVcIjoxMCxcIjAuMDBFKzAwXCI6MTEsXCIjID8vP1wiOjEyLFwiIyA/Py8/P1wiOjEzLFwibW0tZGQteXlcIjoxNCxcImQtbW1tLXl5XCI6MTUsXCJkLW1tbVwiOjE2LFwibW1tLXl5XCI6MTcsXCJoOm1tIEFNL1BNXCI6MTgsXCJoOm1tOnNzIEFNL1BNXCI6MTksXCJoOm1tXCI6MjAsXCJoOm1tOnNzXCI6MjEsXCJtL2QveXkgaDptbVwiOjIyLFwiIywjIzAgOygjLCMjMClcIjozNyxcIiMsIyMwIDtbUmVkXSgjLCMjMClcIjozOCxcIiMsIyMwLjAwOygjLCMjMC4wMClcIjozOSxcIiMsIyMwLjAwO1tSZWRdKCMsIyMwLjAwKVwiOjQwLFwibW06c3NcIjo0NSxcIltoXTptbTpzc1wiOjQ2LFwibW1zcy4wXCI6NDcsXCIjIzAuMEUrMFwiOjQ4LFwiQFwiOjQ5LFwiWyQtNDA0XWUvbS9kXCI6MjcsXCJtL2QveXlcIjozMCx0MDo1OSxcInQwLjAwXCI6NjAsXCJ0IywjIzBcIjo2MSxcInQjLCMjMC4wMFwiOjYyLFwidDAlXCI6NjcsXCJ0MC4wMCVcIjo2OCxcInQjID8vP1wiOjY5LFwidCMgPz8vPz9cIjo3MH0sZz1lLkNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnM9ZXx8e30sdGhpcy5fc3RyaW5ncz17aW5kZXhlczp7fSxjb3VudDowLHVuaXF1ZUNvdW50OjB9LHRoaXMuX3N0eWxlcz1bXSx0aGlzLl9zaGVldHM9JC5tYXAodGhpcy5vcHRpb25zLnNoZWV0c3x8W10sJC5wcm94eShmdW5jdGlvbihlKXtyZXR1cm4gbmV3IHAoZSx0aGlzLl9zdHJpbmdzLHRoaXMuX3N0eWxlcyl9LHRoaXMpKX0sdG9EYXRhVVJMOmZ1bmN0aW9uKCl7dmFyIHQsbixjLHAsZyxtLHYsXyx5LHcsYixrLHg7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIEpTWmlwKXRocm93IEVycm9yKFwiSlNaaXAgbm90IGZvdW5kLiBDaGVjayBodHRwOi8vZG9jcy50ZWxlcmlrLmNvbS9rZW5kby11aS9mcmFtZXdvcmsvZXhjZWwvaW50cm9kdWN0aW9uI3JlcXVpcmVtZW50cyBmb3IgbW9yZSBkZXRhaWxzLlwiKTtmb3IodD1uZXcgSlNaaXAsbj10LmZvbGRlcihcImRvY1Byb3BzXCIpLG4uZmlsZShcImNvcmUueG1sXCIsbyh7Y3JlYXRvcjp0aGlzLm9wdGlvbnMuY3JlYXRvcnx8XCJLZW5kbyBVSVwiLGxhc3RNb2RpZmllZEJ5OnRoaXMub3B0aW9ucy5jcmVhdG9yfHxcIktlbmRvIFVJXCIsY3JlYXRlZDp0aGlzLm9wdGlvbnMuZGF0ZXx8KG5ldyBEYXRlKS50b0pTT04oKSxtb2RpZmllZDp0aGlzLm9wdGlvbnMuZGF0ZXx8KG5ldyBEYXRlKS50b0pTT04oKX0pKSxjPXRoaXMuX3NoZWV0cy5sZW5ndGgsbi5maWxlKFwiYXBwLnhtbFwiLGEoe3NoZWV0czp0aGlzLl9zaGVldHN9KSkscD10LmZvbGRlcihcIl9yZWxzXCIpLHAuZmlsZShcIi5yZWxzXCIsciksZz10LmZvbGRlcihcInhsXCIpLG09Zy5mb2xkZXIoXCJfcmVsc1wiKSxtLmZpbGUoXCJ3b3JrYm9vay54bWwucmVsc1wiLGQoe2NvdW50OmN9KSksZy5maWxlKFwid29ya2Jvb2sueG1sXCIsbCh7c2hlZXRzOnRoaXMuX3NoZWV0c30pKSx2PWcuZm9sZGVyKFwid29ya3NoZWV0c1wiKSxfPTA7Yz5fO18rKyl2LmZpbGUoZS5mb3JtYXQoXCJzaGVldHswfS54bWxcIixfKzEpLHRoaXMuX3NoZWV0c1tfXS50b1hNTCgpKTtcbnJldHVybiB5PSQubWFwKHRoaXMuX3N0eWxlcywkLnBhcnNlSlNPTiksdz1mdW5jdGlvbihlKXtyZXR1cm4gZS51bmRlcmxpbmV8fGUuYm9sZHx8ZS5pdGFsaWN8fGUuY29sb3J8fGUuZm9udE5hbWV8fGUuZm9udFNpemV9LGI9JC5tYXAoeSxmdW5jdGlvbihlKXtyZXR1cm4gZS5jb2xvciYmKGUuY29sb3I9aShlLmNvbG9yKSksdyhlKT9lOnZvaWQgMH0pLGs9JC5tYXAoeSxmdW5jdGlvbihlKXtyZXR1cm4gZS5mb3JtYXQmJnZvaWQgMD09PWZbZS5mb3JtYXRdP2U6dm9pZCAwfSkseD0kLm1hcCh5LGZ1bmN0aW9uKGUpe3JldHVybiBlLmJhY2tncm91bmQ/KGUuYmFja2dyb3VuZD1pKGUuYmFja2dyb3VuZCksZSk6dm9pZCAwfSksZy5maWxlKFwic3R5bGVzLnhtbFwiLGgoe2ZvbnRzOmIsZmlsbHM6eCxmb3JtYXRzOmssc3R5bGVzOiQubWFwKHksZnVuY3Rpb24oZSl7dmFyIHQ9e307cmV0dXJuIHcoZSkmJih0LmZvbnRJZD0kLmluQXJyYXkoZSxiKSsxKSxlLmJhY2tncm91bmQmJih0LmZpbGxJZD0kLmluQXJyYXkoZSx4KSsyKSx0LmhBbGlnbj1lLmhBbGlnbix0LnZBbGlnbj1lLnZBbGlnbixlLmZvcm1hdCYmKHQubnVtRm10SWQ9dm9pZCAwIT09ZltlLmZvcm1hdF0/ZltlLmZvcm1hdF06MTY1KyQuaW5BcnJheShlLGspKSx0fSl9KSksZy5maWxlKFwic2hhcmVkU3RyaW5ncy54bWxcIix1KHRoaXMuX3N0cmluZ3MpKSx0LmZpbGUoXCJbQ29udGVudF9UeXBlc10ueG1sXCIscyh7Y291bnQ6Y30pKSxcImRhdGE6YXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQ7YmFzZTY0LFwiK3QuZ2VuZXJhdGUoe2NvbXByZXNzaW9uOlwiREVGTEFURVwifSl9fSk7ZS5vb3htbD17V29ya2Jvb2s6ZyxXb3Jrc2hlZXQ6cH19KGtlbmRvKSxmdW5jdGlvbihlLHQpe3QuRXhjZWxFeHBvcnRlcj10LkNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihuKXtuLmNvbHVtbnM9dGhpcy5fdHJpbUNvbHVtbnMobi5jb2x1bW5zfHxbXSksdGhpcy5jb2x1bW5zPWUubWFwKHRoaXMuX2xlYWZDb2x1bW5zKG4uY29sdW1uc3x8W10pLHRoaXMuX3ByZXBhcmVDb2x1bW4pLHRoaXMub3B0aW9ucz1uO3ZhciBpPW4uZGF0YVNvdXJjZTt0aGlzLmRhdGFTb3VyY2U9aSBpbnN0YW5jZW9mIHQuZGF0YS5EYXRhU291cmNlP25ldyBpLmNvbnN0cnVjdG9yKGUuZXh0ZW5kKHt9LGkub3B0aW9ucyx7cGFnZTpuLmFsbFBhZ2VzPzA6aS5wYWdlKCksZmlsdGVyOmkuZmlsdGVyKCkscGFnZVNpemU6bi5hbGxQYWdlcz9pLnRvdGFsKCk6aS5wYWdlU2l6ZSgpLHNvcnQ6aS5zb3J0KCksZ3JvdXA6aS5ncm91cCgpLGFnZ3JlZ2F0ZTppLmFnZ3JlZ2F0ZSgpfSkpOnQuZGF0YS5EYXRhU291cmNlLmNyZWF0ZShpKSxpIGluc3RhbmNlb2YgdC5kYXRhLlRyZWVMaXN0RGF0YVNvdXJjZSYmdGhpcy5kYXRhU291cmNlLmRhdGEoaS52aWV3KCkudG9KU09OKCkpfSxfdHJpbUNvbHVtbnM6ZnVuY3Rpb24odCl7dmFyIG49dGhpcztyZXR1cm4gZS5ncmVwKHQsZnVuY3Rpb24oZSl7dmFyIHQ9ISghZS5maWVsZHx8ZS5oaWRkZW4pO3JldHVybiF0JiZlLmNvbHVtbnMmJih0PW4uX3RyaW1Db2x1bW5zKGUuY29sdW1ucykubGVuZ3RoPjApLHR9KX0sX2xlYWZDb2x1bW5zOmZ1bmN0aW9uKGUpe3ZhciB0LG49W107Zm9yKHQ9MDtlLmxlbmd0aD50O3QrKyllW3RdLmNvbHVtbnM/bj1uLmNvbmNhdCh0aGlzLl9sZWFmQ29sdW1ucyhlW3RdLmNvbHVtbnMpKTpuLnB1c2goZVt0XSk7cmV0dXJuIG59LHdvcmtib29rOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5kYXRhU291cmNlLmZldGNoKCk7cmV0dXJuIHQudGhlbihlLnByb3h5KGZ1bmN0aW9uKCl7cmV0dXJue3NoZWV0czpbe2NvbHVtbnM6dGhpcy5fY29sdW1ucygpLHJvd3M6dGhpcy5fcm93cygpLGZyZWV6ZVBhbmU6dGhpcy5fZnJlZXplUGFuZSgpLGZpbHRlcjp0aGlzLl9maWx0ZXIoKX1dfX0sdGhpcykpfSxfcHJlcGFyZUNvbHVtbjpmdW5jdGlvbihuKXtyZXR1cm4gbi5maWVsZCYmIW4uaGlkZGVuP2UuZXh0ZW5kKHt9LG4se2dyb3VwSGVhZGVyVGVtcGxhdGU6dC50ZW1wbGF0ZShuLmdyb3VwSGVhZGVyVGVtcGxhdGV8fFwiJHt0aXRsZX06ICR7dmFsdWV9XCIpLGdyb3VwRm9vdGVyVGVtcGxhdGU6bi5ncm91cEZvb3RlclRlbXBsYXRlP3QudGVtcGxhdGUobi5ncm91cEZvb3RlclRlbXBsYXRlKTpudWxsLGZvb3RlclRlbXBsYXRlOm4uZm9vdGVyVGVtcGxhdGU/dC50ZW1wbGF0ZShuLmZvb3RlclRlbXBsYXRlKTpudWxsfSk6dm9pZCAwfSxfZmlsdGVyOmZ1bmN0aW9uKCl7aWYoIXRoaXMub3B0aW9ucy5maWx0ZXJhYmxlKXJldHVybiBudWxsO3ZhciBlPXRoaXMuX2RlcHRoKCk7cmV0dXJue2Zyb206ZSx0bzplK3RoaXMuY29sdW1ucy5sZW5ndGgtMX19LF9kYXRhUm93czpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXMuX2RlcHRoKCkscj1lLm1hcCh0LGUucHJveHkoZnVuY3Rpb24odCl7dmFyIHIsbyxhLHMsbCxjLGQsdTtyZXR1cm4gdGhpcy5faGllcmFyY2hpY2FsKCkmJihuPXRoaXMuZGF0YVNvdXJjZS5sZXZlbCh0KSsxKSxyPWUubWFwKEFycmF5KG4pLGZ1bmN0aW9uKCl7cmV0dXJue2JhY2tncm91bmQ6XCIjZGZkZmRmXCIsY29sb3I6XCIjMzMzXCJ9fSksaSYmdC5pdGVtcz8obz1lLmdyZXAodGhpcy5jb2x1bW5zLGZ1bmN0aW9uKGUpe3JldHVybiBlLmZpZWxkPT10LmZpZWxkfSlbMF0sYT1vJiZvLnRpdGxlP28udGl0bGU6dC5maWVsZCxzPW8/by5ncm91cEhlYWRlclRlbXBsYXRlOm51bGwsbD1hK1wiOiBcIit0LnZhbHVlLGM9ZS5leHRlbmQoe3RpdGxlOmEsZmllbGQ6dC5maWVsZCx2YWx1ZTp0LnZhbHVlLGFnZ3JlZ2F0ZXM6dC5hZ2dyZWdhdGVzfSx0LmFnZ3JlZ2F0ZXNbdC5maWVsZF0pLHMmJihsPXMoYykpLHIucHVzaCh7dmFsdWU6bCxiYWNrZ3JvdW5kOlwiI2RmZGZkZlwiLGNvbG9yOlwiIzMzM1wiLGNvbFNwYW46dGhpcy5jb2x1bW5zLmxlbmd0aCtpLW59KSxkPXRoaXMuX2RhdGFSb3dzKHQuaXRlbXMsbisxKSxkLnVuc2hpZnQoe3R5cGU6XCJncm91cC1oZWFkZXJcIixjZWxsczpyfSksZC5jb25jYXQodGhpcy5fZm9vdGVyKHQsbisxKSkpOih1PWUubWFwKHRoaXMuY29sdW1ucyxlLnByb3h5KHRoaXMuX2NlbGwsdGhpcyx0KSksdGhpcy5faGllcmFyY2hpY2FsKCkmJih1WzBdLmNvbFNwYW49aS1uKzEpLHt0eXBlOlwiZGF0YVwiLGNlbGxzOnIuY29uY2F0KHUpfSl9LHRoaXMpKTtyZXR1cm4gcn0sX2Zvb3RlcjpmdW5jdGlvbih0LG4pe3ZhciBpPVtdLHI9ITEsbz1lLm1hcCh0aGlzLmNvbHVtbnMsZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ3JvdXBGb290ZXJUZW1wbGF0ZT8ocj0hMCx7YmFja2dyb3VuZDpcIiNkZmRmZGZcIixjb2xvcjpcIiMzMzNcIix2YWx1ZTplLmdyb3VwRm9vdGVyVGVtcGxhdGUodC5hZ2dyZWdhdGVzW2UuZmllbGRdKX0pOntiYWNrZ3JvdW5kOlwiI2RmZGZkZlwiLGNvbG9yOlwiIzMzM1wifX0pO3JldHVybiByJiZpLnB1c2goe3R5cGU6XCJncm91cC1mb290ZXJcIixjZWxsczplLm1hcChBcnJheShuKSxmdW5jdGlvbigpe3JldHVybntiYWNrZ3JvdW5kOlwiI2RmZGZkZlwiLGNvbG9yOlwiIzMzM1wifX0pLmNvbmNhdChvKX0pLGl9LF9pc0NvbHVtblZpc2libGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3Zpc2libGVDb2x1bW5zKFtlXSkubGVuZ3RoPjAmJihlLmZpZWxkfHxlLmNvbHVtbnMpfSxfdmlzaWJsZUNvbHVtbnM6ZnVuY3Rpb24odCl7dmFyIG49dGhpcztyZXR1cm4gZS5ncmVwKHQsZnVuY3Rpb24oZSl7dmFyIHQ9IWUuaGlkZGVuO3JldHVybiB0JiZlLmNvbHVtbnMmJih0PW4uX3Zpc2libGVDb2x1bW5zKGUuY29sdW1ucykubGVuZ3RoPjApLHR9KX0sX2hlYWRlclJvdzpmdW5jdGlvbih0LG4pe3ZhciBpPWUubWFwKHQuY2VsbHMsZnVuY3Rpb24oZSl7cmV0dXJue2JhY2tncm91bmQ6XCIjN2E3YTdhXCIsY29sb3I6XCIjZmZmXCIsdmFsdWU6ZS50aXRsZSxjb2xTcGFuOmUuY29sU3Bhbj4xP2UuY29sU3BhbjoxLHJvd1NwYW46dC5yb3dTcGFuPjEmJiFlLmNvbFNwYW4/dC5yb3dTcGFuOjF9fSk7cmV0dXJuIHRoaXMuX2hpZXJhcmNoaWNhbCgpJiYoaVswXS5jb2xTcGFuPXRoaXMuX2RlcHRoKCkrMSkse3R5cGU6XCJoZWFkZXJcIixjZWxsczplLm1hcChBcnJheShuLmxlbmd0aCksZnVuY3Rpb24oKXtyZXR1cm57YmFja2dyb3VuZDpcIiM3YTdhN2FcIixjb2xvcjpcIiNmZmZcIn19KS5jb25jYXQoaSl9fSxfcHJlcGVuZEhlYWRlclJvd3M6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLmRhdGFTb3VyY2UuZ3JvdXAoKSxpPVt7cm93U3BhbjoxLGNlbGxzOltdLGluZGV4OjB9XTtmb3IodGhpcy5fcHJlcGFyZUhlYWRlclJvd3MoaSx0aGlzLm9wdGlvbnMuY29sdW1ucyksdD1pLmxlbmd0aC0xO3Q+PTA7dC0tKWUudW5zaGlmdCh0aGlzLl9oZWFkZXJSb3coaVt0XSxuKSl9LF9wcmVwYXJlSGVhZGVyUm93czpmdW5jdGlvbihlLHQsbixpKXt2YXIgcixvLGEscz1pfHxlW2UubGVuZ3RoLTFdLGw9ZVtzLmluZGV4KzFdLGM9MDtmb3IoYT0wO3QubGVuZ3RoPmE7YSsrKXI9dFthXSx0aGlzLl9pc0NvbHVtblZpc2libGUocikmJihvPXt0aXRsZTpyLnRpdGxlfHxyLmZpZWxkLGNvbFNwYW46MH0scy5jZWxscy5wdXNoKG8pLHIuY29sdW1ucyYmci5jb2x1bW5zLmxlbmd0aCYmKGx8fChsPXtyb3dTcGFuOjAsY2VsbHM6W10saW5kZXg6ZS5sZW5ndGh9LGUucHVzaChsKSksby5jb2xTcGFuPXRoaXMuX3RyaW1Db2x1bW5zKHRoaXMuX3Zpc2libGVDb2x1bW5zKHIuY29sdW1ucykpLmxlbmd0aCx0aGlzLl9wcmVwYXJlSGVhZGVyUm93cyhlLHIuY29sdW1ucyxvLGwpLGMrPW8uY29sU3Bhbi0xLHMucm93U3Bhbj1lLmxlbmd0aC1zLmluZGV4KSk7biYmKG4uY29sU3Bhbis9Yyl9LF9yb3dzOmZ1bmN0aW9uKCl7dmFyIHQsbixpPXRoaXMuZGF0YVNvdXJjZS5ncm91cCgpLHI9dGhpcy5fZGF0YVJvd3ModGhpcy5kYXRhU291cmNlLnZpZXcoKSwwKTtyZXR1cm4gdGhpcy5jb2x1bW5zLmxlbmd0aCYmKHRoaXMuX3ByZXBlbmRIZWFkZXJSb3dzKHIpLHQ9ITEsbj1lLm1hcCh0aGlzLmNvbHVtbnMsZS5wcm94eShmdW5jdGlvbihlKXtyZXR1cm4gZS5mb290ZXJUZW1wbGF0ZT8odD0hMCx7YmFja2dyb3VuZDpcIiNkZmRmZGZcIixjb2xvcjpcIiMzMzNcIix2YWx1ZTplLmZvb3RlclRlbXBsYXRlKHRoaXMuZGF0YVNvdXJjZS5hZ2dyZWdhdGVzKClbZS5maWVsZF0pfSk6e2JhY2tncm91bmQ6XCIjZGZkZmRmXCIsY29sb3I6XCIjMzMzXCJ9fSx0aGlzKSksdCYmci5wdXNoKHt0eXBlOlwiZm9vdGVyXCIsY2VsbHM6ZS5tYXAoQXJyYXkoaS5sZW5ndGgpLGZ1bmN0aW9uKCl7cmV0dXJue2JhY2tncm91bmQ6XCIjZGZkZmRmXCIsY29sb3I6XCIjMzMzXCJ9fSkuY29uY2F0KG4pfSkpLHJ9LF9oZWFkZXJEZXB0aDpmdW5jdGlvbihlKXt2YXIgdCxuLGk9MSxyPTA7Zm9yKHQ9MDtlLmxlbmd0aD50O3QrKyllW3RdLmNvbHVtbnMmJihuPXRoaXMuX2hlYWRlckRlcHRoKGVbdF0uY29sdW1ucyksbj5yJiYocj1uKSk7cmV0dXJuIGkrcn0sX2ZyZWV6ZVBhbmU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl92aXNpYmxlQ29sdW1ucyh0aGlzLm9wdGlvbnMuY29sdW1uc3x8W10pLG49dGhpcy5fdHJpbUNvbHVtbnModGhpcy5fbGVhZkNvbHVtbnMoZS5ncmVwKHQsZnVuY3Rpb24oZSl7cmV0dXJuIGUubG9ja2VkfSkpKS5sZW5ndGg7cmV0dXJue3Jvd1NwbGl0OnRoaXMuX2hlYWRlckRlcHRoKHQpLGNvbFNwbGl0Om4/bit0aGlzLmRhdGFTb3VyY2UuZ3JvdXAoKS5sZW5ndGg6MH19LF9jZWxsOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuZmllbGQ/e3ZhbHVlOmUuZ2V0KHQuZmllbGQpfTp2b2lkIDB9LF9oaWVyYXJjaGljYWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLmhpZXJhcmNoeSYmdGhpcy5kYXRhU291cmNlLmxldmVsfSxfZGVwdGg6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT10aGlzLmRhdGFTb3VyY2Uscj0wO2lmKHRoaXMuX2hpZXJhcmNoaWNhbCgpKXtmb3IoZT1pLnZpZXcoKSx0PTA7ZS5sZW5ndGg+dDt0Kyspbj1pLmxldmVsKGVbdF0pLG4+ciYmKHI9bik7cisrfWVsc2Ugcj1pLmdyb3VwKCkubGVuZ3RoO3JldHVybiByfSxfY29sdW1uczpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2RlcHRoKCksbj1lLm1hcChBcnJheSh0KSxmdW5jdGlvbigpe3JldHVybnt3aWR0aDoyMH19KTtyZXR1cm4gbi5jb25jYXQoZS5tYXAodGhpcy5jb2x1bW5zLGZ1bmN0aW9uKGUpe3JldHVybnt3aWR0aDpwYXJzZUludChlLndpZHRoLDEwKSxhdXRvV2lkdGg6ZS53aWR0aD8hMTohMH19KSl9fSksdC5FeGNlbE1peGluPXtleHRlbmQ6ZnVuY3Rpb24odCl7dC5ldmVudHMucHVzaChcImV4Y2VsRXhwb3J0XCIpLHQub3B0aW9ucy5leGNlbD1lLmV4dGVuZCh0Lm9wdGlvbnMuZXhjZWwsdGhpcy5vcHRpb25zKSx0LnNhdmVBc0V4Y2VsPXRoaXMuc2F2ZUFzRXhjZWx9LG9wdGlvbnM6e3Byb3h5VVJMOlwiXCIsYWxsUGFnZXM6ITEsZmlsdGVyYWJsZTohMSxmaWxlTmFtZTpcIkV4cG9ydC54bHN4XCJ9LHNhdmVBc0V4Y2VsOmZ1bmN0aW9uKCl7dmFyIG49dGhpcy5vcHRpb25zLmV4Y2VsfHx7fSxpPW5ldyB0LkV4Y2VsRXhwb3J0ZXIoe2NvbHVtbnM6dGhpcy5jb2x1bW5zLGRhdGFTb3VyY2U6dGhpcy5kYXRhU291cmNlLGFsbFBhZ2VzOm4uYWxsUGFnZXMsZmlsdGVyYWJsZTpuLmZpbHRlcmFibGUsaGllcmFyY2h5Om4uaGllcmFyY2h5fSk7aS53b3JrYm9vaygpLnRoZW4oZS5wcm94eShmdW5jdGlvbihlKXtpZighdGhpcy50cmlnZ2VyKFwiZXhjZWxFeHBvcnRcIix7d29ya2Jvb2s6ZX0pKXt2YXIgaT1uZXcgdC5vb3htbC5Xb3JrYm9vayhlKTt0LnNhdmVBcyh7ZGF0YVVSSTppLnRvRGF0YVVSTCgpLGZpbGVOYW1lOmUuZmlsZU5hbWV8fG4uZmlsZU5hbWUscHJveHlVUkw6bi5wcm94eVVSTCxmb3JjZVByb3h5Om4uZm9yY2VQcm94eX0pfX0sdGhpcykpfX19KGtlbmRvLmpRdWVyeSxrZW5kbyksZnVuY3Rpb24oKXtrZW5kby5kYXRhLnRyYW5zcG9ydHMuc2lnbmFscj1rZW5kby5kYXRhLlJlbW90ZVRyYW5zcG9ydC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbj1lJiZlLnNpZ25hbHI/ZS5zaWduYWxyOnt9LGk9bi5wcm9taXNlO2lmKCFpKXRocm93IEVycm9yKCdUaGUgXCJwcm9taXNlXCIgb3B0aW9uIG11c3QgYmUgc2V0LicpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGkuZG9uZXx8XCJmdW5jdGlvblwiIT10eXBlb2YgaS5mYWlsKXRocm93IEVycm9yKCdUaGUgXCJwcm9taXNlXCIgb3B0aW9uIG11c3QgYmUgYSBQcm9taXNlLicpO2lmKHRoaXMucHJvbWlzZT1pLHQ9bi5odWIsIXQpdGhyb3cgRXJyb3IoJ1RoZSBcImh1YlwiIG9wdGlvbiBtdXN0IGJlIHNldC4nKTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0Lm9ufHxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0Lmludm9rZSl0aHJvdyBFcnJvcignVGhlIFwiaHViXCIgb3B0aW9uIGlzIG5vdCBhIHZhbGlkIFNpZ25hbFIgaHViIHByb3h5LicpO3RoaXMuaHViPXQsa2VuZG8uZGF0YS5SZW1vdGVUcmFuc3BvcnQuZm4uaW5pdC5jYWxsKHRoaXMsZSl9LHB1c2g6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5vcHRpb25zLnNpZ25hbHIuY2xpZW50fHx7fTt0LmNyZWF0ZSYmdGhpcy5odWIub24odC5jcmVhdGUsZS5wdXNoQ3JlYXRlKSx0LnVwZGF0ZSYmdGhpcy5odWIub24odC51cGRhdGUsZS5wdXNoVXBkYXRlKSx0LmRlc3Ryb3kmJnRoaXMuaHViLm9uKHQuZGVzdHJveSxlLnB1c2hEZXN0cm95KX0sX2NydWQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcy5odWIsbz10aGlzLm9wdGlvbnMuc2lnbmFsci5zZXJ2ZXI7aWYoIW98fCFvW3RdKXRocm93IEVycm9yKGtlbmRvLmZvcm1hdCgnVGhlIFwic2VydmVyLnswfVwiIG9wdGlvbiBtdXN0IGJlIHNldC4nLHQpKTtuPVtvW3RdXSxpPXRoaXMucGFyYW1ldGVyTWFwKGUuZGF0YSx0KSwkLmlzRW1wdHlPYmplY3QoaSl8fG4ucHVzaChpKSx0aGlzLnByb21pc2UuZG9uZShmdW5jdGlvbigpe3IuaW52b2tlLmFwcGx5KHIsbikuZG9uZShlLnN1Y2Nlc3MpLmZhaWwoZS5lcnJvcil9KX0scmVhZDpmdW5jdGlvbihlKXt0aGlzLl9jcnVkKGUsXCJyZWFkXCIpfSxjcmVhdGU6ZnVuY3Rpb24oZSl7dGhpcy5fY3J1ZChlLFwiY3JlYXRlXCIpfSx1cGRhdGU6ZnVuY3Rpb24oZSl7dGhpcy5fY3J1ZChlLFwidXBkYXRlXCIpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3RoaXMuX2NydWQoZSxcImRlc3Ryb3lcIil9fSl9KCksZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIGkoZSxyKXt2YXIgYSxkO2lmKG51bGw9PWV8fFwibm9uZVwiPT1lKXJldHVybiBudWxsO2lmKGUgaW5zdGFuY2VvZiBzKXJldHVybiBlO2lmKGU9ZS50b0xvd2VyQ2FzZSgpLGE9by5leGVjKGUpKXJldHVybiBlPVwidHJhbnNwYXJlbnRcIj09YVsxXT9uZXcgbCgxLDEsMSwwKTppKHUubmFtZWRDb2xvcnNbYVsxXV0sciksZS5tYXRjaD1bYVsxXV0sZTtpZigoYT0vXiM/KFswLTlhLWZdezJ9KShbMC05YS1mXXsyfSkoWzAtOWEtZl17Mn0pL2kuZXhlYyhlKSk/ZD1uZXcgYyhuKGFbMV0sMTYpLG4oYVsyXSwxNiksbihhWzNdLDE2KSwxKTooYT0vXiM/KFswLTlhLWZdKShbMC05YS1mXSkoWzAtOWEtZl0pL2kuZXhlYyhlKSk/ZD1uZXcgYyhuKGFbMV0rYVsxXSwxNiksbihhWzJdK2FbMl0sMTYpLG4oYVszXSthWzNdLDE2KSwxKTooYT0vXnJnYlxcKFxccyooWzAtOV0rKVxccyosXFxzKihbMC05XSspXFxzKixcXHMqKFswLTldKylcXHMqXFwpLy5leGVjKGUpKT9kPW5ldyBjKG4oYVsxXSwxMCksbihhWzJdLDEwKSxuKGFbM10sMTApLDEpOihhPS9ecmdiYVxcKFxccyooWzAtOV0rKVxccyosXFxzKihbMC05XSspXFxzKixcXHMqKFswLTldKylcXHMqLFxccyooWzAtOS5dKylcXHMqXFwpLy5leGVjKGUpKT9kPW5ldyBjKG4oYVsxXSwxMCksbihhWzJdLDEwKSxuKGFbM10sMTApLHQoYVs0XSkpOihhPS9ecmdiXFwoXFxzKihbMC05XSpcXC4/WzAtOV0rKSVcXHMqLFxccyooWzAtOV0qXFwuP1swLTldKyklXFxzKixcXHMqKFswLTldKlxcLj9bMC05XSspJVxccypcXCkvLmV4ZWMoZSkpP2Q9bmV3IGwodChhWzFdKS8xMDAsdChhWzJdKS8xMDAsdChhWzNdKS8xMDAsMSk6KGE9L15yZ2JhXFwoXFxzKihbMC05XSpcXC4/WzAtOV0rKSVcXHMqLFxccyooWzAtOV0qXFwuP1swLTldKyklXFxzKixcXHMqKFswLTldKlxcLj9bMC05XSspJVxccyosXFxzKihbMC05Ll0rKVxccypcXCkvLmV4ZWMoZSkpJiYoZD1uZXcgbCh0KGFbMV0pLzEwMCx0KGFbMl0pLzEwMCx0KGFbM10pLzEwMCx0KGFbNF0pKSksZClkLm1hdGNoPWE7ZWxzZSBpZighcil0aHJvdyBFcnJvcihcIkNhbm5vdCBwYXJzZSBjb2xvcjogXCIrZSk7cmV0dXJuIGR9ZnVuY3Rpb24gcihlLHQsbil7Zm9yKG58fChuPVwiMFwiKSxlPWUudG9TdHJpbmcoMTYpO3Q+ZS5sZW5ndGg7KWU9XCIwXCIrZTtyZXR1cm4gZX12YXIgbyxhLHMsbCxjLGQsdT1mdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGE9dGhpcyxzPXUuZm9ybWF0cztpZigxPT09YXJndW1lbnRzLmxlbmd0aClmb3IoZT1hLnJlc29sdmVDb2xvcihlKSxyPTA7cy5sZW5ndGg+cjtyKyspdD1zW3JdLnJlLG49c1tyXS5wcm9jZXNzLGk9dC5leGVjKGUpLGkmJihvPW4oaSksYS5yPW9bMF0sYS5nPW9bMV0sYS5iPW9bMl0pO2Vsc2UgYS5yPWFyZ3VtZW50c1swXSxhLmc9YXJndW1lbnRzWzFdLGEuYj1hcmd1bWVudHNbMl07YS5yPWEubm9ybWFsaXplQnl0ZShhLnIpLGEuZz1hLm5vcm1hbGl6ZUJ5dGUoYS5nKSxhLmI9YS5ub3JtYWxpemVCeXRlKGEuYil9O3UucHJvdG90eXBlPXt0b0hleDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLnBhZERpZ2l0LG49ZS5yLnRvU3RyaW5nKDE2KSxpPWUuZy50b1N0cmluZygxNikscj1lLmIudG9TdHJpbmcoMTYpO3JldHVyblwiI1wiK3QobikrdChpKSt0KHIpfSxyZXNvbHZlQ29sb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZXx8XCJibGFja1wiLFwiI1wiPT1lLmNoYXJBdCgwKSYmKGU9ZS5zdWJzdHIoMSw2KSksZT1lLnJlcGxhY2UoLyAvZyxcIlwiKSxlPWUudG9Mb3dlckNhc2UoKSxlPXUubmFtZWRDb2xvcnNbZV18fGV9LG5vcm1hbGl6ZUJ5dGU6ZnVuY3Rpb24oZSl7cmV0dXJuIDA+ZXx8aXNOYU4oZSk/MDplPjI1NT8yNTU6ZX0scGFkRGlnaXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLmxlbmd0aD9cIjBcIitlOmV9LGJyaWdodG5lc3M6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPU1hdGgucm91bmQ7cmV0dXJuIHQucj1uKHQubm9ybWFsaXplQnl0ZSh0LnIqZSkpLHQuZz1uKHQubm9ybWFsaXplQnl0ZSh0LmcqZSkpLHQuYj1uKHQubm9ybWFsaXplQnl0ZSh0LmIqZSkpLHR9LHBlcmNCcmlnaHRuZXNzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gTWF0aC5zcXJ0KC4yNDEqZS5yKmUucisuNjkxKmUuZyplLmcrLjA2OCplLmIqZS5iKX19LHUuZm9ybWF0cz1be3JlOi9ecmdiXFwoKFxcZHsxLDN9KSxcXHMqKFxcZHsxLDN9KSxcXHMqKFxcZHsxLDN9KVxcKSQvLHByb2Nlc3M6ZnVuY3Rpb24oZSl7cmV0dXJuW24oZVsxXSwxMCksbihlWzJdLDEwKSxuKGVbM10sMTApXX19LHtyZTovXihcXHd7Mn0pKFxcd3syfSkoXFx3ezJ9KSQvLHByb2Nlc3M6ZnVuY3Rpb24oZSl7cmV0dXJuW24oZVsxXSwxNiksbihlWzJdLDE2KSxuKGVbM10sMTYpXX19LHtyZTovXihcXHd7MX0pKFxcd3sxfSkoXFx3ezF9KSQvLHByb2Nlc3M6ZnVuY3Rpb24oZSl7cmV0dXJuW24oZVsxXStlWzFdLDE2KSxuKGVbMl0rZVsyXSwxNiksbihlWzNdK2VbM10sMTYpXX19XSx1Lm5hbWVkQ29sb3JzPXthcXVhOlwiMDBmZmZmXCIsYXp1cmU6XCJmMGZmZmZcIixiZWlnZTpcImY1ZjVkY1wiLGJsYWNrOlwiMDAwMDAwXCIsYmx1ZTpcIjAwMDBmZlwiLGJyb3duOlwiYTUyYTJhXCIsY29yYWw6XCJmZjdmNTBcIixjeWFuOlwiMDBmZmZmXCIsZGFya2JsdWU6XCIwMDAwOGJcIixkYXJrY3lhbjpcIjAwOGI4YlwiLGRhcmtncmF5OlwiYTlhOWE5XCIsZGFya2dyZWVuOlwiMDA2NDAwXCIsZGFya29yYW5nZTpcImZmOGMwMFwiLGRhcmtyZWQ6XCI4YjAwMDBcIixkaW1ncmF5OlwiNjk2OTY5XCIsZnVjaHNpYTpcImZmMDBmZlwiLGdvbGQ6XCJmZmQ3MDBcIixnb2xkZW5yb2Q6XCJkYWE1MjBcIixncmF5OlwiODA4MDgwXCIsZ3JlZW46XCIwMDgwMDBcIixncmVlbnllbGxvdzpcImFkZmYyZlwiLGluZGlnbzpcIjRiMDA4MlwiLGl2b3J5OlwiZmZmZmYwXCIsa2hha2k6XCJmMGU2OGNcIixsaWdodGJsdWU6XCJhZGQ4ZTZcIixsaWdodGdyZXk6XCJkM2QzZDNcIixsaWdodGdyZWVuOlwiOTBlZTkwXCIsbGlnaHRwaW5rOlwiZmZiNmMxXCIsbGlnaHR5ZWxsb3c6XCJmZmZmZTBcIixsaW1lOlwiMDBmZjAwXCIsbGltZWdyZWVuOlwiMzJjZDMyXCIsbGluZW46XCJmYWYwZTZcIixtYWdlbnRhOlwiZmYwMGZmXCIsbWFyb29uOlwiODAwMDAwXCIsbWVkaXVtYmx1ZTpcIjAwMDBjZFwiLG5hdnk6XCIwMDAwODBcIixvbGl2ZTpcIjgwODAwMFwiLG9yYW5nZTpcImZmYTUwMFwiLG9yYW5nZXJlZDpcImZmNDUwMFwiLG9yY2hpZDpcImRhNzBkNlwiLHBpbms6XCJmZmMwY2JcIixwbHVtOlwiZGRhMGRkXCIscHVycGxlOlwiODAwMDgwXCIscmVkOlwiZmYwMDAwXCIscm95YWxibHVlOlwiNDE2OWUxXCIsc2FsbW9uOlwiZmE4MDcyXCIsc2lsdmVyOlwiYzBjMGMwXCIsc2t5Ymx1ZTpcIjg3Y2VlYlwiLHNsYXRlYmx1ZTpcIjZhNWFjZFwiLHNsYXRlZ3JheTpcIjcwODA5MFwiLHNub3c6XCJmZmZhZmFcIixzdGVlbGJsdWU6XCI0NjgyYjRcIix0YW46XCJkMmI0OGNcIix0ZWFsOlwiMDA4MDgwXCIsdG9tYXRvOlwiZmY2MzQ3XCIsdHVycXVvaXNlOlwiNDBlMGQwXCIsdmlvbGV0OlwiZWU4MmVlXCIsd2hlYXQ6XCJmNWRlYjNcIix3aGl0ZTpcImZmZmZmZlwiLHdoaXRlc21va2U6XCJmNWY1ZjVcIix5ZWxsb3c6XCJmZmZmMDBcIix5ZWxsb3dncmVlbjpcIjlhY2QzMlwifSxvPVtcInRyYW5zcGFyZW50XCJdO2ZvcihhIGluIHUubmFtZWRDb2xvcnMpdS5uYW1lZENvbG9ycy5oYXNPd25Qcm9wZXJ0eShhKSYmby5wdXNoKGEpO289UmVnRXhwKFwiXihcIitvLmpvaW4oXCJ8XCIpK1wiKShcXFxcV3wkKVwiLFwiaVwiKSxzPWtlbmRvLkNsYXNzLmV4dGVuZCh7dG9IU1Y6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sdG9SR0I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sdG9IZXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b0J5dGVzKCkudG9IZXgoKX0sdG9CeXRlczpmdW5jdGlvbigpe3JldHVybiB0aGlzfSx0b0NzczpmdW5jdGlvbigpe3JldHVyblwiI1wiK3RoaXMudG9IZXgoKX0sdG9Dc3NSZ2JhOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50b0J5dGVzKCk7cmV0dXJuXCJyZ2JhKFwiK2UucitcIiwgXCIrZS5nK1wiLCBcIitlLmIrXCIsIFwiK3QoKCt0aGlzLmEpLnRvRml4ZWQoMykpK1wiKVwifSx0b0Rpc3BsYXk6ZnVuY3Rpb24oKXtyZXR1cm4ga2VuZG8uc3VwcG9ydC5icm93c2VyLm1zaWUmJjk+a2VuZG8uc3VwcG9ydC5icm93c2VyLnZlcnNpb24/dGhpcy50b0NzcygpOnRoaXMudG9Dc3NSZ2JhKCl9LGVxdWFsczpmdW5jdGlvbihlKXtyZXR1cm4gZT09PXRoaXN8fG51bGwhPT1lJiZ0aGlzLnRvQ3NzUmdiYSgpPT1pKGUpLnRvQ3NzUmdiYSgpfSxkaWZmOmZ1bmN0aW9uKGUpe2lmKG51bGw9PWUpcmV0dXJuIDAvMDt2YXIgdD10aGlzLnRvQnl0ZXMoKTtyZXR1cm4gZT1lLnRvQnl0ZXMoKSxNYXRoLnNxcnQoTWF0aC5wb3coLjMqKHQuci1lLnIpLDIpK01hdGgucG93KC41OSoodC5nLWUuZyksMikrTWF0aC5wb3coLjExKih0LmItZS5iKSwyKSl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50b0J5dGVzKCk7cmV0dXJuIGU9PT10aGlzJiYoZT1uZXcgYyhlLnIsZS5nLGUuYixlLmEpKSxlfX0pLGw9cy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4saSl7dGhpcy5yPWUsdGhpcy5nPXQsdGhpcy5iPW4sdGhpcy5hPWl9LHRvSFNWOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMucixpPXRoaXMuZyxyPXRoaXMuYixvPU1hdGgubWluKG4saSxyKSxhPU1hdGgubWF4KG4saSxyKSxzPWEsbD1hLW87cmV0dXJuIDA9PT1sP25ldyBkKDAsMCxzLHRoaXMuYSk6KDAhPT1hPyh0PWwvYSxlPW49PWE/KGktcikvbDppPT1hPzIrKHItbikvbDo0KyhuLWkpL2wsZSo9NjAsMD5lJiYoZSs9MzYwKSk6KHQ9MCxlPS0xKSxuZXcgZChlLHQscyx0aGlzLmEpKX0sdG9CeXRlczpmdW5jdGlvbigpe3JldHVybiBuZXcgYygyNTUqdGhpcy5yLDI1NSp0aGlzLmcsMjU1KnRoaXMuYix0aGlzLmEpfX0pLGM9bC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4saSl7dGhpcy5yPU1hdGgucm91bmQoZSksdGhpcy5nPU1hdGgucm91bmQodCksdGhpcy5iPU1hdGgucm91bmQobiksdGhpcy5hPWl9LHRvUkdCOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBsKHRoaXMuci8yNTUsdGhpcy5nLzI1NSx0aGlzLmIvMjU1LHRoaXMuYSl9LHRvSFNWOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9SR0IoKS50b0hTVigpfSx0b0hleDpmdW5jdGlvbigpe3JldHVybiByKHRoaXMuciwyKStyKHRoaXMuZywyKStyKHRoaXMuYiwyKX0sdG9CeXRlczpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0pLGQ9cy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4saSl7dGhpcy5oPWUsdGhpcy5zPXQsdGhpcy52PW4sdGhpcy5hPWl9LHRvUkdCOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixvLGEscyxjPXRoaXMuaCxkPXRoaXMucyx1PXRoaXMudjtpZigwPT09ZCl0PW49aT11O2Vsc2Ugc3dpdGNoKGMvPTYwLGU9TWF0aC5mbG9vcihjKSxyPWMtZSxvPXUqKDEtZCksYT11KigxLWQqcikscz11KigxLWQqKDEtcikpLGUpe2Nhc2UgMDp0PXUsbj1zLGk9bzticmVhaztjYXNlIDE6dD1hLG49dSxpPW87YnJlYWs7Y2FzZSAyOnQ9byxuPXUsaT1zO2JyZWFrO2Nhc2UgMzp0PW8sbj1hLGk9dTticmVhaztjYXNlIDQ6dD1zLG49byxpPXU7YnJlYWs7ZGVmYXVsdDp0PXUsbj1vLGk9YX1yZXR1cm4gbmV3IGwodCxuLGksdGhpcy5hKX0sdG9CeXRlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvUkdCKCkudG9CeXRlcygpfX0pLHUuZnJvbUJ5dGVzPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcgYyhlLHQsbixudWxsIT1pP2k6MSl9LHUuZnJvbVJHQj1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3IGwoZSx0LG4sbnVsbCE9aT9pOjEpfSx1LmZyb21IU1Y9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyBkKGUsdCxuLG51bGwhPWk/aToxKX0sa2VuZG8uQ29sb3I9dSxrZW5kby5wYXJzZUNvbG9yPWl9KHdpbmRvdy5rZW5kby5qUXVlcnkscGFyc2VGbG9hdCxwYXJzZUludCksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXtyZXR1cm4gdHlwZW9mIGUhPT1GfWZ1bmN0aW9uIG4oZSx0KXt2YXIgbj1pKHQpO3JldHVybiBBLnJvdW5kKGUqbikvbn1mdW5jdGlvbiBpKGUpe3JldHVybiBlP0EucG93KDEwLGUpOjF9ZnVuY3Rpb24gcihlLHQsbil7cmV0dXJuIEEubWF4KEEubWluKGUsbiksdCl9ZnVuY3Rpb24gbyhlKXtyZXR1cm4gZSpQfWZ1bmN0aW9uIGEoZSl7cmV0dXJuIGUvUH1mdW5jdGlvbiBzKGUpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBlJiYhaXNOYU4oZSl9ZnVuY3Rpb24gbChlLG4pe3JldHVybiB0KGUpP2U6bn1mdW5jdGlvbiBjKGUpe3JldHVybiBlKmV9ZnVuY3Rpb24gZChlKXt2YXIgdCxuPVtdO2Zvcih0IGluIGUpbi5wdXNoKHQrZVt0XSk7cmV0dXJuIG4uc29ydCgpLmpvaW4oXCJcIil9ZnVuY3Rpb24gdShlKXt2YXIgdCxuPTIxNjYxMzYyNjE7Zm9yKHQ9MDtlLmxlbmd0aD50OysrdCluKz0objw8MSkrKG48PDQpKyhuPDw3KSsobjw8OCkrKG48PDI0KSxuXj1lLmNoYXJDb2RlQXQodCk7cmV0dXJuIG4+Pj4wfWZ1bmN0aW9uIGgoZSl7cmV0dXJuIHUoZChlKSl9ZnVuY3Rpb24gcChlKXt2YXIgdCxuPWUubGVuZ3RoLGk9SSxyPXo7Zm9yKHQ9MDtuPnQ7dCsrKXI9QS5tYXgocixlW3RdKSxpPUEubWluKGksZVt0XSk7cmV0dXJue21pbjppLG1heDpyfX1mdW5jdGlvbiBmKGUpe3JldHVybiBwKGUpLm1pbn1mdW5jdGlvbiBnKGUpe3JldHVybiBwKGUpLm1heH1mdW5jdGlvbiBtKGUpe3JldHVybiBfKGUpLm1pbn1mdW5jdGlvbiB2KGUpe3JldHVybiBfKGUpLm1heH1mdW5jdGlvbiBfKGUpe3ZhciB0LG4saSxyPUksbz16O2Zvcih0PTAsbj1lLmxlbmd0aDtuPnQ7dCsrKWk9ZVt0XSxudWxsIT09aSYmaXNGaW5pdGUoaSkmJihyPUEubWluKHIsaSksbz1BLm1heChvLGkpKTtyZXR1cm57bWluOnI9PT1JP3ZvaWQgMDpyLG1heDpvPT09ej92b2lkIDA6b319ZnVuY3Rpb24geShlKXtyZXR1cm4gZT9lW2UubGVuZ3RoLTFdOnZvaWQgMH1mdW5jdGlvbiB3KGUsdCl7cmV0dXJuIGUucHVzaC5hcHBseShlLHQpLGV9ZnVuY3Rpb24gYihlKXtyZXR1cm4gRS50ZW1wbGF0ZShlLHt1c2VXaXRoQmxvY2s6ITEscGFyYW1OYW1lOlwiZFwifSl9ZnVuY3Rpb24gayhlLG4pe3JldHVybiB0KG4pJiZudWxsIT09bj9cIiBcIitlK1wiPSdcIituK1wiJyBcIjpcIlwifWZ1bmN0aW9uIHgoZSl7dmFyIHQsbj1cIlwiO2Zvcih0PTA7ZS5sZW5ndGg+dDt0Kyspbis9ayhlW3RdWzBdLGVbdF1bMV0pO3JldHVybiBufWZ1bmN0aW9uIEMoZSl7dmFyIG4saSxyPVwiXCI7Zm9yKG49MDtlLmxlbmd0aD5uO24rKylpPWVbbl1bMV0sdChpKSYmKHIrPWVbbl1bMF0rXCI6XCIraStcIjtcIik7cmV0dXJuXCJcIiE9PXI/cjp2b2lkIDB9ZnVuY3Rpb24gUyhlKXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgZSYmKGUrPVwicHhcIiksZX1mdW5jdGlvbiBUKGUpe3ZhciB0LG4saT1bXTtpZihlKWZvcih0PUUudG9IeXBoZW5zKGUpLnNwbGl0KFwiLVwiKSxuPTA7dC5sZW5ndGg+bjtuKyspaS5wdXNoKFwiay1wb3MtXCIrdFtuXSk7cmV0dXJuIGkuam9pbihcIiBcIil9ZnVuY3Rpb24gRChlKXtyZXR1cm5cIlwiPT09ZXx8bnVsbD09PWV8fFwibm9uZVwiPT09ZXx8XCJ0cmFuc3BhcmVudFwiPT09ZXx8IXQoZSl9dmFyIEE9TWF0aCxFPXdpbmRvdy5rZW5kbyxNPUUuZGVlcEV4dGVuZCxQPUEuUEkvMTgwLEk9TnVtYmVyLk1BWF9WQUxVRSx6PS1OdW1iZXIuTUFYX1ZBTFVFLEY9XCJ1bmRlZmluZWRcIixSPURhdGUubm93O1J8fChSPWZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9KSxNKEUse3V0aWw6e01BWF9OVU06SSxNSU5fTlVNOnosYXBwZW5kOncsYXJyYXlMaW1pdHM6cCxhcnJheU1pbjpmLGFycmF5TWF4OmcsZGVmaW5lZDp0LGRlZzphLGhhc2hLZXk6dSxoYXNoT2JqZWN0OmgsaXNOdW1iZXI6cyxpc1RyYW5zcGFyZW50OkQsbGFzdDp5LGxpbWl0VmFsdWU6cixub3c6UixvYmplY3RLZXk6ZCxyb3VuZDpuLHJhZDpvLHJlbmRlckF0dHI6ayxyZW5kZXJBbGxBdHRyOngscmVuZGVyUG9zOlQscmVuZGVyU2l6ZTpTLHJlbmRlclN0eWxlOkMscmVuZGVyVGVtcGxhdGU6YixzcGFyc2VBcnJheUxpbWl0czpfLHNwYXJzZUFycmF5TWluOm0sc3BhcnNlQXJyYXlNYXg6dixzcXI6Yyx2YWx1ZU9yRGVmYXVsdDpsfX0pLEUuZGF0YXZpei51dGlsPUUudXRpbH0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3ZhciBuLGkscixhLHMsbCxjLGQ9XCJcIix1PTA7Zm9yKGU9dChlKTtlLmxlbmd0aD51OyluPWUuY2hhckNvZGVBdCh1KyspLGk9ZS5jaGFyQ29kZUF0KHUrKykscj1lLmNoYXJDb2RlQXQodSsrKSxhPW4+PjIscz0oMyZuKTw8NHxpPj40LGw9KDE1JmkpPDwyfHI+PjYsYz02MyZyLGlzTmFOKGkpP2w9Yz02NDppc05hTihyKSYmKGM9NjQpLGQ9ZCtvLmNoYXJBdChhKStvLmNoYXJBdChzKStvLmNoYXJBdChsKStvLmNoYXJBdChjKTtyZXR1cm4gZH1mdW5jdGlvbiB0KGUpe3ZhciB0LG4saTtmb3IoZT1lLnJlcGxhY2UoL1xcclxcbi9nLFwiXFxuXCIpLHQ9XCJcIixuPTA7ZS5sZW5ndGg+bjtuKyspaT1lLmNoYXJDb2RlQXQobiksMTI4Pmk/dCs9cihpKToyMDQ4Pmk/KHQrPXIoMTkyfGk+Pj42KSx0Kz1yKDEyOHw2MyZpKSk6NjU1MzY+aSYmKHQrPXIoMjI0fGk+Pj4xMiksdCs9cigxMjh8aT4+PjYmNjMpLHQrPXIoMTI4fDYzJmkpKTtyZXR1cm4gdH12YXIgbj13aW5kb3cua2VuZG8saT1uLmRlZXBFeHRlbmQscj1TdHJpbmcuZnJvbUNoYXJDb2RlLG89XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVwiO2kobi51dGlsLHtlbmNvZGVCYXNlNjQ6ZSxlbmNvZGVVVEY4OnR9KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQ9TWF0aCxuPXdpbmRvdy5rZW5kbyxpPW4uZGVlcEV4dGVuZCxyPWUuaW5BcnJheSxvPXtvYnNlcnZlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2JzZXJ2ZXJzPXRoaXMuX29ic2VydmVyc3x8W119LGFkZE9ic2VydmVyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vYnNlcnZlcnM/dGhpcy5fb2JzZXJ2ZXJzLnB1c2goZSk6dGhpcy5fb2JzZXJ2ZXJzPVtlXSx0aGlzfSxyZW1vdmVPYnNlcnZlcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9ic2VydmVycygpLG49cihlLHQpO3JldHVybi0xIT1uJiZ0LnNwbGljZShuLDEpLHRoaXN9LHRyaWdnZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcy5fb2JzZXJ2ZXJzO2lmKHImJiF0aGlzLl9zdXNwZW5kZWQpZm9yKGk9MDtyLmxlbmd0aD5pO2krKyluPXJbaV0sbltlXSYmbltlXSh0KTtyZXR1cm4gdGhpc30sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXt0aGlzLnRyaWdnZXIoXCJvcHRpb25zQ2hhbmdlXCIsZSl9LGdlb21ldHJ5Q2hhbmdlOmZ1bmN0aW9uKGUpe3RoaXMudHJpZ2dlcihcImdlb21ldHJ5Q2hhbmdlXCIsZSl9LHN1c3BlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3VzcGVuZGVkPSh0aGlzLl9zdXNwZW5kZWR8fDApKzEsdGhpc30scmVzdW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N1c3BlbmRlZD10Lm1heCgodGhpcy5fc3VzcGVuZGVkfHwwKS0xLDApLHRoaXN9LF9vYnNlcnZlckZpZWxkOmZ1bmN0aW9uKGUsdCl7dGhpc1tlXSYmdGhpc1tlXS5yZW1vdmVPYnNlcnZlcih0aGlzKSx0aGlzW2VdPXQsdC5hZGRPYnNlcnZlcih0aGlzKX19O2kobix7bWl4aW5zOntPYnNlcnZlcnNNaXhpbjpvfX0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3JldHVybiBudWxsPT09ZT9udWxsOmUgaW5zdGFuY2VvZiBtP2U6bmV3IG0oZSl9ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmeS5pc0Z1bmN0aW9uKGUubWF0cml4KT9lLm1hdHJpeCgpOmV9ZnVuY3Rpb24gaShlLHQsbixpKXt2YXIgcj0wLG89MDtyZXR1cm4gaSYmKHI9di5hdGFuMihpLmMqbixpLmEqdCksMCE9PWkuYiYmKG89di5hdGFuMihpLmQqbixpLmIqdCkpKSx7eDpyLHk6b319ZnVuY3Rpb24gcihlLHQpe2Zvcig7dD5lOyllKz05MDtyZXR1cm4gZX1mdW5jdGlvbiBvKGUsdCl7dmFyIG4saSxyO2ZvcihuPTA7dC5sZW5ndGg+bjtuKyspaT10W25dLHI9aS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStpLnN1YnN0cmluZygxLGkubGVuZ3RoKSxlW1wic2V0XCIrcl09YShpKSxlW1wiZ2V0XCIrcl09cyhpKX1mdW5jdGlvbiBhKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gdGhpc1tlXSE9PXQmJih0aGlzW2VdPXQsdGhpcy5nZW9tZXRyeUNoYW5nZSgpKSx0aGlzfX1mdW5jdGlvbiBzKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzW2VdfX1mdW5jdGlvbiBsKGUsdCxuKXtlPnQmJih0Kz0zNjApO3ZhciBpPXYuYWJzKHQtZSk7cmV0dXJuIG58fChpPTM2MC1pKSxpfWZ1bmN0aW9uIGMoZSx0LG4saSxyLG8pe3ZhciBhPUQoKHItZSkvbiwzKSxzPUQoKG8tdCkvaSwzKTtyZXR1cm4gRChUKHYuYXRhbjIocyxhKSkpfWZ1bmN0aW9uIGQoZSx0LG4saSxyLG8sYSxzKXt2YXIgZCx1LGgscCxmLGcsbSx5LHcsYixrLHgsQyxTLFQsRCxBLEU7aWYodCE9PWkpdz1uLWUsYj1pLXQsaz1fKHIsMikseD1fKG8sMiksQz0oeCp3KihlK24pK2sqYioodCtpKSkvKDIqaypiKSxTPUMtaSxUPS0odyp4KS8oaypiKSxmPTEvaytfKFQsMikveCxnPTIqKFQqUy94LW4vayksbT1fKG4sMikvaytfKFMsMikveC0xLHk9di5zcXJ0KF8oZywyKS00KmYqbSksZD0oLWcteSkvKDIqZiksdT1DK1QqZCxoPSgtZyt5KS8oMipmKSxwPUMrVCpoO2Vsc2V7aWYoZT09PW4pcmV0dXJuITE7Zz0tMippLG09Xygobi1lKSpvLygyKnIpLDIpK18oaSwyKS1fKG8sMikseT12LnNxcnQoXyhnLDIpLTQqbSksZD1oPShlK24pLzIsdT0oLWcteSkvMixwPSgtZyt5KS8yfXJldHVybiBEPWMoZCx1LHIsbyxlLHQpLEE9YyhkLHUscixvLG4saSksRT1sKEQsQSxzKSwoYSYmMTgwPj1FfHwhYSYmRT4xODApJiYoZD1oLHU9cCxEPWMoZCx1LHIsbyxlLHQpLEE9YyhkLHUscixvLG4saSkpLHtjZW50ZXI6bmV3IFAoZCx1KSxzdGFydEFuZ2xlOkQsZW5kQW5nbGU6QX19dmFyIHUsaCxwLGYsZyxtLHY9TWF0aCxfPXYucG93LHk9d2luZG93LmtlbmRvLHc9eS5DbGFzcyxiPXkuZGVlcEV4dGVuZCxrPXkubWl4aW5zLk9ic2VydmVyc01peGluLHg9eS51dGlsLEM9eC5kZWZpbmVkLFM9eC5yYWQsVD14LmRlZyxEPXgucm91bmQsQT12LlBJLzIsRT14Lk1JTl9OVU0sTT14Lk1BWF9OVU0sUD13LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3RoaXMueD1lfHwwLHRoaXMueT10fHwwfSxlcXVhbHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUueD09PXRoaXMueCYmZS55PT09dGhpcy55fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgUCh0aGlzLngsdGhpcy55KX0scm90YXRlOmZ1bmN0aW9uKGUsbil7cmV0dXJuIHRoaXMudHJhbnNmb3JtKHQoKS5yb3RhdGUoZSxuKSl9LHRyYW5zbGF0ZTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLngrPWUsdGhpcy55Kz10LHRoaXMuZ2VvbWV0cnlDaGFuZ2UoKSx0aGlzfSx0cmFuc2xhdGVXaXRoOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRyYW5zbGF0ZShlLngsZS55KX0sbW92ZTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLng9dGhpcy55PTAsdGhpcy50cmFuc2xhdGUoZSx0KX0sc2NhbGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gQyh0KXx8KHQ9ZSksdGhpcy54Kj1lLHRoaXMueSo9dCx0aGlzLmdlb21ldHJ5Q2hhbmdlKCksdGhpc30sc2NhbGVDb3B5OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5zY2FsZShlLHQpfSx0cmFuc2Zvcm06ZnVuY3Rpb24oZSl7dmFyIHQ9bihlKSxpPXRoaXMueCxyPXRoaXMueTtyZXR1cm4gdGhpcy54PXQuYSppK3QuYypyK3QuZSx0aGlzLnk9dC5iKmkrdC5kKnIrdC5mLHRoaXMuZ2VvbWV0cnlDaGFuZ2UoKSx0aGlzfSx0cmFuc2Zvcm1Db3B5OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY2xvbmUoKTtyZXR1cm4gZSYmdC50cmFuc2Zvcm0oZSksdH0sZGlzdGFuY2VUbzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLngtZS54LG49dGhpcy55LWUueTtyZXR1cm4gdi5zcXJ0KHQqdCtuKm4pfSxyb3VuZDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy54PUQodGhpcy54LGUpLHRoaXMueT1EKHRoaXMueSxlKSx0aGlzLmdlb21ldHJ5Q2hhbmdlKCksdGhpc30sdG9BcnJheTpmdW5jdGlvbihlKXt2YXIgdD1DKGUpLG49dD9EKHRoaXMueCxlKTp0aGlzLngsaT10P0QodGhpcy55LGUpOnRoaXMueTtyZXR1cm5bbixpXX19KTtvKFAuZm4sW1wieFwiLFwieVwiXSksYihQLmZuLGspLFAuZm4udG9TdHJpbmc9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLngsaT10aGlzLnk7cmV0dXJuIEMoZSkmJihuPUQobixlKSxpPUQoaSxlKSksdD10fHxcIiBcIixuK3QraX0sUC5jcmVhdGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gQyhlKT9lIGluc3RhbmNlb2YgUD9lOjE9PT1hcmd1bWVudHMubGVuZ3RoJiYyPT09ZS5sZW5ndGg/bmV3IFAoZVswXSxlWzFdKTpuZXcgUChlLHQpOnZvaWQgMH0sUC5taW49ZnVuY3Rpb24oKXt2YXIgZSx0LG49eC5NQVhfTlVNLGk9eC5NQVhfTlVNO2ZvcihlPTA7YXJndW1lbnRzLmxlbmd0aD5lO2UrKyl0PWFyZ3VtZW50c1tlXSxuPXYubWluKHQueCxuKSxpPXYubWluKHQueSxpKTtyZXR1cm4gbmV3IFAobixpKX0sUC5tYXg9ZnVuY3Rpb24oKXt2YXIgZSx0LG49eC5NSU5fTlVNLGk9eC5NSU5fTlVNO2ZvcihlPTA7YXJndW1lbnRzLmxlbmd0aD5lO2UrKyl0PWFyZ3VtZW50c1tlXSxuPXYubWF4KHQueCxuKSxpPXYubWF4KHQueSxpKTtyZXR1cm4gbmV3IFAobixpKX0sUC5taW5Qb2ludD1mdW5jdGlvbigpe3JldHVybiBuZXcgUChFLEUpfSxQLm1heFBvaW50PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBQKE0sTSl9LFAuWkVSTz1uZXcgUCgwLDApLHU9dy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLndpZHRoPWV8fDAsdGhpcy5oZWlnaHQ9dHx8MH0sZXF1YWxzOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLndpZHRoPT09dGhpcy53aWR0aCYmZS5oZWlnaHQ9PT10aGlzLmhlaWdodH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHUodGhpcy53aWR0aCx0aGlzLmhlaWdodCl9LHRvQXJyYXk6ZnVuY3Rpb24oZSl7dmFyIHQ9QyhlKSxuPXQ/RCh0aGlzLndpZHRoLGUpOnRoaXMud2lkdGgsaT10P0QodGhpcy5oZWlnaHQsZSk6dGhpcy5oZWlnaHQ7cmV0dXJuW24saV19fSksbyh1LmZuLFtcIndpZHRoXCIsXCJoZWlnaHRcIl0pLGIodS5mbixrKSx1LmNyZWF0ZT1mdW5jdGlvbihlLHQpe3JldHVybiBDKGUpP2UgaW5zdGFuY2VvZiB1P2U6MT09PWFyZ3VtZW50cy5sZW5ndGgmJjI9PT1lLmxlbmd0aD9uZXcgdShlWzBdLGVbMV0pOm5ldyB1KGUsdCk6dm9pZCAwfSx1LlpFUk89bmV3IHUoMCwwKSxoPXcuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dGhpcy5zZXRPcmlnaW4oZXx8bmV3IFApLHRoaXMuc2V0U2l6ZSh0fHxuZXcgdSl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBoKHRoaXMub3JpZ2luLmNsb25lKCksdGhpcy5zaXplLmNsb25lKCkpfSxlcXVhbHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUub3JpZ2luLmVxdWFscyh0aGlzLm9yaWdpbikmJmUuc2l6ZS5lcXVhbHModGhpcy5zaXplKX0sc2V0T3JpZ2luOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vYnNlcnZlckZpZWxkKFwib3JpZ2luXCIsUC5jcmVhdGUoZSkpLHRoaXMuZ2VvbWV0cnlDaGFuZ2UoKSx0aGlzfSxnZXRPcmlnaW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcmlnaW59LHNldFNpemU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29ic2VydmVyRmllbGQoXCJzaXplXCIsdS5jcmVhdGUoZSkpLHRoaXMuZ2VvbWV0cnlDaGFuZ2UoKSx0aGlzfSxnZXRTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2l6ZX0sd2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaXplLndpZHRofSxoZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaXplLmhlaWdodH0sdG9wTGVmdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9yaWdpbi5jbG9uZSgpfSxib3R0b21SaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9yaWdpbi5jbG9uZSgpLnRyYW5zbGF0ZSh0aGlzLndpZHRoKCksdGhpcy5oZWlnaHQoKSl9LHRvcFJpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3JpZ2luLmNsb25lKCkudHJhbnNsYXRlKHRoaXMud2lkdGgoKSwwKX0sYm90dG9tTGVmdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9yaWdpbi5jbG9uZSgpLnRyYW5zbGF0ZSgwLHRoaXMuaGVpZ2h0KCkpfSxjZW50ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcmlnaW4uY2xvbmUoKS50cmFuc2xhdGUodGhpcy53aWR0aCgpLzIsdGhpcy5oZWlnaHQoKS8yKX0sYmJveDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnRvcExlZnQoKS50cmFuc2Zvcm1Db3B5KGUpLG49dGhpcy50b3BSaWdodCgpLnRyYW5zZm9ybUNvcHkoZSksaT10aGlzLmJvdHRvbVJpZ2h0KCkudHJhbnNmb3JtQ29weShlKSxyPXRoaXMuYm90dG9tTGVmdCgpLnRyYW5zZm9ybUNvcHkoZSk7cmV0dXJuIGguZnJvbVBvaW50cyh0LG4saSxyKX19KSxiKGguZm4sayksaC5mcm9tUG9pbnRzPWZ1bmN0aW9uKCl7dmFyIGU9UC5taW4uYXBwbHkodGhpcyxhcmd1bWVudHMpLHQ9UC5tYXguYXBwbHkodGhpcyxhcmd1bWVudHMpLG49bmV3IHUodC54LWUueCx0LnktZS55KTtyZXR1cm4gbmV3IGgoZSxuKX0saC51bmlvbj1mdW5jdGlvbihlLHQpe3JldHVybiBoLmZyb21Qb2ludHMoUC5taW4oZS50b3BMZWZ0KCksdC50b3BMZWZ0KCkpLFAubWF4KGUuYm90dG9tUmlnaHQoKSx0LmJvdHRvbVJpZ2h0KCkpKX0saC5pbnRlcnNlY3Q9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT17bGVmdDplLnRvcExlZnQoKS54LHRvcDplLnRvcExlZnQoKS55LHJpZ2h0OmUuYm90dG9tUmlnaHQoKS54LGJvdHRvbTplLmJvdHRvbVJpZ2h0KCkueX0sdD17bGVmdDp0LnRvcExlZnQoKS54LHRvcDp0LnRvcExlZnQoKS55LHJpZ2h0OnQuYm90dG9tUmlnaHQoKS54LGJvdHRvbTp0LmJvdHRvbVJpZ2h0KCkueX0sdC5yaWdodD49ZS5sZWZ0JiZlLnJpZ2h0Pj10LmxlZnQmJnQuYm90dG9tPj1lLnRvcCYmZS5ib3R0b20+PXQudG9wP2guZnJvbVBvaW50cyhuZXcgUCh2Lm1heChlLmxlZnQsdC5sZWZ0KSx2Lm1heChlLnRvcCx0LnRvcCkpLG5ldyBQKHYubWluKGUucmlnaHQsdC5yaWdodCksdi5taW4oZS5ib3R0b20sdC5ib3R0b20pKSk6dm9pZCAwfSxwPXcuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dGhpcy5zZXRDZW50ZXIoZXx8bmV3IFApLHRoaXMuc2V0UmFkaXVzKHR8fDApfSxzZXRDZW50ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29ic2VydmVyRmllbGQoXCJjZW50ZXJcIixQLmNyZWF0ZShlKSksdGhpcy5nZW9tZXRyeUNoYW5nZSgpLHRoaXN9LGdldENlbnRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNlbnRlcn0sZXF1YWxzOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLmNlbnRlci5lcXVhbHModGhpcy5jZW50ZXIpJiZlLnJhZGl1cz09PXRoaXMucmFkaXVzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgcCh0aGlzLmNlbnRlci5jbG9uZSgpLHRoaXMucmFkaXVzKX0scG9pbnRBdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcG9pbnRBdChTKGUpKX0sYmJveDpmdW5jdGlvbihlKXt2YXIgdCxuLHIsbyxhPVAubWF4UG9pbnQoKSxzPVAubWluUG9pbnQoKSxsPWkodGhpcy5jZW50ZXIsdGhpcy5yYWRpdXMsdGhpcy5yYWRpdXMsZSk7Zm9yKHQ9MDs0PnQ7dCsrKW49dGhpcy5fcG9pbnRBdChsLngrdCpBKS50cmFuc2Zvcm1Db3B5KGUpLHI9dGhpcy5fcG9pbnRBdChsLnkrdCpBKS50cmFuc2Zvcm1Db3B5KGUpLG89bmV3IFAobi54LHIueSksYT1QLm1pbihhLG8pLHM9UC5tYXgocyxvKTtyZXR1cm4gaC5mcm9tUG9pbnRzKGEscyl9LF9wb2ludEF0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY2VudGVyLG49dGhpcy5yYWRpdXM7cmV0dXJuIG5ldyBQKHQueC1uKnYuY29zKGUpLHQueS1uKnYuc2luKGUpKX19KSxvKHAuZm4sW1wicmFkaXVzXCJdKSxiKHAuZm4sayksZj13LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3RoaXMuc2V0Q2VudGVyKGV8fG5ldyBQKSx0PXR8fHt9LHRoaXMucmFkaXVzWD10LnJhZGl1c1gsdGhpcy5yYWRpdXNZPXQucmFkaXVzWXx8dC5yYWRpdXNYLHRoaXMuc3RhcnRBbmdsZT10LnN0YXJ0QW5nbGUsdGhpcy5lbmRBbmdsZT10LmVuZEFuZ2xlLHRoaXMuYW50aWNsb2Nrd2lzZT10LmFudGljbG9ja3dpc2V8fCExfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgZih0aGlzLmNlbnRlcix7cmFkaXVzWDp0aGlzLnJhZGl1c1gscmFkaXVzWTp0aGlzLnJhZGl1c1ksc3RhcnRBbmdsZTp0aGlzLnN0YXJ0QW5nbGUsZW5kQW5nbGU6dGhpcy5lbmRBbmdsZSxhbnRpY2xvY2t3aXNlOnRoaXMuYW50aWNsb2Nrd2lzZX0pfSxzZXRDZW50ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29ic2VydmVyRmllbGQoXCJjZW50ZXJcIixQLmNyZWF0ZShlKSksdGhpcy5nZW9tZXRyeUNoYW5nZSgpLHRoaXN9LGdldENlbnRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNlbnRlcn0sTUFYX0lOVEVSVkFMOjQ1LHBvaW50QXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jZW50ZXIsbj1TKGUpO3JldHVybiBuZXcgUCh0LngrdGhpcy5yYWRpdXNYKnYuY29zKG4pLHQueSt0aGlzLnJhZGl1c1kqdi5zaW4obikpfSxjdXJ2ZVBvaW50czpmdW5jdGlvbigpe3ZhciBlLHQsbixpPXRoaXMuc3RhcnRBbmdsZSxyPXRoaXMuYW50aWNsb2Nrd2lzZT8tMToxLG89W3RoaXMucG9pbnRBdChpKV0sYT1pLHM9dGhpcy5fYXJjSW50ZXJ2YWwoKSxsPXMuZW5kQW5nbGUtcy5zdGFydEFuZ2xlLGM9di5jZWlsKGwvdGhpcy5NQVhfSU5URVJWQUwpLGQ9bC9jO2ZvcihlPTE7Yz49ZTtlKyspdD1hK3IqZCxuPXRoaXMuX2ludGVydmFsQ3VydmVQb2ludHMoYSx0KSxvLnB1c2gobi5jcDEsbi5jcDIsbi5wMiksYT10O3JldHVybiBvfSxiYm94OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuLG89dGhpcyxhPW8uX2FyY0ludGVydmFsKCkscz1hLnN0YXJ0QW5nbGUsbD1hLmVuZEFuZ2xlLGM9aSh0aGlzLmNlbnRlcix0aGlzLnJhZGl1c1gsdGhpcy5yYWRpdXNZLGUpLGQ9VChjLngpLHU9VChjLnkpLHA9by5wb2ludEF0KHMpLnRyYW5zZm9ybUNvcHkoZSksZj1vLnBvaW50QXQobCkudHJhbnNmb3JtQ29weShlKSxnPVAubWluKHAsZiksbT1QLm1heChwLGYpLHY9cihkLHMpLF89cih1LHMpO2w+dnx8bD5fOylsPnYmJih0PW8ucG9pbnRBdCh2KS50cmFuc2Zvcm1Db3B5KGUpLHYrPTkwKSxsPl8mJihuPW8ucG9pbnRBdChfKS50cmFuc2Zvcm1Db3B5KGUpLF8rPTkwKSxwPW5ldyBQKHQueCxuLnkpLGc9UC5taW4oZyxwKSxtPVAubWF4KG0scCk7cmV0dXJuIGguZnJvbVBvaW50cyhnLG0pfSxfYXJjSW50ZXJ2YWw6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuc3RhcnRBbmdsZSxuPXRoaXMuZW5kQW5nbGUsaT10aGlzLmFudGljbG9ja3dpc2U7cmV0dXJuIGkmJihlPXQsdD1uLG49ZSksKHQ+bnx8aSYmdD09PW4pJiYobis9MzYwKSx7c3RhcnRBbmdsZTp0LGVuZEFuZ2xlOm59fSxfaW50ZXJ2YWxDdXJ2ZVBvaW50czpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1uLnBvaW50QXQoZSkscj1uLnBvaW50QXQodCksbz1uLl9kZXJpdmF0aXZlQXQoZSksYT1uLl9kZXJpdmF0aXZlQXQodCkscz0oUyh0KS1TKGUpKS8zLGw9bmV3IFAoaS54K3Mqby54LGkueStzKm8ueSksYz1uZXcgUChyLngtcyphLngsci55LXMqYS55KTtyZXR1cm57cDE6aSxjcDE6bCxjcDI6YyxwMjpyfX0sX2Rlcml2YXRpdmVBdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49UyhlKTtyZXR1cm4gbmV3IFAoLXQucmFkaXVzWCp2LnNpbihuKSx0LnJhZGl1c1kqdi5jb3MobikpfX0pLG8oZi5mbixbXCJyYWRpdXNYXCIsXCJyYWRpdXNZXCIsXCJzdGFydEFuZ2xlXCIsXCJlbmRBbmdsZVwiLFwiYW50aWNsb2Nrd2lzZVwiXSksYihmLmZuLGspLGYuZnJvbVBvaW50cz1mdW5jdGlvbihlLHQsbixpLHIsbyl7dmFyIGE9ZChlLngsZS55LHQueCx0LnksbixpLHIsbyk7cmV0dXJuIG5ldyBmKGEuY2VudGVyLHtzdGFydEFuZ2xlOmEuc3RhcnRBbmdsZSxlbmRBbmdsZTphLmVuZEFuZ2xlLHJhZGl1c1g6bixyYWRpdXNZOmksYW50aWNsb2Nrd2lzZTowPT09b30pfSxnPXcuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuLGkscixvKXt0aGlzLmE9ZXx8MCx0aGlzLmI9dHx8MCx0aGlzLmM9bnx8MCx0aGlzLmQ9aXx8MCx0aGlzLmU9cnx8MCx0aGlzLmY9b3x8MH0sbXVsdGlwbHlDb3B5OmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgZyh0aGlzLmEqZS5hK3RoaXMuYyplLmIsdGhpcy5iKmUuYSt0aGlzLmQqZS5iLHRoaXMuYSplLmMrdGhpcy5jKmUuZCx0aGlzLmIqZS5jK3RoaXMuZCplLmQsdGhpcy5hKmUuZSt0aGlzLmMqZS5mK3RoaXMuZSx0aGlzLmIqZS5lK3RoaXMuZCplLmYrdGhpcy5mKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGcodGhpcy5hLHRoaXMuYix0aGlzLmMsdGhpcy5kLHRoaXMuZSx0aGlzLmYpfSxlcXVhbHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/dGhpcy5hPT09ZS5hJiZ0aGlzLmI9PT1lLmImJnRoaXMuYz09PWUuYyYmdGhpcy5kPT09ZS5kJiZ0aGlzLmU9PT1lLmUmJnRoaXMuZj09PWUuZjohMX0scm91bmQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYT1EKHRoaXMuYSxlKSx0aGlzLmI9RCh0aGlzLmIsZSksdGhpcy5jPUQodGhpcy5jLGUpLHRoaXMuZD1EKHRoaXMuZCxlKSx0aGlzLmU9RCh0aGlzLmUsZSksdGhpcy5mPUQodGhpcy5mLGUpLHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oZSl7dmFyIHQsbj1bdGhpcy5hLHRoaXMuYix0aGlzLmMsdGhpcy5kLHRoaXMuZSx0aGlzLmZdO2lmKEMoZSkpZm9yKHQ9MDtuLmxlbmd0aD50O3QrKyluW3RdPUQoblt0XSxlKTtyZXR1cm4gbn19KSxnLmZuLnRvU3RyaW5nPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMudG9BcnJheShlKS5qb2luKHR8fFwiLFwiKX0sZy50cmFuc2xhdGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IGcoMSwwLDAsMSxlLHQpfSxnLnVuaXQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGcoMSwwLDAsMSwwLDApfSxnLnJvdGF0ZT1mdW5jdGlvbihlLHQsbil7dmFyIGk9bmV3IGc7cmV0dXJuIGkuYT12LmNvcyhTKGUpKSxpLmI9di5zaW4oUyhlKSksaS5jPS1pLmIsaS5kPWkuYSxpLmU9dC10KmkuYStuKmkuYnx8MCxpLmY9bi1uKmkuYS10KmkuYnx8MCxpfSxnLnNjYWxlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBnKGUsMCwwLHQsMCwwKX0sZy5JREVOVElUWT1nLnVuaXQoKSxtPXcuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMuX21hdHJpeD1lfHxnLnVuaXQoKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG0odGhpcy5fbWF0cml4LmNsb25lKCkpfSxlcXVhbHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX21hdHJpeC5lcXVhbHModGhpcy5fbWF0cml4KX0sX29wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnNDaGFuZ2Uoe2ZpZWxkOlwidHJhbnNmb3JtXCIsdmFsdWU6dGhpc30pfSx0cmFuc2xhdGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fbWF0cml4PXRoaXMuX21hdHJpeC5tdWx0aXBseUNvcHkoZy50cmFuc2xhdGUoZSx0KSksdGhpcy5fb3B0aW9uc0NoYW5nZSgpLHRoaXN9LHNjYWxlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gQyh0KXx8KHQ9ZSksbiYmKG49UC5jcmVhdGUobiksdGhpcy5fbWF0cml4PXRoaXMuX21hdHJpeC5tdWx0aXBseUNvcHkoZy50cmFuc2xhdGUobi54LG4ueSkpKSx0aGlzLl9tYXRyaXg9dGhpcy5fbWF0cml4Lm11bHRpcGx5Q29weShnLnNjYWxlKGUsdCkpLG4mJih0aGlzLl9tYXRyaXg9dGhpcy5fbWF0cml4Lm11bHRpcGx5Q29weShnLnRyYW5zbGF0ZSgtbi54LC1uLnkpKSksdGhpcy5fb3B0aW9uc0NoYW5nZSgpLHRoaXN9LHJvdGF0ZTpmdW5jdGlvbihlLHQpe3JldHVybiB0PVAuY3JlYXRlKHQpfHxQLlpFUk8sdGhpcy5fbWF0cml4PXRoaXMuX21hdHJpeC5tdWx0aXBseUNvcHkoZy5yb3RhdGUoZSx0LngsdC55KSksdGhpcy5fb3B0aW9uc0NoYW5nZSgpLHRoaXN9LG11bHRpcGx5OmZ1bmN0aW9uKGUpe3ZhciB0PW4oZSk7cmV0dXJuIHRoaXMuX21hdHJpeD10aGlzLl9tYXRyaXgubXVsdGlwbHlDb3B5KHQpLHRoaXMuX29wdGlvbnNDaGFuZ2UoKSx0aGlzfSxtYXRyaXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWF0cml4fX0pLGIobS5mbixrKSxiKHkse2dlb21ldHJ5OntBcmM6ZixDaXJjbGU6cCxNYXRyaXg6ZyxQb2ludDpQLFJlY3Q6aCxTaXplOnUsVHJhbnNmb3JtYXRpb246bSx0cmFuc2Zvcm06dCx0b01hdHJpeDpufX0pLHkuZGF0YXZpei5nZW9tZXRyeT15Lmdlb21ldHJ5fSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXt2YXIgdCxuLGkscj1lLm5vb3Asbz1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLGE9d2luZG93LmtlbmRvLHM9YS5DbGFzcyxsPWEudWkuV2lkZ2V0LGM9YS5kZWVwRXh0ZW5kLGQ9YS51dGlsLHU9ZC5kZWZpbmVkLGg9YS5PYnNlcnZhYmxlLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe2EuT2JzZXJ2YWJsZS5mbi5pbml0LmNhbGwodGhpcyksdGhpcy5vcHRpb25zPWMoe30sdGhpcy5vcHRpb25zLG4pLHRoaXMuYmluZCh0aGlzLmV2ZW50cyx0aGlzLm9wdGlvbnMpLHRoaXMuX2NsaWNrPXRoaXMuX2hhbmRsZXIoXCJjbGlja1wiKSx0aGlzLl9tb3VzZWVudGVyPXRoaXMuX2hhbmRsZXIoXCJtb3VzZWVudGVyXCIpLHRoaXMuX21vdXNlbGVhdmU9dGhpcy5faGFuZGxlcihcIm1vdXNlbGVhdmVcIiksdGhpcy5lbGVtZW50PWUodCksdGhpcy5vcHRpb25zLndpZHRoJiZ0aGlzLmVsZW1lbnQuY3NzKFwid2lkdGhcIix0aGlzLm9wdGlvbnMud2lkdGgpLHRoaXMub3B0aW9ucy5oZWlnaHQmJnRoaXMuZWxlbWVudC5jc3MoXCJoZWlnaHRcIix0aGlzLm9wdGlvbnMuaGVpZ2h0KX0sb3B0aW9uczp7fSxldmVudHM6W1wiY2xpY2tcIixcIm1vdXNlZW50ZXJcIixcIm1vdXNlbGVhdmVcIixcInJlc2l6ZVwiXSxkcmF3OnIsY2xlYXI6cixkZXN0cm95OnIscmVzaXplOmwuZm4ucmVzaXplLHNpemU6bC5mbi5zaXplLGdldFNpemU6ZnVuY3Rpb24oKXtyZXR1cm57d2lkdGg6dGhpcy5lbGVtZW50LndpZHRoKCksaGVpZ2h0OnRoaXMuZWxlbWVudC5oZWlnaHQoKX19LHNldFNpemU6ZnVuY3Rpb24oZSl7dGhpcy5lbGVtZW50LmNzcyh7d2lkdGg6ZS53aWR0aCxoZWlnaHQ6ZS5oZWlnaHR9KSx0aGlzLl9zaXplPWUsdGhpcy5fcmVzaXplKCl9LGV2ZW50VGFyZ2V0OmZ1bmN0aW9uKHQpe2Zvcih2YXIgbixpPWUodC50b3VjaD90LnRvdWNoLmluaXRpYWxUb3VjaDp0LnRhcmdldCk7IW4mJmkubGVuZ3RoPjAmJihuPWlbMF0uX2tlbmRvTm9kZSwhaS5pcyh0aGlzLmVsZW1lbnQpJiYwIT09aS5sZW5ndGgpOylpPWkucGFyZW50KCk7cmV0dXJuIG4/bi5zcmNFbGVtZW50OnZvaWQgMH0sX3Jlc2l6ZTpyLF9oYW5kbGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciBpPXQuZXZlbnRUYXJnZXQobik7aSYmdC50cmlnZ2VyKGUse2VsZW1lbnQ6aSxvcmlnaW5hbEV2ZW50Om59KX19fSk7aC5jcmVhdGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaS5jdXJyZW50LmNyZWF0ZShlLHQpfSx0PXMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMuY2hpbGROb2Rlcz1bXSx0aGlzLnBhcmVudD1udWxsLGUmJih0aGlzLnNyY0VsZW1lbnQ9ZSx0aGlzLm9ic2VydmUoKSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZSx0O2Zvcih0aGlzLnNyY0VsZW1lbnQmJnRoaXMuc3JjRWxlbWVudC5yZW1vdmVPYnNlcnZlcih0aGlzKSxlPXRoaXMuY2hpbGROb2Rlcyx0PTA7ZS5sZW5ndGg+dDt0KyspdGhpcy5jaGlsZE5vZGVzW3RdLmRlc3Ryb3koKTt0aGlzLnBhcmVudD1udWxsfSxsb2FkOnIsb2JzZXJ2ZTpmdW5jdGlvbigpe3RoaXMuc3JjRWxlbWVudCYmdGhpcy5zcmNFbGVtZW50LmFkZE9ic2VydmVyKHRoaXMpfSxhcHBlbmQ6ZnVuY3Rpb24oZSl7dGhpcy5jaGlsZE5vZGVzLnB1c2goZSksZS5wYXJlbnQ9dGhpc30saW5zZXJ0QXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLmNoaWxkTm9kZXMuc3BsaWNlKHQsMCxlKSxlLnBhcmVudD10aGlzfSxyZW1vdmU6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPWUrdDtmb3Iobj1lO2k+bjtuKyspdGhpcy5jaGlsZE5vZGVzW25dLnJlbW92ZVNlbGYoKTt0aGlzLmNoaWxkTm9kZXMuc3BsaWNlKGUsdCl9LHJlbW92ZVNlbGY6ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCksdGhpcy5kZXN0cm95KCl9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmUoMCx0aGlzLmNoaWxkTm9kZXMubGVuZ3RoKX0saW52YWxpZGF0ZTpmdW5jdGlvbigpe3RoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5pbnZhbGlkYXRlKCl9LGdlb21ldHJ5Q2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5pbnZhbGlkYXRlKCl9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLmludmFsaWRhdGUoKX0sY2hpbGRyZW5DaGFuZ2U6ZnVuY3Rpb24oZSl7XCJhZGRcIj09PWUuYWN0aW9uP3RoaXMubG9hZChlLml0ZW1zLGUuaW5kZXgpOlwicmVtb3ZlXCI9PT1lLmFjdGlvbiYmdGhpcy5yZW1vdmUoZS5pbmRleCxlLml0ZW1zLmxlbmd0aCksdGhpcy5pbnZhbGlkYXRlKCl9fSksbj1zLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuLGk7dGhpcy5wcmVmaXg9dHx8XCJcIjtmb3IobiBpbiBlKWk9ZVtuXSxpPXRoaXMuX3dyYXAoaSxuKSx0aGlzW25dPWl9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gYS5nZXR0ZXIoZSwhMCkodGhpcyl9LHNldDpmdW5jdGlvbihlLHQpe3ZhciBuLGk9YS5nZXR0ZXIoZSwhMCkodGhpcyk7aSE9PXQmJihuPXRoaXMuX3NldChlLHRoaXMuX3dyYXAodCxlKSksbnx8dGhpcy5vcHRpb25zQ2hhbmdlKHtmaWVsZDp0aGlzLnByZWZpeCtlLHZhbHVlOnR9KSl9LF9zZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgaSxyLG8scz1lLmluZGV4T2YoXCIuXCIpPj0wO2lmKHMpZm9yKGk9ZS5zcGxpdChcIi5cIikscj1cIlwiO2kubGVuZ3RoPjE7KXtpZihyKz1pLnNoaWZ0KCksbz1hLmdldHRlcihyLCEwKSh0aGlzKSxvfHwobz1uZXcgbih7fSxyK1wiLlwiKSxvLmFkZE9ic2VydmVyKHRoaXMpLHRoaXNbcl09byksbyBpbnN0YW5jZW9mIG4pcmV0dXJuIG8uc2V0KGkuam9pbihcIi5cIiksdCkscztyKz1cIi5cIn1yZXR1cm4gdGhpcy5fY2xlYXIoZSksYS5zZXR0ZXIoZSkodGhpcyx0KSxzfSxfY2xlYXI6ZnVuY3Rpb24oZSl7dmFyIHQ9YS5nZXR0ZXIoZSwhMCkodGhpcyk7dCYmdC5yZW1vdmVPYnNlcnZlciYmdC5yZW1vdmVPYnNlcnZlcih0aGlzKX0sX3dyYXA6ZnVuY3Rpb24oZSx0KXt2YXIgaT1vLmNhbGwoZSk7cmV0dXJuIG51bGwhPT1lJiZ1KGUpJiZcIltvYmplY3QgT2JqZWN0XVwiPT09aSYmKGUgaW5zdGFuY2VvZiBufHxlIGluc3RhbmNlb2Ygc3x8KGU9bmV3IG4oZSx0aGlzLnByZWZpeCt0K1wiLlwiKSksZS5hZGRPYnNlcnZlcih0aGlzKSksZX19KSxjKG4uZm4sYS5taXhpbnMuT2JzZXJ2ZXJzTWl4aW4pLGk9ZnVuY3Rpb24oKXt0aGlzLl9pdGVtcz1bXX0saS5wcm90b3R5cGU9e3JlZ2lzdGVyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLl9pdGVtcyxyPWlbMF0sbz17bmFtZTplLHR5cGU6dCxvcmRlcjpufTshcnx8ci5vcmRlcj5uP2kudW5zaGlmdChvKTppLnB1c2gobyl9LGNyZWF0ZTpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj10aGlzLl9pdGVtcyxvPXJbMF07aWYodCYmdC50eXBlKWZvcihuPXQudHlwZS50b0xvd2VyQ2FzZSgpLGk9MDtyLmxlbmd0aD5pO2krKylpZihyW2ldLm5hbWU9PT1uKXtvPXJbaV07YnJlYWt9cmV0dXJuIG8/bmV3IG8udHlwZShlLHQpOnZvaWQgYS5sb2dUb0NvbnNvbGUoXCJXYXJuaW5nOiBVbmFibGUgdG8gY3JlYXRlIEtlbmRvIFVJIERyYXdpbmcgU3VyZmFjZS4gUG9zc2libGUgY2F1c2VzOlxcbi0gVGhlIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBTVkcsIFZNTCBhbmQgQ2FudmFzLiBVc2VyIGFnZW50OiBcIituYXZpZ2F0b3IudXNlckFnZW50K1wiXFxuLSBUaGUgS2VuZG8gVUkgc2NyaXB0cyBhcmUgbm90IGZ1bGx5IGxvYWRlZFwiKX19LGkuY3VycmVudD1uZXcgaSxjKGEse2RyYXdpbmc6e0RBU0hfQVJSQVlTOntkb3Q6WzEuNSwzLjVdLGRhc2g6WzQsMy41XSxsb25nZGFzaDpbOCwzLjVdLGRhc2hkb3Q6WzMuNSwzLjUsMS41LDMuNV0sbG9uZ2Rhc2hkb3Q6WzgsMy41LDEuNSwzLjVdLGxvbmdkYXNoZG90ZG90Ols4LDMuNSwxLjUsMy41LDEuNSwzLjVdfSxDb2xvcjphLkNvbG9yLEJhc2VOb2RlOnQsT3B0aW9uc1N0b3JlOm4sU3VyZmFjZTpoLFN1cmZhY2VGYWN0b3J5Oml9fSksYS5kYXRhdml6LmRyYXdpbmc9YS5kcmF3aW5nXG59KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKCl7dmFyIGU9d2luZG93LmtlbmRvLHQ9ZS5kZWVwRXh0ZW5kLG49ZS51dGlsLmRlZmluZWQsaT1cImdyYWRpZW50XCIscj17ZXh0ZW5kOmZ1bmN0aW9uKGUpe2UuZmlsbD10aGlzLmZpbGwsZS5zdHJva2U9dGhpcy5zdHJva2V9LGZpbGw6ZnVuY3Rpb24oZSx0KXt2YXIgcixvPXRoaXMub3B0aW9ucztyZXR1cm4gbihlKT8oZSYmZS5ub2RlVHlwZSE9aT8ocj17Y29sb3I6ZX0sbih0KSYmKHIub3BhY2l0eT10KSxvLnNldChcImZpbGxcIixyKSk6by5zZXQoXCJmaWxsXCIsZSksdGhpcyk6by5nZXQoXCJmaWxsXCIpfSxzdHJva2U6ZnVuY3Rpb24oZSx0LGkpe3JldHVybiBuKGUpPyh0aGlzLm9wdGlvbnMuc2V0KFwic3Ryb2tlLmNvbG9yXCIsZSksbih0KSYmdGhpcy5vcHRpb25zLnNldChcInN0cm9rZS53aWR0aFwiLHQpLG4oaSkmJnRoaXMub3B0aW9ucy5zZXQoXCJzdHJva2Uub3BhY2l0eVwiLGkpLHRoaXMpOnRoaXMub3B0aW9ucy5nZXQoXCJzdHJva2VcIil9fSxvPXtleHRlbmQ6ZnVuY3Rpb24oZSx0KXtlLnRyYXZlcnNlPWZ1bmN0aW9uKGUpe3ZhciBuLGkscj10aGlzW3RdO2ZvcihuPTA7ci5sZW5ndGg+bjtuKyspaT1yW25dLGkudHJhdmVyc2U/aS50cmF2ZXJzZShlKTplKGkpO3JldHVybiB0aGlzfX19O3QoZS5kcmF3aW5nLHttaXhpbnM6e1BhaW50YWJsZTpyLFRyYXZlcnNhYmxlOm99fSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXtyZXR1cm4gZC5jdXJyZW50Lm1lYXN1cmUoZSx0KX12YXIgbj1kb2N1bWVudCxpPXdpbmRvdy5rZW5kbyxyPWkuQ2xhc3Msbz1pLmRlZXBFeHRlbmQsYT1pLnV0aWwscz1hLmRlZmluZWQsbD0xLGM9ci5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5fc2l6ZT1lLHRoaXMuX2xlbmd0aD0wLHRoaXMuX21hcD17fX0scHV0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPW4uX21hcCxyPXtrZXk6ZSx2YWx1ZTp0fTtpW2VdPXIsbi5faGVhZD8obi5fdGFpbC5uZXdlcj1yLHIub2xkZXI9bi5fdGFpbCxuLl90YWlsPXIpOm4uX2hlYWQ9bi5fdGFpbD1yLG4uX2xlbmd0aD49bi5fc2l6ZT8oaVtuLl9oZWFkLmtleV09bnVsbCxuLl9oZWFkPW4uX2hlYWQubmV3ZXIsbi5faGVhZC5vbGRlcj1udWxsKTpuLl9sZW5ndGgrK30sZ2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Ll9tYXBbZV07cmV0dXJuIG4/KG49PT10Ll9oZWFkJiZuIT09dC5fdGFpbCYmKHQuX2hlYWQ9bi5uZXdlcix0Ll9oZWFkLm9sZGVyPW51bGwpLG4hPT10Ll90YWlsJiYobi5vbGRlciYmKG4ub2xkZXIubmV3ZXI9bi5uZXdlcixuLm5ld2VyLm9sZGVyPW4ub2xkZXIpLG4ub2xkZXI9dC5fdGFpbCxuLm5ld2VyPW51bGwsdC5fdGFpbC5uZXdlcj1uLHQuX3RhaWw9biksbi52YWx1ZSk6dm9pZCAwfX0pLGQ9ci5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt0aGlzLl9jYWNoZT1uZXcgYygxZTMpfSxtZWFzdXJlOmZ1bmN0aW9uKGUsdCl7dmFyIGkscixvLGMsZCx1PWEub2JqZWN0S2V5KHQpLGg9YS5oYXNoS2V5KGUrdSkscD10aGlzLl9jYWNoZS5nZXQoaCk7aWYocClyZXR1cm4gcDtpPXt3aWR0aDowLGhlaWdodDowLGJhc2VsaW5lOjB9LHI9dGhpcy5fbWVhc3VyZUJveCxvPXRoaXMuX2Jhc2VsaW5lTWFya2VyLmNsb25lTm9kZSghMSk7Zm9yKGMgaW4gdClkPXRbY10scyhkKSYmKHIuc3R5bGVbY109ZCk7cmV0dXJuIHIuaW5uZXJIVE1MPWUsci5hcHBlbmRDaGlsZChvKSxuLmJvZHkuYXBwZW5kQ2hpbGQociksKGUrXCJcIikubGVuZ3RoJiYoaS53aWR0aD1yLm9mZnNldFdpZHRoLWwsaS5oZWlnaHQ9ci5vZmZzZXRIZWlnaHQsaS5iYXNlbGluZT1vLm9mZnNldFRvcCtsKSx0aGlzLl9jYWNoZS5wdXQoaCxpKSxyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQociksaX19KTtkLmZuLl9iYXNlbGluZU1hcmtlcj1lKFwiPGRpdiBjbGFzcz0nay1iYXNlbGluZS1tYXJrZXInIHN0eWxlPSdkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHZlcnRpY2FsLWFsaWduOiBiYXNlbGluZTt3aWR0aDogXCIrbCtcInB4OyBoZWlnaHQ6IFwiK2wrXCJweDtvdmVyZmxvdzogaGlkZGVuOycgLz5cIilbMF0sZC5mbi5fbWVhc3VyZUJveD1lKFwiPGRpdiBzdHlsZT0ncG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7IHRvcDogLTQwMDBweCAhaW1wb3J0YW50OyB3aWR0aDogYXV0byAhaW1wb3J0YW50OyBoZWlnaHQ6IGF1dG8gIWltcG9ydGFudDtwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IG1hcmdpbjogMCAhaW1wb3J0YW50OyBib3JkZXI6IDAgIWltcG9ydGFudDtsaW5lLWhlaWdodDogbm9ybWFsICFpbXBvcnRhbnQ7IHZpc2liaWxpdHk6IGhpZGRlbiAhaW1wb3J0YW50OyB3aGl0ZS1zcGFjZTpub3dyYXAgIWltcG9ydGFudDsnIC8+XCIpWzBdLGQuY3VycmVudD1uZXcgZCxvKGkuZHJhd2luZyx7dXRpbDp7VGV4dE1ldHJpY3M6ZCxMUlVDYWNoZTpjLG1lYXN1cmVUZXh0OnR9fSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0LG4pe3ZhciBpLHIsbyxhO2ZvcihyPTA7ZS5sZW5ndGg+cjtyKyspbz1lW3JdLG8udmlzaWJsZSgpJiYoYT10P28uYmJveChuKTpvLnJhd0JCb3goKSxhJiYoaT1pP00udW5pb24oaSxhKTphKSk7cmV0dXJuIGl9ZnVuY3Rpb24gbihlLHQsbil7dmFyIGkscixvLGE7Zm9yKHI9MDtlLmxlbmd0aD5yO3IrKylvPWVbcl0sby52aXNpYmxlKCkmJihhPXQ/by5jbGlwcGVkQkJveChuKTpvLnJhd0JCb3goKSxhJiYoaT1pP00udW5pb24oaSxhKTphKSk7cmV0dXJuIGl9ZnVuY3Rpb24gaShlLHQpe2Uub3JpZ2luLngtPXQsZS5vcmlnaW4ueS09dCxlLnNpemUud2lkdGgrPTIqdCxlLnNpemUuaGVpZ2h0Kz0yKnR9ZnVuY3Rpb24gcihlLHQpe2Zvcih2YXIgbj0wO3QubGVuZ3RoPm47bisrKWVbdFtuXV09byh0W25dKX1mdW5jdGlvbiBvKGUpe3ZhciB0PVwiX1wiK2U7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBWKGUpPyh0aGlzLl9vYnNlcnZlckZpZWxkKHQsZSksdGhpcy5nZW9tZXRyeUNoYW5nZSgpLHRoaXMpOnRoaXNbdF19fWZ1bmN0aW9uIGEoZSx0KXtmb3IodmFyIG49MDt0Lmxlbmd0aD5uO24rKyllW3Rbbl1dPXModFtuXSl9ZnVuY3Rpb24gcyhlKXt2YXIgdD1cIl9cIitlO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gVihlKT8odGhpcy5fb2JzZXJ2ZXJGaWVsZCh0LEUuY3JlYXRlKGUpKSx0aGlzLmdlb21ldHJ5Q2hhbmdlKCksdGhpcyk6dGhpc1t0XX19ZnVuY3Rpb24gbChlLHQpe2Zvcih2YXIgbj0wO3QubGVuZ3RoPm47bisrKWVbdFtuXV09Yyh0W25dKX1mdW5jdGlvbiBjKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gVih0KT8odGhpcy5vcHRpb25zLnNldChlLHQpLHRoaXMpOnRoaXMub3B0aW9ucy5nZXQoZSl9fXZhciBkLHUsaCxwLGYsZyxtLHYsXyx5LHcsYixrLHgsQyxTPXdpbmRvdy5rZW5kbyxUPVMuQ2xhc3MsRD1TLmRlZXBFeHRlbmQsQT1TLmdlb21ldHJ5LEU9QS5Qb2ludCxNPUEuUmVjdCxQPUEuU2l6ZSxJPUEuTWF0cml4LHo9QS50b01hdHJpeCxGPVMuZHJhd2luZyxSPUYuT3B0aW9uc1N0b3JlLEI9TWF0aCxMPUIucG93LE89Uy51dGlsLEg9Ty5hcHBlbmQsTj1PLmFycmF5TGltaXRzLFY9Ty5kZWZpbmVkLFU9Ty5sYXN0LFc9Ty52YWx1ZU9yRGVmYXVsdCxqPVMubWl4aW5zLk9ic2VydmVyc01peGluLEc9ZS5pbkFycmF5LHE9W10ucHVzaCwkPVtdLnBvcCxZPVtdLnNwbGljZSxLPVtdLnNoaWZ0LFE9W10uc2xpY2UsWD1bXS51bnNoaWZ0LEo9VC5leHRlbmQoe25vZGVUeXBlOlwiRWxlbWVudFwiLGluaXQ6ZnVuY3Rpb24oZSl7dGhpcy5faW5pdE9wdGlvbnMoZSl9LF9pbml0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgdCxuO2U9ZXx8e30sdD1lLnRyYW5zZm9ybSxuPWUuY2xpcCx0JiYoZS50cmFuc2Zvcm09QS50cmFuc2Zvcm0odCkpLG4mJiFuLmlkJiYobi5pZD1TLmd1aWQoKSksdGhpcy5vcHRpb25zPW5ldyBSKGUpLHRoaXMub3B0aW9ucy5hZGRPYnNlcnZlcih0aGlzKX0sdHJhbnNmb3JtOmZ1bmN0aW9uKGUpe3JldHVybiBWKGUpP3ZvaWQgdGhpcy5vcHRpb25zLnNldChcInRyYW5zZm9ybVwiLEEudHJhbnNmb3JtKGUpKTp0aGlzLm9wdGlvbnMuZ2V0KFwidHJhbnNmb3JtXCIpfSxwYXJlbnRUcmFuc2Zvcm06ZnVuY3Rpb24oKXtmb3IodmFyIGUsdCxuPXRoaXM7bi5wYXJlbnQ7KW49bi5wYXJlbnQsZT1uLnRyYW5zZm9ybSgpLGUmJih0PWUubWF0cml4KCkubXVsdGlwbHlDb3B5KHR8fEkudW5pdCgpKSk7cmV0dXJuIHQ/QS50cmFuc2Zvcm0odCk6dm9pZCAwfSxjdXJyZW50VHJhbnNmb3JtOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLnRyYW5zZm9ybSgpLHI9eihpKTtyZXR1cm4gVihlKXx8KGU9dGhpcy5wYXJlbnRUcmFuc2Zvcm0oKSksdD16KGUpLG49ciYmdD90Lm11bHRpcGx5Q29weShyKTpyfHx0LG4/QS50cmFuc2Zvcm0obik6dm9pZCAwfSx2aXNpYmxlOmZ1bmN0aW9uKGUpe3JldHVybiBWKGUpPyh0aGlzLm9wdGlvbnMuc2V0KFwidmlzaWJsZVwiLGUpLHRoaXMpOnRoaXMub3B0aW9ucy5nZXQoXCJ2aXNpYmxlXCIpIT09ITF9LGNsaXA6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5vcHRpb25zO3JldHVybiBWKGUpPyhlJiYhZS5pZCYmKGUuaWQ9Uy5ndWlkKCkpLHQuc2V0KFwiY2xpcFwiLGUpLHRoaXMpOnQuZ2V0KFwiY2xpcFwiKX0sb3BhY2l0eTpmdW5jdGlvbihlKXtyZXR1cm4gVihlKT8odGhpcy5vcHRpb25zLnNldChcIm9wYWNpdHlcIixlKSx0aGlzKTpXKHRoaXMub3B0aW9ucy5nZXQoXCJvcGFjaXR5XCIpLDEpfSxjbGlwcGVkQkJveDpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMuX2NsaXBwZWRCQm94KGUpO3JldHVybiBuPyh0PXRoaXMuY2xpcCgpLHQ/TS5pbnRlcnNlY3Qobix0LmJib3goZSkpOm4pOnZvaWQgMH0sX2NsaXBwZWRCQm94OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmJib3goZSl9fSk7RChKLmZuLGopLGQ9VC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7ZT1lfHxbXSx0aGlzLmxlbmd0aD0wLHRoaXMuX3NwbGljZSgwLGUubGVuZ3RoLGUpfSxlbGVtZW50czpmdW5jdGlvbihlKXtyZXR1cm4gZT8odGhpcy5fc3BsaWNlKDAsdGhpcy5sZW5ndGgsZSksdGhpcy5fY2hhbmdlKCksdGhpcyk6dGhpcy5zbGljZSgwKX0scHVzaDpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cyx0PXEuYXBwbHkodGhpcyxlKTtyZXR1cm4gdGhpcy5fYWRkKGUpLHR9LHNsaWNlOlEscG9wOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZW5ndGgsdD0kLmFwcGx5KHRoaXMpO3JldHVybiBlJiZ0aGlzLl9yZW1vdmUoW3RdKSx0fSxzcGxpY2U6ZnVuY3Rpb24oZSx0KXt2YXIgbj1RLmNhbGwoYXJndW1lbnRzLDIpLGk9dGhpcy5fc3BsaWNlKGUsdCxuKTtyZXR1cm4gdGhpcy5fY2hhbmdlKCksaX0sc2hpZnQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxlbmd0aCx0PUsuYXBwbHkodGhpcyk7cmV0dXJuIGUmJnRoaXMuX3JlbW92ZShbdF0pLHR9LHVuc2hpZnQ6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMsdD1YLmFwcGx5KHRoaXMsZSk7cmV0dXJuIHRoaXMuX2FkZChlKSx0fSxpbmRleE9mOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzO2Zvcih0PTAsbj1pLmxlbmd0aDtuPnQ7dCsrKWlmKGlbdF09PT1lKXJldHVybiB0O3JldHVybi0xfSxfc3BsaWNlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1ZLmFwcGx5KHRoaXMsW2UsdF0uY29uY2F0KG4pKTtyZXR1cm4gdGhpcy5fY2xlYXJPYnNlcnZlcihpKSx0aGlzLl9zZXRPYnNlcnZlcihuKSxpfSxfYWRkOmZ1bmN0aW9uKGUpe3RoaXMuX3NldE9ic2VydmVyKGUpLHRoaXMuX2NoYW5nZSgpfSxfcmVtb3ZlOmZ1bmN0aW9uKGUpe3RoaXMuX2NsZWFyT2JzZXJ2ZXIoZSksdGhpcy5fY2hhbmdlKCl9LF9zZXRPYnNlcnZlcjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDtlLmxlbmd0aD50O3QrKyllW3RdLmFkZE9ic2VydmVyKHRoaXMpfSxfY2xlYXJPYnNlcnZlcjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDtlLmxlbmd0aD50O3QrKyllW3RdLnJlbW92ZU9ic2VydmVyKHRoaXMpfSxfY2hhbmdlOmZ1bmN0aW9uKCl7fX0pLEQoZC5mbixqKSx1PUouZXh0ZW5kKHtub2RlVHlwZTpcIkdyb3VwXCIsaW5pdDpmdW5jdGlvbihlKXtKLmZuLmluaXQuY2FsbCh0aGlzLGUpLHRoaXMuY2hpbGRyZW49W119LGNoaWxkcmVuQ2hhbmdlOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLnRyaWdnZXIoXCJjaGlsZHJlbkNoYW5nZVwiLHthY3Rpb246ZSxpdGVtczp0LGluZGV4Om59KX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIEgodGhpcy5jaGlsZHJlbixhcmd1bWVudHMpLHRoaXMuX3JlcGFyZW50KGFyZ3VtZW50cyx0aGlzKSx0aGlzLmNoaWxkcmVuQ2hhbmdlKFwiYWRkXCIsYXJndW1lbnRzKSx0aGlzfSxpbnNlcnRBdDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmNoaWxkcmVuLnNwbGljZSh0LDAsZSksZS5wYXJlbnQ9dGhpcyx0aGlzLmNoaWxkcmVuQ2hhbmdlKFwiYWRkXCIsW2VdLHQpLHRoaXN9LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgdD1HKGUsdGhpcy5jaGlsZHJlbik7cmV0dXJuIHQ+PTAmJih0aGlzLmNoaWxkcmVuLnNwbGljZSh0LDEpLGUucGFyZW50PW51bGwsdGhpcy5jaGlsZHJlbkNoYW5nZShcInJlbW92ZVwiLFtlXSx0KSksdGhpc30scmVtb3ZlQXQ6ZnVuY3Rpb24oZSl7aWYoZT49MCYmdGhpcy5jaGlsZHJlbi5sZW5ndGg+ZSl7dmFyIHQ9dGhpcy5jaGlsZHJlbltlXTt0aGlzLmNoaWxkcmVuLnNwbGljZShlLDEpLHQucGFyZW50PW51bGwsdGhpcy5jaGlsZHJlbkNoYW5nZShcInJlbW92ZVwiLFt0XSxlKX1yZXR1cm4gdGhpc30sY2xlYXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNoaWxkcmVuO3JldHVybiB0aGlzLmNoaWxkcmVuPVtdLHRoaXMuX3JlcGFyZW50KGUsbnVsbCksdGhpcy5jaGlsZHJlbkNoYW5nZShcInJlbW92ZVwiLGUsMCksdGhpc30sYmJveDpmdW5jdGlvbihlKXtyZXR1cm4gdCh0aGlzLmNoaWxkcmVuLCEwLHRoaXMuY3VycmVudFRyYW5zZm9ybShlKSl9LHJhd0JCb3g6ZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLmNoaWxkcmVuLCExKX0sX2NsaXBwZWRCQm94OmZ1bmN0aW9uKGUpe3JldHVybiBuKHRoaXMuY2hpbGRyZW4sdGhpcy5jdXJyZW50VHJhbnNmb3JtKGUpKX0sY3VycmVudFRyYW5zZm9ybTpmdW5jdGlvbihlKXtyZXR1cm4gSi5mbi5jdXJyZW50VHJhbnNmb3JtLmNhbGwodGhpcyxlKXx8bnVsbH0sX3JlcGFyZW50OmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyO2ZvcihuPTA7ZS5sZW5ndGg+bjtuKyspaT1lW25dLHI9aS5wYXJlbnQsciYmciE9dGhpcyYmci5yZW1vdmUmJnIucmVtb3ZlKGkpLGkucGFyZW50PXR9fSksRi5taXhpbnMuVHJhdmVyc2FibGUuZXh0ZW5kKHUuZm4sXCJjaGlsZHJlblwiKSxoPUouZXh0ZW5kKHtub2RlVHlwZTpcIlRleHRcIixpbml0OmZ1bmN0aW9uKGUsdCxuKXtKLmZuLmluaXQuY2FsbCh0aGlzLG4pLHRoaXMuY29udGVudChlKSx0aGlzLnBvc2l0aW9uKHR8fG5ldyBBLlBvaW50KSx0aGlzLm9wdGlvbnMuZm9udHx8KHRoaXMub3B0aW9ucy5mb250PVwiMTJweCBzYW5zLXNlcmlmXCIpLFYodGhpcy5vcHRpb25zLmZpbGwpfHx0aGlzLmZpbGwoXCIjMDAwXCIpfSxjb250ZW50OmZ1bmN0aW9uKGUpe3JldHVybiBWKGUpPyh0aGlzLm9wdGlvbnMuc2V0KFwiY29udGVudFwiLGUpLHRoaXMpOnRoaXMub3B0aW9ucy5nZXQoXCJjb250ZW50XCIpfSxtZWFzdXJlOmZ1bmN0aW9uKCl7dmFyIGU9Ri51dGlsLm1lYXN1cmVUZXh0KHRoaXMuY29udGVudCgpLHtmb250OnRoaXMub3B0aW9ucy5nZXQoXCJmb250XCIpfSk7cmV0dXJuIGV9LHJlY3Q6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1lYXN1cmUoKSx0PXRoaXMucG9zaXRpb24oKS5jbG9uZSgpO3JldHVybiBuZXcgQS5SZWN0KHQsW2Uud2lkdGgsZS5oZWlnaHRdKX0sYmJveDpmdW5jdGlvbihlKXt2YXIgdD16KHRoaXMuY3VycmVudFRyYW5zZm9ybShlKSk7cmV0dXJuIHRoaXMucmVjdCgpLmJib3godCl9LHJhd0JCb3g6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWN0KCkuYmJveCgpfX0pLEYubWl4aW5zLlBhaW50YWJsZS5leHRlbmQoaC5mbiksYShoLmZuLFtcInBvc2l0aW9uXCJdKSxwPUouZXh0ZW5kKHtub2RlVHlwZTpcIkNpcmNsZVwiLGluaXQ6ZnVuY3Rpb24oZSx0KXtKLmZuLmluaXQuY2FsbCh0aGlzLHQpLHRoaXMuZ2VvbWV0cnkoZXx8bmV3IEEuQ2lyY2xlKSxWKHRoaXMub3B0aW9ucy5zdHJva2UpfHx0aGlzLnN0cm9rZShcIiMwMDBcIil9LGJib3g6ZnVuY3Rpb24oZSl7dmFyIHQ9eih0aGlzLmN1cnJlbnRUcmFuc2Zvcm0oZSkpLG49dGhpcy5fZ2VvbWV0cnkuYmJveCh0KSxyPXRoaXMub3B0aW9ucy5nZXQoXCJzdHJva2Uud2lkdGhcIik7cmV0dXJuIHImJmkobixyLzIpLG59LHJhd0JCb3g6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2VvbWV0cnkuYmJveCgpfX0pLEYubWl4aW5zLlBhaW50YWJsZS5leHRlbmQocC5mbikscihwLmZuLFtcImdlb21ldHJ5XCJdKSxmPUouZXh0ZW5kKHtub2RlVHlwZTpcIkFyY1wiLGluaXQ6ZnVuY3Rpb24oZSx0KXtKLmZuLmluaXQuY2FsbCh0aGlzLHQpLHRoaXMuZ2VvbWV0cnkoZXx8bmV3IEEuQXJjKSxWKHRoaXMub3B0aW9ucy5zdHJva2UpfHx0aGlzLnN0cm9rZShcIiMwMDBcIil9LGJib3g6ZnVuY3Rpb24oZSl7dmFyIHQ9eih0aGlzLmN1cnJlbnRUcmFuc2Zvcm0oZSkpLG49dGhpcy5nZW9tZXRyeSgpLmJib3godCkscj10aGlzLm9wdGlvbnMuZ2V0KFwic3Ryb2tlLndpZHRoXCIpO3JldHVybiByJiZpKG4sci8yKSxufSxyYXdCQm94OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2VvbWV0cnkoKS5iYm94KCl9LHRvUGF0aDpmdW5jdGlvbigpe3ZhciBlLHQ9bmV3IHYsbj10aGlzLmdlb21ldHJ5KCkuY3VydmVQb2ludHMoKTtpZihuLmxlbmd0aD4wKWZvcih0Lm1vdmVUbyhuWzBdLngsblswXS55KSxlPTE7bi5sZW5ndGg+ZTtlKz0zKXQuY3VydmVUbyhuW2VdLG5bZSsxXSxuW2UrMl0pO3JldHVybiB0fX0pLEYubWl4aW5zLlBhaW50YWJsZS5leHRlbmQoZi5mbikscihmLmZuLFtcImdlb21ldHJ5XCJdKSxnPWQuZXh0ZW5kKHtfY2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5nZW9tZXRyeUNoYW5nZSgpfX0pLG09VC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3RoaXMuYW5jaG9yKGV8fG5ldyBFKSx0aGlzLmNvbnRyb2xJbih0KSx0aGlzLmNvbnRyb2xPdXQobil9LGJib3hUbzpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcy5hbmNob3IoKS50cmFuc2Zvcm1Db3B5KHQpLHI9ZS5hbmNob3IoKS50cmFuc2Zvcm1Db3B5KHQpO3JldHVybiBuPXRoaXMuY29udHJvbE91dCgpJiZlLmNvbnRyb2xJbigpP3RoaXMuX2N1cnZlQm91bmRpbmdCb3goaSx0aGlzLmNvbnRyb2xPdXQoKS50cmFuc2Zvcm1Db3B5KHQpLGUuY29udHJvbEluKCkudHJhbnNmb3JtQ29weSh0KSxyKTp0aGlzLl9saW5lQm91bmRpbmdCb3goaSxyKX0sX2xpbmVCb3VuZGluZ0JveDpmdW5jdGlvbihlLHQpe3JldHVybiBNLmZyb21Qb2ludHMoZSx0KX0sX2N1cnZlQm91bmRpbmdCb3g6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9W2UsdCxuLGldLG89dGhpcy5fY3VydmVFeHRyZW1lc0ZvcihyLFwieFwiKSxhPXRoaXMuX2N1cnZlRXh0cmVtZXNGb3IocixcInlcIikscz1OKFtvLm1pbixvLm1heCxlLngsaS54XSksbD1OKFthLm1pbixhLm1heCxlLnksaS55XSk7cmV0dXJuIE0uZnJvbVBvaW50cyhuZXcgRShzLm1pbixsLm1pbiksbmV3IEUocy5tYXgsbC5tYXgpKX0sX2N1cnZlRXh0cmVtZXNGb3I6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9jdXJ2ZUV4dHJlbWVzKGVbMF1bdF0sZVsxXVt0XSxlWzJdW3RdLGVbM11bdF0pO3JldHVybnttaW46dGhpcy5fY2FsY3VsYXRlQ3VydmVBdChuLm1pbix0LGUpLG1heDp0aGlzLl9jYWxjdWxhdGVDdXJ2ZUF0KG4ubWF4LHQsZSl9fSxfY2FsY3VsYXRlQ3VydmVBdDpmdW5jdGlvbihlLHQsbil7dmFyIGk9MS1lO3JldHVybiBMKGksMykqblswXVt0XSszKkwoaSwyKSplKm5bMV1bdF0rMypMKGUsMikqaSpuWzJdW3RdK0woZSwzKSpuWzNdW3RdfSxfY3VydmVFeHRyZW1lczpmdW5jdGlvbihlLHQsbixpKXt2YXIgcixvLGE9ZS0zKnQrMypuLWkscz0tMiooZS0yKnQrbiksbD1lLXQsYz1CLnNxcnQocypzLTQqYSpsKSxkPTAsdT0xO3JldHVybiAwPT09YT8wIT09cyYmKGQ9dT0tbC9zKTppc05hTihjKXx8KGQ9KC1zK2MpLygyKmEpLHU9KC1zLWMpLygyKmEpKSxyPUIubWF4KEIubWluKGQsdSksMCksKDA+cnx8cj4xKSYmKHI9MCksbz1CLm1pbihCLm1heChkLHUpLDEpLChvPjF8fDA+bykmJihvPTEpLHttaW46cixtYXg6b319fSksYShtLmZuLFtcImFuY2hvclwiLFwiY29udHJvbEluXCIsXCJjb250cm9sT3V0XCJdKSxEKG0uZm4saiksdj1KLmV4dGVuZCh7bm9kZVR5cGU6XCJQYXRoXCIsaW5pdDpmdW5jdGlvbihlKXtKLmZuLmluaXQuY2FsbCh0aGlzLGUpLHRoaXMuc2VnbWVudHM9bmV3IGcsdGhpcy5zZWdtZW50cy5hZGRPYnNlcnZlcih0aGlzKSxWKHRoaXMub3B0aW9ucy5zdHJva2UpfHwodGhpcy5zdHJva2UoXCIjMDAwXCIpLFYodGhpcy5vcHRpb25zLnN0cm9rZS5saW5lSm9pbil8fHRoaXMub3B0aW9ucy5zZXQoXCJzdHJva2UubGluZUpvaW5cIixcIm1pdGVyXCIpKX0sbW92ZVRvOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuc3VzcGVuZCgpLHRoaXMuc2VnbWVudHMuZWxlbWVudHMoW10pLHRoaXMucmVzdW1lKCksdGhpcy5saW5lVG8oZSx0KSx0aGlzfSxsaW5lVG86ZnVuY3Rpb24oZSx0KXt2YXIgbj1WKHQpP25ldyBFKGUsdCk6ZSxpPW5ldyBtKG4pO3JldHVybiB0aGlzLnNlZ21lbnRzLnB1c2goaSksdGhpc30sY3VydmVUbzpmdW5jdGlvbihlLHQsbil7dmFyIGkscjtyZXR1cm4gdGhpcy5zZWdtZW50cy5sZW5ndGg+MCYmKGk9VSh0aGlzLnNlZ21lbnRzKSxyPW5ldyBtKG4sdCksdGhpcy5zdXNwZW5kKCksaS5jb250cm9sT3V0KGUpLHRoaXMucmVzdW1lKCksdGhpcy5zZWdtZW50cy5wdXNoKHIpKSx0aGlzfSxhcmM6ZnVuY3Rpb24oZSx0LG4saSxyKXt2YXIgbyxhLHMsbCxjO3JldHVybiB0aGlzLnNlZ21lbnRzLmxlbmd0aD4wJiYobz1VKHRoaXMuc2VnbWVudHMpLGE9by5hbmNob3IoKSxzPU8ucmFkKGUpLGw9bmV3IEUoYS54LW4qQi5jb3MocyksYS55LWkqQi5zaW4ocykpLGM9bmV3IEEuQXJjKGwse3N0YXJ0QW5nbGU6ZSxlbmRBbmdsZTp0LHJhZGl1c1g6bixyYWRpdXNZOmksYW50aWNsb2Nrd2lzZTpyfSksdGhpcy5fYWRkQXJjU2VnbWVudHMoYykpLHRoaXN9LGFyY1RvOmZ1bmN0aW9uKGUsdCxuLGkscil7dmFyIG8sYSxzO3JldHVybiB0aGlzLnNlZ21lbnRzLmxlbmd0aD4wJiYobz1VKHRoaXMuc2VnbWVudHMpLGE9by5hbmNob3IoKSxzPUEuQXJjLmZyb21Qb2ludHMoYSxlLHQsbixpLHIpLHRoaXMuX2FkZEFyY1NlZ21lbnRzKHMpKSx0aGlzfSxfYWRkQXJjU2VnbWVudHM6ZnVuY3Rpb24oZSl7dmFyIHQsbjtmb3IodGhpcy5zdXNwZW5kKCksdD1lLmN1cnZlUG9pbnRzKCksbj0xO3QubGVuZ3RoPm47bis9Myl0aGlzLmN1cnZlVG8odFtuXSx0W24rMV0sdFtuKzJdKTt0aGlzLnJlc3VtZSgpLHRoaXMuZ2VvbWV0cnlDaGFuZ2UoKX0sY2xvc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLmNsb3NlZD0hMCx0aGlzLmdlb21ldHJ5Q2hhbmdlKCksdGhpc30sYmJveDpmdW5jdGlvbihlKXt2YXIgdD16KHRoaXMuY3VycmVudFRyYW5zZm9ybShlKSksbj10aGlzLl9iYm94KHQpLHI9dGhpcy5vcHRpb25zLmdldChcInN0cm9rZS53aWR0aFwiKTtyZXR1cm4gciYmaShuLHIvMiksbn0scmF3QkJveDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYm94KCl9LF9iYm94OmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG89dGhpcy5zZWdtZW50cyxhPW8ubGVuZ3RoO2lmKDE9PT1hKW49b1swXS5hbmNob3IoKS50cmFuc2Zvcm1Db3B5KGUpLHQ9bmV3IE0obixQLlpFUk8pO2Vsc2UgaWYoYT4wKWZvcihpPTE7YT5pO2krKylyPW9baS0xXS5iYm94VG8ob1tpXSxlKSx0PXQ/TS51bmlvbih0LHIpOnI7cmV0dXJuIHR9fSksRi5taXhpbnMuUGFpbnRhYmxlLmV4dGVuZCh2LmZuKSx2LmZyb21SZWN0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyB2KHQpLm1vdmVUbyhlLnRvcExlZnQoKSkubGluZVRvKGUudG9wUmlnaHQoKSkubGluZVRvKGUuYm90dG9tUmlnaHQoKSkubGluZVRvKGUuYm90dG9tTGVmdCgpKS5jbG9zZSgpfSx2LmZyb21Qb2ludHM9ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI7aWYoZSl7Zm9yKG49bmV3IHYodCksaT0wO2UubGVuZ3RoPmk7aSsrKXI9RS5jcmVhdGUoZVtpXSksciYmKDA9PT1pP24ubW92ZVRvKHIpOm4ubGluZVRvKHIpKTtyZXR1cm4gbn19LHYuZnJvbUFyYz1mdW5jdGlvbihlLHQpe3ZhciBuPW5ldyB2KHQpLGk9ZS5zdGFydEFuZ2xlLHI9ZS5wb2ludEF0KGkpO3JldHVybiBuLm1vdmVUbyhyLngsci55KSxuLmFyYyhpLGUuZW5kQW5nbGUsZS5yYWRpdXNYLGUucmFkaXVzWSxlLmFudGljbG9ja3dpc2UpLG59LF89Si5leHRlbmQoe25vZGVUeXBlOlwiTXVsdGlQYXRoXCIsaW5pdDpmdW5jdGlvbihlKXtKLmZuLmluaXQuY2FsbCh0aGlzLGUpLHRoaXMucGF0aHM9bmV3IGcsdGhpcy5wYXRocy5hZGRPYnNlcnZlcih0aGlzKSxWKHRoaXMub3B0aW9ucy5zdHJva2UpfHx0aGlzLnN0cm9rZShcIiMwMDBcIil9LG1vdmVUbzpmdW5jdGlvbihlLHQpe3ZhciBuPW5ldyB2O3JldHVybiBuLm1vdmVUbyhlLHQpLHRoaXMucGF0aHMucHVzaChuKSx0aGlzfSxsaW5lVG86ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5wYXRocy5sZW5ndGg+MCYmVSh0aGlzLnBhdGhzKS5saW5lVG8oZSx0KSx0aGlzfSxjdXJ2ZVRvOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5wYXRocy5sZW5ndGg+MCYmVSh0aGlzLnBhdGhzKS5jdXJ2ZVRvKGUsdCxuKSx0aGlzfSxhcmM6ZnVuY3Rpb24oZSx0LG4saSxyKXtyZXR1cm4gdGhpcy5wYXRocy5sZW5ndGg+MCYmVSh0aGlzLnBhdGhzKS5hcmMoZSx0LG4saSxyKSx0aGlzfSxhcmNUbzpmdW5jdGlvbihlLHQsbixpLHIpe3JldHVybiB0aGlzLnBhdGhzLmxlbmd0aD4wJiZVKHRoaXMucGF0aHMpLmFyY1RvKGUsdCxuLGksciksdGhpc30sY2xvc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXRocy5sZW5ndGg+MCYmVSh0aGlzLnBhdGhzKS5jbG9zZSgpLHRoaXN9LGJib3g6ZnVuY3Rpb24oZSl7cmV0dXJuIHQodGhpcy5wYXRocywhMCx0aGlzLmN1cnJlbnRUcmFuc2Zvcm0oZSkpfSxyYXdCQm94OmZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcy5wYXRocywhMSl9LF9jbGlwcGVkQkJveDpmdW5jdGlvbihlKXtyZXR1cm4gbih0aGlzLnBhdGhzLHRoaXMuY3VycmVudFRyYW5zZm9ybShlKSl9fSksRi5taXhpbnMuUGFpbnRhYmxlLmV4dGVuZChfLmZuKSx5PUouZXh0ZW5kKHtub2RlVHlwZTpcIkltYWdlXCIsaW5pdDpmdW5jdGlvbihlLHQsbil7Si5mbi5pbml0LmNhbGwodGhpcyxuKSx0aGlzLnNyYyhlKSx0aGlzLnJlY3QodHx8bmV3IEEuUmVjdCl9LHNyYzpmdW5jdGlvbihlKXtyZXR1cm4gVihlKT8odGhpcy5vcHRpb25zLnNldChcInNyY1wiLGUpLHRoaXMpOnRoaXMub3B0aW9ucy5nZXQoXCJzcmNcIil9LGJib3g6ZnVuY3Rpb24oZSl7dmFyIHQ9eih0aGlzLmN1cnJlbnRUcmFuc2Zvcm0oZSkpO3JldHVybiB0aGlzLl9yZWN0LmJib3godCl9LHJhd0JCb3g6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVjdC5iYm94KCl9fSkscih5LmZuLFtcInJlY3RcIl0pLHc9VC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3RoaXMub3B0aW9ucz1uZXcgUih7b2Zmc2V0OmUsY29sb3I6dCxvcGFjaXR5OlYobik/bjoxfSksdGhpcy5vcHRpb25zLmFkZE9ic2VydmVyKHRoaXMpfX0pLGwody5mbixbXCJvZmZzZXRcIixcImNvbG9yXCIsXCJvcGFjaXR5XCJdKSxEKHcuZm4saiksdy5jcmVhdGU9ZnVuY3Rpb24oZSl7aWYoVihlKSl7dmFyIHQ7cmV0dXJuIHQ9ZSBpbnN0YW5jZW9mIHc/ZTplLmxlbmd0aD4xP25ldyB3KGVbMF0sZVsxXSxlWzJdKTpuZXcgdyhlLm9mZnNldCxlLmNvbG9yLGUub3BhY2l0eSl9fSxiPWQuZXh0ZW5kKHtfY2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zQ2hhbmdlKHtmaWVsZDpcInN0b3BzXCJ9KX19KSxrPVQuZXh0ZW5kKHtub2RlVHlwZTpcImdyYWRpZW50XCIsaW5pdDpmdW5jdGlvbihlKXt0aGlzLnN0b3BzPW5ldyBiKHRoaXMuX2NyZWF0ZVN0b3BzKGUuc3RvcHMpKSx0aGlzLnN0b3BzLmFkZE9ic2VydmVyKHRoaXMpLHRoaXMuX3VzZXJTcGFjZT1lLnVzZXJTcGFjZSx0aGlzLmlkPVMuZ3VpZCgpfSx1c2VyU3BhY2U6ZnVuY3Rpb24oZSl7cmV0dXJuIFYoZSk/KHRoaXMuX3VzZXJTcGFjZT1lLHRoaXMub3B0aW9uc0NoYW5nZSgpLHRoaXMpOnRoaXMuX3VzZXJTcGFjZX0sX2NyZWF0ZVN0b3BzOmZ1bmN0aW9uKGUpe3ZhciB0LG49W107Zm9yKGU9ZXx8W10sdD0wO2UubGVuZ3RoPnQ7dCsrKW4ucHVzaCh3LmNyZWF0ZShlW3RdKSk7cmV0dXJuIG59LGFkZFN0b3A6ZnVuY3Rpb24oZSx0LG4pe3RoaXMuc3RvcHMucHVzaChuZXcgdyhlLHQsbikpfSxyZW1vdmVTdG9wOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc3RvcHMuaW5kZXhPZihlKTt0Pj0wJiZ0aGlzLnN0b3BzLnNwbGljZSh0LDEpfX0pLEQoay5mbixqLHtvcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKGUpe3RoaXMudHJpZ2dlcihcIm9wdGlvbnNDaGFuZ2VcIix7ZmllbGQ6XCJncmFkaWVudFwiKyhlP1wiLlwiK2UuZmllbGQ6XCJcIiksdmFsdWU6dGhpc30pfSxnZW9tZXRyeUNoYW5nZTpmdW5jdGlvbigpe3RoaXMub3B0aW9uc0NoYW5nZSgpfX0pLHg9ay5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7ZT1lfHx7fSxrLmZuLmluaXQuY2FsbCh0aGlzLGUpLHRoaXMuc3RhcnQoZS5zdGFydHx8bmV3IEUpLHRoaXMuZW5kKGUuZW5kfHxuZXcgRSgxLDApKX19KSxhKHguZm4sW1wic3RhcnRcIixcImVuZFwiXSksQz1rLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXtlPWV8fHt9LGsuZm4uaW5pdC5jYWxsKHRoaXMsZSksdGhpcy5jZW50ZXIoZS5jZW50ZXJ8fG5ldyBFKSx0aGlzLl9yYWRpdXM9VihlLnJhZGl1cyk/ZS5yYWRpdXM6MSx0aGlzLl9mYWxsYmFja0ZpbGw9ZS5mYWxsYmFja0ZpbGx9LHJhZGl1czpmdW5jdGlvbihlKXtyZXR1cm4gVihlKT8odGhpcy5fcmFkaXVzPWUsdGhpcy5nZW9tZXRyeUNoYW5nZSgpLHRoaXMpOnRoaXMuX3JhZGl1c30sZmFsbGJhY2tGaWxsOmZ1bmN0aW9uKGUpe3JldHVybiBWKGUpPyh0aGlzLl9mYWxsYmFja0ZpbGw9ZSx0aGlzLm9wdGlvbnNDaGFuZ2UoKSx0aGlzKTp0aGlzLl9mYWxsYmFja0ZpbGx9fSksYShDLmZuLFtcImNlbnRlclwiXSksRChGLHtBcmM6ZixDaXJjbGU6cCxFbGVtZW50OkosRWxlbWVudHNBcnJheTpkLEdyYWRpZW50OmssR3JhZGllbnRTdG9wOncsR3JvdXA6dSxJbWFnZTp5LExpbmVhckdyYWRpZW50OngsTXVsdGlQYXRoOl8sUGF0aDp2LFJhZGlhbEdyYWRpZW50OkMsU2VnbWVudDptLFRleHQ6aH0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3ZhciB0PVtdO3JldHVybiBlLnJlcGxhY2UoZyxmdW5jdGlvbihlLG4pe3QucHVzaChwYXJzZUZsb2F0KG4pKX0pLHR9ZnVuY3Rpb24gbihlLHQsbil7dmFyIGkscj10PzA6MTtmb3IoaT0wO2UubGVuZ3RoPmk7aSs9MillLnNwbGljZShpK3IsMCxuKX1mdW5jdGlvbiBpKGUsdCl7cmV0dXJuIGUmJnQ/dC5zY2FsZUNvcHkoMikudHJhbnNsYXRlKC1lLngsLWUueSk6dm9pZCAwfWZ1bmN0aW9uIHIoZSx0LG4pe3ZhciBpPTEvMztyZXR1cm4gdD10LmNsb25lKCkuc2NhbGUoMi8zKSx7Y29udHJvbE91dDp0LmNsb25lKCkudHJhbnNsYXRlV2l0aChlLnNjYWxlQ29weShpKSksY29udHJvbEluOnQudHJhbnNsYXRlV2l0aChuLnNjYWxlQ29weShpKSl9fXZhciBvPXdpbmRvdy5rZW5kbyxhPW8uZHJhd2luZyxzPW8uZ2VvbWV0cnksbD1vLkNsYXNzLGM9cy5Qb2ludCxkPW8uZGVlcEV4dGVuZCx1PWUudHJpbSxoPW8udXRpbCxwPWgubGFzdCxmPS8oW2Etel17MX0pKFteYS16XSopKHopPy9naSxnPS9bLFxcc10/KC0/KD86XFxkK1xcLik/XFxkKykvZyxtPVwibVwiLHY9XCJ6XCIsXz1sLmV4dGVuZCh7cGFyc2U6ZnVuY3Rpb24oZSxuKXt2YXIgaSxyPW5ldyBhLk11bHRpUGF0aChuKSxvPW5ldyBjO3JldHVybiBlLnJlcGxhY2UoZixmdW5jdGlvbihlLG4sYSxzKXt2YXIgbD1uLnRvTG93ZXJDYXNlKCksYz1sPT09bixkPXQodShhKSk7aWYobD09PW0mJihjPyhvLngrPWRbMF0sby55Kz1kWzFdKTooby54PWRbMF0sby55PWRbMV0pLHIubW92ZVRvKG8ueCxvLnkpLGQubGVuZ3RoPjImJihsPVwibFwiLGQuc3BsaWNlKDAsMikpKSx5W2xdKXlbbF0ocix7cGFyYW1ldGVyczpkLHBvc2l0aW9uOm8saXNSZWxhdGl2ZTpjLHByZXZpb3VzQ29tbWFuZDppfSkscyYmcy50b0xvd2VyQ2FzZSgpPT09diYmci5jbG9zZSgpO2Vsc2UgaWYobCE9PW0pdGhyb3cgRXJyb3IoXCJFcnJvciB3aGlsZSBwYXJzaW5nIFNWRyBwYXRoLiBVbnN1cHBvcnRlZCBjb21tYW5kOiBcIitsKTtpPWx9KSxyfX0pLHk9e2w6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dC5wYXJhbWV0ZXJzLG89dC5wb3NpdGlvbjtmb3Iobj0wO3IubGVuZ3RoPm47bis9MilpPW5ldyBjKHJbbl0scltuKzFdKSx0LmlzUmVsYXRpdmUmJmkudHJhbnNsYXRlV2l0aChvKSxlLmxpbmVUbyhpLngsaS55KSxvLng9aS54LG8ueT1pLnl9LGM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxhPXQucGFyYW1ldGVycyxzPXQucG9zaXRpb247Zm9yKG89MDthLmxlbmd0aD5vO28rPTYpbj1uZXcgYyhhW29dLGFbbysxXSksaT1uZXcgYyhhW28rMl0sYVtvKzNdKSxyPW5ldyBjKGFbbys0XSxhW28rNV0pLHQuaXNSZWxhdGl2ZSYmKGkudHJhbnNsYXRlV2l0aChzKSxuLnRyYW5zbGF0ZVdpdGgocyksci50cmFuc2xhdGVXaXRoKHMpKSxlLmN1cnZlVG8obixpLHIpLHMueD1yLngscy55PXIueX0sdjpmdW5jdGlvbihlLHQpe3ZhciBpPXQuaXNSZWxhdGl2ZT8wOnQucG9zaXRpb24ueDtuKHQucGFyYW1ldGVycywhMCxpKSx0aGlzLmwoZSx0KX0saDpmdW5jdGlvbihlLHQpe3ZhciBpPXQuaXNSZWxhdGl2ZT8wOnQucG9zaXRpb24ueTtuKHQucGFyYW1ldGVycywhMSxpKSx0aGlzLmwoZSx0KX0sYTpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGEscyxsPXQucGFyYW1ldGVycyxkPXQucG9zaXRpb247Zm9yKG49MDtsLmxlbmd0aD5uO24rPTcpaT1sW25dLHI9bFtuKzFdLG89bFtuKzNdLGE9bFtuKzRdLHM9bmV3IGMobFtuKzVdLGxbbis2XSksdC5pc1JlbGF0aXZlJiZzLnRyYW5zbGF0ZVdpdGgoZCksZS5hcmNUbyhzLGkscixvLGEpLGQueD1zLngsZC55PXMueX0sczpmdW5jdGlvbihlLHQpe3ZhciBuLHIsbyxhLHMsbD10LnBhcmFtZXRlcnMsZD10LnBvc2l0aW9uLHU9dC5wcmV2aW91c0NvbW1hbmQ7Zm9yKChcInNcIj09dXx8XCJjXCI9PXUpJiYoYT1wKHAoZS5wYXRocykuc2VnbWVudHMpLmNvbnRyb2xJbigpKSxzPTA7bC5sZW5ndGg+cztzKz00KW89bmV3IGMobFtzXSxsW3MrMV0pLHI9bmV3IGMobFtzKzJdLGxbcyszXSksdC5pc1JlbGF0aXZlJiYoby50cmFuc2xhdGVXaXRoKGQpLHIudHJhbnNsYXRlV2l0aChkKSksbj1hP2koYSxkKTpkLmNsb25lKCksYT1vLGUuY3VydmVUbyhuLG8sciksZC54PXIueCxkLnk9ci55fSxxOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxvLGEscz10LnBhcmFtZXRlcnMsbD10LnBvc2l0aW9uO2ZvcihhPTA7cy5sZW5ndGg+YTthKz00KW89bmV3IGMoc1thXSxzW2ErMV0pLGk9bmV3IGMoc1thKzJdLHNbYSszXSksdC5pc1JlbGF0aXZlJiYoby50cmFuc2xhdGVXaXRoKGwpLGkudHJhbnNsYXRlV2l0aChsKSksbj1yKGwsbyxpKSxlLmN1cnZlVG8obi5jb250cm9sT3V0LG4uY29udHJvbEluLGkpLGwueD1pLngsbC55PWkueX0sdDpmdW5jdGlvbihlLHQpe3ZhciBuLG8sYSxzLGwsZD10LnBhcmFtZXRlcnMsdT10LnBvc2l0aW9uLGg9dC5wcmV2aW91c0NvbW1hbmQ7Zm9yKChcInFcIj09aHx8XCJ0XCI9PWgpJiYocz1wKHAoZS5wYXRocykuc2VnbWVudHMpLG89cy5jb250cm9sSW4oKS5jbG9uZSgpLnRyYW5zbGF0ZVdpdGgodS5zY2FsZUNvcHkoLTEvMykpLnNjYWxlKDEuNSkpLGw9MDtkLmxlbmd0aD5sO2wrPTIpYT1uZXcgYyhkW2xdLGRbbCsxXSksdC5pc1JlbGF0aXZlJiZhLnRyYW5zbGF0ZVdpdGgodSksbz1vP2kobyx1KTp1LmNsb25lKCksbj1yKHUsbyxhKSxlLmN1cnZlVG8obi5jb250cm9sT3V0LG4uY29udHJvbEluLGEpLHUueD1hLngsdS55PWEueX19O18uY3VycmVudD1uZXcgXyxhLlBhdGgucGFyc2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gXy5jdXJyZW50LnBhcnNlKGUsdCl9LGQoYSx7UGF0aFBhcnNlcjpffSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dmFyIHQsbixpLHI7dHJ5e3Q9ZS5nZXRTY3JlZW5DVE0/ZS5nZXRTY3JlZW5DVE0oKTpudWxsfWNhdGNoKG8pe310JiYobj0tdC5lJTEsaT0tdC5mJTEscj1lLnN0eWxlLCgwIT09bnx8MCE9PWkpJiYoci5sZWZ0PW4rXCJweFwiLHIudG9wPWkrXCJweFwiKSl9ZnVuY3Rpb24gbigpe3ZhciBlPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYmFzZVwiKVswXSx0PVwiXCIsbj1kb2N1bWVudC5sb2NhdGlvbi5ocmVmLGk9bi5pbmRleE9mKFwiI1wiKTtyZXR1cm4gZSYmIWQuc3VwcG9ydC5icm93c2VyLm1zaWUmJigtMSE9PWkmJihuPW4uc3Vic3RyaW5nKDAsaSkpLHQ9biksdH1mdW5jdGlvbiBpKGUpe3JldHVyblwidXJsKFwiK24oKStcIiNcIitlK1wiKVwifWZ1bmN0aW9uIHIoZSl7dmFyIHQsbixpLHI9bmV3IEYoe2VuY29kZVRleHQ6ITB9KSxvPWUuY2xpcHBlZEJCb3goKTtyZXR1cm4gbyYmKHQ9by5nZXRPcmlnaW4oKSxuPW5ldyBwLkdyb3VwLG4udHJhbnNmb3JtKGgudHJhbnNmb3JtKCkudHJhbnNsYXRlKC10LngsLXQueSkpLG4uY2hpbGRyZW4ucHVzaChlKSxlPW4pLHIubG9hZChbZV0pLGk9XCI8P3htbCB2ZXJzaW9uPScxLjAnID8+PHN2ZyBzdHlsZT0nd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgb3ZlcmZsb3c6IGhpZGRlbjsnIHhtbG5zPSdcIitFK1wiJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycgdmVyc2lvbj0nMS4xJz5cIityLnJlbmRlcigpK1wiPC9zdmc+XCIsci5kZXN0cm95KCksaX1mdW5jdGlvbiBvKHQsbil7dmFyIGk9cih0KTtyZXR1cm4gbiYmbi5yYXd8fChpPVwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxcIitnLmVuY29kZUJhc2U2NChpKSksZS5EZWZlcnJlZCgpLnJlc29sdmUoaSkucHJvbWlzZSgpfWZ1bmN0aW9uIGEoZSx0KXtyZXR1cm5cImNsaXBcIj09ZXx8XCJmaWxsXCI9PWUmJighdHx8dC5ub2RlVHlwZT09Qyl9ZnVuY3Rpb24gcyhlKXtpZighZXx8IWUuaW5kZXhPZnx8ZS5pbmRleE9mKFwiJlwiKTwwKXJldHVybiBlO3ZhciB0PXMuX2VsZW1lbnQ7cmV0dXJuIHQuaW5uZXJIVE1MPWUsdC50ZXh0Q29udGVudHx8dC5pbm5lclRleHR9dmFyIGwsYz1kb2N1bWVudCxkPXdpbmRvdy5rZW5kbyx1PWQuZGVlcEV4dGVuZCxoPWQuZ2VvbWV0cnkscD1kLmRyYXdpbmcsZj1wLkJhc2VOb2RlLGc9ZC51dGlsLG09Zy5kZWZpbmVkLHY9Zy5pc1RyYW5zcGFyZW50LF89Zy5yZW5kZXJBdHRyLHk9Zy5yZW5kZXJBbGxBdHRyLHc9Zy5yZW5kZXJUZW1wbGF0ZSxiPWUuaW5BcnJheSxrPVwiYnV0dFwiLHg9cC5EQVNIX0FSUkFZUyxDPVwiZ3JhZGllbnRcIixTPVwibm9uZVwiLFQ9XCIua2VuZG9cIixEPVwic29saWRcIixBPVwiIFwiLEU9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLE09XCJ0cmFuc2Zvcm1cIixQPVwidW5kZWZpbmVkXCIsST1wLlN1cmZhY2UuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsbil7cC5TdXJmYWNlLmZuLmluaXQuY2FsbCh0aGlzLGUsbiksdGhpcy5fcm9vdD1uZXcgRih0aGlzLm9wdGlvbnMpLEsodGhpcy5lbGVtZW50WzBdLHRoaXMuX3RlbXBsYXRlKHRoaXMpKSx0aGlzLl9yb290RWxlbWVudD10aGlzLmVsZW1lbnRbMF0uZmlyc3RFbGVtZW50Q2hpbGQsdCh0aGlzLl9yb290RWxlbWVudCksdGhpcy5fcm9vdC5hdHRhY2hUbyh0aGlzLl9yb290RWxlbWVudCksdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIitULHRoaXMuX2NsaWNrKSx0aGlzLmVsZW1lbnQub24oXCJtb3VzZW92ZXJcIitULHRoaXMuX21vdXNlZW50ZXIpLHRoaXMuZWxlbWVudC5vbihcIm1vdXNlb3V0XCIrVCx0aGlzLl9tb3VzZWxlYXZlKSx0aGlzLnJlc2l6ZSgpfSx0eXBlOlwic3ZnXCIsZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX3Jvb3QmJih0aGlzLl9yb290LmRlc3Ryb3koKSx0aGlzLl9yb290PW51bGwsdGhpcy5fcm9vdEVsZW1lbnQ9bnVsbCx0aGlzLmVsZW1lbnQub2ZmKFQpKSxwLlN1cmZhY2UuZm4uZGVzdHJveS5jYWxsKHRoaXMpfSx0cmFuc2xhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZC5mb3JtYXQoXCJ7MH0gezF9IHsyfSB7M31cIixNYXRoLnJvdW5kKGUueCksTWF0aC5yb3VuZChlLnkpLHRoaXMuX3NpemUud2lkdGgsdGhpcy5fc2l6ZS5oZWlnaHQpO3RoaXMuX29mZnNldD1lLHRoaXMuX3Jvb3RFbGVtZW50LnNldEF0dHJpYnV0ZShcInZpZXdCb3hcIix0KX0sZHJhdzpmdW5jdGlvbihlKXt0aGlzLl9yb290LmxvYWQoW2VdKX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLl9yb290LmNsZWFyKCl9LHN2ZzpmdW5jdGlvbigpe3JldHVyblwiPD94bWwgdmVyc2lvbj0nMS4wJyA/PlwiK3RoaXMuX3RlbXBsYXRlKHRoaXMpfSxfcmVzaXplOmZ1bmN0aW9uKCl7dGhpcy5fb2Zmc2V0JiZ0aGlzLnRyYW5zbGF0ZSh0aGlzLl9vZmZzZXQpfSxfdGVtcGxhdGU6dyhcIjxzdmcgc3R5bGU9J3dpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IG92ZXJmbG93OiBoaWRkZW47JyB4bWxucz0nXCIrRStcIicgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnIHZlcnNpb249JzEuMSc+Iz0gZC5fcm9vdC5yZW5kZXIoKSAjPC9zdmc+XCIpfSksej1mLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXtmLmZuLmluaXQuY2FsbCh0aGlzLGUpLHRoaXMuZGVmaW5pdGlvbnM9e319LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQmJih0aGlzLmVsZW1lbnQuX2tlbmRvTm9kZT1udWxsLHRoaXMuZWxlbWVudD1udWxsKSx0aGlzLmNsZWFyRGVmaW5pdGlvbnMoKSxmLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKX0sbG9hZDpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGE9dGhpcyxzPWEuZWxlbWVudDtmb3Iobz0wO2UubGVuZ3RoPm87bysrKWk9ZVtvXSxyPWkuY2hpbGRyZW4sbj1uZXcgWVtpLm5vZGVUeXBlXShpKSxtKHQpP2EuaW5zZXJ0QXQobix0KTphLmFwcGVuZChuKSxuLmNyZWF0ZURlZmluaXRpb25zKCksciYmci5sZW5ndGg+MCYmbi5sb2FkKHIpLHMmJm4uYXR0YWNoVG8ocyx0KX0scm9vdDpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzO2UucGFyZW50OyllPWUucGFyZW50O3JldHVybiBlfSxhdHRhY2hUbzpmdW5jdGlvbihlLHQpe3ZhciBuLGk9Yy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO0soaSxcIjxzdmcgeG1sbnM9J1wiK0UrXCInIHZlcnNpb249JzEuMSc+XCIrdGhpcy5yZW5kZXIoKStcIjwvc3ZnPlwiKSxuPWkuZmlyc3RDaGlsZC5maXJzdENoaWxkLG4mJihtKHQpP2UuaW5zZXJ0QmVmb3JlKG4sZS5jaGlsZE5vZGVzW3RdKTplLmFwcGVuZENoaWxkKG4pLHRoaXMuc2V0RWxlbWVudChuKSl9LHNldEVsZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMuY2hpbGROb2Rlcztmb3IodGhpcy5lbGVtZW50JiYodGhpcy5lbGVtZW50Ll9rZW5kb05vZGU9bnVsbCksdGhpcy5lbGVtZW50PWUsdGhpcy5lbGVtZW50Ll9rZW5kb05vZGU9dGhpcyxuPTA7aS5sZW5ndGg+bjtuKyspdD1lLmNoaWxkTm9kZXNbbl0saVtuXS5zZXRFbGVtZW50KHQpfSxjbGVhcjpmdW5jdGlvbigpe3ZhciBlLHQ7Zm9yKHRoaXMuY2xlYXJEZWZpbml0aW9ucygpLHRoaXMuZWxlbWVudCYmKHRoaXMuZWxlbWVudC5pbm5lckhUTUw9XCJcIiksZT10aGlzLmNoaWxkTm9kZXMsdD0wO2UubGVuZ3RoPnQ7dCsrKWVbdF0uZGVzdHJveSgpO3RoaXMuY2hpbGROb2Rlcz1bXX0scmVtb3ZlU2VsZjpmdW5jdGlvbigpe3RoaXMuZWxlbWVudCYmKHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCksdGhpcy5lbGVtZW50PW51bGwpLGYuZm4ucmVtb3ZlU2VsZi5jYWxsKHRoaXMpfSx0ZW1wbGF0ZTp3KFwiIz0gZC5yZW5kZXJDaGlsZHJlbigpICNcIikscmVuZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGVtcGxhdGUodGhpcyl9LHJlbmRlckNoaWxkcmVuOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLmNoaWxkTm9kZXMsbj1cIlwiO2ZvcihlPTA7dC5sZW5ndGg+ZTtlKyspbis9dFtlXS5yZW5kZXIoKTtyZXR1cm4gbn0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXt2YXIgdD1lLmZpZWxkLG49ZS52YWx1ZTtcInZpc2libGVcIj09PXQ/dGhpcy5jc3MoXCJkaXNwbGF5XCIsbj9cIlwiOlMpOmxbdF0mJmEodCxuKT90aGlzLnVwZGF0ZURlZmluaXRpb24odCxuKTpcIm9wYWNpdHlcIj09PXQmJnRoaXMuYXR0cihcIm9wYWNpdHlcIixuKSxmLmZuLm9wdGlvbnNDaGFuZ2UuY2FsbCh0aGlzLGUpfSxhdHRyOmZ1bmN0aW9uKGUsdCl7dGhpcy5lbGVtZW50JiZ0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKGUsdCl9LGFsbEF0dHI6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7ZS5sZW5ndGg+dDt0KyspdGhpcy5hdHRyKGVbdF1bMF0sZVt0XVsxXSl9LGNzczpmdW5jdGlvbihlLHQpe3RoaXMuZWxlbWVudCYmKHRoaXMuZWxlbWVudC5zdHlsZVtlXT10KX0sYWxsQ3NzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO2UubGVuZ3RoPnQ7dCsrKXRoaXMuY3NzKGVbdF1bMF0sZVt0XVsxXSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSl7dGhpcy5lbGVtZW50JiZ0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGUpfSxtYXBUcmFuc2Zvcm06ZnVuY3Rpb24oZSl7dmFyIHQ9W107cmV0dXJuIGUmJnQucHVzaChbTSxcIm1hdHJpeChcIitlLm1hdHJpeCgpLnRvU3RyaW5nKDYpK1wiKVwiXSksdH0scmVuZGVyVHJhbnNmb3JtOmZ1bmN0aW9uKCl7cmV0dXJuIHkodGhpcy5tYXBUcmFuc2Zvcm0odGhpcy5zcmNFbGVtZW50LnRyYW5zZm9ybSgpKSl9LHRyYW5zZm9ybUNoYW5nZTpmdW5jdGlvbihlKXtlP3RoaXMuYWxsQXR0cih0aGlzLm1hcFRyYW5zZm9ybShlKSk6dGhpcy5yZW1vdmVBdHRyKE0pfSxtYXBTdHlsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3JjRWxlbWVudC5vcHRpb25zLHQ9W1tcImN1cnNvclwiLGUuY3Vyc29yXV07cmV0dXJuIGUudmlzaWJsZT09PSExJiZ0LnB1c2goW1wiZGlzcGxheVwiLFNdKSx0fSxyZW5kZXJTdHlsZTpmdW5jdGlvbigpe3JldHVybiBfKFwic3R5bGVcIixnLnJlbmRlclN0eWxlKHRoaXMubWFwU3R5bGUoKSkpfSxyZW5kZXJPcGFjaXR5OmZ1bmN0aW9uKCl7cmV0dXJuIF8oXCJvcGFjaXR5XCIsdGhpcy5zcmNFbGVtZW50Lm9wdGlvbnMub3BhY2l0eSl9LGNyZWF0ZURlZmluaXRpb25zOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscj10aGlzLnNyY0VsZW1lbnQsbz10aGlzLmRlZmluaXRpb25zO2lmKHIpe249ci5vcHRpb25zO2Zvcih0IGluIGwpZT1uLmdldCh0KSxlJiZhKHQsZSkmJihvW3RdPWUsaT0hMCk7aSYmdGhpcy5kZWZpbml0aW9uQ2hhbmdlKHthY3Rpb246XCJhZGRcIixkZWZpbml0aW9uczpvfSl9fSxkZWZpbml0aW9uQ2hhbmdlOmZ1bmN0aW9uKGUpe3RoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5kZWZpbml0aW9uQ2hhbmdlKGUpfSx1cGRhdGVEZWZpbml0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5kZWZpbml0aW9ucyxyPW5bZV0sbz1sW2VdLGE9e307ciYmKGFbZV09cix0aGlzLmRlZmluaXRpb25DaGFuZ2Uoe2FjdGlvbjpcInJlbW92ZVwiLGRlZmluaXRpb25zOmF9KSxkZWxldGUgbltlXSksdD8oYVtlXT10LHRoaXMuZGVmaW5pdGlvbkNoYW5nZSh7YWN0aW9uOlwiYWRkXCIsZGVmaW5pdGlvbnM6YX0pLG5bZV09dCx0aGlzLmF0dHIobyxpKHQuaWQpKSk6ciYmdGhpcy5yZW1vdmVBdHRyKG8pfSxjbGVhckRlZmluaXRpb25zOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLmRlZmluaXRpb25zO2ZvcihlIGluIHQpe3RoaXMuZGVmaW5pdGlvbkNoYW5nZSh7YWN0aW9uOlwicmVtb3ZlXCIsZGVmaW5pdGlvbnM6dH0pLHRoaXMuZGVmaW5pdGlvbnM9e307YnJlYWt9fSxyZW5kZXJEZWZpbml0aW9uczpmdW5jdGlvbigpe3JldHVybiB5KHRoaXMubWFwRGVmaW5pdGlvbnMoKSl9LG1hcERlZmluaXRpb25zOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLmRlZmluaXRpb25zLG49W107Zm9yKGUgaW4gdCluLnB1c2goW2xbZV0saSh0W2VdLmlkKV0pO3JldHVybiBufX0pLEY9ei5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7ei5mbi5pbml0LmNhbGwodGhpcyksdGhpcy5vcHRpb25zPWUsdGhpcy5kZWZzPW5ldyBSfSxhdHRhY2hUbzpmdW5jdGlvbihlKXt0aGlzLmVsZW1lbnQ9ZSx0aGlzLmRlZnMuYXR0YWNoVG8oZS5maXJzdEVsZW1lbnRDaGlsZCl9LGNsZWFyOmZ1bmN0aW9uKCl7Zi5mbi5jbGVhci5jYWxsKHRoaXMpfSx0ZW1wbGF0ZTp3KFwiIz1kLmRlZnMucmVuZGVyKCkjIz0gZC5yZW5kZXJDaGlsZHJlbigpICNcIiksZGVmaW5pdGlvbkNoYW5nZTpmdW5jdGlvbihlKXt0aGlzLmRlZnMuZGVmaW5pdGlvbkNoYW5nZShlKX19KSxSPXouZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7ei5mbi5pbml0LmNhbGwodGhpcyksdGhpcy5kZWZpbml0aW9uTWFwPXt9fSxhdHRhY2hUbzpmdW5jdGlvbihlKXt0aGlzLmVsZW1lbnQ9ZX0sdGVtcGxhdGU6dyhcIjxkZWZzPiM9IGQucmVuZGVyQ2hpbGRyZW4oKSM8L2RlZnM+XCIpLGRlZmluaXRpb25DaGFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kZWZpbml0aW9ucyxuPWUuYWN0aW9uO1wiYWRkXCI9PW4/dGhpcy5hZGREZWZpbml0aW9ucyh0KTpcInJlbW92ZVwiPT1uJiZ0aGlzLnJlbW92ZURlZmluaXRpb25zKHQpfSxjcmVhdGVEZWZpbml0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG47cmV0dXJuXCJjbGlwXCI9PWU/bj1COlwiZmlsbFwiPT1lJiYodCBpbnN0YW5jZW9mIHAuTGluZWFyR3JhZGllbnQ/bj1xOnQgaW5zdGFuY2VvZiBwLlJhZGlhbEdyYWRpZW50JiYobj0kKSksbmV3IG4odCl9LGFkZERlZmluaXRpb25zOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKXRoaXMuYWRkRGVmaW5pdGlvbih0LGVbdF0pfSxhZGREZWZpbml0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzLmRlZmluaXRpb25NYXAscj10LmlkLG89dGhpcy5lbGVtZW50LGE9aVtyXTthP2EuY291bnQrKzoobj10aGlzLmNyZWF0ZURlZmluaXRpb24oZSx0KSxpW3JdPXtlbGVtZW50Om4sY291bnQ6MX0sdGhpcy5hcHBlbmQobiksbyYmbi5hdHRhY2hUbyh0aGlzLmVsZW1lbnQpKX0scmVtb3ZlRGVmaW5pdGlvbnM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpdGhpcy5yZW1vdmVEZWZpbml0aW9uKGVbdF0pfSxyZW1vdmVEZWZpbml0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZGVmaW5pdGlvbk1hcCxuPWUuaWQsaT10W25dO2kmJihpLmNvdW50LS0sMD09PWkuY291bnQmJih0aGlzLnJlbW92ZShiKGkuZWxlbWVudCx0aGlzLmNoaWxkTm9kZXMpLDEpLGRlbGV0ZSB0W25dKSl9fSksQj16LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt6LmZuLmluaXQuY2FsbCh0aGlzKSx0aGlzLnNyY0VsZW1lbnQ9ZSx0aGlzLmlkPWUuaWQsdGhpcy5sb2FkKFtlXSl9LHRlbXBsYXRlOncoXCI8Y2xpcFBhdGggaWQ9JyM9ZC5pZCMnPiM9IGQucmVuZGVyQ2hpbGRyZW4oKSM8L2NsaXBQYXRoPlwiKX0pLEw9ei5leHRlbmQoe3RlbXBsYXRlOncoXCI8ZyM9IGQucmVuZGVyVHJhbnNmb3JtKCkgKyBkLnJlbmRlclN0eWxlKCkgKyBkLnJlbmRlck9wYWNpdHkoKSArIGQucmVuZGVyRGVmaW5pdGlvbnMoKSM+Iz0gZC5yZW5kZXJDaGlsZHJlbigpICM8L2c+XCIpLG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7ZS5maWVsZD09TSYmdGhpcy50cmFuc2Zvcm1DaGFuZ2UoZS52YWx1ZSksei5mbi5vcHRpb25zQ2hhbmdlLmNhbGwodGhpcyxlKX19KSxPPXouZXh0ZW5kKHtnZW9tZXRyeUNoYW5nZTpmdW5jdGlvbigpe3RoaXMuYXR0cihcImRcIix0aGlzLnJlbmRlckRhdGEoKSksdGhpcy5pbnZhbGlkYXRlKCl9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7c3dpdGNoKGUuZmllbGQpe2Nhc2VcImZpbGxcIjplLnZhbHVlP3RoaXMuYWxsQXR0cih0aGlzLm1hcEZpbGwoZS52YWx1ZSkpOnRoaXMucmVtb3ZlQXR0cihcImZpbGxcIik7YnJlYWs7Y2FzZVwiZmlsbC5jb2xvclwiOnRoaXMuYWxsQXR0cih0aGlzLm1hcEZpbGwoe2NvbG9yOmUudmFsdWV9KSk7YnJlYWs7Y2FzZVwic3Ryb2tlXCI6ZS52YWx1ZT90aGlzLmFsbEF0dHIodGhpcy5tYXBTdHJva2UoZS52YWx1ZSkpOnRoaXMucmVtb3ZlQXR0cihcInN0cm9rZVwiKTticmVhaztjYXNlIE06dGhpcy50cmFuc2Zvcm1DaGFuZ2UoZS52YWx1ZSk7YnJlYWs7ZGVmYXVsdDp2YXIgdD10aGlzLmF0dHJpYnV0ZU1hcFtlLmZpZWxkXTt0JiZ0aGlzLmF0dHIodCxlLnZhbHVlKX16LmZuLm9wdGlvbnNDaGFuZ2UuY2FsbCh0aGlzLGUpfSxhdHRyaWJ1dGVNYXA6e1wiZmlsbC5vcGFjaXR5XCI6XCJmaWxsLW9wYWNpdHlcIixcInN0cm9rZS5jb2xvclwiOlwic3Ryb2tlXCIsXCJzdHJva2Uud2lkdGhcIjpcInN0cm9rZS13aWR0aFwiLFwic3Ryb2tlLm9wYWNpdHlcIjpcInN0cm9rZS1vcGFjaXR5XCJ9LGNvbnRlbnQ6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQmJih0aGlzLmVsZW1lbnQudGV4dENvbnRlbnQ9dGhpcy5zcmNFbGVtZW50LmNvbnRlbnQoKSl9LHJlbmRlckRhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmludFBhdGgodGhpcy5zcmNFbGVtZW50KX0scHJpbnRQYXRoOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYT1lLnNlZ21lbnRzLHM9YS5sZW5ndGg7aWYocz4wKXtmb3IodD1bXSxvPTE7cz5vO28rKylpPXRoaXMuc2VnbWVudFR5cGUoYVtvLTFdLGFbb10pLGkhPT1yJiYocj1pLHQucHVzaChpKSksdC5wdXNoKFwiTFwiPT09aT90aGlzLnByaW50UG9pbnRzKGFbb10uYW5jaG9yKCkpOnRoaXMucHJpbnRQb2ludHMoYVtvLTFdLmNvbnRyb2xPdXQoKSxhW29dLmNvbnRyb2xJbigpLGFbb10uYW5jaG9yKCkpKTtyZXR1cm4gbj1cIk1cIit0aGlzLnByaW50UG9pbnRzKGFbMF0uYW5jaG9yKCkpK0ErdC5qb2luKEEpLGUub3B0aW9ucy5jbG9zZWQmJihuKz1cIlpcIiksbn19LHByaW50UG9pbnRzOmZ1bmN0aW9uKCl7dmFyIGUsdD1hcmd1bWVudHMsbj10Lmxlbmd0aCxpPVtdO2ZvcihlPTA7bj5lO2UrKylpLnB1c2godFtlXS50b1N0cmluZygzKSk7cmV0dXJuIGkuam9pbihBKX0sc2VnbWVudFR5cGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5jb250cm9sT3V0KCkmJnQuY29udHJvbEluKCk/XCJDXCI6XCJMXCJ9LG1hcFN0cm9rZTpmdW5jdGlvbihlKXt2YXIgdD1bXTtyZXR1cm4gZSYmIXYoZS5jb2xvcik/KHQucHVzaChbXCJzdHJva2VcIixlLmNvbG9yXSksdC5wdXNoKFtcInN0cm9rZS13aWR0aFwiLGUud2lkdGhdKSx0LnB1c2goW1wic3Ryb2tlLWxpbmVjYXBcIix0aGlzLnJlbmRlckxpbmVjYXAoZSldKSx0LnB1c2goW1wic3Ryb2tlLWxpbmVqb2luXCIsZS5saW5lSm9pbl0pLG0oZS5vcGFjaXR5KSYmdC5wdXNoKFtcInN0cm9rZS1vcGFjaXR5XCIsZS5vcGFjaXR5XSksbShlLmRhc2hUeXBlKSYmdC5wdXNoKFtcInN0cm9rZS1kYXNoYXJyYXlcIix0aGlzLnJlbmRlckRhc2hUeXBlKGUpXSkpOnQucHVzaChbXCJzdHJva2VcIixTXSksdH0scmVuZGVyU3Ryb2tlOmZ1bmN0aW9uKCl7cmV0dXJuIHkodGhpcy5tYXBTdHJva2UodGhpcy5zcmNFbGVtZW50Lm9wdGlvbnMuc3Ryb2tlKSl9LHJlbmRlckRhc2hUeXBlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPWUud2lkdGh8fDEsbz1lLmRhc2hUeXBlO2lmKG8mJm8hPUQpe2Zvcih0PXhbby50b0xvd2VyQ2FzZSgpXSxuPVtdLGk9MDt0Lmxlbmd0aD5pO2krKyluLnB1c2godFtpXSpyKTtyZXR1cm4gbi5qb2luKFwiIFwiKX19LHJlbmRlckxpbmVjYXA6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXNoVHlwZSxuPWUubGluZUNhcDtyZXR1cm4gdCYmdCE9RD9rOm59LG1hcEZpbGw6ZnVuY3Rpb24oZSl7dmFyIHQ9W107cmV0dXJuIGUmJmUubm9kZVR5cGU9PUN8fChlJiYhdihlLmNvbG9yKT8odC5wdXNoKFtcImZpbGxcIixlLmNvbG9yXSksbShlLm9wYWNpdHkpJiZ0LnB1c2goW1wiZmlsbC1vcGFjaXR5XCIsZS5vcGFjaXR5XSkpOnQucHVzaChbXCJmaWxsXCIsU10pKSx0fSxyZW5kZXJGaWxsOmZ1bmN0aW9uKCl7cmV0dXJuIHkodGhpcy5tYXBGaWxsKHRoaXMuc3JjRWxlbWVudC5vcHRpb25zLmZpbGwpKX0sdGVtcGxhdGU6dyhcIjxwYXRoICM9IGQucmVuZGVyU3R5bGUoKSAjICM9IGQucmVuZGVyT3BhY2l0eSgpICMgIz0ga2VuZG8udXRpbC5yZW5kZXJBdHRyKCdkJywgZC5yZW5kZXJEYXRhKCkpICMgIz0gZC5yZW5kZXJTdHJva2UoKSAjICM9IGQucmVuZGVyRmlsbCgpICMgIz0gZC5yZW5kZXJEZWZpbml0aW9ucygpICMgIz0gZC5yZW5kZXJUcmFuc2Zvcm0oKSAjPjwvcGF0aD5cIil9KSxIPU8uZXh0ZW5kKHtyZW5kZXJEYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJpbnRQYXRoKHRoaXMuc3JjRWxlbWVudC50b1BhdGgoKSl9fSksTj1PLmV4dGVuZCh7cmVuZGVyRGF0YTpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLnNyY0VsZW1lbnQucGF0aHM7aWYobi5sZW5ndGg+MCl7Zm9yKGU9W10sdD0wO24ubGVuZ3RoPnQ7dCsrKWUucHVzaCh0aGlzLnByaW50UGF0aChuW3RdKSk7cmV0dXJuIGUuam9pbihcIiBcIil9fX0pLFY9Ty5leHRlbmQoe2dlb21ldHJ5Q2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jZW50ZXIoKTt0aGlzLmF0dHIoXCJjeFwiLGUueCksdGhpcy5hdHRyKFwiY3lcIixlLnkpLHRoaXMuYXR0cihcInJcIix0aGlzLnJhZGl1cygpKSx0aGlzLmludmFsaWRhdGUoKX0sY2VudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3JjRWxlbWVudC5nZW9tZXRyeSgpLmNlbnRlcn0scmFkaXVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3JjRWxlbWVudC5nZW9tZXRyeSgpLnJhZGl1c30sdGVtcGxhdGU6dyhcIjxjaXJjbGUgIz0gZC5yZW5kZXJTdHlsZSgpICMgIz0gZC5yZW5kZXJPcGFjaXR5KCkgIyBjeD0nIz0gZC5jZW50ZXIoKS54ICMnIGN5PScjPSBkLmNlbnRlcigpLnkgIycgcj0nIz0gZC5yYWRpdXMoKSAjJyAjPSBkLnJlbmRlclN0cm9rZSgpICMgIz0gZC5yZW5kZXJGaWxsKCkgIyAjPSBkLnJlbmRlckRlZmluaXRpb25zKCkgIyAjPSBkLnJlbmRlclRyYW5zZm9ybSgpICMgPjwvY2lyY2xlPlwiKX0pLFU9Ty5leHRlbmQoe2dlb21ldHJ5Q2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wb3MoKTt0aGlzLmF0dHIoXCJ4XCIsZS54KSx0aGlzLmF0dHIoXCJ5XCIsZS55KSx0aGlzLmludmFsaWRhdGUoKX0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXtcImZvbnRcIj09PWUuZmllbGQ/KHRoaXMuYXR0cihcInN0eWxlXCIsZy5yZW5kZXJTdHlsZSh0aGlzLm1hcFN0eWxlKCkpKSx0aGlzLmdlb21ldHJ5Q2hhbmdlKCkpOlwiY29udGVudFwiPT09ZS5maWVsZCYmTy5mbi5jb250ZW50LmNhbGwodGhpcyx0aGlzLnNyY0VsZW1lbnQuY29udGVudCgpKSxPLmZuLm9wdGlvbnNDaGFuZ2UuY2FsbCh0aGlzLGUpfSxtYXBTdHlsZTpmdW5jdGlvbigpe3ZhciBlPU8uZm4ubWFwU3R5bGUuY2FsbCh0aGlzKSx0PXRoaXMuc3JjRWxlbWVudC5vcHRpb25zLmZvbnQsbj10aGlzLnJvb3QoKS5vcHRpb25zO3JldHVybiBuJiZuLmVuY29kZVRleHQmJih0PWQuaHRtbEVuY29kZSh0KSksZS5wdXNoKFtcImZvbnRcIix0XSksZX0scG9zOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zcmNFbGVtZW50LnBvc2l0aW9uKCksdD10aGlzLnNyY0VsZW1lbnQubWVhc3VyZSgpO3JldHVybiBlLmNsb25lKCkuc2V0WShlLnkrdC5iYXNlbGluZSl9LGNvbnRlbnQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNyY0VsZW1lbnQuY29udGVudCgpLHQ9dGhpcy5yb290KCkub3B0aW9ucztyZXR1cm4gdCYmdC5lbmNvZGVUZXh0JiYoZT1zKGUpLGU9ZC5odG1sRW5jb2RlKGUpKSxlfSx0ZW1wbGF0ZTp3KFwiPHRleHQgIz0gZC5yZW5kZXJTdHlsZSgpICMgIz0gZC5yZW5kZXJPcGFjaXR5KCkgIyB4PScjPSB0aGlzLnBvcygpLnggIycgeT0nIz0gdGhpcy5wb3MoKS55ICMnICM9IGQucmVuZGVyU3Ryb2tlKCkgIyAjPSBkLnJlbmRlclRyYW5zZm9ybSgpICMgIz0gZC5yZW5kZXJEZWZpbml0aW9ucygpICMgIz0gZC5yZW5kZXJGaWxsKCkgIz48dHNwYW4+Iz0gZC5jb250ZW50KCkgIzwvdHNwYW4+PC90ZXh0PlwiKX0pLFc9Ty5leHRlbmQoe2dlb21ldHJ5Q2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5hbGxBdHRyKHRoaXMubWFwUG9zaXRpb24oKSksdGhpcy5pbnZhbGlkYXRlKCl9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7XCJzcmNcIj09PWUuZmllbGQmJnRoaXMuYWxsQXR0cih0aGlzLm1hcFNvdXJjZSgpKSxPLmZuLm9wdGlvbnNDaGFuZ2UuY2FsbCh0aGlzLGUpfSxtYXBQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3JjRWxlbWVudC5yZWN0KCksdD1lLnRvcExlZnQoKTtyZXR1cm5bW1wieFwiLHQueF0sW1wieVwiLHQueV0sW1wid2lkdGhcIixlLndpZHRoKCkrXCJweFwiXSxbXCJoZWlnaHRcIixlLmhlaWdodCgpK1wicHhcIl1dfSxyZW5kZXJQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiB5KHRoaXMubWFwUG9zaXRpb24oKSl9LG1hcFNvdXJjZTpmdW5jdGlvbigpe3JldHVybltbXCJ4bGluazpocmVmXCIsdGhpcy5zcmNFbGVtZW50LnNyYygpXV19LHJlbmRlclNvdXJjZTpmdW5jdGlvbigpe3JldHVybiB5KHRoaXMubWFwU291cmNlKCkpfSx0ZW1wbGF0ZTp3KFwiPGltYWdlIHByZXNlcnZlQXNwZWN0UmF0aW89J25vbmUnICM9IGQucmVuZGVyU3R5bGUoKSAjICM9IGQucmVuZGVyVHJhbnNmb3JtKCkjICM9IGQucmVuZGVyT3BhY2l0eSgpICMgIz0gZC5yZW5kZXJQb3NpdGlvbigpICMgIz0gZC5yZW5kZXJTb3VyY2UoKSAjICM9IGQucmVuZGVyRGVmaW5pdGlvbnMoKSM+PC9pbWFnZT5cIil9KSxqPXouZXh0ZW5kKHt0ZW1wbGF0ZTp3KFwiPHN0b3AgIz1kLnJlbmRlck9mZnNldCgpIyAjPWQucmVuZGVyU3R5bGUoKSMgLz5cIikscmVuZGVyT2Zmc2V0OmZ1bmN0aW9uKCl7cmV0dXJuIF8oXCJvZmZzZXRcIix0aGlzLnNyY0VsZW1lbnQub2Zmc2V0KCkpfSxtYXBTdHlsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3JjRWxlbWVudDtyZXR1cm5bW1wic3RvcC1jb2xvclwiLGUuY29sb3IoKV0sW1wic3RvcC1vcGFjaXR5XCIsZS5vcGFjaXR5KCldXX0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXtcIm9mZnNldFwiPT1lLmZpZWxkP3RoaXMuYXR0cihlLmZpZWxkLGUudmFsdWUpOihcImNvbG9yXCI9PWUuZmllbGR8fFwib3BhY2l0eVwiPT1lLmZpZWxkKSYmdGhpcy5jc3MoXCJzdG9wLVwiK2UuZmllbGQsZS52YWx1ZSl9fSksRz16LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt6LmZuLmluaXQuY2FsbCh0aGlzLGUpLHRoaXMuaWQ9ZS5pZCx0aGlzLmxvYWRTdG9wcygpfSxsb2FkU3RvcHM6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy5zcmNFbGVtZW50LGk9bi5zdG9wcyxyPXRoaXMuZWxlbWVudDtmb3IodD0wO2kubGVuZ3RoPnQ7dCsrKWU9bmV3IGooaVt0XSksdGhpcy5hcHBlbmQoZSksciYmZS5hdHRhY2hUbyhyKX0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXtcImdyYWRpZW50LnN0b3BzXCI9PWUuZmllbGQ/KGYuZm4uY2xlYXIuY2FsbCh0aGlzKSx0aGlzLmxvYWRTdG9wcygpKTplLmZpZWxkPT1DJiZ0aGlzLmFsbEF0dHIodGhpcy5tYXBDb29yZGluYXRlcygpKX0scmVuZGVyQ29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4geSh0aGlzLm1hcENvb3JkaW5hdGVzKCkpfSxtYXBTcGFjZTpmdW5jdGlvbigpe3JldHVybltcImdyYWRpZW50VW5pdHNcIix0aGlzLnNyY0VsZW1lbnQudXNlclNwYWNlKCk/XCJ1c2VyU3BhY2VPblVzZVwiOlwib2JqZWN0Qm91bmRpbmdCb3hcIl19fSkscT1HLmV4dGVuZCh7dGVtcGxhdGU6dyhcIjxsaW5lYXJHcmFkaWVudCBpZD0nIz1kLmlkIycgIz1kLnJlbmRlckNvb3JkaW5hdGVzKCkjPiM9IGQucmVuZGVyQ2hpbGRyZW4oKSM8L2xpbmVhckdyYWRpZW50PlwiKSxtYXBDb29yZGluYXRlczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3JjRWxlbWVudCx0PWUuc3RhcnQoKSxuPWUuZW5kKCksaT1bW1wieDFcIix0LnhdLFtcInkxXCIsdC55XSxbXCJ4MlwiLG4ueF0sW1wieTJcIixuLnldLHRoaXMubWFwU3BhY2UoKV07cmV0dXJuIGl9fSksJD1HLmV4dGVuZCh7dGVtcGxhdGU6dyhcIjxyYWRpYWxHcmFkaWVudCBpZD0nIz1kLmlkIycgIz1kLnJlbmRlckNvb3JkaW5hdGVzKCkjPiM9IGQucmVuZGVyQ2hpbGRyZW4oKSM8L3JhZGlhbEdyYWRpZW50PlwiKSxtYXBDb29yZGluYXRlczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3JjRWxlbWVudCx0PWUuY2VudGVyKCksbj1lLnJhZGl1cygpLGk9W1tcImN4XCIsdC54XSxbXCJjeVwiLHQueV0sW1wiclwiLG5dLHRoaXMubWFwU3BhY2UoKV07XG5yZXR1cm4gaX19KSxZPXtHcm91cDpMLFRleHQ6VSxQYXRoOk8sTXVsdGlQYXRoOk4sQ2lyY2xlOlYsQXJjOkgsSW1hZ2U6V30sSz1mdW5jdGlvbihlLHQpe2UuaW5uZXJIVE1MPXR9OyFmdW5jdGlvbigpe3ZhciBlPVwiPHN2ZyB4bWxucz0nXCIrRStcIic+PC9zdmc+XCIsdD1jLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksbj10eXBlb2YgRE9NUGFyc2VyIT1QO3QuaW5uZXJIVE1MPWUsbiYmdC5maXJzdENoaWxkLm5hbWVzcGFjZVVSSSE9RSYmKEs9ZnVuY3Rpb24oZSx0KXt2YXIgbj1uZXcgRE9NUGFyc2VyLGk9bi5wYXJzZUZyb21TdHJpbmcodCxcInRleHQveG1sXCIpLHI9Yy5hZG9wdE5vZGUoaS5kb2N1bWVudEVsZW1lbnQpO2UuaW5uZXJIVE1MPVwiXCIsZS5hcHBlbmRDaGlsZChyKX0pfSgpLHMuX2VsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIiksbD17Y2xpcDpcImNsaXAtcGF0aFwiLGZpbGw6XCJmaWxsXCJ9LGQuc3VwcG9ydC5zdmc9ZnVuY3Rpb24oKXtyZXR1cm4gYy5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKFwiaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNCYXNpY1N0cnVjdHVyZVwiLFwiMS4xXCIpfSgpLGQuc3VwcG9ydC5zdmcmJnAuU3VyZmFjZUZhY3RvcnkuY3VycmVudC5yZWdpc3RlcihcInN2Z1wiLEksMTApLHUocCx7ZXhwb3J0U1ZHOm8sc3ZnOntBcmNOb2RlOkgsQ2lyY2xlTm9kZTpWLENsaXBOb2RlOkIsRGVmaW5pdGlvbk5vZGU6UixHcmFkaWVudFN0b3BOb2RlOmosR3JvdXBOb2RlOkwsSW1hZ2VOb2RlOlcsTGluZWFyR3JhZGllbnROb2RlOnEsTXVsdGlQYXRoTm9kZTpOLE5vZGU6eixQYXRoTm9kZTpPLFJhZGlhbEdyYWRpZW50Tm9kZTokLFJvb3ROb2RlOkYsU3VyZmFjZTpJLFRleHROb2RlOlUsX2V4cG9ydEdyb3VwOnJ9fSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxuKXt2YXIgaSxyLG8sYSxzLGwsYz17d2lkdGg6XCI4MDBweFwiLGhlaWdodDpcIjYwMHB4XCIsY29yczpcIkFub255bW91c1wifSxkPXQuY2xpcHBlZEJCb3goKTtyZXR1cm4gZCYmKGk9ZC5nZXRPcmlnaW4oKSxyPW5ldyB3Lkdyb3VwLHIudHJhbnNmb3JtKHkudHJhbnNmb3JtKCkudHJhbnNsYXRlKC1pLngsLWkueSkpLHIuY2hpbGRyZW4ucHVzaCh0KSx0PXIsbz1kLmdldFNpemUoKSxjLndpZHRoPW8ud2lkdGgrXCJweFwiLGMuaGVpZ2h0PW8uaGVpZ2h0K1wicHhcIiksbj1wKGMsbiksYT1lKFwiPGRpdiAvPlwiKS5jc3Moe2Rpc3BsYXk6XCJub25lXCIsd2lkdGg6bi53aWR0aCxoZWlnaHQ6bi5oZWlnaHR9KS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KSxzPW5ldyBUKGEsbikscy5kcmF3KHQpLGw9cy5pbWFnZSgpLGwuYWx3YXlzKGZ1bmN0aW9uKCl7cy5kZXN0cm95KCksYS5yZW1vdmUoKX0pLGx9ZnVuY3Rpb24gbihlLHQpe3ZhciBuLGkscjtmb3Iocj0wO3QubGVuZ3RoPnI7cisrKWk9dFtyXSxuPWgucGFyc2VDb2xvcihpLmNvbG9yKCkpLG4uYSo9aS5vcGFjaXR5KCksZS5hZGRDb2xvclN0b3AoaS5vZmZzZXQoKSxuLnRvQ3NzUmdiYSgpKX12YXIgaSxyLG8sYSxzLGwsYyxkLHU9ZG9jdW1lbnQsaD13aW5kb3cua2VuZG8scD1oLmRlZXBFeHRlbmQsZj1oLnV0aWwsZz1mLmRlZmluZWQsbT1mLmlzVHJhbnNwYXJlbnQsdj1mLnJlbmRlclRlbXBsYXRlLF89Zi52YWx1ZU9yRGVmYXVsdCx5PWguZ2VvbWV0cnksdz1oLmRyYXdpbmcsYj13LkJhc2VOb2RlLGs9XCJidXR0XCIseD13LkRBU0hfQVJSQVlTLEM9MWUzLzYwLFM9XCJzb2xpZFwiLFQ9dy5TdXJmYWNlLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3cuU3VyZmFjZS5mbi5pbml0LmNhbGwodGhpcyx0LG4pLHRoaXMuZWxlbWVudFswXS5pbm5lckhUTUw9dGhpcy5fdGVtcGxhdGUodGhpcyk7dmFyIHI9dGhpcy5lbGVtZW50WzBdLmZpcnN0RWxlbWVudENoaWxkO3Iud2lkdGg9ZSh0KS53aWR0aCgpLHIuaGVpZ2h0PWUodCkuaGVpZ2h0KCksdGhpcy5fcm9vdEVsZW1lbnQ9cix0aGlzLl9yb290PW5ldyBpKHIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dy5TdXJmYWNlLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLl9yb290JiYodGhpcy5fcm9vdC5kZXN0cm95KCksdGhpcy5fcm9vdD1udWxsKX0sdHlwZTpcImNhbnZhc1wiLGRyYXc6ZnVuY3Rpb24oZSl7dGhpcy5fcm9vdC5sb2FkKFtlXSx2b2lkIDAsdGhpcy5vcHRpb25zLmNvcnMpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuX3Jvb3QuY2xlYXIoKX0saW1hZ2U6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMuX3Jvb3QsaT10aGlzLl9yb290RWxlbWVudCxyPVtdO3JldHVybiBuLnRyYXZlcnNlKGZ1bmN0aW9uKGUpe2UubG9hZGluZyYmci5wdXNoKGUubG9hZGluZyl9KSx0PWUuRGVmZXJyZWQoKSxlLndoZW4uYXBwbHkoZSxyKS5kb25lKGZ1bmN0aW9uKCl7bi5faW52YWxpZGF0ZSgpO3RyeXt2YXIgZT1pLnRvRGF0YVVSTCgpO3QucmVzb2x2ZShlKX1jYXRjaChyKXt0LnJlamVjdChyKX19KS5mYWlsKGZ1bmN0aW9uKGUpe3QucmVqZWN0KGUpfSksdC5wcm9taXNlKCl9LF9yZXNpemU6ZnVuY3Rpb24oKXt0aGlzLl9yb290RWxlbWVudC53aWR0aD10aGlzLl9zaXplLndpZHRoLHRoaXMuX3Jvb3RFbGVtZW50LmhlaWdodD10aGlzLl9zaXplLmhlaWdodCx0aGlzLl9yb290LmludmFsaWRhdGUoKX0sX3RlbXBsYXRlOnYoXCI8Y2FudmFzIHN0eWxlPSd3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyc+PC9jYW52YXM+XCIpfSksRD1iLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXtiLmZuLmluaXQuY2FsbCh0aGlzLGUpLGUmJnRoaXMuaW5pdENsaXAoKX0saW5pdENsaXA6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNyY0VsZW1lbnQuY2xpcCgpO2UmJih0aGlzLmNsaXA9ZSxlLmFkZE9ic2VydmVyKHRoaXMpKX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLnNyY0VsZW1lbnQmJnRoaXMuc3JjRWxlbWVudC5yZW1vdmVPYnNlcnZlcih0aGlzKSx0aGlzLmNsZWFyQ2xpcCgpLGIuZm4uY2xlYXIuY2FsbCh0aGlzKX0sY2xlYXJDbGlwOmZ1bmN0aW9uKCl7dGhpcy5jbGlwJiYodGhpcy5jbGlwLnJlbW92ZU9ic2VydmVyKHRoaXMpLGRlbGV0ZSB0aGlzLmNsaXApfSxzZXRDbGlwOmZ1bmN0aW9uKGUpe3RoaXMuY2xpcCYmKGUuYmVnaW5QYXRoKCksci5mbi5yZW5kZXJQb2ludHMoZSx0aGlzLmNsaXApLGUuY2xpcCgpKX0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXtcImNsaXBcIj09ZS5maWVsZCYmKHRoaXMuY2xlYXJDbGlwKCksdGhpcy5pbml0Q2xpcCgpKSxiLmZuLm9wdGlvbnNDaGFuZ2UuY2FsbCh0aGlzLGUpfSxzZXRUcmFuc2Zvcm06ZnVuY3Rpb24oZSl7aWYodGhpcy5zcmNFbGVtZW50KXt2YXIgdD10aGlzLnNyY0VsZW1lbnQudHJhbnNmb3JtKCk7dCYmZS50cmFuc2Zvcm0uYXBwbHkoZSx0Lm1hdHJpeCgpLnRvQXJyYXkoNikpfX0sbG9hZDpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGEscz10aGlzO2ZvcihhPTA7ZS5sZW5ndGg+YTthKyspcj1lW2FdLG89ci5jaGlsZHJlbixpPW5ldyBkW3Iubm9kZVR5cGVdKHIsbiksbyYmby5sZW5ndGg+MCYmaS5sb2FkKG8sdCxuKSxnKHQpP3MuaW5zZXJ0QXQoaSx0KTpzLmFwcGVuZChpKTtzLmludmFsaWRhdGUoKX0sc2V0T3BhY2l0eTpmdW5jdGlvbihlKXtpZih0aGlzLnNyY0VsZW1lbnQpe3ZhciB0PXRoaXMuc3JjRWxlbWVudC5vcGFjaXR5KCk7Zyh0KSYmdGhpcy5nbG9iYWxBbHBoYShlLHQpfX0sZ2xvYmFsQWxwaGE6ZnVuY3Rpb24oZSx0KXt0JiZlLmdsb2JhbEFscGhhJiYodCo9ZS5nbG9iYWxBbHBoYSksZS5nbG9iYWxBbHBoYT10fX0pLEE9RC5leHRlbmQoe3JlbmRlclRvOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5jaGlsZE5vZGVzO2ZvcihlLnNhdmUoKSx0aGlzLnNldFRyYW5zZm9ybShlKSx0aGlzLnNldENsaXAoZSksdGhpcy5zZXRPcGFjaXR5KGUpLHQ9MDtuLmxlbmd0aD50O3QrKyluW3RdLnJlbmRlclRvKGUpO2UucmVzdG9yZSgpfX0pO3cubWl4aW5zLlRyYXZlcnNhYmxlLmV4dGVuZChBLmZuLFwiY2hpbGROb2Rlc1wiKSxpPUEuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQpe0EuZm4uaW5pdC5jYWxsKHRoaXMpLHRoaXMuY2FudmFzPXQsdGhpcy5jdHg9dC5nZXRDb250ZXh0KFwiMmRcIiksdGhpcy5pbnZhbGlkYXRlPWgudGhyb3R0bGUoZS5wcm94eSh0aGlzLl9pbnZhbGlkYXRlLHRoaXMpLEMpfSxkZXN0cm95OmZ1bmN0aW9uKCl7QS5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5jYW52YXM9bnVsbCx0aGlzLmN0eD1udWxsfSxfaW52YWxpZGF0ZTpmdW5jdGlvbigpe3RoaXMuY3R4JiYodGhpcy5jdHguY2xlYXJSZWN0KDAsMCx0aGlzLmNhbnZhcy53aWR0aCx0aGlzLmNhbnZhcy5oZWlnaHQpLHRoaXMucmVuZGVyVG8odGhpcy5jdHgpKX19KSx3Lm1peGlucy5UcmF2ZXJzYWJsZS5leHRlbmQoaS5mbixcImNoaWxkTm9kZXNcIikscj1ELmV4dGVuZCh7cmVuZGVyVG86ZnVuY3Rpb24oZSl7ZS5zYXZlKCksdGhpcy5zZXRUcmFuc2Zvcm0oZSksdGhpcy5zZXRDbGlwKGUpLHRoaXMuc2V0T3BhY2l0eShlKSxlLmJlZ2luUGF0aCgpLHRoaXMucmVuZGVyUG9pbnRzKGUsdGhpcy5zcmNFbGVtZW50KSx0aGlzLnNldExpbmVEYXNoKGUpLHRoaXMuc2V0TGluZUNhcChlKSx0aGlzLnNldExpbmVKb2luKGUpLHRoaXMuc2V0RmlsbChlKSx0aGlzLnNldFN0cm9rZShlKSxlLnJlc3RvcmUoKX0sc2V0RmlsbDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnNyY0VsZW1lbnQub3B0aW9ucy5maWxsLG49ITE7cmV0dXJuIHQmJihcImdyYWRpZW50XCI9PXQubm9kZVR5cGU/KHRoaXMuc2V0R3JhZGllbnRGaWxsKGUsdCksbj0hMCk6bSh0LmNvbG9yKXx8KGUuZmlsbFN0eWxlPXQuY29sb3IsZS5zYXZlKCksdGhpcy5nbG9iYWxBbHBoYShlLHQub3BhY2l0eSksZS5maWxsKCksZS5yZXN0b3JlKCksbj0hMCkpLG59LHNldEdyYWRpZW50RmlsbDpmdW5jdGlvbihlLHQpe3ZhciBpLHIsbyxhLHM9dGhpcy5zcmNFbGVtZW50LnJhd0JCb3goKTt0IGluc3RhbmNlb2Ygdy5MaW5lYXJHcmFkaWVudD8ocj10LnN0YXJ0KCksbz10LmVuZCgpLGk9ZS5jcmVhdGVMaW5lYXJHcmFkaWVudChyLngsci55LG8ueCxvLnkpKTp0IGluc3RhbmNlb2Ygdy5SYWRpYWxHcmFkaWVudCYmKGE9dC5jZW50ZXIoKSxpPWUuY3JlYXRlUmFkaWFsR3JhZGllbnQoYS54LGEueSwwLGEueCxhLnksdC5yYWRpdXMoKSkpLG4oaSx0LnN0b3BzKSxlLnNhdmUoKSx0LnVzZXJTcGFjZSgpfHxlLnRyYW5zZm9ybShzLndpZHRoKCksMCwwLHMuaGVpZ2h0KCkscy5vcmlnaW4ueCxzLm9yaWdpbi55KSxlLmZpbGxTdHlsZT1pLGUuZmlsbCgpLGUucmVzdG9yZSgpfSxzZXRTdHJva2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zcmNFbGVtZW50Lm9wdGlvbnMuc3Ryb2tlO3JldHVybiB0JiYhbSh0LmNvbG9yKT8oZS5zdHJva2VTdHlsZT10LmNvbG9yLGUubGluZVdpZHRoPV8odC53aWR0aCwxKSxlLnNhdmUoKSx0aGlzLmdsb2JhbEFscGhhKGUsdC5vcGFjaXR5KSxlLnN0cm9rZSgpLGUucmVzdG9yZSgpLCEwKTp2b2lkIDB9LGRhc2hUeXBlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zcmNFbGVtZW50Lm9wdGlvbnMuc3Ryb2tlO3JldHVybiBlJiZlLmRhc2hUeXBlP2UuZGFzaFR5cGUudG9Mb3dlckNhc2UoKTp2b2lkIDB9LHNldExpbmVEYXNoOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5kYXNoVHlwZSgpO24mJm4hPVMmJih0PXhbbl0sZS5zZXRMaW5lRGFzaD9lLnNldExpbmVEYXNoKHQpOihlLm1vekRhc2g9dCxlLndlYmtpdExpbmVEYXNoPXQpKX0sc2V0TGluZUNhcDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmRhc2hUeXBlKCksbj10aGlzLnNyY0VsZW1lbnQub3B0aW9ucy5zdHJva2U7dCYmdCE9PVM/ZS5saW5lQ2FwPWs6biYmbi5saW5lQ2FwJiYoZS5saW5lQ2FwPW4ubGluZUNhcCl9LHNldExpbmVKb2luOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc3JjRWxlbWVudC5vcHRpb25zLnN0cm9rZTt0JiZ0LmxpbmVKb2luJiYoZS5saW5lSm9pbj10LmxpbmVKb2luKX0scmVuZGVyUG9pbnRzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYSxzLGw9dC5zZWdtZW50cztpZigwIT09bC5sZW5ndGgpe2ZvcihuPWxbMF0saT1uLmFuY2hvcigpLGUubW92ZVRvKGkueCxpLnkpLHI9MTtsLmxlbmd0aD5yO3IrKyluPWxbcl0saT1uLmFuY2hvcigpLG89bFtyLTFdLGE9by5jb250cm9sT3V0KCkscz1uLmNvbnRyb2xJbigpLGEmJnM/ZS5iZXppZXJDdXJ2ZVRvKGEueCxhLnkscy54LHMueSxpLngsaS55KTplLmxpbmVUbyhpLngsaS55KTt0Lm9wdGlvbnMuY2xvc2VkJiZlLmNsb3NlUGF0aCgpfX19KSxvPXIuZXh0ZW5kKHtyZW5kZXJQb2ludHM6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLnNyY0VsZW1lbnQucGF0aHM7Zm9yKHQ9MDtuLmxlbmd0aD50O3QrKylyLmZuLnJlbmRlclBvaW50cyhlLG5bdF0pfX0pLGE9ci5leHRlbmQoe3JlbmRlclBvaW50czpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnNyY0VsZW1lbnQuZ2VvbWV0cnkoKSxuPXQuY2VudGVyLGk9dC5yYWRpdXM7ZS5hcmMobi54LG4ueSxpLDAsMipNYXRoLlBJKX19KSxzPXIuZXh0ZW5kKHtyZW5kZXJQb2ludHM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zcmNFbGVtZW50LnRvUGF0aCgpO3IuZm4ucmVuZGVyUG9pbnRzLmNhbGwodGhpcyxlLHQpfX0pLGw9ci5leHRlbmQoe3JlbmRlclRvOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc3JjRWxlbWVudCxuPXQucG9zaXRpb24oKSxpPXQubWVhc3VyZSgpO2Uuc2F2ZSgpLHRoaXMuc2V0VHJhbnNmb3JtKGUpLHRoaXMuc2V0Q2xpcChlKSx0aGlzLnNldE9wYWNpdHkoZSksZS5iZWdpblBhdGgoKSxlLmZvbnQ9dC5vcHRpb25zLmZvbnQsdGhpcy5zZXRGaWxsKGUpJiZlLmZpbGxUZXh0KHQuY29udGVudCgpLG4ueCxuLnkraS5iYXNlbGluZSksdGhpcy5zZXRTdHJva2UoZSkmJih0aGlzLnNldExpbmVEYXNoKGUpLGUuc3Ryb2tlVGV4dCh0LmNvbnRlbnQoKSxuLngsbi55K2kuYmFzZWxpbmUpKSxlLnJlc3RvcmUoKX19KSxjPXIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIGksbztyLmZuLmluaXQuY2FsbCh0aGlzLHQpLHRoaXMub25Mb2FkPWUucHJveHkodGhpcy5vbkxvYWQsdGhpcyksdGhpcy5vbkVycm9yPWUucHJveHkodGhpcy5vbkVycm9yLHRoaXMpLGk9dGhpcy5pbWc9bmV3IEltYWdlLG4mJihpLmNyb3NzT3JpZ2luPW4pLGkub25sb2FkPXRoaXMub25Mb2FkLGkub25lcnJvcj10aGlzLm9uRXJyb3Isbz1pLnNyYz10LnNyYygpLChpLmNvbXBsZXRlfHx2b2lkIDA9PT1pLmNvbXBsZXRlKSYmKGkuc3JjPVwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95d0FBQUFBQVFBQkFBQUNBVXdBT3c9PVwiLGkuc3JjPW8pLHRoaXMubG9hZGluZz1lLkRlZmVycmVkKCl9LHJlbmRlclRvOmZ1bmN0aW9uKGUpe1wicmVzb2x2ZWRcIj09PXRoaXMubG9hZGluZy5zdGF0ZSgpJiYoZS5zYXZlKCksdGhpcy5zZXRUcmFuc2Zvcm0oZSksdGhpcy5zZXRDbGlwKGUpLHRoaXMuZHJhd0ltYWdlKGUpLGUucmVzdG9yZSgpKX0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbih0KXtcInNyY1wiPT09dC5maWVsZD8odGhpcy5sb2FkaW5nPWUuRGVmZXJyZWQoKSx0aGlzLmltZy5zcmM9dGhpcy5zcmNFbGVtZW50LnNyYygpKTpyLmZuLm9wdGlvbnNDaGFuZ2UuY2FsbCh0aGlzLHQpfSxvbkxvYWQ6ZnVuY3Rpb24oKXt0aGlzLmxvYWRpbmcucmVzb2x2ZSgpLHRoaXMuaW52YWxpZGF0ZSgpfSxvbkVycm9yOmZ1bmN0aW9uKCl7dGhpcy5sb2FkaW5nLnJlamVjdChFcnJvcihcIlVuYWJsZSB0byBsb2FkIGltYWdlICdcIit0aGlzLmltZy5zcmMrXCInLiBDaGVjayBmb3IgY29ubmVjdGl2aXR5IGFuZCB2ZXJpZnkgQ09SUyBoZWFkZXJzLlwiKSl9LGRyYXdJbWFnZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnNyY0VsZW1lbnQucmVjdCgpLG49dC50b3BMZWZ0KCk7ZS5kcmF3SW1hZ2UodGhpcy5pbWcsbi54LG4ueSx0LndpZHRoKCksdC5oZWlnaHQoKSl9fSksZD17R3JvdXA6QSxUZXh0OmwsUGF0aDpyLE11bHRpUGF0aDpvLENpcmNsZTphLEFyYzpzLEltYWdlOmN9LGguc3VwcG9ydC5jYW52YXM9ZnVuY3Rpb24oKXtyZXR1cm4hIXUuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKS5nZXRDb250ZXh0fSgpLGguc3VwcG9ydC5jYW52YXMmJncuU3VyZmFjZUZhY3RvcnkuY3VycmVudC5yZWdpc3RlcihcImNhbnZhc1wiLFQsMjApLHAoaC5kcmF3aW5nLHtleHBvcnRJbWFnZTp0LGNhbnZhczp7QXJjTm9kZTpzLENpcmNsZU5vZGU6YSxHcm91cE5vZGU6QSxJbWFnZU5vZGU6YyxNdWx0aVBhdGhOb2RlOm8sTm9kZTpELFBhdGhOb2RlOnIsUm9vdE5vZGU6aSxTdXJmYWNlOlQsVGV4dE5vZGU6bH19KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe2lmKHUubmFtZXNwYWNlcyYmIXUubmFtZXNwYWNlcy5rdm1sKXt1Lm5hbWVzcGFjZXMuYWRkKFwia3ZtbFwiLFwidXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTp2bWxcIik7dmFyIGU9dS5zdHlsZVNoZWV0cy5sZW5ndGg+MzA/dS5zdHlsZVNoZWV0c1swXTp1LmNyZWF0ZVN0eWxlU2hlZXQoKTtlLmFkZFJ1bGUoXCIua3ZtbFwiLFwiYmVoYXZpb3I6dXJsKCNkZWZhdWx0I1ZNTClcIil9fWZ1bmN0aW9uIG4oZSl7dmFyIHQ9dS5jcmVhdGVFbGVtZW50KFwia3ZtbDpcIitlKTtyZXR1cm4gdC5jbGFzc05hbWU9XCJrdm1sXCIsdH1mdW5jdGlvbiBpKGUpe3ZhciB0LG49ZS5sZW5ndGgsaT1bXTtmb3IodD0wO24+dDt0KyspaS5wdXNoKGVbdF0uc2NhbGVDb3B5KFApLnRvU3RyaW5nKDAsXCIsXCIpKTtyZXR1cm4gaS5qb2luKFwiIFwiKX1mdW5jdGlvbiByKGUsdCl7dmFyIG4scixhLHMsbCxjPWUuc2VnbWVudHMsZD1jLmxlbmd0aDtpZihkPjApe2ZvcihuPVtdLGw9MTtkPmw7bCsrKWE9byhjW2wtMV0sY1tsXSksYSE9PXMmJihzPWEsbi5wdXNoKGEpKSxuLnB1c2goXCJsXCI9PT1hP2koW2NbbF0uYW5jaG9yKCldKTppKFtjW2wtMV0uY29udHJvbE91dCgpLGNbbF0uY29udHJvbEluKCksY1tsXS5hbmNob3IoKV0pKTtyZXR1cm4gcj1cIm0gXCIraShbY1swXS5hbmNob3IoKV0pK1wiIFwiK24uam9pbihcIiBcIiksZS5vcHRpb25zLmNsb3NlZCYmKHIrPVwiIHhcIiksdCE9PSEwJiYocis9XCIgZVwiKSxyfX1mdW5jdGlvbiBvKGUsdCl7cmV0dXJuIGUuY29udHJvbE91dCgpJiZ0LmNvbnRyb2xJbigpP1wiY1wiOlwibFwifWZ1bmN0aW9uIGEoZSl7cmV0dXJuIDA9PT1lLmluZGV4T2YoXCJmaWxsXCIpfHwwPT09ZS5pbmRleE9mKHopfWZ1bmN0aW9uIHMoZSx0KXt2YXIgbjtyZXR1cm4gbj1lP2woZSx0LmNvbG9yKCksdC5vcGFjaXR5KCkpOmwodC5jb2xvcigpLFwiI2ZmZlwiLDEtdC5vcGFjaXR5KCkpfWZ1bmN0aW9uIGwoZSx0LG4pe3ZhciBpPW5ldyBrKGUpLHI9bmV3IGsodCksbz1jKGkucixyLnIsbiksYT1jKGkuZyxyLmcsbikscz1jKGkuYixyLmIsbik7cmV0dXJuIG5ldyBrKG8sYSxzKS50b0hleCgpfWZ1bmN0aW9uIGMoZSx0LG4pe3JldHVybiBoLnJvdW5kKG4qdCsoMS1uKSplKX12YXIgZCx1PWRvY3VtZW50LGg9TWF0aCxwPWguYXRhbjIsZj1oLnNxcnQsZz13aW5kb3cua2VuZG8sbT1nLmRlZXBFeHRlbmQsdj1lLm5vb3AsXz1nLmRyYXdpbmcseT1fLkJhc2VOb2RlLHc9Zy5nZW9tZXRyeSxiPXcudG9NYXRyaXgsaz1nLkNvbG9yLHg9Zy51dGlsLEM9eC5pc1RyYW5zcGFyZW50LFM9eC5kZWZpbmVkLFQ9eC5kZWcsRD14LnJvdW5kLEE9eC52YWx1ZU9yRGVmYXVsdCxFPVwibm9uZVwiLE09XCIua2VuZG9cIixQPTEwMCxJPVAqUCx6PVwiZ3JhZGllbnRcIixGPTQsUj1fLlN1cmZhY2UuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsbil7Xy5TdXJmYWNlLmZuLmluaXQuY2FsbCh0aGlzLGUsbiksdCgpLHRoaXMuZWxlbWVudC5lbXB0eSgpLHRoaXMuX3Jvb3Q9bmV3IEwsdGhpcy5fcm9vdC5hdHRhY2hUbyh0aGlzLmVsZW1lbnRbMF0pLHRoaXMuZWxlbWVudC5vbihcImNsaWNrXCIrTSx0aGlzLl9jbGljayksdGhpcy5lbGVtZW50Lm9uKFwibW91c2VvdmVyXCIrTSx0aGlzLl9tb3VzZWVudGVyKSx0aGlzLmVsZW1lbnQub24oXCJtb3VzZW91dFwiK00sdGhpcy5fbW91c2VsZWF2ZSl9LHR5cGU6XCJ2bWxcIixkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fcm9vdCYmKHRoaXMuX3Jvb3QuZGVzdHJveSgpLHRoaXMuX3Jvb3Q9bnVsbCx0aGlzLmVsZW1lbnQub2ZmKE0pKSxfLlN1cmZhY2UuZm4uZGVzdHJveS5jYWxsKHRoaXMpfSxkcmF3OmZ1bmN0aW9uKGUpe3RoaXMuX3Jvb3QubG9hZChbZV0sdm9pZCAwLG51bGwpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuX3Jvb3QuY2xlYXIoKX19KSxCPXkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3kuZm4uaW5pdC5jYWxsKHRoaXMsZSksdGhpcy5jcmVhdGVFbGVtZW50KCksdGhpcy5hdHRhY2hSZWZlcmVuY2UoKX0sb2JzZXJ2ZTp2LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQmJih0aGlzLmVsZW1lbnQuX2tlbmRvTm9kZT1udWxsLHRoaXMuZWxlbWVudD1udWxsKSx5LmZuLmRlc3Ryb3kuY2FsbCh0aGlzKX0sY2xlYXI6ZnVuY3Rpb24oKXt2YXIgZSx0O2Zvcih0aGlzLmVsZW1lbnQmJih0aGlzLmVsZW1lbnQuaW5uZXJIVE1MPVwiXCIpLGU9dGhpcy5jaGlsZE5vZGVzLHQ9MDtlLmxlbmd0aD50O3QrKyllW3RdLmRlc3Ryb3koKTt0aGlzLmNoaWxkTm9kZXM9W119LHJlbW92ZVNlbGY6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQmJih0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpLHRoaXMuZWxlbWVudD1udWxsKSx5LmZuLnJlbW92ZVNlbGYuY2FsbCh0aGlzKX0sY3JlYXRlRWxlbWVudDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudD11LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIil9LGF0dGFjaFJlZmVyZW5jZTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5fa2VuZG9Ob2RlPXRoaXN9LGxvYWQ6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbyxhLHMsbCxjO2ZvcihpPUEoaSwxKSx0aGlzLnNyY0VsZW1lbnQmJihpKj1BKHRoaXMuc3JjRWxlbWVudC5vcHRpb25zLm9wYWNpdHksMSkpLHI9MDtlLmxlbmd0aD5yO3IrKylvPWVbcl0sYT1vLmNoaWxkcmVuLHM9by5jdXJyZW50VHJhbnNmb3JtKG4pLGw9aSpBKG8ub3B0aW9ucy5vcGFjaXR5LDEpLGM9bmV3IG90W28ubm9kZVR5cGVdKG8scyxsKSxhJiZhLmxlbmd0aD4wJiZjLmxvYWQoYSx0LHMsaSksUyh0KT90aGlzLmluc2VydEF0KGMsdCk6dGhpcy5hcHBlbmQoYyksYy5hdHRhY2hUbyh0aGlzLmVsZW1lbnQsdCl9LGF0dGFjaFRvOmZ1bmN0aW9uKGUsdCl7Uyh0KT9lLmluc2VydEJlZm9yZSh0aGlzLmVsZW1lbnQsZS5jaGlsZHJlblt0XXx8bnVsbCk6ZS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpfSxvcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKGUpe1widmlzaWJsZVwiPT1lLmZpZWxkJiZ0aGlzLmNzcyhcImRpc3BsYXlcIixlLnZhbHVlIT09ITE/XCJcIjpFKX0sc2V0U3R5bGU6ZnVuY3Rpb24oKXt0aGlzLmFsbENzcyh0aGlzLm1hcFN0eWxlKCkpfSxtYXBTdHlsZTpmdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiB0aGlzLnNyY0VsZW1lbnQmJnRoaXMuc3JjRWxlbWVudC5vcHRpb25zLnZpc2libGU9PT0hMSYmZS5wdXNoKFtcImRpc3BsYXlcIixFXSksZX0sbWFwT3BhY2l0eVRvOmZ1bmN0aW9uKGUsdCl7dmFyIG49QSh0aGlzLm9wYWNpdHksMSk7bio9QSh0LDEpLGUucHVzaChbXCJvcGFjaXR5XCIsbl0pfSxhdHRyOmZ1bmN0aW9uKGUsdCl7dGhpcy5lbGVtZW50JiYodGhpcy5lbGVtZW50W2VdPXQpfSxhbGxBdHRyOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO2UubGVuZ3RoPnQ7dCsrKXRoaXMuYXR0cihlW3RdWzBdLGVbdF1bMV0pfSxjc3M6ZnVuY3Rpb24oZSx0KXt0aGlzLmVsZW1lbnQmJih0aGlzLmVsZW1lbnQuc3R5bGVbZV09dCl9LGFsbENzczpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDtlLmxlbmd0aD50O3QrKyl0aGlzLmNzcyhlW3RdWzBdLGVbdF1bMV0pfX0pLEw9Qi5leHRlbmQoe2NyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oKXtCLmZuLmNyZWF0ZUVsZW1lbnQuY2FsbCh0aGlzKSx0aGlzLmFsbENzcyhbW1wid2lkdGhcIixcIjEwMCVcIl0sW1wiaGVpZ2h0XCIsXCIxMDAlXCJdLFtcInBvc2l0aW9uXCIsXCJyZWxhdGl2ZVwiXSxbXCJ2aXNpYmlsaXR5XCIsXCJ2aXNpYmxlXCJdXSl9LGF0dGFjaFJlZmVyZW5jZTp2fSksTz1nLkNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3RoaXMuc3JjRWxlbWVudD1lLHRoaXMub2JzZXJ2ZXI9dCxlLmFkZE9ic2VydmVyKHRoaXMpfSxnZW9tZXRyeUNoYW5nZTpmdW5jdGlvbigpe3RoaXMub2JzZXJ2ZXIub3B0aW9uc0NoYW5nZSh7ZmllbGQ6XCJjbGlwXCIsdmFsdWU6dGhpcy5zcmNFbGVtZW50fSl9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5zcmNFbGVtZW50LnJlbW92ZU9ic2VydmVyKHRoaXMpfX0pLEg9Qi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7Qi5mbi5pbml0LmNhbGwodGhpcyxlKSxlJiZ0aGlzLmluaXRDbGlwKCl9LG9ic2VydmU6ZnVuY3Rpb24oKXt5LmZuLm9ic2VydmUuY2FsbCh0aGlzKX0sbWFwU3R5bGU6ZnVuY3Rpb24oKXt2YXIgZT1CLmZuLm1hcFN0eWxlLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMuc3JjRWxlbWVudCYmdGhpcy5zcmNFbGVtZW50LmNsaXAoKSYmZS5wdXNoKFtcImNsaXBcIix0aGlzLmNsaXBSZWN0KCldKSxlfSxvcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKGUpe1wiY2xpcFwiPT1lLmZpZWxkJiYodGhpcy5jbGVhckNsaXAoKSx0aGlzLmluaXRDbGlwKCksdGhpcy5zZXRDbGlwKCkpLEIuZm4ub3B0aW9uc0NoYW5nZS5jYWxsKHRoaXMsZSl9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5jbGVhckNsaXAoKSxCLmZuLmNsZWFyLmNhbGwodGhpcyl9LGluaXRDbGlwOmZ1bmN0aW9uKCl7dGhpcy5zcmNFbGVtZW50LmNsaXAoKSYmKHRoaXMuY2xpcD1uZXcgTyh0aGlzLnNyY0VsZW1lbnQuY2xpcCgpLHRoaXMpLHRoaXMuY2xpcC5vYnNlcnZlcj10aGlzKX0sY2xlYXJDbGlwOmZ1bmN0aW9uKCl7dGhpcy5jbGlwJiYodGhpcy5jbGlwLmNsZWFyKCksdGhpcy5jbGlwPW51bGwsdGhpcy5jc3MoXCJjbGlwXCIsdGhpcy5jbGlwUmVjdCgpKSl9LHNldENsaXA6ZnVuY3Rpb24oKXt0aGlzLmNsaXAmJnRoaXMuY3NzKFwiY2xpcFwiLHRoaXMuY2xpcFJlY3QoKSl9LGNsaXBSZWN0OmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGk9ZCxyPXRoaXMuc3JjRWxlbWVudC5jbGlwKCk7cmV0dXJuIHImJihlPXRoaXMuY2xpcEJCb3gociksdD1lLnRvcExlZnQoKSxuPWUuYm90dG9tUmlnaHQoKSxpPWcuZm9ybWF0KFwicmVjdCh7MH1weCB7MX1weCB7Mn1weCB7M31weClcIix0Lnksbi54LG4ueSx0LngpKSxpfSxjbGlwQkJveDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnNyY0VsZW1lbnQucmF3QkJveCgpLnRvcExlZnQoKSxuPWUucmF3QkJveCgpO3JldHVybiBuLm9yaWdpbi50cmFuc2xhdGUoLXQueCwtdC55KSxufX0pLE49SC5leHRlbmQoe2NyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oKXtCLmZuLmNyZWF0ZUVsZW1lbnQuY2FsbCh0aGlzKSx0aGlzLnNldFN0eWxlKCl9LGF0dGFjaFRvOmZ1bmN0aW9uKGUsdCl7dGhpcy5jc3MoXCJkaXNwbGF5XCIsRSksQi5mbi5hdHRhY2hUby5jYWxsKHRoaXMsZSx0KSx0aGlzLnNyY0VsZW1lbnQub3B0aW9ucy52aXNpYmxlIT09ITEmJnRoaXMuY3NzKFwiZGlzcGxheVwiLFwiXCIpfSxfYXR0YWNoVG86ZnVuY3Rpb24oZSl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO3QuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KSxlLmFwcGVuZENoaWxkKHQpfSxtYXBTdHlsZTpmdW5jdGlvbigpe3ZhciBlPUguZm4ubWFwU3R5bGUuY2FsbCh0aGlzKTtyZXR1cm4gZS5wdXNoKFtcInBvc2l0aW9uXCIsXCJhYnNvbHV0ZVwiXSksZS5wdXNoKFtcIndoaXRlLXNwYWNlXCIsXCJub3dyYXBcIl0pLGV9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7XCJ0cmFuc2Zvcm1cIj09PWUuZmllbGQmJnRoaXMucmVmcmVzaFRyYW5zZm9ybSgpLFwib3BhY2l0eVwiPT09ZS5maWVsZCYmdGhpcy5yZWZyZXNoT3BhY2l0eSgpLEguZm4ub3B0aW9uc0NoYW5nZS5jYWxsKHRoaXMsZSl9LHJlZnJlc2hUcmFuc2Zvcm06ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLnNyY0VsZW1lbnQuY3VycmVudFRyYW5zZm9ybShlKSxpPXRoaXMuY2hpbGROb2RlcyxyPWkubGVuZ3RoO2Zvcih0aGlzLnNldENsaXAoKSx0PTA7cj50O3QrKylpW3RdLnJlZnJlc2hUcmFuc2Zvcm0obil9LGN1cnJlbnRPcGFjaXR5OmZ1bmN0aW9uKCl7dmFyIGU9QSh0aGlzLnNyY0VsZW1lbnQub3B0aW9ucy5vcGFjaXR5LDEpO3JldHVybiB0aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQuY3VycmVudE9wYWNpdHkmJihlKj10aGlzLnBhcmVudC5jdXJyZW50T3BhY2l0eSgpKSxlfSxyZWZyZXNoT3BhY2l0eTpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5jaGlsZE5vZGVzLG49dC5sZW5ndGgsaT10aGlzLmN1cnJlbnRPcGFjaXR5KCk7Zm9yKGU9MDtuPmU7ZSsrKXRbZV0ucmVmcmVzaE9wYWNpdHkoaSl9LGluaXRDbGlwOmZ1bmN0aW9uKCl7aWYoSC5mbi5pbml0Q2xpcC5jYWxsKHRoaXMpLHRoaXMuY2xpcCl7dmFyIGU9dGhpcy5jbGlwLnNyY0VsZW1lbnQuYmJveCh0aGlzLnNyY0VsZW1lbnQuY3VycmVudFRyYW5zZm9ybSgpKTtlJiYodGhpcy5jc3MoXCJ3aWR0aFwiLGUud2lkdGgoKStlLm9yaWdpbi54KSx0aGlzLmNzcyhcImhlaWdodFwiLGUuaGVpZ2h0KCkrZS5vcmlnaW4ueSkpfX0sY2xpcEJCb3g6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuYmJveCh0aGlzLnNyY0VsZW1lbnQuY3VycmVudFRyYW5zZm9ybSgpKX0sY2xlYXJDbGlwOmZ1bmN0aW9uKCl7SC5mbi5jbGVhckNsaXAuY2FsbCh0aGlzKX19KSxWPUIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dGhpcy5vcGFjaXR5PXQsQi5mbi5pbml0LmNhbGwodGhpcyxlKX0sY3JlYXRlRWxlbWVudDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudD1uKFwic3Ryb2tlXCIpLHRoaXMuc2V0T3BhY2l0eSgpfSxvcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKGUpezA9PT1lLmZpZWxkLmluZGV4T2YoXCJzdHJva2VcIikmJnRoaXMuc2V0U3Ryb2tlKCl9LHJlZnJlc2hPcGFjaXR5OmZ1bmN0aW9uKGUpe3RoaXMub3BhY2l0eT1lLHRoaXMuc2V0U3Ryb2tlKCl9LHNldFN0cm9rZTpmdW5jdGlvbigpe3RoaXMuYWxsQXR0cih0aGlzLm1hcFN0cm9rZSgpKX0sc2V0T3BhY2l0eTpmdW5jdGlvbigpe3RoaXMuc2V0U3Ryb2tlKCl9LG1hcFN0cm9rZTpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5zcmNFbGVtZW50Lm9wdGlvbnMuc3Ryb2tlLG49W107cmV0dXJuIHQmJiFDKHQuY29sb3IpJiYwIT09dC53aWR0aD8obi5wdXNoKFtcIm9uXCIsXCJ0cnVlXCJdKSxuLnB1c2goW1wiY29sb3JcIix0LmNvbG9yXSksbi5wdXNoKFtcIndlaWdodFwiLCh0LndpZHRofHwxKStcInB4XCJdKSx0aGlzLm1hcE9wYWNpdHlUbyhuLHQub3BhY2l0eSksUyh0LmRhc2hUeXBlKSYmbi5wdXNoKFtcImRhc2hzdHlsZVwiLHQuZGFzaFR5cGVdKSxTKHQubGluZUpvaW4pJiZuLnB1c2goW1wiam9pbnN0eWxlXCIsdC5saW5lSm9pbl0pLFModC5saW5lQ2FwKSYmKGU9dC5saW5lQ2FwLnRvTG93ZXJDYXNlKCksXCJidXR0XCI9PT1lJiYoZT1cImJ1dHRcIj09PWU/XCJmbGF0XCI6ZSksbi5wdXNoKFtcImVuZGNhcFwiLGVdKSkpOm4ucHVzaChbXCJvblwiLFwiZmFsc2VcIl0pLG59fSksVT1CLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbil7dGhpcy5vcGFjaXR5PW4sQi5mbi5pbml0LmNhbGwodGhpcyxlKX0sY3JlYXRlRWxlbWVudDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudD1uKFwiZmlsbFwiKSx0aGlzLnNldEZpbGwoKX0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXthKGUuZmllbGQpJiZ0aGlzLnNldEZpbGwoKX0scmVmcmVzaE9wYWNpdHk6ZnVuY3Rpb24oZSl7dGhpcy5vcGFjaXR5PWUsdGhpcy5zZXRPcGFjaXR5KCl9LHNldEZpbGw6ZnVuY3Rpb24oKXt0aGlzLmFsbEF0dHIodGhpcy5tYXBGaWxsKCkpfSxzZXRPcGFjaXR5OmZ1bmN0aW9uKCl7dGhpcy5zZXRGaWxsKCl9LGF0dHI6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXMuZWxlbWVudDtpZihpKXtmb3Iobj1lLnNwbGl0KFwiLlwiKTtuLmxlbmd0aD4xOylpPWlbbi5zaGlmdCgpXTtpW25bMF1dPXR9fSxtYXBGaWxsOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zcmNFbGVtZW50LmZpbGwoKSx0PVtbXCJvblwiLFwiZmFsc2VcIl1dO3JldHVybiBlJiYoZS5ub2RlVHlwZT09ej90PXRoaXMubWFwR3JhZGllbnQoZSk6QyhlLmNvbG9yKXx8KHQ9dGhpcy5tYXBGaWxsQ29sb3IoZSkpKSx0fSxtYXBGaWxsQ29sb3I6ZnVuY3Rpb24oZSl7dmFyIHQ9W1tcIm9uXCIsXCJ0cnVlXCJdLFtcImNvbG9yXCIsZS5jb2xvcl1dO3JldHVybiB0aGlzLm1hcE9wYWNpdHlUbyh0LGUub3BhY2l0eSksdH0sbWFwR3JhZGllbnQ6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLnNyY0VsZW1lbnQub3B0aW9ucyxpPW4uZmFsbGJhY2tGaWxsfHxlLmZhbGxiYWNrRmlsbCYmZS5mYWxsYmFja0ZpbGwoKTtyZXR1cm4gdD1lIGluc3RhbmNlb2YgXy5MaW5lYXJHcmFkaWVudD90aGlzLm1hcExpbmVhckdyYWRpZW50KGUpOmUgaW5zdGFuY2VvZiBfLlJhZGlhbEdyYWRpZW50JiZlLnN1cHBvcnRWTUw/dGhpcy5tYXBSYWRpYWxHcmFkaWVudChlKTppP3RoaXMubWFwRmlsbENvbG9yKGkpOltbXCJvblwiLFwiZmFsc2VcIl1dfSxtYXBMaW5lYXJHcmFkaWVudDpmdW5jdGlvbihlKXt2YXIgdD1lLnN0YXJ0KCksbj1lLmVuZCgpLGk9eC5kZWcocChuLnktdC55LG4ueC10LngpKSxyPVtbXCJvblwiLFwidHJ1ZVwiXSxbXCJ0eXBlXCIsel0sW1wiZm9jdXNcIiwwXSxbXCJtZXRob2RcIixcIm5vbmVcIl0sW1wiYW5nbGVcIiwyNzAtaV1dO3JldHVybiB0aGlzLmFkZENvbG9ycyhyKSxyfSxtYXBSYWRpYWxHcmFkaWVudDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnNyY0VsZW1lbnQucmF3QkJveCgpLG49ZS5jZW50ZXIoKSxpPShuLngtdC5vcmlnaW4ueCkvdC53aWR0aCgpLHI9KG4ueS10Lm9yaWdpbi55KS90LmhlaWdodCgpLG89W1tcIm9uXCIsXCJ0cnVlXCJdLFtcInR5cGVcIixcImdyYWRpZW50dGl0bGVcIl0sW1wiZm9jdXNcIixcIjEwMCVcIl0sW1wiZm9jdXNwb3NpdGlvblwiLGkrXCIgXCIrcl0sW1wibWV0aG9kXCIsXCJub25lXCJdXTtyZXR1cm4gdGhpcy5hZGRDb2xvcnMobyksb30sYWRkQ29sb3JzOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLnNyY0VsZW1lbnQub3B0aW9ucyxyPVtdLG89aS5maWxsLnN0b3BzLGE9aS5iYXNlQ29sb3IsbD10aGlzLmVsZW1lbnQuY29sb3JzP1wiY29sb3JzLnZhbHVlXCI6XCJjb2xvcnNcIixjPXMoYSxvWzBdKSxkPXMoYSxvW28ubGVuZ3RoLTFdKTtmb3Iobj0wO28ubGVuZ3RoPm47bisrKXQ9b1tuXSxyLnB1c2goaC5yb3VuZCgxMDAqdC5vZmZzZXQoKSkrXCIlIFwiK3MoYSx0KSk7ZS5wdXNoKFtsLHIuam9pbihcIixcIildLFtcImNvbG9yXCIsY10sW1wiY29sb3IyXCIsZF0pfX0pLFc9Qi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLnRyYW5zZm9ybT10LEIuZm4uaW5pdC5jYWxsKHRoaXMsZSl9LGNyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQ9bihcInNrZXdcIiksdGhpcy5zZXRUcmFuc2Zvcm0oKX0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXtcInRyYW5zZm9ybVwiPT09ZS5maWVsZCYmdGhpcy5yZWZyZXNoKHRoaXMuc3JjRWxlbWVudC5jdXJyZW50VHJhbnNmb3JtKCkpfSxyZWZyZXNoOmZ1bmN0aW9uKGUpe3RoaXMudHJhbnNmb3JtPWUsdGhpcy5zZXRUcmFuc2Zvcm0oKX0sdHJhbnNmb3JtT3JpZ2luOmZ1bmN0aW9uKCl7cmV0dXJuXCItMC41LC0wLjVcIn0sc2V0VHJhbnNmb3JtOmZ1bmN0aW9uKCl7dGhpcy5hbGxBdHRyKHRoaXMubWFwVHJhbnNmb3JtKCkpfSxtYXBUcmFuc2Zvcm06ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnRyYW5zZm9ybSx0PVtdLG49YihlKTtyZXR1cm4gbj8obi5yb3VuZChGKSx0LnB1c2goW1wib25cIixcInRydWVcIl0sW1wibWF0cml4XCIsW24uYSxuLmMsbi5iLG4uZCwwLDBdLmpvaW4oXCIsXCIpXSxbXCJvZmZzZXRcIixuLmUrXCJweCxcIituLmYrXCJweFwiXSxbXCJvcmlnaW5cIix0aGlzLnRyYW5zZm9ybU9yaWdpbigpXSkpOnQucHVzaChbXCJvblwiLFwiZmFsc2VcIl0pLHR9fSksaj1ILmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbil7dGhpcy5maWxsPXRoaXMuY3JlYXRlRmlsbE5vZGUoZSx0LG4pLHRoaXMuc3Ryb2tlPW5ldyBWKGUsbiksdGhpcy50cmFuc2Zvcm09dGhpcy5jcmVhdGVUcmFuc2Zvcm1Ob2RlKGUsdCksSC5mbi5pbml0LmNhbGwodGhpcyxlKX0sYXR0YWNoVG86ZnVuY3Rpb24oZSx0KXt0aGlzLmZpbGwuYXR0YWNoVG8odGhpcy5lbGVtZW50KSx0aGlzLnN0cm9rZS5hdHRhY2hUbyh0aGlzLmVsZW1lbnQpLHRoaXMudHJhbnNmb3JtLmF0dGFjaFRvKHRoaXMuZWxlbWVudCksQi5mbi5hdHRhY2hUby5jYWxsKHRoaXMsZSx0KX0sY3JlYXRlRmlsbE5vZGU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBuZXcgVShlLHQsbil9LGNyZWF0ZVRyYW5zZm9ybU5vZGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IFcoZSx0KX0sY3JlYXRlRWxlbWVudDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudD1uKFwic2hhcGVcIiksdGhpcy5zZXRDb29yZHNpemUoKSx0aGlzLnNldFN0eWxlKCl9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7YShlLmZpZWxkKT90aGlzLmZpbGwub3B0aW9uc0NoYW5nZShlKTowPT09ZS5maWVsZC5pbmRleE9mKFwic3Ryb2tlXCIpP3RoaXMuc3Ryb2tlLm9wdGlvbnNDaGFuZ2UoZSk6XCJ0cmFuc2Zvcm1cIj09PWUuZmllbGQ/dGhpcy50cmFuc2Zvcm0ub3B0aW9uc0NoYW5nZShlKTpcIm9wYWNpdHlcIj09PWUuZmllbGQmJih0aGlzLmZpbGwuc2V0T3BhY2l0eSgpLHRoaXMuc3Ryb2tlLnNldE9wYWNpdHkoKSksSC5mbi5vcHRpb25zQ2hhbmdlLmNhbGwodGhpcyxlKX0scmVmcmVzaFRyYW5zZm9ybTpmdW5jdGlvbihlKXt0aGlzLnRyYW5zZm9ybS5yZWZyZXNoKHRoaXMuc3JjRWxlbWVudC5jdXJyZW50VHJhbnNmb3JtKGUpKX0scmVmcmVzaE9wYWNpdHk6ZnVuY3Rpb24oZSl7ZSo9QSh0aGlzLnNyY0VsZW1lbnQub3B0aW9ucy5vcGFjaXR5LDEpLHRoaXMuZmlsbC5yZWZyZXNoT3BhY2l0eShlKSx0aGlzLnN0cm9rZS5yZWZyZXNoT3BhY2l0eShlKX0sbWFwU3R5bGU6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPUguZm4ubWFwU3R5bGUuY2FsbCh0aGlzKTtyZXR1cm4gZSYmdHx8KGU9dD1QKSxpLnB1c2goW1wicG9zaXRpb25cIixcImFic29sdXRlXCJdLFtcIndpZHRoXCIsZStcInB4XCJdLFtcImhlaWdodFwiLHQrXCJweFwiXSksbj10aGlzLnNyY0VsZW1lbnQub3B0aW9ucy5jdXJzb3IsbiYmaS5wdXNoKFtcImN1cnNvclwiLG5dKSxpfSxzZXRDb29yZHNpemU6ZnVuY3Rpb24oKXt0aGlzLmFsbEF0dHIoW1tcImNvb3Jkb3JpZ2luXCIsXCIwIDBcIl0sW1wiY29vcmRzaXplXCIsSStcIiBcIitJXV0pfX0pLEc9Qi5leHRlbmQoe2NyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQ9bihcInBhdGhcIiksdGhpcy5zZXRQYXRoRGF0YSgpfSxnZW9tZXRyeUNoYW5nZTpmdW5jdGlvbigpe3RoaXMuc2V0UGF0aERhdGEoKX0sc2V0UGF0aERhdGE6ZnVuY3Rpb24oKXt0aGlzLmF0dHIoXCJ2XCIsdGhpcy5yZW5kZXJEYXRhKCkpfSxyZW5kZXJEYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIHIodGhpcy5zcmNFbGVtZW50KX19KSxxPWouZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXt0aGlzLnBhdGhEYXRhPXRoaXMuY3JlYXRlRGF0YU5vZGUoZSksai5mbi5pbml0LmNhbGwodGhpcyxlLHQsbil9LGF0dGFjaFRvOmZ1bmN0aW9uKGUsdCl7dGhpcy5wYXRoRGF0YS5hdHRhY2hUbyh0aGlzLmVsZW1lbnQpLGouZm4uYXR0YWNoVG8uY2FsbCh0aGlzLGUsdCl9LGNyZWF0ZURhdGFOb2RlOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgRyhlKX0sZ2VvbWV0cnlDaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLnBhdGhEYXRhLmdlb21ldHJ5Q2hhbmdlKCksai5mbi5nZW9tZXRyeUNoYW5nZS5jYWxsKHRoaXMpfX0pLCQ9Ry5leHRlbmQoe3JlbmRlckRhdGE6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT10aGlzLnNyY0VsZW1lbnQucGF0aHM7aWYoaS5sZW5ndGg+MCl7Zm9yKGU9W10sdD0wO2kubGVuZ3RoPnQ7dCsrKW49aS5sZW5ndGgtMT50LGUucHVzaChyKGlbdF0sbikpO3JldHVybiBlLmpvaW4oXCIgXCIpfX19KSxZPXEuZXh0ZW5kKHtjcmVhdGVEYXRhTm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3ICQoZSl9fSksSz1XLmV4dGVuZCh7dHJhbnNmb3JtT3JpZ2luOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zcmNFbGVtZW50Lmdlb21ldHJ5KCkuYmJveCgpLHQ9ZS5jZW50ZXIoKSxuPS10LngvZS53aWR0aCgpLGk9LXQueS9lLmhlaWdodCgpO3JldHVybiBuK1wiLFwiK2l9fSksUT1qLmV4dGVuZCh7Y3JlYXRlRWxlbWVudDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudD1uKFwib3ZhbFwiKSx0aGlzLnNldFN0eWxlKCl9LGNyZWF0ZVRyYW5zZm9ybU5vZGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IEsoZSx0KX0sZ2VvbWV0cnlDaGFuZ2U6ZnVuY3Rpb24oKXtqLmZuLmdlb21ldHJ5Q2hhbmdlLmNhbGwodGhpcyksdGhpcy5zZXRTdHlsZSgpLHRoaXMucmVmcmVzaFRyYW5zZm9ybSgpfSxtYXBTdHlsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3JjRWxlbWVudC5nZW9tZXRyeSgpLHQ9ZS5yYWRpdXMsbj1lLmNlbnRlcixpPTIqdCxyPWouZm4ubWFwU3R5bGUuY2FsbCh0aGlzLGksaSk7cmV0dXJuIHIucHVzaChbXCJsZWZ0XCIsbi54LXQrXCJweFwiXSxbXCJ0b3BcIixuLnktdCtcInB4XCJdKSxyfX0pLFg9Ry5leHRlbmQoe3JlbmRlckRhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gcih0aGlzLnNyY0VsZW1lbnQudG9QYXRoKCkpfX0pLEo9cS5leHRlbmQoe2NyZWF0ZURhdGFOb2RlOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgWChlKX19KSxaPUcuZXh0ZW5kKHtjcmVhdGVFbGVtZW50OmZ1bmN0aW9uKCl7Ry5mbi5jcmVhdGVFbGVtZW50LmNhbGwodGhpcyksdGhpcy5hdHRyKFwidGV4dHBhdGhva1wiLCEwKX0scmVuZGVyRGF0YTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3JjRWxlbWVudC5yZWN0KCksdD1lLmNlbnRlcigpO3JldHVyblwibSBcIitpKFtuZXcgdy5Qb2ludChlLnRvcExlZnQoKS54LHQueSldKStcIiBsIFwiK2koW25ldyB3LlBvaW50KGUuYm90dG9tUmlnaHQoKS54LHQueSldKX19KSxldD1CLmV4dGVuZCh7Y3JlYXRlRWxlbWVudDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudD1uKFwidGV4dHBhdGhcIiksdGhpcy5hdHRyKFwib25cIiwhMCksdGhpcy5hdHRyKFwiZml0cGF0aFwiLCExKSx0aGlzLnNldFN0eWxlKCksdGhpcy5zZXRTdHJpbmcoKX0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXtcImNvbnRlbnRcIj09PWUuZmllbGQ/dGhpcy5zZXRTdHJpbmcoKTp0aGlzLnNldFN0eWxlKCksQi5mbi5vcHRpb25zQ2hhbmdlLmNhbGwodGhpcyxlKX0sbWFwU3R5bGU6ZnVuY3Rpb24oKXtyZXR1cm5bW1wiZm9udFwiLHRoaXMuc3JjRWxlbWVudC5vcHRpb25zLmZvbnRdXX0sc2V0U3RyaW5nOmZ1bmN0aW9uKCl7dGhpcy5hdHRyKFwic3RyaW5nXCIsdGhpcy5zcmNFbGVtZW50LmNvbnRlbnQoKSl9fSksdHQ9cS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3RoaXMucGF0aD1uZXcgZXQoZSkscS5mbi5pbml0LmNhbGwodGhpcyxlLHQsbil9LGNyZWF0ZURhdGFOb2RlOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgWihlKX0sYXR0YWNoVG86ZnVuY3Rpb24oZSx0KXt0aGlzLnBhdGguYXR0YWNoVG8odGhpcy5lbGVtZW50KSxxLmZuLmF0dGFjaFRvLmNhbGwodGhpcyxlLHQpfSxvcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKGUpeyhcImZvbnRcIj09PWUuZmllbGR8fFwiY29udGVudFwiPT09ZS5maWVsZCkmJih0aGlzLnBhdGgub3B0aW9uc0NoYW5nZShlKSx0aGlzLnBhdGhEYXRhLmdlb21ldHJ5Q2hhbmdlKGUpKSxxLmZuLm9wdGlvbnNDaGFuZ2UuY2FsbCh0aGlzLGUpfX0pLG50PUcuZXh0ZW5kKHtyZW5kZXJEYXRhOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zcmNFbGVtZW50LnJlY3QoKSx0PShuZXcgXy5QYXRoKS5tb3ZlVG8oZS50b3BMZWZ0KCkpLmxpbmVUbyhlLnRvcFJpZ2h0KCkpLmxpbmVUbyhlLmJvdHRvbVJpZ2h0KCkpLmxpbmVUbyhlLmJvdHRvbUxlZnQoKSkuY2xvc2UoKTtyZXR1cm4gcih0KX19KSxpdD1XLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbil7dGhpcy5vcGFjaXR5PW4sVy5mbi5pbml0LmNhbGwodGhpcyxlLHQpfSxjcmVhdGVFbGVtZW50OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50PW4oXCJmaWxsXCIpLHRoaXMuYXR0cihcInR5cGVcIixcImZyYW1lXCIpLHRoaXMuYXR0cihcInJvdGF0ZVwiLCEwKSx0aGlzLnNldE9wYWNpdHkoKSx0aGlzLnNldFNyYygpLHRoaXMuc2V0VHJhbnNmb3JtKCl9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7XCJzcmNcIj09PWUuZmllbGQmJnRoaXMuc2V0U3JjKCksVy5mbi5vcHRpb25zQ2hhbmdlLmNhbGwodGhpcyxlKX0sZ2VvbWV0cnlDaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLnJlZnJlc2goKX0scmVmcmVzaE9wYWNpdHk6ZnVuY3Rpb24oZSl7dGhpcy5vcGFjaXR5PWUsdGhpcy5zZXRPcGFjaXR5KCl9LHNldE9wYWNpdHk6ZnVuY3Rpb24oKXt2YXIgZT1bXTt0aGlzLm1hcE9wYWNpdHlUbyhlLHRoaXMuc3JjRWxlbWVudC5vcHRpb25zLm9wYWNpdHkpLHRoaXMuYWxsQXR0cihlKX0sc2V0U3JjOmZ1bmN0aW9uKCl7dGhpcy5hdHRyKFwic3JjXCIsdGhpcy5zcmNFbGVtZW50LnNyYygpKX0sbWFwVHJhbnNmb3JtOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixvLGEscyxsPXRoaXMuc3JjRWxlbWVudCxjPWwucmF3QkJveCgpLGQ9Yy5jZW50ZXIoKSx1PVAvMixoPVAsZz1jLndpZHRoKCkvaCxtPWMuaGVpZ2h0KCkvaCx2PTAsXz10aGlzLnRyYW5zZm9ybTtyZXR1cm4gXz8obj1iKF8pLGk9ZihuLmEqbi5hK24uYipuLmIpLHI9ZihuLmMqbi5jK24uZCpuLmQpLGcqPWksbSo9cixvPVQocChuLmIsbi5kKSksYT1UKHAoLW4uYyxuLmEpKSx2PShvK2EpLzIsMCE9PXY/KHM9bC5iYm94KCkuY2VudGVyKCksZT0ocy54LXUpL2gsdD0ocy55LXUpL2gpOihlPShkLngqaStuLmUtdSkvaCx0PShkLnkqcituLmYtdSkvaCkpOihlPShkLngtdSkvaCx0PShkLnktdSkvaCksZz1EKGcsRiksbT1EKG0sRiksZT1EKGUsRiksdD1EKHQsRiksdj1EKHYsRiksW1tcInNpemVcIixnK1wiLFwiK21dLFtcInBvc2l0aW9uXCIsZStcIixcIit0XSxbXCJhbmdsZVwiLHZdXX19KSxydD1xLmV4dGVuZCh7Y3JlYXRlRmlsbE5vZGU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBuZXcgaXQoZSx0LG4pfSxjcmVhdGVEYXRhTm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IG50KGUpfSxvcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKGUpeyhcInNyY1wiPT09ZS5maWVsZHx8XCJ0cmFuc2Zvcm1cIj09PWUuZmllbGQpJiZ0aGlzLmZpbGwub3B0aW9uc0NoYW5nZShlKSxxLmZuLm9wdGlvbnNDaGFuZ2UuY2FsbCh0aGlzLGUpfSxnZW9tZXRyeUNoYW5nZTpmdW5jdGlvbigpe3RoaXMuZmlsbC5nZW9tZXRyeUNoYW5nZSgpLHEuZm4uZ2VvbWV0cnlDaGFuZ2UuY2FsbCh0aGlzKX0scmVmcmVzaFRyYW5zZm9ybTpmdW5jdGlvbihlKXtxLmZuLnJlZnJlc2hUcmFuc2Zvcm0uY2FsbCh0aGlzLGUpLHRoaXMuZmlsbC5yZWZyZXNoKHRoaXMuc3JjRWxlbWVudC5jdXJyZW50VHJhbnNmb3JtKGUpKX19KSxvdD17R3JvdXA6TixUZXh0OnR0LFBhdGg6cSxNdWx0aVBhdGg6WSxDaXJjbGU6USxBcmM6SixJbWFnZTpydH07Zy5zdXBwb3J0LnZtbD1mdW5jdGlvbigpe3ZhciBlPWcuc3VwcG9ydC5icm93c2VyO3JldHVybiBlLm1zaWUmJjk+ZS52ZXJzaW9ufSgpLGQ9XCJpbmhlcml0XCIsZy5zdXBwb3J0LmJyb3dzZXIubXNpZSYmOD5nLnN1cHBvcnQuYnJvd3Nlci52ZXJzaW9uJiYoZD1cInJlY3QoYXV0byBhdXRvIGF1dG8gYXV0bylcIiksZy5zdXBwb3J0LnZtbCYmXy5TdXJmYWNlRmFjdG9yeS5jdXJyZW50LnJlZ2lzdGVyKFwidm1sXCIsUiwzMCksbShfLHt2bWw6e0FyY0RhdGFOb2RlOlgsQXJjTm9kZTpKLENpcmNsZVRyYW5zZm9ybU5vZGU6SyxDaXJjbGVOb2RlOlEsRmlsbE5vZGU6VSxHcm91cE5vZGU6TixJbWFnZU5vZGU6cnQsSW1hZ2VGaWxsTm9kZTppdCxJbWFnZVBhdGhEYXRhTm9kZTpudCxNdWx0aVBhdGhEYXRhTm9kZTokLE11bHRpUGF0aE5vZGU6WSxOb2RlOkIsUGF0aERhdGFOb2RlOkcsUGF0aE5vZGU6cSxSb290Tm9kZTpMLFN0cm9rZU5vZGU6VixTdXJmYWNlOlIsVGV4dE5vZGU6dHQsVGV4dFBhdGhOb2RlOmV0LFRleHRQYXRoRGF0YU5vZGU6WixUcmFuc2Zvcm1Ob2RlOld9fSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKCl7ZnVuY3Rpb24gZSgpe3ZhciB0LHIsbztmb3IodD0wO2FyZ3VtZW50cy5sZW5ndGg+dDsrK3Qpe2lmKHI9YXJndW1lbnRzW3RdLHI9PT1uKXRocm93IEVycm9yKFwiQ2Fubm90IG91dHB1dCB1bmRlZmluZWQgdG8gUERGXCIpO2lmKHIgaW5zdGFuY2VvZiB3KXIuYmVmb3JlUmVuZGVyKGUpLHIucmVuZGVyKGUpO2Vsc2UgaWYoRihyKSlmKHIsZSk7ZWxzZSBpZihwKHIpKWcocixlKTtlbHNlIGlmKFwibnVtYmVyXCI9PXR5cGVvZiByKXtpZihpc05hTihyKSl0aHJvdyBFcnJvcihcIkNhbm5vdCBvdXRwdXQgTmFOIHRvIFBERlwiKTtvPXIudG9GaXhlZCg3KSxvLmluZGV4T2YoXCIuXCIpPj0wJiYobz1vLnJlcGxhY2UoL1xcLj8wKyQvLFwiXCIpKSxcIi0wXCI9PW8mJihvPVwiMFwiKSxpLndyaXRlU3RyaW5nKG8pfWVsc2Uvc3RyaW5nfGJvb2xlYW4vLnRlc3QodHlwZW9mIHIpP2kud3JpdGVTdHJpbmcocitcIlwiKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiByLmdldD9pLndyaXRlKHIuZ2V0KCkpOlwib2JqZWN0XCI9PXR5cGVvZiByJiYocj9lKG5ldyBIKHIpKTppLndyaXRlU3RyaW5nKFwibnVsbFwiKSl9fXZhciB0PTAsaT1EKCk7cmV0dXJuIGUud3JpdGVEYXRhPWZ1bmN0aW9uKGUpe2kud3JpdGUoZSl9LGUud2l0aEluZGVudD1mdW5jdGlvbihuKXsrK3QsbihlKSwtLXR9LGUuaW5kZW50PWZ1bmN0aW9uKCl7ZShRLGQoXCJcIiwyKnQsXCIgIFwiKSksZS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGUub2Zmc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGkub2Zmc2V0KCl9LGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcihcIkZJWCBDQUxMRVJcIil9LGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGkuZ2V0KCl9LGUuc3RyZWFtPWZ1bmN0aW9uKCl7cmV0dXJuIGl9LGV9ZnVuY3Rpb24gcihlLHQpe3ZhciBuPWUuYmVmb3JlUmVuZGVyLGk9ZS5yZW5kZXI7ZS5iZWZvcmVSZW5kZXI9ZnVuY3Rpb24oKXt9LGUucmVuZGVyPWZ1bmN0aW9uKGUpe2UodCxcIiAwIFJcIil9LGUucmVuZGVyRnVsbD1mdW5jdGlvbihyKXtlLl9vZmZzZXQ9ci5vZmZzZXQoKSxyKHQsXCIgMCBvYmogXCIpLG4uY2FsbChlLHIpLGkuY2FsbChlLHIpLHIoXCIgZW5kb2JqXCIpfX1mdW5jdGlvbiBvKGUpe2Z1bmN0aW9uIHQodCxuKXtyZXR1cm4gZSYmbnVsbCE9ZVt0XT9lW3RdOm59dmFyIG4sbyxhLHMsbCxjLGQ9dGhpcyxoPWkoKSxwPTAsZj1bXTtpZihkLmdldE9wdGlvbj10LGQuYXR0YWNoPWZ1bmN0aW9uKGUpe3JldHVybiBmLmluZGV4T2YoZSk8MCYmKHIoZSwrK3ApLGYucHVzaChlKSksZX0sZC5GT05UUz17fSxkLklNQUdFUz17fSxuPXQoXCJwYXBlclNpemVcIixaLmE0KSxcInN0cmluZ1wiPT10eXBlb2YgbiYmKG49WltuLnRvTG93ZXJDYXNlKCldLG51bGw9PW4pKXRocm93IEVycm9yKFwiVW5rbm93biBwYXBlciBzaXplXCIpO25bMF09eShuWzBdKSxuWzFdPXkoblsxXSksdChcImxhbmRzY2FwZVwiLCExKSYmKG49W01hdGgubWF4KG5bMF0sblsxXSksTWF0aC5taW4oblswXSxuWzFdKV0pLG89dChcIm1hcmdpblwiKSxvJiYoby5sZWZ0PXkoby5sZWZ0LDApLG8udG9wPXkoby50b3AsMCksby5yaWdodD15KG8ucmlnaHQsMCksby5ib3R0b209eShvLmJvdHRvbSwwKSx0KFwiYWRkTWFyZ2luXCIpJiYoblswXSs9by5sZWZ0K28ucmlnaHQsblsxXSs9by50b3Arby5ib3R0b20pKSxhPW5bMF0scz1uWzFdLG8mJihhLT1vLmxlZnQrby5yaWdodCxzLT1vLnRvcCtvLmJvdHRvbSksbD1kLmF0dGFjaChuZXcgViksYz1kLmF0dGFjaChuZXcgVShbMCwwLG5bMF0sblsxXV0pKSxsLnNldFBhZ2VzKGMpLGQuYWRkUGFnZT1mdW5jdGlvbigpe3ZhciBlPW5ldyBOKGkoKSxudWxsLCEwKSx0PW5ldyBxKGQse0NvbnRlbnRzOmQuYXR0YWNoKGUpLFBhcmVudDpjfSk7cmV0dXJuIHQuX2NvbnRlbnQ9ZSxjLmFkZFBhZ2UoZC5hdHRhY2godCkpLHQudHJhbnNmb3JtKDEsMCwwLC0xLDAsblsxXSksbyYmKHQudHJhbnNsYXRlKG8ubGVmdCxvLnRvcCksdC5yZWN0KDAsMCxhLHMpLHQuY2xpcCgpKSx0fSxkLnJlbmRlcj1mdW5jdGlvbigpe3ZhciBlLG47Zm9yKGgoXCIlUERGLTEuNFwiLFEsXCIlw4LDgcOaw4/DjlwiLFEsUSksZT0wO2YubGVuZ3RoPmU7KytlKWZbZV0ucmVuZGVyRnVsbChoKSxoKFEsUSk7Zm9yKG49aC5vZmZzZXQoKSxoKFwieHJlZlwiLFEsMCxcIiBcIixmLmxlbmd0aCsxLFEpLGgoXCIwMDAwMDAwMDAwIDY1NTM1IGYgXCIsUSksZT0wO2YubGVuZ3RoPmU7KytlKWgodShmW2VdLl9vZmZzZXQsMTApLFwiIDAwMDAwIG4gXCIsUSk7cmV0dXJuIGgoUSksaChcInRyYWlsZXJcIixRKSxoKG5ldyBIKHtTaXplOmYubGVuZ3RoKzEsUm9vdDpsLEluZm86bmV3IEgoe1Byb2R1Y2VyOm5ldyBSKFwiS2VuZG8gVUkgUERGIEdlbmVyYXRvclwiKSxUaXRsZTpuZXcgUih0KFwidGl0bGVcIixcIlwiKSksQXV0aG9yOm5ldyBSKHQoXCJhdXRob3JcIixcIlwiKSksU3ViamVjdDpuZXcgUih0KFwic3ViamVjdFwiLFwiXCIpKSxLZXl3b3JkczpuZXcgUih0KFwia2V5d29yZHNcIixcIlwiKSksQ3JlYXRvcjpuZXcgUih0KFwiY3JlYXRvclwiLFwiS2VuZG8gVUkgUERGIEdlbmVyYXRvclwiKSksQ3JlYXRpb25EYXRlOnQoXCJkYXRlXCIsbmV3IERhdGUpfSl9KSxRLFEpLGgoXCJzdGFydHhyZWZcIixRLG4sUSksaChcIiUlRU9GXCIsUSksaC5zdHJlYW0oKS5vZmZzZXQoMCl9fWZ1bmN0aW9uIGEodCxuKXtmdW5jdGlvbiBpKCl7ZS5jb25zb2xlJiYoZS5jb25zb2xlLmVycm9yP2UuY29uc29sZS5lcnJvcihcIkNhbm5vdCBsb2FkIFVSTDogJXNcIix0KTplLmNvbnNvbGUubG9nKFwiQ2Fubm90IGxvYWQgVVJMOiAlc1wiLHQpKSxuKG51bGwpfXZhciByPW5ldyBYTUxIdHRwUmVxdWVzdDtyLm9wZW4oXCJHRVRcIix0LCEwKSxLJiYoci5yZXNwb25zZVR5cGU9XCJhcnJheWJ1ZmZlclwiKSxyLm9ubG9hZD1mdW5jdGlvbigpezIwMD09ci5zdGF0dXN8fDMwND09ci5zdGF0dXM/bihLP25ldyBVaW50OEFycmF5KHIucmVzcG9uc2UpOm5ldyBWQkFycmF5KHIucmVzcG9uc2VCb2R5KS50b0FycmF5KCkpOmkoKX0sci5vbmVycm9yPWksci5zZW5kKG51bGwpfWZ1bmN0aW9uIHMoZSx0KXt2YXIgbj1ldFtlXTtuP3Qobik6YShlLGZ1bmN0aW9uKG4pe2lmKG51bGw9PW4pdGhyb3cgRXJyb3IoXCJDYW5ub3QgbG9hZCBmb250IGZyb20gXCIrZSk7dmFyIGk9bmV3IFkucGRmLlRURkZvbnQobik7ZXRbZV09aSx0KGkpfSl9ZnVuY3Rpb24gbChlLHQpe3ZhciBpPXR0W2VdO2k/dChpKTooaT1uZXcgSW1hZ2UsaS5vbmxvYWQ9ZnVuY3Rpb24oKXt2YXIgbixyLG8sYSxzLGwsYyxkLHUsaCxwPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7cC53aWR0aD1pLndpZHRoLHAuaGVpZ2h0PWkuaGVpZ2h0LG49cC5nZXRDb250ZXh0KFwiMmRcIiksbi5kcmF3SW1hZ2UoaSwwLDApO3RyeXtyPW4uZ2V0SW1hZ2VEYXRhKDAsMCxpLndpZHRoLGkuaGVpZ2h0KX1jYXRjaChmKXtyZXR1cm4gdCh0dFtlXT1cIlRBSU5URURcIil9Zm9yKG89ITEsYT1EKCkscz1EKCksbD1yLmRhdGEsYz0wO2wubGVuZ3RoPmM7KWEud3JpdGVCeXRlKGxbYysrXSksYS53cml0ZUJ5dGUobFtjKytdKSxhLndyaXRlQnl0ZShsW2MrK10pLGQ9bFtjKytdLDI1NT5kJiYobz0hMCkscy53cml0ZUJ5dGUoZCk7bz9pPW5ldyBDKGkud2lkdGgsaS5oZWlnaHQsYSxzKToodT1wLnRvRGF0YVVSTChcImltYWdlL2pwZWdcIiksdT11LnN1YnN0cih1LmluZGV4T2YoXCI7YmFzZTY0LFwiKSs4KSxoPUQoKSxoLndyaXRlQmFzZTY0KHUpLGgub2Zmc2V0KDApLGk9bmV3IHgoaS53aWR0aCxpLmhlaWdodCxoKSksdCh0dFtlXT1pKX0saS5vbmVycm9yPWZ1bmN0aW9uKCl7dCh0dFtlXT1cIlRBSU5URURcIil9LGkuY3Jvc3NPcmlnaW49XCJBbm9ueW1vdXNcIixpLnNyYz1lLChpLmNvbXBsZXRlfHxpLmNvbXBsZXRlPT09bikmJihpLnNyYz1cImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQUFBQUFQLy8veXdBQUFBQUFRQUJBQUFDQVV3QU93PT1cIixpLnNyYz1lKSl9ZnVuY3Rpb24gYyhlKXtyZXR1cm4gZnVuY3Rpb24odCxuKXt2YXIgaT10Lmxlbmd0aCxyPWk7aWYoMD09PWkpcmV0dXJuIG4oKTtmb3IoO3ItLT4wOyllKHRbcl0sZnVuY3Rpb24oKXswPT09LS1pJiZuKCl9KX19ZnVuY3Rpb24gZChlLHQsbil7Zm9yKDt0PmUubGVuZ3RoOyllPW4rZTtyZXR1cm4gZX1mdW5jdGlvbiB1KGUsdCl7cmV0dXJuIGQoZStcIlwiLHQsXCIwXCIpfWZ1bmN0aW9uIGgoZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9ZnVuY3Rpb24gcChlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIERhdGV9ZnVuY3Rpb24gZihlLHQpe3QoXCJbXCIpLGUubGVuZ3RoPjAmJnQud2l0aEluZGVudChmdW5jdGlvbigpe2Zvcih2YXIgbj0wO2UubGVuZ3RoPm47KytuKW4+MCYmbiU4PT09MD90LmluZGVudChlW25dKTp0KFwiIFwiLGVbbl0pfSksdChcIiBdXCIpfWZ1bmN0aW9uIGcoZSx0KXt0KFwiKEQ6XCIsdShlLmdldFVUQ0Z1bGxZZWFyKCksNCksdShlLmdldFVUQ01vbnRoKCkrMSwyKSx1KGUuZ2V0VVRDRGF0ZSgpLDIpLHUoZS5nZXRVVENIb3VycygpLDIpLHUoZS5nZXRVVENNaW51dGVzKCksMiksdShlLmdldFVUQ1NlY29uZHMoKSwyKSxcIlopXCIpfWZ1bmN0aW9uIG0oZSl7cmV0dXJuIGUqKDcyLzI1LjQpfWZ1bmN0aW9uIHYoZSl7cmV0dXJuIG0oMTAqZSl9ZnVuY3Rpb24gXyhlKXtyZXR1cm4gNzIqZX1mdW5jdGlvbiB5KGUsbil7dmFyIGkscjtpZihcIm51bWJlclwiPT10eXBlb2YgZSlyZXR1cm4gZTtpZihcInN0cmluZ1wiPT10eXBlb2YgZSYmKGk9L15cXHMqKFswLTkuXSspXFxzKihtbXxjbXxpbnxwdClcXHMqJC8uZXhlYyhlKSxpJiYocj10KGlbMV0pLCFpc05hTihyKSkpKXJldHVyblwicHRcIj09aVsyXT9yOnttbTptLGNtOnYsXCJpblwiOl99W2lbMl1dKHIpO2lmKG51bGwhPW4pcmV0dXJuIG47dGhyb3cgRXJyb3IoXCJDYW4ndCBwYXJzZSB1bml0OiBcIitlKX1mdW5jdGlvbiB3KCl7fWZ1bmN0aW9uIGIoZSx0LG4pe258fChuPXcpLGUucHJvdG90eXBlPW5ldyBuO2Zvcih2YXIgaSBpbiB0KWgodCxpKSYmKGUucHJvdG90eXBlW2ldPXRbaV0pO3JldHVybiBlfWZ1bmN0aW9uIGsoZSl7cmV0dXJuIGgoTyxlKT9PW2VdOk9bZV09bmV3IEwoZSl9ZnVuY3Rpb24geChlLHQsbil7dGhpcy5hc1N0cmVhbT1mdW5jdGlvbigpe3ZhciBpPW5ldyBOKG4se1R5cGU6ayhcIlhPYmplY3RcIiksU3VidHlwZTprKFwiSW1hZ2VcIiksV2lkdGg6ZSxIZWlnaHQ6dCxCaXRzUGVyQ29tcG9uZW50OjgsQ29sb3JTcGFjZTprKFwiRGV2aWNlUkdCXCIpLEZpbHRlcjprKFwiRENURGVjb2RlXCIpfSk7cmV0dXJuIGkuX3Jlc291cmNlTmFtZT1rKFwiSVwiKyArK1gpLGl9fWZ1bmN0aW9uIEMoZSx0LG4saSl7dGhpcy5hc1N0cmVhbT1mdW5jdGlvbihyKXt2YXIgbz1uZXcgTihpLHtUeXBlOmsoXCJYT2JqZWN0XCIpLFN1YnR5cGU6ayhcIkltYWdlXCIpLFdpZHRoOmUsSGVpZ2h0OnQsQml0c1BlckNvbXBvbmVudDo4LENvbG9yU3BhY2U6ayhcIkRldmljZUdyYXlcIil9LCEwKSxhPW5ldyBOKG4se1R5cGU6ayhcIlhPYmplY3RcIiksU3VidHlwZTprKFwiSW1hZ2VcIiksV2lkdGg6ZSxIZWlnaHQ6dCxCaXRzUGVyQ29tcG9uZW50OjgsQ29sb3JTcGFjZTprKFwiRGV2aWNlUkdCXCIpLFNNYXNrOnIuYXR0YWNoKG8pfSwhMCk7cmV0dXJuIGEuX3Jlc291cmNlTmFtZT1rKFwiSVwiKyArK1gpLGF9fWZ1bmN0aW9uIFMoZSl7ZnVuY3Rpb24gdChlKXtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7RnVuY3Rpb25UeXBlOjMsRnVuY3Rpb25zOmUsRG9tYWluOlswLDFdLEJvdW5kczpkLEVuY29kZTp1fX12YXIgbixpLHIsbyxhLHM9ITEsbD1bXSxjPVtdLGQ9W10sdT1bXTtmb3Iobj0xO2UubGVuZ3RoPm47KytuKWk9ZVtuLTFdLHI9ZVtuXSxvPWkuY29sb3IsYT1yLmNvbG9yLGMucHVzaCh7RnVuY3Rpb25UeXBlOjIsRG9tYWluOlswLDFdLFJhbmdlOlswLDEsMCwxLDAsMV0sTjoxLEMwOltvLnIsby5nLG8uYl0sQzE6W2EucixhLmcsYS5iXX0pLGwucHVzaCh7RnVuY3Rpb25UeXBlOjIsRG9tYWluOlswLDFdLFJhbmdlOlswLDFdLE46MSxDMDpbby5hXSxDMTpbYS5hXX0pLCgxPm8uYXx8MT5hLmEpJiYocz0hMCksZC5wdXNoKHIub2Zmc2V0KSx1LnB1c2goMCwxKTtyZXR1cm4gZC5wb3AoKSx7aGFzQWxwaGE6cyxjb2xvcnM6dChjKSxvcGFjaXRpZXM6cz90KGwpOm51bGx9fWZ1bmN0aW9uIFQoZSx0LG4pe3ZhciBpPVwicmFkaWFsXCI9PXQudHlwZSxyPVModC5zdG9wcyksbz1pP1t0LnN0YXJ0LngsdC5zdGFydC55LHQuc3RhcnQucix0LmVuZC54LHQuZW5kLnksdC5lbmQucl06W3Quc3RhcnQueCx0LnN0YXJ0LnksdC5lbmQueCx0LmVuZC55XSxhPXtUeXBlOmsoXCJTaGFkaW5nXCIpLFNoYWRpbmdUeXBlOmk/MzoyLENvbG9yU3BhY2U6ayhcIkRldmljZVJHQlwiKSxDb29yZHM6byxEb21haW46WzAsMV0sRnVuY3Rpb246ci5jb2xvcnMsRXh0ZW5kOlshMCwhMF19LHM9ci5oYXNBbHBoYT97VHlwZTprKFwiRXh0R1N0YXRlXCIpLEFJUzohMSxDQToxLGNhOjEsU01hc2s6e1R5cGU6ayhcIk1hc2tcIiksUzprKFwiTHVtaW5vc2l0eVwiKSxHOmUuYXR0YWNoKG5ldyBOKFwiL2EwIGdzIC9zMCBzaFwiLHtUeXBlOmsoXCJYT2JqZWN0XCIpLFN1YnR5cGU6ayhcIkZvcm1cIiksRm9ybVR5cGU6MSxCQm94OnQudXNlclNwYWNlP1tuLmxlZnQsbi50b3Arbi5oZWlnaHQsbi5sZWZ0K24ud2lkdGgsbi50b3BdOlswLDEsMSwwXSxHcm91cDp7VHlwZTprKFwiR3JvdXBcIiksUzprKFwiVHJhbnNwYXJlbmN5XCIpLENTOmsoXCJEZXZpY2VHcmF5XCIpLEk6ITB9LFJlc291cmNlczp7RXh0R1N0YXRlOnthMDp7Q0E6MSxjYToxfX0sU2hhZGluZzp7czA6e0NvbG9yU3BhY2U6ayhcIkRldmljZUdyYXlcIiksQ29vcmRzOm8sRG9tYWluOlswLDFdLFNoYWRpbmdUeXBlOmk/MzoyLEZ1bmN0aW9uOnIub3BhY2l0aWVzLEV4dGVuZDpbITAsITBdfX19fSkpfX06bnVsbDtyZXR1cm57aGFzQWxwaGE6ci5oYXNBbHBoYSxzaGFkaW5nOm5ldyBIKGEpLG9wYWNpdHk6bmV3IEgocyl9fWZ1bmN0aW9uIEQoZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBTPj1UfWZ1bmN0aW9uIG4oKXtyZXR1cm4gVD5TP2VbUysrXTowfWZ1bmN0aW9uIGkodCl7dyhTKSxlW1MrK109MjU1JnQsUz5UJiYoVD1TKX1mdW5jdGlvbiByKCl7cmV0dXJuIG4oKTw8OHxuKCl9ZnVuY3Rpb24gbyhlKXtpKGU+PjgpLGkoZSl9ZnVuY3Rpb24gYSgpe3ZhciBlPXIoKTtyZXR1cm4gZT49MzI3Njg/ZS02NTUzNjplfWZ1bmN0aW9uIHMoZSl7bygwPmU/ZSs2NTUzNjplKX1mdW5jdGlvbiBsKCl7cmV0dXJuIDY1NTM2KnIoKStyKCl9ZnVuY3Rpb24gYyhlKXtvKGU+Pj4xNiY2NTUzNSksbyg2NTUzNSZlKX1mdW5jdGlvbiBkKCl7dmFyIGU9bCgpO3JldHVybiBlPj0yMTQ3NDgzNjQ4P2UtNDI5NDk2NzI5NjplfWZ1bmN0aW9uIHUoZSl7YygwPmU/ZSs0Mjk0OTY3Mjk2OmUpfWZ1bmN0aW9uIGgoKXtyZXR1cm4gbCgpLzY1NTM2fWZ1bmN0aW9uIHAoZSl7YyhNYXRoLnJvdW5kKDY1NTM2KmUpKX1mdW5jdGlvbiBmKCl7cmV0dXJuIGQoKS82NTUzNn1mdW5jdGlvbiBnKGUpe3UoTWF0aC5yb3VuZCg2NTUzNiplKSl9ZnVuY3Rpb24gbShlKXtyZXR1cm4geShlLG4pfWZ1bmN0aW9uIHYoZSl7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLG0oZSkpfWZ1bmN0aW9uIF8oZSl7Zm9yKHZhciB0PTA7ZS5sZW5ndGg+dDsrK3QpaShlLmNoYXJDb2RlQXQodCkpfWZ1bmN0aW9uIHkoZSx0KXtmb3IodmFyIG49QXJyYXkoZSksaT0wO2U+aTsrK2kpbltpXT10KCk7cmV0dXJuIG59dmFyIHcsYixrLHgsQyxTPTAsVD0wO3JldHVybiBudWxsPT1lP2U9Sz9uZXcgVWludDhBcnJheSgyNTYpOltdOlQ9ZS5sZW5ndGgsdz1LP2Z1bmN0aW9uKHQpe2lmKHQ+PWUubGVuZ3RoKXt2YXIgbj1uZXcgVWludDhBcnJheShNYXRoLm1heCh0KzI1NiwyKmUubGVuZ3RoKSk7bi5zZXQoZSwwKSxlPW59fTpmdW5jdGlvbigpe30sYj1LP2Z1bmN0aW9uKCl7cmV0dXJuIG5ldyBVaW50OEFycmF5KGUuYnVmZmVyLDAsVCl9OmZ1bmN0aW9uKCl7cmV0dXJuIGV9LGs9Sz9mdW5jdGlvbih0KXtpZihcInN0cmluZ1wiPT10eXBlb2YgdClyZXR1cm4gXyh0KTt2YXIgbj10Lmxlbmd0aDt3KFMrbiksZS5zZXQodCxTKSxTKz1uLFM+VCYmKFQ9Uyl9OmZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXJldHVybiBfKGUpO1xuZm9yKHZhciB0PTA7ZS5sZW5ndGg+dDsrK3QpaShlW3RdKX0seD1LP2Z1bmN0aW9uKHQsbil7aWYoZS5idWZmZXIuc2xpY2UpcmV0dXJuIG5ldyBVaW50OEFycmF5KGUuYnVmZmVyLnNsaWNlKHQsdCtuKSk7dmFyIGk9bmV3IFVpbnQ4QXJyYXkobik7cmV0dXJuIGkuc2V0KG5ldyBVaW50OEFycmF5KGUuYnVmZmVyLHQsbikpLGl9OmZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuc2xpY2UodCx0K24pfSxDPXtlb2Y6dCxyZWFkQnl0ZTpuLHdyaXRlQnl0ZTppLHJlYWRTaG9ydDpyLHdyaXRlU2hvcnQ6byxyZWFkTG9uZzpsLHdyaXRlTG9uZzpjLHJlYWRGaXhlZDpoLHdyaXRlRml4ZWQ6cCxyZWFkU2hvcnRfOmEsd3JpdGVTaG9ydF86cyxyZWFkTG9uZ186ZCx3cml0ZUxvbmdfOnUscmVhZEZpeGVkXzpmLHdyaXRlRml4ZWRfOmcscmVhZDptLHdyaXRlOmsscmVhZFN0cmluZzp2LHdyaXRlU3RyaW5nOl8sdGltZXM6eSxnZXQ6YixzbGljZTp4LG9mZnNldDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT8oUz1lLEMpOlN9LHNraXA6ZnVuY3Rpb24oZSl7Uys9ZX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcihcIkZJWCBDQUxMRVIuICBCaW5hcnlTdHJlYW0gaXMgbm8gbG9uZ2VyIGNvbnZlcnRpYmxlIHRvIHN0cmluZyFcIil9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBUfSxzYXZlRXhjdXJzaW9uOmZ1bmN0aW9uKGUpe3ZhciB0PVM7dHJ5e3JldHVybiBlKCl9ZmluYWxseXtTPXR9fSx3cml0ZUJhc2U2NDpmdW5jdGlvbihlKXt3aW5kb3cuYXRvYj9fKHdpbmRvdy5hdG9iKGUpKTprKEouZGVjb2RlKGUpKX0sYmFzZTY0OmZ1bmN0aW9uKCl7cmV0dXJuIEouZW5jb2RlKGIoKSl9fX1mdW5jdGlvbiBBKGUpe3JldHVybiBlLnJlcGxhY2UoL15cXHMqKFsnXCJdKSguKilcXDFcXHMqJC8sXCIkMlwiKX1mdW5jdGlvbiBFKGUpe3ZhciB0LG49L15cXHMqKChub3JtYWx8aXRhbGljKVxccyspPygobm9ybWFsfHNtYWxsLWNhcHMpXFxzKyk/KChub3JtYWx8Ym9sZHxcXGQrKVxccyspPygoWzAtOS5dKykocHh8cHQpKShcXC8oKFswLTkuXSspKHB4fHB0KXxub3JtYWwpKT9cXHMrKC4qPylcXHMqJC9pLGk9bi5leGVjKGUpO3JldHVybiBpPyh0PWlbOF0/cGFyc2VJbnQoaVs4XSwxMCk6MTIse2l0YWxpYzppWzJdJiZcIml0YWxpY1wiPT1pWzJdLnRvTG93ZXJDYXNlKCksdmFyaWFudDppWzRdLGJvbGQ6aVs2XSYmL2JvbGR8NzAwL2kudGVzdChpWzZdKSxmb250U2l6ZTp0LGxpbmVIZWlnaHQ6aVsxMl0/XCJub3JtYWxcIj09aVsxMl0/dDpwYXJzZUludChpWzEyXSwxMCk6bnVsbCxmb250RmFtaWx5OmlbMTRdLnNwbGl0KC9cXHMqLFxccyovZykubWFwKEEpfSk6e2ZvbnRTaXplOjEyLGZvbnRGYW1pbHk6XCJzYW5zLXNlcmlmXCJ9fWZ1bmN0aW9uIE0oZSl7ZnVuY3Rpb24gdCh0KXtyZXR1cm4gZS5ib2xkJiYodCs9XCJ8Ym9sZFwiKSxlLml0YWxpYyYmKHQrPVwifGl0YWxpY1wiKSx0LnRvTG93ZXJDYXNlKCl9dmFyIG4saSxyLG89ZS5mb250RmFtaWx5O2lmKG8gaW5zdGFuY2VvZiBBcnJheSl7Zm9yKHI9MDtvLmxlbmd0aD5yOysrcilpZihuPXQob1tyXSksaT0kW25dKXJldHVybiBpfWVsc2UgaT0kW28udG9Mb3dlckNhc2UoKV07cmV0dXJuIGl8fChpPVwiVGltZXMtUm9tYW5cIiksaX1mdW5jdGlvbiBQKGUsdCl7aWYoMT09YXJndW1lbnRzLmxlbmd0aClmb3IodmFyIG4gaW4gZSlQKG4sZVtuXSk7ZWxzZSBlPWUudG9Mb3dlckNhc2UoKSwkW2VdPXR9ZnVuY3Rpb24gSShlLHQpe3ZhciBuPWVbMF0saT1lWzFdLHI9ZVsyXSxvPWVbM10sYT1lWzRdLHM9ZVs1XSxsPXRbMF0sYz10WzFdLGQ9dFsyXSx1PXRbM10saD10WzRdLHA9dFs1XTtyZXR1cm5bbipsK2kqZCxuKmMraSp1LHIqbCtvKmQscipjK28qdSxhKmwrcypkK2gsYSpjK3MqdStwXX1mdW5jdGlvbiB6KGUpe3JldHVybiAxPT09ZVswXSYmMD09PWVbMV0mJjA9PT1lWzJdJiYxPT09ZVszXSYmMD09PWVbNF0mJjA9PT1lWzVdfXZhciBGLFIsQixMLE8sSCxOLFYsVSxXLGosRyxxLCQsWT1lLmtlbmRvLEs9ISFlLlVpbnQ4QXJyYXksUT1cIlxcblwiLFg9MCxKPWZ1bmN0aW9uKCl7dmFyIGU9XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVwiO3JldHVybntkZWNvZGU6ZnVuY3Rpb24odCl7Zm9yKHZhciBuLGkscixvLGEscyxsLGM9dC5yZXBsYWNlKC9bXkEtWmEtejAtOVxcK1xcL1xcPV0vZyxcIlwiKSxkPTAsdT1jLmxlbmd0aCxoPVtdO3U+ZDspbj1lLmluZGV4T2YoYy5jaGFyQXQoZCsrKSksaT1lLmluZGV4T2YoYy5jaGFyQXQoZCsrKSkscj1lLmluZGV4T2YoYy5jaGFyQXQoZCsrKSksbz1lLmluZGV4T2YoYy5jaGFyQXQoZCsrKSksYT1uPDwyfGk+Pj40LHM9KDE1JmkpPDw0fHI+Pj4yLGw9KDMmcik8PDZ8byxoLnB1c2goYSksNjQhPXImJmgucHVzaChzKSw2NCE9byYmaC5wdXNoKGwpO3JldHVybiBofSxlbmNvZGU6ZnVuY3Rpb24odCl7Zm9yKHZhciBuLGkscixvLGEscyxsLGM9MCxkPXQubGVuZ3RoLHU9XCJcIjtkPmM7KW49dFtjKytdLGk9dFtjKytdLHI9dFtjKytdLG89bj4+PjIsYT0oMyZuKTw8NHxpPj4+NCxzPSgxNSZpKTw8MnxyPj4+NixsPTYzJnIsYy1kPT0yP3M9bD02NDpjLWQ9PTEmJihsPTY0KSx1Kz1lLmNoYXJBdChvKStlLmNoYXJBdChhKStlLmNoYXJBdChzKStlLmNoYXJBdChsKTtyZXR1cm4gdX19fSgpLFo9e2EwOlsyMzgzLjk0LDMzNzAuMzldLGExOlsxNjgzLjc4LDIzODMuOTRdLGEyOlsxMTkwLjU1LDE2ODMuNzhdLGEzOls4NDEuODksMTE5MC41NV0sYTQ6WzU5NS4yOCw4NDEuODldLGE1Ols0MTkuNTMsNTk1LjI4XSxhNjpbMjk3LjY0LDQxOS41M10sYTc6WzIwOS43NiwyOTcuNjRdLGE4OlsxNDcuNCwyMDkuNzZdLGE5OlsxMDQuODgsMTQ3LjRdLGExMDpbNzMuNywxMDQuODhdLGIwOlsyODM0LjY1LDQwMDguMTldLGIxOlsyMDA0LjA5LDI4MzQuNjVdLGIyOlsxNDE3LjMyLDIwMDQuMDldLGIzOlsxMDAwLjYzLDE0MTcuMzJdLGI0Ols3MDguNjYsMTAwMC42M10sYjU6WzQ5OC45LDcwOC42Nl0sYjY6WzM1NC4zMyw0OTguOV0sYjc6WzI0OS40NSwzNTQuMzNdLGI4OlsxNzUuNzUsMjQ5LjQ1XSxiOTpbMTI0LjcyLDE3NS43NV0sYjEwOls4Ny44NywxMjQuNzJdLGMwOlsyNTk5LjM3LDM2NzYuNTRdLGMxOlsxODM2Ljg1LDI1OTkuMzddLGMyOlsxMjk4LjI3LDE4MzYuODVdLGMzOls5MTguNDMsMTI5OC4yN10sYzQ6WzY0OS4xMyw5MTguNDNdLGM1Ols0NTkuMjEsNjQ5LjEzXSxjNjpbMzIzLjE1LDQ1OS4yMV0sYzc6WzIyOS42MSwzMjMuMTVdLGM4OlsxNjEuNTcsMjI5LjYxXSxjOTpbMTEzLjM5LDE2MS41N10sYzEwOls3OS4zNywxMTMuMzldLGV4ZWN1dGl2ZTpbNTIxLjg2LDc1Nl0sZm9saW86WzYxMiw5MzZdLGxlZ2FsOls2MTIsMTAwOF0sbGV0dGVyOls2MTIsNzkyXSx0YWJsb2lkOls3OTIsMTIyNF19LGV0PXtcIlRpbWVzLVJvbWFuXCI6ITAsXCJUaW1lcy1Cb2xkXCI6ITAsXCJUaW1lcy1JdGFsaWNcIjohMCxcIlRpbWVzLUJvbGRJdGFsaWNcIjohMCxIZWx2ZXRpY2E6ITAsXCJIZWx2ZXRpY2EtQm9sZFwiOiEwLFwiSGVsdmV0aWNhLU9ibGlxdWVcIjohMCxcIkhlbHZldGljYS1Cb2xkT2JsaXF1ZVwiOiEwLENvdXJpZXI6ITAsXCJDb3VyaWVyLUJvbGRcIjohMCxcIkNvdXJpZXItT2JsaXF1ZVwiOiEwLFwiQ291cmllci1Cb2xkT2JsaXF1ZVwiOiEwLFN5bWJvbDohMCxaYXBmRGluZ2JhdHM6ITB9LHR0PXt9LG50PWMocyksaXQ9YyhsKTtvLnByb3RvdHlwZT17bG9hZEZvbnRzOm50LGxvYWRJbWFnZXM6aXQsZ2V0Rm9udDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLkZPTlRTW2VdO2lmKCF0KXtpZih0PWV0W2VdLCF0KXRocm93IEVycm9yKFwiRm9udCBcIitlK1wiIGhhcyBub3QgYmVlbiBsb2FkZWRcIik7dD10aGlzLmF0dGFjaCh0PT09ITA/bmV3IFcoZSk6bmV3IGoodGhpcyx0KSksdGhpcy5GT05UU1tlXT10fXJldHVybiB0fSxnZXRJbWFnZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLklNQUdFU1tlXTtpZighdCl7aWYodD10dFtlXSwhdCl0aHJvdyBFcnJvcihcIkltYWdlIFwiK2UrXCIgaGFzIG5vdCBiZWVuIGxvYWRlZFwiKTtpZihcIlRBSU5URURcIj09PXQpcmV0dXJuIG51bGw7dD10aGlzLklNQUdFU1tlXT10aGlzLmF0dGFjaCh0LmFzU3RyZWFtKHRoaXMpKX1yZXR1cm4gdH0sZ2V0T3BhY2l0eUdTOmZ1bmN0aW9uKGUsbil7dmFyIGkscixvLGE9dChlKS50b0ZpeGVkKDMpO3JldHVybiBlPXQoYSksYSs9bj9cIlNcIjpcIkZcIixpPXRoaXMuX29wYWNpdHlHU0NhY2hlfHwodGhpcy5fb3BhY2l0eUdTQ2FjaGU9e30pLHI9aVthXSxyfHwobz17VHlwZTprKFwiRXh0R1N0YXRlXCIpfSxuP28uQ0E9ZTpvLmNhPWUscj10aGlzLmF0dGFjaChuZXcgSChvKSksci5fcmVzb3VyY2VOYW1lPWsoXCJHU1wiKyArK1gpLGlbYV09cikscn0sZGljdDpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IEgoZSl9LG5hbWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGsoZSl9LHN0cmVhbTpmdW5jdGlvbihlLHQpe3JldHVybiBuZXcgTih0LGUpfX0sRj1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIEFycmF5fSx3LnByb3RvdHlwZS5iZWZvcmVSZW5kZXI9ZnVuY3Rpb24oKXt9LFI9YihmdW5jdGlvbihlKXt0aGlzLnZhbHVlPWV9LHtyZW5kZXI6ZnVuY3Rpb24oZSl7dmFyIHQsbj1cIlwiLGk9dGhpcy5lc2NhcGUoKTtmb3IodD0wO2kubGVuZ3RoPnQ7Kyt0KW4rPVN0cmluZy5mcm9tQ2hhckNvZGUoMjU1JmkuY2hhckNvZGVBdCh0KSk7ZShcIihcIixuLFwiKVwiKX0sZXNjYXBlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWUucmVwbGFjZSgvKFtcXChcXClcXFxcXSkvZyxcIlxcXFwkMVwiKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZX19KSxCPWIoZnVuY3Rpb24oZSl7dGhpcy52YWx1ZT1lfSx7cmVuZGVyOmZ1bmN0aW9uKGUpe2UoXCI8XCIpO2Zvcih2YXIgdD0wO3RoaXMudmFsdWUubGVuZ3RoPnQ7Kyt0KWUodSh0aGlzLnZhbHVlLmNoYXJDb2RlQXQodCkudG9TdHJpbmcoMTYpLDQpKTtlKFwiPlwiKX19LFIpLEw9YihmdW5jdGlvbihlKXt0aGlzLm5hbWU9ZX0se3JlbmRlcjpmdW5jdGlvbihlKXtlKFwiL1wiK3RoaXMuZXNjYXBlKCkpfSxlc2NhcGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lLnJlcGxhY2UoL1teXFx4MjEtXFx4N0VdL2csZnVuY3Rpb24oZSl7cmV0dXJuXCIjXCIrdShlLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpLDIpfSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZX19KSxPPXt9LEwuZ2V0PWssSD1iKGZ1bmN0aW9uKGUpe3RoaXMucHJvcHM9ZX0se3JlbmRlcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnByb3BzLG49ITA7ZShcIjw8XCIpLGUud2l0aEluZGVudChmdW5jdGlvbigpe2Zvcih2YXIgaSBpbiB0KWgodCxpKSYmIS9eXy8udGVzdChpKSYmKG49ITEsZS5pbmRlbnQoayhpKSxcIiBcIix0W2ldKSl9KSxufHxlLmluZGVudCgpLGUoXCI+PlwiKX19KSxOPWIoZnVuY3Rpb24oZSx0LG4pe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXt2YXIgaT1EKCk7aS53cml0ZShlKSxlPWl9dGhpcy5kYXRhPWUsdGhpcy5wcm9wcz10fHx7fSx0aGlzLmNvbXByZXNzPW59LHtyZW5kZXI6ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5kYXRhLmdldCgpLGk9dGhpcy5wcm9wczt0aGlzLmNvbXByZXNzJiZlLnBha28mJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUucGFrby5kZWZsYXRlJiYoaS5GaWx0ZXI/aS5GaWx0ZXIgaW5zdGFuY2VvZiBBcnJheXx8KGkuRmlsdGVyPVtpLkZpbHRlcl0pOmkuRmlsdGVyPVtdLGkuRmlsdGVyLnVuc2hpZnQoayhcIkZsYXRlRGVjb2RlXCIpKSxuPWUucGFrby5kZWZsYXRlKG4pKSxpLkxlbmd0aD1uLmxlbmd0aCx0KG5ldyBIKGkpLFwiIHN0cmVhbVwiLFEpLHQud3JpdGVEYXRhKG4pLHQoUSxcImVuZHN0cmVhbVwiKX19KSxWPWIoZnVuY3Rpb24oZSl7ZT10aGlzLnByb3BzPWV8fHt9LGUuVHlwZT1rKFwiQ2F0YWxvZ1wiKX0se3NldFBhZ2VzOmZ1bmN0aW9uKGUpe3RoaXMucHJvcHMuUGFnZXM9ZX19LEgpLFU9YihmdW5jdGlvbihlKXt0aGlzLnByb3BzPXtUeXBlOmsoXCJQYWdlc1wiKSxLaWRzOltdLENvdW50OjAsTWVkaWFCb3g6ZX19LHthZGRQYWdlOmZ1bmN0aW9uKGUpe3RoaXMucHJvcHMuS2lkcy5wdXNoKGUpLHRoaXMucHJvcHMuQ291bnQrK319LEgpLFc9YihmdW5jdGlvbihlKXt0aGlzLnByb3BzPXtUeXBlOmsoXCJGb250XCIpLFN1YnR5cGU6ayhcIlR5cGUxXCIpLEJhc2VGb250OmsoZSl9LHRoaXMuX3Jlc291cmNlTmFtZT1rKFwiRlwiKyArK1gpfSx7ZW5jb2RlVGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IFIoZStcIlwiKX19LEgpLGo9YihmdW5jdGlvbihlLHQsbil7dmFyIGkscjtuPXRoaXMucHJvcHM9bnx8e30sbi5UeXBlPWsoXCJGb250XCIpLG4uU3VidHlwZT1rKFwiVHlwZTBcIiksbi5FbmNvZGluZz1rKFwiSWRlbnRpdHktSFwiKSx0aGlzLl9wZGY9ZSx0aGlzLl9mb250PXQsdGhpcy5fc3ViPXQubWFrZVN1YnNldCgpLHRoaXMuX3Jlc291cmNlTmFtZT1rKFwiRlwiKyArK1gpLGk9dC5oZWFkLHRoaXMubmFtZT10LnBzTmFtZSxyPXRoaXMuc2NhbGU9dC5zY2FsZSx0aGlzLmJib3g9W2kueE1pbipyLGkueU1pbipyLGkueE1heCpyLGkueU1heCpyXSx0aGlzLml0YWxpY0FuZ2xlPXQucG9zdC5pdGFsaWNBbmdsZSx0aGlzLmFzY2VudD10LmFzY2VudCpyLHRoaXMuZGVzY2VudD10LmRlc2NlbnQqcix0aGlzLmxpbmVHYXA9dC5saW5lR2FwKnIsdGhpcy5jYXBIZWlnaHQ9dC5vczIuY2FwSGVpZ2h0fHx0aGlzLmFzY2VudCx0aGlzLnhIZWlnaHQ9dC5vczIueEhlaWdodHx8MCx0aGlzLnN0ZW1WPTAsdGhpcy5mYW1pbHlDbGFzcz0odC5vczIuZmFtaWx5Q2xhc3N8fDApPj44LHRoaXMuaXNTZXJpZj10aGlzLmZhbWlseUNsYXNzPj0xJiY3Pj10aGlzLmZhbWlseUNsYXNzLHRoaXMuaXNTY3JpcHQ9MTA9PXRoaXMuZmFtaWx5Q2xhc3MsdGhpcy5mbGFncz0odC5wb3N0LmlzRml4ZWRQaXRjaD8xOjApfCh0aGlzLmlzU2VyaWY/MjowKXwodGhpcy5pc1NjcmlwdD84OjApfCgwIT09dGhpcy5pdGFsaWNBbmdsZT82NDowKXwzMn0se2VuY29kZVRleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBCKHRoaXMuX3N1Yi5lbmNvZGVUZXh0KGUrXCJcIikpfSxiZWZvcmVSZW5kZXI6ZnVuY3Rpb24oKXt2YXIgZSx0LG4scixvPXRoaXMsYT1vLl9zdWIscz1hLnJlbmRlcigpLGw9bmV3IE4oRChzKSx7TGVuZ3RoMTpzLmxlbmd0aH0sITApLGM9by5fcGRmLmF0dGFjaChuZXcgSCh7VHlwZTprKFwiRm9udERlc2NyaXB0b3JcIiksRm9udE5hbWU6ayhvLl9zdWIucHNOYW1lKSxGb250QkJveDpvLmJib3gsRmxhZ3M6by5mbGFncyxTdGVtVjpvLnN0ZW1WLEl0YWxpY0FuZ2xlOm8uaXRhbGljQW5nbGUsQXNjZW50Om8uYXNjZW50LERlc2NlbnQ6by5kZXNjZW50LENhcEhlaWdodDpvLmNhcEhlaWdodCxYSGVpZ2h0Om8ueEhlaWdodCxGb250RmlsZTI6by5fcGRmLmF0dGFjaChsKX0pKSxkPWEubmNpZDJvZ2lkLHU9YS5maXJzdENoYXIsaD1hLmxhc3RDaGFyLHA9W107IWZ1bmN0aW9uIGYoZSx0KXtpZihoPj1lKXt2YXIgbj1kW2VdO251bGw9PW4/ZihlKzEpOih0fHxwLnB1c2goZSx0PVtdKSx0LnB1c2goby5fZm9udC53aWR0aE9mR2x5cGgobikpLGYoZSsxLHQpKX19KHUpLGU9bmV3IEgoe1R5cGU6ayhcIkZvbnRcIiksU3VidHlwZTprKFwiQ0lERm9udFR5cGUyXCIpLEJhc2VGb250Omsoby5fc3ViLnBzTmFtZSksQ0lEU3lzdGVtSW5mbzpuZXcgSCh7UmVnaXN0cnk6bmV3IFIoXCJBZG9iZVwiKSxPcmRlcmluZzpuZXcgUihcIklkZW50aXR5XCIpLFN1cHBsZW1lbnQ6MH0pLEZvbnREZXNjcmlwdG9yOmMsRmlyc3RDaGFyOnUsTGFzdENoYXI6aCxEVzpNYXRoLnJvdW5kKG8uX2ZvbnQud2lkdGhPZkdseXBoKDApKSxXOnAsQ0lEVG9HSURNYXA6by5fcGRmLmF0dGFjaChvLl9tYWtlQ2lkVG9HaWRNYXAoKSl9KSx0PW8ucHJvcHMsdC5CYXNlRm9udD1rKG8uX3N1Yi5wc05hbWUpLHQuRGVzY2VuZGFudEZvbnRzPVtvLl9wZGYuYXR0YWNoKGUpXSxuPW5ldyBHKHUsaCxhLnN1YnNldCkscj1uZXcgTihpKCksbnVsbCwhMCksci5kYXRhKG4pLHQuVG9Vbmljb2RlPW8uX3BkZi5hdHRhY2gocil9LF9tYWtlQ2lkVG9HaWRNYXA6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE4oRCh0aGlzLl9zdWIuY2lkVG9HaWRNYXAoKSksbnVsbCwhMCl9fSxIKSxHPWIoZnVuY3Rpb24oZSx0LG4pe3RoaXMuZmlyc3RDaGFyPWUsdGhpcy5sYXN0Q2hhcj10LHRoaXMubWFwPW59LHtyZW5kZXI6ZnVuY3Rpb24oZSl7ZS5pbmRlbnQoXCIvQ0lESW5pdCAvUHJvY1NldCBmaW5kcmVzb3VyY2UgYmVnaW5cIiksZS5pbmRlbnQoXCIxMiBkaWN0IGJlZ2luXCIpLGUuaW5kZW50KFwiYmVnaW5jbWFwXCIpLGUuaW5kZW50KFwiL0NJRFN5c3RlbUluZm8gPDxcIiksZS5pbmRlbnQoXCIgIC9SZWdpc3RyeSAoQWRvYmUpXCIpLGUuaW5kZW50KFwiICAvT3JkZXJpbmcgKFVDUylcIiksZS5pbmRlbnQoXCIgIC9TdXBwbGVtZW50IDBcIiksZS5pbmRlbnQoXCI+PiBkZWZcIiksZS5pbmRlbnQoXCIvQ01hcE5hbWUgL0Fkb2JlLUlkZW50aXR5LVVDUyBkZWZcIiksZS5pbmRlbnQoXCIvQ01hcFR5cGUgMiBkZWZcIiksZS5pbmRlbnQoXCIxIGJlZ2luY29kZXNwYWNlcmFuZ2VcIiksZS5pbmRlbnQoXCIgIDwwMDAwPjxmZmZmPlwiKSxlLmluZGVudChcImVuZGNvZGVzcGFjZXJhbmdlXCIpO3ZhciB0PXRoaXM7ZS5pbmRlbnQodC5sYXN0Q2hhci10LmZpcnN0Q2hhcisxLFwiIGJlZ2luYmZjaGFyXCIpLGUud2l0aEluZGVudChmdW5jdGlvbigpe3ZhciBuLGk7Zm9yKG49dC5maXJzdENoYXI7dC5sYXN0Q2hhcj49bjsrK24paT10Lm1hcFtuXSxlLmluZGVudChcIjxcIix1KG4udG9TdHJpbmcoMTYpLDQpLFwiPlwiLFwiPFwiLHUoaS50b1N0cmluZygxNiksNCksXCI+XCIpfSksZS5pbmRlbnQoXCJlbmRiZmNoYXJcIiksZS5pbmRlbnQoXCJlbmRjbWFwXCIpLGUuaW5kZW50KFwiQ01hcE5hbWUgY3VycmVudGRpY3QgL0NNYXAgZGVmaW5lcmVzb3VyY2UgcG9wXCIpLGUuaW5kZW50KFwiZW5kXCIpLGUuaW5kZW50KFwiZW5kXCIpfX0pLHE9YihmdW5jdGlvbihlLHQpe3RoaXMuX3BkZj1lLHRoaXMuX3Jjb3VudD0wLHRoaXMuX3RleHRNb2RlPSExLHRoaXMuX2ZvbnRSZXNvdXJjZXM9e30sdGhpcy5fZ3NSZXNvdXJjZXM9e30sdGhpcy5feFJlc291cmNlcz17fSx0aGlzLl9wYXRSZXNvdXJjZXM9e30sdGhpcy5fc2hSZXNvdXJjZXM9e30sdGhpcy5fb3BhY2l0eT0xLHRoaXMuX21hdHJpeD1bMSwwLDAsMSwwLDBdLHRoaXMuX2ZvbnQ9bnVsbCx0aGlzLl9mb250U2l6ZT1udWxsLHRoaXMuX2NvbnRleHRTdGFjaz1bXSx0PXRoaXMucHJvcHM9dHx8e30sdC5UeXBlPWsoXCJQYWdlXCIpLHQuUHJvY1NldD1bayhcIlBERlwiKSxrKFwiVGV4dFwiKSxrKFwiSW1hZ2VCXCIpLGsoXCJJbWFnZUNcIiksayhcIkltYWdlSVwiKV0sdC5SZXNvdXJjZXM9bmV3IEgoe0ZvbnQ6bmV3IEgodGhpcy5fZm9udFJlc291cmNlcyksRXh0R1N0YXRlOm5ldyBIKHRoaXMuX2dzUmVzb3VyY2VzKSxYT2JqZWN0Om5ldyBIKHRoaXMuX3hSZXNvdXJjZXMpLFBhdHRlcm46bmV3IEgodGhpcy5fcGF0UmVzb3VyY2VzKSxTaGFkaW5nOm5ldyBIKHRoaXMuX3NoUmVzb3VyY2VzKX0pfSx7X291dDpmdW5jdGlvbigpe3RoaXMuX2NvbnRlbnQuZGF0YS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHRyYW5zZm9ybTpmdW5jdGlvbihlLHQsbixpLHIsbyl7eihhcmd1bWVudHMpfHwodGhpcy5fbWF0cml4PUkodGhpcy5fbWF0cml4LGFyZ3VtZW50cyksdGhpcy5fb3V0KGUsXCIgXCIsdCxcIiBcIixuLFwiIFwiLGksXCIgXCIscixcIiBcIixvLFwiIGNtXCIpLHRoaXMuX291dChRKSl9LHRyYW5zbGF0ZTpmdW5jdGlvbihlLHQpe3RoaXMudHJhbnNmb3JtKDEsMCwwLDEsZSx0KX0sc2NhbGU6ZnVuY3Rpb24oZSx0KXt0aGlzLnRyYW5zZm9ybShlLDAsMCx0LDAsMCl9LHJvdGF0ZTpmdW5jdGlvbihlKXt2YXIgdD1NYXRoLmNvcyhlKSxuPU1hdGguc2luKGUpO3RoaXMudHJhbnNmb3JtKHQsbiwtbix0LDAsMCl9LGJlZ2luVGV4dDpmdW5jdGlvbigpe3RoaXMuX3RleHRNb2RlPSEwLHRoaXMuX291dChcIkJUXCIsUSl9LGVuZFRleHQ6ZnVuY3Rpb24oKXt0aGlzLl90ZXh0TW9kZT0hMSx0aGlzLl9vdXQoXCJFVFwiLFEpfSxfcmVxdWlyZVRleHRNb2RlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3RleHRNb2RlKXRocm93IEVycm9yKFwiVGV4dCBtb2RlIHJlcXVpcmVkOyBjYWxsIHBhZ2UuYmVnaW5UZXh0KCkgZmlyc3RcIil9LF9yZXF1aXJlRm9udDpmdW5jdGlvbigpe2lmKCF0aGlzLl9mb250KXRocm93IEVycm9yKFwiTm8gZm9udCBzZWxlY3RlZDsgY2FsbCBwYWdlLnNldEZvbnQoKSBmaXJzdFwiKX0sc2V0Rm9udDpmdW5jdGlvbihlLHQpe3RoaXMuX3JlcXVpcmVUZXh0TW9kZSgpLG51bGw9PWU/ZT10aGlzLl9mb250OmUgaW5zdGFuY2VvZiBqfHwoZT10aGlzLl9wZGYuZ2V0Rm9udChlKSksbnVsbD09dCYmKHQ9dGhpcy5fZm9udFNpemUpLHRoaXMuX2ZvbnRSZXNvdXJjZXNbZS5fcmVzb3VyY2VOYW1lXT1lLHRoaXMuX2ZvbnQ9ZSx0aGlzLl9mb250U2l6ZT10LHRoaXMuX291dChlLl9yZXNvdXJjZU5hbWUsXCIgXCIsdCxcIiBUZlwiLFEpfSxzZXRUZXh0TGVhZGluZzpmdW5jdGlvbihlKXt0aGlzLl9yZXF1aXJlVGV4dE1vZGUoKSx0aGlzLl9vdXQoZSxcIiBUTFwiLFEpfSxzZXRUZXh0UmVuZGVyaW5nTW9kZTpmdW5jdGlvbihlKXt0aGlzLl9yZXF1aXJlVGV4dE1vZGUoKSx0aGlzLl9vdXQoZSxcIiBUclwiLFEpfSxzaG93VGV4dDpmdW5jdGlvbihlKXt0aGlzLl9yZXF1aXJlRm9udCgpLHRoaXMuX291dCh0aGlzLl9mb250LmVuY29kZVRleHQoZSksXCIgVGpcIixRKX0sc2hvd1RleHROTDpmdW5jdGlvbihlKXt0aGlzLl9yZXF1aXJlRm9udCgpLHRoaXMuX291dCh0aGlzLl9mb250LmVuY29kZVRleHQoZSksXCIgJ1wiLFEpfSxzZXRTdHJva2VDb2xvcjpmdW5jdGlvbihlLHQsbil7dGhpcy5fb3V0KGUsXCIgXCIsdCxcIiBcIixuLFwiIFJHXCIsUSl9LHNldE9wYWNpdHk6ZnVuY3Rpb24oZSl7dGhpcy5zZXRGaWxsT3BhY2l0eShlKSx0aGlzLnNldFN0cm9rZU9wYWNpdHkoZSksdGhpcy5fb3BhY2l0eSo9ZX0sc2V0U3Ryb2tlT3BhY2l0eTpmdW5jdGlvbihlKXtpZigxPmUpe3ZhciB0PXRoaXMuX3BkZi5nZXRPcGFjaXR5R1ModGhpcy5fb3BhY2l0eSplLCEwKTt0aGlzLl9nc1Jlc291cmNlc1t0Ll9yZXNvdXJjZU5hbWVdPXQsdGhpcy5fb3V0KHQuX3Jlc291cmNlTmFtZSxcIiBnc1wiLFEpfX0sc2V0RmlsbENvbG9yOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLl9vdXQoZSxcIiBcIix0LFwiIFwiLG4sXCIgcmdcIixRKX0sc2V0RmlsbE9wYWNpdHk6ZnVuY3Rpb24oZSl7aWYoMT5lKXt2YXIgdD10aGlzLl9wZGYuZ2V0T3BhY2l0eUdTKHRoaXMuX29wYWNpdHkqZSwhMSk7dGhpcy5fZ3NSZXNvdXJjZXNbdC5fcmVzb3VyY2VOYW1lXT10LHRoaXMuX291dCh0Ll9yZXNvdXJjZU5hbWUsXCIgZ3NcIixRKX19LGdyYWRpZW50OmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyO3RoaXMuc2F2ZSgpLHRoaXMucmVjdCh0LmxlZnQsdC50b3AsdC53aWR0aCx0LmhlaWdodCksdGhpcy5jbGlwKCksZS51c2VyU3BhY2V8fHRoaXMudHJhbnNmb3JtKHQud2lkdGgsMCwwLHQuaGVpZ2h0LHQubGVmdCx0LnRvcCksbj1UKHRoaXMuX3BkZixlLHQpLGk9XCJTXCIrICsrWCx0aGlzLl9zaFJlc291cmNlc1tpXT10aGlzLl9wZGYuYXR0YWNoKG4uc2hhZGluZyksbi5oYXNBbHBoYSYmKHI9XCJPXCIrICsrWCx0aGlzLl9nc1Jlc291cmNlc1tyXT10aGlzLl9wZGYuYXR0YWNoKG4ub3BhY2l0eSksdGhpcy5fb3V0KFwiL1wiK3IrXCIgZ3MgXCIpKSx0aGlzLl9vdXQoXCIvXCIraStcIiBzaFwiLFEpLHRoaXMucmVzdG9yZSgpfSxzZXREYXNoUGF0dGVybjpmdW5jdGlvbihlLHQpe3RoaXMuX291dChlLFwiIFwiLHQsXCIgZFwiLFEpfSxzZXRMaW5lV2lkdGg6ZnVuY3Rpb24oZSl7dGhpcy5fb3V0KGUsXCIgd1wiLFEpfSxzZXRMaW5lQ2FwOmZ1bmN0aW9uKGUpe3RoaXMuX291dChlLFwiIEpcIixRKX0sc2V0TGluZUpvaW46ZnVuY3Rpb24oZSl7dGhpcy5fb3V0KGUsXCIgalwiLFEpfSxzZXRNaXR0ZXJMaW1pdDpmdW5jdGlvbihlKXt0aGlzLl9vdXQoZSxcIiBNXCIsUSl9LHNhdmU6ZnVuY3Rpb24oKXt0aGlzLl9jb250ZXh0U3RhY2sucHVzaCh0aGlzLl9jb250ZXh0KCkpLHRoaXMuX291dChcInFcIixRKX0scmVzdG9yZTpmdW5jdGlvbigpe3RoaXMuX291dChcIlFcIixRKSx0aGlzLl9jb250ZXh0KHRoaXMuX2NvbnRleHRTdGFjay5wb3AoKSl9LG1vdmVUbzpmdW5jdGlvbihlLHQpe3RoaXMuX291dChlLFwiIFwiLHQsXCIgbVwiLFEpfSxsaW5lVG86ZnVuY3Rpb24oZSx0KXt0aGlzLl9vdXQoZSxcIiBcIix0LFwiIGxcIixRKX0sYmV6aWVyOmZ1bmN0aW9uKGUsdCxuLGkscixvKXt0aGlzLl9vdXQoZSxcIiBcIix0LFwiIFwiLG4sXCIgXCIsaSxcIiBcIixyLFwiIFwiLG8sXCIgY1wiLFEpfSxiZXppZXIxOmZ1bmN0aW9uKGUsdCxuLGkpe3RoaXMuX291dChlLFwiIFwiLHQsXCIgXCIsbixcIiBcIixpLFwiIHlcIixRKX0sYmV6aWVyMjpmdW5jdGlvbihlLHQsbixpKXt0aGlzLl9vdXQoZSxcIiBcIix0LFwiIFwiLG4sXCIgXCIsaSxcIiB2XCIsUSl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5fb3V0KFwiaFwiLFEpfSxyZWN0OmZ1bmN0aW9uKGUsdCxuLGkpe3RoaXMuX291dChlLFwiIFwiLHQsXCIgXCIsbixcIiBcIixpLFwiIHJlXCIsUSl9LGVsbGlwc2U6ZnVuY3Rpb24oZSx0LG4saSl7ZnVuY3Rpb24gcih0KXtyZXR1cm4gZSt0fWZ1bmN0aW9uIG8oZSl7cmV0dXJuIHQrZX12YXIgYT0uNTUyMjg0NzQ5ODMwNzkzNjt0aGlzLm1vdmVUbyhyKDApLG8oaSkpLHRoaXMuYmV6aWVyKHIobiphKSxvKGkpLHIobiksbyhpKmEpLHIobiksbygwKSksdGhpcy5iZXppZXIocihuKSxvKC1pKmEpLHIobiphKSxvKC1pKSxyKDApLG8oLWkpKSx0aGlzLmJlemllcihyKC1uKmEpLG8oLWkpLHIoLW4pLG8oLWkqYSkscigtbiksbygwKSksdGhpcy5iZXppZXIocigtbiksbyhpKmEpLHIoLW4qYSksbyhpKSxyKDApLG8oaSkpfSxjaXJjbGU6ZnVuY3Rpb24oZSx0LG4pe3RoaXMuZWxsaXBzZShlLHQsbixuKX0sc3Ryb2tlOmZ1bmN0aW9uKCl7dGhpcy5fb3V0KFwiU1wiLFEpfSxub3A6ZnVuY3Rpb24oKXt0aGlzLl9vdXQoXCJuXCIsUSl9LGNsaXA6ZnVuY3Rpb24oKXt0aGlzLl9vdXQoXCJXIG5cIixRKX0sY2xvc2VTdHJva2U6ZnVuY3Rpb24oKXt0aGlzLl9vdXQoXCJzXCIsUSl9LGZpbGw6ZnVuY3Rpb24oKXt0aGlzLl9vdXQoXCJmXCIsUSl9LGZpbGxTdHJva2U6ZnVuY3Rpb24oKXt0aGlzLl9vdXQoXCJCXCIsUSl9LGRyYXdJbWFnZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9wZGYuZ2V0SW1hZ2UoZSk7dCYmKHRoaXMuX3hSZXNvdXJjZXNbdC5fcmVzb3VyY2VOYW1lXT10LHRoaXMuX291dCh0Ll9yZXNvdXJjZU5hbWUsXCIgRG9cIixRKSl9LGNvbW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLnNwbGl0KC9cXHI/XFxuL2cpLmZvckVhY2goZnVuY3Rpb24oZSl7dC5fb3V0KFwiJSBcIixlLFEpfSl9LF9jb250ZXh0OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP3tvcGFjaXR5OnRoaXMuX29wYWNpdHksbWF0cml4OnRoaXMuX21hdHJpeH06KHRoaXMuX29wYWNpdHk9ZS5vcGFjaXR5LHRoaXMuX21hdHJpeD1lLm1hdHJpeCxuKX19LEgpLCQ9e3NlcmlmOlwiVGltZXMtUm9tYW5cIixcInNlcmlmfGJvbGRcIjpcIlRpbWVzLUJvbGRcIixcInNlcmlmfGl0YWxpY1wiOlwiVGltZXMtSXRhbGljXCIsXCJzZXJpZnxib2xkfGl0YWxpY1wiOlwiVGltZXMtQm9sZEl0YWxpY1wiLFwic2Fucy1zZXJpZlwiOlwiSGVsdmV0aWNhXCIsXCJzYW5zLXNlcmlmfGJvbGRcIjpcIkhlbHZldGljYS1Cb2xkXCIsXCJzYW5zLXNlcmlmfGl0YWxpY1wiOlwiSGVsdmV0aWNhLU9ibGlxdWVcIixcInNhbnMtc2VyaWZ8Ym9sZHxpdGFsaWNcIjpcIkhlbHZldGljYS1Cb2xkT2JsaXF1ZVwiLG1vbm9zcGFjZTpcIkNvdXJpZXJcIixcIm1vbm9zcGFjZXxib2xkXCI6XCJDb3VyaWVyLUJvbGRcIixcIm1vbm9zcGFjZXxpdGFsaWNcIjpcIkNvdXJpZXItT2JsaXF1ZVwiLFwibW9ub3NwYWNlfGJvbGR8aXRhbGljXCI6XCJDb3VyaWVyLUJvbGRPYmxpcXVlXCJ9LFkucGRmPXtEb2N1bWVudDpvLEJpbmFyeVN0cmVhbTpELGRlZmluZUZvbnQ6UCxwYXJzZUZvbnREZWY6RSxnZXRGb250VVJMOk0sbG9hZEZvbnRzOm50LGxvYWRJbWFnZXM6aXQsVEVYVF9SRU5ERVJJTkdfTU9ERTp7ZmlsbDowLHN0cm9rZToxLGZpbGxBbmRTdHJva2U6MixpbnZpc2libGU6MyxmaWxsQW5kQ2xpcDo0LHN0cm9rZUFuZENsaXA6NSxmaWxsU3Ryb2tlQ2xpcDo2LGNsaXA6N319fSh0aGlzLHBhcnNlRmxvYXQpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9ZnVuY3Rpb24gbihlKXtyZXR1cm4gT2JqZWN0LmtleXMoZSkuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBlLXR9KS5tYXAocGFyc2VGbG9hdCl9ZnVuY3Rpb24gaShlKXt2YXIgdCxuLGk7Zm9yKHRoaXMucmF3PWUsdGhpcy5zY2FsZXJUeXBlPWUucmVhZExvbmcoKSx0aGlzLnRhYmxlQ291bnQ9ZS5yZWFkU2hvcnQoKSx0aGlzLnNlYXJjaFJhbmdlPWUucmVhZFNob3J0KCksdGhpcy5lbnRyeVNlbGVjdG9yPWUucmVhZFNob3J0KCksdGhpcy5yYW5nZVNoaWZ0PWUucmVhZFNob3J0KCksdD10aGlzLnRhYmxlcz17fSxuPTA7dGhpcy50YWJsZUNvdW50Pm47KytuKWk9e3RhZzplLnJlYWRTdHJpbmcoNCksY2hlY2tzdW06ZS5yZWFkTG9uZygpLG9mZnNldDplLnJlYWRMb25nKCksbGVuZ3RoOmUucmVhZExvbmcoKX0sdFtpLnRhZ109aX1mdW5jdGlvbiByKGUpe2Z1bmN0aW9uIG4oZSx0KXt0aGlzLmRlZmluaXRpb249dCx0aGlzLmxlbmd0aD10Lmxlbmd0aCx0aGlzLm9mZnNldD10Lm9mZnNldCx0aGlzLmZpbGU9ZSx0aGlzLnJhd0RhdGE9ZS5yYXcsdGhpcy5wYXJzZShlLnJhdyl9bi5wcm90b3R5cGUucmF3PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmF3RGF0YS5zbGljZSh0aGlzLm9mZnNldCx0aGlzLmxlbmd0aCl9O2Zvcih2YXIgaSBpbiBlKXQoZSxpKSYmKG5baV09bi5wcm90b3R5cGVbaV09ZVtpXSk7cmV0dXJuIG59ZnVuY3Rpb24gbygpe3ZhciBlLHQ9XCJcIixuPV8rXCJcIjtmb3IoZT0wO24ubGVuZ3RoPmU7KytlKXQrPVN0cmluZy5mcm9tQ2hhckNvZGUobi5jaGFyQ29kZUF0KGUpLTQ4KzY1KTtyZXR1cm4rK18sdH1mdW5jdGlvbiBhKGUpe3RoaXMuZm9udD1lLHRoaXMuc3Vic2V0PXt9LHRoaXMudW5pY29kZXM9e30sdGhpcy5vZ2lkMm5naWQ9ezA6MH0sdGhpcy5uZ2lkMm9naWQ9ezA6MH0sdGhpcy5uY2lkMm9naWQ9e30sdGhpcy5uZXh0PXRoaXMuZmlyc3RDaGFyPTEsdGhpcy5uZXh0R2lkPTEsdGhpcy5wc05hbWU9bygpK1wiK1wiK3RoaXMuZm9udC5wc05hbWV9ZnVuY3Rpb24gcyhlLHQpe3ZhciBuLGkscixvLGE9dGhpcyxzPWEuY29udGVudHM9dyhlKTtpZihcInR0Y2ZcIj09cy5yZWFkU3RyaW5nKDQpKXtpZighdCl0aHJvdyBFcnJvcihcIk11c3Qgc3BlY2lmeSBhIG5hbWUgZm9yIFRUQyBmaWxlc1wiKTtmb3Iobj1zLnJlYWRMb25nKCksaT1zLnJlYWRMb25nKCkscj0wO2k+cjsrK3IpaWYobz1zLnJlYWRMb25nKCkscy5zYXZlRXhjdXJzaW9uKGZ1bmN0aW9uKCl7cy5vZmZzZXQobyksYS5wYXJzZSgpfSksYS5wc05hbWU9PXQpcmV0dXJuO3Rocm93IEVycm9yKFwiRm9udCBcIit0K1wiIG5vdCBmb3VuZCBpbiBjb2xsZWN0aW9uXCIpfXMub2Zmc2V0KDApLGEucGFyc2UoKX12YXIgbCxjLGQsdSxoLHAsZixnLG0sdixfLHk9ZS5rZW5kby5wZGYsdz15LkJpbmFyeVN0cmVhbTtpLnByb3RvdHlwZT17cmVhZFRhYmxlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy50YWJsZXNbZV07aWYoIW4pdGhyb3cgRXJyb3IoXCJUYWJsZSBcIitlK1wiIG5vdCBmb3VuZCBpbiBkaXJlY3RvcnlcIik7cmV0dXJuIHRoaXNbZV09bi50YWJsZT1uZXcgdCh0aGlzLG4pfSxyZW5kZXI6ZnVuY3Rpb24oZSl7dmFyIG4saSxyLG8sYSxzLGwsYyxkPU9iamVjdC5rZXlzKGUpLmxlbmd0aCx1PU1hdGgucG93KDIsTWF0aC5mbG9vcihNYXRoLmxvZyhkKS9NYXRoLkxOMikpLGg9MTYqdSxwPU1hdGguZmxvb3IoTWF0aC5sb2codSkvTWF0aC5MTjIpLGY9MTYqZC1oLGc9dygpO2cud3JpdGVMb25nKHRoaXMuc2NhbGVyVHlwZSksZy53cml0ZVNob3J0KGQpLGcud3JpdGVTaG9ydChoKSxnLndyaXRlU2hvcnQocCksZy53cml0ZVNob3J0KGYpLG49MTYqZCxpPWcub2Zmc2V0KCkrbixyPW51bGwsbz13KCk7Zm9yKGEgaW4gZSlpZih0KGUsYSkpZm9yKHM9ZVthXSxnLndyaXRlU3RyaW5nKGEpLGcud3JpdGVMb25nKHRoaXMuY2hlY2tzdW0ocykpLGcud3JpdGVMb25nKGkpLGcud3JpdGVMb25nKHMubGVuZ3RoKSxvLndyaXRlKHMpLFwiaGVhZFwiPT1hJiYocj1pKSxpKz1zLmxlbmd0aDtpJTQ7KW8ud3JpdGVCeXRlKDApLGkrKztyZXR1cm4gZy53cml0ZShvLmdldCgpKSxsPXRoaXMuY2hlY2tzdW0oZy5nZXQoKSksYz0yOTgxMTQ2NTU0LWwsZy5vZmZzZXQocis4KSxnLndyaXRlTG9uZyhjKSxnLmdldCgpfSxjaGVja3N1bTpmdW5jdGlvbihlKXtlPXcoZSk7Zm9yKHZhciB0PTA7IWUuZW9mKCk7KXQrPWUucmVhZExvbmcoKTtyZXR1cm4gNDI5NDk2NzI5NSZ0fX0sbD1yKHtwYXJzZTpmdW5jdGlvbihlKXtlLm9mZnNldCh0aGlzLm9mZnNldCksdGhpcy52ZXJzaW9uPWUucmVhZExvbmcoKSx0aGlzLnJldmlzaW9uPWUucmVhZExvbmcoKSx0aGlzLmNoZWNrU3VtQWRqdXN0bWVudD1lLnJlYWRMb25nKCksdGhpcy5tYWdpY051bWJlcj1lLnJlYWRMb25nKCksdGhpcy5mbGFncz1lLnJlYWRTaG9ydCgpLHRoaXMudW5pdHNQZXJFbT1lLnJlYWRTaG9ydCgpLHRoaXMuY3JlYXRlZD1lLnJlYWQoOCksdGhpcy5tb2RpZmllZD1lLnJlYWQoOCksdGhpcy54TWluPWUucmVhZFNob3J0XygpLHRoaXMueU1pbj1lLnJlYWRTaG9ydF8oKSx0aGlzLnhNYXg9ZS5yZWFkU2hvcnRfKCksdGhpcy55TWF4PWUucmVhZFNob3J0XygpLHRoaXMubWFjU3R5bGU9ZS5yZWFkU2hvcnQoKSx0aGlzLmxvd2VzdFJlY1BQRU09ZS5yZWFkU2hvcnQoKSx0aGlzLmZvbnREaXJlY3Rpb25IaW50PWUucmVhZFNob3J0XygpLHRoaXMuaW5kZXhUb0xvY0Zvcm1hdD1lLnJlYWRTaG9ydF8oKSx0aGlzLmdseXBoRGF0YUZvcm1hdD1lLnJlYWRTaG9ydF8oKX0scmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXcoKTtyZXR1cm4gdC53cml0ZUxvbmcodGhpcy52ZXJzaW9uKSx0LndyaXRlTG9uZyh0aGlzLnJldmlzaW9uKSx0LndyaXRlTG9uZygwKSx0LndyaXRlTG9uZyh0aGlzLm1hZ2ljTnVtYmVyKSx0LndyaXRlU2hvcnQodGhpcy5mbGFncyksdC53cml0ZVNob3J0KHRoaXMudW5pdHNQZXJFbSksdC53cml0ZSh0aGlzLmNyZWF0ZWQpLHQud3JpdGUodGhpcy5tb2RpZmllZCksdC53cml0ZVNob3J0Xyh0aGlzLnhNaW4pLHQud3JpdGVTaG9ydF8odGhpcy55TWluKSx0LndyaXRlU2hvcnRfKHRoaXMueE1heCksdC53cml0ZVNob3J0Xyh0aGlzLnlNYXgpLHQud3JpdGVTaG9ydCh0aGlzLm1hY1N0eWxlKSx0LndyaXRlU2hvcnQodGhpcy5sb3dlc3RSZWNQUEVNKSx0LndyaXRlU2hvcnRfKHRoaXMuZm9udERpcmVjdGlvbkhpbnQpLHQud3JpdGVTaG9ydF8oZSksdC53cml0ZVNob3J0Xyh0aGlzLmdseXBoRGF0YUZvcm1hdCksdC5nZXQoKX19KSxjPXIoe3BhcnNlOmZ1bmN0aW9uKGUpe2Uub2Zmc2V0KHRoaXMub2Zmc2V0KTt2YXIgdD10aGlzLmZpbGUuaGVhZC5pbmRleFRvTG9jRm9ybWF0O3RoaXMub2Zmc2V0cz0wPT09dD9lLnRpbWVzKHRoaXMubGVuZ3RoLzIsZnVuY3Rpb24oKXtyZXR1cm4gMiplLnJlYWRTaG9ydCgpfSk6ZS50aW1lcyh0aGlzLmxlbmd0aC80LGUucmVhZExvbmcpfSxvZmZzZXRPZjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vZmZzZXRzW2VdfSxsZW5ndGhPZjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vZmZzZXRzW2UrMV0tdGhpcy5vZmZzZXRzW2VdfSxyZW5kZXI6ZnVuY3Rpb24oZSl7dmFyIHQsbj13KCksaT1lW2UubGVuZ3RoLTFdPjY1NTM1O2Zvcih0PTA7ZS5sZW5ndGg+dDsrK3QpaT9uLndyaXRlTG9uZyhlW3RdKTpuLndyaXRlU2hvcnQoZVt0XS8yKTtyZXR1cm57Zm9ybWF0Omk/MTowLHRhYmxlOm4uZ2V0KCl9fX0pLGQ9cih7cGFyc2U6ZnVuY3Rpb24oZSl7ZS5vZmZzZXQodGhpcy5vZmZzZXQpLHRoaXMudmVyc2lvbj1lLnJlYWRMb25nKCksdGhpcy5hc2NlbnQ9ZS5yZWFkU2hvcnRfKCksdGhpcy5kZXNjZW50PWUucmVhZFNob3J0XygpLHRoaXMubGluZUdhcD1lLnJlYWRTaG9ydF8oKSx0aGlzLmFkdmFuY2VXaWR0aE1heD1lLnJlYWRTaG9ydCgpLHRoaXMubWluTGVmdFNpZGVCZWFyaW5nPWUucmVhZFNob3J0XygpLHRoaXMubWluUmlnaHRTaWRlQmVhcmluZz1lLnJlYWRTaG9ydF8oKSx0aGlzLnhNYXhFeHRlbnQ9ZS5yZWFkU2hvcnRfKCksdGhpcy5jYXJldFNsb3BlUmlzZT1lLnJlYWRTaG9ydF8oKSx0aGlzLmNhcmV0U2xvcGVSdW49ZS5yZWFkU2hvcnRfKCksdGhpcy5jYXJldE9mZnNldD1lLnJlYWRTaG9ydF8oKSxlLnNraXAoOCksdGhpcy5tZXRyaWNEYXRhRm9ybWF0PWUucmVhZFNob3J0XygpLHRoaXMubnVtT2ZMb25nSG9yTWV0cmljcz1lLnJlYWRTaG9ydCgpfSxyZW5kZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dygpO3JldHVybiB0LndyaXRlTG9uZyh0aGlzLnZlcnNpb24pLHQud3JpdGVTaG9ydF8odGhpcy5hc2NlbnQpLHQud3JpdGVTaG9ydF8odGhpcy5kZXNjZW50KSx0LndyaXRlU2hvcnRfKHRoaXMubGluZUdhcCksdC53cml0ZVNob3J0KHRoaXMuYWR2YW5jZVdpZHRoTWF4KSx0LndyaXRlU2hvcnRfKHRoaXMubWluTGVmdFNpZGVCZWFyaW5nKSx0LndyaXRlU2hvcnRfKHRoaXMubWluUmlnaHRTaWRlQmVhcmluZyksdC53cml0ZVNob3J0Xyh0aGlzLnhNYXhFeHRlbnQpLHQud3JpdGVTaG9ydF8odGhpcy5jYXJldFNsb3BlUmlzZSksdC53cml0ZVNob3J0Xyh0aGlzLmNhcmV0U2xvcGVSdW4pLHQud3JpdGVTaG9ydF8odGhpcy5jYXJldE9mZnNldCksdC53cml0ZShbMCwwLDAsMCwwLDAsMCwwXSksdC53cml0ZVNob3J0Xyh0aGlzLm1ldHJpY0RhdGFGb3JtYXQpLHQud3JpdGVTaG9ydChlLmxlbmd0aCksdC5nZXQoKX19KSx1PXIoe3BhcnNlOmZ1bmN0aW9uKGUpe2Uub2Zmc2V0KHRoaXMub2Zmc2V0KSx0aGlzLnZlcnNpb249ZS5yZWFkTG9uZygpLHRoaXMubnVtR2x5cGhzPWUucmVhZFNob3J0KCksdGhpcy5tYXhQb2ludHM9ZS5yZWFkU2hvcnQoKSx0aGlzLm1heENvbnRvdXJzPWUucmVhZFNob3J0KCksdGhpcy5tYXhDb21wb25lbnRQb2ludHM9ZS5yZWFkU2hvcnQoKSx0aGlzLm1heENvbXBvbmVudENvbnRvdXJzPWUucmVhZFNob3J0KCksdGhpcy5tYXhab25lcz1lLnJlYWRTaG9ydCgpLHRoaXMubWF4VHdpbGlnaHRQb2ludHM9ZS5yZWFkU2hvcnQoKSx0aGlzLm1heFN0b3JhZ2U9ZS5yZWFkU2hvcnQoKSx0aGlzLm1heEZ1bmN0aW9uRGVmcz1lLnJlYWRTaG9ydCgpLHRoaXMubWF4SW5zdHJ1Y3Rpb25EZWZzPWUucmVhZFNob3J0KCksdGhpcy5tYXhTdGFja0VsZW1lbnRzPWUucmVhZFNob3J0KCksdGhpcy5tYXhTaXplT2ZJbnN0cnVjdGlvbnM9ZS5yZWFkU2hvcnQoKSx0aGlzLm1heENvbXBvbmVudEVsZW1lbnRzPWUucmVhZFNob3J0KCksdGhpcy5tYXhDb21wb25lbnREZXB0aD1lLnJlYWRTaG9ydCgpfSxyZW5kZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dygpO3JldHVybiB0LndyaXRlTG9uZyh0aGlzLnZlcnNpb24pLHQud3JpdGVTaG9ydChlLmxlbmd0aCksdC53cml0ZVNob3J0KHRoaXMubWF4UG9pbnRzKSx0LndyaXRlU2hvcnQodGhpcy5tYXhDb250b3VycyksdC53cml0ZVNob3J0KHRoaXMubWF4Q29tcG9uZW50UG9pbnRzKSx0LndyaXRlU2hvcnQodGhpcy5tYXhDb21wb25lbnRDb250b3VycyksdC53cml0ZVNob3J0KHRoaXMubWF4Wm9uZXMpLHQud3JpdGVTaG9ydCh0aGlzLm1heFR3aWxpZ2h0UG9pbnRzKSx0LndyaXRlU2hvcnQodGhpcy5tYXhTdG9yYWdlKSx0LndyaXRlU2hvcnQodGhpcy5tYXhGdW5jdGlvbkRlZnMpLHQud3JpdGVTaG9ydCh0aGlzLm1heEluc3RydWN0aW9uRGVmcyksdC53cml0ZVNob3J0KHRoaXMubWF4U3RhY2tFbGVtZW50cyksdC53cml0ZVNob3J0KHRoaXMubWF4U2l6ZU9mSW5zdHJ1Y3Rpb25zKSx0LndyaXRlU2hvcnQodGhpcy5tYXhDb21wb25lbnRFbGVtZW50cyksdC53cml0ZVNob3J0KHRoaXMubWF4Q29tcG9uZW50RGVwdGgpLHQuZ2V0KCl9fSksaD1yKHtwYXJzZTpmdW5jdGlvbihlKXt2YXIgdCxuLGk7ZS5vZmZzZXQodGhpcy5vZmZzZXQpLHQ9dGhpcy5maWxlLG49dC5oaGVhLHRoaXMubWV0cmljcz1lLnRpbWVzKG4ubnVtT2ZMb25nSG9yTWV0cmljcyxmdW5jdGlvbigpe3JldHVybnthZHZhbmNlOmUucmVhZFNob3J0KCksbHNiOmUucmVhZFNob3J0XygpfX0pLGk9dC5tYXhwLm51bUdseXBocy10LmhoZWEubnVtT2ZMb25nSG9yTWV0cmljcyx0aGlzLmxlZnRTaWRlQmVhcmluZ3M9ZS50aW1lcyhpLGUucmVhZFNob3J0Xyl9LGZvckdseXBoOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubWV0cmljcyxuPXQubGVuZ3RoO3JldHVybiBuPmU/dFtlXTp7YWR2YW5jZTp0W24tMV0uYWR2YW5jZSxsc2I6dGhpcy5sZWZ0U2lkZUJlYXJpbmdzW2Utbl19fSxyZW5kZXI6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXcoKTtmb3IodD0wO2UubGVuZ3RoPnQ7Kyt0KW49dGhpcy5mb3JHbHlwaChlW3RdKSxpLndyaXRlU2hvcnQobi5hZHZhbmNlKSxpLndyaXRlU2hvcnRfKG4ubHNiKTtyZXR1cm4gaS5nZXQoKX19KSxwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLnJhdz1lfWZ1bmN0aW9uIG4oZSl7dmFyIHQsbixyO2Zvcih0aGlzLnJhdz1lLHQ9dGhpcy5nbHlwaElkcz1bXSxuPXRoaXMuaWRPZmZzZXRzPVtdOzspe2lmKHI9ZS5yZWFkU2hvcnQoKSxuLnB1c2goZS5vZmZzZXQoKSksdC5wdXNoKGUucmVhZFNob3J0KCkpLCEociZhKSlicmVhaztlLnNraXAociZpPzQ6MiksciZsP2Uuc2tpcCg4KTpyJnM/ZS5za2lwKDQpOnImbyYmZS5za2lwKDIpfX12YXIgaSxvLGEscyxsLGM7cmV0dXJuIGUucHJvdG90eXBlPXtjb21wb3VuZDohMSxyZW5kZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYXcuZ2V0KCl9fSxpPTEsbz04LGE9MzIscz02NCxsPTEyOCxjPTI1NixuLnByb3RvdHlwZT17Y29tcG91bmQ6ITAscmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT13KHRoaXMucmF3LmdldCgpKTtmb3IodD0wO3RoaXMuZ2x5cGhJZHMubGVuZ3RoPnQ7Kyt0KW49dGhpcy5nbHlwaElkc1t0XSxpLm9mZnNldCh0aGlzLmlkT2Zmc2V0c1t0XSksaS53cml0ZVNob3J0KGVbbl0pO3JldHVybiBpLmdldCgpfX0scih7cGFyc2U6ZnVuY3Rpb24oKXt0aGlzLmNhY2hlPXt9fSxnbHlwaEZvcjpmdW5jdGlvbihpKXt2YXIgcixvLGEscyxsLGMsZCx1LGgscCxmLGc9dGhpcy5jYWNoZTtyZXR1cm4gdChnLGkpP2dbaV06KHI9dGhpcy5maWxlLmxvY2Esbz1yLmxlbmd0aE9mKGkpLDA9PT1vP2dbaV09bnVsbDooYT10aGlzLnJhd0RhdGEscz10aGlzLm9mZnNldCtyLm9mZnNldE9mKGkpLGw9dyhhLnNsaWNlKHMsbykpLGM9bC5yZWFkU2hvcnRfKCksZD1sLnJlYWRTaG9ydF8oKSx1PWwucmVhZFNob3J0XygpLGg9bC5yZWFkU2hvcnRfKCkscD1sLnJlYWRTaG9ydF8oKSxmPWdbaV09LTE9PWM/bmV3IG4obCk6bmV3IGUobCksZi5udW1iZXJPZkNvbnRvdXJzPWMsZi54TWluPWQsZi55TWluPXUsZi54TWF4PWgsZi55TWF4PXAsZikpfSxyZW5kZXI6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhPXcoKSxzPVtdO2ZvcihpPTA7dC5sZW5ndGg+aTsrK2kpcj10W2ldLG89ZVtyXSxzLnB1c2goYS5vZmZzZXQoKSksbyYmYS53cml0ZShvLnJlbmRlcihuKSk7cmV0dXJuIHMucHVzaChhLm9mZnNldCgpKSx7dGFibGU6YS5nZXQoKSxvZmZzZXRzOnN9fX0pfSgpLGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy50ZXh0PWUsdGhpcy5sZW5ndGg9ZS5sZW5ndGgsdGhpcy5wbGF0Zm9ybUlEPXQucGxhdGZvcm1JRCx0aGlzLnBsYXRmb3JtU3BlY2lmaWNJRD10LnBsYXRmb3JtU3BlY2lmaWNJRCx0aGlzLmxhbmd1YWdlSUQ9dC5sYW5ndWFnZUlELHRoaXMubmFtZUlEPXQubmFtZUlEfXJldHVybiByKHtwYXJzZTpmdW5jdGlvbih0KXt2YXIgbixpLHIsbyxhLHMsbCxjO2Zvcih0Lm9mZnNldCh0aGlzLm9mZnNldCksbj10LnJlYWRTaG9ydCgpLGk9dC5yZWFkU2hvcnQoKSxyPXRoaXMub2Zmc2V0K3QucmVhZFNob3J0KCksbz10LnRpbWVzKGksZnVuY3Rpb24oKXtyZXR1cm57cGxhdGZvcm1JRDp0LnJlYWRTaG9ydCgpLHBsYXRmb3JtU3BlY2lmaWNJRDp0LnJlYWRTaG9ydCgpLGxhbmd1YWdlSUQ6dC5yZWFkU2hvcnQoKSxuYW1lSUQ6dC5yZWFkU2hvcnQoKSxsZW5ndGg6dC5yZWFkU2hvcnQoKSxvZmZzZXQ6dC5yZWFkU2hvcnQoKStyfX0pLGE9dGhpcy5zdHJpbmdzPXt9LHM9MDtvLmxlbmd0aD5zOysrcylsPW9bc10sdC5vZmZzZXQobC5vZmZzZXQpLGM9dC5yZWFkU3RyaW5nKGwubGVuZ3RoKSxhW2wubmFtZUlEXXx8KGFbbC5uYW1lSURdPVtdKSxhW2wubmFtZUlEXS5wdXNoKG5ldyBlKGMsbCkpO3RoaXMucG9zdHNjcmlwdEVudHJ5PWFbNl1bMF0sdGhpcy5wb3N0c2NyaXB0TmFtZT10aGlzLnBvc3RzY3JpcHRFbnRyeS50ZXh0LnJlcGxhY2UoL1teXFx4MjAtXFx4N0ZdL2csXCJcIil9LHJlbmRlcjpmdW5jdGlvbihuKXt2YXIgaSxyLG8sYSxzLGwsYz10aGlzLnN0cmluZ3MsZD0wO2ZvcihpIGluIGMpdChjLGkpJiYoZCs9Y1tpXS5sZW5ndGgpO3I9dygpLG89dygpLHIud3JpdGVTaG9ydCgwKSxyLndyaXRlU2hvcnQoZCksci53cml0ZVNob3J0KDYrMTIqZCk7Zm9yKGkgaW4gYylpZih0KGMsaSkpZm9yKGE9Nj09aT9bbmV3IGUobix0aGlzLnBvc3RzY3JpcHRFbnRyeSldOmNbaV0scz0wO2EubGVuZ3RoPnM7KytzKWw9YVtzXSxyLndyaXRlU2hvcnQobC5wbGF0Zm9ybUlEKSxyLndyaXRlU2hvcnQobC5wbGF0Zm9ybVNwZWNpZmljSUQpLHIud3JpdGVTaG9ydChsLmxhbmd1YWdlSUQpLHIud3JpdGVTaG9ydChsLm5hbWVJRCksci53cml0ZVNob3J0KGwubGVuZ3RoKSxyLndyaXRlU2hvcnQoby5vZmZzZXQoKSksby53cml0ZVN0cmluZyhsLnRleHQpO3JldHVybiByLndyaXRlKG8uZ2V0KCkpLHIuZ2V0KCl9fSl9KCksZz1mdW5jdGlvbigpe3ZhciBlPVwiLm5vdGRlZiAubnVsbCBub25tYXJraW5ncmV0dXJuIHNwYWNlIGV4Y2xhbSBxdW90ZWRibCBudW1iZXJzaWduIGRvbGxhciBwZXJjZW50IGFtcGVyc2FuZCBxdW90ZXNpbmdsZSBwYXJlbmxlZnQgcGFyZW5yaWdodCBhc3RlcmlzayBwbHVzIGNvbW1hIGh5cGhlbiBwZXJpb2Qgc2xhc2ggemVybyBvbmUgdHdvIHRocmVlIGZvdXIgZml2ZSBzaXggc2V2ZW4gZWlnaHQgbmluZSBjb2xvbiBzZW1pY29sb24gbGVzcyBlcXVhbCBncmVhdGVyIHF1ZXN0aW9uIGF0IEEgQiBDIEQgRSBGIEcgSCBJIEogSyBMIE0gTiBPIFAgUSBSIFMgVCBVIFYgVyBYIFkgWiBicmFja2V0bGVmdCBiYWNrc2xhc2ggYnJhY2tldHJpZ2h0IGFzY2lpY2lyY3VtIHVuZGVyc2NvcmUgZ3JhdmUgYSBiIGMgZCBlIGYgZyBoIGkgaiBrIGwgbSBuIG8gcCBxIHIgcyB0IHUgdiB3IHggeSB6IGJyYWNlbGVmdCBiYXIgYnJhY2VyaWdodCBhc2NpaXRpbGRlIEFkaWVyZXNpcyBBcmluZyBDY2VkaWxsYSBFYWN1dGUgTnRpbGRlIE9kaWVyZXNpcyBVZGllcmVzaXMgYWFjdXRlIGFncmF2ZSBhY2lyY3VtZmxleCBhZGllcmVzaXMgYXRpbGRlIGFyaW5nIGNjZWRpbGxhIGVhY3V0ZSBlZ3JhdmUgZWNpcmN1bWZsZXggZWRpZXJlc2lzIGlhY3V0ZSBpZ3JhdmUgaWNpcmN1bWZsZXggaWRpZXJlc2lzIG50aWxkZSBvYWN1dGUgb2dyYXZlIG9jaXJjdW1mbGV4IG9kaWVyZXNpcyBvdGlsZGUgdWFjdXRlIHVncmF2ZSB1Y2lyY3VtZmxleCB1ZGllcmVzaXMgZGFnZ2VyIGRlZ3JlZSBjZW50IHN0ZXJsaW5nIHNlY3Rpb24gYnVsbGV0IHBhcmFncmFwaCBnZXJtYW5kYmxzIHJlZ2lzdGVyZWQgY29weXJpZ2h0IHRyYWRlbWFyayBhY3V0ZSBkaWVyZXNpcyBub3RlcXVhbCBBRSBPc2xhc2ggaW5maW5pdHkgcGx1c21pbnVzIGxlc3NlcXVhbCBncmVhdGVyZXF1YWwgeWVuIG11IHBhcnRpYWxkaWZmIHN1bW1hdGlvbiBwcm9kdWN0IHBpIGludGVncmFsIG9yZGZlbWluaW5lIG9yZG1hc2N1bGluZSBPbWVnYSBhZSBvc2xhc2ggcXVlc3Rpb25kb3duIGV4Y2xhbWRvd24gbG9naWNhbG5vdCByYWRpY2FsIGZsb3JpbiBhcHByb3hlcXVhbCBEZWx0YSBndWlsbGVtb3RsZWZ0IGd1aWxsZW1vdHJpZ2h0IGVsbGlwc2lzIG5vbmJyZWFraW5nc3BhY2UgQWdyYXZlIEF0aWxkZSBPdGlsZGUgT0Ugb2UgZW5kYXNoIGVtZGFzaCBxdW90ZWRibGxlZnQgcXVvdGVkYmxyaWdodCBxdW90ZWxlZnQgcXVvdGVyaWdodCBkaXZpZGUgbG96ZW5nZSB5ZGllcmVzaXMgWWRpZXJlc2lzIGZyYWN0aW9uIGN1cnJlbmN5IGd1aWxzaW5nbGxlZnQgZ3VpbHNpbmdscmlnaHQgZmkgZmwgZGFnZ2VyZGJsIHBlcmlvZGNlbnRlcmVkIHF1b3Rlc2luZ2xiYXNlIHF1b3RlZGJsYmFzZSBwZXJ0aG91c2FuZCBBY2lyY3VtZmxleCBFY2lyY3VtZmxleCBBYWN1dGUgRWRpZXJlc2lzIEVncmF2ZSBJYWN1dGUgSWNpcmN1bWZsZXggSWRpZXJlc2lzIElncmF2ZSBPYWN1dGUgT2NpcmN1bWZsZXggYXBwbGUgT2dyYXZlIFVhY3V0ZSBVY2lyY3VtZmxleCBVZ3JhdmUgZG90bGVzc2kgY2lyY3VtZmxleCB0aWxkZSBtYWNyb24gYnJldmUgZG90YWNjZW50IHJpbmcgY2VkaWxsYSBodW5nYXJ1bWxhdXQgb2dvbmVrIGNhcm9uIExzbGFzaCBsc2xhc2ggU2Nhcm9uIHNjYXJvbiBaY2Fyb24gemNhcm9uIGJyb2tlbmJhciBFdGggZXRoIFlhY3V0ZSB5YWN1dGUgVGhvcm4gdGhvcm4gbWludXMgbXVsdGlwbHkgb25lc3VwZXJpb3IgdHdvc3VwZXJpb3IgdGhyZWVzdXBlcmlvciBvbmVoYWxmIG9uZXF1YXJ0ZXIgdGhyZWVxdWFydGVycyBmcmFuYyBHYnJldmUgZ2JyZXZlIElkb3RhY2NlbnQgU2NlZGlsbGEgc2NlZGlsbGEgQ2FjdXRlIGNhY3V0ZSBDY2Fyb24gY2Nhcm9uIGRjcm9hdFwiLnNwbGl0KC9cXHMrL2cpO3JldHVybiByKHtwYXJzZTpmdW5jdGlvbihlKXt2YXIgdCxuO3N3aXRjaChlLm9mZnNldCh0aGlzLm9mZnNldCksdGhpcy5mb3JtYXQ9ZS5yZWFkTG9uZygpLHRoaXMuaXRhbGljQW5nbGU9ZS5yZWFkRml4ZWRfKCksdGhpcy51bmRlcmxpbmVQb3NpdGlvbj1lLnJlYWRTaG9ydF8oKSx0aGlzLnVuZGVybGluZVRoaWNrbmVzcz1lLnJlYWRTaG9ydF8oKSx0aGlzLmlzRml4ZWRQaXRjaD1lLnJlYWRMb25nKCksdGhpcy5taW5NZW1UeXBlNDI9ZS5yZWFkTG9uZygpLHRoaXMubWF4TWVtVHlwZTQyPWUucmVhZExvbmcoKSx0aGlzLm1pbk1lbVR5cGUxPWUucmVhZExvbmcoKSx0aGlzLm1heE1lbVR5cGUxPWUucmVhZExvbmcoKSx0aGlzLmZvcm1hdCl7Y2FzZSA2NTUzNjpjYXNlIDE5NjYwODpicmVhaztjYXNlIDEzMTA3Mjpmb3IodD1lLnJlYWRTaG9ydCgpLHRoaXMuZ2x5cGhOYW1lSW5kZXg9ZS50aW1lcyh0LGUucmVhZFNob3J0KSx0aGlzLm5hbWVzPVtdLG49dGhpcy5vZmZzZXQrdGhpcy5sZW5ndGg7ZS5vZmZzZXQoKTxuOyl0aGlzLm5hbWVzLnB1c2goZS5yZWFkU3RyaW5nKGUucmVhZEJ5dGUoKSkpO2JyZWFrO2Nhc2UgMTUxNTUyOnQ9ZS5yZWFkU2hvcnQoKSx0aGlzLm9mZnNldHM9ZS5yZWFkKHQpO2JyZWFrO2Nhc2UgMjYyMTQ0OnRoaXMubWFwPWUudGltZXModGhpcy5maWxlLm1heHAubnVtR2x5cGhzLGUucmVhZFNob3J0KX19LGdseXBoRm9yOmZ1bmN0aW9uKHQpe3N3aXRjaCh0aGlzLmZvcm1hdCl7Y2FzZSA2NTUzNjpyZXR1cm4gZVt0XXx8XCIubm90ZGVmXCI7Y2FzZSAxMzEwNzI6dmFyIG49dGhpcy5nbHlwaE5hbWVJbmRleFt0XTtyZXR1cm4gZS5sZW5ndGg+bj9lW25dOnRoaXMubmFtZXNbbi1lLmxlbmd0aF18fFwiLm5vdGRlZlwiO2Nhc2UgMTUxNTUyOmNhc2UgMTk2NjA4OnJldHVyblwiLm5vdGRlZlwiO2Nhc2UgMjYyMTQ0OnJldHVybiB0aGlzLm1hcFt0XXx8NjU1MzV9fSxyZW5kZXI6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG8sYSxzLGw7aWYoMTk2NjA4PT10aGlzLmZvcm1hdClyZXR1cm4gdGhpcy5yYXcoKTtmb3Iobj13KHRoaXMucmF3RGF0YS5zbGljZSh0aGlzLm9mZnNldCwzMikpLG4ud3JpdGVMb25nKDEzMTA3Miksbi5vZmZzZXQoMzIpLGk9W10scj1bXSxvPTA7dC5sZW5ndGg+bzsrK28pYT10W29dLHM9dGhpcy5nbHlwaEZvcihhKSxsPWUuaW5kZXhPZihzKSxsPj0wP2kucHVzaChsKTooaS5wdXNoKGUubGVuZ3RoK3IubGVuZ3RoKSxyLnB1c2gocykpO2ZvcihuLndyaXRlU2hvcnQodC5sZW5ndGgpLG89MDtpLmxlbmd0aD5vOysrbyluLndyaXRlU2hvcnQoaVtvXSk7Zm9yKG89MDtyLmxlbmd0aD5vOysrbyluLndyaXRlQnl0ZShyW29dLmxlbmd0aCksbi53cml0ZVN0cmluZyhyW29dKTtyZXR1cm4gbi5nZXQoKX19KX0oKSxtPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3ZhciBuPXRoaXM7bi5wbGF0Zm9ybUlEPWUucmVhZFNob3J0KCksbi5wbGF0Zm9ybVNwZWNpZmljSUQ9ZS5yZWFkU2hvcnQoKSxuLm9mZnNldD10K2UucmVhZExvbmcoKSxlLnNhdmVFeGN1cnNpb24oZnVuY3Rpb24oKXt2YXIgdCxpLHIsbyxhLHMsbCxjLGQsdSxoLHAsZjtzd2l0Y2goZS5vZmZzZXQobi5vZmZzZXQpLG4uZm9ybWF0PWUucmVhZFNob3J0KCksbi5sZW5ndGg9ZS5yZWFkU2hvcnQoKSxuLmxhbmd1YWdlPWUucmVhZFNob3J0KCksbi5pc1VuaWNvZGU9Mz09bi5wbGF0Zm9ybUlEJiYxPT1uLnBsYXRmb3JtU3BlY2lmaWNJRCYmND09bi5mb3JtYXR8fDA9PT1uLnBsYXRmb3JtSUQmJjQ9PW4uZm9ybWF0LG4uY29kZU1hcD17fSxuLmZvcm1hdCl7Y2FzZSAwOmZvcih0PTA7MjU2PnQ7Kyt0KW4uY29kZU1hcFt0XT1lLnJlYWRCeXRlKCk7YnJlYWs7Y2FzZSA0OmZvcihpPWUucmVhZFNob3J0KCkvMixlLnNraXAoNikscj1lLnRpbWVzKGksZS5yZWFkU2hvcnQpLGUuc2tpcCgyKSxvPWUudGltZXMoaSxlLnJlYWRTaG9ydCksYT1lLnRpbWVzKGksZS5yZWFkU2hvcnRfKSxzPWUudGltZXMoaSxlLnJlYWRTaG9ydCksbD0obi5sZW5ndGgrbi5vZmZzZXQtZS5vZmZzZXQoKSkvMixjPWUudGltZXMobCxlLnJlYWRTaG9ydCksdD0wO2k+dDsrK3QpZm9yKGQ9b1t0XSx1PXJbdF0saD1kO3U+PWg7KytoKTA9PT1zW3RdP3A9aCthW3RdOihmPXNbdF0vMi0oaS10KSsoaC1kKSxwPWNbZl18fDAsMCE9PXAmJihwKz1hW3RdKSksbi5jb2RlTWFwW2hdPTY1NTM1JnB9fSl9ZnVuY3Rpb24gdChlLHQpe2Z1bmN0aW9uIGkobil7cmV0dXJuIHRbZVtuXV19dmFyIHIsbyxhLHMsbCxjLGQsdSxoLHAsZixnLG0sdixfLHksYixrPW4oZSkseD1bXSxDPVtdLFM9bnVsbCxUPW51bGw7Zm9yKHI9MDtrLmxlbmd0aD5yOysrcilvPWtbcl0sYT1pKG8pLHM9YS1vLChudWxsPT1TfHxzIT09VCkmJihTJiZDLnB1c2goUykseC5wdXNoKG8pLFQ9cyksUz1vO2ZvcihTJiZDLnB1c2goUyksQy5wdXNoKDY1NTM1KSx4LnB1c2goNjU1MzUpLGw9eC5sZW5ndGgsYz0yKmwsZD0yKk1hdGgucG93KDIsTWF0aC5mbG9vcihNYXRoLmxvZyhsKS9NYXRoLkxOMikpLHU9TWF0aC5sb2coZC8yKS9NYXRoLkxOMixoPWMtZCxwPVtdLGY9W10sZz1bXSxyPTA7bD5yOysrcil7aWYobT14W3JdLHY9Q1tyXSw2NTUzNT09bSl7cC5wdXNoKDApLGYucHVzaCgwKTticmVha31pZihfPWkobSksbS1fPj0zMjc2OClmb3IocC5wdXNoKDApLGYucHVzaCgyKihnLmxlbmd0aCtsLXIpKSx5PW07dj49eTsrK3kpZy5wdXNoKGkoeSkpO2Vsc2UgcC5wdXNoKF8tbSksZi5wdXNoKDApfXJldHVybiBiPXcoKSxiLndyaXRlU2hvcnQoMyksYi53cml0ZVNob3J0KDEpLGIud3JpdGVMb25nKDEyKSxiLndyaXRlU2hvcnQoNCksYi53cml0ZVNob3J0KDE2KzgqbCsyKmcubGVuZ3RoKSxiLndyaXRlU2hvcnQoMCksYi53cml0ZVNob3J0KGMpLGIud3JpdGVTaG9ydChkKSxiLndyaXRlU2hvcnQodSksYi53cml0ZVNob3J0KGgpLEMuZm9yRWFjaChiLndyaXRlU2hvcnQpLGIud3JpdGVTaG9ydCgwKSx4LmZvckVhY2goYi53cml0ZVNob3J0KSxwLmZvckVhY2goYi53cml0ZVNob3J0XyksZi5mb3JFYWNoKGIud3JpdGVTaG9ydCksZy5mb3JFYWNoKGIud3JpdGVTaG9ydCksYi5nZXQoKX1yZXR1cm4gcih7cGFyc2U6ZnVuY3Rpb24odCl7dmFyIG4saT10aGlzLHI9aS5vZmZzZXQ7dC5vZmZzZXQociksaS52ZXJzaW9uPXQucmVhZFNob3J0KCksbj10LnJlYWRTaG9ydCgpLGkudW5pY29kZUVudHJ5PW51bGwsaS50YWJsZXM9dC50aW1lcyhuLGZ1bmN0aW9uKCl7dmFyIG49bmV3IGUodCxyKTtyZXR1cm4gbi5pc1VuaWNvZGUmJihpLnVuaWNvZGVFbnRyeT1uKSxufSl9LHJlbmRlcjpmdW5jdGlvbihlLG4pe3ZhciBpPXcoKTtyZXR1cm4gaS53cml0ZVNob3J0KDApLGkud3JpdGVTaG9ydCgxKSxpLndyaXRlKHQoZSxuKSksaS5nZXQoKX0sZ2V0VW5pY29kZUVudHJ5OmZ1bmN0aW9uKCl7aWYoIXRoaXMudW5pY29kZUVudHJ5KXRocm93IEVycm9yKFwiRm9udCBkb2Vzbid0IGhhdmUgYW4gVW5pY29kZSBlbmNvZGluZ1wiKTtyZXR1cm4gdGhpcy51bmljb2RlRW50cnl9fSl9KCksdj1yKHtwYXJzZTpmdW5jdGlvbihlKXtlLm9mZnNldCh0aGlzLm9mZnNldCksdGhpcy52ZXJzaW9uPWUucmVhZFNob3J0KCksdGhpcy5hdmVyYWdlQ2hhcldpZHRoPWUucmVhZFNob3J0XygpLHRoaXMud2VpZ2h0Q2xhc3M9ZS5yZWFkU2hvcnQoKSx0aGlzLndpZHRoQ2xhc3M9ZS5yZWFkU2hvcnQoKSx0aGlzLnR5cGU9ZS5yZWFkU2hvcnQoKSx0aGlzLnlTdWJzY3JpcHRYU2l6ZT1lLnJlYWRTaG9ydF8oKSx0aGlzLnlTdWJzY3JpcHRZU2l6ZT1lLnJlYWRTaG9ydF8oKSx0aGlzLnlTdWJzY3JpcHRYT2Zmc2V0PWUucmVhZFNob3J0XygpLHRoaXMueVN1YnNjcmlwdFlPZmZzZXQ9ZS5yZWFkU2hvcnRfKCksdGhpcy55U3VwZXJzY3JpcHRYU2l6ZT1lLnJlYWRTaG9ydF8oKSx0aGlzLnlTdXBlcnNjcmlwdFlTaXplPWUucmVhZFNob3J0XygpLHRoaXMueVN1cGVyc2NyaXB0WE9mZnNldD1lLnJlYWRTaG9ydF8oKSx0aGlzLnlTdXBlcnNjcmlwdFlPZmZzZXQ9ZS5yZWFkU2hvcnRfKCksdGhpcy55U3RyaWtlb3V0U2l6ZT1lLnJlYWRTaG9ydF8oKSx0aGlzLnlTdHJpa2VvdXRQb3NpdGlvbj1lLnJlYWRTaG9ydF8oKSx0aGlzLmZhbWlseUNsYXNzPWUucmVhZFNob3J0XygpLHRoaXMucGFub3NlPWUudGltZXMoMTAsZS5yZWFkQnl0ZSksdGhpcy5jaGFyUmFuZ2U9ZS50aW1lcyg0LGUucmVhZExvbmcpLHRoaXMudmVuZG9ySUQ9ZS5yZWFkU3RyaW5nKDQpLHRoaXMuc2VsZWN0aW9uPWUucmVhZFNob3J0KCksdGhpcy5maXJzdENoYXJJbmRleD1lLnJlYWRTaG9ydCgpLHRoaXMubGFzdENoYXJJbmRleD1lLnJlYWRTaG9ydCgpLHRoaXMudmVyc2lvbj4wJiYodGhpcy5hc2NlbnQ9ZS5yZWFkU2hvcnRfKCksdGhpcy5kZXNjZW50PWUucmVhZFNob3J0XygpLHRoaXMubGluZUdhcD1lLnJlYWRTaG9ydF8oKSx0aGlzLndpbkFzY2VudD1lLnJlYWRTaG9ydCgpLHRoaXMud2luRGVzY2VudD1lLnJlYWRTaG9ydCgpLHRoaXMuY29kZVBhZ2VSYW5nZT1lLnRpbWVzKDIsZS5yZWFkTG9uZyksdGhpcy52ZXJzaW9uPjEmJih0aGlzLnhIZWlnaHQ9ZS5yZWFkU2hvcnQoKSx0aGlzLmNhcEhlaWdodD1lLnJlYWRTaG9ydCgpLHRoaXMuZGVmYXVsdENoYXI9ZS5yZWFkU2hvcnQoKSx0aGlzLmJyZWFrQ2hhcj1lLnJlYWRTaG9ydCgpLHRoaXMubWF4Q29udGV4dD1lLnJlYWRTaG9ydCgpKSl9LHJlbmRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJhdygpfX0pLF89MWU1LGEucHJvdG90eXBlPXt1c2U6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbztpZihcInN0cmluZ1wiPT10eXBlb2YgZSl7Zm9yKG49XCJcIixpPTA7ZS5sZW5ndGg+aTsrK2kpdD10aGlzLnVzZShlLmNoYXJDb2RlQXQoaSkpLG4rPVN0cmluZy5mcm9tQ2hhckNvZGUodCk7cmV0dXJuIG59cmV0dXJuIHQ9dGhpcy51bmljb2Rlc1tlXSx0fHwodD10aGlzLm5leHQrKyx0aGlzLnN1YnNldFt0XT1lLHRoaXMudW5pY29kZXNbZV09dCxyPXRoaXMuZm9udC5jbWFwLmdldFVuaWNvZGVFbnRyeSgpLmNvZGVNYXBbZV0sciYmKHRoaXMubmNpZDJvZ2lkW3RdPXIsbnVsbD09dGhpcy5vZ2lkMm5naWRbcl0mJihvPXRoaXMubmV4dEdpZCsrLHRoaXMub2dpZDJuZ2lkW3JdPW8sdGhpcy5uZ2lkMm9naWRbb109cikpKSx0fSxlbmNvZGVUZXh0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnVzZShlKX0sZ2x5cGhJZHM6ZnVuY3Rpb24oKXtyZXR1cm4gbih0aGlzLm9naWQybmdpZCl9LGdseXBoc0ZvcjpmdW5jdGlvbihlLHQpe3ZhciBuLGkscjtmb3IodHx8KHQ9e30pLG49MDtlLmxlbmd0aD5uOysrbilpPWVbbl0sdFtpXXx8KHI9dFtpXT10aGlzLmZvbnQuZ2x5Zi5nbHlwaEZvcihpKSxyJiZyLmNvbXBvdW5kJiZ0aGlzLmdseXBoc0ZvcihyLmdseXBoSWRzLHQpKTtyZXR1cm4gdH0scmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGUsaSxyLG8sYSxzLGwsYyxkPXRoaXMuZ2x5cGhzRm9yKHRoaXMuZ2x5cGhJZHMoKSk7Zm9yKGUgaW4gZCl0KGQsZSkmJihlPXBhcnNlSW50KGUsMTApLG51bGw9PXRoaXMub2dpZDJuZ2lkW2VdJiYoaT10aGlzLm5leHRHaWQrKyx0aGlzLm9naWQybmdpZFtlXT1pLHRoaXMubmdpZDJvZ2lkW2ldPWUpKTtyZXR1cm4gcj1uKHRoaXMubmdpZDJvZ2lkKSxvPXIubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm5naWQyb2dpZFtlXX0sdGhpcyksYT10aGlzLmZvbnQscz1hLmdseWYucmVuZGVyKGQsbyx0aGlzLm9naWQybmdpZCksbD1hLmxvY2EucmVuZGVyKHMub2Zmc2V0cyksdGhpcy5sYXN0Q2hhcj10aGlzLm5leHQtMSxjPXtjbWFwOm0ucmVuZGVyKHRoaXMubmNpZDJvZ2lkLHRoaXMub2dpZDJuZ2lkKSxnbHlmOnMudGFibGUsbG9jYTpsLnRhYmxlLGhtdHg6YS5obXR4LnJlbmRlcihvKSxoaGVhOmEuaGhlYS5yZW5kZXIobyksbWF4cDphLm1heHAucmVuZGVyKG8pLHBvc3Q6YS5wb3N0LnJlbmRlcihvKSxuYW1lOmEubmFtZS5yZW5kZXIodGhpcy5wc05hbWUpLGhlYWQ6YS5oZWFkLnJlbmRlcihsLmZvcm1hdCksXCJPUy8yXCI6YS5vczIucmVuZGVyKCl9LHRoaXMuZm9udC5kaXJlY3RvcnkucmVuZGVyKGMpfSxjaWRUb0dpZE1hcDpmdW5jdGlvbigpe3ZhciBlLHQsbixpPXcoKSxyPTA7Zm9yKGU9dGhpcy5maXJzdENoYXI7dGhpcy5uZXh0PmU7KytlKXtmb3IoO2U+cjspaS53cml0ZVNob3J0KDApLHIrKzt0PXRoaXMubmNpZDJvZ2lkW2VdLHQ/KG49dGhpcy5vZ2lkMm5naWRbdF0saS53cml0ZVNob3J0KG4pKTppLndyaXRlU2hvcnQoMCkscisrfXJldHVybiBpLmdldCgpfX0scy5wcm90b3R5cGU9e3BhcnNlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kaXJlY3Rvcnk9bmV3IGkodGhpcy5jb250ZW50cyk7dGhpcy5oZWFkPWUucmVhZFRhYmxlKFwiaGVhZFwiLGwpLHRoaXMubG9jYT1lLnJlYWRUYWJsZShcImxvY2FcIixjKSx0aGlzLmhoZWE9ZS5yZWFkVGFibGUoXCJoaGVhXCIsZCksdGhpcy5tYXhwPWUucmVhZFRhYmxlKFwibWF4cFwiLHUpLHRoaXMuaG10eD1lLnJlYWRUYWJsZShcImhtdHhcIixoKSx0aGlzLmdseWY9ZS5yZWFkVGFibGUoXCJnbHlmXCIscCksdGhpcy5uYW1lPWUucmVhZFRhYmxlKFwibmFtZVwiLGYpLHRoaXMucG9zdD1lLnJlYWRUYWJsZShcInBvc3RcIixnKSx0aGlzLmNtYXA9ZS5yZWFkVGFibGUoXCJjbWFwXCIsbSksdGhpcy5vczI9ZS5yZWFkVGFibGUoXCJPUy8yXCIsdiksdGhpcy5wc05hbWU9dGhpcy5uYW1lLnBvc3RzY3JpcHROYW1lLHRoaXMuYXNjZW50PXRoaXMub3MyLmFzY2VudHx8dGhpcy5oaGVhLmFzY2VudCx0aGlzLmRlc2NlbnQ9dGhpcy5vczIuZGVzY2VudHx8dGhpcy5oaGVhLmRlc2NlbnQsdGhpcy5saW5lR2FwPXRoaXMub3MyLmxpbmVHYXB8fHRoaXMuaGhlYS5saW5lR2FwLHRoaXMuc2NhbGU9MWUzL3RoaXMuaGVhZC51bml0c1BlckVtfSx3aWR0aE9mR2x5cGg6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaG10eC5mb3JHbHlwaChlKS5hZHZhbmNlKnRoaXMuc2NhbGV9LG1ha2VTdWJzZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGEodGhpcyl9fSx5LlRURkZvbnQ9c30odGhpcyksZnVuY3Rpb24oZSl7ZS5QREZNaXhpbj17ZXh0ZW5kOmZ1bmN0aW9uKGUpe2UuZXZlbnRzLnB1c2goXCJwZGZFeHBvcnRcIiksZS5vcHRpb25zLnBkZj10aGlzLm9wdGlvbnMsZS5zYXZlQXNQREY9dGhpcy5zYXZlQXNQREZ9LG9wdGlvbnM6e2ZpbGVOYW1lOlwiRXhwb3J0LnBkZlwiLHByb3h5VVJMOlwiXCIscGFwZXJTaXplOlwiYXV0b1wiLGxhbmRzY2FwZTohMSxtYXJnaW46bnVsbCx0aXRsZTpudWxsLGF1dGhvcjpudWxsLHN1YmplY3Q6bnVsbCxrZXl3b3JkczpudWxsLGNyZWF0b3I6XCJLZW5kbyBVSSBQREYgR2VuZXJhdG9yXCIsZGF0ZTpudWxsfSxzYXZlQXNQREY6ZnVuY3Rpb24oKXtpZighdGhpcy50cmlnZ2VyKFwicGRmRXhwb3J0XCIpKXt2YXIgdD10aGlzLm9wdGlvbnMucGRmO1xuZS5kcmF3aW5nLmRyYXdET00odGhpcy53cmFwcGVyWzBdKS50aGVuKGZ1bmN0aW9uKG4pe3JldHVybiBlLmRyYXdpbmcuZXhwb3J0UERGKG4sdCl9KS5kb25lKGZ1bmN0aW9uKG4pe2Uuc2F2ZUFzKHtkYXRhVVJJOm4sZmlsZU5hbWU6dC5maWxlTmFtZSxwcm94eVVSTDp0LnByb3h5VVJMLGZvcmNlUHJveHk6dC5mb3JjZVByb3h5fSl9KX19fX0oa2VuZG8pLGZ1bmN0aW9uKGUsdCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbigpe2lmKCFlLnBkZil0aHJvdyBFcnJvcihcImtlbmRvLnBkZi5qcyBpcyBub3QgbG9hZGVkXCIpO3JldHVybiBlLnBkZn1mdW5jdGlvbiBpKGUsdCl7ZnVuY3Rpb24gaShlLHQpe3JldHVybiBkLnBkZiYmbnVsbCE9ZC5wZGZbZV0/ZC5wZGZbZV06dH1mdW5jdGlvbiByKCl7dmFyIHIsYSxzLGMsZCx1LHA7LS1vPjB8fChyPWkoXCJwYXBlclNpemVcIixcImF1dG9cIiksYT0hMSxcImF1dG9cIj09ciYmKGg/KHM9aC5nZXRTaXplKCkscj1bcy53aWR0aCxzLmhlaWdodF0sYT0hMCxjPWguZ2V0T3JpZ2luKCksZD1uZXcgRC5Hcm91cCxkLnRyYW5zZm9ybShuZXcgQS5NYXRyaXgoMSwwLDAsMSwtYy54LC1jLnkpKSxkLmFwcGVuZChlKSxlPWQpOnI9XCJBNFwiKSx1PW5ldyhuKCkuRG9jdW1lbnQpKHtwYXBlclNpemU6cixsYW5kc2NhcGU6aShcImxhbmRzY2FwZVwiLCExKSxtYXJnaW46aShcIm1hcmdpblwiKSxhZGRNYXJnaW46YSx0aXRsZTppKFwidGl0bGVcIiksYXV0aG9yOmkoXCJhdXRob3JcIiksc3ViamVjdDppKFwic3ViamVjdFwiKSxrZXl3b3JkczppKFwia2V5d29yZHNcIiksY3JlYXRvcjppKFwiY3JlYXRvclwiKSxkYXRlOmkoXCJkYXRlXCIpfSkscD11LmFkZFBhZ2UoKSxsKGUscCx1KSx0KHUucmVuZGVyKCksdSxwKSl9dmFyIG8sYT1bXSxjPVtdLGQ9ZS5vcHRpb25zLHU9VChlKSxoPXUuYmJveDtlPXUucm9vdCxlLnRyYXZlcnNlKGZ1bmN0aW9uKGUpe3Moe0ltYWdlOmZ1bmN0aW9uKGUpe2MuaW5kZXhPZihlLnNyYygpKTwwJiZjLnB1c2goZS5zcmMoKSl9LFRleHQ6ZnVuY3Rpb24oZSl7dmFyIHQ9bigpLnBhcnNlRm9udERlZihlLm9wdGlvbnMuZm9udCksaT1uKCkuZ2V0Rm9udFVSTCh0KTthLmluZGV4T2YoaSk8MCYmYS5wdXNoKGkpfX0sZSl9KSxvPTIsbigpLmxvYWRGb250cyhhLHIpLG4oKS5sb2FkSW1hZ2VzKGMscil9ZnVuY3Rpb24gcihlLHQpe2koZSxmdW5jdGlvbihlKXt0KFwiZGF0YTphcHBsaWNhdGlvbi9wZGY7YmFzZTY0LFwiK2UuYmFzZTY0KCkpfSl9ZnVuY3Rpb24gbyhlLHQpe2koZSxmdW5jdGlvbihlKXt0KG5ldyBCbG9iKFtlLmdldCgpXSx7dHlwZTpcImFwcGxpY2F0aW9uL3BkZlwifSkpfSl9ZnVuY3Rpb24gYSh0LG4saSxhKXt3aW5kb3cuQmxvYiYmIWUuc3VwcG9ydC5icm93c2VyLnNhZmFyaT9vKHQsZnVuY3Rpb24odCl7ZS5zYXZlQXMoe2RhdGFVUkk6dCxmaWxlTmFtZTpufSksYSYmYSh0KX0pOnIodCxmdW5jdGlvbih0KXtlLnNhdmVBcyh7ZGF0YVVSSTp0LGZpbGVOYW1lOm4scHJveHlVUkw6aX0pLGEmJmEodCl9KX1mdW5jdGlvbiBzKGUsdCl7dmFyIG49ZVt0Lm5vZGVUeXBlXTtyZXR1cm4gbj9uLmNhbGwuYXBwbHkobixhcmd1bWVudHMpOnR9ZnVuY3Rpb24gbChlLHQsbil7dmFyIGkscixvO2UuREVCVUcmJnQuY29tbWVudChlLkRFQlVHKSxpPWUudHJhbnNmb3JtKCkscj1lLm9wYWNpdHkoKSx0LnNhdmUoKSxudWxsIT1yJiYxPnImJnQuc2V0T3BhY2l0eShyKSxjKGUsdCxuKSxkKGUsdCxuKSx1KGUsdCxuKSxpJiYobz1pLm1hdHJpeCgpLHQudHJhbnNmb3JtKG8uYSxvLmIsby5jLG8uZCxvLmUsby5mKSkscyh7UGF0aDp2LE11bHRpUGF0aDpfLENpcmNsZTp5LEFyYzp3LFRleHQ6YixJbWFnZTp4LEdyb3VwOmt9LGUsdCxuKSx0LnJlc3RvcmUoKX1mdW5jdGlvbiBjKGUsdCl7dmFyIG4saSxyLG8sYSxzLGw9ZS5zdHJva2UmJmUuc3Ryb2tlKCk7aWYobCl7aWYobj1sLmNvbG9yKXtpZihuPVMobiksbnVsbD09bilyZXR1cm47dC5zZXRTdHJva2VDb2xvcihuLnIsbi5nLG4uYiksMSE9bi5hJiZ0LnNldFN0cm9rZU9wYWNpdHkobi5hKX1pZihpPWwud2lkdGgsbnVsbCE9aSl7aWYoMD09PWkpcmV0dXJuO3Quc2V0TGluZVdpZHRoKGkpfXI9bC5kYXNoVHlwZSxyJiZ0LnNldERhc2hQYXR0ZXJuKEVbcl0sMCksbz1sLmxpbmVDYXAsbyYmdC5zZXRMaW5lQ2FwKE1bb10pLGE9bC5saW5lSm9pbixhJiZ0LnNldExpbmVKb2luKFBbYV0pLHM9bC5vcGFjaXR5LG51bGwhPXMmJnQuc2V0U3Ryb2tlT3BhY2l0eShzKX19ZnVuY3Rpb24gZChlLHQpe3ZhciBuLGkscj1lLmZpbGwmJmUuZmlsbCgpO2lmKHImJiEociBpbnN0YW5jZW9mIEQuR3JhZGllbnQpKXtpZihuPXIuY29sb3Ipe2lmKG49UyhuKSxudWxsPT1uKXJldHVybjt0LnNldEZpbGxDb2xvcihuLnIsbi5nLG4uYiksMSE9bi5hJiZ0LnNldEZpbGxPcGFjaXR5KG4uYSl9aT1yLm9wYWNpdHksbnVsbCE9aSYmdC5zZXRGaWxsT3BhY2l0eShpKX19ZnVuY3Rpb24gdShlLHQsbil7dmFyIGk9ZS5jbGlwKCk7aSYmKG0oaSx0LG4pLHQuY2xpcCgpKX1mdW5jdGlvbiBoKGUpe3JldHVybiBlJiYoZSBpbnN0YW5jZW9mIEQuR3JhZGllbnR8fGUuY29sb3ImJiEvXihub25lfHRyYW5zcGFyZW50KSQvaS50ZXN0KGUuY29sb3IpJiYobnVsbD09ZS53aWR0aHx8ZS53aWR0aD4wKSYmKG51bGw9PWUub3BhY2l0eXx8ZS5vcGFjaXR5PjApKX1mdW5jdGlvbiBwKGUsdCxuLGkpe3ZhciByLG8sYSxzLGwsYyxkPWUuZmlsbCgpO3JldHVybiBkIGluc3RhbmNlb2YgRC5HcmFkaWVudD8oaT90LnN0cm9rZSgpOnQubm9wKCksZCBpbnN0YW5jZW9mIEQuTGluZWFyR3JhZGllbnQ/KHI9e3g6ZC5zdGFydCgpLngseTpkLnN0YXJ0KCkueX0sbz17eDpkLmVuZCgpLngseTpkLmVuZCgpLnl9LGE9e3R5cGU6XCJsaW5lYXJcIixzdGFydDpyLGVuZDpvLHVzZXJTcGFjZTpkLnVzZXJTcGFjZSgpLHN0b3BzOmQuc3RvcHMuZWxlbWVudHMoKS5tYXAoZnVuY3Rpb24oZSl7dmFyIHQsbj1lLm9mZnNldCgpO3JldHVybiBuPS8lJC8udGVzdChuKT9wYXJzZUZsb2F0KG4pLzEwMDpwYXJzZUZsb2F0KG4pLHQ9UyhlLmNvbG9yKCkpLHQuYSo9ZS5vcGFjaXR5KCkse29mZnNldDpuLGNvbG9yOnR9fSl9LHM9ZS5yYXdCQm94KCksbD1zLnRvcExlZnQoKSxjPXMuZ2V0U2l6ZSgpLHM9e2xlZnQ6bC54LHRvcDpsLnksd2lkdGg6Yy53aWR0aCxoZWlnaHQ6Yy5oZWlnaHR9LHQuZ3JhZGllbnQoYSxzKSwhMCk6dm9pZCh3aW5kb3cuY29uc29sZSYmd2luZG93LmNvbnNvbGUubG9nJiZ3aW5kb3cuY29uc29sZS5sb2coXCJSYWRpYWwgZ3JhZGllbnRzIGFyZSBub3QgeWV0IHN1cHBvcnRlZCBpbiBQREYgb3V0cHV0LlwiKSkpOnZvaWQgMH1mdW5jdGlvbiBmKGUsdCxuKXtoKGUuZmlsbCgpKSYmaChlLnN0cm9rZSgpKT9wKGUsdCxuLCEwKXx8dC5maWxsU3Ryb2tlKCk6aChlLmZpbGwoKSk/cChlLHQsbiwhMSl8fHQuZmlsbCgpOmgoZS5zdHJva2UoKSk/dC5zdHJva2UoKTp0Lm5vcCgpfWZ1bmN0aW9uIGcoZSx0KXt2YXIgbixpLHIsbz1lLnNlZ21lbnRzO2lmKDQ9PW8ubGVuZ3RoJiZlLm9wdGlvbnMuY2xvc2VkKXtmb3Iobj1bXSxpPTA7by5sZW5ndGg+aTsrK2kpe2lmKG9baV0uY29udHJvbEluKCkpcmV0dXJuITE7bltpXT1vW2ldLmFuY2hvcigpfWlmKHI9blswXS55PT1uWzFdLnkmJm5bMV0ueD09blsyXS54JiZuWzJdLnk9PW5bM10ueSYmblszXS54PT1uWzBdLnh8fG5bMF0ueD09blsxXS54JiZuWzFdLnk9PW5bMl0ueSYmblsyXS54PT1uWzNdLngmJm5bM10ueT09blswXS55KXJldHVybiB0LnJlY3QoblswXS54LG5bMF0ueSxuWzJdLngtblswXS54LG5bMl0ueS1uWzBdLnkpLCEwfX1mdW5jdGlvbiBtKGUsdCxuKXt2YXIgaSxyLG8sYSxzLGwsYz1lLnNlZ21lbnRzO2lmKDAhPT1jLmxlbmd0aCYmIWcoZSx0LG4pKXtmb3Iocj0wO2MubGVuZ3RoPnI7KytyKW89Y1tyXSxhPW8uYW5jaG9yKCksaT8ocz1pLmNvbnRyb2xPdXQoKSxsPW8uY29udHJvbEluKCkscyYmbD90LmJlemllcihzLngscy55LGwueCxsLnksYS54LGEueSk6dC5saW5lVG8oYS54LGEueSkpOnQubW92ZVRvKGEueCxhLnkpLGk9bztlLm9wdGlvbnMuY2xvc2VkJiZ0LmNsb3NlKCl9fWZ1bmN0aW9uIHYoZSx0LG4pe20oZSx0LG4pLGYoZSx0LG4pfWZ1bmN0aW9uIF8oZSx0LG4pe3ZhciBpLHI9ZS5wYXRocztmb3IoaT0wO3IubGVuZ3RoPmk7KytpKW0ocltpXSx0LG4pO2YoZSx0LG4pfWZ1bmN0aW9uIHkoZSx0LG4pe3ZhciBpPWUuZ2VvbWV0cnkoKTt0LmNpcmNsZShpLmNlbnRlci54LGkuY2VudGVyLnksaS5yYWRpdXMpLGYoZSx0LG4pfWZ1bmN0aW9uIHcoZSx0LG4pe3ZhciBpLHI9ZS5nZW9tZXRyeSgpLmN1cnZlUG9pbnRzKCk7Zm9yKHQubW92ZVRvKHJbMF0ueCxyWzBdLnkpLGk9MTtyLmxlbmd0aD5pOyl0LmJlemllcihyW2ldLngscltpKytdLnkscltpXS54LHJbaSsrXS55LHJbaV0ueCxyW2krK10ueSk7ZihlLHQsbil9ZnVuY3Rpb24gYihlLHQpe3ZhciBpLHI9bigpLnBhcnNlRm9udERlZihlLm9wdGlvbnMuZm9udCksbz1lLl9wb3NpdGlvbjtlLmZpbGwoKSYmZS5zdHJva2UoKT9pPW4oKS5URVhUX1JFTkRFUklOR19NT0RFLmZpbGxBbmRTdHJva2U6ZS5maWxsKCk/aT1uKCkuVEVYVF9SRU5ERVJJTkdfTU9ERS5maWxsOmUuc3Ryb2tlKCkmJihpPW4oKS5URVhUX1JFTkRFUklOR19NT0RFLnN0cm9rZSksdC50cmFuc2Zvcm0oMSwwLDAsLTEsby54LG8ueStyLmZvbnRTaXplKSx0LmJlZ2luVGV4dCgpLHQuc2V0Rm9udChuKCkuZ2V0Rm9udFVSTChyKSxyLmZvbnRTaXplKSx0LnNldFRleHRSZW5kZXJpbmdNb2RlKGkpLHQuc2hvd1RleHQoZS5jb250ZW50KCkpLHQuZW5kVGV4dCgpfWZ1bmN0aW9uIGsoZSx0LG4pe3ZhciBpLHI9ZS5jaGlsZHJlbjtmb3IoaT0wO3IubGVuZ3RoPmk7KytpKWwocltpXSx0LG4pfWZ1bmN0aW9uIHgoZSx0KXt2YXIgbj1lLnNyYygpLGk9ZS5yZWN0KCkscj1pLmdldE9yaWdpbigpLG89aS5nZXRTaXplKCk7dC50cmFuc2Zvcm0oby53aWR0aCwwLDAsLW8uaGVpZ2h0LHIueCxyLnkrby5oZWlnaHQpLHQuZHJhd0ltYWdlKG4pfWZ1bmN0aW9uIEMoZSxuKXt2YXIgaT10LkRlZmVycmVkKCk7cmV0dXJuIGUub3B0aW9ucy5zZXQoXCJwZGZcIixuKSxELnBkZi50b0RhdGFVUkwoZSxpLnJlc29sdmUpLGkucHJvbWlzZSgpfWZ1bmN0aW9uIFModCl7dmFyIG49ZS5wYXJzZUNvbG9yKHQsITApO3JldHVybiBuP24udG9SR0IoKTpudWxsfWZ1bmN0aW9uIFQoZSl7ZnVuY3Rpb24gdChlKXtyZXR1cm4gbD0hMCxlfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIGUudmlzaWJsZSgpJiZlLm9wYWNpdHkoKT4wJiYoaChlLmZpbGwoKSl8fGgoZS5zdHJva2UoKSkpfWZ1bmN0aW9uIGkoZSl7dmFyIHQsbixpPVtdO2Zvcih0PTA7ZS5sZW5ndGg+dDsrK3Qpbj1hKGVbdF0pLG51bGwhPW4mJmkucHVzaChuKTtyZXR1cm4gaX1mdW5jdGlvbiByKGUsdCl7dmFyIG4saT1jLHI9ZDtlLnRyYW5zZm9ybSgpJiYoZD1kLm11bHRpcGx5Q29weShlLnRyYW5zZm9ybSgpLm1hdHJpeCgpKSksbj1lLmNsaXAoKSxuJiYobj1uLmJib3goKSxuJiYobj1uLmJib3goZCksYz1jP0EuUmVjdC5pbnRlcnNlY3QoYyxuKTpuKSk7dHJ5e3JldHVybiB0KCl9ZmluYWxseXtjPWksZD1yfX1mdW5jdGlvbiBvKGUpe2lmKG51bGw9PWMpcmV0dXJuITE7dmFyIHQ9ZS5yYXdCQm94KCkuYmJveChkKTtyZXR1cm4gYyYmdCYmKHQ9QS5SZWN0LmludGVyc2VjdCh0LGMpKSx0fWZ1bmN0aW9uIGEoYSl7aWYoIShhIGluc3RhbmNlb2YgRC5Hcm91cHx8YSBpbnN0YW5jZW9mIEQuTXVsdGlQYXRoKSl7dmFyIGw9byhhKTtpZighbClyZXR1cm4gdChudWxsKTt1PXU/QS5SZWN0LnVuaW9uKHUsbCk6bH1yZXR1cm4gcyh7UGF0aDpmdW5jdGlvbihlKXtyZXR1cm4gMCE9PWUuc2VnbWVudHMubGVuZ3RoJiZuKGUpP2U6dChudWxsKX0sTXVsdGlQYXRoOmZ1bmN0aW9uKGUpe2lmKCFuKGUpKXJldHVybiB0KG51bGwpO3ZhciByPW5ldyBELk11bHRpUGF0aChlLm9wdGlvbnMpO3JldHVybiByLnBhdGhzPWkoZS5wYXRocyksMD09PXIucGF0aHMubGVuZ3RoP3QobnVsbCk6cn0sQ2lyY2xlOmZ1bmN0aW9uKGUpe3JldHVybiBuKGUpP2U6dChudWxsKX0sQXJjOmZ1bmN0aW9uKGUpe3JldHVybiBuKGUpP2U6dChudWxsKX0sVGV4dDpmdW5jdGlvbihlKXtyZXR1cm4vXFxTLy50ZXN0KGUuY29udGVudCgpKSYmbihlKT9lOnQobnVsbCl9LEltYWdlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnZpc2libGUoKSYmZS5vcGFjaXR5KCk+MD9lOnQobnVsbCl9LEdyb3VwOmZ1bmN0aW9uKG4pe3JldHVybiByKG4sZnVuY3Rpb24oKXt2YXIgcj1uZXcgRC5Hcm91cChuLm9wdGlvbnMpO3JldHVybiByLmNoaWxkcmVuPWkobi5jaGlsZHJlbiksbiE9PWUmJjA9PT1yLmNoaWxkcmVuLmxlbmd0aD90KG51bGwpOnJ9KX19LGEpfXZhciBsLGM9ITEsZD1BLk1hdHJpeC51bml0KCksdT1udWxsO2RvIGw9ITEsZT1hKGUpO3doaWxlKGUmJmwpO3JldHVybntyb290OmUsYmJveDp1fX12YXIgRD1lLmRyYXdpbmcsQT1lLmdlb21ldHJ5LEU9e2Rhc2g6WzRdLGRhc2hEb3Q6WzQsMiwxLDJdLGRvdDpbMSwyXSxsb25nRGFzaDpbOCwyXSxsb25nRGFzaERvdDpbOCwyLDEsMl0sbG9uZ0Rhc2hEb3REb3Q6WzgsMiwxLDIsMSwyXSxzb2xpZDpbXX0sTT17YnV0dDowLHJvdW5kOjEsc3F1YXJlOjJ9LFA9e21pdGVyOjAscm91bmQ6MSxiZXZlbDoyfTtlLmRlZXBFeHRlbmQoRCx7ZXhwb3J0UERGOkMscGRmOnt0b0RhdGFVUkw6cix0b0Jsb2I6byxzYXZlQXM6YSx0b1N0cmVhbTppfX0pfSh3aW5kb3cua2VuZG8sd2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkoZSl7ZnVuY3Rpb24gdCh0KXtyZXR1cm4gaT10LmV4ZWMoZS5zdWJzdHIoYSkpfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIGUucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKX1mb3IodmFyIGkscj1bXSxvPTAsYT0wLHM9MCxsPSExO2UubGVuZ3RoPmE7KXQoL15cXHMrLyk/YSs9aVswXS5sZW5ndGg6dCgvXltcXChcXFtcXHtdLyk/KHMrKyxhKyspOnQoL15bXFwpXFxdXFx9XS8pPyhzLS0sYSsrKTohbCYmdCgvXltcXFwiXFwnXS8pPyhsPWlbMF0sYSsrKTpcIidcIj09bCYmdCgvXlxcXFxcXCcvKT9hKz0yOidcIic9PWwmJnQoL15cXFxcXFxcIi8pP2ErPTI6XCInXCI9PWwmJnQoL15cXCcvKT8obD0hMSxhKyspOidcIic9PWwmJnQoL15cXFwiLyk/KGw9ITEsYSsrKTp0KC9eXFxzKixcXHMqLyk/KCFsJiYhcyYmYT5vJiYoci5wdXNoKG4oZS5zdWJzdHJpbmcobyxhKSkpLG89YStpWzBdLmxlbmd0aCksYSs9aVswXS5sZW5ndGgpOmErKztyZXR1cm4gYT5vJiZyLnB1c2gobihlLnN1YnN0cmluZyhvLGEpKSkscn1mdW5jdGlvbiByKGUsdCl7dmFyIG49a2VuZG8ucGFyc2VDb2xvcihlKTtyZXR1cm4gbiYmKG49bi50b1JHQigpLHQ/bj1uLnRvQ3NzUmdiYSgpOjA9PT1uLmEmJihuPW51bGwpKSxufWZ1bmN0aW9uIG8oZSx0KXtmdW5jdGlvbiBuKGUpe2pbZV18fChqW2VdPSEwLG8ucHVzaChlKSl9ZnVuY3Rpb24gaSgpey0tcjw9MCYmdCgpfXZhciByLG89W107IWZ1bmN0aW9uIHMoZSl7dmFyIHQsaT1hKGgodShlKSxcImJhY2tncm91bmQtaW1hZ2VcIikpO2ZvcigvXmltZyQvaS50ZXN0KGUudGFnTmFtZSkmJm4oZS5zcmMpLGkmJm4oaSksdD1lLmZpcnN0Q2hpbGQ7dDt0PXQubmV4dFNpYmxpbmcpMT09dC5ub2RlVHlwZSYmcyh0KX0oZSkscj1vLmxlbmd0aCwwPT09ciYmaSgpLG8uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1qW2VdPW5ldyBJbWFnZTt0Lm9ubG9hZD1pLHQub25lcnJvcj1mdW5jdGlvbigpe2pbZV09bnVsbCxpKCl9LHQuc3JjPWUsKHQuY29tcGxldGV8fHZvaWQgMD09PXQuY29tcGxldGUpJiYodC5zcmM9XCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQUFBQUFBUC8vL3l3QUFBQUFBUUFCQUFBQ0FVd0FPdz09XCIsdC5zcmM9ZSl9KX1mdW5jdGlvbiBhKGUpe3ZhciB0PS9eXFxzKnVybFxcKChbJ1wiXT8pKC4qPylcXDFcXClcXHMqJC9pLmV4ZWMoZSk7cmV0dXJuIHQ/dFsyXTp2b2lkIDB9ZnVuY3Rpb24gcyhlLHQsbil7dmFyIGkscjtPPU9iamVjdC5jcmVhdGUoTyksT1tlLnRhZ05hbWUudG9Mb3dlckNhc2UoKV09e2VsZW1lbnQ6ZSxzdHlsZTp0fSxpPWgodCxcInRleHQtZGVjb3JhdGlvblwiKSxpJiZcIm5vbmVcIiE9aSYmKHI9aCh0LFwiY29sb3JcIiksaS5zcGxpdCgvXFxzKy9nKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09bZV18fChPW2VdPXIpfSkpLGQoZSkmJihPLl9zdGFja2luZ0NvbnRleHQ9e2VsZW1lbnQ6ZSxncm91cDpufSl9ZnVuY3Rpb24gbCgpe089T2JqZWN0LmdldFByb3RvdHlwZU9mKE8pfWZ1bmN0aW9uIGMoZSl7aWYobnVsbCE9Ty5fY2xpcGJveCl7dmFyIHQ9ZS5iYm94KE8uX21hdHJpeCk7Ty5fY2xpcGJveD1PLl9jbGlwYm94P1YuUmVjdC5pbnRlcnNlY3QoTy5fY2xpcGJveCx0KTp0fX1mdW5jdGlvbiBkKGUpe2Z1bmN0aW9uIHQoZSl7cmV0dXJuIGgobixlKX12YXIgbj11KGUpO3JldHVyblwibm9uZVwiIT10KFwidHJhbnNmb3JtXCIpfHxcInN0YXRpY1wiIT10KFwicG9zaXRpb25cIikmJlwiYXV0b1wiIT10KFwiei1pbmRleFwiKXx8dChcIm9wYWNpdHlcIik8MT8hMDp2b2lkIDB9ZnVuY3Rpb24gdShlKXtyZXR1cm4gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZSl9ZnVuY3Rpb24gaChlLHQpe3JldHVybiBlLmdldFByb3BlcnR5VmFsdWUodCl8fFcud2Via2l0JiZlLmdldFByb3BlcnR5VmFsdWUoXCItd2Via2l0LVwiK3QpfHxXLmZpcmVmb3gmJmUuZ2V0UHJvcGVydHlWYWx1ZShcIi1tb3otXCIrdCl8fFcub3BlcmEmJmUuZ2V0UHJvcGVydHlWYWx1ZShcIi1vLVwiK3QpfHxXLm1zaWUmJmUuZ2V0UHJvcGVydHlWYWx1ZShcIi1tcy1cIit0KX1mdW5jdGlvbiBwKGUsdCxuLGkpe2Uuc2V0UHJvcGVydHkodCxuLGkpLFcud2Via2l0P2Uuc2V0UHJvcGVydHkoXCItd2Via2l0LVwiK3QsbixpKTpXLmZpcmVmb3g/ZS5zZXRQcm9wZXJ0eShcIi1tb3otXCIrdCxuLGkpOlcub3BlcmE/ZS5zZXRQcm9wZXJ0eShcIi1vLVwiK3QsbixpKTpXLm1zaWUmJihlLnNldFByb3BlcnR5KFwiLW1zLVwiK3QsbixpKSx0PVwibXNcIit0LnJlcGxhY2UoLyhefC0pKFthLXpdKS9nLGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdCtuLnRvVXBwZXJDYXNlKCl9KSxlW3RdPW4pfWZ1bmN0aW9uIGYoZSxuKXtyZXR1cm4gbj1cImJvcmRlci1cIituLHt3aWR0aDp0KGgoZSxuK1wiLXdpZHRoXCIpKSxzdHlsZTpoKGUsbitcIi1zdHlsZVwiKSxjb2xvcjpyKGgoZSxuK1wiLWNvbG9yXCIpLCEwKX19ZnVuY3Rpb24gZyhlLHQpe3ZhciBuPWUuc3R5bGUuY3NzVGV4dCxpPXQoKTtyZXR1cm4gZS5zdHlsZS5jc3NUZXh0PW4saX1mdW5jdGlvbiBtKGUsbil7dmFyIGk9aChlLFwiYm9yZGVyLVwiK24rXCItcmFkaXVzXCIpLnNwbGl0KC9cXHMrL2cpLm1hcCh0KTtyZXR1cm4gMT09aS5sZW5ndGgmJmkucHVzaChpWzBdKSxTKHt4OmlbMF0seTppWzFdfSl9ZnVuY3Rpb24gdihlKXt2YXIgdD1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3JldHVybiB0PV8odCxcImJvcmRlci0qLXdpZHRoXCIsZSksdD1fKHQsXCJwYWRkaW5nLSpcIixlKX1mdW5jdGlvbiBfKGUsbixpKXt2YXIgcixvLGEscyxsO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBuPyhyPXUoaSksbz10KGgocixuLnJlcGxhY2UoXCIqXCIsXCJ0b3BcIikpKSxhPXQoaChyLG4ucmVwbGFjZShcIipcIixcInJpZ2h0XCIpKSkscz10KGgocixuLnJlcGxhY2UoXCIqXCIsXCJib3R0b21cIikpKSxsPXQoaChyLG4ucmVwbGFjZShcIipcIixcImxlZnRcIikpKSk6XCJudW1iZXJcIj09dHlwZW9mIG4mJihvPWE9cz1sPW4pLHt0b3A6ZS50b3ArbyxyaWdodDplLnJpZ2h0LWEsYm90dG9tOmUuYm90dG9tLXMsbGVmdDplLmxlZnQrbCx3aWR0aDplLnJpZ2h0LWUubGVmdC1hLWwsaGVpZ2h0OmUuYm90dG9tLWUudG9wLXMtb319ZnVuY3Rpb24geShlKXt2YXIgbixpLHI9aChlLFwidHJhbnNmb3JtXCIpO3JldHVyblwibm9uZVwiPT1yP251bGw6KG49L15cXHMqbWF0cml4XFwoXFxzKiguKj8pXFxzKlxcKVxccyokLy5leGVjKHIpLG4/KGk9aChlLFwidHJhbnNmb3JtLW9yaWdpblwiKSxuPW5bMV0uc3BsaXQoL1xccyosXFxzKi9nKS5tYXAodCksaT1pLnNwbGl0KC9cXHMrL2cpLm1hcCh0KSx7bWF0cml4Om4sb3JpZ2luOml9KTp2b2lkIDApfWZ1bmN0aW9uIHcoZSl7cmV0dXJuIDE4MCplL24uUEklMzYwfWZ1bmN0aW9uIGIoZSl7dmFyIGk9dChlKTtyZXR1cm4vZ3JhZCQvLnRlc3QoZSk/bi5QSSppLzIwMDovcmFkJC8udGVzdChlKT9pOi90dXJuJC8udGVzdChlKT9uLlBJKmkqMjovZGVnJC8udGVzdChlKT9uLlBJKmkvMTgwOnZvaWQgMH1mdW5jdGlvbiBrKGUsdCl7cmV0dXJuIHQ9bmV3IFYuTWF0cml4KHRbMF0sdFsxXSx0WzJdLHRbM10sdFs0XSx0WzVdKSxlLnRyYW5zZm9ybSh0KSx0fWZ1bmN0aW9uIHgoZSx0KXtlLmNsaXAodCl9ZnVuY3Rpb24gQyhlLHQsbixpKXtmb3IodmFyIHI9bmV3IFYuQXJjKFt0LG5dLGkpLmN1cnZlUG9pbnRzKCksbz0xO3IubGVuZ3RoPm87KWUuY3VydmVUbyhyW28rK10scltvKytdLHJbbysrXSl9ZnVuY3Rpb24gUyhlKXtyZXR1cm4oMD49ZS54fHwwPj1lLnkpJiYoZS54PWUueT0wKSxlfWZ1bmN0aW9uIFQoZSxuLGkpe3ZhciByLG8sYSxzLGwsYyxkLHAsZz11KGUpLHY9bShnLFwidG9wLWxlZnRcIiksXz1tKGcsXCJ0b3AtcmlnaHRcIikseT1tKGcsXCJib3R0b20tbGVmdFwiKSx3PW0oZyxcImJvdHRvbS1yaWdodFwiKTtyZXR1cm4oXCJwYWRkaW5nXCI9PWl8fFwiY29udGVudFwiPT1pKSYmKHI9ZihnLFwidG9wXCIpLG89ZihnLFwicmlnaHRcIiksYT1mKGcsXCJib3R0b21cIikscz1mKGcsXCJsZWZ0XCIpLHYueC09cy53aWR0aCx2LnktPXIud2lkdGgsXy54LT1vLndpZHRoLF8ueS09ci53aWR0aCx3LngtPW8ud2lkdGgsdy55LT1hLndpZHRoLHkueC09cy53aWR0aCx5LnktPWEud2lkdGgsXCJjb250ZW50XCI9PWkmJihsPXQoaChnLFwicGFkZGluZy10b3BcIikpLGM9dChoKGcsXCJwYWRkaW5nLXJpZ2h0XCIpKSxkPXQoaChnLFwicGFkZGluZy1ib3R0b21cIikpLHA9dChoKGcsXCJwYWRkaW5nLWxlZnRcIikpLHYueC09cCx2LnktPWwsXy54LT1jLF8ueS09bCx3LngtPWMsdy55LT1kLHkueC09cCx5LnktPWQpKSxcIm51bWJlclwiPT10eXBlb2YgaSYmKHYueC09aSx2LnktPWksXy54LT1pLF8ueS09aSx3LngtPWksdy55LT1pLHkueC09aSx5LnktPWkpLEQobix2LF8sdyx5KX1mdW5jdGlvbiBEKGUsdCxuLGkscil7dmFyIG89bmV3IE4uUGF0aCh7ZmlsbDpudWxsLHN0cm9rZTpudWxsfSk7cmV0dXJuIFModCksUyhuKSxTKGkpLFMociksby5tb3ZlVG8oZS5sZWZ0LGUudG9wK3QueSksdC54JiZDKG8sZS5sZWZ0K3QueCxlLnRvcCt0Lnkse3N0YXJ0QW5nbGU6LTE4MCxlbmRBbmdsZTotOTAscmFkaXVzWDp0LngscmFkaXVzWTp0Lnl9KSxvLmxpbmVUbyhlLnJpZ2h0LW4ueCxlLnRvcCksbi54JiZDKG8sZS5yaWdodC1uLngsZS50b3Arbi55LHtzdGFydEFuZ2xlOi05MCxlbmRBbmdsZTowLHJhZGl1c1g6bi54LHJhZGl1c1k6bi55fSksby5saW5lVG8oZS5yaWdodCxlLmJvdHRvbS1pLnkpLGkueCYmQyhvLGUucmlnaHQtaS54LGUuYm90dG9tLWkueSx7c3RhcnRBbmdsZTowLGVuZEFuZ2xlOjkwLHJhZGl1c1g6aS54LHJhZGl1c1k6aS55fSksby5saW5lVG8oZS5sZWZ0K3IueCxlLmJvdHRvbSksci54JiZDKG8sZS5sZWZ0K3IueCxlLmJvdHRvbS1yLnkse3N0YXJ0QW5nbGU6OTAsZW5kQW5nbGU6MTgwLHJhZGl1c1g6ci54LHJhZGl1c1k6ci55fSksby5jbG9zZSgpfWZ1bmN0aW9uIEEoZSxvKXtmdW5jdGlvbiBzKHQpe3ZhciBuLGkscixvLGEscztpZigvXnRkJC9pLnRlc3QoZS50YWdOYW1lKSYmKG49Ty50YWJsZSxuJiZcImNvbGxhcHNlXCI9PWgobi5zdHlsZSxcImJvcmRlci1jb2xsYXBzZVwiKSkpe2lmKGk9ZihuLnN0eWxlLFwibGVmdFwiKS53aWR0aCxyPWYobi5zdHlsZSxcInRvcFwiKS53aWR0aCwwPT09aSYmMD09PXIpcmV0dXJuIHQ7aWYobz1uLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYT1uLmVsZW1lbnQucm93c1swXS5jZWxsc1swXSxzPWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscy50b3A9PW8udG9wfHxzLmxlZnQ9PW8ubGVmdClyZXR1cm4gVS5jYWxsKHQpLm1hcChmdW5jdGlvbihlKXtyZXR1cm57bGVmdDplLmxlZnQraSx0b3A6ZS50b3ArcixyaWdodDplLnJpZ2h0K2ksYm90dG9tOmUuYm90dG9tK3IsaGVpZ2h0OmUuaGVpZ2h0LHdpZHRoOmUud2lkdGh9fSl9cmV0dXJuIHR9ZnVuY3Rpb24gbChlLHQsaSxyLGEscyxsLGMpe2Z1bmN0aW9uIGQodCxyLG8pe3ZhciBhPW4uUEkvMip0Lyh0K2kpLHM9e3g6ci54LXQseTpyLnktaX0sbD1uZXcgTi5QYXRoKHtmaWxsOntjb2xvcjplfSxzdHJva2U6bnVsbH0pLm1vdmVUbygwLDApO2sobCxvKSxDKGwsMCxyLnkse3N0YXJ0QW5nbGU6LTkwLGVuZEFuZ2xlOi13KGEpLHJhZGl1c1g6ci54LHJhZGl1c1k6ci55fSkscy54PjAmJnMueT4wPyhsLmxpbmVUbyhzLngqbi5jb3MoYSksci55LXMueSpuLnNpbihhKSksQyhsLDAsci55LHtzdGFydEFuZ2xlOi13KGEpLGVuZEFuZ2xlOi05MCxyYWRpdXNYOnMueCxyYWRpdXNZOnMueSxhbnRpY2xvY2t3aXNlOiEwfSkpOnMueD4wP2wubGluZVRvKHMueCxpKS5saW5lVG8oMCxpKTpsLmxpbmVUbyhzLngsaSkubGluZVRvKHMueCwwKSxoLmFwcGVuZChsLmNsb3NlKCkpfWlmKCEoMD49aSkpe3ZhciB1LGg9bmV3IE4uR3JvdXA7ayhoLGMpLG8uYXBwZW5kKGgpLFMocyksUyhsKSx1PW5ldyBOLlBhdGgoe2ZpbGw6e2NvbG9yOmV9LHN0cm9rZTpudWxsfSksaC5hcHBlbmQodSksdS5tb3ZlVG8ocy54P24ubWF4KHMueCxyKTowLDApLmxpbmVUbyh0LShsLng/bi5tYXgobC54LGEpOjApLDApLmxpbmVUbyh0LW4ubWF4KGwueCxhKSxpKS5saW5lVG8obi5tYXgocy54LHIpLGkpLmNsb3NlKCkscy54JiZkKHIscyxbLTEsMCwwLDEscy54LDBdKSxsLngmJmQoYSxsLFsxLDAsMCwxLHQtbC54LDBdKX19ZnVuY3Rpb24gZChlKXt2YXIgdCxuLGkscixhLHMsbCxjPW5ldyBOLkdyb3VwO2Zvcih4KGMsRChlLFksSyxYLFEpKSxvLmFwcGVuZChjKSxaJiYodD1uZXcgTi5QYXRoKHtmaWxsOntjb2xvcjpaLnRvQ3NzUmdiYSgpfSxzdHJva2U6bnVsbH0pLHQubW92ZVRvKGUubGVmdCxlLnRvcCkubGluZVRvKGUucmlnaHQsZS50b3ApLmxpbmVUbyhlLnJpZ2h0LGUuYm90dG9tKS5saW5lVG8oZS5sZWZ0LGUuYm90dG9tKS5jbG9zZSgpLGMuYXBwZW5kKHQpKSxsPXYubGVuZ3RoOy0tbD49MDspbj12W2xdLGk9eVtsXXx8eVt5Lmxlbmd0aC0xXSxyPWJbbF18fGJbYi5sZW5ndGgtMV0sYT1BW2xdfHxBW0EubGVuZ3RoLTFdLHM9UFtsXXx8UFtQLmxlbmd0aC0xXSxwKGMsZSxuLGkscixhLHMpfWZ1bmN0aW9uIHAobixpLHIsbyxzLGwsYyl7ZnVuY3Rpb24gZChuLGkscixhLGQpe2Z1bmN0aW9uIHUoKXtmb3IoO20ub3JpZ2luLng+aS5sZWZ0OyltLm9yaWdpbi54LT1yfWZ1bmN0aW9uIGgoKXtmb3IoO20ub3JpZ2luLnk+aS50b3A7KW0ub3JpZ2luLnktPWF9ZnVuY3Rpb24gcCgpe2Zvcig7aS5yaWdodD5tLm9yaWdpbi54OylkKG4sbS5jbG9uZSgpKSxtLm9yaWdpbi54Kz1yfXZhciBmLGcsbSx2LHk9ci9hLHc9aTtpZihcImNvbnRlbnQtYm94XCI9PWw/KHc9Xyh3LFwiYm9yZGVyLSotd2lkdGhcIixlKSx3PV8odyxcInBhZGRpbmctKlwiLGUpKTpcInBhZGRpbmctYm94XCI9PWwmJih3PV8odyxcImJvcmRlci0qLXdpZHRoXCIsZSkpLC9eXFxzKmF1dG8oXFxzK2F1dG8pP1xccyokLy50ZXN0KGMpfHwoZj1jLnNwbGl0KC9cXHMrL2cpLHI9LyUkLy50ZXN0KGZbMF0pP3cud2lkdGgqdChmWzBdKS8xMDA6dChmWzBdKSxhPTE9PWYubGVuZ3RofHxcImF1dG9cIj09ZlsxXT9yL3k6LyUkLy50ZXN0KGZbMV0pP3cuaGVpZ2h0KnQoZlsxXSkvMTAwOnQoZlsxXSkpLGc9KHMrXCJcIikuc3BsaXQoL1xccysvKSwxPT1nLmxlbmd0aCYmKGdbMV09XCI1MCVcIiksZ1swXT0vJSQvLnRlc3QoZ1swXSk/dChnWzBdKS8xMDAqKHcud2lkdGgtcik6dChnWzBdKSxnWzFdPS8lJC8udGVzdChnWzFdKT90KGdbMV0pLzEwMCoody5oZWlnaHQtYSk6dChnWzFdKSxtPW5ldyBWLlJlY3QoW3cubGVmdCtnWzBdLHcudG9wK2dbMV1dLFtyLGFdKSxcIm5vLXJlcGVhdFwiPT1vKWQobixtKTtlbHNlIGlmKFwicmVwZWF0LXhcIj09byl1KCkscCgpO2Vsc2UgaWYoXCJyZXBlYXQteVwiPT1vKWZvcihoKCk7aS5ib3R0b20+bS5vcmlnaW4ueTspZChuLG0uY2xvbmUoKSksbS5vcmlnaW4ueSs9YTtlbHNlIGlmKFwicmVwZWF0XCI9PW8pZm9yKHUoKSxoKCksdj1tLm9yaWdpbi5jbG9uZSgpO2kuYm90dG9tPm0ub3JpZ2luLnk7KW0ub3JpZ2luLng9di54LHAoKSxtLm9yaWdpbi55Kz1hfXZhciB1LGgscDtyJiZcIm5vbmVcIiE9ciYmKC9edXJsXFwoXFxcImRhdGE6aW1hZ2VcXC9zdmcvaS50ZXN0KHIpfHwodT1hKHIpLHU/KGg9alt1XSxoJiZoLndpZHRoPjAmJmguaGVpZ2h0PjAmJmQobixpLGgud2lkdGgsaC5oZWlnaHQsZnVuY3Rpb24oZSx0KXtlLmFwcGVuZChuZXcgTi5JbWFnZSh1LHQpKX0pKToocD1IKHIpLHAmJmQobixpLGkud2lkdGgsaS5oZWlnaHQsRShwKSkpKSl9ZnVuY3Rpb24gZyh0LG4saSl7ZnVuY3Rpb24gcihlKXtyZXR1cm57eDplLnkseTplLnh9fXZhciBhLHMsYztpZigwIT09dC53aWR0aCYmMCE9PXQuaGVpZ2h0JiYoZCh0KSxhPSQud2lkdGg+MCYmKG4mJlwibHRyXCI9PUp8fGkmJlwicnRsXCI9PUopLHM9Ry53aWR0aD4wJiYoaSYmXCJsdHJcIj09Snx8biYmXCJydGxcIj09SiksMCE9PUwud2lkdGh8fDAhPT0kLndpZHRofHwwIT09Ry53aWR0aHx8MCE9PXEud2lkdGgpKXtpZihMLmNvbG9yPT1HLmNvbG9yJiZMLmNvbG9yPT1xLmNvbG9yJiZMLmNvbG9yPT0kLmNvbG9yJiZMLndpZHRoPT1HLndpZHRoJiZMLndpZHRoPT1xLndpZHRoJiZMLndpZHRoPT0kLndpZHRoJiZhJiZzKXJldHVybiB0PV8odCxMLndpZHRoLzIpLGM9VChlLHQsTC53aWR0aC8yKSxjLm9wdGlvbnMuc3Ryb2tlPXtjb2xvcjpMLmNvbG9yLHdpZHRoOkwud2lkdGh9LHZvaWQgby5hcHBlbmQoYyk7aWYoMD09PVkueCYmMD09PUsueCYmMD09PVgueCYmMD09PVEueCYmMj5MLndpZHRoJiYyPiQud2lkdGgmJjI+Ry53aWR0aCYmMj5xLndpZHRoKXJldHVybiBMLndpZHRoPjAmJm8uYXBwZW5kKG5ldyBOLlBhdGgoe3N0cm9rZTp7d2lkdGg6TC53aWR0aCxjb2xvcjpMLmNvbG9yfX0pLm1vdmVUbyh0LmxlZnQsdC50b3ArTC53aWR0aC8yKS5saW5lVG8odC5yaWdodCx0LnRvcCtMLndpZHRoLzIpKSxxLndpZHRoPjAmJm8uYXBwZW5kKG5ldyBOLlBhdGgoe3N0cm9rZTp7d2lkdGg6cS53aWR0aCxjb2xvcjpxLmNvbG9yfX0pLm1vdmVUbyh0LmxlZnQsdC5ib3R0b20tcS53aWR0aC8yKS5saW5lVG8odC5yaWdodCx0LmJvdHRvbS1xLndpZHRoLzIpKSxhJiZvLmFwcGVuZChuZXcgTi5QYXRoKHtzdHJva2U6e3dpZHRoOiQud2lkdGgsY29sb3I6JC5jb2xvcn19KS5tb3ZlVG8odC5sZWZ0KyQud2lkdGgvMix0LnRvcCkubGluZVRvKHQubGVmdCskLndpZHRoLzIsdC5ib3R0b20pKSx2b2lkKHMmJm8uYXBwZW5kKG5ldyBOLlBhdGgoe3N0cm9rZTp7d2lkdGg6Ry53aWR0aCxjb2xvcjpHLmNvbG9yfX0pLm1vdmVUbyh0LnJpZ2h0LUcud2lkdGgvMix0LnRvcCkubGluZVRvKHQucmlnaHQtRy53aWR0aC8yLHQuYm90dG9tKSkpO2woTC5jb2xvcix0LndpZHRoLEwud2lkdGgsJC53aWR0aCxHLndpZHRoLFksSyxbMSwwLDAsMSx0LmxlZnQsdC50b3BdKSxsKHEuY29sb3IsdC53aWR0aCxxLndpZHRoLEcud2lkdGgsJC53aWR0aCxYLFEsWy0xLDAsMCwtMSx0LnJpZ2h0LHQuYm90dG9tXSksbCgkLmNvbG9yLHQuaGVpZ2h0LCQud2lkdGgscS53aWR0aCxMLndpZHRoLHIoUSkscihZKSxbMCwtMSwxLDAsdC5sZWZ0LHQuYm90dG9tXSksbChHLmNvbG9yLHQuaGVpZ2h0LEcud2lkdGgsTC53aWR0aCxxLndpZHRoLHIoSykscihYKSxbMCwxLC0xLDAsdC5yaWdodCx0LnRvcF0pfX12YXIgdix5LGIsQSxQLEksRixSLEI9dShlKSxMPWYoQixcInRvcFwiKSxHPWYoQixcInJpZ2h0XCIpLHE9ZihCLFwiYm90dG9tXCIpLCQ9ZihCLFwibGVmdFwiKSxZPW0oQixcInRvcC1sZWZ0XCIpLEs9bShCLFwidG9wLXJpZ2h0XCIpLFE9bShCLFwiYm90dG9tLWxlZnRcIiksWD1tKEIsXCJib3R0b20tcmlnaHRcIiksSj1oKEIsXCJkaXJlY3Rpb25cIiksWj1oKEIsXCJiYWNrZ3JvdW5kLWNvbG9yXCIpO2ZvcihaPXIoWiksdj1pKGgoQixcImJhY2tncm91bmQtaW1hZ2VcIikpLHk9aShoKEIsXCJiYWNrZ3JvdW5kLXJlcGVhdFwiKSksYj1pKGgoQixcImJhY2tncm91bmQtcG9zaXRpb25cIikpLEE9aShoKEIsXCJiYWNrZ3JvdW5kLW9yaWdpblwiKSksUD1pKGgoQixcImJhY2tncm91bmQtc2l6ZVwiKSksVy5tc2llJiYxMD5XLnZlcnNpb24mJihiPWkoZS5jdXJyZW50U3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uKSksST1fKGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXCJib3JkZXItKi13aWR0aFwiLGUpLGZ1bmN0aW9uKCl7dmFyIGUsbixpLHIsYSxzLGwsZD1oKEIsXCJjbGlwXCIpLHU9L15cXHMqcmVjdFxcKCguKilcXClcXHMqJC8uZXhlYyhkKTt1JiYoZT11WzFdLnNwbGl0KC9bICxdKy9nKSxuPVwiYXV0b1wiPT1lWzBdP0kudG9wOnQoZVswXSkrSS50b3AsaT1cImF1dG9cIj09ZVsxXT9JLnJpZ2h0OnQoZVsxXSkrSS5sZWZ0LHI9XCJhdXRvXCI9PWVbMl0/SS5ib3R0b206dChlWzJdKStJLnRvcCxhPVwiYXV0b1wiPT1lWzNdP0kubGVmdDp0KGVbM10pK0kubGVmdCxzPW5ldyBOLkdyb3VwLGw9KG5ldyBOLlBhdGgpLm1vdmVUbyhhLG4pLmxpbmVUbyhpLG4pLmxpbmVUbyhpLHIpLmxpbmVUbyhhLHIpLmNsb3NlKCkseChzLGwpLG8uYXBwZW5kKHMpLG89cyxjKGwpKX0oKSxGPWUuZ2V0Q2xpZW50UmVjdHMoKSwxPT1GLmxlbmd0aCYmKEY9W2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCldKSxGPXMoRiksUj0wO0YubGVuZ3RoPlI7KytSKWcoRltSXSwwPT09UixSPT1GLmxlbmd0aC0xKTtyZXR1cm4gZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dmFyIHQ9VChlLEksXCJwYWRkaW5nXCIpLG49bmV3IE4uR3JvdXA7eChuLHQpLG8uYXBwZW5kKG4pLG89bixjKHQpfS9eKGhpZGRlbnxhdXRvfHNjcm9sbCkvLnRlc3QoaChCLFwib3ZlcmZsb3dcIikpP3QoKTovXihoaWRkZW58YXV0b3xzY3JvbGwpLy50ZXN0KGgoQixcIm92ZXJmbG93LXhcIikpP3QoKTovXihoaWRkZW58YXV0b3xzY3JvbGwpLy50ZXN0KGgoQixcIm92ZXJmbG93LXlcIikpJiZ0KCl9KCksTShlLG8pfHx6KGUsbyksb31mdW5jdGlvbiBFKGUpe3JldHVybiBmdW5jdGlvbihpLHIpe3t2YXIgbyxhLHMsbCxjLGQsdSxoLHAsZixnLG0sdixfPXIud2lkdGgoKSx5PXIuaGVpZ2h0KCk7ci50b3BMZWZ0KCl9c3dpdGNoKGUudHlwZSl7Y2FzZVwibGluZWFyXCI6c3dpdGNoKG89bnVsbCE9ZS5hbmdsZT9lLmFuZ2xlOm4uUEksZS50byl7Y2FzZVwidG9wXCI6bz0wO2JyZWFrO2Nhc2VcImxlZnRcIjpvPS1uLlBJLzI7YnJlYWs7Y2FzZVwiYm90dG9tXCI6bz1uLlBJO2JyZWFrO2Nhc2VcInJpZ2h0XCI6bz1uLlBJLzI7YnJlYWs7Y2FzZVwidG9wIGxlZnRcIjpjYXNlXCJsZWZ0IHRvcFwiOm89LW4uYXRhbjIoeSxfKTticmVhaztjYXNlXCJ0b3AgcmlnaHRcIjpjYXNlXCJyaWdodCB0b3BcIjpvPW4uYXRhbjIoeSxfKTticmVhaztjYXNlXCJib3R0b20gbGVmdFwiOmNhc2VcImxlZnQgYm90dG9tXCI6bz1uLlBJK24uYXRhbjIoeSxfKTticmVhaztjYXNlXCJib3R0b20gcmlnaHRcIjpjYXNlXCJyaWdodCBib3R0b21cIjpvPW4uUEktbi5hdGFuMih5LF8pfWUucmV2ZXJzZSYmKG8tPW4uUEkpLG8lPTIqbi5QSSwwPm8mJihvKz0yKm4uUEkpLGE9bi5hYnMoXypuLnNpbihvKSkrbi5hYnMoeSpuLmNvcyhvKSkscz1uLmF0YW4oXypuLnRhbihvKS95KSxsPW4uc2luKHMpLGM9bi5jb3MocyksZD1uLmFicyhsKStuLmFicyhjKSx1PWQvMipsLGg9ZC8yKmMsbz5uLlBJLzImJjMqbi5QSS8yPj1vJiYodT0tdSxoPS1oKSxwPVtdLGY9MCxnPWUuc3RvcHMubWFwKGZ1bmN0aW9uKG4saSl7dmFyIHIsbz1uLnBlcmNlbnQ7cmV0dXJuIG8/bz10KG8pLzEwMDpuLmxlbmd0aD9vPXQobi5sZW5ndGgpL2E6MD09PWk/bz0wOmk9PWUuc3RvcHMubGVuZ3RoLTEmJihvPTEpLHI9e2NvbG9yOm4uY29sb3IudG9Dc3NSZ2JhKCksb2Zmc2V0Om99LG51bGwhPW8/KGY9byxwLmZvckVhY2goZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnN0b3A7bi5vZmZzZXQ9ZS5sZWZ0KyhmLWUubGVmdCkqKHQrMSkvKHAubGVuZ3RoKzEpfSkscD1bXSk6cC5wdXNoKHtsZWZ0OmYsc3RvcDpyfSkscn0pLG09Wy41LXUsLjUraF0sdj1bLjUrdSwuNS1oXSxpLmFwcGVuZChOLlBhdGguZnJvbVJlY3Qocikuc3Ryb2tlKG51bGwpLmZpbGwobmV3IE4uTGluZWFyR3JhZGllbnQoe3N0YXJ0Om0sZW5kOnYsc3RvcHM6Zyx1c2VyU3BhY2U6ITF9KSkpO2JyZWFrO2Nhc2VcInJhZGlhbFwiOndpbmRvdy5jb25zb2xlJiZ3aW5kb3cuY29uc29sZS5sb2cmJndpbmRvdy5jb25zb2xlLmxvZyhcIlJhZGlhbCBncmFkaWVudHMgYXJlIG5vdCB5ZXQgc3VwcG9ydGVkIGluIEhUTUwgcmVuZGVyZXJcIil9fX1mdW5jdGlvbiBNKHQsbil7dmFyIGkscixvLGE7cmV0dXJuIHQuZ2V0QXR0cmlidXRlKGtlbmRvLmF0dHIoXCJyb2xlXCIpKSYmKGk9a2VuZG8ud2lkZ2V0SW5zdGFuY2UoZSh0KSksaSYmKGkuZXhwb3J0RE9NVmlzdWFsfHxpLmV4cG9ydFZpc3VhbCkpPyhyPWkuZXhwb3J0RE9NVmlzdWFsP2kuZXhwb3J0RE9NVmlzdWFsKCk6aS5leHBvcnRWaXN1YWwoKSxvPW5ldyBOLkdyb3VwLG8uY2hpbGRyZW4ucHVzaChyKSxhPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksby50cmFuc2Zvcm0oVi50cmFuc2Zvcm0oKS50cmFuc2xhdGUoYS5sZWZ0LGEudG9wKSksbi5hcHBlbmQobyksITApOnZvaWQgMH1mdW5jdGlvbiBQKGUsdCxuKXt2YXIgaT12KGUpLHI9bmV3IFYuUmVjdChbaS5sZWZ0LGkudG9wXSxbaS53aWR0aCxpLmhlaWdodF0pLG89bmV3IE4uSW1hZ2UodCxyKTt4KG8sVChlLGksXCJjb250ZW50XCIpKSxuLmFwcGVuZChvKX1mdW5jdGlvbiBJKGUsbil7dmFyIGk9dShlKSxyPXUobiksbz10KGgoaSxcInotaW5kZXhcIikpLGE9dChoKHIsXCJ6LWluZGV4XCIpKSxzPWgoaSxcInBvc2l0aW9uXCIpLGw9aChyLFwicG9zaXRpb25cIik7cmV0dXJuIGlzTmFOKG8pJiZpc05hTihhKT8vc3RhdGljfGFic29sdXRlLy50ZXN0KHMpJiYvc3RhdGljfGFic29sdXRlLy50ZXN0KGwpPzA6XCJzdGF0aWNcIj09cz8tMTpcInN0YXRpY1wiPT1sPzE6MDppc05hTihvKT8wPT09YT8wOmE+MD8tMToxOmlzTmFOKGEpPzA9PT1vPzA6bz4wPzE6LTE6dChvKS10KGEpfWZ1bmN0aW9uIHooZSx0KXt2YXIgbixpLHIsbyxhLHMsbCxjLGQ7c3dpdGNoKGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJpbWdcIjpQKGUsZS5zcmMsdCk7YnJlYWs7Y2FzZVwiY2FudmFzXCI6dHJ5e1AoZSxlLnRvRGF0YVVSTChcImltYWdlL2pwZWdcIiksdCl9Y2F0Y2gocCl7fWJyZWFrO2Nhc2VcInRleHRhcmVhXCI6Y2FzZVwiaW5wdXRcIjpicmVhaztkZWZhdWx0OmZvcihuPVtdLGk9W10scj1bXSxvPVtdLGE9ZS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKXN3aXRjaChhLm5vZGVUeXBlKXtjYXNlIDM6L1xcUy8udGVzdChhLmRhdGEpJiZGKGUsYSx0KTticmVhaztjYXNlIDE6cz11KGEpLGw9aChzLFwiZGlzcGxheVwiKSxjPWgocyxcImZsb2F0XCIpLGQ9aChzLFwicG9zaXRpb25cIiksXCJzdGF0aWNcIiE9ZD9vLnB1c2goYSk6XCJpbmxpbmVcIiE9bD9cIm5vbmVcIiE9Yz9pLnB1c2goYSk6bi5wdXNoKGEpOnIucHVzaChhKX1uLnNvcnQoSSkuZm9yRWFjaChmdW5jdGlvbihlKXtCKGUsdCl9KSxpLnNvcnQoSSkuZm9yRWFjaChmdW5jdGlvbihlKXtCKGUsdCl9KSxyLnNvcnQoSSkuZm9yRWFjaChmdW5jdGlvbihlKXtCKGUsdCl9KSxvLnNvcnQoSSkuZm9yRWFjaChmdW5jdGlvbihlKXtCKGUsdCl9KX19ZnVuY3Rpb24gRihlLG4saSl7ZnVuY3Rpb24gcigpe2Zvcih2YXIgZSx0LGk7IS9cXFMvLnRlc3Qocy5jaGFyQXQocCkpOyl7aWYocD49ZilyZXR1cm4hMDtwKyt9Zm9yKGwuc2V0U3RhcnQobixwKSxlPTA7KytwPD1mOylpZigrK2UsbC5zZXRFbmQobixwKSxlPjEmJihkJiYvXFxzLy50ZXN0KHMuY2hhckF0KHAtMSkpfHxsLmdldENsaWVudFJlY3RzKCkubGVuZ3RoPjEpKXtsLnNldEVuZChuLC0tcCk7YnJlYWt9dD1sLmdldENsaWVudFJlY3RzKClbMF0saT0oXCJcIitsKS5yZXBsYWNlKC9cXHMrJC8sXCJcIiksbyhpLHQpfWZ1bmN0aW9uIG8oZSx0KXt2YXIgbixyLG87ZT1lLnJlcGxhY2UoL1tcXHJcXG4gXSsvZyxcIiBcIiksVy5tc2llJiYhaXNOYU4obSkmJihuPU4udXRpbC5tZWFzdXJlVGV4dChlLHtmb250OnZ9KSxyPSh0LnRvcCt0LmJvdHRvbS1uLmhlaWdodCkvMix0PXt0b3A6cixyaWdodDp0LnJpZ2h0LGJvdHRvbTpyK24uaGVpZ2h0LGxlZnQ6dC5sZWZ0LGhlaWdodDpuLmhlaWdodCx3aWR0aDp0LnJpZ2h0LXQubGVmdH0pLG89bmV3IE4uVGV4dChlLG5ldyBWLlBvaW50KHQubGVmdCx0LnRvcCkse2ZvbnQ6dixmaWxsOntjb2xvcjpffX0pLGkuYXBwZW5kKG8pLGEodCl9ZnVuY3Rpb24gYShlKXtmdW5jdGlvbiB0KHQsbil7dmFyIHIsbzt0JiYocj1nLzEyLG89bmV3IE4uUGF0aCh7c3Ryb2tlOnt3aWR0aDpyLGNvbG9yOnR9fSksbi09cixvLm1vdmVUbyhlLmxlZnQsbikubGluZVRvKGUucmlnaHQsbiksaS5hcHBlbmQobykpfXQoTy51bmRlcmxpbmUsZS5ib3R0b20pLHQoT1tcImxpbmUtdGhyb3VnaFwiXSxlLmJvdHRvbS1lLmhlaWdodC8yLjcpLHQoTy5vdmVybGluZSxlLnRvcCl9dmFyIHMsbCxjLGQscCxmLGcsbSx2LF8seT11KGUpO2lmKCEodChoKHksXCJ0ZXh0LWluZGVudFwiKSk8LTUwMCkmJihzPW4uZGF0YSxsPWUub3duZXJEb2N1bWVudC5jcmVhdGVSYW5nZSgpLGM9aCh5LFwidGV4dC1hbGlnblwiKSxkPVwianVzdGlmeVwiPT1jLHA9MCxmPS9cXFNcXHMqJC8uZXhlYyhuLmRhdGEpLmluZGV4KzEsZz1oKHksXCJmb250LXNpemVcIiksbT1oKHksXCJsaW5lLWhlaWdodFwiKSx2PVtoKHksXCJmb250LXN0eWxlXCIpLGgoeSxcImZvbnQtdmFyaWFudFwiKSxoKHksXCJmb250LXdlaWdodFwiKSxnLGgoeSxcImZvbnQtZmFtaWx5XCIpXS5qb2luKFwiIFwiKSxnPXQoZyksbT10KG0pLDAhPT1nKSlmb3IoXz1oKHksXCJjb2xvclwiKTshcigpOyk7fWZ1bmN0aW9uIFIoZSx0KXt2YXIgbixpLHI9Ty5fc3RhY2tpbmdDb250ZXh0Lmdyb3VwLG89ci5jaGlsZHJlbjtmb3Iobj0wO28ubGVuZ3RoPm4mJiEobnVsbCE9b1tuXS5fZG9tX3pJbmRleCYmb1tuXS5fZG9tX3pJbmRleD50KTsrK24pO3JldHVybiBpPW5ldyBOLkdyb3VwLHIuaW5zZXJ0QXQoaSxuKSxpLl9kb21fekluZGV4PXQsTy5fY2xpcGJveCYmaS5jbGlwKE4uUGF0aC5mcm9tUmVjdChPLl9jbGlwYm94KSksaX1mdW5jdGlvbiBCKG4saSl7dmFyIHIsbyxhLGMsZCxmLG07L14oc3R5bGV8c2NyaXB0fGxpbmt8bWV0YXxpZnJhbWV8c3ZnKSQvaS50ZXN0KG4udGFnTmFtZSl8fG51bGwhPU8uX2NsaXBib3gmJihyPXUobiksbz10KGgocixcIm9wYWNpdHlcIikpLGE9aChyLFwidmlzaWJpbGl0eVwiKSxjPWgocixcImRpc3BsYXlcIiksMCE9PW8mJlwiaGlkZGVuXCIhPWEmJlwibm9uZVwiIT1jJiYoZD15KHIpLG09aChyLFwiei1pbmRleFwiKSwoZHx8MT5vKSYmXCJhdXRvXCI9PW0mJihtPTApLFwiYXV0b1wiIT1tP2Y9UihpLG0pOihmPW5ldyBOLkdyb3VwLGkuYXBwZW5kKGYpKSxmLkRFQlVHPWUobikuZGF0YShcImRlYnVnXCIpLDE+byYmZi5vcGFjaXR5KG8qZi5vcGFjaXR5KCkpLHMobixyLGYpLGQ/ZyhuLGZ1bmN0aW9uKCl7dmFyIGUsdCxpLG87cChuLnN0eWxlLFwidHJhbnNmb3JtXCIsXCJub25lXCIsXCJpbXBvcnRhbnRcIikscChuLnN0eWxlLFwidHJhbnNpdGlvblwiLFwibm9uZVwiLFwiaW1wb3J0YW50XCIpLFwic3RhdGljXCI9PWgocixcInBvc2l0aW9uXCIpJiZwKG4uc3R5bGUsXCJwb3NpdGlvblwiLFwicmVsYXRpdmVcIixcImltcG9ydGFudFwiKSxlPW4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksdD1lLmxlZnQrZC5vcmlnaW5bMF0saT1lLnRvcCtkLm9yaWdpblsxXSxvPVsxLDAsMCwxLC10LC1pXSxvPUwobyxkLm1hdHJpeCksbz1MKG8sWzEsMCwwLDEsdCxpXSksbz1rKGYsbyksTy5fbWF0cml4PU8uX21hdHJpeC5tdWx0aXBseUNvcHkobyksQShuLGYpfSk6QShuLGYpLGwoKSkpfWZ1bmN0aW9uIEwoZSx0KXt2YXIgbj1lWzBdLGk9ZVsxXSxyPWVbMl0sbz1lWzNdLGE9ZVs0XSxzPWVbNV0sbD10WzBdLGM9dFsxXSxkPXRbMl0sdT10WzNdLGg9dFs0XSxwPXRbNV07cmV0dXJuW24qbCtpKmQsbipjK2kqdSxyKmwrbypkLHIqYytvKnUsYSpsK3MqZCtoLGEqYytzKnUrcF19dmFyIE8sSCxOPWtlbmRvLmRyYXdpbmcsVj1rZW5kby5nZW9tZXRyeSxVPUFycmF5LnByb3RvdHlwZS5zbGljZSxXPWtlbmRvLnN1cHBvcnQuYnJvd3NlcixqPXt9O04uZHJhd0RPTT1mdW5jdGlvbih0KXt2YXIgbj1lLkRlZmVycmVkKCk7cmV0dXJuIHQ9ZSh0KVswXSx0P28odCxmdW5jdGlvbigpe3ZhciBlPW5ldyBOLkdyb3VwLGk9dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtrKGUsWzEsMCwwLDEsLWkubGVmdCwtaS50b3BdKSxPLl9jbGlwYm94PSExLE8uX21hdHJpeD1WLk1hdHJpeC51bml0KCksTy5fc3RhY2tpbmdDb250ZXh0PXtlbGVtZW50OnQsZ3JvdXA6ZX0sQih0LGUpLG4ucmVzb2x2ZShlKX0pOm4ucmVqZWN0KFwiTm8gZWxlbWVudCB0byBleHBvcnRcIiksbi5wcm9taXNlKCl9LE89e30sSD1mdW5jdGlvbigpe3ZhciBlPS9eKCgtd2Via2l0LXwtbW96LXwtby18LW1zLSk/bGluZWFyLWdyYWRpZW50XFxzKilcXCgvLHQ9L14oWy0wLTkuXSslKS8sbj0vXihbLTAtOS5dK3B4KS8saT0vXihsZWZ0fHJpZ2h0fHRvcHxib3R0b218dG98Y2VudGVyKVxcVy8scj0vXihbLTAtOS5dKyhkZWd8Z3JhZHxyYWR8dHVybikpLyxvPS9eKFxccyspLyxhPS9eKFxcKCkvLHM9L14oXFwpKS8sbD0vXigsKS87cmV0dXJuIGZ1bmN0aW9uKGMpe2Z1bmN0aW9uIGQoKXt2YXIgZT1vLmV4ZWMoYyk7ZSYmKGM9Yy5zdWJzdHIoZVsxXS5sZW5ndGgpKX1mdW5jdGlvbiB1KGUpe2QoKTt2YXIgdD1lLmV4ZWMoYyk7cmV0dXJuIHQ/KGM9Yy5zdWJzdHIodFsxXS5sZW5ndGgpLHRbMV0pOnZvaWQgMH1mdW5jdGlvbiBoKCl7dmFyIGUsaSxyPWtlbmRvLnBhcnNlQ29sb3IoYywhMCk7cmV0dXJuIHI/KGM9Yy5zdWJzdHIoci5tYXRjaFswXS5sZW5ndGgpLHI9ci50b1JHQigpLChlPXUobikpfHwoaT11KHQpKSx7Y29sb3I6cixsZW5ndGg6ZSxwZXJjZW50Oml9KTp2b2lkIDB9ZnVuY3Rpb24gcChlKXt2YXIgbixvLGQscCxnLG0sdj1bXSxfPSExO2lmKHUoYSkpe2ZvcihuPXUociksbj8obj1iKG4pLHUobCkpOihvPXUoaSksXCJ0b1wiPT1vP289dShpKTpvJiYvXi0vLnRlc3QoZSkmJihfPSEwKSxkPXUoaSksdShsKSksLy1tb3otLy50ZXN0KGUpJiZudWxsPT1uJiZudWxsPT1vJiYocD11KHQpLGc9dSh0KSxfPSEwLFwiMCVcIj09cD9vPVwibGVmdFwiOlwiMTAwJVwiPT1wJiYobz1cInJpZ2h0XCIpLFwiMCVcIj09Zz9kPVwidG9wXCI6XCIxMDAlXCI9PWcmJihkPVwiYm90dG9tXCIpLHUobCkpO2MmJiF1KHMpJiYobT1oKCkpOyl2LnB1c2gobSksdShsKTtyZXR1cm57dHlwZTpcImxpbmVhclwiLGFuZ2xlOm4sdG86byYmZD9vK1wiIFwiK2Q6bz9vOmQ/ZDpudWxsLHN0b3BzOnYscmV2ZXJzZTpfLG9yaWc6Zn19fXZhciBmPWMsZz11KGUpO3JldHVybiBnP3AoZyk6dm9pZCAwfX0oKX0od2luZG93LmtlbmRvLmpRdWVyeSxwYXJzZUZsb2F0LE1hdGgpLGZ1bmN0aW9uKGUpe3ZhciB0PWUubm9vcCxuPXdpbmRvdy5rZW5kbyxpPW4uQ2xhc3Mscj1uLnV0aWwsbz1uLmFuaW1hdGlvbkZyYW1lLGE9bi5kZWVwRXh0ZW5kLHM9aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO24ub3B0aW9ucz1hKHt9LG4ub3B0aW9ucyx0KSxuLmVsZW1lbnQ9ZX0sb3B0aW9uczp7ZHVyYXRpb246NTAwLGVhc2luZzpcInN3aW5nXCJ9LHNldHVwOnQsc3RlcDp0LHBsYXk6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLGk9ZS5lYXNpbmdbbi5lYXNpbmddLGE9bi5kdXJhdGlvbixzPW4uZGVsYXl8fDAsbD1yLm5vdygpK3MsYz1sK2E7MD09PWE/KHQuc3RlcCgxKSx0LmFib3J0KCkpOnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbigpe3ZhciBuLHMsZCx1O3QuX3N0b3BwZWR8fChuPXIubm93KCkscz1yLmxpbWl0VmFsdWUobi1sLDAsYSksZD1zL2EsdT1pKGQscywwLDEsYSksdC5zdGVwKHUpLGM+bj9vKGUpOnQuYWJvcnQoKSl9O2UoKX0scyl9LGFib3J0OmZ1bmN0aW9uKCl7dGhpcy5fc3RvcHBlZD0hMH0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuYWJvcnQoKX19KSxsPWZ1bmN0aW9uKCl7dGhpcy5faXRlbXM9W119O2wucHJvdG90eXBlPXtyZWdpc3RlcjpmdW5jdGlvbihlLHQpe3RoaXMuX2l0ZW1zLnB1c2goe25hbWU6ZSx0eXBlOnR9KX0sY3JlYXRlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG89dGhpcy5faXRlbXM7aWYodCYmdC50eXBlKWZvcihpPXQudHlwZS50b0xvd2VyQ2FzZSgpLHI9MDtvLmxlbmd0aD5yO3IrKylpZihvW3JdLm5hbWUudG9Mb3dlckNhc2UoKT09PWkpe249b1tyXTticmVha31yZXR1cm4gbj9uZXcgbi50eXBlKGUsdCk6dm9pZCAwfX0sbC5jdXJyZW50PW5ldyBsLHMuY3JlYXRlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbC5jdXJyZW50LmNyZWF0ZShlLHQsbil9LGEobi5kcmF3aW5nLHtBbmltYXRpb246cyxBbmltYXRpb25GYWN0b3J5Omx9KX0od2luZG93LmtlbmRvLmpRdWVyeSxNYXRoKSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciBuLGk9cy51aS52YWxpZGF0b3IucnVsZVJlc29sdmVyc3x8e30scj17fTtmb3IobiBpbiBpKWUuZXh0ZW5kKCEwLHIsaVtuXS5yZXNvbHZlKHQpKTtyZXR1cm4gcn1mdW5jdGlvbiBuKGUpe3JldHVybiBlLnJlcGxhY2UoLyZhbXAvZyxcIiZhbXA7XCIpLnJlcGxhY2UoLyZxdW90Oy9nLCdcIicpLnJlcGxhY2UoLyYjMzk7L2csXCInXCIpLnJlcGxhY2UoLyZsdDsvZyxcIjxcIikucmVwbGFjZSgvJmd0Oy9nLFwiPlwiKX1mdW5jdGlvbiBpKGUpe3JldHVybiBlPShlK1wiXCIpLnNwbGl0KFwiLlwiKSxlLmxlbmd0aD4xP2VbMV0ubGVuZ3RoOjB9ZnVuY3Rpb24gcih0KXtyZXR1cm4gZShlLnBhcnNlSFRNTD9lLnBhcnNlSFRNTCh0KTp0KX1mdW5jdGlvbiBvKHQsbil7dmFyIGkscixvLGEsbD1lKCk7Zm9yKG89MCxhPXQubGVuZ3RoO2E+bztvKyspaT10W29dLHUudGVzdChpLmNsYXNzTmFtZSkmJihyPWkuZ2V0QXR0cmlidXRlKHMuYXR0cihcImZvclwiKSkscj09PW4mJihsPWwuYWRkKGkpKSk7cmV0dXJuIGx9dmFyIGEscz13aW5kb3cua2VuZG8sbD1zLnVpLldpZGdldCxjPVwiLmtlbmRvVmFsaWRhdG9yXCIsZD1cImstaW52YWxpZC1tc2dcIix1PVJlZ0V4cChkLFwiaVwiKSxoPVwiay1pbnZhbGlkXCIscD0vXigoKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSsoXFwuKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSspKil8KChcXHgyMikoKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPygoW1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4N2ZdfFxceDIxfFtcXHgyMy1cXHg1Yl18W1xceDVkLVxceDdlXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KFxcXFwoW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBkLVxceDdmXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSkqKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPyhcXHgyMikpKUAoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkkL2ksZj0vXihodHRwcz98ZnRwKTpcXC9cXC8oKCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OikqQCk/KCgoXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pXFwuKFxcZHxbMS05XVxcZHwxXFxkXFxkfDJbMC00XVxcZHwyNVswLTVdKVxcLihcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSlcXC4oXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pKXwoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4/KSg6XFxkKik/KShcXC8oKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6fEApKyhcXC8oKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCkqKSopPyk/KFxcPygoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCl8W1xcdUUwMDAtXFx1RjhGRl18XFwvfFxcPykqKT8oXFwjKCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKXxcXC98XFw/KSopPyQvaSxnPVwiOmlucHV0Om5vdCg6YnV0dG9uLFt0eXBlPXN1Ym1pdF0sW3R5cGU9cmVzZXRdLFtkaXNhYmxlZF0sW3JlYWRvbmx5XSlcIixtPVwiOmNoZWNrYm94Om5vdChbZGlzYWJsZWRdLFtyZWFkb25seV0pXCIsdj1cIlt0eXBlPW51bWJlcl0sW3R5cGU9cmFuZ2VdXCIsXz1cImJsdXJcIix5PVwibmFtZVwiLHc9XCJmb3JtXCIsYj1cIm5vdmFsaWRhdGVcIixrPWUucHJveHkseD1mdW5jdGlvbihlLHQpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0JiYodD1SZWdFeHAoXCJeKD86XCIrdCtcIikkXCIpKSx0LnRlc3QoZSl9LEM9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPWUudmFsKCk7cmV0dXJuIGUuZmlsdGVyKHQpLmxlbmd0aCYmXCJcIiE9PWk/eChpLG4pOiEwfSxTPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubGVuZ3RoP251bGwhPWVbMF0uYXR0cmlidXRlc1t0XTohMX07cy51aS52YWxpZGF0b3J8fChzLnVpLnZhbGlkYXRvcj17cnVsZXM6e30sbWVzc2FnZXM6e319KSxhPWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKG4saSl7dmFyIHI9dGhpcyxvPXQobiksYT1cIltcIitzLmF0dHIoXCJ2YWxpZGF0ZVwiKStcIiE9ZmFsc2VdXCI7aT1pfHx7fSxpLnJ1bGVzPWUuZXh0ZW5kKHt9LHMudWkudmFsaWRhdG9yLnJ1bGVzLG8ucnVsZXMsaS5ydWxlcyksaS5tZXNzYWdlcz1lLmV4dGVuZCh7fSxzLnVpLnZhbGlkYXRvci5tZXNzYWdlcyxvLm1lc3NhZ2VzLGkubWVzc2FnZXMpLGwuZm4uaW5pdC5jYWxsKHIsbixpKSxyLl9lcnJvclRlbXBsYXRlPXMudGVtcGxhdGUoci5vcHRpb25zLmVycm9yVGVtcGxhdGUpLHIuZWxlbWVudC5pcyh3KSYmci5lbGVtZW50LmF0dHIoYixiKSxyLl9pbnB1dFNlbGVjdG9yPWcrYSxyLl9jaGVja2JveFNlbGVjdG9yPW0rYSxyLl9lcnJvcnM9e30sci5fYXR0YWNoRXZlbnRzKCksci5faXNWYWxpZGF0ZWQ9ITF9LGV2ZW50czpbXCJ2YWxpZGF0ZVwiLFwiY2hhbmdlXCJdLG9wdGlvbnM6e25hbWU6XCJWYWxpZGF0b3JcIixlcnJvclRlbXBsYXRlOic8c3BhbiBjbGFzcz1cImstd2lkZ2V0IGstdG9vbHRpcCBrLXRvb2x0aXAtdmFsaWRhdGlvblwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstd2FybmluZ1wiPiA8L3NwYW4+ICM9bWVzc2FnZSM8L3NwYW4+JyxtZXNzYWdlczp7cmVxdWlyZWQ6XCJ7MH0gaXMgcmVxdWlyZWRcIixwYXR0ZXJuOlwiezB9IGlzIG5vdCB2YWxpZFwiLG1pbjpcInswfSBzaG91bGQgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHsxfVwiLG1heDpcInswfSBzaG91bGQgYmUgc21hbGxlciB0aGFuIG9yIGVxdWFsIHRvIHsxfVwiLHN0ZXA6XCJ7MH0gaXMgbm90IHZhbGlkXCIsZW1haWw6XCJ7MH0gaXMgbm90IHZhbGlkIGVtYWlsXCIsdXJsOlwiezB9IGlzIG5vdCB2YWxpZCBVUkxcIixkYXRlOlwiezB9IGlzIG5vdCB2YWxpZCBkYXRlXCJ9LHJ1bGVzOntyZXF1aXJlZDpmdW5jdGlvbihlKXt2YXIgdD1lLmZpbHRlcihcIlt0eXBlPWNoZWNrYm94XVwiKS5sZW5ndGgmJiFlLmlzKFwiOmNoZWNrZWRcIiksbj1lLnZhbCgpO3JldHVybiEoUyhlLFwicmVxdWlyZWRcIikmJihcIlwiPT09bnx8IW58fHQpKX0scGF0dGVybjpmdW5jdGlvbihlKXtyZXR1cm4gZS5maWx0ZXIoXCJbdHlwZT10ZXh0XSxbdHlwZT1lbWFpbF0sW3R5cGU9dXJsXSxbdHlwZT10ZWxdLFt0eXBlPXNlYXJjaF0sW3R5cGU9cGFzc3dvcmRdXCIpLmZpbHRlcihcIltwYXR0ZXJuXVwiKS5sZW5ndGgmJlwiXCIhPT1lLnZhbCgpP3goZS52YWwoKSxlLmF0dHIoXCJwYXR0ZXJuXCIpKTohMH0sbWluOmZ1bmN0aW9uKGUpe2lmKGUuZmlsdGVyKHYrXCIsW1wiK3MuYXR0cihcInR5cGVcIikrXCI9bnVtYmVyXVwiKS5maWx0ZXIoXCJbbWluXVwiKS5sZW5ndGgmJlwiXCIhPT1lLnZhbCgpKXt2YXIgdD1wYXJzZUZsb2F0KGUuYXR0cihcIm1pblwiKSl8fDAsbj1zLnBhcnNlRmxvYXQoZS52YWwoKSk7cmV0dXJuIG4+PXR9cmV0dXJuITB9LG1heDpmdW5jdGlvbihlKXtpZihlLmZpbHRlcih2K1wiLFtcIitzLmF0dHIoXCJ0eXBlXCIpK1wiPW51bWJlcl1cIikuZmlsdGVyKFwiW21heF1cIikubGVuZ3RoJiZcIlwiIT09ZS52YWwoKSl7dmFyIHQ9cGFyc2VGbG9hdChlLmF0dHIoXCJtYXhcIikpfHwwLG49cy5wYXJzZUZsb2F0KGUudmFsKCkpO3JldHVybiB0Pj1ufXJldHVybiEwfSxzdGVwOmZ1bmN0aW9uKGUpe2lmKGUuZmlsdGVyKHYrXCIsW1wiK3MuYXR0cihcInR5cGVcIikrXCI9bnVtYmVyXVwiKS5maWx0ZXIoXCJbc3RlcF1cIikubGVuZ3RoJiZcIlwiIT09ZS52YWwoKSl7dmFyIHQsbj1wYXJzZUZsb2F0KGUuYXR0cihcIm1pblwiKSl8fDAscj1wYXJzZUZsb2F0KGUuYXR0cihcInN0ZXBcIikpfHwxLG89cGFyc2VGbG9hdChlLnZhbCgpKSxhPWkocik7cmV0dXJuIGE/KHQ9TWF0aC5wb3coMTAsYSksKG8tbikqdCUocip0KS9NYXRoLnBvdygxMDAsYSk9PT0wKTooby1uKSVyPT09MH1yZXR1cm4hMH0sZW1haWw6ZnVuY3Rpb24oZSl7cmV0dXJuIEMoZSxcIlt0eXBlPWVtYWlsXSxbXCIrcy5hdHRyKFwidHlwZVwiKStcIj1lbWFpbF1cIixwKX0sdXJsOmZ1bmN0aW9uKGUpe3JldHVybiBDKGUsXCJbdHlwZT11cmxdLFtcIitzLmF0dHIoXCJ0eXBlXCIpK1wiPXVybF1cIixmKX0sZGF0ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5maWx0ZXIoXCJbdHlwZV49ZGF0ZV0sW1wiK3MuYXR0cihcInR5cGVcIikrXCI9ZGF0ZV1cIikubGVuZ3RoJiZcIlwiIT09ZS52YWwoKT9udWxsIT09cy5wYXJzZURhdGUoZS52YWwoKSxlLmF0dHIocy5hdHRyKFwiZm9ybWF0XCIpKSk6ITB9fSx2YWxpZGF0ZU9uQmx1cjohMH0sZGVzdHJveTpmdW5jdGlvbigpe2wuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuZWxlbWVudC5vZmYoYyl9LHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzVmFsaWRhdGVkPzA9PT10aGlzLmVycm9ycygpLmxlbmd0aDohMX0sX3N1Ym1pdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy52YWxpZGF0ZSgpPyEwOihlLnN0b3BQcm9wYWdhdGlvbigpLGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksZS5wcmV2ZW50RGVmYXVsdCgpLCExKX0sX2NoZWNrRWxlbWVudDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnZhbHVlKCk7dGhpcy52YWxpZGF0ZUlucHV0KGUpLHRoaXMudmFsdWUoKSE9PXQmJnRoaXMudHJpZ2dlcihcImNoYW5nZVwiKX0sX2F0dGFjaEV2ZW50czpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5lbGVtZW50LmlzKHcpJiZ0LmVsZW1lbnQub24oXCJzdWJtaXRcIitjLGsodC5fc3VibWl0LHQpKSx0Lm9wdGlvbnMudmFsaWRhdGVPbkJsdXImJih0LmVsZW1lbnQuaXMoZyk/KHQuZWxlbWVudC5vbihfK2MsZnVuY3Rpb24oKXt0Ll9jaGVja0VsZW1lbnQodC5lbGVtZW50KX0pLHQuZWxlbWVudC5pcyhtKSYmdC5lbGVtZW50Lm9uKFwiY2xpY2tcIitjLGZ1bmN0aW9uKCl7dC5fY2hlY2tFbGVtZW50KHQuZWxlbWVudCl9KSk6KHQuZWxlbWVudC5vbihfK2MsdC5faW5wdXRTZWxlY3RvcixmdW5jdGlvbigpe3QuX2NoZWNrRWxlbWVudChlKHRoaXMpKX0pLHQuZWxlbWVudC5vbihcImNsaWNrXCIrYyx0Ll9jaGVja2JveFNlbGVjdG9yLGZ1bmN0aW9uKCl7dC5fY2hlY2tFbGVtZW50KGUodGhpcykpfSkpKX0sdmFsaWRhdGU6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyPSExLG89dGhpcy52YWx1ZSgpO2lmKHRoaXMuX2Vycm9ycz17fSx0aGlzLmVsZW1lbnQuaXMoZykpcj10aGlzLnZhbGlkYXRlSW5wdXQodGhpcy5lbGVtZW50KTtlbHNle2ZvcihpPSExLGU9dGhpcy5lbGVtZW50LmZpbmQodGhpcy5faW5wdXRTZWxlY3RvciksdD0wLG49ZS5sZW5ndGg7bj50O3QrKyl0aGlzLnZhbGlkYXRlSW5wdXQoZS5lcSh0KSl8fChpPSEwKTtyPSFpfXJldHVybiB0aGlzLnRyaWdnZXIoXCJ2YWxpZGF0ZVwiLHt2YWxpZDpyfSksbyE9PXImJnRoaXMudHJpZ2dlcihcImNoYW5nZVwiKSxyfSx2YWxpZGF0ZUlucHV0OmZ1bmN0aW9uKHQpe3ZhciBpLG8sYSxsLGMsdSxwLGYsZztyZXR1cm4gdD1lKHQpLHRoaXMuX2lzVmFsaWRhdGVkPSEwLGk9dGhpcyxvPWkuX2Vycm9yVGVtcGxhdGUsYT1pLl9jaGVja1ZhbGlkaXR5KHQpLGw9YS52YWxpZCxjPVwiLlwiK2QsdT10LmF0dHIoeSl8fFwiXCIscD1pLl9maW5kTWVzc2FnZUNvbnRhaW5lcih1KS5hZGQodC5uZXh0KGMpLmZpbHRlcihmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7cmV0dXJuIHQuZmlsdGVyKFwiW1wiK3MuYXR0cihcImZvclwiKStcIl1cIikubGVuZ3RoP3QuYXR0cihzLmF0dHIoXCJmb3JcIikpPT09dTohMH0pKS5oaWRlKCksdC5yZW1vdmVBdHRyKFwiYXJpYS1pbnZhbGlkXCIpLGw/ZGVsZXRlIGkuX2Vycm9yc1t1XTooZj1pLl9leHRyYWN0TWVzc2FnZSh0LGEua2V5KSxpLl9lcnJvcnNbdV09ZixnPXIobyh7bWVzc2FnZTpuKGYpfSkpLGkuX2RlY29yYXRlTWVzc2FnZUNvbnRhaW5lcihnLHUpLHAucmVwbGFjZVdpdGgoZykubGVuZ3RofHxnLmluc2VydEFmdGVyKHQpLGcuc2hvdygpLHQuYXR0cihcImFyaWEtaW52YWxpZFwiLCEwKSksdC50b2dnbGVDbGFzcyhoLCFsKSxsfSxoaWRlTWVzc2FnZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9XCIuXCIrZCxuPWUuZWxlbWVudDtuLmlzKGcpP24ubmV4dCh0KS5oaWRlKCk6bi5maW5kKHQpLmhpZGUoKX0sX2ZpbmRNZXNzYWdlQ29udGFpbmVyOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixhPXMudWkudmFsaWRhdG9yLm1lc3NhZ2VMb2NhdG9ycyxsPWUoKTtmb3IoaT0wLHI9dGhpcy5lbGVtZW50Lmxlbmd0aDtyPmk7aSsrKWw9bC5hZGQobyh0aGlzLmVsZW1lbnRbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLHQpKTtmb3IobiBpbiBhKWw9bC5hZGQoYVtuXS5sb2NhdGUodGhpcy5lbGVtZW50LHQpKTtyZXR1cm4gbH0sX2RlY29yYXRlTWVzc2FnZUNvbnRhaW5lcjpmdW5jdGlvbihlLHQpe3ZhciBuLGk9cy51aS52YWxpZGF0b3IubWVzc2FnZUxvY2F0b3JzO2UuYWRkQ2xhc3MoZCkuYXR0cihzLmF0dHIoXCJmb3JcIiksdHx8XCJcIik7Zm9yKG4gaW4gaSlpW25dLmRlY29yYXRlKGUsdCk7ZS5hdHRyKFwicm9sZVwiLFwiYWxlcnRcIilcbn0sX2V4dHJhY3RNZXNzYWdlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPW4ub3B0aW9ucy5tZXNzYWdlc1t0XSxyPWUuYXR0cih5KTtyZXR1cm4gaT1zLmlzRnVuY3Rpb24oaSk/aShlKTppLHMuZm9ybWF0KGUuYXR0cihzLmF0dHIodCtcIi1tc2dcIikpfHxlLmF0dHIoXCJ2YWxpZGF0aW9uTWVzc2FnZVwiKXx8ZS5hdHRyKFwidGl0bGVcIil8fGl8fFwiXCIscixlLmF0dHIodCkpfSxfY2hlY2tWYWxpZGl0eTpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMub3B0aW9ucy5ydWxlcztmb3IodCBpbiBuKWlmKCFuW3RdLmNhbGwodGhpcyxlKSlyZXR1cm57dmFsaWQ6ITEsa2V5OnR9O3JldHVybnt2YWxpZDohMH19LGVycm9yczpmdW5jdGlvbigpe3ZhciBlLHQ9W10sbj10aGlzLl9lcnJvcnM7Zm9yKGUgaW4gbil0LnB1c2gobltlXSk7cmV0dXJuIHR9fSkscy51aS5wbHVnaW4oYSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXt2YXIgbj1lLngubG9jYXRpb24saT1lLnkubG9jYXRpb24scj10LngubG9jYXRpb24sbz10LnkubG9jYXRpb24sYT1uLXIscz1pLW87cmV0dXJue2NlbnRlcjp7eDoobityKS8yLHk6KGkrbykvMn0sZGlzdGFuY2U6TWF0aC5zcXJ0KGEqYStzKnMpfX1mdW5jdGlvbiBuKGUpe3ZhciB0LG4saSxyPVtdLGE9ZS5vcmlnaW5hbEV2ZW50LHM9ZS5jdXJyZW50VGFyZ2V0LGw9MDtpZihlLmFwaSlyLnB1c2goe2lkOjIsZXZlbnQ6ZSx0YXJnZXQ6ZS50YXJnZXQsY3VycmVudFRhcmdldDplLnRhcmdldCxsb2NhdGlvbjplLHR5cGU6XCJhcGlcIn0pO2Vsc2UgaWYoZS50eXBlLm1hdGNoKC90b3VjaC8pKWZvcihuPWE/YS5jaGFuZ2VkVG91Y2hlczpbXSx0PW4ubGVuZ3RoO3Q+bDtsKyspaT1uW2xdLHIucHVzaCh7bG9jYXRpb246aSxldmVudDplLHRhcmdldDppLnRhcmdldCxjdXJyZW50VGFyZ2V0OnMsaWQ6aS5pZGVudGlmaWVyLHR5cGU6XCJ0b3VjaFwifSk7ZWxzZSByLnB1c2goby5wb2ludGVyc3x8by5tc1BvaW50ZXJzP3tsb2NhdGlvbjphLGV2ZW50OmUsdGFyZ2V0OmUudGFyZ2V0LGN1cnJlbnRUYXJnZXQ6cyxpZDphLnBvaW50ZXJJZCx0eXBlOlwicG9pbnRlclwifTp7aWQ6MSxldmVudDplLHRhcmdldDplLnRhcmdldCxjdXJyZW50VGFyZ2V0OnMsbG9jYXRpb246ZSx0eXBlOlwibW91c2VcIn0pO3JldHVybiByfWZ1bmN0aW9uIGkoZSl7Zm9yKHZhciB0PXIuZXZlbnRNYXAudXAuc3BsaXQoXCIgXCIpLG49MCxpPXQubGVuZ3RoO2k+bjtuKyspZSh0W25dKX12YXIgcj13aW5kb3cua2VuZG8sbz1yLnN1cHBvcnQsYT13aW5kb3cuZG9jdW1lbnQscz1yLkNsYXNzLGw9ci5PYnNlcnZhYmxlLGM9ZS5ub3csZD1lLmV4dGVuZCx1PW8ubW9iaWxlT1MsaD11JiZ1LmFuZHJvaWQscD04MDAsZj1vLmJyb3dzZXIubXNpZT81OjAsZz1cInByZXNzXCIsbT1cImhvbGRcIix2PVwic2VsZWN0XCIsXz1cInN0YXJ0XCIseT1cIm1vdmVcIix3PVwiZW5kXCIsYj1cImNhbmNlbFwiLGs9XCJ0YXBcIix4PVwicmVsZWFzZVwiLEM9XCJnZXN0dXJlc3RhcnRcIixTPVwiZ2VzdHVyZWNoYW5nZVwiLFQ9XCJnZXN0dXJlZW5kXCIsRD1cImdlc3R1cmV0YXBcIixBPXthcGk6MCx0b3VjaDowLG1vdXNlOjkscG9pbnRlcjo5fSxFPXMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztuLmF4aXM9ZSxuLl91cGRhdGVMb2NhdGlvbkRhdGEodCksbi5zdGFydExvY2F0aW9uPW4ubG9jYXRpb24sbi52ZWxvY2l0eT1uLmRlbHRhPTAsbi50aW1lU3RhbXA9YygpfSxtb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lW1wicGFnZVwiK3QuYXhpc10saT1jKCkscj1pLXQudGltZVN0YW1wfHwxOyhufHwhaCkmJih0LmRlbHRhPW4tdC5sb2NhdGlvbix0Ll91cGRhdGVMb2NhdGlvbkRhdGEoZSksdC5pbml0aWFsRGVsdGE9bi10LnN0YXJ0TG9jYXRpb24sdC52ZWxvY2l0eT10LmRlbHRhL3IsdC50aW1lU3RhbXA9aSl9LF91cGRhdGVMb2NhdGlvbkRhdGE6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuYXhpczt0LmxvY2F0aW9uPWVbXCJwYWdlXCIrbl0sdC5jbGllbnQ9ZVtcImNsaWVudFwiK25dLHQuc2NyZWVuPWVbXCJzY3JlZW5cIituXX19KSxNPXMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXtkKHRoaXMse3g6bmV3IEUoXCJYXCIsbi5sb2NhdGlvbikseTpuZXcgRShcIllcIixuLmxvY2F0aW9uKSx0eXBlOm4udHlwZSx0aHJlc2hvbGQ6ZS50aHJlc2hvbGR8fEFbbi50eXBlXSx1c2VyRXZlbnRzOmUsdGFyZ2V0OnQsY3VycmVudFRhcmdldDpuLmN1cnJlbnRUYXJnZXQsaW5pdGlhbFRvdWNoOm4udGFyZ2V0LGlkOm4uaWQscHJlc3NFdmVudDpuLF9tb3ZlZDohMSxfZmluaXNoZWQ6ITF9KX0scHJlc3M6ZnVuY3Rpb24oKXt0aGlzLl9ob2xkVGltZW91dD1zZXRUaW1lb3V0KGUucHJveHkodGhpcyxcIl9ob2xkXCIpLHRoaXMudXNlckV2ZW50cy5taW5Ib2xkKSx0aGlzLl90cmlnZ2VyKGcsdGhpcy5wcmVzc0V2ZW50KX0sX2hvbGQ6ZnVuY3Rpb24oKXt0aGlzLl90cmlnZ2VyKG0sdGhpcy5wcmVzc0V2ZW50KX0sbW92ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCF0Ll9maW5pc2hlZCl7aWYodC54Lm1vdmUoZS5sb2NhdGlvbiksdC55Lm1vdmUoZS5sb2NhdGlvbiksIXQuX21vdmVkKXtpZih0Ll93aXRoaW5JZ25vcmVUaHJlc2hvbGQoKSlyZXR1cm47aWYoUC5jdXJyZW50JiZQLmN1cnJlbnQhPT10LnVzZXJFdmVudHMpcmV0dXJuIHQuZGlzcG9zZSgpO3QuX3N0YXJ0KGUpfXQuX2ZpbmlzaGVkfHx0Ll90cmlnZ2VyKHksZSl9fSxlbmQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmVuZFRpbWU9YygpLHQuX2ZpbmlzaGVkfHwodC5fZmluaXNoZWQ9ITAsdC5fdHJpZ2dlcih4LGUpLHQuX21vdmVkP3QuX3RyaWdnZXIodyxlKTp0Ll90cmlnZ2VyKGssZSksY2xlYXJUaW1lb3V0KHQuX2hvbGRUaW1lb3V0KSx0LmRpc3Bvc2UoKSl9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnVzZXJFdmVudHMsbj10LnRvdWNoZXM7dGhpcy5fZmluaXNoZWQ9ITAsdGhpcy5wcmVzc0V2ZW50PW51bGwsY2xlYXJUaW1lb3V0KHRoaXMuX2hvbGRUaW1lb3V0KSxuLnNwbGljZShlLmluQXJyYXkodGhpcyxuKSwxKX0sc2tpcDpmdW5jdGlvbigpe3RoaXMuZGlzcG9zZSgpfSxjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmRpc3Bvc2UoKX0saXNNb3ZlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb3ZlZH0sX3N0YXJ0OmZ1bmN0aW9uKGUpe2NsZWFyVGltZW91dCh0aGlzLl9ob2xkVGltZW91dCksdGhpcy5zdGFydFRpbWU9YygpLHRoaXMuX21vdmVkPSEwLHRoaXMuX3RyaWdnZXIoXyxlKX0sX3RyaWdnZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9dC5ldmVudCxyPXt0b3VjaDpuLHg6bi54LHk6bi55LHRhcmdldDpuLnRhcmdldCxldmVudDppfTtuLnVzZXJFdmVudHMubm90aWZ5KGUscikmJmkucHJldmVudERlZmF1bHQoKX0sX3dpdGhpbklnbm9yZVRocmVzaG9sZDpmdW5jdGlvbigpe3ZhciBlPXRoaXMueC5pbml0aWFsRGVsdGEsdD10aGlzLnkuaW5pdGlhbERlbHRhO3JldHVybiBNYXRoLnNxcnQoZSplK3QqdCk8PXRoaXMudGhyZXNob2xkfX0pLFA9bC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgcyxjLHUsaD10aGlzLEE9ci5ndWlkKCk7bj1ufHx7fSxzPWguZmlsdGVyPW4uZmlsdGVyLGgudGhyZXNob2xkPW4udGhyZXNob2xkfHxmLGgubWluSG9sZD1uLm1pbkhvbGR8fHAsaC50b3VjaGVzPVtdLGguX21heFRvdWNoZXM9bi5tdWx0aVRvdWNoPzI6MSxoLmFsbG93U2VsZWN0aW9uPW4uYWxsb3dTZWxlY3Rpb24saC5jYXB0dXJlVXBJZk1vdmVkPW4uY2FwdHVyZVVwSWZNb3ZlZCxoLmV2ZW50TlM9QSx0PWUodCkuaGFuZGxlcihoKSxsLmZuLmluaXQuY2FsbChoKSxkKGgse2VsZW1lbnQ6dCxzdXJmYWNlOmUobi5nbG9iYWwmJiFvLnRvdWNoP2EuZG9jdW1lbnRFbGVtZW50Om4uc3VyZmFjZXx8dCksc3RvcFByb3BhZ2F0aW9uOm4uc3RvcFByb3BhZ2F0aW9uLHByZXNzZWQ6ITF9KSxoLnN1cmZhY2UuaGFuZGxlcihoKS5vbihyLmFwcGx5RXZlbnRNYXAoXCJtb3ZlXCIsQSksXCJfbW92ZVwiKS5vbihyLmFwcGx5RXZlbnRNYXAoXCJ1cCBjYW5jZWxcIixBKSxcIl9lbmRcIiksdC5vbihyLmFwcGx5RXZlbnRNYXAoXCJkb3duXCIsQSkscyxcIl9zdGFydFwiKSwoby5wb2ludGVyc3x8by5tc1BvaW50ZXJzKSYmdC5jc3MoXCItbXMtdG91Y2gtYWN0aW9uXCIsXCJwaW5jaC16b29tIGRvdWJsZS10YXAtem9vbVwiKSxuLnByZXZlbnREcmFnRXZlbnQmJnQub24oci5hcHBseUV2ZW50TWFwKFwiZHJhZ3N0YXJ0XCIsQSksci5wcmV2ZW50RGVmYXVsdCksdC5vbihyLmFwcGx5RXZlbnRNYXAoXCJtb3VzZWRvd25cIixBKSxzLHtyb290OnR9LFwiX3NlbGVjdFwiKSxoLmNhcHR1cmVVcElmTW92ZWQmJm8uZXZlbnRDYXB0dXJlJiYoYz1oLnN1cmZhY2VbMF0sdT1lLnByb3h5KGgucHJldmVudElmTW92aW5nLGgpLGkoZnVuY3Rpb24oZSl7Yy5hZGRFdmVudExpc3RlbmVyKGUsdSwhMCl9KSksaC5iaW5kKFtnLG0sayxfLHksdyx4LGIsQyxTLFQsRCx2XSxuKX0scHJldmVudElmTW92aW5nOmZ1bmN0aW9uKGUpe3RoaXMuX2lzTW92ZWQoKSYmZS5wcmV2ZW50RGVmYXVsdCgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzO3QuX2Rlc3Ryb3llZHx8KHQuX2Rlc3Ryb3llZD0hMCx0LmNhcHR1cmVVcElmTW92ZWQmJm8uZXZlbnRDYXB0dXJlJiYoZT10LnN1cmZhY2VbMF0saShmdW5jdGlvbihuKXtlLnJlbW92ZUV2ZW50TGlzdGVuZXIobix0LnByZXZlbnRJZk1vdmluZyl9KSksdC5lbGVtZW50LmtlbmRvRGVzdHJveSh0LmV2ZW50TlMpLHQuc3VyZmFjZS5rZW5kb0Rlc3Ryb3kodC5ldmVudE5TKSx0LmVsZW1lbnQucmVtb3ZlRGF0YShcImhhbmRsZXJcIiksdC5zdXJmYWNlLnJlbW92ZURhdGEoXCJoYW5kbGVyXCIpLHQuX2Rpc3Bvc2VBbGwoKSx0LnVuYmluZCgpLGRlbGV0ZSB0LnN1cmZhY2UsZGVsZXRlIHQuZWxlbWVudCxkZWxldGUgdC5jdXJyZW50VGFyZ2V0KX0sY2FwdHVyZTpmdW5jdGlvbigpe1AuY3VycmVudD10aGlzfSxjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLl9kaXNwb3NlQWxsKCksdGhpcy50cmlnZ2VyKGIpfSxub3RpZnk6ZnVuY3Rpb24oZSxuKXt2YXIgaT10aGlzLHI9aS50b3VjaGVzO2lmKHRoaXMuX2lzTXVsdGlUb3VjaCgpKXtzd2l0Y2goZSl7Y2FzZSB5OmU9UzticmVhaztjYXNlIHc6ZT1UO2JyZWFrO2Nhc2UgazplPUR9ZChuLHt0b3VjaGVzOnJ9LHQoclswXSxyWzFdKSl9cmV0dXJuIHRoaXMudHJpZ2dlcihlLGQobix7dHlwZTplfSkpfSxwcmVzczpmdW5jdGlvbihlLHQsbil7dGhpcy5fYXBpQ2FsbChcIl9zdGFydFwiLGUsdCxuKX0sbW92ZTpmdW5jdGlvbihlLHQpe3RoaXMuX2FwaUNhbGwoXCJfbW92ZVwiLGUsdCl9LGVuZDpmdW5jdGlvbihlLHQpe3RoaXMuX2FwaUNhbGwoXCJfZW5kXCIsZSx0KX0sX2lzTXVsdGlUb3VjaDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvdWNoZXMubGVuZ3RoPjF9LF9tYXhUb3VjaGVzUmVhY2hlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvdWNoZXMubGVuZ3RoPj10aGlzLl9tYXhUb3VjaGVzfSxfZGlzcG9zZUFsbDpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLnRvdWNoZXM7ZS5sZW5ndGg+MDspZS5wb3AoKS5kaXNwb3NlKCl9LF9pc01vdmVkOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZ3JlcCh0aGlzLnRvdWNoZXMsZnVuY3Rpb24oZSl7cmV0dXJuIGUuaXNNb3ZlZCgpfSkubGVuZ3RofSxfc2VsZWN0OmZ1bmN0aW9uKGUpeyghdGhpcy5hbGxvd1NlbGVjdGlvbnx8dGhpcy50cmlnZ2VyKHYse2V2ZW50OmV9KSkmJmUucHJldmVudERlZmF1bHQoKX0sX3N0YXJ0OmZ1bmN0aW9uKHQpe3ZhciBpLHIsbz10aGlzLGE9MCxzPW8uZmlsdGVyLGw9bih0KSxjPWwubGVuZ3RoLGQ9dC53aGljaDtpZighKGQmJmQ+MXx8by5fbWF4VG91Y2hlc1JlYWNoZWQoKSkpZm9yKFAuY3VycmVudD1udWxsLG8uY3VycmVudFRhcmdldD10LmN1cnJlbnRUYXJnZXQsby5zdG9wUHJvcGFnYXRpb24mJnQuc3RvcFByb3BhZ2F0aW9uKCk7Yz5hJiYhby5fbWF4VG91Y2hlc1JlYWNoZWQoKTthKyspcj1sW2FdLGk9cz9lKHIuY3VycmVudFRhcmdldCk6by5lbGVtZW50LGkubGVuZ3RoJiYocj1uZXcgTShvLGksciksby50b3VjaGVzLnB1c2gociksci5wcmVzcygpLG8uX2lzTXVsdGlUb3VjaCgpJiZvLm5vdGlmeShcImdlc3R1cmVzdGFydFwiLHt9KSl9LF9tb3ZlOmZ1bmN0aW9uKGUpe3RoaXMuX2VhY2hUb3VjaChcIm1vdmVcIixlKX0sX2VuZDpmdW5jdGlvbihlKXt0aGlzLl9lYWNoVG91Y2goXCJlbmRcIixlKX0sX2VhY2hUb3VjaDpmdW5jdGlvbihlLHQpe3ZhciBpLHIsbyxhLHM9dGhpcyxsPXt9LGM9bih0KSxkPXMudG91Y2hlcztmb3IoaT0wO2QubGVuZ3RoPmk7aSsrKXI9ZFtpXSxsW3IuaWRdPXI7Zm9yKGk9MDtjLmxlbmd0aD5pO2krKylvPWNbaV0sYT1sW28uaWRdLGEmJmFbZV0obyl9LF9hcGlDYWxsOmZ1bmN0aW9uKHQsbixpLHIpe3RoaXNbdF0oe2FwaTohMCxwYWdlWDpuLHBhZ2VZOmksY2xpZW50WDpuLGNsaWVudFk6aSx0YXJnZXQ6ZShyfHx0aGlzLmVsZW1lbnQpWzBdLHN0b3BQcm9wYWdhdGlvbjplLm5vb3AscHJldmVudERlZmF1bHQ6ZS5ub29wfSl9fSk7UC5kZWZhdWx0VGhyZXNob2xkPWZ1bmN0aW9uKGUpe2Y9ZX0sUC5taW5Ib2xkPWZ1bmN0aW9uKGUpe3A9ZX0sci5nZXRUb3VjaGVzPW4sci50b3VjaERlbHRhPXQsci5Vc2VyRXZlbnRzPVB9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbih0LG4pe3RyeXtyZXR1cm4gZS5jb250YWlucyh0LG4pfHx0PT1ufWNhdGNoKGkpe3JldHVybiExfX1mdW5jdGlvbiBpKGUsdCl7cmV0dXJuIHBhcnNlSW50KGUuY3NzKHQpLDEwKXx8MH1mdW5jdGlvbiByKGUsdCl7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KGUsdC5taW4pLHQubWF4KX1mdW5jdGlvbiBvKGUsdCl7dmFyIG49ayhlKSxyPW4ubGVmdCtpKGUsXCJib3JkZXJMZWZ0V2lkdGhcIikraShlLFwicGFkZGluZ0xlZnRcIiksbz1uLnRvcCtpKGUsXCJib3JkZXJUb3BXaWR0aFwiKStpKGUsXCJwYWRkaW5nVG9wXCIpLGE9citlLndpZHRoKCktdC5vdXRlcldpZHRoKCEwKSxzPW8rZS5oZWlnaHQoKS10Lm91dGVySGVpZ2h0KCEwKTtyZXR1cm57eDp7bWluOnIsbWF4OmF9LHk6e21pbjpvLG1heDpzfX19ZnVuY3Rpb24gYShlLG4saSl7Zm9yKHZhciByLG8sYT0wLHM9biYmbi5sZW5ndGgsbD1pJiZpLmxlbmd0aDtlJiZlLnBhcmVudE5vZGU7KXtmb3IoYT0wO3M+YTthKyspaWYocj1uW2FdLHIuZWxlbWVudFswXT09PWUpcmV0dXJue3RhcmdldDpyLHRhcmdldEVsZW1lbnQ6ZX07Zm9yKGE9MDtsPmE7YSsrKWlmKG89aVthXSxmLm1hdGNoZXNTZWxlY3Rvci5jYWxsKGUsby5vcHRpb25zLmZpbHRlcikpcmV0dXJue3RhcmdldDpvLHRhcmdldEVsZW1lbnQ6ZX07ZT1lLnBhcmVudE5vZGV9cmV0dXJuIHR9dmFyIHMsbCxjLGQsdSxoLHA9d2luZG93LmtlbmRvLGY9cC5zdXBwb3J0LGc9d2luZG93LmRvY3VtZW50LG09cC5DbGFzcyx2PXAudWkuV2lkZ2V0LF89cC5PYnNlcnZhYmxlLHk9cC5Vc2VyRXZlbnRzLHc9ZS5wcm94eSxiPWUuZXh0ZW5kLGs9cC5nZXRPZmZzZXQseD17fSxDPXt9LFM9e30sVD1wLmVsZW1lbnRVbmRlckN1cnNvcixEPVwia2V5dXBcIixBPVwiY2hhbmdlXCIsRT1cImRyYWdzdGFydFwiLE09XCJob2xkXCIsUD1cImRyYWdcIixJPVwiZHJhZ2VuZFwiLHo9XCJkcmFnY2FuY2VsXCIsRj1cImRyYWdlbnRlclwiLFI9XCJkcmFnbGVhdmVcIixCPVwiZHJvcFwiLEw9Xy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzLHI9dFswXTtpLmNhcHR1cmU9ITEsci5hZGRFdmVudExpc3RlbmVyPyhlLmVhY2gocC5ldmVudE1hcC5kb3duLnNwbGl0KFwiIFwiKSxmdW5jdGlvbigpe3IuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLHcoaS5fcHJlc3MsaSksITApfSksZS5lYWNoKHAuZXZlbnRNYXAudXAuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKCl7ci5hZGRFdmVudExpc3RlbmVyKHRoaXMsdyhpLl9yZWxlYXNlLGkpLCEwKX0pKTooZS5lYWNoKHAuZXZlbnRNYXAuZG93bi5zcGxpdChcIiBcIiksZnVuY3Rpb24oKXtyLmF0dGFjaEV2ZW50KHRoaXMsdyhpLl9wcmVzcyxpKSl9KSxlLmVhY2gocC5ldmVudE1hcC51cC5zcGxpdChcIiBcIiksZnVuY3Rpb24oKXtyLmF0dGFjaEV2ZW50KHRoaXMsdyhpLl9yZWxlYXNlLGkpKX0pKSxfLmZuLmluaXQuY2FsbChpKSxpLmJpbmQoW1wicHJlc3NcIixcInJlbGVhc2VcIl0sbnx8e30pfSxjYXB0dXJlTmV4dDpmdW5jdGlvbigpe3RoaXMuY2FwdHVyZT0hMH0sY2FuY2VsQ2FwdHVyZTpmdW5jdGlvbigpe3RoaXMuY2FwdHVyZT0hMX0sX3ByZXNzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC50cmlnZ2VyKFwicHJlc3NcIiksdC5jYXB0dXJlJiZlLnByZXZlbnREZWZhdWx0KCl9LF9yZWxlYXNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC50cmlnZ2VyKFwicmVsZWFzZVwiKSx0LmNhcHR1cmUmJihlLnByZXZlbnREZWZhdWx0KCksdC5jYW5jZWxDYXB0dXJlKCkpfX0pLE89Xy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCl7dmFyIG49dGhpcztfLmZuLmluaXQuY2FsbChuKSxuLmZvcmNlZEVuYWJsZWQ9ITEsZS5leHRlbmQobix0KSxuLnNjYWxlPTEsbi5ob3Jpem9udGFsPyhuLm1lYXN1cmU9XCJvZmZzZXRXaWR0aFwiLG4uc2Nyb2xsU2l6ZT1cInNjcm9sbFdpZHRoXCIsbi5heGlzPVwieFwiKToobi5tZWFzdXJlPVwib2Zmc2V0SGVpZ2h0XCIsbi5zY3JvbGxTaXplPVwic2Nyb2xsSGVpZ2h0XCIsbi5heGlzPVwieVwiKX0sbWFrZVZpcnR1YWw6ZnVuY3Rpb24oKXtlLmV4dGVuZCh0aGlzLHt2aXJ0dWFsOiEwLGZvcmNlZEVuYWJsZWQ6ITAsX3ZpcnR1YWxNaW46MCxfdmlydHVhbE1heDowfSl9LHZpcnR1YWxTaXplOmZ1bmN0aW9uKGUsdCl7KHRoaXMuX3ZpcnR1YWxNaW4hPT1lfHx0aGlzLl92aXJ0dWFsTWF4IT09dCkmJih0aGlzLl92aXJ0dWFsTWluPWUsdGhpcy5fdmlydHVhbE1heD10LHRoaXMudXBkYXRlKCkpfSxvdXRPZkJvdW5kczpmdW5jdGlvbihlKXtyZXR1cm4gZT50aGlzLm1heHx8dGhpcy5taW4+ZX0sZm9yY2VFbmFibGVkOmZ1bmN0aW9uKCl7dGhpcy5mb3JjZWRFbmFibGVkPSEwfSxnZXRTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGFpbmVyWzBdW3RoaXMubWVhc3VyZV19LGdldFRvdGFsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudFswXVt0aGlzLnNjcm9sbFNpemVdfSxyZXNjYWxlOmZ1bmN0aW9uKGUpe3RoaXMuc2NhbGU9ZX0sdXBkYXRlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LnZpcnR1YWw/dC5fdmlydHVhbE1heDp0LmdldFRvdGFsKCksaT1uKnQuc2NhbGUscj10LmdldFNpemUoKTswIT09biYmKHQubWF4PXQudmlydHVhbD8tdC5fdmlydHVhbE1pbjowLHQuc2l6ZT1yLHQudG90YWw9aSx0Lm1pbj1NYXRoLm1pbih0Lm1heCxyLWkpLHQubWluU2NhbGU9ci9uLHQuY2VudGVyT2Zmc2V0PShpLXIpLzIsdC5lbmFibGVkPXQuZm9yY2VkRW5hYmxlZHx8aT5yLGV8fHQudHJpZ2dlcihBLHQpKX19KSxIPV8uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7Xy5mbi5pbml0LmNhbGwodCksdC54PW5ldyBPKGIoe2hvcml6b250YWw6ITB9LGUpKSx0Lnk9bmV3IE8oYih7aG9yaXpvbnRhbDohMX0sZSkpLHQuY29udGFpbmVyPWUuY29udGFpbmVyLHQuZm9yY2VkTWluU2NhbGU9ZS5taW5TY2FsZSx0Lm1heFNjYWxlPWUubWF4U2NhbGV8fDEwMCx0LmJpbmQoQSxlKX0scmVzY2FsZTpmdW5jdGlvbihlKXt0aGlzLngucmVzY2FsZShlKSx0aGlzLnkucmVzY2FsZShlKSx0aGlzLnJlZnJlc2goKX0sY2VudGVyQ29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXtyZXR1cm57eDpNYXRoLm1pbigwLC10aGlzLnguY2VudGVyT2Zmc2V0KSx5Ok1hdGgubWluKDAsLXRoaXMueS5jZW50ZXJPZmZzZXQpfX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS54LnVwZGF0ZSgpLGUueS51cGRhdGUoKSxlLmVuYWJsZWQ9ZS54LmVuYWJsZWR8fGUueS5lbmFibGVkLGUubWluU2NhbGU9ZS5mb3JjZWRNaW5TY2FsZXx8TWF0aC5taW4oZS54Lm1pblNjYWxlLGUueS5taW5TY2FsZSksZS5maXRTY2FsZT1NYXRoLm1heChlLngubWluU2NhbGUsZS55Lm1pblNjYWxlKSxlLnRyaWdnZXIoQSl9fSksTj1fLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2IodCxlKSxfLmZuLmluaXQuY2FsbCh0KX0sb3V0T2ZCb3VuZHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaW1lbnNpb24ub3V0T2ZCb3VuZHModGhpcy5tb3ZhYmxlW3RoaXMuYXhpc10pfSxkcmFnTW92ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5kaW1lbnNpb24saT10LmF4aXMscj10Lm1vdmFibGUsbz1yW2ldK2U7bi5lbmFibGVkJiYoKG4ubWluPm8mJjA+ZXx8bz5uLm1heCYmZT4wKSYmKGUqPXQucmVzaXN0YW5jZSksci50cmFuc2xhdGVBeGlzKGksZSksdC50cmlnZ2VyKEEsdCkpfX0pLFY9bS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbz10aGlzO2Iobyx7ZWxhc3RpYzohMH0sZSksaT1vLmVsYXN0aWM/LjU6MCxyPW8ubW92YWJsZSxvLng9dD1uZXcgTih7YXhpczpcInhcIixkaW1lbnNpb246by5kaW1lbnNpb25zLngscmVzaXN0YW5jZTppLG1vdmFibGU6cn0pLG8ueT1uPW5ldyBOKHtheGlzOlwieVwiLGRpbWVuc2lvbjpvLmRpbWVuc2lvbnMueSxyZXNpc3RhbmNlOmksbW92YWJsZTpyfSksby51c2VyRXZlbnRzLmJpbmQoW1wibW92ZVwiLFwiZW5kXCIsXCJnZXN0dXJlc3RhcnRcIixcImdlc3R1cmVjaGFuZ2VcIl0se2dlc3R1cmVzdGFydDpmdW5jdGlvbihlKXtvLmdlc3R1cmU9ZSxvLm9mZnNldD1vLmRpbWVuc2lvbnMuY29udGFpbmVyLm9mZnNldCgpfSxnZXN0dXJlY2hhbmdlOmZ1bmN0aW9uKGUpe3ZhciBpLGEscyxsPW8uZ2VzdHVyZSxjPWwuY2VudGVyLGQ9ZS5jZW50ZXIsdT1lLmRpc3RhbmNlL2wuZGlzdGFuY2UsaD1vLmRpbWVuc2lvbnMubWluU2NhbGUscD1vLmRpbWVuc2lvbnMubWF4U2NhbGU7aD49ci5zY2FsZSYmMT51JiYodSs9LjgqKDEtdSkpLHIuc2NhbGUqdT49cCYmKHU9cC9yLnNjYWxlKSxhPXIueCtvLm9mZnNldC5sZWZ0LHM9ci55K28ub2Zmc2V0LnRvcCxpPXt4OihhLWMueCkqdStkLngtYSx5OihzLWMueSkqdStkLnktc30sci5zY2FsZVdpdGgodSksdC5kcmFnTW92ZShpLngpLG4uZHJhZ01vdmUoaS55KSxvLmRpbWVuc2lvbnMucmVzY2FsZShyLnNjYWxlKSxvLmdlc3R1cmU9ZSxlLnByZXZlbnREZWZhdWx0KCl9LG1vdmU6ZnVuY3Rpb24oZSl7ZS5ldmVudC50YXJnZXQudGFnTmFtZS5tYXRjaCgvdGV4dGFyZWF8aW5wdXQvaSl8fCh0LmRpbWVuc2lvbi5lbmFibGVkfHxuLmRpbWVuc2lvbi5lbmFibGVkPyh0LmRyYWdNb3ZlKGUueC5kZWx0YSksbi5kcmFnTW92ZShlLnkuZGVsdGEpLGUucHJldmVudERlZmF1bHQoKSk6ZS50b3VjaC5za2lwKCkpfSxlbmQ6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfX0pfX0pLFU9Zi50cmFuc2l0aW9ucy5wcmVmaXgrXCJUcmFuc2Zvcm1cIjtsPWYuaGFzSFczRD9mdW5jdGlvbihlLHQsbil7cmV0dXJuXCJ0cmFuc2xhdGUzZChcIitlK1wicHgsXCIrdCtcInB4LDApIHNjYWxlKFwiK24rXCIpXCJ9OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm5cInRyYW5zbGF0ZShcIitlK1wicHgsXCIrdCtcInB4KSBzY2FsZShcIituK1wiKVwifSxjPV8uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7Xy5mbi5pbml0LmNhbGwobiksbi5lbGVtZW50PWUodCksbi5lbGVtZW50WzBdLnN0eWxlLndlYmtpdFRyYW5zZm9ybU9yaWdpbj1cImxlZnQgdG9wXCIsbi54PTAsbi55PTAsbi5zY2FsZT0xLG4uX3NhdmVDb29yZGluYXRlcyhsKG4ueCxuLnksbi5zY2FsZSkpfSx0cmFuc2xhdGVBeGlzOmZ1bmN0aW9uKGUsdCl7dGhpc1tlXSs9dCx0aGlzLnJlZnJlc2goKX0sc2NhbGVUbzpmdW5jdGlvbihlKXt0aGlzLnNjYWxlPWUsdGhpcy5yZWZyZXNoKCl9LHNjYWxlV2l0aDpmdW5jdGlvbihlKXt0aGlzLnNjYWxlKj1lLHRoaXMucmVmcmVzaCgpfSx0cmFuc2xhdGU6ZnVuY3Rpb24oZSl7dGhpcy54Kz1lLngsdGhpcy55Kz1lLnksdGhpcy5yZWZyZXNoKCl9LG1vdmVBeGlzOmZ1bmN0aW9uKGUsdCl7dGhpc1tlXT10LHRoaXMucmVmcmVzaCgpfSxtb3ZlVG86ZnVuY3Rpb24oZSl7Yih0aGlzLGUpLHRoaXMucmVmcmVzaCgpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLG49dC54LGk9dC55O3Qucm91bmQmJihuPU1hdGgucm91bmQobiksaT1NYXRoLnJvdW5kKGkpKSxlPWwobixpLHQuc2NhbGUpLGUhPXQuY29vcmRpbmF0ZXMmJihwLnN1cHBvcnQuYnJvd3Nlci5tc2llJiYxMD5wLnN1cHBvcnQuYnJvd3Nlci52ZXJzaW9uPyh0LmVsZW1lbnRbMF0uc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiLHQuZWxlbWVudFswXS5zdHlsZS5sZWZ0PXQueCtcInB4XCIsdC5lbGVtZW50WzBdLnN0eWxlLnRvcD10LnkrXCJweFwiKTp0LmVsZW1lbnRbMF0uc3R5bGVbVV09ZSx0Ll9zYXZlQ29vcmRpbmF0ZXMoZSksdC50cmlnZ2VyKEEpKX0sX3NhdmVDb29yZGluYXRlczpmdW5jdGlvbihlKXt0aGlzLmNvb3JkaW5hdGVzPWV9fSksZD12LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpczt2LmZuLmluaXQuY2FsbChpLGUsdCksbj1pLm9wdGlvbnMuZ3JvdXAsbiBpbiBDP0Nbbl0ucHVzaChpKTpDW25dPVtpXX0sZXZlbnRzOltGLFIsQl0sb3B0aW9uczp7bmFtZTpcIkRyb3BUYXJnZXRcIixncm91cDpcImRlZmF1bHRcIn0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5vcHRpb25zLmdyb3VwLG49Q1t0XXx8U1t0XTtpZihuLmxlbmd0aD4xKXtmb3Iodi5mbi5kZXN0cm95LmNhbGwodGhpcyksZT0wO24ubGVuZ3RoPmU7ZSsrKWlmKG5bZV09PXRoaXMpe24uc3BsaWNlKGUsMSk7YnJlYWt9fWVsc2UgZC5kZXN0cm95R3JvdXAodCl9LF90cmlnZ2VyOmZ1bmN0aW9uKGUsbil7dmFyIGk9dGhpcyxyPXhbaS5vcHRpb25zLmdyb3VwXTtyZXR1cm4gcj9pLnRyaWdnZXIoZSxiKHt9LG4uZXZlbnQse2RyYWdnYWJsZTpyLGRyb3BUYXJnZXQ6bi5kcm9wVGFyZ2V0fSkpOnR9LF9vdmVyOmZ1bmN0aW9uKGUpe3RoaXMuX3RyaWdnZXIoRixlKX0sX291dDpmdW5jdGlvbihlKXt0aGlzLl90cmlnZ2VyKFIsZSl9LF9kcm9wOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj14W3Qub3B0aW9ucy5ncm91cF07biYmKG4uZHJvcHBlZD0hdC5fdHJpZ2dlcihCLGUpKX19KSxkLmRlc3Ryb3lHcm91cD1mdW5jdGlvbihlKXt2YXIgdCxuPUNbZV18fFNbZV07aWYobil7Zm9yKHQ9MDtuLmxlbmd0aD50O3QrKyl2LmZuLmRlc3Ryb3kuY2FsbChuW3RdKTtuLmxlbmd0aD0wLGRlbGV0ZSBDW2VdLGRlbGV0ZSBTW2VdfX0sZC5fY2FjaGU9Qyx1PWQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzO3YuZm4uaW5pdC5jYWxsKGksZSx0KSxuPWkub3B0aW9ucy5ncm91cCxuIGluIFM/U1tuXS5wdXNoKGkpOlNbbl09W2ldfSxvcHRpb25zOntuYW1lOlwiRHJvcFRhcmdldEFyZWFcIixncm91cDpcImRlZmF1bHRcIixmaWx0ZXI6bnVsbH19KSxoPXYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpczt2LmZuLmluaXQuY2FsbChuLGUsdCksbi5fYWN0aXZhdGVkPSExLG4udXNlckV2ZW50cz1uZXcgeShuLmVsZW1lbnQse2dsb2JhbDohMCxhbGxvd1NlbGVjdGlvbjohMCxmaWx0ZXI6bi5vcHRpb25zLmZpbHRlcix0aHJlc2hvbGQ6bi5vcHRpb25zLmRpc3RhbmNlLHN0YXJ0Oncobi5fc3RhcnQsbiksaG9sZDp3KG4uX2hvbGQsbiksbW92ZTp3KG4uX2RyYWcsbiksZW5kOncobi5fZW5kLG4pLGNhbmNlbDp3KG4uX2NhbmNlbCxuKSxzZWxlY3Q6dyhuLl9zZWxlY3Qsbil9KSxuLl9hZnRlckVuZEhhbmRsZXI9dyhuLl9hZnRlckVuZCxuKSxuLl9jYXB0dXJlRXNjYXBlPXcobi5fY2FwdHVyZUVzY2FwZSxuKX0sZXZlbnRzOltNLEUsUCxJLHpdLG9wdGlvbnM6e25hbWU6XCJEcmFnZ2FibGVcIixkaXN0YW5jZTpwLnN1cHBvcnQudG91Y2g/MDo1LGdyb3VwOlwiZGVmYXVsdFwiLGN1cnNvck9mZnNldDpudWxsLGF4aXM6bnVsbCxjb250YWluZXI6bnVsbCxmaWx0ZXI6bnVsbCxpZ25vcmU6bnVsbCxob2xkVG9EcmFnOiExLGRyb3BwZWQ6ITF9LGNhbmNlbEhvbGQ6ZnVuY3Rpb24oKXt0aGlzLl9hY3RpdmF0ZWQ9ITF9LF9jYXB0dXJlRXNjYXBlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5rZXlDb2RlPT09cC5rZXlzLkVTQyYmKHQuX3RyaWdnZXIoeix7ZXZlbnQ6ZX0pLHQudXNlckV2ZW50cy5jYW5jZWwoKSl9LF91cGRhdGVIaW50OmZ1bmN0aW9uKHQpe3ZhciBuLGk9dGhpcyxvPWkub3B0aW9ucyxhPWkuYm91bmRhcmllcyxzPW8uYXhpcyxsPWkub3B0aW9ucy5jdXJzb3JPZmZzZXQ7bD9uPXtsZWZ0OnQueC5sb2NhdGlvbitsLmxlZnQsdG9wOnQueS5sb2NhdGlvbitsLnRvcH06KGkuaGludE9mZnNldC5sZWZ0Kz10LnguZGVsdGEsaS5oaW50T2Zmc2V0LnRvcCs9dC55LmRlbHRhLG49ZS5leHRlbmQoe30saS5oaW50T2Zmc2V0KSksYSYmKG4udG9wPXIobi50b3AsYS55KSxuLmxlZnQ9cihuLmxlZnQsYS54KSksXCJ4XCI9PT1zP2RlbGV0ZSBuLnRvcDpcInlcIj09PXMmJmRlbGV0ZSBuLmxlZnQsaS5oaW50LmNzcyhuKX0sX3Nob3VsZElnbm9yZVRhcmdldDpmdW5jdGlvbih0KXt2YXIgbj10aGlzLm9wdGlvbnMuaWdub3JlO3JldHVybiBuJiZlKHQpLmlzKG4pfSxfc2VsZWN0OmZ1bmN0aW9uKGUpe3RoaXMuX3Nob3VsZElnbm9yZVRhcmdldChlLmV2ZW50LnRhcmdldCl8fGUucHJldmVudERlZmF1bHQoKX0sX3N0YXJ0OmZ1bmN0aW9uKG4pe3ZhciBpLHI9dGhpcyxhPXIub3B0aW9ucyxzPWEuY29udGFpbmVyLGw9YS5oaW50O3JldHVybiB0aGlzLl9zaG91bGRJZ25vcmVUYXJnZXQobi50b3VjaC5pbml0aWFsVG91Y2gpfHxhLmhvbGRUb0RyYWcmJiFyLl9hY3RpdmF0ZWQ/KHIudXNlckV2ZW50cy5jYW5jZWwoKSx0KTooci5jdXJyZW50VGFyZ2V0PW4udGFyZ2V0LHIuY3VycmVudFRhcmdldE9mZnNldD1rKHIuY3VycmVudFRhcmdldCksbCYmKHIuaGludCYmci5oaW50LnN0b3AoITAsITApLnJlbW92ZSgpLHIuaGludD1wLmlzRnVuY3Rpb24obCk/ZShsLmNhbGwocixyLmN1cnJlbnRUYXJnZXQpKTpsLGk9ayhyLmN1cnJlbnRUYXJnZXQpLHIuaGludE9mZnNldD1pLHIuaGludC5jc3Moe3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix6SW5kZXg6MmU0LGxlZnQ6aS5sZWZ0LHRvcDppLnRvcH0pLmFwcGVuZFRvKGcuYm9keSksci5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuaGludC5yZW1vdmVBdHRyKFwibmctcmVwZWF0XCIpLHtlbGVtZW50czpyLmhpbnQuZ2V0KCksc2NvcGVGcm9tOm4udGFyZ2V0fX0pKSx4W2EuZ3JvdXBdPXIsci5kcm9wcGVkPSExLHMmJihyLmJvdW5kYXJpZXM9byhzLHIuaGludCkpLHIuX3RyaWdnZXIoRSxuKSYmKHIudXNlckV2ZW50cy5jYW5jZWwoKSxyLl9hZnRlckVuZCgpKSxyLnVzZXJFdmVudHMuY2FwdHVyZSgpLGUoZykub24oRCxyLl9jYXB0dXJlRXNjYXBlKSx0KX0sX2hvbGQ6ZnVuY3Rpb24oZSl7dGhpcy5jdXJyZW50VGFyZ2V0PWUudGFyZ2V0LHRoaXMuX3RyaWdnZXIoTSxlKT90aGlzLnVzZXJFdmVudHMuY2FuY2VsKCk6dGhpcy5fYWN0aXZhdGVkPSEwfSxfZHJhZzpmdW5jdGlvbihuKXt2YXIgaT10aGlzO24ucHJldmVudERlZmF1bHQoKSxpLl93aXRoRHJvcFRhcmdldChuLGZ1bmN0aW9uKGkscil7aWYoIWkpcmV0dXJuIHMmJihzLl90cmlnZ2VyKFIsYihuLHtkcm9wVGFyZ2V0OmUocy50YXJnZXRFbGVtZW50KX0pKSxzPW51bGwpLHQ7aWYocyl7aWYocj09PXMudGFyZ2V0RWxlbWVudClyZXR1cm47cy5fdHJpZ2dlcihSLGIobix7ZHJvcFRhcmdldDplKHMudGFyZ2V0RWxlbWVudCl9KSl9aS5fdHJpZ2dlcihGLGIobix7ZHJvcFRhcmdldDplKHIpfSkpLHM9YihpLHt0YXJnZXRFbGVtZW50OnJ9KX0pLGkuX3RyaWdnZXIoUCxiKG4se2Ryb3BUYXJnZXQ6c30pKSxpLmhpbnQmJmkuX3VwZGF0ZUhpbnQobil9LF9lbmQ6ZnVuY3Rpb24odCl7dmFyIG49dGhpcztuLl93aXRoRHJvcFRhcmdldCh0LGZ1bmN0aW9uKG4saSl7biYmKG4uX2Ryb3AoYih7fSx0LHtkcm9wVGFyZ2V0OmUoaSl9KSkscz1udWxsKX0pLG4uX3RyaWdnZXIoSSx0KSxuLl9jYW5jZWwodC5ldmVudCl9LF9jYW5jZWw6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2FjdGl2YXRlZD0hMSxlLmhpbnQmJiFlLmRyb3BwZWQ/c2V0VGltZW91dChmdW5jdGlvbigpe2UuaGludC5zdG9wKCEwLCEwKS5hbmltYXRlKGUuY3VycmVudFRhcmdldE9mZnNldCxcImZhc3RcIixlLl9hZnRlckVuZEhhbmRsZXIpfSwwKTplLl9hZnRlckVuZCgpfSxfdHJpZ2dlcjpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7cmV0dXJuIG4udHJpZ2dlcihlLGIoe30sdC5ldmVudCx7eDp0LngseTp0LnksY3VycmVudFRhcmdldDpuLmN1cnJlbnRUYXJnZXQsZHJvcFRhcmdldDp0LmRyb3BUYXJnZXR9KSl9LF93aXRoRHJvcFRhcmdldDpmdW5jdGlvbihlLHQpe3ZhciBpLHIsbz10aGlzLHM9by5vcHRpb25zLGw9Q1tzLmdyb3VwXSxjPVNbcy5ncm91cF07KGwmJmwubGVuZ3RofHxjJiZjLmxlbmd0aCkmJihpPVQoZSksby5oaW50JiZuKG8uaGludFswXSxpKSYmKG8uaGludC5oaWRlKCksaT1UKGUpLGl8fChpPVQoZSkpLG8uaGludC5zaG93KCkpLHI9YShpLGwsYykscj90KHIudGFyZ2V0LHIudGFyZ2V0RWxlbWVudCk6dCgpKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7di5mbi5kZXN0cm95LmNhbGwoZSksZS5fYWZ0ZXJFbmQoKSxlLnVzZXJFdmVudHMuZGVzdHJveSgpLGUuY3VycmVudFRhcmdldD1udWxsfSxfYWZ0ZXJFbmQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QuaGludCYmdC5oaW50LnJlbW92ZSgpLGRlbGV0ZSB4W3Qub3B0aW9ucy5ncm91cF0sdC50cmlnZ2VyKFwiZGVzdHJveVwiKSxlKGcpLm9mZihELHQuX2NhcHR1cmVFc2NhcGUpfX0pLHAudWkucGx1Z2luKGQpLHAudWkucGx1Z2luKHUpLHAudWkucGx1Z2luKGgpLHAuVGFwQ2FwdHVyZT1MLHAuY29udGFpbmVyQm91bmRhcmllcz1vLGIocC51aSx7UGFuZTpWLFBhbmVEaW1lbnNpb25zOkgsTW92YWJsZTpjfSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG49d2luZG93LmtlbmRvLGk9bi5tb2JpbGUscj1uLmVmZmVjdHMsbz1pLnVpLGE9ZS5wcm94eSxzPWUuZXh0ZW5kLGw9by5XaWRnZXQsYz1uLkNsYXNzLGQ9bi51aS5Nb3ZhYmxlLHU9bi51aS5QYW5lLGg9bi51aS5QYW5lRGltZW5zaW9ucyxwPXIuVHJhbnNpdGlvbixmPXIuQW5pbWF0aW9uLGc9TWF0aC5hYnMsbT01MDAsdj0uNyxfPS45Nix5PTEwLHc9NTUsYj0uNSxrPTUseD1cImttLXNjcm9sbGVyLXJlbGVhc2VcIixDPVwia20tc2Nyb2xsZXItcmVmcmVzaFwiLFM9XCJwdWxsXCIsVD1cImNoYW5nZVwiLEQ9XCJyZXNpemVcIixBPVwic2Nyb2xsXCIsRT0yLE09Zi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztmLmZuLmluaXQuY2FsbCh0KSxzKHQsZSksdC51c2VyRXZlbnRzLmJpbmQoXCJnZXN0dXJlZW5kXCIsYSh0LnN0YXJ0LHQpKSx0LnRhcENhcHR1cmUuYmluZChcInByZXNzXCIsYSh0LmNhbmNlbCx0KSl9LGVuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaW1lbnNpb25zLm1pblNjYWxlPnRoaXMubW92YWJsZS5zY2FsZX0sZG9uZTpmdW5jdGlvbigpe3JldHVybi4wMT50aGlzLmRpbWVuc2lvbnMubWluU2NhbGUtdGhpcy5tb3ZhYmxlLnNjYWxlfSx0aWNrOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5tb3ZhYmxlO2Uuc2NhbGVXaXRoKDEuMSksdGhpcy5kaW1lbnNpb25zLnJlc2NhbGUoZS5zY2FsZSl9LG9uRW5kOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5tb3ZhYmxlO2Uuc2NhbGVUbyh0aGlzLmRpbWVuc2lvbnMubWluU2NhbGUpLHRoaXMuZGltZW5zaW9ucy5yZXNjYWxlKGUuc2NhbGUpfX0pLFA9Zi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztmLmZuLmluaXQuY2FsbCh0KSxzKHQsZSx7dHJhbnNpdGlvbjpuZXcgcCh7YXhpczplLmF4aXMsbW92YWJsZTplLm1vdmFibGUsb25FbmQ6ZnVuY3Rpb24oKXt0Ll9lbmQoKX19KX0pLHQudGFwQ2FwdHVyZS5iaW5kKFwicHJlc3NcIixmdW5jdGlvbigpe3QuY2FuY2VsKCl9KSx0LnVzZXJFdmVudHMuYmluZChcImVuZFwiLGEodC5zdGFydCx0KSksdC51c2VyRXZlbnRzLmJpbmQoXCJnZXN0dXJlZW5kXCIsYSh0LnN0YXJ0LHQpKSx0LnVzZXJFdmVudHMuYmluZChcInRhcFwiLGEodC5vbkVuZCx0KSl9LG9uQ2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy50cmFuc2l0aW9uLmNhbmNlbCgpfSxmcmVlemU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmNhbmNlbCgpLHQuX21vdmVUbyhlKX0sb25FbmQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UucGFuZUF4aXMub3V0T2ZCb3VuZHMoKT9lLl9zbmFwQmFjaygpOmUuX2VuZCgpfSxkb25lOmZ1bmN0aW9uKCl7cmV0dXJuIGcodGhpcy52ZWxvY2l0eSk8MX0sc3RhcnQ6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzO24uZGltZW5zaW9uLmVuYWJsZWQmJihuLnBhbmVBeGlzLm91dE9mQm91bmRzKCk/bi5fc25hcEJhY2soKToodD1lLnRvdWNoLmlkPT09RT8wOmUudG91Y2hbbi5heGlzXS52ZWxvY2l0eSxuLnZlbG9jaXR5PU1hdGgubWF4KE1hdGgubWluKHQqbi52ZWxvY2l0eU11bHRpcGxpZXIsdyksLXcpLG4udGFwQ2FwdHVyZS5jYXB0dXJlTmV4dCgpLGYuZm4uc3RhcnQuY2FsbChuKSkpfSx0aWNrOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZGltZW5zaW9uLG49ZS5wYW5lQXhpcy5vdXRPZkJvdW5kcygpP2I6ZS5mcmljdGlvbixpPWUudmVsb2NpdHkqPW4scj1lLm1vdmFibGVbZS5heGlzXStpOyFlLmVsYXN0aWMmJnQub3V0T2ZCb3VuZHMocikmJihyPU1hdGgubWF4KE1hdGgubWluKHIsdC5tYXgpLHQubWluKSxlLnZlbG9jaXR5PTApLGUubW92YWJsZS5tb3ZlQXhpcyhlLmF4aXMscil9LF9lbmQ6ZnVuY3Rpb24oKXt0aGlzLnRhcENhcHR1cmUuY2FuY2VsQ2FwdHVyZSgpLHRoaXMuZW5kKCl9LF9zbmFwQmFjazpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmRpbWVuc2lvbixuPWUubW92YWJsZVtlLmF4aXNdPnQubWF4P3QubWF4OnQubWluO2UuX21vdmVUbyhuKX0sX21vdmVUbzpmdW5jdGlvbihlKXt0aGlzLnRyYW5zaXRpb24ubW92ZVRvKHtsb2NhdGlvbjplLGR1cmF0aW9uOm0sZWFzZTpwLmVhc2VPdXRFeHBvfSl9fSksST1mLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO24uZWZmZWN0cy5BbmltYXRpb24uZm4uaW5pdC5jYWxsKHRoaXMpLHModCxlLHtvcmlnaW46e30sZGVzdGluYXRpb246e30sb2Zmc2V0Ont9fSl9LHRpY2s6ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVDb29yZGluYXRlcygpLHRoaXMubW92ZVRvKHRoaXMub3JpZ2luKX0sZG9uZTpmdW5jdGlvbigpe3JldHVybiBnKHRoaXMub2Zmc2V0LnkpPGsmJmcodGhpcy5vZmZzZXQueCk8a30sb25FbmQ6ZnVuY3Rpb24oKXt0aGlzLm1vdmVUbyh0aGlzLmRlc3RpbmF0aW9uKSx0aGlzLmNhbGxiYWNrJiZ0aGlzLmNhbGxiYWNrLmNhbGwoKX0sc2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oZSx0KXt0aGlzLm9mZnNldD17fSx0aGlzLm9yaWdpbj1lLHRoaXMuZGVzdGluYXRpb249dH0sc2V0Q2FsbGJhY2s6ZnVuY3Rpb24oZSl7ZSYmbi5pc0Z1bmN0aW9uKGUpP3RoaXMuY2FsbGJhY2s9ZTplPXR9LF91cGRhdGVDb29yZGluYXRlczpmdW5jdGlvbigpe3RoaXMub2Zmc2V0PXt4Oih0aGlzLmRlc3RpbmF0aW9uLngtdGhpcy5vcmlnaW4ueCkvNCx5Oih0aGlzLmRlc3RpbmF0aW9uLnktdGhpcy5vcmlnaW4ueSkvNH0sdGhpcy5vcmlnaW49e3k6dGhpcy5vcmlnaW4ueSt0aGlzLm9mZnNldC55LHg6dGhpcy5vcmlnaW4ueCt0aGlzLm9mZnNldC54fX19KSx6PWMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1cInhcIj09PXQuYXhpcyxyPWUoJzxkaXYgY2xhc3M9XCJrbS10b3VjaC1zY3JvbGxiYXIga20tJysoaT9cImhvcml6b250YWxcIjpcInZlcnRpY2FsXCIpKyctc2Nyb2xsYmFyXCIgLz4nKTtzKG4sdCx7ZWxlbWVudDpyLGVsZW1lbnRTaXplOjAsbW92YWJsZTpuZXcgZChyKSxzY3JvbGxNb3ZhYmxlOnQubW92YWJsZSxhbHdheXNWaXNpYmxlOnQuYWx3YXlzVmlzaWJsZSxzaXplOmk/XCJ3aWR0aFwiOlwiaGVpZ2h0XCJ9KSxuLnNjcm9sbE1vdmFibGUuYmluZChULGEobi5yZWZyZXNoLG4pKSxuLmNvbnRhaW5lci5hcHBlbmQociksdC5hbHdheXNWaXNpYmxlJiZuLnNob3coKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmF4aXMsbj1lLmRpbWVuc2lvbixpPW4uc2l6ZSxyPWUuc2Nyb2xsTW92YWJsZSxvPWkvbi50b3RhbCxhPU1hdGgucm91bmQoLXJbdF0qbykscz1NYXRoLnJvdW5kKGkqbyk7bz49MT90aGlzLmVsZW1lbnQuY3NzKFwiZGlzcGxheVwiLFwibm9uZVwiKTp0aGlzLmVsZW1lbnQuY3NzKFwiZGlzcGxheVwiLFwiXCIpLGErcz5pP3M9aS1hOjA+YSYmKHMrPWEsYT0wKSxlLmVsZW1lbnRTaXplIT1zJiYoZS5lbGVtZW50LmNzcyhlLnNpemUscytcInB4XCIpLGUuZWxlbWVudFNpemU9cyksZS5tb3ZhYmxlLm1vdmVBeGlzKHQsYSl9LHNob3c6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuY3NzKHtvcGFjaXR5OnYsdmlzaWJpbGl0eTpcInZpc2libGVcIn0pfSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5hbHdheXNWaXNpYmxlfHx0aGlzLmVsZW1lbnQuY3NzKHtvcGFjaXR5OjB9KX19KSxGPWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGkscil7dmFyIG8sYyxwLGYsbSx2LF8seSx3LGI9dGhpcztyZXR1cm4gbC5mbi5pbml0LmNhbGwoYixpLHIpLGk9Yi5lbGVtZW50LChiLl9uYXRpdmU9Yi5vcHRpb25zLnVzZU5hdGl2ZSYmbi5zdXBwb3J0Lmhhc05hdGl2ZVNjcm9sbGluZyk/KGkuYWRkQ2xhc3MoXCJrbS1uYXRpdmUtc2Nyb2xsZXJcIikucHJlcGVuZCgnPGRpdiBjbGFzcz1cImttLXNjcm9sbC1oZWFkZXJcIi8+JykscyhiLHtzY3JvbGxFbGVtZW50OmksZml4ZWRDb250YWluZXI6aS5jaGlsZHJlbigpLmZpcnN0KCl9KSx0KTooaS5jc3MoXCJvdmVyZmxvd1wiLFwiaGlkZGVuXCIpLmFkZENsYXNzKFwia20tc2Nyb2xsLXdyYXBwZXJcIikud3JhcElubmVyKCc8ZGl2IGNsYXNzPVwia20tc2Nyb2xsLWNvbnRhaW5lclwiLz4nKS5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwia20tc2Nyb2xsLWhlYWRlclwiLz4nKSxvPWkuY2hpbGRyZW4oKS5lcSgxKSxjPW5ldyBuLlRhcENhcHR1cmUoaSkscD1uZXcgZChvKSxmPW5ldyBoKHtlbGVtZW50Om8sY29udGFpbmVyOmksZm9yY2VkRW5hYmxlZDpiLm9wdGlvbnMuem9vbX0pLG09dGhpcy5vcHRpb25zLmF2b2lkU2Nyb2xsaW5nLHY9bmV3IG4uVXNlckV2ZW50cyhpLHthbGxvd1NlbGVjdGlvbjohMCxwcmV2ZW50RHJhZ0V2ZW50OiEwLGNhcHR1cmVVcElmTW92ZWQ6ITAsbXVsdGlUb3VjaDpiLm9wdGlvbnMuem9vbSxzdGFydDpmdW5jdGlvbih0KXtmLnJlZnJlc2goKTt2YXIgbj1nKHQueC52ZWxvY2l0eSksaT1nKHQueS52ZWxvY2l0eSkscj0yKm4+PWksbz1lLmNvbnRhaW5zKGIuZml4ZWRDb250YWluZXJbMF0sdC5ldmVudC50YXJnZXQpLGE9MippPj1uOyFvJiYhbSh0KSYmYi5lbmFibGVkJiYoZi54LmVuYWJsZWQmJnJ8fGYueS5lbmFibGVkJiZhKT92LmNhcHR1cmUoKTp2LmNhbmNlbCgpfX0pLF89bmV3IHUoe21vdmFibGU6cCxkaW1lbnNpb25zOmYsdXNlckV2ZW50czp2LGVsYXN0aWM6Yi5vcHRpb25zLmVsYXN0aWN9KSx5PW5ldyBNKHttb3ZhYmxlOnAsZGltZW5zaW9uczpmLHVzZXJFdmVudHM6dix0YXBDYXB0dXJlOmN9KSx3PW5ldyBJKHttb3ZlVG86ZnVuY3Rpb24oZSl7Yi5zY3JvbGxUbyhlLngsZS55KX19KSxwLmJpbmQoVCxmdW5jdGlvbigpe2Iuc2Nyb2xsVG9wPS1wLnksYi5zY3JvbGxMZWZ0PS1wLngsYi50cmlnZ2VyKEEse3Njcm9sbFRvcDpiLnNjcm9sbFRvcCxzY3JvbGxMZWZ0OmIuc2Nyb2xsTGVmdH0pfSksYi5vcHRpb25zLm1vdXNld2hlZWxTY3JvbGxpbmcmJmkub24oXCJET01Nb3VzZVNjcm9sbCBtb3VzZXdoZWVsXCIsYSh0aGlzLFwiX3doZWVsU2Nyb2xsXCIpKSxzKGIse21vdmFibGU6cCxkaW1lbnNpb25zOmYsem9vbVNuYXBCYWNrOnksYW5pbWF0ZWRTY3JvbGxlcjp3LHVzZXJFdmVudHM6dixwYW5lOl8sdGFwQ2FwdHVyZTpjLHB1bGxlZDohMSxlbmFibGVkOiEwLHNjcm9sbEVsZW1lbnQ6byxzY3JvbGxUb3A6MCxzY3JvbGxMZWZ0OjAsZml4ZWRDb250YWluZXI6aS5jaGlsZHJlbigpLmZpcnN0KCl9KSxiLl9pbml0QXhpcyhcInhcIiksYi5faW5pdEF4aXMoXCJ5XCIpLGIuX3doZWVsRW5kPWZ1bmN0aW9uKCl7Yi5fd2hlZWw9ITEsYi51c2VyRXZlbnRzLmVuZCgwLGIuX3doZWVsWSl9LGYucmVmcmVzaCgpLGIub3B0aW9ucy5wdWxsVG9SZWZyZXNoJiZiLl9pbml0UHVsbFRvUmVmcmVzaCgpLHQpfSxfd2hlZWxTY3JvbGw6ZnVuY3Rpb24oZSl7dGhpcy5fd2hlZWx8fCh0aGlzLl93aGVlbD0hMCx0aGlzLl93aGVlbFk9MCx0aGlzLnVzZXJFdmVudHMucHJlc3MoMCx0aGlzLl93aGVlbFkpKSxjbGVhclRpbWVvdXQodGhpcy5fd2hlZWxUaW1lb3V0KSx0aGlzLl93aGVlbFRpbWVvdXQ9c2V0VGltZW91dCh0aGlzLl93aGVlbEVuZCw1MCk7dmFyIHQ9bi53aGVlbERlbHRhWShlKTt0JiYodGhpcy5fd2hlZWxZKz10LHRoaXMudXNlckV2ZW50cy5tb3ZlKDAsdGhpcy5fd2hlZWxZKSksZS5wcmV2ZW50RGVmYXVsdCgpfSxtYWtlVmlydHVhbDpmdW5jdGlvbigpe3RoaXMuZGltZW5zaW9ucy55Lm1ha2VWaXJ0dWFsKCl9LHZpcnR1YWxTaXplOmZ1bmN0aW9uKGUsdCl7dGhpcy5kaW1lbnNpb25zLnkudmlydHVhbFNpemUoZSx0KX0saGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGltZW5zaW9ucy55LnNpemV9LHNjcm9sbEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNjcm9sbEVsZW1lbnRbMF0uc2Nyb2xsSGVpZ2h0fSxzY3JvbGxXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNjcm9sbEVsZW1lbnRbMF0uc2Nyb2xsV2lkdGh9LG9wdGlvbnM6e25hbWU6XCJTY3JvbGxlclwiLHpvb206ITEscHVsbE9mZnNldDoxNDAsdmlzaWJsZVNjcm9sbEhpbnRzOiExLGVsYXN0aWM6ITAsdXNlTmF0aXZlOiExLG1vdXNld2hlZWxTY3JvbGxpbmc6ITAsYXZvaWRTY3JvbGxpbmc6ZnVuY3Rpb24oKXtyZXR1cm4hMX0scHVsbFRvUmVmcmVzaDohMSxtZXNzYWdlczp7cHVsbFRlbXBsYXRlOlwiUHVsbCB0byByZWZyZXNoXCIscmVsZWFzZVRlbXBsYXRlOlwiUmVsZWFzZSB0byByZWZyZXNoXCIscmVmcmVzaFRlbXBsYXRlOlwiUmVmcmVzaGluZ1wifX0sZXZlbnRzOltTLEEsRF0sX3Jlc2l6ZTpmdW5jdGlvbigpe3RoaXMuX25hdGl2ZXx8dGhpcy5jb250ZW50UmVzaXplZCgpfSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7bC5mbi5zZXRPcHRpb25zLmNhbGwodCxlKSxlLnB1bGxUb1JlZnJlc2gmJnQuX2luaXRQdWxsVG9SZWZyZXNoKCl9LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fbmF0aXZlP3RoaXMuc2Nyb2xsRWxlbWVudC5zY3JvbGxUb3AoMCk6KHRoaXMubW92YWJsZS5tb3ZlVG8oe3g6MCx5OjB9KSx0aGlzLl9zY2FsZSgxKSl9LGNvbnRlbnRSZXNpemVkOmZ1bmN0aW9uKCl7dGhpcy5kaW1lbnNpb25zLnJlZnJlc2goKSx0aGlzLnBhbmUueC5vdXRPZkJvdW5kcygpJiZ0aGlzLm1vdmFibGUubW92ZUF4aXMoXCJ4XCIsdGhpcy5kaW1lbnNpb25zLngubWluKSx0aGlzLnBhbmUueS5vdXRPZkJvdW5kcygpJiZ0aGlzLm1vdmFibGUubW92ZUF4aXMoXCJ5XCIsdGhpcy5kaW1lbnNpb25zLnkubWluKX0sem9vbU91dDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZGltZW5zaW9ucztlLnJlZnJlc2goKSx0aGlzLl9zY2FsZShlLmZpdFNjYWxlKSx0aGlzLm1vdmFibGUubW92ZVRvKGUuY2VudGVyQ29vcmRpbmF0ZXMoKSl9LGVuYWJsZTpmdW5jdGlvbigpe3RoaXMuZW5hYmxlZD0hMH0sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuZW5hYmxlZD0hMX0sc2Nyb2xsVG86ZnVuY3Rpb24oZSx0KXt0aGlzLl9uYXRpdmU/KHRoaXMuc2Nyb2xsRWxlbWVudC5zY3JvbGxMZWZ0KGcoZSkpLHRoaXMuc2Nyb2xsRWxlbWVudC5zY3JvbGxUb3AoZyh0KSkpOih0aGlzLmRpbWVuc2lvbnMucmVmcmVzaCgpLHRoaXMubW92YWJsZS5tb3ZlVG8oe3g6ZSx5OnR9KSl9LGFuaW1hdGVkU2Nyb2xsVG86ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI7dGhpcy5fbmF0aXZlP3RoaXMuc2Nyb2xsVG8oZSx0KTooaT17eDp0aGlzLm1vdmFibGUueCx5OnRoaXMubW92YWJsZS55fSxyPXt4OmUseTp0fSx0aGlzLmFuaW1hdGVkU2Nyb2xsZXIuc2V0Q29vcmRpbmF0ZXMoaSxyKSx0aGlzLmFuaW1hdGVkU2Nyb2xsZXIuc2V0Q2FsbGJhY2sobiksdGhpcy5hbmltYXRlZFNjcm9sbGVyLnN0YXJ0KCkpfSxwdWxsSGFuZGxlZDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5yZWZyZXNoSGludC5yZW1vdmVDbGFzcyhDKSxlLmhpbnRDb250YWluZXIuaHRtbChlLnB1bGxUZW1wbGF0ZSh7fSkpLGUueWluZXJ0aWEub25FbmQoKSxlLnhpbmVydGlhLm9uRW5kKCksZS51c2VyRXZlbnRzLmNhbmNlbCgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7bC5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy51c2VyRXZlbnRzJiZ0aGlzLnVzZXJFdmVudHMuZGVzdHJveSgpfSxfc2NhbGU6ZnVuY3Rpb24oZSl7dGhpcy5kaW1lbnNpb25zLnJlc2NhbGUoZSksdGhpcy5tb3ZhYmxlLnNjYWxlVG8oZSl9LF9pbml0UHVsbFRvUmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5kaW1lbnNpb25zLnkuZm9yY2VFbmFibGVkKCksZS5wdWxsVGVtcGxhdGU9bi50ZW1wbGF0ZShlLm9wdGlvbnMubWVzc2FnZXMucHVsbFRlbXBsYXRlKSxlLnJlbGVhc2VUZW1wbGF0ZT1uLnRlbXBsYXRlKGUub3B0aW9ucy5tZXNzYWdlcy5yZWxlYXNlVGVtcGxhdGUpLGUucmVmcmVzaFRlbXBsYXRlPW4udGVtcGxhdGUoZS5vcHRpb25zLm1lc3NhZ2VzLnJlZnJlc2hUZW1wbGF0ZSksZS5zY3JvbGxFbGVtZW50LnByZXBlbmQoJzxzcGFuIGNsYXNzPVwia20tc2Nyb2xsZXItcHVsbFwiPjxzcGFuIGNsYXNzPVwia20taWNvblwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImttLWxvYWRpbmctbGVmdFwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImttLWxvYWRpbmctcmlnaHRcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJrbS10ZW1wbGF0ZVwiPicrZS5wdWxsVGVtcGxhdGUoe30pK1wiPC9zcGFuPjwvc3Bhbj5cIiksZS5yZWZyZXNoSGludD1lLnNjcm9sbEVsZW1lbnQuY2hpbGRyZW4oKS5maXJzdCgpLGUuaGludENvbnRhaW5lcj1lLnJlZnJlc2hIaW50LmNoaWxkcmVuKFwiLmttLXRlbXBsYXRlXCIpLGUucGFuZS55LmJpbmQoXCJjaGFuZ2VcIixhKGUuX3BhbmVDaGFuZ2UsZSkpLGUudXNlckV2ZW50cy5iaW5kKFwiZW5kXCIsYShlLl9kcmFnRW5kLGUpKX0sX2RyYWdFbmQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UucHVsbGVkJiYoZS5wdWxsZWQ9ITEsZS5yZWZyZXNoSGludC5yZW1vdmVDbGFzcyh4KS5hZGRDbGFzcyhDKSxlLmhpbnRDb250YWluZXIuaHRtbChlLnJlZnJlc2hUZW1wbGF0ZSh7fSkpLGUueWluZXJ0aWEuZnJlZXplKGUub3B0aW9ucy5wdWxsT2Zmc2V0LzIpLGUudHJpZ2dlcihcInB1bGxcIikpfSxfcGFuZUNoYW5nZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5tb3ZhYmxlLnkvYj5lLm9wdGlvbnMucHVsbE9mZnNldD9lLnB1bGxlZHx8KGUucHVsbGVkPSEwLGUucmVmcmVzaEhpbnQucmVtb3ZlQ2xhc3MoQykuYWRkQ2xhc3MoeCksZS5oaW50Q29udGFpbmVyLmh0bWwoZS5yZWxlYXNlVGVtcGxhdGUoe30pKSk6ZS5wdWxsZWQmJihlLnB1bGxlZD0hMSxlLnJlZnJlc2hIaW50LnJlbW92ZUNsYXNzKHgpLGUuaGludENvbnRhaW5lci5odG1sKGUucHVsbFRlbXBsYXRlKHt9KSkpfSxfaW5pdEF4aXM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQubW92YWJsZSxpPXQuZGltZW5zaW9uc1tlXSxyPXQudGFwQ2FwdHVyZSxvPXQucGFuZVtlXSxhPW5ldyB6KHtheGlzOmUsbW92YWJsZTpuLGRpbWVuc2lvbjppLGNvbnRhaW5lcjp0LmVsZW1lbnQsYWx3YXlzVmlzaWJsZTp0Lm9wdGlvbnMudmlzaWJsZVNjcm9sbEhpbnRzfSk7aS5iaW5kKFQsZnVuY3Rpb24oKXthLnJlZnJlc2goKX0pLG8uYmluZChULGZ1bmN0aW9uKCl7YS5zaG93KCl9KSx0W2UrXCJpbmVydGlhXCJdPW5ldyBQKHtheGlzOmUscGFuZUF4aXM6byxtb3ZhYmxlOm4sdGFwQ2FwdHVyZTpyLHVzZXJFdmVudHM6dC51c2VyRXZlbnRzLGRpbWVuc2lvbjppLGVsYXN0aWM6dC5vcHRpb25zLmVsYXN0aWMsZnJpY3Rpb246dC5vcHRpb25zLmZyaWN0aW9ufHxfLHZlbG9jaXR5TXVsdGlwbGllcjp0Lm9wdGlvbnMudmVsb2NpdHlNdWx0aXBsaWVyfHx5LGVuZDpmdW5jdGlvbigpe2EuaGlkZSgpLHQudHJpZ2dlcihcInNjcm9sbEVuZFwiLHtheGlzOmUsc2Nyb2xsVG9wOnQuc2Nyb2xsVG9wLHNjcm9sbExlZnQ6dC5zY3JvbGxMZWZ0fSl9fSl9fSk7by5wbHVnaW4oRil9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZS5wb3NpdGlvbigpLnRvcCszfXZhciBpPXdpbmRvdy5rZW5kbyxyPWkudWkuV2lkZ2V0LG89ZS5wcm94eSxhPSExLHM9XCIua2VuZG9Hcm91cGFibGVcIixsPVwiY2hhbmdlXCIsYz1pLnRlbXBsYXRlKCc8ZGl2IGNsYXNzPVwiay1ncm91cC1pbmRpY2F0b3JcIiBkYXRhLSM9ZGF0YS5ucyNmaWVsZD1cIiR7ZGF0YS5maWVsZH1cIiBkYXRhLSM9ZGF0YS5ucyN0aXRsZT1cIiR7ZGF0YS50aXRsZSB8fCBcIlwifVwiIGRhdGEtIz1kYXRhLm5zI2Rpcj1cIiR7ZGF0YS5kaXIgfHwgXCJhc2NcIn1cIj48YSBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstbGlua1wiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstc2ktYXJyb3ctJHsoZGF0YS5kaXIgfHwgXCJhc2NcIikgPT0gXCJhc2NcIiA/IFwiblwiIDogXCJzXCJ9XCI+KHNvcnRlZCAkeyhkYXRhLmRpciB8fCBcImFzY1wiKSA9PSBcImFzY1wiID8gXCJhc2NlbmRpbmdcIjogXCJkZXNjZW5kaW5nXCJ9KTwvc3Bhbj4ke2RhdGEudGl0bGUgPyBkYXRhLnRpdGxlOiBkYXRhLmZpZWxkfTwvYT48YSBjbGFzcz1cImstYnV0dG9uIGstYnV0dG9uLWljb24gay1idXR0b24tYmFyZVwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstZ3JvdXAtZGVsZXRlXCI+PC9zcGFuPjwvYT48L2Rpdj4nLHt1c2VXaXRoQmxvY2s6ITF9KSxkPWZ1bmN0aW9uKHQpe3JldHVybiBlKCc8ZGl2IGNsYXNzPVwiay1oZWFkZXIgay1kcmFnLWNsdWVcIiAvPicpLmNzcyh7d2lkdGg6dC53aWR0aCgpLHBhZGRpbmdMZWZ0OnQuY3NzKFwicGFkZGluZ0xlZnRcIikscGFkZGluZ1JpZ2h0OnQuY3NzKFwicGFkZGluZ1JpZ2h0XCIpLGxpbmVIZWlnaHQ6dC5oZWlnaHQoKStcInB4XCIscGFkZGluZ1RvcDp0LmNzcyhcInBhZGRpbmdUb3BcIikscGFkZGluZ0JvdHRvbTp0LmNzcyhcInBhZGRpbmdCb3R0b21cIil9KS5odG1sKHQuYXR0cihpLmF0dHIoXCJ0aXRsZVwiKSl8fHQuYXR0cihpLmF0dHIoXCJmaWVsZFwiKSkpLnByZXBlbmQoJzxzcGFuIGNsYXNzPVwiay1pY29uIGstZHJhZy1zdGF0dXMgay1kZW5pZWRcIiAvPicpfSx1PWUoJzxkaXYgY2xhc3M9XCJrLWdyb3VwaW5nLWRyb3BjbHVlXCIvPicpLGg9LyhcInxcXCV8J3xcXFt8XFxdfFxcJHxcXC58XFwsfFxcOnxcXDt8XFwrfFxcKnxcXCZ8XFwhfFxcI3xcXCh8XFwpfDx8PnxcXD18XFw/fFxcQHxcXF58XFx7fFxcfXxcXH58XFwvfFxcfHxgKS9nLHA9ci5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oYyxoKXt2YXIgcCxmLGc9dGhpcyxtPWkuZ3VpZCgpLHY9byhnLl9pbnRpYWxpemVQb3NpdGlvbnMsZyksXz1nLl9kcm9wQ3VlUG9zaXRpb25zPVtdO3IuZm4uaW5pdC5jYWxsKGcsYyxoKSxhPWkuc3VwcG9ydC5pc1J0bChjKSxmPWE/XCJyaWdodFwiOlwibGVmdFwiLGcuZHJhZ2dhYmxlPXA9Zy5vcHRpb25zLmRyYWdnYWJsZXx8bmV3IGkudWkuRHJhZ2dhYmxlKGcuZWxlbWVudCx7ZmlsdGVyOmcub3B0aW9ucy5kcmFnZ2FibGVFbGVtZW50cyxoaW50OmQsZ3JvdXA6bX0pLGcuZ3JvdXBDb250YWluZXI9ZShnLm9wdGlvbnMuZ3JvdXBDb250YWluZXIsZy5lbGVtZW50KS5rZW5kb0Ryb3BUYXJnZXQoe2dyb3VwOnAub3B0aW9ucy5ncm91cCxkcmFnZW50ZXI6ZnVuY3Rpb24oZSl7Zy5fY2FuRHJhZyhlLmRyYWdnYWJsZS5jdXJyZW50VGFyZ2V0KSYmKGUuZHJhZ2dhYmxlLmhpbnQuZmluZChcIi5rLWRyYWctc3RhdHVzXCIpLnJlbW92ZUNsYXNzKFwiay1kZW5pZWRcIikuYWRkQ2xhc3MoXCJrLWFkZFwiKSx1LmNzcyhcInRvcFwiLG4oZy5ncm91cENvbnRhaW5lcikpLmNzcyhmLDApLmFwcGVuZFRvKGcuZ3JvdXBDb250YWluZXIpKX0sZHJhZ2xlYXZlOmZ1bmN0aW9uKGUpe2UuZHJhZ2dhYmxlLmhpbnQuZmluZChcIi5rLWRyYWctc3RhdHVzXCIpLnJlbW92ZUNsYXNzKFwiay1hZGRcIikuYWRkQ2xhc3MoXCJrLWRlbmllZFwiKSx1LnJlbW92ZSgpfSxkcm9wOmZ1bmN0aW9uKHQpe3ZhciBuLHI9dC5kcmFnZ2FibGUuY3VycmVudFRhcmdldCxvPXIuYXR0cihpLmF0dHIoXCJmaWVsZFwiKSkscz1yLmF0dHIoaS5hdHRyKFwidGl0bGVcIikpLGw9Zy5pbmRpY2F0b3IobyksYz1nLl9kcm9wQ3VlUG9zaXRpb25zLGQ9Y1tjLmxlbmd0aC0xXTsoci5oYXNDbGFzcyhcImstZ3JvdXAtaW5kaWNhdG9yXCIpfHxnLl9jYW5EcmFnKHIpKSYmKGQ/KG49Zy5fZHJvcEN1ZVBvc2l0aW9uKGkuZ2V0T2Zmc2V0KHUpLmxlZnQrcGFyc2VJbnQoZC5lbGVtZW50LmNzcyhcIm1hcmdpbkxlZnRcIiksMTApKihhPy0xOjEpK3BhcnNlSW50KGQuZWxlbWVudC5jc3MoXCJtYXJnaW5SaWdodFwiKSwxMCkpLG4mJmcuX2NhbkRyb3AoZShsKSxuLmVsZW1lbnQsbi5sZWZ0KSYmKG4uYmVmb3JlP24uZWxlbWVudC5iZWZvcmUobHx8Zy5idWlsZEluZGljYXRvcihvLHMpKTpuLmVsZW1lbnQuYWZ0ZXIobHx8Zy5idWlsZEluZGljYXRvcihvLHMpKSxnLl9jaGFuZ2UoKSkpOihnLmdyb3VwQ29udGFpbmVyLmFwcGVuZChnLmJ1aWxkSW5kaWNhdG9yKG8scykpLGcuX2NoYW5nZSgpKSl9fSkua2VuZG9EcmFnZ2FibGUoe2ZpbHRlcjpcImRpdi5rLWdyb3VwLWluZGljYXRvclwiLGhpbnQ6ZCxncm91cDpwLm9wdGlvbnMuZ3JvdXAsZHJhZ2NhbmNlbDpvKGcuX2RyYWdDYW5jZWwsZyksZHJhZ3N0YXJ0OmZ1bmN0aW9uKGUpe3ZhciB0PWUuY3VycmVudFRhcmdldCxpPXBhcnNlSW50KHQuY3NzKFwibWFyZ2luTGVmdFwiKSwxMCkscj10LnBvc2l0aW9uKCksbz1hP3IubGVmdC1pOnIubGVmdCt0Lm91dGVyV2lkdGgoKTt2KCksdS5jc3Moe3RvcDpuKGcuZ3JvdXBDb250YWluZXIpLGxlZnQ6b30pLmFwcGVuZFRvKGcuZ3JvdXBDb250YWluZXIpLHRoaXMuaGludC5maW5kKFwiLmstZHJhZy1zdGF0dXNcIikucmVtb3ZlQ2xhc3MoXCJrLWRlbmllZFwiKS5hZGRDbGFzcyhcImstYWRkXCIpfSxkcmFnZW5kOmZ1bmN0aW9uKCl7Zy5fZHJhZ0VuZCh0aGlzKX0sZHJhZzpvKGcuX2RyYWcsZyl9KS5vbihcImNsaWNrXCIrcyxcIi5rLWJ1dHRvblwiLGZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSxnLl9yZW1vdmVJbmRpY2F0b3IoZSh0aGlzKS5wYXJlbnQoKSl9KS5vbihcImNsaWNrXCIrcyxcIi5rLWxpbmtcIixmdW5jdGlvbih0KXt2YXIgbj1lKHRoaXMpLnBhcmVudCgpLHI9Zy5idWlsZEluZGljYXRvcihuLmF0dHIoaS5hdHRyKFwiZmllbGRcIikpLG4uYXR0cihpLmF0dHIoXCJ0aXRsZVwiKSksXCJhc2NcIj09bi5hdHRyKGkuYXR0cihcImRpclwiKSk/XCJkZXNjXCI6XCJhc2NcIik7bi5iZWZvcmUocikucmVtb3ZlKCksZy5fY2hhbmdlKCksdC5wcmV2ZW50RGVmYXVsdCgpfSkscC5iaW5kKFtcImRyYWdlbmRcIixcImRyYWdjYW5jZWxcIixcImRyYWdzdGFydFwiLFwiZHJhZ1wiXSx7ZHJhZ2VuZDpmdW5jdGlvbigpe2cuX2RyYWdFbmQodGhpcyl9LGRyYWdjYW5jZWw6byhnLl9kcmFnQ2FuY2VsLGcpLGRyYWdzdGFydDpmdW5jdGlvbihlKXt2YXIgbixpLHI7cmV0dXJuIGcub3B0aW9ucy5hbGxvd0RyYWd8fGcuX2NhbkRyYWcoZS5jdXJyZW50VGFyZ2V0KT8odigpLF8ubGVuZ3RoPyhuPV9bXy5sZW5ndGgtMV0uZWxlbWVudCxpPXBhcnNlSW50KG4uY3NzKFwibWFyZ2luUmlnaHRcIiksMTApLHI9bi5wb3NpdGlvbigpLmxlZnQrbi5vdXRlcldpZHRoKCkraSk6cj0wLHQpOihlLnByZXZlbnREZWZhdWx0KCksdCl9LGRyYWc6byhnLl9kcmFnLGcpfSksZy5kYXRhU291cmNlPWcub3B0aW9ucy5kYXRhU291cmNlLGcuZGF0YVNvdXJjZSYmZy5fcmVmcmVzaEhhbmRsZXI/Zy5kYXRhU291cmNlLnVuYmluZChsLGcuX3JlZnJlc2hIYW5kbGVyKTpnLl9yZWZyZXNoSGFuZGxlcj1vKGcucmVmcmVzaCxnKSxnLmRhdGFTb3VyY2UmJihnLmRhdGFTb3VyY2UuYmluZChcImNoYW5nZVwiLGcuX3JlZnJlc2hIYW5kbGVyKSxnLnJlZnJlc2goKSl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5kYXRhU291cmNlO3QuZ3JvdXBDb250YWluZXImJnQuZ3JvdXBDb250YWluZXIuZW1wdHkoKS5hcHBlbmQoZS5tYXAobi5ncm91cCgpfHxbXSxmdW5jdGlvbihlKXt2YXIgbj1lLmZpZWxkLnJlcGxhY2UoaCxcIlxcXFwkMVwiKSxyPXQuZWxlbWVudC5maW5kKHQub3B0aW9ucy5maWx0ZXIpLmZpbHRlcihcIltcIitpLmF0dHIoXCJmaWVsZFwiKStcIj1cIituK1wiXVwiKTtyZXR1cm4gdC5idWlsZEluZGljYXRvcihlLmZpZWxkLHIuYXR0cihpLmF0dHIoXCJ0aXRsZVwiKSksZS5kaXIpfSkuam9pbihcIlwiKSksdC5faW52YWxpZGF0ZUdyb3VwQ29udGFpbmVyKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3IuZm4uZGVzdHJveS5jYWxsKGUpLGUuZ3JvdXBDb250YWluZXIub2ZmKHMpLGUuZ3JvdXBDb250YWluZXIuZGF0YShcImtlbmRvRHJvcFRhcmdldFwiKSYmZS5ncm91cENvbnRhaW5lci5kYXRhKFwia2VuZG9Ecm9wVGFyZ2V0XCIpLmRlc3Ryb3koKSxlLmdyb3VwQ29udGFpbmVyLmRhdGEoXCJrZW5kb0RyYWdnYWJsZVwiKSYmZS5ncm91cENvbnRhaW5lci5kYXRhKFwia2VuZG9EcmFnZ2FibGVcIikuZGVzdHJveSgpLGUub3B0aW9ucy5kcmFnZ2FibGV8fGUuZHJhZ2dhYmxlLmRlc3Ryb3koKSxlLmRhdGFTb3VyY2UmJmUuX3JlZnJlc2hIYW5kbGVyJiYoZS5kYXRhU291cmNlLnVuYmluZChcImNoYW5nZVwiLGUuX3JlZnJlc2hIYW5kbGVyKSxlLl9yZWZyZXNoSGFuZGxlcj1udWxsKSxlLmdyb3VwQ29udGFpbmVyPWUuZWxlbWVudD1lLmRyYWdnYWJsZT1udWxsfSxvcHRpb25zOntuYW1lOlwiR3JvdXBhYmxlXCIsZmlsdGVyOlwidGhcIixkcmFnZ2FibGVFbGVtZW50czpcInRoXCIsbWVzc2FnZXM6e2VtcHR5OlwiRHJhZyBhIGNvbHVtbiBoZWFkZXIgYW5kIGRyb3AgaXQgaGVyZSB0byBncm91cCBieSB0aGF0IGNvbHVtblwifX0saW5kaWNhdG9yOmZ1bmN0aW9uKHQpe3ZhciBuPWUoXCIuay1ncm91cC1pbmRpY2F0b3JcIix0aGlzLmdyb3VwQ29udGFpbmVyKTtyZXR1cm4gZS5ncmVwKG4sZnVuY3Rpb24obil7cmV0dXJuIGUobikuYXR0cihpLmF0dHIoXCJmaWVsZFwiKSk9PT10fSlbMF19LGJ1aWxkSW5kaWNhdG9yOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gYyh7ZmllbGQ6ZS5yZXBsYWNlKC9cIi9nLFwiJ1wiKSxkaXI6bix0aXRsZTp0LG5zOmkubnN9KX0sZGVzY3JpcHRvcnM6ZnVuY3Rpb24oKXt2YXIgdCxuLHIsbyxhLHM9dGhpcyxsPWUoXCIuay1ncm91cC1pbmRpY2F0b3JcIixzLmdyb3VwQ29udGFpbmVyKTtyZXR1cm4gdD1zLmVsZW1lbnQuZmluZChzLm9wdGlvbnMuZmlsdGVyKS5tYXAoZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLHI9dC5hdHRyKGkuYXR0cihcImFnZ3JlZ2F0ZXNcIikpLHM9dC5hdHRyKGkuYXR0cihcImZpZWxkXCIpKTtpZihyJiZcIlwiIT09cilmb3Iobj1yLnNwbGl0KFwiLFwiKSxyPVtdLG89MCxhPW4ubGVuZ3RoO2E+bztvKyspci5wdXNoKHtmaWVsZDpzLGFnZ3JlZ2F0ZTpuW29dfSk7cmV0dXJuIHJ9KS50b0FycmF5KCksZS5tYXAobCxmdW5jdGlvbihuKXtyZXR1cm4gbj1lKG4pLHI9bi5hdHRyKGkuYXR0cihcImZpZWxkXCIpKSx7ZmllbGQ6cixkaXI6bi5hdHRyKGkuYXR0cihcImRpclwiKSksYWdncmVnYXRlczp0fHxbXX19KX0sX3JlbW92ZUluZGljYXRvcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UucmVtb3ZlKCksdC5faW52YWxpZGF0ZUdyb3VwQ29udGFpbmVyKCksdC5fY2hhbmdlKCl9LF9jaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuZGF0YVNvdXJjZSYmZS5kYXRhU291cmNlLmdyb3VwKGUuZGVzY3JpcHRvcnMoKSl9LF9kcm9wQ3VlUG9zaXRpb246ZnVuY3Rpb24odCl7dmFyIG4saSxyLG8scyxsPXRoaXMuX2Ryb3BDdWVQb3NpdGlvbnM7aWYodS5pcyhcIjp2aXNpYmxlXCIpJiYwIT09bC5sZW5ndGgpcmV0dXJuIHQ9TWF0aC5jZWlsKHQpLG49bFtsLmxlbmd0aC0xXSxpPW4ubGVmdCxyPW4ucmlnaHQsbz1wYXJzZUludChuLmVsZW1lbnQuY3NzKFwibWFyZ2luTGVmdFwiKSwxMCkscz1wYXJzZUludChuLmVsZW1lbnQuY3NzKFwibWFyZ2luUmlnaHRcIiksMTApLHQ+PXImJiFhfHxpPnQmJmE/dD17bGVmdDpuLmVsZW1lbnQucG9zaXRpb24oKS5sZWZ0KyhhPy1vOm4uZWxlbWVudC5vdXRlcldpZHRoKCkrcyksZWxlbWVudDpuLmVsZW1lbnQsYmVmb3JlOiExfToodD1lLmdyZXAobCxmdW5jdGlvbihlKXtyZXR1cm4gdD49ZS5sZWZ0JiZlLnJpZ2h0Pj10fHxhJiZ0PmUucmlnaHRcbn0pWzBdLHQmJih0PXtsZWZ0OmE/dC5lbGVtZW50LnBvc2l0aW9uKCkubGVmdCt0LmVsZW1lbnQub3V0ZXJXaWR0aCgpK3M6dC5lbGVtZW50LnBvc2l0aW9uKCkubGVmdC1vLGVsZW1lbnQ6dC5lbGVtZW50LGJlZm9yZTohMH0pKSx0fSxfZHJhZzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kcm9wQ3VlUG9zaXRpb24oZS54LmxvY2F0aW9uKTt0JiZ1LmNzcyh7bGVmdDp0LmxlZnQscmlnaHQ6XCJhdXRvXCJ9KX0sX2NhbkRyYWc6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5hdHRyKGkuYXR0cihcImZpZWxkXCIpKTtyZXR1cm5cImZhbHNlXCIhPWUuYXR0cihpLmF0dHIoXCJncm91cGFibGVcIikpJiZ0JiYoZS5oYXNDbGFzcyhcImstZ3JvdXAtaW5kaWNhdG9yXCIpfHwhdGhpcy5pbmRpY2F0b3IodCkpfSxfY2FuRHJvcDpmdW5jdGlvbihlLHQsbil7dmFyIGk9ZS5uZXh0KCkscj1lWzBdIT09dFswXSYmKCFpWzBdfHx0WzBdIT09aVswXXx8IWEmJm4+aS5wb3NpdGlvbigpLmxlZnR8fGEmJm48aS5wb3NpdGlvbigpLmxlZnQpO3JldHVybiByfSxfZHJhZ0VuZDpmdW5jdGlvbih0KXt2YXIgbj10aGlzLHI9dC5jdXJyZW50VGFyZ2V0LmF0dHIoaS5hdHRyKFwiZmllbGRcIikpLG89bi5pbmRpY2F0b3Iocik7dCE9PW4ub3B0aW9ucy5kcmFnZ2FibGUmJiF0LmRyb3BwZWQmJm8mJm4uX3JlbW92ZUluZGljYXRvcihlKG8pKSxuLl9kcmFnQ2FuY2VsKCl9LF9kcmFnQ2FuY2VsOmZ1bmN0aW9uKCl7dS5yZW1vdmUoKSx0aGlzLl9kcm9wQ3VlUG9zaXRpb25zPVtdfSxfaW50aWFsaXplUG9zaXRpb25zOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLHI9ZShcIi5rLWdyb3VwLWluZGljYXRvclwiLG4uZ3JvdXBDb250YWluZXIpO24uX2Ryb3BDdWVQb3NpdGlvbnM9ZS5tYXAocixmdW5jdGlvbihuKXtyZXR1cm4gbj1lKG4pLHQ9aS5nZXRPZmZzZXQobikubGVmdCx7bGVmdDpwYXJzZUludCh0LDEwKSxyaWdodDpwYXJzZUludCh0K24ub3V0ZXJXaWR0aCgpLDEwKSxlbGVtZW50Om59fSl9LF9pbnZhbGlkYXRlR3JvdXBDb250YWluZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdyb3VwQ29udGFpbmVyO2UmJmUuaXMoXCI6ZW1wdHlcIikmJmUuaHRtbCh0aGlzLm9wdGlvbnMubWVzc2FnZXMuZW1wdHkpfX0pO2kudWkucGx1Z2luKHApfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbil7dD1lKHQpLG4/dC5maW5kKFwiLmstZHJhZy1zdGF0dXNcIikucmVtb3ZlQ2xhc3MoXCJrLWFkZFwiKS5hZGRDbGFzcyhcImstZGVuaWVkXCIpOnQuZmluZChcIi5rLWRyYWctc3RhdHVzXCIpLnJlbW92ZUNsYXNzKFwiay1kZW5pZWRcIikuYWRkQ2xhc3MoXCJrLWFkZFwiKX12YXIgbj13aW5kb3cua2VuZG8saT1uLmdldE9mZnNldCxyPW4udWkuV2lkZ2V0LG89XCJjaGFuZ2VcIixhPVwiay1yZW9yZGVyYWJsZVwiLHM9ci5leHRlbmQoe2luaXQ6ZnVuY3Rpb24ocyxsKXt2YXIgYyxkPXRoaXMsdT1uLmd1aWQoKStcIi1yZW9yZGVyYWJsZVwiO3IuZm4uaW5pdC5jYWxsKGQscyxsKSxzPWQuZWxlbWVudC5hZGRDbGFzcyhhKSxsPWQub3B0aW9ucyxkLmRyYWdnYWJsZT1jPWwuZHJhZ2dhYmxlfHxuZXcgbi51aS5EcmFnZ2FibGUocyx7Z3JvdXA6dSxmaWx0ZXI6bC5maWx0ZXIsaGludDpsLmhpbnR9KSxkLnJlb3JkZXJEcm9wQ3VlPWUoJzxkaXYgY2xhc3M9XCJrLXJlb3JkZXItY3VlXCI+PGRpdiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctc1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWljb24gay1pLWFycm93LW5cIj48L2Rpdj48L2Rpdj4nKSxzLmZpbmQoYy5vcHRpb25zLmZpbHRlcikua2VuZG9Ecm9wVGFyZ2V0KHtncm91cDpjLm9wdGlvbnMuZ3JvdXAsZHJhZ2VudGVyOmZ1bmN0aW9uKGUpe3ZhciBuLHIsbyxhO2QuX2RyYWdnYWJsZSYmKG49dGhpcy5lbGVtZW50LG89IWQuX2Ryb3BUYXJnZXRBbGxvd2VkKG4pfHxkLl9pc0xhc3REcmFnZ2FibGUoKSx0KGUuZHJhZ2dhYmxlLmhpbnQsbyksb3x8KHI9aShuKSxhPXIubGVmdCxsLmluU2FtZUNvbnRhaW5lciYmIWwuaW5TYW1lQ29udGFpbmVyKHtzb3VyY2U6bix0YXJnZXQ6ZC5fZHJhZ2dhYmxlLHNvdXJjZUluZGV4OmQuX2luZGV4KG4pLHRhcmdldEluZGV4OmQuX2luZGV4KGQuX2RyYWdnYWJsZSl9KT9kLl9kcm9wVGFyZ2V0PW46ZC5faW5kZXgobik+ZC5faW5kZXgoZC5fZHJhZ2dhYmxlKSYmKGErPW4ub3V0ZXJXaWR0aCgpKSxkLnJlb3JkZXJEcm9wQ3VlLmNzcyh7aGVpZ2h0Om4ub3V0ZXJIZWlnaHQoKSx0b3A6ci50b3AsbGVmdDphfSkuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSkpKX0sZHJhZ2xlYXZlOmZ1bmN0aW9uKGUpe3QoZS5kcmFnZ2FibGUuaGludCwhMCksZC5yZW9yZGVyRHJvcEN1ZS5yZW1vdmUoKSxkLl9kcm9wVGFyZ2V0PW51bGx9LGRyb3A6ZnVuY3Rpb24oKXt2YXIgZSx0LG47ZC5fZHJvcFRhcmdldD1udWxsLGQuX2RyYWdnYWJsZSYmKGU9dGhpcy5lbGVtZW50LHQ9ZC5fZHJhZ2dhYmxlLG49ITEsZC5fZHJvcFRhcmdldEFsbG93ZWQoZSkmJiFkLl9pc0xhc3REcmFnZ2FibGUoKSYmZC50cmlnZ2VyKG8se2VsZW1lbnQ6ZC5fZHJhZ2dhYmxlLHRhcmdldDplLG9sZEluZGV4OmQuX2luZGV4KHQpLG5ld0luZGV4OmQuX2luZGV4KGUpLHBvc2l0aW9uOmkoZC5yZW9yZGVyRHJvcEN1ZSkubGVmdD5pKGUpLmxlZnQ/XCJhZnRlclwiOlwiYmVmb3JlXCJ9KSl9fSksYy5iaW5kKFtcImRyYWdjYW5jZWxcIixcImRyYWdlbmRcIixcImRyYWdzdGFydFwiLFwiZHJhZ1wiXSx7ZHJhZ2NhbmNlbDpmdW5jdGlvbigpe2QucmVvcmRlckRyb3BDdWUucmVtb3ZlKCksZC5fZHJhZ2dhYmxlPW51bGwsZC5fZWxlbWVudHM9bnVsbH0sZHJhZ2VuZDpmdW5jdGlvbigpe2QucmVvcmRlckRyb3BDdWUucmVtb3ZlKCksZC5fZHJhZ2dhYmxlPW51bGwsZC5fZWxlbWVudHM9bnVsbH0sZHJhZ3N0YXJ0OmZ1bmN0aW9uKGUpe2QuX2RyYWdnYWJsZT1lLmN1cnJlbnRUYXJnZXQsZC5fZWxlbWVudHM9ZC5lbGVtZW50LmZpbmQoZC5kcmFnZ2FibGUub3B0aW9ucy5maWx0ZXIpfSxkcmFnOmZ1bmN0aW9uKGUpe3ZhciB0LG47ZC5fZHJvcFRhcmdldCYmIXRoaXMuaGludC5maW5kKFwiLmstZHJhZy1zdGF0dXNcIikuaGFzQ2xhc3MoXCJrLWRlbmllZFwiKSYmKHQ9aShkLl9kcm9wVGFyZ2V0KS5sZWZ0LG49ZC5fZHJvcFRhcmdldC5vdXRlcldpZHRoKCksZC5yZW9yZGVyRHJvcEN1ZS5jc3MoZS5wYWdlWD50K24vMj97bGVmdDp0K259OntsZWZ0OnR9KSl9fSl9LG9wdGlvbnM6e25hbWU6XCJSZW9yZGVyYWJsZVwiLGZpbHRlcjpcIipcIn0sZXZlbnRzOltvXSxfaXNMYXN0RHJhZ2dhYmxlOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLm9wdGlvbnMuaW5TYW1lQ29udGFpbmVyLG49dGhpcy5fZHJhZ2dhYmxlWzBdLGk9dGhpcy5fZWxlbWVudHMuZ2V0KCkscj0hMTtpZighdClyZXR1cm4hMTtmb3IoOyFyJiZpLmxlbmd0aD4wOyllPWkucG9wKCkscj1uIT09ZSYmdCh7c291cmNlOm4sdGFyZ2V0OmUsc291cmNlSW5kZXg6dGhpcy5faW5kZXgobiksdGFyZ2V0SW5kZXg6dGhpcy5faW5kZXgoZSl9KTtyZXR1cm4hcn0sX2Ryb3BUYXJnZXRBbGxvd2VkOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9ucy5pblNhbWVDb250YWluZXIsbj10aGlzLm9wdGlvbnMuZHJhZ092ZXJDb250YWluZXJzLGk9dGhpcy5fZHJhZ2dhYmxlO3JldHVybiBpWzBdPT09ZVswXT8hMTp0JiZuP3Qoe3NvdXJjZTppLHRhcmdldDplLHNvdXJjZUluZGV4OnRoaXMuX2luZGV4KGkpLHRhcmdldEluZGV4OnRoaXMuX2luZGV4KGUpfSk/ITA6bih0aGlzLl9pbmRleChpKSx0aGlzLl9pbmRleChlKSk6ITB9LF9pbmRleDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZWxlbWVudHMuaW5kZXgoZSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3IuZm4uZGVzdHJveS5jYWxsKHQpLHQuZWxlbWVudC5maW5kKHQuZHJhZ2dhYmxlLm9wdGlvbnMuZmlsdGVyKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKTt0LmRhdGEoXCJrZW5kb0Ryb3BUYXJnZXRcIikmJnQuZGF0YShcImtlbmRvRHJvcFRhcmdldFwiKS5kZXN0cm95KCl9KSx0LmRyYWdnYWJsZSYmKHQuZHJhZ2dhYmxlLmRlc3Ryb3koKSx0LmRyYWdnYWJsZS5lbGVtZW50PXQuZHJhZ2dhYmxlPW51bGwpLHQuZWxlbWVudHM9dC5yZW9yZGVyRHJvcEN1ZT10Ll9lbGVtZW50cz10Ll9kcmFnZ2FibGU9bnVsbH19KTtuLnVpLnBsdWdpbihzKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXt2YXIgbj13aW5kb3cua2VuZG8saT1uLnVpLHI9aS5XaWRnZXQsbz1lLnByb3h5LGE9bi5pc0Z1bmN0aW9uLHM9ZS5leHRlbmQsbD1cImhvcml6b250YWxcIixjPVwidmVydGljYWxcIixkPVwic3RhcnRcIix1PVwicmVzaXplXCIsaD1cInJlc2l6ZWVuZFwiLHA9ci5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3IuZm4uaW5pdC5jYWxsKG4sZSx0KSxuLm9yaWVudGF0aW9uPW4ub3B0aW9ucy5vcmllbnRhdGlvbi50b0xvd2VyQ2FzZSgpIT1jP2w6YyxuLl9wb3NpdGlvbk1vdXNlPW4ub3JpZW50YXRpb249PWw/XCJ4XCI6XCJ5XCIsbi5fcG9zaXRpb249bi5vcmllbnRhdGlvbj09bD9cImxlZnRcIjpcInRvcFwiLG4uX3NpemluZ0RvbT1uLm9yaWVudGF0aW9uPT1sP1wib3V0ZXJXaWR0aFwiOlwib3V0ZXJIZWlnaHRcIixuLmRyYWdnYWJsZT1uZXcgaS5EcmFnZ2FibGUoZSx7ZGlzdGFuY2U6MCxmaWx0ZXI6dC5oYW5kbGUsZHJhZzpvKG4uX3Jlc2l6ZSxuKSxkcmFnY2FuY2VsOm8obi5fY2FuY2VsLG4pLGRyYWdzdGFydDpvKG4uX3N0YXJ0LG4pLGRyYWdlbmQ6byhuLl9zdG9wLG4pfSksbi51c2VyRXZlbnRzPW4uZHJhZ2dhYmxlLnVzZXJFdmVudHN9LGV2ZW50czpbdSxoLGRdLG9wdGlvbnM6e25hbWU6XCJSZXNpemFibGVcIixvcmllbnRhdGlvbjpsfSxyZXNpemU6ZnVuY3Rpb24oKXt9LF9tYXg6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4uaGludD9uLmhpbnRbbi5fc2l6aW5nRG9tXSgpOjAscj1uLm9wdGlvbnMubWF4O3JldHVybiBhKHIpP3IoZSk6ciE9PXQ/bi5faW5pdGlhbEVsZW1lbnRQb3NpdGlvbityLWk6cn0sX21pbjpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5vcHRpb25zLm1pbjtyZXR1cm4gYShpKT9pKGUpOmkhPT10P24uX2luaXRpYWxFbGVtZW50UG9zaXRpb24raTppfSxfc3RhcnQ6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPW4ub3B0aW9ucy5oaW50LHI9ZSh0LmN1cnJlbnRUYXJnZXQpO24uX2luaXRpYWxFbGVtZW50UG9zaXRpb249ci5wb3NpdGlvbigpW24uX3Bvc2l0aW9uXSxuLl9pbml0aWFsTW91c2VQb3NpdGlvbj10W24uX3Bvc2l0aW9uTW91c2VdLnN0YXJ0TG9jYXRpb24saSYmKG4uaGludD1hKGkpP2UoaShyKSk6aSxuLmhpbnQuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCJ9KS5jc3Mobi5fcG9zaXRpb24sbi5faW5pdGlhbEVsZW1lbnRQb3NpdGlvbikuYXBwZW5kVG8obi5lbGVtZW50KSksbi50cmlnZ2VyKGQsdCksbi5fbWF4UG9zaXRpb249bi5fbWF4KHQpLG4uX21pblBvc2l0aW9uPW4uX21pbih0KSxlKGRvY3VtZW50LmJvZHkpLmNzcyhcImN1cnNvclwiLHIuY3NzKFwiY3Vyc29yXCIpKX0sX3Jlc2l6ZTpmdW5jdGlvbihlKXt2YXIgbixpPXRoaXMscj1pLl9tYXhQb3NpdGlvbixvPWkuX21pblBvc2l0aW9uLGE9aS5faW5pdGlhbEVsZW1lbnRQb3NpdGlvbisoZVtpLl9wb3NpdGlvbk1vdXNlXS5sb2NhdGlvbi1pLl9pbml0aWFsTW91c2VQb3NpdGlvbik7bj1vIT09dD9NYXRoLm1heChvLGEpOmEsaS5wb3NpdGlvbj1uPXIhPT10P01hdGgubWluKHIsbik6bixpLmhpbnQmJmkuaGludC50b2dnbGVDbGFzcyhpLm9wdGlvbnMuaW52YWxpZENsYXNzfHxcIlwiLG49PXJ8fG49PW8pLmNzcyhpLl9wb3NpdGlvbixuKSxpLnJlc2l6aW5nPSEwLGkudHJpZ2dlcih1LHMoZSx7cG9zaXRpb246bn0pKX0sX3N0b3A6ZnVuY3Rpb24odCl7dmFyIG49dGhpcztuLmhpbnQmJm4uaGludC5yZW1vdmUoKSxuLnJlc2l6aW5nPSExLG4udHJpZ2dlcihoLHModCx7cG9zaXRpb246bi5wb3NpdGlvbn0pKSxlKGRvY3VtZW50LmJvZHkpLmNzcyhcImN1cnNvclwiLFwiXCIpfSxfY2FuY2VsOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7bi5oaW50JiYobi5wb3NpdGlvbj10LG4uaGludC5jc3Mobi5fcG9zaXRpb24sbi5faW5pdGlhbEVsZW1lbnRQb3NpdGlvbiksbi5fc3RvcChlKSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3IuZm4uZGVzdHJveS5jYWxsKGUpLGUuZHJhZ2dhYmxlJiZlLmRyYWdnYWJsZS5kZXN0cm95KCl9LHByZXNzOmZ1bmN0aW9uKGUpe2lmKGUpe3ZhciB0PWUucG9zaXRpb24oKSxuPXRoaXM7bi51c2VyRXZlbnRzLnByZXNzKHQubGVmdCx0LnRvcCxlWzBdKSxuLnRhcmdldFBvc2l0aW9uPXQsbi50YXJnZXQ9ZX19LG1vdmU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4uX3Bvc2l0aW9uLHI9bi50YXJnZXRQb3NpdGlvbixvPW4ucG9zaXRpb247bz09PXQmJihvPXJbaV0pLHJbaV09bytlLG4udXNlckV2ZW50cy5tb3ZlKHIubGVmdCxyLnRvcCl9LGVuZDpmdW5jdGlvbigpe3RoaXMudXNlckV2ZW50cy5lbmQoKSx0aGlzLnRhcmdldD10aGlzLnBvc2l0aW9uPXR9fSk7bi51aS5wbHVnaW4ocCl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbih0LG4pe3RyeXtyZXR1cm4gZS5jb250YWlucyh0LG4pfHx0PT1ufWNhdGNoKGkpe3JldHVybiExfX1mdW5jdGlvbiBpKGUpe3JldHVybiBlLmNsb25lKCl9ZnVuY3Rpb24gcihlKXtyZXR1cm4gZS5jbG9uZSgpLnJlbW92ZUF0dHIoXCJpZFwiKS5jc3MoXCJ2aXNpYmlsaXR5XCIsXCJoaWRkZW5cIil9dmFyIG89d2luZG93LmtlbmRvLGE9by51aS5XaWRnZXQscz1cInN0YXJ0XCIsbD1cImJlZm9yZU1vdmVcIixjPVwibW92ZVwiLGQ9XCJlbmRcIix1PVwiY2hhbmdlXCIsaD1cImNhbmNlbFwiLHA9XCJzb3J0XCIsZj1cInJlbW92ZVwiLGc9XCJyZWNlaXZlXCIsbT1cIj4qXCIsdj0tMSxfPWEuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpczthLmZuLmluaXQuY2FsbChuLGUsdCksbi5vcHRpb25zLnBsYWNlaG9sZGVyfHwobi5vcHRpb25zLnBsYWNlaG9sZGVyPXIpLG4ub3B0aW9ucy5oaW50fHwobi5vcHRpb25zLmhpbnQ9aSksbi5fZHJhZ2dhYmxlPW4uX2NyZWF0ZURyYWdnYWJsZSgpfSxldmVudHM6W3MsbCxjLGQsdSxoXSxvcHRpb25zOntuYW1lOlwiU29ydGFibGVcIixoaW50Om51bGwscGxhY2Vob2xkZXI6bnVsbCxmaWx0ZXI6bSxob2xkVG9EcmFnOiExLGRpc2FibGVkOm51bGwsY29udGFpbmVyOm51bGwsY29ubmVjdFdpdGg6bnVsbCxoYW5kbGVyOm51bGwsY3Vyc29yT2Zmc2V0Om51bGwsYXhpczpudWxsLGlnbm9yZTpudWxsLGN1cnNvcjpcImF1dG9cIn0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX2RyYWdnYWJsZS5kZXN0cm95KCksYS5mbi5kZXN0cm95LmNhbGwodGhpcyl9LF9jcmVhdGVEcmFnZ2FibGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5lbGVtZW50LGk9dC5vcHRpb25zO3JldHVybiBuZXcgby51aS5EcmFnZ2FibGUobix7ZmlsdGVyOmkuZmlsdGVyLGhpbnQ6by5pc0Z1bmN0aW9uKGkuaGludCk/aS5oaW50OmUoaS5oaW50KSxob2xkVG9EcmFnOmkuaG9sZFRvRHJhZyxjb250YWluZXI6aS5jb250YWluZXI/ZShpLmNvbnRhaW5lcik6bnVsbCxjdXJzb3JPZmZzZXQ6aS5jdXJzb3JPZmZzZXQsYXhpczppLmF4aXMsaWdub3JlOmkuaWdub3JlLGRyYWdzdGFydDplLnByb3h5KHQuX2RyYWdzdGFydCx0KSxkcmFnY2FuY2VsOmUucHJveHkodC5fZHJhZ2NhbmNlbCx0KSxkcmFnOmUucHJveHkodC5fZHJhZyx0KSxkcmFnZW5kOmUucHJveHkodC5fZHJhZ2VuZCx0KX0pfSxfZHJhZ3N0YXJ0OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMuZHJhZ2dlZEVsZW1lbnQ9dC5jdXJyZW50VGFyZ2V0LGk9dC50YXJnZXR8fG8uZWxlbWVudFVuZGVyQ3Vyc29yKHQpLHI9dGhpcy5vcHRpb25zLmRpc2FibGVkLGE9dGhpcy5vcHRpb25zLmhhbmRsZXIsbD10aGlzLm9wdGlvbnMucGxhY2Vob2xkZXIsYz10aGlzLnBsYWNlaG9sZGVyPWUoby5pc0Z1bmN0aW9uKGwpP2wuY2FsbCh0aGlzLG4pOmwpO3ImJm4uaXMocik/dC5wcmV2ZW50RGVmYXVsdCgpOmEmJiFlKGkpLmlzKGEpP3QucHJldmVudERlZmF1bHQoKTp0aGlzLnRyaWdnZXIocyx7aXRlbTpuLGRyYWdnYWJsZUV2ZW50OnR9KT90LnByZXZlbnREZWZhdWx0KCk6KG4uY3NzKFwiZGlzcGxheVwiLFwibm9uZVwiKSxuLmJlZm9yZShjKSx0aGlzLl9zZXRDdXJzb3IoKSl9LF9kcmFnY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5fY2FuY2VsKCksdGhpcy50cmlnZ2VyKGgse2l0ZW06dGhpcy5kcmFnZ2VkRWxlbWVudH0pLHRoaXMuX3Jlc2V0Q3Vyc29yKCl9LF9kcmFnOmZ1bmN0aW9uKG4pe3ZhciBpLHIsbyxhLHMsbD10aGlzLmRyYWdnZWRFbGVtZW50LGM9dGhpcy5fZmluZFRhcmdldChuKSxkPXtsZWZ0Om4ueC5sb2NhdGlvbix0b3A6bi55LmxvY2F0aW9ufSx1PXt4Om4ueC5kZWx0YSx5Om4ueS5kZWx0YX0saD10aGlzLm9wdGlvbnMuYXhpcyxwPXtpdGVtOmwsbGlzdDp0aGlzLGRyYWdnYWJsZUV2ZW50Om59O2lmKFwieFwiPT09aHx8XCJ5XCI9PT1oKXJldHVybiB0aGlzLl9tb3ZlbWVudEJ5QXhpcyhoLGQsdVtoXSxwKSx0O2lmKGMpe2lmKGk9dGhpcy5fZ2V0RWxlbWVudENlbnRlcihjLmVsZW1lbnQpLHI9e2xlZnQ6TWF0aC5yb3VuZChkLmxlZnQtaS5sZWZ0KSx0b3A6TWF0aC5yb3VuZChkLnRvcC1pLnRvcCl9LGUuZXh0ZW5kKHAse3RhcmdldDpjLmVsZW1lbnR9KSxjLmFwcGVuZFRvQm90dG9tKXJldHVybiB0aGlzLl9tb3ZlUGxhY2Vob2xkZXIoYyxudWxsLHApLHQ7aWYoYy5hcHBlbmRBZnRlckhpZGRlbiYmdGhpcy5fbW92ZVBsYWNlaG9sZGVyKGMsXCJuZXh0XCIscCksdGhpcy5faXNGbG9hdGluZyhjLmVsZW1lbnQpPzA+dS54JiYwPnIubGVmdD9vPVwicHJldlwiOnUueD4wJiZyLmxlZnQ+MCYmKG89XCJuZXh0XCIpOjA+dS55JiYwPnIudG9wP289XCJwcmV2XCI6dS55PjAmJnIudG9wPjAmJihvPVwibmV4dFwiKSxvKXtmb3Iocz1cInByZXZcIj09PW8/alF1ZXJ5LmZuLnByZXY6alF1ZXJ5LmZuLm5leHQsYT1zLmNhbGwoYy5lbGVtZW50KTthLmxlbmd0aCYmIWEuaXMoXCI6dmlzaWJsZVwiKTspYT1zLmNhbGwoYSk7YVswXSE9dGhpcy5wbGFjZWhvbGRlclswXSYmdGhpcy5fbW92ZVBsYWNlaG9sZGVyKGMsbyxwKX19fSxfZHJhZ2VuZDpmdW5jdGlvbihuKXt2YXIgaSxyLG8sYSxzPXRoaXMucGxhY2Vob2xkZXIsbD10aGlzLmRyYWdnZWRFbGVtZW50LGM9dGhpcy5pbmRleE9mKGwpLGg9dGhpcy5pbmRleE9mKHMpLG09dGhpcy5vcHRpb25zLmNvbm5lY3RXaXRoO3JldHVybiB0aGlzLl9yZXNldEN1cnNvcigpLG89e2FjdGlvbjpwLGl0ZW06bCxvbGRJbmRleDpjLG5ld0luZGV4OmgsZHJhZ2dhYmxlRXZlbnQ6bn0saD49MD9yPXRoaXMudHJpZ2dlcihkLG8pOihpPXMucGFyZW50cyhtKS5nZXRLZW5kb1NvcnRhYmxlKCksby5hY3Rpb249ZixhPWUuZXh0ZW5kKHt9LG8se2FjdGlvbjpnLG9sZEluZGV4OnYsbmV3SW5kZXg6aS5pbmRleE9mKHMpfSkscj0hKCF0aGlzLnRyaWdnZXIoZCxvKSYmIWkudHJpZ2dlcihkLGEpKSkscnx8aD09PWM/KHRoaXMuX2NhbmNlbCgpLHQpOihzLnJlcGxhY2VXaXRoKGwpLGwuc2hvdygpLHRoaXMuX2RyYWdnYWJsZS5kcm9wcGVkPSEwLG89e2FjdGlvbjp0aGlzLmluZGV4T2YobCkhPXY/cDpmLGl0ZW06bCxvbGRJbmRleDpjLG5ld0luZGV4OnRoaXMuaW5kZXhPZihsKSxkcmFnZ2FibGVFdmVudDpufSx0aGlzLnRyaWdnZXIodSxvKSxpJiYoYT1lLmV4dGVuZCh7fSxvLHthY3Rpb246ZyxvbGRJbmRleDp2LG5ld0luZGV4OmkuaW5kZXhPZihsKX0pLGkudHJpZ2dlcih1LGEpKSx0KX0sX2ZpbmRUYXJnZXQ6ZnVuY3Rpb24obil7dmFyIGkscixvPXRoaXMuX2ZpbmRFbGVtZW50VW5kZXJDdXJzb3IobiksYT10aGlzLm9wdGlvbnMuY29ubmVjdFdpdGg7cmV0dXJuIGUuY29udGFpbnModGhpcy5lbGVtZW50WzBdLG8pPyhpPXRoaXMuaXRlbXMoKSxyPWkuZmlsdGVyKG8pWzBdfHxpLmhhcyhvKVswXSxyP3tlbGVtZW50OmUociksc29ydGFibGU6dGhpc306bnVsbCk6dGhpcy5lbGVtZW50WzBdPT1vJiZ0aGlzLl9pc0VtcHR5KCk/e2VsZW1lbnQ6dGhpcy5lbGVtZW50LHNvcnRhYmxlOnRoaXMsYXBwZW5kVG9Cb3R0b206ITB9OnRoaXMuZWxlbWVudFswXT09byYmdGhpcy5faXNMYXN0SGlkZGVuKCk/KHI9dGhpcy5pdGVtcygpLmVxKDApLHtlbGVtZW50OnIsc29ydGFibGU6dGhpcyxhcHBlbmRBZnRlckhpZGRlbjohMH0pOmE/dGhpcy5fc2VhcmNoQ29ubmVjdGVkVGFyZ2V0cyhvLG4pOnR9LF9maW5kRWxlbWVudFVuZGVyQ3Vyc29yOmZ1bmN0aW9uKGUpe3t2YXIgdD1vLmVsZW1lbnRVbmRlckN1cnNvcihlKSxpPWUuc2VuZGVyO3RoaXMuaXRlbXMoKX1yZXR1cm4gbihpLmhpbnRbMF0sdCkmJihpLmhpbnQuaGlkZSgpLHQ9by5lbGVtZW50VW5kZXJDdXJzb3IoZSksdHx8KHQ9by5lbGVtZW50VW5kZXJDdXJzb3IoZSkpLGkuaGludC5zaG93KCkpLHR9LF9zZWFyY2hDb25uZWN0ZWRUYXJnZXRzOmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLGEscz1lKHRoaXMub3B0aW9ucy5jb25uZWN0V2l0aCk7Zm9yKGE9MDtzLmxlbmd0aD5hO2ErKylpZihpPXMuZXEoYSkuZ2V0S2VuZG9Tb3J0YWJsZSgpLGUuY29udGFpbnMoc1thXSx0KSl7aWYoaSlyZXR1cm4gcj1pLml0ZW1zKCksbz1yLmZpbHRlcih0KVswXXx8ci5oYXModClbMF0sbz8oaS5wbGFjZWhvbGRlcj10aGlzLnBsYWNlaG9sZGVyLHtlbGVtZW50OmUobyksc29ydGFibGU6aX0pOm51bGx9ZWxzZSBpZihzW2FdPT10KXtpZihpJiZpLl9pc0VtcHR5KCkpcmV0dXJue2VsZW1lbnQ6cy5lcShhKSxzb3J0YWJsZTppLGFwcGVuZFRvQm90dG9tOiEwfTtpZih0aGlzLl9pc0N1cnNvckFmdGVyTGFzdChpLG4pKXJldHVybiBvPWkuaXRlbXMoKS5sYXN0KCkse2VsZW1lbnQ6byxzb3J0YWJsZTppfX19LF9pc0N1cnNvckFmdGVyTGFzdDpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj1lLml0ZW1zKCkubGFzdCgpLGE9e2xlZnQ6dC54LmxvY2F0aW9uLHRvcDp0LnkubG9jYXRpb259O3JldHVybiBuPW8uZ2V0T2Zmc2V0KHIpLG4udG9wKz1yLm91dGVySGVpZ2h0KCksbi5sZWZ0Kz1yLm91dGVyV2lkdGgoKSxpPXRoaXMuX2lzRmxvYXRpbmcocik/bi5sZWZ0LWEubGVmdDpuLnRvcC1hLnRvcCwwPmk/ITA6ITF9LF9tb3ZlbWVudEJ5QXhpczpmdW5jdGlvbih0LG4saSxyKXt2YXIgbyxhPVwieFwiPT09dD9uLmxlZnQ6bi50b3Ascz0wPmk/dGhpcy5wbGFjZWhvbGRlci5wcmV2KCk6dGhpcy5wbGFjZWhvbGRlci5uZXh0KCk7cy5sZW5ndGgmJiFzLmlzKFwiOnZpc2libGVcIikmJihzPTA+aT9zLnByZXYoKTpzLm5leHQoKSksZS5leHRlbmQocix7dGFyZ2V0OnN9KSxvPXRoaXMuX2dldEVsZW1lbnRDZW50ZXIocyksbyYmKG89XCJ4XCI9PT10P28ubGVmdDpvLnRvcCkscy5sZW5ndGgmJjA+aSYmMD5hLW8/dGhpcy5fbW92ZVBsYWNlaG9sZGVyKHtlbGVtZW50OnMsc29ydGFibGU6dGhpc30sXCJwcmV2XCIscik6cy5sZW5ndGgmJmk+MCYmYS1vPjAmJnRoaXMuX21vdmVQbGFjZWhvbGRlcih7ZWxlbWVudDpzLHNvcnRhYmxlOnRoaXN9LFwibmV4dFwiLHIpfSxfbW92ZVBsYWNlaG9sZGVyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLnBsYWNlaG9sZGVyO2Uuc29ydGFibGUudHJpZ2dlcihsLG4pfHwodD9cInByZXZcIj09PXQ/ZS5lbGVtZW50LmJlZm9yZShpKTpcIm5leHRcIj09PXQmJmUuZWxlbWVudC5hZnRlcihpKTplLmVsZW1lbnQuYXBwZW5kKGkpLGUuc29ydGFibGUudHJpZ2dlcihjLG4pKX0sX3NldEN1cnNvcjpmdW5jdGlvbigpe3ZhciB0LG49dGhpcy5vcHRpb25zLmN1cnNvcjtuJiZcImF1dG9cIiE9PW4mJih0PWUoZG9jdW1lbnQuYm9keSksdGhpcy5fb3JpZ2luYWxDdXJzb3JUeXBlPXQuY3NzKFwiY3Vyc29yXCIpLHQuY3NzKHtjdXJzb3I6bn0pLHRoaXMuX2N1cnNvclN0eWxlc2hlZXR8fCh0aGlzLl9jdXJzb3JTdHlsZXNoZWV0PWUoXCI8c3R5bGU+KiB7IGN1cnNvcjogXCIrbitcIiAhaW1wb3J0YW50OyB9PC9zdHlsZT5cIikpLHRoaXMuX2N1cnNvclN0eWxlc2hlZXQuYXBwZW5kVG8odCkpfSxfcmVzZXRDdXJzb3I6ZnVuY3Rpb24oKXt0aGlzLl9vcmlnaW5hbEN1cnNvclR5cGUmJihlKGRvY3VtZW50LmJvZHkpLmNzcyhcImN1cnNvclwiLHRoaXMuX29yaWdpbmFsQ3Vyc29yVHlwZSksdGhpcy5fb3JpZ2luYWxDdXJzb3JUeXBlPW51bGwsdGhpcy5fY3Vyc29yU3R5bGVzaGVldC5yZW1vdmUoKSl9LF9nZXRFbGVtZW50Q2VudGVyOmZ1bmN0aW9uKGUpe3ZhciB0PWUubGVuZ3RoP28uZ2V0T2Zmc2V0KGUpOm51bGw7cmV0dXJuIHQmJih0LnRvcCs9ZS5vdXRlckhlaWdodCgpLzIsdC5sZWZ0Kz1lLm91dGVyV2lkdGgoKS8yKSx0fSxfaXNGbG9hdGluZzpmdW5jdGlvbihlKXtyZXR1cm4vbGVmdHxyaWdodC8udGVzdChlLmNzcyhcImZsb2F0XCIpKXx8L2lubGluZXx0YWJsZS1jZWxsLy50ZXN0KGUuY3NzKFwiZGlzcGxheVwiKSl9LF9jYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmRyYWdnZWRFbGVtZW50LnNob3coKSx0aGlzLnBsYWNlaG9sZGVyLnJlbW92ZSgpfSxfaXRlbXM6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMub3B0aW9ucy5maWx0ZXI7cmV0dXJuIGU9dD90aGlzLmVsZW1lbnQuZmluZCh0KTp0aGlzLmVsZW1lbnQuY2hpbGRyZW4oKX0saW5kZXhPZjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9pdGVtcygpLG49dGhpcy5wbGFjZWhvbGRlcixpPXRoaXMuZHJhZ2dlZEVsZW1lbnQ7cmV0dXJuIG4mJmVbMF09PW5bMF0/dC5ub3QoaSkuaW5kZXgoZSk6dC5ub3QobikuaW5kZXgoZSl9LGl0ZW1zOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wbGFjZWhvbGRlcix0PXRoaXMuX2l0ZW1zKCk7cmV0dXJuIGUmJih0PXQubm90KGUpKSx0fSxfaXNFbXB0eTpmdW5jdGlvbigpe3JldHVybiF0aGlzLml0ZW1zKCkubGVuZ3RofSxfaXNMYXN0SGlkZGVuOmZ1bmN0aW9uKCl7cmV0dXJuIDE9PT10aGlzLml0ZW1zKCkubGVuZ3RoJiZ0aGlzLml0ZW1zKCkuaXMoXCI6aGlkZGVuXCIpfX0pO28udWkucGx1Z2luKF8pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSx0KXt2YXIgbj1yLmdldE9mZnNldChlKSxpPXQubGVmdCt0LndpZHRoLG89dC50b3ArdC5oZWlnaHQ7cmV0dXJuIG4ucmlnaHQ9bi5sZWZ0K2Uub3V0ZXJXaWR0aCgpLG4uYm90dG9tPW4udG9wK2Uub3V0ZXJIZWlnaHQoKSwhKG4ubGVmdD5pfHx0LmxlZnQ+bi5yaWdodHx8bi50b3A+b3x8dC50b3A+bi5ib3R0b20pfXZhciBpLHI9d2luZG93LmtlbmRvLG89ci51aS5XaWRnZXQsYT1lLnByb3h5LHM9TWF0aC5hYnMsbD1cImFyaWEtc2VsZWN0ZWRcIixjPVwiay1zdGF0ZS1zZWxlY3RlZFwiLGQ9XCJrLXN0YXRlLXNlbGVjdGluZ1wiLHU9XCJrLXNlbGVjdGFibGVcIixoPVwiY2hhbmdlXCIscD1cIi5rZW5kb1NlbGVjdGFibGVcIixmPVwiay1zdGF0ZS11bnNlbGVjdGluZ1wiLGc9XCJpbnB1dCxhLHRleHRhcmVhLC5rLW11bHRpc2VsZWN0LXdyYXAsc2VsZWN0LGJ1dHRvblwiLG09ci5zdXBwb3J0LmJyb3dzZXIubXNpZSx2PSExOyFmdW5jdGlvbihlKXshZnVuY3Rpb24oKXtlKCc8ZGl2IGNsYXNzPVwicGFyZW50XCI+PHNwYW4gLz48L2Rpdj4nKS5vbihcImNsaWNrXCIsXCI+KlwiLGZ1bmN0aW9uKCl7dj0hMH0pLmZpbmQoXCJzcGFuXCIpLmNsaWNrKCkuZW5kKCkub2ZmKCl9KCl9KGUpLGk9by5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxzPXRoaXM7by5mbi5pbml0LmNhbGwocyx0LG4pLHMuX21hcnF1ZWU9ZShcIjxkaXYgY2xhc3M9J2stbWFycXVlZSc+PGRpdiBjbGFzcz0nay1tYXJxdWVlLWNvbG9yJz48L2Rpdj48L2Rpdj5cIikscy5fbGFzdEFjdGl2ZT1udWxsLHMuZWxlbWVudC5hZGRDbGFzcyh1KSxzLnJlbGF0ZWRUYXJnZXQ9cy5vcHRpb25zLnJlbGF0ZWRUYXJnZXQsaT1zLm9wdGlvbnMubXVsdGlwbGUsdGhpcy5vcHRpb25zLmFyaWEmJmkmJnMuZWxlbWVudC5hdHRyKFwiYXJpYS1tdWx0aXNlbGVjdGFibGVcIiwhMCkscy51c2VyRXZlbnRzPW5ldyByLlVzZXJFdmVudHMocy5lbGVtZW50LHtnbG9iYWw6ITAsYWxsb3dTZWxlY3Rpb246ITAsZmlsdGVyOih2P1wiXCI6XCIuXCIrdStcIiBcIikrcy5vcHRpb25zLmZpbHRlcix0YXA6YShzLl90YXAscyl9KSxpJiZzLnVzZXJFdmVudHMuYmluZChcInN0YXJ0XCIsYShzLl9zdGFydCxzKSkuYmluZChcIm1vdmVcIixhKHMuX21vdmUscykpLmJpbmQoXCJlbmRcIixhKHMuX2VuZCxzKSkuYmluZChcInNlbGVjdFwiLGEocy5fc2VsZWN0LHMpKX0sZXZlbnRzOltoXSxvcHRpb25zOntuYW1lOlwiU2VsZWN0YWJsZVwiLGZpbHRlcjpcIj4qXCIsbXVsdGlwbGU6ITEscmVsYXRlZFRhcmdldDplLm5vb3B9LF9pc0VsZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLmVsZW1lbnQsaT1uLmxlbmd0aCxyPSExO2ZvcihlPWVbMF0sdD0wO2k+dDt0KyspaWYoblt0XT09PWUpe3I9ITA7YnJlYWt9cmV0dXJuIHJ9LF90YXA6ZnVuY3Rpb24odCl7dmFyIG4saT1lKHQudGFyZ2V0KSxyPXRoaXMsbz10LmV2ZW50LmN0cmxLZXl8fHQuZXZlbnQubWV0YUtleSxhPXIub3B0aW9ucy5tdWx0aXBsZSxzPWEmJnQuZXZlbnQuc2hpZnRLZXksbD10LmV2ZW50LndoaWNoLGQ9dC5ldmVudC5idXR0b247IXIuX2lzRWxlbWVudChpLmNsb3Nlc3QoXCIuXCIrdSkpfHxsJiYzPT1sfHxkJiYyPT1kfHx0aGlzLl9hbGxvd1NlbGVjdGlvbih0LmV2ZW50LnRhcmdldCkmJihuPWkuaGFzQ2xhc3MoYyksYSYmb3x8ci5jbGVhcigpLGk9aS5hZGQoci5yZWxhdGVkVGFyZ2V0KGkpKSxzP3Iuc2VsZWN0UmFuZ2Uoci5fZmlyc3RTZWxlY3RlZSgpLGkpOihuJiZvPyhyLl91bnNlbGVjdChpKSxyLl9ub3RpZnkoaCkpOnIudmFsdWUoaSksci5fbGFzdEFjdGl2ZT1yLl9kb3duVGFyZ2V0PWkpKX0sX3N0YXJ0OmZ1bmN0aW9uKG4pe3ZhciBpLHI9dGhpcyxvPWUobi50YXJnZXQpLGE9by5oYXNDbGFzcyhjKSxzPW4uZXZlbnQuY3RybEtleXx8bi5ldmVudC5tZXRhS2V5O2lmKHRoaXMuX2FsbG93U2VsZWN0aW9uKG4uZXZlbnQudGFyZ2V0KSl7aWYoci5fZG93blRhcmdldD1vLCFyLl9pc0VsZW1lbnQoby5jbG9zZXN0KFwiLlwiK3UpKSlyZXR1cm4gci51c2VyRXZlbnRzLmNhbmNlbCgpLHQ7ci5vcHRpb25zLnVzZUFsbEl0ZW1zP3IuX2l0ZW1zPXIuZWxlbWVudC5maW5kKHIub3B0aW9ucy5maWx0ZXIpOihpPW8uY2xvc2VzdChyLmVsZW1lbnQpLHIuX2l0ZW1zPWkuZmluZChyLm9wdGlvbnMuZmlsdGVyKSksbi5zZW5kZXIuY2FwdHVyZSgpLHIuX21hcnF1ZWUuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSkuY3NzKHtsZWZ0Om4ueC5jbGllbnQrMSx0b3A6bi55LmNsaWVudCsxLHdpZHRoOjAsaGVpZ2h0OjB9KSxzfHxyLmNsZWFyKCksbz1vLmFkZChyLnJlbGF0ZWRUYXJnZXQobykpLGEmJihyLl9zZWxlY3RFbGVtZW50KG8sITApLHMmJm8uYWRkQ2xhc3MoZikpfX0sX21vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXtsZWZ0OmUueC5zdGFydExvY2F0aW9uPmUueC5sb2NhdGlvbj9lLngubG9jYXRpb246ZS54LnN0YXJ0TG9jYXRpb24sdG9wOmUueS5zdGFydExvY2F0aW9uPmUueS5sb2NhdGlvbj9lLnkubG9jYXRpb246ZS55LnN0YXJ0TG9jYXRpb24sd2lkdGg6cyhlLnguaW5pdGlhbERlbHRhKSxoZWlnaHQ6cyhlLnkuaW5pdGlhbERlbHRhKX07dC5fbWFycXVlZS5jc3MobiksdC5faW52YWxpZGF0ZVNlbGVjdGFibGVzKG4sZS5ldmVudC5jdHJsS2V5fHxlLmV2ZW50Lm1ldGFLZXkpLGUucHJldmVudERlZmF1bHQoKX0sX2VuZDpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpczt0Ll9tYXJxdWVlLnJlbW92ZSgpLHQuX3Vuc2VsZWN0KHQuZWxlbWVudC5maW5kKHQub3B0aW9ucy5maWx0ZXIrXCIuXCIrZikpLnJlbW92ZUNsYXNzKGYpLGU9dC5lbGVtZW50LmZpbmQodC5vcHRpb25zLmZpbHRlcitcIi5cIitkKSxlPWUuYWRkKHQucmVsYXRlZFRhcmdldChlKSksdC52YWx1ZShlKSx0Ll9sYXN0QWN0aXZlPXQuX2Rvd25UYXJnZXQsdC5faXRlbXM9bnVsbH0sX2ludmFsaWRhdGVTZWxlY3RhYmxlczpmdW5jdGlvbihlLHQpe3ZhciBpLHIsbyxhLHM9dGhpcy5fZG93blRhcmdldFswXSxsPXRoaXMuX2l0ZW1zO2ZvcihpPTAscj1sLmxlbmd0aDtyPmk7aSsrKWE9bC5lcShpKSxvPWEuYWRkKHRoaXMucmVsYXRlZFRhcmdldChhKSksbihhLGUpP2EuaGFzQ2xhc3MoYyk/dCYmcyE9PWFbMF0mJm8ucmVtb3ZlQ2xhc3MoYykuYWRkQ2xhc3MoZik6YS5oYXNDbGFzcyhkKXx8YS5oYXNDbGFzcyhmKXx8by5hZGRDbGFzcyhkKTphLmhhc0NsYXNzKGQpP28ucmVtb3ZlQ2xhc3MoZCk6dCYmYS5oYXNDbGFzcyhmKSYmby5yZW1vdmVDbGFzcyhmKS5hZGRDbGFzcyhjKX0sdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPWEobi5fc2VsZWN0RWxlbWVudCxuKTtyZXR1cm4gZT8oZS5lYWNoKGZ1bmN0aW9uKCl7aSh0aGlzKX0pLG4uX25vdGlmeShoKSx0KTpuLmVsZW1lbnQuZmluZChuLm9wdGlvbnMuZmlsdGVyK1wiLlwiK2MpfSxfZmlyc3RTZWxlY3RlZTpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcztyZXR1cm4gbnVsbCE9PXQuX2xhc3RBY3RpdmU/dC5fbGFzdEFjdGl2ZTooZT10LnZhbHVlKCksZS5sZW5ndGg+MD9lWzBdOnQuZWxlbWVudC5maW5kKHQub3B0aW9ucy5maWx0ZXIpWzBdKX0sX3NlbGVjdEVsZW1lbnQ6ZnVuY3Rpb24odCxuKXt2YXIgaT1lKHQpLHI9IW4mJnRoaXMuX25vdGlmeShcInNlbGVjdFwiLHtlbGVtZW50OnR9KTtpLnJlbW92ZUNsYXNzKGQpLHJ8fChpLmFkZENsYXNzKGMpLHRoaXMub3B0aW9ucy5hcmlhJiZpLmF0dHIobCwhMCkpfSxfbm90aWZ5OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ9dHx8e30sdGhpcy50cmlnZ2VyKGUsdCl9LF91bnNlbGVjdDpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZW1vdmVDbGFzcyhjKSx0aGlzLm9wdGlvbnMuYXJpYSYmZS5hdHRyKGwsITEpLGV9LF9zZWxlY3Q6ZnVuY3Rpb24odCl7dGhpcy5fYWxsb3dTZWxlY3Rpb24odC5ldmVudC50YXJnZXQpJiYoIW18fG0mJiFlKHIuX2FjdGl2ZUVsZW1lbnQoKSkuaXMoZykpJiZ0LnByZXZlbnREZWZhdWx0KCl9LF9hbGxvd1NlbGVjdGlvbjpmdW5jdGlvbih0KXtyZXR1cm4gZSh0KS5pcyhnKT8odGhpcy51c2VyRXZlbnRzLmNhbmNlbCgpLHRoaXMuX2Rvd25UYXJnZXQ9bnVsbCwhMSk6ITB9LHJlc2V0VG91Y2hFdmVudHM6ZnVuY3Rpb24oKXt0aGlzLnVzZXJFdmVudHMuY2FuY2VsKCl9LGNsZWFyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLmZpbHRlcitcIi5cIitjKTt0aGlzLl91bnNlbGVjdChlKX0sc2VsZWN0UmFuZ2U6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG8sYT10aGlzO2ZvcihhLmNsZWFyKCksYS5lbGVtZW50Lmxlbmd0aD4xJiYobz1hLm9wdGlvbnMuY29udGludW91c0l0ZW1zKCkpLG8mJm8ubGVuZ3RofHwobz1hLmVsZW1lbnQuZmluZChhLm9wdGlvbnMuZmlsdGVyKSksdD1lLmluQXJyYXkoZSh0KVswXSxvKSxuPWUuaW5BcnJheShlKG4pWzBdLG8pLHQ+biYmKHI9dCx0PW4sbj1yKSxhLm9wdGlvbnMudXNlQWxsSXRlbXN8fChuKz1hLmVsZW1lbnQubGVuZ3RoLTEpLGk9dDtuPj1pO2krKylhLl9zZWxlY3RFbGVtZW50KG9baV0pO2EuX25vdGlmeShoKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7by5mbi5kZXN0cm95LmNhbGwoZSksZS5lbGVtZW50Lm9mZihwKSxlLnVzZXJFdmVudHMuZGVzdHJveSgpLGUuX21hcnF1ZWU9ZS5fbGFzdEFjdGl2ZT1lLmVsZW1lbnQ9ZS51c2VyRXZlbnRzPW51bGx9fSksaS5wYXJzZU9wdGlvbnM9ZnVuY3Rpb24oZSl7dmFyIHQ9XCJzdHJpbmdcIj09dHlwZW9mIGUmJmUudG9Mb3dlckNhc2UoKTtyZXR1cm57bXVsdGlwbGU6dCYmdC5pbmRleE9mKFwibXVsdGlwbGVcIik+LTEsY2VsbDp0JiZ0LmluZGV4T2YoXCJjZWxsXCIpPi0xfX0sci51aS5wbHVnaW4oaSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG49d2luZG93LmtlbmRvLGk9bi51aS5XaWRnZXQscj1lLnByb3h5LG89bi5rZXlzLGE9XCJjbGlja1wiLHM9XCJrLWJ1dHRvblwiLGw9XCJrLWJ1dHRvbi1pY29uXCIsYz1cImstYnV0dG9uLWljb250ZXh0XCIsZD1cIi5rZW5kb0J1dHRvblwiLHU9XCJkaXNhYmxlZFwiLGg9XCJrLXN0YXRlLWRpc2FibGVkXCIscD1cImstc3RhdGUtZm9jdXNlZFwiLGY9XCJrLXN0YXRlLXNlbGVjdGVkXCIsZz1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBvPXRoaXM7aS5mbi5pbml0LmNhbGwobyxlLHQpLGU9by53cmFwcGVyPW8uZWxlbWVudCx0PW8ub3B0aW9ucyxlLmFkZENsYXNzKHMpLmF0dHIoXCJyb2xlXCIsXCJidXR0b25cIiksdC5lbmFibGU9dC5lbmFibGUmJiFlLmF0dHIodSksby5lbmFibGUodC5lbmFibGUpLG8uX3RhYmluZGV4KCksby5fZ3JhcGhpY3MoKSxlLm9uKGErZCxyKG8uX2NsaWNrLG8pKS5vbihcImZvY3VzXCIrZCxyKG8uX2ZvY3VzLG8pKS5vbihcImJsdXJcIitkLHIoby5fYmx1cixvKSkub24oXCJrZXlkb3duXCIrZCxyKG8uX2tleWRvd24sbykpLm9uKFwia2V5dXBcIitkLHIoby5fa2V5dXAsbykpLG4ubm90aWZ5KG8pfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLndyYXBwZXIub2ZmKGQpLGkuZm4uZGVzdHJveS5jYWxsKGUpfSxldmVudHM6W2FdLG9wdGlvbnM6e25hbWU6XCJCdXR0b25cIixpY29uOlwiXCIsc3ByaXRlQ3NzQ2xhc3M6XCJcIixpbWFnZVVybDpcIlwiLGVuYWJsZTohMH0sX2lzTmF0aXZlQnV0dG9uOmZ1bmN0aW9uKCl7cmV0dXJuXCJidXR0b25cIj09dGhpcy5lbGVtZW50LnByb3AoXCJ0YWdOYW1lXCIpLnRvTG93ZXJDYXNlKCl9LF9jbGljazpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnMuZW5hYmxlJiZ0aGlzLnRyaWdnZXIoYSx7ZXZlbnQ6ZX0pfSxfZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuZW5hYmxlJiZ0aGlzLmVsZW1lbnQuYWRkQ2xhc3MocCl9LF9ibHVyOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKHApfSxfa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuX2lzTmF0aXZlQnV0dG9uKCl8fChlLmtleUNvZGU9PW8uRU5URVJ8fGUua2V5Q29kZT09by5TUEFDRUJBUikmJihlLmtleUNvZGU9PW8uU1BBQ0VCQVImJihlLnByZXZlbnREZWZhdWx0KCksdC5vcHRpb25zLmVuYWJsZSYmdC5lbGVtZW50LmFkZENsYXNzKGYpKSx0Ll9jbGljayhlKSl9LF9rZXl1cDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhmKX0sX2dyYXBoaWNzOmZ1bmN0aW9uKCl7dmFyIHQsbixpLHI9dGhpcyxvPXIuZWxlbWVudCxhPXIub3B0aW9ucyxzPWEuaWNvbixkPWEuc3ByaXRlQ3NzQ2xhc3MsdT1hLmltYWdlVXJsOyhkfHx1fHxzKSYmKGk9ITAsby5jb250ZW50cygpLm5vdChcInNwYW4uay1zcHJpdGVcIikubm90KFwic3Bhbi5rLWljb25cIikubm90KFwiaW1nLmstaW1hZ2VcIikuZWFjaChmdW5jdGlvbih0LG4peygxPT1uLm5vZGVUeXBlfHwzPT1uLm5vZGVUeXBlJiZlLnRyaW0obi5ub2RlVmFsdWUpLmxlbmd0aD4wKSYmKGk9ITEpfSksby5hZGRDbGFzcyhpP2w6YykpLHM/KHQ9by5jaGlsZHJlbihcInNwYW4uay1pY29uXCIpLmZpcnN0KCksdFswXXx8KHQ9ZSgnPHNwYW4gY2xhc3M9XCJrLWljb25cIj48L3NwYW4+JykucHJlcGVuZFRvKG8pKSx0LmFkZENsYXNzKFwiay1pLVwiK3MpKTpkPyh0PW8uY2hpbGRyZW4oXCJzcGFuLmstc3ByaXRlXCIpLmZpcnN0KCksdFswXXx8KHQ9ZSgnPHNwYW4gY2xhc3M9XCJrLXNwcml0ZVwiPjwvc3Bhbj4nKS5wcmVwZW5kVG8obykpLHQuYWRkQ2xhc3MoZCkpOnUmJihuPW8uY2hpbGRyZW4oXCJpbWcuay1pbWFnZVwiKS5maXJzdCgpLG5bMF18fChuPWUoJzxpbWcgYWx0PVwiaWNvblwiIGNsYXNzPVwiay1pbWFnZVwiIC8+JykucHJlcGVuZFRvKG8pKSxuLmF0dHIoXCJzcmNcIix1KSl9LGVuYWJsZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5lbGVtZW50O2U9PT10JiYoZT0hMCksZT0hIWUsbi5vcHRpb25zLmVuYWJsZT1lLGkudG9nZ2xlQ2xhc3MoaCwhZSkuYXR0cihcImFyaWEtZGlzYWJsZWRcIiwhZSkuYXR0cih1LCFlKTt0cnl7aS5ibHVyKCl9Y2F0Y2gocil7fX19KTtuLnVpLnBsdWdpbihnKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsdCxuLGkscil7cmV0dXJuIGUoe2lkeDp0LHRleHQ6bixuczpjLm5zLG51bWVyaWM6aSx0aXRsZTpyfHxcIlwifSl9ZnVuY3Rpb24gaShlLHQsbil7cmV0dXJuIGsoe2NsYXNzTmFtZTplLnN1YnN0cmluZygxKSx0ZXh0OnQsd3JhcENsYXNzTmFtZTpufHxcIlwifSl9ZnVuY3Rpb24gcihlLHQsbixpKXtlLmZpbmQodCkucGFyZW50KCkuYXR0cihjLmF0dHIoXCJwYWdlXCIpLG4pLmF0dHIoXCJ0YWJpbmRleFwiLC0xKS50b2dnbGVDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIixpKX1mdW5jdGlvbiBvKGUsdCl7cihlLHAsMSwxPj10KX1mdW5jdGlvbiBhKGUsdCl7cihlLGcsTWF0aC5tYXgoMSx0LTEpLDE+PXQpfWZ1bmN0aW9uIHMoZSx0LG4pe3IoZSxtLE1hdGgubWluKG4sdCsxKSx0Pj1uKX1mdW5jdGlvbiBsKGUsdCxuKXtyKGUsZixuLHQ+PW4pfXZhciBjPXdpbmRvdy5rZW5kbyxkPWMudWksdT1kLldpZGdldCxoPWUucHJveHkscD1cIi5rLWktc2Vlay13XCIsZj1cIi5rLWktc2Vlay1lXCIsZz1cIi5rLWktYXJyb3ctd1wiLG09XCIuay1pLWFycm93LWVcIix2PVwiY2hhbmdlXCIsXz1cIi5rZW5kb1BhZ2VyXCIseT1cImNsaWNrXCIsdz1cImtleWRvd25cIixiPVwiZGlzYWJsZWRcIixrPWMudGVtcGxhdGUoJzxhIGhyZWY9XCJcXFxcI1wiIHRpdGxlPVwiIz10ZXh0I1wiIGNsYXNzPVwiay1saW5rIGstcGFnZXItbmF2ICM9IHdyYXBDbGFzc05hbWUgI1wiPjxzcGFuIGNsYXNzPVwiay1pY29uICM9IGNsYXNzTmFtZSAjXCI+Iz10ZXh0Izwvc3Bhbj48L2E+JykseD11LmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciByLGQsYj10aGlzO3UuZm4uaW5pdC5jYWxsKGIsdCxuKSxuPWIub3B0aW9ucyxiLmRhdGFTb3VyY2U9Yy5kYXRhLkRhdGFTb3VyY2UuY3JlYXRlKG4uZGF0YVNvdXJjZSksYi5saW5rVGVtcGxhdGU9Yy50ZW1wbGF0ZShiLm9wdGlvbnMubGlua1RlbXBsYXRlKSxiLnNlbGVjdFRlbXBsYXRlPWMudGVtcGxhdGUoYi5vcHRpb25zLnNlbGVjdFRlbXBsYXRlKSxyPWIucGFnZSgpLGQ9Yi50b3RhbFBhZ2VzKCksYi5fcmVmcmVzaEhhbmRsZXI9aChiLnJlZnJlc2gsYiksYi5kYXRhU291cmNlLmJpbmQodixiLl9yZWZyZXNoSGFuZGxlciksbi5wcmV2aW91c05leHQmJihiLmVsZW1lbnQuZmluZChwKS5sZW5ndGh8fChiLmVsZW1lbnQuYXBwZW5kKGkocCxuLm1lc3NhZ2VzLmZpcnN0LFwiay1wYWdlci1maXJzdFwiKSksbyhiLmVsZW1lbnQscixkKSksYi5lbGVtZW50LmZpbmQoZykubGVuZ3RofHwoYi5lbGVtZW50LmFwcGVuZChpKGcsbi5tZXNzYWdlcy5wcmV2aW91cykpLGEoYi5lbGVtZW50LHIsZCkpKSxuLm51bWVyaWMmJihiLmxpc3Q9Yi5lbGVtZW50LmZpbmQoXCIuay1wYWdlci1udW1iZXJzXCIpLGIubGlzdC5sZW5ndGh8fChiLmxpc3Q9ZSgnPHVsIGNsYXNzPVwiay1wYWdlci1udW1iZXJzIGstcmVzZXRcIiAvPicpLmFwcGVuZFRvKGIuZWxlbWVudCkpKSxuLmlucHV0JiYoYi5lbGVtZW50LmZpbmQoXCIuay1wYWdlci1pbnB1dFwiKS5sZW5ndGh8fGIuZWxlbWVudC5hcHBlbmQoJzxzcGFuIGNsYXNzPVwiay1wYWdlci1pbnB1dCBrLWxhYmVsXCI+JytuLm1lc3NhZ2VzLnBhZ2UrJzxpbnB1dCBjbGFzcz1cImstdGV4dGJveFwiPicrYy5mb3JtYXQobi5tZXNzYWdlcy5vZixkKStcIjwvc3Bhbj5cIiksYi5lbGVtZW50Lm9uKHcrXyxcIi5rLXBhZ2VyLWlucHV0IGlucHV0XCIsaChiLl9rZXlkb3duLGIpKSksbi5wcmV2aW91c05leHQmJihiLmVsZW1lbnQuZmluZChtKS5sZW5ndGh8fChiLmVsZW1lbnQuYXBwZW5kKGkobSxuLm1lc3NhZ2VzLm5leHQpKSxzKGIuZWxlbWVudCxyLGQpKSxiLmVsZW1lbnQuZmluZChmKS5sZW5ndGh8fChiLmVsZW1lbnQuYXBwZW5kKGkoZixuLm1lc3NhZ2VzLmxhc3QsXCJrLXBhZ2VyLWxhc3RcIikpLGwoYi5lbGVtZW50LHIsZCkpKSxuLnBhZ2VTaXplcyYmKGIuZWxlbWVudC5maW5kKFwiLmstcGFnZXItc2l6ZXNcIikubGVuZ3RofHxlKCc8c3BhbiBjbGFzcz1cImstcGFnZXItc2l6ZXMgay1sYWJlbFwiPjxzZWxlY3QvPicrbi5tZXNzYWdlcy5pdGVtc1BlclBhZ2UrXCI8L3NwYW4+XCIpLmFwcGVuZFRvKGIuZWxlbWVudCkuZmluZChcInNlbGVjdFwiKS5odG1sKGUubWFwKGUuaXNBcnJheShuLnBhZ2VTaXplcyk/bi5wYWdlU2l6ZXM6WzUsMTAsMjBdLGZ1bmN0aW9uKGUpe3JldHVyblwiPG9wdGlvbj5cIitlK1wiPC9vcHRpb24+XCJ9KS5qb2luKFwiXCIpKS5lbmQoKS5hcHBlbmRUbyhiLmVsZW1lbnQpLGIuZWxlbWVudC5maW5kKFwiLmstcGFnZXItc2l6ZXMgc2VsZWN0XCIpLnZhbChiLnBhZ2VTaXplKCkpLGMudWkuRHJvcERvd25MaXN0JiZiLmVsZW1lbnQuZmluZChcIi5rLXBhZ2VyLXNpemVzIHNlbGVjdFwiKS5zaG93KCkua2VuZG9Ecm9wRG93bkxpc3QoKSxiLmVsZW1lbnQub24oditfLFwiLmstcGFnZXItc2l6ZXMgc2VsZWN0XCIsaChiLl9jaGFuZ2UsYikpKSxuLnJlZnJlc2gmJihiLmVsZW1lbnQuZmluZChcIi5rLXBhZ2VyLXJlZnJlc2hcIikubGVuZ3RofHxiLmVsZW1lbnQuYXBwZW5kKCc8YSBocmVmPVwiI1wiIGNsYXNzPVwiay1wYWdlci1yZWZyZXNoIGstbGlua1wiIHRpdGxlPVwiJytuLm1lc3NhZ2VzLnJlZnJlc2grJ1wiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1yZWZyZXNoXCI+JytuLm1lc3NhZ2VzLnJlZnJlc2grXCI8L3NwYW4+PC9hPlwiKSxiLmVsZW1lbnQub24oeStfLFwiLmstcGFnZXItcmVmcmVzaFwiLGgoYi5fcmVmcmVzaENsaWNrLGIpKSksbi5pbmZvJiYoYi5lbGVtZW50LmZpbmQoXCIuay1wYWdlci1pbmZvXCIpLmxlbmd0aHx8Yi5lbGVtZW50LmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJrLXBhZ2VyLWluZm8gay1sYWJlbFwiIC8+JykpLGIuZWxlbWVudC5vbih5K18sXCJhXCIsaChiLl9jbGljayxiKSkuYWRkQ2xhc3MoXCJrLXBhZ2VyLXdyYXAgay13aWRnZXRcIiksbi5hdXRvQmluZCYmYi5yZWZyZXNoKCksYy5ub3RpZnkoYil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3UuZm4uZGVzdHJveS5jYWxsKGUpLGUuZWxlbWVudC5vZmYoXyksZS5kYXRhU291cmNlLnVuYmluZCh2LGUuX3JlZnJlc2hIYW5kbGVyKSxlLl9yZWZyZXNoSGFuZGxlcj1udWxsLGMuZGVzdHJveShlLmVsZW1lbnQpLGUuZWxlbWVudD1lLmxpc3Q9bnVsbH0sZXZlbnRzOlt2XSxvcHRpb25zOntuYW1lOlwiUGFnZXJcIixzZWxlY3RUZW1wbGF0ZTonPGxpPjxzcGFuIGNsYXNzPVwiay1zdGF0ZS1zZWxlY3RlZFwiPiM9dGV4dCM8L3NwYW4+PC9saT4nLGxpbmtUZW1wbGF0ZTonPGxpPjxhIHRhYmluZGV4PVwiLTFcIiBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstbGlua1wiIGRhdGEtIz1ucyNwYWdlPVwiIz1pZHgjXCIgI2lmICh0aXRsZSAhPT0gXCJcIikgeyMgdGl0bGU9XCIjPXRpdGxlI1wiICN9Iz4jPXRleHQjPC9hPjwvbGk+JyxidXR0b25Db3VudDoxMCxhdXRvQmluZDohMCxudW1lcmljOiEwLGluZm86ITAsaW5wdXQ6ITEscHJldmlvdXNOZXh0OiEwLHBhZ2VTaXplczohMSxyZWZyZXNoOiExLG1lc3NhZ2VzOntkaXNwbGF5OlwiezB9IC0gezF9IG9mIHsyfSBpdGVtc1wiLGVtcHR5OlwiTm8gaXRlbXMgdG8gZGlzcGxheVwiLHBhZ2U6XCJQYWdlXCIsb2Y6XCJvZiB7MH1cIixpdGVtc1BlclBhZ2U6XCJpdGVtcyBwZXIgcGFnZVwiLGZpcnN0OlwiR28gdG8gdGhlIGZpcnN0IHBhZ2VcIixwcmV2aW91czpcIkdvIHRvIHRoZSBwcmV2aW91cyBwYWdlXCIsbmV4dDpcIkdvIHRvIHRoZSBuZXh0IHBhZ2VcIixsYXN0OlwiR28gdG8gdGhlIGxhc3QgcGFnZVwiLHJlZnJlc2g6XCJSZWZyZXNoXCIsbW9yZVBhZ2VzOlwiTW9yZSBwYWdlc1wifX0sc2V0RGF0YVNvdXJjZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuZGF0YVNvdXJjZS51bmJpbmQodix0Ll9yZWZyZXNoSGFuZGxlciksdC5kYXRhU291cmNlPXQub3B0aW9ucy5kYXRhU291cmNlPWUsZS5iaW5kKHYsdC5fcmVmcmVzaEhhbmRsZXIpLHQub3B0aW9ucy5hdXRvQmluZCYmZS5mZXRjaCgpfSxyZWZyZXNoOmZ1bmN0aW9uKGUpe3ZhciB0LGkscixkPXRoaXMsdT0xLGg9XCJcIixwPWQucGFnZSgpLGY9ZC5vcHRpb25zLGc9ZC5wYWdlU2l6ZSgpLG09ZC5kYXRhU291cmNlLnRvdGFsKCksdj1kLnRvdGFsUGFnZXMoKSxfPWQubGlua1RlbXBsYXRlLHk9Zi5idXR0b25Db3VudDtpZighZXx8XCJpdGVtY2hhbmdlXCIhPWUuYWN0aW9uKXtpZihmLm51bWVyaWMpe2ZvcihwPnkmJihyPXAleSx1PTA9PT1yP3AteSsxOnAtcisxKSxpPU1hdGgubWluKHUreS0xLHYpLHU+MSYmKGgrPW4oXyx1LTEsXCIuLi5cIiwhMSxmLm1lc3NhZ2VzLm1vcmVQYWdlcykpLHQ9dTtpPj10O3QrKyloKz1uKHQ9PXA/ZC5zZWxlY3RUZW1wbGF0ZTpfLHQsdCwhMCk7dj5pJiYoaCs9bihfLHQsXCIuLi5cIiwhMSxmLm1lc3NhZ2VzLm1vcmVQYWdlcykpLFwiXCI9PT1oJiYoaD1kLnNlbGVjdFRlbXBsYXRlKHt0ZXh0OjB9KSksZC5saXN0Lmh0bWwoaCl9Zi5pbmZvJiYoaD1tPjA/Yy5mb3JtYXQoZi5tZXNzYWdlcy5kaXNwbGF5LChwLTEpKmcrMSxNYXRoLm1pbihwKmcsbSksbSk6Zi5tZXNzYWdlcy5lbXB0eSxkLmVsZW1lbnQuZmluZChcIi5rLXBhZ2VyLWluZm9cIikuaHRtbChoKSksZi5pbnB1dCYmZC5lbGVtZW50LmZpbmQoXCIuay1wYWdlci1pbnB1dFwiKS5odG1sKGQub3B0aW9ucy5tZXNzYWdlcy5wYWdlKyc8aW5wdXQgY2xhc3M9XCJrLXRleHRib3hcIj4nK2MuZm9ybWF0KGYubWVzc2FnZXMub2YsdikpLmZpbmQoXCJpbnB1dFwiKS52YWwocCkuYXR0cihiLDE+bSkudG9nZ2xlQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIsMT5tKSxmLnByZXZpb3VzTmV4dCYmKG8oZC5lbGVtZW50LHAsdiksYShkLmVsZW1lbnQscCx2KSxzKGQuZWxlbWVudCxwLHYpLGwoZC5lbGVtZW50LHAsdikpLGYucGFnZVNpemVzJiZkLmVsZW1lbnQuZmluZChcIi5rLXBhZ2VyLXNpemVzIHNlbGVjdFwiKS52YWwoZykuZmlsdGVyKFwiW1wiK2MuYXR0cihcInJvbGVcIikrXCI9ZHJvcGRvd25saXN0XVwiKS5rZW5kb0Ryb3BEb3duTGlzdChcInZhbHVlXCIsZykua2VuZG9Ecm9wRG93bkxpc3QoXCJ0ZXh0XCIsZyl9fSxfa2V5ZG93bjpmdW5jdGlvbihlKXtpZihlLmtleUNvZGU9PT1jLmtleXMuRU5URVIpe3ZhciB0PXRoaXMuZWxlbWVudC5maW5kKFwiLmstcGFnZXItaW5wdXRcIikuZmluZChcImlucHV0XCIpLG49cGFyc2VJbnQodC52YWwoKSwxMCk7KGlzTmFOKG4pfHwxPm58fG4+dGhpcy50b3RhbFBhZ2VzKCkpJiYobj10aGlzLnBhZ2UoKSksdC52YWwobiksdGhpcy5wYWdlKG4pfX0sX3JlZnJlc2hDbGljazpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksdGhpcy5kYXRhU291cmNlLnJlYWQoKX0sX2NoYW5nZTpmdW5jdGlvbihlKXt2YXIgdD1wYXJzZUludChlLmN1cnJlbnRUYXJnZXQudmFsdWUsMTApO2lzTmFOKHQpfHx0aGlzLmRhdGFTb3VyY2UucGFnZVNpemUodCl9LF9jbGljazpmdW5jdGlvbih0KXt2YXIgbj1lKHQuY3VycmVudFRhcmdldCk7dC5wcmV2ZW50RGVmYXVsdCgpLG4uaXMoXCIuay1zdGF0ZS1kaXNhYmxlZFwiKXx8dGhpcy5wYWdlKG4uYXR0cihjLmF0dHIoXCJwYWdlXCIpKSl9LHRvdGFsUGFnZXM6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5jZWlsKCh0aGlzLmRhdGFTb3VyY2UudG90YWwoKXx8MCkvdGhpcy5wYWdlU2l6ZSgpKX0scGFnZVNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhU291cmNlLnBhZ2VTaXplKCl8fHRoaXMuZGF0YVNvdXJjZS50b3RhbCgpfSxwYWdlOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD90aGlzLmRhdGFTb3VyY2UudG90YWwoKT4wP3RoaXMuZGF0YVNvdXJjZS5wYWdlKCk6MDoodGhpcy5kYXRhU291cmNlLnBhZ2UoZSksdGhpcy50cmlnZ2VyKHYse2luZGV4OmV9KSx0KX19KTtkLnBsdWdpbih4KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LG4pe3JldHVybiB0PT09bnx8ZS5jb250YWlucyh0LG4pfXZhciBuPXdpbmRvdy5rZW5kbyxpPW4udWkscj1pLldpZGdldCxvPW4uc3VwcG9ydCxhPW4uZ2V0T2Zmc2V0LHM9bi5fYWN0aXZlRWxlbWVudCxsPVwib3BlblwiLGM9XCJjbG9zZVwiLGQ9XCJkZWFjdGl2YXRlXCIsdT1cImFjdGl2YXRlXCIsaD1cImNlbnRlclwiLHA9XCJsZWZ0XCIsZj1cInJpZ2h0XCIsZz1cInRvcFwiLG09XCJib3R0b21cIix2PVwiYWJzb2x1dGVcIixfPVwiaGlkZGVuXCIseT1cImJvZHlcIix3PVwibG9jYXRpb25cIixiPVwicG9zaXRpb25cIixrPVwidmlzaWJsZVwiLHg9XCJlZmZlY3RzXCIsQz1cImstc3RhdGUtYWN0aXZlXCIsUz1cImstc3RhdGUtYm9yZGVyXCIsVD0vay1zdGF0ZS1ib3JkZXItKFxcdyspLyxEPVwiLmstcGlja2VyLXdyYXAsIC5rLWRyb3Bkb3duLXdyYXAsIC5rLWxpbmtcIixBPVwiZG93blwiLEU9ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLE09ZSh3aW5kb3cpLFA9XCJzY3JvbGxcIixJPVwicmVzaXplIHNjcm9sbFwiLHo9by50cmFuc2l0aW9ucy5jc3MsRj16K1widHJhbnNmb3JtXCIsUj1lLmV4dGVuZCxCPVwiLmtlbmRvUG9wdXBcIixMPVtcImZvbnQtc2l6ZVwiLFwiZm9udC1mYW1pbHlcIixcImZvbnQtc3RyZXRjaFwiLFwiZm9udC1zdHlsZVwiLFwiZm9udC13ZWlnaHRcIixcImxpbmUtaGVpZ2h0XCJdLE89ci5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxpKXt2YXIgbyxhPXRoaXM7aT1pfHx7fSxpLmlzUnRsJiYoaS5vcmlnaW49aS5vcmlnaW58fG0rXCIgXCIrZixpLnBvc2l0aW9uPWkucG9zaXRpb258fGcrXCIgXCIrZiksci5mbi5pbml0LmNhbGwoYSx0LGkpLHQ9YS5lbGVtZW50LGk9YS5vcHRpb25zLGEuY29sbGlzaW9ucz1pLmNvbGxpc2lvbj9pLmNvbGxpc2lvbi5zcGxpdChcIiBcIik6W10sYS5kb3duRXZlbnQ9bi5hcHBseUV2ZW50TWFwKEEsbi5ndWlkKCkpLDE9PT1hLmNvbGxpc2lvbnMubGVuZ3RoJiZhLmNvbGxpc2lvbnMucHVzaChhLmNvbGxpc2lvbnNbMF0pLG89ZShhLm9wdGlvbnMuYW5jaG9yKS5jbG9zZXN0KFwiLmstcG9wdXAsLmstZ3JvdXBcIikuZmlsdGVyKFwiOm5vdChbY2xhc3NePWttLV0pXCIpLGkuYXBwZW5kVG89ZShlKGkuYXBwZW5kVG8pWzBdfHxvWzBdfHx5KSxhLmVsZW1lbnQuaGlkZSgpLmFkZENsYXNzKFwiay1wb3B1cCBrLWdyb3VwIGstcmVzZXRcIikudG9nZ2xlQ2xhc3MoXCJrLXJ0bFwiLCEhaS5pc1J0bCkuY3NzKHtwb3NpdGlvbjp2fSkuYXBwZW5kVG8oaS5hcHBlbmRUbykub24oXCJtb3VzZWVudGVyXCIrQixmdW5jdGlvbigpe2EuX2hvdmVyZWQ9ITB9KS5vbihcIm1vdXNlbGVhdmVcIitCLGZ1bmN0aW9uKCl7YS5faG92ZXJlZD0hMX0pLGEud3JhcHBlcj1lKCksaS5hbmltYXRpb249PT0hMSYmKGkuYW5pbWF0aW9uPXtvcGVuOntlZmZlY3RzOnt9fSxjbG9zZTp7aGlkZTohMCxlZmZlY3RzOnt9fX0pLFIoaS5hbmltYXRpb24ub3Blbix7Y29tcGxldGU6ZnVuY3Rpb24oKXthLndyYXBwZXIuY3NzKHtvdmVyZmxvdzprfSksYS5fdHJpZ2dlcih1KX19KSxSKGkuYW5pbWF0aW9uLmNsb3NlLHtjb21wbGV0ZTpmdW5jdGlvbigpe2EuX2FuaW1hdGlvbkNsb3NlKCl9fSksYS5fbW91c2Vkb3duUHJveHk9ZnVuY3Rpb24oZSl7YS5fbW91c2Vkb3duKGUpfSxhLl9yZXNpemVQcm94eT1mdW5jdGlvbihlKXthLl9yZXNpemUoZSl9LGkudG9nZ2xlVGFyZ2V0JiZlKGkudG9nZ2xlVGFyZ2V0KS5vbihpLnRvZ2dsZUV2ZW50K0IsZS5wcm94eShhLnRvZ2dsZSxhKSl9LGV2ZW50czpbbCx1LGMsZF0sb3B0aW9uczp7bmFtZTpcIlBvcHVwXCIsdG9nZ2xlRXZlbnQ6XCJjbGlja1wiLG9yaWdpbjptK1wiIFwiK3AscG9zaXRpb246ZytcIiBcIitwLGFuY2hvcjp5LGFwcGVuZFRvOm51bGwsY29sbGlzaW9uOlwiZmxpcCBmaXRcIix2aWV3cG9ydDp3aW5kb3csY29weUFuY2hvclN0eWxlczohMCxhdXRvc2l6ZTohMSxtb2RhbDohMSxhbmltYXRpb246e29wZW46e2VmZmVjdHM6XCJzbGlkZUluOmRvd25cIix0cmFuc2l0aW9uOiEwLGR1cmF0aW9uOjIwMH0sY2xvc2U6e2R1cmF0aW9uOjEwMCxoaWRlOiEwfX19LF9hbmltYXRpb25DbG9zZTpmdW5jdGlvbigpe3ZhciB0LGkscixvLGE9dGhpcyxzPWEub3B0aW9uczthLndyYXBwZXIuaGlkZSgpLHQ9YS53cmFwcGVyLmRhdGEodyksaT1lKHMuYW5jaG9yKSx0JiZhLndyYXBwZXIuY3NzKHQpLHMuYW5jaG9yIT15JiYocj0oKGkuYXR0cihcImNsYXNzXCIpfHxcIlwiKS5tYXRjaChUKXx8W1wiXCIsXCJkb3duXCJdKVsxXSxvPVMrXCItXCIrcixpLnJlbW92ZUNsYXNzKG8pLmNoaWxkcmVuKEQpLnJlbW92ZUNsYXNzKEMpLnJlbW92ZUNsYXNzKG8pLGEuZWxlbWVudC5yZW1vdmVDbGFzcyhTK1wiLVwiK24uZGlyZWN0aW9uc1tyXS5yZXZlcnNlKSksYS5fY2xvc2luZz0hMSxhLl90cmlnZ2VyKGQpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIHQsaT10aGlzLG89aS5vcHRpb25zLGE9aS5lbGVtZW50Lm9mZihCKTtyLmZuLmRlc3Ryb3kuY2FsbChpKSxvLnRvZ2dsZVRhcmdldCYmZShvLnRvZ2dsZVRhcmdldCkub2ZmKEIpLG8ubW9kYWx8fChFLnVuYmluZChpLmRvd25FdmVudCxpLl9tb3VzZWRvd25Qcm94eSksaS5fc2Nyb2xsYWJsZVBhcmVudHMoKS51bmJpbmQoUCxpLl9yZXNpemVQcm94eSksTS51bmJpbmQoSSxpLl9yZXNpemVQcm94eSkpLG4uZGVzdHJveShpLmVsZW1lbnQuY2hpbGRyZW4oKSksYS5yZW1vdmVEYXRhKCksby5hcHBlbmRUb1swXT09PWRvY3VtZW50LmJvZHkmJih0PWEucGFyZW50KFwiLmstYW5pbWF0aW9uLWNvbnRhaW5lclwiKSx0WzBdP3QucmVtb3ZlKCk6YS5yZW1vdmUoKSl9LG9wZW46ZnVuY3Rpb24odCxpKXt2YXIgcixhLHMsYz10aGlzLGQ9e2lzRml4ZWQ6IWlzTmFOKHBhcnNlSW50KGksMTApKSx4OnQseTppfSx1PWMuZWxlbWVudCxoPWMub3B0aW9ucyxwPVwiZG93blwiLGY9ZShoLmFuY2hvciksbT11WzBdJiZ1Lmhhc0NsYXNzKFwia20td2lkZ2V0XCIpO2lmKCFjLnZpc2libGUoKSl7aWYoaC5jb3B5QW5jaG9yU3R5bGVzJiYobSYmXCJmb250LXNpemVcIj09TFswXSYmTC5zaGlmdCgpLHUuY3NzKG4uZ2V0Q29tcHV0ZWRTdHlsZXMoZlswXSxMKSkpLHUuZGF0YShcImFuaW1hdGluZ1wiKXx8Yy5fdHJpZ2dlcihsKSlyZXR1cm47aC5tb2RhbHx8KEUudW5iaW5kKGMuZG93bkV2ZW50LGMuX21vdXNlZG93blByb3h5KS5iaW5kKGMuZG93bkV2ZW50LGMuX21vdXNlZG93blByb3h5KSxvLm1vYmlsZU9TLmlvc3x8by5tb2JpbGVPUy5hbmRyb2lkfHwoYy5fc2Nyb2xsYWJsZVBhcmVudHMoKS51bmJpbmQoUCxjLl9yZXNpemVQcm94eSkuYmluZChQLGMuX3Jlc2l6ZVByb3h5KSxNLnVuYmluZChJLGMuX3Jlc2l6ZVByb3h5KS5iaW5kKEksYy5fcmVzaXplUHJveHkpKSksYy53cmFwcGVyPWE9bi53cmFwKHUsaC5hdXRvc2l6ZSkuY3NzKHtvdmVyZmxvdzpfLGRpc3BsYXk6XCJibG9ja1wiLHBvc2l0aW9uOnZ9KSxvLm1vYmlsZU9TLmFuZHJvaWQmJmEuY3NzKEYsXCJ0cmFuc2xhdGV6KDApXCIpLGEuY3NzKGIpLGUoaC5hcHBlbmRUbylbMF09PWRvY3VtZW50LmJvZHkmJmEuY3NzKGcsXCItMTAwMDBweFwiKSxyPVIoITAse30saC5hbmltYXRpb24ub3BlbiksYy5mbGlwcGVkPWMuX3Bvc2l0aW9uKGQpLHIuZWZmZWN0cz1uLnBhcnNlRWZmZWN0cyhyLmVmZmVjdHMsYy5mbGlwcGVkKSxwPXIuZWZmZWN0cy5zbGlkZUluP3IuZWZmZWN0cy5zbGlkZUluLmRpcmVjdGlvbjpwLGguYW5jaG9yIT15JiYocz1TK1wiLVwiK3AsdS5hZGRDbGFzcyhTK1wiLVwiK24uZGlyZWN0aW9uc1twXS5yZXZlcnNlKSxmLmFkZENsYXNzKHMpLmNoaWxkcmVuKEQpLmFkZENsYXNzKEMpLmFkZENsYXNzKHMpKSx1LmRhdGEoeCxyLmVmZmVjdHMpLmtlbmRvU3RvcCghMCkua2VuZG9BbmltYXRlKHIpfX0sdG9nZ2xlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlW2UudmlzaWJsZSgpP2M6bF0oKX0sdmlzaWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnQuaXMoXCI6XCIrayl9LGNsb3NlOmZ1bmN0aW9uKHQpe3ZhciBpLHIsbyxhLHM9dGhpcyxsPXMub3B0aW9ucztpZihzLnZpc2libGUoKSl7aWYoaT1zLndyYXBwZXJbMF0/cy53cmFwcGVyOm4ud3JhcChzLmVsZW1lbnQpLmhpZGUoKSxzLl9jbG9zaW5nfHxzLl90cmlnZ2VyKGMpKXJldHVybjtzLmVsZW1lbnQuZmluZChcIi5rLXBvcHVwXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1lKHRoaXMpLGk9bi5kYXRhKFwia2VuZG9Qb3B1cFwiKTtpJiZpLmNsb3NlKHQpfSksRS51bmJpbmQocy5kb3duRXZlbnQscy5fbW91c2Vkb3duUHJveHkpLHMuX3Njcm9sbGFibGVQYXJlbnRzKCkudW5iaW5kKFAscy5fcmVzaXplUHJveHkpLE0udW5iaW5kKEkscy5fcmVzaXplUHJveHkpLHQ/cj17aGlkZTohMCxlZmZlY3RzOnt9fToocj1SKCEwLHt9LGwuYW5pbWF0aW9uLmNsb3NlKSxvPXMuZWxlbWVudC5kYXRhKHgpLGE9ci5lZmZlY3RzLCFhJiYhbi5zaXplKGEpJiZvJiZuLnNpemUobykmJihyLmVmZmVjdHM9byxyLnJldmVyc2U9ITApLHMuX2Nsb3Npbmc9ITApLHMuZWxlbWVudC5rZW5kb1N0b3AoITApLGkuY3NzKHtvdmVyZmxvdzpffSkscy5lbGVtZW50LmtlbmRvQW5pbWF0ZShyKX19LF90cmlnZ2VyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRyaWdnZXIoZSx7dHlwZTplfSl9LF9yZXNpemU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztcInJlc2l6ZVwiPT09ZS50eXBlPyhjbGVhclRpbWVvdXQobi5fcmVzaXplVGltZW91dCksbi5fcmVzaXplVGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5fcG9zaXRpb24oKSxuLl9yZXNpemVUaW1lb3V0PW51bGx9LDUwKSk6bi5faG92ZXJlZHx8dChuLmVsZW1lbnRbMF0scygpKXx8bi5jbG9zZSgpfSxfbW91c2Vkb3duOmZ1bmN0aW9uKGkpe3ZhciByPXRoaXMsbz1yLmVsZW1lbnRbMF0sYT1yLm9wdGlvbnMscz1lKGEuYW5jaG9yKVswXSxsPWEudG9nZ2xlVGFyZ2V0LGM9bi5ldmVudFRhcmdldChpKSxkPWUoYykuY2xvc2VzdChcIi5rLXBvcHVwXCIpLHU9ZC5wYXJlbnQoKS5wYXJlbnQoXCIua20tc2hpbVwiKS5sZW5ndGg7ZD1kWzBdLCh1fHwhZHx8ZD09PXIuZWxlbWVudFswXSkmJlwicG9wb3ZlclwiIT09ZShpLnRhcmdldCkuY2xvc2VzdChcImFcIikuZGF0YShcInJlbFwiKSYmKHQobyxjKXx8dChzLGMpfHxsJiZ0KGUobClbMF0sYyl8fHIuY2xvc2UoKSl9LF9maXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPTA7cmV0dXJuIGUrdD5uJiYoaT1uLShlK3QpKSwwPmUmJihpPS1lKSxpfSxfZmxpcDpmdW5jdGlvbihlLHQsbixpLHIsbyxhKXt2YXIgcz0wO3JldHVybiBhPWF8fHQsbyE9PXImJm8hPT1oJiZyIT09aCYmKGUrYT5pJiYocys9LShuK3QpKSwwPmUrcyYmKHMrPW4rdCkpLHN9LF9zY3JvbGxhYmxlUGFyZW50czpmdW5jdGlvbigpe3JldHVybiBlKHRoaXMub3B0aW9ucy5hbmNob3IpLnBhcmVudHNVbnRpbChcImJvZHlcIikuZmlsdGVyKGZ1bmN0aW9uKGUsdCl7dmFyIGk9bi5nZXRDb21wdXRlZFN0eWxlcyh0LFtcIm92ZXJmbG93XCJdKTtyZXR1cm5cInZpc2libGVcIiE9aS5vdmVyZmxvd30pfSxfcG9zaXRpb246ZnVuY3Rpb24odCl7dmFyIG4saSxyLHMsbCxjLGQsdSxoLHA9dGhpcyxmPXAuZWxlbWVudC5jc3MoYixcIlwiKSxnPXAud3JhcHBlcixtPXAub3B0aW9ucyxfPWUobS52aWV3cG9ydCkseT1fLm9mZnNldCgpLGs9ZShtLmFuY2hvcikseD1tLm9yaWdpbi50b0xvd2VyQ2FzZSgpLnNwbGl0KFwiIFwiKSxDPW0ucG9zaXRpb24udG9Mb3dlckNhc2UoKS5zcGxpdChcIiBcIiksUz1wLmNvbGxpc2lvbnMsVD1vLnpvb21MZXZlbCgpLEQ9MTAwMDIsQT0hIShfWzBdPT13aW5kb3cmJndpbmRvdy5pbm5lcldpZHRoJiYxLjAyPj1UKSxFPTAsTT1BP3dpbmRvdy5pbm5lcldpZHRoOl8ud2lkdGgoKSxQPUE/d2luZG93LmlubmVySGVpZ2h0Ol8uaGVpZ2h0KCksST1rLnBhcmVudHMoKS5maWx0ZXIoZy5zaWJsaW5ncygpKTtpZihJWzBdKWlmKGk9TWF0aC5tYXgoK0kuY3NzKFwiekluZGV4XCIpLDApKUQ9aSsxMDtlbHNlIGZvcihuPWsucGFyZW50c1VudGlsKEkpLHI9bi5sZW5ndGg7cj5FO0UrKylpPStlKG5bRV0pLmNzcyhcInpJbmRleFwiKSxpJiZpPkQmJihEPWkrMTApO3JldHVybiBnLmNzcyhcInpJbmRleFwiLEQpLGcuY3NzKHQmJnQuaXNGaXhlZD97bGVmdDp0LngsdG9wOnQueX06cC5fYWxpZ24oeCxDKSkscz1hKGcsYixrWzBdPT09Zy5vZmZzZXRQYXJlbnQoKVswXSksbD1hKGcpLGM9ay5vZmZzZXRQYXJlbnQoKS5wYXJlbnQoXCIuay1hbmltYXRpb24tY29udGFpbmVyLC5rLXBvcHVwLC5rLWdyb3VwXCIpLGMubGVuZ3RoJiYocz1hKGcsYiwhMCksbD1hKGcpKSxfWzBdPT09d2luZG93PyhsLnRvcC09d2luZG93LnBhZ2VZT2Zmc2V0fHxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wfHwwLGwubGVmdC09d2luZG93LnBhZ2VYT2Zmc2V0fHxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdHx8MCk6KGwudG9wLT15LnRvcCxsLmxlZnQtPXkubGVmdCkscC53cmFwcGVyLmRhdGEodyl8fGcuZGF0YSh3LFIoe30scykpLGQ9Uih7fSxsKSx1PVIoe30scyksXCJmaXRcIj09PVNbMF0mJih1LnRvcCs9cC5fZml0KGQudG9wLGcub3V0ZXJIZWlnaHQoKSxQL1QpKSxcImZpdFwiPT09U1sxXSYmKHUubGVmdCs9cC5fZml0KGQubGVmdCxnLm91dGVyV2lkdGgoKSxNL1QpKSxoPVIoe30sdSksXCJmbGlwXCI9PT1TWzBdJiYodS50b3ArPXAuX2ZsaXAoZC50b3AsZi5vdXRlckhlaWdodCgpLGsub3V0ZXJIZWlnaHQoKSxQL1QseFswXSxDWzBdLGcub3V0ZXJIZWlnaHQoKSkpLFwiZmxpcFwiPT09U1sxXSYmKHUubGVmdCs9cC5fZmxpcChkLmxlZnQsZi5vdXRlcldpZHRoKCksay5vdXRlcldpZHRoKCksTS9ULHhbMV0sQ1sxXSxnLm91dGVyV2lkdGgoKSkpLGYuY3NzKGIsdiksZy5jc3ModSksdS5sZWZ0IT1oLmxlZnR8fHUudG9wIT1oLnRvcFxufSxfYWxpZ246ZnVuY3Rpb24odCxuKXt2YXIgaSxyPXRoaXMsbz1yLndyYXBwZXIscz1lKHIub3B0aW9ucy5hbmNob3IpLGw9dFswXSxjPXRbMV0sZD1uWzBdLHU9blsxXSxwPWEocyksZz1lKHIub3B0aW9ucy5hcHBlbmRUbyksdj1vLm91dGVyV2lkdGgoKSxfPW8ub3V0ZXJIZWlnaHQoKSx5PXMub3V0ZXJXaWR0aCgpLHc9cy5vdXRlckhlaWdodCgpLGI9cC50b3Asaz1wLmxlZnQseD1NYXRoLnJvdW5kO3JldHVybiBnWzBdIT1kb2N1bWVudC5ib2R5JiYoaT1hKGcpLGItPWkudG9wLGstPWkubGVmdCksbD09PW0mJihiKz13KSxsPT09aCYmKGIrPXgody8yKSksZD09PW0mJihiLT1fKSxkPT09aCYmKGItPXgoXy8yKSksYz09PWYmJihrKz15KSxjPT09aCYmKGsrPXgoeS8yKSksdT09PWYmJihrLT12KSx1PT09aCYmKGstPXgodi8yKSkse3RvcDpiLGxlZnQ6a319fSk7aS5wbHVnaW4oTyl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG49d2luZG93LmtlbmRvLGk9bi51aS5XaWRnZXQscj1lLnByb3h5LG89ZS5leHRlbmQsYT13aW5kb3cuc2V0VGltZW91dCxzPVwiY2xpY2tcIixsPVwic2hvd1wiLGM9XCJoaWRlXCIsZD1cImstbm90aWZpY2F0aW9uXCIsdT1cIi5rLW5vdGlmaWNhdGlvbi13cmFwIC5rLWktY2xvc2VcIixoPVwiaW5mb1wiLHA9XCJzdWNjZXNzXCIsZj1cIndhcm5pbmdcIixnPVwiZXJyb3JcIixtPVwidG9wXCIsdj1cImxlZnRcIixfPVwiYm90dG9tXCIseT1cInJpZ2h0XCIsdz1cInVwXCIsYj1cIi5rZW5kb05vdGlmaWNhdGlvblwiLGs9JzxkaXYgY2xhc3M9XCJrLXdpZGdldCBrLW5vdGlmaWNhdGlvblwiPjwvZGl2PicseD0nPGRpdiBjbGFzcz1cImstbm90aWZpY2F0aW9uLXdyYXBcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWktbm90ZVwiPiM9dHlwZUljb24jPC9zcGFuPiM9Y29udGVudCM8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktY2xvc2VcIj5IaWRlPC9zcGFuPjwvZGl2PicsQz1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LHIpe3ZhciBvPXRoaXM7aS5mbi5pbml0LmNhbGwobyx0LHIpLHI9by5vcHRpb25zLHIuYXBwZW5kVG8mJmUoci5hcHBlbmRUbykuaXModCl8fG8uZWxlbWVudC5oaWRlKCksby5fY29tcGlsZVRlbXBsYXRlcyhyLnRlbXBsYXRlcyksby5fZ3VpZD1cIl9cIituLmd1aWQoKSxvLl9pc1J0bD1uLnN1cHBvcnQuaXNSdGwodCksby5fY29tcGlsZVN0YWNraW5nKHIuc3RhY2tpbmcsci5wb3NpdGlvbi50b3ApLG4ubm90aWZ5KG8pfSxldmVudHM6W2wsY10sb3B0aW9uczp7bmFtZTpcIk5vdGlmaWNhdGlvblwiLHBvc2l0aW9uOntwaW5uZWQ6ITAsdG9wOm51bGwsbGVmdDpudWxsLGJvdHRvbToyMCxyaWdodDoyMH0sc3RhY2tpbmc6XCJkZWZhdWx0XCIsaGlkZU9uQ2xpY2s6ITAsYnV0dG9uOiExLGFsbG93SGlkZUFmdGVyOjAsYXV0b0hpZGVBZnRlcjo1ZTMsYXBwZW5kVG86bnVsbCx3aWR0aDpudWxsLGhlaWdodDpudWxsLHRlbXBsYXRlczpbXSxhbmltYXRpb246e29wZW46e2VmZmVjdHM6XCJmYWRlOmluXCIsZHVyYXRpb246MzAwfSxjbG9zZTp7ZWZmZWN0czpcImZhZGU6b3V0XCIsZHVyYXRpb246NjAwLGhpZGU6ITB9fX0sX2NvbXBpbGVUZW1wbGF0ZXM6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcyxyPW4udGVtcGxhdGU7aS5fY29tcGlsZWQ9e30sZS5lYWNoKHQsZnVuY3Rpb24odCxuKXtpLl9jb21waWxlZFtuLnR5cGVdPXIobi50ZW1wbGF0ZXx8ZShcIiNcIituLnRlbXBsYXRlSWQpLmh0bWwoKSl9KSxpLl9kZWZhdWx0Q29tcGlsZWQ9cih4KX0sX2dldENvbXBpbGVkOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Ll9kZWZhdWx0Q29tcGlsZWQ7cmV0dXJuIGU/dC5fY29tcGlsZWRbZV18fG46bn0sX2NvbXBpbGVTdGFja2luZzpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj10aGlzLG89e3BhZGRpbmdUb3A6MCxwYWRkaW5nUmlnaHQ6MCxwYWRkaW5nQm90dG9tOjAscGFkZGluZ0xlZnQ6MH07c3dpdGNoKGUpe2Nhc2VcImRvd25cIjpuPV8rXCIgXCIrdixpPW0rXCIgXCIrdixkZWxldGUgby5wYWRkaW5nQm90dG9tO2JyZWFrO2Nhc2UgeTpuPW0rXCIgXCIreSxpPW0rXCIgXCIrdixkZWxldGUgby5wYWRkaW5nUmlnaHQ7YnJlYWs7Y2FzZSB2Om49bStcIiBcIit2LGk9bStcIiBcIit5LGRlbGV0ZSBvLnBhZGRpbmdMZWZ0O2JyZWFrO2Nhc2UgdzpuPW0rXCIgXCIrdixpPV8rXCIgXCIrdixkZWxldGUgby5wYWRkaW5nVG9wO2JyZWFrO2RlZmF1bHQ6bnVsbCE9PXQ/KG49XytcIiBcIit2LGk9bStcIiBcIit2LGRlbGV0ZSBvLnBhZGRpbmdCb3R0b20pOihuPW0rXCIgXCIrdixpPV8rXCIgXCIrdixkZWxldGUgby5wYWRkaW5nVG9wKX1yLl9wb3B1cE9yaWdpbj1uLHIuX3BvcHVwUG9zaXRpb249aSxyLl9wb3B1cFBhZGRpbmdzPW99LF9hdHRhY2hQb3B1cEV2ZW50czpmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7ZS5vbihzK2IsZnVuY3Rpb24oKXt0LmNsb3NlKCl9KX12YXIgaSxyPWUuYWxsb3dIaWRlQWZ0ZXIsbz0haXNOYU4ocikmJnI+MDtlLmhpZGVPbkNsaWNrP3QuYmluZChcImFjdGl2YXRlXCIsZnVuY3Rpb24oKXtvP2EoZnVuY3Rpb24oKXtuKHQuZWxlbWVudCl9LHIpOm4odC5lbGVtZW50KX0pOmUuYnV0dG9uJiYoaT10LmVsZW1lbnQuZmluZCh1KSxvP2EoZnVuY3Rpb24oKXtuKGkpfSxyKTpuKGkpKX0sX3Nob3dQb3B1cDpmdW5jdGlvbih0LGkpe3ZhciByLHMsbD10aGlzLGM9aS5hdXRvSGlkZUFmdGVyLGQ9aS5wb3NpdGlvbi5sZWZ0LGg9aS5wb3NpdGlvbi50b3A7cz1lKFwiLlwiK2wuX2d1aWQpLmxhc3QoKSxyPW5ldyBuLnVpLlBvcHVwKHQse2FuY2hvcjpzWzBdP3M6ZG9jdW1lbnQuYm9keSxvcmlnaW46bC5fcG9wdXBPcmlnaW4scG9zaXRpb246bC5fcG9wdXBQb3NpdGlvbixhbmltYXRpb246aS5hbmltYXRpb24sbW9kYWw6ITAsY29sbGlzaW9uOlwiXCIsaXNSdGw6bC5faXNSdGwsY2xvc2U6ZnVuY3Rpb24oKXtsLl90cmlnZ2VySGlkZSh0aGlzLmVsZW1lbnQpfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKGUpe2Uuc2VuZGVyLmVsZW1lbnQub2ZmKGIpLGUuc2VuZGVyLmVsZW1lbnQuZmluZCh1KS5vZmYoYiksZS5zZW5kZXIuZGVzdHJveSgpfX0pLGwuX2F0dGFjaFBvcHVwRXZlbnRzKGksciksc1swXT9yLm9wZW4oKToobnVsbD09PWQmJihkPWUod2luZG93KS53aWR0aCgpLXQud2lkdGgoKS1pLnBvc2l0aW9uLnJpZ2h0KSxudWxsPT09aCYmKGg9ZSh3aW5kb3cpLmhlaWdodCgpLXQuaGVpZ2h0KCktaS5wb3NpdGlvbi5ib3R0b20pLHIub3BlbihkLGgpKSxyLndyYXBwZXIuYWRkQ2xhc3MobC5fZ3VpZCkuY3NzKG8oe21hcmdpbjowfSxsLl9wb3B1cFBhZGRpbmdzKSksaS5wb3NpdGlvbi5waW5uZWQ/KHIud3JhcHBlci5jc3MoXCJwb3NpdGlvblwiLFwiZml4ZWRcIiksc1swXSYmbC5fdG9nZ2xlUGluKHIud3JhcHBlciwhMCkpOnNbMF18fGwuX3RvZ2dsZVBpbihyLndyYXBwZXIsITEpLGM+MCYmYShmdW5jdGlvbigpe3IuY2xvc2UoKX0sYyl9LF90b2dnbGVQaW46ZnVuY3Rpb24odCxuKXt2YXIgaT1lKHdpbmRvdykscj1uPy0xOjE7dC5jc3Moe3RvcDpwYXJzZUludCh0LmNzcyhtKSwxMCkrcippLnNjcm9sbFRvcCgpLGxlZnQ6cGFyc2VJbnQodC5jc3ModiksMTApK3IqaS5zY3JvbGxMZWZ0KCl9KX0sX2F0dGFjaFN0YXRpY0V2ZW50czpmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7ZS5vbihzK2IscihpLl9oaWRlU3RhdGljLGksdCkpfXZhciBpPXRoaXMsbz1lLmFsbG93SGlkZUFmdGVyLGw9IWlzTmFOKG8pJiZvPjA7ZS5oaWRlT25DbGljaz9sP2EoZnVuY3Rpb24oKXtuKHQpfSxvKTpuKHQpOmUuYnV0dG9uJiYobD9hKGZ1bmN0aW9uKCl7bih0LmZpbmQodSkpfSxvKTpuKHQuZmluZCh1KSkpfSxfc2hvd1N0YXRpYzpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT10LmF1dG9IaWRlQWZ0ZXIscj10LmFuaW1hdGlvbixvPXQuc3RhY2tpbmc9PXd8fHQuc3RhY2tpbmc9PXY/XCJwcmVwZW5kVG9cIjpcImFwcGVuZFRvXCI7ZS5hZGRDbGFzcyhuLl9ndWlkKVtvXSh0LmFwcGVuZFRvKS5oaWRlKCkua2VuZG9BbmltYXRlKHIub3Blbnx8ITEpLG4uX2F0dGFjaFN0YXRpY0V2ZW50cyh0LGUpLGk+MCYmYShmdW5jdGlvbigpe24uX2hpZGVTdGF0aWMoZSl9LGkpfSxfaGlkZVN0YXRpYzpmdW5jdGlvbihlKXtlLmtlbmRvQW5pbWF0ZShvKHRoaXMub3B0aW9ucy5hbmltYXRpb24uY2xvc2V8fCExLHtjb21wbGV0ZTpmdW5jdGlvbigpe2Uub2ZmKGIpLmZpbmQodSkub2ZmKGIpLGUucmVtb3ZlKCl9fSkpLHRoaXMuX3RyaWdnZXJIaWRlKGUpfSxfdHJpZ2dlckhpZGU6ZnVuY3Rpb24oZSl7dGhpcy50cmlnZ2VyKGMse2VsZW1lbnQ6ZX0pLHRoaXMuYW5ndWxhcihcImNsZWFudXBcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czplfX0pfSxzaG93OmZ1bmN0aW9uKGkscil7dmFyIGEscyxjPXRoaXMsdT1jLm9wdGlvbnMscD1lKGspO3JldHVybiByfHwocj1oKSxudWxsIT09aSYmaSE9PXQmJlwiXCIhPT1pJiYobi5pc0Z1bmN0aW9uKGkpJiYoaT1pKCkpLHM9e3R5cGVJY29uOnIsY29udGVudDpcIlwifSxhPWUuaXNQbGFpbk9iamVjdChpKT9vKHMsaSk6byhzLHtjb250ZW50Oml9KSxwLmFkZENsYXNzKGQrXCItXCIrcikudG9nZ2xlQ2xhc3MoZCtcIi1idXR0b25cIix1LmJ1dHRvbikuYXR0cihcImRhdGEtcm9sZVwiLFwiYWxlcnRcIikuY3NzKHt3aWR0aDp1LndpZHRoLGhlaWdodDp1LmhlaWdodH0pLmFwcGVuZChjLl9nZXRDb21waWxlZChyKShhKSksYy5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOnAsZGF0YTpbe2RhdGFJdGVtOmF9XX19KSxlKHUuYXBwZW5kVG8pWzBdP2MuX3Nob3dTdGF0aWMocCx1KTpjLl9zaG93UG9wdXAocCx1KSxjLnRyaWdnZXIobCx7ZWxlbWVudDpwfSkpLGN9LGluZm86ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2hvdyhlLGgpfSxzdWNjZXNzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNob3coZSxwKX0sd2FybmluZzpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaG93KGUsZil9LGVycm9yOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNob3coZSxnKX0saGlkZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LmdldE5vdGlmaWNhdGlvbnMoKTtyZXR1cm4gbi5lYWNoKHQub3B0aW9ucy5hcHBlbmRUbz9mdW5jdGlvbihuLGkpe3QuX2hpZGVTdGF0aWMoZShpKSl9OmZ1bmN0aW9uKHQsbil7dmFyIGk9ZShuKS5kYXRhKFwia2VuZG9Qb3B1cFwiKTtpJiZpLmNsb3NlKCl9KSx0fSxnZXROb3RpZmljYXRpb25zOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPWUoXCIuXCIrdC5fZ3VpZCk7cmV0dXJuIHQub3B0aW9ucy5hcHBlbmRUbz9uOm4uY2hpbGRyZW4oXCIuXCIrZCl9LHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIG4scj10aGlzO2kuZm4uc2V0T3B0aW9ucy5jYWxsKHIsZSksbj1yLm9wdGlvbnMsZS50ZW1wbGF0ZXMhPT10JiZyLl9jb21waWxlVGVtcGxhdGVzKG4udGVtcGxhdGVzKSwoZS5zdGFja2luZyE9PXR8fGUucG9zaXRpb24hPT10KSYmci5fY29tcGlsZVN0YWNraW5nKG4uc3RhY2tpbmcsbi5wb3NpdGlvbi50b3ApfSxkZXN0cm95OmZ1bmN0aW9uKCl7aS5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5nZXROb3RpZmljYXRpb25zKCkub2ZmKGIpLmZpbmQodSkub2ZmKGIpfX0pO24udWkucGx1Z2luKEMpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe2Zvcig7ZS5sZW5ndGg7KW4oZSksZT1lLnBhcmVudCgpfWZ1bmN0aW9uIG4oZSl7dmFyIHQ9ZS5kYXRhKG8ubnMrXCJ0aXRsZVwiKTt0JiYoZS5hdHRyKFwidGl0bGVcIix0KSxlLnJlbW92ZURhdGEoby5ucytcInRpdGxlXCIpKX1mdW5jdGlvbiBpKGUpe3ZhciB0PWUuYXR0cihcInRpdGxlXCIpO3QmJihlLmRhdGEoby5ucytcInRpdGxlXCIsdCksZS5hdHRyKFwidGl0bGVcIixcIlwiKSl9ZnVuY3Rpb24gcihlKXtmb3IoO2UubGVuZ3RoJiYhZS5pcyhcImJvZHlcIik7KWkoZSksZT1lLnBhcmVudCgpfXZhciBvPXdpbmRvdy5rZW5kbyxhPW8udWkuV2lkZ2V0LHM9by51aS5Qb3B1cCxsPW8uaXNGdW5jdGlvbixjPWUuaXNQbGFpbk9iamVjdCxkPWUuZXh0ZW5kLHU9ZS5wcm94eSxoPWUoZG9jdW1lbnQpLHA9by5pc0xvY2FsVXJsLGY9XCJfdHRfYWN0aXZlXCIsZz1cImFyaWEtZGVzY3JpYmVkYnlcIixtPVwic2hvd1wiLHY9XCJoaWRlXCIsXz1cImVycm9yXCIseT1cImNvbnRlbnRMb2FkXCIsdz1cInJlcXVlc3RTdGFydFwiLGI9XCJrLWNvbnRlbnQtZnJhbWVcIixrPSc8ZGl2IHJvbGU9XCJ0b29sdGlwXCIgY2xhc3M9XCJrLXdpZGdldCBrLXRvb2x0aXAjaWYgKCFhdXRvSGlkZSkgeyMgay10b29sdGlwLWNsb3NhYmxlI30jXCI+I2lmICghYXV0b0hpZGUpIHsjIDxkaXYgY2xhc3M9XCJrLXRvb2x0aXAtYnV0dG9uXCI+PGEgaHJlZj1cIlxcXFwjXCIgY2xhc3M9XCJrLWljb24gay1pLWNsb3NlXCI+Y2xvc2U8L2E+PC9kaXY+ICN9IzxkaXYgY2xhc3M9XCJrLXRvb2x0aXAtY29udGVudFwiPjwvZGl2PiNpZiAoY2FsbG91dCl7ICM8ZGl2IGNsYXNzPVwiay1jYWxsb3V0IGstY2FsbG91dC0jPWRpciNcIj48L2Rpdj4jfSM8L2Rpdj4nLHg9by50ZW1wbGF0ZShcIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIGNsYXNzPSdcIitiK1wiJyBzcmM9JyM9IGNvbnRlbnQudXJsICMnPlRoaXMgcGFnZSByZXF1aXJlcyBmcmFtZXMgaW4gb3JkZXIgdG8gc2hvdyBjb250ZW50PC9pZnJhbWU+XCIpLEM9XCIua2VuZG9Ub29sdGlwXCIsUz17Ym90dG9tOntvcmlnaW46XCJib3R0b20gY2VudGVyXCIscG9zaXRpb246XCJ0b3AgY2VudGVyXCJ9LHRvcDp7b3JpZ2luOlwidG9wIGNlbnRlclwiLHBvc2l0aW9uOlwiYm90dG9tIGNlbnRlclwifSxsZWZ0OntvcmlnaW46XCJjZW50ZXIgbGVmdFwiLHBvc2l0aW9uOlwiY2VudGVyIHJpZ2h0XCIsY29sbGlzaW9uOlwiZml0IGZsaXBcIn0scmlnaHQ6e29yaWdpbjpcImNlbnRlciByaWdodFwiLHBvc2l0aW9uOlwiY2VudGVyIGxlZnRcIixjb2xsaXNpb246XCJmaXQgZmxpcFwifSxjZW50ZXI6e3Bvc2l0aW9uOlwiY2VudGVyIGNlbnRlclwiLG9yaWdpbjpcImNlbnRlciBjZW50ZXJcIn19LFQ9e3RvcDpcImJvdHRvbVwiLGJvdHRvbTpcInRvcFwiLGxlZnQ6XCJyaWdodFwiLHJpZ2h0OlwibGVmdFwiLGNlbnRlcjpcImNlbnRlclwifSxEPXtib3R0b206XCJuXCIsdG9wOlwic1wiLGxlZnQ6XCJlXCIscmlnaHQ6XCJ3XCIsY2VudGVyOlwiblwifSxBPXtob3Jpem9udGFsOntvZmZzZXQ6XCJ0b3BcIixzaXplOlwib3V0ZXJIZWlnaHRcIn0sdmVydGljYWw6e29mZnNldDpcImxlZnRcIixzaXplOlwib3V0ZXJXaWR0aFwifX0sRT1mdW5jdGlvbihlKXtyZXR1cm4gZS50YXJnZXQuZGF0YShvLm5zK1widGl0bGVcIil9LE09YS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXM7YS5mbi5pbml0LmNhbGwoaSxlLHQpLG49aS5vcHRpb25zLnBvc2l0aW9uLm1hdGNoKC9sZWZ0fHJpZ2h0Lyk/XCJob3Jpem9udGFsXCI6XCJ2ZXJ0aWNhbFwiLGkuZGltZW5zaW9ucz1BW25dLGkuX2RvY3VtZW50S2V5RG93bkhhbmRsZXI9dShpLl9kb2N1bWVudEtleURvd24saSksaS5lbGVtZW50Lm9uKGkub3B0aW9ucy5zaG93T24rQyxpLm9wdGlvbnMuZmlsdGVyLHUoaS5fc2hvd09uLGkpKS5vbihcIm1vdXNlZW50ZXJcIitDLGkub3B0aW9ucy5maWx0ZXIsdShpLl9tb3VzZWVudGVyLGkpKSx0aGlzLm9wdGlvbnMuYXV0b0hpZGUmJmkuZWxlbWVudC5vbihcIm1vdXNlbGVhdmVcIitDLGkub3B0aW9ucy5maWx0ZXIsdShpLl9tb3VzZWxlYXZlLGkpKX0sb3B0aW9uczp7bmFtZTpcIlRvb2x0aXBcIixmaWx0ZXI6XCJcIixjb250ZW50OkUsc2hvd0FmdGVyOjEwMCxjYWxsb3V0OiEwLHBvc2l0aW9uOlwiYm90dG9tXCIsc2hvd09uOlwibW91c2VlbnRlclwiLGF1dG9IaWRlOiEwLHdpZHRoOm51bGwsaGVpZ2h0Om51bGwsYW5pbWF0aW9uOntvcGVuOntlZmZlY3RzOlwiZmFkZTppblwiLGR1cmF0aW9uOjB9LGNsb3NlOntlZmZlY3RzOlwiZmFkZTpvdXRcIixkdXJhdGlvbjo0MCxoaWRlOiEwfX19LGV2ZW50czpbbSx2LHksXyx3XSxfbW91c2VlbnRlcjpmdW5jdGlvbih0KXtyKGUodC5jdXJyZW50VGFyZ2V0KSl9LF9zaG93T246ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPWUodC5jdXJyZW50VGFyZ2V0KTtuLm9wdGlvbnMuc2hvd09uJiZuLm9wdGlvbnMuc2hvd09uLm1hdGNoKC9jbGlja3xmb2N1cy8pP24uX3Nob3coaSk6KGNsZWFyVGltZW91dChuLnRpbWVvdXQpLG4udGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5fc2hvdyhpKX0sbi5vcHRpb25zLnNob3dBZnRlcikpfSxfYXBwZW5kQ29udGVudDpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMsaT1uLm9wdGlvbnMuY29udGVudCxyPW4uY29udGVudCxhPW4ub3B0aW9ucy5pZnJhbWU7YyhpKSYmaS51cmw/KFwiaWZyYW1lXCJpbiBuLm9wdGlvbnN8fChhPSFwKGkudXJsKSksbi50cmlnZ2VyKHcse29wdGlvbnM6aSx0YXJnZXQ6ZX0pLGE/KHIuaGlkZSgpLHQ9ci5maW5kKFwiLlwiK2IpWzBdLHQ/dC5zcmM9aS51cmx8fHQuc3JjOnIuaHRtbCh4KHtjb250ZW50Oml9KSksci5maW5kKFwiLlwiK2IpLm9mZihcImxvYWRcIitDKS5vbihcImxvYWRcIitDLGZ1bmN0aW9uKCl7bi50cmlnZ2VyKHkpLHIuc2hvdygpfSkpOihyLmVtcHR5KCksby51aS5wcm9ncmVzcyhyLCEwKSxuLl9hamF4UmVxdWVzdChpKSkpOmkmJmwoaSk/KGk9aSh7c2VuZGVyOnRoaXMsdGFyZ2V0OmV9KSxyLmh0bWwoaXx8XCJcIikpOnIuaHRtbChpKSxuLmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6cn19KX0sX2FqYXhSZXF1ZXN0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7alF1ZXJ5LmFqYXgoZCh7dHlwZTpcIkdFVFwiLGRhdGFUeXBlOlwiaHRtbFwiLGNhY2hlOiExLGVycm9yOmZ1bmN0aW9uKGUsbil7by51aS5wcm9ncmVzcyh0LmNvbnRlbnQsITEpLHQudHJpZ2dlcihfLHtzdGF0dXM6bix4aHI6ZX0pfSxzdWNjZXNzOnUoZnVuY3Rpb24oZSl7by51aS5wcm9ncmVzcyh0LmNvbnRlbnQsITEpLHQuY29udGVudC5odG1sKGUpLHQudHJpZ2dlcih5KX0sdCl9LGUpKX0sX2RvY3VtZW50S2V5RG93bjpmdW5jdGlvbihlKXtlLmtleUNvZGU9PT1vLmtleXMuRVNDJiZ0aGlzLmhpZGUoKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLnBvcHVwO3QmJnQub3B0aW9ucy5hbmNob3ImJmUuX2FwcGVuZENvbnRlbnQodC5vcHRpb25zLmFuY2hvcil9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLnBvcHVwJiZ0aGlzLnBvcHVwLmNsb3NlKCl9LHNob3c6ZnVuY3Rpb24oZSl7ZT1lfHx0aGlzLmVsZW1lbnQscihlKSx0aGlzLl9zaG93KGUpfSxfc2hvdzpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi50YXJnZXQoKTtuLnBvcHVwfHxuLl9pbml0UG9wdXAoKSxpJiZpWzBdIT1lWzBdJiYobi5wb3B1cC5jbG9zZSgpLG4ucG9wdXAuZWxlbWVudC5rZW5kb1N0b3AoITAsITApKSxpJiZpWzBdPT1lWzBdfHwobi5fYXBwZW5kQ29udGVudChlKSxuLnBvcHVwLm9wdGlvbnMuYW5jaG9yPWUpLG4ucG9wdXAub25lKFwiZGVhY3RpdmF0ZVwiLGZ1bmN0aW9uKCl7dChlKSxlLnJlbW92ZUF0dHIoZyksdGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoXCJpZFwiKS5hdHRyKFwiYXJpYS1oaWRkZW5cIiwhMCksaC5vZmYoXCJrZXlkb3duXCIrQyxuLl9kb2N1bWVudEtleURvd25IYW5kbGVyKX0pLG4ucG9wdXAub3BlbigpfSxfaW5pdFBvcHVwOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucyxpPWUoby50ZW1wbGF0ZShrKSh7Y2FsbG91dDpuLmNhbGxvdXQmJlwiY2VudGVyXCIhPT1uLnBvc2l0aW9uLGRpcjpEW24ucG9zaXRpb25dLGF1dG9IaWRlOm4uYXV0b0hpZGV9KSk7dC5wb3B1cD1uZXcgcyhpLGQoe2FjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLmFuY2hvcixpPWVbMF0uaWR8fHQuZWxlbWVudFswXS5pZDtpJiYoZS5hdHRyKGcsaStmKSx0aGlzLmVsZW1lbnQuYXR0cihcImlkXCIsaStmKSksbi5jYWxsb3V0JiZ0Ll9wb3NpdGlvbkNhbGxvdXQoKSx0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cihcImFyaWEtaGlkZGVuXCIpLGgub24oXCJrZXlkb3duXCIrQyx0Ll9kb2N1bWVudEtleURvd25IYW5kbGVyKSx0LnRyaWdnZXIobSl9LGNsb3NlOmZ1bmN0aW9uKCl7dC50cmlnZ2VyKHYpfSxjb3B5QW5jaG9yU3R5bGVzOiExLGFuaW1hdGlvbjpuLmFuaW1hdGlvbn0sU1tuLnBvc2l0aW9uXSkpLGkuY3NzKHt3aWR0aDpuLndpZHRoLGhlaWdodDpuLmhlaWdodH0pLHQuY29udGVudD1pLmZpbmQoXCIuay10b29sdGlwLWNvbnRlbnRcIiksdC5hcnJvdz1pLmZpbmQoXCIuay1jYWxsb3V0XCIpLG4uYXV0b0hpZGU/aS5vbihcIm1vdXNlbGVhdmVcIitDLHUodC5fbW91c2VsZWF2ZSx0KSk6aS5vbihcImNsaWNrXCIrQyxcIi5rLXRvb2x0aXAtYnV0dG9uXCIsdSh0Ll9jbG9zZUJ1dHRvbkNsaWNrLHQpKX0sX2Nsb3NlQnV0dG9uQ2xpY2s6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuaGlkZSgpfSxfbW91c2VsZWF2ZTpmdW5jdGlvbihuKXtpZih0aGlzLnBvcHVwKXt2YXIgaT1lKG4uY3VycmVudFRhcmdldCkscj1pLm9mZnNldCgpLG89bi5wYWdlWCxhPW4ucGFnZVk7aWYoci5yaWdodD1yLmxlZnQraS5vdXRlcldpZHRoKCksci5ib3R0b209ci50b3AraS5vdXRlckhlaWdodCgpLG8+ci5sZWZ0JiZyLnJpZ2h0Pm8mJmE+ci50b3AmJnIuYm90dG9tPmEpcmV0dXJuO3RoaXMucG9wdXAuY2xvc2UoKX1lbHNlIHQoZShuLmN1cnJlbnRUYXJnZXQpKTtjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KX0sX3Bvc2l0aW9uQ2FsbG91dDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMucG9zaXRpb24saT10LmRpbWVuc2lvbnMscj1pLm9mZnNldCxvPXQucG9wdXAsYT1vLm9wdGlvbnMuYW5jaG9yLHM9ZShhKS5vZmZzZXQoKSxsPXBhcnNlSW50KHQuYXJyb3cuY3NzKFwiYm9yZGVyLXRvcC13aWR0aFwiKSwxMCksYz1lKG8uZWxlbWVudCkub2Zmc2V0KCksZD1EW28uZmxpcHBlZD9UW25dOm5dLHU9c1tyXS1jW3JdK2UoYSlbaS5zaXplXSgpLzItbDt0LmFycm93LnJlbW92ZUNsYXNzKFwiay1jYWxsb3V0LW4gay1jYWxsb3V0LXMgay1jYWxsb3V0LXcgay1jYWxsb3V0LWVcIikuYWRkQ2xhc3MoXCJrLWNhbGxvdXQtXCIrZCkuY3NzKHIsdSl9LHRhcmdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBvcHVwP3RoaXMucG9wdXAub3B0aW9ucy5hbmNob3I6bnVsbH0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucG9wdXA7ZSYmKGUuZWxlbWVudC5vZmYoQyksZS5kZXN0cm95KCkpLHRoaXMuZWxlbWVudC5vZmYoQyksaC5vZmYoXCJrZXlkb3duXCIrQyx0aGlzLl9kb2N1bWVudEtleURvd25IYW5kbGVyKSxhLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKX19KTtvLnVpLnBsdWdpbihNKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKHQsaSl7dmFyIHIsbz0hMTtyZXR1cm4gdC5maWx0ZXJzJiYocj1lLmdyZXAodC5maWx0ZXJzLGZ1bmN0aW9uKGUpe3JldHVybiBvPW4oZSxpKSxlLmZpbHRlcnM/ZS5maWx0ZXJzLmxlbmd0aDplLmZpZWxkIT1pfSksb3x8dC5maWx0ZXJzLmxlbmd0aD09PXIubGVuZ3RofHwobz0hMCksdC5maWx0ZXJzPXIpLG99dmFyIGk9d2luZG93LmtlbmRvLHI9aS51aSxvPXIuV2lkZ2V0LGE9aS5rZXlzLHM9aS5zdXBwb3J0LGw9aS5odG1sRW5jb2RlLGM9aS5fYWN0aXZlRWxlbWVudCxkPVwiaWRcIix1PVwibGlcIixoPVwiY2hhbmdlXCIscD1cImstc3RhdGUtZm9jdXNlZFwiLGY9XCJrLXN0YXRlLWhvdmVyXCIsZz1cImstbG9hZGluZ1wiLG09XCJvcGVuXCIsdj1cImNsb3NlXCIsXz1cInNlbGVjdFwiLHk9XCJzZWxlY3RlZFwiLHc9XCJwcm9ncmVzc1wiLGI9XCJyZXF1ZXN0RW5kXCIsaz1cIndpZHRoXCIseD1lLmV4dGVuZCxDPWUucHJveHksUz1zLmJyb3dzZXIsVD1TLm1zaWUmJjk+Uy52ZXJzaW9uLEQ9L1wiL2csQT17Q29tYm9Cb3g6XCJEcm9wRG93bkxpc3RcIixEcm9wRG93bkxpc3Q6XCJDb21ib0JveFwifSxFPWkudWkuRGF0YUJvdW5kV2lkZ2V0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpLHI9dGhpcyxhPXIubnM7by5mbi5pbml0LmNhbGwocix0LG4pLHQ9ci5lbGVtZW50LHIuX2lzU2VsZWN0PXQuaXMoXyksci5fdGVtcGxhdGUoKSxyLnVsPWUoJzx1bCB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1saXN0IGstcmVzZXRcIi8+JykuY3NzKHtvdmVyZmxvdzpzLmtpbmV0aWNTY3JvbGxOZWVkZWQ/XCJcIjpcImF1dG9cIn0pLm9uKFwibW91c2VlbnRlclwiK2EsdSxmdW5jdGlvbigpe2UodGhpcykuYWRkQ2xhc3MoZil9KS5vbihcIm1vdXNlbGVhdmVcIithLHUsZnVuY3Rpb24oKXtlKHRoaXMpLnJlbW92ZUNsYXNzKGYpfSkub24oXCJjbGlja1wiK2EsdSxDKHIuX2NsaWNrLHIpKS5hdHRyKHt0YWJJbmRleDotMSxyb2xlOlwibGlzdGJveFwiLFwiYXJpYS1oaWRkZW5cIjohMH0pLHIubGlzdD1lKFwiPGRpdiBjbGFzcz0nay1saXN0LWNvbnRhaW5lcicvPlwiKS5hcHBlbmQoci51bCkub24oXCJtb3VzZWRvd25cIithLEMoci5fbGlzdE1vdXNlZG93bixyKSksaT10LmF0dHIoZCksaSYmKHIubGlzdC5hdHRyKGQsaStcIi1saXN0XCIpLHIudWwuYXR0cihkLGkrXCJfbGlzdGJveFwiKSxyLl9vcHRpb25JRD1pK1wiX29wdGlvbl9zZWxlY3RlZFwiKSxyLl9oZWFkZXIoKSxyLl9hY2Nlc3NvcnMoKSxyLl9pbml0VmFsdWUoKX0sb3B0aW9uczp7dmFsdWVQcmltaXRpdmU6ITEsaGVhZGVyVGVtcGxhdGU6XCJcIn0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXtvLmZuLnNldE9wdGlvbnMuY2FsbCh0aGlzLGUpLGUmJmUuZW5hYmxlIT09dCYmKGUuZW5hYmxlZD1lLmVuYWJsZSl9LGZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5fZm9jdXNlZC5mb2N1cygpfSxyZWFkb25seTpmdW5jdGlvbihlKXt0aGlzLl9lZGl0YWJsZSh7cmVhZG9ubHk6ZT09PXQ/ITA6ZSxkaXNhYmxlOiExfSl9LGVuYWJsZTpmdW5jdGlvbihlKXt0aGlzLl9lZGl0YWJsZSh7cmVhZG9ubHk6ITEsZGlzYWJsZTohKGU9ZT09PXQ/ITA6ZSl9KX0sX2xpc3RNb3VzZWRvd246ZnVuY3Rpb24oZSl7dGhpcy5maWx0ZXJJbnB1dCYmdGhpcy5maWx0ZXJJbnB1dFswXT09PWUudGFyZ2V0fHxlLnByZXZlbnREZWZhdWx0KCl9LF9maWx0ZXJTb3VyY2U6ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLHI9aS5vcHRpb25zLG89aS5kYXRhU291cmNlLGE9eCh7fSxvLmZpbHRlcigpfHx7fSkscz1uKGEsci5kYXRhVGV4dEZpZWxkKTsoZXx8cykmJmkudHJpZ2dlcihcImZpbHRlcmluZ1wiLHtmaWx0ZXI6ZX0pfHwoZSYmKGE9YS5maWx0ZXJzfHxbXSxhLnB1c2goZSkpLHQ/by5yZWFkKGEpOm8uZmlsdGVyKGEpKX0sX2hlYWRlcjpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4ub3B0aW9ucy5oZWFkZXJUZW1wbGF0ZTtlLmlzRnVuY3Rpb24oaSkmJihpPWkoe30pKSxpJiYobi5saXN0LnByZXBlbmQoaSksdD1uLnVsLnByZXYoKSxuLmhlYWRlcj10WzBdP3Q6bnVsbCxuLmhlYWRlciYmbi5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOm4uaGVhZGVyfX0pKX0sX2luaXRWYWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm9wdGlvbnMudmFsdWU7bnVsbCE9PXQ/ZS5lbGVtZW50LnZhbCh0KToodD1lLl9hY2Nlc3NvcigpLGUub3B0aW9ucy52YWx1ZT10KSxlLl9vbGQ9dH0sX2lnbm9yZUNhc2U6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10LmRhdGFTb3VyY2UucmVhZGVyLm1vZGVsO24mJm4uZmllbGRzJiYoZT1uLmZpZWxkc1t0Lm9wdGlvbnMuZGF0YVRleHRGaWVsZF0sZSYmZS50eXBlJiZcInN0cmluZ1wiIT09ZS50eXBlJiYodC5vcHRpb25zLmlnbm9yZUNhc2U9ITEpKX0saXRlbXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bFswXS5jaGlsZHJlbn0sY3VycmVudDpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5fZm9jdXNlZC5hZGQobi5maWx0ZXJJbnB1dCkscj1uLl9vcHRpb25JRDtyZXR1cm4gZT09PXQ/bi5fY3VycmVudDoobi5fY3VycmVudCYmKG4uX2N1cnJlbnQucmVtb3ZlQ2xhc3MocCkucmVtb3ZlQXR0cihcImFyaWEtc2VsZWN0ZWRcIikucmVtb3ZlQXR0cihkKSxpLnJlbW92ZUF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIikpLGUmJihlLmFkZENsYXNzKHApLG4uX3Njcm9sbChlKSxyJiYoZS5hdHRyKFwiaWRcIixyKSxpLmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixyKSkpLG4uX2N1cnJlbnQ9ZSx0KX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm5zO28uZm4uZGVzdHJveS5jYWxsKGUpLGUuX3VuYmluZERhdGFTb3VyY2UoKSxlLnVsLm9mZih0KSxlLmxpc3Qub2ZmKHQpLGUuX3RvdWNoU2Nyb2xsZXImJmUuX3RvdWNoU2Nyb2xsZXIuZGVzdHJveSgpLGUucG9wdXAuZGVzdHJveSgpLGUuX2Zvcm0mJmUuX2Zvcm0ub2ZmKFwicmVzZXRcIixlLl9yZXNldEhhbmRsZXIpfSxkYXRhSXRlbTpmdW5jdGlvbihuKXt2YXIgaT10aGlzO3JldHVybiBuPT09dD9uPWkuc2VsZWN0ZWRJbmRleDpcIm51bWJlclwiIT10eXBlb2YgbiYmKG49ZShpLml0ZW1zKCkpLmluZGV4KG4pKSxpLl9kYXRhKClbbl19LF9hY2Nlc3NvcnM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5lbGVtZW50LG49ZS5vcHRpb25zLHI9aS5nZXR0ZXIsbz10LmF0dHIoaS5hdHRyKFwidGV4dC1maWVsZFwiKSksYT10LmF0dHIoaS5hdHRyKFwidmFsdWUtZmllbGRcIikpOyFuLmRhdGFUZXh0RmllbGQmJm8mJihuLmRhdGFUZXh0RmllbGQ9byksIW4uZGF0YVZhbHVlRmllbGQmJmEmJihuLmRhdGFWYWx1ZUZpZWxkPWEpLGUuX3RleHQ9cihuLmRhdGFUZXh0RmllbGQpLGUuX3ZhbHVlPXIobi5kYXRhVmFsdWVGaWVsZCl9LF9hcmlhOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLm9wdGlvbnMscj1uLl9mb2N1c2VkLmFkZChuLmZpbHRlcklucHV0KTtpLnN1Z2dlc3QhPT10JiZyLmF0dHIoXCJhcmlhLWF1dG9jb21wbGV0ZVwiLGkuc3VnZ2VzdD9cImJvdGhcIjpcImxpc3RcIiksZT1lP2UrXCIgXCIrbi51bFswXS5pZDpuLnVsWzBdLmlkLHIuYXR0cihcImFyaWEtb3duc1wiLGUpLG4udWwuYXR0cihcImFyaWEtbGl2ZVwiLGkuZmlsdGVyJiZcIm5vbmVcIiE9PWkuZmlsdGVyP1wicG9saXRlXCI6XCJvZmZcIil9LF9ibHVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9jaGFuZ2UoKSxlLmNsb3NlKCl9LF9jaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZSxuPXRoaXMsaT1uLnNlbGVjdGVkSW5kZXgscj1uLm9wdGlvbnMudmFsdWUsbz1uLnZhbHVlKCk7bi5faXNTZWxlY3QmJiFuLl9ib3VuZCYmciYmKG89ciksbyE9PW4uX29sZD9lPSEwOmkhPT10JiZpIT09bi5fb2xkSW5kZXgmJihlPSEwKSxlJiYobi5fb2xkPW8sbi5fb2xkSW5kZXg9aSxuLmVsZW1lbnQudHJpZ2dlcihoKSxuLnRyaWdnZXIoaCkpfSxfY2xpY2s6ZnVuY3Rpb24odCl7dC5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8dGhpcy5fYWNjZXB0KGUodC5jdXJyZW50VGFyZ2V0KSl9LF9kYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YVNvdXJjZS52aWV3KCl9LF9lbmFibGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLG49ZS5vcHRpb25zLGk9ZS5lbGVtZW50LmlzKFwiW2Rpc2FibGVkXVwiKTtuLmVuYWJsZSE9PXQmJihuLmVuYWJsZWQ9bi5lbmFibGUpLCFuLmVuYWJsZWR8fGk/ZS5lbmFibGUoITEpOmUucmVhZG9ubHkoZS5lbGVtZW50LmlzKFwiW3JlYWRvbmx5XVwiKSl9LF9mb2N1czpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9ITA7cmV0dXJuIG4ucG9wdXAudmlzaWJsZSgpJiZlJiZuLnRyaWdnZXIoXyx7aXRlbTplfSk/KG4uY2xvc2UoKSx0KToobi5fc2VsZWN0KGUpLG4uX3RyaWdnZXJDYXNjYWRlKGkpLG4uX2JsdXIoKSx0KX0sX2luZGV4OmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLHI9aS5fZGF0YSgpO2Zvcih0PTAsbj1yLmxlbmd0aDtuPnQ7dCsrKWlmKGkuX2RhdGFWYWx1ZShyW3RdKT09ZSlyZXR1cm4gdDtyZXR1cm4tMX0sX2RhdGFWYWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLl92YWx1ZShlKTtyZXR1cm4gbj09PXQmJihuPXRoaXMuX3RleHQoZSkpLG59LF9oZWlnaHQ6ZnVuY3Rpb24oZSl7aWYoZSl7dmFyIHQsbixpPXRoaXMscj1pLmxpc3Qsbz1pLm9wdGlvbnMuaGVpZ2h0LGE9aS5wb3B1cC52aXNpYmxlKCk7bj1yLmFkZChyLnBhcmVudChcIi5rLWFuaW1hdGlvbi1jb250YWluZXJcIikpLnNob3coKSxvPWkudWxbMF0uc2Nyb2xsSGVpZ2h0Pm8/bzpcImF1dG9cIixuLmhlaWdodChvKSxcImF1dG9cIiE9PW8mJih0PWkudWxbMF0ub2Zmc2V0VG9wLHQmJihvPXIuaGVpZ2h0KCktdCkpLGkudWwuaGVpZ2h0KG8pLGF8fG4uaGlkZSgpfX0sX2FkanVzdExpc3RXaWR0aDpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLmxpc3QsaT1uWzBdLnN0eWxlLndpZHRoLHI9dGhpcy53cmFwcGVyO2lmKG4uZGF0YShrKXx8IWkpcmV0dXJuIGU9d2luZG93LmdldENvbXB1dGVkU3R5bGU/d2luZG93LmdldENvbXB1dGVkU3R5bGUoclswXSxudWxsKTowLHQ9ZT9wYXJzZUZsb2F0KGUud2lkdGgpOnIub3V0ZXJXaWR0aCgpLGUmJlMubXNpZSYmKHQrPXBhcnNlRmxvYXQoZS5wYWRkaW5nTGVmdCkrcGFyc2VGbG9hdChlLnBhZGRpbmdSaWdodCkrcGFyc2VGbG9hdChlLmJvcmRlckxlZnRXaWR0aCkrcGFyc2VGbG9hdChlLmJvcmRlclJpZ2h0V2lkdGgpKSxpPVwiYm9yZGVyLWJveFwiIT09bi5jc3MoXCJib3gtc2l6aW5nXCIpP3QtKG4ub3V0ZXJXaWR0aCgpLW4ud2lkdGgoKSk6dCxuLmNzcyh7Zm9udEZhbWlseTpyLmNzcyhcImZvbnQtZmFtaWx5XCIpLHdpZHRoOml9KS5kYXRhKGssaSksITB9LF9vcGVuSGFuZGxlcjpmdW5jdGlvbihlKXt0aGlzLl9hZGp1c3RMaXN0V2lkdGgoKSx0aGlzLnRyaWdnZXIobSk/ZS5wcmV2ZW50RGVmYXVsdCgpOih0aGlzLl9mb2N1c2VkLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApLHRoaXMudWwuYXR0cihcImFyaWEtaGlkZGVuXCIsITEpKX0sX2Nsb3NlSGFuZGxlcjpmdW5jdGlvbihlKXt0aGlzLnRyaWdnZXIodik/ZS5wcmV2ZW50RGVmYXVsdCgpOih0aGlzLl9mb2N1c2VkLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITEpLHRoaXMudWwuYXR0cihcImFyaWEtaGlkZGVuXCIsITApKX0sX2ZpcnN0T3BlbjpmdW5jdGlvbigpe3RoaXMuX2hlaWdodCh0aGlzLl9kYXRhKCkubGVuZ3RoKX0sX3BvcHVwOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLnBvcHVwPW5ldyByLlBvcHVwKGUubGlzdCx4KHt9LGUub3B0aW9ucy5wb3B1cCx7YW5jaG9yOmUud3JhcHBlcixvcGVuOkMoZS5fb3BlbkhhbmRsZXIsZSksY2xvc2U6QyhlLl9jbG9zZUhhbmRsZXIsZSksYW5pbWF0aW9uOmUub3B0aW9ucy5hbmltYXRpb24saXNSdGw6cy5pc1J0bChlLndyYXBwZXIpfSkpLGUucG9wdXAub25lKG0sQyhlLl9maXJzdE9wZW4sZSkpLGUuX3RvdWNoU2Nyb2xsZXI9aS50b3VjaFNjcm9sbGVyKGUucG9wdXAuZWxlbWVudCl9LF9tYWtlVW5zZWxlY3RhYmxlOmZ1bmN0aW9uKCl7VCYmdGhpcy5saXN0LmZpbmQoXCIqXCIpLm5vdChcIi5rLXRleHRib3hcIikuYXR0cihcInVuc2VsZWN0YWJsZVwiLFwib25cIil9LF90b2dnbGVIb3ZlcjpmdW5jdGlvbih0KXtlKHQuY3VycmVudFRhcmdldCkudG9nZ2xlQ2xhc3MoZixcIm1vdXNlZW50ZXJcIj09PXQudHlwZSl9LF90b2dnbGU6ZnVuY3Rpb24oZSxuKXt2YXIgaT10aGlzLHI9cy50b3VjaCYmcy5NU1BvaW50ZXJzJiZzLnBvaW50ZXJzO2U9ZSE9PXQ/ZTohaS5wb3B1cC52aXNpYmxlKCksbnx8cnx8aS5fZm9jdXNlZFswXT09PWMoKXx8aS5fZm9jdXNlZC5mb2N1cygpLGlbZT9tOnZdKCl9LF9zY3JvbGw6ZnVuY3Rpb24oZSl7aWYoZSl7ZVswXSYmKGU9ZVswXSk7dmFyIHQsbixpPXRoaXMudWxbMF0scj1lLm9mZnNldFRvcCxvPWUub2Zmc2V0SGVpZ2h0LGE9aS5zY3JvbGxUb3Ascz1pLmNsaWVudEhlaWdodCxsPXIrbyxjPXRoaXMuX3RvdWNoU2Nyb2xsZXI7Yz8odD1jLmRpbWVuc2lvbnMueSx0LmVuYWJsZWQmJnI+dC5zaXplJiYocj1yLXQuc2l6ZStvKzQsYy5zY3JvbGxUbygwLC1yKSkpOihuPXRoaXMuaGVhZGVyP3RoaXMuaGVhZGVyLm91dGVySGVpZ2h0KCk6MCxuKz10aGlzLmZpbHRlcklucHV0P3RoaXMuZmlsdGVySW5wdXQub3V0ZXJIZWlnaHQoKTowLGkuc2Nyb2xsVG9wPWE+cj9yLW46bD5hK3M/bC1zLW46YSl9fSxfdGVtcGxhdGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLG49dC50ZW1wbGF0ZSxyPXQuZGF0YVNvdXJjZTtlLl9pc1NlbGVjdCYmZS5lbGVtZW50WzBdLmxlbmd0aCYmKHJ8fCh0LmRhdGFUZXh0RmllbGQ9dC5kYXRhVGV4dEZpZWxkfHxcInRleHRcIix0LmRhdGFWYWx1ZUZpZWxkPXQuZGF0YVZhbHVlRmllbGR8fFwidmFsdWVcIikpLG4/KG49aS50ZW1wbGF0ZShuKSxlLnRlbXBsYXRlPWZ1bmN0aW9uKGUpe3JldHVybic8bGkgdGFiaW5kZXg9XCItMVwiIHJvbGU9XCJvcHRpb25cIiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1pdGVtXCI+JytuKGUpK1wiPC9saT5cIn0pOmUudGVtcGxhdGU9aS50ZW1wbGF0ZSgnPGxpIHRhYmluZGV4PVwiLTFcIiByb2xlPVwib3B0aW9uXCIgdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstaXRlbVwiPiR7JytpLmV4cHIodC5kYXRhVGV4dEZpZWxkLFwiZGF0YVwiKStcIn08L2xpPlwiLHt1c2VXaXRoQmxvY2s6ITF9KX0sX3RyaWdnZXJDYXNjYWRlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LnZhbHVlKCk7KCF0Ll9ib3VuZCYmbnx8dC5fb2xkIT09bikmJnQudHJpZ2dlcihcImNhc2NhZGVcIix7dXNlclRyaWdnZXJlZDplfSl9LF91bmJpbmREYXRhU291cmNlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLmRhdGFTb3VyY2UudW5iaW5kKGgsZS5fcmVmcmVzaEhhbmRsZXIpLnVuYmluZCh3LGUuX3Byb2dyZXNzSGFuZGxlcikudW5iaW5kKGIsZS5fcmVxdWVzdEVuZEhhbmRsZXIpLnVuYmluZChcImVycm9yXCIsZS5fZXJyb3JIYW5kbGVyKX19KTt4KEUse2luQXJyYXk6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dC5jaGlsZHJlbjtpZighZXx8ZS5wYXJlbnROb2RlIT09dClyZXR1cm4tMTtmb3Iobj0wLGk9ci5sZW5ndGg7aT5uO24rKylpZihlPT09cltuXSlyZXR1cm4gbjtyZXR1cm4tMX19KSxpLnVpLkxpc3Q9RSxyLlNlbGVjdD1FLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe0UuZm4uaW5pdC5jYWxsKHRoaXMsZSx0KSx0aGlzLl9pbml0aWFsPXRoaXMuZWxlbWVudC52YWwoKX0sc2V0RGF0YVNvdXJjZTpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZT1lLHRoaXMuX2RhdGFTb3VyY2UoKSx0aGlzLl9ib3VuZD0hMSx0aGlzLm9wdGlvbnMuYXV0b0JpbmQmJnRoaXMuZGF0YVNvdXJjZS5mZXRjaCgpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMucG9wdXAuY2xvc2UoKX0sc2VsZWN0OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGU9PT10P24uc2VsZWN0ZWRJbmRleDoobi5fc2VsZWN0KGUpLG4uX3RyaWdnZXJDYXNjYWRlKCksbi5fb2xkPW4uX2FjY2Vzc29yKCksbi5fb2xkSW5kZXg9bi5zZWxlY3RlZEluZGV4LHQpfSxzZWFyY2g6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhO2U9XCJzdHJpbmdcIj09dHlwZW9mIGU/ZTp0aGlzLnRleHQoKSx0PXRoaXMsbj1lLmxlbmd0aCxpPXQub3B0aW9ucyxyPWkuaWdub3JlQ2FzZSxvPWkuZmlsdGVyLGE9aS5kYXRhVGV4dEZpZWxkLGNsZWFyVGltZW91dCh0Ll90eXBpbmcpLCghbnx8bj49aS5taW5MZW5ndGgpJiYodC5fc3RhdGU9XCJmaWx0ZXJcIixcIm5vbmVcIj09PW8/dC5fZmlsdGVyKGUpOih0Ll9vcGVuPSEwLHQuX2ZpbHRlclNvdXJjZSh7dmFsdWU6cj9lLnRvTG93ZXJDYXNlKCk6ZSxmaWVsZDphLG9wZXJhdG9yOm8saWdub3JlQ2FzZTpyfSkpKX0sX2FjY2Vzc29yOmZ1bmN0aW9uKGUsbil7dmFyIGkscj10aGlzLmVsZW1lbnRbMF0sbz10aGlzLl9pc1NlbGVjdCxhPXIuc2VsZWN0ZWRJbmRleDtyZXR1cm4gZT09PXQ/KG8/YT4tMSYmKGk9ci5vcHRpb25zW2FdLGkmJihlPWkudmFsdWUpKTplPXIudmFsdWUsZSk6KG8/KGE+LTEmJnIub3B0aW9uc1thXS5yZW1vdmVBdHRyaWJ1dGUoeSksci5zZWxlY3RlZEluZGV4PW4saT1yLm9wdGlvbnNbbl0saSYmaS5zZXRBdHRyaWJ1dGUoeSx5KSk6ci52YWx1ZT1lLHQpfSxfaGlkZUJ1c3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2NsZWFyVGltZW91dChlLl9idXN5KSxlLl9hcnJvdy5yZW1vdmVDbGFzcyhnKSxlLl9mb2N1c2VkLmF0dHIoXCJhcmlhLWJ1c3lcIiwhMSksZS5fYnVzeT1udWxsfSxfc2hvd0J1c3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3JlcXVlc3Q9ITAsZS5fYnVzeXx8KGUuX2J1c3k9c2V0VGltZW91dChmdW5jdGlvbigpe2UuX2Fycm93JiYoZS5fZm9jdXNlZC5hdHRyKFwiYXJpYS1idXN5XCIsITApLGUuX2Fycm93LmFkZENsYXNzKGcpKX0sMTAwKSl9LF9yZXF1ZXN0RW5kOmZ1bmN0aW9uKCl7dGhpcy5fcmVxdWVzdD0hMX0sX2RhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMscj1uLmVsZW1lbnQsbz1uLm9wdGlvbnMsYT1vLmRhdGFTb3VyY2V8fHt9O2E9ZS5pc0FycmF5KGEpP3tkYXRhOmF9OmEsbi5faXNTZWxlY3QmJih0PXJbMF0uc2VsZWN0ZWRJbmRleCx0Pi0xJiYoby5pbmRleD10KSxhLnNlbGVjdD1yLGEuZmllbGRzPVt7ZmllbGQ6by5kYXRhVGV4dEZpZWxkfSx7ZmllbGQ6by5kYXRhVmFsdWVGaWVsZH1dKSxuLmRhdGFTb3VyY2UmJm4uX3JlZnJlc2hIYW5kbGVyP24uX3VuYmluZERhdGFTb3VyY2UoKToobi5fcmVmcmVzaEhhbmRsZXI9QyhuLnJlZnJlc2gsbiksbi5fcHJvZ3Jlc3NIYW5kbGVyPUMobi5fc2hvd0J1c3ksbiksbi5fcmVxdWVzdEVuZEhhbmRsZXI9QyhuLl9yZXF1ZXN0RW5kLG4pLG4uX2Vycm9ySGFuZGxlcj1DKG4uX2hpZGVCdXN5LG4pKSxuLmRhdGFTb3VyY2U9aS5kYXRhLkRhdGFTb3VyY2UuY3JlYXRlKGEpLmJpbmQoaCxuLl9yZWZyZXNoSGFuZGxlcikuYmluZCh3LG4uX3Byb2dyZXNzSGFuZGxlcikuYmluZChiLG4uX3JlcXVlc3RFbmRIYW5kbGVyKS5iaW5kKFwiZXJyb3JcIixuLl9lcnJvckhhbmRsZXIpfSxfZ2V0OmZ1bmN0aW9uKHQpe3ZhciBuLGkscj10aGlzLG89ci5fZGF0YSgpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQpZm9yKG49MCxpPW8ubGVuZ3RoO2k+bjtuKyspaWYodChvW25dKSl7dD1uO2JyZWFrfWlmKFwibnVtYmVyXCI9PXR5cGVvZiB0KXtpZigwPnQpcmV0dXJuIGUoKTt0PWUoci51bFswXS5jaGlsZHJlblt0XSl9cmV0dXJuIHQmJnQubm9kZVR5cGUmJih0PWUodCkpLHR9LF9tb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLHI9ZS5rZXlDb2RlLG89aS51bFswXSxzPWkucG9wdXAudmlzaWJsZSgpP1wiX3NlbGVjdFwiOlwiX2FjY2VwdFwiLGw9aS5fY3VycmVudCxjPXI9PT1hLkRPV047aWYocj09PWEuVVB8fGMpe2lmKGUuYWx0S2V5KWkudG9nZ2xlKGMpO2Vsc2V7aWYodD1vLmZpcnN0Q2hpbGQsIXQmJiFpLl9hY2Nlc3NvcigpJiZcImZpbHRlclwiIT09aS5fc3RhdGUpcmV0dXJuIGkuX2ZldGNofHwoaS5kYXRhU291cmNlLm9uZShoLGZ1bmN0aW9uKCl7aS5fbW92ZShlKSxpLl9mZXRjaD0hMX0pLGkuX2ZldGNoPSEwLGkuX2ZpbHRlclNvdXJjZSgpKSxlLnByZXZlbnREZWZhdWx0KCksITA7Yz8oIWx8fC0xPT09aS5zZWxlY3RlZEluZGV4JiYhaS52YWx1ZSgpJiZsWzBdPT09dD9sPXQ6KGw9bFswXS5uZXh0U2libGluZyxsfHx0IT09by5sYXN0Q2hpbGR8fChsPXQpKSxpW3NdKGwpKToobD1sP2xbMF0ucHJldmlvdXNTaWJsaW5nOm8ubGFzdENoaWxkLGx8fHQhPT1vLmxhc3RDaGlsZHx8KGw9dCksaVtzXShsKSl9ZS5wcmV2ZW50RGVmYXVsdCgpLG49ITB9ZWxzZSByPT09YS5FTlRFUnx8cj09PWEuVEFCPyhpLnBvcHVwLnZpc2libGUoKSYmZS5wcmV2ZW50RGVmYXVsdCgpLGkucG9wdXAudmlzaWJsZSgpfHxsJiZsLmhhc0NsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiKXx8KGw9bnVsbCksaS5fYWNjZXB0KGwsciksbj0hMCk6cj09PWEuRVNDJiYoaS5wb3B1cC52aXNpYmxlKCkmJmUucHJldmVudERlZmF1bHQoKSxpLmNsb3NlKCksbj0hMCk7cmV0dXJuIG59LF9zZWxlY3RJdGVtOmZ1bmN0aW9uKCl7dmFyIGUsbixpPXRoaXMscj1pLl9ib3VuZD09PXQsbz1pLm9wdGlvbnM7ZT1pLl9pc1NlbGVjdCYmIWkuX2luaXRpYWwmJiFvLnZhbHVlJiZvLmluZGV4JiYhaS5fYm91bmQsZXx8KG49aS5fc2VsZWN0ZWRWYWx1ZXx8ciYmby52YWx1ZXx8aS5fYWNjZXNzb3IoKSksbj9pLnZhbHVlKG4pOnImJmkuc2VsZWN0KG8uaW5kZXgpfSxfZmV0Y2hJdGVtczpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi51bFswXS5maXJzdENoaWxkO3JldHVybiBuLl9yZXF1ZXN0PyEwOm4uX2JvdW5kfHxuLl9mZXRjaHx8aT90Om4ub3B0aW9ucy5jYXNjYWRlRnJvbT8haToobi5kYXRhU291cmNlLm9uZShoLGZ1bmN0aW9uKCl7bi5fb2xkPXQsbi52YWx1ZShlKSxuLl9mZXRjaD0hMX0pLG4uX2ZldGNoPSEwLG4uZGF0YVNvdXJjZS5mZXRjaCgpLCEwKX0sX29wdGlvbnM6ZnVuY3Rpb24oZSxuKXt2YXIgaSxyLG8sYSxzPXRoaXMsYz1zLmVsZW1lbnQsZD1lLmxlbmd0aCx1PVwiXCIsaD0wO2ZvcihuJiYoaD0xLHU9bik7ZD5oO2grKylpPVwiPG9wdGlvblwiLHI9ZVtoXSxvPXMuX3RleHQociksYT1zLl92YWx1ZShyKSxhIT09dCYmKGErPVwiXCIsLTEhPT1hLmluZGV4T2YoJ1wiJykmJihhPWEucmVwbGFjZShELFwiJnF1b3Q7XCIpKSxpKz0nIHZhbHVlPVwiJythKydcIicpLGkrPVwiPlwiLG8hPT10JiYoaSs9bChvKSksaSs9XCI8L29wdGlvbj5cIix1Kz1pO2MuaHRtbCh1KX0sX3Jlc2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudCxpPW4uYXR0cihcImZvcm1cIikscj1pP2UoXCIjXCIraSk6bi5jbG9zZXN0KFwiZm9ybVwiKTtyWzBdJiYodC5fcmVzZXRIYW5kbGVyPWZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe3QudmFsdWUodC5faW5pdGlhbCl9KX0sdC5fZm9ybT1yLm9uKFwicmVzZXRcIix0Ll9yZXNldEhhbmRsZXIpKX0sX2Nhc2NhZGU6ZnVuY3Rpb24oKXt2YXIgdCxpLHIsbyxhLHM9dGhpcyxsPXMub3B0aW9ucyxjPWwuY2FzY2FkZUZyb207aWYoYyl7aWYocy5fc2VsZWN0ZWRWYWx1ZT1sLnZhbHVlfHxzLl9hY2Nlc3NvcigpLGk9ZShcIiNcIitjKSx0PWkuZGF0YShcImtlbmRvXCIrbC5uYW1lKSx0fHwodD1pLmRhdGEoXCJrZW5kb1wiK0FbbC5uYW1lXSkpLCF0KXJldHVybjtsLmF1dG9CaW5kPSExLG89bC5jYXNjYWRlRnJvbUZpZWxkfHx0Lm9wdGlvbnMuZGF0YVZhbHVlRmllbGQsYT1mdW5jdGlvbigpe3MuZGF0YVNvdXJjZS51bmJpbmQoaCxhKTt2YXIgZT1zLl9zZWxlY3RlZFZhbHVlfHxzLnZhbHVlKCk7cy5fdXNlclRyaWdnZXJlZD9zLl9jbGVhclNlbGVjdGlvbih0LCEwKTplPyhzLnZhbHVlKGUpLHMuZGF0YVNvdXJjZS52aWV3KClbMF0mJi0xIT09cy5zZWxlY3RlZEluZGV4fHxzLl9jbGVhclNlbGVjdGlvbih0LCEwKSk6cy5zZWxlY3QobC5pbmRleCkscy5lbmFibGUoKSxzLl90cmlnZ2VyQ2FzY2FkZShzLl91c2VyVHJpZ2dlcmVkKSxzLl91c2VyVHJpZ2dlcmVkPSExfSxyPWZ1bmN0aW9uKCl7dmFyIGUsaSxyLGw9dC5kYXRhSXRlbSgpLGM9bD90Ll92YWx1ZShsKTpudWxsO2N8fDA9PT1jPyhlPXMuZGF0YVNvdXJjZS5maWx0ZXIoKXx8e30sbihlLG8pLGk9ZS5maWx0ZXJzfHxbXSxpLnB1c2goe2ZpZWxkOm8sb3BlcmF0b3I6XCJlcVwiLHZhbHVlOmN9KSxyPWZ1bmN0aW9uKCl7cy51bmJpbmQoXCJkYXRhQm91bmRcIixyKSxhLmFwcGx5KHMsYXJndW1lbnRzKX0scy5maXJzdChcImRhdGFCb3VuZFwiLHIpLHMuZGF0YVNvdXJjZS5maWx0ZXIoaSkpOihzLmVuYWJsZSghMSkscy5fY2xlYXJTZWxlY3Rpb24odCkscy5fdHJpZ2dlckNhc2NhZGUocy5fdXNlclRyaWdnZXJlZCkscy5fdXNlclRyaWdnZXJlZD0hMSl9LHQuZmlyc3QoXCJjYXNjYWRlXCIsZnVuY3Rpb24oZSl7cy5fdXNlclRyaWdnZXJlZD1lLnVzZXJUcmlnZ2VyZWQscigpfSksdC5fYm91bmQ/cigpOnQudmFsdWUoKXx8cy5lbmFibGUoITEpfX19KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsdCxuLGkpe3ZhciByLG89ZS5nZXRGdWxsWWVhcigpLGE9dC5nZXRGdWxsWWVhcigpLHM9bi5nZXRGdWxsWWVhcigpO3JldHVybiBvLT1vJWkscj1vKyhpLTEpLGE+byYmKG89YSkscj5zJiYocj1zKSxvK1wiLVwiK3J9ZnVuY3Rpb24gaShlKXtmb3IodmFyIHQsbj0wLGk9ZS5taW4scj1lLm1heCxvPWUuc3RhcnQsYT1lLnNldHRlcixsPWUuYnVpbGQsYz1lLmNlbGxzfHwxMixkPWUucGVyUm93fHw0LHU9ZS5jb250ZW50fHxQLGg9ZS5lbXB0eXx8SSxwPWUuaHRtbHx8Jzx0YWJsZSB0YWJpbmRleD1cIjBcIiByb2xlPVwiZ3JpZFwiIGNsYXNzPVwiay1jb250ZW50IGstbWV0YS12aWV3XCIgY2VsbHNwYWNpbmc9XCIwXCI+PHRib2R5Pjx0ciByb2xlPVwicm93XCI+JztjPm47bisrKW4+MCYmbiVkPT09MCYmKHArPSc8L3RyPjx0ciByb2xlPVwicm93XCI+JyksdD1sKG8sbikscCs9cyhvLGkscik/dSh0KTpoKHQpLGEobywxKTtyZXR1cm4gcCtcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwifWZ1bmN0aW9uIHIoZSx0LG4pe3ZhciBpPWUuZ2V0RnVsbFllYXIoKSxyPXQuZ2V0RnVsbFllYXIoKSxvPXIsYT0wO3JldHVybiBuJiYoci09ciVuLG89ci1yJW4rbi0xKSxpPm8/YT0xOnI+aSYmKGE9LTEpLGF9ZnVuY3Rpb24gbygpe3ZhciBlPW5ldyBmdDtyZXR1cm4gbmV3IGZ0KGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCksZS5nZXREYXRlKCkpfWZ1bmN0aW9uIGEoZSx0LG4pe3ZhciBpPW8oKTtyZXR1cm4gZSYmKGk9bmV3IGZ0KCtlKSksdD5pP2k9bmV3IGZ0KCt0KTppPm4mJihpPW5ldyBmdCgrbikpLGl9ZnVuY3Rpb24gcyhlLHQsbil7cmV0dXJuK2U+PSt0JiYrbj49K2V9ZnVuY3Rpb24gbChlLHQpe3JldHVybiBlLnNsaWNlKHQpLmNvbmNhdChlLnNsaWNlKDAsdCkpfWZ1bmN0aW9uIGMoZSx0LG4pe3Q9dCBpbnN0YW5jZW9mIGZ0P3QuZ2V0RnVsbFllYXIoKTplLmdldEZ1bGxZZWFyKCkrbip0LGUuc2V0RnVsbFllYXIodCl9ZnVuY3Rpb24gZCh0KXtlKHRoaXMpLnRvZ2dsZUNsYXNzKCQsaXQuaW5kZXhPZih0LnR5cGUpPi0xfHx0LnR5cGU9PXR0KX1mdW5jdGlvbiB1KGUpe2UucHJldmVudERlZmF1bHQoKX1mdW5jdGlvbiBoKGUpe3JldHVybiBBKGUpLmNhbGVuZGFycy5zdGFuZGFyZH1mdW5jdGlvbiBwKGUpe3ZhciBuPWd0W2Uuc3RhcnRdLGk9Z3RbZS5kZXB0aF0scj1BKGUuY3VsdHVyZSk7ZS5mb3JtYXQ9VChlLmZvcm1hdHx8ci5jYWxlbmRhcnMuc3RhbmRhcmQucGF0dGVybnMuZCksaXNOYU4obikmJihuPTAsZS5zdGFydD1VKSwoaT09PXR8fGk+bikmJihlLmRlcHRoPVUpLGUuZGF0ZXN8fChlLmRhdGVzPVtdKX1mdW5jdGlvbiBmKGUpe0YmJmUuZmluZChcIipcIikuYXR0cihcInVuc2VsZWN0YWJsZVwiLFwib25cIil9ZnVuY3Rpb24gZyhlLHQpe2Zvcih2YXIgbj0wLGk9dC5sZW5ndGg7aT5uO24rKylpZihlPT09K3Rbbl0pcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gbShlLHQpe3JldHVybiBlP2UuZ2V0RnVsbFllYXIoKT09PXQuZ2V0RnVsbFllYXIoKSYmZS5nZXRNb250aCgpPT09dC5nZXRNb250aCgpJiZlLmdldERhdGUoKT09PXQuZ2V0RGF0ZSgpOiExfWZ1bmN0aW9uIHYoZSx0KXtyZXR1cm4gZT9lLmdldEZ1bGxZZWFyKCk9PT10LmdldEZ1bGxZZWFyKCkmJmUuZ2V0TW9udGgoKT09PXQuZ2V0TW9udGgoKTohMX12YXIgXyx5PXdpbmRvdy5rZW5kbyx3PXkuc3VwcG9ydCxiPXkudWksaz1iLldpZGdldCx4PXkua2V5cyxDPXkucGFyc2VEYXRlLFM9eS5kYXRlLmFkanVzdERTVCxUPXkuX2V4dHJhY3RGb3JtYXQsRD15LnRlbXBsYXRlLEE9eS5nZXRDdWx0dXJlLEU9eS5zdXBwb3J0LnRyYW5zaXRpb25zLE09RT9FLmNzcytcInRyYW5zZm9ybS1vcmlnaW5cIjpcIlwiLFA9RCgnPHRkIz1kYXRhLmNzc0NsYXNzIyByb2xlPVwiZ3JpZGNlbGxcIj48YSB0YWJpbmRleD1cIi0xXCIgY2xhc3M9XCJrLWxpbmtcIiBocmVmPVwiXFxcXCNcIiBkYXRhLSM9ZGF0YS5ucyN2YWx1ZT1cIiM9ZGF0YS5kYXRlU3RyaW5nI1wiPiM9ZGF0YS52YWx1ZSM8L2E+PC90ZD4nLHt1c2VXaXRoQmxvY2s6ITF9KSxJPUQoJzx0ZCByb2xlPVwiZ3JpZGNlbGxcIj4mbmJzcDs8L3RkPicse3VzZVdpdGhCbG9jazohMX0pLHo9eS5zdXBwb3J0LmJyb3dzZXIsRj16Lm1zaWUmJjk+ei52ZXJzaW9uLFI9XCIua2VuZG9DYWxlbmRhclwiLEI9XCJjbGlja1wiK1IsTD1cImtleWRvd25cIitSLE89XCJpZFwiLEg9XCJtaW5cIixOPVwibGVmdFwiLFY9XCJzbGlkZUluXCIsVT1cIm1vbnRoXCIsVz1cImNlbnR1cnlcIixqPVwiY2hhbmdlXCIsRz1cIm5hdmlnYXRlXCIscT1cInZhbHVlXCIsJD1cImstc3RhdGUtaG92ZXJcIixZPVwiay1zdGF0ZS1kaXNhYmxlZFwiLEs9XCJrLXN0YXRlLWZvY3VzZWRcIixRPVwiay1vdGhlci1tb250aFwiLFg9JyBjbGFzcz1cIicrUSsnXCInLEo9XCJrLW5hdi10b2RheVwiLFo9XCJ0ZDpoYXMoLmstbGluaylcIixldD1cImJsdXJcIitSLHR0PVwiZm9jdXNcIixudD10dCtSLGl0PXcudG91Y2g/XCJ0b3VjaHN0YXJ0XCI6XCJtb3VzZWVudGVyXCIscnQ9dy50b3VjaD9cInRvdWNoc3RhcnRcIitSOlwibW91c2VlbnRlclwiK1Isb3Q9dy50b3VjaD9cInRvdWNoZW5kXCIrUitcIiB0b3VjaG1vdmVcIitSOlwibW91c2VsZWF2ZVwiK1IsYXQ9NmU0LHN0PTg2NGU1LGx0PVwiX3ByZXZBcnJvd1wiLGN0PVwiX25leHRBcnJvd1wiLGR0PVwiYXJpYS1kaXNhYmxlZFwiLHV0PVwiYXJpYS1zZWxlY3RlZFwiLGh0PWUucHJveHkscHQ9ZS5leHRlbmQsZnQ9RGF0ZSxndD17bW9udGg6MCx5ZWFyOjEsZGVjYWRlOjIsY2VudHVyeTozfSxtdD1rLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpLHIsbz10aGlzO2suZm4uaW5pdC5jYWxsKG8sdCxuKSx0PW8ud3JhcHBlcj1vLmVsZW1lbnQsbj1vLm9wdGlvbnMsbi51cmw9d2luZG93LnVuZXNjYXBlKG4udXJsKSxvLl90ZW1wbGF0ZXMoKSxvLl9oZWFkZXIoKSxvLl9mb290ZXIoby5mb290ZXIpLHI9dC5hZGRDbGFzcyhcImstd2lkZ2V0IGstY2FsZW5kYXJcIikub24ocnQrXCIgXCIrb3QsWixkKS5vbihMLFwidGFibGUuay1jb250ZW50XCIsaHQoby5fbW92ZSxvKSkub24oQixaLGZ1bmN0aW9uKHQpe3ZhciBuPXQuY3VycmVudFRhcmdldC5maXJzdENoaWxkOy0xIT1uLmhyZWYuaW5kZXhPZihcIiNcIikmJnQucHJldmVudERlZmF1bHQoKSxvLl9jbGljayhlKG4pKX0pLm9uKFwibW91c2V1cFwiK1IsXCJ0YWJsZS5rLWNvbnRlbnQsIC5rLWZvb3RlclwiLGZ1bmN0aW9uKCl7by5fZm9jdXNWaWV3KG8ub3B0aW9ucy5mb2N1c09uTmF2IT09ITEpfSkuYXR0cihPKSxyJiYoby5fY2VsbElEPXIrXCJfY2VsbF9zZWxlY3RlZFwiKSxwKG4pLGk9QyhuLnZhbHVlLG4uZm9ybWF0LG4uY3VsdHVyZSksby5faW5kZXg9Z3Rbbi5zdGFydF0sby5fY3VycmVudD1uZXcgZnQoK2EoaSxuLm1pbixuLm1heCkpLG8uX2FkZENsYXNzUHJveHk9ZnVuY3Rpb24oKXtvLl9hY3RpdmU9ITAsby5fY2VsbC5hZGRDbGFzcyhLKX0sby5fcmVtb3ZlQ2xhc3NQcm94eT1mdW5jdGlvbigpe28uX2FjdGl2ZT0hMSxvLl9jZWxsLnJlbW92ZUNsYXNzKEspfSxvLnZhbHVlKGkpLHkubm90aWZ5KG8pfSxvcHRpb25zOntuYW1lOlwiQ2FsZW5kYXJcIix2YWx1ZTpudWxsLG1pbjpuZXcgZnQoMTkwMCwwLDEpLG1heDpuZXcgZnQoMjA5OSwxMSwzMSksZGF0ZXM6W10sdXJsOlwiXCIsY3VsdHVyZTpcIlwiLGZvb3RlcjpcIlwiLGZvcm1hdDpcIlwiLG1vbnRoOnt9LHN0YXJ0OlUsZGVwdGg6VSxhbmltYXRpb246e2hvcml6b250YWw6e2VmZmVjdHM6VixyZXZlcnNlOiEwLGR1cmF0aW9uOjUwMCxkaXZpc29yOjJ9LHZlcnRpY2FsOntlZmZlY3RzOlwiem9vbUluXCIsZHVyYXRpb246NDAwfX19LGV2ZW50czpbaixHXSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cChlKSxlLmRhdGVzWzBdfHwoZS5kYXRlcz10Lm9wdGlvbnMuZGF0ZXMpLGsuZm4uc2V0T3B0aW9ucy5jYWxsKHQsZSksdC5fdGVtcGxhdGVzKCksdC5fZm9vdGVyKHQuZm9vdGVyKSx0Ll9pbmRleD1ndFt0Lm9wdGlvbnMuc3RhcnRdLHQubmF2aWdhdGUoKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl90b2RheTtlLmVsZW1lbnQub2ZmKFIpLGUuX3RpdGxlLm9mZihSKSxlW2x0XS5vZmYoUiksZVtjdF0ub2ZmKFIpLHkuZGVzdHJveShlLl90YWJsZSksdCYmeS5kZXN0cm95KHQub2ZmKFIpKSxrLmZuLmRlc3Ryb3kuY2FsbChlKX0sY3VycmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50fSx2aWV3OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZpZXd9LGZvY3VzOmZ1bmN0aW9uKGUpe2U9ZXx8dGhpcy5fdGFibGUsdGhpcy5fYmluZFRhYmxlKGUpLGUuZm9jdXMoKX0sbWluOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vcHRpb24oSCxlKX0sbWF4OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vcHRpb24oXCJtYXhcIixlKX0sbmF2aWdhdGVUb1Bhc3Q6ZnVuY3Rpb24oKXt0aGlzLl9uYXZpZ2F0ZShsdCwtMSl9LG5hdmlnYXRlVG9GdXR1cmU6ZnVuY3Rpb24oKXt0aGlzLl9uYXZpZ2F0ZShjdCwxKX0sbmF2aWdhdGVVcDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl9pbmRleDtlLl90aXRsZS5oYXNDbGFzcyhZKXx8ZS5uYXZpZ2F0ZShlLl9jdXJyZW50LCsrdCl9LG5hdmlnYXRlRG93bjpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5faW5kZXgscj1uLm9wdGlvbnMuZGVwdGg7aWYoZSlyZXR1cm4gaT09PWd0W3JdPygrbi5fdmFsdWUhPStlJiYobi52YWx1ZShlKSxuLnRyaWdnZXIoaikpLHQpOihuLm5hdmlnYXRlKGUsLS1pKSx0KX0sbmF2aWdhdGU6ZnVuY3Rpb24obixpKXtpPWlzTmFOKGkpP2d0W2ldOmk7dmFyIHIsbyxzLGwsYz10aGlzLGQ9Yy5vcHRpb25zLHU9ZC5jdWx0dXJlLGg9ZC5taW4scD1kLm1heCxnPWMuX3RpdGxlLG09Yy5fdGFibGUsdj1jLl9vbGRUYWJsZSx5PWMuX3ZhbHVlLHc9Yy5fY3VycmVudCxiPW4mJituPit3LGs9aSE9PXQmJmkhPT1jLl9pbmRleDtufHwobj13KSxjLl9jdXJyZW50PW49bmV3IGZ0KCthKG4saCxwKSksaT09PXQ/aT1jLl9pbmRleDpjLl9pbmRleD1pLGMuX3ZpZXc9bz1fLnZpZXdzW2ldLHM9by5jb21wYXJlLGw9aT09PWd0W1ddLGcudG9nZ2xlQ2xhc3MoWSxsKS5hdHRyKGR0LGwpLGw9cyhuLGgpPDEsY1tsdF0udG9nZ2xlQ2xhc3MoWSxsKS5hdHRyKGR0LGwpLGw9cyhuLHApPi0xLGNbY3RdLnRvZ2dsZUNsYXNzKFksbCkuYXR0cihkdCxsKSxtJiZ2JiZ2LmRhdGEoXCJhbmltYXRpbmdcIikmJih2LmtlbmRvU3RvcCghMCwhMCksbS5rZW5kb1N0b3AoITAsITApKSxjLl9vbGRUYWJsZT1tLCghbXx8Yy5fY2hhbmdlVmlldykmJihnLmh0bWwoby50aXRsZShuLGgscCx1KSksYy5fdGFibGU9cj1lKG8uY29udGVudChwdCh7bWluOmgsbWF4OnAsZGF0ZTpuLHVybDpkLnVybCxkYXRlczpkLmRhdGVzLGZvcm1hdDpkLmZvcm1hdCxjdWx0dXJlOnV9LGNbby5uYW1lXSkpKSxmKHIpLGMuX2FuaW1hdGUoe2Zyb206bSx0bzpyLHZlcnRpY2FsOmssZnV0dXJlOmJ9KSxjLl9mb2N1cyhuKSxjLnRyaWdnZXIoRykpLGk9PT1ndFtkLmRlcHRoXSYmeSYmYy5fY2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIsby50b0RhdGVTdHJpbmcoeSkpLGMuX2NsYXNzKEssby50b0RhdGVTdHJpbmcobikpLCFtJiZjLl9jZWxsJiZjLl9jZWxsLnJlbW92ZUNsYXNzKEspLGMuX2NoYW5nZVZpZXc9ITB9LHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLl92aWV3LHI9bi5vcHRpb25zLG89bi5fdmlldyxhPXIubWluLGw9ci5tYXg7cmV0dXJuIGU9PT10P24uX3ZhbHVlOihlPUMoZSxyLmZvcm1hdCxyLmN1bHR1cmUpLG51bGwhPT1lJiYoZT1uZXcgZnQoK2UpLHMoZSxhLGwpfHwoZT1udWxsKSksbi5fdmFsdWU9ZSxvJiZudWxsPT09ZSYmbi5fY2VsbD9uLl9jZWxsLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiKToobi5fY2hhbmdlVmlldz0hZXx8aSYmMCE9PWkuY29tcGFyZShlLG4uX2N1cnJlbnQpLG4ubmF2aWdhdGUoZSkpLHQpfSxfbW92ZTpmdW5jdGlvbih0KXt2YXIgbixpLHIsbyxzPXRoaXMsbD1zLm9wdGlvbnMsYz10LmtleUNvZGUsZD1zLl92aWV3LHU9cy5faW5kZXgsaD1uZXcgZnQoK3MuX2N1cnJlbnQpLHA9eS5zdXBwb3J0LmlzUnRsKHMud3JhcHBlcik7cmV0dXJuIHQudGFyZ2V0PT09cy5fdGFibGVbMF0mJihzLl9hY3RpdmU9ITApLHQuY3RybEtleT9jPT14LlJJR0hUJiYhcHx8Yz09eC5MRUZUJiZwPyhzLm5hdmlnYXRlVG9GdXR1cmUoKSxpPSEwKTpjPT14LkxFRlQmJiFwfHxjPT14LlJJR0hUJiZwPyhzLm5hdmlnYXRlVG9QYXN0KCksaT0hMCk6Yz09eC5VUD8ocy5uYXZpZ2F0ZVVwKCksaT0hMCk6Yz09eC5ET1dOJiYocy5fY2xpY2soZShzLl9jZWxsWzBdLmZpcnN0Q2hpbGQpKSxpPSEwKTooYz09eC5SSUdIVCYmIXB8fGM9PXguTEVGVCYmcD8obj0xLGk9ITApOmM9PXguTEVGVCYmIXB8fGM9PXguUklHSFQmJnA/KG49LTEsaT0hMCk6Yz09eC5VUD8obj0wPT09dT8tNzotNCxpPSEwKTpjPT14LkRPV04/KG49MD09PXU/Nzo0LGk9ITApOmM9PXguRU5URVI/KHMuX2NsaWNrKGUocy5fY2VsbFswXS5maXJzdENoaWxkKSksaT0hMCk6Yz09eC5IT01FfHxjPT14LkVORD8ocj1jPT14LkhPTUU/XCJmaXJzdFwiOlwibGFzdFwiLG89ZFtyXShoKSxoPW5ldyBmdChvLmdldEZ1bGxZZWFyKCksby5nZXRNb250aCgpLG8uZ2V0RGF0ZSgpLGguZ2V0SG91cnMoKSxoLmdldE1pbnV0ZXMoKSxoLmdldFNlY29uZHMoKSxoLmdldE1pbGxpc2Vjb25kcygpKSxpPSEwKTpjPT14LlBBR0VVUD8oaT0hMCxzLm5hdmlnYXRlVG9QYXN0KCkpOmM9PXguUEFHRURPV04mJihpPSEwLHMubmF2aWdhdGVUb0Z1dHVyZSgpKSwobnx8cikmJihyfHxkLnNldERhdGUoaCxuKSxzLl9mb2N1cyhhKGgsbC5taW4sbC5tYXgpKSkpLGkmJnQucHJldmVudERlZmF1bHQoKSxzLl9jdXJyZW50fSxfYW5pbWF0ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5mcm9tLGk9ZS50byxyPXQuX2FjdGl2ZTtuP24ucGFyZW50KCkuZGF0YShcImFuaW1hdGluZ1wiKT8obi5vZmYoUiksbi5wYXJlbnQoKS5rZW5kb1N0b3AoITAsITApLnJlbW92ZSgpLG4ucmVtb3ZlKCksaS5pbnNlcnRBZnRlcih0LmVsZW1lbnRbMF0uZmlyc3RDaGlsZCksdC5fZm9jdXNWaWV3KHIpKTpuLmlzKFwiOnZpc2libGVcIikmJnQub3B0aW9ucy5hbmltYXRpb24hPT0hMT90W2UudmVydGljYWw/XCJfdmVydGljYWxcIjpcIl9ob3Jpem9udGFsXCJdKG4saSxlLmZ1dHVyZSk6KGkuaW5zZXJ0QWZ0ZXIobiksbi5vZmYoUikucmVtb3ZlKCksdC5fZm9jdXNWaWV3KHIpKTooaS5pbnNlcnRBZnRlcih0LmVsZW1lbnRbMF0uZmlyc3RDaGlsZCksdC5fYmluZFRhYmxlKGkpKX0sX2hvcml6b250YWw6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMscj1pLl9hY3RpdmUsbz1pLm9wdGlvbnMuYW5pbWF0aW9uLmhvcml6b250YWwsYT1vLmVmZmVjdHMscz1lLm91dGVyV2lkdGgoKTthJiYtMSE9YS5pbmRleE9mKFYpJiYoZS5hZGQodCkuY3NzKHt3aWR0aDpzfSksZS53cmFwKFwiPGRpdi8+XCIpLGkuX2ZvY3VzVmlldyhyLGUpLGUucGFyZW50KCkuY3NzKHtwb3NpdGlvbjpcInJlbGF0aXZlXCIsd2lkdGg6MipzLFwiZmxvYXRcIjpOLFwibWFyZ2luLWxlZnRcIjpuPzA6LXN9KSx0W24/XCJpbnNlcnRBZnRlclwiOlwiaW5zZXJ0QmVmb3JlXCJdKGUpLHB0KG8se2VmZmVjdHM6VitcIjpcIisobj9cInJpZ2h0XCI6TiksY29tcGxldGU6ZnVuY3Rpb24oKXtlLm9mZihSKS5yZW1vdmUoKSxpLl9vbGRUYWJsZT1udWxsLHQudW53cmFwKCksaS5fZm9jdXNWaWV3KHIpfX0pLGUucGFyZW50KCkua2VuZG9TdG9wKCEwLCEwKS5rZW5kb0FuaW1hdGUobykpfSxfdmVydGljYWw6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcyxvPXIub3B0aW9ucy5hbmltYXRpb24udmVydGljYWwsYT1vLmVmZmVjdHMscz1yLl9hY3RpdmU7YSYmLTEhPWEuaW5kZXhPZihcInpvb21cIikmJih0LmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDplLnByZXYoKS5vdXRlckhlaWdodCgpLGxlZnQ6MH0pLmluc2VydEJlZm9yZShlKSxNJiYobj1yLl9jZWxsQnlEYXRlKHIuX3ZpZXcudG9EYXRlU3RyaW5nKHIuX2N1cnJlbnQpKSxpPW4ucG9zaXRpb24oKSxpPWkubGVmdCtwYXJzZUludChuLndpZHRoKCkvMiwxMCkrXCJweCBcIisoaS50b3ArcGFyc2VJbnQobi5oZWlnaHQoKS8yLDEwKStcInB4XCIpLHQuY3NzKE0saSkpLGUua2VuZG9TdG9wKCEwLCEwKS5rZW5kb0FuaW1hdGUoe2VmZmVjdHM6XCJmYWRlT3V0XCIsZHVyYXRpb246NjAwLGNvbXBsZXRlOmZ1bmN0aW9uKCl7ZS5vZmYoUikucmVtb3ZlKCksci5fb2xkVGFibGU9bnVsbCx0LmNzcyh7cG9zaXRpb246XCJzdGF0aWNcIix0b3A6MCxsZWZ0OjB9KSxyLl9mb2N1c1ZpZXcocyl9fSksdC5rZW5kb1N0b3AoITAsITApLmtlbmRvQW5pbWF0ZShvKSl9LF9jZWxsQnlEYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl90YWJsZS5maW5kKFwidGQ6bm90KC5cIitRK1wiKVwiKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLmZpcnN0Q2hpbGQpLmF0dHIoeS5hdHRyKHEpKT09PXR9KX0sX2NsYXNzOmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpcyxyPWkuX2NlbGxJRCxvPWkuX2NlbGw7XG5vJiZvLnJlbW92ZUF0dHIodXQpLnJlbW92ZUF0dHIoXCJhcmlhLWxhYmVsXCIpLnJlbW92ZUF0dHIoTyksbz1pLl90YWJsZS5maW5kKFwidGQ6bm90KC5cIitRK1wiKVwiKS5yZW1vdmVDbGFzcyh0KS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLmZpcnN0Q2hpbGQpLmF0dHIoeS5hdHRyKHEpKT09PW59KS5hdHRyKHV0LCEwKSx0IT09S3x8aS5fYWN0aXZlfHxpLm9wdGlvbnMuZm9jdXNPbk5hdj09PSExfHwodD1cIlwiKSxvLmFkZENsYXNzKHQpLG9bMF0mJihpLl9jZWxsPW8pLHImJihvLmF0dHIoTyxyKSxpLl90YWJsZS5yZW1vdmVBdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIpLmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixyKSl9LF9iaW5kVGFibGU6ZnVuY3Rpb24oZSl7ZS5vbihudCx0aGlzLl9hZGRDbGFzc1Byb3h5KS5vbihldCx0aGlzLl9yZW1vdmVDbGFzc1Byb3h5KX0sX2NsaWNrOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMsaT1uZXcgRGF0ZSgrdC5fY3VycmVudCkscj1lLmF0dHIoeS5hdHRyKHEpKS5zcGxpdChcIi9cIik7cj1uZXcgZnQoclswXSxyWzFdLHJbMl0pLFMociwwKSx0Ll92aWV3LnNldERhdGUoaSxyKSx0Lm5hdmlnYXRlRG93bihhKGksbi5taW4sbi5tYXgpKX0sX2ZvY3VzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Ll92aWV3OzAhPT1uLmNvbXBhcmUoZSx0Ll9jdXJyZW50KT90Lm5hdmlnYXRlKGUpOih0Ll9jdXJyZW50PWUsdC5fY2xhc3MoSyxuLnRvRGF0ZVN0cmluZyhlKSkpfSxfZm9jdXNWaWV3OmZ1bmN0aW9uKGUsdCl7ZSYmdGhpcy5mb2N1cyh0KX0sX2Zvb3RlcjpmdW5jdGlvbihuKXt2YXIgaT10aGlzLHI9bygpLGE9aS5lbGVtZW50LHM9YS5maW5kKFwiLmstZm9vdGVyXCIpO3JldHVybiBuPyhzWzBdfHwocz1lKCc8ZGl2IGNsYXNzPVwiay1mb290ZXJcIj48YSBocmVmPVwiI1wiIGNsYXNzPVwiay1saW5rIGstbmF2LXRvZGF5XCI+PC9hPjwvZGl2PicpLmFwcGVuZFRvKGEpKSxpLl90b2RheT1zLnNob3coKS5maW5kKFwiLmstbGlua1wiKS5odG1sKG4ocikpLmF0dHIoXCJ0aXRsZVwiLHkudG9TdHJpbmcocixcIkRcIixpLm9wdGlvbnMuY3VsdHVyZSkpLGkuX3RvZ2dsZSgpLHQpOihpLl90b2dnbGUoITEpLHMuaGlkZSgpLHQpfSxfaGVhZGVyOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLG49dC5lbGVtZW50O24uZmluZChcIi5rLWhlYWRlclwiKVswXXx8bi5odG1sKCc8ZGl2IGNsYXNzPVwiay1oZWFkZXJcIj48YSBocmVmPVwiI1wiIHJvbGU9XCJidXR0b25cIiBjbGFzcz1cImstbGluayBrLW5hdi1wcmV2XCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LXdcIj48L3NwYW4+PC9hPjxhIGhyZWY9XCIjXCIgcm9sZT1cImJ1dHRvblwiIGFyaWEtbGl2ZT1cImFzc2VydGl2ZVwiIGFyaWEtYXRvbWljPVwidHJ1ZVwiIGNsYXNzPVwiay1saW5rIGstbmF2LWZhc3RcIj48L2E+PGEgaHJlZj1cIiNcIiByb2xlPVwiYnV0dG9uXCIgY2xhc3M9XCJrLWxpbmsgay1uYXYtbmV4dFwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy1lXCI+PC9zcGFuPjwvYT48L2Rpdj4nKSxlPW4uZmluZChcIi5rLWxpbmtcIikub24ocnQrXCIgXCIrb3QrXCIgXCIrbnQrXCIgXCIrZXQsZCkuY2xpY2soITEpLHQuX3RpdGxlPWUuZXEoMSkub24oQixmdW5jdGlvbigpe3QuX2FjdGl2ZT10Lm9wdGlvbnMuZm9jdXNPbk5hdiE9PSExLHQubmF2aWdhdGVVcCgpfSksdFtsdF09ZS5lcSgwKS5vbihCLGZ1bmN0aW9uKCl7dC5fYWN0aXZlPXQub3B0aW9ucy5mb2N1c09uTmF2IT09ITEsdC5uYXZpZ2F0ZVRvUGFzdCgpfSksdFtjdF09ZS5lcSgyKS5vbihCLGZ1bmN0aW9uKCl7dC5fYWN0aXZlPXQub3B0aW9ucy5mb2N1c09uTmF2IT09ITEsdC5uYXZpZ2F0ZVRvRnV0dXJlKCl9KX0sX25hdmlnYXRlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPW4uX2luZGV4KzEscj1uZXcgZnQoK24uX2N1cnJlbnQpO2U9bltlXSxlLmhhc0NsYXNzKFkpfHwoaT4zP3Iuc2V0RnVsbFllYXIoci5nZXRGdWxsWWVhcigpKzEwMCp0KTpfLnZpZXdzW2ldLnNldERhdGUocix0KSxuLm5hdmlnYXRlKHIpKX0sX29wdGlvbjpmdW5jdGlvbihlLG4pe3ZhciBpLHI9dGhpcyxvPXIub3B0aW9ucyxhPXIuX3ZhbHVlfHxyLl9jdXJyZW50O3JldHVybiBuPT09dD9vW2VdOihuPUMobixvLmZvcm1hdCxvLmN1bHR1cmUpLG4mJihvW2VdPW5ldyBmdCgrbiksaT1lPT09SD9uPmE6YT5uLChpfHx2KGEsbikpJiYoaSYmKHIuX3ZhbHVlPW51bGwpLHIuX2NoYW5nZVZpZXc9ITApLHIuX2NoYW5nZVZpZXd8fChyLl9jaGFuZ2VWaWV3PSEoIW8ubW9udGguY29udGVudCYmIW8ubW9udGguZW1wdHkpKSxyLm5hdmlnYXRlKHIuX3ZhbHVlKSxyLl90b2dnbGUoKSksdCl9LF90b2dnbGU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4ub3B0aW9ucyxyPW4uX3RvZGF5O2U9PT10JiYoZT1zKG8oKSxpLm1pbixpLm1heCkpLHImJihyLm9mZihCKSxlP3IuYWRkQ2xhc3MoSikucmVtb3ZlQ2xhc3MoWSkub24oQixodChuLl90b2RheUNsaWNrLG4pKTpyLnJlbW92ZUNsYXNzKEopLmFkZENsYXNzKFkpLm9uKEIsdSkpfSxfdG9kYXlDbGljazpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49Z3RbdC5vcHRpb25zLmRlcHRoXSxpPW8oKTtlLnByZXZlbnREZWZhdWx0KCksMD09PXQuX3ZpZXcuY29tcGFyZSh0Ll9jdXJyZW50LGkpJiZ0Ll9pbmRleD09biYmKHQuX2NoYW5nZVZpZXc9ITEpLHQuX3ZhbHVlPWksdC5uYXZpZ2F0ZShpLG4pLHQudHJpZ2dlcihqKX0sX3RlbXBsYXRlczpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm9wdGlvbnMsbj10LmZvb3RlcixpPXQubW9udGgscj1pLmNvbnRlbnQsbz1pLmVtcHR5O2UubW9udGg9e2NvbnRlbnQ6RCgnPHRkIz1kYXRhLmNzc0NsYXNzIyByb2xlPVwiZ3JpZGNlbGxcIj48YSB0YWJpbmRleD1cIi0xXCIgY2xhc3M9XCJrLWxpbmsjPWRhdGEubGlua0NsYXNzI1wiIGhyZWY9XCIjPWRhdGEudXJsI1wiICcreS5hdHRyKFwidmFsdWVcIikrJz1cIiM9ZGF0YS5kYXRlU3RyaW5nI1wiIHRpdGxlPVwiIz1kYXRhLnRpdGxlI1wiPicrKHJ8fFwiIz1kYXRhLnZhbHVlI1wiKStcIjwvYT48L3RkPlwiLHt1c2VXaXRoQmxvY2s6ISFyfSksZW1wdHk6RCgnPHRkIHJvbGU9XCJncmlkY2VsbFwiPicrKG98fFwiJm5ic3A7XCIpK1wiPC90ZD5cIix7dXNlV2l0aEJsb2NrOiEhb30pfSxlLmZvb3Rlcj1uIT09ITE/RChufHwnIz0ga2VuZG8udG9TdHJpbmcoZGF0YSxcIkRcIixcIicrdC5jdWx0dXJlKydcIikgIycse3VzZVdpdGhCbG9jazohMX0pOm51bGx9fSk7Yi5wbHVnaW4obXQpLF89e2ZpcnN0RGF5T2ZNb250aDpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGZ0KGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCksMSl9LGZpcnN0VmlzaWJsZURheTpmdW5jdGlvbihlLHQpe3Q9dHx8eS5jdWx0dXJlKCkuY2FsZW5kYXI7Zm9yKHZhciBuPXQuZmlyc3REYXksaT1uZXcgZnQoZS5nZXRGdWxsWWVhcigpLGUuZ2V0TW9udGgoKSwwLGUuZ2V0SG91cnMoKSxlLmdldE1pbnV0ZXMoKSxlLmdldFNlY29uZHMoKSxlLmdldE1pbGxpc2Vjb25kcygpKTtpLmdldERheSgpIT1uOylfLnNldFRpbWUoaSwtMSpzdCk7cmV0dXJuIGl9LHNldFRpbWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmdldFRpbWV6b25lT2Zmc2V0KCksaT1uZXcgZnQoZS5nZXRUaW1lKCkrdCkscj1pLmdldFRpbWV6b25lT2Zmc2V0KCktbjtlLnNldFRpbWUoaS5nZXRUaW1lKCkrciphdCl9LHZpZXdzOlt7bmFtZTpVLHRpdGxlOmZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBoKGkpLm1vbnRocy5uYW1lc1tlLmdldE1vbnRoKCldK1wiIFwiK2UuZ2V0RnVsbFllYXIoKX0sY29udGVudDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcyxuPTAscj1lLm1pbixvPWUubWF4LGE9ZS5kYXRlLHM9ZS5kYXRlcyxjPWUuZm9ybWF0LGQ9ZS5jdWx0dXJlLHU9ZS51cmwscD11JiZzWzBdLGY9aChkKSxtPWYuZmlyc3REYXksdj1mLmRheXMsdz1sKHYubmFtZXMsbSksYj1sKHYubmFtZXNTaG9ydCxtKSxrPV8uZmlyc3RWaXNpYmxlRGF5KGEsZikseD10LmZpcnN0KGEpLEM9dC5sYXN0KGEpLFQ9dC50b0RhdGVTdHJpbmcsRD1uZXcgZnQsQT0nPHRhYmxlIHRhYmluZGV4PVwiMFwiIHJvbGU9XCJncmlkXCIgY2xhc3M9XCJrLWNvbnRlbnRcIiBjZWxsc3BhY2luZz1cIjBcIj48dGhlYWQ+PHRyIHJvbGU9XCJyb3dcIj4nOzc+bjtuKyspQSs9Jzx0aCBzY29wZT1cImNvbFwiIHRpdGxlPVwiJyt3W25dKydcIj4nK2Jbbl0rXCI8L3RoPlwiO3JldHVybiBEPW5ldyBmdChELmdldEZ1bGxZZWFyKCksRC5nZXRNb250aCgpLEQuZ2V0RGF0ZSgpKSxTKEQsMCksRD0rRCxpKHtjZWxsczo0MixwZXJSb3c6NyxodG1sOkErPSc8L3RyPjwvdGhlYWQ+PHRib2R5Pjx0ciByb2xlPVwicm93XCI+JyxzdGFydDpuZXcgZnQoay5nZXRGdWxsWWVhcigpLGsuZ2V0TW9udGgoKSxrLmdldERhdGUoKSksbWluOm5ldyBmdChyLmdldEZ1bGxZZWFyKCksci5nZXRNb250aCgpLHIuZ2V0RGF0ZSgpKSxtYXg6bmV3IGZ0KG8uZ2V0RnVsbFllYXIoKSxvLmdldE1vbnRoKCksby5nZXREYXRlKCkpLGNvbnRlbnQ6ZS5jb250ZW50LGVtcHR5OmUuZW1wdHksc2V0dGVyOnQuc2V0RGF0ZSxidWlsZDpmdW5jdGlvbihlKXt2YXIgdD1bXSxuPWUuZ2V0RGF5KCksaT1cIlwiLHI9XCIjXCI7cmV0dXJuKHg+ZXx8ZT5DKSYmdC5wdXNoKFEpLCtlPT09RCYmdC5wdXNoKFwiay10b2RheVwiKSwoMD09PW58fDY9PT1uKSYmdC5wdXNoKFwiay13ZWVrZW5kXCIpLHAmJmcoK2UscykmJihyPXUucmVwbGFjZShcInswfVwiLHkudG9TdHJpbmcoZSxjLGQpKSxpPVwiIGstYWN0aW9uLWxpbmtcIikse2RhdGU6ZSxkYXRlczpzLG5zOnkubnMsdGl0bGU6eS50b1N0cmluZyhlLFwiRFwiLGQpLHZhbHVlOmUuZ2V0RGF0ZSgpLGRhdGVTdHJpbmc6VChlKSxjc3NDbGFzczp0WzBdPycgY2xhc3M9XCInK3Quam9pbihcIiBcIikrJ1wiJzpcIlwiLGxpbmtDbGFzczppLHVybDpyfX19KX0sZmlyc3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIF8uZmlyc3REYXlPZk1vbnRoKGUpfSxsYXN0OmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBmdChlLmdldEZ1bGxZZWFyKCksZS5nZXRNb250aCgpKzEsMCksbj1fLmZpcnN0RGF5T2ZNb250aChlKSxpPU1hdGguYWJzKHQuZ2V0VGltZXpvbmVPZmZzZXQoKS1uLmdldFRpbWV6b25lT2Zmc2V0KCkpO3JldHVybiBpJiZ0LnNldEhvdXJzKG4uZ2V0SG91cnMoKStpLzYwKSx0fSxjb21wYXJlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT1lLmdldE1vbnRoKCkscj1lLmdldEZ1bGxZZWFyKCksbz10LmdldE1vbnRoKCksYT10LmdldEZ1bGxZZWFyKCk7cmV0dXJuIG49cj5hPzE6YT5yPy0xOmk9PW8/MDppPm8/MTotMX0sc2V0RGF0ZTpmdW5jdGlvbihlLHQpe3ZhciBuPWUuZ2V0SG91cnMoKTt0IGluc3RhbmNlb2YgZnQ/ZS5zZXRGdWxsWWVhcih0LmdldEZ1bGxZZWFyKCksdC5nZXRNb250aCgpLHQuZ2V0RGF0ZSgpKTpfLnNldFRpbWUoZSx0KnN0KSxTKGUsbil9LHRvRGF0ZVN0cmluZzpmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRGdWxsWWVhcigpK1wiL1wiK2UuZ2V0TW9udGgoKStcIi9cIitlLmdldERhdGUoKX19LHtuYW1lOlwieWVhclwiLHRpdGxlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEZ1bGxZZWFyKCl9LGNvbnRlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9aChlLmN1bHR1cmUpLm1vbnRocy5uYW1lc0FiYnIsbj10aGlzLnRvRGF0ZVN0cmluZyxyPWUubWluLG89ZS5tYXg7cmV0dXJuIGkoe21pbjpuZXcgZnQoci5nZXRGdWxsWWVhcigpLHIuZ2V0TW9udGgoKSwxKSxtYXg6bmV3IGZ0KG8uZ2V0RnVsbFllYXIoKSxvLmdldE1vbnRoKCksMSksc3RhcnQ6bmV3IGZ0KGUuZGF0ZS5nZXRGdWxsWWVhcigpLDAsMSksc2V0dGVyOnRoaXMuc2V0RGF0ZSxidWlsZDpmdW5jdGlvbihlKXtyZXR1cm57dmFsdWU6dFtlLmdldE1vbnRoKCldLG5zOnkubnMsZGF0ZVN0cmluZzpuKGUpLGNzc0NsYXNzOlwiXCJ9fX0pfSxmaXJzdDpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGZ0KGUuZ2V0RnVsbFllYXIoKSwwLGUuZ2V0RGF0ZSgpKX0sbGFzdDpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGZ0KGUuZ2V0RnVsbFllYXIoKSwxMSxlLmdldERhdGUoKSl9LGNvbXBhcmU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcihlLHQpfSxzZXREYXRlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT1lLmdldEhvdXJzKCk7dCBpbnN0YW5jZW9mIGZ0PyhuPXQuZ2V0TW9udGgoKSxlLnNldEZ1bGxZZWFyKHQuZ2V0RnVsbFllYXIoKSxuLGUuZ2V0RGF0ZSgpKSxuIT09ZS5nZXRNb250aCgpJiZlLnNldERhdGUoMCkpOihuPWUuZ2V0TW9udGgoKSt0LGUuc2V0TW9udGgobiksbj4xMSYmKG4tPTEyKSxuPjAmJmUuZ2V0TW9udGgoKSE9biYmZS5zZXREYXRlKDApKSxTKGUsaSl9LHRvRGF0ZVN0cmluZzpmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRGdWxsWWVhcigpK1wiL1wiK2UuZ2V0TW9udGgoKStcIi8xXCJ9fSx7bmFtZTpcImRlY2FkZVwiLHRpdGxlOmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4gbihlLHQsaSwxMCl9LGNvbnRlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRlLmdldEZ1bGxZZWFyKCksbj10aGlzLnRvRGF0ZVN0cmluZztyZXR1cm4gaSh7c3RhcnQ6bmV3IGZ0KHQtdCUxMC0xLDAsMSksbWluOm5ldyBmdChlLm1pbi5nZXRGdWxsWWVhcigpLDAsMSksbWF4Om5ldyBmdChlLm1heC5nZXRGdWxsWWVhcigpLDAsMSksc2V0dGVyOnRoaXMuc2V0RGF0ZSxidWlsZDpmdW5jdGlvbihlLHQpe3JldHVybnt2YWx1ZTplLmdldEZ1bGxZZWFyKCksbnM6eS5ucyxkYXRlU3RyaW5nOm4oZSksY3NzQ2xhc3M6MD09PXR8fDExPT10P1g6XCJcIn19fSl9LGZpcnN0OmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ2V0RnVsbFllYXIoKTtyZXR1cm4gbmV3IGZ0KHQtdCUxMCxlLmdldE1vbnRoKCksZS5nZXREYXRlKCkpfSxsYXN0OmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ2V0RnVsbFllYXIoKTtyZXR1cm4gbmV3IGZ0KHQtdCUxMCs5LGUuZ2V0TW9udGgoKSxlLmdldERhdGUoKSl9LGNvbXBhcmU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcihlLHQsMTApfSxzZXREYXRlOmZ1bmN0aW9uKGUsdCl7YyhlLHQsMSl9LHRvRGF0ZVN0cmluZzpmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRGdWxsWWVhcigpK1wiLzAvMVwifX0se25hbWU6Vyx0aXRsZTpmdW5jdGlvbihlLHQsaSl7cmV0dXJuIG4oZSx0LGksMTAwKX0sY29udGVudDpmdW5jdGlvbihlKXt2YXIgdD1lLmRhdGUuZ2V0RnVsbFllYXIoKSxuPWUubWluLmdldEZ1bGxZZWFyKCkscj1lLm1heC5nZXRGdWxsWWVhcigpLG89dGhpcy50b0RhdGVTdHJpbmcsYT1uLHM9cjtyZXR1cm4gYS09YSUxMCxzLT1zJTEwLDEwPnMtYSYmKHM9YSs5KSxpKHtzdGFydDpuZXcgZnQodC10JTEwMC0xMCwwLDEpLG1pbjpuZXcgZnQoYSwwLDEpLG1heDpuZXcgZnQocywwLDEpLHNldHRlcjp0aGlzLnNldERhdGUsYnVpbGQ6ZnVuY3Rpb24oZSx0KXt2YXIgaT1lLmdldEZ1bGxZZWFyKCksYT1pKzk7cmV0dXJuIG4+aSYmKGk9biksYT5yJiYoYT1yKSx7bnM6eS5ucyx2YWx1ZTppK1wiIC0gXCIrYSxkYXRlU3RyaW5nOm8oZSksY3NzQ2xhc3M6MD09PXR8fDExPT10P1g6XCJcIn19fSl9LGZpcnN0OmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ2V0RnVsbFllYXIoKTtyZXR1cm4gbmV3IGZ0KHQtdCUxMDAsZS5nZXRNb250aCgpLGUuZ2V0RGF0ZSgpKX0sbGFzdDpmdW5jdGlvbihlKXt2YXIgdD1lLmdldEZ1bGxZZWFyKCk7cmV0dXJuIG5ldyBmdCh0LXQlMTAwKzk5LGUuZ2V0TW9udGgoKSxlLmdldERhdGUoKSl9LGNvbXBhcmU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcihlLHQsMTAwKX0sc2V0RGF0ZTpmdW5jdGlvbihlLHQpe2MoZSx0LDEwKX0sdG9EYXRlU3RyaW5nOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ2V0RnVsbFllYXIoKTtyZXR1cm4gdC10JTEwK1wiLzAvMVwifX1dfSxfLmlzRXF1YWxEYXRlUGFydD1tLF8ubWFrZVVuc2VsZWN0YWJsZT1mLF8ucmVzdHJpY3RWYWx1ZT1hLF8uaXNJblJhbmdlPXMsXy5ub3JtYWxpemU9cCxfLnZpZXdzRW51bT1ndCx5LmNhbGVuZGFyPV99KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbih0KXt2YXIgbj10LnBhcnNlRm9ybWF0cyxpPXQuZm9ybWF0O0Iubm9ybWFsaXplKHQpLG49ZS5pc0FycmF5KG4pP246W25dLC0xPT09ZS5pbkFycmF5KGksbikmJm4uc3BsaWNlKDAsMCx0LmZvcm1hdCksdC5wYXJzZUZvcm1hdHM9bn1mdW5jdGlvbiBpKGUpe2UucHJldmVudERlZmF1bHQoKX12YXIgcixvPXdpbmRvdy5rZW5kbyxhPW8udWkscz1hLldpZGdldCxsPW8ucGFyc2VEYXRlLGM9by5rZXlzLGQ9by50ZW1wbGF0ZSx1PW8uX2FjdGl2ZUVsZW1lbnQsaD1cIjxkaXYgLz5cIixwPVwiPHNwYW4gLz5cIixmPVwiLmtlbmRvRGF0ZVBpY2tlclwiLGc9XCJjbGlja1wiK2YsbT1cIm9wZW5cIix2PVwiY2xvc2VcIixfPVwiY2hhbmdlXCIseT1cImRpc2FibGVkXCIsdz1cInJlYWRvbmx5XCIsYj1cImstc3RhdGUtZGVmYXVsdFwiLGs9XCJrLXN0YXRlLWZvY3VzZWRcIix4PVwiay1zdGF0ZS1zZWxlY3RlZFwiLEM9XCJrLXN0YXRlLWRpc2FibGVkXCIsUz1cImstc3RhdGUtaG92ZXJcIixUPVwibW91c2VlbnRlclwiK2YrXCIgbW91c2VsZWF2ZVwiK2YsRD1cIm1vdXNlZG93blwiK2YsQT1cImlkXCIsRT1cIm1pblwiLE09XCJtYXhcIixQPVwibW9udGhcIixJPVwiYXJpYS1kaXNhYmxlZFwiLHo9XCJhcmlhLWV4cGFuZGVkXCIsRj1cImFyaWEtaGlkZGVuXCIsUj1cImFyaWEtcmVhZG9ubHlcIixCPW8uY2FsZW5kYXIsTD1CLmlzSW5SYW5nZSxPPUIucmVzdHJpY3RWYWx1ZSxIPUIuaXNFcXVhbERhdGVQYXJ0LE49ZS5leHRlbmQsVj1lLnByb3h5LFU9RGF0ZSxXPWZ1bmN0aW9uKHQpe3ZhciBuLGk9dGhpcyxyPWRvY3VtZW50LmJvZHkscz1lKGgpLmF0dHIoRixcInRydWVcIikuYWRkQ2xhc3MoXCJrLWNhbGVuZGFyLWNvbnRhaW5lclwiKS5hcHBlbmRUbyhyKTtpLm9wdGlvbnM9dD10fHx7fSxuPXQuaWQsbiYmKG4rPVwiX2RhdGV2aWV3XCIscy5hdHRyKEEsbiksaS5fZGF0ZVZpZXdJRD1uKSxpLnBvcHVwPW5ldyBhLlBvcHVwKHMsTih0LnBvcHVwLHQse25hbWU6XCJQb3B1cFwiLGlzUnRsOm8uc3VwcG9ydC5pc1J0bCh0LmFuY2hvcil9KSksaS5kaXY9cyxpLnZhbHVlKHQudmFsdWUpfTtXLnByb3RvdHlwZT17X2NhbGVuZGFyOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLHI9bi5jYWxlbmRhcixzPW4ub3B0aW9ucztyfHwodD1lKGgpLmF0dHIoQSxvLmd1aWQoKSkuYXBwZW5kVG8obi5wb3B1cC5lbGVtZW50KS5vbihELGkpLm9uKGcsXCJ0ZDpoYXMoLmstbGluaylcIixWKG4uX2NsaWNrLG4pKSxuLmNhbGVuZGFyPXI9bmV3IGEuQ2FsZW5kYXIodCksbi5fc2V0T3B0aW9ucyhzKSxvLmNhbGVuZGFyLm1ha2VVbnNlbGVjdGFibGUoci5lbGVtZW50KSxyLm5hdmlnYXRlKG4uX3ZhbHVlfHxuLl9jdXJyZW50LHMuc3RhcnQpLG4udmFsdWUobi5fdmFsdWUpKX0sX3NldE9wdGlvbnM6ZnVuY3Rpb24oZSl7dGhpcy5jYWxlbmRhci5zZXRPcHRpb25zKHtmb2N1c09uTmF2OiExLGNoYW5nZTplLmNoYW5nZSxjdWx0dXJlOmUuY3VsdHVyZSxkYXRlczplLmRhdGVzLGRlcHRoOmUuZGVwdGgsZm9vdGVyOmUuZm9vdGVyLGZvcm1hdDplLmZvcm1hdCxtYXg6ZS5tYXgsbWluOmUubWluLG1vbnRoOmUubW9udGgsc3RhcnQ6ZS5zdGFydH0pfSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9uczt0aGlzLm9wdGlvbnM9Tih0LGUse2NoYW5nZTp0LmNoYW5nZSxjbG9zZTp0LmNsb3NlLG9wZW46dC5vcGVufSksdGhpcy5jYWxlbmRhciYmdGhpcy5fc2V0T3B0aW9ucyh0aGlzLm9wdGlvbnMpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wb3B1cC5kZXN0cm95KCl9LG9wZW46ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2NhbGVuZGFyKCksZS5wb3B1cC5vcGVuKCl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5wb3B1cC5jbG9zZSgpfSxtaW46ZnVuY3Rpb24oZSl7dGhpcy5fb3B0aW9uKEUsZSl9LG1heDpmdW5jdGlvbihlKXt0aGlzLl9vcHRpb24oTSxlKX0sdG9nZ2xlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlW2UucG9wdXAudmlzaWJsZSgpP3Y6bV0oKX0sbW92ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9ZS5rZXlDb2RlLHI9bi5jYWxlbmRhcixvPWUuY3RybEtleSYmaT09Yy5ET1dOfHxpPT1jLkVOVEVSO2lmKGk9PWMuRVNDKXJldHVybiBuLmNsb3NlKCksdDtpZihlLmFsdEtleSlyZXR1cm4gaT09Yy5ET1dOPyhuLm9wZW4oKSxlLnByZXZlbnREZWZhdWx0KCkpOmk9PWMuVVAmJihuLmNsb3NlKCksZS5wcmV2ZW50RGVmYXVsdCgpKSx0O2lmKG4ucG9wdXAudmlzaWJsZSgpKXJldHVybiBvJiZyLl9jZWxsLmhhc0NsYXNzKHgpPyhuLmNsb3NlKCksZS5wcmV2ZW50RGVmYXVsdCgpLHQpOihuLl9jdXJyZW50PXIuX21vdmUoZSksdCl9LGN1cnJlbnQ6ZnVuY3Rpb24oZSl7dGhpcy5fY3VycmVudD1lLHRoaXMuY2FsZW5kYXIuX2ZvY3VzKGUpfSx2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5jYWxlbmRhcixpPXQub3B0aW9uczt0Ll92YWx1ZT1lLHQuX2N1cnJlbnQ9bmV3IFUoK08oZSxpLm1pbixpLm1heCkpLG4mJm4udmFsdWUoZSl9LF9jbGljazpmdW5jdGlvbihlKXstMSE9PWUuY3VycmVudFRhcmdldC5jbGFzc05hbWUuaW5kZXhPZih4KSYmdGhpcy5jbG9zZSgpfSxfb3B0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPW4uY2FsZW5kYXI7bi5vcHRpb25zW2VdPXQsaSYmaVtlXSh0KX19LFcubm9ybWFsaXplPW4sby5EYXRlVmlldz1XLHI9cy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgaSxyLGE9dGhpcztzLmZuLmluaXQuY2FsbChhLGUsdCksZT1hLmVsZW1lbnQsdD1hLm9wdGlvbnMsdC5taW49bChlLmF0dHIoXCJtaW5cIikpfHxsKHQubWluKSx0Lm1heD1sKGUuYXR0cihcIm1heFwiKSl8fGwodC5tYXgpLG4odCksYS5fd3JhcHBlcigpLGEuZGF0ZVZpZXc9bmV3IFcoTih7fSx0LHtpZDplLmF0dHIoQSksYW5jaG9yOmEud3JhcHBlcixjaGFuZ2U6ZnVuY3Rpb24oKXthLl9jaGFuZ2UodGhpcy52YWx1ZSgpKSxhLmNsb3NlKCl9LGNsb3NlOmZ1bmN0aW9uKHQpe2EudHJpZ2dlcih2KT90LnByZXZlbnREZWZhdWx0KCk6KGUuYXR0cih6LCExKSxyLmF0dHIoRiwhMCkpfSxvcGVuOmZ1bmN0aW9uKHQpe3ZhciBuLGk9YS5vcHRpb25zO2EudHJpZ2dlcihtKT90LnByZXZlbnREZWZhdWx0KCk6KGEuZWxlbWVudC52YWwoKSE9PWEuX29sZFRleHQmJihuPWwoZS52YWwoKSxpLnBhcnNlRm9ybWF0cyxpLmN1bHR1cmUpLGEuZGF0ZVZpZXdbbj9cImN1cnJlbnRcIjpcInZhbHVlXCJdKG4pKSxlLmF0dHIoeiwhMCksci5hdHRyKEYsITEpLGEuX3VwZGF0ZUFSSUEobikpfX0pKSxyPWEuZGF0ZVZpZXcuZGl2LGEuX2ljb24oKTt0cnl7ZVswXS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJ0ZXh0XCIpfWNhdGNoKGMpe2VbMF0udHlwZT1cInRleHRcIn1lLmFkZENsYXNzKFwiay1pbnB1dFwiKS5hdHRyKHtyb2xlOlwiY29tYm9ib3hcIixcImFyaWEtZXhwYW5kZWRcIjohMSxcImFyaWEtb3duc1wiOmEuZGF0ZVZpZXcuX2RhdGVWaWV3SUR9KSxhLl9yZXNldCgpLGEuX3RlbXBsYXRlKCksaT1lLmlzKFwiW2Rpc2FibGVkXVwiKSxpP2EuZW5hYmxlKCExKTphLnJlYWRvbmx5KGUuaXMoXCJbcmVhZG9ubHldXCIpKSxhLl9vbGQ9YS5fdXBkYXRlKHQudmFsdWV8fGEuZWxlbWVudC52YWwoKSksYS5fb2xkVGV4dD1lLnZhbCgpLG8ubm90aWZ5KGEpfSxldmVudHM6W20sdixfXSxvcHRpb25zOntuYW1lOlwiRGF0ZVBpY2tlclwiLHZhbHVlOm51bGwsZm9vdGVyOlwiXCIsZm9ybWF0OlwiXCIsY3VsdHVyZTpcIlwiLHBhcnNlRm9ybWF0czpbXSxtaW46bmV3IERhdGUoMTkwMCwwLDEpLG1heDpuZXcgRGF0ZSgyMDk5LDExLDMxKSxzdGFydDpQLGRlcHRoOlAsYW5pbWF0aW9uOnt9LG1vbnRoOnt9LGRhdGVzOltdLEFSSUFUZW1wbGF0ZTonQ3VycmVudCBmb2N1c2VkIGRhdGUgaXMgIz1rZW5kby50b1N0cmluZyhkYXRhLmN1cnJlbnQsIFwiRFwiKSMnfSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsaT10Ll92YWx1ZTtzLmZuLnNldE9wdGlvbnMuY2FsbCh0LGUpLGU9dC5vcHRpb25zLGUubWluPWwoZS5taW4pLGUubWF4PWwoZS5tYXgpLG4oZSksdC5kYXRlVmlldy5zZXRPcHRpb25zKGUpLGkmJih0LmVsZW1lbnQudmFsKG8udG9TdHJpbmcoaSxlLmZvcm1hdCxlLmN1bHR1cmUpKSx0Ll91cGRhdGVBUklBKGkpKX0sX2VkaXRhYmxlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Ll9kYXRlSWNvbi5vZmYoZikscj10LmVsZW1lbnQub2ZmKGYpLG89dC5faW5wdXRXcmFwcGVyLm9mZihmKSxhPWUucmVhZG9ubHkscz1lLmRpc2FibGU7YXx8cz8oby5hZGRDbGFzcyhzP0M6YikucmVtb3ZlQ2xhc3Mocz9iOkMpLHIuYXR0cih5LHMpLmF0dHIodyxhKS5hdHRyKEkscykuYXR0cihSLGEpKTooby5hZGRDbGFzcyhiKS5yZW1vdmVDbGFzcyhDKS5vbihULHQuX3RvZ2dsZUhvdmVyKSxyLnJlbW92ZUF0dHIoeSkucmVtb3ZlQXR0cih3KS5hdHRyKEksITEpLmF0dHIoUiwhMSkub24oXCJrZXlkb3duXCIrZixWKHQuX2tleWRvd24sdCkpLm9uKFwiZm9jdXNvdXRcIitmLFYodC5fYmx1cix0KSkub24oXCJmb2N1c1wiK2YsZnVuY3Rpb24oKXt0Ll9pbnB1dFdyYXBwZXIuYWRkQ2xhc3Moayl9KSxuLm9uKGcsVih0Ll9jbGljayx0KSkub24oRCxpKSl9LHJlYWRvbmx5OmZ1bmN0aW9uKGUpe3RoaXMuX2VkaXRhYmxlKHtyZWFkb25seTplPT09dD8hMDplLGRpc2FibGU6ITF9KX0sZW5hYmxlOmZ1bmN0aW9uKGUpe3RoaXMuX2VkaXRhYmxlKHtyZWFkb25seTohMSxkaXNhYmxlOiEoZT1lPT09dD8hMDplKX0pfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztzLmZuLmRlc3Ryb3kuY2FsbChlKSxlLmRhdGVWaWV3LmRlc3Ryb3koKSxlLmVsZW1lbnQub2ZmKGYpLGUuX2RhdGVJY29uLm9mZihmKSxlLl9pbnB1dFdyYXBwZXIub2ZmKGYpLGUuX2Zvcm0mJmUuX2Zvcm0ub2ZmKFwicmVzZXRcIixlLl9yZXNldEhhbmRsZXIpfSxvcGVuOmZ1bmN0aW9uKCl7dGhpcy5kYXRlVmlldy5vcGVuKCl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5kYXRlVmlldy5jbG9zZSgpfSxtaW46ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29wdGlvbihFLGUpfSxtYXg6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29wdGlvbihNLGUpfSx2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiBlPT09dD9uLl92YWx1ZToobi5fb2xkPW4uX3VwZGF0ZShlKSxudWxsPT09bi5fb2xkJiZuLmVsZW1lbnQudmFsKFwiXCIpLG4uX29sZFRleHQ9bi5lbGVtZW50LnZhbCgpLHQpfSxfdG9nZ2xlSG92ZXI6ZnVuY3Rpb24odCl7ZSh0LmN1cnJlbnRUYXJnZXQpLnRvZ2dsZUNsYXNzKFMsXCJtb3VzZWVudGVyXCI9PT10LnR5cGUpfSxfYmx1cjpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmVsZW1lbnQudmFsKCk7ZS5jbG9zZSgpLHQhPT1lLl9vbGRUZXh0JiZlLl9jaGFuZ2UodCksZS5faW5wdXRXcmFwcGVyLnJlbW92ZUNsYXNzKGspfSxfY2xpY2s6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5lbGVtZW50O2UuZGF0ZVZpZXcudG9nZ2xlKCksby5zdXBwb3J0LnRvdWNofHx0WzBdPT09dSgpfHx0LmZvY3VzKCl9LF9jaGFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlPXQuX3VwZGF0ZShlKSwrdC5fb2xkIT0rZSYmKHQuX29sZD1lLHQuX29sZFRleHQ9dC5lbGVtZW50LnZhbCgpLHQuZWxlbWVudC50cmlnZ2VyKF8pLHQudHJpZ2dlcihfKSl9LF9rZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LmRhdGVWaWV3LGk9dC5lbGVtZW50LnZhbCgpO24ucG9wdXAudmlzaWJsZSgpfHxlLmtleUNvZGUhPWMuRU5URVJ8fGk9PT10Ll9vbGRUZXh0PyhuLm1vdmUoZSksdC5fdXBkYXRlQVJJQShuLl9jdXJyZW50KSk6dC5fY2hhbmdlKGkpfSxfaWNvbjpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4uZWxlbWVudDt0PWkubmV4dChcInNwYW4uay1zZWxlY3RcIiksdFswXXx8KHQ9ZSgnPHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstc2VsZWN0XCI+PHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstaWNvbiBrLWktY2FsZW5kYXJcIj5zZWxlY3Q8L3NwYW4+PC9zcGFuPicpLmluc2VydEFmdGVyKGkpKSxuLl9kYXRlSWNvbj10LmF0dHIoe3JvbGU6XCJidXR0b25cIixcImFyaWEtY29udHJvbHNcIjpuLmRhdGVWaWV3Ll9kYXRlVmlld0lEfSl9LF9vcHRpb246ZnVuY3Rpb24oZSxuKXt2YXIgaT10aGlzLHI9aS5vcHRpb25zO3JldHVybiBuPT09dD9yW2VdOihuPWwobixyLnBhcnNlRm9ybWF0cyxyLmN1bHR1cmUpLG4mJihyW2VdPW5ldyBVKCtuKSxpLmRhdGVWaWV3W2VdKG4pKSx0KX0sX3VwZGF0ZTpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMsaT1uLm9wdGlvbnMscj1pLm1pbixhPWkubWF4LHM9bi5fdmFsdWUsYz1sKGUsaS5wYXJzZUZvcm1hdHMsaS5jdWx0dXJlKSxkPW51bGw9PT1jJiZudWxsPT09c3x8YyBpbnN0YW5jZW9mIERhdGUmJnMgaW5zdGFuY2VvZiBEYXRlO3JldHVybitjPT09K3MmJmQ/KHQ9by50b1N0cmluZyhjLGkuZm9ybWF0LGkuY3VsdHVyZSksdCE9PWUmJm4uZWxlbWVudC52YWwobnVsbD09PWM/ZTp0KSxjKToobnVsbCE9PWMmJkgoYyxyKT9jPU8oYyxyLGEpOkwoYyxyLGEpfHwoYz1udWxsKSxuLl92YWx1ZT1jLG4uZGF0ZVZpZXcudmFsdWUoYyksbi5lbGVtZW50LnZhbChjP28udG9TdHJpbmcoYyxpLmZvcm1hdCxpLmN1bHR1cmUpOmUpLG4uX3VwZGF0ZUFSSUEoYyksYyl9LF93cmFwcGVyOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi5lbGVtZW50O3Q9aS5wYXJlbnRzKFwiLmstZGF0ZXBpY2tlclwiKSx0WzBdfHwodD1pLndyYXAocCkucGFyZW50KCkuYWRkQ2xhc3MoXCJrLXBpY2tlci13cmFwIGstc3RhdGUtZGVmYXVsdFwiKSx0PXQud3JhcChwKS5wYXJlbnQoKSksdFswXS5zdHlsZS5jc3NUZXh0PWlbMF0uc3R5bGUuY3NzVGV4dCxpLmNzcyh7d2lkdGg6XCIxMDAlXCIsaGVpZ2h0OmlbMF0uc3R5bGUuaGVpZ2h0fSksbi53cmFwcGVyPXQuYWRkQ2xhc3MoXCJrLXdpZGdldCBrLWRhdGVwaWNrZXIgay1oZWFkZXJcIikuYWRkQ2xhc3MoaVswXS5jbGFzc05hbWUpLG4uX2lucHV0V3JhcHBlcj1lKHRbMF0uZmlyc3RDaGlsZCl9LF9yZXNldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LmVsZW1lbnQsaT1uLmF0dHIoXCJmb3JtXCIpLHI9aT9lKFwiI1wiK2kpOm4uY2xvc2VzdChcImZvcm1cIik7clswXSYmKHQuX3Jlc2V0SGFuZGxlcj1mdW5jdGlvbigpe3QudmFsdWUoblswXS5kZWZhdWx0VmFsdWUpfSx0Ll9mb3JtPXIub24oXCJyZXNldFwiLHQuX3Jlc2V0SGFuZGxlcikpfSxfdGVtcGxhdGU6ZnVuY3Rpb24oKXt0aGlzLl9hcmlhVGVtcGxhdGU9ZCh0aGlzLm9wdGlvbnMuQVJJQVRlbXBsYXRlKX0sX3VwZGF0ZUFSSUE6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLGk9bi5kYXRlVmlldy5jYWxlbmRhcjtuLmVsZW1lbnQucmVtb3ZlQXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKSxpJiYodD1pLl9jZWxsLHQuYXR0cihcImFyaWEtbGFiZWxcIixuLl9hcmlhVGVtcGxhdGUoe2N1cnJlbnQ6ZXx8aS5jdXJyZW50KCl9KSksbi5lbGVtZW50LmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIix0LmF0dHIoXCJpZFwiKSkpfX0pLGEucGx1Z2luKHIpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSx0LG4pe3JldHVybiBuP3Quc3Vic3RyaW5nKDAsZSkuc3BsaXQobikubGVuZ3RoLTE6MH1mdW5jdGlvbiBpKGUsdCxpKXtyZXR1cm4gdC5zcGxpdChpKVtuKGUsdCxpKV19ZnVuY3Rpb24gcihlLHQsaSxyKXt2YXIgbz10LnNwbGl0KHIpO3JldHVybiBvLnNwbGljZShuKGUsdCxyKSwxLGkpLHImJlwiXCIhPT1vW28ubGVuZ3RoLTFdJiZvLnB1c2goXCJcIiksby5qb2luKHIpfXZhciBvPXdpbmRvdy5rZW5kbyxhPW8uc3VwcG9ydCxzPW8uY2FyZXQsbD1vLl9hY3RpdmVFbGVtZW50LGM9YS5wbGFjZWhvbGRlcixkPW8udWksdT1kLkxpc3QsaD1vLmtleXMscD1vLmRhdGEuRGF0YVNvdXJjZSxmPVwiYXJpYS1kaXNhYmxlZFwiLGc9XCJhcmlhLXJlYWRvbmx5XCIsbT1cImstc3RhdGUtZGVmYXVsdFwiLHY9XCJkaXNhYmxlZFwiLF89XCJyZWFkb25seVwiLHk9XCJrLXN0YXRlLWZvY3VzZWRcIix3PVwiay1zdGF0ZS1zZWxlY3RlZFwiLGI9XCJrLXN0YXRlLWRpc2FibGVkXCIsaz1cImstc3RhdGUtaG92ZXJcIix4PVwiLmtlbmRvQXV0b0NvbXBsZXRlXCIsQz1cIm1vdXNlZW50ZXJcIit4K1wiIG1vdXNlbGVhdmVcIit4LFM9ZS5wcm94eSxUPXUuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIGkscj10aGlzO3IubnM9eCxuPWUuaXNBcnJheShuKT97ZGF0YVNvdXJjZTpufTpuLHUuZm4uaW5pdC5jYWxsKHIsdCxuKSx0PXIuZWxlbWVudCxuPXIub3B0aW9ucyxuLnBsYWNlaG9sZGVyPW4ucGxhY2Vob2xkZXJ8fHQuYXR0cihcInBsYWNlaG9sZGVyXCIpLGMmJnQuYXR0cihcInBsYWNlaG9sZGVyXCIsbi5wbGFjZWhvbGRlciksci5fd3JhcHBlcigpLHIuX2xvYWRlcigpLHIuX2RhdGFTb3VyY2UoKSxyLl9pZ25vcmVDYXNlKCksdFswXS50eXBlPVwidGV4dFwiLGk9ci53cmFwcGVyLHIuX3BvcHVwKCksdC5hZGRDbGFzcyhcImstaW5wdXRcIikub24oXCJrZXlkb3duXCIreCxTKHIuX2tleWRvd24scikpLm9uKFwicGFzdGVcIit4LFMoci5fc2VhcmNoLHIpKS5vbihcImZvY3VzXCIreCxmdW5jdGlvbigpe3IuX3ByZXY9ci5fYWNjZXNzb3IoKSxyLl9wbGFjZWhvbGRlcighMSksaS5hZGRDbGFzcyh5KX0pLm9uKFwiZm9jdXNvdXRcIit4LGZ1bmN0aW9uKCl7ci5fY2hhbmdlKCksci5fcGxhY2Vob2xkZXIoKSxpLnJlbW92ZUNsYXNzKHkpfSkuYXR0cih7YXV0b2NvbXBsZXRlOlwib2ZmXCIscm9sZTpcInRleHRib3hcIixcImFyaWEtaGFzcG9wdXBcIjohMH0pLHIuX2VuYWJsZSgpLHIuX29sZD1yLl9hY2Nlc3NvcigpLHRbMF0uaWQmJnQuYXR0cihcImFyaWEtb3duc1wiLHIudWxbMF0uaWQpLHIuX2FyaWEoKSxyLl9wbGFjZWhvbGRlcigpLG8ubm90aWZ5KHIpfSxvcHRpb25zOntuYW1lOlwiQXV0b0NvbXBsZXRlXCIsZW5hYmxlZDohMCxzdWdnZXN0OiExLHRlbXBsYXRlOlwiXCIsZGF0YVRleHRGaWVsZDpcIlwiLG1pbkxlbmd0aDoxLGRlbGF5OjIwMCxoZWlnaHQ6MjAwLGZpbHRlcjpcInN0YXJ0c3dpdGhcIixpZ25vcmVDYXNlOiEwLGhpZ2hsaWdodEZpcnN0OiExLHNlcGFyYXRvcjpudWxsLHBsYWNlaG9sZGVyOlwiXCIsYW5pbWF0aW9uOnt9LHZhbHVlOm51bGx9LF9kYXRhU291cmNlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLmRhdGFTb3VyY2UmJmUuX3JlZnJlc2hIYW5kbGVyP2UuX3VuYmluZERhdGFTb3VyY2UoKTooZS5fcmVmcmVzaEhhbmRsZXI9UyhlLnJlZnJlc2gsZSksZS5fcHJvZ3Jlc3NIYW5kbGVyPVMoZS5fc2hvd0J1c3ksZSkpLGUuZGF0YVNvdXJjZT1wLmNyZWF0ZShlLm9wdGlvbnMuZGF0YVNvdXJjZSkuYmluZChcImNoYW5nZVwiLGUuX3JlZnJlc2hIYW5kbGVyKS5iaW5kKFwicHJvZ3Jlc3NcIixlLl9wcm9ncmVzc0hhbmRsZXIpfSxzZXREYXRhU291cmNlOmZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucy5kYXRhU291cmNlPWUsdGhpcy5fZGF0YVNvdXJjZSgpfSxldmVudHM6W1wib3BlblwiLFwiY2xvc2VcIixcImNoYW5nZVwiLFwic2VsZWN0XCIsXCJmaWx0ZXJpbmdcIixcImRhdGFCaW5kaW5nXCIsXCJkYXRhQm91bmRcIl0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXt1LmZuLnNldE9wdGlvbnMuY2FsbCh0aGlzLGUpLHRoaXMuX3RlbXBsYXRlKCksdGhpcy5fYWNjZXNzb3JzKCksdGhpcy5fYXJpYSgpfSxfZWRpdGFibGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudCxpPXQud3JhcHBlci5vZmYoeCkscj1lLnJlYWRvbmx5LG89ZS5kaXNhYmxlO3J8fG8/KGkuYWRkQ2xhc3Mobz9iOm0pLnJlbW92ZUNsYXNzKG8/bTpiKSxuLmF0dHIodixvKS5hdHRyKF8scikuYXR0cihmLG8pLmF0dHIoZyxyKSk6KGkuYWRkQ2xhc3MobSkucmVtb3ZlQ2xhc3MoYikub24oQyx0Ll90b2dnbGVIb3Zlciksbi5yZW1vdmVBdHRyKHYpLnJlbW92ZUF0dHIoXykuYXR0cihmLCExKS5hdHRyKGcsITEpKX0sY2xvc2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5fY3VycmVudDt0JiZ0LnJlbW92ZUNsYXNzKHcpLGUuY3VycmVudChudWxsKSxlLnBvcHVwLmNsb3NlKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuZWxlbWVudC5vZmYoeCksZS53cmFwcGVyLm9mZih4KSx1LmZuLmRlc3Ryb3kuY2FsbChlKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBuLGk9dGhpcyxyPWkudWxbMF0sYT1pLnBvcHVwLHM9aS5vcHRpb25zLGM9aS5fZGF0YSgpLGQ9Yy5sZW5ndGgsdT1pLmVsZW1lbnRbMF09PT1sKCk7aS5fYW5ndWxhckl0ZW1zKFwiY2xlYW51cFwiKSxpLnRyaWdnZXIoXCJkYXRhQmluZGluZ1wiKSxyLmlubmVySFRNTD1vLnJlbmRlcihpLnRlbXBsYXRlLGMpLGkuX2hlaWdodChkKSxhLnZpc2libGUoKSYmYS5fcG9zaXRpb24oKSxkJiYocy5oaWdobGlnaHRGaXJzdCYmaS5jdXJyZW50KGUoci5maXJzdENoaWxkKSkscy5zdWdnZXN0JiZ1JiZpLnN1Z2dlc3QoZShyLmZpcnN0Q2hpbGQpKSksaS5fb3BlbiYmKGkuX29wZW49ITEsbj1kP1wib3BlblwiOlwiY2xvc2VcIixpLl90eXBpbmcmJiF1JiYobj1cImNsb3NlXCIpLGFbbl0oKSxpLl90eXBpbmc9dCksaS5fdG91Y2hTY3JvbGxlciYmaS5fdG91Y2hTY3JvbGxlci5yZXNldCgpLGkuX21ha2VVbnNlbGVjdGFibGUoKSxpLl9oaWRlQnVzeSgpLGkuX2FuZ3VsYXJJdGVtcyhcImNvbXBpbGVcIiksaS50cmlnZ2VyKFwiZGF0YUJvdW5kXCIpfSxzZWxlY3Q6ZnVuY3Rpb24oZSl7dGhpcy5fc2VsZWN0KGUpfSxzZWFyY2g6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLHI9bi5vcHRpb25zLG89ci5pZ25vcmVDYXNlLGE9ci5zZXBhcmF0b3I7ZT1lfHxuLl9hY2Nlc3NvcigpLG4uX2N1cnJlbnQ9bnVsbCxjbGVhclRpbWVvdXQobi5fdHlwaW5nKSxhJiYoZT1pKHMobi5lbGVtZW50KVswXSxlLGEpKSx0PWUubGVuZ3RoLCghdHx8dD49ci5taW5MZW5ndGgpJiYobi5fb3Blbj0hMCxuLl9maWx0ZXJTb3VyY2Uoe3ZhbHVlOm8/ZS50b0xvd2VyQ2FzZSgpOmUsb3BlcmF0b3I6ci5maWx0ZXIsZmllbGQ6ci5kYXRhVGV4dEZpZWxkLGlnbm9yZUNhc2U6b30pKX0sc3VnZ2VzdDpmdW5jdGlvbihlKXt2YXIgaSxyPXRoaXMsbz1yLl9sYXN0LGE9ci5fYWNjZXNzb3IoKSxjPXIuZWxlbWVudFswXSxkPXMoYylbMF0scD1yLm9wdGlvbnMuc2VwYXJhdG9yLGY9YS5zcGxpdChwKSxnPW4oZCxhLHApLG09ZDtyZXR1cm4gbz09aC5CQUNLU1BBQ0V8fG89PWguREVMRVRFPyhyLl9sYXN0PXQsdCk6KGU9ZXx8XCJcIixcInN0cmluZ1wiIT10eXBlb2YgZSYmKGk9dS5pbkFycmF5KGVbMF0sci51bFswXSksZT1pPi0xP3IuX3RleHQoci5fZGF0YSgpW2ldKTpcIlwiKSwwPj1kJiYoZD1hLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihlLnRvTG93ZXJDYXNlKCkpKzEpLGk9YS5zdWJzdHJpbmcoMCxkKS5sYXN0SW5kZXhPZihwKSxpPWk+LTE/ZC0oaStwLmxlbmd0aCk6ZCxhPWZbZ10uc3Vic3RyaW5nKDAsaSksZSYmKGk9ZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoYS50b0xvd2VyQ2FzZSgpKSxpPi0xJiYoZT1lLnN1YnN0cmluZyhpK2EubGVuZ3RoKSxtPWQrZS5sZW5ndGgsYSs9ZSkscCYmXCJcIiE9PWZbZi5sZW5ndGgtMV0mJmYucHVzaChcIlwiKSksZltnXT1hLHIuX2FjY2Vzc29yKGYuam9pbihwfHxcIlwiKSksYz09PWwoKSYmcyhjLGQsbSksdCl9LHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD90aGlzLl9hY2Nlc3NvcigpOih0aGlzLl9hY2Nlc3NvcihlKSx0aGlzLl9vbGQ9dGhpcy5fYWNjZXNzb3IoKSx0KX0sX2FjY2Vzc29yOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLmVsZW1lbnRbMF07cmV0dXJuIGU9PT10PyhlPWkudmFsdWUsaS5jbGFzc05hbWUuaW5kZXhPZihcImstcmVhZG9ubHlcIik+LTEmJmU9PT1uLm9wdGlvbnMucGxhY2Vob2xkZXI/XCJcIjplKTooaS52YWx1ZT1udWxsPT09ZT9cIlwiOmUsbi5fcGxhY2Vob2xkZXIoKSx0KX0sX2FjY2VwdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmVsZW1lbnQ7dGhpcy5fZm9jdXMoZSkscyh0LHQudmFsKCkubGVuZ3RoKX0sX2tleWRvd246ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPW4udWxbMF0scj10LmtleUNvZGUsbz1uLl9jdXJyZW50LGE9bi5wb3B1cC52aXNpYmxlKCk7bi5fbGFzdD1yLHI9PT1oLkRPV04/KGEmJm4uX21vdmUobz9vLm5leHQoKTplKGkuZmlyc3RDaGlsZCkpLHQucHJldmVudERlZmF1bHQoKSk6cj09PWguVVA/KGEmJm4uX21vdmUobz9vLnByZXYoKTplKGkubGFzdENoaWxkKSksdC5wcmV2ZW50RGVmYXVsdCgpKTpyPT09aC5FTlRFUnx8cj09PWguVEFCPyhyPT09aC5FTlRFUiYmbi5wb3B1cC52aXNpYmxlKCkmJnQucHJldmVudERlZmF1bHQoKSxuLl9hY2NlcHQobykpOnI9PT1oLkVTQz8obi5wb3B1cC52aXNpYmxlKCkmJnQucHJldmVudERlZmF1bHQoKSxuLmNsb3NlKCkpOm4uX3NlYXJjaCgpfSxfbW92ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2U9ZVswXT9lOm51bGwsdC5jdXJyZW50KGUpLHQub3B0aW9ucy5zdWdnZXN0JiZ0LnN1Z2dlc3QoZSl9LF9oaWRlQnVzeTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7Y2xlYXJUaW1lb3V0KGUuX2J1c3kpLGUuX2xvYWRpbmcuaGlkZSgpLGUuZWxlbWVudC5hdHRyKFwiYXJpYS1idXN5XCIsITEpLGUuX2J1c3k9bnVsbH0sX3Nob3dCdXN5OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9idXN5fHwoZS5fYnVzeT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5lbGVtZW50LmF0dHIoXCJhcmlhLWJ1c3lcIiwhMCksZS5fbG9hZGluZy5zaG93KCl9LDEwMCkpfSxfcGxhY2Vob2xkZXI6ZnVuY3Rpb24oZSl7aWYoIWMpe3ZhciBuLGk9dGhpcyxyPWkuZWxlbWVudCxvPWkub3B0aW9ucy5wbGFjZWhvbGRlcjtpZihvKXtpZihuPXIudmFsKCksZT09PXQmJihlPSFuKSxlfHwobz1uIT09bz9uOlwiXCIpLG49PT1pLl9vbGQmJiFlKXJldHVybjtyLnRvZ2dsZUNsYXNzKFwiay1yZWFkb25seVwiLGUpLnZhbChvKSxvfHxyWzBdIT09ZG9jdW1lbnQuYWN0aXZlRWxlbWVudHx8cyhyWzBdLDAsMCl9fX0sX3NlYXJjaDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7Y2xlYXJUaW1lb3V0KGUuX3R5cGluZyksZS5fdHlwaW5nPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLl9wcmV2IT09ZS5fYWNjZXNzb3IoKSYmKGUuX3ByZXY9ZS5fYWNjZXNzb3IoKSxlLnNlYXJjaCgpKX0sZS5vcHRpb25zLmRlbGF5KX0sX3NlbGVjdDpmdW5jdGlvbih0KXt2YXIgbixpLG89dGhpcyxhPW8ub3B0aW9ucy5zZXBhcmF0b3IsbD1vLl9kYXRhKCk7dD1lKHQpLHRbMF0mJiF0Lmhhc0NsYXNzKHcpJiYoaT11LmluQXJyYXkodFswXSxvLnVsWzBdKSxpPi0xJiYobD1sW2ldLG49by5fdGV4dChsKSxhJiYobj1yKHMoby5lbGVtZW50KVswXSxvLl9hY2Nlc3NvcigpLG4sYSkpLG8uX2FjY2Vzc29yKG4pLG8uX3ByZXY9by5fYWNjZXNzb3IoKSxvLmN1cnJlbnQodC5hZGRDbGFzcyh3KSkpKX0sX2xvYWRlcjpmdW5jdGlvbigpe3RoaXMuX2xvYWRpbmc9ZSgnPHNwYW4gY2xhc3M9XCJrLWljb24gay1sb2FkaW5nXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj48L3NwYW4+JykuaW5zZXJ0QWZ0ZXIodGhpcy5lbGVtZW50KX0sX3RvZ2dsZUhvdmVyOmZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS50b2dnbGVDbGFzcyhrLFwibW91c2VlbnRlclwiPT09dC50eXBlKX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10LmVsZW1lbnQsaT1uWzBdO2U9bi5wYXJlbnQoKSxlLmlzKFwic3Bhbi5rLXdpZGdldFwiKXx8KGU9bi53cmFwKFwiPHNwYW4gLz5cIikucGFyZW50KCkpLGUuYXR0cihcInRhYmluZGV4XCIsLTEpLGUuYXR0cihcInJvbGVcIixcInByZXNlbnRhdGlvblwiKSxlWzBdLnN0eWxlLmNzc1RleHQ9aS5zdHlsZS5jc3NUZXh0LG4uY3NzKHt3aWR0aDpcIjEwMCVcIixoZWlnaHQ6aS5zdHlsZS5oZWlnaHR9KSx0Ll9mb2N1c2VkPXQuZWxlbWVudCx0LndyYXBwZXI9ZS5hZGRDbGFzcyhcImstd2lkZ2V0IGstYXV0b2NvbXBsZXRlIGstaGVhZGVyXCIpLmFkZENsYXNzKGkuY2xhc3NOYW1lKX19KTtkLnBsdWdpbihUKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsdCxuKXtmb3IodmFyIGkscj0wLG89dC5sZW5ndGgtMTtvPnI7KytyKWk9dFtyXSxpIGluIGV8fChlW2ldPXt9KSxlPWVbaV07ZVt0W29dXT1ufXZhciBpPXdpbmRvdy5rZW5kbyxyPWkudWksbz1yLlNlbGVjdCxhPWkuc3VwcG9ydC5tb2JpbGVPUyxzPWkuX2FjdGl2ZUVsZW1lbnQsbD1pLmtleXMsYz1cIi5rZW5kb0Ryb3BEb3duTGlzdFwiLGQ9XCJkaXNhYmxlZFwiLHU9XCJyZWFkb25seVwiLGg9XCJjaGFuZ2VcIixwPVwiay1zdGF0ZS1mb2N1c2VkXCIsZj1cImstc3RhdGUtZGVmYXVsdFwiLGc9XCJrLXN0YXRlLWRpc2FibGVkXCIsbT1cImFyaWEtZGlzYWJsZWRcIix2PVwiYXJpYS1yZWFkb25seVwiLF89XCJrLXN0YXRlLXNlbGVjdGVkXCIseT1cIm1vdXNlZW50ZXJcIitjK1wiIG1vdXNlbGVhdmVcIitjLHc9XCJ0YWJpbmRleFwiLGI9XCJmaWx0ZXJcIixrPVwiYWNjZXB0XCIseD1lLnByb3h5LEM9by5leHRlbmQoe2luaXQ6ZnVuY3Rpb24obixyKXt2YXIgYSxzLGwsZD10aGlzLHU9ciYmci5pbmRleDtkLm5zPWMscj1lLmlzQXJyYXkocik/e2RhdGFTb3VyY2U6cn06cixvLmZuLmluaXQuY2FsbChkLG4scikscj1kLm9wdGlvbnMsbj1kLmVsZW1lbnQub24oXCJmb2N1c1wiK2MseChkLl9mb2N1c0hhbmRsZXIsZCkpLGQuX2lucHV0VGVtcGxhdGUoKSxkLl9yZXNldCgpLGQuX3ByZXY9XCJcIixkLl93b3JkPVwiXCIsZC5fd3JhcHBlcigpLGQuX3RhYmluZGV4KCksZC53cmFwcGVyLmRhdGEodyxkLndyYXBwZXIuYXR0cih3KSksZC5fc3BhbigpLGQuX3BvcHVwKCksZC5fbW9iaWxlKCksZC5fZGF0YVNvdXJjZSgpLGQuX2lnbm9yZUNhc2UoKSxkLl9maWx0ZXJIZWFkZXIoKSxkLl9hcmlhKCksZC5fZW5hYmxlKCksZC5fb2xkSW5kZXg9ZC5zZWxlY3RlZEluZGV4PS0xLGQuX2Nhc2NhZGUoKSx1IT09dCYmKHIuaW5kZXg9dSksci5hdXRvQmluZD9kLmRhdGFTb3VyY2UuZmV0Y2goKTotMT09PWQuc2VsZWN0ZWRJbmRleCYmKGw9ci50ZXh0fHxcIlwiLGx8fChhPXIub3B0aW9uTGFiZWwscz1hJiYwPT09ci5pbmRleCxkLl9pc1NlbGVjdD9sPXM/YTpuLmNoaWxkcmVuKFwiOnNlbGVjdGVkXCIpLnRleHQoKTohblswXS52YWx1ZSYmcyYmKGw9YSkpLGQuX3RleHRBY2Nlc3NvcihsKSksaS5ub3RpZnkoZCl9LG9wdGlvbnM6e25hbWU6XCJEcm9wRG93bkxpc3RcIixlbmFibGVkOiEwLGF1dG9CaW5kOiEwLGluZGV4OjAsdGV4dDpudWxsLHZhbHVlOm51bGwsdGVtcGxhdGU6XCJcIix2YWx1ZVRlbXBsYXRlOlwiXCIsZGVsYXk6NTAwLGhlaWdodDoyMDAsZGF0YVRleHRGaWVsZDpcIlwiLGRhdGFWYWx1ZUZpZWxkOlwiXCIsb3B0aW9uTGFiZWw6XCJcIixjYXNjYWRlRnJvbTpcIlwiLGNhc2NhZGVGcm9tRmllbGQ6XCJcIixpZ25vcmVDYXNlOiEwLGFuaW1hdGlvbjp7fSxmaWx0ZXI6XCJub25lXCIsbWluTGVuZ3RoOjF9LGV2ZW50czpbXCJvcGVuXCIsXCJjbG9zZVwiLGgsXCJzZWxlY3RcIixcImZpbHRlcmluZ1wiLFwiZGF0YUJpbmRpbmdcIixcImRhdGFCb3VuZFwiLFwiY2FzY2FkZVwiXSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe28uZm4uc2V0T3B0aW9ucy5jYWxsKHRoaXMsZSksdGhpcy5fdGVtcGxhdGUoKSx0aGlzLl9pbnB1dFRlbXBsYXRlKCksdGhpcy5fYWNjZXNzb3JzKCksdGhpcy5fZmlsdGVySGVhZGVyKCksdGhpcy5fZW5hYmxlKCksdGhpcy5fYXJpYSgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLndyYXBwZXIub2ZmKGMpLGUuZWxlbWVudC5vZmYoYyksZS5faW5wdXRXcmFwcGVyLm9mZihjKSxlLl9hcnJvdy5vZmYoKSxlLl9hcnJvdz1udWxsLG8uZm4uZGVzdHJveS5jYWxsKGUpfSxvcGVuOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLnBvcHVwLnZpc2libGUoKXx8KGUudWxbMF0uZmlyc3RDaGlsZCYmZS5fc3RhdGUhPT1rPyhlLnBvcHVwLm9wZW4oKSxlLl9mb2N1c0VsZW1lbnQoZS5maWx0ZXJJbnB1dCksZS5fc2Nyb2xsKGUuX2N1cnJlbnQpKTooZS5fb3Blbj0hMCxlLl9zdGF0ZT1cInJlYmluZFwiLGUuZmlsdGVySW5wdXQmJmUuZmlsdGVySW5wdXQudmFsKFwiXCIpLGUuX2ZpbHRlclNvdXJjZSgpKSl9LHRvZ2dsZTpmdW5jdGlvbihlKXt0aGlzLl90b2dnbGUoZSwhMCl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgdCxuLHI9dGhpcyxvPXIuX2RhdGEoKSxhPW8ubGVuZ3RoLHM9ci5vcHRpb25zLm9wdGlvbkxhYmVsLGw9ci5fc3RhdGU9PT1iLGM9ci5lbGVtZW50WzBdO3IudHJpZ2dlcihcImRhdGFCaW5kaW5nXCIpLHIuX2N1cnJlbnQmJnIuY3VycmVudChudWxsKSxyLl9hbmd1bGFySXRlbXMoXCJjbGVhbnVwXCIpLHIudWxbMF0uaW5uZXJIVE1MPWkucmVuZGVyKHIudGVtcGxhdGUsbyksci5fYW5ndWxhckl0ZW1zKFwiY29tcGlsZVwiKSxyLl9oZWlnaHQobD9hfHwxOmEpLHIucG9wdXAudmlzaWJsZSgpJiZyLnBvcHVwLl9wb3NpdGlvbigpLHIuX2lzU2VsZWN0JiYodD1jLnNlbGVjdGVkSW5kZXgsbj1yLnZhbHVlKCksYT9zJiYocz1yLl9vcHRpb24oXCJcIixyLl9vcHRpb25MYWJlbFRleHQocykpKTpuJiYodD0wLHM9ci5fb3B0aW9uKG4sci50ZXh0KCkpKSxyLl9vcHRpb25zKG8scyksYy5zZWxlY3RlZEluZGV4PS0xPT09dD8wOnQpLHIuX2hpZGVCdXN5KCksci5fbWFrZVVuc2VsZWN0YWJsZSgpLGw/ci5jdXJyZW50KGUoci51bFswXS5maXJzdENoaWxkKSk6KHIuX29wZW4mJnIudG9nZ2xlKCEhYSksci5fb3Blbj0hMSxyLl9mZXRjaHx8KGE/ci5fc2VsZWN0SXRlbSgpOnIuX3RleHRBY2Nlc3NvcigpIT09cyYmKHIuZWxlbWVudC52YWwoXCJcIiksci5fdGV4dEFjY2Vzc29yKFwiXCIpKSkpLHIuX2JvdW5kPSEhYSxyLnRyaWdnZXIoXCJkYXRhQm91bmRcIil9LHRleHQ6ZnVuY3Rpb24oZSl7dmFyIG4saSxyPXRoaXMsbz1yLm9wdGlvbnMuaWdub3JlQ2FzZTtyZXR1cm4gZT1udWxsPT09ZT9cIlwiOmUsZT09PXQ/ci5fdGV4dEFjY2Vzc29yKCk6KFwic3RyaW5nXCI9PXR5cGVvZiBlJiYoaT1vP2UudG9Mb3dlckNhc2UoKTplLG49ci5fc2VsZWN0KGZ1bmN0aW9uKGUpe3JldHVybiBlPXIuX3RleHQoZSksbyYmKGU9KGUrXCJcIikudG9Mb3dlckNhc2UoKSksZT09PWl9KSxuJiYoZT1uKSksci5fdGV4dEFjY2Vzc29yKGUpLHQpfSx2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbixpLHI9dGhpcztyZXR1cm4gZT09PXQ/ci5fYWNjZXNzb3IoKToobnVsbCE9PWUmJihlPVwiXCIrZSksci5fc2VsZWN0ZWRWYWx1ZT1lLGk9ZXx8ci5vcHRpb25zLm9wdGlvbkxhYmVsJiYhci5lbGVtZW50WzBdLmRpc2FibGVkJiZcIlwiPT09ZSxpJiZyLl9mZXRjaEl0ZW1zKGUpfHwobj1yLl9pbmRleChlKSxyLnNlbGVjdChuPi0xP246MCkpLHQpfSxfZm9jdXNIYW5kbGVyOmZ1bmN0aW9uKCl7dGhpcy53cmFwcGVyLmZvY3VzKCl9LF9mb2N1c2luSGFuZGxlcjpmdW5jdGlvbigpe3RoaXMuX2lucHV0V3JhcHBlci5hZGRDbGFzcyhwKSx0aGlzLl9wcmV2ZW50PSExfSxfZm9jdXNvdXRIYW5kbGVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX3N0YXRlPT09YixuPXdpbmRvdy5zZWxmIT09d2luZG93LnRvcDtlLl9wcmV2ZW50fHwodCYmZS5fc2VsZWN0KGUuX2N1cnJlbnQpLCghdHx8ZS5kYXRhSXRlbSgpKSYmZS5fdHJpZ2dlckNhc2NhZGUoKSxpLnN1cHBvcnQubW9iaWxlT1MuaW9zJiZuP2UuX2NoYW5nZSgpOmUuX2JsdXIoKSxlLl9pbnB1dFdyYXBwZXIucmVtb3ZlQ2xhc3MocCksZS5fcHJldmVudD0hMCxlLl9vcGVuPSExLGUuZWxlbWVudC5ibHVyKCkpfSxfd3JhcHBlck1vdXNlZG93bjpmdW5jdGlvbigpe3RoaXMuX3ByZXZlbnQ9ISF0aGlzLmZpbHRlcklucHV0fSxfd3JhcHBlckNsaWNrOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0aGlzLl9mb2N1c2VkPXRoaXMud3JhcHBlcix0aGlzLl90b2dnbGUoKX0sX2VkaXRhYmxlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LmVsZW1lbnQsaT1lLmRpc2FibGUscj1lLnJlYWRvbmx5LG89dC53cmFwcGVyLmFkZCh0LmZpbHRlcklucHV0KS5vZmYoYyksYT10Ll9pbnB1dFdyYXBwZXIub2ZmKHkpO3J8fGk/aT8oby5yZW1vdmVBdHRyKHcpLGEuYWRkQ2xhc3MoZykucmVtb3ZlQ2xhc3MoZikpOihhLmFkZENsYXNzKGYpLnJlbW92ZUNsYXNzKGcpLG8ub24oXCJmb2N1c2luXCIrYyx4KHQuX2ZvY3VzaW5IYW5kbGVyLHQpKS5vbihcImZvY3Vzb3V0XCIrYyx4KHQuX2ZvY3Vzb3V0SGFuZGxlcix0KSkpOihuLnJlbW92ZUF0dHIoZCkucmVtb3ZlQXR0cih1KSxhLmFkZENsYXNzKGYpLnJlbW92ZUNsYXNzKGcpLm9uKHksdC5fdG9nZ2xlSG92ZXIpLG8uYXR0cih3LG8uZGF0YSh3KSkuYXR0cihtLCExKS5hdHRyKHYsITEpLm9uKFwia2V5ZG93blwiK2MseCh0Ll9rZXlkb3duLHQpKS5vbihcImZvY3VzaW5cIitjLHgodC5fZm9jdXNpbkhhbmRsZXIsdCkpLm9uKFwiZm9jdXNvdXRcIitjLHgodC5fZm9jdXNvdXRIYW5kbGVyLHQpKS5vbihcIm1vdXNlZG93blwiK2MseCh0Ll93cmFwcGVyTW91c2Vkb3duLHQpKSx0LndyYXBwZXIub24oXCJjbGlja1wiK2MseCh0Ll93cmFwcGVyQ2xpY2ssdCkpLHQuZmlsdGVySW5wdXR8fG8ub24oXCJrZXlwcmVzc1wiK2MseCh0Ll9rZXlwcmVzcyx0KSkpLG4uYXR0cihkLGkpLmF0dHIodSxyKSxvLmF0dHIobSxpKS5hdHRyKHYscil9LF9hY2NlcHQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9bi5maWx0ZXJJbnB1dCYmbi5maWx0ZXJJbnB1dFswXT09PXMoKTtuLl9mb2N1cyhlKSxuLl9mb2N1c0VsZW1lbnQobi53cmFwcGVyKSxpJiZ0PT09bC5UQUImJm4ud3JhcHBlci5mb2N1c291dCgpfSxfb3B0aW9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuJzxvcHRpb24gdmFsdWU9XCInK2UrJ1wiPicrdCtcIjwvb3B0aW9uPlwifSxfb3B0aW9uTGFiZWxUZXh0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLHQ9ZS5kYXRhVGV4dEZpZWxkLG49ZS5vcHRpb25MYWJlbDtyZXR1cm4gbiYmdCYmXCJvYmplY3RcIj09dHlwZW9mIG4/dGhpcy5fdGV4dChuKTpufSxfZGF0YTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm9wdGlvbnMscj10Lm9wdGlvbkxhYmVsLG89dC5kYXRhVGV4dEZpZWxkLGE9dC5kYXRhVmFsdWVGaWVsZCxzPWUuZGF0YVNvdXJjZS52aWV3KCksbD1zLmxlbmd0aCxjPXIsZD0wO2lmKHImJmwpe2ZvcihcIm9iamVjdFwiPT10eXBlb2Ygcj9jPXI6byYmKGM9e30sbz1vLnNwbGl0KFwiLlwiKSxhPWEuc3BsaXQoXCIuXCIpLG4oYyxhLFwiXCIpLG4oYyxvLHIpKSxjPW5ldyBpLmRhdGEuT2JzZXJ2YWJsZUFycmF5KFtjXSk7bD5kO2QrKyljLnB1c2goc1tkXSk7cz1jfXJldHVybiBzfSxfc2VsZWN0SXRlbTpmdW5jdGlvbigpe28uZm4uX3NlbGVjdEl0ZW0uY2FsbCh0aGlzKSx0aGlzLmN1cnJlbnQoKXx8dGhpcy5zZWxlY3QoMCl9LF9rZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxpPWUua2V5Q29kZSxyPWUuYWx0S2V5LG89bi51bFswXTtpPT09bC5MRUZUP2k9bC5VUDppPT09bC5SSUdIVCYmKGk9bC5ET1dOKSxlLmtleUNvZGU9aSx0PW4uX21vdmUoZSksbi5wb3B1cC52aXNpYmxlKCkmJm4uZmlsdGVySW5wdXR8fChpPT09bC5IT01FPyh0PSEwLGUucHJldmVudERlZmF1bHQoKSxuLl9zZWxlY3Qoby5maXJzdENoaWxkKSk6aT09PWwuRU5EJiYodD0hMCxlLnByZXZlbnREZWZhdWx0KCksbi5fc2VsZWN0KG8ubGFzdENoaWxkKSkpLHImJmk9PT1sLlVQJiZuLl9mb2N1c0VsZW1lbnQobi53cmFwcGVyKSxyfHx0fHwhbi5maWx0ZXJJbnB1dHx8bi5fc2VhcmNoKCl9LF9zZWxlY3ROZXh0OmZ1bmN0aW9uKGUsbil7Zm9yKHZhciBpLHI9dGhpcyxvPW4sYT1yLl9kYXRhKCkscz1hLmxlbmd0aCxsPXIub3B0aW9ucy5pZ25vcmVDYXNlLGM9ZnVuY3Rpb24obixpKXtyZXR1cm4gbis9XCJcIixsJiYobj1uLnRvTG93ZXJDYXNlKCkpLDA9PT1uLmluZGV4T2YoZSk/KHIuX3NlbGVjdChpKSxyLl90cmlnZ2VyRXZlbnRzKCksITApOnR9O3M+bjtuKyspaWYoaT1yLl90ZXh0KGFbbl0pLGkmJmMoaSxuKSlyZXR1cm4hMDtpZihvPjAmJnM+bylmb3Iobj0wO28+PW47bisrKWlmKGk9ci5fdGV4dChhW25dKSxpJiZjKGksbikpcmV0dXJuITA7cmV0dXJuITF9LF9rZXlwcmVzczpmdW5jdGlvbihlKXt2YXIgdCxuLHIsbz10aGlzOzAhPT1lLndoaWNoJiZlLmtleUNvZGUhPT1pLmtleXMuRU5URVImJih0PVN0cmluZy5mcm9tQ2hhckNvZGUoZS5jaGFyQ29kZXx8ZS5rZXlDb2RlKSxuPW8uc2VsZWN0ZWRJbmRleCxyPW8uX3dvcmQsby5vcHRpb25zLmlnbm9yZUNhc2UmJih0PXQudG9Mb3dlckNhc2UoKSksXCIgXCI9PT10JiZlLnByZXZlbnREZWZhdWx0KCksby5fbGFzdD09PXQmJjE+PXIubGVuZ3RoJiZuPi0xJiYocnx8KHI9dCksby5fc2VsZWN0TmV4dChyLG4rMSkpfHwoby5fd29yZD1yK3Qsby5fbGFzdD10LG8uX3NlYXJjaCgpKSl9LF9wb3B1cE9wZW46ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnBvcHVwO2Uud3JhcHBlcj1pLndyYXAoZS5lbGVtZW50KSxlLmVsZW1lbnQuY2xvc2VzdChcIi5rbS1yb290XCIpWzBdJiYoZS53cmFwcGVyLmFkZENsYXNzKFwia20tcG9wdXAga20td2lkZ2V0XCIpLHRoaXMud3JhcHBlci5hZGRDbGFzcyhcImttLXdpZGdldFwiKSl9LF9wb3B1cDpmdW5jdGlvbigpe28uZm4uX3BvcHVwLmNhbGwodGhpcyksdGhpcy5wb3B1cC5vbmUoXCJvcGVuXCIseCh0aGlzLl9wb3B1cE9wZW4sdGhpcykpfSxfZm9jdXNFbGVtZW50OmZ1bmN0aW9uKGUpe3ZhciB0PXMoKSxuPXRoaXMud3JhcHBlcixpPXRoaXMuZmlsdGVySW5wdXQscj1lPT09aT9uOmk7aSYmclswXT09PXQmJih0aGlzLl9wcmV2ZW50PSEwLHRoaXMuX2ZvY3VzZWQ9ZS5mb2N1cygpKX0sX2ZpbHRlcjpmdW5jdGlvbihlKXt2YXIgbixpO2UmJihuPXRoaXMsaT1uLm9wdGlvbnMuaWdub3JlQ2FzZSxpJiYoZT1lLnRvTG93ZXJDYXNlKCkpLG4uX3NlbGVjdChmdW5jdGlvbihyKXt2YXIgbz1uLl90ZXh0KHIpO3JldHVybiBvIT09dD8obys9XCJcIixpJiYobz1vLnRvTG93ZXJDYXNlKCkpLDA9PT1vLmluZGV4T2YoZSkpOnR9KSl9LF9zZWFyY2g6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLG49ZS5kYXRhU291cmNlLGk9ZS5zZWxlY3RlZEluZGV4LHI9ZS5fd29yZDtpZihjbGVhclRpbWVvdXQoZS5fdHlwaW5nKSxcIm5vbmVcIiE9PWUub3B0aW9ucy5maWx0ZXIpZS5fdHlwaW5nPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdD1lLmZpbHRlcklucHV0LnZhbCgpO2UuX3ByZXYhPT10JiYoZS5fcHJldj10LGUuc2VhcmNoKHQpKSxlLl90eXBpbmc9bnVsbH0sZS5vcHRpb25zLmRlbGF5KTtlbHNle2lmKGUuX3R5cGluZz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5fd29yZD1cIlwifSxlLm9wdGlvbnMuZGVsYXkpLC0xPT09aSYmKGk9MCksIWUudWxbMF0uZmlyc3RDaGlsZClyZXR1cm4gbi5vbmUoaCxmdW5jdGlvbigpe24uZGF0YSgpWzBdJiZpPi0xJiZlLl9zZWxlY3ROZXh0KHIsaSl9KS5mZXRjaCgpLHQ7ZS5fc2VsZWN0TmV4dChyLGkpLGUuX3RyaWdnZXJFdmVudHMoKX19LF9zZWxlY3Q6ZnVuY3Rpb24oZSl7dmFyIG4saSxvPXRoaXMsYT1vLl9jdXJyZW50LHM9bnVsbDtyZXR1cm4gZT1vLl9nZXQoZSksZSYmZVswXSYmIWUuaGFzQ2xhc3MoXykmJihvLl9zdGF0ZT09PWImJihvLl9zdGF0ZT1rKSxhJiZhLnJlbW92ZUNsYXNzKF8pLGk9ci5MaXN0LmluQXJyYXkoZVswXSxvLnVsWzBdKSxpPi0xJiYoby5zZWxlY3RlZEluZGV4PWkscz1vLl9kYXRhKClbaV0sbj1vLl92YWx1ZShzKSxudWxsPT09biYmKG49XCJcIiksby5fdGV4dEFjY2Vzc29yKHMpLG8uX2FjY2Vzc29yKG4hPT10P246by5fdGV4dChzKSxpKSxvLl9zZWxlY3RlZFZhbHVlPW8uX2FjY2Vzc29yKCksby5jdXJyZW50KGUuYWRkQ2xhc3MoXykpLG8uX29wdGlvbklEJiZvLl9jdXJyZW50LmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITApKSksc30sX3RyaWdnZXJFdmVudHM6ZnVuY3Rpb24oKXt0aGlzLnBvcHVwLnZpc2libGUoKXx8KHRoaXMuX3RyaWdnZXJDYXNjYWRlKCksdGhpcy5fY2hhbmdlKCkpfSxfbW9iaWxlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUucG9wdXAsbj10LmVsZW1lbnQucGFyZW50cyhcIi5rbS1yb290XCIpLmVxKDApO24ubGVuZ3RoJiZhJiYodC5vcHRpb25zLmFuaW1hdGlvbi5vcGVuLmVmZmVjdHM9YS5hbmRyb2lkfHxhLm1lZWdvP1wiZmFkZUluXCI6YS5pb3N8fGEud3A/XCJzbGlkZUluOnVwXCI6dC5vcHRpb25zLmFuaW1hdGlvbi5vcGVuLmVmZmVjdHMpfSxfZmlsdGVySGVhZGVyOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLm9wdGlvbnMsaT1cIm5vbmVcIiE9PW4uZmlsdGVyO3RoaXMuZmlsdGVySW5wdXQmJih0aGlzLmZpbHRlcklucHV0Lm9mZihjKS5wYXJlbnQoKS5yZW1vdmUoKSx0aGlzLmZpbHRlcklucHV0PW51bGwpLGkmJih0PSc8c3BhbiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1pY29uIGstaS1zZWFyY2hcIj5zZWxlY3Q8L3NwYW4+Jyx0aGlzLmZpbHRlcklucHV0PWUoJzxpbnB1dCBjbGFzcz1cImstdGV4dGJveFwiLz4nKS5hdHRyKHtyb2xlOlwibGlzdGJveFwiLFwiYXJpYS1oYXNwb3B1cFwiOiEwLFwiYXJpYS1leHBhbmRlZFwiOiExfSksdGhpcy5saXN0LnByZXBlbmQoZSgnPHNwYW4gY2xhc3M9XCJrLWxpc3QtZmlsdGVyXCIgLz4nKS5hcHBlbmQodGhpcy5maWx0ZXJJbnB1dC5hZGQodCkpKSl9LF9zcGFuOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi53cmFwcGVyLHI9XCJzcGFuLmstaW5wdXRcIjt0PWkuZmluZChyKSx0WzBdfHwoaS5hcHBlbmQoJzxzcGFuIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLWRyb3Bkb3duLXdyYXAgay1zdGF0ZS1kZWZhdWx0XCI+PHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstaW5wdXRcIj4mbmJzcDs8L3NwYW4+PHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstc2VsZWN0XCI+PHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctc1wiPnNlbGVjdDwvc3Bhbj48L3NwYW4+PC9zcGFuPicpLmFwcGVuZChuLmVsZW1lbnQpLHQ9aS5maW5kKHIpKSxuLnNwYW49dCxuLl9pbnB1dFdyYXBwZXI9ZShpWzBdLmZpcnN0Q2hpbGQpLG4uX2Fycm93PWkuZmluZChcIi5rLWljb25cIil9LF93cmFwcGVyOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLG49dC5lbGVtZW50LGk9blswXTtlPW4ucGFyZW50KCksZS5pcyhcInNwYW4uay13aWRnZXRcIil8fChlPW4ud3JhcChcIjxzcGFuIC8+XCIpLnBhcmVudCgpLGVbMF0uc3R5bGUuY3NzVGV4dD1pLnN0eWxlLmNzc1RleHQpLG4uaGlkZSgpLHQuX2ZvY3VzZWQ9dC53cmFwcGVyPWUuYWRkQ2xhc3MoXCJrLXdpZGdldCBrLWRyb3Bkb3duIGstaGVhZGVyXCIpLmFkZENsYXNzKGkuY2xhc3NOYW1lKS5jc3MoXCJkaXNwbGF5XCIsXCJcIikuYXR0cih7dW5zZWxlY3RhYmxlOlwib25cIixyb2xlOlwibGlzdGJveFwiLFwiYXJpYS1oYXNwb3B1cFwiOiEwLFwiYXJpYS1leHBhbmRlZFwiOiExfSl9LF9jbGVhclNlbGVjdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMsbj1lLm9wdGlvbnMub3B0aW9uTGFiZWw7cmV0dXJuIGUub3B0aW9ucy52YWx1ZT1cIlwiLGUuX3NlbGVjdGVkVmFsdWU9XCJcIixlLmRhdGFTb3VyY2UudmlldygpWzBdJiYobnx8ZS5fdXNlclRyaWdnZXJlZCk/KGUuc2VsZWN0KDApLHQpOihlLnNlbGVjdGVkSW5kZXg9LTEsZS5lbGVtZW50LnZhbChcIlwiKSxlLl90ZXh0QWNjZXNzb3IoZS5vcHRpb25zLm9wdGlvbkxhYmVsKSx0KX0sX2lucHV0VGVtcGxhdGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLnZhbHVlVGVtcGxhdGU7bj1uP2kudGVtcGxhdGUobik6ZS5wcm94eShpLnRlbXBsYXRlKFwiIzp0aGlzLl90ZXh0KGRhdGEpI1wiLHt1c2VXaXRoQmxvY2s6ITF9KSx0KSx0LnZhbHVlVGVtcGxhdGU9bn0sX3RleHRBY2Nlc3NvcjpmdW5jdGlvbihyKXt2YXIgbyxhPXRoaXMuZGF0YUl0ZW0oKSxzPXRoaXMub3B0aW9ucyxsPXRoaXMuc3BhbjtyZXR1cm4gcj09PXQ/bC50ZXh0KCk6KGUuaXNQbGFpbk9iamVjdChyKXx8ciBpbnN0YW5jZW9mIGkuZGF0YS5PYnNlcnZhYmxlT2JqZWN0P2E9cjphJiZ0aGlzLl90ZXh0KGEpPT09cnx8KHMuZGF0YVRleHRGaWVsZD8oYT17fSxuKGEscy5kYXRhVGV4dEZpZWxkLnNwbGl0KFwiLlwiKSxyKSxuKGEscy5kYXRhVmFsdWVGaWVsZC5zcGxpdChcIi5cIiksdGhpcy5fYWNjZXNzb3IoKSkpOmE9ciksbz1mdW5jdGlvbigpe3JldHVybntlbGVtZW50czpsLmdldCgpLGRhdGE6W3tkYXRhSXRlbTphfV19fSx0aGlzLmFuZ3VsYXIoXCJjbGVhbnVwXCIsbyksbC5odG1sKHRoaXMudmFsdWVUZW1wbGF0ZShhKSksdGhpcy5hbmd1bGFyKFwiY29tcGlsZVwiLG8pLHQpfX0pO3IucGx1Z2luKEMpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe3ZhciBuPXdpbmRvdy5rZW5kbyxpPW4udWkscj1pLkxpc3Qsbz1pLlNlbGVjdCxhPW4uY2FyZXQscz1uLnN1cHBvcnQsbD1zLnBsYWNlaG9sZGVyLGM9bi5fYWN0aXZlRWxlbWVudCxkPW4ua2V5cyx1PVwiLmtlbmRvQ29tYm9Cb3hcIixoPVwiY2xpY2tcIit1LHA9XCJtb3VzZWRvd25cIit1LGY9XCJkaXNhYmxlZFwiLGc9XCJyZWFkb25seVwiLG09XCJjaGFuZ2VcIix2PVwiay1zdGF0ZS1kZWZhdWx0XCIsXz1cImstc3RhdGUtZm9jdXNlZFwiLHk9XCJrLXN0YXRlLWRpc2FibGVkXCIsdz1cImFyaWEtZGlzYWJsZWRcIixiPVwiYXJpYS1yZWFkb25seVwiLGs9XCJrLXN0YXRlLXNlbGVjdGVkXCIseD1cImZpbHRlclwiLEM9XCJhY2NlcHRcIixTPVwicmViaW5kXCIsVD1cIm1vdXNlZW50ZXJcIit1K1wiIG1vdXNlbGVhdmVcIit1LEQ9bnVsbCxBPWUucHJveHksRT1vLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LGkpe3ZhciByLGE9dGhpcztcbmEubnM9dSxpPWUuaXNBcnJheShpKT97ZGF0YVNvdXJjZTppfTppLG8uZm4uaW5pdC5jYWxsKGEsdCxpKSxpPWEub3B0aW9ucyx0PWEuZWxlbWVudC5vbihcImZvY3VzXCIrdSxBKGEuX2ZvY3VzSGFuZGxlcixhKSksaS5wbGFjZWhvbGRlcj1pLnBsYWNlaG9sZGVyfHx0LmF0dHIoXCJwbGFjZWhvbGRlclwiKSxhLl9yZXNldCgpLGEuX3dyYXBwZXIoKSxhLl9pbnB1dCgpLGEuX3RhYmluZGV4KGEuaW5wdXQpLGEuX3BvcHVwKCksYS5fZGF0YVNvdXJjZSgpLGEuX2lnbm9yZUNhc2UoKSxhLl9lbmFibGUoKSxhLl9vbGRJbmRleD1hLnNlbGVjdGVkSW5kZXg9LTEsYS5fY2FzY2FkZSgpLGEuX2FyaWEoKSxpLmF1dG9CaW5kP2EuX2ZpbHRlclNvdXJjZSgpOihyPWkudGV4dCwhciYmYS5faXNTZWxlY3QmJihyPXQuY2hpbGRyZW4oXCI6c2VsZWN0ZWRcIikudGV4dCgpKSxyJiYoYS5pbnB1dC52YWwociksYS5fcHJldj1yKSkscnx8YS5fcGxhY2Vob2xkZXIoKSxuLm5vdGlmeShhKX0sb3B0aW9uczp7bmFtZTpcIkNvbWJvQm94XCIsZW5hYmxlZDohMCxpbmRleDotMSx0ZXh0Om51bGwsdmFsdWU6bnVsbCxhdXRvQmluZDohMCxkZWxheToyMDAsZGF0YVRleHRGaWVsZDpcIlwiLGRhdGFWYWx1ZUZpZWxkOlwiXCIsbWluTGVuZ3RoOjAsaGVpZ2h0OjIwMCxoaWdobGlnaHRGaXJzdDohMCx0ZW1wbGF0ZTpcIlwiLGZpbHRlcjpcIm5vbmVcIixwbGFjZWhvbGRlcjpcIlwiLHN1Z2dlc3Q6ITEsY2FzY2FkZUZyb206XCJcIixjYXNjYWRlRnJvbUZpZWxkOlwiXCIsaWdub3JlQ2FzZTohMCxhbmltYXRpb246e319LGV2ZW50czpbXCJvcGVuXCIsXCJjbG9zZVwiLG0sXCJzZWxlY3RcIixcImZpbHRlcmluZ1wiLFwiZGF0YUJpbmRpbmdcIixcImRhdGFCb3VuZFwiLFwiY2FzY2FkZVwiXSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe28uZm4uc2V0T3B0aW9ucy5jYWxsKHRoaXMsZSksdGhpcy5fdGVtcGxhdGUoKSx0aGlzLl9hY2Nlc3NvcnMoKSx0aGlzLl9hcmlhKCl9LGN1cnJlbnQ6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4uX2N1cnJlbnQ7cmV0dXJuIGU9PT10P2k6KGkmJmkucmVtb3ZlQ2xhc3Moayksby5mbi5jdXJyZW50LmNhbGwobixlKSx0KX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5pbnB1dC5vZmYodSksZS5lbGVtZW50Lm9mZih1KSxlLl9pbnB1dFdyYXBwZXIub2ZmKHUpLG8uZm4uZGVzdHJveS5jYWxsKGUpfSxfZm9jdXNIYW5kbGVyOmZ1bmN0aW9uKCl7dGhpcy5pbnB1dC5mb2N1cygpfSxfYXJyb3dDbGljazpmdW5jdGlvbigpe3RoaXMuX3RvZ2dsZSgpfSxfaW5wdXRGb2N1czpmdW5jdGlvbigpe3RoaXMuX2lucHV0V3JhcHBlci5hZGRDbGFzcyhfKSx0aGlzLl9wbGFjZWhvbGRlcighMSl9LF9pbnB1dEZvY3Vzb3V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9pbnB1dFdyYXBwZXIucmVtb3ZlQ2xhc3MoXyksY2xlYXJUaW1lb3V0KGUuX3R5cGluZyksZS5fdHlwaW5nPW51bGwsZS5vcHRpb25zLnRleHQhPT1lLmlucHV0LnZhbCgpJiZlLnRleHQoZS50ZXh0KCkpLGUuX3BsYWNlaG9sZGVyKCksZS5fYmx1cigpLGUuZWxlbWVudC5ibHVyKCl9LF9lZGl0YWJsZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5kaXNhYmxlLGk9ZS5yZWFkb25seSxyPXQuX2lucHV0V3JhcHBlci5vZmYodSksbz10LmVsZW1lbnQuYWRkKHQuaW5wdXQub2ZmKHUpKSxhPXQuX2Fycm93LnBhcmVudCgpLm9mZihoK1wiIFwiK3ApO2l8fG4/KHIuYWRkQ2xhc3Mobj95OnYpLnJlbW92ZUNsYXNzKG4/djp5KSxvLmF0dHIoZixuKS5hdHRyKGcsaSkuYXR0cih3LG4pLmF0dHIoYixpKSk6KHIuYWRkQ2xhc3ModikucmVtb3ZlQ2xhc3MoeSkub24oVCx0Ll90b2dnbGVIb3Zlciksby5yZW1vdmVBdHRyKGYpLnJlbW92ZUF0dHIoZykuYXR0cih3LCExKS5hdHRyKGIsITEpLGEub24oaCxBKHQuX2Fycm93Q2xpY2ssdCkpLm9uKHAsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSksdC5pbnB1dC5vbihcImtleWRvd25cIit1LEEodC5fa2V5ZG93bix0KSkub24oXCJmb2N1c1wiK3UsQSh0Ll9pbnB1dEZvY3VzLHQpKS5vbihcImZvY3Vzb3V0XCIrdSxBKHQuX2lucHV0Rm9jdXNvdXQsdCkpKX0sb3BlbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl9zdGF0ZSxuPWUuZGF0YVNvdXJjZS5vcHRpb25zLnNlcnZlckZpbHRlcmluZztlLnBvcHVwLnZpc2libGUoKXx8KCFlLnVsWzBdLmZpcnN0Q2hpbGQmJnQhPT14fHx0PT09QyYmIW4/KGUuX29wZW49ITAsZS5fc3RhdGU9UyxlLl9maWx0ZXJTb3VyY2UoKSk6KGUucG9wdXAub3BlbigpLGUuX3Njcm9sbChlLl9jdXJyZW50KSkpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGkscixvPXRoaXMsYT1vLnVsWzBdLHM9by5vcHRpb25zLGw9by5fc3RhdGUsZD1vLl9kYXRhKCksdT1kLmxlbmd0aCxoPSEwO28uX2FuZ3VsYXJJdGVtcyhcImNsZWFudXBcIiksby50cmlnZ2VyKFwiZGF0YUJpbmRpbmdcIiksYS5pbm5lckhUTUw9bi5yZW5kZXIoby50ZW1wbGF0ZSxkKSxvLl9oZWlnaHQodSksby5wb3B1cC52aXNpYmxlKCkmJm8ucG9wdXAuX3Bvc2l0aW9uKCksby5faXNTZWxlY3QmJihpPW8uZWxlbWVudFswXS5jaGlsZHJlblswXSxsPT09UyYmKG8uX3N0YXRlPVwiXCIpLHI9by5fb3B0aW9uLG8uX29wdGlvbj10LG8uX29wdGlvbnMoZCksciYmclswXS5zZWxlY3RlZD9vLl9jdXN0b20oci52YWwoKSxoKTpvLl9ib3VuZHx8aXx8by5fY3VzdG9tKFwiXCIsaCkpLHUmJihzLmhpZ2hsaWdodEZpcnN0JiZvLmN1cnJlbnQoZShhLmZpcnN0Q2hpbGQpKSxzLnN1Z2dlc3QmJm8uaW5wdXQudmFsKCkmJm8uX3JlcXVlc3QhPT10JiZvLnN1Z2dlc3QoZShhLmZpcnN0Q2hpbGQpKSksbD09PXh8fG8uX2ZldGNofHxvLl9zZWxlY3RJdGVtKCksby5fb3BlbiYmKG8uX29wZW49ITEsby5fdHlwaW5nJiZvLmlucHV0WzBdIT09YygpP28ucG9wdXAuY2xvc2UoKTpvLnRvZ2dsZSghIXUpLG8uX3R5cGluZz1udWxsKSxvLl90b3VjaFNjcm9sbGVyJiZvLl90b3VjaFNjcm9sbGVyLnJlc2V0KCksby5fbWFrZVVuc2VsZWN0YWJsZSgpLG8uX2hpZGVCdXN5KCksby5fYm91bmQ9ITAsby5fYW5ndWxhckl0ZW1zKFwiY29tcGlsZVwiKSxvLnRyaWdnZXIoXCJkYXRhQm91bmRcIil9LHN1Z2dlc3Q6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLG89aS5pbnB1dFswXSxzPWkudGV4dCgpLGw9YShvKVswXSx1PWkuX2xhc3Q7cmV0dXJuIHU9PWQuQkFDS1NQQUNFfHx1PT1kLkRFTEVURT8oaS5fbGFzdD10LHQpOihlPWV8fFwiXCIsXCJzdHJpbmdcIiE9dHlwZW9mIGUmJihuPXIuaW5BcnJheShlWzBdLGkudWxbMF0pLGU9bj4tMT9pLl90ZXh0KGkuZGF0YVNvdXJjZS52aWV3KClbbl0pOlwiXCIpLDA+PWwmJihsPXMudG9Mb3dlckNhc2UoKS5pbmRleE9mKGUudG9Mb3dlckNhc2UoKSkrMSksZT8obj1lLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzLnRvTG93ZXJDYXNlKCkpLG4+LTEmJihzKz1lLnN1YnN0cmluZyhuK3MubGVuZ3RoKSkpOnM9cy5zdWJzdHJpbmcoMCxsKSxzLmxlbmd0aD09PWwmJmV8fChvLnZhbHVlPXMsbz09PWMoKSYmYShvLGwscy5sZW5ndGgpKSx0KX0sdGV4dDpmdW5jdGlvbihlKXt2YXIgbixpLHIsbyxhLHM7cmV0dXJuIGU9bnVsbD09PWU/XCJcIjplLG49dGhpcyxpPW4uaW5wdXRbMF0scj1uLm9wdGlvbnMuaWdub3JlQ2FzZSxvPWUsZT09PXQ/aS52YWx1ZTooYT1uLmRhdGFJdGVtKCksYSYmbi5fdGV4dChhKT09PWUmJihzPW4uX3ZhbHVlKGEpLG51bGw9PT1zP3M9XCJcIjpzKz1cIlwiLHM9PT1uLl9vbGQpPyhuLl90cmlnZ2VyQ2FzY2FkZSgpLHQpOihyJiYobz1vLnRvTG93ZXJDYXNlKCkpLG4uX3NlbGVjdChmdW5jdGlvbihlKXtyZXR1cm4gZT1uLl90ZXh0KGUpLHImJihlPShlK1wiXCIpLnRvTG93ZXJDYXNlKCkpLGU9PT1vfSksMD5uLnNlbGVjdGVkSW5kZXgmJihuLl9jdXN0b20oZSksaS52YWx1ZT1lKSxuLl9wcmV2PWkudmFsdWUsbi5fdHJpZ2dlckNhc2NhZGUoKSx0KSl9LHRvZ2dsZTpmdW5jdGlvbihlKXt0aGlzLl90b2dnbGUoZSwhMCl9LHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuLGk9dGhpcyxyPWkub3B0aW9ucztyZXR1cm4gZT09PXQ/aS5fYWNjZXNzb3IoKToobnVsbCE9PWUmJihlPVwiXCIrZSksaS5fc2VsZWN0ZWRWYWx1ZT1lLCFpLl9vcGVuJiZlJiZpLl9mZXRjaEl0ZW1zKGUpfHwobj1pLl9pbmRleChlKSxuPi0xP2kuc2VsZWN0KG4pOihpLmN1cnJlbnQoRCksaS5fY3VzdG9tKGUpLChyLnZhbHVlIT09ZXx8ci50ZXh0IT09aS5pbnB1dC52YWwoKSkmJihpLnRleHQoZSksaS5fcGxhY2Vob2xkZXIoKSkpLGkuX29sZD1pLl9hY2Nlc3NvcigpLGkuX29sZEluZGV4PWkuc2VsZWN0ZWRJbmRleCksdCl9LF9hY2NlcHQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlP3QuX2ZvY3VzKGUpOih0LnRleHQodC50ZXh0KCkpLHQuX2NoYW5nZSgpKX0sX2N1c3RvbTpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXMscj1pLmVsZW1lbnQsbz1pLl9vcHRpb247aS5fc3RhdGUhPT14fHxufHwoaS5fc3RhdGU9QyksaS5faXNTZWxlY3Q/KG98fChvPWkuX29wdGlvbj1lKFwiPG9wdGlvbi8+XCIpLHIuYXBwZW5kKG8pKSxvLnRleHQodCksb1swXS5zZWxlY3RlZD0hMCk6ci52YWwodCksaS5fc2VsZWN0ZWRWYWx1ZT10fSxfZmlsdGVyOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLm9wdGlvbnMscj1uLmRhdGFTb3VyY2Usbz1pLmlnbm9yZUNhc2UsYT1mdW5jdGlvbihpKXt2YXIgcj1uLl90ZXh0KGkpO3JldHVybiByIT09dD8ocis9XCJcIixcIlwiIT09ciYmXCJcIj09PWU/ITE6KG8mJihyPXIudG9Mb3dlckNhc2UoKSksMD09PXIuaW5kZXhPZihlKSkpOnR9O3JldHVybiBvJiYoZT1lLnRvTG93ZXJDYXNlKCkpLG4udWxbMF0uZmlyc3RDaGlsZD8oLTEhPT1uLl9oaWdobGlnaHQoYSkmJihpLnN1Z2dlc3QmJm4uX2N1cnJlbnQmJm4uc3VnZ2VzdChuLl9jdXJyZW50KSxuLm9wZW4oKSksbi5faGlkZUJ1c3koKSx0KTooci5vbmUobSxmdW5jdGlvbigpe3IudmlldygpWzBdJiZuLnNlYXJjaChlKX0pLmZldGNoKCksdCl9LF9oaWdobGlnaHQ6ZnVuY3Rpb24obil7dmFyIGksbz10aGlzO3JldHVybiBuPT09dHx8bnVsbD09PW4/LTE6KG49by5fZ2V0KG4pLGk9ci5pbkFycmF5KG5bMF0sby51bFswXSksLTE9PWkmJihvLm9wdGlvbnMuaGlnaGxpZ2h0Rmlyc3QmJiFvLnRleHQoKT8obj1vLnVsWzBdLmZpcnN0Q2hpbGQsbiYmKG49ZShuKSkpOm49RCksby5jdXJyZW50KG4pLGkpfSxfaW5wdXQ6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJrLWlucHV0XCIpWzBdLHI9aS5hY2Nlc3NLZXksbz1uLndyYXBwZXIsYT1cImlucHV0LmstaW5wdXRcIixzPWkubmFtZXx8XCJcIjtzJiYocz0nbmFtZT1cIicrcysnX2lucHV0XCIgJyksdD1vLmZpbmQoYSksdFswXXx8KG8uYXBwZW5kKCc8c3BhbiB0YWJpbmRleD1cIi0xXCIgdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstZHJvcGRvd24td3JhcCBrLXN0YXRlLWRlZmF1bHRcIj48aW5wdXQgJytzKydjbGFzcz1cImstaW5wdXRcIiB0eXBlPVwidGV4dFwiIGF1dG9jb21wbGV0ZT1cIm9mZlwiLz48c3BhbiB0YWJpbmRleD1cIi0xXCIgdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstc2VsZWN0XCI+PHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctc1wiPnNlbGVjdDwvc3Bhbj48L3NwYW4+PC9zcGFuPicpLmFwcGVuZChuLmVsZW1lbnQpLHQ9by5maW5kKGEpKSx0WzBdLnN0eWxlLmNzc1RleHQ9aS5zdHlsZS5jc3NUZXh0LGkubWF4TGVuZ3RoPi0xJiYodFswXS5tYXhMZW5ndGg9aS5tYXhMZW5ndGgpLHQuYWRkQ2xhc3MoaS5jbGFzc05hbWUpLnZhbCh0aGlzLm9wdGlvbnMudGV4dHx8aS52YWx1ZSkuY3NzKHt3aWR0aDpcIjEwMCVcIixoZWlnaHQ6aS5zdHlsZS5oZWlnaHR9KS5hdHRyKHtyb2xlOlwiY29tYm9ib3hcIixcImFyaWEtZXhwYW5kZWRcIjohMX0pLnNob3coKSxsJiZ0LmF0dHIoXCJwbGFjZWhvbGRlclwiLG4ub3B0aW9ucy5wbGFjZWhvbGRlciksciYmKGkuYWNjZXNzS2V5PVwiXCIsdFswXS5hY2Nlc3NLZXk9ciksbi5fZm9jdXNlZD1uLmlucHV0PXQsbi5faW5wdXRXcmFwcGVyPWUob1swXS5maXJzdENoaWxkKSxuLl9hcnJvdz1vLmZpbmQoXCIuay1pY29uXCIpLmF0dHIoe3JvbGU6XCJidXR0b25cIix0YWJJbmRleDotMX0pLGkuaWQmJm4uX2Fycm93LmF0dHIoXCJhcmlhLWNvbnRyb2xzXCIsbi51bFswXS5pZCl9LF9rZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmtleUNvZGU7dC5fbGFzdD1uLGNsZWFyVGltZW91dCh0Ll90eXBpbmcpLHQuX3R5cGluZz1udWxsLG49PWQuVEFCfHx0Ll9tb3ZlKGUpfHx0Ll9zZWFyY2goKX0sX3BsYWNlaG9sZGVyOmZ1bmN0aW9uKGUpe2lmKCFsKXt2YXIgbixpPXRoaXMscj1pLmlucHV0LG89aS5vcHRpb25zLnBsYWNlaG9sZGVyO2lmKG8pe2lmKG49aS52YWx1ZSgpLGU9PT10JiYoZT0hbiksci50b2dnbGVDbGFzcyhcImstcmVhZG9ubHlcIixlKSwhZSl7aWYobilyZXR1cm47bz1cIlwifXIudmFsKG8pLG98fHJbMF0hPT1jKCl8fGEoclswXSwwLDApfX19LF9zZWFyY2g6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3R5cGluZz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHQ9ZS50ZXh0KCk7ZS5fcHJldiE9PXQmJihlLl9wcmV2PXQsZS5zZWFyY2godCkpLGUuX3R5cGluZz1udWxsfSxlLm9wdGlvbnMuZGVsYXkpfSxfc2VsZWN0OmZ1bmN0aW9uKGUpe3ZhciBuLGkscj10aGlzLG89ci5fZGF0YSgpLGE9ci5faGlnaGxpZ2h0KGUpO3Iuc2VsZWN0ZWRJbmRleD1hLC0xIT09YSYmKHIuX3N0YXRlPT09eCYmKHIuX3N0YXRlPUMpLHIuX2N1cnJlbnQuYWRkQ2xhc3Moayksbz1vW2FdLG49ci5fdGV4dChvKSxpPXIuX3ZhbHVlKG8pLG51bGw9PT1pJiYoaT1cIlwiKSxyLl9wcmV2PXIuaW5wdXRbMF0udmFsdWU9bixyLl9hY2Nlc3NvcihpIT09dD9pOm4sYSksci5fc2VsZWN0ZWRWYWx1ZT1yLl9hY2Nlc3NvcigpLHIuX3BsYWNlaG9sZGVyKCksci5fb3B0aW9uSUQmJnIuX2N1cnJlbnQuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMCkpfSxfd3JhcHBlcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmVsZW1lbnQsbj10LnBhcmVudCgpO24uaXMoXCJzcGFuLmstd2lkZ2V0XCIpfHwobj10LmhpZGUoKS53cmFwKFwiPHNwYW4gLz5cIikucGFyZW50KCksblswXS5zdHlsZS5jc3NUZXh0PXRbMF0uc3R5bGUuY3NzVGV4dCksZS53cmFwcGVyPW4uYWRkQ2xhc3MoXCJrLXdpZGdldCBrLWNvbWJvYm94IGstaGVhZGVyXCIpLmFkZENsYXNzKHRbMF0uY2xhc3NOYW1lKS5jc3MoXCJkaXNwbGF5XCIsXCJcIil9LF9jbGVhclNlbGVjdGlvbjpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1lLl9zZWxlY3RlZFZhbHVlfHxlLnZhbHVlKCkscj1pJiYtMT09PWUuc2VsZWN0ZWRJbmRleDsodHx8IWl8fHIpJiYobi52YWx1ZShcIlwiKSxuLm9wdGlvbnMudmFsdWU9XCJcIil9fSk7aS5wbHVnaW4oRSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQpe3ZhciBuO2lmKG51bGw9PT1lJiZudWxsIT09dHx8bnVsbCE9PWUmJm51bGw9PT10KXJldHVybiExO2lmKG49ZS5sZW5ndGgsbiE9PXQubGVuZ3RoKXJldHVybiExO2Zvcig7bi0tOylpZihlW25dIT09dFtuXSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBpKHQpe3ZhciBuPXQuZmlyc3RDaGlsZDtyZXR1cm4gbiYmXCJub25lXCI9PT1uLnN0eWxlLmRpc3BsYXkmJihuPW8obixrKSksbj9lKG4pOm59ZnVuY3Rpb24gcih0KXt2YXIgbj10Lmxhc3RDaGlsZDtyZXR1cm4gbiYmXCJub25lXCI9PT1uLnN0eWxlLmRpc3BsYXkmJihuPW8obix4KSksbj9lKG4pOm59ZnVuY3Rpb24gbyhlLHQpe3JldHVybiBlPWVbdF0sZSYmXCJub25lXCI9PT1lLnN0eWxlLmRpc3BsYXkmJihlPW8oZSx0KSksZX12YXIgYT13aW5kb3cua2VuZG8scz1hLnVpLGw9cy5MaXN0LGM9YS5rZXlzLGQ9YS5fYWN0aXZlRWxlbWVudCx1PWEuZGF0YS5PYnNlcnZhYmxlQXJyYXksaD1lLnByb3h5LHA9XCJpZFwiLGY9XCJsaVwiLGc9XCJhY2NlcHRcIixtPVwiZmlsdGVyXCIsdj1cIm9wZW5cIixfPVwiY2xvc2VcIix5PVwiY2hhbmdlXCIsdz1cInByb2dyZXNzXCIsYj1cInNlbGVjdFwiLGs9XCJuZXh0U2libGluZ1wiLHg9XCJwcmV2aW91c1NpYmxpbmdcIixDPScgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIicsUz1cImFyaWEtZGlzYWJsZWRcIixUPVwiYXJpYS1yZWFkb25seVwiLEQ9XCJrLXN0YXRlLWZvY3VzZWRcIixBPVwiay1sb2FkaW5nLWhpZGRlblwiLEU9XCJrLXN0YXRlLWhvdmVyXCIsTT1cImstc3RhdGUtZGlzYWJsZWRcIixQPVwiZGlzYWJsZWRcIixJPVwicmVhZG9ubHlcIix6PVwiLmtlbmRvTXVsdGlTZWxlY3RcIixGPVwiY2xpY2tcIit6LFI9XCJrZXlkb3duXCIreixCPVwibW91c2VlbnRlclwiK3osTD1cIm1vdXNlbGVhdmVcIit6LE89QitcIiBcIitMLEg9L1wiL2csTj1lLmlzQXJyYXksVj1bXCJmb250LWZhbWlseVwiLFwiZm9udC1zaXplXCIsXCJmb250LXN0cmV0Y2hcIixcImZvbnQtc3R5bGVcIixcImZvbnQtd2VpZ2h0XCIsXCJsZXR0ZXItc3BhY2luZ1wiLFwidGV4dC10cmFuc2Zvcm1cIixcImxpbmUtaGVpZ2h0XCJdLFU9bC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG89dGhpcztvLm5zPXosbC5mbi5pbml0LmNhbGwobyx0LG4pLG8uX3dyYXBwZXIoKSxvLl90YWdMaXN0KCksby5faW5wdXQoKSxvLl90ZXh0Q29udGFpbmVyKCksby5fbG9hZGVyKCksby5fdGFiaW5kZXgoby5pbnB1dCksdD1vLmVsZW1lbnQuYXR0cihcIm11bHRpcGxlXCIsXCJtdWx0aXBsZVwiKS5oaWRlKCksbj1vLm9wdGlvbnMscj1uLnZhbHVlLG4ucGxhY2Vob2xkZXJ8fChuLnBsYWNlaG9sZGVyPXQuZGF0YShcInBsYWNlaG9sZGVyXCIpKSxpPXQuYXR0cihwKSxpJiYoby5fdGFnSUQ9aStcIl90YWdfYWN0aXZlXCIsaSs9XCJfdGFnbGlzdFwiLG8udGFnTGlzdC5hdHRyKHAsaSkpLG8uX2FyaWEoaSksby5fZGF0YVNvdXJjZSgpLG8uX2lnbm9yZUNhc2UoKSxvLl9wb3B1cCgpLG8uX3ZhbHVlcz1bXSxvLl9kYXRhSXRlbXM9W10sby5fcmVzZXQoKSxvLl9lbmFibGUoKSxvLl9wbGFjZWhvbGRlcigpLG4uYXV0b0JpbmQ/by5kYXRhU291cmNlLmZldGNoKCk6ciYmKE4ocil8fChyPVtyXSksKGUuaXNQbGFpbk9iamVjdChyWzBdKXx8IW4uZGF0YVZhbHVlRmllbGQpJiYoby5fcmV0cmlldmVEYXRhPSEwLG8uZGF0YVNvdXJjZS5kYXRhKHIpLG8udmFsdWUoby5faW5pdGlhbFZhbHVlcykpKSxhLm5vdGlmeShvKX0sb3B0aW9uczp7bmFtZTpcIk11bHRpU2VsZWN0XCIsZW5hYmxlZDohMCxhdXRvQmluZDohMCxhdXRvQ2xvc2U6ITAsaGlnaGxpZ2h0Rmlyc3Q6ITAsZGF0YVRleHRGaWVsZDpcIlwiLGRhdGFWYWx1ZUZpZWxkOlwiXCIsZmlsdGVyOlwic3RhcnRzd2l0aFwiLGlnbm9yZUNhc2U6ITAsbWluTGVuZ3RoOjAsZGVsYXk6MTAwLHZhbHVlOm51bGwsbWF4U2VsZWN0ZWRJdGVtczpudWxsLGl0ZW1UZW1wbGF0ZTpcIlwiLHRhZ1RlbXBsYXRlOlwiXCIscGxhY2Vob2xkZXI6XCJcIixoZWlnaHQ6MjAwLGFuaW1hdGlvbjp7fX0sZXZlbnRzOlt2LF8seSxiLFwiZmlsdGVyaW5nXCIsXCJkYXRhQmluZGluZ1wiLFwiZGF0YUJvdW5kXCJdLHNldERhdGFTb3VyY2U6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zLmRhdGFTb3VyY2U9ZSx0aGlzLl9kYXRhU291cmNlKCksdGhpcy5vcHRpb25zLmF1dG9CaW5kJiZ0aGlzLmRhdGFTb3VyY2UuZmV0Y2goKX0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXtsLmZuLnNldE9wdGlvbnMuY2FsbCh0aGlzLGUpLHRoaXMuX3RlbXBsYXRlKCksdGhpcy5fYWNjZXNzb3JzKCksdGhpcy5fYXJpYSh0aGlzLnRhZ0xpc3QuYXR0cihwKSl9LGN1cnJlbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY3VycmVudFRhZyhudWxsKSxsLmZuLmN1cnJlbnQuY2FsbCh0aGlzLGUpfSxjdXJyZW50VGFnOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGU9PT10P24uX2N1cnJlbnRUYWc6KG4uX2N1cnJlbnRUYWcmJihuLl9jdXJyZW50VGFnLnJlbW92ZUNsYXNzKEQpLnJlbW92ZUF0dHIocCksbi5pbnB1dC5yZW1vdmVBdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIpKSxlJiYoZS5hZGRDbGFzcyhEKS5hdHRyKHAsbi5fdGFnSUQpLG4uaW5wdXQuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLG4uX3RhZ0lEKSksbi5fY3VycmVudFRhZz1lLHQpfSxkYXRhSXRlbXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YUl0ZW1zfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUubnM7Y2xlYXJUaW1lb3V0KGUuX2J1c3kpLGNsZWFyVGltZW91dChlLl90eXBpbmcpLGUud3JhcHBlci5vZmYodCksZS50YWdMaXN0Lm9mZih0KSxlLmlucHV0Lm9mZih0KSxsLmZuLmRlc3Ryb3kuY2FsbChlKX0sX3dyYXBwZXJNb3VzZWRvd246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiaW5wdXRcIiE9PWUudGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7biYmZS5wcmV2ZW50RGVmYXVsdCgpLC0xPT09ZS50YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoXCJrLWRlbGV0ZVwiKSYmKHQuaW5wdXRbMF0hPT1kKCkmJm4mJnQuaW5wdXQuZm9jdXMoKSwwPT09dC5vcHRpb25zLm1pbkxlbmd0aCYmdC5vcGVuKCkpfSxfaW5wdXRGb2N1czpmdW5jdGlvbigpe3RoaXMuX3BsYWNlaG9sZGVyKCExKSx0aGlzLndyYXBwZXIuYWRkQ2xhc3MoRCl9LF9pbnB1dEZvY3Vzb3V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztjbGVhclRpbWVvdXQoZS5fdHlwaW5nKSxlLndyYXBwZXIucmVtb3ZlQ2xhc3MoRCksZS5fcGxhY2Vob2xkZXIoIWUuX2RhdGFJdGVtc1swXSwhMCksZS5jbG9zZSgpLGUuX3N0YXRlPT09bSYmKGUuX3N0YXRlPWcpLGUuZWxlbWVudC5ibHVyKCl9LF90YWdMaXN0Q2xpY2s6ZnVuY3Rpb24odCl7dGhpcy5fdW5zZWxlY3QoZSh0LnRhcmdldCkuY2xvc2VzdChmKSksdGhpcy5fY2hhbmdlKCksdGhpcy5jbG9zZSgpfSxfZWRpdGFibGU6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPXQuZGlzYWJsZSxyPXQucmVhZG9ubHksbz1uLndyYXBwZXIub2ZmKHopLGE9bi50YWdMaXN0Lm9mZih6KSxzPW4uZWxlbWVudC5hZGQobi5pbnB1dC5vZmYoeikpO3J8fGk/KGk/by5hZGRDbGFzcyhNKTpvLnJlbW92ZUNsYXNzKE0pLHMuYXR0cihQLGkpLmF0dHIoSSxyKS5hdHRyKFMsaSkuYXR0cihULHIpKTooby5yZW1vdmVDbGFzcyhNKS5vbihPLG4uX3RvZ2dsZUhvdmVyKS5vbihcIm1vdXNlZG93blwiK3osaChuLl93cmFwcGVyTW91c2Vkb3duLG4pKSxuLmlucHV0Lm9uKFIsaChuLl9rZXlkb3duLG4pKS5vbihcInBhc3RlXCIreixoKG4uX3NlYXJjaCxuKSkub24oXCJmb2N1c1wiK3osaChuLl9pbnB1dEZvY3VzLG4pKS5vbihcImZvY3Vzb3V0XCIreixoKG4uX2lucHV0Rm9jdXNvdXQsbikpLHMucmVtb3ZlQXR0cihQKS5yZW1vdmVBdHRyKEkpLmF0dHIoUywhMSkuYXR0cihULCExKSxhLm9uKEIsZixmdW5jdGlvbigpe2UodGhpcykuYWRkQ2xhc3MoRSl9KS5vbihMLGYsZnVuY3Rpb24oKXtlKHRoaXMpLnJlbW92ZUNsYXNzKEUpfSkub24oRixcIi5rLWRlbGV0ZVwiLGgobi5fdGFnTGlzdENsaWNrLG4pKSl9LF9jbG9zZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5vcHRpb25zLmF1dG9DbG9zZXx8IWUuX3Zpc2libGVJdGVtcz9lLmNsb3NlKCk6KGUuY3VycmVudChlLm9wdGlvbnMuaGlnaGxpZ2h0Rmlyc3Q/aShlLnVsWzBdKTpudWxsKSxlLnBvcHVwLl9wb3NpdGlvbigpKX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLnBvcHVwLmNsb3NlKCksdGhpcy5jdXJyZW50KG51bGwpfSxvcGVuOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9yZXF1ZXN0JiYoZS5fcmV0cmlldmVEYXRhPSExKSwhZS51bFswXS5maXJzdENoaWxkfHxlLl9zdGF0ZT09PWd8fGUuX3JldHJpZXZlRGF0YT8oZS5fc3RhdGU9XCJcIixlLl9vcGVuPSEwLGUuX3JldHJpZXZlRGF0YT0hMSxlLl9maWx0ZXJTb3VyY2UoKSk6ZS5fdmlzaWJsZUl0ZW1zJiZlLl9hbGxvd1NlbGVjdGlvbigpJiYoZS5wb3B1cC5vcGVuKCksZS5jdXJyZW50KGUub3B0aW9ucy5oaWdobGlnaHRGaXJzdD9pKGUudWxbMF0pOm51bGwpKX0sdG9nZ2xlOmZ1bmN0aW9uKGUpe2U9ZSE9PXQ/ZTohdGhpcy5wb3B1cC52aXNpYmxlKCksdGhpc1tlP3Y6X10oKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPW51bGw7dC50cmlnZ2VyKFwiZGF0YUJpbmRpbmdcIiksZT10Ll9yZW5kZXIodC5kYXRhU291cmNlLnZpZXcoKSksdC5faGVpZ2h0KGUpLHQuX3NldEluaXRpYWxWYWx1ZXMmJih0Ll9zZXRJbml0aWFsVmFsdWVzPSExLHQudmFsdWUodC5faW5pdGlhbFZhbHVlcykpLHQuX29wZW4mJih0Ll9vcGVuPSExLHQudG9nZ2xlKGUpKSx0LnBvcHVwLnZpc2libGUoKSYmKHQucG9wdXAuX3Bvc2l0aW9uKCksdC5vcHRpb25zLmhpZ2hsaWdodEZpcnN0JiYobj1pKHQudWxbMF0pKSksdC5jdXJyZW50KG4pLHQuX3RvdWNoU2Nyb2xsZXImJnQuX3RvdWNoU2Nyb2xsZXIucmVzZXQoKSx0Ll9tYWtlVW5zZWxlY3RhYmxlKCksdC5faGlkZUJ1c3koKSx0LnRyaWdnZXIoXCJkYXRhQm91bmRcIil9LHNlYXJjaDpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcyxyPWkub3B0aW9ucyxvPXIuaWdub3JlQ2FzZSxhPXIuZmlsdGVyLHM9ci5kYXRhVGV4dEZpZWxkLGw9aS5pbnB1dC52YWwoKTtyLnBsYWNlaG9sZGVyPT09bCYmKGw9XCJcIiksY2xlYXJUaW1lb3V0KGkuX3R5cGluZyksZT1cInN0cmluZ1wiPT10eXBlb2YgZT9lOmwsbj1lLmxlbmd0aCwoIW58fG4+PXIubWluTGVuZ3RoKSYmKGkuX3N0YXRlPW0saS5fb3Blbj0hMCx0PXt2YWx1ZTpvP2UudG9Mb3dlckNhc2UoKTplLGZpZWxkOnMsb3BlcmF0b3I6YSxpZ25vcmVDYXNlOm99LGkuX2ZpbHRlclNvdXJjZSh0LGkuX3JldHJpZXZlRGF0YSksaS5fcmV0cmlldmVEYXRhPSExKX0sdmFsdWU6ZnVuY3Rpb24obil7dmFyIGkscj10aGlzLG89ZShyLnRhZ0xpc3RbMF0uY2hpbGRyZW4pLGE9by5sZW5ndGgscz0wO2lmKG49PT10KXJldHVybiByLl92YWx1ZXM7aWYoIXIuX2ZldGNoSXRlbXMobikpe2Zvcig7YT5zO3MrKylyLl91bnNlbGVjdChvLmVxKHMpKTtpZihudWxsIT09bil7Zm9yKG49TihuKXx8biBpbnN0YW5jZW9mIHU/bjpbbl0scz0wLGE9bi5sZW5ndGg7YT5zO3MrKylpPXIuX2luZGV4KG5bc10pLGk+LTEmJnIuX3NlbGVjdChpKTtyLl9vbGQ9ci5fdmFsdWVzLnNsaWNlKCl9fX0sX2RhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5lbGVtZW50LG49ZS5vcHRpb25zLGk9bi5kYXRhU291cmNlfHx7fTtpPU4oaSk/e2RhdGE6aX06aSxpLnNlbGVjdD10LGkuZmllbGRzPVt7ZmllbGQ6bi5kYXRhVGV4dEZpZWxkfSx7ZmllbGQ6bi5kYXRhVmFsdWVGaWVsZH1dLGUuZGF0YVNvdXJjZSYmZS5fcmVmcmVzaEhhbmRsZXI/ZS5fdW5iaW5kRGF0YVNvdXJjZSgpOihlLl9yZWZyZXNoSGFuZGxlcj1oKGUucmVmcmVzaCxlKSxlLl9wcm9ncmVzc0hhbmRsZXI9aChlLl9zaG93QnVzeSxlKSksZS5kYXRhU291cmNlPWEuZGF0YS5EYXRhU291cmNlLmNyZWF0ZShpKS5iaW5kKHksZS5fcmVmcmVzaEhhbmRsZXIpLmJpbmQodyxlLl9wcm9ncmVzc0hhbmRsZXIpfSxfZmV0Y2hJdGVtczpmdW5jdGlvbihuKXt2YXIgaT10aGlzLHI9ZS5pc0FycmF5KG4pJiYwPT09bi5sZW5ndGg7aWYoIXImJm4pcmV0dXJuIGkuX2ZldGNofHxpLnVsWzBdLmZpcnN0Q2hpbGQ/dDooaS5kYXRhU291cmNlLm9uZSh5LGZ1bmN0aW9uKCl7aS52YWx1ZShuKSxpLl9mZXRjaD0hMX0pLGkuX2ZldGNoPSEwLGkuZGF0YVNvdXJjZS5mZXRjaCgpLCEwKX0sX3Jlc2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudCxpPW4uYXR0cihcImZvcm1cIikscj1pP2UoXCIjXCIraSk6bi5jbG9zZXN0KFwiZm9ybVwiKTtyWzBdJiYodC5fcmVzZXRIYW5kbGVyPWZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe3QudmFsdWUodC5faW5pdGlhbFZhbHVlcyksdC5fcGxhY2Vob2xkZXIoKX0pfSx0Ll9mb3JtPXIub24oXCJyZXNldFwiLHQuX3Jlc2V0SGFuZGxlcikpfSxfaW5pdFZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxuPWUub3B0aW9ucy52YWx1ZXx8ZS5lbGVtZW50LnZhbCgpO251bGw9PT1uP249W106KE4obil8fChuPVtuXSksbj1lLl9tYXBWYWx1ZXMobikpLGUuX29sZD1lLl9pbml0aWFsVmFsdWVzPW4sZS5fc2V0SW5pdGlhbFZhbHVlcz1uWzBdIT09dH0sX21hcFZhbHVlczpmdW5jdGlvbih0KXt2YXIgbj10aGlzO3JldHVybiB0JiZlLmlzUGxhaW5PYmplY3QodFswXSkmJih0PWUubWFwKHQsZnVuY3Rpb24oZSl7cmV0dXJuIG4uX3ZhbHVlKGUpfSkpLHR9LF9jaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS52YWx1ZSgpO24odCxlLl9vbGQpfHwoZS5fb2xkPXQuc2xpY2UoKSxlLnRyaWdnZXIoeSksZS5lbGVtZW50LnRyaWdnZXIoeSkpfSxfY2xpY2s6ZnVuY3Rpb24obil7dmFyIGk9dGhpcyxyPWUobi5jdXJyZW50VGFyZ2V0KTtpZighbi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7aWYoaS50cmlnZ2VyKGIse2l0ZW06cn0pKXJldHVybiBpLl9jbG9zZSgpLHQ7aS5fc2VsZWN0KHIpLGkuX2NoYW5nZSgpLGkuX2Nsb3NlKCl9fSxfaXRlbTpmdW5jdGlvbihlLHQpe3JldHVybiBlPWVbdF0oKSxlWzBdJiYhZS5pcyhcIjp2aXNpYmxlXCIpJiYoZT10aGlzLl9pdGVtKGUsdCkpLGV9LF9rZXlkb3duOmZ1bmN0aW9uKG4pe3ZhciBzPXRoaXMsbD1uLmtleUNvZGUsZD1zLl9jdXJyZW50VGFnLHU9cy5fY3VycmVudCxoPXMuaW5wdXQudmFsKCkscD1hLnN1cHBvcnQuaXNSdGwocy53cmFwcGVyKSxmPXMucG9wdXAudmlzaWJsZSgpO2lmKGw9PT1jLkRPV04pe2lmKG4ucHJldmVudERlZmF1bHQoKSwhZilyZXR1cm4gcy5vcGVuKCksdDt1PXU/byh1WzBdLGspOmkocy51bFswXSksdSYmcy5jdXJyZW50KGUodSkpfWVsc2UgaWYobD09PWMuVVApZiYmKHU9dT9vKHVbMF0seCk6cihzLnVsWzBdKSxzLmN1cnJlbnQoZSh1KSkscy5fY3VycmVudFswXXx8cy5jbG9zZSgpKSxuLnByZXZlbnREZWZhdWx0KCk7ZWxzZSBpZihsPT09Yy5MRUZUJiYhcHx8bD09PWMuUklHSFQmJnApaHx8KGQ9ZD9kLnByZXYoKTplKHMudGFnTGlzdFswXS5sYXN0Q2hpbGQpLGRbMF0mJnMuY3VycmVudFRhZyhkKSk7ZWxzZSBpZihsPT09Yy5SSUdIVCYmIXB8fGw9PT1jLkxFRlQmJnApIWgmJmQmJihkPWQubmV4dCgpLHMuY3VycmVudFRhZyhkWzBdP2Q6bnVsbCkpO2Vsc2UgaWYobD09PWMuRU5URVImJmYpe2lmKHUpe2lmKHMudHJpZ2dlcihiLHtpdGVtOnV9KSlyZXR1cm4gcy5fY2xvc2UoKSx0O3MuX3NlbGVjdCh1KX1zLl9jaGFuZ2UoKSxzLl9jbG9zZSgpLG4ucHJldmVudERlZmF1bHQoKX1lbHNlIGw9PT1jLkVTQz8oZj9uLnByZXZlbnREZWZhdWx0KCk6cy5jdXJyZW50VGFnKG51bGwpLHMuY2xvc2UoKSk6bD09PWMuSE9NRT9mP3MuY3VycmVudChpKHMudWxbMF0pKTpofHwoZD1zLnRhZ0xpc3RbMF0uZmlyc3RDaGlsZCxkJiZzLmN1cnJlbnRUYWcoZShkKSkpOmw9PT1jLkVORD9mP3MuY3VycmVudChyKHMudWxbMF0pKTpofHwoZD1zLnRhZ0xpc3RbMF0ubGFzdENoaWxkLGQmJnMuY3VycmVudFRhZyhlKGQpKSk6bCE9PWMuREVMRVRFJiZsIT09Yy5CQUNLU1BBQ0V8fGg/KGNsZWFyVGltZW91dChzLl90eXBpbmcpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtzLl9zY2FsZSgpfSkscy5fc2VhcmNoKCkpOihsIT09Yy5CQUNLU1BBQ0V8fGR8fChkPWUocy50YWdMaXN0WzBdLmxhc3RDaGlsZCkpLGQmJmRbMF0mJihzLl91bnNlbGVjdChkKSxzLl9jaGFuZ2UoKSxzLl9jbG9zZSgpKSl9LF9oaWRlQnVzeTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7Y2xlYXJUaW1lb3V0KGUuX2J1c3kpLGUuaW5wdXQuYXR0cihcImFyaWEtYnVzeVwiLCExKSxlLl9sb2FkaW5nLmFkZENsYXNzKEEpLGUuX3JlcXVlc3Q9ITEsZS5fYnVzeT1udWxsfSxfc2hvd0J1c3lIYW5kbGVyOmZ1bmN0aW9uKCl7dGhpcy5pbnB1dC5hdHRyKFwiYXJpYS1idXN5XCIsITApLHRoaXMuX2xvYWRpbmcucmVtb3ZlQ2xhc3MoQSl9LF9zaG93QnVzeTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fcmVxdWVzdD0hMCxlLl9idXN5fHwoZS5fYnVzeT1zZXRUaW1lb3V0KGgoZS5fc2hvd0J1c3lIYW5kbGVyLGUpLDEwMCkpfSxfcGxhY2Vob2xkZXI6ZnVuY3Rpb24oZSxuKXt2YXIgaT10aGlzLHI9aS5pbnB1dCxvPWQoKTtlPT09dCYmKGU9ITEsclswXSE9PW8mJihlPSFpLl9kYXRhSXRlbXNbMF0pKSxpLl9wcmV2PVwiXCIsci50b2dnbGVDbGFzcyhcImstcmVhZG9ubHlcIixlKS52YWwoZT9pLm9wdGlvbnMucGxhY2Vob2xkZXI6XCJcIiksclswXSE9PW98fG58fGEuY2FyZXQoclswXSwwLDApLGkuX3NjYWxlKCl9LF9zY2FsZTpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQud3JhcHBlcixpPW4ud2lkdGgoKSxyPXQuX3NwYW4udGV4dCh0LmlucHV0LnZhbCgpKTtuLmlzKFwiOnZpc2libGVcIik/ZT1yLndpZHRoKCkrMjU6KHIuYXBwZW5kVG8oZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSxpPWU9ci53aWR0aCgpKzI1LHIuYXBwZW5kVG8obikpLHQuaW5wdXQud2lkdGgoZT5pP2k6ZSl9LF9vcHRpb246ZnVuY3Rpb24oZSxuKXt2YXIgaT1cIjxvcHRpb25cIixyPXRoaXMuX3RleHQoZSksbz10aGlzLl92YWx1ZShlKTtyZXR1cm4gbyE9PXQmJihvKz1cIlwiLC0xIT09by5pbmRleE9mKCdcIicpJiYobz1vLnJlcGxhY2UoSCxcIiZxdW90O1wiKSksaSs9JyB2YWx1ZT1cIicrbysnXCInKSxuJiYoaSs9JyBzZWxlY3RlZD1cInNlbGVjdGVkXCInKSxpKz1cIj5cIixyIT09dCYmKGkrPWEuaHRtbEVuY29kZShyKSksaSs9XCI8L29wdGlvbj5cIn0sX3JlbmRlcjpmdW5jdGlvbihlKXtmb3IodmFyIHQsbixpPXRoaXMscj1lLmxlbmd0aCxvPWkuaXRlbVRlbXBsYXRlLGE9aS5fZGF0YUl0ZW1zLnNsaWNlKDApLHM9MCxsPTAsYz1cIlwiLGQ9XCJcIjtyPmw7bCsrKXQ9ZVtsXSxuPWkuX3NlbGVjdGVkKGEsdCksZCs9byh0LGwsbiksYys9aS5fb3B0aW9uKHQsbiksbnx8KHMrPTEpO2lmKHI9YS5sZW5ndGgpZm9yKGw9MDtyPmw7bCsrKWMrPWkuX29wdGlvbihhW2xdLCEwKTtyZXR1cm4gaS51bFswXS5pbm5lckhUTUw9ZCxpLmVsZW1lbnQuaHRtbChjKSxpLl92aXNpYmxlSXRlbXM9cyxzfSxfc2VsZWN0ZWQ6ZnVuY3Rpb24oZSxuKXt2YXIgaSxyPXRoaXMsbz1yLl90ZXh0LGE9ci5fdmFsdWUscz1hKG4pLGw9ZS5sZW5ndGgsYz0hMSxkPTA7Zm9yKHM9PT10JiYocz1vKG4pKTtsPmQ7ZCsrKWlmKG49ZVtkXSxpPWEobiksaT09PXQmJihpPW8obikpLGkhPT10JiZpPT09cyl7Yz0hMDticmVha31yZXR1cm4gYyYmZS5zcGxpY2UoZCwxKSxjfSxfc2VhcmNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl90eXBpbmc9c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0PWUuaW5wdXQudmFsKCk7ZS5fcHJldiE9PXQmJihlLl9wcmV2PXQsZS5zZWFyY2godCkpfSxlLm9wdGlvbnMuZGVsYXkpfSxfYWxsb3dTZWxlY3Rpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMubWF4U2VsZWN0ZWRJdGVtcztyZXR1cm4gbnVsbD09PWV8fGU+dGhpcy5fdmFsdWVzLmxlbmd0aH0sX3NlbGVjdDpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcyxyPWkuX3ZhbHVlcztpLl9hbGxvd1NlbGVjdGlvbigpJiYoaXNOYU4oZSk/bj1lLmhpZGUoKS5kYXRhKFwiaWR4XCIpOihuPWUsaS51bFswXS5jaGlsZHJlbltuXS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiKSxpLmVsZW1lbnRbMF0uY2hpbGRyZW5bbl0uc2VsZWN0ZWQ9ITAsdD1pLmRhdGFTb3VyY2UudmlldygpW25dLGkudGFnTGlzdC5hcHBlbmQoaS50YWdUZW1wbGF0ZSh0KSksaS5fZGF0YUl0ZW1zLnB1c2godCksci5wdXNoKGkuX2RhdGFWYWx1ZSh0KSksaS5fdmlzaWJsZUl0ZW1zLT0xLGkuY3VycmVudFRhZyhudWxsKSxpLl9wbGFjZWhvbGRlcigpLGkuX2hlaWdodChpLl92aXNpYmxlSXRlbXMpLGkuX3N0YXRlPT09bSYmKGkuX3N0YXRlPWcpKX0sX3Vuc2VsZWN0OmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvLGEscz10aGlzLGw9dC5pbmRleCgpO2lmKHQucmVtb3ZlKCkscy5jdXJyZW50VGFnKG51bGwpLHMuX3ZhbHVlcy5zcGxpY2UobCwxKSxuPXMuX2RhdGFJdGVtcy5zcGxpY2UobCwxKVswXSxpPXMuX2RhdGFWYWx1ZShuKSxsPXMuX2luZGV4KGkpLC0xIT09bCllKHMudWxbMF0uY2hpbGRyZW5bbF0pLnNob3coKSxzLmVsZW1lbnRbMF0uY2hpbGRyZW5bbF0uc2VsZWN0ZWQ9ITEscy5fdmlzaWJsZUl0ZW1zKz0xLHMuX2hlaWdodChzLl92aXNpYmxlSXRlbXMpO2Vsc2UgZm9yKGw9cy5kYXRhU291cmNlLnZpZXcoKS5sZW5ndGgscj1zLmVsZW1lbnRbMF0uY2hpbGRyZW4sYT1yLmxlbmd0aDthPmw7bCsrKWlmKG89cltsXSxvLnZhbHVlPT1pKXtvLnNlbGVjdGVkPSExO2JyZWFrfXMuX3BsYWNlaG9sZGVyKCl9LF90ZW1wbGF0ZTpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQub3B0aW9ucyxpPW4uaXRlbVRlbXBsYXRlLHI9bi50YWdUZW1wbGF0ZSxvPW4uZGF0YVNvdXJjZTt0LmVsZW1lbnRbMF0ubGVuZ3RoJiYhbyYmKG4uZGF0YVRleHRGaWVsZD1uLmRhdGFUZXh0RmllbGR8fFwidGV4dFwiLG4uZGF0YVZhbHVlRmllbGQ9bi5kYXRhVmFsdWVGaWVsZHx8XCJ2YWx1ZVwiKSxlPWEudGVtcGxhdGUoXCIjOlwiK2EuZXhwcihuLmRhdGFUZXh0RmllbGQsXCJkYXRhXCIpK1wiI1wiLHt1c2VXaXRoQmxvY2s6ITF9KSxpPWk/YS50ZW1wbGF0ZShpKTplLHI9cj9hLnRlbXBsYXRlKHIpOmUsdC5pdGVtVGVtcGxhdGU9ZnVuY3Rpb24oZSx0LG4pe3JldHVybic8bGkgdGFiaW5kZXg9XCItMVwiIHJvbGU9XCJvcHRpb25cIiBkYXRhLWlkeD1cIicrdCsnXCIgdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstaXRlbVwiJysobj9DOlwiXCIpK1wiPlwiK2koZSkrXCI8L2xpPlwifSx0LnRhZ1RlbXBsYXRlPWZ1bmN0aW9uKGUpe3JldHVybic8bGkgY2xhc3M9XCJrLWJ1dHRvblwiIHVuc2VsZWN0YWJsZT1cIm9uXCI+PHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIj4nK3IoZSkrJzwvc3Bhbj48c3BhbiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1pY29uIGstZGVsZXRlXCI+ZGVsZXRlPC9zcGFuPjwvbGk+J319LF9pbnB1dDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LmVsZW1lbnRbMF0uYWNjZXNzS2V5LGk9dC5faW5uZXJXcmFwcGVyLmNoaWxkcmVuKFwiaW5wdXQuay1pbnB1dFwiKTtpWzBdfHwoaT1lKCc8aW5wdXQgY2xhc3M9XCJrLWlucHV0XCIgc3R5bGU9XCJ3aWR0aDogMjVweFwiIC8+JykuYXBwZW5kVG8odC5faW5uZXJXcmFwcGVyKSksdC5lbGVtZW50LnJlbW92ZUF0dHIoXCJhY2Nlc3NrZXlcIiksdC5fZm9jdXNlZD10LmlucHV0PWkuYXR0cih7YWNjZXNza2V5Om4sYXV0b2NvbXBsZXRlOlwib2ZmXCIscm9sZTpcImxpc3Rib3hcIixcImFyaWEtZXhwYW5kZWRcIjohMX0pfSxfdGFnTGlzdDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10Ll9pbm5lcldyYXBwZXIuY2hpbGRyZW4oXCJ1bFwiKTtuWzBdfHwobj1lKCc8dWwgcm9sZT1cImxpc3Rib3hcIiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1yZXNldFwiLz4nKS5hcHBlbmRUbyh0Ll9pbm5lcldyYXBwZXIpKSx0LnRhZ0xpc3Q9bn0sX2xvYWRlcjpmdW5jdGlvbigpe3RoaXMuX2xvYWRpbmc9ZSgnPHNwYW4gY2xhc3M9XCJrLWljb24gay1sb2FkaW5nICcrQSsnXCI+PC9zcGFuPicpLmluc2VydEFmdGVyKHRoaXMuaW5wdXQpfSxfdGV4dENvbnRhaW5lcjpmdW5jdGlvbigpe3ZhciB0PWEuZ2V0Q29tcHV0ZWRTdHlsZXModGhpcy5pbnB1dFswXSxWKTt0LnBvc2l0aW9uPVwiYWJzb2x1dGVcIix0LnZpc2liaWxpdHk9XCJoaWRkZW5cIix0LnRvcD0tMzMzMyx0LmxlZnQ9LTMzMzMsdGhpcy5fc3Bhbj1lKFwiPHNwYW4vPlwiKS5jc3ModCkuYXBwZW5kVG8odGhpcy53cmFwcGVyKX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5lbGVtZW50LGk9bi5wYXJlbnQoXCJzcGFuLmstbXVsdGlzZWxlY3RcIik7aVswXXx8KGk9bi53cmFwKCc8ZGl2IGNsYXNzPVwiay13aWRnZXQgay1tdWx0aXNlbGVjdCBrLWhlYWRlclwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgLz4nKS5wYXJlbnQoKSxpWzBdLnN0eWxlLmNzc1RleHQ9blswXS5zdHlsZS5jc3NUZXh0LGUoJzxkaXYgY2xhc3M9XCJrLW11bHRpc2VsZWN0LXdyYXAgay1mbG9hdHdyYXBcIiB1bnNlbGVjdGFibGU9XCJvblwiIC8+JykuaW5zZXJ0QmVmb3JlKG4pKSx0LndyYXBwZXI9aS5hZGRDbGFzcyhuWzBdLmNsYXNzTmFtZSkuY3NzKFwiZGlzcGxheVwiLFwiXCIpLHQuX2lubmVyV3JhcHBlcj1lKGlbMF0uZmlyc3RDaGlsZCl9fSk7cy5wbHVnaW4oVSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQsbil7dmFyIGk9bj9cIiBrLXNsaWRlci1ob3Jpem9udGFsXCI6XCIgay1zbGlkZXItdmVydGljYWxcIixyPWUuc3R5bGU/ZS5zdHlsZTp0LmF0dHIoXCJzdHlsZVwiKSxvPXQuYXR0cihcImNsYXNzXCIpP1wiIFwiK3QuYXR0cihcImNsYXNzXCIpOlwiXCIsYT1cIlwiO3JldHVyblwiYm90dG9tUmlnaHRcIj09ZS50aWNrUGxhY2VtZW50P2E9XCIgay1zbGlkZXItYm90dG9tcmlnaHRcIjpcInRvcExlZnRcIj09ZS50aWNrUGxhY2VtZW50JiYoYT1cIiBrLXNsaWRlci10b3BsZWZ0XCIpLHI9cj9cIiBzdHlsZT0nXCIrcitcIidcIjpcIlwiLFwiPGRpdiBjbGFzcz0nay13aWRnZXQgay1zbGlkZXJcIitpK28rXCInXCIrcitcIj48ZGl2IGNsYXNzPSdrLXNsaWRlci13cmFwXCIrKGUuc2hvd0J1dHRvbnM/XCIgay1zbGlkZXItYnV0dG9uc1wiOlwiXCIpK2ErXCInPjwvZGl2PjwvZGl2PlwifWZ1bmN0aW9uIGkoZSx0LG4pe3ZhciBpPVwiXCI7cmV0dXJuIGk9XCJpbmNyZWFzZVwiPT10P24/XCJrLWktYXJyb3ctZVwiOlwiay1pLWFycm93LW5cIjpuP1wiay1pLWFycm93LXdcIjpcImstaS1hcnJvdy1zXCIsXCI8YSBjbGFzcz0nay1idXR0b24gay1idXR0b24tXCIrdCtcIic+PHNwYW4gY2xhc3M9J2staWNvbiBcIitpK1wiJyB0aXRsZT0nXCIrZVt0K1wiQnV0dG9uVGl0bGVcIl0rXCInPlwiK2VbdCtcIkJ1dHRvblRpdGxlXCJdK1wiPC9zcGFuPjwvYT5cIn1mdW5jdGlvbiByKGUsdCl7dmFyIG4saT1cIjx1bCBjbGFzcz0nay1yZXNldCBrLXNsaWRlci1pdGVtcyc+XCIscj1rLmZsb29yKGModC9lLnNtYWxsU3RlcCkpKzE7Zm9yKG49MDtyPm47bisrKWkrPVwiPGxpIGNsYXNzPSdrLXRpY2snIHJvbGU9J3ByZXNlbnRhdGlvbic+Jm5ic3A7PC9saT5cIjtyZXR1cm4gaSs9XCI8L3VsPlwifWZ1bmN0aW9uIG8oZSx0KXt2YXIgbj10LmlzKFwiaW5wdXRcIik/MToyLGk9Mj09bj9lLmxlZnREcmFnSGFuZGxlVGl0bGU6ZS5kcmFnSGFuZGxlVGl0bGU7cmV0dXJuXCI8ZGl2IGNsYXNzPSdrLXNsaWRlci10cmFjayc+PGRpdiBjbGFzcz0nay1zbGlkZXItc2VsZWN0aW9uJz48IS0tIC0tPjwvZGl2PjxhIGhyZWY9JyMnIGNsYXNzPSdrLWRyYWdoYW5kbGUnIHRpdGxlPSdcIitpK1wiJyByb2xlPSdzbGlkZXInIGFyaWEtdmFsdWVtaW49J1wiK2UubWluK1wiJyBhcmlhLXZhbHVlbWF4PSdcIitlLm1heCtcIicgYXJpYS12YWx1ZW5vdz0nXCIrKG4+MT9lLnNlbGVjdGlvblN0YXJ0fHxlLm1pbjplLnZhbHVlfHxlLm1pbikrXCInPkRyYWc8L2E+XCIrKG4+MT9cIjxhIGhyZWY9JyMnIGNsYXNzPSdrLWRyYWdoYW5kbGUnIHRpdGxlPSdcIitlLnJpZ2h0RHJhZ0hhbmRsZVRpdGxlK1wiJ3JvbGU9J3NsaWRlcicgYXJpYS12YWx1ZW1pbj0nXCIrZS5taW4rXCInIGFyaWEtdmFsdWVtYXg9J1wiK2UubWF4K1wiJyBhcmlhLXZhbHVlbm93PSdcIisoZS5zZWxlY3Rpb25FbmR8fGUubWF4KStcIic+RHJhZzwvYT5cIjpcIlwiKStcIjwvZGl2PlwifWZ1bmN0aW9uIGEoZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiB0K2V9fWZ1bmN0aW9uIHMoZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGV9fWZ1bmN0aW9uIGwoZSl7cmV0dXJuKGUrXCJcIikucmVwbGFjZShcIi5cIixmLmN1bHR1cmVzLmN1cnJlbnQubnVtYmVyRm9ybWF0W1wiLlwiXSl9ZnVuY3Rpb24gYyhlKXtlPXBhcnNlRmxvYXQoZSwxMCk7dmFyIHQ9ay5wb3coMTAscXx8MCk7cmV0dXJuIGsucm91bmQoZSp0KS90fWZ1bmN0aW9uIGQoZSxuKXt2YXIgaT15KGUuZ2V0QXR0cmlidXRlKG4pKTtyZXR1cm4gbnVsbD09PWkmJihpPXQpLGl9ZnVuY3Rpb24gdShlKXtyZXR1cm4gdHlwZW9mIGUhPT1ZfWZ1bmN0aW9uIGgoZSl7cmV0dXJuIDFlNCplfXZhciBwLGY9d2luZG93LmtlbmRvLGc9Zi51aS5XaWRnZXQsbT1mLnVpLkRyYWdnYWJsZSx2PWUuZXh0ZW5kLF89Zi5mb3JtYXQseT1mLnBhcnNlRmxvYXQsdz1lLnByb3h5LGI9ZS5pc0FycmF5LGs9TWF0aCx4PWYuc3VwcG9ydCxDPXgucG9pbnRlcnMsUz14Lm1zUG9pbnRlcnMsVD1cImNoYW5nZVwiLEQ9XCJzbGlkZVwiLEE9XCIuc2xpZGVyXCIsRT1cInRvdWNoc3RhcnRcIitBK1wiIG1vdXNlZG93blwiK0EsTT1DP1wicG9pbnRlcmRvd25cIitBOlM/XCJNU1BvaW50ZXJEb3duXCIrQTpFLFA9XCJ0b3VjaGVuZFwiK0ErXCIgbW91c2V1cFwiK0EsST1DP1wicG9pbnRlcnVwXCI6Uz9cIk1TUG9pbnRlclVwXCIrQTpQLHo9XCJtb3ZlU2VsZWN0aW9uXCIsRj1cImtleWRvd25cIitBLFI9XCJjbGlja1wiK0EsQj1cIm1vdXNlb3ZlclwiK0EsTD1cImZvY3VzXCIrQSxPPVwiYmx1clwiK0EsSD1cIi5rLWRyYWdoYW5kbGVcIixOPVwiLmstc2xpZGVyLXRyYWNrXCIsVj1cIi5rLXRpY2tcIixVPVwiay1zdGF0ZS1zZWxlY3RlZFwiLFc9XCJrLXN0YXRlLWZvY3VzZWRcIixqPVwiay1zdGF0ZS1kZWZhdWx0XCIsRz1cImstc3RhdGUtZGlzYWJsZWRcIixxPTMsJD1cImRpc2FibGVkXCIsWT1cInVuZGVmaW5lZFwiLEs9XCJ0YWJpbmRleFwiLFE9Zi5nZXRUb3VjaGVzLFg9Zy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXM7Zy5mbi5pbml0LmNhbGwoaSxlLHQpLHQ9aS5vcHRpb25zLGkuX2Rpc3RhbmNlPWModC5tYXgtdC5taW4pLGkuX2lzSG9yaXpvbnRhbD1cImhvcml6b250YWxcIj09dC5vcmllbnRhdGlvbixpLl9pc1J0bD1pLl9pc0hvcml6b250YWwmJmYuc3VwcG9ydC5pc1J0bChlKSxpLl9wb3NpdGlvbj1pLl9pc0hvcml6b250YWw/XCJsZWZ0XCI6XCJib3R0b21cIixpLl9zaXplRm49aS5faXNIb3Jpem9udGFsP1wid2lkdGhcIjpcImhlaWdodFwiLGkuX291dGVyU2l6ZT1pLl9pc0hvcml6b250YWw/XCJvdXRlcldpZHRoXCI6XCJvdXRlckhlaWdodFwiLHQudG9vbHRpcC5mb3JtYXQ9dC50b29sdGlwLmVuYWJsZWQ/dC50b29sdGlwLmZvcm1hdHx8XCJ7MH1cIjpcInswfVwiLGkuX2NyZWF0ZUh0bWwoKSxpLndyYXBwZXI9aS5lbGVtZW50LmNsb3Nlc3QoXCIuay1zbGlkZXJcIiksaS5fdHJhY2tEaXY9aS53cmFwcGVyLmZpbmQoTiksaS5fc2V0VHJhY2tEaXZXaWR0aCgpLGkuX21heFNlbGVjdGlvbj1pLl90cmFja0RpdltpLl9zaXplRm5dKCksaS5fc2xpZGVySXRlbXNJbml0KCksaS5fdGFiaW5kZXgoaS53cmFwcGVyLmZpbmQoSCkpLGlbdC5lbmFibGVkP1wiZW5hYmxlXCI6XCJkaXNhYmxlXCJdKCksbj1mLnN1cHBvcnQuaXNSdGwoaS53cmFwcGVyKT8tMToxLGkuX2tleU1hcD17Mzc6YSgtMSpuKnQuc21hbGxTdGVwKSw0MDphKC10LnNtYWxsU3RlcCksMzk6YSgxKm4qdC5zbWFsbFN0ZXApLDM4OmEoK3Quc21hbGxTdGVwKSwzNTpzKHQubWF4KSwzNjpzKHQubWluKSwzMzphKCt0LmxhcmdlU3RlcCksMzQ6YSgtdC5sYXJnZVN0ZXApfSxmLm5vdGlmeShpKX0sZXZlbnRzOltULERdLG9wdGlvbnM6e2VuYWJsZWQ6ITAsbWluOjAsbWF4OjEwLHNtYWxsU3RlcDoxLGxhcmdlU3RlcDo1LG9yaWVudGF0aW9uOlwiaG9yaXpvbnRhbFwiLHRpY2tQbGFjZW1lbnQ6XCJib3RoXCIsdG9vbHRpcDp7ZW5hYmxlZDohMCxmb3JtYXQ6XCJ7MH1cIn19LF9yZXNpemU6ZnVuY3Rpb24oKXt0aGlzLl9zZXRUcmFja0RpdldpZHRoKCksdGhpcy53cmFwcGVyLmZpbmQoXCIuay1zbGlkZXItaXRlbXNcIikucmVtb3ZlKCksdGhpcy5fbWF4U2VsZWN0aW9uPXRoaXMuX3RyYWNrRGl2W3RoaXMuX3NpemVGbl0oKSx0aGlzLl9zbGlkZXJJdGVtc0luaXQoKSx0aGlzLl9yZWZyZXNoKCl9LF9zbGlkZXJJdGVtc0luaXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLG49ZS5fbWF4U2VsZWN0aW9uLygodC5tYXgtdC5taW4pL3Quc21hbGxTdGVwKSxpPWUuX2NhbGN1bGF0ZUl0ZW1zV2lkdGgoay5mbG9vcihlLl9kaXN0YW5jZS90LnNtYWxsU3RlcCkpO1wibm9uZVwiIT10LnRpY2tQbGFjZW1lbnQmJm4+PTImJihlLl90cmFja0Rpdi5iZWZvcmUocih0LGUuX2Rpc3RhbmNlKSksZS5fc2V0SXRlbXNXaWR0aChpKSxlLl9zZXRJdGVtc1RpdGxlKCkpLGUuX2NhbGN1bGF0ZVN0ZXBzKGkpLFwibm9uZVwiIT10LnRpY2tQbGFjZW1lbnQmJm4+PTImJnQubGFyZ2VTdGVwPj10LnNtYWxsU3RlcCYmZS5fc2V0SXRlbXNMYXJnZVRpY2soKX0sZ2V0U2l6ZTpmdW5jdGlvbigpe3JldHVybiBmLmRpbWVuc2lvbnModGhpcy53cmFwcGVyKX0sX3NldFRyYWNrRGl2V2lkdGg6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9MipwYXJzZUZsb2F0KGUuX3RyYWNrRGl2LmNzcyhlLl9pc1J0bD9cInJpZ2h0XCI6ZS5fcG9zaXRpb24pLDEwKTtlLl90cmFja0RpdltlLl9zaXplRm5dKGUud3JhcHBlcltlLl9zaXplRm5dKCktMi10KX0sX3NldEl0ZW1zV2lkdGg6ZnVuY3Rpb24odCl7dmFyIG4saT10aGlzLHI9aS5vcHRpb25zLG89MCxhPXQubGVuZ3RoLTEscz1pLndyYXBwZXIuZmluZChWKSxsPTAsYz0yLGQ9cy5sZW5ndGgsdT0wO2ZvcihuPTA7ZC0yPm47bisrKWUoc1tuKzFdKVtpLl9zaXplRm5dKHRbbl0pO2lmKGkuX2lzSG9yaXpvbnRhbD8oZShzW29dKS5hZGRDbGFzcyhcImstZmlyc3RcIilbaS5fc2l6ZUZuXSh0W2EtMV0pLGUoc1thXSkuYWRkQ2xhc3MoXCJrLWxhc3RcIilbaS5fc2l6ZUZuXSh0W2FdKSk6KGUoc1thXSkuYWRkQ2xhc3MoXCJrLWZpcnN0XCIpW2kuX3NpemVGbl0odFthXSksZShzW29dKS5hZGRDbGFzcyhcImstbGFzdFwiKVtpLl9zaXplRm5dKHRbYS0xXSkpLGkuX2Rpc3RhbmNlJXIuc21hbGxTdGVwIT09MCYmIWkuX2lzSG9yaXpvbnRhbCl7Zm9yKG49MDt0Lmxlbmd0aD5uO24rKyl1Kz10W25dO2w9aS5fbWF4U2VsZWN0aW9uLXUsbCs9cGFyc2VGbG9hdChpLl90cmFja0Rpdi5jc3MoaS5fcG9zaXRpb24pLDEwKStjLGkud3JhcHBlci5maW5kKFwiLmstc2xpZGVyLWl0ZW1zXCIpLmNzcyhcInBhZGRpbmctdG9wXCIsbCl9fSxfc2V0SXRlbXNUaXRsZTpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLG49dC5vcHRpb25zLGk9dC53cmFwcGVyLmZpbmQoVikscj1uLm1pbixvPWkubGVuZ3RoLGE9dC5faXNIb3Jpem9udGFsJiYhdC5faXNSdGw/MDpvLTEscz10Ll9pc0hvcml6b250YWwmJiF0Ll9pc1J0bD9vOi0xLGw9dC5faXNIb3Jpem9udGFsJiYhdC5faXNSdGw/MTotMTthLXMhPT0wO2ErPWwpZShpW2FdKS5hdHRyKFwidGl0bGVcIixfKG4udG9vbHRpcC5mb3JtYXQsYyhyKSkpLHIrPW4uc21hbGxTdGVwfSxfc2V0SXRlbXNMYXJnZVRpY2s6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscj10aGlzLG89ci5vcHRpb25zLGE9ci53cmFwcGVyLmZpbmQoVikscz0wO2lmKGgoby5sYXJnZVN0ZXApJWgoby5zbWFsbFN0ZXApPT09MHx8ci5fZGlzdGFuY2Uvby5sYXJnZVN0ZXA+PTMpZm9yKHIuX2lzSG9yaXpvbnRhbHx8ci5faXNSdGx8fChhPWUubWFrZUFycmF5KGEpLnJldmVyc2UoKSkscz0wO2EubGVuZ3RoPnM7cysrKXQ9ZShhW3NdKSxuPXIuX3ZhbHVlc1tzXSxpPWgobi10aGlzLm9wdGlvbnMubWluKSxpJWgoby5zbWFsbFN0ZXApPT09MCYmaSVoKG8ubGFyZ2VTdGVwKT09PTAmJih0LmFkZENsYXNzKFwiay10aWNrLWxhcmdlXCIpLmh0bWwoXCI8c3BhbiBjbGFzcz0nay1sYWJlbCc+XCIrdC5hdHRyKFwidGl0bGVcIikrXCI8L3NwYW4+XCIpLDAhPT1zJiZzIT09YS5sZW5ndGgtMSYmdC5jc3MoXCJsaW5lLWhlaWdodFwiLHRbci5fc2l6ZUZuXSgpK1wicHhcIikpfSxfY2FsY3VsYXRlSXRlbXNXaWR0aDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscj10aGlzLG89ci5vcHRpb25zLGE9cGFyc2VGbG9hdChyLl90cmFja0Rpdi5jc3Moci5fc2l6ZUZuKSkrMSxzPWEvci5fZGlzdGFuY2U7Zm9yKHIuX2Rpc3RhbmNlL28uc21hbGxTdGVwLWsuZmxvb3Ioci5fZGlzdGFuY2Uvby5zbWFsbFN0ZXApPjAmJihhLT1yLl9kaXN0YW5jZSVvLnNtYWxsU3RlcCpzKSx0PWEvZSxuPVtdLGk9MDtlLTE+aTtpKyspbltpXT10O3JldHVybiBuW2UtMV09bltlXT10LzIsci5fcm91bmRXaWR0aHMobil9LF9yb3VuZFdpZHRoczpmdW5jdGlvbihlKXt2YXIgdCxuPTAsaT1lLmxlbmd0aDtmb3IodD0wO2k+dDt0Kyspbis9ZVt0XS1rLmZsb29yKGVbdF0pLGVbdF09ay5mbG9vcihlW3RdKTtyZXR1cm4gbj1rLnJvdW5kKG4pLHRoaXMuX2FkZEFkZGl0aW9uYWxTaXplKG4sZSl9LF9hZGRBZGRpdGlvbmFsU2l6ZTpmdW5jdGlvbihlLHQpe2lmKDA9PT1lKXJldHVybiB0O3ZhciBuLGk9cGFyc2VGbG9hdCh0Lmxlbmd0aC0xKS9wYXJzZUZsb2F0KDE9PWU/ZTplLTEpO2ZvcihuPTA7ZT5uO24rKyl0W3BhcnNlSW50KGsucm91bmQoaSpuKSwxMCldKz0xO3JldHVybiB0fSxfY2FsY3VsYXRlU3RlcHM6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLGk9bi5vcHRpb25zLHI9aS5taW4sbz0wLGE9ay5jZWlsKG4uX2Rpc3RhbmNlL2kuc21hbGxTdGVwKSxzPTE7aWYoYSs9bi5fZGlzdGFuY2UvaS5zbWFsbFN0ZXAlMT09PTA/MTowLGUuc3BsaWNlKDAsMCwyKmVbYS0yXSksZS5zcGxpY2UoYS0xLDEsMiplLnBvcCgpKSxuLl9waXhlbFN0ZXBzPVtvXSxuLl92YWx1ZXM9W3JdLDAhPT1hKXtmb3IoO2E+czspbys9KGVbcy0xXStlW3NdKS8yLG4uX3BpeGVsU3RlcHNbc109byxyKz1pLnNtYWxsU3RlcCxuLl92YWx1ZXNbc109YyhyKSxzKys7dD1uLl9kaXN0YW5jZSVpLnNtYWxsU3RlcD09PTA/YS0xOmEsbi5fcGl4ZWxTdGVwc1t0XT1uLl9tYXhTZWxlY3Rpb24sbi5fdmFsdWVzW3RdPWkubWF4LG4uX2lzUnRsJiYobi5fcGl4ZWxTdGVwcy5yZXZlcnNlKCksbi5fdmFsdWVzLnJldmVyc2UoKSl9fSxfZ2V0VmFsdWVGcm9tUG9zaXRpb246ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXMscj1pLm9wdGlvbnMsbz1rLm1heChyLnNtYWxsU3RlcCooaS5fbWF4U2VsZWN0aW9uL2kuX2Rpc3RhbmNlKSwwKSxhPTAscz1vLzI7aWYoaS5faXNIb3Jpem9udGFsPyhhPWUtdC5zdGFydFBvaW50LGkuX2lzUnRsJiYoYT1pLl9tYXhTZWxlY3Rpb24tYSkpOmE9dC5zdGFydFBvaW50LWUsaS5fbWF4U2VsZWN0aW9uLShwYXJzZUludChpLl9tYXhTZWxlY3Rpb24lbywxMCktMykvMjxhKXJldHVybiByLm1heDtmb3Iobj0wO2kuX3BpeGVsU3RlcHMubGVuZ3RoPm47bisrKWlmKGsuYWJzKGkuX3BpeGVsU3RlcHNbbl0tYSktMTw9cylyZXR1cm4gYyhpLl92YWx1ZXNbbl0pfSxfZ2V0Rm9ybWF0dGVkVmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbz10aGlzLGE9XCJcIixzPW8ub3B0aW9ucy50b29sdGlwO3JldHVybiBiKGUpPyhpPWVbMF0scj1lWzFdKTp0JiZ0LnR5cGUmJihpPXQuc2VsZWN0aW9uU3RhcnQscj10LnNlbGVjdGlvbkVuZCksdCYmKG49dC50b29sdGlwVGVtcGxhdGUpLCFuJiZzLnRlbXBsYXRlJiYobj1mLnRlbXBsYXRlKHMudGVtcGxhdGUpKSxiKGUpfHx0JiZ0LnR5cGU/bj9hPW4oe3NlbGVjdGlvblN0YXJ0Omksc2VsZWN0aW9uRW5kOnJ9KTooaT1fKHMuZm9ybWF0LGkpLHI9XyhzLmZvcm1hdCxyKSxhPWkrXCIgLSBcIityKToodCYmKHQudmFsPWUpLGE9bj9uKHt2YWx1ZTplfSk6XyhzLmZvcm1hdCxlKSksYX0sX2dldERyYWdnYWJsZUFyZWE6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9Zi5nZXRPZmZzZXQoZS5fdHJhY2tEaXYpO3JldHVybntzdGFydFBvaW50OmUuX2lzSG9yaXpvbnRhbD90LmxlZnQ6dC50b3ArZS5fbWF4U2VsZWN0aW9uLGVuZFBvaW50OmUuX2lzSG9yaXpvbnRhbD90LmxlZnQrZS5fbWF4U2VsZWN0aW9uOnQudG9wfX0sX2NyZWF0ZUh0bWw6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5lbGVtZW50LHI9ZS5vcHRpb25zLGE9dC5maW5kKFwiaW5wdXRcIik7Mj09YS5sZW5ndGg/KGEuZXEoMCkucHJvcChcInZhbHVlXCIsbChyLnNlbGVjdGlvblN0YXJ0KSksYS5lcSgxKS5wcm9wKFwidmFsdWVcIixsKHIuc2VsZWN0aW9uRW5kKSkpOnQucHJvcChcInZhbHVlXCIsbChyLnZhbHVlKSksdC53cmFwKG4ocix0LGUuX2lzSG9yaXpvbnRhbCkpLmhpZGUoKSxyLnNob3dCdXR0b25zJiZ0LmJlZm9yZShpKHIsXCJpbmNyZWFzZVwiLGUuX2lzSG9yaXpvbnRhbCkpLmJlZm9yZShpKHIsXCJkZWNyZWFzZVwiLGUuX2lzSG9yaXpvbnRhbCkpLHQuYmVmb3JlKG8ocix0KSl9LF9mb2N1czpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9dC50YXJnZXQscj1uLnZhbHVlKCksbz1uLl9kcmFnO298fChpPT1uLndyYXBwZXIuZmluZChIKS5lcSgwKVswXT8obz1uLl9maXJzdEhhbmRsZURyYWcsbi5fYWN0aXZlSGFuZGxlPTApOihvPW4uX2xhc3RIYW5kbGVEcmFnLG4uX2FjdGl2ZUhhbmRsZT0xKSxyPXJbbi5fYWN0aXZlSGFuZGxlXSksZShpKS5hZGRDbGFzcyhXK1wiIFwiK1UpLG8mJihuLl9hY3RpdmVIYW5kbGVEcmFnPW8sby5zZWxlY3Rpb25TdGFydD1uLm9wdGlvbnMuc2VsZWN0aW9uU3RhcnQsby5zZWxlY3Rpb25FbmQ9bi5vcHRpb25zLnNlbGVjdGlvbkVuZCxvLl91cGRhdGVUb29sdGlwKHIpKX0sX2ZvY3VzV2l0aE1vdXNlOmZ1bmN0aW9uKHQpe3Q9ZSh0KTt2YXIgbj10aGlzLGk9dC5pcyhIKT90LmluZGV4KCk6MDt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe24ud3JhcHBlci5maW5kKEgpWzI9PWk/MTowXS5mb2N1cygpfSwxKSxuLl9zZXRUb29sdGlwVGltZW91dCgpfSxfYmx1cjpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9bi5fYWN0aXZlSGFuZGxlRHJhZztlKHQudGFyZ2V0KS5yZW1vdmVDbGFzcyhXK1wiIFwiK1UpLGkmJihpLl9yZW1vdmVUb29sdGlwKCksZGVsZXRlIG4uX2FjdGl2ZUhhbmRsZURyYWcsZGVsZXRlIG4uX2FjdGl2ZUhhbmRsZSl9LF9zZXRUb29sdGlwVGltZW91dDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fdG9vbHRpcFRpbWVvdXQ9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdD1lLl9kcmFnfHxlLl9hY3RpdmVIYW5kbGVEcmFnO3QmJnQuX3JlbW92ZVRvb2x0aXAoKX0sMzAwKX0sX2NsZWFyVG9vbHRpcFRpbWVvdXQ6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXM7d2luZG93LmNsZWFyVGltZW91dCh0aGlzLl90b29sdGlwVGltZW91dCksZT10Ll9kcmFnfHx0Ll9hY3RpdmVIYW5kbGVEcmFnLGUmJmUudG9vbHRpcERpdiYmZS50b29sdGlwRGl2LnN0b3AoITAsITEpLmNzcyhcIm9wYWNpdHlcIiwxKX19KSxKPVguZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKG4saSl7dmFyIHIsbz10aGlzO24udHlwZT1cInRleHRcIixpPXYoe30se3ZhbHVlOmQobixcInZhbHVlXCIpLG1pbjpkKG4sXCJtaW5cIiksbWF4OmQobixcIm1heFwiKSxzbWFsbFN0ZXA6ZChuLFwic3RlcFwiKX0saSksbj1lKG4pLGkmJmkuZW5hYmxlZD09PXQmJihpLmVuYWJsZWQ9IW4uaXMoXCJbZGlzYWJsZWRdXCIpKSxYLmZuLmluaXQuY2FsbChvLG4saSksaT1vLm9wdGlvbnMsdShpLnZhbHVlKSYmbnVsbCE9PWkudmFsdWV8fChpLnZhbHVlPWkubWluLG4ucHJvcChcInZhbHVlXCIsbChpLm1pbikpKSxpLnZhbHVlPWsubWF4KGsubWluKGkudmFsdWUsaS5tYXgpLGkubWluKSxyPW8ud3JhcHBlci5maW5kKEgpLG5ldyBKLlNlbGVjdGlvbihyLG8saSksby5fZHJhZz1uZXcgSi5EcmFnKHIsXCJcIixvLGkpfSxvcHRpb25zOntuYW1lOlwiU2xpZGVyXCIsc2hvd0J1dHRvbnM6ITAsaW5jcmVhc2VCdXR0b25UaXRsZTpcIkluY3JlYXNlXCIsZGVjcmVhc2VCdXR0b25UaXRsZTpcIkRlY3JlYXNlXCIsZHJhZ0hhbmRsZVRpdGxlOlwiZHJhZ1wiLHRvb2x0aXA6e2Zvcm1hdDpcInswOiMsIy4jI31cIn0sdmFsdWU6bnVsbH0sZW5hYmxlOmZ1bmN0aW9uKG4pe3ZhciBpLHIsbyxhPXRoaXMscz1hLm9wdGlvbnM7YS5kaXNhYmxlKCksbiE9PSExJiYoYS53cmFwcGVyLnJlbW92ZUNsYXNzKEcpLmFkZENsYXNzKGopLGEud3JhcHBlci5maW5kKFwiaW5wdXRcIikucmVtb3ZlQXR0cigkKSxpPWZ1bmN0aW9uKG4pe3ZhciBpLHIsbyxzPVEobilbMF07aWYocyl7aWYoaT1hLl9pc0hvcml6b250YWw/cy5sb2NhdGlvbi5wYWdlWDpzLmxvY2F0aW9uLnBhZ2VZLHI9YS5fZ2V0RHJhZ2dhYmxlQXJlYSgpLG89ZShuLnRhcmdldCksby5oYXNDbGFzcyhcImstZHJhZ2hhbmRsZVwiKSlyZXR1cm4gby5hZGRDbGFzcyhXK1wiIFwiK1UpLHQ7YS5fdXBkYXRlKGEuX2dldFZhbHVlRnJvbVBvc2l0aW9uKGkscikpLGEuX2ZvY3VzV2l0aE1vdXNlKG4udGFyZ2V0KSxhLl9kcmFnLmRyYWdzdGFydChuKSxuLnByZXZlbnREZWZhdWx0KCl9fSxhLndyYXBwZXIuZmluZChWK1wiLCBcIitOKS5vbihNLGkpLmVuZCgpLm9uKE0sZnVuY3Rpb24oKXtlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkub25lKFwic2VsZWN0c3RhcnRcIixmLnByZXZlbnREZWZhdWx0KX0pLm9uKEksZnVuY3Rpb24oKXthLl9kcmFnLl9lbmQoKX0pLGEud3JhcHBlci5maW5kKEgpLmF0dHIoSywwKS5vbihQLGZ1bmN0aW9uKCl7YS5fc2V0VG9vbHRpcFRpbWVvdXQoKX0pLm9uKFIsZnVuY3Rpb24oZSl7YS5fZm9jdXNXaXRoTW91c2UoZS50YXJnZXQpLGUucHJldmVudERlZmF1bHQoKX0pLm9uKEwsdyhhLl9mb2N1cyxhKSkub24oTyx3KGEuX2JsdXIsYSkpLHI9dyhmdW5jdGlvbihlKXt2YXIgdD1hLl9uZXh0VmFsdWVCeUluZGV4KGEuX3ZhbHVlSW5kZXgrMSplKTthLl9zZXRWYWx1ZUluUmFuZ2UodCksYS5fZHJhZy5fdXBkYXRlVG9vbHRpcCh0KX0sYSkscy5zaG93QnV0dG9ucyYmKG89dyhmdW5jdGlvbihlLHQpe3RoaXMuX2NsZWFyVG9vbHRpcFRpbWVvdXQoKSwoMT09PWUud2hpY2h8fHgudG91Y2gmJjA9PT1lLndoaWNoKSYmKHIodCksdGhpcy50aW1lb3V0PXNldFRpbWVvdXQodyhmdW5jdGlvbigpe3RoaXMudGltZXI9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtyKHQpfSw2MCl9LHRoaXMpLDIwMCkpfSxhKSxhLndyYXBwZXIuZmluZChcIi5rLWJ1dHRvblwiKS5vbihQLHcoZnVuY3Rpb24oZSl7dGhpcy5fY2xlYXJUaW1lcigpLGEuX2ZvY3VzV2l0aE1vdXNlKGUudGFyZ2V0KX0sYSkpLm9uKEIsZnVuY3Rpb24odCl7ZSh0LmN1cnJlbnRUYXJnZXQpLmFkZENsYXNzKFwiay1zdGF0ZS1ob3ZlclwiKX0pLm9uKFwibW91c2VvdXRcIitBLHcoZnVuY3Rpb24odCl7ZSh0LmN1cnJlbnRUYXJnZXQpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1ob3ZlclwiKSx0aGlzLl9jbGVhclRpbWVyKCl9LGEpKS5lcSgwKS5vbihFLHcoZnVuY3Rpb24oZSl7byhlLDEpfSxhKSkuY2xpY2soITEpLmVuZCgpLmVxKDEpLm9uKEUsdyhmdW5jdGlvbihlKXtvKGUsLTEpfSxhKSkuY2xpY2soZi5wcmV2ZW50RGVmYXVsdCkpLGEud3JhcHBlci5maW5kKEgpLm9mZihGLCExKS5vbihGLHcodGhpcy5fa2V5ZG93bixhKSkscy5lbmFibGVkPSEwKX0sZGlzYWJsZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC53cmFwcGVyLnJlbW92ZUNsYXNzKGopLmFkZENsYXNzKEcpLGUodC5lbGVtZW50KS5wcm9wKCQsJCksdC53cmFwcGVyLmZpbmQoXCIuay1idXR0b25cIikub2ZmKEUpLm9uKEUsZi5wcmV2ZW50RGVmYXVsdCkub2ZmKFApLm9uKFAsZi5wcmV2ZW50RGVmYXVsdCkub2ZmKFwibW91c2VsZWF2ZVwiK0EpLm9uKFwibW91c2VsZWF2ZVwiK0EsZi5wcmV2ZW50RGVmYXVsdCkub2ZmKEIpLm9uKEIsZi5wcmV2ZW50RGVmYXVsdCksdC53cmFwcGVyLmZpbmQoVitcIiwgXCIrTikub2ZmKE0pLm9mZihJKSx0LndyYXBwZXIuZmluZChIKS5hdHRyKEssLTEpLm9mZihQKS5vZmYoRikub2ZmKFIpLm9mZihMKS5vZmYoTyksdC5vcHRpb25zLmVuYWJsZWQ9ITF9LF91cGRhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQudmFsdWUoKSE9ZTt0LnZhbHVlKGUpLG4mJnQudHJpZ2dlcihULHt2YWx1ZTp0Lm9wdGlvbnMudmFsdWV9KX0sdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4ub3B0aW9ucztyZXR1cm4gZT1jKGUpLGlzTmFOKGUpP2kudmFsdWU6KGU+PWkubWluJiZpLm1heD49ZSYmaS52YWx1ZSE9ZSYmKG4uZWxlbWVudC5wcm9wKFwidmFsdWVcIixsKGUpKSxpLnZhbHVlPWUsbi5fcmVmcmVzaEFyaWFBdHRyKGUpLG4uX3JlZnJlc2goKSksdCl9LF9yZWZyZXNoOmZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKHose3ZhbHVlOnRoaXMub3B0aW9ucy52YWx1ZX0pfSxfcmVmcmVzaEFyaWFBdHRyOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxpPW4uX2RyYWc7dD1pJiZpLl90b29sdGlwRGl2P2kuX3Rvb2x0aXBEaXYudGV4dCgpOm4uX2dldEZvcm1hdHRlZFZhbHVlKGUsbnVsbCksdGhpcy53cmFwcGVyLmZpbmQoSCkuYXR0cihcImFyaWEtdmFsdWVub3dcIixlKS5hdHRyKFwiYXJpYS12YWx1ZXRleHRcIix0KX0sX2NsZWFyVGltZXI6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KSxjbGVhckludGVydmFsKHRoaXMudGltZXIpfSxfa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2Uua2V5Q29kZSBpbiB0Ll9rZXlNYXAmJih0Ll9jbGVhclRvb2x0aXBUaW1lb3V0KCksdC5fc2V0VmFsdWVJblJhbmdlKHQuX2tleU1hcFtlLmtleUNvZGVdKHQub3B0aW9ucy52YWx1ZSkpLHQuX2RyYWcuX3VwZGF0ZVRvb2x0aXAodC52YWx1ZSgpKSxlLnByZXZlbnREZWZhdWx0KCkpXG59LF9zZXRWYWx1ZUluUmFuZ2U6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4ub3B0aW9ucztyZXR1cm4gZT1jKGUpLGlzTmFOKGUpPyhuLl91cGRhdGUoaS5taW4pLHQpOihlPWsubWF4KGsubWluKGUsaS5tYXgpLGkubWluKSxuLl91cGRhdGUoZSksdCl9LF9uZXh0VmFsdWVCeUluZGV4OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3ZhbHVlcy5sZW5ndGg7cmV0dXJuIHRoaXMuX2lzUnRsJiYoZT10LTEtZSksdGhpcy5fdmFsdWVzW2subWF4KDAsay5taW4oZSx0LTEpKV19LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2cuZm4uZGVzdHJveS5jYWxsKGUpLGUud3JhcHBlci5vZmYoQSkuZmluZChcIi5rLWJ1dHRvblwiKS5vZmYoQSkuZW5kKCkuZmluZChIKS5vZmYoQSkuZW5kKCkuZmluZChWK1wiLCBcIitOKS5vZmYoQSkuZW5kKCksZS5fZHJhZy5kcmFnZ2FibGUuZGVzdHJveSgpLGUuX2RyYWcuX3JlbW92ZVRvb2x0aXAoITApfX0pO0ouU2VsZWN0aW9uPWZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiBpKGkpe3ZhciByPWktbi5taW4sbz10Ll92YWx1ZUluZGV4PWsuY2VpbChjKHIvbi5zbWFsbFN0ZXApKSxhPXBhcnNlSW50KHQuX3BpeGVsU3RlcHNbb10sMTApLHM9dC5fdHJhY2tEaXYuZmluZChcIi5rLXNsaWRlci1zZWxlY3Rpb25cIiksbD1wYXJzZUludChlW3QuX291dGVyU2l6ZV0oKS8yLDEwKSxkPXQuX2lzUnRsPzI6MDtzW3QuX3NpemVGbl0odC5faXNSdGw/dC5fbWF4U2VsZWN0aW9uLWE6YSksZS5jc3ModC5fcG9zaXRpb24sYS1sLWQpfWkobi52YWx1ZSksdC5iaW5kKFtULEQsel0sZnVuY3Rpb24oZSl7aShwYXJzZUZsb2F0KGUudmFsdWUsMTApKX0pfSxKLkRyYWc9ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9dGhpcztyLm93bmVyPW4sci5vcHRpb25zPWksci5lbGVtZW50PWUsci50eXBlPXQsci5kcmFnZ2FibGU9bmV3IG0oZSx7ZGlzdGFuY2U6MCxkcmFnc3RhcnQ6dyhyLl9kcmFnc3RhcnQsciksZHJhZzp3KHIuZHJhZyxyKSxkcmFnZW5kOncoci5kcmFnZW5kLHIpLGRyYWdjYW5jZWw6dyhyLmRyYWdjYW5jZWwscil9KSxlLmNsaWNrKCExKX0sSi5EcmFnLnByb3RvdHlwZT17ZHJhZ3N0YXJ0OmZ1bmN0aW9uKGUpe3RoaXMub3duZXIuX2FjdGl2ZURyYWdIYW5kbGU9dGhpcyx0aGlzLmRyYWdnYWJsZS51c2VyRXZlbnRzLmNhbmNlbCgpLHRoaXMuZHJhZ2dhYmxlLnVzZXJFdmVudHMuX3N0YXJ0KGUpfSxfZHJhZ3N0YXJ0OmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMscj1pLm93bmVyLG89aS5vcHRpb25zO3JldHVybiBvLmVuYWJsZWQ/KHRoaXMub3duZXIuX2FjdGl2ZURyYWdIYW5kbGU9dGhpcyxyLmVsZW1lbnQub2ZmKEIpLHIud3JhcHBlci5maW5kKFwiLlwiK1cpLnJlbW92ZUNsYXNzKFcrXCIgXCIrVSksaS5lbGVtZW50LmFkZENsYXNzKFcrXCIgXCIrVSksZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmNzcyhcImN1cnNvclwiLFwicG9pbnRlclwiKSxpLmRyYWdhYmxlQXJlYT1yLl9nZXREcmFnZ2FibGVBcmVhKCksaS5zdGVwPWsubWF4KG8uc21hbGxTdGVwKihyLl9tYXhTZWxlY3Rpb24vci5fZGlzdGFuY2UpLDApLGkudHlwZT8oaS5zZWxlY3Rpb25TdGFydD1vLnNlbGVjdGlvblN0YXJ0LGkuc2VsZWN0aW9uRW5kPW8uc2VsZWN0aW9uRW5kLHIuX3NldFpJbmRleChpLnR5cGUpKTppLm9sZFZhbD1pLnZhbD1vLnZhbHVlLGkuX3JlbW92ZVRvb2x0aXAoITApLGkuX2NyZWF0ZVRvb2x0aXAoKSx0KToobi5wcmV2ZW50RGVmYXVsdCgpLHQpfSxfY3JlYXRlVG9vbHRpcDpmdW5jdGlvbigpe3ZhciB0LG4saT10aGlzLHI9aS5vd25lcixvPWkub3B0aW9ucy50b29sdGlwLGE9XCJcIixzPWUod2luZG93KTtvLmVuYWJsZWQmJihvLnRlbXBsYXRlJiYodD1pLnRvb2x0aXBUZW1wbGF0ZT1mLnRlbXBsYXRlKG8udGVtcGxhdGUpKSxlKFwiLmstc2xpZGVyLXRvb2x0aXBcIikucmVtb3ZlKCksaS50b29sdGlwRGl2PWUoXCI8ZGl2IGNsYXNzPSdrLXdpZGdldCBrLXRvb2x0aXAgay1zbGlkZXItdG9vbHRpcCc+PCEtLSAtLT48L2Rpdj5cIikuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSksYT1yLl9nZXRGb3JtYXR0ZWRWYWx1ZShpLnZhbHx8ci52YWx1ZSgpLGkpLGkudHlwZXx8KG49XCJrLWNhbGxvdXQtXCIrKHIuX2lzSG9yaXpvbnRhbD9cInNcIjpcImVcIiksaS50b29sdGlwSW5uZXJEaXY9XCI8ZGl2IGNsYXNzPSdrLWNhbGxvdXQgXCIrbitcIic+PCEtLSAtLT48L2Rpdj5cIixhKz1pLnRvb2x0aXBJbm5lckRpdiksaS50b29sdGlwRGl2Lmh0bWwoYSksaS5fc2Nyb2xsT2Zmc2V0PXt0b3A6cy5zY3JvbGxUb3AoKSxsZWZ0OnMuc2Nyb2xsTGVmdCgpfSxpLm1vdmVUb29sdGlwKCkpfSxkcmFnOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxpPW4ub3duZXIscj1lLngubG9jYXRpb24sbz1lLnkubG9jYXRpb24sYT1uLmRyYWdhYmxlQXJlYS5zdGFydFBvaW50LHM9bi5kcmFnYWJsZUFyZWEuZW5kUG9pbnQ7ZS5wcmV2ZW50RGVmYXVsdCgpLG4udmFsPWkuX2lzSG9yaXpvbnRhbD9pLl9pc1J0bD9uLmNvbnN0cmFpblZhbHVlKHIsYSxzLHM+cik6bi5jb25zdHJhaW5WYWx1ZShyLGEscyxyPj1zKTpuLmNvbnN0cmFpblZhbHVlKG8scyxhLHM+PW8pLG4ub2xkVmFsIT1uLnZhbCYmKG4ub2xkVmFsPW4udmFsLG4udHlwZT8oXCJmaXJzdEhhbmRsZVwiPT1uLnR5cGU/bi5zZWxlY3Rpb25TdGFydD1uLnNlbGVjdGlvbkVuZD5uLnZhbD9uLnZhbDpuLnNlbGVjdGlvbkVuZD1uLnZhbDpuLnZhbD5uLnNlbGVjdGlvblN0YXJ0P24uc2VsZWN0aW9uRW5kPW4udmFsOm4uc2VsZWN0aW9uU3RhcnQ9bi5zZWxlY3Rpb25FbmQ9bi52YWwsdD17dmFsdWVzOltuLnNlbGVjdGlvblN0YXJ0LG4uc2VsZWN0aW9uRW5kXSx2YWx1ZTpbbi5zZWxlY3Rpb25TdGFydCxuLnNlbGVjdGlvbkVuZF19KTp0PXt2YWx1ZTpuLnZhbH0saS50cmlnZ2VyKEQsdCkpLG4uX3VwZGF0ZVRvb2x0aXAobi52YWwpfSxfdXBkYXRlVG9vbHRpcDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLGk9bi50b29sdGlwLHI9XCJcIjtpLmVuYWJsZWQmJih0LnRvb2x0aXBEaXZ8fHQuX2NyZWF0ZVRvb2x0aXAoKSxyPXQub3duZXIuX2dldEZvcm1hdHRlZFZhbHVlKGMoZSksdCksdC50eXBlfHwocis9dC50b29sdGlwSW5uZXJEaXYpLHQudG9vbHRpcERpdi5odG1sKHIpLHQubW92ZVRvb2x0aXAoKSl9LGRyYWdjYW5jZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vd25lci5fcmVmcmVzaCgpLGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5jc3MoXCJjdXJzb3JcIixcIlwiKSx0aGlzLl9lbmQoKX0sZHJhZ2VuZDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10Lm93bmVyO3JldHVybiBlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuY3NzKFwiY3Vyc29yXCIsXCJcIiksdC50eXBlP24uX3VwZGF0ZSh0LnNlbGVjdGlvblN0YXJ0LHQuc2VsZWN0aW9uRW5kKToobi5fdXBkYXRlKHQudmFsKSx0LmRyYWdnYWJsZS51c2VyRXZlbnRzLl9kaXNwb3NlQWxsKCkpLHQuX2VuZCgpfSxfZW5kOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUub3duZXI7cmV0dXJuIHQuX2ZvY3VzV2l0aE1vdXNlKGUuZWxlbWVudCksdC5lbGVtZW50Lm9uKEIpLCExfSxfcmVtb3ZlVG9vbHRpcDpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9bi5vd25lcjtuLnRvb2x0aXBEaXYmJmkub3B0aW9ucy50b29sdGlwLmVuYWJsZWQmJmkub3B0aW9ucy5lbmFibGVkJiYodD8obi50b29sdGlwRGl2LnJlbW92ZSgpLG4udG9vbHRpcERpdj1udWxsKTpuLnRvb2x0aXBEaXYuZmFkZU91dChcInNsb3dcIixmdW5jdGlvbigpe2UodGhpcykucmVtb3ZlKCksbi50b29sdGlwRGl2PW51bGx9KSl9LG1vdmVUb29sdGlwOmZ1bmN0aW9uKCl7dmFyIHQsbixpLHIsbz10aGlzLGE9by5vd25lcixzPTAsbD0wLGM9by5lbGVtZW50LGQ9Zi5nZXRPZmZzZXQoYyksdT04LGg9ZSh3aW5kb3cpLHA9by50b29sdGlwRGl2LmZpbmQoXCIuay1jYWxsb3V0XCIpLGc9by50b29sdGlwRGl2Lm91dGVyV2lkdGgoKSxtPW8udG9vbHRpcERpdi5vdXRlckhlaWdodCgpO28udHlwZT8odD1hLndyYXBwZXIuZmluZChIKSxkPWYuZ2V0T2Zmc2V0KHQuZXEoMCkpLG49Zi5nZXRPZmZzZXQodC5lcSgxKSksYS5faXNIb3Jpem9udGFsPyhzPW4udG9wLGw9ZC5sZWZ0KyhuLmxlZnQtZC5sZWZ0KS8yKToocz1kLnRvcCsobi50b3AtZC50b3ApLzIsbD1uLmxlZnQpLHI9dC5lcSgwKS5vdXRlcldpZHRoKCkrMip1KToocz1kLnRvcCxsPWQubGVmdCxyPWMub3V0ZXJXaWR0aCgpKzIqdSksYS5faXNIb3Jpem9udGFsPyhsLT1wYXJzZUludCgoZy1jW2EuX291dGVyU2l6ZV0oKSkvMiwxMCkscy09bStwLmhlaWdodCgpK3UpOihzLT1wYXJzZUludCgobS1jW2EuX291dGVyU2l6ZV0oKSkvMiwxMCksbC09ZytwLndpZHRoKCkrdSksYS5faXNIb3Jpem9udGFsPyhpPW8uX2ZsaXAocyxtLHIsaC5vdXRlckhlaWdodCgpK28uX3Njcm9sbE9mZnNldC50b3ApLHMrPWksbCs9by5fZml0KGwsZyxoLm91dGVyV2lkdGgoKStvLl9zY3JvbGxPZmZzZXQubGVmdCkpOihpPW8uX2ZsaXAobCxnLHIsaC5vdXRlcldpZHRoKCkrby5fc2Nyb2xsT2Zmc2V0LmxlZnQpLHMrPW8uX2ZpdChzLG0saC5vdXRlckhlaWdodCgpK28uX3Njcm9sbE9mZnNldC50b3ApLGwrPWkpLGk+MCYmcCYmKHAucmVtb3ZlQ2xhc3MoKSxwLmFkZENsYXNzKFwiay1jYWxsb3V0IGstY2FsbG91dC1cIisoYS5faXNIb3Jpem9udGFsP1wiblwiOlwid1wiKSkpLG8udG9vbHRpcERpdi5jc3Moe3RvcDpzLGxlZnQ6bH0pfSxfZml0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT0wO3JldHVybiBlK3Q+biYmKGk9bi0oZSt0KSksMD5lJiYoaT0tZSksaX0sX2ZsaXA6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9MDtyZXR1cm4gZSt0PmkmJihyKz0tKG4rdCkpLDA+ZStyJiYocis9bit0KSxyfSxjb25zdHJhaW5WYWx1ZTpmdW5jdGlvbihlLHQsbixpKXt2YXIgcj10aGlzLG89MDtyZXR1cm4gbz1lPnQmJm4+ZT9yLm93bmVyLl9nZXRWYWx1ZUZyb21Qb3NpdGlvbihlLHIuZHJhZ2FibGVBcmVhKTppP3Iub3B0aW9ucy5tYXg6ci5vcHRpb25zLm1pbn19LGYudWkucGx1Z2luKEopLHA9WC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24obixpKXt2YXIgcixvPXRoaXMsYT1lKG4pLmZpbmQoXCJpbnB1dFwiKSxzPWEuZXEoMClbMF0sYz1hLmVxKDEpWzBdO3MudHlwZT1cInRleHRcIixjLnR5cGU9XCJ0ZXh0XCIsaT12KHt9LHtzZWxlY3Rpb25TdGFydDpkKHMsXCJ2YWx1ZVwiKSxtaW46ZChzLFwibWluXCIpLG1heDpkKHMsXCJtYXhcIiksc21hbGxTdGVwOmQocyxcInN0ZXBcIil9LHtzZWxlY3Rpb25FbmQ6ZChjLFwidmFsdWVcIiksbWluOmQoYyxcIm1pblwiKSxtYXg6ZChjLFwibWF4XCIpLHNtYWxsU3RlcDpkKGMsXCJzdGVwXCIpfSxpKSxpJiZpLmVuYWJsZWQ9PT10JiYoaS5lbmFibGVkPSFhLmlzKFwiW2Rpc2FibGVkXVwiKSksWC5mbi5pbml0LmNhbGwobyxuLGkpLGk9by5vcHRpb25zLHUoaS5zZWxlY3Rpb25TdGFydCkmJm51bGwhPT1pLnNlbGVjdGlvblN0YXJ0fHwoaS5zZWxlY3Rpb25TdGFydD1pLm1pbixhLmVxKDApLnByb3AoXCJ2YWx1ZVwiLGwoaS5taW4pKSksdShpLnNlbGVjdGlvbkVuZCkmJm51bGwhPT1pLnNlbGVjdGlvbkVuZHx8KGkuc2VsZWN0aW9uRW5kPWkubWF4LGEuZXEoMSkucHJvcChcInZhbHVlXCIsbChpLm1heCkpKSxyPW8ud3JhcHBlci5maW5kKEgpLG5ldyBwLlNlbGVjdGlvbihyLG8saSksby5fZmlyc3RIYW5kbGVEcmFnPW5ldyBKLkRyYWcoci5lcSgwKSxcImZpcnN0SGFuZGxlXCIsbyxpKSxvLl9sYXN0SGFuZGxlRHJhZz1uZXcgSi5EcmFnKHIuZXEoMSksXCJsYXN0SGFuZGxlXCIsbyxpKX0sb3B0aW9uczp7bmFtZTpcIlJhbmdlU2xpZGVyXCIsbGVmdERyYWdIYW5kbGVUaXRsZTpcImRyYWdcIixyaWdodERyYWdIYW5kbGVUaXRsZTpcImRyYWdcIix0b29sdGlwOntmb3JtYXQ6XCJ7MDojLCMuIyN9XCJ9LHNlbGVjdGlvblN0YXJ0Om51bGwsc2VsZWN0aW9uRW5kOm51bGx9LGVuYWJsZTpmdW5jdGlvbihuKXt2YXIgaSxyPXRoaXMsbz1yLm9wdGlvbnM7ci5kaXNhYmxlKCksbiE9PSExJiYoci53cmFwcGVyLnJlbW92ZUNsYXNzKEcpLmFkZENsYXNzKGopLHIud3JhcHBlci5maW5kKFwiaW5wdXRcIikucmVtb3ZlQXR0cigkKSxpPWZ1bmN0aW9uKG4pe3ZhciBpLGEscyxsLGMsZCx1LGg9UShuKVswXTtpZihoKXtpZihpPXIuX2lzSG9yaXpvbnRhbD9oLmxvY2F0aW9uLnBhZ2VYOmgubG9jYXRpb24ucGFnZVksYT1yLl9nZXREcmFnZ2FibGVBcmVhKCkscz1yLl9nZXRWYWx1ZUZyb21Qb3NpdGlvbihpLGEpLGw9ZShuLnRhcmdldCksbC5oYXNDbGFzcyhcImstZHJhZ2hhbmRsZVwiKSlyZXR1cm4gci53cmFwcGVyLmZpbmQoXCIuXCIrVykucmVtb3ZlQ2xhc3MoVytcIiBcIitVKSxsLmFkZENsYXNzKFcrXCIgXCIrVSksdDtvLnNlbGVjdGlvblN0YXJ0PnM/KGM9cyxkPW8uc2VsZWN0aW9uRW5kLHU9ci5fZmlyc3RIYW5kbGVEcmFnKTpzPnIuc2VsZWN0aW9uRW5kPyhjPW8uc2VsZWN0aW9uU3RhcnQsZD1zLHU9ci5fbGFzdEhhbmRsZURyYWcpOm8uc2VsZWN0aW9uRW5kLXM+PXMtby5zZWxlY3Rpb25TdGFydD8oYz1zLGQ9by5zZWxlY3Rpb25FbmQsdT1yLl9maXJzdEhhbmRsZURyYWcpOihjPW8uc2VsZWN0aW9uU3RhcnQsZD1zLHU9ci5fbGFzdEhhbmRsZURyYWcpLHUuZHJhZ3N0YXJ0KG4pLHIuX3NldFZhbHVlSW5SYW5nZShjLGQpLHIuX2ZvY3VzV2l0aE1vdXNlKHUuZWxlbWVudCl9fSxyLndyYXBwZXIuZmluZChWK1wiLCBcIitOKS5vbihNLGkpLmVuZCgpLm9uKE0sZnVuY3Rpb24oKXtlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkub25lKFwic2VsZWN0c3RhcnRcIixmLnByZXZlbnREZWZhdWx0KX0pLm9uKEksZnVuY3Rpb24oKXtyLl9hY3RpdmVEcmFnSGFuZGxlJiZyLl9hY3RpdmVEcmFnSGFuZGxlLl9lbmQoKX0pLHIud3JhcHBlci5maW5kKEgpLmF0dHIoSywwKS5vbihQLGZ1bmN0aW9uKCl7ci5fc2V0VG9vbHRpcFRpbWVvdXQoKX0pLm9uKFIsZnVuY3Rpb24oZSl7ci5fZm9jdXNXaXRoTW91c2UoZS50YXJnZXQpLGUucHJldmVudERlZmF1bHQoKX0pLm9uKEwsdyhyLl9mb2N1cyxyKSkub24oTyx3KHIuX2JsdXIscikpLHIud3JhcHBlci5maW5kKEgpLm9mZihGLGYucHJldmVudERlZmF1bHQpLmVxKDApLm9uKEYsdyhmdW5jdGlvbihlKXt0aGlzLl9rZXlkb3duKGUsXCJmaXJzdEhhbmRsZVwiKX0scikpLmVuZCgpLmVxKDEpLm9uKEYsdyhmdW5jdGlvbihlKXt0aGlzLl9rZXlkb3duKGUsXCJsYXN0SGFuZGxlXCIpfSxyKSksci5vcHRpb25zLmVuYWJsZWQ9ITApfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLndyYXBwZXIucmVtb3ZlQ2xhc3MoaikuYWRkQ2xhc3MoRyksZS53cmFwcGVyLmZpbmQoXCJpbnB1dFwiKS5wcm9wKCQsJCksZS53cmFwcGVyLmZpbmQoVitcIiwgXCIrTikub2ZmKE0pLm9mZihJKSxlLndyYXBwZXIuZmluZChIKS5hdHRyKEssLTEpLm9mZihQKS5vZmYoRikub2ZmKFIpLm9mZihMKS5vZmYoTyksZS5vcHRpb25zLmVuYWJsZWQ9ITF9LF9rZXlkb3duOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG89dGhpcyxhPW8ub3B0aW9ucy5zZWxlY3Rpb25TdGFydCxzPW8ub3B0aW9ucy5zZWxlY3Rpb25FbmQ7ZS5rZXlDb2RlIGluIG8uX2tleU1hcCYmKG8uX2NsZWFyVG9vbHRpcFRpbWVvdXQoKSxcImZpcnN0SGFuZGxlXCI9PXQ/KHI9by5fYWN0aXZlSGFuZGxlRHJhZz1vLl9maXJzdEhhbmRsZURyYWcsYT1vLl9rZXlNYXBbZS5rZXlDb2RlXShhKSxhPnMmJihzPWEpKToocj1vLl9hY3RpdmVIYW5kbGVEcmFnPW8uX2xhc3RIYW5kbGVEcmFnLHM9by5fa2V5TWFwW2Uua2V5Q29kZV0ocyksYT5zJiYoYT1zKSksby5fc2V0VmFsdWVJblJhbmdlKGEscyksbj1NYXRoLm1heChhLG8ub3B0aW9ucy5zZWxlY3Rpb25TdGFydCksaT1NYXRoLm1pbihzLG8ub3B0aW9ucy5zZWxlY3Rpb25FbmQpLHIuc2VsZWN0aW9uRW5kPU1hdGgubWF4KGksby5vcHRpb25zLnNlbGVjdGlvblN0YXJ0KSxyLnNlbGVjdGlvblN0YXJ0PU1hdGgubWluKG4sby5vcHRpb25zLnNlbGVjdGlvbkVuZCksci5fdXBkYXRlVG9vbHRpcChvLnZhbHVlKClbby5fYWN0aXZlSGFuZGxlXSksZS5wcmV2ZW50RGVmYXVsdCgpKX0sX3VwZGF0ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1uLnZhbHVlKCkscj1pWzBdIT1lfHxpWzFdIT10O24udmFsdWUoW2UsdF0pLHImJm4udHJpZ2dlcihULHt2YWx1ZXM6W2UsdF0sdmFsdWU6W2UsdF19KX0sdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUubGVuZ3RoP3RoaXMuX3ZhbHVlKGVbMF0sZVsxXSk6dGhpcy5fdmFsdWUoKX0sX3ZhbHVlOmZ1bmN0aW9uKGUsbil7dmFyIGk9dGhpcyxyPWkub3B0aW9ucyxvPXIuc2VsZWN0aW9uU3RhcnQsYT1yLnNlbGVjdGlvbkVuZDtyZXR1cm4gaXNOYU4oZSkmJmlzTmFOKG4pP1tvLGFdOihlPWMoZSksbj1jKG4pLGU+PXIubWluJiZyLm1heD49ZSYmbj49ci5taW4mJnIubWF4Pj1uJiZuPj1lJiYobyE9ZXx8YSE9bikmJihpLmVsZW1lbnQuZmluZChcImlucHV0XCIpLmVxKDApLnByb3AoXCJ2YWx1ZVwiLGwoZSkpLmVuZCgpLmVxKDEpLnByb3AoXCJ2YWx1ZVwiLGwobikpLHIuc2VsZWN0aW9uU3RhcnQ9ZSxyLnNlbGVjdGlvbkVuZD1uLGkuX3JlZnJlc2goKSxpLl9yZWZyZXNoQXJpYUF0dHIoZSxuKSksdCl9LHZhbHVlczpmdW5jdGlvbihlLHQpe3JldHVybiBiKGUpP3RoaXMuX3ZhbHVlKGVbMF0sZVsxXSk6dGhpcy5fdmFsdWUoZSx0KX0sX3JlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zO2UudHJpZ2dlcih6LHt2YWx1ZXM6W3Quc2VsZWN0aW9uU3RhcnQsdC5zZWxlY3Rpb25FbmRdLHZhbHVlOlt0LnNlbGVjdGlvblN0YXJ0LHQuc2VsZWN0aW9uRW5kXX0pLHQuc2VsZWN0aW9uU3RhcnQ9PXQubWF4JiZ0LnNlbGVjdGlvbkVuZD09dC5tYXgmJmUuX3NldFpJbmRleChcImZpcnN0SGFuZGxlXCIpfSxfcmVmcmVzaEFyaWFBdHRyOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzLHI9aS53cmFwcGVyLmZpbmQoSCksbz1pLl9hY3RpdmVIYW5kbGVEcmFnO249aS5fZ2V0Rm9ybWF0dGVkVmFsdWUoW2UsdF0sbyksci5lcSgwKS5hdHRyKFwiYXJpYS12YWx1ZW5vd1wiLGUpLHIuZXEoMSkuYXR0cihcImFyaWEtdmFsdWVub3dcIix0KSxyLmF0dHIoXCJhcmlhLXZhbHVldGV4dFwiLG4pfSxfc2V0VmFsdWVJblJhbmdlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5vcHRpb25zO2U9ay5tYXgoay5taW4oZSxuLm1heCksbi5taW4pLHQ9ay5tYXgoay5taW4odCxuLm1heCksbi5taW4pLGU9PW4ubWF4JiZ0PT1uLm1heCYmdGhpcy5fc2V0WkluZGV4KFwiZmlyc3RIYW5kbGVcIiksdGhpcy5fdXBkYXRlKGsubWluKGUsdCksay5tYXgoZSx0KSl9LF9zZXRaSW5kZXg6ZnVuY3Rpb24odCl7dGhpcy53cmFwcGVyLmZpbmQoSCkuZWFjaChmdW5jdGlvbihuKXtlKHRoaXMpLmNzcyhcInotaW5kZXhcIixcImZpcnN0SGFuZGxlXCI9PXQ/MS1uOm4pfSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2cuZm4uZGVzdHJveS5jYWxsKGUpLGUud3JhcHBlci5vZmYoQSkuZmluZChWK1wiLCBcIitOKS5vZmYoQSkuZW5kKCkuZmluZChIKS5vZmYoQSksZS5fZmlyc3RIYW5kbGVEcmFnLmRyYWdnYWJsZS5kZXN0cm95KCksZS5fbGFzdEhhbmRsZURyYWcuZHJhZ2dhYmxlLmRlc3Ryb3koKX19KSxwLlNlbGVjdGlvbj1mdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gaShpKXtpPWl8fFtdO3ZhciBvPWlbMF0tbi5taW4sYT1pWzFdLW4ubWluLHM9ay5jZWlsKGMoby9uLnNtYWxsU3RlcCkpLGw9ay5jZWlsKGMoYS9uLnNtYWxsU3RlcCkpLGQ9dC5fcGl4ZWxTdGVwc1tzXSx1PXQuX3BpeGVsU3RlcHNbbF0saD1wYXJzZUludChlLmVxKDApW3QuX291dGVyU2l6ZV0oKS8yLDEwKSxwPXQuX2lzUnRsPzI6MDtlLmVxKDApLmNzcyh0Ll9wb3NpdGlvbixkLWgtcCkuZW5kKCkuZXEoMSkuY3NzKHQuX3Bvc2l0aW9uLHUtaC1wKSxyKGQsdSl9ZnVuY3Rpb24gcihlLG4pe3ZhciBpLHIsbz10Ll90cmFja0Rpdi5maW5kKFwiLmstc2xpZGVyLXNlbGVjdGlvblwiKTtpPWsuYWJzKGUtbiksb1t0Ll9zaXplRm5dKGkpLHQuX2lzUnRsPyhyPWsubWF4KGUsbiksby5jc3MoXCJyaWdodFwiLHQuX21heFNlbGVjdGlvbi1yLTEpKToocj1rLm1pbihlLG4pLG8uY3NzKHQuX3Bvc2l0aW9uLHItMSkpfWkodC52YWx1ZSgpKSx0LmJpbmQoW1QsRCx6XSxmdW5jdGlvbihlKXtpKGUudmFsdWVzKX0pfSxmLnVpLnBsdWdpbihwKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIGkoZSx0LG4pe249ZChuKSxuJiYhbi5lcXVhbHMoZS5jb2xvcigpKSYmKFwiY2hhbmdlXCI9PXQmJihlLl92YWx1ZT1uKSxuPTEhPW4uYT9uLnRvQ3NzUmdiYSgpOm4udG9Dc3MoKSxlLnRyaWdnZXIodCx7dmFsdWU6bn0pKX1mdW5jdGlvbiByKGUsdCxuKXt2YXIgaSxyO3JldHVybiBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUpLGk9ZS5sZW5ndGgscj1lLmluZGV4T2YodCksMD5yPzA+bj9lW2ktMV06ZVswXToocis9biwwPnI/cis9aTpyJT1pLGVbcl0pfWZ1bmN0aW9uIG8oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfWZ1bmN0aW9uIGEoZSx0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LGFyZ3VtZW50cyl9fXZhciBzPXdpbmRvdy5rZW5kbyxsPXMudWksYz1sLldpZGdldCxkPXMucGFyc2VDb2xvcix1PXMuQ29sb3IsaD1zLmtleXMscD1cImJhY2tncm91bmQtY29sb3JcIixmPVwiay1zdGF0ZS1zZWxlY3RlZFwiLGc9XCIwMDAwMDAsN2Y3ZjdmLDg4MDAxNSxlZDFjMjQsZmY3ZjI3LGZmZjIwMCwyMmIxNGMsMDBhMmU4LDNmNDhjYyxhMzQ5YTQsZmZmZmZmLGMzYzNjMyxiOTdhNTcsZmZhZWM5LGZmYzkwZSxlZmU0YjAsYjVlNjFkLDk5ZDllYSw3MDkyYmUsYzhiZmU3XCIsbT1cIkZGRkZGRixGRkNDRkYsRkY5OUZGLEZGNjZGRixGRjMzRkYsRkYwMEZGLENDRkZGRixDQ0NDRkYsQ0M5OUZGLENDNjZGRixDQzMzRkYsQ0MwMEZGLDk5RkZGRiw5OUNDRkYsOTk5OUZGLDk5NjZGRiw5OTMzRkYsOTkwMEZGLEZGRkZDQyxGRkNDQ0MsRkY5OUNDLEZGNjZDQyxGRjMzQ0MsRkYwMENDLENDRkZDQyxDQ0NDQ0MsQ0M5OUNDLENDNjZDQyxDQzMzQ0MsQ0MwMENDLDk5RkZDQyw5OUNDQ0MsOTk5OUNDLDk5NjZDQyw5OTMzQ0MsOTkwMENDLEZGRkY5OSxGRkNDOTksRkY5OTk5LEZGNjY5OSxGRjMzOTksRkYwMDk5LENDRkY5OSxDQ0NDOTksQ0M5OTk5LENDNjY5OSxDQzMzOTksQ0MwMDk5LDk5RkY5OSw5OUNDOTksOTk5OTk5LDk5NjY5OSw5OTMzOTksOTkwMDk5LEZGRkY2NixGRkNDNjYsRkY5OTY2LEZGNjY2NixGRjMzNjYsRkYwMDY2LENDRkY2NixDQ0NDNjYsQ0M5OTY2LENDNjY2NixDQzMzNjYsQ0MwMDY2LDk5RkY2Niw5OUNDNjYsOTk5OTY2LDk5NjY2Niw5OTMzNjYsOTkwMDY2LEZGRkYzMyxGRkNDMzMsRkY5OTMzLEZGNjYzMyxGRjMzMzMsRkYwMDMzLENDRkYzMyxDQ0NDMzMsQ0M5OTMzLENDNjYzMyxDQzMzMzMsQ0MwMDMzLDk5RkYzMyw5OUNDMzMsOTk5OTMzLDk5NjYzMyw5OTMzMzMsOTkwMDMzLEZGRkYwMCxGRkNDMDAsRkY5OTAwLEZGNjYwMCxGRjMzMDAsRkYwMDAwLENDRkYwMCxDQ0NDMDAsQ0M5OTAwLENDNjYwMCxDQzMzMDAsQ0MwMDAwLDk5RkYwMCw5OUNDMDAsOTk5OTAwLDk5NjYwMCw5OTMzMDAsOTkwMDAwLDY2RkZGRiw2NkNDRkYsNjY5OUZGLDY2NjZGRiw2NjMzRkYsNjYwMEZGLDMzRkZGRiwzM0NDRkYsMzM5OUZGLDMzNjZGRiwzMzMzRkYsMzMwMEZGLDAwRkZGRiwwMENDRkYsMDA5OUZGLDAwNjZGRiwwMDMzRkYsMDAwMEZGLDY2RkZDQyw2NkNDQ0MsNjY5OUNDLDY2NjZDQyw2NjMzQ0MsNjYwMENDLDMzRkZDQywzM0NDQ0MsMzM5OUNDLDMzNjZDQywzMzMzQ0MsMzMwMENDLDAwRkZDQywwMENDQ0MsMDA5OUNDLDAwNjZDQywwMDMzQ0MsMDAwMENDLDY2RkY5OSw2NkNDOTksNjY5OTk5LDY2NjY5OSw2NjMzOTksNjYwMDk5LDMzRkY5OSwzM0NDOTksMzM5OTk5LDMzNjY5OSwzMzMzOTksMzMwMDk5LDAwRkY5OSwwMENDOTksMDA5OTk5LDAwNjY5OSwwMDMzOTksMDAwMDk5LDY2RkY2Niw2NkNDNjYsNjY5OTY2LDY2NjY2Niw2NjMzNjYsNjYwMDY2LDMzRkY2NiwzM0NDNjYsMzM5OTY2LDMzNjY2NiwzMzMzNjYsMzMwMDY2LDAwRkY2NiwwMENDNjYsMDA5OTY2LDAwNjY2NiwwMDMzNjYsMDAwMDY2LDY2RkYzMyw2NkNDMzMsNjY5OTMzLDY2NjYzMyw2NjMzMzMsNjYwMDMzLDMzRkYzMywzM0NDMzMsMzM5OTMzLDMzNjYzMywzMzMzMzMsMzMwMDMzLDAwRkYzMywwMENDMzMsMDA5OTMzLDAwNjYzMywwMDMzMzMsMDAwMDMzLDY2RkYwMCw2NkNDMDAsNjY5OTAwLDY2NjYwMCw2NjMzMDAsNjYwMDAwLDMzRkYwMCwzM0NDMDAsMzM5OTAwLDMzNjYwMCwzMzMzMDAsMzMwMDAwLDAwRkYwMCwwMENDMDAsMDA5OTAwLDAwNjYwMCwwMDMzMDAsMDAwMDAwXCIsdj17YXBwbHk6XCJBcHBseVwiLGNhbmNlbDpcIkNhbmNlbFwifSxfPVwiLmtlbmRvQ29sb3JUb29sc1wiLHk9XCJjbGlja1wiK18sdz1cImtleWRvd25cIitfLGI9cy5zdXBwb3J0LmJyb3dzZXIsaz1iLm1zaWUmJjk+Yi52ZXJzaW9uLHg9Yy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXM7Yy5mbi5pbml0LmNhbGwoaSxlLHQpLGU9aS5lbGVtZW50LHQ9aS5vcHRpb25zLGkuX3ZhbHVlPXQudmFsdWU9ZCh0LnZhbHVlKSxpLl90YWJJbmRleD1lLmF0dHIoXCJ0YWJJbmRleFwiKXx8MCxuPWkuX2FyaWFJZD10LmFyaWFJZCxuJiZlLmF0dHIoXCJhcmlhLWxhYmVsbGVkYnlcIixuKSx0Ll9zdGFuZGFsb25lJiYoaS5fdHJpZ2dlclNlbGVjdD1pLl90cmlnZ2VyQ2hhbmdlKX0sb3B0aW9uczp7bmFtZTpcIkNvbG9yU2VsZWN0b3JcIix2YWx1ZTpudWxsLF9zdGFuZGFsb25lOiEwfSxldmVudHM6W1wiY2hhbmdlXCIsXCJzZWxlY3RcIixcImNhbmNlbFwiXSxjb2xvcjpmdW5jdGlvbihlKXtyZXR1cm4gZSE9PW4mJih0aGlzLl92YWx1ZT1kKGUpLHRoaXMuX3VwZGF0ZVVJKHRoaXMuX3ZhbHVlKSksdGhpcy5fdmFsdWV9LHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlPXRoaXMuY29sb3IoZSksZSYmKGU9dGhpcy5vcHRpb25zLm9wYWNpdHk/ZS50b0Nzc1JnYmEoKTplLnRvQ3NzKCkpLGV8fG51bGx9LGVuYWJsZTpmdW5jdGlvbih0KXswPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9ITApLGUoXCIuay1kaXNhYmxlZC1vdmVybGF5XCIsdGhpcy53cmFwcGVyKS5yZW1vdmUoKSx0fHx0aGlzLndyYXBwZXIuYXBwZW5kKFwiPGRpdiBjbGFzcz0nay1kaXNhYmxlZC1vdmVybGF5Jz48L2Rpdj5cIiksdGhpcy5fb25FbmFibGUodCl9LF9zZWxlY3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl92YWx1ZTtlPXRoaXMuY29sb3IoZSksdHx8KHRoaXMuZWxlbWVudC50cmlnZ2VyKFwiY2hhbmdlXCIpLGUuZXF1YWxzKG4pP3RoaXMuX3N0YW5kYWxvbmV8fHRoaXMudHJpZ2dlcihcImNhbmNlbFwiKTp0aGlzLnRyaWdnZXIoXCJjaGFuZ2VcIix7dmFsdWU6dGhpcy52YWx1ZSgpfSkpfSxfdHJpZ2dlclNlbGVjdDpmdW5jdGlvbihlKXtpKHRoaXMsXCJzZWxlY3RcIixlKX0sX3RyaWdnZXJDaGFuZ2U6ZnVuY3Rpb24oZSl7aSh0aGlzLFwiY2hhbmdlXCIsZSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQmJnRoaXMuZWxlbWVudC5vZmYoXyksdGhpcy53cmFwcGVyJiZ0aGlzLndyYXBwZXIub2ZmKF8pLmZpbmQoXCIqXCIpLm9mZihfKSx0aGlzLndyYXBwZXI9bnVsbCxjLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKX0sX3VwZGF0ZVVJOmUubm9vcCxfc2VsZWN0T25IaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LF9jYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIoXCJjYW5jZWxcIil9fSksQz14LmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpLHIsbyxsLGM9dGhpcztpZih4LmZuLmluaXQuY2FsbChjLHQsbiksdD1jLndyYXBwZXI9Yy5lbGVtZW50LG49Yy5vcHRpb25zLGk9bi5wYWxldHRlLFwid2Vic2FmZVwiPT1pPyhpPW0sbi5jb2x1bW5zPTE4KTpcImJhc2ljXCI9PWkmJihpPWcpLFwic3RyaW5nXCI9PXR5cGVvZiBpJiYoaT1pLnNwbGl0KFwiLFwiKSksZS5pc0FycmF5KGkpJiYoaT1lLm1hcChpLGZ1bmN0aW9uKGUpe3JldHVybiBkKGUpfSkpLGMuX3NlbGVjdGVkSUQ9KG4uYXJpYUlkfHxzLmd1aWQoKSkrXCJfc2VsZWN0ZWRcIix0LmFkZENsYXNzKFwiay13aWRnZXQgay1jb2xvcnBhbGV0dGVcIikuYXR0cihcInJvbGVcIixcImdyaWRcIikuYXR0cihcImFyaWEtcmVhZG9ubHlcIixcInRydWVcIikuYXBwZW5kKGUoYy5fdGVtcGxhdGUoe2NvbG9yczppLGNvbHVtbnM6bi5jb2x1bW5zLHRpbGVTaXplOm4udGlsZVNpemUsdmFsdWU6Yy5fdmFsdWUsaWQ6bi5hcmlhSWR9KSkpLm9uKHksXCIuay1pdGVtXCIsZnVuY3Rpb24odCl7Yy5fc2VsZWN0KGUodC5jdXJyZW50VGFyZ2V0KS5jc3MocCkpfSkuYXR0cihcInRhYkluZGV4XCIsYy5fdGFiSW5kZXgpLm9uKHcsYShjLl9rZXlkb3duLGMpKSxyPW4udGlsZVNpemUpe2lmKC9udW1iZXJ8c3RyaW5nLy50ZXN0KHR5cGVvZiByKSlvPWw9cGFyc2VGbG9hdChyKTtlbHNle2lmKFwib2JqZWN0XCIhPXR5cGVvZiByKXRocm93IEVycm9yKFwiVW5zdXBwb3J0ZWQgdmFsdWUgZm9yIHRoZSAndGlsZVNpemUnIGFyZ3VtZW50XCIpO289cGFyc2VGbG9hdChyLndpZHRoKSxsPXBhcnNlRmxvYXQoci5oZWlnaHQpfXQuZmluZChcIi5rLWl0ZW1cIikuY3NzKHt3aWR0aDpvLGhlaWdodDpsfSl9fSxmb2N1czpmdW5jdGlvbigpe3RoaXMud3JhcHBlci5mb2N1cygpfSxvcHRpb25zOntuYW1lOlwiQ29sb3JQYWxldHRlXCIsY29sdW1uczoxMCx0aWxlU2l6ZTpudWxsLHBhbGV0dGU6XCJiYXNpY1wifSxfb25FbmFibGU6ZnVuY3Rpb24oZSl7ZT90aGlzLndyYXBwZXIuYXR0cihcInRhYkluZGV4XCIsdGhpcy5fdGFiSW5kZXgpOnRoaXMud3JhcHBlci5yZW1vdmVBdHRyKFwidGFiSW5kZXhcIil9LF9rZXlkb3duOmZ1bmN0aW9uKHQpe3ZhciBuLGksYT10aGlzLndyYXBwZXIscz1hLmZpbmQoXCIuay1pdGVtXCIpLGw9cy5maWx0ZXIoXCIuXCIrZikuZ2V0KDApLGM9dC5rZXlDb2RlO2lmKGM9PWguTEVGVD9uPXIocyxsLC0xKTpjPT1oLlJJR0hUP249cihzLGwsMSk6Yz09aC5ET1dOP249cihzLGwsdGhpcy5vcHRpb25zLmNvbHVtbnMpOmM9PWguVVA/bj1yKHMsbCwtdGhpcy5vcHRpb25zLmNvbHVtbnMpOmM9PWguRU5URVI/KG8odCksbCYmdGhpcy5fc2VsZWN0KGUobCkuY3NzKHApKSk6Yz09aC5FU0MmJnRoaXMuX2NhbmNlbCgpLG4pe28odCksdGhpcy5fY3VycmVudChuKTt0cnl7aT1kKG4uY3NzKHApKSx0aGlzLl90cmlnZ2VyU2VsZWN0KGkpfWNhdGNoKHUpe319fSxfY3VycmVudDpmdW5jdGlvbih0KXt0aGlzLndyYXBwZXIuZmluZChcIi5cIitmKS5yZW1vdmVDbGFzcyhmKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCExKS5yZW1vdmVBdHRyKFwiaWRcIiksZSh0KS5hZGRDbGFzcyhmKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKS5hdHRyKFwiaWRcIix0aGlzLl9zZWxlY3RlZElEKSx0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKS5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsdGhpcy5fc2VsZWN0ZWRJRCl9LF91cGRhdGVVSTpmdW5jdGlvbih0KXt2YXIgaT1udWxsO3RoaXMud3JhcHBlci5maW5kKFwiLmstaXRlbVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHI9ZChlKHRoaXMpLmNzcyhwKSk7cmV0dXJuIHImJnIuZXF1YWxzKHQpPyhpPXRoaXMsITEpOm59KSx0aGlzLl9jdXJyZW50KGkpfSxfdGVtcGxhdGU6cy50ZW1wbGF0ZSgnPHRhYmxlIGNsYXNzPVwiay1wYWxldHRlIGstcmVzZXRcIiByb2xlPVwicHJlc2VudGF0aW9uXCI+PHRyIHJvbGU9XCJyb3dcIj4jIGZvciAodmFyIGkgPSAwOyBpIDwgY29sb3JzLmxlbmd0aDsgKytpKSB7ICMjIHZhciBzZWxlY3RlZCA9IGNvbG9yc1tpXS5lcXVhbHModmFsdWUpOyAjIyBpZiAoaSAmJiBpICUgY29sdW1ucyA9PSAwKSB7ICMgPC90cj48dHIgcm9sZT1cInJvd1wiPiAjIH0gIzx0ZCByb2xlPVwiZ3JpZGNlbGxcIiB1bnNlbGVjdGFibGU9XCJvblwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojPSBjb2xvcnNbaV0udG9Dc3MoKSAjXCIjPSBzZWxlY3RlZCA/IFwiIGFyaWEtc2VsZWN0ZWQ9dHJ1ZVwiIDogXCJcIiAjICM9KGlkICYmIGkgPT09IDApID8gXCJpZD1cXFxcXCJcIitpZCtcIlxcXFxcIiBcIiA6IFwiXCIgIyBjbGFzcz1cImstaXRlbSM9IHNlbGVjdGVkID8gXCIgJytmKydcIiA6IFwiXCIgI1wiIGFyaWEtbGFiZWw9XCIjPSBjb2xvcnNbaV0udG9Dc3MoKSAjXCI+PC90ZD4jIH0gIzwvdHI+PC90YWJsZT4nKX0pLFM9eC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzO3guZm4uaW5pdC5jYWxsKGksdCxuKSxuPWkub3B0aW9ucyx0PWkuZWxlbWVudCxpLndyYXBwZXI9dC5hZGRDbGFzcyhcImstd2lkZ2V0IGstZmxhdGNvbG9ycGlja2VyXCIpLmFwcGVuZChpLl90ZW1wbGF0ZShuKSksaS5faHVlRWxlbWVudHM9ZShcIi5rLWhzdi1yZWN0YW5nbGUsIC5rLXRyYW5zcGFyZW5jeS1zbGlkZXIgLmstc2xpZGVyLXRyYWNrXCIsdCksaS5fc2VsZWN0ZWRDb2xvcj1lKFwiLmstc2VsZWN0ZWQtY29sb3ItZGlzcGxheVwiLHQpLGkuX2NvbG9yQXNUZXh0PWUoXCJpbnB1dC5rLWNvbG9yLXZhbHVlXCIsdCksaS5fc2xpZGVycygpLGkuX2hzdkFyZWEoKSxpLl91cGRhdGVVSShpLl92YWx1ZXx8ZChcIiNmMDBcIikpLHQuZmluZChcImlucHV0LmstY29sb3ItdmFsdWVcIikub24odyxmdW5jdGlvbih0KXt2YXIgbixyLG89dGhpcztpZih0LmtleUNvZGU9PWguRU5URVIpdHJ5e249ZChvLnZhbHVlKSxyPWkuY29sb3IoKSxpLl9zZWxlY3QobixuLmVxdWFscyhyKSl9Y2F0Y2goYSl7ZShvKS5hZGRDbGFzcyhcImstc3RhdGUtZXJyb3JcIil9ZWxzZSBpLm9wdGlvbnMuYXV0b3VwZGF0ZSYmc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBlPWQoby52YWx1ZSwhMCk7ZSYmaS5fdXBkYXRlVUkoZSwhMCl9LDEwKX0pLmVuZCgpLm9uKHksXCIuay1jb250cm9scyBidXR0b24uYXBwbHlcIixmdW5jdGlvbigpe2kuX3NlbGVjdChpLl9nZXRIU1YoKSl9KS5vbih5LFwiLmstY29udHJvbHMgYnV0dG9uLmNhbmNlbFwiLGZ1bmN0aW9uKCl7aS5fdXBkYXRlVUkoaS5jb2xvcigpKSxpLl9jYW5jZWwoKX0pLGsmJmkuX2FwcGx5SUVGaWx0ZXIoKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX2h1ZVNsaWRlci5kZXN0cm95KCksdGhpcy5fb3BhY2l0eVNsaWRlciYmdGhpcy5fb3BhY2l0eVNsaWRlci5kZXN0cm95KCksdGhpcy5faHVlU2xpZGVyPXRoaXMuX29wYWNpdHlTbGlkZXI9dGhpcy5faHN2UmVjdD10aGlzLl9oc3ZIYW5kbGU9dGhpcy5faHVlRWxlbWVudHM9dGhpcy5fc2VsZWN0ZWRDb2xvcj10aGlzLl9jb2xvckFzVGV4dD1udWxsLHguZm4uZGVzdHJveS5jYWxsKHRoaXMpfSxvcHRpb25zOntuYW1lOlwiRmxhdENvbG9yUGlja2VyXCIsb3BhY2l0eTohMSxidXR0b25zOiExLGlucHV0OiEwLHByZXZpZXc6ITAsYXV0b3VwZGF0ZTohMCxtZXNzYWdlczp2fSxfYXBwbHlJRUZpbHRlcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudC5maW5kKFwiLmstaHVlLXNsaWRlciAuay1zbGlkZXItdHJhY2tcIilbMF0sdD1lLmN1cnJlbnRTdHlsZS5iYWNrZ3JvdW5kSW1hZ2U7dD10LnJlcGxhY2UoL151cmxcXChbXFwnXFxcIl0/fFtcXCdcXFwiXT9cXCkkL2csXCJcIiksZS5zdHlsZS5maWx0ZXI9XCJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGFJbWFnZUxvYWRlcihzcmM9J1wiK3QrXCInLCBzaXppbmdNZXRob2Q9J3NjYWxlJylcIn0sX3NsaWRlcnM6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe24uX3VwZGF0ZVVJKG4uX2dldEhTVihlLnZhbHVlLG51bGwsbnVsbCxudWxsKSl9ZnVuY3Rpb24gdChlKXtuLl91cGRhdGVVSShuLl9nZXRIU1YobnVsbCxudWxsLG51bGwsZS52YWx1ZS8xMDApKX12YXIgbj10aGlzLGk9bi5lbGVtZW50O24uX2h1ZVNsaWRlcj1pLmZpbmQoXCIuay1odWUtc2xpZGVyXCIpLmtlbmRvU2xpZGVyKHttaW46MCxtYXg6MzU5LHRpY2tQbGFjZW1lbnQ6XCJub25lXCIsc2hvd0J1dHRvbnM6ITEsc2xpZGU6ZSxjaGFuZ2U6ZX0pLmRhdGEoXCJrZW5kb1NsaWRlclwiKSxuLl9vcGFjaXR5U2xpZGVyPWkuZmluZChcIi5rLXRyYW5zcGFyZW5jeS1zbGlkZXJcIikua2VuZG9TbGlkZXIoe21pbjowLG1heDoxMDAsdGlja1BsYWNlbWVudDpcIm5vbmVcIixzaG93QnV0dG9uczohMSxzbGlkZTp0LGNoYW5nZTp0fSkuZGF0YShcImtlbmRvU2xpZGVyXCIpfSxfaHN2QXJlYTpmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSxuKXt2YXIgaT10aGlzLm9mZnNldCxyPWUtaS5sZWZ0LG89bi1pLnRvcCxhPXRoaXMud2lkdGgscz10aGlzLmhlaWdodDtyPTA+cj8wOnI+YT9hOnIsbz0wPm8/MDpvPnM/czpvLHQuX3N2Q2hhbmdlKHIvYSwxLW8vcyl9dmFyIHQ9dGhpcyxuPXQuZWxlbWVudCxpPW4uZmluZChcIi5rLWhzdi1yZWN0YW5nbGVcIikscj1pLmZpbmQoXCIuay1kcmFnaGFuZGxlXCIpLmF0dHIoXCJ0YWJJbmRleFwiLDApLm9uKHcsYSh0Ll9rZXlkb3duLHQpKTt0Ll9oc3ZFdmVudHM9bmV3IHMuVXNlckV2ZW50cyhpLHtnbG9iYWw6ITAscHJlc3M6ZnVuY3Rpb24odCl7dGhpcy5vZmZzZXQ9cy5nZXRPZmZzZXQoaSksdGhpcy53aWR0aD1pLndpZHRoKCksdGhpcy5oZWlnaHQ9aS5oZWlnaHQoKSxyLmZvY3VzKCksZS5jYWxsKHRoaXMsdC54LmxvY2F0aW9uLHQueS5sb2NhdGlvbil9LHN0YXJ0OmZ1bmN0aW9uKCl7aS5hZGRDbGFzcyhcImstZHJhZ2dpbmdcIiksci5mb2N1cygpfSxtb3ZlOmZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSxlLmNhbGwodGhpcyx0LngubG9jYXRpb24sdC55LmxvY2F0aW9uKX0sZW5kOmZ1bmN0aW9uKCl7aS5yZW1vdmVDbGFzcyhcImstZHJhZ2dpbmdcIil9fSksdC5faHN2UmVjdD1pLHQuX2hzdkhhbmRsZT1yfSxfb25FbmFibGU6ZnVuY3Rpb24oZSl7dGhpcy5faHVlU2xpZGVyLmVuYWJsZShlKSx0aGlzLl9vcGFjaXR5U2xpZGVyJiZ0aGlzLl9vcGFjaXR5U2xpZGVyLmVuYWJsZShlKSx0aGlzLndyYXBwZXIuZmluZChcImlucHV0XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCFlKTt2YXIgdD10aGlzLl9oc3ZSZWN0LmZpbmQoXCIuay1kcmFnaGFuZGxlXCIpO2U/dC5hdHRyKFwidGFiSW5kZXhcIix0aGlzLl90YWJJbmRleCk6dC5yZW1vdmVBdHRyKFwidGFiSW5kZXhcIil9LF9rZXlkb3duOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxuKXt2YXIgcj1pLl9nZXRIU1YoKTtyW3RdKz1uKihlLnNoaWZ0S2V5Py4wMTouMDUpLDA+clt0XSYmKHJbdF09MCksclt0XT4xJiYoclt0XT0xKSxpLl91cGRhdGVVSShyKSxvKGUpfWZ1bmN0aW9uIG4odCl7dmFyIG49aS5fZ2V0SFNWKCk7bi5oKz10KihlLnNoaWZ0S2V5PzE6NSksMD5uLmgmJihuLmg9MCksbi5oPjM1OSYmKG4uaD0zNTkpLGkuX3VwZGF0ZVVJKG4pLG8oZSl9dmFyIGk9dGhpcztzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIGguTEVGVDplLmN0cmxLZXk/bigtMSk6dChcInNcIiwtMSk7YnJlYWs7Y2FzZSBoLlJJR0hUOmUuY3RybEtleT9uKDEpOnQoXCJzXCIsMSk7YnJlYWs7Y2FzZSBoLlVQOnQoZS5jdHJsS2V5JiZpLl9vcGFjaXR5U2xpZGVyP1wiYVwiOlwidlwiLDEpO2JyZWFrO2Nhc2UgaC5ET1dOOnQoZS5jdHJsS2V5JiZpLl9vcGFjaXR5U2xpZGVyP1wiYVwiOlwidlwiLC0xKTticmVhaztjYXNlIGguRU5URVI6aS5fc2VsZWN0KGkuX2dldEhTVigpKTticmVhaztjYXNlIGguRjI6aS53cmFwcGVyLmZpbmQoXCJpbnB1dC5rLWNvbG9yLXZhbHVlXCIpLmZvY3VzKCkuc2VsZWN0KCk7YnJlYWs7Y2FzZSBoLkVTQzppLl9jYW5jZWwoKX19LGZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5faHN2SGFuZGxlLmZvY3VzKCl9LF9nZXRIU1Y6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9dGhpcy5faHN2UmVjdCxvPXIud2lkdGgoKSxhPXIuaGVpZ2h0KCkscz10aGlzLl9oc3ZIYW5kbGUucG9zaXRpb24oKTtyZXR1cm4gbnVsbD09ZSYmKGU9dGhpcy5faHVlU2xpZGVyLnZhbHVlKCkpLG51bGw9PXQmJih0PXMubGVmdC9vKSxudWxsPT1uJiYobj0xLXMudG9wL2EpLG51bGw9PWkmJihpPXRoaXMuX29wYWNpdHlTbGlkZXI/dGhpcy5fb3BhY2l0eVNsaWRlci52YWx1ZSgpLzEwMDoxKSx1LmZyb21IU1YoZSx0LG4saSl9LF9zdkNoYW5nZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX2dldEhTVihudWxsLGUsdCxudWxsKTt0aGlzLl91cGRhdGVVSShuKX0sX3VwZGF0ZVVJOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPW4uX2hzdlJlY3Q7ZSYmKHRoaXMuX2NvbG9yQXNUZXh0LnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1lcnJvclwiKSxuLl9zZWxlY3RlZENvbG9yLmNzcyhwLGUudG9EaXNwbGF5KCkpLHR8fG4uX2NvbG9yQXNUZXh0LnZhbChuLl9vcGFjaXR5U2xpZGVyP2UudG9Dc3NSZ2JhKCk6ZS50b0NzcygpKSxuLl90cmlnZ2VyU2VsZWN0KGUpLGU9ZS50b0hTVigpLG4uX2hzdkhhbmRsZS5jc3Moe2xlZnQ6ZS5zKmkud2lkdGgoKStcInB4XCIsdG9wOigxLWUudikqaS5oZWlnaHQoKStcInB4XCJ9KSxuLl9odWVFbGVtZW50cy5jc3MocCx1LmZyb21IU1YoZS5oLDEsMSwxKS50b0NzcygpKSxuLl9odWVTbGlkZXIudmFsdWUoZS5oKSxuLl9vcGFjaXR5U2xpZGVyJiZuLl9vcGFjaXR5U2xpZGVyLnZhbHVlKDEwMCplLmEpKX0sX3NlbGVjdE9uSGlkZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMuYnV0dG9ucz9udWxsOnRoaXMuX2dldEhTVigpfSxfdGVtcGxhdGU6cy50ZW1wbGF0ZSgnIyBpZiAocHJldmlldykgeyAjPGRpdiBjbGFzcz1cImstc2VsZWN0ZWQtY29sb3JcIj48ZGl2IGNsYXNzPVwiay1zZWxlY3RlZC1jb2xvci1kaXNwbGF5XCI+PGlucHV0IGNsYXNzPVwiay1jb2xvci12YWx1ZVwiICM9ICFkYXRhLmlucHV0ID8gXFwnc3R5bGU9XCJ2aXNpYmlsaXR5OiBoaWRkZW47XCJcXCcgOiBcIlwiICM+PC9kaXY+PC9kaXY+IyB9ICM8ZGl2IGNsYXNzPVwiay1oc3YtcmVjdGFuZ2xlXCI+PGRpdiBjbGFzcz1cImstaHN2LWdyYWRpZW50XCI+PC9kaXY+PGRpdiBjbGFzcz1cImstZHJhZ2hhbmRsZVwiPjwvZGl2PjwvZGl2PjxpbnB1dCBjbGFzcz1cImstaHVlLXNsaWRlclwiIC8+IyBpZiAob3BhY2l0eSkgeyAjPGlucHV0IGNsYXNzPVwiay10cmFuc3BhcmVuY3ktc2xpZGVyXCIgLz4jIH0gIyMgaWYgKGJ1dHRvbnMpIHsgIzxkaXYgdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstY29udHJvbHNcIj48YnV0dG9uIGNsYXNzPVwiay1idXR0b24gay1wcmltYXJ5IGFwcGx5XCI+IzogbWVzc2FnZXMuYXBwbHkgIzwvYnV0dG9uPiA8YnV0dG9uIGNsYXNzPVwiay1idXR0b24gY2FuY2VsXCI+IzogbWVzc2FnZXMuY2FuY2VsICM8L2J1dHRvbj48L2Rpdj4jIH0gIycpfSksVD1jLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpLHIsbyxhLHMsbD10aGlzO2MuZm4uaW5pdC5jYWxsKGwsdCxuKSxuPWwub3B0aW9ucyx0PWwuZWxlbWVudCxpPXQuYXR0cihcInZhbHVlXCIpfHx0LnZhbCgpLGk9aT9kKGksITApOmQobi52YWx1ZSwhMCksbC5fdmFsdWU9bi52YWx1ZT1pLHI9bC53cmFwcGVyPWUobC5fdGVtcGxhdGUobikpLHQuaGlkZSgpLmFmdGVyKHIpLHQuaXMoXCJpbnB1dFwiKSYmKHQuYXBwZW5kVG8ociksbz10LmNsb3Nlc3QoXCJsYWJlbFwiKSxhPXQuYXR0cihcImlkXCIpLGEmJihvPW8uYWRkKCdsYWJlbFtmb3I9XCInK2ErJ1wiXScpKSxvLmNsaWNrKGZ1bmN0aW9uKGUpe2wub3BlbigpLGUucHJldmVudERlZmF1bHQoKX0pKSxsLl90YWJJbmRleD10LmF0dHIoXCJ0YWJJbmRleFwiKXx8MCxsLmVuYWJsZSghdC5hdHRyKFwiZGlzYWJsZWRcIikpLHM9dC5hdHRyKFwiYWNjZXNza2V5XCIpLHMmJih0LmF0dHIoXCJhY2Nlc3NrZXlcIixudWxsKSxyLmF0dHIoXCJhY2Nlc3NrZXlcIixzKSksbC5iaW5kKFwiYWN0aXZhdGVcIixmdW5jdGlvbihlKXtlLmlzRGVmYXVsdFByZXZlbnRlZCgpfHxsLnRvZ2dsZSgpfSksbC5fdXBkYXRlVUkoaSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLndyYXBwZXIub2ZmKF8pLmZpbmQoXCIqXCIpLm9mZihfKSx0aGlzLl9wb3B1cCYmKHRoaXMuX3NlbGVjdG9yLmRlc3Ryb3koKSx0aGlzLl9wb3B1cC5kZXN0cm95KCkpLHRoaXMuX3NlbGVjdG9yPXRoaXMuX3BvcHVwPXRoaXMud3JhcHBlcj1udWxsLGMuZm4uZGVzdHJveS5jYWxsKHRoaXMpfSxlbmFibGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQud3JhcHBlcixpPW4uY2hpbGRyZW4oXCIuay1waWNrZXItd3JhcFwiKSxyPWkuZmluZChcIi5rLXNlbGVjdFwiKTswPT09YXJndW1lbnRzLmxlbmd0aCYmKGU9ITApLHQuZWxlbWVudC5hdHRyKFwiZGlzYWJsZWRcIiwhZSksbi5hdHRyKFwiYXJpYS1kaXNhYmxlZFwiLCFlKSxyLm9mZihfKS5vbihcIm1vdXNlZG93blwiK18sbyksbi5hZGRDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIikucmVtb3ZlQXR0cihcInRhYkluZGV4XCIpLmFkZChcIipcIixuKS5vZmYoXyksZSYmbi5yZW1vdmVDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIikuYXR0cihcInRhYkluZGV4XCIsdC5fdGFiSW5kZXgpLm9uKFwibW91c2VlbnRlclwiK18sZnVuY3Rpb24oKXtpLmFkZENsYXNzKFwiay1zdGF0ZS1ob3ZlclwiKX0pLm9uKFwibW91c2VsZWF2ZVwiK18sZnVuY3Rpb24oKXtpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1ob3ZlclwiKX0pLm9uKFwiZm9jdXNcIitfLGZ1bmN0aW9uKCl7aS5hZGRDbGFzcyhcImstc3RhdGUtZm9jdXNlZFwiKX0pLm9uKFwiYmx1clwiK18sZnVuY3Rpb24oKXtpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1mb2N1c2VkXCIpfSkub24odyxhKHQuX2tleWRvd24sdCkpLm9uKHksXCIuay1pY29uXCIsYSh0LnRvZ2dsZSx0KSkub24oeSx0Lm9wdGlvbnMudG9vbEljb24/XCIuay10b29sLWljb25cIjpcIi5rLXNlbGVjdGVkLWNvbG9yXCIsZnVuY3Rpb24oKXt0LnRyaWdnZXIoXCJhY3RpdmF0ZVwiKX0pfSxfdGVtcGxhdGU6cy50ZW1wbGF0ZSgnPHNwYW4gcm9sZT1cInRleHRib3hcIiBhcmlhLWhhc3BvcHVwPVwidHJ1ZVwiIGNsYXNzPVwiay13aWRnZXQgay1jb2xvcnBpY2tlciBrLWhlYWRlclwiPjxzcGFuIGNsYXNzPVwiay1waWNrZXItd3JhcCBrLXN0YXRlLWRlZmF1bHRcIj4jIGlmICh0b29sSWNvbikgeyAjPHNwYW4gY2xhc3M9XCJrLXRvb2wtaWNvbiAjPSB0b29sSWNvbiAjXCI+PHNwYW4gY2xhc3M9XCJrLXNlbGVjdGVkLWNvbG9yXCI+PC9zcGFuPjwvc3Bhbj4jIH0gZWxzZSB7ICM8c3BhbiBjbGFzcz1cImstc2VsZWN0ZWQtY29sb3JcIj48L3NwYW4+IyB9ICM8c3BhbiBjbGFzcz1cImstc2VsZWN0XCIgdW5zZWxlY3RhYmxlPVwib25cIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctc1wiIHVuc2VsZWN0YWJsZT1cIm9uXCI+PC9zcGFuPjwvc3Bhbj48L3NwYW4+PC9zcGFuPicpLG9wdGlvbnM6e25hbWU6XCJDb2xvclBpY2tlclwiLHBhbGV0dGU6bnVsbCxjb2x1bW5zOjEwLHRvb2xJY29uOm51bGwsdmFsdWU6bnVsbCxtZXNzYWdlczp2LG9wYWNpdHk6ITEsYnV0dG9uczohMCxwcmV2aWV3OiEwLEFSSUFUZW1wbGF0ZTonQ3VycmVudCBzZWxlY3RlZCBjb2xvciBpcyAjPWRhdGEgfHwgXCJcIiMnfSxldmVudHM6W1wiYWN0aXZhdGVcIixcImNoYW5nZVwiLFwic2VsZWN0XCIsXCJvcGVuXCIsXCJjbG9zZVwiXSxvcGVuOmZ1bmN0aW9uKCl7dGhpcy5fZ2V0UG9wdXAoKS5vcGVuKCl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5fZ2V0UG9wdXAoKS5jbG9zZSgpfSx0b2dnbGU6ZnVuY3Rpb24oKXt0aGlzLl9nZXRQb3B1cCgpLnRvZ2dsZSgpfSxjb2xvcjp4LmZuLmNvbG9yLHZhbHVlOnguZm4udmFsdWUsX3NlbGVjdDp4LmZuLl9zZWxlY3QsX3RyaWdnZXJTZWxlY3Q6eC5mbi5fdHJpZ2dlclNlbGVjdCxfaXNJbnB1dFR5cGVDb2xvcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudFswXTtyZXR1cm4vXmlucHV0JC9pLnRlc3QoZS50YWdOYW1lKSYmL15jb2xvciQvaS50ZXN0KGUudHlwZSl9LF91cGRhdGVVSTpmdW5jdGlvbihlKXt2YXIgdD1cIlwiO2UmJih0PXRoaXMuX2lzSW5wdXRUeXBlQ29sb3IoKXx8MT09ZS5hP2UudG9Dc3MoKTplLnRvQ3NzUmdiYSgpLHRoaXMuZWxlbWVudC52YWwodCkpLHRoaXMuX2FyaWFUZW1wbGF0ZXx8KHRoaXMuX2FyaWFUZW1wbGF0ZT1zLnRlbXBsYXRlKHRoaXMub3B0aW9ucy5BUklBVGVtcGxhdGUpKSx0aGlzLndyYXBwZXIuYXR0cihcImFyaWEtbGFiZWxcIix0aGlzLl9hcmlhVGVtcGxhdGUodCkpLHRoaXMuX3RyaWdnZXJTZWxlY3QoZSksdGhpcy53cmFwcGVyLmZpbmQoXCIuay1zZWxlY3RlZC1jb2xvclwiKS5jc3MocCxlP2UudG9EaXNwbGF5KCk6XCJ0cmFuc3BhcmVudFwiKX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5rZXlDb2RlO3RoaXMuX2dldFBvcHVwKCkudmlzaWJsZSgpPyh0PT1oLkVTQz90aGlzLl9zZWxlY3Rvci5fY2FuY2VsKCk6dGhpcy5fc2VsZWN0b3IuX2tleWRvd24oZSksbyhlKSk6KHQ9PWguRU5URVJ8fHQ9PWguRE9XTikmJih0aGlzLm9wZW4oKSxvKGUpKX0sX2dldFBvcHVwOmZ1bmN0aW9uKCl7dmFyIHQsaSxyLG8sYT10aGlzLGw9YS5fcG9wdXA7cmV0dXJuIGx8fCh0PWEub3B0aW9ucyxpPXQucGFsZXR0ZT9DOlMsdC5fc3RhbmRhbG9uZT0hMSxkZWxldGUgdC5zZWxlY3QsZGVsZXRlIHQuY2hhbmdlLGRlbGV0ZSB0LmNhbmNlbCxyPXMuZ3VpZCgpLG89YS5fc2VsZWN0b3I9bmV3IGkoZSgnPGRpdiBpZD1cIicrcisnXCIvPicpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpLHQpLGEud3JhcHBlci5hdHRyKFwiYXJpYS1vd25zXCIsciksYS5fcG9wdXA9bD1vLndyYXBwZXIua2VuZG9Qb3B1cCh7YW5jaG9yOmEud3JhcHBlcn0pLmRhdGEoXCJrZW5kb1BvcHVwXCIpLG8uYmluZCh7c2VsZWN0OmZ1bmN0aW9uKGUpe2EuX3VwZGF0ZVVJKGQoZS52YWx1ZSkpfSxjaGFuZ2U6ZnVuY3Rpb24oKXthLl9zZWxlY3Qoby5jb2xvcigpKSxhLmNsb3NlKCl9LGNhbmNlbDpmdW5jdGlvbigpe2EuY2xvc2UoKX19KSxsLmJpbmQoe2Nsb3NlOmZ1bmN0aW9uKGUpe2lmKGEudHJpZ2dlcihcImNsb3NlXCIpKXJldHVybiBlLnByZXZlbnREZWZhdWx0KCksbjthLndyYXBwZXIuY2hpbGRyZW4oXCIuay1waWNrZXItd3JhcFwiKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtZm9jdXNlZFwiKTt2YXIgdD1vLl9zZWxlY3RPbkhpZGUoKTt0P2EuX3NlbGVjdCh0KTooYS53cmFwcGVyLmZvY3VzKCksYS5fdXBkYXRlVUkoYS5jb2xvcigpKSl9LG9wZW46ZnVuY3Rpb24oZSl7YS50cmlnZ2VyKFwib3BlblwiKT9lLnByZXZlbnREZWZhdWx0KCk6YS53cmFwcGVyLmNoaWxkcmVuKFwiLmstcGlja2VyLXdyYXBcIikuYWRkQ2xhc3MoXCJrLXN0YXRlLWZvY3VzZWRcIil9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7by5fc2VsZWN0KGEuY29sb3IoKSwhMCksby5mb2N1cygpLGEud3JhcHBlci5jaGlsZHJlbihcIi5rLXBpY2tlci13cmFwXCIpLmFkZENsYXNzKFwiay1zdGF0ZS1mb2N1c2VkXCIpfX0pKSxsfX0pO2wucGx1Z2luKEMpLGwucGx1Z2luKFMpLGwucGx1Z2luKFQpfShqUXVlcnkscGFyc2VJbnQpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQpe3JldHVybic8c3BhbiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctJytlKydcIiB0aXRsZT1cIicrdCsnXCI+Jyt0K1wiPC9zcGFuPjwvc3Bhbj5cIn12YXIgaT13aW5kb3cua2VuZG8scj1pLmNhcmV0LG89aS5rZXlzLGE9aS51aSxzPWEuV2lkZ2V0LGw9aS5fYWN0aXZlRWxlbWVudCxjPWkuX2V4dHJhY3RGb3JtYXQsZD1pLnBhcnNlRmxvYXQsdT1pLnN1cHBvcnQucGxhY2Vob2xkZXIsaD1pLmdldEN1bHR1cmUscD1pLl9yb3VuZCxmPVwiY2hhbmdlXCIsZz1cImRpc2FibGVkXCIsbT1cInJlYWRvbmx5XCIsdj1cImstaW5wdXRcIixfPVwic3BpblwiLHk9XCIua2VuZG9OdW1lcmljVGV4dEJveFwiLHc9XCJ0b3VjaGVuZFwiLGI9XCJtb3VzZWxlYXZlXCIreSxrPVwibW91c2VlbnRlclwiK3krXCIgXCIrYix4PVwiay1zdGF0ZS1kZWZhdWx0XCIsQz1cImstc3RhdGUtZm9jdXNlZFwiLFM9XCJrLXN0YXRlLWhvdmVyXCIsVD1cImZvY3VzXCIsRD1cIi5cIixBPVwiay1zdGF0ZS1zZWxlY3RlZFwiLEU9XCJrLXN0YXRlLWRpc2FibGVkXCIsTT1cImFyaWEtZGlzYWJsZWRcIixQPVwiYXJpYS1yZWFkb25seVwiLEk9L14oLSk/KFxcZCopJC8sej1udWxsLEY9ZS5wcm94eSxSPXMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsbil7dmFyIHIsbyxhLGwsZCx1PXRoaXMsaD1uJiZuLnN0ZXAhPT10O3MuZm4uaW5pdC5jYWxsKHUsZSxuKSxuPXUub3B0aW9ucyxlPXUuZWxlbWVudC5vbihcImZvY3Vzb3V0XCIreSxGKHUuX2ZvY3Vzb3V0LHUpKS5hdHRyKFwicm9sZVwiLFwic3BpbmJ1dHRvblwiKSxuLnBsYWNlaG9sZGVyPW4ucGxhY2Vob2xkZXJ8fGUuYXR0cihcInBsYWNlaG9sZGVyXCIpLHUuX3Jlc2V0KCksdS5fd3JhcHBlcigpLHUuX2Fycm93cygpLHUuX2lucHV0KCksaS5zdXBwb3J0Lm1vYmlsZU9TP3UuX3RleHQub24odyt5K1wiIFwiK1QreSxmdW5jdGlvbih0KXt1Ll90b2dnbGVUZXh0KCExKSx0LnR5cGU9PT1UJiZlLmZvY3VzKCl9KTp1Ll90ZXh0Lm9uKFQreSxGKHUuX2NsaWNrLHUpKSxyPXUubWluKGUuYXR0cihcIm1pblwiKSksbz11Lm1heChlLmF0dHIoXCJtYXhcIikpLGE9dS5fcGFyc2UoZS5hdHRyKFwic3RlcFwiKSksbi5taW49PT16JiZyIT09eiYmKG4ubWluPXIpLG4ubWF4PT09eiYmbyE9PXomJihuLm1heD1vKSxofHxhPT09enx8KG4uc3RlcD1hKSxlLmF0dHIoXCJhcmlhLXZhbHVlbWluXCIsbi5taW4pLmF0dHIoXCJhcmlhLXZhbHVlbWF4XCIsbi5tYXgpLG4uZm9ybWF0PWMobi5mb3JtYXQpLGw9bi52YWx1ZSx1LnZhbHVlKGwhPT16P2w6ZS52YWwoKSksZD1lLmlzKFwiW2Rpc2FibGVkXVwiKSxkP3UuZW5hYmxlKCExKTp1LnJlYWRvbmx5KGUuaXMoXCJbcmVhZG9ubHldXCIpKSxpLm5vdGlmeSh1KX0sb3B0aW9uczp7bmFtZTpcIk51bWVyaWNUZXh0Qm94XCIsZGVjaW1hbHM6eixtaW46eixtYXg6eix2YWx1ZTp6LHN0ZXA6MSxjdWx0dXJlOlwiXCIsZm9ybWF0OlwiblwiLHNwaW5uZXJzOiEwLHBsYWNlaG9sZGVyOlwiXCIsdXBBcnJvd1RleHQ6XCJJbmNyZWFzZSB2YWx1ZVwiLGRvd25BcnJvd1RleHQ6XCJEZWNyZWFzZSB2YWx1ZVwifSxldmVudHM6W2YsX10sX2VkaXRhYmxlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LmVsZW1lbnQsaT1lLmRpc2FibGUscj1lLnJlYWRvbmx5LG89dC5fdGV4dC5hZGQobiksYT10Ll9pbnB1dFdyYXBwZXIub2ZmKGspO3QuX3RvZ2dsZVRleHQoITApLHQuX3VwQXJyb3dFdmVudEhhbmRsZXIudW5iaW5kKFwicHJlc3NcIiksdC5fZG93bkFycm93RXZlbnRIYW5kbGVyLnVuYmluZChcInByZXNzXCIpLG4ub2ZmKFwia2V5ZG93blwiK3kpLm9mZihcImtleXByZXNzXCIreSkub2ZmKFwicGFzdGVcIit5KSxyfHxpPyhhLmFkZENsYXNzKGk/RTp4KS5yZW1vdmVDbGFzcyhpP3g6RSksby5hdHRyKGcsaSkuYXR0cihtLHIpLmF0dHIoTSxpKS5hdHRyKFAscikpOihhLmFkZENsYXNzKHgpLnJlbW92ZUNsYXNzKEUpLm9uKGssdC5fdG9nZ2xlSG92ZXIpLG8ucmVtb3ZlQXR0cihnKS5yZW1vdmVBdHRyKG0pLmF0dHIoTSwhMSkuYXR0cihQLCExKSx0Ll91cEFycm93RXZlbnRIYW5kbGVyLmJpbmQoXCJwcmVzc1wiLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0Ll9zcGluKDEpLHQuX3VwQXJyb3cuYWRkQ2xhc3MoQSl9KSx0Ll9kb3duQXJyb3dFdmVudEhhbmRsZXIuYmluZChcInByZXNzXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHQuX3NwaW4oLTEpLHQuX2Rvd25BcnJvdy5hZGRDbGFzcyhBKX0pLHQuZWxlbWVudC5vbihcImtleWRvd25cIit5LEYodC5fa2V5ZG93bix0KSkub24oXCJrZXlwcmVzc1wiK3ksRih0Ll9rZXlwcmVzcyx0KSkub24oXCJwYXN0ZVwiK3ksRih0Ll9wYXN0ZSx0KSkpfSxyZWFkb25seTpmdW5jdGlvbihlKXt0aGlzLl9lZGl0YWJsZSh7cmVhZG9ubHk6ZT09PXQ/ITA6ZSxkaXNhYmxlOiExfSl9LGVuYWJsZTpmdW5jdGlvbihlKXt0aGlzLl9lZGl0YWJsZSh7cmVhZG9ubHk6ITEsZGlzYWJsZTohKGU9ZT09PXQ/ITA6ZSl9KX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5lbGVtZW50LmFkZChlLl90ZXh0KS5hZGQoZS5fdXBBcnJvdykuYWRkKGUuX2Rvd25BcnJvdykuYWRkKGUuX2lucHV0V3JhcHBlcikub2ZmKHkpLGUuX3VwQXJyb3dFdmVudEhhbmRsZXIuZGVzdHJveSgpLGUuX2Rvd25BcnJvd0V2ZW50SGFuZGxlci5kZXN0cm95KCksZS5fZm9ybSYmZS5fZm9ybS5vZmYoXCJyZXNldFwiLGUuX3Jlc2V0SGFuZGxlcikscy5mbi5kZXN0cm95LmNhbGwoZSl9LG1pbjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb3B0aW9uKFwibWluXCIsZSl9LG1heDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb3B0aW9uKFwibWF4XCIsZSl9LHN0ZXA6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29wdGlvbihcInN0ZXBcIixlKX0sdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzO3JldHVybiBlPT09dD9pLl92YWx1ZTooZT1pLl9wYXJzZShlKSxuPWkuX2FkanVzdChlKSxlPT09biYmKGkuX3VwZGF0ZShlKSxpLl9vbGQ9aS5fdmFsdWUpLHQpfSxmb2N1czpmdW5jdGlvbigpe3RoaXMuX2ZvY3VzaW4oKX0sX2FkanVzdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLGk9bi5taW4scj1uLm1heDtyZXR1cm4gZT09PXo/ZTooaSE9PXomJmk+ZT9lPWk6ciE9PXomJmU+ciYmKGU9ciksZSl9LF9hcnJvd3M6ZnVuY3Rpb24oKXt2YXIgdCxyPXRoaXMsbz1mdW5jdGlvbigpe2NsZWFyVGltZW91dChyLl9zcGlubmluZyksdC5yZW1vdmVDbGFzcyhBKX0sYT1yLm9wdGlvbnMscz1hLnNwaW5uZXJzLGw9ci5lbGVtZW50O3Q9bC5zaWJsaW5ncyhcIi5rLWljb25cIiksdFswXXx8KHQ9ZShuKFwiblwiLGEudXBBcnJvd1RleHQpK24oXCJzXCIsYS5kb3duQXJyb3dUZXh0KSkuaW5zZXJ0QWZ0ZXIobCksdC53cmFwQWxsKCc8c3BhbiBjbGFzcz1cImstc2VsZWN0XCIvPicpKSxzfHwodC5wYXJlbnQoKS50b2dnbGUocyksci5faW5wdXRXcmFwcGVyLmFkZENsYXNzKFwiay1leHBhbmQtcGFkZGluZ1wiKSksci5fdXBBcnJvdz10LmVxKDApLHIuX3VwQXJyb3dFdmVudEhhbmRsZXI9bmV3IGkuVXNlckV2ZW50cyhyLl91cEFycm93LHtyZWxlYXNlOm99KSxyLl9kb3duQXJyb3c9dC5lcSgxKSxyLl9kb3duQXJyb3dFdmVudEhhbmRsZXI9bmV3IGkuVXNlckV2ZW50cyhyLl9kb3duQXJyb3cse3JlbGVhc2U6b30pfSxfYmx1cjpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fdG9nZ2xlVGV4dCghMCksZS5fY2hhbmdlKGUuZWxlbWVudC52YWwoKSl9LF9jbGljazpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2NsZWFyVGltZW91dCh0Ll9mb2N1c2luZyksdC5fZm9jdXNpbmc9c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBuLGksbyxhPWUudGFyZ2V0LHM9cihhKVswXSxsPWEudmFsdWUuc3Vic3RyaW5nKDAscyksYz10Ll9mb3JtYXQodC5vcHRpb25zLmZvcm1hdCksZD1jW1wiLFwiXSx1PTA7ZCYmKGk9UmVnRXhwKFwiXFxcXFwiK2QsXCJnXCIpLG89UmVnRXhwKFwiKFtcXFxcZFxcXFxcIitkK1wiXSspKFxcXFxcIitjW0RdK1wiKT8oXFxcXGQrKT9cIikpLG8mJihuPW8uZXhlYyhsKSksbiYmKHU9blswXS5yZXBsYWNlKGksXCJcIikubGVuZ3RoLC0xIT1sLmluZGV4T2YoXCIoXCIpJiYwPnQuX3ZhbHVlJiZ1KyspLHQuX2ZvY3VzaW4oKSxyKHQuZWxlbWVudFswXSx1KX0pfSxfY2hhbmdlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fdXBkYXRlKGUpLGU9dC5fdmFsdWUsdC5fb2xkIT1lJiYodC5fb2xkPWUsdC5lbGVtZW50LnRyaWdnZXIoZiksdC50cmlnZ2VyKGYpKX0sX2N1bHR1cmU6ZnVuY3Rpb24oZSl7cmV0dXJuIGV8fGgodGhpcy5vcHRpb25zLmN1bHR1cmUpfSxfZm9jdXNpbjpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5faW5wdXRXcmFwcGVyLmFkZENsYXNzKEMpLGUuX3RvZ2dsZVRleHQoITEpLGUuZWxlbWVudFswXS5mb2N1cygpfSxfZm9jdXNvdXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2NsZWFyVGltZW91dChlLl9mb2N1c2luZyksZS5faW5wdXRXcmFwcGVyLnJlbW92ZUNsYXNzKEMpLnJlbW92ZUNsYXNzKFMpLGUuX2JsdXIoKX0sX2Zvcm1hdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX2N1bHR1cmUodCkubnVtYmVyRm9ybWF0O3JldHVybiBlPWUudG9Mb3dlckNhc2UoKSxlLmluZGV4T2YoXCJjXCIpPi0xP249bi5jdXJyZW5jeTplLmluZGV4T2YoXCJwXCIpPi0xJiYobj1uLnBlcmNlbnQpLG59LF9pbnB1dDpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPVwiay1mb3JtYXR0ZWQtdmFsdWVcIixyPW4uZWxlbWVudC5hZGRDbGFzcyh2KS5zaG93KClbMF0sbz1yLmFjY2Vzc0tleSxhPW4ud3JhcHBlcjt0PWEuZmluZChEK2kpLHRbMF18fCh0PWUoJzxpbnB1dCB0eXBlPVwidGV4dFwiLz4nKS5pbnNlcnRCZWZvcmUocikuYWRkQ2xhc3MoaSkpO3RyeXtyLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInRleHRcIil9Y2F0Y2gocyl7ci50eXBlPVwidGV4dFwifXRbMF0udGFiSW5kZXg9ci50YWJJbmRleCx0WzBdLnN0eWxlLmNzc1RleHQ9ci5zdHlsZS5jc3NUZXh0LHQucHJvcChcInBsYWNlaG9sZGVyXCIsbi5vcHRpb25zLnBsYWNlaG9sZGVyKSxvJiYodC5hdHRyKFwiYWNjZXNza2V5XCIsbyksci5hY2Nlc3NLZXk9XCJcIiksbi5fdGV4dD10LmFkZENsYXNzKHIuY2xhc3NOYW1lKX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUua2V5Q29kZTt0Ll9rZXk9bixuPT1vLkRPV04/dC5fc3RlcCgtMSk6bj09by5VUD90Ll9zdGVwKDEpOm49PW8uRU5URVImJnQuX2NoYW5nZSh0LmVsZW1lbnQudmFsKCkpfSxfa2V5cHJlc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLGEscyxsLGMsZCx1LGgscDswPT09ZS53aGljaHx8ZS5jdHJsS2V5fHxlLmtleUNvZGU9PT1vLkJBQ0tTUEFDRXx8ZS5rZXlDb2RlPT09by5FTlRFUnx8KHQ9dGhpcyxuPXQub3B0aW9ucy5taW4saT10LmVsZW1lbnQsYT1yKGkpLHM9YVswXSxsPWFbMV0sYz1TdHJpbmcuZnJvbUNoYXJDb2RlKGUud2hpY2gpLGQ9dC5fZm9ybWF0KHQub3B0aW9ucy5mb3JtYXQpLHU9dC5fa2V5PT09by5OVU1QQURfRE9ULGg9aS52YWwoKSx1JiYoYz1kW0RdKSxoPWguc3Vic3RyaW5nKDAscykrYytoLnN1YnN0cmluZyhsKSxwPXQuX251bWVyaWNSZWdleChkKS50ZXN0KGgpLHAmJnU/KGkudmFsKGgpLHIoaSxzK2MubGVuZ3RoKSxlLnByZXZlbnREZWZhdWx0KCkpOihudWxsIT09biYmbj49MCYmXCItXCI9PT1oLmNoYXJBdCgwKXx8IXApJiZlLnByZXZlbnREZWZhdWx0KCksdC5fa2V5PTApfSxfbnVtZXJpY1JlZ2V4OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lW0RdLGk9dC5vcHRpb25zLmRlY2ltYWxzO3JldHVybiBuPT09RCYmKG49XCJcXFxcXCIrbiksaT09PXomJihpPWUuZGVjaW1hbHMpLDA9PT1pP0k6KHQuX3NlcGFyYXRvciE9PW4mJih0Ll9zZXBhcmF0b3I9bix0Ll9mbG9hdFJlZ0V4cD1SZWdFeHAoXCJeKC0pPygoKFxcXFxkKyhcIituK1wiXFxcXGQqKT8pfChcIituK1wiXFxcXGQqKSkpPyRcIikpLHQuX2Zsb2F0UmVnRXhwKX0sX3Bhc3RlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLnRhcmdldCxpPW4udmFsdWU7c2V0VGltZW91dChmdW5jdGlvbigpe3QuX3BhcnNlKG4udmFsdWUpPT09eiYmdC5fdXBkYXRlKGkpfSl9LF9vcHRpb246ZnVuY3Rpb24oZSxuKXt2YXIgaT10aGlzLHI9aS5vcHRpb25zO3JldHVybiBuPT09dD9yW2VdOihuPWkuX3BhcnNlKG4pLChufHxcInN0ZXBcIiE9PWUpJiYocltlXT1uLGkuZWxlbWVudC5hdHRyKFwiYXJpYS12YWx1ZVwiK2UsbikuYXR0cihlLG4pKSx0KX0sX3NwaW46ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3Q9dHx8NTAwLGNsZWFyVGltZW91dChuLl9zcGlubmluZyksbi5fc3Bpbm5pbmc9c2V0VGltZW91dChmdW5jdGlvbigpe24uX3NwaW4oZSw1MCl9LHQpLG4uX3N0ZXAoZSl9LF9zdGVwOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LmVsZW1lbnQsaT10Ll9wYXJzZShuLnZhbCgpKXx8MDtsKCkhPW5bMF0mJnQuX2ZvY3VzaW4oKSxpKz10Lm9wdGlvbnMuc3RlcCplLHQuX3VwZGF0ZSh0Ll9hZGp1c3QoaSkpLHQudHJpZ2dlcihfKX0sX3RvZ2dsZUhvdmVyOmZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS50b2dnbGVDbGFzcyhTLFwibW91c2VlbnRlclwiPT09dC50eXBlKX0sX3RvZ2dsZVRleHQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll90ZXh0LnRvZ2dsZShlKSx0LmVsZW1lbnQudG9nZ2xlKCFlKX0sX3BhcnNlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGQoZSx0aGlzLl9jdWx0dXJlKHQpLHRoaXMub3B0aW9ucy5mb3JtYXQpfSxfdXBkYXRlOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxyPW4ub3B0aW9ucyxvPXIuZm9ybWF0LGE9ci5kZWNpbWFscyxzPW4uX2N1bHR1cmUoKSxsPW4uX2Zvcm1hdChvLHMpO2E9PT16JiYoYT1sLmRlY2ltYWxzKSxlPW4uX3BhcnNlKGUscyksdD1lIT09eix0JiYoZT1wYXJzZUZsb2F0KHAoZSxhKSkpLG4uX3ZhbHVlPWU9bi5fYWRqdXN0KGUpLG4uX3BsYWNlaG9sZGVyKGkudG9TdHJpbmcoZSxvLHMpKSx0PyhlPVwiXCIrZSwtMSE9PWUuaW5kZXhPZihcImVcIikmJihlPXAoK2UsYSkpLGU9ZS5yZXBsYWNlKEQsbFtEXSkpOmU9XCJcIixuLmVsZW1lbnQudmFsKGUpLmF0dHIoXCJhcmlhLXZhbHVlbm93XCIsZSlcbn0sX3BsYWNlaG9sZGVyOmZ1bmN0aW9uKGUpe3RoaXMuX3RleHQudmFsKGUpLHV8fGV8fHRoaXMuX3RleHQudmFsKHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcil9LF93cmFwcGVyOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi5lbGVtZW50LHI9aVswXTt0PWkucGFyZW50cyhcIi5rLW51bWVyaWN0ZXh0Ym94XCIpLHQuaXMoXCJzcGFuLmstbnVtZXJpY3RleHRib3hcIil8fCh0PWkuaGlkZSgpLndyYXAoJzxzcGFuIGNsYXNzPVwiay1udW1lcmljLXdyYXAgay1zdGF0ZS1kZWZhdWx0XCIgLz4nKS5wYXJlbnQoKSx0PXQud3JhcChcIjxzcGFuLz5cIikucGFyZW50KCkpLHRbMF0uc3R5bGUuY3NzVGV4dD1yLnN0eWxlLmNzc1RleHQsci5zdHlsZS53aWR0aD1cIlwiLG4ud3JhcHBlcj10LmFkZENsYXNzKFwiay13aWRnZXQgay1udW1lcmljdGV4dGJveFwiKS5hZGRDbGFzcyhyLmNsYXNzTmFtZSkuY3NzKFwiZGlzcGxheVwiLFwiXCIpLG4uX2lucHV0V3JhcHBlcj1lKHRbMF0uZmlyc3RDaGlsZCl9LF9yZXNldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LmVsZW1lbnQsaT1uLmF0dHIoXCJmb3JtXCIpLHI9aT9lKFwiI1wiK2kpOm4uY2xvc2VzdChcImZvcm1cIik7clswXSYmKHQuX3Jlc2V0SGFuZGxlcj1mdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnZhbHVlKG5bMF0udmFsdWUpfSl9LHQuX2Zvcm09ci5vbihcInJlc2V0XCIsdC5fcmVzZXRIYW5kbGVyKSl9fSk7YS5wbHVnaW4oUil9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQobixpKXtuLmZpbHRlcnMmJihuLmZpbHRlcnM9ZS5ncmVwKG4uZmlsdGVycyxmdW5jdGlvbihlKXtyZXR1cm4gdChlLGkpLGUuZmlsdGVycz9lLmZpbHRlcnMubGVuZ3RoOmUuZmllbGQhPWl9KSl9ZnVuY3Rpb24gbihlKXt2YXIgdCxuLGkscixvLGE7aWYoZSYmZS5sZW5ndGgpZm9yKGE9W10sdD0wLG49ZS5sZW5ndGg7bj50O3QrKylpPWVbdF0sbz1pLnRleHR8fGkudmFsdWV8fGkscj1udWxsPT1pLnZhbHVlP2kudGV4dHx8aTppLnZhbHVlLGFbdF09e3RleHQ6byx2YWx1ZTpyfTtyZXR1cm4gYX1mdW5jdGlvbiBpKHQsbil7cmV0dXJuIGUuZ3JlcCh0LGZ1bmN0aW9uKHQpe3JldHVybiB0LmZpbHRlcnM/KHQuZmlsdGVycz1lLmdyZXAodC5maWx0ZXJzLGZ1bmN0aW9uKGUpe3JldHVybiBlLmZpZWxkIT1ufSksdC5maWx0ZXJzLmxlbmd0aCk6dC5maWVsZCE9bn0pfXZhciByPXdpbmRvdy5rZW5kbyxvPXIudWksYT1lLnByb3h5LHM9XCJrZW5kb1BvcHVwXCIsbD1cImluaXRcIixjPVwiLmtlbmRvRmlsdGVyTWVudVwiLGQ9XCJJcyBlcXVhbCB0b1wiLHU9XCJJcyBub3QgZXF1YWwgdG9cIixoPXtudW1iZXI6XCJudW1lcmljdGV4dGJveFwiLGRhdGU6XCJkYXRlcGlja2VyXCJ9LHA9e3N0cmluZzpcInRleHRcIixudW1iZXI6XCJudW1iZXJcIixkYXRlOlwiZGF0ZVwifSxmPXIuaXNGdW5jdGlvbixnPW8uV2lkZ2V0LG09JzxkaXY+PGRpdiBjbGFzcz1cImstZmlsdGVyLWhlbHAtdGV4dFwiPiM9bWVzc2FnZXMuaW5mbyM8L2Rpdj48bGFiZWw+PGlucHV0IHR5cGU9XCJyYWRpb1wiIGRhdGEtIz1ucyNiaW5kPVwiY2hlY2tlZDogZmlsdGVyc1swXS52YWx1ZVwiIHZhbHVlPVwidHJ1ZVwiIG5hbWU9XCJmaWx0ZXJzWzBdLnZhbHVlXCIvPiM9bWVzc2FnZXMuaXNUcnVlIzwvbGFiZWw+PGxhYmVsPjxpbnB1dCB0eXBlPVwicmFkaW9cIiBkYXRhLSM9bnMjYmluZD1cImNoZWNrZWQ6IGZpbHRlcnNbMF0udmFsdWVcIiB2YWx1ZT1cImZhbHNlXCIgbmFtZT1cImZpbHRlcnNbMF0udmFsdWVcIi8+Iz1tZXNzYWdlcy5pc0ZhbHNlIzwvbGFiZWw+PGRpdj48YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImstYnV0dG9uIGstcHJpbWFyeVwiPiM9bWVzc2FnZXMuZmlsdGVyIzwvYnV0dG9uPjxidXR0b24gdHlwZT1cInJlc2V0XCIgY2xhc3M9XCJrLWJ1dHRvblwiPiM9bWVzc2FnZXMuY2xlYXIjPC9idXR0b24+PC9kaXY+PC9kaXY+Jyx2PSc8ZGl2PjxkaXYgY2xhc3M9XCJrLWZpbHRlci1oZWxwLXRleHRcIj4jPW1lc3NhZ2VzLmluZm8jPC9kaXY+PHNlbGVjdCBkYXRhLSM9bnMjYmluZD1cInZhbHVlOiBmaWx0ZXJzWzBdLm9wZXJhdG9yXCIgZGF0YS0jPW5zI3JvbGU9XCJkcm9wZG93bmxpc3RcIj4jZm9yKHZhciBvcCBpbiBvcGVyYXRvcnMpeyM8b3B0aW9uIHZhbHVlPVwiIz1vcCNcIj4jPW9wZXJhdG9yc1tvcF0jPC9vcHRpb24+I30jPC9zZWxlY3Q+I2lmKHZhbHVlcyl7IzxzZWxlY3QgZGF0YS0jPW5zI2JpbmQ9XCJ2YWx1ZTpmaWx0ZXJzWzBdLnZhbHVlXCIgZGF0YS0jPW5zI3RleHQtZmllbGQ9XCJ0ZXh0XCIgZGF0YS0jPW5zI3ZhbHVlLWZpZWxkPVwidmFsdWVcIiBkYXRhLSM9bnMjc291cmNlPVxcJyM9a2VuZG8uc3RyaW5naWZ5KHZhbHVlcykucmVwbGFjZSgvXFwnL2csXCImXFxcXCMzOTtcIikjXFwnIGRhdGEtIz1ucyNyb2xlPVwiZHJvcGRvd25saXN0XCIgZGF0YS0jPW5zI29wdGlvbi1sYWJlbD1cIiM9bWVzc2FnZXMuc2VsZWN0VmFsdWUjXCI+PC9zZWxlY3Q+I31lbHNleyM8aW5wdXQgZGF0YS0jPW5zI2JpbmQ9XCJ2YWx1ZTpmaWx0ZXJzWzBdLnZhbHVlXCIgY2xhc3M9XCJrLXRleHRib3hcIiB0eXBlPVwidGV4dFwiICM9cm9sZSA/IFwiZGF0YS1cIiArIG5zICsgXCJyb2xlPVxcJ1wiICsgcm9sZSArIFwiXFwnXCIgOiBcIlwiIyAvPiN9IyNpZihleHRyYSl7IzxzZWxlY3QgY2xhc3M9XCJrLWZpbHRlci1hbmRcIiBkYXRhLSM9bnMjYmluZD1cInZhbHVlOiBsb2dpY1wiIGRhdGEtIz1ucyNyb2xlPVwiZHJvcGRvd25saXN0XCI+PG9wdGlvbiB2YWx1ZT1cImFuZFwiPiM9bWVzc2FnZXMuYW5kIzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9XCJvclwiPiM9bWVzc2FnZXMub3IjPC9vcHRpb24+PC9zZWxlY3Q+PHNlbGVjdCBkYXRhLSM9bnMjYmluZD1cInZhbHVlOiBmaWx0ZXJzWzFdLm9wZXJhdG9yXCIgZGF0YS0jPW5zI3JvbGU9XCJkcm9wZG93bmxpc3RcIj4jZm9yKHZhciBvcCBpbiBvcGVyYXRvcnMpeyM8b3B0aW9uIHZhbHVlPVwiIz1vcCNcIj4jPW9wZXJhdG9yc1tvcF0jPC9vcHRpb24+I30jPC9zZWxlY3Q+I2lmKHZhbHVlcyl7IzxzZWxlY3QgZGF0YS0jPW5zI2JpbmQ9XCJ2YWx1ZTpmaWx0ZXJzWzFdLnZhbHVlXCIgZGF0YS0jPW5zI3RleHQtZmllbGQ9XCJ0ZXh0XCIgZGF0YS0jPW5zI3ZhbHVlLWZpZWxkPVwidmFsdWVcIiBkYXRhLSM9bnMjc291cmNlPVxcJyM9a2VuZG8uc3RyaW5naWZ5KHZhbHVlcykucmVwbGFjZSgvXFwnL2csXCImXFxcXCMzOTtcIikjXFwnIGRhdGEtIz1ucyNyb2xlPVwiZHJvcGRvd25saXN0XCIgZGF0YS0jPW5zI29wdGlvbi1sYWJlbD1cIiM9bWVzc2FnZXMuc2VsZWN0VmFsdWUjXCI+PC9zZWxlY3Q+I31lbHNleyM8aW5wdXQgZGF0YS0jPW5zI2JpbmQ9XCJ2YWx1ZTogZmlsdGVyc1sxXS52YWx1ZVwiIGNsYXNzPVwiay10ZXh0Ym94XCIgdHlwZT1cInRleHRcIiAjPXJvbGUgPyBcImRhdGEtXCIgKyBucyArIFwicm9sZT1cXCdcIiArIHJvbGUgKyBcIlxcJ1wiIDogXCJcIiMvPiN9IyN9IzxkaXY+PGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3M9XCJrLWJ1dHRvbiBrLXByaW1hcnlcIj4jPW1lc3NhZ2VzLmZpbHRlciM8L2J1dHRvbj48YnV0dG9uIHR5cGU9XCJyZXNldFwiIGNsYXNzPVwiay1idXR0b25cIj4jPW1lc3NhZ2VzLmNsZWFyIzwvYnV0dG9uPjwvZGl2PjwvZGl2PicsXz0nPGRpdiBkYXRhLSM9bnMjcm9sZT1cInZpZXdcIiBkYXRhLSM9bnMjaW5pdC13aWRnZXRzPVwiZmFsc2VcIiBjbGFzcz1cImstZ3JpZC1maWx0ZXItbWVudVwiPjxkaXYgZGF0YS0jPW5zI3JvbGU9XCJoZWFkZXJcIiBjbGFzcz1cImstaGVhZGVyXCI+PGJ1dHRvbiBjbGFzcz1cImstYnV0dG9uIGstY2FuY2VsXCI+Iz1tZXNzYWdlcy5jYW5jZWwjPC9idXR0b24+Iz1maWVsZCM8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImstYnV0dG9uIGstc3VibWl0XCI+Iz1tZXNzYWdlcy5maWx0ZXIjPC9idXR0b24+PC9kaXY+PGZvcm0gY2xhc3M9XCJrLWZpbHRlci1tZW51IGstbW9iaWxlLWxpc3RcIj48dWwgY2xhc3M9XCJrLWZpbHRlci1oZWxwLXRleHRcIj48bGk+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj4jPW1lc3NhZ2VzLmluZm8jPC9zcGFuPjx1bD48bGkgY2xhc3M9XCJrLWl0ZW1cIj48bGFiZWwgY2xhc3M9XCJrLWxhYmVsXCI+Iz1tZXNzYWdlcy5vcGVyYXRvciM8c2VsZWN0IGRhdGEtIz1ucyNiaW5kPVwidmFsdWU6IGZpbHRlcnNbMF0ub3BlcmF0b3JcIj4jZm9yKHZhciBvcCBpbiBvcGVyYXRvcnMpeyM8b3B0aW9uIHZhbHVlPVwiIz1vcCNcIj4jPW9wZXJhdG9yc1tvcF0jPC9vcHRpb24+I30jPC9zZWxlY3Q+PC9sYWJlbD48L2xpPjxsaSBjbGFzcz1cImstaXRlbVwiPjxsYWJlbCBjbGFzcz1cImstbGFiZWxcIj4jPW1lc3NhZ2VzLnZhbHVlIyNpZih2YWx1ZXMpeyM8c2VsZWN0IGRhdGEtIz1ucyNiaW5kPVwidmFsdWU6ZmlsdGVyc1swXS52YWx1ZVwiPjxvcHRpb24gdmFsdWU9XCJcIj4jPW1lc3NhZ2VzLnNlbGVjdFZhbHVlIzwvb3B0aW9uPiNmb3IodmFyIHZhbCBpbiB2YWx1ZXMpeyM8b3B0aW9uIHZhbHVlPVwiIz12YWx1ZXNbdmFsXS52YWx1ZSNcIj4jPXZhbHVlc1t2YWxdLnRleHQjPC9vcHRpb24+I30jPC9zZWxlY3Q+I31lbHNleyM8aW5wdXQgZGF0YS0jPW5zI2JpbmQ9XCJ2YWx1ZTpmaWx0ZXJzWzBdLnZhbHVlXCIgY2xhc3M9XCJrLXRleHRib3hcIiB0eXBlPVwiIz1pbnB1dFR5cGUjXCIgIz11c2VSb2xlID8gXCJkYXRhLVwiICsgbnMgKyBcInJvbGU9XFwnXCIgKyByb2xlICsgXCJcXCdcIiA6IFwiXCIjIC8+I30jPC9sYWJlbD48L2xpPiNpZihleHRyYSl7IzwvdWw+PHVsIGNsYXNzPVwiay1maWx0ZXItaGVscC10ZXh0XCI+PGxpPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+PC9zcGFuPjxsaSBjbGFzcz1cImstaXRlbVwiPjxsYWJlbCBjbGFzcz1cImstbGFiZWxcIj48aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cImxvZ2ljXCIgY2xhc3M9XCJrLWNoZWNrXCIgZGF0YS0jPW5zI2JpbmQ9XCJjaGVja2VkOiBsb2dpY1wiIHZhbHVlPVwiYW5kXCIgLz4jPW1lc3NhZ2VzLmFuZCM8L2xhYmVsPjwvbGk+PGxpIGNsYXNzPVwiay1pdGVtXCI+PGxhYmVsIGNsYXNzPVwiay1sYWJlbFwiPjxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwibG9naWNcIiBjbGFzcz1cImstY2hlY2tcIiBkYXRhLSM9bnMjYmluZD1cImNoZWNrZWQ6IGxvZ2ljXCIgdmFsdWU9XCJvclwiIC8+Iz1tZXNzYWdlcy5vciM8L2xhYmVsPjwvbGk+PC91bD48dWwgY2xhc3M9XCJrLWZpbHRlci1oZWxwLXRleHRcIj48bGk+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj48L3NwYW4+PGxpIGNsYXNzPVwiay1pdGVtXCI+PGxhYmVsIGNsYXNzPVwiay1sYWJlbFwiPiM9bWVzc2FnZXMub3BlcmF0b3IjPHNlbGVjdCBkYXRhLSM9bnMjYmluZD1cInZhbHVlOiBmaWx0ZXJzWzFdLm9wZXJhdG9yXCI+I2Zvcih2YXIgb3AgaW4gb3BlcmF0b3JzKXsjPG9wdGlvbiB2YWx1ZT1cIiM9b3AjXCI+Iz1vcGVyYXRvcnNbb3BdIzwvb3B0aW9uPiN9Izwvc2VsZWN0PjwvbGFiZWw+PC9saT48bGkgY2xhc3M9XCJrLWl0ZW1cIj48bGFiZWwgY2xhc3M9XCJrLWxhYmVsXCI+Iz1tZXNzYWdlcy52YWx1ZSMjaWYodmFsdWVzKXsjPHNlbGVjdCBkYXRhLSM9bnMjYmluZD1cInZhbHVlOmZpbHRlcnNbMV0udmFsdWVcIj48b3B0aW9uIHZhbHVlPVwiXCI+Iz1tZXNzYWdlcy5zZWxlY3RWYWx1ZSM8L29wdGlvbj4jZm9yKHZhciB2YWwgaW4gdmFsdWVzKXsjPG9wdGlvbiB2YWx1ZT1cIiM9dmFsdWVzW3ZhbF0udmFsdWUjXCI+Iz12YWx1ZXNbdmFsXS50ZXh0Izwvb3B0aW9uPiN9Izwvc2VsZWN0PiN9ZWxzZXsjPGlucHV0IGRhdGEtIz1ucyNiaW5kPVwidmFsdWU6ZmlsdGVyc1sxXS52YWx1ZVwiIGNsYXNzPVwiay10ZXh0Ym94XCIgdHlwZT1cIiM9aW5wdXRUeXBlI1wiICM9dXNlUm9sZSA/IFwiZGF0YS1cIiArIG5zICsgXCJyb2xlPVxcJ1wiICsgcm9sZSArIFwiXFwnXCIgOiBcIlwiIyAvPiN9IzwvbGFiZWw+PC9saT4jfSM8L3VsPjwvbGk+PGxpIGNsYXNzPVwiay1idXR0b24tY29udGFpbmVyXCI+PGJ1dHRvbiB0eXBlPVwicmVzZXRcIiBjbGFzcz1cImstYnV0dG9uXCI+Iz1tZXNzYWdlcy5jbGVhciM8L2J1dHRvbj48L2xpPjwvdWw+PC9kaXY+PC9mb3JtPjwvZGl2PicseT0nPGRpdiBkYXRhLSM9bnMjcm9sZT1cInZpZXdcIiBkYXRhLSM9bnMjaW5pdC13aWRnZXRzPVwiZmFsc2VcIiBjbGFzcz1cImstZ3JpZC1maWx0ZXItbWVudVwiPjxkaXYgZGF0YS0jPW5zI3JvbGU9XCJoZWFkZXJcIiBjbGFzcz1cImstaGVhZGVyXCI+PGJ1dHRvbiBjbGFzcz1cImstYnV0dG9uIGstY2FuY2VsXCI+Iz1tZXNzYWdlcy5jYW5jZWwjPC9idXR0b24+Iz1maWVsZCM8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImstYnV0dG9uIGstc3VibWl0XCI+Iz1tZXNzYWdlcy5maWx0ZXIjPC9idXR0b24+PC9kaXY+PGZvcm0gY2xhc3M9XCJrLWZpbHRlci1tZW51IGstbW9iaWxlLWxpc3RcIj48dWwgY2xhc3M9XCJrLWZpbHRlci1oZWxwLXRleHRcIj48bGk+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj4jPW1lc3NhZ2VzLmluZm8jPC9zcGFuPjx1bD48bGkgY2xhc3M9XCJrLWl0ZW1cIj48bGFiZWwgY2xhc3M9XCJrLWxhYmVsXCI+PGlucHV0IGNsYXNzPVwiay1jaGVja1wiIHR5cGU9XCJyYWRpb1wiIGRhdGEtIz1ucyNiaW5kPVwiY2hlY2tlZDogZmlsdGVyc1swXS52YWx1ZVwiIHZhbHVlPVwidHJ1ZVwiIG5hbWU9XCJmaWx0ZXJzWzBdLnZhbHVlXCIvPiM9bWVzc2FnZXMuaXNUcnVlIzwvbGFiZWw+PC9saT48bGkgY2xhc3M9XCJrLWl0ZW1cIj48bGFiZWwgY2xhc3M9XCJrLWxhYmVsXCI+PGlucHV0IGNsYXNzPVwiay1jaGVja1wiIHR5cGU9XCJyYWRpb1wiIGRhdGEtIz1ucyNiaW5kPVwiY2hlY2tlZDogZmlsdGVyc1swXS52YWx1ZVwiIHZhbHVlPVwiZmFsc2VcIiBuYW1lPVwiZmlsdGVyc1swXS52YWx1ZVwiLz4jPW1lc3NhZ2VzLmlzRmFsc2UjPC9sYWJlbD48L2xpPjwvdWw+PC9saT48bGkgY2xhc3M9XCJrLWJ1dHRvbi1jb250YWluZXJcIj48YnV0dG9uIHR5cGU9XCJyZXNldFwiIGNsYXNzPVwiay1idXR0b25cIj4jPW1lc3NhZ2VzLmNsZWFyIzwvYnV0dG9uPjwvbGk+PC91bD48L2Zvcm0+PC9kaXY+Jyx3PWcuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIGksbyxzLGwsZD10aGlzLHU9XCJzdHJpbmdcIjtnLmZuLmluaXQuY2FsbChkLHQsbiksaT1kLm9wZXJhdG9ycz1uLm9wZXJhdG9yc3x8e30sdD1kLmVsZW1lbnQsbj1kLm9wdGlvbnMsbi5hcHBlbmRUb0VsZW1lbnR8fChzPXQuYWRkQ2xhc3MoXCJrLXdpdGgtaWNvbiBrLWZpbHRlcmFibGVcIikuZmluZChcIi5rLWdyaWQtZmlsdGVyXCIpLHNbMF18fChzPXQucHJlcGVuZCgnPGEgY2xhc3M9XCJrLWdyaWQtZmlsdGVyXCIgaHJlZj1cIiNcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWZpbHRlclwiLz48L2E+JykuZmluZChcIi5rLWdyaWQtZmlsdGVyXCIpKSxzLmF0dHIoXCJ0YWJpbmRleFwiLC0xKS5vbihcImNsaWNrXCIrYyxhKGQuX2NsaWNrLGQpKSksZC5saW5rPXN8fGUoKSxkLmRhdGFTb3VyY2U9bi5kYXRhU291cmNlLGQuZmllbGQ9bi5maWVsZHx8dC5hdHRyKHIuYXR0cihcImZpZWxkXCIpKSxkLm1vZGVsPWQuZGF0YVNvdXJjZS5yZWFkZXIubW9kZWwsZC5fcGFyc2U9ZnVuY3Rpb24oZSl7cmV0dXJuIGUrXCJcIn0sZC5tb2RlbCYmZC5tb2RlbC5maWVsZHMmJihsPWQubW9kZWwuZmllbGRzW2QuZmllbGRdLGwmJih1PWwudHlwZXx8XCJzdHJpbmdcIixsLnBhcnNlJiYoZC5fcGFyc2U9YShsLnBhcnNlLGwpKSkpLG4udmFsdWVzJiYodT1cImVudW1zXCIpLGQudHlwZT11LGk9aVt1XXx8bi5vcGVyYXRvcnNbdV07Zm9yKG8gaW4gaSlicmVhaztkLl9kZWZhdWx0RmlsdGVyPWZ1bmN0aW9uKCl7cmV0dXJue2ZpZWxkOmQuZmllbGQsb3BlcmF0b3I6b3x8XCJlcVwiLHZhbHVlOlwiXCJ9fSxkLl9yZWZyZXNoSGFuZGxlcj1hKGQucmVmcmVzaCxkKSxkLmRhdGFTb3VyY2UuYmluZChcImNoYW5nZVwiLGQuX3JlZnJlc2hIYW5kbGVyKSxuLmFwcGVuZFRvRWxlbWVudD9kLl9pbml0KCk6ZC5yZWZyZXNoKCl9LF9pbml0OmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi5vcHRpb25zLnVpLG89ZihpKTtuLnBhbmU9bi5vcHRpb25zLnBhbmUsbi5wYW5lJiYobi5faXNNb2JpbGU9ITApLG98fCh0PWl8fGhbbi50eXBlXSksbi5faXNNb2JpbGU/bi5fY3JlYXRlTW9iaWxlRm9ybSh0KTpuLl9jcmVhdGVGb3JtKHQpLG4uZm9ybS5vbihcInN1Ym1pdFwiK2MsYShuLl9zdWJtaXQsbikpLm9uKFwicmVzZXRcIitjLGEobi5fcmVzZXQsbikpLG8mJm4uZm9ybS5maW5kKFwiLmstdGV4dGJveFwiKS5yZW1vdmVDbGFzcyhcImstdGV4dGJveFwiKS5lYWNoKGZ1bmN0aW9uKCl7aShlKHRoaXMpKX0pLG4uZm9ybS5maW5kKFwiW1wiK3IuYXR0cihcInJvbGVcIikrXCI9bnVtZXJpY3RleHRib3hdXCIpLnJlbW92ZUNsYXNzKFwiay10ZXh0Ym94XCIpLmVuZCgpLmZpbmQoXCJbXCIrci5hdHRyKFwicm9sZVwiKStcIj1kYXRldGltZXBpY2tlcl1cIikucmVtb3ZlQ2xhc3MoXCJrLXRleHRib3hcIikuZW5kKCkuZmluZChcIltcIityLmF0dHIoXCJyb2xlXCIpK1wiPXRpbWVwaWNrZXJdXCIpLnJlbW92ZUNsYXNzKFwiay10ZXh0Ym94XCIpLmVuZCgpLmZpbmQoXCJbXCIrci5hdHRyKFwicm9sZVwiKStcIj1kYXRlcGlja2VyXVwiKS5yZW1vdmVDbGFzcyhcImstdGV4dGJveFwiKSxuLnJlZnJlc2goKSxuLnRyaWdnZXIobCx7ZmllbGQ6bi5maWVsZCxjb250YWluZXI6bi5mb3JtfSl9LF9jcmVhdGVGb3JtOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMsbz1pLm9wdGlvbnMsbD1pLm9wZXJhdG9yc3x8e30sZD1pLnR5cGU7bD1sW2RdfHxvLm9wZXJhdG9yc1tkXSxpLmZvcm09ZSgnPGZvcm0gY2xhc3M9XCJrLWZpbHRlci1tZW51XCIvPicpLmh0bWwoci50ZW1wbGF0ZShcImJvb2xlYW5cIj09PWQ/bTp2KSh7ZmllbGQ6aS5maWVsZCxmb3JtYXQ6by5mb3JtYXQsbnM6ci5ucyxtZXNzYWdlczpvLm1lc3NhZ2VzLGV4dHJhOm8uZXh0cmEsb3BlcmF0b3JzOmwsdHlwZTpkLHJvbGU6dCx2YWx1ZXM6bihvLnZhbHVlcyl9KSksby5hcHBlbmRUb0VsZW1lbnQ/KGkuZWxlbWVudC5hcHBlbmQoaS5mb3JtKSxpLnBvcHVwPWkuZWxlbWVudC5jbG9zZXN0KFwiLmstcG9wdXBcIikuZGF0YShzKSk6aS5wb3B1cD1pLmZvcm1bc10oe2FuY2hvcjppLmxpbmssb3BlbjphKGkuX29wZW4saSksYWN0aXZhdGU6YShpLl9hY3RpdmF0ZSxpKSxjbG9zZTpmdW5jdGlvbigpe2kub3B0aW9ucy5jbG9zZUNhbGxiYWNrJiZpLm9wdGlvbnMuY2xvc2VDYWxsYmFjayhpLmVsZW1lbnQpfX0pLmRhdGEocyksaS5mb3JtLm9uKFwia2V5ZG93blwiK2MsYShpLl9rZXlkb3duLGkpKX0sX2NyZWF0ZU1vYmlsZUZvcm06ZnVuY3Rpb24odCl7dmFyIGk9dGhpcyxvPWkub3B0aW9ucyxhPWkub3BlcmF0b3JzfHx7fSxzPWkudHlwZTthPWFbc118fG8ub3BlcmF0b3JzW3NdLGkuZm9ybT1lKFwiPGRpdiAvPlwiKS5odG1sKHIudGVtcGxhdGUoXCJib29sZWFuXCI9PT1zP3k6Xykoe2ZpZWxkOmkuZmllbGQsZm9ybWF0Om8uZm9ybWF0LG5zOnIubnMsbWVzc2FnZXM6by5tZXNzYWdlcyxleHRyYTpvLmV4dHJhLG9wZXJhdG9yczphLHR5cGU6cyxyb2xlOnQsdXNlUm9sZTohci5zdXBwb3J0LmlucHV0LmRhdGUmJlwiZGF0ZVwiPT09c3x8XCJudW1iZXJcIj09PXMsaW5wdXRUeXBlOnBbc10sdmFsdWVzOm4oby52YWx1ZXMpfSkpLGkudmlldz1pLnBhbmUuYXBwZW5kKGkuZm9ybS5odG1sKCkpLGkuZm9ybT1pLnZpZXcuZWxlbWVudC5maW5kKFwiZm9ybVwiKSxpLnZpZXcuZWxlbWVudC5vbihcImNsaWNrXCIsXCIuay1zdWJtaXRcIixmdW5jdGlvbihlKXtpLmZvcm0uc3VibWl0KCksZS5wcmV2ZW50RGVmYXVsdCgpfSkub24oXCJjbGlja1wiLFwiLmstY2FuY2VsXCIsZnVuY3Rpb24oZSl7aS5fY2xvc2VGb3JtKCksZS5wcmV2ZW50RGVmYXVsdCgpfSl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5kYXRhU291cmNlLmZpbHRlcigpfHx7ZmlsdGVyczpbXSxsb2dpYzpcImFuZFwifTtlLmZpbHRlck1vZGVsPXIub2JzZXJ2YWJsZSh7bG9naWM6XCJhbmRcIixmaWx0ZXJzOltlLl9kZWZhdWx0RmlsdGVyKCksZS5fZGVmYXVsdEZpbHRlcigpXX0pLGUuZm9ybSYmci5iaW5kKGUuZm9ybS5jaGlsZHJlbigpLmZpcnN0KCksZS5maWx0ZXJNb2RlbCksZS5fYmluZCh0KT9lLmxpbmsuYWRkQ2xhc3MoXCJrLXN0YXRlLWFjdGl2ZVwiKTplLmxpbmsucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWFjdGl2ZVwiKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7Zy5mbi5kZXN0cm95LmNhbGwoZSksZS5mb3JtJiYoci51bmJpbmQoZS5mb3JtKSxyLmRlc3Ryb3koZS5mb3JtKSxlLmZvcm0udW5iaW5kKGMpLGUucG9wdXAmJihlLnBvcHVwLmRlc3Ryb3koKSxlLnBvcHVwPW51bGwpLGUuZm9ybT1udWxsKSxlLnZpZXcmJihlLnZpZXcucHVyZ2UoKSxlLnZpZXc9bnVsbCksZS5saW5rLnVuYmluZChjKSxlLl9yZWZyZXNoSGFuZGxlciYmKGUuZGF0YVNvdXJjZS51bmJpbmQoXCJjaGFuZ2VcIixlLl9yZWZyZXNoSGFuZGxlciksZS5kYXRhU291cmNlPW51bGwpLGUuZWxlbWVudD1lLmxpbms9ZS5fcmVmcmVzaEhhbmRsZXI9ZS5maWx0ZXJNb2RlbD1udWxsfSxfYmluZDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvPXRoaXMsYT1lLmZpbHRlcnMscz0hMSxsPTAsYz1vLmZpbHRlck1vZGVsO2Zvcih0PTAsbj1hLmxlbmd0aDtuPnQ7dCsrKXI9YVt0XSxyLmZpZWxkPT1vLmZpZWxkPyhjLnNldChcImxvZ2ljXCIsZS5sb2dpYyksaT1jLmZpbHRlcnNbbF0saXx8KGMuZmlsdGVycy5wdXNoKHtmaWVsZDpvLmZpZWxkfSksaT1jLmZpbHRlcnNbbF0pLGkuc2V0KFwidmFsdWVcIixvLl9wYXJzZShyLnZhbHVlKSksaS5zZXQoXCJvcGVyYXRvclwiLHIub3BlcmF0b3IpLGwrKyxzPSEwKTpyLmZpbHRlcnMmJihzPXN8fG8uX2JpbmQocikpO3JldHVybiBzfSxfbWVyZ2U6ZnVuY3Rpb24obil7dmFyIGkscixvLGE9dGhpcyxzPW4ubG9naWN8fFwiYW5kXCIsbD1uLmZpbHRlcnMsYz1hLmRhdGFTb3VyY2UuZmlsdGVyKCl8fHtmaWx0ZXJzOltdLGxvZ2ljOlwiYW5kXCJ9O2Zvcih0KGMsYS5maWVsZCksbD1lLmdyZXAobCxmdW5jdGlvbihlKXtyZXR1cm5cIlwiIT09ZS52YWx1ZSYmbnVsbCE9ZS52YWx1ZX0pLHI9MCxvPWwubGVuZ3RoO28+cjtyKyspaT1sW3JdLGkudmFsdWU9YS5fcGFyc2UoaS52YWx1ZSk7cmV0dXJuIGwubGVuZ3RoJiYoYy5maWx0ZXJzLmxlbmd0aD8obi5maWx0ZXJzPWwsXCJhbmRcIiE9PWMubG9naWMmJihjLmZpbHRlcnM9W3tsb2dpYzpjLmxvZ2ljLGZpbHRlcnM6Yy5maWx0ZXJzfV0sYy5sb2dpYz1cImFuZFwiKSxjLmZpbHRlcnMucHVzaChsLmxlbmd0aD4xP246bFswXSkpOihjLmZpbHRlcnM9bCxjLmxvZ2ljPXMpKSxjfSxmaWx0ZXI6ZnVuY3Rpb24oZSl7ZT10aGlzLl9tZXJnZShlKSxlLmZpbHRlcnMubGVuZ3RoJiZ0aGlzLmRhdGFTb3VyY2UuZmlsdGVyKGUpfSxjbGVhcjpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LmRhdGFTb3VyY2UuZmlsdGVyKCl8fHtmaWx0ZXJzOltdfTtuLmZpbHRlcnM9ZS5ncmVwKG4uZmlsdGVycyxmdW5jdGlvbihlKXtyZXR1cm4gZS5maWx0ZXJzPyhlLmZpbHRlcnM9aShlLmZpbHRlcnMsdC5maWVsZCksZS5maWx0ZXJzLmxlbmd0aCk6ZS5maWVsZCE9dC5maWVsZH0pLG4uZmlsdGVycy5sZW5ndGh8fChuPW51bGwpLHQuZGF0YVNvdXJjZS5maWx0ZXIobil9LF9zdWJtaXQ6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5maWx0ZXIodGhpcy5maWx0ZXJNb2RlbC50b0pTT04oKSksdGhpcy5fY2xvc2VGb3JtKCl9LF9yZXNldDpmdW5jdGlvbigpe3RoaXMuY2xlYXIoKSx0aGlzLl9jbG9zZUZvcm0oKX0sX2Nsb3NlRm9ybTpmdW5jdGlvbigpe3RoaXMuX2lzTW9iaWxlP3RoaXMucGFuZS5uYXZpZ2F0ZShcIlwiLHRoaXMub3B0aW9ucy5hbmltYXRpb25zLnJpZ2h0KTp0aGlzLnBvcHVwLmNsb3NlKCl9LF9jbGljazpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLnBvcHVwfHx0aGlzLnBhbmV8fHRoaXMuX2luaXQoKSx0aGlzLl9pc01vYmlsZT90aGlzLnBhbmUubmF2aWdhdGUodGhpcy52aWV3LHRoaXMub3B0aW9ucy5hbmltYXRpb25zLmxlZnQpOnRoaXMucG9wdXAudG9nZ2xlKCl9LF9vcGVuOmZ1bmN0aW9uKCl7dmFyIHQ7ZShcIi5rLWZpbHRlci1tZW51XCIpLm5vdCh0aGlzLmZvcm0pLmVhY2goZnVuY3Rpb24oKXt0PWUodGhpcykuZGF0YShzKSx0JiZ0LmNsb3NlKCl9KX0sX2FjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5mb3JtLmZpbmQoXCI6a2VuZG9Gb2N1c2FibGU6Zmlyc3RcIikuZm9jdXMoKX0sX2tleWRvd246ZnVuY3Rpb24oZSl7ZS5rZXlDb2RlPT1yLmtleXMuRVNDJiZ0aGlzLnBvcHVwLmNsb3NlKCl9LGV2ZW50czpbbF0sb3B0aW9uczp7bmFtZTpcIkZpbHRlck1lbnVcIixleHRyYTohMCxhcHBlbmRUb0VsZW1lbnQ6ITEsdHlwZTpcInN0cmluZ1wiLG9wZXJhdG9yczp7c3RyaW5nOntlcTpkLG5lcTp1LHN0YXJ0c3dpdGg6XCJTdGFydHMgd2l0aFwiLGNvbnRhaW5zOlwiQ29udGFpbnNcIixkb2Vzbm90Y29udGFpbjpcIkRvZXMgbm90IGNvbnRhaW5cIixlbmRzd2l0aDpcIkVuZHMgd2l0aFwifSxudW1iZXI6e2VxOmQsbmVxOnUsZ3RlOlwiSXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvXCIsZ3Q6XCJJcyBncmVhdGVyIHRoYW5cIixsdGU6XCJJcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG9cIixsdDpcIklzIGxlc3MgdGhhblwifSxkYXRlOntlcTpkLG5lcTp1LGd0ZTpcIklzIGFmdGVyIG9yIGVxdWFsIHRvXCIsZ3Q6XCJJcyBhZnRlclwiLGx0ZTpcIklzIGJlZm9yZSBvciBlcXVhbCB0b1wiLGx0OlwiSXMgYmVmb3JlXCJ9LGVudW1zOntlcTpkLG5lcTp1fX0sbWVzc2FnZXM6e2luZm86XCJTaG93IGl0ZW1zIHdpdGggdmFsdWUgdGhhdDpcIixpc1RydWU6XCJpcyB0cnVlXCIsaXNGYWxzZTpcImlzIGZhbHNlXCIsZmlsdGVyOlwiRmlsdGVyXCIsY2xlYXI6XCJDbGVhclwiLGFuZDpcIkFuZFwiLG9yOlwiT3JcIixzZWxlY3RWYWx1ZTpcIi1TZWxlY3QgdmFsdWUtXCIsb3BlcmF0b3I6XCJPcGVyYXRvclwiLHZhbHVlOlwiVmFsdWVcIixjYW5jZWw6XCJDYW5jZWxcIn0sYW5pbWF0aW9uczp7bGVmdDpcInNsaWRlXCIscmlnaHQ6XCJzbGlkZTpyaWdodFwifX19KTtvLnBsdWdpbih3KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsdCl7cmV0dXJuIGU9ZS5zcGxpdChcIiBcIilbIXQrMF18fGUsZS5yZXBsYWNlKFwidG9wXCIsXCJ1cFwiKS5yZXBsYWNlKFwiYm90dG9tXCIsXCJkb3duXCIpfWZ1bmN0aW9uIGkoZSx0LG4pe2U9ZS5zcGxpdChcIiBcIilbIXQrMF18fGU7dmFyIGk9e29yaWdpbjpbXCJib3R0b21cIixuP1wicmlnaHRcIjpcImxlZnRcIl0scG9zaXRpb246W1widG9wXCIsbj9cInJpZ2h0XCI6XCJsZWZ0XCJdfSxyPS9sZWZ0fHJpZ2h0Ly50ZXN0KGUpO3JldHVybiByPyhpLm9yaWdpbj1bXCJ0b3BcIixlXSxpLnBvc2l0aW9uWzFdPWMuZGlyZWN0aW9uc1tlXS5yZXZlcnNlKTooaS5vcmlnaW5bMF09ZSxpLnBvc2l0aW9uWzBdPWMuZGlyZWN0aW9uc1tlXS5yZXZlcnNlKSxpLm9yaWdpbj1pLm9yaWdpbi5qb2luKFwiIFwiKSxpLnBvc2l0aW9uPWkucG9zaXRpb24uam9pbihcIiBcIiksaX1mdW5jdGlvbiByKHQsbil7dHJ5e3JldHVybiBlLmNvbnRhaW5zKHQsbil9Y2F0Y2goaSl7cmV0dXJuITF9fWZ1bmN0aW9uIG8odCl7dD1lKHQpLHQuYWRkQ2xhc3MoXCJrLWl0ZW1cIikuY2hpbGRyZW4oeCkuYWRkQ2xhc3MoUCksdC5jaGlsZHJlbihcImFcIikuYWRkQ2xhc3MoVCkuY2hpbGRyZW4oeCkuYWRkQ2xhc3MoUCksdC5maWx0ZXIoXCI6bm90KFtkaXNhYmxlZF0pXCIpLmFkZENsYXNzKEcpLHQuZmlsdGVyKFwiLmstc2VwYXJhdG9yOmVtcHR5XCIpLmFwcGVuZChcIiZuYnNwO1wiKSx0LmZpbHRlcihcImxpW2Rpc2FibGVkXVwiKS5hZGRDbGFzcyhZKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIikuYXR0cihcImFyaWEtZGlzYWJsZWRcIiwhMCksdC5maWx0ZXIoXCJbcm9sZV1cIikubGVuZ3RofHx0LmF0dHIoXCJyb2xlXCIsXCJtZW51aXRlbVwiKSx0LmNoaWxkcmVuKFwiLlwiK1QpLmxlbmd0aHx8dC5jb250ZW50cygpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiEodGhpcy5ub2RlTmFtZS5tYXRjaChiKXx8Mz09dGhpcy5ub2RlVHlwZSYmIWUudHJpbSh0aGlzLm5vZGVWYWx1ZSkpfSkud3JhcEFsbChcIjxzcGFuIGNsYXNzPSdcIitUK1wiJy8+XCIpLGEodCkscyh0KX1mdW5jdGlvbiBhKHQpe3Q9ZSh0KSx0LmZpbmQoXCI+IC5rLWxpbmsgPiBbY2xhc3MqPWstaS1hcnJvd106bm90KC5rLXNwcml0ZSlcIikucmVtb3ZlKCksdC5maWx0ZXIoXCI6aGFzKC5rLW1lbnUtZ3JvdXApXCIpLmNoaWxkcmVuKFwiLmstbGluazpub3QoOmhhcyhbY2xhc3MqPWstaS1hcnJvd106bm90KC5rLXNwcml0ZSkpKVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKSxuPXQucGFyZW50KCkucGFyZW50KCk7dC5hcHBlbmQoXCI8c3BhbiBjbGFzcz0nay1pY29uIFwiKyhuLmhhc0NsYXNzKFMrXCItaG9yaXpvbnRhbFwiKT9cImstaS1hcnJvdy1zXCI6XCJrLWktYXJyb3ctZVwiKStcIicvPlwiKX0pfWZ1bmN0aW9uIHModCl7dD1lKHQpLHQuZmlsdGVyKFwiLmstZmlyc3Q6bm90KDpmaXJzdC1jaGlsZClcIikucmVtb3ZlQ2xhc3MoTSksdC5maWx0ZXIoXCIuay1sYXN0Om5vdCg6bGFzdC1jaGlsZClcIikucmVtb3ZlQ2xhc3MoRCksdC5maWx0ZXIoXCI6Zmlyc3QtY2hpbGRcIikuYWRkQ2xhc3MoTSksdC5maWx0ZXIoXCI6bGFzdC1jaGlsZFwiKS5hZGRDbGFzcyhEKX12YXIgbCxjPXdpbmRvdy5rZW5kbyxkPWMudWksdT1jLl9hY3RpdmVFbGVtZW50LGg9Yy5zdXBwb3J0LnRvdWNoJiZjLnN1cHBvcnQubW9iaWxlT1MscD1cIm1vdXNlZG93blwiLGY9XCJjbGlja1wiLGc9ZS5leHRlbmQsbT1lLnByb3h5LHY9ZS5lYWNoLF89Yy50ZW1wbGF0ZSx5PWMua2V5cyx3PWQuV2lkZ2V0LGI9L14odWx8YXxkaXYpJC9pLGs9XCIua2VuZG9NZW51XCIseD1cImltZ1wiLEM9XCJvcGVuXCIsUz1cImstbWVudVwiLFQ9XCJrLWxpbmtcIixEPVwiay1sYXN0XCIsQT1cImNsb3NlXCIsRT1cInRpbWVyXCIsTT1cImstZmlyc3RcIixQPVwiay1pbWFnZVwiLEk9XCJzZWxlY3RcIix6PVwiekluZGV4XCIsRj1cImFjdGl2YXRlXCIsUj1cImRlYWN0aXZhdGVcIixCPVwidG91Y2hzdGFydFwiK2srXCIgTVNQb2ludGVyRG93blwiK2srXCIgcG9pbnRlcmRvd25cIitrLEw9Yy5zdXBwb3J0LnBvaW50ZXJzLE89Yy5zdXBwb3J0Lm1zUG9pbnRlcnMsSD1PfHxMLE49TD9cInBvaW50ZXJvdmVyXCI6Tz9cIk1TUG9pbnRlck92ZXJcIjpcIm1vdXNlZW50ZXJcIixWPUw/XCJwb2ludGVyb3V0XCI6Tz9cIk1TUG9pbnRlck91dFwiOlwibW91c2VsZWF2ZVwiLFU9aHx8SCxXPWUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSxqPVwia2VuZG9Qb3B1cFwiLEc9XCJrLXN0YXRlLWRlZmF1bHRcIixxPVwiay1zdGF0ZS1ob3ZlclwiLCQ9XCJrLXN0YXRlLWZvY3VzZWRcIixZPVwiay1zdGF0ZS1kaXNhYmxlZFwiLEs9XCIuay1tZW51XCIsUT1cIi5rLW1lbnUtZ3JvdXBcIixYPVErXCIsLmstYW5pbWF0aW9uLWNvbnRhaW5lclwiLEo9XCI6bm90KC5rLWxpc3QpID4gLmstaXRlbVwiLFo9XCIuay1pdGVtLmstc3RhdGUtZGlzYWJsZWRcIixldD1cIi5rLWl0ZW06bm90KC5rLXN0YXRlLWRpc2FibGVkKVwiLHR0PVwiLmstaXRlbTpub3QoLmstc3RhdGUtZGlzYWJsZWQpID4gLmstbGlua1wiLG50PVwiOm5vdCguay1pdGVtLmstc2VwYXJhdG9yKVwiLGl0PW50K1wiOmVxKDApXCIscnQ9bnQrXCI6bGFzdFwiLG90PVwiZGl2Om5vdCguay1hbmltYXRpb24tY29udGFpbmVyLC5rLWxpc3QtY29udGFpbmVyKVwiLGF0PXsyOjEsdG91Y2g6MX0sc3Q9e2NvbnRlbnQ6XyhcIjxkaXYgY2xhc3M9J2stY29udGVudCAjPSBncm91cENzc0NsYXNzKCkgIycgdGFiaW5kZXg9Jy0xJz4jPSBjb250ZW50KGl0ZW0pICM8L2Rpdj5cIiksZ3JvdXA6XyhcIjx1bCBjbGFzcz0nIz0gZ3JvdXBDc3NDbGFzcyhncm91cCkgIycjPSBncm91cEF0dHJpYnV0ZXMoZ3JvdXApICMgcm9sZT0nbWVudScgYXJpYS1oaWRkZW49J3RydWUnPiM9IHJlbmRlckl0ZW1zKGRhdGEpICM8L3VsPlwiKSxpdGVtV3JhcHBlcjpfKFwiPCM9IHRhZyhpdGVtKSAjIGNsYXNzPScjPSB0ZXh0Q2xhc3MoaXRlbSkgIycjPSB0ZXh0QXR0cmlidXRlcyhpdGVtKSAjPiM9IGltYWdlKGl0ZW0pICMjPSBzcHJpdGUoaXRlbSkgIyM9IHRleHQoaXRlbSkgIyM9IGFycm93KGRhdGEpICM8LyM9IHRhZyhpdGVtKSAjPlwiKSxpdGVtOl8oXCI8bGkgY2xhc3M9JyM9IHdyYXBwZXJDc3NDbGFzcyhncm91cCwgaXRlbSkgIycgcm9sZT0nbWVudWl0ZW0nICM9aXRlbS5pdGVtcyA/IFxcXCJhcmlhLWhhc3BvcHVwPSd0cnVlJ1xcXCI6IFxcXCJcXFwiIyM9aXRlbS5lbmFibGVkID09PSBmYWxzZSA/IFxcXCJhcmlhLWRpc2FibGVkPSd0cnVlJ1xcXCIgOiAnJyM+Iz0gaXRlbVdyYXBwZXIoZGF0YSkgIyMgaWYgKGl0ZW0uaXRlbXMpIHsgIyM9IHN1Ykdyb3VwKHsgaXRlbXM6IGl0ZW0uaXRlbXMsIG1lbnU6IG1lbnUsIGdyb3VwOiB7IGV4cGFuZGVkOiBpdGVtLmV4cGFuZGVkIH0gfSkgIyMgfSBlbHNlIGlmIChpdGVtLmNvbnRlbnQgfHwgaXRlbS5jb250ZW50VXJsKSB7ICMjPSByZW5kZXJDb250ZW50KGRhdGEpICMjIH0gIzwvbGk+XCIpLGltYWdlOl8oXCI8aW1nIGNsYXNzPSdrLWltYWdlJyBhbHQ9Jycgc3JjPScjPSBpbWFnZVVybCAjJyAvPlwiKSxhcnJvdzpfKFwiPHNwYW4gY2xhc3M9JyM9IGFycm93Q2xhc3MoaXRlbSwgZ3JvdXApICMnPjwvc3Bhbj5cIiksc3ByaXRlOl8oXCI8c3BhbiBjbGFzcz0nay1zcHJpdGUgIz0gc3ByaXRlQ3NzQ2xhc3MgIyc+PC9zcGFuPlwiKSxlbXB0eTpfKFwiXCIpfSxsdD17d3JhcHBlckNzc0NsYXNzOmZ1bmN0aW9uKGUsdCl7dmFyIG49XCJrLWl0ZW1cIixpPXQuaW5kZXg7cmV0dXJuIG4rPXQuZW5hYmxlZD09PSExP1wiIGstc3RhdGUtZGlzYWJsZWRcIjpcIiBrLXN0YXRlLWRlZmF1bHRcIixlLmZpcnN0TGV2ZWwmJjA9PT1pJiYobis9XCIgay1maXJzdFwiKSxpPT1lLmxlbmd0aC0xJiYobis9XCIgay1sYXN0XCIpLHQuY3NzQ2xhc3MmJihuKz1cIiBcIit0LmNzc0NsYXNzKSxufSx0ZXh0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gVH0sdGV4dEF0dHJpYnV0ZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudXJsP1wiIGhyZWY9J1wiK2UudXJsK1wiJ1wiOlwiXCJ9LGFycm93Q2xhc3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj1cImstaWNvblwiO3JldHVybiBuKz10Lmhvcml6b250YWw/XCIgay1pLWFycm93LXNcIjpcIiBrLWktYXJyb3ctZVwifSx0ZXh0OmZ1bmN0aW9uKGUpe3JldHVybiBlLmVuY29kZWQ9PT0hMT9lLnRleHQ6Yy5odG1sRW5jb2RlKGUudGV4dCl9LHRhZzpmdW5jdGlvbihlKXtyZXR1cm4gZS51cmw/XCJhXCI6XCJzcGFuXCJ9LGdyb3VwQXR0cmlidXRlczpmdW5jdGlvbihlKXtyZXR1cm4gZS5leHBhbmRlZCE9PSEwP1wiIHN0eWxlPSdkaXNwbGF5Om5vbmUnXCI6XCJcIn0sZ3JvdXBDc3NDbGFzczpmdW5jdGlvbigpe3JldHVyblwiay1ncm91cCBrLW1lbnUtZ3JvdXBcIn0sY29udGVudDpmdW5jdGlvbihlKXtyZXR1cm4gZS5jb250ZW50P2UuY29udGVudDpcIiZuYnNwO1wifX0sY3Q9dy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzO3cuZm4uaW5pdC5jYWxsKGksdCxuKSx0PWkud3JhcHBlcj1pLmVsZW1lbnQsbj1pLm9wdGlvbnMsaS5faW5pdERhdGEobiksaS5fdXBkYXRlQ2xhc3NlcygpLGkuX2FuaW1hdGlvbnMobiksaS5uZXh0SXRlbVpJbmRleD0xMDAsaS5fdGFiaW5kZXgoKSxpLl9mb2N1c1Byb3h5PW0oaS5fZm9jdXNIYW5kbGVyLGkpLHQub24oQixpLl9mb2N1c1Byb3h5KS5vbihmK2ssWiwhMSkub24oZitrLGV0LG0oaS5fY2xpY2ssaSkpLm9uKFwia2V5ZG93blwiK2ssbShpLl9rZXlkb3duLGkpKS5vbihcImZvY3VzXCIrayxtKGkuX2ZvY3VzLGkpKS5vbihcImZvY3VzXCIrayxcIi5rLWNvbnRlbnRcIixtKGkuX2ZvY3VzLGkpKS5vbihCK1wiIFwiK3ArayxcIi5rLWNvbnRlbnRcIixtKGkuX3ByZXZlbnRDbG9zZSxpKSkub24oXCJibHVyXCIrayxtKGkuX3JlbW92ZUhvdmVySXRlbSxpKSkub24oXCJibHVyXCIrayxcIlt0YWJpbmRleF1cIixtKGkuX2NoZWNrQWN0aXZlRWxlbWVudCxpKSkub24oTitrLGV0LG0oaS5fbW91c2VlbnRlcixpKSkub24oVitrLGV0LG0oaS5fbW91c2VsZWF2ZSxpKSkub24oTitrK1wiIFwiK1YraytcIiBcIitwK2srXCIgXCIrZitrLHR0LG0oaS5fdG9nZ2xlSG92ZXIsaSkpLG4ub3Blbk9uQ2xpY2smJihpLmNsaWNrZWQ9ITEsaS5fZG9jdW1lbnRDbGlja0hhbmRsZXI9bShpLl9kb2N1bWVudENsaWNrLGkpLGUoZG9jdW1lbnQpLmNsaWNrKGkuX2RvY3VtZW50Q2xpY2tIYW5kbGVyKSksdC5hdHRyKFwicm9sZVwiLFwibWVudWJhclwiKSx0WzBdLmlkJiYoaS5fYXJpYUlkPWMuZm9ybWF0KFwiezB9X21uX2FjdGl2ZVwiLHRbMF0uaWQpKSxjLm5vdGlmeShpKX0sZXZlbnRzOltDLEEsRixSLEldLG9wdGlvbnM6e25hbWU6XCJNZW51XCIsYW5pbWF0aW9uOntvcGVuOntkdXJhdGlvbjoyMDB9LGNsb3NlOntkdXJhdGlvbjoxMDB9fSxvcmllbnRhdGlvbjpcImhvcml6b250YWxcIixkaXJlY3Rpb246XCJkZWZhdWx0XCIsb3Blbk9uQ2xpY2s6ITEsY2xvc2VPbkNsaWNrOiEwLGhvdmVyRGVsYXk6MTAwLHBvcHVwQ29sbGlzaW9uOnR9LF9pbml0RGF0YTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZGF0YVNvdXJjZSYmKHQuYW5ndWxhcihcImNsZWFudXBcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czp0LmVsZW1lbnQuY2hpbGRyZW4oKX19KSx0LmVsZW1lbnQuZW1wdHkoKSx0LmFwcGVuZChlLmRhdGFTb3VyY2UsdC5lbGVtZW50KSx0LmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6dC5lbGVtZW50LmNoaWxkcmVuKCl9fSkpfSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9ucy5hbmltYXRpb247dGhpcy5fYW5pbWF0aW9ucyhlKSxlLmFuaW1hdGlvbj1nKCEwLHQsZS5hbmltYXRpb24pLFwiZGF0YVNvdXJjZVwiaW4gZSYmdGhpcy5faW5pdERhdGEoZSksdGhpcy5fdXBkYXRlQ2xhc3NlcygpLHcuZm4uc2V0T3B0aW9ucy5jYWxsKHRoaXMsZSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3cuZm4uZGVzdHJveS5jYWxsKHQpLHQuZWxlbWVudC5vZmYoayksdC5fZG9jdW1lbnRDbGlja0hhbmRsZXImJmUoZG9jdW1lbnQpLnVuYmluZChcImNsaWNrXCIsdC5fZG9jdW1lbnRDbGlja0hhbmRsZXIpLGMuZGVzdHJveSh0LmVsZW1lbnQpfSxlbmFibGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fdG9nZ2xlRGlzYWJsZWQoZSx0IT09ITEpLHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3RvZ2dsZURpc2FibGVkKGUsITEpLHRoaXN9LGFwcGVuZDpmdW5jdGlvbihlLHQpe3Q9dGhpcy5lbGVtZW50LmZpbmQodCk7dmFyIG49dGhpcy5faW5zZXJ0KGUsdCx0Lmxlbmd0aD90LmZpbmQoXCI+IC5rLW1lbnUtZ3JvdXAsID4gLmstYW5pbWF0aW9uLWNvbnRhaW5lciA+IC5rLW1lbnUtZ3JvdXBcIik6bnVsbCk7cmV0dXJuIHYobi5pdGVtcyxmdW5jdGlvbigpe24uZ3JvdXAuYXBwZW5kKHRoaXMpLGEodGhpcyl9KSxhKHQpLHMobi5ncm91cC5maW5kKFwiLmstZmlyc3QsIC5rLWxhc3RcIikuYWRkKG4uaXRlbXMpKSx0aGlzfSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oZSx0KXt0PXRoaXMuZWxlbWVudC5maW5kKHQpO3ZhciBuPXRoaXMuX2luc2VydChlLHQsdC5wYXJlbnQoKSk7cmV0dXJuIHYobi5pdGVtcyxmdW5jdGlvbigpe3QuYmVmb3JlKHRoaXMpLGEodGhpcykscyh0aGlzKX0pLHModCksdGhpc30saW5zZXJ0QWZ0ZXI6ZnVuY3Rpb24oZSx0KXt0PXRoaXMuZWxlbWVudC5maW5kKHQpO3ZhciBuPXRoaXMuX2luc2VydChlLHQsdC5wYXJlbnQoKSk7cmV0dXJuIHYobi5pdGVtcyxmdW5jdGlvbigpe3QuYWZ0ZXIodGhpcyksYSh0aGlzKSxzKHRoaXMpfSkscyh0KSx0aGlzfSxfaW5zZXJ0OmZ1bmN0aW9uKHQsbixpKXt2YXIgcixhLHMsbCxjPXRoaXM7cmV0dXJuIG4mJm4ubGVuZ3RofHwoaT1jLmVsZW1lbnQpLHM9ZS5pc1BsYWluT2JqZWN0KHQpLGw9e2ZpcnN0TGV2ZWw6aS5oYXNDbGFzcyhTKSxob3Jpem9udGFsOmkuaGFzQ2xhc3MoUytcIi1ob3Jpem9udGFsXCIpLGV4cGFuZGVkOiEwLGxlbmd0aDppLmNoaWxkcmVuKCkubGVuZ3RofSxuJiYhaS5sZW5ndGgmJihpPWUoY3QucmVuZGVyR3JvdXAoe2dyb3VwOmx9KSkuYXBwZW5kVG8obikpLHN8fGUuaXNBcnJheSh0KT9yPWUoZS5tYXAocz9bdF06dCxmdW5jdGlvbih0LG4pe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0P2UodCkuZ2V0KCk6ZShjdC5yZW5kZXJJdGVtKHtncm91cDpsLGl0ZW06Zyh0LHtpbmRleDpufSl9KSkuZ2V0KCl9KSk6KHI9XCJzdHJpbmdcIj09dHlwZW9mIHQmJlwiPFwiIT10WzBdP2MuZWxlbWVudC5maW5kKHQpOmUodCksYT1yLmZpbmQoXCI+IHVsXCIpLmFkZENsYXNzKFwiay1tZW51LWdyb3VwXCIpLmF0dHIoXCJyb2xlXCIsXCJtZW51XCIpLHI9ci5maWx0ZXIoXCJsaVwiKSxyLmFkZChhLmZpbmQoXCI+IGxpXCIpKS5lYWNoKGZ1bmN0aW9uKCl7byh0aGlzKX0pKSx7aXRlbXM6cixncm91cDppfX0scmVtb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyO3JldHVybiBlPXRoaXMuZWxlbWVudC5maW5kKGUpLHQ9dGhpcyxuPWUucGFyZW50c1VudGlsKHQuZWxlbWVudCxKKSxpPWUucGFyZW50KFwidWw6bm90KC5rLW1lbnUpXCIpLGUucmVtb3ZlKCksaSYmIWkuY2hpbGRyZW4oSikubGVuZ3RoJiYocj1pLnBhcmVudChcIi5rLWFuaW1hdGlvbi1jb250YWluZXJcIiksci5sZW5ndGg/ci5yZW1vdmUoKTppLnJlbW92ZSgpKSxuLmxlbmd0aCYmKG49bi5lcSgwKSxhKG4pLHMobikpLHR9LG9wZW46ZnVuY3Rpb24ocil7dmFyIG89dGhpcyxhPW8ub3B0aW9ucyxzPVwiaG9yaXpvbnRhbFwiPT1hLm9yaWVudGF0aW9uLGw9YS5kaXJlY3Rpb24sZD1jLnN1cHBvcnQuaXNSdGwoby53cmFwcGVyKTtyZXR1cm4gcj1vLmVsZW1lbnQuZmluZChyKSwvXih0b3B8Ym90dG9tfGRlZmF1bHQpJC8udGVzdChsKSYmKGw9ZD9zPyhsK1wiIGxlZnRcIikucmVwbGFjZShcImRlZmF1bHRcIixcImJvdHRvbVwiKTpcImxlZnRcIjpzPyhsK1wiIHJpZ2h0XCIpLnJlcGxhY2UoXCJkZWZhdWx0XCIsXCJib3R0b21cIik6XCJyaWdodFwiKSxyLnNpYmxpbmdzKCkuZmluZChcIj4uay1wb3B1cDp2aXNpYmxlLD4uay1hbmltYXRpb24tY29udGFpbmVyPi5rLXBvcHVwOnZpc2libGVcIikuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcykuZGF0YShcImtlbmRvUG9wdXBcIik7dCYmdC5jbG9zZSgpfSksci5lYWNoKGZ1bmN0aW9uKCl7dmFyIHI9ZSh0aGlzKTtjbGVhclRpbWVvdXQoci5kYXRhKEUpKSxyLmRhdGEoRSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHUsaCxwLGYsbSx2LF8seSx3PXIuZmluZChcIi5rLW1lbnUtZ3JvdXA6Zmlyc3Q6aGlkZGVuXCIpO3dbMF0mJm8uX3RyaWdnZXJFdmVudCh7aXRlbTpyWzBdLHR5cGU6Q30pPT09ITEmJighdy5maW5kKFwiLmstbWVudS1ncm91cFwiKVswXSYmdy5jaGlsZHJlbihcIi5rLWl0ZW1cIikubGVuZ3RoPjE/KGg9ZSh3aW5kb3cpLmhlaWdodCgpLHA9ZnVuY3Rpb24oKXt3LmNzcyh7bWF4SGVpZ2h0OmgtKHcub3V0ZXJIZWlnaHQoKS13LmhlaWdodCgpKS1jLmdldFNoYWRvd3ModykuYm90dG9tLG92ZXJmbG93OlwiYXV0b1wifSl9LGMuc3VwcG9ydC5icm93c2VyLm1zaWUmJjc+PWMuc3VwcG9ydC5icm93c2VyLnZlcnNpb24/c2V0VGltZW91dChwLDApOnAoKSk6dy5jc3Moe21heEhlaWdodDpcIlwiLG92ZXJmbG93OlwiXCJ9KSxyLmRhdGEoeixyLmNzcyh6KSksci5jc3MoeixvLm5leHRJdGVtWkluZGV4KyspLHU9dy5kYXRhKGopLGY9ci5wYXJlbnQoKS5oYXNDbGFzcyhTKSxtPWYmJnMsdj1pKGwsZixkKSxfPWEuYW5pbWF0aW9uLm9wZW4uZWZmZWN0cyx5PV8hPT10P186XCJzbGlkZUluOlwiK24obCxmKSx1Pyh1PXcuZGF0YShqKSx1Lm9wdGlvbnMub3JpZ2luPXYub3JpZ2luLHUub3B0aW9ucy5wb3NpdGlvbj12LnBvc2l0aW9uLHUub3B0aW9ucy5hbmltYXRpb24ub3Blbi5lZmZlY3RzPXkpOnU9dy5rZW5kb1BvcHVwKHthY3RpdmF0ZTpmdW5jdGlvbigpe28uX3RyaWdnZXJFdmVudCh7aXRlbTp0aGlzLndyYXBwZXIucGFyZW50KCksdHlwZTpGfSl9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oZSl7ZS5zZW5kZXIuZWxlbWVudC5yZW1vdmVEYXRhKFwidGFyZ2V0VHJhbnNmb3JtXCIpLmNzcyh7b3BhY2l0eTpcIlwifSksby5fdHJpZ2dlckV2ZW50KHtpdGVtOnRoaXMud3JhcHBlci5wYXJlbnQoKSx0eXBlOlJ9KX0sb3JpZ2luOnYub3JpZ2luLHBvc2l0aW9uOnYucG9zaXRpb24sY29sbGlzaW9uOmEucG9wdXBDb2xsaXNpb24hPT10P2EucG9wdXBDb2xsaXNpb246bT9cImZpdFwiOlwiZml0IGZsaXBcIixhbmNob3I6cixhcHBlbmRUbzpyLGFuaW1hdGlvbjp7b3BlbjpnKCEwLHtlZmZlY3RzOnl9LGEuYW5pbWF0aW9uLm9wZW4pLGNsb3NlOmEuYW5pbWF0aW9uLmNsb3NlfSxjbG9zZTpmdW5jdGlvbihlKXt2YXIgdD1lLnNlbmRlci53cmFwcGVyLnBhcmVudCgpO28uX3RyaWdnZXJFdmVudCh7aXRlbTp0WzBdLHR5cGU6QX0pP2UucHJldmVudERlZmF1bHQoKToodC5jc3Moeix0LmRhdGEoeikpLHQucmVtb3ZlRGF0YSh6KSxVJiYodC5yZW1vdmVDbGFzcyhxKSxvLl9yZW1vdmVIb3Zlckl0ZW0oKSkpfX0pLmRhdGEoaiksdy5yZW1vdmVBdHRyKFwiYXJpYS1oaWRkZW5cIiksdS5vcGVuKCkpfSxvLm9wdGlvbnMuaG92ZXJEZWxheSkpfSksb30sY2xvc2U6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzLHI9aS5lbGVtZW50O3JldHVybiB0PXIuZmluZCh0KSx0Lmxlbmd0aHx8KHQ9ci5maW5kKFwiPi5rLWl0ZW1cIikpLHQuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7IW4mJmkuX2lzUm9vdEl0ZW0odCkmJihpLmNsaWNrZWQ9ITEpLGNsZWFyVGltZW91dCh0LmRhdGEoRSkpLHQuZGF0YShFLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgZT10LmZpbmQoXCIuay1tZW51LWdyb3VwOm5vdCguay1saXN0LWNvbnRhaW5lcik6bm90KC5rLWNhbGVuZGFyLWNvbnRhaW5lcik6Zmlyc3Q6dmlzaWJsZVwiKS5kYXRhKGopO2UmJihlLmNsb3NlKCksZS5lbGVtZW50LmF0dHIoXCJhcmlhLWhpZGRlblwiLCEwKSl9LGkub3B0aW9ucy5ob3ZlckRlbGF5KSl9KSxpfSxfdG9nZ2xlRGlzYWJsZWQ6ZnVuY3Rpb24odCxuKXt0aGlzLmVsZW1lbnQuZmluZCh0KS5lYWNoKGZ1bmN0aW9uKCl7ZSh0aGlzKS50b2dnbGVDbGFzcyhHLG4pLnRvZ2dsZUNsYXNzKFksIW4pLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsIW4pfSl9LF90b2dnbGVIb3ZlcjpmdW5jdGlvbih0KXt2YXIgbj1lKGMuZXZlbnRUYXJnZXQodCl8fHQudGFyZ2V0KS5jbG9zZXN0KEopLGk9dC50eXBlPT1OfHwtMSE9PXAuaW5kZXhPZih0LnR5cGUpO24ucGFyZW50cyhcImxpLlwiK1kpLmxlbmd0aHx8bi50b2dnbGVDbGFzcyhxLGl8fFwibW91c2Vkb3duXCI9PXQudHlwZXx8XCJjbGlja1wiPT10LnR5cGUpLHRoaXMuX3JlbW92ZUhvdmVySXRlbSgpfSxfcHJldmVudENsb3NlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmNsb3NlT25DbGlja3x8KHRoaXMuX2Nsb3N1cmVQcmV2ZW50ZWQ9ITApfSxfY2hlY2tBY3RpdmVFbGVtZW50OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1lKHQ/dC5jdXJyZW50VGFyZ2V0OnRoaXMuX2hvdmVySXRlbSgpKSxvPW4uX2ZpbmRSb290UGFyZW50KGkpWzBdO3RoaXMuX2Nsb3N1cmVQcmV2ZW50ZWR8fHNldFRpbWVvdXQoZnVuY3Rpb24oKXsoIWRvY3VtZW50Lmhhc0ZvY3VzKCl8fCFyKG8sYy5fYWN0aXZlRWxlbWVudCgpKSYmdCYmIXIobyx0LmN1cnJlbnRUYXJnZXQpKSYmbi5jbG9zZShvKX0sMCksdGhpcy5fY2xvc3VyZVByZXZlbnRlZD0hMX0sX3JlbW92ZUhvdmVySXRlbTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2hvdmVySXRlbSgpO2UmJmUuaGFzQ2xhc3MoJCkmJihlLnJlbW92ZUNsYXNzKCQpLHRoaXMuX29sZEhvdmVySXRlbT1udWxsKX0sX3VwZGF0ZUNsYXNzZXM6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuZWxlbWVudCxuPVwiLmstbWVudS1pbml0IGRpdiB1bFwiO3QucmVtb3ZlQ2xhc3MoXCJrLW1lbnUtaG9yaXpvbnRhbCBrLW1lbnUtdmVydGljYWxcIiksdC5hZGRDbGFzcyhcImstd2lkZ2V0IGstcmVzZXQgay1oZWFkZXIgay1tZW51LWluaXQgXCIrUykuYWRkQ2xhc3MoUytcIi1cIit0aGlzLm9wdGlvbnMub3JpZW50YXRpb24pLHQuZmluZChcImxpID4gdWxcIikuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIWMuc3VwcG9ydC5tYXRjaGVzU2VsZWN0b3IuY2FsbCh0aGlzLG4pfSkuYWRkQ2xhc3MoXCJrLWdyb3VwIGstbWVudS1ncm91cFwiKS5hdHRyKFwicm9sZVwiLFwibWVudVwiKS5hdHRyKFwiYXJpYS1oaWRkZW5cIix0LmlzKFwiOnZpc2libGVcIikpLmVuZCgpLmZpbmQoXCJsaSA+IGRpdlwiKS5hZGRDbGFzcyhcImstY29udGVudFwiKS5hdHRyKFwidGFiaW5kZXhcIixcIi0xXCIpLGU9dC5maW5kKFwiPiBsaSwuay1tZW51LWdyb3VwID4gbGlcIiksdC5yZW1vdmVDbGFzcyhcImstbWVudS1pbml0XCIpLGUuZWFjaChmdW5jdGlvbigpe28odGhpcyl9KX0sX21vdXNlZW50ZXI6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPWUodC5jdXJyZW50VGFyZ2V0KSxvPWkuY2hpbGRyZW4oXCIuay1hbmltYXRpb24tY29udGFpbmVyXCIpLmxlbmd0aHx8aS5jaGlsZHJlbihRKS5sZW5ndGg7dC5kZWxlZ2F0ZVRhcmdldD09aS5wYXJlbnRzKEspWzBdJiYobi5vcHRpb25zLm9wZW5PbkNsaWNrJiYhbi5jbGlja2VkfHxofHwoTHx8TykmJnQub3JpZ2luYWxFdmVudC5wb2ludGVyVHlwZSBpbiBhdCYmbi5faXNSb290SXRlbShpLmNsb3Nlc3QoSikpfHwhcih0LmN1cnJlbnRUYXJnZXQsdC5yZWxhdGVkVGFyZ2V0KSYmbyYmbi5vcGVuKGkpLChuLm9wdGlvbnMub3Blbk9uQ2xpY2smJm4uY2xpY2tlZHx8VSkmJmkuc2libGluZ3MoKS5lYWNoKG0oZnVuY3Rpb24oZSx0KXtuLmNsb3NlKHQsITApfSxuKSkpfSxfbW91c2VsZWF2ZTpmdW5jdGlvbihuKXt2YXIgaT10aGlzLG89ZShuLmN1cnJlbnRUYXJnZXQpLGE9by5jaGlsZHJlbihcIi5rLWFuaW1hdGlvbi1jb250YWluZXJcIikubGVuZ3RofHxvLmNoaWxkcmVuKFEpLmxlbmd0aDtyZXR1cm4gby5wYXJlbnRzVW50aWwoXCIuay1hbmltYXRpb24tY29udGFpbmVyXCIsXCIuay1saXN0LWNvbnRhaW5lciwuay1jYWxlbmRhci1jb250YWluZXJcIilbMF0/KG4uc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdCk6KGkub3B0aW9ucy5vcGVuT25DbGlja3x8aHx8KEx8fE8pJiZuLm9yaWdpbmFsRXZlbnQucG9pbnRlclR5cGUgaW4gYXR8fHIobi5jdXJyZW50VGFyZ2V0LG4ucmVsYXRlZFRhcmdldHx8bi50YXJnZXQpfHwhYXx8cihuLmN1cnJlbnRUYXJnZXQsYy5fYWN0aXZlRWxlbWVudCgpKXx8aS5jbG9zZShvKSx0KX0sX2NsaWNrOmZ1bmN0aW9uKG4pe3ZhciBpLHIsbyxhPXRoaXMscz1hLm9wdGlvbnMsbD1lKGMuZXZlbnRUYXJnZXQobikpLGQ9bFswXT9sWzBdLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk6XCJcIix1PVwiSU5QVVRcIj09ZHx8XCJTRUxFQ1RcIj09ZHx8XCJCVVRUT05cIj09ZHx8XCJMQUJFTFwiPT1kLGg9bC5jbG9zZXN0KFwiLlwiK1QpLHA9bC5jbG9zZXN0KEopLGY9aC5hdHRyKFwiaHJlZlwiKSxnPWwuYXR0cihcImhyZWZcIiksbT1lKFwiPGEgaHJlZj0nIycgLz5cIikuYXR0cihcImhyZWZcIiksdj0hIWYmJmYhPT1tLF89diYmISFmLm1hdGNoKC9eIy8pLHk9ISFnJiZnIT09bSx3PXMub3Blbk9uQ2xpY2smJm8mJmEuX2lzUm9vdEl0ZW0ocCk7aWYocy5vcGVuT25DbGlja3x8IXAuY2hpbGRyZW4ob3QpWzBdKXtpZihwLmhhc0NsYXNzKFkpKXJldHVybiBuLnByZXZlbnREZWZhdWx0KCksdDtpZihuLmhhbmRsZWR8fCFhLl90cmlnZ2VyRXZlbnQoe2l0ZW06cFswXSx0eXBlOkl9KXx8dXx8bi5wcmV2ZW50RGVmYXVsdCgpLG4uaGFuZGxlZD0hMCxyPXAuY2hpbGRyZW4oWCksbz1yLmlzKFwiOnZpc2libGVcIikscy5jbG9zZU9uQ2xpY2smJighdnx8XykmJighci5sZW5ndGh8fHcpKXJldHVybiBwLnJlbW92ZUNsYXNzKHEpLmNzcyhcImhlaWdodFwiKSxhLl9vbGRIb3Zlckl0ZW09YS5fZmluZFJvb3RQYXJlbnQocCksYS5jbG9zZShoLnBhcmVudHNVbnRpbChhLmVsZW1lbnQsSikpLGEuY2xpY2tlZD0hMSwtMSE9XCJNU1BvaW50ZXJVcFwiLmluZGV4T2Yobi50eXBlKSYmbi5wcmV2ZW50RGVmYXVsdCgpLHQ7diYmbi5lbnRlcktleSYmaFswXS5jbGljaygpLChhLl9pc1Jvb3RJdGVtKHApJiZzLm9wZW5PbkNsaWNrfHxjLnN1cHBvcnQudG91Y2h8fChMfHxPKSYmYS5faXNSb290SXRlbShwLmNsb3Nlc3QoSikpKSYmKHZ8fHV8fHl8fG4ucHJldmVudERlZmF1bHQoKSxhLmNsaWNrZWQ9ITAsaT1yLmlzKFwiOnZpc2libGVcIik/QTpDLChzLmNsb3NlT25DbGlja3x8aSE9QSkmJmFbaV0ocCkpfX0sX2RvY3VtZW50Q2xpY2s6ZnVuY3Rpb24oZSl7cih0aGlzLmVsZW1lbnRbMF0sZS50YXJnZXQpfHwodGhpcy5jbGlja2VkPSExKX0sX2ZvY3VzOmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMscj1uLnRhcmdldCxvPWkuX2hvdmVySXRlbSgpLGE9dSgpO3JldHVybiByPT1pLndyYXBwZXJbMF18fGUocikuaXMoXCI6a2VuZG9Gb2N1c2FibGVcIik/KGE9PT1uLmN1cnJlbnRUYXJnZXQmJihvLmxlbmd0aD9pLl9tb3ZlSG92ZXIoW10sbyk6aS5fb2xkSG92ZXJJdGVtfHxpLl9tb3ZlSG92ZXIoW10saS53cmFwcGVyLmNoaWxkcmVuKCkuZmlyc3QoKSkpLHQpOihuLnN0b3BQcm9wYWdhdGlvbigpLGUocikuY2xvc2VzdChcIi5rLWNvbnRlbnRcIikuY2xvc2VzdChcIi5rLW1lbnUtZ3JvdXBcIikuY2xvc2VzdChcIi5rLWl0ZW1cIikuYWRkQ2xhc3MoJCksaS53cmFwcGVyLmZvY3VzKCksdCl9LF9rZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciBuLGkscixvPXRoaXMsYT1lLmtleUNvZGUscz1vLl9vbGRIb3Zlckl0ZW0sbD1jLnN1cHBvcnQuaXNSdGwoby53cmFwcGVyKTtpZihlLnRhcmdldD09ZS5jdXJyZW50VGFyZ2V0fHxhPT15LkVTQyl7aWYoc3x8KHM9by5fb2xkSG92ZXJJdGVtPW8uX2hvdmVySXRlbSgpKSxpPW8uX2l0ZW1CZWxvbmdzVG9WZXJ0aXZhbChzKSxyPW8uX2l0ZW1IYXNDaGlsZHJlbihzKSxhPT15LlJJR0hUKW49b1tsP1wiX2l0ZW1MZWZ0XCI6XCJfaXRlbVJpZ2h0XCJdKHMsaSxyKTtlbHNlIGlmKGE9PXkuTEVGVCluPW9bbD9cIl9pdGVtUmlnaHRcIjpcIl9pdGVtTGVmdFwiXShzLGkscik7ZWxzZSBpZihhPT15LkRPV04pbj1vLl9pdGVtRG93bihzLGkscik7ZWxzZSBpZihhPT15LlVQKW49by5faXRlbVVwKHMsaSxyKTtlbHNlIGlmKGE9PXkuRVNDKW49by5faXRlbUVzYyhzLGkpO2Vsc2UgaWYoYT09eS5FTlRFUnx8YT09eS5TUEFDRUJBUiluPXMuY2hpbGRyZW4oXCIuay1saW5rXCIpLG4ubGVuZ3RoPjAmJihvLl9jbGljayh7dGFyZ2V0Om5bMF0scHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt9LGVudGVyS2V5OiEwfSksby5fbW92ZUhvdmVyKHMsby5fZmluZFJvb3RQYXJlbnQocykpKTtlbHNlIGlmKGE9PXkuVEFCKXJldHVybiBuPW8uX2ZpbmRSb290UGFyZW50KHMpLG8uX21vdmVIb3ZlcihzLG4pLG8uX2NoZWNrQWN0aXZlRWxlbWVudCgpLHQ7biYmblswXSYmKGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpKX19LF9ob3Zlckl0ZW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53cmFwcGVyLmZpbmQoXCIuay1pdGVtLmstc3RhdGUtaG92ZXIsLmstaXRlbS5rLXN0YXRlLWZvY3VzZWRcIikuZmlsdGVyKFwiOnZpc2libGVcIil9LF9pdGVtQmVsb25nc1RvVmVydGl2YWw6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy53cmFwcGVyLmhhc0NsYXNzKFwiay1tZW51LXZlcnRpY2FsXCIpO3JldHVybiBlLmxlbmd0aD9lLnBhcmVudCgpLmhhc0NsYXNzKFwiay1tZW51LWdyb3VwXCIpfHx0OnR9LF9pdGVtSGFzQ2hpbGRyZW46ZnVuY3Rpb24oZSl7cmV0dXJuIGUubGVuZ3RoP2UuY2hpbGRyZW4oXCJ1bC5rLW1lbnUtZ3JvdXAsIGRpdi5rLWFuaW1hdGlvbi1jb250YWluZXJcIikubGVuZ3RoPjA6ITF9LF9tb3ZlSG92ZXI6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzLHI9aS5fYXJpYUlkO3QubGVuZ3RoJiZuLmxlbmd0aCYmdC5yZW1vdmVDbGFzcygkKSxuLmxlbmd0aCYmKG5bMF0uaWQmJihyPW5bMF0uaWQpLG4uYWRkQ2xhc3MoJCksaS5fb2xkSG92ZXJJdGVtPW4sciYmKGkuZWxlbWVudC5yZW1vdmVBdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIpLGUoXCIjXCIrcikucmVtb3ZlQXR0cihcImlkXCIpLG4uYXR0cihcImlkXCIsciksaS5lbGVtZW50LmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixyKSkpfSxfZmluZFJvb3RQYXJlbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2lzUm9vdEl0ZW0oZSk/ZTplLnBhcmVudHNVbnRpbChLLFwibGkuay1pdGVtXCIpLmxhc3QoKX0sX2lzUm9vdEl0ZW06ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyZW50KCkuaGFzQ2xhc3MoUyl9LF9pdGVtUmlnaHQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbz10aGlzO2lmKCFlLmhhc0NsYXNzKFkpKXJldHVybiB0P24/KG8ub3BlbihlKSxpPWUuZmluZChcIi5rLW1lbnUtZ3JvdXBcIikuY2hpbGRyZW4oKS5maXJzdCgpKTpcImhvcml6b250YWxcIj09by5vcHRpb25zLm9yaWVudGF0aW9uJiYocj1vLl9maW5kUm9vdFBhcmVudChlKSxvLmNsb3NlKHIpLGk9ci5uZXh0QWxsKGl0KSk6KGk9ZS5uZXh0QWxsKGl0KSxpLmxlbmd0aHx8KGk9ZS5wcmV2QWxsKHJ0KSkpLGkmJiFpLmxlbmd0aD9pPW8ud3JhcHBlci5jaGlsZHJlbihcIi5rLWl0ZW1cIikuZmlyc3QoKTppfHwoaT1bXSksby5fbW92ZUhvdmVyKGUsaSksaX0sX2l0ZW1MZWZ0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzO3JldHVybiB0PyhuPWUucGFyZW50KCkuY2xvc2VzdChcIi5rLWl0ZW1cIiksaS5jbG9zZShuKSxpLl9pc1Jvb3RJdGVtKG4pJiZcImhvcml6b250YWxcIj09aS5vcHRpb25zLm9yaWVudGF0aW9uJiYobj1uLnByZXZBbGwoaXQpKSk6KG49ZS5wcmV2QWxsKGl0KSxuLmxlbmd0aHx8KG49ZS5uZXh0QWxsKHJ0KSkpLG4ubGVuZ3RofHwobj1pLndyYXBwZXIuY2hpbGRyZW4oXCIuay1pdGVtXCIpLmxhc3QoKSksaS5fbW92ZUhvdmVyKGUsbiksbn0sX2l0ZW1Eb3duOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPXRoaXM7aWYodClpPWUubmV4dEFsbChpdCk7ZWxzZXtpZighbnx8ZS5oYXNDbGFzcyhZKSlyZXR1cm47ci5vcGVuKGUpLGk9ZS5maW5kKFwiLmstbWVudS1ncm91cFwiKS5jaGlsZHJlbigpLmZpcnN0KCl9cmV0dXJuIWkubGVuZ3RoJiZlLmxlbmd0aD9pPWUucGFyZW50KCkuY2hpbGRyZW4oKS5maXJzdCgpOmUubGVuZ3RofHwoaT1yLndyYXBwZXIuY2hpbGRyZW4oXCIuay1pdGVtXCIpLmZpcnN0KCkpLHIuX21vdmVIb3ZlcihlLGkpLGl9LF9pdGVtVXA6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXM7aWYodClyZXR1cm4gbj1lLnByZXZBbGwoaXQpLCFuLmxlbmd0aCYmZS5sZW5ndGg/bj1lLnBhcmVudCgpLmNoaWxkcmVuKCkubGFzdCgpOmUubGVuZ3RofHwobj1pLndyYXBwZXIuY2hpbGRyZW4oXCIuay1pdGVtXCIpLmxhc3QoKSksaS5fbW92ZUhvdmVyKGUsbiksbn0sX2l0ZW1Fc2M6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXM7cmV0dXJuIHQ/KG49ZS5wYXJlbnQoKS5jbG9zZXN0KFwiLmstaXRlbVwiKSxpLmNsb3NlKG4pLGkuX21vdmVIb3ZlcihlLG4pLG4pOmV9LF90cmlnZ2VyRXZlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gdC50cmlnZ2VyKGUudHlwZSx7dHlwZTplLnR5cGUsaXRlbTplLml0ZW19KX0sX2ZvY3VzSGFuZGxlcjpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9ZShjLmV2ZW50VGFyZ2V0KHQpKS5jbG9zZXN0KEopO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtuLl9tb3ZlSG92ZXIoW10saSksaS5jaGlsZHJlbihcIi5rLWNvbnRlbnRcIilbMF0mJmkucGFyZW50KCkuY2xvc2VzdChcIi5rLWl0ZW1cIikucmVtb3ZlQ2xhc3MoJCl9LDIwMCl9LF9hbmltYXRpb25zOmZ1bmN0aW9uKGUpe2UmJlwiYW5pbWF0aW9uXCJpbiBlJiYhZS5hbmltYXRpb24mJihlLmFuaW1hdGlvbj17b3Blbjp7ZWZmZWN0czp7fX0sY2xvc2U6e2hpZGU6ITAsZWZmZWN0czp7fX19KX19KTtnKGN0LHtyZW5kZXJJdGVtOmZ1bmN0aW9uKGUpe2U9Zyh7bWVudTp7fSxncm91cDp7fX0sZSk7dmFyIHQ9c3QuZW1wdHksbj1lLml0ZW07cmV0dXJuIHN0Lml0ZW0oZyhlLHtpbWFnZTpuLmltYWdlVXJsP3N0LmltYWdlOnQsc3ByaXRlOm4uc3ByaXRlQ3NzQ2xhc3M/c3Quc3ByaXRlOnQsaXRlbVdyYXBwZXI6c3QuaXRlbVdyYXBwZXIscmVuZGVyQ29udGVudDpjdC5yZW5kZXJDb250ZW50LGFycm93Om4uaXRlbXN8fG4uY29udGVudD9zdC5hcnJvdzp0LHN1Ykdyb3VwOmN0LnJlbmRlckdyb3VwfSxsdCkpfSxyZW5kZXJHcm91cDpmdW5jdGlvbihlKXtyZXR1cm4gc3QuZ3JvdXAoZyh7cmVuZGVySXRlbXM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVwiXCIsbj0wLGk9ZS5pdGVtcyxyPWk/aS5sZW5ndGg6MCxvPWcoe2xlbmd0aDpyfSxlLmdyb3VwKTtyPm47bisrKXQrPWN0LnJlbmRlckl0ZW0oZyhlLHtncm91cDpvLGl0ZW06Zyh7aW5kZXg6bn0saVtuXSl9KSk7cmV0dXJuIHR9fSxlLGx0KSl9LHJlbmRlckNvbnRlbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHN0LmNvbnRlbnQoZyhlLGx0KSl9fSksbD1jdC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzO2N0LmZuLmluaXQuY2FsbChpLHQsbiksaS50YXJnZXQ9ZShpLm9wdGlvbnMudGFyZ2V0KSxpLl9wb3B1cCgpLGkuX3dpcmUoKX0sb3B0aW9uczp7bmFtZTpcIkNvbnRleHRNZW51XCIsZmlsdGVyOm51bGwsc2hvd09uOlwiY29udGV4dG1lbnVcIixvcmllbnRhdGlvbjpcInZlcnRpY2FsXCIsYWxpZ25Ub0FuY2hvcjohMSx0YXJnZXQ6XCJib2R5XCJ9LGV2ZW50czpbQyxBLEYsUixJXSxzZXRPcHRpb25zOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7Y3QuZm4uc2V0T3B0aW9ucy5jYWxsKG4sdCksbi50YXJnZXQub2ZmKG4uc2hvd09uK2ssbi5fc2hvd1Byb3h5KSxuLnVzZXJFdmVudHMmJm4udXNlckV2ZW50cy5kZXN0cm95KCksbi50YXJnZXQ9ZShuLm9wdGlvbnMudGFyZ2V0KSx0Lm9yaWVudGF0aW9uJiZuLnBvcHVwLndyYXBwZXJbMF0mJm4ucG9wdXAuZWxlbWVudC51bndyYXAoKSxuLl93aXJlKCksY3QuZm4uc2V0T3B0aW9ucy5jYWxsKHRoaXMsdCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UudGFyZ2V0Lm9mZihlLm9wdGlvbnMuc2hvd09uK2spLFcub2ZmKGMuc3VwcG9ydC5tb3VzZWRvd24rayxlLl9jbG9zZVByb3h5KSxlLnVzZXJFdmVudHMmJmUudXNlckV2ZW50cy5kZXN0cm95KCksY3QuZm4uZGVzdHJveS5jYWxsKGUpfSxvcGVuOmZ1bmN0aW9uKG4saSl7dmFyIG89dGhpcztyZXR1cm4gbj1lKG4pWzBdLHIoby5lbGVtZW50WzBdLGUobilbMF0pP2N0LmZuLm9wZW4uY2FsbChvLG4pOm8uX3RyaWdnZXJFdmVudCh7aXRlbTpvLmVsZW1lbnQsdHlwZTpDfSk9PT0hMSYmKG8ucG9wdXAudmlzaWJsZSgpJiZvLm9wdGlvbnMuZmlsdGVyJiZvLnBvcHVwLmNsb3NlKCEwKSxpIT09dD8oby5wb3B1cC53cmFwcGVyLmhpZGUoKSxvLnBvcHVwLm9wZW4obixpKSk6KG8ucG9wdXAub3B0aW9ucy5hbmNob3I9KG4/bjpvLnBvcHVwLmFuY2hvcil8fG8udGFyZ2V0LG8ucG9wdXAub3BlbigpKSxXLm9mZihvLnBvcHVwLmRvd25FdmVudCxvLnBvcHVwLl9tb3VzZWRvd25Qcm94eSksVy5vbihjLnN1cHBvcnQubW91c2Vkb3duK2ssby5fY2xvc2VQcm94eSkpLG99LGNsb3NlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyKHQuZWxlbWVudFswXSxlKGFyZ3VtZW50c1swXSlbMF0pP2N0LmZuLmNsb3NlLmNhbGwodCxhcmd1bWVudHNbMF0pOnQucG9wdXAudmlzaWJsZSgpJiZ0Ll90cmlnZ2VyRXZlbnQoe2l0ZW06dC5lbGVtZW50LHR5cGU6QX0pPT09ITEmJih0LnBvcHVwLmNsb3NlKCksVy5vZmYoYy5zdXBwb3J0Lm1vdXNlZG93bitrLHQuX2Nsb3NlUHJveHkpLHQudW5iaW5kKEksdC5fY2xvc2VUaW1lb3V0UHJveHkpKX0sX3Nob3dIYW5kbGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG49ZSxpPXRoaXMsbz1pLm9wdGlvbnM7ZS5ldmVudCYmKG49ZS5ldmVudCxuLnBhZ2VYPWUueC5sb2NhdGlvbixuLnBhZ2VZPWUueS5sb2NhdGlvbikscihpLmVsZW1lbnRbMF0sZS5yZWxhdGVkVGFyZ2V0fHxlLnRhcmdldCl8fChpLl9ldmVudE9yaWdpbj1uLG4ucHJldmVudERlZmF1bHQoKSxuLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGkuZWxlbWVudC5maW5kKFwiLlwiKyQpLnJlbW92ZUNsYXNzKCQpLChvLmZpbHRlciYmYy5zdXBwb3J0Lm1hdGNoZXNTZWxlY3Rvci5jYWxsKG4uY3VycmVudFRhcmdldCxvLmZpbHRlcil8fCFvLmZpbHRlcikmJihvLmFsaWduVG9BbmNob3I/aS5vcGVuKG4uY3VycmVudFRhcmdldCk6KGkucG9wdXAub3B0aW9ucy5hbmNob3I9bi5jdXJyZW50VGFyZ2V0LGkuX3RhcmdldENoaWxkPyh0PWkudGFyZ2V0Lm9mZnNldCgpLGkub3BlbihuLnBhZ2VYLXQubGVmdCxuLnBhZ2VZLXQudG9wKSk6aS5vcGVuKG4ucGFnZVgsbi5wYWdlWSkpKSl9LF9jbG9zZUhhbmRsZXI6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPWUodC5yZWxhdGVkVGFyZ2V0fHx0LnRhcmdldCksbz1pLmNsb3Nlc3Qobi50YXJnZXQuc2VsZWN0b3IpWzBdPT1uLnRhcmdldFswXSxhPWkuY2xvc2VzdChldCkuY2hpbGRyZW4oWCkscz1yKG4uZWxlbWVudFswXSxpWzBdKTtuLl9ldmVudE9yaWdpbj10LCFuLnBvcHVwLnZpc2libGUoKXx8KDM9PT10LndoaWNofHwhbykmJm98fCghbi5vcHRpb25zLmNsb3NlT25DbGlja3x8aHx8KEx8fE8pJiZ0Lm9yaWdpbmFsRXZlbnQucG9pbnRlclR5cGUgaW4gYXR8fGFbMF18fCFzKSYmc3x8KHM/KHRoaXMudW5iaW5kKEksdGhpcy5fY2xvc2VUaW1lb3V0UHJveHkpLG4uYmluZChJLG4uX2Nsb3NlVGltZW91dFByb3h5KSk6bi5jbG9zZSgpKVxufSxfd2lyZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm9wdGlvbnMsbj1lLnRhcmdldDtlLl9zaG93UHJveHk9bShlLl9zaG93SGFuZGxlcixlKSxlLl9jbG9zZVByb3h5PW0oZS5fY2xvc2VIYW5kbGVyLGUpLGUuX2Nsb3NlVGltZW91dFByb3h5PW0oZS5jbG9zZSxlKSxuWzBdJiYoYy5zdXBwb3J0Lm1vYmlsZU9TJiZcImNvbnRleHRtZW51XCI9PXQuc2hvd09uPyhlLnVzZXJFdmVudHM9bmV3IGMuVXNlckV2ZW50cyhuLHtmaWx0ZXI6dC5maWx0ZXIsYWxsb3dTZWxlY3Rpb246ITF9KSxuLm9uKHQuc2hvd09uK2ssITEpLGUudXNlckV2ZW50cy5iaW5kKFwiaG9sZFwiLGUuX3Nob3dQcm94eSkpOnQuZmlsdGVyP24ub24odC5zaG93T24rayx0LmZpbHRlcixlLl9zaG93UHJveHkpOm4ub24odC5zaG93T24rayxlLl9zaG93UHJveHkpKX0sX3RyaWdnZXJFdmVudDpmdW5jdGlvbihuKXt2YXIgaT10aGlzLHI9ZShpLnBvcHVwLm9wdGlvbnMuYW5jaG9yKVswXSxvPWkuX2V2ZW50T3JpZ2luO3JldHVybiBpLl9ldmVudE9yaWdpbj10LGkudHJpZ2dlcihuLnR5cGUsZyh7dHlwZTpuLnR5cGUsaXRlbTpuLml0ZW18fHRoaXMuZWxlbWVudFswXSx0YXJnZXQ6cn0sbz97ZXZlbnQ6b306e30pKX0sX3BvcHVwOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl90cmlnZ2VyUHJveHk9bShlLl90cmlnZ2VyRXZlbnQsZSksZS5wb3B1cD1lLmVsZW1lbnQuYWRkQ2xhc3MoXCJrLWNvbnRleHQtbWVudVwiKS5rZW5kb1BvcHVwKHthbmNob3I6ZS50YXJnZXR8fFwiYm9keVwiLGNvcHlBbmNob3JTdHlsZXM6ZS5vcHRpb25zLmNvcHlBbmNob3JTdHlsZXMsY29sbGlzaW9uOmUub3B0aW9ucy5wb3B1cENvbGxpc2lvbnx8XCJmaXRcIixhbmltYXRpb246ZS5vcHRpb25zLmFuaW1hdGlvbixhY3RpdmF0ZTplLl90cmlnZ2VyUHJveHksZGVhY3RpdmF0ZTplLl90cmlnZ2VyUHJveHl9KS5kYXRhKFwia2VuZG9Qb3B1cFwiKSxlLl90YXJnZXRDaGlsZD1yKGUudGFyZ2V0WzBdLGUucG9wdXAuZWxlbWVudFswXSl9fSksZC5wbHVnaW4oY3QpLGQucGx1Z2luKGwpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4odCl7cmV0dXJuIGUudHJpbSh0KS5yZXBsYWNlKC8mbmJzcDsvZ2ksXCJcIil9ZnVuY3Rpb24gaShlLHQpe3ZhciBuLGkscixvPXt9O2ZvcihuPTAsaT1lLmxlbmd0aDtpPm47bisrKXI9ZVtuXSxvW3JbdF1dPXI7cmV0dXJuIG99ZnVuY3Rpb24gcihlKXt2YXIgdCxuPVtdO2Zvcih0PTA7ZS5sZW5ndGg+dDt0KyspZVt0XS5jb2x1bW5zP249bi5jb25jYXQocihlW3RdLmNvbHVtbnMpKTpuLnB1c2goZVt0XSk7cmV0dXJuIG59dmFyIG89d2luZG93LmtlbmRvLGE9by51aSxzPWUucHJveHksbD1lLmV4dGVuZCxjPWUuZ3JlcCxkPWUubWFwLHU9ZS5pbkFycmF5LGg9XCJrLXN0YXRlLXNlbGVjdGVkXCIscD1cImFzY1wiLGY9XCJkZXNjXCIsZz1cImNoYW5nZVwiLG09XCJpbml0XCIsdj1cInNlbGVjdFwiLF89XCJrZW5kb1BvcHVwXCIseT1cImtlbmRvRmlsdGVyTWVudVwiLHc9XCJrZW5kb01lbnVcIixiPVwiLmtlbmRvQ29sdW1uTWVudVwiLGs9YS5XaWRnZXQseD1rLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpLHI9dGhpcztrLmZuLmluaXQuY2FsbChyLHQsbiksdD1yLmVsZW1lbnQsbj1yLm9wdGlvbnMsci5vd25lcj1uLm93bmVyLHIuZGF0YVNvdXJjZT1uLmRhdGFTb3VyY2Usci5maWVsZD10LmF0dHIoby5hdHRyKFwiZmllbGRcIikpLHIudGl0bGU9dC5hdHRyKG8uYXR0cihcInRpdGxlXCIpKSxpPXQuZmluZChcIi5rLWhlYWRlci1jb2x1bW4tbWVudVwiKSxpWzBdfHwoaT10LmFkZENsYXNzKFwiay13aXRoLWljb25cIikucHJlcGVuZCgnPGEgY2xhc3M9XCJrLWhlYWRlci1jb2x1bW4tbWVudVwiIGhyZWY9XCIjXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93aGVhZC1zXCIvPjwvYT4nKS5maW5kKFwiLmstaGVhZGVyLWNvbHVtbi1tZW51XCIpKSxyLmxpbms9aS5hdHRyKFwidGFiaW5kZXhcIiwtMSkub24oXCJjbGlja1wiK2IscyhyLl9jbGljayxyKSksci53cmFwcGVyPWUoJzxkaXYgY2xhc3M9XCJrLWNvbHVtbi1tZW51XCIvPicpfSxfaW5pdDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5wYW5lPWUub3B0aW9ucy5wYW5lLGUucGFuZSYmKGUuX2lzTW9iaWxlPSEwKSxlLl9pc01vYmlsZT9lLl9jcmVhdGVNb2JpbGVNZW51KCk6ZS5fY3JlYXRlTWVudSgpLGUuX2FuZ3VsYXJJdGVtcyhcImNvbXBpbGVcIiksZS5fc29ydCgpLGUuX2NvbHVtbnMoKSxlLl9maWx0ZXIoKSxlLl9sb2NrQ29sdW1ucygpLGUudHJpZ2dlcihtLHtmaWVsZDplLmZpZWxkLGNvbnRhaW5lcjplLndyYXBwZXJ9KX0sZXZlbnRzOlttXSxvcHRpb25zOntuYW1lOlwiQ29sdW1uTWVudVwiLG1lc3NhZ2VzOntzb3J0QXNjZW5kaW5nOlwiU29ydCBBc2NlbmRpbmdcIixzb3J0RGVzY2VuZGluZzpcIlNvcnQgRGVzY2VuZGluZ1wiLGZpbHRlcjpcIkZpbHRlclwiLGNvbHVtbnM6XCJDb2x1bW5zXCIsZG9uZTpcIkRvbmVcIixzZXR0aW5nczpcIkNvbHVtbiBTZXR0aW5nc1wiLGxvY2s6XCJMb2NrXCIsdW5sb2NrOlwiVW5sb2NrXCJ9LGZpbHRlcjpcIlwiLGNvbHVtbnM6ITAsc29ydGFibGU6ITAsZmlsdGVyYWJsZTohMCxhbmltYXRpb25zOntsZWZ0Olwic2xpZGVcIn19LF9jcmVhdGVNZW51OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUub3B0aW9ucztlLndyYXBwZXIuaHRtbChvLnRlbXBsYXRlKEMpKHtuczpvLm5zLG1lc3NhZ2VzOnQubWVzc2FnZXMsc29ydGFibGU6dC5zb3J0YWJsZSxmaWx0ZXJhYmxlOnQuZmlsdGVyYWJsZSxjb2x1bW5zOmUuX293bmVyQ29sdW1ucygpLHNob3dDb2x1bW5zOnQuY29sdW1ucyxsb2NrZWRDb2x1bW5zOnQubG9ja2VkQ29sdW1uc30pKSxlLnBvcHVwPWUud3JhcHBlcltfXSh7YW5jaG9yOmUubGluayxvcGVuOnMoZS5fb3BlbixlKSxhY3RpdmF0ZTpzKGUuX2FjdGl2YXRlLGUpLGNsb3NlOmZ1bmN0aW9uKCl7ZS5vcHRpb25zLmNsb3NlQ2FsbGJhY2smJmUub3B0aW9ucy5jbG9zZUNhbGxiYWNrKGUuZWxlbWVudCl9fSkuZGF0YShfKSxlLm1lbnU9ZS53cmFwcGVyLmNoaWxkcmVuKClbd10oe29yaWVudGF0aW9uOlwidmVydGljYWxcIixjbG9zZU9uQ2xpY2s6ITF9KS5kYXRhKHcpfSxfY3JlYXRlTW9iaWxlTWVudTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm9wdGlvbnMsbj1vLnRlbXBsYXRlKFMpKHtuczpvLm5zLGZpZWxkOmUuZmllbGQsdGl0bGU6ZS50aXRsZXx8ZS5maWVsZCxtZXNzYWdlczp0Lm1lc3NhZ2VzLHNvcnRhYmxlOnQuc29ydGFibGUsZmlsdGVyYWJsZTp0LmZpbHRlcmFibGUsY29sdW1uczplLl9vd25lckNvbHVtbnMoKSxzaG93Q29sdW1uczp0LmNvbHVtbnMsbG9ja2VkQ29sdW1uczp0LmxvY2tlZENvbHVtbnN9KTtlLnZpZXc9ZS5wYW5lLmFwcGVuZChuKSxlLndyYXBwZXI9ZS52aWV3LmVsZW1lbnQuZmluZChcIi5rLWNvbHVtbi1tZW51XCIpLGUubWVudT1uZXcgVChlLndyYXBwZXIuY2hpbGRyZW4oKSx7cGFuZTplLnBhbmV9KSxlLnZpZXcuZWxlbWVudC5vbihcImNsaWNrXCIsXCIuay1kb25lXCIsZnVuY3Rpb24odCl7ZS5jbG9zZSgpLHQucHJldmVudERlZmF1bHQoKX0pLGUub3B0aW9ucy5sb2NrZWRDb2x1bW5zJiZlLnZpZXcuYmluZChcInNob3dcIixmdW5jdGlvbigpe2UuX3VwZGF0ZUxvY2tlZENvbHVtbnMoKX0pfSxfYW5ndWxhckl0ZW1zOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7bi5hbmd1bGFyKHQsZnVuY3Rpb24oKXt2YXIgdD1uLndyYXBwZXIuZmluZChcIi5rLWNvbHVtbnMtaXRlbSBpbnB1dFtcIitvLmF0dHIoXCJmaWVsZFwiKStcIl1cIikubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcykuY2xvc2VzdChcImxpXCIpfSksaT1kKG4uX293bmVyQ29sdW1ucygpLGZ1bmN0aW9uKGUpe3JldHVybntjb2x1bW46ZS5fb3JpZ2luYWxPYmplY3R9fSk7cmV0dXJue2VsZW1lbnRzOnQsZGF0YTppfX0pfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9hbmd1bGFySXRlbXMoXCJjbGVhbnVwXCIpLGsuZm4uZGVzdHJveS5jYWxsKGUpLGUuZmlsdGVyTWVudSYmZS5maWx0ZXJNZW51LmRlc3Ryb3koKSxlLl9yZWZyZXNoSGFuZGxlciYmZS5kYXRhU291cmNlLnVuYmluZChnLGUuX3JlZnJlc2hIYW5kbGVyKSxlLm9wdGlvbnMuY29sdW1ucyYmZS5vd25lciYmZS5fdXBkYXRlQ29sdW1uc01lbnVIYW5kbGVyJiYoZS5vd25lci51bmJpbmQoXCJjb2x1bW5TaG93XCIsZS5fdXBkYXRlQ29sdW1uc01lbnVIYW5kbGVyKSxlLm93bmVyLnVuYmluZChcImNvbHVtbkhpZGVcIixlLl91cGRhdGVDb2x1bW5zTWVudUhhbmRsZXIpKSxlLm1lbnUmJihlLm1lbnUuZWxlbWVudC5vZmYoYiksZS5tZW51LmRlc3Ryb3koKSksZS53cmFwcGVyLm9mZihiKSxlLnBvcHVwJiZlLnBvcHVwLmRlc3Ryb3koKSxlLnZpZXcmJmUudmlldy5wdXJnZSgpLGUubGluay5vZmYoYiksZS5vd25lcj1udWxsLGUud3JhcHBlcj1udWxsLGUuZWxlbWVudD1udWxsfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMubWVudS5jbG9zZSgpLHRoaXMucG9wdXAmJih0aGlzLnBvcHVwLmNsb3NlKCksdGhpcy5wb3B1cC5lbGVtZW50Lm9mZihcImtleWRvd25cIitiKSl9LF9jbGljazpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKTt2YXIgdD10aGlzLm9wdGlvbnM7dC5maWx0ZXImJnRoaXMuZWxlbWVudC5pcyghdC5maWx0ZXIpfHwodGhpcy5wb3B1cHx8dGhpcy5wYW5lfHx0aGlzLl9pbml0KCksdGhpcy5faXNNb2JpbGU/dGhpcy5wYW5lLm5hdmlnYXRlKHRoaXMudmlldyx0aGlzLm9wdGlvbnMuYW5pbWF0aW9ucy5sZWZ0KTp0aGlzLnBvcHVwLnRvZ2dsZSgpKX0sX29wZW46ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2UoXCIuay1jb2x1bW4tbWVudVwiKS5ub3QodC53cmFwcGVyKS5lYWNoKGZ1bmN0aW9uKCl7ZSh0aGlzKS5kYXRhKF8pLmNsb3NlKCl9KSx0LnBvcHVwLmVsZW1lbnQub24oXCJrZXlkb3duXCIrYixmdW5jdGlvbihlKXtlLmtleUNvZGU9PW8ua2V5cy5FU0MmJnQuY2xvc2UoKX0pLHQub3B0aW9ucy5sb2NrZWRDb2x1bW5zJiZ0Ll91cGRhdGVMb2NrZWRDb2x1bW5zKCl9LF9hY3RpdmF0ZTpmdW5jdGlvbigpe3RoaXMubWVudS5lbGVtZW50LmZvY3VzKCl9LF9vd25lckNvbHVtbnM6ZnVuY3Rpb24oKXt2YXIgZT1yKHRoaXMub3duZXIuY29sdW1ucyksdD1jKGUsZnVuY3Rpb24oZSl7dmFyIHQ9ITAsaT1uKGUudGl0bGV8fFwiXCIpO3JldHVybihlLm1lbnU9PT0hMXx8IWUuZmllbGQmJiFpLmxlbmd0aCkmJih0PSExKSx0fSk7cmV0dXJuIGQodCxmdW5jdGlvbih0KXtyZXR1cm57b3JpZ2luYWxGaWVsZDp0LmZpZWxkLGZpZWxkOnQuZmllbGR8fHQudGl0bGUsdGl0bGU6dC50aXRsZXx8dC5maWVsZCxoaWRkZW46dC5oaWRkZW4saW5kZXg6dSh0LGUpLGxvY2tlZDohIXQubG9ja2VkLF9vcmlnaW5hbE9iamVjdDp0fX0pfSxfc29ydDpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5vcHRpb25zLnNvcnRhYmxlJiYodC5yZWZyZXNoKCksdC5fcmVmcmVzaEhhbmRsZXI9cyh0LnJlZnJlc2gsdCksdC5kYXRhU291cmNlLmJpbmQoZyx0Ll9yZWZyZXNoSGFuZGxlciksdC5tZW51LmJpbmQodixmdW5jdGlvbihuKXt2YXIgaSxyPWUobi5pdGVtKTtyLmhhc0NsYXNzKFwiay1zb3J0LWFzY1wiKT9pPXA6ci5oYXNDbGFzcyhcImstc29ydC1kZXNjXCIpJiYoaT1mKSxpJiYoci5wYXJlbnQoKS5maW5kKFwiLmstc29ydC1cIisoaT09cD9mOnApKS5yZW1vdmVDbGFzcyhoKSx0Ll9zb3J0RGF0YVNvdXJjZShyLGkpLHQuY2xvc2UoKSl9KSl9LF9zb3J0RGF0YVNvdXJjZTpmdW5jdGlvbihlLG4pe3ZhciBpLHIsbz10aGlzLGE9by5vcHRpb25zLnNvcnRhYmxlLHM9bnVsbD09PWEuY29tcGFyZT90OmEuY29tcGFyZSxsPW8uZGF0YVNvdXJjZSxjPWwuc29ydCgpfHxbXTtpZihlLmhhc0NsYXNzKGgpJiZhJiZhLmFsbG93VW5zb3J0IT09ITE/KGUucmVtb3ZlQ2xhc3MoaCksbj10KTplLmFkZENsYXNzKGgpLGE9PT0hMHx8XCJzaW5nbGVcIj09PWEubW9kZSljPVt7ZmllbGQ6by5maWVsZCxkaXI6bixjb21wYXJlOnN9XTtlbHNle2ZvcihpPTAscj1jLmxlbmd0aDtyPmk7aSsrKWlmKGNbaV0uZmllbGQ9PT1vLmZpZWxkKXtjLnNwbGljZShpLDEpO2JyZWFrfWMucHVzaCh7ZmllbGQ6by5maWVsZCxkaXI6bixjb21wYXJlOnN9KX1sLnNvcnQoYyl9LF9jb2x1bW5zOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0Lm9wdGlvbnMuY29sdW1ucyYmKHQuX3VwZGF0ZUNvbHVtbnNNZW51KCksdC5fdXBkYXRlQ29sdW1uc01lbnVIYW5kbGVyPXModC5fdXBkYXRlQ29sdW1uc01lbnUsdCksdC5vd25lci5iaW5kKFtcImNvbHVtbkhpZGVcIixcImNvbHVtblNob3dcIl0sdC5fdXBkYXRlQ29sdW1uc01lbnVIYW5kbGVyKSx0Lm1lbnUuYmluZCh2LGZ1bmN0aW9uKG4pe3ZhciBpLGEscyxsPWUobi5pdGVtKSxkPXIodC5vd25lci5jb2x1bW5zKTt0Ll9pc01vYmlsZSYmbi5wcmV2ZW50RGVmYXVsdCgpLGwucGFyZW50KCkuY2xvc2VzdChcImxpLmstY29sdW1ucy1pdGVtXCIpWzBdJiYoaT1sLmZpbmQoXCI6Y2hlY2tib3hcIiksaS5hdHRyKFwiZGlzYWJsZWRcIil8fChzPWkuYXR0cihvLmF0dHIoXCJmaWVsZFwiKSksYT1jKGQsZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmllbGQ9PXN8fGUudGl0bGU9PXN9KVswXSxhLmhpZGRlbj09PSEwP3Qub3duZXIuc2hvd0NvbHVtbihhKTp0Lm93bmVyLmhpZGVDb2x1bW4oYSkpKX0pKX0sX3VwZGF0ZUNvbHVtbnNNZW51OmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixhLHM9by5hdHRyKFwiZmllbGRcIiksbD1vLmF0dHIoXCJsb2NrZWRcIiksaD1jKHRoaXMuX293bmVyQ29sdW1ucygpLGZ1bmN0aW9uKGUpe3JldHVybiFlLmhpZGRlbn0pLHA9YyhoLGZ1bmN0aW9uKGUpe3JldHVybiBlLm9yaWdpbmFsRmllbGR9KSxmPWMocCxmdW5jdGlvbihlKXtyZXR1cm4gZS5sb2NrZWQ9PT0hMH0pLmxlbmd0aCxnPWMocCxmdW5jdGlvbihlKXtyZXR1cm4gZS5sb2NrZWQhPT0hMH0pLmxlbmd0aDtmb3IoaD1kKGgsZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmllbGR9KSxhPXRoaXMud3JhcHBlci5maW5kKFwiLmstY29sdW1ucy1pdGVtIGlucHV0W1wiK3MrXCJdXCIpLnByb3AoXCJkaXNhYmxlZFwiLCExKS5wcm9wKFwiY2hlY2tlZFwiLCExKSxlPTAsdD1hLmxlbmd0aDt0PmU7ZSsrKW49YS5lcShlKSxyPVwidHJ1ZVwiPT09bi5hdHRyKGwpLGk9ITEsdShuLmF0dHIocyksaCk+LTEmJihpPSEwLG4ucHJvcChcImNoZWNrZWRcIixpKSksaSYmKDE9PWYmJnImJm4ucHJvcChcImRpc2FibGVkXCIsITApLDEhPWd8fHJ8fG4ucHJvcChcImRpc2FibGVkXCIsITApKX0sX3VwZGF0ZUNvbHVtbnNMb2NrZWRTdGF0ZTpmdW5jdGlvbigpe3ZhciBlLHQsbixyLGE9by5hdHRyKFwiZmllbGRcIikscz1vLmF0dHIoXCJsb2NrZWRcIiksbD1pKHRoaXMuX293bmVyQ29sdW1ucygpLFwiZmllbGRcIiksYz10aGlzLndyYXBwZXIuZmluZChcIi5rLWNvbHVtbnMtaXRlbSBpbnB1dFt0eXBlPWNoZWNrYm94XVwiKTtmb3IoZT0wLHQ9Yy5sZW5ndGg7dD5lO2UrKyluPWMuZXEoZSkscj1sW24uYXR0cihhKV0sciYmbi5hdHRyKHMsci5sb2NrZWQpO3RoaXMuX3VwZGF0ZUNvbHVtbnNNZW51KCl9LF9maWx0ZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5vcHRpb25zO24uZmlsdGVyYWJsZSE9PSExJiYodC5maWx0ZXJNZW51PXQud3JhcHBlci5maW5kKFwiLmstZmlsdGVyYWJsZVwiKVt5XShsKCEwLHt9LHthcHBlbmRUb0VsZW1lbnQ6ITAsZGF0YVNvdXJjZTpuLmRhdGFTb3VyY2UsdmFsdWVzOm4udmFsdWVzLGZpZWxkOnQuZmllbGR9LG4uZmlsdGVyYWJsZSkpLmRhdGEoeSksdC5faXNNb2JpbGUmJnQubWVudS5iaW5kKHYsZnVuY3Rpb24obil7dmFyIGk9ZShuLml0ZW0pO2kuaGFzQ2xhc3MoXCJrLWZpbHRlci1pdGVtXCIpJiZ0LnBhbmUubmF2aWdhdGUodC5maWx0ZXJNZW51LnZpZXcsdC5vcHRpb25zLmFuaW1hdGlvbnMubGVmdCl9KSl9LF9sb2NrQ29sdW1uczpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5tZW51LmJpbmQodixmdW5jdGlvbihuKXt2YXIgaT1lKG4uaXRlbSk7aS5oYXNDbGFzcyhcImstbG9ja1wiKT8odC5vd25lci5sb2NrQ29sdW1uKHQuZmllbGQpLHQuY2xvc2UoKSk6aS5oYXNDbGFzcyhcImstdW5sb2NrXCIpJiYodC5vd25lci51bmxvY2tDb2x1bW4odC5maWVsZCksdC5jbG9zZSgpKX0pfSxfdXBkYXRlTG9ja2VkQ29sdW1uczpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHI9dGhpcy5maWVsZCxvPXRoaXMub3duZXIuY29sdW1ucyxhPWMobyxmdW5jdGlvbihlKXtyZXR1cm4gZS5maWVsZD09cnx8ZS50aXRsZT09cn0pWzBdO2EmJihlPWEubG9ja2VkPT09ITAsdD1jKG8sZnVuY3Rpb24odCl7cmV0dXJuIXQuaGlkZGVuJiYodC5sb2NrZWQmJmV8fCF0LmxvY2tlZCYmIWUpfSkubGVuZ3RoLG49dGhpcy53cmFwcGVyLmZpbmQoXCIuay1sb2NrXCIpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKSxpPXRoaXMud3JhcHBlci5maW5kKFwiLmstdW5sb2NrXCIpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKSwoZXx8MT09dCkmJm4uYWRkQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIpLGUmJjEhPXR8fGkuYWRkQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIpLHRoaXMuX3VwZGF0ZUNvbHVtbnNMb2NrZWRTdGF0ZSgpKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlLHQsbixpPXRoaXMscj1pLm9wdGlvbnMuZGF0YVNvdXJjZS5zb3J0KCl8fFtdLG89aS5maWVsZDtmb3IoaS53cmFwcGVyLmZpbmQoXCIuay1zb3J0LWFzYywgLmstc29ydC1kZXNjXCIpLnJlbW92ZUNsYXNzKGgpLHQ9MCxuPXIubGVuZ3RoO24+dDt0KyspZT1yW3RdLG89PWUuZmllbGQmJmkud3JhcHBlci5maW5kKFwiLmstc29ydC1cIitlLmRpcikuYWRkQ2xhc3MoaCl9fSksQz0nPHVsPiNpZihzb3J0YWJsZSl7IzxsaSBjbGFzcz1cImstaXRlbSBrLXNvcnQtYXNjXCI+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstc3ByaXRlIGstaS1zb3J0LWFzY1wiPjwvc3Bhbj4ke21lc3NhZ2VzLnNvcnRBc2NlbmRpbmd9PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwiay1pdGVtIGstc29ydC1kZXNjXCI+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstc3ByaXRlIGstaS1zb3J0LWRlc2NcIj48L3NwYW4+JHttZXNzYWdlcy5zb3J0RGVzY2VuZGluZ308L3NwYW4+PC9saT4jaWYoc2hvd0NvbHVtbnMgfHwgZmlsdGVyYWJsZSl7IzxsaSBjbGFzcz1cImstc2VwYXJhdG9yXCI+PC9saT4jfSMjfSMjaWYoc2hvd0NvbHVtbnMpeyM8bGkgY2xhc3M9XCJrLWl0ZW0gay1jb2x1bW5zLWl0ZW1cIj48c3BhbiBjbGFzcz1cImstbGlua1wiPjxzcGFuIGNsYXNzPVwiay1zcHJpdGUgay1pLWNvbHVtbnNcIj48L3NwYW4+JHttZXNzYWdlcy5jb2x1bW5zfTwvc3Bhbj48dWw+I2ZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGNvbHVtbnMubGVuZ3RoOyBpZHgrKykgeyM8bGk+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGRhdGEtIz1ucyNmaWVsZD1cIiM9Y29sdW1uc1tpZHhdLmZpZWxkLnJlcGxhY2UoL1wiL2csXCImXFxcXCMzNDtcIikjXCIgZGF0YS0jPW5zI2luZGV4PVwiIz1jb2x1bW5zW2lkeF0uaW5kZXgjXCIgZGF0YS0jPW5zI2xvY2tlZD1cIiM9Y29sdW1uc1tpZHhdLmxvY2tlZCNcIi8+Iz1jb2x1bW5zW2lkeF0udGl0bGUjPC9saT4jfSM8L3VsPjwvbGk+I2lmKGZpbHRlcmFibGUgfHwgbG9ja2VkQ29sdW1ucyl7IzxsaSBjbGFzcz1cImstc2VwYXJhdG9yXCI+PC9saT4jfSMjfSMjaWYoZmlsdGVyYWJsZSl7IzxsaSBjbGFzcz1cImstaXRlbSBrLWZpbHRlci1pdGVtXCI+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstc3ByaXRlIGstZmlsdGVyXCI+PC9zcGFuPiR7bWVzc2FnZXMuZmlsdGVyfTwvc3Bhbj48dWw+PGxpPjxkaXYgY2xhc3M9XCJrLWZpbHRlcmFibGVcIj48L2Rpdj48L2xpPjwvdWw+PC9saT4jaWYobG9ja2VkQ29sdW1ucyl7IzxsaSBjbGFzcz1cImstc2VwYXJhdG9yXCI+PC9saT4jfSMjfSMjaWYobG9ja2VkQ29sdW1ucyl7IzxsaSBjbGFzcz1cImstaXRlbSBrLWxvY2tcIj48c3BhbiBjbGFzcz1cImstbGlua1wiPjxzcGFuIGNsYXNzPVwiay1zcHJpdGUgay1pLWxvY2tcIj48L3NwYW4+JHttZXNzYWdlcy5sb2NrfTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImstaXRlbSBrLXVubG9ja1wiPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLXNwcml0ZSBrLWktdW5sb2NrXCI+PC9zcGFuPiR7bWVzc2FnZXMudW5sb2NrfTwvc3Bhbj48L2xpPiN9IzwvdWw+JyxTPSc8ZGl2IGRhdGEtIz1ucyNyb2xlPVwidmlld1wiIGRhdGEtIz1ucyNpbml0LXdpZGdldHM9XCJmYWxzZVwiIGNsYXNzPVwiay1ncmlkLWNvbHVtbi1tZW51XCI+PGRpdiBkYXRhLSM9bnMjcm9sZT1cImhlYWRlclwiIGNsYXNzPVwiay1oZWFkZXJcIj4ke21lc3NhZ2VzLnNldHRpbmdzfTxidXR0b24gY2xhc3M9XCJrLWJ1dHRvbiBrLWRvbmVcIj4jPW1lc3NhZ2VzLmRvbmUjPC9idXR0b24+PC9kaXY+PGRpdiBjbGFzcz1cImstY29sdW1uLW1lbnUgay1tb2JpbGUtbGlzdFwiPjx1bD48bGk+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj4ke3RpdGxlfTwvc3Bhbj48dWw+I2lmKHNvcnRhYmxlKXsjPGxpIGNsYXNzPVwiay1pdGVtIGstc29ydC1hc2NcIj48c3BhbiBjbGFzcz1cImstbGlua1wiPjxzcGFuIGNsYXNzPVwiay1zcHJpdGUgay1pLXNvcnQtYXNjXCI+PC9zcGFuPiR7bWVzc2FnZXMuc29ydEFzY2VuZGluZ308L3NwYW4+PC9saT48bGkgY2xhc3M9XCJrLWl0ZW0gay1zb3J0LWRlc2NcIj48c3BhbiBjbGFzcz1cImstbGlua1wiPjxzcGFuIGNsYXNzPVwiay1zcHJpdGUgay1pLXNvcnQtZGVzY1wiPjwvc3Bhbj4ke21lc3NhZ2VzLnNvcnREZXNjZW5kaW5nfTwvc3Bhbj48L2xpPiN9IyNpZihsb2NrZWRDb2x1bW5zKXsjPGxpIGNsYXNzPVwiay1pdGVtIGstbG9ja1wiPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLXNwcml0ZSBrLWktbG9ja1wiPjwvc3Bhbj4ke21lc3NhZ2VzLmxvY2t9PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwiay1pdGVtIGstdW5sb2NrXCI+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstc3ByaXRlIGstaS11bmxvY2tcIj48L3NwYW4+JHttZXNzYWdlcy51bmxvY2t9PC9zcGFuPjwvbGk+I30jI2lmKGZpbHRlcmFibGUpeyM8bGkgY2xhc3M9XCJrLWl0ZW0gay1maWx0ZXItaXRlbVwiPjxzcGFuIGNsYXNzPVwiay1saW5rIGstZmlsdGVyYWJsZVwiPjxzcGFuIGNsYXNzPVwiay1zcHJpdGUgay1maWx0ZXJcIj48L3NwYW4+JHttZXNzYWdlcy5maWx0ZXJ9PC9zcGFuPjwvbGk+I30jPC91bD48L2xpPiNpZihzaG93Q29sdW1ucyl7IzxsaSBjbGFzcz1cImstY29sdW1ucy1pdGVtXCI+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj4ke21lc3NhZ2VzLmNvbHVtbnN9PC9zcGFuPjx1bD4jZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgY29sdW1ucy5sZW5ndGg7IGlkeCsrKSB7IzxsaSBjbGFzcz1cImstaXRlbVwiPjxsYWJlbCBjbGFzcz1cImstbGFiZWxcIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2xhc3M9XCJrLWNoZWNrXCIgZGF0YS0jPW5zI2ZpZWxkPVwiIz1jb2x1bW5zW2lkeF0uZmllbGQucmVwbGFjZSgvXCIvZyxcIiZcXFxcIzM0O1wiKSNcIiBkYXRhLSM9bnMjaW5kZXg9XCIjPWNvbHVtbnNbaWR4XS5pbmRleCNcIiBkYXRhLSM9bnMjbG9ja2VkPVwiIz1jb2x1bW5zW2lkeF0ubG9ja2VkI1wiLz4jPWNvbHVtbnNbaWR4XS50aXRsZSM8L2xhYmVsPjwvbGk+I30jPC91bD48L2xpPiN9IzwvdWw+PC9kaXY+PC9kaXY+JyxUPWsuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7ay5mbi5pbml0LmNhbGwodGhpcyxlLHQpLHRoaXMuZWxlbWVudC5vbihcImNsaWNrXCIrYixcImxpOm5vdCguay1zZXBhcmF0b3IpOm5vdCguay1zdGF0ZS1kaXNhYmxlZClcIixcIl9jbGlja1wiKX0sZXZlbnRzOlt2XSxfY2xpY2s6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMudHJpZ2dlcih2LHtpdGVtOmUuY3VycmVudFRhcmdldH0pfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5wYW5lLm5hdmlnYXRlKFwiXCIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7ay5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5lbGVtZW50Lm9mZihiKX19KTthLnBsdWdpbih4KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXt2YXIgbj13aW5kb3cua2VuZG8saT1uLnVpLHI9aS5XaWRnZXQsbz1cImRpclwiLGE9XCJhc2NcIixzPVwic2luZ2xlXCIsbD1cImZpZWxkXCIsYz1cImRlc2NcIixkPVwiLmtlbmRvQ29sdW1uU29ydGVyXCIsdT1cIi5rLWxpbmtcIixoPVwiYXJpYS1zb3J0XCIscD1lLnByb3h5LGY9ci5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXM7ci5mbi5pbml0LmNhbGwoaSxlLHQpLGkuX3JlZnJlc2hIYW5kbGVyPXAoaS5yZWZyZXNoLGkpLGkuZGF0YVNvdXJjZT1pLm9wdGlvbnMuZGF0YVNvdXJjZS5iaW5kKFwiY2hhbmdlXCIsaS5fcmVmcmVzaEhhbmRsZXIpLG49aS5lbGVtZW50LmZpbmQodSksblswXXx8KG49aS5lbGVtZW50LndyYXBJbm5lcignPGEgY2xhc3M9XCJrLWxpbmtcIiBocmVmPVwiI1wiLz4nKS5maW5kKHUpKSxpLmxpbms9bixpLmVsZW1lbnQub24oXCJjbGlja1wiK2QscChpLl9jbGljayxpKSl9LG9wdGlvbnM6e25hbWU6XCJDb2x1bW5Tb3J0ZXJcIixtb2RlOnMsYWxsb3dVbnNvcnQ6ITAsY29tcGFyZTpudWxsLGZpbHRlcjpcIlwifSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyLmZuLmRlc3Ryb3kuY2FsbChlKSxlLmVsZW1lbnQub2ZmKGQpLGUuZGF0YVNvdXJjZS51bmJpbmQoXCJjaGFuZ2VcIixlLl9yZWZyZXNoSGFuZGxlciksZS5fcmVmcmVzaEhhbmRsZXI9ZS5lbGVtZW50PWUubGluaz1lLmRhdGFTb3VyY2U9bnVsbH0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciB0LGkscixzLGQ9dGhpcyx1PWQuZGF0YVNvdXJjZS5zb3J0KCl8fFtdLHA9ZC5lbGVtZW50LGY9cC5hdHRyKG4uYXR0cihsKSk7Zm9yKHAucmVtb3ZlQXR0cihuLmF0dHIobykpLHAucmVtb3ZlQXR0cihoKSx0PTAsaT11Lmxlbmd0aDtpPnQ7dCsrKXI9dVt0XSxmPT1yLmZpZWxkJiZwLmF0dHIobi5hdHRyKG8pLHIuZGlyKTtzPXAuYXR0cihuLmF0dHIobykpLHAuZmluZChcIi5rLWktYXJyb3ctbiwuay1pLWFycm93LXNcIikucmVtb3ZlKCkscz09PWE/KGUoJzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy1uXCIgLz4nKS5hcHBlbmRUbyhkLmxpbmspLHAuYXR0cihoLFwiYXNjZW5kaW5nXCIpKTpzPT09YyYmKGUoJzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy1zXCIgLz4nKS5hcHBlbmRUbyhkLmxpbmspLHAuYXR0cihoLFwiZGVzY2VuZGluZ1wiKSl9LF9jbGljazpmdW5jdGlvbihlKXt2YXIgaSxyLGQ9dGhpcyx1PWQuZWxlbWVudCxoPXUuYXR0cihuLmF0dHIobCkpLHA9dS5hdHRyKG4uYXR0cihvKSksZj1kLm9wdGlvbnMsZz1udWxsPT09ZC5vcHRpb25zLmNvbXBhcmU/dDpkLm9wdGlvbnMuY29tcGFyZSxtPWQuZGF0YVNvdXJjZS5zb3J0KCl8fFtdO2lmKGUucHJldmVudERlZmF1bHQoKSwhZi5maWx0ZXJ8fHUuaXMoZi5maWx0ZXIpKXtpZihwPXA9PT1hP2M6cD09PWMmJmYuYWxsb3dVbnNvcnQ/dDphLGYubW9kZT09PXMpbT1be2ZpZWxkOmgsZGlyOnAsY29tcGFyZTpnfV07ZWxzZSBpZihcIm11bHRpcGxlXCI9PT1mLm1vZGUpe2ZvcihpPTAscj1tLmxlbmd0aDtyPmk7aSsrKWlmKG1baV0uZmllbGQ9PT1oKXttLnNwbGljZShpLDEpO2JyZWFrfW0ucHVzaCh7ZmllbGQ6aCxkaXI6cCxjb21wYXJlOmd9KX10aGlzLmRhdGFTb3VyY2Uuc29ydChtKX19fSk7aS5wbHVnaW4oZil9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdD1udWxsIT10P3Q6XCJcIix0LnR5cGV8fGUudHlwZSh0KXx8XCJzdHJpbmdcIn1mdW5jdGlvbiBpKHQpe3QuZmluZChcIjppbnB1dDpub3QoOmJ1dHRvbiwgW1wiK3MuYXR0cihcInJvbGVcIikrXCI9dXBsb2FkXSwgW1wiK3MuYXR0cihcInNraXBcIikrXCJdLCBbdHlwZT1maWxlXSksIHNlbGVjdFwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9cy5hdHRyKFwiYmluZFwiKSxuPXRoaXMuZ2V0QXR0cmlidXRlKHQpfHxcIlwiLGk9XCJjaGVja2JveFwiPT09dGhpcy50eXBlfHxcInJhZGlvXCI9PT10aGlzLnR5cGU/XCJjaGVja2VkOlwiOlwidmFsdWU6XCIscj10aGlzLm5hbWU7LTE9PT1uLmluZGV4T2YoaSkmJnImJihuKz0obi5sZW5ndGg/XCIsXCI6XCJcIikraStyLGUodGhpcykuYXR0cih0LG4pKX0pfWZ1bmN0aW9uIHIoZSl7dmFyIHQsaSxyPShlLm1vZGVsLmZpZWxkc3x8ZS5tb2RlbClbZS5maWVsZF0sbz1uKHIpLGE9cj9yLnZhbGlkYXRpb246e30sbD1zLmF0dHIoXCJ0eXBlXCIpLGM9cy5hdHRyKFwiYmluZFwiKSxkPXtuYW1lOmUuZmllbGR9O2Zvcih0IGluIGEpaT1hW3RdLGYodCxfKT49MD9kW2xdPXQ6aChpKXx8KGRbdF09cChpKT9pLnZhbHVlfHx0OmkpLGRbcy5hdHRyKHQrXCItbXNnXCIpXT1pLm1lc3NhZ2U7cmV0dXJuIGYobyxfKT49MCYmKGRbbF09byksZFtjXT0oXCJib29sZWFuXCI9PT1vP1wiY2hlY2tlZDpcIjpcInZhbHVlOlwiKStlLmZpZWxkLGR9ZnVuY3Rpb24gbyhlKXt2YXIgdCxuLGkscixvLGE7aWYoZSYmZS5sZW5ndGgpZm9yKGE9W10sdD0wLG49ZS5sZW5ndGg7bj50O3QrKylpPWVbdF0sbz1pLnRleHR8fGkudmFsdWV8fGkscj1udWxsPT1pLnZhbHVlP2kudGV4dHx8aTppLnZhbHVlLGFbdF09e3RleHQ6byx2YWx1ZTpyfTtyZXR1cm4gYX1mdW5jdGlvbiBhKGUsdCl7dmFyIG4saSxyPWU/ZS52YWxpZGF0aW9ufHx7fTp7fTtmb3IobiBpbiByKWk9cltuXSxwKGkpJiZpLnZhbHVlJiYoaT1pLnZhbHVlKSxoKGkpJiYodFtuXT1pKX12YXIgcz13aW5kb3cua2VuZG8sbD1zLnVpLGM9bC5XaWRnZXQsZD1lLmV4dGVuZCx1PXMuc3VwcG9ydC5icm93c2VyLm1zaWUmJjk+cy5zdXBwb3J0LmJyb3dzZXIudmVyc2lvbixoPXMuaXNGdW5jdGlvbixwPWUuaXNQbGFpbk9iamVjdCxmPWUuaW5BcnJheSxnPS8oXCJ8XFwlfCd8XFxbfFxcXXxcXCR8XFwufFxcLHxcXDp8XFw7fFxcK3xcXCp8XFwmfFxcIXxcXCN8XFwofFxcKXw8fD58XFw9fFxcP3xcXEB8XFxefFxce3xcXH18XFx+fFxcL3xcXHx8YCkvZyxtPSc8ZGl2IGNsYXNzPVwiay13aWRnZXQgay10b29sdGlwIGstdG9vbHRpcC12YWxpZGF0aW9uXCIgc3R5bGU9XCJtYXJnaW46MC41ZW1cIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLXdhcm5pbmdcIj4gPC9zcGFuPiM9bWVzc2FnZSM8ZGl2IGNsYXNzPVwiay1jYWxsb3V0IGstY2FsbG91dC1uXCI+PC9kaXY+PC9kaXY+Jyx2PVwiY2hhbmdlXCIsXz1bXCJ1cmxcIixcImVtYWlsXCIsXCJudW1iZXJcIixcImRhdGVcIixcImJvb2xlYW5cIl0seT17bnVtYmVyOmZ1bmN0aW9uKHQsbil7dmFyIGk9cihuKTtlKCc8aW5wdXQgdHlwZT1cInRleHRcIi8+JykuYXR0cihpKS5hcHBlbmRUbyh0KS5rZW5kb051bWVyaWNUZXh0Qm94KHtmb3JtYXQ6bi5mb3JtYXR9KSxlKFwiPHNwYW4gXCIrcy5hdHRyKFwiZm9yXCIpKyc9XCInK24uZmllbGQrJ1wiIGNsYXNzPVwiay1pbnZhbGlkLW1zZ1wiLz4nKS5oaWRlKCkuYXBwZW5kVG8odCl9LGRhdGU6ZnVuY3Rpb24odCxuKXt2YXIgaT1yKG4pLG89bi5mb3JtYXQ7byYmKG89cy5fZXh0cmFjdEZvcm1hdChvKSksaVtzLmF0dHIoXCJmb3JtYXRcIildPW8sZSgnPGlucHV0IHR5cGU9XCJ0ZXh0XCIvPicpLmF0dHIoaSkuYXBwZW5kVG8odCkua2VuZG9EYXRlUGlja2VyKHtmb3JtYXQ6bi5mb3JtYXR9KSxlKFwiPHNwYW4gXCIrcy5hdHRyKFwiZm9yXCIpKyc9XCInK24uZmllbGQrJ1wiIGNsYXNzPVwiay1pbnZhbGlkLW1zZ1wiLz4nKS5oaWRlKCkuYXBwZW5kVG8odCl9LHN0cmluZzpmdW5jdGlvbih0LG4pe3ZhciBpPXIobik7ZSgnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJrLWlucHV0IGstdGV4dGJveFwiLz4nKS5hdHRyKGkpLmFwcGVuZFRvKHQpfSxcImJvb2xlYW5cIjpmdW5jdGlvbih0LG4pe3ZhciBpPXIobik7ZSgnPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIC8+JykuYXR0cihpKS5hcHBlbmRUbyh0KX0sdmFsdWVzOmZ1bmN0aW9uKHQsbil7dmFyIGk9cihuKTtlKFwiPHNlbGVjdCBcIitzLmF0dHIoXCJ0ZXh0LWZpZWxkXCIpKyc9XCJ0ZXh0XCInK3MuYXR0cihcInZhbHVlLWZpZWxkXCIpKyc9XCJ2YWx1ZVwiJytzLmF0dHIoXCJzb3VyY2VcIikrXCI9J1wiK3Muc3RyaW5naWZ5KG8obi52YWx1ZXMpKS5yZXBsYWNlKC9cXCcvZyxcIiZhcG9zO1wiKStcIidcIitzLmF0dHIoXCJyb2xlXCIpKyc9XCJkcm9wZG93bmxpc3RcIi8+JykuYXR0cihpKS5hcHBlbmRUbyh0KSxlKFwiPHNwYW4gXCIrcy5hdHRyKFwiZm9yXCIpKyc9XCInK24uZmllbGQrJ1wiIGNsYXNzPVwiay1pbnZhbGlkLW1zZ1wiLz4nKS5oaWRlKCkuYXBwZW5kVG8odCl9fSx3PWMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpcztuLnRhcmdldCYmKG4uJGFuZ3VsYXI9bi50YXJnZXQub3B0aW9ucy4kYW5ndWxhciksYy5mbi5pbml0LmNhbGwoaSx0LG4pLGkuX3ZhbGlkYXRlUHJveHk9ZS5wcm94eShpLl92YWxpZGF0ZSxpKSxpLnJlZnJlc2goKX0sZXZlbnRzOlt2XSxvcHRpb25zOntuYW1lOlwiRWRpdGFibGVcIixlZGl0b3JzOnksY2xlYXJDb250YWluZXI6ITAsZXJyb3JUZW1wbGF0ZTptfSxlZGl0b3I6ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLHI9aS5vcHRpb25zLmVkaXRvcnMsbz1wKGUpLGE9bz9lLmZpZWxkOmUsbD1pLm9wdGlvbnMubW9kZWx8fHt9LGM9byYmZS52YWx1ZXMsdT1jP1widmFsdWVzXCI6bih0KSxoPW8mJmUuZWRpdG9yLGY9aD9lLmVkaXRvcjpyW3VdLG09aS5lbGVtZW50LmZpbmQoXCJbXCIrcy5hdHRyKFwiY29udGFpbmVyLWZvclwiKStcIj1cIithLnJlcGxhY2UoZyxcIlxcXFwkMVwiKStcIl1cIik7Zj1mP2Y6ci5zdHJpbmcsaCYmXCJzdHJpbmdcIj09dHlwZW9mIGUuZWRpdG9yJiYoZj1mdW5jdGlvbih0KXt0LmFwcGVuZChlLmVkaXRvcil9KSxtPW0ubGVuZ3RoP206aS5lbGVtZW50LGYobSxkKCEwLHt9LG8/ZTp7ZmllbGQ6YX0se21vZGVsOmx9KSl9LF92YWxpZGF0ZTpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXMscj10LnZhbHVlLG89aS5fdmFsaWRhdGlvbkV2ZW50SW5Qcm9ncmVzcyxhPXt9LGw9cy5hdHRyKFwiYmluZFwiKSxjPXQuZmllbGQucmVwbGFjZShnLFwiXFxcXCQxXCIpLGQ9XCJjaGVja2VkOlwiK2MsdT1cInZhbHVlOlwiK2M7YVt0LmZpZWxkXT10LnZhbHVlLG49ZShcIjppbnB1dFtcIitsKycqPVwiJyt1KydcIl0sOmlucHV0WycrbCsnKj1cIicrZCsnXCJdJyxpLmVsZW1lbnQpLmZpbHRlcihcIltcIitzLmF0dHIoXCJ2YWxpZGF0ZVwiKStcIiE9J2ZhbHNlJ11cIiksbi5sZW5ndGg+MSYmKG49bi5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLG49dC5hdHRyKGwpLnNwbGl0KFwiLFwiKSxpPWYodSxuKT49MHx8ZihkLG4pPj0wO3JldHVybiBpJiYoIXQuaXMoXCI6cmFkaW9cIil8fHQudmFsKCk9PXIpfSkpO3RyeXtpLl92YWxpZGF0aW9uRXZlbnRJblByb2dyZXNzPSEwLCghaS52YWxpZGF0YWJsZS52YWxpZGF0ZUlucHV0KG4pfHwhbyYmaS50cmlnZ2VyKHYse3ZhbHVlczphfSkpJiZ0LnByZXZlbnREZWZhdWx0KCl9ZmluYWxseXtpLl92YWxpZGF0aW9uRXZlbnRJblByb2dyZXNzPSExfX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsaWRhdGFibGUudmFsaWRhdGUoKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5hbmd1bGFyKFwiY2xlYW51cFwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmUuZWxlbWVudH19KSxjLmZuLmRlc3Ryb3kuY2FsbChlKSxlLm9wdGlvbnMubW9kZWwudW5iaW5kKFwic2V0XCIsZS5fdmFsaWRhdGVQcm94eSkscy51bmJpbmQoZS5lbGVtZW50KSxlLnZhbGlkYXRhYmxlJiZlLnZhbGlkYXRhYmxlLmRlc3Ryb3koKSxzLmRlc3Ryb3koZS5lbGVtZW50KSxlLmVsZW1lbnQucmVtb3ZlRGF0YShcImtlbmRvVmFsaWRhdG9yXCIpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIG4scixvLGwsYyxkLGgsZixnPXRoaXMsbT1nLm9wdGlvbnMuZmllbGRzfHxbXSx2PWcub3B0aW9ucy5jbGVhckNvbnRhaW5lcj9nLmVsZW1lbnQuZW1wdHkoKTpnLmVsZW1lbnQsXz1nLm9wdGlvbnMubW9kZWx8fHt9LHk9e307Zm9yKGUuaXNBcnJheShtKXx8KG09W21dKSxuPTAscj1tLmxlbmd0aDtyPm47bisrKW89bVtuXSxsPXAobyksYz1sP28uZmllbGQ6byxkPShfLmZpZWxkc3x8XylbY10sYShkLHkpLGcuZWRpdG9yKG8sZCk7aWYoZy5vcHRpb25zLnRhcmdldCYmZy5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOnYsZGF0YTpbe2RhdGFJdGVtOl99XX19KSwhcil7aD1fLmZpZWxkc3x8Xztmb3IoYyBpbiBoKWEoaFtjXSx5KX1pKHYpLGcudmFsaWRhdGFibGUmJmcudmFsaWRhdGFibGUuZGVzdHJveSgpLHMuYmluZCh2LGcub3B0aW9ucy5tb2RlbCksZy5vcHRpb25zLm1vZGVsLnVuYmluZChcInNldFwiLGcuX3ZhbGlkYXRlUHJveHkpLGcub3B0aW9ucy5tb2RlbC5iaW5kKFwic2V0XCIsZy5fdmFsaWRhdGVQcm94eSksZy52YWxpZGF0YWJsZT1uZXcgcy51aS5WYWxpZGF0b3Iodix7dmFsaWRhdGVPbkJsdXI6ITEsZXJyb3JUZW1wbGF0ZTpnLm9wdGlvbnMuZXJyb3JUZW1wbGF0ZXx8dCxydWxlczp5fSksZj12LmZpbmQoXCI6a2VuZG9Gb2N1c2FibGVcIikuZXEoMCkuZm9jdXMoKSx1JiZmLmZvY3VzKCl9fSk7bC5wbHVnaW4odyl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXtyZXR1cm4gdCE9PWV9ZnVuY3Rpb24gaShlLHQsbil7cmV0dXJuIE1hdGgubWF4KE1hdGgubWluKHBhcnNlSW50KGUsMTApLDEvMD09PW4/bjpwYXJzZUludChuLDEwKSkscGFyc2VJbnQodCwxMCkpfWZ1bmN0aW9uIHIoZSx0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbj10aGlzLGk9bi53cmFwcGVyLHI9aVswXS5zdHlsZSxvPW4ub3B0aW9ucztpZighby5pc01heGltaXplZCYmIW8uaXNNaW5pbWl6ZWQpcmV0dXJuIG4ucmVzdG9yZU9wdGlvbnM9e3dpZHRoOnIud2lkdGgsaGVpZ2h0OnIuaGVpZ2h0fSxpLmNoaWxkcmVuKHgpLmhpZGUoKS5lbmQoKS5jaGlsZHJlbihiKS5maW5kKEcpLnBhcmVudCgpLmhpZGUoKS5lcSgwKS5iZWZvcmUoWi5hY3Rpb24oe25hbWU6XCJSZXN0b3JlXCJ9KSksdC5jYWxsKG4pLFwibWF4aW1pemVcIj09ZT9uLndyYXBwZXIuY2hpbGRyZW4oYikuZmluZChZKS5wYXJlbnQoKS5oaWRlKCk6bi53cmFwcGVyLmNoaWxkcmVuKGIpLmZpbmQoWSkucGFyZW50KCkuc2hvdygpLG59fWZ1bmN0aW9uIG8oKXtyZXR1cm4hdGhpcy50eXBlfHx0aGlzLnR5cGUudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwic2NyaXB0XCIpPj0wfWZ1bmN0aW9uIGEoZSl7dmFyIHQ9dGhpczt0Lm93bmVyPWUsdC5fZHJhZ2dhYmxlPW5ldyBkKGUud3JhcHBlcix7ZmlsdGVyOlwiPlwiK3gsZ3JvdXA6ZS53cmFwcGVyLmlkK1wiLXJlc2l6aW5nXCIsZHJhZ3N0YXJ0OnAodC5kcmFnc3RhcnQsdCksZHJhZzpwKHQuZHJhZyx0KSxkcmFnZW5kOnAodC5kcmFnZW5kLHQpfSksdC5fZHJhZ2dhYmxlLnVzZXJFdmVudHMuYmluZChcInByZXNzXCIscCh0LmFkZE92ZXJsYXksdCkpLHQuX2RyYWdnYWJsZS51c2VyRXZlbnRzLmJpbmQoXCJyZWxlYXNlXCIscCh0LnJlbW92ZU92ZXJsYXksdCkpfWZ1bmN0aW9uIHMoZSx0KXt2YXIgbj10aGlzO24ub3duZXI9ZSxuLl9kcmFnZ2FibGU9bmV3IGQoZS53cmFwcGVyLHtmaWx0ZXI6dCxncm91cDplLndyYXBwZXIuaWQrXCItbW92aW5nXCIsZHJhZ3N0YXJ0OnAobi5kcmFnc3RhcnQsbiksZHJhZzpwKG4uZHJhZyxuKSxkcmFnZW5kOnAobi5kcmFnZW5kLG4pLGRyYWdjYW5jZWw6cChuLmRyYWdjYW5jZWwsbil9KSxuLl9kcmFnZ2FibGUudXNlckV2ZW50cy5zdG9wUHJvcGFnYXRpb249ITF9dmFyIGw9d2luZG93LmtlbmRvLGM9bC51aS5XaWRnZXQsZD1sLnVpLkRyYWdnYWJsZSx1PWUuaXNQbGFpbk9iamVjdCxoPWwuX2FjdGl2ZUVsZW1lbnQscD1lLnByb3h5LGY9ZS5leHRlbmQsZz1lLmVhY2gsbT1sLnRlbXBsYXRlLHY9XCJib2R5XCIsXz1cIi5rZW5kb1dpbmRvd1wiLHk9XCIuay13aW5kb3dcIix3PVwiLmstd2luZG93LXRpdGxlXCIsYj13K1wiYmFyXCIsaz1cIi5rLXdpbmRvdy1jb250ZW50XCIseD1cIi5rLXJlc2l6ZS1oYW5kbGVcIixDPVwiLmstb3ZlcmxheVwiLFM9XCJrLWNvbnRlbnQtZnJhbWVcIixUPVwiay1sb2FkaW5nXCIsRD1cImstc3RhdGUtaG92ZXJcIixBPVwiay1zdGF0ZS1mb2N1c2VkXCIsRT1cImstd2luZG93LW1heGltaXplZFwiLE09XCI6dmlzaWJsZVwiLFA9XCJoaWRkZW5cIixJPVwiY3Vyc29yXCIsej1cIm9wZW5cIixGPVwiYWN0aXZhdGVcIixSPVwiZGVhY3RpdmF0ZVwiLEI9XCJjbG9zZVwiLEw9XCJyZWZyZXNoXCIsTz1cInJlc2l6ZVwiLEg9XCJyZXNpemVFbmRcIixOPVwiZHJhZ3N0YXJ0XCIsVj1cImRyYWdlbmRcIixVPVwiZXJyb3JcIixXPVwib3ZlcmZsb3dcIixqPVwiekluZGV4XCIsRz1cIi5rLXdpbmRvdy1hY3Rpb25zIC5rLWktbWluaW1pemUsLmstd2luZG93LWFjdGlvbnMgLmstaS1tYXhpbWl6ZVwiLHE9XCIuay1pLXBpblwiLCQ9XCIuay1pLXVucGluXCIsWT1xK1wiLFwiKyQsSz1cIi5rLXdpbmRvdy10aXRsZWJhciAuay13aW5kb3ctYWN0aW9uXCIsUT1cIi5rLXdpbmRvdy10aXRsZWJhciAuay1pLXJlZnJlc2hcIixYPWwuaXNMb2NhbFVybCxKPWMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGkscil7dmFyIGEscyxkLGgsZixnLG0sdj10aGlzLHg9e30sQz0hMSxTPXImJnIuYWN0aW9ucyYmIXIuYWN0aW9ucy5sZW5ndGg7Yy5mbi5pbml0LmNhbGwodixpLHIpLHI9di5vcHRpb25zLGg9ci5wb3NpdGlvbixpPXYuZWxlbWVudCxmPXIuY29udGVudCxTJiYoci5hY3Rpb25zPVtdKSx2LmFwcGVuZFRvPWUoci5hcHBlbmRUbyksdi5fYW5pbWF0aW9ucygpLGYmJiF1KGYpJiYoZj1yLmNvbnRlbnQ9e3VybDpmfSksaS5maW5kKFwic2NyaXB0XCIpLmZpbHRlcihvKS5yZW1vdmUoKSxpLnBhcmVudCgpLmlzKHYuYXBwZW5kVG8pfHxoLnRvcCE9PXQmJmgubGVmdCE9PXR8fChpLmlzKE0pPyh4PWkub2Zmc2V0KCksQz0hMCk6KHM9aS5jc3MoXCJ2aXNpYmlsaXR5XCIpLGQ9aS5jc3MoXCJkaXNwbGF5XCIpLGkuY3NzKHt2aXNpYmlsaXR5OlAsZGlzcGxheTpcIlwifSkseD1pLm9mZnNldCgpLGkuY3NzKHt2aXNpYmlsaXR5OnMsZGlzcGxheTpkfSkpLGgudG9wPT09dCYmKGgudG9wPXgudG9wKSxoLmxlZnQ9PT10JiYoaC5sZWZ0PXgubGVmdCkpLG4oci52aXNpYmxlKSYmbnVsbCE9PXIudmlzaWJsZXx8KHIudmlzaWJsZT1pLmlzKE0pKSxhPXYud3JhcHBlcj1pLmNsb3Nlc3QoeSksaS5pcyhcIi5rLWNvbnRlbnRcIikmJmFbMF18fChpLmFkZENsYXNzKFwiay13aW5kb3ctY29udGVudCBrLWNvbnRlbnRcIiksdi5fY3JlYXRlV2luZG93KGksciksYT12LndyYXBwZXI9aS5jbG9zZXN0KHkpLHYuX2RpbWVuc2lvbnMoKSksdi5fcG9zaXRpb24oKSxyLnBpbm5lZCYmdi5waW4oITApLGYmJnYucmVmcmVzaChmKSxyLnZpc2libGUmJnYudG9Gcm9udCgpLGc9YS5jaGlsZHJlbihrKSx2Ll90YWJpbmRleChnKSxyLnZpc2libGUmJnIubW9kYWwmJnYuX292ZXJsYXkoYS5pcyhNKSkuY3NzKHtvcGFjaXR5Oi41fSksYS5vbihcIm1vdXNlZW50ZXJcIitfLEsscCh2Ll9idXR0b25FbnRlcix2KSkub24oXCJtb3VzZWxlYXZlXCIrXyxLLHAodi5fYnV0dG9uTGVhdmUsdikpLm9uKFwiY2xpY2tcIitfLFwiPiBcIitLLHAodi5fd2luZG93QWN0aW9uSGFuZGxlcix2KSksZy5vbihcImtleWRvd25cIitfLHAodi5fa2V5ZG93bix2KSkub24oXCJmb2N1c1wiK18scCh2Ll9mb2N1cyx2KSkub24oXCJibHVyXCIrXyxwKHYuX2JsdXIsdikpLHRoaXMuX3Jlc2l6YWJsZSgpLHRoaXMuX2RyYWdnYWJsZSgpLG09aS5hdHRyKFwiaWRcIiksbSYmKG0rPVwiX3duZF90aXRsZVwiLGEuY2hpbGRyZW4oYikuY2hpbGRyZW4odykuYXR0cihcImlkXCIsbSksZy5hdHRyKHtyb2xlOlwiZGlhbG9nXCIsXCJhcmlhLWxhYmVsbGVkYnlcIjptfSkpLGEuYWRkKGEuY2hpbGRyZW4oXCIuay1yZXNpemUtaGFuZGxlLFwiK2IpKS5vbihcIm1vdXNlZG93blwiK18scCh2LnRvRnJvbnQsdikpLHYudG91Y2hTY3JvbGxlcj1sLnRvdWNoU2Nyb2xsZXIoaSksdi5fcmVzaXplSGFuZGxlcj1wKHYuX29uRG9jdW1lbnRSZXNpemUsdiksdi5fbWFya2VyPWwuZ3VpZCgpLnN1YnN0cmluZygwLDgpLGUod2luZG93KS5vbihcInJlc2l6ZVwiK18rdi5fbWFya2VyLHYuX3Jlc2l6ZUhhbmRsZXIpLHIudmlzaWJsZSYmKHYudHJpZ2dlcih6KSx2LnRyaWdnZXIoRikpLGwubm90aWZ5KHYpfSxfYnV0dG9uRW50ZXI6ZnVuY3Rpb24odCl7ZSh0LmN1cnJlbnRUYXJnZXQpLmFkZENsYXNzKEQpfSxfYnV0dG9uTGVhdmU6ZnVuY3Rpb24odCl7ZSh0LmN1cnJlbnRUYXJnZXQpLnJlbW92ZUNsYXNzKEQpfSxfZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLndyYXBwZXIuYWRkQ2xhc3MoQSl9LF9ibHVyOmZ1bmN0aW9uKCl7dGhpcy53cmFwcGVyLnJlbW92ZUNsYXNzKEEpfSxfZGltZW5zaW9uczpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLndyYXBwZXIscj10aGlzLm9wdGlvbnMsbz1yLndpZHRoLGE9ci5oZWlnaHQscz1yLm1heEhlaWdodCxsPVtcIm1pbldpZHRoXCIsXCJtaW5IZWlnaHRcIixcIm1heFdpZHRoXCIsXCJtYXhIZWlnaHRcIl07Zm9yKHRoaXMudGl0bGUoci50aXRsZSksZT0wO2wubGVuZ3RoPmU7ZSsrKXQ9cltsW2VdXSx0JiYxLzAhPXQmJm4uY3NzKGxbZV0sdCk7cyYmMS8wIT1zJiZ0aGlzLmVsZW1lbnQuY3NzKFwibWF4SGVpZ2h0XCIscyksbyYmbi53aWR0aCgoXCJcIitvKS5pbmRleE9mKFwiJVwiKT4wP286aShvLHIubWluV2lkdGgsci5tYXhXaWR0aCkpLGEmJm4uaGVpZ2h0KChcIlwiK2EpLmluZGV4T2YoXCIlXCIpPjA/YTppKGEsci5taW5IZWlnaHQsci5tYXhIZWlnaHQpKSxyLnZpc2libGV8fG4uaGlkZSgpfSxfcG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLndyYXBwZXIsdD10aGlzLm9wdGlvbnMucG9zaXRpb247MD09PXQudG9wJiYodC50b3A9XCJcIit0LnRvcCksMD09PXQubGVmdCYmKHQubGVmdD1cIlwiK3QubGVmdCksZS5jc3Moe3RvcDp0LnRvcHx8XCJcIixsZWZ0OnQubGVmdHx8XCJcIn0pfSxfYW5pbWF0aW9uczpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucztlLmFuaW1hdGlvbj09PSExJiYoZS5hbmltYXRpb249e29wZW46e2VmZmVjdHM6e319LGNsb3NlOntoaWRlOiEwLGVmZmVjdHM6e319fSl9LF9yZXNpemU6ZnVuY3Rpb24oKXtsLnJlc2l6ZSh0aGlzLmVsZW1lbnQuY2hpbGRyZW4oKSl9LF9yZXNpemFibGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMucmVzaXphYmxlLG49dGhpcy53cmFwcGVyO3RoaXMucmVzaXppbmcmJihuLm9mZihcImRibGNsaWNrXCIrXykuY2hpbGRyZW4oeCkucmVtb3ZlKCksdGhpcy5yZXNpemluZy5kZXN0cm95KCksdGhpcy5yZXNpemluZz1udWxsKSx0JiYobi5vbihcImRibGNsaWNrXCIrXyxiLHAoZnVuY3Rpb24odCl7ZSh0LnRhcmdldCkuY2xvc2VzdChcIi5rLXdpbmRvdy1hY3Rpb25cIikubGVuZ3RofHx0aGlzLnRvZ2dsZU1heGltaXphdGlvbigpfSx0aGlzKSksZyhcIm4gZSBzIHcgc2Ugc3cgbmUgbndcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oZSx0KXtuLmFwcGVuZChaLnJlc2l6ZUhhbmRsZSh0KSl9KSx0aGlzLnJlc2l6aW5nPW5ldyBhKHRoaXMpKSxuPW51bGx9LF9kcmFnZ2FibGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMuZHJhZ2dhYmxlO3RoaXMuZHJhZ2dpbmcmJih0aGlzLmRyYWdnaW5nLmRlc3Ryb3koKSx0aGlzLmRyYWdnaW5nPW51bGwpLGUmJih0aGlzLmRyYWdnaW5nPW5ldyBzKHRoaXMsZS5kcmFnSGFuZGxlfHxiKSl9LF9hY3Rpb25zOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmFjdGlvbnMsbj10aGlzLndyYXBwZXIuY2hpbGRyZW4oYiksaT1uLmZpbmQoXCIuay13aW5kb3ctYWN0aW9uc1wiKTt0PWUubWFwKHQsZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6ZX19KSxpLmh0bWwobC5yZW5kZXIoWi5hY3Rpb24sdCkpfSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe2MuZm4uc2V0T3B0aW9ucy5jYWxsKHRoaXMsZSksdGhpcy5fYW5pbWF0aW9ucygpLHRoaXMuX2RpbWVuc2lvbnMoKSx0aGlzLl9wb3NpdGlvbigpLHRoaXMuX3Jlc2l6YWJsZSgpLHRoaXMuX2RyYWdnYWJsZSgpLHRoaXMuX2FjdGlvbnMoKX0sZXZlbnRzOlt6LEYsUixCLEwsTyxILE4sVixVXSxvcHRpb25zOntuYW1lOlwiV2luZG93XCIsYW5pbWF0aW9uOntvcGVuOntlZmZlY3RzOnt6b29tOntkaXJlY3Rpb246XCJpblwifSxmYWRlOntkaXJlY3Rpb246XCJpblwifX0sZHVyYXRpb246MzUwfSxjbG9zZTp7ZWZmZWN0czp7em9vbTp7ZGlyZWN0aW9uOlwib3V0XCIscHJvcGVydGllczp7c2NhbGU6Ljd9fSxmYWRlOntkaXJlY3Rpb246XCJvdXRcIn19LGR1cmF0aW9uOjM1MCxoaWRlOiEwfX0sdGl0bGU6XCJcIixhY3Rpb25zOltcIkNsb3NlXCJdLGF1dG9Gb2N1czohMCxtb2RhbDohMSxyZXNpemFibGU6ITAsZHJhZ2dhYmxlOiEwLG1pbldpZHRoOjkwLG1pbkhlaWdodDo1MCxtYXhXaWR0aDoxLzAsbWF4SGVpZ2h0OjEvMCxwaW5uZWQ6ITEscG9zaXRpb246e30sY29udGVudDpudWxsLHZpc2libGU6bnVsbCxoZWlnaHQ6bnVsbCx3aWR0aDpudWxsLGFwcGVuZFRvOlwiYm9keVwifSxfY2xvc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gZS5pbkFycmF5KFwiY2xvc2VcIixlLm1hcCh0aGlzLm9wdGlvbnMuYWN0aW9ucyxmdW5jdGlvbihlKXtyZXR1cm4gZS50b0xvd2VyQ2FzZSgpfSkpPi0xfSxfa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgdCxuLHIsbyxhLHMsYz10aGlzLGQ9Yy5vcHRpb25zLHU9bC5rZXlzLGg9ZS5rZXlDb2RlLHA9Yy53cmFwcGVyLGY9MTAsZz1jLm9wdGlvbnMuaXNNYXhpbWl6ZWQ7ZS50YXJnZXQhPWUuY3VycmVudFRhcmdldHx8Yy5fY2xvc2luZ3x8KGg9PXUuRVNDJiZjLl9jbG9zYWJsZSgpJiZjLl9jbG9zZSghMSksIWQuZHJhZ2dhYmxlfHxlLmN0cmxLZXl8fGd8fCh0PWwuZ2V0T2Zmc2V0KHApLGg9PXUuVVA/bj1wLmNzcyhcInRvcFwiLHQudG9wLWYpOmg9PXUuRE9XTj9uPXAuY3NzKFwidG9wXCIsdC50b3ArZik6aD09dS5MRUZUP249cC5jc3MoXCJsZWZ0XCIsdC5sZWZ0LWYpOmg9PXUuUklHSFQmJihuPXAuY3NzKFwibGVmdFwiLHQubGVmdCtmKSkpLGQucmVzaXphYmxlJiZlLmN0cmxLZXkmJiFnJiYoaD09dS5VUD8obj0hMCxvPXAuaGVpZ2h0KCktZik6aD09dS5ET1dOJiYobj0hMCxvPXAuaGVpZ2h0KCkrZiksaD09dS5MRUZUPyhuPSEwLHI9cC53aWR0aCgpLWYpOmg9PXUuUklHSFQmJihuPSEwLHI9cC53aWR0aCgpK2YpLG4mJihhPWkocixkLm1pbldpZHRoLGQubWF4V2lkdGgpLHM9aShvLGQubWluSGVpZ2h0LGQubWF4SGVpZ2h0KSxpc05hTihhKXx8KHAud2lkdGgoYSksYy5vcHRpb25zLndpZHRoPWErXCJweFwiKSxpc05hTihzKXx8KHAuaGVpZ2h0KHMpLGMub3B0aW9ucy5oZWlnaHQ9cytcInB4XCIpLGMucmVzaXplKCkpKSxuJiZlLnByZXZlbnREZWZhdWx0KCkpfSxfb3ZlcmxheTpmdW5jdGlvbih0KXt2YXIgbj10aGlzLmFwcGVuZFRvLmNoaWxkcmVuKEMpLGk9dGhpcy53cmFwcGVyO3JldHVybiBuLmxlbmd0aHx8KG49ZShcIjxkaXYgY2xhc3M9J2stb3ZlcmxheScgLz5cIikpLG4uaW5zZXJ0QmVmb3JlKGlbMF0pLnRvZ2dsZSh0KS5jc3MoaixwYXJzZUludChpLmNzcyhqKSwxMCktMSksbn0sX2FjdGlvbkZvckljb246ZnVuY3Rpb24oZSl7dmFyIHQ9L1xcYmstaS1cXHcrXFxiLy5leGVjKGVbMF0uY2xhc3NOYW1lKVswXTtyZXR1cm57XCJrLWktY2xvc2VcIjpcIl9jbG9zZVwiLFwiay1pLW1heGltaXplXCI6XCJtYXhpbWl6ZVwiLFwiay1pLW1pbmltaXplXCI6XCJtaW5pbWl6ZVwiLFwiay1pLXJlc3RvcmVcIjpcInJlc3RvcmVcIixcImstaS1yZWZyZXNoXCI6XCJyZWZyZXNoXCIsXCJrLWktcGluXCI6XCJwaW5cIixcImstaS11bnBpblwiOlwidW5waW5cIn1bdF19LF93aW5kb3dBY3Rpb25IYW5kbGVyOmZ1bmN0aW9uKG4pe3ZhciBpLHI7aWYoIXRoaXMuX2Nsb3NpbmcpcmV0dXJuIGk9ZShuLnRhcmdldCkuY2xvc2VzdChcIi5rLXdpbmRvdy1hY3Rpb25cIikuZmluZChcIi5rLWljb25cIikscj10aGlzLl9hY3Rpb25Gb3JJY29uKGkpLHI/KG4ucHJldmVudERlZmF1bHQoKSx0aGlzW3JdKCksITEpOnR9LF9tb2RhbHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49ZSh5KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgbj1lKHRoaXMpLGk9dC5fb2JqZWN0KG4pLHI9aSYmaS5vcHRpb25zO3JldHVybiByJiZyLm1vZGFsJiZyLnZpc2libGUmJm4uaXMoTSl9KS5zb3J0KGZ1bmN0aW9uKHQsbil7cmV0dXJuK2UodCkuY3NzKFwiekluZGV4XCIpLStlKG4pLmNzcyhcInpJbmRleFwiKX0pO3JldHVybiB0PW51bGwsbn0sX29iamVjdDpmdW5jdGlvbihlKXt2YXIgdD1lLmNoaWxkcmVuKGspO3JldHVybiB0LmRhdGEoXCJrZW5kb1dpbmRvd1wiKXx8dC5kYXRhKFwia2VuZG9cIit0aGlzLm9wdGlvbnMubmFtZSl9LGNlbnRlcjpmdW5jdGlvbigpe3ZhciB0LG4saT10aGlzLHI9aS5vcHRpb25zLnBvc2l0aW9uLG89aS53cmFwcGVyLGE9ZSh3aW5kb3cpLHM9MCxsPTA7cmV0dXJuIGkub3B0aW9ucy5pc01heGltaXplZD9pOihpLm9wdGlvbnMucGlubmVkfHwocz1hLnNjcm9sbFRvcCgpLGw9YS5zY3JvbGxMZWZ0KCkpLG49bCtNYXRoLm1heCgwLChhLndpZHRoKCktby53aWR0aCgpKS8yKSx0PXMrTWF0aC5tYXgoMCwoYS5oZWlnaHQoKS1vLmhlaWdodCgpLXBhcnNlSW50KG8uY3NzKFwicGFkZGluZ1RvcFwiKSwxMCkpLzIpLG8uY3NzKHtsZWZ0Om4sdG9wOnR9KSxyLnRvcD10LHIubGVmdD1uLGkpfSx0aXRsZTpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMsaT1uLndyYXBwZXIscj1uLm9wdGlvbnMsbz1pLmNoaWxkcmVuKGIpLGE9by5jaGlsZHJlbih3KTtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT09PSExPyhpLmFkZENsYXNzKFwiay13aW5kb3ctdGl0bGVsZXNzXCIpLG8ucmVtb3ZlKCkpOihvLmxlbmd0aD9hLmh0bWwoZSk6KGkucHJlcGVuZChaLnRpdGxlYmFyKHIpKSxuLl9hY3Rpb25zKCksbz1pLmNoaWxkcmVuKGIpKSx0PW8ub3V0ZXJIZWlnaHQoKSxpLmNzcyhcInBhZGRpbmctdG9wXCIsdCksby5jc3MoXCJtYXJnaW4tdG9wXCIsLXQpKSxuLm9wdGlvbnMudGl0bGU9ZSxuKTphLnRleHQoKX0sY29udGVudDpmdW5jdGlvbihlLHQpe3ZhciBpPXRoaXMud3JhcHBlci5jaGlsZHJlbihrKSxyPWkuY2hpbGRyZW4oXCIua20tc2Nyb2xsLWNvbnRhaW5lclwiKTtyZXR1cm4gaT1yWzBdP3I6aSxuKGUpPyh0aGlzLmFuZ3VsYXIoXCJjbGVhbnVwXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6aS5jaGlsZHJlbigpfX0pLGwuZGVzdHJveSh0aGlzLmVsZW1lbnQuY2hpbGRyZW4oKSksaS5lbXB0eSgpLmh0bWwoZSksdGhpcy5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7dmFyIGUsbj1bXTtmb3IoZT1pLmxlbmd0aDstLWU+PTA7KW4ucHVzaCh7ZGF0YUl0ZW06dH0pO3JldHVybntlbGVtZW50czppLmNoaWxkcmVuKCksZGF0YTpufX0pLHRoaXMpOmkuaHRtbCgpfSxvcGVuOmZ1bmN0aW9uKCl7dmFyIHQsbixpPXRoaXMscj1pLndyYXBwZXIsbz1pLm9wdGlvbnMsYT1vLmFuaW1hdGlvbi5vcGVuLHM9ci5jaGlsZHJlbihrKTtyZXR1cm4gaS50cmlnZ2VyKHopfHwoaS5fY2xvc2luZyYmci5rZW5kb1N0b3AoITAsITApLGkuX2Nsb3Npbmc9ITEsaS50b0Zyb250KCksby5hdXRvRm9jdXMmJmkuZWxlbWVudC5mb2N1cygpLG8udmlzaWJsZT0hMCxvLm1vZGFsJiYodD1pLl9vdmVybGF5KCExKSx0LmtlbmRvU3RvcCghMCwhMCksYS5kdXJhdGlvbiYmbC5lZmZlY3RzLkZhZGU/KG49bC5meCh0KS5mYWRlSW4oKSxuLmR1cmF0aW9uKGEuZHVyYXRpb258fDApLG4uZW5kVmFsdWUoLjUpLG4ucGxheSgpKTp0LmNzcyhcIm9wYWNpdHlcIiwuNSksdC5zaG93KCkpLHIuaXMoTSl8fChzLmNzcyhXLFApLHIuc2hvdygpLmtlbmRvU3RvcCgpLmtlbmRvQW5pbWF0ZSh7ZWZmZWN0czphLmVmZmVjdHMsZHVyYXRpb246YS5kdXJhdGlvbixjb21wbGV0ZTpwKHRoaXMuX2FjdGl2YXRlLHRoaXMpfSkpKSxvLmlzTWF4aW1pemVkJiYoaS5fZG9jdW1lbnRTY3JvbGxUb3A9ZShkb2N1bWVudCkuc2Nyb2xsVG9wKCksZShcImh0bWwsIGJvZHlcIikuY3NzKFcsUCkpLGl9LF9hY3RpdmF0ZTpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5hdXRvRm9jdXMmJnRoaXMuZWxlbWVudC5mb2N1cygpLHRoaXMudHJpZ2dlcihGKSx0aGlzLndyYXBwZXIuY2hpbGRyZW4oaykuY3NzKFcsXCJcIil9LF9yZW1vdmVPdmVybGF5OmZ1bmN0aW9uKG4pe3ZhciBpLHI9dGhpcy5fbW9kYWxzKCksbz10aGlzLm9wdGlvbnMsYT1vLm1vZGFsJiYhci5sZW5ndGgscz1vLm1vZGFsP3RoaXMuX292ZXJsYXkoITApOmUodCksYz1vLmFuaW1hdGlvbi5jbG9zZTthPyFuJiZjLmR1cmF0aW9uJiZsLmVmZmVjdHMuRmFkZT8oaT1sLmZ4KHMpLmZhZGVPdXQoKSxpLmR1cmF0aW9uKGMuZHVyYXRpb258fDApLGkuc3RhcnRWYWx1ZSguNSksaS5wbGF5KCkpOnRoaXMuX292ZXJsYXkoITEpLnJlbW92ZSgpOnIubGVuZ3RoJiZ0aGlzLl9vYmplY3Qoci5sYXN0KCkpLl9vdmVybGF5KCEwKX0sX2Nsb3NlOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1uLndyYXBwZXIscj1uLm9wdGlvbnMsbz1yLmFuaW1hdGlvbi5vcGVuLGE9ci5hbmltYXRpb24uY2xvc2U7aWYoaS5pcyhNKSYmIW4udHJpZ2dlcihCLHt1c2VyVHJpZ2dlcmVkOiF0fSkpe2lmKG4uX2Nsb3NpbmcpcmV0dXJuO24uX2Nsb3Npbmc9ITAsci52aXNpYmxlPSExLGUoeSkuZWFjaChmdW5jdGlvbih0LG4pe3ZhciByPWUobikuY2hpbGRyZW4oayk7biE9aSYmci5maW5kKFwiPiAuXCIrUykubGVuZ3RoPjAmJnIuY2hpbGRyZW4oQykucmVtb3ZlKCl9KSx0aGlzLl9yZW1vdmVPdmVybGF5KCksaS5rZW5kb1N0b3AoKS5rZW5kb0FuaW1hdGUoe2VmZmVjdHM6YS5lZmZlY3RzfHxvLmVmZmVjdHMscmV2ZXJzZTphLnJldmVyc2U9PT0hMCxkdXJhdGlvbjphLmR1cmF0aW9uLGNvbXBsZXRlOnAodGhpcy5fZGVhY3RpdmF0ZSx0aGlzKX0pfW4ub3B0aW9ucy5pc01heGltaXplZCYmKGUoXCJodG1sLCBib2R5XCIpLmNzcyhXLFwiXCIpLG4uX2RvY3VtZW50U2Nyb2xsVG9wJiZuLl9kb2N1bWVudFNjcm9sbFRvcD4wJiZlKGRvY3VtZW50KS5zY3JvbGxUb3Aobi5fZG9jdW1lbnRTY3JvbGxUb3ApKX0sX2RlYWN0aXZhdGU6ZnVuY3Rpb24oKXt0aGlzLndyYXBwZXIuaGlkZSgpLmNzcyhcIm9wYWNpdHlcIixcIlwiKSx0aGlzLnRyaWdnZXIoUik7dmFyIGU9dGhpcy5fb2JqZWN0KHRoaXMuX21vZGFscygpLmxhc3QoKSk7ZSYmZS50b0Zyb250KCl9LGNsb3NlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Nsb3NlKCEwKSx0aGlzfSxfYWN0aW9uYWJsZTpmdW5jdGlvbih0KXtyZXR1cm4gZSh0KS5pcyhLK1wiLFwiK0srXCIgLmstaWNvbiw6aW5wdXQsYVwiKX0sX3Nob3VsZEZvY3VzOmZ1bmN0aW9uKHQpe3ZhciBuPWgoKSxpPXRoaXMuZWxlbWVudDtyZXR1cm4hKCF0aGlzLm9wdGlvbnMuYXV0b0ZvY3VzfHxlKG4pLmlzKGkpfHx0aGlzLl9hY3Rpb25hYmxlKHQpfHxpLmZpbmQobikubGVuZ3RoJiZpLmZpbmQodCkubGVuZ3RoKX0sdG9Gcm9udDpmdW5jdGlvbih0KXt2YXIgbixpLHI9dGhpcyxvPXIud3JhcHBlcixhPW9bMF0scz0rby5jc3MoaiksbD1zLGM9dCYmdC50YXJnZXR8fG51bGw7cmV0dXJuIGUoeSkuZWFjaChmdW5jdGlvbih0LG4pe3ZhciBpPWUobikscj1pLmNzcyhqKSxvPWkuY2hpbGRyZW4oayk7aXNOYU4ocil8fChzPU1hdGgubWF4KCtyLHMpKSxuIT1hJiZvLmZpbmQoXCI+IC5cIitTKS5sZW5ndGg+MCYmby5hcHBlbmQoWi5vdmVybGF5KX0pLCghb1swXS5zdHlsZS56SW5kZXh8fHM+bCkmJm8uY3NzKGoscysyKSxyLmVsZW1lbnQuZmluZChcIj4gLmstb3ZlcmxheVwiKS5yZW1vdmUoKSxyLl9zaG91bGRGb2N1cyhjKSYmKHIuZWxlbWVudC5mb2N1cygpLG49ZSh3aW5kb3cpLnNjcm9sbFRvcCgpLGk9cGFyc2VJbnQoby5wb3NpdGlvbigpLnRvcCwxMCksaT4wJiZuPmkmJihuPjA/ZSh3aW5kb3cpLnNjcm9sbFRvcChpKTpvLmNzcyhcInRvcFwiLG4pKSksbz1udWxsLHJ9LHRvZ2dsZU1heGltaXphdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jbG9zaW5nP3RoaXM6dGhpc1t0aGlzLm9wdGlvbnMuaXNNYXhpbWl6ZWQ/XCJyZXN0b3JlXCI6XCJtYXhpbWl6ZVwiXSgpfSxyZXN0b3JlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucyxpPW4ubWluSGVpZ2h0LHI9dC5yZXN0b3JlT3B0aW9ucztyZXR1cm4gbi5pc01heGltaXplZHx8bi5pc01pbmltaXplZD8oaSYmMS8wIT1pJiZ0LndyYXBwZXIuY3NzKFwibWluLWhlaWdodFwiLGkpLHQud3JhcHBlci5jc3Moe3Bvc2l0aW9uOm4ucGlubmVkP1wiZml4ZWRcIjpcImFic29sdXRlXCIsbGVmdDpyLmxlZnQsdG9wOnIudG9wLHdpZHRoOnIud2lkdGgsaGVpZ2h0OnIuaGVpZ2h0fSkucmVtb3ZlQ2xhc3MoRSkuZmluZChcIi5rLXdpbmRvdy1jb250ZW50LC5rLXJlc2l6ZS1oYW5kbGVcIikuc2hvdygpLmVuZCgpLmZpbmQoXCIuay13aW5kb3ctdGl0bGViYXIgLmstaS1yZXN0b3JlXCIpLnBhcmVudCgpLnJlbW92ZSgpLmVuZCgpLmVuZCgpLmZpbmQoRykucGFyZW50KCkuc2hvdygpLmVuZCgpLmVuZCgpLmZpbmQoWSkucGFyZW50KCkuc2hvdygpLHQub3B0aW9ucy53aWR0aD1yLndpZHRoLHQub3B0aW9ucy5oZWlnaHQ9ci5oZWlnaHQsZShcImh0bWwsIGJvZHlcIikuY3NzKFcsXCJcIiksdGhpcy5fZG9jdW1lbnRTY3JvbGxUb3AmJnRoaXMuX2RvY3VtZW50U2Nyb2xsVG9wPjAmJmUoZG9jdW1lbnQpLnNjcm9sbFRvcCh0aGlzLl9kb2N1bWVudFNjcm9sbFRvcCksbi5pc01heGltaXplZD1uLmlzTWluaW1pemVkPSExLHQucmVzaXplKCksdCk6dH0sbWF4aW1pemU6cihcIm1heGltaXplXCIsZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC53cmFwcGVyLGk9bi5wb3NpdGlvbigpO2YodC5yZXN0b3JlT3B0aW9ucyx7bGVmdDppLmxlZnQsdG9wOmkudG9wfSksbi5jc3Moe2xlZnQ6MCx0b3A6MCxwb3NpdGlvbjpcImZpeGVkXCJ9KS5hZGRDbGFzcyhFKSx0aGlzLl9kb2N1bWVudFNjcm9sbFRvcD1lKGRvY3VtZW50KS5zY3JvbGxUb3AoKSxlKFwiaHRtbCwgYm9keVwiKS5jc3MoVyxQKSx0Lm9wdGlvbnMuaXNNYXhpbWl6ZWQ9ITAsdC5fb25Eb2N1bWVudFJlc2l6ZSgpfSksbWluaW1pemU6cihcIm1pbmltaXplXCIsZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Uud3JhcHBlci5jc3Moe2hlaWdodDpcIlwiLG1pbkhlaWdodDpcIlwifSksZS5lbGVtZW50LmhpZGUoKSxlLm9wdGlvbnMuaXNNaW5pbWl6ZWQ9ITB9KSxwaW46ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPWUod2luZG93KSxyPW4ud3JhcHBlcixvPXBhcnNlSW50KHIuY3NzKFwidG9wXCIpLDEwKSxhPXBhcnNlSW50KHIuY3NzKFwibGVmdFwiKSwxMCk7KHR8fCFuLm9wdGlvbnMucGlubmVkJiYhbi5vcHRpb25zLmlzTWF4aW1pemVkKSYmKHIuY3NzKHtwb3NpdGlvbjpcImZpeGVkXCIsdG9wOm8taS5zY3JvbGxUb3AoKSxsZWZ0OmEtaS5zY3JvbGxMZWZ0KCl9KSxyLmNoaWxkcmVuKGIpLmZpbmQocSkuYWRkQ2xhc3MoXCJrLWktdW5waW5cIikucmVtb3ZlQ2xhc3MoXCJrLWktcGluXCIpLG4ub3B0aW9ucy5waW5uZWQ9ITApfSx1bnBpbjpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj1lKHdpbmRvdyksaT10LndyYXBwZXIscj1wYXJzZUludChpLmNzcyhcInRvcFwiKSwxMCksbz1wYXJzZUludChpLmNzcyhcImxlZnRcIiksMTApO3Qub3B0aW9ucy5waW5uZWQmJiF0Lm9wdGlvbnMuaXNNYXhpbWl6ZWQmJihpLmNzcyh7cG9zaXRpb246XCJcIix0b3A6cituLnNjcm9sbFRvcCgpLGxlZnQ6bytuLnNjcm9sbExlZnQoKX0pLGkuY2hpbGRyZW4oYikuZmluZCgkKS5hZGRDbGFzcyhcImstaS1waW5cIikucmVtb3ZlQ2xhc3MoXCJrLWktdW5waW5cIiksdC5vcHRpb25zLnBpbm5lZD0hMSl9LF9vbkRvY3VtZW50UmVzaXplOmZ1bmN0aW9uKCl7dmFyIHQsbixpPXRoaXMscj1pLndyYXBwZXIsbz1lKHdpbmRvdyk7aS5vcHRpb25zLmlzTWF4aW1pemVkJiYodD1vLndpZHRoKCksbj1vLmhlaWdodCgpLXBhcnNlSW50KHIuY3NzKFwicGFkZGluZy10b3BcIiksMTApLHIuY3NzKHt3aWR0aDp0LGhlaWdodDpufSksaS5vcHRpb25zLndpZHRoPXQsaS5vcHRpb25zLmhlaWdodD1uLGkucmVzaXplKCkpfSxyZWZyZXNoOmZ1bmN0aW9uKHQpe3ZhciBpLHIsbyxhPXRoaXMscz1hLm9wdGlvbnMsbD1lKGEuZWxlbWVudCk7cmV0dXJuIHUodCl8fCh0PXt1cmw6dH0pLHQ9Zih7fSxzLmNvbnRlbnQsdCkscj1uKHMuaWZyYW1lKT9zLmlmcmFtZTp0LmlmcmFtZSxvPXQudXJsLG8/KG4ocil8fChyPSFYKG8pKSxyPyhpPWwuZmluZChcIi5cIitTKVswXSxpP2kuc3JjPW98fGkuc3JjOmwuaHRtbChaLmNvbnRlbnRGcmFtZShmKHt9LHMse2NvbnRlbnQ6dH0pKSksbC5maW5kKFwiLlwiK1MpLnVuYmluZChcImxvYWRcIitfKS5vbihcImxvYWRcIitfLHAodGhpcy5fdHJpZ2dlclJlZnJlc2gsdGhpcykpKTphLl9hamF4UmVxdWVzdCh0KSk6KHQudGVtcGxhdGUmJmEuY29udGVudChtKHQudGVtcGxhdGUpKHt9KSksYS50cmlnZ2VyKEwpKSxsLnRvZ2dsZUNsYXNzKFwiay13aW5kb3ctaWZyYW1lY29udGVudFwiLCEhciksYX0sX3RyaWdnZXJSZWZyZXNoOmZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKEwpfSxfYWpheENvbXBsZXRlOmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMuX2xvYWRpbmdJY29uVGltZW91dCksdGhpcy53cmFwcGVyLmZpbmQoUSkucmVtb3ZlQ2xhc3MoVClcbn0sX2FqYXhFcnJvcjpmdW5jdGlvbihlLHQpe3RoaXMudHJpZ2dlcihVLHtzdGF0dXM6dCx4aHI6ZX0pfSxfYWpheFN1Y2Nlc3M6ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBuPXQ7ZSYmKG49bShlKSh0fHx7fSkpLHRoaXMuY29udGVudChuLHQpLHRoaXMuZWxlbWVudC5wcm9wKFwic2Nyb2xsVG9wXCIsMCksdGhpcy50cmlnZ2VyKEwpfX0sX3Nob3dMb2FkaW5nOmZ1bmN0aW9uKCl7dGhpcy53cmFwcGVyLmZpbmQoUSkuYWRkQ2xhc3MoVCl9LF9hamF4UmVxdWVzdDpmdW5jdGlvbih0KXt0aGlzLl9sb2FkaW5nSWNvblRpbWVvdXQ9c2V0VGltZW91dChwKHRoaXMuX3Nob3dMb2FkaW5nLHRoaXMpLDEwMCksZS5hamF4KGYoe3R5cGU6XCJHRVRcIixkYXRhVHlwZTpcImh0bWxcIixjYWNoZTohMSxlcnJvcjpwKHRoaXMuX2FqYXhFcnJvcix0aGlzKSxjb21wbGV0ZTpwKHRoaXMuX2FqYXhDb21wbGV0ZSx0aGlzKSxzdWNjZXNzOnAodGhpcy5fYWpheFN1Y2Nlc3ModC50ZW1wbGF0ZSksdGhpcyl9LHQpKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBuPXRoaXM7bi5yZXNpemluZyYmbi5yZXNpemluZy5kZXN0cm95KCksbi5kcmFnZ2luZyYmbi5kcmFnZ2luZy5kZXN0cm95KCksbi53cmFwcGVyLm9mZihfKS5jaGlsZHJlbihrKS5vZmYoXykuZW5kKCkuZmluZChcIi5rLXJlc2l6ZS1oYW5kbGUsLmstd2luZG93LXRpdGxlYmFyXCIpLm9mZihfKSxlKHdpbmRvdykub2ZmKFwicmVzaXplXCIrXytuLl9tYXJrZXIpLGNsZWFyVGltZW91dChuLl9sb2FkaW5nSWNvblRpbWVvdXQpLGMuZm4uZGVzdHJveS5jYWxsKG4pLG4udW5iaW5kKHQpLGwuZGVzdHJveShuLndyYXBwZXIpLG4uX3JlbW92ZU92ZXJsYXkoITApLG4ud3JhcHBlci5lbXB0eSgpLnJlbW92ZSgpLG4ud3JhcHBlcj1uLmFwcGVuZFRvPW4uZWxlbWVudD1lKCl9LF9jcmVhdGVXaW5kb3c6ZnVuY3Rpb24oKXt2YXIgdCxuLGk9dGhpcy5lbGVtZW50LHI9dGhpcy5vcHRpb25zLG89bC5zdXBwb3J0LmlzUnRsKGkpO3Iuc2Nyb2xsYWJsZT09PSExJiZpLmF0dHIoXCJzdHlsZVwiLFwib3ZlcmZsb3c6aGlkZGVuO1wiKSxuPWUoWi53cmFwcGVyKHIpKSx0PWkuZmluZChcImlmcmFtZTpub3QoLmstY29udGVudClcIikubWFwKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRBdHRyaWJ1dGUoXCJzcmNcIik7cmV0dXJuIHRoaXMuc3JjPVwiXCIsZX0pLG4udG9nZ2xlQ2xhc3MoXCJrLXJ0bFwiLG8pLmFwcGVuZFRvKHRoaXMuYXBwZW5kVG8pLmFwcGVuZChpKS5maW5kKFwiaWZyYW1lOm5vdCguay1jb250ZW50KVwiKS5lYWNoKGZ1bmN0aW9uKGUpe3RoaXMuc3JjPXRbZV19KSxuLmZpbmQoXCIuay13aW5kb3ctdGl0bGVcIikuY3NzKG8/XCJsZWZ0XCI6XCJyaWdodFwiLG4uZmluZChcIi5rLXdpbmRvdy1hY3Rpb25zXCIpLm91dGVyV2lkdGgoKSsxMCksaS5jc3MoXCJ2aXNpYmlsaXR5XCIsXCJcIikuc2hvdygpLGkuZmluZChcIltkYXRhLXJvbGU9ZWRpdG9yXVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKS5kYXRhKFwia2VuZG9FZGl0b3JcIik7dCYmdC5yZWZyZXNoKCl9KSxuPWk9bnVsbH19KSxaPXt3cmFwcGVyOm0oXCI8ZGl2IGNsYXNzPSdrLXdpZGdldCBrLXdpbmRvdycgLz5cIiksYWN0aW9uOm0oXCI8YSByb2xlPSdidXR0b24nIGhyZWY9J1xcXFwjJyBjbGFzcz0nay13aW5kb3ctYWN0aW9uIGstbGluayc+PHNwYW4gcm9sZT0ncHJlc2VudGF0aW9uJyBjbGFzcz0nay1pY29uIGstaS0jPSBuYW1lLnRvTG93ZXJDYXNlKCkgIyc+Iz0gbmFtZSAjPC9zcGFuPjwvYT5cIiksdGl0bGViYXI6bShcIjxkaXYgY2xhc3M9J2std2luZG93LXRpdGxlYmFyIGstaGVhZGVyJz4mbmJzcDs8c3BhbiBjbGFzcz0nay13aW5kb3ctdGl0bGUnPiM9IHRpdGxlICM8L3NwYW4+PGRpdiBjbGFzcz0nay13aW5kb3ctYWN0aW9ucycgLz48L2Rpdj5cIiksb3ZlcmxheTpcIjxkaXYgY2xhc3M9J2stb3ZlcmxheScgLz5cIixjb250ZW50RnJhbWU6bShcIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHRpdGxlPScjPSB0aXRsZSAjJyBjbGFzcz0nXCIrUytcIicgc3JjPScjPSBjb250ZW50LnVybCAjJz5UaGlzIHBhZ2UgcmVxdWlyZXMgZnJhbWVzIGluIG9yZGVyIHRvIHNob3cgY29udGVudDwvaWZyYW1lPlwiKSxyZXNpemVIYW5kbGU6bShcIjxkaXYgY2xhc3M9J2stcmVzaXplLWhhbmRsZSBrLXJlc2l6ZS0jPSBkYXRhICMnPjwvZGl2PlwiKX07YS5wcm90b3R5cGU9e2FkZE92ZXJsYXk6ZnVuY3Rpb24oKXt0aGlzLm93bmVyLndyYXBwZXIuYXBwZW5kKFoub3ZlcmxheSl9LHJlbW92ZU92ZXJsYXk6ZnVuY3Rpb24oKXt0aGlzLm93bmVyLndyYXBwZXIuZmluZChDKS5yZW1vdmUoKX0sZHJhZ3N0YXJ0OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1uLm93bmVyLHI9aS53cmFwcGVyO24uZWxlbWVudFBhZGRpbmc9cGFyc2VJbnQoci5jc3MoXCJwYWRkaW5nLXRvcFwiKSwxMCksbi5pbml0aWFsUG9zaXRpb249bC5nZXRPZmZzZXQocixcInBvc2l0aW9uXCIpLG4ucmVzaXplRGlyZWN0aW9uPXQuY3VycmVudFRhcmdldC5wcm9wKFwiY2xhc3NOYW1lXCIpLnJlcGxhY2UoXCJrLXJlc2l6ZS1oYW5kbGUgay1yZXNpemUtXCIsXCJcIiksbi5pbml0aWFsU2l6ZT17d2lkdGg6ci53aWR0aCgpLGhlaWdodDpyLmhlaWdodCgpfSxuLmNvbnRhaW5lck9mZnNldD1sLmdldE9mZnNldChpLmFwcGVuZFRvLFwicG9zaXRpb25cIiksci5jaGlsZHJlbih4KS5ub3QodC5jdXJyZW50VGFyZ2V0KS5oaWRlKCksZSh2KS5jc3MoSSx0LmN1cnJlbnRUYXJnZXQuY3NzKEkpKX0sZHJhZzpmdW5jdGlvbihlKXt2YXIgdCxuLHIsbyxhPXRoaXMscz1hLm93bmVyLGw9cy53cmFwcGVyLGM9cy5vcHRpb25zLGQ9YS5yZXNpemVEaXJlY3Rpb24sdT1hLmNvbnRhaW5lck9mZnNldCxoPWEuaW5pdGlhbFBvc2l0aW9uLHA9YS5pbml0aWFsU2l6ZSxmPU1hdGgubWF4KGUueC5sb2NhdGlvbix1LmxlZnQpLGc9TWF0aC5tYXgoZS55LmxvY2F0aW9uLHUudG9wKTtkLmluZGV4T2YoXCJlXCIpPj0wPyh0PWYtaC5sZWZ0LGwud2lkdGgoaSh0LGMubWluV2lkdGgsYy5tYXhXaWR0aCkpKTpkLmluZGV4T2YoXCJ3XCIpPj0wJiYobz1oLmxlZnQrcC53aWR0aCx0PWkoby1mLGMubWluV2lkdGgsYy5tYXhXaWR0aCksbC5jc3Moe2xlZnQ6by10LXUubGVmdCx3aWR0aDp0fSkpLGQuaW5kZXhPZihcInNcIik+PTA/KG49Zy1oLnRvcC1hLmVsZW1lbnRQYWRkaW5nLGwuaGVpZ2h0KGkobixjLm1pbkhlaWdodCxjLm1heEhlaWdodCkpKTpkLmluZGV4T2YoXCJuXCIpPj0wJiYocj1oLnRvcCtwLmhlaWdodCxuPWkoci1nLGMubWluSGVpZ2h0LGMubWF4SGVpZ2h0KSxsLmNzcyh7dG9wOnItbi11LnRvcCxoZWlnaHQ6bn0pKSx0JiYocy5vcHRpb25zLndpZHRoPXQrXCJweFwiKSxuJiYocy5vcHRpb25zLmhlaWdodD1uK1wicHhcIikscy5yZXNpemUoKX0sZHJhZ2VuZDpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9bi5vd25lcixyPWkud3JhcHBlcjtyZXR1cm4gci5jaGlsZHJlbih4KS5ub3QodC5jdXJyZW50VGFyZ2V0KS5zaG93KCksZSh2KS5jc3MoSSxcIlwiKSxpLnRvdWNoU2Nyb2xsZXImJmkudG91Y2hTY3JvbGxlci5yZXNldCgpLDI3PT10LmtleUNvZGUmJnIuY3NzKG4uaW5pdGlhbFBvc2l0aW9uKS5jc3Mobi5pbml0aWFsU2l6ZSksaS50cmlnZ2VyKEgpLCExfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fZHJhZ2dhYmxlJiZ0aGlzLl9kcmFnZ2FibGUuZGVzdHJveSgpLHRoaXMuX2RyYWdnYWJsZT10aGlzLm93bmVyPW51bGx9fSxzLnByb3RvdHlwZT17ZHJhZ3N0YXJ0OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMub3duZXIsaT1uLmVsZW1lbnQscj1pLmZpbmQoXCIuay13aW5kb3ctYWN0aW9uc1wiKSxvPWwuZ2V0T2Zmc2V0KG4uYXBwZW5kVG8pO24udHJpZ2dlcihOKSxuLmluaXRpYWxXaW5kb3dQb3NpdGlvbj1sLmdldE9mZnNldChuLndyYXBwZXIsXCJwb3NpdGlvblwiKSxuLnN0YXJ0UG9zaXRpb249e2xlZnQ6dC54LmNsaWVudC1uLmluaXRpYWxXaW5kb3dQb3NpdGlvbi5sZWZ0LHRvcDp0LnkuY2xpZW50LW4uaW5pdGlhbFdpbmRvd1Bvc2l0aW9uLnRvcH0sbi5taW5MZWZ0UG9zaXRpb249ci5sZW5ndGg+MD9yLm91dGVyV2lkdGgoKStwYXJzZUludChyLmNzcyhcInJpZ2h0XCIpLDEwKS1pLm91dGVyV2lkdGgoKToyMC1pLm91dGVyV2lkdGgoKSxuLm1pbkxlZnRQb3NpdGlvbi09by5sZWZ0LG4ubWluVG9wUG9zaXRpb249LW8udG9wLG4ud3JhcHBlci5hcHBlbmQoWi5vdmVybGF5KS5jaGlsZHJlbih4KS5oaWRlKCksZSh2KS5jc3MoSSx0LmN1cnJlbnRUYXJnZXQuY3NzKEkpKX0sZHJhZzpmdW5jdGlvbih0KXt2YXIgbj10aGlzLm93bmVyLGk9bi5vcHRpb25zLnBvc2l0aW9uLHI9TWF0aC5tYXgodC55LmNsaWVudC1uLnN0YXJ0UG9zaXRpb24udG9wLG4ubWluVG9wUG9zaXRpb24pLG89TWF0aC5tYXgodC54LmNsaWVudC1uLnN0YXJ0UG9zaXRpb24ubGVmdCxuLm1pbkxlZnRQb3NpdGlvbiksYT17bGVmdDpvLHRvcDpyfTtlKG4ud3JhcHBlcikuY3NzKGEpLGkudG9wPXIsaS5sZWZ0PW99LF9maW5pc2hEcmFnOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vd25lcjt0LndyYXBwZXIuY2hpbGRyZW4oeCkudG9nZ2xlKCF0Lm9wdGlvbnMuaXNNaW5pbWl6ZWQpLmVuZCgpLmZpbmQoQykucmVtb3ZlKCksZSh2KS5jc3MoSSxcIlwiKX0sZHJhZ2NhbmNlbDpmdW5jdGlvbihlKXt0aGlzLl9maW5pc2hEcmFnKCksZS5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoeSkuY3NzKHRoaXMub3duZXIuaW5pdGlhbFdpbmRvd1Bvc2l0aW9uKX0sZHJhZ2VuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9maW5pc2hEcmFnKCksdGhpcy5vd25lci50cmlnZ2VyKFYpLCExfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fZHJhZ2dhYmxlJiZ0aGlzLl9kcmFnZ2FibGUuZGVzdHJveSgpLHRoaXMuX2RyYWdnYWJsZT10aGlzLm93bmVyPW51bGx9fSxsLnVpLnBsdWdpbihKKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUpe3ZhciB0LG4saT1lLmZpbmQoayhcInBvcG92ZXJcIikpLHI9cy5yb2xlcztmb3IodD0wLG49aS5sZW5ndGg7bj50O3QrKylvLmluaXRXaWRnZXQoaVt0XSx7fSxyKX1mdW5jdGlvbiBpKGUpe28udHJpZ2dlcmVkQnlJbnB1dChlKXx8ZS5wcmV2ZW50RGVmYXVsdCgpfWZ1bmN0aW9uIHIodCl7dC5lYWNoKGZ1bmN0aW9uKCl7by5pbml0V2lkZ2V0KGUodGhpcykse30scy5yb2xlcyl9KX12YXIgbz13aW5kb3cua2VuZG8sYT1vLm1vYmlsZSxzPWEudWksbD1vLmF0dHIsYz1zLldpZGdldCxkPW8uVmlld0Nsb25lLHU9XCJpbml0XCIsaD0nPGRpdiBzdHlsZT1cImhlaWdodDogMTAwJTsgd2lkdGg6IDEwMCU7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB6LWluZGV4OiAyMDAwMDsgZGlzcGxheTogbm9uZVwiIC8+JyxwPVwiYmVmb3JlU2hvd1wiLGY9XCJzaG93XCIsZz1cImFmdGVyU2hvd1wiLG09XCJiZWZvcmVIaWRlXCIsdj1cInRyYW5zaXRpb25FbmRcIixfPVwidHJhbnNpdGlvblN0YXJ0XCIseT1cImhpZGVcIix3PVwiZGVzdHJveVwiLGI9by5hdHRyVmFsdWUsaz1vLnJvbGVTZWxlY3Rvcix4PW8uZGlyZWN0aXZlU2VsZWN0b3IsQz1vLmNvbXBpbGVNb2JpbGVEaXJlY3RpdmUsUz1jLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe2MuZm4uaW5pdC5jYWxsKHRoaXMsdCxuKSx0aGlzLnBhcmFtcz17fSxlLmV4dGVuZCh0aGlzLG4pLHRoaXMudHJhbnNpdGlvbj10aGlzLnRyYW5zaXRpb258fHRoaXMuZGVmYXVsdFRyYW5zaXRpb24sdGhpcy5faWQoKSx0aGlzLm9wdGlvbnMuJGFuZ3VsYXI/dGhpcy5fb3ZlcmxheSgpOih0aGlzLl9sYXlvdXQoKSx0aGlzLl9vdmVybGF5KCksdGhpcy5fc2Nyb2xsZXIoKSx0aGlzLl9tb2RlbCgpKX0sZXZlbnRzOlt1LHAsZixnLG0seSx3LF8sdl0sb3B0aW9uczp7bmFtZTpcIlZpZXdcIix0aXRsZTpcIlwiLGxheW91dDpudWxsLGdldExheW91dDplLm5vb3AscmVsb2FkOiExLHRyYW5zaXRpb246XCJcIixkZWZhdWx0VHJhbnNpdGlvbjpcIlwiLHVzZU5hdGl2ZVNjcm9sbGluZzohMSxzdHJldGNoOiExLHpvb206ITEsbW9kZWw6bnVsbCxtb2RlbFNjb3BlOndpbmRvdyxzY3JvbGxlcjp7fSxpbml0V2lkZ2V0czohMH0sZW5hYmxlOmZ1bmN0aW9uKGUpe3Q9PT1lJiYoZT0hMCksZT90aGlzLm92ZXJsYXkuaGlkZSgpOnRoaXMub3ZlcmxheS5zaG93KCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmxheW91dCYmdGhpcy5sYXlvdXQuZGV0YWNoKHRoaXMpLHRoaXMudHJpZ2dlcih3KSxjLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLnNjcm9sbGVyJiZ0aGlzLnNjcm9sbGVyLmRlc3Ryb3koKSx0aGlzLm9wdGlvbnMuJGFuZ3VsYXImJnRoaXMuZWxlbWVudC5zY29wZSgpLiRkZXN0cm95KCksby5kZXN0cm95KHRoaXMuZWxlbWVudCl9LHB1cmdlOmZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95KCksdGhpcy5lbGVtZW50LnJlbW92ZSgpfSx0cmlnZ2VyQmVmb3JlU2hvdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyaWdnZXIocCx7dmlldzp0aGlzfSk/ITE6ITB9LHNob3dTdGFydDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudDtlLmNzcyhcImRpc3BsYXlcIixcIlwiKSx0aGlzLmluaXRlZD90aGlzLl9pbnZva2VOZ0NvbnRyb2xsZXIoKToodGhpcy5pbml0ZWQ9ITAsdGhpcy50cmlnZ2VyKHUse3ZpZXc6dGhpc30pKSx0aGlzLmxheW91dCYmdGhpcy5sYXlvdXQuYXR0YWNoKHRoaXMpLHRoaXMuX3BhZElmTmF0aXZlU2Nyb2xsaW5nKCksdGhpcy50cmlnZ2VyKGYse3ZpZXc6dGhpc30pLG8ucmVzaXplKGUpfSxzaG93RW5kOmZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKGcse3ZpZXc6dGhpc30pLHRoaXMuX3BhZElmTmF0aXZlU2Nyb2xsaW5nKCl9LGhpZGVTdGFydDpmdW5jdGlvbigpe3RoaXMudHJpZ2dlcihtLHt2aWV3OnRoaXN9KX0saGlkZUVuZDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5lbGVtZW50LmhpZGUoKSxlLnRyaWdnZXIoeSx7dmlldzplfSksZS5sYXlvdXQmJmUubGF5b3V0LnRyaWdnZXIoeSx7dmlldzplLGxheW91dDplLmxheW91dH0pfSxiZWZvcmVUcmFuc2l0aW9uOmZ1bmN0aW9uKGUpe3RoaXMudHJpZ2dlcihfLHt0eXBlOmV9KX0sYWZ0ZXJUcmFuc2l0aW9uOmZ1bmN0aW9uKGUpe3RoaXMudHJpZ2dlcih2LHt0eXBlOmV9KX0sX3BhZElmTmF0aXZlU2Nyb2xsaW5nOmZ1bmN0aW9uKCl7aWYoYS5hcHBMZXZlbE5hdGl2ZVNjcm9sbGluZygpKXt2YXIgZT1vLnN1cHBvcnQubW9iaWxlT1MmJm8uc3VwcG9ydC5tb2JpbGVPUy5hbmRyb2lkLHQ9YS5hcHBsaWNhdGlvbi5vcy5hbmRyb2lkfHxhLmFwcGxpY2F0aW9uLnNraW4oKS5pbmRleE9mKFwiYW5kcm9pZFwiKT4tMSxuPWV8fHQ/XCJmb290ZXJcIjpcImhlYWRlclwiLGk9ZXx8dD9cImhlYWRlclwiOlwiZm9vdGVyXCI7dGhpcy5jb250ZW50LmNzcyh7cGFkZGluZ1RvcDp0aGlzW25dLmhlaWdodCgpLHBhZGRpbmdCb3R0b206dGhpc1tpXS5oZWlnaHQoKX0pfX0sY29udGVudEVsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBlLm9wdGlvbnMuc3RyZXRjaD9lLmNvbnRlbnQ6ZS5zY3JvbGxlckNvbnRlbnR9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBkKHRoaXMpfSxfc2Nyb2xsZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2EuYXBwTGV2ZWxOYXRpdmVTY3JvbGxpbmcoKXx8KHQub3B0aW9ucy5zdHJldGNoP3QuY29udGVudC5hZGRDbGFzcyhcImttLXN0cmV0Y2hlZC12aWV3XCIpOih0LmNvbnRlbnQua2VuZG9Nb2JpbGVTY3JvbGxlcihlLmV4dGVuZCh0Lm9wdGlvbnMuc2Nyb2xsZXIse3pvb206dC5vcHRpb25zLnpvb20sdXNlTmF0aXZlOnQub3B0aW9ucy51c2VOYXRpdmVTY3JvbGxpbmd9KSksdC5zY3JvbGxlcj10LmNvbnRlbnQuZGF0YShcImtlbmRvTW9iaWxlU2Nyb2xsZXJcIiksdC5zY3JvbGxlckNvbnRlbnQ9dC5zY3JvbGxlci5zY3JvbGxFbGVtZW50KSxvLnN1cHBvcnQua2luZXRpY1Njcm9sbE5lZWRlZCYmKGUodC5lbGVtZW50KS5vbihcInRvdWNobW92ZVwiLFwiLmttLWhlYWRlclwiLGkpLHQub3B0aW9ucy51c2VOYXRpdmVTY3JvbGxpbmd8fGUodC5lbGVtZW50KS5vbihcInRvdWNobW92ZVwiLFwiLmttLWNvbnRlbnRcIixpKSkpfSxfbW9kZWw6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5lbGVtZW50LGk9ZS5vcHRpb25zLm1vZGVsO1wic3RyaW5nXCI9PXR5cGVvZiBpJiYoaT1vLmdldHRlcihpKShlLm9wdGlvbnMubW9kZWxTY29wZSkpLGUubW9kZWw9aSxuKHQpLGUuZWxlbWVudC5jc3MoXCJkaXNwbGF5XCIsXCJcIiksZS5vcHRpb25zLmluaXRXaWRnZXRzJiYoaT9vLmJpbmQodCxpLHMsby51aSxvLmRhdGF2aXoudWkpOmEuaW5pdCh0LmNoaWxkcmVuKCkpKSxlLmVsZW1lbnQuY3NzKFwiZGlzcGxheVwiLFwibm9uZVwiKX0sX2lkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50LHQ9ZS5hdHRyKFwiaWRcIil8fFwiXCI7dGhpcy5pZD1iKGUsXCJ1cmxcIil8fFwiI1wiK3QsXCIjXCI9PXRoaXMuaWQmJih0aGlzLmlkPW8uZ3VpZCgpLGUuYXR0cihcImlkXCIsdGhpcy5pZCkpfSxfbGF5b3V0OmZ1bmN0aW9uKCl7dmFyIGU9ayhcImNvbnRlbnRcIiksdD10aGlzLmVsZW1lbnQ7dC5hZGRDbGFzcyhcImttLXZpZXdcIiksdGhpcy5oZWFkZXI9dC5jaGlsZHJlbihrKFwiaGVhZGVyXCIpKS5hZGRDbGFzcyhcImttLWhlYWRlclwiKSx0aGlzLmZvb3Rlcj10LmNoaWxkcmVuKGsoXCJmb290ZXJcIikpLmFkZENsYXNzKFwia20tZm9vdGVyXCIpLHQuY2hpbGRyZW4oZSlbMF18fHQud3JhcElubmVyKFwiPGRpdiBcIitsKFwicm9sZVwiKSsnPVwiY29udGVudFwiPjwvZGl2PicpLHRoaXMuY29udGVudD10LmNoaWxkcmVuKGsoXCJjb250ZW50XCIpKS5hZGRDbGFzcyhcImttLWNvbnRlbnRcIiksdGhpcy5lbGVtZW50LnByZXBlbmQodGhpcy5oZWFkZXIpLmFwcGVuZCh0aGlzLmZvb3RlciksdGhpcy5sYXlvdXQ9dGhpcy5vcHRpb25zLmdldExheW91dCh0aGlzLmxheW91dCksdGhpcy5sYXlvdXQmJnRoaXMubGF5b3V0LnNldHVwKHRoaXMpfSxfb3ZlcmxheTpmdW5jdGlvbigpe3RoaXMub3ZlcmxheT1lKGgpLmFwcGVuZFRvKHRoaXMuZWxlbWVudCl9LF9pbnZva2VOZ0NvbnRyb2xsZXI6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy5lbGVtZW50O3RoaXMub3B0aW9ucy4kYW5ndWxhciYmKGU9bi5jb250cm9sbGVyKCksdD1uLnNjb3BlKCksZSYmdC4kYXBwbHkoZnVuY3Rpb24oKXtuLmluamVjdG9yKCkuaW52b2tlKGUuY29uc3RydWN0b3IsbnVsbCx7JHNjb3BlOnR9KX0pKX19KSxUPWMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7Yy5mbi5pbml0LmNhbGwodGhpcyxlLHQpLGU9dGhpcy5lbGVtZW50LHRoaXMuaGVhZGVyPWUuY2hpbGRyZW4odGhpcy5fbG9jYXRlKFwiaGVhZGVyXCIpKS5hZGRDbGFzcyhcImttLWhlYWRlclwiKSx0aGlzLmZvb3Rlcj1lLmNoaWxkcmVuKHRoaXMuX2xvY2F0ZShcImZvb3RlclwiKSkuYWRkQ2xhc3MoXCJrbS1mb290ZXJcIiksdGhpcy5lbGVtZW50cz10aGlzLmhlYWRlci5hZGQodGhpcy5mb290ZXIpLG4oZSksdGhpcy5vcHRpb25zLiRhbmd1bGFyfHxvLm1vYmlsZS5pbml0KHRoaXMuZWxlbWVudC5jaGlsZHJlbigpKSx0aGlzLmVsZW1lbnQuZGV0YWNoKCksdGhpcy50cmlnZ2VyKHUse2xheW91dDp0aGlzfSl9LF9sb2NhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub3B0aW9ucy4kYW5ndWxhcj94KGUpOmsoZSl9LG9wdGlvbnM6e25hbWU6XCJMYXlvdXRcIixpZDpudWxsLHBsYXRmb3JtOm51bGx9LGV2ZW50czpbdSxmLHldLHNldHVwOmZ1bmN0aW9uKGUpe2UuaGVhZGVyWzBdfHwoZS5oZWFkZXI9dGhpcy5oZWFkZXIpLGUuZm9vdGVyWzBdfHwoZS5mb290ZXI9dGhpcy5mb290ZXIpfSxkZXRhY2g6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmhlYWRlcj09PXQuaGVhZGVyJiZ0LmhlYWRlclswXSYmZS5lbGVtZW50LnByZXBlbmQodC5oZWFkZXIuZGV0YWNoKClbMF0uY2xvbmVOb2RlKCEwKSksZS5mb290ZXI9PT10LmZvb3RlciYmdC5mb290ZXIubGVuZ3RoJiZlLmVsZW1lbnQuYXBwZW5kKHQuZm9vdGVyLmRldGFjaCgpWzBdLmNsb25lTm9kZSghMCkpfSxhdHRhY2g6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuY3VycmVudFZpZXc7biYmdC5kZXRhY2gobiksZS5oZWFkZXI9PT10LmhlYWRlciYmKHQuaGVhZGVyLmRldGFjaCgpLGUuZWxlbWVudC5jaGlsZHJlbihrKFwiaGVhZGVyXCIpKS5yZW1vdmUoKSxlLmVsZW1lbnQucHJlcGVuZCh0LmhlYWRlcikpLGUuZm9vdGVyPT09dC5mb290ZXImJih0LmZvb3Rlci5kZXRhY2goKSxlLmVsZW1lbnQuY2hpbGRyZW4oayhcImZvb3RlclwiKSkucmVtb3ZlKCksZS5lbGVtZW50LmFwcGVuZCh0LmZvb3RlcikpLHQudHJpZ2dlcihmLHtsYXlvdXQ6dCx2aWV3OmV9KSx0LmN1cnJlbnRWaWV3PWV9fSksRD1vLk9ic2VydmFibGUsQT0vPGJvZHlbXj5dKj4oKFtcXHUwMDBhXFx1MDAwZFxcdTIwMjhcXHUyMDI5XXwuKSopPFxcL2JvZHk+L2ksRT1cImxvYWRTdGFydFwiLE09XCJsb2FkQ29tcGxldGVcIixQPVwic2hvd1N0YXJ0XCIsST1cInNhbWVWaWV3UmVxdWVzdGVkXCIsej1cInZpZXdTaG93XCIsRj1cInZpZXdUeXBlRGV0ZXJtaW5lZFwiLFI9XCJhZnRlclwiLEI9RC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCl7dmFyIG4saSxhLHMsbD10aGlzO2lmKEQuZm4uaW5pdC5jYWxsKGwpLGUuZXh0ZW5kKGwsdCksbC5zYW5kYm94PWUoXCI8ZGl2IC8+XCIpLGE9bC5jb250YWluZXIsbj1sLl9oaWRlVmlld3MoYSksbC5yb290Vmlldz1uLmZpcnN0KCksIWwucm9vdFZpZXdbMF0mJnQucm9vdE5lZWRlZCl0aHJvdyBpPWFbMF09PW8ubW9iaWxlLmFwcGxpY2F0aW9uLmVsZW1lbnRbMF0/J1lvdXIga2VuZG8gbW9iaWxlIGFwcGxpY2F0aW9uIGVsZW1lbnQgZG9lcyBub3QgY29udGFpbiBhbnkgZGlyZWN0IGNoaWxkIGVsZW1lbnRzIHdpdGggZGF0YS1yb2xlPVwidmlld1wiIGF0dHJpYnV0ZSBzZXQuIE1ha2Ugc3VyZSB0aGF0IHlvdSBpbnN0YW50aWF0ZSB0aGUgbW9iaWxlIGFwcGxpY2F0aW9uIHVzaW5nIHRoZSBjb3JyZWN0IGNvbnRhaW5lci4nOidZb3VyIHBhbmUgZWxlbWVudCBkb2VzIG5vdCBjb250YWluIGFueSBkaXJlY3QgY2hpbGQgZWxlbWVudHMgd2l0aCBkYXRhLXJvbGU9XCJ2aWV3XCIgYXR0cmlidXRlIHNldC4nLEVycm9yKGkpO2wubGF5b3V0cz17fSxsLnZpZXdDb250YWluZXI9bmV3IG8uVmlld0NvbnRhaW5lcihsLmNvbnRhaW5lciksbC52aWV3Q29udGFpbmVyLmJpbmQoXCJhY2NlcHRlZFwiLGZ1bmN0aW9uKGUpe2Uudmlldy5wYXJhbXM9bC5wYXJhbXN9KSxsLnZpZXdDb250YWluZXIuYmluZChcImNvbXBsZXRlXCIsZnVuY3Rpb24oZSl7bC50cmlnZ2VyKHose3ZpZXc6ZS52aWV3fSl9KSxsLnZpZXdDb250YWluZXIuYmluZChSLGZ1bmN0aW9uKCl7bC50cmlnZ2VyKFIpfSksdGhpcy5nZXRMYXlvdXRQcm94eT1lLnByb3h5KHRoaXMsXCJfZ2V0TGF5b3V0XCIpLGwuX3NldHVwTGF5b3V0cyhhKSxzPWEuY2hpbGRyZW4obC5fbG9jYXRlKFwibW9kYWx2aWV3IGRyYXdlclwiKSksbC4kYW5ndWxhcj9zLmVhY2goZnVuY3Rpb24odCxuKXtDKGUobiksZnVuY3Rpb24oKXt9KX0pOnIocyksdGhpcy5iaW5kKHRoaXMuZXZlbnRzLHQpfSxldmVudHM6W1AsUix6LEUsTSxJLEZdLGRlc3Ryb3k6ZnVuY3Rpb24oKXtvLmRlc3Ryb3kodGhpcy5jb250YWluZXIpO2Zvcih2YXIgZSBpbiB0aGlzLmxheW91dHMpdGhpcy5sYXlvdXRzW2VdLmRlc3Ryb3koKX0sdmlldzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXdDb250YWluZXIudmlld30sc2hvd1ZpZXc6ZnVuY3Rpb24oZSx0LG4pe2lmKGU9ZS5yZXBsYWNlKFJlZ0V4cChcIl5cIit0aGlzLnJlbW90ZVZpZXdVUkxQcmVmaXgpLFwiXCIpLFwiXCI9PT1lJiZ0aGlzLnJlbW90ZVZpZXdVUkxQcmVmaXgmJihlPVwiL1wiKSxlPT09dGhpcy51cmwpcmV0dXJuIHRoaXMudHJpZ2dlcihJKSwhMTt0aGlzLnRyaWdnZXIoUCk7dmFyIGk9dGhpcyxyPWZ1bmN0aW9uKG4pe3JldHVybiBpLnZpZXdDb250YWluZXIuc2hvdyhuLHQsZSl9LGE9aS5fZmluZFZpZXdFbGVtZW50KGUpLHM9by53aWRnZXRJbnN0YW5jZShhKTtyZXR1cm4gaS51cmw9ZSxpLnBhcmFtcz1uLHMmJnMucmVsb2FkJiYocy5wdXJnZSgpLGE9W10pLHRoaXMudHJpZ2dlcihGLHtyZW1vdGU6MD09PWEubGVuZ3RoLHVybDplfSksYVswXT8oc3x8KHM9aS5fY3JlYXRlVmlldyhhKSkscihzKSk6KHRoaXMuc2VydmVyTmF2aWdhdGlvbj9sb2NhdGlvbi5ocmVmPWU6aS5fbG9hZFZpZXcoZSxyKSwhMCl9LGFwcGVuZDpmdW5jdGlvbihlLHQpe3ZhciBuLGksbyxhPXRoaXMuc2FuZGJveCxzPSh0fHxcIlwiKS5zcGxpdChcIj9cIilbMF0sYz10aGlzLmNvbnRhaW5lcjtyZXR1cm4gQS50ZXN0KGUpJiYoZT1SZWdFeHAuJDEpLGFbMF0uaW5uZXJIVE1MPWUsYy5hcHBlbmQoYS5jaGlsZHJlbihcInNjcmlwdCwgc3R5bGVcIikpLG49dGhpcy5faGlkZVZpZXdzKGEpLG89bi5maXJzdCgpLG8ubGVuZ3RofHwobj1vPWEud3JhcElubmVyKFwiPGRpdiBkYXRhLXJvbGU9dmlldyAvPlwiKS5jaGlsZHJlbigpKSxzJiZvLmhpZGUoKS5hdHRyKGwoXCJ1cmxcIikscyksdGhpcy5fc2V0dXBMYXlvdXRzKGEpLGk9YS5jaGlsZHJlbih0aGlzLl9sb2NhdGUoXCJtb2RhbHZpZXcgZHJhd2VyXCIpKSxjLmFwcGVuZChhLmNoaWxkcmVuKHRoaXMuX2xvY2F0ZShcImxheW91dCBtb2RhbHZpZXcgZHJhd2VyXCIpKS5hZGQobikpLHIoaSksdGhpcy5fY3JlYXRlVmlldyhvKX0sX2xvY2F0ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy4kYW5ndWxhcj94KGUpOmsoZSl9LF9maW5kVmlld0VsZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLnNwbGl0KFwiP1wiKVswXTtyZXR1cm4gbj8odD10aGlzLmNvbnRhaW5lci5jaGlsZHJlbihcIltcIitsKFwidXJsXCIpK1wiPSdcIituK1wiJ11cIiksdFswXXx8LTEhPT1uLmluZGV4T2YoXCIvXCIpfHwodD10aGlzLmNvbnRhaW5lci5jaGlsZHJlbihcIiNcIj09PW4uY2hhckF0KDApP246XCIjXCIrbikpLHQpOnRoaXMucm9vdFZpZXd9LF9jcmVhdGVWaWV3OmZ1bmN0aW9uKGUpe2lmKHRoaXMuJGFuZ3VsYXIpe3ZhciB0PXRoaXM7cmV0dXJuIEMoZSxmdW5jdGlvbihlKXtlLnZpZXdPcHRpb25zPXtkZWZhdWx0VHJhbnNpdGlvbjp0LnRyYW5zaXRpb24sbG9hZGVyOnQubG9hZGVyLGNvbnRhaW5lcjp0LmNvbnRhaW5lcixnZXRMYXlvdXQ6dC5nZXRMYXlvdXRQcm94eX19KX1yZXR1cm4gby5pbml0V2lkZ2V0KGUse2RlZmF1bHRUcmFuc2l0aW9uOnRoaXMudHJhbnNpdGlvbixsb2FkZXI6dGhpcy5sb2FkZXIsY29udGFpbmVyOnRoaXMuY29udGFpbmVyLGdldExheW91dDp0aGlzLmdldExheW91dFByb3h5LG1vZGVsU2NvcGU6dGhpcy5tb2RlbFNjb3BlLHJlbG9hZDpiKGUsXCJyZWxvYWRcIil9LHMucm9sZXMpfSxfZ2V0TGF5b3V0OmZ1bmN0aW9uKGUpe3JldHVyblwiXCI9PT1lP251bGw6ZT90aGlzLmxheW91dHNbZV06dGhpcy5sYXlvdXRzW3RoaXMubGF5b3V0XX0sX2xvYWRWaWV3OmZ1bmN0aW9uKHQsbil7dGhpcy5feGhyJiZ0aGlzLl94aHIuYWJvcnQoKSx0aGlzLnRyaWdnZXIoRSksdGhpcy5feGhyPWUuZ2V0KG8uYWJzb2x1dGVVUkwodCx0aGlzLnJlbW90ZVZpZXdVUkxQcmVmaXgpLFwiaHRtbFwiKS5hbHdheXMoZS5wcm94eSh0aGlzLFwiX3hockNvbXBsZXRlXCIsbix0KSl9LF94aHJDb21wbGV0ZTpmdW5jdGlvbihlLHQsbil7dmFyIGk9ITA7XCJvYmplY3RcIj09dHlwZW9mIG4mJihpPTA9PT1uLnN0YXR1cyYmbi5yZXNwb25zZVRleHQubGVuZ3RoPjAsbj1uLnJlc3BvbnNlVGV4dCksdGhpcy50cmlnZ2VyKE0pLGkmJmUodGhpcy5hcHBlbmQobix0KSl9LF9oaWRlVmlld3M6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hpbGRyZW4odGhpcy5fbG9jYXRlKFwidmlldyBzcGxpdHZpZXdcIikpLmhpZGUoKX0sX3NldHVwTGF5b3V0czpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXM7dC5jaGlsZHJlbihpLl9sb2NhdGUoXCJsYXlvdXRcIikpLmVhY2goZnVuY3Rpb24oKXtuPWkuJGFuZ3VsYXI/QyhlKHRoaXMpKTpvLmluaXRXaWRnZXQoZSh0aGlzKSx7fSxzLnJvbGVzKTt2YXIgdD1uLm9wdGlvbnMucGxhdGZvcm07dCYmdCE9PWEuYXBwbGljYXRpb24ub3MubmFtZT9uLmRlc3Ryb3koKTppLmxheW91dHNbbi5vcHRpb25zLmlkXT1ufSl9fSk7by5tb2JpbGUuVmlld0VuZ2luZT1CLHMucGx1Z2luKFMpLHMucGx1Z2luKFQpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXt2YXIgdD13aW5kb3cua2VuZG8sbj10Lm1vYmlsZS51aSxpPW4uV2lkZ2V0LHI9ZS5tYXAodC5ldmVudE1hcCxmdW5jdGlvbihlKXtyZXR1cm4gZX0pLmpvaW4oXCIgXCIpLnNwbGl0KFwiIFwiKSxvPWkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIHI9dGhpcyxvPWUoJzxkaXYgY2xhc3M9XCJrbS1sb2FkZXJcIj48c3BhbiBjbGFzcz1cImttLWxvYWRpbmcga20tc3BpblwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImttLWxvYWRpbmctbGVmdFwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImttLWxvYWRpbmctcmlnaHRcIj48L3NwYW4+PC9kaXY+Jyk7aS5mbi5pbml0LmNhbGwocixvLG4pLHIuY29udGFpbmVyPXQsci5jYXB0dXJlRXZlbnRzPSExLHIuX2F0dGFjaENhcHR1cmUoKSxvLmFwcGVuZChyLm9wdGlvbnMubG9hZGluZykuaGlkZSgpLmFwcGVuZFRvKHQpfSxvcHRpb25zOntuYW1lOlwiTG9hZGVyXCIsbG9hZGluZzpcIjxoMT5Mb2FkaW5nLi4uPC9oMT5cIix0aW1lb3V0OjEwMH0sc2hvdzpmdW5jdGlvbigpe3ZhciBlPXRoaXM7Y2xlYXJUaW1lb3V0KGUuX2xvYWRpbmcpLGUub3B0aW9ucy5sb2FkaW5nIT09ITEmJihlLmNhcHR1cmVFdmVudHM9ITAsZS5fbG9hZGluZz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5lbGVtZW50LnNob3coKX0sZS5vcHRpb25zLnRpbWVvdXQpKX0saGlkZTpmdW5jdGlvbigpe3RoaXMuY2FwdHVyZUV2ZW50cz0hMSxjbGVhclRpbWVvdXQodGhpcy5fbG9hZGluZyksdGhpcy5lbGVtZW50LmhpZGUoKX0sY2hhbmdlTWVzc2FnZTpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnMubG9hZGluZz1lLHRoaXMuZWxlbWVudC5maW5kKFwiPmgxXCIpLmh0bWwoZSl9LHRyYW5zaXRpb246ZnVuY3Rpb24oKXt0aGlzLmNhcHR1cmVFdmVudHM9ITAsdGhpcy5jb250YWluZXIuY3NzKFwicG9pbnRlci1ldmVudHNcIixcIm5vbmVcIil9LHRyYW5zaXRpb25Eb25lOmZ1bmN0aW9uKCl7dGhpcy5jYXB0dXJlRXZlbnRzPSExLHRoaXMuY29udGFpbmVyLmNzcyhcInBvaW50ZXItZXZlbnRzXCIsXCJcIil9LF9hdHRhY2hDYXB0dXJlOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtuLmNhcHR1cmVFdmVudHMmJmUucHJldmVudERlZmF1bHQoKX12YXIgdCxuPXRoaXM7Zm9yKG4uY2FwdHVyZUV2ZW50cz0hMSx0PTA7ci5sZW5ndGg+dDt0Kyspbi5jb250YWluZXJbMF0uYWRkRXZlbnRMaXN0ZW5lcihyW3RdLGUsITApfX0pO24ucGx1Z2luKG8pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe3ZhciBuPXdpbmRvdy5rZW5kbyxpPW4ubW9iaWxlLHI9bi5yb2xlU2VsZWN0b3Isbz1pLnVpLGE9by5XaWRnZXQscz1pLlZpZXdFbmdpbmUsbD1vLlZpZXcsYz1pLnVpLkxvYWRlcixkPVwiZXh0ZXJuYWxcIix1PVwiaHJlZlwiLGg9XCIjIVwiLHA9XCJuYXZpZ2F0ZVwiLGY9XCJ2aWV3U2hvd1wiLGc9XCJzYW1lVmlld1JlcXVlc3RlZFwiLG09bi5zdXBwb3J0Lm1vYmlsZU9TLHY9bS5pb3MmJiFtLmFwcE1vZGUmJm0uZmxhdFZlcnNpb24+PTcwMCxfPS9wb3BvdmVyfGFjdGlvbnNoZWV0fG1vZGFsdmlld3xkcmF3ZXIvLHk9XCIjOmJhY2tcIix3PW4uYXR0clZhbHVlLGI9XCJidXR0b24gYmFja2J1dHRvbiBkZXRhaWxidXR0b24gbGlzdHZpZXctbGlua1wiLGs9XCJ0YWJcIix4PWEuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpczthLmZuLmluaXQuY2FsbChpLGUsdCksdD1pLm9wdGlvbnMsZT1pLmVsZW1lbnQsZS5hZGRDbGFzcyhcImttLXBhbmVcIiksaS5vcHRpb25zLmNvbGxhcHNpYmxlJiZlLmFkZENsYXNzKFwia20tY29sbGFwc2libGUtcGFuZVwiKSx0aGlzLmhpc3Rvcnk9W10sdGhpcy5oaXN0b3J5Q2FsbGJhY2s9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWkudHJhbnNpdGlvbjtyZXR1cm4gaS50cmFuc2l0aW9uPW51bGwsdiYmbiYmKHI9XCJub25lXCIpLGkudmlld0VuZ2luZS5zaG93VmlldyhlLHIsdCl9LHRoaXMuX2hpc3RvcnlOYXZpZ2F0ZT1mdW5jdGlvbihlKXtpZihlPT09eSl7aWYoMT09PWkuaGlzdG9yeS5sZW5ndGgpcmV0dXJuO2kuaGlzdG9yeS5wb3AoKSxlPWkuaGlzdG9yeVtpLmhpc3RvcnkubGVuZ3RoLTFdfWVsc2UgaS5oaXN0b3J5LnB1c2goZSk7aS5oaXN0b3J5Q2FsbGJhY2soZSxuLnBhcnNlUXVlcnlTdHJpbmdQYXJhbXMoZSkpfSx0aGlzLl9oaXN0b3J5UmVwbGFjZT1mdW5jdGlvbihlKXt2YXIgdD1uLnBhcnNlUXVlcnlTdHJpbmdQYXJhbXMoZSk7aS5oaXN0b3J5W2kuaGlzdG9yeS5sZW5ndGgtMV09ZSxpLmhpc3RvcnlDYWxsYmFjayhlLHQpfSxpLmxvYWRlcj1uZXcgYyhlLHtsb2FkaW5nOmkub3B0aW9ucy5sb2FkaW5nfSksaS52aWV3RW5naW5lPW5ldyBzKHtjb250YWluZXI6ZSx0cmFuc2l0aW9uOnQudHJhbnNpdGlvbixtb2RlbFNjb3BlOnQubW9kZWxTY29wZSxyb290TmVlZGVkOiF0LmluaXRpYWwsc2VydmVyTmF2aWdhdGlvbjp0LnNlcnZlck5hdmlnYXRpb24scmVtb3RlVmlld1VSTFByZWZpeDp0LnJvb3R8fFwiXCIsbGF5b3V0OnQubGF5b3V0LCRhbmd1bGFyOnQuJGFuZ3VsYXIsbG9hZGVyOmkubG9hZGVyLHNob3dTdGFydDpmdW5jdGlvbigpe2kubG9hZGVyLnRyYW5zaXRpb24oKSxpLmNsb3NlQWN0aXZlRGlhbG9ncygpfSxhZnRlcjpmdW5jdGlvbigpe2kubG9hZGVyLnRyYW5zaXRpb25Eb25lKCl9LHZpZXdTaG93OmZ1bmN0aW9uKGUpe2kudHJpZ2dlcihmLGUpfSxsb2FkU3RhcnQ6ZnVuY3Rpb24oKXtpLmxvYWRlci5zaG93KCl9LGxvYWRDb21wbGV0ZTpmdW5jdGlvbigpe2kubG9hZGVyLmhpZGUoKX0sc2FtZVZpZXdSZXF1ZXN0ZWQ6ZnVuY3Rpb24oKXtpLnRyaWdnZXIoZyl9LHZpZXdUeXBlRGV0ZXJtaW5lZDpmdW5jdGlvbihlKXtlLnJlbW90ZSYmaS5vcHRpb25zLnNlcnZlck5hdmlnYXRpb258fGkudHJpZ2dlcihwLHt1cmw6ZS51cmx9KX19KSx0aGlzLl9zZXRQb3J0cmFpdFdpZHRoKCksbi5vblJlc2l6ZShmdW5jdGlvbigpe2kuX3NldFBvcnRyYWl0V2lkdGgoKX0pLGkuX3NldHVwQXBwTGlua3MoKX0sY2xvc2VBY3RpdmVEaWFsb2dzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5lbGVtZW50LmZpbmQocihcImFjdGlvbnNoZWV0IHBvcG92ZXIgbW9kYWx2aWV3XCIpKS5maWx0ZXIoXCI6dmlzaWJsZVwiKTt0LmVhY2goZnVuY3Rpb24oKXtuLndpZGdldEluc3RhbmNlKGUodGhpcyksbykuY2xvc2UoKX0pfSxuYXZpZ2F0ZVRvSW5pdGlhbDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5pbml0aWFsO2UmJnRoaXMubmF2aWdhdGUoZSl9LG9wdGlvbnM6e25hbWU6XCJQYW5lXCIscG9ydHJhaXRXaWR0aDpcIlwiLHRyYW5zaXRpb246XCJcIixsYXlvdXQ6XCJcIixjb2xsYXBzaWJsZTohMSxpbml0aWFsOm51bGwsbW9kZWxTY29wZTp3aW5kb3csbG9hZGluZzpcIjxoMT5Mb2FkaW5nLi4uPC9oMT5cIn0sZXZlbnRzOltwLGYsZ10sYXBwZW5kOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnZpZXdFbmdpbmUuYXBwZW5kKGUpfSxkZXN0cm95OmZ1bmN0aW9uKCl7YS5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy52aWV3RW5naW5lLmRlc3Ryb3koKSx0aGlzLnVzZXJFdmVudHMuZGVzdHJveSgpfSxuYXZpZ2F0ZTpmdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBsJiYoZT1lLmlkKSx0aGlzLnRyYW5zaXRpb249dCx0aGlzLl9oaXN0b3J5TmF2aWdhdGUoZSl9LHJlcGxhY2U6ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2YgbCYmKGU9ZS5pZCksdGhpcy50cmFuc2l0aW9uPXQsdGhpcy5faGlzdG9yeVJlcGxhY2UoZSl9LGJpbmRUb1JvdXRlcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLGk9dGhpcy5oaXN0b3J5LHI9dGhpcy52aWV3RW5naW5lO2UuYmluZChcImluaXRcIixmdW5jdGlvbih0KXt2YXIgbyxhPXQudXJsLHM9ZS5wdXNoU3RhdGU/YTpcIi9cIjtyLnJvb3RWaWV3LmF0dHIobi5hdHRyKFwidXJsXCIpLHMpLG89aS5sZW5ndGgsXCIvXCI9PT1hJiZvJiYoZS5uYXZpZ2F0ZShpW28tMV0sITApLHQucHJldmVudERlZmF1bHQoKSl9KSxlLmJpbmQoXCJyb3V0ZU1pc3NpbmdcIixmdW5jdGlvbihlKXt0Lmhpc3RvcnlDYWxsYmFjayhlLnVybCxlLnBhcmFtcyxlLmJhY2tCdXR0b25QcmVzc2VkKXx8ZS5wcmV2ZW50RGVmYXVsdCgpfSksZS5iaW5kKFwic2FtZVwiLGZ1bmN0aW9uKCl7dC50cmlnZ2VyKGcpfSksdC5faGlzdG9yeU5hdmlnYXRlPWZ1bmN0aW9uKHQpe2UubmF2aWdhdGUodCl9LHQuX2hpc3RvcnlSZXBsYWNlPWZ1bmN0aW9uKHQpe2UucmVwbGFjZSh0KX19LGhpZGVMb2FkaW5nOmZ1bmN0aW9uKCl7dGhpcy5sb2FkZXIuaGlkZSgpfSxzaG93TG9hZGluZzpmdW5jdGlvbigpe3RoaXMubG9hZGVyLnNob3coKX0sY2hhbmdlTG9hZGluZ01lc3NhZ2U6ZnVuY3Rpb24oZSl7dGhpcy5sb2FkZXIuY2hhbmdlTWVzc2FnZShlKX0sdmlldzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXdFbmdpbmUudmlldygpfSxfc2V0UG9ydHJhaXRXaWR0aDpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5vcHRpb25zLnBvcnRyYWl0V2lkdGg7dCYmKGU9bi5tb2JpbGUuYXBwbGljYXRpb24uZWxlbWVudC5pcyhcIi5rbS12ZXJ0aWNhbFwiKT90OlwiYXV0b1wiLHRoaXMuZWxlbWVudC5jc3MoXCJ3aWR0aFwiLGUpKX0sX3NldHVwQXBwTGlua3M6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuZWxlbWVudC5oYW5kbGVyKHRoaXMpLm9uKFwiZG93blwiLHIoayksXCJfbW91c2V1cFwiKS5vbihcImNsaWNrXCIscihrK1wiIFwiK2IpLFwiX2FwcExpbmtDbGlja1wiKSx0aGlzLnVzZXJFdmVudHM9bmV3IG4uVXNlckV2ZW50cyh0aGlzLmVsZW1lbnQse2ZpbHRlcjpyKGIpLHRhcDpmdW5jdGlvbih0KXt0LmV2ZW50LmN1cnJlbnRUYXJnZXQ9dC50b3VjaC5jdXJyZW50VGFyZ2V0LGUuX21vdXNldXAodC5ldmVudCl9fSl9LF9hcHBMaW5rQ2xpY2s6ZnVuY3Rpb24odCl7dmFyIG49ZSh0LmN1cnJlbnRUYXJnZXQpLmF0dHIoXCJocmVmXCIpLGk9biYmXCIjXCIhPT1uWzBdJiZ0aGlzLm9wdGlvbnMuc2VydmVyTmF2aWdhdGlvbjtpfHx3KGUodC5jdXJyZW50VGFyZ2V0KSxcInJlbFwiKT09ZHx8dC5wcmV2ZW50RGVmYXVsdCgpfSxfbW91c2V1cDpmdW5jdGlvbihyKXtpZighKHIud2hpY2g+MXx8ci5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkpe3ZhciBhPXRoaXMscz1lKHIuY3VycmVudFRhcmdldCksbD13KHMsXCJ0cmFuc2l0aW9uXCIpLGM9dyhzLFwicmVsXCIpfHxcIlwiLHA9dyhzLFwidGFyZ2V0XCIpLGY9cy5hdHRyKHUpLGc9diYmMD09PXNbMF0ub2Zmc2V0SGVpZ2h0LG09ZiYmXCIjXCIhPT1mWzBdJiZ0aGlzLm9wdGlvbnMuc2VydmVyTmF2aWdhdGlvbjtnfHxtfHxjPT09ZHx8dD09PWZ8fGY9PT1ofHwocy5hdHRyKHUsaCksc2V0VGltZW91dChmdW5jdGlvbigpe3MuYXR0cih1LGYpfSksYy5tYXRjaChfKT8obi53aWRnZXRJbnN0YW5jZShlKGYpLG8pLm9wZW5Gb3IocyksKFwiYWN0aW9uc2hlZXRcIj09PWN8fFwiZHJhd2VyXCI9PT1jKSYmci5zdG9wUHJvcGFnYXRpb24oKSk6KFwiX3RvcFwiPT09cD9hPWkuYXBwbGljYXRpb24ucGFuZTpwJiYoYT1lKFwiI1wiK3ApLmRhdGEoXCJrZW5kb01vYmlsZVBhbmVcIikpLGEubmF2aWdhdGUoZixsKSksci5wcmV2ZW50RGVmYXVsdCgpKX19fSk7eC53cmFwPWZ1bmN0aW9uKGUpe2UuaXMocihcInZpZXdcIikpfHwoZT1lLndyYXAoXCI8ZGl2IGRhdGEtXCIrbi5ucysncm9sZT1cInZpZXdcIiBkYXRhLXN0cmV0Y2g9XCJ0cnVlXCI+PC9kaXY+JykucGFyZW50KCkpO3ZhciB0PWUud3JhcCgnPGRpdiBjbGFzcz1cImttLXBhbmUtd3JhcHBlclwiPjxkaXY+PC9kaXY+PC9kaXY+JykucGFyZW50KCksaT1uZXcgeCh0KTtyZXR1cm4gaS5uYXZpZ2F0ZShcIlwiKSxpfSxvLnBsdWdpbih4KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQ9d2luZG93LmtlbmRvLG49dC5tb2JpbGUsaT1uLnVpLHI9XCJoaWRlXCIsbz1cIm9wZW5cIixhPVwiY2xvc2VcIixzPSc8ZGl2IGNsYXNzPVwia20tcG9wdXAtd3JhcHBlclwiIC8+JyxsPSc8ZGl2IGNsYXNzPVwia20tcG9wdXAtYXJyb3dcIiAvPicsYz0nPGRpdiBjbGFzcz1cImttLXBvcHVwLW92ZXJsYXlcIiAvPicsZD1cImttLXVwIGttLWRvd24ga20tbGVmdCBrbS1yaWdodFwiLHU9aS5XaWRnZXQsaD17ZG93bjp7b3JpZ2luOlwiYm90dG9tIGNlbnRlclwiLHBvc2l0aW9uOlwidG9wIGNlbnRlclwifSx1cDp7b3JpZ2luOlwidG9wIGNlbnRlclwiLHBvc2l0aW9uOlwiYm90dG9tIGNlbnRlclwifSxsZWZ0OntvcmlnaW46XCJjZW50ZXIgbGVmdFwiLHBvc2l0aW9uOlwiY2VudGVyIHJpZ2h0XCIsY29sbGlzaW9uOlwiZml0IGZsaXBcIn0scmlnaHQ6e29yaWdpbjpcImNlbnRlciByaWdodFwiLHBvc2l0aW9uOlwiY2VudGVyIGxlZnRcIixjb2xsaXNpb246XCJmaXQgZmxpcFwifX0scD17YW5pbWF0aW9uOntvcGVuOntlZmZlY3RzOlwiZmFkZTppblwiLGR1cmF0aW9uOjB9LGNsb3NlOntlZmZlY3RzOlwiZmFkZTpvdXRcIixkdXJhdGlvbjo0MDB9fX0sZj17aG9yaXpvbnRhbDp7b2Zmc2V0OlwidG9wXCIsc2l6ZTpcImhlaWdodFwifSx2ZXJ0aWNhbDp7b2Zmc2V0OlwibGVmdFwiLHNpemU6XCJ3aWR0aFwifX0sZz17dXA6XCJkb3duXCIsZG93bjpcInVwXCIsbGVmdDpcInJpZ2h0XCIscmlnaHQ6XCJsZWZ0XCJ9LG09dS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24obixpKXt2YXIgbyxhLGQ9dGhpcyxnPW4uY2xvc2VzdChcIi5rbS1tb2RhbHZpZXctd3JhcHBlclwiKSxtPW4uY2xvc2VzdChcIi5rbS1yb290XCIpLmNoaWxkcmVuKFwiLmttLXBhbmVcIikuZmlyc3QoKSx2PWdbMF0/ZzptO2kudmlld3BvcnQ/bT1pLnZpZXdwb3J0Om1bMF18fChtPXdpbmRvdyksaS5jb250YWluZXI/dj1pLmNvbnRhaW5lcjp2WzBdfHwodj1kb2N1bWVudC5ib2R5KSxvPXt2aWV3cG9ydDptLGNvcHlBbmNob3JTdHlsZXM6ITEsYXV0b3NpemU6ITAsb3BlbjpmdW5jdGlvbigpe2Qub3ZlcmxheS5zaG93KCl9LGFjdGl2YXRlOmUucHJveHkoZC5fYWN0aXZhdGUsZCksZGVhY3RpdmF0ZTpmdW5jdGlvbigpe2Qub3ZlcmxheS5oaWRlKCksZC5fYXBpQ2FsbHx8ZC50cmlnZ2VyKHIpLGQuX2FwaUNhbGw9ITF9fSx1LmZuLmluaXQuY2FsbChkLG4saSksbj1kLmVsZW1lbnQsaT1kLm9wdGlvbnMsbi53cmFwKHMpLmFkZENsYXNzKFwia20tcG9wdXBcIikuc2hvdygpLGE9ZC5vcHRpb25zLmRpcmVjdGlvbi5tYXRjaCgvbGVmdHxyaWdodC8pP1wiaG9yaXpvbnRhbFwiOlwidmVydGljYWxcIixkLmRpbWVuc2lvbnM9ZlthXSxkLndyYXBwZXI9bi5wYXJlbnQoKS5jc3Moe3dpZHRoOmkud2lkdGgsaGVpZ2h0OmkuaGVpZ2h0fSkuYWRkQ2xhc3MoXCJrbS1wb3B1cC13cmFwcGVyIGttLVwiK2kuZGlyZWN0aW9uKS5oaWRlKCksZC5hcnJvdz1lKGwpLnByZXBlbmRUbyhkLndyYXBwZXIpLmhpZGUoKSxkLm92ZXJsYXk9ZShjKS5hcHBlbmRUbyh2KS5oaWRlKCksby5hcHBlbmRUbz1kLm92ZXJsYXksaS5jbGFzc05hbWUmJmQub3ZlcmxheS5hZGRDbGFzcyhpLmNsYXNzTmFtZSksZC5wb3B1cD1uZXcgdC51aS5Qb3B1cChkLndyYXBwZXIsZS5leHRlbmQoITAsbyxwLGhbaS5kaXJlY3Rpb25dKSl9LG9wdGlvbnM6e25hbWU6XCJQb3B1cFwiLHdpZHRoOjI0MCxoZWlnaHQ6XCJcIixkaXJlY3Rpb246XCJkb3duXCIsY29udGFpbmVyOm51bGwsdmlld3BvcnQ6bnVsbH0sZXZlbnRzOltyXSxzaG93OmZ1bmN0aW9uKHQpe3RoaXMucG9wdXAub3B0aW9ucy5hbmNob3I9ZSh0KSx0aGlzLnBvcHVwLm9wZW4oKX0saGlkZTpmdW5jdGlvbigpe3RoaXMuX2FwaUNhbGw9ITAsdGhpcy5wb3B1cC5jbG9zZSgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dS5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5wb3B1cC5kZXN0cm95KCksdGhpcy5vdmVybGF5LnJlbW92ZSgpfSx0YXJnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3B1cC5vcHRpb25zLmFuY2hvcn0sX2FjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucy5kaXJlY3Rpb24saT10LmRpbWVuc2lvbnMscj1pLm9mZnNldCxvPXQucG9wdXAsYT1vLm9wdGlvbnMuYW5jaG9yLHM9ZShhKS5vZmZzZXQoKSxsPWUoby5lbGVtZW50KS5vZmZzZXQoKSxjPW8uZmxpcHBlZD9nW25dOm4sdT0yKnQuYXJyb3dbaS5zaXplXSgpLGg9dC5lbGVtZW50W2kuc2l6ZV0oKS10LmFycm93W2kuc2l6ZV0oKSxwPWUoYSlbaS5zaXplXSgpLGY9c1tyXS1sW3JdK3AvMjt1PmYmJihmPXUpLGY+aCYmKGY9aCksdC53cmFwcGVyLnJlbW92ZUNsYXNzKGQpLmFkZENsYXNzKFwia20tXCIrYyksdC5hcnJvdy5jc3MocixmKS5zaG93KCl9fSksdj11LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihuLHIpe3ZhciBvLHM9dGhpcztzLmluaXRpYWxPcGVuPSExLHUuZm4uaW5pdC5jYWxsKHMsbixyKSxvPWUuZXh0ZW5kKHtjbGFzc05hbWU6XCJrbS1wb3BvdmVyLXJvb3RcIixoaWRlOmZ1bmN0aW9uKCl7cy50cmlnZ2VyKGEpfX0sdGhpcy5vcHRpb25zLnBvcHVwKSxzLnBvcHVwPW5ldyBtKHMuZWxlbWVudCxvKSxzLnBvcHVwLm92ZXJsYXkub24oXCJtb3ZlXCIsZnVuY3Rpb24oZSl7ZS50YXJnZXQ9PXMucG9wdXAub3ZlcmxheVswXSYmZS5wcmV2ZW50RGVmYXVsdCgpfSkscy5wYW5lPW5ldyBpLlBhbmUocy5lbGVtZW50LGUuZXh0ZW5kKHRoaXMub3B0aW9ucy5wYW5lLHskYW5ndWxhcjp0aGlzLm9wdGlvbnMuJGFuZ3VsYXJ9KSkscy5wYW5lLm5hdmlnYXRlVG9Jbml0aWFsKCksdC5ub3RpZnkocyxpKX0sb3B0aW9uczp7bmFtZTpcIlBvcE92ZXJcIixwb3B1cDp7fSxwYW5lOnt9fSxldmVudHM6W28sYV0sb3BlbjpmdW5jdGlvbihlKXt0aGlzLnBvcHVwLnNob3coZSksdGhpcy5pbml0aWFsT3Blbj90aGlzLnBhbmUudmlldygpLl9pbnZva2VOZ0NvbnRyb2xsZXIoKToodGhpcy5wYW5lLm5hdmlnYXRlKFwiXCIpLHRoaXMucG9wdXAucG9wdXAuX3Bvc2l0aW9uKCksdGhpcy5pbml0aWFsT3Blbj0hMCl9LG9wZW5Gb3I6ZnVuY3Rpb24oZSl7dGhpcy5vcGVuKGUpLHRoaXMudHJpZ2dlcihvLHt0YXJnZXQ6dGhpcy5wb3B1cC50YXJnZXQoKX0pfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMucG9wdXAuaGlkZSgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dS5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5wYW5lLmRlc3Ryb3koKSx0aGlzLnBvcHVwLmRlc3Ryb3koKSx0LmRlc3Ryb3kodGhpcy5lbGVtZW50KX19KTtpLnBsdWdpbihtKSxpLnBsdWdpbih2KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXt2YXIgbj13aW5kb3cua2VuZG8saT1uLm1vYmlsZS51aSxyPW4udWkuUG9wdXAsbz0nPGRpdiBjbGFzcz1cImttLXNoaW1cIi8+JyxhPVwiaGlkZVwiLHM9aS5XaWRnZXQsbD1zLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LGkpe3ZhciBsPXRoaXMsYz1uLm1vYmlsZS5hcHBsaWNhdGlvbixkPW4uc3VwcG9ydC5tb2JpbGVPUyx1PWM/Yy5vcy5uYW1lOmQ/ZC5uYW1lOlwiaW9zXCIsaD1cImlvc1wiPT09dXx8XCJ3cFwiPT09dXx8KGM/Yy5vcy5za2luOiExKSxwPVwiYmxhY2tiZXJyeVwiPT09dSxmPWkuYWxpZ258fChoP1wiYm90dG9tIGNlbnRlclwiOnA/XCJjZW50ZXIgcmlnaHRcIjpcImNlbnRlciBjZW50ZXJcIiksZz1pLnBvc2l0aW9ufHwoaD9cImJvdHRvbSBjZW50ZXJcIjpwP1wiY2VudGVyIHJpZ2h0XCI6XCJjZW50ZXIgY2VudGVyXCIpLG09aS5lZmZlY3R8fChoP1wic2xpZGVJbjp1cFwiOnA/XCJzbGlkZUluOmxlZnRcIjpcImZhZGU6aW5cIiksdj1lKG8pLmhhbmRsZXIobCkuaGlkZSgpO3MuZm4uaW5pdC5jYWxsKGwsdCxpKSxsLnNoaW09dix0PWwuZWxlbWVudCxpPWwub3B0aW9ucyxpLmNsYXNzTmFtZSYmbC5zaGltLmFkZENsYXNzKGkuY2xhc3NOYW1lKSxpLm1vZGFsfHxsLnNoaW0ub24oXCJ1cFwiLFwiX2hpZGVcIiksKGM/Yy5lbGVtZW50OmUoZG9jdW1lbnQuYm9keSkpLmFwcGVuZCh2KSxsLnBvcHVwPW5ldyByKGwuZWxlbWVudCx7YW5jaG9yOnYsbW9kYWw6ITAsYXBwZW5kVG86dixvcmlnaW46Zixwb3NpdGlvbjpnLGFuaW1hdGlvbjp7b3Blbjp7ZWZmZWN0czptLGR1cmF0aW9uOmkuZHVyYXRpb259LGNsb3NlOntkdXJhdGlvbjppLmR1cmF0aW9ufX0sY2xvc2U6ZnVuY3Rpb24oZSl7dmFyIHQ9ITE7bC5fYXBpQ2FsbHx8KHQ9bC50cmlnZ2VyKGEpKSx0JiZlLnByZXZlbnREZWZhdWx0KCksbC5fYXBpQ2FsbD0hMX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3YuaGlkZSgpfSxvcGVuOmZ1bmN0aW9uKCl7di5zaG93KCl9fSksbi5ub3RpZnkobCl9LGV2ZW50czpbYV0sb3B0aW9uczp7bmFtZTpcIlNoaW1cIixtb2RhbDohMSxhbGlnbjp0LHBvc2l0aW9uOnQsZWZmZWN0OnQsZHVyYXRpb246MjAwfSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5wb3B1cC5vcGVuKCl9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLl9hcGlDYWxsPSEwLHRoaXMucG9wdXAuY2xvc2UoKX0sZGVzdHJveTpmdW5jdGlvbigpe3MuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuc2hpbS5rZW5kb0Rlc3Ryb3koKSx0aGlzLnBvcHVwLmRlc3Ryb3koKSx0aGlzLnNoaW0ucmVtb3ZlKCl9LF9oaWRlOmZ1bmN0aW9uKHQpe3QmJmUuY29udGFpbnModGhpcy5zaGltLmNoaWxkcmVuKCkuY2hpbGRyZW4oXCIuay1wb3B1cFwiKVswXSx0LnRhcmdldCl8fHRoaXMucG9wdXAuY2xvc2UoKX19KTtpLnBsdWdpbihsKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQ9d2luZG93LmtlbmRvLG49dC5zdXBwb3J0LGk9dC5tb2JpbGUudWkscj1pLlNoaW0sbz1pLlBvcHVwLGE9aS5XaWRnZXQscz1cIm9wZW5cIixsPVwiY2xvc2VcIixjPVwiY29tbWFuZFwiLGQ9XCJsaT5hXCIsdT1cImFjdGlvbnNoZWV0Q29udGV4dFwiLGg9JzxkaXYgY2xhc3M9XCJrbS1hY3Rpb25zaGVldC13cmFwcGVyXCIgLz4nLHA9dC50ZW1wbGF0ZSgnPGxpIGNsYXNzPVwia20tYWN0aW9uc2hlZXQtY2FuY2VsXCI+PGEgaHJlZj1cIlxcXFwjXCI+IzpjYW5jZWwjPC9hPjwvbGk+JyksZj1hLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihzLGwpe3ZhciBjLHUsZixnPXRoaXMsbT1uLm1vYmlsZU9TO2EuZm4uaW5pdC5jYWxsKGcscyxsKSxsPWcub3B0aW9ucyxmPWwudHlwZSxzPWcuZWxlbWVudCx1PVwiYXV0b1wiPT09Zj9tJiZtLnRhYmxldDpcInRhYmxldFwiPT09ZixjPXU/bzpyLGwuY2FuY2VsVGVtcGxhdGUmJihwPXQudGVtcGxhdGUobC5jYW5jZWxUZW1wbGF0ZSkpLHMuYWRkQ2xhc3MoXCJrbS1hY3Rpb25zaGVldFwiKS5hcHBlbmQocCh7Y2FuY2VsOmcub3B0aW9ucy5jYW5jZWx9KSkud3JhcChoKS5vbihcInVwXCIsZCxcIl9jbGlja1wiKS5vbihcImNsaWNrXCIsZCx0LnByZXZlbnREZWZhdWx0KSxnLnZpZXcoKS5iaW5kKFwiZGVzdHJveVwiLGZ1bmN0aW9uKCl7Zy5kZXN0cm95KCl9KSxnLndyYXBwZXI9cy5wYXJlbnQoKS5hZGRDbGFzcyhmP1wiIGttLWFjdGlvbnNoZWV0LVwiK2Y6XCJcIiksZy5zaGltPW5ldyBjKGcud3JhcHBlcixlLmV4dGVuZCh7bW9kYWw6bS5pb3MmJjc+bS5tYWpvclZlcnNpb24sY2xhc3NOYW1lOlwia20tYWN0aW9uc2hlZXQtcm9vdFwifSxnLm9wdGlvbnMucG9wdXApKSxnLl9jbG9zZVByb3h5PWUucHJveHkoZyxcIl9jbG9zZVwiKSxnLnNoaW0uYmluZChcImhpZGVcIixnLl9jbG9zZVByb3h5KSx1JiZ0Lm9uUmVzaXplKGcuX2Nsb3NlUHJveHkpLHQubm90aWZ5KGcsaSl9LGV2ZW50czpbcyxsLGNdLG9wdGlvbnM6e25hbWU6XCJBY3Rpb25TaGVldFwiLGNhbmNlbDpcIkNhbmNlbFwiLHR5cGU6XCJhdXRvXCIscG9wdXA6e2hlaWdodDpcImF1dG9cIn19LG9wZW46ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzO2kudGFyZ2V0PWUodCksaS5jb250ZXh0PW4saS5zaGltLnNob3codCl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5jb250ZXh0PXRoaXMudGFyZ2V0PW51bGwsdGhpcy5zaGltLmhpZGUoKX0sb3BlbkZvcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5kYXRhKHUpO3Qub3BlbihlLG4pLHQudHJpZ2dlcihzLHt0YXJnZXQ6ZSxjb250ZXh0Om59KX0sZGVzdHJveTpmdW5jdGlvbigpe2EuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHQudW5iaW5kUmVzaXplKHRoaXMuX2Nsb3NlUHJveHkpLHRoaXMuc2hpbS5kZXN0cm95KCl9LF9jbGljazpmdW5jdGlvbihuKXt2YXIgaSxyLG8sYTtuLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwoaT1lKG4uY3VycmVudFRhcmdldCkscj1pLmRhdGEoXCJhY3Rpb25cIiksciYmKG89e3RhcmdldDp0aGlzLnRhcmdldCxjb250ZXh0OnRoaXMuY29udGV4dH0sYT10aGlzLm9wdGlvbnMuJGFuZ3VsYXIsYT90aGlzLmVsZW1lbnQuaW5qZWN0b3IoKS5nZXQoXCIkcGFyc2VcIikocikoYVswXSkobyk6dC5nZXR0ZXIocikod2luZG93KShvKSksdGhpcy50cmlnZ2VyKGMse3RhcmdldDp0aGlzLnRhcmdldCxjb250ZXh0OnRoaXMuY29udGV4dCxjdXJyZW50VGFyZ2V0Oml9KSxuLnByZXZlbnREZWZhdWx0KCksdGhpcy5fY2xvc2UoKSl9LF9jbG9zZTpmdW5jdGlvbihlKXt0aGlzLnRyaWdnZXIobCk/ZS5wcmV2ZW50RGVmYXVsdCgpOnRoaXMuY2xvc2UoKX19KTtpLnBsdWdpbihmKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUpe3JldHVybiBBcnJheShlKzEpLmpvaW4oJzx0ZCBjbGFzcz1cImstZ3JvdXAtY2VsbFwiPiZuYnNwOzwvdGQ+Jyl9ZnVuY3Rpb24gaShlKXt2YXIgdCxuPVwiIFwiO2lmKGUpe2lmKHR5cGVvZiBlPT09Y24pcmV0dXJuIGU7Zm9yKHQgaW4gZSluKz10Kyc9XCInK2VbdF0rJ1wiJ31yZXR1cm4gbn1mdW5jdGlvbiByKHQsbil7ZShcInRoLCB0aCAuay1ncmlkLWZpbHRlciwgdGggLmstbGlua1wiLHQpLmFkZChkb2N1bWVudC5ib2R5KS5jc3MoXCJjdXJzb3JcIixuKX1mdW5jdGlvbiBvKGUpe3ZhciB0LG4saT17fSxyPXt9O2lmKCFBdChlKSlmb3IoeHQoZSl8fChlPVtlXSksdD0wLG49ZS5sZW5ndGg7bj50O3QrKylpW2VbdF0uYWdncmVnYXRlXT0wLHJbZVt0XS5maWVsZF09aTtyZXR1cm4gcn1mdW5jdGlvbiBhKHQsbixpLHIsbyl7dmFyIGEscz1uO2ZvcihuPWUoKSxvPW98fDEsYT0wO28+YTthKyspbj1uLmFkZCh0LmVxKHMrYSkpO1wibnVtYmVyXCI9PXR5cGVvZiBpP25bcj9cImluc2VydEJlZm9yZVwiOlwiaW5zZXJ0QWZ0ZXJcIl0odC5lcShpKSk6bi5hcHBlbmRUbyhpKX1mdW5jdGlvbiBzKHQsbixpKXtyZXR1cm4gZSh0KS5hZGQobikuZmluZChpKX1mdW5jdGlvbiBsKGUsdCxuKXt2YXIgaSxyLG8sYTtmb3Iobj14dChuKT9uOltuXSxpPTAscj1uLmxlbmd0aDtyPmk7aSsrKW89bltpXSx5dChvKSYmby5jbGljayYmKGE9by5uYW1lfHxvLnRleHQsdC5vbihvbitPdCxcImEuay1ncmlkLVwiKyhhfHxcIlwiKS5yZXBsYWNlKC9cXHMvZyxcIlwiKSx7Y29tbWFuZE5hbWU6YX0sVHQoby5jbGljayxlKSkpfWZ1bmN0aW9uIGMoZSx0LG4pe3JldHVybiBidChlLGZ1bmN0aW9uKGUpe2U9dHlwZW9mIGU9PT1jbj97ZmllbGQ6ZX06ZTt2YXIgaTtyZXR1cm4oIXAoZSl8fG4pJiYoZS5hdHRyaWJ1dGVzPVUoZS5hdHRyaWJ1dGVzKSxlLmZvb3RlckF0dHJpYnV0ZXM9VShlLmZvb3RlckF0dHJpYnV0ZXMpLGUuaGVhZGVyQXR0cmlidXRlcz1VKGUuaGVhZGVyQXR0cmlidXRlcyksaT0hMCksZS5jb2x1bW5zJiYoZS5jb2x1bW5zPWMoZS5jb2x1bW5zLHQsaSkpLHd0KHtlbmNvZGVkOnQsaGlkZGVuOml9LGUpfSl9ZnVuY3Rpb24gZChlLHQpe3ZhciBuPVtdO3JldHVybiB1KGUsdCxuKSxuW24ubGVuZ3RoLTFdfWZ1bmN0aW9uIHUoZSx0LG4pe3ZhciBpLHI7Zm9yKG49bnx8W10saT0wO3QubGVuZ3RoPmk7aSsrKXtpZihlPT09dFtpXSlyZXR1cm4hMDtpZih0W2ldLmNvbHVtbnMpe2lmKHI9bi5sZW5ndGgsbi5wdXNoKHRbaV0pLHUoZSx0W2ldLmNvbHVtbnMsbikpcmV0dXJuITA7bi5zcGxpY2UocixuLmxlbmd0aC1yKX19cmV0dXJuITF9ZnVuY3Rpb24gaChlLHQpe3ZhciBuPXQ/VzpVO2UuaGlkZGVuPSF0LGUuYXR0cmlidXRlcz1uKGUuYXR0cmlidXRlcyksZS5mb290ZXJBdHRyaWJ1dGVzPW4oZS5mb290ZXJBdHRyaWJ1dGVzKSxlLmhlYWRlckF0dHJpYnV0ZXM9bihlLmhlYWRlckF0dHJpYnV0ZXMpfWZ1bmN0aW9uIHAoZSl7cmV0dXJuIGYoW2VdKS5sZW5ndGg+MH1mdW5jdGlvbiBmKGUpe3JldHVybiBrdChlLGZ1bmN0aW9uKGUpe3ZhciB0PSFlLmhpZGRlbjtyZXR1cm4gdCYmZS5jb2x1bW5zJiYodD1mKGUuY29sdW1ucykubGVuZ3RoPjApLHR9KX1mdW5jdGlvbiBnKHQpe3JldHVybiBlKHQpLm1hcChmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvQXJyYXkoKX0pfWZ1bmN0aW9uIG0oZSx0LG4pe3ZhciBpPXkoSSh0KSkscj15KHoodCkpLG89ZS5yb3dTcGFuO2Uucm93U3Bhbj1uP2k+cj9vLShpLXIpfHwxOm8rKHItaSk6aT5yP28rKGktcik6by0oci1pKXx8MX1mdW5jdGlvbiB2KHQsbixpLHIsbyxhLHMpe3ZhciBsLGMsZD15KHQpLHU9eShbbl0pO2Q+dSYmKGw9QXJyYXkocysxKS5qb2luKCc8dGggY2xhc3M9XCJrLWdyb3VwLWNlbGwgay1oZWFkZXJcIj4mbmJzcDs8L3RoPicpLGM9YS5jaGlsZHJlbihcIjpub3QoLmstZmlsdGVyLXJvdylcIiksZShBcnJheShkLXUrMSkuam9pbihcIjx0cj5cIitsK1wiPC90cj5cIikpLmluc2VydEFmdGVyKGMubGFzdCgpKSksRShhLGQtdSksdyhpLHIsbyxhKX1mdW5jdGlvbiBfKGUsdCxuKXt2YXIgaSxyLG8sYSxzO2ZvcihuPW58fDAsbz10LHQ9TCh0KSxhPTAscz10Lmxlbmd0aDtzPmE7YSsrKWk9Yih0W2FdLG8pLHI9ZS5maW5kKFwiPnRyOm5vdCguay1maWx0ZXItcm93KVwiKS5lcShpLnJvdykuZmluZChcIi5rLWhlYWRlcjpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIikuZXEoaS5jZWxsKSxyLmF0dHIodXQuYXR0cihcImluZGV4XCIpLG4rYSk7cmV0dXJuIHQubGVuZ3RofWZ1bmN0aW9uIHkoZSl7dmFyIHQsbixpPTEscj0wO2Zvcih0PTA7ZS5sZW5ndGg+dDt0KyspZVt0XS5jb2x1bW5zJiYobj15KGVbdF0uY29sdW1ucyksbj5yJiYocj1uKSk7cmV0dXJuIGkrcn1mdW5jdGlvbiB3KHQsbixpLHIpe3ZhciBvLGEscz14KHRbMF0sbiksbD1pLmZpbmQoXCI+dHI6bm90KC5rLWZpbHRlci1yb3cpOmVxKFwiK3Mucm93K1wiKT50aC5rLWhlYWRlclwiKSxjPWUoKSxkPXMuY2VsbDtmb3Iobz0wO3QubGVuZ3RoPm87bysrKWM9Yy5hZGQobC5lcShkK28pKTtmb3Ioci5maW5kKFwiPnRyOm5vdCguay1maWx0ZXItcm93KVwiKS5lcShzLnJvdykuYXBwZW5kKGMpLGE9W10sbz0wO3QubGVuZ3RoPm87bysrKXRbb10uY29sdW1ucyYmKGE9YS5jb25jYXQodFtvXS5jb2x1bW5zKSk7YS5sZW5ndGgmJncoYSxuLGkscil9ZnVuY3Rpb24gYihlLHQsbixpKXt2YXIgcixvO2ZvcihuPW58fDAsaT1pfHx7fSxpW25dPWlbbl18fDAsbz0wO3QubGVuZ3RoPm87bysrKXtpZih0W29dPT1lKXtyPXtjZWxsOmlbbl0scm93Om59O2JyZWFrfWlmKHRbb10uY29sdW1ucyYmKHI9YihlLHRbb10uY29sdW1ucyxuKzEsaSkpKWJyZWFrO2lbbl0rK31yZXR1cm4gcn1mdW5jdGlvbiBrKGUsdCxuLGkpe3ZhciByLG8sYTtyZXR1cm4gdC5jb2x1bW5zPyh0PXQuY29sdW1ucyx0W2k/MDp0Lmxlbmd0aC0xXSk6KHI9ZCh0LGUpLG89cj9yLmNvbHVtbnM6ZSxhPUN0KHQsbyksMD09PWEmJmk/YSsrOmEhPW8ubGVuZ3RoLTF8fGk/KGE+MHx8MD09PWEmJiFpKSYmKGErPWk/LTE6MSk6YS0tLHQ9b1tNYXRoLm1heChhLDApXSx0JiZ0IT1uJiZ0LmNvbHVtbnM/ayhlLHQsbixpKTpudWxsKX1mdW5jdGlvbiB4KGUsdCxuLGkpe3ZhciByLG87Zm9yKG49bnx8MCxpPWl8fHt9LGlbbl09aVtuXXx8MCxvPTA7dC5sZW5ndGg+bztvKyspe2lmKHRbb109PWUpe3I9e2NlbGw6aVtuXSxyb3c6bn07YnJlYWt9aWYodFtvXS5jb2x1bW5zJiYocj14KGUsdFtvXS5jb2x1bW5zLG4rMSxpKSkpYnJlYWs7dFtvXS5oaWRkZW58fGlbbl0rK31yZXR1cm4gcn1mdW5jdGlvbiBDKGUpe3ZhciB0PVMoSShlKSk7cmV0dXJuIHQuY29uY2F0KFMoeihlKSkpfWZ1bmN0aW9uIFMoZSl7dmFyIHQsbj1bXSxpPVtdO2Zvcih0PTA7ZS5sZW5ndGg+dDt0Kyspbi5wdXNoKGVbdF0pLGVbdF0uY29sdW1ucyYmKGk9aS5jb25jYXQoZVt0XS5jb2x1bW5zKSk7cmV0dXJuIGkubGVuZ3RoJiYobj1uLmNvbmNhdChTKGkpKSksbn1mdW5jdGlvbiBUKGUpe3ZhciB0LG4saT0wO2ZvcihuPTA7ZS5sZW5ndGg+bjtuKyspdD1lW25dLHQuY29sdW1ucz9pKz1UKHQuY29sdW1ucyk6dC5oaWRkZW4mJmkrKztyZXR1cm4gaX1mdW5jdGlvbiBEKGUpe3ZhciB0LG4saSxyPTA7Zm9yKG49MCxpPWUubGVuZ3RoO2k+bjtuKyspdD1lW25dLnN0eWxlLndpZHRoLHQmJi0xPT10LmluZGV4T2YoXCIlXCIpJiYocis9cGFyc2VJbnQodCwxMCkpO3JldHVybiByfWZ1bmN0aW9uIEEoZSx0KXt2YXIgbixpLHI9ZS5maW5kKFwidHI6bm90KC5rLWZpbHRlci1yb3cpIHRoOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKTtmb3IoaT0wO3IubGVuZ3RoPmk7aSsrKW49cltpXS5yb3dTcGFuLG4+MSYmKHJbaV0ucm93U3Bhbj1uLXR8fDEpfWZ1bmN0aW9uIEUoZSx0KXt2YXIgbixpPWUuZmluZChcInRyOm5vdCguay1maWx0ZXItcm93KSB0aDpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIik7Zm9yKG49MDtpLmxlbmd0aD5uO24rKylpW25dLnJvd1NwYW4rPXR9ZnVuY3Rpb24gTSh0KXt2YXIgbixpPXQuZmluZChcInRyOm5vdCguay1maWx0ZXItcm93KVwiKSxyPWkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIWUodGhpcykuY2hpbGRyZW4oKS5sZW5ndGh9KS5yZW1vdmUoKS5sZW5ndGgsbz1pLmZpbmQoXCJ0aDpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIik7Zm9yKG49MDtvLmxlbmd0aD5uO24rKylvW25dLnJvd1NwYW4+MSYmKG9bbl0ucm93U3Bhbi09cik7cmV0dXJuIGkubGVuZ3RoLXJ9ZnVuY3Rpb24gUChlLHQsbixpLHIpe3ZhciBvLGEscyxsPVtdO2ZvcihvPTAscz1lLmxlbmd0aDtzPm87bysrKWE9bltpXXx8W10sYS5wdXNoKHQuZXEocitvKSksbltpXT1hLGVbb10uY29sdW1ucyYmKGw9bC5jb25jYXQoZVtvXS5jb2x1bW5zKSk7bC5sZW5ndGgmJlAobCx0LG4saSsxLHIrZS5sZW5ndGgpfWZ1bmN0aW9uIEkoZSl7cmV0dXJuIGt0KGUsZnVuY3Rpb24oZSl7cmV0dXJuIGUubG9ja2VkfSl9ZnVuY3Rpb24geihlKXtyZXR1cm4ga3QoZSxmdW5jdGlvbihlKXtyZXR1cm4hZS5sb2NrZWR9KX1mdW5jdGlvbiBGKGUpe3JldHVybiBrdChlLGZ1bmN0aW9uKGUpe3JldHVybiFlLmxvY2tlZCYmcChlKX0pfWZ1bmN0aW9uIFIoZSl7cmV0dXJuIGt0KGUsZnVuY3Rpb24oZSl7cmV0dXJuIGUubG9ja2VkJiZwKGUpfSl9ZnVuY3Rpb24gQihlKXt2YXIgdCxuPVtdO2Zvcih0PTA7ZS5sZW5ndGg+dDt0KyspZVt0XS5oaWRkZW58fChlW3RdLmNvbHVtbnM/bj1uLmNvbmNhdChCKGVbdF0uY29sdW1ucykpOm4ucHVzaChlW3RdKSk7cmV0dXJuIG59ZnVuY3Rpb24gTChlKXt2YXIgdCxuPVtdO2Zvcih0PTA7ZS5sZW5ndGg+dDt0KyspZVt0XS5jb2x1bW5zP249bi5jb25jYXQoTChlW3RdLmNvbHVtbnMpKTpuLnB1c2goZVt0XSk7cmV0dXJuIG59ZnVuY3Rpb24gTyh0KXt2YXIgbixpPXQuZmluZChcIj50cjpub3QoLmstZmlsdGVyLXJvdylcIikscj1lKCk7cmV0dXJuIGkubGVuZ3RoPjEmJihyPWkuZmluZChcInRoOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb3dTcGFuPjF9KSkscj1yLmFkZChpLmxhc3QoKS5maW5kKFwidGg6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpKSxuPXV0LmF0dHIoXCJpbmRleFwiKSxyLnNvcnQoZnVuY3Rpb24odCxpKXtyZXR1cm4gdD1wYXJzZUludChlKHQpLmF0dHIobiksMTApLGk9cGFyc2VJbnQoZShpKS5hdHRyKG4pLDEwKSx0Pmk/MTppPnQ/LTE6MH0pLHJ9ZnVuY3Rpb24gSCh0KXt2YXIgbixpLHIsbyxhLHMsbCxjPXQuY2xvc2VzdChcInRhYmxlXCIpLGQ9ZSgpLmFkZCh0KSx1PXQuY2xvc2VzdChcInRyXCIpLGg9Yy5maW5kKFwidHI6bm90KC5rLWZpbHRlci1yb3cpXCIpLHA9aC5pbmRleCh1KTtpZihwPjApe2ZvcihuPWguZXEocC0xKSxpPW4uZmluZChcInRoOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4hZSh0aGlzKS5hdHRyKFwicm93c3BhblwiKX0pLHI9MCxvPXUuZmluZChcInRoOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKS5pbmRleCh0KSxhPXQucHJldkFsbChcIjpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIikuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29sU3Bhbj4xfSkscz0wO2EubGVuZ3RoPnM7cysrKXIrPWFbc10uY29sU3Bhbnx8MTtmb3Iobys9TWF0aC5tYXgoci0xLDApLHI9MCxzPTA7aS5sZW5ndGg+cztzKyspaWYobD1pLmVxKHMpLHIrPWwuYXR0cihcImNvbFNwYW5cIik/bFswXS5jb2xTcGFuOjEsbz49cyYmcj5vKXtkPUgobCkuYWRkKGQpO1xuYnJlYWt9fXJldHVybiBkfWZ1bmN0aW9uIE4odCl7dmFyIG4saSxyLG8sYSxzLGwsYyxkPXQuY2xvc2VzdChcInRhYmxlXCIpLHU9ZSgpLmFkZCh0KSxoPXQuY2xvc2VzdChcInRyXCIpLHA9ZC5maW5kKFwidHI6bm90KC5rLWZpbHRlci1yb3cpXCIpLGY9cC5pbmRleChoKSt0WzBdLnJvd1NwYW4sZz11dC5hdHRyKFwiY29sc3BhblwiKTtpZihwLmxlbmd0aC0xPj1mKXtmb3Iobj1oLm5leHQoKSxpPWguZmluZChcInRoOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKS5pbmRleCh0KSxyPXQucHJldkFsbChcIjpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIikscj1yLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiF0aGlzLnJvd1NwYW58fDE9PT10aGlzLnJvd1NwYW59KSxhPTAsbz0wO3IubGVuZ3RoPm87bysrKWErPXBhcnNlSW50KHIuZXEobykuYXR0cihnKSwxMCl8fDE7Zm9yKHM9bi5maW5kKFwidGg6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpLGw9cGFyc2VJbnQodC5hdHRyKGcpLDEwKXx8MSxvPTA7bD5vOyluPXMuZXEobythKSx1PXUuYWRkKE4obikpLGM9cGFyc2VJbnQobi5hdHRyKGcpLDEwKSxjPjEmJihsLT1jLTEpLG8rK31yZXR1cm4gdX1mdW5jdGlvbiBWKHQsbixpKXt2YXIgcixvPXQ7cmV0dXJuIGd0P3RbMF0uaW5uZXJIVE1MPWk6KHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxyLmlubmVySFRNTD1cIjx0YWJsZT48dGJvZHk+XCIraStcIjwvdGJvZHk+PC90YWJsZT5cIix0PXIuZmlyc3RDaGlsZC5maXJzdENoaWxkLG5bMF0ucmVwbGFjZUNoaWxkKHQsb1swXSksdD1lKHQpKSx0fWZ1bmN0aW9uIFUoZSl7ZT1lfHx7fTt2YXIgdD1lLnN0eWxlO3JldHVybiB0Pyh0PXQucmVwbGFjZSgvKCguKik/ZGlzcGxheSkoLiopPzooW147XSopL2ksXCIkMTpub25lXCIpLHQ9PT1lLnN0eWxlJiYodD10LnJlcGxhY2UoLyguKik/L2ksXCJkaXNwbGF5Om5vbmU7JDFcIikpKTp0PVwiZGlzcGxheTpub25lXCIsd3Qoe30sZSx7c3R5bGU6dH0pfWZ1bmN0aW9uIFcoZSl7ZT1lfHx7fTt2YXIgdD1lLnN0eWxlO3JldHVybiB0JiYoZS5zdHlsZT10LnJlcGxhY2UoLyhkaXNwbGF5XFxzKjpcXHMqbm9uZVxccyo7PykqL2dpLFwiXCIpKSxlfWZ1bmN0aW9uIGoodCxuLGkscil7dmFyIG8sYT10LmZpbmQoXCI+Y29sZ3JvdXBcIikscz1idChuLGZ1bmN0aW9uKGUpe3JldHVybiBvPWUud2lkdGgsbyYmMCE9PXBhcnNlSW50KG8sMTApP3V0LmZvcm1hdCgnPGNvbCBzdHlsZT1cIndpZHRoOnswfVwiLz4nLHR5cGVvZiBvPT09Y24/bzpvK1wicHhcIik6XCI8Y29sIC8+XCJ9KTsoaXx8YS5maW5kKFwiLmstaGllcmFyY2h5LWNvbFwiKS5sZW5ndGgpJiZzLnNwbGljZSgwLDAsJzxjb2wgY2xhc3M9XCJrLWhpZXJhcmNoeS1jb2xcIiAvPicpLGEubGVuZ3RoJiZhLnJlbW92ZSgpLGE9ZShBcnJheShyKzEpLmpvaW4oJzxjb2wgY2xhc3M9XCJrLWdyb3VwLWNvbFwiPicpK3Muam9pbihcIlwiKSksYS5pcyhcImNvbGdyb3VwXCIpfHwoYT1lKFwiPGNvbGdyb3VwLz5cIikuYXBwZW5kKGEpKSx0LnByZXBlbmQoYSksd24ubXNpZSYmOD09d24udmVyc2lvbiYmKHQuY3NzKFwiZGlzcGxheVwiLFwiaW5saW5lLXRhYmxlXCIpLHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5jc3MoXCJkaXNwbGF5XCIsXCJcIil9LDEpKX1mdW5jdGlvbiBHKGUsdCl7dmFyIG4saSxyPTA7Zm9yKG49MCxpPXQubGVuZ3RoO2k+bjtuKyspdFtuXS5sb2NrZWQmJihlLmVxKG4pLmluc2VydEJlZm9yZShlLmVxKHIpKSxyKyspfWZ1bmN0aW9uIHEoZSl7dmFyIHQsbixpLHI9e307Zm9yKG49MCxpPWUubGVuZ3RoO2k+bjtuKyspdD1lW25dLHJbdC52YWx1ZV09dC50ZXh0O3JldHVybiByfWZ1bmN0aW9uICQoZSx0LG4pe3ZhciBpPW4mJm4ubGVuZ3RoJiZ5dChuWzBdKSYmXCJ2YWx1ZVwiaW4gblswXSxyPWk/cShuKVtlXTplO3JldHVybiByPW51bGwhPXI/cjpcIlwiLHQ/dXQuZm9ybWF0KHQscik6cn1mdW5jdGlvbiBZKGUsdCxuKXtmb3IodmFyIGkscj0wLG89ZVtyXTtvOyl7aWYoaT1uPyEwOlwibm9uZVwiIT09by5zdHlsZS5kaXNwbGF5LGkmJiFtbi50ZXN0KG8uY2xhc3NOYW1lKSYmLS10PDApe28uc3R5bGUuZGlzcGxheT1uP1wiXCI6XCJub25lXCI7YnJlYWt9bz1lWysrcl19fWZ1bmN0aW9uIEsodCxuKXtmb3IodmFyIGkscixvPTAsYT10Lmxlbmd0aDthPm87bys9MSlyPXQuZXEobyksci5pcyhcIi5rLWdyb3VwaW5nLXJvdywuay1kZXRhaWwtcm93XCIpPyhpPXIuY2hpbGRyZW4oXCI6bm90KC5rLWdyb3VwLWNlbGwpOmZpcnN0LC5rLWRldGFpbC1jZWxsXCIpLmxhc3QoKSxpLmF0dHIoXCJjb2xzcGFuXCIscGFyc2VJbnQoaS5hdHRyKFwiY29sc3BhblwiKSwxMCktMSkpOihyLmhhc0NsYXNzKFwiay1ncmlkLWVkaXQtcm93XCIpJiYoaT1yLmNoaWxkcmVuKFwiLmstZWRpdC1jb250YWluZXJcIilbMF0pJiYoaT1lKGkpLGkuYXR0cihcImNvbHNwYW5cIixwYXJzZUludChpLmF0dHIoXCJjb2xzcGFuXCIpLDEwKS0xKSxpLmZpbmQoXCJjb2xcIikuZXEobikucmVtb3ZlKCkscj1pLmZpbmQoXCJ0cjpmaXJzdFwiKSksWShyWzBdLmNlbGxzLG4sITEpKX1mdW5jdGlvbiBRKHQsbil7Zm9yKHZhciBpLHIsbyxhPTAscz10Lmxlbmd0aDtzPmE7YSs9MSlyPXQuZXEoYSksci5pcyhcIi5rLWdyb3VwaW5nLXJvdywuay1kZXRhaWwtcm93XCIpPyhpPXIuY2hpbGRyZW4oXCI6bm90KC5rLWdyb3VwLWNlbGwpOmZpcnN0LC5rLWRldGFpbC1jZWxsXCIpLmxhc3QoKSxpLmF0dHIoXCJjb2xzcGFuXCIscGFyc2VJbnQoaS5hdHRyKFwiY29sc3BhblwiKSwxMCkrMSkpOihyLmhhc0NsYXNzKFwiay1ncmlkLWVkaXQtcm93XCIpJiYoaT1yLmNoaWxkcmVuKFwiLmstZWRpdC1jb250YWluZXJcIilbMF0pJiYoaT1lKGkpLGkuYXR0cihcImNvbHNwYW5cIixwYXJzZUludChpLmF0dHIoXCJjb2xzcGFuXCIpLDEwKSsxKSxqKGkuZmluZChcIj5mb3JtPnRhYmxlXCIpLGYobyksITEsMCkscj1pLmZpbmQoXCJ0cjpmaXJzdFwiKSksWShyWzBdLmNlbGxzLG4sITApKX1mdW5jdGlvbiBYKGUsdCxuKXtuPW58fDE7dmFyIGkscixvO2ZvcihyPTAsbz1lLmxlbmd0aDtvPnI7cisrKWk9ZS5lcShyKS5jaGlsZHJlbigpLmxhc3QoKSxpLmF0dHIoXCJjb2xzcGFuXCIscGFyc2VJbnQoaS5hdHRyKFwiY29sc3BhblwiKSwxMCkrbiksaT10LmVxKHIpLmNoaWxkcmVuKCkubGFzdCgpLGkuYXR0cihcImNvbHNwYW5cIixwYXJzZUludChpLmF0dHIoXCJjb2xzcGFuXCIpLDEwKS1uKX1mdW5jdGlvbiBKKGUpe3ZhciB0LG4saT0wLHI9ZS5maW5kKFwiPmNvbGdyb3VwPmNvbFwiKTtmb3IodD0wLG49ci5sZW5ndGg7bj50O3QrPTEpaSs9cGFyc2VJbnQoclt0XS5zdHlsZS53aWR0aCwxMCk7cmV0dXJuIGl9ZnVuY3Rpb24gWihlLHQpe3ZhciBuLGkscixvO2U9ZVswXSx0PXRbMF0sZS5yb3dzLmxlbmd0aCE9PXQucm93cy5sZW5ndGgmJihuPWUub2Zmc2V0SGVpZ2h0LGk9dC5vZmZzZXRIZWlnaHQsbj5pPyhyPXQucm93c1t0LnJvd3MubGVuZ3RoLTFdLHZuLnRlc3Qoci5jbGFzc05hbWUpJiYocj10LnJvd3NbdC5yb3dzLmxlbmd0aC0yXSksbz1uLWkpOihyPWUucm93c1tlLnJvd3MubGVuZ3RoLTFdLHZuLnRlc3Qoci5jbGFzc05hbWUpJiYocj1lLnJvd3NbZS5yb3dzLmxlbmd0aC0yXSksbz1pLW4pLHIuc3R5bGUuaGVpZ2h0PXIub2Zmc2V0SGVpZ2h0K28rXCJweFwiKX1mdW5jdGlvbiBldChlLHQpe3ZhciBuLGk9ZS5vZmZzZXRIZWlnaHQscj10Lm9mZnNldEhlaWdodDtpPnI/bj1pK1wicHhcIjpyPmkmJihuPXIrXCJweFwiKSxuJiYoZS5zdHlsZS5oZWlnaHQ9dC5zdHlsZS5oZWlnaHQ9bil9ZnVuY3Rpb24gdHQoZSx0KXt2YXIgbixpLHI7aWYodHlwZW9mIGU9PT1jbiYmZT09PXQpcmV0dXJuIGU7aWYoeXQoZSkmJmUubmFtZT09PXQpcmV0dXJuIGU7aWYoeHQoZSkpZm9yKG49MCxpPWUubGVuZ3RoO2k+bjtuKyspaWYocj1lW25dLHR5cGVvZiByPT09Y24mJnI9PT10fHxyLm5hbWU9PT10KXJldHVybiByO3JldHVybiBudWxsfWZ1bmN0aW9uIG50KHQsbil7dmFyIGkscixvLGE9d24ubXNpZTtpZihuPT09ITApe2lmKHQ9ZSh0KSxpPSEwLGkmJihyPXQucGFyZW50KCkuc2Nyb2xsVG9wKCksbz10LnBhcmVudCgpLnNjcm9sbExlZnQoKSksYSl0cnl7dFswXS5zZXRBY3RpdmUoKX1jYXRjaChzKXt0WzBdLmZvY3VzKCl9ZWxzZSB0WzBdLmZvY3VzKCk7aSYmKHQucGFyZW50KCkuc2Nyb2xsVG9wKHIpLHQucGFyZW50KCkuc2Nyb2xsTGVmdChvKSl9ZWxzZSBlKHQpLm9uZShcImZvY3VzaW5cIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCl9KS5mb2N1cygpfWZ1bmN0aW9uIGl0KHQpe3ZhciBuPWUodC5jdXJyZW50VGFyZ2V0KSxpPW4uaXMoXCJ0aFwiKSxyPXRoaXMudGFibGUuYWRkKHRoaXMubG9ja2VkVGFibGUpLG89dGhpcy50aGVhZC5wYXJlbnQoKS5hZGQoZShcIj50YWJsZVwiLHRoaXMubG9ja2VkSGVhZGVyKSksYT1lKHQudGFyZ2V0KS5pcyhcIjpidXR0b24sYSw6aW5wdXQsYT4uay1pY29uLHRleHRhcmVhLHNwYW4uay1pY29uLHNwYW4uay1saW5rLC5rLWlucHV0LC5rLW11bHRpc2VsZWN0LXdyYXBcIikscz1uLmNsb3Nlc3QoXCJ0YWJsZVwiKVswXTt1dC5zdXBwb3J0LnRvdWNofHxhJiZuLmZpbmQodXQucm9sZVNlbGVjdG9yKFwiZmlsdGVyY2VsbFwiKSkubGVuZ3RofHwocz09PXJbMF18fHM9PT1yWzFdfHxzPT09b1swXXx8cz09PW9bMV0pJiYoZSh0LnRhcmdldCkuaXMoXCJhLmstaS1jb2xsYXBzZSwgYS5rLWktZXhwYW5kXCIpfHwodGhpcy5jdXJyZW50KG4pLChpfHwhYSkmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtrbiYmZSh1dC5fYWN0aXZlRWxlbWVudCgpKS5oYXNDbGFzcyhcImstd2lkZ2V0XCIpfHxudChzLCEwKX0pLGkmJnQucHJldmVudERlZmF1bHQoKSkpfWZ1bmN0aW9uIHJ0KHQsbixpLHIpe2lmKHQ9ZSh0KSxyKXt2YXIgbz1uO249aSxpPW99cmV0dXJuIG4ubm90KHQpLmxlbmd0aCE9bi5sZW5ndGg/dDpuLmVxKHRbMF09PWlbMF0/MDoxKX1mdW5jdGlvbiBvdChlLG4saSxyLG8pe3ZhciBhLHMsbCxjPW8/XCJwcmV2QWxsXCI6XCJuZXh0QWxsXCI7aWYoZSl7aWYoYT1lLnBhcmVudCgpW2NdKEZ0KS5maXJzdCgpLCFhWzBdJiYob3x8ZS5pcyhcInRoXCIpKXx8IW8mJmVbMF0ucm93U3Bhbj4xKXtpZihuPXJ0KG4saSxyLG8pLG50KG4pLG8mJiFlLmlzKFwiLmstaGVhZGVyXCIpKXJldHVybiBPKG4uZmluZChcInRoZWFkOmZpcnN0XCIpKS5lcShlLmluZGV4KCkpO2E9bi5maW5kKChvP1wiPnRoZWFkPlwiOlwiPnRib2R5PlwiKStGdCkuZmlyc3QoKX0hbyYmZVswXS5jb2xTcGFuPjEmJmUuaXMoXCIuay1oZWFkZXJcIik/ZT1OKGUpLmVxKDEpOmUuaXMoXCIuay1oZWFkZXJcIikmJm8/KGw9SChlKSxlPWwuZXEobC5sZW5ndGgtMikpOihzPWUuYXR0cih1dC5hdHRyKFwiaW5kZXhcIikpLChzPT09dHx8bykmJihzPWUuaW5kZXgoKSksZT1hLmNoaWxkcmVuKCkuZXEocykpLGVbMF0mJmUuaXMoUnQpfHwoZT1hLmNoaWxkcmVuKFJ0KS5maXJzdCgpKX1lbHNlIGU9aS5maW5kKEJ0KTtyZXR1cm4gZX1mdW5jdGlvbiBhdChlLHQsbixpLHIpe3ZhciBvPW4ubGVuZ3RoPjE7cmV0dXJuIGU/ZS5wcmV2QWxsKFwiOnZpc2libGVcIilbMF0/ZT1lLnByZXZBbGwoSXQpLmZpcnN0KCk6byYmKHQ9PW5bMV0/KG50KG5bMF0pLGU9cihlLnBhcmVudCgpKS5jaGlsZHJlbihJdCkubGFzdCgpKTp0PT1pWzFdJiYobnQoaVswXSksZT1pLmVxKDApLmZpbmQoXCJ0cj5cIitJdCkubGFzdCgpKSk6ZT1uLmZpbmQoQnQpLGV9ZnVuY3Rpb24gc3QoZSx0LG4saSxyKXt2YXIgbz1uLmxlbmd0aD4xO3JldHVybiBlP2UubmV4dEFsbChcIjp2aXNpYmxlXCIpWzBdP2U9ZS5uZXh0QWxsKEl0KS5maXJzdCgpOm8mJih0PT1uWzBdPyhudChuWzFdKSxlPXIoZS5wYXJlbnQoKSkuY2hpbGRyZW4oSXQpLmZpcnN0KCkpOnQ9PWlbMF0mJihudChpWzFdKSxlPWkuZXEoMSkuZmluZChcInRyPlwiK0l0KS5maXJzdCgpKSk6ZT1uLmZpbmQoQnQpLGV9ZnVuY3Rpb24gbHQoZSx0LG4saSxyKXt2YXIgbz0yPT1uLmxlbmd0aCxhPSEwLHM9cj9lLnByZXZBbGwoSXQrXCI6Zmlyc3RcIik6ZS5uZXh0QWxsKFwiOnZpc2libGU6Zmlyc3RcIik7cmV0dXJuIHMubGVuZ3RofHwocz1lLnBhcmVudCgpLG8mJihhPXImJnQ9PW5bMF18fCFyJiZ0PT1uWzFdLHM9aShzKSksYSYmKHM9c1tyP1wicHJldkFsbFwiOlwibmV4dEFsbFwiXShcInRyOm5vdCguay1ncm91cGluZy1yb3cpOm5vdCguay1kZXRhaWwtcm93KTp2aXNpYmxlOmZpcnN0XCIpKSxzPXMuY2hpbGRyZW4oSXQrKHI/XCI6bGFzdFwiOlwiOmZpcnN0XCIpKSksc31mdW5jdGlvbiBjdChlLHQsaSl7cmV0dXJuJzx0ciBjbGFzcz1cImstZ3JvdXBpbmctcm93XCI+JytuKHQpKyc8dGQgY29sc3Bhbj1cIicrZSsnXCIgYXJpYS1leHBhbmRlZD1cInRydWVcIj48cCBjbGFzcz1cImstcmVzZXRcIj48YSBjbGFzcz1cImstaWNvbiBrLWktY29sbGFwc2VcIiBocmVmPVwiI1wiIHRhYmluZGV4PVwiLTFcIj48L2E+JytpK1wiPC9wPjwvdGQ+PC90cj5cIn1mdW5jdGlvbiBkdChlKXtyZXR1cm4nPHRyIGNsYXNzPVwiay1ncm91cGluZy1yb3dcIj48dGQgY29sc3Bhbj1cIicrZSsnXCIgYXJpYS1leHBhbmRlZD1cInRydWVcIj48cCBjbGFzcz1cImstcmVzZXRcIj4mbmJzcDs8L3A+PC90ZD48L3RyPid9dmFyIHV0PXdpbmRvdy5rZW5kbyxodD11dC51aSxwdD11dC5kYXRhLkRhdGFTb3VyY2UsZnQ9aHQuR3JvdXBhYmxlLGd0PXV0LnN1cHBvcnQudGJvZHlJbm5lckh0bWwsbXQ9dXQuX2FjdGl2ZUVsZW1lbnQsdnQ9aHQuV2lkZ2V0LF90PXV0LmtleXMseXQ9ZS5pc1BsYWluT2JqZWN0LHd0PWUuZXh0ZW5kLGJ0PWUubWFwLGt0PWUuZ3JlcCx4dD1lLmlzQXJyYXksQ3Q9ZS5pbkFycmF5LFN0PUFycmF5LnByb3RvdHlwZS5wdXNoLFR0PWUucHJveHksRHQ9dXQuaXNGdW5jdGlvbixBdD1lLmlzRW1wdHlPYmplY3QsRXQ9TWF0aCxNdD1cInByb2dyZXNzXCIsUHQ9XCJlcnJvclwiLEl0PVwiOm5vdCguay1ncm91cC1jZWxsKTpub3QoLmstaGllcmFyY2h5LWNlbGwpOnZpc2libGVcIix6dD1cInRib2R5PnRyOm5vdCguay1ncm91cGluZy1yb3cpOm5vdCguay1kZXRhaWwtcm93KTpub3QoLmstZ3JvdXAtZm9vdGVyKSA+IHRkOm5vdCguay1ncm91cC1jZWxsKTpub3QoLmstaGllcmFyY2h5LWNlbGwpXCIsRnQ9XCJ0cjpub3QoLmstZm9vdGVyLXRlbXBsYXRlKTp2aXNpYmxlXCIsUnQ9XCI6bm90KC5rLWdyb3VwLWNlbGwpOm5vdCguay1oaWVyYXJjaHktY2VsbCk6dmlzaWJsZVwiLEJ0PUZ0K1wiOmZpcnN0PlwiK1J0K1wiOmZpcnN0XCIsTHQ9XCJ0aC5rLWhlYWRlcjpub3QoLmstZ3JvdXAtY2VsbCk6bm90KC5rLWhpZXJhcmNoeS1jZWxsKVwiLE90PVwiLmtlbmRvR3JpZFwiLEh0PVwiZWRpdFwiLE50PVwic2F2ZVwiLFZ0PVwicmVtb3ZlXCIsVXQ9XCJkZXRhaWxJbml0XCIsV3Q9XCJmaWx0ZXJNZW51SW5pdFwiLGp0PVwiY29sdW1uTWVudUluaXRcIixHdD1cImNoYW5nZVwiLHF0PVwiY29sdW1uSGlkZVwiLCR0PVwiY29sdW1uU2hvd1wiLFl0PVwic2F2ZUNoYW5nZXNcIixLdD1cImRhdGFCb3VuZFwiLFF0PVwiZGV0YWlsRXhwYW5kXCIsWHQ9XCJkZXRhaWxDb2xsYXBzZVwiLEp0PVwiay1zdGF0ZS1mb2N1c2VkXCIsWnQ9XCJrLXN0YXRlLXNlbGVjdGVkXCIsZW49XCJjb2x1bW5SZXNpemVcIix0bj1cImNvbHVtblJlb3JkZXJcIixubj1cImNvbHVtbkxvY2tcIixybj1cImNvbHVtblVubG9ja1wiLG9uPVwiY2xpY2tcIixhbj1cImhlaWdodFwiLHNuPVwidGFiSW5kZXhcIixsbj1cImZ1bmN0aW9uXCIsY249XCJzdHJpbmdcIixkbj1cIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyByZWNvcmQ/XCIsdW49XCJEZWxldGVcIixobj1cIkNhbmNlbFwiLHBuPS8oXFx9fFxcIykvZ2ksZm49LyMvZ2ksZ249XCJbXFxcXHgyMFxcXFx0XFxcXHJcXFxcblxcXFxmXVwiLG1uPVJlZ0V4cChcIihefFwiK2duK1wiKShrLWdyb3VwLWNlbGx8ay1oaWVyYXJjaHktY2VsbCkoXCIrZ24rXCJ8JClcIiksdm49UmVnRXhwKFwiKF58XCIrZ24rXCIpKGstZmlsdGVyLXJvdykoXCIrZ24rXCJ8JClcIiksX249JzxhIGNsYXNzPVwiay1idXR0b24gay1idXR0b24taWNvbnRleHQgIz1jbGFzc05hbWUjXCIgIz1hdHRyIyBocmVmPVwiXFxcXCNcIj48c3BhbiBjbGFzcz1cIiM9aWNvbkNsYXNzIyAjPWltYWdlQ2xhc3MjXCI+PC9zcGFuPiM9dGV4dCM8L2E+Jyx5bj0hMSx3bj11dC5zdXBwb3J0LmJyb3dzZXIsYm49d24ubXNpZSYmNz09d24udmVyc2lvbixrbj13bi5tc2llJiY4PT13bi52ZXJzaW9uLHhuPXZ0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7dnQuZm4uaW5pdC5jYWxsKG4sZSx0KSxuLl9yZWZyZXNoSGFuZGxlcj1UdChuLnJlZnJlc2gsbiksbi5zZXREYXRhU291cmNlKHQuZGF0YVNvdXJjZSksbi53cmFwKCl9LHNldERhdGFTb3VyY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmRhdGFTb3VyY2UmJnQuZGF0YVNvdXJjZS51bmJpbmQoR3QsdC5fcmVmcmVzaEhhbmRsZXIpLHQuZGF0YVNvdXJjZT1lLHQuZGF0YVNvdXJjZS5iaW5kKEd0LHQuX3JlZnJlc2hIYW5kbGVyKX0sb3B0aW9uczp7bmFtZTpcIlZpcnR1YWxTY3JvbGxhYmxlXCIsaXRlbUhlaWdodDplLm5vb3B9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3Z0LmZuLmRlc3Ryb3kuY2FsbChlKSxlLmRhdGFTb3VyY2UudW5iaW5kKEd0LGUuX3JlZnJlc2hIYW5kbGVyKSxlLndyYXBwZXIuYWRkKGUudmVydGljYWxTY3JvbGxiYXIpLm9mZihPdCksZS5kcmFnJiYoZS5kcmFnLmRlc3Ryb3koKSxlLmRyYWc9bnVsbCksZS53cmFwcGVyPWUuZWxlbWVudD1lLnZlcnRpY2FsU2Nyb2xsYmFyPW51bGwsZS5fcmVmcmVzaEhhbmRsZXI9bnVsbH0sd3JhcDpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPXV0LnN1cHBvcnQuc2Nyb2xsYmFyKCkrMSxyPW4uZWxlbWVudDtyLmNzcyh7d2lkdGg6XCJhdXRvXCIsb3ZlcmZsb3c6XCJoaWRkZW5cIn0pLmNzcyh5bj9cInBhZGRpbmctbGVmdFwiOlwicGFkZGluZy1yaWdodFwiLGkpLG4uY29udGVudD1yLmNoaWxkcmVuKCkuZmlyc3QoKSx0PW4ud3JhcHBlcj1uLmNvbnRlbnQud3JhcCgnPGRpdiBjbGFzcz1cImstdmlydHVhbC1zY3JvbGxhYmxlLXdyYXBcIi8+JykucGFyZW50KCkuYmluZChcIkRPTU1vdXNlU2Nyb2xsXCIrT3QrXCIgbW91c2V3aGVlbFwiK090LFR0KG4uX3doZWVsU2Nyb2xsLG4pKSx1dC5zdXBwb3J0LmtpbmV0aWNTY3JvbGxOZWVkZWQmJihuLmRyYWc9bmV3IHV0LlVzZXJFdmVudHMobi53cmFwcGVyLHtnbG9iYWw6ITAsc3RhcnQ6ZnVuY3Rpb24oZSl7ZS5zZW5kZXIuY2FwdHVyZSgpfSxtb3ZlOmZ1bmN0aW9uKGUpe24udmVydGljYWxTY3JvbGxiYXIuc2Nyb2xsVG9wKG4udmVydGljYWxTY3JvbGxiYXIuc2Nyb2xsVG9wKCktZS55LmRlbHRhKSx0LnNjcm9sbExlZnQodC5zY3JvbGxMZWZ0KCktZS54LmRlbHRhKSxlLnByZXZlbnREZWZhdWx0KCl9fSkpLG4udmVydGljYWxTY3JvbGxiYXI9ZSgnPGRpdiBjbGFzcz1cImstc2Nyb2xsYmFyIGstc2Nyb2xsYmFyLXZlcnRpY2FsXCIgLz4nKS5jc3Moe3dpZHRoOml9KS5hcHBlbmRUbyhyKS5iaW5kKFwic2Nyb2xsXCIrT3QsVHQobi5fc2Nyb2xsLG4pKX0sX3doZWVsU2Nyb2xsOmZ1bmN0aW9uKHQpe2lmKCF0LmN0cmxLZXkpe3ZhciBuPXRoaXMudmVydGljYWxTY3JvbGxiYXIuc2Nyb2xsVG9wKCksaT11dC53aGVlbERlbHRhWSh0KTtpJiYodC5wcmV2ZW50RGVmYXVsdCgpLGUodC5jdXJyZW50VGFyZ2V0KS5vbmUoXCJ3aGVlbFwiK090LCExKSx0aGlzLnZlcnRpY2FsU2Nyb2xsYmFyLnNjcm9sbFRvcChuKy1pKSl9fSxfc2Nyb2xsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmN1cnJlbnRUYXJnZXQuc2Nyb2xsVG9wLGk9dC5kYXRhU291cmNlLHI9dC5pdGVtSGVpZ2h0LG89aS5za2lwKCl8fDAsYT10Ll9yYW5nZVN0YXJ0fHxvLHM9dC5lbGVtZW50LmlubmVySGVpZ2h0KCksbD0hISh0Ll9zY3JvbGxiYXJUb3AmJnQuX3Njcm9sbGJhclRvcD5uKSxjPUV0Lm1heChFdC5mbG9vcihuL3IpLDApLGQ9RXQubWF4KGMrRXQuZmxvb3Iocy9yKSwwKTt0Ll9zY3JvbGxUb3A9bi1hKnIsdC5fc2Nyb2xsYmFyVG9wPW4sdC5fZmV0Y2goYyxkLGwpfHwodC53cmFwcGVyWzBdLnNjcm9sbFRvcD10Ll9zY3JvbGxUb3ApfSxfZmV0Y2g6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMscj1pLmRhdGFTb3VyY2Usbz1pLml0ZW1IZWlnaHQsYT1yLnRha2UoKSxzPWkuX3JhbmdlU3RhcnR8fHIuc2tpcCgpfHwwLGw9RXQuZmxvb3IoZS9hKSphLGM9ITEsZD0uMzM7cmV0dXJuIHM+ZT8oYz0hMCxzPUV0Lm1heCgwLHQtYSksaS5fc2Nyb2xsVG9wPShlLXMpKm8saS5fcGFnZShzLGEpKTp0Pj1zK2EmJiFuPyhjPSEwLHM9ZSxpLl9zY3JvbGxUb3A9byxpLl9wYWdlKHMsYSkpOmkuX2ZldGNoaW5nfHwobCthLWEqZD5lJiZlPmEmJnIucHJlZmV0Y2gobC1hLGEpLHQ+bCthKmQmJnIucHJlZmV0Y2gobCthLGEpKSxjfSxfcGFnZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1uLmRhdGFTb3VyY2U7Y2xlYXJUaW1lb3V0KG4uX3RpbWVvdXQpLG4uX2ZldGNoaW5nPSEwLG4uX3JhbmdlU3RhcnQ9ZSxpLmluUmFuZ2UoZSx0KT9pLnJhbmdlKGUsdCk6KHV0LnVpLnByb2dyZXNzKG4ud3JhcHBlci5wYXJlbnQoKSwhMCksbi5fdGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5yYW5nZShlLHQpfSwxMDApKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHI9dGhpcyxvPVwiXCIsYT0yNWU0LHM9ci5kYXRhU291cmNlLGw9ci5fcmFuZ2VTdGFydCxjPXV0LnN1cHBvcnQua2luZXRpY1Njcm9sbE5lZWRlZD8wOnV0LnN1cHBvcnQuc2Nyb2xsYmFyKCksZD1yLndyYXBwZXJbMF07Zm9yKHV0LnVpLnByb2dyZXNzKHIud3JhcHBlci5wYXJlbnQoKSwhMSksY2xlYXJUaW1lb3V0KHIuX3RpbWVvdXQpLG49ci5pdGVtSGVpZ2h0PXIub3B0aW9ucy5pdGVtSGVpZ2h0KCl8fDAsaT1kLnNjcm9sbFdpZHRoPmQub2Zmc2V0V2lkdGg/YzowLGU9cy50b3RhbCgpKm4raSx0PTA7dDxFdC5mbG9vcihlL2EpO3QrKylvKz0nPGRpdiBzdHlsZT1cIndpZHRoOjFweDtoZWlnaHQ6JythKydweFwiPjwvZGl2Pic7ZSVhJiYobys9JzxkaXYgc3R5bGU9XCJ3aWR0aDoxcHg7aGVpZ2h0OicrZSVhKydweFwiPjwvZGl2PicpLHIudmVydGljYWxTY3JvbGxiYXIuaHRtbChvKSxkLnNjcm9sbFRvcD1yLl9zY3JvbGxUb3Asci5kcmFnJiZyLmRyYWcuY2FuY2VsKCksbCYmIXIuX2ZldGNoaW5nJiYoci5fcmFuZ2VTdGFydD1zLnNraXAoKSwxPT09cy5wYWdlKCkmJihyLnZlcnRpY2FsU2Nyb2xsYmFyWzBdLnNjcm9sbFRvcD0wKSksci5fZmV0Y2hpbmc9ITF9fSksQ249e2NyZWF0ZTp7dGV4dDpcIkFkZCBuZXcgcmVjb3JkXCIsaW1hZ2VDbGFzczpcImstYWRkXCIsY2xhc3NOYW1lOlwiay1ncmlkLWFkZFwiLGljb25DbGFzczpcImstaWNvblwifSxjYW5jZWw6e3RleHQ6XCJDYW5jZWwgY2hhbmdlc1wiLGltYWdlQ2xhc3M6XCJrLWNhbmNlbFwiLGNsYXNzTmFtZTpcImstZ3JpZC1jYW5jZWwtY2hhbmdlc1wiLGljb25DbGFzczpcImstaWNvblwifSxzYXZlOnt0ZXh0OlwiU2F2ZSBjaGFuZ2VzXCIsaW1hZ2VDbGFzczpcImstdXBkYXRlXCIsY2xhc3NOYW1lOlwiay1ncmlkLXNhdmUtY2hhbmdlc1wiLGljb25DbGFzczpcImstaWNvblwifSxkZXN0cm95Ont0ZXh0OlwiRGVsZXRlXCIsaW1hZ2VDbGFzczpcImstZGVsZXRlXCIsY2xhc3NOYW1lOlwiay1ncmlkLWRlbGV0ZVwiLGljb25DbGFzczpcImstaWNvblwifSxlZGl0Ont0ZXh0OlwiRWRpdFwiLGltYWdlQ2xhc3M6XCJrLWVkaXRcIixjbGFzc05hbWU6XCJrLWdyaWQtZWRpdFwiLGljb25DbGFzczpcImstaWNvblwifSx1cGRhdGU6e3RleHQ6XCJVcGRhdGVcIixpbWFnZUNsYXNzOlwiay11cGRhdGVcIixjbGFzc05hbWU6XCJrLXByaW1hcnkgay1ncmlkLXVwZGF0ZVwiLGljb25DbGFzczpcImstaWNvblwifSxjYW5jZWxlZGl0Ont0ZXh0OlwiQ2FuY2VsXCIsaW1hZ2VDbGFzczpcImstY2FuY2VsXCIsY2xhc3NOYW1lOlwiay1ncmlkLWNhbmNlbFwiLGljb25DbGFzczpcImstaWNvblwifSxleGNlbDp7dGV4dDpcIkV4cG9ydCB0byBFeGNlbFwiLGltYWdlQ2xhc3M6XCJrLWktZXhjZWxcIixjbGFzc05hbWU6XCJrLWdyaWQtZXhjZWxcIixpY29uQ2xhc3M6XCJrLWljb25cIn0scGRmOnt0ZXh0OlwiRXhwb3J0IHRvIFBERlwiLGltYWdlQ2xhc3M6XCJrLWktcGRmXCIsY2xhc3NOYW1lOlwiay1ncmlkLXBkZlwiLGljb25DbGFzczpcImstaWNvblwifX0sU249dXQudWkuRGF0YUJvdW5kV2lkZ2V0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4saSl7dmFyIHI9dGhpcztuPXh0KG4pP3tkYXRhU291cmNlOm59Om4sdnQuZm4uaW5pdC5jYWxsKHIsdCxuKSxpJiYoci5fZXZlbnRzPWkpLHluPXV0LnN1cHBvcnQuaXNSdGwodCksci5fZWxlbWVudCgpLHIuX2FyaWEoKSxyLl9jb2x1bW5zKHIub3B0aW9ucy5jb2x1bW5zKSxyLl9kYXRhU291cmNlKCksci5fdGJvZHkoKSxyLl9wYWdlYWJsZSgpLHIuX3RoZWFkKCksci5fZ3JvdXBhYmxlKCksci5fdG9vbGJhcigpLHIuX3NldENvbnRlbnRIZWlnaHQoKSxyLl90ZW1wbGF0ZXMoKSxyLl9uYXZpZ2F0YWJsZSgpLHIuX3NlbGVjdGFibGUoKSxyLl9kZXRhaWxzKCksci5fZWRpdGFibGUoKSxyLl9hdHRhY2hDdXN0b21Db21tYW5kc0V2ZW50KCksci5vcHRpb25zLmF1dG9CaW5kP3IuZGF0YVNvdXJjZS5mZXRjaCgpOnIuX2Zvb3RlcigpLHIubG9ja2VkQ29udGVudCYmKHIud3JhcHBlci5hZGRDbGFzcyhcImstZ3JpZC1sb2NrZWRjb2x1bW5zXCIpLHIuX3Jlc2l6ZUhhbmRsZXI9ZnVuY3Rpb24oKXtyLnJlc2l6ZSgpfSxlKHdpbmRvdykub24oXCJyZXNpemVcIitPdCxyLl9yZXNpemVIYW5kbGVyKSksdXQubm90aWZ5KHIpfSxldmVudHM6W0d0LFwiZGF0YUJpbmRpbmdcIixcImNhbmNlbFwiLFwicGRmRXhwb3J0XCIsS3QsUXQsWHQsVXQsV3QsanQsSHQsTnQsVnQsWXQsZW4sdG4sJHQscXQsbm4scm5dLHNldERhdGFTb3VyY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucy5zY3JvbGxhYmxlO3Qub3B0aW9ucy5kYXRhU291cmNlPWUsdC5fZGF0YVNvdXJjZSgpLHQuX3BhZ2VhYmxlKCksdC5fdGhlYWQoKSxuJiYobi52aXJ0dWFsP3QuY29udGVudC5maW5kKFwiPi5rLXZpcnR1YWwtc2Nyb2xsYWJsZS13cmFwXCIpLnNjcm9sbExlZnQoMCk6dC5jb250ZW50LnNjcm9sbExlZnQoMCkpLHQub3B0aW9ucy5ncm91cGFibGUmJnQuX2dyb3VwYWJsZSgpLHQudmlydHVhbFNjcm9sbGFibGUmJnQudmlydHVhbFNjcm9sbGFibGUuc2V0RGF0YVNvdXJjZSh0Lm9wdGlvbnMuZGF0YVNvdXJjZSksdC5vcHRpb25zLm5hdmlnYXRhYmxlJiZ0Ll9uYXZpZ2F0YWJsZSgpLHQub3B0aW9ucy5zZWxlY3RhYmxlJiZ0Ll9zZWxlY3RhYmxlKCksdC5vcHRpb25zLmF1dG9CaW5kJiZlLmZldGNoKCl9LG9wdGlvbnM6e25hbWU6XCJHcmlkXCIsY29sdW1uczpbXSx0b29sYmFyOm51bGwsYXV0b0JpbmQ6ITAsZmlsdGVyYWJsZTohMSxzY3JvbGxhYmxlOiEwLHNvcnRhYmxlOiExLHNlbGVjdGFibGU6ITEsbmF2aWdhdGFibGU6ITEscGFnZWFibGU6ITEsZWRpdGFibGU6ITEsZ3JvdXBhYmxlOiExLHJvd1RlbXBsYXRlOlwiXCIsYWx0Um93VGVtcGxhdGU6XCJcIixkYXRhU291cmNlOnt9LGhlaWdodDpudWxsLHJlc2l6YWJsZTohMSxyZW9yZGVyYWJsZTohMSxjb2x1bW5NZW51OiExLGRldGFpbFRlbXBsYXRlOm51bGwsY29sdW1uUmVzaXplSGFuZGxlV2lkdGg6Myxtb2JpbGU6XCJcIixtZXNzYWdlczp7ZWRpdGFibGU6e2NhbmNlbERlbGV0ZTpobixjb25maXJtYXRpb246ZG4sY29uZmlybURlbGV0ZTp1bn0sY29tbWFuZHM6e2NyZWF0ZTpDbi5jcmVhdGUudGV4dCxjYW5jZWw6Q24uY2FuY2VsLnRleHQsc2F2ZTpDbi5zYXZlLnRleHQsZGVzdHJveTpDbi5kZXN0cm95LnRleHQsZWRpdDpDbi5lZGl0LnRleHQsdXBkYXRlOkNuLnVwZGF0ZS50ZXh0LGNhbmNlbGVkaXQ6Q24uY2FuY2VsZWRpdC50ZXh0LGV4Y2VsOkNuLmV4Y2VsLnRleHQscGRmOkNuLnBkZi50ZXh0fX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXM7dnQuZm4uZGVzdHJveS5jYWxsKG4pLG4uX3Jlc2l6ZUhhbmRsZXImJmUod2luZG93KS5vZmYoXCJyZXNpemVcIitPdCxuLl9yZXNpemVIYW5kbGVyKSxuLnBhZ2VyJiZuLnBhZ2VyLmVsZW1lbnQmJm4ucGFnZXIuZGVzdHJveSgpLG4ucGFnZXI9bnVsbCxuLmdyb3VwYWJsZSYmbi5ncm91cGFibGUuZWxlbWVudCYmbi5ncm91cGFibGUuZWxlbWVudC5rZW5kb0dyb3VwYWJsZShcImRlc3Ryb3lcIiksbi5ncm91cGFibGU9bnVsbCxuLm9wdGlvbnMucmVvcmRlcmFibGUmJm4ud3JhcHBlci5kYXRhKFwia2VuZG9SZW9yZGVyYWJsZVwiKS5kZXN0cm95KCksbi5zZWxlY3RhYmxlJiZuLnNlbGVjdGFibGUuZWxlbWVudCYmbi5zZWxlY3RhYmxlLmRlc3Ryb3koKSxuLnNlbGVjdGFibGU9bnVsbCxuLnJlc2l6YWJsZSYmKG4ucmVzaXphYmxlLmRlc3Ryb3koKSxuLl9yZXNpemVVc2VyRXZlbnRzJiYobi5fcmVzaXplSGFuZGxlRG9jdW1lbnRDbGlja0hhbmRsZXImJmUoZG9jdW1lbnQpLm9mZihcImNsaWNrXCIsbi5fcmVzaXplSGFuZGxlRG9jdW1lbnRDbGlja0hhbmRsZXIpLG4uX3Jlc2l6ZVVzZXJFdmVudHMuZGVzdHJveSgpLG4uX3Jlc2l6ZVVzZXJFdmVudHM9bnVsbCksbi5yZXNpemFibGU9bnVsbCksbi52aXJ0dWFsU2Nyb2xsYWJsZSYmbi52aXJ0dWFsU2Nyb2xsYWJsZS5lbGVtZW50JiZuLnZpcnR1YWxTY3JvbGxhYmxlLmRlc3Ryb3koKSxuLnZpcnR1YWxTY3JvbGxhYmxlPW51bGwsbi5fZGVzdHJveUNvbHVtbkF0dGFjaG1lbnRzKCksbi5fZGVzdHJveUVkaXRhYmxlKCksbi5kYXRhU291cmNlJiYobi5kYXRhU291cmNlLnVuYmluZChHdCxuLl9yZWZyZXNoSGFuZGxlcikudW5iaW5kKE10LG4uX3Byb2dyZXNzSGFuZGxlcikudW5iaW5kKFB0LG4uX2Vycm9ySGFuZGxlciksbi5fcmVmcmVzaEhhbmRsZXI9bi5fcHJvZ3Jlc3NIYW5kbGVyPW4uX2Vycm9ySGFuZGxlcj1udWxsKSx0PW4uZWxlbWVudC5hZGQobi53cmFwcGVyKS5hZGQobi50YWJsZSkuYWRkKG4udGhlYWQpLmFkZChuLndyYXBwZXIuZmluZChcIj4uay1ncmlkLXRvb2xiYXJcIikpLG4uY29udGVudCYmKHQ9dC5hZGQobi5jb250ZW50KS5hZGQobi5jb250ZW50LmZpbmQoXCI+LmstdmlydHVhbC1zY3JvbGxhYmxlLXdyYXBcIikpKSxuLmxvY2tlZEhlYWRlciYmbi5fcmVtb3ZlTG9ja2VkQ29udGFpbmVycygpLG4ucGFuZSYmbi5wYW5lLmRlc3Ryb3koKSxuLl9kcmFnZ2FibGVJbnN0YW5jZSYmbi5fZHJhZ2dhYmxlSW5zdGFuY2UuZWxlbWVudCYmbi5fZHJhZ2dhYmxlSW5zdGFuY2UuZGVzdHJveSgpLG4uX2RyYWdnYWJsZUluc3RhbmNlPW51bGwsdC5vZmYoT3QpLHV0LmRlc3Ryb3kobi53cmFwcGVyKSxuLnNjcm9sbGFibGVzPW4udGhlYWQ9bi50Ym9keT1uLmVsZW1lbnQ9bi50YWJsZT1uLmNvbnRlbnQ9bi5mb290ZXI9bi53cmFwcGVyPW4uX2dyb3VwYWJsZUNsaWNrSGFuZGxlcj1uLl9zZXRDb250ZW50V2lkdGhIYW5kbGVyPW51bGx9LGdldE9wdGlvbnM6ZnVuY3Rpb24oKXt2YXIgbixpPXd0KCEwLHt9LHRoaXMub3B0aW9ucyk7cmV0dXJuIGkuY29sdW1ucz11dC5kZWVwRXh0ZW5kKFtdLHRoaXMuY29sdW1ucyksbj10aGlzLmRhdGFTb3VyY2UsaS5kYXRhU291cmNlPWUuZXh0ZW5kKCEwLHt9LG4ub3B0aW9ucyksaS5kYXRhU291cmNlLnBhZ2U9bi5wYWdlKCksaS5kYXRhU291cmNlLmZpbHRlcj1uLmZpbHRlcigpLGkuZGF0YVNvdXJjZS5wYWdlU2l6ZT1uLnBhZ2VTaXplKCksaS5kYXRhU291cmNlLnNvcnQ9bi5zb3J0KCksaS5kYXRhU291cmNlLmdyb3VwPW4uZ3JvdXAoKSxpLmRhdGFTb3VyY2UuYWdncmVnYXRlPW4uYWdncmVnYXRlKCksaS4kYW5ndWxhcj10LGl9LHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9dGhpcy5nZXRPcHRpb25zKCk7dXQuZGVlcEV4dGVuZChyLGUpLHQ9dGhpcy53cmFwcGVyLG49dGhpcy5fZXZlbnRzLGk9dGhpcy5lbGVtZW50LHRoaXMuZGVzdHJveSgpLHRoaXMub3B0aW9ucz1udWxsLHRbMF0hPT1pWzBdJiYodC5iZWZvcmUoaSksdC5yZW1vdmUoKSksaS5lbXB0eSgpLHRoaXMuaW5pdChpLHIsbiksdGhpcy5fc2V0RXZlbnRzKHIpfSxpdGVtczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2tlZENvbnRlbnQ/dGhpcy5faXRlbXModGhpcy50Ym9keSkuYWRkKHRoaXMuX2l0ZW1zKHRoaXMubG9ja2VkVGFibGUuY2hpbGRyZW4oXCJ0Ym9keVwiKSkpOnRoaXMuX2l0ZW1zKHRoaXMudGJvZHkpfSxfaXRlbXM6ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2hpbGRyZW4oKS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpO3JldHVybiF0Lmhhc0NsYXNzKFwiay1ncm91cGluZy1yb3dcIikmJiF0Lmhhc0NsYXNzKFwiay1kZXRhaWwtcm93XCIpJiYhdC5oYXNDbGFzcyhcImstZ3JvdXAtZm9vdGVyXCIpfSl9LGRhdGFJdGVtczpmdW5jdGlvbigpe3ZhciBlLHQsbixpPXV0LnVpLkRhdGFCb3VuZFdpZGdldC5mbi5kYXRhSXRlbXMuY2FsbCh0aGlzKTtpZih0aGlzLmxvY2tlZENvbnRlbnQpe2ZvcihlPWkubGVuZ3RoLHQ9QXJyYXkoMiplKSxuPWU7LS1uPj0wOyl0W25dPXRbbitlXT1pW25dO2k9dH1yZXR1cm4gaX0sX2Rlc3Ryb3lDb2x1bW5BdHRhY2htZW50czpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5yZXNpemVIYW5kbGU9bnVsbCx0LnRoZWFkJiYodGhpcy5hbmd1bGFyKFwiY2xlYW51cFwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOnQudGhlYWQuZ2V0KCl9fSksdC50aGVhZC5maW5kKFwidGhcIikuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyksbj10LmRhdGEoXCJrZW5kb0ZpbHRlck1lbnVcIiksaT10LmRhdGEoXCJrZW5kb0NvbHVtblNvcnRlclwiKSxyPXQuZGF0YShcImtlbmRvQ29sdW1uTWVudVwiKTtuJiZuLmRlc3Ryb3koKSxpJiZpLmRlc3Ryb3koKSxyJiZyLmRlc3Ryb3koKX0pKX0sX2F0dGFjaEN1c3RvbUNvbW1hbmRzRXZlbnQ6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT10aGlzLHI9TChpLmNvbHVtbnN8fFtdKTtmb3IodD0wLG49ci5sZW5ndGg7bj50O3QrKyllPXJbdF0uY29tbWFuZCxlJiZsKGksaS53cmFwcGVyLGUpfSxfYXJpYTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudC5hdHRyKFwiaWRcIil8fFwiYXJpYVwiO2UmJih0aGlzLl9jZWxsSWQ9ZStcIl9hY3RpdmVfY2VsbFwiKX0sX2VsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5lbGVtZW50O24uaXMoXCJ0YWJsZVwiKXx8KG49dC5vcHRpb25zLnNjcm9sbGFibGU/dC5lbGVtZW50LmZpbmQoXCI+IC5rLWdyaWQtY29udGVudCA+IHRhYmxlXCIpOnQuZWxlbWVudC5jaGlsZHJlbihcInRhYmxlXCIpLG4ubGVuZ3RofHwobj1lKFwiPHRhYmxlIC8+XCIpLmFwcGVuZFRvKHQuZWxlbWVudCkpKSxibiYmbi5hdHRyKFwiY2VsbHNwYWNpbmdcIiwwKSx0LnRhYmxlPW4uYXR0cihcInJvbGVcIix0Ll9oYXNEZXRhaWxzKCk/XCJ0cmVlZ3JpZFwiOlwiZ3JpZFwiKSx0Ll93cmFwcGVyKCl9LF9jcmVhdGVSZXNpemVIYW5kbGU6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG8sYSxzLGwsYyxkPXRoaXMsdT1kLm9wdGlvbnMuY29sdW1uUmVzaXplSGFuZGxlV2lkdGgsaD1kLm9wdGlvbnMuc2Nyb2xsYWJsZSxwPWQucmVzaXplSGFuZGxlLGY9dGhpcy5fZ3JvdXBzKCk7aWYocCYmZC5sb2NrZWRDb250ZW50JiZwLmRhdGEoXCJ0aFwiKVswXSE9PW5bMF0mJihwLnJlbW92ZSgpLHA9bnVsbCkscHx8KHA9ZC5yZXNpemVIYW5kbGU9ZSgnPGRpdiBjbGFzcz1cImstcmVzaXplLWhhbmRsZVwiPjxkaXYgY2xhc3M9XCJrLXJlc2l6ZS1oYW5kbGUtaW5uZXJcIj48L2Rpdj48L2Rpdj4nKSx0LmFwcGVuZChwKSkseW4paT1uLnBvc2l0aW9uKCkubGVmdCxoJiYoYT1uLmNsb3Nlc3QoXCIuay1ncmlkLWhlYWRlci13cmFwLCAuay1ncmlkLWhlYWRlci1sb2NrZWRcIikscz13bi5tc2llP2Euc2Nyb2xsTGVmdCgpOjAsbD13bi53ZWJraXQ/YVswXS5zY3JvbGxXaWR0aC1hWzBdLm9mZnNldFdpZHRoLWEuc2Nyb2xsTGVmdCgpOjAsYz13bi5tb3ppbGxhP2FbMF0uc2Nyb2xsV2lkdGgtYVswXS5vZmZzZXRXaWR0aC0oYVswXS5zY3JvbGxXaWR0aC1hWzBdLm9mZnNldFdpZHRoLWEuc2Nyb2xsTGVmdCgpKTowLGktPWwtYytzKTtlbHNle2ZvcihpPW5bMF0ub2Zmc2V0V2lkdGgscj1PKG4uY2xvc2VzdChcInRoZWFkXCIpKSxvPTA7ci5sZW5ndGg+byYmcltvXSE9blswXTtvKyspaSs9cltvXS5vZmZzZXRXaWR0aDtmPjAmJihpKz10LmZpbmQoXCIuay1ncm91cC1jZWxsOmZpcnN0XCIpLm91dGVyV2lkdGgoKSpmKX1wLmNzcyh7dG9wOm4ucG9zaXRpb24oKS50b3AsbGVmdDppLXUsaGVpZ2h0Om4ub3V0ZXJIZWlnaHQoKSx3aWR0aDozKnV9KS5kYXRhKFwidGhcIixuKS5zaG93KCl9LF9wb3NpdGlvbkNvbHVtblJlc2l6ZUhhbmRsZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMuY29sdW1uUmVzaXplSGFuZGxlV2lkdGgsaT10LmxvY2tlZEhlYWRlcj90LmxvY2tlZEhlYWRlci5maW5kKFwidGhlYWQ6Zmlyc3RcIik6ZSgpO3QudGhlYWQuYWRkKGkpLm9uKFwibW91c2Vtb3ZlXCIrT3QsXCJ0aFwiLGZ1bmN0aW9uKGkpe3ZhciBvLGEscyxsPWUodGhpcyk7bC5oYXNDbGFzcyhcImstZ3JvdXAtY2VsbFwiKXx8bC5oYXNDbGFzcyhcImstaGllcmFyY2h5LWNlbGxcIil8fChvPWkuY2xpZW50WCxhPWUod2luZG93KS5zY3JvbGxMZWZ0KCkscz1sLm9mZnNldCgpLmxlZnQrKHluPzA6dGhpcy5vZmZzZXRXaWR0aCksbythPnMtbiYmcytuPm8rYT90Ll9jcmVhdGVSZXNpemVIYW5kbGUobC5jbG9zZXN0KFwiZGl2XCIpLGwpOnQucmVzaXplSGFuZGxlP3QucmVzaXplSGFuZGxlLmhpZGUoKTpyKHQud3JhcHBlcixcIlwiKSl9KX0sX3Jlc2l6ZUhhbmRsZURvY3VtZW50Q2xpY2s6ZnVuY3Rpb24odCl7ZSh0LnRhcmdldCkuY2xvc2VzdChcIi5rLWNvbHVtbi1hY3RpdmVcIikubGVuZ3RofHwoZShkb2N1bWVudCkub2ZmKHQpLHRoaXMuX2hpZGVSZXNpemVIYW5kbGUoKSl9LF9oaWRlUmVzaXplSGFuZGxlOmZ1bmN0aW9uKCl7dGhpcy5yZXNpemVIYW5kbGUmJih0aGlzLnJlc2l6ZUhhbmRsZS5kYXRhKFwidGhcIikucmVtb3ZlQ2xhc3MoXCJrLWNvbHVtbi1hY3RpdmVcIiksdGhpcy5sb2NrZWRDb250ZW50JiYhdGhpcy5faXNNb2JpbGU/KHRoaXMucmVzaXplSGFuZGxlLnJlbW92ZSgpLHRoaXMucmVzaXplSGFuZGxlPW51bGwpOnRoaXMucmVzaXplSGFuZGxlLmhpZGUoKSl9LF9wb3NpdGlvbkNvbHVtblJlc2l6ZUhhbmRsZVRvdWNoOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQubG9ja2VkSGVhZGVyP3QubG9ja2VkSGVhZGVyLmZpbmQoXCJ0aGVhZDpmaXJzdFwiKTplKCk7dC5fcmVzaXplVXNlckV2ZW50cz1uZXcgdXQuVXNlckV2ZW50cyhuLmFkZCh0LnRoZWFkKSx7ZmlsdGVyOlwidGg6bm90KC5rLWdyb3VwLWNlbGwpOm5vdCguay1oaWVyYXJjaHktY2VsbClcIix0aHJlc2hvbGQ6MTAsaG9sZDpmdW5jdGlvbihuKXt2YXIgaT1lKG4udGFyZ2V0KTtuLnByZXZlbnREZWZhdWx0KCksaS5hZGRDbGFzcyhcImstY29sdW1uLWFjdGl2ZVwiKSx0Ll9jcmVhdGVSZXNpemVIYW5kbGUoaS5jbG9zZXN0KFwiZGl2XCIpLGkpLHQuX3Jlc2l6ZUhhbmRsZURvY3VtZW50Q2xpY2tIYW5kbGVyfHwodC5fcmVzaXplSGFuZGxlRG9jdW1lbnRDbGlja0hhbmRsZXI9VHQodC5fcmVzaXplSGFuZGxlRG9jdW1lbnRDbGljayx0KSksZShkb2N1bWVudCkub24oXCJjbGlja1wiLHQuX3Jlc2l6ZUhhbmRsZURvY3VtZW50Q2xpY2tIYW5kbGVyKX19KX0sX3Jlc2l6YWJsZTpmdW5jdGlvbigpe3ZhciB0LG4saSxvLGEscyxsLGM9dGhpcyxkPWMub3B0aW9ucyx1PXRoaXMuX2lzTW9iaWxlLGg9dXQuc3VwcG9ydC5tb2JpbGVPUz8wOnV0LnN1cHBvcnQuc2Nyb2xsYmFyKCk7ZC5yZXNpemFibGUmJih0PWQuc2Nyb2xsYWJsZT9jLndyYXBwZXIuZmluZChcIi5rLWdyaWQtaGVhZGVyLXdyYXA6Zmlyc3RcIik6Yy53cmFwcGVyLHU/Yy5fcG9zaXRpb25Db2x1bW5SZXNpemVIYW5kbGVUb3VjaCh0KTpjLl9wb3NpdGlvbkNvbHVtblJlc2l6ZUhhbmRsZSh0KSxjLnJlc2l6YWJsZSYmYy5yZXNpemFibGUuZGVzdHJveSgpLGMucmVzaXphYmxlPW5ldyBodC5SZXNpemFibGUodC5hZGQoYy5sb2NrZWRIZWFkZXIpLHtoYW5kbGU6XCIuay1yZXNpemUtaGFuZGxlXCIsaGludDpmdW5jdGlvbih0KXtyZXR1cm4gZSgnPGRpdiBjbGFzcz1cImstZ3JpZC1yZXNpemUtaW5kaWNhdG9yXCIgLz4nKS5jc3Moe2hlaWdodDp0LmRhdGEoXCJ0aFwiKS5vdXRlckhlaWdodCgpK2MudGJvZHkuYXR0cihcImNsaWVudEhlaWdodFwiKX0pfSxzdGFydDpmdW5jdGlvbih0KXt2YXIgaCxwLGYsZztsPWUodC5jdXJyZW50VGFyZ2V0KS5kYXRhKFwidGhcIiksdSYmYy5faGlkZVJlc2l6ZUhhbmRsZSgpLGg9bC5jbG9zZXN0KFwidGFibGVcIikscD1lLmluQXJyYXkobFswXSxPKGwuY2xvc2VzdChcInRoZWFkXCIpKS5maWx0ZXIoXCI6dmlzaWJsZVwiKSksYT1oLnBhcmVudCgpLmhhc0NsYXNzKFwiay1ncmlkLWhlYWRlci1sb2NrZWRcIiksZj1hP2MubG9ja2VkVGFibGU6Yy50YWJsZSxnPWMuZm9vdGVyfHxlKCksYy5mb290ZXImJmMubG9ja2VkQ29udGVudCYmKGc9Yy5mb290ZXIuY2hpbGRyZW4oYT9cIi5rLWdyaWQtZm9vdGVyLWxvY2tlZFwiOlwiLmstZ3JpZC1mb290ZXItd3JhcFwiKSkscihjLndyYXBwZXIsXCJjb2wtcmVzaXplXCIpLHM9ZC5zY3JvbGxhYmxlP2guZmluZChcImNvbDpub3QoLmstZ3JvdXAtY29sKTpub3QoLmstaGllcmFyY2h5LWNvbCk6ZXEoXCIrcCtcIilcIikuYWRkKGYuY2hpbGRyZW4oXCJjb2xncm91cFwiKS5maW5kKFwiY29sOm5vdCguay1ncm91cC1jb2wpOm5vdCguay1oaWVyYXJjaHktY29sKTplcShcIitwK1wiKVwiKSkuYWRkKGcuZmluZChcImNvbGdyb3VwXCIpLmZpbmQoXCJjb2w6bm90KC5rLWdyb3VwLWNvbCk6bm90KC5rLWhpZXJhcmNoeS1jb2wpOmVxKFwiK3ArXCIpXCIpKTpmLmNoaWxkcmVuKFwiY29sZ3JvdXBcIikuZmluZChcImNvbDpub3QoLmstZ3JvdXAtY29sKTpub3QoLmstaGllcmFyY2h5LWNvbCk6ZXEoXCIrcCtcIilcIiksbj10LngubG9jYXRpb24saT1sLm91dGVyV2lkdGgoKSxvPWE/Zi5jaGlsZHJlbihcInRib2R5XCIpLm91dGVyV2lkdGgoKTpjLnRib2R5Lm91dGVyV2lkdGgoKX0scmVzaXplOmZ1bmN0aW9uKHQpe3ZhciByLHUscCxmLGcsbSx2PXluPy0xOjEsXz1pK3QueC5sb2NhdGlvbip2LW4qdjtkLnNjcm9sbGFibGU/KGEmJmMubG9ja2VkRm9vdGVyP3I9Yy5sb2NrZWRGb290ZXIuY2hpbGRyZW4oXCJ0YWJsZVwiKTpjLmZvb3RlciYmKHI9Yy5mb290ZXIuZmluZChcIj4uay1ncmlkLWZvb3Rlci13cmFwPnRhYmxlXCIpKSxyJiZyWzBdfHwocj1lKCkpLHU9bC5jbG9zZXN0KFwidGFibGVcIikscD1hP2MubG9ja2VkVGFibGU6Yy50YWJsZSxmPSExLGc9Yy53cmFwcGVyLndpZHRoKCktaCxtPV8sYSYmby1pK20+ZyYmKG09aSsoZy1vLTIqaCksMD5tJiYobT1fKSxmPSEwKSxtPjEwJiYocy5jc3MoXCJ3aWR0aFwiLG0pLG8mJihtPWY/Zy0yKmg6byt0LngubG9jYXRpb24qdi1uKnYscC5hZGQodSkuYWRkKHIpLmNzcyhcIndpZHRoXCIsbSksYXx8KGMuX2Zvb3RlcldpZHRoPW0pKSkpOl8+MTAmJnMuY3NzKFwid2lkdGhcIixfKX0scmVzaXplZW5kOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLG89bC5vdXRlcldpZHRoKCk7cihjLndyYXBwZXIsXCJcIiksaSE9byYmKHQ9Yy5sb2NrZWRIZWFkZXI/Yy5sb2NrZWRIZWFkZXIuZmluZChcInRoZWFkOmZpcnN0IHRyOmZpcnN0XCIpLmFkZChjLnRoZWFkLmZpbmQoXCJ0cjpmaXJzdFwiKSk6bC5wYXJlbnQoKSxuPWwuYXR0cih1dC5hdHRyKFwiaW5kZXhcIikpLG58fChuPXQuZmluZChcInRoOm5vdCguay1ncm91cC1jZWxsKTpub3QoLmstaGllcmFyY2h5LWNlbGwpXCIpLmluZGV4KGwpKSxlPUwoYy5jb2x1bW5zKVtuXSxlLndpZHRoPW8sYy50cmlnZ2VyKGVuLHtjb2x1bW46ZSxvbGRXaWR0aDppLG5ld1dpZHRoOm99KSxjLl9hcHBseUxvY2tlZENvbnRhaW5lcnNXaWR0aCgpLGMuX3N5bmNMb2NrZWRDb250ZW50SGVpZ2h0KCksYy5fc3luY0xvY2tlZEhlYWRlckhlaWdodCgpKSxjLl9oaWRlUmVzaXplSGFuZGxlKCksbD1udWxsfX0pKX0sX2RyYWdnYWJsZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5vcHRpb25zLnJlb3JkZXJhYmxlJiYodC5fZHJhZ2dhYmxlSW5zdGFuY2UmJnQuX2RyYWdnYWJsZUluc3RhbmNlLmRlc3Ryb3koKSx0Ll9kcmFnZ2FibGVJbnN0YW5jZT10LndyYXBwZXIua2VuZG9EcmFnZ2FibGUoe2dyb3VwOnV0Lmd1aWQoKSxmaWx0ZXI6dC5jb250ZW50P1wiLmstZ3JpZC1oZWFkZXI6Zmlyc3QgXCIrTHQ6XCJ0YWJsZTpmaXJzdD4uay1ncmlkLWhlYWRlciBcIitMdCxkcmFnOmZ1bmN0aW9uKCl7dC5faGlkZVJlc2l6ZUhhbmRsZSgpfSxoaW50OmZ1bmN0aW9uKHQpe3JldHVybiBlKCc8ZGl2IGNsYXNzPVwiay1oZWFkZXIgay1kcmFnLWNsdWVcIiAvPicpLmNzcyh7d2lkdGg6dC53aWR0aCgpLHBhZGRpbmdMZWZ0OnQuY3NzKFwicGFkZGluZ0xlZnRcIikscGFkZGluZ1JpZ2h0OnQuY3NzKFwicGFkZGluZ1JpZ2h0XCIpLGxpbmVIZWlnaHQ6dC5oZWlnaHQoKStcInB4XCIscGFkZGluZ1RvcDp0LmNzcyhcInBhZGRpbmdUb3BcIikscGFkZGluZ0JvdHRvbTp0LmNzcyhcInBhZGRpbmdCb3R0b21cIil9KS5odG1sKHQuYXR0cih1dC5hdHRyKFwidGl0bGVcIikpfHx0LmF0dHIodXQuYXR0cihcImZpZWxkXCIpKXx8dC50ZXh0KCkpLnByZXBlbmQoJzxzcGFuIGNsYXNzPVwiay1pY29uIGstZHJhZy1zdGF0dXMgay1kZW5pZWRcIiAvPicpfX0pLmRhdGEoXCJrZW5kb0RyYWdnYWJsZVwiKSl9LF9yZW9yZGVyYWJsZTpmdW5jdGlvbigpe3ZhciB0LG49dGhpcztuLm9wdGlvbnMucmVvcmRlcmFibGUmJihuLndyYXBwZXIuZGF0YShcImtlbmRvUmVvcmRlcmFibGVcIikmJm4ud3JhcHBlci5kYXRhKFwia2VuZG9SZW9yZGVyYWJsZVwiKS5kZXN0cm95KCksdD1mdW5jdGlvbihlLHQsaSl7dmFyIHI9ZVt0XSxvPWVbaV0sYT1kKHIsbi5jb2x1bW5zKTtyZXR1cm4gZT1hP2EuY29sdW1uczpuLmNvbHVtbnMsQ3QobyxlKX0sbi53cmFwcGVyLmtlbmRvUmVvcmRlcmFibGUoe2RyYWdnYWJsZTpuLl9kcmFnZ2FibGVJbnN0YW5jZSxkcmFnT3ZlckNvbnRhaW5lcnM6ZnVuY3Rpb24oZSxpKXt2YXIgcj1DKG4uY29sdW1ucyk7cmV0dXJuIHJbZV0ubG9ja2FibGUhPT0hMSYmdChyLGUsaSk+LTF9LGluU2FtZUNvbnRhaW5lcjpmdW5jdGlvbihpKXtyZXR1cm4gZShpLnNvdXJjZSkucGFyZW50KClbMF09PT1lKGkudGFyZ2V0KS5wYXJlbnQoKVswXSYmdChDKG4uY29sdW1ucyksaS5zb3VyY2VJbmRleCxpLnRhcmdldEluZGV4KT4tMX0sY2hhbmdlOmZ1bmN0aW9uKGUpe3ZhciBpPUMobi5jb2x1bW5zKSxyPWlbZS5vbGRJbmRleF0sbz10KGksZS5vbGRJbmRleCxlLm5ld0luZGV4KTtuLnRyaWdnZXIodG4se25ld0luZGV4Om8sb2xkSW5kZXg6Q3QocixpKSxjb2x1bW46cn0pLG4ucmVvcmRlckNvbHVtbihvLHIsXCJiZWZvcmVcIj09PWUucG9zaXRpb24pfX0pKX0sX3Jlb3JkZXJIZWFkZXI6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxsLGM9dGhpcyxkPXgoZVswXSxjLmNvbHVtbnMpLHU9eCh0LGMuY29sdW1ucyksaD1bXTtmb3IoaT0wO2UubGVuZ3RoPmk7aSsrKWVbaV0uY29sdW1ucyYmKGg9aC5jb25jYXQoZVtpXS5jb2x1bW5zKSk7cj1zKGMubG9ja2VkSGVhZGVyLGMudGhlYWQsXCJ0cjplcShcIitkLnJvdytcIik+dGguay1oZWFkZXI6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpLG89SShlKS5sZW5ndGgsbD1JKFt0XSkubGVuZ3RoLGgubGVuZ3RoPyhvPjAmJjA9PT1sP3YoZSx0LGgsYy5jb2x1bW5zLGMubG9ja2VkSGVhZGVyLmZpbmQoXCJ0aGVhZFwiKSxjLnRoZWFkLHRoaXMuX2dyb3VwcygpKTowPT09byYmbD4wJiZ2KGUsdCxoLGMuY29sdW1ucyxjLnRoZWFkLGMubG9ja2VkSGVhZGVyLmZpbmQoXCJ0aGVhZFwiKSx0aGlzLl9ncm91cHMoKSksdD1rKGMuY29sdW1ucyx0LGVbMF0sbiksdCYmYy5fcmVvcmRlckhlYWRlcihoLHQsbikpOm8hPT1sJiZtKHJbZC5jZWxsXSxjLmNvbHVtbnMsbyksYShyLGQuY2VsbCx1LmNlbGwsbixlLmxlbmd0aCl9LF9yZW9yZGVyQ29udGVudDpmdW5jdGlvbih0LG4saSl7dmFyIHIsbyxsLGMsZD10aGlzLHU9ZSgpLGg9dFswXSxwPUN0KGgsTChkLmNvbHVtbnMpKSxmPUN0KG4sTChkLmNvbHVtbnMpKSxnPUN0KGgsQihkLmNvbHVtbnMpKSxtPUN0KG4sQihkLmNvbHVtbnMpKSx2PUkoZC5jb2x1bW5zKS5sZW5ndGgsXz0hIW4ubG9ja2VkLHk9ZC5mb290ZXJ8fGQud3JhcHBlci5maW5kKFwiLmstZ3JpZC1mb290ZXJcIiksdz1yPW07Zm9yKG4uaGlkZGVuJiYoXz8obT1kLmxvY2tlZFRhYmxlLmZpbmQoXCJjb2xncm91cFwiKSx3PWQubG9ja2VkSGVhZGVyLmZpbmQoXCJjb2xncm91cFwiKSxyPWUoZC5sb2NrZWRGb290ZXIpLmZpbmQoXCI+dGFibGU+Y29sZ3JvdXBcIikpOihtPWQudGJvZHkucHJldigpLHc9ZC50aGVhZC5wcmV2KCkscj15LmZpbmQoXCIuay1ncmlkLWZvb3Rlci13cmFwXCIpLmZpbmQoXCI+dGFibGU+Y29sZ3JvdXBcIikpKSxkLl9oYXNGaWx0ZXJSb3coKSYmYShkLndyYXBwZXIuZmluZChcIi5rLWZpbHRlci1yb3cgdGg6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpLHAsZixpLHQubGVuZ3RoKSxhKHMoZC5sb2NrZWRIZWFkZXIsZC50aGVhZC5wcmV2KCksXCJjb2w6bm90KC5rLWdyb3VwLWNvbCwuay1oaWVyYXJjaHktY29sKVwiKSxnLHcsaSx0Lmxlbmd0aCksZC5vcHRpb25zLnNjcm9sbGFibGUmJmEocyhkLmxvY2tlZFRhYmxlLGQudGJvZHkucHJldigpLFwiY29sOm5vdCguay1ncm91cC1jb2wsLmstaGllcmFyY2h5LWNvbClcIiksZyxtLGksdC5sZW5ndGgpLHkmJnkubGVuZ3RoJiYoYShzKGQubG9ja2VkRm9vdGVyLHkuZmluZChcIi5rLWdyaWQtZm9vdGVyLXdyYXBcIiksXCI+dGFibGU+Y29sZ3JvdXA+Y29sOm5vdCguay1ncm91cC1jb2wsLmstaGllcmFyY2h5LWNvbClcIiksZyxyLGksdC5sZW5ndGgpLGEoeS5maW5kKFwiLmstZm9vdGVyLXRlbXBsYXRlPnRkOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKSxwLGYsaSx0Lmxlbmd0aCkpLG89ZC50Ym9keS5jaGlsZHJlbihcIjpub3QoLmstZ3JvdXBpbmctcm93LC5rLWRldGFpbC1yb3cpXCIpLGQubG9ja2VkVGFibGUmJih2PmY/cD49diYmWChkLmxvY2tlZFRhYmxlLmZpbmQoXCI+dGJvZHk+dHIuay1ncm91cGluZy1yb3dcIiksZC50YWJsZS5maW5kKFwiPnRib2R5PnRyLmstZ3JvdXBpbmctcm93XCIpLHQubGVuZ3RoKTp2PnAmJlgoZC50YWJsZS5maW5kKFwiPnRib2R5PnRyLmstZ3JvdXBpbmctcm93XCIpLGQubG9ja2VkVGFibGUuZmluZChcIj50Ym9keT50ci5rLWdyb3VwaW5nLXJvd1wiKSx0Lmxlbmd0aCksdT1kLmxvY2tlZFRhYmxlLmZpbmQoXCI+dGJvZHk+dHI6bm90KC5rLWdyb3VwaW5nLXJvdywuay1kZXRhaWwtcm93KVwiKSksbD0wLGM9by5sZW5ndGg7Yz5sO2wrPTEpYShzKHVbbF0sb1tsXSxcIj50ZDpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIikscCxmLGksdC5sZW5ndGgpfSxyZW9yZGVyQ29sdW1uOmZ1bmN0aW9uKGUsbixpKXt2YXIgcixvLGE9dGhpcyxzPWQobixhLmNvbHVtbnMpLGw9cz9zLmNvbHVtbnM6YS5jb2x1bW5zLGM9Q3QobixsKSx1PWxbZV0saD0hIXUubG9ja2VkLHA9SShhLmNvbHVtbnMpLmxlbmd0aDtjIT09ZSYmKG4ubG9ja2VkfHwhaHx8MSE9eihhLmNvbHVtbnMpLmxlbmd0aCkmJighbi5sb2NrZWR8fGh8fDEhPXApJiYoYS5faGlkZVJlc2l6ZUhhbmRsZSgpLGk9PT10JiYoaT1jPmUpLG89W25dLGEuX3Jlb3JkZXJIZWFkZXIobyx1LGkpLGEubG9ja2VkSGVhZGVyJiYoTShhLnRoZWFkKSxNKGEubG9ja2VkSGVhZGVyKSksdS5jb2x1bW5zJiYodT1MKHUuY29sdW1ucyksdT11W2k/MDp1Lmxlbmd0aC0xXSksbi5jb2x1bW5zJiYobz1MKG4uY29sdW1ucykpLGEuX3Jlb3JkZXJDb250ZW50KG8sdSxpKSxyPSEhbi5sb2NrZWQscj1yIT1oLG4ubG9ja2VkPWgsbC5zcGxpY2UoaT9lOmUrMSwwLG4pLGwuc3BsaWNlKGU+Yz9jOmMrMSwxKSxhLl90ZW1wbGF0ZXMoKSxhLl91cGRhdGVDb2x1bW5DZWxsSW5kZXgoKSxhLl91cGRhdGVUYWJsZXNXaWR0aCgpLGEuX2FwcGx5TG9ja2VkQ29udGFpbmVyc1dpZHRoKCksYS5fc3luY0xvY2tlZEhlYWRlckhlaWdodCgpLGEuX3N5bmNMb2NrZWRDb250ZW50SGVpZ2h0KCksYS5fdXBkYXRlRmlyc3RDb2x1bW5DbGFzcygpLHImJihoP2EudHJpZ2dlcihubix7Y29sdW1uOm59KTphLnRyaWdnZXIocm4se2NvbHVtbjpufSkpKX0sX3VwZGF0ZUNvbHVtbkNlbGxJbmRleDpmdW5jdGlvbigpe3ZhciBlLHQ9MDt0aGlzLmxvY2tlZEhlYWRlciYmKGU9dGhpcy5sb2NrZWRIZWFkZXIuZmluZChcInRoZWFkXCIpLHQ9XyhlLEkodGhpcy5jb2x1bW5zKSkpLF8odGhpcy50aGVhZCx6KHRoaXMuY29sdW1ucyksdCl9LGxvY2tDb2x1bW46ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLmNvbHVtbnM7ZT1cIm51bWJlclwiPT10eXBlb2YgZT9uW2VdOmt0KG4sZnVuY3Rpb24odCl7cmV0dXJuIHQuZmllbGQ9PT1lfSlbMF0sIWV8fGUubG9ja2VkfHxlLmhpZGRlbnx8KHQ9SShuKS5sZW5ndGgtMSx0aGlzLnJlb3JkZXJDb2x1bW4odCxlLCExKSl9LHVubG9ja0NvbHVtbjpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMuY29sdW1ucztlPVwibnVtYmVyXCI9PXR5cGVvZiBlP25bZV06a3QobixmdW5jdGlvbih0KXtyZXR1cm4gdC5maWVsZD09PWV9KVswXSxlJiZlLmxvY2tlZCYmIWUuaGlkZGVuJiYodD1JKG4pLmxlbmd0aCx0aGlzLnJlb3JkZXJDb2x1bW4odCxlLCEwKSl9LGNlbGxJbmRleDpmdW5jdGlvbih0KXt2YXIgbj0wO3JldHVybiB0aGlzLmxvY2tlZFRhYmxlJiYhZS5jb250YWlucyh0aGlzLmxvY2tlZFRhYmxlWzBdLHRbMF0pJiYobj1MKEkodGhpcy5jb2x1bW5zKSkubGVuZ3RoKSxlKHQpLnBhcmVudCgpLmNoaWxkcmVuKFwidGQ6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpLmluZGV4KHQpK259LF9tb2RlbEZvckNvbnRhaW5lcjpmdW5jdGlvbih0KXt0PWUodCksdC5pcyhcInRyXCIpfHxcInBvcHVwXCI9PT10aGlzLl9lZGl0TW9kZSgpfHwodD10LmNsb3Nlc3QoXCJ0clwiKSk7dmFyIG49dC5hdHRyKHV0LmF0dHIoXCJ1aWRcIikpO3JldHVybiB0aGlzLmRhdGFTb3VyY2UuZ2V0QnlVaWQobil9LF9lZGl0YWJsZTpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4uc2VsZWN0YWJsZSYmbi5zZWxlY3RhYmxlLm9wdGlvbnMubXVsdGlwbGUscj1uLm9wdGlvbnMuZWRpdGFibGUsbz1mdW5jdGlvbigpe3ZhciB0PW10KCksaT1uLl9lZGl0Q29udGFpbmVyOyFpfHxlLmNvbnRhaW5zKGlbMF0sdCl8fGlbMF09PT10fHxlKHQpLmNsb3Nlc3QoXCIuay1hbmltYXRpb24tY29udGFpbmVyXCIpLmxlbmd0aHx8bi5lZGl0YWJsZS5lbmQoKSYmbi5jbG9zZUNlbGwoKX07ciYmKHQ9bi5fZWRpdE1vZGUoKSxcImluY2VsbFwiPT09dD9yLnVwZGF0ZSE9PSExJiZuLndyYXBwZXIub24ob24rT3QsXCJ0cjpub3QoLmstZ3JvdXBpbmctcm93KSA+IHRkXCIsZnVuY3Rpb24odCl7dmFyIHI9ZSh0aGlzKSxvPW4ubG9ja2VkVGFibGUmJnIuY2xvc2VzdChcInRhYmxlXCIpWzBdPT09bi5sb2NrZWRUYWJsZVswXTtyLmhhc0NsYXNzKFwiay1oaWVyYXJjaHktY2VsbFwiKXx8ci5oYXNDbGFzcyhcImstZGV0YWlsLWNlbGxcIil8fHIuaGFzQ2xhc3MoXCJrLWdyb3VwLWNlbGxcIil8fHIuaGFzQ2xhc3MoXCJrLWVkaXQtY2VsbFwiKXx8ci5oYXMoXCJhLmstZ3JpZC1kZWxldGVcIikubGVuZ3RofHxyLmhhcyhcImJ1dHRvbi5rLWdyaWQtZGVsZXRlXCIpLmxlbmd0aHx8ci5jbG9zZXN0KFwidGJvZHlcIilbMF0hPT1uLnRib2R5WzBdJiYhb3x8ZSh0LnRhcmdldCkuaXMoXCI6aW5wdXRcIil8fChuLmVkaXRhYmxlP24uZWRpdGFibGUuZW5kKCkmJihpJiZlKG10KCkpLmJsdXIoKSxuLmNsb3NlQ2VsbCgpLG4uZWRpdENlbGwocikpOm4uZWRpdENlbGwocikpfSkub24oXCJmb2N1c2luXCIrT3QsZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQobi50aW1lciksbi50aW1lcj1udWxsfSkub24oXCJmb2N1c291dFwiK090LGZ1bmN0aW9uKCl7bi50aW1lcj1zZXRUaW1lb3V0KG8sMSl9KTpyLnVwZGF0ZSE9PSExJiZuLndyYXBwZXIub24ob24rT3QsXCJ0Ym9keT50cjpub3QoLmstZGV0YWlsLXJvdywuay1ncm91cGluZy1yb3cpOnZpc2libGUgYS5rLWdyaWQtZWRpdFwiLGZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSxuLmVkaXRSb3coZSh0aGlzKS5jbG9zZXN0KFwidHJcIikpfSksci5kZXN0cm95IT09ITE/bi53cmFwcGVyLm9uKG9uK090LFwidGJvZHk+dHI6bm90KC5rLWRldGFpbC1yb3csLmstZ3JvdXBpbmctcm93KTp2aXNpYmxlIC5rLWdyaWQtZGVsZXRlXCIsZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCksbi5yZW1vdmVSb3coZSh0aGlzKS5jbG9zZXN0KFwidHJcIikpfSk6bi53cmFwcGVyLm9uKG9uK090LFwidGJvZHk+dHI6bm90KC5rLWRldGFpbC1yb3csLmstZ3JvdXBpbmctcm93KTp2aXNpYmxlIGJ1dHRvbi5rLWdyaWQtZGVsZXRlXCIsZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKSxuLl9jb25maXJtYXRpb24oKXx8ZS5wcmV2ZW50RGVmYXVsdCgpfSkpfSxlZGl0Q2VsbDpmdW5jdGlvbih0KXt2YXIgbixpLHIsbzt0PWUodCksbj10aGlzLGk9TChuLmNvbHVtbnMpW24uY2VsbEluZGV4KHQpXSxyPW4uX21vZGVsRm9yQ29udGFpbmVyKHQpLG4uY2xvc2VDZWxsKCksIXJ8fHIuZWRpdGFibGUmJiFyLmVkaXRhYmxlKGkuZmllbGQpfHxpLmNvbW1hbmR8fCFpLmZpZWxkfHwobi5fYXR0YWNoTW9kZWxDaGFuZ2Uociksbi5fZWRpdENvbnRhaW5lcj10LG4uZWRpdGFibGU9dC5hZGRDbGFzcyhcImstZWRpdC1jZWxsXCIpLmtlbmRvRWRpdGFibGUoe2ZpZWxkczp7ZmllbGQ6aS5maWVsZCxmb3JtYXQ6aS5mb3JtYXQsZWRpdG9yOmkuZWRpdG9yLHZhbHVlczppLnZhbHVlc30sbW9kZWw6cix0YXJnZXQ6bixjaGFuZ2U6ZnVuY3Rpb24oZSl7bi50cmlnZ2VyKE50LHt2YWx1ZXM6ZS52YWx1ZXMsY29udGFpbmVyOnQsbW9kZWw6cn0pJiZlLnByZXZlbnREZWZhdWx0KCl9fSkuZGF0YShcImtlbmRvRWRpdGFibGVcIiksbz10LnBhcmVudCgpLmFkZENsYXNzKFwiay1ncmlkLWVkaXQtcm93XCIpLG4ubG9ja2VkQ29udGVudCYmZXQob1swXSxuLl9yZWxhdGVkUm93KG8pLmFkZENsYXNzKFwiay1ncmlkLWVkaXQtcm93XCIpWzBdKSxuLnRyaWdnZXIoSHQse2NvbnRhaW5lcjp0LG1vZGVsOnJ9KSl9LF9hZGp1c3RMb2NrZWRIb3Jpem9udGFsU2Nyb2xsQmFyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50YWJsZSx0PWUucGFyZW50KCksbj1lWzBdLm9mZnNldFdpZHRoPnRbMF0uY2xpZW50V2lkdGg/dXQuc3VwcG9ydC5zY3JvbGxiYXIoKTowO3RoaXMubG9ja2VkQ29udGVudC5oZWlnaHQodC5oZWlnaHQoKS1uKX0sX3N5bmNMb2NrZWRDb250ZW50SGVpZ2h0OmZ1bmN0aW9uKCl7dGhpcy5sb2NrZWRUYWJsZSYmKHRoaXMuX2FkanVzdExvY2tlZEhvcml6b250YWxTY3JvbGxCYXIoKSx0aGlzLl9hZGp1c3RSb3dzSGVpZ2h0KHRoaXMudGFibGUsdGhpcy5sb2NrZWRUYWJsZSkpfSxfc3luY0xvY2tlZEhlYWRlckhlaWdodDpmdW5jdGlvbigpe3ZhciBlLHQ7dGhpcy5sb2NrZWRIZWFkZXImJihlPXRoaXMubG9ja2VkSGVhZGVyLmNoaWxkcmVuKFwidGFibGVcIiksdD10aGlzLnRoZWFkLnBhcmVudCgpLHRoaXMuX2FkanVzdFJvd3NIZWlnaHQoZSx0KSxaKGUsdCkpfSxfc3luY0xvY2tlZEZvb3RlckhlaWdodDpmdW5jdGlvbigpe3RoaXMubG9ja2VkRm9vdGVyJiZ0aGlzLmZvb3RlciYmdGhpcy5mb290ZXIubGVuZ3RoJiZ0aGlzLl9hZGp1c3RSb3dzSGVpZ2h0KHRoaXMubG9ja2VkRm9vdGVyLmNoaWxkcmVuKFwidGFibGVcIiksdGhpcy5mb290ZXIuZmluZChcIi5rLWdyaWQtZm9vdGVyLXdyYXAgPiB0YWJsZVwiKSl9LF9kZXN0cm95RWRpdGFibGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZnVuY3Rpb24oKXtpZihlLmVkaXRhYmxlKXt2YXIgdD1lLmVkaXRWaWV3P2UuZWRpdFZpZXcuZWxlbWVudDplLl9lZGl0Q29udGFpbmVyO3QmJih0Lm9mZihvbitPdCxcImEuay1ncmlkLWNhbmNlbFwiLGUuX2VkaXRDYW5jZWxDbGlja0hhbmRsZXIpLHQub2ZmKG9uK090LFwiYS5rLWdyaWQtdXBkYXRlXCIsZS5fZWRpdFVwZGF0ZUNsaWNrSGFuZGxlcikpLGUuX2RldGFjaE1vZGVsQ2hhbmdlKCksZS5lZGl0YWJsZS5kZXN0cm95KCksZS5lZGl0YWJsZT1udWxsLGUuX2VkaXRDb250YWluZXI9bnVsbCxlLl9kZXN0cm95RWRpdFZpZXcoKX19O2UuZWRpdGFibGUmJihcInBvcHVwXCIhPT1lLl9lZGl0TW9kZSgpfHxlLl9pc01vYmlsZT90KCk6ZS5fZWRpdENvbnRhaW5lci5kYXRhKFwia2VuZG9XaW5kb3dcIikuYmluZChcImRlYWN0aXZhdGVcIix0KS5jbG9zZSgpKSxlLl9hY3Rpb25TaGVldCYmKGUuX2FjdGlvblNoZWV0LmRlc3Ryb3koKSxlLl9hY3Rpb25TaGVldD1udWxsKX0sX2Rlc3Ryb3lFZGl0VmlldzpmdW5jdGlvbigpe3RoaXMuZWRpdFZpZXcmJih0aGlzLmVkaXRWaWV3LnB1cmdlKCksdGhpcy5lZGl0Vmlldz1udWxsLHRoaXMucGFuZS5uYXZpZ2F0ZShcIlwiKSl9LF9hdHRhY2hNb2RlbENoYW5nZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuX21vZGVsQ2hhbmdlSGFuZGxlcj1mdW5jdGlvbihlKXt0Ll9tb2RlbENoYW5nZSh7ZmllbGQ6ZS5maWVsZCxtb2RlbDp0aGlzfSl9LGUuYmluZChcImNoYW5nZVwiLHQuX21vZGVsQ2hhbmdlSGFuZGxlcil9LF9kZXRhY2hNb2RlbENoYW5nZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl9lZGl0Q29udGFpbmVyLG49ZS5fbW9kZWxGb3JDb250YWluZXIodCk7biYmbi51bmJpbmQoR3QsZS5fbW9kZWxDaGFuZ2VIYW5kbGVyKX0sY2xvc2VDZWxsOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvLGE9dGhpcyxzPWEuX2VkaXRDb250YWluZXI7cyYmKG49cy5jbG9zZXN0KFwidHJcIikuYXR0cih1dC5hdHRyKFwidWlkXCIpKSxvPWEuZGF0YVNvdXJjZS5nZXRCeVVpZChuKSx0JiZhLnRyaWdnZXIoXCJjYW5jZWxcIix7Y29udGFpbmVyOnMsbW9kZWw6b30pfHwocy5yZW1vdmVDbGFzcyhcImstZWRpdC1jZWxsXCIpLGk9TChhLmNvbHVtbnMpW2EuY2VsbEluZGV4KHMpXSxyPXMucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJrLWdyaWQtZWRpdC1yb3dcIiksYS5fZGVzdHJveUVkaXRhYmxlKCksYS5fZGlzcGxheUNlbGwocyxpLG8pLHMuaGFzQ2xhc3MoXCJrLWRpcnR5LWNlbGxcIikmJmUoJzxzcGFuIGNsYXNzPVwiay1kaXJ0eVwiLz4nKS5wcmVwZW5kVG8ocyksYS5sb2NrZWRDb250ZW50JiZldChyLmNzcyhcImhlaWdodFwiLFwiXCIpWzBdLGEuX3JlbGF0ZWRSb3cocikuY3NzKFwiaGVpZ2h0XCIsXCJcIilbMF0pKSl9LF9kaXNwbGF5Q2VsbDpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcyxyPXtzdG9yYWdlOnt9LGNvdW50OjB9LG89d3Qoe30sdXQuVGVtcGxhdGUsaS5vcHRpb25zLnRlbXBsYXRlU2V0dGluZ3MpLGE9dXQudGVtcGxhdGUoaS5fY2VsbFRtcGwodCxyKSxvKTtyLmNvdW50PjAmJihhPVR0KGEsci5zdG9yYWdlKSksZS5lbXB0eSgpLmh0bWwoYShuKSksaS5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmUsZGF0YTpbe2RhdGFJdGVtOm59XX19KX0scmVtb3ZlUm93OmZ1bmN0aW9uKGUpe3RoaXMuX2NvbmZpcm1hdGlvbihlKSYmdGhpcy5fcmVtb3ZlUm93KGUpfSxfcmVtb3ZlUm93OmZ1bmN0aW9uKHQpe3ZhciBuLGk9dGhpcyxyPWkuX2VkaXRNb2RlKCk7XCJpbmNlbGxcIiE9PXImJmkuY2FuY2VsUm93KCksdD1lKHQpLmhpZGUoKSxuPWkuX21vZGVsRm9yQ29udGFpbmVyKHQpLG4mJiFpLnRyaWdnZXIoVnQse3Jvdzp0LG1vZGVsOm59KT8oaS5kYXRhU291cmNlLnJlbW92ZShuKSwoXCJpbmxpbmVcIj09PXJ8fFwicG9wdXBcIj09PXIpJiZpLmRhdGFTb3VyY2Uuc3luYygpKTpcImluY2VsbFwiPT09ciYmaS5fZGVzdHJveUVkaXRhYmxlKCl9LF9lZGl0TW9kZTpmdW5jdGlvbigpe3ZhciBlPVwiaW5jZWxsXCIsdD10aGlzLm9wdGlvbnMuZWRpdGFibGU7cmV0dXJuIHQhPT0hMCYmKGU9XCJzdHJpbmdcIj09dHlwZW9mIHQ/dDp0Lm1vZGV8fGUpLGV9LGVkaXRSb3c6ZnVuY3Rpb24obil7dmFyIGkscixvLGE9dGhpcztuIGluc3RhbmNlb2YgdXQuZGF0YS5PYnNlcnZhYmxlT2JqZWN0P2k9bjoobj1lKG4pLGk9YS5fbW9kZWxGb3JDb250YWluZXIobikpLHI9YS5fZWRpdE1vZGUoKSxhLmNhbmNlbFJvdygpLGkmJihhLl9hdHRhY2hNb2RlbENoYW5nZShpKSxcInBvcHVwXCI9PT1yP2EuX2NyZWF0ZVBvcHVwRWRpdG9yKGkpOlwiaW5saW5lXCI9PT1yP2EuX2NyZWF0ZUlubGluZUVkaXRvcihuLGkpOlwiaW5jZWxsXCI9PT1yJiZlKG4pLmNoaWxkcmVuKEl0KS5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49ZSh0aGlzKSxyPUwoYS5jb2x1bW5zKVtuLmluZGV4KCldO3JldHVybiBpPWEuX21vZGVsRm9yQ29udGFpbmVyKG4pLGkmJighaS5lZGl0YWJsZXx8aS5lZGl0YWJsZShyLmZpZWxkKSkmJnIuZmllbGQ/KGEuZWRpdENlbGwobiksITEpOnR9KSxvPWEuZWRpdFZpZXc/YS5lZGl0Vmlldy5lbGVtZW50OmEuX2VkaXRDb250YWluZXIsbyYmKHRoaXMuX2VkaXRDYW5jZWxDbGlja0hhbmRsZXJ8fCh0aGlzLl9lZGl0Q2FuY2VsQ2xpY2tIYW5kbGVyPVR0KHRoaXMuX2VkaXRDYW5jZWxDbGljayx0aGlzKSksby5vbihvbitPdCxcImEuay1ncmlkLWNhbmNlbFwiLHRoaXMuX2VkaXRDYW5jZWxDbGlja0hhbmRsZXIpLHRoaXMuX2VkaXRVcGRhdGVDbGlja0hhbmRsZXJ8fCh0aGlzLl9lZGl0VXBkYXRlQ2xpY2tIYW5kbGVyPVR0KHRoaXMuX2VkaXRVcGRhdGVDbGljayx0aGlzKSksby5vbihvbitPdCxcImEuay1ncmlkLXVwZGF0ZVwiLHRoaXMuX2VkaXRVcGRhdGVDbGlja0hhbmRsZXIpKSlcbn0sX2VkaXRVcGRhdGVDbGljazpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLnNhdmVSb3coKX0sX2VkaXRDYW5jZWxDbGljazpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXMscj1pLm9wdGlvbnMubmF2aWdhdGFibGUsbz1pLmVkaXRhYmxlLm9wdGlvbnMubW9kZWwsYT1pLmVkaXRWaWV3P2kuZWRpdFZpZXcuZWxlbWVudDppLl9lZGl0Q29udGFpbmVyO3QucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpLGkudHJpZ2dlcihcImNhbmNlbFwiLHtjb250YWluZXI6YSxtb2RlbDpvfSl8fChuPWkuaXRlbXMoKS5pbmRleChlKGkuY3VycmVudCgpKS5wYXJlbnQoKSksaS5jYW5jZWxSb3coKSxyJiYoaS5jdXJyZW50KGkuaXRlbXMoKS5lcShuKS5jaGlsZHJlbigpLmZpbHRlcihSdCkuZmlyc3QoKSksbnQoaS50YWJsZSwhMCkpKX0sX2NyZWF0ZVBvcHVwRWRpdG9yOmZ1bmN0aW9uKG4pe3ZhciBpLHIsbyxhLHMsbCxjLGQsdSxoLHAsZj10aGlzLGc9XCI8ZGl2IFwiK3V0LmF0dHIoXCJ1aWRcIikrJz1cIicrbi51aWQrJ1wiIGNsYXNzPVwiay1wb3B1cC1lZGl0LWZvcm0nKyhmLl9pc01vYmlsZT9cIiBrLW1vYmlsZS1saXN0XCI6XCJcIikrJ1wiPjxkaXYgY2xhc3M9XCJrLWVkaXQtZm9ybS1jb250YWluZXJcIj4nLG09W10sdj1MKGYuY29sdW1ucyksXz1mLm9wdGlvbnMuZWRpdGFibGUseT1fLnRlbXBsYXRlLHc9eXQoXyk/Xy53aW5kb3c6e30sYj13dCh7fSx1dC5UZW1wbGF0ZSxmLm9wdGlvbnMudGVtcGxhdGVTZXR0aW5ncyk7aWYodz13fHx7fSx5KWZvcih0eXBlb2YgeT09PWNuJiYoeT13aW5kb3cudW5lc2NhcGUoeSkpLGcrPXV0LnRlbXBsYXRlKHksYikobiksbz0wLGE9di5sZW5ndGg7YT5vO28rKylpPXZbb10saS5jb21tYW5kJiYoZD10dChpLmNvbW1hbmQsXCJlZGl0XCIpLGQmJihyPWQpKTtlbHNlIGZvcihvPTAsYT12Lmxlbmd0aDthPm87bysrKWk9dltvXSxpLmNvbW1hbmQ/aS5jb21tYW5kJiYoZD10dChpLmNvbW1hbmQsXCJlZGl0XCIpLGQmJihyPWQpKTooZys9JzxkaXYgY2xhc3M9XCJrLWVkaXQtbGFiZWxcIj48bGFiZWwgZm9yPVwiJytpLmZpZWxkKydcIj4nKyhpLnRpdGxlfHxpLmZpZWxkfHxcIlwiKStcIjwvbGFiZWw+PC9kaXY+XCIsbi5lZGl0YWJsZSYmIW4uZWRpdGFibGUoaS5maWVsZCl8fCFpLmZpZWxkPyhoPXtzdG9yYWdlOnt9LGNvdW50OjB9LHM9dXQudGVtcGxhdGUoZi5fY2VsbFRtcGwoaSxoKSxiKSxoLmNvdW50PjAmJihzPVR0KHMsaC5zdG9yYWdlKSksZys9JzxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj4nK3MobikrXCI8L2Rpdj5cIik6KG0ucHVzaCh7ZmllbGQ6aS5maWVsZCxmb3JtYXQ6aS5mb3JtYXQsZWRpdG9yOmkuZWRpdG9yLHZhbHVlczppLnZhbHVlc30pLGcrPVwiPGRpdiBcIit1dC5hdHRyKFwiY29udGFpbmVyLWZvclwiKSsnPVwiJytpLmZpZWxkKydcIiBjbGFzcz1cImstZWRpdC1maWVsZFwiPjwvZGl2PicpKTtyJiZ5dChyKSYmKHIudGV4dCYmeXQoci50ZXh0KSYmKGw9ci50ZXh0LnVwZGF0ZSxjPXIudGV4dC5jYW5jZWwpLHIuYXR0ciYmKHU9ci5hdHRyKSksZi5faXNNb2JpbGU/KGcrPVwiPC9kaXY+PC9kaXY+XCIsZi5lZGl0Vmlldz1mLnBhbmUuYXBwZW5kKFwiPGRpdiBkYXRhLVwiK3V0Lm5zKydyb2xlPVwidmlld1wiIGRhdGEtJyt1dC5ucysnaW5pdC13aWRnZXRzPVwiZmFsc2VcIiBjbGFzcz1cImstZ3JpZC1lZGl0LWZvcm1cIj48ZGl2IGRhdGEtJyt1dC5ucysncm9sZT1cImhlYWRlclwiIGNsYXNzPVwiay1oZWFkZXJcIj4nK2YuX2NyZWF0ZUJ1dHRvbih7bmFtZTpcInVwZGF0ZVwiLHRleHQ6bCxhdHRyOnV9KSsody50aXRsZXx8XCJFZGl0XCIpK2YuX2NyZWF0ZUJ1dHRvbih7bmFtZTpcImNhbmNlbGVkaXRcIix0ZXh0OmMsYXR0cjp1fSkrXCI8L2Rpdj5cIitnK1wiPC9kaXY+XCIpLHA9Zi5fZWRpdENvbnRhaW5lcj1mLmVkaXRWaWV3LmVsZW1lbnQuZmluZChcIi5rLXBvcHVwLWVkaXQtZm9ybVwiKSk6KGcrPSc8ZGl2IGNsYXNzPVwiay1lZGl0LWJ1dHRvbnMgay1zdGF0ZS1kZWZhdWx0XCI+JyxnKz1mLl9jcmVhdGVCdXR0b24oe25hbWU6XCJ1cGRhdGVcIix0ZXh0OmwsYXR0cjp1fSkrZi5fY3JlYXRlQnV0dG9uKHtuYW1lOlwiY2FuY2VsZWRpdFwiLHRleHQ6YyxhdHRyOnV9KSxnKz1cIjwvZGl2PjwvZGl2PjwvZGl2PlwiLHA9Zi5fZWRpdENvbnRhaW5lcj1lKGcpLmFwcGVuZFRvKGYud3JhcHBlcikuZXEoMCkua2VuZG9XaW5kb3cod3Qoe21vZGFsOiEwLHJlc2l6YWJsZTohMSxkcmFnZ2FibGU6ITAsdGl0bGU6XCJFZGl0XCIsdmlzaWJsZTohMSxjbG9zZTpmdW5jdGlvbihpKXtpZihpLnVzZXJUcmlnZ2VyZWQpe2lmKGkuc2VuZGVyLmVsZW1lbnQuZm9jdXMoKSxmLnRyaWdnZXIoXCJjYW5jZWxcIix7Y29udGFpbmVyOnAsbW9kZWw6bn0pKXJldHVybiBpLnByZXZlbnREZWZhdWx0KCksdDt2YXIgcj1mLml0ZW1zKCkuaW5kZXgoZShmLmN1cnJlbnQoKSkucGFyZW50KCkpO2YuY2FuY2VsUm93KCksZi5vcHRpb25zLm5hdmlnYXRhYmxlJiYoZi5jdXJyZW50KGYuaXRlbXMoKS5lcShyKS5jaGlsZHJlbigpLmZpbHRlcihSdCkuZmlyc3QoKSksbnQoZi50YWJsZSwhMCkpfX19LHcpKSksZi5lZGl0YWJsZT1mLl9lZGl0Q29udGFpbmVyLmtlbmRvRWRpdGFibGUoe2ZpZWxkczptLG1vZGVsOm4sY2xlYXJDb250YWluZXI6ITEsdGFyZ2V0OmZ9KS5kYXRhKFwia2VuZG9FZGl0YWJsZVwiKSxmLl9pc01vYmlsZSYmcC5maW5kKFwiaW5wdXRbdHlwZT1jaGVja2JveF0saW5wdXRbdHlwZT1yYWRpb11cIikucGFyZW50KFwiLmstZWRpdC1maWVsZFwiKS5hZGRDbGFzcyhcImstY2hlY2tcIikucHJldihcIi5rLWVkaXQtbGFiZWxcIikuYWRkQ2xhc3MoXCJrLWNoZWNrXCIpLmNsaWNrKGZ1bmN0aW9uKCl7ZSh0aGlzKS5uZXh0KCkuY2hpbGRyZW4oXCJpbnB1dFwiKS5jbGljaygpfSksZi5fb3BlblBvcFVwRWRpdG9yKCksZi50cmlnZ2VyKEh0LHtjb250YWluZXI6cCxtb2RlbDpufSl9LF9vcGVuUG9wVXBFZGl0b3I6ZnVuY3Rpb24oKXt0aGlzLl9pc01vYmlsZT90aGlzLnBhbmUubmF2aWdhdGUodGhpcy5lZGl0Vmlldyx0aGlzLl9lZGl0QW5pbWF0aW9uKTp0aGlzLl9lZGl0Q29udGFpbmVyLmRhdGEoXCJrZW5kb1dpbmRvd1wiKS5jZW50ZXIoKS5vcGVuKCl9LF9jcmVhdGVJbmxpbmVFZGl0b3I6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG8sYT10aGlzLHM9W107YS5sb2NrZWRDb250ZW50JiYodD10LmFkZChhLl9yZWxhdGVkUm93KHQpKSksdC5jaGlsZHJlbihcIjpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIikuZWFjaChmdW5jdGlvbigpe2lmKHI9ZSh0aGlzKSxpPUwoYS5jb2x1bW5zKVthLmNlbGxJbmRleChyKV0saS5jb21tYW5kfHwhaS5maWVsZHx8bi5lZGl0YWJsZSYmIW4uZWRpdGFibGUoaS5maWVsZCkpe2lmKGkuY29tbWFuZCYmKG89dHQoaS5jb21tYW5kLFwiZWRpdFwiKSkpe3IuZW1wdHkoKTt2YXIgdCxsLGM7eXQobykmJihvLnRleHQmJnl0KG8udGV4dCkmJih0PW8udGV4dC51cGRhdGUsbD1vLnRleHQuY2FuY2VsKSxvLmF0dHImJihjPW8uYXR0cikpLGUoYS5fY3JlYXRlQnV0dG9uKHtuYW1lOlwidXBkYXRlXCIsdGV4dDp0LGF0dHI6Y30pK2EuX2NyZWF0ZUJ1dHRvbih7bmFtZTpcImNhbmNlbGVkaXRcIix0ZXh0OmwsYXR0cjpjfSkpLmFwcGVuZFRvKHIpfX1lbHNlIHMucHVzaCh7ZmllbGQ6aS5maWVsZCxmb3JtYXQ6aS5mb3JtYXQsZWRpdG9yOmkuZWRpdG9yLHZhbHVlczppLnZhbHVlc30pLHIuYXR0cih1dC5hdHRyKFwiY29udGFpbmVyLWZvclwiKSxpLmZpZWxkKSxyLmVtcHR5KCl9KSxhLl9lZGl0Q29udGFpbmVyPXQsYS5lZGl0YWJsZT1uZXcgdXQudWkuRWRpdGFibGUodC5hZGRDbGFzcyhcImstZ3JpZC1lZGl0LXJvd1wiKSx7dGFyZ2V0OmEsZmllbGRzOnMsbW9kZWw6bixjbGVhckNvbnRhaW5lcjohMX0pLHQubGVuZ3RoPjEmJihldCh0WzBdLHRbMV0pLGEuX2FwcGx5TG9ja2VkQ29udGFpbmVyc1dpZHRoKCkpLGEudHJpZ2dlcihIdCx7Y29udGFpbmVyOnQsbW9kZWw6bn0pfSxjYW5jZWxSb3c6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10Ll9lZGl0Q29udGFpbmVyO24mJihlPXQuX21vZGVsRm9yQ29udGFpbmVyKG4pLHQuX2Rlc3Ryb3lFZGl0YWJsZSgpLHQuZGF0YVNvdXJjZS5jYW5jZWxDaGFuZ2VzKGUpLHQuX2Rpc3BsYXlSb3coXCJwb3B1cFwiIT09dC5fZWRpdE1vZGUoKT9uOnQudGJvZHkuZmluZChcIltcIit1dC5hdHRyKFwidWlkXCIpK1wiPVwiK2UudWlkK1wiXVwiKSkpfSxzYXZlUm93OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX2VkaXRDb250YWluZXIsbj1lLl9tb2RlbEZvckNvbnRhaW5lcih0KSxpPWUuZWRpdGFibGU7dCYmaSYmaS5lbmQoKSYmIWUudHJpZ2dlcihOdCx7Y29udGFpbmVyOnQsbW9kZWw6bn0pJiZlLmRhdGFTb3VyY2Uuc3luYygpfSxfZGlzcGxheVJvdzpmdW5jdGlvbih0KXt2YXIgbixpLHIsbz10aGlzLGE9by5fbW9kZWxGb3JDb250YWluZXIodCkscz10Lmhhc0NsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiKSxsPXQuaGFzQ2xhc3MoXCJrLWFsdFwiKTthJiYoby5sb2NrZWRDb250ZW50JiYobj1lKChsP28ubG9ja2VkQWx0Um93VGVtcGxhdGU6by5sb2NrZWRSb3dUZW1wbGF0ZSkoYSkpLG8uX3JlbGF0ZWRSb3codC5sYXN0KCkpLnJlcGxhY2VXaXRoKG4pKSxvLmFuZ3VsYXIoXCJjbGVhbnVwXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6dC5nZXQoKX19KSxpPWUoKGw/by5hbHRSb3dUZW1wbGF0ZTpvLnJvd1RlbXBsYXRlKShhKSksdC5yZXBsYWNlV2l0aChpKSxvLmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6aS5nZXQoKSxkYXRhOlt7ZGF0YUl0ZW06YX1dfX0pLHMmJm8ub3B0aW9ucy5zZWxlY3RhYmxlJiZvLnNlbGVjdChpLmFkZChuKSksbiYmZXQoaVswXSxuWzBdKSxyPWkubmV4dCgpLHIuaGFzQ2xhc3MoXCJrLWRldGFpbC1yb3dcIikmJnIuaXMoXCI6dmlzaWJsZVwiKSYmaS5maW5kKFwiLmstaGllcmFyY2h5LWNlbGwgLmstaWNvblwiKS5yZW1vdmVDbGFzcyhcImstcGx1c1wiKS5hZGRDbGFzcyhcImstbWludXNcIikpfSxfc2hvd01lc3NhZ2U6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG8sYT10aGlzO3JldHVybiBhLl9pc01vYmlsZT8oaT11dC50ZW1wbGF0ZSgnPHVsPjxsaSBjbGFzcz1cImttLWFjdGlvbnNoZWV0LXRpdGxlXCI+Izp0aXRsZSM8L2xpPjxsaT48YSBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstYnV0dG9uIGstZ3JpZC1kZWxldGVcIj4jOmNvbmZpcm1EZWxldGUjPC9hPjwvbGk+PC91bD4nKSxyPWUoaSh0KSkuYXBwZW5kVG8oYS52aWV3LmVsZW1lbnQpLG89YS5fYWN0aW9uU2hlZXQ9bmV3IHV0Lm1vYmlsZS51aS5BY3Rpb25TaGVldChyLHtjYW5jZWw6dC5jYW5jZWxEZWxldGUsY2FuY2VsVGVtcGxhdGU6JzxsaSBjbGFzcz1cImttLWFjdGlvbnNoZWV0LWNhbmNlbFwiPjxhIGNsYXNzPVwiay1idXR0b25cIiBocmVmPVwiXFxcXCNcIj4jOmNhbmNlbCM8L2E+PC9saT4nLGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95KCl9LGNvbW1hbmQ6ZnVuY3Rpb24odCl7dmFyIGk9ZSh0LmN1cnJlbnRUYXJnZXQpLnBhcmVudCgpO2kuaGFzQ2xhc3MoXCJrbS1hY3Rpb25zaGVldC1jYW5jZWxcIil8fGEuX3JlbW92ZVJvdyhuKX0scG9wdXA6YS5fYWN0aW9uU2hlZXRQb3B1cE9wdGlvbnN9KSxvLm9wZW4obiksITEpOndpbmRvdy5jb25maXJtKHQudGl0bGUpfSxfY29uZmlybWF0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMuZWRpdGFibGUsaT1uPT09ITB8fHR5cGVvZiBuPT09Y24/dC5vcHRpb25zLm1lc3NhZ2VzLmVkaXRhYmxlLmNvbmZpcm1hdGlvbjpuLmNvbmZpcm1hdGlvbjtyZXR1cm4gaSE9PSExJiZudWxsIT1pPyh0eXBlb2YgaT09PWxuJiYoaT1pKHQuX21vZGVsRm9yQ29udGFpbmVyKGUpKSksdC5fc2hvd01lc3NhZ2Uoe2NvbmZpcm1EZWxldGU6bi5jb25maXJtRGVsZXRlfHx0Lm9wdGlvbnMubWVzc2FnZXMuZWRpdGFibGUuY29uZmlybURlbGV0ZSxjYW5jZWxEZWxldGU6bi5jYW5jZWxEZWxldGV8fHQub3B0aW9ucy5tZXNzYWdlcy5lZGl0YWJsZS5jYW5jZWxEZWxldGUsdGl0bGU6aT09PSEwP3Qub3B0aW9ucy5tZXNzYWdlcy5lZGl0YWJsZS5jb25maXJtYXRpb246aX0sZSkpOiEwfSxjYW5jZWxDaGFuZ2VzOmZ1bmN0aW9uKCl7dGhpcy5kYXRhU291cmNlLmNhbmNlbENoYW5nZXMoKX0sc2F2ZUNoYW5nZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzOyhlLmVkaXRhYmxlJiZlLmVkaXRhYmxlLmVuZCgpfHwhZS5lZGl0YWJsZSkmJiFlLnRyaWdnZXIoWXQpJiZlLmRhdGFTb3VyY2Uuc3luYygpfSxhZGRSb3c6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLG8sYT10aGlzLHM9YS5kYXRhU291cmNlLGw9YS5fZWRpdE1vZGUoKSxjPWEub3B0aW9ucy5lZGl0YWJsZS5jcmVhdGVBdHx8XCJcIixkPXMucGFnZVNpemUoKSx1PXMudmlldygpfHxbXTsoYS5lZGl0YWJsZSYmYS5lZGl0YWJsZS5lbmQoKXx8IWEuZWRpdGFibGUpJiYoXCJpbmNlbGxcIiE9bCYmYS5jYW5jZWxSb3coKSxlPXMuaW5kZXhPZih1WzBdKSxcImJvdHRvbVwiPT1jLnRvTG93ZXJDYXNlKCkmJihlKz11Lmxlbmd0aCxkJiYhcy5vcHRpb25zLnNlcnZlclBhZ2luZyYmdS5sZW5ndGg+PWQmJihlLT0xKSksMD5lJiYoZT1zLnBhZ2UoKT5zLnRvdGFsUGFnZXMoKT8ocy5wYWdlKCktMSkqZDowKSx0PXMuaW5zZXJ0KGUse30pLG49dC51aWQsaT1hLmxvY2tlZENvbnRlbnQ/YS5sb2NrZWRUYWJsZTphLnRhYmxlLHI9aS5maW5kKFwidHJbXCIrdXQuYXR0cihcInVpZFwiKStcIj1cIituK1wiXVwiKSxvPXIuY2hpbGRyZW4oXCJ0ZDpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIikuZXEoYS5fZmlyc3RFZGl0YWJsZUNvbHVtbkluZGV4KHIpKSxcImlubGluZVwiPT09bCYmci5sZW5ndGg/YS5lZGl0Um93KHIpOlwicG9wdXBcIj09PWw/YS5lZGl0Um93KHQpOm8ubGVuZ3RoJiZhLmVkaXRDZWxsKG8pLFwiYm90dG9tXCI9PWMudG9Mb3dlckNhc2UoKSYmYS5sb2NrZWRDb250ZW50JiYoYS5sb2NrZWRDb250ZW50WzBdLnNjcm9sbFRvcD1hLmNvbnRlbnRbMF0uc2Nyb2xsVG9wPWEuY29udGVudFswXS5vZmZzZXRIZWlnaHQpKX0sX2ZpcnN0RWRpdGFibGVDb2x1bW5JbmRleDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscj10aGlzLG89TChyLmNvbHVtbnMpLGE9ci5fbW9kZWxGb3JDb250YWluZXIoZSk7Zm9yKG49MCxpPW8ubGVuZ3RoO2k+bjtuKyspaWYodD1vW25dLGEmJighYS5lZGl0YWJsZXx8YS5lZGl0YWJsZSh0LmZpZWxkKSkmJiF0LmNvbW1hbmQmJnQuZmllbGQpcmV0dXJuIG47cmV0dXJuLTF9LF90b29sYmFyOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi53cmFwcGVyLHI9bi5vcHRpb25zLnRvb2xiYXIsbz1uLm9wdGlvbnMuZWRpdGFibGU7ciYmKHQ9bi53cmFwcGVyLmZpbmQoXCIuay1ncmlkLXRvb2xiYXJcIiksdC5sZW5ndGh8fChEdChyKXx8KHI9dHlwZW9mIHI9PT1jbj9yOm4uX3Rvb2xiYXJUbXBsKHIpLnJlcGxhY2UoZm4sXCJcXFxcI1wiKSxyPVR0KHV0LnRlbXBsYXRlKHIpLG4pKSx0PWUoJzxkaXYgY2xhc3M9XCJrLWhlYWRlciBrLWdyaWQtdG9vbGJhclwiIC8+JykuaHRtbChyKHt9KSkucHJlcGVuZFRvKGkpLG4uYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czp0LmdldCgpfX0pKSxvJiZvLmNyZWF0ZSE9PSExJiZ0Lm9uKG9uK090LFwiLmstZ3JpZC1hZGRcIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksbi5hZGRSb3coKX0pLm9uKG9uK090LFwiLmstZ3JpZC1jYW5jZWwtY2hhbmdlc1wiLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxuLmNhbmNlbENoYW5nZXMoKX0pLm9uKG9uK090LFwiLmstZ3JpZC1zYXZlLWNoYW5nZXNcIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksbi5zYXZlQ2hhbmdlcygpfSksdC5vbihvbitPdCxcIi5rLWdyaWQtZXhjZWxcIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksbi5zYXZlQXNFeGNlbCgpfSksdC5vbihvbitPdCxcIi5rLWdyaWQtcGRmXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLG4uc2F2ZUFzUERGKCl9KSl9LF90b29sYmFyVG1wbDpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcyxyPVwiXCI7aWYoeHQoZSkpZm9yKHQ9MCxuPWUubGVuZ3RoO24+dDt0Kyspcis9aS5fY3JlYXRlQnV0dG9uKGVbdF0pO3JldHVybiByfSxfY3JlYXRlQnV0dG9uOmZ1bmN0aW9uKGUpe3ZhciBuLHI9ZS50ZW1wbGF0ZXx8X24sbz10eXBlb2YgZT09PWNuP2U6ZS5uYW1lfHxlLnRleHQsYT1DbltvXT9DbltvXS5jbGFzc05hbWU6XCJrLWdyaWQtXCIrKG98fFwiXCIpLnJlcGxhY2UoL1xccy9nLFwiXCIpLHM9e2NsYXNzTmFtZTphLHRleHQ6byxpbWFnZUNsYXNzOlwiXCIsYXR0cjpcIlwiLGljb25DbGFzczpcIlwifSxsPXRoaXMub3B0aW9ucy5tZXNzYWdlcy5jb21tYW5kcztpZighKG98fHl0KGUpJiZlLnRlbXBsYXRlKSl0aHJvdyBFcnJvcihcIkN1c3RvbSBjb21tYW5kcyBzaG91bGQgaGF2ZSBuYW1lIHNwZWNpZmllZFwiKTtyZXR1cm4geXQoZSk/KGUuY2xhc3NOYW1lJiZDdChzLmNsYXNzTmFtZSxlLmNsYXNzTmFtZS5zcGxpdChcIiBcIikpPDA/ZS5jbGFzc05hbWUrPVwiIFwiK3MuY2xhc3NOYW1lOmUuY2xhc3NOYW1lPT09dCYmKGUuY2xhc3NOYW1lPXMuY2xhc3NOYW1lKSxcImVkaXRcIj09PW8mJnl0KGUudGV4dCkmJihlPXd0KCEwLHt9LGUpLGUudGV4dD1lLnRleHQuZWRpdCksZS5hdHRyJiYoeXQoZS5hdHRyKSYmKGUuYXR0cj1pKGUuYXR0cikpLHR5cGVvZiBlLmF0dHI9PT1jbiYmKG49ZS5hdHRyLm1hdGNoKC9jbGFzcz1cIiguKz8pXCIvKSxuJiZDdChuWzFdLGUuY2xhc3NOYW1lLnNwbGl0KFwiIFwiKSk8MCYmKGUuY2xhc3NOYW1lKz1cIiBcIituWzFdKSkpLHM9d3QoITAscyxDbltvXSx7dGV4dDpsW29dfSxlKSk6cz13dCghMCxzLENuW29dLHt0ZXh0Omxbb119KSx1dC50ZW1wbGF0ZShyKShzKX0sX2hhc0Zvb3RlcnM6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuZm9vdGVyVGVtcGxhdGV8fCEhdGhpcy5ncm91cEZvb3RlclRlbXBsYXRlfHx0aGlzLmZvb3RlciYmdGhpcy5mb290ZXIubGVuZ3RoPjB8fHRoaXMud3JhcHBlci5maW5kKFwiLmstZ3JpZC1mb290ZXJcIikubGVuZ3RoPjB9LF9ncm91cGFibGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QuX2dyb3VwYWJsZUNsaWNrSGFuZGxlcj90LnRhYmxlLmFkZCh0LmxvY2tlZFRhYmxlKS5vZmYob24rT3QsdC5fZ3JvdXBhYmxlQ2xpY2tIYW5kbGVyKTp0Ll9ncm91cGFibGVDbGlja0hhbmRsZXI9ZnVuY3Rpb24obil7dmFyIGk9ZSh0aGlzKSxyPWkuY2xvc2VzdChcInRyXCIpO2kuaGFzQ2xhc3MoXCJrLWktY29sbGFwc2VcIik/dC5jb2xsYXBzZUdyb3VwKHIpOnQuZXhwYW5kR3JvdXAociksbi5wcmV2ZW50RGVmYXVsdCgpLG4uc3RvcFByb3BhZ2F0aW9uKCl9LHQuX2lzTG9ja2VkKCk/dC5sb2NrZWRUYWJsZS5vbihvbitPdCxcIi5rLWdyb3VwaW5nLXJvdyAuay1pLWNvbGxhcHNlLCAuay1ncm91cGluZy1yb3cgLmstaS1leHBhbmRcIix0Ll9ncm91cGFibGVDbGlja0hhbmRsZXIpOnQudGFibGUub24ob24rT3QsXCIuay1ncm91cGluZy1yb3cgLmstaS1jb2xsYXBzZSwgLmstZ3JvdXBpbmctcm93IC5rLWktZXhwYW5kXCIsdC5fZ3JvdXBhYmxlQ2xpY2tIYW5kbGVyKSx0Ll9hdHRhY2hHcm91cGFibGUoKX0sX2F0dGFjaEdyb3VwYWJsZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LndyYXBwZXIsaT10Lm9wdGlvbnMuZ3JvdXBhYmxlLHI9THQrXCJbXCIrdXQuYXR0cihcImZpZWxkXCIpK1wiXVwiLG89dC5jb250ZW50P1wiLmstZ3JpZC1oZWFkZXI6Zmlyc3QgXCIrcjpcInRhYmxlOmZpcnN0Pi5rLWdyaWQtaGVhZGVyIFwiK3I7aSYmaS5lbmFibGVkIT09ITEmJihuLmhhcyhcImRpdi5rLWdyb3VwaW5nLWhlYWRlclwiKVswXXx8ZShcIjxkaXY+Jm5ic3A7PC9kaXY+XCIpLmFkZENsYXNzKFwiay1ncm91cGluZy1oZWFkZXJcIikucHJlcGVuZFRvKG4pLHQuZ3JvdXBhYmxlJiZ0Lmdyb3VwYWJsZS5kZXN0cm95KCksdC5ncm91cGFibGU9bmV3IGZ0KG4sd3Qoe30saSx7ZHJhZ2dhYmxlOnQuX2RyYWdnYWJsZUluc3RhbmNlLGdyb3VwQ29udGFpbmVyOlwiPmRpdi5rLWdyb3VwaW5nLWhlYWRlclwiLGRhdGFTb3VyY2U6dC5kYXRhU291cmNlLGRyYWdnYWJsZUVsZW1lbnRzOm8sZmlsdGVyOm8sYWxsb3dEcmFnOnQub3B0aW9ucy5yZW9yZGVyYWJsZX0pKSl9LF9jb250aW51b3VzSXRlbXM6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG8sYSxzLGwsYyxkO2lmKHRoaXMubG9ja2VkQ29udGVudCl7Zm9yKGk9dGhpcyxyPWkudGFibGUuYWRkKGkubG9ja2VkVGFibGUpLG89ZSh0LHJbMF0pLGE9ZSh0LHJbMV0pLHM9bj9JKGkuY29sdW1ucykubGVuZ3RoOjEsbD1uP2kuY29sdW1ucy5sZW5ndGgtczoxLGM9W10sZD0wO28ubGVuZ3RoPmQ7ZCs9cylTdC5hcHBseShjLG8uc2xpY2UoZCxkK3MpKSxTdC5hcHBseShjLGEuc3BsaWNlKDAsbCkpO3JldHVybiBjfX0sX3NlbGVjdGFibGU6ZnVuY3Rpb24oKXt2YXIgbixpLHIsbyxhPXRoaXMscz1bXSxsPWEuX2lzTG9ja2VkKCksYz1hLm9wdGlvbnMuc2VsZWN0YWJsZTtjJiYoYS5zZWxlY3RhYmxlJiZhLnNlbGVjdGFibGUuZGVzdHJveSgpLGM9dXQudWkuU2VsZWN0YWJsZS5wYXJzZU9wdGlvbnMoYyksbj1jLm11bHRpcGxlLGk9Yy5jZWxsLGEuX2hhc0RldGFpbHMoKSYmKHNbcy5sZW5ndGhdPVwiLmstZGV0YWlsLXJvd1wiKSwoYS5vcHRpb25zLmdyb3VwYWJsZXx8YS5faGFzRm9vdGVycygpKSYmKHNbcy5sZW5ndGhdPVwiLmstZ3JvdXBpbmctcm93LC5rLWdyb3VwLWZvb3RlclwiKSxzPXMuam9pbihcIixcIiksXCJcIiE9PXMmJihzPVwiOm5vdChcIitzK1wiKVwiKSxyPWEudGFibGUsbCYmKHI9ci5hZGQoYS5sb2NrZWRUYWJsZSkpLG89XCI+XCIrKGk/enQ6XCJ0Ym9keT50clwiK3MpLGEuc2VsZWN0YWJsZT1uZXcgdXQudWkuU2VsZWN0YWJsZShyLHtmaWx0ZXI6byxhcmlhOiEwLG11bHRpcGxlOm4sY2hhbmdlOmZ1bmN0aW9uKCl7YS50cmlnZ2VyKEd0KX0sdXNlQWxsSXRlbXM6bCYmbiYmaSxyZWxhdGVkVGFyZ2V0OmZ1bmN0aW9uKHQpe3ZhciBuLHIsbyxzO2lmKCFpJiZsKXtmb3Iocj1lKCksbz0wLHM9dC5sZW5ndGg7cz5vO28rKyluPWEuX3JlbGF0ZWRSb3codFtvXSksQ3QoblswXSx0KTwwJiYocj1yLmFkZChuKSk7cmV0dXJuIHJ9fSxjb250aW51b3VzSXRlbXM6ZnVuY3Rpb24oKXtyZXR1cm4gYS5fY29udGludW91c0l0ZW1zKG8saSl9fSksYS5vcHRpb25zLm5hdmlnYXRhYmxlJiZyLm9uKFwia2V5ZG93blwiK090LGZ1bmN0aW9uKG8pe3ZhciBzPWEuY3VycmVudCgpLGM9by50YXJnZXQ7aWYoby5rZXlDb2RlPT09X3QuU1BBQ0VCQVImJmUuaW5BcnJheShjLHIpPi0xJiYhcy5pcyhcIi5rLWVkaXQtY2VsbCwuay1oZWFkZXJcIikmJnMucGFyZW50KCkuaXMoXCI6bm90KC5rLWdyb3VwaW5nLXJvdywuay1kZXRhaWwtcm93LC5rLWdyb3VwLWZvb3RlcilcIikpe2lmKG8ucHJldmVudERlZmF1bHQoKSxvLnN0b3BQcm9wYWdhdGlvbigpLHM9aT9zOnMucGFyZW50KCksbCYmIWkmJihzPXMuYWRkKGEuX3JlbGF0ZWRSb3cocykpKSxuKWlmKG8uY3RybEtleSl7aWYocy5oYXNDbGFzcyhadCkpcmV0dXJuIHMucmVtb3ZlQ2xhc3MoWnQpLGEudHJpZ2dlcihHdCksdH1lbHNlIGEuc2VsZWN0YWJsZS5jbGVhcigpO2Vsc2UgYS5zZWxlY3RhYmxlLmNsZWFyKCk7YS5zZWxlY3RhYmxlLnZhbHVlKHMpfX0pKX0sX3JlbGF0ZWRSb3c6ZnVuY3Rpb24odCl7dmFyIG4saSxyPXRoaXMubG9ja2VkVGFibGU7cmV0dXJuIHQ9ZSh0KSxyPyhuPXQuY2xvc2VzdCh0aGlzLnRhYmxlLmFkZCh0aGlzLmxvY2tlZFRhYmxlKSksaT1uLmZpbmQoXCI+dGJvZHk+dHJcIikuaW5kZXgodCksbj1uWzBdPT09dGhpcy50YWJsZVswXT9yOnRoaXMudGFibGUsbi5maW5kKFwiPnRib2R5PnRyXCIpLmVxKGkpKTp0fSxjbGVhclNlbGVjdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5zZWxlY3RhYmxlLmNsZWFyKCksZS50cmlnZ2VyKEd0KX0sc2VsZWN0OmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMscj1pLnNlbGVjdGFibGU7cmV0dXJuIG49ZShuKSxuLmxlbmd0aD8oci5vcHRpb25zLm11bHRpcGxlfHwoci5jbGVhcigpLG49bi5maXJzdCgpKSxpLl9pc0xvY2tlZCgpJiYobj1uLmFkZChuLm1hcChmdW5jdGlvbigpe3JldHVybiBpLl9yZWxhdGVkUm93KHRoaXMpfSkpKSxyLnZhbHVlKG4pLHQpOnIudmFsdWUoKX0sY3VycmVudDpmdW5jdGlvbihlKXt2YXIgbixpPXRoaXMscj1pLm9wdGlvbnMuc2Nyb2xsYWJsZSxvPWkuX2N1cnJlbnQsYT1pLnRhYmxlLmFkZChpLnRoZWFkLnBhcmVudCgpKTtyZXR1cm4gZSE9PXQmJmUubGVuZ3RoJiYobyYmb1swXT09PWVbMF18fChvJiYoby5yZW1vdmVDbGFzcyhKdCkucmVtb3ZlQXR0cihcImlkXCIpLGEucmVtb3ZlQXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKSksZS5hdHRyKFwiaWRcIixpLl9jZWxsSWQpLGkuX2N1cnJlbnQ9ZS5hZGRDbGFzcyhKdCksYS5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsaS5fY2VsbElkKSxlLmxlbmd0aCYmciYmKG49ZS5jbG9zZXN0KFwidGFibGVcIikucGFyZW50KCksbi5pcyhcIi5rLWdyaWQtY29udGVudFwiKT9pLl9zY3JvbGxUbyhlLnBhcmVudCgpWzBdLGkuY29udGVudFswXSk6bi5pcyhcIi5rLWdyaWQtY29udGVudC1sb2NrZWRcIikmJihpLl9zY3JvbGxUbyhpLl9yZWxhdGVkUm93KGUucGFyZW50KCkpWzBdLGkuY29udGVudFswXSksaS5sb2NrZWRDb250ZW50WzBdLnNjcm9sbFRvcD1pLmNvbnRlbnRbMF0uc2Nyb2xsVG9wKSxuLmlzKFwiLmstZ3JpZC1jb250ZW50LWxvY2tlZCwuay1ncmlkLWhlYWRlci1sb2NrZWRcIil8fChyLnZpcnR1YWw/aS5fc2Nyb2xsVG8oZVswXSxpLmNvbnRlbnQuZmluZChcIj4uay12aXJ0dWFsLXNjcm9sbGFibGUtd3JhcFwiKVswXSk6aS5fc2Nyb2xsVG8oZVswXSxpLmNvbnRlbnRbMF0pKSkpKSxpLl9jdXJyZW50fSxfcmVtb3ZlQ3VycmVudDpmdW5jdGlvbigpe3RoaXMuX2N1cnJlbnQmJih0aGlzLl9jdXJyZW50LnJlbW92ZUNsYXNzKEp0KSx0aGlzLl9jdXJyZW50PW51bGwpfSxfc2Nyb2xsVG86ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnRhZ05hbWUudG9Mb3dlckNhc2UoKSxpPVwidGRcIj09PW58fFwidGhcIj09PW4scj1lW2k/XCJvZmZzZXRMZWZ0XCI6XCJvZmZzZXRUb3BcIl0sbz1lW2k/XCJvZmZzZXRXaWR0aFwiOlwib2Zmc2V0SGVpZ2h0XCJdLGE9dFtpP1wic2Nyb2xsTGVmdFwiOlwic2Nyb2xsVG9wXCJdLHM9dFtpP1wiY2xpZW50V2lkdGhcIjpcImNsaWVudEhlaWdodFwiXSxsPXIrbyxjPTA7Yz1hPnI/cjpsPmErcz9zPj1vP2wtczpyOmEsdFtpP1wic2Nyb2xsTGVmdFwiOlwic2Nyb2xsVG9wXCJdPWN9LF9uYXZpZ2F0YWJsZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj1UdCh0LmN1cnJlbnQsdCksaT10LnRhYmxlLmFkZCh0LmxvY2tlZFRhYmxlKSxyPXQudGhlYWQucGFyZW50KCkuYWRkKGUoXCI+dGFibGVcIix0LmxvY2tlZEhlYWRlcikpLG89KHQuX2lzTG9ja2VkKCksaSksYT11dC5zdXBwb3J0LmlzUnRsKHQuZWxlbWVudCk7dC5vcHRpb25zLm5hdmlnYXRhYmxlJiYodC5vcHRpb25zLnNjcm9sbGFibGUmJihvPWkuYWRkKHIpLHIuYXR0cihzbiwtMSkpLG8ub2ZmKFwibW91c2Vkb3duXCIrT3QrXCIgZm9jdXNcIitPdCtcIiBmb2N1c291dFwiK090K1wiIGtleWRvd25cIitPdCksci5vbihcImtleWRvd25cIitPdCxmdW5jdGlvbihlKXtlLmFsdEtleSYmZS5rZXlDb2RlPT1fdC5ET1dOJiYobigpLmZpbmQoXCIuay1ncmlkLWZpbHRlciwgLmstaGVhZGVyLWNvbHVtbi1tZW51XCIpLmNsaWNrKCksZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSl9KS5maW5kKFwiYS5rLWxpbmtcIikuYXR0cihcInRhYkluZGV4XCIsLTEpLGkuYXR0cihzbixFdC5tYXgoaS5hdHRyKHNuKXx8MCwwKSkub24oXCJtb3VzZWRvd25cIitPdCtcIiBrZXlkb3duXCIrT3QsXCIuay1kZXRhaWwtY2VsbFwiLGZ1bmN0aW9uKGUpe2UudGFyZ2V0IT09ZS5jdXJyZW50VGFyZ2V0JiZlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpfSksby5vbih1dC5zdXBwb3J0LnRvdWNoP1widG91Y2hzdGFydFwiK090OlwibW91c2Vkb3duXCIrT3QsRnQrXCI+XCIrUnQsVHQoaXQsdCkpLm9uKFwiZm9jdXNcIitPdCxmdW5jdGlvbigpe2lmKCF1dC5zdXBwb3J0LnRvdWNoKXt2YXIgdD1uKCk7dCYmdC5pcyhcIjp2aXNpYmxlXCIpP3QuYWRkQ2xhc3MoSnQpOm4oZSh0aGlzKS5maW5kKEJ0KSksaS5hdHRyKHNuLC0xKSxyLmF0dHIoc24sLTEpLGUodGhpcykuYXR0cihzbiwwKX19KS5vbihcImZvY3Vzb3V0XCIrT3QsZnVuY3Rpb24oKXt2YXIgZT1uKCk7ZSYmZS5yZW1vdmVDbGFzcyhKdCl9KS5vbihcImtleWRvd25cIitPdCxmdW5jdGlvbihvKXt2YXIgcyxsLGMsZCx1LGg9by5rZXlDb2RlLHA9ITEsZj0hby5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmIWUoby50YXJnZXQpLmlzKFwiOmJ1dHRvbixhLDppbnB1dCxhPi5rLWljb25cIiksZz10Lm9wdGlvbnMucGFnZWFibGUsbT10LmRhdGFTb3VyY2Usdj1cImluY2VsbFwiPT10Ll9lZGl0TW9kZSgpLF89by5zaGlmdEtleSx5PVR0KHQuX3JlbGF0ZWRSb3csdCksdz1uKCk7aWYodyYmdy5pcyhcInRoXCIpJiYoZj0hMCksZiYmaD09X3QuVVApbihvdCh3LG8uY3VycmVudFRhcmdldCxpLHIsITApKSxwPSEwO2Vsc2UgaWYoZiYmaD09X3QuRE9XTiluKG90KHcsby5jdXJyZW50VGFyZ2V0LGkscikpLHA9ITA7ZWxzZSBpZihmJiZoPT0oYT9fdC5SSUdIVDpfdC5MRUZUKSluKGF0KHcsby5jdXJyZW50VGFyZ2V0LGkscix5KSkscD0hMDtlbHNlIGlmKGYmJmg9PShhP190LkxFRlQ6X3QuUklHSFQpKW4oc3QodyxvLmN1cnJlbnRUYXJnZXQsaSxyLHkpKSxwPSEwO2Vsc2UgaWYoZiYmZyYmX3QuUEFHRURPV049PWgpbS5wYWdlKG0ucGFnZSgpKzEpLHA9ITA7ZWxzZSBpZihmJiZnJiZfdC5QQUdFVVA9PWgpbS5wYWdlKG0ucGFnZSgpLTEpLHA9ITA7ZWxzZSBpZihoPT1fdC5FTlRFUnx8X3QuRjI9PWgpe2lmKHc9dz93OmkuZmluZChCdCksIXcubGVuZ3RoKXJldHVybjtlKG8udGFyZ2V0KS5pcyhcInRhYmxlXCIpfHxlLmNvbnRhaW5zKHdbMF0sby50YXJnZXQpfHwodz1lKG8udGFyZ2V0KS5jbG9zZXN0KFwiW3JvbGU9Z3JpZGNlbGxdXCIpKSx3LmlzKFwidGhcIik/KHcuZmluZChcIi5rLWxpbmtcIikuY2xpY2soKSxwPSEwKTp3LnBhcmVudCgpLmlzKFwiLmstbWFzdGVyLXJvdywuay1ncm91cGluZy1yb3dcIik/KHcucGFyZW50KCkuZmluZChcIi5rLWljb246Zmlyc3RcIikuY2xpY2soKSxwPSEwKTooYz13LmZpbmQoXCI6a2VuZG9Gb2N1c2FibGU6Zmlyc3RcIiksIXcuaGFzQ2xhc3MoXCJrLWVkaXQtY2VsbFwiKSYmY1swXSYmdy5oYXNDbGFzcyhcImstc3RhdGUtZm9jdXNlZFwiKT8oYy5mb2N1cygpLHA9ITApOnQub3B0aW9ucy5lZGl0YWJsZSYmIWUoby50YXJnZXQpLmlzKFwiOmJ1dHRvbiwuay1idXR0b24sdGV4dGFyZWFcIikmJihkPWUoby50YXJnZXQpLmNsb3Nlc3QoXCJbcm9sZT1ncmlkY2VsbF1cIiksZFswXXx8KGQ9dyksdC5faGFuZGxlRWRpdGluZyhkLCExLHY/by5jdXJyZW50VGFyZ2V0OmlbMF0pLHA9ITApKX1lbHNlIF90LkVTQz09aD8ocz1tdCgpLHcmJmUuY29udGFpbnMod1swXSxzKSYmIXcuaGFzQ2xhc3MoXCJrLWVkaXQtY2VsbFwiKSYmIXcucGFyZW50KCkuaGFzQ2xhc3MoXCJrLWdyaWQtZWRpdC1yb3dcIik/KG50KG8uY3VycmVudFRhcmdldCwhMCkscD0hMCk6IXQuX2VkaXRDb250YWluZXJ8fHcmJiF0Ll9lZGl0Q29udGFpbmVyLmhhcyh3WzBdKSYmd1swXSE9PXQuX2VkaXRDb250YWluZXJbMF18fCh2P3QuY2xvc2VDZWxsKCEwKToobD1lKHcpLnBhcmVudCgpLmluZGV4KCkscyYmcy5ibHVyKCksdC5jYW5jZWxSb3coKSxsPj0wJiZ0LmN1cnJlbnQoaS5maW5kKFwiPnRib2R5PnRyXCIpLmVxKGwpLmNoaWxkcmVuKCkuZmlsdGVyKFJ0KS5maXJzdCgpKSksd24ubXNpZSYmOT53bi52ZXJzaW9uJiZkb2N1bWVudC5ib2R5LmZvY3VzKCksbnQodj9vLmN1cnJlbnRUYXJnZXQ6aVswXSwhMCkscD0hMCkpOl90LlRBQj09aCYmKHc9ZSh3KSx0Lm9wdGlvbnMuZWRpdGFibGUmJnYmJih1PWUobXQoKSkuY2xvc2VzdChcIi5rLWVkaXQtY2VsbFwiKSx1WzBdJiZ1WzBdIT09d1swXSYmKHc9dSkpLHU9bHQodyxvLmN1cnJlbnRUYXJnZXQsaSx5LF8pLCF3LmlzKFwidGhcIikmJnUubGVuZ3RoJiZ0Lm9wdGlvbnMuZWRpdGFibGUmJnYmJih0Ll9oYW5kbGVFZGl0aW5nKHcsdSx1LmNsb3Nlc3QoaSkpLHA9ITApKTtwJiYoby5wcmV2ZW50RGVmYXVsdCgpLG8uc3RvcFByb3BhZ2F0aW9uKCkpfSkpfSxfaGFuZGxlRWRpdGluZzpmdW5jdGlvbihuLGkscil7dmFyIG8sYSxzPXRoaXMsbD1lKG10KCkpLGM9cy5fZWRpdE1vZGUoKSxkPXduLm1zaWUsdT1kJiY5PnduLnZlcnNpb24saD1zLl9lZGl0Q29udGFpbmVyO2lmKHI9ZShyKSxhPVwiaW5jZWxsXCI9PWM/bi5oYXNDbGFzcyhcImstZWRpdC1jZWxsXCIpOm4ucGFyZW50KCkuaGFzQ2xhc3MoXCJrLWdyaWQtZWRpdC1yb3dcIikscy5lZGl0YWJsZSl7aWYoZS5jb250YWlucyhoWzBdLGxbMF0pJiYod24ub3BlcmF8fHU/bC5jaGFuZ2UoKS50cmlnZ2VySGFuZGxlcihcImJsdXJcIik6KGwuYmx1cigpLGQmJmwuYmx1cigpKSksIXMuZWRpdGFibGUpcmV0dXJuIG50KHIpLHQ7aWYoIXMuZWRpdGFibGUuZW5kKCkpcmV0dXJuIHMuY3VycmVudChcImluY2VsbFwiPT1jP2g6aC5jaGlsZHJlbigpLmZpbHRlcihJdCkuZmlyc3QoKSksbz1oLmZpbmQoXCI6a2VuZG9Gb2N1c2FibGU6Zmlyc3RcIilbMF0sbyYmby5mb2N1cygpLHQ7XCJpbmNlbGxcIj09Yz9zLmNsb3NlQ2VsbCgpOihzLnNhdmVSb3coKSxhPSEwKX1pJiZzLmN1cnJlbnQoaSksdSYmZG9jdW1lbnQuYm9keS5mb2N1cygpLG50KHIsITApLCghYSYmIWl8fGkpJiYoXCJpbmNlbGxcIj09Yz9zLmVkaXRDZWxsKHMuY3VycmVudCgpKTpzLmVkaXRSb3cocy5jdXJyZW50KCkucGFyZW50KCkpKX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS50YWJsZSxuPWUub3B0aW9ucy5oZWlnaHQsaT1lLmVsZW1lbnQ7aS5pcyhcImRpdlwiKXx8KGk9aS53cmFwKFwiPGRpdi8+XCIpLnBhcmVudCgpKSxlLndyYXBwZXI9aS5hZGRDbGFzcyhcImstZ3JpZCBrLXdpZGdldFwiKSxuJiYoZS53cmFwcGVyLmNzcyhhbixuKSx0LmNzcyhhbixcImF1dG9cIikpLGUuX2luaXRNb2JpbGUoKX0sX2luaXRNb2JpbGU6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMub3B0aW9ucyxpPXRoaXM7dGhpcy5faXNNb2JpbGU9bi5tb2JpbGU9PT0hMCYmdXQuc3VwcG9ydC5tb2JpbGVPU3x8XCJwaG9uZVwiPT09bi5tb2JpbGV8fFwidGFibGV0XCI9PT1uLm1vYmlsZSx0aGlzLl9pc01vYmlsZSYmKHQ9dGhpcy53cmFwcGVyLmFkZENsYXNzKFwiay1ncmlkLW1vYmlsZVwiKS53cmFwKFwiPGRpdiBkYXRhLVwiK3V0Lm5zKydyb2xlPVwidmlld1wiIGRhdGEtJyt1dC5ucysnaW5pdC13aWRnZXRzPVwiZmFsc2VcIj48L2Rpdj4nKS5wYXJlbnQoKSx0aGlzLnBhbmU9dXQubW9iaWxlLnVpLlBhbmUud3JhcCh0KSx0aGlzLnZpZXc9dGhpcy5wYW5lLnZpZXcoKSx0aGlzLl9hY3Rpb25TaGVldFBvcHVwT3B0aW9ucz1lKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuaGFzQ2xhc3MoXCJrbS1yb290XCIpP3ttb2RhbDohMX06e2FsaWduOlwiYm90dG9tIGNlbnRlclwiLHBvc2l0aW9uOlwiYm90dG9tIGNlbnRlclwiLGVmZmVjdDpcInNsaWRlSW46dXBcIn0sbi5oZWlnaHQmJnRoaXMucGFuZS5lbGVtZW50LnBhcmVudCgpLmNzcyhhbixuLmhlaWdodCksdGhpcy5fZWRpdEFuaW1hdGlvbj1cInNsaWRlXCIsdGhpcy52aWV3LmJpbmQoXCJzaG93XCIsZnVuY3Rpb24oKXtpLl9pc0xvY2tlZCgpJiYoaS5fdXBkYXRlVGFibGVzV2lkdGgoKSxpLl9hcHBseUxvY2tlZENvbnRhaW5lcnNXaWR0aCgpLGkuX3N5bmNMb2NrZWRDb250ZW50SGVpZ2h0KCksaS5fc3luY0xvY2tlZEhlYWRlckhlaWdodCgpLGkuX3N5bmNMb2NrZWRGb290ZXJIZWlnaHQoKSl9KSl9LF90Ym9keTpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4udGFibGU7dD1pLmZpbmQoXCI+dGJvZHlcIiksdC5sZW5ndGh8fCh0PWUoXCI8dGJvZHkvPlwiKS5hcHBlbmRUbyhpKSksbi50Ym9keT10LmF0dHIoXCJyb2xlXCIsXCJyb3dncm91cFwiKX0sX3Njcm9sbGFibGU6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscixvPXRoaXMsYT1vLm9wdGlvbnMscz1hLnNjcm9sbGFibGUsbD1zIT09ITAmJnMudmlydHVhbCYmIW8udmlydHVhbFNjcm9sbGFibGUsYz0hdXQuc3VwcG9ydC5raW5ldGljU2Nyb2xsTmVlZGVkfHxsP3V0LnN1cHBvcnQuc2Nyb2xsYmFyKCk6MDtzJiYodD1vLndyYXBwZXIuY2hpbGRyZW4oXCIuay1ncmlkLWhlYWRlclwiKSx0WzBdfHwodD1lKCc8ZGl2IGNsYXNzPVwiay1ncmlkLWhlYWRlclwiIC8+JykuaW5zZXJ0QmVmb3JlKG8udGFibGUpKSx0LmNzcyh5bj9cInBhZGRpbmctbGVmdFwiOlwicGFkZGluZy1yaWdodFwiLHMudmlydHVhbD9jKzE6Yyksbj1lKCc8dGFibGUgcm9sZT1cImdyaWRcIiAvPicpLGJuJiZuLmF0dHIoXCJjZWxsc3BhY2luZ1wiLDApLG4uYXBwZW5kKG8udGhlYWQpLHQuZW1wdHkoKS5hcHBlbmQoZSgnPGRpdiBjbGFzcz1cImstZ3JpZC1oZWFkZXItd3JhcFwiIC8+JykuYXBwZW5kKG4pKSxvLmNvbnRlbnQ9by50YWJsZS5wYXJlbnQoKSxvLmNvbnRlbnQuaXMoXCIuay12aXJ0dWFsLXNjcm9sbGFibGUtd3JhcCwgLmttLXNjcm9sbC1jb250YWluZXJcIikmJihvLmNvbnRlbnQ9by5jb250ZW50LnBhcmVudCgpKSxvLmNvbnRlbnQuaXMoXCIuay1ncmlkLWNvbnRlbnQsIC5rLXZpcnR1YWwtc2Nyb2xsYWJsZS13cmFwXCIpfHwoby5jb250ZW50PW8udGFibGUud3JhcCgnPGRpdiBjbGFzcz1cImstZ3JpZC1jb250ZW50XCIgLz4nKS5wYXJlbnQoKSksbCYmKG8udmlydHVhbFNjcm9sbGFibGU9bmV3IHhuKG8uY29udGVudCx7ZGF0YVNvdXJjZTpvLmRhdGFTb3VyY2UsaXRlbUhlaWdodDpmdW5jdGlvbigpe3JldHVybiBvLl9hdmVyYWdlUm93SGVpZ2h0KCl9fSkpLG8uc2Nyb2xsYWJsZXM9dC5jaGlsZHJlbihcIi5rLWdyaWQtaGVhZGVyLXdyYXBcIiksaT1vLndyYXBwZXIuZmluZChcIi5rLWdyaWQtZm9vdGVyXCIpLGkubGVuZ3RoJiYoby5zY3JvbGxhYmxlcz1vLnNjcm9sbGFibGVzLmFkZChpLmNoaWxkcmVuKFwiLmstZ3JpZC1mb290ZXItd3JhcFwiKSkpLHMudmlydHVhbD9vLmNvbnRlbnQuZmluZChcIj4uay12aXJ0dWFsLXNjcm9sbGFibGUtd3JhcFwiKS51bmJpbmQoXCJzY3JvbGxcIitPdCkuYmluZChcInNjcm9sbFwiK090LGZ1bmN0aW9uKCl7by5zY3JvbGxhYmxlcy5zY3JvbGxMZWZ0KHRoaXMuc2Nyb2xsTGVmdCksby5sb2NrZWRDb250ZW50JiYoby5sb2NrZWRDb250ZW50WzBdLnNjcm9sbFRvcD10aGlzLnNjcm9sbFRvcCl9KTooby5jb250ZW50LnVuYmluZChcInNjcm9sbFwiK090KS5iaW5kKFwic2Nyb2xsXCIrT3QsZnVuY3Rpb24oKXtvLnNjcm9sbGFibGVzLnNjcm9sbExlZnQodGhpcy5zY3JvbGxMZWZ0KSxvLmxvY2tlZENvbnRlbnQmJihvLmxvY2tlZENvbnRlbnRbMF0uc2Nyb2xsVG9wPXRoaXMuc2Nyb2xsVG9wKX0pLHI9by5jb250ZW50LmRhdGEoXCJrZW5kb1RvdWNoU2Nyb2xsZXJcIiksciYmci5kZXN0cm95KCkscj11dC50b3VjaFNjcm9sbGVyKG8uY29udGVudCksciYmci5tb3ZhYmxlJiYoby50b3VjaFNjcm9sbGVyPXIsci5tb3ZhYmxlLmJpbmQoXCJjaGFuZ2VcIixmdW5jdGlvbihlKXtvLnNjcm9sbGFibGVzLnNjcm9sbExlZnQoLWUuc2VuZGVyLngpLG8ubG9ja2VkQ29udGVudCYmby5sb2NrZWRDb250ZW50LnNjcm9sbFRvcCgtZS5zZW5kZXIueSl9KSxvLm9uZShLdCxmdW5jdGlvbihlKXtlLnNlbmRlci53cmFwcGVyLmFkZENsYXNzKFwiay1ncmlkLWJhY2tmYWNlXCIpfSkpKSl9LF9zZXRDb250ZW50V2lkdGg6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1cImstZ3JpZC1jb250ZW50LWV4cGFuZGVyXCIscj0nPGRpdiBjbGFzcz1cIicraSsnXCI+PC9kaXY+JyxvPW4ucmVzaXphYmxlO24ub3B0aW9ucy5zY3JvbGxhYmxlJiZuLndyYXBwZXIuaXMoXCI6dmlzaWJsZVwiKSYmKHQ9bi50YWJsZS5wYXJlbnQoKS5jaGlsZHJlbihcIi5cIitpKSxuLl9zZXRDb250ZW50V2lkdGhIYW5kbGVyPVR0KG4uX3NldENvbnRlbnRXaWR0aCxuKSxuLmRhdGFTb3VyY2UmJm4uZGF0YVNvdXJjZS52aWV3KCkubGVuZ3RoP3RbMF0mJih0LnJlbW92ZSgpLG8mJm8udW5iaW5kKFwicmVzaXplXCIsbi5fc2V0Q29udGVudFdpZHRoSGFuZGxlcikpOih0WzBdfHwodD1lKHIpLmFwcGVuZFRvKG4udGFibGUucGFyZW50KCkpLG8mJm8uYmluZChcInJlc2l6ZVwiLG4uX3NldENvbnRlbnRXaWR0aEhhbmRsZXIpKSxuLnRoZWFkJiZ0LndpZHRoKG4udGhlYWQud2lkdGgoKSkpLG4uX2FwcGx5TG9ja2VkQ29udGFpbmVyc1dpZHRoKCkpfSxfYXBwbHlMb2NrZWRDb250YWluZXJzV2lkdGg6ZnVuY3Rpb24oKXtpZih0aGlzLm9wdGlvbnMuc2Nyb2xsYWJsZSYmdGhpcy5sb2NrZWRIZWFkZXIpe3ZhciBlLHQ9dGhpcy50aGVhZC5wYXJlbnQoKSxuPXQucGFyZW50KCksaT10aGlzLndyYXBwZXJbMF0uY2xpZW50V2lkdGgscj10aGlzLl9ncm91cHMoKSxvPXV0LnN1cHBvcnQuc2Nyb2xsYmFyKCksYT10aGlzLmxvY2tlZEhlYWRlci5maW5kKFwiPnRhYmxlPmNvbGdyb3VwPmNvbDpub3QoLmstZ3JvdXAtY29sLCAuay1oaWVyYXJjaHktY29sKVwiKSxzPXQuZmluZChcIj5jb2xncm91cD5jb2w6bm90KC5rLWdyb3VwLWNvbCwgLmstaGllcmFyY2h5LWNvbClcIiksbD1EKGEpLGM9RChzKTtyPjAmJihsKz10aGlzLmxvY2tlZEhlYWRlci5maW5kKFwiLmstZ3JvdXAtY2VsbDpmaXJzdFwiKS5vdXRlcldpZHRoKCkqciksbD49aSYmKGw9aS0zKm8pLHRoaXMubG9ja2VkSGVhZGVyLmFkZCh0aGlzLmxvY2tlZENvbnRlbnQpLndpZHRoKGwpLG5bMF0uc3R5bGUud2lkdGg9bi5wYXJlbnQoKS53aWR0aCgpLWwtMitcInB4XCIsdC5hZGQodGhpcy50YWJsZSkud2lkdGgoYyksdGhpcy52aXJ0dWFsU2Nyb2xsYWJsZSYmKGktPW8pLHRoaXMuY29udGVudFswXS5zdHlsZS53aWR0aD1pLWwtMitcInB4XCIsdGhpcy5sb2NrZWRGb290ZXImJnRoaXMubG9ja2VkRm9vdGVyLmxlbmd0aCYmKHRoaXMubG9ja2VkRm9vdGVyLndpZHRoKGwpLGU9dGhpcy5mb290ZXIuZmluZChcIi5rLWdyaWQtZm9vdGVyLXdyYXBcIiksZVswXS5zdHlsZS53aWR0aD1uWzBdLmNsaWVudFdpZHRoK1wicHhcIixlLmNoaWxkcmVuKCkuZmlyc3QoKS53aWR0aChjKSl9fSxfc2V0Q29udGVudEhlaWdodDpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQub3B0aW9ucyxpPXQud3JhcHBlci5pbm5lckhlaWdodCgpLHI9dC53cmFwcGVyLmNoaWxkcmVuKFwiLmstZ3JpZC1oZWFkZXJcIiksbz11dC5zdXBwb3J0LnNjcm9sbGJhcigpO24uc2Nyb2xsYWJsZSYmdC53cmFwcGVyLmlzKFwiOnZpc2libGVcIikmJihpLT1yLm91dGVySGVpZ2h0KCksdC5wYWdlciYmKGktPXQucGFnZXIuZWxlbWVudC5vdXRlckhlaWdodCgpKSxuLmdyb3VwYWJsZSYmKGktPXQud3JhcHBlci5jaGlsZHJlbihcIi5rLWdyb3VwaW5nLWhlYWRlclwiKS5vdXRlckhlaWdodCgpKSxuLnRvb2xiYXImJihpLT10LndyYXBwZXIuY2hpbGRyZW4oXCIuay1ncmlkLXRvb2xiYXJcIikub3V0ZXJIZWlnaHQoKSksdC5mb290ZXJUZW1wbGF0ZSYmKGktPXQud3JhcHBlci5jaGlsZHJlbihcIi5rLWdyaWQtZm9vdGVyXCIpLm91dGVySGVpZ2h0KCkpLGU9ZnVuY3Rpb24oZSl7dmFyIHQsbjtyZXR1cm4gZVswXS5zdHlsZS5oZWlnaHQ/ITA6KHQ9ZS5oZWlnaHQoKSxlLmhlaWdodChcImF1dG9cIiksbj1lLmhlaWdodCgpLHQhPW4/KGUuaGVpZ2h0KFwiXCIpLCEwKTooZS5oZWlnaHQoXCJcIiksITEpKX0sZSh0LndyYXBwZXIpJiYoaT4yKm8/KHQubG9ja2VkQ29udGVudCYmKG89dC50YWJsZVswXS5vZmZzZXRXaWR0aD50LnRhYmxlLnBhcmVudCgpWzBdLmNsaWVudFdpZHRoP286MCx0LmxvY2tlZENvbnRlbnQuaGVpZ2h0KGktbykpLHQuY29udGVudC5oZWlnaHQoaSkpOnQuY29udGVudC5oZWlnaHQoMipvKzEpKSl9LF9hdmVyYWdlUm93SGVpZ2h0OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLG49dC5faXRlbXModC50Ym9keSkubGVuZ3RoLGk9dC5fcm93SGVpZ2h0O3JldHVybiAwPT09bj9pOih0Ll9yb3dIZWlnaHR8fCh0Ll9yb3dIZWlnaHQ9aT10LnRhYmxlLm91dGVySGVpZ2h0KCkvbix0Ll9zdW09aSx0Ll9tZWFzdXJlcz0xKSxlPXQudGFibGUub3V0ZXJIZWlnaHQoKS9uLGkhPT1lJiYodC5fbWVhc3VyZXMrKyx0Ll9zdW0rPWUsdC5fcm93SGVpZ2h0PXQuX3N1bS90Ll9tZWFzdXJlcyksaSl9LF9kYXRhU291cmNlOmZ1bmN0aW9uKCl7dmFyIGUsbj10aGlzLGk9bi5vcHRpb25zLHI9aS5kYXRhU291cmNlO3I9eHQocik/e2RhdGE6cn06cix5dChyKSYmKHd0KHIse3RhYmxlOm4udGFibGUsZmllbGRzOm4uY29sdW1uc30pLGU9aS5wYWdlYWJsZSx5dChlKSYmZS5wYWdlU2l6ZSE9PXQmJihyLnBhZ2VTaXplPWUucGFnZVNpemUpKSxuLmRhdGFTb3VyY2UmJm4uX3JlZnJlc2hIYW5kbGVyP24uZGF0YVNvdXJjZS51bmJpbmQoR3Qsbi5fcmVmcmVzaEhhbmRsZXIpLnVuYmluZChNdCxuLl9wcm9ncmVzc0hhbmRsZXIpLnVuYmluZChQdCxuLl9lcnJvckhhbmRsZXIpOihuLl9yZWZyZXNoSGFuZGxlcj1UdChuLnJlZnJlc2gsbiksbi5fcHJvZ3Jlc3NIYW5kbGVyPVR0KG4uX3JlcXVlc3RTdGFydCxuKSxuLl9lcnJvckhhbmRsZXI9VHQobi5fZXJyb3IsbikpLG4uZGF0YVNvdXJjZT1wdC5jcmVhdGUocikuYmluZChHdCxuLl9yZWZyZXNoSGFuZGxlcikuYmluZChNdCxuLl9wcm9ncmVzc0hhbmRsZXIpLmJpbmQoUHQsbi5fZXJyb3JIYW5kbGVyKX0sX2Vycm9yOmZ1bmN0aW9uKCl7dGhpcy5fcHJvZ3Jlc3MoITEpfSxfcmVxdWVzdFN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5fcHJvZ3Jlc3MoITApfSxfbW9kZWxDaGFuZ2U6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG8sYSxzLGwsYyxkLHU9dGhpcyxoPXUudGJvZHkscD10Lm1vZGVsLGY9dS50Ym9keS5maW5kKFwidHJbXCIrdXQuYXR0cihcInVpZFwiKStcIj1cIitwLnVpZCtcIl1cIiksZz1mLmhhc0NsYXNzKFwiay1hbHRcIiksbT11Ll9pdGVtcyhoKS5pbmRleChmKSx2PXUubG9ja2VkQ29udGVudDtpZih2JiYobj11Ll9yZWxhdGVkUm93KGYpKSxmLmFkZChuKS5jaGlsZHJlbihcIi5rLWVkaXQtY2VsbFwiKS5sZW5ndGgmJiF1Lm9wdGlvbnMucm93VGVtcGxhdGUpZi5hZGQobikuY2hpbGRyZW4oXCI6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpLmVhY2goZnVuY3Rpb24oKXtpPWUodGhpcykscj1MKHUuY29sdW1ucylbdS5jZWxsSW5kZXgoaSldLHIuZmllbGQ9PT10LmZpZWxkJiYoaS5oYXNDbGFzcyhcImstZWRpdC1jZWxsXCIpP2kuYWRkQ2xhc3MoXCJrLWRpcnR5LWNlbGxcIik6KHUuX2Rpc3BsYXlDZWxsKGkscixwKSxlKCc8c3BhbiBjbGFzcz1cImstZGlydHlcIi8+JykucHJlcGVuZFRvKGkpKSl9KTtlbHNlIGlmKCFmLmhhc0NsYXNzKFwiay1ncmlkLWVkaXQtcm93XCIpKXtmb3Iocz1lKCkuYWRkKGYpLHYmJihvPShnP3UubG9ja2VkQWx0Um93VGVtcGxhdGU6dS5sb2NrZWRSb3dUZW1wbGF0ZSkocCkscz1zLmFkZChuKSxuLnJlcGxhY2VXaXRoKG8pKSxvPShnP3UuYWx0Um93VGVtcGxhdGU6dS5yb3dUZW1wbGF0ZSkocCksZi5yZXBsYWNlV2l0aChvKSxvPXUuX2l0ZW1zKGgpLmVxKG0pLHYmJihmPWYuYWRkKG4pLG49dS5fcmVsYXRlZFJvdyhvKVswXSxldChvWzBdLG4pLG89by5hZGQobikpLGE9dS5vcHRpb25zLnNlbGVjdGFibGUsYSYmZi5oYXNDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIikmJnUuc2VsZWN0KG8pLGM9cy5jaGlsZHJlbihcIjpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIiksbD1vLmNoaWxkcmVuKFwiOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKSxtPTAsZD11LmNvbHVtbnMubGVuZ3RoO2Q+bTttKyspcj11LmNvbHVtbnNbbV0saT1sLmVxKG0pLGEmJmMuZXEobSkuaGFzQ2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIpJiZpLmFkZENsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiKSxyLmZpZWxkPT09dC5maWVsZCYmZSgnPHNwYW4gY2xhc3M9XCJrLWRpcnR5XCIvPicpLnByZXBlbmRUbyhpKTt1LnRyaWdnZXIoXCJpdGVtQ2hhbmdlXCIse2l0ZW06byxkYXRhOnAsbnM6aHR9KX19LF9wYWdlYWJsZTpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4ub3B0aW9ucy5wYWdlYWJsZTtpJiYodD1uLndyYXBwZXIuY2hpbGRyZW4oXCJkaXYuay1ncmlkLXBhZ2VyXCIpLHQubGVuZ3RofHwodD1lKCc8ZGl2IGNsYXNzPVwiay1wYWdlci13cmFwIGstZ3JpZC1wYWdlclwiLz4nKS5hcHBlbmRUbyhuLndyYXBwZXIpKSxuLnBhZ2VyJiZuLnBhZ2VyLmRlc3Ryb3koKSxuLnBhZ2VyPVwib2JqZWN0XCI9PXR5cGVvZiBpJiZpIGluc3RhbmNlb2YgdXQudWkuUGFnZXI/aTpuZXcgdXQudWkuUGFnZXIodCx3dCh7fSxpLHtkYXRhU291cmNlOm4uZGF0YVNvdXJjZX0pKSl9LF9mb290ZXI6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscixhPXRoaXMscz1hLmRhdGFTb3VyY2UuYWdncmVnYXRlcygpLGw9XCJcIixjPWEuZm9vdGVyVGVtcGxhdGUsZD1hLm9wdGlvbnMsdT1hLmZvb3Rlcnx8YS53cmFwcGVyLmZpbmQoXCIuay1ncmlkLWZvb3RlclwiKTtjPyhzPUF0KHMpP28oYS5kYXRhU291cmNlLmFnZ3JlZ2F0ZSgpKTpzLGw9ZShhLl93cmFwRm9vdGVyKGMocykpKSx1Lmxlbmd0aD8obj1sLGEuYW5ndWxhcihcImNsZWFudXBcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czp1LmdldCgpfX0pLHUucmVwbGFjZVdpdGgobiksdT1hLmZvb3Rlcj1uKTp1PWEuZm9vdGVyPWQuc2Nyb2xsYWJsZT9kLnBhZ2VhYmxlP2wuaW5zZXJ0QmVmb3JlKGEud3JhcHBlci5jaGlsZHJlbihcImRpdi5rLWdyaWQtcGFnZXJcIikpOmwuYXBwZW5kVG8oYS53cmFwcGVyKTpsLmluc2VydEJlZm9yZShhLnRib2R5KSxhLmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6dS5maW5kKFwidGRcIikuZ2V0KCksZGF0YTpidChhLmNvbHVtbnMsZnVuY3Rpb24oZSl7cmV0dXJue2NvbHVtbjplLGFnZ3JlZ2F0ZTpzW2UuZmllbGRdfX0pfX0pKTp1JiYhYS5mb290ZXImJihhLmZvb3Rlcj11KSx1Lmxlbmd0aCYmKGQuc2Nyb2xsYWJsZSYmKHQ9dS5hdHRyKFwidGFiaW5kZXhcIiwtMSkuY2hpbGRyZW4oXCIuay1ncmlkLWZvb3Rlci13cmFwXCIpLGEuc2Nyb2xsYWJsZXM9YS5zY3JvbGxhYmxlcy5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4hZSh0aGlzKS5pcyhcIi5rLWdyaWQtZm9vdGVyLXdyYXBcIil9KS5hZGQodCkpLGEuX2Zvb3RlcldpZHRoJiZ1LmZpbmQoXCJ0YWJsZVwiKS5jc3MoXCJ3aWR0aFwiLGEuX2Zvb3RlcldpZHRoKSx0JiYoaT1hLmNvbnRlbnQuc2Nyb2xsTGVmdCgpLHI9ZC5zY3JvbGxhYmxlIT09ITAmJmQuc2Nyb2xsYWJsZS52aXJ0dWFsJiYhYS52aXJ0dWFsU2Nyb2xsYWJsZSxyJiYoaT1hLndyYXBwZXIuZmluZChcIi5rLXZpcnR1YWwtc2Nyb2xsYWJsZS13cmFwXCIpLnNjcm9sbExlZnQoKSksdC5zY3JvbGxMZWZ0KGkpKSksYS5sb2NrZWRDb250ZW50JiYoYS5fYXBwZW5kTG9ja2VkQ29sdW1uRm9vdGVyKCksYS5fYXBwbHlMb2NrZWRDb250YWluZXJzV2lkdGgoKSxhLl9zeW5jTG9ja2VkRm9vdGVySGVpZ2h0KCkpfSxfd3JhcEZvb3RlcjpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9XCJcIixyPXV0LnN1cHBvcnQubW9iaWxlT1M/MDp1dC5zdXBwb3J0LnNjcm9sbGJhcigpO3JldHVybiBuLm9wdGlvbnMuc2Nyb2xsYWJsZT8oaT1lKCc8ZGl2IGNsYXNzPVwiay1ncmlkLWZvb3RlclwiPjxkaXYgY2xhc3M9XCJrLWdyaWQtZm9vdGVyLXdyYXBcIj48dGFibGUnKyhibj8nIGNlbGxzcGFjaW5nPVwiMFwiJzpcIlwiKStcIj48dGJvZHk+XCIrdCtcIjwvdGJvZHk+PC90YWJsZT48L2Rpdj48L2Rpdj5cIiksbi5fYXBwZW5kQ29scyhpLmZpbmQoXCJ0YWJsZVwiKSksaS5jc3MoeW4/XCJwYWRkaW5nLWxlZnRcIjpcInBhZGRpbmctcmlnaHRcIixyKSxpKTonPHRmb290IGNsYXNzPVwiay1ncmlkLWZvb3RlclwiPicrdCtcIjwvdGZvb3Q+XCJ9LF9jb2x1bW5NZW51OmZ1bmN0aW9uKCl7dmFyIGUsbixpLHIsbyxhLHMsbCxjLGQ9dGhpcyx1PUwoZC5jb2x1bW5zKSxoPWQub3B0aW9ucyxwPWguY29sdW1uTWVudSxmPWt0KGQuY29sdW1ucyxmdW5jdGlvbihlKXtyZXR1cm4gZS5jb2x1bW5zIT09dH0pLmxlbmd0aD4wLGc9dGhpcy5faXNNb2JpbGUsbT1mdW5jdGlvbihlKXtkLnRyaWdnZXIoanQse2ZpZWxkOmUuZmllbGQsY29udGFpbmVyOmUuY29udGFpbmVyfSl9LHY9ZnVuY3Rpb24oZSl7bnQoZS5jbG9zZXN0KFwidGFibGVcIiksITApfSxfPWguJGFuZ3VsYXI7aWYocClmb3IoXCJib29sZWFuXCI9PXR5cGVvZiBwJiYocD17fSksYT1PKGQudGhlYWQpLHM9MCxsPWEubGVuZ3RoO2w+cztzKyspbj11W3NdLGM9YS5lcShzKSxuLmNvbW1hbmR8fCFuLmZpZWxkJiYhYy5hdHRyKFwiZGF0YS1cIit1dC5ucytcImZpZWxkXCIpfHwoZT1jLmRhdGEoXCJrZW5kb0NvbHVtbk1lbnVcIiksZSYmZS5kZXN0cm95KCkscj1uLnNvcnRhYmxlIT09ITEmJnAuc29ydGFibGUhPT0hMSYmaC5zb3J0YWJsZSE9PSExP3d0KHt9LGguc29ydGFibGUse2NvbXBhcmU6KG4uc29ydGFibGV8fHt9KS5jb21wYXJlfSk6ITEsbz1oLmZpbHRlcmFibGUmJm4uZmlsdGVyYWJsZSE9PSExJiZwLmZpbHRlcmFibGUhPT0hMT93dCh7cGFuZTpkLnBhbmV9LG4uZmlsdGVyYWJsZSxoLmZpbHRlcmFibGUpOiExLGk9e2RhdGFTb3VyY2U6ZC5kYXRhU291cmNlLHZhbHVlczpuLnZhbHVlcyxjb2x1bW5zOnAuY29sdW1ucyxzb3J0YWJsZTpyLGZpbHRlcmFibGU6byxtZXNzYWdlczpwLm1lc3NhZ2VzLG93bmVyOmQsY2xvc2VDYWxsYmFjazp2LGluaXQ6bSxwYW5lOmQucGFuZSxmaWx0ZXI6Zz9cIjpub3QoLmstY29sdW1uLWFjdGl2ZSlcIjpcIlwiLGxvY2tlZENvbHVtbnM6IWYmJm4ubG9ja2FibGUhPT0hMSYmSSh1KS5sZW5ndGg+MH0sXyYmKGkuJGFuZ3VsYXI9XyksYy5rZW5kb0NvbHVtbk1lbnUoaSkpfSxfaGVhZGVyQ2VsbHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aGVhZC5maW5kKFwidGhcIikuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKTtyZXR1cm4hdC5oYXNDbGFzcyhcImstZ3JvdXAtY2VsbFwiKSYmIXQuaGFzQ2xhc3MoXCJrLWhpZXJhcmNoeS1jZWxsXCIpfSl9LF9maWx0ZXJhYmxlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixvLGEscz10aGlzLGw9TChzLmNvbHVtbnMpLGM9ZnVuY3Rpb24oZSl7cy50cmlnZ2VyKFd0LHtmaWVsZDplLmZpZWxkLGNvbnRhaW5lcjplLmNvbnRhaW5lcn0pfSxkPWZ1bmN0aW9uKGUpe250KGUuY2xvc2VzdChcInRhYmxlXCIpLCEwKX0sdT1zLm9wdGlvbnMuZmlsdGVyYWJsZTtpZih1JiZ0eXBlb2YgdS5tb2RlPT1jbiYmLTE9PXUubW9kZS5pbmRleE9mKFwibWVudVwiKSYmKHU9ITEpLHUmJiFzLm9wdGlvbnMuY29sdW1uTWVudSlmb3IodD1PKHMudGhlYWQpLGk9MCxyPXQubGVuZ3RoO3I+aTtpKyspbj10LmVxKGkpLGxbaV0uZmlsdGVyYWJsZT09PSExfHxsW2ldLmNvbW1hbmR8fCFsW2ldLmZpZWxkJiYhbi5hdHRyKFwiZGF0YS1cIit1dC5ucytcImZpZWxkXCIpfHwoZT1uLmRhdGEoXCJrZW5kb0ZpbHRlck1lbnVcIiksZSYmZS5kZXN0cm95KCksbz1sW2ldLmZpbHRlcmFibGUsYT13dCh7fSx1LG8se2RhdGFTb3VyY2U6cy5kYXRhU291cmNlLHZhbHVlczpsW2ldLnZhbHVlcyxjbG9zZUNhbGxiYWNrOmQsaW5pdDpjLHBhbmU6cy5wYW5lfSksbyYmby5tZXNzYWdlcyYmKGEubWVzc2FnZXM9d3QoITAse30sdS5tZXNzYWdlcyxvLm1lc3NhZ2VzKSksbi5rZW5kb0ZpbHRlck1lbnUoYSkpfSxfZmlsdGVyUm93OmZ1bmN0aW9uKCl7dmFyIHQsbixpLHIsbyxhLHMsbCxjLGQsdSxoLHA9dGhpcztpZihwLl9oYXNGaWx0ZXJSb3coKSlmb3IodD1MKHAuY29sdW1ucyksbj1wLm9wdGlvbnMuZmlsdGVyYWJsZSxpPXAudGhlYWQuZmluZChcIi5rLWZpbHRlci1yb3dcIiksdGhpcy5fdXBkYXRlSGVhZGVyKHRoaXMuZGF0YVNvdXJjZS5ncm91cCgpLmxlbmd0aCkscj0wO3QubGVuZ3RoPnI7cisrKWlmKGE9dFtyXSxzPXAub3B0aW9ucy5maWx0ZXJhYmxlLm9wZXJhdG9ycyxsPSExLGM9ZShcIjx0aC8+XCIpLGQ9YS5maWVsZCxhLmhpZGRlbiYmYy5oaWRlKCksaS5hcHBlbmQoYyksZCYmYS5maWx0ZXJhYmxlIT09ITEpe2lmKHU9YS5maWx0ZXJhYmxlJiZhLmZpbHRlcmFibGUuY2VsbHx8e30sbz1wLm9wdGlvbnMuZGF0YVNvdXJjZSxvIGluc3RhbmNlb2YgcHQmJihvPXAub3B0aW9ucy5kYXRhU291cmNlLm9wdGlvbnMpLGg9d3QoITAse30sbi5tZXNzYWdlcyksYS5maWx0ZXJhYmxlJiZ3dCghMCxoLGEuZmlsdGVyYWJsZS5tZXNzYWdlcyksdS5lbmFibGVkPT09ITEpe2MuaHRtbChcIiZuYnNwO1wiKTtjb250aW51ZX11LmRhdGFTb3VyY2UmJihvPXUuZGF0YVNvdXJjZSxsPSEwKSxhLmZpbHRlcmFibGUmJmEuZmlsdGVyYWJsZS5vcGVyYXRvcnMmJihzPWEuZmlsdGVyYWJsZS5vcGVyYXRvcnMpLGUoXCI8c3Bhbi8+XCIpLmF0dHIodXQuYXR0cihcImZpZWxkXCIpLGQpLmtlbmRvRmlsdGVyQ2VsbCh7ZGF0YVNvdXJjZTpwLmRhdGFTb3VyY2Usc3VnZ2VzdERhdGFTb3VyY2U6byxjdXN0b21EYXRhU291cmNlOmwsZmllbGQ6ZCxtZXNzYWdlczpoLHZhbHVlczphLnZhbHVlcyx0ZW1wbGF0ZTp1LnRlbXBsYXRlLGRlbGF5OnUuZGVsYXksaW5wdXRXaWR0aDp1LmlucHV0V2lkdGgsc3VnZ2VzdGlvbk9wZXJhdG9yOnUuc3VnZ2VzdGlvbk9wZXJhdG9yLG1pbkxlbmd0aDp1Lm1pbkxlbmd0aCxkYXRhVGV4dEZpZWxkOnUuZGF0YVRleHRGaWVsZCxvcGVyYXRvcjp1Lm9wZXJhdG9yLG9wZXJhdG9yczpzLHNob3dPcGVyYXRvcnM6dS5zaG93T3BlcmF0b3JzfSkuYXBwZW5kVG8oYyl9ZWxzZSBjLmh0bWwoXCImbmJzcDtcIil9LF9zb3J0YWJsZTpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbyxhPXRoaXMscz1MKGEuY29sdW1ucyksbD1hLm9wdGlvbnMuc29ydGFibGU7aWYobCl7Zm9yKGk9TyhhLnRoZWFkKSxyPTAsbz1pLmxlbmd0aDtvPnI7cisrKWU9c1tyXSxlLnNvcnRhYmxlIT09ITEmJiFlLmNvbW1hbmQmJmUuZmllbGQmJihuPWkuZXEociksdD1uLmRhdGEoXCJrZW5kb0NvbHVtblNvcnRlclwiKSx0JiZ0LmRlc3Ryb3koKSxuLmF0dHIoXCJkYXRhLVwiK3V0Lm5zK1wiZmllbGRcIixlLmZpZWxkKS5rZW5kb0NvbHVtblNvcnRlcih3dCh7fSxsLGUuc29ydGFibGUse2RhdGFTb3VyY2U6YS5kYXRhU291cmNlLGFyaWE6ITAsZmlsdGVyOlwiOm5vdCguay1jb2x1bW4tYWN0aXZlKVwifSkpKTtpPW51bGx9fSxfY29sdW1uczpmdW5jdGlvbih0KXt2YXIgbixpLHIsbz10aGlzLGE9by50YWJsZSxzPWEuZmluZChcImNvbFwiKSxsPW8ub3B0aW9ucy5kYXRhU291cmNlO2lmKHQ9dC5sZW5ndGg/dDpidChhLmZpbmQoXCJ0aFwiKSxmdW5jdGlvbih0LG4pe3Q9ZSh0KTt2YXIgaT10LmF0dHIodXQuYXR0cihcInNvcnRhYmxlXCIpKSxyPXQuYXR0cih1dC5hdHRyKFwiZmlsdGVyYWJsZVwiKSksbz10LmF0dHIodXQuYXR0cihcInR5cGVcIikpLGE9dC5hdHRyKHV0LmF0dHIoXCJncm91cGFibGVcIikpLGw9dC5hdHRyKHV0LmF0dHIoXCJmaWVsZFwiKSksYz10LmF0dHIodXQuYXR0cihcIm1lbnVcIikpO3JldHVybiBsfHwobD10LnRleHQoKS5yZXBsYWNlKC9cXHN8W15BLXowLTldL2csXCJcIikpLHtmaWVsZDpsLHR5cGU6byxzb3J0YWJsZTpcImZhbHNlXCIhPT1pLGZpbHRlcmFibGU6XCJmYWxzZVwiIT09cixncm91cGFibGU6XCJmYWxzZVwiIT09YSxtZW51OmMsdGVtcGxhdGU6dC5hdHRyKHV0LmF0dHIoXCJ0ZW1wbGF0ZVwiKSksd2lkdGg6cy5lcShuKS5jc3MoXCJ3aWR0aFwiKX19KSxuPSEoby50YWJsZS5maW5kKFwidGJvZHkgdHJcIikubGVuZ3RoPjAmJighbHx8IWwudHJhbnNwb3J0KSksby5vcHRpb25zLnNjcm9sbGFibGUpe2lmKHI9dCxpPUkodCksdD16KHQpLGkubGVuZ3RoPjAmJjA9PT10Lmxlbmd0aCl0aHJvdyBFcnJvcihcIlRoZXJlIHNob3VsZCBiZSBhdCBsZWFzdCBvbmUgbm9uIGxvY2tlZCBjb2x1bW5zXCIpO0coby5lbGVtZW50LmZpbmQoXCJ0cjpoYXModGgpOmZpcnN0XCIpLmZpbmQoXCJ0aDpub3QoLmstZ3JvdXAtY2VsbClcIiksciksdD1pLmNvbmNhdCh0KX1vLmNvbHVtbnM9Yyh0LG4pfSxfZ3JvdXBzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kYXRhU291cmNlLmdyb3VwKCk7cmV0dXJuIGU/ZS5sZW5ndGg6MH0sX3RtcGw6ZnVuY3Rpb24oZSx0LHIsbyl7dmFyIGEscyxsLGMsZD10aGlzLHU9d3Qoe30sdXQuVGVtcGxhdGUsZC5vcHRpb25zLnRlbXBsYXRlU2V0dGluZ3MpLGg9dC5sZW5ndGgscD17c3RvcmFnZTp7fSxjb3VudDowfSxmPWQuX2hhc0RldGFpbHMoKSxnPVtdLG09ZC5fZ3JvdXBzKCk7aWYoIWUpe2ZvcihlPVwiPHRyXCIsciYmZy5wdXNoKFwiay1hbHRcIiksZiYmZy5wdXNoKFwiay1tYXN0ZXItcm93XCIpLGcubGVuZ3RoJiYoZSs9JyBjbGFzcz1cIicrZy5qb2luKFwiIFwiKSsnXCInKSxoJiYoZSs9XCIgXCIrdXQuYXR0cihcInVpZFwiKSsnPVwiIz0nK3V0LmV4cHIoXCJ1aWRcIix1LnBhcmFtTmFtZSkrJyNcIicpLGUrPVwiIHJvbGU9J3Jvdyc+XCIsbT4wJiYhbyYmKGUrPW4obSkpLGYmJihlKz0nPHRkIGNsYXNzPVwiay1oaWVyYXJjaHktY2VsbFwiPjxhIGNsYXNzPVwiay1pY29uIGstcGx1c1wiIGhyZWY9XCJcXFxcI1wiIHRhYmluZGV4PVwiLTFcIj48L2E+PC90ZD4nKSxhPTA7aD5hO2ErKylsPXRbYV0scz1sLnRlbXBsYXRlLGM9dHlwZW9mIHMsZSs9XCI8dGRcIitpKGwuYXR0cmlidXRlcykrXCIgcm9sZT0nZ3JpZGNlbGwnPlwiLGUrPWQuX2NlbGxUbXBsKGwscCksZSs9XCI8L3RkPlwiO2UrPVwiPC90cj5cIn1yZXR1cm4gZT11dC50ZW1wbGF0ZShlLHUpLHAuY291bnQ+MD9UdChlLHAuc3RvcmFnZSk6ZX0sX2hlYWRlckNlbGxUZXh0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj13dCh7fSx1dC5UZW1wbGF0ZSx0Lm9wdGlvbnMudGVtcGxhdGVTZXR0aW5ncyksaT1lLmhlYWRlclRlbXBsYXRlLHI9dHlwZW9mIGksbz1lLnRpdGxlfHxlLmZpZWxkfHxcIlwiO3JldHVybiByPT09bG4/bz11dC50ZW1wbGF0ZShpLG4pKHt9KTpyPT09Y24mJihvPWkpLG99LF9jZWxsVG1wbDpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj10aGlzLG89d3Qoe30sdXQuVGVtcGxhdGUsci5vcHRpb25zLnRlbXBsYXRlU2V0dGluZ3MpLGE9ZS50ZW1wbGF0ZSxzPW8ucGFyYW1OYW1lLGw9ZS5maWVsZCxjPVwiXCIsZD1lLmZvcm1hdCx1PXR5cGVvZiBhLGg9ZS52YWx1ZXM7aWYoZS5jb21tYW5kKXtpZih4dChlLmNvbW1hbmQpKXtmb3Iobj0wLGk9ZS5jb21tYW5kLmxlbmd0aDtpPm47bisrKWMrPXIuX2NyZWF0ZUJ1dHRvbihlLmNvbW1hbmRbbl0pO3JldHVybiBjLnJlcGxhY2UoZm4sXCJcXFxcI1wiKX1yZXR1cm4gci5fY3JlYXRlQnV0dG9uKGUuY29tbWFuZCkucmVwbGFjZShmbixcIlxcXFwjXCIpfXJldHVybiB1PT09bG4/KHQuc3RvcmFnZVtcInRtcGxcIit0LmNvdW50XT1hLGMrPVwiIz10aGlzLnRtcGxcIit0LmNvdW50K1wiKFwiK3MrXCIpI1wiLHQuY291bnQrKyk6dT09PWNuP2MrPWE6aCYmaC5sZW5ndGgmJnl0KGhbMF0pJiZcInZhbHVlXCJpbiBoWzBdJiZsPyhjKz1cIiN2YXIgdiA9XCIrdXQuc3RyaW5naWZ5KHEoaCkpLnJlcGxhY2UoZm4sXCJcXFxcI1wiKStcIiNcIixjKz1cIiN2YXIgZiA9IHZbXCIsby51c2VXaXRoQmxvY2t8fChjKz1zK1wiLlwiKSxjKz1sK1wiXSNcIixjKz1cIiR7ZiAhPSBudWxsID8gZiA6ICcnfVwiKTooYys9ZS5lbmNvZGVkP1wiIzpcIjpcIiM9XCIsZCYmKGMrPSdrZW5kby5mb3JtYXQoXCInK2QucmVwbGFjZShwbixcIlxcXFwkMVwiKSsnXCIsJyksbD8obD11dC5leHByKGwscyksYys9bCtcIj09bnVsbD8nJzpcIitsKTpjKz1cIicnXCIsZCYmKGMrPVwiKVwiKSxjKz1cIiNcIiksY30sX3RlbXBsYXRlczpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMsaT10LmRhdGFTb3VyY2Uscj1pLmdyb3VwKCksbz10LmZvb3Rlcnx8dC53cmFwcGVyLmZpbmQoXCIuay1ncmlkLWZvb3RlclwiKSxhPWkuYWdncmVnYXRlKCkscz1MKHQuY29sdW1ucyksbD1MKEkodC5jb2x1bW5zKSksYz1uLnNjcm9sbGFibGU/TCh6KHQuY29sdW1ucykpOnM7aWYobi5zY3JvbGxhYmxlJiZsLmxlbmd0aCl7aWYobi5yb3dUZW1wbGF0ZXx8bi5hbHRSb3dUZW1wbGF0ZSl0aHJvdyBFcnJvcihcIkhhdmluZyBib3RoIHJvdyB0ZW1wbGF0ZSBhbmQgbG9ja2VkIGNvbHVtbnMgaXMgbm90IHN1cHBvcnRlZFwiKTt0LnJvd1RlbXBsYXRlPXQuX3RtcGwobi5yb3dUZW1wbGF0ZSxjLCExLCEwKSx0LmFsdFJvd1RlbXBsYXRlPXQuX3RtcGwobi5hbHRSb3dUZW1wbGF0ZXx8bi5yb3dUZW1wbGF0ZSxjLCEwLCEwKSx0LmxvY2tlZFJvd1RlbXBsYXRlPXQuX3RtcGwobi5yb3dUZW1wbGF0ZSxsKSx0LmxvY2tlZEFsdFJvd1RlbXBsYXRlPXQuX3RtcGwobi5hbHRSb3dUZW1wbGF0ZXx8bi5yb3dUZW1wbGF0ZSxsLCEwKX1lbHNlIHQucm93VGVtcGxhdGU9dC5fdG1wbChuLnJvd1RlbXBsYXRlLGMpLHQuYWx0Um93VGVtcGxhdGU9dC5fdG1wbChuLmFsdFJvd1RlbXBsYXRlfHxuLnJvd1RlbXBsYXRlLGMsITApO1xudC5faGFzRGV0YWlscygpJiYodC5kZXRhaWxUZW1wbGF0ZT10Ll9kZXRhaWxUbXBsKG4uZGV0YWlsVGVtcGxhdGV8fFwiXCIpKSwodC5fZ3JvdXAmJiFBdChhKXx8IUF0KGEpJiYhby5sZW5ndGh8fGt0KHMsZnVuY3Rpb24oZSl7cmV0dXJuIGUuZm9vdGVyVGVtcGxhdGV9KS5sZW5ndGgpJiYodC5mb290ZXJUZW1wbGF0ZT10Ll9mb290ZXJUbXBsKHMsYSxcImZvb3RlclRlbXBsYXRlXCIsXCJrLWZvb3Rlci10ZW1wbGF0ZVwiKSksciYma3QocyxmdW5jdGlvbihlKXtyZXR1cm4gZS5ncm91cEZvb3RlclRlbXBsYXRlfSkubGVuZ3RoJiYoYT1lLm1hcChyLGZ1bmN0aW9uKGUpe3JldHVybiBlLmFnZ3JlZ2F0ZXN9KSx0Lmdyb3VwRm9vdGVyVGVtcGxhdGU9dC5fZm9vdGVyVG1wbChjLGEsXCJncm91cEZvb3RlclRlbXBsYXRlXCIsXCJrLWdyb3VwLWZvb3RlclwiLGwubGVuZ3RoKSxuLnNjcm9sbGFibGUmJmwubGVuZ3RoJiYodC5sb2NrZWRHcm91cEZvb3RlclRlbXBsYXRlPXQuX2Zvb3RlclRtcGwobCxhLFwiZ3JvdXBGb290ZXJUZW1wbGF0ZVwiLFwiay1ncm91cC1mb290ZXJcIikpKX0sX2Zvb3RlclRtcGw6ZnVuY3Rpb24oZSx0LHIsYSxzKXt2YXIgbCxjLGQsdSxoLHA9dGhpcyxmPXd0KHt9LHV0LlRlbXBsYXRlLHAub3B0aW9ucy50ZW1wbGF0ZVNldHRpbmdzKSxnPWYucGFyYW1OYW1lLG09XCJcIix2PXt9LF89MCx5PXt9LHc9cC5fZ3JvdXBzKCksYj1vKHQpO2ZvcihtKz0nPHRyIGNsYXNzPVwiJythKydcIj4nLHc+MCYmIXMmJihtKz1uKHcpKSxwLl9oYXNEZXRhaWxzKCkmJihtKz0nPHRkIGNsYXNzPVwiay1oaWVyYXJjaHktY2VsbFwiPiZuYnNwOzwvdGQ+JyksbD0wLGM9ZS5sZW5ndGg7Yz5sO2wrKyloPWVbbF0sZD1oW3JdLHU9dHlwZW9mIGQsbSs9XCI8dGRcIitpKGguZm9vdGVyQXR0cmlidXRlcykrXCI+XCIsZD8odSE9PWxuJiYoeT1iW2guZmllbGRdP3d0KHt9LGYse3BhcmFtTmFtZTpnK1wiWydcIitoLmZpZWxkK1wiJ11cIn0pOnt9LGQ9dXQudGVtcGxhdGUoZCx5KSksdltcInRtcGxcIitfXT1kLG0rPVwiIz10aGlzLnRtcGxcIitfK1wiKFwiK2crXCIpI1wiLF8rKyk6bSs9XCImbmJzcDtcIixtKz1cIjwvdGQ+XCI7cmV0dXJuIG0rPVwiPC90cj5cIixtPXV0LnRlbXBsYXRlKG0sZiksXz4wP1R0KG0sdik6bX0sX2RldGFpbFRtcGw6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxpPVwiXCIscj13dCh7fSx1dC5UZW1wbGF0ZSx0Lm9wdGlvbnMudGVtcGxhdGVTZXR0aW5ncyksbz1yLnBhcmFtTmFtZSxhPXt9LHM9MCxsPXQuX2dyb3VwcygpLGM9ZihMKHQuY29sdW1ucykpLmxlbmd0aCxkPXR5cGVvZiBlO3JldHVybiBpKz0nPHRyIGNsYXNzPVwiay1kZXRhaWwtcm93XCI+JyxsPjAmJihpKz1uKGwpKSxpKz0nPHRkIGNsYXNzPVwiay1oaWVyYXJjaHktY2VsbFwiPjwvdGQ+PHRkIGNsYXNzPVwiay1kZXRhaWwtY2VsbFwiJysoYz8nIGNvbHNwYW49XCInK2MrJ1wiJzpcIlwiKStcIj5cIixkPT09bG4/KGFbXCJ0bXBsXCIrc109ZSxpKz1cIiM9dGhpcy50bXBsXCIrcytcIihcIitvK1wiKSNcIixzKyspOmkrPWUsaSs9XCI8L3RkPjwvdHI+XCIsaT11dC50ZW1wbGF0ZShpLHIpLHM+MD9UdChpLGEpOml9LF9oYXNEZXRhaWxzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbnVsbCE9PWUub3B0aW9ucy5kZXRhaWxUZW1wbGF0ZXx8KGUuX2V2ZW50c1tVdF18fFtdKS5sZW5ndGh9LF9oYXNGaWx0ZXJSb3c6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuZmlsdGVyYWJsZSxuPXQmJnR5cGVvZiB0Lm1vZGU9PWNuJiYtMSE9dC5tb2RlLmluZGV4T2YoXCJyb3dcIiksaT10aGlzLmNvbHVtbnMscj1lLmdyZXAoaSxmdW5jdGlvbihlKXtyZXR1cm4gZS5maWx0ZXJhYmxlPT09ITF9KTtyZXR1cm4gaS5sZW5ndGgmJnIubGVuZ3RoPT1pLmxlbmd0aCYmKG49ITEpLG59LF9kZXRhaWxzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0Lm9wdGlvbnMuc2Nyb2xsYWJsZSYmdC5faGFzRGV0YWlscygpJiZJKHQuY29sdW1ucykubGVuZ3RoKXRocm93IEVycm9yKFwiSGF2aW5nIGJvdGggZGV0YWlsIHRlbXBsYXRlIGFuZCBsb2NrZWQgY29sdW1ucyBpcyBub3Qgc3VwcG9ydGVkXCIpO3QudGFibGUub24ob24rT3QsXCIuay1oaWVyYXJjaHktY2VsbCAuay1wbHVzLCAuay1oaWVyYXJjaHktY2VsbCAuay1taW51c1wiLGZ1bmN0aW9uKG4pe3ZhciBpLHIsbz1lKHRoaXMpLGE9by5oYXNDbGFzcyhcImstcGx1c1wiKSxzPW8uY2xvc2VzdChcInRyLmstbWFzdGVyLXJvd1wiKSxsPXQuZGV0YWlsVGVtcGxhdGUsYz10Ll9oYXNEZXRhaWxzKCk7cmV0dXJuIG8udG9nZ2xlQ2xhc3MoXCJrLXBsdXNcIiwhYSkudG9nZ2xlQ2xhc3MoXCJrLW1pbnVzXCIsYSksaT1zLm5leHQoKSxjJiYhaS5oYXNDbGFzcyhcImstZGV0YWlsLXJvd1wiKSYmKHI9dC5kYXRhSXRlbShzKSxpPWUobChyKSkuYWRkQ2xhc3Mocy5oYXNDbGFzcyhcImstYWx0XCIpP1wiay1hbHRcIjpcIlwiKS5pbnNlcnRBZnRlcihzKSx0LmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6aS5nZXQoKSxkYXRhOlt7ZGF0YUl0ZW06cn1dfX0pLHQudHJpZ2dlcihVdCx7bWFzdGVyUm93OnMsZGV0YWlsUm93OmksZGF0YTpyLGRldGFpbENlbGw6aS5maW5kKFwiLmstZGV0YWlsLWNlbGxcIil9KSksdC50cmlnZ2VyKGE/UXQ6WHQse21hc3RlclJvdzpzLGRldGFpbFJvdzppfSksaS50b2dnbGUoYSksdC5fY3VycmVudCYmdC5fY3VycmVudC5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLGEpLG4ucHJldmVudERlZmF1bHQoKSwhMX0pfSxkYXRhSXRlbTpmdW5jdGlvbih0KXtpZih0PWUodClbMF0sIXQpcmV0dXJuIG51bGw7dmFyIG4saSxyPXRoaXMudGJvZHkuY2hpbGRyZW4oKSxvPS9rLWdyb3VwaW5nLXJvd3xrLWRldGFpbC1yb3d8ay1ncm91cC1mb290ZXIvLGE9dC5zZWN0aW9uUm93SW5kZXg7Zm9yKGk9YSxuPTA7YT5uO24rKylvLnRlc3QocltuXS5jbGFzc05hbWUpJiZpLS07cmV0dXJuIHRoaXMuX2RhdGFbaV19LGV4cGFuZFJvdzpmdW5jdGlvbih0KXtlKHQpLmZpbmQoXCI+IHRkIC5rLXBsdXMsID4gdGQgLmstaS1leHBhbmRcIikuY2xpY2soKX0sY29sbGFwc2VSb3c6ZnVuY3Rpb24odCl7ZSh0KS5maW5kKFwiPiB0ZCAuay1taW51cywgPiB0ZCAuay1pLWNvbGxhcHNlXCIpLmNsaWNrKCl9LF9jcmVhdGVIZWFkZXJDZWxsczpmdW5jdGlvbihlLG4pe3ZhciByLG8sYSxzLGwsYz10aGlzLGQ9XCJcIix1PUwoYy5jb2x1bW5zKTtmb3Iocj0wLHM9ZS5sZW5ndGg7cz5yO3IrKylvPWVbcl0uY29sdW1ufHxlW3JdLGE9Yy5faGVhZGVyQ2VsbFRleHQobyksbD1DdChvLHUpLG8uY29tbWFuZD8oZCs9XCI8dGhcIitpKG8uaGVhZGVyQXR0cmlidXRlcyksbiYmIWVbcl0uY29sU3BhbiYmKGQrPVwiIHJvd3NwYW49J1wiK24rXCInXCIpLGw+LTEmJihkKz11dC5hdHRyKFwiaW5kZXhcIikrXCI9J1wiK2wrXCInXCIpLGQrPVwiPlwiK2ErXCI8L3RoPlwiKTooZCs9XCI8dGggcm9sZT0nY29sdW1uaGVhZGVyJyBcIit1dC5hdHRyKFwiZmllbGRcIikrXCI9J1wiKyhvLmZpZWxkfHxcIlwiKStcIicgXCIsbiYmIWVbcl0uY29sU3BhbiYmKGQrPVwiIHJvd3NwYW49J1wiK24rXCInXCIpLGVbcl0uY29sU3Bhbj4xJiYoZCs9J2NvbHNwYW49XCInKyhlW3JdLmNvbFNwYW4tVChvLmNvbHVtbnMpKSsnXCIgJyxkKz11dC5hdHRyKFwiY29sc3BhblwiKStcIj0nXCIrZVtyXS5jb2xTcGFuK1wiJ1wiKSxvLnRpdGxlJiYoZCs9dXQuYXR0cihcInRpdGxlXCIpKyc9XCInK28udGl0bGUucmVwbGFjZSgvJy9nLFwiJ1wiKSsnXCIgJyksby5ncm91cGFibGUhPT10JiYoZCs9dXQuYXR0cihcImdyb3VwYWJsZVwiKStcIj0nXCIrby5ncm91cGFibGUrXCInIFwiKSxvLmFnZ3JlZ2F0ZXMmJm8uYWdncmVnYXRlcy5sZW5ndGgmJihkKz11dC5hdHRyKFwiYWdncmVnYXRlc1wiKStcIj0nXCIrby5hZ2dyZWdhdGVzK1wiJ1wiKSxsPi0xJiYoZCs9dXQuYXR0cihcImluZGV4XCIpK1wiPSdcIitsK1wiJ1wiKSxkKz1pKG8uaGVhZGVyQXR0cmlidXRlcyksZCs9XCI+XCIrYStcIjwvdGg+XCIpO3JldHVybiBkfSxfYXBwZW5kTG9ja2VkQ29sdW1uQ29udGVudDpmdW5jdGlvbigpe3ZhciB0LG4saSxyLG8sYT10aGlzLmNvbHVtbnMscz10aGlzLnRhYmxlLmZpbmQoXCJjb2xncm91cFwiKSxsPXMuZmluZChcImNvbDpub3QoLmstZ3JvdXAtY29sLC5rLWhpZXJhcmNoeS1jb2wpXCIpLGM9ZSgpLGQ9MCx1PTA7Zm9yKHQ9MCxuPWEubGVuZ3RoO24+dDt0KyspaWYoYVt0XS5sb2NrZWQpaWYocChhW3RdKSl7Zm9yKHI9MSxhW3RdLmNvbHVtbnMmJihyPUwoYVt0XS5jb2x1bW5zKS5sZW5ndGgtVChhW3RdLmNvbHVtbnMpKSxyPXJ8fDEsbz0wO3I+bztvKyspYz1jLmFkZChsLmVxKHQrdStvLWQpKTt1Kz1yLTF9ZWxzZSBkKys7aT1lKCc8ZGl2IGNsYXNzPVwiay1ncmlkLWNvbnRlbnQtbG9ja2VkXCI+PHRhYmxlJysoYm4/JyBjZWxsc3BhY2luZz1cIjBcIic6XCJcIikrXCI+PGNvbGdyb3VwLz48dGJvZHk+PC90Ym9keT48L3RhYmxlPjwvZGl2PlwiKSxzLmRldGFjaCgpLGkuZmluZChcImNvbGdyb3VwXCIpLmFwcGVuZChjKSxzLmluc2VydEJlZm9yZSh0aGlzLnRhYmxlLmZpbmQoXCJ0Ym9keVwiKSksdGhpcy5sb2NrZWRDb250ZW50PWkuaW5zZXJ0QmVmb3JlKHRoaXMuY29udGVudCksdGhpcy5sb2NrZWRUYWJsZT1pLmNoaWxkcmVuKFwidGFibGVcIil9LF9hcHBlbmRMb2NrZWRDb2x1bW5Gb290ZXI6ZnVuY3Rpb24oKXt2YXIgdCxuLGk9dGhpcyxyPWkuZm9vdGVyLG89ci5maW5kKFwiLmstZm9vdGVyLXRlbXBsYXRlPnRkXCIpLGE9ci5maW5kKFwiLmstZ3JpZC1mb290ZXItd3JhcD50YWJsZT5jb2xncm91cD5jb2xcIikscz1lKCc8ZGl2IGNsYXNzPVwiay1ncmlkLWZvb3Rlci1sb2NrZWRcIj48dGFibGU+PGNvbGdyb3VwIC8+PHRib2R5Pjx0ciBjbGFzcz1cImstZm9vdGVyLXRlbXBsYXRlXCI+PC90cj48L3Rib2R5PjwvdGFibGU+PC9kaXY+JyksbD1pLl9ncm91cHMoKSxjPWUoKSxkPWUoKTtmb3IoYz1jLmFkZChvLmZpbHRlcihcIi5rLWdyb3VwLWNlbGxcIikpLHQ9MCxuPUwoSShpLmNvbHVtbnMpKS5sZW5ndGg7bj50O3QrKyljPWMuYWRkKG8uZXEodCtsKSk7Zm9yKGQ9ZC5hZGQoYS5maWx0ZXIoXCIuay1ncm91cC1jb2xcIikpLHQ9MCxuPUwoUihpLmNvbHVtbnMpKS5sZW5ndGg7bj50O3QrKylkPWQuYWRkKGEuZXEodCtsKSk7Yy5hcHBlbmRUbyhzLmZpbmQoXCJ0clwiKSksZC5hcHBlbmRUbyhzLmZpbmQoXCJjb2xncm91cFwiKSksaS5sb2NrZWRGb290ZXI9cy5wcmVwZW5kVG8ocil9LF9hcHBlbmRMb2NrZWRDb2x1bW5IZWFkZXI6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG8sYSxzLGwsYyxkLHUsaCxmPXRoaXMsbT10aGlzLmNvbHVtbnMsdj1bXSxfPTAseT1lKCksdz1mLl9oYXNGaWx0ZXJSb3coKSxiPTAsaz1lKCkseD0wLEM9ZSgpLFM9Zi50aGVhZC5wcmV2KCkuZmluZChcImNvbDpub3QoLmstZ3JvdXAtY29sLC5rLWhpZXJhcmNoeS1jb2wpXCIpLEQ9Zi50aGVhZC5maW5kKFwidHI6Zmlyc3QgLmstaGVhZGVyOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKSxFPWYudGhlYWQuZmluZChcIi5rLWZpbHRlci1yb3dcIikuZmluZChcInRoOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKSxJPTA7Zm9yKG49MCxyPW0ubGVuZ3RoO3I+bjtuKyspe2lmKG1bbl0ubG9ja2VkKXtpZihsPUQuZXEobikseD1MKG1bbl0uY29sdW1uc3x8W10pLmxlbmd0aCxwKG1bbl0pKXtmb3IobVtuXS5jb2x1bW5zJiYoYz14LVQobVtuXS5jb2x1bW5zKSksYz1jfHwxLGQ9MDtjPmQ7ZCsrKXk9eS5hZGQoUy5lcShuK0krZC1fKSk7SSs9Yy0xfWZvcihQKFttW25dXSxOKGwpLHYsMCwwKSx4PXh8fDEsdT0wO3g+dTt1Kyspaz1rLmFkZChFLmVxKGIrdSkpO2IrPXh9bVtuXS5jb2x1bW5zJiYoXys9VChtW25dLmNvbHVtbnMpKSxwKG1bbl0pfHxfKyt9aWYodi5sZW5ndGgpe2ZvcihpPSc8ZGl2IGNsYXNzPVwiay1ncmlkLWhlYWRlci1sb2NrZWRcIiBzdHlsZT1cIndpZHRoOjFweFwiPjx0YWJsZScrKGJuPycgY2VsbHNwYWNpbmc9XCIwXCInOlwiXCIpK1wiPjxjb2xncm91cC8+PHRoZWFkPlwiLGkrPUFycmF5KHYubGVuZ3RoKzEpLmpvaW4oXCI8dHI+PC90cj5cIiksaSs9KHc/Jzx0ciBjbGFzcz1cImstZmlsdGVyLXJvd1wiIC8+JzpcIlwiKStcIjwvdGhlYWQ+PC90YWJsZT48L2Rpdj5cIixzPWUoaSksUz1zLmZpbmQoXCJjb2xncm91cFwiKSxTLmFwcGVuZChmLnRoZWFkLnByZXYoKS5maW5kKFwiY29sLmstZ3JvdXAtY29sXCIpLmFkZCh5KSksbz1zLmZpbmQoXCJ0aGVhZCB0cjpub3QoLmstZmlsdGVyLXJvdylcIiksbj0wLHI9di5sZW5ndGg7cj5uO24rKylDPWcodltuXSksby5lcShuKS5hcHBlbmQoZi50aGVhZC5maW5kKFwidHI6ZXEoXCIrbitcIikgLmstZ3JvdXAtY2VsbFwiKS5hZGQoQykpO2g9TSh0aGlzLnRoZWFkKSxoPnYubGVuZ3RoJiZBKHMsaCksYT1zLmZpbmQoXCIuay1maWx0ZXItcm93XCIpLGEuYXBwZW5kKGYudGhlYWQuZmluZChcIi5rLWZpbHRlci1yb3cgLmstZ3JvdXAtY2VsbFwiKS5hZGQoaykpLHRoaXMubG9ja2VkSGVhZGVyPXMucHJlcGVuZFRvKHQpLHRoaXMuX3N5bmNMb2NrZWRIZWFkZXJIZWlnaHQoKX19LF9yZW1vdmVMb2NrZWRDb250YWluZXJzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sb2NrZWRIZWFkZXIuYWRkKHRoaXMubG9ja2VkQ29udGVudCkuYWRkKHRoaXMubG9ja2VkRm9vdGVyKTt1dC5kZXN0cm95KGUpLGUub2ZmKE90KS5yZW1vdmUoKSx0aGlzLmxvY2tlZEhlYWRlcj10aGlzLmxvY2tlZENvbnRlbnQ9dGhpcy5sb2NrZWRGb290ZXI9bnVsbCx0aGlzLnNlbGVjdGFibGU9bnVsbH0sX3RoZWFkOmZ1bmN0aW9uKCl7dmFyIHQsbixpLHIsbz10aGlzLGE9by5jb2x1bW5zLHM9by5faGFzRGV0YWlscygpJiZhLmxlbmd0aCxsPW8uX2hhc0ZpbHRlclJvdygpLGM9XCJcIixkPW8udGFibGUuZmluZChcIj50aGVhZFwiKSx1PW8uZWxlbWVudC5maW5kKFwidGhlYWQ6Zmlyc3RcIikubGVuZ3RoPjA7aWYoZC5sZW5ndGh8fChkPWUoXCI8dGhlYWQvPlwiKS5pbnNlcnRCZWZvcmUoby50Ym9keSkpLG8ubG9ja2VkSGVhZGVyJiZvLnRoZWFkPyhuPW8udGhlYWQuZmluZChcInRyOmhhcyh0aCk6bm90KC5rLWZpbHRlci1yb3cpXCIpLmh0bWwoXCJcIiksby5fcmVtb3ZlTG9ja2VkQ29udGFpbmVycygpKTpuPW8uZWxlbWVudC5maW5kKHU/XCJ0aGVhZDpmaXJzdCB0cjpoYXModGgpOm5vdCguay1maWx0ZXItcm93KVwiOlwidHI6aGFzKHRoKTpmaXJzdFwiKSwhbi5sZW5ndGgmJihuPWQuY2hpbGRyZW4oKS5maXJzdCgpLCFuLmxlbmd0aCkpe2ZvcihpPVt7cm93U3BhbjoxLGNlbGxzOltdLGluZGV4OjB9XSxvLl9wcmVwYXJlQ29sdW1ucyhpLGEpLHQ9MDtpLmxlbmd0aD50O3QrKyljKz1cIjx0cj5cIixzJiYoYys9Jzx0aCBjbGFzcz1cImstaGllcmFyY2h5LWNlbGxcIj4mbmJzcDs8L3RoPicpLGMrPW8uX2NyZWF0ZUhlYWRlckNlbGxzKGlbdF0uY2VsbHMsaVt0XS5yb3dTcGFuKSxjKz1cIjwvdHI+XCI7bj1lKGMpfWwmJihyPWUoXCI8dHIvPlwiKSxyLmFkZENsYXNzKFwiay1maWx0ZXItcm93XCIpLHMmJnIucHJlcGVuZCgnPHRoIGNsYXNzPVwiay1oaWVyYXJjaHktY2VsbFwiPiZuYnNwOzwvdGg+JyksZC5hcHBlbmQocikpLG4uY2hpbGRyZW4oKS5sZW5ndGg/cyYmIW4uZmluZChcIi5rLWhpZXJhcmNoeS1jZWxsXCIpWzBdJiZuLnByZXBlbmQoJzx0aCBjbGFzcz1cImstaGllcmFyY2h5LWNlbGxcIj4mbmJzcDs8L3RoPicpOihjPVwiXCIscyYmKGMrPSc8dGggY2xhc3M9XCJrLWhpZXJhcmNoeS1jZWxsXCI+Jm5ic3A7PC90aD4nKSxjKz1vLl9jcmVhdGVIZWFkZXJDZWxscyhhKSxuLmh0bWwoYykpLG4uYXR0cihcInJvbGVcIixcInJvd1wiKS5maW5kKFwidGhcIikuYWRkQ2xhc3MoXCJrLWhlYWRlclwiKSxvLm9wdGlvbnMuc2Nyb2xsYWJsZXx8ZC5hZGRDbGFzcyhcImstZ3JpZC1oZWFkZXJcIiksbi5maW5kKFwic2NyaXB0XCIpLnJlbW92ZSgpLmVuZCgpLnByZXBlbmRUbyhkKSxvLnRoZWFkJiZvLl9kZXN0cm95Q29sdW1uQXR0YWNobWVudHMoKSx0aGlzLmFuZ3VsYXIoXCJjbGVhbnVwXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6ZC5maW5kKFwidGhcIikuZ2V0KCl9fSksdGhpcy5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmQuZmluZChcInRoXCIpLmdldCgpLGRhdGE6YnQoYSxmdW5jdGlvbihlKXtyZXR1cm57Y29sdW1uOmV9fSl9fSksby50aGVhZD1kLmF0dHIoXCJyb2xlXCIsXCJyb3dncm91cFwiKSxvLl9zb3J0YWJsZSgpLG8uX2ZpbHRlcmFibGUoKSxvLl9maWx0ZXJSb3coKSxvLl9zY3JvbGxhYmxlKCksby5fdXBkYXRlQ29scygpLG8uX2NvbHVtbk1lbnUoKSx0aGlzLm9wdGlvbnMuc2Nyb2xsYWJsZSYmSSh0aGlzLmNvbHVtbnMpLmxlbmd0aCYmKG8uX2FwcGVuZExvY2tlZENvbHVtbkhlYWRlcihvLnRoZWFkLmNsb3Nlc3QoXCIuay1ncmlkLWhlYWRlclwiKSksby5fYXBwZW5kTG9ja2VkQ29sdW1uQ29udGVudCgpLG8ubG9ja2VkQ29udGVudC5iaW5kKFwiRE9NTW91c2VTY3JvbGxcIitPdCtcIiBtb3VzZXdoZWVsXCIrT3QsVHQoby5fd2hlZWxTY3JvbGwsbykpLG8uX2FwcGx5TG9ja2VkQ29udGFpbmVyc1dpZHRoKCkpLG8uX3VwZGF0ZUZpcnN0Q29sdW1uQ2xhc3MoKSxvLl9yZXNpemFibGUoKSxvLl9kcmFnZ2FibGUoKSxvLl9yZW9yZGVyYWJsZSgpLG8uZ3JvdXBhYmxlJiZvLl9hdHRhY2hHcm91cGFibGUoKX0sX3VwZGF0ZUZpcnN0Q29sdW1uQ2xhc3M6ZnVuY3Rpb24oKXt2YXIgdCxuLGk9dGhpcyxyPWkuY29sdW1uc3x8W10sbz1pLl9oYXNEZXRhaWxzKCkmJnIubGVuZ3RoO298fGkuX2dyb3VwcygpfHwodD1lKCksbj1pLnRoZWFkLmZpbmQoXCI+dHI6bm90KC5rLWZpbHRlci1yb3cpOm5vdCg6Zmlyc3QpXCIpLHI9eihyKSxuLmxlbmd0aCYmclswXSYmIXJbMF0uY29sdW1ucyYmKHQ9dC5hZGQobikpLGkuX2lzTG9ja2VkKCkmJihuPWkubG9ja2VkSGVhZGVyLmZpbmQoXCJ0aGVhZD50cjpub3QoLmstZmlsdGVyLXJvdyk6bm90KDpmaXJzdClcIikscj1JKGkuY29sdW1ucyksbi5sZW5ndGgmJnJbMF0mJiFyWzBdLmNvbHVtbnMmJih0PXQuYWRkKG4pKSksdC5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKS5maW5kKFwidGhcIik7dC5yZW1vdmVDbGFzcyhcImstZmlyc3RcIiksdC5lcSgwKS5hZGRDbGFzcyhcImstZmlyc3RcIil9KSl9LF9wcmVwYXJlQ29sdW1uczpmdW5jdGlvbihlLHQsbixpKXt2YXIgcixvLGE9aXx8ZVtlLmxlbmd0aC0xXSxzPWVbYS5pbmRleCsxXSxsPTA7Zm9yKHI9MDt0Lmxlbmd0aD5yO3IrKylvPXtjb2x1bW46dFtyXSxjb2xTcGFuOjB9LGEuY2VsbHMucHVzaChvKSx0W3JdLmNvbHVtbnMmJnRbcl0uY29sdW1ucy5sZW5ndGgmJihzfHwocz17cm93U3BhbjowLGNlbGxzOltdLGluZGV4OmUubGVuZ3RofSxlLnB1c2gocykpLG8uY29sU3Bhbj10W3JdLmNvbHVtbnMubGVuZ3RoLHRoaXMuX3ByZXBhcmVDb2x1bW5zKGUsdFtyXS5jb2x1bW5zLG8scyksbCs9by5jb2xTcGFuLTEsYS5yb3dTcGFuPWUubGVuZ3RoLWEuaW5kZXgpO24mJihuLmNvbFNwYW4rPWwpfSxfd2hlZWxTY3JvbGw6ZnVuY3Rpb24odCl7dmFyIG4saSxyO3QuY3RybEtleXx8KG49dGhpcy5jb250ZW50LHRoaXMub3B0aW9ucy5zY3JvbGxhYmxlLnZpcnR1YWwmJihuPXRoaXMudmlydHVhbFNjcm9sbGFibGUudmVydGljYWxTY3JvbGxiYXIpLGk9bi5zY3JvbGxUb3AoKSxyPXV0LndoZWVsRGVsdGFZKHQpLHImJih0LnByZXZlbnREZWZhdWx0KCksZSh0LmN1cnJlbnRUYXJnZXQpLm9uZShcIndoZWVsXCIrT3QsITEpLG4uc2Nyb2xsVG9wKGkrLXIpKSl9LF9pc0xvY2tlZDpmdW5jdGlvbigpe3JldHVybiBudWxsIT10aGlzLmxvY2tlZEhlYWRlcn0sX3VwZGF0ZUNvbHM6ZnVuY3Rpb24oZSl7ZT1lfHx0aGlzLnRoZWFkLnBhcmVudCgpLmFkZCh0aGlzLnRhYmxlKSx0aGlzLl9hcHBlbmRDb2xzKGUsdGhpcy5faXNMb2NrZWQoKSl9LF91cGRhdGVMb2NrZWRDb2xzOmZ1bmN0aW9uKGUpe3RoaXMuX2lzTG9ja2VkKCkmJihlPWV8fHRoaXMubG9ja2VkSGVhZGVyLmZpbmQoXCJ0YWJsZVwiKS5hZGQodGhpcy5sb2NrZWRUYWJsZSksaihlLEIoUih0aGlzLmNvbHVtbnMpKSx0aGlzLl9oYXNEZXRhaWxzKCksdGhpcy5fZ3JvdXBzKCkpKX0sX2FwcGVuZENvbHM6ZnVuY3Rpb24oZSx0KXt0P2ooZSxCKEYodGhpcy5jb2x1bW5zKSksdGhpcy5faGFzRGV0YWlscygpLDApOmooZSxCKGYodGhpcy5jb2x1bW5zKSksdGhpcy5faGFzRGV0YWlscygpLHRoaXMuX2dyb3VwcygpKX0sX2F1dG9Db2x1bW5zOmZ1bmN0aW9uKGUpe2lmKGUmJmUudG9KU09OKXt2YXIgdCxuPXRoaXM7ZT1lLnRvSlNPTigpO2Zvcih0IGluIGUpbi5jb2x1bW5zLnB1c2goe2ZpZWxkOnR9KTtuLl90aGVhZCgpLG4uX3RlbXBsYXRlcygpfX0sX3Jvd3NIdG1sOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMsbz1cIlwiLGE9dC5yb3dUZW1wbGF0ZSxzPXQuYWx0Um93VGVtcGxhdGU7Zm9yKG49MCxpPWUubGVuZ3RoO2k+bjtuKyspbys9biUyP3MoZVtuXSk6YShlW25dKSxyLl9kYXRhLnB1c2goZVtuXSk7cmV0dXJuIG99LF9ncm91cFJvd0h0bWw6ZnVuY3Rpb24oZSx0LG4saSxyLG8pe3ZhciBhLHMsbD10aGlzLGM9XCJcIixkPWUuZmllbGQsdT1rdChsLmNvbHVtbnMsZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmllbGQ9PWR9KVswXXx8e30saD11Lmdyb3VwSGVhZGVyVGVtcGxhdGUscD0odS50aXRsZXx8ZCkrXCI6IFwiKyQoZS52YWx1ZSx1LmZvcm1hdCx1LnZhbHVlcyksZj1sLl9ncm91cEFnZ3JlZ2F0ZXNEZWZhdWx0T2JqZWN0fHx7fSxnPXd0KGYsZS5hZ2dyZWdhdGVzKSxtPXd0KHt9LHtmaWVsZDplLmZpZWxkLHZhbHVlOmUudmFsdWUsYWdncmVnYXRlczpnfSxlLmFnZ3JlZ2F0ZXNbZS5maWVsZF0pLHY9ci5ncm91cEZvb3RlclRlbXBsYXRlLF89ZS5pdGVtcztpZihoJiYocD10eXBlb2YgaD09PWxuP2gobSk6dXQudGVtcGxhdGUoaCkobSkpLGMrPWkodCxuLHApLGUuaGFzU3ViZ3JvdXBzKWZvcihhPTAscz1fLmxlbmd0aDtzPmE7YSsrKWMrPWwuX2dyb3VwUm93SHRtbChfW2FdLG8/dDp0LTEsbisxLGkscixvKTtlbHNlIGMrPWwuX3Jvd3NIdG1sKF8scik7cmV0dXJuIHYmJihjKz12KGcpKSxjfSxjb2xsYXBzZUdyb3VwOmZ1bmN0aW9uKHQpe3Q9ZSh0KTt2YXIgbixpLHIsbyxhLHM9dGhpcy5vcHRpb25zLmdyb3VwYWJsZSxsPXMuc2hvd0Zvb3RlcixjPWw/MDoxLGQ9ZSgpO2Zvcih0aGlzLl9pc0xvY2tlZCgpJiYodC5jbG9zZXN0KFwiZGl2XCIpLmhhc0NsYXNzKFwiay1ncmlkLWNvbnRlbnQtbG9ja2VkXCIpP2Q9dGhpcy50Ym9keS5jaGlsZHJlbihcInRyOmVxKFwiK3QuaW5kZXgoKStcIilcIikubmV4dEFsbChcInRyXCIpOihkPXQubmV4dEFsbChcInRyXCIpLHQ9dGhpcy5sb2NrZWRUYWJsZS5maW5kKFwiPnRib2R5PnRyOmVxKFwiK3QuaW5kZXgoKStcIilcIikpKSxuPXQuZmluZChcIi5rLWdyb3VwLWNlbGxcIikubGVuZ3RoLHQuZmluZChcIi5rLWljb25cIikuYWRkQ2xhc3MoXCJrLWktZXhwYW5kXCIpLnJlbW92ZUNsYXNzKFwiay1pLWNvbGxhcHNlXCIpLHQuZmluZChcInRkOmZpcnN0XCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITEpLHQ9dC5uZXh0QWxsKFwidHJcIikscj0wLG89dC5sZW5ndGg7bz5yJiYoYT10LmVxKHIpLGk9YS5maW5kKFwiLmstZ3JvdXAtY2VsbFwiKS5sZW5ndGgsYS5oYXNDbGFzcyhcImstZ3JvdXBpbmctcm93XCIpP2MrKzphLmhhc0NsYXNzKFwiay1ncm91cC1mb290ZXJcIikmJmMtLSwhKG4+PWl8fGEuaGFzQ2xhc3MoXCJrLWdyb3VwLWZvb3RlclwiKSYmMD5jKSk7cisrKWEuaGlkZSgpLGQuZXEocikuaGlkZSgpfSxleHBhbmRHcm91cDpmdW5jdGlvbih0KXt0PWUodCk7dmFyIG4saSxyLG8sYSxzPXRoaXMsbD1lKCksYz0xO2Zvcih0aGlzLl9pc0xvY2tlZCgpJiYodC5jbG9zZXN0KFwiZGl2XCIpLmhhc0NsYXNzKFwiay1ncmlkLWNvbnRlbnQtbG9ja2VkXCIpP2w9dGhpcy50Ym9keS5jaGlsZHJlbihcInRyOmVxKFwiK3QuaW5kZXgoKStcIilcIikubmV4dEFsbChcInRyXCIpOihsPXQubmV4dEFsbChcInRyXCIpLHQ9dGhpcy5sb2NrZWRUYWJsZS5maW5kKFwiPnRib2R5PnRyOmVxKFwiK3QuaW5kZXgoKStcIilcIikpKSxuPXQuZmluZChcIi5rLWdyb3VwLWNlbGxcIikubGVuZ3RoLHQuZmluZChcIi5rLWljb25cIikuYWRkQ2xhc3MoXCJrLWktY29sbGFwc2VcIikucmVtb3ZlQ2xhc3MoXCJrLWktZXhwYW5kXCIpLHQuZmluZChcInRkOmZpcnN0XCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApLHQ9dC5uZXh0QWxsKFwidHJcIiksbz0wLGE9dC5sZW5ndGg7YT5vJiYoaT10LmVxKG8pLHI9aS5maW5kKFwiLmstZ3JvdXAtY2VsbFwiKS5sZW5ndGgsIShuPj1yKSk7bysrKXIhPW4rMXx8aS5oYXNDbGFzcyhcImstZGV0YWlsLXJvd1wiKXx8KGkuc2hvdygpLGwuZXEobykuc2hvdygpLGkuaGFzQ2xhc3MoXCJrLWdyb3VwaW5nLXJvd1wiKSYmaS5maW5kKFwiLmstaWNvblwiKS5oYXNDbGFzcyhcImstaS1jb2xsYXBzZVwiKSYmcy5leHBhbmRHcm91cChpKSxpLmhhc0NsYXNzKFwiay1tYXN0ZXItcm93XCIpJiZpLmZpbmQoXCIuay1pY29uXCIpLmhhc0NsYXNzKFwiay1taW51c1wiKSYmKGkubmV4dCgpLnNob3coKSxsLmVxKG8rMSkuc2hvdygpKSksaS5oYXNDbGFzcyhcImstZ3JvdXBpbmctcm93XCIpJiZjKyssaS5oYXNDbGFzcyhcImstZ3JvdXAtZm9vdGVyXCIpJiYoMT09Yz8oaS5zaG93KCksbC5lcShvKS5zaG93KCkpOmMtLSl9LF91cGRhdGVIZWFkZXI6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPW4uX2lzTG9ja2VkKCk/bi5sb2NrZWRIZWFkZXIuZmluZChcInRoZWFkXCIpOm4udGhlYWQscj1pLmZpbmQoXCJ0ci5rLWZpbHRlci1yb3dcIikuZmluZChcInRoLmstZ3JvdXAtY2VsbFwiKS5sZW5ndGgsbz1pLmZpbmQoXCJ0cjpmaXJzdFwiKS5maW5kKFwidGguay1ncm91cC1jZWxsXCIpLmxlbmd0aCxhPWkuY2hpbGRyZW4oXCJ0cjpub3QoOmZpcnN0KVwiKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4hZSh0aGlzKS5jaGlsZHJlbihcIjp2aXNpYmxlXCIpLmxlbmd0aH0pO3Q+bz8oZShBcnJheSh0LW8rMSkuam9pbignPHRoIGNsYXNzPVwiay1ncm91cC1jZWxsIGstaGVhZGVyXCI+Jm5ic3A7PC90aD4nKSkucHJlcGVuZFRvKGkuY2hpbGRyZW4oXCJ0cjpub3QoLmstZmlsdGVyLXJvdylcIikpLG4uZWxlbWVudC5pcyhcIjp2aXNpYmxlXCIpJiZhLmZpbmQoXCJ0aC5rLWdyb3VwLWNlbGxcIikuaGlkZSgpKTpvPnQmJmkuZmluZChcInRyXCIpLmVhY2goZnVuY3Rpb24oKXtlKHRoaXMpLmZpbmQoXCJ0aC5rLWdyb3VwLWNlbGxcIikuZmlsdGVyKFwiOmVxKFwiK3QrXCIpLDpndChcIit0K1wiKVwiKS5yZW1vdmUoKX0pLHQ+ciYmZShBcnJheSh0LXIrMSkuam9pbignPHRoIGNsYXNzPVwiay1ncm91cC1jZWxsIGstaGVhZGVyXCI+Jm5ic3A7PC90aD4nKSkucHJlcGVuZFRvKGkuZmluZChcIi5rLWZpbHRlci1yb3dcIikpfSxfZmlyc3REYXRhSXRlbTpmdW5jdGlvbihlLHQpe3JldHVybiBlJiZ0JiYoZT1lLmhhc1N1Ymdyb3Vwcz90aGlzLl9maXJzdERhdGFJdGVtKGUuaXRlbXNbMF0sdCk6ZS5pdGVtc1swXSksZX0sX3VwZGF0ZVRhYmxlc1dpZHRoOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzO24uX2lzTG9ja2VkKCkmJih0PWUoXCI+LmstZ3JpZC1mb290ZXI+LmstZ3JpZC1mb290ZXItd3JhcD50YWJsZVwiLG4ud3JhcHBlcikuYWRkKG4udGhlYWQucGFyZW50KCkpLmFkZChuLnRhYmxlKSxuLl9mb290ZXJXaWR0aD1KKHQuZXEoMCkpLHQud2lkdGgobi5fZm9vdGVyV2lkdGgpLHQ9ZShcIj4uay1ncmlkLWZvb3Rlcj4uay1ncmlkLWZvb3Rlci1sb2NrZWQ+dGFibGVcIixuLndyYXBwZXIpLmFkZChuLmxvY2tlZEhlYWRlci5maW5kKFwiPnRhYmxlXCIpKS5hZGQobi5sb2NrZWRUYWJsZSksdC53aWR0aChKKHQuZXEoMCkpKSl9LGhpZGVDb2x1bW46ZnVuY3Rpb24obil7dmFyIGkscixvLGEsbCxjLGQsdSxnLG0sdj10aGlzLF89MCx5PXYuZm9vdGVyfHx2LndyYXBwZXIuZmluZChcIi5rLWdyaWQtZm9vdGVyXCIpLHc9di5jb2x1bW5zLGI9di5sb2NrZWRIZWFkZXI/Tyh2LmxvY2tlZEhlYWRlci5maW5kKFwiPnRhYmxlPnRoZWFkXCIpKS5maWx0ZXIoXCI6dmlzaWJsZVwiKS5sZW5ndGg6MDtpZihuPVwibnVtYmVyXCI9PXR5cGVvZiBuP3dbbl06eXQobik/a3QoUyh3KSxmdW5jdGlvbihlKXtyZXR1cm4gZT09PW59KVswXTprdChTKHcpLGZ1bmN0aW9uKGUpe3JldHVybiBlLmZpZWxkPT09bn0pWzBdLG4mJnAobikpe2lmKG4uY29sdW1ucyYmbi5jb2x1bW5zLmxlbmd0aCl7Zm9yKGM9eChuLHcpLGgobiwhMSksWShzKGUoXCI+dGFibGU+dGhlYWRcIix2LmxvY2tlZEhlYWRlciksdi50aGVhZCxcIj50cjplcShcIitjLnJvdytcIik+dGhcIiksYy5jZWxsLCExKSxvPTA7bi5jb2x1bW5zLmxlbmd0aD5vO28rKyl0aGlzLmhpZGVDb2x1bW4obi5jb2x1bW5zW29dKTtyZXR1cm4gdi50cmlnZ2VyKHF0LHtjb2x1bW46bn0pLHR9aWYoZz1DdChuLGYoTCh3KSkpLGgobiwhMSksdi5fc2V0UGFyZW50c1Zpc2liaWxpdHkobiwhMSksdi5fdGVtcGxhdGVzKCksdi5fdXBkYXRlQ29scygpLHYuX3VwZGF0ZUxvY2tlZENvbHMoKSxtPXYudGhlYWQsZD1nLHYubG9ja2VkSGVhZGVyJiZiPmc/bT12LmxvY2tlZEhlYWRlci5maW5kKFwiPnRhYmxlPnRoZWFkXCIpOmQtPWIsaT1PKG0pLmZpbHRlcihcIjp2aXNpYmxlXCIpLmVxKGQpLGlbMF0uc3R5bGUuZGlzcGxheT1cIm5vbmVcIixZKHMoZShcIj50YWJsZT50aGVhZFwiLHYubG9ja2VkSGVhZGVyKSx2LnRoZWFkLFwiPnRyLmstZmlsdGVyLXJvdz50aFwiKSxnLCExKSx5WzBdJiYodi5fdXBkYXRlQ29scyh5LmZpbmQoXCI+LmstZ3JpZC1mb290ZXItd3JhcD50YWJsZVwiKSksdi5fdXBkYXRlTG9ja2VkQ29scyh5LmZpbmQoXCI+LmstZ3JpZC1mb290ZXItbG9ja2VkPnRhYmxlXCIpKSxZKHkuZmluZChcIi5rLWZvb3Rlci10ZW1wbGF0ZT50ZFwiKSxnLCExKSksdi5sb2NrZWRUYWJsZSYmYj5nP0sodi5sb2NrZWRUYWJsZS5maW5kKFwiPnRib2R5PnRyXCIpLGcpOksodi50Ym9keS5jaGlsZHJlbigpLGctYiksdi5sb2NrZWRUYWJsZSl2Ll91cGRhdGVUYWJsZXNXaWR0aCgpLHYuX2FwcGx5TG9ja2VkQ29udGFpbmVyc1dpZHRoKCksdi5fc3luY0xvY2tlZENvbnRlbnRIZWlnaHQoKSx2Ll9zeW5jTG9ja2VkSGVhZGVySGVpZ2h0KCksdi5fc3luY0xvY2tlZEZvb3RlckhlaWdodCgpO2Vsc2V7Zm9yKGE9di50aGVhZC5wcmV2KCkuZmluZChcImNvbFwiKSxvPTAsdT1hLmxlbmd0aDt1Pm87bys9MSl7aWYobD1hW29dLnN0eWxlLndpZHRoLCFsfHwtMSE9bC5pbmRleE9mKFwiJVwiKSl7Xz0wO2JyZWFrfV8rPXBhcnNlSW50KGwsMTApfXI9ZShcIj4uay1ncmlkLWhlYWRlciB0YWJsZTpmaXJzdCw+LmstZ3JpZC1mb290ZXIgdGFibGU6Zmlyc3RcIix2LndyYXBwZXIpLmFkZCh2LnRhYmxlKSx2Ll9mb290ZXJXaWR0aD1udWxsLF8mJihyLndpZHRoKF8pLHYuX2Zvb3RlcldpZHRoPV8pLHduLm1zaWUmJjg9PXduLnZlcnNpb24mJihyLmNzcyhcImRpc3BsYXlcIixcImlubGluZS10YWJsZVwiKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci5jc3MoXCJkaXNwbGF5XCIsXCJ0YWJsZVwiKX0sMSkpfXYuX3VwZGF0ZUZpcnN0Q29sdW1uQ2xhc3MoKSx2LnRyaWdnZXIocXQse2NvbHVtbjpufSl9fSxfc2V0UGFyZW50c1Zpc2liaWxpdHk6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG8sYSxsLGM9dGhpcy5jb2x1bW5zLGQ9W10scD1uP2Z1bmN0aW9uKGUpe3JldHVybiBmKGUuY29sdW1ucykubGVuZ3RoJiZlLmhpZGRlbn06ZnVuY3Rpb24oZSl7cmV0dXJuIWYoZS5jb2x1bW5zKS5sZW5ndGgmJiFlLmhpZGRlbn07aWYodSh0LGMsZCkmJmQubGVuZ3RoKWZvcihpPWQubGVuZ3RoLTE7aT49MDtpLS0pcj1kW2ldLG89YihyLGMpLGE9cyhlKFwiPnRhYmxlPnRoZWFkXCIsdGhpcy5sb2NrZWRIZWFkZXIpLHRoaXMudGhlYWQsXCI+dHI6ZXEoXCIrby5yb3crXCIpPnRoOm5vdCguay1ncm91cC1jZWxsKTpub3QoLmstaGllcmFyY2h5LWNlbGwpXCIpLmVxKG8uY2VsbCkscChyKSYmKGgocixuKSxhWzBdLnN0eWxlLmRpc3BsYXk9bj9cIlwiOlwibm9uZVwiKSxhLmZpbHRlcihcIltcIit1dC5hdHRyKFwiY29sc3BhblwiKStcIl1cIikubGVuZ3RoJiYobD1wYXJzZUludChhLmF0dHIodXQuYXR0cihcImNvbHNwYW5cIikpLDEwKSxhWzBdLmNvbFNwYW49bC1UKHIuY29sdW1ucyl8fDEpfSxzaG93Q29sdW1uOmZ1bmN0aW9uKG4pe3ZhciBpLHIsbyxhLGwsYyxkLHUsZixnLG0sdj10aGlzLF89di5jb2x1bW5zLHk9di5mb290ZXJ8fHYud3JhcHBlci5maW5kKFwiLmstZ3JpZC1mb290ZXJcIiksdz12LmxvY2tlZEhlYWRlcj9PKHYubG9ja2VkSGVhZGVyLmZpbmQoXCI+dGFibGU+dGhlYWRcIikpLmxlbmd0aDowO2lmKG49XCJudW1iZXJcIj09dHlwZW9mIG4/X1tuXTp5dChuKT9rdChTKF8pLGZ1bmN0aW9uKGUpe3JldHVybiBlPT09bn0pWzBdOmt0KFMoXyksZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmllbGQ9PT1ufSlbMF0sbiYmIXAobikpe2lmKG4uY29sdW1ucyYmbi5jb2x1bW5zLmxlbmd0aCl7Zm9yKGQ9eChuLF8pLGgobiwhMCksWShzKGUoXCI+dGFibGU+dGhlYWRcIix2LmxvY2tlZEhlYWRlciksdi50aGVhZCxcIj50cjplcShcIitkLnJvdytcIik+dGhcIiksZC5jZWxsLCEwKSxpPTA7bi5jb2x1bW5zLmxlbmd0aD5pO2krKyl0aGlzLnNob3dDb2x1bW4obi5jb2x1bW5zW2ldKTtyZXR1cm4gdi50cmlnZ2VyKCR0LHtjb2x1bW46bn0pLHR9aWYoZz1DdChuLEwoXykpLGgobiwhMCksdi5fc2V0UGFyZW50c1Zpc2liaWxpdHkobiwhMCksdi5fdGVtcGxhdGVzKCksdi5fdXBkYXRlQ29scygpLHYuX3VwZGF0ZUxvY2tlZENvbHMoKSxtPXYudGhlYWQsYz1nLHYubG9ja2VkSGVhZGVyJiZ3Pmc/bT12LmxvY2tlZEhlYWRlci5maW5kKFwiPnRhYmxlPnRoZWFkXCIpOmMtPXcsbz1PKG0pLmVxKGMpLG9bMF0uc3R5bGUuZGlzcGxheT1cIlwiLFkocyhlKFwiPnRhYmxlPnRoZWFkXCIsdi5sb2NrZWRIZWFkZXIpLHYudGhlYWQsXCI+dHIuay1maWx0ZXItcm93PnRoXCIpLGcsITApLHlbMF0mJih2Ll91cGRhdGVDb2xzKHkuZmluZChcIj4uay1ncmlkLWZvb3Rlci13cmFwPnRhYmxlXCIpKSx2Ll91cGRhdGVMb2NrZWRDb2xzKHkuZmluZChcIj4uay1ncmlkLWZvb3Rlci1sb2NrZWQ+dGFibGVcIikpLFkoeS5maW5kKFwiLmstZm9vdGVyLXRlbXBsYXRlPnRkXCIpLGcsITApKSx2LmxvY2tlZFRhYmxlJiZ3Pmc/USh2LmxvY2tlZFRhYmxlLmZpbmQoXCI+dGJvZHk+dHJcIiksZyk6USh2LnRib2R5LmNoaWxkcmVuKCksZy13KSx2LmxvY2tlZFRhYmxlKXYuX3VwZGF0ZVRhYmxlc1dpZHRoKCksdi5fYXBwbHlMb2NrZWRDb250YWluZXJzV2lkdGgoKSx2Ll9zeW5jTG9ja2VkQ29udGVudEhlaWdodCgpLHYuX3N5bmNMb2NrZWRIZWFkZXJIZWlnaHQoKTtlbHNlIGlmKGE9ZShcIj4uay1ncmlkLWhlYWRlciB0YWJsZTpmaXJzdCw+LmstZ3JpZC1mb290ZXIgdGFibGU6Zmlyc3RcIix2LndyYXBwZXIpLmFkZCh2LnRhYmxlKSxuLndpZHRoKXtmb3IobD0wLGY9di50aGVhZC5wcmV2KCkuZmluZChcImNvbFwiKSxpPTAscj1mLmxlbmd0aDtyPmk7aSs9MSl7aWYodT1mW2ldLnN0eWxlLndpZHRoLHUuaW5kZXhPZihcIiVcIik+LTEpe2w9MDticmVha31sKz1wYXJzZUludCh1LDEwKX12Ll9mb290ZXJXaWR0aD1udWxsLGwmJihhLndpZHRoKGwpLHYuX2Zvb3RlcldpZHRoPWwpfWVsc2UgYS53aWR0aChcIlwiKTt2Ll91cGRhdGVGaXJzdENvbHVtbkNsYXNzKCksdi50cmlnZ2VyKCR0LHtjb2x1bW46bn0pfX0sX3Byb2dyZXNzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZWxlbWVudDt0aGlzLmxvY2tlZENvbnRlbnQ/dD10aGlzLndyYXBwZXI6dGhpcy5lbGVtZW50LmlzKFwidGFibGVcIik/dD10aGlzLmVsZW1lbnQucGFyZW50KCk6dGhpcy5jb250ZW50JiZ0aGlzLmNvbnRlbnQubGVuZ3RoJiYodD10aGlzLmNvbnRlbnQpLHV0LnVpLnByb2dyZXNzKHQsZSl9LF9yZXNpemU6ZnVuY3Rpb24oKXt0aGlzLmNvbnRlbnQmJih0aGlzLl9zZXRDb250ZW50SGVpZ2h0KCksdGhpcy5fc2V0Q29udGVudFdpZHRoKCkpfSxfaXNBY3RpdmVJblRhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9bXQoKTtyZXR1cm4gdGhpcy50YWJsZVswXT09PXR8fGUuY29udGFpbnModGhpcy50YWJsZVswXSx0KXx8dGhpcy5faXNMb2NrZWQoKSYmKHRoaXMubG9ja2VkVGFibGVbMF09PT10fHxlLmNvbnRhaW5zKHRoaXMubG9ja2VkVGFibGVbMF0sdCkpfSxyZWZyZXNoOmZ1bmN0aW9uKHQpe3ZhciBuLGk9dGhpcyxyPWkuZGF0YVNvdXJjZS52aWV3KCksbz1pLm9wdGlvbnMubmF2aWdhdGFibGUsYT1lKGkuY3VycmVudCgpKSxzPSExLGw9KGkuZGF0YVNvdXJjZS5ncm91cCgpfHxbXSkubGVuZ3RoLGM9bCtCKGYoaS5jb2x1bW5zKSkubGVuZ3RoO3QmJlwiaXRlbWNoYW5nZVwiPT09dC5hY3Rpb24mJmkuZWRpdGFibGV8fCh0PXR8fHt9LGkudHJpZ2dlcihcImRhdGFCaW5kaW5nXCIse2FjdGlvbjp0LmFjdGlvbnx8XCJyZWJpbmRcIixpbmRleDp0LmluZGV4LGl0ZW1zOnQuaXRlbXN9KXx8KGkuX2FuZ3VsYXJJdGVtcyhcImNsZWFudXBcIiksbyYmKGkuX2lzQWN0aXZlSW5UYWJsZSgpfHxpLl9lZGl0Q29udGFpbmVyJiZpLl9lZGl0Q29udGFpbmVyLmRhdGEoXCJrZW5kb1dpbmRvd1wiKSkmJihzPWEuaXMoXCJ0aFwiKSxuPTAscyYmKG49aS50aGVhZC5maW5kKFwidGg6bm90KC5rLWdyb3VwLWNlbGwpXCIpLmluZGV4KGEpKSksaS5fZGVzdHJveUVkaXRhYmxlKCksaS5fcHJvZ3Jlc3MoITEpLGkuX2hpZGVSZXNpemVIYW5kbGUoKSxpLl9kYXRhPVtdLGkuY29sdW1ucy5sZW5ndGh8fChpLl9hdXRvQ29sdW1ucyhpLl9maXJzdERhdGFJdGVtKHJbMF0sbCkpLGM9bCtpLmNvbHVtbnMubGVuZ3RoKSxpLl9ncm91cD1sPjB8fGkuX2dyb3VwLGkuX2dyb3VwJiYoaS5fdGVtcGxhdGVzKCksaS5fdXBkYXRlQ29scygpLGkuX3VwZGF0ZUxvY2tlZENvbHMoKSxpLl91cGRhdGVIZWFkZXIobCksaS5fZ3JvdXA9bD4wKSxpLl9yZW5kZXJDb250ZW50KHIsYyxsKSxpLl9yZW5kZXJMb2NrZWRDb250ZW50KHIsYyxsKSxpLl9mb290ZXIoKSxpLl9zZXRDb250ZW50SGVpZ2h0KCksaS5fc2V0Q29udGVudFdpZHRoKCksaS5sb2NrZWRUYWJsZSYmKGkub3B0aW9ucy5zY3JvbGxhYmxlLnZpcnR1YWw/aS5jb250ZW50LmZpbmQoXCI+LmstdmlydHVhbC1zY3JvbGxhYmxlLXdyYXBcIikudHJpZ2dlcihcInNjcm9sbFwiKTppLmNvbnRlbnQudHJpZ2dlcihcInNjcm9sbFwiKSksbj49MCYmKGkuX3JlbW92ZUN1cnJlbnQoKSxpLmN1cnJlbnQocz9pLnRoZWFkLmZpbmQoXCJ0aDpub3QoLmstZ3JvdXAtY2VsbClcIikuZXEobik6aS50YWJsZS5hZGQoaS5sb2NrZWRUYWJsZSkuZmluZChCdCkuZmlyc3QoKSksaS5fY3VycmVudCYmbnQoaS5fY3VycmVudC5jbG9zZXN0KFwidGFibGVcIilbMF0sITApKSxpLnRvdWNoU2Nyb2xsZXImJmkudG91Y2hTY3JvbGxlci5jb250ZW50UmVzaXplZCgpLGkuc2VsZWN0YWJsZSYmaS5zZWxlY3RhYmxlLnJlc2V0VG91Y2hFdmVudHMoKSxpLl9hbmd1bGFySXRlbXMoXCJjb21waWxlXCIpLGkudHJpZ2dlcihLdCkpKX0sX3JlbmRlckNvbnRlbnQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsYT10aGlzLHM9XCJcIixsPW51bGwhPWEubG9ja2VkQ29udGVudCxjPXtyb3dUZW1wbGF0ZTphLnJvd1RlbXBsYXRlLGFsdFJvd1RlbXBsYXRlOmEuYWx0Um93VGVtcGxhdGUsZ3JvdXBGb290ZXJUZW1wbGF0ZTphLmdyb3VwRm9vdGVyVGVtcGxhdGV9O2lmKHQ9bD90LUIoUihhLmNvbHVtbnMpKS5sZW5ndGg6dCxuPjApZm9yKHQ9bD90LW46dCxhLmRldGFpbFRlbXBsYXRlJiZ0KyssYS5ncm91cEZvb3RlclRlbXBsYXRlJiYoYS5fZ3JvdXBBZ2dyZWdhdGVzRGVmYXVsdE9iamVjdD1vKGEuZGF0YVNvdXJjZS5hZ2dyZWdhdGUoKSkpLGk9MCxyPWUubGVuZ3RoO3I+aTtpKyspcys9YS5fZ3JvdXBSb3dIdG1sKGVbaV0sdCwwLGw/ZHQ6Y3QsYyxsKTtlbHNlIHMrPWEuX3Jvd3NIdG1sKGUsYyk7YS50Ym9keT1WKGEudGJvZHksYS50YWJsZSxzKX0sX3JlbmRlckxvY2tlZENvbnRlbnQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhPVwiXCIscz17cm93VGVtcGxhdGU6dGhpcy5sb2NrZWRSb3dUZW1wbGF0ZSxhbHRSb3dUZW1wbGF0ZTp0aGlzLmxvY2tlZEFsdFJvd1RlbXBsYXRlLGdyb3VwRm9vdGVyVGVtcGxhdGU6dGhpcy5sb2NrZWRHcm91cEZvb3RlclRlbXBsYXRlfTtpZih0aGlzLmxvY2tlZENvbnRlbnQpe2lmKG89dGhpcy5sb2NrZWRUYWJsZSxuPjApZm9yKHQtPWYoTCh6KHRoaXMuY29sdW1ucykpKS5sZW5ndGgsaT0wLHI9ZS5sZW5ndGg7cj5pO2krKylhKz10aGlzLl9ncm91cFJvd0h0bWwoZVtpXSx0LDAsY3Qscyk7ZWxzZSBhPXRoaXMuX3Jvd3NIdG1sKGUscyk7VihvLmNoaWxkcmVuKFwidGJvZHlcIiksbyxhKSx0aGlzLl9zeW5jTG9ja2VkQ29udGVudEhlaWdodCgpfX0sX2FkanVzdFJvd3NIZWlnaHQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxhPWVbMF0ucm93cyxzPWEubGVuZ3RoLGw9dFswXS5yb3dzLGM9ZS5hZGQodCksZD1jLmxlbmd0aCx1PVtdO2ZvcihuPTA7cz5uJiZsW25dO24rKylhW25dLnN0eWxlLmhlaWdodCYmKGFbbl0uc3R5bGUuaGVpZ2h0PWxbbl0uc3R5bGUuaGVpZ2h0PVwiXCIpLGk9YVtuXS5vZmZzZXRIZWlnaHQscj1sW25dLm9mZnNldEhlaWdodCxvPTAsaT5yP289aTpyPmkmJihvPXIpLHUucHVzaChvKTtmb3Iobj0wO2Q+bjtuKyspY1tuXS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO2ZvcihuPTA7cz5uO24rKyl1W25dJiYoYVtuXS5zdHlsZS5oZWlnaHQ9bFtuXS5zdHlsZS5oZWlnaHQ9dVtuXStcInB4XCIpO2ZvcihuPTA7ZD5uO24rKyljW25dLnN0eWxlLmRpc3BsYXk9XCJcIn19KTt1dC5FeGNlbE1peGluJiZ1dC5FeGNlbE1peGluLmV4dGVuZChTbi5wcm90b3R5cGUpLHV0LlBERk1peGluJiZ1dC5QREZNaXhpbi5leHRlbmQoU24ucHJvdG90eXBlKSxodC5wbHVnaW4oU24pLGh0LnBsdWdpbih4bil9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG49d2luZG93LmtlbmRvLGk9XCJjaGFuZ2VcIixyPVwiY2FuY2VsXCIsbz1cImRhdGFCb3VuZFwiLGE9XCJkYXRhQmluZGluZ1wiLHM9bi51aS5XaWRnZXQsbD1uLmtleXMsYz1cIj4qXCIsZD1cInByb2dyZXNzXCIsdT1cImVycm9yXCIsaD1cImstc3RhdGUtZm9jdXNlZFwiLHA9XCJrLXN0YXRlLXNlbGVjdGVkXCIsZj1cImstZWRpdC1pdGVtXCIsZz1cImVkaXRcIixtPVwicmVtb3ZlXCIsdj1cInNhdmVcIixfPVwiY2xpY2tcIix5PVwiLmtlbmRvTGlzdFZpZXdcIix3PWUucHJveHksYj1uLl9hY3RpdmVFbGVtZW50LGs9bi51aS5wcm9ncmVzcyx4PW4uZGF0YS5EYXRhU291cmNlLEM9bi51aS5EYXRhQm91bmRXaWRnZXQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsaSl7dmFyIHI9dGhpcztpPWUuaXNBcnJheShpKT97ZGF0YVNvdXJjZTppfTppLHMuZm4uaW5pdC5jYWxsKHIsdCxpKSxpPXIub3B0aW9ucyxyLndyYXBwZXI9dD1yLmVsZW1lbnQsdFswXS5pZCYmKHIuX2l0ZW1JZD10WzBdLmlkK1wiX2x2X2FjdGl2ZVwiKSxyLl9lbGVtZW50KCksci5fZGF0YVNvdXJjZSgpLHIuX3RlbXBsYXRlcygpLHIuX25hdmlnYXRhYmxlKCksci5fc2VsZWN0YWJsZSgpLHIuX3BhZ2VhYmxlKCksci5fY3J1ZEhhbmRsZXJzKCksci5vcHRpb25zLmF1dG9CaW5kJiZyLmRhdGFTb3VyY2UuZmV0Y2goKSxuLm5vdGlmeShyKX0sZXZlbnRzOltpLHIsYSxvLGcsbSx2XSxvcHRpb25zOntuYW1lOlwiTGlzdFZpZXdcIixhdXRvQmluZDohMCxzZWxlY3RhYmxlOiExLG5hdmlnYXRhYmxlOiExLHRlbXBsYXRlOlwiXCIsYWx0VGVtcGxhdGU6XCJcIixlZGl0VGVtcGxhdGU6XCJcIn0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXtzLmZuLnNldE9wdGlvbnMuY2FsbCh0aGlzLGUpLHRoaXMuX3RlbXBsYXRlcygpfSxfdGVtcGxhdGVzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zO3RoaXMudGVtcGxhdGU9bi50ZW1wbGF0ZShlLnRlbXBsYXRlfHxcIlwiKSx0aGlzLmFsdFRlbXBsYXRlPW4udGVtcGxhdGUoZS5hbHRUZW1wbGF0ZXx8ZS50ZW1wbGF0ZSksdGhpcy5lZGl0VGVtcGxhdGU9bi50ZW1wbGF0ZShlLmVkaXRUZW1wbGF0ZXx8XCJcIil9LF9pdGVtOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oKVtlXSgpfSxpdGVtczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oKX0sZGF0YUl0ZW06ZnVuY3Rpb24odCl7dmFyIGk9bi5hdHRyKFwidWlkXCIpLHI9ZSh0KS5jbG9zZXN0KFwiW1wiK2krXCJdXCIpLmF0dHIoaSk7cmV0dXJuIHRoaXMuZGF0YVNvdXJjZS5nZXRCeVVpZChyKX0sc2V0RGF0YVNvdXJjZTpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZT1lLHRoaXMuX2RhdGFTb3VyY2UoKSx0aGlzLm9wdGlvbnMuYXV0b0JpbmQmJmUuZmV0Y2goKX0sX3VuYmluZERhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuZGF0YVNvdXJjZS51bmJpbmQoaSxlLl9yZWZyZXNoSGFuZGxlcikudW5iaW5kKGQsZS5fcHJvZ3Jlc3NIYW5kbGVyKS51bmJpbmQodSxlLl9lcnJvckhhbmRsZXIpfSxfZGF0YVNvdXJjZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5kYXRhU291cmNlJiZlLl9yZWZyZXNoSGFuZGxlcj9lLl91bmJpbmREYXRhU291cmNlKCk6KGUuX3JlZnJlc2hIYW5kbGVyPXcoZS5yZWZyZXNoLGUpLGUuX3Byb2dyZXNzSGFuZGxlcj13KGUuX3Byb2dyZXNzLGUpLGUuX2Vycm9ySGFuZGxlcj13KGUuX2Vycm9yLGUpKSxlLmRhdGFTb3VyY2U9eC5jcmVhdGUoZS5vcHRpb25zLmRhdGFTb3VyY2UpLmJpbmQoaSxlLl9yZWZyZXNoSGFuZGxlcikuYmluZChkLGUuX3Byb2dyZXNzSGFuZGxlcikuYmluZCh1LGUuX2Vycm9ySGFuZGxlcil9LF9wcm9ncmVzczpmdW5jdGlvbigpe2sodGhpcy5lbGVtZW50LCEwKX0sX2Vycm9yOmZ1bmN0aW9uKCl7ayh0aGlzLmVsZW1lbnQsITEpfSxfZWxlbWVudDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5hZGRDbGFzcyhcImstd2lkZ2V0IGstbGlzdHZpZXdcIikuYXR0cihcInJvbGVcIixcImxpc3Rib3hcIil9LHJlZnJlc2g6ZnVuY3Rpb24oZSl7dmFyIGkscixzLGwsYyxkPXRoaXMsdT1kLmRhdGFTb3VyY2UudmlldygpLGg9XCJcIixwPWQudGVtcGxhdGUsZj1kLmFsdFRlbXBsYXRlLGc9YigpO2lmKGU9ZXx8e30sXCJpdGVtY2hhbmdlXCI9PT1lLmFjdGlvbilyZXR1cm4gZC5faGFzQmluZGluZ1RhcmdldCgpfHxkLmVkaXRhYmxlfHwoaT1lLml0ZW1zWzBdLHM9ZC5pdGVtcygpLmZpbHRlcihcIltcIituLmF0dHIoXCJ1aWRcIikrXCI9XCIraS51aWQrXCJdXCIpLHMubGVuZ3RoPjAmJihsPXMuaW5kZXgoKSxkLmFuZ3VsYXIoXCJjbGVhbnVwXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6W3NdfX0pLHMucmVwbGFjZVdpdGgocChpKSkscz1kLml0ZW1zKCkuZXEobCkscy5hdHRyKG4uYXR0cihcInVpZFwiKSxpLnVpZCksZC5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOltzXSxkYXRhOlt7ZGF0YUl0ZW06aX1dfX0pLGQudHJpZ2dlcihcIml0ZW1DaGFuZ2VcIix7aXRlbTpzLGRhdGE6aX0pKSksdDtpZighZC50cmlnZ2VyKGEse2FjdGlvbjplLmFjdGlvbnx8XCJyZWJpbmRcIixpdGVtczplLml0ZW1zLGluZGV4OmUuaW5kZXh9KSl7Zm9yKGQuX2FuZ3VsYXJJdGVtcyhcImNsZWFudXBcIiksZC5fZGVzdHJveUVkaXRhYmxlKCksbD0wLGM9dS5sZW5ndGg7Yz5sO2wrKyloKz1sJTI/Zih1W2xdKTpwKHVbbF0pO2ZvcihkLmVsZW1lbnQuaHRtbChoKSxyPWQuaXRlbXMoKSxsPTAsYz11Lmxlbmd0aDtjPmw7bCsrKXIuZXEobCkuYXR0cihuLmF0dHIoXCJ1aWRcIiksdVtsXS51aWQpLmF0dHIoXCJyb2xlXCIsXCJvcHRpb25cIikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIixcImZhbHNlXCIpO2QuZWxlbWVudFswXT09PWcmJmQub3B0aW9ucy5uYXZpZ2F0YWJsZSYmZC5jdXJyZW50KHIuZXEoMCkpLGQuX2FuZ3VsYXJJdGVtcyhcImNvbXBpbGVcIiksZC50cmlnZ2VyKG8pfX0sX3BhZ2VhYmxlOmZ1bmN0aW9uKCl7dmFyIHQsaSxyPXRoaXMsbz1yLm9wdGlvbnMucGFnZWFibGU7ZS5pc1BsYWluT2JqZWN0KG8pJiYoaT1vLnBhZ2VySWQsdD1lLmV4dGVuZCh7fSxvLHtkYXRhU291cmNlOnIuZGF0YVNvdXJjZSxwYWdlcklkOm51bGx9KSxyLnBhZ2VyPW5ldyBuLnVpLlBhZ2VyKGUoXCIjXCIraSksdCkpfSxfc2VsZWN0YWJsZTpmdW5jdGlvbigpe3ZhciBlLHIsbz10aGlzLGE9by5vcHRpb25zLnNlbGVjdGFibGUscz1vLm9wdGlvbnMubmF2aWdhdGFibGU7YSYmKGU9bi51aS5TZWxlY3RhYmxlLnBhcnNlT3B0aW9ucyhhKS5tdWx0aXBsZSxvLnNlbGVjdGFibGU9bmV3IG4udWkuU2VsZWN0YWJsZShvLmVsZW1lbnQse2FyaWE6ITAsbXVsdGlwbGU6ZSxmaWx0ZXI6YyxjaGFuZ2U6ZnVuY3Rpb24oKXtvLnRyaWdnZXIoaSl9fSkscyYmby5lbGVtZW50Lm9uKFwia2V5ZG93blwiK3ksZnVuY3Rpb24obil7aWYobi5rZXlDb2RlPT09bC5TUEFDRUJBUil7aWYocj1vLmN1cnJlbnQoKSxuLnRhcmdldD09bi5jdXJyZW50VGFyZ2V0JiZuLnByZXZlbnREZWZhdWx0KCksZSlpZihuLmN0cmxLZXkpe2lmKHImJnIuaGFzQ2xhc3MocCkpcmV0dXJuIHIucmVtb3ZlQ2xhc3MocCksdH1lbHNlIG8uc2VsZWN0YWJsZS5jbGVhcigpO2Vsc2Ugby5zZWxlY3RhYmxlLmNsZWFyKCk7by5zZWxlY3RhYmxlLnZhbHVlKHIpfX0pKX0sY3VycmVudDpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5lbGVtZW50LHI9bi5fY3VycmVudCxvPW4uX2l0ZW1JZDtyZXR1cm4gZT09PXQ/cjoociYmclswXSYmKHJbMF0uaWQ9PT1vJiZyLnJlbW92ZUF0dHIoXCJpZFwiKSxyLnJlbW92ZUNsYXNzKGgpLGkucmVtb3ZlQXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKSksZSYmZVswXSYmKG89ZVswXS5pZHx8byxuLl9zY3JvbGxUbyhlWzBdKSxpLmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixvKSxlLmFkZENsYXNzKGgpLmF0dHIoXCJpZFwiLG8pKSxuLl9jdXJyZW50PWUsdCl9LF9zY3JvbGxUbzpmdW5jdGlvbih0KXt2YXIgbixpLHI9dGhpcyxvPSExLGE9XCJzY3JvbGxcIjtcImF1dG9cIj09ci53cmFwcGVyLmNzcyhcIm92ZXJmbG93XCIpfHxyLndyYXBwZXIuY3NzKFwib3ZlcmZsb3dcIik9PWE/bj1yLndyYXBwZXJbMF06KG49d2luZG93LG89ITApLGk9ZnVuY3Rpb24oaSxyKXt2YXIgcz1vP2UodCkub2Zmc2V0KClbaS50b0xvd2VyQ2FzZSgpXTp0W1wib2Zmc2V0XCIraV0sbD10W1wiY2xpZW50XCIrcl0sYz1lKG4pW2EraV0oKSxkPWUobilbci50b0xvd2VyQ2FzZSgpXSgpO3MrbD5jK2Q/ZShuKVthK2ldKHMrbC1kKTpjPnMmJmUobilbYStpXShzKX0saShcIlRvcFwiLFwiSGVpZ2h0XCIpLGkoXCJMZWZ0XCIsXCJXaWR0aFwiKX0sX25hdmlnYXRhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxpPXQub3B0aW9ucy5uYXZpZ2F0YWJsZSxyPXQuZWxlbWVudCxvPWZ1bmN0aW9uKG4pe3QuY3VycmVudChlKG4uY3VycmVudFRhcmdldCkpLGUobi50YXJnZXQpLmlzKFwiOmJ1dHRvbixhLDppbnB1dCxhPi5rLWljb24sdGV4dGFyZWFcIil8fHIuZm9jdXMoKX07aSYmKHQuX3RhYmluZGV4KCksci5vbihcImZvY3VzXCIreSxmdW5jdGlvbigpe3ZhciBlPXQuX2N1cnJlbnQ7ZSYmZS5pcyhcIjp2aXNpYmxlXCIpfHwoZT10Ll9pdGVtKFwiZmlyc3RcIikpLHQuY3VycmVudChlKX0pLm9uKFwiZm9jdXNvdXRcIit5LGZ1bmN0aW9uKCl7dC5fY3VycmVudCYmdC5fY3VycmVudC5yZW1vdmVDbGFzcyhoKX0pLm9uKFwia2V5ZG93blwiK3ksZnVuY3Rpb24oaSl7dmFyIG8sYSxzPWkua2V5Q29kZSxjPXQuY3VycmVudCgpLGQ9ZShpLnRhcmdldCksdT0hZC5pcyhcIjpidXR0b24sdGV4dGFyZWEsYSxhPi50LWljb24saW5wdXRcIiksaD1kLmlzKFwiOnRleHRcIikscD1uLnByZXZlbnREZWZhdWx0LGc9ci5maW5kKFwiLlwiK2YpLG09YigpO2lmKCEoIXUmJiFoJiZsLkVTQyE9c3x8aCYmbC5FU0MhPXMmJmwuRU5URVIhPXMpKWlmKGwuVVA9PT1zfHxsLkxFRlQ9PT1zKWMmJihjPWMucHJldigpKSx0LmN1cnJlbnQoYyYmY1swXT9jOnQuX2l0ZW0oXCJsYXN0XCIpKSxwKGkpO2Vsc2UgaWYobC5ET1dOPT09c3x8bC5SSUdIVD09PXMpYyYmKGM9Yy5uZXh0KCkpLHQuY3VycmVudChjJiZjWzBdP2M6dC5faXRlbShcImZpcnN0XCIpKSxwKGkpO2Vsc2UgaWYobC5QQUdFVVA9PT1zKXQuY3VycmVudChudWxsKSx0LmRhdGFTb3VyY2UucGFnZSh0LmRhdGFTb3VyY2UucGFnZSgpLTEpLHAoaSk7ZWxzZSBpZihsLlBBR0VET1dOPT09cyl0LmN1cnJlbnQobnVsbCksdC5kYXRhU291cmNlLnBhZ2UodC5kYXRhU291cmNlLnBhZ2UoKSsxKSxwKGkpO2Vsc2UgaWYobC5IT01FPT09cyl0LmN1cnJlbnQodC5faXRlbShcImZpcnN0XCIpKSxwKGkpO2Vsc2UgaWYobC5FTkQ9PT1zKXQuY3VycmVudCh0Ll9pdGVtKFwibGFzdFwiKSkscChpKTtlbHNlIGlmKGwuRU5URVI9PT1zKTAhPT1nLmxlbmd0aCYmKHV8fGgpPyhvPXQuaXRlbXMoKS5pbmRleChnKSxtJiZtLmJsdXIoKSx0LnNhdmUoKSxhPWZ1bmN0aW9uKCl7dC5lbGVtZW50LnRyaWdnZXIoXCJmb2N1c1wiKSx0LmN1cnJlbnQodC5pdGVtcygpLmVxKG8pKX0sdC5vbmUoXCJkYXRhQm91bmRcIixhKSk6XCJcIiE9PXQub3B0aW9ucy5lZGl0VGVtcGxhdGUmJnQuZWRpdChjKTtlbHNlIGlmKGwuRVNDPT09cyl7aWYoZz1yLmZpbmQoXCIuXCIrZiksMD09PWcubGVuZ3RoKXJldHVybjtvPXQuaXRlbXMoKS5pbmRleChnKSx0LmNhbmNlbCgpLHQuZWxlbWVudC50cmlnZ2VyKFwiZm9jdXNcIiksdC5jdXJyZW50KHQuaXRlbXMoKS5lcShvKSl9fSksci5vbihcIm1vdXNlZG93blwiK3krXCIgdG91Y2hzdGFydFwiK3ksYyx3KG8sdCkpKX0sY2xlYXJTZWxlY3Rpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Uuc2VsZWN0YWJsZS5jbGVhcigpLGUudHJpZ2dlcihpKX0sc2VsZWN0OmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMscj1pLnNlbGVjdGFibGU7cmV0dXJuIG49ZShuKSxuLmxlbmd0aD8oci5vcHRpb25zLm11bHRpcGxlfHwoci5jbGVhcigpLG49bi5maXJzdCgpKSxyLnZhbHVlKG4pLHQpOnIudmFsdWUoKX0sX2Rlc3Ryb3lFZGl0YWJsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5lZGl0YWJsZSYmKGUuZWRpdGFibGUuZGVzdHJveSgpLGRlbGV0ZSBlLmVkaXRhYmxlKX0sX21vZGVsRnJvbUVsZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5hdHRyKG4uYXR0cihcInVpZFwiKSk7cmV0dXJuIHRoaXMuZGF0YVNvdXJjZS5nZXRCeVVpZCh0KX0sX2Nsb3NlRWRpdGFibGU6ZnVuY3Rpb24oZSl7dmFyIHQsaSxyLG89dGhpcyxhPW8uZWRpdGFibGUscz1vLnRlbXBsYXRlLGw9ITA7cmV0dXJuIGEmJihlJiYobD1hLmVuZCgpKSxsJiYoYS5lbGVtZW50LmluZGV4KCklMiYmKHM9by5hbHRUZW1wbGF0ZSksdD1vLl9tb2RlbEZyb21FbGVtZW50KGEuZWxlbWVudCksby5fZGVzdHJveUVkaXRhYmxlKCkscj1hLmVsZW1lbnQuaW5kZXgoKSxhLmVsZW1lbnQucmVwbGFjZVdpdGgocyh0KSksaT1vLml0ZW1zKCkuZXEociksaS5hdHRyKG4uYXR0cihcInVpZFwiKSx0LnVpZCksby5faGFzQmluZGluZ1RhcmdldCgpJiZuLmJpbmQoaSx0KSkpLGx9LGVkaXQ6ZnVuY3Rpb24oZSl7dmFyIHQsaSxyPXRoaXMsbz1yLl9tb2RlbEZyb21FbGVtZW50KGUpLGE9by51aWQ7ci5jYW5jZWwoKSxlPXIuaXRlbXMoKS5maWx0ZXIoXCJbXCIrbi5hdHRyKFwidWlkXCIpK1wiPVwiK2ErXCJdXCIpLGk9ZS5pbmRleCgpLGUucmVwbGFjZVdpdGgoci5lZGl0VGVtcGxhdGUobykpLHQ9ci5pdGVtcygpLmVxKGkpLmFkZENsYXNzKGYpLmF0dHIobi5hdHRyKFwidWlkXCIpLG8udWlkKSxyLmVkaXRhYmxlPXQua2VuZG9FZGl0YWJsZSh7bW9kZWw6byxjbGVhckNvbnRhaW5lcjohMSxlcnJvclRlbXBsYXRlOiExLHRhcmdldDpyfSkuZGF0YShcImtlbmRvRWRpdGFibGVcIiksci50cmlnZ2VyKGcse21vZGVsOm8saXRlbTp0fSl9LHNhdmU6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10LmVkaXRhYmxlO24mJihuPW4uZWxlbWVudCxlPXQuX21vZGVsRnJvbUVsZW1lbnQobiksIXQudHJpZ2dlcih2LHttb2RlbDplLGl0ZW06bn0pJiZ0Ll9jbG9zZUVkaXRhYmxlKCEwKSYmdC5kYXRhU291cmNlLnN5bmMoKSl9LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5kYXRhU291cmNlLGk9dC5fbW9kZWxGcm9tRWxlbWVudChlKTt0LnRyaWdnZXIobSx7bW9kZWw6aSxpdGVtOmV9KXx8KGUuaGlkZSgpLG4ucmVtb3ZlKGkpLG4uc3luYygpKX0sYWRkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZGF0YVNvdXJjZSxuPXQuaW5kZXhPZigodC52aWV3KCl8fFtdKVswXSk7MD5uJiYobj0wKSxlLmNhbmNlbCgpLHQuaW5zZXJ0KG4se30pLGUuZWRpdChlLmVsZW1lbnQuY2hpbGRyZW4oKS5maXJzdCgpKX0sY2FuY2VsOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMsaT1uLmRhdGFTb3VyY2U7bi5lZGl0YWJsZSYmKGU9bi5lZGl0YWJsZS5lbGVtZW50LHQ9bi5fbW9kZWxGcm9tRWxlbWVudChlKSxuLnRyaWdnZXIocix7bW9kZWw6dCxjb250YWluZXI6ZX0pfHwoaS5jYW5jZWxDaGFuZ2VzKHQpLG4uX2Nsb3NlRWRpdGFibGUoITEpKSl9LF9jcnVkSGFuZGxlcnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGk9Xyt5O3QuZWxlbWVudC5vbihpLFwiLmstZWRpdC1idXR0b25cIixmdW5jdGlvbihpKXt2YXIgcj1lKHRoaXMpLmNsb3Nlc3QoXCJbXCIrbi5hdHRyKFwidWlkXCIpK1wiXVwiKTt0LmVkaXQociksaS5wcmV2ZW50RGVmYXVsdCgpfSksdC5lbGVtZW50Lm9uKGksXCIuay1kZWxldGUtYnV0dG9uXCIsZnVuY3Rpb24oaSl7dmFyIHI9ZSh0aGlzKS5jbG9zZXN0KFwiW1wiK24uYXR0cihcInVpZFwiKStcIl1cIik7dC5yZW1vdmUociksaS5wcmV2ZW50RGVmYXVsdCgpfSksdC5lbGVtZW50Lm9uKGksXCIuay11cGRhdGUtYnV0dG9uXCIsZnVuY3Rpb24oZSl7dC5zYXZlKCksZS5wcmV2ZW50RGVmYXVsdCgpfSksdC5lbGVtZW50Lm9uKGksXCIuay1jYW5jZWwtYnV0dG9uXCIsZnVuY3Rpb24oZSl7dC5jYW5jZWwoKSxlLnByZXZlbnREZWZhdWx0KCl9KX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cy5mbi5kZXN0cm95LmNhbGwoZSksZS5fdW5iaW5kRGF0YVNvdXJjZSgpLGUuX2Rlc3Ryb3lFZGl0YWJsZSgpLGUuZWxlbWVudC5vZmYoeSksZS5wYWdlciYmZS5wYWdlci5kZXN0cm95KCksbi5kZXN0cm95KGUuZWxlbWVudCl9fSk7bi51aS5wbHVnaW4oQyl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbih0KXtyZXR1cm4gZS5tYXAoaSh0KSxmdW5jdGlvbihlKXtyZXR1cm4gZS5uYW1lfSkuam9pbihcIiwgXCIpfWZ1bmN0aW9uIGkoZSl7dmFyIHQ9ZVswXTtyZXR1cm4gdC5maWxlcz9yKHQuZmlsZXMpOlt7bmFtZTpzKHQudmFsdWUpLGV4dGVuc2lvbjphKHQudmFsdWUpLHNpemU6bnVsbH1dfWZ1bmN0aW9uIHIodCl7cmV0dXJuIGUubWFwKHQsZnVuY3Rpb24oZSl7cmV0dXJuIG8oZSl9KX1mdW5jdGlvbiBvKGUpe3ZhciB0PWUubmFtZXx8ZS5maWxlTmFtZTtyZXR1cm57bmFtZTp5Lmh0bWxFbmNvZGUodCksZXh0ZW5zaW9uOmEodCksc2l6ZTplLnNpemV8fGUuZmlsZVNpemUscmF3RmlsZTplfX1mdW5jdGlvbiBhKGUpe3ZhciB0PWUubWF0Y2goayk7cmV0dXJuIHQ/dFswXTpcIlwifWZ1bmN0aW9uIHMoZSl7dmFyIHQ9ZS5sYXN0SW5kZXhPZihcIlxcXFxcIik7cmV0dXJuLTEhPXQ/ZS5zdWJzdHIodCsxKTplfWZ1bmN0aW9uIGwodCxuKXt2YXIgaT15Lmd1aWQoKTtyZXR1cm4gZS5tYXAodCxmdW5jdGlvbihlKXtyZXR1cm4gZS51aWQ9bj95Lmd1aWQoKTppLGV9KX1mdW5jdGlvbiBjKHQsbixpKXt2YXIgcixvO24uX3N1cHBvcnRzUmVtb3ZlKCkmJihyPXQuZGF0YShcImZpbGVOYW1lc1wiKSxvPWUubWFwKHIsZnVuY3Rpb24oZSl7cmV0dXJuIGUubmFtZX0pLG4uX3N1Ym1pdFJlbW92ZShvLGksZnVuY3Rpb24oZSxpLG8pe24uX3JlbW92ZUZpbGVFbnRyeSh0KSxuLnRyaWdnZXIoVCx7b3BlcmF0aW9uOlwicmVtb3ZlXCIsZmlsZXM6cixyZXNwb25zZTplLFhNTEh0dHBSZXF1ZXN0Om99KX0sZnVuY3Rpb24oZSl7bi50cmlnZ2VyKEQse29wZXJhdGlvbjpcInJlbW92ZVwiLGZpbGVzOnIsWE1MSHR0cFJlcXVlc3Q6ZX0pLGIoXCJTZXJ2ZXIgcmVzcG9uc2U6IFwiK2UucmVzcG9uc2VUZXh0KX0pKX1mdW5jdGlvbiBkKHQsbixpKXt2YXIgcj0hMSxvPVwiXCI7dHJ5e289ZS5wYXJzZUpTT04odSh0KSkscj0hMH1jYXRjaChhKXtpKCl9ciYmbihvKX1mdW5jdGlvbiB1KGUpe3JldHVybih0PT09ZXx8XCJcIj09PWUpJiYoZT1cInt9XCIpLGV9ZnVuY3Rpb24gaChlKXtlLnN0b3BQcm9wYWdhdGlvbigpLGUucHJldmVudERlZmF1bHQoKX1mdW5jdGlvbiBwKGUsdCxuLGkpe3ZhciByLG87ZS5vbihcImRyYWdlbnRlclwiK3QsZnVuY3Rpb24oKXtuKCksbz1uZXcgRGF0ZSxyfHwocj1zZXRJbnRlcnZhbChmdW5jdGlvbigpe3ZhciBlPW5ldyBEYXRlLW87ZT4xMDAmJihpKCksY2xlYXJJbnRlcnZhbChyKSxyPW51bGwpfSwxMDApKX0pLm9uKFwiZHJhZ292ZXJcIit0LGZ1bmN0aW9uKCl7bz1uZXcgRGF0ZX0pfWZ1bmN0aW9uIGYoZSl7cmV0dXJuIGUuaXMoXCIuay1maWxlLXByb2dyZXNzLCAuay1maWxlLXN1Y2Nlc3MsIC5rLWZpbGUtZXJyb3JcIil9ZnVuY3Rpb24gZyh0KXtyZXR1cm4gZSh0LnRhcmdldCkuY2xvc2VzdChcIi5rLWZpbGVcIil9ZnVuY3Rpb24gbSgpe3ZhciBuPXt9LGk9ZShcIm1ldGFbbmFtZT1jc3JmLXRva2VuXVwiKS5hdHRyKFwiY29udGVudFwiKSxyPWUoXCJtZXRhW25hbWU9Y3NyZi1wYXJhbV1cIikuYXR0cihcImNvbnRlbnRcIik7cmV0dXJuIGUoXCJpbnB1dFtuYW1lXj0nX19SZXF1ZXN0VmVyaWZpY2F0aW9uVG9rZW4nXVwiKS5lYWNoKGZ1bmN0aW9uKCl7blt0aGlzLm5hbWVdPXRoaXMudmFsdWV9KSxyIT09dCYmaSE9PXQmJihuW3JdPWkpLG59dmFyIHYsXyx5PXdpbmRvdy5rZW5kbyx3PXkudWkuV2lkZ2V0LGI9eS5sb2dUb0NvbnNvbGUsaz0vXFwuKFteXFwuXSspJC8seD1cIi5rZW5kb1VwbG9hZFwiLEM9XCJzZWxlY3RcIixTPVwidXBsb2FkXCIsVD1cInN1Y2Nlc3NcIixEPVwiZXJyb3JcIixBPVwiY29tcGxldGVcIixFPVwiY2FuY2VsXCIsTT1cInByb2dyZXNzXCIsUD1cInJlbW92ZVwiLEk9dy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG8sYT10aGlzO3cuZm4uaW5pdC5jYWxsKGEsdCxuKSxhLm5hbWU9dC5uYW1lLGEubXVsdGlwbGU9YS5vcHRpb25zLm11bHRpcGxlLGEubG9jYWxpemF0aW9uPWEub3B0aW9ucy5sb2NhbGl6YXRpb24saT1hLmVsZW1lbnQsYS53cmFwcGVyPWkuY2xvc2VzdChcIi5rLXVwbG9hZFwiKSwwPT09YS53cmFwcGVyLmxlbmd0aCYmKGEud3JhcHBlcj1hLl93cmFwSW5wdXQoaSkpLGEuX2FjdGl2ZUlucHV0KGkpLGEudG9nZ2xlKGEub3B0aW9ucy5lbmFibGVkKSxyPWEuX25zPXgrXCItXCIreS5ndWlkKCksaS5jbG9zZXN0KFwiZm9ybVwiKS5vbihcInN1Ym1pdFwiK3IsZS5wcm94eShhLl9vblBhcmVudEZvcm1TdWJtaXQsYSkpLm9uKFwicmVzZXRcIityLGUucHJveHkoYS5fb25QYXJlbnRGb3JtUmVzZXQsYSkpLGEub3B0aW9ucy5hc3luYy5zYXZlVXJsPyhhLl9tb2R1bGU9YS5fc3VwcG9ydHNGb3JtRGF0YSgpP25ldyBfKGEpOm5ldyB2KGEpLGEuX2FzeW5jPSEwLG89YS5vcHRpb25zLmZpbGVzLG8ubGVuZ3RoPjAmJmEuX3JlbmRlckluaXRpYWxGaWxlcyhvKSk6YS5fbW9kdWxlPW5ldyB6KGEpLGEuX3N1cHBvcnRzRHJvcCgpJiZhLl9zZXR1cERyb3Bab25lKCksYS53cmFwcGVyLm9uKFwiY2xpY2tcIixcIi5rLXVwbG9hZC1hY3Rpb25cIixlLnByb3h5KGEuX29uRmlsZUFjdGlvbixhKSkub24oXCJjbGlja1wiLFwiLmstdXBsb2FkLXNlbGVjdGVkXCIsZS5wcm94eShhLl9vblVwbG9hZFNlbGVjdGVkLGEpKSxhLmVsZW1lbnQudmFsKCkmJmEuX29uSW5wdXRDaGFuZ2Uoe3RhcmdldDphLmVsZW1lbnR9KX0sZXZlbnRzOltDLFMsVCxELEEsRSxNLFBdLG9wdGlvbnM6e25hbWU6XCJVcGxvYWRcIixlbmFibGVkOiEwLG11bHRpcGxlOiEwLHNob3dGaWxlTGlzdDohMCx0ZW1wbGF0ZTpcIlwiLGZpbGVzOltdLGFzeW5jOntyZW1vdmVWZXJiOlwiUE9TVFwiLGF1dG9VcGxvYWQ6ITAsd2l0aENyZWRlbnRpYWxzOiEwfSxsb2NhbGl6YXRpb246e3NlbGVjdDpcIlNlbGVjdCBmaWxlcy4uLlwiLGNhbmNlbDpcIkNhbmNlbFwiLHJldHJ5OlwiUmV0cnlcIixyZW1vdmU6XCJSZW1vdmVcIix1cGxvYWRTZWxlY3RlZEZpbGVzOlwiVXBsb2FkIGZpbGVzXCIsZHJvcEZpbGVzSGVyZTpcImRyb3AgZmlsZXMgaGVyZSB0byB1cGxvYWRcIixzdGF0dXNVcGxvYWRpbmc6XCJ1cGxvYWRpbmdcIixzdGF0dXNVcGxvYWRlZDpcInVwbG9hZGVkXCIsc3RhdHVzV2FybmluZzpcIndhcm5pbmdcIixzdGF0dXNGYWlsZWQ6XCJmYWlsZWRcIixoZWFkZXJTdGF0dXNVcGxvYWRpbmc6XCJVcGxvYWRpbmcuLi5cIixoZWFkZXJTdGF0dXNVcGxvYWRlZDpcIkRvbmVcIn19LHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudDt3LmZuLnNldE9wdGlvbnMuY2FsbCh0LGUpLHQubXVsdGlwbGU9dC5vcHRpb25zLm11bHRpcGxlLG4uYXR0cihcIm11bHRpcGxlXCIsdC5fc3VwcG9ydHNNdWx0aXBsZSgpP3QubXVsdGlwbGU6ITEpLHQudG9nZ2xlKHQub3B0aW9ucy5lbmFibGVkKX0sZW5hYmxlOmZ1bmN0aW9uKGUpe2U9dD09PWU/ITA6ZSx0aGlzLnRvZ2dsZShlKVxufSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy50b2dnbGUoITEpfSx0b2dnbGU6ZnVuY3Rpb24oZSl7ZT10PT09ZT9lOiFlLHRoaXMud3JhcHBlci50b2dnbGVDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIixlKSx0aGlzLmVsZW1lbnQucHJvcChcImRpc2FibGVkXCIsZSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2UoZG9jdW1lbnQpLmFkZChlKFwiLmstZHJvcHpvbmVcIix0LndyYXBwZXIpKS5hZGQodC53cmFwcGVyLmNsb3Nlc3QoXCJmb3JtXCIpKS5vZmYodC5fbnMpLGUodC5lbGVtZW50KS5vZmYoeCksdy5mbi5kZXN0cm95LmNhbGwodCl9LF9hZGRJbnB1dDpmdW5jdGlvbih0KXtpZih0WzBdLm5vZGVUeXBlKXt2YXIgbj10aGlzLGk9dC5jbG9uZSgpLnZhbChcIlwiKTtpLmluc2VydEFmdGVyKG4uZWxlbWVudCkuZGF0YShcImtlbmRvVXBsb2FkXCIsbiksZShuLmVsZW1lbnQpLmhpZGUoKS5hdHRyKFwidGFiaW5kZXhcIixcIi0xXCIpLnJlbW92ZUF0dHIoXCJpZFwiKS5vZmYoeCksbi5fYWN0aXZlSW5wdXQoaSksbi5lbGVtZW50LmZvY3VzKCl9fSxfYWN0aXZlSW5wdXQ6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPW4ud3JhcHBlcjtuLmVsZW1lbnQ9dCx0LmF0dHIoXCJtdWx0aXBsZVwiLG4uX3N1cHBvcnRzTXVsdGlwbGUoKT9uLm11bHRpcGxlOiExKS5hdHRyKFwiYXV0b2NvbXBsZXRlXCIsXCJvZmZcIikub24oXCJjbGlja1wiK3gsZnVuY3Rpb24oZSl7aS5oYXNDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIikmJmUucHJldmVudERlZmF1bHQoKX0pLm9uKFwiZm9jdXNcIit4LGZ1bmN0aW9uKCl7ZSh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcyhcImstc3RhdGUtZm9jdXNlZFwiKX0pLm9uKFwiYmx1clwiK3gsZnVuY3Rpb24oKXtlKHRoaXMpLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1mb2N1c2VkXCIpfSkub24oXCJjaGFuZ2VcIit4LGUucHJveHkobi5fb25JbnB1dENoYW5nZSxuKSkub24oXCJrZXlkb3duXCIreCxlLnByb3h5KG4uX29uSW5wdXRLZXlEb3duLG4pKX0sX29uSW5wdXRLZXlEb3duOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LndyYXBwZXIuZmluZChcIi5rLXVwbG9hZC1hY3Rpb246Zmlyc3RcIik7ZS5rZXlDb2RlPT09eS5rZXlzLlRBQiYmbi5sZW5ndGg+MCYmKGUucHJldmVudERlZmF1bHQoKSxuLmZvY3VzKCkpfSxfb25JbnB1dENoYW5nZTpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9ZSh0LnRhcmdldCkscj1sKG4uX2lucHV0RmlsZXMoaSksbi5faXNBc3luY05vbkJhdGNoKCkpLG89bi50cmlnZ2VyKEMse2ZpbGVzOnJ9KTtvPyhuLl9hZGRJbnB1dChpKSxpLnJlbW92ZSgpKTpuLl9tb2R1bGUub25TZWxlY3Qoe3RhcmdldDppfSxyKX0sX29uRHJvcDpmdW5jdGlvbih0KXt2YXIgbixpPXQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIsbz10aGlzLGE9aS5maWxlcyxzPWwocihhKSxvLl9pc0FzeW5jTm9uQmF0Y2goKSk7aCh0KSxhLmxlbmd0aD4wJiYobj1vLnRyaWdnZXIoQyx7ZmlsZXM6c30pLG58fG8uX21vZHVsZS5vblNlbGVjdCh7dGFyZ2V0OmUoXCIuay1kcm9wem9uZVwiLG8ud3JhcHBlcil9LHMpKX0sX2lzQXN5bmNOb25CYXRjaDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hc3luYyYmIXRoaXMub3B0aW9ucy5hc3luYy5iYXRjaHx8ITF9LF9yZW5kZXJJbml0aWFsRmlsZXM6ZnVuY3Rpb24odCl7dmFyIG4saSxyPXRoaXMsbz0wO2Zvcih0PWwodCwhMCksbz0wO3QubGVuZ3RoPm87bysrKW49dFtvXSxpPXIuX2VucXVldWVGaWxlKG4ubmFtZSx7ZmlsZU5hbWVzOltuXX0pLGkuYWRkQ2xhc3MoXCJrLWZpbGUtc3VjY2Vzc1wiKS5kYXRhKFwiZmlsZXNcIixbdFtvXV0pLGUoXCIuay1wcm9ncmVzc1wiLGkpLndpZHRoKFwiMTAwJVwiKSxlKFwiLmstdXBsb2FkLXN0YXR1c1wiLGkpLnByZXBlbmQoXCI8c3BhbiBjbGFzcz0nay11cGxvYWQtcGN0Jz4xMDAlPC9zcGFuPlwiKSxyLl9maWxlQWN0aW9uKGksUCl9LF9wcmVwYXJlVGVtcGxhdGVEYXRhOmZ1bmN0aW9uKGUsdCl7dmFyIG49dC5maWxlTmFtZXMsaT17fSxyPTAsbz0wO2ZvcihvPTA7bi5sZW5ndGg+bztvKyspcis9bltvXS5zaXplO3JldHVybiBpLm5hbWU9ZSxpLnNpemU9cixpLmZpbGVzPXQuZmlsZU5hbWVzLGl9LF9wcmVwYXJlRGVmYXVsdEZpbGVFbnRyeVRlbXBsYXRlOmZ1bmN0aW9uKHQsbil7dmFyIGk9XCJcIixyPWUoXCI8bGkgY2xhc3M9J2stZmlsZSc+PHNwYW4gY2xhc3M9J2stcHJvZ3Jlc3MnPjwvc3Bhbj48c3BhbiBjbGFzcz0nay1pY29uJz48L3NwYW4+PHNwYW4gY2xhc3M9J2stZmlsZW5hbWUnIHRpdGxlPSdcIit0K1wiJz5cIit0K1wiPC9zcGFuPjxzdHJvbmcgY2xhc3M9J2stdXBsb2FkLXN0YXR1cyc+PC9zdHJvbmc+PC9saT5cIik7cmV0dXJuIDE9PW4uZmlsZU5hbWVzLmxlbmd0aCYmbi5maWxlTmFtZXNbMF0uZXh0ZW5zaW9uJiYoaT1uLmZpbGVOYW1lc1swXS5leHRlbnNpb24uc3Vic3RyaW5nKDEpLGUoXCIuay1pY29uXCIscikuYWRkQ2xhc3MoXCJrLWktXCIraSkpLHJ9LF9lbnF1ZXVlRmlsZTpmdW5jdGlvbih0LG4pe3ZhciBpLHIsbyxhPXRoaXMscz1uLmZpbGVOYW1lc1swXS51aWQsbD1lKFwiLmstdXBsb2FkLWZpbGVzXCIsYS53cmFwcGVyKSxjPWEub3B0aW9ucyxkPWMudGVtcGxhdGU7cmV0dXJuIDA9PT1sLmxlbmd0aCYmKGw9ZShcIjx1bCBjbGFzcz0nay11cGxvYWQtZmlsZXMgay1yZXNldCc+PC91bD5cIikuYXBwZW5kVG8oYS53cmFwcGVyKSxhLm9wdGlvbnMuc2hvd0ZpbGVMaXN0fHxsLmhpZGUoKSxhLndyYXBwZXIucmVtb3ZlQ2xhc3MoXCJrLXVwbG9hZC1lbXB0eVwiKSksaT1lKFwiLmstZmlsZVwiLGwpLGQ/KG89YS5fcHJlcGFyZVRlbXBsYXRlRGF0YSh0LG4pLGQ9eS50ZW1wbGF0ZShkKSxyPWUoXCI8bGkgY2xhc3M9J2stZmlsZSc+XCIrZChvKStcIjwvbGk+XCIpLHIuZmluZChcIi5rLXVwbG9hZC1hY3Rpb25cIikuYWRkQ2xhc3MoXCJrLWJ1dHRvbiBrLWJ1dHRvbi1iYXJlXCIpKTpyPWEuX3ByZXBhcmVEZWZhdWx0RmlsZUVudHJ5VGVtcGxhdGUodCxuKSxyLmF0dHIoeS5hdHRyKFwidWlkXCIpLHMpLmFwcGVuZFRvKGwpLmRhdGEobiksYS5fYXN5bmN8fGUoXCIuay1wcm9ncmVzc1wiLHIpLndpZHRoKFwiMTAwJVwiKSwhYS5tdWx0aXBsZSYmaS5sZW5ndGg+MCYmYS5fbW9kdWxlLm9uUmVtb3ZlKHt0YXJnZXQ6ZShpLGEud3JhcHBlcil9KSxyfSxfcmVtb3ZlRmlsZUVudHJ5OmZ1bmN0aW9uKHQpe3ZhciBuLGkscj10aGlzLG89dC5jbG9zZXN0KFwiLmstdXBsb2FkLWZpbGVzXCIpO3QucmVtb3ZlKCksbj1lKFwiLmstZmlsZVwiLG8pLGk9ZShcIi5rLWZpbGUtc3VjY2VzcywgLmstZmlsZS1lcnJvclwiLG8pLGkubGVuZ3RoPT09bi5sZW5ndGgmJnRoaXMuX2hpZGVVcGxvYWRCdXR0b24oKSwwPT09bi5sZW5ndGgmJihvLnJlbW92ZSgpLHIud3JhcHBlci5hZGRDbGFzcyhcImstdXBsb2FkLWVtcHR5XCIpLHIuX2hpZGVIZWFkZXJVcGxvYWRzdGF0dXMoKSl9LF9maWxlQWN0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG49e3JlbW92ZTpcImstZGVsZXRlXCIsY2FuY2VsOlwiay1jYW5jZWxcIixyZXRyeTpcImstcmV0cnlcIn0saT17cmVtb3ZlOlwiay1pLWNsb3NlXCIsY2FuY2VsOlwiay1pLWNsb3NlXCIscmV0cnk6XCJrLWktcmVmcmVzaFwifTtuLmhhc093blByb3BlcnR5KHQpJiYodGhpcy5fY2xlYXJGaWxlQWN0aW9uKGUpLHRoaXMub3B0aW9ucy50ZW1wbGF0ZT9lLmZpbmQoXCIuay11cGxvYWQtYWN0aW9uXCIpLmFkZENsYXNzKFwiay1idXR0b24gay1idXR0b24tYmFyZVwiKS5hcHBlbmQoXCI8c3BhbiBjbGFzcz0nay1pY29uIFwiK2lbdF0rXCIgXCIrblt0XStcIicgdGl0bGU9J1wiK3RoaXMubG9jYWxpemF0aW9uW3RdK1wiJz48L3NwYW4+XCIpLnNob3coKTooZS5maW5kKFwiLmstdXBsb2FkLXN0YXR1cyAuay11cGxvYWQtYWN0aW9uXCIpLnJlbW92ZSgpLGUuZmluZChcIi5rLXVwbG9hZC1zdGF0dXNcIikuYXBwZW5kKHRoaXMuX3JlbmRlckFjdGlvbihuW3RdLHRoaXMubG9jYWxpemF0aW9uW3RdLGlbdF0pKSkpfSxfZmlsZVN0YXRlOmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpcy5sb2NhbGl6YXRpb24scj17dXBsb2FkaW5nOnt0ZXh0Omkuc3RhdHVzVXBsb2FkaW5nfSx1cGxvYWRlZDp7dGV4dDppLnN0YXR1c1VwbG9hZGVkfSxmYWlsZWQ6e3RleHQ6aS5zdGF0dXNGYWlsZWR9fSxvPXJbbl07byYmZShcIi5rLWljb246bm90KC5rLWRlbGV0ZSwgLmstY2FuY2VsLCAuay1yZXRyeSlcIix0KS50ZXh0KG8udGV4dCl9LF9yZW5kZXJBY3Rpb246ZnVuY3Rpb24odCxuLGkpe3JldHVybiBlKFwiXCIhPT10P1wiPGJ1dHRvbiB0eXBlPSdidXR0b24nIGNsYXNzPSdrLWJ1dHRvbiBrLWJ1dHRvbi1iYXJlIGstdXBsb2FkLWFjdGlvbic+PHNwYW4gY2xhc3M9J2staWNvbiBcIitpK1wiIFwiK3QrXCInIHRpdGxlPSdcIituK1wiJz48L3NwYW4+PC9idXR0b24+XCI6XCI8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J2stYnV0dG9uJz5cIituK1wiPC9idXR0b24+XCIpfSxfY2xlYXJGaWxlQWN0aW9uOmZ1bmN0aW9uKHQpe2UoXCIuay11cGxvYWQtYWN0aW9uXCIsdCkuZW1wdHkoKS5oaWRlKCl9LF9vbkZpbGVBY3Rpb246ZnVuY3Rpb24odCl7dmFyIG4saSxyLG8sYT10aGlzO3JldHVybiBhLndyYXBwZXIuaGFzQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIpfHwobj1lKHQudGFyZ2V0KS5jbG9zZXN0KFwiLmstdXBsb2FkLWFjdGlvblwiKSxpPW4uZmluZChcIi5rLWljb25cIikscj1uLmNsb3Nlc3QoXCIuay1maWxlXCIpLG89e2ZpbGVzOnIuZGF0YShcImZpbGVOYW1lc1wiKX0saS5oYXNDbGFzcyhcImstZGVsZXRlXCIpP2EudHJpZ2dlcihQLG8pfHxhLl9tb2R1bGUub25SZW1vdmUoe3RhcmdldDplKHIsYS53cmFwcGVyKX0sby5kYXRhKTppLmhhc0NsYXNzKFwiay1jYW5jZWxcIik/KGEudHJpZ2dlcihFLG8pLGEuX21vZHVsZS5vbkNhbmNlbCh7dGFyZ2V0OmUocixhLndyYXBwZXIpfSksdGhpcy5fY2hlY2tBbGxDb21wbGV0ZSgpLGEuX3VwZGF0ZUhlYWRlclVwbG9hZFN0YXR1cygpKTppLmhhc0NsYXNzKFwiay1yZXRyeVwiKSYmKGUoXCIuay13YXJuaW5nXCIscikucmVtb3ZlKCksYS5fbW9kdWxlLm9uUmV0cnkoe3RhcmdldDplKHIsYS53cmFwcGVyKX0pKSksITF9LF9vblVwbG9hZFNlbGVjdGVkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUud3JhcHBlcjtyZXR1cm4gdC5oYXNDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIil8fHRoaXMuX21vZHVsZS5vblNhdmVTZWxlY3RlZCgpLCExfSxfb25GaWxlUHJvZ3Jlc3M6ZnVuY3Rpb24odCxuKXt2YXIgaTt0aGlzLm9wdGlvbnMudGVtcGxhdGU/ZShcIi5rLXByb2dyZXNzXCIsdC50YXJnZXQpLndpZHRoKG4rXCIlXCIpOihpPWUoXCIuay11cGxvYWQtcGN0XCIsdC50YXJnZXQpLDA9PT1pLmxlbmd0aCYmZShcIi5rLXVwbG9hZC1zdGF0dXNcIix0LnRhcmdldCkucHJlcGVuZChcIjxzcGFuIGNsYXNzPSdrLXVwbG9hZC1wY3QnPjwvc3Bhbj5cIiksZShcIi5rLXVwbG9hZC1wY3RcIix0LnRhcmdldCkudGV4dChuK1wiJVwiKSxlKFwiLmstcHJvZ3Jlc3NcIix0LnRhcmdldCkud2lkdGgobitcIiVcIikpLHRoaXMudHJpZ2dlcihNLHtmaWxlczpnKHQpLmRhdGEoXCJmaWxlTmFtZXNcIikscGVyY2VudENvbXBsZXRlOm59KX0sX29uVXBsb2FkU3VjY2VzczpmdW5jdGlvbihlLHQsbil7dmFyIGk9ZyhlKTt0aGlzLl9maWxlU3RhdGUoaSxcInVwbG9hZGVkXCIpLGkucmVtb3ZlQ2xhc3MoXCJrLWZpbGUtcHJvZ3Jlc3NcIikuYWRkQ2xhc3MoXCJrLWZpbGUtc3VjY2Vzc1wiKSx0aGlzLl91cGRhdGVIZWFkZXJVcGxvYWRTdGF0dXMoKSx0aGlzLnRyaWdnZXIoVCx7ZmlsZXM6aS5kYXRhKFwiZmlsZU5hbWVzXCIpLHJlc3BvbnNlOnQsb3BlcmF0aW9uOlwidXBsb2FkXCIsWE1MSHR0cFJlcXVlc3Q6bn0pLHRoaXMuX3N1cHBvcnRzUmVtb3ZlKCk/dGhpcy5fZmlsZUFjdGlvbihpLFApOnRoaXMuX2NsZWFyRmlsZUFjdGlvbihpKSx0aGlzLl9jaGVja0FsbENvbXBsZXRlKCl9LF9vblVwbG9hZEVycm9yOmZ1bmN0aW9uKHQsbil7dmFyIGk9Zyh0KSxyPWUoXCIuay11cGxvYWQtcGN0XCIsaSk7dGhpcy5fZmlsZVN0YXRlKGksXCJmYWlsZWRcIiksaS5yZW1vdmVDbGFzcyhcImstZmlsZS1wcm9ncmVzc1wiKS5hZGRDbGFzcyhcImstZmlsZS1lcnJvclwiKSxlKFwiLmstcHJvZ3Jlc3NcIixpKS53aWR0aChcIjEwMCVcIiksci5sZW5ndGg+MD9yLmVtcHR5KCkucmVtb3ZlQ2xhc3MoXCJrLXVwbG9hZC1wY3RcIikuYWRkQ2xhc3MoXCJrLWljb24gay13YXJuaW5nXCIpOmUoXCIuay11cGxvYWQtc3RhdHVzXCIsaSkucHJlcGVuZChcIjxzcGFuIGNsYXNzPSdrLWljb24gay13YXJuaW5nJz48L3NwYW4+XCIpLHRoaXMuX3VwZGF0ZUhlYWRlclVwbG9hZFN0YXR1cygpLHRoaXMuX2ZpbGVBY3Rpb24oaSxcInJldHJ5XCIpLHRoaXMudHJpZ2dlcihELHtvcGVyYXRpb246XCJ1cGxvYWRcIixmaWxlczppLmRhdGEoXCJmaWxlTmFtZXNcIiksWE1MSHR0cFJlcXVlc3Q6bn0pLGIoXCJTZXJ2ZXIgcmVzcG9uc2U6IFwiK24ucmVzcG9uc2VUZXh0KSx0aGlzLl9jaGVja0FsbENvbXBsZXRlKCl9LF9zaG93VXBsb2FkQnV0dG9uOmZ1bmN0aW9uKCl7dmFyIHQ9ZShcIi5rLXVwbG9hZC1zZWxlY3RlZFwiLHRoaXMud3JhcHBlcik7MD09PXQubGVuZ3RoJiYodD10aGlzLl9yZW5kZXJBY3Rpb24oXCJcIix0aGlzLmxvY2FsaXphdGlvbi51cGxvYWRTZWxlY3RlZEZpbGVzKS5hZGRDbGFzcyhcImstdXBsb2FkLXNlbGVjdGVkXCIpKSx0aGlzLndyYXBwZXIuYXBwZW5kKHQpfSxfaGlkZVVwbG9hZEJ1dHRvbjpmdW5jdGlvbigpe2UoXCIuay11cGxvYWQtc2VsZWN0ZWRcIix0aGlzLndyYXBwZXIpLnJlbW92ZSgpfSxfc2hvd0hlYWRlclVwbG9hZFN0YXR1czpmdW5jdGlvbigpe3ZhciB0PXRoaXMubG9jYWxpemF0aW9uLG49ZShcIi5rLWRyb3B6b25lXCIsdGhpcy53cmFwcGVyKSxpPWUoXCIuay11cGxvYWQtc3RhdHVzLXRvdGFsXCIsdGhpcy53cmFwcGVyKTswIT09aS5sZW5ndGgmJmkucmVtb3ZlKCksaT0nPHN0cm9uZyBjbGFzcz1cImstdXBsb2FkLXN0YXR1cyBrLXVwbG9hZC1zdGF0dXMtdG90YWxcIj4nK3QuaGVhZGVyU3RhdHVzVXBsb2FkaW5nKyc8c3BhbiBjbGFzcz1cImstaWNvbiBrLWxvYWRpbmdcIj4nK3Quc3RhdHVzVXBsb2FkaW5nK1wiPC9zcGFuPjwvc3Ryb25nPlwiLG4ubGVuZ3RoPjA/bi5hcHBlbmQoaSk6ZShcIi5rLXVwbG9hZC1idXR0b25cIix0aGlzLndyYXBwZXIpLmFmdGVyKGkpfSxfdXBkYXRlSGVhZGVyVXBsb2FkU3RhdHVzOmZ1bmN0aW9uKCl7dmFyIHQsbixpLHI9dGhpcyxvPXIubG9jYWxpemF0aW9uLGE9ZShcIi5rLWZpbGVcIixyLndyYXBwZXIpLm5vdChcIi5rLWZpbGUtc3VjY2VzcywgLmstZmlsZS1lcnJvclwiKTswPT09YS5sZW5ndGgmJih0PWUoXCIuay1maWxlLmstZmlsZS1lcnJvclwiLHIud3JhcHBlciksbj1lKFwiLmstdXBsb2FkLXN0YXR1cy10b3RhbFwiLHIud3JhcHBlciksaT1lKFwiLmstaWNvblwiLG4pLnJlbW92ZUNsYXNzKFwiay1sb2FkaW5nXCIpLmFkZENsYXNzKDAhPT10Lmxlbmd0aD9cImstd2FybmluZ1wiOlwiay1pLXRpY2tcIikudGV4dCgwIT09dC5sZW5ndGg/by5zdGF0dXNXYXJuaW5nOm8uc3RhdHVzVXBsb2FkZWQpLG4udGV4dChyLmxvY2FsaXphdGlvbi5oZWFkZXJTdGF0dXNVcGxvYWRlZCkuYXBwZW5kKGkpKX0sX2hpZGVIZWFkZXJVcGxvYWRzdGF0dXM6ZnVuY3Rpb24oKXtlKFwiLmstdXBsb2FkLXN0YXR1cy10b3RhbFwiLHRoaXMud3JhcHBlcikucmVtb3ZlKCl9LF9vblBhcmVudEZvcm1TdWJtaXQ6ZnVuY3Rpb24oKXt2YXIgbixpPXRoaXMscj1pLmVsZW1lbnQ7dCE9PXRoaXMuX21vZHVsZS5vbkFib3J0JiZ0aGlzLl9tb2R1bGUub25BYm9ydCgpLHIudmFsdWV8fChuPWUociksbi5hdHRyKFwiZGlzYWJsZWRcIixcImRpc2FibGVkXCIpLHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIil9LDApKX0sX29uUGFyZW50Rm9ybVJlc2V0OmZ1bmN0aW9uKCl7ZShcIi5rLXVwbG9hZC1maWxlc1wiLHRoaXMud3JhcHBlcikucmVtb3ZlKCl9LF9zdXBwb3J0c0Zvcm1EYXRhOmZ1bmN0aW9uKCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEZvcm1EYXRhfSxfc3VwcG9ydHNNdWx0aXBsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3VzZXJBZ2VudCgpLmluZGV4T2YoXCJXaW5kb3dzXCIpPi0xO3JldHVybiEoeS5zdXBwb3J0LmJyb3dzZXIub3BlcmF8fHkuc3VwcG9ydC5icm93c2VyLnNhZmFyaSYmZSl9LF9zdXBwb3J0c0Ryb3A6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl91c2VyQWdlbnQoKS50b0xvd2VyQ2FzZSgpLHQ9L2Nocm9tZS8udGVzdChlKSxuPSF0JiYvc2FmYXJpLy50ZXN0KGUpLGk9biYmL3dpbmRvd3MvLnRlc3QoZSk7cmV0dXJuIWkmJnRoaXMuX3N1cHBvcnRzRm9ybURhdGEoKSYmdGhpcy5vcHRpb25zLmFzeW5jLnNhdmVVcmx9LF91c2VyQWdlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gbmF2aWdhdG9yLnVzZXJBZ2VudH0sX3NldHVwRHJvcFpvbmU6ZnVuY3Rpb24oKXt2YXIgdCxuLGk9dGhpcztlKFwiLmstdXBsb2FkLWJ1dHRvblwiLHRoaXMud3JhcHBlcikud3JhcChcIjxkaXYgY2xhc3M9J2stZHJvcHpvbmUnPjwvZGl2PlwiKSx0PWkuX25zLG49ZShcIi5rLWRyb3B6b25lXCIsaS53cmFwcGVyKS5hcHBlbmQoZShcIjxlbT5cIitpLmxvY2FsaXphdGlvbi5kcm9wRmlsZXNIZXJlK1wiPC9lbT5cIikpLm9uKFwiZHJhZ2VudGVyXCIrdCxoKS5vbihcImRyYWdvdmVyXCIrdCxmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCl9KS5vbihcImRyb3BcIit0LGUucHJveHkodGhpcy5fb25Ecm9wLHRoaXMpKSxwKG4sdCxmdW5jdGlvbigpe24uYWRkQ2xhc3MoXCJrLWRyb3B6b25lLWhvdmVyZWRcIil9LGZ1bmN0aW9uKCl7bi5yZW1vdmVDbGFzcyhcImstZHJvcHpvbmUtaG92ZXJlZFwiKX0pLHAoZShkb2N1bWVudCksdCxmdW5jdGlvbigpe24uYWRkQ2xhc3MoXCJrLWRyb3B6b25lLWFjdGl2ZVwiKSxuLmNsb3Nlc3QoXCIuay11cGxvYWRcIikucmVtb3ZlQ2xhc3MoXCJrLXVwbG9hZC1lbXB0eVwiKX0sZnVuY3Rpb24oKXtuLnJlbW92ZUNsYXNzKFwiay1kcm9wem9uZS1hY3RpdmVcIiksMD09PWUoXCJsaS5rLWZpbGVcIixuLmNsb3Nlc3QoXCIuay11cGxvYWRcIikpLmxlbmd0aCYmbi5jbG9zZXN0KFwiLmstdXBsb2FkXCIpLmFkZENsYXNzKFwiay11cGxvYWQtZW1wdHlcIil9KX0sX3N1cHBvcnRzUmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLm9wdGlvbnMuYXN5bmMucmVtb3ZlVXJsfSxfc3VibWl0UmVtb3ZlOmZ1bmN0aW9uKHQsbixpLHIpe3ZhciBvPXRoaXMsYT1vLm9wdGlvbnMuYXN5bmMucmVtb3ZlRmllbGR8fFwiZmlsZU5hbWVzXCIscz1lLmV4dGVuZChuLG0oKSk7c1thXT10LGpRdWVyeS5hamF4KHt0eXBlOnRoaXMub3B0aW9ucy5hc3luYy5yZW1vdmVWZXJiLGRhdGFUeXBlOlwianNvblwiLGRhdGFGaWx0ZXI6dSx1cmw6dGhpcy5vcHRpb25zLmFzeW5jLnJlbW92ZVVybCx0cmFkaXRpb25hbDohMCxkYXRhOnMsc3VjY2VzczppLGVycm9yOnJ9KX0sX3dyYXBJbnB1dDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zO3JldHVybiBlLndyYXAoXCI8ZGl2IGNsYXNzPSdrLXdpZGdldCBrLXVwbG9hZCBrLWhlYWRlcic+PGRpdiBjbGFzcz0nay1idXR0b24gay11cGxvYWQtYnV0dG9uJz48L2Rpdj48L2Rpdj5cIiksbi5hc3luYy5zYXZlVXJsfHxlLmNsb3Nlc3QoXCIuay11cGxvYWRcIikuYWRkQ2xhc3MoXCJrLXVwbG9hZC1zeW5jXCIpLGUuY2xvc2VzdChcIi5rLXVwbG9hZFwiKS5hZGRDbGFzcyhcImstdXBsb2FkLWVtcHR5XCIpLGUuY2xvc2VzdChcIi5rLWJ1dHRvblwiKS5hcHBlbmQoXCI8c3Bhbj5cIit0aGlzLmxvY2FsaXphdGlvbi5zZWxlY3QrXCI8L3NwYW4+XCIpLGUuY2xvc2VzdChcIi5rLXVwbG9hZFwiKX0sX2NoZWNrQWxsQ29tcGxldGU6ZnVuY3Rpb24oKXswPT09ZShcIi5rLWZpbGUuay1maWxlLXByb2dyZXNzXCIsdGhpcy53cmFwcGVyKS5sZW5ndGgmJnRoaXMudHJpZ2dlcihBKX0sX2lucHV0RmlsZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoZSl9fSksej1mdW5jdGlvbihlKXt0aGlzLm5hbWU9XCJzeW5jVXBsb2FkTW9kdWxlXCIsdGhpcy5lbGVtZW50PWUud3JhcHBlcix0aGlzLnVwbG9hZD1lLHRoaXMuZWxlbWVudC5jbG9zZXN0KFwiZm9ybVwiKS5hdHRyKFwiZW5jdHlwZVwiLFwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiKS5hdHRyKFwiZW5jb2RpbmdcIixcIm11bHRpcGFydC9mb3JtLWRhdGFcIil9O3oucHJvdG90eXBlPXtvblNlbGVjdDpmdW5jdGlvbih0LGkpe3ZhciByLG89dGhpcy51cGxvYWQsYT1lKHQudGFyZ2V0KTtvLl9hZGRJbnB1dChhKSxyPW8uX2VucXVldWVGaWxlKG4oYSkse3JlbGF0ZWRJbnB1dDphLGZpbGVOYW1lczppfSksby5fZmlsZUFjdGlvbihyLFApfSxvblJlbW92ZTpmdW5jdGlvbihlKXt2YXIgdD1nKGUpO3QuZGF0YShcInJlbGF0ZWRJbnB1dFwiKS5yZW1vdmUoKSx0aGlzLnVwbG9hZC5fcmVtb3ZlRmlsZUVudHJ5KHQpfX0sdj1mdW5jdGlvbihlKXt0aGlzLm5hbWU9XCJpZnJhbWVVcGxvYWRNb2R1bGVcIix0aGlzLmVsZW1lbnQ9ZS53cmFwcGVyLHRoaXMudXBsb2FkPWUsdGhpcy5pZnJhbWVzPVtdfSxJLl9mcmFtZUlkPTAsdi5wcm90b3R5cGU9e29uU2VsZWN0OmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpcy51cGxvYWQscj1lKHQudGFyZ2V0KSxvPXRoaXMucHJlcGFyZVVwbG9hZChyLG4pO2kub3B0aW9ucy5hc3luYy5hdXRvVXBsb2FkP3RoaXMucGVyZm9ybVVwbG9hZChvKTooaS5fc3VwcG9ydHNSZW1vdmUoKSYmdGhpcy51cGxvYWQuX2ZpbGVBY3Rpb24obyxQKSxpLl9zaG93VXBsb2FkQnV0dG9uKCkpfSxwcmVwYXJlVXBsb2FkOmZ1bmN0aW9uKHQsaSl7dmFyIHIsbyxhLHM9dGhpcy51cGxvYWQsbD1lKHMuZWxlbWVudCksYz1zLm9wdGlvbnMuYXN5bmMuc2F2ZUZpZWxkfHx0LmF0dHIoXCJuYW1lXCIpO3JldHVybiBzLl9hZGRJbnB1dCh0KSx0LmF0dHIoXCJuYW1lXCIsYykscj10aGlzLmNyZWF0ZUZyYW1lKHMubmFtZStcIl9cIitJLl9mcmFtZUlkKyspLHRoaXMucmVnaXN0ZXJGcmFtZShyKSxvPXRoaXMuY3JlYXRlRm9ybShzLm9wdGlvbnMuYXN5bmMuc2F2ZVVybCxyLmF0dHIoXCJuYW1lXCIpKS5hcHBlbmQobCksYT1zLl9lbnF1ZXVlRmlsZShuKHQpLHtmcmFtZTpyLHJlbGF0ZWRJbnB1dDpsLGZpbGVOYW1lczppfSksci5kYXRhKHtmb3JtOm8sZmlsZTphfSksYX0scGVyZm9ybVVwbG9hZDpmdW5jdGlvbih0KXt2YXIgbixpLHIsbz17ZmlsZXM6dC5kYXRhKFwiZmlsZU5hbWVzXCIpfSxhPXQuZGF0YShcImZyYW1lXCIpLHM9dGhpcy51cGxvYWQ7aWYocy50cmlnZ2VyKFMsbykpcy5fcmVtb3ZlRmlsZUVudHJ5KGEuZGF0YShcImZpbGVcIikpLHRoaXMuY2xlYW51cEZyYW1lKGEpLHRoaXMudW5yZWdpc3RlckZyYW1lKGEpO2Vsc2V7cy5faGlkZVVwbG9hZEJ1dHRvbigpLHMuX3Nob3dIZWFkZXJVcGxvYWRTdGF0dXMoKSxhLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpLG49YS5kYXRhKFwiZm9ybVwiKS5hdHRyKFwiYWN0aW9uXCIscy5vcHRpb25zLmFzeW5jLnNhdmVVcmwpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpLG8uZGF0YT1lLmV4dGVuZCh7fSxvLmRhdGEsbSgpKTtmb3IoaSBpbiBvLmRhdGEpcj1uLmZpbmQoXCJpbnB1dFtuYW1lPSdcIitpK1wiJ11cIiksMD09PXIubGVuZ3RoJiYocj1lKFwiPGlucHV0PlwiLHt0eXBlOlwiaGlkZGVuXCIsbmFtZTppfSkucHJlcGVuZFRvKG4pKSxyLnZhbChvLmRhdGFbaV0pO3MuX2ZpbGVBY3Rpb24odCxFKSxzLl9maWxlU3RhdGUodCxcInVwbG9hZGluZ1wiKSxlKHQpLnJlbW92ZUNsYXNzKFwiay1maWxlLWVycm9yXCIpLmFkZENsYXNzKFwiay1maWxlLXByb2dyZXNzXCIpLGEub25lKFwibG9hZFwiLGUucHJveHkodGhpcy5vbklmcmFtZUxvYWQsdGhpcykpLG5bMF0uc3VibWl0KCl9fSxvblNhdmVTZWxlY3RlZDpmdW5jdGlvbigpe3ZhciB0PXRoaXM7ZShcIi5rLWZpbGVcIix0aGlzLmVsZW1lbnQpLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1lKHRoaXMpLGk9ZihuKTtpfHx0LnBlcmZvcm1VcGxvYWQobil9KX0sb25JZnJhbWVMb2FkOmZ1bmN0aW9uKHQpe3ZhciBuLGk9ZSh0LnRhcmdldCk7dHJ5e249aS5jb250ZW50cygpLnRleHQoKX1jYXRjaChyKXtuPVwiRXJyb3IgdHJ5aW5nIHRvIGdldCBzZXJ2ZXIgcmVzcG9uc2U6IFwiK3J9dGhpcy5wcm9jZXNzUmVzcG9uc2UoaSxuKX0scHJvY2Vzc1Jlc3BvbnNlOmZ1bmN0aW9uKHQsbil7dmFyIGk9dC5kYXRhKFwiZmlsZVwiKSxyPXRoaXMsbz17cmVzcG9uc2VUZXh0Om59O2QobixmdW5jdGlvbihuKXtlLmV4dGVuZChvLHtzdGF0dXNUZXh0OlwiT0tcIixzdGF0dXM6XCIyMDBcIn0pLHIudXBsb2FkLl9vbkZpbGVQcm9ncmVzcyh7dGFyZ2V0OmUoaSxyLnVwbG9hZC53cmFwcGVyKX0sMTAwKSxyLnVwbG9hZC5fb25VcGxvYWRTdWNjZXNzKHt0YXJnZXQ6ZShpLHIudXBsb2FkLndyYXBwZXIpfSxuLG8pLHIuY2xlYW51cEZyYW1lKHQpLHIudW5yZWdpc3RlckZyYW1lKHQpfSxmdW5jdGlvbigpe2UuZXh0ZW5kKG8se3N0YXR1c1RleHQ6XCJlcnJvclwiLHN0YXR1czpcIjUwMFwifSksci51cGxvYWQuX29uVXBsb2FkRXJyb3Ioe3RhcmdldDplKGksci51cGxvYWQud3JhcHBlcil9LG8pfSl9LG9uQ2FuY2VsOmZ1bmN0aW9uKHQpe3ZhciBuPWUodC50YXJnZXQpLmRhdGEoXCJmcmFtZVwiKTt0aGlzLnN0b3BGcmFtZVN1Ym1pdChuKSx0aGlzLmNsZWFudXBGcmFtZShuKSx0aGlzLnVucmVnaXN0ZXJGcmFtZShuKSx0aGlzLnVwbG9hZC5fcmVtb3ZlRmlsZUVudHJ5KG4uZGF0YShcImZpbGVcIikpfSxvblJldHJ5OmZ1bmN0aW9uKGUpe3ZhciB0PWcoZSk7dGhpcy5wZXJmb3JtVXBsb2FkKHQpfSxvblJlbW92ZTpmdW5jdGlvbihlLHQpe3ZhciBuPWcoZSksaT1uLmRhdGEoXCJmcmFtZVwiKTtpPyh0aGlzLnVucmVnaXN0ZXJGcmFtZShpKSx0aGlzLnVwbG9hZC5fcmVtb3ZlRmlsZUVudHJ5KG4pLHRoaXMuY2xlYW51cEZyYW1lKGkpKTpjKG4sdGhpcy51cGxvYWQsdCl9LG9uQWJvcnQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVsZW1lbnQsbj10aGlzO2UuZWFjaCh0aGlzLmlmcmFtZXMsZnVuY3Rpb24oKXtlKFwiaW5wdXRcIix0aGlzLmRhdGEoXCJmb3JtXCIpKS5hcHBlbmRUbyh0KSxuLnN0b3BGcmFtZVN1Ym1pdCh0aGlzWzBdKSx0aGlzLmRhdGEoXCJmb3JtXCIpLnJlbW92ZSgpLHRoaXMucmVtb3ZlKCl9KSx0aGlzLmlmcmFtZXM9W119LGNyZWF0ZUZyYW1lOmZ1bmN0aW9uKHQpe3JldHVybiBlKFwiPGlmcmFtZSBuYW1lPSdcIit0K1wiJyBpZD0nXCIrdCtcIicgc3R5bGU9J2Rpc3BsYXk6bm9uZTsnIC8+XCIpfSxjcmVhdGVGb3JtOmZ1bmN0aW9uKHQsbil7cmV0dXJuIGUoXCI8Zm9ybSBlbmN0eXBlPSdtdWx0aXBhcnQvZm9ybS1kYXRhJyBtZXRob2Q9J1BPU1QnIGFjdGlvbj0nXCIrdCtcIicgdGFyZ2V0PSdcIituK1wiJy8+XCIpfSxzdG9wRnJhbWVTdWJtaXQ6ZnVuY3Rpb24oZSl7dCE9PWUuc3RvcD9lLnN0b3AoKTplLmRvY3VtZW50JiZlLmRvY3VtZW50LmV4ZWNDb21tYW5kKFwiU3RvcFwiKX0scmVnaXN0ZXJGcmFtZTpmdW5jdGlvbihlKXt0aGlzLmlmcmFtZXMucHVzaChlKX0sdW5yZWdpc3RlckZyYW1lOmZ1bmN0aW9uKHQpe3RoaXMuaWZyYW1lcz1lLmdyZXAodGhpcy5pZnJhbWVzLGZ1bmN0aW9uKGUpe3JldHVybiBlLmF0dHIoXCJuYW1lXCIpIT10LmF0dHIoXCJuYW1lXCIpfSl9LGNsZWFudXBGcmFtZTpmdW5jdGlvbihlKXt2YXIgdD1lLmRhdGEoXCJmb3JtXCIpO2UuZGF0YShcImZpbGVcIikuZGF0YShcImZyYW1lXCIsbnVsbCksc2V0VGltZW91dChmdW5jdGlvbigpe3QucmVtb3ZlKCksZS5yZW1vdmUoKX0sMSl9fSxfPWZ1bmN0aW9uKGUpe3RoaXMubmFtZT1cImZvcm1EYXRhVXBsb2FkTW9kdWxlXCIsdGhpcy5lbGVtZW50PWUud3JhcHBlcix0aGlzLnVwbG9hZD1lfSxfLnByb3RvdHlwZT17b25TZWxlY3Q6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzLnVwbG9hZCxyPXRoaXMsbz1lKHQudGFyZ2V0KSxhPXRoaXMucHJlcGFyZVVwbG9hZChvLG4pO2UuZWFjaChhLGZ1bmN0aW9uKCl7aS5vcHRpb25zLmFzeW5jLmF1dG9VcGxvYWQ/ci5wZXJmb3JtVXBsb2FkKHRoaXMpOihpLl9zdXBwb3J0c1JlbW92ZSgpJiZpLl9maWxlQWN0aW9uKHRoaXMsUCksaS5fc2hvd1VwbG9hZEJ1dHRvbigpKX0pfSxwcmVwYXJlVXBsb2FkOmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpcy5lbnF1ZXVlRmlsZXMobik7cmV0dXJuIHQuaXMoXCJpbnB1dFwiKSYmKGUuZWFjaChpLGZ1bmN0aW9uKCl7ZSh0aGlzKS5kYXRhKFwicmVsYXRlZElucHV0XCIsdCl9KSx0LmRhdGEoXCJyZWxhdGVkRmlsZUVudHJpZXNcIixpKSx0aGlzLnVwbG9hZC5fYWRkSW5wdXQodCkpLGl9LGVucXVldWVGaWxlczpmdW5jdGlvbih0KXt2YXIgbixpLHIsbyxhPXRoaXMudXBsb2FkLHM9dC5sZW5ndGgsbD1bXTtpZihhLm9wdGlvbnMuYXN5bmMuYmF0Y2g9PT0hMCluPWUubWFwKHQsZnVuY3Rpb24oZSl7cmV0dXJuIGUubmFtZX0pLmpvaW4oXCIsIFwiKSxvPWEuX2VucXVldWVGaWxlKG4se2ZpbGVOYW1lczp0fSksby5kYXRhKFwiZmlsZXNcIix0KSxsLnB1c2gobyk7ZWxzZSBmb3IoaT0wO3M+aTtpKyspcj10W2ldLG49ci5uYW1lLG89YS5fZW5xdWV1ZUZpbGUobix7ZmlsZU5hbWVzOltyXX0pLG8uZGF0YShcImZpbGVzXCIsW3JdKSxsLnB1c2gobyk7cmV0dXJuIGx9LHBlcmZvcm1VcGxvYWQ6ZnVuY3Rpb24odCl7dmFyIG4saT10aGlzLnVwbG9hZCxyPXRoaXMuY3JlYXRlRm9ybURhdGEoKSxvPXRoaXMuY3JlYXRlWEhSKCksYT17ZmlsZXM6dC5kYXRhKFwiZmlsZU5hbWVzXCIpLFhNTEh0dHBSZXF1ZXN0Om99O2lmKGkudHJpZ2dlcihTLGEpKXRoaXMucmVtb3ZlRmlsZUVudHJ5KHQpO2Vsc2V7aS5fZmlsZUFjdGlvbih0LEUpLGkuX2hpZGVVcGxvYWRCdXR0b24oKSxpLl9zaG93SGVhZGVyVXBsb2FkU3RhdHVzKCksYS5kYXRhPWUuZXh0ZW5kKHt9LGEuZGF0YSxtKCkpO2ZvcihuIGluIGEuZGF0YSlyLmFwcGVuZChuLGEuZGF0YVtuXSk7dGhpcy5wb3B1bGF0ZUZvcm1EYXRhKHIsdC5kYXRhKFwiZmlsZXNcIikpLGkuX2ZpbGVTdGF0ZSh0LFwidXBsb2FkaW5nXCIpLGUodCkucmVtb3ZlQ2xhc3MoXCJrLWZpbGUtZXJyb3JcIikuYWRkQ2xhc3MoXCJrLWZpbGUtcHJvZ3Jlc3NcIiksdGhpcy5wb3N0Rm9ybURhdGEoaS5vcHRpb25zLmFzeW5jLnNhdmVVcmwscix0LG8pfX0sb25TYXZlU2VsZWN0ZWQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2UoXCIuay1maWxlXCIsdGhpcy5lbGVtZW50KS5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49ZSh0aGlzKSxpPWYobik7aXx8dC5wZXJmb3JtVXBsb2FkKG4pfSl9LG9uQ2FuY2VsOmZ1bmN0aW9uKGUpe3ZhciB0PWcoZSk7dGhpcy5zdG9wVXBsb2FkUmVxdWVzdCh0KSx0aGlzLnJlbW92ZUZpbGVFbnRyeSh0KX0sb25SZXRyeTpmdW5jdGlvbihlKXt2YXIgdD1nKGUpO3RoaXMucGVyZm9ybVVwbG9hZCh0KX0sb25SZW1vdmU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1nKGUpO24uaGFzQ2xhc3MoXCJrLWZpbGUtc3VjY2Vzc1wiKT9jKG4sdGhpcy51cGxvYWQsdCk6dGhpcy5yZW1vdmVGaWxlRW50cnkobil9LGNyZWF0ZVhIUjpmdW5jdGlvbigpe3JldHVybiBuZXcgWE1MSHR0cFJlcXVlc3R9LHBvc3RGb3JtRGF0YTpmdW5jdGlvbihlLHQsbixpKXt2YXIgcj10aGlzO24uZGF0YShcInJlcXVlc3RcIixpKSxpLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24oZSl7ci5vblJlcXVlc3RTdWNjZXNzLmNhbGwocixlLG4pfSwhMSksaS5hZGRFdmVudExpc3RlbmVyKEQsZnVuY3Rpb24oZSl7ci5vblJlcXVlc3RFcnJvci5jYWxsKHIsZSxuKX0sITEpLGkudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLGZ1bmN0aW9uKGUpe3Iub25SZXF1ZXN0UHJvZ3Jlc3MuY2FsbChyLGUsbil9LCExKSxpLm9wZW4oXCJQT1NUXCIsZSwhMCksaS53aXRoQ3JlZGVudGlhbHM9dGhpcy51cGxvYWQub3B0aW9ucy5hc3luYy53aXRoQ3JlZGVudGlhbHMsaS5zZW5kKHQpfSxjcmVhdGVGb3JtRGF0YTpmdW5jdGlvbigpe3JldHVybiBuZXcgRm9ybURhdGF9LHBvcHVsYXRlRm9ybURhdGE6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXMudXBsb2FkLHI9dC5sZW5ndGg7Zm9yKG49MDtyPm47bisrKWUuYXBwZW5kKGkub3B0aW9ucy5hc3luYy5zYXZlRmllbGR8fGkubmFtZSx0W25dLnJhd0ZpbGUpO3JldHVybiBlfSxvblJlcXVlc3RTdWNjZXNzOmZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gaSgpe28udXBsb2FkLl9vblVwbG9hZEVycm9yKHt0YXJnZXQ6ZShuLG8udXBsb2FkLndyYXBwZXIpfSxyKX12YXIgcj10LnRhcmdldCxvPXRoaXM7ci5zdGF0dXM+PTIwMCYmMjk5Pj1yLnN0YXR1cz9kKHIucmVzcG9uc2VUZXh0LGZ1bmN0aW9uKHQpe28udXBsb2FkLl9vbkZpbGVQcm9ncmVzcyh7dGFyZ2V0OmUobixvLnVwbG9hZC53cmFwcGVyKX0sMTAwKSxvLnVwbG9hZC5fb25VcGxvYWRTdWNjZXNzKHt0YXJnZXQ6ZShuLG8udXBsb2FkLndyYXBwZXIpfSx0LHIpLG8uY2xlYW51cEZpbGVFbnRyeShuKX0saSk6aSgpfSxvblJlcXVlc3RFcnJvcjpmdW5jdGlvbih0LG4pe3ZhciBpPXQudGFyZ2V0O3RoaXMudXBsb2FkLl9vblVwbG9hZEVycm9yKHt0YXJnZXQ6ZShuLHRoaXMudXBsb2FkLndyYXBwZXIpfSxpKX0sY2xlYW51cEZpbGVFbnRyeTpmdW5jdGlvbih0KXt2YXIgbj10LmRhdGEoXCJyZWxhdGVkSW5wdXRcIiksaT0hMDtuJiYoZS5lYWNoKG4uZGF0YShcInJlbGF0ZWRGaWxlRW50cmllc1wiKXx8W10sZnVuY3Rpb24oKXt0aGlzLnBhcmVudCgpLmxlbmd0aD4wJiZ0aGlzWzBdIT10WzBdJiYoaT1pJiZ0aGlzLmhhc0NsYXNzKFwiay1maWxlLXN1Y2Nlc3NcIikpfSksaSYmbi5yZW1vdmUoKSl9LHJlbW92ZUZpbGVFbnRyeTpmdW5jdGlvbihlKXt0aGlzLmNsZWFudXBGaWxlRW50cnkoZSksdGhpcy51cGxvYWQuX3JlbW92ZUZpbGVFbnRyeShlKX0sb25SZXF1ZXN0UHJvZ3Jlc3M6ZnVuY3Rpb24odCxuKXt2YXIgaT1NYXRoLnJvdW5kKDEwMCp0LmxvYWRlZC90LnRvdGFsKTt0aGlzLnVwbG9hZC5fb25GaWxlUHJvZ3Jlc3Moe3RhcmdldDplKG4sdGhpcy51cGxvYWQud3JhcHBlcil9LGkpfSxzdG9wVXBsb2FkUmVxdWVzdDpmdW5jdGlvbihlKXtlLmRhdGEoXCJyZXF1ZXN0XCIpLmFib3J0KCl9fSx5LnVpLnBsdWdpbihJKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsdCxuKXt2YXIgaSxyO2Uub24oXCJkcmFnZW50ZXJcIit4LGZ1bmN0aW9uKCl7dCgpLHI9bmV3IERhdGUsaXx8KGk9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXt2YXIgZT1uZXcgRGF0ZS1yO2U+MTAwJiYobigpLGNsZWFySW50ZXJ2YWwoaSksaT1udWxsKX0sMTAwKSl9KS5vbihcImRyYWdvdmVyXCIreCxmdW5jdGlvbigpe3I9bmV3IERhdGV9KX1mdW5jdGlvbiBpKGUsbil7cmV0dXJuIGUhPT10JiZlLm1hdGNoKC9cXC8kLyl8fChlPShlfHxcIlwiKStcIi9cIiksZStufWZ1bmN0aW9uIHIoZSl7aWYoIWUpcmV0dXJuXCJcIjt2YXIgdD1cIiBieXRlc1wiO3JldHVybiBlPj0xMDczNzQxODI0Pyh0PVwiIEdCXCIsZS89MTA3Mzc0MTgyNCk6ZT49MTA0ODU3Nj8odD1cIiBNQlwiLGUvPTEwNDg1NzYpOmU+PTEwMjQmJih0PVwiIEtCXCIsZS89MTAyNCksTWF0aC5yb3VuZCgxMDAqZSkvMTAwK3R9ZnVuY3Rpb24gbyhlLHQpe3ZhciBuPWVbdF07cmV0dXJuIGgobik/bi5mcm9tfHxuLmZpZWxkfHx0Om59dmFyIGEscyxsLGMsZD13aW5kb3cua2VuZG8sdT1kLnVpLldpZGdldCxoPWUuaXNQbGFpbk9iamVjdCxwPWUucHJveHksZj1lLmV4dGVuZCxnPWQuc3VwcG9ydC5wbGFjZWhvbGRlcixtPWQuc3VwcG9ydC5icm93c2VyLHY9ZC5pc0Z1bmN0aW9uLF89LyheXFwvfFxcLyQpL2cseT1cImNoYW5nZVwiLHc9XCJhcHBseVwiLGI9XCJlcnJvclwiLGs9XCJjbGlja1wiLHg9XCIua2VuZG9GaWxlQnJvd3NlclwiLEM9XCIua2VuZG9CcmVhZGNydW1ic1wiLFM9XCIua2VuZG9TZWFyY2hCb3hcIixUPVwibmFtZVwiLEQ9XCJzaXplXCIsQT1cInR5cGVcIixFPXtmaWVsZDpBLGRpcjpcImFzY1wifSxNPWQudGVtcGxhdGUoJzxsaSBjbGFzcz1cImstdGlsZS1lbXB0eVwiPjxzdHJvbmc+JHt0ZXh0fTwvc3Ryb25nPjwvbGk+JyksUD0nPGRpdiBjbGFzcz1cImstd2lkZ2V0IGstZmlsZWJyb3dzZXItdG9vbGJhciBrLWhlYWRlciBrLWZsb2F0d3JhcFwiPjxkaXYgY2xhc3M9XCJrLXRvb2xiYXItd3JhcFwiPiMgaWYgKHNob3dVcGxvYWQpIHsgIyA8ZGl2IGNsYXNzPVwiay13aWRnZXQgay11cGxvYWRcIj48ZGl2IGNsYXNzPVwiay1idXR0b24gay1idXR0b24taWNvbnRleHQgay11cGxvYWQtYnV0dG9uXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1hZGRcIj48L3NwYW4+Iz1tZXNzYWdlcy51cGxvYWRGaWxlIzxpbnB1dCB0eXBlPVwiZmlsZVwiIG5hbWU9XCJmaWxlXCIgLz48L2Rpdj48L2Rpdj4jIH0gIyMgaWYgKHNob3dDcmVhdGUpIHsgIzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiay1idXR0b24gay1idXR0b24taWNvblwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstYWRkZm9sZGVyXCIgLz48L2J1dHRvbj4jIH0gIyMgaWYgKHNob3dEZWxldGUpIHsgIzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiay1idXR0b24gay1idXR0b24taWNvbiBrLXN0YXRlLWRpc2FibGVkXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1kZWxldGVcIiAvPjwvYnV0dG9uPiZuYnNwOyMgfSAjPC9kaXY+PGRpdiBjbGFzcz1cImstdGlsZXMtYXJyYW5nZVwiPjxsYWJlbD4jPW1lc3NhZ2VzLm9yZGVyQnkjOiA8c2VsZWN0IC8+PC9sYWJlbD48L2E+PC9kaXY+PC9kaXY+JztmKCEwLGQuZGF0YSx7c2NoZW1hczp7ZmlsZWJyb3dzZXI6e2RhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaXRlbXN8fGV8fFtdfSxtb2RlbDp7aWQ6XCJuYW1lXCIsZmllbGRzOntuYW1lOlwibmFtZVwiLHNpemU6XCJzaXplXCIsdHlwZTpcInR5cGVcIn19fX19KSxmKCEwLGQuZGF0YSx7dHJhbnNwb3J0czp7ZmlsZWJyb3dzZXI6ZC5kYXRhLlJlbW90ZVRyYW5zcG9ydC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCl7ZC5kYXRhLlJlbW90ZVRyYW5zcG9ydC5mbi5pbml0LmNhbGwodGhpcyxlLmV4dGVuZCghMCx7fSx0aGlzLm9wdGlvbnMsdCkpfSxfY2FsbDpmdW5jdGlvbih0LG4pe24uZGF0YT1lLmV4dGVuZCh7fSxuLmRhdGEse3BhdGg6dGhpcy5vcHRpb25zLnBhdGgoKX0pLHYodGhpcy5vcHRpb25zW3RdKT90aGlzLm9wdGlvbnNbdF0uY2FsbCh0aGlzLG4pOmQuZGF0YS5SZW1vdGVUcmFuc3BvcnQuZm5bdF0uY2FsbCh0aGlzLG4pfSxyZWFkOmZ1bmN0aW9uKGUpe3RoaXMuX2NhbGwoXCJyZWFkXCIsZSl9LGNyZWF0ZTpmdW5jdGlvbihlKXt0aGlzLl9jYWxsKFwiY3JlYXRlXCIsZSl9LGRlc3Ryb3k6ZnVuY3Rpb24oZSl7dGhpcy5fY2FsbChcImRlc3Ryb3lcIixlKX0sdXBkYXRlOmZ1bmN0aW9uKCl7fSxvcHRpb25zOntyZWFkOnt0eXBlOlwiUE9TVFwifSx1cGRhdGU6e3R5cGU6XCJQT1NUXCJ9LGNyZWF0ZTp7dHlwZTpcIlBPU1RcIn0sZGVzdHJveTp7dHlwZTpcIlBPU1RcIn19fSl9fSksYT1tLm1zaWUmJjg+bS52ZXJzaW9uP2Z1bmN0aW9uKGUpe3JldHVybiBlLm9mZnNldFRvcH06ZnVuY3Rpb24odCl7cmV0dXJuIHQub2Zmc2V0VG9wLWUodCkuaGVpZ2h0KCl9LHM9dS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3Q9dHx8e30sdS5mbi5pbml0LmNhbGwobixlLHQpLG4uZWxlbWVudC5hZGRDbGFzcyhcImstZmlsZWJyb3dzZXJcIiksbi5lbGVtZW50Lm9uKGsreCxcIi5rLWZpbGVicm93c2VyLXRvb2xiYXIgYnV0dG9uOm5vdCguay1zdGF0ZS1kaXNhYmxlZCk6aGFzKC5rLWRlbGV0ZSlcIixwKG4uX2RlbGV0ZUNsaWNrLG4pKS5vbihrK3gsXCIuay1maWxlYnJvd3Nlci10b29sYmFyIGJ1dHRvbjpub3QoLmstc3RhdGUtZGlzYWJsZWQpOmhhcyguay1hZGRmb2xkZXIpXCIscChuLl9hZGRDbGljayxuKSkub24oXCJrZXlkb3duXCIreCxcImxpLmstc3RhdGUtc2VsZWN0ZWQgaW5wdXRcIixwKG4uX2RpcmVjdG9yeUtleURvd24sbikpLm9uKFwiYmx1clwiK3gsXCJsaS5rLXN0YXRlLXNlbGVjdGVkIGlucHV0XCIscChuLl9kaXJlY3RvcnlCbHVyLG4pKSxuLl9kYXRhU291cmNlKCksbi5yZWZyZXNoKCksbi5wYXRoKG4ub3B0aW9ucy5wYXRoKX0sb3B0aW9uczp7bmFtZTpcIkZpbGVCcm93c2VyXCIsbWVzc2FnZXM6e3VwbG9hZEZpbGU6XCJVcGxvYWRcIixvcmRlckJ5OlwiQXJyYW5nZSBieVwiLG9yZGVyQnlOYW1lOlwiTmFtZVwiLG9yZGVyQnlTaXplOlwiU2l6ZVwiLGRpcmVjdG9yeU5vdEZvdW5kOlwiQSBkaXJlY3Rvcnkgd2l0aCB0aGlzIG5hbWUgd2FzIG5vdCBmb3VuZC5cIixlbXB0eUZvbGRlcjpcIkVtcHR5IEZvbGRlclwiLGRlbGV0ZUZpbGU6J0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgXCJ7MH1cIj8nLGludmFsaWRGaWxlVHlwZTonVGhlIHNlbGVjdGVkIGZpbGUgXCJ7MH1cIiBpcyBub3QgdmFsaWQuIFN1cHBvcnRlZCBmaWxlIHR5cGVzIGFyZSB7MX0uJyxvdmVyd3JpdGVGaWxlOidBIGZpbGUgd2l0aCBuYW1lIFwiezB9XCIgYWxyZWFkeSBleGlzdHMgaW4gdGhlIGN1cnJlbnQgZGlyZWN0b3J5LiBEbyB5b3Ugd2FudCB0byBvdmVyd3JpdGUgaXQ/Jyxkcm9wRmlsZXNIZXJlOlwiZHJvcCBmaWxlIGhlcmUgdG8gdXBsb2FkXCIsc2VhcmNoOlwiU2VhcmNoXCJ9LHRyYW5zcG9ydDp7fSxwYXRoOlwiL1wiLGZpbGVUeXBlczpcIiouKlwifSxldmVudHM6W2IseSx3XSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt1LmZuLmRlc3Ryb3kuY2FsbChlKSxlLmRhdGFTb3VyY2UudW5iaW5kKGIsZS5fZXJyb3JIYW5kbGVyKSxlLmVsZW1lbnQuYWRkKGUubGlzdCkuYWRkKGUudG9vbGJhcikub2ZmKHgpLGQuZGVzdHJveShlLmVsZW1lbnQpfSx2YWx1ZTpmdW5jdGlvbigpe3ZhciBlLG49dGhpcyxyPW4uX3NlbGVjdGVkSXRlbSgpLG89bi5vcHRpb25zLnRyYW5zcG9ydC5maWxlVXJsO3JldHVybiByJiZcImZcIj09PXIuZ2V0KEEpPyhlPWkobi5wYXRoKCksci5nZXQoVCkpLnJlcGxhY2UoXyxcIlwiKSxvJiYoZT12KG8pP28oZSk6ZC5mb3JtYXQobyxlbmNvZGVVUklDb21wb25lbnQoZSkpKSxlKTp0fSxfc2VsZWN0ZWRJdGVtOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5saXN0VmlldyxuPWUuc2VsZWN0KCk7cmV0dXJuIG4ubGVuZ3RoP3RoaXMuZGF0YVNvdXJjZS5nZXRCeVVpZChuLmF0dHIoZC5hdHRyKFwidWlkXCIpKSk6dH0sX3Rvb2xiYXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49ZC50ZW1wbGF0ZShQKSxpPXQub3B0aW9ucy5tZXNzYWdlcyxyPVt7dGV4dDppLm9yZGVyQnlOYW1lLHZhbHVlOlwibmFtZVwifSx7dGV4dDppLm9yZGVyQnlTaXplLHZhbHVlOlwic2l6ZVwifV07dC50b29sYmFyPWUobih7bWVzc2FnZXM6aSxzaG93VXBsb2FkOnQub3B0aW9ucy50cmFuc3BvcnQudXBsb2FkVXJsLHNob3dDcmVhdGU6dC5vcHRpb25zLnRyYW5zcG9ydC5jcmVhdGUsc2hvd0RlbGV0ZTp0Lm9wdGlvbnMudHJhbnNwb3J0LmRlc3Ryb3l9KSkuYXBwZW5kVG8odC5lbGVtZW50KS5maW5kKFwiLmstdXBsb2FkIGlucHV0XCIpLmtlbmRvVXBsb2FkKHttdWx0aXBsZTohMSxsb2NhbGl6YXRpb246e2Ryb3BGaWxlc0hlcmU6aS5kcm9wRmlsZXNIZXJlfSxhc3luYzp7c2F2ZVVybDp0Lm9wdGlvbnMudHJhbnNwb3J0LnVwbG9hZFVybCxhdXRvVXBsb2FkOiEwfSx1cGxvYWQ6cCh0Ll9maWxlVXBsb2FkLHQpLGVycm9yOmZ1bmN0aW9uKGUpe3QuX2Vycm9yKHt4aHI6ZS5YTUxIdHRwUmVxdWVzdCxzdGF0dXM6XCJlcnJvclwifSl9fSkuZW5kKCksdC51cGxvYWQ9dC50b29sYmFyLmZpbmQoXCIuay11cGxvYWQgaW5wdXRcIikuZGF0YShcImtlbmRvVXBsb2FkXCIpLHQuYXJyYW5nZUJ5PXQudG9vbGJhci5maW5kKFwiLmstdGlsZXMtYXJyYW5nZSBzZWxlY3RcIikua2VuZG9Ecm9wRG93bkxpc3Qoe2RhdGFTb3VyY2U6cixkYXRhVGV4dEZpZWxkOlwidGV4dFwiLGRhdGFWYWx1ZUZpZWxkOlwidmFsdWVcIixjaGFuZ2U6ZnVuY3Rpb24oKXt0Lm9yZGVyQnkodGhpcy52YWx1ZSgpKX19KS5kYXRhKFwia2VuZG9Ecm9wRG93bkxpc3RcIiksdC5fYXR0YWNoRHJvcHpvbmVFdmVudHMoKX0sX2F0dGFjaERyb3B6b25lRXZlbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0Lm9wdGlvbnMudHJhbnNwb3J0LnVwbG9hZFVybCYmKG4oZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLGUucHJveHkodC5fZHJvcEVudGVyLHQpLGUucHJveHkodC5fZHJvcExlYXZlLHQpKSx0Ll9zY3JvbGxIYW5kbGVyPXAodC5fcG9zaXRpb25Ecm9wem9uZSx0KSl9LF9kcm9wRW50ZXI6ZnVuY3Rpb24oKXt0aGlzLl9wb3NpdGlvbkRyb3B6b25lKCksZShkb2N1bWVudCkub24oXCJzY3JvbGxcIit4LHRoaXMuX3Njcm9sbEhhbmRsZXIpfSxfZHJvcExlYXZlOmZ1bmN0aW9uKCl7dGhpcy5fcmVtb3ZlRHJvcHpvbmUoKSxlKGRvY3VtZW50KS5vZmYoXCJzY3JvbGxcIit4LHRoaXMuX3Njcm9sbEhhbmRsZXIpfSxfcG9zaXRpb25Ecm9wem9uZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmVsZW1lbnQsbj10Lm9mZnNldCgpO2UudG9vbGJhci5maW5kKFwiLmstZHJvcHpvbmVcIikuYWRkQ2xhc3MoXCJrLWZpbGVicm93c2VyLWRyb3B6b25lXCIpLm9mZnNldChuKS5jc3Moe3dpZHRoOnRbMF0uY2xpZW50V2lkdGgsaGVpZ2h0OnRbMF0uY2xpZW50SGVpZ2h0LGxpbmVIZWlnaHQ6dFswXS5jbGllbnRIZWlnaHQrXCJweFwifSl9LF9yZW1vdmVEcm9wem9uZTpmdW5jdGlvbigpe3RoaXMudG9vbGJhci5maW5kKFwiLmstZHJvcHpvbmVcIikucmVtb3ZlQ2xhc3MoXCJrLWZpbGVicm93c2VyLWRyb3B6b25lXCIpLmNzcyh7d2lkdGg6XCJcIixoZWlnaHQ6XCJcIixsaW5lSGVpZ2h0OlwiXCIsdG9wOlwiXCIsbGVmdDpcIlwifSl9LF9kZWxldGVDbGljazpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmxpc3RWaWV3LnNlbGVjdCgpLG49ZC5mb3JtYXQoZS5vcHRpb25zLm1lc3NhZ2VzLmRlbGV0ZUZpbGUsdC5maW5kKFwic3Ryb25nXCIpLnRleHQoKSk7dC5sZW5ndGgmJmUuX3Nob3dNZXNzYWdlKG4sXCJjb25maXJtXCIpJiZlLmxpc3RWaWV3LnJlbW92ZSh0KX0sX2FkZENsaWNrOmZ1bmN0aW9uKCl7dGhpcy5jcmVhdGVEaXJlY3RvcnkoKX0sX2dldEZpZWxkTmFtZTpmdW5jdGlvbihlKXtyZXR1cm4gbyh0aGlzLmRhdGFTb3VyY2UucmVhZGVyLm1vZGVsLmZpZWxkcyxlKX0sX2ZpbGVVcGxvYWQ6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLGk9bi5vcHRpb25zLHI9aS5maWxlVHlwZXMsbz1SZWdFeHAoKFwiKFwiK3Iuc3BsaXQoXCIsXCIpLmpvaW4oXCIpfChcIikrXCIpXCIpLnJlcGxhY2UoL1xcKlxcLi9nLFwiLiouXCIpLFwiaVwiKSxhPWUuZmlsZXNbMF0ubmFtZSxzPVQsbD1EO28udGVzdChhKT8oZS5kYXRhPXtwYXRoOm4ucGF0aCgpfSx0PW4uX2NyZWF0ZUZpbGUoYSksdD9uLnVwbG9hZC5vbmUoXCJzdWNjZXNzXCIsZnVuY3Rpb24oZSl7dC5zZXQocyxlLnJlc3BvbnNlW24uX2dldEZpZWxkTmFtZShzKV0pLHQuc2V0KGwsZS5yZXNwb25zZVtuLl9nZXRGaWVsZE5hbWUobCldKSxuLl90aWxlcz1uLmxpc3RWaWV3Lml0ZW1zKCkuZmlsdGVyKFwiW1wiK2QuYXR0cihcInR5cGVcIikrXCI9Zl1cIil9KTplLnByZXZlbnREZWZhdWx0KCkpOihlLnByZXZlbnREZWZhdWx0KCksbi5fc2hvd01lc3NhZ2UoZC5mb3JtYXQoaS5tZXNzYWdlcy5pbnZhbGlkRmlsZVR5cGUsYSxyKSkpfSxfZmluZEZpbGU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9dGhpcy5kYXRhU291cmNlLmRhdGEoKSxvPUEsYT1UO2ZvcihlPWUudG9Mb3dlckNhc2UoKSx0PTAsaT1yLmxlbmd0aDtpPnQ7dCsrKWlmKFwiZlwiPT09clt0XS5nZXQobykmJnJbdF0uZ2V0KGEpLnRvTG93ZXJDYXNlKCk9PT1lKXtuPXJbdF07YnJlYWt9cmV0dXJuIG59LF9jcmVhdGVGaWxlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLHI9MCxvPXt9LGE9QSxzPWkuZGF0YVNvdXJjZS52aWV3KCksbD1pLl9maW5kRmlsZShlKTtpZihsJiYhaS5fc2hvd01lc3NhZ2UoZC5mb3JtYXQoaS5vcHRpb25zLm1lc3NhZ2VzLm92ZXJ3cml0ZUZpbGUsZSksXCJjb25maXJtXCIpKXJldHVybiBudWxsO2lmKGwpcmV0dXJuIGw7Zm9yKHQ9MCxuPXMubGVuZ3RoO24+dDt0KyspaWYoXCJmXCI9PT1zW3RdLmdldChhKSl7cj10O2JyZWFrfXJldHVybiBvW2FdPVwiZlwiLG9bVF09ZSxvW0RdPTAsaS5kYXRhU291cmNlLmluc2VydCgrK3Isbyl9LGNyZWF0ZURpcmVjdG9yeTpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLGk9MCxyPUEsbz1ULGE9bi5kYXRhU291cmNlLmRhdGEoKSxzPW4uX25hbWVEaXJlY3RvcnkoKSxsPW5ldyBuLmRhdGFTb3VyY2UucmVhZGVyLm1vZGVsO2ZvcihlPTAsdD1hLmxlbmd0aDt0PmU7ZSsrKVwiZFwiPT09YVtlXS5nZXQocikmJihpPWUpO2wuc2V0KHIsXCJkXCIpLGwuc2V0KG8scyksbi5saXN0Vmlldy5vbmUoXCJkYXRhQm91bmRcIixmdW5jdGlvbigpe3ZhciBlPW4ubGlzdFZpZXcuaXRlbXMoKS5maWx0ZXIoXCJbXCIrZC5hdHRyKFwidWlkXCIpK1wiPVwiK2wudWlkK1wiXVwiKSx0PWUuZmluZChcImlucHV0XCIpO2UubGVuZ3RoJiZ0aGlzLmVkaXQoZSksdGhpcy5lbGVtZW50LnNjcm9sbFRvcChlLmF0dHIoXCJvZmZzZXRUb3BcIiktdGhpcy5lbGVtZW50WzBdLm9mZnNldEhlaWdodCksc2V0VGltZW91dChmdW5jdGlvbigpe3Quc2VsZWN0KCl9KX0pLm9uZShcInNhdmVcIixmdW5jdGlvbihlKXt2YXIgdD1lLm1vZGVsLmdldChvKTt0P2UubW9kZWwuc2V0KG8sbi5fbmFtZUV4aXN0cyh0LGwudWlkKT9uLl9uYW1lRGlyZWN0b3J5KCk6dCk6ZS5tb2RlbC5zZXQobyxzKX0pLG4uZGF0YVNvdXJjZS5pbnNlcnQoKytpLGwpfSxfZGlyZWN0b3J5S2V5RG93bjpmdW5jdGlvbihlKXsxMz09ZS5rZXlDb2RlJiZlLmN1cnJlbnRUYXJnZXQuYmx1cigpfSxfZGlyZWN0b3J5Qmx1cjpmdW5jdGlvbigpe3RoaXMubGlzdFZpZXcuc2F2ZSgpfSxfbmFtZUV4aXN0czpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj10aGlzLmRhdGFTb3VyY2UuZGF0YSgpLG89QSxhPVQ7Zm9yKG49MCxpPXIubGVuZ3RoO2k+bjtuKyspaWYoXCJkXCI9PT1yW25dLmdldChvKSYmcltuXS5nZXQoYSkudG9Mb3dlckNhc2UoKT09PWUudG9Mb3dlckNhc2UoKSYmcltuXS51aWQhPT10KXJldHVybiEwO3JldHVybiExfSxfbmFtZURpcmVjdG9yeTpmdW5jdGlvbigpe3ZhciB0LG4saSxyPVwiTmV3IGZvbGRlclwiLG89dGhpcy5kYXRhU291cmNlLmRhdGEoKSxhPVtdLHM9QSxsPVQ7Zm9yKG49MCxpPW8ubGVuZ3RoO2k+bjtuKyspXCJkXCI9PT1vW25dLmdldChzKSYmb1tuXS5nZXQobCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHIudG9Mb3dlckNhc2UoKSk+LTEmJmEucHVzaChvW25dLmdldChsKSk7aWYoZS5pbkFycmF5KHIsYSk+LTEpe249MjtkbyB0PXIrXCIgKFwiK24rXCIpXCIsbisrO3doaWxlKGUuaW5BcnJheSh0LGEpPi0xKTtyPXR9cmV0dXJuIHJ9LG9yZGVyQnk6ZnVuY3Rpb24oZSl7dGhpcy5kYXRhU291cmNlLnNvcnQoW3tmaWVsZDpBLGRpcjpcImFzY1wifSx7ZmllbGQ6ZSxkaXI6XCJhc2NcIn1dKX0sc2VhcmNoOmZ1bmN0aW9uKGUpe3RoaXMuZGF0YVNvdXJjZS5maWx0ZXIoe2ZpZWxkOlQsb3BlcmF0b3I6XCJjb250YWluc1wiLHZhbHVlOmV9KX0sX2NvbnRlbnQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QubGlzdD1lKCc8dWwgY2xhc3M9XCJrLXJlc2V0IGstZmxvYXRzIGstdGlsZXNcIiAvPicpLmFwcGVuZFRvKHQuZWxlbWVudCkub24oXCJkYmxjbGlja1wiK3gsXCJsaVwiLHAodC5fZGJsQ2xpY2ssdCkpLHQubGlzdFZpZXc9bmV3IGQudWkuTGlzdFZpZXcodC5saXN0LHtkYXRhU291cmNlOnQuZGF0YVNvdXJjZSx0ZW1wbGF0ZTp0Ll9pdGVtVG1wbCgpLGVkaXRUZW1wbGF0ZTp0Ll9lZGl0VG1wbCgpLHNlbGVjdGFibGU6ITAsYXV0b0JpbmQ6ITEsZGF0YUJpbmRpbmc6ZnVuY3Rpb24oZSl7dC50b29sYmFyLmZpbmQoXCIuay1kZWxldGVcIikucGFyZW50KCkuYWRkQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIpLChcInJlbW92ZVwiPT09ZS5hY3Rpb258fFwic3luY1wiPT09ZS5hY3Rpb24pJiZlLnByZXZlbnREZWZhdWx0KCl9LGRhdGFCb3VuZDpmdW5jdGlvbigpe3QuZGF0YVNvdXJjZS52aWV3KCkubGVuZ3RoP3QuX3RpbGVzPXRoaXMuaXRlbXMoKS5maWx0ZXIoXCJbXCIrZC5hdHRyKFwidHlwZVwiKStcIj1mXVwiKTp0aGlzLndyYXBwZXIuYXBwZW5kKE0oe3RleHQ6dC5vcHRpb25zLm1lc3NhZ2VzLmVtcHR5Rm9sZGVyfSkpfSxjaGFuZ2U6cCh0Ll9saXN0Vmlld0NoYW5nZSx0KX0pfSxfZGJsQ2xpY2s6ZnVuY3Rpb24odCl7dmFyIG4scj10aGlzLG89ZSh0LmN1cnJlbnRUYXJnZXQpO28uaGFzQ2xhc3MoXCJrLWVkaXQtaXRlbVwiKSYmci5fZGlyZWN0b3J5Qmx1cigpLG8uZmlsdGVyKFwiW1wiK2QuYXR0cihcInR5cGVcIikrXCI9ZF1cIikubGVuZ3RoPyhuPXIuZGF0YVNvdXJjZS5nZXRCeVVpZChvLmF0dHIoZC5hdHRyKFwidWlkXCIpKSksbiYmKHIucGF0aChpKHIucGF0aCgpLG4uZ2V0KFQpKSksci5icmVhZGNydW1icy52YWx1ZShyLnBhdGgoKSkpKTpvLmZpbHRlcihcIltcIitkLmF0dHIoXCJ0eXBlXCIpK1wiPWZdXCIpLmxlbmd0aCYmci50cmlnZ2VyKHcpfSxfbGlzdFZpZXdDaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9zZWxlY3RlZEl0ZW0oKTtlJiYodGhpcy50b29sYmFyLmZpbmQoXCIuay1kZWxldGVcIikucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIpLFwiZlwiPT09ZS5nZXQoQSkmJnRoaXMudHJpZ2dlcih5KSl9LF9kYXRhU291cmNlOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLG49dC5vcHRpb25zLGk9bi50cmFuc3BvcnQscj1mKHt9LEUpLG89e2ZpZWxkOlQsZGlyOlwiYXNjXCJ9LGE9e3R5cGU6aS50eXBlfHxcImZpbGVicm93c2VyXCIsc29ydDpbcixvXX07aChpKSYmKGkucGF0aD1wKHQucGF0aCx0KSxhLnRyYW5zcG9ydD1pKSxoKG4uc2NoZW1hKT9hLnNjaGVtYT1uLnNjaGVtYTppLnR5cGUmJmgoZC5kYXRhLnNjaGVtYXNbaS50eXBlXSkmJihlPWQuZGF0YS5zY2hlbWFzW2kudHlwZV0pLHQuZGF0YVNvdXJjZSYmdC5fZXJyb3JIYW5kbGVyP3QuZGF0YVNvdXJjZS51bmJpbmQoYix0Ll9lcnJvckhhbmRsZXIpOnQuX2Vycm9ySGFuZGxlcj1wKHQuX2Vycm9yLHQpLHQuZGF0YVNvdXJjZT1kLmRhdGEuRGF0YVNvdXJjZS5jcmVhdGUoYSkuYmluZChiLHQuX2Vycm9ySGFuZGxlcil9LF9uYXZpZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPWUoJzxkaXYgY2xhc3M9XCJrLWZsb2F0d3JhcFwiPjxpbnB1dC8+PGlucHV0Lz48L2Rpdj4nKS5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpO3QuYnJlYWRjcnVtYnM9bi5maW5kKFwiaW5wdXQ6Zmlyc3RcIikua2VuZG9CcmVhZGNydW1icyh7dmFsdWU6dC5vcHRpb25zLnBhdGgsY2hhbmdlOmZ1bmN0aW9uKCl7dC5wYXRoKHRoaXMudmFsdWUoKSl9fSkuZGF0YShcImtlbmRvQnJlYWRjcnVtYnNcIiksdC5zZWFyY2hCb3g9bi5wYXJlbnQoKS5maW5kKFwiaW5wdXQ6bGFzdFwiKS5rZW5kb1NlYXJjaEJveCh7bGFiZWw6dC5vcHRpb25zLm1lc3NhZ2VzLnNlYXJjaCxjaGFuZ2U6ZnVuY3Rpb24oKXt0LnNlYXJjaCh0aGlzLnZhbHVlKCkpfX0pLmRhdGEoXCJrZW5kb1NlYXJjaEJveFwiKX0sX2Vycm9yOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcztuLnRyaWdnZXIoYixlKXx8KHQ9ZS54aHIuc3RhdHVzLFwiZXJyb3JcIj09ZS5zdGF0dXM/XCI0MDRcIj09dD9uLl9zaG93TWVzc2FnZShuLm9wdGlvbnMubWVzc2FnZXMuZGlyZWN0b3J5Tm90Rm91bmQpOlwiMFwiIT10JiZuLl9zaG93TWVzc2FnZShcIkVycm9yISBUaGUgcmVxdWVzdGVkIFVSTCByZXR1cm5lZCBcIit0K1wiIC0gXCIrZS54aHIuc3RhdHVzVGV4dCk6XCJ0aW1lb3V0XCI9PXQmJm4uX3Nob3dNZXNzYWdlKFwiRXJyb3IhIFNlcnZlciB0aW1lb3V0LlwiKSl9LF9zaG93TWVzc2FnZTpmdW5jdGlvbihlLHQpe3JldHVybiB3aW5kb3dbdHx8XCJhbGVydFwiXShlKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbmF2aWdhdGlvbigpLGUuX3Rvb2xiYXIoKSxlLl9jb250ZW50KCl9LF9lZGl0VG1wbDpmdW5jdGlvbigpe3ZhciBlPSc8bGkgY2xhc3M9XCJrLXRpbGUgay1zdGF0ZS1zZWxlY3RlZFwiICcrZC5hdHRyKFwidWlkXCIpKyc9XCIjPXVpZCNcIiAnO3JldHVybiBlKz1kLmF0dHIoXCJ0eXBlXCIpKyc9XCIkeycrQSsnfVwiPicsZSs9XCIjaWYoXCIrQSsnID09IFwiZFwiKSB7ICMnLGUrPSc8ZGl2IGNsYXNzPVwiay10aHVtYlwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstZm9sZGVyXCI+PC9zcGFuPjwvZGl2PicsZSs9XCIjfWVsc2V7I1wiLGUrPSc8ZGl2IGNsYXNzPVwiay10aHVtYlwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstbG9hZGluZ1wiPjwvc3Bhbj48L2Rpdj4nLGUrPVwiI30jXCIsZSs9XCIjaWYoXCIrQSsnID09IFwiZFwiKSB7ICMnLGUrPSc8aW5wdXQgY2xhc3M9XCJrLWlucHV0XCIgJytkLmF0dHIoXCJiaW5kXCIpKyc9XCJ2YWx1ZTonK1QrJ1wiLz4nLGUrPVwiI30jXCIsZSs9XCI8L2xpPlwiLHAoZC50ZW1wbGF0ZShlKSx7c2l6ZUZvcm1hdHRlcjpyfSl9LF9pdGVtVG1wbDpmdW5jdGlvbigpe3ZhciBlPSc8bGkgY2xhc3M9XCJrLXRpbGVcIiAnK2QuYXR0cihcInVpZFwiKSsnPVwiIz11aWQjXCIgJztyZXR1cm4gZSs9ZC5hdHRyKFwidHlwZVwiKSsnPVwiJHsnK0ErJ31cIj4nLGUrPVwiI2lmKFwiK0ErJyA9PSBcImRcIikgeyAjJyxlKz0nPGRpdiBjbGFzcz1cImstdGh1bWJcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWZvbGRlclwiPjwvc3Bhbj48L2Rpdj4nLGUrPVwiI31lbHNleyNcIixlKz0nPGRpdiBjbGFzcz1cImstdGh1bWJcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWZpbGVcIj48L3NwYW4+PC9kaXY+JyxlKz1cIiN9I1wiLGUrPVwiPHN0cm9uZz4ke1wiK1QrXCJ9PC9zdHJvbmc+XCIsZSs9XCIjaWYoXCIrQSsnID09IFwiZlwiKSB7ICMgPHNwYW4gY2xhc3M9XCJrLWZpbGVzaXplXCI+JHt0aGlzLnNpemVGb3JtYXR0ZXIoJytEK1wiKX08L3NwYW4+ICN9I1wiLGUrPVwiPC9saT5cIixwKGQudGVtcGxhdGUoZSkse3NpemVGb3JtYXR0ZXI6cn0pfSxwYXRoOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLl9wYXRofHxcIlwiO3JldHVybiBlIT09dD8obi5fcGF0aD1lLnJlcGxhY2UoXyxcIlwiKStcIi9cIixuLmRhdGFTb3VyY2UucmVhZCh7cGF0aDpuLl9wYXRofSksdCk6KGkmJihpPWkucmVwbGFjZShfLFwiXCIpKSxcIi9cIj09PWl8fFwiXCI9PT1pP1wiXCI6aStcIi9cIil9fSksbD11LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7dD10fHx7fSx1LmZuLmluaXQuY2FsbChuLGUsdCksZyYmbi5lbGVtZW50LmF0dHIoXCJwbGFjZWhvbGRlclwiLG4ub3B0aW9ucy5sYWJlbCksbi5fd3JhcHBlcigpLG4uZWxlbWVudC5vbihcImtleWRvd25cIitTLHAobi5fa2V5ZG93bixuKSkub24oXCJjaGFuZ2VcIitTLHAobi5fdXBkYXRlVmFsdWUsbikpLG4ud3JhcHBlci5vbihrK1MsXCJhXCIscChuLl9jbGljayxuKSksZ3x8bi5lbGVtZW50Lm9uKFwiZm9jdXNcIitTLHAobi5fZm9jdXMsbikpLm9uKFwiYmx1clwiK1MscChuLl9ibHVyLG4pKX0sb3B0aW9uczp7bmFtZTpcIlNlYXJjaEJveFwiLGxhYmVsOlwiU2VhcmNoXCIsdmFsdWU6XCJcIn0sZXZlbnRzOlt5XSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLndyYXBwZXIuYWRkKGUuZWxlbWVudCkuYWRkKGUubGFiZWwpLm9mZihTKSx1LmZuLmRlc3Ryb3kuY2FsbChlKX0sX2tleWRvd246ZnVuY3Rpb24oZSl7MTM9PT1lLmtleUNvZGUmJnRoaXMuX3VwZGF0ZVZhbHVlKCl9LF9jbGljazpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksdGhpcy5fdXBkYXRlVmFsdWUoKX0sX3VwZGF0ZVZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZWxlbWVudC52YWwoKTt0IT09ZS52YWx1ZSgpJiYoZS52YWx1ZSh0KSxlLnRyaWdnZXIoeSkpfSxfYmx1cjpmdW5jdGlvbigpe3RoaXMuX3VwZGF0ZVZhbHVlKCksdGhpcy5fdG9nZ2xlTGFiZWwoKX0sX3RvZ2dsZUxhYmVsOmZ1bmN0aW9uKCl7Z3x8dGhpcy5sYWJlbC50b2dnbGUoIXRoaXMuZWxlbWVudC52YWwoKSl9LF9mb2N1czpmdW5jdGlvbigpe3RoaXMubGFiZWwuaGlkZSgpfSxfd3JhcHBlcjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZWxlbWVudCxuPXQucGFyZW50cyhcIi5rLXNlYXJjaC13cmFwXCIpO3RbMF0uc3R5bGUud2lkdGg9XCJcIix0LmFkZENsYXNzKFwiay1pbnB1dFwiKSxuLmxlbmd0aHx8KG49dC53cmFwKGUoJzxkaXYgY2xhc3M9XCJrLXdpZGdldCBrLXNlYXJjaC13cmFwIGstdGV4dGJveFwiLz4nKSkucGFyZW50KCksZ3x8ZSgnPGxhYmVsIHN0eWxlPVwiZGlzcGxheTpibG9ja1wiPicrdGhpcy5vcHRpb25zLmxhYmVsK1wiPC9sYWJlbD5cIikuaW5zZXJ0QmVmb3JlKHQpLGUoJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJrLWljb24gay1pLXNlYXJjaCBrLXNlYXJjaFwiLz4nKS5hcHBlbmRUbyhuKSksdGhpcy53cmFwcGVyPW4sdGhpcy5sYWJlbD1uLmZpbmQoXCI+bGFiZWxcIil9LHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGUhPT10PyhuLm9wdGlvbnMudmFsdWU9ZSxuLmVsZW1lbnQudmFsKGUpLG4uX3RvZ2dsZUxhYmVsKCksdCk6bi5vcHRpb25zLnZhbHVlfX0pLGM9dS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3Q9dHx8e30sdS5mbi5pbml0LmNhbGwobixlLHQpLG4uX3dyYXBwZXIoKSxuLndyYXBwZXIub24oXCJmb2N1c1wiK0MsXCJpbnB1dFwiLHAobi5fZm9jdXMsbikpLm9uKFwiYmx1clwiK0MsXCJpbnB1dFwiLHAobi5fYmx1cixuKSkub24oXCJrZXlkb3duXCIrQyxcImlucHV0XCIscChuLl9rZXlkb3duLG4pKS5vbihrK0MsXCJhLmstaS1hcnJvdy1uOmZpcnN0XCIscChuLl9yb290Q2xpY2ssbikpLm9uKGsrQyxcImE6bm90KC5rLWktYXJyb3ctbilcIixwKG4uX2NsaWNrLG4pKSxuLnZhbHVlKG4ub3B0aW9ucy52YWx1ZSl9LG9wdGlvbnM6e25hbWU6XCJCcmVhZGNydW1ic1wiLGdhcDo1MH0sZXZlbnRzOlt5XSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt1LmZuLmRlc3Ryb3kuY2FsbChlKSxlLndyYXBwZXIuYWRkKGUud3JhcHBlci5maW5kKFwiaW5wdXRcIikpLmFkZChlLndyYXBwZXIuZmluZChcImFcIikpLm9mZihDKX0sX3VwZGF0ZTpmdW5jdGlvbihlKXtlPVwiL1wiPT09KGV8fFwiXCIpLmNoYXJBdCgwKT9lOlwiL1wiKyhlfHxcIlwiKSxlIT09dGhpcy52YWx1ZSgpJiYodGhpcy52YWx1ZShlKSx0aGlzLnRyaWdnZXIoeSkpfSxfY2xpY2s6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX3VwZGF0ZSh0aGlzLl9wYXRoKGUodC50YXJnZXQpLnByZXZBbGwoXCJhOm5vdCguay1pLWFycm93LW4pXCIpLmFkZEJhY2soKSkpfSxfcm9vdENsaWNrOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0aGlzLl91cGRhdGUoXCJcIil9LF9mb2N1czpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmVsZW1lbnQ7ZS5vdmVybGF5LmhpZGUoKSxlLmVsZW1lbnQudmFsKGUudmFsdWUoKSksc2V0VGltZW91dChmdW5jdGlvbigpe3Quc2VsZWN0KCl9KX0sX2JsdXI6ZnVuY3Rpb24oKXtpZighdGhpcy5vdmVybGF5LmlzKFwiOnZpc2libGVcIikpe3ZhciBlPXRoaXMsdD1lLmVsZW1lbnQsbj10LnZhbCgpLnJlcGxhY2UoL1xcL3syLH0vZyxcIi9cIik7ZS5vdmVybGF5LnNob3coKSx0LnZhbChcIlwiKSxlLl91cGRhdGUobil9fSxfa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgdD10aGlzOzEzPT09ZS5rZXlDb2RlJiYodC5fYmx1cigpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0Lm92ZXJsYXkuZmluZChcImE6Zmlyc3RcIikuZm9jdXMoKX0pKX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMuZWxlbWVudCxpPW4ucGFyZW50cyhcIi5rLWJyZWFkY3J1bWJzXCIpO25bMF0uc3R5bGUud2lkdGg9XCJcIixuLmFkZENsYXNzKFwiay1pbnB1dFwiKSxpLmxlbmd0aHx8KGk9bi53cmFwKGUoJzxkaXYgY2xhc3M9XCJrLXdpZGdldCBrLWJyZWFkY3J1bWJzIGstdGV4dGJveFwiLz4nKSkucGFyZW50KCkpLHQ9aS5maW5kKFwiLmstYnJlYWRjcnVtYnMtd3JhcFwiKSx0Lmxlbmd0aHx8KHQ9ZSgnPGRpdiBjbGFzcz1cImstYnJlYWRjcnVtYnMtd3JhcFwiLz4nKS5hcHBlbmRUbyhpKSksdGhpcy53cmFwcGVyPWksdGhpcy5vdmVybGF5PXR9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgbixpLHIsbyxhPVwiXCIscz10aGlzLnZhbHVlKCk7Zm9yKHMhPT10JiZzLm1hdGNoKC9eXFwvLyl8fChzPVwiL1wiKyhzfHxcIlwiKSksbj1zLnNwbGl0KFwiL1wiKSxyPTAsbz1uLmxlbmd0aDtvPnI7cisrKWk9bltyXSxpJiYoYXx8KGErPSc8YSBocmVmPVwiI1wiIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy1uXCI+cm9vdDwvYT4nKSxhKz0nPGEgY2xhc3M9XCJrLWxpbmtcIiBocmVmPVwiI1wiPicrbltyXStcIjwvYT5cIixhKz0nPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LWVcIj4mZ3Q7PC9zcGFuPicpO3RoaXMub3ZlcmxheS5lbXB0eSgpLmFwcGVuZChlKGEpKSx0aGlzLl9hZGp1c3RTZWN0aW9uV2lkdGgoKX0sX2FkanVzdFNlY3Rpb25XaWR0aDpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4ud3JhcHBlcixyPWkud2lkdGgoKS1uLm9wdGlvbnMuZ2FwLG89bi5vdmVybGF5LmZpbmQoXCJhXCIpO28uZWFjaChmdW5jdGlvbihuKXt0PWUodGhpcyksdC5wYXJlbnQoKS53aWR0aCgpPnImJihuPT1vLmxlbmd0aC0xP3Qud2lkdGgocik6dC5wcmV2KCkuYWRkQmFjaygpLmhpZGUoKSl9KX0sdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUhPT10Pyh0aGlzLl92YWx1ZT1lLnJlcGxhY2UoL1xcL3syLH0vZyxcIi9cIiksdGhpcy5yZWZyZXNoKCksdCk6dGhpcy5fdmFsdWVcbn0sX3BhdGg6ZnVuY3Rpb24odCl7cmV0dXJuXCIvXCIrZS5tYXAodCxmdW5jdGlvbih0KXtyZXR1cm4gZSh0KS50ZXh0KCl9KS5qb2luKFwiL1wiKX19KSxkLnVpLnBsdWdpbihzKSxkLnVpLnBsdWdpbihjKSxkLnVpLnBsdWdpbihsKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsbil7cmV0dXJuIGUhPT10JiZlLm1hdGNoKC9cXC8kLyl8fChlPShlfHxcIlwiKStcIi9cIiksZStufWZ1bmN0aW9uIGkoZSl7aWYoIWUpcmV0dXJuXCJcIjt2YXIgdD1cIiBieXRlc1wiO3JldHVybiBlPj0xMDczNzQxODI0Pyh0PVwiIEdCXCIsZS89MTA3Mzc0MTgyNCk6ZT49MTA0ODU3Nj8odD1cIiBNQlwiLGUvPTEwNDg1NzYpOmU+PTEwMjQmJih0PVwiIEtCXCIsZS89MTAyNCksTWF0aC5yb3VuZCgxMDAqZSkvMTAwK3R9dmFyIHIsbyxhPXdpbmRvdy5rZW5kbyxzPWEudWkuRmlsZUJyb3dzZXIsbD1lLmlzUGxhaW5PYmplY3QsYz1lLnByb3h5LGQ9ZS5leHRlbmQsdT1hLnN1cHBvcnQuYnJvd3NlcixoPWEuaXNGdW5jdGlvbixwPS8oXlxcL3xcXC8kKS9nLGY9XCJlcnJvclwiLGc9XCIua2VuZG9JbWFnZUJyb3dzZXJcIixtPVwibmFtZVwiLHY9XCJzaXplXCIsXz1cInR5cGVcIix5PXtmaWVsZDpfLGRpcjpcImFzY1wifSx3PWEudGVtcGxhdGUoJzxsaSBjbGFzcz1cImstdGlsZS1lbXB0eVwiPjxzdHJvbmc+JHt0ZXh0fTwvc3Ryb25nPjwvbGk+Jyk7ZCghMCxhLmRhdGEse3NjaGVtYXM6e2ltYWdlYnJvd3Nlcjp7ZGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gZS5pdGVtc3x8ZXx8W119LG1vZGVsOntpZDpcIm5hbWVcIixmaWVsZHM6e25hbWU6XCJuYW1lXCIsc2l6ZTpcInNpemVcIix0eXBlOlwidHlwZVwifX19fX0pLGQoITAsYS5kYXRhLHt0cmFuc3BvcnRzOntpbWFnZWJyb3dzZXI6YS5kYXRhLlJlbW90ZVRyYW5zcG9ydC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCl7YS5kYXRhLlJlbW90ZVRyYW5zcG9ydC5mbi5pbml0LmNhbGwodGhpcyxlLmV4dGVuZCghMCx7fSx0aGlzLm9wdGlvbnMsdCkpfSxfY2FsbDpmdW5jdGlvbih0LG4pe24uZGF0YT1lLmV4dGVuZCh7fSxuLmRhdGEse3BhdGg6dGhpcy5vcHRpb25zLnBhdGgoKX0pLGgodGhpcy5vcHRpb25zW3RdKT90aGlzLm9wdGlvbnNbdF0uY2FsbCh0aGlzLG4pOmEuZGF0YS5SZW1vdGVUcmFuc3BvcnQuZm5bdF0uY2FsbCh0aGlzLG4pfSxyZWFkOmZ1bmN0aW9uKGUpe3RoaXMuX2NhbGwoXCJyZWFkXCIsZSl9LGNyZWF0ZTpmdW5jdGlvbihlKXt0aGlzLl9jYWxsKFwiY3JlYXRlXCIsZSl9LGRlc3Ryb3k6ZnVuY3Rpb24oZSl7dGhpcy5fY2FsbChcImRlc3Ryb3lcIixlKX0sdXBkYXRlOmZ1bmN0aW9uKCl7fSxvcHRpb25zOntyZWFkOnt0eXBlOlwiUE9TVFwifSx1cGRhdGU6e3R5cGU6XCJQT1NUXCJ9LGNyZWF0ZTp7dHlwZTpcIlBPU1RcIn0sZGVzdHJveTp7dHlwZTpcIlBPU1RcIn19fSl9fSkscj11Lm1zaWUmJjg+dS52ZXJzaW9uP2Z1bmN0aW9uKGUpe3JldHVybiBlLm9mZnNldFRvcH06ZnVuY3Rpb24odCl7cmV0dXJuIHQub2Zmc2V0VG9wLWUodCkuaGVpZ2h0KCl9LG89cy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3Q9dHx8e30scy5mbi5pbml0LmNhbGwobixlLHQpLG4uZWxlbWVudC5hZGRDbGFzcyhcImstaW1hZ2Vicm93c2VyXCIpfSxvcHRpb25zOntuYW1lOlwiSW1hZ2VCcm93c2VyXCIsZmlsZVR5cGVzOlwiKi5wbmcsKi5naWYsKi5qcGcsKi5qcGVnXCJ9LHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGUsaT10aGlzLHI9aS5fc2VsZWN0ZWRJdGVtKCksbz1pLm9wdGlvbnMudHJhbnNwb3J0LmltYWdlVXJsO3JldHVybiByJiZcImZcIj09PXIuZ2V0KF8pPyhlPW4oaS5wYXRoKCksci5nZXQobSkpLnJlcGxhY2UocCxcIlwiKSxvJiYoZT1oKG8pP28oZSk6YS5mb3JtYXQobyxlbmNvZGVVUklDb21wb25lbnQoZSkpKSxlKTp0fSxfZmlsZVVwbG9hZDpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMsaT1uLm9wdGlvbnMscj1pLmZpbGVUeXBlcyxvPVJlZ0V4cCgoXCIoXCIrci5zcGxpdChcIixcIikuam9pbihcIil8KFwiKStcIilcIikucmVwbGFjZSgvXFwqXFwuL2csXCIuKi5cIiksXCJpXCIpLHM9ZS5maWxlc1swXS5uYW1lLGw9bSxjPXY7by50ZXN0KHMpPyhlLmRhdGE9e3BhdGg6bi5wYXRoKCl9LHQ9bi5fY3JlYXRlRmlsZShzKSx0Pyh0Ll91cGxvYWRpbmc9ITAsbi51cGxvYWQub25lKFwic3VjY2Vzc1wiLGZ1bmN0aW9uKGUpe2RlbGV0ZSB0Ll91cGxvYWRpbmcsdC5zZXQobCxlLnJlc3BvbnNlW24uX2dldEZpZWxkTmFtZShsKV0pLHQuc2V0KGMsZS5yZXNwb25zZVtuLl9nZXRGaWVsZE5hbWUoYyldKSxuLl90aWxlcz1uLmxpc3RWaWV3Lml0ZW1zKCkuZmlsdGVyKFwiW1wiK2EuYXR0cihcInR5cGVcIikrXCI9Zl1cIiksbi5fc2Nyb2xsKCl9KSk6ZS5wcmV2ZW50RGVmYXVsdCgpKTooZS5wcmV2ZW50RGVmYXVsdCgpLG4uX3Nob3dNZXNzYWdlKGEuZm9ybWF0KGkubWVzc2FnZXMuaW52YWxpZEZpbGVUeXBlLHMscikpKX0sX2NvbnRlbnQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QubGlzdD1lKCc8dWwgY2xhc3M9XCJrLXJlc2V0IGstZmxvYXRzIGstdGlsZXNcIiAvPicpLmFwcGVuZFRvKHQuZWxlbWVudCkub24oXCJzY3JvbGxcIitnLGModC5fc2Nyb2xsLHQpKS5vbihcImRibGNsaWNrXCIrZyxcImxpXCIsYyh0Ll9kYmxDbGljayx0KSksdC5saXN0Vmlldz1uZXcgYS51aS5MaXN0Vmlldyh0Lmxpc3Qse2RhdGFTb3VyY2U6dC5kYXRhU291cmNlLHRlbXBsYXRlOnQuX2l0ZW1UbXBsKCksZWRpdFRlbXBsYXRlOnQuX2VkaXRUbXBsKCksc2VsZWN0YWJsZTohMCxhdXRvQmluZDohMSxkYXRhQmluZGluZzpmdW5jdGlvbihlKXt0LnRvb2xiYXIuZmluZChcIi5rLWRlbGV0ZVwiKS5wYXJlbnQoKS5hZGRDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIiksKFwicmVtb3ZlXCI9PT1lLmFjdGlvbnx8XCJzeW5jXCI9PT1lLmFjdGlvbikmJmUucHJldmVudERlZmF1bHQoKX0sZGF0YUJvdW5kOmZ1bmN0aW9uKCl7dC5kYXRhU291cmNlLnZpZXcoKS5sZW5ndGg/KHQuX3RpbGVzPXRoaXMuaXRlbXMoKS5maWx0ZXIoXCJbXCIrYS5hdHRyKFwidHlwZVwiKStcIj1mXVwiKSx0Ll9zY3JvbGwoKSk6dGhpcy53cmFwcGVyLmFwcGVuZCh3KHt0ZXh0OnQub3B0aW9ucy5tZXNzYWdlcy5lbXB0eUZvbGRlcn0pKX0sY2hhbmdlOmModC5fbGlzdFZpZXdDaGFuZ2UsdCl9KX0sX2RhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10Lm9wdGlvbnMsaT1uLnRyYW5zcG9ydCxyPWQoe30seSksbz17ZmllbGQ6bSxkaXI6XCJhc2NcIn0scz17dHlwZTppLnR5cGV8fFwiaW1hZ2Vicm93c2VyXCIsc29ydDpbcixvXX07bChpKSYmKGkucGF0aD1jKHQucGF0aCx0KSxzLnRyYW5zcG9ydD1pKSxsKG4uc2NoZW1hKT9zLnNjaGVtYT1uLnNjaGVtYTppLnR5cGUmJmwoYS5kYXRhLnNjaGVtYXNbaS50eXBlXSkmJihlPWEuZGF0YS5zY2hlbWFzW2kudHlwZV0pLHQuZGF0YVNvdXJjZSYmdC5fZXJyb3JIYW5kbGVyP3QuZGF0YVNvdXJjZS51bmJpbmQoZix0Ll9lcnJvckhhbmRsZXIpOnQuX2Vycm9ySGFuZGxlcj1jKHQuX2Vycm9yLHQpLHQuZGF0YVNvdXJjZT1hLmRhdGEuRGF0YVNvdXJjZS5jcmVhdGUocykuYmluZChmLHQuX2Vycm9ySGFuZGxlcil9LF9sb2FkSW1hZ2U6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPWUodCkscj1uLmRhdGFTb3VyY2UuZ2V0QnlVaWQoaS5hdHRyKGEuYXR0cihcInVpZFwiKSkpLG89ci5nZXQobSkscz1uLm9wdGlvbnMudHJhbnNwb3J0LnRodW1ibmFpbFVybCxsPWUoXCI8aW1nIC8+XCIse2FsdDpvfSksYz1cIj9cIjtyLl91cGxvYWRpbmd8fChsLmhpZGUoKS5vbihcImxvYWRcIitnLGZ1bmN0aW9uKCl7ZSh0aGlzKS5wcmV2KCkucmVtb3ZlKCkuZW5kKCkuYWRkQ2xhc3MoXCJrLWltYWdlXCIpLmZhZGVJbigpfSksaS5maW5kKFwiLmstbG9hZGluZ1wiKS5hZnRlcihsKSxoKHMpP3M9cyhuLnBhdGgoKSxlbmNvZGVVUklDb21wb25lbnQobykpOihzLmluZGV4T2YoXCI/XCIpPj0wJiYoYz1cIiZcIikscz1zK2MrXCJwYXRoPVwiK24ucGF0aCgpK2VuY29kZVVSSUNvbXBvbmVudChvKSksbC5hdHRyKFwic3JjXCIscyksdC5sb2FkZWQ9ITApfSxfc2Nyb2xsOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLm9wdGlvbnMudHJhbnNwb3J0JiZlLm9wdGlvbnMudHJhbnNwb3J0LnRodW1ibmFpbFVybCYmKGNsZWFyVGltZW91dChlLl90aW1lb3V0KSxlLl90aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgbj1lLmxpc3Qub3V0ZXJIZWlnaHQoKSxpPWUubGlzdC5zY3JvbGxUb3AoKSxvPWkrbjtlLl90aWxlcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49cih0aGlzKSxhPW4rdGhpcy5vZmZzZXRIZWlnaHQ7cmV0dXJuKG4+PWkmJm8+bnx8YT49aSYmbz5hKSYmZS5fbG9hZEltYWdlKHRoaXMpLG4+bz8hMTp0fSksZS5fdGlsZXM9ZS5fdGlsZXMuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMubG9hZGVkfSl9LDI1MCkpfSxfaXRlbVRtcGw6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9JzxsaSBjbGFzcz1cImstdGlsZVwiICcrYS5hdHRyKFwidWlkXCIpKyc9XCIjPXVpZCNcIiAnO3JldHVybiB0Kz1hLmF0dHIoXCJ0eXBlXCIpKyc9XCIkeycrXysnfVwiPicsdCs9XCIjaWYoXCIrXysnID09IFwiZFwiKSB7ICMnLHQrPSc8ZGl2IGNsYXNzPVwiay10aHVtYlwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstZm9sZGVyXCI+PC9zcGFuPjwvZGl2PicsdCs9XCIjfWVsc2V7I1wiLHQrPWUub3B0aW9ucy50cmFuc3BvcnQmJmUub3B0aW9ucy50cmFuc3BvcnQudGh1bWJuYWlsVXJsPyc8ZGl2IGNsYXNzPVwiay10aHVtYlwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstbG9hZGluZ1wiPjwvc3Bhbj48L2Rpdj4nOic8ZGl2IGNsYXNzPVwiay10aHVtYlwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstZmlsZVwiPjwvc3Bhbj48L2Rpdj4nLHQrPVwiI30jXCIsdCs9XCI8c3Ryb25nPiR7XCIrbStcIn08L3N0cm9uZz5cIix0Kz1cIiNpZihcIitfKycgPT0gXCJmXCIpIHsgIyA8c3BhbiBjbGFzcz1cImstZmlsZXNpemVcIj4ke3RoaXMuc2l6ZUZvcm1hdHRlcignK3YrXCIpfTwvc3Bhbj4gI30jXCIsdCs9XCI8L2xpPlwiLGMoYS50ZW1wbGF0ZSh0KSx7c2l6ZUZvcm1hdHRlcjppfSl9fSksYS51aS5wbHVnaW4obyl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYT13aW5kb3cua2VuZG8scz1hLkNsYXNzLGw9YS51aS5XaWRnZXQsYz1hLnN1cHBvcnQubW9iaWxlT1MsZD1hLnN1cHBvcnQuYnJvd3Nlcix1PWUuZXh0ZW5kLGg9ZS5wcm94eSxwPWEuZGVlcEV4dGVuZCxmPVwiLmtlbmRvRWRpdG9yXCIsZz1hLmtleXMsbT1zLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnM9ZX0sZ2V0SHRtbDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucztyZXR1cm4gYS50ZW1wbGF0ZShlLnRlbXBsYXRlLHt1c2VXaXRoQmxvY2s6ITF9KShlKX19KSx2PXtlZGl0b3JXcmFwcGVyVGVtcGxhdGU6Jzx0YWJsZSBjZWxsc3BhY2luZz1cIjRcIiBjZWxscGFkZGluZz1cIjBcIiBjbGFzcz1cImstd2lkZ2V0IGstZWRpdG9yIGstaGVhZGVyXCIgcm9sZT1cInByZXNlbnRhdGlvblwiPjx0Ym9keT48dHIgcm9sZT1cInByZXNlbnRhdGlvblwiPjx0ZCBjbGFzcz1cImstZWRpdG9yLXRvb2xiYXItd3JhcFwiIHJvbGU9XCJwcmVzZW50YXRpb25cIj48dWwgY2xhc3M9XCJrLWVkaXRvci10b29sYmFyXCIgcm9sZT1cInRvb2xiYXJcIiAvPjwvdGQ+PC90cj48dHI+PHRkIGNsYXNzPVwiay1lZGl0YWJsZS1hcmVhXCIgLz48L3RyPjwvdGJvZHk+PC90YWJsZT4nLGJ1dHRvblRlbXBsYXRlOic8YSBocmVmPVwiXCIgcm9sZT1cImJ1dHRvblwiIGNsYXNzPVwiay10b29sXCIjPSBkYXRhLnBvcHVwID8gXCIgZGF0YS1wb3B1cFwiIDogXCJcIiAjIHVuc2VsZWN0YWJsZT1cIm9uXCIgdGl0bGU9XCIjPSBkYXRhLnRpdGxlICNcIj48c3BhbiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay10b29sLWljb24gIz0gZGF0YS5jc3NDbGFzcyAjXCI+Iz0gZGF0YS50aXRsZSAjPC9zcGFuPjwvYT4nLGNvbG9yUGlja2VyVGVtcGxhdGU6JzxkaXYgY2xhc3M9XCJrLWNvbG9ycGlja2VyICM9IGRhdGEuY3NzQ2xhc3MgI1wiIC8+Jyxjb21ib0JveFRlbXBsYXRlOic8c2VsZWN0IHRpdGxlPVwiIz0gZGF0YS50aXRsZSAjXCIgY2xhc3M9XCIjPSBkYXRhLmNzc0NsYXNzICNcIiAvPicsZHJvcERvd25MaXN0VGVtcGxhdGU6JzxzcGFuIGNsYXNzPVwiay1lZGl0b3ItZHJvcGRvd25cIj48c2VsZWN0IHRpdGxlPVwiIz0gZGF0YS50aXRsZSAjXCIgY2xhc3M9XCIjPSBkYXRhLmNzc0NsYXNzICNcIiAvPjwvc3Bhbj4nLHNlcGFyYXRvclRlbXBsYXRlOic8c3BhbiBjbGFzcz1cImstc2VwYXJhdG9yXCIgLz4nLGZvcm1hdEJ5TmFtZTpmdW5jdGlvbih0LG4pe2Zvcih2YXIgaT0wO24ubGVuZ3RoPmk7aSsrKWlmKGUuaW5BcnJheSh0LG5baV0udGFncyk+PTApcmV0dXJuIG5baV19LHJlZ2lzdGVyVG9vbDpmdW5jdGlvbihlLHQpe3ZhciBuPXQub3B0aW9ucztuJiZuLnRlbXBsYXRlJiYobi50ZW1wbGF0ZS5vcHRpb25zLmNzc0NsYXNzPVwiay1cIitlKSx0Lm5hbWV8fCh0Lm9wdGlvbnMubmFtZT1lLHQubmFtZT1lLnRvTG93ZXJDYXNlKCkpLGIuZGVmYXVsdFRvb2xzW2VdPXR9LHJlZ2lzdGVyRm9ybWF0OmZ1bmN0aW9uKGUsdCl7Yi5mbi5vcHRpb25zLmZvcm1hdHNbZV09dH19LF89e2JvbGQ6XCJCb2xkXCIsaXRhbGljOlwiSXRhbGljXCIsdW5kZXJsaW5lOlwiVW5kZXJsaW5lXCIsc3RyaWtldGhyb3VnaDpcIlN0cmlrZXRocm91Z2hcIixzdXBlcnNjcmlwdDpcIlN1cGVyc2NyaXB0XCIsc3Vic2NyaXB0OlwiU3Vic2NyaXB0XCIsanVzdGlmeUNlbnRlcjpcIkNlbnRlciB0ZXh0XCIsanVzdGlmeUxlZnQ6XCJBbGlnbiB0ZXh0IGxlZnRcIixqdXN0aWZ5UmlnaHQ6XCJBbGlnbiB0ZXh0IHJpZ2h0XCIsanVzdGlmeUZ1bGw6XCJKdXN0aWZ5XCIsaW5zZXJ0VW5vcmRlcmVkTGlzdDpcIkluc2VydCB1bm9yZGVyZWQgbGlzdFwiLGluc2VydE9yZGVyZWRMaXN0OlwiSW5zZXJ0IG9yZGVyZWQgbGlzdFwiLGluZGVudDpcIkluZGVudFwiLG91dGRlbnQ6XCJPdXRkZW50XCIsY3JlYXRlTGluazpcIkluc2VydCBoeXBlcmxpbmtcIix1bmxpbms6XCJSZW1vdmUgaHlwZXJsaW5rXCIsaW5zZXJ0SW1hZ2U6XCJJbnNlcnQgaW1hZ2VcIixpbnNlcnRGaWxlOlwiSW5zZXJ0IGZpbGVcIixpbnNlcnRIdG1sOlwiSW5zZXJ0IEhUTUxcIix2aWV3SHRtbDpcIlZpZXcgSFRNTFwiLGZvbnROYW1lOlwiU2VsZWN0IGZvbnQgZmFtaWx5XCIsZm9udE5hbWVJbmhlcml0OlwiKGluaGVyaXRlZCBmb250KVwiLGZvbnRTaXplOlwiU2VsZWN0IGZvbnQgc2l6ZVwiLGZvbnRTaXplSW5oZXJpdDpcIihpbmhlcml0ZWQgc2l6ZSlcIixmb3JtYXRCbG9jazpcIkZvcm1hdFwiLGZvcm1hdHRpbmc6XCJGb3JtYXRcIixmb3JlQ29sb3I6XCJDb2xvclwiLGJhY2tDb2xvcjpcIkJhY2tncm91bmQgY29sb3JcIixzdHlsZTpcIlN0eWxlc1wiLGVtcHR5Rm9sZGVyOlwiRW1wdHkgRm9sZGVyXCIsdXBsb2FkRmlsZTpcIlVwbG9hZFwiLG9yZGVyQnk6XCJBcnJhbmdlIGJ5OlwiLG9yZGVyQnlTaXplOlwiU2l6ZVwiLG9yZGVyQnlOYW1lOlwiTmFtZVwiLGludmFsaWRGaWxlVHlwZTonVGhlIHNlbGVjdGVkIGZpbGUgXCJ7MH1cIiBpcyBub3QgdmFsaWQuIFN1cHBvcnRlZCBmaWxlIHR5cGVzIGFyZSB7MX0uJyxkZWxldGVGaWxlOidBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIFwiezB9XCI/JyxvdmVyd3JpdGVGaWxlOidBIGZpbGUgd2l0aCBuYW1lIFwiezB9XCIgYWxyZWFkeSBleGlzdHMgaW4gdGhlIGN1cnJlbnQgZGlyZWN0b3J5LiBEbyB5b3Ugd2FudCB0byBvdmVyd3JpdGUgaXQ/JyxkaXJlY3RvcnlOb3RGb3VuZDpcIkEgZGlyZWN0b3J5IHdpdGggdGhpcyBuYW1lIHdhcyBub3QgZm91bmQuXCIsaW1hZ2VXZWJBZGRyZXNzOlwiV2ViIGFkZHJlc3NcIixpbWFnZUFsdFRleHQ6XCJBbHRlcm5hdGUgdGV4dFwiLGltYWdlV2lkdGg6XCJXaWR0aCAocHgpXCIsaW1hZ2VIZWlnaHQ6XCJIZWlnaHQgKHB4KVwiLGZpbGVXZWJBZGRyZXNzOlwiV2ViIGFkZHJlc3NcIixmaWxlVGl0bGU6XCJUaXRsZVwiLGxpbmtXZWJBZGRyZXNzOlwiV2ViIGFkZHJlc3NcIixsaW5rVGV4dDpcIlRleHRcIixsaW5rVG9vbFRpcDpcIlRvb2xUaXBcIixsaW5rT3BlbkluTmV3V2luZG93OlwiT3BlbiBsaW5rIGluIG5ldyB3aW5kb3dcIixkaWFsb2dVcGRhdGU6XCJVcGRhdGVcIixkaWFsb2dJbnNlcnQ6XCJJbnNlcnRcIixkaWFsb2dDYW5jZWw6XCJDYW5jZWxcIixjcmVhdGVUYWJsZTpcIkNyZWF0ZSB0YWJsZVwiLGNyZWF0ZVRhYmxlSGludDpcIkNyZWF0ZSBhIHswfSB4IHsxfSB0YWJsZVwiLGFkZENvbHVtbkxlZnQ6XCJBZGQgY29sdW1uIG9uIHRoZSBsZWZ0XCIsYWRkQ29sdW1uUmlnaHQ6XCJBZGQgY29sdW1uIG9uIHRoZSByaWdodFwiLGFkZFJvd0Fib3ZlOlwiQWRkIHJvdyBhYm92ZVwiLGFkZFJvd0JlbG93OlwiQWRkIHJvdyBiZWxvd1wiLGRlbGV0ZVJvdzpcIkRlbGV0ZSByb3dcIixkZWxldGVDb2x1bW46XCJEZWxldGUgY29sdW1uXCJ9LHk9IWN8fGMuaW9zJiZjLmZsYXRWZXJzaW9uPj01MDB8fCFjLmlvcyYmdCE9PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250ZW50RWRpdGFibGUsdz17YmFzaWM6W1wiYm9sZFwiLFwiaXRhbGljXCIsXCJ1bmRlcmxpbmVcIl0sYWxpZ25tZW50OltcImp1c3RpZnlMZWZ0XCIsXCJqdXN0aWZ5Q2VudGVyXCIsXCJqdXN0aWZ5UmlnaHRcIl0sbGlzdHM6W1wiaW5zZXJ0VW5vcmRlcmVkTGlzdFwiLFwiaW5zZXJ0T3JkZXJlZExpc3RcIl0saW5kZW50aW5nOltcImluZGVudFwiLFwib3V0ZGVudFwiXSxsaW5rczpbXCJjcmVhdGVMaW5rXCIsXCJ1bmxpbmtcIl0sdGFibGVzOltcImNyZWF0ZVRhYmxlXCIsXCJhZGRDb2x1bW5MZWZ0XCIsXCJhZGRDb2x1bW5SaWdodFwiLFwiYWRkUm93QWJvdmVcIixcImFkZFJvd0JlbG93XCIsXCJkZWxldGVSb3dcIixcImRlbGV0ZUNvbHVtblwiXX0sYj1sLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpLHIsbyxzLGM9dGhpcyxkPWEudWkuZWRpdG9yO3kmJihsLmZuLmluaXQuY2FsbChjLHQsbiksYy5vcHRpb25zPXAoe30sYy5vcHRpb25zLG4pLHQ9Yy5lbGVtZW50LHM9ZC5Eb20ubmFtZSh0WzBdKSx0LmNsb3Nlc3QoXCJmb3JtXCIpLm9uKFwic3VibWl0XCIrZixmdW5jdGlvbigpe2MudXBkYXRlKCl9KSxvPXUoe30sYy5vcHRpb25zKSxvLmVkaXRvcj1jLFwidGV4dGFyZWFcIj09cz8oYy5fd3JhcFRleHRhcmVhKCkscj1jLndyYXBwZXIuZmluZChcIi5rLWVkaXRvci10b29sYmFyXCIpLHRbMF0uaWQmJnIuYXR0cihcImFyaWEtY29udHJvbHNcIix0WzBdLmlkKSk6KGMuZWxlbWVudC5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIsITApLmFkZENsYXNzKFwiay13aWRnZXQgay1lZGl0b3Igay1lZGl0b3ItaW5saW5lXCIpLG8ucG9wdXA9ITAscj1lKCc8dWwgY2xhc3M9XCJrLWVkaXRvci10b29sYmFyXCIgcm9sZT1cInRvb2xiYXJcIiAvPicpLmluc2VydEJlZm9yZSh0KSksYy50b29sYmFyPW5ldyBkLlRvb2xiYXIoclswXSxvKSxjLnRvb2xiYXIuYmluZFRvKGMpLFwidGV4dGFyZWFcIj09cyYmc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBlPWMud3JhcHBlclswXS5zdHlsZS5oZWlnaHQsdD1wYXJzZUludChlLDEwKSxuPWMud3JhcHBlci5oZWlnaHQoKTtlLmluZGV4T2YoXCJweFwiKT4wJiYhaXNOYU4odCkmJm4+dCYmYy53cmFwcGVyLmhlaWdodCh0LShuLXQpKX0pLGMuX2luaXRpYWxpemVDb250ZW50RWxlbWVudChjKSxjLmtleWJvYXJkPW5ldyBkLktleWJvYXJkKFtuZXcgZC5UeXBpbmdIYW5kbGVyKGMpLG5ldyBkLkJhY2tzcGFjZUhhbmRsZXIoYyksbmV3IGQuU3lzdGVtSGFuZGxlcihjKV0pLGMuY2xpcGJvYXJkPW5ldyBkLkNsaXBib2FyZCh0aGlzKSxjLnVuZG9SZWRvU3RhY2s9bmV3IGQuVW5kb1JlZG9TdGFjayxpPW4mJm4udmFsdWU/bi52YWx1ZTpjLnRleHRhcmVhP3QudmFsKCkucmVwbGFjZSgvW1xcclxcblxcdlxcZlxcdCBdKy9naSxcIiBcIik6dFswXS5pbm5lckhUTUwsYy52YWx1ZShpKSxlKGRvY3VtZW50KS5vbihcIm1vdXNlZG93blwiLGgoYy5fZW5kVHlwaW5nLGMpKS5vbihcIm1vdXNldXBcIixoKGMuX21vdXNldXAsYykpLGEubm90aWZ5KGMpKX0sX2VuZFR5cGluZzpmdW5jdGlvbigpe3ZhciBlPXRoaXMua2V5Ym9hcmQ7dHJ5e2UuaXNUeXBpbmdJblByb2dyZXNzKCkmJihlLmVuZFR5cGluZyghMCksdGhpcy5zYXZlU2VsZWN0aW9uKCkpfWNhdGNoKHQpe319LF9zZWxlY3Rpb25DaGFuZ2U6ZnVuY3Rpb24oKXtkLm1zaWV8fGEudWkuZWRpdG9yLkRvbS5lbnN1cmVUcmFpbGluZ0JyZWFrcyh0aGlzLmJvZHkpLHRoaXMuX3NlbGVjdGlvblN0YXJ0ZWQ9ITEsdGhpcy5zYXZlU2VsZWN0aW9uKCksdGhpcy50cmlnZ2VyKFwic2VsZWN0XCIse30pfSxfd3JhcFRleHRhcmVhOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudCxpPW5bMF0uc3R5bGUud2lkdGgscj1uWzBdLnN0eWxlLmhlaWdodCxvPXYuZWRpdG9yV3JhcHBlclRlbXBsYXRlLGE9ZShvKS5pbnNlcnRCZWZvcmUobikud2lkdGgoaSkuaGVpZ2h0KHIpLHM9YS5maW5kKFwiLmstZWRpdGFibGUtYXJlYVwiKTtuLmF0dHIoXCJhdXRvY29tcGxldGVcIixcIm9mZlwiKS5hcHBlbmRUbyhzKS5hZGRDbGFzcyhcImstY29udGVudCBrLXJhdy1jb250ZW50XCIpLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIiksdC50ZXh0YXJlYT1uLHQud3JhcHBlcj1hfSxfY3JlYXRlQ29udGVudEVsZW1lbnQ6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG89dGhpcyxzPW8udGV4dGFyZWEsbD1vLm9wdGlvbnMuZG9tYWluLGM9bHx8ZG9jdW1lbnQuZG9tYWluLGQ9XCJcIix1PSdqYXZhc2NyaXB0OlwiXCInO3JldHVybihsfHxjIT1sb2NhdGlvbi5ob3N0bmFtZSkmJihkPSc8c2NyaXB0PmRvY3VtZW50LmRvbWFpbj1cIicrYysnXCI8L3NjcmlwdD4nLHU9XCJqYXZhc2NyaXB0OmRvY3VtZW50LndyaXRlKCdcIitkK1wiJylcIikscy5oaWRlKCksbj1lKFwiPGlmcmFtZSAvPlwiLHtmcmFtZUJvcmRlcjpcIjBcIn0pWzBdLGUobikuY3NzKFwiZGlzcGxheVwiLFwiXCIpLmFkZENsYXNzKFwiay1jb250ZW50XCIpLmluc2VydEJlZm9yZShzKSxuLnNyYz11LGk9bi5jb250ZW50V2luZG93fHxuLHI9aS5kb2N1bWVudHx8bi5jb250ZW50RG9jdW1lbnQsZShuKS5vbmUoXCJsb2FkXCIsZnVuY3Rpb24oKXtvLnRvb2xiYXIuZGVjb3JhdGVGcm9tKHIuYm9keSl9KSxyLm9wZW4oKSxyLndyaXRlKFwiPCFET0NUWVBFIGh0bWw+PGh0bWw+PGhlYWQ+PG1ldGEgY2hhcnNldD0ndXRmLTgnIC8+PHN0eWxlPmh0bWwsYm9keXtwYWRkaW5nOjA7bWFyZ2luOjA7aGVpZ2h0OjEwMCU7bWluLWhlaWdodDoxMDAlO31ib2R5e2ZvbnQtc2l6ZToxMnB4O2ZvbnQtZmFtaWx5OlZlcmRhbmEsR2VuZXZhLHNhbnMtc2VyaWY7cGFkZGluZy10b3A6MXB4O21hcmdpbi10b3A6LTFweDt3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7LXdlYmtpdC1uYnNwLW1vZGU6IHNwYWNlOy13ZWJraXQtbGluZS1icmVhazogYWZ0ZXItd2hpdGUtc3BhY2U7XCIrKGEuc3VwcG9ydC5pc1J0bChzKT9cImRpcmVjdGlvbjpydGw7XCI6XCJcIikrXCJ9aDF7Zm9udC1zaXplOjJlbTttYXJnaW46LjY3ZW0gMH1oMntmb250LXNpemU6MS41ZW19aDN7Zm9udC1zaXplOjEuMTZlbX1oNHtmb250LXNpemU6MWVtfWg1e2ZvbnQtc2l6ZTouODNlbX1oNntmb250LXNpemU6LjdlbX1we21hcmdpbjowIDAgMWVtO3BhZGRpbmc6MCAuMmVtfS5rLW1hcmtlcntkaXNwbGF5Om5vbmU7fS5rLXBhc3RlLWNvbnRhaW5lciwuQXBwbGUtc3R5bGUtc3Bhbntwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0xMDAwMHB4O3dpZHRoOjFweDtoZWlnaHQ6MXB4O292ZXJmbG93OmhpZGRlbn11bCxvbHtwYWRkaW5nLWxlZnQ6Mi41ZW19c3BhbnstbXMtaGlnaC1jb250cmFzdC1hZGp1c3Q6bm9uZTt9YXtjb2xvcjojMDBhfWNvZGV7Zm9udC1zaXplOjEuMjNlbX10ZWxlcmlrXFxcXDNBc2NyaXB0e2Rpc3BsYXk6IG5vbmU7fS5rLXRhYmxle3RhYmxlLWxheW91dDpmaXhlZDt3aWR0aDoxMDAlO2JvcmRlci1zcGFjaW5nOjA7bWFyZ2luOiAwIDAgMWVtO30uay10YWJsZSB0ZHttaW4td2lkdGg6MXB4O3BhZGRpbmc6LjJlbSAuM2VtO30uay10YWJsZSwuay10YWJsZSB0ZHtvdXRsaW5lOjA7Ym9yZGVyOiAxcHggZG90dGVkICNjY2M7fS5rLXRhYmxlIHB7bWFyZ2luOjA7cGFkZGluZzowO308L3N0eWxlPlwiK2QrXCI8c2NyaXB0PihmdW5jdGlvbihkLGMpe2RbY10oJ2hlYWRlcicpLGRbY10oJ2FydGljbGUnKSxkW2NdKCduYXYnKSxkW2NdKCdzZWN0aW9uJyksZFtjXSgnZm9vdGVyJyk7fSkoZG9jdW1lbnQsICdjcmVhdGVFbGVtZW50Jyk7PC9zY3JpcHQ+XCIrZS5tYXAodCxmdW5jdGlvbihlKXtyZXR1cm5cIjxsaW5rIHJlbD0nc3R5bGVzaGVldCcgaHJlZj0nXCIrZStcIic+XCJ9KS5qb2luKFwiXCIpK1wiPC9oZWFkPjxib2R5IGF1dG9jb3JyZWN0PSdvZmYnIGNvbnRlbnRlZGl0YWJsZT0ndHJ1ZSc+PC9ib2R5PjwvaHRtbD5cIiksci5jbG9zZSgpLGl9LF9ibHVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50ZXh0YXJlYSx0PWU/ZS52YWwoKTp0aGlzLl9vbGRWYWx1ZSxuPXRoaXMub3B0aW9ucy5lbmNvZGVkP3RoaXMuZW5jb2RlZFZhbHVlKCk6dGhpcy52YWx1ZSgpO3RoaXMudXBkYXRlKCksZSYmZS50cmlnZ2VyKFwiYmx1clwiKSxuIT10JiZ0aGlzLnRyaWdnZXIoXCJjaGFuZ2VcIil9LF9pbml0aWFsaXplQ29udGVudEVsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgbixpLHI9dGhpcztyLnRleHRhcmVhPyhyLndpbmRvdz1yLl9jcmVhdGVDb250ZW50RWxlbWVudChyLm9wdGlvbnMuc3R5bGVzaGVldHMpLG49ci5kb2N1bWVudD1yLndpbmRvdy5jb250ZW50RG9jdW1lbnR8fHIud2luZG93LmRvY3VtZW50LHIuYm9keT1uLmJvZHksaT1yLndpbmRvdyxlKG4pLm9uKFwibW91c2V1cFwiK2YsaChyLl9tb3VzZXVwLHIpKSk6KHIud2luZG93PXdpbmRvdyxuPXIuZG9jdW1lbnQ9ZG9jdW1lbnQsci5ib2R5PXIuZWxlbWVudFswXSxpPXIuYm9keSxyLnRvb2xiYXIuZGVjb3JhdGVGcm9tKHIuYm9keSkpLGUoaSkub24oXCJibHVyXCIrZixoKHRoaXMuX2JsdXIsdGhpcykpO3RyeXtuLmV4ZWNDb21tYW5kKFwiZW5hYmxlSW5saW5lVGFibGVFZGl0aW5nXCIsbnVsbCwhMSl9Y2F0Y2gobyl7fWEuc3VwcG9ydC50b3VjaCYmZShuKS5vbihcInNlbGVjdGlvbmNoYW5nZVwiK2YsaCh0aGlzLl9zZWxlY3Rpb25DaGFuZ2UsdGhpcykpLm9uKFwia2V5ZG93blwiK2YsZnVuY3Rpb24oKXthLl9hY3RpdmVFbGVtZW50KCkhPW4uYm9keSYmci53aW5kb3cuZm9jdXMoKX0pLGUoci5ib2R5KS5vbihcImtleWRvd25cIitmLGZ1bmN0aW9uKGUpe3ZhciBuLGksbyxhLHMsbDtyZXR1cm4gZS5rZXlDb2RlPT09Zy5GMTA/KHNldFRpbWVvdXQoaChyLnRvb2xiYXIuZm9jdXMsci50b29sYmFyKSwxMDApLGUucHJldmVudERlZmF1bHQoKSx0KTooKGUua2V5Q29kZT09Zy5MRUZUfHxlLmtleUNvZGU9PWcuUklHSFQpJiYobj1yLmdldFJhbmdlKCksaT1lLmtleUNvZGU9PWcuTEVGVCxvPW5baT9cInN0YXJ0Q29udGFpbmVyXCI6XCJlbmRDb250YWluZXJcIl0sYT1uW2k/XCJzdGFydE9mZnNldFwiOlwiZW5kT2Zmc2V0XCJdLHM9aT8tMToxLGkmJihhLT0xKSxhK3M+MCYmMz09by5ub2RlVHlwZSYmXCLvu79cIj09by5ub2RlVmFsdWVbYV0mJihuLnNldFN0YXJ0KG8sYStzKSxuLmNvbGxhcHNlKCEwKSxyLnNlbGVjdFJhbmdlKG4pKSksKGw9ci5rZXlib2FyZC50b29sRnJvbVNob3J0Y3V0KHIudG9vbGJhci50b29scyxlKSk/KGUucHJldmVudERlZmF1bHQoKSwvXih1bmRvfHJlZG8pJC8udGVzdChsKXx8ci5rZXlib2FyZC5lbmRUeXBpbmcoITApLHIudHJpZ2dlcihcImtleWRvd25cIixlKSxyLmV4ZWMobCksITEpOihyLmtleWJvYXJkLmNsZWFyVGltZW91dCgpLHIua2V5Ym9hcmQua2V5ZG93bihlKSx0KSl9KS5vbihcImtleXVwXCIrZixmdW5jdGlvbih0KXt2YXIgbj1bOCw5LDMzLDM0LDM1LDM2LDM3LDM4LDM5LDQwLDQwLDQ1LDQ2XTsoZS5pbkFycmF5KHQua2V5Q29kZSxuKT4tMXx8NjU9PXQua2V5Q29kZSYmdC5jdHJsS2V5JiYhdC5hbHRLZXkmJiF0LnNoaWZ0S2V5KSYmci5fc2VsZWN0aW9uQ2hhbmdlKCksci5rZXlib2FyZC5rZXl1cCh0KX0pLm9uKFwibW91c2Vkb3duXCIrZixmdW5jdGlvbih0KXtpZihyLl9zZWxlY3Rpb25TdGFydGVkPSEwLCFkLmdlY2tvKXt2YXIgbj1lKHQudGFyZ2V0KTsoMj09dC53aGljaHx8MT09dC53aGljaCYmdC5jdHJsS2V5KSYmbi5pcyhcImFbaHJlZl1cIikmJndpbmRvdy5vcGVuKG4uYXR0cihcImhyZWZcIiksXCJfbmV3XCIpfX0pLm9uKFwiY2xpY2tcIitmLGZ1bmN0aW9uKGUpe3ZhciB0LG49YS51aS5lZGl0b3IuRG9tO1wiaW1nXCI9PT1uLm5hbWUoZS50YXJnZXQpJiYodD1yLmNyZWF0ZVJhbmdlKCksdC5zZWxlY3ROb2RlKGUudGFyZ2V0KSxyLnNlbGVjdFJhbmdlKHQpKX0pLm9uKFwiY3V0XCIrZitcIiBwYXN0ZVwiK2YsZnVuY3Rpb24oZSl7ci5jbGlwYm9hcmRbXCJvblwiK2UudHlwZV0oZSl9KS5vbihcImZvY3VzaW5cIitmLGZ1bmN0aW9uKCl7ZSh0aGlzKS5hZGRDbGFzcyhcImstc3RhdGUtYWN0aXZlXCIpLHIudG9vbGJhci5zaG93KCksci50ZXh0YXJlYSYmci5zZWxlY3RSYW5nZShyLmdldFJhbmdlKCkpfSkub24oXCJmb2N1c291dFwiK2YsZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHQ9YS5fYWN0aXZlRWxlbWVudCgpLG49ci5ib2R5LGk9ci50b29sYmFyO3Q9PW58fGUuY29udGFpbnMobix0KXx8ZSh0KS5pcyhcIi5rLWVkaXRvcnRvb2xiYXItZHJhZ0hhbmRsZVwiKXx8aS5mb2N1c2VkKCl8fChlKG4pLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1hY3RpdmVcIiksaS5oaWRlKCkpfSwxMCl9KX0sX21vdXNldXA6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3NlbGVjdGlvblN0YXJ0ZWQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLl9zZWxlY3Rpb25DaGFuZ2UoKX0sMSl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UudGV4dGFyZWEmJihlLnRleHRhcmVhLnZhbChlLnZhbHVlKCkpLGUud3JhcHBlci5maW5kKFwiaWZyYW1lXCIpLnJlbW92ZSgpLGUuX2luaXRpYWxpemVDb250ZW50RWxlbWVudChlKSxlLnZhbHVlKGUudGV4dGFyZWEudmFsKCkpKX0sZXZlbnRzOltcInNlbGVjdFwiLFwiY2hhbmdlXCIsXCJleGVjdXRlXCIsXCJlcnJvclwiLFwicGFzdGVcIixcImtleWRvd25cIixcImtleXVwXCJdLG9wdGlvbnM6e25hbWU6XCJFZGl0b3JcIixtZXNzYWdlczpfLGZvcm1hdHM6e30sZW5jb2RlZDohMCxkb21haW46bnVsbCxzZXJpYWxpemF0aW9uOntlbnRpdGllczohMCxzY3JpcHRzOiExfSxzdHlsZXNoZWV0czpbXSxkaWFsb2dPcHRpb25zOnttb2RhbDohMCxyZXNpemFibGU6ITEsZHJhZ2dhYmxlOiEwLGFuaW1hdGlvbjohMX0sZm9udE5hbWU6W3t0ZXh0OlwiQXJpYWxcIix2YWx1ZTpcIkFyaWFsLEhlbHZldGljYSxzYW5zLXNlcmlmXCJ9LHt0ZXh0OlwiQ291cmllciBOZXdcIix2YWx1ZTpcIidDb3VyaWVyIE5ldycsQ291cmllcixtb25vc3BhY2VcIn0se3RleHQ6XCJHZW9yZ2lhXCIsdmFsdWU6XCJHZW9yZ2lhLHNlcmlmXCJ9LHt0ZXh0OlwiSW1wYWN0XCIsdmFsdWU6XCJJbXBhY3QsQ2hhcmNvYWwsc2Fucy1zZXJpZlwifSx7dGV4dDpcIkx1Y2lkYSBDb25zb2xlXCIsdmFsdWU6XCInTHVjaWRhIENvbnNvbGUnLE1vbmFjbyxtb25vc3BhY2VcIn0se3RleHQ6XCJUYWhvbWFcIix2YWx1ZTpcIlRhaG9tYSxHZW5ldmEsc2Fucy1zZXJpZlwifSx7dGV4dDpcIlRpbWVzIE5ldyBSb21hblwiLHZhbHVlOlwiJ1RpbWVzIE5ldyBSb21hbicsVGltZXMsc2VyaWZcIn0se3RleHQ6XCJUcmVidWNoZXQgTVNcIix2YWx1ZTpcIidUcmVidWNoZXQgTVMnLEhlbHZldGljYSxzYW5zLXNlcmlmXCJ9LHt0ZXh0OlwiVmVyZGFuYVwiLHZhbHVlOlwiVmVyZGFuYSxHZW5ldmEsc2Fucy1zZXJpZlwifV0sZm9udFNpemU6W3t0ZXh0OlwiMSAoOHB0KVwiLHZhbHVlOlwieHgtc21hbGxcIn0se3RleHQ6XCIyICgxMHB0KVwiLHZhbHVlOlwieC1zbWFsbFwifSx7dGV4dDpcIjMgKDEycHQpXCIsdmFsdWU6XCJzbWFsbFwifSx7dGV4dDpcIjQgKDE0cHQpXCIsdmFsdWU6XCJtZWRpdW1cIn0se3RleHQ6XCI1ICgxOHB0KVwiLHZhbHVlOlwibGFyZ2VcIn0se3RleHQ6XCI2ICgyNHB0KVwiLHZhbHVlOlwieC1sYXJnZVwifSx7dGV4dDpcIjcgKDM2cHQpXCIsdmFsdWU6XCJ4eC1sYXJnZVwifV0sZm9ybWF0QmxvY2s6W3t0ZXh0OlwiUGFyYWdyYXBoXCIsdmFsdWU6XCJwXCJ9LHt0ZXh0OlwiUXVvdGF0aW9uXCIsdmFsdWU6XCJibG9ja3F1b3RlXCJ9LHt0ZXh0OlwiSGVhZGluZyAxXCIsdmFsdWU6XCJoMVwifSx7dGV4dDpcIkhlYWRpbmcgMlwiLHZhbHVlOlwiaDJcIn0se3RleHQ6XCJIZWFkaW5nIDNcIix2YWx1ZTpcImgzXCJ9LHt0ZXh0OlwiSGVhZGluZyA0XCIsdmFsdWU6XCJoNFwifSx7dGV4dDpcIkhlYWRpbmcgNVwiLHZhbHVlOlwiaDVcIn0se3RleHQ6XCJIZWFkaW5nIDZcIix2YWx1ZTpcImg2XCJ9XSx0b29sczpbXS5jb25jYXQuY2FsbChbXCJmb3JtYXR0aW5nXCJdLHcuYmFzaWMsdy5hbGlnbm1lbnQsdy5saXN0cyx3LmluZGVudGluZyx3LmxpbmtzLFtcImluc2VydEltYWdlXCJdLHcudGFibGVzKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7bC5mbi5kZXN0cm95LmNhbGwodCksZSh0LndpbmRvdykuYWRkKHQuZG9jdW1lbnQpLmFkZCh0LmJvZHkpLmFkZCh0LndyYXBwZXIpLmFkZCh0LmVsZW1lbnQuY2xvc2VzdChcImZvcm1cIikpLm9mZihmKSxlKGRvY3VtZW50KS5vZmYoXCJtb3VzZWRvd25cIixoKHQuX2VuZFR5cGluZyx0KSkub2ZmKFwibW91c2V1cFwiLGgodC5fbW91c2V1cCx0KSksdC5fZm9jdXNPdXRzaWRlKCksdC50b29sYmFyLmRlc3Ryb3koKSxhLmRlc3Ryb3kodC53cmFwcGVyKX0sX2ZvY3VzT3V0c2lkZTpmdW5jdGlvbigpe2lmKGEuc3VwcG9ydC5icm93c2VyLm1zaWUmJnRoaXMudGV4dGFyZWEpe3ZhciB0PWUoXCI8aW5wdXQgc3R5bGU9J3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTEwcHg7dG9wOi0xMHB4O3dpZHRoOjFweDtoZWlnaHQ6MXB4O2ZvbnQtc2l6ZTowO2JvcmRlcjowOycgLz5cIikuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSkuZm9jdXMoKTt0LmJsdXIoKS5yZW1vdmUoKX19LHN0YXRlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT1iLmRlZmF1bHRUb29sc1tlXSxyPWkmJihpLm9wdGlvbnMuZmluZGVyfHxpLmZpbmRlciksbz1hLnVpLmVkaXRvci5SYW5nZVV0aWxzO3JldHVybiByPyh0PXRoaXMuZ2V0UmFuZ2UoKSxuPW8udGV4dE5vZGVzKHQpLCFuLmxlbmd0aCYmdC5jb2xsYXBzZWQmJihuPVt0LnN0YXJ0Q29udGFpbmVyXSksci5nZXRGb3JtYXQ/ci5nZXRGb3JtYXQobik6ci5pc0Zvcm1hdHRlZChuKSk6ITF9LHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMuYm9keSxpPWEudWkuZWRpdG9yLHI9aS5TZXJpYWxpemVyLmRvbVRvWGh0bWwobix0aGlzLm9wdGlvbnMuc2VyaWFsaXphdGlvbik7cmV0dXJuIGU9PT10P3I6KGUhPXImJihpLlNlcmlhbGl6ZXIuaHRtbFRvRG9tKGUsbiksZC5tc2llfHxhLnVpLmVkaXRvci5Eb20uZW5zdXJlVHJhaWxpbmdCcmVha3ModGhpcy5ib2R5KSx0aGlzLnNlbGVjdGlvblJlc3RvcmVQb2ludD1udWxsLHRoaXMudXBkYXRlKCksdGhpcy50b29sYmFyLnJlZnJlc2hUb29scygpKSx0KX0sc2F2ZVNlbGVjdGlvbjpmdW5jdGlvbih0KXt0PXR8fHRoaXMuZ2V0UmFuZ2UoKTt2YXIgbj10LmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyLGk9dGhpcy5ib2R5OyhuPT1pfHxlLmNvbnRhaW5zKGksbikpJiYodGhpcy5zZWxlY3Rpb25SZXN0b3JlUG9pbnQ9bmV3IGEudWkuZWRpdG9yLlJlc3RvcmVQb2ludCh0KSl9LF9mb2N1c0JvZHk6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuYm9keSxuPXRoaXMud3JhcHBlciYmdGhpcy53cmFwcGVyLmZpbmQoXCJpZnJhbWVcIilbMF0saT10aGlzLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxyPWEuX2FjdGl2ZUVsZW1lbnQoKTtyIT10JiZyIT1uJiYoZT1pLnNjcm9sbFRvcCx0LmZvY3VzKCksaS5zY3JvbGxUb3A9ZSl9LHJlc3RvcmVTZWxlY3Rpb246ZnVuY3Rpb24oKXt0aGlzLl9mb2N1c0JvZHkoKSx0aGlzLnNlbGVjdGlvblJlc3RvcmVQb2ludCYmdGhpcy5zZWxlY3RSYW5nZSh0aGlzLnNlbGVjdGlvblJlc3RvcmVQb2ludC50b1JhbmdlKCkpfSxmb2N1czpmdW5jdGlvbigpe3RoaXMucmVzdG9yZVNlbGVjdGlvbigpfSx1cGRhdGU6ZnVuY3Rpb24oZSl7ZT1lfHx0aGlzLm9wdGlvbnMuZW5jb2RlZD90aGlzLmVuY29kZWRWYWx1ZSgpOnRoaXMudmFsdWUoKSx0aGlzLnRleHRhcmVhP3RoaXMudGV4dGFyZWEudmFsKGUpOnRoaXMuX29sZFZhbHVlPWV9LGVuY29kZWRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiBhLnVpLmVkaXRvci5Eb20uZW5jb2RlKHRoaXMudmFsdWUoKSl9LGNyZWF0ZVJhbmdlOmZ1bmN0aW9uKGUpe3JldHVybiBhLnVpLmVkaXRvci5SYW5nZVV0aWxzLmNyZWF0ZVJhbmdlKGV8fHRoaXMuZG9jdW1lbnQpfSxnZXRTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gYS51aS5lZGl0b3IuU2VsZWN0aW9uVXRpbHMuc2VsZWN0aW9uRnJvbURvY3VtZW50KHRoaXMuZG9jdW1lbnQpfSxzZWxlY3RSYW5nZTpmdW5jdGlvbihlKXt0aGlzLl9mb2N1c0JvZHkoKTt2YXIgdD10aGlzLmdldFNlbGVjdGlvbigpO3QucmVtb3ZlQWxsUmFuZ2VzKCksdC5hZGRSYW5nZShlKSx0aGlzLnNhdmVTZWxlY3Rpb24oZSl9LGdldFJhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRTZWxlY3Rpb24oKSx0PWUmJmUucmFuZ2VDb3VudD4wP2UuZ2V0UmFuZ2VBdCgwKTp0aGlzLmNyZWF0ZVJhbmdlKCksbj10aGlzLmRvY3VtZW50O3JldHVybiB0LnN0YXJ0Q29udGFpbmVyIT1ufHx0LmVuZENvbnRhaW5lciE9bnx8dC5zdGFydE9mZnNldHx8dC5lbmRPZmZzZXR8fCh0LnNldFN0YXJ0KHRoaXMuYm9keSwwKSx0LmNvbGxhcHNlKCEwKSksdH0sc2VsZWN0ZWRIdG1sOmZ1bmN0aW9uKCl7cmV0dXJuIGEudWkuZWRpdG9yLlNlcmlhbGl6ZXIuZG9tVG9YaHRtbCh0aGlzLmdldFJhbmdlKCkuY2xvbmVDb250ZW50cygpKX0scGFzdGU6ZnVuY3Rpb24oZSx0KXt0aGlzLmNsaXBib2FyZC5wYXN0ZShlLHQpfSxleGVjOmZ1bmN0aW9uKGUsbil7dmFyIGkscixvLGE9dGhpcyxzPW51bGw7aWYoIWUpdGhyb3cgRXJyb3IoXCJrZW5kb0VkaXRvci5leGVjKCk6IGBuYW1lYCBwYXJhbWV0ZXIgY2Fubm90IGJlIGVtcHR5XCIpO2lmKGU9ZS50b0xvd2VyQ2FzZSgpLGEua2V5Ym9hcmQuaXNUeXBpbmdJblByb2dyZXNzKCl8fGEucmVzdG9yZVNlbGVjdGlvbigpLHI9YS50b29sYmFyLnRvb2xCeUlkKGUpLCFyKWZvcihvIGluIGIuZGVmYXVsdFRvb2xzKWlmKG8udG9Mb3dlckNhc2UoKT09ZSl7cj1iLmRlZmF1bHRUb29sc1tvXTticmVha31pZihyKXtpZihpPWEuZ2V0UmFuZ2UoKSxyLmNvbW1hbmQmJihzPXIuY29tbWFuZCh1KHtyYW5nZTppfSxuKSkpLGEudHJpZ2dlcihcImV4ZWN1dGVcIix7bmFtZTplLGNvbW1hbmQ6c30pLC9eKHVuZG98cmVkbykkL2kudGVzdChlKSlhLnVuZG9SZWRvU3RhY2tbZV0oKTtlbHNlIGlmKHMmJihzLm1hbmFnZXNVbmRvUmVkb3x8YS51bmRvUmVkb1N0YWNrLnB1c2gocykscy5lZGl0b3I9YSxzLmV4ZWMoKSxzLmFzeW5jKSlyZXR1cm4gcy5jaGFuZ2U9aChhLl9zZWxlY3Rpb25DaGFuZ2UsYSksdDthLl9zZWxlY3Rpb25DaGFuZ2UoKX19fSk7Yi5kZWZhdWx0VG9vbHM9e3VuZG86e29wdGlvbnM6e2tleTpcIlpcIixjdHJsOiEwfX0scmVkbzp7b3B0aW9uczp7a2V5OlwiWVwiLGN0cmw6ITB9fX0sYS51aS5wbHVnaW4oYiksbj1zLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnM9ZX0saW5pdGlhbGl6ZTpmdW5jdGlvbihlLHQpe2UuYXR0cih7dW5zZWxlY3RhYmxlOlwib25cIix0aXRsZTp0LnRpdGxlfSl9LGNvbW1hbmQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0aGlzLm9wdGlvbnMuY29tbWFuZChlKX0sdXBkYXRlOmUubm9vcH0pLG4uZXhlYz1mdW5jdGlvbihlLHQsbil7ZS5leGVjKHQse3ZhbHVlOm59KX0saT1uLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXtuLmZuLmluaXQuY2FsbCh0aGlzLGUpfSxjb21tYW5kOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBhLnVpLmVkaXRvci5Gb3JtYXRDb21tYW5kKHUoZSx7Zm9ybWF0dGVyOnQub3B0aW9ucy5mb3JtYXR0ZXJ9KSl9LHVwZGF0ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMub3B0aW9ucy5maW5kZXIuaXNGb3JtYXR0ZWQodCk7ZS50b2dnbGVDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIixuKSxlLmF0dHIoXCJhcmlhLXByZXNzZWRcIixuKX19KSx2LnJlZ2lzdGVyVG9vbChcInNlcGFyYXRvclwiLG5ldyBuKHt0ZW1wbGF0ZTpuZXcgbSh7dGVtcGxhdGU6di5zZXBhcmF0b3JUZW1wbGF0ZX0pfSkpLHI9ZC5tc2llJiY5PmQudmVyc2lvbj9cIu+7v1wiOlwiXCIsbz0nPGJyIGNsYXNzPVwiay1iclwiIC8+JyxkLm1zaWUmJigxMD5kLnZlcnNpb24/bz1cIu+7v1wiOjExPmQudmVyc2lvbiYmKG89XCIgXCIpKSx1KGEudWkse2VkaXRvcjp7VG9vbFRlbXBsYXRlOm0sRWRpdG9yVXRpbHM6dixUb29sOm4sRm9ybWF0VG9vbDppLF9ib21GaWxsOnIsZW1wdHlFbGVtZW50Q29udGVudDpvfX0pfSh3aW5kb3cualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3ZhciB0LG4saT17fTtmb3IodD0wLG49ZS5sZW5ndGg7bj50O3QrKylpW2VbdF1dPSEwO3JldHVybiBpfXZhciBuLGkscixvLGEscyxsLGMsZCx1LGg9d2luZG93LmtlbmRvLHA9ZS5tYXAsZj1lLmV4dGVuZCxnPWguc3VwcG9ydC5icm93c2VyLG09XCJzdHlsZVwiLHY9XCJmbG9hdFwiLF89XCJjc3NGbG9hdFwiLHk9XCJzdHlsZUZsb2F0XCIsdz1cImNsYXNzXCIsYj1cImstbWFya2VyXCIsaz10KFwiYXJlYSxiYXNlLGJhc2Vmb250LGJyLGNvbCxmcmFtZSxocixpbWcsaW5wdXQsaXNpbmRleCxsaW5rLG1ldGEscGFyYW0sZW1iZWRcIi5zcGxpdChcIixcIikpLHg9XCJkaXYscCxoMSxoMixoMyxoNCxoNSxoNixhZGRyZXNzLGFwcGxldCxibG9ja3F1b3RlLGJ1dHRvbixjZW50ZXIsZGQsZGlyLGRsLGR0LGZpZWxkc2V0LGZvcm0sZnJhbWVzZXQsaHIsaWZyYW1lLGlzaW5kZXgsbWFwLG1lbnUsbm9mcmFtZXMsbm9zY3JpcHQsb2JqZWN0LHByZSxzY3JpcHQsdGFibGUsdGJvZHksdGQsdGZvb3QsdGgsdGhlYWQsdHIsaGVhZGVyLGFydGljbGUsbmF2LGZvb3RlcixzZWN0aW9uLGFzaWRlLG1haW4sZmlndXJlLGZpZ2NhcHRpb25cIi5zcGxpdChcIixcIiksQz14LmNvbmNhdChbXCJ1bFwiLFwib2xcIixcImxpXCJdKSxTPXQoQyksVD1cInNwYW4sZW0sYSxhYmJyLGFjcm9ueW0sYXBwbGV0LGIsYmFzZWZvbnQsYmRvLGJpZyxicixidXR0b24sY2l0ZSxjb2RlLGRlbCxkZm4sZm9udCxpLGlmcmFtZSxpbWcsaW5wdXQsaW5zLGtiZCxsYWJlbCxtYXAsb2JqZWN0LHEscyxzYW1wLHNjcmlwdCxzZWxlY3Qsc21hbGwsc3RyaWtlLHN0cm9uZyxzdWIsc3VwLHRleHRhcmVhLHR0LHUsdmFyLGRhdGEsdGltZSxtYXJrLHJ1YnlcIi5zcGxpdChcIixcIiksRD10KFQpLEE9dChcImNoZWNrZWQsY29tcGFjdCxkZWNsYXJlLGRlZmVyLGRpc2FibGVkLGlzbWFwLG11bHRpcGxlLG5vaHJlZixub3Jlc2l6ZSxub3NoYWRlLG5vd3JhcCxyZWFkb25seSxzZWxlY3RlZFwiLnNwbGl0KFwiLFwiKSksRT1mdW5jdGlvbihlKXsxPT1lLm5vZGVUeXBlJiZlLm5vcm1hbGl6ZSgpfTtnLm1zaWUmJmcudmVyc2lvbj49OCYmKEU9ZnVuY3Rpb24oZSl7aWYoMT09ZS5ub2RlVHlwZSYmZS5maXJzdENoaWxkKWZvcih2YXIgdD1lLmZpcnN0Q2hpbGQsbj10Ozspe2lmKG49bi5uZXh0U2libGluZywhbilicmVhazszPT1uLm5vZGVUeXBlJiYzPT10Lm5vZGVUeXBlJiYobi5ub2RlVmFsdWU9dC5ub2RlVmFsdWUrbi5ub2RlVmFsdWUsdS5yZW1vdmUodCkpLHQ9bn19KSxuPS9eXFxzKyQvLGk9L3JnYlxccypcXChcXHMqKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKlxcKS9pLHI9L1xcdWZlZmYvZyxvPS9eKFxccyt8XFx1ZmVmZikkLyxzPVwiY29sb3IscGFkZGluZy1sZWZ0LHBhZGRpbmctcmlnaHQscGFkZGluZy10b3AscGFkZGluZy1ib3R0b20sYmFja2dyb3VuZC1jb2xvcixiYWNrZ3JvdW5kLWF0dGFjaG1lbnQsYmFja2dyb3VuZC1pbWFnZSxiYWNrZ3JvdW5kLXBvc2l0aW9uLGJhY2tncm91bmQtcmVwZWF0LGJvcmRlci10b3Atc3R5bGUsYm9yZGVyLXRvcC13aWR0aCxib3JkZXItdG9wLWNvbG9yLGJvcmRlci1ib3R0b20tc3R5bGUsYm9yZGVyLWJvdHRvbS13aWR0aCxib3JkZXItYm90dG9tLWNvbG9yLGJvcmRlci1sZWZ0LXN0eWxlLGJvcmRlci1sZWZ0LXdpZHRoLGJvcmRlci1sZWZ0LWNvbG9yLGJvcmRlci1yaWdodC1zdHlsZSxib3JkZXItcmlnaHQtd2lkdGgsYm9yZGVyLXJpZ2h0LWNvbG9yLGZvbnQtZmFtaWx5LGZvbnQtc2l6ZSxmb250LXN0eWxlLGZvbnQtdmFyaWFudCxmb250LXdlaWdodCxsaW5lLWhlaWdodFwiLnNwbGl0KFwiLFwiKSxsPS9bPD5cXCZdL2csYz0vW1xcdTAwQTAtXFx1MjY2Njw+XFwmXS9nLGQ9ezM0OlwicXVvdFwiLDM4OlwiYW1wXCIsMzk6XCJhcG9zXCIsNjA6XCJsdFwiLDYyOlwiZ3RcIiwxNjA6XCJuYnNwXCIsMTYxOlwiaWV4Y2xcIiwxNjI6XCJjZW50XCIsMTYzOlwicG91bmRcIiwxNjQ6XCJjdXJyZW5cIiwxNjU6XCJ5ZW5cIiwxNjY6XCJicnZiYXJcIiwxNjc6XCJzZWN0XCIsMTY4OlwidW1sXCIsMTY5OlwiY29weVwiLDE3MDpcIm9yZGZcIiwxNzE6XCJsYXF1b1wiLDE3MjpcIm5vdFwiLDE3MzpcInNoeVwiLDE3NDpcInJlZ1wiLDE3NTpcIm1hY3JcIiwxNzY6XCJkZWdcIiwxNzc6XCJwbHVzbW5cIiwxNzg6XCJzdXAyXCIsMTc5Olwic3VwM1wiLDE4MDpcImFjdXRlXCIsMTgxOlwibWljcm9cIiwxODI6XCJwYXJhXCIsMTgzOlwibWlkZG90XCIsMTg0OlwiY2VkaWxcIiwxODU6XCJzdXAxXCIsMTg2Olwib3JkbVwiLDE4NzpcInJhcXVvXCIsMTg4OlwiZnJhYzE0XCIsMTg5OlwiZnJhYzEyXCIsMTkwOlwiZnJhYzM0XCIsMTkxOlwiaXF1ZXN0XCIsMTkyOlwiQWdyYXZlXCIsMTkzOlwiQWFjdXRlXCIsMTk0OlwiQWNpcmNcIiwxOTU6XCJBdGlsZGVcIiwxOTY6XCJBdW1sXCIsMTk3OlwiQXJpbmdcIiwxOTg6XCJBRWxpZ1wiLDE5OTpcIkNjZWRpbFwiLDIwMDpcIkVncmF2ZVwiLDIwMTpcIkVhY3V0ZVwiLDIwMjpcIkVjaXJjXCIsMjAzOlwiRXVtbFwiLDIwNDpcIklncmF2ZVwiLDIwNTpcIklhY3V0ZVwiLDIwNjpcIkljaXJjXCIsMjA3OlwiSXVtbFwiLDIwODpcIkVUSFwiLDIwOTpcIk50aWxkZVwiLDIxMDpcIk9ncmF2ZVwiLDIxMTpcIk9hY3V0ZVwiLDIxMjpcIk9jaXJjXCIsMjEzOlwiT3RpbGRlXCIsMjE0OlwiT3VtbFwiLDIxNTpcInRpbWVzXCIsMjE2OlwiT3NsYXNoXCIsMjE3OlwiVWdyYXZlXCIsMjE4OlwiVWFjdXRlXCIsMjE5OlwiVWNpcmNcIiwyMjA6XCJVdW1sXCIsMjIxOlwiWWFjdXRlXCIsMjIyOlwiVEhPUk5cIiwyMjM6XCJzemxpZ1wiLDIyNDpcImFncmF2ZVwiLDIyNTpcImFhY3V0ZVwiLDIyNjpcImFjaXJjXCIsMjI3OlwiYXRpbGRlXCIsMjI4OlwiYXVtbFwiLDIyOTpcImFyaW5nXCIsMjMwOlwiYWVsaWdcIiwyMzE6XCJjY2VkaWxcIiwyMzI6XCJlZ3JhdmVcIiwyMzM6XCJlYWN1dGVcIiwyMzQ6XCJlY2lyY1wiLDIzNTpcImV1bWxcIiwyMzY6XCJpZ3JhdmVcIiwyMzc6XCJpYWN1dGVcIiwyMzg6XCJpY2lyY1wiLDIzOTpcIml1bWxcIiwyNDA6XCJldGhcIiwyNDE6XCJudGlsZGVcIiwyNDI6XCJvZ3JhdmVcIiwyNDM6XCJvYWN1dGVcIiwyNDQ6XCJvY2lyY1wiLDI0NTpcIm90aWxkZVwiLDI0NjpcIm91bWxcIiwyNDc6XCJkaXZpZGVcIiwyNDg6XCJvc2xhc2hcIiwyNDk6XCJ1Z3JhdmVcIiwyNTA6XCJ1YWN1dGVcIiwyNTE6XCJ1Y2lyY1wiLDI1MjpcInV1bWxcIiwyNTM6XCJ5YWN1dGVcIiwyNTQ6XCJ0aG9yblwiLDI1NTpcInl1bWxcIiw0MDI6XCJmbm9mXCIsOTEzOlwiQWxwaGFcIiw5MTQ6XCJCZXRhXCIsOTE1OlwiR2FtbWFcIiw5MTY6XCJEZWx0YVwiLDkxNzpcIkVwc2lsb25cIiw5MTg6XCJaZXRhXCIsOTE5OlwiRXRhXCIsOTIwOlwiVGhldGFcIiw5MjE6XCJJb3RhXCIsOTIyOlwiS2FwcGFcIiw5MjM6XCJMYW1iZGFcIiw5MjQ6XCJNdVwiLDkyNTpcIk51XCIsOTI2OlwiWGlcIiw5Mjc6XCJPbWljcm9uXCIsOTI4OlwiUGlcIiw5Mjk6XCJSaG9cIiw5MzE6XCJTaWdtYVwiLDkzMjpcIlRhdVwiLDkzMzpcIlVwc2lsb25cIiw5MzQ6XCJQaGlcIiw5MzU6XCJDaGlcIiw5MzY6XCJQc2lcIiw5Mzc6XCJPbWVnYVwiLDk0NTpcImFscGhhXCIsOTQ2OlwiYmV0YVwiLDk0NzpcImdhbW1hXCIsOTQ4OlwiZGVsdGFcIiw5NDk6XCJlcHNpbG9uXCIsOTUwOlwiemV0YVwiLDk1MTpcImV0YVwiLDk1MjpcInRoZXRhXCIsOTUzOlwiaW90YVwiLDk1NDpcImthcHBhXCIsOTU1OlwibGFtYmRhXCIsOTU2OlwibXVcIiw5NTc6XCJudVwiLDk1ODpcInhpXCIsOTU5Olwib21pY3JvblwiLDk2MDpcInBpXCIsOTYxOlwicmhvXCIsOTYyOlwic2lnbWFmXCIsOTYzOlwic2lnbWFcIiw5NjQ6XCJ0YXVcIiw5NjU6XCJ1cHNpbG9uXCIsOTY2OlwicGhpXCIsOTY3OlwiY2hpXCIsOTY4OlwicHNpXCIsOTY5Olwib21lZ2FcIiw5Nzc6XCJ0aGV0YXN5bVwiLDk3ODpcInVwc2loXCIsOTgyOlwicGl2XCIsODIyNjpcImJ1bGxcIiw4MjMwOlwiaGVsbGlwXCIsODI0MjpcInByaW1lXCIsODI0MzpcIlByaW1lXCIsODI1NDpcIm9saW5lXCIsODI2MDpcImZyYXNsXCIsODQ3MjpcIndlaWVycFwiLDg0NjU6XCJpbWFnZVwiLDg0NzY6XCJyZWFsXCIsODQ4MjpcInRyYWRlXCIsODUwMTpcImFsZWZzeW1cIiw4NTkyOlwibGFyclwiLDg1OTM6XCJ1YXJyXCIsODU5NDpcInJhcnJcIiw4NTk1OlwiZGFyclwiLDg1OTY6XCJoYXJyXCIsODYyOTpcImNyYXJyXCIsODY1NjpcImxBcnJcIiw4NjU3OlwidUFyclwiLDg2NTg6XCJyQXJyXCIsODY1OTpcImRBcnJcIiw4NjYwOlwiaEFyclwiLDg3MDQ6XCJmb3JhbGxcIiw4NzA2OlwicGFydFwiLDg3MDc6XCJleGlzdFwiLDg3MDk6XCJlbXB0eVwiLDg3MTE6XCJuYWJsYVwiLDg3MTI6XCJpc2luXCIsODcxMzpcIm5vdGluXCIsODcxNTpcIm5pXCIsODcxOTpcInByb2RcIiw4NzIxOlwic3VtXCIsODcyMjpcIm1pbnVzXCIsODcyNzpcImxvd2FzdFwiLDg3MzA6XCJyYWRpY1wiLDg3MzM6XCJwcm9wXCIsODczNDpcImluZmluXCIsODczNjpcImFuZ1wiLDg3NDM6XCJhbmRcIiw4NzQ0Olwib3JcIiw4NzQ1OlwiY2FwXCIsODc0NjpcImN1cFwiLDg3NDc6XCJpbnRcIiw4NzU2OlwidGhlcmU0XCIsODc2NDpcInNpbVwiLDg3NzM6XCJjb25nXCIsODc3NjpcImFzeW1wXCIsODgwMDpcIm5lXCIsODgwMTpcImVxdWl2XCIsODgwNDpcImxlXCIsODgwNTpcImdlXCIsODgzNDpcInN1YlwiLDg4MzU6XCJzdXBcIiw4ODM2OlwibnN1YlwiLDg4Mzg6XCJzdWJlXCIsODgzOTpcInN1cGVcIiw4ODUzOlwib3BsdXNcIiw4ODU1Olwib3RpbWVzXCIsODg2OTpcInBlcnBcIiw4OTAxOlwic2RvdFwiLDg5Njg6XCJsY2VpbFwiLDg5Njk6XCJyY2VpbFwiLDg5NzA6XCJsZmxvb3JcIiw4OTcxOlwicmZsb29yXCIsOTAwMTpcImxhbmdcIiw5MDAyOlwicmFuZ1wiLDk2NzQ6XCJsb3pcIiw5ODI0Olwic3BhZGVzXCIsOTgyNzpcImNsdWJzXCIsOTgyOTpcImhlYXJ0c1wiLDk4MzA6XCJkaWFtc1wiLDMzODpcIk9FbGlnXCIsMzM5Olwib2VsaWdcIiwzNTI6XCJTY2Fyb25cIiwzNTM6XCJzY2Fyb25cIiwzNzY6XCJZdW1sXCIsNzEwOlwiY2lyY1wiLDczMjpcInRpbGRlXCIsODE5NDpcImVuc3BcIiw4MTk1OlwiZW1zcFwiLDgyMDE6XCJ0aGluc3BcIiw4MjA0OlwiendualwiLDgyMDU6XCJ6d2pcIiw4MjA2OlwibHJtXCIsODIwNzpcInJsbVwiLDgyMTE6XCJuZGFzaFwiLDgyMTI6XCJtZGFzaFwiLDgyMTY6XCJsc3F1b1wiLDgyMTc6XCJyc3F1b1wiLDgyMTg6XCJzYnF1b1wiLDgyMjA6XCJsZHF1b1wiLDgyMjE6XCJyZHF1b1wiLDgyMjI6XCJiZHF1b1wiLDgyMjQ6XCJkYWdnZXJcIiw4MjI1OlwiRGFnZ2VyXCIsODI0MDpcInBlcm1pbFwiLDgyNDk6XCJsc2FxdW9cIiw4MjUwOlwicnNhcXVvXCIsODM2NDpcImV1cm9cIn0sdT17YmxvY2s6UyxpbmxpbmU6RCxmaW5kTm9kZUluZGV4OmZ1bmN0aW9uKGUsdCl7dmFyIG49MDtpZighZSlyZXR1cm4tMTtmb3IoOzspe2lmKGU9ZS5wcmV2aW91c1NpYmxpbmcsIWUpYnJlYWs7dCYmMz09ZS5ub2RlVHlwZXx8bisrfXJldHVybiBufSxpc0RhdGFOb2RlOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZudWxsIT09ZS5ub2RlVmFsdWUmJm51bGwhPT1lLmRhdGF9LGlzQW5jZXN0b3JPZjpmdW5jdGlvbih0LG4pe3RyeXtyZXR1cm4hdS5pc0RhdGFOb2RlKHQpJiYoZS5jb250YWlucyh0LHUuaXNEYXRhTm9kZShuKT9uLnBhcmVudE5vZGU6bil8fG4ucGFyZW50Tm9kZT09dCl9Y2F0Y2goaSl7cmV0dXJuITF9fSxpc0FuY2VzdG9yT3JTZWxmOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHUuaXNBbmNlc3Rvck9mKGUsdCl8fGU9PXR9LGZpbmRDbG9zZXN0QW5jZXN0b3I6ZnVuY3Rpb24oZSx0KXtpZih1LmlzQW5jZXN0b3JPZihlLHQpKWZvcig7dCYmdC5wYXJlbnROb2RlIT1lOyl0PXQucGFyZW50Tm9kZTtyZXR1cm4gdH0sZ2V0Tm9kZUxlbmd0aDpmdW5jdGlvbihlKXtyZXR1cm4gdS5pc0RhdGFOb2RlKGUpP2UubGVuZ3RoOmUuY2hpbGROb2Rlcy5sZW5ndGh9LHNwbGl0RGF0YU5vZGU6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49ZS5jbG9uZU5vZGUoITEpLGk9XCJcIixyPWU7ci5uZXh0U2libGluZyYmMz09ci5uZXh0U2libGluZy5ub2RlVHlwZSYmci5uZXh0U2libGluZy5ub2RlVmFsdWU7KWkrPXIubmV4dFNpYmxpbmcubm9kZVZhbHVlLHI9ci5uZXh0U2libGluZztlLmRlbGV0ZURhdGEodCxlLmxlbmd0aCksbi5kZWxldGVEYXRhKDAsdCksbi5ub2RlVmFsdWUrPWksdS5pbnNlcnRBZnRlcihuLGUpfSxhdHRyRXF1YWxzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saTtmb3IobiBpbiB0KWlmKGk9ZVtuXSxuPT12JiYoaT1lW2guc3VwcG9ydC5jc3NGbG9hdD9fOnldKSxcIm9iamVjdFwiPT10eXBlb2YgaSl7aWYoIXUuYXR0ckVxdWFscyhpLHRbbl0pKXJldHVybiExfWVsc2UgaWYoaSE9dFtuXSlyZXR1cm4hMTtyZXR1cm4hMH0sYmxvY2tQYXJlbnRPckJvZHk6ZnVuY3Rpb24oZSl7cmV0dXJuIHUucGFyZW50T2ZUeXBlKGUsQyl8fGUub3duZXJEb2N1bWVudC5ib2R5fSxibG9ja1BhcmVudHM6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG89W107Zm9yKG49MCxpPXQubGVuZ3RoO2k+bjtuKyspcj11LnBhcmVudE9mVHlwZSh0W25dLHUuYmxvY2tFbGVtZW50cyksciYmZS5pbkFycmF5KHIsbyk8MCYmby5wdXNoKHIpO3JldHVybiBvfSx3aW5kb3dGcm9tRG9jdW1lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGVmYXVsdFZpZXd8fGUucGFyZW50V2luZG93fSxub3JtYWxpemU6RSxibG9ja0VsZW1lbnRzOkMsbm9uTGlzdEJsb2NrRWxlbWVudHM6eCxpbmxpbmVFbGVtZW50czpULGVtcHR5OmssZmlsbEF0dHJzOkEsdG9IZXg6ZnVuY3Rpb24oZSl7dmFyIHQ9aS5leGVjKGUpO3JldHVybiB0P1wiI1wiK3AodC5zbGljZSgxKSxmdW5jdGlvbihlKXtyZXR1cm4gZT1wYXJzZUludChlLDEwKS50b1N0cmluZygxNiksZS5sZW5ndGg+MT9lOlwiMFwiK2V9KS5qb2luKFwiXCIpOmV9LGVuY29kZTpmdW5jdGlvbihlLHQpe3ZhciBuPSF0fHx0LmVudGl0aWVzP2M6bDtyZXR1cm4gZS5yZXBsYWNlKG4sZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jaGFyQ29kZUF0KDApLG49ZFt0XTtyZXR1cm4gbj9cIiZcIituK1wiO1wiOmV9KX0sc3RyaXBCb206ZnVuY3Rpb24oZSl7cmV0dXJuKGV8fFwiXCIpLnJlcGxhY2UocixcIlwiKX0saW5zaWduaWZpY2FudDpmdW5jdGlvbihlKXt2YXIgdD1lLmF0dHJpYnV0ZXM7cmV0dXJuXCJrLW1hcmtlclwiPT1lLmNsYXNzTmFtZXx8dS5pcyhlLFwiYnJcIikmJihcImstYnJcIj09ZS5jbGFzc05hbWV8fHQuX21vel9kaXJ0eXx8dC5fbW96X2VkaXRvcl9ib2d1c19ub2RlKX0sZW1wdHlOb2RlOmZ1bmN0aW9uKHQpe3ZhciBuPWUuZ3JlcCh0LmNoaWxkTm9kZXMsZnVuY3Rpb24oZSl7cmV0dXJuIHUuaXMoZSxcImJyXCIpPyExOnUuaW5zaWduaWZpY2FudChlKT8hMTozPT1lLm5vZGVUeXBlJiZvLnRlc3QoZS5ub2RlVmFsdWUpPyExOnUuaXMoZSxcInBcIikmJnUuZW1wdHlOb2RlKGUpPyExOiEwfSk7cmV0dXJuIW4ubGVuZ3RofSxuYW1lOmZ1bmN0aW9uKGUpe3JldHVybiBlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCl9LHNpZ25pZmljYW50Q2hpbGROb2RlczpmdW5jdGlvbih0KXtyZXR1cm4gZS5ncmVwKHQuY2hpbGROb2RlcyxmdW5jdGlvbihlKXtyZXR1cm4gMyE9ZS5ub2RlVHlwZXx8IXUuaXNXaGl0ZXNwYWNlKGUpfSl9LGxhc3RUZXh0Tm9kZTpmdW5jdGlvbihlKXt2YXIgdCxuPW51bGw7aWYoMz09ZS5ub2RlVHlwZSlyZXR1cm4gZTtmb3IodD1lLmxhc3RDaGlsZDt0O3Q9dC5wcmV2aW91c1NpYmxpbmcpaWYobj11Lmxhc3RUZXh0Tm9kZSh0KSlyZXR1cm4gbjtyZXR1cm4gbn0saXM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdS5uYW1lKGUpPT10fSxpc01hcmtlcjpmdW5jdGlvbihlKXtyZXR1cm4gZS5jbGFzc05hbWU9PWJ9LGlzV2hpdGVzcGFjZTpmdW5jdGlvbihlKXtyZXR1cm4gbi50ZXN0KGUubm9kZVZhbHVlKX0saXNCbG9jazpmdW5jdGlvbihlKXtyZXR1cm4gU1t1Lm5hbWUoZSldfSxpc0VtcHR5OmZ1bmN0aW9uKGUpe3JldHVybiBrW3UubmFtZShlKV19LGlzSW5saW5lOmZ1bmN0aW9uKGUpe3JldHVybiBEW3UubmFtZShlKV19LHNjcm9sbENvbnRhaW5lcjpmdW5jdGlvbihlKXt2YXIgdD11LndpbmRvd0Zyb21Eb2N1bWVudChlKSxuPSh0LmNvbnRlbnRXaW5kb3d8fHQpLmRvY3VtZW50fHx0Lm93bmVyRG9jdW1lbnR8fHQ7cmV0dXJuIG49aC5zdXBwb3J0LmJyb3dzZXIud2Via2l0fHxcIkJhY2tDb21wYXRcIj09bi5jb21wYXRNb2RlP24uYm9keTpuLmRvY3VtZW50RWxlbWVudH0sc2Nyb2xsVG86ZnVuY3Rpb24odCl7dmFyIG4saSxyPWUodS5pc0RhdGFOb2RlKHQpP3QucGFyZW50Tm9kZTp0KSxvPXUud2luZG93RnJvbURvY3VtZW50KHQub3duZXJEb2N1bWVudCksYT1vLmlubmVySGVpZ2h0LHM9dS5zY3JvbGxDb250YWluZXIodC5vd25lckRvY3VtZW50KTtcImJyXCI9PXUubmFtZShyWzBdKSYmKHI9ci5wYXJlbnQoKSksbj1yLm9mZnNldCgpLnRvcCxpPXJbMF0ub2Zmc2V0SGVpZ2h0LGkrbj5zLnNjcm9sbFRvcCthJiYocy5zY3JvbGxUb3A9aStuLWEpfSxwZXJzaXN0U2Nyb2xsVG9wOmZ1bmN0aW9uKGUpe2E9dS5zY3JvbGxDb250YWluZXIoZSkuc2Nyb2xsVG9wfSxyZXN0b3JlU2Nyb2xsVG9wOmZ1bmN0aW9uKGUpe3Uuc2Nyb2xsQ29udGFpbmVyKGUpLnNjcm9sbFRvcD1hfSxpbnNlcnRBdDpmdW5jdGlvbihlLHQsbil7ZS5pbnNlcnRCZWZvcmUodCxlLmNoaWxkTm9kZXNbbl18fG51bGwpfSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5wYXJlbnROb2RlP3QucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0KTp0fSxpbnNlcnRBZnRlcjpmdW5jdGlvbihlLHQpe3JldHVybiB0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdC5uZXh0U2libGluZyl9LHJlbW92ZTpmdW5jdGlvbihlKXtlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSl9LHJlbW92ZVRleHRTaWJsaW5nczpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5wYXJlbnROb2RlO2UubmV4dFNpYmxpbmcmJjM9PWUubmV4dFNpYmxpbmcubm9kZVR5cGU7KXQucmVtb3ZlQ2hpbGQoZS5uZXh0U2libGluZyk7Zm9yKDtlLnByZXZpb3VzU2libGluZyYmMz09ZS5wcmV2aW91c1NpYmxpbmcubm9kZVR5cGU7KXQucmVtb3ZlQ2hpbGQoZS5wcmV2aW91c1NpYmxpbmcpfSx0cmltOmZ1bmN0aW9uKGUpe3ZhciB0LG47Zm9yKHQ9ZS5jaGlsZE5vZGVzLmxlbmd0aC0xO3Q+PTA7dC0tKW49ZS5jaGlsZE5vZGVzW3RdLHUuaXNEYXRhTm9kZShuKT8odS5zdHJpcEJvbShuLm5vZGVWYWx1ZSkubGVuZ3RofHx1LnJlbW92ZShuKSx1LmlzV2hpdGVzcGFjZShuKSYmdS5pbnNlcnRCZWZvcmUobixlKSk6bi5jbGFzc05hbWUhPWImJih1LnRyaW0obiksbi5jaGlsZE5vZGVzLmxlbmd0aHx8dS5pc0VtcHR5KG4pfHx1LnJlbW92ZShuKSk7cmV0dXJuIGV9LGNsb3Nlc3Q6ZnVuY3Rpb24oZSx0KXtmb3IoO2UmJnUubmFtZShlKSE9dDspZT1lLnBhcmVudE5vZGU7cmV0dXJuIGV9LHNpYmxpbmc6ZnVuY3Rpb24oZSx0KXtkbyBlPWVbdF07d2hpbGUoZSYmMSE9ZS5ub2RlVHlwZSk7cmV0dXJuIGV9LG5leHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHUuc2libGluZyhlLFwibmV4dFNpYmxpbmdcIil9LHByZXY6ZnVuY3Rpb24oZSl7cmV0dXJuIHUuc2libGluZyhlLFwicHJldmlvdXNTaWJsaW5nXCIpfSxwYXJlbnRPZlR5cGU6ZnVuY3Rpb24oZSx0KXtkbyBlPWUucGFyZW50Tm9kZTt3aGlsZShlJiYhdS5vZlR5cGUoZSx0KSk7cmV0dXJuIGV9LG9mVHlwZTpmdW5jdGlvbih0LG4pe3JldHVybiBlLmluQXJyYXkodS5uYW1lKHQpLG4pPj0wfSxjaGFuZ2VUYWc6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhLHMsbD11LmNyZWF0ZShlLm93bmVyRG9jdW1lbnQsdCksYz1lLmF0dHJpYnV0ZXM7aWYoIW4pZm9yKGk9MCxyPWMubGVuZ3RoO3I+aTtpKyspcz1jW2ldLHMuc3BlY2lmaWVkJiYobz1zLm5vZGVOYW1lLGE9cy5ub2RlVmFsdWUsbz09dz9sLmNsYXNzTmFtZT1hOm89PW0/bC5zdHlsZS5jc3NUZXh0PWUuc3R5bGUuY3NzVGV4dDpsLnNldEF0dHJpYnV0ZShvLGEpKTtmb3IoO2UuZmlyc3RDaGlsZDspbC5hcHBlbmRDaGlsZChlLmZpcnN0Q2hpbGQpO3JldHVybiB1Lmluc2VydEJlZm9yZShsLGUpLHUucmVtb3ZlKGUpLGx9LGVkaXRhYmxlUGFyZW50OmZ1bmN0aW9uKGUpe2Zvcig7ZSYmKDM9PWUubm9kZVR5cGV8fFwidHJ1ZVwiIT09ZS5jb250ZW50RWRpdGFibGUpOyllPWUucGFyZW50Tm9kZTtyZXR1cm4gZX0sd3JhcDpmdW5jdGlvbihlLHQpe3JldHVybiB1Lmluc2VydEJlZm9yZSh0LGUpLHQuYXBwZW5kQ2hpbGQoZSksdH0sdW53cmFwOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLnBhcmVudE5vZGU7ZS5maXJzdENoaWxkOyl0Lmluc2VydEJlZm9yZShlLmZpcnN0Q2hpbGQsZSk7dC5yZW1vdmVDaGlsZChlKX0sY3JlYXRlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdS5hdHRyKGUuY3JlYXRlRWxlbWVudCh0KSxuKX0sYXR0cjpmdW5jdGlvbihlLHQpe3Q9Zih7fSx0KSx0JiZtIGluIHQmJih1LnN0eWxlKGUsdC5zdHlsZSksZGVsZXRlIHQuc3R5bGUpO2Zvcih2YXIgbiBpbiB0KW51bGw9PT10W25dPyhlLnJlbW92ZUF0dHJpYnV0ZShuKSxkZWxldGUgdFtuXSk6XCJjbGFzc05hbWVcIj09biYmKGVbbl09dFtuXSk7cmV0dXJuIGYoZSx0KX0sc3R5bGU6ZnVuY3Rpb24odCxuKXtlKHQpLmNzcyhufHx7fSl9LHVuc3R5bGU6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gdCluPT12JiYobj1oLnN1cHBvcnQuY3NzRmxvYXQ/Xzp5KSxlLnN0eWxlW25dPVwiXCI7XCJcIj09PWUuc3R5bGUuY3NzVGV4dCYmZS5yZW1vdmVBdHRyaWJ1dGUobSl9LGlubGluZVN0eWxlOmZ1bmN0aW9uKHQsbixpKXt2YXIgcixvPWUodS5jcmVhdGUodC5vd25lckRvY3VtZW50LG4saSkpO3JldHVybiB0LmFwcGVuZENoaWxkKG9bMF0pLHI9cChzLGZ1bmN0aW9uKGUpe3JldHVybiBnLm1zaWUmJlwibGluZS1oZWlnaHRcIj09ZSYmXCIxcHhcIj09by5jc3MoZSk/XCJsaW5lLWhlaWdodDoxLjVcIjplK1wiOlwiK28uY3NzKGUpfSkuam9pbihcIjtcIiksby5yZW1vdmUoKSxyfSxnZXRFZmZlY3RpdmVCYWNrZ3JvdW5kOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiKTtyZXR1cm4gdC5pbmRleE9mKFwicmdiYSgwLCAwLCAwLCAwXCIpPDAmJlwidHJhbnNwYXJlbnRcIiE9PXQ/dDpcImh0bWxcIj09PWVbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpP1wiV2luZG93XCI6dS5nZXRFZmZlY3RpdmVCYWNrZ3JvdW5kKGUucGFyZW50KCkpfSxyZW1vdmVDbGFzczpmdW5jdGlvbih0LG4pe3ZhciBpLHIsbz1cIiBcIit0LmNsYXNzTmFtZStcIiBcIixhPW4uc3BsaXQoXCIgXCIpO2ZvcihpPTAscj1hLmxlbmd0aDtyPmk7aSsrKW89by5yZXBsYWNlKFwiIFwiK2FbaV0rXCIgXCIsXCIgXCIpO289ZS50cmltKG8pLG8ubGVuZ3RoP3QuY2xhc3NOYW1lPW86dC5yZW1vdmVBdHRyaWJ1dGUodyl9LGNvbW1vbkFuY2VzdG9yOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixvPWFyZ3VtZW50cy5sZW5ndGgsYT1bXSxzPTEvMCxsPW51bGw7aWYoIW8pcmV0dXJuIG51bGw7aWYoMT09bylyZXR1cm4gYXJndW1lbnRzWzBdO2ZvcihlPTA7bz5lO2UrKyl7Zm9yKHQ9W10sbj1hcmd1bWVudHNbZV07bjspdC5wdXNoKG4pLG49bi5wYXJlbnROb2RlO2EucHVzaCh0LnJldmVyc2UoKSkscz1NYXRoLm1pbihzLHQubGVuZ3RoKX1pZigxPT1vKXJldHVybiBhWzBdWzBdO2ZvcihlPTA7cz5lO2UrKyl7Zm9yKGk9YVswXVtlXSxyPTE7bz5yO3IrKylpZihpIT1hW3JdW2VdKXJldHVybiBsO2w9aX1yZXR1cm4gbH0sY2xvc2VzdFNwbGl0dGFibGVQYXJlbnQ6ZnVuY3Rpb24odCl7dmFyIG4saSxyO3JldHVybiBuPTE9PXQubGVuZ3RoP3UucGFyZW50T2ZUeXBlKHRbMF0sW1widWxcIixcIm9sXCJdKTp1LmNvbW1vbkFuY2VzdG9yLmFwcGx5KG51bGwsdCksbnx8KG49dS5wYXJlbnRPZlR5cGUodFswXSxbXCJwXCIsXCJ0ZFwiXSl8fHRbMF0ub3duZXJEb2N1bWVudC5ib2R5KSx1LmlzSW5saW5lKG4pJiYobj11LmJsb2NrUGFyZW50T3JCb2R5KG4pKSxpPXAodCx1LmVkaXRhYmxlUGFyZW50KSxyPXUuY29tbW9uQW5jZXN0b3IoaSlbMF0sZS5jb250YWlucyhuLHIpJiYobj1yKSxufSxjbG9zZXN0RWRpdGFibGU6ZnVuY3Rpb24odCxuKXt2YXIgaT11LnBhcmVudE9mVHlwZSh0LG4pLHI9dS5lZGl0YWJsZVBhcmVudCh0KTtyZXR1cm4gaSYmciYmZS5jb250YWlucyhpLHIpP2k9cjohaSYmciYmKGk9ciksaX0sY2xvc2VzdEVkaXRhYmxlT2ZUeXBlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dS5jbG9zZXN0RWRpdGFibGUoZSx0KTtyZXR1cm4gbiYmdS5vZlR5cGUobix0KT9uOnZvaWQgMH0sZmlsdGVyOmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIGkscj0wLG89dC5sZW5ndGgsYT1bXTtvPnI7cisrKWk9dS5uYW1lKHRbcl0pLCghbiYmaT09ZXx8biYmaSE9ZSkmJmEucHVzaCh0W3JdKTtyZXR1cm4gYX0sZW5zdXJlVHJhaWxpbmdCcmVha3M6ZnVuY3Rpb24odCl7dmFyIG49ZSh0KS5maW5kKFwicCx0ZCx0aFwiKSxpPW4ubGVuZ3RoLHI9MDtcbmlmKGkpZm9yKDtpPnI7cisrKXUuZW5zdXJlVHJhaWxpbmdCcmVhayhuW3JdKTtlbHNlIHUuZW5zdXJlVHJhaWxpbmdCcmVhayh0KX0sZW5zdXJlVHJhaWxpbmdCcmVhazpmdW5jdGlvbihlKXt2YXIgdCxuPWUubGFzdENoaWxkLGk9biYmdS5uYW1lKG4pOyghaXx8XCJiclwiIT1pJiZcImltZ1wiIT1pfHxcImJyXCI9PWkmJlwiay1iclwiIT1uLmNsYXNzTmFtZSkmJih0PWUub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIiksdC5jbGFzc05hbWU9XCJrLWJyXCIsZS5hcHBlbmRDaGlsZCh0KSl9fSxoLnVpLmVkaXRvci5Eb209dX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9d2luZG93LmtlbmRvLG89ci51aS5lZGl0b3IsYT1vLkRvbSxzPWUuZXh0ZW5kLGw9XCJ4eC1zbWFsbCx4LXNtYWxsLHNtYWxsLG1lZGl1bSxsYXJnZSx4LWxhcmdlLHh4LWxhcmdlXCIuc3BsaXQoXCIsXCIpLGM9L1wiL2csZD0vPGJyW14+XSo+L2ksdT0vXlxcZCsoXFwuXFxkKik/KHB4KT8kL2ksaD0vPHA+PFxcL3A+L2kscD0vKFtcXHd8XFwtXSspXFxzKjpcXHMqKFteO10rKTs/L2ksZj0vXnNpenpsZS1cXGQrL2ksZz0vXmstc2NyaXB0LS9pLG09L1xccypvbmVycm9yXFxzKj1cXHMqKD86J3xcIik/KFteJ1wiPlxcc10qKSg/Oid8XCIpPy9pLHY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt2LmlubmVySFRNTD1cIiA8aHI+XCIsbj0zPT09di5maXJzdENoaWxkLm5vZGVUeXBlLHY9bnVsbCxpPXt0b0VkaXRhYmxlSHRtbDpmdW5jdGlvbihlKXt2YXIgdD0nPGJyIGNsYXNzPVwiay1iclwiPic7cmV0dXJuIGU9ZXx8XCJcIixlLnJlcGxhY2UoLzwhXFxbQ0RBVEFcXFsoLiopP1xcXVxcXT4vZyxcIjwhLS1bQ0RBVEFbJDFdXS0tPlwiKS5yZXBsYWNlKC88c2NyaXB0KFtePl0qKT4oLiopPzxcXC9zY3JpcHQ+L2dpLFwiPHRlbGVyaWs6c2NyaXB0JDE+JDI8L3RlbGVyaWs6c2NyaXB0PlwiKS5yZXBsYWNlKC88aW1nKFtePl0qKT4vZ2ksZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShtLFwiXCIpfSkucmVwbGFjZSgvKDxcXC8/aW1nW14+XSo+KVtcXHJcXG5cXHZcXGZcXHQgXSsvZ2ksXCIkMVwiKS5yZXBsYWNlKC9ePCh0YWJsZXxibG9ja3F1b3RlKS9pLHQrXCI8JDFcIikucmVwbGFjZSgvPFxcLyh0YWJsZXxibG9ja3F1b3RlKT4kL2ksXCI8LyQxPlwiK3QpfSxfZmlsbEVtcHR5RWxlbWVudHM6ZnVuY3Rpb24odCl7ZSh0KS5maW5kKFwicFwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQsbj1lKHRoaXMpO2lmKC9eXFxzKiQvZy50ZXN0KG4udGV4dCgpKSYmIW4uZmluZChcImltZyxpbnB1dFwiKS5sZW5ndGgpe2Zvcih0PXRoaXM7dC5maXJzdENoaWxkJiYzIT10LmZpcnN0Q2hpbGQubm9kZVR5cGU7KXQ9dC5maXJzdENoaWxkOzEhPXQubm9kZVR5cGV8fGEuZW1wdHlbYS5uYW1lKHQpXXx8KHQuaW5uZXJIVE1MPXIudWkuZWRpdG9yLmVtcHR5RWxlbWVudENvbnRlbnQpfX0pfSxfcmVtb3ZlU3lzdGVtRWxlbWVudHM6ZnVuY3Rpb24odCl7ZShcIi5rLXBhc3RlLWNvbnRhaW5lclwiLHQpLnJlbW92ZSgpfSxfcmVzZXRPcmRlcmVkTGlzdHM6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9ZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIm9sXCIpO2Zvcih0PTA7ci5sZW5ndGg+dDt0Kyspbj1yW3RdLGk9bi5nZXRBdHRyaWJ1dGUoXCJzdGFydFwiKSxuLnNldEF0dHJpYnV0ZShcInN0YXJ0XCIsMSksaT9uLnNldEF0dHJpYnV0ZShcInN0YXJ0XCIsaSk6bi5yZW1vdmVBdHRyaWJ1dGUoaSl9LF9wcmV2ZW50U2NyaXB0RXhlY3V0aW9uOmZ1bmN0aW9uKHQpe2UodCkuZmluZChcIipcIikuZWFjaChmdW5jdGlvbigpe3ZhciBlLHQsbixpLHI9dGhpcy5hdHRyaWJ1dGVzO2Zvcih0PTAsbj1yLmxlbmd0aDtuPnQ7dCsrKWU9clt0XSxpPWUubm9kZU5hbWUsZS5zcGVjaWZpZWQmJi9eb24vaS50ZXN0KGkpJiYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoaSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJrLXNjcmlwdC1cIitpLGUubm9kZVZhbHVlKSl9KX0saHRtbFRvRG9tOmZ1bmN0aW9uKHQsbil7dmFyIG8scyxsPXIuc3VwcG9ydC5icm93c2VyLGM9bC5tc2llLGQ9YyYmOT5sLnZlcnNpb247cmV0dXJuIHQ9aS50b0VkaXRhYmxlSHRtbCh0KSxkJiYodD1cIjxici8+XCIrdCxvPVwib3JpZ2luYWxzcmNcIixzPVwib3JpZ2luYWxocmVmXCIsdD10LnJlcGxhY2UoL2hyZWZcXHMqPVxccyooPzonfFwiKT8oW14nXCI+XFxzXSopKD86J3xcIik/LyxzKyc9XCIkMVwiJyksdD10LnJlcGxhY2UoL3NyY1xccyo9XFxzKig/Oid8XCIpPyhbXidcIj5cXHNdKikoPzonfFwiKT8vLG8rJz1cIiQxXCInKSksbi5pbm5lckhUTUw9dCxkPyhhLnJlbW92ZShuLmZpcnN0Q2hpbGQpLGUobikuZmluZChcInRlbGVyaWtcXFxcOnNjcmlwdCxzY3JpcHQsbGluayxpbWcsYVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlW3NdJiYoZS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsZVtzXSksZS5yZW1vdmVBdHRyaWJ1dGUocykpLGVbb10mJihlLnNldEF0dHJpYnV0ZShcInNyY1wiLGVbb10pLGUucmVtb3ZlQXR0cmlidXRlKG8pKX0pKTpjJiYoYS5ub3JtYWxpemUobiksaS5fcmVzZXRPcmRlcmVkTGlzdHMobikpLGkuX3ByZXZlbnRTY3JpcHRFeGVjdXRpb24obiksaS5fZmlsbEVtcHR5RWxlbWVudHMobiksaS5fcmVtb3ZlU3lzdGVtRWxlbWVudHMobiksZShcInRhYmxlXCIsbikuYWRkQ2xhc3MoXCJrLXRhYmxlXCIpLG59LGRvbVRvWGh0bWw6ZnVuY3Rpb24oaSxvKXtmdW5jdGlvbiBzKHQpe3ZhciBuLGkscixvLHM9ZS50cmltLGw9cyh0KS5zcGxpdChcIjtcIiksZD1sLmxlbmd0aDtmb3Iobj0wLGQ9bC5sZW5ndGg7ZD5uO24rKylsW25dLmxlbmd0aCYmKGk9cC5leGVjKGxbbl0pLGkmJihyPXMoaVsxXS50b0xvd2VyQ2FzZSgpKSxvPXMoaVsyXSksXCJmb250LXNpemUtYWRqdXN0XCIhPXImJlwiZm9udC1zdHJldGNoXCIhPXImJihyLmluZGV4T2YoXCJjb2xvclwiKT49MD9vPWEudG9IZXgobyk6ci5pbmRleE9mKFwiZm9udFwiKT49MD9vPW8ucmVwbGFjZShjLFwiJ1wiKTovXFxidXJsXFwoL2cudGVzdChvKSYmKG89by5yZXBsYWNlKGMsXCJcIikpLGIucHVzaChyKSxiLnB1c2goXCI6XCIpLGIucHVzaChvKSxiLnB1c2goXCI7XCIpKSkpfWZ1bmN0aW9uIG0obil7dmFyIGksbCxjLGQsaCxwLG0sdixfLHk9W10sdz1uLmF0dHJpYnV0ZXM7Zm9yKGEuaXMobixcImltZ1wiKSYmKG09bi5zdHlsZS53aWR0aCx2PW4uc3R5bGUuaGVpZ2h0LF89ZShuKSxtJiZ1LnRlc3QobSkmJihfLmF0dHIoXCJ3aWR0aFwiLHBhcnNlSW50KG0sMTApKSxhLnVuc3R5bGUobix7d2lkdGg6dH0pKSx2JiZ1LnRlc3QodikmJihfLmF0dHIoXCJoZWlnaHRcIixwYXJzZUludCh2LDEwKSksYS51bnN0eWxlKG4se2hlaWdodDp0fSkpKSxsPTAsYz13Lmxlbmd0aDtjPmw7bCsrKWk9d1tsXSxkPWkubm9kZU5hbWUsaD1pLm5vZGVWYWx1ZSxwPWkuc3BlY2lmaWVkLFwidmFsdWVcIj09ZCYmXCJ2YWx1ZVwiaW4gbiYmbi52YWx1ZT9wPSEwOlwidHlwZVwiPT1kJiZcInRleHRcIj09aD9wPSEwOlwiY2xhc3NcIiE9ZHx8aD9mLnRlc3QoZCk/cD0hMTpcImNvbXBsZXRlXCI9PWQ/cD0hMTpcImFsdEh0bWxcIj09ZD9wPSExOlwic3RhcnRcIj09ZCYmKGEuaXMobixcInVsXCIpfHxhLmlzKG4sXCJvbFwiKSk/cD0hMTpkLmluZGV4T2YoXCJfbW96XCIpPj0wP3A9ITE6Zy50ZXN0KGQpJiYocD0hIW8uc2NyaXB0cyk6cD0hMSxwJiZ5LnB1c2goaSk7aWYoeS5sZW5ndGgpZm9yKHkuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBlLm5vZGVOYW1lPnQubm9kZU5hbWU/MTp0Lm5vZGVOYW1lPmUubm9kZU5hbWU/LTE6MH0pLGw9MCxjPXkubGVuZ3RoO2M+bDtsKyspaT15W2xdLGQ9aS5ub2RlTmFtZSxoPWkubm9kZVZhbHVlLChcImNsYXNzXCIhPWR8fFwiay10YWJsZVwiIT1oKSYmKGQ9ZC5yZXBsYWNlKGcsXCJcIiksYi5wdXNoKFwiIFwiKSxiLnB1c2goZCksYi5wdXNoKCc9XCInKSxcInN0eWxlXCI9PWQ/cyhofHxuLnN0eWxlLmNzc1RleHQpOmIucHVzaChcInNyY1wiPT1kfHxcImhyZWZcIj09ZD9yLmh0bWxFbmNvZGUobi5nZXRBdHRyaWJ1dGUoZCwyKSk6YS5maWxsQXR0cnNbZF0/ZDpoKSxiLnB1c2goJ1wiJykpfWZ1bmN0aW9uIHYoZSx0LG4pe2Zvcih2YXIgaT1lLmZpcnN0Q2hpbGQ7aTtpPWkubmV4dFNpYmxpbmcpeShpLHQsbil9ZnVuY3Rpb24gXyhlKXtyZXR1cm4gZS5ub2RlVmFsdWUucmVwbGFjZSgvXFx1ZmVmZi9nLFwiXCIpfWZ1bmN0aW9uIHkoZSxpLHIpe3ZhciBzLGwsYyxkLHUsaD1lLm5vZGVUeXBlO2lmKDE9PWgpe2lmKHM9YS5uYW1lKGUpLCFzfHxhLmluc2lnbmlmaWNhbnQoZSkpcmV0dXJuO2lmKGEuaXNJbmxpbmUoZSkmJjE9PWUuY2hpbGROb2Rlcy5sZW5ndGgmJjM9PWUuZmlyc3RDaGlsZC5ub2RlVHlwZSYmIV8oZS5maXJzdENoaWxkKSlyZXR1cm47aWYoIW8uc2NyaXB0cyYmXCJ0ZWxlcmlrOnNjcmlwdFwiPT1zKXJldHVybjtpZihsPWtbc10pcmV0dXJuIGwuc3RhcnQoZSksdihlLCExLGwuc2tpcEVuY29kaW5nKSxsLmVuZChlKSx0O2IucHVzaChcIjxcIiksYi5wdXNoKHMpLG0oZSksYS5lbXB0eVtzXT9iLnB1c2goXCIgLz5cIik6KGIucHVzaChcIj5cIiksdihlLGl8fGEuaXMoZSxcInByZVwiKSksYi5wdXNoKFwiPC9cIiksYi5wdXNoKHMpLGIucHVzaChcIj5cIikpfWVsc2UgMz09aD8oZD1fKGUpLCFpJiZuJiYoYz1lLnBhcmVudE5vZGUsdT1lLnByZXZpb3VzU2libGluZyx1fHwodT0oYS5pc0lubGluZShjKT9jOmUpLnByZXZpb3VzU2libGluZyksKCF1fHxcIlwiPT09dS5pbm5lckhUTUx8fGEuaXNCbG9jayh1KSkmJihkPWQucmVwbGFjZSgvXltcXHJcXG5cXHZcXGZcXHQgXSsvLFwiXCIpKSxkPWQucmVwbGFjZSgvICsvLFwiIFwiKSksYi5wdXNoKHI/ZDphLmVuY29kZShkLG8pKSk6ND09aD8oYi5wdXNoKFwiPCFbQ0RBVEFbXCIpLGIucHVzaChlLmRhdGEpLGIucHVzaChcIl1dPlwiKSk6OD09aCYmKGUuZGF0YS5pbmRleE9mKFwiW0NEQVRBW1wiKTwwPyhiLnB1c2goXCI8IS0tXCIpLGIucHVzaChlLmRhdGEpLGIucHVzaChcIi0tPlwiKSk6KGIucHVzaChcIjwhXCIpLGIucHVzaChlLmRhdGEpLGIucHVzaChcIj5cIikpKX1mdW5jdGlvbiB3KGUpe3ZhciB0PWUuY2hpbGROb2Rlcy5sZW5ndGgsbj10JiYzPT1lLmZpcnN0Q2hpbGQubm9kZVR5cGU7cmV0dXJuIG4mJigxPT10fHwyPT10JiZhLmluc2lnbmlmaWNhbnQoZS5sYXN0Q2hpbGQpKX12YXIgYj1bXSxrPXtcInRlbGVyaWs6c2NyaXB0XCI6e3N0YXJ0OmZ1bmN0aW9uKGUpe2IucHVzaChcIjxzY3JpcHRcIiksbShlKSxiLnB1c2goXCI+XCIpfSxlbmQ6ZnVuY3Rpb24oKXtiLnB1c2goXCI8L3NjcmlwdD5cIil9LHNraXBFbmNvZGluZzohMH0sYjp7c3RhcnQ6ZnVuY3Rpb24oKXtiLnB1c2goXCI8c3Ryb25nPlwiKX0sZW5kOmZ1bmN0aW9uKCl7Yi5wdXNoKFwiPC9zdHJvbmc+XCIpfX0saTp7c3RhcnQ6ZnVuY3Rpb24oKXtiLnB1c2goXCI8ZW0+XCIpfSxlbmQ6ZnVuY3Rpb24oKXtiLnB1c2goXCI8L2VtPlwiKX19LHU6e3N0YXJ0OmZ1bmN0aW9uKCl7Yi5wdXNoKCc8c3BhbiBzdHlsZT1cInRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7XCI+Jyl9LGVuZDpmdW5jdGlvbigpe2IucHVzaChcIjwvc3Bhbj5cIil9fSxpZnJhbWU6e3N0YXJ0OmZ1bmN0aW9uKGUpe2IucHVzaChcIjxpZnJhbWVcIiksbShlKSxiLnB1c2goXCI+XCIpfSxlbmQ6ZnVuY3Rpb24oKXtiLnB1c2goXCI8L2lmcmFtZT5cIil9fSxmb250OntzdGFydDpmdW5jdGlvbihlKXt2YXIgdCxuLGk7Yi5wdXNoKCc8c3BhbiBzdHlsZT1cIicpLHQ9ZS5nZXRBdHRyaWJ1dGUoXCJjb2xvclwiKSxuPWxbZS5nZXRBdHRyaWJ1dGUoXCJzaXplXCIpXSxpPWUuZ2V0QXR0cmlidXRlKFwiZmFjZVwiKSx0JiYoYi5wdXNoKFwiY29sb3I6XCIpLGIucHVzaChhLnRvSGV4KHQpKSxiLnB1c2goXCI7XCIpKSxpJiYoYi5wdXNoKFwiZm9udC1mYWNlOlwiKSxiLnB1c2goaSksYi5wdXNoKFwiO1wiKSksbiYmKGIucHVzaChcImZvbnQtc2l6ZTpcIiksYi5wdXNoKG4pLGIucHVzaChcIjtcIikpLGIucHVzaCgnXCI+Jyl9LGVuZDpmdW5jdGlvbigpe2IucHVzaChcIjwvc3Bhbj5cIil9fX07cmV0dXJuIG89b3x8e30sdyhpKT9hLmVuY29kZShfKGkuZmlyc3RDaGlsZCkucmVwbGFjZSgvW1xcclxcblxcdlxcZlxcdCBdKy8sXCIgXCIpLG8pOih2KGkpLGI9Yi5qb2luKFwiXCIpLFwiXCI9PT1iLnJlcGxhY2UoZCxcIlwiKS5yZXBsYWNlKGgsXCJcIik/XCJcIjpiKX19LHMobyx7U2VyaWFsaXplcjppfSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0LG4saSl7dmFyIHIsbyxhLHM7aWYoZT09dClyZXR1cm4gaS1uO2ZvcihyPXQ7ciYmci5wYXJlbnROb2RlIT1lOylyPXIucGFyZW50Tm9kZTtpZihyKXJldHVybiBwKHIpLW47Zm9yKHI9ZTtyJiZyLnBhcmVudE5vZGUhPXQ7KXI9ci5wYXJlbnROb2RlO2lmKHIpcmV0dXJuIGktcChyKS0xO2ZvcihvPWguY29tbW9uQW5jZXN0b3IoZSx0KSxhPWU7YSYmYS5wYXJlbnROb2RlIT1vOylhPWEucGFyZW50Tm9kZTtmb3IoYXx8KGE9bykscz10O3MmJnMucGFyZW50Tm9kZSE9bzspcz1zLnBhcmVudE5vZGU7cmV0dXJuIHN8fChzPW8pLGE9PXM/MDpwKHMpLXAoYSl9ZnVuY3Rpb24gbihlLG4pe2Z1bmN0aW9uIGkoZSl7dHJ5e3JldHVybiB0KGUuc3RhcnRDb250YWluZXIsZS5lbmRDb250YWluZXIsZS5zdGFydE9mZnNldCxlLmVuZE9mZnNldCk8MH1jYXRjaChuKXtyZXR1cm4hMH19aShlKSYmKG4/KGUuY29tbW9uQW5jZXN0b3JDb250YWluZXI9ZS5lbmRDb250YWluZXI9ZS5zdGFydENvbnRhaW5lcixlLmVuZE9mZnNldD1lLnN0YXJ0T2Zmc2V0KTooZS5jb21tb25BbmNlc3RvckNvbnRhaW5lcj1lLnN0YXJ0Q29udGFpbmVyPWUuZW5kQ29udGFpbmVyLGUuc3RhcnRPZmZzZXQ9ZS5lbmRPZmZzZXQpLGUuY29sbGFwc2VkPSEwKX1mdW5jdGlvbiBpKGUpe2UuY29sbGFwc2VkPWUuc3RhcnRDb250YWluZXI9PWUuZW5kQ29udGFpbmVyJiZlLnN0YXJ0T2Zmc2V0PT1lLmVuZE9mZnNldDtmb3IodmFyIHQ9ZS5zdGFydENvbnRhaW5lcjt0JiZ0IT1lLmVuZENvbnRhaW5lciYmIWguaXNBbmNlc3Rvck9mKHQsZS5lbmRDb250YWluZXIpOyl0PXQucGFyZW50Tm9kZTtlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyPXR9ZnVuY3Rpb24gcihlKXt2YXIgdD1lLmR1cGxpY2F0ZSgpLG49ZS5kdXBsaWNhdGUoKTtyZXR1cm4gdC5jb2xsYXBzZSghMCksbi5jb2xsYXBzZSghMSksaC5jb21tb25BbmNlc3RvcihlLnBhcmVudEVsZW1lbnQoKSx0LnBhcmVudEVsZW1lbnQoKSxuLnBhcmVudEVsZW1lbnQoKSl9ZnVuY3Rpb24gbyhlLHQsbil7dmFyIGkscj10W24/XCJzdGFydENvbnRhaW5lclwiOlwiZW5kQ29udGFpbmVyXCJdLG89dFtuP1wic3RhcnRPZmZzZXRcIjpcImVuZE9mZnNldFwiXSxhPTAscz1mKHIpLGw9cz9yOnIuY2hpbGROb2Rlc1tvXXx8bnVsbCxjPXM/ci5wYXJlbnROb2RlOnIsZD10Lm93bmVyRG9jdW1lbnQsdT1kLmJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7KDM9PXIubm9kZVR5cGV8fDQ9PXIubm9kZVR5cGUpJiYoYT1vKSxjfHwoYz1kLmJvZHkpLFwiaW1nXCI9PWMubm9kZU5hbWUudG9Mb3dlckNhc2UoKT8odS5tb3ZlVG9FbGVtZW50VGV4dChjKSx1LmNvbGxhcHNlKCExKSxlLnNldEVuZFBvaW50KG4/XCJTdGFydFRvU3RhcnRcIjpcIkVuZFRvU3RhcnRcIix1KSk6KGk9Yy5pbnNlcnRCZWZvcmUoaC5jcmVhdGUoZCxcImFcIiksbCksdS5tb3ZlVG9FbGVtZW50VGV4dChpKSxoLnJlbW92ZShpKSx1W24/XCJtb3ZlU3RhcnRcIjpcIm1vdmVFbmRcIl0oXCJjaGFyYWN0ZXJcIixhKSx1LmNvbGxhcHNlKCExKSxlLnNldEVuZFBvaW50KG4/XCJTdGFydFRvU3RhcnRcIjpcIkVuZFRvU3RhcnRcIix1KSl9ZnVuY3Rpb24gYShlLHQsbixpKXt2YXIgcixvLGEscyxsLGMsZCx1PWguY3JlYXRlKHQub3duZXJEb2N1bWVudCxcImFcIiksZz1lLmR1cGxpY2F0ZSgpLG09aT9cIlN0YXJ0VG9TdGFydFwiOlwiU3RhcnRUb0VuZFwiLHY9ITE7dS5pbm5lckhUTUw9XCLvu79cIixnLmNvbGxhcHNlKGkpLG89Zy5wYXJlbnRFbGVtZW50KCksaC5pc0FuY2VzdG9yT3JTZWxmKG4sbyl8fChvPW4pO2RvIHY/by5pbnNlcnRCZWZvcmUodSx1LnByZXZpb3VzU2libGluZyk6KG8uYXBwZW5kQ2hpbGQodSksdj0hMCksZy5tb3ZlVG9FbGVtZW50VGV4dCh1KTt3aGlsZSgocj1nLmNvbXBhcmVFbmRQb2ludHMobSxlKSk+MCYmdS5wcmV2aW91c1NpYmxpbmcpO2E9dS5uZXh0U2libGluZywtMT09ciYmZihhKT8oZy5zZXRFbmRQb2ludChpP1wiRW5kVG9TdGFydFwiOlwiRW5kVG9FbmRcIixlKSxoLnJlbW92ZSh1KSxjPVthLGcudGV4dC5sZW5ndGhdKToocz0haSYmdS5wcmV2aW91c1NpYmxpbmcsbD1pJiZ1Lm5leHRTaWJsaW5nLGYobCk/Yz1bbCwwXTpmKHMpP2M9W3Mscy5sZW5ndGhdOihkPXAodSksYz1vLm5leHRTaWJsaW5nJiZkPT1vLmNoaWxkTm9kZXMubGVuZ3RoLTE/W28ubmV4dFNpYmxpbmcsMF06W28sZF0pLGgucmVtb3ZlKHUpKSx0W2k/XCJzZXRTdGFydFwiOlwic2V0RW5kXCJdLmFwcGx5KHQsYyl9dmFyIHM9d2luZG93LmtlbmRvLGw9cy5DbGFzcyxjPWUuZXh0ZW5kLGQ9cy51aS5lZGl0b3IsdT1zLnN1cHBvcnQuYnJvd3NlcixoPWQuRG9tLHA9aC5maW5kTm9kZUluZGV4LGY9aC5pc0RhdGFOb2RlLGc9aC5maW5kQ2xvc2VzdEFuY2VzdG9yLG09aC5nZXROb2RlTGVuZ3RoLHY9aC5ub3JtYWxpemUsXz17c2VsZWN0aW9uRnJvbVdpbmRvdzpmdW5jdGlvbihlKXtyZXR1cm5cImdldFNlbGVjdGlvblwiaW4gZT9lLmdldFNlbGVjdGlvbigpOm5ldyBiKGUuZG9jdW1lbnQpfSxzZWxlY3Rpb25Gcm9tUmFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9VC5kb2N1bWVudEZyb21SYW5nZShlKTtyZXR1cm4gXy5zZWxlY3Rpb25Gcm9tRG9jdW1lbnQodCl9LHNlbGVjdGlvbkZyb21Eb2N1bWVudDpmdW5jdGlvbihlKXtyZXR1cm4gXy5zZWxlY3Rpb25Gcm9tV2luZG93KGgud2luZG93RnJvbURvY3VtZW50KGUpKX19LHk9bC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCl7ZS5leHRlbmQodGhpcyx7b3duZXJEb2N1bWVudDp0LHN0YXJ0Q29udGFpbmVyOnQsZW5kQ29udGFpbmVyOnQsY29tbW9uQW5jZXN0b3JDb250YWluZXI6dCxzdGFydE9mZnNldDowLGVuZE9mZnNldDowLGNvbGxhcHNlZDohMH0pfSxzZXRTdGFydDpmdW5jdGlvbihlLHQpe3RoaXMuc3RhcnRDb250YWluZXI9ZSx0aGlzLnN0YXJ0T2Zmc2V0PXQsaSh0aGlzKSxuKHRoaXMsITApfSxzZXRFbmQ6ZnVuY3Rpb24oZSx0KXt0aGlzLmVuZENvbnRhaW5lcj1lLHRoaXMuZW5kT2Zmc2V0PXQsaSh0aGlzKSxuKHRoaXMsITEpfSxzZXRTdGFydEJlZm9yZTpmdW5jdGlvbihlKXt0aGlzLnNldFN0YXJ0KGUucGFyZW50Tm9kZSxwKGUpKX0sc2V0U3RhcnRBZnRlcjpmdW5jdGlvbihlKXt0aGlzLnNldFN0YXJ0KGUucGFyZW50Tm9kZSxwKGUpKzEpfSxzZXRFbmRCZWZvcmU6ZnVuY3Rpb24oZSl7dGhpcy5zZXRFbmQoZS5wYXJlbnROb2RlLHAoZSkpfSxzZXRFbmRBZnRlcjpmdW5jdGlvbihlKXt0aGlzLnNldEVuZChlLnBhcmVudE5vZGUscChlKSsxKX0sc2VsZWN0Tm9kZTpmdW5jdGlvbihlKXt0aGlzLnNldFN0YXJ0QmVmb3JlKGUpLHRoaXMuc2V0RW5kQWZ0ZXIoZSl9LHNlbGVjdE5vZGVDb250ZW50czpmdW5jdGlvbihlKXt0aGlzLnNldFN0YXJ0KGUsMCksdGhpcy5zZXRFbmQoZSxlWzE9PT1lLm5vZGVUeXBlP1wiY2hpbGROb2Rlc1wiOlwibm9kZVZhbHVlXCJdLmxlbmd0aCl9LGNvbGxhcHNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZT90LnNldEVuZCh0LnN0YXJ0Q29udGFpbmVyLHQuc3RhcnRPZmZzZXQpOnQuc2V0U3RhcnQodC5lbmRDb250YWluZXIsdC5lbmRPZmZzZXQpfSxkZWxldGVDb250ZW50czpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmNsb25lUmFuZ2UoKTtlLnN0YXJ0Q29udGFpbmVyIT1lLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyJiZlLnNldFN0YXJ0QWZ0ZXIoZyhlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyLGUuc3RhcnRDb250YWluZXIpKSxlLmNvbGxhcHNlKCEwKSxmdW5jdGlvbiBuKGUpe2Zvcig7ZS5uZXh0KCk7KWUuaGFzUGFydGlhbFN1YnRyZWUoKT9uKGUuZ2V0U3VidHJlZUl0ZXJhdG9yKCkpOmUucmVtb3ZlKCl9KG5ldyB3KHQpKX0sY2xvbmVDb250ZW50czpmdW5jdGlvbigpe3ZhciBlPVQuZG9jdW1lbnRGcm9tUmFuZ2UodGhpcyk7cmV0dXJuIGZ1bmN0aW9uIHQobil7Zm9yKHZhciBpLHI9ZS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7aT1uLm5leHQoKTspaT1pLmNsb25lTm9kZSghbi5oYXNQYXJ0aWFsU3VidHJlZSgpKSxuLmhhc1BhcnRpYWxTdWJ0cmVlKCkmJmkuYXBwZW5kQ2hpbGQodChuLmdldFN1YnRyZWVJdGVyYXRvcigpKSksci5hcHBlbmRDaGlsZChpKTtyZXR1cm4gcn0obmV3IHcodGhpcykpfSxleHRyYWN0Q29udGVudHM6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10LmNsb25lUmFuZ2UoKTtyZXR1cm4gdC5zdGFydENvbnRhaW5lciE9dC5jb21tb25BbmNlc3RvckNvbnRhaW5lciYmdC5zZXRTdGFydEFmdGVyKGcodC5jb21tb25BbmNlc3RvckNvbnRhaW5lcix0LnN0YXJ0Q29udGFpbmVyKSksdC5jb2xsYXBzZSghMCksZT1ULmRvY3VtZW50RnJvbVJhbmdlKHQpLGZ1bmN0aW9uIGkobil7Zm9yKHZhciByLG89ZS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7cj1uLm5leHQoKTspbi5oYXNQYXJ0aWFsU3VidHJlZSgpPyhyPXIuY2xvbmVOb2RlKCExKSxyLmFwcGVuZENoaWxkKGkobi5nZXRTdWJ0cmVlSXRlcmF0b3IoKSkpKTpuLnJlbW92ZSh0Lm9yaWdpbmFsUmFuZ2UpLG8uYXBwZW5kQ2hpbGQocik7cmV0dXJuIG99KG5ldyB3KG4pKX0saW5zZXJ0Tm9kZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2YodC5zdGFydENvbnRhaW5lcik/KHQuc3RhcnRPZmZzZXQhPXQuc3RhcnRDb250YWluZXIubm9kZVZhbHVlLmxlbmd0aCYmaC5zcGxpdERhdGFOb2RlKHQuc3RhcnRDb250YWluZXIsdC5zdGFydE9mZnNldCksaC5pbnNlcnRBZnRlcihlLHQuc3RhcnRDb250YWluZXIpKTpoLmluc2VydEF0KHQuc3RhcnRDb250YWluZXIsZSx0LnN0YXJ0T2Zmc2V0KSx0LnNldFN0YXJ0KHQuc3RhcnRDb250YWluZXIsdC5zdGFydE9mZnNldCl9LGNsb25lUmFuZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gZS5leHRlbmQobmV3IHkodGhpcy5vd25lckRvY3VtZW50KSx7c3RhcnRDb250YWluZXI6dGhpcy5zdGFydENvbnRhaW5lcixlbmRDb250YWluZXI6dGhpcy5lbmRDb250YWluZXIsY29tbW9uQW5jZXN0b3JDb250YWluZXI6dGhpcy5jb21tb25BbmNlc3RvckNvbnRhaW5lcixzdGFydE9mZnNldDp0aGlzLnN0YXJ0T2Zmc2V0LGVuZE9mZnNldDp0aGlzLmVuZE9mZnNldCxjb2xsYXBzZWQ6dGhpcy5jb2xsYXBzZWQsb3JpZ2luYWxSYW5nZTp0aGlzfSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zdGFydENvbnRhaW5lci5ub2RlTmFtZSx0PXRoaXMuZW5kQ29udGFpbmVyLm5vZGVOYW1lO3JldHVybihcIiN0ZXh0XCI9PWU/dGhpcy5zdGFydENvbnRhaW5lci5ub2RlVmFsdWU6ZSkrXCIoXCIrdGhpcy5zdGFydE9mZnNldCtcIikgOiBcIisoXCIjdGV4dFwiPT10P3RoaXMuZW5kQ29udGFpbmVyLm5vZGVWYWx1ZTp0KStcIihcIit0aGlzLmVuZE9mZnNldCtcIilcIn19KSx3PWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQpe2lmKGUuZXh0ZW5kKHRoaXMse3JhbmdlOnQsX2N1cnJlbnQ6bnVsbCxfbmV4dDpudWxsLF9lbmQ6bnVsbH0pLCF0LmNvbGxhcHNlZCl7dmFyIG49dC5jb21tb25BbmNlc3RvckNvbnRhaW5lcjt0aGlzLl9uZXh0PXQuc3RhcnRDb250YWluZXIhPW58fGYodC5zdGFydENvbnRhaW5lcik/ZyhuLHQuc3RhcnRDb250YWluZXIpOnQuc3RhcnRDb250YWluZXIuY2hpbGROb2Rlc1t0LnN0YXJ0T2Zmc2V0XSx0aGlzLl9lbmQ9dC5lbmRDb250YWluZXIhPW58fGYodC5lbmRDb250YWluZXIpP2cobix0LmVuZENvbnRhaW5lcikubmV4dFNpYmxpbmc6dC5lbmRDb250YWluZXIuY2hpbGROb2Rlc1t0LmVuZE9mZnNldF19fSxoYXNOZXh0OmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9uZXh0fSxuZXh0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX2N1cnJlbnQ9ZS5fbmV4dDtyZXR1cm4gZS5fbmV4dD1lLl9jdXJyZW50JiZlLl9jdXJyZW50Lm5leHRTaWJsaW5nIT1lLl9lbmQ/ZS5fY3VycmVudC5uZXh0U2libGluZzpudWxsLGYoZS5fY3VycmVudCkmJihlLnJhbmdlLmVuZENvbnRhaW5lcj09ZS5fY3VycmVudCYmKHQ9dC5jbG9uZU5vZGUoITApLHQuZGVsZXRlRGF0YShlLnJhbmdlLmVuZE9mZnNldCx0Lmxlbmd0aC1lLnJhbmdlLmVuZE9mZnNldCkpLGUucmFuZ2Uuc3RhcnRDb250YWluZXI9PWUuX2N1cnJlbnQmJih0PXQuY2xvbmVOb2RlKCEwKSx0LmRlbGV0ZURhdGEoMCxlLnJhbmdlLnN0YXJ0T2Zmc2V0KSkpLHR9LHRyYXZlcnNlOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gaS5fY3VycmVudD1pLl9uZXh0LGkuX25leHQ9aS5fY3VycmVudCYmaS5fY3VycmVudC5uZXh0U2libGluZyE9aS5fZW5kP2kuX2N1cnJlbnQubmV4dFNpYmxpbmc6bnVsbCxpLl9jdXJyZW50fWZvcih2YXIgbixpPXRoaXM7bj10KCk7KWkuaGFzUGFydGlhbFN1YnRyZWUoKT9pLmdldFN1YnRyZWVJdGVyYXRvcigpLnRyYXZlcnNlKGUpOmUobik7cmV0dXJuIG59LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGE9dGhpcyxzPWEucmFuZ2Uuc3RhcnRDb250YWluZXI9PWEuX2N1cnJlbnQsbD1hLnJhbmdlLmVuZENvbnRhaW5lcj09YS5fY3VycmVudDtmKGEuX2N1cnJlbnQpJiYoc3x8bCk/KHQ9cz9hLnJhbmdlLnN0YXJ0T2Zmc2V0OjAsbj1sP2EucmFuZ2UuZW5kT2Zmc2V0OmEuX2N1cnJlbnQubGVuZ3RoLGk9bi10LGUmJihzfHxsKSYmKGEuX2N1cnJlbnQ9PWUuc3RhcnRDb250YWluZXImJmUuc3RhcnRPZmZzZXQ+PXQmJihlLnN0YXJ0T2Zmc2V0LT1pKSxhLl9jdXJyZW50PT1lLmVuZENvbnRhaW5lciYmZS5lbmRPZmZzZXQ+PW4mJihlLmVuZE9mZnNldC09aSkpLGEuX2N1cnJlbnQuZGVsZXRlRGF0YSh0LGkpKToocj1hLl9jdXJyZW50LnBhcmVudE5vZGUsIWV8fGEucmFuZ2Uuc3RhcnRDb250YWluZXIhPXImJmEucmFuZ2UuZW5kQ29udGFpbmVyIT1yfHwobz1wKGEuX2N1cnJlbnQpLHI9PWUuc3RhcnRDb250YWluZXImJmUuc3RhcnRPZmZzZXQ+PW8mJihlLnN0YXJ0T2Zmc2V0LT0xKSxyPT1lLmVuZENvbnRhaW5lciYmZS5lbmRPZmZzZXQ+byYmKGUuZW5kT2Zmc2V0LT0xKSksaC5yZW1vdmUoYS5fY3VycmVudCkpfSxoYXNQYXJ0aWFsU3VidHJlZTpmdW5jdGlvbigpe3JldHVybiFmKHRoaXMuX2N1cnJlbnQpJiYoaC5pc0FuY2VzdG9yT3JTZWxmKHRoaXMuX2N1cnJlbnQsdGhpcy5yYW5nZS5zdGFydENvbnRhaW5lcil8fGguaXNBbmNlc3Rvck9yU2VsZih0aGlzLl9jdXJyZW50LHRoaXMucmFuZ2UuZW5kQ29udGFpbmVyKSl9LGdldFN1YnRyZWVJdGVyYXRvcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLnJhbmdlLmNsb25lUmFuZ2UoKTtyZXR1cm4gdC5zZWxlY3ROb2RlQ29udGVudHMoZS5fY3VycmVudCksaC5pc0FuY2VzdG9yT3JTZWxmKGUuX2N1cnJlbnQsZS5yYW5nZS5zdGFydENvbnRhaW5lcikmJnQuc2V0U3RhcnQoZS5yYW5nZS5zdGFydENvbnRhaW5lcixlLnJhbmdlLnN0YXJ0T2Zmc2V0KSxoLmlzQW5jZXN0b3JPclNlbGYoZS5fY3VycmVudCxlLnJhbmdlLmVuZENvbnRhaW5lcikmJnQuc2V0RW5kKGUucmFuZ2UuZW5kQ29udGFpbmVyLGUucmFuZ2UuZW5kT2Zmc2V0KSxuZXcgdyh0KX19KSxiPWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMub3duZXJEb2N1bWVudD1lLHRoaXMucmFuZ2VDb3VudD0xfSxhZGRSYW5nZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm93bmVyRG9jdW1lbnQuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKTtvKHQsZSwhMSksbyh0LGUsITApLHQuc2VsZWN0KCl9LHJlbW92ZUFsbFJhbmdlczpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3duZXJEb2N1bWVudC5zZWxlY3Rpb247XCJOb25lXCIhPWUudHlwZSYmZS5lbXB0eSgpfSxnZXRSYW5nZUF0OmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGksbyxzLGwsYyxkPW5ldyB5KHRoaXMub3duZXJEb2N1bWVudCksdT10aGlzLm93bmVyRG9jdW1lbnQuc2VsZWN0aW9uO3RyeXtpZihlPXUuY3JlYXRlUmFuZ2UoKSx0PWUuaXRlbT9lLml0ZW0oMCk6ZS5wYXJlbnRFbGVtZW50KCksdC5vd25lckRvY3VtZW50IT10aGlzLm93bmVyRG9jdW1lbnQpcmV0dXJuIGR9Y2F0Y2goaCl7cmV0dXJuIGR9aWYoXCJDb250cm9sXCI9PXUudHlwZSlkLnNlbGVjdE5vZGUoZS5pdGVtKDApKTtlbHNlIGlmKG49cihlKSxhKGUsZCxuLCEwKSxhKGUsZCxuLCExKSw5PT1kLnN0YXJ0Q29udGFpbmVyLm5vZGVUeXBlJiZkLnNldFN0YXJ0KGQuZW5kQ29udGFpbmVyLGQuc3RhcnRPZmZzZXQpLDk9PWQuZW5kQ29udGFpbmVyLm5vZGVUeXBlJiZkLnNldEVuZChkLnN0YXJ0Q29udGFpbmVyLGQuZW5kT2Zmc2V0KSwwPT09ZS5jb21wYXJlRW5kUG9pbnRzKFwiU3RhcnRUb0VuZFwiLGUpJiZkLmNvbGxhcHNlKCExKSxpPWQuc3RhcnRDb250YWluZXIsbz1kLmVuZENvbnRhaW5lcixzPXRoaXMub3duZXJEb2N1bWVudC5ib2R5LCEoZC5jb2xsYXBzZWR8fDAhPT1kLnN0YXJ0T2Zmc2V0fHxkLmVuZE9mZnNldCE9bShkLmVuZENvbnRhaW5lcil8fGk9PW8mJmYoaSkmJmkucGFyZW50Tm9kZT09cykpe2ZvcihsPSExLGM9ITE7MD09PXAoaSkmJmk9PWkucGFyZW50Tm9kZS5maXJzdENoaWxkJiZpIT1zOylpPWkucGFyZW50Tm9kZSxsPSEwO2Zvcig7cChvKT09bShvLnBhcmVudE5vZGUpLTEmJm89PW8ucGFyZW50Tm9kZS5sYXN0Q2hpbGQmJm8hPXM7KW89by5wYXJlbnROb2RlLGM9ITA7aT09cyYmbz09cyYmbCYmYyYmKGQuc2V0U3RhcnQoaSwwKSxkLnNldEVuZChvLG0ocykpKX1yZXR1cm4gZH19KSxrPWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMuZW51bWVyYXRlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZihoLmlzKGUsXCJpbWdcIil8fDM9PWUubm9kZVR5cGUmJighaC5pc1doaXRlc3BhY2UoZSl8fFwi77u/XCI9PWUubm9kZVZhbHVlKSluLnB1c2goZSk7ZWxzZSBmb3IoZT1lLmZpcnN0Q2hpbGQ7ZTspdChlKSxlPWUubmV4dFNpYmxpbmd9dmFyIG49W107cmV0dXJuIG5ldyB3KGUpLnRyYXZlcnNlKHQpLG59fX0pLHg9bC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO24ucmFuZ2U9ZSxuLnJvb3ROb2RlPVQuZG9jdW1lbnRGcm9tUmFuZ2UoZSksbi5ib2R5PXR8fG4uZ2V0RWRpdGFibGUoZSksXCJib2R5XCIhPWgubmFtZShuLmJvZHkpJiYobi5yb290Tm9kZT1uLmJvZHkpLG4uaHRtbD1uLmJvZHkuaW5uZXJIVE1MLG4uc3RhcnRDb250YWluZXI9bi5ub2RlVG9QYXRoKGUuc3RhcnRDb250YWluZXIpLG4uZW5kQ29udGFpbmVyPW4ubm9kZVRvUGF0aChlLmVuZENvbnRhaW5lciksbi5zdGFydE9mZnNldD1uLm9mZnNldChlLnN0YXJ0Q29udGFpbmVyLGUuc3RhcnRPZmZzZXQpLG4uZW5kT2Zmc2V0PW4ub2Zmc2V0KGUuZW5kQ29udGFpbmVyLGUuZW5kT2Zmc2V0KX0saW5kZXg6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49MCxpPWUubm9kZVR5cGU7ZT1lLnByZXZpb3VzU2libGluZzspdD1lLm5vZGVUeXBlLCgzIT10fHxpIT10KSYmbisrLGk9dDtyZXR1cm4gbn0sZ2V0RWRpdGFibGU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuY29tbW9uQW5jZXN0b3JDb250YWluZXI7dCYmKDM9PXQubm9kZVR5cGV8fHQuYXR0cmlidXRlcyYmIXQuYXR0cmlidXRlcy5jb250ZW50RWRpdGFibGUpOyl0PXQucGFyZW50Tm9kZTtyZXR1cm4gdH0scmVzdG9yZUh0bWw6ZnVuY3Rpb24oKXt0aGlzLmJvZHkuaW5uZXJIVE1MPXRoaXMuaHRtbH0sb2Zmc2V0OmZ1bmN0aW9uKGUsdCl7aWYoMz09ZS5ub2RlVHlwZSlmb3IoOyhlPWUucHJldmlvdXNTaWJsaW5nKSYmMz09ZS5ub2RlVHlwZTspdCs9ZS5ub2RlVmFsdWUubGVuZ3RoO3JldHVybiB0fSxub2RlVG9QYXRoOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXTtlIT10aGlzLnJvb3ROb2RlOyl0LnB1c2godGhpcy5pbmRleChlKSksZT1lLnBhcmVudE5vZGU7cmV0dXJuIHR9LHRvUmFuZ2VQb2ludDpmdW5jdGlvbihlLHQsbixpKXtmb3IodmFyIHI9dGhpcy5yb290Tm9kZSxvPW4ubGVuZ3RoLGE9aTtvLS07KXI9ci5jaGlsZE5vZGVzW25bb11dO2Zvcig7ciYmMz09ci5ub2RlVHlwZSYmYT5yLm5vZGVWYWx1ZS5sZW5ndGg7KWEtPXIubm9kZVZhbHVlLmxlbmd0aCxyPXIubmV4dFNpYmxpbmc7ciYmYT49MCYmZVt0P1wic2V0U3RhcnRcIjpcInNldEVuZFwiXShyLGEpfSx0b1JhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUucmFuZ2UuY2xvbmVSYW5nZSgpO3JldHVybiBlLnRvUmFuZ2VQb2ludCh0LCEwLGUuc3RhcnRDb250YWluZXIsZS5zdGFydE9mZnNldCksZS50b1JhbmdlUG9pbnQodCwhMSxlLmVuZENvbnRhaW5lcixlLmVuZE9mZnNldCksdH19KSxDPWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7dGhpcy5jYXJldD1udWxsfSxhZGRDYXJldDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0LmNhcmV0PWguY3JlYXRlKFQuZG9jdW1lbnRGcm9tUmFuZ2UoZSksXCJzcGFuXCIse2NsYXNzTmFtZTpcImstbWFya2VyXCJ9KSxlLmluc2VydE5vZGUodC5jYXJldCksZS5zZWxlY3ROb2RlKHQuY2FyZXQpLHQuY2FyZXR9LHJlbW92ZUNhcmV0OmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG89dGhpcyxhPW8uY2FyZXQucHJldmlvdXNTaWJsaW5nLHM9MDthJiYocz1mKGEpP2Eubm9kZVZhbHVlLmxlbmd0aDpwKGEpKSx0PW8uY2FyZXQucGFyZW50Tm9kZSxuPWE/cChhKTowLGgucmVtb3ZlKG8uY2FyZXQpLHYodCksaT10LmNoaWxkTm9kZXNbbl0sZihpKT9lLnNldFN0YXJ0KGkscyk6aT8ocj1oLmxhc3RUZXh0Tm9kZShpKSxyP2Uuc2V0U3RhcnQocixyLm5vZGVWYWx1ZS5sZW5ndGgpOmVbYT9cInNldFN0YXJ0QWZ0ZXJcIjpcInNldFN0YXJ0QmVmb3JlXCJdKGkpKToodS5tc2llfHx0LmlubmVySFRNTHx8KHQuaW5uZXJIVE1MPSc8YnIgX21vel9kaXJ0eT1cIlwiIC8+JyksZS5zZWxlY3ROb2RlQ29udGVudHModCkpLGUuY29sbGFwc2UoITApfSxhZGQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcyxvPWUuY29sbGFwc2VkJiYhVC5pc0V4cGFuZGFibGUoZSksYT1ULmRvY3VtZW50RnJvbVJhbmdlKGUpO3JldHVybiB0JiZlLmNvbGxhcHNlZCYmKHIuYWRkQ2FyZXQoZSksZT1ULmV4cGFuZChlKSksbj1lLmNsb25lUmFuZ2UoKSxuLmNvbGxhcHNlKCExKSxyLmVuZD1oLmNyZWF0ZShhLFwic3BhblwiLHtjbGFzc05hbWU6XCJrLW1hcmtlclwifSksbi5pbnNlcnROb2RlKHIuZW5kKSxuPWUuY2xvbmVSYW5nZSgpLG4uY29sbGFwc2UoITApLHIuc3RhcnQ9ci5lbmQuY2xvbmVOb2RlKCEwKSxuLmluc2VydE5vZGUoci5zdGFydCksci5fcmVtb3ZlRGVhZE1hcmtlcnMoci5zdGFydCxyLmVuZCksbyYmKGk9YS5jcmVhdGVUZXh0Tm9kZShcIu+7v1wiKSxoLmluc2VydEFmdGVyKGkuY2xvbmVOb2RlKCksci5zdGFydCksaC5pbnNlcnRCZWZvcmUoaSxyLmVuZCkpLGUuc2V0U3RhcnRCZWZvcmUoci5zdGFydCksZS5zZXRFbmRBZnRlcihyLmVuZCksdihlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKSxlfSxfcmVtb3ZlRGVhZE1hcmtlcnM6ZnVuY3Rpb24oZSx0KXtlLnByZXZpb3VzU2libGluZyYmXCLvu79cIj09ZS5wcmV2aW91c1NpYmxpbmcubm9kZVZhbHVlJiZoLnJlbW92ZShlLnByZXZpb3VzU2libGluZyksdC5uZXh0U2libGluZyYmXCLvu79cIj09dC5uZXh0U2libGluZy5ub2RlVmFsdWUmJmgucmVtb3ZlKHQubmV4dFNpYmxpbmcpfSxyZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhLHMsbCxjLGQsdSxnLG0sXz10aGlzLHk9Xy5zdGFydCx3PV8uZW5kO2Zvcih2KGUuY29tbW9uQW5jZXN0b3JDb250YWluZXIpOyF5Lm5leHRTaWJsaW5nJiZ5LnBhcmVudE5vZGU7KXk9eS5wYXJlbnROb2RlO2Zvcig7IXcucHJldmlvdXNTaWJsaW5nJiZ3LnBhcmVudE5vZGU7KXc9dy5wYXJlbnROb2RlO2lmKHQ9eS5wcmV2aW91c1NpYmxpbmcmJjM9PXkucHJldmlvdXNTaWJsaW5nLm5vZGVUeXBlJiZ5Lm5leHRTaWJsaW5nJiYzPT15Lm5leHRTaWJsaW5nLm5vZGVUeXBlLG49dy5wcmV2aW91c1NpYmxpbmcmJjM9PXcucHJldmlvdXNTaWJsaW5nLm5vZGVUeXBlJiZ3Lm5leHRTaWJsaW5nJiYzPT13Lm5leHRTaWJsaW5nLm5vZGVUeXBlLGk9dCYmbix5PXkubmV4dFNpYmxpbmcsdz13LnByZXZpb3VzU2libGluZyxyPSExLG89ITEseT09Xy5lbmQmJihvPSEhXy5zdGFydC5wcmV2aW91c1NpYmxpbmcseT13PV8uc3RhcnQucHJldmlvdXNTaWJsaW5nfHxfLmVuZC5uZXh0U2libGluZyxyPSEwKSxoLnJlbW92ZShfLnN0YXJ0KSxoLnJlbW92ZShfLmVuZCksIXl8fCF3KXJldHVybiBlLnNlbGVjdE5vZGVDb250ZW50cyhlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKSx2b2lkIGUuY29sbGFwc2UoITApO2lmKGE9cj9mKHkpP3kubm9kZVZhbHVlLmxlbmd0aDp5LmNoaWxkTm9kZXMubGVuZ3RoOjAscz1mKHcpP3cubm9kZVZhbHVlLmxlbmd0aDp3LmNoaWxkTm9kZXMubGVuZ3RoLDM9PXkubm9kZVR5cGUpZm9yKDt5LnByZXZpb3VzU2libGluZyYmMz09eS5wcmV2aW91c1NpYmxpbmcubm9kZVR5cGU7KXk9eS5wcmV2aW91c1NpYmxpbmcsYSs9eS5ub2RlVmFsdWUubGVuZ3RoO2lmKDM9PXcubm9kZVR5cGUpZm9yKDt3LnByZXZpb3VzU2libGluZyYmMz09dy5wcmV2aW91c1NpYmxpbmcubm9kZVR5cGU7KXc9dy5wcmV2aW91c1NpYmxpbmcscys9dy5ub2RlVmFsdWUubGVuZ3RoO2ZvcihsPXAoeSksYz15LnBhcmVudE5vZGUsZD1wKHcpLHU9dy5wYXJlbnROb2RlLGc9eTtnLnByZXZpb3VzU2libGluZztnPWcucHJldmlvdXNTaWJsaW5nKTM9PWcubm9kZVR5cGUmJjM9PWcucHJldmlvdXNTaWJsaW5nLm5vZGVUeXBlJiZsLS07Zm9yKG09dzttLnByZXZpb3VzU2libGluZzttPW0ucHJldmlvdXNTaWJsaW5nKTM9PW0ubm9kZVR5cGUmJjM9PW0ucHJldmlvdXNTaWJsaW5nLm5vZGVUeXBlJiZkLS07dihjKSwzPT15Lm5vZGVUeXBlJiYoeT1jLmNoaWxkTm9kZXNbbF0pLHYodSksMz09dy5ub2RlVHlwZSYmKHc9dS5jaGlsZE5vZGVzW2RdKSxyPygzPT15Lm5vZGVUeXBlP2Uuc2V0U3RhcnQoeSxhKTplW28/XCJzZXRTdGFydEFmdGVyXCI6XCJzZXRTdGFydEJlZm9yZVwiXSh5KSxlLmNvbGxhcHNlKCEwKSk6KDM9PXkubm9kZVR5cGU/ZS5zZXRTdGFydCh5LGEpOmUuc2V0U3RhcnRCZWZvcmUoeSksMz09dy5ub2RlVHlwZT9lLnNldEVuZCh3LHMpOmUuc2V0RW5kQWZ0ZXIodykpLF8uY2FyZXQmJl8ucmVtb3ZlQ2FyZXQoZSl9fSksUz0vW1xcdTAwMDktXFx1MDAwZF18XFx1MDAyMHxcXHUwMGEwfFxcdWZlZmZ8XFwufCx8O3w6fCF8XFwofFxcKXxcXD8vLFQ9e25vZGVzOmZ1bmN0aW9uKGUpe3ZhciB0PVQudGV4dE5vZGVzKGUpO3JldHVybiB0Lmxlbmd0aHx8KGUuc2VsZWN0Tm9kZUNvbnRlbnRzKGUuY29tbW9uQW5jZXN0b3JDb250YWluZXIpLHQ9VC50ZXh0Tm9kZXMoZSksdC5sZW5ndGh8fCh0PWguc2lnbmlmaWNhbnRDaGlsZE5vZGVzKGUuY29tbW9uQW5jZXN0b3JDb250YWluZXIpKSksdH0sdGV4dE5vZGVzOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgayhlKS5lbnVtZXJhdGUoKX0sZG9jdW1lbnRGcm9tUmFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdGFydENvbnRhaW5lcjtyZXR1cm4gOT09dC5ub2RlVHlwZT90OnQub3duZXJEb2N1bWVudH0sY3JlYXRlUmFuZ2U6ZnVuY3Rpb24oZSl7cmV0dXJuIHUubXNpZSYmOT51LnZlcnNpb24/bmV3IHkoZSk6ZS5jcmVhdGVSYW5nZSgpfSxzZWxlY3RSYW5nZTpmdW5jdGlvbihlKXt2YXIgdCxuPVQuaW1hZ2UoZSk7biYmKGUuc2V0U3RhcnRBZnRlcihuKSxlLnNldEVuZEFmdGVyKG4pKSx0PV8uc2VsZWN0aW9uRnJvbVJhbmdlKGUpLHQucmVtb3ZlQWxsUmFuZ2VzKCksdC5hZGRSYW5nZShlKX0sc3RyaW5naWZ5OmZ1bmN0aW9uKGUpe3JldHVybiBzLmZvcm1hdChcInswfTp7MX0gLSB7Mn06ezN9XCIsaC5uYW1lKGUuc3RhcnRDb250YWluZXIpLGUuc3RhcnRPZmZzZXQsaC5uYW1lKGUuZW5kQ29udGFpbmVyKSxlLmVuZE9mZnNldCl9LHNwbGl0OmZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiBpKGkpe3ZhciByLG89ZS5jbG9uZVJhbmdlKCk7by5jb2xsYXBzZShpKSxvW2k/XCJzZXRTdGFydEJlZm9yZVwiOlwic2V0RW5kQWZ0ZXJcIl0odCkscj1vLmV4dHJhY3RDb250ZW50cygpLG4mJihyPWgudHJpbShyKSksaFtpP1wiaW5zZXJ0QmVmb3JlXCI6XCJpbnNlcnRBZnRlclwiXShyLHQpfWkoITApLGkoITEpfSxtYXBBbGw6ZnVuY3Rpb24odCxuKXt2YXIgaT1bXTtyZXR1cm4gbmV3IHcodCkudHJhdmVyc2UoZnVuY3Rpb24odCl7dmFyIHI9bih0KTtyJiZlLmluQXJyYXkocixpKTwwJiZpLnB1c2gocil9KSxpfSxnZXRBbGw6ZnVuY3Rpb24oZSx0KXt2YXIgbj10O3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0JiYodD1mdW5jdGlvbihlKXtyZXR1cm4gaC5pcyhlLG4pfSksVC5tYXBBbGwoZSxmdW5jdGlvbihlKXtyZXR1cm4gdChlKT9lOnZvaWQgMH0pfSxnZXRNYXJrZXJzOmZ1bmN0aW9uKGUpe3JldHVybiBULmdldEFsbChlLGZ1bmN0aW9uKGUpe3JldHVyblwiay1tYXJrZXJcIj09ZS5jbGFzc05hbWV9KX0saW1hZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9VC5nZXRBbGwoZSxcImltZ1wiKTtyZXR1cm4gMT09dC5sZW5ndGg/dFswXTp2b2lkIDB9LHdyYXBTZWxlY3RlZEVsZW1lbnRzOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXt2YXIgbixpPWguZ2V0Tm9kZUxlbmd0aCh0KTtpZihlPT1pKXJldHVybiEwO2ZvcihuPWU7aT5uO24rKylpZighaC5pbnNpZ25pZmljYW50KHQuY2hpbGROb2Rlc1tuXSkpcmV0dXJuITE7cmV0dXJuITB9Zm9yKHZhciBuPWguZWRpdGFibGVQYXJlbnQoZS5zdGFydENvbnRhaW5lciksaT1oLmVkaXRhYmxlUGFyZW50KGUuZW5kQ29udGFpbmVyKTswPT09ZS5zdGFydE9mZnNldCYmZS5zdGFydENvbnRhaW5lciE9bjspZS5zZXRTdGFydChlLnN0YXJ0Q29udGFpbmVyLnBhcmVudE5vZGUsaC5maW5kTm9kZUluZGV4KGUuc3RhcnRDb250YWluZXIpKTtmb3IoO3QoZS5lbmRPZmZzZXQsZS5lbmRDb250YWluZXIpJiZlLmVuZENvbnRhaW5lciE9aTspZS5zZXRFbmQoZS5lbmRDb250YWluZXIucGFyZW50Tm9kZSxoLmZpbmROb2RlSW5kZXgoZS5lbmRDb250YWluZXIpKzEpO3JldHVybiBlfSxleHBhbmQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbz1lLmNsb25lUmFuZ2UoKSxhPW8uc3RhcnRDb250YWluZXIuY2hpbGROb2Rlc1swPT09by5zdGFydE9mZnNldD8wOm8uc3RhcnRPZmZzZXQtMV0scz1vLmVuZENvbnRhaW5lci5jaGlsZE5vZGVzW28uZW5kT2Zmc2V0XTtyZXR1cm4gZihhKSYmZihzKT8odD1hLm5vZGVWYWx1ZSxuPXMubm9kZVZhbHVlLHQmJm4/KGk9dC5zcGxpdChcIlwiKS5yZXZlcnNlKCkuam9pbihcIlwiKS5zZWFyY2goUykscj1uLnNlYXJjaChTKSxpJiZyPyhyPS0xPT1yP24ubGVuZ3RoOnIsaT0tMT09aT8wOnQubGVuZ3RoLWksby5zZXRTdGFydChhLGkpLG8uc2V0RW5kKHMsciksbyk6byk6byk6b30saXNFeHBhbmRhYmxlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYSxzPWUuc3RhcnRDb250YWluZXIsbD1ULmRvY3VtZW50RnJvbVJhbmdlKGUpO3JldHVybiBzPT1sfHxzPT1sLmJvZHk/ITE6KHQ9ZS5jbG9uZVJhbmdlKCksKG49cy5ub2RlVmFsdWUpPyhpPW4uc3Vic3RyaW5nKDAsdC5zdGFydE9mZnNldCkscj1uLnN1YnN0cmluZyh0LnN0YXJ0T2Zmc2V0KSxvPTAsYT0wLGkmJihvPWkuc3BsaXQoXCJcIikucmV2ZXJzZSgpLmpvaW4oXCJcIikuc2VhcmNoKFMpKSxyJiYoYT1yLnNlYXJjaChTKSksbyYmYSk6ITEpfX07YyhkLHtTZWxlY3Rpb25VdGlsczpfLFczQ1JhbmdlOnksUmFuZ2VJdGVyYXRvcjp3LFczQ1NlbGVjdGlvbjpiLFJhbmdlRW51bWVyYXRvcjprLFJlc3RvcmVQb2ludDp4LE1hcmtlcjpDLFJhbmdlVXRpbHM6VH0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCl7dmFyIG49ZS5zZWxlY3Rpb25SZXN0b3JlUG9pbnQ9bmV3IGQoZS5nZXRSYW5nZSgpKSxpPW5ldyBmKHQsbik7cmV0dXJuIGkuZWRpdG9yPWUsZS51bmRvUmVkb1N0YWNrLnB1c2goaSksbn12YXIgbj13aW5kb3cua2VuZG8saT1uLkNsYXNzLHI9bi51aS5lZGl0b3Isbz1yLkVkaXRvclV0aWxzLGE9by5yZWdpc3RlclRvb2wscz1yLkRvbSxsPXIuVG9vbCxjPXIuVG9vbFRlbXBsYXRlLGQ9ci5SZXN0b3JlUG9pbnQsdT1yLk1hcmtlcixoPWUuZXh0ZW5kLHA9aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zPWUsdGhpcy5yZXN0b3JlUG9pbnQ9bmV3IGQoZS5yYW5nZSksdGhpcy5tYXJrZXI9bmV3IHUsdGhpcy5mb3JtYXR0ZXI9ZS5mb3JtYXR0ZXJ9LGdldFJhbmdlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVzdG9yZVBvaW50LnRvUmFuZ2UoKX0sbG9ja1JhbmdlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm1hcmtlci5hZGQodGhpcy5nZXRSYW5nZSgpLGUpfSxyZWxlYXNlUmFuZ2U6ZnVuY3Rpb24oZSl7dGhpcy5tYXJrZXIucmVtb3ZlKGUpLHRoaXMuZWRpdG9yLnNlbGVjdFJhbmdlKGUpfSx1bmRvOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yZXN0b3JlUG9pbnQ7ZS5yZXN0b3JlSHRtbCgpLHRoaXMuZWRpdG9yLnNlbGVjdFJhbmdlKGUudG9SYW5nZSgpKX0scmVkbzpmdW5jdGlvbigpe3RoaXMuZXhlYygpfSxjcmVhdGVEaWFsb2c6ZnVuY3Rpb24odCxpKXt2YXIgcj10aGlzLmVkaXRvcjtyZXR1cm4gZSh0KS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KS5rZW5kb1dpbmRvdyhoKHt9LHIub3B0aW9ucy5kaWFsb2dPcHRpb25zLGkpKS5jbG9zZXN0KFwiLmstd2luZG93XCIpLnRvZ2dsZUNsYXNzKFwiay1ydGxcIixuLnN1cHBvcnQuaXNSdGwoci53cmFwcGVyKSkuZW5kKCl9LGV4ZWM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxvY2tSYW5nZSghMCk7dGhpcy5mb3JtYXR0ZXIuZWRpdG9yPXRoaXMuZWRpdG9yLHRoaXMuZm9ybWF0dGVyLnRvZ2dsZShlKSx0aGlzLnJlbGVhc2VSYW5nZShlKX19KSxmPWkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dGhpcy5ib2R5PWUuYm9keSx0aGlzLnN0YXJ0UmVzdG9yZVBvaW50PWUsdGhpcy5lbmRSZXN0b3JlUG9pbnQ9dH0scmVkbzpmdW5jdGlvbigpe3RoaXMuYm9keS5pbm5lckhUTUw9dGhpcy5lbmRSZXN0b3JlUG9pbnQuaHRtbCx0aGlzLmVkaXRvci5zZWxlY3RSYW5nZSh0aGlzLmVuZFJlc3RvcmVQb2ludC50b1JhbmdlKCkpfSx1bmRvOmZ1bmN0aW9uKCl7dGhpcy5ib2R5LmlubmVySFRNTD10aGlzLnN0YXJ0UmVzdG9yZVBvaW50Lmh0bWwsdGhpcy5lZGl0b3Iuc2VsZWN0UmFuZ2UodGhpcy5zdGFydFJlc3RvcmVQb2ludC50b1JhbmdlKCkpfX0pLGc9cC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7cC5mbi5pbml0LmNhbGwodGhpcyxlKSx0aGlzLm1hbmFnZXNVbmRvUmVkbz0hMH0sZXhlYzpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5lZGl0b3Isbj10aGlzLm9wdGlvbnMsaT1uLnJhbmdlLHI9dC5ib2R5LG89bmV3IGQoaSxyKSxhPW4uaHRtbHx8bi52YWx1ZXx8XCJcIjt0LnNlbGVjdFJhbmdlKGkpLHQuY2xpcGJvYXJkLnBhc3RlKGEsbiksbi5wb3N0UHJvY2VzcyYmbi5wb3N0UHJvY2Vzcyh0LHQuZ2V0UmFuZ2UoKSksZT1uZXcgZihvLG5ldyBkKHQuZ2V0UmFuZ2UoKSxyKSksZS5lZGl0b3I9dCx0LnVuZG9SZWRvU3RhY2sucHVzaChlKSx0LmZvY3VzKCl9fSksbT1sLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXQuZWRpdG9yLGk9dGhpcy5vcHRpb25zLG89aS5pdGVtcz9pLml0ZW1zOm4ub3B0aW9ucy5pbnNlcnRIdG1sO25ldyByLlNlbGVjdEJveChlLHtkYXRhU291cmNlOm8sZGF0YVRleHRGaWVsZDpcInRleHRcIixkYXRhVmFsdWVGaWVsZDpcInZhbHVlXCIsY2hhbmdlOmZ1bmN0aW9uKCl7bC5leGVjKG4sXCJpbnNlcnRIdG1sXCIsdGhpcy52YWx1ZSgpKX0sdGl0bGU6bi5vcHRpb25zLm1lc3NhZ2VzLmluc2VydEh0bWwsaGlnaGxpZ2h0Rmlyc3Q6ITF9KX0sY29tbWFuZDpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGcoZSl9LHVwZGF0ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmRhdGEoXCJrZW5kb1NlbGVjdEJveFwiKXx8ZS5maW5kKFwic2VsZWN0XCIpLmRhdGEoXCJrZW5kb1NlbGVjdEJveFwiKTt0LmNsb3NlKCksdC52YWx1ZSh0Lm9wdGlvbnMudGl0bGUpfX0pLHY9aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt0aGlzLnN0YWNrPVtdLHRoaXMuY3VycmVudENvbW1hbmRJbmRleD0tMX0scHVzaDpmdW5jdGlvbihlKXt0aGlzLnN0YWNrPXRoaXMuc3RhY2suc2xpY2UoMCx0aGlzLmN1cnJlbnRDb21tYW5kSW5kZXgrMSksdGhpcy5jdXJyZW50Q29tbWFuZEluZGV4PXRoaXMuc3RhY2sucHVzaChlKS0xfSx1bmRvOmZ1bmN0aW9uKCl7dGhpcy5jYW5VbmRvKCkmJnRoaXMuc3RhY2tbdGhpcy5jdXJyZW50Q29tbWFuZEluZGV4LS1dLnVuZG8oKX0scmVkbzpmdW5jdGlvbigpe3RoaXMuY2FuUmVkbygpJiZ0aGlzLnN0YWNrWysrdGhpcy5jdXJyZW50Q29tbWFuZEluZGV4XS5yZWRvKCl9LGNhblVuZG86ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdXJyZW50Q29tbWFuZEluZGV4Pj0wfSxjYW5SZWRvOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudENvbW1hbmRJbmRleCE9dGhpcy5zdGFjay5sZW5ndGgtMX19KSxfPWkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMuZWRpdG9yPWV9LGtleWRvd246ZnVuY3Rpb24obil7dmFyIGkscj10aGlzLG89ci5lZGl0b3IsYT1vLmtleWJvYXJkLHM9YS5pc1R5cGluZ0tleShuKSxsPWgoZS5FdmVudCgpLG4pO3JldHVybiByLmVkaXRvci50cmlnZ2VyKFwia2V5ZG93blwiLGwpLGwuaXNEZWZhdWx0UHJldmVudGVkKCk/KG4ucHJldmVudERlZmF1bHQoKSwhMCk6bC5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8IXN8fGEuaXNUeXBpbmdJblByb2dyZXNzKCk/ITE6KGk9by5nZXRSYW5nZSgpLHIuc3RhcnRSZXN0b3JlUG9pbnQ9bmV3IGQoaSksYS5zdGFydFR5cGluZyhmdW5jdGlvbigpe3IuZW5kUmVzdG9yZVBvaW50PXQobyxyLnN0YXJ0UmVzdG9yZVBvaW50KX0pLCEwKX0sa2V5dXA6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5lZGl0b3Iua2V5Ym9hcmQ7cmV0dXJuIHRoaXMuZWRpdG9yLnRyaWdnZXIoXCJrZXl1cFwiLGUpLHQuaXNUeXBpbmdJblByb2dyZXNzKCk/KHQuZW5kVHlwaW5nKCksITApOiExfX0pLHk9aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5lZGl0b3I9ZX0sa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgaSxyLG8sYSxsO2lmKGUua2V5Q29kZT09PW4ua2V5cy5CQUNLU1BBQ0Upe2lmKGk9dGhpcy5lZGl0b3Iscj1pLmdldFJhbmdlKCksbz1uLnN1cHBvcnQuYnJvd3Nlci5tc2llP1wiXCI6JzxiciBfbW96X2RpcnR5PVwiXCIgLz4nLHIuY29sbGFwc2VkKXJldHVybjtlLnByZXZlbnREZWZhdWx0KCksYT1uZXcgZChyKSxsPXIuY29tbW9uQW5jZXN0b3JDb250YWluZXIsL3QoYWJsZXxib2R5fHIpL2kudGVzdChzLm5hbWUobCkpJiZyLnNlbGVjdE5vZGUocy5jbG9zZXN0KGwsXCJ0YWJsZVwiKSksci5kZWxldGVDb250ZW50cygpLGw9ci5jb21tb25BbmNlc3RvckNvbnRhaW5lcixcInBcIj09PXMubmFtZShsKSYmXCJcIj09PWwuaW5uZXJIVE1MJiYobC5pbm5lckhUTUw9byxyLnNldFN0YXJ0KGwsMCksci5jb2xsYXBzZSghMCksaS5zZWxlY3RSYW5nZShyKSksdChpLGEpfX0sa2V5dXA6ZnVuY3Rpb24oKXt9fSksdz1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLmVkaXRvcj1lLHRoaXMuc3lzdGVtQ29tbWFuZElzSW5Qcm9ncmVzcz0hMX0sY3JlYXRlVW5kb0NvbW1hbmQ6ZnVuY3Rpb24oKXt0aGlzLnN0YXJ0UmVzdG9yZVBvaW50PXRoaXMuZW5kUmVzdG9yZVBvaW50PXQodGhpcy5lZGl0b3IsdGhpcy5zdGFydFJlc3RvcmVQb2ludCl9LGNoYW5nZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydFJlc3RvcmVQb2ludD90aGlzLnN0YXJ0UmVzdG9yZVBvaW50Lmh0bWwhPXRoaXMuZWRpdG9yLmJvZHkuaW5uZXJIVE1MOiExfSxrZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LmVkaXRvcixpPW4ua2V5Ym9hcmQ7cmV0dXJuIGkuaXNNb2RpZmllcktleShlKT8oaS5pc1R5cGluZ0luUHJvZ3Jlc3MoKSYmaS5lbmRUeXBpbmcoITApLHQuc3RhcnRSZXN0b3JlUG9pbnQ9bmV3IGQobi5nZXRSYW5nZSgpKSwhMCk6aS5pc1N5c3RlbShlKT8odC5zeXN0ZW1Db21tYW5kSXNJblByb2dyZXNzPSEwLHQuY2hhbmdlZCgpJiYodC5zeXN0ZW1Db21tYW5kSXNJblByb2dyZXNzPSExLHQuY3JlYXRlVW5kb0NvbW1hbmQoKSksITApOiExfSxrZXl1cDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIGUuc3lzdGVtQ29tbWFuZElzSW5Qcm9ncmVzcyYmZS5jaGFuZ2VkKCk/KGUuc3lzdGVtQ29tbWFuZElzSW5Qcm9ncmVzcz0hMSxlLmNyZWF0ZVVuZG9Db21tYW5kKCksITApOiExfX0pLGI9aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5oYW5kbGVycz1lLHRoaXMudHlwaW5nSW5Qcm9ncmVzcz0hMX0saXNDaGFyYWN0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGU+PTQ4JiY5MD49ZXx8ZT49OTYmJjExMT49ZXx8ZT49MTg2JiYxOTI+PWV8fGU+PTIxOSYmMjIyPj1lfHwyMjk9PWV9LHRvb2xGcm9tU2hvcnRjdXQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG89U3RyaW5nLmZyb21DaGFyQ29kZShuLmtleUNvZGUpO2ZvcihpIGluIHQpaWYocj1lLmV4dGVuZCh7Y3RybDohMSxhbHQ6ITEsc2hpZnQ6ITF9LHRbaV0ub3B0aW9ucyksKHIua2V5PT1vfHxyLmtleT09bi5rZXlDb2RlKSYmci5jdHJsPT1uLmN0cmxLZXkmJnIuYWx0PT1uLmFsdEtleSYmci5zaGlmdD09bi5zaGlmdEtleSlyZXR1cm4gaX0saXNUeXBpbmdLZXk6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5rZXlDb2RlO3JldHVybiB0aGlzLmlzQ2hhcmFjdGVyKHQpJiYhZS5jdHJsS2V5JiYhZS5hbHRLZXl8fDMyPT10fHwxMz09dHx8OD09dHx8NDY9PXQmJiFlLnNoaWZ0S2V5JiYhZS5jdHJsS2V5JiYhZS5hbHRLZXl9LGlzTW9kaWZpZXJLZXk6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5rZXlDb2RlO3JldHVybiAxNz09dCYmIWUuc2hpZnRLZXkmJiFlLmFsdEtleXx8MTY9PXQmJiFlLmN0cmxLZXkmJiFlLmFsdEtleXx8MTg9PXQmJiFlLmN0cmxLZXkmJiFlLnNoaWZ0S2V5fSxpc1N5c3RlbTpmdW5jdGlvbihlKXtyZXR1cm4gNDY9PWUua2V5Q29kZSYmZS5jdHJsS2V5JiYhZS5hbHRLZXkmJiFlLnNoaWZ0S2V5fSxzdGFydFR5cGluZzpmdW5jdGlvbihlKXt0aGlzLm9uRW5kVHlwaW5nPWUsdGhpcy50eXBpbmdJblByb2dyZXNzPSEwfSxzdG9wVHlwaW5nOmZ1bmN0aW9uKCl7dGhpcy50eXBpbmdJblByb2dyZXNzJiZ0aGlzLm9uRW5kVHlwaW5nJiZ0aGlzLm9uRW5kVHlwaW5nKCksdGhpcy50eXBpbmdJblByb2dyZXNzPSExfSxlbmRUeXBpbmc6ZnVuY3Rpb24odCl7dmFyIG49dGhpcztuLmNsZWFyVGltZW91dCgpLHQ/bi5zdG9wVHlwaW5nKCk6bi50aW1lb3V0PXdpbmRvdy5zZXRUaW1lb3V0KGUucHJveHkobi5zdG9wVHlwaW5nLG4pLDFlMyl9LGlzVHlwaW5nSW5Qcm9ncmVzczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGluZ0luUHJvZ3Jlc3N9LGNsZWFyVGltZW91dDpmdW5jdGlvbigpe3dpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KX0sbm90aWZ5OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzLmhhbmRsZXJzO2ZvcihuPTA7aS5sZW5ndGg+biYmIWlbbl1bdF0oZSk7bisrKTt9LGtleWRvd246ZnVuY3Rpb24oZSl7dGhpcy5ub3RpZnkoZSxcImtleWRvd25cIil9LGtleXVwOmZ1bmN0aW9uKGUpe3RoaXMubm90aWZ5KGUsXCJrZXl1cFwiKX19KSxrPWkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMuZWRpdG9yPWUsdGhpcy5jbGVhbmVycz1bbmV3IEMsbmV3IFMsbmV3IFRdfSxodG1sVG9GcmFnbWVudDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmVkaXRvcixuPXQuZG9jdW1lbnQsaT1zLmNyZWF0ZShuLFwiZGl2XCIpLHI9bi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Zm9yKGkuaW5uZXJIVE1MPWU7aS5maXJzdENoaWxkOylyLmFwcGVuZENoaWxkKGkuZmlyc3RDaGlsZCk7cmV0dXJuIHJ9LGlzQmxvY2s6ZnVuY3Rpb24oZSl7cmV0dXJuLzwoZGl2fHB8dWx8b2x8dGFibGV8aFsxLTZdKS9pLnRlc3QoZSl9LF9zdGFydE1vZGlmaWNhdGlvbjpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLmVkaXRvcjtpZighdGhpcy5faW5Qcm9ncmVzcylyZXR1cm4gdGhpcy5faW5Qcm9ncmVzcz0hMCxlPW4uZ2V0UmFuZ2UoKSx0PW5ldyBkKGUpLHMucGVyc2lzdFNjcm9sbFRvcChuLmRvY3VtZW50KSx7cmFuZ2U6ZSxyZXN0b3JlUG9pbnQ6dH19LF9lbmRNb2RpZmljYXRpb246ZnVuY3Rpb24oZSl7dCh0aGlzLmVkaXRvcixlLnJlc3RvcmVQb2ludCksdGhpcy5lZGl0b3IuX3NlbGVjdGlvbkNoYW5nZSgpLHRoaXMuX2luUHJvZ3Jlc3M9ITF9LF9jb250ZW50TW9kaWZpY2F0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPW4uZWRpdG9yLHI9bi5fc3RhcnRNb2RpZmljYXRpb24oKTtyJiYoZS5jYWxsKG4saSxyLnJhbmdlKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5jYWxsKG4saSxyLnJhbmdlKSxuLl9lbmRNb2RpZmljYXRpb24ocil9KSl9LG9uY3V0OmZ1bmN0aW9uKCl7dGhpcy5fY29udGVudE1vZGlmaWNhdGlvbihlLm5vb3AsZS5ub29wKX0sX2ZpbGVUb0RhdGFVUkw6ZnVuY3Rpb24odCxuKXt2YXIgaT10LmdldEFzRmlsZSgpLHI9bmV3IEZpbGVSZWFkZXI7ci5vbmxvYWQ9bnx8ZS5ub29wLHIucmVhZEFzRGF0YVVSTChpKX0sX3RyaWdnZXJQYXN0ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXtodG1sOmV8fFwiXCJ9O24uaHRtbD1uLmh0bWwucmVwbGFjZSgvXFx1ZmVmZi9nLFwiXCIpLHRoaXMuZWRpdG9yLnRyaWdnZXIoXCJwYXN0ZVwiLG4pLHRoaXMucGFzdGUobi5odG1sLHR8fHt9KX0sX2hhbmRsZUltYWdlUGFzdGU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI7aWYoXCJGaWxlUmVhZGVyXCJpbiB3aW5kb3cmJih0PXRoaXMsbj1lLmNsaXBib2FyZERhdGF8fGUub3JpZ2luYWxFdmVudC5jbGlwYm9hcmREYXRhLGk9biYmKG4uaXRlbXN8fG4uZmlsZXMpLGkmJmkubGVuZ3RoJiYvXmltYWdlXFwvL2kudGVzdChpWzBdLnR5cGUpJiYocj10Ll9zdGFydE1vZGlmaWNhdGlvbigpKSkpcmV0dXJuIHRoaXMuX2ZpbGVUb0RhdGFVUkwoaVswXSxmdW5jdGlvbihlKXt0Ll90cmlnZ2VyUGFzdGUoJzxpbWcgc3JjPVwiJytlLnRhcmdldC5yZXN1bHQrJ1wiIC8+JyksdC5fZW5kTW9kaWZpY2F0aW9uKHIpfSksITB9LG9ucGFzdGU6ZnVuY3Rpb24odCl7dGhpcy5faGFuZGxlSW1hZ2VQYXN0ZSh0KXx8dGhpcy5fY29udGVudE1vZGlmaWNhdGlvbihmdW5jdGlvbihpLHIpe3ZhciBvLGEsbCxjPXMuY3JlYXRlKGkuZG9jdW1lbnQsXCJkaXZcIix7Y2xhc3NOYW1lOlwiay1wYXN0ZS1jb250YWluZXJcIixpbm5lckhUTUw6XCLvu79cIn0pLGQ9bi5zdXBwb3J0LmJyb3dzZXI7aS5ib2R5LmFwcGVuZENoaWxkKGMpLGQubXNpZSYmMTE+ZC52ZXJzaW9uPyh0LnByZXZlbnREZWZhdWx0KCksbz1pLmNyZWF0ZVJhbmdlKCksby5zZWxlY3ROb2RlQ29udGVudHMoYyksaS5zZWxlY3RSYW5nZShvKSxhPWkuZG9jdW1lbnQuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKSxhLm1vdmVUb0VsZW1lbnRUZXh0KGMpLGUoaS5ib2R5KS51bmJpbmQoXCJwYXN0ZVwiKSxhLmV4ZWNDb21tYW5kKFwiUGFzdGVcIiksZShpLmJvZHkpLmJpbmQoXCJwYXN0ZVwiLGUucHJveHkodGhpcy5vbnBhc3RlLHRoaXMpKSk6KGw9aS5jcmVhdGVSYW5nZSgpLGwuc2VsZWN0Tm9kZUNvbnRlbnRzKGMpLGkuc2VsZWN0UmFuZ2UobCkpLHIuZGVsZXRlQ29udGVudHMoKX0sZnVuY3Rpb24odCxuKXt2YXIgaSxyPVwiXCI7dC5zZWxlY3RSYW5nZShuKSxpPWUodC5ib2R5KS5jaGlsZHJlbihcIi5rLXBhc3RlLWNvbnRhaW5lclwiKSxpLmVhY2goZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxhc3RDaGlsZDtlJiZzLmlzKGUsXCJiclwiKSYmcy5yZW1vdmUoZSkscis9dGhpcy5pbm5lckhUTUx9KSxpLnJlbW92ZSgpLHRoaXMuX3RyaWdnZXJQYXN0ZShyLHtjbGVhbjohMH0pfSl9LHNwbGl0dGFibGVQYXJlbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpO2lmKGUpcmV0dXJuIHMuY2xvc2VzdEVkaXRhYmxlT2ZUeXBlKHQsW1wicFwiLFwidWxcIixcIm9sXCJdKXx8dC5wYXJlbnROb2RlO2lmKG49dC5wYXJlbnROb2RlLGk9dC5vd25lckRvY3VtZW50LmJvZHkscy5pc0lubGluZShuKSlmb3IoO24ucGFyZW50Tm9kZSE9aSYmIXMuaXNCbG9jayhuLnBhcmVudE5vZGUpOyluPW4ucGFyZW50Tm9kZTtyZXR1cm4gbn0scGFzdGU6ZnVuY3Rpb24odCxuKXt2YXIgaSxvLGEsbCxjLGQscCxmLGcsbSx2LF89dGhpcy5lZGl0b3I7Zm9yKG49aCh7Y2xlYW46ITEsc3BsaXQ6ITB9LG4pLGk9MCxvPXRoaXMuY2xlYW5lcnMubGVuZ3RoO28+aTtpKyspdGhpcy5jbGVhbmVyc1tpXS5hcHBsaWNhYmxlKHQpJiYodD10aGlzLmNsZWFuZXJzW2ldLmNsZWFuKHQpKTtpZihuLmNsZWFuJiYodD10LnJlcGxhY2UoLyg8YnI+KFxcc3wmbmJzcDspKikrKDxcXC8/KGRpdnxwfGxpfGNvbHx0KSkvZ2ksXCIkM1wiKSx0PXQucmVwbGFjZSgvPChhfHNwYW4pW14+XSo+PFxcL1xcMT4vZ2ksXCJcIikpLHQ9dC5yZXBsYWNlKC9ePGxpL2ksXCI8dWw+PGxpXCIpLnJlcGxhY2UoL2xpPiQvZyxcImxpPjwvdWw+XCIpLGE9dGhpcy5pc0Jsb2NrKHQpLF8uZm9jdXMoKSxsPV8uZ2V0UmFuZ2UoKSxsLmRlbGV0ZUNvbnRlbnRzKCksbC5zdGFydENvbnRhaW5lcj09Xy5kb2N1bWVudCYmbC5zZWxlY3ROb2RlQ29udGVudHMoXy5ib2R5KSxjPW5ldyB1LGQ9Yy5hZGRDYXJldChsKSxwPXRoaXMuc3BsaXR0YWJsZVBhcmVudChhLGQpLGY9ITEsZz1wIT1fLmJvZHkmJiFzLmlzKHAsXCJ0ZFwiKSxuLnNwbGl0JiZnJiYoYXx8cy5pc0lubGluZShwKSkmJihsLnNlbGVjdE5vZGUoZCksci5SYW5nZVV0aWxzLnNwbGl0KGwscCwhMCksZj0hMCksbT10aGlzLmh0bWxUb0ZyYWdtZW50KHQpLG0uZmlyc3RDaGlsZCYmXCJrLXBhc3RlLWNvbnRhaW5lclwiPT09bS5maXJzdENoaWxkLmNsYXNzTmFtZSl7Zm9yKHY9W10saT0wLG89bS5jaGlsZE5vZGVzLmxlbmd0aDtvPmk7aSsrKXYucHVzaChtLmNoaWxkTm9kZXNbaV0uaW5uZXJIVE1MKTttPXRoaXMuaHRtbFRvRnJhZ21lbnQodi5qb2luKFwiPGJyIC8+XCIpKX1pZihlKG0uY2hpbGROb2RlcykuZmlsdGVyKFwidGFibGVcIikuYWRkQ2xhc3MoXCJrLXRhYmxlXCIpLmVuZCgpLmZpbmQoXCJ0YWJsZVwiKS5hZGRDbGFzcyhcImstdGFibGVcIiksbC5pbnNlcnROb2RlKG0pLHA9dGhpcy5zcGxpdHRhYmxlUGFyZW50KGEsZCksZil7Zm9yKDtkLnBhcmVudE5vZGUhPXA7KXMudW53cmFwKGQucGFyZW50Tm9kZSk7cy51bndyYXAoZC5wYXJlbnROb2RlKX1zLm5vcm1hbGl6ZShsLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKSxkLnN0eWxlLmRpc3BsYXk9XCJpbmxpbmVcIixzLnJlc3RvcmVTY3JvbGxUb3AoXy5kb2N1bWVudCkscy5zY3JvbGxUbyhkKSxjLnJlbW92ZUNhcmV0KGwpLF8uc2VsZWN0UmFuZ2UobCl9fSkseD1pLmV4dGVuZCh7Y2xlYW46ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMscj1pLnJlcGxhY2VtZW50cztmb3IodD0wLG49ci5sZW5ndGg7bj50O3QrPTIpZT1lLnJlcGxhY2Uoclt0XSxyW3QrMV0pO3JldHVybiBlfX0pLEM9eC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt0aGlzLnJlcGxhY2VtZW50cz1bLzwoXFwvPylzY3JpcHQoW14+XSopPi9pLFwiPCQxdGVsZXJpazpzY3JpcHQkMj5cIl19LGFwcGxpY2FibGU6ZnVuY3Rpb24oZSl7cmV0dXJuLzxzY3JpcHRbXj5dKj4vaS50ZXN0KGUpfX0pLFM9eC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt0aGlzLnJlcGxhY2VtZW50cz1bLzxcXD94bWxbXj5dKj4vZ2ksXCJcIiwvPCEtLSgufFxcbikqPy0tPi9nLFwiXCIsLyZxdW90Oy9nLFwiJ1wiLC8oPzo8YnI+Jm5ic3A7W1xcc1xcclxcbl0rfDxicj4pKig8XFwvPyhoWzEtNl18aHJ8cHxkaXZ8dGFibGV8dGJvZHl8dGhlYWR8dGZvb3R8dGh8dHJ8dGR8bGl8b2x8dWx8Y2FwdGlvbnxhZGRyZXNzfHByZXxmb3JtfGJsb2NrcXVvdGV8ZGx8ZHR8ZGR8ZGlyfGZpZWxkc2V0KVtePl0qPikoPzo8YnI+Jm5ic3A7W1xcc1xcclxcbl0rfDxicj4pKi9nLFwiJDFcIiwvPGJyPjxicj4vZyxcIjxCUj48QlI+XCIsLzxicj4oPyFcXG4pL2csXCIgXCIsLzx0YWJsZShbXj5dKik+KFxcc3wmbmJzcDspKzx0L2dpLFwiPHRhYmxlJDE+PHRcIiwvPHRyW14+XSo+KFxcc3wmbmJzcDspKjxcXC90cj4vZ2ksXCJcIiwvPHRib2R5W14+XSo+KFxcc3wmbmJzcDspKjxcXC90Ym9keT4vZ2ksXCJcIiwvPHRhYmxlW14+XSo+KFxcc3wmbmJzcDspKjxcXC90YWJsZT4vZ2ksXCJcIiwvPEJSPjxCUj4vZyxcIjxicj5cIiwvXlxccyooJm5ic3A7KSsvZ2ksXCJcIiwvKCZuYnNwO3w8YnJbXj5dKj4pK1xccyokL2dpLFwiXCIsL21zby1bXjtcIl0qOz8vZ2ksXCJcIiwvPChcXC8/KWIoXFxzW14+XSopPz4vZ2ksXCI8JDFzdHJvbmckMj5cIiwvPChcXC8/KWkoXFxzW14+XSopPz4vZ2ksXCI8JDFlbSQyPlwiLC88bzpwPiZuYnNwOzxcXC9vOnA+L2dpLFwiJm5ic3A7XCIsLzxcXC8/KG1ldGF8bGlua3xzdHlsZXxvOnx2Onx4OilbXj5dKj4oKD86LnxcXG4pKj88XFwvKG1ldGF8bGlua3xzdHlsZXxvOnx2Onx4OilbXj5dKj4pPy9naSxcIlwiLC88XFwvbz4vZyxcIlwiLC9zdHlsZT0oW1wifCddKVxccypcXDEvZyxcIlwiLC8oPGJyW14+XSo+KT9cXG4vZyxmdW5jdGlvbihlLHQpe3JldHVybiB0P2U6XCIgXCJcbn1dfSxhcHBsaWNhYmxlOmZ1bmN0aW9uKGUpe3JldHVybi9jbGFzcz1cIj9Nc298c3R5bGU9XCJbXlwiXSptc28tL2kudGVzdChlKXx8L3VybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206b2ZmaWNlLy50ZXN0KGUpfSxzdHJpcEVtcHR5QW5jaG9yczpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKC88YShbXj5dKik+XFxzKjxcXC9hPi9naSxmdW5jdGlvbihlLHQpe3JldHVybiF0fHx0LmluZGV4T2YoXCJocmVmXCIpPDA/XCJcIjplfSl9LGxpc3RUeXBlOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybi9eKDxzcGFuIFtePl0qdGV4aHRtbFtePl0qPik/PHNwYW4gW14+XSooU3ltYm9sfFdpbmdkaW5ncylbXj5dKj4vaS50ZXN0KGUpJiYodD0hMCksZT1lLnJlcGxhY2UoLzxcXC8/XFx3K1tePl0qPi9nLFwiXCIpLnJlcGxhY2UoLyZuYnNwOy9nLFwiwqBcIiksIXQmJi9eW1xcdTIwMjJcXHUwMGI3XFx1MDBhN1xcdTAwZDhvXVxcdTAwYTArLy50ZXN0KGUpfHx0JiYvXi5cXHUwMGEwKy8udGVzdChlKT9cInVsXCI6L15cXHMqXFx3K1tcXC5cXCldXFx1MDBhMHsyLH0vLnRlc3QoZSk/XCJvbFwiOnZvaWQgMH0sX2NvbnZlcnRUb0xpOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiAxPT1lLmNoaWxkTm9kZXMubGVuZ3RoP3Q9ZS5maXJzdENoaWxkLmlubmVySFRNTC5yZXBsYWNlKC9eXFx3K1tcXC5cXCldKCZuYnNwOykrIC8sXCJcIik6KHMucmVtb3ZlKGUuZmlyc3RDaGlsZCksMz09ZS5maXJzdENoaWxkLm5vZGVUeXBlJiYvXltpdnhdK1xcLiQvaS50ZXN0KGUuZmlyc3RDaGlsZC5ub2RlVmFsdWUpJiZzLnJlbW92ZShlLmZpcnN0Q2hpbGQpLC9eKCZuYnNwO3xcXHMpKyQvaS50ZXN0KGUuZmlyc3RDaGlsZC5pbm5lckhUTUwpJiZzLnJlbW92ZShlLmZpcnN0Q2hpbGQpLHQ9ZS5pbm5lckhUTUwpLHMucmVtb3ZlKGUpLHMuY3JlYXRlKGRvY3VtZW50LFwibGlcIix7aW5uZXJIVE1MOnR9KX0sbGlzdHM6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG8sYSxsLGMsZCx1LGg9ZShzLmJsb2NrRWxlbWVudHMuam9pbihcIixcIiksdCkscD0tMSxmPXt1bDp7fSxvbDp7fX0sZz10O2ZvcihyPTA7aC5sZW5ndGg+cjtyKyspaWYobz1oW3JdLGE9dGhpcy5saXN0VHlwZShvLmlubmVySFRNTCksaT1zLm5hbWUobyksXCJ0ZFwiIT1pKWlmKGEmJlwicFwiPT1pKXtpZihsPXBhcnNlRmxvYXQoby5zdHlsZS5tYXJnaW5MZWZ0fHwwKSxjPWZbYV1bbF0sKGw+cHx8IWMpJiYoYz1zLmNyZWF0ZShkb2N1bWVudCxhKSxnPT10P3MuaW5zZXJ0QmVmb3JlKGMsbyk6Zy5hcHBlbmRDaGlsZChjKSxmW2FdW2xdPWMpLG4hPWEpZm9yKGQgaW4gZilmb3IodSBpbiBmW2RdKWUuY29udGFpbnMoYyxmW2RdW3VdKSYmZGVsZXRlIGZbZF1bdV07Zz10aGlzLl9jb252ZXJ0VG9MaShvKSxjLmFwcGVuZENoaWxkKGcpLHA9bCxuPWF9ZWxzZSBvLmlubmVySFRNTD8oZj17dWw6e30sb2w6e319LGc9dCxwPS0xKTpzLnJlbW92ZShvKX0scmVtb3ZlQXR0cmlidXRlczpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5hdHRyaWJ1dGVzLG49dC5sZW5ndGg7bi0tOylcImNvbHNwYW5cIiE9cy5uYW1lKHRbbl0pJiZlLnJlbW92ZUF0dHJpYnV0ZU5vZGUodFtuXSl9LGNyZWF0ZUNvbEdyb3VwOmZ1bmN0aW9uKHQpe3ZhciBpPXQuY2VsbHMscj1lKHQpLmNsb3Nlc3QoXCJ0YWJsZVwiKSxvPXIuY2hpbGRyZW4oXCJjb2xncm91cFwiKTsyPmkubGVuZ3RofHwoby5sZW5ndGgmJihpPW8uY2hpbGRyZW4oKSxvWzBdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob1swXSkpLG89ZShlLm1hcChpLGZ1bmN0aW9uKGUpe3ZhciB0PWUud2lkdGg7cmV0dXJuIHQmJjAhPT1wYXJzZUludCh0LDEwKT9uLmZvcm1hdCgnPGNvbCBzdHlsZT1cIndpZHRoOnswfXB4O1wiLz4nLHQpOlwiPGNvbCAvPlwifSkuam9pbihcIlwiKSksby5pcyhcImNvbGdyb3VwXCIpfHwobz1lKFwiPGNvbGdyb3VwLz5cIikuYXBwZW5kKG8pKSxvLnByZXBlbmRUbyhyKSl9LGNvbnZlcnRIZWFkZXJzOmZ1bmN0aW9uKHQpe3ZhciBuLGk9dC5jZWxscyxyPWUubWFwKGksZnVuY3Rpb24odCl7dmFyIG49ZSh0KS5jaGlsZHJlbihcInBcIikuY2hpbGRyZW4oXCJzdHJvbmdcIilbMF07cmV0dXJuIG4mJlwic3Ryb25nXCI9PXMubmFtZShuKT9uOnZvaWQgMH0pO2lmKHIubGVuZ3RoPT1pLmxlbmd0aCl7Zm9yKG49MDtyLmxlbmd0aD5uO24rKylzLnVud3JhcChyW25dKTtmb3IoZSh0KS5jbG9zZXN0KFwidGFibGVcIikuZmluZChcImNvbGdyb3VwXCIpLmFmdGVyKFwiPHRoZWFkPjwvdGhlYWQ+XCIpLmVuZCgpLmZpbmQoXCJ0aGVhZFwiKS5hcHBlbmQodCksbj0wO2kubGVuZ3RoPm47bisrKXMuY2hhbmdlVGFnKGlbbl0sXCJ0aFwiKX19LHJlbW92ZVBhcmFncmFwaHM6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG8sYTtmb3Iobj0wO3QubGVuZ3RoPm47bisrKWZvcih0aGlzLnJlbW92ZUF0dHJpYnV0ZXModFtuXSksbz1lKHRbbl0pLGE9by5jaGlsZHJlbihcInBcIiksaT0wLHI9YS5sZW5ndGg7cj5pO2krKylyLTE+aSYmcy5pbnNlcnRBZnRlcihzLmNyZWF0ZShkb2N1bWVudCxcImJyXCIpLGFbaV0pLHMudW53cmFwKGFbaV0pfSxyZW1vdmVEZWZhdWx0Q29sb3JzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO2UubGVuZ3RoPnQ7dCsrKS9eXFxzKmNvbG9yOlxccypbXjtdKjs/JC9pLnRlc3QoZVt0XS5zdHlsZS5jc3NUZXh0KSYmcy51bndyYXAoZVt0XSl9LHRhYmxlczpmdW5jdGlvbih0KXt2YXIgbixpLHIsbyxhLHM9ZSh0KS5maW5kKFwidGFibGVcIiksbD10aGlzO2ZvcihvPTA7cy5sZW5ndGg+bztvKyspe2ZvcihuPXNbb10ucm93cyxyPWk9blswXSxhPTE7bi5sZW5ndGg+YTthKyspblthXS5jZWxscy5sZW5ndGg+ci5jZWxscy5sZW5ndGgmJihyPW5bYV0pO2wuY3JlYXRlQ29sR3JvdXAociksbC5jb252ZXJ0SGVhZGVycyhpKSxsLnJlbW92ZUF0dHJpYnV0ZXMoc1tvXSksbC5yZW1vdmVQYXJhZ3JhcGhzKHMuZXEobykuZmluZChcInRkLHRoXCIpKSxsLnJlbW92ZURlZmF1bHRDb2xvcnMocy5lcShvKS5maW5kKFwic3BhblwiKSl9fSxoZWFkZXJzOmZ1bmN0aW9uKHQpe3ZhciBuLGk9ZSh0KS5maW5kKFwicC5Nc29UaXRsZVwiKTtmb3Iobj0wO2kubGVuZ3RoPm47bisrKXMuY2hhbmdlVGFnKGlbbl0sXCJoMVwiKX0sY2xlYW46ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzO3JldHVybiBlPXguZm4uY2xlYW4uY2FsbChuLGUpLGU9bi5zdHJpcEVtcHR5QW5jaG9ycyhlKSx0PXMuY3JlYXRlKGRvY3VtZW50LFwiZGl2XCIse2lubmVySFRNTDplfSksbi5oZWFkZXJzKHQpLG4ubGlzdHModCksbi50YWJsZXModCksZT10LmlubmVySFRNTC5yZXBsYWNlKC8oPFtePl0qKVxccytjbGFzcz1cIj9bXlwiXFxzPl0qXCI/L2dpLFwiJDFcIil9fSksVD14LmV4dGVuZCh7aW5pdDpmdW5jdGlvbigpe3RoaXMucmVwbGFjZW1lbnRzPVsvXFxzK2NsYXNzPVwiQXBwbGUtc3R5bGUtc3BhblteXCJdKlwiL2dpLFwiXCIsLzwoZGl2fHB8aFsxLTZdKVxccytzdHlsZT1cIlteXCJdKlwiL2dpLFwiPCQxXCIsL148ZGl2PiguKik8XFwvZGl2PiQvLFwiJDFcIl19LGFwcGxpY2FibGU6ZnVuY3Rpb24oZSl7cmV0dXJuL2NsYXNzPVwiP0FwcGxlLXN0eWxlLXNwYW58c3R5bGU9XCJbXlwiXSotd2Via2l0LW5ic3AtbW9kZS9pLnRlc3QoZSl9fSk7aChyLHtDb21tYW5kOnAsR2VuZXJpY0NvbW1hbmQ6ZixJbnNlcnRIdG1sQ29tbWFuZDpnLEluc2VydEh0bWxUb29sOm0sVW5kb1JlZG9TdGFjazp2LFR5cGluZ0hhbmRsZXI6XyxTeXN0ZW1IYW5kbGVyOncsQmFja3NwYWNlSGFuZGxlcjp5LEtleWJvYXJkOmIsQ2xpcGJvYXJkOmssQ2xlYW5lcjp4LE1TV29yZEZvcm1hdENsZWFuZXI6UyxXZWJraXRGb3JtYXRDbGVhbmVyOlR9KSxhKFwiaW5zZXJ0SHRtbFwiLG5ldyBtKHt0ZW1wbGF0ZTpuZXcgYyh7dGVtcGxhdGU6by5kcm9wRG93bkxpc3RUZW1wbGF0ZSx0aXRsZTpcIkluc2VydCBIVE1MXCIsaW5pdGlhbFZhbHVlOlwiSW5zZXJ0IEhUTUxcIn0pfSkpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXt2YXIgdD13aW5kb3cua2VuZG8sbj10LkNsYXNzLGk9dC51aS5lZGl0b3Iscj10LnVpLkVkaXRvci5mbi5vcHRpb25zLmZvcm1hdHMsbz1pLkVkaXRvclV0aWxzLGE9aS5Ub29sLHM9aS5Ub29sVGVtcGxhdGUsbD1pLkZvcm1hdFRvb2wsYz1pLkRvbSxkPWkuUmFuZ2VVdGlscyx1PWUuZXh0ZW5kLGg9aS5FZGl0b3JVdGlscy5yZWdpc3RlclRvb2wscD1pLkVkaXRvclV0aWxzLnJlZ2lzdGVyRm9ybWF0LGY9XCJrLW1hcmtlclwiLGc9bi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5mb3JtYXQ9ZX0sbnVtYmVyT2ZTaWJsaW5nczpmdW5jdGlvbihlKXt2YXIgdCxuPTAsaT0wLHI9MCxvPWUucGFyZW50Tm9kZTtmb3IodD1vLmZpcnN0Q2hpbGQ7dDt0PXQubmV4dFNpYmxpbmcpdCE9ZSYmKHQuY2xhc3NOYW1lPT1mP3IrKzozPT10Lm5vZGVUeXBlP24rKzppKyspO3JldHVybiByPjEmJm8uZmlyc3RDaGlsZC5jbGFzc05hbWU9PWYmJm8ubGFzdENoaWxkLmNsYXNzTmFtZT09Zj8wOmkrbn0sZmluZFN1aXRhYmxlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIXQmJnRoaXMubnVtYmVyT2ZTaWJsaW5ncyhlKT4wP251bGw6Yy5wYXJlbnRPZlR5cGUoZSx0aGlzLmZvcm1hdFswXS50YWdzKX0sZmluZEZvcm1hdDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGE9dGhpcy5mb3JtYXQscz1jLmF0dHJFcXVhbHM7Zm9yKHQ9MCxuPWEubGVuZ3RoO24+dDt0Kyspe2lmKGk9ZSxyPWFbdF0udGFncyxvPWFbdF0uYXR0cixpJiZjLm9mVHlwZShpLHIpJiZzKGksbykpcmV0dXJuIGk7Zm9yKDtpOylpZihpPWMucGFyZW50T2ZUeXBlKGksciksaSYmcyhpLG8pKXJldHVybiBpfXJldHVybiBudWxsfSxpc0Zvcm1hdHRlZDpmdW5jdGlvbihlKXt2YXIgdCxuO2Zvcih0PTAsbj1lLmxlbmd0aDtuPnQ7dCsrKWlmKHRoaXMuZmluZEZvcm1hdChlW3RdKSlyZXR1cm4hMDtyZXR1cm4hMX19KSxtPW4uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dGhpcy5maW5kZXI9bmV3IGcoZSksdGhpcy5hdHRyaWJ1dGVzPXUoe30sZVswXS5hdHRyLHQpLHRoaXMudGFnPWVbMF0udGFnc1swXX0sd3JhcDpmdW5jdGlvbihlKXtyZXR1cm4gYy53cmFwKGUsYy5jcmVhdGUoZS5vd25lckRvY3VtZW50LHRoaXMudGFnLHRoaXMuYXR0cmlidXRlcykpfSxhY3RpdmF0ZTpmdW5jdGlvbihlLHQpe3RoaXMuZmluZGVyLmlzRm9ybWF0dGVkKHQpPyh0aGlzLnNwbGl0KGUpLHRoaXMucmVtb3ZlKHQpKTp0aGlzLmFwcGx5KHQpfSx0b2dnbGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZC50ZXh0Tm9kZXMoZSk7dC5sZW5ndGg+MCYmdGhpcy5hY3RpdmF0ZShlLHQpfSxhcHBseTpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvPVtdO2Zvcih0PTAsbj1lLmxlbmd0aDtuPnQ7dCsrKWk9ZVt0XSxyPXRoaXMuZmluZGVyLmZpbmRTdWl0YWJsZShpKSxyP2MuYXR0cihyLHRoaXMuYXR0cmlidXRlcyk6cj10aGlzLndyYXAoaSksby5wdXNoKHIpO3RoaXMuY29uc29saWRhdGUobyl9LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgdCxuLGk7Zm9yKHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspaT10aGlzLmZpbmRlci5maW5kRm9ybWF0KGVbdF0pLGkmJih0aGlzLmF0dHJpYnV0ZXMmJnRoaXMuYXR0cmlidXRlcy5zdHlsZT8oYy51bnN0eWxlKGksdGhpcy5hdHRyaWJ1dGVzLnN0eWxlKSxpLnN0eWxlLmNzc1RleHR8fGkuYXR0cmlidXRlc1tcImNsYXNzXCJdfHxjLnVud3JhcChpKSk6Yy51bndyYXAoaSkpfSxzcGxpdDpmdW5jdGlvbihlKXt2YXIgdCxuLGk9ZC50ZXh0Tm9kZXMoZSkscj1pLmxlbmd0aDtpZihyPjApZm9yKHQ9MDtyPnQ7dCsrKW49dGhpcy5maW5kZXIuZmluZEZvcm1hdChpW3RdKSxuJiZkLnNwbGl0KGUsbiwhMCl9LGNvbnNvbGlkYXRlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuO2UubGVuZ3RoPjE7KWlmKHQ9ZS5wb3AoKSxuPWVbZS5sZW5ndGgtMV0sdC5wcmV2aW91c1NpYmxpbmcmJnQucHJldmlvdXNTaWJsaW5nLmNsYXNzTmFtZT09ZiYmbi5hcHBlbmRDaGlsZCh0LnByZXZpb3VzU2libGluZyksdC50YWdOYW1lPT1uLnRhZ05hbWUmJnQucHJldmlvdXNTaWJsaW5nPT1uJiZ0LnN0eWxlLmNzc1RleHQ9PW4uc3R5bGUuY3NzVGV4dCl7Zm9yKDt0LmZpcnN0Q2hpbGQ7KW4uYXBwZW5kQ2hpbGQodC5maXJzdENoaWxkKTtjLnJlbW92ZSh0KX19fSksdj1nLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3RoaXMuZm9ybWF0PWUsdGhpcy5ncmVlZHlQcm9wZXJ0eT10LGcuZm4uaW5pdC5jYWxsKHRoaXMsZSl9LGdldElubGluZUNzc1ZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvLGEscyxsLGQsdSxoLHAsZixnPXQuYXR0cmlidXRlcyxtPWUudHJpbTtpZihnKWZvcihuPTAsaT1nLmxlbmd0aDtpPm47bisrKWlmKHI9Z1tuXSxvPXIubm9kZU5hbWUsYT1yLm5vZGVWYWx1ZSxyLnNwZWNpZmllZCYmXCJzdHlsZVwiPT1vKWZvcihzPW0oYXx8dC5zdHlsZS5jc3NUZXh0KS5zcGxpdChcIjtcIiksZD0wLHU9cy5sZW5ndGg7dT5kO2QrKylpZihsPXNbZF0sbC5sZW5ndGgpe2lmKGg9bC5zcGxpdChcIjpcIikscD1tKGhbMF0udG9Mb3dlckNhc2UoKSksZj1tKGhbMV0pLHAhPXRoaXMuZ3JlZWR5UHJvcGVydHkpY29udGludWU7cmV0dXJuIHAuaW5kZXhPZihcImNvbG9yXCIpPj0wP2MudG9IZXgoZik6Zn19LGdldEZvcm1hdElubmVyOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvPWUoYy5pc0RhdGFOb2RlKHQpP3QucGFyZW50Tm9kZTp0KSxhPW8ucGFyZW50c1VudGlsKFwiW2NvbnRlbnRFZGl0YWJsZV1cIikuYWRkQmFjaygpLnRvQXJyYXkoKS5yZXZlcnNlKCk7Zm9yKG49MCxpPWEubGVuZ3RoO2k+bjtuKyspaWYocj1cImNsYXNzTmFtZVwiPT10aGlzLmdyZWVkeVByb3BlcnR5P2Fbbl0uY2xhc3NOYW1lOnRoaXMuZ2V0SW5saW5lQ3NzVmFsdWUoYVtuXSkpcmV0dXJuIHI7cmV0dXJuXCJpbmhlcml0XCJ9LGdldEZvcm1hdDpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcy5nZXRGb3JtYXRJbm5lcihlWzBdKTtmb3IodD0xLG49ZS5sZW5ndGg7bj50O3QrKylpZihpIT10aGlzLmdldEZvcm1hdElubmVyKGVbdF0pKXJldHVyblwiXCI7cmV0dXJuIGl9LGlzRm9ybWF0dGVkOmZ1bmN0aW9uKGUpe3JldHVyblwiXCIhPT10aGlzLmdldEZvcm1hdChlKX19KSxfPW0uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsbixpKXttLmZuLmluaXQuY2FsbCh0aGlzLGUsbiksdGhpcy52YWx1ZXM9bix0aGlzLmZpbmRlcj1uZXcgdihlLGkpLGkmJih0aGlzLmdyZWVkeVByb3BlcnR5PXQudG9DYW1lbENhc2UoaSkpfSxhY3RpdmF0ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuZ3JlZWR5UHJvcGVydHksaT1cImFwcGx5XCI7dGhpcy5zcGxpdChlKSxuJiZcImluaGVyaXRcIj09dGhpcy52YWx1ZXMuc3R5bGVbbl0mJihpPVwicmVtb3ZlXCIpLHRoaXNbaV0odCl9fSkseT1sLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXtsLmZuLmluaXQuY2FsbCh0aGlzLHUoZSx7ZmluZGVyOm5ldyBnKGUuZm9ybWF0KSxmb3JtYXR0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG0oZS5mb3JtYXQpfX0pKX19KSx3PWEuZXh0ZW5kKHt1cGRhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmRhdGEodGhpcy50eXBlKTtuLmNsb3NlKCksbi52YWx1ZSh0aGlzLmZpbmRlci5nZXRGb3JtYXQodCkpfX0pLGI9dy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7YS5mbi5pbml0LmNhbGwodGhpcyxlKSx0aGlzLnR5cGU9dC5zdXBwb3J0LmJyb3dzZXIubXNpZXx8dC5zdXBwb3J0LnRvdWNoP1wia2VuZG9Ecm9wRG93bkxpc3RcIjpcImtlbmRvQ29tYm9Cb3hcIix0aGlzLmZvcm1hdD1be3RhZ3M6W1wic3BhblwiXX1dLHRoaXMuZmluZGVyPW5ldyB2KHRoaXMuZm9ybWF0LGUuY3NzQXR0cil9LGNvbW1hbmQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5vcHRpb25zLG49dGhpcy5mb3JtYXQscj17fTtyZXR1cm4gbmV3IGkuRm9ybWF0Q29tbWFuZCh1KGUse2Zvcm1hdHRlcjpmdW5jdGlvbigpe3JldHVybiByW3QuZG9tQXR0cl09ZS52YWx1ZSxuZXcgXyhuLHtzdHlsZTpyfSx0LmNzc0F0dHIpfX0pKX0saW5pdGlhbGl6ZTpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dC5lZGl0b3Iscj10aGlzLm9wdGlvbnMsbz1yLm5hbWUscz1bXTtyLmRlZmF1bHRWYWx1ZSYmKHM9W3t0ZXh0Omkub3B0aW9ucy5tZXNzYWdlc1tyLmRlZmF1bHRWYWx1ZVswXS50ZXh0XSx2YWx1ZTpyLmRlZmF1bHRWYWx1ZVswXS52YWx1ZX1dKSxuPXMuY29uY2F0KHIuaXRlbXM/ci5pdGVtczppLm9wdGlvbnNbb118fFtdKSxlW3RoaXMudHlwZV0oe2RhdGFUZXh0RmllbGQ6XCJ0ZXh0XCIsZGF0YVZhbHVlRmllbGQ6XCJ2YWx1ZVwiLGRhdGFTb3VyY2U6bixjaGFuZ2U6ZnVuY3Rpb24oKXthLmV4ZWMoaSxvLHRoaXMudmFsdWUoKSl9LGhpZ2hsaWdodEZpcnN0OiExfSksZS5jbG9zZXN0KFwiLmstd2lkZ2V0XCIpLnJlbW92ZUNsYXNzKFwiay1cIitvKS5maW5kKFwiKlwiKS5hZGRCYWNrKCkuYXR0cihcInVuc2VsZWN0YWJsZVwiLFwib25cIiksZS5kYXRhKHRoaXMudHlwZSkudmFsdWUoXCJpbmhlcml0XCIpfX0pLGs9YS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7YS5mbi5pbml0LmNhbGwodGhpcyxlKSx0aGlzLmZvcm1hdD1be3RhZ3M6W1wic3BhblwiXX1dLHRoaXMuZmluZGVyPW5ldyB2KHRoaXMuZm9ybWF0LGUuY3NzQXR0cil9LG9wdGlvbnM6e3BhbGV0dGU6XCJ3ZWJzYWZlXCJ9LHVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuX3dpZGdldC5jbG9zZSgpfSxjb21tYW5kOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9ucyxuPXRoaXMuZm9ybWF0LHI9e307cmV0dXJuIG5ldyBpLkZvcm1hdENvbW1hbmQodShlLHtmb3JtYXR0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gclt0LmRvbUF0dHJdPWUudmFsdWUsbmV3IF8obix7c3R5bGU6cn0sdC5jc3NBdHRyKX19KSl9LGluaXRpYWxpemU6ZnVuY3Rpb24obixpKXt2YXIgcj1pLmVkaXRvcixvPXRoaXMubmFtZSxzPXUoe30say5mbi5vcHRpb25zLHRoaXMub3B0aW9ucyksbD1zLnBhbGV0dGU7bj10aGlzLl93aWRnZXQ9bmV3IHQudWkuQ29sb3JQaWNrZXIobix7dmFsdWU6ZS5pc0FycmF5KGwpP2xbMF06XCIjMDAwXCIsdG9vbEljb246XCJrLVwiK3MubmFtZSxwYWxldHRlOmwsY2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9bi52YWx1ZSgpO2UmJmEuZXhlYyhyLG8sZSksci5mb2N1cygpfSxhY3RpdmF0ZTpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksbi50cmlnZ2VyKFwiY2hhbmdlXCIpfX0pLG4ud3JhcHBlci5hdHRyKHt0aXRsZTppLnRpdGxlLHVuc2VsZWN0YWJsZTpcIm9uXCJ9KS5maW5kKFwiKlwiKS5hdHRyKFwidW5zZWxlY3RhYmxlXCIsXCJvblwiKX19KTt1KGkse0lubGluZUZvcm1hdEZpbmRlcjpnLElubGluZUZvcm1hdHRlcjptLERlbGF5ZWRFeGVjdXRpb25Ub29sOncsR3JlZWR5SW5saW5lRm9ybWF0RmluZGVyOnYsR3JlZWR5SW5saW5lRm9ybWF0dGVyOl8sSW5saW5lRm9ybWF0VG9vbDp5LEZvbnRUb29sOmIsQ29sb3JUb29sOmt9KSxwKFwiYm9sZFwiLFt7dGFnczpbXCJzdHJvbmdcIixcImJcIl19LHt0YWdzOltcInNwYW5cIl0sYXR0cjp7c3R5bGU6e2ZvbnRXZWlnaHQ6XCJib2xkXCJ9fX1dKSxoKFwiYm9sZFwiLG5ldyB5KHtrZXk6XCJCXCIsY3RybDohMCxmb3JtYXQ6ci5ib2xkLHRlbXBsYXRlOm5ldyBzKHt0ZW1wbGF0ZTpvLmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiQm9sZFwifSl9KSkscChcIml0YWxpY1wiLFt7dGFnczpbXCJlbVwiLFwiaVwiXX0se3RhZ3M6W1wic3BhblwiXSxhdHRyOntzdHlsZTp7Zm9udFN0eWxlOlwiaXRhbGljXCJ9fX1dKSxoKFwiaXRhbGljXCIsbmV3IHkoe2tleTpcIklcIixjdHJsOiEwLGZvcm1hdDpyLml0YWxpYyx0ZW1wbGF0ZTpuZXcgcyh7dGVtcGxhdGU6by5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIkl0YWxpY1wifSl9KSkscChcInVuZGVybGluZVwiLFt7dGFnczpbXCJzcGFuXCJdLGF0dHI6e3N0eWxlOnt0ZXh0RGVjb3JhdGlvbjpcInVuZGVybGluZVwifX19LHt0YWdzOltcInVcIl19XSksaChcInVuZGVybGluZVwiLG5ldyB5KHtrZXk6XCJVXCIsY3RybDohMCxmb3JtYXQ6ci51bmRlcmxpbmUsdGVtcGxhdGU6bmV3IHMoe3RlbXBsYXRlOm8uYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJVbmRlcmxpbmVcIn0pfSkpLHAoXCJzdHJpa2V0aHJvdWdoXCIsW3t0YWdzOltcImRlbFwiLFwic3RyaWtlXCJdfSx7dGFnczpbXCJzcGFuXCJdLGF0dHI6e3N0eWxlOnt0ZXh0RGVjb3JhdGlvbjpcImxpbmUtdGhyb3VnaFwifX19XSksaChcInN0cmlrZXRocm91Z2hcIixuZXcgeSh7Zm9ybWF0OnIuc3RyaWtldGhyb3VnaCx0ZW1wbGF0ZTpuZXcgcyh7dGVtcGxhdGU6by5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIlN0cmlrZXRocm91Z2hcIn0pfSkpLHAoXCJzdXBlcnNjcmlwdFwiLFt7dGFnczpbXCJzdXBcIl19XSksaChcInN1cGVyc2NyaXB0XCIsbmV3IHkoe2Zvcm1hdDpyLnN1cGVyc2NyaXB0LHRlbXBsYXRlOm5ldyBzKHt0ZW1wbGF0ZTpvLmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiU3VwZXJzY3JpcHRcIn0pfSkpLHAoXCJzdWJzY3JpcHRcIixbe3RhZ3M6W1wic3ViXCJdfV0pLGgoXCJzdWJzY3JpcHRcIixuZXcgeSh7Zm9ybWF0OnIuc3Vic2NyaXB0LHRlbXBsYXRlOm5ldyBzKHt0ZW1wbGF0ZTpvLmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiU3Vic2NyaXB0XCJ9KX0pKSxoKFwiZm9yZUNvbG9yXCIsbmV3IGsoe2Nzc0F0dHI6XCJjb2xvclwiLGRvbUF0dHI6XCJjb2xvclwiLG5hbWU6XCJmb3JlQ29sb3JcIix0ZW1wbGF0ZTpuZXcgcyh7dGVtcGxhdGU6by5jb2xvclBpY2tlclRlbXBsYXRlLHRpdGxlOlwiQ29sb3JcIn0pfSkpLGgoXCJiYWNrQ29sb3JcIixuZXcgayh7Y3NzQXR0cjpcImJhY2tncm91bmQtY29sb3JcIixkb21BdHRyOlwiYmFja2dyb3VuZENvbG9yXCIsbmFtZTpcImJhY2tDb2xvclwiLHRlbXBsYXRlOm5ldyBzKHt0ZW1wbGF0ZTpvLmNvbG9yUGlja2VyVGVtcGxhdGUsdGl0bGU6XCJCYWNrZ3JvdW5kIENvbG9yXCJ9KX0pKSxoKFwiZm9udE5hbWVcIixuZXcgYih7Y3NzQXR0cjpcImZvbnQtZmFtaWx5XCIsZG9tQXR0cjpcImZvbnRGYW1pbHlcIixuYW1lOlwiZm9udE5hbWVcIixkZWZhdWx0VmFsdWU6W3t0ZXh0OlwiZm9udE5hbWVJbmhlcml0XCIsdmFsdWU6XCJpbmhlcml0XCJ9XSx0ZW1wbGF0ZTpuZXcgcyh7dGVtcGxhdGU6by5jb21ib0JveFRlbXBsYXRlLHRpdGxlOlwiRm9udCBOYW1lXCJ9KX0pKSxoKFwiZm9udFNpemVcIixuZXcgYih7Y3NzQXR0cjpcImZvbnQtc2l6ZVwiLGRvbUF0dHI6XCJmb250U2l6ZVwiLG5hbWU6XCJmb250U2l6ZVwiLGRlZmF1bHRWYWx1ZTpbe3RleHQ6XCJmb250U2l6ZUluaGVyaXRcIix2YWx1ZTpcImluaGVyaXRcIn1dLHRlbXBsYXRlOm5ldyBzKHt0ZW1wbGF0ZTpvLmNvbWJvQm94VGVtcGxhdGUsdGl0bGU6XCJGb250IFNpemVcIn0pfSkpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXt2YXIgdCxuPXdpbmRvdy5rZW5kbyxpPW4uQ2xhc3Mscj1lLmV4dGVuZCxvPW4udWkuZWRpdG9yLGE9bi51aS5FZGl0b3IuZm4ub3B0aW9ucy5mb3JtYXRzLHM9by5Eb20sbD1vLkNvbW1hbmQsYz1vLlRvb2xUZW1wbGF0ZSxkPW8uRm9ybWF0VG9vbCx1PW8uRWRpdG9yVXRpbHMsaD11LnJlZ2lzdGVyVG9vbCxwPXUucmVnaXN0ZXJGb3JtYXQsZj1vLlJhbmdlVXRpbHMsZz1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLmZvcm1hdD1lfSxjb250YWluczpmdW5jdGlvbihlLHQpe3ZhciBuLGkscjtmb3Iobj0wLGk9dC5sZW5ndGg7aT5uO24rKylpZihyPXRbbl0sIXJ8fCFzLmlzQW5jZXN0b3JPclNlbGYoZSxyKSlyZXR1cm4hMTtyZXR1cm4hMH0sZmluZFN1aXRhYmxlOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvLGE9dGhpcy5mb3JtYXQsbD1bXTtmb3Iobj0wLGk9dC5sZW5ndGg7aT5uO24rKyl7Zm9yKG89YS5sZW5ndGgtMTtvPj0wJiYhKHI9cy5vZlR5cGUodFtuXSxhW29dLnRhZ3MpP3Rbbl06cy5wYXJlbnRPZlR5cGUodFtuXSxhW29dLnRhZ3MpKTtvLS0pO2lmKCFyfHxcInRydWVcIj09PXIuY29udGVudEVkaXRhYmxlKXJldHVybltdO2UuaW5BcnJheShyLGwpPDAmJmwucHVzaChyKX1mb3Iobj0wLGk9bC5sZW5ndGg7aT5uO24rKylpZih0aGlzLmNvbnRhaW5zKGxbbl0sbCkpcmV0dXJuW2xbbl1dO3JldHVybiBsfSxmaW5kRm9ybWF0OmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYT10aGlzLmZvcm1hdCxsPXMuZWRpdGFibGVQYXJlbnQoZSk7Zm9yKHQ9MCxuPWEubGVuZ3RoO24+dDt0KyspZm9yKGk9ZSxyPWFbdF0udGFncyxvPWFbdF0uYXR0cjtpJiZzLmlzQW5jZXN0b3JPZihsLGkpOyl7aWYocy5vZlR5cGUoaSxyKSYmcy5hdHRyRXF1YWxzKGksbykpcmV0dXJuIGk7aT1pLnBhcmVudE5vZGV9cmV0dXJuIG51bGx9LGdldEZvcm1hdDpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcyxyPWZ1bmN0aW9uKGUpe3JldHVybiBpLmZpbmRGb3JtYXQocy5pc0RhdGFOb2RlKGUpP2UucGFyZW50Tm9kZTplKX0sbz1yKGVbMF0pO2lmKCFvKXJldHVyblwiXCI7Zm9yKHQ9MSxuPWUubGVuZ3RoO24+dDt0KyspaWYobyE9cihlW3RdKSlyZXR1cm5cIlwiO3JldHVybiBvLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCl9LGlzRm9ybWF0dGVkOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLG49ZS5sZW5ndGg7bj50O3QrKylpZighdGhpcy5maW5kRm9ybWF0KGVbdF0pKXJldHVybiExO3JldHVybiEwfX0pLG09aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLmZvcm1hdD1lLHRoaXMudmFsdWVzPXQsdGhpcy5maW5kZXI9bmV3IGcoZSl9LHdyYXA6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhLGwsYz0xPT1uLmxlbmd0aD9zLmJsb2NrUGFyZW50T3JCb2R5KG5bMF0pOnMuY29tbW9uQW5jZXN0b3IuYXBwbHkobnVsbCxuKTtmb3Iocy5pc0lubGluZShjKSYmKGM9cy5ibG9ja1BhcmVudE9yQm9keShjKSksaT1zLnNpZ25pZmljYW50Q2hpbGROb2RlcyhjKSxyPXMuZmluZE5vZGVJbmRleChpWzBdKSxvPXMuY3JlYXRlKGMub3duZXJEb2N1bWVudCxlLHQpLGE9MDtpLmxlbmd0aD5hO2ErKylsPWlbYV0scy5pc0Jsb2NrKGwpPyhzLmF0dHIobCx0KSxvLmNoaWxkTm9kZXMubGVuZ3RoJiYocy5pbnNlcnRCZWZvcmUobyxsKSxvPW8uY2xvbmVOb2RlKCExKSkscj1zLmZpbmROb2RlSW5kZXgobCkrMSk6by5hcHBlbmRDaGlsZChsKTtvLmZpcnN0Q2hpbGQmJnMuaW5zZXJ0QXQoYyxvLHIpfSxhcHBseTpmdW5jdGlvbih0KXtmdW5jdGlvbiBuKGUpe3JldHVybiByKHt9LGUmJmUuYXR0cixkKX12YXIgaSxvLGEsbCxjLGQ9dGhpcy52YWx1ZXMsaD1zLmZpbHRlcihcImltZ1wiLHQpLHA9dS5mb3JtYXRCeU5hbWUoXCJpbWdcIix0aGlzLmZvcm1hdCksZj1uKHApO2lmKGUuZWFjaChoLGZ1bmN0aW9uKCl7cy5hdHRyKHRoaXMsZil9KSxoLmxlbmd0aCE9dC5sZW5ndGgpaWYobz1zLmZpbHRlcihcImltZ1wiLHQsITApLGE9dGhpcy5maW5kZXIuZmluZFN1aXRhYmxlKG8pLGEubGVuZ3RoKWZvcihsPTAsYz1hLmxlbmd0aDtjPmw7bCsrKWk9dS5mb3JtYXRCeU5hbWUocy5uYW1lKGFbbF0pLHRoaXMuZm9ybWF0KSxzLmF0dHIoYVtsXSxuKGkpKTtlbHNlIGk9dGhpcy5mb3JtYXRbMF0sdGhpcy53cmFwKGkudGFnc1swXSxuKGkpLG8pfSxyZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbztmb3IodD0wLG49ZS5sZW5ndGg7bj50O3QrKylpPXRoaXMuZmluZGVyLmZpbmRGb3JtYXQoZVt0XSksaSYmKG89cy5uYW1lKGkpLFwiZGl2XCIhPW98fGkuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIik/KHI9dS5mb3JtYXRCeU5hbWUobyx0aGlzLmZvcm1hdCksci5hdHRyLnN0eWxlJiZzLnVuc3R5bGUoaSxyLmF0dHIuc3R5bGUpLHIuYXR0ci5jbGFzc05hbWUmJnMucmVtb3ZlQ2xhc3MoaSxyLmF0dHIuY2xhc3NOYW1lKSk6cy51bndyYXAoaSkpfSx0b2dnbGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWYubm9kZXMoZSk7dC5maW5kZXIuaXNGb3JtYXR0ZWQobik/dC5yZW1vdmUobik6dC5hcHBseShuKX19KSx2PWkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztuLmZvcm1hdD1lLG4udmFsdWVzPXQsbi5maW5kZXI9bmV3IGcoZSl9LGFwcGx5OmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLGEsbCxjLGQ9dGhpcy5mb3JtYXQsdT1zLmJsb2NrUGFyZW50cyhlKSxoPWRbMF0udGFnc1swXTtpZih1Lmxlbmd0aClmb3IodD0wLG49dS5sZW5ndGg7bj50O3QrKyljPXMubmFtZSh1W3RdKSxcImxpXCI9PWM/KGk9dVt0XS5wYXJlbnROb2RlLHI9bmV3IG8uTGlzdEZvcm1hdHRlcihpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksaCksYT10aGlzLmVkaXRvci5jcmVhdGVSYW5nZSgpLGEuc2VsZWN0Tm9kZSh1W3RdKSxyLnRvZ2dsZShhKSk6aCYmKFwidGRcIj09Y3x8dVt0XS5hdHRyaWJ1dGVzLmNvbnRlbnRFZGl0YWJsZSk/bmV3IG0oZCx0aGlzLnZhbHVlcykuYXBwbHkodVt0XS5jaGlsZE5vZGVzKToobD1zLmNoYW5nZVRhZyh1W3RdLGgpLHMuYXR0cihsLGRbMF0uYXR0cikpO2Vsc2UgbmV3IG0oZCx0aGlzLnZhbHVlcykuYXBwbHkoZSl9LHRvZ2dsZTpmdW5jdGlvbihlKXt2YXIgdD1mLnRleHROb2RlcyhlKTt0Lmxlbmd0aHx8KGUuc2VsZWN0Tm9kZUNvbnRlbnRzKGUuY29tbW9uQW5jZXN0b3JDb250YWluZXIpLHQ9Zi50ZXh0Tm9kZXMoZSksdC5sZW5ndGh8fCh0PXMuc2lnbmlmaWNhbnRDaGlsZE5vZGVzKGUuY29tbW9uQW5jZXN0b3JDb250YWluZXIpKSksdGhpcy5hcHBseSh0KX19KSxfPWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe2UuZm9ybWF0dGVyPWUuZm9ybWF0dGVyKCksbC5mbi5pbml0LmNhbGwodGhpcyxlKX19KSx5PWQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe2QuZm4uaW5pdC5jYWxsKHRoaXMscihlLHtmaW5kZXI6bmV3IGcoZS5mb3JtYXQpLGZvcm1hdHRlcjpmdW5jdGlvbigpe3JldHVybiBuZXcgbShlLmZvcm1hdCl9fSkpfX0pO3Iobyx7QmxvY2tGb3JtYXRGaW5kZXI6ZyxCbG9ja0Zvcm1hdHRlcjptLEdyZWVkeUJsb2NrRm9ybWF0dGVyOnYsRm9ybWF0Q29tbWFuZDpfLEJsb2NrRm9ybWF0VG9vbDp5fSksdD1bXCJ1bFwiLFwib2xcIixcImxpXCJdLHAoXCJqdXN0aWZ5TGVmdFwiLFt7dGFnczpzLm5vbkxpc3RCbG9ja0VsZW1lbnRzLGF0dHI6e3N0eWxlOnt0ZXh0QWxpZ246XCJsZWZ0XCJ9fX0se3RhZ3M6W1wiaW1nXCJdLGF0dHI6e3N0eWxlOntcImZsb2F0XCI6XCJsZWZ0XCIsZGlzcGxheTpcIlwiLG1hcmdpbkxlZnQ6XCJcIixtYXJnaW5SaWdodDpcIlwifX19LHt0YWdzOnQsYXR0cjp7c3R5bGU6e3RleHRBbGlnbjpcImxlZnRcIixsaXN0U3R5bGVQb3NpdGlvbjpcIlwifX19XSksaChcImp1c3RpZnlMZWZ0XCIsbmV3IHkoe2Zvcm1hdDphLmp1c3RpZnlMZWZ0LHRlbXBsYXRlOm5ldyBjKHt0ZW1wbGF0ZTp1LmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiSnVzdGlmeSBMZWZ0XCJ9KX0pKSxwKFwianVzdGlmeUNlbnRlclwiLFt7dGFnczpzLm5vbkxpc3RCbG9ja0VsZW1lbnRzLGF0dHI6e3N0eWxlOnt0ZXh0QWxpZ246XCJjZW50ZXJcIn19fSx7dGFnczpbXCJpbWdcIl0sYXR0cjp7c3R5bGU6e2Rpc3BsYXk6XCJibG9ja1wiLG1hcmdpbkxlZnQ6XCJhdXRvXCIsbWFyZ2luUmlnaHQ6XCJhdXRvXCIsXCJmbG9hdFwiOlwiXCJ9fX0se3RhZ3M6dCxhdHRyOntzdHlsZTp7dGV4dEFsaWduOlwiY2VudGVyXCIsbGlzdFN0eWxlUG9zaXRpb246XCJpbnNpZGVcIn19fV0pLGgoXCJqdXN0aWZ5Q2VudGVyXCIsbmV3IHkoe2Zvcm1hdDphLmp1c3RpZnlDZW50ZXIsdGVtcGxhdGU6bmV3IGMoe3RlbXBsYXRlOnUuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJKdXN0aWZ5IENlbnRlclwifSl9KSkscChcImp1c3RpZnlSaWdodFwiLFt7dGFnczpzLm5vbkxpc3RCbG9ja0VsZW1lbnRzLGF0dHI6e3N0eWxlOnt0ZXh0QWxpZ246XCJyaWdodFwifX19LHt0YWdzOltcImltZ1wiXSxhdHRyOntzdHlsZTp7XCJmbG9hdFwiOlwicmlnaHRcIixkaXNwbGF5OlwiXCIsbWFyZ2luTGVmdDpcIlwiLG1hcmdpblJpZ2h0OlwiXCJ9fX0se3RhZ3M6dCxhdHRyOntzdHlsZTp7dGV4dEFsaWduOlwicmlnaHRcIixsaXN0U3R5bGVQb3NpdGlvbjpcImluc2lkZVwifX19XSksaChcImp1c3RpZnlSaWdodFwiLG5ldyB5KHtmb3JtYXQ6YS5qdXN0aWZ5UmlnaHQsdGVtcGxhdGU6bmV3IGMoe3RlbXBsYXRlOnUuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJKdXN0aWZ5IFJpZ2h0XCJ9KX0pKSxwKFwianVzdGlmeUZ1bGxcIixbe3RhZ3M6cy5ub25MaXN0QmxvY2tFbGVtZW50cyxhdHRyOntzdHlsZTp7dGV4dEFsaWduOlwianVzdGlmeVwifX19LHt0YWdzOltcImltZ1wiXSxhdHRyOntzdHlsZTp7ZGlzcGxheTpcImJsb2NrXCIsbWFyZ2luTGVmdDpcImF1dG9cIixtYXJnaW5SaWdodDpcImF1dG9cIixcImZsb2F0XCI6XCJcIn19fSx7dGFnczp0LGF0dHI6e3N0eWxlOnt0ZXh0QWxpZ246XCJqdXN0aWZ5XCIsbGlzdFN0eWxlUG9zaXRpb246XCJcIn19fV0pLGgoXCJqdXN0aWZ5RnVsbFwiLG5ldyB5KHtmb3JtYXQ6YS5qdXN0aWZ5RnVsbCx0ZW1wbGF0ZTpuZXcgYyh7dGVtcGxhdGU6dS5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIkp1c3RpZnkgRnVsbFwifSl9KSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe3ZhciB0PXdpbmRvdy5rZW5kbyxuPWUuZXh0ZW5kLGk9dC51aS5lZGl0b3Iscj1pLkRvbSxvPWkuQ29tbWFuZCxhPWkuVG9vbCxzPWkuQmxvY2tGb3JtYXR0ZXIsbD1yLm5vcm1hbGl6ZSxjPWkuUmFuZ2VVdGlscyxkPWkuRWRpdG9yVXRpbHMucmVnaXN0ZXJUb29sLHU9by5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zPWUsby5mbi5pbml0LmNhbGwodGhpcyxlKX0sX2luc2VydE1hcmtlcjpmdW5jdGlvbihlLHQpe3ZhciBuLGk9ci5jcmVhdGUoZSxcImFcIik7cmV0dXJuIGkuY2xhc3NOYW1lPVwiay1tYXJrZXJcIix0Lmluc2VydE5vZGUoaSksaS5wYXJlbnROb2RlfHwobj10LmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyLG4uaW5uZXJIVE1MPVwiXCIsbi5hcHBlbmRDaGlsZChpKSksbChpLnBhcmVudE5vZGUpLGl9LF9tb3ZlRm9jdXM6ZnVuY3Rpb24oZSx0KXtpZihyLmlzKHQsXCJpbWdcIikpZS5zZXRTdGFydEJlZm9yZSh0KTtlbHNle2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKHQpO3ZhciBuPWMudGV4dE5vZGVzKGUpWzBdO2lmKG4pci5pcyhuLFwiaW1nXCIpP2Uuc2V0U3RhcnRCZWZvcmUobik6ZS5zZWxlY3ROb2RlQ29udGVudHMobik7ZWxzZXtmb3IoO3QuY2hpbGROb2Rlcy5sZW5ndGgmJiFyLmlzKHQuZmlyc3RDaGlsZCxcImJyXCIpOyl0PXQuZmlyc3RDaGlsZDtlLnNlbGVjdE5vZGVDb250ZW50cyh0KX19fSxzaG91bGRUcmltOmZ1bmN0aW9uKGUpe3ZhciB0PVwicCxoMSxoMixoMyxoNCxoNSxoNlwiLnNwbGl0KFwiLFwiKSxuPXIucGFyZW50T2ZUeXBlKGUuc3RhcnRDb250YWluZXIsdCksaT1yLnBhcmVudE9mVHlwZShlLmVuZENvbnRhaW5lcix0KTtyZXR1cm4gbiYmIWl8fCFuJiZpfSxfYmxhbmtBZnRlcjpmdW5jdGlvbihlKXtmb3IoO2UmJihyLmlzTWFya2VyKGUpfHxcIlwiPT09ci5zdHJpcEJvbShlLm5vZGVWYWx1ZSkpOyllPWUubmV4dFNpYmxpbmc7cmV0dXJuIWV9LGV4ZWM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4sbyxhLGQsdSxoLHA9dGhpcy5nZXRSYW5nZSgpLGY9Yy5kb2N1bWVudEZyb21SYW5nZShwKSxnPWkuZW1wdHlFbGVtZW50Q29udGVudCxtPXRoaXMuc2hvdWxkVHJpbShwKTtwLmRlbGV0ZUNvbnRlbnRzKCksYT10aGlzLl9pbnNlcnRNYXJrZXIoZixwKSxkPXIuY2xvc2VzdEVkaXRhYmxlT2ZUeXBlKGEsW1wibGlcIl0pLHU9ci5jbG9zZXN0RWRpdGFibGVPZlR5cGUoYSxcImgxLGgyLGgzLGg0LGg1LGg2XCIuc3BsaXQoXCIsXCIpKSxkP3IuZW1wdHlOb2RlKGQpJiYobz1yLmNyZWF0ZShmLFwicFwiKSxkLm5leHRTaWJsaW5nJiYoaD1wLmNsb25lUmFuZ2UoKSxoLnNlbGVjdE5vZGUoZCksYy5zcGxpdChoLGQucGFyZW50Tm9kZSkpLHIuaW5zZXJ0QWZ0ZXIobyxkLnBhcmVudE5vZGUpLHIucmVtb3ZlKDE9PWQucGFyZW50Tm9kZS5jaGlsZE5vZGVzLmxlbmd0aD9kLnBhcmVudE5vZGU6ZCksby5pbm5lckhUTUw9ZyxuPW8pOnUmJnRoaXMuX2JsYW5rQWZ0ZXIoYSkmJihvPXIuY3JlYXRlKGYsXCJwXCIpLHIuaW5zZXJ0QWZ0ZXIobyx1KSxvLmlubmVySFRNTD1nLHIucmVtb3ZlKGEpLG49byksbnx8KGR8fHV8fG5ldyBzKFt7dGFnczpbXCJwXCJdfV0pLmFwcGx5KFthXSkscC5zZWxlY3ROb2RlKGEpLGU9ci5wYXJlbnRPZlR5cGUoYSxbZD9cImxpXCI6dT9yLm5hbWUodSk6XCJwXCJdKSxjLnNwbGl0KHAsZSxtKSx0PWUucHJldmlvdXNTaWJsaW5nLHIuaXModCxcImxpXCIpJiZ0LmZpcnN0Q2hpbGQmJiFyLmlzKHQuZmlyc3RDaGlsZCxcImJyXCIpJiYodD10LmZpcnN0Q2hpbGQpLG49ZS5uZXh0U2libGluZyxyLmlzKG4sXCJsaVwiKSYmbi5maXJzdENoaWxkJiYhci5pcyhuLmZpcnN0Q2hpbGQsXCJiclwiKSYmKG49bi5maXJzdENoaWxkKSxyLnJlbW92ZShlKSx0aGlzLmNsZWFuKHQpLHRoaXMuY2xlYW4obix7bGlua3M6ITB9KSxsKHQpKSxsKG4pLHRoaXMuX21vdmVGb2N1cyhwLG4pLHAuY29sbGFwc2UoITApLHIuc2Nyb2xsVG8obiksYy5zZWxlY3RSYW5nZShwKX0sY2xlYW46ZnVuY3Rpb24oZSx0KXt2YXIgbj1lO2lmKGUuZmlyc3RDaGlsZCYmci5pcyhlLmZpcnN0Q2hpbGQsXCJiclwiKSYmci5yZW1vdmUoZS5maXJzdENoaWxkKSxyLmlzRGF0YU5vZGUoZSkmJiFlLm5vZGVWYWx1ZSYmKGU9ZS5wYXJlbnROb2RlKSxlKXtmb3IoO2UuZmlyc3RDaGlsZCYmMT09ZS5maXJzdENoaWxkLm5vZGVUeXBlOyllPWUuZmlyc3RDaGlsZDtpZighci5pc0VtcHR5KGUpJiYvXlxccyokLy50ZXN0KGUuaW5uZXJIVE1MKSYmKGUuaW5uZXJIVE1MPWkuZW1wdHlFbGVtZW50Q29udGVudCksdCYmdC5saW5rcylmb3IoO2UhPW47KXtpZihyLmlzKGUsXCJhXCIpJiZyLmVtcHR5Tm9kZShlKSl7ci51bndyYXAoZSk7YnJlYWt9ZT1lLnBhcmVudE5vZGV9fX19KSxoPW8uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucz1lLG8uZm4uaW5pdC5jYWxsKHRoaXMsZSl9LGV4ZWM6ZnVuY3Rpb24oKXt2YXIgZSxuPXRoaXMuZ2V0UmFuZ2UoKSxpPXIuY3JlYXRlKGMuZG9jdW1lbnRGcm9tUmFuZ2UobiksXCJiclwiKSxvPXQuc3VwcG9ydC5icm93c2VyLGE9by5tc2llJiYxMT5vLnZlcnNpb247bi5kZWxldGVDb250ZW50cygpLG4uaW5zZXJ0Tm9kZShpKSxsKGkucGFyZW50Tm9kZSksYXx8aS5uZXh0U2libGluZyYmIXIuaXNXaGl0ZXNwYWNlKGkubmV4dFNpYmxpbmcpfHwoZT1pLmNsb25lTm9kZSghMCksZS5jbGFzc05hbWU9XCJrLWJyXCIsci5pbnNlcnRBZnRlcihlLGkpKSxuLnNldFN0YXJ0QWZ0ZXIoaSksbi5jb2xsYXBzZSghMCksci5zY3JvbGxUbyhpLm5leHRTaWJsaW5nfHxpKSxjLnNlbGVjdFJhbmdlKG4pfX0pO24oaSx7UGFyYWdyYXBoQ29tbWFuZDp1LE5ld0xpbmVDb21tYW5kOmh9KSxkKFwiaW5zZXJ0TGluZUJyZWFrXCIsbmV3IGEoe2tleToxMyxzaGlmdDohMCxjb21tYW5kOmh9KSksZChcImluc2VydFBhcmFncmFwaFwiLG5ldyBhKHtrZXk6MTMsY29tbWFuZDp1fSkpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXt2YXIgdD13aW5kb3cua2VuZG8sbj10LkNsYXNzLGk9ZS5leHRlbmQscj10LnVpLmVkaXRvcixvPXIuRG9tLGE9ci5SYW5nZVV0aWxzLHM9ci5FZGl0b3JVdGlscyxsPXIuQ29tbWFuZCxjPXIuVG9vbFRlbXBsYXRlLGQ9ci5Gb3JtYXRUb29sLHU9ci5CbG9ja0Zvcm1hdEZpbmRlcixoPWEudGV4dE5vZGVzLHA9ci5FZGl0b3JVdGlscy5yZWdpc3RlclRvb2wsZj11LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLnRhZz1lO3ZhciB0PXRoaXMudGFncz1bXCJ1bFwiPT1lP1wib2xcIjpcInVsXCIsZV07dS5mbi5pbml0LmNhbGwodGhpcyxbe3RhZ3M6dH1dKX0saXNGb3JtYXR0ZWQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPVtdO2ZvcihuPTA7ZS5sZW5ndGg+bjtuKyspKHQ9dGhpcy5maW5kRm9ybWF0KGVbbl0pKSYmby5uYW1lKHQpPT10aGlzLnRhZyYmaS5wdXNoKHQpO2lmKDE+aS5sZW5ndGgpcmV0dXJuITE7aWYoaS5sZW5ndGghPWUubGVuZ3RoKXJldHVybiExO2ZvcihuPTA7aS5sZW5ndGg+biYmaVtuXS5wYXJlbnROb2RlPT10LnBhcmVudE5vZGU7bisrKWlmKGlbbl0hPXQpcmV0dXJuITE7cmV0dXJuITB9LGZpbmRTdWl0YWJsZTpmdW5jdGlvbihlKXt2YXIgdD1vLnBhcmVudE9mVHlwZShlWzBdLHRoaXMudGFncyk7cmV0dXJuIHQmJm8ubmFtZSh0KT09dGhpcy50YWc/dDpudWxsfX0pLGc9bi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO24uZmluZGVyPW5ldyBmKGUpLG4udGFnPWUsbi51bndyYXBUYWc9dH0saXNMaXN0OmZ1bmN0aW9uKGUpe3ZhciB0PW8ubmFtZShlKTtyZXR1cm5cInVsXCI9PXR8fFwib2xcIj09dHx8XCJkbFwiPT10fSx3cmFwOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPW8uY3JlYXRlKGUub3duZXJEb2N1bWVudCxcImxpXCIpO2ZvcihuPTA7dC5sZW5ndGg+bjtuKyspaWYoaT10W25dLG8uaXMoaSxcImxpXCIpKWUuYXBwZW5kQ2hpbGQoaSk7ZWxzZSBpZih0aGlzLmlzTGlzdChpKSlmb3IoO2kuZmlyc3RDaGlsZDspZS5hcHBlbmRDaGlsZChpLmZpcnN0Q2hpbGQpO2Vsc2UgaWYoby5pcyhpLFwidGRcIikpe2Zvcig7aS5maXJzdENoaWxkOylyLmFwcGVuZENoaWxkKGkuZmlyc3RDaGlsZCk7ZS5hcHBlbmRDaGlsZChyKSxpLmFwcGVuZENoaWxkKGUpLGU9ZS5jbG9uZU5vZGUoITEpLHI9ci5jbG9uZU5vZGUoITEpfWVsc2Ugci5hcHBlbmRDaGlsZChpKSxvLmlzQmxvY2soaSkmJihlLmFwcGVuZENoaWxkKHIpLG8udW53cmFwKGkpLHI9ci5jbG9uZU5vZGUoITEpKTtyLmZpcnN0Q2hpbGQmJmUuYXBwZW5kQ2hpbGQocil9LGNvbnRhaW5zQW55OmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTA7dC5sZW5ndGg+bjtuKyspaWYoby5pc0FuY2VzdG9yT3JTZWxmKGUsdFtuXSkpcmV0dXJuITA7cmV0dXJuITF9LHN1aXRhYmxlOmZ1bmN0aW9uKGUsdCl7aWYoXCJrLW1hcmtlclwiPT1lLmNsYXNzTmFtZSl7dmFyIG49ZS5uZXh0U2libGluZztpZihuJiZvLmlzQmxvY2sobikpcmV0dXJuITE7aWYobj1lLnByZXZpb3VzU2libGluZyxuJiZvLmlzQmxvY2sobikpcmV0dXJuITF9cmV0dXJuIHRoaXMuY29udGFpbnNBbnkoZSx0KXx8by5pc0lubGluZShlKXx8Mz09ZS5ub2RlVHlwZX0sc3BsaXQ6ZnVuY3Rpb24odCl7dmFyIG4saSxyLHMsbCxjLGQ9aCh0KTtpZihkLmxlbmd0aClmb3Iobj1vLnBhcmVudE9mVHlwZShkWzBdLFtcImxpXCJdKSxpPW8ucGFyZW50T2ZUeXBlKGRbZC5sZW5ndGgtMV0sW1wibGlcIl0pLHQuc2V0U3RhcnRCZWZvcmUobiksdC5zZXRFbmRBZnRlcihpKSxyPTAscz1kLmxlbmd0aDtzPnI7cisrKWw9dGhpcy5maW5kZXIuZmluZEZvcm1hdChkW3JdKSxsJiYoYz1lKGwpLnBhcmVudHMoXCJ1bCxvbFwiKSxjWzBdP2Euc3BsaXQodCxjLmxhc3QoKVswXSwhMCk6YS5zcGxpdCh0LGwsITApKX0sbWVyZ2U6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4saT10LnByZXZpb3VzU2libGluZztpJiYoXCJrLW1hcmtlclwiPT1pLmNsYXNzTmFtZXx8Mz09aS5ub2RlVHlwZSYmby5pc1doaXRlc3BhY2UoaSkpOylpPWkucHJldmlvdXNTaWJsaW5nO2lmKGkmJm8ubmFtZShpKT09ZSl7Zm9yKDt0LmZpcnN0Q2hpbGQ7KWkuYXBwZW5kQ2hpbGQodC5maXJzdENoaWxkKTtvLnJlbW92ZSh0KSx0PWl9Zm9yKG49dC5uZXh0U2libGluZztuJiYoXCJrLW1hcmtlclwiPT1uLmNsYXNzTmFtZXx8Mz09bi5ub2RlVHlwZSYmby5pc1doaXRlc3BhY2UobikpOyluPW4ubmV4dFNpYmxpbmc7aWYobiYmby5uYW1lKG4pPT1lKXtmb3IoO3QubGFzdENoaWxkOyluLmluc2VydEJlZm9yZSh0Lmxhc3RDaGlsZCxuLmZpcnN0Q2hpbGQpO28ucmVtb3ZlKHQpfX0sYnJlYWthYmxlOmZ1bmN0aW9uKGUpe3JldHVybiBlIT1lLm93bmVyRG9jdW1lbnQuYm9keSYmIS90YWJsZXx0Ym9keXx0cnx0ZC8udGVzdChvLm5hbWUoZSkpJiYhZS5hdHRyaWJ1dGVzLmNvbnRlbnRFZGl0YWJsZX0sYXBwbHlPblNlY3Rpb246ZnVuY3Rpb24odCxuKXtmdW5jdGlvbiBpKCl7dS5wdXNoKHRoaXMpfXZhciByLGEscyxsLGM9dGhpcy50YWcsZD1vLmNsb3Nlc3RTcGxpdHRhYmxlUGFyZW50KG4pLHU9W10saD10aGlzLmZpbmRlci5maW5kU3VpdGFibGUobik7Zm9yKGh8fChoPW5ldyBmKFwidWxcIj09Yz9cIm9sXCI6XCJ1bFwiKS5maW5kU3VpdGFibGUobikpLC90YWJsZXx0Ym9keS8udGVzdChvLm5hbWUoZCkpP3I9ZS5tYXAobixmdW5jdGlvbihlKXtyZXR1cm4gby5wYXJlbnRPZlR5cGUoZSxbXCJ0ZFwiXSl9KToocj1vLnNpZ25pZmljYW50Q2hpbGROb2RlcyhkKSxlLmdyZXAocixvLmlzQmxvY2spLmxlbmd0aCYmKHI9ZS5ncmVwKHIsZS5wcm94eShmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb250YWluc0FueShlLG4pfSx0aGlzKSkpLHIubGVuZ3RofHwocj1uKSksYT0wO3IubGVuZ3RoPmE7YSsrKXM9clthXSxsPSghaHx8IW8uaXNBbmNlc3Rvck9yU2VsZihoLHMpKSYmdGhpcy5zdWl0YWJsZShzLG4pLGwmJihoJiZ0aGlzLmlzTGlzdChzKT8oZS5lYWNoKHMuY2hpbGROb2RlcyxpKSxvLnJlbW92ZShzKSk6dS5wdXNoKHMpKTt1Lmxlbmd0aD09ci5sZW5ndGgmJnRoaXMuYnJlYWthYmxlKGQpJiYodT1bZF0pLGh8fChoPW8uY3JlYXRlKGQub3duZXJEb2N1bWVudCxjKSxvLmluc2VydEJlZm9yZShoLHVbMF0pKSx0aGlzLndyYXAoaCx1KSxvLmlzKGgsYyl8fG8uY2hhbmdlVGFnKGgsYyksdGhpcy5tZXJnZShjLGgpfSxhcHBseTpmdW5jdGlvbihlKXt2YXIgdCxuLGkscj0wLGE9W107ZG8gaT1vLmNsb3Nlc3RFZGl0YWJsZShlW3JdLFtcInRkXCIsXCJib2R5XCJdKSx0JiZpPT10P24ucHVzaChlW3JdKToodCYmYS5wdXNoKHtzZWN0aW9uOnQsbm9kZXM6bn0pLG49W2Vbcl1dLHQ9aSkscisrO3doaWxlKGUubGVuZ3RoPnIpO2ZvcihhLnB1c2goe3NlY3Rpb246dCxub2RlczpufSkscj0wO2EubGVuZ3RoPnI7cisrKXRoaXMuYXBwbHlPblNlY3Rpb24oYVtyXS5zZWN0aW9uLGFbcl0ubm9kZXMpfSx1bndyYXA6ZnVuY3Rpb24odCl7dmFyIG4saSxyLGEscz10Lm93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGw9dGhpcy51bndyYXBUYWc7Zm9yKGk9dC5maXJzdENoaWxkO2k7aT1pLm5leHRTaWJsaW5nKXtmb3Iocj1vLmNyZWF0ZSh0Lm93bmVyRG9jdW1lbnQsbHx8XCJwXCIpO2kuZmlyc3RDaGlsZDspYT1pLmZpcnN0Q2hpbGQsby5pc0Jsb2NrKGEpPyhyLmZpcnN0Q2hpbGQmJihzLmFwcGVuZENoaWxkKHIpLHI9by5jcmVhdGUodC5vd25lckRvY3VtZW50LGx8fFwicFwiKSkscy5hcHBlbmRDaGlsZChhKSk6ci5hcHBlbmRDaGlsZChhKTtyLmZpcnN0Q2hpbGQmJnMuYXBwZW5kQ2hpbGQocil9bj1lKHQpLnBhcmVudHMoXCJ1bCxvbFwiKSxuWzBdPyhvLmluc2VydEFmdGVyKHMsbi5sYXN0KClbMF0pLG4ubGFzdCgpLnJlbW92ZSgpKTpvLmluc2VydEFmdGVyKHMsdCksby5yZW1vdmUodCl9LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgdCxuLGk7Zm9yKG49MCxpPWUubGVuZ3RoO2k+bjtuKyspdD10aGlzLmZpbmRlci5maW5kRm9ybWF0KGVbbl0pLHQmJnRoaXMudW53cmFwKHQpfSx0b2dnbGU6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLGk9aChlKSxyPWUuY29tbW9uQW5jZXN0b3JDb250YWluZXI7aS5sZW5ndGh8fChlLnNlbGVjdE5vZGVDb250ZW50cyhyKSxpPWgoZSksaS5sZW5ndGh8fCh0PXIub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKSxlLnN0YXJ0Q29udGFpbmVyLmFwcGVuZENoaWxkKHQpLGk9W3RdLGUuc2VsZWN0Tm9kZSh0LnBhcmVudE5vZGUpKSksbi5maW5kZXIuaXNGb3JtYXR0ZWQoaSk/KG4uc3BsaXQoZSksbi5yZW1vdmUoaSkpOm4uYXBwbHkoaSl9fSksbT1sLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXtlLmZvcm1hdHRlcj1uZXcgZyhlLnRhZyksbC5mbi5pbml0LmNhbGwodGhpcyxlKX19KSx2PWQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucz1lLGQuZm4uaW5pdC5jYWxsKHRoaXMsaShlLHtmaW5kZXI6bmV3IGYoZS50YWcpfSkpfSxjb21tYW5kOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgbShpKGUse3RhZzp0aGlzLm9wdGlvbnMudGFnfSkpfX0pO2kocix7TGlzdEZvcm1hdEZpbmRlcjpmLExpc3RGb3JtYXR0ZXI6ZyxMaXN0Q29tbWFuZDptLExpc3RUb29sOnZ9KSxwKFwiaW5zZXJ0VW5vcmRlcmVkTGlzdFwiLG5ldyB2KHt0YWc6XCJ1bFwiLHRlbXBsYXRlOm5ldyBjKHt0ZW1wbGF0ZTpzLmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiSW5zZXJ0IHVub3JkZXJlZCBsaXN0XCJ9KX0pKSxwKFwiaW5zZXJ0T3JkZXJlZExpc3RcIixuZXcgdih7dGFnOlwib2xcIix0ZW1wbGF0ZTpuZXcgYyh7dGVtcGxhdGU6cy5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIkluc2VydCBvcmRlcmVkIGxpc3RcIn0pfSkpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXt2YXIgdD13aW5kb3cua2VuZG8sbj10LkNsYXNzLGk9ZS5leHRlbmQscj1lLnByb3h5LG89dC51aS5lZGl0b3IsYT1vLkRvbSxzPW8uUmFuZ2VVdGlscyxsPW8uRWRpdG9yVXRpbHMsYz1vLkNvbW1hbmQsZD1vLlRvb2wsdT1vLlRvb2xUZW1wbGF0ZSxoPW8uSW5saW5lRm9ybWF0dGVyLHA9by5JbmxpbmVGb3JtYXRGaW5kZXIsZj1zLnRleHROb2RlcyxnPW8uRWRpdG9yVXRpbHMucmVnaXN0ZXJUb29sLG09bi5leHRlbmQoe2ZpbmRTdWl0YWJsZTpmdW5jdGlvbihlKXtyZXR1cm4gYS5wYXJlbnRPZlR5cGUoZSxbXCJhXCJdKX19KSx2PW4uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7dGhpcy5maW5kZXI9bmV3IG19LGFwcGx5OmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sbCxjPWYoZSk7dC5pbm5lckhUTUw/KG49cy5nZXRNYXJrZXJzKGUpLGk9cy5kb2N1bWVudEZyb21SYW5nZShlKSxlLmRlbGV0ZUNvbnRlbnRzKCksbz1hLmNyZWF0ZShpLFwiYVwiLHQpLGUuaW5zZXJ0Tm9kZShvKSxsPW8ucGFyZW50Tm9kZSxcImFcIj09YS5uYW1lKGwpJiZhLmluc2VydEFmdGVyKG8sbCksYS5lbXB0eU5vZGUobCkmJmEucmVtb3ZlKGwpLG4ubGVuZ3RoPjEmJihhLmluc2VydEFmdGVyKG5bbi5sZW5ndGgtMV0sbyksYS5pbnNlcnRBZnRlcihuWzFdLG8pLGFbYy5sZW5ndGg+MD9cImluc2VydEJlZm9yZVwiOlwiaW5zZXJ0QWZ0ZXJcIl0oblswXSxvKSkpOihyPW5ldyBoKFt7dGFnczpbXCJhXCJdfV0sdCksci5maW5kZXI9dGhpcy5maW5kZXIsci5hcHBseShjKSl9fSksXz1jLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXtlLmZvcm1hdHRlcj17dG9nZ2xlOmZ1bmN0aW9uKGUpe25ldyBoKFt7dGFnczpbXCJhXCJdfV0pLnJlbW92ZShmKGUpKX19LHRoaXMub3B0aW9ucz1lLGMuZm4uaW5pdC5jYWxsKHRoaXMsZSl9fSkseT1jLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3Qub3B0aW9ucz1lLGMuZm4uaW5pdC5jYWxsKHQsZSksdC5mb3JtYXR0ZXI9bmV3IHYsZS51cmw/dGhpcy5leGVjPWZ1bmN0aW9uKCl7dGhpcy5mb3JtYXR0ZXIuYXBwbHkoZS5yYW5nZSx7aHJlZjplLnVybCxpbm5lckhUTUw6ZS50ZXh0fHxlLnVybCx0YXJnZXQ6ZS50YXJnZXR9KX06KHQuYXR0cmlidXRlcz1udWxsLHQuYXN5bmM9ITApfSxfZGlhbG9nVGVtcGxhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdC50ZW1wbGF0ZShcIjxkaXYgY2xhc3M9XFxcImstZWRpdG9yLWRpYWxvZyBrLXBvcHVwLWVkaXQtZm9ybSBrLWVkaXQtZm9ybS1jb250YWluZXJcXFwiPjxkaXYgY2xhc3M9J2stZWRpdC1sYWJlbCc+PGxhYmVsIGZvcj0nay1lZGl0b3ItbGluay11cmwnPiM6IG1lc3NhZ2VzLmxpbmtXZWJBZGRyZXNzICM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9J2stZWRpdC1maWVsZCc+PGlucHV0IHR5cGU9J3RleHQnIGNsYXNzPSdrLWlucHV0IGstdGV4dGJveCcgaWQ9J2stZWRpdG9yLWxpbmstdXJsJz48L2Rpdj48ZGl2IGNsYXNzPSdrLWVkaXQtbGFiZWwgay1lZGl0b3ItbGluay10ZXh0LXJvdyc+PGxhYmVsIGZvcj0nay1lZGl0b3ItbGluay10ZXh0Jz4jOiBtZXNzYWdlcy5saW5rVGV4dCAjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPSdrLWVkaXQtZmllbGQgay1lZGl0b3ItbGluay10ZXh0LXJvdyc+PGlucHV0IHR5cGU9J3RleHQnIGNsYXNzPSdrLWlucHV0IGstdGV4dGJveCcgaWQ9J2stZWRpdG9yLWxpbmstdGV4dCc+PC9kaXY+PGRpdiBjbGFzcz0nay1lZGl0LWxhYmVsJz48bGFiZWwgZm9yPSdrLWVkaXRvci1saW5rLXRpdGxlJz4jOiBtZXNzYWdlcy5saW5rVG9vbFRpcCAjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPSdrLWVkaXQtZmllbGQnPjxpbnB1dCB0eXBlPSd0ZXh0JyBjbGFzcz0nay1pbnB1dCBrLXRleHRib3gnIGlkPSdrLWVkaXRvci1saW5rLXRpdGxlJz48L2Rpdj48ZGl2IGNsYXNzPSdrLWVkaXQtbGFiZWwnPjwvZGl2PjxkaXYgY2xhc3M9J2stZWRpdC1maWVsZCc+PGlucHV0IHR5cGU9J2NoZWNrYm94JyBjbGFzcz0nay1jaGVja2JveCcgaWQ9J2stZWRpdG9yLWxpbmstdGFyZ2V0Jz48bGFiZWwgZm9yPSdrLWVkaXRvci1saW5rLXRhcmdldCc+IzogbWVzc2FnZXMubGlua09wZW5Jbk5ld1dpbmRvdyAjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPSdrLWVkaXQtYnV0dG9ucyBrLXN0YXRlLWRlZmF1bHQnPjxidXR0b24gY2xhc3M9XFxcImstZGlhbG9nLWluc2VydCBrLWJ1dHRvbiBrLXByaW1hcnlcXFwiPiM6IG1lc3NhZ2VzLmRpYWxvZ0luc2VydCAjPC9idXR0b24+PGJ1dHRvbiBjbGFzcz1cXFwiay1kaWFsb2ctY2xvc2Ugay1idXR0b25cXFwiPiM6IG1lc3NhZ2VzLmRpYWxvZ0NhbmNlbCAjPC9idXR0b24+PC9kaXY+PC9kaXY+XCIpKHttZXNzYWdlczp0aGlzLmVkaXRvci5vcHRpb25zLm1lc3NhZ2VzfSl9LGV4ZWM6ZnVuY3Rpb24oKXt2YXIgdCxuLGksbyxzPXRoaXMuZ2V0UmFuZ2UoKS5jb2xsYXBzZWQsbD10aGlzLmVkaXRvci5vcHRpb25zLm1lc3NhZ2VzO3RoaXMuX2luaXRpYWxUZXh0PVwiXCIsdGhpcy5fcmFuZ2U9dGhpcy5sb2NrUmFuZ2UoITApLHQ9Zih0aGlzLl9yYW5nZSksbj10Lmxlbmd0aD90aGlzLmZvcm1hdHRlci5maW5kZXIuZmluZFN1aXRhYmxlKHRbMF0pOm51bGwsaT10Lmxlbmd0aCYmXCJpbWdcIj09YS5uYW1lKHRbMF0pLG89dGhpcy5jcmVhdGVEaWFsb2codGhpcy5fZGlhbG9nVGVtcGxhdGUoKSx7dGl0bGU6bC5jcmVhdGVMaW5rLGNsb3NlOnIodGhpcy5fY2xvc2UsdGhpcyksdmlzaWJsZTohMX0pLG8uZmluZChcIi5rLWRpYWxvZy1pbnNlcnRcIikuY2xpY2socih0aGlzLl9hcHBseSx0aGlzKSkuZW5kKCkuZmluZChcIi5rLWRpYWxvZy1jbG9zZVwiKS5jbGljayhyKHRoaXMuX2Nsb3NlLHRoaXMpKS5lbmQoKS5maW5kKFwiLmstZWRpdC1maWVsZCBpbnB1dFwiKS5rZXlkb3duKHIodGhpcy5fa2V5ZG93bix0aGlzKSkuZW5kKCkuZmluZChcIiNrLWVkaXRvci1saW5rLXVybFwiKS52YWwodGhpcy5saW5rVXJsKG4pKS5lbmQoKS5maW5kKFwiI2stZWRpdG9yLWxpbmstdGV4dFwiKS52YWwodGhpcy5saW5rVGV4dCh0KSkuZW5kKCkuZmluZChcIiNrLWVkaXRvci1saW5rLXRpdGxlXCIpLnZhbChuP24udGl0bGU6XCJcIikuZW5kKCkuZmluZChcIiNrLWVkaXRvci1saW5rLXRhcmdldFwiKS5hdHRyKFwiY2hlY2tlZFwiLG4/XCJfYmxhbmtcIj09bi50YXJnZXQ6ITEpLmVuZCgpLmZpbmQoXCIuay1lZGl0b3ItbGluay10ZXh0LXJvd1wiKS50b2dnbGUoIWkpLHQubGVuZ3RoPjAmJiFzJiYodGhpcy5faW5pdGlhbFRleHQ9ZShcIiNrLWVkaXRvci1saW5rLXRleHRcIixvKS52YWwoKSksdGhpcy5fZGlhbG9nPW8uZGF0YShcImtlbmRvV2luZG93XCIpLmNlbnRlcigpLm9wZW4oKSxlKFwiI2stZWRpdG9yLWxpbmstdXJsXCIsbykuZm9jdXMoKS5zZWxlY3QoKX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIG49dC5rZXlzO2Uua2V5Q29kZT09bi5FTlRFUj90aGlzLl9hcHBseShlKTplLmtleUNvZGU9PW4uRVNDJiZ0aGlzLl9jbG9zZShlKX0sX2FwcGx5OmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvPXRoaXMuX2RpYWxvZy5lbGVtZW50LHM9ZShcIiNrLWVkaXRvci1saW5rLXVybFwiLG8pLnZhbCgpLGw9ZShcIiNrLWVkaXRvci1saW5rLXRleHRcIixvKTtzJiZcImh0dHA6Ly9cIiE9cyYmKHMuaW5kZXhPZihcIkBcIik+MCYmIS9eKFxcdys6KXwoXFwvXFwvKS9pLnRlc3QocykmJihzPVwibWFpbHRvOlwiK3MpLHRoaXMuYXR0cmlidXRlcz17aHJlZjpzfSxuPWUoXCIjay1lZGl0b3ItbGluay10aXRsZVwiLG8pLnZhbCgpLG4mJih0aGlzLmF0dHJpYnV0ZXMudGl0bGU9biksbC5pcyhcIjp2aXNpYmxlXCIpJiYoaT1sLnZhbCgpLGl8fHRoaXMuX2luaXRpYWxUZXh0P2kmJmkhPT10aGlzLl9pbml0aWFsVGV4dCYmKHRoaXMuYXR0cmlidXRlcy5pbm5lckhUTUw9YS5zdHJpcEJvbShpKSk6dGhpcy5hdHRyaWJ1dGVzLmlubmVySFRNTD1zKSxyPWUoXCIjay1lZGl0b3ItbGluay10YXJnZXRcIixvKS5pcyhcIjpjaGVja2VkXCIpLHRoaXMuYXR0cmlidXRlcy50YXJnZXQ9cj9cIl9ibGFua1wiOm51bGwsdGhpcy5mb3JtYXR0ZXIuYXBwbHkodGhpcy5fcmFuZ2UsdGhpcy5hdHRyaWJ1dGVzKSksdGhpcy5fY2xvc2UodCksdGhpcy5jaGFuZ2UmJnRoaXMuY2hhbmdlKCl9LF9jbG9zZTpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksdGhpcy5fZGlhbG9nLmRlc3Ryb3koKSxhLndpbmRvd0Zyb21Eb2N1bWVudChzLmRvY3VtZW50RnJvbVJhbmdlKHRoaXMuX3JhbmdlKSkuZm9jdXMoKSx0aGlzLnJlbGVhc2VSYW5nZSh0aGlzLl9yYW5nZSl9LGxpbmtVcmw6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/ZS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIsMik6XCJodHRwOi8vXCJ9LGxpbmtUZXh0OmZ1bmN0aW9uKGUpe3ZhciB0PVwiXCI7cmV0dXJuIDE9PWUubGVuZ3RoP3Q9ZVswXS5ub2RlVmFsdWU6ZS5sZW5ndGgmJih0PWVbMF0ubm9kZVZhbHVlK2VbMV0ubm9kZVZhbHVlKSxhLnN0cmlwQm9tKHR8fFwiXCIpfSxyZWRvOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sb2NrUmFuZ2UoITApO3RoaXMuZm9ybWF0dGVyLmFwcGx5KGUsdGhpcy5hdHRyaWJ1dGVzKSx0aGlzLnJlbGVhc2VSYW5nZShlKX19KSx3PWQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQpe3RoaXMub3B0aW9ucz10LHRoaXMuZmluZGVyPW5ldyBwKFt7dGFnczpbXCJhXCJdfV0pLGQuZm4uaW5pdC5jYWxsKHRoaXMsZS5leHRlbmQodCx7Y29tbWFuZDpffSkpfSxpbml0aWFsaXplOmZ1bmN0aW9uKGUsdCl7ZC5mbi5pbml0aWFsaXplLmNhbGwodGhpcyxlLHQpLGUuYWRkQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIpfSx1cGRhdGU6ZnVuY3Rpb24oZSx0KXtlLnRvZ2dsZUNsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiLCF0aGlzLmZpbmRlci5pc0Zvcm1hdHRlZCh0KSkucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWhvdmVyXCIpfX0pO2kodC51aS5lZGl0b3Ise0xpbmtGb3JtYXRGaW5kZXI6bSxMaW5rRm9ybWF0dGVyOnYsVW5saW5rQ29tbWFuZDpfLExpbmtDb21tYW5kOnksVW5saW5rVG9vbDp3fSksZyhcImNyZWF0ZUxpbmtcIixuZXcgZCh7a2V5OlwiS1wiLGN0cmw6ITAsY29tbWFuZDp5LHRlbXBsYXRlOm5ldyB1KHt0ZW1wbGF0ZTpsLmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiQ3JlYXRlIExpbmtcIn0pfSkpLGcoXCJ1bmxpbmtcIixuZXcgdyh7a2V5OlwiS1wiLGN0cmw6ITAsc2hpZnQ6ITAsdGVtcGxhdGU6bmV3IHUoe3RlbXBsYXRlOmwuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJSZW1vdmUgTGlua1wifSl9KSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG49d2luZG93LmtlbmRvLGk9ZS5leHRlbmQscj1uLnVpLmVkaXRvcixvPXIuRWRpdG9yVXRpbHMsYT1yLkRvbSxzPW8ucmVnaXN0ZXJUb29sLGw9ci5Ub29sVGVtcGxhdGUsYz1yLlJhbmdlVXRpbHMsZD1yLkNvbW1hbmQsdT1yLkxpbmtGb3JtYXR0ZXIsaD1jLnRleHROb2RlcyxwPW4ua2V5cyxmPVwiI2stZWRpdG9yLWZpbGUtdXJsXCIsZz1cIiNrLWVkaXRvci1maWxlLXRpdGxlXCIsbT1kLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2QuZm4uaW5pdC5jYWxsKHQsZSksdC5mb3JtYXR0ZXI9bmV3IHUsdC5hc3luYz0hMCx0LmF0dHJpYnV0ZXM9e319LGluc2VydEZpbGU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmF0dHJpYnV0ZXMsaT1jLmRvY3VtZW50RnJvbVJhbmdlKHQpO2lmKG4uaHJlZiYmXCJodHRwOi8vXCIhPW4uaHJlZil7aWYoIWUpcmV0dXJuIGU9YS5jcmVhdGUoaSxcImFcIix7aHJlZjpuLmhyZWZ9KSxlLmlubmVySFRNTD1uLmlubmVySFRNTCx0LmRlbGV0ZUNvbnRlbnRzKCksdC5pbnNlcnROb2RlKGUpLGUubmV4dFNpYmxpbmd8fGEuaW5zZXJ0QWZ0ZXIoaS5jcmVhdGVUZXh0Tm9kZShcIu+7v1wiKSxlKSx0LnNldFN0YXJ0QWZ0ZXIoZSksdC5zZXRFbmRBZnRlcihlKSxjLnNlbGVjdFJhbmdlKHQpLCEwO2EuYXR0cihlLG4pfXJldHVybiExfSxfZGlhbG9nVGVtcGxhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG4udGVtcGxhdGUoJzxkaXYgY2xhc3M9XCJrLWVkaXRvci1kaWFsb2cgay1wb3B1cC1lZGl0LWZvcm0gay1lZGl0LWZvcm0tY29udGFpbmVyXCI+IyBpZiAoc2hvd0Jyb3dzZXIpIHsgIzxkaXYgY2xhc3M9XCJrLWZpbGVicm93c2VyXCI+PC9kaXY+IyB9ICM8ZGl2IGNsYXNzPVxcJ2stZWRpdC1sYWJlbFxcJz48bGFiZWwgZm9yPVwiay1lZGl0b3ItZmlsZS11cmxcIj4jOiBtZXNzYWdlcy5maWxlV2ViQWRkcmVzcyAjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVxcJ2stZWRpdC1maWVsZFxcJz48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImstaW5wdXQgay10ZXh0Ym94XCIgaWQ9XCJrLWVkaXRvci1maWxlLXVybFwiPjwvZGl2PjxkaXYgY2xhc3M9XFwnay1lZGl0LWxhYmVsXFwnPjxsYWJlbCBmb3I9XCJrLWVkaXRvci1maWxlLXRpdGxlXCI+IzogbWVzc2FnZXMuZmlsZVRpdGxlICM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XFwnay1lZGl0LWZpZWxkXFwnPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiay1pbnB1dCBrLXRleHRib3hcIiBpZD1cImstZWRpdG9yLWZpbGUtdGl0bGVcIj48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWJ1dHRvbnMgay1zdGF0ZS1kZWZhdWx0XCI+PGJ1dHRvbiBjbGFzcz1cImstZGlhbG9nLWluc2VydCBrLWJ1dHRvbiBrLXByaW1hcnlcIj4jOiBtZXNzYWdlcy5kaWFsb2dJbnNlcnQgIzwvYnV0dG9uPjxidXR0b24gY2xhc3M9XCJrLWRpYWxvZy1jbG9zZSBrLWJ1dHRvblwiPiM6IG1lc3NhZ2VzLmRpYWxvZ0NhbmNlbCAjPC9idXR0b24+PC9kaXY+PC9kaXY+Jykoe21lc3NhZ2VzOnRoaXMuZWRpdG9yLm9wdGlvbnMubWVzc2FnZXMsc2hvd0Jyb3dzZXI6ZX0pfSxyZWRvOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUubG9ja1JhbmdlKCk7dGhpcy5mb3JtYXR0ZXIuYXBwbHkodCx0aGlzLmF0dHJpYnV0ZXMpLGUucmVsZWFzZVJhbmdlKHQpfSxleGVjOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2YXIgdD1zLmVsZW1lbnQsbj10LmZpbmQoZikudmFsKCkucmVwbGFjZSgvIC9nLFwiJTIwXCIpLGk9dC5maW5kKGcpLnZhbCgpO2wuYXR0cmlidXRlcz17aHJlZjpuLGlubmVySFRNTDpcIlwiIT09aT9pOm59LG09bC5pbnNlcnRGaWxlKHYsZCkscihlKSxsLmNoYW5nZSYmbC5jaGFuZ2UoKX1mdW5jdGlvbiByKGUpe2UucHJldmVudERlZmF1bHQoKSxzLmRlc3Ryb3koKSxhLndpbmRvd0Zyb21Eb2N1bWVudChjLmRvY3VtZW50RnJvbVJhbmdlKGQpKS5mb2N1cygpLG18fGwucmVsZWFzZVJhbmdlKGQpfWZ1bmN0aW9uIG8odCl7dC5rZXlDb2RlPT1wLkVOVEVSP2UodCk6dC5rZXlDb2RlPT1wLkVTQyYmcih0KX12YXIgcyxsPXRoaXMsZD1sLmxvY2tSYW5nZSgpLHU9aChkKSxtPSExLHY9dS5sZW5ndGg/dGhpcy5mb3JtYXR0ZXIuZmluZGVyLmZpbmRTdWl0YWJsZSh1WzBdKTpudWxsLF89bC5lZGl0b3Iub3B0aW9ucyx5PV8ubWVzc2FnZXMsdz1fLmZpbGVCcm93c2VyLGI9ISEobi51aS5GaWxlQnJvd3NlciYmdyYmdy50cmFuc3BvcnQmJncudHJhbnNwb3J0LnJlYWQhPT10KSxrPXt0aXRsZTp5Lmluc2VydEZpbGUsdmlzaWJsZTohMSxyZXNpemFibGU6Yn07ay5jbG9zZT1yLGImJihrLndpZHRoPTc1MCkscz10aGlzLmNyZWF0ZURpYWxvZyhsLl9kaWFsb2dUZW1wbGF0ZShiKSxrKS50b2dnbGVDbGFzcyhcImstZmlsZWJyb3dzZXItZGlhbG9nXCIsYikuZmluZChcIi5rLWRpYWxvZy1pbnNlcnRcIikuY2xpY2soZSkuZW5kKCkuZmluZChcIi5rLWRpYWxvZy1jbG9zZVwiKS5jbGljayhyKS5lbmQoKS5maW5kKFwiLmstZWRpdC1maWVsZCBpbnB1dFwiKS5rZXlkb3duKG8pLmVuZCgpLmZpbmQoZikudmFsKHY/di5nZXRBdHRyaWJ1dGUoXCJocmVmXCIsMik6XCJodHRwOi8vXCIpLmVuZCgpLmZpbmQoZykudmFsKHY/di50aXRsZTpcIlwiKS5lbmQoKS5kYXRhKFwia2VuZG9XaW5kb3dcIiksYiYmbmV3IG4udWkuRmlsZUJyb3dzZXIocy5lbGVtZW50LmZpbmQoXCIuay1maWxlYnJvd3NlclwiKSxpKHt9LHcse2NoYW5nZTpmdW5jdGlvbigpe3MuZWxlbWVudC5maW5kKGYpLnZhbCh0aGlzLnZhbHVlKCkpfSxhcHBseTplfSkpLHMuY2VudGVyKCkub3BlbigpLHMuZWxlbWVudC5maW5kKGYpLmZvY3VzKCkuc2VsZWN0KCl9fSk7bi51aS5lZGl0b3IuRmlsZUNvbW1hbmQ9bSxzKFwiaW5zZXJ0RmlsZVwiLG5ldyByLlRvb2woe2NvbW1hbmQ6bSx0ZW1wbGF0ZTpuZXcgbCh7dGVtcGxhdGU6by5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIkluc2VydCBGaWxlXCJ9KX0pKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXt2YXIgbj13aW5kb3cua2VuZG8saT1lLmV4dGVuZCxyPW4udWkuZWRpdG9yLG89ci5FZGl0b3JVdGlscyxhPXIuRG9tLHM9by5yZWdpc3RlclRvb2wsbD1yLlRvb2xUZW1wbGF0ZSxjPXIuUmFuZ2VVdGlscyxkPXIuQ29tbWFuZCx1PW4ua2V5cyxoPVwiI2stZWRpdG9yLWltYWdlLXVybFwiLHA9XCIjay1lZGl0b3ItaW1hZ2UtdGl0bGVcIixmPVwiI2stZWRpdG9yLWltYWdlLXdpZHRoXCIsZz1cIiNrLWVkaXRvci1pbWFnZS1oZWlnaHRcIixtPWQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7XG5kLmZuLmluaXQuY2FsbCh0LGUpLHQuYXN5bmM9ITAsdC5hdHRyaWJ1dGVzPXt9fSxpbnNlcnRJbWFnZTpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcy5hdHRyaWJ1dGVzLHI9Yy5kb2N1bWVudEZyb21SYW5nZSh0KTtpZihpLnNyYyYmXCJodHRwOi8vXCIhPWkuc3JjKXtpZihuPWZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe2kud2lkdGh8fGUucmVtb3ZlQXR0cmlidXRlKFwid2lkdGhcIiksaS5oZWlnaHR8fGUucmVtb3ZlQXR0cmlidXRlKFwiaGVpZ2h0XCIpLGUucmVtb3ZlQXR0cmlidXRlKFwiY29tcGxldGVcIil9KX0sIWUpcmV0dXJuIGU9YS5jcmVhdGUocixcImltZ1wiLGkpLGUub25sb2FkPWUub25lcnJvcj1mdW5jdGlvbigpe24oKX0sdC5kZWxldGVDb250ZW50cygpLHQuaW5zZXJ0Tm9kZShlKSxlLm5leHRTaWJsaW5nfHxhLmluc2VydEFmdGVyKHIuY3JlYXRlVGV4dE5vZGUoXCLvu79cIiksZSksbigpLHQuc2V0U3RhcnRBZnRlcihlKSx0LnNldEVuZEFmdGVyKGUpLGMuc2VsZWN0UmFuZ2UodCksITA7YS5hdHRyKGUsaSksbigpfXJldHVybiExfSxfZGlhbG9nVGVtcGxhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG4udGVtcGxhdGUoJzxkaXYgY2xhc3M9XCJrLWVkaXRvci1kaWFsb2cgay1wb3B1cC1lZGl0LWZvcm0gay1lZGl0LWZvcm0tY29udGFpbmVyXCI+IyBpZiAoc2hvd0Jyb3dzZXIpIHsgIzxkaXYgY2xhc3M9XCJrLWZpbGVicm93c2VyIGstaW1hZ2Vicm93c2VyXCI+PC9kaXY+IyB9ICM8ZGl2IGNsYXNzPVxcJ2stZWRpdC1sYWJlbFxcJz48bGFiZWwgZm9yPVwiay1lZGl0b3ItaW1hZ2UtdXJsXCI+IzogbWVzc2FnZXMuaW1hZ2VXZWJBZGRyZXNzICM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XFwnay1lZGl0LWZpZWxkXFwnPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiay1pbnB1dCBrLXRleHRib3hcIiBpZD1cImstZWRpdG9yLWltYWdlLXVybFwiPjwvZGl2PjxkaXYgY2xhc3M9XFwnay1lZGl0LWxhYmVsXFwnPjxsYWJlbCBmb3I9XCJrLWVkaXRvci1pbWFnZS10aXRsZVwiPiM6IG1lc3NhZ2VzLmltYWdlQWx0VGV4dCAjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVxcJ2stZWRpdC1maWVsZFxcJz48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImstaW5wdXQgay10ZXh0Ym94XCIgaWQ9XCJrLWVkaXRvci1pbWFnZS10aXRsZVwiPjwvZGl2PjxkaXYgY2xhc3M9XFwnay1lZGl0LWxhYmVsXFwnPjxsYWJlbCBmb3I9XCJrLWVkaXRvci1pbWFnZS13aWR0aFwiPiM6IG1lc3NhZ2VzLmltYWdlV2lkdGggIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cXCdrLWVkaXQtZmllbGRcXCc+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJrLWlucHV0IGstdGV4dGJveFwiIGlkPVwiay1lZGl0b3ItaW1hZ2Utd2lkdGhcIj48L2Rpdj48ZGl2IGNsYXNzPVxcJ2stZWRpdC1sYWJlbFxcJz48bGFiZWwgZm9yPVwiay1lZGl0b3ItaW1hZ2UtaGVpZ2h0XCI+IzogbWVzc2FnZXMuaW1hZ2VIZWlnaHQgIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cXCdrLWVkaXQtZmllbGRcXCc+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJrLWlucHV0IGstdGV4dGJveFwiIGlkPVwiay1lZGl0b3ItaW1hZ2UtaGVpZ2h0XCI+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1idXR0b25zIGstc3RhdGUtZGVmYXVsdFwiPjxidXR0b24gY2xhc3M9XCJrLWRpYWxvZy1pbnNlcnQgay1idXR0b24gay1wcmltYXJ5XCI+IzogbWVzc2FnZXMuZGlhbG9nSW5zZXJ0ICM8L2J1dHRvbj48YnV0dG9uIGNsYXNzPVwiay1kaWFsb2ctY2xvc2Ugay1idXR0b25cIj4jOiBtZXNzYWdlcy5kaWFsb2dDYW5jZWwgIzwvYnV0dG9uPjwvZGl2PjwvZGl2PicpKHttZXNzYWdlczp0aGlzLmVkaXRvci5vcHRpb25zLm1lc3NhZ2VzLHNob3dCcm93c2VyOmV9KX0scmVkbzpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmxvY2tSYW5nZSgpO2UuaW5zZXJ0SW1hZ2UoYy5pbWFnZSh0KSx0KXx8ZS5yZWxlYXNlUmFuZ2UodCl9LGV4ZWM6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3ZhciB0PXMuZWxlbWVudCxuPXBhcnNlSW50KHQuZmluZChmKS52YWwoKSwxMCksaT1wYXJzZUludCh0LmZpbmQoZykudmFsKCksMTApO2wuYXR0cmlidXRlcz17c3JjOnQuZmluZChoKS52YWwoKS5yZXBsYWNlKC8gL2csXCIlMjBcIiksYWx0OnQuZmluZChwKS52YWwoKX0sbC5hdHRyaWJ1dGVzLndpZHRoPW51bGwsbC5hdHRyaWJ1dGVzLmhlaWdodD1udWxsLCFpc05hTihuKSYmbj4wJiYobC5hdHRyaWJ1dGVzLndpZHRoPW4pLCFpc05hTihpKSYmaT4wJiYobC5hdHRyaWJ1dGVzLmhlaWdodD1pKSxtPWwuaW5zZXJ0SW1hZ2UodixkKSxyKGUpLGwuY2hhbmdlJiZsLmNoYW5nZSgpfWZ1bmN0aW9uIHIoZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHMuZGVzdHJveSgpLGEud2luZG93RnJvbURvY3VtZW50KGMuZG9jdW1lbnRGcm9tUmFuZ2UoZCkpLmZvY3VzKCksbXx8bC5yZWxlYXNlUmFuZ2UoZCl9ZnVuY3Rpb24gbyh0KXt0LmtleUNvZGU9PXUuRU5URVI/ZSh0KTp0LmtleUNvZGU9PXUuRVNDJiZyKHQpfXZhciBzLGw9dGhpcyxkPWwubG9ja1JhbmdlKCksbT0hMSx2PWMuaW1hZ2UoZCksXz12JiZ2LmdldEF0dHJpYnV0ZShcIndpZHRoXCIpfHxcIlwiLHk9diYmdi5nZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIil8fFwiXCIsdz1sLmVkaXRvci5vcHRpb25zLGI9dy5tZXNzYWdlcyxrPXcuaW1hZ2VCcm93c2VyLHg9ISEobi51aS5JbWFnZUJyb3dzZXImJmsmJmsudHJhbnNwb3J0JiZrLnRyYW5zcG9ydC5yZWFkIT09dCksQz17dGl0bGU6Yi5pbnNlcnRJbWFnZSx2aXNpYmxlOiExLHJlc2l6YWJsZTp4fTtDLmNsb3NlPXIseCYmKEMud2lkdGg9NzUwKSxzPXRoaXMuY3JlYXRlRGlhbG9nKGwuX2RpYWxvZ1RlbXBsYXRlKHgpLEMpLnRvZ2dsZUNsYXNzKFwiay1maWxlYnJvd3Nlci1kaWFsb2dcIix4KS5maW5kKFwiLmstZGlhbG9nLWluc2VydFwiKS5jbGljayhlKS5lbmQoKS5maW5kKFwiLmstZGlhbG9nLWNsb3NlXCIpLmNsaWNrKHIpLmVuZCgpLmZpbmQoXCIuay1lZGl0LWZpZWxkIGlucHV0XCIpLmtleWRvd24obykuZW5kKCkuZmluZChoKS52YWwodj92LmdldEF0dHJpYnV0ZShcInNyY1wiLDIpOlwiaHR0cDovL1wiKS5lbmQoKS5maW5kKHApLnZhbCh2P3YuYWx0OlwiXCIpLmVuZCgpLmZpbmQoZikudmFsKF8pLmVuZCgpLmZpbmQoZykudmFsKHkpLmVuZCgpLmRhdGEoXCJrZW5kb1dpbmRvd1wiKSx4JiZuZXcgbi51aS5JbWFnZUJyb3dzZXIocy5lbGVtZW50LmZpbmQoXCIuay1pbWFnZWJyb3dzZXJcIiksaSh7fSxrLHtjaGFuZ2U6ZnVuY3Rpb24oKXtzLmVsZW1lbnQuZmluZChoKS52YWwodGhpcy52YWx1ZSgpKX0sYXBwbHk6ZX0pKSxzLmNlbnRlcigpLm9wZW4oKSxzLmVsZW1lbnQuZmluZChoKS5mb2N1cygpLnNlbGVjdCgpfX0pO24udWkuZWRpdG9yLkltYWdlQ29tbWFuZD1tLHMoXCJpbnNlcnRJbWFnZVwiLG5ldyByLlRvb2woe2NvbW1hbmQ6bSx0ZW1wbGF0ZTpuZXcgbCh7dGVtcGxhdGU6by5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIkluc2VydCBJbWFnZVwifSl9KSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG49d2luZG93LmtlbmRvLGk9bi51aS5Ecm9wRG93bkxpc3Qscj1uLnVpLmVkaXRvci5Eb20sbz1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LHIpe3ZhciBvPXRoaXM7aS5mbi5pbml0LmNhbGwobyx0LHIpLG4uc3VwcG9ydC5tb2JpbGVPUy5pb3MmJih0aGlzLl9pbml0U2VsZWN0T3ZlcmxheSgpLHRoaXMuYmluZChcImRhdGFCb3VuZFwiLGUucHJveHkodGhpcy5faW5pdFNlbGVjdE92ZXJsYXksdGhpcykpKSxvLnZhbHVlKG8ub3B0aW9ucy50aXRsZSksby5iaW5kKFwib3BlblwiLGZ1bmN0aW9uKCl7aWYoby5vcHRpb25zLmF1dG9TaXplKXt2YXIgZSx0PW8ubGlzdDt0LmNzcyh7d2hpdGVTcGFjZTpcIm5vd3JhcFwiLHdpZHRoOlwiYXV0b1wifSksZT10LndpZHRoKCksZT9lKz0yMDplPW8uX2xpc3RXaWR0aCx0LmNzcyhcIndpZHRoXCIsZStuLnN1cHBvcnQuc2Nyb2xsYmFyKCkpLG8uX2xpc3RXaWR0aD1lfX0pfSxvcHRpb25zOntuYW1lOlwiU2VsZWN0Qm94XCJ9LF9pbml0U2VsZWN0T3ZlcmxheTpmdW5jdGlvbigpe3ZhciB0LGkscixvLGE9dGhpcyxzPWEudmFsdWUoKSxsPXRoaXMuZGF0YVNvdXJjZS52aWV3KCksYz1cIlwiLGQ9bi5odG1sRW5jb2RlO2ZvcihpPTA7bC5sZW5ndGg+aTtpKyspdD1sW2ldLGMrPVwiPG9wdGlvbiB2YWx1ZT0nXCIrZCh0LnZhbHVlKStcIidcIix0LnZhbHVlPT1zJiYoYys9XCIgc2VsZWN0ZWRcIiksYys9XCI+XCIrZCh0LnRleHQpK1wiPC9vcHRpb24+XCI7cj1lKFwiPHNlbGVjdCBjbGFzcz0nay1zZWxlY3Qtb3ZlcmxheSc+XCIrYytcIjwvc2VsZWN0PlwiKSxvPWUodGhpcy5lbGVtZW50KS5jbG9zZXN0KFwiLmstd2lkZ2V0XCIpLG8ubmV4dChcIi5rLXNlbGVjdC1vdmVybGF5XCIpLnJlbW92ZSgpLHIuaW5zZXJ0QWZ0ZXIobyksci5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7YS52YWx1ZSh0aGlzLnZhbHVlKSxhLnRyaWdnZXIoXCJjaGFuZ2VcIil9KX0sdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxyPWkuZm4udmFsdWUuY2FsbChuLGUpO3JldHVybiBlPT09dD9yOihlIT09aS5mbi52YWx1ZS5jYWxsKG4pJiYobi50ZXh0KG4ub3B0aW9ucy50aXRsZSksbi5fY3VycmVudCYmbi5fY3VycmVudC5yZW1vdmVDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIiksbi5jdXJyZW50KG51bGwpLG4uX29sZEluZGV4PW4uc2VsZWN0ZWRJbmRleD0tMSksdCl9LGRlY29yYXRlOmZ1bmN0aW9uKHQpe3ZhciBuLGksbyxhLHM9dGhpcyxsPXMuZGF0YVNvdXJjZSxjPWwuZGF0YSgpO2Zvcih0JiZzLmxpc3QuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLHIuZ2V0RWZmZWN0aXZlQmFja2dyb3VuZChlKHQpKSksbj0wO2MubGVuZ3RoPm47bisrKWk9Y1tuXS50YWd8fFwic3BhblwiLG89Y1tuXS5jbGFzc05hbWUsYT1yLmlubGluZVN0eWxlKHQsaSx7Y2xhc3NOYW1lOm99KSxhPWEucmVwbGFjZSgvXCIvZyxcIidcIiksY1tuXS5zdHlsZT1hK1wiO2Rpc3BsYXk6aW5saW5lLWJsb2NrXCI7bC50cmlnZ2VyKFwiY2hhbmdlXCIpfX0pO24udWkucGx1Z2luKG8pLG4udWkuZWRpdG9yLlNlbGVjdEJveD1vfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4obixpKXt2YXIgcj1cInJ0bFwiPT1lKG4pLmNzcyhcImRpcmVjdGlvblwiKSxvPXI/XCJSaWdodFwiOlwiTGVmdFwiLGE9XCJ0ZFwiIT1zLm5hbWUobik/XCJtYXJnaW5cIitvOlwicGFkZGluZ1wiK287cmV0dXJuIGk9PT10P24uc3R5bGVbYV18fDA6KGk+MD9uLnN0eWxlW2FdPWkrXCJweFwiOihuLnN0eWxlW2FdPVwiXCIsbi5zdHlsZS5jc3NUZXh0fHxuLnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIpKSx0KX12YXIgaT13aW5kb3cua2VuZG8scj1pLkNsYXNzLG89ZS5leHRlbmQsYT1pLnVpLmVkaXRvcixzPWEuRG9tLGw9YS5FZGl0b3JVdGlscyxjPWwucmVnaXN0ZXJUb29sLGQ9YS5Db21tYW5kLHU9YS5Ub29sLGg9YS5Ub29sVGVtcGxhdGUscD1hLlJhbmdlVXRpbHMsZj1zLmJsb2NrRWxlbWVudHMsZz1hLkJsb2NrRm9ybWF0RmluZGVyLG09YS5CbG9ja0Zvcm1hdHRlcix2PXIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7dGhpcy5maW5kZXI9bmV3IGcoW3t0YWdzOnMuYmxvY2tFbGVtZW50c31dKX0sYXBwbHk6ZnVuY3Rpb24odCl7dmFyIGkscixvLGEsbCxjLGQsdSxoLHAsZj10aGlzLmZpbmRlci5maW5kU3VpdGFibGUodCksZz1bXTtpZihmLmxlbmd0aCl7Zm9yKGk9MCxyPWYubGVuZ3RoO3I+aTtpKyspcy5pcyhmW2ldLFwibGlcIik/ZShmW2ldKS5pbmRleCgpP2UuaW5BcnJheShmW2ldLnBhcmVudE5vZGUsZyk8MCYmZy5wdXNoKGZbaV0pOmcucHVzaChmW2ldLnBhcmVudE5vZGUpOmcucHVzaChmW2ldKTtmb3IoO2cubGVuZ3RoOylpZihvPWcuc2hpZnQoKSxzLmlzKG8sXCJsaVwiKSlpZihhPW8ucGFyZW50Tm9kZSxsPWUobykucHJldihcImxpXCIpLGM9bC5maW5kKFwidWwsb2xcIikubGFzdCgpLGQ9ZShvKS5jaGlsZHJlbihcInVsLG9sXCIpWzBdLGQmJmxbMF0pY1swXT8oYy5hcHBlbmQobyksYy5hcHBlbmQoZShkKS5jaGlsZHJlbigpKSxzLnJlbW92ZShkKSk6KGwuYXBwZW5kKGQpLGQuaW5zZXJ0QmVmb3JlKG8sZC5maXJzdENoaWxkKSk7ZWxzZSBmb3IoZD1sLmNoaWxkcmVuKFwidWwsb2xcIilbMF0sZHx8KGQ9cy5jcmVhdGUoby5vd25lckRvY3VtZW50LHMubmFtZShhKSksbC5hcHBlbmQoZCkpO28mJm8ucGFyZW50Tm9kZT09YTspZC5hcHBlbmRDaGlsZChvKSxvPWcuc2hpZnQoKTtlbHNlIGZvcih1PXBhcnNlSW50KG4obyksMTApKzMwLG4obyx1KSxoPTA7Zy5sZW5ndGg+aDtoKyspZS5jb250YWlucyhvLGdbaF0pJiZnLnNwbGljZShoLDEpfWVsc2UgcD1uZXcgbShbe3RhZ3M6W1wicFwiXX1dLHtzdHlsZTp7bWFyZ2luTGVmdDozMH19KSxwLmFwcGx5KHQpfSxyZW1vdmU6ZnVuY3Rpb24odCl7dmFyIGkscixvLGEscyxsLGMsZCx1PXRoaXMuZmluZGVyLmZpbmRTdWl0YWJsZSh0KTtmb3Iocj0wLG89dS5sZW5ndGg7bz5yO3IrKyl7aWYoYz1lKHVbcl0pLGMuaXMoXCJsaVwiKSl7aWYoYT1jLnBhcmVudCgpLHM9YS5wYXJlbnQoKSxzLmlzKFwibGksdWwsb2xcIikmJiFuKGFbMF0pKXtpZihpJiZlLmNvbnRhaW5zKGksc1swXSkpY29udGludWU7bD1jLm5leHRBbGwoXCJsaVwiKSxsLmxlbmd0aCYmZShhWzBdLmNsb25lTm9kZSghMSkpLmFwcGVuZFRvKGMpLmFwcGVuZChsKSxzLmlzKFwibGlcIik/Yy5pbnNlcnRBZnRlcihzKTpjLmFwcGVuZFRvKHMpLGEuY2hpbGRyZW4oXCJsaVwiKS5sZW5ndGh8fGEucmVtb3ZlKCk7Y29udGludWV9aWYoaT09YVswXSljb250aW51ZTtpPWFbMF19ZWxzZSBpPXVbcl07ZD1wYXJzZUludChuKGkpLDEwKS0zMCxuKGksZCl9fX0pLF89ZC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7ZS5mb3JtYXR0ZXI9e3RvZ2dsZTpmdW5jdGlvbihlKXsobmV3IHYpLmFwcGx5KHAubm9kZXMoZSkpfX0sZC5mbi5pbml0LmNhbGwodGhpcyxlKX19KSx5PWQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe2UuZm9ybWF0dGVyPXt0b2dnbGU6ZnVuY3Rpb24oZSl7KG5ldyB2KS5yZW1vdmUocC5ub2RlcyhlKSl9fSxkLmZuLmluaXQuY2FsbCh0aGlzLGUpfX0pLHc9dS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dS5mbi5pbml0LmNhbGwodGhpcyxlKSx0aGlzLmZpbmRlcj1uZXcgZyhbe3RhZ3M6Zn1dKX0saW5pdGlhbGl6ZTpmdW5jdGlvbihlLHQpe3UuZm4uaW5pdGlhbGl6ZS5jYWxsKHRoaXMsZSx0KSxlLmFkZENsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKX0sdXBkYXRlOmZ1bmN0aW9uKGkscil7dmFyIG8sYSxsLGMsZD10aGlzLmZpbmRlci5maW5kU3VpdGFibGUocik7Zm9yKGw9MCxjPWQubGVuZ3RoO2M+bDtsKyspaWYobz1uKGRbbF0pLG98fChhPWUoZFtsXSkucGFyZW50cyhcInVsLG9sXCIpLmxlbmd0aCxvPXMuaXMoZFtsXSxcImxpXCIpJiYoYT4xfHxuKGRbbF0ucGFyZW50Tm9kZSkpfHxzLm9mVHlwZShkW2xdLFtcInVsXCIsXCJvbFwiXSkmJmE+MCksbylyZXR1cm4gaS5yZW1vdmVDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIiksdDtpLmFkZENsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtaG92ZXJcIil9fSk7byhhLHtJbmRlbnRGb3JtYXR0ZXI6dixJbmRlbnRDb21tYW5kOl8sT3V0ZGVudENvbW1hbmQ6eSxPdXRkZW50VG9vbDp3fSksYyhcImluZGVudFwiLG5ldyB1KHtjb21tYW5kOl8sdGVtcGxhdGU6bmV3IGgoe3RlbXBsYXRlOmwuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJJbmRlbnRcIn0pfSkpLGMoXCJvdXRkZW50XCIsbmV3IHcoe2NvbW1hbmQ6eSx0ZW1wbGF0ZTpuZXcgaCh7dGVtcGxhdGU6bC5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIk91dGRlbnRcIn0pfSkpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXt2YXIgdD13aW5kb3cua2VuZG8sbj1lLmV4dGVuZCxpPXQudWkuZWRpdG9yLHI9aS5FZGl0b3JVdGlscyxvPWkuQ29tbWFuZCxhPWkuVG9vbCxzPWkuVG9vbFRlbXBsYXRlLGw9by5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Lm9wdGlvbnM9ZSxvLmZuLmluaXQuY2FsbCh0LGUpLHQuYXR0cmlidXRlcz1udWxsLHQuYXN5bmM9ITB9LGV4ZWM6ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKGUpe28udmFsdWUocy5maW5kKGQpLnZhbCgpKSxpKGUpLHIuY2hhbmdlJiZyLmNoYW5nZSgpLG8udHJpZ2dlcihcImNoYW5nZVwiKX1mdW5jdGlvbiBpKGUpe2UucHJldmVudERlZmF1bHQoKSxzLmRhdGEoXCJrZW5kb1dpbmRvd1wiKS5kZXN0cm95KCksby5mb2N1cygpfXZhciByPXRoaXMsbz1yLmVkaXRvcixhPW8ub3B0aW9ucy5tZXNzYWdlcyxzPWUodC50ZW1wbGF0ZShsLnRlbXBsYXRlKShhKSkuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSksYz1sLmluZGVudChvLnZhbHVlKCkpLGQ9XCIuay1lZGl0b3ItdGV4dGFyZWFcIjt0aGlzLmNyZWF0ZURpYWxvZyhzLHt0aXRsZTphLnZpZXdIdG1sLGNsb3NlOmksdmlzaWJsZTohMX0pLmZpbmQoZCkudmFsKGMpLmVuZCgpLmZpbmQoXCIuay1kaWFsb2ctdXBkYXRlXCIpLmNsaWNrKG4pLmVuZCgpLmZpbmQoXCIuay1kaWFsb2ctY2xvc2VcIikuY2xpY2soaSkuZW5kKCkuZGF0YShcImtlbmRvV2luZG93XCIpLmNlbnRlcigpLm9wZW4oKSxzLmZpbmQoZCkuZm9jdXMoKX19KTtuKGwse3RlbXBsYXRlOlwiPGRpdiBjbGFzcz0nay1lZGl0b3ItZGlhbG9nIGstcG9wdXAtZWRpdC1mb3JtIGstZWRpdC1mb3JtLWNvbnRhaW5lciBrLXZpZXdodG1sLWRpYWxvZyc+PHRleHRhcmVhIGNsYXNzPSdrLWVkaXRvci10ZXh0YXJlYSBrLWlucHV0Jz48L3RleHRhcmVhPjxkaXYgY2xhc3M9J2stZWRpdC1idXR0b25zIGstc3RhdGUtZGVmYXVsdCc+PGJ1dHRvbiBjbGFzcz0nay1kaWFsb2ctdXBkYXRlIGstYnV0dG9uIGstcHJpbWFyeSc+IzogZGlhbG9nVXBkYXRlICM8L2J1dHRvbj48YnV0dG9uIGNsYXNzPSdrLWRpYWxvZy1jbG9zZSBrLWJ1dHRvbic+IzogZGlhbG9nQ2FuY2VsICM8L2J1dHRvbj48L2Rpdj48L2Rpdj5cIixpbmRlbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvPFxcLyhwfGxpfHVsfG9sfGhbMS02XXx0YWJsZXx0cnx0ZHx0aCk+L2dpLFwiPC8kMT5cXG5cIikucmVwbGFjZSgvPCh1bHxvbCkoW14+XSopPjxsaS9naSxcIjwkMSQyPlxcbjxsaVwiKS5yZXBsYWNlKC88YnIgXFwvPi9naSxcIjxiciAvPlxcblwiKS5yZXBsYWNlKC9cXG4kLyxcIlwiKX19KSx0LnVpLmVkaXRvci5WaWV3SHRtbENvbW1hbmQ9bCxpLkVkaXRvclV0aWxzLnJlZ2lzdGVyVG9vbChcInZpZXdIdG1sXCIsbmV3IGEoe2NvbW1hbmQ6bCx0ZW1wbGF0ZTpuZXcgcyh7dGVtcGxhdGU6ci5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIlZpZXcgSFRNTFwifSl9KSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe3ZhciB0PXdpbmRvdy5rZW5kbyxuPXQudWkuZWRpdG9yLGk9bi5Ub29sLHI9bi5Ub29sVGVtcGxhdGUsbz1uLkRlbGF5ZWRFeGVjdXRpb25Ub29sLGE9bi5Db21tYW5kLHM9bi5Eb20sbD1uLkVkaXRvclV0aWxzLGM9bi5SYW5nZVV0aWxzLGQ9bC5yZWdpc3RlclRvb2wsdT1vLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt2YXIgbj10aGlzO2kuZm4uaW5pdC5jYWxsKG4sdC5kZWVwRXh0ZW5kKHt9LG4ub3B0aW9ucyxlKSksbi50eXBlPVwia2VuZG9TZWxlY3RCb3hcIixuLmZpbmRlcj17Z2V0Rm9ybWF0OmZ1bmN0aW9uKCl7cmV0dXJuXCJcIn19fSxvcHRpb25zOntpdGVtczpbe3RleHQ6XCJQYXJhZ3JhcGhcIix2YWx1ZTpcInBcIn0se3RleHQ6XCJRdW90YXRpb25cIix2YWx1ZTpcImJsb2NrcXVvdGVcIn0se3RleHQ6XCJIZWFkaW5nIDFcIix2YWx1ZTpcImgxXCJ9LHt0ZXh0OlwiSGVhZGluZyAyXCIsdmFsdWU6XCJoMlwifSx7dGV4dDpcIkhlYWRpbmcgM1wiLHZhbHVlOlwiaDNcIn0se3RleHQ6XCJIZWFkaW5nIDRcIix2YWx1ZTpcImg0XCJ9LHt0ZXh0OlwiSGVhZGluZyA1XCIsdmFsdWU6XCJoNVwifSx7dGV4dDpcIkhlYWRpbmcgNlwiLHZhbHVlOlwiaDZcIn1dLHdpZHRoOjExMH0sdG9Gb3JtYXR0aW5nSXRlbTpmdW5jdGlvbihlKXt2YXIgdCxuPWUudmFsdWU7cmV0dXJuIG4/ZS50YWd8fGUuY2xhc3NOYW1lP2U6KHQ9bi5pbmRleE9mKFwiLlwiKSwwPT09dD9lLmNsYXNzTmFtZT1uLnN1YnN0cmluZygxKTotMT09dD9lLnRhZz1uOihlLnRhZz1uLnN1YnN0cmluZygwLHQpLGUuY2xhc3NOYW1lPW4uc3Vic3RyaW5nKHQrMSkpLGUpOmV9LGNvbW1hbmQ6ZnVuY3Rpb24odCl7dmFyIGk9dC52YWx1ZTtyZXR1cm4gaT10aGlzLnRvRm9ybWF0dGluZ0l0ZW0oaSksbmV3IG4uRm9ybWF0Q29tbWFuZCh7cmFuZ2U6dC5yYW5nZSxmb3JtYXR0ZXI6ZnVuY3Rpb24oKXt2YXIgdCxyPShpLnRhZ3x8aS5jb250ZXh0fHxcInNwYW5cIikuc3BsaXQoXCIsXCIpLG89W3t0YWdzOnIsYXR0cjp7Y2xhc3NOYW1lOmkuY2xhc3NOYW1lfHxcIlwifX1dO3JldHVybiB0PWUuaW5BcnJheShyWzBdLHMuaW5saW5lRWxlbWVudHMpPj0wP25ldyBuLkdyZWVkeUlubGluZUZvcm1hdHRlcihvKTpuZXcgbi5HcmVlZHlCbG9ja0Zvcm1hdHRlcihvKX19KX0saW5pdGlhbGl6ZTpmdW5jdGlvbihlLG4pe3ZhciByPW4uZWRpdG9yLG89dGhpcy5vcHRpb25zLGE9by5uYW1lLHM9dGhpcztlLndpZHRoKG8ud2lkdGgpLGUua2VuZG9TZWxlY3RCb3goe2RhdGFUZXh0RmllbGQ6XCJ0ZXh0XCIsZGF0YVZhbHVlRmllbGQ6XCJ2YWx1ZVwiLGRhdGFTb3VyY2U6by5pdGVtc3x8ci5vcHRpb25zW2FdLHRpdGxlOnIub3B0aW9ucy5tZXNzYWdlc1thXSxhdXRvU2l6ZTohMCxjaGFuZ2U6ZnVuY3Rpb24oKXtpLmV4ZWMocixhLHRoaXMuZGF0YUl0ZW0oKS50b0pTT04oKSl9LGRhdGFCb3VuZDpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5kYXRhU291cmNlLmRhdGEoKTtmb3IoZT0wO3QubGVuZ3RoPmU7ZSsrKXRbZV09cy50b0Zvcm1hdHRpbmdJdGVtKHRbZV0pfSxoaWdobGlnaHRGaXJzdDohMSx0ZW1wbGF0ZTp0LnRlbXBsYXRlKCc8c3BhbiB1bnNlbGVjdGFibGU9XCJvblwiIHN0eWxlPVwiZGlzcGxheTpibG9jazsjPShkYXRhLnN0eWxlfHxcIlwiKSNcIj4jOmRhdGEudGV4dCM8L3NwYW4+Jyl9KSxlLmFkZENsYXNzKFwiay1kZWNvcmF0ZWRcIikuY2xvc2VzdChcIi5rLXdpZGdldFwiKS5yZW1vdmVDbGFzcyhcImstXCIrYSkuZmluZChcIipcIikuYWRkQmFjaygpLmF0dHIoXCJ1bnNlbGVjdGFibGVcIixcIm9uXCIpfSxnZXRGb3JtYXR0aW5nVmFsdWU6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG8sYSxzLGwsYztmb3IoaT0wO3QubGVuZ3RoPmk7aSsrKWlmKHI9dFtpXSxvPXIudGFnfHxyLmNvbnRleHR8fFwiXCIsYT1yLmNsYXNzTmFtZT9cIi5cIityLmNsYXNzTmFtZTpcIlwiLHM9bythLGw9ZShuWzBdKS5jbG9zZXN0KHMpWzBdKXtpZigxPT1uLmxlbmd0aClyZXR1cm4gci52YWx1ZTtmb3IoYz0xO24ubGVuZ3RoPmMmJmUobltjXSkuY2xvc2VzdChzKVswXTtjKyspaWYoYz09bi5sZW5ndGgtMSlyZXR1cm4gci52YWx1ZX1yZXR1cm5cIlwifSx1cGRhdGU6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLGEsbCxjLGQ9ZSh0KS5kYXRhKHRoaXMudHlwZSk7aWYoZCl7Zm9yKGk9ZC5kYXRhU291cmNlLHI9aS5kYXRhKCksYz1zLmNvbW1vbkFuY2VzdG9yLmFwcGx5KG51bGwsbiksYT0wO3IubGVuZ3RoPmE7YSsrKWw9clthXS5jb250ZXh0LHJbYV0udmlzaWJsZT0hbHx8ISFlKGMpLmNsb3Nlc3QobCkubGVuZ3RoO2kuZmlsdGVyKFt7ZmllbGQ6XCJ2aXNpYmxlXCIsb3BlcmF0b3I6XCJlcVwiLHZhbHVlOiEwfV0pLG8uZm4udXBkYXRlLmNhbGwodGhpcyx0LG4pLGQudmFsdWUodGhpcy5nZXRGb3JtYXR0aW5nVmFsdWUoaS52aWV3KCksbikpLGQud3JhcHBlci50b2dnbGVDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIiwhaS52aWV3KCkubGVuZ3RoKX19fSksaD1hLmV4dGVuZCh7ZXhlYzpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5sb2NrUmFuZ2UoITApLGk9dGhpcy5vcHRpb25zLnJlbW92ZXx8XCJzdHJvbmcsZW0sc3BhblwiLnNwbGl0KFwiLFwiKTtjLndyYXBTZWxlY3RlZEVsZW1lbnRzKHQpLGU9bmV3IG4uUmFuZ2VJdGVyYXRvcih0KSxlLnRyYXZlcnNlKGZ1bmN0aW9uIHIoZSl7aWYoZSYmIXMuaXNNYXJrZXIoZSkpe2lmKDE9PWUubm9kZVR5cGUmJiFzLmluc2lnbmlmaWNhbnQoZSkpe2Zvcih2YXIgdD1lLmNoaWxkTm9kZXMubGVuZ3RoLTE7dD49MDt0LS0pcihlLmNoaWxkTm9kZXNbdF0pO2UucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIiksZS5yZW1vdmVBdHRyaWJ1dGUoXCJjbGFzc1wiKX1pLmluZGV4T2Yocy5uYW1lKGUpKT4tMSYmcy51bndyYXAoZSl9fSksdGhpcy5yZWxlYXNlUmFuZ2UodCl9fSk7ZS5leHRlbmQobix7Rm9ybWF0dGluZ1Rvb2w6dSxDbGVhbkZvcm1hdENvbW1hbmQ6aH0pLGQoXCJmb3JtYXR0aW5nXCIsbmV3IHUoe3RlbXBsYXRlOm5ldyByKHt0ZW1wbGF0ZTpsLmRyb3BEb3duTGlzdFRlbXBsYXRlLHRpdGxlOlwiRm9ybWF0XCJ9KX0pKSxkKFwiY2xlYW5Gb3JtYXR0aW5nXCIsbmV3IGkoe2NvbW1hbmQ6aCx0ZW1wbGF0ZTpuZXcgcih7dGVtcGxhdGU6bC5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIkNsZWFuIGZvcm1hdHRpbmdcIn0pfSkpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXt2YXIgdD13aW5kb3cua2VuZG8sbj10LnVpLGk9bi5lZGl0b3Iscj1uLldpZGdldCxvPWUuZXh0ZW5kLGE9ZS5wcm94eSxzPXQua2V5cyxsPVwiLmtlbmRvRWRpdG9yXCIsYz1cImEuay10b29sOm5vdCguay1zdGF0ZS1kaXNhYmxlZCksLmstd2lkZ2V0LmstY29sb3JwaWNrZXIsLmstc2VsZWN0Ym94LC5rLWRyb3Bkb3duLC5rLWNvbWJvYm94IC5rLWlucHV0XCIsZD1yLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7dD1vKHt9LHQse25hbWU6XCJFZGl0b3JUb29sYmFyXCJ9KSxyLmZuLmluaXQuY2FsbChuLGUsdCksdC5wb3B1cCYmbi5faW5pdFBvcHVwKCl9LGV2ZW50czpbXCJleGVjdXRlXCJdLGdyb3Vwczp7YmFzaWM6W1wiYm9sZFwiLFwiaXRhbGljXCIsXCJ1bmRlcmxpbmVcIixcInN0cmlrZXRocm91Z2hcIl0sc2NyaXB0czpbXCJzdWJzY3JpcHRcIixcInN1cGVyc2NyaXB0XCJdLGFsaWdubWVudDpbXCJqdXN0aWZ5TGVmdFwiLFwianVzdGlmeUNlbnRlclwiLFwianVzdGlmeVJpZ2h0XCIsXCJqdXN0aWZ5RnVsbFwiXSxsaW5rczpbXCJpbnNlcnRJbWFnZVwiLFwiaW5zZXJ0RmlsZVwiLFwiY3JlYXRlTGlua1wiLFwidW5saW5rXCJdLGxpc3RzOltcImluc2VydFVub3JkZXJlZExpc3RcIixcImluc2VydE9yZGVyZWRMaXN0XCIsXCJpbmRlbnRcIixcIm91dGRlbnRcIl0sdGFibGVzOltcImNyZWF0ZVRhYmxlXCIsXCJhZGRDb2x1bW5MZWZ0XCIsXCJhZGRDb2x1bW5SaWdodFwiLFwiYWRkUm93QWJvdmVcIixcImFkZFJvd0JlbG93XCIsXCJkZWxldGVSb3dcIixcImRlbGV0ZUNvbHVtblwiXSxhZHZhbmNlZDpbXCJ2aWV3SHRtbFwiLFwiY2xlYW5Gb3JtYXR0aW5nXCJdfSxfaW5pdFBvcHVwOmZ1bmN0aW9uKCl7dGhpcy53aW5kb3c9ZSh0aGlzLmVsZW1lbnQpLndyYXAoXCI8ZGl2IGNsYXNzPSdlZGl0b3JUb29sYmFyV2luZG93IGstaGVhZGVyJyAvPlwiKS5wYXJlbnQoKS5wcmVwZW5kKFwiPGJ1dHRvbiBjbGFzcz0nay1idXR0b24gay1idXR0b24tYmFyZSBrLWVkaXRvcnRvb2xiYXItZHJhZ0hhbmRsZSc+PHNwYW4gY2xhc3M9J2staWNvbiBrLWktbW92ZScgLz48L2J1dHRvbj5cIikua2VuZG9XaW5kb3coe3RpdGxlOiExLHJlc2l6YWJsZTohMSxkcmFnZ2FibGU6e2RyYWdIYW5kbGU6XCIuay1lZGl0b3J0b29sYmFyLWRyYWdIYW5kbGVcIn0sYW5pbWF0aW9uOntvcGVuOntlZmZlY3RzOlwiZmFkZTppblwifSxjbG9zZTp7ZWZmZWN0czpcImZhZGU6b3V0XCJ9fSxtaW5IZWlnaHQ6NDIsdmlzaWJsZTohMSxhdXRvRm9jdXM6ITEsYWN0aW9uczpbXSxkcmFnZW5kOmZ1bmN0aW9uKCl7dGhpcy5fbW92ZWQ9ITB9fSkub24oXCJtb3VzZWRvd25cIixmdW5jdGlvbih0KXtlKHQudGFyZ2V0KS5pcyhcIi5rLWljb25cIil8fHQucHJldmVudERlZmF1bHQoKX0pLmRhdGEoXCJrZW5kb1dpbmRvd1wiKX0saXRlbXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50LmNoaWxkcmVuKCkuZmluZChcIj4gKiwgc2VsZWN0XCIpfSxmb2N1c2VkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudC5maW5kKFwiLmstc3RhdGUtZm9jdXNlZFwiKS5sZW5ndGg+MH0sdG9vbEJ5SWQ6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLnRvb2xzO2Zvcih0IGluIG4paWYodC50b0xvd2VyQ2FzZSgpPT1lKXJldHVybiBuW3RdfSx0b29sR3JvdXBGb3I6ZnVuY3Rpb24odCl7dmFyIG4saT10aGlzLmdyb3VwcztpZih0aGlzLmlzQ3VzdG9tVG9vbCh0KSlyZXR1cm5cImN1c3RvbVwiO2ZvcihuIGluIGkpaWYoZS5pbkFycmF5KHQsaVtuXSk+PTApcmV0dXJuIG59LGJpbmRUbzpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9bi53aW5kb3c7bi5fZWRpdG9yJiZuLl9lZGl0b3IudW5iaW5kKFwic2VsZWN0XCIsYShuLnJlZnJlc2hUb29scyxuKSksbi5fZWRpdG9yPXQsbi50b29scz1uLmV4cGFuZFRvb2xzKHQub3B0aW9ucy50b29scyksbi5yZW5kZXIoKSxuLmVsZW1lbnQuZmluZChcIi5rLWNvbWJvYm94IC5rLWlucHV0XCIpLmtleWRvd24oZnVuY3Rpb24odCl7dmFyIG49ZSh0aGlzKS5jbG9zZXN0KFwiLmstY29tYm9ib3hcIikuZGF0YShcImtlbmRvQ29tYm9Cb3hcIiksaT10LmtleUNvZGU7aT09cy5SSUdIVHx8aT09cy5MRUZUP24uY2xvc2UoKTppPT1zLkRPV04mJihuLmRyb3BEb3duLmlzT3BlbmVkKCl8fCh0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLG4ub3BlbigpKSl9KSxuLl9hdHRhY2hFdmVudHMoKSxuLml0ZW1zKCkuZWFjaChmdW5jdGlvbigpe3ZhciBpLHI9bi5fdG9vbE5hbWUodGhpcyksbz1uLnRvb2xzW3JdLGE9byYmby5vcHRpb25zLHM9dC5vcHRpb25zLm1lc3NhZ2VzLGw9YSYmYS50b29sdGlwfHxzW3JdLGM9ZSh0aGlzKTtvJiZvLmluaXRpYWxpemUmJigoXCJmb250U2l6ZVwiPT1yfHxcImZvbnROYW1lXCI9PXIpJiYoaT1zW3IrXCJJbmhlcml0XCJdLGMuZmluZChcImlucHV0XCIpLnZhbChpKS5lbmQoKS5maW5kKFwic3Bhbi5rLWlucHV0XCIpLnRleHQoaSkuZW5kKCkpLG8uaW5pdGlhbGl6ZShjLHt0aXRsZTpuLl9hcHBlbmRTaG9ydGN1dFNlcXVlbmNlKGwsbyksZWRpdG9yOm4uX2VkaXRvcn0pLGMuY2xvc2VzdChcIi5rLXdpZGdldFwiLG4uZWxlbWVudCkuYWRkQ2xhc3MoXCJrLWVkaXRvci13aWRnZXRcIiksYy5jbG9zZXN0KFwiLmstY29sb3JwaWNrZXJcIixuLmVsZW1lbnQpLm5leHQoXCIuay1jb2xvcnBpY2tlclwiKS5hZGRDbGFzcyhcImstZWRpdG9yLXdpZGdldFwiKSl9KSx0LmJpbmQoXCJzZWxlY3RcIixhKG4ucmVmcmVzaFRvb2xzLG4pKSxuLnVwZGF0ZSgpLGkmJmkud3JhcHBlci5jc3Moe3RvcDpcIlwiLGxlZnQ6XCJcIix3aWR0aDpcIlwifSl9LHNob3c6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT10aGlzLHI9aS53aW5kb3csbz1pLm9wdGlvbnMuZWRpdG9yO3ImJihlPXIud3JhcHBlcix0PW8uZWxlbWVudCxlLmlzKFwiOnZpc2libGVcIikmJmkud2luZG93Lm9wdGlvbnMudmlzaWJsZXx8KGVbMF0uc3R5bGUud2lkdGh8fGUud2lkdGgodC5vdXRlcldpZHRoKCktcGFyc2VJbnQoZS5jc3MoXCJib3JkZXItbGVmdC13aWR0aFwiKSwxMCktcGFyc2VJbnQoZS5jc3MoXCJib3JkZXItcmlnaHQtd2lkdGhcIiksMTApKSxyLl9tb3ZlZHx8KG49dC5vZmZzZXQoKSxlLmNzcyh7dG9wOk1hdGgubWF4KDAscGFyc2VJbnQobi50b3AsMTApLWUub3V0ZXJIZWlnaHQoKS1wYXJzZUludChpLndpbmRvdy5lbGVtZW50LmNzcyhcInBhZGRpbmctYm90dG9tXCIpLDEwKSksbGVmdDpNYXRoLm1heCgwLHBhcnNlSW50KG4ubGVmdCwxMCkpfSkpLHIub3BlbigpKSl9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLndpbmRvdyYmdGhpcy53aW5kb3cuY2xvc2UoKX0sZm9jdXM6ZnVuY3Rpb24oKXt2YXIgZT1cInRhYkluZGV4XCIsdD10aGlzLmVsZW1lbnQsbj10aGlzLl9lZGl0b3IuZWxlbWVudC5hdHRyKGUpO3QuYXR0cihlLG58fDApLmZvY3VzKCkuZmluZChjKS5maXJzdCgpLmZvY3VzKCksbnx8MD09PW58fHQucmVtb3ZlQXR0cihlKX0sX2FwcGVuZFNob3J0Y3V0U2VxdWVuY2U6ZnVuY3Rpb24oZSx0KXtpZighdC5rZXkpcmV0dXJuIGU7dmFyIG49ZStcIiAoXCI7cmV0dXJuIHQuY3RybCYmKG4rPVwiQ3RybCArIFwiKSx0LnNoaWZ0JiYobis9XCJTaGlmdCArIFwiKSx0LmFsdCYmKG4rPVwiQWx0ICsgXCIpLG4rPXQua2V5K1wiKVwifSxfbmF0aXZlVG9vbHM6W1wiaW5zZXJ0TGluZUJyZWFrXCIsXCJpbnNlcnRQYXJhZ3JhcGhcIixcInJlZG9cIixcInVuZG9cIl0sdG9vbHM6e30saXNDdXN0b21Ub29sOmZ1bmN0aW9uKGUpe3JldHVybiEoZSBpbiB0LnVpLkVkaXRvci5kZWZhdWx0VG9vbHMpfSxleHBhbmRUb29sczpmdW5jdGlvbihuKXt2YXIgcixhLHMsbCxjPXRoaXMuX25hdGl2ZVRvb2xzLGQ9dC5kZWVwRXh0ZW5kKHt9LHQudWkuRWRpdG9yLmRlZmF1bHRUb29scyksdT17fTtmb3IoYT0wO24ubGVuZ3RoPmE7YSsrKXI9blthXSxsPXIubmFtZSxlLmlzUGxhaW5PYmplY3Qocik/bCYmZFtsXT8odVtsXT1vKHt9LGRbbF0pLG8odVtsXS5vcHRpb25zLHIpKToocz1vKHtjc3NDbGFzczpcImstaS1jdXN0b21cIix0eXBlOlwiYnV0dG9uXCIsdGl0bGU6XCJcIn0scikscy5uYW1lfHwocy5uYW1lPVwiY3VzdG9tXCIpLHMuY3NzQ2xhc3M9XCJrLVwiKyhcImN1c3RvbVwiPT1zLm5hbWU/XCJpLWN1c3RvbVwiOnMubmFtZSkscy50ZW1wbGF0ZXx8XCJidXR0b25cIiE9cy50eXBlfHwocy50ZW1wbGF0ZT1pLkVkaXRvclV0aWxzLmJ1dHRvblRlbXBsYXRlLHMudGl0bGU9cy50aXRsZXx8cy50b29sdGlwKSx1W2xdPXtvcHRpb25zOnN9KTpkW3JdJiYodVtyXT1kW3JdKTtmb3IoYT0wO2MubGVuZ3RoPmE7YSsrKXVbY1thXV18fCh1W2NbYV1dPWRbY1thXV0pO3JldHVybiB1fSxyZW5kZXI6ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKG4pe3ZhciBpO3JldHVybiBuLmdldEh0bWw/aT1uLmdldEh0bWwoKTooZS5pc0Z1bmN0aW9uKG4pfHwobj10LnRlbXBsYXRlKG4pKSxpPW4obykpLGUudHJpbShpKX1mdW5jdGlvbiBpKCl7aC5jaGlsZHJlbigpLmxlbmd0aCYmaC5hcHBlbmRUbyh2KX1mdW5jdGlvbiByKCl7aD1lKFwiPGxpIGNsYXNzPSdrLXRvb2wtZ3JvdXAnIHJvbGU9J3ByZXNlbnRhdGlvbicgLz5cIil9dmFyIG8scyxsLGMsZCx1LGgscCxmPXRoaXMsZz1mLnRvb2xzLG09Zi5fZWRpdG9yLmVsZW1lbnQsdj1mLmVsZW1lbnQuZW1wdHkoKSxfPWYuX2VkaXRvci5vcHRpb25zLnRvb2xzLHk9dC5zdXBwb3J0LmJyb3dzZXI7Zm9yKHYuZW1wdHkoKSxyKCkscD0wO18ubGVuZ3RoPnA7cCsrKWM9X1twXS5uYW1lfHxfW3BdLG89Z1tjXSYmZ1tjXS5vcHRpb25zLCFvJiZlLmlzUGxhaW5PYmplY3QoYykmJihvPWMpLHM9byYmby50ZW1wbGF0ZSxcImJyZWFrXCI9PWMmJihpKCksZShcIjxsaSBjbGFzcz0nay1yb3ctYnJlYWsnIC8+XCIpLmFwcGVuZFRvKGYuZWxlbWVudCkscigpKSxzJiYodT1mLnRvb2xHcm91cEZvcihjKSxkIT11JiYoaSgpLHIoKSxkPXUpLHM9bihzKSxsPWUocykuYXBwZW5kVG8oaCksXCJjdXN0b21cIj09dSYmKGkoKSxyKCkpLG8uZXhlYyYmbC5oYXNDbGFzcyhcImstdG9vbFwiKSYmbC5jbGljayhhKG8uZXhlYyxtWzBdKSkpO2koKSxlKGYuZWxlbWVudCkuY2hpbGRyZW4oXCI6aGFzKD4gLmstdG9vbClcIikuYWRkQ2xhc3MoXCJrLWJ1dHRvbi1ncm91cFwiKSxmLm9wdGlvbnMucG9wdXAmJnkubXNpZSYmOT55LnZlcnNpb24mJmYud2luZG93LndyYXBwZXIuZmluZChcIipcIikuYXR0cihcInVuc2VsZWN0YWJsZVwiLFwib25cIiksZi51cGRhdGVHcm91cHMoKSxmLmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6Zi5lbGVtZW50fX0pfSx1cGRhdGVHcm91cHM6ZnVuY3Rpb24oKXtlKHRoaXMuZWxlbWVudCkuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCl7ZSh0aGlzKS5jaGlsZHJlbigpLmZpbHRlcihmdW5jdGlvbigpe3JldHVyblwibm9uZVwiIT09dGhpcy5zdHlsZS5kaXNwbGF5fSkucmVtb3ZlQ2xhc3MoXCJrLWdyb3VwLWVuZFwiKS5maXJzdCgpLmFkZENsYXNzKFwiay1ncm91cC1zdGFydFwiKS5lbmQoKS5sYXN0KCkuYWRkQ2xhc3MoXCJrLWdyb3VwLWVuZFwiKS5lbmQoKX0pfSxkZWNvcmF0ZUZyb206ZnVuY3Rpb24odCl7dGhpcy5pdGVtcygpLmZpbHRlcihcIi5rLWRlY29yYXRlZFwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49ZSh0aGlzKS5kYXRhKFwia2VuZG9TZWxlY3RCb3hcIik7biYmbi5kZWNvcmF0ZSh0KX0pfSxkZXN0cm95OmZ1bmN0aW9uKCl7ci5mbi5kZXN0cm95LmNhbGwodGhpcyk7dmFyIGUsdD10aGlzLnRvb2xzO2ZvcihlIGluIHQpdFtlXS5kZXN0cm95JiZ0W2VdLmRlc3Ryb3koKTt0aGlzLndpbmRvdyYmdGhpcy53aW5kb3cuZGVzdHJveSgpfSxfYXR0YWNoRXZlbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPVwiW3JvbGU9YnV0dG9uXS5rLXRvb2xcIixpPW4rXCI6bm90KC5rLXN0YXRlLWRpc2FibGVkKVwiLHI9bitcIi5rLXN0YXRlLWRpc2FibGVkXCI7dC5lbGVtZW50Lm9mZihsKS5vbihcIm1vdXNlZW50ZXJcIitsLGksZnVuY3Rpb24oKXtlKHRoaXMpLmFkZENsYXNzKFwiay1zdGF0ZS1ob3ZlclwiKX0pLm9uKFwibW91c2VsZWF2ZVwiK2wsaSxmdW5jdGlvbigpe2UodGhpcykucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWhvdmVyXCIpfSkub24oXCJtb3VzZWRvd25cIitsLG4sZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSkub24oXCJrZXlkb3duXCIrbCxjLGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIGkoZSxuKXt2YXIgaT10LmVsZW1lbnQuZmluZChjKSxyPWkuaW5kZXgobykrZTtyZXR1cm4gbiYmKHI9TWF0aC5tYXgoMCxNYXRoLm1pbihpLmxlbmd0aC0xLHIpKSksaVtyXX12YXIgcixvPXRoaXMsYT1uLmtleUNvZGU7YT09cy5SSUdIVHx8YT09cy5MRUZUP2UobykuaGFzQ2xhc3MoXCIuay1kcm9wZG93blwiKXx8KHI9aShhPT1zLlJJR0hUPzE6LTEsITApKTphPT1zLkVTQz9yPXQuX2VkaXRvcjphIT1zLlRBQnx8bi5jdHJsS2V5fHxuLmFsdEtleXx8KG4uc2hpZnRLZXk/cj1pKC0xKToocj1pKDEpLHJ8fChyPXQuX2VkaXRvcikpKSxyJiYobi5wcmV2ZW50RGVmYXVsdCgpLHIuZm9jdXMoKSl9KS5vbihcImNsaWNrXCIrbCxpLGZ1bmN0aW9uKG4pe3ZhciBpPWUodGhpcyk7bi5wcmV2ZW50RGVmYXVsdCgpLG4uc3RvcFByb3BhZ2F0aW9uKCksaS5yZW1vdmVDbGFzcyhcImstc3RhdGUtaG92ZXJcIiksaS5pcyhcIltkYXRhLXBvcHVwXVwiKXx8dC5fZWRpdG9yLmV4ZWModC5fdG9vbE5hbWUodGhpcykpfSkub24oXCJjbGlja1wiK2wscixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCl9KX0sX3Rvb2xOYW1lOmZ1bmN0aW9uKHQpe3ZhciBuLGk7aWYodClyZXR1cm4gbj10LmNsYXNzTmFtZSwvay10b29sXFxiL2kudGVzdChuKSYmKG49dC5maXJzdENoaWxkLmNsYXNzTmFtZSksaT1lLmdyZXAobi5zcGxpdChcIiBcIiksZnVuY3Rpb24oZSl7cmV0dXJuIS9eay0od2lkZ2V0fHRvb2x8dG9vbC1pY29ufHN0YXRlLWhvdmVyfGhlYWRlcnxjb21ib2JveHxkcm9wZG93bnxzZWxlY3Rib3h8Y29sb3JwaWNrZXIpJC9pLnRlc3QoZSl9KSxpWzBdP2lbMF0uc3Vic3RyaW5nKGlbMF0ubGFzdEluZGV4T2YoXCItXCIpKzEpOlwiY3VzdG9tXCJ9LHJlZnJlc2hUb29sczpmdW5jdGlvbigpe3ZhciBuPXRoaXMsaT1uLl9lZGl0b3Iscj1pLmdldFJhbmdlKCksbz10LnVpLmVkaXRvci5SYW5nZVV0aWxzLnRleHROb2RlcyhyKTtvLmxlbmd0aHx8KG89W3Iuc3RhcnRDb250YWluZXJdKSxuLml0ZW1zKCkuZWFjaChmdW5jdGlvbigpe3ZhciB0PW4udG9vbHNbbi5fdG9vbE5hbWUodGhpcyldO3QmJnQudXBkYXRlJiZ0LnVwZGF0ZShlKHRoaXMpLG8pfSksdGhpcy51cGRhdGUoKX0sdXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LmNoaWxkcmVuKCkuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKTt0LmNzcyhcImRpc3BsYXlcIix0Lmhhc0NsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKT9cIm5vbmVcIjpcIlwiKX0pLHRoaXMudXBkYXRlR3JvdXBzKCl9fSk7ZS5leHRlbmQoaSx7VG9vbGJhcjpkfSl9KHdpbmRvdy5qUXVlcnkpLGZ1bmN0aW9uKGUpe3ZhciB0PXdpbmRvdy5rZW5kbyxuPWUuZXh0ZW5kLGk9ZS5wcm94eSxyPXQudWkuZWRpdG9yLG89ci5Eb20sYT1yLkVkaXRvclV0aWxzLHM9ci5SYW5nZVV0aWxzLGw9ci5Db21tYW5kLGM9XCIua2VuZG9FZGl0b3JcIixkPVwiay1zdGF0ZS1hY3RpdmVcIix1PVwiay1zdGF0ZS1zZWxlY3RlZFwiLGg9ci5Ub29sLHA9ci5Ub29sVGVtcGxhdGUsZj1yLkluc2VydEh0bWxDb21tYW5kLGc9ci5CbG9ja0Zvcm1hdEZpbmRlcixtPXIuRWRpdG9yVXRpbHMucmVnaXN0ZXJUb29sLHY9XCI8dGQ+XCIrci5lbXB0eUVsZW1lbnRDb250ZW50K1wiPC90ZD5cIixfPW5ldyBnKFt7dGFnczpbXCJ0YWJsZVwiXX1dKSx5PWYuZXh0ZW5kKHtfdGFibGVIdG1sOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9ZXx8MSx0PXR8fDEsXCI8dGFibGUgY2xhc3M9J2stdGFibGUnIGRhdGEtbGFzdD5cIitBcnJheShlKzEpLmpvaW4oXCI8dHI+XCIrQXJyYXkodCsxKS5qb2luKHYpK1wiPC90cj5cIikrXCI8L3RhYmxlPlwifSxwb3N0UHJvY2VzczpmdW5jdGlvbih0LG4pe3ZhciBpPWUoXCJ0YWJsZVtkYXRhLWxhc3RdXCIsdC5kb2N1bWVudCkucmVtb3ZlQXR0cihcImRhdGEtbGFzdFwiKTtuLnNlbGVjdE5vZGVDb250ZW50cyhpLmZpbmQoXCJ0ZFwiKVswXSksdC5zZWxlY3RSYW5nZShuKX0sZXhlYzpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucztlLmh0bWw9dGhpcy5fdGFibGVIdG1sKGUucm93cyxlLmNvbHVtbnMpLGUucG9zdFByb2Nlc3M9dGhpcy5wb3N0UHJvY2VzcyxmLmZuLmV4ZWMuY2FsbCh0aGlzKX19KSx3PWguZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKHQsbil7aC5mbi5pbml0aWFsaXplLmNhbGwodGhpcyx0LG4pO3ZhciByPWUodGhpcy5vcHRpb25zLnBvcHVwVGVtcGxhdGUpLmFwcGVuZFRvKFwiYm9keVwiKS5rZW5kb1BvcHVwKHthbmNob3I6dCxjb3B5QW5jaG9yU3R5bGVzOiExLG9wZW46aSh0aGlzLl9vcGVuLHRoaXMpLGFjdGl2YXRlOmkodGhpcy5fYWN0aXZhdGUsdGhpcyksY2xvc2U6aSh0aGlzLl9jbG9zZSx0aGlzKX0pLmRhdGEoXCJrZW5kb1BvcHVwXCIpO3QuY2xpY2soaSh0aGlzLl90b2dnbGUsdGhpcykpLmtleWRvd24oaSh0aGlzLl9rZXlkb3duLHRoaXMpKSx0aGlzLl9lZGl0b3I9bi5lZGl0b3IsdGhpcy5fcG9wdXA9cn0scG9wdXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9wdXB9LF9hY3RpdmF0ZTplLm5vb3AsX29wZW46ZnVuY3Rpb24oKXt0aGlzLl9wb3B1cC5vcHRpb25zLmFuY2hvci5hZGRDbGFzcyhkKX0sX2Nsb3NlOmZ1bmN0aW9uKCl7dGhpcy5fcG9wdXAub3B0aW9ucy5hbmNob3IucmVtb3ZlQ2xhc3MoZCl9LF9rZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciBuPXQua2V5cyxpPWUua2V5Q29kZTtpPT1uLkRPV04mJmUuYWx0S2V5P3RoaXMuX3BvcHVwLm9wZW4oKTppPT1uLkVTQyYmdGhpcy5fcG9wdXAuY2xvc2UoKX0sX3RvZ2dsZTpmdW5jdGlvbih0KXt2YXIgbj1lKHQudGFyZ2V0KS5jbG9zZXN0KFwiLmstdG9vbFwiKTtuLmhhc0NsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKXx8dGhpcy5wb3B1cCgpLnRvZ2dsZSgpfSx1cGRhdGU6ZnVuY3Rpb24oZSl7dGhpcy5wb3B1cCgpLmNsb3NlKCksZS5yZW1vdmVDbGFzcyhcImstc3RhdGUtaG92ZXJcIil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl9wb3B1cC5kZXN0cm95KCl9fSksYj13LmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0KXt0aGlzLmNvbHM9OCx0aGlzLnJvd3M9Nix3LmZuLmluaXQuY2FsbCh0aGlzLGUuZXh0ZW5kKHQse2NvbW1hbmQ6eSxwb3B1cFRlbXBsYXRlOlwiPGRpdiBjbGFzcz0nay1jdC1wb3B1cCc+XCIrQXJyYXkodGhpcy5jb2xzKnRoaXMucm93cysxKS5qb2luKFwiPHNwYW4gY2xhc3M9J2stY3QtY2VsbCBrLXN0YXRlLWRpc2FibGVkJyAvPlwiKStcIjxkaXYgY2xhc3M9J2stc3RhdHVzJz48L2Rpdj48L2Rpdj5cIn0pKX0sX2FjdGl2YXRlOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gbih0KXt2YXIgbj1lKHdpbmRvdyk7cmV0dXJue3JvdzpNYXRoLmZsb29yKCh0LmNsaWVudFkrbi5zY3JvbGxUb3AoKS11LnRvcCkvcikrMSxjb2w6TWF0aC5mbG9vcigodC5jbGllbnRYK24uc2Nyb2xsTGVmdCgpLXUubGVmdCkvaSkrMX19dmFyIGkscixvPXRoaXMsYT1vLl9wb3B1cC5lbGVtZW50LHM9YS5maW5kKFwiLmstY3QtY2VsbFwiKSxsPXMuZXEoMCksZD1zLmVxKHMubGVuZ3RoLTEpLHU9dC5nZXRPZmZzZXQobCksaD10LmdldE9mZnNldChkKSxwPW8uY29scyxmPW8ucm93cztoLmxlZnQrPWRbMF0ub2Zmc2V0V2lkdGgsaC50b3ArPWRbMF0ub2Zmc2V0SGVpZ2h0LGk9KGgubGVmdC11LmxlZnQpL3Ascj0oaC50b3AtdS50b3ApL2YsYS5vbihcIm1vdXNlbW92ZVwiK2MsZnVuY3Rpb24oZSl7by5fc2V0VGFibGVTaXplKG4oZSkpfSkub24oXCJtb3VzZWxlYXZlXCIrYyxmdW5jdGlvbigpe28uX3NldFRhYmxlU2l6ZSgpfSkub24oXCJtb3VzZXVwXCIrYyxmdW5jdGlvbihlKXtvLl9leGVjKG4oZSkpfSl9LF92YWxpZDpmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5yb3c+MCYmZS5jb2w+MCYmdGhpcy5yb3dzPj1lLnJvdyYmdGhpcy5jb2xzPj1lLmNvbH0sX2V4ZWM6ZnVuY3Rpb24oZSl7dGhpcy5fdmFsaWQoZSkmJih0aGlzLl9lZGl0b3IuZXhlYyhcImNyZWF0ZVRhYmxlXCIse3Jvd3M6ZS5yb3csY29sdW1uczplLmNvbH0pLHRoaXMuX3BvcHVwLmNsb3NlKCkpfSxfc2V0VGFibGVTaXplOmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMuX3BvcHVwLmVsZW1lbnQscj1pLmZpbmQoXCIuay1zdGF0dXNcIiksbz1pLmZpbmQoXCIuay1jdC1jZWxsXCIpLGE9dGhpcy5jb2xzLHM9dGhpcy5fZWRpdG9yLm9wdGlvbnMubWVzc2FnZXM7dGhpcy5fdmFsaWQobik/KHIudGV4dCh0LmZvcm1hdChzLmNyZWF0ZVRhYmxlSGludCxuLnJvdyxuLmNvbCkpLG8uZWFjaChmdW5jdGlvbih0KXtlKHRoaXMpLnRvZ2dsZUNsYXNzKHUsbi5jb2w+dCVhJiZuLnJvdz50L2EpfSkpOihyLnRleHQocy5kaWFsb2dDYW5jZWwpLG8ucmVtb3ZlQ2xhc3ModSkpfSxfa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgbixpLHIsbyxhLHMsbCxjO3cuZm4uX2tleWRvd24uY2FsbCh0aGlzLGUpLG49dC5rZXlzLGk9ZS5rZXlDb2RlLHI9dGhpcy5fcG9wdXAuZWxlbWVudC5maW5kKFwiLmstY3QtY2VsbFwiKSxvPU1hdGgubWF4KHIuZmlsdGVyKFwiLmstc3RhdGUtc2VsZWN0ZWRcIikubGFzdCgpLmluZGV4KCksMCksYT1NYXRoLmZsb29yKG8vdGhpcy5jb2xzKSxzPW8ldGhpcy5jb2xzLGw9ITEsaSE9bi5ET1dOfHxlLmFsdEtleT9pPT1uLlVQPyhsPSEwLGEtLSk6aT09bi5SSUdIVD8obD0hMCxzKyspOmk9PW4uTEVGVCYmKGw9ITAscy0tKToobD0hMCxhKyspLGM9e3JvdzpNYXRoLm1heCgxLE1hdGgubWluKHRoaXMucm93cyxhKzEpKSxjb2w6TWF0aC5tYXgoMSxNYXRoLm1pbih0aGlzLmNvbHMscysxKSl9LGk9PW4uRU5URVI/dGhpcy5fZXhlYyhjKTp0aGlzLl9zZXRUYWJsZVNpemUoYyksbCYmKGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpKX0sX29wZW46ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9lZGl0b3Iub3B0aW9ucy5tZXNzYWdlczt3LmZuLl9vcGVuLmNhbGwodGhpcyksdGhpcy5wb3B1cCgpLmVsZW1lbnQuZmluZChcIi5rLXN0YXR1c1wiKS50ZXh0KGUuZGlhbG9nQ2FuY2VsKS5lbmQoKS5maW5kKFwiLmstY3QtY2VsbFwiKS5yZW1vdmVDbGFzcyh1KX0sX2Nsb3NlOmZ1bmN0aW9uKCl7dy5mbi5fY2xvc2UuY2FsbCh0aGlzKSx0aGlzLnBvcHVwKCkuZWxlbWVudC5vZmYoYyl9LHVwZGF0ZTpmdW5jdGlvbihlLHQpe3ZhciBuO3cuZm4udXBkYXRlLmNhbGwodGhpcyxlKSxuPV8uaXNGb3JtYXR0ZWQodCksZS50b2dnbGVDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIixuKX19KSxrPWwuZXh0ZW5kKHtleGVjOmZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQsbixpLGE9dGhpcy5sb2NrUmFuZ2UoITApLHM9YS5lbmRDb250YWluZXI7XCJ0ZFwiIT1vLm5hbWUocyk7KXM9cy5wYXJlbnROb2RlO2Zvcih0PXMucGFyZW50Tm9kZSxlPXQuY2hpbGRyZW4ubGVuZ3RoLG49dC5jbG9uZU5vZGUoITApLGk9MDt0LmNlbGxzLmxlbmd0aD5pO2krKyluLmNlbGxzW2ldLmlubmVySFRNTD1yLmVtcHR5RWxlbWVudENvbnRlbnQ7XCJiZWZvcmVcIj09dGhpcy5vcHRpb25zLnBvc2l0aW9uP28uaW5zZXJ0QmVmb3JlKG4sdCk6by5pbnNlcnRBZnRlcihuLHQpLHRoaXMucmVsZWFzZVJhbmdlKGEpfX0pLHg9bC5leHRlbmQoe2V4ZWM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxhPXRoaXMubG9ja1JhbmdlKCEwKSxzPW8uY2xvc2VzdChhLmVuZENvbnRhaW5lcixcInRkXCIpLGw9by5jbG9zZXN0KHMsXCJ0YWJsZVwiKSxjPWwucm93cyxkPXRoaXMub3B0aW9ucy5wb3NpdGlvbjtmb3IoZT1vLmZpbmROb2RlSW5kZXgocyksdD0wO2MubGVuZ3RoPnQ7dCsrKW49Y1t0XS5jZWxsc1tlXSxpPW4uY2xvbmVOb2RlKCksaS5pbm5lckhUTUw9ci5lbXB0eUVsZW1lbnRDb250ZW50LFwiYmVmb3JlXCI9PWQ/by5pbnNlcnRCZWZvcmUoaSxuKTpvLmluc2VydEFmdGVyKGksbik7dGhpcy5yZWxlYXNlUmFuZ2UoYSl9fSksQz1sLmV4dGVuZCh7ZXhlYzpmdW5jdGlvbigpe3ZhciB0LG4saSxyPXRoaXMubG9ja1JhbmdlKCksYT1zLm1hcEFsbChyLGZ1bmN0aW9uKHQpe3JldHVybiBlKHQpLmNsb3Nlc3QoXCJ0clwiKVswXX0pLGw9by5jbG9zZXN0KGFbMF0sXCJ0YWJsZVwiKTtpZihhLmxlbmd0aD49bC5yb3dzLmxlbmd0aCl0PW8ubmV4dChsKSwoIXR8fG8uaW5zaWduaWZpY2FudCh0KSkmJih0PW8ucHJldihsKSksby5yZW1vdmUobCk7ZWxzZSBmb3Iobj0wO2EubGVuZ3RoPm47bisrKWk9YVtuXSxvLnJlbW92ZVRleHRTaWJsaW5ncyhpKSx0PW8ubmV4dChpKXx8by5wcmV2KGkpLHQ9dC5jZWxsc1swXSxvLnJlbW92ZShpKTt0JiYoci5zZXRTdGFydCh0LDApLHIuY29sbGFwc2UoITApLHRoaXMuZWRpdG9yLnNlbGVjdFJhbmdlKHIpKX19KSxTPWwuZXh0ZW5kKHtleGVjOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMubG9ja1JhbmdlKCksaT1vLmNsb3Nlc3Qobi5lbmRDb250YWluZXIsXCJ0ZFwiKSxyPW8uY2xvc2VzdChpLFwidGFibGVcIiksYT1yLnJvd3Mscz1vLmZpbmROb2RlSW5kZXgoaSwhMCksbD1hWzBdLmNlbGxzLmxlbmd0aDtpZigxPT1sKWU9by5uZXh0KHIpLCghZXx8by5pbnNpZ25pZmljYW50KGUpKSYmKGU9by5wcmV2KHIpKSxvLnJlbW92ZShyKTtlbHNlIGZvcihvLnJlbW92ZVRleHRTaWJsaW5ncyhpKSxlPW8ubmV4dChpKXx8by5wcmV2KGkpLHQ9MDthLmxlbmd0aD50O3QrKylvLnJlbW92ZShhW3RdLmNlbGxzW3NdKTtlJiYobi5zZXRTdGFydChlLDApLG4uY29sbGFwc2UoITApLHRoaXMuZWRpdG9yLnNlbGVjdFJhbmdlKG4pKX19KSxUPWguZXh0ZW5kKHtjb21tYW5kOmZ1bmN0aW9uKGUpe3JldHVybiBlPW4oZSx0aGlzLm9wdGlvbnMpLFwiZGVsZXRlXCI9PWUuYWN0aW9uP1wicm93XCI9PWUudHlwZT9uZXcgQyhlKTpuZXcgUyhlKTpcInJvd1wiPT1lLnR5cGU/bmV3IGsoZSk6bmV3IHgoZSl9LGluaXRpYWxpemU6ZnVuY3Rpb24oZSx0KXtoLmZuLmluaXRpYWxpemUuY2FsbCh0aGlzLGUsdCksZS5hZGRDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIil9LHVwZGF0ZTpmdW5jdGlvbihlLHQpe3ZhciBuPSFfLmlzRm9ybWF0dGVkKHQpO2UudG9nZ2xlQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIsbil9fSk7bih0LnVpLmVkaXRvcix7UG9wdXBUb29sOncsVGFibGVDb21tYW5kOnksSW5zZXJ0VGFibGVUb29sOmIsVGFibGVNb2RpZmljYXRpb25Ub29sOlQsSW5zZXJ0Um93Q29tbWFuZDprLEluc2VydENvbHVtbkNvbW1hbmQ6eCxEZWxldGVSb3dDb21tYW5kOkMsRGVsZXRlQ29sdW1uQ29tbWFuZDpTfSksbShcImNyZWF0ZVRhYmxlXCIsbmV3IGIoe3RlbXBsYXRlOm5ldyBwKHt0ZW1wbGF0ZTphLmJ1dHRvblRlbXBsYXRlLHBvcHVwOiEwLHRpdGxlOlwiQ3JlYXRlIHRhYmxlXCJ9KX0pKSxtKFwiYWRkQ29sdW1uTGVmdFwiLG5ldyBUKHt0eXBlOlwiY29sdW1uXCIscG9zaXRpb246XCJiZWZvcmVcIix0ZW1wbGF0ZTpuZXcgcCh7dGVtcGxhdGU6YS5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIkFkZCBjb2x1bW4gb24gdGhlIGxlZnRcIn0pfSkpLG0oXCJhZGRDb2x1bW5SaWdodFwiLG5ldyBUKHt0eXBlOlwiY29sdW1uXCIsdGVtcGxhdGU6bmV3IHAoe3RlbXBsYXRlOmEuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJBZGQgY29sdW1uIG9uIHRoZSByaWdodFwifSl9KSksbShcImFkZFJvd0Fib3ZlXCIsbmV3IFQoe3R5cGU6XCJyb3dcIixwb3NpdGlvbjpcImJlZm9yZVwiLHRlbXBsYXRlOm5ldyBwKHt0ZW1wbGF0ZTphLmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiQWRkIHJvdyBhYm92ZVwifSl9KSksbShcImFkZFJvd0JlbG93XCIsbmV3IFQoe3R5cGU6XCJyb3dcIix0ZW1wbGF0ZTpuZXcgcCh7dGVtcGxhdGU6YS5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIkFkZCByb3cgYmVsb3dcIn0pfSkpLG0oXCJkZWxldGVSb3dcIixuZXcgVCh7dHlwZTpcInJvd1wiLGFjdGlvbjpcImRlbGV0ZVwiLHRlbXBsYXRlOm5ldyBwKHt0ZW1wbGF0ZTphLmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiRGVsZXRlIHJvd1wifSl9KSksbShcImRlbGV0ZUNvbHVtblwiLG5ldyBUKHt0eXBlOlwiY29sdW1uXCIsYWN0aW9uOlwiZGVsZXRlXCIsdGVtcGxhdGU6bmV3IHAoe3RlbXBsYXRlOmEuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJEZWxldGUgY29sdW1uXCJ9KX0pKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXt2YXIgbj13aW5kb3cua2VuZG8saT1uLmNhcmV0LHI9bi5rZXlzLG89bi51aSxhPW8uV2lkZ2V0LHM9XCIua2VuZG9NYXNrZWRUZXh0Qm94XCIsbD1lLnByb3h5LGM9KG4uc3VwcG9ydC5wcm9wZXJ0eUNoYW5nZUV2ZW50P1wicHJvcGVydHljaGFuZ2VcIjpcImlucHV0XCIpK3MsZD1cImstc3RhdGUtZGlzYWJsZWRcIix1PVwiZGlzYWJsZWRcIixoPVwicmVhZG9ubHlcIixwPVwiY2hhbmdlXCIsZj1hLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LHIpe3ZhciBvLGwsYz10aGlzO2EuZm4uaW5pdC5jYWxsKGMsdCxyKSxjLl9ydWxlcz1lLmV4dGVuZCh7fSxjLnJ1bGVzLGMub3B0aW9ucy5ydWxlcyksdD1jLmVsZW1lbnQsbz10WzBdLGMud3JhcHBlcj10LGMuX3Rva2VuaXplKCksYy5fcmVzZXQoKSxjLmVsZW1lbnQuYWRkQ2xhc3MoXCJrLXRleHRib3hcIikuYXR0cihcImF1dG9jb21wbGV0ZVwiLFwib2ZmXCIpLm9uKFwiZm9jdXNcIitzLGZ1bmN0aW9uKCl7dmFyIGU9by52YWx1ZTtlP2MuX3RvZ2dsZVByb21wdCghMCk6by52YWx1ZT1jLl9vbGQ9Yy5fZW1wdHlNYXNrLGMuX29sZFZhbHVlPWUsYy5fdGltZW91dElkPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpKHQsMCxlP2MuX21hc2tMZW5ndGg6MCl9KX0pLm9uKFwiZm9jdXNvdXRcIitzLGZ1bmN0aW9uKCl7dmFyIGU9dC52YWwoKTtjbGVhclRpbWVvdXQoYy5fdGltZW91dElkKSxvLnZhbHVlPWMuX29sZD1cIlwiLGUhPT1jLl9lbXB0eU1hc2smJihvLnZhbHVlPWMuX29sZD1lKSxjLl9jaGFuZ2UoKSxjLl90b2dnbGVQcm9tcHQoKX0pLGw9dC5pcyhcIltkaXNhYmxlZF1cIiksbD9jLmVuYWJsZSghMSk6Yy5yZWFkb25seSh0LmlzKFwiW3JlYWRvbmx5XVwiKSksYy52YWx1ZShjLm9wdGlvbnMudmFsdWV8fHQudmFsKCkpLG4ubm90aWZ5KGMpfSxvcHRpb25zOntuYW1lOlwiTWFza2VkVGV4dEJveFwiLHByb21wdENoYXI6XCJfXCIsY2xlYXJQcm9tcHRDaGFyOiExLGN1bHR1cmU6XCJcIixydWxlczp7fSx2YWx1ZTpcIlwiLG1hc2s6XCJcIn0sZXZlbnRzOltwXSxydWxlczp7MDovXFxkLyw5Oi9cXGR8XFxzLyxcIiNcIjovXFxkfFxcc3xcXCt8XFwtLyxMOi9bYS16QS1aXS8sXCI/XCI6L1thLXpBLVpdfFxccy8sXCImXCI6L1xcUy8sQzovLi8sQTovW2EtekEtWjAtOV0vLGE6L1thLXpBLVowLTldfFxccy99LHNldE9wdGlvbnM6ZnVuY3Rpb24odCl7dmFyIG49dGhpczthLmZuLnNldE9wdGlvbnMuY2FsbChuLHQpLG4uX3J1bGVzPWUuZXh0ZW5kKHt9LG4ucnVsZXMsbi5vcHRpb25zLnJ1bGVzKSxuLl90b2tlbml6ZSgpLHRoaXMuX3VuYmluZElucHV0KCksdGhpcy5fYmluZElucHV0KCksbi52YWx1ZShuLmVsZW1lbnQudmFsKCkpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLmVsZW1lbnQub2ZmKHMpLGUuX2Zvcm0mJmUuX2Zvcm0ub2ZmKFwicmVzZXRcIixlLl9yZXNldEhhbmRsZXIpLGEuZm4uZGVzdHJveS5jYWxsKGUpfSx2YWx1ZTpmdW5jdGlvbihlKXt2YXIgaT10aGlzLmVsZW1lbnQscj10aGlzLl9lbXB0eU1hc2s7cmV0dXJuIGU9PT10P3RoaXMuZWxlbWVudC52YWwoKToobnVsbD09PWUmJihlPVwiXCIpLHI/KGU9dGhpcy5fdW5tYXNrKGUrXCJcIiksaS52YWwoZT9yOlwiXCIpLHRoaXMuX21hc2soMCx0aGlzLl9tYXNrTGVuZ3RoLGUpLGU9aS52YWwoKSx0aGlzLl9vbGRWYWx1ZT1lLG4uX2FjdGl2ZUVsZW1lbnQoKSE9PWkmJihlPT09cj9pLnZhbChcIlwiKTp0aGlzLl90b2dnbGVQcm9tcHQoKSksdCk6KGkudmFsKGUpLHQpKX0sX3RvZ2dsZVByb21wdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmVsZW1lbnRbMF0sbj10LnZhbHVlO3RoaXMub3B0aW9ucy5jbGVhclByb21wdENoYXImJihuPWU/dGhpcy5fb2xkVmFsdWU6bi5yZXBsYWNlKFJlZ0V4cCh0aGlzLm9wdGlvbnMucHJvbXB0Q2hhcixcImdcIiksXCIgXCIpLHQudmFsdWU9dGhpcy5fb2xkPW4pfSxyZWFkb25seTpmdW5jdGlvbihlKXt0aGlzLl9lZGl0YWJsZSh7cmVhZG9ubHk6ZT09PXQ/ITA6ZSxkaXNhYmxlOiExfSl9LGVuYWJsZTpmdW5jdGlvbihlKXt0aGlzLl9lZGl0YWJsZSh7cmVhZG9ubHk6ITEsZGlzYWJsZTohKGU9ZT09PXQ/ITA6ZSl9KX0sX2JpbmRJbnB1dDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbWFza0xlbmd0aCYmZS5lbGVtZW50Lm9uKFwia2V5ZG93blwiK3MsbChlLl9rZXlkb3duLGUpKS5vbihcImtleXByZXNzXCIrcyxsKGUuX2tleXByZXNzLGUpKS5vbihcInBhc3RlXCIrcyxsKGUuX3Bhc3RlLGUpKS5vbihjLGwoZS5fcHJvcGVydHlDaGFuZ2UsZSkpfSxfdW5iaW5kSW5wdXQ6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQub2ZmKFwia2V5ZG93blwiK3MpLm9mZihcImtleXByZXNzXCIrcykub2ZmKFwicGFzdGVcIitzKS5vZmYoYyl9LF9lZGl0YWJsZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5lbGVtZW50LGk9ZS5kaXNhYmxlLHI9ZS5yZWFkb25seTt0Ll91bmJpbmRJbnB1dCgpLHJ8fGk/bi5hdHRyKHUsaSkuYXR0cihoLHIpLnRvZ2dsZUNsYXNzKGQsaSk6KG4ucmVtb3ZlQXR0cih1KS5yZW1vdmVBdHRyKGgpLnJlbW92ZUNsYXNzKGQpLHQuX2JpbmRJbnB1dCgpKX0sX2NoYW5nZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLnZhbHVlKCk7dCE9PWUuX29sZFZhbHVlJiYoZS5fb2xkVmFsdWU9dCxlLnRyaWdnZXIocCksZS5lbGVtZW50LnRyaWdnZXIocCkpfSxfcHJvcGVydHlDaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcyxyPW4uZWxlbWVudFswXSxvPXIudmFsdWU7bz09PW4uX29sZHx8bi5fcGFzdGluZ3x8KHQ9aShyKVswXSxlPW4uX3VubWFzayhvLnN1YnN0cmluZyh0KSx0KSxyLnZhbHVlPW4uX29sZD1vLnN1YnN0cmluZygwLHQpK24uX2VtcHR5TWFzay5zdWJzdHJpbmcodCksbi5fbWFzayh0LHQsZSksaShyLHQpKX0sX3Bhc3RlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLnRhcmdldCxyPWkobiksbz1yWzBdLGE9clsxXSxzPXQuX3VubWFzayhuLnZhbHVlLnN1YnN0cmluZyhhKSxhKTt0Ll9wYXN0aW5nPSEwLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgZT1uLnZhbHVlLHI9ZS5zdWJzdHJpbmcobyxpKG4pWzBdKTtuLnZhbHVlPXQuX29sZD1lLnN1YnN0cmluZygwLG8pK3QuX2VtcHR5TWFzay5zdWJzdHJpbmcobyksdC5fbWFzayhvLG8sciksbz1pKG4pWzBdLHQuX21hc2sobyxvLHMpLGkobixvKSx0Ll9wYXN0aW5nPSExfSl9LF9yZXNldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LmVsZW1lbnQsaT1uLmF0dHIoXCJmb3JtXCIpLHI9aT9lKFwiI1wiK2kpOm4uY2xvc2VzdChcImZvcm1cIik7clswXSYmKHQuX3Jlc2V0SGFuZGxlcj1mdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnZhbHVlKG5bMF0udmFsdWUpfSl9LHQuX2Zvcm09ci5vbihcInJlc2V0XCIsdC5fcmVzZXRIYW5kbGVyKSl9LF9rZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciBuLG89ZS5rZXlDb2RlLGE9dGhpcy5lbGVtZW50WzBdLHM9aShhKSxsPXNbMF0sYz1zWzFdLGQ9bz09PXIuQkFDS1NQQUNFO2R8fG89PT1yLkRFTEVURT8obD09PWMmJihkP2wtPTE6Yys9MSxuPXRoaXMuX2ZpbmQobCxkKSksbiE9PXQmJm4hPT1sPyhkJiYobis9MSksaShhLG4pKTpsPi0xJiZ0aGlzLl9tYXNrKGwsYyxcIlwiLGQpLGUucHJldmVudERlZmF1bHQoKSk6bz09PXIuRU5URVImJnRoaXMuX2NoYW5nZSgpfSxfa2V5cHJlc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbjswPT09ZS53aGljaHx8ZS5jdHJsS2V5fHxlLmtleUNvZGU9PT1yLkVOVEVSfHwodD1TdHJpbmcuZnJvbUNoYXJDb2RlKGUud2hpY2gpLG49aSh0aGlzLmVsZW1lbnQpLHRoaXMuX21hc2soblswXSxuWzFdLHQpLChlLmtleUNvZGU9PT1yLkJBQ0tTUEFDRXx8dCkmJmUucHJldmVudERlZmF1bHQoKSl9LF9maW5kOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5lbGVtZW50LnZhbCgpfHx0aGlzLl9lbXB0eU1hc2ssaT0xO2Zvcih0PT09ITAmJihpPS0xKTtlPi0xfHx0aGlzLl9tYXNrTGVuZ3RoPj1lOyl7aWYobi5jaGFyQXQoZSkhPT10aGlzLnRva2Vuc1tlXSlyZXR1cm4gZTtlKz1pfXJldHVybi0xfSxfbWFzazpmdW5jdGlvbihlLHIsbyxhKXt2YXIgcyxsLGMsZCx1PXRoaXMuZWxlbWVudFswXSxoPXUudmFsdWV8fHRoaXMuX2VtcHR5TWFzayxwPXRoaXMub3B0aW9ucy5wcm9tcHRDaGFyLGY9MDtmb3IoZT10aGlzLl9maW5kKGUsYSksZT5yJiYocj1lKSxsPXRoaXMuX3VubWFzayhoLnN1YnN0cmluZyhyKSxyKSxvPXRoaXMuX3VubWFzayhvLGUpLHM9by5sZW5ndGgsbyYmKGw9bC5yZXBsYWNlKFJlZ0V4cChcIl5fezAsXCIrcytcIn1cIiksXCJcIikpLG8rPWwsaD1oLnNwbGl0KFwiXCIpLGM9by5jaGFyQXQoZik7dGhpcy5fbWFza0xlbmd0aD5lOyloW2VdPWN8fHAsYz1vLmNoYXJBdCgrK2YpLGQ9PT10JiZmPnMmJihkPWUpLGU9dGhpcy5fZmluZChlKzEpO3UudmFsdWU9dGhpcy5fb2xkPWguam9pbihcIlwiKSxuLl9hY3RpdmVFbGVtZW50KCk9PT11JiYoZD09PXQmJihkPXRoaXMuX21hc2tMZW5ndGgpLGkodSxkKSl9LF91bm1hc2s6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG8sYSxzLGwsYyxkO2lmKCF0KXJldHVyblwiXCI7Zm9yKHQ9KHQrXCJcIikuc3BsaXQoXCJcIiksbz0wLGE9bnx8MCxzPXRoaXMub3B0aW9ucy5wcm9tcHRDaGFyLGw9dC5sZW5ndGgsYz10aGlzLnRva2Vucy5sZW5ndGgsZD1cIlwiO2M+YSYmKGk9dFtvXSxyPXRoaXMudG9rZW5zW2FdLGk9PT1yfHxpPT09cz8oZCs9aT09PXM/czpcIlwiLG8rPTEsYSs9MSk6XCJzdHJpbmdcIiE9dHlwZW9mIHI/KChyLnRlc3QmJnIudGVzdChpKXx8ZS5pc0Z1bmN0aW9uKHIpJiZyKGkpKSYmKGQrPWksYSs9MSksbys9MSk6YSs9MSwhKG8+PWwpKTspO3JldHVybiBkfSxfdG9rZW5pemU6ZnVuY3Rpb24oKXtmb3IodmFyIGUsdCxpLHIsbz1bXSxhPTAscz10aGlzLm9wdGlvbnMubWFza3x8XCJcIixsPXMuc3BsaXQoXCJcIiksYz1sLmxlbmd0aCxkPTAsdT1cIlwiLGg9dGhpcy5vcHRpb25zLnByb21wdENoYXIscD1uLmdldEN1bHR1cmUodGhpcy5vcHRpb25zLmN1bHR1cmUpLm51bWJlckZvcm1hdCxmPXRoaXMuX3J1bGVzO2M+ZDtkKyspaWYoZT1sW2RdLHQ9ZltlXSlvW2FdPXQsdSs9aCxhKz0xO2Vsc2UgZm9yKFwiLlwiPT09ZXx8XCIsXCI9PT1lP2U9cFtlXTpcIiRcIj09PWU/ZT1wLmN1cnJlbmN5LnN5bWJvbDpcIlxcXFxcIj09PWUmJihkKz0xLGU9bFtkXSksZT1lLnNwbGl0KFwiXCIpLGk9MCxyPWUubGVuZ3RoO3I+aTtpKyspb1thXT1lW2ldLHUrPWVbaV0sYSs9MTt0aGlzLnRva2Vucz1vLHRoaXMuX2VtcHR5TWFzaz11LHRoaXMuX21hc2tMZW5ndGg9dS5sZW5ndGh9fSk7by5wbHVnaW4oZil9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXt2YXIgbj1cInN0cmluZ1wiPT10eXBlb2YgZT9be25hbWU6ZX1dOmUsaT1cIltvYmplY3QgQXJyYXldXCI9PT1fdC5jYWxsKG4pP246biE9PXQ/W25dOltdO3JldHVybiB3dChpLGZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlP3tuYW1lOmV9OntuYW1lOmUubmFtZSx0eXBlOmUudHlwZX19KX1mdW5jdGlvbiBpKGUpe3ZhciBuPVwic3RyaW5nXCI9PXR5cGVvZiBlP1t7bmFtZTpbZV0sZXhwYW5kOiExfV06ZSxpPVwiW29iamVjdCBBcnJheV1cIj09PV90LmNhbGwobik/bjpuIT09dD9bbl06W107cmV0dXJuIHd0KGksZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGU/e25hbWU6W2VdLGV4cGFuZDohMX06e25hbWU6XCJbb2JqZWN0IEFycmF5XVwiPT09X3QuY2FsbChlLm5hbWUpP2UubmFtZS5zbGljZSgpOltlLm5hbWVdLGV4cGFuZDplLmV4cGFuZH19KX1mdW5jdGlvbiByKGUsdCxuLGkpe3ZhciBvLGEscyxsO2lmKG58fChuPXQpLGl8fChpPTApLGw9bi5tZW1iZXJzW2ldLGwmJiFsLm1lYXN1cmUpe2lmKHM9bC5jaGlsZHJlbixhPXMubGVuZ3RoLG49PT10P2VbcHQuc3RyaW5naWZ5KFtsLm5hbWVdKV09ISFhOmEmJihlW3B0LnN0cmluZ2lmeShsdChuLGkpKV09ITApLGEpZm9yKG89MDthPm87bysrKXIoZSx0LHNbb10saSk7XG5yKGUsdCxuLGkrMSl9fWZ1bmN0aW9uIG8odCl7dmFyIG4saSxvPXt9O3QubGVuZ3RoJiZyKG8sdFswXSksbj1bXTtmb3IoaSBpbiBvKW4ucHVzaCh7bmFtZTplLnBhcnNlSlNPTihpKSxleHBhbmQ6b1tpXX0pO3JldHVybiBufWZ1bmN0aW9uIGEoZSx0KXt2YXIgbixpLHIsbyxhPXQudHVwbGVzfHxbXSxzPWFbMF07aWYocyYmcy5tZW1iZXJzLmxlbmd0aD5lLmxlbmd0aClmb3Iobj1zLm1lbWJlcnMsaT0wO24ubGVuZ3RoPmk7aSsrKWlmKCFuW2ldLm1lYXN1cmUpe2ZvcihyPSExLG89MDtlLmxlbmd0aD5vO28rKylpZigwPT09TyhlW29dKS5pbmRleE9mKG5baV0uaGllcmFyY2h5KSl7cj0hMDticmVha31yfHxlLnB1c2goe25hbWU6W25baV0ubmFtZV0sZXhwYW5kOiExfSl9fWZ1bmN0aW9uIHMoZSl7dmFyIHQsbj1bXSxpPWUubWVtYmVycztmb3IodD0wO2kubGVuZ3RoPnQ7dCsrKWlbdF0ubWVhc3VyZXx8bi5wdXNoKHtuYW1lOltpW3RdLm5hbWVdLGV4cGFuZDppW3RdLmNoaWxkcmVuLmxlbmd0aD4wfSk7cmV0dXJuIG59ZnVuY3Rpb24gbChlLHQsbil7dmFyIHIsbztyZXR1cm4gZT1lfHx7fSxhKHQsZSksbi5sZW5ndGg+MSYmdC5wdXNoKHtuYW1lOlwiTWVhc3VyZXNcIixtZWFzdXJlOiEwLGNoaWxkcmVuOmkobil9KSxyPXttZW1iZXJzOnR9LGUudHVwbGVzJiYobz14KGUudHVwbGVzLHIpLG8udHVwbGUmJih0PXMoby50dXBsZSkpKSx0fWZ1bmN0aW9uIGMoZSx0LG4saSxyLG8sYSl7dmFyIHMsbCxjLGQsdSxoLHAsZj0wLGc9dDtmb3IobCBpbiBuW2ldLmFnZ3JlZ2F0ZXMpcz1uW2ldLmFnZ3JlZ2F0ZXNbbF0sZD1yW2xdLHU9b1tsXSxzPWQ/ZChzKTpzLmFjY3VtdWxhdG9yLGVbZ109e29yZGluYWw6Zyx2YWx1ZTpzLGZtdFZhbHVlOnU/cHQuZm9ybWF0KHUscyk6c30sKytmLGcrPWE7aD1uW2ldLml0ZW1zO2ZvcihjIGluIGgpe3A9aFtjXS5pbmRleCpmLHA9ZytwKmE7Zm9yKGwgaW4gaFtjXS5hZ2dyZWdhdGVzKXM9aFtjXS5hZ2dyZWdhdGVzW2xdLGQ9cltsXSx1PW9bbF0scz1kP2Qocyk6cy5hY2N1bXVsYXRvcixlW3BdPXtvcmRpbmFsOnAsdmFsdWU6cyxmbXRWYWx1ZTp1P3B0LmZvcm1hdCh1LHMpOnN9LHArPWF9fWZ1bmN0aW9uIGQoZSx0LG4saSxyLG8pe3ZhciBhLHMsbCxjLGQsdSxoLHA9MDtmb3IocyBpbiBuW2ldLmFnZ3JlZ2F0ZXMpYT1uW2ldLmFnZ3JlZ2F0ZXNbc10sYz1yW3NdLGQ9b1tzXSxhPWM/YyhhKTphLmFjY3VtdWxhdG9yLGVbZS5sZW5ndGhdPXtvcmRpbmFsOnQrKyx2YWx1ZTphLGZtdFZhbHVlOmQ/cHQuZm9ybWF0KGQsYSk6YX0sKytwO3U9bltpXS5pdGVtcztmb3IobCBpbiB1KXtoPXVbbF0uaW5kZXgqcDtmb3IocyBpbiB1W2xdLmFnZ3JlZ2F0ZXMpYT11W2xdLmFnZ3JlZ2F0ZXNbc10sYz1yW3NdLGQ9b1tzXSxhPWM/YyhhKTphLmFjY3VtdWxhdG9yLGVbZS5sZW5ndGhdPXtvcmRpbmFsOnQraCsrLHZhbHVlOmEsZm10VmFsdWU6ZD9wdC5mb3JtYXQoZCxhKTphfX19ZnVuY3Rpb24gdShlKXt2YXIgdD1wdC5nZXR0ZXIoZS5maWVsZCwhMCk7cmV0dXJuIGZ1bmN0aW9uKG4saSl7cmV0dXJuIGUuYWdncmVnYXRlKHQobi5kYXRhSXRlbSksaSxuKX19ZnVuY3Rpb24gaChlKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgZSYmIWlzTmFOKGUpfWZ1bmN0aW9uIHAoZSl7cmV0dXJuIGUmJmUuZ2V0VGltZX1mdW5jdGlvbiBmKGUsbixpKXtyZXR1cm4gZS50dXBsZXMubGVuZ3RoPF8obi50dXBsZXMsaSk/bjp0fWZ1bmN0aW9uIGcoZSx0LG4saSxyKXt2YXIgbyxhLHMsbD1lLmxlbmd0aCxjPV8odCxpKSxkPWkubGVuZ3RofHwxO2ZvcihhPTA7bj5hO2ErKylmb3Iobz0wO2w+bztvKyspcz12KGVbb10sdCkqZCxzKz1vJWQsclthKmwrb10ub3JkaW5hbD1hKmMrc31mdW5jdGlvbiBtKGUsdCxuLGkscil7dmFyIG8sYSxzLGw9ZS5sZW5ndGgsYz0oXyh0LGkpLGkubGVuZ3RofHwxKTtmb3IoYT0wO2w+YTthKyspZm9yKHM9dihlW2FdLHQpLHMqPWMscys9YSVjLG89MDtuPm87bysrKXJbYSpuK29dLm9yZGluYWw9cypuK299ZnVuY3Rpb24gdihlLHQpe3JldHVybiB4KHQsZSkuaW5kZXh9ZnVuY3Rpb24gXyhlLHQpe3ZhciBuLGkscjtpZighZS5sZW5ndGgpcmV0dXJuIDA7Zm9yKG49ZS5zbGljZSgpLGk9bi5zaGlmdCgpLHI9MTtpOylpLm1lbWJlcnM/W10ucHVzaC5hcHBseShuLGkubWVtYmVycyk6aS5jaGlsZHJlbiYmKGkubWVhc3VyZXx8KHIrPWkuY2hpbGRyZW4ubGVuZ3RoKSxbXS5wdXNoLmFwcGx5KG4saS5jaGlsZHJlbikpLGk9bi5zaGlmdCgpO3JldHVybiB0Lmxlbmd0aCYmKHIqPXQubGVuZ3RoKSxyfWZ1bmN0aW9uIHkoZSl7cmV0dXJuIGV8fChlPXt0dXBsZXM6W119KSxlLnR1cGxlc3x8KGUudHVwbGVzPVtdKSxlfWZ1bmN0aW9uIHcoZSx0LG4pe3ZhciBpLHIsbztpZighZSlyZXR1cm4gMDtmb3IoaT1NYXRoLm1heChuLmxlbmd0aCwxKSxyPWUubWVtYmVycy5zbGljZSgwLHQpLG89ci5zaGlmdCgpO287KW8uY2hpbGRyZW4/W10ucHVzaC5hcHBseShyLG8uY2hpbGRyZW4pOihpKyssW10ucHVzaC5hcHBseShyLG8ubWVtYmVycykpLG89ci5zaGlmdCgpO3JldHVybiBpfWZ1bmN0aW9uIGIoZSx0LG4pe3ZhciBpLHIsbyxhLHMsbDtpZighdFswXSlyZXR1cm57cGFyc2VkUm9vdDpudWxsLHR1cGxlczplLG1lbWJlckluZGV4OjAsaW5kZXg6MH07aWYoaT14KGUsdFswXSksIWkudHVwbGUpcmV0dXJue3BhcnNlZFJvb3Q6bnVsbCx0dXBsZXM6dCxtZW1iZXJJbmRleDowLGluZGV4OjB9O2lmKHI9aS50dXBsZS5tZW1iZXJzLG89dFswXS5tZW1iZXJzLGE9LTEsci5sZW5ndGghPT1vLmxlbmd0aClyZXR1cm57cGFyc2VkUm9vdDpudWxsLHR1cGxlczp0LG1lbWJlckluZGV4OjAsaW5kZXg6MH07Zm9yKHM9MCxsPXIubGVuZ3RoO2w+cztzKyspIXJbc10ubWVhc3VyZSYmb1tzXS5jaGlsZHJlblswXSYmKC0xPT1hJiZvW3NdLmNoaWxkcmVuLmxlbmd0aCYmKGE9cykscltzXS5jaGlsZHJlbj1vW3NdLmNoaWxkcmVuKTtyZXR1cm4gbj1NYXRoLm1heChuLmxlbmd0aCwxKSx7cGFyc2VkUm9vdDppLnR1cGxlLGluZGV4OmkuaW5kZXgqbixtZW1iZXJJbmRleDphLHR1cGxlczplfX1mdW5jdGlvbiBrKGUsdCl7dmFyIG4saSxyPSEwO2ZvcihlPWUubWVtYmVycyx0PXQubWVtYmVycyxuPTAsaT1lLmxlbmd0aDtpPm47bisrKWVbbl0ubWVhc3VyZXx8dFtuXS5tZWFzdXJlfHwocj1yJiZPKGVbbl0pPT09Tyh0W25dKSk7cmV0dXJuIHJ9ZnVuY3Rpb24geChlLHQpe3ZhciBuLGkscixvLGEscyxsLGM9MDtmb3Iobj0wLGk9ZS5sZW5ndGg7aT5uO24rKyl7aWYocj1lW25dLGsocix0KSlyZXR1cm57dHVwbGU6cixpbmRleDpjfTtmb3IoYysrLGE9MCxzPXIubWVtYmVycy5sZW5ndGg7cz5hO2ErKylpZihsPXIubWVtYmVyc1thXSwhbC5tZWFzdXJlJiYobz14KGwuY2hpbGRyZW4sdCksYys9by5pbmRleCxvLnR1cGxlKSlyZXR1cm57dHVwbGU6by50dXBsZSxpbmRleDpjfX1yZXR1cm57aW5kZXg6Y319ZnVuY3Rpb24gQyhlLHQpe3ZhciBuLGkscixvPVwiXCI7Zm9yKGk9MCxyPWUubGVuZ3RoO3I+aTtpKyspbj1lW2ldLG8rPW4ubmFtZSx0W29dfHwodFtvXT1uKX1mdW5jdGlvbiBTKGUsdCl7dmFyIG4saSxyLG8sYT1lLm1lbWJlcnMscz1cIlwiLGw9XCJcIjtmb3Iobj0wLGk9YS5sZW5ndGg7aT5uO24rKyl7aWYocj1hW25dLG8pe2lmKHRbcytyLm5hbWVdKXtzKz1yLm5hbWUsbz10W3NdO2NvbnRpbnVlfXJldHVybiB0W3Mrci5wYXJlbnROYW1lXT90W3Mrci5wYXJlbnROYW1lXTooci5wYXJlbnROYW1lJiYobCs9ci5wYXJlbnROYW1lKSx0W2xdKX1pZihzKz1yLm5hbWUsbz10W3IucGFyZW50TmFtZV0sIW8mJihvPXRbc10sIW8pKXJldHVybiBudWxsO28mJihsKz1vLm5hbWUpfXJldHVybiBvfWZ1bmN0aW9uIFQoZSx0KXt2YXIgbixpLHIsbztpZigwPT09dC5sZW5ndGgpcmV0dXJuLTE7Zm9yKG49dFswXSxpPWUubWVtYmVycyxyPTAsbz1pLmxlbmd0aDtvPnI7cisrKWlmKGlbcl0ubmFtZT09bi5uYW1lKXJldHVybiByfWZ1bmN0aW9uIEQobixpKXtpZighKDA+aSkpe3ZhciByPXtuYW1lOlwiTWVhc3VyZXNcIixtZWFzdXJlOiEwLGNoaWxkcmVuOltlLmV4dGVuZCh7bWVtYmVyczpbXSxkYXRhSW5kZXg6bi5kYXRhSW5kZXh9LG4ubWVtYmVyc1tpXSldfTtuLm1lbWJlcnMuc3BsaWNlKGksMSxyKSxuLmRhdGFJbmRleD10fX1mdW5jdGlvbiBBKGUsdCl7dmFyIG4saSxyLG8sYSxzO2lmKDE+ZS5sZW5ndGgpcmV0dXJuW107Zm9yKG49W10saT17fSxyPVQoZVswXSx0KSxvPTA7ZS5sZW5ndGg+bztvKyspYT1lW29dLGEuZGF0YUluZGV4PW8sRChhLHIpLHM9UyhhLGkpLHM/cy5jaGlsZHJlbi5wdXNoKDA+cnx8IXMubWVhc3VyZT9hOmEubWVtYmVyc1tyXS5jaGlsZHJlblswXSk6bi5wdXNoKGEpLEMoYS5tZW1iZXJzLGkpO3JldHVybiBufWZ1bmN0aW9uIEUoZSx0KXt2YXIgbixpLHIsbyxhLHMsbCxjLGQ7aWYoIWV8fCFlLmxlbmd0aClyZXR1cm4gdDtmb3Iobj1bXSxpPVAoZSkscj1pLmxlbmd0aCxvPU1hdGgubWF4KHQubGVuZ3RoL3IsMSksYT0wO3I+YTthKyspZm9yKGw9byphLGM9byppW2FdLHM9MDtvPnM7cysrKWQ9cGFyc2VJbnQoYytzLDEwKSxuW3BhcnNlSW50KGwrcywxMCldPXRbZF18fHt2YWx1ZTpcIlwiLGZtdFZhbHVlOlwiXCIsb3JkaW5hbDpkfTtyZXR1cm4gbn1mdW5jdGlvbiBNKGUsdCl7dmFyIG4saSxyLG8sYSxzLGwsYztpZighZXx8IWUubGVuZ3RoKXJldHVybiB0O2ZvcihuPVtdLGk9UChlKSxyPWkubGVuZ3RoLG89TWF0aC5tYXgodC5sZW5ndGgvciwxKSxzPTA7bz5zO3MrKylmb3IobD1yKnMsYT0wO3I+YTthKyspYz1pW2FdK2wsbltsK2FdPXRbY118fHt2YWx1ZTpcIlwiLGZtdFZhbHVlOlwiXCIsb3JkaW5hbDpjfTtyZXR1cm4gbn1mdW5jdGlvbiBQKGUpe3ZhciBuLGkscixvLGEscyxsO2ZvcihlPWUuc2xpY2UoKSxuPVtdLGk9ZS5zaGlmdCgpO2k7KXtmb3IoaS5kYXRhSW5kZXghPT10JiZuLnB1c2goaS5kYXRhSW5kZXgpLGE9MCxyPTAsbz1pLm1lbWJlcnMubGVuZ3RoO28+cjtyKyspbD1pLm1lbWJlcnNbcl0scz1sLmNoaWxkcmVuLGwubWVhc3VyZT9bXS5zcGxpY2UuYXBwbHkoZSxbMCwwXS5jb25jYXQocykpOltdLnNwbGljZS5hcHBseShlLFthLDBdLmNvbmNhdChzKSksYSs9cy5sZW5ndGg7aT1lLnNoaWZ0KCl9cmV0dXJuIG59ZnVuY3Rpb24gSShlKXt2YXIgdD1lLnNwbGl0KFwiLlwiKTtyZXR1cm4gdC5sZW5ndGg+Mj90WzBdK1wiLlwiK3RbMV06ZX1mdW5jdGlvbiB6KGUsdCl7dmFyIG49ZS5sZW5ndGgtMSxpPWVbbl0scj1GKHQsaSk7cmV0dXJuIHImJnIuZGlyP2k9XCJPUkRFUihcIitpK1wiLkNoaWxkcmVuLFwiK3IuZmllbGQrXCIuQ3VycmVudE1lbWJlci5NRU1CRVJfQ0FQVElPTixcIityLmRpcitcIilcIjppKz1cIi5DaGlsZHJlblwiLGVbbl09aSxlfWZ1bmN0aW9uIEYoZSx0KXtmb3IodmFyIG49MCxpPWUubGVuZ3RoO2k+bjtuKyspaWYoMD09PXQuaW5kZXhPZihlW25dLmZpZWxkKSlyZXR1cm4gZVtuXTtyZXR1cm4gbnVsbH1mdW5jdGlvbiBSKGUpe3ZhciB0LG49XCJDUk9TU0pPSU4oe1wiO3JldHVybiBlLmxlbmd0aD4yPyh0PWUucG9wKCksbis9UihlKSk6KG4rPWUuc2hpZnQoKSx0PWUucG9wKCkpLG4rPVwifSx7XCIsbis9dCxuKz1cIn0pXCJ9ZnVuY3Rpb24gQihlLHQpe3ZhciBuPWUuc2xpY2UoMCk7cmV0dXJuIHQubGVuZ3RoPjEmJm4ucHVzaChcIntcIitMKHQpLmpvaW4oXCIsXCIpK1wifVwiKSxSKG4pfWZ1bmN0aW9uIEwoZSl7Zm9yKHZhciBuLGk9MCxyPWUubGVuZ3RoLG89W107cj5pO2krKyluPWVbaV0sby5wdXNoKG4ubmFtZSE9PXQ/bi5uYW1lOm4pO3JldHVybiBvfWZ1bmN0aW9uIE8oZSl7cmV0dXJuIGU9ZS5uYW1lfHxlLFwiW29iamVjdCBBcnJheV1cIj09PV90LmNhbGwoZSkmJihlPWVbZS5sZW5ndGgtMV0pLGV9ZnVuY3Rpb24gSChlKXtmb3IodmFyIHQ9ZS5sZW5ndGgsbj1bXSxpPTA7dD5pO2krKyluLnB1c2goZVtpXS5uYW1lWzBdKTtyZXR1cm4gbn1mdW5jdGlvbiBOKGUsdCl7dmFyIG4saSxyLG89MCxhPWUubGVuZ3RoLHM9dC5sZW5ndGg7Zm9yKHQ9dC5zbGljZSgwKTthPm87bysrKWZvcihuPWVbb10scj0wO3M+cjtyKyspaWYoaT1JKHRbcl0pLC0xIT09bi5pbmRleE9mKGkpKXt0W3JdPW47YnJlYWt9cmV0dXJuIHR9ZnVuY3Rpb24gVihlKXtmb3IodmFyIHQsbixpLHIsbyxhLHM9W10sbD1bXSxjPVtdLGQ9MCx1PWUubGVuZ3RoO3U+ZDtkKyspaWYodD1lW2RdLHI9dC5uYW1lLGE9ITEsXCJbb2JqZWN0IEFycmF5XVwiIT09X3QuY2FsbChyKSYmKHQubmFtZT1yPVtyXSksci5sZW5ndGg+MSlsLnB1c2godCk7ZWxzZXtmb3Iobz1JKHJbMF0pLG49MCxpPWMubGVuZ3RoO2k+bjtuKyspaWYoMD09PWNbbl0ubmFtZVswXS5pbmRleE9mKG8pKXthPSEwO2JyZWFrfWF8fGMucHVzaCh0KSx0LmV4cGFuZCYmcy5wdXNoKHQpfXJldHVybiBzPXMuY29uY2F0KGwpLHtyb290OmMsZXhwYW5kZWQ6c319ZnVuY3Rpb24gVShlLHQsbil7dmFyIGkscixvLGEscyxsLGMsZCx1PVwiXCI7aWYoZT1lfHxbXSxpPVYoZSkscj1pLnJvb3Qsbz1IKHIpLGE9W10saT1pLmV4cGFuZGVkLHM9aS5sZW5ndGgsbD0wLGQ9W10sby5sZW5ndGg+MXx8dC5sZW5ndGg+MSl7Zm9yKGEucHVzaChCKG8sdCkpO3M+bDtsKyspYz16KGlbbF0ubmFtZSxuKSxkPU4oYyxvKSxhLnB1c2goQihkLHQpKTt1Kz1hLmpvaW4oXCIsXCIpfWVsc2V7Zm9yKDtzPmw7bCsrKWM9eihpW2xdLm5hbWUsbiksZC5wdXNoKGNbMF0pO3UrPW8uY29uY2F0KGQpLmpvaW4oXCIsXCIpfXJldHVybiB1fWZ1bmN0aW9uIFcoZSl7dmFyIHQ9XCJcIixuPWUudmFsdWUsaT1lLmZpZWxkLHI9ZS5vcGVyYXRvcjtyZXR1cm5cImluXCI9PXI/KHQrPVwie1wiLHQrPW4sdCs9XCJ9XCIpOih0Kz1cIkZpbHRlcihcIix0Kz1pK1wiLkNoaWxkcmVuXCIsdCs9cHQuZm9ybWF0KFlbcl0saSxuKSx0Kz1cIilcIiksdH1mdW5jdGlvbiBqKGUsdCl7dmFyIG4saSxyPVwiXCIsbz1lLmZpbHRlcnMsYT1vLmxlbmd0aDtmb3IoaT1hLTE7aT49MDtpLS0pbj1cIlNFTEVDVCAoXCIsbis9VyhvW2ldKSxuKz1cIikgT04gMFwiLGk9PWEtMT8obis9XCIgRlJPTSBbXCIrdCtcIl1cIixyPW4pOnI9bitcIiBGUk9NICggXCIrcitcIiApXCI7cmV0dXJuIHJ9ZnVuY3Rpb24gRyhlLHQsbil7dmFyIGkscixvPVwiXCI7aWYodCl7bys9XCI8XCIrZStcIj5cIjtmb3IociBpbiB0KWk9dFtyXSxuJiYocj1yLnJlcGxhY2UoLyhbQS1aXSsoPz0kfFtBLVpdW2Etel0pfFtBLVpdP1thLXpdKykvZyxcIiQxX1wiKS50b1VwcGVyQ2FzZSgpLnJlcGxhY2UoL18kLyxcIlwiKSksbys9XCI8XCIrcitcIj5cIitpK1wiPC9cIityK1wiPlwiO28rPVwiPC9cIitlK1wiPlwifWVsc2Ugbys9XCI8XCIrZStcIi8+XCI7cmV0dXJuIG99ZnVuY3Rpb24gcShlKXtpZihudWxsPT1lKXJldHVybltdO3ZhciB0PV90LmNhbGwoZSk7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiIT09dD9bZV06ZX1mdW5jdGlvbiAkKGUpe3ZhciB0LG4saSxyLG89e3R1cGxlczpbXX0sYT1xKHB0LmdldHRlcihcIlR1cGxlcy5UdXBsZVwiLCEwKShlKSkscz1wdC5nZXR0ZXIoXCJDYXB0aW9uWycjdGV4dCddXCIpLGw9cHQuZ2V0dGVyKFwiVU5hbWVbJyN0ZXh0J11cIiksYz1wdC5nZXR0ZXIoXCJMTmFtZVsnI3RleHQnXVwiKSxkPXB0LmdldHRlcihcIkxOdW1bJyN0ZXh0J11cIiksdT1wdC5nZXR0ZXIoXCJDSElMRFJFTl9DQVJESU5BTElUWVsnI3RleHQnXVwiLCEwKSxoPXB0LmdldHRlcihcIlsnQEhpZXJhcmNoeSddXCIpLHA9cHQuZ2V0dGVyKFwiUEFSRU5UX1VOSVFVRV9OQU1FWycjdGV4dCddXCIsITApO2Zvcih0PTA7YS5sZW5ndGg+dDt0Kyspe2ZvcihuPVtdLGk9cShhW3RdLk1lbWJlcikscj0wO2kubGVuZ3RoPnI7cisrKW4ucHVzaCh7Y2hpbGRyZW46W10sY2FwdGlvbjpzKGlbcl0pLG5hbWU6bChpW3JdKSxsZXZlbE5hbWU6YyhpW3JdKSxsZXZlbE51bTpkKGlbcl0pLGhhc0NoaWxkcmVuOnBhcnNlSW50KHUoaVtyXSksMTApPjAscGFyZW50TmFtZTpwKGlbcl0pLGhpZXJhcmNoeTpoKGlbcl0pfSk7by50dXBsZXMucHVzaCh7bWVtYmVyczpufSl9cmV0dXJuIG99dmFyIFksSyxRLFgsSixaLGV0LHR0LG50LGl0LHJ0LG90LGF0LHN0LGx0LGN0LGR0LHV0LGh0LHB0PXdpbmRvdy5rZW5kbyxmdD1wdC51aSxndD1wdC5DbGFzcyxtdD1mdC5XaWRnZXQsdnQ9cHQuZGF0YS5EYXRhU291cmNlLF90PXt9LnRvU3RyaW5nLHl0PWZ1bmN0aW9uKGUpe3JldHVybiBlfSx3dD1lLm1hcCxidD1lLmV4dGVuZCxrdD1wdC5pc0Z1bmN0aW9uLHh0PVwiY2hhbmdlXCIsQ3Q9XCJlcnJvclwiLFN0PVwicHJvZ3Jlc3NcIixUdD1cInN0YXRlUmVzZXRcIixEdD1cImF1dG9cIixBdD1cIjxkaXYvPlwiLEV0PVwiLmtlbmRvUGl2b3RHcmlkXCIsTXQ9XCJfX3Jvd190b3RhbF9fXCIsUHQ9XCJkYXRhQmluZGluZ1wiLEl0PVwiZGF0YUJvdW5kXCIsenQ9XCJleHBhbmRNZW1iZXJcIixGdD1cImNvbGxhcHNlTWVtYmVyXCIsUnQ9XCJrLWktYXJyb3ctc1wiLEJ0PVwiay1pLWFycm93LWVcIixMdD1cIiM6IGRhdGEubWVtYmVyLmNhcHRpb24gfHwgZGF0YS5tZW1iZXIubmFtZSAjXCIsT3Q9JzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1rcGktIz1kYXRhLmRhdGFJdGVtLnZhbHVlID4gMCA/IFwib3BlblwiIDogZGF0YS5kYXRhSXRlbS52YWx1ZSA8IDAgPyBcImRlbmllZFwiIDogXCJob2xkXCIjXCI+IzpkYXRhLmRhdGFJdGVtLnZhbHVlIzwvc3Bhbj4nLEh0PSc8c3BhbiBjbGFzcz1cImstaWNvbiBrLWkta3BpLSM9ZGF0YS5kYXRhSXRlbS52YWx1ZSA+IDAgPyBcImluY3JlYXNlXCIgOiBkYXRhLmRhdGFJdGVtLnZhbHVlIDwgMCA/IFwiZGVjcmVhc2VcIiA6IFwiZXF1YWxcIiNcIj4jOmRhdGEuZGF0YUl0ZW0udmFsdWUjPC9zcGFuPicsTnQ9JyM9IGRhdGEuZGF0YUl0ZW0gPyBrZW5kby5odG1sRW5jb2RlKGRhdGEuZGF0YUl0ZW0uZm10VmFsdWUgfHwgZGF0YS5kYXRhSXRlbS52YWx1ZSkgfHwgXCImbmJzcDtcIiA6IFwiJm5ic3A7XCIgIycsVnQ9Jzx0YWJsZSBjbGFzcz1cImstcGl2b3QtbGF5b3V0XCI+PHRyPjx0ZD48ZGl2IGNsYXNzPVwiay1waXZvdC1yb3doZWFkZXJzXCI+PC9kaXY+PC90ZD48dGQ+PGRpdiBjbGFzcz1cImstcGl2b3QtdGFibGUgay1zdGF0ZS1kZWZhdWx0XCI+PC9kaXY+PC90ZD48L3RyPjwvdGFibGU+JyxVdD17c3VtOmZ1bmN0aW9uKGUsdCl7dmFyIG49dC5hY2N1bXVsYXRvcjtyZXR1cm4gaChuKT9oKGUpJiYobis9ZSk6bj1lLG59LGNvdW50OmZ1bmN0aW9uKGUsdCl7cmV0dXJuKHQuYWNjdW11bGF0b3J8fDApKzF9LGF2ZXJhZ2U6e2FnZ3JlZ2F0ZTpmdW5jdGlvbihlLG4pe3ZhciBpPW4uYWNjdW11bGF0b3I7cmV0dXJuIG4uY291bnQ9PT10JiYobi5jb3VudD0wKSxoKGkpP2goZSkmJihpKz1lKTppPWUsaChlKSYmbi5jb3VudCsrLGl9LHJlc3VsdDpmdW5jdGlvbihlKXt2YXIgdD1lLmFjY3VtdWxhdG9yO3JldHVybiBoKHQpJiYodC89ZS5jb3VudCksdH19LG1heDpmdW5jdGlvbihlLHQpe3ZhciBuPXQuYWNjdW11bGF0b3I7cmV0dXJuIGgobil8fHAobil8fChuPWUpLGU+biYmKGgoZSl8fHAoZSkpJiYobj1lKSxufSxtaW46ZnVuY3Rpb24oZSx0KXt2YXIgbj10LmFjY3VtdWxhdG9yO3JldHVybiBoKG4pfHxwKG4pfHwobj1lKSxuPmUmJihoKGUpfHxwKGUpKSYmKG49ZSksbn19LFd0PWd0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnM9YnQoe30sdGhpcy5vcHRpb25zLGUpLHRoaXMuZGltZW5zaW9ucz10aGlzLl9ub3JtYWxpemVEZXNjcmlwdG9ycyhcImZpZWxkXCIsdGhpcy5vcHRpb25zLmRpbWVuc2lvbnMpLHRoaXMubWVhc3VyZXM9dGhpcy5fbm9ybWFsaXplRGVzY3JpcHRvcnMoXCJuYW1lXCIsdGhpcy5vcHRpb25zLm1lYXN1cmVzKX0sX25vcm1hbGl6ZURlc2NyaXB0b3JzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG87aWYodD10fHx7fSxuPXt9LFwiW29iamVjdCBBcnJheV1cIj09PV90LmNhbGwodCkpe2ZvcihyPTAsbz10Lmxlbmd0aDtvPnI7cisrKWk9dFtyXSxcInN0cmluZ1wiPT10eXBlb2YgaT9uW2ldPXt9OmlbZV0mJihuW2lbZV1dPWkpO3Q9bn1yZXR1cm4gdH0sX2FzVHVwbGVzOmZ1bmN0aW9uKGUsbixpKXt2YXIgcixvLGEscyxsLGMsZCx1LGgscDtpZihpPWl8fFtdLHI9dGhpcy5kaW1lbnNpb25zfHxbXSxvPVtdLGg9aS5sZW5ndGh8fDEsbi5sZW5ndGh8fGkubGVuZ3RoKWZvcihjPTA7aD5jO2MrKyl7Zm9yKGE9e21lbWJlcnM6W119LHM9MCxsPW4ubGVuZ3RoO2w+cztzKyspdT1PKG5bc10ubmFtZSksYS5tZW1iZXJzW2EubWVtYmVycy5sZW5ndGhdPXtjaGlsZHJlbjpbXSxjYXB0aW9uOihyW3VdfHx7fSkuY2FwdGlvbnx8XCJBbGxcIixuYW1lOnUsbGV2ZWxOYW1lOnUsbGV2ZWxOdW06XCIwXCIsaGFzQ2hpbGRyZW46ITAscGFyZW50TmFtZTp0LGhpZXJhcmNoeTp1fTtoPjEmJihhLm1lbWJlcnNbYS5tZW1iZXJzLmxlbmd0aF09e2NoaWxkcmVuOltdLGNhcHRpb246aVtjXS5jYXB0aW9uLG5hbWU6aVtjXS5kZXNjcmlwdG9yLm5hbWUsbGV2ZWxOYW1lOlwiTUVBU1VSRVNcIixsZXZlbE51bTpcIjBcIixoYXNDaGlsZHJlbjohMSxwYXJlbnROYW1lOnQsaGllcmFyY2h5OlwiTUVBU1VSRVNcIn0pLG9bby5sZW5ndGhdPWF9Zm9yKHAgaW4gZSlmb3IoYz0wO2g+YztjKyspe2ZvcihkPXttZW1iZXJzOltdfSxzPTAsbD1uLmxlbmd0aDtsPnM7cysrKXU9TyhuW3NdLm5hbWUpLGQubWVtYmVyc1tkLm1lbWJlcnMubGVuZ3RoXT0wPT09ZVtwXS5wYXJlbnROYW1lLmluZGV4T2YodSk/e2NoaWxkcmVuOltdLGNhcHRpb246ZVtwXS52YWx1ZSxuYW1lOmVbcF0ubmFtZSxsZXZlbE5hbWU6ZVtwXS5uYW1lLGxldmVsTnVtOjEsaGFzQ2hpbGRyZW46ITEscGFyZW50TmFtZTp1LGhpZXJhcmNoeTp1fTp7Y2hpbGRyZW46W10sY2FwdGlvbjooclt1XXx8e30pLmNhcHRpb258fFwiQWxsXCIsbmFtZTp1LGxldmVsTmFtZTp1LGxldmVsTnVtOlwiMFwiLGhhc0NoaWxkcmVuOiEwLHBhcmVudE5hbWU6dCxoaWVyYXJjaHk6dX07aD4xJiYoZC5tZW1iZXJzW2QubWVtYmVycy5sZW5ndGhdPXtjaGlsZHJlbjpbXSxjYXB0aW9uOmlbY10uY2FwdGlvbixuYW1lOmlbY10uZGVzY3JpcHRvci5uYW1lLGxldmVsTmFtZTpcIk1FQVNVUkVTXCIsbGV2ZWxOdW06XCIwXCIsaGFzQ2hpbGRyZW46ITAscGFyZW50TmFtZTp0LGhpZXJhcmNoeTpcIk1FQVNVUkVTXCJ9KSxvW28ubGVuZ3RoXT1kfXJldHVybiBvfSxfdG9EYXRhQXJyYXk6ZnVuY3Rpb24oZSx0LG4saSxyKXt2YXIgbyxhLHMsbCxjLGQsdT17fSxoPXt9LHA9MCxmPW4mJm4ubGVuZ3RoO2lmKGYpZm9yKG89dGhpcy5tZWFzdXJlc3x8e307Zj5wO3ArKylzPW5bcF0ubmFtZSxhPW9bc10sYS5yZXN1bHQmJihoW3NdPWEucmVzdWx0KSxhLmZvcm1hdCYmKHVbc109YS5mb3JtYXQpO2w9W10sYz0wLHIobCxjLGUsTXQsaCx1LHQpO2ZvcihkIGluIGUpZCE9PU10JiYoYys9aSxyKGwsYyxlLGQsaCx1LHQpKTtyZXR1cm4gbH0sX21hdGNoRGVzY3JpcHRvcnM6ZnVuY3Rpb24oZSx0LG4saSl7Zm9yKHZhciByLG8sYSxzLGw7aT4wOylpZihyPXRbLS1pXSxvPU8ocikuc3BsaXQoXCImXCIpLG8ubGVuZ3RoPjEmJihhPW9bMF0scz1vWzFdLGw9blthXSxsKGUpIT1zKSlyZXR1cm4hMTtyZXR1cm4hMH0sX2lzRXhwYW5kZWQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj1lLmxlbmd0aDtuPnQ7dCsrKWlmKGVbdF0uZXhwYW5kKXJldHVybiEwO3JldHVybiExfSxfY2FsY3VsYXRlQWdncmVnYXRlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sYT17fTtmb3Iobz0wO2UubGVuZ3RoPm87bysrKXI9ZVtvXS5kZXNjcmlwdG9yLm5hbWUsaT1uLmFnZ3JlZ2F0ZXNbcl18fHt9LGkuYWNjdW11bGF0b3I9ZVtvXS5hZ2dyZWdhdG9yKHQsaSksYVtyXT1pO3JldHVybiBhfSxfcHJvY2Vzc0NvbHVtbnM6ZnVuY3Rpb24oZSxuLGkscixvLGEscyxsKXt2YXIgYyxkLHUsaCxwLGYsZz1vLmRhdGFJdGVtO2ZvcihmPTA7bi5sZW5ndGg+ZjtmKyspaWYoZD1uW2ZdLGQuZXhwYW5kKXtpZighdGhpcy5fbWF0Y2hEZXNjcmlwdG9ycyhnLG4saSxmKSljb250aW51ZTt1PU8oZCksYz1pW3VdKGcpLGM9YyE9PXQ/XCJcIitjOmMsdT11K1wiJlwiK2MsaD1yW3VdfHx7aW5kZXg6cy5jb2x1bW5JbmRleCxuYW1lOnUscGFyZW50TmFtZTp1LHZhbHVlOmN9LHA9YS5pdGVtc1t1XXx8e2FnZ3JlZ2F0ZXM6e319LGEuaXRlbXNbdV09e2luZGV4OmguaW5kZXgsYWdncmVnYXRlczp0aGlzLl9jYWxjdWxhdGVBZ2dyZWdhdGUoZSxvLHApfSxsJiYoclt1XXx8cy5jb2x1bW5JbmRleCsrLHJbdV09aCl9fSxfbWVhc3VyZUFnZ3JlZ2F0b3JzOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYSxzPWUubWVhc3VyZXN8fFtdLGw9dGhpcy5tZWFzdXJlc3x8e30sYz1bXTtpZihzLmxlbmd0aCl7Zm9yKGk9MCxyPXMubGVuZ3RoO3I+aTtpKyspaWYodD1zW2ldLG49bFt0Lm5hbWVdLG89bnVsbCxuKXtpZihhPW4uYWdncmVnYXRlLFwic3RyaW5nXCI9PXR5cGVvZiBhKXtpZihvPVV0W2EudG9Mb3dlckNhc2UoKV0sIW8pdGhyb3cgRXJyb3IoXCJUaGVyZSBpcyBubyBzdWNoIGFnZ3JlZ2F0ZSBmdW5jdGlvblwiKTtuLmFnZ3JlZ2F0ZT1vLmFnZ3JlZ2F0ZXx8byxuLnJlc3VsdD1vLnJlc3VsdH1jLnB1c2goe2Rlc2NyaXB0b3I6dCxjYXB0aW9uOm4uY2FwdGlvbixyZXN1bHQ6bi5yZXN1bHQsYWdncmVnYXRvcjp1KG4pfSl9fWVsc2UgYy5wdXNoKHtkZXNjcmlwdG9yOntuYW1lOlwiZGVmYXVsdFwifSxjYXB0aW9uOlwiZGVmYXVsdFwiLGFnZ3JlZ2F0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gMX19KTtyZXR1cm4gY30sX2J1aWxkR2V0dGVyczpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGE9e307Zm9yKHI9MCxvPWUubGVuZ3RoO28+cjtyKyspdD1lW3JdLGk9Tyh0KSxuPWkuc3BsaXQoXCImXCIpLG4ubGVuZ3RoPjE/YVtuWzBdXT1wdC5nZXR0ZXIoblswXSwhMCk6YVtpXT1wdC5nZXR0ZXIoaSwhMCk7cmV0dXJuIGF9LHByb2Nlc3M6ZnVuY3Rpb24oZSxuKXt2YXIgcixvLGEscyxsLHUsaCxwLGYsZyxtLHYsXyx5LHcsYixrLHgsQyxTLFQsRCxBLEUsTSxQO2lmKGU9ZXx8W10sbj1ufHx7fSxyPW4ubWVhc3VyZXN8fFtdLG89XCJyb3dzXCI9PT1uLm1lYXN1cmVzQXhpcyxhPShvP24ucm93czpuLmNvbHVtbnMpfHxbXSxzPShvP24uY29sdW1uczpuLnJvd3MpfHxbXSwhYS5sZW5ndGgmJnMubGVuZ3RoJiYoIXIubGVuZ3RofHxyLmxlbmd0aCYmbykmJihhPXMscz1bXSxvPSExKSxhLmxlbmd0aHx8cy5sZW5ndGh8fChvPSExKSwhYS5sZW5ndGgmJnIubGVuZ3RoJiYoYT1pKG4ubWVhc3VyZXMpKSxsPXt9LHU9e30saD17fSxmPXtjb2x1bW5JbmRleDowfSxnPXRoaXMuX21lYXN1cmVBZ2dyZWdhdG9ycyhuKSxtPXRoaXMuX2J1aWxkR2V0dGVycyhhKSx2PXRoaXMuX2J1aWxkR2V0dGVycyhzKSxfPSExLGEubGVuZ3RofHxzLmxlbmd0aClmb3IoYj10aGlzLl9pc0V4cGFuZGVkKHMpLF89ITAsaz0wLHg9ZS5sZW5ndGg7eD5rO2srKylmb3IoeT1lW2tdLHc9e2RhdGFJdGVtOnksaW5kZXg6a30sQz1sW010XXx8e2l0ZW1zOnt9LGFnZ3JlZ2F0ZXM6e319LHRoaXMuX3Byb2Nlc3NDb2x1bW5zKGcsYSxtLHUsdyxDLGYsIWIpLEMuYWdncmVnYXRlcz10aGlzLl9jYWxjdWxhdGVBZ2dyZWdhdGUoZyx3LEMpLGxbTXRdPUMsUz0wLFQ9cy5sZW5ndGg7VD5TO1MrKylpZihEPXNbU10sRC5leHBhbmQpe2lmKCF0aGlzLl9tYXRjaERlc2NyaXB0b3JzKHkscyx2LFMpKWNvbnRpbnVlO0E9TyhEKSxwPXZbQV0oeSkscD1wIT09dD9cIlwiK3A6cCxoW3BdPXtuYW1lOkErXCImXCIrcCxwYXJlbnROYW1lOkEsdmFsdWU6cH0sRT1sW3BdfHx7aXRlbXM6e30sYWdncmVnYXRlczp7fX0sdGhpcy5fcHJvY2Vzc0NvbHVtbnMoZyxhLG0sdSx3LEUsZiwhMCksRS5hZ2dyZWdhdGVzPXRoaXMuX2NhbGN1bGF0ZUFnZ3JlZ2F0ZShnLHcsRSksbFtwXT1FfXJldHVybiBfJiZlLmxlbmd0aD8oIShnLmxlbmd0aD4xKXx8bi5jb2x1bW5zJiZuLmNvbHVtbnMubGVuZ3RofHwoYT1bXSksdT10aGlzLl9hc1R1cGxlcyh1LGEsZyksaD10aGlzLl9hc1R1cGxlcyhoLHMsW10pLE09dS5sZW5ndGgsbyYmKE09MSxQPXUsdT1oLGg9UCksbD10aGlzLl90b0RhdGFBcnJheShsLHUubGVuZ3RoLG4ubWVhc3VyZXMsTSxvP2M6ZCksbD10aGlzLl9ub3JtYWxpemVEYXRhKGwsdS5sZW5ndGgsaC5sZW5ndGgpKTpsPXU9aD1bXSx7YXhlczp7Y29sdW1uczp7dHVwbGVzOnV9LHJvd3M6e3R1cGxlczpofX0sZGF0YTpsfX0sX25vcm1hbGl6ZURhdGE6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbz0odHx8MSkqKG58fDEpLGE9QXJyYXkobykscz1lLmxlbmd0aDtpZihzPT09bylyZXR1cm4gZTtmb3Iocj0wO28+cjtyKyspYVtyXT17dmFsdWU6XCJcIixmbXRWYWx1ZTpcIlwiLG9yZGluYWw6cn07Zm9yKHI9MDtzPnI7cisrKWk9ZVtyXSxpJiYoYVtpLm9yZGluYWxdPWkpO3JldHVybiBhfX0pLGp0PWd0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3RoaXMudHJhbnNwb3J0PXQsdGhpcy5vcHRpb25zPXQub3B0aW9uc3x8e30sdGhpcy50cmFuc3BvcnQuZGlzY292ZXJ8fGt0KGUuZGlzY292ZXIpJiYodGhpcy5kaXNjb3Zlcj1lLmRpc2NvdmVyKX0scmVhZDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50cmFuc3BvcnQucmVhZChlKX0sdXBkYXRlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRyYW5zcG9ydC51cGRhdGUoZSl9LGNyZWF0ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50cmFuc3BvcnQuY3JlYXRlKGUpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRyYW5zcG9ydC5kZXN0cm95KGUpfSxkaXNjb3ZlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50cmFuc3BvcnQuZGlzY292ZXI/dGhpcy50cmFuc3BvcnQuZGlzY292ZXIoZSk6KGUuc3VjY2Vzcyh7fSksdCl9LGNhdGFsb2c6ZnVuY3Rpb24obil7dmFyIGkscj10aGlzLm9wdGlvbnN8fHt9O3JldHVybiBuPT09dD8oci5jb25uZWN0aW9ufHx7fSkuY2F0YWxvZzooaT1yLmNvbm5lY3Rpb258fHt9LGkuY2F0YWxvZz1uLHRoaXMub3B0aW9ucy5jb25uZWN0aW9uPWksZS5leHRlbmQodGhpcy50cmFuc3BvcnQub3B0aW9ucyx7Y29ubmVjdGlvbjppfSksdCl9LGN1YmU6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLm9wdGlvbnN8fHt9O3JldHVybiBlPT09dD8oaS5jb25uZWN0aW9ufHx7fSkuY3ViZToobj1pLmNvbm5lY3Rpb258fHt9LG4uY3ViZT1lLHRoaXMub3B0aW9ucy5jb25uZWN0aW9uPW4sYnQoITAsdGhpcy50cmFuc3BvcnQub3B0aW9ucyx7Y29ubmVjdGlvbjpufSksdCl9fSksR3Q9dnQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQpe3ZhciByLG89KCh0fHx7fSkuc2NoZW1hfHx7fSkuY3ViZSxhPVwiY29sdW1uc1wiLHM9e2F4ZXM6eXQsY3ViZXM6eXQsY2F0YWxvZ3M6eXQsbWVhc3VyZXM6eXQsZGltZW5zaW9uczp5dCxoaWVyYXJjaGllczp5dCxsZXZlbHM6eXQsbWVtYmVyczp5dH07byYmKHM9ZS5leHRlbmQocyx0aGlzLl9jdWJlU2NoZW1hKG8pKSx0aGlzLmN1YmVCdWlsZGVyPW5ldyBXdChvKSksdnQuZm4uaW5pdC5jYWxsKHRoaXMsYnQoITAse30se3NjaGVtYTpzfSx0KSksdGhpcy50cmFuc3BvcnQ9bmV3IGp0KHRoaXMub3B0aW9ucy50cmFuc3BvcnR8fHt9LHRoaXMudHJhbnNwb3J0KSx0aGlzLl9jb2x1bW5zPWkodGhpcy5vcHRpb25zLmNvbHVtbnMpLHRoaXMuX3Jvd3M9aSh0aGlzLm9wdGlvbnMucm93cykscj10aGlzLm9wdGlvbnMubWVhc3VyZXN8fFtdLG51bGwhPT10aGlzLm9wdGlvbnMubWVhc3VyZXMmJlwiW29iamVjdCBPYmplY3RdXCI9PT1fdC5jYWxsKHRoaXMub3B0aW9ucy5tZWFzdXJlcykmJihyPXRoaXMub3B0aW9ucy5tZWFzdXJlcy52YWx1ZXN8fFtdLGE9dGhpcy5vcHRpb25zLm1lYXN1cmVzLmF4aXN8fFwiY29sdW1uc1wiKSx0aGlzLl9tZWFzdXJlcz1uKHJ8fFtdKSx0aGlzLl9tZWFzdXJlc0F4aXM9YSx0aGlzLl9heGVzPXt9fSxfY3ViZVNjaGVtYTpmdW5jdGlvbihlKXtyZXR1cm57ZGltZW5zaW9uczpmdW5jdGlvbigpe3ZhciB0LG49W10saT1lLmRpbWVuc2lvbnM7Zm9yKHQgaW4gaSluLnB1c2goe25hbWU6dCxjYXB0aW9uOmlbdF0uY2FwdGlvbnx8dCx1bmlxdWVOYW1lOnQsZGVmYXVsdEhpZXJhcmNoeTp0LHR5cGU6MX0pO3JldHVybiBlLm1lYXN1cmVzJiZuLnB1c2goe25hbWU6XCJNZWFzdXJlc1wiLGNhcHRpb246XCJNZWFzdXJlc1wiLHVuaXF1ZU5hbWU6XCJNZWFzdXJlc1wiLHR5cGU6Mn0pLG59LGhpZXJhcmNoaWVzOmZ1bmN0aW9uKCl7cmV0dXJuW119LG1lYXN1cmVzOmZ1bmN0aW9uKCl7dmFyIHQsbj1bXSxpPWUubWVhc3VyZXM7Zm9yKHQgaW4gaSluLnB1c2goe25hbWU6dCxjYXB0aW9uOnQsdW5pcXVlTmFtZTp0LGFnZ3JlZ2F0b3I6dH0pO3JldHVybiBufX19LG9wdGlvbnM6e3NlcnZlclNvcnRpbmc6ITAsc2VydmVyUGFnaW5nOiEwLHNlcnZlckZpbHRlcmluZzohMCxzZXJ2ZXJHcm91cGluZzohMCxzZXJ2ZXJBZ2dyZWdhdGVzOiEwfSxjYXRhbG9nOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD90aGlzLnRyYW5zcG9ydC5jYXRhbG9nKCk6KHRoaXMudHJhbnNwb3J0LmNhdGFsb2coZSksdGhpcy5fbWVyZ2VTdGF0ZSh7fSksdGhpcy5fYXhlcz17fSx0aGlzLmRhdGEoW10pLHQpfSxjdWJlOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD90aGlzLnRyYW5zcG9ydC5jdWJlKCk6KHRoaXMudHJhbnNwb3J0LmN1YmUoZSksdGhpcy5fYXhlcz17fSx0aGlzLl9tZXJnZVN0YXRlKHt9KSx0aGlzLmRhdGEoW10pLHQpfSxheGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2F4ZXN9LGNvbHVtbnM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10P3RoaXMuX2NvbHVtbnM6KHRoaXMuX2NsZWFyQXhlc0RhdGE9ITAsdGhpcy5fY29sdW1ucz1pKGUpLHRoaXMucXVlcnkoe2NvbHVtbnM6ZSxyb3dzOnRoaXMucm93c0F4aXNEZXNjcmlwdG9ycygpLG1lYXN1cmVzOnRoaXMubWVhc3VyZXMoKX0pLHQpfSxyb3dzOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD90aGlzLl9yb3dzOih0aGlzLl9jbGVhckF4ZXNEYXRhPSEwLHRoaXMuX3Jvd3M9aShlKSx0aGlzLnF1ZXJ5KHtjb2x1bW5zOnRoaXMuY29sdW1uc0F4aXNEZXNjcmlwdG9ycygpLHJvd3M6ZSxtZWFzdXJlczp0aGlzLm1lYXN1cmVzKCl9KSx0KX0sbWVhc3VyZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10P3RoaXMuX21lYXN1cmVzOih0aGlzLl9jbGVhckF4ZXNEYXRhPSEwLHRoaXMucXVlcnkoe2NvbHVtbnM6dGhpcy5jb2x1bW5zQXhpc0Rlc2NyaXB0b3JzKCkscm93czp0aGlzLnJvd3NBeGlzRGVzY3JpcHRvcnMoKSxtZWFzdXJlczpuKGUpfSksdCl9LG1lYXN1cmVzQXhpczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZWFzdXJlc0F4aXN8fFwiY29sdW1uc1wifSxfZXhwYW5kUGF0aDpmdW5jdGlvbihlLHQpe3ZhciBuLHIsbyxhPVwiY29sdW1uc1wiPT09dD9cImNvbHVtbnNcIjpcInJvd3NcIixzPVwiY29sdW1uc1wiPT09dD9cInJvd3NcIjpcImNvbHVtbnNcIixjPWkoZSksZD1PKGNbYy5sZW5ndGgtMV0pO2Zvcih0aGlzLl9sYXN0RXhwYW5kZWQ9YSxjPWwodGhpcy5heGVzKClbYV0sYyx0aGlzLm1lYXN1cmVzKCkpLG49MDtjLmxlbmd0aD5uO24rKylpZihyPU8oY1tuXSkscj09PWQpe2lmKGNbbl0uZXhwYW5kKXJldHVybjtjW25dLmV4cGFuZD0hMH1lbHNlIGNbbl0uZXhwYW5kPSExO289e30sb1thXT1jLG9bc109dGhpcy5fZGVzY3JpcHRvcnNGb3JBeGlzKHMpLHRoaXMuX3F1ZXJ5KG8pfSxfZGVzY3JpcHRvcnNGb3JBeGlzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuYXhlcygpLG49dGhpc1tlXSgpfHxbXTtyZXR1cm4gdCYmdFtlXSYmdFtlXS50dXBsZXMmJnRbZV0udHVwbGVzWzBdJiYobj1vKHRbZV0udHVwbGVzfHxbXSkpLG59LGNvbHVtbnNBeGlzRGVzY3JpcHRvcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVzY3JpcHRvcnNGb3JBeGlzKFwiY29sdW1uc1wiKX0scm93c0F4aXNEZXNjcmlwdG9yczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZXNjcmlwdG9yc0ZvckF4aXMoXCJyb3dzXCIpfSxfcHJvY2VzczpmdW5jdGlvbihlLHQpe3RoaXMuX3ZpZXc9ZSx0PXR8fHt9LHQuaXRlbXM9dC5pdGVtc3x8dGhpcy5fdmlldyx0aGlzLnRyaWdnZXIoeHQsdCl9LF9xdWVyeTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBlfHwodGhpcy5fY2xlYXJBeGVzRGF0YT0hMCksdC5xdWVyeShidCh7fSx7cGFnZTp0LnBhZ2UoKSxwYWdlU2l6ZTp0LnBhZ2VTaXplKCksc29ydDp0LnNvcnQoKSxmaWx0ZXI6dC5maWx0ZXIoKSxncm91cDp0Lmdyb3VwKCksYWdncmVnYXRlOnQuYWdncmVnYXRlKCksY29sdW1uczp0aGlzLmNvbHVtbnNBeGlzRGVzY3JpcHRvcnMoKSxyb3dzOnRoaXMucm93c0F4aXNEZXNjcmlwdG9ycygpLG1lYXN1cmVzOnRoaXMubWVhc3VyZXMoKX0sZSkpfSxxdWVyeTpmdW5jdGlvbih0KXt2YXIgbj10aGlzLl9tZXJnZVN0YXRlKHQpO3JldHVybiB0aGlzLl9kYXRhLmxlbmd0aCYmdGhpcy5jdWJlQnVpbGRlcj8odGhpcy5fcGFyYW1zKG4pLHRoaXMuX3VwZGF0ZUxvY2FsRGF0YSh0aGlzLl9wcmlzdGluZURhdGEpLGUuRGVmZXJyZWQoKS5yZXNvbHZlKCkucHJvbWlzZSgpKTp0aGlzLnJlYWQobil9LF9tZXJnZVN0YXRlOmZ1bmN0aW9uKGUpe3JldHVybiBlPXZ0LmZuLl9tZXJnZVN0YXRlLmNhbGwodGhpcyxlKSxlIT09dCYmKHRoaXMuX21lYXN1cmVzPW4oZS5tZWFzdXJlcyksZS5jb2x1bW5zP2UuY29sdW1ucz1pKGUuY29sdW1ucyk6ZS5jb2x1bW5zfHwodGhpcy5fY29sdW1ucz1bXSksZS5yb3dzP2Uucm93cz1pKGUucm93cyk6ZS5yb3dzfHwodGhpcy5fcm93cz1bXSkpLGV9LGZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gZT09PXQ/dGhpcy5fZmlsdGVyOih0aGlzLl9jbGVhckF4ZXNEYXRhPSEwLHRoaXMuX3F1ZXJ5KHtmaWx0ZXI6ZSxwYWdlOjF9KSx0KX0sZXhwYW5kQ29sdW1uOmZ1bmN0aW9uKGUpe3RoaXMuX2V4cGFuZFBhdGgoZSxcImNvbHVtbnNcIil9LGV4cGFuZFJvdzpmdW5jdGlvbihlKXt0aGlzLl9leHBhbmRQYXRoKGUsXCJyb3dzXCIpfSxzdWNjZXNzOmZ1bmN0aW9uKGUpe3ZhciB0O3RoaXMuY3ViZUJ1aWxkZXImJih0PSh0aGlzLnJlYWRlci5kYXRhKGUpfHxbXSkuc2xpY2UoMCkpLHZ0LmZuLnN1Y2Nlc3MuY2FsbCh0aGlzLGUpLHQmJih0aGlzLl9wcmlzdGluZURhdGE9dCl9LF9wcm9jZXNzUmVzdWx0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYSxzLGwsYyxkLHUsaDtyZXR1cm4gdGhpcy5jdWJlQnVpbGRlciYmKG49dGhpcy5jdWJlQnVpbGRlci5wcm9jZXNzKGUsdGhpcy5fcmVxdWVzdERhdGEpLGU9bi5kYXRhLHQ9bi5heGVzKSxjPXRoaXMuY29sdW1ucygpLmxlbmd0aCxkPXRoaXMucm93cygpLmxlbmd0aCx1PXQuY29sdW1ucyYmdC5jb2x1bW5zLnR1cGxlcyxjfHwhZHx8IXV8fCF0aGlzLl9yb3dNZWFzdXJlcygpLmxlbmd0aCYmdGhpcy5tZWFzdXJlcygpLmxlbmd0aHx8KHQ9e2NvbHVtbnM6e30scm93czp0LmNvbHVtbnN9KSxjfHxkfHxcInJvd3NcIiE9PXRoaXMubWVhc3VyZXNBeGlzKCl8fCF1fHwodD17Y29sdW1uczp7fSxyb3dzOnQuY29sdW1uc30pLHRoaXMuX2F4ZXM9e2NvbHVtbnM6eSh0aGlzLl9heGVzLmNvbHVtbnMpLHJvd3M6eSh0aGlzLl9heGVzLnJvd3MpfSx0PXtjb2x1bW5zOnkodC5jb2x1bW5zKSxyb3dzOnkodC5yb3dzKX0saT10aGlzLl9ub3JtYWxpemVUdXBsZXModC5jb2x1bW5zLnR1cGxlcyx0aGlzLl9heGVzLmNvbHVtbnMudHVwbGVzLHRoaXMuX2NvbHVtbk1lYXN1cmVzKCkpLHI9dGhpcy5fbm9ybWFsaXplVHVwbGVzKHQucm93cy50dXBsZXMsdGhpcy5fYXhlcy5yb3dzLnR1cGxlcyx0aGlzLl9yb3dNZWFzdXJlcygpKSx0aGlzLmN1YmVCdWlsZGVyfHwoZT10aGlzLl9ub3JtYWxpemVEYXRhKHtjb2x1bW5zTGVuZ3RoOnQuY29sdW1ucy50dXBsZXMubGVuZ3RoLHJvd3NMZW5ndGg6dC5yb3dzLnR1cGxlcy5sZW5ndGgsY29sdW1uSW5kZXhlczppLHJvd0luZGV4ZXM6cixkYXRhOmV9KSksXCJyb3dzXCI9PXRoaXMuX2xhc3RFeHBhbmRlZD8obz10LmNvbHVtbnMudHVwbGVzLHM9dGhpcy5fY29sdW1uTWVhc3VyZXMoKSxhPWYodC5jb2x1bW5zLHRoaXMuX2F4ZXMuY29sdW1ucyxzKSxhJiYobD1cImNvbHVtbnNcIix0LmNvbHVtbnM9YSxnKG8sYS50dXBsZXMsdC5yb3dzLnR1cGxlcy5sZW5ndGgscyxlKSxlPXRoaXMuX25vcm1hbGl6ZURhdGEoe2NvbHVtbnNMZW5ndGg6Xyh0LmNvbHVtbnMudHVwbGVzLHMpLHJvd3NMZW5ndGg6dC5yb3dzLnR1cGxlcy5sZW5ndGgsZGF0YTplfSkpKTpcImNvbHVtbnNcIj09dGhpcy5fbGFzdEV4cGFuZGVkJiYobz10LnJvd3MudHVwbGVzLHM9dGhpcy5fcm93TWVhc3VyZXMoKSxhPWYodC5yb3dzLHRoaXMuX2F4ZXMucm93cyxzKSxhJiYobD1cInJvd3NcIix0LnJvd3M9YSxtKG8sYS50dXBsZXMsdC5jb2x1bW5zLnR1cGxlcy5sZW5ndGgscyxlKSxlPXRoaXMuX25vcm1hbGl6ZURhdGEoe2NvbHVtbnNMZW5ndGg6Xyh0LnJvd3MudHVwbGVzLHMpLHJvd3NMZW5ndGg6dC5jb2x1bW5zLnR1cGxlcy5sZW5ndGgsZGF0YTplfSkpKSx0aGlzLl9sYXN0RXhwYW5kZWQ9bnVsbCxoPXRoaXMuX21lcmdlQXhlcyh0LGUsbCksdGhpcy5fYXhlcz1oLmF4ZXMsaC5kYXRhfSxfcmVhZERhdGE6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5yZWFkZXIuYXhlcyhlKSxuPXRoaXMucmVhZGVyLmRhdGEoZSk7cmV0dXJuIHRoaXMuX3Byb2Nlc3NSZXN1bHQobix0KX0sX2NyZWF0ZVR1cGxlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sYSxzLGw9ZS5tZW1iZXJzLGM9bC5sZW5ndGgsZD17bWVtYmVyczpbXX0sdT0wO2Zvcih0JiYoYy09MSk7Yz51O3UrKylyPWxbdV0sYT0rci5sZXZlbE51bSxpPXIubmFtZSxvPXIucGFyZW50TmFtZSxzPXIuY2FwdGlvbnx8aSxuJiYocz1cIkFsbFwiLDA9PT1hP289ci5uYW1lOmEtPTEsaT1vKSxkLm1lbWJlcnMucHVzaCh7bmFtZTppLGNoaWxkcmVuOltdLGNhcHRpb246cyxsZXZlbE5hbWU6byxsZXZlbE51bTpcIlwiK2EsaGFzQ2hpbGRyZW46bixoaWVyYXJjaHk6byxwYXJlbnROYW1lOm4/XCJcIjpvfSk7cmV0dXJuIHQmJmQubWVtYmVycy5wdXNoKHtuYW1lOnQubmFtZSxjaGlsZHJlbjpbXX0pLGR9LF9oYXNSb290OmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYSxzO2lmKHQubGVuZ3RoKXJldHVybiB4KHQsZSkudHVwbGU7Zm9yKG49ZS5tZW1iZXJzLHI9ITAsYT0wLHM9bi5sZW5ndGg7cz5hO2ErKylpZihpPW5bYV0sbz0raS5sZXZlbE51bXx8MCwwIT09byl7cj0hMTticmVha31yZXR1cm4gcn0sX21lcmdlQXhlczpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGEscyxsPXRoaXMuX2NvbHVtbk1lYXN1cmVzKCksYz10aGlzLl9yb3dNZWFzdXJlcygpLGQ9dGhpcy5heGVzKCksdT1lLnJvd3MudHVwbGVzLmxlbmd0aCxoPV8oZC5jb2x1bW5zLnR1cGxlcyxsKSxwPWUuY29sdW1ucy50dXBsZXMubGVuZ3RoO3JldHVyblwiY29sdW1uc1wiPT1uPyhwPWgscj1lLmNvbHVtbnMudHVwbGVzKToocj1BKGUuY29sdW1ucy50dXBsZXMsbCksdD1NKHIsdCkpLG89YihkLmNvbHVtbnMudHVwbGVzLHIsbCksXCJyb3dzXCI9PW4/KHU9XyhlLnJvd3MudHVwbGVzLGMpLHI9ZS5yb3dzLnR1cGxlcyk6KHI9QShlLnJvd3MudHVwbGVzLGMpLHQ9RShyLHQpKSxhPWIoZC5yb3dzLnR1cGxlcyxyLGMpLGQuY29sdW1ucy50dXBsZXM9by50dXBsZXMsZC5yb3dzLnR1cGxlcz1hLnR1cGxlcyxoIT09XyhkLmNvbHVtbnMudHVwbGVzLGwpPyhpPW8uaW5kZXgrdyhvLnBhcnNlZFJvb3Qsby5tZW1iZXJJbmRleCxsKSxzPWgrcCx0PXRoaXMuX21lcmdlQ29sdW1uRGF0YSh0LGksdSxwLHMpKTooaT1hLmluZGV4K3coYS5wYXJzZWRSb290LGEubWVtYmVySW5kZXgsYyksdD10aGlzLl9tZXJnZVJvd0RhdGEodCxpLHUscCkpLHtheGVzOmQsZGF0YTp0fX0sX21lcmdlQ29sdW1uRGF0YTpmdW5jdGlvbihlLHQsbixpLHIpe3ZhciBvLGEscyxsPXRoaXMuZGF0YSgpLnRvSlNPTigpLGM9MCxkPU1hdGgubWF4KHRoaXMuX2NvbHVtbk1lYXN1cmVzKCkubGVuZ3RoLDEpO2ZvcihuPU1hdGgubWF4KG4sMSksbC5sZW5ndGg+MCYmKGM9ZCxyLT1kKSxvPTA7bj5vO28rKylhPXQrbypyLHM9ZS5zcGxpY2UoMCxpKSxzLnNwbGljZSgwLGMpLFtdLnNwbGljZS5hcHBseShsLFthLDBdLmNvbmNhdChzKSk7cmV0dXJuIGx9LF9tZXJnZVJvd0RhdGE6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbyxhLHM9dGhpcy5kYXRhKCkudG9KU09OKCksbD1NYXRoLm1heCh0aGlzLl9yb3dNZWFzdXJlcygpLmxlbmd0aCwxKTtmb3IoaT1NYXRoLm1heChpLDEpLHMubGVuZ3RoPjAmJihuLT1sLGUuc3BsaWNlKDAsaSpsKSkscj0wO24+cjtyKyspYT1lLnNwbGljZSgwLGkpLG89dCppK3IqaSxbXS5zcGxpY2UuYXBwbHkocyxbbywwXS5jb25jYXQoYSkpO3JldHVybiBzfSxfY29sdW1uTWVhc3VyZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1lYXN1cmVzKCksdD1bXTtyZXR1cm5cImNvbHVtbnNcIj09PXRoaXMubWVhc3VyZXNBeGlzKCkmJigwPT09dGhpcy5jb2x1bW5zKCkubGVuZ3RoP3Q9ZTplLmxlbmd0aD4xJiYodD1lKSksdH0sX3Jvd01lYXN1cmVzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5tZWFzdXJlcygpLHQ9W107cmV0dXJuXCJyb3dzXCI9PT10aGlzLm1lYXN1cmVzQXhpcygpJiYoMD09PXRoaXMucm93cygpLmxlbmd0aD90PWU6ZS5sZW5ndGg+MSYmKHQ9ZSkpLHR9LF91cGRhdGVMb2NhbERhdGE6ZnVuY3Rpb24oZSx0KXt0aGlzLmN1YmVCdWlsZGVyJiYodCYmKHRoaXMuX3JlcXVlc3REYXRhPXQpLGU9dGhpcy5fcHJvY2Vzc1Jlc3VsdChlKSksdGhpcy5fZGF0YT10aGlzLl9vYnNlcnZlKGUpLHRoaXMuX3Jhbmdlcz1bXSx0aGlzLl9hZGRSYW5nZSh0aGlzLl9kYXRhKSx0aGlzLl90b3RhbD10aGlzLl9kYXRhLmxlbmd0aCx0aGlzLl9wcmlzdGluZVRvdGFsPXRoaXMuX3RvdGFsLHRoaXMuX3Byb2Nlc3ModGhpcy5fZGF0YSl9LGRhdGE6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztyZXR1cm4gZT09PXQ/bi5fZGF0YToodGhpcy5fcHJpc3RpbmVEYXRhPWUuc2xpY2UoMCksdGhpcy5fdXBkYXRlTG9jYWxEYXRhKGUse2NvbHVtbnM6dGhpcy5jb2x1bW5zKCkscm93czp0aGlzLnJvd3MoKSxtZWFzdXJlczp0aGlzLm1lYXN1cmVzKCl9KSx0KX0sX25vcm1hbGl6ZVR1cGxlczpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGE9bi5sZW5ndGh8fDEscz0wLGw9W10sYz17fSxkPTA7aWYoZS5sZW5ndGgpe2lmKCF0aGlzLl9oYXNSb290KGVbMF0sdCkpe2Zvcig7YT5zO3MrKylsLnB1c2godGhpcy5fY3JlYXRlVHVwbGUoZVswXSxuW3NdLCEwKSksY1tzXT1zO2Uuc3BsaWNlLmFwcGx5KGUsWzAsZS5sZW5ndGhdLmNvbmNhdChsKS5jb25jYXQoZSkpLHM9YX1pZihuLmxlbmd0aClmb3Iobz1pPWVbc10scj1pLm1lbWJlcnMubGVuZ3RoLTE7aTspe2lmKGQ+PWEmJihkPTApLGkubWVtYmVyc1tyXS5uYW1lIT09bltkXS5uYW1lJiYoZS5zcGxpY2UocywwLHRoaXMuX2NyZWF0ZVR1cGxlKGksbltkXSkpLGNbc109cykscys9MSxkKz0xLGk9ZVtzXSxhPmQmJighaXx8Y3QobyxyLTEpIT09Y3QoaSxyLTEpKSl7Zm9yKDthPmQ7ZCsrKWUuc3BsaWNlKHMsMCx0aGlzLl9jcmVhdGVUdXBsZShvLG5bZF0pKSxjW3NdPXMscys9MTtpPWVbc119bz1pfXJldHVybiBjfX0sX25vcm1hbGl6ZURhdGE6ZnVuY3Rpb24oZSl7dmFyIG4saSxyPWUuZGF0YSxvPWUuY29sdW1uSW5kZXhlc3x8e30sYT1lLnJvd0luZGV4ZXN8fHt9LHM9ZS5jb2x1bW5zTGVuZ3RofHwxLGw9cyooZS5yb3dzTGVuZ3RofHwxKSxjPTAsZD0wLHU9MCxoPUFycmF5KGwpO2lmKHIubGVuZ3RoPT09bClyZXR1cm4gcjtmb3IoO2w+YztjKyspe2lmKGFbcGFyc2VJbnQoYy9zLDEwKV0hPT10KWZvcihpPTA7cz5pO2krKyloW2NdPXt2YWx1ZTpcIlwiLGZtdFZhbHVlOlwiXCIsb3JkaW5hbDpjfSxjKz0xO2lmKG9bYyVzXSE9PXQmJihoW2NdPXt2YWx1ZTpcIlwiLGZtdFZhbHVlOlwiXCIsb3JkaW5hbDpjfSxjKz0xKSxuPXJbZF0pe2lmKG4ub3JkaW5hbC11PjEpZm9yKHUrPTE7bi5vcmRpbmFsPnU7dSsrKWhbY109e3ZhbHVlOlwiXCIsZm10VmFsdWU6XCJcIixvcmRpbmFsOmN9LGMrPTE7dT1uLm9yZGluYWwsbi5vcmRpbmFsPWMsaFtjXT1uLGQrPTF9ZWxzZSBoW2NdPXt2YWx1ZTpcIlwiLGZtdFZhbHVlOlwiXCIsb3JkaW5hbDpjfX1yZXR1cm4gaH0sZGlzY292ZXI6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzLHI9aS50cmFuc3BvcnQ7cmV0dXJuIGUuRGVmZXJyZWQoZnVuY3Rpb24oZSl7ci5kaXNjb3ZlcihidCh7c3VjY2VzczpmdW5jdGlvbih0KXt0PWkucmVhZGVyLnBhcnNlKHQpLGkuX2hhbmRsZUN1c3RvbUVycm9ycyh0KXx8KG4mJih0PW4odCkpLGUucmVzb2x2ZSh0KSl9LGVycm9yOmZ1bmN0aW9uKHQsbixyKXtlLnJlamVjdCh0KSxpLmVycm9yKHQsbixyKX19LHQpKX0pLnByb21pc2UoKS5kb25lKGZ1bmN0aW9uKCl7aS50cmlnZ2VyKFwic2NoZW1hQ2hhbmdlXCIpfSl9LHNjaGVtYU1lYXN1cmVzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gZS5kaXNjb3Zlcih7ZGF0YTp7Y29tbWFuZDpcInNjaGVtYU1lYXN1cmVzXCIscmVzdHJpY3Rpb25zOntjYXRhbG9nTmFtZTplLnRyYW5zcG9ydC5jYXRhbG9nKCksY3ViZU5hbWU6ZS50cmFuc3BvcnQuY3ViZSgpfX19LGZ1bmN0aW9uKHQpe3JldHVybiBlLnJlYWRlci5tZWFzdXJlcyh0KX0pfSxzY2hlbWFLUElzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gZS5kaXNjb3Zlcih7ZGF0YTp7Y29tbWFuZDpcInNjaGVtYUtQSXNcIixyZXN0cmljdGlvbnM6e2NhdGFsb2dOYW1lOmUudHJhbnNwb3J0LmNhdGFsb2coKSxjdWJlTmFtZTplLnRyYW5zcG9ydC5jdWJlKCl9fX0sZnVuY3Rpb24odCl7cmV0dXJuIGUucmVhZGVyLmtwaXModCl9KX0sc2NoZW1hRGltZW5zaW9uczpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIGUuZGlzY292ZXIoe2RhdGE6e2NvbW1hbmQ6XCJzY2hlbWFEaW1lbnNpb25zXCIscmVzdHJpY3Rpb25zOntjYXRhbG9nTmFtZTplLnRyYW5zcG9ydC5jYXRhbG9nKCksY3ViZU5hbWU6ZS50cmFuc3BvcnQuY3ViZSgpfX19LGZ1bmN0aW9uKHQpe3JldHVybiBlLnJlYWRlci5kaW1lbnNpb25zKHQpfSl9LHNjaGVtYUhpZXJhcmNoaWVzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIHQuZGlzY292ZXIoe2RhdGE6e2NvbW1hbmQ6XCJzY2hlbWFIaWVyYXJjaGllc1wiLHJlc3RyaWN0aW9uczp7Y2F0YWxvZ05hbWU6dC50cmFuc3BvcnQuY2F0YWxvZygpLGN1YmVOYW1lOnQudHJhbnNwb3J0LmN1YmUoKSxkaW1lbnNpb25VbmlxdWVOYW1lOmV9fX0sZnVuY3Rpb24oZSl7cmV0dXJuIHQucmVhZGVyLmhpZXJhcmNoaWVzKGUpfSl9LHNjaGVtYUxldmVsczpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0LmRpc2NvdmVyKHtkYXRhOntjb21tYW5kOlwic2NoZW1hTGV2ZWxzXCIscmVzdHJpY3Rpb25zOntjYXRhbG9nTmFtZTp0LnRyYW5zcG9ydC5jYXRhbG9nKCksY3ViZU5hbWU6dC50cmFuc3BvcnQuY3ViZSgpLGhpZXJhcmNoeVVuaXF1ZU5hbWU6ZX19fSxmdW5jdGlvbihlKXtyZXR1cm4gdC5yZWFkZXIubGV2ZWxzKGUpfSl9LHNjaGVtYUN1YmVzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gZS5kaXNjb3Zlcih7ZGF0YTp7Y29tbWFuZDpcInNjaGVtYUN1YmVzXCIscmVzdHJpY3Rpb25zOntjYXRhbG9nTmFtZTplLnRyYW5zcG9ydC5jYXRhbG9nKCl9fX0sZnVuY3Rpb24odCl7cmV0dXJuIGUucmVhZGVyLmN1YmVzKHQpfSl9LHNjaGVtYUNhdGFsb2dzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gZS5kaXNjb3Zlcih7ZGF0YTp7Y29tbWFuZDpcInNjaGVtYUNhdGFsb2dzXCJ9fSxmdW5jdGlvbih0KXtyZXR1cm4gZS5yZWFkZXIuY2F0YWxvZ3ModCl9KX0sc2NoZW1hTWVtYmVyczpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0LmRpc2NvdmVyKHtkYXRhOntjb21tYW5kOlwic2NoZW1hTWVtYmVyc1wiLHJlc3RyaWN0aW9uczpidCh7Y2F0YWxvZ05hbWU6dC50cmFuc3BvcnQuY2F0YWxvZygpLGN1YmVOYW1lOnQudHJhbnNwb3J0LmN1YmUoKX0sZSl9fSxmdW5jdGlvbihlKXtyZXR1cm4gdC5yZWFkZXIubWVtYmVycyhlKX0pfSxfcGFyYW1zOmZ1bmN0aW9uKGUpe3RoaXMuX2NsZWFyQXhlc0RhdGEmJih0aGlzLl9heGVzPXt9LHRoaXMuX2RhdGE9dGhpcy5fb2JzZXJ2ZShbXSksdGhpcy5fY2xlYXJBeGVzRGF0YT0hMSx0aGlzLnRyaWdnZXIoVHQpKTt2YXIgdD12dC5mbi5fcGFyYW1zLmNhbGwodGhpcyxlKTtyZXR1cm4gdD1idCh7bWVhc3VyZXM6dGhpcy5tZWFzdXJlcygpLG1lYXN1cmVzQXhpczp0aGlzLm1lYXN1cmVzQXhpcygpLGNvbHVtbnM6dGhpcy5jb2x1bW5zKCkscm93czp0aGlzLnJvd3MoKX0sdCksdGhpcy5jdWJlQnVpbGRlciYmKHRoaXMuX3JlcXVlc3REYXRhPXQpLHR9fSk7R3QuY3JlYXRlPWZ1bmN0aW9uKGUpe2U9ZSYmZS5wdXNoP3tkYXRhOmV9OmU7dmFyIHQ9ZXx8e30sbj10LmRhdGE7aWYodC5kYXRhPW4sISh0IGluc3RhbmNlb2YgR3QpJiZ0IGluc3RhbmNlb2YgcHQuZGF0YS5EYXRhU291cmNlKXRocm93IEVycm9yKFwiSW5jb3JyZWN0IERhdGFTb3VyY2UgdHlwZS4gT25seSBQaXZvdERhdGFTb3VyY2UgaW5zdGFuY2VzIGFyZSBzdXBwb3J0ZWRcIik7cmV0dXJuIHQgaW5zdGFuY2VvZiBHdD90Om5ldyBHdCh0KX0sWT17Y29udGFpbnM6JywgSW5TdHIoezB9LkN1cnJlbnRNZW1iZXIuTUVNQkVSX0NBUFRJT04sXCJ7MX1cIikgPiAwJyxkb2Vzbm90Y29udGFpbjonLCBJblN0cih7MH0uQ3VycmVudE1lbWJlci5NRU1CRVJfQ0FQVElPTixcInsxfVwiKSA9IDAnLHN0YXJ0c3dpdGg6JywgTGVmdCh7MH0uQ3VycmVudE1lbWJlci5NRU1CRVJfQ0FQVElPTixMZW4oXCJ7MX1cIikpPVwiezF9XCInLGVuZHN3aXRoOicsIFJpZ2h0KHswfS5DdXJyZW50TWVtYmVyLk1FTUJFUl9DQVBUSU9OLExlbihcInsxfVwiKSk9XCJ7MX1cIicsZXE6JywgezB9LkN1cnJlbnRNZW1iZXIuTUVNQkVSX0NBUFRJT04gPSBcInsxfVwiJyxuZXE6JywgTk9UIHswfS5DdXJyZW50TWVtYmVyLk1FTUJFUl9DQVBUSU9OID0gXCJ7MX1cIid9LEs9e3NjaGVtYUN1YmVzOlwiTURTQ0hFTUFfQ1VCRVNcIixzY2hlbWFDYXRhbG9nczpcIkRCU0NIRU1BX0NBVEFMT0dTXCIsc2NoZW1hTWVhc3VyZXM6XCJNRFNDSEVNQV9NRUFTVVJFU1wiLHNjaGVtYURpbWVuc2lvbnM6XCJNRFNDSEVNQV9ESU1FTlNJT05TXCIsc2NoZW1hSGllcmFyY2hpZXM6XCJNRFNDSEVNQV9ISUVSQVJDSElFU1wiLHNjaGVtYUxldmVsczpcIk1EU0NIRU1BX0xFVkVMU1wiLHNjaGVtYU1lbWJlcnM6XCJNRFNDSEVNQV9NRU1CRVJTXCIsc2NoZW1hS1BJczpcIk1EU0NIRU1BX0tQSVNcIn0sUT17cmVhZDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGE9JzxFbnZlbG9wZSB4bWxucz1cImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3NvYXAvZW52ZWxvcGUvXCI+PEhlYWRlci8+PEJvZHk+PEV4ZWN1dGUgeG1sbnM9XCJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOnhtbC1hbmFseXNpc1wiPjxDb21tYW5kPjxTdGF0ZW1lbnQ+JztyZXR1cm4gYSs9XCJTRUxFQ1QgTk9OIEVNUFRZIHtcIix0PWUuY29sdW1uc3x8W10sbj1lLnJvd3N8fFtdLGk9ZS5tZWFzdXJlc3x8W10scj1cInJvd3NcIj09PWUubWVhc3VyZXNBeGlzLG89ZS5zb3J0fHxbXSwhdC5sZW5ndGgmJm4ubGVuZ3RoJiYoIWkubGVuZ3RofHxpLmxlbmd0aCYmcikmJih0PW4sbj1bXSxyPSExKSx0Lmxlbmd0aHx8bi5sZW5ndGh8fChyPSExKSx0Lmxlbmd0aD9hKz1VKHQscj9bXTppLG8pOmkubGVuZ3RoJiYhciYmKGErPUwoaSkuam9pbihcIixcIikpLGErPVwifSBESU1FTlNJT04gUFJPUEVSVElFUyBDSElMRFJFTl9DQVJESU5BTElUWSwgUEFSRU5UX1VOSVFVRV9OQU1FIE9OIENPTFVNTlNcIiwobi5sZW5ndGh8fHImJmkubGVuZ3RoPjEpJiYoYSs9XCIsIE5PTiBFTVBUWSB7XCIsYSs9bi5sZW5ndGg/VShuLHI/aTpbXSxvKTpMKGkpLmpvaW4oXCIsXCIpLGErPVwifSBESU1FTlNJT04gUFJPUEVSVElFUyBDSElMRFJFTl9DQVJESU5BTElUWSwgUEFSRU5UX1VOSVFVRV9OQU1FIE9OIFJPV1NcIiksZS5maWx0ZXI/KGErPVwiIEZST00gXCIsYSs9XCIoXCIsYSs9aihlLmZpbHRlcixlLmNvbm5lY3Rpb24uY3ViZSksYSs9XCIpXCIpOmErPVwiIEZST00gW1wiK2UuY29ubmVjdGlvbi5jdWJlK1wiXVwiLDE9PWkubGVuZ3RoJiZ0Lmxlbmd0aCYmKGErPVwiIFdIRVJFIChcIitMKGkpLmpvaW4oXCIsXCIpK1wiKVwiKSxhKz1cIjwvU3RhdGVtZW50PjwvQ29tbWFuZD48UHJvcGVydGllcz48UHJvcGVydHlMaXN0PjxDYXRhbG9nPlwiK2UuY29ubmVjdGlvbi5jYXRhbG9nK1wiPC9DYXRhbG9nPjxGb3JtYXQ+TXVsdGlkaW1lbnNpb25hbDwvRm9ybWF0PjwvUHJvcGVydHlMaXN0PjwvUHJvcGVydGllcz48L0V4ZWN1dGU+PC9Cb2R5PjwvRW52ZWxvcGU+XCIsYS5yZXBsYWNlKC9cXCYvZyxcIiZhbXA7XCIpfSxkaXNjb3ZlcjpmdW5jdGlvbih0KXt0PXR8fHt9O3ZhciBuPSc8RW52ZWxvcGUgeG1sbnM9XCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy9zb2FwL2VudmVsb3BlL1wiPjxIZWFkZXIvPjxCb2R5PjxEaXNjb3ZlciB4bWxucz1cInVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206eG1sLWFuYWx5c2lzXCI+JztyZXR1cm4gbis9XCI8UmVxdWVzdFR5cGU+XCIrKEtbdC5jb21tYW5kXXx8dC5jb21tYW5kKStcIjwvUmVxdWVzdFR5cGU+XCIsbis9XCI8UmVzdHJpY3Rpb25zPlwiK0coXCJSZXN0cmljdGlvbkxpc3RcIix0LnJlc3RyaWN0aW9ucywhMCkrXCI8L1Jlc3RyaWN0aW9ucz5cIix0LmNvbm5lY3Rpb24mJnQuY29ubmVjdGlvbi5jYXRhbG9nJiYodC5wcm9wZXJ0aWVzPWUuZXh0ZW5kKHt9LHtDYXRhbG9nOnQuY29ubmVjdGlvbi5jYXRhbG9nfSx0LnByb3BlcnRpZXMpKSxuKz1cIjxQcm9wZXJ0aWVzPlwiK0coXCJQcm9wZXJ0eUxpc3RcIix0LnByb3BlcnRpZXMpK1wiPC9Qcm9wZXJ0aWVzPlwiLG4rPVwiPC9EaXNjb3Zlcj48L0JvZHk+PC9FbnZlbG9wZT5cIn19LFg9cHQuZGF0YS5SZW1vdGVUcmFuc3BvcnQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0PWU7ZT10aGlzLm9wdGlvbnM9YnQoITAse30sdGhpcy5vcHRpb25zLGUpLHB0LmRhdGEuUmVtb3RlVHJhbnNwb3J0LmNhbGwodGhpcyxlKSxrdCh0LmRpc2NvdmVyKT90aGlzLmRpc2NvdmVyPXQuZGlzY292ZXI6XCJzdHJpbmdcIj09dHlwZW9mIHQuZGlzY292ZXI/dGhpcy5vcHRpb25zLmRpc2NvdmVyPXt1cmw6dC5kaXNjb3Zlcn06dC5kaXNjb3Zlcnx8KHRoaXMub3B0aW9ucy5kaXNjb3Zlcj10aGlzLm9wdGlvbnMucmVhZCl9LHNldHVwOmZ1bmN0aW9uKHQsbil7cmV0dXJuIHQuZGF0YT10LmRhdGF8fHt9LGUuZXh0ZW5kKCEwLHQuZGF0YSx7Y29ubmVjdGlvbjp0aGlzLm9wdGlvbnMuY29ubmVjdGlvbn0pLHB0LmRhdGEuUmVtb3RlVHJhbnNwb3J0LmZuLnNldHVwLmNhbGwodGhpcyx0LG4pfSxvcHRpb25zOntyZWFkOntkYXRhVHlwZTpcInRleHRcIixjb250ZW50VHlwZTpcInRleHQveG1sXCIsdHlwZTpcIlBPU1RcIn0sZGlzY292ZXI6e2RhdGFUeXBlOlwidGV4dFwiLGNvbnRlbnRUeXBlOlwidGV4dC94bWxcIix0eXBlOlwiUE9TVFwifSxwYXJhbWV0ZXJNYXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gUVt0XShlLHQpfX0sZGlzY292ZXI6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYWpheCh0aGlzLnNldHVwKHQsXCJkaXNjb3ZlclwiKSl9fSksSj17Y3ViZXM6e25hbWU6cHQuZ2V0dGVyKFwiQ1VCRV9OQU1FWycjdGV4dCddXCIsITApLGNhcHRpb246cHQuZ2V0dGVyKFwiQ1VCRV9DQVBUSU9OWycjdGV4dCddXCIsITApLGRlc2NyaXB0aW9uOnB0LmdldHRlcihcIkRFU0NSSVBUSU9OWycjdGV4dCddXCIsITApLHR5cGU6cHQuZ2V0dGVyKFwiQ1VCRV9UWVBFWycjdGV4dCddXCIsITApfSxjYXRhbG9nczp7bmFtZTpwdC5nZXR0ZXIoXCJDQVRBTE9HX05BTUVbJyN0ZXh0J11cIiwhMCksZGVzY3JpcHRpb246cHQuZ2V0dGVyKFwiREVTQ1JJUFRJT05bJyN0ZXh0J11cIiwhMCl9LG1lYXN1cmVzOntuYW1lOnB0LmdldHRlcihcIk1FQVNVUkVfTkFNRVsnI3RleHQnXVwiLCEwKSxjYXB0aW9uOnB0LmdldHRlcihcIk1FQVNVUkVfQ0FQVElPTlsnI3RleHQnXVwiLCEwKSx1bmlxdWVOYW1lOnB0LmdldHRlcihcIk1FQVNVUkVfVU5JUVVFX05BTUVbJyN0ZXh0J11cIiwhMCksZGVzY3JpcHRpb246cHQuZ2V0dGVyKFwiREVTQ1JJUFRJT05bJyN0ZXh0J11cIiwhMCksYWdncmVnYXRvcjpwdC5nZXR0ZXIoXCJNRUFTVVJFX0FHR1JFR0FUT1JbJyN0ZXh0J11cIiwhMCksZ3JvdXBOYW1lOnB0LmdldHRlcihcIk1FQVNVUkVHUk9VUF9OQU1FWycjdGV4dCddXCIsITApLGRpc3BsYXlGb2xkZXI6cHQuZ2V0dGVyKFwiTUVBU1VSRV9ESVNQTEFZX0ZPTERFUlsnI3RleHQnXVwiLCEwKSxkZWZhdWx0Rm9ybWF0OnB0LmdldHRlcihcIkRFRkFVTFRfRk9STUFUX1NUUklOR1snI3RleHQnXVwiLCEwKX0sa3Bpczp7bmFtZTpwdC5nZXR0ZXIoXCJLUElfTkFNRVsnI3RleHQnXVwiLCEwKSxjYXB0aW9uOnB0LmdldHRlcihcIktQSV9DQVBUSU9OWycjdGV4dCddXCIsITApLHZhbHVlOnB0LmdldHRlcihcIktQSV9WQUxVRVsnI3RleHQnXVwiLCEwKSxnb2FsOnB0LmdldHRlcihcIktQSV9HT0FMWycjdGV4dCddXCIsITApLHN0YXR1czpwdC5nZXR0ZXIoXCJLUElfU1RBVFVTWycjdGV4dCddXCIsITApLHRyZW5kOnB0LmdldHRlcihcIktQSV9UUkVORFsnI3RleHQnXVwiLCEwKSxzdGF0dXNHcmFwaGljOnB0LmdldHRlcihcIktQSV9TVEFUVVNfR1JBUEhJQ1snI3RleHQnXVwiLCEwKSx0cmVuZEdyYXBoaWM6cHQuZ2V0dGVyKFwiS1BJX1RSRU5EX0dSQVBISUNbJyN0ZXh0J11cIiwhMCksZGVzY3JpcHRpb246cHQuZ2V0dGVyKFwiS1BJX0RFU0NSSVBUSU9OWycjdGV4dCddXCIsITApLGdyb3VwTmFtZTpwdC5nZXR0ZXIoXCJNRUFTVVJFR1JPVVBfTkFNRVsnI3RleHQnXVwiLCEwKX0sZGltZW5zaW9uczp7bmFtZTpwdC5nZXR0ZXIoXCJESU1FTlNJT05fTkFNRVsnI3RleHQnXVwiLCEwKSxjYXB0aW9uOnB0LmdldHRlcihcIkRJTUVOU0lPTl9DQVBUSU9OWycjdGV4dCddXCIsITApLGRlc2NyaXB0aW9uOnB0LmdldHRlcihcIkRFU0NSSVBUSU9OWycjdGV4dCddXCIsITApLHVuaXF1ZU5hbWU6cHQuZ2V0dGVyKFwiRElNRU5TSU9OX1VOSVFVRV9OQU1FWycjdGV4dCddXCIsITApLGRlZmF1bHRIaWVyYXJjaHk6cHQuZ2V0dGVyKFwiREVGQVVMVF9ISUVSQVJDSFlbJyN0ZXh0J11cIiwhMCksdHlwZTpwdC5nZXR0ZXIoXCJESU1FTlNJT05fVFlQRVsnI3RleHQnXVwiLCEwKX0saGllcmFyY2hpZXM6e25hbWU6cHQuZ2V0dGVyKFwiSElFUkFSQ0hZX05BTUVbJyN0ZXh0J11cIiwhMCksY2FwdGlvbjpwdC5nZXR0ZXIoXCJISUVSQVJDSFlfQ0FQVElPTlsnI3RleHQnXVwiLCEwKSxkZXNjcmlwdGlvbjpwdC5nZXR0ZXIoXCJERVNDUklQVElPTlsnI3RleHQnXVwiLCEwKSx1bmlxdWVOYW1lOnB0LmdldHRlcihcIkhJRVJBUkNIWV9VTklRVUVfTkFNRVsnI3RleHQnXVwiLCEwKSxkaW1lbnNpb25VbmlxdWVOYW1lOnB0LmdldHRlcihcIkRJTUVOU0lPTl9VTklRVUVfTkFNRVsnI3RleHQnXVwiLCEwKSxkaXNwbGF5Rm9sZGVyOnB0LmdldHRlcihcIkhJRVJBUkNIWV9ESVNQTEFZX0ZPTERFUlsnI3RleHQnXVwiLCEwKSxvcmlnaW46cHQuZ2V0dGVyKFwiSElFUkFSQ0hZX09SSUdJTlsnI3RleHQnXVwiLCEwKSxkZWZhdWx0TWVtYmVyOnB0LmdldHRlcihcIkRFRkFVTFRfTUVNQkVSWycjdGV4dCddXCIsITApfSxsZXZlbHM6e25hbWU6cHQuZ2V0dGVyKFwiTEVWRUxfTkFNRVsnI3RleHQnXVwiLCEwKSxjYXB0aW9uOnB0LmdldHRlcihcIkxFVkVMX0NBUFRJT05bJyN0ZXh0J11cIiwhMCksZGVzY3JpcHRpb246cHQuZ2V0dGVyKFwiREVTQ1JJUFRJT05bJyN0ZXh0J11cIiwhMCksdW5pcXVlTmFtZTpwdC5nZXR0ZXIoXCJMRVZFTF9VTklRVUVfTkFNRVsnI3RleHQnXVwiLCEwKSxkaW1lbnNpb25VbmlxdWVOYW1lOnB0LmdldHRlcihcIkRJTUVOU0lPTl9VTklRVUVfTkFNRVsnI3RleHQnXVwiLCEwKSxkaXNwbGF5Rm9sZGVyOnB0LmdldHRlcihcIkxFVkVMX0RJU1BMQVlfRk9MREVSWycjdGV4dCddXCIsITApLG9yZGVyaW5nUHJvcGVydHk6cHQuZ2V0dGVyKFwiTEVWRUxfT1JERVJJTkdfUFJPUEVSVFlbJyN0ZXh0J11cIiwhMCksb3JpZ2luOnB0LmdldHRlcihcIkxFVkVMX09SSUdJTlsnI3RleHQnXVwiLCEwKSxoaWVyYXJjaHlVbmlxdWVOYW1lOnB0LmdldHRlcihcIkhJRVJBUkNIWV9VTklRVUVfTkFNRVsnI3RleHQnXVwiLCEwKX0sbWVtYmVyczp7bmFtZTpwdC5nZXR0ZXIoXCJNRU1CRVJfTkFNRVsnI3RleHQnXVwiLCEwKSxjYXB0aW9uOnB0LmdldHRlcihcIk1FTUJFUl9DQVBUSU9OWycjdGV4dCddXCIsITApLHVuaXF1ZU5hbWU6cHQuZ2V0dGVyKFwiTUVNQkVSX1VOSVFVRV9OQU1FWycjdGV4dCddXCIsITApLGRpbWVuc2lvblVuaXF1ZU5hbWU6cHQuZ2V0dGVyKFwiRElNRU5TSU9OX1VOSVFVRV9OQU1FWycjdGV4dCddXCIsITApLGhpZXJhcmNoeVVuaXF1ZU5hbWU6cHQuZ2V0dGVyKFwiSElFUkFSQ0hZX1VOSVFVRV9OQU1FWycjdGV4dCddXCIsITApLGxldmVsVW5pcXVlTmFtZTpwdC5nZXR0ZXIoXCJMRVZFTF9VTklRVUVfTkFNRVsnI3RleHQnXVwiLCEwKSxjaGlsZHJlbkNhcmRpbmFsaXR5OnB0LmdldHRlcihcIkNISUxEUkVOX0NBUkRJTkFMSVRZWycjdGV4dCddXCIsITApfX0sWj1bXCJheGVzXCIsXCJjYXRhbG9nc1wiLFwiY3ViZXNcIixcImRpbWVuc2lvbnNcIixcImhpZXJhcmNoaWVzXCIsXCJsZXZlbHNcIixcIm1lYXN1cmVzXCJdLGV0PXB0LmRhdGEuWG1sRGF0YVJlYWRlci5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7cHQuZGF0YS5YbWxEYXRhUmVhZGVyLmNhbGwodGhpcyxlKSx0aGlzLl9leHRlbmQoZSlcbn0sX2V4dGVuZDpmdW5jdGlvbihlKXtmb3IodmFyIHQsbixpPTAscj1aLmxlbmd0aDtyPmk7aSsrKXQ9WltpXSxuPWVbdF0sbiYmbiE9PXl0JiYodGhpc1t0XT1uKX0scGFyc2U6ZnVuY3Rpb24oZSl7dmFyIHQ9cHQuZGF0YS5YbWxEYXRhUmVhZGVyLmZuLnBhcnNlKGUucmVwbGFjZSgvPChcXC8/KShcXHd8LSkrOi9nLFwiPCQxXCIpKTtyZXR1cm4gcHQuZ2V0dGVyKFwiWydFbnZlbG9wZSddWydCb2R5J11cIiwhMCkodCl9LGVycm9yczpmdW5jdGlvbihlKXt2YXIgdD1wdC5nZXR0ZXIoXCJbJ0ZhdWx0J11cIiwhMCkoZSk7cmV0dXJuIHQ/W3tmYXVsdHN0cmluZzpwdC5nZXR0ZXIoXCJmYXVsdHN0cmluZ1snI3RleHQnXVwiLCEwKSh0KSxmYXVsdGNvZGU6cHQuZ2V0dGVyKFwiZmF1bHRjb2RlWycjdGV4dCddXCIsITApKHQpfV06bnVsbH0sYXhlczpmdW5jdGlvbihlKXt2YXIgdCxuLGk7cmV0dXJuIGU9cHQuZ2V0dGVyKFwiRXhlY3V0ZVJlc3BvbnNlLnJldHVybi5yb290XCIsITApKGUpLHQ9cShwdC5nZXR0ZXIoXCJBeGVzLkF4aXNcIiwhMCkoZSkpLG49JCh0WzBdKSxpPXt9LHQubGVuZ3RoPjImJihpPSQodFsxXSkpLHtjb2x1bW5zOm4scm93czppfX0sZGF0YTpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGE7Zm9yKGU9cHQuZ2V0dGVyKFwiRXhlY3V0ZVJlc3BvbnNlLnJldHVybi5yb290XCIsITApKGUpLHQ9cShwdC5nZXR0ZXIoXCJDZWxsRGF0YS5DZWxsXCIsITApKGUpKSxuPVtdLGk9cHQuZ2V0dGVyKFwiWydAQ2VsbE9yZGluYWwnXVwiKSxyPXB0LmdldHRlcihcIlZhbHVlWycjdGV4dCddXCIpLG89cHQuZ2V0dGVyKFwiRm10VmFsdWVbJyN0ZXh0J11cIiksYT0wO3QubGVuZ3RoPmE7YSsrKW4ucHVzaCh7dmFsdWU6cih0W2FdKSxmbXRWYWx1ZTpvKHRbYV0pLG9yZGluYWw6cGFyc2VJbnQoaSh0W2FdKSwxMCl9KTtyZXR1cm4gbn0sX21hcFNjaGVtYTpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGE7Zm9yKGU9cHQuZ2V0dGVyKFwiRGlzY292ZXJSZXNwb25zZS5yZXR1cm4ucm9vdFwiLCEwKShlKSxuPXEocHQuZ2V0dGVyKFwicm93XCIsITApKGUpKSxpPVtdLHI9MDtuLmxlbmd0aD5yO3IrKyl7bz17fTtmb3IoYSBpbiB0KW9bYV09dFthXShuW3JdKTtpLnB1c2gobyl9cmV0dXJuIGl9LG1lYXN1cmVzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tYXBTY2hlbWEoZSxKLm1lYXN1cmVzKX0sa3BpczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWFwU2NoZW1hKGUsSi5rcGlzKX0saGllcmFyY2hpZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21hcFNjaGVtYShlLEouaGllcmFyY2hpZXMpfSxsZXZlbHM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21hcFNjaGVtYShlLEoubGV2ZWxzKX0sZGltZW5zaW9uczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWFwU2NoZW1hKGUsSi5kaW1lbnNpb25zKX0sY3ViZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21hcFNjaGVtYShlLEouY3ViZXMpfSxjYXRhbG9nczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWFwU2NoZW1hKGUsSi5jYXRhbG9ncyl9LG1lbWJlcnM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21hcFNjaGVtYShlLEoubWVtYmVycyl9fSksYnQoITAscHQuZGF0YSx7UGl2b3REYXRhU291cmNlOkd0LFhtbGFUcmFuc3BvcnQ6WCxYbWxhRGF0YVJlYWRlcjpldCxQaXZvdEN1YmVCdWlsZGVyOld0LHRyYW5zcG9ydHM6e3htbGE6WH0scmVhZGVyczp7eG1sYTpldH19KSx0dD1mdW5jdGlvbihlLHQpe2lmKCFlKXJldHVybiBudWxsO2Zvcih2YXIgbj0wLGk9ZS5sZW5ndGg7aT5uO24rKylpZihlW25dLmZpZWxkPT09dClyZXR1cm4gZVtuXTtyZXR1cm4gbnVsbH0sbnQ9ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9W107Zm9yKG49MCxpPWUubGVuZ3RoO2k+bjtuKyspZVtuXS5maWVsZCE9PXQmJnIucHVzaChlW25dKTtyZXR1cm4gcn0scHQudWkuUGl2b3RTZXR0aW5nVGFyZ2V0PW10LmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXM7bXQuZm4uaW5pdC5jYWxsKGksdCxuKSxpLmVsZW1lbnQuYWRkQ2xhc3MoXCJrLXBpdm90LXNldHRpbmdcIiksaS5kYXRhU291cmNlPXB0LmRhdGEuUGl2b3REYXRhU291cmNlLmNyZWF0ZShuLmRhdGFTb3VyY2UpLGkuX3JlZnJlc2hIYW5kbGVyPWUucHJveHkoaS5yZWZyZXNoLGkpLGkuZGF0YVNvdXJjZS5maXJzdCh4dCxpLl9yZWZyZXNoSGFuZGxlciksbi50ZW1wbGF0ZXx8KGkub3B0aW9ucy50ZW1wbGF0ZT1cIjxkaXYgZGF0YS1cIitwdC5ucysnbmFtZT1cIiR7ZGF0YS5uYW1lIHx8IGRhdGF9XCI+JHtkYXRhLm5hbWUgfHwgZGF0YX0nKyhpLm9wdGlvbnMuZW5hYmxlZD8nPGEgY2xhc3M9XCJrLWJ1dHRvbiBrLWJ1dHRvbi1pY29uIGstYnV0dG9uLWJhcmVcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLXNldHRpbmctZGVsZXRlXCI+PC9zcGFuPjwvYT4nOlwiXCIpK1wiPC9kaXY+XCIpLGkudGVtcGxhdGU9cHQudGVtcGxhdGUoaS5vcHRpb25zLnRlbXBsYXRlKSxpLmVtcHR5VGVtcGxhdGU9cHQudGVtcGxhdGUoaS5vcHRpb25zLmVtcHR5VGVtcGxhdGUpLGkuX3NvcnRhYmxlKCksaS5lbGVtZW50Lm9uKFwiY2xpY2tcIitFdCxcIi5rLWJ1dHRvbiwuay1pdGVtXCIsZnVuY3Rpb24odCl7dmFyIG49ZSh0LnRhcmdldCkscj1uLmNsb3Nlc3QoXCJbXCIrcHQuYXR0cihcIm5hbWVcIikrXCJdXCIpLmF0dHIocHQuYXR0cihcIm5hbWVcIikpO3ImJihuLmhhc0NsYXNzKFwiay1zZXR0aW5nLWRlbGV0ZVwiKT9pLnJlbW92ZShyKTppLm9wdGlvbnMuc29ydGFibGUmJm5bMF09PT10LmN1cnJlbnRUYXJnZXQmJmkuc29ydCh7ZmllbGQ6cixkaXI6bi5maW5kKFwiLmstaS1zb3J0LWFzY1wiKVswXT9cImRlc2NcIjpcImFzY1wifSkpfSksKG4uZmlsdGVyYWJsZXx8bi5zb3J0YWJsZSkmJihpLmZpZWxkTWVudT1uZXcgZnQuUGl2b3RGaWVsZE1lbnUoaS5lbGVtZW50LHttZXNzYWdlczppLm9wdGlvbnMubWVzc2FnZXMuZmllbGRNZW51LGZpbHRlcjpcIi5rLXNldHRpbmctZmllbGRtZW51XCIsZmlsdGVyYWJsZTpuLmZpbHRlcmFibGUsc29ydGFibGU6bi5zb3J0YWJsZSxkYXRhU291cmNlOmkuZGF0YVNvdXJjZX0pKSxpLnJlZnJlc2goKX0sb3B0aW9uczp7bmFtZTpcIlBpdm90U2V0dGluZ1RhcmdldFwiLHRlbXBsYXRlOm51bGwsZmlsdGVyYWJsZTohMSxzb3J0YWJsZTohMSxlbXB0eVRlbXBsYXRlOlwiPGRpdiBjbGFzcz0nay1lbXB0eSc+JHtkYXRhfTwvZGl2PlwiLHNldHRpbmc6XCJjb2x1bW5zXCIsZW5hYmxlZDohMCxtZXNzYWdlczp7ZW1wdHk6XCJEcm9wIEZpZWxkcyBIZXJlXCJ9fSxzZXREYXRhU291cmNlOmZ1bmN0aW9uKGUpe3RoaXMuZGF0YVNvdXJjZS51bmJpbmQoeHQsdGhpcy5fcmVmcmVzaEhhbmRsZXIpLHRoaXMuZGF0YVNvdXJjZT10aGlzLm9wdGlvbnMuZGF0YVNvdXJjZT1lLHRoaXMuZmllbGRNZW51JiZ0aGlzLmZpZWxkTWVudS5zZXREYXRhU291cmNlKGUpLGUuZmlyc3QoeHQsdGhpcy5fcmVmcmVzaEhhbmRsZXIpLHRoaXMucmVmcmVzaCgpfSxfc29ydGFibGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Uub3B0aW9ucy5lbmFibGVkJiYodGhpcy5zb3J0YWJsZT10aGlzLmVsZW1lbnQua2VuZG9Tb3J0YWJsZSh7Y29ubmVjdFdpdGg6dGhpcy5vcHRpb25zLmNvbm5lY3RXaXRoLGZpbHRlcjpcIj46bm90KC5rLWVtcHR5KVwiLGhpbnQ6ZS5vcHRpb25zLmhpbnQsY3Vyc29yOlwibW92ZVwiLHN0YXJ0OmZ1bmN0aW9uKGUpe2UuaXRlbS5mb2N1cygpLmJsdXIoKX0sY2hhbmdlOmZ1bmN0aW9uKHQpe3ZhciBuPXQuaXRlbS5hdHRyKHB0LmF0dHIoXCJuYW1lXCIpKTtcInJlY2VpdmVcIj09dC5hY3Rpb24/ZS5hZGQobik6XCJyZW1vdmVcIj09dC5hY3Rpb24/ZS5yZW1vdmUobik6XCJzb3J0XCI9PXQuYWN0aW9uJiZlLm1vdmUobix0Lm5ld0luZGV4KX19KS5kYXRhKFwia2VuZG9Tb3J0YWJsZVwiKSl9LF9pbmRleE9mOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPS0xO2ZvcihuPTAsaT10Lmxlbmd0aDtpPm47bisrKWlmKE8odFtuXSk9PT1lKXtyPW47YnJlYWt9cmV0dXJuIHJ9LF9pc0tQSTpmdW5jdGlvbihlKXtyZXR1cm5cImtwaVwiPT09ZS50eXBlfHxlLm1lYXN1cmV9LHZhbGlkYXRlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT0yPT1lLnR5cGV8fFwiYWdncmVnYXRvclwiaW4gZXx8dGhpcy5faXNLUEkoZSk7cmV0dXJuIGk/XCJtZWFzdXJlc1wiPT09dGhpcy5vcHRpb25zLnNldHRpbmc6XCJtZWFzdXJlc1wiPT09dGhpcy5vcHRpb25zLnNldHRpbmc/aToodD10aGlzLmRhdGFTb3VyY2VbdGhpcy5vcHRpb25zLnNldHRpbmddKCksbj1lLmRlZmF1bHRIaWVyYXJjaHl8fGUudW5pcXVlTmFtZSx0aGlzLl9pbmRleE9mKG4sdCk+LTE/ITE6KHQ9dGhpcy5kYXRhU291cmNlW1wiY29sdW1uc1wiPT09dGhpcy5vcHRpb25zLnNldHRpbmc/XCJyb3dzXCI6XCJjb2x1bW5zXCJdKCksdGhpcy5faW5kZXhPZihuLHQpPi0xPyExOiEwKSl9LGFkZDpmdW5jdGlvbih0KXt2YXIgbixpLHI9dGhpcy5kYXRhU291cmNlW3RoaXMub3B0aW9ucy5zZXR0aW5nXSgpO2Zvcih0PWUuaXNBcnJheSh0KT90LnNsaWNlKDApOlt0XSxuPTAsaT10Lmxlbmd0aDtpPm47bisrKS0xIT09dGhpcy5faW5kZXhPZih0W25dLHIpJiYodC5zcGxpY2UobiwxKSxuLT0xLGktPTEpO3QubGVuZ3RoJiYocj1yLmNvbmNhdCh0KSx0aGlzLmRhdGFTb3VyY2VbdGhpcy5vcHRpb25zLnNldHRpbmddKHIpKX0sbW92ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuZGF0YVNvdXJjZVt0aGlzLm9wdGlvbnMuc2V0dGluZ10oKSxpPXRoaXMuX2luZGV4T2YoZSxuKTtpPi0xJiYoZT1uLnNwbGljZShpLDEpWzBdLG4uc3BsaWNlKHQsMCxlKSx0aGlzLmRhdGFTb3VyY2VbdGhpcy5vcHRpb25zLnNldHRpbmddKG4pKX0scmVtb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZGF0YVNvdXJjZVt0aGlzLm9wdGlvbnMuc2V0dGluZ10oKSxuPXRoaXMuX2luZGV4T2YoZSx0KTtuPi0xJiYodC5zcGxpY2UobiwxKSx0aGlzLmRhdGFTb3VyY2VbdGhpcy5vcHRpb25zLnNldHRpbmddKHQpKX0sc29ydDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnMuc29ydGFibGUsbj10PT09ITB8fHQuYWxsb3dVbnNvcnQsaT1uJiZcImFzY1wiPT09ZS5kaXIscj10aGlzLmRhdGFTb3VyY2Uuc29ydCgpfHxbXSxvPW50KHIsZS5maWVsZCk7aSYmci5sZW5ndGghPT1vLmxlbmd0aCYmKGU9bnVsbCksZSYmby5wdXNoKGUpLHRoaXMuZGF0YVNvdXJjZS5zb3J0KG8pfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGUsbj1cIlwiLGk9dGhpcy5kYXRhU291cmNlW3RoaXMub3B0aW9ucy5zZXR0aW5nXSgpLHI9aS5sZW5ndGgsbz0wO2lmKHIpZm9yKDtyPm87bysrKWU9aVtvXSxlPWUubmFtZT09PXQ/e25hbWU6ZX06ZSxuKz10aGlzLnRlbXBsYXRlKGJ0KHtzb3J0SWNvbjp0aGlzLl9zb3J0SWNvbihlLm5hbWUpfSxlKSk7ZWxzZSBuPXRoaXMuZW1wdHlUZW1wbGF0ZSh0aGlzLm9wdGlvbnMubWVzc2FnZXMuZW1wdHkpO3RoaXMuZWxlbWVudC5odG1sKG4pfSxkZXN0cm95OmZ1bmN0aW9uKCl7bXQuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuZGF0YVNvdXJjZS51bmJpbmQoeHQsdGhpcy5fcmVmcmVzaEhhbmRsZXIpLHRoaXMuZWxlbWVudC5vZmYoRXQpLHRoaXMuc29ydGFibGUmJnRoaXMuc29ydGFibGUuZGVzdHJveSgpLHRoaXMuZmllbGRNZW51JiZ0aGlzLmZpZWxkTWVudS5kZXN0cm95KCksdGhpcy5lbGVtZW50PW51bGwsdGhpcy5fcmVmcmVzaEhhbmRsZXI9bnVsbH0sX3NvcnRJY29uOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZGF0YVNvdXJjZS5zb3J0KCksbj10dCh0LE8oZSkpLGk9XCJcIjtyZXR1cm4gbiYmKGk9XCJrLWktc29ydC1cIituLmRpciksaX19KSxpdD1tdC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24obixpKXt2YXIgcixvLGE9dGhpczttdC5mbi5pbml0LmNhbGwoYSxuLGkpLGEuX2RhdGFTb3VyY2UoKSxhLl9iaW5kQ29uZmlndXJhdG9yKCksYS5fd3JhcHBlcigpLGEuX2NyZWF0ZUxheW91dCgpLGEuX2NvbHVtbkJ1aWxkZXI9cj1uZXcgZHQsYS5fcm93QnVpbGRlcj1vPW5ldyB1dCxhLl9jb250ZW50QnVpbGRlcj1uZXcgaHQsYS5fdGVtcGxhdGVzKCksYS5jb2x1bW5zSGVhZGVyLmFkZChhLnJvd3NIZWFkZXIpLm9uKFwiY2xpY2tcIixcInNwYW4uay1pY29uXCIsZnVuY3Rpb24oKXt2YXIgbixpLHMsbCxjPWUodGhpcyksZD1yLHU9XCJleHBhbmRDb2x1bW5cIixoPWMuYXR0cihwdC5hdHRyKFwicGF0aFwiKSkscD17YXhpczpcImNvbHVtbnNcIixwYXRoOmUucGFyc2VKU09OKGgpfTtjLnBhcmVudCgpLmlzKFwidGRcIikmJihkPW8sdT1cImV4cGFuZFJvd1wiLHAuYXhpcz1cInJvd3NcIiksaT1jLmhhc0NsYXNzKFJ0KSxzPWQubWV0YWRhdGFbaF0sbD1zLmV4cGFuZGVkPT09dCxuPWk/RnQ6enQsYS50cmlnZ2VyKG4scCl8fChkLm1ldGFkYXRhW2hdLmV4cGFuZGVkPSFpLGMudG9nZ2xlQ2xhc3MoUnQsIWkpLnRvZ2dsZUNsYXNzKEJ0LGkpLCFpJiZsP2EuZGF0YVNvdXJjZVt1XShwLnBhdGgpOmEucmVmcmVzaCgpKX0pLGEuX3Njcm9sbGFibGUoKSxhLm9wdGlvbnMuYXV0b0JpbmQmJmEuZGF0YVNvdXJjZS5mZXRjaCgpLHB0Lm5vdGlmeShhKX0sZXZlbnRzOltQdCxJdCx6dCxGdF0sb3B0aW9uczp7bmFtZTpcIlBpdm90R3JpZFwiLGF1dG9CaW5kOiEwLHJlb3JkZXJhYmxlOiEwLGZpbHRlcmFibGU6ITEsc29ydGFibGU6ITEsaGVpZ2h0Om51bGwsY29sdW1uV2lkdGg6MTAwLGNvbmZpZ3VyYXRvcjpcIlwiLGNvbHVtbkhlYWRlclRlbXBsYXRlOm51bGwscm93SGVhZGVyVGVtcGxhdGU6bnVsbCxkYXRhQ2VsbFRlbXBsYXRlOm51bGwsa3BpU3RhdHVzVGVtcGxhdGU6bnVsbCxrcGlUcmVuZFRlbXBsYXRlOm51bGwsbWVzc2FnZXM6e21lYXN1cmVGaWVsZHM6XCJEcm9wIERhdGEgRmllbGRzIEhlcmVcIixjb2x1bW5GaWVsZHM6XCJEcm9wIENvbHVtbiBGaWVsZHMgSGVyZVwiLHJvd0ZpZWxkczpcIkRyb3AgUm93cyBGaWVsZHMgSGVyZVwifX0sX3RlbXBsYXRlczpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5jb2x1bW5IZWFkZXJUZW1wbGF0ZSx0PXRoaXMub3B0aW9ucy5yb3dIZWFkZXJUZW1wbGF0ZSxuPXRoaXMub3B0aW9ucy5kYXRhQ2VsbFRlbXBsYXRlLGk9dGhpcy5vcHRpb25zLmtwaVN0YXR1c1RlbXBsYXRlLHI9dGhpcy5vcHRpb25zLmtwaVRyZW5kVGVtcGxhdGU7dGhpcy5fY29sdW1uQnVpbGRlci50ZW1wbGF0ZT1wdC50ZW1wbGF0ZShlfHxMdCx7dXNlV2l0aEJsb2NrOiEhZX0pLHRoaXMuX2NvbnRlbnRCdWlsZGVyLmRhdGFUZW1wbGF0ZT1wdC50ZW1wbGF0ZShufHxOdCx7dXNlV2l0aEJsb2NrOiEhbn0pLHRoaXMuX2NvbnRlbnRCdWlsZGVyLmtwaVN0YXR1c1RlbXBsYXRlPXB0LnRlbXBsYXRlKGl8fE90LHt1c2VXaXRoQmxvY2s6ISFpfSksdGhpcy5fY29udGVudEJ1aWxkZXIua3BpVHJlbmRUZW1wbGF0ZT1wdC50ZW1wbGF0ZShyfHxIdCx7dXNlV2l0aEJsb2NrOiEhcn0pLHRoaXMuX3Jvd0J1aWxkZXIudGVtcGxhdGU9cHQudGVtcGxhdGUodHx8THQse3VzZVdpdGhCbG9jazohIXR9KX0sX2JpbmRDb25maWd1cmF0b3I6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuY29uZmlndXJhdG9yO3QmJmUodCkua2VuZG9QaXZvdENvbmZpZ3VyYXRvcihcInNldERhdGFTb3VyY2VcIix0aGlzLmRhdGFTb3VyY2UpfSxjZWxsSW5mb0J5RWxlbWVudDpmdW5jdGlvbih0KXtyZXR1cm4gdD1lKHQpLHRoaXMuY2VsbEluZm8odC5pbmRleCgpLHQucGFyZW50KFwidHJcIikuaW5kZXgoKSl9LGNlbGxJbmZvOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzLl9jb250ZW50QnVpbGRlcixyPWkuY29sdW1uSW5kZXhlc1tlfHwwXSxvPWkucm93SW5kZXhlc1t0fHwwXTtyZXR1cm4gciYmbz8obj1vLmluZGV4Kmkucm93TGVuZ3RoK3IuaW5kZXgse2NvbHVtblR1cGxlOnIudHVwbGUscm93VHVwbGU6by50dXBsZSxtZWFzdXJlOnIubWVhc3VyZXx8by5tZWFzdXJlLGRhdGFJdGVtOnRoaXMuZGF0YVNvdXJjZS52aWV3KClbbl19KTpudWxsfSxzZXREYXRhU291cmNlOmZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucy5kYXRhU291cmNlPWUsdGhpcy5fZGF0YVNvdXJjZSgpLHRoaXMubWVhc3VyZXNUYXJnZXQmJnRoaXMubWVhc3VyZXNUYXJnZXQuc2V0RGF0YVNvdXJjZShlKSx0aGlzLnJvd3NUYXJnZXQmJnRoaXMucm93c1RhcmdldC5zZXREYXRhU291cmNlKGUpLHRoaXMuY29sdW1uc1RhcmdldCYmdGhpcy5jb2x1bW5zVGFyZ2V0LnNldERhdGFTb3VyY2UoZSksdGhpcy5fYmluZENvbmZpZ3VyYXRvcigpLHRoaXMub3B0aW9ucy5hdXRvQmluZCYmZS5mZXRjaCgpfSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe210LmZuLnNldE9wdGlvbnMuY2FsbCh0aGlzLGUpLHRoaXMuX3RlbXBsYXRlcygpfSxfZGF0YVNvdXJjZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMuZGF0YVNvdXJjZTtuPWUuaXNBcnJheShuKT97ZGF0YTpufTpuLHQuZGF0YVNvdXJjZSYmdGhpcy5fcmVmcmVzaEhhbmRsZXI/dC5kYXRhU291cmNlLnVuYmluZCh4dCx0Ll9yZWZyZXNoSGFuZGxlcikudW5iaW5kKFR0LHQuX3N0YXRlUmVzZXRIYW5kbGVyKS51bmJpbmQoU3QsdC5fcHJvZ3Jlc3NIYW5kbGVyKS51bmJpbmQoQ3QsdC5fZXJyb3JIYW5kbGVyKToodC5fcmVmcmVzaEhhbmRsZXI9ZS5wcm94eSh0LnJlZnJlc2gsdCksdC5fcHJvZ3Jlc3NIYW5kbGVyPWUucHJveHkodC5fcmVxdWVzdFN0YXJ0LHQpLHQuX3N0YXRlUmVzZXRIYW5kbGVyPWUucHJveHkodC5fc3RhdGVSZXNldCx0KSx0Ll9lcnJvckhhbmRsZXI9ZS5wcm94eSh0Ll9lcnJvcix0KSksdC5kYXRhU291cmNlPXB0LmRhdGEuUGl2b3REYXRhU291cmNlLmNyZWF0ZShuKS5iaW5kKHh0LHQuX3JlZnJlc2hIYW5kbGVyKS5iaW5kKFN0LHQuX3Byb2dyZXNzSGFuZGxlcikuYmluZChUdCx0Ll9zdGF0ZVJlc2V0SGFuZGxlcikuYmluZChDdCx0Ll9lcnJvckhhbmRsZXIpfSxfZXJyb3I6ZnVuY3Rpb24oKXt0aGlzLl9wcm9ncmVzcyghMSl9LF9yZXF1ZXN0U3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLl9wcm9ncmVzcyghMCl9LF9zdGF0ZVJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fY29sdW1uQnVpbGRlci5yZXNldCgpLHRoaXMuX3Jvd0J1aWxkZXIucmVzZXQoKX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMuaGVpZ2h0O3RoaXMud3JhcHBlcj10aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJrLXdpZGdldCBrLXBpdm90XCIpLGUmJnRoaXMud3JhcHBlci5jc3MoXCJoZWlnaHRcIixlKX0sX21lYXN1cmVGaWVsZHM6ZnVuY3Rpb24oKXt0aGlzLm1lYXN1cmVGaWVsZHM9ZShBdCkuYWRkQ2xhc3MoXCJrLXBpdm90LXRvb2xiYXIgay1oZWFkZXIgay1zZXR0aW5ncy1tZWFzdXJlc1wiKSx0aGlzLm1lYXN1cmVzVGFyZ2V0PXRoaXMuX2NyZWF0ZVNldHRpbmdUYXJnZXQodGhpcy5tZWFzdXJlRmllbGRzLHtzZXR0aW5nOlwibWVhc3VyZXNcIixtZXNzYWdlczp7ZW1wdHk6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLm1lYXN1cmVGaWVsZHN9fSl9LF9jcmVhdGVTZXR0aW5nVGFyZ2V0OmZ1bmN0aW9uKHQsbil7dmFyIGk9JzxzcGFuIHRhYmluZGV4PVwiMFwiIGNsYXNzPVwiay1idXR0b25cIiBkYXRhLScrcHQubnMrJ25hbWU9XCIke2RhdGEubmFtZX1cIj4ke2RhdGEubmFtZX0nLHI9bi5zb3J0YWJsZSxvPVwiXCI7cmV0dXJuIHImJihvKz1cIiNpZiAoZGF0YS5zb3J0SWNvbikgeyNcIixvKz0nPHNwYW4gY2xhc3M9XCJrLWljb24gJHtkYXRhLnNvcnRJY29ufSBrLXNldHRpbmctc29ydFwiPjwvc3Bhbj4nLG8rPVwiI30jXCIpLChuLmZpbHRlcmFibGV8fHIpJiYobys9JzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvd2hlYWQtcyBrLXNldHRpbmctZmllbGRtZW51XCI+PC9zcGFuPicpLHRoaXMub3B0aW9ucy5yZW9yZGVyYWJsZSYmKG8rPSc8c3BhbiBjbGFzcz1cImstaWNvbiBrLXNpLWNsb3NlIGstc2V0dGluZy1kZWxldGVcIj48L3NwYW4+JyksbyYmKGkrPSc8c3BhbiBjbGFzcz1cImstZmllbGQtYWN0aW9uc1wiPicrbytcIjwvc3Bhbj5cIiksaSs9XCI8L3NwYW4+XCIsbmV3IHB0LnVpLlBpdm90U2V0dGluZ1RhcmdldCh0LGUuZXh0ZW5kKHt0ZW1wbGF0ZTppLGVtcHR5VGVtcGxhdGU6JzxzcGFuIGNsYXNzPVwiay1lbXB0eVwiPiR7ZGF0YX08L3NwYW4+JyxlbmFibGVkOnRoaXMub3B0aW9ucy5yZW9yZGVyYWJsZSxkYXRhU291cmNlOnRoaXMuZGF0YVNvdXJjZX0sbikpfSxfaW5pdFNldHRpbmdUYXJnZXRzOmZ1bmN0aW9uKCl7dGhpcy5jb2x1bW5zVGFyZ2V0PXRoaXMuX2NyZWF0ZVNldHRpbmdUYXJnZXQodGhpcy5jb2x1bW5GaWVsZHMse2Nvbm5lY3RXaXRoOnRoaXMucm93RmllbGRzLHNldHRpbmc6XCJjb2x1bW5zXCIsZmlsdGVyYWJsZTp0aGlzLm9wdGlvbnMuZmlsdGVyYWJsZSxzb3J0YWJsZTp0aGlzLm9wdGlvbnMuc29ydGFibGUsbWVzc2FnZXM6e2VtcHR5OnRoaXMub3B0aW9ucy5tZXNzYWdlcy5jb2x1bW5GaWVsZHMsZmllbGRNZW51OnRoaXMub3B0aW9ucy5tZXNzYWdlcy5maWVsZE1lbnV9fSksdGhpcy5yb3dzVGFyZ2V0PXRoaXMuX2NyZWF0ZVNldHRpbmdUYXJnZXQodGhpcy5yb3dGaWVsZHMse2Nvbm5lY3RXaXRoOnRoaXMuY29sdW1uRmllbGRzLHNldHRpbmc6XCJyb3dzXCIsZmlsdGVyYWJsZTp0aGlzLm9wdGlvbnMuZmlsdGVyYWJsZSxzb3J0YWJsZTp0aGlzLm9wdGlvbnMuc29ydGFibGUsbWVzc2FnZXM6e2VtcHR5OnRoaXMub3B0aW9ucy5tZXNzYWdlcy5yb3dGaWVsZHMsZmllbGRNZW51OnRoaXMub3B0aW9ucy5tZXNzYWdlcy5maWVsZE1lbnV9fSl9LF9jcmVhdGVMYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49ZShWdCksaT1uLmZpbmQoXCIuay1waXZvdC1yb3doZWFkZXJzXCIpLHI9bi5maW5kKFwiLmstcGl2b3QtdGFibGVcIiksbz1lKEF0KS5hZGRDbGFzcyhcImstZ3JpZCBrLXdpZGdldFwiKTt0Ll9tZWFzdXJlRmllbGRzKCksdC5jb2x1bW5GaWVsZHM9ZShBdCkuYWRkQ2xhc3MoXCJrLXBpdm90LXRvb2xiYXIgay1oZWFkZXIgay1zZXR0aW5ncy1jb2x1bW5zXCIpLHQucm93RmllbGRzPWUoQXQpLmFkZENsYXNzKFwiay1waXZvdC10b29sYmFyIGstaGVhZGVyIGstc2V0dGluZ3Mtcm93c1wiKSx0LmNvbHVtbnNIZWFkZXI9ZSgnPGRpdiBjbGFzcz1cImstZ3JpZC1oZWFkZXItd3JhcFwiIC8+Jykud3JhcCgnPGRpdiBjbGFzcz1cImstZ3JpZC1oZWFkZXJcIiAvPicpLHQuY29sdW1uc0hlYWRlci5wYXJlbnQoKS5jc3MoXCJwYWRkaW5nLXJpZ2h0XCIscHQuc3VwcG9ydC5zY3JvbGxiYXIoKSksdC5yb3dzSGVhZGVyPWUoJzxkaXYgY2xhc3M9XCJrLWdyaWQgay13aWRnZXQgay1hbHRcIi8+JyksdC5jb250ZW50PWUoJzxkaXYgY2xhc3M9XCJrLWdyaWQtY29udGVudFwiIC8+JyksaS5hcHBlbmQodC5tZWFzdXJlRmllbGRzKSxpLmFwcGVuZCh0LnJvd0ZpZWxkcyksaS5hcHBlbmQodC5yb3dzSGVhZGVyKSxvLmFwcGVuZCh0LmNvbHVtbnNIZWFkZXIucGFyZW50KCkpLG8uYXBwZW5kKHQuY29udGVudCksci5hcHBlbmQodC5jb2x1bW5GaWVsZHMpLHIuYXBwZW5kKG8pLHQud3JhcHBlci5hcHBlbmQobiksdC5jb2x1bW5zSGVhZGVyVHJlZT1uZXcgcHQuZG9tLlRyZWUodC5jb2x1bW5zSGVhZGVyWzBdKSx0LnJvd3NIZWFkZXJUcmVlPW5ldyBwdC5kb20uVHJlZSh0LnJvd3NIZWFkZXJbMF0pLHQuY29udGVudFRyZWU9bmV3IHB0LmRvbS5UcmVlKHQuY29udGVudFswXSksdC5faW5pdFNldHRpbmdUYXJnZXRzKCl9LF9wcm9ncmVzczpmdW5jdGlvbihlKXtwdC51aS5wcm9ncmVzcyh0aGlzLndyYXBwZXIsZSl9LF9yZXNpemU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNvbHVtbnNIZWFkZXIuY2hpbGRyZW4oXCJ0YWJsZVwiKTt0aGlzLmNvbnRlbnRbMF0uZmlyc3RDaGlsZCYmKHRoaXMuX3NldFNlY3Rpb25zV2lkdGgoKSx0aGlzLl9zZXRTZWN0aW9uc0hlaWdodCgpLHRoaXMuX3NldENvbnRlbnRXaWR0aCgpLHRoaXMuX3NldENvbnRlbnRIZWlnaHQoKSxlLmNzcyhcInRhYmxlLWxheW91dFwiLER0KSxjbGVhclRpbWVvdXQodGhpcy5fbGF5b3V0VGltZW91dCksdGhpcy5fbGF5b3V0VGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5jc3MoXCJ0YWJsZS1sYXlvdXRcIixcImZpeGVkXCIpfSkpfSxfc2V0U2VjdGlvbnNXaWR0aDpmdW5jdGlvbigpe3ZhciBlPXRoaXMucm93c0hlYWRlcix0PWUucGFyZW50KFwiLmstcGl2b3Qtcm93aGVhZGVyc1wiKS53aWR0aChEdCksbj1NYXRoLm1heCh0aGlzLm1lYXN1cmVGaWVsZHMub3V0ZXJXaWR0aCgpLHRoaXMucm93RmllbGRzLm91dGVyV2lkdGgoKSk7bj1NYXRoLm1heChlLmNoaWxkcmVuKFwidGFibGVcIikud2lkdGgoKSxuKSx0LndpZHRoKG4pfSxfc2V0U2VjdGlvbnNIZWlnaHQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1lYXN1cmVGaWVsZHMuaGVpZ2h0KER0KS5oZWlnaHQoKSx0PXRoaXMuY29sdW1uRmllbGRzLmhlaWdodChEdCkuaGVpZ2h0KCksbj10aGlzLnJvd0ZpZWxkcy5oZWlnaHQoRHQpLmlubmVySGVpZ2h0KCksaT10aGlzLmNvbHVtbnNIZWFkZXIuaGVpZ2h0KER0KS5pbm5lckhlaWdodCgpLHI9bi10aGlzLnJvd0ZpZWxkcy5oZWlnaHQoKSxvPXQ+ZT90OmUsYT1pPm4/aTpuO3RoaXMubWVhc3VyZUZpZWxkcy5oZWlnaHQobyksdGhpcy5jb2x1bW5GaWVsZHMuaGVpZ2h0KG8pLHRoaXMucm93RmllbGRzLmhlaWdodChhLXIpLHRoaXMuY29sdW1uc0hlYWRlci5oZWlnaHQoYSl9LF9zZXRDb250ZW50V2lkdGg6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNvbnRlbnQuZmluZChcInRhYmxlXCIpLHQ9dGhpcy5jb250ZW50LndpZHRoKCksbj1lLmNoaWxkcmVuKFwiY29sZ3JvdXBcIikuY2hpbGRyZW4oKS5sZW5ndGgsaT0xMDAscj1uKnRoaXMub3B0aW9ucy5jb2x1bW5XaWR0aDtyPnQmJihpPU1hdGguY2VpbChyL3QqMTAwKSksZS5hZGQodGhpcy5jb2x1bW5zSGVhZGVyLmNoaWxkcmVuKFwidGFibGVcIikpLmNzcyhcIm1pbi13aWR0aFwiLGkrXCIlXCIpfSxfc2V0Q29udGVudEhlaWdodDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsbj1lLmNvbnRlbnQsaT1lLnJvd3NIZWFkZXIscj1lLndyYXBwZXIuaW5uZXJIZWlnaHQoKSxvPXB0LnN1cHBvcnQuc2Nyb2xsYmFyKCksYT1uWzBdLm9mZnNldEhlaWdodD09PW5bMF0uY2xpZW50SGVpZ2h0O2lmKGUud3JhcHBlci5pcyhcIjp2aXNpYmxlXCIpKXtpZighcilyZXR1cm4gYSYmKG89MCksaS5oZWlnaHQobi5oZWlnaHQoKS1vKSx0O3ItPWUuY29sdW1uRmllbGRzLm91dGVySGVpZ2h0KCksci09ZS5jb2x1bW5zSGVhZGVyLm91dGVySGVpZ2h0KCksMipvPj1yJiYocj0yKm8rMSxhfHwocis9bykpLG4uaGVpZ2h0KHIpLGEmJihvPTApLGkuaGVpZ2h0KHItbyl9fSxfYXhpc01lYXN1cmVzOmZ1bmN0aW9uKGUpe3ZhciB0PVtdLG49dGhpcy5kYXRhU291cmNlLGk9bi5tZWFzdXJlcygpLHI9aS5sZW5ndGg+MXx8aVswXSYmaVswXS50eXBlO3JldHVybiBuLm1lYXN1cmVzQXhpcygpPT09ZSYmKDA9PT1uW2VdKCkubGVuZ3RofHxyKSYmKHQ9aSksdH0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQuZGF0YVNvdXJjZSxpPW4uYXhlcygpLHI9KGkuY29sdW1uc3x8e30pLnR1cGxlc3x8W10sbz0oaS5yb3dzfHx7fSkudHVwbGVzfHxbXSxhPXQuX2NvbHVtbkJ1aWxkZXIscz10Ll9yb3dCdWlsZGVyLGw9e30sYz17fTt0LnRyaWdnZXIoUHQse2FjdGlvbjpcInJlYmluZFwifSl8fChhLm1lYXN1cmVzPXRoaXMuX2F4aXNNZWFzdXJlcyhcImNvbHVtbnNcIiksdC5jb2x1bW5zSGVhZGVyVHJlZS5yZW5kZXIoYS5idWlsZChyKSksdC5yb3dzSGVhZGVyVHJlZS5yZW5kZXIocy5idWlsZChvKSksbD17aW5kZXhlczphLl9pbmRleGVzLG1lYXN1cmVzOmEubWVhc3VyZXMsbWV0YWRhdGE6YS5tZXRhZGF0YX0sYz17aW5kZXhlczpzLl9pbmRleGVzLG1lYXN1cmVzOnRoaXMuX2F4aXNNZWFzdXJlcyhcInJvd3NcIiksbWV0YWRhdGE6cy5tZXRhZGF0YX0sdC5jb250ZW50VHJlZS5yZW5kZXIodC5fY29udGVudEJ1aWxkZXIuYnVpbGQobi52aWV3KCksbCxjKSksdC5fcmVzaXplKCksdC50b3VjaFNjcm9sbGVyP3QudG91Y2hTY3JvbGxlci5jb250ZW50UmVzaXplZCgpOihlPXB0LnRvdWNoU2Nyb2xsZXIodC5jb250ZW50KSxlJiZlLm1vdmFibGUmJih0LnRvdWNoU2Nyb2xsZXI9ZSxlLm1vdmFibGUuYmluZChcImNoYW5nZVwiLGZ1bmN0aW9uKGUpe3QuY29sdW1uc0hlYWRlci5zY3JvbGxMZWZ0KC1lLnNlbmRlci54KSx0LnJvd3NIZWFkZXIuc2Nyb2xsVG9wKC1lLnNlbmRlci55KX0pKSksdC5fcHJvZ3Jlc3MoITEpLHQudHJpZ2dlcihJdCkpfSxfc2Nyb2xsYWJsZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LmNvbHVtbnNIZWFkZXIsaT10LnJvd3NIZWFkZXI7dC5jb250ZW50LnNjcm9sbChmdW5jdGlvbigpe24uc2Nyb2xsTGVmdCh0aGlzLnNjcm9sbExlZnQpLGkuc2Nyb2xsVG9wKHRoaXMuc2Nyb2xsVG9wKX0pLGkuYmluZChcIkRPTU1vdXNlU2Nyb2xsXCIrRXQrXCIgbW91c2V3aGVlbFwiK0V0LGUucHJveHkodC5fd2hlZWxTY3JvbGwsdCkpfSxfd2hlZWxTY3JvbGw6ZnVuY3Rpb24odCl7dmFyIG4saTt0LmN0cmxLZXl8fChuPXB0LndoZWVsRGVsdGFZKHQpLGk9dGhpcy5jb250ZW50LnNjcm9sbFRvcCgpLG4mJih0LnByZXZlbnREZWZhdWx0KCksZSh0LmN1cnJlbnRUYXJnZXQpLm9uZShcIndoZWVsXCIrRXQsITEpLHRoaXMucm93c0hlYWRlci5zY3JvbGxUb3AoaSstbiksdGhpcy5jb250ZW50LnNjcm9sbFRvcChpKy1uKSkpfX0pLHJ0PXB0LmRvbS5lbGVtZW50LG90PXB0LmRvbS5odG1sLGF0PXB0LmRvbS50ZXh0LHN0PWZ1bmN0aW9uKGUsdCl7cmV0dXJue21heENoaWxkcmVuOjAsY2hpbGRyZW46MCxtYXhNZW1iZXJzOjAsbWVtYmVyczowLG1lYXN1cmVzOjEsbGV2ZWxOdW06ZSxwYXJlbnRNZW1iZXI6MCE9PXR9fSxsdD1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbj1bXSxpPTA7dD49aTtpKyspbi5wdXNoKGUubWVtYmVyc1tpXS5uYW1lKTtyZXR1cm4gbn0sY3Q9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49XCJcIixpPTA7dD49aTtpKyspbis9ZS5tZW1iZXJzW2ldLm5hbWU7cmV0dXJuIG59LGR0PWd0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbigpe3RoaXMubWVhc3VyZXM9MSx0aGlzLm1ldGFkYXRhPXt9fSxidWlsZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl90Ym9keShlKSxuPXRoaXMuX2NvbEdyb3VwKCk7cmV0dXJuW3J0KFwidGFibGVcIixudWxsLFtuLHRdKV19LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5tZXRhZGF0YT17fX0sX2NvbEdyb3VwOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuX3Jvd0xlbmd0aCgpLHQ9W10sbj0wO2U+bjtuKyspdC5wdXNoKHJ0KFwiY29sXCIsbnVsbCkpO3JldHVybiBydChcImNvbGdyb3VwXCIsbnVsbCx0KX0sX3Rib2R5OmZ1bmN0aW9uKGUpe3ZhciB0PWVbMF07cmV0dXJuIHRoaXMubWFwPXt9LHRoaXMucm93cz1bXSx0aGlzLnJvb3RUdXBsZT10LHRoaXMuX2luZGV4ZXM9W10sdD8odGhpcy5fYnVpbGRSb3dzKHQsMCksdGhpcy5fbm9ybWFsaXplKCkpOnRoaXMucm93cy5wdXNoKHJ0KFwidHJcIixudWxsLFtydChcInRoXCIsbnVsbCxbb3QoXCImbmJzcDtcIildKV0pKSxydChcInRib2R5XCIsbnVsbCx0aGlzLnJvd3MpfSxfbm9ybWFsaXplOmZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQsbixpLHIsbz10aGlzLnJvd3MsYT1vLmxlbmd0aCxzPTA7YT5zO3MrKylpZihlPW9bc10sMSE9PWUucm93U3Bhbilmb3IoaT1lLmNoaWxkcmVuLG49MCx0PWkubGVuZ3RoO3Q+bjtuKyspcj1pW25dLHIudHVwbGVBbGwmJihyLmF0dHIucm93U3Bhbj1lLnJvd1NwYW4pfSxfcm93SW5kZXg6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMucm93cyxuPXQubGVuZ3RoLGk9MDtuPmkmJnRbaV0hPT1lO2krKyk7cmV0dXJuIGl9LF9yb3dMZW5ndGg6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJvd3NbMF0/dGhpcy5yb3dzWzBdLmNoaWxkcmVuOltdLHQ9ZS5sZW5ndGgsbj0wLGk9MDtpZih0KWZvcig7dD5pO2krKyluKz1lW2ldLmF0dHIuY29sU3Bhbnx8MTtyZXR1cm4gbnx8KG49dGhpcy5tZWFzdXJlcyksbn0sX3JvdzpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvPXRoaXMucm9vdFR1cGxlLm1lbWJlcnNbdF0ubmFtZSxhPWUubWVtYmVyc1t0XS5sZXZlbE51bSxzPW8rYSxsPXRoaXMubWFwLGM9bFtzXTtyZXR1cm4gYz8oYy5ub3RGaXJzdD0hMSxjLnBhcmVudE1lbWJlciYmYy5wYXJlbnRNZW1iZXI9PT1ufHwoYy5wYXJlbnRNZW1iZXI9bixjLmNvbFNwYW49MCkpOihjPXJ0KFwidHJcIixudWxsLFtdKSxjLnBhcmVudE1lbWJlcj1uLGMuY29sU3Bhbj0wLGMucm93U3Bhbj0xLGxbc109YyxpPWxbbysoK2EtMSldLGkmJihyPWkuY2hpbGRyZW4sYy5ub3RGaXJzdD1yWzFdJiYtMT09PXJbMV0uYXR0ci5jbGFzc05hbWUuaW5kZXhPZihcImstYWx0XCIpPyEwOmkubm90Rmlyc3QpLHRoaXMucm93cy5zcGxpY2UodGhpcy5fcm93SW5kZXgoaSkrMSwwLGMpKSxjfSxfbWVhc3VyZXM6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhPXRoaXMubWFwLHM9YS5tZWFzdXJlUm93O2ZvcihzfHwocz1ydChcInRyXCIsbnVsbCxbXSksYS5tZWFzdXJlUm93PXMsdGhpcy5yb3dzLnB1c2gocykpLHI9MCxvPWUubGVuZ3RoO28+cjtyKyspaT1lW3JdLHMuY2hpbGRyZW4ucHVzaChydChcInRoXCIse2NsYXNzTmFtZTpcImstaGVhZGVyXCIrKG58fFwiXCIpfSxbdGhpcy5fY29udGVudChpLHQpXSkpO3JldHVybiBvfSxfY29udGVudDpmdW5jdGlvbihlLHQpe3JldHVybiBvdCh0aGlzLnRlbXBsYXRlKHttZW1iZXI6ZSx0dXBsZTp0fSkpfSxfY2VsbDpmdW5jdGlvbihlLHQpe3JldHVybiBydChcInRoXCIse2NsYXNzTmFtZTpcImstaGVhZGVyXCIrZX0sdCl9LF9idWlsZFJvd3M6ZnVuY3Rpb24oZSxuLGkpe3ZhciByLG8sYSxzLGwsYyxkLHUsaCxwLGY9ZS5tZW1iZXJzLGc9ZltuXSxtPWZbbisxXSx2PVtdLF89MDtpZihnLm1lYXN1cmUpcmV0dXJuIHRoaXMuX21lYXN1cmVzKGcuY2hpbGRyZW4sZSksdDtpZih1PXB0LnN0cmluZ2lmeShsdChlLG4pKSxyPXRoaXMuX3JvdyhlLG4saSksYT1nLmNoaWxkcmVuLHM9YS5sZW5ndGgscD10aGlzLm1ldGFkYXRhW3VdLHB8fCh0aGlzLm1ldGFkYXRhW3VdPXA9c3QoK2cubGV2ZWxOdW0sbikpLHRoaXMuX2luZGV4ZXMucHVzaCh7cGF0aDp1LHR1cGxlOmV9KSxnLmhhc0NoaWxkcmVuJiYocC5leHBhbmRlZD09PSExJiYocz0wLHAuY2hpbGRyZW49MCksZD17Y2xhc3NOYW1lOlwiay1pY29uIFwiKyhzP1J0OkJ0KX0sZFtwdC5hdHRyKFwicGF0aFwiKV09dSx2LnB1c2gocnQoXCJzcGFuXCIsZCkpKSx2LnB1c2godGhpcy5fY29udGVudChnLGUpKSxsPXRoaXMuX2NlbGwoci5ub3RGaXJzdD9cIiBrLWZpcnN0XCI6XCJcIix2KSxyLmNoaWxkcmVuLnB1c2gobCksci5jb2xTcGFuKz0xLHMpe2ZvcihjPXRoaXMuX2NlbGwoXCIgay1hbHRcIixbdGhpcy5fY29udGVudChnLGUpXSksci5jaGlsZHJlbi5wdXNoKGMpO3M+XztfKyspbz10aGlzLl9idWlsZFJvd3MoYVtfXSxuLGcpO2g9by5jb2xTcGFuLGwuYXR0ci5jb2xTcGFuPWgscC5jaGlsZHJlbj1oLHAubWVtYmVycz0xLHIuY29sU3Bhbis9aCxyLnJvd1NwYW49by5yb3dTcGFuKzEsbSYmKGg9bS5tZWFzdXJlP3RoaXMuX21lYXN1cmVzKG0uY2hpbGRyZW4sZSxcIiBrLWFsdFwiKTp0aGlzLl9idWlsZFJvd3MoZSxuKzEpLmNvbFNwYW4sYy5hdHRyLmNvbFNwYW49aCxoLT0xLHAubWVtYmVycys9aCxyLmNvbFNwYW4rPWgpfWVsc2UgbSYmKGg9bS5tZWFzdXJlP3RoaXMuX21lYXN1cmVzKG0uY2hpbGRyZW4sZSk6dGhpcy5fYnVpbGRSb3dzKGUsbisxKS5jb2xTcGFuLHAubWVtYmVycz1oLGg+MSYmKGwuYXR0ci5jb2xTcGFuPWgsci5jb2xTcGFuKz1oLTEpKTtyZXR1cm4gcC5jaGlsZHJlbj5wLm1heENoaWxkcmVuJiYocC5tYXhDaGlsZHJlbj1wLmNoaWxkcmVuKSxwLm1lbWJlcnM+cC5tYXhNZW1iZXJzJiYocC5tYXhNZW1iZXJzPXAubWVtYmVycyksKGN8fGwpLnR1cGxlQWxsPSEwLHJ9fSksdXQ9Z3QuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7dGhpcy5tZXRhZGF0YT17fX0sYnVpbGQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fdGJvZHkoZSksbj10aGlzLl9jb2xHcm91cCgpO3JldHVybltydChcInRhYmxlXCIsbnVsbCxbbix0XSldfSxyZXNldDpmdW5jdGlvbigpe3RoaXMubWV0YWRhdGE9e319LF9jb2xHcm91cDpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLnJvd3NbMF0uY2hpbGRyZW4ubGVuZ3RoLHQ9W10sbj0wO2U+bjtuKyspdC5wdXNoKHJ0KFwiY29sXCIsbnVsbCkpO3JldHVybiBydChcImNvbGdyb3VwXCIsbnVsbCx0KX0sX3Rib2R5OmZ1bmN0aW9uKGUpe3ZhciB0PWVbMF07cmV0dXJuIHRoaXMucm9vdFR1cGxlPXQsdGhpcy5yb3dzPVtdLHRoaXMubWFwPXt9LHRoaXMuX2luZGV4ZXM9W10sdD8odGhpcy5fYnVpbGRSb3dzKHQsMCksdGhpcy5fbm9ybWFsaXplKCkpOnRoaXMucm93cy5wdXNoKHJ0KFwidHJcIixudWxsLFtydChcInRkXCIsbnVsbCxbb3QoXCImbmJzcDtcIildKV0pKSxydChcInRib2R5XCIsbnVsbCx0aGlzLnJvd3MpfSxfbm9ybWFsaXplOmZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQsbixpLHI9dGhpcy5yb3dzLG89ci5sZW5ndGgsYT0wLHM9dGhpcy5yb290VHVwbGUubWVtYmVycyxsPXNbMF0ubmFtZSxjPXMubGVuZ3RoLGQ9MCx1PXRoaXMubWFwO28+YTthKyspZm9yKGU9clthXSxkPTA7Yz5kO2QrKyluPXRoaXNbc1tkXS5uYW1lXSx0PWUuY29sU3BhbltcImRpbVwiK2RdLHQmJm4+dC5sZXZlbE51bSYmKHQuYXR0ci5jb2xTcGFuPW4tdC5sZXZlbE51bSsxKTtlPXVbbF0saT11W2wrXCJhbGxcIl0sZSYmKGUuY2hpbGRyZW5bMF0uYXR0ci5jbGFzc05hbWU9XCJrLWZpcnN0XCIpLGkmJihpLmNoaWxkcmVuWzBdLmF0dHIuY2xhc3NOYW1lKz1cIiBrLWZpcnN0XCIpfSxfcm93OmZ1bmN0aW9uKGUpe3ZhciB0PXJ0KFwidHJcIixudWxsLGUpO3JldHVybiB0LnJvd1NwYW49MSx0LmNvbFNwYW49e30sdGhpcy5yb3dzLnB1c2godCksdH0sX2NvbnRlbnQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gb3QodGhpcy50ZW1wbGF0ZSh7bWVtYmVyOmUsdHVwbGU6dH0pKX0sX2J1aWxkUm93czpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGEscyxsLGMsZCx1PXRoaXMubWFwLGg9ZS5tZW1iZXJzLHA9aFt0XSxmPWhbdCsxXSxnPXAuY2hpbGRyZW4sbT1nLmxlbmd0aCx2PStwLmxldmVsTnVtKzEsXz10aGlzLnJvb3RUdXBsZS5tZW1iZXJzW3RdLm5hbWUseT1sdChlLHQtMSkuam9pbihcIlwiKSx3PXkrKHAucGFyZW50TmFtZXx8XCJcIiksYj11W3crXCJhbGxcIl18fHVbd10saz1bXTtpZighYnx8Yi5oYXNDaGlsZD9iPXRoaXMuX3JvdygpOmIuaGFzQ2hpbGQ9ITAscC5tZWFzdXJlKXtmb3IoYz17Y2xhc3NOYW1lOmIuYWxsQ2VsbD9cImstZ3JpZC1mb290ZXJcIjpcIlwifSxiLmNoaWxkcmVuLnB1c2gocnQoXCJ0ZFwiLGMsW3RoaXMuX2NvbnRlbnQoZ1swXSxlKV0pKSxiLnJvd1NwYW49bSxkPTE7bT5kO2QrKyl0aGlzLl9yb3coW3J0KFwidGRcIixjLFt0aGlzLl9jb250ZW50KGdbZF0sZSldKV0pO3JldHVybiBifWlmKHVbeStwLm5hbWVdPWIsbj1wdC5zdHJpbmdpZnkobHQoZSx0KSksbz10aGlzLm1ldGFkYXRhW25dLG98fCh0aGlzLm1ldGFkYXRhW25dPW89c3Qodi0xLHQpKSx0aGlzLl9pbmRleGVzLnB1c2goe3BhdGg6bix0dXBsZTplfSkscC5oYXNDaGlsZHJlbiYmKG8uZXhwYW5kZWQ9PT0hMSYmKG09MCxvLmNoaWxkcmVuPTApLGE9e2NsYXNzTmFtZTpcImstaWNvbiBcIisobT9SdDpCdCl9LGFbcHQuYXR0cihcInBhdGhcIildPW4say5wdXNoKHJ0KFwic3BhblwiLGEpKSksay5wdXNoKHRoaXMuX2NvbnRlbnQocCxlKSksbD1ydChcInRkXCIse2NsYXNzTmFtZTpiLmFsbENlbGwmJiFtP1wiay1ncmlkLWZvb3RlclwiOlwiXCJ9LGspLGwubGV2ZWxOdW09dixiLmNoaWxkcmVuLnB1c2gobCksYi5jb2xTcGFuW1wiZGltXCIrdF09bCwoIXRoaXNbX118fHY+dGhpc1tfXSkmJih0aGlzW19dPXYpLG0pe2ZvcihiLmFsbENlbGw9ITEsYi5oYXNDaGlsZD0hMSxkPTA7bT5kO2QrKylpPXRoaXMuX2J1aWxkUm93cyhnW2RdLHQpLGIhPT1pJiYoYi5yb3dTcGFuKz1pLnJvd1NwYW4pO2Iucm93U3Bhbj4xJiYobC5hdHRyLnJvd1NwYW49Yi5yb3dTcGFuKSxvLmNoaWxkcmVuPWIucm93U3BhbixzPXJ0KFwidGRcIix7Y2xhc3NOYW1lOlwiay1ncmlkLWZvb3RlclwifSxbdGhpcy5fY29udGVudChwLGUpXSkscy5sZXZlbE51bT12LHI9dGhpcy5fcm93KFtzXSksci5jb2xTcGFuW1wiZGltXCIrdF09cyxyLmFsbENlbGw9ITAsdVt5K3AubmFtZStcImFsbFwiXT1yLGYmJihpPXRoaXMuX2J1aWxkUm93cyhlLHQrMSkscy5hdHRyLnJvd1NwYW49aS5yb3dTcGFuKSxiLnJvd1NwYW4rPXIucm93U3BhbixvLm1lbWJlcnM9ci5yb3dTcGFufWVsc2UgZiYmKGIuaGFzQ2hpbGQ9ITEsdGhpcy5fYnVpbGRSb3dzKGUsdCsxKSwoc3x8bCkuYXR0ci5yb3dTcGFuPWIucm93U3BhbixvLm1lbWJlcnM9Yi5yb3dTcGFuKTtyZXR1cm4gby5jaGlsZHJlbj5vLm1heENoaWxkcmVuJiYoby5tYXhDaGlsZHJlbj1vLmNoaWxkcmVuKSxvLm1lbWJlcnM+by5tYXhNZW1iZXJzJiYoby5tYXhNZW1iZXJzPW8ubWVtYmVycyksYn19KSxodD1ndC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt0aGlzLmNvbHVtbkF4aXM9e30sdGhpcy5yb3dBeGlzPXt9fSxidWlsZDpmdW5jdGlvbihlLG4saSl7dmFyIHIsbyxhPW4uaW5kZXhlc1swXSxzPW4ubWV0YWRhdGFbYT9hLnBhdGg6dF07cmV0dXJuIHRoaXMuY29sdW1uQXhpcz1uLHRoaXMucm93QXhpcz1pLHRoaXMuZGF0YT1lLHRoaXMucm93TGVuZ3RoPXM/cy5tYXhDaGlsZHJlbitzLm1heE1lbWJlcnM6bi5tZWFzdXJlcy5sZW5ndGh8fDEsdGhpcy5yb3dMZW5ndGh8fCh0aGlzLnJvd0xlbmd0aD0xKSxyPXRoaXMuX3Rib2R5KCksbz10aGlzLl9jb2xHcm91cCgpLFtydChcInRhYmxlXCIsbnVsbCxbbyxyXSldfSxfY29sR3JvdXA6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNvbHVtbkF4aXMubWVhc3VyZXMubGVuZ3RofHwxLHQ9W10sbj0wO2Zvcih0aGlzLnJvd3NbMF0mJihlPXRoaXMucm93c1swXS5jaGlsZHJlbi5sZW5ndGgpO2U+bjtuKyspdC5wdXNoKHJ0KFwiY29sXCIsbnVsbCkpO3JldHVybiBydChcImNvbGdyb3VwXCIsbnVsbCx0KX0sX3Rib2R5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm93cz1bXSx0aGlzLmRhdGFbMF0/KHRoaXMuY29sdW1uSW5kZXhlcz10aGlzLl9pbmRleGVzKHRoaXMuY29sdW1uQXhpcyksdGhpcy5yb3dJbmRleGVzPXRoaXMuX2luZGV4ZXModGhpcy5yb3dBeGlzKSx0aGlzLl9idWlsZFJvd3MoKSk6dGhpcy5yb3dzLnB1c2gocnQoXCJ0clwiLG51bGwsW3J0KFwidGRcIixudWxsLFtvdChcIiZuYnNwO1wiKV0pXSkpLHJ0KFwidGJvZHlcIixudWxsLHRoaXMucm93cyl9LF9pbmRleGVzOmZ1bmN0aW9uKGUpe3ZhciBuLGkscixvLGEscz1bXSxsPWUuaW5kZXhlcyxjPWUubWV0YWRhdGEsZD1lLm1lYXN1cmVzLHU9ZC5sZW5ndGh8fDEsaD0wLHA9MCxmPTAsZz1sLmxlbmd0aDtpZighZyl7Zm9yKHI9MDt1PnI7cisrKXNbcl09e2luZGV4OnIsbWVhc3VyZTpkW3JdLHR1cGxlOm51bGx9O3JldHVybiBzfWZvcig7Zz5mO2YrKyl7aWYobj1sW2ZdLGk9Y1tuLnBhdGhdLG89aS5jaGlsZHJlbitpLm1lbWJlcnMsYT0wLG8mJihvLT11KSxpLmV4cGFuZGVkPT09ITEmJmkuY2hpbGRyZW4hPT1pLm1heENoaWxkcmVuJiYoYT1pLm1heENoaWxkcmVuKSxpLnBhcmVudE1lbWJlciYmMD09PWkubGV2ZWxOdW0mJihvPS0xKSxvPi0xKXtmb3Iocj0wO3U+cjtyKyspc1tvK3Arcl09e2NoaWxkcmVuOm8saW5kZXg6aCxtZWFzdXJlOmRbcl0sdHVwbGU6bi50dXBsZX0saCs9MTtmb3IoO3NbcF0hPT10OylwKz0xfWgrPWF9cmV0dXJuIHN9LF9idWlsZFJvd3M6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5yb3dJbmRleGVzLHQ9ZS5sZW5ndGgsbj0wO3Q+bjtuKyspdGhpcy5yb3dzLnB1c2godGhpcy5fYnVpbGRSb3coZVtuXSkpfSxfYnVpbGRSb3c6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG4saSxyLG8sYSxzPWUuaW5kZXgqdGhpcy5yb3dMZW5ndGgsbD10aGlzLmNvbHVtbkluZGV4ZXMsYz1sLmxlbmd0aCxkPVtdLHU9MDtjPnU7dSsrKXQ9bFt1XSxyPXt9LHQuY2hpbGRyZW4mJihyLmNsYXNzTmFtZT1cImstYWx0XCIpLGk9XCJcIixvPXRoaXMuZGF0YVtzK3QuaW5kZXhdLGE9dC5tZWFzdXJlfHxlLm1lYXN1cmUsbj17Y29sdW1uVHVwbGU6dC50dXBsZSxyb3dUdXBsZTplLnR1cGxlLG1lYXN1cmU6YSxkYXRhSXRlbTpvfSxcIlwiIT09by52YWx1ZSYmYSYmYS50eXBlJiYoXCJzdGF0dXNcIj09PWEudHlwZT9pPXRoaXMua3BpU3RhdHVzVGVtcGxhdGUobik6XCJ0cmVuZFwiPT09YS50eXBlJiYoaT10aGlzLmtwaVRyZW5kVGVtcGxhdGUobikpKSxpfHwoaT10aGlzLmRhdGFUZW1wbGF0ZShuKSksZC5wdXNoKHJ0KFwidGRcIixyLFtvdChpKV0pKTtyZXR1cm4gcj17fSxlLmNoaWxkcmVuJiYoci5jbGFzc05hbWU9XCJrLWdyaWQtZm9vdGVyXCIpLHJ0KFwidHJcIixyLGQpfX0pLGZ0LnBsdWdpbihpdCl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIG49dC5jaGlsZHJlbihcIi5rLWFuaW1hdGlvbi1jb250YWluZXJcIik7cmV0dXJuIG4ubGVuZ3RofHwobj10KSxuLmNoaWxkcmVuKGUpfX1mdW5jdGlvbiBpKGUpe3JldHVybiBmLnRlbXBsYXRlKGUse3VzZVdpdGhCbG9jazohMX0pfWZ1bmN0aW9uIHIoZSl7cmV0dXJuIGUuZmluZChcIj4gZGl2IC5rLWNoZWNrYm94IFt0eXBlPWNoZWNrYm94XVwiKX1mdW5jdGlvbiBvKGUpe3JldHVybiBmdW5jdGlvbih0LG4pe249bi5jbG9zZXN0KEcpO3ZhciBpLHI9bi5wYXJlbnQoKTtyZXR1cm4gci5wYXJlbnQoKS5pcyhcImxpXCIpJiYoaT1yLnBhcmVudCgpKSx0aGlzLl9kYXRhU291cmNlTW92ZSh0LHIsaSxmdW5jdGlvbih0LGkpe3JldHVybiB0aGlzLl9pbnNlcnQodC5kYXRhKCksaSxuLmluZGV4KCkrZSl9KX19ZnVuY3Rpb24gYSh0LG4pe2Zvcih2YXIgaTt0JiZcInVsXCIhPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTspaT10LHQ9dC5uZXh0U2libGluZywzPT1pLm5vZGVUeXBlJiYoaS5ub2RlVmFsdWU9ZS50cmltKGkubm9kZVZhbHVlKSkscC50ZXN0KGkuY2xhc3NOYW1lKT9uLmluc2VydEJlZm9yZShpLG4uZmlyc3RDaGlsZCk6bi5hcHBlbmRDaGlsZChpKX1mdW5jdGlvbiBzKHQpe3ZhciBuPXQuY2hpbGRyZW4oXCJkaXZcIiksaT10LmNoaWxkcmVuKFwidWxcIikscj1uLmNoaWxkcmVuKFwiLmstaWNvblwiKSxvPXQuY2hpbGRyZW4oXCI6Y2hlY2tib3hcIikscz1uLmNoaWxkcmVuKFwiLmstaW5cIik7dC5oYXNDbGFzcyhcImstdHJlZXZpZXdcIil8fChuLmxlbmd0aHx8KG49ZShcIjxkaXYgLz5cIikucHJlcGVuZFRvKHQpKSwhci5sZW5ndGgmJmkubGVuZ3RoP3I9ZShcIjxzcGFuIGNsYXNzPSdrLWljb24nIC8+XCIpLnByZXBlbmRUbyhuKTppLmxlbmd0aCYmaS5jaGlsZHJlbigpLmxlbmd0aHx8KHIucmVtb3ZlKCksaS5yZW1vdmUoKSksby5sZW5ndGgmJmUoXCI8c3BhbiBjbGFzcz0nay1jaGVja2JveCcgLz5cIikuYXBwZW5kVG8obikuYXBwZW5kKG8pLHMubGVuZ3RofHwocz10LmNoaWxkcmVuKFwiYVwiKS5lcSgwKS5hZGRDbGFzcyhcImstaW5cIikscy5sZW5ndGh8fChzPWUoXCI8c3BhbiBjbGFzcz0nay1pbicgLz5cIikpLHMuYXBwZW5kVG8obiksbi5sZW5ndGgmJmEoblswXS5uZXh0U2libGluZyxzWzBdKSkpfWZ1bmN0aW9uIGwoZSl7dmFyIHQ9dGhpczt0LnRyZWV2aWV3PWUsdC5ob3ZlcmVkPWUuZWxlbWVudCx0Ll9kcmFnZ2FibGU9bmV3IGcuRHJhZ2dhYmxlKGUuZWxlbWVudCx7ZmlsdGVyOlwiZGl2Om5vdCguay1zdGF0ZS1kaXNhYmxlZCkgLmstaW5cIixoaW50OmZ1bmN0aW9uKHQpe3JldHVybiBlLnRlbXBsYXRlcy5kcmFnQ2x1ZSh7aXRlbTplLmRhdGFJdGVtKHQpLHRyZWV2aWV3OmUub3B0aW9uc30pfSxjdXJzb3JPZmZzZXQ6e2xlZnQ6MTAsdG9wOmYuc3VwcG9ydC5tb2JpbGVPUz8tNDAvZi5zdXBwb3J0Lnpvb21MZXZlbCgpOjEwfSxkcmFnc3RhcnQ6ayh0LmRyYWdzdGFydCx0KSxkcmFnY2FuY2VsOmsodC5kcmFnY2FuY2VsLHQpLGRyYWc6ayh0LmRyYWcsdCksZHJhZ2VuZDprKHQuZHJhZ2VuZCx0KSwkYW5ndWxhcjplLm9wdGlvbnMuJGFuZ3VsYXJ9KX12YXIgYyxkLHUsaCxwLGY9d2luZG93LmtlbmRvLGc9Zi51aSxtPWYuZGF0YSx2PWUuZXh0ZW5kLF89Zi50ZW1wbGF0ZSx5PWUuaXNBcnJheSx3PWcuV2lkZ2V0LGI9bS5IaWVyYXJjaGljYWxEYXRhU291cmNlLGs9ZS5wcm94eSx4PWYua2V5cyxDPVwiLmtlbmRvVHJlZVZpZXdcIixTPVwic2VsZWN0XCIsVD1cImNoZWNrXCIsRD1cIm5hdmlnYXRlXCIsQT1cImV4cGFuZFwiLEU9XCJjaGFuZ2VcIixNPVwiZXJyb3JcIixQPVwiY2hlY2tlZFwiLEk9XCJpbmRldGVybWluYXRlXCIsej1cImNvbGxhcHNlXCIsRj1cImRyYWdzdGFydFwiLFI9XCJkcmFnXCIsQj1cImRyb3BcIixMPVwiZHJhZ2VuZFwiLE89XCJkYXRhQm91bmRcIixIPVwiY2xpY2tcIixOPVwidmlzaWJpbGl0eVwiLFY9XCJ1bmRlZmluZWRcIixVPVwiay1zdGF0ZS1ob3ZlclwiLFc9XCJrLXRyZWV2aWV3XCIsaj1cIjp2aXNpYmxlXCIsRz1cIi5rLWl0ZW1cIixxPVwic3RyaW5nXCIsJD1cImFyaWEtc2VsZWN0ZWRcIixZPVwiYXJpYS1kaXNhYmxlZFwiLEs9e3RleHQ6XCJkYXRhVGV4dEZpZWxkXCIsdXJsOlwiZGF0YVVybEZpZWxkXCIsc3ByaXRlQ3NzQ2xhc3M6XCJkYXRhU3ByaXRlQ3NzQ2xhc3NGaWVsZFwiLGltYWdlVXJsOlwiZGF0YUltYWdlVXJsRmllbGRcIn0sUT1mdW5jdGlvbihlKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgSFRNTEVsZW1lbnQ/ZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50OmUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiYxPT09ZS5ub2RlVHlwZSYmdHlwZW9mIGUubm9kZU5hbWU9PT1xfTtkPW4oXCIuay1ncm91cFwiKSx1PW4oXCIuay1ncm91cCwuay1jb250ZW50XCIpLGg9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hpbGRyZW4oXCJkaXZcIikuY2hpbGRyZW4oXCIuay1pY29uXCIpfSxwPS9rLXNwcml0ZS8sYz1mLnVpLkRhdGFCb3VuZFdpZGdldC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcyxvPSExLGE9dCYmISF0LmRhdGFTb3VyY2U7eSh0KSYmKG49ITAsdD17ZGF0YVNvdXJjZTp0fSksdCYmdHlwZW9mIHQubG9hZE9uRGVtYW5kPT1WJiZ5KHQuZGF0YVNvdXJjZSkmJih0LmxvYWRPbkRlbWFuZD0hMSksdy5wcm90b3R5cGUuaW5pdC5jYWxsKHIsZSx0KSxlPXIuZWxlbWVudCx0PXIub3B0aW9ucyxpPWUuaXMoXCJ1bFwiKSYmZXx8ZS5oYXNDbGFzcyhXKSYmZS5jaGlsZHJlbihcInVsXCIpLG89IWEmJmkubGVuZ3RoLG8mJih0LmRhdGFTb3VyY2UubGlzdD1pKSxyLl9hbmltYXRpb24oKSxyLl9hY2Nlc3NvcnMoKSxyLl90ZW1wbGF0ZXMoKSxlLmhhc0NsYXNzKFcpPyhyLndyYXBwZXI9ZSxyLnJvb3Q9ZS5jaGlsZHJlbihcInVsXCIpLmVxKDApKTooci5fd3JhcHBlcigpLGkmJihyLnJvb3Q9ZSxyLl9ncm91cChyLndyYXBwZXIpKSksci5fdGFiaW5kZXgoKSxyLnJvb3QuYXR0cihcInJvbGVcIixcInRyZWVcIiksci5fZGF0YVNvdXJjZShvKSxyLl9hdHRhY2hFdmVudHMoKSxyLl9kcmFnZ2luZygpLG8/ci5fc3luY0h0bWxBbmREYXRhU291cmNlKCk6dC5hdXRvQmluZCYmKHIuX3Byb2dyZXNzKCEwKSxyLmRhdGFTb3VyY2UuZmV0Y2goKSksdC5jaGVja2JveGVzJiZ0LmNoZWNrYm94ZXMuY2hlY2tDaGlsZHJlbiYmci51cGRhdGVJbmRldGVybWluYXRlKCksci5lbGVtZW50WzBdLmlkJiYoci5fYXJpYUlkPWYuZm9ybWF0KFwiezB9X3R2X2FjdGl2ZVwiLHIuZWxlbWVudFswXS5pZCkpLGYubm90aWZ5KHIpfSxfYXR0YWNoRXZlbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPVwiLmstaW46bm90KC5rLXN0YXRlLXNlbGVjdGVkLC5rLXN0YXRlLWRpc2FibGVkKVwiLGk9XCJtb3VzZWVudGVyXCI7dC53cmFwcGVyLm9uKGkrQyxcIi5rLWluLmstc3RhdGUtc2VsZWN0ZWRcIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCl9KS5vbihpK0MsbixmdW5jdGlvbigpe2UodGhpcykuYWRkQ2xhc3MoVSl9KS5vbihcIm1vdXNlbGVhdmVcIitDLG4sZnVuY3Rpb24oKXtlKHRoaXMpLnJlbW92ZUNsYXNzKFUpfSkub24oSCtDLG4sayh0Ll9jbGljayx0KSkub24oXCJkYmxjbGlja1wiK0MsXCIuay1pbjpub3QoLmstc3RhdGUtZGlzYWJsZWQpXCIsayh0Ll90b2dnbGVCdXR0b25DbGljayx0KSkub24oSCtDLFwiLmstcGx1cywuay1taW51c1wiLGsodC5fdG9nZ2xlQnV0dG9uQ2xpY2ssdCkpLm9uKFwia2V5ZG93blwiK0Msayh0Ll9rZXlkb3duLHQpKS5vbihcImZvY3VzXCIrQyxrKHQuX2ZvY3VzLHQpKS5vbihcImJsdXJcIitDLGsodC5fYmx1cix0KSkub24oXCJtb3VzZWRvd25cIitDLFwiLmstaW4sLmstY2hlY2tib3ggOmNoZWNrYm94LC5rLXBsdXMsLmstbWludXNcIixrKHQuX21vdXNlZG93bix0KSkub24oXCJjaGFuZ2VcIitDLFwiLmstY2hlY2tib3ggOmNoZWNrYm94XCIsayh0Ll9jaGVja2JveENoYW5nZSx0KSkub24oXCJjbGlja1wiK0MsXCIuay1jaGVja2JveCA6Y2hlY2tib3hcIixrKHQuX2NoZWNrYm94Q2xpY2ssdCkpLm9uKFwiY2xpY2tcIitDLFwiLmstcmVxdWVzdC1yZXRyeVwiLGsodC5fcmV0cnlSZXF1ZXN0LHQpKS5vbihcImNsaWNrXCIrQyxmdW5jdGlvbihuKXtlKG4udGFyZ2V0KS5pcyhcIjprZW5kb0ZvY3VzYWJsZVwiKXx8dC5mb2N1cygpfSl9LF9jaGVja2JveENsaWNrOmZ1bmN0aW9uKHQpe3ZhciBuPWUodC50YXJnZXQpO24uZGF0YShJKSYmKG4uZGF0YShJLCExKS5wcm9wKEksITEpLnByb3AoUCwhMCksdGhpcy5fY2hlY2tib3hDaGFuZ2UodCkpfSxfc3luY0h0bWxBbmREYXRhU291cmNlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxvLGEscyxsLGMsZDtmb3IoZT1lfHx0aGlzLnJvb3QsdD10fHx0aGlzLmRhdGFTb3VyY2Usbj10LnZpZXcoKSxpPWYuYXR0cihcInVpZFwiKSxvPWYuYXR0cihcImV4cGFuZGVkXCIpLGE9dGhpcy5vcHRpb25zLmNoZWNrYm94ZXMscz1lLmNoaWxkcmVuKFwibGlcIiksbD0wO3MubGVuZ3RoPmw7bCsrKWQ9bltsXSxjPXMuZXEobCksYy5hdHRyKFwicm9sZVwiLFwidHJlZWl0ZW1cIikuYXR0cihpLGQudWlkKSxkLmV4cGFuZGVkPVwidHJ1ZVwiPT09Yy5hdHRyKG8pLGEmJihkLmNoZWNrZWQ9cihjKS5wcm9wKFApKSx0aGlzLl9zeW5jSHRtbEFuZERhdGFTb3VyY2UoYy5jaGlsZHJlbihcInVsXCIpLGQuY2hpbGRyZW4pfSxfYW5pbWF0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLHQ9ZS5hbmltYXRpb247dD09PSExP3Q9e2V4cGFuZDp7ZWZmZWN0czp7fX0sY29sbGFwc2U6e2hpZGU6ITAsZWZmZWN0czp7fX19OnQuY29sbGFwc2UmJlwiZWZmZWN0c1wiaW4gdC5jb2xsYXBzZXx8KHQuY29sbGFwc2U9dih7cmV2ZXJzZTohMH0sdC5leHBhbmQpKSx2KHQuY29sbGFwc2Use2hpZGU6ITB9KSxlLmFuaW1hdGlvbj10fSxfZHJhZ2dpbmc6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMuZHJhZ0FuZERyb3AsdD10aGlzLmRyYWdnaW5nO2UmJiF0P3RoaXMuZHJhZ2dpbmc9bmV3IGwodGhpcyk6IWUmJnQmJih0LmRlc3Ryb3koKSx0aGlzLmRyYWdnaW5nPW51bGwpfSxfdGVtcGxhdGVzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUub3B0aW9ucyxuPWsoZS5fZmllbGRBY2Nlc3NvcixlKTt0LnRlbXBsYXRlJiZ0eXBlb2YgdC50ZW1wbGF0ZT09cT90LnRlbXBsYXRlPV8odC50ZW1wbGF0ZSk6dC50ZW1wbGF0ZXx8KHQudGVtcGxhdGU9aShcIiMgdmFyIHRleHQgPSBcIituKFwidGV4dFwiKStcIihkYXRhLml0ZW0pOyAjIyBpZiAodHlwZW9mIGRhdGEuaXRlbS5lbmNvZGVkICE9ICd1bmRlZmluZWQnICYmIGRhdGEuaXRlbS5lbmNvZGVkID09PSBmYWxzZSkgeyMjPSB0ZXh0ICMjIH0gZWxzZSB7ICMjOiB0ZXh0ICMjIH0gI1wiKSksZS5fY2hlY2tib3hlcygpLGUudGVtcGxhdGVzPXt3cmFwcGVyQ3NzQ2xhc3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj1cImstaXRlbVwiLGk9dC5pbmRleDtyZXR1cm4gZS5maXJzdExldmVsJiYwPT09aSYmKG4rPVwiIGstZmlyc3RcIiksaT09ZS5sZW5ndGgtMSYmKG4rPVwiIGstbGFzdFwiKSxufSxjc3NDbGFzczpmdW5jdGlvbihlLHQpe3ZhciBuPVwiXCIsaT10LmluZGV4LHI9ZS5sZW5ndGgtMTtyZXR1cm4gZS5maXJzdExldmVsJiYwPT09aSYmKG4rPVwiay10b3AgXCIpLG4rPTA9PT1pJiZpIT1yP1wiay10b3BcIjppPT1yP1wiay1ib3RcIjpcImstbWlkXCJ9LHRleHRDbGFzczpmdW5jdGlvbihlKXt2YXIgdD1cImstaW5cIjtyZXR1cm4gZS5lbmFibGVkPT09ITEmJih0Kz1cIiBrLXN0YXRlLWRpc2FibGVkXCIpLGUuc2VsZWN0ZWQ9PT0hMCYmKHQrPVwiIGstc3RhdGUtc2VsZWN0ZWRcIiksdH0sdG9nZ2xlQnV0dG9uQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJrLWljb25cIjtyZXR1cm4gdCs9ZS5leHBhbmRlZCE9PSEwP1wiIGstcGx1c1wiOlwiIGstbWludXNcIixlLmVuYWJsZWQ9PT0hMSYmKHQrPVwiLWRpc2FibGVkXCIpLHR9LGdyb3VwQXR0cmlidXRlczpmdW5jdGlvbihlKXt2YXIgdD1cIlwiO3JldHVybiBlLmZpcnN0TGV2ZWx8fCh0PVwicm9sZT0nZ3JvdXAnXCIpLHQrKGUuZXhwYW5kZWQhPT0hMD9cIiBzdHlsZT0nZGlzcGxheTpub25lJ1wiOlwiXCIpfSxncm91cENzc0NsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0PVwiay1ncm91cFwiO3JldHVybiBlLmZpcnN0TGV2ZWwmJih0Kz1cIiBrLXRyZWV2aWV3LWxpbmVzXCIpLHR9LGRyYWdDbHVlOmkoXCI8ZGl2IGNsYXNzPSdrLWhlYWRlciBrLWRyYWctY2x1ZSc+PHNwYW4gY2xhc3M9J2staWNvbiBrLWRyYWctc3RhdHVzJyAvPiM9IGRhdGEudHJlZXZpZXcudGVtcGxhdGUoZGF0YSkgIzwvZGl2PlwiKSxncm91cDppKFwiPHVsIGNsYXNzPScjPSBkYXRhLnIuZ3JvdXBDc3NDbGFzcyhkYXRhLmdyb3VwKSAjJyM9IGRhdGEuci5ncm91cEF0dHJpYnV0ZXMoZGF0YS5ncm91cCkgIz4jPSBkYXRhLnJlbmRlckl0ZW1zKGRhdGEpICM8L3VsPlwiKSxpdGVtQ29udGVudDppKFwiIyB2YXIgaW1hZ2VVcmwgPSBcIituKFwiaW1hZ2VVcmxcIikrXCIoZGF0YS5pdGVtKTsgIyMgdmFyIHNwcml0ZUNzc0NsYXNzID0gXCIrbihcInNwcml0ZUNzc0NsYXNzXCIpK1wiKGRhdGEuaXRlbSk7ICMjIGlmIChpbWFnZVVybCkgeyAjPGltZyBjbGFzcz0nay1pbWFnZScgYWx0PScnIHNyYz0nIz0gaW1hZ2VVcmwgIyc+IyB9ICMjIGlmIChzcHJpdGVDc3NDbGFzcykgeyAjPHNwYW4gY2xhc3M9J2stc3ByaXRlICM9IHNwcml0ZUNzc0NsYXNzICMnIC8+IyB9ICMjPSBkYXRhLnRyZWV2aWV3LnRlbXBsYXRlKGRhdGEpICNcIiksaXRlbUVsZW1lbnQ6aShcIiMgdmFyIGl0ZW0gPSBkYXRhLml0ZW0sIHIgPSBkYXRhLnI7ICMjIHZhciB1cmwgPSBcIituKFwidXJsXCIpK1wiKGl0ZW0pOyAjPGRpdiBjbGFzcz0nIz0gci5jc3NDbGFzcyhkYXRhLmdyb3VwLCBpdGVtKSAjJz4jIGlmIChpdGVtLmhhc0NoaWxkcmVuKSB7ICM8c3BhbiBjbGFzcz0nIz0gci50b2dnbGVCdXR0b25DbGFzcyhpdGVtKSAjJyByb2xlPSdwcmVzZW50YXRpb24nIC8+IyB9ICMjIGlmIChkYXRhLnRyZWV2aWV3LmNoZWNrYm94ZXMpIHsgIzxzcGFuIGNsYXNzPSdrLWNoZWNrYm94JyByb2xlPSdwcmVzZW50YXRpb24nPiM9IGRhdGEudHJlZXZpZXcuY2hlY2tib3hlcy50ZW1wbGF0ZShkYXRhKSAjPC9zcGFuPiMgfSAjIyB2YXIgdGFnID0gdXJsID8gJ2EnIDogJ3NwYW4nOyAjIyB2YXIgdGV4dEF0dHIgPSB1cmwgPyAnIGhyZWY9XFxcXCcnICsgdXJsICsgJ1xcXFwnJyA6ICcnOyAjPCM9dGFnIyAgY2xhc3M9JyM9IHIudGV4dENsYXNzKGl0ZW0pICMnIz0gdGV4dEF0dHIgIz4jPSByLml0ZW1Db250ZW50KGRhdGEpICM8LyM9dGFnIz48L2Rpdj5cIiksaXRlbTppKFwiIyB2YXIgaXRlbSA9IGRhdGEuaXRlbSwgciA9IGRhdGEucjsgIzxsaSByb2xlPSd0cmVlaXRlbScgY2xhc3M9JyM9IHIud3JhcHBlckNzc0NsYXNzKGRhdGEuZ3JvdXAsIGl0ZW0pICMnIFwiK2YuYXR0cihcInVpZFwiKStcIj0nIz0gaXRlbS51aWQgIycgYXJpYS1zZWxlY3RlZD0nIz0gaXRlbS5zZWxlY3RlZCA/IFxcXCJ0cnVlXFxcIiA6IFxcXCJmYWxzZSBcXFwiICMnICM9aXRlbS5lbmFibGVkID09PSBmYWxzZSA/IFxcXCJhcmlhLWRpc2FibGVkPSd0cnVlJ1xcXCIgOiAnJyM+Iz0gci5pdGVtRWxlbWVudChkYXRhKSAjPC9saT5cIiksbG9hZGluZzppKFwiPGRpdiBjbGFzcz0nay1pY29uIGstbG9hZGluZycgLz4gIzogZGF0YS5tZXNzYWdlcy5sb2FkaW5nICNcIikscmV0cnk6aShcIiM6IGRhdGEubWVzc2FnZXMucmVxdWVzdEZhaWxlZCAjIDxidXR0b24gY2xhc3M9J2stYnV0dG9uIGstcmVxdWVzdC1yZXRyeSc+IzogZGF0YS5tZXNzYWdlcy5yZXRyeSAjPC9idXR0b24+XCIpfX0saXRlbXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50LmZpbmQoXCIuay1pdGVtIGRpdjpmaXJzdC1jaGlsZFwiKX0sc2V0RGF0YVNvdXJjZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnM7dC5kYXRhU291cmNlPWUsdGhpcy5fZGF0YVNvdXJjZSgpLHRoaXMuZGF0YVNvdXJjZS5mZXRjaCgpLHQuY2hlY2tib3hlcyYmdC5jaGVja2JveGVzLmNoZWNrQ2hpbGRyZW4mJnRoaXMudXBkYXRlSW5kZXRlcm1pbmF0ZSgpfSxfYmluZERhdGFTb3VyY2U6ZnVuY3Rpb24oKXt0aGlzLl9yZWZyZXNoSGFuZGxlcj1rKHRoaXMucmVmcmVzaCx0aGlzKSx0aGlzLl9lcnJvckhhbmRsZXI9ayh0aGlzLl9lcnJvcix0aGlzKSx0aGlzLmRhdGFTb3VyY2UuYmluZChFLHRoaXMuX3JlZnJlc2hIYW5kbGVyKSx0aGlzLmRhdGFTb3VyY2UuYmluZChNLHRoaXMuX2Vycm9ySGFuZGxlcil9LF91bmJpbmREYXRhU291cmNlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kYXRhU291cmNlO2UmJihlLnVuYmluZChFLHRoaXMuX3JlZnJlc2hIYW5kbGVyKSxlLnVuYmluZChNLHRoaXMuX2Vycm9ySGFuZGxlcikpfSxfZGF0YVNvdXJjZTpmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe2Zvcih2YXIgbj0wO2UubGVuZ3RoPm47bisrKWVbbl0uX2luaXRDaGlsZHJlbigpLGVbbl0uY2hpbGRyZW4uZmV0Y2goKSx0KGVbbl0uY2hpbGRyZW4udmlldygpKX12YXIgbj10aGlzLGk9bi5vcHRpb25zLHI9aS5kYXRhU291cmNlO3I9eShyKT97ZGF0YTpyfTpyLG4uX3VuYmluZERhdGFTb3VyY2UoKSxyLmZpZWxkc3x8KHIuZmllbGRzPVt7ZmllbGQ6XCJ0ZXh0XCJ9LHtmaWVsZDpcInVybFwifSx7ZmllbGQ6XCJzcHJpdGVDc3NDbGFzc1wifSx7ZmllbGQ6XCJpbWFnZVVybFwifV0pLG4uZGF0YVNvdXJjZT1yPWIuY3JlYXRlKHIpLGUmJihyLmZldGNoKCksdChyLnZpZXcoKSkpLG4uX2JpbmREYXRhU291cmNlKCl9LGV2ZW50czpbRixSLEIsTCxPLEEseixTLEUsRCxUXSxvcHRpb25zOntuYW1lOlwiVHJlZVZpZXdcIixkYXRhU291cmNlOnt9LGFuaW1hdGlvbjp7ZXhwYW5kOntlZmZlY3RzOlwiZXhwYW5kOnZlcnRpY2FsXCIsZHVyYXRpb246MjAwfSxjb2xsYXBzZTp7ZHVyYXRpb246MTAwfX0sbWVzc2FnZXM6e2xvYWRpbmc6XCJMb2FkaW5nLi4uXCIscmVxdWVzdEZhaWxlZDpcIlJlcXVlc3QgZmFpbGVkLlwiLHJldHJ5OlwiUmV0cnlcIn0sZHJhZ0FuZERyb3A6ITEsY2hlY2tib3hlczohMSxhdXRvQmluZDohMCxsb2FkT25EZW1hbmQ6ITAsdGVtcGxhdGU6XCJcIixkYXRhVGV4dEZpZWxkOm51bGx9LF9hY2Nlc3NvcnM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT10aGlzLHI9aS5vcHRpb25zLG89aS5lbGVtZW50O2ZvcihlIGluIEspdD1yW0tbZV1dLG49by5hdHRyKGYuYXR0cihlK1wiLWZpZWxkXCIpKSwhdCYmbiYmKHQ9biksdHx8KHQ9ZSkseSh0KXx8KHQ9W3RdKSxyW0tbZV1dPXR9LF9maWVsZEFjY2Vzc29yOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMub3B0aW9uc1tLW3RdXSxpPW4ubGVuZ3RoLHI9XCIoZnVuY3Rpb24oaXRlbSkge1wiO3JldHVybiAwPT09aT9yKz1cInJldHVybiBpdGVtWydcIit0K1wiJ107XCI6KHIrPVwidmFyIGxldmVscyA9IFtcIitlLm1hcChuLGZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb24oZCl7IHJldHVybiBcIitmLmV4cHIoZSkrXCJ9XCJ9KS5qb2luKFwiLFwiKStcIl07XCIscis9XCJyZXR1cm4gbGV2ZWxzW01hdGgubWluKGl0ZW0ubGV2ZWwoKSwgXCIraStcIi0xKV0oaXRlbSlcIikscis9XCJ9KVwifSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe3cuZm4uc2V0T3B0aW9ucy5jYWxsKHRoaXMsZSksdGhpcy5fYW5pbWF0aW9uKCksdGhpcy5fZHJhZ2dpbmcoKSx0aGlzLl90ZW1wbGF0ZXMoKX0sX3RyaWdnZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy50cmlnZ2VyKGUse25vZGU6dC5jbG9zZXN0KEcpWzBdfSl9LF9zZXRDaGVja2VkOmZ1bmN0aW9uKHQsbil7aWYodCYmZS5pc0Z1bmN0aW9uKHQudmlldykpZm9yKHZhciBpPTAscj10LnZpZXcoKTtyLmxlbmd0aD5pO2krKylyW2ldW1BdPW4scltpXS5jaGlsZHJlbiYmdGhpcy5fc2V0Q2hlY2tlZChyW2ldLmNoaWxkcmVuLG4pfSxfc2V0SW5kZXRlcm1pbmF0ZTpmdW5jdGlvbihlKXt2YXIgdCxuLGksbz1kKGUpLGE9ITA7aWYoby5sZW5ndGgmJih0PXIoby5jaGlsZHJlbigpKSxuPXQubGVuZ3RoKSl7aWYobj4xKXtmb3IoaT0xO24+aTtpKyspaWYodFtpXS5jaGVja2VkIT10W2ktMV0uY2hlY2tlZHx8dFtpXS5pbmRldGVybWluYXRlfHx0W2ktMV0uaW5kZXRlcm1pbmF0ZSl7YT0hMTtcbmJyZWFrfX1lbHNlIGE9IXRbMF0uaW5kZXRlcm1pbmF0ZTtyZXR1cm4gcihlKS5kYXRhKEksIWEpLnByb3AoSSwhYSkucHJvcChQLGEmJnRbMF0uY2hlY2tlZCl9fSx1cGRhdGVJbmRldGVybWluYXRlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saTtpZihlPWV8fHRoaXMud3JhcHBlcix0PWQoZSkuY2hpbGRyZW4oKSx0Lmxlbmd0aCl7Zm9yKG49MDt0Lmxlbmd0aD5uO24rKyl0aGlzLnVwZGF0ZUluZGV0ZXJtaW5hdGUodC5lcShuKSk7aT10aGlzLl9zZXRJbmRldGVybWluYXRlKGUpLGkmJmkucHJvcChQKSYmKHRoaXMuZGF0YUl0ZW0oZSkuY2hlY2tlZD0hMCl9fSxfYnViYmxlSW5kZXRlcm1pbmF0ZTpmdW5jdGlvbihlKXtpZihlLmxlbmd0aCl7dmFyIHQsbj10aGlzLnBhcmVudChlKTtuLmxlbmd0aCYmKHRoaXMuX3NldEluZGV0ZXJtaW5hdGUobiksdD1uLmNoaWxkcmVuKFwiZGl2XCIpLmZpbmQoXCIuay1jaGVja2JveCA6Y2hlY2tib3hcIiksdC5wcm9wKEkpPT09ITE/dGhpcy5kYXRhSXRlbShuKS5zZXQoUCx0LnByb3AoUCkpOnRoaXMuZGF0YUl0ZW0obikuY2hlY2tlZD0hMSx0aGlzLl9idWJibGVJbmRldGVybWluYXRlKG4pKX19LF9jaGVja2JveENoYW5nZTpmdW5jdGlvbih0KXt2YXIgbj1lKHQudGFyZ2V0KSxpPW4ucHJvcChQKSxyPW4uY2xvc2VzdChHKTt0aGlzLmRhdGFJdGVtKHIpLnNldChQLGkpLHRoaXMuX3RyaWdnZXIoVCxyKX0sX3RvZ2dsZUJ1dHRvbkNsaWNrOmZ1bmN0aW9uKHQpe3RoaXMudG9nZ2xlKGUodC50YXJnZXQpLmNsb3Nlc3QoRykpfSxfbW91c2Vkb3duOmZ1bmN0aW9uKHQpe3ZhciBuPWUodC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KEcpO3RoaXMuX2NsaWNrVGFyZ2V0PW4sdGhpcy5jdXJyZW50KG4pfSxfZm9jdXNhYmxlOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLmxlbmd0aCYmZS5pcyhcIjp2aXNpYmxlXCIpJiYhZS5maW5kKFwiLmstaW46Zmlyc3RcIikuaGFzQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIpfSxfZm9jdXM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnNlbGVjdCgpLG49dGhpcy5fY2xpY2tUYXJnZXQ7Zi5zdXBwb3J0LnRvdWNofHwobiYmbi5sZW5ndGgmJih0PW4pLHRoaXMuX2ZvY3VzYWJsZSh0KXx8KHQ9dGhpcy5jdXJyZW50KCkpLHRoaXMuX2ZvY3VzYWJsZSh0KXx8KHQ9dGhpcy5fbmV4dFZpc2libGUoZSgpKSksdGhpcy5jdXJyZW50KHQpKX0sZm9jdXM6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMud3JhcHBlcixuPXRbMF0saT1bXSxyPVtdLG89ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2RvIG49bi5wYXJlbnROb2RlLG4uc2Nyb2xsSGVpZ2h0Pm4uY2xpZW50SGVpZ2h0JiYoaS5wdXNoKG4pLHIucHVzaChuLnNjcm9sbFRvcCkpO3doaWxlKG4hPW8pO2Zvcih0LmZvY3VzKCksZT0wO2kubGVuZ3RoPmU7ZSsrKWlbZV0uc2Nyb2xsVG9wPXJbZV19LF9ibHVyOmZ1bmN0aW9uKCl7dGhpcy5jdXJyZW50KCkuZmluZChcIi5rLWluOmZpcnN0XCIpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1mb2N1c2VkXCIpfSxfZW5hYmxlZDpmdW5jdGlvbihlKXtyZXR1cm4hZS5jaGlsZHJlbihcImRpdlwiKS5jaGlsZHJlbihcIi5rLWluXCIpLmhhc0NsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKX0scGFyZW50OmZ1bmN0aW9uKHQpe3ZhciBuLGkscj0vXFxiay10cmVldmlld1xcYi8sbz0vXFxiay1pdGVtXFxiLzt0eXBlb2YgdD09cSYmKHQ9dGhpcy5lbGVtZW50LmZpbmQodCkpLFEodCl8fCh0PXRbMF0pLGk9by50ZXN0KHQuY2xhc3NOYW1lKTtkbyB0PXQucGFyZW50Tm9kZSxvLnRlc3QodC5jbGFzc05hbWUpJiYoaT9uPXQ6aT0hMCk7d2hpbGUoIXIudGVzdCh0LmNsYXNzTmFtZSkmJiFuKTtyZXR1cm4gZShuKX0sX25leHRWaXNpYmxlOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7Zm9yKDtlLmxlbmd0aCYmIWUubmV4dCgpLmxlbmd0aDspZT1pLnBhcmVudChlKTtyZXR1cm4gZS5uZXh0KCkubGVuZ3RoP2UubmV4dCgpOmV9dmFyIG4saT10aGlzLHI9aS5fZXhwYW5kZWQoZSk7cmV0dXJuIGUubGVuZ3RoJiZlLmlzKFwiOnZpc2libGVcIik/cj8obj1kKGUpLmNoaWxkcmVuKCkuZmlyc3QoKSxuLmxlbmd0aHx8KG49dChlKSkpOm49dChlKTpuPWkucm9vdC5jaGlsZHJlbigpLmVxKDApLGkuX2VuYWJsZWQobil8fChuPWkuX25leHRWaXNpYmxlKG4pKSxufSxfcHJldmlvdXNWaXNpYmxlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzO2lmKCFlLmxlbmd0aHx8ZS5wcmV2KCkubGVuZ3RoKWZvcihuPWUubGVuZ3RoP2UucHJldigpOmkucm9vdC5jaGlsZHJlbigpLmxhc3QoKTtpLl9leHBhbmRlZChuKSYmKHQ9ZChuKS5jaGlsZHJlbigpLmxhc3QoKSx0Lmxlbmd0aCk7KW49dDtlbHNlIG49aS5wYXJlbnQoZSl8fGU7cmV0dXJuIGkuX2VuYWJsZWQobil8fChuPWkuX3ByZXZpb3VzVmlzaWJsZShuKSksbn0sX2tleWRvd246ZnVuY3Rpb24obil7dmFyIGkscj10aGlzLG89bi5rZXlDb2RlLGE9ci5jdXJyZW50KCkscz1yLl9leHBhbmRlZChhKSxsPWEuZmluZChcIi5rLWNoZWNrYm94OmZpcnN0IDpjaGVja2JveFwiKSxjPWYuc3VwcG9ydC5pc1J0bChyLmVsZW1lbnQpO24udGFyZ2V0PT1uLmN1cnJlbnRUYXJnZXQmJighYyYmbz09eC5SSUdIVHx8YyYmbz09eC5MRUZUP3M/aT1yLl9uZXh0VmlzaWJsZShhKTpyLmV4cGFuZChhKTohYyYmbz09eC5MRUZUfHxjJiZvPT14LlJJR0hUP3M/ci5jb2xsYXBzZShhKTooaT1yLnBhcmVudChhKSxyLl9lbmFibGVkKGkpfHwoaT10KSk6bz09eC5ET1dOP2k9ci5fbmV4dFZpc2libGUoYSk6bz09eC5VUD9pPXIuX3ByZXZpb3VzVmlzaWJsZShhKTpvPT14LkhPTUU/aT1yLl9uZXh0VmlzaWJsZShlKCkpOm89PXguRU5EP2k9ci5fcHJldmlvdXNWaXNpYmxlKGUoKSk6bz09eC5FTlRFUj9hLmZpbmQoXCIuay1pbjpmaXJzdFwiKS5oYXNDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIil8fHIuX3RyaWdnZXIoUyxhKXx8ci5zZWxlY3QoYSk6bz09eC5TUEFDRUJBUiYmbC5sZW5ndGgmJihsLnByb3AoUCwhbC5wcm9wKFApKS5kYXRhKEksITEpLnByb3AoSSwhMSksci5fY2hlY2tib3hDaGFuZ2Uoe3RhcmdldDpsfSksaT1hKSxpJiYobi5wcmV2ZW50RGVmYXVsdCgpLGFbMF0hPWlbMF0mJihyLl90cmlnZ2VyKEQsaSksci5jdXJyZW50KGkpKSkpfSxfY2xpY2s6ZnVuY3Rpb24odCl7dmFyIG4saT10aGlzLHI9ZSh0LmN1cnJlbnRUYXJnZXQpLG89dShyLmNsb3Nlc3QoRykpLGE9ci5hdHRyKFwiaHJlZlwiKTtuPWE/XCIjXCI9PWF8fGEuaW5kZXhPZihcIiNcIit0aGlzLmVsZW1lbnQuaWQrXCItXCIpPj0wOm8ubGVuZ3RoJiYhby5jaGlsZHJlbigpLmxlbmd0aCxuJiZ0LnByZXZlbnREZWZhdWx0KCksci5oYXNDbGFzcyhcIi5rLXN0YXRlLXNlbGVjdGVkXCIpfHxpLl90cmlnZ2VyKFMscil8fGkuc2VsZWN0KHIpfSxfd3JhcHBlcjpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLGk9bi5lbGVtZW50LHI9XCJrLXdpZGdldCBrLXRyZWV2aWV3XCI7aS5pcyhcInVsXCIpPyhlPWkud3JhcChcIjxkaXYgLz5cIikucGFyZW50KCksdD1pKTooZT1pLHQ9ZS5jaGlsZHJlbihcInVsXCIpLmVxKDApKSxuLndyYXBwZXI9ZS5hZGRDbGFzcyhyKSxuLnJvb3Q9dH0sX2dyb3VwOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmhhc0NsYXNzKFcpLGk9e2ZpcnN0TGV2ZWw6bixleHBhbmRlZDpufHx0Ll9leHBhbmRlZChlKX0scj1lLmNoaWxkcmVuKFwidWxcIik7ci5hZGRDbGFzcyh0LnRlbXBsYXRlcy5ncm91cENzc0NsYXNzKGkpKS5jc3MoXCJkaXNwbGF5XCIsaS5leHBhbmRlZD9cIlwiOlwibm9uZVwiKSx0Ll9ub2RlcyhyLGkpfSxfbm9kZXM6ZnVuY3Rpb24odCxuKXt2YXIgaSxyPXRoaXMsbz10LmNoaWxkcmVuKFwibGlcIik7bj12KHtsZW5ndGg6by5sZW5ndGh9LG4pLG8uZWFjaChmdW5jdGlvbih0LG8pe289ZShvKSxpPXtpbmRleDp0LGV4cGFuZGVkOnIuX2V4cGFuZGVkKG8pfSxzKG8pLHIuX3VwZGF0ZU5vZGVDbGFzc2VzKG8sbixpKSxyLl9ncm91cChvKX0pfSxfY2hlY2tib3hlczpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5vcHRpb25zLG49dC5jaGVja2JveGVzO24mJihlPVwiPGlucHV0IHR5cGU9J2NoZWNrYm94JyAjPSAoaXRlbS5lbmFibGVkID09PSBmYWxzZSkgPyAnZGlzYWJsZWQnIDogJycgIyAjPSBpdGVtLmNoZWNrZWQgPyAnY2hlY2tlZCcgOiAnJyAjXCIsbi5uYW1lJiYoZSs9XCIgbmFtZT0nXCIrbi5uYW1lK1wiJ1wiKSxlKz1cIiAvPlwiLG49dih7dGVtcGxhdGU6ZX0sdC5jaGVja2JveGVzKSx0eXBlb2Ygbi50ZW1wbGF0ZT09cSYmKG4udGVtcGxhdGU9XyhuLnRlbXBsYXRlKSksdC5jaGVja2JveGVzPW4pfSxfdXBkYXRlTm9kZUNsYXNzZXM6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPWUuY2hpbGRyZW4oXCJkaXZcIikscj1lLmNoaWxkcmVuKFwidWxcIiksbz10aGlzLnRlbXBsYXRlcztlLmhhc0NsYXNzKFwiay10cmVldmlld1wiKXx8KG49bnx8e30sbi5leHBhbmRlZD10eXBlb2Ygbi5leHBhbmRlZCE9Vj9uLmV4cGFuZGVkOnRoaXMuX2V4cGFuZGVkKGUpLG4uaW5kZXg9dHlwZW9mIG4uaW5kZXghPVY/bi5pbmRleDplLmluZGV4KCksbi5lbmFibGVkPXR5cGVvZiBuLmVuYWJsZWQhPVY/bi5lbmFibGVkOiFpLmNoaWxkcmVuKFwiLmstaW5cIikuaGFzQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIpLHQ9dHx8e30sdC5maXJzdExldmVsPXR5cGVvZiB0LmZpcnN0TGV2ZWwhPVY/dC5maXJzdExldmVsOmUucGFyZW50KCkucGFyZW50KCkuaGFzQ2xhc3MoVyksdC5sZW5ndGg9dHlwZW9mIHQubGVuZ3RoIT1WP3QubGVuZ3RoOmUucGFyZW50KCkuY2hpbGRyZW4oKS5sZW5ndGgsZS5yZW1vdmVDbGFzcyhcImstZmlyc3Qgay1sYXN0XCIpLmFkZENsYXNzKG8ud3JhcHBlckNzc0NsYXNzKHQsbikpLGkucmVtb3ZlQ2xhc3MoXCJrLXRvcCBrLW1pZCBrLWJvdFwiKS5hZGRDbGFzcyhvLmNzc0NsYXNzKHQsbikpLGkuY2hpbGRyZW4oXCIuay1pblwiKS5yZW1vdmVDbGFzcyhcImstaW4gay1zdGF0ZS1kZWZhdWx0IGstc3RhdGUtZGlzYWJsZWRcIikuYWRkQ2xhc3Moby50ZXh0Q2xhc3MobikpLChyLmxlbmd0aHx8XCJ0cnVlXCI9PWUuYXR0cihcImRhdGEtaGFzQ2hpbGRyZW5cIikpJiYoaS5jaGlsZHJlbihcIi5rLWljb25cIikucmVtb3ZlQ2xhc3MoXCJrLXBsdXMgay1taW51cyBrLXBsdXMtZGlzYWJsZWQgay1taW51cy1kaXNhYmxlZFwiKS5hZGRDbGFzcyhvLnRvZ2dsZUJ1dHRvbkNsYXNzKG4pKSxyLmFkZENsYXNzKFwiay1ncm91cFwiKSkpfSxfcHJvY2Vzc05vZGVzOmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpcztpLmVsZW1lbnQuZmluZCh0KS5lYWNoKGZ1bmN0aW9uKHQscil7bi5jYWxsKGksdCxlKHIpLmNsb3Nlc3QoRykpfSl9LGRhdGFJdGVtOmZ1bmN0aW9uKHQpe3ZhciBuPWUodCkuY2xvc2VzdChHKS5hdHRyKGYuYXR0cihcInVpZFwiKSksaT10aGlzLmRhdGFTb3VyY2U7cmV0dXJuIGkmJmkuZ2V0QnlVaWQobil9LF9pbnNlcnROb2RlOmZ1bmN0aW9uKHQsbixpLHIsbyl7dmFyIGEsbCxjLHUsaD10aGlzLHA9ZChpKSxmPXAuY2hpbGRyZW4oKS5sZW5ndGgrMSxnPXtmaXJzdExldmVsOmkuaGFzQ2xhc3MoVyksZXhwYW5kZWQ6IW8sbGVuZ3RoOmZ9LG09XCJcIix2PWZ1bmN0aW9uKGUsdCl7ZS5hcHBlbmRUbyh0KX07Zm9yKGM9MDt0Lmxlbmd0aD5jO2MrKyl1PXRbY10sdS5pbmRleD1uK2MsbSs9aC5fcmVuZGVySXRlbSh7Z3JvdXA6ZyxpdGVtOnV9KTtpZihsPWUobSksbC5sZW5ndGgpe2ZvcihoLmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6bC5nZXQoKSxkYXRhOnQubWFwKGZ1bmN0aW9uKGUpe3JldHVybntkYXRhSXRlbTplfX0pfX0pLHAubGVuZ3RofHwocD1lKGguX3JlbmRlckdyb3VwKHtncm91cDpnfSkpLmFwcGVuZFRvKGkpKSxyKGwscCksaS5oYXNDbGFzcyhcImstaXRlbVwiKSYmKHMoaSksaC5fdXBkYXRlTm9kZUNsYXNzZXMoaSkpLGguX3VwZGF0ZU5vZGVDbGFzc2VzKGwucHJldigpLmZpcnN0KCkpLGguX3VwZGF0ZU5vZGVDbGFzc2VzKGwubmV4dCgpLmxhc3QoKSksYz0wO3QubGVuZ3RoPmM7YysrKXU9dFtjXSx1Lmhhc0NoaWxkcmVuJiYoYT11LmNoaWxkcmVuLmRhdGEoKSxhLmxlbmd0aCYmaC5faW5zZXJ0Tm9kZShhLHUuaW5kZXgsbC5lcShjKSx2LCFoLl9leHBhbmRlZChsLmVxKGMpKSkpO3JldHVybiBsfX0sX3VwZGF0ZU5vZGU6ZnVuY3Rpb24odCxuKXtmdW5jdGlvbiBpKCl7cD0hMH1mdW5jdGlvbiByKGUsdCl7ZS5maW5kKFwiLmstY2hlY2tib3ggOmNoZWNrYm94XCIpLnByb3AoUCx0KS5kYXRhKEksITEpLnByb3AoSSwhMSl9dmFyIG8sYSxzLGwsYyxkPXRoaXMsaD17dHJlZXZpZXc6ZC5vcHRpb25zLGl0ZW06c30scD0hMTtpZihcInNlbGVjdGVkXCI9PXQpcz1uWzBdLGE9ZC5maW5kQnlVaWQocy51aWQpLmZpbmQoXCIuay1pbjpmaXJzdFwiKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtaG92ZXJcIikudG9nZ2xlQ2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIsc1t0XSkuZW5kKCksc1t0XT8oZC5jdXJyZW50KGEpLGEuYXR0cigkLCEwKSk6YS5hdHRyKCQsITEpO2Vsc2UgZm9yKGUuaW5BcnJheSh0LGQub3B0aW9ucy5kYXRhVGV4dEZpZWxkKT49MD9wPSEwOihoLml0ZW09blswXSxoLml0ZW0uYmluZChcImdldFwiLGkpLGQudGVtcGxhdGVzLml0ZW1Db250ZW50KGgpLGguaXRlbS51bmJpbmQoXCJzZXRcIixpKSksbz0wO24ubGVuZ3RoPm87bysrKWguaXRlbT1zPW5bb10sKFwic3ByaXRlQ3NzQ2xhc3NcIj09dHx8XCJpbWFnZVVybFwiPT10fHxwKSYmZC5maW5kQnlVaWQocy51aWQpLmZpbmQoXCI+ZGl2Pi5rLWluXCIpLmh0bWwoZC50ZW1wbGF0ZXMuaXRlbUNvbnRlbnQoaCkpLHQ9PVA/KGE9ZC5maW5kQnlVaWQocy51aWQpLGw9c1t0XSxyKGEuY2hpbGRyZW4oXCJkaXZcIiksbCksZC5vcHRpb25zLmNoZWNrYm94ZXMuY2hlY2tDaGlsZHJlbiYmKHIoYS5jaGlsZHJlbihcIi5rLWdyb3VwXCIpLGwpLGQuX3NldENoZWNrZWQocy5jaGlsZHJlbixsKSxkLl9idWJibGVJbmRldGVybWluYXRlKGEpKSk6XCJleHBhbmRlZFwiPT10P2QuX3RvZ2dsZShkLmZpbmRCeVVpZChzLnVpZCkscyxzW3RdKTpcImVuYWJsZWRcIj09dCYmKGE9ZC5maW5kQnlVaWQocy51aWQpLGEuZmluZChcIi5rLWNoZWNrYm94IDpjaGVja2JveFwiKS5wcm9wKFwiZGlzYWJsZWRcIiwhc1t0XSksYz0hdShhKS5pcyhqKSxhLnJlbW92ZUF0dHIoWSksc1t0XXx8KHMuc2VsZWN0ZWQmJnMuc2V0KFwic2VsZWN0ZWRcIiwhMSkscy5leHBhbmRlZCYmcy5zZXQoXCJleHBhbmRlZFwiLCExKSxjPSEwLGEuYXR0cigkLCExKS5hdHRyKFksITApKSxkLl91cGRhdGVOb2RlQ2xhc3NlcyhhLHt9LHtlbmFibGVkOnNbdF0sZXhwYW5kZWQ6IWN9KSl9LF9hcHBlbmRJdGVtczpmdW5jdGlvbihlLHQsbil7dmFyIGk9ZChuKSxyPWkuY2hpbGRyZW4oKSxvPSF0aGlzLl9leHBhbmRlZChuKTt0eXBlb2YgZT09ViYmKGU9ci5sZW5ndGgpLHRoaXMuX2luc2VydE5vZGUodCxlLG4sZnVuY3Rpb24odCxuKXtlPj1yLmxlbmd0aD90LmFwcGVuZFRvKG4pOnQuaW5zZXJ0QmVmb3JlKHIuZXEoZSkpfSxvKSx0aGlzLl9leHBhbmRlZChuKSYmKHRoaXMuX3VwZGF0ZU5vZGVDbGFzc2VzKG4pLGQobikuY3NzKFwiZGlzcGxheVwiLFwiYmxvY2tcIikpfSxyZWZyZXNoOmZ1bmN0aW9uKG4pe3ZhciBpLHIsbyxhLGwsYyx1PXRoaXMud3JhcHBlcixoPW4ubm9kZSxwPW4uYWN0aW9uLGY9bi5pdGVtcyxtPXRoaXMub3B0aW9ucyx2PW0ubG9hZE9uRGVtYW5kLF89bS5jaGVja2JveGVzJiZtLmNoZWNrYm94ZXMuY2hlY2tDaGlsZHJlbjtpZihuLmZpZWxkKXtpZighZlswXXx8IWZbMF0ubGV2ZWwpcmV0dXJuO3JldHVybiB0aGlzLl91cGRhdGVOb2RlKG4uZmllbGQsZil9aWYoaCYmKHU9dGhpcy5maW5kQnlVaWQoaC51aWQpLHRoaXMuX3Byb2dyZXNzKHUsITEpKSxfJiZcInJlbW92ZVwiIT1wKXtmb3Iocj0hMSxpPTA7Zi5sZW5ndGg+aTtpKyspaWYoXCJjaGVja2VkXCJpbiBmW2ldKXtyPSEwO2JyZWFrfWlmKCFyJiZoJiZoLmNoZWNrZWQpZm9yKGk9MDtmLmxlbmd0aD5pO2krKylmW2ldLmNoZWNrZWQ9ITB9aWYoXCJhZGRcIj09cCl0aGlzLl9hcHBlbmRJdGVtcyhuLmluZGV4LGYsdSk7ZWxzZSBpZihcInJlbW92ZVwiPT1wKXRoaXMuX3JlbW92ZSh0aGlzLmZpbmRCeVVpZChmWzBdLnVpZCksITEpO2Vsc2UgaWYoaClpZihkKHUpLmVtcHR5KCksZi5sZW5ndGgpZm9yKHRoaXMuX2FwcGVuZEl0ZW1zKG4uaW5kZXgsZix1KSxvPWQodSkuY2hpbGRyZW4oKSx2JiZfJiZ0aGlzLl9idWJibGVJbmRldGVybWluYXRlKG8ubGFzdCgpKSxpPTA7by5sZW5ndGg+aTtpKyspYT1vLmVxKGkpLHRoaXMudHJpZ2dlcihcIml0ZW1DaGFuZ2VcIix7aXRlbTphLGRhdGE6dGhpcy5kYXRhSXRlbShhKSxuczpnfSk7ZWxzZSBzKHUpLHRoaXMudHJpZ2dlcihcIml0ZW1DaGFuZ2VcIix7aXRlbTp1LGRhdGE6aCxuczpnfSk7ZWxzZSBsPXRoaXMuX3JlbmRlckdyb3VwKHtpdGVtczpmLGdyb3VwOntmaXJzdExldmVsOiEwLGV4cGFuZGVkOiEwfX0pLHRoaXMucm9vdC5sZW5ndGg/KHRoaXMuX2FuZ3VsYXJJdGVtcyhcImNsZWFudXBcIiksYz1lKGwpLHRoaXMucm9vdC5hdHRyKFwiY2xhc3NcIixjLmF0dHIoXCJjbGFzc1wiKSkuaHRtbChjLmh0bWwoKSkpOnRoaXMucm9vdD10aGlzLndyYXBwZXIuaHRtbChsKS5jaGlsZHJlbihcInVsXCIpLHRoaXMucm9vdC5hdHRyKFwicm9sZVwiLFwidHJlZVwiKSx0aGlzLl9hbmd1bGFySXRlbXMoXCJjb21waWxlXCIpO2ZvcihpPTA7Zi5sZW5ndGg+aTtpKyspKCF2fHxmW2ldLmV4cGFuZGVkKSYmZltpXS5sb2FkKCk7dGhpcy50cmlnZ2VyKE8se25vZGU6aD91OnR9KX0sX2Vycm9yOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZSYmdGhpcy5maW5kQnlVaWQoZS5ub2RlLnVpZCksbj10aGlzLnRlbXBsYXRlcy5yZXRyeSh7bWVzc2FnZXM6dGhpcy5vcHRpb25zLm1lc3NhZ2VzfSk7dD8odGhpcy5fcHJvZ3Jlc3ModCwhMSksdGhpcy5fZXhwYW5kZWQodCwhMSksaCh0KS5hZGRDbGFzcyhcImstaS1yZWZyZXNoXCIpLGUubm9kZS5sb2FkZWQoITEpKToodGhpcy5fcHJvZ3Jlc3MoITEpLHRoaXMuZWxlbWVudC5odG1sKG4pKX0sX3JldHJ5UmVxdWVzdDpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksdGhpcy5kYXRhU291cmNlLmZldGNoKCl9LGV4cGFuZDpmdW5jdGlvbihlKXt0aGlzLl9wcm9jZXNzTm9kZXMoZSxmdW5jdGlvbihlLHQpe3RoaXMudG9nZ2xlKHQsITApfSl9LGNvbGxhcHNlOmZ1bmN0aW9uKGUpe3RoaXMuX3Byb2Nlc3NOb2RlcyhlLGZ1bmN0aW9uKGUsdCl7dGhpcy50b2dnbGUodCwhMSl9KX0sZW5hYmxlOmZ1bmN0aW9uKGUsdCl7dD0yPT1hcmd1bWVudHMubGVuZ3RoPyEhdDohMCx0aGlzLl9wcm9jZXNzTm9kZXMoZSxmdW5jdGlvbihlLG4pe3RoaXMuZGF0YUl0ZW0obikuc2V0KFwiZW5hYmxlZFwiLHQpfSl9LGN1cnJlbnQ6ZnVuY3Rpb24obil7dmFyIGk9dGhpcyxyPWkuX2N1cnJlbnQsbz1pLmVsZW1lbnQsYT1pLl9hcmlhSWQ7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MCYmbiYmbi5sZW5ndGg/KHImJihyWzBdLmlkPT09YSYmci5yZW1vdmVBdHRyKFwiaWRcIiksci5maW5kKFwiLmstaW46Zmlyc3RcIikucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWZvY3VzZWRcIikpLHI9aS5fY3VycmVudD1lKG4sbykuY2xvc2VzdChHKSxyLmZpbmQoXCIuay1pbjpmaXJzdFwiKS5hZGRDbGFzcyhcImstc3RhdGUtZm9jdXNlZFwiKSxhPXJbMF0uaWR8fGEsYSYmKGkud3JhcHBlci5yZW1vdmVBdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIpLHIuYXR0cihcImlkXCIsYSksaS53cmFwcGVyLmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixhKSksdCk6KHJ8fChyPWkuX25leHRWaXNpYmxlKGUoKSkpLHIpfSxzZWxlY3Q6ZnVuY3Rpb24obil7dmFyIGk9dGhpcyxyPWkuZWxlbWVudDtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obj1lKG4scikuY2xvc2VzdChHKSxyLmZpbmQoXCIuay1zdGF0ZS1zZWxlY3RlZFwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9aS5kYXRhSXRlbSh0aGlzKTtlLnNldChcInNlbGVjdGVkXCIsITEpLGRlbGV0ZSBlLnNlbGVjdGVkfSksbi5sZW5ndGgmJmkuZGF0YUl0ZW0obikuc2V0KFwic2VsZWN0ZWRcIiwhMCksaS50cmlnZ2VyKEUpLHQpOnIuZmluZChcIi5rLXN0YXRlLXNlbGVjdGVkXCIpLmNsb3Nlc3QoRyl9LF90b2dnbGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbz10aGlzLm9wdGlvbnMsYT11KGUpLHM9bj9cImV4cGFuZFwiOlwiY29sbGFwc2VcIjtpZighYS5kYXRhKFwiYW5pbWF0aW5nXCIpJiYhdGhpcy5fdHJpZ2dlcihzLGUpKWlmKHRoaXMuX2V4cGFuZGVkKGUsbiksaT10JiZ0LmxvYWRlZCgpLHI9IWEuY2hpbGRyZW4oKS5sZW5ndGgsIW58fGkmJiFyKXtpZih0aGlzLl91cGRhdGVOb2RlQ2xhc3NlcyhlLHt9LHtleHBhbmRlZDpufSksYS5jc3MoXCJkaXNwbGF5XCIpPT0obj9cImJsb2NrXCI6XCJub25lXCIpKXJldHVybjtufHxhLmNzcyhcImhlaWdodFwiLGEuaGVpZ2h0KCkpLmNzcyhcImhlaWdodFwiKSxhLmtlbmRvU3RvcCghMCwhMCkua2VuZG9BbmltYXRlKHYoe3Jlc2V0OiEwfSxvLmFuaW1hdGlvbltzXSx7Y29tcGxldGU6ZnVuY3Rpb24oKXtuJiZhLmNzcyhcImhlaWdodFwiLFwiXCIpfX0pKX1lbHNlIG8ubG9hZE9uRGVtYW5kJiZ0aGlzLl9wcm9ncmVzcyhlLCEwKSxhLnJlbW92ZSgpLHQubG9hZCgpfSx0b2dnbGU6ZnVuY3Rpb24odCxuKXt0PWUodCksaCh0KS5pcyhcIi5rLW1pbnVzLC5rLXBsdXMsLmstbWludXMtZGlzYWJsZWQsLmstcGx1cy1kaXNhYmxlZFwiKSYmKDE9PWFyZ3VtZW50cy5sZW5ndGgmJihuPSF0aGlzLl9leHBhbmRlZCh0KSksdGhpcy5fZXhwYW5kZWQodCxuKSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3cuZm4uZGVzdHJveS5jYWxsKGUpLGUud3JhcHBlci5vZmYoQyksZS5fdW5iaW5kRGF0YVNvdXJjZSgpLGUuZHJhZ2dpbmcmJmUuZHJhZ2dpbmcuZGVzdHJveSgpLGYuZGVzdHJveShlLmVsZW1lbnQpLGUucm9vdD1lLndyYXBwZXI9ZS5lbGVtZW50PW51bGx9LF9leHBhbmRlZDpmdW5jdGlvbihlLG4pe3ZhciBpPWYuYXR0cihcImV4cGFuZGVkXCIpLHI9dGhpcy5kYXRhSXRlbShlKTtyZXR1cm4gMT09YXJndW1lbnRzLmxlbmd0aD9cInRydWVcIj09PWUuYXR0cihpKXx8ciYmci5leHBhbmRlZDoodShlKS5kYXRhKFwiYW5pbWF0aW5nXCIpfHwociYmKHIuc2V0KFwiZXhwYW5kZWRcIixuKSxuPXIuZXhwYW5kZWQpLG4/KGUuYXR0cihpLFwidHJ1ZVwiKSxlLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsXCJ0cnVlXCIpKTooZS5yZW1vdmVBdHRyKGkpLGUuYXR0cihcImFyaWEtZXhwYW5kZWRcIixcImZhbHNlXCIpKSksdCl9LF9wcm9ncmVzczpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuZWxlbWVudCxpPXRoaXMudGVtcGxhdGVzLmxvYWRpbmcoe21lc3NhZ2VzOnRoaXMub3B0aW9ucy5tZXNzYWdlc30pOzE9PWFyZ3VtZW50cy5sZW5ndGg/KHQ9ZSx0P24uaHRtbChpKTpuLmVtcHR5KCkpOmgoZSkudG9nZ2xlQ2xhc3MoXCJrLWxvYWRpbmdcIix0KS5yZW1vdmVDbGFzcyhcImstaS1yZWZyZXNoXCIpfSx0ZXh0OmZ1bmN0aW9uKGUsbil7dmFyIGk9dGhpcy5kYXRhSXRlbShlKSxyPXRoaXMub3B0aW9uc1tLLnRleHRdLG89aS5sZXZlbCgpLGE9ci5sZW5ndGgscz1yW01hdGgubWluKG8sYS0xKV07cmV0dXJuIG4/KGkuc2V0KHMsbiksdCk6aVtzXX0sX29iamVjdE9yU2VsZjpmdW5jdGlvbih0KXtyZXR1cm4gZSh0KS5jbG9zZXN0KFwiW2RhdGEtcm9sZT10cmVldmlld11cIikuZGF0YShcImtlbmRvVHJlZVZpZXdcIil8fHRoaXN9LF9kYXRhU291cmNlTW92ZTpmdW5jdGlvbihlLHQsbixpKXt2YXIgcixvPXRoaXMuX29iamVjdE9yU2VsZihufHx0KSxhPW8uZGF0YVNvdXJjZTtyZXR1cm4gbiYmblswXSE9by5lbGVtZW50WzBdJiYocj1vLmRhdGFJdGVtKG4pLHIubG9hZGVkKCl8fChvLl9wcm9ncmVzcyhuLCEwKSxyLmxvYWQoKSksbiE9dGhpcy5yb290JiYoYT1yLmNoaWxkcmVuLGEmJmEgaW5zdGFuY2VvZiBifHwoci5faW5pdENoaWxkcmVuKCksci5sb2FkZWQoITApLGE9ci5jaGlsZHJlbikpKSxlPXRoaXMuX3RvT2JzZXJ2YWJsZURhdGEoZSksaS5jYWxsKHRoaXMsYSxlKX0sX3RvT2JzZXJ2YWJsZURhdGE6ZnVuY3Rpb24odCl7dmFyIG4saSxyPXQ7cmV0dXJuKHQgaW5zdGFuY2VvZiB3aW5kb3cualF1ZXJ5fHxRKHQpKSYmKG49dGhpcy5fb2JqZWN0T3JTZWxmKHQpLmRhdGFTb3VyY2UsaT1lKHQpLmF0dHIoZi5hdHRyKFwidWlkXCIpKSxyPW4uZ2V0QnlVaWQoaSksciYmKHI9bi5yZW1vdmUocikpKSxyfSxfaW5zZXJ0OmZ1bmN0aW9uKGUsdCxuKXt0IGluc3RhbmNlb2YgZi5kYXRhLk9ic2VydmFibGVBcnJheT90PXQudG9KU09OKCk6eSh0KXx8KHQ9W3RdKTt2YXIgaT1lLnBhcmVudCgpO3JldHVybiBpJiZpLl9pbml0Q2hpbGRyZW4mJihpLmhhc0NoaWxkcmVuPSEwLGkuX2luaXRDaGlsZHJlbigpKSxlLnNwbGljZS5hcHBseShlLFtuLDBdLmNvbmNhdCh0KSksdGhpcy5maW5kQnlVaWQoZVtuXS51aWQpfSxpbnNlcnRBZnRlcjpvKDEpLGluc2VydEJlZm9yZTpvKDApLGFwcGVuZDpmdW5jdGlvbih0LG4saSl7dmFyIHI9dGhpcyxvPXIucm9vdDtyZXR1cm4gaT1pfHxlLm5vb3AsbiYmKG89ZChuKSksci5fZGF0YVNvdXJjZU1vdmUodCxvLG4sZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBvKCl7biYmci5fZXhwYW5kZWQobiwhMCk7dmFyIGk9ZS5kYXRhKCksbz1NYXRoLm1heChpLmxlbmd0aCwwKTtyZXR1cm4gci5faW5zZXJ0KGksdCxvKX12YXIgYTtyZXR1cm4gZS5kYXRhKCk/KGE9bygpLGkoYSksYSk6KGUub25lKEUsZnVuY3Rpb24oKXtpKG8oKSl9KSxudWxsKX0pfSxfcmVtb3ZlOmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLGE9dGhpcztyZXR1cm4gdD1lKHQsYS5lbGVtZW50KSx0aGlzLmFuZ3VsYXIoXCJjbGVhbnVwXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6dC5nZXQoKX19KSxpPXQucGFyZW50KCkucGFyZW50KCkscj10LnByZXYoKSxvPXQubmV4dCgpLHRbbj9cImRldGFjaFwiOlwicmVtb3ZlXCJdKCksaS5oYXNDbGFzcyhcImstaXRlbVwiKSYmKHMoaSksYS5fdXBkYXRlTm9kZUNsYXNzZXMoaSkpLGEuX3VwZGF0ZU5vZGVDbGFzc2VzKHIpLGEuX3VwZGF0ZU5vZGVDbGFzc2VzKG8pLHR9LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmRhdGFJdGVtKGUpO3QmJnRoaXMuZGF0YVNvdXJjZS5yZW1vdmUodCl9LGRldGFjaDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcmVtb3ZlKGUsITApfSxmaW5kQnlUZXh0OmZ1bmN0aW9uKHQpe3JldHVybiBlKHRoaXMuZWxlbWVudCkuZmluZChcIi5rLWluXCIpLmZpbHRlcihmdW5jdGlvbihuLGkpe3JldHVybiBlKGkpLnRleHQoKT09dH0pLmNsb3Nlc3QoRyl9LGZpbmRCeVVpZDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lbGVtZW50LmZpbmQoXCIuay1pdGVtW1wiK2YuYXR0cihcInVpZFwiKStcIj1cIitlK1wiXVwiKX0sZXhwYW5kUGF0aDpmdW5jdGlvbihuLGkpe3ZhciByLG8sYTtmb3Iobj1uLnNsaWNlKDApLHI9dGhpcyxvPXRoaXMuZGF0YVNvdXJjZSxhPW8uZ2V0KG5bMF0pLGk9aXx8ZS5ub29wO24ubGVuZ3RoPjAmJihhLmV4cGFuZGVkfHxhLmxvYWRlZCgpKTspYS5zZXQoXCJleHBhbmRlZFwiLCEwKSxuLnNoaWZ0KCksYT1vLmdldChuWzBdKTtyZXR1cm4gbi5sZW5ndGg/KG8uYmluZChcImNoYW5nZVwiLGZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZSYmZS5ub2RlLmlkO3QmJnQ9PT1uWzBdJiYobi5zaGlmdCgpLG4ubGVuZ3RoP28uZ2V0KG5bMF0pLnNldChcImV4cGFuZGVkXCIsITApOmkuY2FsbChyKSl9KSxhLnNldChcImV4cGFuZGVkXCIsITApLHQpOmkuY2FsbChyKX0sX3BhcmVudHM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUmJmUucGFyZW50Tm9kZSgpLG49W107dDspbi5wdXNoKHQpLHQ9dC5wYXJlbnROb2RlKCk7cmV0dXJuIG59LGV4cGFuZFRvOmZ1bmN0aW9uKGUpe3ZhciB0LG47Zm9yKGUgaW5zdGFuY2VvZiBmLmRhdGEuTm9kZXx8KGU9dGhpcy5kYXRhU291cmNlLmdldChlKSksdD10aGlzLl9wYXJlbnRzKGUpLG49MDt0Lmxlbmd0aD5uO24rKyl0W25dLnNldChcImV4cGFuZGVkXCIsITApfSxfcmVuZGVySXRlbTpmdW5jdGlvbihlKXtyZXR1cm4gZS5ncm91cHx8KGUuZ3JvdXA9e30pLGUudHJlZXZpZXc9dGhpcy5vcHRpb25zLGUucj10aGlzLnRlbXBsYXRlcyx0aGlzLnRlbXBsYXRlcy5pdGVtKGUpfSxfcmVuZGVyR3JvdXA6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gZS5yZW5kZXJJdGVtcz1mdW5jdGlvbihlKXt2YXIgbj1cIlwiLGk9MCxyPWUuaXRlbXMsbz1yP3IubGVuZ3RoOjAsYT1lLmdyb3VwO2ZvcihhLmxlbmd0aD1vO28+aTtpKyspZS5ncm91cD1hLGUuaXRlbT1yW2ldLGUuaXRlbS5pbmRleD1pLG4rPXQuX3JlbmRlckl0ZW0oZSk7cmV0dXJuIG59LGUucj10LnRlbXBsYXRlcyx0LnRlbXBsYXRlcy5ncm91cChlKX19KSxsLnByb3RvdHlwZT17X3JlbW92ZVRvdWNoSG92ZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Yuc3VwcG9ydC50b3VjaCYmZS5ob3ZlcmVkJiYoZS5ob3ZlcmVkLmZpbmQoXCIuXCIrVSkucmVtb3ZlQ2xhc3MoVSksZS5ob3ZlcmVkPSExKX0sX2hpbnRTdGF0dXM6ZnVuY3Rpb24obil7dmFyIGk9dGhpcy5fZHJhZ2dhYmxlLmhpbnQuZmluZChcIi5rLWRyYWctc3RhdHVzXCIpWzBdO3JldHVybiBuPyhpLmNsYXNzTmFtZT1cImstaWNvbiBrLWRyYWctc3RhdHVzIFwiK24sdCk6ZS50cmltKGkuY2xhc3NOYW1lLnJlcGxhY2UoL2stKGljb258ZHJhZy1zdGF0dXMpL2csXCJcIikpfSxkcmFnc3RhcnQ6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPW4udHJlZXZpZXcscj1uLnNvdXJjZU5vZGU9dC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoRyk7aS50cmlnZ2VyKEYse3NvdXJjZU5vZGU6clswXX0pJiZ0LnByZXZlbnREZWZhdWx0KCksbi5kcm9wSGludD1lKFwiPGRpdiBjbGFzcz0nay1kcm9wLWhpbnQnIC8+XCIpLmNzcyhOLFwiaGlkZGVuXCIpLmFwcGVuZFRvKGkuZWxlbWVudCl9LGRyYWc6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG8sYSxzLGwsYyxkLHUsaD10aGlzLHA9aC50cmVldmlldyxnPWguc291cmNlTm9kZSxtPWguZHJvcFRhcmdldD1lKGYuZXZlbnRUYXJnZXQodCkpLHY9bS5jbG9zZXN0KFwiLmstdHJlZXZpZXdcIik7di5sZW5ndGg/ZS5jb250YWlucyhnWzBdLG1bMF0pP249XCJrLWRlbmllZFwiOihuPVwiay1pbnNlcnQtbWlkZGxlXCIsaT1tLmNsb3Nlc3QoXCIuay10b3AsLmstbWlkLC5rLWJvdFwiKSxpLmxlbmd0aD8obz1pLm91dGVySGVpZ2h0KCksYT1mLmdldE9mZnNldChpKS50b3Ascz1tLmNsb3Nlc3QoXCIuay1pblwiKSxsPW8vKHMubGVuZ3RoPjA/NDoyKSxjPWErbD50LnkubG9jYXRpb24sZD10LnkubG9jYXRpb24+YStvLWwsaC5fcmVtb3ZlVG91Y2hIb3ZlcigpLHU9cy5sZW5ndGgmJiFjJiYhZCxoLmhvdmVyZWQ9dT92OiExLGguZHJvcEhpbnQuY3NzKE4sdT9cImhpZGRlblwiOlwidmlzaWJsZVwiKSxzLnRvZ2dsZUNsYXNzKFUsdSksdT9uPVwiay1hZGRcIjoocj1pLnBvc2l0aW9uKCksci50b3ArPWM/MDpvLGguZHJvcEhpbnQuY3NzKHIpW2M/XCJwcmVwZW5kVG9cIjpcImFwcGVuZFRvXCJdKG0uY2xvc2VzdChHKS5jaGlsZHJlbihcImRpdjpmaXJzdFwiKSksYyYmaS5oYXNDbGFzcyhcImstdG9wXCIpJiYobj1cImstaW5zZXJ0LXRvcFwiKSxkJiZpLmhhc0NsYXNzKFwiay1ib3RcIikmJihuPVwiay1pbnNlcnQtYm90dG9tXCIpKSk6bVswXSE9aC5kcm9wSGludFswXSYmKG49dlswXSE9cC5lbGVtZW50WzBdP1wiay1hZGRcIjpcImstZGVuaWVkXCIpKToobj1cImstZGVuaWVkXCIsaC5fcmVtb3ZlVG91Y2hIb3ZlcigpKSxwLnRyaWdnZXIoUix7c291cmNlTm9kZTpnWzBdLGRyb3BUYXJnZXQ6bVswXSxwYWdlWTp0LnkubG9jYXRpb24scGFnZVg6dC54LmxvY2F0aW9uLHN0YXR1c0NsYXNzOm4uc3Vic3RyaW5nKDIpLHNldFN0YXR1c0NsYXNzOmZ1bmN0aW9uKGUpe249ZX19KSwwIT09bi5pbmRleE9mKFwiay1pbnNlcnRcIikmJmguZHJvcEhpbnQuY3NzKE4sXCJoaWRkZW5cIiksaC5faGludFN0YXR1cyhuKX0sZHJhZ2NhbmNlbDpmdW5jdGlvbigpe3RoaXMuZHJvcEhpbnQucmVtb3ZlKCl9LGRyYWdlbmQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe2EudXBkYXRlSW5kZXRlcm1pbmF0ZSgpLGEudHJpZ2dlcihMLHtzb3VyY2VOb2RlOmUmJmVbMF0sZGVzdGluYXRpb25Ob2RlOm5bMF0sZHJvcFBvc2l0aW9uOnN9KX12YXIgbixpLHIsbz10aGlzLGE9by50cmVldmlldyxzPVwib3ZlclwiLGw9by5zb3VyY2VOb2RlLGM9by5kcm9wSGludCxkPW8uZHJvcFRhcmdldDtyZXR1cm5cInZpc2libGVcIj09Yy5jc3MoTik/KHM9Yy5wcmV2QWxsKFwiLmstaW5cIikubGVuZ3RoPjA/XCJhZnRlclwiOlwiYmVmb3JlXCIsbj1jLmNsb3Nlc3QoRykpOmQmJihuPWQuY2xvc2VzdChcIi5rLXRyZWV2aWV3IC5rLWl0ZW1cIiksbi5sZW5ndGh8fChuPWQuY2xvc2VzdChcIi5rLXRyZWV2aWV3XCIpKSksaT17c291cmNlTm9kZTpsWzBdLGRlc3RpbmF0aW9uTm9kZTpuWzBdLHZhbGlkOlwiay1kZW5pZWRcIiE9by5faGludFN0YXR1cygpLHNldFZhbGlkOmZ1bmN0aW9uKGUpe3RoaXMudmFsaWQ9ZX0sZHJvcFRhcmdldDpkWzBdLGRyb3BQb3NpdGlvbjpzfSxyPWEudHJpZ2dlcihCLGkpLGMucmVtb3ZlKCksby5fcmVtb3ZlVG91Y2hIb3ZlcigpLCFpLnZhbGlkfHxyPyhvLl9kcmFnZ2FibGUuZHJvcHBlZD1pLnZhbGlkLHQpOihvLl9kcmFnZ2FibGUuZHJvcHBlZD0hMCxcIm92ZXJcIj09cz9hLmFwcGVuZChsLG4sZSk6KFwiYmVmb3JlXCI9PXM/bD1hLmluc2VydEJlZm9yZShsLG4pOlwiYWZ0ZXJcIj09cyYmKGw9YS5pbnNlcnRBZnRlcihsLG4pKSxlKGwpKSx0KX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX2RyYWdnYWJsZS5kZXN0cm95KCl9fSxnLnBsdWdpbihjKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsdCl7dmFyIG4saSxyPVtdO2ZvcihuPTAsaT1lLmxlbmd0aDtpPm47bisrKWVbbl0uZmllbGQhPT10JiZyLnB1c2goZVtuXSk7cmV0dXJuIHJ9ZnVuY3Rpb24gaShlLHQsbil7dmFyIGkscixvLGE7aWYoIWUpcmV0dXJuW107Zm9yKGU9ZS5maWx0ZXJzLGk9MCxyPVtdLG89ZS5sZW5ndGg7bz5pO2krKylhPWVbaV0ub3BlcmF0b3IsKG58fFwiaW5cIj09PWEpJiZhIT09bnx8ZVtpXS5maWVsZCE9PXR8fHIucHVzaChlW2ldKTtyZXR1cm4gcn1mdW5jdGlvbiByKHQsbixyKXt2YXIgbyxhPTAscz1yLmxlbmd0aDtpZih0PWkodCxuLFwiaW5cIilbMF0pZm9yKG89dC52YWx1ZS5zcGxpdChcIixcIik7cz5hO2ErKylyW2FdLmNoZWNrZWQ9ZS5pbkFycmF5KHJbYV0udW5pcXVlTmFtZSxvKT49MDtlbHNlIGZvcig7cz5hO2ErKylyW2FdLmNoZWNrZWQ9ITB9ZnVuY3Rpb24gbyhlLHQpe3ZhciBuLGk9ZS5sZW5ndGg7Zm9yKG49MDtpPm47bisrKWVbbl0uY2hlY2tlZCYmMCE9PWVbbl0ubGV2ZWwoKSYmdC5wdXNoKGVbbl0udW5pcXVlTmFtZSksZVtuXS5oYXNDaGlsZHJlbiYmbyhlW25dLmNoaWxkcmVuLnZpZXcoKSx0KX12YXIgYT13aW5kb3cua2VuZG8scz1hLnVpLGw9XCJrZW5kb0NvbnRleHRNZW51XCIsYz1lLnByb3h5LGQ9XCIua2VuZG9QaXZvdEZpZWxkTWVudVwiLHU9cy5XaWRnZXQsaD11LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3UuZm4uaW5pdC5jYWxsKHRoaXMsZSx0KSx0aGlzLl9kYXRhU291cmNlKCksdGhpcy5fbGF5b3V0KCksYS5ub3RpZnkodGhpcyl9LGV2ZW50czpbXSxvcHRpb25zOntuYW1lOlwiUGl2b3RGaWVsZE1lbnVcIixmaWx0ZXI6bnVsbCxmaWx0ZXJhYmxlOiEwLHNvcnRhYmxlOiEwLG1lc3NhZ2VzOntpbmZvOlwiU2hvdyBpdGVtcyB3aXRoIHZhbHVlIHRoYXQ6XCIsc29ydEFzY2VuZGluZzpcIlNvcnQgQXNjZW5kaW5nXCIsc29ydERlc2NlbmRpbmc6XCJTb3J0IERlc2NlbmRpbmdcIixmaWx0ZXJGaWVsZHM6XCJGaWVsZHMgRmlsdGVyXCIsZmlsdGVyOlwiRmlsdGVyXCIsaW5jbHVkZTpcIkluY2x1ZGUgRmllbGRzLi4uXCIsdGl0bGU6XCJGaWVsZHMgdG8gaW5jbHVkZVwiLGNsZWFyOlwiQ2xlYXJcIixvazpcIk9LXCIsY2FuY2VsOlwiQ2FuY2VsXCIsb3BlcmF0b3JzOntjb250YWluczpcIkNvbnRhaW5zXCIsZG9lc25vdGNvbnRhaW46XCJEb2VzIG5vdCBjb250YWluXCIsc3RhcnRzd2l0aDpcIlN0YXJ0cyB3aXRoXCIsZW5kc3dpdGg6XCJFbmRzIHdpdGhcIixlcTpcIklzIGVxdWFsIHRvXCIsbmVxOlwiSXMgbm90IGVxdWFsIHRvXCJ9fX0sX2xheW91dDpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9uczt0aGlzLndyYXBwZXI9ZShhLnRlbXBsYXRlKGYpKHtuczphLm5zLGZpbHRlcmFibGU6dC5maWx0ZXJhYmxlLHNvcnRhYmxlOnQuc29ydGFibGUsbWVzc2FnZXM6dC5tZXNzYWdlc30pKSx0aGlzLm1lbnU9dGhpcy53cmFwcGVyW2xdKHtmaWx0ZXI6dC5maWx0ZXIsdGFyZ2V0OnRoaXMuZWxlbWVudCxvcmllbnRhdGlvbjpcInZlcnRpY2FsXCIsc2hvd09uOlwiY2xpY2tcIixjbG9zZU9uQ2xpY2s6ITEsb3BlbjpjKHRoaXMuX21lbnVPcGVuLHRoaXMpLHNlbGVjdDpjKHRoaXMuX3NlbGVjdCx0aGlzKSxjb3B5QW5jaG9yU3R5bGVzOiExfSkuZGF0YShsKSx0aGlzLl9jcmVhdGVXaW5kb3coKSx0LmZpbHRlcmFibGUmJnRoaXMuX2luaXRGaWx0ZXJGb3JtKCl9LF9pbml0RmlsdGVyRm9ybTpmdW5jdGlvbigpe3ZhciBlPXRoaXMubWVudS5lbGVtZW50LmZpbmQoXCIuay1maWx0ZXItaXRlbVwiKSx0PWModGhpcy5fZmlsdGVyLHRoaXMpO3RoaXMuX2ZpbHRlck9wZXJhdG9yPW5ldyBhLnVpLkRyb3BEb3duTGlzdChlLmZpbmQoXCJzZWxlY3RcIikpLHRoaXMuX2ZpbHRlclZhbHVlPWUuZmluZChcIi5rLXRleHRib3hcIiksZS5vbihcInN1Ym1pdFwiK2QsdCkub24oXCJjbGlja1wiK2QsXCIuay1idXR0b24tZmlsdGVyXCIsdCkub24oXCJjbGlja1wiK2QsXCIuay1idXR0b24tY2xlYXJcIixjKHRoaXMuX3Jlc2V0LHRoaXMpKX0sX3NldEZpbHRlckZvcm06ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIixuPVwiXCI7ZSYmKHQ9ZS5vcGVyYXRvcixuPWUudmFsdWUpLHRoaXMuX2ZpbHRlck9wZXJhdG9yLnZhbHVlKHQpLHRoaXMuX2ZpbHRlclZhbHVlLnZhbChuKX0sX2NsZWFyRmlsdGVyczpmdW5jdGlvbihlKXt2YXIgdCxuLHI9dGhpcy5kYXRhU291cmNlLmZpbHRlcigpfHx7fSxvPTA7Zm9yKHIuZmlsdGVycz1yLmZpbHRlcnN8fFtdLHQ9aShyLGUpLG49dC5sZW5ndGg7bj5vO28rKylyLmZpbHRlcnMuc3BsaWNlKHIuZmlsdGVycy5pbmRleE9mKHRbb10pLDEpO3JldHVybiByfSxfZmlsdGVyOmZ1bmN0aW9uKGUpe3ZhciBuLGkscj10aGlzLG89ci5fZmlsdGVyVmFsdWUudmFsKCk7cmV0dXJuIGUucHJldmVudERlZmF1bHQoKSxvPyhuPXtmaWVsZDpyLmN1cnJlbnRNZW1iZXIsb3BlcmF0b3I6ci5fZmlsdGVyT3BlcmF0b3IudmFsdWUoKSx2YWx1ZTpvfSxpPXIuX2NsZWFyRmlsdGVycyhyLmN1cnJlbnRNZW1iZXIpLGkuZmlsdGVycy5wdXNoKG4pLHIuZGF0YVNvdXJjZS5maWx0ZXIoaSksci5tZW51LmNsb3NlKCksdCk6KHIubWVudS5jbG9zZSgpLHQpfSxfcmVzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuX2NsZWFyRmlsdGVycyh0LmN1cnJlbnRNZW1iZXIpO2UucHJldmVudERlZmF1bHQoKSxuLmZpbHRlcnNbMF18fChuPXt9KSx0LmRhdGFTb3VyY2UuZmlsdGVyKG4pLHQuX3NldEZpbHRlckZvcm0obnVsbCksdC5tZW51LmNsb3NlKCl9LF9zb3J0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY3VycmVudE1lbWJlcixpPXRoaXMuZGF0YVNvdXJjZS5zb3J0KCl8fFtdO2k9bihpLHQpLGkucHVzaCh7ZmllbGQ6dCxkaXI6ZX0pLHRoaXMuZGF0YVNvdXJjZS5zb3J0KGkpLHRoaXMubWVudS5jbG9zZSgpfSxzZXREYXRhU291cmNlOmZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucy5kYXRhU291cmNlPWUsdGhpcy5fZGF0YVNvdXJjZSgpfSxfZGF0YVNvdXJjZTpmdW5jdGlvbigpe3RoaXMuZGF0YVNvdXJjZT1hLmRhdGEuUGl2b3REYXRhU291cmNlLmNyZWF0ZSh0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZSl9LF9jcmVhdGVXaW5kb3c6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMubWVzc2FnZXM7dGhpcy5pbmNsdWRlV2luZG93PWUoYS50ZW1wbGF0ZShnKSh7bWVzc2FnZXM6dH0pKS5vbihcImNsaWNrXCIrZCxcIi5rLWJ1dHRvbi1va1wiLGModGhpcy5fYXBwbHlJbmNsdWRlcyx0aGlzKSkub24oXCJjbGlja1wiK2QsXCIuay1idXR0b24tY2FuY2VsXCIsYyh0aGlzLl9jbG9zZVdpbmRvdyx0aGlzKSksdGhpcy5pbmNsdWRlV2luZG93PW5ldyBzLldpbmRvdyh0aGlzLmluY2x1ZGVXaW5kb3cse3RpdGxlOnQudGl0bGUsdmlzaWJsZTohMSxyZXNpemFibGU6ITEsb3BlbjpjKHRoaXMuX3dpbmRvd09wZW4sdGhpcyl9KX0sX2FwcGx5SW5jbHVkZXM6ZnVuY3Rpb24oZSl7dmFyIHQsbj1bXSxyPXRoaXMudHJlZVZpZXcuZGF0YVNvdXJjZS52aWV3KCksYT1yWzBdLmNoZWNrZWQscz10aGlzLmRhdGFTb3VyY2UuZmlsdGVyKCksbD1pKHMsdGhpcy5jdXJyZW50TWVtYmVyLFwiaW5cIilbMF07byhyLG4pLGwmJihhPyhzLmZpbHRlcnMuc3BsaWNlKHMuZmlsdGVycy5pbmRleE9mKGwpLDEpLHMuZmlsdGVycy5sZW5ndGh8fChzPXt9KSk6bC52YWx1ZT1uLmpvaW4oXCIsXCIpLHQ9cyksbi5sZW5ndGgmJih0fHxhfHwodD17ZmllbGQ6dGhpcy5jdXJyZW50TWVtYmVyLG9wZXJhdG9yOlwiaW5cIix2YWx1ZTpuLmpvaW4oXCIsXCIpfSxzJiYocy5maWx0ZXJzLnB1c2godCksdD1zKSkpLHQmJnRoaXMuZGF0YVNvdXJjZS5maWx0ZXIodCksdGhpcy5fY2xvc2VXaW5kb3coZSl9LF9jbG9zZVdpbmRvdzpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksdGhpcy5pbmNsdWRlV2luZG93LmNsb3NlKCl9LF90cmVlVmlld0RhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBhLmRhdGEuSGllcmFyY2hpY2FsRGF0YVNvdXJjZS5jcmVhdGUoe3NjaGVtYTp7bW9kZWw6e2lkOlwidW5pcXVlTmFtZVwiLGhhc0NoaWxkcmVuOmZ1bmN0aW9uKGUpe3JldHVybiBwYXJzZUludChlLmNoaWxkcmVuQ2FyZGluYWxpdHksMTApPjB9fX0sdHJhbnNwb3J0OntyZWFkOmZ1bmN0aW9uKHQpe3ZhciBuPXt9LGk9ZS50cmVlVmlldy5kYXRhU291cmNlLmdldCh0LmRhdGEudW5pcXVlTmFtZSksbz10LmRhdGEudW5pcXVlTmFtZTtvPyhuLm1lbWJlclVuaXF1ZU5hbWU9aS51bmlxdWVOYW1lLnJlcGxhY2UoL1xcJi9nLFwiJmFtcDtcIiksbi50cmVlT3A9MSk6bi5sZXZlbFVuaXF1ZU5hbWU9ZS5jdXJyZW50TWVtYmVyK1wiLlsoQUxMKV1cIixlLmRhdGFTb3VyY2Uuc2NoZW1hTWVtYmVycyhuKS5kb25lKGZ1bmN0aW9uKG4pe3IoZS5kYXRhU291cmNlLmZpbHRlcigpLGUuY3VycmVudE1lbWJlcixuKSx0LnN1Y2Nlc3Mobil9KS5mYWlsKHQuZXJyb3IpfX19KX0sX2NyZWF0ZVRyZWVWaWV3OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC50cmVlVmlldz1uZXcgcy5UcmVlVmlldyhlLHthdXRvQmluZDohMSxkYXRhU291cmNlOnQuX3RyZWVWaWV3RGF0YVNvdXJjZSgpLGRhdGFUZXh0RmllbGQ6XCJuYW1lXCIsY2hlY2tib3hlczp7Y2hlY2tDaGlsZHJlbjohMH0sZGF0YUJvdW5kOmZ1bmN0aW9uKCl7cy5wcm9ncmVzcyh0LmluY2x1ZGVXaW5kb3cuZWxlbWVudCwhMSl9fSl9LF9tZW51T3BlbjpmdW5jdGlvbih0KXt2YXIgbjt0LmV2ZW50JiYobj1hLmF0dHIoXCJuYW1lXCIpLHRoaXMuY3VycmVudE1lbWJlcj1lKHQuZXZlbnQudGFyZ2V0KS5jbG9zZXN0KFwiW1wiK24rXCJdXCIpLmF0dHIobiksdGhpcy5vcHRpb25zLmZpbHRlcmFibGUmJnRoaXMuX3NldEZpbHRlckZvcm0oaSh0aGlzLmRhdGFTb3VyY2UuZmlsdGVyKCksdGhpcy5jdXJyZW50TWVtYmVyKVswXSkpfSxfc2VsZWN0OmZ1bmN0aW9uKHQpe3ZhciBuPWUodC5pdGVtKTtlKFwiLmstcGl2b3QtZmlsdGVyLXdpbmRvd1wiKS5ub3QodGhpcy5pbmNsdWRlV2luZG93LmVsZW1lbnQpLmtlbmRvV2luZG93KFwiY2xvc2VcIiksbi5oYXNDbGFzcyhcImstaW5jbHVkZS1pdGVtXCIpP3RoaXMuaW5jbHVkZVdpbmRvdy5jZW50ZXIoKS5vcGVuKCk6bi5oYXNDbGFzcyhcImstc29ydC1hc2NcIik/dGhpcy5fc29ydChcImFzY1wiKTpuLmhhc0NsYXNzKFwiay1zb3J0LWRlc2NcIikmJnRoaXMuX3NvcnQoXCJkZXNjXCIpfSxfd2luZG93T3BlbjpmdW5jdGlvbigpe3RoaXMudHJlZVZpZXd8fHRoaXMuX2NyZWF0ZVRyZWVWaWV3KHRoaXMuaW5jbHVkZVdpbmRvdy5lbGVtZW50LmZpbmQoXCIuay10cmVldmlld1wiKSkscy5wcm9ncmVzcyh0aGlzLmluY2x1ZGVXaW5kb3cuZWxlbWVudCwhMCksdGhpcy50cmVlVmlldy5kYXRhU291cmNlLnJlYWQoKX0sZGVzdHJveTpmdW5jdGlvbigpe3UuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMubWVudSYmKHRoaXMubWVudS5kZXN0cm95KCksdGhpcy5tZW51PW51bGwpLHRoaXMucmVlZVZpZXcmJih0aGlzLnRyZWVWaWV3LmRlc3Ryb3koKSx0aGlzLnRyZWVWaWV3PW51bGwpLHRoaXMuaW5jbHVkZVdpbmRvdyYmKHRoaXMuaW5jbHVkZVdpbmRvdy5kZXN0cm95KCksdGhpcy5pbmNsdWRlV2luZG93PW51bGwpLHRoaXMud3JhcHBlcj1udWxsLHRoaXMuZWxlbWVudD1udWxsfX0pLHA9JzxkaXYgY2xhc3M9XCJrLWZpbHRlcmFibGUgay1jb250ZW50XCIgdGFiaW5kZXg9XCItMVwiIGRhdGEtcm9sZT1cImZpZWxkbWVudVwiPjxmb3JtIGNsYXNzPVwiay1maWx0ZXItbWVudVwiPjxkaXY+PGRpdiBjbGFzcz1cImstZmlsdGVyLWhlbHAtdGV4dFwiPiM9bWVzc2FnZXMuaW5mbyM8L2Rpdj48c2VsZWN0PiNmb3IodmFyIG9wIGluIG1lc3NhZ2VzLm9wZXJhdG9ycyl7IzxvcHRpb24gdmFsdWU9XCIjPW9wI1wiPiM9bWVzc2FnZXMub3BlcmF0b3JzW29wXSM8L29wdGlvbj4jfSM8L3NlbGVjdD48aW5wdXQgY2xhc3M9XCJrLXRleHRib3hcIiB0eXBlPVwidGV4dFwiIC8+PGRpdj48YSBjbGFzcz1cImstYnV0dG9uIGstcHJpbWFyeSBrLWJ1dHRvbi1maWx0ZXJcIiBocmVmPVwiXFxcXCNcIj4jPW1lc3NhZ2VzLmZpbHRlciM8L2E+PGEgY2xhc3M9XCJrLWJ1dHRvbiBrLWJ1dHRvbi1jbGVhclwiIGhyZWY9XCJcXFxcI1wiPiM9bWVzc2FnZXMuY2xlYXIjPC9hPjwvZGl2PjwvZGl2PjwvZm9ybT48L2Rpdj4nLGY9Jzx1bCBjbGFzcz1cImstcGl2b3QtZmllbGRtZW51XCI+IyBpZiAoc29ydGFibGUpIHsjPGxpIGNsYXNzPVwiay1pdGVtIGstc29ydC1hc2NcIj48c3BhbiBjbGFzcz1cImstbGlua1wiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1zb3J0LWFzY1wiPjwvc3Bhbj4ke21lc3NhZ2VzLnNvcnRBc2NlbmRpbmd9PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwiay1pdGVtIGstc29ydC1kZXNjXCI+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWktc29ydC1kZXNjXCI+PC9zcGFuPiR7bWVzc2FnZXMuc29ydERlc2NlbmRpbmd9PC9zcGFuPjwvbGk+IyBpZiAoZmlsdGVyYWJsZSkgeyM8bGkgY2xhc3M9XCJrLXNlcGFyYXRvclwiPjwvbGk+IyB9ICMjIH0gIyMgaWYgKGZpbHRlcmFibGUpIHsjPGxpIGNsYXNzPVwiay1pdGVtIGstaW5jbHVkZS1pdGVtXCI+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWZpbHRlclwiPjwvc3Bhbj4ke21lc3NhZ2VzLmluY2x1ZGV9PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwiay1zZXBhcmF0b3JcIj48L2xpPjxsaSBjbGFzcz1cImstaXRlbSBrLWZpbHRlci1pdGVtXCI+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWZpbHRlclwiPjwvc3Bhbj4ke21lc3NhZ2VzLmZpbHRlckZpZWxkc308L3NwYW4+PHVsPjxsaT4nK3ArXCI8L2xpPjwvdWw+PC9saT4jIH0gIzwvdWw+XCIsZz0nPGRpdiBjbGFzcz1cImstcG9wdXAtZWRpdC1mb3JtIGstcGl2b3QtZmlsdGVyLXdpbmRvd1wiPjxkaXYgY2xhc3M9XCJrLWVkaXQtZm9ybS1jb250YWluZXJcIj48ZGl2IGNsYXNzPVwiay10cmVldmlld1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWVkaXQtYnV0dG9ucyBrLXN0YXRlLWRlZmF1bHRcIj48YSBjbGFzcz1cImstYnV0dG9uIGstcHJpbWFyeSBrLWJ1dHRvbi1va1wiIGhyZWY9XCJcXFxcI1wiPiR7bWVzc2FnZXMub2t9PC9hPjxhIGNsYXNzPVwiay1idXR0b24gay1idXR0b24tY2FuY2VsXCIgaHJlZj1cIlxcXFwjXCI+JHttZXNzYWdlcy5jYW5jZWx9PC9hPjwvZGl2PjwvZGl2Pic7cy5wbHVnaW4oaCl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbih0LGkpe3ZhciByLG8sYT1bXTtpZihlLmlzUGxhaW5PYmplY3QodCkpaWYodC5oYXNPd25Qcm9wZXJ0eShcImZpbHRlcnNcIikpYT10LmZpbHRlcnM7ZWxzZSBpZih0LmZpZWxkPT1pKXJldHVybiB0O2ZvcihlLmlzQXJyYXkodCkmJihhPXQpLHI9MDthLmxlbmd0aD5yO3IrKylpZihvPW4oYVtyXSxpKSlyZXR1cm4gb31mdW5jdGlvbiBpKHQsbil7dC5maWx0ZXJzJiYodC5maWx0ZXJzPWUuZ3JlcCh0LmZpbHRlcnMsZnVuY3Rpb24oZSl7cmV0dXJuIGkoZSxuKSxlLmZpbHRlcnM/ZS5maWx0ZXJzLmxlbmd0aDplLmZpZWxkIT1ufSkpfWZ1bmN0aW9uIHIoZSx0KXt2YXIgbj1vLmdldHRlcih0LCEwKTtyZXR1cm4gZnVuY3Rpb24odCl7Zm9yKHZhciBpLHIsbz1lKHQpLGE9W10scz0wLGw9e307by5sZW5ndGg+czspaT1vW3MrK10scj1uKGkpLGwuaGFzT3duUHJvcGVydHkocil8fChhLnB1c2goaSksbFtyXT0hMCk7cmV0dXJuIGF9fXZhciBvPXdpbmRvdy5rZW5kbyxhPW8udWkscz1vLmRhdGEuRGF0YVNvdXJjZSxsPWEuV2lkZ2V0LGM9XCJjaGFuZ2VcIixkPVwiYm9vbGVhblwiLHU9XCJlbnVtc1wiLGg9XCJzdHJpbmdcIixwPVwiSXMgZXF1YWwgdG9cIixmPVwiSXMgbm90IGVxdWFsIHRvXCIsZz1lLnByb3h5LG09bC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24obixpKXt2YXIgcixhLHMscCxmLG0sdixfLHksdztuPWUobikuYWRkQ2xhc3MoXCJrLWZpbHRlcmNlbGxcIikscj10aGlzLndyYXBwZXI9ZShcIjxzcGFuLz5cIikuYXBwZW5kVG8obiksYT10aGlzLG09YS5vcGVyYXRvcnM9aS5vcGVyYXRvcnN8fHt9LHY9YS5pbnB1dD1lKFwiPGlucHV0Lz5cIikuYXR0cihvLmF0dHIoXCJiaW5kXCIpLFwidmFsdWU6IHZhbHVlXCIpLmFwcGVuZFRvKHIpLGwuZm4uaW5pdC5jYWxsKGEsblswXSxpKSxpPWEub3B0aW9ucyxzPWEuZGF0YVNvdXJjZT1pLmRhdGFTb3VyY2UsYS5tb2RlbD1zLnJlYWRlci5tb2RlbCxmPWkudHlwZT1oLF89by5nZXR0ZXIoXCJyZWFkZXIubW9kZWwuZmllbGRzXCIsITApKHMpfHx7fSx5PV9baS5maWVsZF0seSYmeS50eXBlJiYoZj1pLnR5cGU9eS50eXBlKSxpLnZhbHVlcyYmKGkudHlwZT1mPXUpLG09bVtmXXx8aS5vcGVyYXRvcnNbZl0sYS5fcGFyc2U9ZnVuY3Rpb24oZSl7cmV0dXJuIGUrXCJcIn0sYS5tb2RlbCYmYS5tb2RlbC5maWVsZHMmJih3PWEubW9kZWwuZmllbGRzW2kuZmllbGRdLHcmJncucGFyc2UmJihhLl9wYXJzZT1nKHcucGFyc2UsdykpKSxhLnZpZXdNb2RlbD1wPW8ub2JzZXJ2YWJsZSh7b3BlcmF0b3I6aS5vcGVyYXRvcix2YWx1ZTpudWxsLG9wZXJhdG9yVmlzaWJsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0KFwidmFsdWVcIik7cmV0dXJuIG51bGwhPT1lJiZlIT09dCYmXCJ1bmRlZmluZWRcIiE9ZX19KSxwLmJpbmQoYyxnKGEudXBkYXRlRHNGaWx0ZXIsYSkpLGY9PWgmJmEuaW5pdFN1Z2dlc3REYXRhU291cmNlKGkpLG51bGwhPT1pLmlucHV0V2lkdGgmJnYud2lkdGgoaS5pbnB1dFdpZHRoKSxhLl9zZXRJbnB1dFR5cGUoaSxmKSxmIT1kJiZpLnNob3dPcGVyYXRvcnMhPT0hMT9hLl9jcmVhdGVPcGVyYXRvckRyb3BEb3duKG0pOnIuYWRkQ2xhc3MoXCJrLW9wZXJhdG9yLWhpZGRlblwiKSxhLl9jcmVhdGVDbGVhckljb24oKSxvLmJpbmQodGhpcy53cmFwcGVyLHApLGY9PWgmJihpLnRlbXBsYXRlfHxhLnNldEF1dG9Db21wbGV0ZVNvdXJjZSgpKSxmPT11JiZhLnNldENvbWJvQm94U291cmNlKGEub3B0aW9ucy52YWx1ZXMpLGEuX3JlZnJlc2hVSSgpLGEuX3JlZnJlc2hIYW5kbGVyPWcoYS5fcmVmcmVzaFVJLGEpLGEuZGF0YVNvdXJjZS5iaW5kKGMsYS5fcmVmcmVzaEhhbmRsZXIpfSxfc2V0SW5wdXRUeXBlOmZ1bmN0aW9uKHQsbil7dmFyIGkscixhLHMsbCxjPXRoaXMscD1jLmlucHV0O1wiZnVuY3Rpb25cIj09dHlwZW9mIHQudGVtcGxhdGU/dC50ZW1wbGF0ZS5jYWxsKGMudmlld01vZGVsLHtlbGVtZW50OmMuaW5wdXQsZGF0YVNvdXJjZTpjLnN1Z2dlc3REYXRhU291cmNlfSk6bj09aD9wLmF0dHIoby5hdHRyKFwicm9sZVwiKSxcImF1dG9jb21wbGV0ZVwiKS5hdHRyKG8uYXR0cihcInRleHQtZmllbGRcIiksdC5kYXRhVGV4dEZpZWxkfHx0LmZpZWxkKS5hdHRyKG8uYXR0cihcImZpbHRlclwiKSx0LnN1Z2dlc3Rpb25PcGVyYXRvcikuYXR0cihvLmF0dHIoXCJkZWxheVwiKSx0LmRlbGF5KS5hdHRyKG8uYXR0cihcIm1pbi1sZW5ndGhcIiksdC5taW5MZW5ndGgpLmF0dHIoby5hdHRyKFwidmFsdWUtcHJpbWl0aXZlXCIpLCEwKTpcImRhdGVcIj09bj9wLmF0dHIoby5hdHRyKFwicm9sZVwiKSxcImRhdGVwaWNrZXJcIik6bj09ZD8ocC5yZW1vdmUoKSxpPWUoXCI8aW5wdXQgdHlwZT0ncmFkaW8nLz5cIikscj1jLndyYXBwZXIsYT1vLmd1aWQoKSxzPWUoXCI8bGFiZWwvPlwiKS50ZXh0KHQubWVzc2FnZXMuaXNUcnVlKS5hcHBlbmQoaSksaS5hdHRyKG8uYXR0cihcImJpbmRcIiksXCJjaGVja2VkOnZhbHVlXCIpLmF0dHIoXCJuYW1lXCIsYSkudmFsKFwidHJ1ZVwiKSxsPXMuY2xvbmUoKS50ZXh0KHQubWVzc2FnZXMuaXNGYWxzZSksaS5jbG9uZSgpLnZhbChcImZhbHNlXCIpLmFwcGVuZFRvKGwpLHIuYXBwZW5kKFtzLGxdKSk6XCJudW1iZXJcIj09bj9wLmF0dHIoby5hdHRyKFwicm9sZVwiKSxcIm51bWVyaWN0ZXh0Ym94XCIpOm49PXUmJnAuYXR0cihvLmF0dHIoXCJyb2xlXCIpLFwiY29tYm9ib3hcIikuYXR0cihvLmF0dHIoXCJ0ZXh0LWZpZWxkXCIpLFwidGV4dFwiKS5hdHRyKG8uYXR0cihcInN1Z2dlc3RcIiksITApLmF0dHIoby5hdHRyKFwiZmlsdGVyXCIpLFwiY29udGFpbnNcIikuYXR0cihvLmF0dHIoXCJ2YWx1ZS1maWVsZFwiKSxcInZhbHVlXCIpLmF0dHIoby5hdHRyKFwidmFsdWUtcHJpbWl0aXZlXCIpLCEwKX0sX2NyZWF0ZU9wZXJhdG9yRHJvcERvd246ZnVuY3Rpb24odCl7dmFyIG4saSxyPVtdO2ZvcihuIGluIHQpci5wdXNoKHt0ZXh0OnRbbl0sdmFsdWU6bn0pO2k9ZSgnPGlucHV0IGNsYXNzPVwiay1kcm9wZG93bi1vcGVyYXRvclwiICcrby5hdHRyKFwiYmluZFwiKSsnPVwidmFsdWU6IG9wZXJhdG9yXCIvPicpLmFwcGVuZFRvKHRoaXMud3JhcHBlciksdGhpcy5vcGVyYXRvckRyb3BEb3duPWkua2VuZG9Ecm9wRG93bkxpc3Qoe2RhdGFTb3VyY2U6cixkYXRhVGV4dEZpZWxkOlwidGV4dFwiLGRhdGFWYWx1ZUZpZWxkOlwidmFsdWVcIixvcGVuOmZ1bmN0aW9uKCl7dGhpcy5wb3B1cC5lbGVtZW50LndpZHRoKDE1MCl9LHZhbHVlUHJpbWl0aXZlOiEwfSkuZGF0YShcImtlbmRvRHJvcERvd25MaXN0XCIpLHRoaXMub3BlcmF0b3JEcm9wRG93bi53cmFwcGVyLmZpbmQoXCIuay1pLWFycm93LXNcIikucmVtb3ZlQ2xhc3MoXCJrLWktYXJyb3ctc1wiKS5hZGRDbGFzcyhcImstZmlsdGVyXCIpfSxpbml0U3VnZ2VzdERhdGFTb3VyY2U6ZnVuY3Rpb24oZSl7dmFyIG49ZS5zdWdnZXN0RGF0YVNvdXJjZTtuIGluc3RhbmNlb2Ygc3x8KCFlLmN1c3RvbURhdGFTb3VyY2UmJm4mJihuLmdyb3VwPXQpLG49dGhpcy5zdWdnZXN0RGF0YVNvdXJjZT1zLmNyZWF0ZShuKSksZS5jdXN0b21EYXRhU291cmNlfHwobi5fcGFnZVNpemU9dCxuLnJlYWRlci5kYXRhPXIobi5yZWFkZXIuZGF0YSx0aGlzLm9wdGlvbnMuZmllbGQpKSx0aGlzLnN1Z2dlc3REYXRhU291cmNlPW59LHNldEF1dG9Db21wbGV0ZVNvdXJjZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuaW5wdXQuZGF0YShcImtlbmRvQXV0b0NvbXBsZXRlXCIpO2UmJmUuc2V0RGF0YVNvdXJjZSh0aGlzLnN1Z2dlc3REYXRhU291cmNlKX0sc2V0Q29tYm9Cb3hTb3VyY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9cy5jcmVhdGUoe2RhdGE6ZX0pLG49dGhpcy5pbnB1dC5kYXRhKFwia2VuZG9Db21ib0JveFwiKTtuJiZuLnNldERhdGFTb3VyY2UodCl9LF9yZWZyZXNoVUk6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGk9bih0LmRhdGFTb3VyY2UuZmlsdGVyKCksdGhpcy5vcHRpb25zLmZpZWxkKXx8e30scj10LnZpZXdNb2RlbDt0Lm1hbnVhbGx5VXBkYXRpbmdWTT0hMCxpPWUuZXh0ZW5kKCEwLHt9LGkpLHQub3B0aW9ucy50eXBlPT1kJiZyLnZhbHVlIT09aS52YWx1ZSYmdC53cmFwcGVyLmZpbmQoXCI6cmFkaW9cIikucHJvcChcImNoZWNrZWRcIiwhMSksaS5vcGVyYXRvciYmci5zZXQoXCJvcGVyYXRvclwiLGkub3BlcmF0b3IpLHIuc2V0KFwidmFsdWVcIixpLnZhbHVlKSx0Lm1hbnVhbGx5VXBkYXRpbmdWTT0hMX0sdXBkYXRlRHNGaWx0ZXI6ZnVuY3Rpb24obil7dmFyIGkscixvLGE9dGhpcyxzPWEudmlld01vZGVsO2EubWFudWFsbHlVcGRhdGluZ1ZNfHxcIm9wZXJhdG9yXCI9PW4uZmllbGQmJnMudmFsdWU9PT10fHwoaT1lLmV4dGVuZCh7fSxhLnZpZXdNb2RlbC50b0pTT04oKSx7ZmllbGQ6YS5vcHRpb25zLmZpZWxkfSkscj17bG9naWM6XCJhbmRcIixmaWx0ZXJzOltdfSxpLnZhbHVlIT09dCYmbnVsbCE9PWkudmFsdWUmJnIuZmlsdGVycy5wdXNoKGkpLG89YS5fbWVyZ2UociksYS5kYXRhU291cmNlLmZpbHRlcihvLmZpbHRlcnMubGVuZ3RoP286e30pKX0sX21lcmdlOmZ1bmN0aW9uKHQpe3ZhciBuLHIsbyxhPXRoaXMscz10LmxvZ2ljfHxcImFuZFwiLGw9dC5maWx0ZXJzLGM9YS5kYXRhU291cmNlLmZpbHRlcigpfHx7ZmlsdGVyczpbXSxsb2dpYzpcImFuZFwifTtmb3IoaShjLGEub3B0aW9ucy5maWVsZCkscj0wLG89bC5sZW5ndGg7bz5yO3IrKyluPWxbcl0sbi52YWx1ZT1hLl9wYXJzZShuLnZhbHVlKTtyZXR1cm4gbD1lLmdyZXAobCxmdW5jdGlvbihlKXtyZXR1cm5cIlwiIT09ZS52YWx1ZSYmbnVsbCE9PWUudmFsdWV9KSxsLmxlbmd0aCYmKGMuZmlsdGVycy5sZW5ndGg/KHQuZmlsdGVycz1sLFwiYW5kXCIhPT1jLmxvZ2ljJiYoYy5maWx0ZXJzPVt7bG9naWM6Yy5sb2dpYyxmaWx0ZXJzOmMuZmlsdGVyc31dLGMubG9naWM9XCJhbmRcIiksYy5maWx0ZXJzLnB1c2gobC5sZW5ndGg+MT90OmxbMF0pKTooYy5maWx0ZXJzPWwsYy5sb2dpYz1zKSksY30sX2NyZWF0ZUNsZWFySWNvbjpmdW5jdGlvbigpe3ZhciB0PXRoaXM7ZShcIjxidXR0b24gdHlwZT0nYnV0dG9uJyBjbGFzcz0nay1idXR0b24gay1idXR0b24taWNvbicvPlwiKS5hdHRyKG8uYXR0cihcImJpbmRcIiksXCJ2aXNpYmxlOm9wZXJhdG9yVmlzaWJsZVwiKS5odG1sKFwiPHNwYW4gY2xhc3M9J2staWNvbiBrLWktY2xvc2UnLz5cIikuY2xpY2soZyh0LmNsZWFyRmlsdGVyLHQpKS5hcHBlbmRUbyh0LndyYXBwZXIpfSxjbGVhckZpbHRlcjpmdW5jdGlvbigpe3RoaXMudmlld01vZGVsLnNldChcInZhbHVlXCIsbnVsbCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuZmlsdGVyTW9kZWw9bnVsbCxsLmZuLmRlc3Ryb3kuY2FsbChlKSxvLmRlc3Ryb3koZS5lbGVtZW50KX0sZXZlbnRzOltjXSxvcHRpb25zOntuYW1lOlwiRmlsdGVyQ2VsbFwiLGRlbGF5OjIwMCxtaW5MZW5ndGg6MSxpbnB1dFdpZHRoOm51bGwsdmFsdWVzOnQsY3VzdG9tRGF0YVNvdXJjZTohMSxmaWVsZDpcIlwiLGRhdGFUZXh0RmllbGQ6XCJcIix0eXBlOlwic3RyaW5nXCIsc3VnZ2VzdERhdGFTb3VyY2U6bnVsbCxzdWdnZXN0aW9uT3BlcmF0b3I6XCJzdGFydHN3aXRoXCIsb3BlcmF0b3I6XCJlcVwiLHNob3dPcGVyYXRvcnM6ITAsdGVtcGxhdGU6bnVsbCxtZXNzYWdlczp7aXNUcnVlOlwiaXMgdHJ1ZVwiLGlzRmFsc2U6XCJpcyBmYWxzZVwiLGZpbHRlcjpcIkZpbHRlclwiLGNsZWFyOlwiQ2xlYXJcIixvcGVyYXRvcjpcIk9wZXJhdG9yXCJ9LG9wZXJhdG9yczp7c3RyaW5nOntlcTpwLG5lcTpmLHN0YXJ0c3dpdGg6XCJTdGFydHMgd2l0aFwiLGNvbnRhaW5zOlwiQ29udGFpbnNcIixkb2Vzbm90Y29udGFpbjpcIkRvZXMgbm90IGNvbnRhaW5cIixlbmRzd2l0aDpcIkVuZHMgd2l0aFwifSxudW1iZXI6e2VxOnAsbmVxOmYsZ3RlOlwiSXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvXCIsZ3Q6XCJJcyBncmVhdGVyIHRoYW5cIixsdGU6XCJJcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG9cIixsdDpcIklzIGxlc3MgdGhhblwifSxkYXRlOntlcTpwLG5lcTpmLGd0ZTpcIklzIGFmdGVyIG9yIGVxdWFsIHRvXCIsZ3Q6XCJJcyBhZnRlclwiLGx0ZTpcIklzIGJlZm9yZSBvciBlcXVhbCB0b1wiLGx0OlwiSXMgYmVmb3JlXCJ9LGVudW1zOntlcTpwLG5lcTpmfX19fSk7YS5wbHVnaW4obSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbih0KXt0PWUodCksdC5jaGlsZHJlbih2KS5jaGlsZHJlbihcIi5rLWljb25cIikucmVtb3ZlKCksdC5maWx0ZXIoXCI6aGFzKC5rLXBhbmVsKSw6aGFzKC5rLWNvbnRlbnQpXCIpLmNoaWxkcmVuKFwiLmstbGluazpub3QoOmhhcyhbY2xhc3MqPWstaS1hcnJvd10pKVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKSxuPXQucGFyZW50KCk7dC5hcHBlbmQoXCI8c3BhbiBjbGFzcz0nay1pY29uIFwiKyhuLmhhc0NsYXNzKEkpP1wiay1pLWFycm93LW4gay1wYW5lbGJhci1jb2xsYXBzZVwiOlwiay1pLWFycm93LXMgay1wYW5lbGJhci1leHBhbmRcIikrXCInLz5cIil9KX1mdW5jdGlvbiBpKHQpe3Q9ZSh0KSx0LmZpbHRlcihcIi5rLWZpcnN0Om5vdCg6Zmlyc3QtY2hpbGQpXCIpLnJlbW92ZUNsYXNzKHgpLHQuZmlsdGVyKFwiLmstbGFzdDpub3QoOmxhc3QtY2hpbGQpXCIpLnJlbW92ZUNsYXNzKGcpLHQuZmlsdGVyKFwiOmZpcnN0LWNoaWxkXCIpLmFkZENsYXNzKHgpLHQuZmlsdGVyKFwiOmxhc3QtY2hpbGRcIikuYWRkQ2xhc3MoZyl9dmFyIHI9d2luZG93LmtlbmRvLG89ci51aSxhPXIua2V5cyxzPWUuZXh0ZW5kLGw9ZS5lYWNoLGM9ci50ZW1wbGF0ZSxkPW8uV2lkZ2V0LHU9L14odWx8YXxkaXYpJC9pLGg9XCIua2VuZG9QYW5lbEJhclwiLHA9XCJpbWdcIixmPVwiaHJlZlwiLGc9XCJrLWxhc3RcIixtPVwiay1saW5rXCIsdj1cIi5cIittLF89XCJlcnJvclwiLHk9XCIuay1pdGVtXCIsdz1cIi5rLWdyb3VwXCIsYj13K1wiOnZpc2libGVcIixrPVwiay1pbWFnZVwiLHg9XCJrLWZpcnN0XCIsQz1cImV4cGFuZFwiLFM9XCJzZWxlY3RcIixUPVwiay1jb250ZW50XCIsRD1cImFjdGl2YXRlXCIsQT1cImNvbGxhcHNlXCIsRT1cIm1vdXNlZW50ZXJcIixNPVwibW91c2VsZWF2ZVwiLFA9XCJjb250ZW50TG9hZFwiLEk9XCJrLXN0YXRlLWFjdGl2ZVwiLHo9XCI+IC5rLXBhbmVsXCIsRj1cIj4gLmstY29udGVudFwiLFI9XCJrLXN0YXRlLWZvY3VzZWRcIixCPVwiay1zdGF0ZS1kaXNhYmxlZFwiLEw9XCJrLXN0YXRlLXNlbGVjdGVkXCIsTz1cIi5cIitMLEg9XCJrLXN0YXRlLWhpZ2hsaWdodFwiLE49eStcIjpub3QoLmstc3RhdGUtZGlzYWJsZWQpXCIsVj1OK1wiID4gLmstbGlua1wiLFU9eStcIi5rLXN0YXRlLWRpc2FibGVkID4gLmstbGlua1wiLFc9XCI+IGxpID4gXCIrTytcIiwgLmstcGFuZWwgPiBsaSA+IFwiK08saj1cImstc3RhdGUtZGVmYXVsdFwiLEc9XCJhcmlhLWRpc2FibGVkXCIscT1cImFyaWEtZXhwYW5kZWRcIiwkPVwiYXJpYS1oaWRkZW5cIixZPVwiYXJpYS1zZWxlY3RlZFwiLEs9XCI6dmlzaWJsZVwiLFE9XCI6ZW1wdHlcIixYPVwic2luZ2xlXCIsSj17Y29udGVudDpjKFwiPGRpdiByb2xlPSdyZWdpb24nIGNsYXNzPSdrLWNvbnRlbnQnIz0gY29udGVudEF0dHJpYnV0ZXMoZGF0YSkgIz4jPSBjb250ZW50KGl0ZW0pICM8L2Rpdj5cIiksZ3JvdXA6YyhcIjx1bCByb2xlPSdncm91cCcgYXJpYS1oaWRkZW49J3RydWUnIGNsYXNzPScjPSBncm91cENzc0NsYXNzKGdyb3VwKSAjJyM9IGdyb3VwQXR0cmlidXRlcyhncm91cCkgIz4jPSByZW5kZXJJdGVtcyhkYXRhKSAjPC91bD5cIiksaXRlbVdyYXBwZXI6YyhcIjwjPSB0YWcoaXRlbSkgIyBjbGFzcz0nIz0gdGV4dENsYXNzKGl0ZW0sIGdyb3VwKSAjJyAjPSBjb250ZW50VXJsKGl0ZW0pICMjPSB0ZXh0QXR0cmlidXRlcyhpdGVtKSAjPiM9IGltYWdlKGl0ZW0pICMjPSBzcHJpdGUoaXRlbSkgIyM9IHRleHQoaXRlbSkgIyM9IGFycm93KGRhdGEpICM8LyM9IHRhZyhpdGVtKSAjPlwiKSxpdGVtOmMoXCI8bGkgcm9sZT0nbWVudWl0ZW0nICM9YXJpYShpdGVtKSNjbGFzcz0nIz0gd3JhcHBlckNzc0NsYXNzKGdyb3VwLCBpdGVtKSAjJz4jPSBpdGVtV3JhcHBlcihkYXRhKSAjIyBpZiAoaXRlbS5pdGVtcykgeyAjIz0gc3ViR3JvdXAoeyBpdGVtczogaXRlbS5pdGVtcywgcGFuZWxCYXI6IHBhbmVsQmFyLCBncm91cDogeyBleHBhbmRlZDogaXRlbS5leHBhbmRlZCB9IH0pICMjIH0gZWxzZSBpZiAoaXRlbS5jb250ZW50IHx8IGl0ZW0uY29udGVudFVybCkgeyAjIz0gcmVuZGVyQ29udGVudChkYXRhKSAjIyB9ICM8L2xpPlwiKSxpbWFnZTpjKFwiPGltZyBjbGFzcz0nay1pbWFnZScgYWx0PScnIHNyYz0nIz0gaW1hZ2VVcmwgIycgLz5cIiksYXJyb3c6YyhcIjxzcGFuIGNsYXNzPScjPSBhcnJvd0NsYXNzKGl0ZW0pICMnPjwvc3Bhbj5cIiksc3ByaXRlOmMoXCI8c3BhbiBjbGFzcz0nay1zcHJpdGUgIz0gc3ByaXRlQ3NzQ2xhc3MgIyc+PC9zcGFuPlwiKSxlbXB0eTpjKFwiXCIpfSxaPXthcmlhOmZ1bmN0aW9uKGUpe3ZhciB0PVwiXCI7cmV0dXJuKGUuaXRlbXN8fGUuY29udGVudHx8ZS5jb250ZW50VXJsKSYmKHQrPXErXCI9J1wiKyhlLmV4cGFuZGVkP1widHJ1ZVwiOlwiZmFsc2VcIikrXCInIFwiKSxlLmVuYWJsZWQ9PT0hMSYmKHQrPUcrXCI9J3RydWUnXCIpLHRcbn0sd3JhcHBlckNzc0NsYXNzOmZ1bmN0aW9uKGUsdCl7dmFyIG49XCJrLWl0ZW1cIixpPXQuaW5kZXg7cmV0dXJuIG4rPXQuZW5hYmxlZD09PSExP1wiIFwiK0I6dC5leHBhbmRlZD09PSEwP1wiIFwiK0k6XCIgay1zdGF0ZS1kZWZhdWx0XCIsMD09PWkmJihuKz1cIiBrLWZpcnN0XCIpLGk9PWUubGVuZ3RoLTEmJihuKz1cIiBrLWxhc3RcIiksdC5jc3NDbGFzcyYmKG4rPVwiIFwiK3QuY3NzQ2xhc3MpLG59LHRleHRDbGFzczpmdW5jdGlvbihlLHQpe3ZhciBuPW07cmV0dXJuIHQuZmlyc3RMZXZlbCYmKG4rPVwiIGstaGVhZGVyXCIpLG59LHRleHRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGUpe3JldHVybiBlLnVybD9cIiBocmVmPSdcIitlLnVybCtcIidcIjpcIlwifSxhcnJvd0NsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0PVwiay1pY29uXCI7cmV0dXJuIHQrPWUuZXhwYW5kZWQ/XCIgay1pLWFycm93LW4gay1wYW5lbGJhci1jb2xsYXBzZVwiOlwiIGstaS1hcnJvdy1zIGstcGFuZWxiYXItZXhwYW5kXCJ9LHRleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZW5jb2RlZD09PSExP2UudGV4dDpyLmh0bWxFbmNvZGUoZS50ZXh0KX0sdGFnOmZ1bmN0aW9uKGUpe3JldHVybiBlLnVybHx8ZS5jb250ZW50VXJsP1wiYVwiOlwic3BhblwifSxncm91cEF0dHJpYnV0ZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZXhwYW5kZWQhPT0hMD9cIiBzdHlsZT0nZGlzcGxheTpub25lJ1wiOlwiXCJ9LGdyb3VwQ3NzQ2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm5cImstZ3JvdXAgay1wYW5lbFwifSxjb250ZW50QXR0cmlidXRlczpmdW5jdGlvbihlKXtyZXR1cm4gZS5pdGVtLmV4cGFuZGVkIT09ITA/XCIgc3R5bGU9J2Rpc3BsYXk6bm9uZSdcIjpcIlwifSxjb250ZW50OmZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnRlbnQ/ZS5jb250ZW50OmUuY29udGVudFVybD9cIlwiOlwiJm5ic3A7XCJ9LGNvbnRlbnRVcmw6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29udGVudFVybD8naHJlZj1cIicrZS5jb250ZW50VXJsKydcIic6XCJcIn19LGV0PWQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIGksbz10aGlzO2QuZm4uaW5pdC5jYWxsKG8sdCxuKSx0PW8ud3JhcHBlcj1vLmVsZW1lbnQuYWRkQ2xhc3MoXCJrLXdpZGdldCBrLXJlc2V0IGstaGVhZGVyIGstcGFuZWxiYXJcIiksbj1vLm9wdGlvbnMsdFswXS5pZCYmKG8uX2l0ZW1JZD10WzBdLmlkK1wiX3BiX2FjdGl2ZVwiKSxvLl90YWJpbmRleCgpLG8uX2luaXREYXRhKG4pLG8uX3VwZGF0ZUNsYXNzZXMoKSxvLl9hbmltYXRpb25zKG4pLHQub24oXCJjbGlja1wiK2gsVixmdW5jdGlvbih0KXtvLl9jbGljayhlKHQuY3VycmVudFRhcmdldCkpJiZ0LnByZXZlbnREZWZhdWx0KCl9KS5vbihFK2grXCIgXCIrTStoLFYsby5fdG9nZ2xlSG92ZXIpLm9uKFwiY2xpY2tcIitoLFUsITEpLm9uKFwia2V5ZG93blwiK2gsZS5wcm94eShvLl9rZXlkb3duLG8pKS5vbihcImZvY3VzXCIraCxmdW5jdGlvbigpe3ZhciBlPW8uc2VsZWN0KCk7by5fY3VycmVudChlWzBdP2U6by5fZmlyc3QoKSl9KS5vbihcImJsdXJcIitoLGZ1bmN0aW9uKCl7by5fY3VycmVudChudWxsKX0pLmF0dHIoXCJyb2xlXCIsXCJtZW51XCIpLGk9dC5maW5kKFwibGkuXCIrSStcIiA+IC5cIitUKSxpWzBdJiZvLmV4cGFuZChpLnBhcmVudCgpLCExKSxyLm5vdGlmeShvKX0sZXZlbnRzOltDLEEsUyxELF8sUF0sb3B0aW9uczp7bmFtZTpcIlBhbmVsQmFyXCIsYW5pbWF0aW9uOntleHBhbmQ6e2VmZmVjdHM6XCJleHBhbmQ6dmVydGljYWxcIixkdXJhdGlvbjoyMDB9LGNvbGxhcHNlOntkdXJhdGlvbjoyMDB9fSxleHBhbmRNb2RlOlwibXVsdGlwbGVcIn0sZGVzdHJveTpmdW5jdGlvbigpe2QuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuZWxlbWVudC5vZmYoaCksci5kZXN0cm95KHRoaXMuZWxlbWVudCl9LF9pbml0RGF0YTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZGF0YVNvdXJjZSYmKHQuZWxlbWVudC5lbXB0eSgpLHQuYXBwZW5kKGUuZGF0YVNvdXJjZSx0LmVsZW1lbnQpKX0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnMuYW5pbWF0aW9uO3RoaXMuX2FuaW1hdGlvbnMoZSksZS5hbmltYXRpb249cyghMCx0LGUuYW5pbWF0aW9uKSxcImRhdGFTb3VyY2VcImluIGUmJnRoaXMuX2luaXREYXRhKGUpLGQuZm4uc2V0T3B0aW9ucy5jYWxsKHRoaXMsZSl9LGV4cGFuZDpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXMscj17fTtyZXR1cm4gbj1uIT09ITEsdD10aGlzLmVsZW1lbnQuZmluZCh0KSx0LmVhY2goZnVuY3Rpb24obyxhKXthPWUoYSk7dmFyIHM9YS5maW5kKHopLmFkZChhLmZpbmQoRikpO2lmKCFhLmhhc0NsYXNzKEIpJiZzLmxlbmd0aD4wKXtpZihpLm9wdGlvbnMuZXhwYW5kTW9kZT09WCYmaS5fY29sbGFwc2VBbGxFeHBhbmRlZChhKSlyZXR1cm4gaTt0LmZpbmQoXCIuXCIrSCkucmVtb3ZlQ2xhc3MoSCksYS5hZGRDbGFzcyhIKSxufHwocj1pLm9wdGlvbnMuYW5pbWF0aW9uLGkub3B0aW9ucy5hbmltYXRpb249e2V4cGFuZDp7ZWZmZWN0czp7fX0sY29sbGFwc2U6e2hpZGU6ITAsZWZmZWN0czp7fX19KSxpLl90cmlnZ2VyRXZlbnQoQyxhKXx8aS5fdG9nZ2xlSXRlbShhLCExKSxufHwoaS5vcHRpb25zLmFuaW1hdGlvbj1yKX19KSxpfSxjb2xsYXBzZTpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXMscj17fTtyZXR1cm4gbj1uIT09ITEsdD1pLmVsZW1lbnQuZmluZCh0KSx0LmVhY2goZnVuY3Rpb24odCxvKXtvPWUobyk7dmFyIGE9by5maW5kKHopLmFkZChvLmZpbmQoRikpOyFvLmhhc0NsYXNzKEIpJiZhLmlzKEspJiYoby5yZW1vdmVDbGFzcyhIKSxufHwocj1pLm9wdGlvbnMuYW5pbWF0aW9uLGkub3B0aW9ucy5hbmltYXRpb249e2V4cGFuZDp7ZWZmZWN0czp7fX0sY29sbGFwc2U6e2hpZGU6ITAsZWZmZWN0czp7fX19KSxpLl90cmlnZ2VyRXZlbnQoQSxvKXx8aS5fdG9nZ2xlSXRlbShvLCEwKSxufHwoaS5vcHRpb25zLmFuaW1hdGlvbj1yKSl9KSxpfSxfdG9nZ2xlRGlzYWJsZWQ6ZnVuY3Rpb24oZSx0KXtlPXRoaXMuZWxlbWVudC5maW5kKGUpLGUudG9nZ2xlQ2xhc3Moaix0KS50b2dnbGVDbGFzcyhCLCF0KS5hdHRyKEcsIXQpfSxzZWxlY3Q6ZnVuY3Rpb24obil7dmFyIGk9dGhpcztyZXR1cm4gbj09PXQ/aS5lbGVtZW50LmZpbmQoVykucGFyZW50KCk6KG49aS5lbGVtZW50LmZpbmQobiksbi5sZW5ndGg/bi5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49ZSh0aGlzKSxyPW4uY2hpbGRyZW4odik7cmV0dXJuIG4uaGFzQ2xhc3MoQik/aTooaS5fdHJpZ2dlckV2ZW50KFMsbil8fGkuX3VwZGF0ZVNlbGVjdGVkKHIpLHQpfSk6dGhpcy5fdXBkYXRlU2VsZWN0ZWQobiksaSl9LGNsZWFyU2VsZWN0aW9uOmZ1bmN0aW9uKCl7dGhpcy5zZWxlY3QoZSgpKX0sZW5hYmxlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX3RvZ2dsZURpc2FibGVkKGUsdCE9PSExKSx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl90b2dnbGVEaXNhYmxlZChlLCExKSx0aGlzfSxhcHBlbmQ6ZnVuY3Rpb24oZSx0KXt0PXRoaXMuZWxlbWVudC5maW5kKHQpO3ZhciByPXRoaXMuX2luc2VydChlLHQsdC5sZW5ndGg/dC5maW5kKHopOm51bGwpO3JldHVybiBsKHIuaXRlbXMsZnVuY3Rpb24oKXtyLmdyb3VwLmFwcGVuZCh0aGlzKSxpKHRoaXMpfSksbih0KSxpKHIuZ3JvdXAuZmluZChcIi5rLWZpcnN0LCAuay1sYXN0XCIpKSxyLmdyb3VwLmhlaWdodChcImF1dG9cIiksdGhpc30saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKGUsdCl7dD10aGlzLmVsZW1lbnQuZmluZCh0KTt2YXIgbj10aGlzLl9pbnNlcnQoZSx0LHQucGFyZW50KCkpO3JldHVybiBsKG4uaXRlbXMsZnVuY3Rpb24oKXt0LmJlZm9yZSh0aGlzKSxpKHRoaXMpfSksaSh0KSxuLmdyb3VwLmhlaWdodChcImF1dG9cIiksdGhpc30saW5zZXJ0QWZ0ZXI6ZnVuY3Rpb24oZSx0KXt0PXRoaXMuZWxlbWVudC5maW5kKHQpO3ZhciBuPXRoaXMuX2luc2VydChlLHQsdC5wYXJlbnQoKSk7cmV0dXJuIGwobi5pdGVtcyxmdW5jdGlvbigpe3QuYWZ0ZXIodGhpcyksaSh0aGlzKX0pLGkodCksbi5ncm91cC5oZWlnaHQoXCJhdXRvXCIpLHRoaXN9LHJlbW92ZTpmdW5jdGlvbihlKXtlPXRoaXMuZWxlbWVudC5maW5kKGUpO3ZhciB0PXRoaXMscj1lLnBhcmVudHNVbnRpbCh0LmVsZW1lbnQseSksbz1lLnBhcmVudChcInVsXCIpO3JldHVybiBlLnJlbW92ZSgpLCFvfHxvLmhhc0NsYXNzKFwiay1wYW5lbGJhclwiKXx8by5jaGlsZHJlbih5KS5sZW5ndGh8fG8ucmVtb3ZlKCksci5sZW5ndGgmJihyPXIuZXEoMCksbihyKSxpKHIpKSx0fSxyZWxvYWQ6ZnVuY3Rpb24odCl7dmFyIG49dGhpczt0PW4uZWxlbWVudC5maW5kKHQpLHQuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7bi5fYWpheFJlcXVlc3QodCx0LmNoaWxkcmVuKFwiLlwiK1QpLCF0LmlzKEspKX0pfSxfZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50LmNoaWxkcmVuKE4pLmZpcnN0KCl9LF9sYXN0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50LmNoaWxkcmVuKE4pLmxhc3QoKSx0PWUuY2hpbGRyZW4oYik7cmV0dXJuIHRbMF0/dC5jaGlsZHJlbihOKS5sYXN0KCk6ZX0sX2N1cnJlbnQ6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4uX2ZvY3VzZWQscj1uLl9pdGVtSWQ7cmV0dXJuIGU9PT10P2k6KG4uZWxlbWVudC5yZW1vdmVBdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIpLGkmJihpWzBdLmlkPT09ciYmaS5yZW1vdmVBdHRyKFwiaWRcIiksaS5jaGlsZHJlbih2KS5yZW1vdmVDbGFzcyhSKSksZSYmKHI9ZVswXS5pZHx8cixlLmF0dHIoXCJpZFwiLHIpLmNoaWxkcmVuKHYpLmFkZENsYXNzKFIpLG4uZWxlbWVudC5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIscikpLG4uX2ZvY3VzZWQ9ZSx0KX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUua2V5Q29kZSxpPXQuX2N1cnJlbnQoKTtlLnRhcmdldD09ZS5jdXJyZW50VGFyZ2V0JiYobj09YS5ET1dOfHxuPT1hLlJJR0hUPyh0Ll9jdXJyZW50KHQuX25leHRJdGVtKGkpKSxlLnByZXZlbnREZWZhdWx0KCkpOm49PWEuVVB8fG49PWEuTEVGVD8odC5fY3VycmVudCh0Ll9wcmV2SXRlbShpKSksZS5wcmV2ZW50RGVmYXVsdCgpKTpuPT1hLkVOVEVSfHxuPT1hLlNQQUNFQkFSPyh0Ll9jbGljayhpLmNoaWxkcmVuKHYpKSxlLnByZXZlbnREZWZhdWx0KCkpOm49PWEuSE9NRT8odC5fY3VycmVudCh0Ll9maXJzdCgpKSxlLnByZXZlbnREZWZhdWx0KCkpOm49PWEuRU5EJiYodC5fY3VycmVudCh0Ll9sYXN0KCkpLGUucHJldmVudERlZmF1bHQoKSkpfSxfbmV4dEl0ZW06ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIHRoaXMuX2ZpcnN0KCk7dmFyIHQ9ZS5jaGlsZHJlbihiKSxuPWUubmV4dEFsbChcIjp2aXNpYmxlXCIpLmZpcnN0KCk7cmV0dXJuIHRbMF0mJihuPXQuY2hpbGRyZW4oXCIuXCIreCkpLG5bMF18fChuPWUucGFyZW50KGIpLnBhcmVudCh5KS5uZXh0KCkpLG5bMF18fChuPXRoaXMuX2ZpcnN0KCkpLG4uaGFzQ2xhc3MoQikmJihuPXRoaXMuX25leHRJdGVtKG4pKSxufSxfcHJldkl0ZW06ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIHRoaXMuX2xhc3QoKTt2YXIgdCxuPWUucHJldkFsbChcIjp2aXNpYmxlXCIpLmZpcnN0KCk7aWYoblswXSlmb3IodD1uO3RbMF07KXQ9dC5jaGlsZHJlbihiKS5jaGlsZHJlbihcIi5cIitnKSx0WzBdJiYobj10KTtlbHNlIG49ZS5wYXJlbnQoYikucGFyZW50KHkpLG5bMF18fChuPXRoaXMuX2xhc3QoKSk7cmV0dXJuIG4uaGFzQ2xhc3MoQikmJihuPXRoaXMuX3ByZXZJdGVtKG4pKSxufSxfaW5zZXJ0OmZ1bmN0aW9uKHQsbixpKXt2YXIgcixvLGE9dGhpcyxsPWUuaXNQbGFpbk9iamVjdCh0KSxjPW4mJm5bMF07cmV0dXJuIGN8fChpPWEuZWxlbWVudCksbz17Zmlyc3RMZXZlbDppLmhhc0NsYXNzKFwiay1wYW5lbGJhclwiKSxleHBhbmRlZDppLnBhcmVudCgpLmhhc0NsYXNzKEkpLGxlbmd0aDppLmNoaWxkcmVuKCkubGVuZ3RofSxjJiYhaS5sZW5ndGgmJihpPWUoZXQucmVuZGVyR3JvdXAoe2dyb3VwOm99KSkuYXBwZW5kVG8obikpLGx8fGUuaXNBcnJheSh0KT8ocj1lLm1hcChsP1t0XTp0LGZ1bmN0aW9uKHQsbil7cmV0dXJuIGUoXCJzdHJpbmdcIj09dHlwZW9mIHQ/dDpldC5yZW5kZXJJdGVtKHtncm91cDpvLGl0ZW06cyh0LHtpbmRleDpufSl9KSl9KSxjJiZuLmF0dHIocSwhMSkpOihyPVwic3RyaW5nXCI9PXR5cGVvZiB0JiZcIjxcIiE9dFswXT9hLmVsZW1lbnQuZmluZCh0KTplKHQpLGEuX3VwZGF0ZUl0ZW1zQ2xhc3NlcyhyKSkse2l0ZW1zOnIsZ3JvdXA6aX19LF90b2dnbGVIb3ZlcjpmdW5jdGlvbih0KXt2YXIgbj1lKHQuY3VycmVudFRhcmdldCk7bi5wYXJlbnRzKFwibGkuXCIrQikubGVuZ3RofHxuLnRvZ2dsZUNsYXNzKFwiay1zdGF0ZS1ob3ZlclwiLHQudHlwZT09RSl9LF91cGRhdGVDbGFzc2VzOmZ1bmN0aW9uKCl7dmFyIHQscixvPXRoaXM7dD1vLmVsZW1lbnQuZmluZChcImxpID4gdWxcIikubm90KGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcykucGFyZW50c1VudGlsKFwiLmstcGFuZWxiYXJcIixcImRpdlwiKS5sZW5ndGh9KS5hZGRDbGFzcyhcImstZ3JvdXAgay1wYW5lbFwiKS5hdHRyKFwicm9sZVwiLFwiZ3JvdXBcIiksdC5wYXJlbnQoKS5hdHRyKHEsITEpLm5vdChcIi5cIitJKS5jaGlsZHJlbihcInVsXCIpLmF0dHIoJCwhMCkuaGlkZSgpLHI9by5lbGVtZW50LmFkZCh0KS5jaGlsZHJlbigpLG8uX3VwZGF0ZUl0ZW1zQ2xhc3NlcyhyKSxuKHIpLGkocil9LF91cGRhdGVJdGVtc0NsYXNzZXM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUubGVuZ3RoLG49MDt0Pm47bisrKXRoaXMuX3VwZGF0ZUl0ZW1DbGFzc2VzKGVbbl0sbil9LF91cGRhdGVJdGVtQ2xhc3NlczpmdW5jdGlvbih0LG4pe3ZhciBpLG8sYT10aGlzLl9zZWxlY3RlZCxzPXRoaXMub3B0aW9ucy5jb250ZW50VXJscyxsPXMmJnNbbl0sYz10aGlzLmVsZW1lbnRbMF07dD1lKHQpLmFkZENsYXNzKFwiay1pdGVtXCIpLmF0dHIoXCJyb2xlXCIsXCJtZW51aXRlbVwiKSxyLnN1cHBvcnQuYnJvd3Nlci5tc2llJiZ0LmNzcyhcImxpc3Qtc3R5bGUtcG9zaXRpb25cIixcImluc2lkZVwiKS5jc3MoXCJsaXN0LXN0eWxlLXBvc2l0aW9uXCIsXCJcIiksdC5jaGlsZHJlbihwKS5hZGRDbGFzcyhrKSxvPXQuY2hpbGRyZW4oXCJhXCIpLmFkZENsYXNzKG0pLG9bMF0mJihvLmF0dHIoXCJocmVmXCIsbCksby5jaGlsZHJlbihwKS5hZGRDbGFzcyhrKSksdC5maWx0ZXIoXCI6bm90KFtkaXNhYmxlZF0pOm5vdChbY2xhc3MqPWstc3RhdGVdKVwiKS5hZGRDbGFzcyhcImstc3RhdGUtZGVmYXVsdFwiKSx0LmZpbHRlcihcImxpW2Rpc2FibGVkXVwiKS5hZGRDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIikuYXR0cihHLCEwKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIiksdC5jaGlsZHJlbihcImRpdlwiKS5hZGRDbGFzcyhUKS5hdHRyKFwicm9sZVwiLFwicmVnaW9uXCIpLmF0dHIoJCwhMCkuaGlkZSgpLnBhcmVudCgpLmF0dHIocSwhMSksbz10LmNoaWxkcmVuKE8pLG9bMF0mJihhJiZhLnJlbW92ZUF0dHIoWSkuY2hpbGRyZW4oTykucmVtb3ZlQ2xhc3MoTCksby5hZGRDbGFzcyhMKSx0aGlzLl9zZWxlY3RlZD10LmF0dHIoWSwhMCkpLHQuY2hpbGRyZW4odilbMF18fChpPVwiPHNwYW4gY2xhc3M9J1wiK20rXCInLz5cIixzJiZzW25dJiZ0WzBdLnBhcmVudE5vZGU9PWMmJihpPSc8YSBjbGFzcz1cImstbGluayBrLWhlYWRlclwiIGhyZWY9XCInK3Nbbl0rJ1wiLz4nKSx0LmNvbnRlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuISh0aGlzLm5vZGVOYW1lLm1hdGNoKHUpfHwzPT10aGlzLm5vZGVUeXBlJiYhZS50cmltKHRoaXMubm9kZVZhbHVlKSl9KS53cmFwQWxsKGkpKSx0LnBhcmVudChcIi5rLXBhbmVsYmFyXCIpWzBdJiZ0LmNoaWxkcmVuKHYpLmFkZENsYXNzKFwiay1oZWFkZXJcIil9LF9jbGljazpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGEscyxsPXRoaXMsYz1sLmVsZW1lbnQ7aWYoIWUucGFyZW50cyhcImxpLlwiK0IpLmxlbmd0aCYmZS5jbG9zZXN0KFwiLmstd2lkZ2V0XCIpWzBdPT1jWzBdKXtpZihvPWUuY2xvc2VzdCh2KSxhPW8uY2xvc2VzdCh5KSxsLl91cGRhdGVTZWxlY3RlZChvKSxuPWEuZmluZCh6KS5hZGQoYS5maW5kKEYpKSxpPW8uYXR0cihmKSxyPWkmJihcIiNcIj09aS5jaGFyQXQoaS5sZW5ndGgtMSl8fC0xIT1pLmluZGV4T2YoXCIjXCIrbC5lbGVtZW50WzBdLmlkK1wiLVwiKSksdD0hKCFyJiYhbi5sZW5ndGgpLG4uZGF0YShcImFuaW1hdGluZ1wiKSlyZXR1cm4gdDtpZihsLl90cmlnZ2VyRXZlbnQoUyxhKSYmKHQ9ITApLHQhPT0hMSlyZXR1cm4gbC5vcHRpb25zLmV4cGFuZE1vZGU9PVgmJmwuX2NvbGxhcHNlQWxsRXhwYW5kZWQoYSk/dDoobi5sZW5ndGgmJihzPW4uaXMoSyksbC5fdHJpZ2dlckV2ZW50KHM/QTpDLGEpfHwodD1sLl90b2dnbGVJdGVtKGEscykpKSx0KX19LF90b2dnbGVJdGVtOmZ1bmN0aW9uKGUsbil7dmFyIGkscixvPXRoaXMsYT1lLmZpbmQoeikscz1lLmZpbmQodiksbD1zLmF0dHIoZik7cmV0dXJuIGEubGVuZ3RoPyh0aGlzLl90b2dnbGVHcm91cChhLG4pLGk9ITApOihyPWUuY2hpbGRyZW4oXCIuXCIrVCksci5sZW5ndGgmJihpPSEwLHIuaXMoUSkmJmwhPT10P28uX2FqYXhSZXF1ZXN0KGUscixuKTpvLl90b2dnbGVHcm91cChyLG4pKSksaX0sX3RvZ2dsZUdyb3VwOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPW4ub3B0aW9ucy5hbmltYXRpb24scj1pLmV4cGFuZCxvPXMoe30saS5jb2xsYXBzZSksYT1vJiZcImVmZmVjdHNcImluIG87ZS5pcyhLKT09dCYmKGUucGFyZW50KCkuYXR0cihxLCF0KS5hdHRyKCQsdCkudG9nZ2xlQ2xhc3MoSSwhdCkuZmluZChcIj4gLmstbGluayA+IC5rLWljb25cIikudG9nZ2xlQ2xhc3MoXCJrLWktYXJyb3ctblwiLCF0KS50b2dnbGVDbGFzcyhcImstcGFuZWxiYXItY29sbGFwc2VcIiwhdCkudG9nZ2xlQ2xhc3MoXCJrLWktYXJyb3ctc1wiLHQpLnRvZ2dsZUNsYXNzKFwiay1wYW5lbGJhci1leHBhbmRcIix0KSxyPXQ/cyhhP286cyh7cmV2ZXJzZTohMH0scikse2hpZGU6ITB9KTpzKHtjb21wbGV0ZTpmdW5jdGlvbihlKXtuLl90cmlnZ2VyRXZlbnQoRCxlLmNsb3Nlc3QoeSkpfX0sciksZS5rZW5kb1N0b3AoITAsITApLmtlbmRvQW5pbWF0ZShyKSl9LF9jb2xsYXBzZUFsbEV4cGFuZGVkOmZ1bmN0aW9uKHQpe3ZhciBuLGk9dGhpcyxyPSExLG89dC5maW5kKHopLmFkZCh0LmZpbmQoRikpO3JldHVybiBvLmlzKEspJiYocj0hMCksby5pcyhLKXx8MD09PW8ubGVuZ3RofHwobj10LnNpYmxpbmdzKCksbi5maW5kKHopLmFkZChuLmZpbmQoRikpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBlKHRoaXMpLmlzKEspfSkuZWFjaChmdW5jdGlvbih0LG4pe249ZShuKSxyPWkuX3RyaWdnZXJFdmVudChBLG4uY2xvc2VzdCh5KSkscnx8aS5fdG9nZ2xlR3JvdXAobiwhMCl9KSkscn0sX2FqYXhSZXF1ZXN0OmZ1bmN0aW9uKHQsbixpKXt2YXIgcj10aGlzLG89dC5maW5kKFwiLmstcGFuZWxiYXItY29sbGFwc2UsIC5rLXBhbmVsYmFyLWV4cGFuZFwiKSxhPXQuZmluZCh2KSxzPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtvLmFkZENsYXNzKFwiay1sb2FkaW5nXCIpfSwxMDApLGw9e30sYz1hLmF0dHIoZik7ZS5hamF4KHt0eXBlOlwiR0VUXCIsY2FjaGU6ITEsdXJsOmMsZGF0YVR5cGU6XCJodG1sXCIsZGF0YTpsLGVycm9yOmZ1bmN0aW9uKGUsdCl7by5yZW1vdmVDbGFzcyhcImstbG9hZGluZ1wiKSxyLnRyaWdnZXIoXyx7eGhyOmUsc3RhdHVzOnR9KSYmdGhpcy5jb21wbGV0ZSgpfSxjb21wbGV0ZTpmdW5jdGlvbigpe2NsZWFyVGltZW91dChzKSxvLnJlbW92ZUNsYXNzKFwiay1sb2FkaW5nXCIpfSxzdWNjZXNzOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIG8oKXtyZXR1cm57ZWxlbWVudHM6bi5nZXQoKX19dHJ5e3IuYW5ndWxhcihcImNsZWFudXBcIixvKSxuLmh0bWwoZSksci5hbmd1bGFyKFwiY29tcGlsZVwiLG8pfWNhdGNoKGEpe3ZhciBzPXdpbmRvdy5jb25zb2xlO3MmJnMuZXJyb3ImJnMuZXJyb3IoYS5uYW1lK1wiOiBcIithLm1lc3NhZ2UrXCIgaW4gXCIrYyksdGhpcy5lcnJvcih0aGlzLnhocixcImVycm9yXCIpfXIuX3RvZ2dsZUdyb3VwKG4saSksci50cmlnZ2VyKFAse2l0ZW06dFswXSxjb250ZW50RWxlbWVudDpuWzBdfSl9fSl9LF90cmlnZ2VyRXZlbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3JldHVybiBuLnRyaWdnZXIoZSx7aXRlbTp0WzBdfSl9LF91cGRhdGVTZWxlY3RlZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5lbGVtZW50LGk9ZS5wYXJlbnQoeSkscj10Ll9zZWxlY3RlZDtyJiZyLnJlbW92ZUF0dHIoWSksdC5fc2VsZWN0ZWQ9aS5hdHRyKFksITApLG4uZmluZChXKS5yZW1vdmVDbGFzcyhMKSxuLmZpbmQoXCI+IC5cIitIK1wiLCAuay1wYW5lbCA+IC5cIitIKS5yZW1vdmVDbGFzcyhIKSxlLmFkZENsYXNzKEwpLGUucGFyZW50c1VudGlsKG4seSkuZmlsdGVyKFwiOmhhcyguay1oZWFkZXIpXCIpLmFkZENsYXNzKEgpLHQuX2N1cnJlbnQoaVswXT9pOm51bGwpfSxfYW5pbWF0aW9uczpmdW5jdGlvbihlKXtlJiZcImFuaW1hdGlvblwiaW4gZSYmIWUuYW5pbWF0aW9uJiYoZS5hbmltYXRpb249e2V4cGFuZDp7ZWZmZWN0czp7fX0sY29sbGFwc2U6e2hpZGU6ITAsZWZmZWN0czp7fX19KX19KTtzKGV0LHtyZW5kZXJJdGVtOmZ1bmN0aW9uKGUpe2U9cyh7cGFuZWxCYXI6e30sZ3JvdXA6e319LGUpO3ZhciB0PUouZW1wdHksbj1lLml0ZW07cmV0dXJuIEouaXRlbShzKGUse2ltYWdlOm4uaW1hZ2VVcmw/Si5pbWFnZTp0LHNwcml0ZTpuLnNwcml0ZUNzc0NsYXNzP0ouc3ByaXRlOnQsaXRlbVdyYXBwZXI6Si5pdGVtV3JhcHBlcixyZW5kZXJDb250ZW50OmV0LnJlbmRlckNvbnRlbnQsYXJyb3c6bi5pdGVtc3x8bi5jb250ZW50fHxuLmNvbnRlbnRVcmw/Si5hcnJvdzp0LHN1Ykdyb3VwOmV0LnJlbmRlckdyb3VwfSxaKSl9LHJlbmRlckdyb3VwOmZ1bmN0aW9uKGUpe3JldHVybiBKLmdyb3VwKHMoe3JlbmRlckl0ZW1zOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1cIlwiLG49MCxpPWUuaXRlbXMscj1pP2kubGVuZ3RoOjAsbz1zKHtsZW5ndGg6cn0sZS5ncm91cCk7cj5uO24rKyl0Kz1ldC5yZW5kZXJJdGVtKHMoZSx7Z3JvdXA6byxpdGVtOnMoe2luZGV4Om59LGlbbl0pfSkpO3JldHVybiB0fX0sZSxaKSl9LHJlbmRlckNvbnRlbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIEouY29udGVudChzKGUsWikpfX0pLHIudWkucGx1Z2luKGV0KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXt2YXIgbj13aW5kb3cua2VuZG8saT1uLnVpLHI9aS5XaWRnZXQsbz1cImhvcml6b250YWxcIixhPVwidmVydGljYWxcIixzPTAsbD0xMDAsYz0wLGQ9NSx1PVwiay1wcm9ncmVzc2JhclwiLGg9XCJrLXByb2dyZXNzYmFyLXJldmVyc2VcIixwPVwiay1wcm9ncmVzc2Jhci1pbmRldGVybWluYXRlXCIsZj1cImstY29tcGxldGVcIixnPVwiay1zdGF0ZS1zZWxlY3RlZFwiLG09XCJrLXByb2dyZXNzLXN0YXR1c1wiLHY9XCJrLXN0YXRlLXNlbGVjdGVkXCIsXz1cImstc3RhdGUtZGVmYXVsdFwiLHk9XCJrLXN0YXRlLWRpc2FibGVkXCIsdz17VkFMVUU6XCJ2YWx1ZVwiLFBFUkNFTlQ6XCJwZXJjZW50XCIsQ0hVTks6XCJjaHVua1wifSxiPVwiY2hhbmdlXCIsaz1cImNvbXBsZXRlXCIseD1cImJvb2xlYW5cIixDPU1hdGgsUz1lLmV4dGVuZCxUPWUucHJveHksRD0xMDAsQT00MDAsRT0zLE09e3Byb2dyZXNzU3RhdHVzOlwiPHNwYW4gY2xhc3M9J2stcHJvZ3Jlc3Mtc3RhdHVzLXdyYXAnPjxzcGFuIGNsYXNzPSdrLXByb2dyZXNzLXN0YXR1cyc+PC9zcGFuPjwvc3Bhbj5cIn0sUD1yLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7ci5mbi5pbml0LmNhbGwodGhpcyxlLHQpLHQ9bi5vcHRpb25zLG4uX3Byb2dyZXNzUHJvcGVydHk9dC5vcmllbnRhdGlvbj09PW8/XCJ3aWR0aFwiOlwiaGVpZ2h0XCIsbi5fZmllbGRzKCksdC52YWx1ZT1uLl92YWxpZGF0ZVZhbHVlKHQudmFsdWUpLG4uX3ZhbGlkYXRlVHlwZSh0LnR5cGUpLG4uX3dyYXBwZXIoKSxuLl9wcm9ncmVzc0FuaW1hdGlvbigpLHQudmFsdWUhPT10Lm1pbiYmdC52YWx1ZSE9PSExJiZuLl91cGRhdGVQcm9ncmVzcygpfSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ci5mbi5zZXRPcHRpb25zLmNhbGwodCxlKSxlLmhhc093blByb3BlcnR5KFwicmV2ZXJzZVwiKSYmdC53cmFwcGVyLnRvZ2dsZUNsYXNzKFwiay1wcm9ncmVzc2Jhci1yZXZlcnNlXCIsZS5yZXZlcnNlKSxlLmhhc093blByb3BlcnR5KFwiZW5hYmxlXCIpJiZ0LmVuYWJsZShlLmVuYWJsZSksdC5fcHJvZ3Jlc3NBbmltYXRpb24oKSx0Ll92YWxpZGF0ZVZhbHVlKCksdC5fdXBkYXRlUHJvZ3Jlc3MoKX0sZXZlbnRzOltiLGtdLG9wdGlvbnM6e25hbWU6XCJQcm9ncmVzc0JhclwiLG9yaWVudGF0aW9uOm8scmV2ZXJzZTohMSxtaW46cyxtYXg6bCx2YWx1ZTpjLGVuYWJsZTohMCx0eXBlOncuVkFMVUUsY2h1bmtDb3VudDpkLHNob3dTdGF0dXM6ITAsYW5pbWF0aW9uOnt9fSxfZmllbGRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0Ll9pc1N0YXJ0ZWQ9ITEsdC5wcm9ncmVzc1dyYXBwZXI9dC5wcm9ncmVzc1N0YXR1cz1lKCl9LF92YWxpZGF0ZVR5cGU6ZnVuY3Rpb24oaSl7dmFyIHI9ITE7aWYoZS5lYWNoKHcsZnVuY3Rpb24oZSxuKXtyZXR1cm4gbj09PWk/KHI9ITAsITEpOnR9KSwhcil0aHJvdyBFcnJvcihuLmZvcm1hdChcIkludmFsaWQgUHJvZ3Jlc3NCYXIgdHlwZSAnezB9J1wiLGkpKX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10LndyYXBwZXI9dC5lbGVtZW50LGk9dC5vcHRpb25zLHI9aS5vcmllbnRhdGlvbjtuLmFkZENsYXNzKFwiay13aWRnZXQgXCIrdSksbi5hZGRDbGFzcyh1K1wiLVwiKyhyPT09bz9vOmEpKSxpLmVuYWJsZT09PSExJiZuLmFkZENsYXNzKHkpLGkucmV2ZXJzZSYmbi5hZGRDbGFzcyhoKSxpLnZhbHVlPT09ITEmJm4uYWRkQ2xhc3MocCksaS50eXBlPT09dy5DSFVOSz90Ll9hZGRDaHVua1Byb2dyZXNzV3JhcHBlcigpOmkuc2hvd1N0YXR1cyYmKHQucHJvZ3Jlc3NTdGF0dXM9dC53cmFwcGVyLnByZXBlbmQoTS5wcm9ncmVzc1N0YXR1cykuZmluZChcIi5cIittKSxlPWkudmFsdWUhPT0hMT9pLnZhbHVlOmkubWluLHQucHJvZ3Jlc3NTdGF0dXMudGV4dChpLnR5cGU9PT13LlZBTFVFP2U6dC5fY2FsY3VsYXRlUGVyY2VudGFnZShlKStcIiVcIikpfSx2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fdmFsdWUoZSl9LF92YWx1ZTpmdW5jdGlvbihlKXt2YXIgbixpPXRoaXMscj1pLm9wdGlvbnM7cmV0dXJuIGU9PT10P3IudmFsdWU6KHR5cGVvZiBlIT09eD8oZT1pLl9yb3VuZFZhbHVlKGUpLGlzTmFOKGUpfHwobj1pLl92YWxpZGF0ZVZhbHVlKGUpLG4hPT1yLnZhbHVlJiYoaS53cmFwcGVyLnJlbW92ZUNsYXNzKHApLHIudmFsdWU9bixpLl9pc1N0YXJ0ZWQ9ITAsaS5fdXBkYXRlUHJvZ3Jlc3MoKSkpKTplfHwoaS53cmFwcGVyLmFkZENsYXNzKHApLHIudmFsdWU9ITEpLHQpfSxfcm91bmRWYWx1ZTpmdW5jdGlvbihlKXtlPXBhcnNlRmxvYXQoZSk7dmFyIHQ9Qy5wb3coMTAsRSk7cmV0dXJuIEMuZmxvb3IoZSp0KS90fSxfdmFsaWRhdGVWYWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zO2lmKGUhPT0hMSl7aWYobi5taW4+PWV8fGU9PT0hMClyZXR1cm4gbi5taW47aWYoZT49bi5tYXgpcmV0dXJuIG4ubWF4fWVsc2UgaWYoZT09PSExKXJldHVybiExO3JldHVybiBpc05hTih0Ll9yb3VuZFZhbHVlKGUpKT9uLm1pbjplfSxfdXBkYXRlUHJvZ3Jlc3M6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLG49ZS5fY2FsY3VsYXRlUGVyY2VudGFnZSgpO3QudHlwZT09PXcuQ0hVTks/KGUuX3VwZGF0ZUNodW5rcyhuKSxlLl9vblByb2dyZXNzVXBkYXRlQWx3YXlzKHQudmFsdWUpKTplLl91cGRhdGVQcm9ncmVzc1dyYXBwZXIobil9LF91cGRhdGVDaHVua3M6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLGk9bi5vcHRpb25zLHI9aS5jaHVua0NvdW50LHM9cGFyc2VJbnQoRC9yKjEwMCwxMCkvMTAwLGw9cGFyc2VJbnQoMTAwKmUsMTApLzEwMCxjPUMuZmxvb3IobC9zKTt0PW4ud3JhcHBlci5maW5kKGkub3JpZW50YXRpb249PT1vJiYhaS5yZXZlcnNlfHxpLm9yaWVudGF0aW9uPT09YSYmaS5yZXZlcnNlP1wibGkuay1pdGVtOmx0KFwiK2MrXCIpXCI6XCJsaS5rLWl0ZW06Z3QoLVwiKyhjKzEpK1wiKVwiKSxuLndyYXBwZXIuZmluZChcIi5cIit2KS5yZW1vdmVDbGFzcyh2KS5hZGRDbGFzcyhfKSx0LnJlbW92ZUNsYXNzKF8pLmFkZENsYXNzKHYpfSxfdXBkYXRlUHJvZ3Jlc3NXcmFwcGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMsaT10LndyYXBwZXIuZmluZChcIi5cIitnKSxyPXQuX2lzU3RhcnRlZD90Ll9hbmltYXRpb24uZHVyYXRpb246MCxvPXt9OzA9PT1pLmxlbmd0aCYmdC5fYWRkUmVndWxhclByb2dyZXNzV3JhcHBlcigpLG9bdC5fcHJvZ3Jlc3NQcm9wZXJ0eV09ZStcIiVcIix0LnByb2dyZXNzV3JhcHBlci5hbmltYXRlKG8se2R1cmF0aW9uOnIsc3RhcnQ6VCh0Ll9vblByb2dyZXNzQW5pbWF0ZVN0YXJ0LHQpLHByb2dyZXNzOlQodC5fb25Qcm9ncmVzc0FuaW1hdGUsdCksY29tcGxldGU6VCh0Ll9vblByb2dyZXNzQW5pbWF0ZUNvbXBsZXRlLHQsbi52YWx1ZSksYWx3YXlzOlQodC5fb25Qcm9ncmVzc1VwZGF0ZUFsd2F5cyx0LG4udmFsdWUpfSl9LF9vblByb2dyZXNzQW5pbWF0ZVN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5wcm9ncmVzc1dyYXBwZXIuc2hvdygpfSxfb25Qcm9ncmVzc0FuaW1hdGU6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLGk9bi5vcHRpb25zLHI9cGFyc2VGbG9hdChlLmVsZW0uc3R5bGVbbi5fcHJvZ3Jlc3NQcm9wZXJ0eV0sMTApO2kuc2hvd1N0YXR1cyYmKHQ9MWU0L3BhcnNlRmxvYXQobi5wcm9ncmVzc1dyYXBwZXJbMF0uc3R5bGVbbi5fcHJvZ3Jlc3NQcm9wZXJ0eV0pLG4ucHJvZ3Jlc3NXcmFwcGVyLmZpbmQoXCIuay1wcm9ncmVzcy1zdGF0dXMtd3JhcFwiKS5jc3Mobi5fcHJvZ3Jlc3NQcm9wZXJ0eSx0K1wiJVwiKSksaS50eXBlIT09dy5DSFVOSyYmOTg+PXImJm4ucHJvZ3Jlc3NXcmFwcGVyLnJlbW92ZUNsYXNzKGYpfSxfb25Qcm9ncmVzc0FuaW1hdGVDb21wbGV0ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLGk9cGFyc2VGbG9hdCh0LnByb2dyZXNzV3JhcHBlclswXS5zdHlsZVt0Ll9wcm9ncmVzc1Byb3BlcnR5XSk7bi50eXBlIT09dy5DSFVOSyYmaT45OCYmdC5wcm9ncmVzc1dyYXBwZXIuYWRkQ2xhc3MoZiksbi5zaG93U3RhdHVzJiZ0LnByb2dyZXNzU3RhdHVzLnRleHQobi50eXBlPT09dy5WQUxVRT9lOkMuZmxvb3IodC5fY2FsY3VsYXRlUGVyY2VudGFnZShlKSkrXCIlXCIpLGU9PT1uLm1pbiYmdC5wcm9ncmVzc1dyYXBwZXIuaGlkZSgpfSxfb25Qcm9ncmVzc1VwZGF0ZUFsd2F5czpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zO3QuX2lzU3RhcnRlZCYmdC50cmlnZ2VyKGIse3ZhbHVlOmV9KSxlPT09bi5tYXgmJnQuX2lzU3RhcnRlZCYmdC50cmlnZ2VyKGsse3ZhbHVlOm4ubWF4fSl9LGVuYWJsZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5vcHRpb25zO2kuZW5hYmxlPXQ9PT1lPyEwOmUsbi53cmFwcGVyLnRvZ2dsZUNsYXNzKHksIWkuZW5hYmxlKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ci5mbi5kZXN0cm95LmNhbGwoZSl9LF9hZGRDaHVua1Byb2dyZXNzV3JhcHBlcjpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQub3B0aW9ucyxpPXQud3JhcHBlcixyPUQvbi5jaHVua0NvdW50LG89XCJcIjtmb3IoMT49bi5jaHVua0NvdW50JiYobi5jaHVua0NvdW50PWQpLG8rPVwiPHVsIGNsYXNzPSdrLXJlc2V0Jz5cIixlPW4uY2h1bmtDb3VudC0xO2U+PTA7ZS0tKW8rPVwiPGxpIGNsYXNzPSdrLWl0ZW0gay1zdGF0ZS1kZWZhdWx0Jz48L2xpPlwiO28rPVwiPC91bD5cIixpLmFwcGVuZChvKS5maW5kKFwiLmstaXRlbVwiKS5jc3ModC5fcHJvZ3Jlc3NQcm9wZXJ0eSxyK1wiJVwiKS5maXJzdCgpLmFkZENsYXNzKFwiay1maXJzdFwiKS5lbmQoKS5sYXN0KCkuYWRkQ2xhc3MoXCJrLWxhc3RcIiksdC5fbm9ybWFsaXplQ2h1bmtTaXplKCl9LF9ub3JtYWxpemVDaHVua1NpemU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLG49ZS53cmFwcGVyLmZpbmQoXCIuay1pdGVtOmxhc3RcIiksaT1wYXJzZUZsb2F0KG5bMF0uc3R5bGVbZS5fcHJvZ3Jlc3NQcm9wZXJ0eV0pLHI9RC10LmNodW5rQ291bnQqaTtyPjAmJm4uY3NzKGUuX3Byb2dyZXNzUHJvcGVydHksaStyK1wiJVwiKX0sX2FkZFJlZ3VsYXJQcm9ncmVzc1dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QucHJvZ3Jlc3NXcmFwcGVyPWUoXCI8ZGl2IGNsYXNzPSdcIitnK1wiJz48L2Rpdj5cIikuYXBwZW5kVG8odC53cmFwcGVyKSx0Lm9wdGlvbnMuc2hvd1N0YXR1cyYmKHQucHJvZ3Jlc3NXcmFwcGVyLmFwcGVuZChNLnByb2dyZXNzU3RhdHVzKSx0LnByb2dyZXNzU3RhdHVzPXQud3JhcHBlci5maW5kKFwiLlwiK20pKX0sX2NhbGN1bGF0ZUNodW5rU2l6ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm9wdGlvbnMuY2h1bmtDb3VudCxuPWUud3JhcHBlci5maW5kKFwidWwuay1yZXNldFwiKTtyZXR1cm4ocGFyc2VJbnQobi5jc3MoZS5fcHJvZ3Jlc3NQcm9wZXJ0eSksMTApLSh0LTEpKS90fSxfY2FsY3VsYXRlUGVyY2VudGFnZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5vcHRpb25zLHI9ZSE9PXQ/ZTppLnZhbHVlLG89aS5taW4sYT1pLm1heDtyZXR1cm4gbi5fb25lUGVyY2VudD1DLmFicygoYS1vKS8xMDApLEMuYWJzKChyLW8pL24uX29uZVBlcmNlbnQpfSxfcHJvZ3Jlc3NBbmltYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLG49dC5hbmltYXRpb247ZS5fYW5pbWF0aW9uPW49PT0hMT97ZHVyYXRpb246MH06Uyh7ZHVyYXRpb246QX0sdC5hbmltYXRpb24pfX0pO24udWkucGx1Z2luKFApfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4odCl7dC5jaGlsZHJlbihnKS5hZGRDbGFzcyhDKSx0LmNoaWxkcmVuKFwiYVwiKS5hZGRDbGFzcyh5KS5jaGlsZHJlbihnKS5hZGRDbGFzcyhDKSx0LmZpbHRlcihcIjpub3QoW2Rpc2FibGVkXSk6bm90KFtjbGFzcyo9ay1zdGF0ZS1kaXNhYmxlZF0pXCIpLmFkZENsYXNzKEYpLHQuZmlsdGVyKFwibGlbZGlzYWJsZWRdXCIpLmFkZENsYXNzKHopLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKSx0LmZpbHRlcihcIjpub3QoW2NsYXNzKj1rLXN0YXRlXSlcIikuY2hpbGRyZW4oXCJhXCIpLmZpbHRlcihcIjpmb2N1c1wiKS5wYXJlbnQoKS5hZGRDbGFzcyhSK1wiIFwiK08pLHQuYXR0cihcInJvbGVcIixcInRhYlwiKSx0LmZpbHRlcihcIi5cIitSKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKSx0LmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpO3QuY2hpbGRyZW4oXCIuXCIreSkubGVuZ3RofHx0LmNvbnRlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuISh0aGlzLm5vZGVOYW1lLm1hdGNoKHApfHwzPT10aGlzLm5vZGVUeXBlJiYhYyh0aGlzLm5vZGVWYWx1ZSkpfSkud3JhcEFsbChcIjxhIGNsYXNzPSdcIit5K1wiJy8+XCIpfSl9ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmNoaWxkcmVuKFwiLmstaXRlbVwiKTt0LmZpbHRlcihcIi5rLWZpcnN0Om5vdCg6Zmlyc3QtY2hpbGQpXCIpLnJlbW92ZUNsYXNzKFMpLHQuZmlsdGVyKFwiLmstbGFzdDpub3QoOmxhc3QtY2hpbGQpXCIpLnJlbW92ZUNsYXNzKHcpLHQuZmlsdGVyKFwiOmZpcnN0LWNoaWxkXCIpLmFkZENsYXNzKFMpLHQuZmlsdGVyKFwiOmxhc3QtY2hpbGRcIikuYWRkQ2xhc3Modyl9dmFyIHI9d2luZG93LmtlbmRvLG89ci51aSxhPXIua2V5cyxzPWUubWFwLGw9ZS5lYWNoLGM9ZS50cmltLGQ9ZS5leHRlbmQsdT1yLnRlbXBsYXRlLGg9by5XaWRnZXQscD0vXihhfGRpdikkL2ksZj1cIi5rZW5kb1RhYlN0cmlwXCIsZz1cImltZ1wiLG09XCJocmVmXCIsdj1cInByZXZcIixfPVwic2hvd1wiLHk9XCJrLWxpbmtcIix3PVwiay1sYXN0XCIsYj1cImNsaWNrXCIsaz1cImVycm9yXCIseD1cIjplbXB0eVwiLEM9XCJrLWltYWdlXCIsUz1cImstZmlyc3RcIixUPVwic2VsZWN0XCIsRD1cImFjdGl2YXRlXCIsQT1cImstY29udGVudFwiLEU9XCJjb250ZW50VXJsXCIsTT1cIm1vdXNlZW50ZXJcIixQPVwibW91c2VsZWF2ZVwiLEk9XCJjb250ZW50TG9hZFwiLHo9XCJrLXN0YXRlLWRpc2FibGVkXCIsRj1cImstc3RhdGUtZGVmYXVsdFwiLFI9XCJrLXN0YXRlLWFjdGl2ZVwiLEI9XCJrLXN0YXRlLWZvY3VzZWRcIixMPVwiay1zdGF0ZS1ob3ZlclwiLE89XCJrLXRhYi1vbi10b3BcIixIPVwiLmstaXRlbTpub3QoLlwiK3orXCIpXCIsTj1cIi5rLXRhYnN0cmlwLWl0ZW1zID4gXCIrSCtcIjpub3QoLlwiK1IrXCIpXCIsVj17Y29udGVudDp1KFwiPGRpdiBjbGFzcz0nay1jb250ZW50JyM9IGNvbnRlbnRBdHRyaWJ1dGVzKGRhdGEpICMgcm9sZT0ndGFicGFuZWwnPiM9IGNvbnRlbnQoaXRlbSkgIzwvZGl2PlwiKSxpdGVtV3JhcHBlcjp1KFwiPCM9IHRhZyhpdGVtKSAjIGNsYXNzPSdrLWxpbmsnIz0gY29udGVudFVybChpdGVtKSAjIz0gdGV4dEF0dHJpYnV0ZXMoaXRlbSkgIz4jPSBpbWFnZShpdGVtKSAjIz0gc3ByaXRlKGl0ZW0pICMjPSB0ZXh0KGl0ZW0pICM8LyM9IHRhZyhpdGVtKSAjPlwiKSxpdGVtOnUoXCI8bGkgY2xhc3M9JyM9IHdyYXBwZXJDc3NDbGFzcyhncm91cCwgaXRlbSkgIycgcm9sZT0ndGFiJyAjPWl0ZW0uYWN0aXZlID8gXFxcImFyaWEtc2VsZWN0ZWQ9J3RydWUnXFxcIiA6ICcnIz4jPSBpdGVtV3JhcHBlcihkYXRhKSAjPC9saT5cIiksaW1hZ2U6dShcIjxpbWcgY2xhc3M9J2staW1hZ2UnIGFsdD0nJyBzcmM9JyM9IGltYWdlVXJsICMnIC8+XCIpLHNwcml0ZTp1KFwiPHNwYW4gY2xhc3M9J2stc3ByaXRlICM9IHNwcml0ZUNzc0NsYXNzICMnPjwvc3Bhbj5cIiksZW1wdHk6dShcIlwiKX0sVT17d3JhcHBlckNzc0NsYXNzOmZ1bmN0aW9uKGUsdCl7dmFyIG49XCJrLWl0ZW1cIixpPXQuaW5kZXg7cmV0dXJuIG4rPXQuZW5hYmxlZD09PSExP1wiIGstc3RhdGUtZGlzYWJsZWRcIjpcIiBrLXN0YXRlLWRlZmF1bHRcIiwwPT09aSYmKG4rPVwiIGstZmlyc3RcIiksaT09ZS5sZW5ndGgtMSYmKG4rPVwiIGstbGFzdFwiKSxufSx0ZXh0QXR0cmlidXRlczpmdW5jdGlvbihlKXtyZXR1cm4gZS51cmw/XCIgaHJlZj0nXCIrZS51cmwrXCInXCI6XCJcIn0sdGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gZS5lbmNvZGVkPT09ITE/ZS50ZXh0OnIuaHRtbEVuY29kZShlLnRleHQpfSx0YWc6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudXJsP1wiYVwiOlwic3BhblwifSxjb250ZW50QXR0cmlidXRlczpmdW5jdGlvbihlKXtyZXR1cm4gZS5hY3RpdmUhPT0hMD9cIiBzdHlsZT0nZGlzcGxheTpub25lJyBhcmlhLWhpZGRlbj0ndHJ1ZScgYXJpYS1leHBhbmRlZD0nZmFsc2UnXCI6XCJcIn0sY29udGVudDpmdW5jdGlvbihlKXtyZXR1cm4gZS5jb250ZW50P2UuY29udGVudDplLmNvbnRlbnRVcmw/XCJcIjpcIiZuYnNwO1wifSxjb250ZW50VXJsOmZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnRlbnRVcmw/ci5hdHRyKFwiY29udGVudC11cmxcIikrJz1cIicrZS5jb250ZW50VXJsKydcIic6XCJcIn19LFc9aC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxvLGE9dGhpcztoLmZuLmluaXQuY2FsbChhLHQsbiksYS5fYW5pbWF0aW9ucyhhLm9wdGlvbnMpLG49YS5vcHRpb25zLGEuX3dyYXBwZXIoKSxhLl9pc1J0bD1yLnN1cHBvcnQuaXNSdGwoYS53cmFwcGVyKSxhLl90YWJpbmRleCgpLGEuX3VwZGF0ZUNsYXNzZXMoKSxhLl9kYXRhU291cmNlKCksbi5kYXRhU291cmNlJiZhLmRhdGFTb3VyY2UuZmV0Y2goKSxhLm9wdGlvbnMuY29udGVudFVybHMmJmEud3JhcHBlci5maW5kKFwiLmstdGFic3RyaXAtaXRlbXMgPiAuay1pdGVtXCIpLmVhY2goZnVuY3Rpb24odCxuKXtlKG4pLmZpbmQoXCI+LlwiK3kpLmRhdGEoRSxhLm9wdGlvbnMuY29udGVudFVybHNbdF0pfSksYS53cmFwcGVyLm9uKE0rZitcIiBcIitQK2YsTixhLl90b2dnbGVIb3Zlcikub24oXCJmb2N1c1wiK2YsZS5wcm94eShhLl9hY3RpdmUsYSkpLm9uKFwiYmx1clwiK2YsZnVuY3Rpb24oKXthLl9jdXJyZW50KG51bGwpfSksYS5fa2V5RG93blByb3h5PWUucHJveHkoYS5fa2V5ZG93bixhKSxuLm5hdmlnYXRhYmxlJiZhLndyYXBwZXIub24oXCJrZXlkb3duXCIrZixhLl9rZXlEb3duUHJveHkpLGEud3JhcHBlci5jaGlsZHJlbihcIi5rLXRhYnN0cmlwLWl0ZW1zXCIpLm9uKGIrZixcIi5rLXN0YXRlLWRpc2FibGVkIC5rLWxpbmtcIiwhMSkub24oYitmLFwiID4gXCIrSCxmdW5jdGlvbih0KXt2YXIgbixpPWEud3JhcHBlclswXTtpZihpIT09ZG9jdW1lbnQuYWN0aXZlRWxlbWVudClpZihuPXIuc3VwcG9ydC5icm93c2VyLm1zaWUpdHJ5e2kuc2V0QWN0aXZlKCl9Y2F0Y2gobyl7aS5mb2N1cygpfWVsc2UgaS5mb2N1cygpO2EuX2NsaWNrKGUodC5jdXJyZW50VGFyZ2V0KSkmJnQucHJldmVudERlZmF1bHQoKX0pLGk9YS50YWJHcm91cC5jaGlsZHJlbihcImxpLlwiK1IpLG89YS5jb250ZW50SG9sZGVyKGkuaW5kZXgoKSksaVswXSYmby5sZW5ndGg+MCYmMD09PW9bMF0uY2hpbGROb2Rlcy5sZW5ndGgmJmEuYWN0aXZhdGVUYWIoaS5lcSgwKSksYS5lbGVtZW50LmF0dHIoXCJyb2xlXCIsXCJ0YWJsaXN0XCIpLGEuZWxlbWVudFswXS5pZCYmKGEuX2FyaWFJZD1hLmVsZW1lbnRbMF0uaWQrXCJfdHNfYWN0aXZlXCIpLHIubm90aWZ5KGEpfSxfYWN0aXZlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50YWJHcm91cC5jaGlsZHJlbigpLmZpbHRlcihcIi5cIitSKTtlPWVbMF0/ZTp0aGlzLl9lbmRJdGVtKFwiZmlyc3RcIiksZVswXSYmdGhpcy5fY3VycmVudChlKX0sX2VuZEl0ZW06ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGFiR3JvdXAuY2hpbGRyZW4oSClbZV0oKX0sX2l0ZW06ZnVuY3Rpb24oZSx0KXt2YXIgbjtyZXR1cm4gbj10PT09dj9cImxhc3RcIjpcImZpcnN0XCIsZT8oZT1lW3RdKCksZVswXXx8KGU9dGhpcy5fZW5kSXRlbShuKSksZS5oYXNDbGFzcyh6KSYmKGU9dGhpcy5faXRlbShlLHQpKSxlKTp0aGlzLl9lbmRJdGVtKG4pfSxfY3VycmVudDpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5fZm9jdXNlZCxyPW4uX2FyaWFJZDtyZXR1cm4gZT09PXQ/aTooaSYmKGlbMF0uaWQ9PT1yJiZpLnJlbW92ZUF0dHIoXCJpZFwiKSxpLnJlbW92ZUNsYXNzKEIpKSxlJiYoZS5oYXNDbGFzcyhSKXx8ZS5hZGRDbGFzcyhCKSxuLmVsZW1lbnQucmVtb3ZlQXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKSxyPWVbMF0uaWR8fHIsciYmKGUuYXR0cihcImlkXCIsciksbi5lbGVtZW50LmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixyKSkpLG4uX2ZvY3VzZWQ9ZSx0KX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLHI9ZS5rZXlDb2RlLG89aS5fY3VycmVudCgpLHM9aS5faXNSdGw7aWYoZS50YXJnZXQ9PWUuY3VycmVudFRhcmdldCl7aWYocj09YS5ET1dOfHxyPT1hLlJJR0hUKW49cz92OlwibmV4dFwiO2Vsc2UgaWYocj09YS5VUHx8cj09YS5MRUZUKW49cz9cIm5leHRcIjp2O2Vsc2UgaWYocj09YS5FTlRFUnx8cj09YS5TUEFDRUJBUilpLl9jbGljayhvKSxlLnByZXZlbnREZWZhdWx0KCk7ZWxzZXtpZihyPT1hLkhPTUUpcmV0dXJuIGkuX2NsaWNrKGkuX2VuZEl0ZW0oXCJmaXJzdFwiKSksZS5wcmV2ZW50RGVmYXVsdCgpLHQ7aWYocj09YS5FTkQpcmV0dXJuIGkuX2NsaWNrKGkuX2VuZEl0ZW0oXCJsYXN0XCIpKSxlLnByZXZlbnREZWZhdWx0KCksdH1uJiYoaS5fY2xpY2soaS5faXRlbShvLG4pKSxlLnByZXZlbnREZWZhdWx0KCkpfX0sX2RhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QuZGF0YVNvdXJjZSYmdC5fcmVmcmVzaEhhbmRsZXI/dC5kYXRhU291cmNlLnVuYmluZChcImNoYW5nZVwiLHQuX3JlZnJlc2hIYW5kbGVyKTp0Ll9yZWZyZXNoSGFuZGxlcj1lLnByb3h5KHQucmVmcmVzaCx0KSx0LmRhdGFTb3VyY2U9ci5kYXRhLkRhdGFTb3VyY2UuY3JlYXRlKHQub3B0aW9ucy5kYXRhU291cmNlKS5iaW5kKFwiY2hhbmdlXCIsdC5fcmVmcmVzaEhhbmRsZXIpfSxzZXREYXRhU291cmNlOmZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucy5kYXRhU291cmNlPWUsdGhpcy5fZGF0YVNvdXJjZSgpLGUuZmV0Y2goKX0sX2FuaW1hdGlvbnM6ZnVuY3Rpb24oZSl7ZSYmXCJhbmltYXRpb25cImluIGUmJiFlLmFuaW1hdGlvbiYmKGUuYW5pbWF0aW9uPXtvcGVuOntlZmZlY3RzOnt9fSxjbG9zZTp7ZWZmZWN0czp7fX19KX0scmVmcmVzaDpmdW5jdGlvbihlKXt2YXIgdCxuLGksbyxhPXRoaXMscz1hLm9wdGlvbnMsbD1yLmdldHRlcihzLmRhdGFUZXh0RmllbGQpLGM9ci5nZXR0ZXIocy5kYXRhQ29udGVudEZpZWxkKSxkPXIuZ2V0dGVyKHMuZGF0YUNvbnRlbnRVcmxGaWVsZCksdT1yLmdldHRlcihzLmRhdGFJbWFnZVVybEZpZWxkKSxoPXIuZ2V0dGVyKHMuZGF0YVVybEZpZWxkKSxwPXIuZ2V0dGVyKHMuZGF0YVNwcml0ZUNzc0NsYXNzKSxmPVtdLGc9YS5kYXRhU291cmNlLnZpZXcoKTtmb3IoZT1lfHx7fSxpPWUuYWN0aW9uLGkmJihnPWUuaXRlbXMpLHQ9MCxvPWcubGVuZ3RoO28+dDt0Kyspbj17dGV4dDpsKGdbdF0pfSxzLmRhdGFDb250ZW50RmllbGQmJihuLmNvbnRlbnQ9YyhnW3RdKSkscy5kYXRhQ29udGVudFVybEZpZWxkJiYobi5jb250ZW50VXJsPWQoZ1t0XSkpLHMuZGF0YVVybEZpZWxkJiYobi51cmw9aChnW3RdKSkscy5kYXRhSW1hZ2VVcmxGaWVsZCYmKG4uaW1hZ2VVcmw9dShnW3RdKSkscy5kYXRhU3ByaXRlQ3NzQ2xhc3MmJihuLnNwcml0ZUNzc0NsYXNzPXAoZ1t0XSkpLGZbdF09bjtpZihcImFkZFwiPT1lLmFjdGlvbillLmluZGV4PGEudGFiR3JvdXAuY2hpbGRyZW4oKS5sZW5ndGg/YS5pbnNlcnRCZWZvcmUoZixhLnRhYkdyb3VwLmNoaWxkcmVuKCkuZXEoZS5pbmRleCkpOmEuYXBwZW5kKGYpO2Vsc2UgaWYoXCJyZW1vdmVcIj09ZS5hY3Rpb24pZm9yKHQ9MDtnLmxlbmd0aD50O3QrKylhLnJlbW92ZShlLmluZGV4KTtlbHNlXCJpdGVtY2hhbmdlXCI9PWUuYWN0aW9uPyh0PWEuZGF0YVNvdXJjZS52aWV3KCkuaW5kZXhPZihnWzBdKSxlLmZpZWxkPT09cy5kYXRhVGV4dEZpZWxkJiZhLnRhYkdyb3VwLmNoaWxkcmVuKCkuZXEodCkuZmluZChcIi5rLWxpbmtcIikudGV4dChnWzBdLmdldChlLmZpZWxkKSkpOihhLnRyaWdnZXIoXCJkYXRhQmluZGluZ1wiKSxhLnJlbW92ZShcImxpXCIpLGEuYXBwZW5kKGYpLGEudHJpZ2dlcihcImRhdGFCb3VuZFwiKSl9LHZhbHVlOmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXM7cmV0dXJuIG49PT10P2kuc2VsZWN0KCkudGV4dCgpOihuIT1pLnZhbHVlKCkmJmkudGFiR3JvdXAuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCl7ZS50cmltKGUodGhpcykudGV4dCgpKT09biYmaS5zZWxlY3QodGhpcyl9KSx0KX0saXRlbXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50YWJHcm91cFswXS5jaGlsZHJlbn0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLmFuaW1hdGlvbjt0Ll9hbmltYXRpb25zKGUpLGUuYW5pbWF0aW9uPWQoITAsbixlLmFuaW1hdGlvbiksZS5uYXZpZ2F0YWJsZT90LndyYXBwZXIub24oXCJrZXlkb3duXCIrZix0Ll9rZXlEb3duUHJveHkpOnQud3JhcHBlci5vZmYoXCJrZXlkb3duXCIrZix0Ll9rZXlEb3duUHJveHkpLGguZm4uc2V0T3B0aW9ucy5jYWxsKHQsZSl9LGV2ZW50czpbVCxELF8sayxJLFwiY2hhbmdlXCIsXCJkYXRhQmluZGluZ1wiLFwiZGF0YUJvdW5kXCJdLG9wdGlvbnM6e25hbWU6XCJUYWJTdHJpcFwiLGRhdGFUZXh0RmllbGQ6XCJcIixkYXRhQ29udGVudEZpZWxkOlwiXCIsZGF0YUltYWdlVXJsRmllbGQ6XCJcIixkYXRhVXJsRmllbGQ6XCJcIixkYXRhU3ByaXRlQ3NzQ2xhc3M6XCJcIixkYXRhQ29udGVudFVybEZpZWxkOlwiXCIsYW5pbWF0aW9uOntvcGVuOntlZmZlY3RzOlwiZXhwYW5kOnZlcnRpY2FsIGZhZGVJblwiLGR1cmF0aW9uOjIwMH0sY2xvc2U6e2R1cmF0aW9uOjIwMH19LGNvbGxhcHNpYmxlOiExLG5hdmlnYXRhYmxlOiEwLGNvbnRlbnRVcmxzOiExfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztoLmZuLmRlc3Ryb3kuY2FsbChlKSxlLl9yZWZyZXNoSGFuZGxlciYmZS5kYXRhU291cmNlLnVuYmluZChcImNoYW5nZVwiLGUuX3JlZnJlc2hIYW5kbGVyKSxlLndyYXBwZXIub2ZmKGYpLGUud3JhcHBlci5jaGlsZHJlbihcIi5rLXRhYnN0cmlwLWl0ZW1zXCIpLm9mZihmKSxlLnNjcm9sbFdyYXAuY2hpbGRyZW4oXCIuay10YWJzdHJpcFwiKS51bndyYXAoKSxyLmRlc3Ryb3koZS53cmFwcGVyKX0sc2VsZWN0OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7cmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoP24udGFiR3JvdXAuY2hpbGRyZW4oXCJsaS5cIitSKTooaXNOYU4odCl8fCh0PW4udGFiR3JvdXAuY2hpbGRyZW4oKS5nZXQodCkpLHQ9bi50YWJHcm91cC5maW5kKHQpLGUodCkuZWFjaChmdW5jdGlvbih0LGkpe2k9ZShpKSxpLmhhc0NsYXNzKFIpfHxuLnRyaWdnZXIoVCx7aXRlbTppWzBdLGNvbnRlbnRFbGVtZW50Om4uY29udGVudEhvbGRlcihpLmluZGV4KCkpWzBdfSl8fG4uYWN0aXZhdGVUYWIoaSl9KSxuKX0sZW5hYmxlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX3RvZ2dsZURpc2FibGVkKGUsdCE9PSExKSx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl90b2dnbGVEaXNhYmxlZChlLCExKSx0aGlzfSxyZWxvYWQ6ZnVuY3Rpb24odCl7dD10aGlzLnRhYkdyb3VwLmZpbmQodCk7dmFyIG49dGhpcztyZXR1cm4gdC5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKSxpPXQuZmluZChcIi5cIit5KS5kYXRhKEUpLHI9bi5jb250ZW50SG9sZGVyKHQuaW5kZXgoKSk7aSYmbi5hamF4UmVxdWVzdCh0LHIsbnVsbCxpKX0pLG59LGFwcGVuZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5fY3JlYXRlKGUpO3JldHVybiBsKG4udGFicyxmdW5jdGlvbihlKXt0LnRhYkdyb3VwLmFwcGVuZCh0aGlzKSx0LndyYXBwZXIuYXBwZW5kKG4uY29udGVudHNbZV0pfSksaSh0LnRhYkdyb3VwKSx0Ll91cGRhdGVDb250ZW50RWxlbWVudHMoKSx0fSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24odCxuKXtuPXRoaXMudGFiR3JvdXAuZmluZChuKTt2YXIgcj10aGlzLG89ci5fY3JlYXRlKHQpLGE9ZShyLmNvbnRlbnRFbGVtZW50KG4uaW5kZXgoKSkpO3JldHVybiBsKG8udGFicyxmdW5jdGlvbihlKXtuLmJlZm9yZSh0aGlzKSxhLmJlZm9yZShvLmNvbnRlbnRzW2VdKX0pLGkoci50YWJHcm91cCksci5fdXBkYXRlQ29udGVudEVsZW1lbnRzKCkscn0saW5zZXJ0QWZ0ZXI6ZnVuY3Rpb24odCxuKXtuPXRoaXMudGFiR3JvdXAuZmluZChuKTt2YXIgcj10aGlzLG89ci5fY3JlYXRlKHQpLGE9ZShyLmNvbnRlbnRFbGVtZW50KG4uaW5kZXgoKSkpO3JldHVybiBsKG8udGFicyxmdW5jdGlvbihlKXtuLmFmdGVyKHRoaXMpLGEuYWZ0ZXIoby5jb250ZW50c1tlXSl9KSxpKHIudGFiR3JvdXApLHIuX3VwZGF0ZUNvbnRlbnRFbGVtZW50cygpLHJ9LHJlbW92ZTpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXMsbz10eXBlb2YgdDtyZXR1cm5cInN0cmluZ1wiPT09bz90PWkudGFiR3JvdXAuZmluZCh0KTpcIm51bWJlclwiPT09byYmKHQ9aS50YWJHcm91cC5jaGlsZHJlbigpLmVxKHQpKSxuPXQubWFwKGZ1bmN0aW9uKCl7dmFyIHQ9aS5jb250ZW50RWxlbWVudChlKHRoaXMpLmluZGV4KCkpO3JldHVybiByLmRlc3Ryb3kodCksdH0pLHQucmVtb3ZlKCksbi5yZW1vdmUoKSxpLl91cGRhdGVDb250ZW50RWxlbWVudHMoKSxpfSxfY3JlYXRlOmZ1bmN0aW9uKGkpe3ZhciByLG8sYSxsPWUuaXNQbGFpbk9iamVjdChpKSxjPXRoaXM7cmV0dXJuIGx8fGUuaXNBcnJheShpKT8oaT1lLmlzQXJyYXkoaSk/aTpbaV0scj1zKGksZnVuY3Rpb24odCxuKXtyZXR1cm4gZShXLnJlbmRlckl0ZW0oe2dyb3VwOmMudGFiR3JvdXAsaXRlbTpkKHQse2luZGV4Om59KX0pKX0pLG89cyhpLGZ1bmN0aW9uKG4saSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIG4uY29udGVudHx8bi5jb250ZW50VXJsP2UoVy5yZW5kZXJDb250ZW50KHtpdGVtOmQobix7aW5kZXg6aX0pfSkpOnR9KSk6KHI9XCJzdHJpbmdcIj09dHlwZW9mIGkmJlwiPFwiIT1pWzBdP2MuZWxlbWVudC5maW5kKGkpOmUoaSksbz1lKCksci5lYWNoKGZ1bmN0aW9uKCl7aWYoYT1lKFwiPGRpdiBjbGFzcz0nXCIrQStcIicvPlwiKSwvay10YWJzdHJpcC1pdGVtcy8udGVzdCh0aGlzLnBhcmVudE5vZGUuY2xhc3NOYW1lKSl7dmFyIHQ9cGFyc2VJbnQodGhpcy5nZXRBdHRyaWJ1dGUoXCJhcmlhLWNvbnRyb2xzXCIpLnJlcGxhY2UoL14uKi0vLFwiXCIpLDEwKS0xO2E9ZShjLmNvbnRlbnRFbGVtZW50KHQpKX1vPW8uYWRkKGEpfSksbihyKSkse3RhYnM6cixjb250ZW50czpvfX0sX3RvZ2dsZURpc2FibGVkOmZ1bmN0aW9uKHQsbil7dD10aGlzLnRhYkdyb3VwLmZpbmQodCksdC5lYWNoKGZ1bmN0aW9uKCl7ZSh0aGlzKS50b2dnbGVDbGFzcyhGLG4pLnRvZ2dsZUNsYXNzKHosIW4pfSl9LF91cGRhdGVDbGFzc2VzOmZ1bmN0aW9uKCl7dmFyIHIsbyxhLHM9dGhpcztzLndyYXBwZXIuYWRkQ2xhc3MoXCJrLXdpZGdldCBrLWhlYWRlciBrLXRhYnN0cmlwXCIpLHMudGFiR3JvdXA9cy53cmFwcGVyLmNoaWxkcmVuKFwidWxcIikuYWRkQ2xhc3MoXCJrLXRhYnN0cmlwLWl0ZW1zIGstcmVzZXRcIikscy50YWJHcm91cFswXXx8KHMudGFiR3JvdXA9ZShcIjx1bCBjbGFzcz0nay10YWJzdHJpcC1pdGVtcyBrLXJlc2V0Jy8+XCIpLmFwcGVuZFRvKHMud3JhcHBlcikpLHI9cy50YWJHcm91cC5maW5kKFwibGlcIikuYWRkQ2xhc3MoXCJrLWl0ZW1cIiksci5sZW5ndGgmJihvPXIuZmlsdGVyKFwiLlwiK1IpLmluZGV4KCksYT1vPj0wP286dCxzLnRhYkdyb3VwLmNvbnRlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIDM9PXRoaXMubm9kZVR5cGUmJiFjKHRoaXMubm9kZVZhbHVlKX0pLnJlbW92ZSgpKSxvPj0wJiZyLmVxKG8pLmFkZENsYXNzKE8pLHMuY29udGVudEVsZW1lbnRzPXMud3JhcHBlci5jaGlsZHJlbihcImRpdlwiKSxzLmNvbnRlbnRFbGVtZW50cy5hZGRDbGFzcyhBKS5lcShhKS5hZGRDbGFzcyhSKS5jc3Moe2Rpc3BsYXk6XCJibG9ja1wifSksci5sZW5ndGgmJihuKHIpLGkocy50YWJHcm91cCkscy5fdXBkYXRlQ29udGVudEVsZW1lbnRzKCkpfSxfdXBkYXRlQ29udGVudEVsZW1lbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucy5jb250ZW50VXJsc3x8W10saT10LnRhYkdyb3VwLmZpbmQoXCIuay1pdGVtXCIpLG89KHQuZWxlbWVudC5hdHRyKFwiaWRcIil8fHIuZ3VpZCgpKStcIi1cIixhPXQud3JhcHBlci5jaGlsZHJlbihcImRpdlwiKTthLmxlbmd0aCYmaS5sZW5ndGg+YS5sZW5ndGg/KGEuZWFjaChmdW5jdGlvbihlKXt2YXIgdD1wYXJzZUludCh0aGlzLmlkLnJlcGxhY2UobyxcIlwiKSwxMCksbj1pLmZpbHRlcihcIlthcmlhLWNvbnRyb2xzPVwiK28rdCtcIl1cIikscj1vKyhlKzEpO24uZGF0YShcImFyaWFcIixyKSx0aGlzLnNldEF0dHJpYnV0ZShcImlkXCIscil9KSxpLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpO3RoaXMuc2V0QXR0cmlidXRlKFwiYXJpYS1jb250cm9sc1wiLHQuZGF0YShcImFyaWFcIikpLHQucmVtb3ZlRGF0YShcImFyaWFcIil9KSk6aS5lYWNoKGZ1bmN0aW9uKGkpe3ZhciByPWEuZXEoaSkscz1vKyhpKzEpO3RoaXMuc2V0QXR0cmlidXRlKFwiYXJpYS1jb250cm9sc1wiLHMpLCFyLmxlbmd0aCYmbltpXT9lKFwiPGRpdiBjbGFzcz0nXCIrQStcIicvPlwiKS5hcHBlbmRUbyh0LndyYXBwZXIpLmF0dHIoXCJpZFwiLHMpOihyLmF0dHIoXCJpZFwiLHMpLGUodGhpcykuY2hpbGRyZW4oXCIuay1sb2FkaW5nXCIpWzBdfHxuW2ldfHxlKFwiPHNwYW4gY2xhc3M9J2stbG9hZGluZyBrLWNvbXBsZXRlJy8+XCIpLnByZXBlbmRUbyh0aGlzKSksci5hdHRyKFwicm9sZVwiLFwidGFicGFuZWxcIiksci5maWx0ZXIoXCI6bm90KC5cIitSK1wiKVwiKS5hdHRyKFwiYXJpYS1oaWRkZW5cIiwhMCkuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMSksci5maWx0ZXIoXCIuXCIrUikuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMCl9KSx0LmNvbnRlbnRFbGVtZW50cz10LmNvbnRlbnRBbmltYXRvcnM9dC53cmFwcGVyLmNoaWxkcmVuKFwiZGl2XCIpLHQudGFic0hlaWdodD10LnRhYkdyb3VwLm91dGVySGVpZ2h0KCkrcGFyc2VJbnQodC53cmFwcGVyLmNzcyhcImJvcmRlci10b3Atd2lkdGhcIiksMTApK3BhcnNlSW50KHQud3JhcHBlci5jc3MoXCJib3JkZXItYm90dG9tLXdpZHRoXCIpLDEwKSxyLmtpbmV0aWNTY3JvbGxOZWVkZWQmJnIubW9iaWxlLnVpLlNjcm9sbGVyJiYoci50b3VjaFNjcm9sbGVyKHQuY29udGVudEVsZW1lbnRzKSx0LmNvbnRlbnRFbGVtZW50cz10LmNvbnRlbnRFbGVtZW50cy5jaGlsZHJlbihcIi5rbS1zY3JvbGwtY29udGFpbmVyXCIpKX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Uud3JhcHBlcj1lLmVsZW1lbnQuaXMoXCJ1bFwiKT9lLmVsZW1lbnQud3JhcEFsbChcIjxkaXYgLz5cIikucGFyZW50KCk6ZS5lbGVtZW50LGUuc2Nyb2xsV3JhcD1lLndyYXBwZXIucGFyZW50KFwiLmstdGFic3RyaXAtd3JhcHBlclwiKSxlLnNjcm9sbFdyYXBbMF18fChlLnNjcm9sbFdyYXA9ZS53cmFwcGVyLndyYXBBbGwoXCI8ZGl2IGNsYXNzPSdrLXRhYnN0cmlwLXdyYXBwZXInIC8+XCIpLnBhcmVudCgpKX0sX3NpemVTY3JvbGxXcmFwOmZ1bmN0aW9uKGUpe3RoaXMuc2Nyb2xsV3JhcC5jc3MoXCJoZWlnaHRcIixNYXRoLmZsb29yKGUub3V0ZXJIZWlnaHQoITApKSt0aGlzLnRhYnNIZWlnaHQpLmNzcyhcImhlaWdodFwiKX0sX3RvZ2dsZUhvdmVyOmZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS50b2dnbGVDbGFzcyhMLHQudHlwZT09TSl9LF9jbGljazpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcyxyPWUuZmluZChcIi5cIit5KSxvPXIuYXR0cihtKSxhPWkub3B0aW9ucy5jb2xsYXBzaWJsZSxzPWkuY29udGVudEhvbGRlcihlLmluZGV4KCkpO2lmKGUuY2xvc2VzdChcIi5rLXdpZGdldFwiKVswXT09aS53cmFwcGVyWzBdKXtpZihlLmlzKFwiLlwiK3orKGE/XCJcIjpcIiwuXCIrUikpKXJldHVybiEwO2lmKG49ci5kYXRhKEUpfHxvJiYoXCIjXCI9PW8uY2hhckF0KG8ubGVuZ3RoLTEpfHwtMSE9by5pbmRleE9mKFwiI1wiK2kuZWxlbWVudFswXS5pZCtcIi1cIikpLHQ9IW98fG4saS50YWJHcm91cC5jaGlsZHJlbihcIltkYXRhLWFuaW1hdGluZ11cIikubGVuZ3RoKXJldHVybiB0O2lmKGkudHJpZ2dlcihULHtpdGVtOmVbMF0sY29udGVudEVsZW1lbnQ6c1swXX0pKXJldHVybiEwO2lmKHQhPT0hMSlyZXR1cm4gYSYmZS5pcyhcIi5cIitSKT8oaS5kZWFjdGl2YXRlVGFiKGUpLCEwKTooaS5hY3RpdmF0ZVRhYihlKSYmKHQ9ITApLHQpfX0sZGVhY3RpdmF0ZVRhYjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLmFuaW1hdGlvbixpPW4ub3BlbixvPWQoe30sbi5jbG9zZSksYT1vJiZcImVmZmVjdHNcImluIG87ZT10LnRhYkdyb3VwLmZpbmQoZSksbz1kKGE/bzpkKHtyZXZlcnNlOiEwfSxpKSx7aGlkZTohMH0pLHIuc2l6ZShpLmVmZmVjdHMpPyhlLmtlbmRvQWRkQ2xhc3MoRix7ZHVyYXRpb246aS5kdXJhdGlvbn0pLGUua2VuZG9SZW1vdmVDbGFzcyhSLHtkdXJhdGlvbjppLmR1cmF0aW9ufSkpOihlLmFkZENsYXNzKEYpLGUucmVtb3ZlQ2xhc3MoUikpLGUucmVtb3ZlQXR0cihcImFyaWEtc2VsZWN0ZWRcIiksdC5jb250ZW50QW5pbWF0b3JzLmZpbHRlcihcIi5cIitSKS5rZW5kb1N0b3AoITAsITApLmtlbmRvQW5pbWF0ZShvKS5yZW1vdmVDbGFzcyhSKS5hdHRyKFwiYXJpYS1oaWRkZW5cIiwhMCl9LGFjdGl2YXRlVGFiOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxvLGEscyxsLGMsdSxoLHAsZixnLG0sdjtpZighdGhpcy50YWJHcm91cC5jaGlsZHJlbihcIltkYXRhLWFuaW1hdGluZ11cIikubGVuZ3RoKXJldHVybiBlPXRoaXMudGFiR3JvdXAuZmluZChlKSx0PXRoaXMsbj10Lm9wdGlvbnMuYW5pbWF0aW9uLGk9bi5vcGVuLG89ZCh7fSxuLmNsb3NlKSxhPW8mJlwiZWZmZWN0c1wiaW4gbyxzPWUucGFyZW50KCkuY2hpbGRyZW4oKSxsPXMuZmlsdGVyKFwiLlwiK1IpLGM9cy5pbmRleChlKSxvPWQoYT9vOmQoe3JldmVyc2U6ITB9LGkpLHtoaWRlOiEwfSksci5zaXplKGkuZWZmZWN0cyk/KGwua2VuZG9SZW1vdmVDbGFzcyhSLHtkdXJhdGlvbjpvLmR1cmF0aW9ufSksZS5rZW5kb1JlbW92ZUNsYXNzKEwse2R1cmF0aW9uOm8uZHVyYXRpb259KSk6KGwucmVtb3ZlQ2xhc3MoUiksZS5yZW1vdmVDbGFzcyhMKSksdT10LmNvbnRlbnRBbmltYXRvcnMsdC5pblJlcXVlc3QmJih0Lnhoci5hYm9ydCgpLHQuaW5SZXF1ZXN0PSExKSwwPT09dS5sZW5ndGg/KGwucmVtb3ZlQ2xhc3MoTyksZS5hZGRDbGFzcyhPKS5jc3MoXCJ6LWluZGV4XCIpLGUuYWRkQ2xhc3MoUiksdC5fY3VycmVudChlKSx0LnRyaWdnZXIoXCJjaGFuZ2VcIiksITEpOihoPXUuZmlsdGVyKFwiLlwiK1IpLHA9dC5jb250ZW50SG9sZGVyKGMpLGY9cC5jbG9zZXN0KFwiLmstY29udGVudFwiKSx0LnRhYnNIZWlnaHQ9dC50YWJHcm91cC5vdXRlckhlaWdodCgpK3BhcnNlSW50KHQud3JhcHBlci5jc3MoXCJib3JkZXItdG9wLXdpZHRoXCIpLDEwKStwYXJzZUludCh0LndyYXBwZXIuY3NzKFwiYm9yZGVyLWJvdHRvbS13aWR0aFwiKSwxMCksdC5fc2l6ZVNjcm9sbFdyYXAoaCksMD09PXAubGVuZ3RoPyhoLnJlbW92ZUNsYXNzKFIpLmF0dHIoXCJhcmlhLWhpZGRlblwiLCEwKS5rZW5kb1N0b3AoITAsITApLmtlbmRvQW5pbWF0ZShvKSwhMSk6KGUuYXR0cihcImRhdGEtYW5pbWF0aW5nXCIsITApLGc9KGUuY2hpbGRyZW4oXCIuXCIreSkuZGF0YShFKXx8ITEpJiZwLmlzKHgpLG09ZnVuY3Rpb24oKXtsLnJlbW92ZUNsYXNzKE8pLGUuYWRkQ2xhc3MoTykuY3NzKFwiei1pbmRleFwiKSxyLnNpemUoaS5lZmZlY3RzKT8obC5rZW5kb0FkZENsYXNzKEYse2R1cmF0aW9uOmkuZHVyYXRpb259KSxlLmtlbmRvQWRkQ2xhc3MoUix7ZHVyYXRpb246aS5kdXJhdGlvbn0pKToobC5hZGRDbGFzcyhGKSxlLmFkZENsYXNzKFIpKSxsLnJlbW92ZUF0dHIoXCJhcmlhLXNlbGVjdGVkXCIpLGUuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMCksdC5fY3VycmVudChlKSx0Ll9zaXplU2Nyb2xsV3JhcChmKSxmLmFkZENsYXNzKFIpLnJlbW92ZUF0dHIoXCJhcmlhLWhpZGRlblwiKS5rZW5kb1N0b3AoITAsITApLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApLmtlbmRvQW5pbWF0ZShkKHtpbml0OmZ1bmN0aW9uKCl7dC50cmlnZ2VyKF8se2l0ZW06ZVswXSxjb250ZW50RWxlbWVudDpwWzBdfSksci5yZXNpemUocCl9fSxpLHtjb21wbGV0ZTpmdW5jdGlvbigpe2UucmVtb3ZlQXR0cihcImRhdGEtYW5pbWF0aW5nXCIpLHQudHJpZ2dlcihELHtpdGVtOmVbMF0sY29udGVudEVsZW1lbnQ6cFswXX0pLHIucmVzaXplKHApLHQuc2Nyb2xsV3JhcC5jc3MoXCJoZWlnaHRcIixcIlwiKS5jc3MoXCJoZWlnaHRcIil9fSkpfSx2PWZ1bmN0aW9uKCl7Zz8oZS5yZW1vdmVBdHRyKFwiZGF0YS1hbmltYXRpbmdcIiksdC5hamF4UmVxdWVzdChlLHAsZnVuY3Rpb24oKXtlLmF0dHIoXCJkYXRhLWFuaW1hdGluZ1wiLCEwKSxtKCksdC50cmlnZ2VyKFwiY2hhbmdlXCIpfSkpOihtKCksdC50cmlnZ2VyKFwiY2hhbmdlXCIpKX0saC5yZW1vdmVDbGFzcyhSKSxoLmF0dHIoXCJhcmlhLWhpZGRlblwiLCEwKSxoLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITEpLGgubGVuZ3RoP2gua2VuZG9TdG9wKCEwLCEwKS5rZW5kb0FuaW1hdGUoZCh7Y29tcGxldGU6dn0sbykpOnYoKSwhMCkpfSxjb250ZW50RWxlbWVudDpmdW5jdGlvbihlKXt2YXIgbixpLG8sYTtpZihpc05hTihlLTApKXJldHVybiB0O2lmKG49dGhpcy5jb250ZW50RWxlbWVudHMmJnRoaXMuY29udGVudEVsZW1lbnRzWzBdJiYhci5raW5ldGljU2Nyb2xsTmVlZGVkP3RoaXMuY29udGVudEVsZW1lbnRzOnRoaXMuY29udGVudEFuaW1hdG9ycyxlPW4mJjA+ZT9uLmxlbmd0aCtlOmUsaT1SZWdFeHAoXCItXCIrKGUrMSkrXCIkXCIpLG4pZm9yKG89MCxhPW4ubGVuZ3RoO2E+bztvKyspaWYoaS50ZXN0KG4uZXEobykuY2xvc2VzdChcIi5rLWNvbnRlbnRcIilbMF0uaWQpKXJldHVybiBuW29dO3JldHVybiB0fSxjb250ZW50SG9sZGVyOmZ1bmN0aW9uKHQpe3ZhciBuPWUodGhpcy5jb250ZW50RWxlbWVudCh0KSksaT1uLmNoaWxkcmVuKFwiLmttLXNjcm9sbC1jb250YWluZXJcIik7cmV0dXJuIHIuc3VwcG9ydC50b3VjaCYmaVswXT9pOm59LGFqYXhSZXF1ZXN0OmZ1bmN0aW9uKHQsbixpLG8pe3ZhciBhLHMsbCxjLGQsdSxoLHAsZjt0PXRoaXMudGFiR3JvdXAuZmluZCh0KSxhPXRoaXMscz1lLmFqYXhTZXR0aW5ncy54aHIsbD10LmZpbmQoXCIuXCIreSksYz17fSxkPXQud2lkdGgoKS8yLHU9ITEsaD10LmZpbmQoXCIuay1sb2FkaW5nXCIpLnJlbW92ZUNsYXNzKFwiay1jb21wbGV0ZVwiKSxoWzBdfHwoaD1lKFwiPHNwYW4gY2xhc3M9J2stbG9hZGluZycvPlwiKS5wcmVwZW5kVG8odCkpLHA9MipkLWgud2lkdGgoKSxmPWZ1bmN0aW9uKCl7aC5hbmltYXRlKHttYXJnaW5MZWZ0OihwYXJzZUludChoLmNzcyhcIm1hcmdpbkxlZnRcIiksMTApfHwwKTxkP3A6MH0sNTAwLGYpXG59LHIuc3VwcG9ydC5icm93c2VyLm1zaWUmJjEwPnIuc3VwcG9ydC5icm93c2VyLnZlcnNpb24mJnNldFRpbWVvdXQoZiw0MCksbz1vfHxsLmRhdGEoRSl8fGwuYXR0cihtKSxhLmluUmVxdWVzdD0hMCxhLnhocj1lLmFqYXgoe3R5cGU6XCJHRVRcIixjYWNoZTohMSx1cmw6byxkYXRhVHlwZTpcImh0bWxcIixkYXRhOmMseGhyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXMoKSxpPXQucHJvZ3Jlc3NVcGxvYWQ/XCJwcm9ncmVzc1VwbG9hZFwiOnQucHJvZ3Jlc3M/XCJwcm9ncmVzc1wiOiExO3JldHVybiBuJiZlLmVhY2goW24sbi51cGxvYWRdLGZ1bmN0aW9uKCl7dGhpcy5hZGRFdmVudExpc3RlbmVyJiZ0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLGZ1bmN0aW9uKGUpe2kmJnRbaV0oZSl9LCExKX0pLHQubm9Qcm9ncmVzcz0hKHdpbmRvdy5YTUxIdHRwUmVxdWVzdCYmXCJ1cGxvYWRcImluIG5ldyBYTUxIdHRwUmVxdWVzdCksbn0scHJvZ3Jlc3M6ZnVuY3Rpb24oZSl7aWYoZS5sZW5ndGhDb21wdXRhYmxlKXt2YXIgdD1wYXJzZUludChlLmxvYWRlZC9lLnRvdGFsKjEwMCwxMCkrXCIlXCI7aC5zdG9wKCEwKS5hZGRDbGFzcyhcImstcHJvZ3Jlc3NcIikuY3NzKHt3aWR0aDp0LG1hcmdpbkxlZnQ6MH0pfX0sZXJyb3I6ZnVuY3Rpb24oZSx0KXthLnRyaWdnZXIoXCJlcnJvclwiLHt4aHI6ZSxzdGF0dXM6dH0pJiZ0aGlzLmNvbXBsZXRlKCl9LHN0b3BQcm9ncmVzczpmdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwodSksaC5zdG9wKCEwKS5hZGRDbGFzcyhcImstcHJvZ3Jlc3NcIilbMF0uc3R5bGUuY3NzVGV4dD1cIlwifSxjb21wbGV0ZTpmdW5jdGlvbihlKXthLmluUmVxdWVzdD0hMSx0aGlzLm5vUHJvZ3Jlc3M/c2V0VGltZW91dCh0aGlzLnN0b3BQcm9ncmVzcyw1MDApOnRoaXMuc3RvcFByb2dyZXNzKCksXCJhYm9ydFwiPT1lLnN0YXR1c1RleHQmJmgucmVtb3ZlKCl9LHN1Y2Nlc3M6ZnVuY3Rpb24oZSl7dmFyIHMsbCxjO2guYWRkQ2xhc3MoXCJrLWNvbXBsZXRlXCIpO3RyeXtzPXRoaXMsbD0xMCxzLm5vUHJvZ3Jlc3MmJihoLndpZHRoKGwrXCIlXCIpLHU9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtzLnByb2dyZXNzKHtsZW5ndGhDb21wdXRhYmxlOiEwLGxvYWRlZDpNYXRoLm1pbihsLDEwMCksdG90YWw6MTAwfSksbCs9MTB9LDQwKSksYS5hbmd1bGFyKFwiY2xlYW51cFwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOm4uZ2V0KCl9fSksci5kZXN0cm95KG4pLG4uaHRtbChlKX1jYXRjaChkKXtjPXdpbmRvdy5jb25zb2xlLGMmJmMuZXJyb3ImJmMuZXJyb3IoZC5uYW1lK1wiOiBcIitkLm1lc3NhZ2UrXCIgaW4gXCIrbyksdGhpcy5lcnJvcih0aGlzLnhocixcImVycm9yXCIpfWkmJmkuY2FsbChhLG4pLGEuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czpuLmdldCgpfX0pLGEudHJpZ2dlcihJLHtpdGVtOnRbMF0sY29udGVudEVsZW1lbnQ6blswXX0pfX0pfX0pO2QoVyx7cmVuZGVySXRlbTpmdW5jdGlvbihlKXtlPWQoe3RhYlN0cmlwOnt9LGdyb3VwOnt9fSxlKTt2YXIgdD1WLmVtcHR5LG49ZS5pdGVtO3JldHVybiBWLml0ZW0oZChlLHtpbWFnZTpuLmltYWdlVXJsP1YuaW1hZ2U6dCxzcHJpdGU6bi5zcHJpdGVDc3NDbGFzcz9WLnNwcml0ZTp0LGl0ZW1XcmFwcGVyOlYuaXRlbVdyYXBwZXJ9LFUpKX0scmVuZGVyQ29udGVudDpmdW5jdGlvbihlKXtyZXR1cm4gVi5jb250ZW50KGQoZSxVKSl9fSksci51aS5wbHVnaW4oVyl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQsbil7dmFyIGkscj1lLmdldFRpbWV6b25lT2Zmc2V0KCk7ZS5zZXRUaW1lKGUuZ2V0VGltZSgpK3QpLG58fChpPWUuZ2V0VGltZXpvbmVPZmZzZXQoKS1yLGUuc2V0VGltZShlLmdldFRpbWUoKStpKnopKX1mdW5jdGlvbiBpKCl7dmFyIGU9bmV3ICQsdD1uZXcgJChlLmdldEZ1bGxZZWFyKCksZS5nZXRNb250aCgpLGUuZ2V0RGF0ZSgpLDAsMCwwKSxuPW5ldyAkKGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCksZS5nZXREYXRlKCksMTIsMCwwKTtyZXR1cm4tMSoodC5nZXRUaW1lem9uZU9mZnNldCgpLW4uZ2V0VGltZXpvbmVPZmZzZXQoKSl9ZnVuY3Rpb24gcihlKXtyZXR1cm4gNjAqZS5nZXRIb3VycygpKnorZS5nZXRNaW51dGVzKCkqeisxZTMqZS5nZXRTZWNvbmRzKCkrZS5nZXRNaWxsaXNlY29uZHMoKX1mdW5jdGlvbiBvKGUsdCxuKXt2YXIgaSxvPXIodCksYT1yKG4pO3JldHVybiBlJiZvIT1hPyhpPXIoZSksbz5pJiYoaSs9Riksbz5hJiYoYSs9RiksaT49byYmYT49aSk6ITB9ZnVuY3Rpb24gYShlKXt2YXIgdD1lLnBhcnNlRm9ybWF0cztlLmZvcm1hdD1mKGUuZm9ybWF0fHxkLmdldEN1bHR1cmUoZS5jdWx0dXJlKS5jYWxlbmRhcnMuc3RhbmRhcmQucGF0dGVybnMudCksdD1qKHQpP3Q6W3RdLHQuc3BsaWNlKDAsMCxlLmZvcm1hdCksZS5wYXJzZUZvcm1hdHM9dH1mdW5jdGlvbiBzKGUpe2UucHJldmVudERlZmF1bHQoKX12YXIgbCxjLGQ9d2luZG93LmtlbmRvLHU9ZC5rZXlzLGg9ZC5wYXJzZURhdGUscD1kLl9hY3RpdmVFbGVtZW50LGY9ZC5fZXh0cmFjdEZvcm1hdCxnPWQuc3VwcG9ydCxtPWcuYnJvd3Nlcix2PWQudWksXz12LldpZGdldCx5PVwib3BlblwiLHc9XCJjbG9zZVwiLGI9XCJjaGFuZ2VcIixrPVwiLmtlbmRvVGltZVBpY2tlclwiLHg9XCJjbGlja1wiK2ssQz1cImstc3RhdGUtZGVmYXVsdFwiLFM9XCJkaXNhYmxlZFwiLFQ9XCJyZWFkb25seVwiLEQ9XCJsaVwiLEE9XCI8c3Bhbi8+XCIsRT1cImstc3RhdGUtZm9jdXNlZFwiLE09XCJrLXN0YXRlLWhvdmVyXCIsUD1cIm1vdXNlZW50ZXJcIitrK1wiIG1vdXNlbGVhdmVcIitrLEk9XCJtb3VzZWRvd25cIitrLHo9NmU0LEY9ODY0ZTUsUj1cImstc3RhdGUtc2VsZWN0ZWRcIixCPVwiay1zdGF0ZS1kaXNhYmxlZFwiLEw9XCJhcmlhLXNlbGVjdGVkXCIsTz1cImFyaWEtZXhwYW5kZWRcIixIPVwiYXJpYS1oaWRkZW5cIixOPVwiYXJpYS1kaXNhYmxlZFwiLFY9XCJhcmlhLXJlYWRvbmx5XCIsVT1cImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLFc9XCJpZFwiLGo9ZS5pc0FycmF5LEc9ZS5leHRlbmQscT1lLnByb3h5LCQ9RGF0ZSxZPW5ldyAkO1k9bmV3ICQoWS5nZXRGdWxsWWVhcigpLFkuZ2V0TW9udGgoKSxZLmdldERhdGUoKSwwLDAsMCksbD1mdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9dC5pZDtuLm9wdGlvbnM9dCxuLnVsPWUoJzx1bCB0YWJpbmRleD1cIi0xXCIgcm9sZT1cImxpc3Rib3hcIiBhcmlhLWhpZGRlbj1cInRydWVcIiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1saXN0IGstcmVzZXRcIi8+JykuY3NzKHtvdmVyZmxvdzpnLmtpbmV0aWNTY3JvbGxOZWVkZWQ/XCJcIjpcImF1dG9cIn0pLm9uKHgsRCxxKG4uX2NsaWNrLG4pKS5vbihcIm1vdXNlZW50ZXJcIitrLEQsZnVuY3Rpb24oKXtlKHRoaXMpLmFkZENsYXNzKE0pfSkub24oXCJtb3VzZWxlYXZlXCIrayxELGZ1bmN0aW9uKCl7ZSh0aGlzKS5yZW1vdmVDbGFzcyhNKX0pLG4ubGlzdD1lKFwiPGRpdiBjbGFzcz0nay1saXN0LWNvbnRhaW5lcicvPlwiKS5hcHBlbmQobi51bCkub24oSSxzKSxpJiYobi5fdGltZVZpZXdJRD1pK1wiX3RpbWV2aWV3XCIsbi5fb3B0aW9uSUQ9aStcIl9vcHRpb25fc2VsZWN0ZWRcIixuLnVsLmF0dHIoVyxuLl90aW1lVmlld0lEKSksbi5fcG9wdXAoKSxuLl9oZWlnaHRIYW5kbGVyPXEobi5faGVpZ2h0LG4pLG4udGVtcGxhdGU9ZC50ZW1wbGF0ZSgnPGxpIHRhYmluZGV4PVwiLTFcIiByb2xlPVwib3B0aW9uXCIgY2xhc3M9XCJrLWl0ZW1cIiB1bnNlbGVjdGFibGU9XCJvblwiPiM9ZGF0YSM8L2xpPicse3VzZVdpdGhCbG9jazohMX0pfSxsLnByb3RvdHlwZT17Y3VycmVudDpmdW5jdGlvbihuKXt2YXIgaT10aGlzLHI9aS5vcHRpb25zLmFjdGl2ZTtyZXR1cm4gbj09PXQ/aS5fY3VycmVudDooaS5fY3VycmVudCYmaS5fY3VycmVudC5yZW1vdmVDbGFzcyhSKS5yZW1vdmVBdHRyKEwpLnJlbW92ZUF0dHIoVyksbiYmKG49ZShuKS5hZGRDbGFzcyhSKS5hdHRyKFcsaS5fb3B0aW9uSUQpLmF0dHIoTCwhMCksaS5zY3JvbGwoblswXSkpLGkuX2N1cnJlbnQ9bixyJiZyKG4pLHQpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMucG9wdXAuY2xvc2UoKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS51bC5vZmYoayksZS5saXN0Lm9mZihrKSxlLl90b3VjaFNjcm9sbGVyJiZlLl90b3VjaFNjcm9sbGVyLmRlc3Ryb3koKSxlLnBvcHVwLmRlc3Ryb3koKX0sb3BlbjpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS51bFswXS5maXJzdENoaWxkfHxlLmJpbmQoKSxlLnBvcHVwLm9wZW4oKSxlLl9jdXJyZW50JiZlLnNjcm9sbChlLl9jdXJyZW50WzBdKX0sZGF0YUJpbmQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49dGhpcyxpPW4ub3B0aW9ucyxyPWkuZm9ybWF0LGE9ZC50b1N0cmluZyxzPW4udGVtcGxhdGUsbD1lLmxlbmd0aCxjPTAsdT1cIlwiO2w+YztjKyspdD1lW2NdLG8odCxpLm1pbixpLm1heCkmJih1Kz1zKGEodCxyLGkuY3VsdHVyZSkpKTtuLl9odG1sKHUpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGUsdCxvLGE9dGhpcyxzPWEub3B0aW9ucyxsPXMuZm9ybWF0LGM9aSgpLHU9MD5jLGg9cy5taW4scD1zLm1heCxmPXIoaCksZz1yKHApLG09cy5pbnRlcnZhbCp6LHY9ZC50b1N0cmluZyxfPWEudGVtcGxhdGUseT1uZXcgJCgraCksdz15LmdldERhdGUoKSxiPTAsaz1cIlwiO2ZvcihvPXU/KEYrYyp6KS9tOkYvbSxmIT1nJiYoZj5nJiYoZys9Riksbz0oZy1mKS9tKzEpLHQ9cGFyc2VJbnQobywxMCk7bz5iO2IrKyliJiZuKHksbSx1KSxnJiZ0PT1iJiYoZT1yKHkpLHc8eS5nZXREYXRlKCkmJihlKz1GKSxlPmcmJih5PW5ldyAkKCtwKSkpLGsrPV8odih5LGwscy5jdWx0dXJlKSk7YS5faHRtbChrKX0sYmluZDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm9wdGlvbnMuZGF0ZXM7dCYmdFswXT9lLmRhdGFCaW5kKHQpOmUucmVmcmVzaCgpfSxfaHRtbDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QudWxbMF0uaW5uZXJIVE1MPWUsdC5wb3B1cC51bmJpbmQoeSx0Ll9oZWlnaHRIYW5kbGVyKSx0LnBvcHVwLm9uZSh5LHQuX2hlaWdodEhhbmRsZXIpLHQuY3VycmVudChudWxsKSx0LnNlbGVjdCh0Ll92YWx1ZSl9LHNjcm9sbDpmdW5jdGlvbihlKXtpZihlKXt2YXIgdCxuPXRoaXMudWxbMF0saT1lLm9mZnNldFRvcCxyPWUub2Zmc2V0SGVpZ2h0LG89bi5zY3JvbGxUb3AsYT1uLmNsaWVudEhlaWdodCxzPWkrcixsPXRoaXMuX3RvdWNoU2Nyb2xsZXI7bD8odD10aGlzLmxpc3QuaGVpZ2h0KCksaT50JiYoaT1pLXQrciksbC5zY3JvbGxUbygwLC1pKSk6bi5zY3JvbGxUb3A9bz5pP2k6cz5vK2E/cy1hOm99fSxzZWxlY3Q6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPW4ub3B0aW9ucyxyPW4uX2N1cnJlbnQ7dCBpbnN0YW5jZW9mIERhdGUmJih0PWQudG9TdHJpbmcodCxpLmZvcm1hdCxpLmN1bHR1cmUpKSxcInN0cmluZ1wiPT10eXBlb2YgdCYmKHImJnIudGV4dCgpPT09dD90PXI6KHQ9ZS5ncmVwKG4udWxbMF0uY2hpbGROb2RlcyxmdW5jdGlvbihlKXtyZXR1cm4oZS50ZXh0Q29udGVudHx8ZS5pbm5lclRleHQpPT10fSksdD10WzBdP3Q6bnVsbCkpLG4uY3VycmVudCh0KX0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnM7ZS5taW49aChlLm1pbiksZS5tYXg9aChlLm1heCksdGhpcy5vcHRpb25zPUcodCxlLHthY3RpdmU6dC5hY3RpdmUsY2hhbmdlOnQuY2hhbmdlLGNsb3NlOnQuY2xvc2Usb3Blbjp0Lm9wZW59KSx0aGlzLmJpbmQoKX0sdG9nZ2xlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLnBvcHVwLnZpc2libGUoKT9lLmNsb3NlKCk6ZS5vcGVuKCl9LHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fdmFsdWU9ZSx0LnVsWzBdLmZpcnN0Q2hpbGQmJnQuc2VsZWN0KGUpfSxfY2xpY2s6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPWUodC5jdXJyZW50VGFyZ2V0KTt0LmlzRGVmYXVsdFByZXZlbnRlZCgpfHwobi5zZWxlY3QoaSksbi5vcHRpb25zLmNoYW5nZShpLnRleHQoKSwhMCksbi5jbG9zZSgpKX0sX2hlaWdodDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmxpc3Qsbj10LnBhcmVudChcIi5rLWFuaW1hdGlvbi1jb250YWluZXJcIiksaT1lLm9wdGlvbnMuaGVpZ2h0O2UudWxbMF0uY2hpbGRyZW4ubGVuZ3RoJiZ0LmFkZChuKS5zaG93KCkuaGVpZ2h0KGUudWxbMF0uc2Nyb2xsSGVpZ2h0Pmk/aTpcImF1dG9cIikuaGlkZSgpfSxfcGFyc2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucyxpPXQuX3ZhbHVlfHxZO3JldHVybiBlIGluc3RhbmNlb2YgJD9lOihlPWgoZSxuLnBhcnNlRm9ybWF0cyxuLmN1bHR1cmUpLGUmJihlPW5ldyAkKGkuZ2V0RnVsbFllYXIoKSxpLmdldE1vbnRoKCksaS5nZXREYXRlKCksZS5nZXRIb3VycygpLGUuZ2V0TWludXRlcygpLGUuZ2V0U2Vjb25kcygpLGUuZ2V0TWlsbGlzZWNvbmRzKCkpKSxlKX0sX2FkanVzdExpc3RXaWR0aDpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLmxpc3QsaT1uWzBdLnN0eWxlLndpZHRoLHI9dGhpcy5vcHRpb25zLmFuY2hvcjsobi5kYXRhKFwid2lkdGhcIil8fCFpKSYmKGU9d2luZG93LmdldENvbXB1dGVkU3R5bGU/d2luZG93LmdldENvbXB1dGVkU3R5bGUoclswXSxudWxsKTowLHQ9ZT9wYXJzZUZsb2F0KGUud2lkdGgpOnIub3V0ZXJXaWR0aCgpLGUmJihtLm1vemlsbGF8fG0ubXNpZSkmJih0Kz1wYXJzZUZsb2F0KGUucGFkZGluZ0xlZnQpK3BhcnNlRmxvYXQoZS5wYWRkaW5nUmlnaHQpK3BhcnNlRmxvYXQoZS5ib3JkZXJMZWZ0V2lkdGgpK3BhcnNlRmxvYXQoZS5ib3JkZXJSaWdodFdpZHRoKSksaT10LShuLm91dGVyV2lkdGgoKS1uLndpZHRoKCkpLG4uY3NzKHtmb250RmFtaWx5OnIuY3NzKFwiZm9udC1mYW1pbHlcIiksd2lkdGg6aX0pLmRhdGEoXCJ3aWR0aFwiLGkpKX0sX3BvcHVwOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUubGlzdCxuPWUub3B0aW9ucyxpPW4uYW5jaG9yO2UucG9wdXA9bmV3IHYuUG9wdXAodCxHKG4ucG9wdXAse2FuY2hvcjppLG9wZW46bi5vcGVuLGNsb3NlOm4uY2xvc2UsYW5pbWF0aW9uOm4uYW5pbWF0aW9uLGlzUnRsOmcuaXNSdGwobi5hbmNob3IpfSkpLGUuX3RvdWNoU2Nyb2xsZXI9ZC50b3VjaFNjcm9sbGVyKGUucG9wdXAuZWxlbWVudCl9LG1vdmU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPWUua2V5Q29kZSxyPW4udWxbMF0sbz1uLl9jdXJyZW50LGE9aT09PXUuRE9XTjtpZihpPT09dS5VUHx8YSl7aWYoZS5hbHRLZXkpcmV0dXJuIG4udG9nZ2xlKGEpLHQ7bz1hP28/b1swXS5uZXh0U2libGluZzpyLmZpcnN0Q2hpbGQ6bz9vWzBdLnByZXZpb3VzU2libGluZzpyLmxhc3RDaGlsZCxvJiZuLnNlbGVjdChvKSxuLm9wdGlvbnMuY2hhbmdlKG4uX2N1cnJlbnQudGV4dCgpKSxlLnByZXZlbnREZWZhdWx0KCl9ZWxzZShpPT09dS5FTlRFUnx8aT09PXUuVEFCfHxpPT09dS5FU0MpJiYoZS5wcmV2ZW50RGVmYXVsdCgpLG8mJm4ub3B0aW9ucy5jaGFuZ2Uoby50ZXh0KCksITApLG4uY2xvc2UoKSl9fSxsLmdldE1pbGxpc2Vjb25kcz1yLGQuVGltZVZpZXc9bCxjPV8uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG89dGhpcztfLmZuLmluaXQuY2FsbChvLGUsdCksZT1vLmVsZW1lbnQsdD1vLm9wdGlvbnMsdC5taW49aChlLmF0dHIoXCJtaW5cIikpfHxoKHQubWluKSx0Lm1heD1oKGUuYXR0cihcIm1heFwiKSl8fGgodC5tYXgpLGEodCksby5fd3JhcHBlcigpLG8udGltZVZpZXc9aT1uZXcgbChHKHt9LHQse2lkOmUuYXR0cihXKSxhbmNob3I6by53cmFwcGVyLGZvcm1hdDp0LmZvcm1hdCxjaGFuZ2U6ZnVuY3Rpb24odCxuKXtuP28uX2NoYW5nZSh0KTplLnZhbCh0KX0sb3BlbjpmdW5jdGlvbih0KXtvLnRpbWVWaWV3Ll9hZGp1c3RMaXN0V2lkdGgoKSxvLnRyaWdnZXIoeSk/dC5wcmV2ZW50RGVmYXVsdCgpOihlLmF0dHIoTywhMCksbi5hdHRyKEgsITEpKX0sY2xvc2U6ZnVuY3Rpb24odCl7by50cmlnZ2VyKHcpP3QucHJldmVudERlZmF1bHQoKTooZS5hdHRyKE8sITEpLG4uYXR0cihILCEwKSl9LGFjdGl2ZTpmdW5jdGlvbih0KXtlLnJlbW92ZUF0dHIoVSksdCYmZS5hdHRyKFUsaS5fb3B0aW9uSUQpfX0pKSxuPWkudWwsby5faWNvbigpLG8uX3Jlc2V0KCk7dHJ5e2VbMF0uc2V0QXR0cmlidXRlKFwidHlwZVwiLFwidGV4dFwiKX1jYXRjaChzKXtlWzBdLnR5cGU9XCJ0ZXh0XCJ9ZS5hZGRDbGFzcyhcImstaW5wdXRcIikuYXR0cih7cm9sZTpcImNvbWJvYm94XCIsXCJhcmlhLWV4cGFuZGVkXCI6ITEsXCJhcmlhLW93bnNcIjppLl90aW1lVmlld0lEfSkscj1lLmlzKFwiW2Rpc2FibGVkXVwiKSxyP28uZW5hYmxlKCExKTpvLnJlYWRvbmx5KGUuaXMoXCJbcmVhZG9ubHldXCIpKSxvLl9vbGQ9by5fdXBkYXRlKHQudmFsdWV8fG8uZWxlbWVudC52YWwoKSksby5fb2xkVGV4dD1lLnZhbCgpLGQubm90aWZ5KG8pfSxvcHRpb25zOntuYW1lOlwiVGltZVBpY2tlclwiLG1pbjpZLG1heDpZLGZvcm1hdDpcIlwiLGRhdGVzOltdLHBhcnNlRm9ybWF0czpbXSx2YWx1ZTpudWxsLGludGVydmFsOjMwLGhlaWdodDoyMDAsYW5pbWF0aW9uOnt9fSxldmVudHM6W3ksdyxiXSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Ll92YWx1ZTtfLmZuLnNldE9wdGlvbnMuY2FsbCh0LGUpLGU9dC5vcHRpb25zLGEoZSksdC50aW1lVmlldy5zZXRPcHRpb25zKGUpLG4mJnQuZWxlbWVudC52YWwoZC50b1N0cmluZyhuLGUuZm9ybWF0LGUuY3VsdHVyZSkpfSxkYXRhQmluZDpmdW5jdGlvbihlKXtqKGUpJiZ0aGlzLnRpbWVWaWV3LmRhdGFCaW5kKGUpfSxfZWRpdGFibGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZGlzYWJsZSxpPWUucmVhZG9ubHkscj10Ll9hcnJvdy5vZmYoayksbz10LmVsZW1lbnQub2ZmKGspLGE9dC5faW5wdXRXcmFwcGVyLm9mZihrKTtpfHxuPyhhLmFkZENsYXNzKG4/QjpDKS5yZW1vdmVDbGFzcyhuP0M6Qiksby5hdHRyKFMsbikuYXR0cihULGkpLmF0dHIoTixuKS5hdHRyKFYsaSkpOihhLmFkZENsYXNzKEMpLnJlbW92ZUNsYXNzKEIpLm9uKFAsdC5fdG9nZ2xlSG92ZXIpLG8ucmVtb3ZlQXR0cihTKS5yZW1vdmVBdHRyKFQpLmF0dHIoTiwhMSkuYXR0cihWLCExKS5vbihcImtleWRvd25cIitrLHEodC5fa2V5ZG93bix0KSkub24oXCJmb2N1c291dFwiK2sscSh0Ll9ibHVyLHQpKS5vbihcImZvY3VzXCIrayxmdW5jdGlvbigpe3QuX2lucHV0V3JhcHBlci5hZGRDbGFzcyhFKX0pLHIub24oeCxxKHQuX2NsaWNrLHQpKS5vbihJLHMpKX0scmVhZG9ubHk6ZnVuY3Rpb24oZSl7dGhpcy5fZWRpdGFibGUoe3JlYWRvbmx5OmU9PT10PyEwOmUsZGlzYWJsZTohMX0pfSxlbmFibGU6ZnVuY3Rpb24oZSl7dGhpcy5fZWRpdGFibGUoe3JlYWRvbmx5OiExLGRpc2FibGU6IShlPWU9PT10PyEwOmUpfSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO18uZm4uZGVzdHJveS5jYWxsKGUpLGUudGltZVZpZXcuZGVzdHJveSgpLGUuZWxlbWVudC5vZmYoayksZS5fYXJyb3cub2ZmKGspLGUuX2lucHV0V3JhcHBlci5vZmYoayksZS5fZm9ybSYmZS5fZm9ybS5vZmYoXCJyZXNldFwiLGUuX3Jlc2V0SGFuZGxlcil9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy50aW1lVmlldy5jbG9zZSgpfSxvcGVuOmZ1bmN0aW9uKCl7dGhpcy50aW1lVmlldy5vcGVuKCl9LG1pbjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb3B0aW9uKFwibWluXCIsZSl9LG1heDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb3B0aW9uKFwibWF4XCIsZSl9LHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGU9PT10P24uX3ZhbHVlOihuLl9vbGQ9bi5fdXBkYXRlKGUpLG51bGw9PT1uLl9vbGQmJm4uZWxlbWVudC52YWwoXCJcIiksbi5fb2xkVGV4dD1uLmVsZW1lbnQudmFsKCksdCl9LF9ibHVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZWxlbWVudC52YWwoKTtlLmNsb3NlKCksdCE9PWUuX29sZFRleHQmJmUuX2NoYW5nZSh0KSxlLl9pbnB1dFdyYXBwZXIucmVtb3ZlQ2xhc3MoRSl9LF9jbGljazpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmVsZW1lbnQ7ZS50aW1lVmlldy50b2dnbGUoKSxnLnRvdWNofHx0WzBdPT09cCgpfHx0LmZvY3VzKCl9LF9jaGFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlPXQuX3VwZGF0ZShlKSwrdC5fb2xkIT0rZSYmKHQuX29sZD1lLHQuX29sZFRleHQ9dC5lbGVtZW50LnZhbCgpLHQuZWxlbWVudC50cmlnZ2VyKGIpLHQudHJpZ2dlcihiKSl9LF9pY29uOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi5lbGVtZW50O3Q9aS5uZXh0KFwic3Bhbi5rLXNlbGVjdFwiKSx0WzBdfHwodD1lKCc8c3BhbiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1zZWxlY3RcIj48c3BhbiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1pY29uIGstaS1jbG9ja1wiPnNlbGVjdDwvc3Bhbj48L3NwYW4+JykuaW5zZXJ0QWZ0ZXIoaSkpLG4uX2Fycm93PXQuYXR0cih7cm9sZTpcImJ1dHRvblwiLFwiYXJpYS1jb250cm9sc1wiOm4udGltZVZpZXcuX3RpbWVWaWV3SUR9KX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUua2V5Q29kZSxpPXQudGltZVZpZXcscj10LmVsZW1lbnQudmFsKCk7aS5wb3B1cC52aXNpYmxlKCl8fGUuYWx0S2V5P2kubW92ZShlKTpuPT09dS5FTlRFUiYmciE9PXQuX29sZFRleHQmJnQuX2NoYW5nZShyKX0sX29wdGlvbjpmdW5jdGlvbihlLG4pe3ZhciBpPXRoaXMscj1pLm9wdGlvbnM7cmV0dXJuIG49PT10P3JbZV06KG49aS50aW1lVmlldy5fcGFyc2UobiksbiYmKG49bmV3ICQoK24pLHJbZV09bixpLnRpbWVWaWV3Lm9wdGlvbnNbZV09bixpLnRpbWVWaWV3LmJpbmQoKSksdCl9LF90b2dnbGVIb3ZlcjpmdW5jdGlvbih0KXtlKHQuY3VycmVudFRhcmdldCkudG9nZ2xlQ2xhc3MoTSxcIm1vdXNlZW50ZXJcIj09PXQudHlwZSl9LF91cGRhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucyxpPXQudGltZVZpZXcscj1pLl9wYXJzZShlKTtyZXR1cm4gbyhyLG4ubWluLG4ubWF4KXx8KHI9bnVsbCksdC5fdmFsdWU9cix0LmVsZW1lbnQudmFsKHI/ZC50b1N0cmluZyhyLG4uZm9ybWF0LG4uY3VsdHVyZSk6ZSksaS52YWx1ZShyKSxyfSxfd3JhcHBlcjpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4uZWxlbWVudDt0PWkucGFyZW50cyhcIi5rLXRpbWVwaWNrZXJcIiksdFswXXx8KHQ9aS53cmFwKEEpLnBhcmVudCgpLmFkZENsYXNzKFwiay1waWNrZXItd3JhcCBrLXN0YXRlLWRlZmF1bHRcIiksdD10LndyYXAoQSkucGFyZW50KCkpLHRbMF0uc3R5bGUuY3NzVGV4dD1pWzBdLnN0eWxlLmNzc1RleHQsbi53cmFwcGVyPXQuYWRkQ2xhc3MoXCJrLXdpZGdldCBrLXRpbWVwaWNrZXIgay1oZWFkZXJcIikuYWRkQ2xhc3MoaVswXS5jbGFzc05hbWUpLGkuY3NzKHt3aWR0aDpcIjEwMCVcIixoZWlnaHQ6aVswXS5zdHlsZS5oZWlnaHR9KSxuLl9pbnB1dFdyYXBwZXI9ZSh0WzBdLmZpcnN0Q2hpbGQpfSxfcmVzZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5lbGVtZW50LGk9bi5hdHRyKFwiZm9ybVwiKSxyPWk/ZShcIiNcIitpKTpuLmNsb3Nlc3QoXCJmb3JtXCIpO3JbMF0mJih0Ll9yZXNldEhhbmRsZXI9ZnVuY3Rpb24oKXt0LnZhbHVlKG5bMF0uZGVmYXVsdFZhbHVlKX0sdC5fZm9ybT1yLm9uKFwicmVzZXRcIix0Ll9yZXNldEhhbmRsZXIpKX19KSx2LnBsdWdpbihjKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKG4pe3ZhciBpPWUobi51c2VCdXR0b25UYWc/XCI8YnV0dG9uPjwvYnV0dG9uPlwiOlwiPGE+PC9hPlwiKTtyZXR1cm4gaS5kYXRhKHt0eXBlOlwiYnV0dG9uXCJ9KSxpLmF0dHIoJCxuLnVpZCksbi5hdHRyaWJ1dGVzJiZpLmF0dHIobi5hdHRyaWJ1dGVzKSxuLnRvZ2dsYWJsZSYmKGkuYWRkQ2xhc3MobSksbi5zZWxlY3RlZCYmaS5hZGRDbGFzcyhrKSksbi5lbmFibGU9PT0hMSYmaS5hZGRDbGFzcyh4KSxuLnVybD09PXR8fG4udXNlQnV0dG9uVGFnfHwoaS5hdHRyKFwiaHJlZlwiLG4udXJsKSxuLm1vYmlsZSYmaS5hdHRyKGMuYXR0cihcInJvbGVcIiksXCJidXR0b25cIikpLG4uZ3JvdXAmJmkuYXR0cihjLmF0dHIoXCJncm91cFwiKSxuLmdyb3VwKSwhbi50b2dnbGFibGUmJm4uY2xpY2smJmgobi5jbGljaykmJmkuZGF0YShcImNsaWNrXCIsbi5jbGljayksbi50b2dnbGFibGUmJm4udG9nZ2xlJiZoKG4udG9nZ2xlKSYmaS5kYXRhKFwidG9nZ2xlXCIsbi50b2dnbGUpLGl9ZnVuY3Rpb24gaShlKXt2YXIgdCxuPVkuYnV0dG9uLmJhc2UoZSk7cmV0dXJuIG4uYWRkQ2xhc3MoZiksZS5wcmltYXJ5JiZuLmFkZENsYXNzKFQpLGUuYWxpZ24mJm4uYWRkQ2xhc3MoXCJrLWFsaWduLVwiK2UuYWxpZ24pLGUuaWQmJm4uYXR0cihcImlkXCIsZS5pZCksXCJvdmVyZmxvd1wiIT1lLnNob3dUZXh0JiZlLnRleHQmJm4uaHRtbChlLm1vYmlsZT8nPHNwYW4gY2xhc3M9XCJrbS10ZXh0XCI+JytlLnRleHQrXCI8L3NwYW4+XCI6ZS50ZXh0KSx0PVwib3ZlcmZsb3dcIiE9ZS5zaG93SWNvbiYmKGUuaWNvbnx8ZS5zcHJpdGVDc3NDbGFzc3x8ZS5pbWFnZVVybCksdCYmbyhlLG4pLG59ZnVuY3Rpb24gcihlKXt2YXIgdCxuPVkuYnV0dG9uLmJhc2UoZSk7cmV0dXJuIG4uYWRkQ2xhc3MoZytcIiBcIitmKSxlLnByaW1hcnkmJm4uYWRkQ2xhc3MoVCksZS5pZCYmbi5hdHRyKFwiaWRcIixlLmlkK1wiX292ZXJmbG93XCIpLFwidG9vbGJhclwiIT1lLnNob3dUZXh0JiZlLnRleHQmJm4uaHRtbChlLm1vYmlsZT8nPHNwYW4gY2xhc3M9XCJrbS10ZXh0XCI+JytlLnRleHQrXCI8L3NwYW4+XCI6ZS50ZXh0KSx0PVwidG9vbGJhclwiIT1lLnNob3dJY29uJiYoZS5pY29ufHxlLnNwcml0ZUNzc0NsYXNzfHxlLmltYWdlVXJsKSx0JiZvKGUsbiksbn1mdW5jdGlvbiBvKHQsbil7dmFyIGkscixvLGE9dC5pY29uLHM9dC5zcHJpdGVDc3NDbGFzcyxsPXQuaW1hZ2VVcmw7KHN8fGx8fGEpJiYoaT0hMCxuLmNvbnRlbnRzKCkubm90KFwic3Bhbi5rLXNwcml0ZSxzcGFuLlwiK0QrXCIsaW1nLmstaW1hZ2VcIikuZWFjaChmdW5jdGlvbih0LG4peygxPT1uLm5vZGVUeXBlfHwzPT1uLm5vZGVUeXBlJiZlLnRyaW0obi5ub2RlVmFsdWUpLmxlbmd0aD4wKSYmKGk9ITEpfSksbi5hZGRDbGFzcyhpP0U6TSkpLGE/KHI9bi5jaGlsZHJlbihcInNwYW4uXCIrRCkuZmlyc3QoKSxyWzBdfHwocj1lKCc8c3BhbiBjbGFzcz1cIicrRCsnXCI+PC9zcGFuPicpLnByZXBlbmRUbyhuKSksci5hZGRDbGFzcyhBK2EpKTpzPyhyPW4uY2hpbGRyZW4oXCJzcGFuLmstc3ByaXRlXCIpLmZpcnN0KCksclswXXx8KHI9ZSgnPHNwYW4gY2xhc3M9XCJrLXNwcml0ZVwiPjwvc3Bhbj4nKS5wcmVwZW5kVG8obikpLHIuYWRkQ2xhc3MocykpOmwmJihvPW4uY2hpbGRyZW4oXCJpbWcuay1pbWFnZVwiKS5maXJzdCgpLG9bMF18fChvPWUoJzxpbWcgYWx0PVwiaWNvblwiIGNsYXNzPVwiay1pbWFnZVwiIC8+JykucHJlcGVuZFRvKG4pKSxvLmF0dHIoXCJzcmNcIixsKSl9ZnVuY3Rpb24gYSgpe3ZhciBlLHQ9dGhpcy5vcHRpb25zLmFuY2hvcixuPXQub3V0ZXJXaWR0aCgpO2Mud3JhcCh0aGlzLmVsZW1lbnQpLmFkZENsYXNzKFwiay1zcGxpdC13cmFwcGVyXCIpLGU9XCJib3JkZXItYm94XCIhPT10aGlzLmVsZW1lbnQuY3NzKFwiYm94LXNpemluZ1wiKT9uLSh0aGlzLmVsZW1lbnQub3V0ZXJXaWR0aCgpLXRoaXMuZWxlbWVudC53aWR0aCgpKTpuLHRoaXMuZWxlbWVudC5jc3Moe2ZvbnRGYW1pbHk6dC5jc3MoXCJmb250LWZhbWlseVwiKSxcIm1pbi13aWR0aFwiOmV9KX1mdW5jdGlvbiBzKGUpe2UudGFyZ2V0LmlzKFwiLmstdG9nZ2xlLWJ1dHRvblwiKXx8ZS50YXJnZXQudG9nZ2xlQ2xhc3MoayxcInByZXNzXCI9PWUudHlwZSl9ZnVuY3Rpb24gbCh0KXtyZXR1cm4gdD1lKHQpLHQuaGFzQ2xhc3MoXCJrbS1hY3Rpb25zaGVldFwiKT90LmNsb3Nlc3QoXCIua20tcG9wdXAtd3JhcHBlclwiKTp0LmFkZENsYXNzKFwia20td2lkZ2V0IGttLWFjdGlvbnNoZWV0XCIpLndyYXAoJzxkaXYgY2xhc3M9XCJrbS1hY3Rpb25zaGVldC13cmFwcGVyIGttLWFjdGlvbnNoZWV0LXRhYmxldCBrbS13aWRnZXQga20tcG9wdXBcIj48L2Rpdj4nKS5wYXJlbnQoKS53cmFwKCc8ZGl2IGNsYXNzPVwia20tcG9wdXAtd3JhcHBlciBrLXBvcHVwXCI+PC9kaXY+JykucGFyZW50KCl9dmFyIGM9d2luZG93LmtlbmRvLGQ9Yy51aS5XaWRnZXQsdT1lLnByb3h5LGg9Yy5pc0Z1bmN0aW9uLHA9XCJrLXRvb2xiYXJcIixmPVwiay1idXR0b25cIixnPVwiay1vdmVyZmxvdy1idXR0b25cIixtPVwiay10b2dnbGUtYnV0dG9uXCIsdj1cImstYnV0dG9uLWdyb3VwXCIsXz1cImstc3BsaXQtYnV0dG9uXCIseT1cImstc2VwYXJhdG9yXCIsdz1cImstcG9wdXBcIixiPVwiay10b29sYmFyLXJlc2l6YWJsZVwiLGs9XCJrLXN0YXRlLWFjdGl2ZVwiLHg9XCJrLXN0YXRlLWRpc2FibGVkXCIsQz1cImstZ3JvdXAtc3RhcnRcIixTPVwiay1ncm91cC1lbmRcIixUPVwiay1wcmltYXJ5XCIsRD1cImstaWNvblwiLEE9XCJrLWktXCIsRT1cImstYnV0dG9uLWljb25cIixNPVwiay1idXR0b24taWNvbnRleHRcIixQPVwiay1saXN0LWNvbnRhaW5lciBrLXNwbGl0LWNvbnRhaW5lclwiLEk9XCJrLXNwbGl0LWJ1dHRvbi1hcnJvd1wiLHo9XCJrLW92ZXJmbG93LWFuY2hvclwiLEY9XCJrLW92ZXJmbG93LWNvbnRhaW5lclwiLFI9XCJrLXRvb2xiYXItZmlyc3QtdmlzaWJsZVwiLEI9XCJrLXRvb2xiYXItbGFzdC12aXNpYmxlXCIsTD1cImNsaWNrXCIsTz1cInRvZ2dsZVwiLEg9XCJvcGVuXCIsTj1cImNsb3NlXCIsVj1cIm92ZXJmbG93T3BlblwiLFU9XCJvdmVyZmxvd0Nsb3NlXCIsVz1cIm5ldmVyXCIsaj1cImF1dG9cIixHPVwiYWx3YXlzXCIscT1cImstb3ZlcmZsb3ctaGlkZGVuXCIsJD1jLmF0dHIoXCJ1aWRcIiksWT17YnV0dG9uOntiYXNlOm4sdG9vbGJhcjppLG92ZXJmbG93OnJ9LGJ1dHRvbkdyb3VwOntiYXNlOmZ1bmN0aW9uKHQsbixpKXt2YXIgcixvLGE9dC5idXR0b25zO2lmKGEpe2Zvcih0LmF0dHJpYnV0ZXMmJmkuYXR0cih0LmF0dHJpYnV0ZXMpLGkuZGF0YSh7dHlwZTpcImJ1dHRvbkdyb3VwXCJ9KSxpLmF0dHIoJCx0LnVpZCksbz0wO2EubGVuZ3RoPm87bysrKWFbb10udWlkfHwoYVtvXS51aWQ9Yy5ndWlkKCkpLHI9bihlLmV4dGVuZCh7bW9iaWxlOnQubW9iaWxlfSxhW29dKSksci5hcHBlbmRUbyhpKTtpLmNoaWxkcmVuKCkuZmlyc3QoKS5hZGRDbGFzcyhDKSxpLmNoaWxkcmVuKCkubGFzdCgpLmFkZENsYXNzKFMpfX0sdG9vbGJhcjpmdW5jdGlvbih0KXt2YXIgbj1lKFwiPGRpdj48L2Rpdj5cIik7cmV0dXJuIFkuYnV0dG9uR3JvdXAuYmFzZSh0LFkuYnV0dG9uLnRvb2xiYXIsbiksbi5hZGRDbGFzcyh2KSx0LmFsaWduJiZuLmFkZENsYXNzKFwiay1hbGlnbi1cIit0LmFsaWduKSx0LmlkJiZuLmF0dHIoXCJpZFwiLHQuaWQpLG59LG92ZXJmbG93OmZ1bmN0aW9uKHQpe3ZhciBuPWUoXCI8bGk+PC9saT5cIik7cmV0dXJuIFkuYnV0dG9uR3JvdXAuYmFzZSh0LFkuYnV0dG9uLm92ZXJmbG93LG4pLG4uYWRkQ2xhc3MoKHQubW9iaWxlP1wiXCI6dikrXCIgay1vdmVyZmxvdy1ncm91cFwiKSx0LmlkJiZuLmF0dHIoXCJpZFwiLHQuaWQrXCJfb3ZlcmZsb3dcIiksbn19LHNwbGl0QnV0dG9uOnt0b29sYmFyOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvPWUoJzxkaXYgY2xhc3M9XCInK18rJ1wiPjwvZGl2PicpLHM9WS5idXR0b24udG9vbGJhcih0KSxjPWUoJzxhIGNsYXNzPVwiJytmK1wiIFwiK0krJ1wiPjxzcGFuIGNsYXNzPVwiJysodC5tb2JpbGU/XCJrbS1pY29uIGttLWFycm93ZG93blwiOlwiay1pY29uIGstaS1hcnJvdy1zXCIpKydcIj48L3NwYW4+PC9hPicpLGQ9ZSgnPHVsIGNsYXNzPVwiJytQKydcIj48L3VsPicpLHU9dC5tZW51QnV0dG9ucztmb3Iocy5hcHBlbmRUbyhvKSxjLmFwcGVuZFRvKG8pLGQuYXBwZW5kVG8obykscj0wO3UubGVuZ3RoPnI7cisrKWk9WS5idXR0b24udG9vbGJhcihlLmV4dGVuZCh7bW9iaWxlOnQubW9iaWxlLGNsaWNrOnQuY2xpY2t9LHVbcl0pKSxpLndyYXAoXCI8bGk+PC9saT5cIikucGFyZW50KCkuYXBwZW5kVG8oZCk7cmV0dXJuIHQuYWxpZ24mJm8uYWRkQ2xhc3MoXCJrLWFsaWduLVwiK3QuYWxpZ24pLHQuaWR8fCh0LmlkPXQudWlkKSxvLmF0dHIoXCJpZFwiLHQuaWQrXCJfd3JhcHBlclwiKSxkLmF0dHIoXCJpZFwiLHQuaWQrXCJfb3B0aW9ubGlzdFwiKS5hdHRyKCQsdC5yb290VWlkKSx0Lm1vYmlsZSYmKGQ9bChkKSksbj1kLmtlbmRvUG9wdXAoe2FwcGVuZFRvOnQubW9iaWxlP2UodC5tb2JpbGUpLmNoaWxkcmVuKFwiLmttLXBhbmVcIik6bnVsbCxhbmNob3I6byxjb3B5QW5jaG9yU3R5bGVzOiExLGFuaW1hdGlvbjp0LmFuaW1hdGlvbixvcGVuOmF9KS5kYXRhKFwia2VuZG9Qb3B1cFwiKSxvLmRhdGEoe3R5cGU6XCJzcGxpdEJ1dHRvblwiLGtlbmRvUG9wdXA6bn0pLG8uYXR0cigkLHQudWlkKSxvfSxvdmVyZmxvdzpmdW5jdGlvbih0KXt2YXIgbixpLHI9ZSgnPGxpIGNsYXNzPVwiJytfKydcIj48L2xpPicpLG89WS5idXR0b24ub3ZlcmZsb3codCksYT10Lm1lbnVCdXR0b25zO2ZvcihvLmFwcGVuZFRvKHIpLGk9MDthLmxlbmd0aD5pO2krKyluPVkuYnV0dG9uLm92ZXJmbG93KGUuZXh0ZW5kKHttb2JpbGU6dC5tb2JpbGV9LGFbaV0pKSxuLmFwcGVuZFRvKHIpO3JldHVybiB0LmlkJiZyLmF0dHIoXCJpZFwiLHQuaWQrXCJfb3ZlcmZsb3dcIiksci5kYXRhKHt0eXBlOlwic3BsaXRCdXR0b25cIn0pLHIuYXR0cigkLHQudWlkKSxyfX0sc2VwYXJhdG9yOntiYXNlOmZ1bmN0aW9uKHQsbil7dmFyIGk9ZShuP1wiPGxpPiZuYnNwOzwvbGk+XCI6XCI8ZGl2PiZuYnNwOzwvZGl2PlwiKTtyZXR1cm4gaS5kYXRhKHt0eXBlOlwic2VwYXJhdG9yXCJ9KSxpLmF0dHIoJCx0LnVpZCksdC5hdHRyaWJ1dGVzJiZpLmF0dHIodC5hdHRyaWJ1dGVzKSxpLmFkZENsYXNzKHkpLGl9LHRvb2xiYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIFkuc2VwYXJhdG9yLmJhc2UoZSwhMSl9LG92ZXJmbG93OmZ1bmN0aW9uKGUpe3JldHVybiBZLnNlcGFyYXRvci5iYXNlKGUsITApfX0sb3ZlcmZsb3dBbmNob3I6JzxkaXYgY2xhc3M9XCJrLW92ZXJmbG93LWFuY2hvclwiPjwvZGl2Picsb3ZlcmZsb3dDb250YWluZXI6Jzx1bCBjbGFzcz1cImstb3ZlcmZsb3ctY29udGFpbmVyIGstbGlzdC1jb250YWluZXJcIj48L3VsPid9LEs9ZC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxyPXRoaXM7aWYoZC5mbi5pbml0LmNhbGwocix0LG4pLG49ci5vcHRpb25zLHQ9ci53cmFwcGVyPXIuZWxlbWVudCx0LmFkZENsYXNzKHArXCIgay13aWRnZXRcIiksdGhpcy51aWQ9Yy5ndWlkKCksdC5hdHRyKCQsdGhpcy51aWQpLHIuaXNNb2JpbGU9XCJib29sZWFuXCI9PXR5cGVvZiBuLm1vYmlsZT9uLm1vYmlsZTpyLmVsZW1lbnQuY2xvc2VzdChcIi5rbS1yb290XCIpWzBdLHIuYW5pbWF0aW9uPXIuaXNNb2JpbGU/e29wZW46e2VmZmVjdHM6XCJmYWRlXCJ9fTp7fSxyLmlzTW9iaWxlJiYodC5hZGRDbGFzcyhcImttLXdpZGdldFwiKSxEPVwia20taWNvblwiLEE9XCJrbS1cIixmPVwia20tYnV0dG9uXCIsdj1cImttLWJ1dHRvbmdyb3VwIGttLXdpZGdldFwiLGs9XCJrbS1zdGF0ZS1hY3RpdmVcIix4PVwia20tc3RhdGUtZGlzYWJsZWRcIiksbi5yZXNpemFibGU/KHIuX3JlbmRlck92ZXJmbG93KCksdC5hZGRDbGFzcyhiKSxyLm92ZXJmbG93VXNlckV2ZW50cz1uZXcgYy5Vc2VyRXZlbnRzKHIuZWxlbWVudCx7dGhyZXNob2xkOjUsYWxsb3dTZWxlY3Rpb246ITAsZmlsdGVyOlwiLlwiK3osdGFwOnUoci5fdG9nZ2xlT3ZlcmZsb3cscil9KSxjLm9uUmVzaXplKGZ1bmN0aW9uKCl7ci5yZXNpemUoKX0pKTpyLnBvcHVwPXtlbGVtZW50OmUoW10pfSxuLml0ZW1zJiZuLml0ZW1zLmxlbmd0aClmb3IoaT0wO24uaXRlbXMubGVuZ3RoPmk7aSsrKXIuYWRkKG4uaXRlbXNbaV0pO3IudXNlckV2ZW50cz1uZXcgYy5Vc2VyRXZlbnRzKGRvY3VtZW50LHt0aHJlc2hvbGQ6NSxhbGxvd1NlbGVjdGlvbjohMCxmaWx0ZXI6XCJbXCIrJCtcIj1cIit0aGlzLnVpZCtcIl0gLlwiK2YrXCIsIFtcIiskK1wiPVwiK3RoaXMudWlkK1wiXSAuXCIrZyx0YXA6dShyLl9idXR0b25DbGljayxyKSxwcmVzczpzLHJlbGVhc2U6c30pLG4ucmVzaXphYmxlJiZ0aGlzLl90b2dnbGVPdmVyZmxvd0FuY2hvcigpLGMubm90aWZ5KHIpfSxldmVudHM6W0wsTyxILE4sVixVXSxvcHRpb25zOntuYW1lOlwiVG9vbEJhclwiLGl0ZW1zOltdLHJlc2l6YWJsZTohMCxtb2JpbGU6bnVsbH0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5lbGVtZW50LmZpbmQoXCIuXCIrXykuZWFjaChmdW5jdGlvbih0LG4pe2UobikuZGF0YShcImtlbmRvUG9wdXBcIikuZGVzdHJveSgpfSksdC51c2VyRXZlbnRzLmRlc3Ryb3koKSx0Lm9wdGlvbnMucmVzaXphYmxlJiYodC5vdmVyZmxvd1VzZXJFdmVudHMuZGVzdHJveSgpLHQucG9wdXAuZGVzdHJveSgpKSxkLmZuLmRlc3Ryb3kuY2FsbCh0KX0sYWRkOmZ1bmN0aW9uKHQpe3ZhciBuLGkscj1ZW3QudHlwZV0sbz10LnRlbXBsYXRlLGE9dGhpcyxzPWEuaXNNb2JpbGU/XCJcIjpcImstaXRlbSBrLXN0YXRlLWRlZmF1bHRcIixsPXQub3ZlcmZsb3dUZW1wbGF0ZTtlLmV4dGVuZCh0LHt1aWQ6Yy5ndWlkKCksYW5pbWF0aW9uOmEuYW5pbWF0aW9uLG1vYmlsZTphLmlzTW9iaWxlLHJvb3RVaWQ6YS51aWR9KSxvJiYhbCYmKHQub3ZlcmZsb3c9VyksdC5vdmVyZmxvdyE9PVcmJmEub3B0aW9ucy5yZXNpemFibGUmJihsP2k9ZShoKGwpP2wodCk6bCk6ciYmKGk9KHIub3ZlcmZsb3d8fGUubm9vcCkodCkpLGkmJmkubGVuZ3RoJiYoXCJMSVwiIT09aS5wcm9wKFwidGFnTmFtZVwiKSYmKGkucmVtb3ZlQXR0cigkKSxpPWkud3JhcChcIjxsaT48L2xpPlwiKS5wYXJlbnQoKSxpLmF0dHIoJCx0LnVpZCkpLGEuX2F0dHJpYnV0ZXMoaSx0KSxpLmFkZENsYXNzKHMpLmFwcGVuZFRvKGEucG9wdXAuY29udGFpbmVyKSxpLmRhdGEoXCJvdmVyZmxvd1wiKT09PWomJmkuYWRkQ2xhc3MocSksYS5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmkuZ2V0KCl9fSkpKSx0Lm92ZXJmbG93IT09RyYmKG8/KG49aChvKT9vKHQpOm8sbiBpbnN0YW5jZW9mIGpRdWVyeXx8KG49ZShuLnJlcGxhY2UoL15cXHMrfFxccyskL2csXCJcIikpKSxuPW4ud3JhcChcIjxkaXY+PC9kaXY+XCIpLnBhcmVudCgpLG4uYXR0cigkLHQudWlkKSk6ciYmKG49KHIudG9vbGJhcnx8ZS5ub29wKSh0KSksbiYmbi5sZW5ndGgmJihhLl9hdHRyaWJ1dGVzKG4sdCksYS5vcHRpb25zLnJlc2l6YWJsZT8obi5hcHBlbmRUbyhhLmVsZW1lbnQpLmNzcyhcInZpc2liaWxpdHlcIixcImhpZGRlblwiKSxhLl9zaHJpbmsoYS5lbGVtZW50LmlubmVyV2lkdGgoKSksbi5jc3MoXCJ2aXNpYmlsaXR5XCIsXCJ2aXNpYmxlXCIpKTpuLmFwcGVuZFRvKGEuZWxlbWVudCksYS5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOm4uZ2V0KCl9fSkpKX0scmVtb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLmVsZW1lbnQuZmluZChlKTshaS5sZW5ndGgmJnRoaXMub3B0aW9ucy5yZXNpemFibGU/KGk9dGhpcy5wb3B1cC5lbGVtZW50LmZpbmQoZSksbj1pLnBhcmVudCgpLmF0dHIoJCkpOm49aS5hdHRyKCQpLHQ9aS5kYXRhKFwidHlwZVwiKSxpLnBhcmVudChcIi5cIitfKS5kYXRhKFwidHlwZVwiKSYmKHQ9XCJzcGxpdEJ1dHRvblwiLGk9aS5wYXJlbnQoKSksXCJzcGxpdEJ1dHRvblwiPT09dCYmaS5kYXRhKFwia2VuZG9Qb3B1cFwiKS5kZXN0cm95KCksaS5hZGQodGhpcy5wb3B1cC5lbGVtZW50LmZpbmQoXCJbXCIrJCtcIj0nXCIrbitcIiddXCIpKS5yZW1vdmUoKX0sZW5hYmxlOmZ1bmN0aW9uKG4saSl7dmFyIHI9dGhpcy5lbGVtZW50LmZpbmQobikuYXR0cigkKTshciYmdGhpcy5wb3B1cCYmKHI9dGhpcy5wb3B1cC5lbGVtZW50LmZpbmQobikucGFyZW50KFwibGlcIikuYXR0cigkKSksdD09PWkmJihpPSEwKSxpP2UoXCJbXCIrJCtcIj0nXCIrcitcIiddXCIpLnJlbW92ZUNsYXNzKHgpOmUoXCJbXCIrJCtcIj0nXCIrcitcIiddXCIpLmFkZENsYXNzKHgpfSxnZXRTZWxlY3RlZEZyb21Hcm91cDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lbGVtZW50LmZpbmQoXCIuXCIrbStcIltkYXRhLWdyb3VwPSdcIitlK1wiJ11cIikuZmlsdGVyKFwiLlwiK2spfSx0b2dnbGU6ZnVuY3Rpb24odCxuKXt2YXIgaSxyPWUodCksbz1yLmRhdGEoXCJ1aWRcIiksYT1yLmRhdGEoXCJncm91cFwiKTtyLmhhc0NsYXNzKG0pJiYoYSYmdGhpcy5lbGVtZW50LmFkZCh0aGlzLnBvcHVwLmVsZW1lbnQpLmZpbmQoXCIuXCIrbStcIltkYXRhLWdyb3VwPSdcIithK1wiJ11cIikuZmlsdGVyKFwiLlwiK2spLnJlbW92ZUNsYXNzKGspLGUuY29udGFpbnModGhpcy5lbGVtZW50WzBdLHJbMF0pPyhpPXRoaXMucG9wdXAuZWxlbWVudC5maW5kKFwiW1wiKyQrXCI9J1wiK28rXCInXVwiKSxcIkxJXCI9PT1pLnByb3AoXCJ0YWdOYW1lXCIpJiYoaT1pLmZpbmQoXCIuXCIrbStcIjpmaXJzdFwiKSkpOihvPW8/bzpyLnBhcmVudCgpLmRhdGEoXCJ1aWRcIiksaT10aGlzLmVsZW1lbnQuZmluZChcIltcIiskK1wiPSdcIitvK1wiJ11cIikpLHIuYWRkKGkpLnRvZ2dsZUNsYXNzKGssbikpfSxfYXR0cmlidXRlczpmdW5jdGlvbihlLHQpe2UuYXR0cihjLmF0dHIoXCJvdmVyZmxvd1wiKSx0Lm92ZXJmbG93fHxqKX0sX3JlbmRlck92ZXJmbG93OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPVkub3ZlcmZsb3dDb250YWluZXI7dC5vdmVyZmxvd0FuY2hvcj1lKFkub3ZlcmZsb3dBbmNob3IpLmFkZENsYXNzKGYpLHQuZWxlbWVudC5hcHBlbmQodC5vdmVyZmxvd0FuY2hvciksdC5pc01vYmlsZT8odC5vdmVyZmxvd0FuY2hvci5hcHBlbmQoJzxzcGFuIGNsYXNzPVwia20taWNvbiBrbS1tb3JlXCI+PC9zcGFuPicpLG49bChuKSk6dC5vdmVyZmxvd0FuY2hvci5hcHBlbmQoJzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1tb3JlXCI+PC9zcGFuPicpLHQucG9wdXA9bmV3IGMudWkuUG9wdXAobix7b3JpZ2luOlwiYm90dG9tIHJpZ2h0XCIscG9zaXRpb246XCJ0b3AgcmlnaHRcIixhbmNob3I6dC5vdmVyZmxvd0FuY2hvcixhbmltYXRpb246dC5hbmltYXRpb24sYXBwZW5kVG86dC5pc01vYmlsZT9lKHQuaXNNb2JpbGUpLmNoaWxkcmVuKFwiLmttLXBhbmVcIik6bnVsbCxjb3B5QW5jaG9yU3R5bGVzOiExLG9wZW46ZnVuY3Rpb24obil7dmFyIGk9Yy53cmFwKHQucG9wdXAuZWxlbWVudCkuYWRkQ2xhc3MoXCJrLW92ZXJmbG93LXdyYXBwZXJcIik7dC5pc01vYmlsZT90LnBvcHVwLmNvbnRhaW5lci5jc3MoXCJtYXgtaGVpZ2h0XCIscGFyc2VGbG9hdChlKFwiLmttLWNvbnRlbnQ6dmlzaWJsZVwiKS5pbm5lckhlaWdodCgpKS0xNStcInB4XCIpOmkuY3NzKFwibWFyZ2luLWxlZnRcIiwoaS5vdXRlcldpZHRoKCktaS53aWR0aCgpKS8yKzEpLHQudHJpZ2dlcihWKSYmbi5wcmV2ZW50RGVmYXVsdCgpfSxjbG9zZTpmdW5jdGlvbihlKXt0LnRyaWdnZXIoVSkmJmUucHJldmVudERlZmF1bHQoKX19KSx0LnBvcHVwLmNvbnRhaW5lcj10LmlzTW9iaWxlP3QucG9wdXAuZWxlbWVudC5maW5kKFwiLlwiK0YpOnQucG9wdXAuZWxlbWVudCx0LnBvcHVwLmNvbnRhaW5lci5hdHRyKCQsdGhpcy51aWQpfSxfdG9nZ2xlT3ZlcmZsb3dBbmNob3I6ZnVuY3Rpb24oKXt0aGlzLm92ZXJmbG93QW5jaG9yLmNzcyh0aGlzLnBvcHVwLmVsZW1lbnQuY2hpbGRyZW4oXCI6bm90KC5cIitxK1wiLCAuXCIrdytcIilcIikubGVuZ3RoPjA/e3Zpc2liaWxpdHk6XCJ2aXNpYmxlXCIsd2lkdGg6XCJcIn06e3Zpc2liaWxpdHk6XCJoaWRkZW5cIix3aWR0aDpcIjFweFwifSl9LF9idXR0b25DbGljazpmdW5jdGlvbihuKXt2YXIgaSxyLG8sYSxzLGwsYyxkLHUscD10aGlzO2lmKG4ucHJldmVudERlZmF1bHQoKSxyPWUobi50YXJnZXQpLmNsb3Nlc3QoXCIuXCIrZixwLmVsZW1lbnQpLCFyLmhhc0NsYXNzKHopJiYoIXIubGVuZ3RoJiZwLnBvcHVwJiYocj1lKG4udGFyZ2V0KS5jbG9zZXN0KFwiLlwiK2cscC5wb3B1cC5jb250YWluZXIpKSxhPXIuaGFzQ2xhc3MoZyk/ci5wYXJlbnQoXCJsaVwiKS5oYXNDbGFzcyh4KTpyLmhhc0NsYXNzKHgpLCFhKSl7aWYobi50YXJnZXQuY2xvc2VzdChcIi5cIitJKS5sZW5ndGgpcmV0dXJuIHAuX3RvZ2dsZShuKSx0O3U9ci5hdHRyKFwiaWRcIik/ci5hdHRyKFwiaWRcIikucmVwbGFjZSgvKF9vdmVyZmxvdyQpLyxcIlwiKTp0LHIuaGFzQ2xhc3MobSk/KGw9ci5kYXRhKFwiZ3JvdXBcIiksYz1oKHIuZGF0YShcInRvZ2dsZVwiKSk/ci5kYXRhKFwidG9nZ2xlXCIpOm51bGwscC50b2dnbGUocikscz1yLmhhc0NsYXNzKGspLGQ9e3RhcmdldDpyLGdyb3VwOmwsY2hlY2tlZDpzLGlkOnV9LGMmJmMuY2FsbChwLGQpLHAudHJpZ2dlcihPLGQpKTooYz1oKHIuZGF0YShcImNsaWNrXCIpKT9yLmRhdGEoXCJjbGlja1wiKTpudWxsLGQ9e3RhcmdldDpyLGlkOnV9LGMmJmMuY2FsbChwLGQpLHAudHJpZ2dlcihMLGQpKSxyLmhhc0NsYXNzKGcpJiZwLnBvcHVwLmNsb3NlKCksbz1yLmNsb3Nlc3QoXCIuay1zcGxpdC1jb250YWluZXJcIiksb1swXSYmKGk9by5kYXRhKFwia2VuZG9Qb3B1cFwiKSwoaT9pOm8ucGFyZW50cyhcIi5rbS1wb3B1cC13cmFwcGVyXCIpLmRhdGEoXCJrZW5kb1BvcHVwXCIpKS5jbG9zZSgpKX19LF90b2dnbGU6ZnVuY3Rpb24odCl7dmFyIG4saT1lKHQudGFyZ2V0KS5jbG9zZXN0KFwiLlwiK18pLHI9aS5kYXRhKFwia2VuZG9Qb3B1cFwiKTt0LnByZXZlbnREZWZhdWx0KCksaS5oYXNDbGFzcyh4KXx8KG49ci5lbGVtZW50LmlzKFwiOnZpc2libGVcIik/dGhpcy50cmlnZ2VyKE4se3RhcmdldDppfSk6dGhpcy50cmlnZ2VyKEgse3RhcmdldDppfSksbnx8ci50b2dnbGUoKSl9LF90b2dnbGVPdmVyZmxvdzpmdW5jdGlvbigpe3RoaXMucG9wdXAudG9nZ2xlKCl9LF9yZXNpemU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS53aWR0aDt0aGlzLm9wdGlvbnMucmVzaXphYmxlJiYodGhpcy5wb3B1cC5jbG9zZSgpLHRoaXMuX3Nocmluayh0KSx0aGlzLl9zdHJldGNoKHQpLHRoaXMuX21hcmtWaXNpYmxlcygpLHRoaXMuX3RvZ2dsZU92ZXJmbG93QW5jaG9yKCkpfSxfY2hpbGRyZW5XaWR0aDpmdW5jdGlvbigpe3ZhciB0PTA7cmV0dXJuIHRoaXMuZWxlbWVudC5jaGlsZHJlbihcIjp2aXNpYmxlXCIpLmVhY2goZnVuY3Rpb24oKXt0Kz1lKHRoaXMpLm91dGVyV2lkdGgoITApfSksTWF0aC5jZWlsKHQpfSxfc2hyaW5rOmZ1bmN0aW9uKGUpe3ZhciB0LG4saTtpZihlPHRoaXMuX2NoaWxkcmVuV2lkdGgoKSlmb3Iobj10aGlzLmVsZW1lbnQuY2hpbGRyZW4oXCI6dmlzaWJsZTpub3QoW2RhdGEtb3ZlcmZsb3c9J25ldmVyJ10sIC5cIit6K1wiKVwiKSxpPW4ubGVuZ3RoLTE7aT49MCYmKHQ9bi5lcShpKSwhKGU+dGhpcy5fY2hpbGRyZW5XaWR0aCgpKSk7aS0tKXRoaXMuX2hpZGVJdGVtKHQpfSxfc3RyZXRjaDpmdW5jdGlvbihlKXt2YXIgdCxuLGk7aWYoZT50aGlzLl9jaGlsZHJlbldpZHRoKCkpZm9yKG49dGhpcy5lbGVtZW50LmNoaWxkcmVuKFwiOmhpZGRlblwiKSxpPTA7bi5sZW5ndGg+aSYmKHQ9bi5lcShpKSwhKGU8dGhpcy5fY2hpbGRyZW5XaWR0aCgpKSYmdGhpcy5fc2hvd0l0ZW0odCxlKSk7aSsrKTt9LF9oaWRlSXRlbTpmdW5jdGlvbihlKXtlLmhpZGUoKSx0aGlzLnBvcHVwJiZ0aGlzLnBvcHVwLmNvbnRhaW5lci5maW5kKFwiPmxpW2RhdGEtdWlkPSdcIitlLmRhdGEoXCJ1aWRcIikrXCInXVwiKS5yZW1vdmVDbGFzcyhxKX0sX3Nob3dJdGVtOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubGVuZ3RoJiZ0PnRoaXMuX2NoaWxkcmVuV2lkdGgoKStlLm91dGVyV2lkdGgoITApPyhlLnNob3coKSx0aGlzLnBvcHVwJiZ0aGlzLnBvcHVwLmNvbnRhaW5lci5maW5kKFwiPmxpW2RhdGEtdWlkPSdcIitlLmRhdGEoXCJ1aWRcIikrXCInXVwiKS5hZGRDbGFzcyhxKSwhMCk6ITF9LF9tYXJrVmlzaWJsZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnBvcHVwLmNvbnRhaW5lci5jaGlsZHJlbigpLHQ9dGhpcy5lbGVtZW50LmNoaWxkcmVuKFwiOm5vdCguay1vdmVyZmxvdy1hbmNob3IpXCIpLG49ZS5maWx0ZXIoXCI6bm90KC5rLW92ZXJmbG93LWhpZGRlbilcIiksaT10LmZpbHRlcihcIjp2aXNpYmxlXCIpO2UuYWRkKHQpLnJlbW92ZUNsYXNzKFIrXCIgXCIrQiksbi5maXJzdCgpLmFkZChpLmZpcnN0KCkpLmFkZENsYXNzKFIpLG4ubGFzdCgpLmFkZChpLmxhc3QoKSkuYWRkQ2xhc3MoQil9fSk7Yy51aS5wbHVnaW4oSyl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXt2YXIgdD1uZXcgRGF0ZSgyMTAwLDAsMSk7cmV0dXJuIHQuc2V0TWludXRlcygtZSksdH1mdW5jdGlvbiBpKGUpe2UucHJldmVudERlZmF1bHQoKX1mdW5jdGlvbiByKHQpe3ZhciBuLGk9by5nZXRDdWx0dXJlKHQuY3VsdHVyZSkuY2FsZW5kYXJzLnN0YW5kYXJkLnBhdHRlcm5zO3QuZm9ybWF0PWModC5mb3JtYXR8fGkuZyksdC50aW1lRm9ybWF0PW49Yyh0LnRpbWVGb3JtYXR8fGkudCksby5EYXRlVmlldy5ub3JtYWxpemUodCksLTE9PT1lLmluQXJyYXkobix0LnBhcnNlRm9ybWF0cykmJnQucGFyc2VGb3JtYXRzLnNwbGljZSgxLDAsbil9dmFyIG89d2luZG93LmtlbmRvLGE9by5UaW1lVmlldyxzPW8ucGFyc2VEYXRlLGw9by5fYWN0aXZlRWxlbWVudCxjPW8uX2V4dHJhY3RGb3JtYXQsZD1vLmNhbGVuZGFyLHU9ZC5pc0luUmFuZ2UsaD1kLnJlc3RyaWN0VmFsdWUscD1kLmlzRXF1YWxEYXRlUGFydCxmPWEuZ2V0TWlsbGlzZWNvbmRzLGc9by51aSxtPWcuV2lkZ2V0LHY9XCJvcGVuXCIsXz1cImNsb3NlXCIseT1cImNoYW5nZVwiLHc9XCIua2VuZG9EYXRlVGltZVBpY2tlclwiLGI9XCJjbGlja1wiK3csaz1cImRpc2FibGVkXCIseD1cInJlYWRvbmx5XCIsQz1cImstc3RhdGUtZGVmYXVsdFwiLFM9XCJrLXN0YXRlLWZvY3VzZWRcIixUPVwiay1zdGF0ZS1ob3ZlclwiLEQ9XCJrLXN0YXRlLWRpc2FibGVkXCIsQT1cIm1vdXNlZW50ZXJcIit3K1wiIG1vdXNlbGVhdmVcIit3LEU9XCJtb3VzZWRvd25cIit3LE09XCJtb250aFwiLFA9XCI8c3Bhbi8+XCIsST1cImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLHo9XCJhcmlhLWV4cGFuZGVkXCIsRj1cImFyaWEtaGlkZGVuXCIsUj1cImFyaWEtb3duc1wiLEI9XCJhcmlhLWRpc2FibGVkXCIsTD1cImFyaWEtcmVhZG9ubHlcIixPPURhdGUsSD1uZXcgTygxOTAwLDAsMSksTj1uZXcgTygyMDk5LDExLDMxKSxWPXt2aWV3OlwiZGF0ZVwifSxVPXt2aWV3OlwidGltZVwifSxXPWUuZXh0ZW5kLGo9bS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXM7bS5mbi5pbml0LmNhbGwoaSxlLHQpLGU9aS5lbGVtZW50LHQ9aS5vcHRpb25zLHQubWluPXMoZS5hdHRyKFwibWluXCIpKXx8cyh0Lm1pbiksdC5tYXg9cyhlLmF0dHIoXCJtYXhcIikpfHxzKHQubWF4KSxyKHQpLGkuX3dyYXBwZXIoKSxpLl92aWV3cygpLGkuX2ljb25zKCksaS5fcmVzZXQoKSxpLl90ZW1wbGF0ZSgpO3RyeXtlWzBdLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInRleHRcIil9Y2F0Y2goYSl7ZVswXS50eXBlPVwidGV4dFwifWUuYWRkQ2xhc3MoXCJrLWlucHV0XCIpLmF0dHIoe3JvbGU6XCJjb21ib2JveFwiLFwiYXJpYS1leHBhbmRlZFwiOiExfSksaS5fbWlkbmlnaHQ9Zih0Lm1pbikrZih0Lm1heCk9PT0wLG49ZS5pcyhcIltkaXNhYmxlZF1cIiksbj9pLmVuYWJsZSghMSk6aS5yZWFkb25seShlLmlzKFwiW3JlYWRvbmx5XVwiKSksaS5fb2xkPWkuX3VwZGF0ZSh0LnZhbHVlfHxpLmVsZW1lbnQudmFsKCkpLGkuX29sZFRleHQ9ZS52YWwoKSxvLm5vdGlmeShpKX0sb3B0aW9uczp7bmFtZTpcIkRhdGVUaW1lUGlja2VyXCIsdmFsdWU6bnVsbCxmb3JtYXQ6XCJcIix0aW1lRm9ybWF0OlwiXCIsY3VsdHVyZTpcIlwiLHBhcnNlRm9ybWF0czpbXSxkYXRlczpbXSxtaW46bmV3IE8oSCksbWF4Om5ldyBPKE4pLGludGVydmFsOjMwLGhlaWdodDoyMDAsZm9vdGVyOlwiXCIsc3RhcnQ6TSxkZXB0aDpNLGFuaW1hdGlvbjp7fSxtb250aDp7fSxBUklBVGVtcGxhdGU6J0N1cnJlbnQgZm9jdXNlZCBkYXRlIGlzICM9a2VuZG8udG9TdHJpbmcoZGF0YS5jdXJyZW50LCBcImRcIikjJ30sZXZlbnRzOlt2LF8seV0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgdCxuLGksYT10aGlzLGw9YS5fdmFsdWU7bS5mbi5zZXRPcHRpb25zLmNhbGwoYSxlKSxlPWEub3B0aW9ucyxlLm1pbj10PXMoZS5taW4pLGUubWF4PW49cyhlLm1heCkscihlKSxpPWUudmFsdWV8fGEuX3ZhbHVlfHxhLmRhdGVWaWV3Ll9jdXJyZW50LHQmJiFwKHQsaSkmJih0PW5ldyBPKEgpKSxuJiYhcChuLGkpJiYobj1uZXcgTyhOKSksYS5kYXRlVmlldy5zZXRPcHRpb25zKGUpLGEudGltZVZpZXcuc2V0T3B0aW9ucyhXKHt9LGUse2Zvcm1hdDplLnRpbWVGb3JtYXQsbWluOnQsbWF4Om59KSksbCYmKGEuZWxlbWVudC52YWwoby50b1N0cmluZyhsLGUuZm9ybWF0LGUuY3VsdHVyZSkpLGEuX3VwZGF0ZUFSSUEobCkpfSxfZWRpdGFibGU6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxyPW4uZWxlbWVudC5vZmYodyksYT1uLl9kYXRlSWNvbi5vZmYodykscz1uLl90aW1lSWNvbi5vZmYodyksYz1uLl9pbnB1dFdyYXBwZXIub2ZmKHcpLGQ9dC5yZWFkb25seSx1PXQuZGlzYWJsZTtkfHx1PyhjLmFkZENsYXNzKHU/RDpDKS5yZW1vdmVDbGFzcyh1P0M6RCksci5hdHRyKGssdSkuYXR0cih4LGQpLmF0dHIoQix1KS5hdHRyKEwsZCkpOihjLmFkZENsYXNzKEMpLnJlbW92ZUNsYXNzKEQpLm9uKEEsbi5fdG9nZ2xlSG92ZXIpLHIucmVtb3ZlQXR0cihrKS5yZW1vdmVBdHRyKHgpLmF0dHIoQiwhMSkuYXR0cihMLCExKS5vbihcImtleWRvd25cIit3LGUucHJveHkobi5fa2V5ZG93bixuKSkub24oXCJmb2N1c1wiK3csZnVuY3Rpb24oKXtuLl9pbnB1dFdyYXBwZXIuYWRkQ2xhc3MoUyl9KS5vbihcImZvY3Vzb3V0XCIrdyxmdW5jdGlvbigpe24uX2lucHV0V3JhcHBlci5yZW1vdmVDbGFzcyhTKSxyLnZhbCgpIT09bi5fb2xkVGV4dCYmbi5fY2hhbmdlKHIudmFsKCkpLG4uY2xvc2UoXCJkYXRlXCIpLG4uY2xvc2UoXCJ0aW1lXCIpfSksYS5vbihFLGkpLm9uKGIsZnVuY3Rpb24oKXtuLnRvZ2dsZShcImRhdGVcIiksby5zdXBwb3J0LnRvdWNofHxyWzBdPT09bCgpfHxyLmZvY3VzKCl9KSxzLm9uKEUsaSkub24oYixmdW5jdGlvbigpe24udG9nZ2xlKFwidGltZVwiKSxvLnN1cHBvcnQudG91Y2h8fHJbMF09PT1sKCl8fHIuZm9jdXMoKX0pKX0scmVhZG9ubHk6ZnVuY3Rpb24oZSl7dGhpcy5fZWRpdGFibGUoe3JlYWRvbmx5OmU9PT10PyEwOmUsZGlzYWJsZTohMX0pfSxlbmFibGU6ZnVuY3Rpb24oZSl7dGhpcy5fZWRpdGFibGUoe3JlYWRvbmx5OiExLGRpc2FibGU6IShlPWU9PT10PyEwOmUpfSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO20uZm4uZGVzdHJveS5jYWxsKGUpLGUuZGF0ZVZpZXcuZGVzdHJveSgpLGUudGltZVZpZXcuZGVzdHJveSgpLGUuZWxlbWVudC5vZmYodyksZS5fZGF0ZUljb24ub2ZmKHcpLGUuX3RpbWVJY29uLm9mZih3KSxlLl9pbnB1dFdyYXBwZXIub2ZmKHcpLGUuX2Zvcm0mJmUuX2Zvcm0ub2ZmKFwicmVzZXRcIixlLl9yZXNldEhhbmRsZXIpfSxjbG9zZTpmdW5jdGlvbihlKXtcInRpbWVcIiE9PWUmJihlPVwiZGF0ZVwiKSx0aGlzW2UrXCJWaWV3XCJdLmNsb3NlKCl9LG9wZW46ZnVuY3Rpb24oZSl7XCJ0aW1lXCIhPT1lJiYoZT1cImRhdGVcIiksdGhpc1tlK1wiVmlld1wiXS5vcGVuKCl9LG1pbjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb3B0aW9uKFwibWluXCIsZSl9LG1heDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb3B0aW9uKFwibWF4XCIsZSl9LHRvZ2dsZTpmdW5jdGlvbihlKXt2YXIgdD1cInRpbWVWaWV3XCI7XCJ0aW1lXCIhPT1lP2U9XCJkYXRlXCI6dD1cImRhdGVWaWV3XCIsdGhpc1tlK1wiVmlld1wiXS50b2dnbGUoKSx0aGlzW3RdLmNsb3NlKCl9LHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGU9PT10P24uX3ZhbHVlOihuLl9vbGQ9bi5fdXBkYXRlKGUpLG51bGw9PT1uLl9vbGQmJm4uZWxlbWVudC52YWwoXCJcIiksbi5fb2xkVGV4dD1uLmVsZW1lbnQudmFsKCksdCl9LF9jaGFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlPXQuX3VwZGF0ZShlKSwrdC5fb2xkIT0rZSYmKHQuX29sZD1lLHQuX29sZFRleHQ9dC5lbGVtZW50LnZhbCgpLHQudHJpZ2dlcih5KSx0LmVsZW1lbnQudHJpZ2dlcih5KSl9LF9vcHRpb246ZnVuY3Rpb24oZSxpKXt2YXIgcixvLGE9dGhpcyxsPWEub3B0aW9ucyxjPWEudGltZVZpZXcsZD1jLm9wdGlvbnMsdT1hLl92YWx1ZXx8YS5fb2xkO2lmKGk9PT10KXJldHVybiBsW2VdO2lmKGk9cyhpLGwucGFyc2VGb3JtYXRzLGwuY3VsdHVyZSkpe2lmKGwubWluLmdldFRpbWUoKT09PWwubWF4LmdldFRpbWUoKSYmKGQuZGF0ZXM9W10pLGxbZV09bmV3IE8oaS5nZXRUaW1lKCkpLGEuZGF0ZVZpZXdbZV0oaSksYS5fbWlkbmlnaHQ9ZihsLm1pbikrZihsLm1heCk9PT0wLHUmJihyPXAobC5taW4sdSksbz1wKGwubWF4LHUpKSxyfHxvKXtpZihkW2VdPWksciYmIW8mJihkLm1heD1uKGwuaW50ZXJ2YWwpKSxvKXtpZihhLl9taWRuaWdodClyZXR1cm4gYy5kYXRhQmluZChbTl0pLHQ7cnx8KGQubWluPUgpfX1lbHNlIGQubWF4PU4sZC5taW49SDtjLmJpbmQoKX19LF90b2dnbGVIb3ZlcjpmdW5jdGlvbih0KXtlKHQuY3VycmVudFRhcmdldCkudG9nZ2xlQ2xhc3MoVCxcIm1vdXNlZW50ZXJcIj09PXQudHlwZSl9LF91cGRhdGU6ZnVuY3Rpb24odCl7dmFyIGkscixhLGwsYyxkPXRoaXMsZj1kLm9wdGlvbnMsZz1mLm1pbixtPWYubWF4LHY9Zi5kYXRlcyxfPWQudGltZVZpZXcseT1kLl92YWx1ZSx3PXModCxmLnBhcnNlRm9ybWF0cyxmLmN1bHR1cmUpLGI9bnVsbD09PXcmJm51bGw9PT15fHx3IGluc3RhbmNlb2YgRGF0ZSYmeSBpbnN0YW5jZW9mIERhdGU7cmV0dXJuK3c9PT0reSYmYj8oYz1vLnRvU3RyaW5nKHcsZi5mb3JtYXQsZi5jdWx0dXJlKSxjIT09dCYmZC5lbGVtZW50LnZhbChudWxsPT09dz90OmMpLHcpOihudWxsIT09dyYmcCh3LGcpP3c9aCh3LGcsbSk6dSh3LGcsbSl8fCh3PW51bGwpLGQuX3ZhbHVlPXcsXy52YWx1ZSh3KSxkLmRhdGVWaWV3LnZhbHVlKHcpLHcmJihhPWQuX29sZCxyPV8ub3B0aW9ucyx2WzBdJiYodj1lLmdyZXAodixmdW5jdGlvbihlKXtyZXR1cm4gcCh3LGUpfSksdlswXSYmKF8uZGF0YUJpbmQodiksbD0hMCkpLGx8fChwKHcsZykmJihyLm1pbj1nLHIubWF4PW4oZi5pbnRlcnZhbCksaT0hMCkscCh3LG0pJiYoZC5fbWlkbmlnaHQ/KF8uZGF0YUJpbmQoW05dKSxsPSEwKTooci5tYXg9bSxpfHwoci5taW49SCksaT0hMCkpKSwhbCYmKCFhJiZpfHxhJiYhcChhLHcpKSYmKGl8fChyLm1heD1OLHIubWluPUgpLF8uYmluZCgpKSksZC5lbGVtZW50LnZhbCh3P28udG9TdHJpbmcodyxmLmZvcm1hdCxmLmN1bHR1cmUpOnQpLGQuX3VwZGF0ZUFSSUEodyksdyl9LF9rZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LmRhdGVWaWV3LGk9dC50aW1lVmlldyxyPXQuZWxlbWVudC52YWwoKSxhPW4ucG9wdXAudmlzaWJsZSgpO2UuYWx0S2V5JiZlLmtleUNvZGU9PT1vLmtleXMuRE9XTj90LnRvZ2dsZShhP1widGltZVwiOlwiZGF0ZVwiKTphPyhuLm1vdmUoZSksdC5fdXBkYXRlQVJJQShuLl9jdXJyZW50KSk6aS5wb3B1cC52aXNpYmxlKCk/aS5tb3ZlKGUpOmUua2V5Q29kZT09PW8ua2V5cy5FTlRFUiYmciE9PXQuX29sZFRleHQmJnQuX2NoYW5nZShyKX0sX3ZpZXdzOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixsLGM9dGhpcyxkPWMuZWxlbWVudCxoPWMub3B0aW9ucyxwPWQuYXR0cihcImlkXCIpO2MuZGF0ZVZpZXc9ZT1uZXcgby5EYXRlVmlldyhXKHt9LGgse2lkOnAsYW5jaG9yOmMud3JhcHBlcixjaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgdCxuPWUuY2FsZW5kYXIudmFsdWUoKSxpPStuLHI9K2gubWluLG89K2gubWF4OyhpPT09cnx8aT09PW8pJiYodD1uZXcgTygrYy5fdmFsdWUpLHQuc2V0RnVsbFllYXIobi5nZXRGdWxsWWVhcigpLG4uZ2V0TW9udGgoKSxuLmdldERhdGUoKSksdSh0LHIsbykmJihuPXQpKSxjLl9jaGFuZ2UobiksYy5jbG9zZShcImRhdGVcIil9LGNsb3NlOmZ1bmN0aW9uKGUpe2MudHJpZ2dlcihfLFYpP2UucHJldmVudERlZmF1bHQoKTooZC5hdHRyKHosITEpLG4uYXR0cihGLCEwKSx0LnBvcHVwLnZpc2libGUoKXx8ZC5yZW1vdmVBdHRyKFIpKX0sb3BlbjpmdW5jdGlvbih0KXtjLnRyaWdnZXIodixWKT90LnByZXZlbnREZWZhdWx0KCk6KGMuZWxlbWVudC52YWwoKSE9PWMuX29sZFRleHQmJihsPXMoZC52YWwoKSxoLnBhcnNlRm9ybWF0cyxoLmN1bHR1cmUpLGMuZGF0ZVZpZXdbbD9cImN1cnJlbnRcIjpcInZhbHVlXCJdKGwpKSxuLmF0dHIoRiwhMSksZC5hdHRyKHosITApLmF0dHIoUixlLl9kYXRlVmlld0lEKSxjLl91cGRhdGVBUklBKGwpKX19KSksbj1lLmRpdixyPWgubWluLmdldFRpbWUoKSxjLnRpbWVWaWV3PXQ9bmV3IGEoe2lkOnAsdmFsdWU6aC52YWx1ZSxhbmNob3I6Yy53cmFwcGVyLGFuaW1hdGlvbjpoLmFuaW1hdGlvbixmb3JtYXQ6aC50aW1lRm9ybWF0LGN1bHR1cmU6aC5jdWx0dXJlLGhlaWdodDpoLmhlaWdodCxpbnRlcnZhbDpoLmludGVydmFsLG1pbjpuZXcgTyhIKSxtYXg6bmV3IE8oTiksZGF0ZXM6cj09PWgubWF4LmdldFRpbWUoKT9bbmV3IERhdGUocildOltdLHBhcnNlRm9ybWF0czpoLnBhcnNlRm9ybWF0cyxjaGFuZ2U6ZnVuY3Rpb24obixpKXtuPXQuX3BhcnNlKG4pLGgubWluPm4/KG49bmV3IE8oK2gubWluKSx0Lm9wdGlvbnMubWluPW4pOm4+aC5tYXgmJihuPW5ldyBPKCtoLm1heCksdC5vcHRpb25zLm1heD1uKSxpPyhjLl90aW1lU2VsZWN0ZWQ9ITAsYy5fY2hhbmdlKG4pKTooZC52YWwoby50b1N0cmluZyhuLGguZm9ybWF0LGguY3VsdHVyZSkpLGUudmFsdWUobiksYy5fdXBkYXRlQVJJQShuKSl9LGNsb3NlOmZ1bmN0aW9uKHQpe2MudHJpZ2dlcihfLFUpP3QucHJldmVudERlZmF1bHQoKTooaS5hdHRyKEYsITApLGQuYXR0cih6LCExKSxlLnBvcHVwLnZpc2libGUoKXx8ZC5yZW1vdmVBdHRyKFIpKX0sb3BlbjpmdW5jdGlvbihlKXt0Ll9hZGp1c3RMaXN0V2lkdGgoKSxjLnRyaWdnZXIodixVKT9lLnByZXZlbnREZWZhdWx0KCk6KGkuYXR0cihGLCExKSxkLmF0dHIoeiwhMCkuYXR0cihSLHQuX3RpbWVWaWV3SUQpLHQub3B0aW9ucy5hY3RpdmUodC5jdXJyZW50KCkpKX0sYWN0aXZlOmZ1bmN0aW9uKGUpe2QucmVtb3ZlQXR0cihJKSxlJiZkLmF0dHIoSSx0Ll9vcHRpb25JRCl9fSksaT10LnVsfSxfaWNvbnM6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLmVsZW1lbnQ7dD1pLm5leHQoXCJzcGFuLmstc2VsZWN0XCIpLHRbMF18fCh0PWUoJzxzcGFuIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLXNlbGVjdFwiPjxzcGFuIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLWljb24gay1pLWNhbGVuZGFyXCI+c2VsZWN0PC9zcGFuPjxzcGFuIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLWljb24gay1pLWNsb2NrXCI+c2VsZWN0PC9zcGFuPjwvc3Bhbj4nKS5pbnNlcnRBZnRlcihpKSksdD10LmNoaWxkcmVuKCksbi5fZGF0ZUljb249dC5lcSgwKS5hdHRyKHtyb2xlOlwiYnV0dG9uXCIsXCJhcmlhLWNvbnRyb2xzXCI6bi5kYXRlVmlldy5fZGF0ZVZpZXdJRH0pLG4uX3RpbWVJY29uPXQuZXEoMSkuYXR0cih7cm9sZTpcImJ1dHRvblwiLFwiYXJpYS1jb250cm9sc1wiOm4udGltZVZpZXcuX3RpbWVWaWV3SUR9KX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLmVsZW1lbnQ7dD1pLnBhcmVudHMoXCIuay1kYXRldGltZXBpY2tlclwiKSx0WzBdfHwodD1pLndyYXAoUCkucGFyZW50KCkuYWRkQ2xhc3MoXCJrLXBpY2tlci13cmFwIGstc3RhdGUtZGVmYXVsdFwiKSx0PXQud3JhcChQKS5wYXJlbnQoKSksdFswXS5zdHlsZS5jc3NUZXh0PWlbMF0uc3R5bGUuY3NzVGV4dCxpLmNzcyh7d2lkdGg6XCIxMDAlXCIsaGVpZ2h0OmlbMF0uc3R5bGUuaGVpZ2h0fSksbi53cmFwcGVyPXQuYWRkQ2xhc3MoXCJrLXdpZGdldCBrLWRhdGV0aW1lcGlja2VyIGstaGVhZGVyXCIpLmFkZENsYXNzKGlbMF0uY2xhc3NOYW1lKSxuLl9pbnB1dFdyYXBwZXI9ZSh0WzBdLmZpcnN0Q2hpbGQpfSxfcmVzZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5lbGVtZW50LGk9bi5hdHRyKFwiZm9ybVwiKSxyPWk/ZShcIiNcIitpKTpuLmNsb3Nlc3QoXCJmb3JtXCIpO3JbMF0mJih0Ll9yZXNldEhhbmRsZXI9ZnVuY3Rpb24oKXt0LnZhbHVlKG5bMF0uZGVmYXVsdFZhbHVlKX0sdC5fZm9ybT1yLm9uKFwicmVzZXRcIix0Ll9yZXNldEhhbmRsZXIpKX0sX3RlbXBsYXRlOmZ1bmN0aW9uKCl7dGhpcy5fYXJpYVRlbXBsYXRlPW8udGVtcGxhdGUodGhpcy5vcHRpb25zLkFSSUFUZW1wbGF0ZSl9LF91cGRhdGVBUklBOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxpPW4uZGF0ZVZpZXcuY2FsZW5kYXI7bi5lbGVtZW50LnJlbW92ZUF0dHIoSSksaSYmKHQ9aS5fY2VsbCx0LmF0dHIoXCJhcmlhLWxhYmVsXCIsbi5fYXJpYVRlbXBsYXRlKHtjdXJyZW50OmV8fGkuY3VycmVudCgpfSkpLG4uZWxlbWVudC5hdHRyKEksdC5hdHRyKFwiaWRcIikpKX19KTtnLnBsdWdpbihqKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUpe3JldHVybiB2LnRlc3QoZSl9ZnVuY3Rpb24gaShlKXtyZXR1cm4gbS50ZXN0KGUpfHwvXlxcZCskLy50ZXN0KGUpXG59ZnVuY3Rpb24gcihlKXtyZXR1cm4hbihlKSYmIWkoZSl9ZnVuY3Rpb24gbyhlLHQpe3ZhciBpPXBhcnNlSW50KGUsMTApO3JldHVybiBuKGUpJiYoaT1NYXRoLmZsb29yKGkqdC8xMDApKSxpfWZ1bmN0aW9uIGEoZSxuKXtyZXR1cm4gZnVuY3Rpb24oaSxyKXt2YXIgbyxhPXRoaXMuZWxlbWVudC5maW5kKGkpLmRhdGEoRSk7cmV0dXJuIDE9PWFyZ3VtZW50cy5sZW5ndGg/YVtlXTooYVtlXT1yLG4mJihvPXRoaXMuZWxlbWVudC5kYXRhKFwia2VuZG9cIit0aGlzLm9wdGlvbnMubmFtZSksby5yZXNpemUoITApKSx0KX19ZnVuY3Rpb24gcyhlKXt2YXIgdD10aGlzLG49ZS5vcmllbnRhdGlvbjt0Lm93bmVyPWUsdC5fZWxlbWVudD1lLmVsZW1lbnQsdC5vcmllbnRhdGlvbj1uLHAodCxuPT09Uz9jOmwpLHQuX3Jlc2l6YWJsZT1uZXcgZC51aS5SZXNpemFibGUoZS5lbGVtZW50LHtvcmllbnRhdGlvbjpuLGhhbmRsZTpcIi5rLXNwbGl0YmFyLWRyYWdnYWJsZS1cIituK1wiW2RhdGEtbWFya2VyPVwiK2UuX21hcmtlcitcIl1cIixoaW50OmYodC5fY3JlYXRlSGludCx0KSxzdGFydDpmKHQuX3N0YXJ0LHQpLG1heDpmKHQuX21heCx0KSxtaW46Zih0Ll9taW4sdCksaW52YWxpZENsYXNzOlwiay1yZXN0cmljdGVkLXNpemUtXCIrbixyZXNpemVlbmQ6Zih0Ll9zdG9wLHQpfSl9dmFyIGwsYyxkPXdpbmRvdy5rZW5kbyx1PWQudWksaD1kLmtleXMscD1lLmV4dGVuZCxmPWUucHJveHksZz11LldpZGdldCxtPS9eXFxkKyhcXC5cXGQrKT9weCQvaSx2PS9eXFxkKyhcXC5cXGQrKT8lJC9pLF89XCIua2VuZG9TcGxpdHRlclwiLHk9XCJleHBhbmRcIix3PVwiY29sbGFwc2VcIixiPVwiY29udGVudExvYWRcIixrPVwiZXJyb3JcIix4PVwicmVzaXplXCIsQz1cImxheW91dENoYW5nZVwiLFM9XCJob3Jpem9udGFsXCIsVD1cInZlcnRpY2FsXCIsRD1cIm1vdXNlZW50ZXJcIixBPVwiY2xpY2tcIixFPVwicGFuZVwiLE09XCJtb3VzZWxlYXZlXCIsUD1cImstc3RhdGUtZm9jdXNlZFwiLEk9XCJrLVwiK0Usej1cIi5cIitJLEY9Zy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXM7Zy5mbi5pbml0LmNhbGwoaSxlLHQpLGkud3JhcHBlcj1pLmVsZW1lbnQsbj1pLm9wdGlvbnMub3JpZW50YXRpb24udG9Mb3dlckNhc2UoKSE9VCxpLm9yaWVudGF0aW9uPW4/UzpULGkuX2RpbWVuc2lvbj1uP1wid2lkdGhcIjpcImhlaWdodFwiLGkuX2tleXM9e2RlY3JlYXNlOm4/aC5MRUZUOmguVVAsaW5jcmVhc2U6bj9oLlJJR0hUOmguRE9XTn0saS5fcmVzaXplU3RlcD0xMCxpLl9tYXJrZXI9ZC5ndWlkKCkuc3Vic3RyaW5nKDAsOCksaS5faW5pdFBhbmVzKCksaS5yZXNpemluZz1uZXcgcyhpKSxpLmVsZW1lbnQudHJpZ2dlckhhbmRsZXIoXCJpbml0XCIrXyl9LGV2ZW50czpbeSx3LGIsayx4LENdLF9hdHRhY2hFdmVudHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLm9yaWVudGF0aW9uO3QuZWxlbWVudC5jaGlsZHJlbihcIi5rLXNwbGl0YmFyLWRyYWdnYWJsZS1cIituKS5vbihcImtleWRvd25cIitfLGUucHJveHkodC5fa2V5ZG93bix0KSkub24oXCJtb3VzZWRvd25cIitfLGZ1bmN0aW9uKGUpe2UuY3VycmVudFRhcmdldC5mb2N1cygpfSkub24oXCJmb2N1c1wiK18sZnVuY3Rpb24odCl7ZSh0LmN1cnJlbnRUYXJnZXQpLmFkZENsYXNzKFApfSkub24oXCJibHVyXCIrXyxmdW5jdGlvbihuKXtlKG4uY3VycmVudFRhcmdldCkucmVtb3ZlQ2xhc3MoUCksdC5yZXNpemluZyYmdC5yZXNpemluZy5lbmQoKX0pLm9uKEQrXyxmdW5jdGlvbigpe2UodGhpcykuYWRkQ2xhc3MoXCJrLXNwbGl0YmFyLVwiK3Qub3JpZW50YXRpb24rXCItaG92ZXJcIil9KS5vbihNK18sZnVuY3Rpb24oKXtlKHRoaXMpLnJlbW92ZUNsYXNzKFwiay1zcGxpdGJhci1cIit0Lm9yaWVudGF0aW9uK1wiLWhvdmVyXCIpfSkub24oXCJtb3VzZWRvd25cIitfLGZ1bmN0aW9uKCl7dC5fcGFuZXMoKS5hcHBlbmQoXCI8ZGl2IGNsYXNzPSdrLXNwbGl0dGVyLW92ZXJsYXkgay1vdmVybGF5JyAvPlwiKX0pLm9uKFwibW91c2V1cFwiK18sZnVuY3Rpb24oKXt0Ll9wYW5lcygpLmNoaWxkcmVuKFwiLmstc3BsaXR0ZXItb3ZlcmxheVwiKS5yZW1vdmUoKX0pLmVuZCgpLmNoaWxkcmVuKFwiLmstc3BsaXRiYXJcIikub24oXCJkYmxjbGlja1wiK18sZih0Ll90b2dnbGVQYW5lLHQpKS5jaGlsZHJlbihcIi5rLWNvbGxhcHNlLW5leHQsIC5rLWNvbGxhcHNlLXByZXZcIikub24oQStfLHQuX2Fycm93Q2xpY2sodykpLmVuZCgpLmNoaWxkcmVuKFwiLmstZXhwYW5kLW5leHQsIC5rLWV4cGFuZC1wcmV2XCIpLm9uKEErXyx0Ll9hcnJvd0NsaWNrKHkpKS5lbmQoKS5lbmQoKSxlKHdpbmRvdykub24oXCJyZXNpemVcIitfK3QuX21hcmtlcixmKHQucmVzaXplLHQpKX0sX2RldGFjaEV2ZW50czpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5lbGVtZW50LmNoaWxkcmVuKFwiLmstc3BsaXRiYXItZHJhZ2dhYmxlLVwiK3Qub3JpZW50YXRpb24pLm9mZihfKS5lbmQoKS5jaGlsZHJlbihcIi5rLXNwbGl0YmFyXCIpLm9mZihcImRibGNsaWNrXCIrXykuY2hpbGRyZW4oXCIuay1jb2xsYXBzZS1uZXh0LCAuay1jb2xsYXBzZS1wcmV2LCAuay1leHBhbmQtbmV4dCwgLmstZXhwYW5kLXByZXZcIikub2ZmKF8pLGUod2luZG93KS5vZmYoXCJyZXNpemVcIitfK3QuX21hcmtlcil9LG9wdGlvbnM6e25hbWU6XCJTcGxpdHRlclwiLG9yaWVudGF0aW9uOlMscGFuZXM6W119LGRlc3Ryb3k6ZnVuY3Rpb24oKXtnLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLl9kZXRhY2hFdmVudHMoKSx0aGlzLnJlc2l6aW5nJiZ0aGlzLnJlc2l6aW5nLmRlc3Ryb3koKSxkLmRlc3Ryb3kodGhpcy5lbGVtZW50KSx0aGlzLndyYXBwZXI9dGhpcy5lbGVtZW50PW51bGx9LF9rZXlkb3duOmZ1bmN0aW9uKHQpe3ZhciBuLGk9dGhpcyxyPXQua2V5Q29kZSxvPWkucmVzaXppbmcsYT1lKHQuY3VycmVudFRhcmdldCkscz1pLl9rZXlzLGw9cj09PXMuaW5jcmVhc2UsYz1yPT09cy5kZWNyZWFzZTtsfHxjPyh0LmN0cmxLZXk/KG49YVtjP1wibmV4dFwiOlwicHJldlwiXSgpLG8mJm8uaXNSZXNpemluZygpJiZvLmVuZCgpLG5baS5fZGltZW5zaW9uXSgpP2kuX3RyaWdnZXJBY3Rpb24odyxhW2M/XCJwcmV2XCI6XCJuZXh0XCJdKCkpOmkuX3RyaWdnZXJBY3Rpb24oeSxuKSk6byYmby5tb3ZlKChjPy0xOjEpKmkuX3Jlc2l6ZVN0ZXAsYSksdC5wcmV2ZW50RGVmYXVsdCgpKTpyPT09aC5FTlRFUiYmbyYmKG8uZW5kKCksdC5wcmV2ZW50RGVmYXVsdCgpKX0sX2luaXRQYW5lczpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5wYW5lc3x8W10sdD10aGlzO3RoaXMuZWxlbWVudC5hZGRDbGFzcyhcImstd2lkZ2V0XCIpLmFkZENsYXNzKFwiay1zcGxpdHRlclwiKS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24obixpKXtcInNjcmlwdFwiIT1pLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJnQuX2luaXRQYW5lKGksZVtuXSl9KSx0aGlzLnJlc2l6ZSgpfSxfaW5pdFBhbmU6ZnVuY3Rpb24odCxuKXt0PWUodCkuYXR0cihcInJvbGVcIixcImdyb3VwXCIpLmFkZENsYXNzKEkpLHQuZGF0YShFLG4/bjp7fSkudG9nZ2xlQ2xhc3MoXCJrLXNjcm9sbGFibGVcIixuP24uc2Nyb2xsYWJsZSE9PSExOiEwKSx0aGlzLmFqYXhSZXF1ZXN0KHQpfSxhamF4UmVxdWVzdDpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzO2U9ci5lbGVtZW50LmZpbmQoZSksaT1lLmRhdGEoRSksdD10fHxpLmNvbnRlbnRVcmwsdCYmKGUuYXBwZW5kKFwiPHNwYW4gY2xhc3M9J2staWNvbiBrLWxvYWRpbmcgay1wYW5lLWxvYWRpbmcnIC8+XCIpLGQuaXNMb2NhbFVybCh0KT9qUXVlcnkuYWpheCh7dXJsOnQsZGF0YTpufHx7fSx0eXBlOlwiR0VUXCIsZGF0YVR5cGU6XCJodG1sXCIsc3VjY2VzczpmdW5jdGlvbih0KXtyLmFuZ3VsYXIoXCJjbGVhbnVwXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6ZS5nZXQoKX19KSxlLmh0bWwodCksci5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmUuZ2V0KCl9fSksci50cmlnZ2VyKGIse3BhbmU6ZVswXX0pfSxlcnJvcjpmdW5jdGlvbih0LG4pe3IudHJpZ2dlcihrLHtwYW5lOmVbMF0sc3RhdHVzOm4seGhyOnR9KX19KTplLnJlbW92ZUNsYXNzKFwiay1zY3JvbGxhYmxlXCIpLmh0bWwoXCI8aWZyYW1lIHNyYz0nXCIrdCtcIicgZnJhbWVib3JkZXI9JzAnIGNsYXNzPSdrLWNvbnRlbnQtZnJhbWUnPlRoaXMgcGFnZSByZXF1aXJlcyBmcmFtZXMgaW4gb3JkZXIgdG8gc2hvdyBjb250ZW50PC9pZnJhbWU+XCIpKX0sX3RyaWdnZXJBY3Rpb246ZnVuY3Rpb24oZSx0KXt0aGlzLnRyaWdnZXIoZSx7cGFuZTp0WzBdfSl8fHRoaXNbZV0odFswXSl9LF90b2dnbGVQYW5lOmZ1bmN0aW9uKHQpe3ZhciBuLGk9dGhpcyxyPWUodC50YXJnZXQpO3IuY2xvc2VzdChcIi5rLXNwbGl0dGVyXCIpWzBdPT1pLmVsZW1lbnRbMF0mJihuPXIuY2hpbGRyZW4oXCIuay1pY29uOm5vdCguay1yZXNpemUtaGFuZGxlKVwiKSwxPT09bi5sZW5ndGgmJihuLmlzKFwiLmstY29sbGFwc2UtcHJldlwiKT9pLl90cmlnZ2VyQWN0aW9uKHcsci5wcmV2KCkpOm4uaXMoXCIuay1jb2xsYXBzZS1uZXh0XCIpP2kuX3RyaWdnZXJBY3Rpb24odyxyLm5leHQoKSk6bi5pcyhcIi5rLWV4cGFuZC1wcmV2XCIpP2kuX3RyaWdnZXJBY3Rpb24oeSxyLnByZXYoKSk6bi5pcyhcIi5rLWV4cGFuZC1uZXh0XCIpJiZpLl90cmlnZ2VyQWN0aW9uKHksci5uZXh0KCkpKSl9LF9hcnJvd0NsaWNrOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKGkpe3ZhciByLG89ZShpLnRhcmdldCk7by5jbG9zZXN0KFwiLmstc3BsaXR0ZXJcIilbMF09PW4uZWxlbWVudFswXSYmKHI9by5pcyhcIi5rLVwiK3QrXCItcHJldlwiKT9vLnBhcmVudCgpLnByZXYoKTpvLnBhcmVudCgpLm5leHQoKSxuLl90cmlnZ2VyQWN0aW9uKHQscikpfX0sX3VwZGF0ZVNwbGl0QmFyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1mdW5jdGlvbihlLHQpe3JldHVybiB0P1wiPGRpdiBjbGFzcz0nay1pY29uIFwiK2UrXCInIC8+XCI6XCJcIn0scj10aGlzLm9yaWVudGF0aW9uLG89dC5yZXNpemFibGUhPT0hMSYmbi5yZXNpemFibGUhPT0hMSxhPXQuY29sbGFwc2libGUscz10LmNvbGxhcHNlZCxsPW4uY29sbGFwc2libGUsYz1uLmNvbGxhcHNlZDtlLmFkZENsYXNzKFwiay1zcGxpdGJhciBrLXN0YXRlLWRlZmF1bHQgay1zcGxpdGJhci1cIityKS5hdHRyKFwicm9sZVwiLFwic2VwYXJhdG9yXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsIShzfHxjKSkucmVtb3ZlQ2xhc3MoXCJrLXNwbGl0YmFyLVwiK3IrXCItaG92ZXJcIikudG9nZ2xlQ2xhc3MoXCJrLXNwbGl0YmFyLWRyYWdnYWJsZS1cIityLG8mJiFzJiYhYykudG9nZ2xlQ2xhc3MoXCJrLXNwbGl0YmFyLXN0YXRpYy1cIityLCFvJiYhYSYmIWwpLmh0bWwoaShcImstY29sbGFwc2UtcHJldlwiLGEmJiFzJiYhYykraShcImstZXhwYW5kLXByZXZcIixhJiZzJiYhYykraShcImstcmVzaXplLWhhbmRsZVwiLG8pK2koXCJrLWNvbGxhcHNlLW5leHRcIixsJiYhYyYmIXMpK2koXCJrLWV4cGFuZC1uZXh0XCIsbCYmYyYmIXMpKSxvfHxhfHxsfHxlLnJlbW92ZUF0dHIoXCJ0YWJpbmRleFwiKX0sX3VwZGF0ZVNwbGl0QmFyczpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5lbGVtZW50LmNoaWxkcmVuKFwiLmstc3BsaXRiYXJcIikuZWFjaChmdW5jdGlvbigpe3ZhciBuPWUodGhpcyksaT1uLnByZXZBbGwoeikuZmlyc3QoKS5kYXRhKEUpLHI9bi5uZXh0QWxsKHopLmZpcnN0KCkuZGF0YShFKTtyJiZ0Ll91cGRhdGVTcGxpdEJhcihuLGkscil9KX0sX3JlbW92ZVNwbGl0QmFyczpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5jaGlsZHJlbihcIi5rLXNwbGl0YmFyXCIpLnJlbW92ZSgpfSxfcGFuZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50LmNoaWxkcmVuKHopfSxfcmVzaXplOmZ1bmN0aW9uKCl7dmFyIG4saSxhLHMsbCxjLHUsaCxwLGYsZz10aGlzLG09Zy5lbGVtZW50LHY9bS5jaGlsZHJlbih6KSxfPWcub3JpZW50YXRpb249PVMseT1tLmNoaWxkcmVuKFwiLmstc3BsaXRiYXJcIiksdz15Lmxlbmd0aCxiPV8/XCJ3aWR0aFwiOlwiaGVpZ2h0XCIsaz1tW2JdKCk7MD09PXc/KHc9di5sZW5ndGgtMSx2LnNsaWNlKDAsdykuYWZ0ZXIoXCI8ZGl2IHRhYmluZGV4PScwJyBjbGFzcz0nay1zcGxpdGJhcicgZGF0YS1tYXJrZXI9J1wiK2cuX21hcmtlcitcIicgLz5cIiksZy5fdXBkYXRlU3BsaXRCYXJzKCkseT1tLmNoaWxkcmVuKFwiLmstc3BsaXRiYXJcIikpOmcuX3VwZGF0ZVNwbGl0QmFycygpLHkuZWFjaChmdW5jdGlvbigpe2stPXRoaXNbXz9cIm9mZnNldFdpZHRoXCI6XCJvZmZzZXRIZWlnaHRcIl19KSxuPTAsaT0wLGE9ZSgpLHYuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOjB9KVtiXShmdW5jdGlvbigpe3ZhciBzLGw9ZSh0aGlzKSxjPWwuZGF0YShFKXx8e307aWYobC5yZW1vdmVDbGFzcyhcImstc3RhdGUtY29sbGFwc2VkXCIpLGMuY29sbGFwc2VkKXM9Yy5jb2xsYXBzZWRTaXplP28oYy5jb2xsYXBzZWRTaXplLGspOjAsbC5jc3MoXCJvdmVyZmxvd1wiLFwiaGlkZGVuXCIpLmFkZENsYXNzKFwiay1zdGF0ZS1jb2xsYXBzZWRcIik7ZWxzZXtpZihyKGMuc2l6ZSkpcmV0dXJuIGE9YS5hZGQodGhpcyksdDtzPW8oYy5zaXplLGspfXJldHVybiBpKyssbis9cyxzfSksay09bixzPWEubGVuZ3RoLGw9TWF0aC5mbG9vcihrL3MpLGEuc2xpY2UoMCxzLTEpLmNzcyhiLGwpLmVuZCgpLmVxKHMtMSkuY3NzKGIsay0ocy0xKSpsKSxjPTAsdT1fP1wiaGVpZ2h0XCI6XCJ3aWR0aFwiLGg9Xz9cImxlZnRcIjpcInRvcFwiLHA9Xz9cIm9mZnNldFdpZHRoXCI6XCJvZmZzZXRIZWlnaHRcIiwwPT09cyYmKGY9di5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4hKGUodGhpcykuZGF0YShFKXx8e30pLmNvbGxhcHNlZH0pLmxhc3QoKSxmW2JdKGsrZlswXVtwXSkpLG0uY2hpbGRyZW4oKS5jc3ModSxtW3VdKCkpLmVhY2goZnVuY3Rpb24oZSx0KXtcInNjcmlwdFwiIT10LnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmKHQuc3R5bGVbaF09TWF0aC5mbG9vcihjKStcInB4XCIsYys9dFtwXSl9KSxnLl9kZXRhY2hFdmVudHMoKSxnLl9hdHRhY2hFdmVudHMoKSxkLnJlc2l6ZSh2KSxnLnRyaWdnZXIoQyl9LHRvZ2dsZTpmdW5jdGlvbihlLG4pe3ZhciBpLHI9dGhpcztlPXIuZWxlbWVudC5maW5kKGUpLGk9ZS5kYXRhKEUpLChufHxpLmNvbGxhcHNpYmxlKSYmKDE9PWFyZ3VtZW50cy5sZW5ndGgmJihuPWkuY29sbGFwc2VkPT09dD8hMTppLmNvbGxhcHNlZCksaS5jb2xsYXBzZWQ9IW4saS5jb2xsYXBzZWQ/ZS5jc3MoXCJvdmVyZmxvd1wiLFwiaGlkZGVuXCIpOmUuY3NzKFwib3ZlcmZsb3dcIixcIlwiKSxyLnJlc2l6ZSghMCkpfSxjb2xsYXBzZTpmdW5jdGlvbihlKXt0aGlzLnRvZ2dsZShlLCExKX0sZXhwYW5kOmZ1bmN0aW9uKGUpe3RoaXMudG9nZ2xlKGUsITApfSxfYWRkUGFuZTpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcztyZXR1cm4gbi5sZW5ndGgmJihpLm9wdGlvbnMucGFuZXMuc3BsaWNlKHQsMCxlKSxpLl9pbml0UGFuZShuLGUpLGkuX3JlbW92ZVNwbGl0QmFycygpLGkucmVzaXplKCEwKSksbn0sYXBwZW5kOmZ1bmN0aW9uKHQpe3Q9dHx8e307dmFyIG49dGhpcyxpPWUoXCI8ZGl2IC8+XCIpLmFwcGVuZFRvKG4uZWxlbWVudCk7cmV0dXJuIG4uX2FkZFBhbmUodCxuLm9wdGlvbnMucGFuZXMubGVuZ3RoLGkpfSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24odCxuKXtuPWUobiksdD10fHx7fTt2YXIgaT10aGlzLHI9aS53cmFwcGVyLmNoaWxkcmVuKFwiLmstcGFuZVwiKS5pbmRleChuKSxvPWUoXCI8ZGl2IC8+XCIpLmluc2VydEJlZm9yZShlKG4pKTtyZXR1cm4gaS5fYWRkUGFuZSh0LHIsbyl9LGluc2VydEFmdGVyOmZ1bmN0aW9uKHQsbil7bj1lKG4pLHQ9dHx8e307dmFyIGk9dGhpcyxyPWkud3JhcHBlci5jaGlsZHJlbihcIi5rLXBhbmVcIikuaW5kZXgobiksbz1lKFwiPGRpdiAvPlwiKS5pbnNlcnRBZnRlcihlKG4pKTtyZXR1cm4gaS5fYWRkUGFuZSh0LHIrMSxvKX0scmVtb3ZlOmZ1bmN0aW9uKHQpe3Q9ZSh0KTt2YXIgbj10aGlzO3JldHVybiB0Lmxlbmd0aCYmKGQuZGVzdHJveSh0KSx0LmVhY2goZnVuY3Rpb24odCxpKXtuLm9wdGlvbnMucGFuZXMuc3BsaWNlKG4ud3JhcHBlci5jaGlsZHJlbihcIi5rLXBhbmVcIikuaW5kZXgoaSksMSksZShpKS5yZW1vdmUoKX0pLG4uX3JlbW92ZVNwbGl0QmFycygpLG4ub3B0aW9ucy5wYW5lcy5sZW5ndGgmJm4ucmVzaXplKCEwKSksbn0sc2l6ZTphKFwic2l6ZVwiLCEwKSxtaW46YShcIm1pblwiKSxtYXg6YShcIm1heFwiKX0pO3UucGx1Z2luKEYpLGw9e3NpemluZ1Byb3BlcnR5OlwiaGVpZ2h0XCIsc2l6aW5nRG9tUHJvcGVydHk6XCJvZmZzZXRIZWlnaHRcIixhbHRlcm5hdGVTaXppbmdQcm9wZXJ0eTpcIndpZHRoXCIscG9zaXRpb25pbmdQcm9wZXJ0eTpcInRvcFwiLG1vdXNlUG9zaXRpb25pbmdQcm9wZXJ0eTpcInBhZ2VZXCJ9LGM9e3NpemluZ1Byb3BlcnR5Olwid2lkdGhcIixzaXppbmdEb21Qcm9wZXJ0eTpcIm9mZnNldFdpZHRoXCIsYWx0ZXJuYXRlU2l6aW5nUHJvcGVydHk6XCJoZWlnaHRcIixwb3NpdGlvbmluZ1Byb3BlcnR5OlwibGVmdFwiLG1vdXNlUG9zaXRpb25pbmdQcm9wZXJ0eTpcInBhZ2VYXCJ9LHMucHJvdG90eXBlPXtwcmVzczpmdW5jdGlvbihlKXt0aGlzLl9yZXNpemFibGUucHJlc3MoZSl9LG1vdmU6ZnVuY3Rpb24oZSx0KXt0aGlzLnByZXNzZWR8fCh0aGlzLnByZXNzKHQpLHRoaXMucHJlc3NlZD0hMCksdGhpcy5fcmVzaXphYmxlLnRhcmdldHx8dGhpcy5fcmVzaXphYmxlLnByZXNzKHQpLHRoaXMuX3Jlc2l6YWJsZS5tb3ZlKGUpfSxlbmQ6ZnVuY3Rpb24oKXt0aGlzLl9yZXNpemFibGUuZW5kKCksdGhpcy5wcmVzc2VkPSExfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fcmVzaXphYmxlLmRlc3Ryb3koKSx0aGlzLl9yZXNpemFibGU9dGhpcy5fZWxlbWVudD10aGlzLm93bmVyPW51bGx9LGlzUmVzaXppbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVzaXphYmxlLnJlc2l6aW5nfSxfY3JlYXRlSGludDpmdW5jdGlvbih0KXt2YXIgbj10aGlzO3JldHVybiBlKFwiPGRpdiBjbGFzcz0nay1naG9zdC1zcGxpdGJhciBrLWdob3N0LXNwbGl0YmFyLVwiK24ub3JpZW50YXRpb24rXCIgay1zdGF0ZS1kZWZhdWx0JyAvPlwiKS5jc3Mobi5hbHRlcm5hdGVTaXppbmdQcm9wZXJ0eSx0W24uYWx0ZXJuYXRlU2l6aW5nUHJvcGVydHldKCkpfSxfc3RhcnQ6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxyPWUodC5jdXJyZW50VGFyZ2V0KSxvPXIucHJldigpLGE9ci5uZXh0KCkscz1vLmRhdGEoRSksbD1hLmRhdGEoRSksYz1wYXJzZUludChvWzBdLnN0eWxlW24ucG9zaXRpb25pbmdQcm9wZXJ0eV0sMTApLGQ9cGFyc2VJbnQoYVswXS5zdHlsZVtuLnBvc2l0aW9uaW5nUHJvcGVydHldLDEwKSthWzBdW24uc2l6aW5nRG9tUHJvcGVydHldLXJbMF1bbi5zaXppbmdEb21Qcm9wZXJ0eV0sdT1wYXJzZUludChuLl9lbGVtZW50LmNzcyhuLnNpemluZ1Byb3BlcnR5KSwxMCksaD1mdW5jdGlvbihlKXt2YXIgdD1wYXJzZUludChlLDEwKTtyZXR1cm4oaShlKT90OnUqdC8xMDApfHwwfSxwPWgocy5taW4pLGY9aChzLm1heCl8fGQtYyxnPWgobC5taW4pLG09aChsLm1heCl8fGQtYztuLnByZXZpb3VzUGFuZT1vLG4ubmV4dFBhbmU9YSxuLl9tYXhQb3NpdGlvbj1NYXRoLm1pbihkLWcsYytmKSxuLl9taW5Qb3NpdGlvbj1NYXRoLm1heChjK3AsZC1tKX0sX21heDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXhQb3NpdGlvbn0sX21pbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9taW5Qb3NpdGlvbn0sX3N0b3A6ZnVuY3Rpb24odCl7dmFyIG4saSxvLGEscyxsLGMsdSxoPXRoaXMscD1lKHQuY3VycmVudFRhcmdldCksZj1oLm93bmVyO3JldHVybiBmLl9wYW5lcygpLmNoaWxkcmVuKFwiLmstc3BsaXR0ZXItb3ZlcmxheVwiKS5yZW1vdmUoKSx0LmtleUNvZGUhPT1kLmtleXMuRVNDJiYobj10LnBvc2l0aW9uLGk9cC5wcmV2KCksbz1wLm5leHQoKSxhPWkuZGF0YShFKSxzPW8uZGF0YShFKSxsPW4tcGFyc2VJbnQoaVswXS5zdHlsZVtoLnBvc2l0aW9uaW5nUHJvcGVydHldLDEwKSxjPXBhcnNlSW50KG9bMF0uc3R5bGVbaC5wb3NpdGlvbmluZ1Byb3BlcnR5XSwxMCkrb1swXVtoLnNpemluZ0RvbVByb3BlcnR5XS1uLXBbMF1baC5zaXppbmdEb21Qcm9wZXJ0eV0sdT1oLl9lbGVtZW50LmNoaWxkcmVuKHopLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiByKGUodGhpcykuZGF0YShFKS5zaXplKX0pLmxlbmd0aCwoIXIoYS5zaXplKXx8dT4xKSYmKHIoYS5zaXplKSYmdS0tLGEuc2l6ZT1sK1wicHhcIiksKCFyKHMuc2l6ZSl8fHU+MSkmJihzLnNpemU9YytcInB4XCIpLGYucmVzaXplKCEwKSksITF9fX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQpe2Z1bmN0aW9uIG4oZSxyKXt2YXIgbyxhO2lmKHI9clt0XSlmb3Iobz1pW2VdPWlbZV18fFtdLGE9MDtyLmxlbmd0aD5hO2ErKylvLnB1c2goclthXSksbihlKzEsclthXSl9dmFyIGk9W107cmV0dXJuIG4oMCxlKSxpfWZ1bmN0aW9uIG4oKXtyZXR1cm4gTS5zdXBwb3J0LmNzc0JvcmRlclNwYWNpbmc/XCJcIjonY2VsbHNwYWNpbmc9XCIwXCInfWZ1bmN0aW9uIGkodCxpKXtyZXR1cm4gdC5sZW5ndGg/XCI8dGFibGUgXCIrbigpKycgY2xhc3M9XCInK2UudHJpbShcImstc2NoZWR1bGVyLXRhYmxlIFwiKyhpfHxcIlwiKSkrJ1wiPjx0cj4nK3Quam9pbihcIjwvdHI+PHRyPlwiKStcIjwvdHI+PC90YWJsZT5cIjpcIlwifWZ1bmN0aW9uIHIoZSx0KXtyZXR1cm4gZS5sZW5ndGg/XCI8ZGl2IHN0eWxlPSdwb3NpdGlvbjpyZWxhdGl2ZSc+XCIraShlLHQpK1wiPC9kaXY+XCI6XCJcIn1mdW5jdGlvbiBvKHQsbixyKXt2YXIgbyxhPVtdO2lmKHI+MClmb3Iobz0wO3Q+bztvKyspYS5wdXNoKFwiPHRoPiZuYnNwOzwvdGg+XCIpO3JldHVybiBuJiZhLnB1c2goJzx0aCBjbGFzcz1cImstc2NoZWR1bGVyLXRpbWVzLWFsbC1kYXlcIj4nK24udGV4dCtcIjwvdGg+XCIpLDE+cj9lKCk6ZSgnPGRpdiBjbGFzcz1cImstc2NoZWR1bGVyLXRpbWVzXCI+JytpKGEpK1wiPC9kaXY+XCIpfWZ1bmN0aW9uIGEodCxuLG8pe3ZhciBhLHMsbCxjLGQsdSxoLHAsZixnLG09W107Zm9yKHM9MDt0Lmxlbmd0aD5zO3MrKyl7Zm9yKGw9dFtzXSxjPVtdLGQ9bi9sLmxlbmd0aCxhPTA7bC5sZW5ndGg+YTthKyspdT1sW2FdLGMucHVzaCgnPHRoIGNvbHNwYW49XCInKyh1LmNvbHNwYW58fGQpKydcIiBjbGFzcz1cIicrKHUuY2xhc3NOYW1lfHxcIlwiKSsnXCI+Jyt1LnRleHQrXCI8L3RoPlwiKTttLnB1c2goYy5qb2luKFwiXCIpKX1pZihoPVtdLG8pe2ZvcihwPXRbdC5sZW5ndGgtMV0sZj1bXSxnPW8uY2VsbENvbnRlbnQsYT0wO3AubGVuZ3RoPmE7YSsrKWYucHVzaCgnPHRkIGNsYXNzPVwiJysocFthXS5jbGFzc05hbWV8fFwiXCIpKydcIj4nKyhnP2coYSk6XCImbmJzcDtcIikrXCI8L3RoPlwiKTtoLnB1c2goZi5qb2luKFwiXCIpKX1yZXR1cm4gZSgnPGRpdiBjbGFzcz1cImstc2NoZWR1bGVyLWhlYWRlciBrLXN0YXRlLWRlZmF1bHRcIj48ZGl2IGNsYXNzPVwiay1zY2hlZHVsZXItaGVhZGVyLXdyYXBcIj4nK2kobSkrcihoLFwiay1zY2hlZHVsZXItaGVhZGVyLWFsbC1kYXlcIikrXCI8L2Rpdj48L2Rpdj5cIil9ZnVuY3Rpb24gcyh0LG4pe3ZhciByLG8sYSxzLGwsYz1BcnJheShuKS5qb2luKCkuc3BsaXQoXCIsXCIpLGQ9W107Zm9yKG89MDt0Lmxlbmd0aD5vO28rKylmb3IoYT10W29dLHM9bi9hLmxlbmd0aCxyPTA7YS5sZW5ndGg+cjtyKyspbD1hW3JdLmNsYXNzTmFtZXx8XCJcIixhW3JdLmFsbERheSYmKGw9XCJrLXNjaGVkdWxlci10aW1lcy1hbGwtZGF5XCIpLGNbcypyXSs9Jzx0aCBjbGFzcz1cIicrbCsnXCIgcm93c3Bhbj1cIicrcysnXCI+JythW3JdLnRleHQrXCI8L3RoPlwiO2ZvcihyPTA7bj5yO3IrKylkLnB1c2goY1tyXSk7cmV0dXJuIDE+bj9lKCk6ZSgnPGRpdiBjbGFzcz1cImstc2NoZWR1bGVyLXRpbWVzXCI+JytpKGQpK1wiPC9kaXY+XCIpfWZ1bmN0aW9uIGwoKXtyZXR1cm4gZSgnPGRpdiBjbGFzcz1cImstc2NoZWR1bGVyLWNvbnRlbnRcIj48dGFibGUgJytuKCkrJyBjbGFzcz1cImstc2NoZWR1bGVyLXRhYmxlXCIvPjwvZGl2PicpfWZ1bmN0aW9uIGMoKXtyZXR1cm4gRD1EP0Q6TS5zdXBwb3J0LnNjcm9sbGJhcigpfWZ1bmN0aW9uIGQoZSx0LG4pe3ZhciBpLHIsbyxhLHM7Zm9yKGk9ZS5sZW5ndGgtMTtpPj0wO2ktLSlyPXUoZVtpXSksbz1yLnN0YXJ0LHM9ci5lbmQsYT10Pj1vJiZzPj10LChhfHxvPj10JiZuPj1zfHxvPj10JiZuPj1vKSYmKHQ+byYmKHQ9bykscz5uJiYobj1zKSk7cmV0dXJuIGgoZSx0LG4pfWZ1bmN0aW9uIHUoZSl7cmV0dXJue3N0YXJ0OmUuc3RhcnQsZW5kOmUuZW5kfX1mdW5jdGlvbiBoKGUsdCxuKXt2YXIgaSxyLG89W107Zm9yKGk9MDtlLmxlbmd0aD5pO2krKylyPXUoZVtpXSksKHQ+ci5zdGFydCYmci5lbmQ+dHx8ci5zdGFydD49dCYmbj49ci5lbmQpJiZvLnB1c2goZVtpXSk7cmV0dXJuIG99ZnVuY3Rpb24gcChlKXtyZXR1cm4gZyhlKX1mdW5jdGlvbiBmKGUpe3JldHVybiBnKGUpfWZ1bmN0aW9uIGcoZSl7dmFyIHQsbixpLHIsbyxhLHMsbD1bXTtmb3IodD0wO2UubGVuZ3RoPnQ7dCsrKXtmb3Iobj1lW3RdLGk9dShuKSxyPW51bGwsbz0wLGE9bC5sZW5ndGg7YT5vO28rKylpZihzPWkuc3RhcnQ+bFtvXS5lbmQsbFtvXS5zdGFydD5pLnN0YXJ0fHxzKXtyPWxbb10saS5lbmQ+ci5lbmQmJihyLmVuZD1pLmVuZCk7YnJlYWt9cnx8KHI9e3N0YXJ0Omkuc3RhcnQsZW5kOmkuZW5kLGV2ZW50czpbXX0sbC5wdXNoKHIpKSxyLmV2ZW50cy5wdXNoKG4pfXJldHVybiBsfWZ1bmN0aW9uIG0oZSx0LG4saSl7dmFyIHIsbyxhLHMsbD10WzBdO2lmKGwpe2ZvcihyPVtdLG89bC5kYXRhU291cmNlLnZpZXcoKSxhPTA7by5sZW5ndGg+YTthKyspcz17dGV4dDppKHt0ZXh0Ok0uaHRtbEVuY29kZShNLmdldHRlcihsLmRhdGFUZXh0RmllbGQpKG9bYV0pKSxjb2xvcjpNLmdldHRlcihsLmRhdGFDb2xvckZpZWxkKShvW2FdKSxmaWVsZDpsLmZpZWxkLHRpdGxlOmwudGl0bGUsbmFtZTpsLm5hbWUsdmFsdWU6TS5nZXR0ZXIobC5kYXRhVmFsdWVGaWVsZCkob1thXSl9KSxjbGFzc05hbWU6XCJrLXNsb3QtY2VsbFwifSxzW2VdPW0oZSx0LnNsaWNlKDEpLG4saSksci5wdXNoKHMpO3JldHVybiByfXJldHVybiBufWZ1bmN0aW9uIHYodCl7cmV0dXJuIGZ1bmN0aW9uKG4pe2lmKGUuaXNBcnJheShuKXx8biBpbnN0YW5jZW9mIE0uZGF0YS5PYnNlcnZhYmxlQXJyYXkpe2Zvcih2YXIgaT0wO24ubGVuZ3RoPmk7aSsrKWlmKG5baV09PXQpcmV0dXJuITA7cmV0dXJuITF9cmV0dXJuIG49PXR9fWZ1bmN0aW9uIF8oZSl7ZS5jbGFzc05hbWU9ZS5jbGFzc05hbWUucmVwbGFjZShFLFwiXCIpK1wiIGstc3RhdGUtc2VsZWN0ZWRcIn12YXIgeSx3LGIsayx4LEMsUyxULEQsQSxFLE09d2luZG93LmtlbmRvLFA9TS51aSxJPVAuV2lkZ2V0LHo9TS5rZXlzLEY9XCIua2VuZG9TY2hlZHVsZXJWaWV3XCIsUj1NYXRoLEI9JzxkaXYgY2xhc3M9XCJrLW1hcnF1ZWUgay1zY2hlZHVsZXItbWFycXVlZVwiPjxkaXYgY2xhc3M9XCJrLW1hcnF1ZWUtY29sb3JcIj48L2Rpdj48ZGl2IGNsYXNzPVwiay1tYXJxdWVlLXRleHRcIj48ZGl2IGNsYXNzPVwiay1sYWJlbC10b3BcIj48L2Rpdj48ZGl2IGNsYXNzPVwiay1sYWJlbC1ib3R0b21cIj48L2Rpdj48L2Rpdj48L2Rpdj4nO00udWkuc2NoZWR1bGVyPXt9LHk9TS5DbGFzcy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5faW5kZXg9ZSx0aGlzLl90aW1lU2xvdENvbGxlY3Rpb25zPVtdLHRoaXMuX2RheVNsb3RDb2xsZWN0aW9ucz1bXX0sYWRkVGltZVNsb3RDb2xsZWN0aW9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2FkZENvbGxlY3Rpb24oZSx0LHRoaXMuX3RpbWVTbG90Q29sbGVjdGlvbnMpfSxhZGREYXlTbG90Q29sbGVjdGlvbjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9hZGRDb2xsZWN0aW9uKGUsdCx0aGlzLl9kYXlTbG90Q29sbGVjdGlvbnMpfSxfYWRkQ29sbGVjdGlvbjpmdW5jdGlvbihlLHQsbil7dmFyIGk9bmV3IHgoZSx0LHRoaXMuX2luZGV4LG4ubGVuZ3RoKTtyZXR1cm4gbi5wdXNoKGkpLGl9LHRpbWVTbG90Q29sbGVjdGlvbkNvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RpbWVTbG90Q29sbGVjdGlvbnMubGVuZ3RofSxkYXlTbG90Q29sbGVjdGlvbkNvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RheVNsb3RDb2xsZWN0aW9ucy5sZW5ndGh9LGRheVNsb3RCeVBvc2l0aW9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX3Nsb3RCeVBvc2l0aW9uKGUsdCx0aGlzLl9kYXlTbG90Q29sbGVjdGlvbnMpfSx0aW1lU2xvdEJ5UG9zaXRpb246ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fc2xvdEJ5UG9zaXRpb24oZSx0LHRoaXMuX3RpbWVTbG90Q29sbGVjdGlvbnMpfSxfc2xvdEJ5UG9zaXRpb246ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhO2ZvcihpPTA7bi5sZW5ndGg+aTtpKyspZm9yKHI9bltpXSxvPTA7bzxyLmNvdW50KCk7bysrKWlmKGE9ci5hdChvKSxlPj1hLm9mZnNldExlZnQmJmEub2Zmc2V0TGVmdCthLmNsaWVudFdpZHRoPmUmJnQ+PWEub2Zmc2V0VG9wJiZhLm9mZnNldFRvcCthLmNsaWVudEhlaWdodD49dClyZXR1cm4gYX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlO2ZvcihlPTA7dGhpcy5fZGF5U2xvdENvbGxlY3Rpb25zLmxlbmd0aD5lO2UrKyl0aGlzLl9kYXlTbG90Q29sbGVjdGlvbnNbZV0ucmVmcmVzaCgpO2ZvcihlPTA7dGhpcy5fdGltZVNsb3RDb2xsZWN0aW9ucy5sZW5ndGg+ZTtlKyspdGhpcy5fdGltZVNsb3RDb2xsZWN0aW9uc1tlXS5yZWZyZXNoKCl9LHRpbWVTbG90UmFuZ2VzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzLl90aW1lU2xvdENvbGxlY3Rpb25zLHI9dGhpcy5fc3RhcnRTbG90KGUsaSk7cmV0dXJuIXIuaW5SYW5nZSYmZT49ci5zbG90LmVuZCYmKHI9bnVsbCksbj1yLHQ+ZSYmKG49dGhpcy5fZW5kU2xvdCh0LGkpKSxuJiYhbi5pblJhbmdlJiZuLnNsb3Quc3RhcnQ+PXQmJihuPW51bGwpLG51bGw9PT1yJiZudWxsPT09bj9bXToobnVsbD09PXImJihyPXtpblJhbmdlOiEwLHNsb3Q6aVtuLnNsb3QuY29sbGVjdGlvbkluZGV4XS5maXJzdCgpfSksbnVsbD09PW4mJihuPXtpblJhbmdlOiEwLHNsb3Q6aVtyLnNsb3QuY29sbGVjdGlvbkluZGV4XS5sYXN0KCl9KSx0aGlzLl9jb250aW51b3VzUmFuZ2UoYixpLHIsbikpfSxkYXlTbG90UmFuZ2VzOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPXRoaXMuX2RheVNsb3RDb2xsZWN0aW9ucyxvPXRoaXMuX3N0YXJ0U2xvdChlLHIsbik7aWYoIW8uaW5SYW5nZSYmZT49by5zbG90LmVuZCYmKG89bnVsbCksaT1vLHQ+ZSYmKGk9dGhpcy5fZW5kU2xvdCh0LHIsbikpLGkmJiFpLmluUmFuZ2UmJmkuc2xvdC5zdGFydD49dCYmKGk9bnVsbCksbnVsbD09PW8mJm51bGw9PT1pKXJldHVybltdO2lmKG51bGw9PT1vKWRvIGUrPU0uZGF0ZS5NU19QRVJfREFZLG89dGhpcy5fc3RhcnRTbG90KGUscixuKTt3aGlsZSghby5pblJhbmdlJiZlPj1vLnNsb3QuZW5kKTtpZihudWxsPT09aSlkbyB0LT1NLmRhdGUuTVNfUEVSX0RBWSxpPXRoaXMuX2VuZFNsb3QodCxyLG4pO3doaWxlKCFpLmluUmFuZ2UmJmkuc2xvdC5zdGFydD49dCk7cmV0dXJuIHRoaXMuX2NvbnRpbnVvdXNSYW5nZShrLHIsbyxpKX0sX2NvbnRpbnVvdXNSYW5nZTpmdW5jdGlvbihlLHQsbixpKXt2YXIgcixvLGEscyxsLGMsZD1uLnNsb3QsdT1pLnNsb3QsaD1kLmNvbGxlY3Rpb25JbmRleCxwPXUuY29sbGVjdGlvbkluZGV4LGY9W107Zm9yKHI9aDtwPj1yO3IrKylvPXRbcl0sYT1vLmZpcnN0KCkscz1vLmxhc3QoKSxsPSExLGM9ITEscj09aCYmKGM9IW4uaW5SYW5nZSkscj09cCYmKGw9IWkuaW5SYW5nZSksZC5zdGFydD5hLnN0YXJ0JiYoYT1kKSxzLnN0YXJ0PnUuc3RhcnQmJihzPXUpLHA+aCYmKHI9PWg/bD0hMDpyPT1wP2M9ITA6bD1jPSEwKSxmLnB1c2gobmV3IGUoe3N0YXJ0OmEsZW5kOnMsY29sbGVjdGlvbjpvLGhlYWQ6bCx0YWlsOmN9KSk7cmV0dXJuIGZ9LHNsb3RSYW5nZXM6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnN0YXJ0VGltZXx8TS5kYXRlLnRvVXRjVGltZShlLnN0YXJ0KSxpPWUuZW5kVGltZXx8TS5kYXRlLnRvVXRjVGltZShlLmVuZCk7cmV0dXJuIHZvaWQgMD09PXQmJih0PWUuaXNNdWx0aURheSgpKSx0P3RoaXMuZGF5U2xvdFJhbmdlcyhuLGksZS5pc0FsbERheSk6dGhpcy50aW1lU2xvdFJhbmdlcyhuLGkpfSxyYW5nZXM6ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuXCJudW1iZXJcIiE9dHlwZW9mIGUmJihlPU0uZGF0ZS50b1V0Y1RpbWUoZSkpLFwibnVtYmVyXCIhPXR5cGVvZiB0JiYodD1NLmRhdGUudG9VdGNUaW1lKHQpKSxuP3RoaXMuZGF5U2xvdFJhbmdlcyhlLHQsaSk6dGhpcy50aW1lU2xvdFJhbmdlcyhlLHQpfSxfc3RhcnRDb2xsZWN0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG4saTtmb3Iobj0wO3QubGVuZ3RoPm47bisrKWlmKGk9dFtuXSxpLnN0YXJ0SW5SYW5nZShlKSlyZXR1cm4gaTtyZXR1cm4gbnVsbH0sX2VuZENvbGxlY3Rpb246ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI7Zm9yKGk9MDt0Lmxlbmd0aD5pO2krKylpZihyPXRbaV0sci5lbmRJblJhbmdlKGUsbikpcmV0dXJuIHI7cmV0dXJuIG51bGx9LF9nZXRDb2xsZWN0aW9uczpmdW5jdGlvbihlKXtyZXR1cm4gZT90aGlzLl9kYXlTbG90Q29sbGVjdGlvbnM6dGhpcy5fdGltZVNsb3RDb2xsZWN0aW9uc30sY29udGludW91c1Nsb3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbj10Py0xOjEsaT10aGlzLl9nZXRDb2xsZWN0aW9ucyhlLmlzRGF5U2xvdCkscj1pW2UuY29sbGVjdGlvbkluZGV4K25dO3JldHVybiByP3JbdD9cImxhc3RcIjpcImZpcnN0XCJdKCk6dm9pZCAwfSxmaXJzdFNsb3Q6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9nZXRDb2xsZWN0aW9ucyh0aGlzLmRheVNsb3RDb2xsZWN0aW9uQ291bnQoKSk7cmV0dXJuIGVbMF0uZmlyc3QoKX0sbGFzdFNsb3Q6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9nZXRDb2xsZWN0aW9ucyh0aGlzLmRheVNsb3RDb2xsZWN0aW9uQ291bnQoKSk7cmV0dXJuIGVbZS5sZW5ndGgtMV0ubGFzdCgpfSx1cFNsb3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9ZnVuY3Rpb24oZSxpLHIpe3ZhciBvPTA9PT1yO3JldHVybiF0JiYhZSYmbyYmbi5kYXlTbG90Q29sbGVjdGlvbkNvdW50KCk/bi5fZGF5U2xvdENvbGxlY3Rpb25zWzBdLmF0KGkpOnZvaWQgMH07cmV0dXJuIHRoaXMudGltZVNsb3RDb2xsZWN0aW9uQ291bnQoKXx8KHQ9ITApLHRoaXMuX3ZlcnRpY2FsU2xvdChlLC0xLGkpfSxkb3duU2xvdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1mdW5jdGlvbihlLGkscil7cmV0dXJuIXQmJmUmJm4udGltZVNsb3RDb2xsZWN0aW9uQ291bnQoKT9uLl90aW1lU2xvdENvbGxlY3Rpb25zW3JdLmF0KDApOnZvaWQgMH07cmV0dXJuIHRoaXMudGltZVNsb3RDb2xsZWN0aW9uQ291bnQoKXx8KHQ9ITApLHRoaXMuX3ZlcnRpY2FsU2xvdChlLDEsaSl9LGxlZnRTbG90OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9ob3Jpem9udGFsU2xvdChlLC0xKX0scmlnaHRTbG90OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9ob3Jpem9udGFsU2xvdChlLDEpfSxfaG9yaXpvbnRhbFNsb3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPWUuaW5kZXgscj1lLmlzRGF5U2xvdCxvPWUuY29sbGVjdGlvbkluZGV4LGE9dGhpcy5fZ2V0Q29sbGVjdGlvbnMocik7cmV0dXJuIHI/aSs9dDpvKz10LG49YVtvXSxuP24uYXQoaSk6dm9pZCAwfSxfdmVydGljYWxTbG90OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPWUuaW5kZXgsbz1lLmlzRGF5U2xvdCxhPWUuY29sbGVjdGlvbkluZGV4LHM9dGhpcy5fZ2V0Q29sbGVjdGlvbnMobyk7cmV0dXJuKGU9bihvLGEscikpP2U6KG8/YSs9dDpyKz10LGk9c1thXSxpP2kuYXQocik6dm9pZCAwKX0sX2NvbGxlY3Rpb246ZnVuY3Rpb24oZSx0KXt2YXIgbj10P3RoaXMuX2RheVNsb3RDb2xsZWN0aW9uczp0aGlzLl90aW1lU2xvdENvbGxlY3Rpb25zO3JldHVybiBuW2VdfSxfc3RhcnRTbG90OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPXRoaXMuX3N0YXJ0Q29sbGVjdGlvbihlLHQpLG89ITA7cmV0dXJuIHJ8fChyPXRbMF0sbz0hMSksaT1yLnNsb3RCeVN0YXJ0RGF0ZShlLG4pLGl8fChpPXIuZmlyc3QoKSxvPSExKSx7c2xvdDppLGluUmFuZ2U6b319LF9lbmRTbG90OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPXRoaXMuX2VuZENvbGxlY3Rpb24oZSx0LG4pLG89ITA7cmV0dXJuIHJ8fChyPXRbdC5sZW5ndGgtMV0sbz0hMSksaT1yLnNsb3RCeUVuZERhdGUoZSxuKSxpfHwoaT1yLmxhc3QoKSxvPSExKSx7c2xvdDppLGluUmFuZ2U6b319LGdldFNsb3RDb2xsZWN0aW9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXNbdD9cImdldERheVNsb3RDb2xsZWN0aW9uXCI6XCJnZXRUaW1lU2xvdENvbGxlY3Rpb25cIl0oZSl9LGdldFRpbWVTbG90Q29sbGVjdGlvbjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fdGltZVNsb3RDb2xsZWN0aW9uc1tlXX0sZ2V0RGF5U2xvdENvbGxlY3Rpb246ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2RheVNsb3RDb2xsZWN0aW9uc1tlXX19KSx3PU0uQ2xhc3MuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQpe2UuZXh0ZW5kKHRoaXMsdCl9LGlubmVySGVpZ2h0OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLmNvbGxlY3Rpb24sbj10aGlzLnN0YXJ0LmluZGV4LGk9dGhpcy5lbmQuaW5kZXgscj0wO2ZvcihlPW47aT49ZTtlKyspcis9dC5hdChlKS5vZmZzZXRIZWlnaHQ7cmV0dXJuIHJ9LGV2ZW50czpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbGxlY3Rpb24uZXZlbnRzKCl9LGFkZEV2ZW50OmZ1bmN0aW9uKGUpe3RoaXMuZXZlbnRzKCkucHVzaChlKX0sc3RhcnRTbG90OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhcnQub2Zmc2V0TGVmdD50aGlzLmVuZC5vZmZzZXRMZWZ0P3RoaXMuZW5kOnRoaXMuc3RhcnR9LGVuZFNsb3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydC5vZmZzZXRMZWZ0PnRoaXMuZW5kLm9mZnNldExlZnQ/dGhpcy5zdGFydDp0aGlzLmVuZH19KSxiPXcuZXh0ZW5kKHtpbm5lckhlaWdodDpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5jb2xsZWN0aW9uLG49dGhpcy5zdGFydC5pbmRleCxpPXRoaXMuZW5kLmluZGV4LHI9MDtmb3IoZT1uO2k+PWU7ZSsrKXIrPXQuYXQoZSkub2Zmc2V0SGVpZ2h0O3JldHVybiByfSxvdXRlclJlY3Q6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9yZWN0KFwib2Zmc2V0XCIsZSx0LG4pfSxfcmVjdDpmdW5jdGlvbihlLHQsbixpKXt2YXIgcixvLGEscyxsLGMsZCx1LGg9dGhpcy5zdGFydCxwPXRoaXMuZW5kLGY9TS5zdXBwb3J0LmlzUnRsKGguZWxlbWVudCk7cmV0dXJuXCJudW1iZXJcIiE9dHlwZW9mIHQmJih0PU0uZGF0ZS50b1V0Y1RpbWUodCkpLFwibnVtYmVyXCIhPXR5cGVvZiBuJiYobj1NLmRhdGUudG9VdGNUaW1lKG4pKSxpPyhyPWgub2Zmc2V0VG9wLG89cC5vZmZzZXRUb3ArcFtlK1wiSGVpZ2h0XCJdLGY/KGE9cC5vZmZzZXRMZWZ0LHM9aC5vZmZzZXRMZWZ0K2hbZStcIldpZHRoXCJdKTooYT1oLm9mZnNldExlZnQscz1wLm9mZnNldExlZnQrcFtlK1wiV2lkdGhcIl0pKToobD10LWguc3RhcnQsMD5sJiYobD0wKSxjPWguZW5kLWguc3RhcnQscj1oLm9mZnNldFRvcCtoW2UrXCJIZWlnaHRcIl0qbC9jLGQ9cC5lbmQtbiwwPmQmJihkPTApLHU9cC5lbmQtcC5zdGFydCxvPXAub2Zmc2V0VG9wK3BbZStcIkhlaWdodFwiXS1wW2UrXCJIZWlnaHRcIl0qZC91LGY/KGE9TWF0aC5yb3VuZChwLm9mZnNldExlZnQrcFtlK1wiV2lkdGhcIl0qZC91KSxzPU1hdGgucm91bmQoaC5vZmZzZXRMZWZ0K2hbZStcIldpZHRoXCJdLWhbZStcIldpZHRoXCJdKmwvYykpOihhPU1hdGgucm91bmQoaC5vZmZzZXRMZWZ0K2hbZStcIldpZHRoXCJdKmwvYykscz1NYXRoLnJvdW5kKHAub2Zmc2V0TGVmdCtwW2UrXCJXaWR0aFwiXS1wW2UrXCJXaWR0aFwiXSpkL3UpKSkse3RvcDpyLGJvdHRvbTpvLGxlZnQ6MD09PWE/YTphKzEscmlnaHQ6c319LGlubmVyUmVjdDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX3JlY3QoXCJjbGllbnRcIixlLHQsbil9fSksaz13LmV4dGVuZCh7aW5uZXJXaWR0aDpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5jb2xsZWN0aW9uLG49dGhpcy5zdGFydC5pbmRleCxpPXRoaXMuZW5kLmluZGV4LHI9MCxvPW4hPT1pP1wib2Zmc2V0V2lkdGhcIjpcImNsaWVudFdpZHRoXCI7Zm9yKGU9bjtpPj1lO2UrKylyKz10LmF0KGUpW29dO3JldHVybiByfX0pLHg9TS5DbGFzcy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4saSl7dGhpcy5fc2xvdHM9W10sdGhpcy5fZXZlbnRzPVtdLHRoaXMuX3N0YXJ0PU0uZGF0ZS50b1V0Y1RpbWUoZSksdGhpcy5fZW5kPU0uZGF0ZS50b1V0Y1RpbWUodCksdGhpcy5fZ3JvdXBJbmRleD1uLHRoaXMuX2NvbGxlY3Rpb25JbmRleD1pfSxyZWZyZXNoOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7dGhpcy5fc2xvdHMubGVuZ3RoPmU7ZSsrKXRoaXMuX3Nsb3RzW2VdLnJlZnJlc2goKX0sc3RhcnRJblJhbmdlOmZ1bmN0aW9uKGUpe3JldHVybiBlPj10aGlzLl9zdGFydCYmdGhpcy5fZW5kPmV9LGVuZEluUmFuZ2U6ZnVuY3Rpb24oZSx0KXt2YXIgbj10P3RoaXMuX2VuZD5lOnRoaXMuX2VuZD49ZTtyZXR1cm4gZT49dGhpcy5fc3RhcnQmJm59LHNsb3RCeVN0YXJ0RGF0ZTpmdW5jdGlvbihlKXt2YXIgdCxuLGk9ZTtmb3IoXCJudW1iZXJcIiE9dHlwZW9mIGkmJihpPU0uZGF0ZS50b1V0Y1RpbWUoZSkpLHQ9MDt0aGlzLl9zbG90cy5sZW5ndGg+dDt0KyspaWYobj10aGlzLl9zbG90c1t0XSxuLnN0YXJ0SW5SYW5nZShpKSlyZXR1cm4gbjtyZXR1cm4gbnVsbH0sc2xvdEJ5RW5kRGF0ZTpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj1lO2lmKFwibnVtYmVyXCIhPXR5cGVvZiByJiYocj1NLmRhdGUudG9VdGNUaW1lKGUpKSx0KXJldHVybiB0aGlzLnNsb3RCeVN0YXJ0RGF0ZShlLCExKTtmb3Iobj0wO3RoaXMuX3Nsb3RzLmxlbmd0aD5uO24rKylpZihpPXRoaXMuX3Nsb3RzW25dLGkuZW5kSW5SYW5nZShyKSlyZXR1cm4gaTtyZXR1cm4gbnVsbH0sY291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2xvdHMubGVuZ3RofSxldmVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXZlbnRzfSxhZGRUaW1lU2xvdDpmdW5jdGlvbihlLHQsbixpKXt2YXIgcj1uZXcgUyhlLHQsbix0aGlzLl9ncm91cEluZGV4LHRoaXMuX2NvbGxlY3Rpb25JbmRleCx0aGlzLl9zbG90cy5sZW5ndGgsaSk7dGhpcy5fc2xvdHMucHVzaChyKX0sYWRkRGF5U2xvdDpmdW5jdGlvbihlLHQsbixpKXt2YXIgcj1uZXcgVChlLHQsbix0aGlzLl9ncm91cEluZGV4LHRoaXMuX2NvbGxlY3Rpb25JbmRleCx0aGlzLl9zbG90cy5sZW5ndGgsaSk7dGhpcy5fc2xvdHMucHVzaChyKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2xvdHNbMF19LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2xvdHNbdGhpcy5fc2xvdHMubGVuZ3RoLTFdfSxhdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc2xvdHNbZV19fSksQz1NLkNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbixpLHIsbyl7dGhpcy5lbGVtZW50PWUsdGhpcy5jbGllbnRXaWR0aD1lLmNsaWVudFdpZHRoLHRoaXMuY2xpZW50SGVpZ2h0PWUuY2xpZW50SGVpZ2h0LHRoaXMub2Zmc2V0V2lkdGg9ZS5vZmZzZXRXaWR0aCx0aGlzLm9mZnNldEhlaWdodD1lLm9mZnNldEhlaWdodCx0aGlzLm9mZnNldFRvcD1lLm9mZnNldFRvcCx0aGlzLm9mZnNldExlZnQ9ZS5vZmZzZXRMZWZ0LHRoaXMuc3RhcnQ9dCx0aGlzLmVuZD1uLHRoaXMuZWxlbWVudD1lLHRoaXMuZ3JvdXBJbmRleD1pLHRoaXMuY29sbGVjdGlvbkluZGV4PXIsdGhpcy5pbmRleD1vLHRoaXMuaXNEYXlTbG90PSExfSxzdGFydERhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gTS50aW1lem9uZS50b0xvY2FsRGF0ZSh0aGlzLnN0YXJ0KX0sZW5kRGF0ZTpmdW5jdGlvbigpe3JldHVybiBNLnRpbWV6b25lLnRvTG9jYWxEYXRlKHRoaXMuZW5kKX0sc3RhcnRJblJhbmdlOmZ1bmN0aW9uKGUpe3JldHVybiBlPj10aGlzLnN0YXJ0JiZ0aGlzLmVuZD5lfSxlbmRJblJhbmdlOmZ1bmN0aW9uKGUpe3JldHVybiBlPnRoaXMuc3RhcnQmJnRoaXMuZW5kPj1lfSxzdGFydE9mZnNldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0fSxlbmRPZmZzZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmR9fSksUz1DLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbixpLHIsbyxhKXtDLmZuLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuaXNIb3Jpem9udGFsPWE/ITA6ITF9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnQ7dGhpcy5jbGllbnRXaWR0aD1lLmNsaWVudFdpZHRoLHRoaXMuY2xpZW50SGVpZ2h0PWUuY2xpZW50SGVpZ2h0LHRoaXMub2Zmc2V0V2lkdGg9ZS5vZmZzZXRXaWR0aCx0aGlzLm9mZnNldEhlaWdodD1lLm9mZnNldEhlaWdodCx0aGlzLm9mZnNldFRvcD1lLm9mZnNldFRvcCx0aGlzLm9mZnNldExlZnQ9ZS5vZmZzZXRMZWZ0fSxvZmZzZXRYOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU/dGhpcy5vZmZzZXRMZWZ0K3Q6dGhpcy5vZmZzZXRMZWZ0K3R9LHN0YXJ0SW5SYW5nZTpmdW5jdGlvbihlKXtyZXR1cm4gZT49dGhpcy5zdGFydCYmdGhpcy5lbmQ+ZX0sZW5kSW5SYW5nZTpmdW5jdGlvbihlKXtyZXR1cm4gZT50aGlzLnN0YXJ0JiZ0aGlzLmVuZD49ZX0sc3RhcnRPZmZzZXQ6ZnVuY3Rpb24odCxuLGkpe3ZhciByLG8sYSxzLGw7aWYoaSlyZXR1cm4gdGhpcy5zdGFydDtpZihyPWUodGhpcy5lbGVtZW50KS5vZmZzZXQoKSxvPXRoaXMuZW5kLXRoaXMuc3RhcnQsdGhpcy5pc0hvcml6b250YWwpe2lmKGw9TS5zdXBwb3J0LmlzUnRsKHRoaXMuZWxlbWVudCksYT10LXIubGVmdCxzPU1hdGguZmxvb3IobyooYS90aGlzLm9mZnNldFdpZHRoKSksbClyZXR1cm4gdGhpcy5zdGFydCtvLXN9ZWxzZSBhPW4tci50b3Ascz1NYXRoLmZsb29yKG8qKGEvdGhpcy5vZmZzZXRIZWlnaHQpKTtyZXR1cm4gdGhpcy5zdGFydCtzfSxlbmRPZmZzZXQ6ZnVuY3Rpb24odCxuLGkpe3ZhciByLG8sYSxzLGw7aWYoaSlyZXR1cm4gdGhpcy5lbmQ7aWYocj1lKHRoaXMuZWxlbWVudCkub2Zmc2V0KCksbz10aGlzLmVuZC10aGlzLnN0YXJ0LHRoaXMuaXNIb3Jpem9udGFsKXtpZihsPU0uc3VwcG9ydC5pc1J0bCh0aGlzLmVsZW1lbnQpLGE9dC1yLmxlZnQscz1NYXRoLmZsb29yKG8qKGEvdGhpcy5vZmZzZXRXaWR0aCkpLGwpcmV0dXJuIHRoaXMuc3RhcnQrby1zfWVsc2UgYT1uLXIudG9wLHM9TWF0aC5mbG9vcihvKihhL3RoaXMub2Zmc2V0SGVpZ2h0KSk7cmV0dXJuIHRoaXMuc3RhcnQrc319KSxUPUMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuLGkscixvLGEpe0MuZm4uaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5ldmVudENvdW50PWEsdGhpcy5pc0RheVNsb3Q9ITAsdGhpcy5lbGVtZW50LmNoaWxkcmVuLmxlbmd0aD8odGhpcy5maXJzdENoaWxkSGVpZ2h0PXRoaXMuZWxlbWVudC5jaGlsZHJlblswXS5vZmZzZXRIZWlnaHQrMyx0aGlzLmZpcnN0Q2hpbGRUb3A9dGhpcy5lbGVtZW50LmNoaWxkcmVuWzBdLm9mZnNldFRvcCk6KHRoaXMuZmlyc3RDaGlsZEhlaWdodD0zLHRoaXMuZmlyc3RDaGlsZFRvcD0wKX0scmVmcmVzaDpmdW5jdGlvbigpe3RoaXMuY2xpZW50SGVpZ2h0PXRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQsdGhpcy5vZmZzZXRUb3A9dGhpcy5lbGVtZW50Lm9mZnNldFRvcH0sc3RhcnREYXRlOmZ1bmN0aW9uKCl7dmFyIGU9bmV3IERhdGUodGhpcy5zdGFydCk7cmV0dXJuIE0udGltZXpvbmUuYXBwbHkoZSxcIkV0Yy9VVENcIil9LGVuZERhdGU6ZnVuY3Rpb24oKXt2YXIgZT1uZXcgRGF0ZSh0aGlzLmVuZCk7cmV0dXJuIE0udGltZXpvbmUuYXBwbHkoZSxcIkV0Yy9VVENcIil9LHN0YXJ0SW5SYW5nZTpmdW5jdGlvbihlKXtyZXR1cm4gZT49dGhpcy5zdGFydCYmdGhpcy5lbmQ+ZX0sZW5kSW5SYW5nZTpmdW5jdGlvbihlKXtyZXR1cm4gZT50aGlzLnN0YXJ0JiZ0aGlzLmVuZD49ZX19KSxNLnVpLlNjaGVkdWxlclZpZXc9SS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXtJLmZuLmluaXQuY2FsbCh0aGlzLHQsbiksdGhpcy5fc2Nyb2xsYmFyPWMoKSx0aGlzLl9pc1J0bD1NLnN1cHBvcnQuaXNSdGwodCksdGhpcy5fcmVzaXplSGludD1lKCksdGhpcy5fbW92ZUhpbnQ9ZSgpLHRoaXMuX2NlbGxJZD1NLmd1aWQoKSx0aGlzLl9yZXNvdXJjZXNGb3JHcm91cHMoKSx0aGlzLl9zZWxlY3RlZFNsb3RzPVtdfSxfaXNNb2JpbGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnM7cmV0dXJuIGUubW9iaWxlPT09ITAmJk0uc3VwcG9ydC5tb2JpbGVPU3x8XCJwaG9uZVwiPT09ZS5tb2JpbGV8fFwidGFibGV0XCI9PT1lLm1vYmlsZX0sX2lzTW9iaWxlUGhvbmVWaWV3OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zO3JldHVybiBlLm1vYmlsZT09PSEwJiZNLnN1cHBvcnQubW9iaWxlT1MmJiFNLnN1cHBvcnQubW9iaWxlT1MudGFibGV0fHxcInBob25lXCI9PT1lLm1vYmlsZX0sX2FkZFJlc291cmNlVmlldzpmdW5jdGlvbigpe3ZhciBlPW5ldyB5KHRoaXMuZ3JvdXBzLmxlbmd0aCk7cmV0dXJuIHRoaXMuZ3JvdXBzLnB1c2goZSksZX0sZGF0ZUZvclRpdGxlOmZ1bmN0aW9uKCl7cmV0dXJuIE0uZm9ybWF0KHRoaXMub3B0aW9ucy5zZWxlY3RlZERhdGVGb3JtYXQsdGhpcy5zdGFydERhdGUoKSx0aGlzLmVuZERhdGUoKSl9LF9jaGFuZ2VHcm91cDpmdW5jdGlvbihlLHQpe3ZhciBuPXQ/XCJwcmV2R3JvdXBTbG90XCI6XCJuZXh0R3JvdXBTbG90XCIsaT10aGlzW25dKGUuc3RhcnQsZS5ncm91cEluZGV4LGUuaXNBbGxEYXkpO3JldHVybiBpJiYoZS5ncm91cEluZGV4Kz10Py0xOjEpLGl9LF9jaGFuZ2VHcm91cENvbnRpbnVvdXNseTpmdW5jdGlvbigpe3JldHVybiBudWxsfSxfY2hhbmdlVmlld1BlcmlvZDpmdW5jdGlvbigpe3JldHVybiExfSxfaG9yaXpvbnRhbFNsb3RzOmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLG8sYT1pP1wibGVmdFNsb3RcIjpcInJpZ2h0U2xvdFwiLHM9dFswXS5zdGFydCxsPXRbdC5sZW5ndGgtMV0uZW5kLGM9dGhpcy5ncm91cHNbZS5ncm91cEluZGV4XTtyZXR1cm4gbnx8KHI9dGhpcy5fbm9ybWFsaXplSG9yaXpvbnRhbFNlbGVjdGlvbihlLHQsaSksciYmKHM9bD1yKSkscz1jW2FdKHMpLGw9Y1thXShsKSxufHx0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCl8fHMmJmx8fChzPWw9dGhpcy5fY2hhbmdlR3JvdXAoZSxpKSkscyYmbHx8KG89dGhpcy5fY29udGludW91c1Nsb3QoZSx0LGkpLG89dGhpcy5fY2hhbmdlR3JvdXBDb250aW51b3VzbHkoZSxvLG4saSksbyYmKHM9bD1vKSkse3N0YXJ0U2xvdDpzLGVuZFNsb3Q6bH19LF92ZXJ0aWNhbFNsb3RzOmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLG8sYT10WzBdLnN0YXJ0LHM9dFt0Lmxlbmd0aC0xXS5lbmQsbD10aGlzLmdyb3Vwc1tlLmdyb3VwSW5kZXhdO3JldHVybiBufHwocj10aGlzLl9ub3JtYWxpemVWZXJ0aWNhbFNlbGVjdGlvbihlLHQsaSksciYmKGE9cz1yKSksbz1pP1widXBTbG90XCI6XCJkb3duU2xvdFwiLGE9bFtvXShhLG4pLHM9bFtvXShzLG4pLG58fCF0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCl8fGEmJnN8fChhPXM9dGhpcy5fY2hhbmdlR3JvdXAoZSxpKSkse3N0YXJ0U2xvdDphLGVuZFNsb3Q6c319LF9ub3JtYWxpemVIb3Jpem9udGFsU2VsZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LF9ub3JtYWxpemVWZXJ0aWNhbFNlbGVjdGlvbjpmdW5jdGlvbihlLHQsbil7dmFyIGk7cmV0dXJuIGk9bj90WzBdLnN0YXJ0OnRbdC5sZW5ndGgtMV0uZW5kfSxfY29udGludW91c1Nsb3Q6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sY29uc3RyYWluU2VsZWN0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5ncm91cHNbMF07dGhpcy5pblJhbmdlKGUpP24uZGF5U2xvdENvbGxlY3Rpb25Db3VudCgpfHwoZS5pc0FsbERheT0hMSk6KHQ9bi5maXJzdFNsb3QoKSxlLmlzQWxsRGF5PXQuaXNEYXlTbG90LGUuc3RhcnQ9dC5zdGFydERhdGUoKSxlLmVuZD10LmVuZERhdGUoKSksdGhpcy5ncm91cHNbZS5ncm91cEluZGV4XXx8KGUuZ3JvdXBJbmRleD0wKX0sbW92ZTpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGEscyxsLGM9ITEsZD10aGlzLmdyb3Vwc1tlLmdyb3VwSW5kZXhdO2lmKGQudGltZVNsb3RDb2xsZWN0aW9uQ291bnQoKXx8KGUuaXNBbGxEYXk9ITApLGk9ZC5yYW5nZXMoZS5zdGFydCxlLmVuZCxlLmlzQWxsRGF5LCExKSx0PT09ei5ET1dOfHx0PT09ei5VUCl7aWYoYz0hMCxhPXQ9PT16LlVQLHRoaXMuX3VwZGF0ZURpcmVjdGlvbihlLGksbixhLCEwKSxzPXRoaXMuX3ZlcnRpY2FsU2xvdHMoZSxpLG4sYSksIXMuc3RhcnRTbG90JiYhbiYmdGhpcy5fY2hhbmdlVmlld1BlcmlvZChlLGEsITApKXJldHVybiBjfWVsc2UgaWYoKHQ9PT16LkxFRlR8fHQ9PT16LlJJR0hUKSYmKGM9ITAsYT10PT09ei5MRUZULHRoaXMuX3VwZGF0ZURpcmVjdGlvbihlLGksbixhLCExKSxzPXRoaXMuX2hvcml6b250YWxTbG90cyhlLGksbixhKSwhcy5zdGFydFNsb3QmJiFuJiZ0aGlzLl9jaGFuZ2VWaWV3UGVyaW9kKGUsYSwhMSkpKXJldHVybiBjO3JldHVybiBjJiYocj1zLnN0YXJ0U2xvdCxvPXMuZW5kU2xvdCxuPyhsPWUuYmFja3dhcmQsbCYmcj9lLnN0YXJ0PXIuc3RhcnREYXRlKCk6IWwmJm8mJihlLmVuZD1vLmVuZERhdGUoKSkpOnImJm8mJihlLmlzQWxsRGF5PXIuaXNEYXlTbG90LGUuc3RhcnQ9ci5zdGFydERhdGUoKSxlLmVuZD1vLmVuZERhdGUoKSksZS5ldmVudHM9W10pLGN9LG1vdmVUb0V2ZW50SW5Hcm91cDpmdW5jdGlvbih0LG4saSxyKXtmb3IodmFyIG8sYSxzPXQuX2NvbnRpbnVvdXNFdmVudHN8fFtdLGw9cj8tMToxLGM9cy5sZW5ndGgsZD1yP2MtMTowO2M+ZCYmZD4tMTspe2lmKGE9c1tkXSwoIXImJmEuc3RhcnQuc3RhcnREYXRlKCk+PW4uc3RhcnREYXRlKCl8fHImJmEuc3RhcnQuc3RhcnREYXRlKCk8PW4uc3RhcnREYXRlKCkpJiYoaS5sZW5ndGgmJihhPXNbZCtsXSksYSYmLTE9PT1lLmluQXJyYXkoYS51aWQsaSkpKXtvPSEhYTticmVha31kKz1sfXJldHVybiBhfSxtb3ZlVG9FdmVudDpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixpPWUuZ3JvdXBJbmRleCxyPXRoaXMuZ3JvdXBzW2ldLG89ci5yYW5nZXMoZS5zdGFydCxlLmVuZCxlLmlzQWxsRGF5LCExKVswXS5zdGFydCxhPXRoaXMuZ3JvdXBzLmxlbmd0aCxzPXQ/LTE6MSxsPWUuZXZlbnRzO2E+aSYmaT4tMSYmKG49dGhpcy5tb3ZlVG9FdmVudEluR3JvdXAocixvLGwsdCksaSs9cyxyPXRoaXMuZ3JvdXBzW2ldLHImJiFuKTspbD1bXSxvPXQ/ci5sYXN0U2xvdCgpOnIuZmlyc3RTbG90KCEwKTtyZXR1cm4gbiYmKGUuZXZlbnRzPVtuLnVpZF0sZS5zdGFydD1uLnN0YXJ0LnN0YXJ0RGF0ZSgpLGUuZW5kPW4uZW5kLmVuZERhdGUoKSxlLmlzQWxsRGF5PW4uc3RhcnQuaXNEYXlTbG90LGUuZ3JvdXBJbmRleD1uLnN0YXJ0Lmdyb3VwSW5kZXgpLCEhbn0sY3VycmVudDpmdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZT90aGlzLl9jdXJyZW50Oih0aGlzLl9jdXJyZW50PWUsdm9pZCB0aGlzLl9zY3JvbGxUbyhlLHRoaXMuY29udGVudFswXSkpfSxzZWxlY3Q6ZnVuY3Rpb24oZSl7dGhpcy5jbGVhclNlbGVjdGlvbigpLHRoaXMuX3NlbGVjdEV2ZW50cyhlKXx8dGhpcy5fc2VsZWN0U2xvdHMoZSl9LF9zZWxlY3RTbG90czpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGEscyxsPWUuaXNBbGxEYXksYz10aGlzLmdyb3Vwc1tlLmdyb3VwSW5kZXhdO2ZvcihjLnRpbWVTbG90Q29sbGVjdGlvbkNvdW50KCl8fChsPSEwKSx0aGlzLl9zZWxlY3RlZFNsb3RzPVtdLHQ9Yy5yYW5nZXMoZS5zdGFydCxlLmVuZCxsLCExKSxyPTA7dC5sZW5ndGg+cjtyKyspZm9yKG89dFtyXSxhPW8uY29sbGVjdGlvbixzPW8uc3RhcnQuaW5kZXg7by5lbmQuaW5kZXg+PXM7cysrKWk9YS5hdChzKSxuPWkuZWxlbWVudCxuLnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiwhMCksXyhuKSx0aGlzLl9zZWxlY3RlZFNsb3RzLnB1c2goe3N0YXJ0Omkuc3RhcnREYXRlKCksZW5kOmkuZW5kRGF0ZSgpLGVsZW1lbnQ6bn0pO2UuYmFja3dhcmQmJihuPXRbMF0uc3RhcnQuZWxlbWVudCksdGhpcy5jdXJyZW50KG4pfSxfc2VsZWN0RXZlbnRzOmZ1bmN0aW9uKHQpe3ZhciBuLGkscj0hMSxvPXQuZXZlbnRzLGE9dGhpcy5ncm91cHNbdC5ncm91cEluZGV4XS5fY29udGludW91c0V2ZW50c3x8W10scz1hLmxlbmd0aDtpZighb1swXXx8IWFbMF0pcmV0dXJuIHI7Zm9yKGk9ZSgpLHQuZXZlbnRzPVtdLG49MDtzPm47bisrKWUuaW5BcnJheShhW25dLnVpZCxvKT4tMSYmKGk9aS5hZGQoYVtuXS5lbGVtZW50KSx0LmV2ZW50cy5wdXNoKGFbbl0udWlkKSk7cmV0dXJuIGlbMF0mJihpLmFkZENsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKSx0aGlzLmN1cnJlbnQoaS5sYXN0KClbMF0pLHRoaXMuX3NlbGVjdGVkU2xvdHM9W10scj0hMCkscn0saW5SYW5nZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnN0YXJ0RGF0ZSgpLG49TS5kYXRlLmFkZERheXModGhpcy5lbmREYXRlKCksMSksaT1lLnN0YXJ0LHI9ZS5lbmQ7cmV0dXJuIGk+PXQmJm4+aSYmcj50JiZuPj1yfSxfcmVzb3VyY2VWYWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLnZhbHVlUHJpbWl0aXZlJiYodD1NLmdldHRlcihlLmRhdGFWYWx1ZUZpZWxkKSh0KSksdH0sX3Jlc291cmNlQnlTbG90OmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYT10aGlzLmdyb3VwZWRSZXNvdXJjZXMscz17fTtpZihhLmxlbmd0aClmb3IodD1lLmdyb3VwSW5kZXgsbj1hLmxlbmd0aC0xO24+PTA7bi0tKWk9YVtuXSxyPXRoaXMuX3Jlc291cmNlVmFsdWUoaSxpLmRhdGFTb3VyY2UudmlldygpW3QlaS5kYXRhU291cmNlLnRvdGFsKCldKSxpLm11bHRpcGxlJiYocj1bcl0pLG89TS5zZXR0ZXIoaS5maWVsZCksbyhzLHIpLHQ9TWF0aC5mbG9vcih0L2kuZGF0YVNvdXJjZS50b3RhbCgpKTtyZXR1cm4gc30sX2NyZWF0ZVJlc2l6ZUhpbnQ6ZnVuY3Rpb24odCxuLGkscil7cmV0dXJuIGUoQikuY3NzKHtsZWZ0OnQsdG9wOm4sd2lkdGg6aSxoZWlnaHQ6cn0pfSxfcmVtb3ZlUmVzaXplSGludDpmdW5jdGlvbigpe3RoaXMuX3Jlc2l6ZUhpbnQucmVtb3ZlKCksdGhpcy5fcmVzaXplSGludD1lKCl9LF9yZW1vdmVNb3ZlSGludDpmdW5jdGlvbigpe3RoaXMuX21vdmVIaW50LnJlbW92ZSgpLHRoaXMuX21vdmVIaW50PWUoKX0sX3Njcm9sbFRvOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5vZmZzZXRUb3AsaT1lLm9mZnNldEhlaWdodCxyPXQuc2Nyb2xsVG9wLG89dC5jbGllbnRIZWlnaHQsYT1uK2kscz0wO3M9cj5uP246YT5yK28/bz49aT9hLW86bjpyLHQuc2Nyb2xsVG9wPXN9LF9zaG91bGRJbnZlcnNlUmVzb3VyY2VDb2xvcjpmdW5jdGlvbihlKXt2YXIgdD1uZXcgQShlLmNvbG9yKS5pc0RhcmsoKSxuPXRoaXMuZWxlbWVudC5jc3MoXCJjb2xvclwiKSxpPW5ldyBBKG4pLmlzRGFyaygpO3JldHVybiB0PT1pfSxfZXZlbnRUbXBsOmZ1bmN0aW9uKHQsbil7dmFyIGkscj10aGlzLm9wdGlvbnMsbz1lLmV4dGVuZCh7fSxNLlRlbXBsYXRlLHIudGVtcGxhdGVTZXR0aW5ncyksYT1vLnBhcmFtTmFtZSxzPVwiXCIsbD10eXBlb2YgdCxjPXtzdG9yYWdlOnt9LGNvdW50OjB9O3JldHVyblwiZnVuY3Rpb25cIj09PWw/KGMuc3RvcmFnZVtcInRtcGxcIitjLmNvdW50XT10LHMrPVwiIz10aGlzLnRtcGxcIitjLmNvdW50K1wiKFwiK2ErXCIpI1wiLGMuY291bnQrKyk6XCJzdHJpbmdcIj09PWwmJihzKz10KSxpPU0udGVtcGxhdGUoTS5mb3JtYXQobixzKSxvKSxjLmNvdW50PjAmJihpPWUucHJveHkoaSxjLnN0b3JhZ2UpKSxpfSxldmVudFJlc291cmNlczpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGEscyxsLGMsZCx1PVtdLGg9dGhpcy5vcHRpb25zO2lmKCFoLnJlc291cmNlcylyZXR1cm4gdTtmb3IodD0wO2gucmVzb3VyY2VzLmxlbmd0aD50O3QrKylpZihuPWgucmVzb3VyY2VzW3RdLGk9bi5maWVsZCxyPU0uZ2V0dGVyKGkpKGUpKWZvcihuLm11bHRpcGxlfHwocj1bcl0pLG89bi5kYXRhU291cmNlLnZpZXcoKSxhPTA7ci5sZW5ndGg+YTthKyspe2ZvcihzPW51bGwsbD1yW2FdLG4udmFsdWVQcmltaXRpdmV8fChsPU0uZ2V0dGVyKG4uZGF0YVZhbHVlRmllbGQpKGwpKSxjPTA7by5sZW5ndGg+YztjKyspaWYob1tjXS5nZXQobi5kYXRhVmFsdWVGaWVsZCk9PWwpe3M9b1tjXTticmVha31udWxsIT09cyYmKGQ9TS5nZXR0ZXIobi5kYXRhQ29sb3JGaWVsZCkocyksdS5wdXNoKHtmaWVsZDpuLmZpZWxkLHRpdGxlOm4udGl0bGUsbmFtZTpuLm5hbWUsdGV4dDpNLmdldHRlcihuLmRhdGFUZXh0RmllbGQpKHMpLHZhbHVlOmwsY29sb3I6ZH0pKX1yZXR1cm4gdX0sY3JlYXRlTGF5b3V0OmZ1bmN0aW9uKGkpe3ZhciByLG8sYSxzLGwsYz0tMTtmb3IoaS5yb3dzfHwoaS5yb3dzPVtdKSxyPTA7aS5yb3dzLmxlbmd0aD5yO3IrKylpZihpLnJvd3Nbcl0uYWxsRGF5KXtjPXI7YnJlYWt9bz1pLnJvd3NbY10sYz49MCYmaS5yb3dzLnNwbGljZShjLDEpLGE9dGhpcy5jb2x1bW5MZXZlbHM9dChpLFwiY29sdW1uc1wiKSxzPXRoaXMucm93TGV2ZWxzPXQoaSxcInJvd3NcIiksdGhpcy50YWJsZT1lKFwiPHRhYmxlIFwiK24oKSsnIGNsYXNzPVwiay1zY2hlZHVsZXItbGF5b3V0IGstc2NoZWR1bGVyLScrdGhpcy5uYW1lKyd2aWV3XCIvPicpLGw9c1tzLmxlbmd0aC0xXS5sZW5ndGgsdGhpcy50YWJsZS5hcHBlbmQodGhpcy5fdG9wU2VjdGlvbihhLG8sbCkpLHRoaXMudGFibGUuYXBwZW5kKHRoaXMuX2JvdHRvbVNlY3Rpb24oYSxzLGwpKSx0aGlzLmVsZW1lbnQuYXBwZW5kKHRoaXMudGFibGUpLHRoaXMuX3Njcm9sbGVyKCl9LHJlZnJlc2hMYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscixvLGEscz10aGlzLGw9cy5lbGVtZW50LmZpbmQoXCI+Lmstc2NoZWR1bGVyLXRvb2xiYXJcIiksYz1zLmVsZW1lbnQuaW5uZXJIZWlnaHQoKSxkPXRoaXMuX3Njcm9sbGJhcix1PTAsaD10aGlzLl9pc1J0bD9cImxlZnRcIjpcInJpZ2h0XCI7Zm9yKHQ9MDtsLmxlbmd0aD50O3QrKyljLT1sLmVxKHQpLm91dGVySGVpZ2h0KCk7cy5kYXRlc0hlYWRlciYmKHU9cy5kYXRlc0hlYWRlci5vdXRlckhlaWdodCgpKSxzLnRpbWVzSGVhZGVyJiZzLnRpbWVzSGVhZGVyLm91dGVySGVpZ2h0KCk+dSYmKHU9cy50aW1lc0hlYWRlci5vdXRlckhlaWdodCgpKSxzLmRhdGVzSGVhZGVyJiZzLnRpbWVzSGVhZGVyJiYobj1zLmRhdGVzSGVhZGVyLmZpbmQoXCJ0YWJsZTpmaXJzdCB0clwiKSxzLnRpbWVzSGVhZGVyLmZpbmQoXCJ0clwiKS5oZWlnaHQoZnVuY3Rpb24odCl7ZSh0aGlzKS5oZWlnaHQobi5lcSh0KS5oZWlnaHQoKSl9KSksdSYmKGMtPXUpLHMuZm9vdGVyJiYoYy09cy5mb290ZXIub3V0ZXJIZWlnaHQoKSksaT1mdW5jdGlvbihlKXt2YXIgdCxuO3JldHVybiBlWzBdLnN0eWxlLmhlaWdodD8hMDoodD1lLmhlaWdodCgpLGUuaGVpZ2h0KFwiYXV0b1wiKSxuPWUuaGVpZ2h0KCksdCE9bj8oZS5oZWlnaHQoXCJcIiksITApOihlLmhlaWdodChcIlwiKSwhMSkpfSxyPXMuY29udGVudFswXSxvPU0uc3VwcG9ydC5raW5ldGljU2Nyb2xsTmVlZGVkPzA6ZCxpKHMuZWxlbWVudCkmJihzLmNvbnRlbnQuaGVpZ2h0KGM+MipkP2M6MipkKzEpLHMudGltZXMuaGVpZ2h0KHIuY2xpZW50SGVpZ2h0KSxhPXMudGltZXMuZmluZChcInRhYmxlXCIpLGEubGVuZ3RoJiZhLmhlaWdodChzLmNvbnRlbnQuZmluZChcInRhYmxlXCIpWzBdLmNsaWVudEhlaWdodCkpLHIub2Zmc2V0V2lkdGgtci5jbGllbnRXaWR0aD4wPyhzLnRhYmxlLmFkZENsYXNzKFwiay1zY3JvbGxiYXItdlwiKSxzLmRhdGVzSGVhZGVyLmNzcyhcInBhZGRpbmctXCIraCxvLXBhcnNlSW50KHMuZGF0ZXNIZWFkZXIuY2hpbGRyZW4oKS5jc3MoXCJib3JkZXItXCIraCtcIi13aWR0aFwiKSwxMCkpKTpzLmRhdGVzSGVhZGVyLmNzcyhcInBhZGRpbmctXCIraCxcIlwiKSxyLm9mZnNldEhlaWdodC1yLmNsaWVudEhlaWdodD4wfHxyLmNsaWVudEhlaWdodD5zLmNvbnRlbnQuY2hpbGRyZW4oXCIuay1zY2hlZHVsZXItdGFibGVcIikuaGVpZ2h0KCk/cy50YWJsZS5hZGRDbGFzcyhcImstc2Nyb2xsYmFyLWhcIik6cy50YWJsZS5yZW1vdmVDbGFzcyhcImstc2Nyb2xsYmFyLWhcIil9LF90b3BTZWN0aW9uOmZ1bmN0aW9uKHQsbixpKXt0aGlzLnRpbWVzSGVhZGVyPW8odC5sZW5ndGgsbixpKTt2YXIgcj10W3QubGVuZ3RoLTFdLmxlbmd0aDtyZXR1cm4gdGhpcy5kYXRlc0hlYWRlcj1hKHQscixuKSxlKFwiPHRyPlwiKS5hcHBlbmQodGhpcy50aW1lc0hlYWRlci5hZGQodGhpcy5kYXRlc0hlYWRlcikud3JhcChcIjx0ZD5cIikucGFyZW50KCkpXG59LF9ib3R0b21TZWN0aW9uOmZ1bmN0aW9uKHQsbixpKXtyZXR1cm4gdGhpcy50aW1lcz1zKG4saSksdGhpcy5jb250ZW50PWwodFt0Lmxlbmd0aC0xXSxuW24ubGVuZ3RoLTFdKSxlKFwiPHRyPlwiKS5hcHBlbmQodGhpcy50aW1lcy5hZGQodGhpcy5jb250ZW50KS53cmFwKFwiPHRkPlwiKS5wYXJlbnQoKSl9LF9zY3JvbGxlcjpmdW5jdGlvbigpe3ZhciB0LG49dGhpczt0aGlzLmNvbnRlbnQuYmluZChcInNjcm9sbFwiK0YsZnVuY3Rpb24oKXtuLmRhdGVzSGVhZGVyLmZpbmQoXCI+Lmstc2NoZWR1bGVyLWhlYWRlci13cmFwXCIpLnNjcm9sbExlZnQodGhpcy5zY3JvbGxMZWZ0KSxuLnRpbWVzLnNjcm9sbFRvcCh0aGlzLnNjcm9sbFRvcCl9KSx0PU0udG91Y2hTY3JvbGxlcih0aGlzLmNvbnRlbnQse2F2b2lkU2Nyb2xsaW5nOmZ1bmN0aW9uKHQpe3JldHVybiBlKHQuZXZlbnQudGFyZ2V0KS5jbG9zZXN0KFwiLmstZXZlbnQuay1ldmVudC1hY3RpdmVcIikubGVuZ3RoPjB9fSksdCYmdC5tb3ZhYmxlJiYodGhpcy5fdG91Y2hTY3JvbGxlcj10LHRoaXMuY29udGVudD10LnNjcm9sbEVsZW1lbnQsdC5tb3ZhYmxlLmJpbmQoXCJjaGFuZ2VcIixmdW5jdGlvbihlKXtuLmRhdGVzSGVhZGVyLmZpbmQoXCI+Lmstc2NoZWR1bGVyLWhlYWRlci13cmFwXCIpLnNjcm9sbExlZnQoLWUuc2VuZGVyLngpLG4udGltZXMuc2Nyb2xsVG9wKC1lLnNlbmRlci55KX0pKX0sX3Jlc291cmNlc0Zvckdyb3VwczpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHI9W10sbz10aGlzLm9wdGlvbnMuZ3JvdXAsYT10aGlzLm9wdGlvbnMucmVzb3VyY2VzO2lmKG89byYmby5yZXNvdXJjZXM/by5yZXNvdXJjZXM6W10sYSYmby5sZW5ndGgpZm9yKGU9MCx0PWEubGVuZ3RoO3Q+ZTtlKyspZm9yKG49MCxpPW8ubGVuZ3RoO2k+bjtuKyspYVtlXS5uYW1lPT09b1tuXSYmci5wdXNoKGFbZV0pO3RoaXMuZ3JvdXBlZFJlc291cmNlcz1yfSxfY3JlYXRlQ29sdW1uc0xheW91dDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIG0oXCJjb2x1bW5zXCIsZSx0LG4pfSxfZ3JvdXBPcmllbnRhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5ncm91cDtyZXR1cm4gZSYmZS5yZXNvdXJjZXM/ZS5vcmllbnRhdGlvbjpcImhvcml6b250YWxcIn0sX2lzVmVydGljYWxseUdyb3VwZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ncm91cGVkUmVzb3VyY2VzLmxlbmd0aCYmXCJ2ZXJ0aWNhbFwiPT09dGhpcy5fZ3JvdXBPcmllbnRhdGlvbigpfSxfY3JlYXRlUm93c0xheW91dDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIG0oXCJyb3dzXCIsZSx0LG4pfSxzZWxlY3Rpb25CeUVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sY2xlYXJTZWxlY3Rpb246ZnVuY3Rpb24oKXt0aGlzLmNvbnRlbnQuZmluZChcIi5rLXN0YXRlLXNlbGVjdGVkXCIpLnJlbW92ZUF0dHIoXCJpZFwiKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCExKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO0kuZm4uZGVzdHJveS5jYWxsKHRoaXMpLGUudGFibGUmJihNLmRlc3Ryb3koZS50YWJsZSksZS50YWJsZS5yZW1vdmUoKSksZS5ncm91cHM9bnVsbCxlLnRhYmxlPW51bGwsZS5jb250ZW50PW51bGwsZS50aW1lcz1udWxsLGUuZGF0ZXNIZWFkZXI9bnVsbCxlLnRpbWVzSGVhZGVyPW51bGwsZS5mb290ZXI9bnVsbCxlLl9yZXNpemVIaW50PW51bGwsZS5fbW92ZUhpbnQ9bnVsbH0sY2FsZW5kYXJJbmZvOmZ1bmN0aW9uKCl7cmV0dXJuIE0uZ2V0Q3VsdHVyZSgpLmNhbGVuZGFycy5zdGFuZGFyZH0scHJldkdyb3VwU2xvdDpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzLmdyb3Vwc1t0XSxvPXIucmFuZ2VzKGUsZSxuLCExKVswXS5zdGFydDtpZighKDA+PXQpKXJldHVybiB0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCk/ci50aW1lU2xvdENvbGxlY3Rpb25Db3VudCgpPyhpPXIuX2NvbGxlY3Rpb24obj9vLmluZGV4Om8uY29sbGVjdGlvbkluZGV4LCExKSxpLmxhc3QoKSk6KGk9ci5fY29sbGVjdGlvbihyLmRheVNsb3RDb2xsZWN0aW9uQ291bnQoKS0xLCEwKSxpLmF0KG8uaW5kZXgpKTpyLnRpbWVTbG90Q29sbGVjdGlvbkNvdW50KCk/KGk9ci5fY29sbGVjdGlvbihuPzA6ci50aW1lU2xvdENvbGxlY3Rpb25Db3VudCgpLTEsbiksbj9pLmxhc3QoKTppLmF0KG8uaW5kZXgpKTooaT1yLl9jb2xsZWN0aW9uKG8uY29sbGVjdGlvbkluZGV4LCEwKSxpLmxhc3QoKSl9LG5leHRHcm91cFNsb3Q6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbz10aGlzLmdyb3Vwc1t0XSxhPW8ucmFuZ2VzKGUsZSxuLCExKVswXS5zdGFydDtpZighKHQ+PXRoaXMuZ3JvdXBzLmxlbmd0aC0xKSlyZXR1cm4gdGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpP28udGltZVNsb3RDb2xsZWN0aW9uQ291bnQoKT8ocj1vLmRheVNsb3RDb2xsZWN0aW9uQ291bnQoKSxpPW8uX2NvbGxlY3Rpb24ocj8wOmEuY29sbGVjdGlvbkluZGV4LHIpLG4/aS5maXJzdCgpOmkuYXQoYS5jb2xsZWN0aW9uSW5kZXgpKTooaT1vLl9jb2xsZWN0aW9uKDAsITApLGkuYXQoYS5pbmRleCkpOm8udGltZVNsb3RDb2xsZWN0aW9uQ291bnQoKT8oaT1vLl9jb2xsZWN0aW9uKDAsbiksbj9pLmZpcnN0KCk6aS5hdChhLmluZGV4KSk6KGk9by5fY29sbGVjdGlvbihhLmNvbGxlY3Rpb25JbmRleCwhMCksaS5maXJzdCgpKX0sX3VwZGF0ZUV2ZW50Rm9yTW92ZTpmdW5jdGlvbigpe30sX3VwZGF0ZUV2ZW50Rm9yUmVzaXplOmZ1bmN0aW9uKCl7fSxfdXBkYXRlRXZlbnRGb3JTZWxlY3Rpb246ZnVuY3Rpb24oZSl7cmV0dXJuIGV9fSksQT1mdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGE9dGhpcyxzPUEuZm9ybWF0cztpZigxPT09YXJndW1lbnRzLmxlbmd0aClmb3IoZT1hLnJlc29sdmVDb2xvcihlKSxyPTA7cy5sZW5ndGg+cjtyKyspdD1zW3JdLnJlLG49c1tyXS5wcm9jZXNzLGk9dC5leGVjKGUpLGkmJihvPW4oaSksYS5yPW9bMF0sYS5nPW9bMV0sYS5iPW9bMl0pO2Vsc2UgYS5yPWFyZ3VtZW50c1swXSxhLmc9YXJndW1lbnRzWzFdLGEuYj1hcmd1bWVudHNbMl07YS5yPWEubm9ybWFsaXplQnl0ZShhLnIpLGEuZz1hLm5vcm1hbGl6ZUJ5dGUoYS5nKSxhLmI9YS5ub3JtYWxpemVCeXRlKGEuYil9LEEucHJvdG90eXBlPXtyZXNvbHZlQ29sb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZXx8XCIjMDAwXCIsXCIjXCI9PWUuY2hhckF0KDApJiYoZT1lLnN1YnN0cigxLDYpKSxlPWUucmVwbGFjZSgvIC9nLFwiXCIpLGU9ZS50b0xvd2VyQ2FzZSgpLGU9QS5uYW1lZENvbG9yc1tlXXx8ZX0sbm9ybWFsaXplQnl0ZTpmdW5jdGlvbihlKXtyZXR1cm4gMD5lfHxpc05hTihlKT8wOmU+MjU1PzI1NTplfSxwZXJjQnJpZ2h0bmVzczpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIFIuc3FydCguMjQxKmUuciplLnIrLjY5MSplLmcqZS5nKy4wNjgqZS5iKmUuYil9LGlzRGFyazpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLnBlcmNCcmlnaHRuZXNzKCk7cmV0dXJuIDE4MD50fX0sQS5mb3JtYXRzPVt7cmU6L15yZ2JcXCgoXFxkezEsM30pLFxccyooXFxkezEsM30pLFxccyooXFxkezEsM30pXFwpJC8scHJvY2VzczpmdW5jdGlvbihlKXtyZXR1cm5bcGFyc2VJbnQoZVsxXSwxMCkscGFyc2VJbnQoZVsyXSwxMCkscGFyc2VJbnQoZVszXSwxMCldfX0se3JlOi9eKFxcd3syfSkoXFx3ezJ9KShcXHd7Mn0pJC8scHJvY2VzczpmdW5jdGlvbihlKXtyZXR1cm5bcGFyc2VJbnQoZVsxXSwxNikscGFyc2VJbnQoZVsyXSwxNikscGFyc2VJbnQoZVszXSwxNildfX0se3JlOi9eKFxcd3sxfSkoXFx3ezF9KShcXHd7MX0pJC8scHJvY2VzczpmdW5jdGlvbihlKXtyZXR1cm5bcGFyc2VJbnQoZVsxXStlWzFdLDE2KSxwYXJzZUludChlWzJdK2VbMl0sMTYpLHBhcnNlSW50KGVbM10rZVszXSwxNildfX1dLEEubmFtZWRDb2xvcnM9e2FxdWE6XCIwMGZmZmZcIixhenVyZTpcImYwZmZmZlwiLGJlaWdlOlwiZjVmNWRjXCIsYmxhY2s6XCIwMDAwMDBcIixibHVlOlwiMDAwMGZmXCIsYnJvd246XCJhNTJhMmFcIixjb3JhbDpcImZmN2Y1MFwiLGN5YW46XCIwMGZmZmZcIixkYXJrYmx1ZTpcIjAwMDA4YlwiLGRhcmtjeWFuOlwiMDA4YjhiXCIsZGFya2dyYXk6XCJhOWE5YTlcIixkYXJrZ3JlZW46XCIwMDY0MDBcIixkYXJrb3JhbmdlOlwiZmY4YzAwXCIsZGFya3JlZDpcIjhiMDAwMFwiLGRpbWdyYXk6XCI2OTY5NjlcIixmdWNoc2lhOlwiZmYwMGZmXCIsZ29sZDpcImZmZDcwMFwiLGdvbGRlbnJvZDpcImRhYTUyMFwiLGdyYXk6XCI4MDgwODBcIixncmVlbjpcIjAwODAwMFwiLGdyZWVueWVsbG93OlwiYWRmZjJmXCIsaW5kaWdvOlwiNGIwMDgyXCIsaXZvcnk6XCJmZmZmZjBcIixraGFraTpcImYwZTY4Y1wiLGxpZ2h0Ymx1ZTpcImFkZDhlNlwiLGxpZ2h0Z3JleTpcImQzZDNkM1wiLGxpZ2h0Z3JlZW46XCI5MGVlOTBcIixsaWdodHBpbms6XCJmZmI2YzFcIixsaWdodHllbGxvdzpcImZmZmZlMFwiLGxpbWU6XCIwMGZmMDBcIixsaW1lZ3JlZW46XCIzMmNkMzJcIixsaW5lbjpcImZhZjBlNlwiLG1hZ2VudGE6XCJmZjAwZmZcIixtYXJvb246XCI4MDAwMDBcIixtZWRpdW1ibHVlOlwiMDAwMGNkXCIsbmF2eTpcIjAwMDA4MFwiLG9saXZlOlwiODA4MDAwXCIsb3JhbmdlOlwiZmZhNTAwXCIsb3JhbmdlcmVkOlwiZmY0NTAwXCIsb3JjaGlkOlwiZGE3MGQ2XCIscGluazpcImZmYzBjYlwiLHBsdW06XCJkZGEwZGRcIixwdXJwbGU6XCI4MDAwODBcIixyZWQ6XCJmZjAwMDBcIixyb3lhbGJsdWU6XCI0MTY5ZTFcIixzYWxtb246XCJmYTgwNzJcIixzaWx2ZXI6XCJjMGMwYzBcIixza3libHVlOlwiODdjZWViXCIsc2xhdGVibHVlOlwiNmE1YWNkXCIsc2xhdGVncmF5OlwiNzA4MDkwXCIsc25vdzpcImZmZmFmYVwiLHN0ZWVsYmx1ZTpcIjQ2ODJiNFwiLHRhbjpcImQyYjQ4Y1wiLHRlYWw6XCIwMDgwODBcIix0b21hdG86XCJmZjYzNDdcIix0dXJxdW9pc2U6XCI0MGUwZDBcIix2aW9sZXQ6XCJlZTgyZWVcIix3aGVhdDpcImY1ZGViM1wiLHdoaXRlOlwiZmZmZmZmXCIsd2hpdGVzbW9rZTpcImY1ZjVmNVwiLHllbGxvdzpcImZmZmYwMFwiLHllbGxvd2dyZWVuOlwiOWFjZDMyXCJ9LEU9L1xccyprLXN0YXRlLXNlbGVjdGVkLyxlLmV4dGVuZChQLlNjaGVkdWxlclZpZXcse2NyZWF0ZUNvbHVtbnM6cCxjcmVhdGVSb3dzOmYscmFuZ2VJbmRleDp1LGNvbGxpZGluZ0V2ZW50czpkLGdyb3VwRXFGaWx0ZXI6dn0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7dmFyIHQ9bmV3IERhdGUoMTk4MCwxLDEsMCwwLDApO3JldHVybiBjKHQsbShlKSksdH1mdW5jdGlvbiBpKGUsdCxuKXtyZXR1cm4gZT49dCYmbj49ZX1mdW5jdGlvbiByKGUsdCxuLGkpe3JldHVybiBpPWk/bj49ZTpuPmUsZT50JiZpfWZ1bmN0aW9uIG8oZSx0LG4saSl7dmFyIHIsbz1lLl9jb250aW51b3VzRXZlbnRzLGE9b1tvLmxlbmd0aC0xXSxsPXAodC5zdGFydC5zdGFydERhdGUoKSkuZ2V0VGltZSgpO2lmKGkmJmEmJnAoYS5zdGFydC5zdGFydERhdGUoKSkuZ2V0VGltZSgpPT1sKXtmb3Iocj1vLmxlbmd0aC0xO3I+LTEmJiEob1tyXS5pc0FsbERheXx8cChvW3JdLnN0YXJ0LnN0YXJ0RGF0ZSgpKS5nZXRUaW1lKCk8bCk7ci0tKTtvLnNwbGljZShyKzEsMCx7ZWxlbWVudDpuLGlzQWxsRGF5OiEwLHVpZDpuLmF0dHIocy5hdHRyKFwidWlkXCIpKSxzdGFydDp0LnN0YXJ0LGVuZDp0LmVuZH0pfWVsc2Ugby5wdXNoKHtlbGVtZW50Om4saXNBbGxEYXk6aSx1aWQ6bi5hdHRyKHMuYXR0cihcInVpZFwiKSksc3RhcnQ6dC5zdGFydCxlbmQ6dC5lbmR9KX1mdW5jdGlvbiBhKGUpe3ZhciB0PVtdLG49ZS53b3JrV2Vla1N0YXJ0O2Zvcih0LnB1c2gobik7ZS53b3JrV2Vla0VuZCE9bjspbj42P24tPTc6bisrLHQucHVzaChuKTtyZXR1cm4gdH12YXIgcz13aW5kb3cua2VuZG8sbD1zLnVpLGM9cy5kYXRlLnNldFRpbWUsZD1sLlNjaGVkdWxlclZpZXcsdT1lLmV4dGVuZCxoPWUucHJveHkscD1zLmRhdGUuZ2V0RGF0ZSxmPXMuZGF0ZS5NU19QRVJfTUlOVVRFLGc9cy5kYXRlLk1TX1BFUl9EQVksbT1zLmRhdGUuZ2V0TWlsbGlzZWNvbmRzLHY9XCIua2VuZG9NdWx0aURheVZpZXdcIixfPXMudGVtcGxhdGUoJzxkaXYgdGl0bGU9XCIoIz1rZW5kby5mb3JtYXQoXCJ7MDp0fSAtIHsxOnR9XCIsIHN0YXJ0LCBlbmQpIyk6ICM9dGl0bGUucmVwbGFjZSgvXCIvZyxcIiZcXFxcIzM0O1wiKSNcIj48ZGl2IGNsYXNzPVwiay1ldmVudC10ZW1wbGF0ZSBrLWV2ZW50LXRpbWVcIj4jOmtlbmRvLmZvcm1hdChcInswOnR9IC0gezE6dH1cIiwgc3RhcnQsIGVuZCkjPC9kaXY+PGRpdiBjbGFzcz1cImstZXZlbnQtdGVtcGxhdGVcIj4ke3RpdGxlfTwvZGl2PjwvZGl2PicpLHk9cy50ZW1wbGF0ZSgnPGRpdiB0aXRsZT1cIigjPWtlbmRvLmZvcm1hdChcInswOnR9XCIsIHN0YXJ0KSMpOiAjPXRpdGxlLnJlcGxhY2UoL1wiL2csXCImXFxcXCMzNDtcIikjXCI+PGRpdiBjbGFzcz1cImstZXZlbnQtdGVtcGxhdGVcIj4ke3RpdGxlfTwvZGl2PjwvZGl2PicpLHc9cy50ZW1wbGF0ZShcIjxzcGFuIGNsYXNzPSdrLWxpbmsgay1uYXYtZGF5Jz4jPWtlbmRvLnRvU3RyaW5nKGRhdGUsICdkZGQgTS9kZCcpIzwvc3Bhbj5cIiksYj0nPGRpdiByb2xlPVwiZ3JpZGNlbGxcIiBhcmlhLXNlbGVjdGVkPVwiZmFsc2VcIiBkYXRhLSM9bnMjdWlkPVwiIz11aWQjXCIjaWYgKHJlc291cmNlc1swXSkgeyAjc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiM9cmVzb3VyY2VzWzBdLmNvbG9yIzsgYm9yZGVyLWNvbG9yOiAjPXJlc291cmNlc1swXS5jb2xvciNcImNsYXNzPVwiay1ldmVudCM9aW52ZXJzZUNvbG9yID8gXCIgay1ldmVudC1pbnZlcnNlXCIgOiBcIlwiI1wiICN9IGVsc2UgeyNjbGFzcz1cImstZXZlbnRcIiN9Iz48c3BhbiBjbGFzcz1cImstZXZlbnQtYWN0aW9uc1wiPiMgaWYoZGF0YS50YWlsIHx8IGRhdGEubWlkZGxlKSB7IzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy13XCI+PC9zcGFuPiN9IyMgaWYoZGF0YS5pc0V4Y2VwdGlvbigpKSB7IzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1leGNlcHRpb25cIj48L3NwYW4+IyB9IGVsc2UgaWYoZGF0YS5pc1JlY3VycmluZygpKSB7IzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1yZWZyZXNoXCI+PC9zcGFuPiMgfSAjPC9zcGFuPnswfTxzcGFuIGNsYXNzPVwiay1ldmVudC1hY3Rpb25zXCI+I2lmIChzaG93RGVsZXRlKSB7IzxhIGhyZWY9XCJcXFxcI1wiIGNsYXNzPVwiay1saW5rIGstZXZlbnQtZGVsZXRlXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1zaS1jbG9zZVwiPjwvc3Bhbj48L2E+I30jIyBpZihkYXRhLmhlYWQgfHwgZGF0YS5taWRkbGUpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LWVcIj48L3NwYW4+I30jPC9zcGFuPiNpZihyZXNpemFibGUgJiYgIXNpbmdsZURheSAmJiAhZGF0YS50YWlsICYmICFkYXRhLm1pZGRsZSl7IzxzcGFuIGNsYXNzPVwiay1yZXNpemUtaGFuZGxlIGstcmVzaXplLXdcIj48L3NwYW4+I30jI2lmKHJlc2l6YWJsZSAmJiAhc2luZ2xlRGF5ICYmICFkYXRhLmhlYWQgJiYgIWRhdGEubWlkZGxlKXsjPHNwYW4gY2xhc3M9XCJrLXJlc2l6ZS1oYW5kbGUgay1yZXNpemUtZVwiPjwvc3Bhbj4jfSM8L2Rpdj4nLGs9JzxkaXYgcm9sZT1cImdyaWRjZWxsXCIgYXJpYS1zZWxlY3RlZD1cImZhbHNlXCIgZGF0YS0jPW5zI3VpZD1cIiM9dWlkI1wiICNpZiAocmVzb3VyY2VzWzBdKSB7ICNzdHlsZT1cImJhY2tncm91bmQtY29sb3I6Iz1yZXNvdXJjZXNbMF0uY29sb3IgIzsgYm9yZGVyLWNvbG9yOiAjPXJlc291cmNlc1swXS5jb2xvciNcImNsYXNzPVwiay1ldmVudCM9aW52ZXJzZUNvbG9yID8gXCIgay1ldmVudC1pbnZlcnNlXCIgOiBcIlwiI1wiI30gZWxzZSB7I2NsYXNzPVwiay1ldmVudFwiI30jPjxzcGFuIGNsYXNzPVwiay1ldmVudC1hY3Rpb25zXCI+IyBpZihkYXRhLmlzRXhjZXB0aW9uKCkpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWV4Y2VwdGlvblwiPjwvc3Bhbj4jIH0gZWxzZSBpZihkYXRhLmlzUmVjdXJyaW5nKCkpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLXJlZnJlc2hcIj48L3NwYW4+IyB9ICM8L3NwYW4+ezB9PHNwYW4gY2xhc3M9XCJrLWV2ZW50LWFjdGlvbnNcIj4jaWYgKHNob3dEZWxldGUpIHsjPGEgaHJlZj1cIlxcXFwjXCIgY2xhc3M9XCJrLWxpbmsgay1ldmVudC1kZWxldGVcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLXNpLWNsb3NlXCI+PC9zcGFuPjwvYT4jfSM8L3NwYW4+PHNwYW4gY2xhc3M9XCJrLWV2ZW50LXRvcC1hY3Rpb25zXCI+IyBpZihkYXRhLnRhaWwgfHwgZGF0YS5taWRkbGUpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LW5cIj48L3NwYW4+IyB9ICM8L3NwYW4+PHNwYW4gY2xhc3M9XCJrLWV2ZW50LWJvdHRvbS1hY3Rpb25zXCI+IyBpZihkYXRhLmhlYWQgfHwgZGF0YS5taWRkbGUpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LXNcIj48L3NwYW4+IyB9ICM8L3NwYW4+IyBpZihyZXNpemFibGUgJiYgIWRhdGEudGFpbCAmJiAhZGF0YS5taWRkbGUpIHsjPHNwYW4gY2xhc3M9XCJrLXJlc2l6ZS1oYW5kbGUgay1yZXNpemUtblwiPjwvc3Bhbj4jIH0gIyMgaWYocmVzaXphYmxlICYmICFkYXRhLmhlYWQgJiYgIWRhdGEubWlkZGxlKSB7IzxzcGFuIGNsYXNzPVwiay1yZXNpemUtaGFuZGxlIGstcmVzaXplLXNcIj48L3NwYW4+IyB9ICM8L2Rpdj4nLHg9ZC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO2QuZm4uaW5pdC5jYWxsKG4sZSx0KSxuLnRpdGxlPW4ub3B0aW9ucy50aXRsZXx8bi5vcHRpb25zLm5hbWUsbi5fd29ya0RheXM9YShuLm9wdGlvbnMpLG4uX3RlbXBsYXRlcygpLG4uX2VkaXRhYmxlKCksbi5jYWxjdWxhdGVEYXRlUmFuZ2UoKSxuLl9ncm91cHMoKSxuLl9jdXJyZW50VGltZSgpfSxfY3VycmVudFRpbWVNYXJrZXJVcGRhdGVyOmZ1bmN0aW9uKCl7dmFyIHQsbixpLHIsbyxhLGwsYyxkLHUsaD1uZXcgRGF0ZSxwPXRoaXMub3B0aW9ucztmb3IocC5jdXJyZW50VGltZU1hcmtlci51c2VMb2NhbFRpbWV6b25lPT09ITEmJih0PXAuZGF0YVNvdXJjZS5vcHRpb25zLnNjaGVtYS50aW1lem9uZSxwLmRhdGFTb3VyY2UmJnQmJihuPXMudGltZXpvbmUub2Zmc2V0KGgsdCksaD1zLnRpbWV6b25lLmNvbnZlcnQoaCxoLmdldFRpbWV6b25lT2Zmc2V0KCksbikpKSx0aGlzLnRpbWVzLmZpbmQoXCIuay1jdXJyZW50LXRpbWVcIikucmVtb3ZlKCksaT1wLmdyb3VwJiZcImhvcml6b250YWxcIiE9cC5ncm91cC5vcmllbnRhdGlvbj90aGlzLmdyb3Vwcy5sZW5ndGg6MSxyPTA7aT5yO3IrKyl7aWYobz10aGlzLmdyb3Vwc1tyXSxhPXMuZGF0ZS50b1V0Y1RpbWUoaCksbD1vLnRpbWVTbG90UmFuZ2VzKGEsYSsxKSwwPT09bC5sZW5ndGgpcmV0dXJuO2M9bFswXS5jb2xsZWN0aW9uLGQ9Yy5zbG90QnlTdGFydERhdGUoaCksZCYmKHU9ZShcIjxkaXYgY2xhc3M9J2stY3VycmVudC10aW1lJz48L2Rpdj5cIiksdS5hcHBlbmRUbyh0aGlzLnRpbWVzKS5jc3Moe3RvcDpNYXRoLnJvdW5kKGxbMF0uaW5uZXJSZWN0KGgsbmV3IERhdGUoaC5nZXRUaW1lKCkrMSksITEpLnRvcCksaGVpZ2h0OlwiMXB4XCIscmlnaHQ6XCIxcHhcIixsZWZ0OjB9KSl9fSxfY3VycmVudFRpbWU6ZnVuY3Rpb24oKXt2YXIgZSxuPXRoaXMsaT1uLm9wdGlvbnMuY3VycmVudFRpbWVNYXJrZXI7aSE9PSExJiZpLnVwZGF0ZUludGVydmFsIT09dCYmKGU9aS51cGRhdGVJbnRlcnZhbCxuLl9jdXJyZW50VGltZU1hcmtlclVwZGF0ZXIoKSxuLl9jdXJyZW50VGltZVVwZGF0ZVRpbWVyPXNldEludGVydmFsKGgodGhpcy5fY3VycmVudFRpbWVNYXJrZXJVcGRhdGVyLG4pLGUpKX0sX3VwZGF0ZVJlc2l6ZUhpbnQ6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbyxhLGwsYyx1LGgscCxmLGcsbT1lLmlzTXVsdGlEYXkoKSx2PXRoaXMuZ3JvdXBzW3RdLF89di5yYW5nZXMobixpLG0sZS5pc0FsbERheSk7Zm9yKHRoaXMuX3JlbW92ZVJlc2l6ZUhpbnQoKSxyPTA7Xy5sZW5ndGg+cjtyKyspbz1fW3JdLGE9by5zdGFydFNsb3QoKSxsPWEub2Zmc2V0V2lkdGgsYz1hLmNsaWVudEhlaWdodCx1PWEub2Zmc2V0VG9wLG0/bD1vLmlubmVyV2lkdGgoKTooaD1vLm91dGVyUmVjdChuLGksdGhpcy5vcHRpb25zLnNuYXApLHU9aC50b3AsYz1oLmJvdHRvbS1oLnRvcCkscD1kLmZuLl9jcmVhdGVSZXNpemVIaW50LmNhbGwodGhpcyxhLm9mZnNldExlZnQsdSxsLGMpLHRoaXMuX3Jlc2l6ZUhpbnQ9dGhpcy5fcmVzaXplSGludC5hZGQocCk7Zj1cInRcIixnPXRoaXMuY29udGVudCxtJiYoZj1cIk0vZGRcIixnPXRoaXMuZWxlbWVudC5maW5kKFwiLmstc2NoZWR1bGVyLWhlYWRlci13cmFwOmhhcyguay1zY2hlZHVsZXItaGVhZGVyLWFsbC1kYXkpID4gZGl2XCIpLGcubGVuZ3RofHwoZz10aGlzLmNvbnRlbnQpKSx0aGlzLl9yZXNpemVIaW50LmFwcGVuZFRvKGcpLHRoaXMuX3Jlc2l6ZUhpbnQuZmluZChcIi5rLWxhYmVsLXRvcCwuay1sYWJlbC1ib3R0b21cIikudGV4dChcIlwiKSx0aGlzLl9yZXNpemVIaW50LmZpcnN0KCkuYWRkQ2xhc3MoXCJrLWZpcnN0XCIpLmZpbmQoXCIuay1sYWJlbC10b3BcIikudGV4dChzLnRvU3RyaW5nKHMudGltZXpvbmUudG9Mb2NhbERhdGUobiksZikpLHRoaXMuX3Jlc2l6ZUhpbnQubGFzdCgpLmFkZENsYXNzKFwiay1sYXN0XCIpLmZpbmQoXCIuay1sYWJlbC1ib3R0b21cIikudGV4dChzLnRvU3RyaW5nKHMudGltZXpvbmUudG9Mb2NhbERhdGUoaSksZikpfSxfdXBkYXRlTW92ZUhpbnQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhLGwsYyxkLHU9ZS5pc011bHRpRGF5KCksaD10aGlzLmdyb3Vwc1t0XSxwPXMuZGF0ZS50b1V0Y1RpbWUoZS5zdGFydCkrbixmPXArZS5kdXJhdGlvbigpLGc9aC5yYW5nZXMocCxmLHUsZS5pc0FsbERheSk7Zm9yKHA9cy50aW1lem9uZS50b0xvY2FsRGF0ZShwKSxmPXMudGltZXpvbmUudG9Mb2NhbERhdGUoZiksdGhpcy5fcmVtb3ZlTW92ZUhpbnQoKSwhdSYmKDA9PT1tKGYpfHxtKGYpPG0odGhpcy5zdGFydFRpbWUoKSkpJiZnLmxlbmd0aD4xJiZnLnBvcCgpLGk9MDtnLmxlbmd0aD5pO2krKylyPWdbaV0sbz1yLnN0YXJ0LGE9dGhpcy5fY3JlYXRlRXZlbnRFbGVtZW50KGUuY2xvbmUoe3N0YXJ0OnAsZW5kOmZ9KSwhdSksYS5hZGRDbGFzcyhcImstZXZlbnQtZHJhZy1oaW50XCIpLGw9e2xlZnQ6by5vZmZzZXRMZWZ0KzIsdG9wOm8ub2Zmc2V0VG9wfSx0aGlzLl9pc1J0bCYmKGwubGVmdD0uMSpvLmNsaWVudFdpZHRoK28ub2Zmc2V0TGVmdCsyKSx1P2wud2lkdGg9ci5pbm5lcldpZHRoKCktNDooYz1yLm91dGVyUmVjdChwLGYsdGhpcy5vcHRpb25zLnNuYXApLGwudG9wPWMudG9wLGwuaGVpZ2h0PWMuYm90dG9tLWMudG9wLGwud2lkdGg9Ljkqby5jbGllbnRXaWR0aC00KSxhLmNzcyhsKSx0aGlzLl9tb3ZlSGludD10aGlzLl9tb3ZlSGludC5hZGQoYSk7ZD10aGlzLmNvbnRlbnQsdSYmKGQ9dGhpcy5lbGVtZW50LmZpbmQoXCIuay1zY2hlZHVsZXItaGVhZGVyLXdyYXA6aGFzKC5rLXNjaGVkdWxlci1oZWFkZXItYWxsLWRheSkgPiBkaXZcIiksZC5sZW5ndGh8fChkPXRoaXMuY29udGVudCkpLHRoaXMuX21vdmVIaW50LmFwcGVuZFRvKGQpfSxfc2xvdEJ5UG9zaXRpb246ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbztmb3IodGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpPyhpPXRoaXMuY29udGVudC5vZmZzZXQoKSx0Kz10aGlzLmNvbnRlbnRbMF0uc2Nyb2xsVG9wLGUrPXRoaXMuY29udGVudFswXS5zY3JvbGxMZWZ0KTppPXRoaXMuZWxlbWVudC5maW5kKFwiLmstc2NoZWR1bGVyLWhlYWRlci13cmFwOmhhcyguay1zY2hlZHVsZXItaGVhZGVyLWFsbC1kYXkpXCIpLmZpbmQoXCI+ZGl2XCIpLm9mZnNldCgpLGkmJihlLT1pLmxlZnQsdC09aS50b3ApLGU9TWF0aC5jZWlsKGUpLHQ9TWF0aC5jZWlsKHQpLG89MDt0aGlzLmdyb3Vwcy5sZW5ndGg+bztvKyspaWYocj10aGlzLmdyb3Vwc1tvXSxuPXIuZGF5U2xvdEJ5UG9zaXRpb24oZSx0KSlyZXR1cm4gbjtmb3IoaSYmKGUrPWkubGVmdCx0Kz1pLnRvcCksaT10aGlzLmNvbnRlbnQub2Zmc2V0KCksZS09aS5sZWZ0LHQtPWkudG9wLHRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKXx8KHQrPXRoaXMuY29udGVudFswXS5zY3JvbGxUb3AsZSs9dGhpcy5jb250ZW50WzBdLnNjcm9sbExlZnQpLGU9TWF0aC5jZWlsKGUpLHQ9TWF0aC5jZWlsKHQpLG89MDt0aGlzLmdyb3Vwcy5sZW5ndGg+bztvKyspaWYocj10aGlzLmdyb3Vwc1tvXSxuPXIudGltZVNsb3RCeVBvc2l0aW9uKGUsdCkpcmV0dXJuIG47cmV0dXJuIG51bGx9LF9ncm91cENvdW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5ncm91cGVkUmVzb3VyY2VzO3JldHVybiBlLmxlbmd0aD9cInZlcnRpY2FsXCI9PT10aGlzLl9ncm91cE9yaWVudGF0aW9uKCk/dGhpcy5fcm93Q291bnRGb3JMZXZlbChlLmxlbmd0aC0xKTp0aGlzLl9jb2x1bW5Db3VudEZvckxldmVsKGUubGVuZ3RoKS90aGlzLl9jb2x1bW5PZmZzZXRGb3JSZXNvdXJjZShlLmxlbmd0aCk6MX0sX2NvbHVtbkNvdW50SW5SZXNvdXJjZVZpZXc6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdyb3VwZWRSZXNvdXJjZXM7cmV0dXJuIWUubGVuZ3RofHx0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCk/dGhpcy5fY29sdW1uQ291bnRGb3JMZXZlbCgwKTp0aGlzLl9jb2x1bW5PZmZzZXRGb3JSZXNvdXJjZShlLmxlbmd0aCl9LF90aW1lU2xvdEdyb3VwczpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGEscyxsLGMsZCx1LGgscCxmLGcsdixfLHk9dGhpcy5fdGltZVNsb3RJbnRlcnZhbCgpLHc9dGhpcy5jb250ZW50LmZpbmQoXCJ0cjpub3QoLmstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5KVwiKTtmb3Iody5hdHRyKFwicm9sZVwiLFwicm93XCIpLG49dy5sZW5ndGgsdGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpJiYobj1NYXRoLmZsb29yKG4vZSkpLGk9MDtlPmk7aSsrKWZvcihyPTAsdGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpJiYocj1pKSxvPXIqbixzPTAsdGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpfHwocz1pKTsocisxKSpuPm87KXtmb3IobD13W29dLmNoaWxkcmVuLGM9dGhpcy5ncm91cHNbaV0sbyVuPT09MCYmKGE9bShuZXcgRGF0ZSgrdGhpcy5zdGFydFRpbWUoKSkpKSxkPXMqdDsocysxKSp0PmQ7ZCsrKXU9bFtkXSxoPWQldCxwPWMuZ2V0VGltZVNsb3RDb2xsZWN0aW9uKGgpLGY9dGhpcy5fZGF0ZXNbaF0sZz1EYXRlLlVUQyhmLmdldEZ1bGxZZWFyKCksZi5nZXRNb250aCgpLGYuZ2V0RGF0ZSgpKSx2PWcrYSxfPXYreSx1LnNldEF0dHJpYnV0ZShcInJvbGVcIixcImdyaWRjZWxsXCIpLHUuc2V0QXR0cmlidXRlKFwiYXJpYS1zZWxlY3RlZFwiLCExKSxwLmFkZFRpbWVTbG90KHUsdixfKTthKz15LG8rK319LF9kYXlTbG90R3JvdXBzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYSxsLGMsZCx1LGgscCxmO2ZvcihuPXRoaXMuZWxlbWVudC5maW5kKHRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKT9cIi5rLXNjaGVkdWxlci1oZWFkZXItYWxsLWRheVwiOlwiLmstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5IHRyXCIpLG4uYXR0cihcInJvbGVcIixcInJvd1wiKSxpPTA7ZT5pO2krKylmb3Iocj0wLHRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKSYmKHI9aSksbz10aGlzLmdyb3Vwc1tpXSxhPW8uZ2V0RGF5U2xvdENvbGxlY3Rpb24oMCksbD1uW3JdLmNoaWxkcmVuLGM9MCx0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCl8fChjPWkpLGQ9MCx1PWMqdDsoYysxKSp0PnU7dSsrKWg9bFt1XSx1JXQ9PT0wJiYoZD0wKSxwPXRoaXMuX2RhdGVzW2RdLGY9RGF0ZS5VVEMocC5nZXRGdWxsWWVhcigpLHAuZ2V0TW9udGgoKSxwLmdldERhdGUoKSksZCsrLGguc2V0QXR0cmlidXRlKFwicm9sZVwiLFwiZ3JpZGNlbGxcIiksaC5zZXRBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIsITEpLGEuYWRkRGF5U2xvdChoLGYsZitzLmRhdGUuTVNfUEVSX0RBWSl9LF9ncm91cHM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT10aGlzLl9ncm91cENvdW50KCkscj10aGlzLl9jb2x1bW5Db3VudEluUmVzb3VyY2VWaWV3KCk7Zm9yKHRoaXMuZ3JvdXBzPVtdLGU9MDtpPmU7ZSsrKXtmb3IodD10aGlzLl9hZGRSZXNvdXJjZVZpZXcoZSksbj0wO3I+bjtuKyspdC5hZGRUaW1lU2xvdENvbGxlY3Rpb24odGhpcy5fZGF0ZXNbbl0scy5kYXRlLmFkZERheXModGhpcy5fZGF0ZXNbbl0sMSkpO3RoaXMub3B0aW9ucy5hbGxEYXlTbG90JiZ0LmFkZERheVNsb3RDb2xsZWN0aW9uKHRoaXMuX2RhdGVzWzBdLHMuZGF0ZS5hZGREYXlzKHRoaXMuX2RhdGVzW3RoaXMuX2RhdGVzLmxlbmd0aC0xXSwxKSl9dGhpcy5fdGltZVNsb3RHcm91cHMoaSxyKSx0aGlzLm9wdGlvbnMuYWxsRGF5U2xvdCYmdGhpcy5fZGF5U2xvdEdyb3VwcyhpLHIpfSxvcHRpb25zOntuYW1lOlwiTXVsdGlEYXlWaWV3XCIsc2VsZWN0ZWREYXRlRm9ybWF0OlwiezA6RH1cIixhbGxEYXlTbG90OiEwLHNob3dXb3JrSG91cnM6ITEsdGl0bGU6XCJcIixzdGFydFRpbWU6cy5kYXRlLnRvZGF5KCksZW5kVGltZTpzLmRhdGUudG9kYXkoKSxtaW5vclRpY2tDb3VudDoyLG1ham9yVGljazo2MCxtYWpvclRpbWVIZWFkZXJUZW1wbGF0ZTpcIiM9a2VuZG8udG9TdHJpbmcoZGF0ZSwgJ3QnKSNcIixtaW5vclRpbWVIZWFkZXJUZW1wbGF0ZTpcIiZuYnNwO1wiLGdyb3VwSGVhZGVyVGVtcGxhdGU6XCIjPXRleHQjXCIsc2xvdFRlbXBsYXRlOlwiJm5ic3A7XCIsYWxsRGF5U2xvdFRlbXBsYXRlOlwiJm5ic3A7XCIsZXZlbnRUZW1wbGF0ZTpfLGFsbERheUV2ZW50VGVtcGxhdGU6eSxkYXRlSGVhZGVyVGVtcGxhdGU6dyxlZGl0YWJsZTohMCx3b3JrRGF5U3RhcnQ6bmV3IERhdGUoMTk4MCwxLDEsOCwwLDApLHdvcmtEYXlFbmQ6bmV3IERhdGUoMTk4MCwxLDEsMTcsMCwwKSx3b3JrV2Vla1N0YXJ0OjEsd29ya1dlZWtFbmQ6NSxmb290ZXI6e2NvbW1hbmQ6XCJ3b3JrRGF5XCJ9LG1lc3NhZ2VzOnthbGxEYXk6XCJhbGwgZGF5XCIsc2hvd0Z1bGxEYXk6XCJTaG93IGZ1bGwgZGF5XCIsc2hvd1dvcmtEYXk6XCJTaG93IGJ1c2luZXNzIGhvdXJzXCJ9LGN1cnJlbnRUaW1lTWFya2VyOnt1cGRhdGVJbnRlcnZhbDoxZTQsdXNlTG9jYWxUaW1lem9uZTohMH19LGV2ZW50czpbXCJyZW1vdmVcIixcImFkZFwiLFwiZWRpdFwiXSxfdGVtcGxhdGVzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLHQ9dSh7fSxzLlRlbXBsYXRlLGUudGVtcGxhdGVTZXR0aW5ncyk7dGhpcy5ldmVudFRlbXBsYXRlPXRoaXMuX2V2ZW50VG1wbChlLmV2ZW50VGVtcGxhdGUsayksdGhpcy5hbGxEYXlFdmVudFRlbXBsYXRlPXRoaXMuX2V2ZW50VG1wbChlLmFsbERheUV2ZW50VGVtcGxhdGUsYiksdGhpcy5tYWpvclRpbWVIZWFkZXJUZW1wbGF0ZT1zLnRlbXBsYXRlKGUubWFqb3JUaW1lSGVhZGVyVGVtcGxhdGUsdCksdGhpcy5taW5vclRpbWVIZWFkZXJUZW1wbGF0ZT1zLnRlbXBsYXRlKGUubWlub3JUaW1lSGVhZGVyVGVtcGxhdGUsdCksdGhpcy5kYXRlSGVhZGVyVGVtcGxhdGU9cy50ZW1wbGF0ZShlLmRhdGVIZWFkZXJUZW1wbGF0ZSx0KSx0aGlzLnNsb3RUZW1wbGF0ZT1zLnRlbXBsYXRlKGUuc2xvdFRlbXBsYXRlLHQpLHRoaXMuYWxsRGF5U2xvdFRlbXBsYXRlPXMudGVtcGxhdGUoZS5hbGxEYXlTbG90VGVtcGxhdGUsdCksdGhpcy5ncm91cEhlYWRlclRlbXBsYXRlPXMudGVtcGxhdGUoZS5ncm91cEhlYWRlclRlbXBsYXRlLHQpfSxfZWRpdGFibGU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuZWRpdGFibGUmJih0aGlzLl9pc01vYmlsZSgpP3RoaXMuX3RvdWNoRWRpdGFibGUoKTp0aGlzLl9tb3VzZUVkaXRhYmxlKCkpfSxfbW91c2VFZGl0YWJsZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5lbGVtZW50Lm9uKFwiY2xpY2tcIit2LFwiLmstZXZlbnQgYTpoYXMoLmstc2ktY2xvc2UpXCIsZnVuY3Rpb24obil7dC50cmlnZ2VyKFwicmVtb3ZlXCIse3VpZDplKHRoaXMpLmNsb3Nlc3QoXCIuay1ldmVudFwiKS5hdHRyKHMuYXR0cihcInVpZFwiKSl9KSxuLnByZXZlbnREZWZhdWx0KCl9KSx0Lm9wdGlvbnMuZWRpdGFibGUuY3JlYXRlIT09ITEmJnQuZWxlbWVudC5vbihcImRibGNsaWNrXCIrdixcIi5rLXNjaGVkdWxlci1jb250ZW50IHRkXCIsZnVuY3Rpb24obil7dmFyIGkscjtlKHRoaXMpLnBhcmVudCgpLmhhc0NsYXNzKFwiay1zY2hlZHVsZXItaGVhZGVyLWFsbC1kYXlcIil8fChpPXQuX3Nsb3RCeVBvc2l0aW9uKG4ucGFnZVgsbi5wYWdlWSksaSYmKHI9dC5fcmVzb3VyY2VCeVNsb3QoaSksdC50cmlnZ2VyKFwiYWRkXCIse2V2ZW50SW5mbzp1KHtzdGFydDppLnN0YXJ0RGF0ZSgpLGVuZDppLmVuZERhdGUoKX0scil9KSksbi5wcmV2ZW50RGVmYXVsdCgpKX0pLm9uKFwiZGJsY2xpY2tcIit2LFwiLmstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5IHRkXCIsZnVuY3Rpb24oZSl7dmFyIG4saT10Ll9zbG90QnlQb3NpdGlvbihlLnBhZ2VYLGUucGFnZVkpO2kmJihuPXQuX3Jlc291cmNlQnlTbG90KGkpLHQudHJpZ2dlcihcImFkZFwiLHtldmVudEluZm86dSh7fSx7aXNBbGxEYXk6ITAsc3RhcnQ6cy5kYXRlLmdldERhdGUoaS5zdGFydERhdGUoKSksZW5kOnMuZGF0ZS5nZXREYXRlKGkuc3RhcnREYXRlKCkpfSxuKX0pKSxlLnByZXZlbnREZWZhdWx0KCl9KSx0Lm9wdGlvbnMuZWRpdGFibGUudXBkYXRlIT09ITEmJnQuZWxlbWVudC5vbihcImRibGNsaWNrXCIrdixcIi5rLWV2ZW50XCIsZnVuY3Rpb24obil7dC50cmlnZ2VyKFwiZWRpdFwiLHt1aWQ6ZSh0aGlzKS5jbG9zZXN0KFwiLmstZXZlbnRcIikuYXR0cihzLmF0dHIoXCJ1aWRcIikpfSksbi5wcmV2ZW50RGVmYXVsdCgpfSl9LF90b3VjaEVkaXRhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0Lm9wdGlvbnMuZWRpdGFibGUuY3JlYXRlIT09ITEmJih0Ll9hZGRVc2VyRXZlbnRzPW5ldyBzLlVzZXJFdmVudHModC5lbGVtZW50LHtmaWx0ZXI6XCIuay1zY2hlZHVsZXItY29udGVudCB0ZFwiLHRhcDpmdW5jdGlvbihuKXt2YXIgaSxyO2Uobi50YXJnZXQpLnBhcmVudCgpLmhhc0NsYXNzKFwiay1zY2hlZHVsZXItaGVhZGVyLWFsbC1kYXlcIil8fChpPXQuX3Nsb3RCeVBvc2l0aW9uKG4ueC5sb2NhdGlvbixuLnkubG9jYXRpb24pLGkmJihyPXQuX3Jlc291cmNlQnlTbG90KGkpLHQudHJpZ2dlcihcImFkZFwiLHtldmVudEluZm86dSh7c3RhcnQ6aS5zdGFydERhdGUoKSxlbmQ6aS5lbmREYXRlKCl9LHIpfSkpLG4ucHJldmVudERlZmF1bHQoKSl9fSksdC5fYWxsRGF5VXNlckV2ZW50cz1uZXcgcy5Vc2VyRXZlbnRzKHQuZWxlbWVudCx7ZmlsdGVyOlwiLmstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5IHRkXCIsdGFwOmZ1bmN0aW9uKGUpe3ZhciBuLGk9dC5fc2xvdEJ5UG9zaXRpb24oZS54LmxvY2F0aW9uLGUueS5sb2NhdGlvbik7aSYmKG49dC5fcmVzb3VyY2VCeVNsb3QoaSksdC50cmlnZ2VyKFwiYWRkXCIse2V2ZW50SW5mbzp1KHt9LHtpc0FsbERheTohMCxzdGFydDpzLmRhdGUuZ2V0RGF0ZShpLnN0YXJ0RGF0ZSgpKSxlbmQ6cy5kYXRlLmdldERhdGUoaS5zdGFydERhdGUoKSl9LG4pfSkpLGUucHJldmVudERlZmF1bHQoKX19KSksdC5vcHRpb25zLmVkaXRhYmxlLnVwZGF0ZSE9PSExJiYodC5fZWRpdFVzZXJFdmVudHM9bmV3IHMuVXNlckV2ZW50cyh0LmVsZW1lbnQse2ZpbHRlcjpcIi5rLWV2ZW50XCIsdGFwOmZ1bmN0aW9uKG4pe3ZhciBpPWUobi50YXJnZXQpLmNsb3Nlc3QoXCIuay1ldmVudFwiKTtpLmhhc0NsYXNzKFwiay1ldmVudC1hY3RpdmVcIil8fHQudHJpZ2dlcihcImVkaXRcIix7dWlkOmkuYXR0cihzLmF0dHIoXCJ1aWRcIikpfSksbi5wcmV2ZW50RGVmYXVsdCgpfX0pKX0sX2xheW91dDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscj1bXSxvPVtdLGE9dGhpcy5vcHRpb25zLGw9dGhpcztmb3IodD0wO2UubGVuZ3RoPnQ7dCsrKW49e30sbi50ZXh0PWwuZGF0ZUhlYWRlclRlbXBsYXRlKHtkYXRlOmVbdF19KSxzLmRhdGUuaXNUb2RheShlW3RdKSYmKG4uY2xhc3NOYW1lPVwiay10b2RheVwiKSxyLnB1c2gobik7cmV0dXJuIGk9dGhpcy5ncm91cGVkUmVzb3VyY2VzLGEuYWxsRGF5U2xvdCYmby5wdXNoKHt0ZXh0OmEubWVzc2FnZXMuYWxsRGF5LGFsbERheTohMCxjZWxsQ29udGVudDpmdW5jdGlvbih0KXt2YXIgbj10O3JldHVybiB0PWkubGVuZ3RoJiZcInZlcnRpY2FsXCIhPT1sLl9ncm91cE9yaWVudGF0aW9uKCk/dCVlLmxlbmd0aDp0LGwuYWxsRGF5U2xvdFRlbXBsYXRlKHtkYXRlOmVbdF0scmVzb3VyY2VzOmZ1bmN0aW9uKCl7cmV0dXJuIGwuX3Jlc291cmNlQnlTbG90KHtncm91cEluZGV4Om59KX19KX19KSx0aGlzLl9mb3JUaW1lUmFuZ2UodGhpcy5zdGFydFRpbWUoKSx0aGlzLmVuZFRpbWUoKSxmdW5jdGlvbihlLHQsbixpKXt2YXIgcj10P2wubWFqb3JUaW1lSGVhZGVyVGVtcGxhdGU6bC5taW5vclRpbWVIZWFkZXJUZW1wbGF0ZSxhPXt0ZXh0OnIoe2RhdGU6ZX0pLGNsYXNzTmFtZTppP1wiay1zbG90LWNlbGxcIjpcIlwifTtvLnB1c2goYSl9KSxpLmxlbmd0aCYmKFwidmVydGljYWxcIj09PXRoaXMuX2dyb3VwT3JpZW50YXRpb24oKT9vPXRoaXMuX2NyZWF0ZVJvd3NMYXlvdXQoaSxvLHRoaXMuZ3JvdXBIZWFkZXJUZW1wbGF0ZSk6cj10aGlzLl9jcmVhdGVDb2x1bW5zTGF5b3V0KGkscix0aGlzLmdyb3VwSGVhZGVyVGVtcGxhdGUpKSx7Y29sdW1uczpyLHJvd3M6b319LF9mb290ZXI6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscj10aGlzLm9wdGlvbnM7ci5mb290ZXIhPT0hMSYmKHQ9JzxkaXYgY2xhc3M9XCJrLWhlYWRlciBrLXNjaGVkdWxlci1mb290ZXJcIj4nLG49ci5mb290ZXIuY29tbWFuZCxuJiZcIndvcmtEYXlcIj09PW4/KHQrPSc8dWwgY2xhc3M9XCJrLXJlc2V0IGstaGVhZGVyXCI+Jyx0Kz0nPGxpIGNsYXNzPVwiay1zdGF0ZS1kZWZhdWx0IGstc2NoZWR1bGVyLWZ1bGxkYXlcIj48YSBocmVmPVwiI1wiIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWNsb2NrXCI+PC9zcGFuPicsdCs9KHIuc2hvd1dvcmtIb3Vycz9yLm1lc3NhZ2VzLnNob3dGdWxsRGF5OnIubWVzc2FnZXMuc2hvd1dvcmtEYXkpK1wiPC9hPjwvbGk+XCIsdCs9XCI8L3VsPlwiKTp0Kz1cIiZuYnNwO1wiLHQrPVwiPC9kaXY+XCIsdGhpcy5mb290ZXI9ZSh0KS5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpLGk9dGhpcyx0aGlzLmZvb3Rlci5vbihcImNsaWNrXCIrdixcIi5rLXNjaGVkdWxlci1mdWxsZGF5XCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGkudHJpZ2dlcihcIm5hdmlnYXRlXCIse3ZpZXc6aS5uYW1lfHxyLm5hbWUsZGF0ZTppLnN0YXJ0RGF0ZSgpLGlzV29ya0RheTohci5zaG93V29ya0hvdXJzfSl9KSl9LF9mb3JUaW1lUmFuZ2U6ZnVuY3Rpb24oZSx0LGkscil7dmFyIG8sYSxzLGwsZCx1LGgscCx2LF8seSx3LGIsayx4LEM7Zm9yKGU9bihlKSx0PW4odCksbz10aGlzLGE9bShlKSxzPW0odCksbD1vLm9wdGlvbnMubWlub3JUaWNrQ291bnQsZD1vLm9wdGlvbnMubWFqb3JUaWNrKmYsdT1kL2x8fDEsaD1uZXcgRGF0ZSgrZSkscD1oLmdldERhdGUoKSxfPTAsdz1cIlwiLHk9Zy91LGEhPXMmJihhPnMmJihzKz1nKSx5PShzLWEpL3UpLHk9TWF0aC5yb3VuZCh5KTt5Pl87XysrKWI9XyUoZC91KSxrPTA9PT1iLHg9bC0xPmIsQz1iPT09bC0xLHcrPWkoaCxrLHgsQyksYyhoLHUsITEpO3JldHVybiBzJiYodj1tKGgpLHA8aC5nZXREYXRlKCkmJih2Kz1nKSx2PnMmJihoPW5ldyBEYXRlKCt0KSkpLHImJih3Kz1yKGgpKSx3fSxfY29udGVudDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscj10aGlzLG89ci5vcHRpb25zLGE9ci5zdGFydFRpbWUoKSxsPXRoaXMuZW5kVGltZSgpLGM9MSxkPTEsdT1lLmxlbmd0aCxoPVwiXCIscD10aGlzLmdyb3VwZWRSZXNvdXJjZXMsZj10aGlzLnNsb3RUZW1wbGF0ZSxnPXRoaXMuYWxsRGF5U2xvdFRlbXBsYXRlLG09ITE7Zm9yKHAubGVuZ3RoJiYobT1cInZlcnRpY2FsXCI9PT1yLl9ncm91cE9yaWVudGF0aW9uKCksbT8oZD10aGlzLl9yb3dDb3VudEZvckxldmVsKHRoaXMucm93TGV2ZWxzLmxlbmd0aC0yKSxvLmFsbERheVNsb3QmJih0PWZ1bmN0aW9uKHQpe3ZhciBuLGksbz0nPHRyIGNsYXNzPVwiay1zY2hlZHVsZXItaGVhZGVyLWFsbC1kYXlcIj4nLGE9ZnVuY3Rpb24oKXtyZXR1cm4gci5fcmVzb3VyY2VCeVNsb3Qoe2dyb3VwSW5kZXg6dH0pfTtmb3Iobj0wLGk9ZS5sZW5ndGg7aT5uO24rKylvKz1cIjx0ZD5cIitnKHtkYXRlOmVbbl0scmVzb3VyY2VzOmF9KStcIjwvdGQ+XCI7cmV0dXJuIG8rXCI8L3RyPlwifSkpOmM9dGhpcy5fY29sdW1uQ291bnRGb3JMZXZlbCh0aGlzLmNvbHVtbkxldmVscy5sZW5ndGgtMikpLGgrPVwiPHRib2R5PlwiLG49ZnVuY3Rpb24odCxuKXt2YXIgbyxhLGwsZCxoPVwiXCIscD1cIlwiLGc9MDtmb3IoaD1cIjx0clwiKyhuPycgY2xhc3M9XCJrLW1pZGRsZS1yb3dcIic6XCJcIikrXCI+XCIsZD1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gci5fcmVzb3VyY2VCeVNsb3Qoe2dyb3VwSW5kZXg6ZX0pfX07Yz5nO2crKylmb3Iobz0wLGE9dTthPm87bysrKXA9XCJcIixzLmRhdGUuaXNUb2RheShlW29dKSYmKHArPVwiay10b2RheVwiKSwocy5kYXRlLmdldE1pbGxpc2Vjb25kcyh0KTxzLmRhdGUuZ2V0TWlsbGlzZWNvbmRzKHIub3B0aW9ucy53b3JrRGF5U3RhcnQpfHxzLmRhdGUuZ2V0TWlsbGlzZWNvbmRzKHQpPj1zLmRhdGUuZ2V0TWlsbGlzZWNvbmRzKHIub3B0aW9ucy53b3JrRGF5RW5kKXx8IXIuX2lzV29ya0RheShlW29dKSkmJihwKz1cIiBrLW5vbndvcmstaG91clwiKSxoKz1cIjx0ZFwiKyhcIlwiIT09cD8nIGNsYXNzPVwiJytwKydcIic6XCJcIikrXCI+XCIsbD1zLmRhdGUuZ2V0RGF0ZShlW29dKSxzLmRhdGUuc2V0VGltZShsLHMuZGF0ZS5nZXRNaWxsaXNlY29uZHModCkpLGgrPWYoe2RhdGU6bCxyZXNvdXJjZXM6ZChtP2k6Zyl9KSxoKz1cIjwvdGQ+XCI7cmV0dXJuIGgrPVwiPC90cj5cIn0saT0wO2Q+aTtpKyspaCs9dD90KGkpOlwiXCIsaCs9dGhpcy5fZm9yVGltZVJhbmdlKGEsbCxuKTtoKz1cIjwvdGJvZHk+XCIsdGhpcy5jb250ZW50LmZpbmQoXCJ0YWJsZVwiKS5hcHBlbmQoaCl9LF9pc1dvcmtEYXk6ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLmdldERheSgpLGk9dGhpcy5fd29ya0RheXM7Zm9yKHQ9MDtpLmxlbmd0aD50O3QrKylpZihpW3RdPT09bilyZXR1cm4hMDtyZXR1cm4hMX0sX3JlbmRlcjpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXM7dD10fHxbXSx0aGlzLl9kYXRlcz10LHRoaXMuX3N0YXJ0RGF0ZT10WzBdLHRoaXMuX2VuZERhdGU9dFt0Lmxlbmd0aC0xfHwwXSx0aGlzLmNyZWF0ZUxheW91dCh0aGlzLl9sYXlvdXQodCkpLHRoaXMuX2NvbnRlbnQodCksdGhpcy5fZm9vdGVyKCksdGhpcy5yZWZyZXNoTGF5b3V0KCksbj10aGlzLmVsZW1lbnQuZmluZChcIi5rLXNjaGVkdWxlci1oZWFkZXItYWxsLWRheSB0ZFwiKSxuLmxlbmd0aCYmKHRoaXMuX2FsbERheUhlYWRlckhlaWdodD1uLmZpcnN0KClbMF0uY2xpZW50SGVpZ2h0KSxpLmRhdGVzSGVhZGVyLm9uKFwiY2xpY2tcIit2LFwiLmstbmF2LWRheVwiLGZ1bmN0aW9uKHQpe3ZhciBuPWUodC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KFwidGhcIikscj1uLm9mZnNldCgpLG89aS5fc2xvdEJ5UG9zaXRpb24oci5sZWZ0LHIudG9wK24ub3V0ZXJIZWlnaHQoKSk7aS50cmlnZ2VyKFwibmF2aWdhdGVcIix7dmlldzpcImRheVwiLGRhdGU6by5zdGFydERhdGUoKX0pfSl9LHN0YXJ0VGltZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucztyZXR1cm4gZS5zaG93V29ya0hvdXJzP2Uud29ya0RheVN0YXJ0OmUuc3RhcnRUaW1lfSxlbmRUaW1lOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zO3JldHVybiBlLnNob3dXb3JrSG91cnM/ZS53b3JrRGF5RW5kOmUuZW5kVGltZX0sc3RhcnREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXJ0RGF0ZX0sZW5kRGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmREYXRlfSxfZW5kOmZ1bmN0aW9uKGUpe3ZhciB0PW0odGhpcy5lbmRUaW1lKCkpfHxnO3JldHVybiBlJiYodD0wKSxuZXcgRGF0ZSh0aGlzLl9lbmREYXRlLmdldFRpbWUoKSt0KX0sbmV4dERhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gcy5kYXRlLm5leHREYXkodGhpcy5lbmREYXRlKCkpfSxwcmV2aW91c0RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gcy5kYXRlLnByZXZpb3VzRGF5KHRoaXMuc3RhcnREYXRlKCkpfSxjYWxjdWxhdGVEYXRlUmFuZ2U6ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXIoW3RoaXMub3B0aW9ucy5kYXRlXSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2N1cnJlbnRUaW1lVXBkYXRlVGltZXImJmNsZWFySW50ZXJ2YWwoZS5fY3VycmVudFRpbWVVcGRhdGVUaW1lciksZS5kYXRlc0hlYWRlciYmZS5kYXRlc0hlYWRlci5vZmYodiksZS5lbGVtZW50JiZlLmVsZW1lbnQub2ZmKHYpLGUuZm9vdGVyJiZlLmZvb3Rlci5yZW1vdmUoKSxkLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLl9pc01vYmlsZSgpJiZlLm9wdGlvbnMuZWRpdGFibGUmJihlLm9wdGlvbnMuZWRpdGFibGUuY3JlYXRlIT09ITEmJihlLl9hZGRVc2VyRXZlbnRzLmRlc3Ryb3koKSxlLl9hbGxEYXlVc2VyRXZlbnRzLmRlc3Ryb3koKSksZS5vcHRpb25zLmVkaXRhYmxlLnVwZGF0ZSE9PSExJiZlLl9lZGl0VXNlckV2ZW50cy5kZXN0cm95KCkpfSxpblJhbmdlOmZ1bmN0aW9uKGUpe3ZhciB0PWQuZm4uaW5SYW5nZS5jYWxsKHRoaXMsZSksbj1tKHRoaXMuc3RhcnRUaW1lKCkpLGk9bSh0aGlzLmVuZFRpbWUoKSl8fHMuZGF0ZS5NU19QRVJfREFZLHI9bShlLnN0YXJ0KSxvPW0oZS5lbmQpfHxzLmRhdGUuTVNfUEVSX0RBWTtyZXR1cm4gdCYmcj49biYmaT49b30sc2VsZWN0aW9uQnlFbGVtZW50OmZ1bmN0aW9uKGUpe3ZhciB0PWUub2Zmc2V0KCk7cmV0dXJuIHRoaXMuX3Nsb3RCeVBvc2l0aW9uKHQubGVmdCx0LnRvcCl9LF90aW1lU2xvdEludGVydmFsOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zO3JldHVybiBlLm1ham9yVGljay9lLm1pbm9yVGlja0NvdW50KmZ9LF90aW1lU2xvdEluZGV4OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9ucyxuPW0oZSksaT1tKHRoaXMuc3RhcnRUaW1lKCkpLHI9dC5tYWpvclRpY2svdC5taW5vclRpY2tDb3VudCpmO3JldHVybihuLWkpL3J9LF9zbG90SW5kZXg6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD90aGlzLl9kYXRlU2xvdEluZGV4KGUpOnRoaXMuX3RpbWVTbG90SW5kZXgoZSl9LF9kYXRlU2xvdEluZGV4OmZ1bmN0aW9uKGUsdCl7dmFyIG4scixvLGEsbD10aGlzLl9kYXRlc3x8W10sYz0xO2ZvcihuPTAscj1sLmxlbmd0aDtyPm47bisrKWlmKG89cy5kYXRlLmdldERhdGUobFtuXSksYT1uZXcgRGF0ZShzLmRhdGUuZ2V0RGF0ZShsW25dKS5nZXRUaW1lKCkrZy0odD8wOjEpKSxpKGUsbyxhKSlyZXR1cm4gbipjO3JldHVybi0xfSxfcG9zaXRpb25BbGxEYXlFdmVudDpmdW5jdGlvbih0LG4pe3ZhciBpLHIsbyxhLHMsbCxjLHU9bi5pbm5lcldpZHRoKCksaD1uLnN0YXJ0LmluZGV4LHA9bi5lbmQuaW5kZXgsZj1kLmNvbGxpZGluZ0V2ZW50cyhuLmV2ZW50cygpLGgscCksZz10aGlzLl9oZWFkZXJDb2x1bW5Db3VudHx8MCxtPTIsdj1oIT09cD81OjQsXz10aGlzLl9hbGxEYXlIZWFkZXJIZWlnaHQseT1uLnN0YXJ0U2xvdCgpO2Zvcih0LmNzcyh7bGVmdDp5Lm9mZnNldExlZnQrbSx3aWR0aDp1LXZ9KSxuLmFkZEV2ZW50KHtzbG90SW5kZXg6aCxzdGFydDpoLGVuZDpwLGVsZW1lbnQ6dH0pLGYucHVzaCh7c2xvdEluZGV4Omgsc3RhcnQ6aCxlbmQ6cCxlbGVtZW50OnR9KSxpPWQuY3JlYXRlUm93cyhmKSxpLmxlbmd0aCYmaS5sZW5ndGg+ZyYmKHRoaXMuX2hlYWRlckNvbHVtbkNvdW50PWkubGVuZ3RoKSxyPW4uc3RhcnQub2Zmc2V0VG9wLG89MCxhPWkubGVuZ3RoO2E+bztvKyspZm9yKHM9aVtvXS5ldmVudHMsbD0wLGM9cy5sZW5ndGg7Yz5sO2wrKyllKHNbbF0uZWxlbWVudCkuY3NzKHt0b3A6citvKl99KX0sX2FycmFuZ2VDb2x1bW5zOmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLG8sYSxzLGwsYyx1LGgscCxmLGcsbT1pLnN0YXJ0O2ZvcihlPXtlbGVtZW50OmUsc2xvdEluZGV4Om0uaW5kZXgsc3RhcnQ6dCxlbmQ6dCtufSxvPW0uY2xpZW50V2lkdGgsYT0uMSpvLGw9aS5ldmVudHMoKSxjPWQuY29sbGlkaW5nRXZlbnRzKGwsZS5zdGFydCxlLmVuZCksaS5hZGRFdmVudChlKSxjLnB1c2goZSkscj1kLmNyZWF0ZUNvbHVtbnMoYyksdT0oby1hKS9yLmxlbmd0aCxoPTAscD1yLmxlbmd0aDtwPmg7aCsrKWZvcihzPXJbaF0uZXZlbnRzLGY9MCxnPXMubGVuZ3RoO2c+ZjtmKyspc1tmXS5lbGVtZW50WzBdLnN0eWxlLndpZHRoPXUtNCtcInB4XCIsc1tmXS5lbGVtZW50WzBdLnN0eWxlLmxlZnQ9KHRoaXMuX2lzUnRsP2E6MCkrbS5vZmZzZXRMZWZ0K2gqdSsyK1wicHhcIn0sX3Bvc2l0aW9uRXZlbnQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPWUuc3RhcnRUaW1lfHxlLnN0YXJ0LHI9ZS5lbmRUaW1lfHxlLmVuZCxvPW4uaW5uZXJSZWN0KGksciwhMSksYT1vLmJvdHRvbS1vLnRvcC0yOzA+YSYmKGE9MCksdC5jc3Moe3RvcDpvLnRvcCxoZWlnaHQ6YX0pLHRoaXMuX2FycmFuZ2VDb2x1bW5zKHQsby50b3AsdFswXS5jbGllbnRIZWlnaHQsbil9LF9jcmVhdGVFdmVudEVsZW1lbnQ6ZnVuY3Rpb24odCxuLHIsbyl7dmFyIGEsbCxjLGQsaCxmLHY9bj90aGlzLmV2ZW50VGVtcGxhdGU6dGhpcy5hbGxEYXlFdmVudFRlbXBsYXRlLF89dGhpcy5vcHRpb25zLHk9Xy5lZGl0YWJsZSx3PXRoaXMuX2lzTW9iaWxlKCksYj15JiZ5LmRlc3Ryb3khPT0hMSYmIXcsaz15JiZ5LnJlc2l6ZSE9PSExLHg9cCh0aGlzLnN0YXJ0RGF0ZSgpKSxDPXAodGhpcy5lbmREYXRlKCkpLFM9bSh0aGlzLnN0YXJ0VGltZSgpKSxUPW0odGhpcy5lbmRUaW1lKCkpLEQ9dC5fdGltZShcInN0YXJ0XCIpLEE9dC5fdGltZShcImVuZFwiKTtyZXR1cm4gUz49VCYmKFQ9bShuZXcgRGF0ZSh0aGlzLmVuZFRpbWUoKS5nZXRUaW1lKCkrZy0xKSkpLG58fHQuaXNBbGxEYXl8fChDPW5ldyBEYXRlKEMuZ2V0VGltZSgpK2cpKSxsPXQuc3RhcnQsYz10LmVuZCx0LmlzQWxsRGF5JiYoYz1wKHQuZW5kKSksIWkocChsKSx4LEMpJiYhaShjLHgsQyl8fG4mJlM+RCYmQT5UP2E9ITA6cChsKTx4fHxuJiZTPkQ/bz0hMDooYz5DJiYhbnx8biYmQT5UKSYmKHI9ITApLGQ9dGhpcy5ldmVudFJlc291cmNlcyh0KSx0LnN0YXJ0VGltZSYmKGw9bmV3IERhdGUoRCksbD1zLnRpbWV6b25lLmFwcGx5KGwsXCJFdGMvVVRDXCIpKSx0LmVuZFRpbWUmJihjPW5ldyBEYXRlKEEpLGM9cy50aW1lem9uZS5hcHBseShjLFwiRXRjL1VUQ1wiKSksaD11KHt9LHtuczpzLm5zLHJlc2l6YWJsZTprLHNob3dEZWxldGU6YixtaWRkbGU6YSxoZWFkOnIsdGFpbDpvLHNpbmdsZURheToxPT10aGlzLl9kYXRlcy5sZW5ndGgscmVzb3VyY2VzOmQsaW52ZXJzZUNvbG9yOmQmJmRbMF0/dGhpcy5fc2hvdWxkSW52ZXJzZVJlc291cmNlQ29sb3IoZFswXSk6ITF9LHQse3N0YXJ0OmwsZW5kOmN9KSxmPWUodihoKSksdGhpcy5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmYsZGF0YTpbe2RhdGFJdGVtOmh9XX19KSxmfSxfaXNJblRpbWVTbG90OmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5zdGFydFRpbWUoKSxpPXRoaXMuZW5kVGltZSgpLG89ZS5zdGFydFRpbWV8fGUuc3RhcnQsYT1lLmVuZFRpbWV8fGUuZW5kO3JldHVybiBtKGkpPT09bShzLmRhdGUuZ2V0RGF0ZShpKSkmJihpPXMuZGF0ZS5nZXREYXRlKGkpLGMoaSxnLTEpKSxlLl9kYXRlKFwiZW5kXCIpPmUuX2RhdGUoXCJzdGFydFwiKSYmKGE9K2UuX2RhdGUoXCJlbmRcIikrKGctMSkpLGEtPWUuX2RhdGUoXCJlbmRcIiksby09ZS5fZGF0ZShcInN0YXJ0XCIpLGk9bShpKSxuPW0obiksbj09PW8mJm89PT1hPyEwOih0PW8hPT1pLHIobyxuLGksdCl8fHIoYSxuLGksdCl8fHIobixvLGEpfHxyKGksbyxhKSl9LF9pc0luRGF0ZVNsb3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5ncm91cHNbMF0sbj10LmZpcnN0U2xvdCgpLnN0YXJ0LHI9dC5sYXN0U2xvdCgpLmVuZC0xLG89cy5kYXRlLnRvVXRjVGltZShlLnN0YXJ0KSxhPXMuZGF0ZS50b1V0Y1RpbWUoZS5lbmQpO3JldHVybihpKG8sbixyKXx8aShhLG4scil8fGkobixvLGEpfHxpKHIsbyxhKSkmJighaShhLG4sbil8fGkoYSxvLG8pfHxlLmlzQWxsRGF5KX0sX3VwZGF0ZUFsbERheUhlYWRlckhlaWdodDpmdW5jdGlvbihlKXt2YXIgdCxuO2lmKHRoaXMuX2hlaWdodCE9PWUmJih0aGlzLl9oZWlnaHQ9ZSx0PXRoaXMuZWxlbWVudC5maW5kKFwiLmstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5IHRkXCIpLHQubGVuZ3RoKSlmb3IodC5wYXJlbnQoKS5hZGQodGhpcy5lbGVtZW50LmZpbmQoXCIuay1zY2hlZHVsZXItdGltZXMtYWxsLWRheVwiKS5wYXJlbnQoKSkuaGVpZ2h0KGUpLG49MDt0aGlzLmdyb3Vwcy5sZW5ndGg+bjtuKyspdGhpcy5ncm91cHNbbl0ucmVmcmVzaCgpfSxfcmVuZGVyRXZlbnRzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLGEscyxsLGMsZCx1LGgscCxmLG0sdixfLHk9dGhpcy5kYXRlc0hlYWRlci5maW5kKFwiLmstc2NoZWR1bGVyLWhlYWRlci13cmFwID4gZGl2XCIpO2ZvcihpPTAscj1lLmxlbmd0aDtyPmk7aSsrKWlmKG49ZVtpXSx0aGlzLl9pc0luRGF0ZVNsb3QobikpaWYoYT1uLmlzQWxsRGF5fHxuLmVuZC5nZXRUaW1lKCktbi5zdGFydC5nZXRUaW1lKCk+PWcscz1hJiYhdGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpP3k6dGhpcy5jb250ZW50LGEpdGhpcy5vcHRpb25zLmFsbERheVNsb3QmJihkPXRoaXMuZ3JvdXBzW3RdLGQuX2NvbnRpbnVvdXNFdmVudHN8fChkLl9jb250aW51b3VzRXZlbnRzPVtdKSxjPWQuc2xvdFJhbmdlcyhuKSxjLmxlbmd0aCYmKGw9dGhpcy5fY3JlYXRlRXZlbnRFbGVtZW50KG4sIWEpLHRoaXMuX3Bvc2l0aW9uQWxsRGF5RXZlbnQobCxjWzBdKSxvKGQsY1swXSxsLCEwKSxsLmFwcGVuZFRvKHMpKSk7ZWxzZSBpZih0aGlzLl9pc0luVGltZVNsb3QobikpZm9yKGQ9dGhpcy5ncm91cHNbdF0sZC5fY29udGludW91c0V2ZW50c3x8KGQuX2NvbnRpbnVvdXNFdmVudHM9W10pLGM9ZC5zbG90UmFuZ2VzKG4pLHU9Yy5sZW5ndGgsaD0wO3U+aDtoKyspcD1jW2hdLGY9bi5zdGFydCxtPW4uZW5kLHU+MSYmKDA9PT1oP209cC5lbmQuZW5kRGF0ZSgpOmg9PXUtMT9mPXAuc3RhcnQuc3RhcnREYXRlKCk6KGY9cC5zdGFydC5zdGFydERhdGUoKSxtPXAuZW5kLmVuZERhdGUoKSkpLHY9bi5jbG9uZSh7c3RhcnQ6ZixlbmQ6bSxzdGFydFRpbWU6bi5zdGFydFRpbWUsZW5kVGltZTpuLmVuZFRpbWV9KSx0aGlzLl9pc0luVGltZVNsb3QodikmJihfPXAuaGVhZCxsPXRoaXMuX2NyZWF0ZUV2ZW50RWxlbWVudChuLCFhLF8scC50YWlsKSxsLmFwcGVuZFRvKHMpLHRoaXMuX3Bvc2l0aW9uRXZlbnQodixsLHApLG8oZCxwLGwsITEpKX0scmVuZGVyOmZ1bmN0aW9uKHQpe3ZhciBuLHIsbyxhLGw7Zm9yKHRoaXMuX2hlYWRlckNvbHVtbkNvdW50PTAsdGhpcy5fZ3JvdXBzKCksdGhpcy5lbGVtZW50LmZpbmQoXCIuay1ldmVudFwiKS5yZW1vdmUoKSx0PW5ldyBzLmRhdGEuUXVlcnkodCkuc29ydChbe2ZpZWxkOlwic3RhcnRcIixkaXI6XCJhc2NcIn0se2ZpZWxkOlwiZW5kXCIsZGlyOlwiZGVzY1wifV0pLnRvQXJyYXkoKSxuPVtdLHRoaXMuX2V2ZW50c0J5UmVzb3VyY2UodCx0aGlzLmdyb3VwZWRSZXNvdXJjZXMsbikscj10aGlzLG89ZS5tYXAodGhpcy5fZGF0ZXMsZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgubWF4LmFwcGx5KG51bGwsZS5tYXAobixmdW5jdGlvbihuKXtyZXR1cm4gZS5ncmVwKG4sZnVuY3Rpb24oZSl7cmV0dXJuIGUuaXNNdWx0aURheSgpJiZpKHQscChlLnN0YXJ0KSxwKGUuZW5kKSl9KS5sZW5ndGh9KSl9KSxhPU1hdGgubWF4LmFwcGx5KG51bGwsbyksdGhpcy5fdXBkYXRlQWxsRGF5SGVhZGVySGVpZ2h0KChhKzEpKnRoaXMuX2FsbERheUhlYWRlckhlaWdodCksbD0wO24ubGVuZ3RoPmw7bCsrKXRoaXMuX3JlbmRlckV2ZW50cyhuW2xdLGwpO3RoaXMucmVmcmVzaExheW91dCgpLHRoaXMudHJpZ2dlcihcImFjdGl2YXRlXCIpfSxfZXZlbnRzQnlSZXNvdXJjZTpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGEsbD10WzBdO2lmKGwpZm9yKGk9bC5kYXRhU291cmNlLnZpZXcoKSxyPTA7aS5sZW5ndGg+cjtyKyspbz10aGlzLl9yZXNvdXJjZVZhbHVlKGwsaVtyXSksYT1uZXcgcy5kYXRhLlF1ZXJ5KGUpLmZpbHRlcih7ZmllbGQ6bC5maWVsZCxvcGVyYXRvcjpkLmdyb3VwRXFGaWx0ZXIobyl9KS50b0FycmF5KCksdC5sZW5ndGg+MT90aGlzLl9ldmVudHNCeVJlc291cmNlKGEsdC5zbGljZSgxKSxuKTpuLnB1c2goYSk7ZWxzZSBuLnB1c2goZSl9LF9jb2x1bW5PZmZzZXRGb3JSZXNvdXJjZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29sdW1uQ291bnRGb3JMZXZlbChlKS90aGlzLl9jb2x1bW5Db3VudEZvckxldmVsKGUtMSl9LF9jb2x1bW5Db3VudEZvckxldmVsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY29sdW1uTGV2ZWxzW2VdO3JldHVybiB0P3QubGVuZ3RoOjB9LF9yb3dDb3VudEZvckxldmVsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucm93TGV2ZWxzW2VdO3JldHVybiB0P3QubGVuZ3RoOjB9LGNsZWFyU2VsZWN0aW9uOmZ1bmN0aW9uKCl7dGhpcy5jb250ZW50LmFkZCh0aGlzLmRhdGVzSGVhZGVyKS5maW5kKFwiLmstc3RhdGUtc2VsZWN0ZWRcIikucmVtb3ZlQXR0cihcImlkXCIpLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITEpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiKX0sX3VwZGF0ZURpcmVjdGlvbjpmdW5jdGlvbihlLHQsbixpLHIpe3ZhciBvPWUuaXNBbGxEYXksYT10WzBdLnN0YXJ0LHM9dFt0Lmxlbmd0aC0xXS5lbmQ7biYmKHI/b3x8YS5pbmRleCE9PXMuaW5kZXh8fGEuY29sbGVjdGlvbkluZGV4IT09cy5jb2xsZWN0aW9uSW5kZXh8fChlLmJhY2t3YXJkPWkpOihvJiZhLmluZGV4PT09cy5pbmRleHx8IW8mJmEuY29sbGVjdGlvbkluZGV4PT09cy5jb2xsZWN0aW9uSW5kZXgpJiYoZS5iYWNrd2FyZD1pKSl9LF9jaGFuZ2VWaWV3UGVyaW9kOmZ1bmN0aW9uKGUsbixpKXt2YXIgcixvLGEscztyZXR1cm4gaT90OihyPW4/dGhpcy5wcmV2aW91c0RhdGUoKTp0aGlzLm5leHREYXRlKCksbz1lLnN0YXJ0LGE9ZS5lbmQsZS5zdGFydD1uZXcgRGF0ZShyKSxlLmVuZD1uZXcgRGF0ZShyKSxzPWUuaXNBbGxEYXk/ZzptKGEpLGMoZS5zdGFydCxtKG8pKSxjKGUuZW5kLHMpLHRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKXx8KGUuZ3JvdXBJbmRleD1uP3RoaXMuZ3JvdXBzLmxlbmd0aC0xOjApLGUuZXZlbnRzPVtdLCEwKX19KTt1KCEwLGwse011bHRpRGF5Vmlldzp4LERheVZpZXc6eC5leHRlbmQoe29wdGlvbnM6e25hbWU6XCJEYXlWaWV3XCIsdGl0bGU6XCJEYXlcIn0sbmFtZTpcImRheVwifSksV2Vla1ZpZXc6eC5leHRlbmQoe29wdGlvbnM6e25hbWU6XCJXZWVrVmlld1wiLHRpdGxlOlwiV2Vla1wiLHNlbGVjdGVkRGF0ZUZvcm1hdDpcInswOkR9IC0gezE6RH1cIn0sbmFtZTpcIndlZWtcIixjYWxjdWxhdGVEYXRlUmFuZ2U6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy5vcHRpb25zLmRhdGUsaT1zLmRhdGUuZGF5T2ZXZWVrKG4sdGhpcy5jYWxlbmRhckluZm8oKS5maXJzdERheSwtMSkscj1bXTtmb3IoZT0wLHQ9Nzt0PmU7ZSsrKXIucHVzaChpKSxpPXMuZGF0ZS5uZXh0RGF5KGkpO3RoaXMuX3JlbmRlcihyKX19KSxXb3JrV2Vla1ZpZXc6eC5leHRlbmQoe29wdGlvbnM6e25hbWU6XCJXb3JrV2Vla1ZpZXdcIix0aXRsZTpcIldvcmsgV2Vla1wiLHNlbGVjdGVkRGF0ZUZvcm1hdDpcInswOkR9IC0gezE6RH1cIn0sbmFtZTpcIndvcmtXZWVrXCIsbmV4dERhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gcy5kYXRlLmRheU9mV2VlayhzLmRhdGUubmV4dERheSh0aGlzLmVuZERhdGUoKSksdGhpcy5vcHRpb25zLndvcmtXZWVrU3RhcnQsMSl9LHByZXZpb3VzRGF0ZTpmdW5jdGlvbigpe3JldHVybiBzLmRhdGUucHJldmlvdXNEYXkodGhpcy5zdGFydERhdGUoKSl9LGNhbGN1bGF0ZURhdGVSYW5nZTpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLm9wdGlvbnMuZGF0ZSx0PXMuZGF0ZS5kYXlPZldlZWsoZSx0aGlzLm9wdGlvbnMud29ya1dlZWtTdGFydCwtMSksbj1zLmRhdGUuZGF5T2ZXZWVrKHQsdGhpcy5vcHRpb25zLndvcmtXZWVrRW5kLDEpLGk9W107bj49dDspaS5wdXNoKHQpLHQ9cy5kYXRlLm5leHREYXkodCk7dGhpcy5fcmVuZGVyKGkpfX0pfSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dmFyIHQsbixpPTA7Zm9yKHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspaSs9ZVt0XS5pdGVtcy5sZW5ndGg7cmV0dXJuIGl9ZnVuY3Rpb24gbihlLHQpe3JldHVybiBlLnZhbHVlUHJpbWl0aXZlJiYodD1vLmdldHRlcihlLmRhdGFWYWx1ZUZpZWxkKSh0KSksdH1mdW5jdGlvbiBpKGUpe2Zvcih2YXIgdCxuPTAsaT1lLmxlbmd0aCxvPVtdO2k+bjtuKyspdD1lW25dLHQuZ3JvdXBzPyh0PXIodC5ncm91cHMpLG89by5jb25jYXQodCkpOm89by5jb25jYXQocih0Lml0ZW1zKSk7cmV0dXJuIG99ZnVuY3Rpb24gcihlKXtmb3IodmFyIHQ9W10uY29uY2F0KGUpLG49dC5zaGlmdCgpLGk9W10scj1bXS5wdXNoO247KW4uZ3JvdXBzP3IuYXBwbHkodCxuLmdyb3Vwcyk6bi5pdGVtcz9yLmFwcGx5KHQsbi5pdGVtcyk6ci5jYWxsKGksbiksbj10LnNoaWZ0KCk7cmV0dXJuIGl9dmFyIG89d2luZG93LmtlbmRvLGE9by51aSxzPVwiLmtlbmRvQWdlbmRhVmlld1wiLGw9JzxkaXYgY2xhc3M9XCJrLXRhc2tcIiB0aXRsZT1cIiM6dGl0bGUucmVwbGFjZSgvXCIvZyxcIlxcJ1wiKSNcIiBkYXRhLSM9a2VuZG8ubnMjdWlkPVwiIz11aWQjXCI+IyBpZiAocmVzb3VyY2VzWzBdKSB7IzxzcGFuIGNsYXNzPVwiay1zY2hlZHVsZXItbWFya1wiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojPXJlc291cmNlc1swXS5jb2xvciNcIj48L3NwYW4+IyB9ICMjIGlmIChkYXRhLmlzRXhjZXB0aW9uKCkpIHsgIzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1leGNlcHRpb25cIj48L3NwYW4+IyB9IGVsc2UgaWYgKGRhdGEuaXNSZWN1cnJpbmcoKSkgeyM8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktcmVmcmVzaFwiPjwvc3Bhbj4jIH0gI3swfSNpZiAoc2hvd0RlbGV0ZSkgeyM8YSBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstbGluayBrLWV2ZW50LWRlbGV0ZVwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstc2ktY2xvc2VcIj48L3NwYW4+PC9hPiN9IzwvZGl2Pic7YS5BZ2VuZGFWaWV3PWEuU2NoZWR1bGVyVmlldy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXthLlNjaGVkdWxlclZpZXcuZm4uaW5pdC5jYWxsKHRoaXMsdCxuKSxuPXRoaXMub3B0aW9ucyxuLmVkaXRhYmxlJiYobi5lZGl0YWJsZT1lLmV4dGVuZCh7XCJkZWxldGVcIjohMH0sbi5lZGl0YWJsZSx7Y3JlYXRlOiExLHVwZGF0ZTohMX0pKSx0aGlzLnRpdGxlPW4udGl0bGUsdGhpcy5uYW1lPVwiYWdlbmRhXCIsdGhpcy5fZXZlbnRUZW1wbGF0ZT10aGlzLl9ldmVudFRtcGwobi5ldmVudFRlbXBsYXRlLGwpLHRoaXMuX2RhdGVUZW1wbGF0ZT1vLnRlbXBsYXRlKG4uZXZlbnREYXRlVGVtcGxhdGUpLHRoaXMuX2dyb3VwVGVtcGxhdGU9by50ZW1wbGF0ZShuLmV2ZW50R3JvdXBUZW1wbGF0ZSksdGhpcy5fdGltZVRlbXBsYXRlPW8udGVtcGxhdGUobi5ldmVudFRpbWVUZW1wbGF0ZSksdGhpcy5lbGVtZW50Lm9uKFwibW91c2VlbnRlclwiK3MsXCIuay1zY2hlZHVsZXItYWdlbmRhIC5rLXNjaGVkdWxlci1jb250ZW50IHRyXCIsXCJfbW91c2VlbnRlclwiKS5vbihcIm1vdXNlbGVhdmVcIitzLFwiLmstc2NoZWR1bGVyLWFnZW5kYSAuay1zY2hlZHVsZXItY29udGVudCB0clwiLFwiX21vdXNlbGVhdmVcIikub24oXCJjbGlja1wiK3MsXCIuay1zY2hlZHVsZXItYWdlbmRhIC5rLXNjaGVkdWxlci1jb250ZW50IC5rLWxpbms6aGFzKC5rLXNpLWNsb3NlKVwiLFwiX3JlbW92ZVwiKSx0aGlzLl9yZW5kZXJMYXlvdXQobi5kYXRlKX0sX21vdXNlZW50ZXI6ZnVuY3Rpb24odCl7ZSh0LmN1cnJlbnRUYXJnZXQpLmFkZENsYXNzKFwiay1zdGF0ZS1ob3ZlclwiKX0sX21vdXNlbGVhdmU6ZnVuY3Rpb24odCl7ZSh0LmN1cnJlbnRUYXJnZXQpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1ob3ZlclwiKX0sX3JlbW92ZTpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdGhpcy50cmlnZ2VyKFwicmVtb3ZlXCIse3VpZDplKHQuY3VycmVudFRhcmdldCkuY2xvc2VzdChcIi5rLXRhc2tcIikuYXR0cihvLmF0dHIoXCJ1aWRcIikpfSl9LG5leHREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIG8uZGF0ZS5uZXh0RGF5KHRoaXMuc3RhcnREYXRlKCkpfSxzdGFydERhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhcnREYXRlfSxlbmREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuZERhdGV9LHByZXZpb3VzRGF0ZTpmdW5jdGlvbigpe3JldHVybiBvLmRhdGUucHJldmlvdXNEYXkodGhpcy5zdGFydERhdGUoKSl9LF9yZW5kZXJMYXlvdXQ6ZnVuY3Rpb24oZSl7dGhpcy5fc3RhcnREYXRlPWUsdGhpcy5fZW5kRGF0ZT1vLmRhdGUuYWRkRGF5cyhlLDcpLHRoaXMuY3JlYXRlTGF5b3V0KHRoaXMuX2xheW91dCgpKSx0aGlzLnRhYmxlLmFkZENsYXNzKFwiay1zY2hlZHVsZXItYWdlbmRhXCIpXG59LF9sYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT1be3RleHQ6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLnRpbWUsY2xhc3NOYW1lOlwiay1zY2hlZHVsZXItdGltZWNvbHVtblwifSx7dGV4dDp0aGlzLm9wdGlvbnMubWVzc2FnZXMuZXZlbnR9XTtpZih0aGlzLl9pc01vYmlsZVBob25lVmlldygpfHxpLnNwbGljZSgwLDAse3RleHQ6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLmRhdGUsY2xhc3NOYW1lOlwiay1zY2hlZHVsZXItZGF0ZWNvbHVtblwifSksZT10aGlzLmdyb3VwZWRSZXNvdXJjZXMsZS5sZW5ndGgpe2Zvcih0PVtdLG49MDtlLmxlbmd0aD5uO24rKyl0LnB1c2goe3RleHQ6XCJcIixjbGFzc05hbWU6XCJrLXNjaGVkdWxlci1ncm91cGNvbHVtblwifSk7aT10LmNvbmNhdChpKX1yZXR1cm57Y29sdW1uczppfX0sX3Rhc2tzOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLGEscyxsLGM9W107Zm9yKHQ9MDtlLmxlbmd0aD50O3QrKylpZihuPWVbdF0saT1uLnN0YXJ0LHI9bi5lbmQsYT0oby5kYXRlLmdldERhdGUociktby5kYXRlLmdldERhdGUoaSkpL28uZGF0ZS5NU19QRVJfREFZKzEscz1uLmNsb25lKCkscy5zdGFydERhdGU9by5kYXRlLmdldERhdGUoaSkscy5zdGFydERhdGU+PXRoaXMuc3RhcnREYXRlKCkmJmMucHVzaChzKSxhPjEpZm9yKHMuZW5kPW8uZGF0ZS5uZXh0RGF5KGkpLHMuaGVhZD0hMCxsPTE7YT5sO2wrKylpPXMuZW5kLHM9bi5jbG9uZSgpLHMuc3RhcnQ9aSxzLnN0YXJ0RGF0ZT1vLmRhdGUuZ2V0RGF0ZShpKSxzLmVuZD1vLmRhdGUubmV4dERheShpKSxsPT1hLTE/KHMuZW5kPW5ldyBEYXRlKHMuc3RhcnQuZ2V0RnVsbFllYXIoKSxzLnN0YXJ0LmdldE1vbnRoKCkscy5zdGFydC5nZXREYXRlKCksci5nZXRIb3VycygpLHIuZ2V0TWludXRlcygpLHIuZ2V0U2Vjb25kcygpLHIuZ2V0TWlsbGlzZWNvbmRzKCkpLHMudGFpbD0hMCk6KHMuaXNBbGxEYXk9ITAscy5taWRkbGU9ITApLHMuZW5kPD10aGlzLmVuZERhdGUoKSYmcy5zdGFydD49dGhpcy5zdGFydERhdGUoKSYmYy5wdXNoKHMpO3JldHVybiBuZXcgby5kYXRhLlF1ZXJ5KGMpLnNvcnQoW3tmaWVsZDpcInN0YXJ0XCIsZGlyOlwiYXNjXCJ9LHtmaWVsZDpcImVuZFwiLGRpcjpcImFzY1wifV0pLmdyb3VwQnkoe2ZpZWxkOlwic3RhcnREYXRlXCJ9KS50b0FycmF5KCl9LF9yZW5kZXJUYXNrR3JvdXBzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLGEscyxsLGMsZCx1LGg9W10scD10aGlzLm9wdGlvbnMuZWRpdGFibGUsZj1wJiZwLmRlc3Ryb3khPT0hMSYmIXRoaXMuX2lzTW9iaWxlKCksZz10aGlzLl9pc01vYmlsZVBob25lVmlldygpO2ZvcihuPTA7ZS5sZW5ndGg+bjtuKyspZm9yKGk9ZVtuXS52YWx1ZSxyPWVbbl0uaXRlbXMsYT1vLmRhdGUuaXNUb2RheShpKSxzPTA7ci5sZW5ndGg+cztzKyspe2lmKGw9cltzXSxjPVtdLGQ9Zz9bXTpjLDA9PT1uJiYwPT09cyYmdC5sZW5ndGgpZm9yKHU9MDt0Lmxlbmd0aD51O3UrKylkLnB1c2goby5mb3JtYXQoJzx0ZCBjbGFzcz1cImstc2NoZWR1bGVyLWdyb3VwY29sdW1uezJ9XCIgcm93c3Bhbj1cInswfVwiPnsxfTwvdGQ+Jyx0W3VdLnJvd1NwYW4sdGhpcy5fZ3JvdXBUZW1wbGF0ZSh7dmFsdWU6dFt1XS50ZXh0fSksdFt1XS5jbGFzc05hbWUpKTswPT09cyYmKGc/KGQucHVzaChvLmZvcm1hdCgnPHRkIGNsYXNzPVwiay1zY2hlZHVsZXItZGF0ZWNvbHVtblwiIGNvbHNwYW49XCIyXCI+ezB9PC90ZD4nLHRoaXMuX2RhdGVUZW1wbGF0ZSh7ZGF0ZTppfSkpKSxoLnB1c2goJzx0ciByb2xlPVwicm93XCIgYXJpYS1zZWxlY3RlZD1cImZhbHNlXCInKyhhPycgY2xhc3M9XCJrLXRvZGF5XCI+JzpcIj5cIikrZC5qb2luKFwiXCIpK1wiPC90cj5cIikpOmMucHVzaChvLmZvcm1hdCgnPHRkIGNsYXNzPVwiay1zY2hlZHVsZXItZGF0ZWNvbHVtbnszfXsyfVwiIHJvd3NwYW49XCJ7MH1cIj57MX08L3RkPicsci5sZW5ndGgsdGhpcy5fZGF0ZVRlbXBsYXRlKHtkYXRlOml9KSxuIT1lLmxlbmd0aC0xfHx0Lmxlbmd0aD9cIlwiOlwiIGstbGFzdFwiLHQubGVuZ3RoP1wiXCI6XCIgay1maXJzdFwiKSkpLGwuZm9ybWF0PWwuaGVhZD9cInswOnR9XCI6bC50YWlsP1wiezE6dH1cIjpcInswOnR9LXsxOnR9XCIsbC5yZXNvdXJjZXM9dGhpcy5ldmVudFJlc291cmNlcyhsKSxjLnB1c2goby5mb3JtYXQoJzx0ZCBjbGFzcz1cImstc2NoZWR1bGVyLXRpbWVjb2x1bW5cIj48ZGl2PnswfXsxfXsyfTwvZGl2PjwvdGQ+PHRkPnszfTwvdGQ+JyxsLnRhaWx8fGwubWlkZGxlPyc8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctd1wiPjwvc3Bhbj4nOlwiXCIsdGhpcy5fdGltZVRlbXBsYXRlKGwuY2xvbmUoe3N0YXJ0Omwuc3RhcnRUaW1lfHxsLnN0YXJ0LGVuZDpsLmVuZFRpbWV8fGwuZW5kfSkpLGwuaGVhZHx8bC5taWRkbGU/JzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy1lXCI+PC9zcGFuPic6XCJcIix0aGlzLl9ldmVudFRlbXBsYXRlKGwuY2xvbmUoe3Nob3dEZWxldGU6Zn0pKSkpLGgucHVzaCgnPHRyIHJvbGU9XCJyb3dcIiBhcmlhLXNlbGVjdGVkPVwiZmFsc2VcIicrKGE/JyBjbGFzcz1cImstdG9kYXlcIj4nOlwiPlwiKStjLmpvaW4oXCJcIikrXCI8L3RyPlwiKX1yZXR1cm4gaC5qb2luKFwiXCIpfSxyZW5kZXI6ZnVuY3Rpb24oZSl7dmFyIHQsbixyPXRoaXMuY29udGVudC5maW5kKFwidGFibGVcIikuZW1wdHkoKSxvPVtdO2UubGVuZ3RoPjAmJih0PXRoaXMuZ3JvdXBlZFJlc291cmNlcyx0Lmxlbmd0aD8obz10aGlzLl9jcmVhdGVHcm91cENvbmZpZ3VyYXRpb24oZSx0LG51bGwpLHRoaXMuX3JlbmRlckdyb3VwcyhvLHIsW10pKToobz10aGlzLl90YXNrcyhlKSxyLmFwcGVuZCh0aGlzLl9yZW5kZXJUYXNrR3JvdXBzKG8sW10pKSkpLG49dGhpcy5fZXZlbnRzTGlzdD1pKG8pLHRoaXMuX2FuZ3VsYXJJdGVtcyhyLG4pLHRoaXMucmVmcmVzaExheW91dCgpLHRoaXMudHJpZ2dlcihcImFjdGl2YXRlXCIpfSxfYW5ndWxhckl0ZW1zOmZ1bmN0aW9uKGUsdCl7dGhpcy5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7dmFyIG49W10saT10Lm1hcChmdW5jdGlvbih0KXtyZXR1cm4gbi5wdXNoKHtkYXRhSXRlbTp0fSksZS5maW5kKFwiLmstdGFza1tcIitvLmF0dHIoXCJ1aWRcIikrXCI9XCIrdC51aWQrXCJdXCIpfSk7cmV0dXJue2VsZW1lbnRzOmksZGF0YTpufX0pfSxfcmVuZGVyR3JvdXBzOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG87Zm9yKGk9MCxyPWUubGVuZ3RoO3I+aTtpKyspbz1uLnNwbGljZSgwKSxvLnB1c2goZVtpXSksZVtpXS5ncm91cHM/dGhpcy5fcmVuZGVyR3JvdXBzKGVbaV0uZ3JvdXBzLHQsbyk6dC5hcHBlbmQodGhpcy5fcmVuZGVyVGFza0dyb3VwcyhlW2ldLml0ZW1zLG8pKX0sX2NyZWF0ZUdyb3VwQ29uZmlndXJhdGlvbjpmdW5jdGlvbihlLGkscil7dmFyIHMsbCxjLGQsdSxoLHAsZj1pWzBdLGc9W10sbT1mLmRhdGFTb3VyY2UudmlldygpLHY9dGhpcy5faXNNb2JpbGVQaG9uZVZpZXcoKTtmb3Iocz0wO20ubGVuZ3RoPnM7cysrKWw9bihmLG1bc10pLGM9bmV3IG8uZGF0YS5RdWVyeShlKS5maWx0ZXIoe2ZpZWxkOmYuZmllbGQsb3BlcmF0b3I6YS5TY2hlZHVsZXJWaWV3Lmdyb3VwRXFGaWx0ZXIobCl9KS50b0FycmF5KCksYy5sZW5ndGgmJihkPXRoaXMuX3Rhc2tzKGMpLHU9cj9cIlwiOlwiIGstZmlyc3RcIixzPT09bS5sZW5ndGgtMSYmKCFyfHxyLmNsYXNzTmFtZS5pbmRleE9mKFwiay1sYXN0XCIpPi0xKSYmKHUrPVwiIGstbGFzdFwiKSxoPXt0ZXh0Om8uZ2V0dGVyKGYuZGF0YVRleHRGaWVsZCkobVtzXSksdmFsdWU6bCxyb3dTcGFuOjAsY2xhc3NOYW1lOnV9LGkubGVuZ3RoPjE/KGguZ3JvdXBzPXRoaXMuX2NyZWF0ZUdyb3VwQ29uZmlndXJhdGlvbihjLGkuc2xpY2UoMSksaCksciYmKHIucm93U3Bhbis9aC5yb3dTcGFuKSk6KGguaXRlbXM9ZCxwPXQoaC5pdGVtcyksdiYmKHArPWguaXRlbXMubGVuZ3RoKSxoLnJvd1NwYW49cCxyJiYoci5yb3dTcGFuKz1wKSksZy5wdXNoKGgpKTtyZXR1cm4gZ30sc2VsZWN0aW9uQnlFbGVtZW50OmZ1bmN0aW9uKHQpe3ZhciBuLGkscjtyZXR1cm4gdD1lKHQpLHQuaGFzQ2xhc3MoXCJrLXNjaGVkdWxlci1kYXRlY29sdW1uXCIpP3ZvaWQgMDoodGhpcy5faXNNb2JpbGUoKT8ocj10LnBhcmVudCgpLG49ci5wYXJlbnQoKS5jaGlsZHJlbigpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBlKHRoaXMpLmNoaWxkcmVuKFwiOm5vdCguay1zY2hlZHVsZXItZGF0ZWNvbHVtbilcIikubGVuZ3RofSkuaW5kZXgocikpOm49dC5wYXJlbnQoKS5pbmRleCgpLGk9dGhpcy5fZXZlbnRzTGlzdFtuXSx7aW5kZXg6bixzdGFydDppLnN0YXJ0LGVuZDppLmVuZCxpc0FsbERheTppLmlzQWxsRGF5LHVpZDppLnVpZH0pfSxzZWxlY3Q6ZnVuY3Rpb24oZSl7dGhpcy5jbGVhclNlbGVjdGlvbigpO3ZhciB0PXRoaXMudGFibGUuZmluZChcIi5rLXRhc2tcIikuZXEoZS5pbmRleCkuY2xvc2VzdChcInRyXCIpLmFkZENsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKVswXTt0aGlzLmN1cnJlbnQodCl9LG1vdmU6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPSExLHI9ZS5pbmRleDtyZXR1cm4gdD09by5rZXlzLlVQPyhyLS0saT0hMCk6dD09by5rZXlzLkRPV04mJihyKyssaT0hMCksaSYmKG49dGhpcy5fZXZlbnRzTGlzdFtyXSxuJiYoZS5zdGFydD1uLnN0YXJ0LGUuZW5kPW4uZW5kLGUuaXNBbGxEYXk9bi5pc0FsbERheSxlLmV2ZW50cz1bbi51aWRdLGUuaW5kZXg9cikpLGl9LG1vdmVUb0V2ZW50OmZ1bmN0aW9uKCl7cmV0dXJuITF9LGNvbnN0cmFpblNlbGVjdGlvbjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9ldmVudHNMaXN0WzBdO3QmJihlLnN0YXJ0PXQuc3RhcnQsZS5lbmQ9dC5lbmQsZS5pc0FsbERheT10LmlzQWxsRGF5LGUuZXZlbnRzPVt0LnVpZF0sZS5pbmRleD0wKX0saXNJblJhbmdlOmZ1bmN0aW9uKCl7cmV0dXJuITB9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQmJnRoaXMuZWxlbWVudC5vZmYocyksYS5TY2hlZHVsZXJWaWV3LmZuLmRlc3Ryb3kuY2FsbCh0aGlzKX0sb3B0aW9uczp7dGl0bGU6XCJBZ2VuZGFcIixuYW1lOlwiYWdlbmRhXCIsZWRpdGFibGU6ITAsc2VsZWN0ZWREYXRlRm9ybWF0OlwiezA6RH0tezE6RH1cIixldmVudFRlbXBsYXRlOlwiIzp0aXRsZSNcIixldmVudFRpbWVUZW1wbGF0ZTpcIiNpZihkYXRhLmlzQWxsRGF5KSB7IyM9dGhpcy5vcHRpb25zLm1lc3NhZ2VzLmFsbERheSMjfSBlbHNlIHsgIyM9a2VuZG8uZm9ybWF0KGZvcm1hdCwgc3RhcnQsIGVuZCkjIyB9ICNcIixldmVudERhdGVUZW1wbGF0ZTonPHN0cm9uZyBjbGFzcz1cImstc2NoZWR1bGVyLWFnZW5kYWRheVwiPiM9a2VuZG8udG9TdHJpbmcoZGF0ZSwgXCJkZFwiKSM8L3N0cm9uZz48ZW0gY2xhc3M9XCJrLXNjaGVkdWxlci1hZ2VuZGF3ZWVrXCI+Iz1rZW5kby50b1N0cmluZyhkYXRlLFwiZGRkZFwiKSM8L2VtPjxzcGFuIGNsYXNzPVwiay1zY2hlZHVsZXItYWdlbmRhZGF0ZVwiPiM9a2VuZG8udG9TdHJpbmcoZGF0ZSwgXCJ5XCIpIzwvc3Bhbj4nLGV2ZW50R3JvdXBUZW1wbGF0ZTonPHN0cm9uZyBjbGFzcz1cImstc2NoZWR1bGVyLWFkZ2VuZGFncm91cFwiPiM9dmFsdWUjPC9zdHJvbmc+JyxtZXNzYWdlczp7ZXZlbnQ6XCJFdmVudFwiLGRhdGU6XCJEYXRlXCIsdGltZTpcIlRpbWVcIixhbGxEYXk6XCJhbGwgZGF5XCJ9fX0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCl7cmV0dXJuIGUuc2xpY2UodCkuY29uY2F0KGUuc2xpY2UoMCx0KSl9ZnVuY3Rpb24gbihlLHQpe2Zvcih2YXIgbj10LmZpcnN0RGF5LGk9bmV3IERhdGUoZS5nZXRGdWxsWWVhcigpLGUuZ2V0TW9udGgoKSwwLGUuZ2V0SG91cnMoKSxlLmdldE1pbnV0ZXMoKSxlLmdldFNlY29uZHMoKSxlLmdldE1pbGxpc2Vjb25kcygpKTtpLmdldERheSgpIT1uOylyLmRhdGUuc2V0VGltZShpLC0xKmQpO3JldHVybiBpfWZ1bmN0aW9uIGkoZSx0LG4pe3ZhciBpLHI9dCxvPW47cmV0dXJuIGk9ZSxpPj1yJiZvPj1pfXZhciByPXdpbmRvdy5rZW5kbyxvPXIudWksYT1vLlNjaGVkdWxlclZpZXcscz1cIi5rZW5kb01vbnRoVmlld1wiLGw9ZS5leHRlbmQsYz1yLmRhdGUuZ2V0RGF0ZSxkPXIuZGF0ZS5NU19QRVJfREFZLHU9NixoPTcscD1yLnRlbXBsYXRlKCc8c3BhbiBjbGFzcz1cImstbGluayBrLW5hdi1kYXlcIj4jOmtlbmRvLnRvU3RyaW5nKGRhdGUsIFwiZGRcIikjPC9zcGFuPicpLGY9JzxkaXYgcm9sZT1cImdyaWRjZWxsXCIgYXJpYS1zZWxlY3RlZD1cImZhbHNlXCIgZGF0YS0jPW5zI3VpZD1cIiM9dWlkI1wiI2lmIChyZXNvdXJjZXNbMF0pIHsgI3N0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojPXJlc291cmNlc1swXS5jb2xvciAjOyBib3JkZXItY29sb3I6ICM9cmVzb3VyY2VzWzBdLmNvbG9yI1wiY2xhc3M9XCJrLWV2ZW50Iz1pbnZlcnNlQ29sb3IgPyBcIiBrLWV2ZW50LWludmVyc2VcIiA6IFwiXCIjXCIjfSBlbHNlIHsjY2xhc3M9XCJrLWV2ZW50XCIjfSM+PHNwYW4gY2xhc3M9XCJrLWV2ZW50LWFjdGlvbnNcIj4jIGlmKGRhdGEudGFpbCB8fCBkYXRhLm1pZGRsZSkgeyM8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctd1wiPjwvc3Bhbj4jfSMjIGlmKGRhdGEuaXNFeGNlcHRpb24oKSkgeyM8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktZXhjZXB0aW9uXCI+PC9zcGFuPiMgfSBlbHNlIGlmKGRhdGEuaXNSZWN1cnJpbmcoKSkgeyM8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktcmVmcmVzaFwiPjwvc3Bhbj4jfSM8L3NwYW4+ezB9PHNwYW4gY2xhc3M9XCJrLWV2ZW50LWFjdGlvbnNcIj4jaWYgKHNob3dEZWxldGUpIHsjPGEgaHJlZj1cIlxcXFwjXCIgY2xhc3M9XCJrLWxpbmsgay1ldmVudC1kZWxldGVcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLXNpLWNsb3NlXCI+PC9zcGFuPjwvYT4jfSMjIGlmKGRhdGEuaGVhZCB8fCBkYXRhLm1pZGRsZSkgeyM8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctZVwiPjwvc3Bhbj4jfSM8L3NwYW4+IyBpZihyZXNpemFibGUgJiYgIWRhdGEudGFpbCAmJiAhZGF0YS5taWRkbGUpIHsjPHNwYW4gY2xhc3M9XCJrLXJlc2l6ZS1oYW5kbGUgay1yZXNpemUtd1wiPjwvc3Bhbj4jfSMjIGlmKHJlc2l6YWJsZSAmJiAhZGF0YS5oZWFkICYmICFkYXRhLm1pZGRsZSkgeyM8c3BhbiBjbGFzcz1cImstcmVzaXplLWhhbmRsZSBrLXJlc2l6ZS1lXCI+PC9zcGFuPiN9IzwvZGl2PicsZz1yLnRlbXBsYXRlKCc8ZGl2IHRpdGxlPVwiIz10aXRsZS5yZXBsYWNlKC9cIi9nLFwiJlxcXFwjMzQ7XCIpI1wiPjxkaXYgY2xhc3M9XCJrLWV2ZW50LXRlbXBsYXRlXCI+Izp0aXRsZSM8L2Rpdj48L2Rpdj4nKSxtPXIudGVtcGxhdGUoJzxkaXYgc3R5bGU9XCJ3aWR0aDojPXdpZHRoI3B4O2xlZnQ6Iz1sZWZ0I3B4O3RvcDojPXRvcCNweFwiIGNsYXNzPVwiay1tb3JlLWV2ZW50cyBrLWJ1dHRvblwiPjxzcGFuPi4uLjwvc3Bhbj48L2Rpdj4nKTtvLk1vbnRoVmlldz1hLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7YS5mbi5pbml0LmNhbGwobixlLHQpLG4udGl0bGU9bi5vcHRpb25zLnRpdGxlLG4ubmFtZT1cIm1vbnRoXCIsbi5fdGVtcGxhdGVzKCksbi5fZWRpdGFibGUoKSxuLl9yZW5kZXJMYXlvdXQobi5vcHRpb25zLmRhdGUpLG4uX2dyb3VwcygpfSxfdXBkYXRlRGlyZWN0aW9uOmZ1bmN0aW9uKGUsdCxuLGkscil7dmFyIG8sYSxzLGwsYztuJiYobz10WzBdLnN0YXJ0LGE9dFt0Lmxlbmd0aC0xXS5lbmQscz1vLmluZGV4PT09YS5pbmRleCxsPW8uY29sbGVjdGlvbkluZGV4PT09YS5jb2xsZWN0aW9uSW5kZXgsYz1yP3MmJmx8fGw6cyYmbCxjJiYoZS5iYWNrd2FyZD1pKSl9LF9jaGFuZ2VWaWV3UGVyaW9kOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1uPzc6MTtyZXR1cm4gdCYmKGkqPS0xKSxlLnN0YXJ0PXIuZGF0ZS5hZGREYXlzKGUuc3RhcnQsaSksZS5lbmQ9ci5kYXRlLmFkZERheXMoZS5lbmQsaSksKCFufHxuJiZ0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCkpJiYoZS5ncm91cEluZGV4PXQ/dGhpcy5ncm91cHMubGVuZ3RoLTE6MCksZS5ldmVudHM9W10sITB9LF9jb250aW51b3VzU2xvdDpmdW5jdGlvbihlLHQsbil7dmFyIGk9ZS5iYWNrd2FyZD8wOnQubGVuZ3RoLTEscj10aGlzLmdyb3Vwc1tlLmdyb3VwSW5kZXhdO3JldHVybiByLmNvbnRpbnVvdXNTbG90KHRbaV0uc3RhcnQsbil9LF9jaGFuZ2VHcm91cENvbnRpbnVvdXNseTpmdW5jdGlvbihlLHQsbixpKXt2YXIgcixvLGEscztyZXR1cm4gbnx8KHI9ZS5ncm91cEluZGV4LG89dGhpcy5ncm91cHMubGVuZ3RoLTEsYT10aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCkscz10aGlzLmdyb3Vwc1tyXSwhdCYmYT8odD1zW2k/XCJsYXN0U2xvdFwiOlwiZmlyc3RTbG90XCJdKCkscis9aT8tMToxKTp0JiYhYSYmKHI9aT9vOjApLCgwPnJ8fHI+bykmJihyPWk/bzowLHQ9bnVsbCksZS5ncm91cEluZGV4PXIpLHR9LF9ub3JtYWxpemVIb3Jpem9udGFsU2VsZWN0aW9uOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaTtyZXR1cm4gaT1uP3RbMF0uc3RhcnQ6dFt0Lmxlbmd0aC0xXS5lbmR9LF9ub3JtYWxpemVWZXJ0aWNhbFNlbGVjdGlvbjpmdW5jdGlvbihlLHQpe3ZhciBuO3JldHVybiBuPWUuYmFja3dhcmQ/dFswXS5zdGFydDp0W3QubGVuZ3RoLTFdLmVuZH0sX3RlbXBsYXRlczpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucyx0PWwoe30sci5UZW1wbGF0ZSxlLnRlbXBsYXRlU2V0dGluZ3MpO3RoaXMuZXZlbnRUZW1wbGF0ZT10aGlzLl9ldmVudFRtcGwoZS5ldmVudFRlbXBsYXRlLGYpLHRoaXMuZGF5VGVtcGxhdGU9ci50ZW1wbGF0ZShlLmRheVRlbXBsYXRlLHQpLHRoaXMuZ3JvdXBIZWFkZXJUZW1wbGF0ZT1yLnRlbXBsYXRlKGUuZ3JvdXBIZWFkZXJUZW1wbGF0ZSx0KX0sZGF0ZUZvclRpdGxlOmZ1bmN0aW9uKCl7cmV0dXJuIHIuZm9ybWF0KHRoaXMub3B0aW9ucy5zZWxlY3RlZERhdGVGb3JtYXQsdGhpcy5fZmlyc3REYXlPZk1vbnRoLHRoaXMuX2xhc3REYXlPZk1vbnRoKX0sbmV4dERhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gci5kYXRlLm5leHREYXkodGhpcy5fbGFzdERheU9mTW9udGgpfSxwcmV2aW91c0RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gci5kYXRlLnByZXZpb3VzRGF5KHRoaXMuX2ZpcnN0RGF5T2ZNb250aCl9LHN0YXJ0RGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGFydERhdGV9LGVuZERhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5kRGF0ZX0sX3JlbmRlckxheW91dDpmdW5jdGlvbih0KXt2YXIgaT10aGlzO3RoaXMuX2ZpcnN0RGF5T2ZNb250aD1yLmRhdGUuZmlyc3REYXlPZk1vbnRoKHQpLHRoaXMuX2xhc3REYXlPZk1vbnRoPXIuZGF0ZS5sYXN0RGF5T2ZNb250aCh0KSx0aGlzLl9zdGFydERhdGU9bih0LHRoaXMuY2FsZW5kYXJJbmZvKCkpLHRoaXMuY3JlYXRlTGF5b3V0KHRoaXMuX2xheW91dCgpKSx0aGlzLl9jb250ZW50KCksdGhpcy5yZWZyZXNoTGF5b3V0KCksdGhpcy5jb250ZW50Lm9uKFwiY2xpY2tcIitzLFwiLmstbmF2LWRheSwuay1tb3JlLWV2ZW50c1wiLGZ1bmN0aW9uKHQpe3ZhciBuPWUodC5jdXJyZW50VGFyZ2V0KS5vZmZzZXQoKSxyPWkuX3Nsb3RCeVBvc2l0aW9uKG4ubGVmdCxuLnRvcCk7dC5wcmV2ZW50RGVmYXVsdCgpLGkudHJpZ2dlcihcIm5hdmlnYXRlXCIse3ZpZXc6XCJkYXlcIixkYXRlOnIuc3RhcnREYXRlKCl9KX0pfSxfZWRpdGFibGU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuZWRpdGFibGUmJiF0aGlzLl9pc01vYmlsZVBob25lVmlldygpJiYodGhpcy5faXNNb2JpbGUoKT90aGlzLl90b3VjaEVkaXRhYmxlKCk6dGhpcy5fbW91c2VFZGl0YWJsZSgpKX0sX21vdXNlRWRpdGFibGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QuZWxlbWVudC5vbihcImNsaWNrXCIrcyxcIi5rLXNjaGVkdWxlci1tb250aHZpZXcgLmstZXZlbnQgYTpoYXMoLmstc2ktY2xvc2UpXCIsZnVuY3Rpb24obil7dC50cmlnZ2VyKFwicmVtb3ZlXCIse3VpZDplKHRoaXMpLmNsb3Nlc3QoXCIuay1ldmVudFwiKS5hdHRyKHIuYXR0cihcInVpZFwiKSl9KSxuLnByZXZlbnREZWZhdWx0KCl9KSx0Lm9wdGlvbnMuZWRpdGFibGUuY3JlYXRlIT09ITEmJnQuZWxlbWVudC5vbihcImRibGNsaWNrXCIrcyxcIi5rLXNjaGVkdWxlci1tb250aHZpZXcgLmstc2NoZWR1bGVyLWNvbnRlbnQgdGRcIixmdW5jdGlvbihuKXt2YXIgaSxyPWUobi5jdXJyZW50VGFyZ2V0KS5vZmZzZXQoKSxvPXQuX3Nsb3RCeVBvc2l0aW9uKHIubGVmdCxyLnRvcCk7byYmKGk9dC5fcmVzb3VyY2VCeVNsb3QobyksdC50cmlnZ2VyKFwiYWRkXCIse2V2ZW50SW5mbzpsKHtpc0FsbERheTohMCxzdGFydDpvLnN0YXJ0RGF0ZSgpLGVuZDpvLnN0YXJ0RGF0ZSgpfSxpKX0pKSxuLnByZXZlbnREZWZhdWx0KCl9KSx0Lm9wdGlvbnMuZWRpdGFibGUudXBkYXRlIT09ITEmJnQuZWxlbWVudC5vbihcImRibGNsaWNrXCIrcyxcIi5rLXNjaGVkdWxlci1tb250aHZpZXcgLmstZXZlbnRcIixmdW5jdGlvbihuKXt0LnRyaWdnZXIoXCJlZGl0XCIse3VpZDplKHRoaXMpLmNsb3Nlc3QoXCIuay1ldmVudFwiKS5hdHRyKHIuYXR0cihcInVpZFwiKSl9KSxuLnByZXZlbnREZWZhdWx0KCl9KX0sX3RvdWNoRWRpdGFibGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3Qub3B0aW9ucy5lZGl0YWJsZS5jcmVhdGUhPT0hMSYmKHQuX2FkZFVzZXJFdmVudHM9bmV3IHIuVXNlckV2ZW50cyh0LmVsZW1lbnQse2ZpbHRlcjpcIi5rLXNjaGVkdWxlci1tb250aHZpZXcgLmstc2NoZWR1bGVyLWNvbnRlbnQgdGRcIix0YXA6ZnVuY3Rpb24obil7dmFyIGkscj1lKG4udGFyZ2V0KS5vZmZzZXQoKSxvPXQuX3Nsb3RCeVBvc2l0aW9uKHIubGVmdCxyLnRvcCk7byYmKGk9dC5fcmVzb3VyY2VCeVNsb3QobyksdC50cmlnZ2VyKFwiYWRkXCIse2V2ZW50SW5mbzpsKHtpc0FsbERheTohMCxzdGFydDpvLnN0YXJ0RGF0ZSgpLGVuZDpvLnN0YXJ0RGF0ZSgpfSxpKX0pKSxuLnByZXZlbnREZWZhdWx0KCl9fSkpLHQub3B0aW9ucy5lZGl0YWJsZS51cGRhdGUhPT0hMSYmKHQuX2VkaXRVc2VyRXZlbnRzPW5ldyByLlVzZXJFdmVudHModC5lbGVtZW50LHtmaWx0ZXI6XCIuay1zY2hlZHVsZXItbW9udGh2aWV3IC5rLWV2ZW50XCIsdGFwOmZ1bmN0aW9uKG4pezA9PT1lKG4uZXZlbnQudGFyZ2V0KS5jbG9zZXN0KFwiYTpoYXMoLmstc2ktY2xvc2UpXCIpLmxlbmd0aCYmKHQudHJpZ2dlcihcImVkaXRcIix7dWlkOmUobi50YXJnZXQpLmNsb3Nlc3QoXCIuay1ldmVudFwiKS5hdHRyKHIuYXR0cihcInVpZFwiKSl9KSxuLnByZXZlbnREZWZhdWx0KCkpfX0pKX0sc2VsZWN0aW9uQnlFbGVtZW50OmZ1bmN0aW9uKHQpe3ZhciBuPWUodCkub2Zmc2V0KCk7cmV0dXJuIHRoaXMuX3Nsb3RCeVBvc2l0aW9uKG4ubGVmdCxuLnRvcCl9LF9jb2x1bW5Db3VudEZvckxldmVsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY29sdW1uTGV2ZWxzW2VdO3JldHVybiB0P3QubGVuZ3RoOjB9LF9yb3dDb3VudEZvckxldmVsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucm93TGV2ZWxzW2VdO3JldHVybiB0P3QubGVuZ3RoOjB9LF9jb250ZW50OmZ1bmN0aW9uKCl7dmFyIGUsdD1cIjx0Ym9keT5cIixuPTEsaT10aGlzLmdyb3VwZWRSZXNvdXJjZXM7Zm9yKGkubGVuZ3RoJiZ0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCkmJihuPXRoaXMuX3Jvd0NvdW50Rm9yTGV2ZWwoaS5sZW5ndGgtMSkpLGU9MDtuPmU7ZSsrKXQrPXRoaXMuX2NyZWF0ZUNhbGVuZGFyKGUpO3QrPVwiPC90Ym9keT5cIix0aGlzLmNvbnRlbnQuZmluZChcInRhYmxlXCIpLmh0bWwodCl9LF9jcmVhdGVDYWxlbmRhcjpmdW5jdGlvbihlKXt2YXIgdCxuLGksbyxhPXRoaXMuc3RhcnREYXRlKCkscz1oKnUsbD1oLGM9W2FdLGQ9XCJcIixwPTEsZj10aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCksZz10aGlzLmdyb3VwZWRSZXNvdXJjZXM7Zm9yKGcubGVuZ3RoJiYoZnx8KHA9dGhpcy5fY29sdW1uQ291bnRGb3JMZXZlbChnLmxlbmd0aC0xKSkpLHRoaXMuX3Nsb3RJbmRpY2VzPXt9LHQ9MCxuPXMvbDtuPnQ7dCsrKXtmb3IoZCs9XCI8dHI+XCIsYy5wdXNoKGEpLGk9dCpsLG89MDtwPm87bysrKWQrPXRoaXMuX2NyZWF0ZVJvdyhhLGksbCxmP2U6byk7YT1yLmRhdGUuYWRkRGF5cyhhLGwpLGQrPVwiPC90cj5cIn1yZXR1cm4gdGhpcy5fd2Vla1N0YXJ0RGF0ZXM9Yyx0aGlzLl9lbmREYXRlPXIuZGF0ZS5wcmV2aW91c0RheShhKSxkfSxfY3JlYXRlUm93OmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciBvLGE9dGhpcyxzPWEuX2ZpcnN0RGF5T2ZNb250aCxsPWEuX2xhc3REYXlPZk1vbnRoLGQ9YS5kYXlUZW1wbGF0ZSx1PVwiXCIsaD1cIlwiLHA9ZnVuY3Rpb24oKXtyZXR1cm4gYS5fcmVzb3VyY2VCeVNsb3Qoe2dyb3VwSW5kZXg6aX0pfTtmb3Iobz0wO24+bztvKyspdT1cIlwiLHIuZGF0ZS5pc1RvZGF5KGUpJiYodSs9XCJrLXRvZGF5XCIpLHIuZGF0ZS5pc0luRGF0ZVJhbmdlKGUscyxsKXx8KHUrPVwiIGstb3RoZXItbW9udGhcIiksaCs9XCI8dGQgXCIsXCJcIiE9PXUmJihoKz0nY2xhc3M9XCInK3UrJ1wiJyksaCs9XCI+XCIsaCs9ZCh7ZGF0ZTplLHJlc291cmNlczpwfSksaCs9XCI8L3RkPlwiLGEuX3Nsb3RJbmRpY2VzW2MoZSkuZ2V0VGltZSgpXT10K28sZT1yLmRhdGUubmV4dERheShlKTtyZXR1cm4gaH0sX2xheW91dDpmdW5jdGlvbigpe3ZhciBuLGkscixvPXRoaXMuY2FsZW5kYXJJbmZvKCksYT10aGlzLl9pc01vYmlsZSgpP28uZGF5cy5uYW1lc1Nob3J0Om8uZGF5cy5uYW1lcyxzPXQoYSxvLmZpcnN0RGF5KSxsPWUubWFwKHMsZnVuY3Rpb24oZSl7cmV0dXJue3RleHQ6ZX19KSxjPXRoaXMuZ3JvdXBlZFJlc291cmNlcztpZihjLmxlbmd0aClpZih0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCkpe2ZvcihpPVtdLHI9MDs2PnI7cisrKWkucHVzaCh7dGV4dDpcIjxkaXY+Jm5ic3A7PC9kaXY+XCIsY2xhc3NOYW1lOlwiay1oaWRkZW4gay1zbG90LWNlbGxcIn0pO249dGhpcy5fY3JlYXRlUm93c0xheW91dChjLGksdGhpcy5ncm91cEhlYWRlclRlbXBsYXRlKX1lbHNlIGw9dGhpcy5fY3JlYXRlQ29sdW1uc0xheW91dChjLGwsdGhpcy5ncm91cEhlYWRlclRlbXBsYXRlKTtyZXR1cm57Y29sdW1uczpsLHJvd3M6bn19LF9jcmVhdGVFdmVudEVsZW1lbnQ6ZnVuY3Rpb24odCl7dmFyIG4saT10aGlzLm9wdGlvbnMsbz1pLmVkaXRhYmxlLGE9dGhpcy5faXNNb2JpbGUoKTtyZXR1cm4gdC5zaG93RGVsZXRlPW8mJm8uZGVzdHJveSE9PSExJiYhYSx0LnJlc2l6YWJsZT1vJiZvLnJlc2l6ZSE9PSExJiYhYSx0Lm5zPXIubnMsdC5yZXNvdXJjZXM9dGhpcy5ldmVudFJlc291cmNlcyh0KSx0LmludmVyc2VDb2xvcj10LnJlc291cmNlcyYmdC5yZXNvdXJjZXNbMF0/dGhpcy5fc2hvdWxkSW52ZXJzZVJlc291cmNlQ29sb3IodC5yZXNvdXJjZXNbMF0pOiExLG49ZSh0aGlzLmV2ZW50VGVtcGxhdGUodCkpLHRoaXMuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czpuLGRhdGE6W3tkYXRhSXRlbTp0fV19fSksbn0sX2lzSW5EYXRlU2xvdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdyb3Vwc1swXSxuPXQuZmlyc3RTbG90KCkuc3RhcnQsbz10Lmxhc3RTbG90KCkuZW5kLTEsYT1yLmRhdGUudG9VdGNUaW1lKGUuc3RhcnQpLHM9ci5kYXRlLnRvVXRjVGltZShlLmVuZCk7cmV0dXJuKGkoYSxuLG8pfHxpKHMsbixvKXx8aShuLGEscyl8fGkobyxhLHMpKSYmKCFpKHMsbixuKXx8aShzLGEsYSl8fGUuaXNBbGxEYXkpfSxfc2xvdEluZGV4OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zbG90SW5kaWNlc1tjKGUpLmdldFRpbWUoKV19LF9wb3NpdGlvbk1vYmlsZUV2ZW50OmZ1bmN0aW9uKHQsbixpKXt2YXIgbyxzLGwsYyxkLHUsaCxwPXQuc3RhcnQ7dC5zdGFydC5vZmZzZXRMZWZ0PnQuZW5kLm9mZnNldExlZnQmJihwPXQuZW5kKSxvPXQuc3RhcnQuaW5kZXgscz1vLGw9MyxjPWEuY29sbGlkaW5nRXZlbnRzKHQuZXZlbnRzKCksbyxzKSxjLnB1c2goe2VsZW1lbnQ6bixzdGFydDpvLGVuZDpzfSksZD1hLmNyZWF0ZVJvd3MoYyksdT10LmNvbGxlY3Rpb24uYXQobyksaD11LmNvbnRhaW5lcixofHwoaD1lKHIuZm9ybWF0KCc8ZGl2IGNsYXNzPVwiay1ldmVudHMtY29udGFpbmVyXCIgc3R5bGU9XCJ0b3A6ezB9O2xlZnQ6ezF9O3dpZHRoOnsyfVwiLz4nLHAub2Zmc2V0VG9wK3AuZmlyc3RDaGlsZFRvcCtwLmZpcnN0Q2hpbGRIZWlnaHQtMytcInB4XCIscC5vZmZzZXRMZWZ0K1wicHhcIixwLm9mZnNldFdpZHRoK1wicHhcIikpLHUuY29udGFpbmVyPWgsdGhpcy5jb250ZW50WzBdLmFwcGVuZENoaWxkKGhbMF0pKSxsPj1kLmxlbmd0aCYmKHQuYWRkRXZlbnQoe2VsZW1lbnQ6bixzdGFydDpvLGVuZDpzLGdyb3VwSW5kZXg6cC5ncm91cEluZGV4fSksaS5fY29udGludW91c0V2ZW50cy5wdXNoKHtlbGVtZW50Om4sdWlkOm4uYXR0cihyLmF0dHIoXCJ1aWRcIikpLHN0YXJ0OnQuc3RhcnQsZW5kOnQuZW5kfSksaFswXS5hcHBlbmRDaGlsZChuWzBdKSl9LF9wb3NpdGlvbkV2ZW50OmZ1bmN0aW9uKHQsbixpKXt2YXIgbyxzLGwsYyxkLHUsaCxwLGYsZyx2LF8seSx3LGIsaz10aGlzLm9wdGlvbnMuZXZlbnRIZWlnaHQseD10LnN0YXJ0O2Zvcih0LnN0YXJ0Lm9mZnNldExlZnQ+dC5lbmQub2Zmc2V0TGVmdCYmKHg9dC5lbmQpLG89dC5zdGFydC5pbmRleCxzPXQuZW5kLmluZGV4LGw9eC5ldmVudENvdW50LGM9YS5jb2xsaWRpbmdFdmVudHModC5ldmVudHMoKSxvLHMpLGQ9byE9PXM/NTo0LGMucHVzaCh7ZWxlbWVudDpuLHN0YXJ0Om8sZW5kOnN9KSx1PWEuY3JlYXRlUm93cyhjKSxoPTAscD1NYXRoLm1pbih1Lmxlbmd0aCxsKTtwPmg7aCsrKWZvcihmPXVbaF0uZXZlbnRzLGc9eC5vZmZzZXRUb3AreC5maXJzdENoaWxkSGVpZ2h0K2gqayszKmgrXCJweFwiLHY9MCxfPWYubGVuZ3RoO18+djt2KyspZlt2XS5lbGVtZW50WzBdLnN0eWxlLnRvcD1nO2lmKHUubGVuZ3RoPmwpZm9yKHk9bztzPj15O3krKyl7aWYodz10LmNvbGxlY3Rpb24sYj13LmF0KHkpLGIubW9yZSlyZXR1cm47Yi5tb3JlPWUobSh7bnM6ci5ucyxzdGFydDp5LGVuZDp5LHdpZHRoOmIuY2xpZW50V2lkdGgtMixsZWZ0OmIub2Zmc2V0TGVmdCsyLHRvcDpiLm9mZnNldFRvcCtiLmZpcnN0Q2hpbGRIZWlnaHQrbCprKzMqbH0pKSx0aGlzLmNvbnRlbnRbMF0uYXBwZW5kQ2hpbGQoYi5tb3JlWzBdKX1lbHNlIHQuYWRkRXZlbnQoe2VsZW1lbnQ6bixzdGFydDpvLGVuZDpzLGdyb3VwSW5kZXg6eC5ncm91cEluZGV4fSksblswXS5zdHlsZS53aWR0aD10LmlubmVyV2lkdGgoKS1kK1wicHhcIixuWzBdLnN0eWxlLmxlZnQ9eC5vZmZzZXRMZWZ0KzIrXCJweFwiLG5bMF0uc3R5bGUuaGVpZ2h0PWsrXCJweFwiLGkuX2NvbnRpbnVvdXNFdmVudHMucHVzaCh7ZWxlbWVudDpuLHVpZDpuLmF0dHIoci5hdHRyKFwidWlkXCIpKSxzdGFydDp0LnN0YXJ0LGVuZDp0LmVuZH0pLHRoaXMuY29udGVudFswXS5hcHBlbmRDaGlsZChuWzBdKX0sX3Nsb3RCeVBvc2l0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMuY29udGVudC5vZmZzZXQoKTtmb3IoZS09ci5sZWZ0LHQtPXIudG9wLHQrPXRoaXMuY29udGVudFswXS5zY3JvbGxUb3AsZSs9dGhpcy5jb250ZW50WzBdLnNjcm9sbExlZnQsZT1NYXRoLmNlaWwoZSksdD1NYXRoLmNlaWwodCksbj0wO3RoaXMuZ3JvdXBzLmxlbmd0aD5uO24rKylpZihpPXRoaXMuZ3JvdXBzW25dLmRheVNsb3RCeVBvc2l0aW9uKGUsdCkpcmV0dXJuIGk7cmV0dXJuIG51bGx9LF9jcmVhdGVSZXNpemVIaW50OmZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RhcnRTbG90KCkub2Zmc2V0TGVmdCxuPWUuc3RhcnQub2Zmc2V0VG9wLGk9ZS5pbm5lcldpZHRoKCkscj1lLnN0YXJ0LmNsaWVudEhlaWdodC0yLG89YS5mbi5fY3JlYXRlUmVzaXplSGludC5jYWxsKHRoaXMsdCxuLGkscik7by5hcHBlbmRUbyh0aGlzLmNvbnRlbnQpLHRoaXMuX3Jlc2l6ZUhpbnQ9dGhpcy5fcmVzaXplSGludC5hZGQobyl9LF91cGRhdGVSZXNpemVIaW50OmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciBvLGEscztmb3IodGhpcy5fcmVtb3ZlUmVzaXplSGludCgpLG89dGhpcy5ncm91cHNbdF0sYT1vLnJhbmdlcyhuLGksITAsZS5pc0FsbERheSkscz0wO2EubGVuZ3RoPnM7cysrKXRoaXMuX2NyZWF0ZVJlc2l6ZUhpbnQoYVtzXSk7dGhpcy5fcmVzaXplSGludC5maW5kKFwiLmstbGFiZWwtdG9wLC5rLWxhYmVsLWJvdHRvbVwiKS50ZXh0KFwiXCIpLHRoaXMuX3Jlc2l6ZUhpbnQuZmlyc3QoKS5hZGRDbGFzcyhcImstZmlyc3RcIikuZmluZChcIi5rLWxhYmVsLXRvcFwiKS50ZXh0KHIudG9TdHJpbmcoci50aW1lem9uZS50b0xvY2FsRGF0ZShuKSxcIk0vZGRcIikpLHRoaXMuX3Jlc2l6ZUhpbnQubGFzdCgpLmFkZENsYXNzKFwiay1sYXN0XCIpLmZpbmQoXCIuay1sYWJlbC1ib3R0b21cIikudGV4dChyLnRvU3RyaW5nKHIudGltZXpvbmUudG9Mb2NhbERhdGUoaSksXCJNL2RkXCIpKX0sX3VwZGF0ZU1vdmVIaW50OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxvLGEscyxsLGM9ci5kYXRlLnRvVXRjVGltZShlLnN0YXJ0KStuLGQ9YytlLmR1cmF0aW9uKCksdT10aGlzLmdyb3Vwc1t0XSxoPXUucmFuZ2VzKGMsZCwhMCxlLmlzQWxsRGF5KTtmb3IodGhpcy5fcmVtb3ZlTW92ZUhpbnQoKSxpPTA7aC5sZW5ndGg+aTtpKyspbz1oW2ldLGE9by5zdGFydFNsb3QoKSxzPW8uZW5kU2xvdCgpLGw9dGhpcy5fY3JlYXRlRXZlbnRFbGVtZW50KGUuY2xvbmUoe2hlYWQ6by5oZWFkLHRhaWw6by50YWlsfSkpLGwuY3NzKHtsZWZ0OmEub2Zmc2V0TGVmdCsyLHRvcDphLm9mZnNldFRvcCthLmZpcnN0Q2hpbGRIZWlnaHQsaGVpZ2h0OnRoaXMub3B0aW9ucy5ldmVudEhlaWdodCx3aWR0aDpvLmlubmVyV2lkdGgoKS0oYS5pbmRleCE9PXMuaW5kZXg/NTo0KX0pLGwuYWRkQ2xhc3MoXCJrLWV2ZW50LWRyYWctaGludFwiKSxsLmFwcGVuZFRvKHRoaXMuY29udGVudCksdGhpcy5fbW92ZUhpbnQ9dGhpcy5fbW92ZUhpbnQuYWRkKGwpfSxfZ3JvdXBzOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGksbyxhLHMsbCxjLGQscCxmLGcsbSx2LF8seSx3PXRoaXMuX2dyb3VwQ291bnQoKSxiPWgsaz11O2Zvcih0aGlzLmdyb3Vwcz1bXSxlPTA7dz5lO2UrKyl0aGlzLl9hZGRSZXNvdXJjZVZpZXcoZSk7Zm9yKHQ9dGhpcy5jb250ZW50WzBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidHJcIiksbj0wO3c+bjtuKyspZm9yKGk9MCxvPTAsdGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpJiYobz1uKSxhPW8qazsobysxKSprPmE7YSsrKWZvcihzPXRoaXMuZ3JvdXBzW25dLGw9cy5hZGREYXlTbG90Q29sbGVjdGlvbihyLmRhdGUuYWRkRGF5cyh0aGlzLnN0YXJ0RGF0ZSgpLGkpLHIuZGF0ZS5hZGREYXlzKHRoaXMuc3RhcnREYXRlKCksaStiKSksYz10W2FdLGQ9Yy5jaGlsZHJlbixwPTAsYy5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJyb3dcIiksdGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpfHwocD1uKSxmPXAqYjsocCsxKSpiPmY7ZisrKWc9ZFtmXSxtPWcuY2xpZW50SGVpZ2h0LHY9Zy5jaGlsZHJlbi5sZW5ndGg/Zy5jaGlsZHJlblswXS5vZmZzZXRIZWlnaHQrMzowLF89ci5kYXRlLnRvVXRjVGltZShyLmRhdGUuYWRkRGF5cyh0aGlzLnN0YXJ0RGF0ZSgpLGkpKSxpKysseT1NYXRoLmZsb29yKChtLXYtdGhpcy5vcHRpb25zLm1vcmVCdXR0b25IZWlnaHQpLyh0aGlzLm9wdGlvbnMuZXZlbnRIZWlnaHQrMykpLGcuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwiZ3JpZGNlbGxcIiksZy5zZXRBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIsITEpLGwuYWRkRGF5U2xvdChnLF8sXytyLmRhdGUuTVNfUEVSX0RBWSx5KX0scmVuZGVyOmZ1bmN0aW9uKGUpe3RoaXMuY29udGVudC5jaGlsZHJlbihcIi5rLWV2ZW50LC5rLW1vcmUtZXZlbnRzLC5rLWV2ZW50cy1jb250YWluZXJcIikucmVtb3ZlKCksdGhpcy5fZ3JvdXBzKCksZT1uZXcgci5kYXRhLlF1ZXJ5KGUpLnNvcnQoW3tmaWVsZDpcInN0YXJ0XCIsZGlyOlwiYXNjXCJ9LHtmaWVsZDpcImVuZFwiLGRpcjpcImRlc2NcIn1dKS50b0FycmF5KCk7dmFyIHQ9dGhpcy5ncm91cGVkUmVzb3VyY2VzO3QubGVuZ3RoP3RoaXMuX3JlbmRlckdyb3VwcyhlLHQsMCwxKTp0aGlzLl9yZW5kZXJFdmVudHMoZSwwKSx0aGlzLnJlZnJlc2hMYXlvdXQoKSx0aGlzLnRyaWdnZXIoXCJhY3RpdmF0ZVwiKX0sX3JlbmRlckV2ZW50czpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGEscyxsLGMsZCx1LGgscD10aGlzLl9pc01vYmlsZVBob25lVmlldygpO2ZvcihpPTAscj1lLmxlbmd0aDtyPmk7aSsrKWlmKG49ZVtpXSx0aGlzLl9pc0luRGF0ZVNsb3QobikpZm9yKG89dGhpcy5ncm91cHNbdF0sby5fY29udGludW91c0V2ZW50c3x8KG8uX2NvbnRpbnVvdXNFdmVudHM9W10pLGE9by5zbG90UmFuZ2VzKG4sITApLHM9YS5sZW5ndGgsbD0wO3M+bDtsKyspYz1hW2xdLGQ9bi5zdGFydCx1PW4uZW5kLHM+MSYmKDA9PT1sP3U9Yy5lbmQuZW5kRGF0ZSgpOmw9PXMtMT9kPWMuc3RhcnQuc3RhcnREYXRlKCk6KGQ9Yy5zdGFydC5zdGFydERhdGUoKSx1PWMuZW5kLmVuZERhdGUoKSkpLGg9bi5jbG9uZSh7c3RhcnQ6ZCxlbmQ6dSxoZWFkOmMuaGVhZCx0YWlsOmMudGFpbH0pLHA/dGhpcy5fcG9zaXRpb25Nb2JpbGVFdmVudChjLHRoaXMuX2NyZWF0ZUV2ZW50RWxlbWVudChoKSxvKTp0aGlzLl9wb3NpdGlvbkV2ZW50KGMsdGhpcy5fY3JlYXRlRXZlbnRFbGVtZW50KGgpLG8pfSxfcmVuZGVyR3JvdXBzOmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciBvLHMsbCxjLGQ9dFswXTtpZihkKWZvcihvPWQuZGF0YVNvdXJjZS52aWV3KCkscz0wO28ubGVuZ3RoPnM7cysrKWw9dGhpcy5fcmVzb3VyY2VWYWx1ZShkLG9bc10pLGM9bmV3IHIuZGF0YS5RdWVyeShlKS5maWx0ZXIoe2ZpZWxkOmQuZmllbGQsb3BlcmF0b3I6YS5ncm91cEVxRmlsdGVyKGwpfSkudG9BcnJheSgpLHQubGVuZ3RoPjE/bj10aGlzLl9yZW5kZXJHcm91cHMoYyx0LnNsaWNlKDEpLG4rKyxpKzEpOnRoaXMuX3JlbmRlckV2ZW50cyhjLG4rKyk7cmV0dXJuIG59LF9ncm91cENvdW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5ncm91cGVkUmVzb3VyY2VzO3JldHVybiBlLmxlbmd0aD90aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCk/dGhpcy5fcm93Q291bnRGb3JMZXZlbChlLmxlbmd0aC0xKTp0aGlzLl9jb2x1bW5Db3VudEZvckxldmVsKGUubGVuZ3RoKS90aGlzLl9jb2x1bW5PZmZzZXRGb3JSZXNvdXJjZShlLmxlbmd0aCk6MX0sX2NvbHVtbk9mZnNldEZvclJlc291cmNlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb2x1bW5Db3VudEZvckxldmVsKGUpL3RoaXMuX2NvbHVtbkNvdW50Rm9yTGV2ZWwoZS0xKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMudGFibGUmJnRoaXMudGFibGUucmVtb3ZlQ2xhc3MoXCJrLXNjaGVkdWxlci1tb250aHZpZXdcIiksdGhpcy5jb250ZW50JiZ0aGlzLmNvbnRlbnQub2ZmKHMpLHRoaXMuZWxlbWVudCYmdGhpcy5lbGVtZW50Lm9mZihzKSxhLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLl9pc01vYmlsZSgpJiYhdGhpcy5faXNNb2JpbGVQaG9uZVZpZXcoKSYmdGhpcy5vcHRpb25zLmVkaXRhYmxlJiYodGhpcy5vcHRpb25zLmVkaXRhYmxlLmNyZWF0ZSE9PSExJiZ0aGlzLl9hZGRVc2VyRXZlbnRzLmRlc3Ryb3koKSx0aGlzLm9wdGlvbnMuZWRpdGFibGUudXBkYXRlIT09ITEmJnRoaXMuX2VkaXRVc2VyRXZlbnRzLmRlc3Ryb3koKSl9LGV2ZW50czpbXCJyZW1vdmVcIixcImFkZFwiLFwiZWRpdFwiLFwibmF2aWdhdGVcIl0sb3B0aW9uczp7dGl0bGU6XCJNb250aFwiLG5hbWU6XCJtb250aFwiLGV2ZW50SGVpZ2h0OjI1LG1vcmVCdXR0b25IZWlnaHQ6MTMsZWRpdGFibGU6ITAsc2VsZWN0ZWREYXRlRm9ybWF0OlwiezA6eX1cIixncm91cEhlYWRlclRlbXBsYXRlOlwiIz10ZXh0I1wiLGRheVRlbXBsYXRlOnAsZXZlbnRUZW1wbGF0ZTpnfX0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSx0KXt2YXIgbjtyZXR1cm4gMCE9PWUmJnQ+ZT9uPXQtZToobj1lJXQsbiYmKG49dC1uKSksbn1mdW5jdGlvbiBpKGUpe3ZhciB0PWUuZ2V0TW9udGgoKSxuPW0oZSk/ZXRbdF06dHRbdF07cmV0dXJuIG4rZS5nZXREYXRlKCl9ZnVuY3Rpb24gcihlLG4pe3ZhciBpLHI7cmV0dXJuIGU9bmV3IERhdGUoZS5nZXRGdWxsWWVhcigpLGUuZ2V0TW9udGgoKSxlLmdldERhdGUoKSksWChlLDApLGk9ZS5nZXRGdWxsWWVhcigpLG4hPT10PyhRKGUsbiwtMSksZS5zZXREYXRlKGUuZ2V0RGF0ZSgpKzQpKTplLnNldERhdGUoZS5nZXREYXRlKCkrKDQtKGUuZ2V0RGF5KCl8fDcpKSksWChlLDApLHI9TWF0aC5mbG9vcigoZS5nZXRUaW1lKCktbmV3IERhdGUoaSwwLDEsLTYpKS84NjRlNSksMStNYXRoLmZsb29yKHIvNyl9ZnVuY3Rpb24gbyhlLHQpe3ZhciBuPUooZSkuZ2V0RGF5KCksaT03LShuKzctKHR8fDcpKXx8NztyZXR1cm4gMD5pJiYoaSs9NyksTWF0aC5jZWlsKChlLmdldERhdGUoKS1pKS83KSsxfWZ1bmN0aW9uIGEoZSx0KXtyZXR1cm4gZSsodD5lPzc6MCl9ZnVuY3Rpb24gcyhlLHQsbil7dmFyIGkscixzLGwsYyxkPXQub2Zmc2V0O3JldHVybiBkPyhpPW5ldyBEYXRlKGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCkrMSwwKSxyPW8oaSxuKSxzPWEodC5kYXksbiksbD1zPGEobmV3IERhdGUoZS5nZXRGdWxsWWVhcigpLGUuZ2V0TW9udGgoKSwxKS5nZXREYXkoKSxuKSxjPXM+YShpLmdldERheSgpLG4pLDA+ZD9kPXIrKGQrMS0oYz8xOjApKTpsJiYoZCs9MSksci09Yz8xOjAsKGw/MTowKT5kfHxkPnI/bnVsbDpkKTpvKGUsbil9ZnVuY3Rpb24gbChlLHQpe3JldHVybiBvKG5ldyBEYXRlKGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCkrMSwwKSx0KX1mdW5jdGlvbiBjKGUsdCxuKXtyZXR1cm4gbyhlLG4pPT09cyhlLHQsbil9ZnVuY3Rpb24gZChlLHQsbil7Zm9yKHZhciBpLHIsbCxjLGQ9YSh0LmdldERheSgpLG4pLHU9ZS5sZW5ndGgsaD1bXSxwPTA7dT5wO3ArKylpZihyPWVbcF0sYz1vKHQsbiksaT1zKHQscixuKSxudWxsIT09aSlpZihpPmMpaC5wdXNoKHIpO2Vsc2UgaWYoYz09PWkpaWYobD1hKHIuZGF5LG4pLGw+ZCloLnB1c2gocik7ZWxzZSBpZihkPT09bClyZXR1cm4gbnVsbDtyZXR1cm4gaH1mdW5jdGlvbiB1KGUsdCxuKXtmb3IodmFyIGkscj0wLG89ZS5sZW5ndGgsYT1bXTtvPnI7cisrKXtpZihpPWVbcl0sbiYmKGk9bihpKSksdD09PWkpcmV0dXJuIG51bGw7aT50JiZhLnB1c2goaSl9cmV0dXJuIGF9ZnVuY3Rpb24gaChlLHQpe2Zvcih2YXIgbixpPTAscj1lLmxlbmd0aDtyPmk7aSsrKXtpZihuPXBhcnNlSW50KGVbaV0sMTApLGlzTmFOKG4pfHx0LnN0YXJ0Pm58fG4+dC5lbmR8fDA9PT1uJiYwPnQuc3RhcnQpcmV0dXJuIG51bGw7ZVtpXT1ufXJldHVybiBlLnNvcnQodil9ZnVuY3Rpb24gcChlKXtmb3IodmFyIG4saSxyLG89MCxhPWUubGVuZ3RoO2E+bztvKyspe2lmKG49ZVtvXSxpPW4ubGVuZ3RoLHI9bi5zdWJzdHJpbmcoaS0yKS50b1VwcGVyQ2FzZSgpLHI9cnRbcl0scj09PXQpcmV0dXJuIG51bGw7ZVtvXT17b2Zmc2V0OnBhcnNlSW50KG4uc3Vic3RyaW5nKDAsaS0yKSwxMCl8fDAsZGF5OnJ9fXJldHVybiBlfWZ1bmN0aW9uIGYoZSl7Zm9yKHZhciB0LG4saT0wLHI9ZS5sZW5ndGgsbz1bXTtyPmk7aSsrKXQ9ZVtpXSxcInN0cmluZ1wiPT10eXBlb2YgdD9uPXQ6KG49XCJcIitpdFt0LmRheV0sdC5vZmZzZXQmJihuPXQub2Zmc2V0K24pKSxvLnB1c2gobik7cmV0dXJuXCJcIitvfWZ1bmN0aW9uIGcoZSl7dmFyIHQ9ZS5nZXRNb250aCgpO3JldHVybiAxPT09dD8xPT09bmV3IERhdGUoZS5nZXRGdWxsWWVhcigpLDEsMjkpLmdldE1vbnRoKCk/Mjk6Mjg6bnRbdF19ZnVuY3Rpb24gbShlKXtyZXR1cm4gZT1lLmdldEZ1bGxZZWFyKCksZSU0PT09MCYmZSUxMDAhPT0wfHxlJTQwMD09PTB9ZnVuY3Rpb24gdihlLHQpe3JldHVybiBlLXR9ZnVuY3Rpb24gXyhlLHQpe3ZhciBuLGkscj0wLG89W107aWYoZSlmb3IoZT1lLnNwbGl0KFwiO1wiKSxuPWUubGVuZ3RoO24+cjtyKyspaT1TKGVbcl0sdCksaSYmby5wdXNoKGkpO3JldHVybiBvfWZ1bmN0aW9uIHkodCxuLGkpe2Zvcih2YXIgcj1lLmlzQXJyYXkodCk/dDpfKHQsaSksbz1uLmdldFRpbWUoKS1uLmdldE1pbGxpc2Vjb25kcygpLGE9MCxzPXIubGVuZ3RoO3M+YTthKyspaWYoclthXS5nZXRUaW1lKCk9PT1vKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIHcoZSx0KXt2YXIgbixpLHI9MCxvPVtdLmNvbmNhdChlKTtmb3Iobj1vLmxlbmd0aDtuPnI7cisrKWk9b1tyXSxpPVUudGltZXpvbmUuY29udmVydChpLHR8fGkuZ2V0VGltZXpvbmVPZmZzZXQoKSxcIkV0Yy9VVENcIiksb1tyXT1VLnRvU3RyaW5nKGksbHQpO3JldHVybiBvLmpvaW4oXCI7XCIpK1wiO1wifWZ1bmN0aW9uIGIoZSx0KXt2YXIgbj1uZXcgRGF0ZShlKTtzd2l0Y2godC5mcmVxKXtjYXNlXCJ5ZWFybHlcIjpuLnNldEZ1bGxZZWFyKG4uZ2V0RnVsbFllYXIoKSwwLDEpO2JyZWFrO2Nhc2VcIm1vbnRobHlcIjpuLnNldEZ1bGxZZWFyKG4uZ2V0RnVsbFllYXIoKSxuLmdldE1vbnRoKCksMSk7YnJlYWs7Y2FzZVwid2Vla2x5XCI6UShuLHQud2Vla1N0YXJ0LC0xKX1yZXR1cm4gdC5ob3VycyYmbi5zZXRIb3VycygwKSx0Lm1pbnV0ZXMmJm4uc2V0TWludXRlcygwKSx0LnNlY29uZHMmJm4uc2V0U2Vjb25kcygwKSxufWZ1bmN0aW9uIGsoZSx0KXt2YXIgbj1uZXcgRGF0ZShlKTtzd2l0Y2godC5mcmVxKXtjYXNlXCJ5ZWFybHlcIjpuLnNldEZ1bGxZZWFyKG4uZ2V0RnVsbFllYXIoKSwxMSwzMSk7YnJlYWs7Y2FzZVwibW9udGhseVwiOm4uc2V0RnVsbFllYXIobi5nZXRGdWxsWWVhcigpLG4uZ2V0TW9udGgoKSsxLDApO2JyZWFrO2Nhc2VcIndlZWtseVwiOlEobix0LndlZWtTdGFydCwtMSksbi5zZXREYXRlKG4uZ2V0RGF0ZSgpKzYpfXJldHVybiB0LmhvdXJzJiZuLnNldEhvdXJzKDIzKSx0Lm1pbnV0ZXMmJm4uc2V0TWludXRlcyg1OSksdC5zZWNvbmRzJiZuLnNldFNlY29uZHMoNTkpLG59ZnVuY3Rpb24geChlLHQsbil7dmFyIGkscixvLGEscz1lLnNsaWNlKG4uX3N0YXJ0SWR4KSxsPXMubGVuZ3RoLGM9bi5wb3NpdGlvbnMsZD1bXTtmb3Iobz0wLGE9Yy5sZW5ndGg7YT5vO28rKylpPWNbb10sMD5pP2k9bCtpOmktPTEscj1zW2ldLHImJnIuc3RhcnQ+PXQmJmQucHVzaChyKTtyZXR1cm4gZT1lLnNsaWNlKDAsbi5fc3RhcnRJZHgpLmNvbmNhdChkKSxuLl9zdGFydElkeD1lLmxlbmd0aCxlfWZ1bmN0aW9uIEMoZSxuLGkscil7dmFyIG8sYSxzLGwsYyxkLHUsaCxwLGYsZyxtLHYsQyxTLFQsQSxFLE0sUCxJLHosRj1EKGUucmVjdXJyZW5jZVJ1bGUsciksUj1bXTtpZighRilyZXR1cm5bZV07Zm9yKFA9Ri5wb3NpdGlvbnMsST1QPzA6MSxmPUYuc3RhcnQsZz1GLmVuZCwoZnx8ZykmJihlPWUuY2xvbmUoe3N0YXJ0OmY/bmV3IERhdGUoZi52YWx1ZVswXSk6dCxlbmQ6Zz9uZXcgRGF0ZShnLnZhbHVlWzBdKTp0fSkpLEE9ZS5zdGFydCxUPUEuZ2V0VGltZSgpLFM9WihBKSxDPV8oZS5yZWN1cnJlbmNlRXhjZXB0aW9uLHIpLCFDWzBdJiZGLmV4ZGF0ZXMmJihDPUYuZXhkYXRlcy52YWx1ZSxlLnNldChcInJlY3VycmVuY2VFeGNlcHRpb25cIix3KEMscikpKSxoPW49bmV3IERhdGUobiksaT1uZXcgRGF0ZShpKSx2PUYuZnJlcSxNPW10W3ZdLEU9Ri5jb3VudCxGLnVudGlsJiZpPkYudW50aWwmJihpPW5ldyBEYXRlKEYudW50aWwpKSxtPVwieWVhcmx5XCI9PT12fHxcIm1vbnRobHlcIj09PXZ8fFwid2Vla2x5XCI9PT12LFQ+bnx8RXx8Ri5pbnRlcnZhbD4xfHxtP249bmV3IERhdGUoVCk6KGw9bi5nZXRIb3VycygpLGM9bi5nZXRNaW51dGVzKCksZD1uLmdldFNlY29uZHMoKSxGLmhvdXJzfHwobD1BLmdldEhvdXJzKCkpLEYubWludXRlc3x8KGM9QS5nZXRNaW51dGVzKCkpLEYuc2Vjb25kc3x8KGQ9QS5nZXRTZWNvbmRzKCkpLG4uc2V0SG91cnMobCxjLGQsQS5nZXRNaWxsaXNlY29uZHMoKSkpLEYuX3N0YXJ0UGVyaW9kPW5ldyBEYXRlKG4pLFAmJihuPWIobixGKSxpPWsoaSxGKSx6PVooaSktWihuKSwwPnomJihsPW4uZ2V0SG91cnMoKSxpLnNldEhvdXJzKGwsbi5nZXRNaW51dGVzKCksbi5nZXRTZWNvbmRzKCksbi5nZXRNaWxsaXNlY29uZHMoKSksWS5hZGp1c3REU1QoaSxsKSksRi5fc3RhcnRQZXJpb2Q9bmV3IERhdGUobiksRi5fZW5kUGVyaW9kPWsobixGKSxGLl9zdGFydElkeD0wKSx1PWUuZHVyYXRpb24oKSxGLl9zdGFydFRpbWU9bz1ZLnRvSW52YXJpYW50VGltZShuKSxNLnNldHVwJiZNLnNldHVwKEYsQSxuKSxNLmxpbWl0KG4saSxGKTtpPj1uOylpZihzPW5ldyBEYXRlKG4pLEsocyx1KSxwPW4+PWh8fHM+aCwocCYmIXkoQyxuLHIpfHxQKSYmKG89WS50b1V0Y1RpbWUoWS5nZXREYXRlKG4pKStaKEYuX3N0YXJ0VGltZSksYT1vK3UsVCE9PW4uZ2V0VGltZSgpfHxTIT09WihGLl9zdGFydFRpbWUpP1IucHVzaChlLnRvT2NjdXJyZW5jZSh7c3RhcnQ6bmV3IERhdGUobiksZW5kOnMsc3RhcnRUaW1lOm8sZW5kVGltZTphfSkpOihlLnN0YXJ0VGltZT1vLGUuZW5kVGltZT1hLFIucHVzaChlKSkpLFApe2lmKE0ubmV4dChuLEYpLE0ubGltaXQobixpLEYpLG4+Ri5fZW5kUGVyaW9kJiYoUj14KFIsQSxGKSxGLl9lbmRQZXJpb2Q9ayhuLEYpLEk9Ui5sZW5ndGgpLEUmJkU9PT1JKWJyZWFrfWVsc2V7aWYoRSYmRT09PUkpYnJlYWs7SSsrLE0ubmV4dChuLEYpLE0ubGltaXQobixpLEYpfXJldHVybiBSfWZ1bmN0aW9uIFMoZSx0KXtyZXR1cm4gZT1VLnBhcnNlRGF0ZShlLG90KSxlJiZ0JiYoZT1XLmNvbnZlcnQoZSxlLmdldFRpbWV6b25lT2Zmc2V0KCksdCkpLGV9ZnVuY3Rpb24gVChlLG4pe3ZhciBpLHIsbyxhLHMsbCxjLGQsdT1lLnNwbGl0KFwiO1wiKTtmb3IoYz0wLGQ9dS5sZW5ndGg7ZD5jO2MrKylpZihpPXVbY10uc3BsaXQoXCI6XCIpLHI9aVswXSxvPWlbMV0sLTEhPT1yLmluZGV4T2YoXCJUWklEXCIpJiYoYT1yLnN1YnN0cmluZyhyLmluZGV4T2YoXCJUWklEXCIpKS5zcGxpdChcIj1cIilbMV0pLG8pZm9yKG89by5zcGxpdChcIixcIikscz0wLGw9by5sZW5ndGg7bD5zO3MrKylvW3NdPVMob1tzXSxhfHxuKTtyZXR1cm4gbz97dmFsdWU6byx0emlkOmF9OnR9ZnVuY3Rpb24gRChuLGkpe3ZhciByLG8sYSxzLGwsYyxkLHUsZixnPXt9LG09MCx2PSExLF89ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmRheSxpPXQuZGF5O3JldHVybiB1Pm4mJihuKz03KSx1PmkmJihpKz03KSxuLWl9O2lmKCFuKXJldHVybiBudWxsO2ZvcihjPW4uc3BsaXQoXCJcXG5cIiksY1sxXXx8LTE9PT1uLmluZGV4T2YoXCJEVFNUQVJUXCIpJiYtMT09PW4uaW5kZXhPZihcIkRURU5EXCIpJiYtMT09PW4uaW5kZXhPZihcIkVYREFURVwiKXx8KGM9bi5zcGxpdChcIiBcIikpLG09MCxhPWMubGVuZ3RoO2E+bTttKyspbD1jW21dLC0xIT09bC5pbmRleE9mKFwiRFRTVEFSVFwiKT9nLnN0YXJ0PVQobCxpKTotMSE9PWwuaW5kZXhPZihcIkRURU5EXCIpP2cuZW5kPVQobCxpKTotMSE9PWwuaW5kZXhPZihcIkVYREFURVwiKT9nLmV4ZGF0ZXM9VChsLGkpOnM9LTEhPT1sLmluZGV4T2YoXCJSUlVMRVwiKT9sLnN1YnN0cmluZyg2KTpsO2ZvcihzPXMuc3BsaXQoXCI7XCIpLG09MCxhPXMubGVuZ3RoO2E+bTttKyspc3dpdGNoKGQ9c1ttXSxyPWQuc3BsaXQoXCI9XCIpLG89ZS50cmltKHJbMV0pLnNwbGl0KFwiLFwiKSxlLnRyaW0oclswXSkudG9VcHBlckNhc2UoKSl7Y2FzZVwiRlJFUVwiOmcuZnJlcT1vWzBdLnRvTG93ZXJDYXNlKCk7YnJlYWs7Y2FzZVwiVU5USUxcIjpnLnVudGlsPVMob1swXSxpKTticmVhaztjYXNlXCJDT1VOVFwiOmcuY291bnQ9cGFyc2VJbnQob1swXSwxMCk7YnJlYWs7Y2FzZVwiSU5URVJWQUxcIjpnLmludGVydmFsPXBhcnNlSW50KG9bMF0sMTApO2JyZWFrO2Nhc2VcIkJZU0VDT05EXCI6Zy5zZWNvbmRzPWgobyx7c3RhcnQ6MCxlbmQ6NjB9KSx2PSEwO2JyZWFrO2Nhc2VcIkJZTUlOVVRFXCI6Zy5taW51dGVzPWgobyx7c3RhcnQ6MCxlbmQ6NTl9KSx2PSEwO2JyZWFrO2Nhc2VcIkJZSE9VUlwiOmcuaG91cnM9aChvLHtzdGFydDowLGVuZDoyM30pLHY9ITA7YnJlYWs7Y2FzZVwiQllNT05USERBWVwiOmcubW9udGhEYXlzPWgobyx7c3RhcnQ6LTMxLGVuZDozMX0pLHY9ITA7YnJlYWs7Y2FzZVwiQllZRUFSREFZXCI6Zy55ZWFyRGF5cz1oKG8se3N0YXJ0Oi0zNjYsZW5kOjM2Nn0pLHY9ITA7YnJlYWs7Y2FzZVwiQllNT05USFwiOmcubW9udGhzPWgobyx7c3RhcnQ6MSxlbmQ6MTJ9KSx2PSEwO2JyZWFrO2Nhc2VcIkJZREFZXCI6Zy53ZWVrRGF5cz1mPXAobyksdj0hMDticmVhaztjYXNlXCJCWVdFRUtOT1wiOmcud2Vla3M9aChvLHtzdGFydDotNTMsZW5kOjUzfSksdj0hMDticmVhaztjYXNlXCJCWVNFVFBPU1wiOmcucG9zaXRpb25zPWgobyx7c3RhcnQ6LTM2NixlbmQ6MzY2fSk7YnJlYWs7Y2FzZVwiV0tTVFwiOmcud2Vla1N0YXJ0PXU9cnRbb1swXV19cmV0dXJuIGcuZnJlcT09PXR8fGcuY291bnQhPT10JiZnLnVudGlsP251bGw6KGcuaW50ZXJ2YWx8fChnLmludGVydmFsPTEpLHU9PT10JiYoZy53ZWVrU3RhcnQ9dT1VLmN1bHR1cmUoKS5jYWxlbmRhci5maXJzdERheSksZiYmKGcud2Vla0RheXM9Zi5zb3J0KF8pKSxnLnBvc2l0aW9ucyYmIXYmJihnLnBvc2l0aW9ucz1udWxsKSxnLl9oYXNSdWxlVmFsdWU9dixnKX1mdW5jdGlvbiBBKGUsdCl7Zm9yKHZhciBuLGk9ZS52YWx1ZSxyPWUudHppZHx8XCJcIixvPWkubGVuZ3RoLGE9MDtvPmE7YSsrKW49aVthXSxuPVcuY29udmVydChuLHJ8fHR8fG4uZ2V0VGltZXpvbmVPZmZzZXQoKSxcIkV0Yy9VVENcIiksaVthXT1VLnRvU3RyaW5nKG4sXCJ5eXl5TU1kZFRISG1tc3NaXCIpO3JldHVybiByJiYocj1cIjtUWklEPVwiK3IpLHIrXCI6XCIraS5qb2luKFwiLFwiKStcIiBcIn1mdW5jdGlvbiBFKGUsbil7dmFyIGk9ZS53ZWVrU3RhcnQscj1cIkZSRVE9XCIrZS5mcmVxLnRvVXBwZXJDYXNlKCksbz1lLmV4ZGF0ZXN8fFwiXCIsYT1lLnN0YXJ0fHxcIlwiLHM9ZS5lbmR8fFwiXCIsbD1lLnVudGlsO3JldHVybiBlLmludGVydmFsPjEmJihyKz1cIjtJTlRFUlZBTD1cIitlLmludGVydmFsKSxlLmNvdW50JiYocis9XCI7Q09VTlQ9XCIrZS5jb3VudCksbCYmKGw9Vy5jb252ZXJ0KGwsbnx8bC5nZXRUaW1lem9uZU9mZnNldCgpLFwiRXRjL1VUQ1wiKSxyKz1cIjtVTlRJTD1cIitVLnRvU3RyaW5nKGwsXCJ5eXl5TU1kZFRISG1tc3NaXCIpKSxlLm1vbnRocyYmKHIrPVwiO0JZTU9OVEg9XCIrZS5tb250aHMpLGUud2Vla3MmJihyKz1cIjtCWVdFRUtOTz1cIitlLndlZWtzKSxlLnllYXJEYXlzJiYocis9XCI7QllZRUFSREFZPVwiK2UueWVhckRheXMpLGUubW9udGhEYXlzJiYocis9XCI7QllNT05USERBWT1cIitlLm1vbnRoRGF5cyksZS53ZWVrRGF5cyYmKHIrPVwiO0JZREFZPVwiK2YoZS53ZWVrRGF5cykpLGUuaG91cnMmJihyKz1cIjtCWUhPVVI9XCIrZS5ob3VycyksZS5taW51dGVzJiYocis9XCI7QllNSU5VVEU9XCIrZS5taW51dGVzKSxlLnNlY29uZHMmJihyKz1cIjtCWVNFQ09ORD1cIitlLnNlY29uZHMpLGUucG9zaXRpb25zJiYocis9XCI7QllTRVRQT1M9XCIrZS5wb3NpdGlvbnMpLGkhPT10JiYocis9XCI7V0tTVD1cIitpdFtpXSksYSYmKGE9XCJEVFNUQVJUXCIrQShhLG4pKSxzJiYocz1cIkRURU5EXCIrQShzLG4pKSxvJiYobz1cIkVYREFURVwiK0EobyxuKSksKGF8fHN8fG8pJiYocj1hK3MrbytcIlJSVUxFOlwiK3IpLHJ9dmFyIE0sUCxJLHosRixSLEIsTCxPLEgsTixWLFU9d2luZG93LmtlbmRvLFc9VS50aW1lem9uZSxqPVUuQ2xhc3MsRz1VLnVpLHE9Ry5XaWRnZXQsJD1HLkRyb3BEb3duTGlzdCxZPVUuZGF0ZSxLPVkuc2V0VGltZSxRPVkuc2V0RGF5T2ZXZWVrLFg9WS5hZGp1c3REU1QsSj1ZLmZpcnN0RGF5T2ZNb250aCxaPVkuZ2V0TWlsbGlzZWNvbmRzLGV0PVswLDMxLDYwLDkxLDEyMSwxNTIsMTgyLDIxMywyNDQsMjc0LDMwNSwzMzUsMzY2XSx0dD1bMCwzMSw1OSw5MCwxMjAsMTUxLDE4MSwyMTIsMjQzLDI3MywzMDQsMzM0LDM2NV0sbnQ9WzMxLDI4LDMwLDMxLDMwLDMxLDMwLDMxLDMwLDMxLDMwLDMxXSxpdD17MDpcIlNVXCIsMTpcIk1PXCIsMjpcIlRVXCIsMzpcIldFXCIsNDpcIlRIXCIsNTpcIkZSXCIsNjpcIlNBXCJ9LHJ0PXtTVTowLE1POjEsVFU6MixXRTozLFRIOjQsRlI6NSxTQTo2fSxvdD1bXCJ5eXl5LU1NLWRkVEhIOm1tOnNzLmZmZnp6elwiLFwieXl5eS1NTS1kZFRISDptbTpzc3p6elwiLFwieXl5eS1NTS1kZFRISDptbTpzc1wiLFwieXl5eS1NTS1kZFRISDptbVwiLFwieXl5eS1NTS1kZFRISFwiLFwieXl5eS1NTS1kZFwiLFwieXl5eU1NZGRUSEhtbXNzZmZmenp6XCIsXCJ5eXl5TU1kZFRISG1tc3N6enpcIixcInl5eXlNTWRkVEhIbW1zc1wiLFwieXl5eU1NZGRUSEhtbVwiLFwieXl5eU1NZGRUSEhcIixcInl5eXlNTWRkXCJdLGF0PVtcIm1vbnRoc1wiLFwid2Vla3NcIixcInllYXJEYXlzXCIsXCJtb250aERheXNcIixcIndlZWtEYXlzXCIsXCJob3Vyc1wiLFwibWludXRlc1wiLFwic2Vjb25kc1wiXSxzdD1hdC5sZW5ndGgsbHQ9XCJ5eXl5TU1kZFRISG1tc3NaXCIsY3Q9e21vbnRoczpmdW5jdGlvbihlLHQsbil7dmFyIGk9bi5tb250aHMscj11KGksZS5nZXRNb250aCgpKzEpLG89ITE7cmV0dXJuIG51bGwhPT1yJiYoci5sZW5ndGg/ZS5zZXRNb250aChyWzBdLTEsMSk6ZS5zZXRGdWxsWWVhcihlLmdldEZ1bGxZZWFyKCkrMSxpWzBdLTEsMSksbz0hMCksb30sbW9udGhEYXlzOmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIGkscixvLGE9ITEscz1lLmdldEhvdXJzKCksbD1mdW5jdGlvbihlKXtyZXR1cm4gMD5lJiYoZT1pK2UpLGV9O3Q+PWU7KXtpZihyPWUuZ2V0TW9udGgoKSxpPWcoZSksbz11KG4ubW9udGhEYXlzLGUuZ2V0RGF0ZSgpLGwpLG51bGw9PT1vKXJldHVybiBhO2lmKGE9ITAsby5sZW5ndGgpe2lmKGUuc2V0TW9udGgocixvLnNvcnQodilbMF0pLFgoZSxzKSxyPT09ZS5nZXRNb250aCgpKWJyZWFrfWVsc2UgZS5zZXRNb250aChyKzEsMSl9cmV0dXJuIGF9LHllYXJEYXlzOmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHIsbyxhPSExLHM9ZS5nZXRIb3VycygpLGw9ZnVuY3Rpb24oZSl7cmV0dXJuIDA+ZSYmKGU9citlKSxlfTt0PmU7KXtpZihyPW0oZSk/MzY2OjM2NSxvPXUobi55ZWFyRGF5cyxpKGUpLGwpLG51bGw9PT1vKXJldHVybiBhO2lmKGE9ITAscj1lLmdldEZ1bGxZZWFyKCksby5sZW5ndGgpe2Uuc2V0RnVsbFllYXIociwwLG8uc29ydCh2KVswXSksWChlLHMpO2JyZWFrfWUuc2V0RnVsbFllYXIocisxLDAsMSl9cmV0dXJuIGF9LHdlZWtzOmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIGksbyxhLHM9bi53ZWVrU3RhcnQsbD0hMSxjPWUuZ2V0SG91cnMoKSxkPWZ1bmN0aW9uKGUpe3JldHVybiAwPmUmJihlPTUzK2UpLGV9O3Q+ZTspe2lmKG89dShuLndlZWtzLHIoZSxzKSxkKSxudWxsPT09bylyZXR1cm4gbDtpZihsPSEwLGk9ZS5nZXRGdWxsWWVhcigpLG8ubGVuZ3RoKXthPTcqby5zb3J0KHYpWzBdLTEsZS5zZXRGdWxsWWVhcihpLDAsYSksUShlLHMsLTEpLFgoZSxjKTticmVha31lLnNldEZ1bGxZZWFyKGkrMSwwLDEpfXJldHVybiBsfSx3ZWVrRGF5czpmdW5jdGlvbihlLHQsbil7dmFyIGkscixhPW4ud2Vla0RheXMscz1uLndlZWtTdGFydCx1PWQoYSxlLHMpLGg9ZS5nZXRIb3VycygpO2lmKG51bGw9PT11KXJldHVybiExO2lmKGk9dVswXSxpfHwoaT1hWzBdLFEoZSxzKSkscj1pLmRheSxpLm9mZnNldClmb3IoO3Q+PWUmJiFjKGUsaSxzKTspbyhlLHMpPT09bChlLHMpPyhlLnNldE1vbnRoKGUuZ2V0TW9udGgoKSsxLDEpLFgoZSxoKSk6KGUuc2V0RGF0ZShlLmdldERhdGUoKSs3KSxYKGUsaCksUShlLHMsLTEpKTtyZXR1cm4gZS5nZXREYXkoKSE9PXImJlEoZSxyKSwhMH0saG91cnM6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPW4uaG91cnMscj1uLl9zdGFydFRpbWUsbz1yLmdldEhvdXJzKCksYT11KGksbykscz0hMTtyZXR1cm4gbnVsbCE9PWEmJihzPSEwLGUuc2V0SG91cnMobyksWChlLG8pLGEubGVuZ3RoPyhhPWFbMF0sZS5zZXRIb3VycyhhKSk6KGE9ZS5nZXRIb3VycygpLGUuc2V0RGF0ZShlLmdldERhdGUoKSsxKSxYKGUsYSksYT1pWzBdLGUuc2V0SG91cnMoYSksWChlLGEpKSxuLm1pbnV0ZXMmJmUuc2V0TWludXRlcygwKSxyLnNldEhvdXJzKGEsZS5nZXRNaW51dGVzKCkpKSxzfSxtaW51dGVzOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1uLm1pbnV0ZXMscj1lLmdldE1pbnV0ZXMoKSxvPXUoaSxyKSxhPW4uX3N0YXJ0VGltZS5nZXRIb3VycygpLHM9ITE7cmV0dXJuIG51bGwhPT1vJiYocz0hMCxvLmxlbmd0aD9vPW9bMF06KGErPTEsbz1pWzBdKSxuLnNlY29uZHMmJmUuc2V0U2Vjb25kcygwKSxlLnNldEhvdXJzKGEsbyksYSU9MjQsWChlLGEpLG4uX3N0YXJ0VGltZS5zZXRIb3VycyhhLG8sZS5nZXRTZWNvbmRzKCkpKSxzfSxzZWNvbmRzOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1uLnNlY29uZHMscj1uLl9zdGFydFRpbWUuZ2V0SG91cnMoKSxvPXUoaSxlLmdldFNlY29uZHMoKSksYT1lLmdldE1pbnV0ZXMoKSxzPSExO3JldHVybiBudWxsIT09byYmKHM9ITAsby5sZW5ndGg/ZS5zZXRTZWNvbmRzKG9bMF0pOihhKz0xLGUuc2V0TWludXRlcyhhLGlbMF0pLGE+NTkmJihhJT02MCxyPShyKzEpJTI0KSksbi5fc3RhcnRUaW1lLnNldEhvdXJzKHIsYSxlLmdldFNlY29uZHMoKSkpLHN9fSxkdD1qLmV4dGVuZCh7bmV4dDpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj10Ll9zdGFydFRpbWUsbz1yLmdldERhdGUoKTtpZih0LnNlY29uZHMpaT1lLmdldFNlY29uZHMoKSsxLGUuc2V0U2Vjb25kcyhpKSxyLnNldFNlY29uZHMoaSksci5zZXREYXRlKG8pO2Vsc2V7aWYoIXQubWludXRlcylyZXR1cm4hMTtuPWUuZ2V0TWludXRlcygpKzEsZS5zZXRNaW51dGVzKG4pLHIuc2V0TWludXRlcyhuKSxyLnNldERhdGUobyl9cmV0dXJuITB9LG5vcm1hbGl6ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnJ1bGU7ND09PWUuaWR4JiZ0LmhvdXJzJiYodC5fc3RhcnRUaW1lLnNldEhvdXJzKDApLHRoaXMuX2hvdXIoZS5kYXRlLHQpKX0sbGltaXQ6ZnVuY3Rpb24oZSxuLGkpe2Zvcih2YXIgcixvLGEscyxsLGM9aS5pbnRlcnZhbDtuPj1lOyl7Zm9yKGE9bz10LGw9ZS5nZXREYXRlKCkscz0wO3N0PnM7cysrKXtpZihyPWF0W3NdLGlbcl0pe2lmKGE9Y3Rbcl0oZSxuLGkpLG8hPT10JiZhKWJyZWFrO289YX1hJiZ0aGlzLm5vcm1hbGl6ZSh7ZGF0ZTplLHJ1bGU6aSxkYXk6bCxpZHg6c30pfWlmKCgxPT09Y3x8IXRoaXMuaW50ZXJ2YWwoaSxlKSkmJnM9PT1zdClicmVha319LGludGVydmFsOmZ1bmN0aW9uKGUsdCl7dmFyIGksbyxhPW5ldyBEYXRlKGUuX3N0YXJ0UGVyaW9kKSxzPW5ldyBEYXRlKHQpLGw9dC5nZXRIb3VycygpLGM9ZS53ZWVrU3RhcnQsZD1lLmludGVydmFsLHU9ZS5mcmVxLGg9ITEscD0wLGY9MCxnPTE7cmV0dXJuXCJob3VybHlcIj09PXU/KGk9cy5nZXRUaW1lem9uZU9mZnNldCgpLWEuZ2V0VGltZXpvbmVPZmZzZXQoKSxvPWUuX3N0YXJ0VGltZS5nZXRIb3VycygpLHM9cy5nZXRUaW1lKCksbCE9PW8mJihzKz0oby1sKSpZLk1TX1BFUl9IT1VSKSxzLT1hLGkmJihzLT1pKlkuTVNfUEVSX01JTlVURSksaT1NYXRoLmZsb29yKHMvWS5NU19QRVJfSE9VUikscD1uKGksZCksMCE9PXAmJih0aGlzLl9ob3VyKHQsZSxwKSxoPSEwKSk6XCJkYWlseVwiPT09dT8oWS5zZXRUaW1lKHMsLWEpLGk9TWF0aC5mbG9vcihzL1kuTVNfUEVSX0RBWSkscD1uKGksZCksMCE9PXAmJih0aGlzLl9kYXRlKHQsZSxwKSxoPSEwKSk6XCJ3ZWVrbHlcIj09PXU/KGk9NTIqKHQuZ2V0RnVsbFllYXIoKS1hLmdldEZ1bGxZZWFyKCkpLHA9cih0LGMpLXIoYSxjKStpLHA9bihwLGQpLDAhPT1wJiYoWS5zZXREYXlPZldlZWsodCxlLndlZWtTdGFydCwtMSksdC5zZXREYXRlKHQuZ2V0RGF0ZSgpKzcqcCksWCh0LGwpLGg9ITApKTpcIm1vbnRobHlcIj09PXU/KGk9dC5nZXRGdWxsWWVhcigpLWEuZ2V0RnVsbFllYXIoKSxpPXQuZ2V0TW9udGgoKS1hLmdldE1vbnRoKCkrMTIqaSxwPW4oaSxkKSwwIT09cCYmKGc9ZS5faGFzUnVsZVZhbHVlPzE6dC5nZXREYXRlKCksdC5zZXRGdWxsWWVhcih0LmdldEZ1bGxZZWFyKCksdC5nZXRNb250aCgpK3AsZyksWCh0LGwpLGg9ITApKTpcInllYXJseVwiPT09dSYmKGk9dC5nZXRGdWxsWWVhcigpLWEuZ2V0RnVsbFllYXIoKSxwPW4oaSxkKSxlLm1vbnRoc3x8KGY9dC5nZXRNb250aCgpKSxlLnllYXJEYXlzfHxlLm1vbnRoRGF5c3x8ZS53ZWVrRGF5c3x8KGc9dC5nZXREYXRlKCkpLDAhPT1wJiYodC5zZXRGdWxsWWVhcih0LmdldEZ1bGxZZWFyKCkrcCxmLGcpLFgodCxsKSxoPSEwKSksaH0sX2hvdXI6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXQuX3N0YXJ0VGltZSxyPWkuZ2V0SG91cnMoKTtuJiYocis9biksZS5zZXRIb3VycyhyKSxyJT0yNCxpLnNldEhvdXJzKHIpLFgoZSxyKX0sX2RhdGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPWUuZ2V0SG91cnMoKTtlLnNldERhdGUoZS5nZXREYXRlKCkrbiksWChlLGkpfHx0aGlzLl9ob3VyKGUsdCl9fSksdXQ9ZHQuZXh0ZW5kKHtuZXh0OmZ1bmN0aW9uKGUsdCl7ZHQuZm4ubmV4dChlLHQpfHx0aGlzLl9ob3VyKGUsdCwxKVxufSxub3JtYWxpemU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ydWxlOzQ9PT1lLmlkeCYmKHQuX3N0YXJ0VGltZS5zZXRIb3VycygwKSx0aGlzLl9ob3VyKGUuZGF0ZSx0KSl9fSksaHQ9ZHQuZXh0ZW5kKHtuZXh0OmZ1bmN0aW9uKGUsdCl7ZHQuZm4ubmV4dChlLHQpfHx0aGlzW3QuaG91cnM/XCJfaG91clwiOlwiX2RhdGVcIl0oZSx0LDEpfX0pLHB0PWh0LmV4dGVuZCh7c2V0dXA6ZnVuY3Rpb24oZSx0KXtlLndlZWtEYXlzfHwoZS53ZWVrRGF5cz1be2RheTp0LmdldERheSgpLG9mZnNldDowfV0pfX0pLGZ0PWR0LmV4dGVuZCh7bmV4dDpmdW5jdGlvbihlLHQpe3ZhciBuLGk7aWYoIWR0LmZuLm5leHQoZSx0KSlpZih0LmhvdXJzKXRoaXMuX2hvdXIoZSx0LDEpO2Vsc2UgaWYodC5tb250aERheXN8fHQud2Vla0RheXN8fHQueWVhckRheXN8fHQud2Vla3MpdGhpcy5fZGF0ZShlLHQsMSk7ZWxzZXtmb3Iobj1lLmdldERhdGUoKSxpPWUuZ2V0SG91cnMoKSxlLnNldE1vbnRoKGUuZ2V0TW9udGgoKSsxKSxYKGUsaSk7ZS5nZXREYXRlKCkhPT1uOyllLnNldERhdGUobiksWChlLGkpO3RoaXMuX2hvdXIoZSx0KX19LG5vcm1hbGl6ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnJ1bGUsbj1lLmRhdGUsaT1uLmdldEhvdXJzKCk7MCE9PWUuaWR4fHx0Lm1vbnRoRGF5c3x8dC53ZWVrRGF5cz9kdC5mbi5ub3JtYWxpemUoZSk6KG4uc2V0RGF0ZShlLmRheSksWChuLGkpKX0sc2V0dXA6ZnVuY3Rpb24oZSx0LG4pe2UubW9udGhEYXlzfHxlLndlZWtEYXlzfHxuLnNldERhdGUodC5nZXREYXRlKCkpfX0pLGd0PWZ0LmV4dGVuZCh7bmV4dDpmdW5jdGlvbihlLHQpe3ZhciBuLGk9ZS5nZXRIb3VycygpO2lmKCFkdC5mbi5uZXh0KGUsdCkpaWYodC5ob3Vycyl0aGlzLl9ob3VyKGUsdCwxKTtlbHNlIGlmKHQubW9udGhEYXlzfHx0LndlZWtEYXlzfHx0LnllYXJEYXlzfHx0LndlZWtzKXRoaXMuX2RhdGUoZSx0LDEpO2Vsc2UgaWYodC5tb250aHMpe2ZvcihuPWUuZ2V0RGF0ZSgpLGUuc2V0TW9udGgoZS5nZXRNb250aCgpKzEpLFgoZSxpKTtlLmdldERhdGUoKSE9PW47KWUuc2V0RGF0ZShuKSxYKGUsaSk7dGhpcy5faG91cihlLHQpfWVsc2UgZS5zZXRGdWxsWWVhcihlLmdldEZ1bGxZZWFyKCkrMSksWChlLGkpLHRoaXMuX2hvdXIoZSx0KX0sc2V0dXA6ZnVuY3Rpb24oKXt9fSksbXQ9e2hvdXJseTpuZXcgdXQsZGFpbHk6bmV3IGh0LHdlZWtseTpuZXcgcHQsbW9udGhseTpuZXcgZnQseWVhcmx5Om5ldyBndH0sdnQ9XCJjbGlja1wiO1UucmVjdXJyZW5jZT17cnVsZTp7cGFyc2U6RCxzZXJpYWxpemU6RX0sZXhwYW5kOkMsZGF5SW5ZZWFyOmksd2Vla0luWWVhcjpyLHdlZWtJbk1vbnRoOm8sbnVtYmVyT2ZXZWVrczpsLGlzRXhjZXB0aW9uOnksdG9FeGNlcHRpb25TdHJpbmc6d30sTT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9VS5jdWx0dXJlKCkuY2FsZW5kYXIuZGF5cy5uYW1lc1Nob3J0LG49dC5sZW5ndGgsaT1cIlwiLHI9MCxvPVtdO24+cjtyKyspby5wdXNoKHIpO2Zvcih0PXQuc2xpY2UoZSkuY29uY2F0KHQuc2xpY2UoMCxlKSksbz1vLnNsaWNlKGUpLmNvbmNhdChvLnNsaWNlKDAsZSkpLHI9MDtuPnI7cisrKWkrPSc8bGFiZWwgY2xhc3M9XCJrLWNoZWNrXCI+PGlucHV0IGNsYXNzPVwiay1yZWN1ci13ZWVrZGF5LWNoZWNrYm94XCIgdHlwZT1cImNoZWNrYm94XCIgdmFsdWU9XCInK29bcl0rJ1wiIC8+ICcrdFtyXStcIjwvbGFiZWw+XCI7cmV0dXJuIGl9LFA9VS50ZW1wbGF0ZSgnIyBpZiAoZnJlcXVlbmN5ICE9PSBcIm5ldmVyXCIpIHsgIzxkaXYgY2xhc3M9XCJrLWVkaXQtbGFiZWxcIj48bGFiZWw+IzptZXNzYWdlcy5yZXBlYXRFdmVyeSM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLWludGVydmFsXCIvPiM6bWVzc2FnZXMuaW50ZXJ2YWwjPC9kaXY+IyB9ICMjIGlmIChmcmVxdWVuY3kgPT09IFwid2Vla2x5XCIpIHsgIzxkaXYgY2xhc3M9XCJrLWVkaXQtbGFiZWxcIj48bGFiZWw+IzptZXNzYWdlcy5yZXBlYXRPbiM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj4jPXdlZWtEYXlDaGVja0JveGVzKGZpcnN0V2Vla0RheSkjPC9kaXY+IyB9IGVsc2UgaWYgKGZyZXF1ZW5jeSA9PT0gXCJtb250aGx5XCIpIHsgIzxkaXYgY2xhc3M9XCJrLWVkaXQtbGFiZWxcIj48bGFiZWw+IzptZXNzYWdlcy5yZXBlYXRPbiM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj48dWwgY2xhc3M9XCJrLXJlc2V0XCI+PGxpPjxsYWJlbD48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLW1vbnRoLXJhZGlvXCIgdHlwZT1cInJhZGlvXCIgbmFtZT1cIm1vbnRoXCIgdmFsdWU9XCJtb250aGRheVwiIC8+IzptZXNzYWdlcy5kYXkjPC9sYWJlbD48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLW1vbnRoZGF5XCIgLz48L2xpPjxsaT48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLW1vbnRoLXJhZGlvXCIgdHlwZT1cInJhZGlvXCIgbmFtZT1cIm1vbnRoXCIgdmFsdWU9XCJ3ZWVrZGF5XCIgLz48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLXdlZWtkYXktb2Zmc2V0XCIgLz48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLXdlZWtkYXlcIiAvPjwvbGk+PC91bD48L2Rpdj4jIH0gZWxzZSBpZiAoZnJlcXVlbmN5ID09PSBcInllYXJseVwiKSB7ICM8ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMucmVwZWF0T24jPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PHVsIGNsYXNzPVwiay1yZXNldFwiPjxsaT48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLXllYXItcmFkaW9cIiB0eXBlPVwicmFkaW9cIiBuYW1lPVwieWVhclwiIHZhbHVlPVwibW9udGhkYXlcIiAvPjxpbnB1dCBjbGFzcz1cImstcmVjdXItbW9udGhcIiAvPjxpbnB1dCBjbGFzcz1cImstcmVjdXItbW9udGhkYXlcIiAvPjwvbGk+PGxpPjxpbnB1dCBjbGFzcz1cImstcmVjdXIteWVhci1yYWRpb1wiIHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJ5ZWFyXCIgdmFsdWU9XCJ3ZWVrZGF5XCIgLz48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLXdlZWtkYXktb2Zmc2V0XCIgLz48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLXdlZWtkYXlcIiAvPiM6bWVzc2FnZXMub2YjPGlucHV0IGNsYXNzPVwiay1yZWN1ci1tb250aFwiIC8+PC9saT48L3VsPjwvZGl2PiMgfSAjIyBpZiAoZnJlcXVlbmN5ICE9PSBcIm5ldmVyXCIpIHsgIzxkaXYgY2xhc3M9XCJrLWVkaXQtbGFiZWxcIj48bGFiZWw+IzplbmQubGFiZWwjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PHVsIGNsYXNzPVwiay1yZXNldFwiPjxsaT48bGFiZWw+PGlucHV0IGNsYXNzPVwiay1yZWN1ci1lbmQtbmV2ZXJcIiB0eXBlPVwicmFkaW9cIiBuYW1lPVwiZW5kXCIgdmFsdWU9XCJuZXZlclwiIC8+IzplbmQubmV2ZXIjPC9sYWJlbD48L2xpPjxsaT48bGFiZWw+PGlucHV0IGNsYXNzPVwiay1yZWN1ci1lbmQtY291bnRcIiB0eXBlPVwicmFkaW9cIiBuYW1lPVwiZW5kXCIgdmFsdWU9XCJjb3VudFwiIC8+IzplbmQuYWZ0ZXIjPC9sYWJlbD48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLWNvdW50XCIgLz4jOmVuZC5vY2N1cnJlbmNlIzwvbGk+PGxpPjxsYWJlbD48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLWVuZC11bnRpbFwiIHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJlbmRcIiB2YWx1ZT1cInVudGlsXCIgLz4jOmVuZC5vbiM8L2xhYmVsPjxpbnB1dCBjbGFzcz1cImstcmVjdXItdW50aWxcIiAvPjwvbGk+PC91bD48L2Rpdj4jIH0gIycpLEk9W3tkYXk6MCxvZmZzZXQ6MH0se2RheToxLG9mZnNldDowfSx7ZGF5OjIsb2Zmc2V0OjB9LHtkYXk6MyxvZmZzZXQ6MH0se2RheTo0LG9mZnNldDowfSx7ZGF5OjUsb2Zmc2V0OjB9LHtkYXk6NixvZmZzZXQ6MH1dLHo9W3tkYXk6MSxvZmZzZXQ6MH0se2RheToyLG9mZnNldDowfSx7ZGF5OjMsb2Zmc2V0OjB9LHtkYXk6NCxvZmZzZXQ6MH0se2RheTo1LG9mZnNldDowfV0sRj1be2RheTowLG9mZnNldDowfSx7ZGF5OjYsb2Zmc2V0OjB9XSxSPXEuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzLHI9dCYmdC5mcmVxdWVuY2llcztxLmZuLmluaXQuY2FsbChpLGUsdCksaS53cmFwcGVyPWkuZWxlbWVudCx0PWkub3B0aW9ucyx0LnN0YXJ0PW49dC5zdGFydHx8WS50b2RheSgpLHImJih0LmZyZXF1ZW5jaWVzPXIpLFwic3RyaW5nXCI9PXR5cGVvZiBuJiYodC5zdGFydD1VLnBhcnNlRGF0ZShuLFwieXl5eU1NZGRUSEhtbXNzXCIpKSxudWxsPT09dC5maXJzdFdlZWtEYXkmJih0LmZpcnN0V2Vla0RheT1VLmN1bHR1cmUoKS5jYWxlbmRhci5maXJzdERheSksaS5fbmFtZXNwYWNlPVwiLlwiK3QubmFtZX0sb3B0aW9uczp7dmFsdWU6XCJcIixzdGFydDpcIlwiLHRpbWV6b25lOlwiXCIsc3Bpbm5lcnM6ITAsZmlyc3RXZWVrRGF5Om51bGwsZnJlcXVlbmNpZXM6W1wibmV2ZXJcIixcImRhaWx5XCIsXCJ3ZWVrbHlcIixcIm1vbnRobHlcIixcInllYXJseVwiXSxtb2JpbGU6ITEsbWVzc2FnZXM6e2ZyZXF1ZW5jaWVzOntuZXZlcjpcIk5ldmVyXCIsaG91cmx5OlwiSG91cmx5XCIsZGFpbHk6XCJEYWlseVwiLHdlZWtseTpcIldlZWtseVwiLG1vbnRobHk6XCJNb250aGx5XCIseWVhcmx5OlwiWWVhcmx5XCJ9LGhvdXJseTp7cmVwZWF0RXZlcnk6XCJSZXBlYXQgZXZlcnk6IFwiLGludGVydmFsOlwiIGhvdXIocylcIn0sZGFpbHk6e3JlcGVhdEV2ZXJ5OlwiUmVwZWF0IGV2ZXJ5OiBcIixpbnRlcnZhbDpcIiBkYXkocylcIn0sd2Vla2x5OntpbnRlcnZhbDpcIiB3ZWVrKHMpXCIscmVwZWF0RXZlcnk6XCJSZXBlYXQgZXZlcnk6IFwiLHJlcGVhdE9uOlwiUmVwZWF0IG9uOiBcIn0sbW9udGhseTp7cmVwZWF0RXZlcnk6XCJSZXBlYXQgZXZlcnk6IFwiLHJlcGVhdE9uOlwiUmVwZWF0IG9uOiBcIixpbnRlcnZhbDpcIiBtb250aChzKVwiLGRheTpcIkRheSBcIn0seWVhcmx5OntyZXBlYXRFdmVyeTpcIlJlcGVhdCBldmVyeTogXCIscmVwZWF0T246XCJSZXBlYXQgb246IFwiLGludGVydmFsOlwiIHllYXIocylcIixvZjpcIiBvZiBcIn0sZW5kOntsYWJlbDpcIkVuZDpcIixtb2JpbGVMYWJlbDpcIkVuZHNcIixuZXZlcjpcIk5ldmVyXCIsYWZ0ZXI6XCJBZnRlciBcIixvY2N1cnJlbmNlOlwiIG9jY3VycmVuY2UocylcIixvbjpcIk9uIFwifSxvZmZzZXRQb3NpdGlvbnM6e2ZpcnN0OlwiZmlyc3RcIixzZWNvbmQ6XCJzZWNvbmRcIix0aGlyZDpcInRoaXJkXCIsZm91cnRoOlwiZm91cnRoXCIsbGFzdDpcImxhc3RcIn0sd2Vla2RheXM6e2RheTpcImRheVwiLHdlZWtkYXk6XCJ3ZWVrZGF5XCIsd2Vla2VuZDpcIndlZWtlbmQgZGF5XCJ9fX0sZXZlbnRzOltcImNoYW5nZVwiXSxfaW5pdEludGVydmFsOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX3ZhbHVlO2UuX2NvbnRhaW5lci5maW5kKFwiLmstcmVjdXItaW50ZXJ2YWxcIikua2VuZG9OdW1lcmljVGV4dEJveCh7c3Bpbm5lcnM6ZS5vcHRpb25zLnNwaW5uZXJzLHZhbHVlOnQuaW50ZXJ2YWx8fDEsZGVjaW1hbHM6MCxmb3JtYXQ6XCIjXCIsbWluOjEsY2hhbmdlOmZ1bmN0aW9uKCl7dC5pbnRlcnZhbD10aGlzLnZhbHVlKCksZS5fdHJpZ2dlcigpfX0pfSxfd2Vla0RheVJ1bGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPSh0Ll93ZWVrRGF5LmVsZW1lbnR8fHQuX3dlZWtEYXkpLnZhbCgpLGk9Kyh0Ll93ZWVrRGF5T2Zmc2V0LmVsZW1lbnR8fHQuX3dlZWtEYXlPZmZzZXQpLnZhbCgpLHI9bnVsbCxvPW51bGw7ZXx8KFwiZGF5XCI9PT1uPyhyPUksbz1pKTpcIndlZWtkYXlcIj09PW4/KHI9eixvPWkpOlwid2Vla2VuZFwiPT09bj8ocj1GLG89aSk6cj1be29mZnNldDppLGRheTorbn1dKSx0Ll92YWx1ZS53ZWVrRGF5cz1yLHQuX3ZhbHVlLnBvc2l0aW9ucz1vfSxfd2Vla0RheVZpZXc6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyPXRoaXMsbz1yLl92YWx1ZS53ZWVrRGF5cyxhPXIuX3ZhbHVlLnBvc2l0aW9ucyxzPXIuX3dlZWtEYXlPZmZzZXQ7byYmKG49by5sZW5ndGgsYSYmKDc9PT1uPyh0PVwiZGF5XCIsZT1hKTo1PT09bj8odD1cIndlZWtkYXlcIixlPWEpOjI9PT1uJiYodD1cIndlZWtlbmRcIixlPWEpKSx0fHwobz1vWzBdLHQ9by5kYXksZT1vLm9mZnNldHx8XCJcIiksaT1zLnZhbHVlP1widmFsdWVcIjpcInZhbFwiLHNbaV0oZSksci5fd2Vla0RheVtpXSh0KSl9LF9pbml0V2Vla0RheTpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4ub3B0aW9ucy5tZXNzYWdlcy53ZWVrZGF5cyxyPW4ub3B0aW9ucy5tZXNzYWdlcy5vZmZzZXRQb3NpdGlvbnMsbz1uLl9jb250YWluZXIuZmluZChcIi5rLXJlY3VyLXdlZWtkYXlcIiksYT1mdW5jdGlvbigpe24uX3dlZWtEYXlSdWxlKCksbi5fdHJpZ2dlcigpfTtvWzBdJiYobi5fd2Vla0RheU9mZnNldD1uZXcgJChuLl9jb250YWluZXIuZmluZChcIi5rLXJlY3VyLXdlZWtkYXktb2Zmc2V0XCIpLHtjaGFuZ2U6YSxkYXRhVGV4dEZpZWxkOlwidGV4dFwiLGRhdGFWYWx1ZUZpZWxkOlwidmFsdWVcIixkYXRhU291cmNlOlt7dGV4dDpyLmZpcnN0LHZhbHVlOlwiMVwifSx7dGV4dDpyLnNlY29uZCx2YWx1ZTpcIjJcIn0se3RleHQ6ci50aGlyZCx2YWx1ZTpcIjNcIn0se3RleHQ6ci5mb3VydGgsdmFsdWU6XCI0XCJ9LHt0ZXh0OnIubGFzdCx2YWx1ZTpcIi0xXCJ9XX0pLHQ9W3t0ZXh0OmkuZGF5LHZhbHVlOlwiZGF5XCJ9LHt0ZXh0Omkud2Vla2RheSx2YWx1ZTpcIndlZWtkYXlcIn0se3RleHQ6aS53ZWVrZW5kLHZhbHVlOlwid2Vla2VuZFwifV0sbi5fd2Vla0RheT1uZXcgJChvLHt2YWx1ZTpuLm9wdGlvbnMuc3RhcnQuZ2V0RGF5KCksY2hhbmdlOmEsZGF0YVRleHRGaWVsZDpcInRleHRcIixkYXRhVmFsdWVGaWVsZDpcInZhbHVlXCIsZGF0YVNvdXJjZTp0LmNvbmNhdChlLm1hcChVLmN1bHR1cmUoKS5jYWxlbmRhci5kYXlzLm5hbWVzLGZ1bmN0aW9uKGUsdCl7cmV0dXJue3RleHQ6ZSx2YWx1ZTp0fX0pKX0pLG4uX3dlZWtEYXlWaWV3KCkpfSxfaW5pdFdlZWtEYXlzOmZ1bmN0aW9uKCl7dmFyIHQsbixpLHIsbyxhPXRoaXMscz1hLl92YWx1ZSxsPWEuX2NvbnRhaW5lci5maW5kKFwiLmstcmVjdXItd2Vla2RheS1jaGVja2JveFwiKTtpZihsWzBdJiYobC5vbih2dCthLl9uYW1lc3BhY2UsZnVuY3Rpb24oKXtzLndlZWtEYXlzPWUubWFwKGwuZmlsdGVyKFwiOmNoZWNrZWRcIiksZnVuY3Rpb24oZSl7cmV0dXJue2RheTorZS52YWx1ZSxvZmZzZXQ6MH19KSxhLm9wdGlvbnMubW9iaWxlfHxhLl90cmlnZ2VyKCl9KSxzLndlZWtEYXlzKSlmb3IoaT0wLHI9bC5sZW5ndGgsbz1zLndlZWtEYXlzLmxlbmd0aDtyPmk7aSsrKWZvcihuPWxbaV0sdD0wO28+dDt0Kyspbi52YWx1ZT09cy53ZWVrRGF5c1t0XS5kYXkmJihuLmNoZWNrZWQ9ITApfSxfaW5pdE1vbnRoRGF5OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX3ZhbHVlLG49ZS5fY29udGFpbmVyLmZpbmQoXCIuay1yZWN1ci1tb250aGRheVwiKTtuWzBdJiYoZS5fbW9udGhEYXk9bmV3IFUudWkuTnVtZXJpY1RleHRCb3gobix7c3Bpbm5lcnM6ZS5vcHRpb25zLnNwaW5uZXJzLG1pbjoxLG1heDozMSxkZWNpbWFsczowLGZvcm1hdDpcIiNcIix2YWx1ZTp0Lm1vbnRoRGF5cz90Lm1vbnRoRGF5c1swXTplLm9wdGlvbnMuc3RhcnQuZ2V0RGF0ZSgpLGNoYW5nZTpmdW5jdGlvbigpe3ZhciBuPXRoaXMudmFsdWUoKTt0Lm1vbnRoRGF5cz1uP1tuXTpuLGUuX3RyaWdnZXIoKX19KSl9LF9pbml0Q291bnQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5fY29udGFpbmVyLmZpbmQoXCIuay1yZWN1ci1jb3VudFwiKSxuPWUuX3ZhbHVlO2UuX2NvdW50PXQua2VuZG9OdW1lcmljVGV4dEJveCh7c3Bpbm5lcnM6ZS5vcHRpb25zLnNwaW5uZXJzLHZhbHVlOm4uY291bnR8fDEsZGVjaW1hbHM6MCxmb3JtYXQ6XCIjXCIsbWluOjEsY2hhbmdlOmZ1bmN0aW9uKCl7bi5jb3VudD10aGlzLnZhbHVlKCksZS5fdHJpZ2dlcigpfX0pLmRhdGEoXCJrZW5kb051bWVyaWNUZXh0Qm94XCIpfSxfaW5pdFVudGlsOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX2NvbnRhaW5lci5maW5kKFwiLmstcmVjdXItdW50aWxcIiksbj1lLm9wdGlvbnMuc3RhcnQsaT1lLl92YWx1ZSxyPWkudW50aWw7ZS5fdW50aWw9dC5rZW5kb0RhdGVQaWNrZXIoe21pbjpyJiZuPnI/cjpuLHZhbHVlOnJ8fG4sY2hhbmdlOmZ1bmN0aW9uKCl7aS51bnRpbD10aGlzLnZhbHVlKCksZS5fdHJpZ2dlcigpfX0pLmRhdGEoXCJrZW5kb0RhdGVQaWNrZXJcIil9LF90cmlnZ2VyOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLm1vYmlsZXx8dGhpcy50cmlnZ2VyKFwiY2hhbmdlXCIpfX0pLEI9Ui5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO1IuZm4uaW5pdC5jYWxsKG4sZSx0KSxuLl9pbml0RnJlcXVlbmN5KCksbi5faW5pdENvbnRhaW5lcigpLG4udmFsdWUobi5vcHRpb25zLnZhbHVlKX0sb3B0aW9uczp7bmFtZTpcIlJlY3VycmVuY2VFZGl0b3JcIn0sZXZlbnRzOltcImNoYW5nZVwiXSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9mcmVxdWVuY3kuZGVzdHJveSgpLGUuX2NvbnRhaW5lci5maW5kKFwiaW5wdXRbdHlwZT1yYWRpb10saW5wdXRbdHlwZT1jaGVja2JveF1cIikub2ZmKHZ0K2UuX25hbWVzcGFjZSksVS5kZXN0cm95KGUuX2NvbnRhaW5lciksUi5mbi5kZXN0cm95LmNhbGwoZSl9LHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLm9wdGlvbnMudGltZXpvbmU7cmV0dXJuIGU9PT10P24uX3ZhbHVlLmZyZXE/RShuLl92YWx1ZSxpKTpcIlwiOihuLl92YWx1ZT1EKGUsaSl8fHt9LG4uX2ZyZXF1ZW5jeS52YWx1ZShuLl92YWx1ZS5mcmVxfHxcIlwiKSxuLl9pbml0VmlldyhuLl9mcmVxdWVuY3kudmFsdWUoKSksdCl9LF9pbml0Q29udGFpbmVyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5lbGVtZW50LG49ZSgnPGRpdiBjbGFzcz1cImstcmVjdXItdmlld1wiIC8+JyksaT10LnBhcmVudChcIi5rLWVkaXQtZmllbGRcIik7aVswXT9uLmluc2VydEFmdGVyKGkpOnQuYXBwZW5kKG4pLHRoaXMuX2NvbnRhaW5lcj1ufSxfaW5pdEZyZXF1ZW5jeTpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4ub3B0aW9ucyxyPWkuZnJlcXVlbmNpZXMsbz1pLm1lc3NhZ2VzLmZyZXF1ZW5jaWVzLGE9ZShcIjxpbnB1dCAvPlwiKTtyPWUubWFwKHIsZnVuY3Rpb24oZSl7cmV0dXJue3RleHQ6b1tlXSx2YWx1ZTplfX0pLHQ9clswXSx0JiZcIm5ldmVyXCI9PT10LnZhbHVlJiYodC52YWx1ZT1cIlwiKSxuLmVsZW1lbnQuYXBwZW5kKGEpLG4uX2ZyZXF1ZW5jeT1uZXcgJChhLHtkYXRhVGV4dEZpZWxkOlwidGV4dFwiLGRhdGFWYWx1ZUZpZWxkOlwidmFsdWVcIixkYXRhU291cmNlOnIsY2hhbmdlOmZ1bmN0aW9uKCl7bi5fdmFsdWU9e30sbi5faW5pdFZpZXcobi5fZnJlcXVlbmN5LnZhbHVlKCkpLG4udHJpZ2dlcihcImNoYW5nZVwiKX19KX0sX2luaXRWaWV3OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLl92YWx1ZSxyPW4ub3B0aW9ucyxvPXtmcmVxdWVuY3k6ZXx8XCJuZXZlclwiLHdlZWtEYXlDaGVja0JveGVzOk0sZmlyc3RXZWVrRGF5OnIuZmlyc3RXZWVrRGF5LG1lc3NhZ2VzOnIubWVzc2FnZXNbZV0sZW5kOnIubWVzc2FnZXMuZW5kfTtyZXR1cm4gVS5kZXN0cm95KG4uX2NvbnRhaW5lciksbi5fY29udGFpbmVyLmh0bWwoUChvKSksZT8oaS5mcmVxPWUsXCJ3ZWVrbHlcIiE9PWV8fGkud2Vla0RheXN8fChpLndlZWtEYXlzPVt7ZGF5OnIuc3RhcnQuZ2V0RGF5KCksb2Zmc2V0OjB9XSksbi5faW5pdEludGVydmFsKCksbi5faW5pdFdlZWtEYXlzKCksbi5faW5pdE1vbnRoRGF5KCksbi5faW5pdFdlZWtEYXkoKSxuLl9pbml0TW9udGgoKSxuLl9pbml0Q291bnQoKSxuLl9pbml0VW50aWwoKSxuLl9wZXJpb2QoKSxuLl9lbmQoKSx0KToobi5fdmFsdWU9e30sdCl9LF9pbml0TW9udGg6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLl92YWx1ZSxyPWkubW9udGhzfHxbbi5vcHRpb25zLnN0YXJ0LmdldE1vbnRoKCkrMV0sbz1uLl9jb250YWluZXIuZmluZChcIi5rLXJlY3VyLW1vbnRoXCIpO29bMF0mJih0PXtjaGFuZ2U6ZnVuY3Rpb24oKXtpLm1vbnRocz1bK3RoaXMudmFsdWUoKV0sbi50cmlnZ2VyKFwiY2hhbmdlXCIpfSxkYXRhVGV4dEZpZWxkOlwidGV4dFwiLGRhdGFWYWx1ZUZpZWxkOlwidmFsdWVcIixkYXRhU291cmNlOmUubWFwKFUuY3VsdHVyZSgpLmNhbGVuZGFyLm1vbnRocy5uYW1lcyxmdW5jdGlvbihlLHQpe3JldHVybnt0ZXh0OmUsdmFsdWU6dCsxfX0pfSxuLl9tb250aDE9bmV3ICQob1swXSx0KSxuLl9tb250aDI9bmV3ICQob1sxXSx0KSxyJiYocj1yWzBdLG4uX21vbnRoMS52YWx1ZShyKSxuLl9tb250aDIudmFsdWUocikpKX0sX2VuZDpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQuX3ZhbHVlLGk9dC5fY29udGFpbmVyLHI9dC5fbmFtZXNwYWNlLG89ZnVuY3Rpb24oZSl7dC5fdG9nZ2xlRW5kKGUuY3VycmVudFRhcmdldC52YWx1ZSksdC50cmlnZ2VyKFwiY2hhbmdlXCIpfTt0Ll9idXR0b25OZXZlcj1pLmZpbmQoXCIuay1yZWN1ci1lbmQtbmV2ZXJcIikub24odnQrcixvKSx0Ll9idXR0b25Db3VudD1pLmZpbmQoXCIuay1yZWN1ci1lbmQtY291bnRcIikub24odnQrcixvKSx0Ll9idXR0b25VbnRpbD1pLmZpbmQoXCIuay1yZWN1ci1lbmQtdW50aWxcIikub24odnQrcixvKSxuLmNvdW50P2U9XCJjb3VudFwiOm4udW50aWwmJihlPVwidW50aWxcIiksdC5fdG9nZ2xlRW5kKGUpfSxfcGVyaW9kOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX3ZhbHVlLG49XCJtb250aGx5XCI9PT10LmZyZXEsaT1uP2UuX3RvZ2dsZU1vbnRoRGF5OmUuX3RvZ2dsZVllYXIscj1cIi5rLXJlY3VyLVwiKyhuP1wibW9udGhcIjpcInllYXJcIikrXCItcmFkaW9cIixvPWUuX2NvbnRhaW5lci5maW5kKHIpOyhufHxcInllYXJseVwiPT09dC5mcmVxKSYmKG8ub24odnQrZS5fbmFtZXNwYWNlLGZ1bmN0aW9uKHQpe2kuY2FsbChlLHQuY3VycmVudFRhcmdldC52YWx1ZSksZS50cmlnZ2VyKFwiY2hhbmdlXCIpfSksZS5fYnV0dG9uTW9udGhEYXk9by5lcSgwKSxlLl9idXR0b25XZWVrRGF5PW8uZXEoMSksaS5jYWxsKGUsdC53ZWVrRGF5cz9cIndlZWtkYXlcIjpcIm1vbnRoZGF5XCIpKX0sX3RvZ2dsZUVuZDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvPXRoaXM7XCJjb3VudFwiPT09ZT8oby5fYnV0dG9uQ291bnQucHJvcChcImNoZWNrZWRcIiwhMCksaT0hMCxyPSExLHQ9by5fY291bnQudmFsdWUoKSxuPW51bGwpOlwidW50aWxcIj09PWU/KG8uX2J1dHRvblVudGlsLnByb3AoXCJjaGVja2VkXCIsITApLGk9ITEscj0hMCx0PW51bGwsbj1vLl91bnRpbC52YWx1ZSgpKTooby5fYnV0dG9uTmV2ZXIucHJvcChcImNoZWNrZWRcIiwhMCksaT1yPSExLHQ9bj1udWxsKSxvLl9jb3VudC5lbmFibGUoaSksby5fdW50aWwuZW5hYmxlKHIpLG8uX3ZhbHVlLmNvdW50PXQsby5fdmFsdWUudW50aWw9bn0sX3RvZ2dsZU1vbnRoRGF5OmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxpPSExLHI9ITAsbz0hMTtcIm1vbnRoZGF5XCI9PT1lPyhuLl9idXR0b25Nb250aERheS5wcm9wKFwiY2hlY2tlZFwiLCEwKSx0PVtuLl9tb250aERheS52YWx1ZSgpXSxpPSEwLHI9ITEsbz0hMCk6KG4uX2J1dHRvbldlZWtEYXkucHJvcChcImNoZWNrZWRcIiwhMCksdD1udWxsKSxuLl93ZWVrRGF5LmVuYWJsZShyKSxuLl93ZWVrRGF5T2Zmc2V0LmVuYWJsZShyKSxuLl9tb250aERheS5lbmFibGUoaSksbi5fdmFsdWUubW9udGhEYXlzPXQsbi5fd2Vla0RheVJ1bGUobyl9LF90b2dnbGVZZWFyOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxpPSExLHI9ITA7XCJtb250aGRheVwiPT09ZT8oaT0hMCxyPSExLHQ9bi5fbW9udGgxLnZhbHVlKCkpOnQ9bi5fbW9udGgyLnZhbHVlKCksbi5fbW9udGgxLmVuYWJsZShpKSxuLl9tb250aDIuZW5hYmxlKHIpLG4uX3ZhbHVlLm1vbnRocz1bdF0sbi5fdG9nZ2xlTW9udGhEYXkoZSl9fSksRy5wbHVnaW4oQiksTD1VLnRlbXBsYXRlKCc8ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6aGVhZGVyVGl0bGUjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkIGstcmVjdXItcGF0dGVybiBrLXNjaGVkdWxlci10b29sYmFyXCI+PC9kaXY+PGRpdiBjbGFzcz1cImstcmVjdXItdmlld1wiPjwvZGl2PicpLE89VS50ZW1wbGF0ZSgnIyBpZiAoZnJlcXVlbmN5ICE9PSBcIm5ldmVyXCIpIHsgIzxkaXYgY2xhc3M9XCJrLWVkaXQtbGFiZWxcIj48bGFiZWw+IzptZXNzYWdlcy5yZXBlYXRFdmVyeSM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLWludGVydmFsXCIgcGF0dGVybj1cIlxcXFxcXFxcZCpcIi8+IzptZXNzYWdlcy5pbnRlcnZhbCM8L2Rpdj4jIH0gIyMgaWYgKGZyZXF1ZW5jeSA9PT0gXCJ3ZWVrbHlcIikgeyAjPGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4jOm1lc3NhZ2VzLnJlcGVhdE9uIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1maWVsZFwiPiM9d2Vla0RheUNoZWNrQm94ZXMoZmlyc3RXZWVrRGF5KSM8L2Rpdj4jIH0gZWxzZSBpZiAoZnJlcXVlbmN5ID09PSBcIm1vbnRobHlcIikgeyAjPGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4jOm1lc3NhZ2VzLnJlcGVhdEJ5IzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1maWVsZCBrLXNjaGVkdWxlci10b29sYmFyIGstcmVwZWF0LXJ1bGVcIj48L2Rpdj48ZGl2IGNsYXNzPVwiay1tb250aGRheS12aWV3XCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj48ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMuZGF5IzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1maWVsZFwiPjxpbnB1dCBjbGFzcz1cImstcmVjdXItbW9udGhkYXlcIiBwYXR0ZXJuPVwiXFxcXFxcXFxkKlwiLz48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVwiay13ZWVrZGF5LXZpZXdcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPjxkaXYgY2xhc3M9XCJrLWVkaXQtbGFiZWxcIj48bGFiZWw+IzptZXNzYWdlcy5ldmVyeSM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj48c2VsZWN0IGNsYXNzPVwiay1yZWN1ci13ZWVrZGF5LW9mZnNldFwiPjwvc2VsZWN0PjwvZGl2PjxkaXYgY2xhc3M9XCJrLWVkaXQtbGFiZWxcIj48bGFiZWw+IzptZXNzYWdlcy5kYXkjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PHNlbGVjdCBjbGFzcz1cImstcmVjdXItd2Vla2RheVwiPjwvc2VsZWN0PjwvZGl2PjwvZGl2PiMgfSBlbHNlIGlmIChmcmVxdWVuY3kgPT09IFwieWVhcmx5XCIpIHsgIzxkaXYgY2xhc3M9XCJrLWVkaXQtbGFiZWxcIj48bGFiZWw+IzptZXNzYWdlcy5yZXBlYXRCeSM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGQgay1zY2hlZHVsZXItdG9vbGJhciBrLXJlcGVhdC1ydWxlXCI+PC9kaXY+PGRpdiBjbGFzcz1cImstbW9udGhkYXktdmlld1wiIHN0eWxlPVwiZGlzcGxheTpub25lXCI+PGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4jOm1lc3NhZ2VzLmRheSM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLW1vbnRoZGF5XCIgcGF0dGVybj1cIlxcXFxcXFxcZCpcIi8+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cImstd2Vla2RheS12aWV3XCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj48ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMuZXZlcnkjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PHNlbGVjdCBjbGFzcz1cImstcmVjdXItd2Vla2RheS1vZmZzZXRcIj48L3NlbGVjdD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMuZGF5IzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1maWVsZFwiPjxzZWxlY3QgY2xhc3M9XCJrLXJlY3VyLXdlZWtkYXlcIj48L3NlbGVjdD48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMubW9udGgjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PHNlbGVjdCBjbGFzcz1cImstcmVjdXItbW9udGhcIj48L3NlbGVjdD48L2Rpdj4jIH0gIycpLEg9VS50ZW1wbGF0ZSgnIyBpZiAoZW5kUGF0dGVybiA9PT0gXCJjb3VudFwiKSB7ICM8ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMuYWZ0ZXIjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PGlucHV0IGNsYXNzPVwiay1yZWN1ci1jb3VudFwiIHBhdHRlcm49XCJcXFxcXFxcXGQqXCIgLz48L2Rpdj4jIH0gZWxzZSBpZiAoZW5kUGF0dGVybiA9PT0gXCJ1bnRpbFwiKSB7ICM8ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMub24jPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PGlucHV0IHR5cGU9XCJkYXRlXCIgY2xhc3M9XCJrLXJlY3VyLXVudGlsXCIgLz48L2Rpdj4jIH0gIycpLE49VS50ZW1wbGF0ZSgnPHVsIGNsYXNzPVwiay1yZXNldCBrLWhlYWRlciBrLXNjaGVkdWxlci1uYXZpZ2F0aW9uXCI+I2ZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBkYXRhU291cmNlLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7IzxsaSBjbGFzcz1cImstc3RhdGUtZGVmYXVsdCAjPSB2YWx1ZSA9PT0gZGF0YVNvdXJjZVtpXS52YWx1ZSA/IFwiay1zdGF0ZS1zZWxlY3RlZFwiIDogXCJcIiAjXCI+PGEgcm9sZT1cImJ1dHRvblwiIGhyZWY9XCJcXFxcI1wiIGNsYXNzPVwiay1saW5rXCIgZGF0YS0jPW5zI3ZhbHVlPVwiIz1kYXRhU291cmNlW2ldLnZhbHVlI1wiPiM6ZGF0YVNvdXJjZVtpXS50ZXh0IzwvYT48L2xpPiN9IzwvdWw+JyksVj1SLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7Ui5mbi5pbml0LmNhbGwobixlLHQpLHQ9bi5vcHRpb25zLG4uX29wdGlvblRlbXBsYXRlPVUudGVtcGxhdGUoJzxvcHRpb24gdmFsdWU9XCIjOnZhbHVlI1wiPiM6dGV4dCM8L29wdGlvbj4nKSxuLnZhbHVlKHQudmFsdWUpLG4uX3BhbmU9dC5wYW5lLG4uX2luaXRSZXBlYXRCdXR0b24oKSxuLl9pbml0UmVwZWF0RW5kKCksbi5fZGVmYXVsdFZhbHVlPW4uX3ZhbHVlfSxvcHRpb25zOntuYW1lOlwiTW9iaWxlUmVjdXJyZW5jZUVkaXRvclwiLGFuaW1hdGlvbnM6e2xlZnQ6XCJzbGlkZVwiLHJpZ2h0Olwic2xpZGU6cmlnaHRcIn0sbW9iaWxlOiEwLG1lc3NhZ2VzOntjYW5jZWw6XCJDYW5jZWxcIix1cGRhdGU6XCJTYXZlXCIsZW5kVGl0bGU6XCJSZXBlYXQgZW5kc1wiLHJlcGVhdFRpdGxlOlwiUmVwZWF0IHBhdHRlcm5cIixoZWFkZXJUaXRsZTpcIlJlcGVhdCBldmVudFwiLGVuZDp7cGF0dGVybnM6e25ldmVyOlwiTmV2ZXJcIixhZnRlcjpcIkFmdGVyLi4uXCIsb246XCJPbi4uLlwifSxuZXZlcjpcIk5ldmVyXCIsYWZ0ZXI6XCJFbmQgcmVwZWF0IGFmdGVyXCIsb246XCJFbmQgcmVwZWF0IG9uXCJ9LGRhaWx5OntpbnRlcnZhbDpcIlwifSxob3VybHk6e2ludGVydmFsOlwiXCJ9LHdlZWtseTp7aW50ZXJ2YWw6XCJcIn0sbW9udGhseTp7aW50ZXJ2YWw6XCJcIixyZXBlYXRCeTpcIlJlcGVhdCBieTogXCIsZGF5T2ZNb250aDpcIkRheSBvZiB0aGUgbW9udGhcIixkYXlPZldlZWs6XCJEYXkgb2YgdGhlIHdlZWtcIixyZXBlYXRFdmVyeTpcIlJlcGVhdCBldmVyeVwiLGV2ZXJ5OlwiRXZlcnlcIixkYXk6XCJEYXkgXCJ9LHllYXJseTp7aW50ZXJ2YWw6XCJcIixyZXBlYXRCeTpcIlJlcGVhdCBieTogXCIsZGF5T2ZNb250aDpcIkRheSBvZiB0aGUgbW9udGhcIixkYXlPZldlZWs6XCJEYXkgb2YgdGhlIHdlZWtcIixyZXBlYXRFdmVyeTpcIlJlcGVhdCBldmVyeTogXCIsZXZlcnk6XCJFdmVyeVwiLG1vbnRoOlwiTW9udGhcIixkYXk6XCJEYXlcIn19fSxldmVudHM6W1wiY2hhbmdlXCJdLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLm9wdGlvbnMudGltZXpvbmU7cmV0dXJuIGU9PT10P24uX3ZhbHVlLmZyZXE/RShuLl92YWx1ZSxpKTpcIlwiOihuLl92YWx1ZT1EKGUsaSl8fHt9LHQpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fZGVzdHJveVZpZXcoKSxVLmRlc3Ryb3kodGhpcy5fZW5kRmllbGRzKSx0aGlzLl9yZXBlYXRCdXR0b24ub2ZmKHZ0K3RoaXMuX25hbWVzcGFjZSksUi5mbi5kZXN0cm95LmNhbGwodGhpcyl9LF9pbml0UmVwZWF0QnV0dG9uOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucy5tZXNzYWdlcy5mcmVxdWVuY2llc1t0aGlzLl92YWx1ZS5mcmVxfHxcIm5ldmVyXCJdO3QuX3JlcGVhdEJ1dHRvbj1lKCc8YSBocmVmPVwiI1wiIGNsYXNzPVwiay1idXR0b24gay1zY2hlZHVsZXItcmVjdXJcIj4nK24rXCI8L2E+XCIpLm9uKHZ0K3QuX25hbWVzcGFjZSxmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksdC5fY3JlYXRlVmlldyhcInJlcGVhdFwiKSx0Ll9wYW5lLm5hdmlnYXRlKFwicmVjdXJyZW5jZVwiLHQub3B0aW9ucy5hbmltYXRpb25zLmxlZnQpfSksdC5lbGVtZW50LmFwcGVuZCh0Ll9yZXBlYXRCdXR0b24pfSxfaW5pdFJlcGVhdEVuZDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj1lKCc8ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPicrdC5vcHRpb25zLm1lc3NhZ2VzLmVuZC5tb2JpbGVMYWJlbCtcIjwvbGFiZWw+PC9kaXY+XCIpLmluc2VydEFmdGVyKHQuZWxlbWVudC5wYXJlbnQoXCIuay1lZGl0LWZpZWxkXCIpKSxpPWUoJzxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj48YSBocmVmPVwiI1wiIGNsYXNzPVwiay1idXR0b24gay1zY2hlZHVsZXItcmVjdXItZW5kXCI+PC9hPjwvZGl2PicpLm9uKHZ0K3QuX25hbWVzcGFjZSxmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksdC5fdmFsdWUuZnJlcSYmKHQuX2NyZWF0ZVZpZXcoXCJlbmRcIiksdC5fcGFuZS5uYXZpZ2F0ZShcInJlY3VycmVuY2VcIix0Lm9wdGlvbnMuYW5pbWF0aW9ucy5sZWZ0KSl9KS5pbnNlcnRBZnRlcihuKTt0Ll9lbmRGaWVsZHM9bi5hZGQoaSkudG9nZ2xlQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIsIXQuX3ZhbHVlLmZyZXEpLHQuX2VuZEJ1dHRvbj1pLmZpbmQoXCIuay1zY2hlZHVsZXItcmVjdXItZW5kXCIpLnRleHQodC5fZW5kVGV4dCgpKX0sX2VuZFRleHQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl92YWx1ZSx0PXRoaXMub3B0aW9ucy5tZXNzYWdlcy5lbmQsbj10Lm5ldmVyO3JldHVybiBlLmNvdW50P249VS5mb3JtYXQoXCJ7MH0gezF9XCIsdC5hZnRlcixlLmNvdW50KTplLnVudGlsJiYobj1VLmZvcm1hdChcInswfSB7MTpkfVwiLHQub24sZS51bnRpbCkpLG59LF9pbml0RnJlcXVlbmN5OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucy5tZXNzYWdlcy5mcmVxdWVuY2llcyxpPU4oe2RhdGFTb3VyY2U6ZS5tYXAodGhpcy5vcHRpb25zLmZyZXF1ZW5jaWVzLGZ1bmN0aW9uKGUpe3JldHVybnt0ZXh0Om5bZV0sdmFsdWU6XCJuZXZlclwiIT09ZT9lOlwiXCJ9fSksdmFsdWU6dC5fdmFsdWUuZnJlcXx8XCJcIixuczpVLm5zfSk7dC5fdmlldy5lbGVtZW50LmZpbmQoXCIuay1yZWN1ci1wYXR0ZXJuXCIpLmFwcGVuZChpKS5vbih2dCt0Ll9uYW1lc3BhY2UsXCIuay1zY2hlZHVsZXItbmF2aWdhdGlvbiBsaVwiLGZ1bmN0aW9uKG4pe3ZhciBpPWUodGhpcyk7bi5wcmV2ZW50RGVmYXVsdCgpLGkuYWRkQ2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIpLHQuX3ZhbHVlPXtmcmVxOmkuY2hpbGRyZW4oXCJhXCIpLmF0dHIoVS5hdHRyKFwidmFsdWVcIikpfSx0Ll9pbml0UmVwZWF0VmlldygpfSl9LF9pbml0RW5kTmF2aWdhdGlvbjpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4ub3B0aW9ucy5tZXNzYWdlcy5lbmQucGF0dGVybnMscj1uLl92YWx1ZSxvPVwiXCI7ci5jb3VudD9vPVwiY291bnRcIjpyLnVudGlsJiYobz1cInVudGlsXCIpLHQ9Tih7ZGF0YVNvdXJjZTpbe3RleHQ6aS5uZXZlcix2YWx1ZTpcIlwifSx7dGV4dDppLmFmdGVyLHZhbHVlOlwiY291bnRcIn0se3RleHQ6aS5vbix2YWx1ZTpcInVudGlsXCJ9XSx2YWx1ZTpvLG5zOlUubnN9KSxuLl92aWV3LmVsZW1lbnQuZmluZChcIi5rLXJlY3VyLXBhdHRlcm5cIikuYXBwZW5kKHQpLm9uKHZ0K24uX25hbWVzcGFjZSxcIi5rLXNjaGVkdWxlci1uYXZpZ2F0aW9uIGxpXCIsZnVuY3Rpb24odCl7dmFyIGk9ZSh0aGlzKSxvPW51bGwsYT1udWxsO3QucHJldmVudERlZmF1bHQoKSxpLmFkZENsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiKSxuLl9pbml0RW5kVmlldyhpLmNoaWxkcmVuKFwiYVwiKS5hdHRyKFUuYXR0cihcInZhbHVlXCIpKSksbi5fY291bnQ/KG89bi5fY291bnQudmFsdWUoKSxhPW51bGwpOm4uX3VudGlsJiYobz1udWxsLGE9bi5fdW50aWwudmFsP1UucGFyc2VEYXRlKG4uX3VudGlsLnZhbCgpLFwieXl5eS1NTS1kZFwiKTpuLl91bnRpbC52YWx1ZSgpKSxyLmNvdW50PW8sci51bnRpbD1hfSl9LF9jcmVhdGVWaWV3OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1uLm9wdGlvbnMscj1pLm1lc3NhZ2VzLG89cltcInJlcGVhdFwiPT09dD9cInJlcGVhdFRpdGxlXCI6XCJlbmRUaXRsZVwiXSxhPSc8ZGl2IGRhdGEtcm9sZT1cInZpZXdcIiBjbGFzcz1cImstcG9wdXAtZWRpdC1mb3JtIGstc2NoZWR1bGVyLWVkaXQtZm9ybSBrLW1vYmlsZS1saXN0XCIgaWQ9XCJyZWN1cnJlbmNlXCI+PGRpdiBkYXRhLXJvbGU9XCJoZWFkZXJcIiBjbGFzcz1cImstaGVhZGVyXCI+PGEgaHJlZj1cIiNcIiBjbGFzcz1cImstYnV0dG9uIGstc2NoZWR1bGVyLWNhbmNlbFwiPicrci5jYW5jZWwrXCI8L2E+XCIrci5oZWFkZXJUaXRsZSsnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImstYnV0dG9uIGstc2NoZWR1bGVyLXVwZGF0ZVwiPicrci51cGRhdGUrXCI8L2E+PC9kaXY+XCIscz1uLl9wYW5lLnZpZXcoKS5pZDtuLl92aWV3PW4uX3BhbmUuYXBwZW5kKGErTCh7aGVhZGVyVGl0bGU6b30pKSxuLl92aWV3LmVsZW1lbnQub24odnQrbi5fbmFtZXNwYWNlLFwiYS5rLXNjaGVkdWxlci1jYW5jZWwsIGEuay1zY2hlZHVsZXItdXBkYXRlXCIsZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCksZSh0aGlzKS5oYXNDbGFzcyhcImstc2NoZWR1bGVyLXVwZGF0ZVwiKT8obi50cmlnZ2VyKFwiY2hhbmdlXCIpLG4uX2RlZmF1bHRWYWx1ZT1lLmV4dGVuZCh7fSxuLl92YWx1ZSkpOm4uX3ZhbHVlPW4uX2RlZmF1bHRWYWx1ZTt2YXIgaT1uLl92YWx1ZS5mcmVxO24uX2VuZEJ1dHRvbi50ZXh0KG4uX2VuZFRleHQoKSksbi5fZW5kRmllbGRzLnRvZ2dsZUNsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiLCFpKSxuLl9yZXBlYXRCdXR0b24udGV4dChyLmZyZXF1ZW5jaWVzW2l8fFwibmV2ZXJcIl0pLG4uX3BhbmUub25lKFwidmlld1Nob3dcIixmdW5jdGlvbigpe24uX2Rlc3Ryb3lWaWV3KCl9KSxuLl9wYW5lLm5hdmlnYXRlKHMsbi5vcHRpb25zLmFuaW1hdGlvbnMucmlnaHQpfSksbi5fY29udGFpbmVyPW4uX3ZpZXcuZWxlbWVudC5maW5kKFwiLmstcmVjdXItdmlld1wiKSxcInJlcGVhdFwiPT09dD8obi5faW5pdEZyZXF1ZW5jeSgpLG4uX2luaXRSZXBlYXRWaWV3KCkpOihuLl9pbml0RW5kTmF2aWdhdGlvbigpLG4uX2luaXRFbmRWaWV3KCkpfSxfZGVzdHJveVZpZXc6ZnVuY3Rpb24oKXt0aGlzLl92aWV3JiYodGhpcy5fdmlldy5kZXN0cm95KCksdGhpcy5fdmlldy5lbGVtZW50LnJlbW92ZSgpKSx0aGlzLl92aWV3PW51bGx9LF9pbml0UmVwZWF0VmlldzpmdW5jdGlvbigpe3ZhciBlPXRoaXMsbj1lLl92YWx1ZS5mcmVxfHxcIm5ldmVyXCIsaT17ZnJlcXVlbmN5Om4sd2Vla0RheUNoZWNrQm94ZXM6TSxmaXJzdFdlZWtEYXk6ZS5vcHRpb25zLmZpcnN0V2Vla0RheSxtZXNzYWdlczplLm9wdGlvbnMubWVzc2FnZXNbbl19LHI9TyhpKSxvPWUuX2NvbnRhaW5lcixhPWUuX3ZhbHVlO3JldHVybiBVLmRlc3Ryb3kobyksby5odG1sKHIpLHI/KFwid2Vla2x5XCIhPT1ufHxhLndlZWtEYXlzfHwoYS53ZWVrRGF5cz1be2RheTplLm9wdGlvbnMuc3RhcnQuZ2V0RGF5KCksb2Zmc2V0OjB9XSksZS5faW5pdEludGVydmFsKCksZS5faW5pdE1vbnRoRGF5KCksZS5faW5pdFdlZWtEYXlzKCksZS5faW5pdFdlZWtEYXkoKSxlLl9pbml0TW9udGgoKSxlLl9wZXJpb2QoKSx0KTooZS5fdmFsdWU9e30sdCl9LF9pbml0RW5kVmlldzpmdW5jdGlvbihlKXt2YXIgbixpPXRoaXMscj1pLl92YWx1ZTtlPT09dCYmKHIuY291bnQ/ZT1cImNvdW50XCI6ci51bnRpbCYmKGU9XCJ1bnRpbFwiKSksbj17ZW5kUGF0dGVybjplLG1lc3NhZ2VzOmkub3B0aW9ucy5tZXNzYWdlcy5lbmR9LFUuZGVzdHJveShpLl9jb250YWluZXIpLGkuX2NvbnRhaW5lci5odG1sKEgobikpLGkuX2luaXRDb3VudCgpLGkuX2luaXRVbnRpbCgpfSxfaW5pdFdlZWtEYXk6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLm9wdGlvbnMubWVzc2FnZXMud2Vla2RheXMscj1uLm9wdGlvbnMubWVzc2FnZXMub2Zmc2V0UG9zaXRpb25zLG89bi5fY29udGFpbmVyLmZpbmQoXCIuay1yZWN1ci13ZWVrZGF5XCIpLGE9ZnVuY3Rpb24oKXtuLl93ZWVrRGF5UnVsZSgpLG4udHJpZ2dlcihcImNoYW5nZVwiKX07b1swXSYmKG4uX3dlZWtEYXlPZmZzZXQ9bi5fY29udGFpbmVyLmZpbmQoXCIuay1yZWN1ci13ZWVrZGF5LW9mZnNldFwiKS5odG1sKG4uX29wdGlvbnMoW3t0ZXh0OnIuZmlyc3QsdmFsdWU6XCIxXCJ9LHt0ZXh0OnIuc2Vjb25kLHZhbHVlOlwiMlwifSx7dGV4dDpyLnRoaXJkLHZhbHVlOlwiM1wifSx7dGV4dDpyLmZvdXJ0aCx2YWx1ZTpcIjRcIn0se3RleHQ6ci5sYXN0LHZhbHVlOlwiLTFcIn1dKSkuY2hhbmdlKGEpLHQ9W3t0ZXh0OmkuZGF5LHZhbHVlOlwiZGF5XCJ9LHt0ZXh0Omkud2Vla2RheSx2YWx1ZTpcIndlZWtkYXlcIn0se3RleHQ6aS53ZWVrZW5kLHZhbHVlOlwid2Vla2VuZFwifV0sdD10LmNvbmNhdChlLm1hcChVLmN1bHR1cmUoKS5jYWxlbmRhci5kYXlzLm5hbWVzLGZ1bmN0aW9uKGUsdCl7cmV0dXJue3RleHQ6ZSx2YWx1ZTp0fX0pKSxuLl93ZWVrRGF5PW8uaHRtbChuLl9vcHRpb25zKHQpKS5jaGFuZ2UoYSkudmFsKG4ub3B0aW9ucy5zdGFydC5nZXREYXkoKSksbi5fd2Vla0RheVZpZXcoKSl9LF9pbml0TW9udGg6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLl92YWx1ZSxyPW4ub3B0aW9ucy5zdGFydCxvPWkubW9udGhzfHxbci5nZXRNb250aCgpKzFdLGE9bi5fY29udGFpbmVyLmZpbmQoXCIuay1yZWN1ci1tb250aFwiKSxzPVUuY3VsdHVyZSgpLmNhbGVuZGFyLm1vbnRocy5uYW1lczthWzBdJiYodD1lLm1hcChzLGZ1bmN0aW9uKGUsdCl7cmV0dXJue3RleHQ6ZSx2YWx1ZTp0KzF9fSksYS5odG1sKG4uX29wdGlvbnModCkpLmNoYW5nZShmdW5jdGlvbigpe2kubW9udGhzPVsrdGhpcy52YWx1ZV19KSxuLl9tb250aFNlbGVjdD1hLG8mJmEudmFsKG9bMF0pKX0sX3BlcmlvZDpmdW5jdGlvbigpe3ZhciB0LG4saSxyPXRoaXMsbz1yLl92YWx1ZSxhPXIuX2NvbnRhaW5lcixzPXIub3B0aW9ucy5tZXNzYWdlc1tvLmZyZXFdLGw9YS5maW5kKFwiLmstcmVwZWF0LXJ1bGVcIiksYz1hLmZpbmQoXCIuay13ZWVrZGF5LXZpZXdcIiksZD1hLmZpbmQoXCIuay1tb250aGRheS12aWV3XCIpO2xbMF0mJih0PW8ud2Vla0RheXM/XCJ3ZWVrZGF5XCI6XCJtb250aGRheVwiLG49Tih7dmFsdWU6dCxkYXRhU291cmNlOlt7dGV4dDpzLmRheU9mTW9udGgsdmFsdWU6XCJtb250aGRheVwifSx7dGV4dDpzLmRheU9mV2Vlayx2YWx1ZTpcIndlZWtkYXlcIn1dLG5zOlUubnN9KSxpPWZ1bmN0aW9uKGUpe3ZhciB0PXIuX3dlZWtEYXkudmFsKCksbj1yLl93ZWVrRGF5T2Zmc2V0LnZhbCgpLGk9ci5fbW9udGhEYXkudmFsdWUoKSxhPXIuX21vbnRoU2VsZWN0P3IuX21vbnRoU2VsZWN0LnZhbCgpOm51bGw7XCJtb250aGRheVwiPT09ZT8oby53ZWVrRGF5cz1udWxsLG8ubW9udGhEYXlzPWk/W2ldOmksby5tb250aHM9YT9bK2FdOmEsYy5oaWRlKCksZC5zaG93KCkpOihvLm1vbnRoRGF5cz1udWxsLG8ubW9udGhzPWE/WythXTphLG8ud2Vla0RheXM9W3tvZmZzZXQ6K24sZGF5Oit0fV0sYy5zaG93KCksZC5oaWRlKCkpfSxsLmFwcGVuZChuKS5vbih2dCtyLl9uYW1lc3BhY2UsXCIuay1zY2hlZHVsZXItbmF2aWdhdGlvbiBsaVwiLGZ1bmN0aW9uKHQpe3ZhciBuLHI9ZSh0aGlzKS5hZGRDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIik7dC5wcmV2ZW50RGVmYXVsdCgpLHIuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIiksbj1yLmNoaWxkcmVuKFwiYVwiKS5hdHRyKFUuYXR0cihcInZhbHVlXCIpKSxpKG4pfSksaSh0KSl9LF9pbml0VW50aWw6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5fY29udGFpbmVyLmZpbmQoXCIuay1yZWN1ci11bnRpbFwiKSxuPWUub3B0aW9ucy5zdGFydCxpPWUuX3ZhbHVlLHI9aS51bnRpbCxvPXImJm4+cj9yOm47ZS5fdW50aWw9VS5zdXBwb3J0LmlucHV0LmRhdGU/dC5hdHRyKFwibWluXCIsVS50b1N0cmluZyhvLFwieXl5eS1NTS1kZFwiKSkudmFsKFUudG9TdHJpbmcocnx8bixcInl5eXktTU0tZGRcIikpLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXtpLnVudGlsPVUucGFyc2VEYXRlKHRoaXMudmFsdWUsXCJ5eXl5LU1NLWRkXCIpfSk6dC5rZW5kb0RhdGVQaWNrZXIoe21pbjpvLHZhbHVlOnJ8fG4sY2hhbmdlOmZ1bmN0aW9uKCl7aS51bnRpbD10aGlzLnZhbHVlKCl9fSkuZGF0YShcImtlbmRvRGF0ZVBpY2tlclwiKX0sX29wdGlvbnM6ZnVuY3Rpb24oZSx0KXt2YXIgbj0wLGk9XCJcIixyPWUubGVuZ3RoLG89dGhpcy5fb3B0aW9uVGVtcGxhdGU7Zm9yKHQmJihpKz1vKHt2YWx1ZTpcIlwiLHRleHQ6dH0pKTtyPm47bisrKWkrPW8oZVtuXSk7cmV0dXJuIGl9fSksRy5wbHVnaW4oVil9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXt2YXIgdD1uZXcgRGF0ZSgxOTgwLDEsMSwwLDAsMCk7cmV0dXJuIGwodCxwKGUpKSx0fWZ1bmN0aW9uIGkoZSx0LG4pe3JldHVybiBlPj10JiZuPj1lfWZ1bmN0aW9uIHIoZSl7dmFyIHQ9W10sbj1lLndvcmtXZWVrU3RhcnQ7Zm9yKHQucHVzaChuKTtlLndvcmtXZWVrRW5kIT1uOyluPjY/bi09NzpuKyssdC5wdXNoKG4pO3JldHVybiB0fWZ1bmN0aW9uIG8oZSl7dmFyIHQsbj0wO2lmKGUuY29sdW1ucyl7Zm9yKHQ9MDtlLmNvbHVtbnMubGVuZ3RoPnQ7dCsrKW4rPW8oZS5jb2x1bW5zW3RdKTtyZXR1cm4gZS5jb2xzcGFuPW4sbn1yZXR1cm4gZS5jb2xzcGFuPTEsMX12YXIgYT13aW5kb3cua2VuZG8scz1hLnVpLGw9YS5kYXRlLnNldFRpbWUsYz1zLlNjaGVkdWxlclZpZXcsZD1lLmV4dGVuZCx1PWUucHJveHksaD1hLmRhdGUuZ2V0RGF0ZSxwPWEuZGF0ZS5nZXRNaWxsaXNlY29uZHMsZj1hLmRhdGUuTVNfUEVSX0RBWSxnPWEuZGF0ZS5NU19QRVJfTUlOVVRFLG09XCIua2VuZG9UaW1lbGluZVZpZXdcIix2PWEudGVtcGxhdGUoJzxkaXY+PGRpdiBjbGFzcz1cImstZXZlbnQtdGVtcGxhdGUgay1ldmVudC10aW1lXCI+IzprZW5kby5mb3JtYXQoXCJ7MDp0fSAtIHsxOnR9XCIsIHN0YXJ0LCBlbmQpIzwvZGl2PjxkaXYgY2xhc3M9XCJrLWV2ZW50LXRlbXBsYXRlXCI+JHt0aXRsZX08L2Rpdj48L2Rpdj4nKSxfPWEudGVtcGxhdGUoXCI8c3BhbiBjbGFzcz0nay1saW5rIGstbmF2LWRheSc+Iz1rZW5kby50b1N0cmluZyhkYXRlLCAnZGRkIE0vZGQnKSM8L3NwYW4+XCIpLHk9JzxkaXYgcm9sZT1cImdyaWRjZWxsXCIgYXJpYS1zZWxlY3RlZD1cImZhbHNlXCIgZGF0YS0jPW5zI3VpZD1cIiM9dWlkI1wiI2lmIChyZXNvdXJjZXNbMF0pIHsgI3N0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojPXJlc291cmNlc1swXS5jb2xvciM7IGJvcmRlci1jb2xvcjogIz1yZXNvdXJjZXNbMF0uY29sb3IjXCJjbGFzcz1cImstZXZlbnQjPWludmVyc2VDb2xvciA/IFwiIGstZXZlbnQtaW52ZXJzZVwiIDogXCJcIiNcIiAjfSBlbHNlIHsjY2xhc3M9XCJrLWV2ZW50XCIjfSM+PHNwYW4gY2xhc3M9XCJrLWV2ZW50LWFjdGlvbnNcIj4jIGlmKGRhdGEudGFpbCkgeyM8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctd1wiPjwvc3Bhbj4jfSMjIGlmKGRhdGEuaXNFeGNlcHRpb24oKSkgeyM8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktZXhjZXB0aW9uXCI+PC9zcGFuPiMgfSBlbHNlIGlmKGRhdGEuaXNSZWN1cnJpbmcoKSkgeyM8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktcmVmcmVzaFwiPjwvc3Bhbj4jIH0gIzwvc3Bhbj57MH08c3BhbiBjbGFzcz1cImstZXZlbnQtYWN0aW9uc1wiPiNpZiAoc2hvd0RlbGV0ZSkgeyM8YSBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstbGluayBrLWV2ZW50LWRlbGV0ZVwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstc2ktY2xvc2VcIj48L3NwYW4+PC9hPiN9IyMgaWYoZGF0YS5oZWFkKSB7IzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy1lXCI+PC9zcGFuPiN9Izwvc3Bhbj4jaWYocmVzaXphYmxlICYmICFkYXRhLnRhaWwpeyM8c3BhbiBjbGFzcz1cImstcmVzaXplLWhhbmRsZSBrLXJlc2l6ZS13XCI+PC9zcGFuPiN9IyNpZihyZXNpemFibGUgJiYgIWRhdGEuaGVhZCl7IzxzcGFuIGNsYXNzPVwiay1yZXNpemUtaGFuZGxlIGstcmVzaXplLWVcIj48L3NwYW4+I30jPC9kaXY+Jyx3PWMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztjLmZuLmluaXQuY2FsbChuLGUsdCksbi50aXRsZT1uLm9wdGlvbnMudGl0bGV8fG4ub3B0aW9ucy5uYW1lLG4uX3dvcmtEYXlzPXIobi5vcHRpb25zKSxuLl90ZW1wbGF0ZXMoKSxuLl9lZGl0YWJsZSgpLG4uY2FsY3VsYXRlRGF0ZVJhbmdlKCksbi5fZ3JvdXBzKCksbi5fY3VycmVudFRpbWUoKX0sbmFtZTpcInRpbWVsaW5lXCIsX2N1cnJlbnRUaW1lTWFya2VyVXBkYXRlcjpmdW5jdGlvbigpe3ZhciB0LG4saSxyLG8scyxsLGMsZCx1LGgscD1uZXcgRGF0ZSxmPXRoaXMub3B0aW9ucztpZih0aGlzLmRhdGVzSGVhZGVyLmZpbmQoXCIuay1jdXJyZW50LXRpbWVcIikucmVtb3ZlKCksdGhpcy5faXNJbkRhdGVTbG90KHtzdGFydDpwLGVuZDpwfSkpZm9yKGYuY3VycmVudFRpbWVNYXJrZXIudXNlTG9jYWxUaW1lem9uZT09PSExJiYodD1mLmRhdGFTb3VyY2Uub3B0aW9ucy5zY2hlbWEudGltZXpvbmUsZi5kYXRhU291cmNlJiZ0JiYobj1hLnRpbWV6b25lLm9mZnNldChwLHQpLHA9YS50aW1lem9uZS5jb252ZXJ0KHAscC5nZXRUaW1lem9uZU9mZnNldCgpLG4pKSksaT1mLmdyb3VwJiZcInZlcnRpY2FsXCIhPWYuZ3JvdXAub3JpZW50YXRpb24/dGhpcy5ncm91cHMubGVuZ3RoOjEscj0wO2k+cjtyKyspe2lmKG89dGhpcy5ncm91cHNbcl0scz1hLmRhdGUudG9VdGNUaW1lKHApLGw9by50aW1lU2xvdFJhbmdlcyhzLHMrMSksMD09PWwubGVuZ3RoKXJldHVybjtjPWxbMF0uY29sbGVjdGlvbixkPWMuc2xvdEJ5U3RhcnREYXRlKHApLGQmJih1PWUoXCI8ZGl2IGNsYXNzPSdrLWN1cnJlbnQtdGltZSc+PC9kaXY+XCIpLGg9dGhpcy5kYXRlc0hlYWRlcix1LmFwcGVuZFRvKGguZmluZChcIi5rLXNjaGVkdWxlci1oZWFkZXItd3JhcFwiKSkuY3NzKHtsZWZ0Ok1hdGgucm91bmQobFswXS5pbm5lclJlY3QocCxuZXcgRGF0ZShwLmdldFRpbWUoKSsxKSwhMSkubGVmdCksd2lkdGg6XCIxcHhcIixib3R0b206XCIxcHhcIix0b3A6MH0pKX19LF9jdXJyZW50VGltZTpmdW5jdGlvbigpe3ZhciBlLG49dGhpcyxpPW4ub3B0aW9ucy5jdXJyZW50VGltZU1hcmtlcjtpIT09ITEmJmkudXBkYXRlSW50ZXJ2YWwhPT10JiYoZT1pLnVwZGF0ZUludGVydmFsLG4uX2N1cnJlbnRUaW1lTWFya2VyVXBkYXRlcigpLG4uX2N1cnJlbnRUaW1lVXBkYXRlVGltZXI9c2V0SW50ZXJ2YWwodSh0aGlzLl9jdXJyZW50VGltZU1hcmtlclVwZGF0ZXIsbiksZSkpfSxfZWRpdGFibGU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuZWRpdGFibGUmJih0aGlzLl9pc01vYmlsZSgpP3RoaXMuX3RvdWNoRWRpdGFibGUoKTp0aGlzLl9tb3VzZUVkaXRhYmxlKCkpfSxfbW91c2VFZGl0YWJsZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5lbGVtZW50Lm9uKFwiY2xpY2tcIittLFwiLmstZXZlbnQgYTpoYXMoLmstc2ktY2xvc2UpXCIsZnVuY3Rpb24obil7dC50cmlnZ2VyKFwicmVtb3ZlXCIse3VpZDplKHRoaXMpLmNsb3Nlc3QoXCIuay1ldmVudFwiKS5hdHRyKGEuYXR0cihcInVpZFwiKSl9KSxuLnByZXZlbnREZWZhdWx0KCl9KSx0Lm9wdGlvbnMuZWRpdGFibGUuY3JlYXRlIT09ITEmJnQuZWxlbWVudC5vbihcImRibGNsaWNrXCIrbSxcIi5rLXNjaGVkdWxlci1jb250ZW50IHRkXCIsZnVuY3Rpb24oZSl7dmFyIG4saT10Ll9zbG90QnlQb3NpdGlvbihlLnBhZ2VYLGUucGFnZVkpO2kmJihuPXQuX3Jlc291cmNlQnlTbG90KGkpLHQudHJpZ2dlcihcImFkZFwiLHtldmVudEluZm86ZCh7c3RhcnQ6aS5zdGFydERhdGUoKSxlbmQ6aS5lbmREYXRlKCl9LG4pfSkpLGUucHJldmVudERlZmF1bHQoKX0pLHQub3B0aW9ucy5lZGl0YWJsZS51cGRhdGUhPT0hMSYmdC5lbGVtZW50Lm9uKFwiZGJsY2xpY2tcIittLFwiLmstZXZlbnRcIixmdW5jdGlvbihuKXt0LnRyaWdnZXIoXCJlZGl0XCIse3VpZDplKHRoaXMpLmNsb3Nlc3QoXCIuay1ldmVudFwiKS5hdHRyKGEuYXR0cihcInVpZFwiKSl9KSxuLnByZXZlbnREZWZhdWx0KCl9KX0sX3RvdWNoRWRpdGFibGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3Qub3B0aW9ucy5lZGl0YWJsZS5jcmVhdGUhPT0hMSYmKHQuX2FkZFVzZXJFdmVudHM9bmV3IGEuVXNlckV2ZW50cyh0LmVsZW1lbnQse2ZpbHRlcjpcIi5rLXNjaGVkdWxlci1jb250ZW50IHRkXCIsdGFwOmZ1bmN0aW9uKGUpe3ZhciBuLGk9dC5fc2xvdEJ5UG9zaXRpb24oZS54LmxvY2F0aW9uLGUueS5sb2NhdGlvbik7aSYmKG49dC5fcmVzb3VyY2VCeVNsb3QoaSksdC50cmlnZ2VyKFwiYWRkXCIse2V2ZW50SW5mbzpkKHtzdGFydDppLnN0YXJ0RGF0ZSgpLGVuZDppLmVuZERhdGUoKX0sbil9KSksZS5wcmV2ZW50RGVmYXVsdCgpfX0pKSx0Lm9wdGlvbnMuZWRpdGFibGUudXBkYXRlIT09ITEmJih0Ll9lZGl0VXNlckV2ZW50cz1uZXcgYS5Vc2VyRXZlbnRzKHQuZWxlbWVudCx7ZmlsdGVyOlwiLmstZXZlbnRcIix0YXA6ZnVuY3Rpb24obil7dmFyIGk9ZShuLnRhcmdldCkuY2xvc2VzdChcIi5rLWV2ZW50XCIpO2kuaGFzQ2xhc3MoXCJrLWV2ZW50LWFjdGl2ZVwiKXx8dC50cmlnZ2VyKFwiZWRpdFwiLHt1aWQ6aS5hdHRyKGEuYXR0cihcInVpZFwiKSl9KSxuLnByZXZlbnREZWZhdWx0KCl9fSkpfSxfc2xvdEJ5UG9zaXRpb246ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxzPXRoaXMuY29udGVudCxsPXMub2Zmc2V0KCk7Zm9yKGUtPWwubGVmdCx0LT1sLnRvcCx0aGlzLl9pc1J0bD8obz1hLnN1cHBvcnQuYnJvd3NlcixvLm1vemlsbGE/KGUrPXNbMF0uc2Nyb2xsV2lkdGgtc1swXS5vZmZzZXRXaWR0aCxlKz1zWzBdLnNjcm9sbExlZnQpOm8ubXNpZT8oZS09cy5zY3JvbGxMZWZ0KCksZSs9c1swXS5zY3JvbGxXaWR0aC10aGlzLmNvbnRlbnRbMF0ub2Zmc2V0V2lkdGgpOm8ud2Via2l0JiYoZSs9c1swXS5zY3JvbGxMZWZ0KSk6ZSs9c1swXS5zY3JvbGxMZWZ0LHQrPXNbMF0uc2Nyb2xsVG9wLGU9TWF0aC5jZWlsKGUpLHQ9TWF0aC5jZWlsKHQpLHI9MDt0aGlzLmdyb3Vwcy5sZW5ndGg+cjtyKyspaWYoaT10aGlzLmdyb3Vwc1tyXSxuPWkudGltZVNsb3RCeVBvc2l0aW9uKGUsdCkpcmV0dXJuIG47cmV0dXJuIG51bGx9LG9wdGlvbnM6e25hbWU6XCJUaW1lbGluZVZpZXdcIix0aXRsZTpcIlRpbWVsaW5lXCIsc2VsZWN0ZWREYXRlRm9ybWF0OlwiezA6RH1cIixkYXRlOmEuZGF0ZS50b2RheSgpLHN0YXJ0VGltZTphLmRhdGUudG9kYXkoKSxlbmRUaW1lOmEuZGF0ZS50b2RheSgpLHNob3dXb3JrSG91cnM6ITEsbWlub3JUaWNrQ291bnQ6MixlZGl0YWJsZTohMCx3b3JrRGF5U3RhcnQ6bmV3IERhdGUoMTk4MCwxLDEsOCwwLDApLHdvcmtEYXlFbmQ6bmV3IERhdGUoMTk4MCwxLDEsMTcsMCwwKSx3b3JrV2Vla1N0YXJ0OjEsd29ya1dlZWtFbmQ6NSxtYWpvclRpY2s6NjAsZXZlbnRIZWlnaHQ6MjUsY29sdW1uV2lkdGg6MTAwLGdyb3VwSGVhZGVyVGVtcGxhdGU6XCIjPXRleHQjXCIsbWFqb3JUaW1lSGVhZGVyVGVtcGxhdGU6XCIjPWtlbmRvLnRvU3RyaW5nKGRhdGUsICd0JykjXCIsc2xvdFRlbXBsYXRlOlwiJm5ic3A7XCIsZXZlbnRUZW1wbGF0ZTp2LGRhdGVIZWFkZXJUZW1wbGF0ZTpfLGZvb3Rlcjp7Y29tbWFuZDpcIndvcmtEYXlcIn0sY3VycmVudFRpbWVNYXJrZXI6e3VwZGF0ZUludGVydmFsOjFlNCx1c2VMb2NhbFRpbWV6b25lOiEwfSxtZXNzYWdlczp7ZGVmYXVsdFJvd1RleHQ6XCJBbGwgZXZlbnRzXCIsc2hvd0Z1bGxEYXk6XCJTaG93IGZ1bGwgZGF5XCIsc2hvd1dvcmtEYXk6XCJTaG93IGJ1c2luZXNzIGhvdXJzXCJ9fSxldmVudHM6W1wicmVtb3ZlXCIsXCJhZGRcIixcImVkaXRcIl0sX3RlbXBsYXRlczpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucyx0PWQoe30sYS5UZW1wbGF0ZSxlLnRlbXBsYXRlU2V0dGluZ3MpO3RoaXMuZXZlbnRUZW1wbGF0ZT10aGlzLl9ldmVudFRtcGwoZS5ldmVudFRlbXBsYXRlLHkpLHRoaXMubWFqb3JUaW1lSGVhZGVyVGVtcGxhdGU9YS50ZW1wbGF0ZShlLm1ham9yVGltZUhlYWRlclRlbXBsYXRlLHQpLHRoaXMuZGF0ZUhlYWRlclRlbXBsYXRlPWEudGVtcGxhdGUoZS5kYXRlSGVhZGVyVGVtcGxhdGUsdCksdGhpcy5zbG90VGVtcGxhdGU9YS50ZW1wbGF0ZShlLnNsb3RUZW1wbGF0ZSx0KSx0aGlzLmdyb3VwSGVhZGVyVGVtcGxhdGU9YS50ZW1wbGF0ZShlLmdyb3VwSGVhZGVyVGVtcGxhdGUsdCl9LF9yZW5kZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlPWV8fFtdLHQuX2RhdGVzPWUsdC5fc3RhcnREYXRlPWVbMF0sdC5fZW5kRGF0ZT1lW2UubGVuZ3RoLTF8fDBdLHQuX2NhbGN1bGF0ZVNsb3RSYW5nZXMoKSx0LmNyZWF0ZUxheW91dCh0Ll9sYXlvdXQoZSkpLHQuX2NvbnRlbnQoZSksdC5fZm9vdGVyKCksdC5fc2V0Q29udGVudFdpZHRoKCksdC5yZWZyZXNoTGF5b3V0KCksdGhpcy50aW1lc0hlYWRlci5maW5kKFwidGFibGUgdHI6bGFzdFwiKS5oaWRlKCksdGhpcy5kYXRlc0hlYWRlci5maW5kKFwidGFibGUgdHI6bGFzdFwiKS5oaWRlKCl9LF9zZXRDb250ZW50V2lkdGg6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNvbnRlbnQsdD1lLndpZHRoKCksbj10aGlzLmNvbnRlbnQuZmluZChcInRhYmxlXCIpLGk9bi5maW5kKFwidHI6Zmlyc3RcIikuY2hpbGRyZW4oKS5sZW5ndGgscj0xMDAsbz1pKnRoaXMub3B0aW9ucy5jb2x1bW5XaWR0aDtvPnQmJihyPU1hdGguY2VpbChvL3QqMTAwKSksbi5hZGQodGhpcy5kYXRlc0hlYWRlci5maW5kKFwidGFibGVcIikpLmNzcyhcIndpZHRoXCIscitcIiVcIil9LF9jYWxjdWxhdGVTbG90UmFuZ2VzOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscj10aGlzLl9kYXRlcyxvPXRoaXMuc3RhcnRUaW1lKCkscz10aGlzLmVuZFRpbWUoKTtmb3IocChzKT09PXAoYS5kYXRlLmdldERhdGUocykpJiYocz1hLmRhdGUuZ2V0RGF0ZShzKSxsKHMsZi0xKSkscz1wKHMpLG89cChvKSxlPVtdLHQ9MDtyLmxlbmd0aD50O3QrKyluPWgoclt0XSksbChuLG8pLGk9aChyW3RdKSxsKGkscyksZS5wdXNoKHtzdGFydDphLmRhdGUudG9VdGNUaW1lKG4pLGVuZDphLmRhdGUudG9VdGNUaW1lKGkpfSk7dGhpcy5fc2xvdFJhbmdlcz1lfSxfZm9yVGltZVJhbmdlOmZ1bmN0aW9uKGUsdCxpLHIpe3ZhciBvLGEscyxjLGQsdSxoLG0sdixfLHksdyxiLGsseCxDLFMsVDtmb3IoZT1uKGUpLHQ9bih0KSxvPXRoaXMsYT1wKGUpLHM9cCh0KSxjPW8ub3B0aW9ucy5taW5vclRpY2tDb3VudCxkPW8ub3B0aW9ucy5tYWpvclRpY2sqZyx1PWQvY3x8MSxoPW5ldyBEYXRlKCtlKSxtPWguZ2V0RGF0ZSgpLF89MCx3PVwiXCIseT1mL3UsYSE9cyYmKGE+cyYmKHMrPWYpLHk9KHMtYSkvdSkseT1NYXRoLnJvdW5kKHkpO3k+XztfKyspYj1fJShkL3UpLGs9MD09PWIseD1jLTE+YixDPWI9PT1jLTEsUz1jLHklYyE9PTAmJihUPWM+eS0oXysxKSxrJiZUJiYoUz15JWMpKSx3Kz1pKGgsayx4LEMsUyksbChoLHUsITEpO3JldHVybiBzJiYodj1wKGgpLG08aC5nZXREYXRlKCkmJih2Kz1mKSx2PnMmJihoPW5ldyBEYXRlKCt0KSkpLHImJih3Kz1yKGgpKSx3fSxfbGF5b3V0OmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPVtdLHM9W10sbD10aGlzLGM9W3t0ZXh0Omwub3B0aW9ucy5tZXNzYWdlcy5kZWZhdWx0Um93VGV4dH1dLGQ9W107Zm9yKHQ9MDtsLm9wdGlvbnMubWlub3JUaWNrQ291bnQ+dDt0KyspZC5wdXNoKHt0ZXh0OlwiXCIsY2xhc3NOYW1lOlwiXCJ9KTtmb3IodGhpcy5fZm9yVGltZVJhbmdlKGwuc3RhcnRUaW1lKCksbC5lbmRUaW1lKCksZnVuY3Rpb24oZSx0LG4saSxhKXt2YXIgcyxjPWwubWFqb3JUaW1lSGVhZGVyVGVtcGxhdGU7dCYmKHM9e3RleHQ6Yyh7ZGF0ZTplfSksY2xhc3NOYW1lOmk/XCJrLXNsb3QtY2VsbFwiOlwiXCIsY29sdW1uczpkLnNsaWNlKDAsYSl9LG8ocyksci5wdXNoKHMpKX0pLG49MDtlLmxlbmd0aD5uO24rKylzLnB1c2goe3RleHQ6YS5mb3JtYXQoXCJ7MDptfVwiLGVbbl0pLGNsYXNzTmFtZTpcImstc2xvdC1jZWxsXCIsY29sdW1uczpyLnNsaWNlKDApfSk7cmV0dXJuIGk9dGhpcy5ncm91cGVkUmVzb3VyY2VzLGkubGVuZ3RoJiYoXCJ2ZXJ0aWNhbFwiPT09dGhpcy5fZ3JvdXBPcmllbnRhdGlvbigpP2M9bC5fY3JlYXRlUm93c0xheW91dChpLG51bGwsdGhpcy5ncm91cEhlYWRlclRlbXBsYXRlKTpzPWwuX2NyZWF0ZUNvbHVtbnNMYXlvdXQoaSxzLHRoaXMuZ3JvdXBIZWFkZXJUZW1wbGF0ZSkpLHtjb2x1bW5zOnMscm93czpjfX0sX2Zvb3RlcjpmdW5jdGlvbigpe3ZhciB0LG4saSxyPXRoaXMub3B0aW9ucztyLmZvb3RlciE9PSExJiYodD0nPGRpdiBjbGFzcz1cImstaGVhZGVyIGstc2NoZWR1bGVyLWZvb3RlclwiPicsbj1yLmZvb3Rlci5jb21tYW5kLG4mJlwid29ya0RheVwiPT09bj8odCs9Jzx1bCBjbGFzcz1cImstcmVzZXQgay1oZWFkZXJcIj4nLHQrPSc8bGkgY2xhc3M9XCJrLXN0YXRlLWRlZmF1bHQgay1zY2hlZHVsZXItZnVsbGRheVwiPjxhIGhyZWY9XCIjXCIgY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWktY2xvY2tcIj48L3NwYW4+Jyx0Kz0oci5zaG93V29ya0hvdXJzP3IubWVzc2FnZXMuc2hvd0Z1bGxEYXk6ci5tZXNzYWdlcy5zaG93V29ya0RheSkrXCI8L2E+PC9saT5cIix0Kz1cIjwvdWw+XCIpOnQrPVwiJm5ic3A7XCIsdCs9XCI8L2Rpdj5cIix0aGlzLmZvb3Rlcj1lKHQpLmFwcGVuZFRvKHRoaXMuZWxlbWVudCksaT10aGlzLHRoaXMuZm9vdGVyLm9uKFwiY2xpY2tcIittLFwiLmstc2NoZWR1bGVyLWZ1bGxkYXlcIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksaS50cmlnZ2VyKFwibmF2aWdhdGVcIix7dmlldzppLm5hbWV8fHIubmFtZSxkYXRlOmkuc3RhcnREYXRlKCksaXNXb3JrRGF5OiFyLnNob3dXb3JrSG91cnN9KX0pKX0sX2NvbHVtbkNvdW50Rm9yTGV2ZWw6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jb2x1bW5MZXZlbHNbZV07cmV0dXJuIHQ/dC5sZW5ndGg6MH0sX3Jvd0NvdW50Rm9yTGV2ZWw6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5yb3dMZXZlbHNbZV07cmV0dXJuIHQ/dC5sZW5ndGg6MH0sX2lzV29ya0RheTpmdW5jdGlvbihlKXt2YXIgdCxuPWUuZ2V0RGF5KCksaT10aGlzLl93b3JrRGF5cztmb3IodD0wO2kubGVuZ3RoPnQ7dCsrKWlmKGlbdF09PT1uKXJldHVybiEwO3JldHVybiExfSxfY29udGVudDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLHM9dGhpcyxsPXMub3B0aW9ucyxjPXMuc3RhcnRUaW1lKCksZD10aGlzLmVuZFRpbWUoKSx1PTEsaD0xLHA9ZS5sZW5ndGgsZj1cIlwiLGc9dGhpcy5ncm91cGVkUmVzb3VyY2VzLG09dGhpcy5zbG90VGVtcGxhdGUsdj0hMTtmb3IoZy5sZW5ndGgmJih2PVwidmVydGljYWxcIj09PXMuX2dyb3VwT3JpZW50YXRpb24oKSx2P2g9cy5fZ3JvdXBDb3VudCgpOnU9cy5fZ3JvdXBDb3VudCgpKSxmKz1cIjx0Ym9keT5cIix0PWZ1bmN0aW9uKHQpe3ZhciBvLGM9XCJcIixkPVwiXCIsdT1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gcy5fcmVzb3VyY2VCeVNsb3Qoe2dyb3VwSW5kZXg6ZX0pfX07cmV0dXJuIGEuZGF0ZS5pc1RvZGF5KGVbcl0pJiYoZCs9XCJrLXRvZGF5XCIpLChhLmRhdGUuZ2V0TWlsbGlzZWNvbmRzKHQpPGEuZGF0ZS5nZXRNaWxsaXNlY29uZHMobC53b3JrRGF5U3RhcnQpfHxhLmRhdGUuZ2V0TWlsbGlzZWNvbmRzKHQpPj1hLmRhdGUuZ2V0TWlsbGlzZWNvbmRzKGwud29ya0RheUVuZCl8fCFzLl9pc1dvcmtEYXkoZVtyXSkpJiYoZCs9XCIgay1ub253b3JrLWhvdXJcIiksYys9XCI8dGRcIisoXCJcIiE9PWQ/JyBjbGFzcz1cIicrZCsnXCInOlwiXCIpK1wiPlwiLG89YS5kYXRlLmdldERhdGUoZVtyXSksYS5kYXRlLnNldFRpbWUobyxhLmRhdGUuZ2V0TWlsbGlzZWNvbmRzKHQpKSxjKz1tKHtkYXRlOm8scmVzb3VyY2VzOnUodj9uOmkpfSksYys9XCI8L3RkPlwifSxuPTA7aD5uO24rKyl7Zm9yKGYrPVwiPHRyPlwiLGk9MDt1Pmk7aSsrKWZvcihyPTAsbz1wO28+cjtyKyspZis9dGhpcy5fZm9yVGltZVJhbmdlKGMsZCx0KTtmKz1cIjwvdHI+XCJ9Zis9XCI8L3Rib2R5PlwiLHRoaXMuY29udGVudC5maW5kKFwidGFibGVcIikuYXBwZW5kKGYpfSxfZ3JvdXBzOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscj10aGlzLl9ncm91cENvdW50KCksbz10aGlzLl9kYXRlcyxzPW8ubGVuZ3RoO2Zvcih0aGlzLmdyb3Vwcz1bXSxlPTA7cj5lO2UrKyl0PXRoaXMuX2FkZFJlc291cmNlVmlldyhlKSxuPW9bMF0saT1vW28ubGVuZ3RoLTF8fDBdLHQuYWRkVGltZVNsb3RDb2xsZWN0aW9uKG4sYS5kYXRlLmFkZERheXMoaSwxKSk7XG50aGlzLl90aW1lU2xvdEdyb3VwcyhyLHMpfSxfaXNWZXJ0aWNhbGx5R3JvdXBlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdyb3VwZWRSZXNvdXJjZXMubGVuZ3RoJiZcInZlcnRpY2FsXCI9PT10aGlzLl9ncm91cE9yaWVudGF0aW9uKCl9LF9pc0hvcml6b250YWxseUdyb3VwZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ncm91cGVkUmVzb3VyY2VzLmxlbmd0aCYmXCJob3Jpem9udGFsXCI9PT10aGlzLl9ncm91cE9yaWVudGF0aW9uKCl9LF90aW1lU2xvdEdyb3VwczpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGEscyxsLGMsZCx1LGgsZixnLG0sdixfLHksdyxiPXRoaXMuX3RpbWVTbG90SW50ZXJ2YWwoKSxrPXRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKSx4PXRoaXMuY29udGVudC5maW5kKFwidHJcIiksQz14Lmxlbmd0aDtmb3IoeC5hdHRyKFwicm9sZVwiLFwicm93XCIpLGsmJihDPU1hdGguZmxvb3IoQy9lKSksbj0wO2U+bjtuKyspZm9yKGk9MCxyPXRoaXMuZ3JvdXBzW25dLGsmJihpPW4pLGE9aSpDLHM9MCxrfHwocz1uKSxsPXhbYV0uY2hpbGRyZW4sYz1sLmxlbmd0aC8oaz8xOmUpLGQ9Yy90LHU9MDt0PnU7dSsrKWZvcihoPXUqZCtjKnMsbz1wKG5ldyBEYXRlKCt0aGlzLnN0YXJ0VGltZSgpKSksZj0wO2Q+ZjtmKyspZz1sW2YraF0sbT1yLmdldFRpbWVTbG90Q29sbGVjdGlvbigwKSx2PXRoaXMuX2RhdGVzW3VdLF89RGF0ZS5VVEModi5nZXRGdWxsWWVhcigpLHYuZ2V0TW9udGgoKSx2LmdldERhdGUoKSkseT1fK28sdz15K2IsZy5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJncmlkY2VsbFwiKSxnLnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiwhMSksbS5hZGRUaW1lU2xvdChnLHksdywhMCksbys9Yn0sc3RhcnREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXJ0RGF0ZX0sZW5kRGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmREYXRlfSxzdGFydFRpbWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnM7cmV0dXJuIGUuc2hvd1dvcmtIb3Vycz9lLndvcmtEYXlTdGFydDplLnN0YXJ0VGltZX0sZW5kVGltZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucztyZXR1cm4gZS5zaG93V29ya0hvdXJzP2Uud29ya0RheUVuZDplLmVuZFRpbWV9LF90aW1lU2xvdEludGVydmFsOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zO3JldHVybiBlLm1ham9yVGljay9lLm1pbm9yVGlja0NvdW50Kmd9LG5leHREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGEuZGF0ZS5uZXh0RGF5KHRoaXMuZW5kRGF0ZSgpKX0scHJldmlvdXNEYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGEuZGF0ZS5wcmV2aW91c0RheSh0aGlzLnN0YXJ0RGF0ZSgpKX0sY2FsY3VsYXRlRGF0ZVJhbmdlOmZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyKFt0aGlzLm9wdGlvbnMuZGF0ZV0pfSxyZW5kZXI6ZnVuY3Rpb24odCl7dmFyIG4scixvLHMsbCxjO2Zvcih0aGlzLl9oZWFkZXJDb2x1bW5Db3VudD0wLHRoaXMuX2dyb3VwcygpLHRoaXMuZWxlbWVudC5maW5kKFwiLmstZXZlbnRcIikucmVtb3ZlKCksdD1uZXcgYS5kYXRhLlF1ZXJ5KHQpLnNvcnQoW3tmaWVsZDpcInN0YXJ0XCIsZGlyOlwiYXNjXCJ9LHtmaWVsZDpcImVuZFwiLGRpcjpcImRlc2NcIn1dKS50b0FycmF5KCksbj1bXSx0aGlzLl9ldmVudHNCeVJlc291cmNlKHQsdGhpcy5ncm91cGVkUmVzb3VyY2VzLG4pLHI9ZS5tYXAodGhpcy5fZGF0ZXMsZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgubWF4LmFwcGx5KG51bGwsZS5tYXAobixmdW5jdGlvbihuKXtyZXR1cm4gZS5ncmVwKG4sZnVuY3Rpb24oZSl7cmV0dXJuIGkodCxoKGUuc3RhcnQpLGgoZS5lbmQpKX0pLmxlbmd0aH0pKX0pLG89W10scz0wLGw9MDtuLmxlbmd0aD5sO2wrKyljPXtncm91cEluZGV4OmwsbWF4Um93Q291bnQ6MCxldmVudHM6e319LG8ucHVzaChjKSx0aGlzLl9yZW5kZXJFdmVudHMobltsXSxsLGMpLGMubWF4Um93Q291bnQ+cyYmKHM9Yy5tYXhSb3dDb3VudCk7dGhpcy5fc2V0Um93c0hlaWdodChvLG4ubGVuZ3RoLHMpLHRoaXMuX3Bvc2l0aW9uRXZlbnRzKG8sbi5sZW5ndGgpLHRoaXMudHJpZ2dlcihcImFjdGl2YXRlXCIpfSxfcG9zaXRpb25FdmVudHM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbztmb3Iobj0wO3Q+bjtuKyspe2k9ZVtuXS5ldmVudHM7Zm9yKHIgaW4gaSlvPWlbcl0sdGhpcy5fcG9zaXRpb25FdmVudChvKX19LF9zZXRSb3dzSGVpZ2h0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8scyxsLGM9dGhpcy5vcHRpb25zLmV2ZW50SGVpZ2h0KzIsZD10aGlzLl9nZXRCb3R0b21Sb3dPZmZzZXQoKTtmb3IodD10aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCk/dDoxLGk9MDt0Pmk7aSsrKXI9dGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpP2VbaV0ubWF4Um93Q291bnQ6bixyPXI/cjoxLG89KGMrMikqcitkLHM9dGhpcy50aW1lcy5maW5kKGEuZm9ybWF0KFwidHI6bnRoLWNoaWxkKHswfSlcIixpKzEpKSxsPXRoaXMuY29udGVudC5maW5kKGEuZm9ybWF0KFwidHI6bnRoLWNoaWxkKHswfSlcIixpKzEpKSxzLmhlaWdodChvKSxsLmhlaWdodChvKTt0aGlzLl9zZXRDb250ZW50V2lkdGgoKSx0aGlzLnJlZnJlc2hMYXlvdXQoKSx0aGlzLl9yZWZyZXNoU2xvdHMoKX0sX2dldEJvdHRvbVJvd09mZnNldDpmdW5jdGlvbigpe3ZhciBlLHQsbj0uNSp0aGlzLm9wdGlvbnMuZXZlbnRIZWlnaHQsaT10aGlzLl9pc01vYmlsZSgpO3JldHVybiBpPyhlPTMwLHQ9NjApOihlPTE1LHQ9MzApLG4+dD9uPXQ6ZT5uJiYobj1lKSxufSxfcG9zaXRpb25FdmVudDpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcy5vcHRpb25zLmV2ZW50SGVpZ2h0KzIscj1lLnNsb3RSYW5nZS5pbm5lclJlY3QoZS5zdGFydCxlLmVuZCwhMSk7ci50b3A9ZS5zbG90UmFuZ2Uuc3RhcnQub2Zmc2V0VG9wLHQ9ci5yaWdodC1yLmxlZnQtMiwwPnQmJih0PTApLG49ci5sZWZ0LHRoaXMuX2lzUnRsJiYobi09dGhpcy5jb250ZW50WzBdLnNjcm9sbFdpZHRoLXRoaXMuY29udGVudFswXS5vZmZzZXRXaWR0aCksZS5lbGVtZW50LmNzcyh7dG9wOmUuc2xvdFJhbmdlLnN0YXJ0Lm9mZnNldFRvcCtlLnJvd0luZGV4KihpKzIpK1wicHhcIixsZWZ0Om4sd2lkdGg6dH0pfSxfcmVmcmVzaFNsb3RzOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7dGhpcy5ncm91cHMubGVuZ3RoPmU7ZSsrKXRoaXMuZ3JvdXBzW2VdLnJlZnJlc2goKX0sX2V2ZW50c0J5UmVzb3VyY2U6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxzLGw9dFswXTtpZihsKWZvcihpPWwuZGF0YVNvdXJjZS52aWV3KCkscj0wO2kubGVuZ3RoPnI7cisrKW89dGhpcy5fcmVzb3VyY2VWYWx1ZShsLGlbcl0pLHM9bmV3IGEuZGF0YS5RdWVyeShlKS5maWx0ZXIoe2ZpZWxkOmwuZmllbGQsb3BlcmF0b3I6Yy5ncm91cEVxRmlsdGVyKG8pfSkudG9BcnJheSgpLHQubGVuZ3RoPjE/dGhpcy5fZXZlbnRzQnlSZXNvdXJjZShzLHQuc2xpY2UoMSksbik6bi5wdXNoKHMpO2Vsc2Ugbi5wdXNoKGUpfSxfaXNJbkRhdGVTbG90OmZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RhcnQsbj1lLmVuZCxpPWgodGhpcy5fc3RhcnREYXRlKSxyPWEuZGF0ZS5hZGREYXlzKGgodGhpcy5fZW5kRGF0ZSksMSk7cmV0dXJuIHI+dCYmbj49aT8hMDohMX0sX2lzSW5UaW1lU2xvdDpmdW5jdGlvbihlKXt2YXIgdCxuPWUuc3RhcnRUaW1lfHxhLmRhdGUudG9VdGNUaW1lKGUuc3RhcnQpLGk9ZS5lbmRUaW1lfHxhLmRhdGUudG9VdGNUaW1lKGUuZW5kKSxyPXRoaXMuX3Nsb3RSYW5nZXM7Zm9yKG49PT1pJiYoaSs9MSksdD0wO3IubGVuZ3RoPnQ7dCsrKWlmKHJbdF0uZW5kPm4mJmk+clt0XS5zdGFydClyZXR1cm4hMDtyZXR1cm4hMX0sX2FkanVzdEV2ZW50OmZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5zdGFydCxpPWUuZW5kLHI9ZS5fdGltZShcInN0YXJ0XCIpLG89ZS5fdGltZShcImVuZFwiKSxzPXAodGhpcy5zdGFydFRpbWUoKSksYz1wKHRoaXMuZW5kVGltZSgpKSxkPW51bGwsdT1udWxsLGc9ITEsbT0hMTtyZXR1cm4gZS5pc0FsbERheT8oZD1oKG4pLHM+ciYmKGwoZCxzKSxtPSEwKSx1PWgoaSksYz09PXAoaCh0aGlzLmVuZFRpbWUoKSkpP3U9YS5kYXRlLmFkZERheXModSwxKToobCh1LGMpLGc9ITApKTooYz0wPT09Yz9mOmMscz5yPyhkPWgobiksbChkLHMpLG09ITApOnI+YyYmKGQ9aChuKSxkPWEuZGF0ZS5hZGREYXlzKGQsMSksbChkLHMpLG09ITApLG8+Yz8odT1oKGkpLGwodSxjKSxnPSEwKTpzPm8mJih1PWgoaSksdT1hLmRhdGUuYWRkRGF5cyh1LC0xKSxsKHUsYyksZz0hMCkpLHQ9ZS5jbG9uZSh7c3RhcnQ6ZD9kOm4sZW5kOnU/dTppLHN0YXJ0VGltZTpkP2EuZGF0ZS50b1V0Y1RpbWUoZCk6ZS5zdGFydFRpbWUsZW5kVGltZTp1P2EuZGF0ZS50b1V0Y1RpbWUodSk6ZS5lbmRUaW1lLGlzQWxsRGF5OiExfSkse29jY3VycmVuY2U6dCxoZWFkOmcsdGFpbDptfX0sX3JlbmRlckV2ZW50czpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGEscyxsLGMsZCx1LGgscDtmb3Iocj0wLG89ZS5sZW5ndGg7bz5yO3IrKylpPWVbcl0sdGhpcy5faXNJbkRhdGVTbG90KGkpJiYoYT1pLmlzQWxsRGF5fHxpLmVuZC5nZXRUaW1lKCktaS5zdGFydC5nZXRUaW1lKCk+PWYscz10aGlzLmNvbnRlbnQsKGF8fHRoaXMuX2lzSW5UaW1lU2xvdChpKSkmJihsPXRoaXMuX2FkanVzdEV2ZW50KGkpLGM9dGhpcy5ncm91cHNbdF0sYy5fY29udGludW91c0V2ZW50c3x8KGMuX2NvbnRpbnVvdXNFdmVudHM9W10pLGQ9Yy5zbG90UmFuZ2VzKGwub2NjdXJyZW5jZSwhMSksdT1kWzBdLHRoaXMuX2lzSW5UaW1lU2xvdChsLm9jY3VycmVuY2UpJiYoaD10aGlzLl9jcmVhdGVFdmVudEVsZW1lbnQobC5vY2N1cnJlbmNlLGksdS5oZWFkfHxsLmhlYWQsdS50YWlsfHxsLnRhaWwpLGguYXBwZW5kVG8ocykuY3NzKHt0b3A6MCxoZWlnaHQ6dGhpcy5vcHRpb25zLmV2ZW50SGVpZ2h0fSkscD17c3RhcnQ6bC5vY2N1cnJlbmNlLnN0YXJ0VGltZXx8bC5vY2N1cnJlbmNlLnN0YXJ0LGVuZDpsLm9jY3VycmVuY2UuZW5kVGltZXx8bC5vY2N1cnJlbmNlLmVuZCxlbGVtZW50OmgsdWlkOmkudWlkLHNsb3RSYW5nZTp1LHJvd0luZGV4OjAsb2Zmc2V0VG9wOjB9LG4uZXZlbnRzW2kudWlkXT1wLHRoaXMuYWRkQ29udGludW91c0V2ZW50KGMsdSxoLGkuaXNBbGxEYXkpLHRoaXMuX2FycmFuZ2VSb3dzKHAsdSxuKSkpKX0sYWRkQ29udGludW91c0V2ZW50OmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByPWUuX2NvbnRpbnVvdXNFdmVudHM7ci5wdXNoKHtlbGVtZW50Om4saXNBbGxEYXk6aSx1aWQ6bi5hdHRyKGEuYXR0cihcInVpZFwiKSksc3RhcnQ6dC5zdGFydCxlbmQ6dC5lbmR9KX0sX2NyZWF0ZUV2ZW50RWxlbWVudDpmdW5jdGlvbih0LG4saSxyKXt2YXIgbyxzLGw9dGhpcy5ldmVudFRlbXBsYXRlLGM9dGhpcy5vcHRpb25zLmVkaXRhYmxlLHU9dGhpcy5faXNNb2JpbGUoKSxoPWMmJmMuZGVzdHJveSE9PSExJiYhdSxwPWMmJmMucmVzaXplIT09ITEsZj1uLl90aW1lKFwic3RhcnRcIiksZz1uLl90aW1lKFwiZW5kXCIpLG09bi5zdGFydCx2PW4uZW5kLF89dGhpcy5ldmVudFJlc291cmNlcyhuKTtyZXR1cm4gbi5zdGFydFRpbWUmJihtPW5ldyBEYXRlKGYpLG09YS50aW1lem9uZS5hcHBseShtLFwiRXRjL1VUQ1wiKSksbi5lbmRUaW1lJiYodj1uZXcgRGF0ZShnKSx2PWEudGltZXpvbmUuYXBwbHkodixcIkV0Yy9VVENcIikpLG89ZCh7fSx7bnM6YS5ucyxyZXNpemFibGU6cCxzaG93RGVsZXRlOmgsaGVhZDppLHRhaWw6cixzaW5nbGVEYXk6MT09dGhpcy5fZGF0ZXMubGVuZ3RoLHJlc291cmNlczpfLGludmVyc2VDb2xvcjpfJiZfWzBdP3RoaXMuX3Nob3VsZEludmVyc2VSZXNvdXJjZUNvbG9yKF9bMF0pOiExfSxuLHtzdGFydDptLGVuZDp2fSkscz1lKGwobykpLHRoaXMuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czpzLGRhdGE6W3tkYXRhSXRlbTpvfV19fSksc30sX2FycmFuZ2VSb3dzOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sYSxzLGwsZD10LnN0YXJ0LmluZGV4LHU9dC5lbmQuaW5kZXgsaD1jLmNvbGxpZGluZ0V2ZW50cyh0LmV2ZW50cygpLGQsdSk7Zm9yKHQuYWRkRXZlbnQoe3Nsb3RJbmRleDpkLHN0YXJ0OmQsZW5kOnUsZWxlbWVudDplLmVsZW1lbnQsdWlkOmUudWlkfSksaC5wdXNoKHtzbG90SW5kZXg6ZCxzdGFydDpkLGVuZDp1LGVsZW1lbnQ6ZS5lbGVtZW50LHVpZDplLnVpZH0pLGk9Yy5jcmVhdGVSb3dzKGgpLGkubGVuZ3RoPm4ubWF4Um93Q291bnQmJihuLm1heFJvd0NvdW50PWkubGVuZ3RoKSxyPTAsbz1pLmxlbmd0aDtvPnI7cisrKWZvcihhPWlbcl0uZXZlbnRzLHM9MCxsPWEubGVuZ3RoO2w+cztzKyspbi5ldmVudHNbYVtzXS51aWRdLnJvd0luZGV4PXJ9LF9ncm91cENvdW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5ncm91cGVkUmVzb3VyY2VzO3JldHVybiBlLmxlbmd0aD9cInZlcnRpY2FsXCI9PT10aGlzLl9ncm91cE9yaWVudGF0aW9uKCk/dGhpcy5fcm93Q291bnRGb3JMZXZlbChlLmxlbmd0aC0xKTp0aGlzLl9jb2x1bW5Db3VudEZvckxldmVsKGUubGVuZ3RoLTEpOjF9LF91cGRhdGVFdmVudEZvclNlbGVjdGlvbjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9hZGp1c3RFdmVudChlLmNsb25lKCkpO3JldHVybiB0Lm9jY3VycmVuY2V9LF91cGRhdGVFdmVudEZvck1vdmU6ZnVuY3Rpb24oZSl7ZS5pc0FsbERheSYmZS5zZXQoXCJpc0FsbERheVwiLCExKX0sX3VwZGF0ZUV2ZW50Rm9yUmVzaXplOmZ1bmN0aW9uKGUpe2UuaXNBbGxEYXkmJmUuc2V0KFwiaXNBbGxEYXlcIiwhMSl9LF91cGRhdGVNb3ZlSGludDpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGEscyxsLGMsZCx1LGgscCxmPXRoaXMuZ3JvdXBzW3RdLGc9ZS5jbG9uZSh7c3RhcnQ6ZS5zdGFydCxlbmQ6ZS5lbmR9KSxtPWcuZHVyYXRpb24oKTtmb3IoZy5zdGFydD1uZXcgRGF0ZShnLnN0YXJ0LmdldFRpbWUoKStuKSxnLmVuZD1uZXcgRGF0ZSgrZy5zdGFydCttKSxpPXRoaXMuX2FkanVzdEV2ZW50KGcpLHI9Zi5zbG90UmFuZ2VzKGkub2NjdXJyZW5jZSwhMSksdGhpcy5fcmVtb3ZlTW92ZUhpbnQoKSxvPTA7ci5sZW5ndGg+bztvKyspYT1yW29dLHM9YS5zdGFydCxsPXRoaXMuX2NyZWF0ZUV2ZW50RWxlbWVudChpLm9jY3VycmVuY2UsaS5vY2N1cnJlbmNlLCExLCExKSxsLmFkZENsYXNzKFwiay1ldmVudC1kcmFnLWhpbnRcIiksYz1hLmlubmVyUmVjdChpLm9jY3VycmVuY2Uuc3RhcnQsaS5vY2N1cnJlbmNlLmVuZCx0aGlzLm9wdGlvbnMuc25hcCksZD1jLnJpZ2h0LWMubGVmdC0yLDA+ZCYmKGQ9MCksdT1jLmxlZnQsdGhpcy5faXNSdGwmJih1LT10aGlzLmNvbnRlbnRbMF0uc2Nyb2xsV2lkdGgtdGhpcy5jb250ZW50WzBdLm9mZnNldFdpZHRoKSxoPXtsZWZ0OnUsdG9wOnMub2Zmc2V0VG9wLGhlaWdodDpzLm9mZnNldEhlaWdodC0yLHdpZHRoOmR9LGwuY3NzKGgpLHRoaXMuX21vdmVIaW50PXRoaXMuX21vdmVIaW50LmFkZChsKTtwPXRoaXMuY29udGVudCx0aGlzLl9tb3ZlSGludC5hcHBlbmRUbyhwKX0sX3VwZGF0ZVJlc2l6ZUhpbnQ6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbyxzLGwsZCx1LGgscCxmLGcsbSx2PXRoaXMuZ3JvdXBzW3RdLF89di5yYW5nZXMobixpLCExLCExKTtmb3IodGhpcy5fcmVtb3ZlUmVzaXplSGludCgpLHI9MDtfLmxlbmd0aD5yO3IrKylvPV9bcl0scz1vLnN0YXJ0U2xvdCgpLGw9by5pbm5lclJlY3QobixpLCExKSxsLnRvcD1zLm9mZnNldFRvcCxkPWwucmlnaHQtbC5sZWZ0LHU9cy5vZmZzZXRIZWlnaHQsaD1sLmxlZnQscD10aGlzLmNvbnRlbnQsdGhpcy5faXNSdGwmJihoLT1wWzBdLnNjcm9sbFdpZHRoLXBbMF0ub2Zmc2V0V2lkdGgpLGY9Yy5mbi5fY3JlYXRlUmVzaXplSGludC5jYWxsKHRoaXMsaCxsLnRvcCxkLHUpLHRoaXMuX3Jlc2l6ZUhpbnQ9dGhpcy5fcmVzaXplSGludC5hZGQoZik7Zz1cInRcIixtPXRoaXMuY29udGVudCx0aGlzLl9yZXNpemVIaW50LmFwcGVuZFRvKG0pLHRoaXMuX3Jlc2l6ZUhpbnQuZmluZChcIi5rLWxhYmVsLXRvcCwuay1sYWJlbC1ib3R0b21cIikudGV4dChcIlwiKSx0aGlzLl9yZXNpemVIaW50LmZpcnN0KCkuYWRkQ2xhc3MoXCJrLWZpcnN0XCIpLmZpbmQoXCIuay1sYWJlbC10b3BcIikudGV4dChhLnRvU3RyaW5nKGEudGltZXpvbmUudG9Mb2NhbERhdGUobiksZykpLHRoaXMuX3Jlc2l6ZUhpbnQubGFzdCgpLmFkZENsYXNzKFwiay1sYXN0XCIpLmZpbmQoXCIuay1sYWJlbC1ib3R0b21cIikudGV4dChhLnRvU3RyaW5nKGEudGltZXpvbmUudG9Mb2NhbERhdGUoaSksZykpfSxzZWxlY3Rpb25CeUVsZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vZmZzZXQoKTtyZXR1cm4gdGhpcy5fc2xvdEJ5UG9zaXRpb24odC5sZWZ0LHQudG9wKX0sX3VwZGF0ZURpcmVjdGlvbjpmdW5jdGlvbihlLHQsbixpLHIpe3ZhciBvPXRbMF0uc3RhcnQsYT10W3QubGVuZ3RoLTFdLmVuZDtuJiYhciYmby5pbmRleD09PWEuaW5kZXgmJm8uY29sbGVjdGlvbkluZGV4PT09YS5jb2xsZWN0aW9uSW5kZXgmJihlLmJhY2t3YXJkPWkpfSxfY2hhbmdlR3JvdXA6ZnVuY3Rpb24oZSx0KXt2YXIgbj10P1wicHJldkdyb3VwU2xvdFwiOlwibmV4dEdyb3VwU2xvdFwiLGk9dGhpc1tuXShlLnN0YXJ0LGUuZ3JvdXBJbmRleCwhMSk7cmV0dXJuIGkmJihlLmdyb3VwSW5kZXgrPXQ/LTE6MSksaX0scHJldkdyb3VwU2xvdDpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzLmdyb3Vwc1t0XSxvPXIucmFuZ2VzKGUsZSxuLCExKVswXS5zdGFydDtpZighKDA+PXQpKXJldHVybiB0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCk/bzooaT1yLl9jb2xsZWN0aW9uKDAsbiksaS5sYXN0KCkpfSxuZXh0R3JvdXBTbG90OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPXRoaXMuZ3JvdXBzW3RdLG89ci5yYW5nZXMoZSxlLG4sITEpWzBdLnN0YXJ0O2lmKCEodD49dGhpcy5ncm91cHMubGVuZ3RoLTEpKXJldHVybiB0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCk/bzooaT1yLl9jb2xsZWN0aW9uKDAsbiksaS5maXJzdCgpKX0sX3ZlcnRpY2FsU2xvdHM6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9aT9cImxlZnRTbG90XCI6XCJyaWdodFNsb3RcIixvPXRbMF0uc3RhcnQsYT10W3QubGVuZ3RoLTFdLmVuZCxzPXRoaXMuZ3JvdXBzW2UuZ3JvdXBJbmRleF07cmV0dXJuIG89c1tyXShvKSxhPXNbcl0oYSksbnx8IXRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKXx8byYmYXx8KG89YT10aGlzLl9jaGFuZ2VHcm91cChlLGkpKSx7c3RhcnRTbG90Om8sZW5kU2xvdDphfX0sX2hvcml6b250YWxTbG90czpmdW5jdGlvbihlLHQsbixpKXt2YXIgcj1pP1widXBTbG90XCI6XCJkb3duU2xvdFwiLG89dFswXS5zdGFydCxhPXRbdC5sZW5ndGgtMV0uZW5kLHM9dGhpcy5ncm91cHNbZS5ncm91cEluZGV4XTtyZXR1cm4gbz1zW3JdKG8pLGE9c1tyXShhKSxufHwhdGhpcy5faXNIb3Jpem9udGFsbHlHcm91cGVkKCl8fG8mJmF8fChvPWE9dGhpcy5fY2hhbmdlR3JvdXAoZSxpKSkse3N0YXJ0U2xvdDpvLGVuZFNsb3Q6YX19LF9jaGFuZ2VWaWV3UGVyaW9kOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10P3RoaXMucHJldmlvdXNEYXRlKCk6dGhpcy5uZXh0RGF0ZSgpLHI9ZS5zdGFydCxvPWUuZW5kO3JldHVybiBlLnN0YXJ0PW5ldyBEYXRlKGkpLGUuZW5kPW5ldyBEYXRlKGkpLHRoaXMuX2lzSG9yaXpvbnRhbGx5R3JvdXBlZCgpJiYoZS5ncm91cEluZGV4PXQ/dGhpcy5ncm91cHMubGVuZ3RoLTE6MCksbj1vLXIsdD8obz1wKHRoaXMuZW5kVGltZSgpKSxvPTA9PT1vP2Y6byxsKGUuc3RhcnQsby1uKSxsKGUuZW5kLG8pKToocj1wKHRoaXMuc3RhcnRUaW1lKCkpLGwoZS5zdGFydCxyKSxsKGUuZW5kLHIrbikpLGUuZXZlbnRzPVtdLCEwfSxtb3ZlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8scyxsLGM9ITEsZD10aGlzLmdyb3Vwc1tlLmdyb3VwSW5kZXhdLHU9YS5rZXlzLGg9ZC5yYW5nZXMoZS5zdGFydCxlLmVuZCwhMSwhMSk7aWYodD09PXUuRE9XTnx8dD09PXUuVVApYz0hMCxvPXQ9PT11LlVQLHRoaXMuX3VwZGF0ZURpcmVjdGlvbihlLGgsbixvLCEwKSxzPXRoaXMuX3ZlcnRpY2FsU2xvdHMoZSxoLG4sbyk7ZWxzZSBpZighKHQhPT11LkxFRlQmJnQhPT11LlJJR0hUfHwoYz0hMCxvPXQ9PT11LkxFRlQsdGhpcy5fdXBkYXRlRGlyZWN0aW9uKGUsaCxuLG8sITEpLHM9dGhpcy5faG9yaXpvbnRhbFNsb3RzKGUsaCxuLG8pLHMuc3RhcnRTbG90JiZzLmVuZFNsb3R8fG58fCF0aGlzLl9jaGFuZ2VWaWV3UGVyaW9kKGUsbywhMSkpKSlyZXR1cm4gYztyZXR1cm4gYyYmKGk9cy5zdGFydFNsb3Qscj1zLmVuZFNsb3Qsbj8obD1lLmJhY2t3YXJkLGwmJmk/ZS5zdGFydD1pLnN0YXJ0RGF0ZSgpOiFsJiZyJiYoZS5lbmQ9ci5lbmREYXRlKCkpKTppJiZyJiYoZS5zdGFydD1pLnN0YXJ0RGF0ZSgpLGUuZW5kPXIuZW5kRGF0ZSgpKSxlLmV2ZW50cz1bXSksY30sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5lbGVtZW50JiZlLmVsZW1lbnQub2ZmKG0pLGUuZm9vdGVyJiZlLmZvb3Rlci5yZW1vdmUoKSxlLl9jdXJyZW50VGltZVVwZGF0ZVRpbWVyJiZjbGVhckludGVydmFsKGUuX2N1cnJlbnRUaW1lVXBkYXRlVGltZXIpLGMuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuX2lzTW9iaWxlKCkmJmUub3B0aW9ucy5lZGl0YWJsZSYmKGUub3B0aW9ucy5lZGl0YWJsZS5jcmVhdGUhPT0hMSYmKGUuX2FkZFVzZXJFdmVudHMuZGVzdHJveSgpLGUuX2FsbERheVVzZXJFdmVudHMuZGVzdHJveSgpKSxlLm9wdGlvbnMuZWRpdGFibGUudXBkYXRlIT09ITEmJmUuX2VkaXRVc2VyRXZlbnRzLmRlc3Ryb3koKSl9fSk7ZCghMCxzLHtUaW1lbGluZVZpZXc6dyxUaW1lbGluZVdlZWtWaWV3OncuZXh0ZW5kKHtvcHRpb25zOntuYW1lOlwiVGltZWxpbmVXZWVrVmlld1wiLHRpdGxlOlwiVGltZWxpbmUgV2Vla1wiLHNlbGVjdGVkRGF0ZUZvcm1hdDpcInswOkR9IC0gezE6RH1cIixtYWpvclRpY2s6MTIwfSxuYW1lOlwidGltZWxpbmVXZWVrXCIsY2FsY3VsYXRlRGF0ZVJhbmdlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMub3B0aW9ucy5kYXRlLGk9YS5kYXRlLmRheU9mV2VlayhuLHRoaXMuY2FsZW5kYXJJbmZvKCkuZmlyc3REYXksLTEpLHI9W107Zm9yKGU9MCx0PTc7dD5lO2UrKylyLnB1c2goaSksaT1hLmRhdGUubmV4dERheShpKTt0aGlzLl9yZW5kZXIocil9fSksVGltZWxpbmVXb3JrV2Vla1ZpZXc6dy5leHRlbmQoe29wdGlvbnM6e25hbWU6XCJUaW1lbGluZVdvcmtXZWVrVmlld1wiLHRpdGxlOlwiVGltZWxpbmUgV29yayBXZWVrXCIsc2VsZWN0ZWREYXRlRm9ybWF0OlwiezA6RH0gLSB7MTpEfVwiLG1ham9yVGljazoxMjB9LG5hbWU6XCJ0aW1lbGluZVdvcmtXZWVrXCIsbmV4dERhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gYS5kYXRlLmRheU9mV2VlayhhLmRhdGUubmV4dERheSh0aGlzLmVuZERhdGUoKSksdGhpcy5vcHRpb25zLndvcmtXZWVrU3RhcnQsMSl9LHByZXZpb3VzRGF0ZTpmdW5jdGlvbigpe3JldHVybiBhLmRhdGUucHJldmlvdXNEYXkodGhpcy5zdGFydERhdGUoKSl9LGNhbGN1bGF0ZURhdGVSYW5nZTpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLm9wdGlvbnMuZGF0ZSx0PWEuZGF0ZS5kYXlPZldlZWsoZSx0aGlzLm9wdGlvbnMud29ya1dlZWtTdGFydCwtMSksbj1hLmRhdGUuZGF5T2ZXZWVrKHQsdGhpcy5vcHRpb25zLndvcmtXZWVrRW5kLDEpLGk9W107bj49dDspaS5wdXNoKHQpLHQ9YS5kYXRlLm5leHREYXkodCk7dGhpcy5fcmVuZGVyKGkpfX0pLFRpbWVsaW5lTW9udGhWaWV3OncuZXh0ZW5kKHtvcHRpb25zOntuYW1lOlwiVGltZWxpbmVNb250aFZpZXdcIix0aXRsZTpcIlRpbWVsaW5lIE1vbnRoXCIsc2VsZWN0ZWREYXRlRm9ybWF0OlwiezA6RH0gLSB7MTpEfVwiLHdvcmtEYXlTdGFydDpuZXcgRGF0ZSgxOTgwLDEsMSwwLDAsMCksd29ya0RheUVuZDpuZXcgRGF0ZSgxOTgwLDEsMSwwLDAsMCksZm9vdGVyOiExLG1ham9yVGljazoxNDQwLG1pbm9yVGlja0NvdW50OjF9LG5hbWU6XCJ0aW1lbGluZVdlZWtcIixjYWxjdWxhdGVEYXRlUmFuZ2U6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy5vcHRpb25zLmRhdGUsaT1hLmRhdGUuZmlyc3REYXlPZk1vbnRoKG4pLHI9YS5kYXRlLmxhc3REYXlPZk1vbnRoKG4pLG89W107Zm9yKGU9MCx0PXIuZ2V0RGF0ZSgpO3Q+ZTtlKyspby5wdXNoKGkpLGk9YS5kYXRlLm5leHREYXkoaSk7dGhpcy5fcmVuZGVyKG8pfX0pfSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQpe3JldHVybiB0PXR8fFwiXCIsZS5zdGFydFRpbWV6b25lJiYodD1lLnN0YXJ0VGltZXpvbmUsZS5lbmRUaW1lem9uZSYmKHQrPVwiIHwgXCIrZS5lbmRUaW1lem9uZSkpLHR9ZnVuY3Rpb24gaShlLHQpe3ZhciBuPXQudGltZXpvbmU7biYmKGVbQS5hdHRyKFwidGltZXpvbmVcIildPW4pfWZ1bmN0aW9uIHIoZSx0KXt2YXIgbixpPXQubW9kZWwuZmllbGRzW3QuZmllbGRdLnZhbGlkYXRpb247aSYmKG49aS5kYXRlQ29tcGFyZSxuJiZVKG4pJiZuLm1lc3NhZ2UmJihlW0EuYXR0cihcImRhdGVDb21wYXJlLW1zZ1wiKV09bi5tZXNzYWdlKSl9ZnVuY3Rpb24gbyhlLHQpe3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gbj1lKG4pLHMobixcImFwcGx5XCIsdCksbnx8W119fWZ1bmN0aW9uIGEoZSx0KXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIG4mJihcIltvYmplY3QgQXJyYXldXCI9PT1HLmNhbGwobil8fG4gaW5zdGFuY2VvZiBBLmRhdGEuT2JzZXJ2YWJsZUFycmF5fHwobj1bbl0pKSxzKG4sXCJyZW1vdmVcIix0LCEwKSxuPWUobiksbnx8W119fWZ1bmN0aW9uIHMoZSx0LG4saSl7dmFyIHIsbyxhO2ZvcihlPWV8fFtdLG89MCxhPWUubGVuZ3RoO2E+bztvKyspcj1lW29dLGk/ci5zdGFydFRpbWV6b25lfHxyLmVuZFRpbWV6b25lP24/KHIuc3RhcnQ9QS50aW1lem9uZS5jb252ZXJ0KHIuc3RhcnQsci5zdGFydFRpbWV6b25lfHxyLmVuZFRpbWV6b25lLG4pLHIuZW5kPUEudGltZXpvbmUuY29udmVydChyLmVuZCxyLmVuZFRpbWV6b25lfHxyLnN0YXJ0VGltZXpvbmUsbiksci5zdGFydD1BLnRpbWV6b25lW3RdKHIuc3RhcnQsbiksci5lbmQ9QS50aW1lem9uZVt0XShyLmVuZCxuKSk6KHIuc3RhcnQ9QS50aW1lem9uZVt0XShyLnN0YXJ0LHIuc3RhcnRUaW1lem9uZXx8ci5lbmRUaW1lem9uZSksci5lbmQ9QS50aW1lem9uZVt0XShyLmVuZCxyLmVuZFRpbWV6b25lfHxyLnN0YXJ0VGltZXpvbmUpKTpuJiYoci5zdGFydD1BLnRpbWV6b25lW3RdKHIuc3RhcnQsbiksci5lbmQ9QS50aW1lem9uZVt0XShyLmVuZCxuKSk6ci5zdGFydFRpbWV6b25lfHxyLmVuZFRpbWV6b25lPyhyLnN0YXJ0PUEudGltZXpvbmVbdF0oci5zdGFydCxyLnN0YXJ0VGltZXpvbmV8fHIuZW5kVGltZXpvbmUpLHIuZW5kPUEudGltZXpvbmVbdF0oci5lbmQsci5lbmRUaW1lem9uZXx8ci5zdGFydFRpbWV6b25lKSxuJiYoci5zdGFydD1BLnRpbWV6b25lLmNvbnZlcnQoci5zdGFydCxyLnN0YXJ0VGltZXpvbmV8fHIuZW5kVGltZXpvbmUsbiksci5lbmQ9QS50aW1lem9uZS5jb252ZXJ0KHIuZW5kLHIuZW5kVGltZXpvbmV8fHIuc3RhcnRUaW1lem9uZSxuKSkpOm4mJihyLnN0YXJ0PUEudGltZXpvbmVbdF0oci5zdGFydCxuKSxyLmVuZD1BLnRpbWV6b25lW3RdKHIuZW5kLG4pKSxpJiZkZWxldGUgci51aWQ7cmV0dXJuIGV9ZnVuY3Rpb24gbChlLHQpe2Zvcih2YXIgbixpPWUubGVuZ3RoLHI9MDtpPnI7cisrKWlmKG49ZVtyXSxuLnVpZD09PXQpcmV0dXJuIG59ZnVuY3Rpb24gYyhlLHQsbil7cmV0dXJuIGU9bj9BLnRpbWV6b25lLmNvbnZlcnQoZSx0LG4pOkEudGltZXpvbmUucmVtb3ZlKGUsdCl9ZnVuY3Rpb24gZChlKXt2YXIgdCxuLGkscixvLGEscyxsLGQsdSxoLHA7cmV0dXJuIGUuZmlsdGVyKFwiW25hbWU9ZW5kXVwiKS5sZW5ndGgmJih0PWUuY2xvc2VzdChcIi5rLXNjaGVkdWxlci1lZGl0LWZvcm1cIiksbj10LmZpbmQoXCJbbmFtZT1zdGFydF06dmlzaWJsZVwiKSxpPXQuZmluZChcIltuYW1lPWVuZF06dmlzaWJsZVwiKSxpWzBdJiZuWzBdJiYoYT1BLndpZGdldEluc3RhbmNlKG4sQS51aSkscz1BLndpZGdldEluc3RhbmNlKGksQS51aSksbD10LmRhdGEoXCJrZW5kb0VkaXRhYmxlXCIpLGQ9bD9sLm9wdGlvbnMubW9kZWw6bnVsbCxhJiZzPyhyPWEudmFsdWUoKSxvPXMudmFsdWUoKSk6KHI9QS5wYXJzZURhdGUobi52YWwoKSksbz1BLnBhcnNlRGF0ZShpLnZhbCgpKSksciYmbykpPyhkJiYodT1uLmF0dHIoQS5hdHRyKFwidGltZXpvbmVcIikpLGg9ZC5zdGFydFRpbWV6b25lLHA9ZC5lbmRUaW1lem9uZSxoPWh8fHAscD1wfHxoLGgmJihyPWMocixoLHUpLG89YyhvLHAsdSkpKSxvPj1yKTohMH1mdW5jdGlvbiB1KGUsdCxuLGkpe2Zvcih2YXIgcj1lLmxlbmd0aCxvPVtdLGE9MDtyPmE7YSsrKW89by5jb25jYXQoZVthXS5leHBhbmQodCxuLGkpKTtyZXR1cm4gb31mdW5jdGlvbiBoKGUpe3JldHVybiBkZWxldGUgZS5uYW1lLGRlbGV0ZSBlLnByZWZpeCxkZWxldGUgZS5yZW1vdmUsZGVsZXRlIGUuZWRpdCxkZWxldGUgZS5hZGQsZGVsZXRlIGUubmF2aWdhdGUsZX1mdW5jdGlvbiBwKHQpe3JldHVybiBmdW5jdGlvbihuKXtlKEEuZm9ybWF0KCc8c2VsZWN0IGRhdGEtezB9YmluZD1cInZhbHVlOnsxfVwiPicsQS5ucyx0LmZpZWxkKSkuYXBwZW5kVG8obikua2VuZG9Ecm9wRG93bkxpc3Qoe2RhdGFUZXh0RmllbGQ6dC5kYXRhVGV4dEZpZWxkLGRhdGFWYWx1ZUZpZWxkOnQuZGF0YVZhbHVlRmllbGQsZGF0YVNvdXJjZTp0LmRhdGFTb3VyY2UsdmFsdWVQcmltaXRpdmU6dC52YWx1ZVByaW1pdGl2ZSxvcHRpb25MYWJlbDpcIk5vbmVcIix0ZW1wbGF0ZTpBLmZvcm1hdCgnPHNwYW4gY2xhc3M9XCJrLXNjaGVkdWxlci1tYXJrXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiM9IGRhdGEuezB9P3swfTpcIm5vbmVcIiAjXCI+PC9zcGFuPiM9ezF9IycsdC5kYXRhQ29sb3JGaWVsZCx0LmRhdGFUZXh0RmllbGQpfSl9fWZ1bmN0aW9uIGYodCl7cmV0dXJuIGZ1bmN0aW9uKG4pe2UoQS5mb3JtYXQoJzxzZWxlY3QgZGF0YS17MH1iaW5kPVwidmFsdWU6ezF9XCI+JyxBLm5zLHQuZmllbGQpKS5hcHBlbmRUbyhuKS5rZW5kb011bHRpU2VsZWN0KHtkYXRhVGV4dEZpZWxkOnQuZGF0YVRleHRGaWVsZCxkYXRhVmFsdWVGaWVsZDp0LmRhdGFWYWx1ZUZpZWxkLGRhdGFTb3VyY2U6dC5kYXRhU291cmNlLHZhbHVlUHJpbWl0aXZlOnQudmFsdWVQcmltaXRpdmUsaXRlbVRlbXBsYXRlOkEuZm9ybWF0KCc8c3BhbiBjbGFzcz1cImstc2NoZWR1bGVyLW1hcmtcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6Iz0gZGF0YS57MH0/ezB9Olwibm9uZVwiICNcIj48L3NwYW4+Iz17MX0jJyx0LmRhdGFDb2xvckZpZWxkLHQuZGF0YVRleHRGaWVsZCksdGFnVGVtcGxhdGU6QS5mb3JtYXQoJzxzcGFuIGNsYXNzPVwiay1zY2hlZHVsZXItbWFya1wiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojPSBkYXRhLnswfT97MH06XCJub25lXCIgI1wiPjwvc3Bhbj4jPXsxfSMnLHQuZGF0YUNvbG9yRmllbGQsdC5kYXRhVGV4dEZpZWxkKX0pfX1mdW5jdGlvbiBnKHQpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgaSxyLG89XCJcIixhPXQuZGF0YVNvdXJjZS52aWV3KCk7Zm9yKGk9MCxyPWEubGVuZ3RoO3I+aTtpKyspbys9QS5mb3JtYXQoJzxvcHRpb24gdmFsdWU9XCJ7MH1cIj57MX08L29wdGlvbj4nLEEuZ2V0dGVyKHQuZGF0YVZhbHVlRmllbGQpKGFbaV0pLEEuZ2V0dGVyKHQuZGF0YVRleHRGaWVsZCkoYVtpXSkpO2UoQS5mb3JtYXQoJzxzZWxlY3QgZGF0YS17MH1iaW5kPVwidmFsdWU6ezF9XCIgbXVsdGlwbGU9XCJtdWx0aXBsZVwiIGRhdGEtezB9dmFsdWUtcHJpbWl0aXZlPVwiezN9XCI+ezJ9PC9zZWxlY3Q+JyxBLm5zLHQuZmllbGQsbyx0LnZhbHVlUHJpbWl0aXZlKSkuYXBwZW5kVG8obil9fWZ1bmN0aW9uIG0oZSx0KXt2YXIgbixpPWUuZW5kLmdldFRpbWUoKS1lLnN0YXJ0LmdldFRpbWUoKSxyPW5ldyBEYXRlKGUuc3RhcnQuZ2V0VGltZSgpKTtyZXR1cm4gQS5kYXRlLnNldFRpbWUocix0KSxuPW5ldyBEYXRlKHIuZ2V0VGltZSgpKSxBLmRhdGUuc2V0VGltZShuLGksITApLHtzdGFydDpyLGVuZDpufX12YXIgdixfLHksdyxiLGsseCxDLFMsVCxELEE9d2luZG93LmtlbmRvLEU9QS5kYXRlLE09QS5zdXBwb3J0LmlucHV0LFA9RS5NU19QRVJfREFZLEk9RS5nZXREYXRlLHo9QS5kYXRlLmdldE1pbGxpc2Vjb25kcyxGPUEucmVjdXJyZW5jZSxSPUEua2V5cyxCPUEudWksTD1CLldpZGdldCxPPVwic3RyaW5nXCIsSD1CLlBvcHVwLE49Qi5DYWxlbmRhcixWPUEuZGF0YS5EYXRhU291cmNlLFU9ZS5pc1BsYWluT2JqZWN0LFc9ZS5leHRlbmQsaj1lLnByb3h5LEc9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxxPWUuaXNBcnJheSwkPVwiLmtlbmRvU2NoZWR1bGVyXCIsWT1cImNsaWNrXCIsSz1cImNoYW5nZVwiLFE9XCJjYW5jZWxcIixYPVwicmVtb3ZlXCIsSj1cInNhdmVcIixaPVwiYWRkXCIsZXQ9XCJlZGl0XCIsdHQ9Lyg/OnZhbHVlOnN0YXJ0fHZhbHVlOmVuZCkoPzosfCQpLyxudD1JKG5ldyBEYXRlKSxpdD1cInJlY3VycmVuY2VFeGNlcHRpb25cIixydD1cIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBldmVudD9cIixvdD1cIkRvIHlvdSB3YW50IHRvIGRlbGV0ZSBvbmx5IHRoaXMgZXZlbnQgb2NjdXJyZW5jZSBvciB0aGUgd2hvbGUgc2VyaWVzP1wiLGF0PVwiRG8geW91IHdhbnQgdG8gZWRpdCBvbmx5IHRoaXMgZXZlbnQgb2NjdXJyZW5jZSBvciB0aGUgd2hvbGUgc2VyaWVzP1wiLHN0PSc8YSBjbGFzcz1cImstYnV0dG9uICM9Y2xhc3NOYW1lI1wiICM9YXR0ciMgaHJlZj1cIlxcXFwjXCI+Iz10ZXh0IzwvYT4nLGx0PUEudGVtcGxhdGUoJzxkaXYgY2xhc3M9XCJrLWZsb2F0d3JhcCBrLWhlYWRlciBrLXNjaGVkdWxlci10b29sYmFyXCI+IyBpZiAocGRmKSB7ICM8dWwgY2xhc3M9XCJrLXJlc2V0IGstc2NoZWR1bGVyLXRvb2xzXCI+PGxpPjxhIHJvbGU9XCJidXR0b25cIiBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstYnV0dG9uIGstcGRmXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1pLXBkZlwiPjwvc3Bhbj4ke21lc3NhZ2VzLnBkZn08L2E+PC9saT48L3VsPiMgfSAjPHVsIGNsYXNzPVwiay1yZXNldCBrLXNjaGVkdWxlci1uYXZpZ2F0aW9uXCI+PGxpIGNsYXNzPVwiay1zdGF0ZS1kZWZhdWx0IGstaGVhZGVyIGstbmF2LXRvZGF5XCI+PGEgcm9sZT1cImJ1dHRvblwiIGhyZWY9XCJcXFxcI1wiIGNsYXNzPVwiay1saW5rXCI+JHttZXNzYWdlcy50b2RheX08L2E+PC9saT48bGkgY2xhc3M9XCJrLXN0YXRlLWRlZmF1bHQgay1oZWFkZXIgay1uYXYtcHJldlwiPjxhIHJvbGU9XCJidXR0b25cIiBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstbGlua1wiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy13XCI+PC9zcGFuPjwvYT48L2xpPjxsaSBjbGFzcz1cImstc3RhdGUtZGVmYXVsdCBrLWhlYWRlciBrLW5hdi1uZXh0XCI+PGEgcm9sZT1cImJ1dHRvblwiIGhyZWY9XCJcXFxcI1wiIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LWVcIj48L3NwYW4+PC9hPjwvbGk+PGxpIGNsYXNzPVwiay1zdGF0ZS1kZWZhdWx0IGstbmF2LWN1cnJlbnRcIj48YSByb2xlPVwiYnV0dG9uXCIgaHJlZj1cIlxcXFwjXCIgY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWktY2FsZW5kYXJcIj48L3NwYW4+PHNwYW4gZGF0YS0jPW5zI2JpbmQ9XCJ0ZXh0OiBmb3JtYXR0ZWREYXRlXCI+PC9zcGFuPjwvYT48L2xpPjwvdWw+PHVsIGNsYXNzPVwiay1yZXNldCBrLWhlYWRlciBrLXNjaGVkdWxlci12aWV3c1wiPiNmb3IodmFyIHZpZXcgaW4gdmlld3MpeyM8bGkgY2xhc3M9XCJrLXN0YXRlLWRlZmF1bHQgay12aWV3LSM9IHZpZXcudG9Mb3dlckNhc2UoKSAjXCIgZGF0YS0jPW5zI25hbWU9XCIjPXZpZXcjXCI+PGEgcm9sZT1cImJ1dHRvblwiIGhyZWY9XCJcXFxcI1wiIGNsYXNzPVwiay1saW5rXCI+JHt2aWV3c1t2aWV3XS50aXRsZX08L2E+PC9saT4jfSM8L3VsPjwvZGl2PicpLGN0PUEudGVtcGxhdGUoJzxkaXYgY2xhc3M9XCJrLWZsb2F0d3JhcCBrLWhlYWRlciBrLXNjaGVkdWxlci10b29sYmFyXCI+PHVsIGNsYXNzPVwiay1yZXNldCBrLWhlYWRlciBrLXNjaGVkdWxlci1uYXZpZ2F0aW9uXCI+PGxpIGNsYXNzPVwiay1zdGF0ZS1kZWZhdWx0IGstbmF2LXRvZGF5XCI+PGEgcm9sZT1cImJ1dHRvblwiIGhyZWY9XCJcXFxcI1wiIGNsYXNzPVwiay1saW5rXCI+JHttZXNzYWdlcy50b2RheX08L2E+PC9saT48L3VsPjx1bCBjbGFzcz1cImstcmVzZXQgay1oZWFkZXIgay1zY2hlZHVsZXItdmlld3NcIj4jZm9yKHZhciB2aWV3IGluIHZpZXdzKXsjPGxpIGNsYXNzPVwiay1zdGF0ZS1kZWZhdWx0IGstdmlldy0jPSB2aWV3LnRvTG93ZXJDYXNlKCkgI1wiIGRhdGEtIz1ucyNuYW1lPVwiIz12aWV3I1wiPjxhIHJvbGU9XCJidXR0b25cIiBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstbGlua1wiPiR7dmlld3Nbdmlld10udGl0bGV9PC9hPjwvbGk+I30jPC91bD48L2Rpdj48ZGl2IGNsYXNzPVwiay1mbG9hdHdyYXAgay1oZWFkZXIgay1zY2hlZHVsZXItdG9vbGJhclwiPjx1bCBjbGFzcz1cImstcmVzZXQgay1oZWFkZXIgay1zY2hlZHVsZXItbmF2aWdhdGlvblwiPjxsaSBjbGFzcz1cImstc3RhdGUtZGVmYXVsdCBrLW5hdi1wcmV2XCI+PGEgcm9sZT1cImJ1dHRvblwiIGhyZWY9XCJcXFxcI1wiIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LXdcIj48L3NwYW4+PC9hPjwvbGk+PGxpIGNsYXNzPVwiay1zdGF0ZS1kZWZhdWx0IGstbmF2LWN1cnJlbnRcIj48c3BhbiBkYXRhLSM9bnMjYmluZD1cInRleHQ6IGZvcm1hdHRlZERhdGVcIj48L3NwYW4+PC9saT48bGkgY2xhc3M9XCJrLXN0YXRlLWRlZmF1bHQgay1uYXYtbmV4dFwiPjxhIHJvbGU9XCJidXR0b25cIiBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstbGlua1wiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy1lXCI+PC9zcGFuPjwvYT48L2xpPjwvdWw+PC9kaXY+JyksZHQ9ZnVuY3Rpb24odCxuKXt2YXIgbz17bmFtZTpuLmZpZWxkfSxhPU0uZGF0ZT9cIlwiOkEuYXR0cihcInJvbGVcIikrJz1cImRhdGVwaWNrZXJcIiAnLHM9QS5hdHRyKFwicm9sZVwiKSsnPVwiZGF0ZXRpbWVwaWNrZXJcIiAnLGw9bi5tb2RlbC5pc0FsbERheSxjPUEuYXR0cihcInZhbGlkYXRlXCIpK1wiPSdcIishbCtcIidcIixkPUEuYXR0cihcInZhbGlkYXRlXCIpK1wiPSdcIitsK1wiJ1wiO2kobyxuKSxyKG8sbiksZSgnPGlucHV0IHR5cGU9XCJkYXRldGltZS1sb2NhbFwiIHJlcXVpcmVkICcrQS5hdHRyKFwidHlwZVwiKSsnPVwiZGF0ZVwiICcrcytBLmF0dHIoXCJiaW5kXCIpKyc9XCJ2YWx1ZTonK24uZmllbGQrJyxpbnZpc2libGU6aXNBbGxEYXlcIiAnK2MrXCIvPlwiKS5hdHRyKG8pLmFwcGVuZFRvKHQpLGUoJzxpbnB1dCB0eXBlPVwiZGF0ZVwiIHJlcXVpcmVkICcrQS5hdHRyKFwidHlwZVwiKSsnPVwiZGF0ZVwiICcrYStBLmF0dHIoXCJiaW5kXCIpKyc9XCJ2YWx1ZTonK24uZmllbGQrJyx2aXNpYmxlOmlzQWxsRGF5XCIgJytkK1wiLz5cIikuYXR0cihvKS5hcHBlbmRUbyh0KSxlKFwiPHNwYW4gXCIrQS5hdHRyKFwiZm9yXCIpKyc9XCInK24uZmllbGQrJ1wiIGNsYXNzPVwiay1pbnZhbGlkLW1zZ1wiLz4nKS5oaWRlKCkuYXBwZW5kVG8odCl9LHV0PWZ1bmN0aW9uKHQsbil7dmFyIG89e25hbWU6bi5maWVsZH0sYT1uLm1vZGVsLmlzQWxsRGF5LHM9QS5hdHRyKFwidmFsaWRhdGVcIikrXCI9J1wiKyFhK1wiJyBcIixsPUEuYXR0cihcInZhbGlkYXRlXCIpK1wiPSdcIithK1wiJyBcIjtpKG8sbikscihvLG4pLGUoJzxpbnB1dCB0eXBlPVwidGV4dFwiIHJlcXVpcmVkICcrQS5hdHRyKFwidHlwZVwiKSsnPVwiZGF0ZVwiICcrQS5hdHRyKFwicm9sZVwiKSsnPVwiZGF0ZXRpbWVwaWNrZXJcIiAnK0EuYXR0cihcImJpbmRcIikrJz1cInZhbHVlOicrbi5maWVsZCsnLGludmlzaWJsZTppc0FsbERheVwiICcrcytcIi8+XCIpLmF0dHIobykuYXBwZW5kVG8odCksZSgnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcmVxdWlyZWQgJytBLmF0dHIoXCJ0eXBlXCIpKyc9XCJkYXRlXCIgJytBLmF0dHIoXCJyb2xlXCIpKyc9XCJkYXRlcGlja2VyXCIgJytBLmF0dHIoXCJiaW5kXCIpKyc9XCJ2YWx1ZTonK24uZmllbGQrJyx2aXNpYmxlOmlzQWxsRGF5XCIgJytsK1wiLz5cIikuYXR0cihvKS5hcHBlbmRUbyh0KSxlKFwiPHNwYW4gXCIrQS5hdHRyKFwiYmluZFwiKSsnPVwidGV4dDogJytuLmZpZWxkKydUaW1lem9uZVwiPjwvc3Bhbj4nKS5hcHBlbmRUbyh0KSxcImVuZFwiPT09bi5maWVsZCYmZShcIjxzcGFuIFwiK0EuYXR0cihcImJpbmRcIikrJz1cInRleHQ6IHN0YXJ0VGltZXpvbmUsIGludmlzaWJsZTogZW5kVGltZXpvbmVcIj48L3NwYW4+JykuYXBwZW5kVG8odCksZShcIjxzcGFuIFwiK0EuYXR0cihcImZvclwiKSsnPVwiJytuLmZpZWxkKydcIiBjbGFzcz1cImstaW52YWxpZC1tc2dcIi8+JykuaGlkZSgpLmFwcGVuZFRvKHQpfSxodD1mdW5jdGlvbih0LG4pe2UoXCI8ZGl2IFwiK0EuYXR0cihcImJpbmRcIikrJz1cInZhbHVlOicrbi5maWVsZCsnXCIgLz4nKS5hdHRyKHtuYW1lOm4uZmllbGR9KS5hcHBlbmRUbyh0KS5rZW5kb1JlY3VycmVuY2VFZGl0b3Ioe3N0YXJ0Om4ubW9kZWwuc3RhcnQsdGltZXpvbmU6bi50aW1lem9uZSxtZXNzYWdlczpuLm1lc3NhZ2VzfSl9LHB0PWZ1bmN0aW9uKHQsbil7ZShcIjxkaXYgXCIrQS5hdHRyKFwiYmluZFwiKSsnPVwidmFsdWU6JytuLmZpZWxkKydcIiAvPicpLmF0dHIoe25hbWU6bi5maWVsZH0pLmFwcGVuZFRvKHQpLmtlbmRvTW9iaWxlUmVjdXJyZW5jZUVkaXRvcih7c3RhcnQ6bi5tb2RlbC5zdGFydCx0aW1lem9uZTpuLnRpbWV6b25lLG1lc3NhZ2VzOm4ubWVzc2FnZXMscGFuZTpuLnBhbmUsdmFsdWU6bi5tb2RlbFtuLmZpZWxkXX0pfSxmdD1mdW5jdGlvbih0LGkpe3ZhciByPW4oaS5tb2RlbCxpLm1lc3NhZ2VzLm5vVGltZXpvbmUpO2UoJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJrLWJ1dHRvbiBrLXRpbWV6b25lLWJ1dHRvblwiIGRhdGEtYmluZD1cImludmlzaWJsZTppc0FsbERheVwiPicrcitcIjwvYT5cIikuY2xpY2soaS5jbGljaykuYXBwZW5kVG8odCl9LGd0PWZ1bmN0aW9uKHQsbil7ZSgnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImstYnV0dG9uXCIgZGF0YS1iaW5kPVwiaW52aXNpYmxlOmlzQWxsRGF5XCI+JytuLm1lc3NhZ2VzLnRpbWV6b25lRWRpdG9yQnV0dG9uK1wiPC9hPlwiKS5jbGljayhuLmNsaWNrKS5hcHBlbmRUbyh0KX0sbXQ9ZnVuY3Rpb24odCxuKXtlKFwiPGRpdiBcIitBLmF0dHIoXCJiaW5kXCIpKyc9XCJ2YWx1ZTonK24uZmllbGQrJ1wiIC8+JykuYXR0cih7bmFtZTpuLmZpZWxkfSkudG9nZ2xlKG4udmlzaWJsZSkuYXBwZW5kVG8odCkua2VuZG9Nb2JpbGVUaW1lem9uZUVkaXRvcih7b3B0aW9uTGFiZWw6bi5ub1RpbWV6b25lfSl9LHZ0PWZ1bmN0aW9uKHQsbil7ZShcIjxkaXYgXCIrQS5hdHRyKFwiYmluZFwiKSsnPVwidmFsdWU6JytuLmZpZWxkKydcIiAvPicpLmF0dHIoe25hbWU6bi5maWVsZH0pLnRvZ2dsZShuLnZpc2libGUpLmFwcGVuZFRvKHQpLmtlbmRvVGltZXpvbmVFZGl0b3Ioe29wdGlvbkxhYmVsOm4ubm9UaW1lem9uZX0pfSxfdD1BLkNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpPXQudGltZXpvbmU7dGhpcy5yZWFkZXI9bixuLm1vZGVsJiYodGhpcy5tb2RlbD1uLm1vZGVsKSx0aGlzLnRpbWV6b25lPWksdGhpcy5kYXRhPW8oZS5wcm94eSh0aGlzLmRhdGEsdGhpcyksaSksdGhpcy5zZXJpYWxpemU9YShlLnByb3h5KHRoaXMuc2VyaWFsaXplLHRoaXMpLGkpfSxlcnJvcnM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVhZGVyLmVycm9ycyhlKX0scGFyc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVhZGVyLnBhcnNlKGUpfSxkYXRhOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlYWRlci5kYXRhKGUpfSx0b3RhbDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZWFkZXIudG90YWwoZSl9LGdyb3VwczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZWFkZXIuZ3JvdXBzKGUpfSxhZ2dyZWdhdGVzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlYWRlci5hZ2dyZWdhdGVzKGUpfSxzZXJpYWxpemU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVhZGVyLnNlcmlhbGl6ZShlKX19KSx5dD1BLmRhdGEuTW9kZWwuZGVmaW5lKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7QS5kYXRhLk1vZGVsLmZuLmluaXQuY2FsbCh0LGUpLHQuX2RlZmF1bHRJZD10LmRlZmF1bHRzW3QuaWRGaWVsZF19LF90aW1lOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXNbZV0sbj1lK1wiVGltZVwiO3JldHVybiB0aGlzW25dP3RoaXNbbl0tQS5kYXRlLnRvVXRjVGltZShBLmRhdGUuZ2V0RGF0ZSh0KSk6eih0KX0sX2RhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZStcIlRpbWVcIjtyZXR1cm4gdGhpc1t0XT90aGlzW3RdLXRoaXMuX3RpbWUoZSk6QS5kYXRlLmdldERhdGUodGhpc1tlXSl9LGNsb25lOmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpcy51aWQscj1uZXcgdGhpcy5jb25zdHJ1Y3RvcihlLmV4dGVuZCh7fSx0aGlzLnRvSlNPTigpLHQpKTtyZXR1cm4gbnx8KHIudWlkPWkpLHJ9LGR1cmF0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbmQsdD10aGlzLnN0YXJ0LG49KGUuZ2V0VGltZXpvbmVPZmZzZXQoKS10LmdldFRpbWV6b25lT2Zmc2V0KCkpKkEuZGF0ZS5NU19QRVJfTUlOVVRFO3JldHVybiBlLXQtbn0sZXhwYW5kOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gRj9GLmV4cGFuZCh0aGlzLGUsdCxuKTpbdGhpc119LHVwZGF0ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSl0aGlzLnNldCh0LGVbdF0pO3RoaXMuc3RhcnRUaW1lJiZ0aGlzLnNldChcInN0YXJ0VGltZVwiLEEuZGF0ZS50b1V0Y1RpbWUodGhpcy5zdGFydCkpLHRoaXMuZW5kVGltZSYmdGhpcy5zZXQoXCJlbmRUaW1lXCIsQS5kYXRlLnRvVXRjVGltZSh0aGlzLmVuZCkpfSxpc011bHRpRGF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNBbGxEYXl8fHRoaXMuZHVyYXRpb24oKT49QS5kYXRlLk1TX1BFUl9EQVl9LGlzRXhjZXB0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNOZXcoKSYmdGhpcy5yZWN1cnJlbmNlSWR9LGlzT2NjdXJyZW5jZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTmV3KCkmJnRoaXMucmVjdXJyZW5jZUlkfSxpc1JlY3VycmluZzpmdW5jdGlvbigpe3JldHVybiEoIXRoaXMucmVjdXJyZW5jZVJ1bGUmJiF0aGlzLnJlY3VycmVuY2VJZCl9LGlzUmVjdXJyZW5jZUhlYWQ6ZnVuY3Rpb24oKXtyZXR1cm4hKCF0aGlzLmlkfHwhdGhpcy5yZWN1cnJlbmNlUnVsZSl9LHRvT2NjdXJyZW5jZTpmdW5jdGlvbih0KXtyZXR1cm4gdD1lLmV4dGVuZCh0LHtyZWN1cnJlbmNlRXhjZXB0aW9uOm51bGwscmVjdXJyZW5jZVJ1bGU6bnVsbCxyZWN1cnJlbmNlSWQ6dGhpcy5pZHx8dGhpcy5yZWN1cnJlbmNlSWR9KSx0W3RoaXMuaWRGaWVsZF09dGhpcy5kZWZhdWx0c1t0aGlzLmlkRmllbGRdLHRoaXMuY2xvbmUodCwhMCl9LHRvSlNPTjpmdW5jdGlvbigpe3ZhciBlPUEuZGF0YS5Nb2RlbC5mbi50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gZS51aWQ9dGhpcy51aWQsZGVsZXRlIGUuc3RhcnRUaW1lLGRlbGV0ZSBlLmVuZFRpbWUsZX0sc2hvdWxkU2VyaWFsaXplOmZ1bmN0aW9uKGUpe3JldHVybiBBLmRhdGEuTW9kZWwuZm4uc2hvdWxkU2VyaWFsaXplLmNhbGwodGhpcyxlKSYmXCJfZGVmYXVsdElkXCIhPT1lfSxzZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbz10aGlzLmlzQWxsRGF5fHwhMTtBLmRhdGEuTW9kZWwuZm4uc2V0LmNhbGwodGhpcyxlLHQpLFwiaXNBbGxEYXlcIj09ZSYmdCE9byYmKG49QS5kYXRlLmdldERhdGUodGhpcy5zdGFydCksaT1uZXcgRGF0ZSh0aGlzLmVuZCkscj1BLmRhdGUuZ2V0TWlsbGlzZWNvbmRzKGkpLDA9PT1yJiZ0JiYocj1QKSx0aGlzLnNldChcInN0YXJ0XCIsbiksdD09PSEwPyhBLmRhdGUuc2V0VGltZShpLC1yKSxuPmkmJihpPW4pKTpBLmRhdGUuc2V0VGltZShpLFAtciksdGhpcy5zZXQoXCJlbmRcIixpKSl9LGlkOlwiaWRcIixmaWVsZHM6e2lkOnt0eXBlOlwibnVtYmVyXCJ9LHRpdGxlOntkZWZhdWx0VmFsdWU6XCJcIix0eXBlOlwic3RyaW5nXCJ9LHN0YXJ0Ont0eXBlOlwiZGF0ZVwiLHZhbGlkYXRpb246e3JlcXVpcmVkOiEwfX0sc3RhcnRUaW1lem9uZTp7dHlwZTpcInN0cmluZ1wifSxlbmQ6e3R5cGU6XCJkYXRlXCIsdmFsaWRhdGlvbjp7cmVxdWlyZWQ6ITAsZGF0ZUNvbXBhcmU6e3ZhbHVlOmQsbWVzc2FnZTpcIkVuZCBkYXRlIHNob3VsZCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHN0YXJ0IGRhdGVcIn19fSxlbmRUaW1lem9uZTp7dHlwZTpcInN0cmluZ1wifSxyZWN1cnJlbmNlUnVsZTp7ZGVmYXVsdFZhbHVlOlwiXCIsdHlwZTpcInN0cmluZ1wifSxyZWN1cnJlbmNlRXhjZXB0aW9uOntkZWZhdWx0VmFsdWU6XCJcIix0eXBlOlwic3RyaW5nXCJ9LGlzQWxsRGF5Ont0eXBlOlwiYm9vbGVhblwiLGRlZmF1bHRWYWx1ZTohMX0sZGVzY3JpcHRpb246e3R5cGU6XCJzdHJpbmdcIn19fSksd3Q9Vi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7Vi5mbi5pbml0LmNhbGwodGhpcyxXKCEwLHt9LHtzY2hlbWE6e21vZGVsQmFzZTp5dCxtb2RlbDp5dH19LGUpKSx0aGlzLnJlYWRlcj1uZXcgX3QodGhpcy5vcHRpb25zLnNjaGVtYSx0aGlzLnJlYWRlcil9LGV4cGFuZDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMudmlldygpLGk9e307cmV0dXJuIGUmJnQmJih0PW5ldyBEYXRlKHQuZ2V0VGltZSgpK1AtMSksaT17bG9naWM6XCJvclwiLGZpbHRlcnM6W3tsb2dpYzpcImFuZFwiLGZpbHRlcnM6W3tmaWVsZDpcInN0YXJ0XCIsb3BlcmF0b3I6XCJndGVcIix2YWx1ZTplfSx7ZmllbGQ6XCJlbmRcIixvcGVyYXRvcjpcImd0ZVwiLHZhbHVlOmV9LHtmaWVsZDpcInN0YXJ0XCIsb3BlcmF0b3I6XCJsdGVcIix2YWx1ZTp0fV19LHtsb2dpYzpcImFuZFwiLGZpbHRlcnM6W3tmaWVsZDpcInN0YXJ0XCIsb3BlcmF0b3I6XCJsdGVcIix2YWx1ZTpuZXcgRGF0ZShlLmdldFRpbWUoKStQLTEpfSx7ZmllbGQ6XCJlbmRcIixvcGVyYXRvcjpcImd0ZVwiLHZhbHVlOmV9XX1dfSxuPW5ldyBBLmRhdGEuUXVlcnkodShuLGUsdCx0aGlzLnJlYWRlci50aW1lem9uZSkpLmZpbHRlcihpKS50b0FycmF5KCkpLG59LGNhbmNlbENoYW5nZXM6ZnVuY3Rpb24oZSl7ZSYmZS5pc09jY3VycmVuY2UoKSYmdGhpcy5fcmVtb3ZlRXhjZXB0aW9uRGF0ZShlKSxWLmZuLmNhbmNlbENoYW5nZXMuY2FsbCh0aGlzLGUpfSxpbnNlcnQ6ZnVuY3Rpb24oZSx0KXtpZih0KXtpZighKHQgaW5zdGFuY2VvZiB5dCkpe3ZhciBuPXQ7dD10aGlzLl9jcmVhdGVOZXdNb2RlbCgpLHQuYWNjZXB0KG4pfXJldHVybih0LmlzUmVjdXJyZW5jZUhlYWQoKXx8dC5yZWN1cnJlbmNlSWQpJiYodD10LnJlY3VycmVuY2VJZD90OnQudG9PY2N1cnJlbmNlKCksdGhpcy5fYWRkRXhjZXB0aW9uRGF0ZSh0KSksVi5mbi5pbnNlcnQuY2FsbCh0aGlzLGUsdCl9fSxyZW1vdmU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaXNSZWN1cnJlbmNlSGVhZCgpP3RoaXMuX3JlbW92ZUV4Y2VwdGlvbnMoZSk6ZS5pc1JlY3VycmluZygpJiZ0aGlzLl9hZGRFeGNlcHRpb25EYXRlKGUpLFYuZm4ucmVtb3ZlLmNhbGwodGhpcyxlKX0sX3JlbW92ZUV4Y2VwdGlvbnM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMuZGF0YSgpLnNsaWNlKDApLG49dC5zaGlmdCgpLGk9ZS5pZDtuOyluLnJlY3VycmVuY2VJZD09PWkmJlYuZm4ucmVtb3ZlLmNhbGwodGhpcyxuKSxuPXQuc2hpZnQoKTtlLnNldChpdCxcIlwiKX0sX3JlbW92ZUV4Y2VwdGlvbkRhdGU6ZnVuY3Rpb24oZSl7dmFyIHQsbjtlLnJlY3VycmVuY2VJZCYmKHQ9dGhpcy5nZXQoZS5yZWN1cnJlbmNlSWQpLHQmJihuPWUuc3RhcnQsdC5zZXQoaXQsdC5yZWN1cnJlbmNlRXhjZXB0aW9uLnJlcGxhY2UoRi50b0V4Y2VwdGlvblN0cmluZyhuLHRoaXMucmVhZGVyLnRpbWV6b25lKSxcIlwiKSkpKX0sX2FkZEV4Y2VwdGlvbkRhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdGFydCxuPXRoaXMucmVhZGVyLnRpbWV6b25lLGk9dGhpcy5nZXQoZS5yZWN1cnJlbmNlSWQpLHI9aS5yZWN1cnJlbmNlRXhjZXB0aW9ufHxcIlwiO0YuaXNFeGNlcHRpb24ocix0LG4pfHxpLnNldChpdCxyK0YudG9FeGNlcHRpb25TdHJpbmcodCxuKSl9fSk7d3QuY3JlYXRlPWZ1bmN0aW9uKGUpe2U9ZSYmZS5wdXNoP3tkYXRhOmV9OmU7dmFyIHQ9ZXx8e30sbj10LmRhdGE7aWYodC5kYXRhPW4sISh0IGluc3RhbmNlb2Ygd3QpJiZ0IGluc3RhbmNlb2YgQS5kYXRhLkRhdGFTb3VyY2UpdGhyb3cgRXJyb3IoXCJJbmNvcnJlY3QgRGF0YVNvdXJjZSB0eXBlLiBPbmx5IFNjaGVkdWxlckRhdGFTb3VyY2UgaW5zdGFuY2VzIGFyZSBzdXBwb3J0ZWRcIik7cmV0dXJuIHQgaW5zdGFuY2VvZiB3dD90Om5ldyB3dCh0KX0sVyghMCxBLmRhdGEse1NjaGVkdWxlckRhdGFTb3VyY2U6d3QsU2NoZWR1bGVyRGF0YVJlYWRlcjpfdCxTY2hlZHVsZXJFdmVudDp5dH0pLHY9e3VwZGF0ZTp7dGV4dDpcIlNhdmVcIixjbGFzc05hbWU6XCJrLXByaW1hcnkgay1zY2hlZHVsZXItdXBkYXRlXCJ9LGNhbmNlbGVkaXQ6e3RleHQ6XCJDYW5jZWxcIixjbGFzc05hbWU6XCJrLXNjaGVkdWxlci1jYW5jZWxcIn0sZGVzdHJveTp7dGV4dDpcIkRlbGV0ZVwiLGltYWdlQ2xhc3M6XCJrLWRlbGV0ZVwiLGNsYXNzTmFtZTpcImstcHJpbWFyeSBrLXNjaGVkdWxlci1kZWxldGVcIixpY29uQ2xhc3M6XCJrLWljb25cIn19LF89e21vYmlsZTp7ZGF0ZVJhbmdlOmR0LHRpbWV6b25lUG9wVXA6ZnQsdGltZXpvbmU6bXQscmVjdXJyZW5jZTpwdCxkZXNjcmlwdGlvbjonPHRleHRhcmVhIG5hbWU9XCJkZXNjcmlwdGlvblwiIGNsYXNzPVwiay10ZXh0Ym94XCIvPicsbXVsdGlwbGVSZXNvdXJjZXM6ZyxyZXNvdXJjZXM6cH0sZGVza3RvcDp7ZGF0ZVJhbmdlOnV0LHRpbWV6b25lUG9wVXA6Z3QsdGltZXpvbmU6dnQscmVjdXJyZW5jZTpodCxkZXNjcmlwdGlvbjonPHRleHRhcmVhIG5hbWU9XCJkZXNjcmlwdGlvblwiIGNsYXNzPVwiay10ZXh0Ym94XCIvPicsbXVsdGlwbGVSZXNvdXJjZXM6ZixyZXNvdXJjZXM6cH19LHk9QS5PYnNlcnZhYmxlLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe0EuT2JzZXJ2YWJsZS5mbi5pbml0LmNhbGwodGhpcyksdGhpcy5lbGVtZW50PWUsdGhpcy5vcHRpb25zPVcoITAse30sdGhpcy5vcHRpb25zLHQpLHRoaXMuY3JlYXRlQnV0dG9uPXRoaXMub3B0aW9ucy5jcmVhdGVCdXR0b24sdGhpcy50b2dnbGVEYXRlVmFsaWRhdGlvbkhhbmRsZXI9aih0aGlzLl90b2dnbGVEYXRlVmFsaWRhdGlvbix0aGlzKX0sX3RvZ2dsZURhdGVWYWxpZGF0aW9uOmZ1bmN0aW9uKHQpe2lmKFwiaXNBbGxEYXlcIj09dC5maWVsZCl7dmFyIG4saSxyLG89dGhpcy5jb250YWluZXIsYT10aGlzLmVkaXRhYmxlLm9wdGlvbnMubW9kZWwuaXNBbGxEYXkscz1BLmF0dHIoXCJiaW5kXCIpO28uZmluZChcIltcIitzK1wiKj1lbmRdLFtcIitzK1wiKj1zdGFydF1cIikuZWFjaChmdW5jdGlvbigpe249ZSh0aGlzKSx0dC50ZXN0KG4uYXR0cihzKSkmJihpPW4uaXMoXCJbXCIrQS5hdHRyKFwicm9sZVwiKStcIj1kYXRldGltZXBpY2tlcl0sW3R5cGUqPWRhdGV0aW1lXVwiKSxyPWEhPT1pLG4uYXR0cihBLmF0dHIoXCJ2YWxpZGF0ZVwiKSxyKSl9KX19LGZpZWxkczpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj10aGlzLG89ci5vcHRpb25zLm1lc3NhZ2VzLGE9ci5vcHRpb25zLnRpbWV6b25lLHM9ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHIuX2luaXRUaW1lem9uZUVkaXRvcih0LHRoaXMpfSxsPVt7ZmllbGQ6XCJ0aXRsZVwiLHRpdGxlOm8uZWRpdG9yLnRpdGxlfSx7ZmllbGQ6XCJzdGFydFwiLHRpdGxlOm8uZWRpdG9yLnN0YXJ0LGVkaXRvcjplLmRhdGVSYW5nZSx0aW1lem9uZTphfSx7ZmllbGQ6XCJlbmRcIix0aXRsZTpvLmVkaXRvci5lbmQsZWRpdG9yOmUuZGF0ZVJhbmdlLHRpbWV6b25lOmF9LHtmaWVsZDpcImlzQWxsRGF5XCIsdGl0bGU6by5lZGl0b3IuYWxsRGF5RXZlbnR9XTtBLnRpbWV6b25lLndpbmRvd3Nfem9uZXMmJihsLnB1c2goe2ZpZWxkOlwidGltZXpvbmVcIix0aXRsZTpvLmVkaXRvci50aW1lem9uZSxlZGl0b3I6ZS50aW1lem9uZVBvcFVwLGNsaWNrOnMsbWVzc2FnZXM6by5lZGl0b3IsbW9kZWw6dH0pLGwucHVzaCh7ZmllbGQ6XCJzdGFydFRpbWV6b25lXCIsdGl0bGU6by5lZGl0b3Iuc3RhcnRUaW1lem9uZSxlZGl0b3I6ZS50aW1lem9uZSxub1RpbWV6b25lOm8uZWRpdG9yLm5vVGltZXpvbmV9KSxsLnB1c2goe2ZpZWxkOlwiZW5kVGltZXpvbmVcIix0aXRsZTpvLmVkaXRvci5lbmRUaW1lem9uZSxlZGl0b3I6ZS50aW1lem9uZSxub1RpbWV6b25lOm8uZWRpdG9yLm5vVGltZXpvbmV9KSksdC5yZWN1cnJlbmNlSWR8fGwucHVzaCh7ZmllbGQ6XCJyZWN1cnJlbmNlUnVsZVwiLHRpdGxlOm8uZWRpdG9yLnJlcGVhdCxlZGl0b3I6ZS5yZWN1cnJlbmNlLHRpbWV6b25lOmEsbWVzc2FnZXM6by5yZWN1cnJlbmNlRWRpdG9yLHBhbmU6dGhpcy5wYW5lfSksXCJkZXNjcmlwdGlvblwiaW4gdCYmbC5wdXNoKHtmaWVsZDpcImRlc2NyaXB0aW9uXCIsdGl0bGU6by5lZGl0b3IuZGVzY3JpcHRpb24sZWRpdG9yOmUuZGVzY3JpcHRpb259KTtmb3Iobj0wO3RoaXMub3B0aW9ucy5yZXNvdXJjZXMubGVuZ3RoPm47bisrKWk9dGhpcy5vcHRpb25zLnJlc291cmNlc1tuXSxsLnB1c2goe2ZpZWxkOmkuZmllbGQsdGl0bGU6aS50aXRsZSxlZGl0b3I6aS5tdWx0aXBsZT9lLm11bHRpcGxlUmVzb3VyY2VzKGkpOmUucmVzb3VyY2VzKGkpfSk7cmV0dXJuIGx9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkaXRhYmxlLmVuZCgpfSxfYnVpbGRFZGl0VGVtcGxhdGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhLHM9dGhpcy5vcHRpb25zLm1lc3NhZ2VzLGw9Vyh7fSxBLlRlbXBsYXRlLHRoaXMub3B0aW9ucy50ZW1wbGF0ZVNldHRpbmdzKSxjPWwucGFyYW1OYW1lLGQ9dGhpcy5vcHRpb25zLmVkaXRhYmxlLnRlbXBsYXRlLHU9XCJcIjtpZihkKXR5cGVvZiBkPT09TyYmKGQ9d2luZG93LnVuZXNjYXBlKGQpKSx1Kz1BLnRlbXBsYXRlKGQsbCkoZSk7ZWxzZSBmb3IoaT0wLHI9dC5sZW5ndGg7cj5pO2krKylvPXRbaV0sXCJzdGFydFRpbWV6b25lXCI9PT1vLmZpZWxkJiYodSs9JzxkaXYgY2xhc3M9XCJrLXBvcHVwLWVkaXQtZm9ybSBrLXNjaGVkdWxlci1lZGl0LWZvcm0gay1zY2hlZHVsZXItdGltZXpvbmVzXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj4nLHUrPSc8ZGl2IGNsYXNzPVwiay1lZGl0LWZvcm0tY29udGFpbmVyXCI+Jyx1Kz0nPGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjwvZGl2PicsdSs9JzxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj48bGFiZWwgY2xhc3M9XCJrLWNoZWNrXCI+PGlucHV0IGNsYXNzPVwiay10aW1lem9uZS10b2dnbGVcIiB0eXBlPVwiY2hlY2tib3hcIiAvPicrcy5lZGl0b3Iuc2VwYXJhdGVUaW1lem9uZXMrXCI8L2xhYmVsPjwvZGl2PlwiKSx1Kz0nPGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbCBmb3I9XCInK28uZmllbGQrJ1wiPicrKG8udGl0bGV8fG8uZmllbGR8fFwiXCIpK1wiPC9sYWJlbD48L2Rpdj5cIiwhZS5lZGl0YWJsZXx8ZS5lZGl0YWJsZShvLmZpZWxkKT8obi5wdXNoKG8pLHUrPVwiPGRpdiBcIitBLmF0dHIoXCJjb250YWluZXItZm9yXCIpKyc9XCInK28uZmllbGQrJ1wiIGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PC9kaXY+Jyk6KGE9XCIjOlwiLG8uZmllbGQ/KG89QS5leHByKG8uZmllbGQsYyksYSs9bytcIj09bnVsbD8nJzpcIitvKTphKz1cIicnXCIsYSs9XCIjXCIsYT1BLnRlbXBsYXRlKGEsbCksdSs9JzxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj4nK2EoZSkrXCI8L2Rpdj5cIiksXCJlbmRUaW1lem9uZVwiPT09by5maWVsZCYmKHUrPXRoaXMuX2NyZWF0ZUVuZFRpbWV6b25lQnV0dG9uKCkpO3JldHVybiB1fSxfY3JlYXRlRW5kVGltZXpvbmVCdXR0b246ZnVuY3Rpb24oKXtyZXR1cm5cIjwvZGl2PjwvZGl2PlwifSxfcmV2ZXJ0VGltZXpvbmVzOmZ1bmN0aW9uKGUpe2Uuc2V0KFwic3RhcnRUaW1lem9uZVwiLHRoaXMuX3N0YXJ0VGltZXpvbmUpLGUuc2V0KFwiZW5kVGltZXpvbmVcIix0aGlzLl9lbmRUaW1lem9uZSksZGVsZXRlIHRoaXMuX3N0YXJ0VGltZXpvbmUsZGVsZXRlIHRoaXMuX2VuZFRpbWV6b25lfX0pLHc9eS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt5LmZuLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMucGFuZT1BLm1vYmlsZS51aS5QYW5lLndyYXAodGhpcy5lbGVtZW50KSx0aGlzLnBhbmUuZWxlbWVudC5wYXJlbnQoKS5jc3MoXCJoZWlnaHRcIix0aGlzLm9wdGlvbnMuaGVpZ2h0KSx0aGlzLnZpZXc9dGhpcy5wYW5lLnZpZXcoKSx0aGlzLl9hY3Rpb25TaGVldEJ1dHRvblRlbXBsYXRlPUEudGVtcGxhdGUoJzxsaT48YSAjPWF0dHIjIGNsYXNzPVwiay1idXR0b24gIz1jbGFzc05hbWUjXCIgaHJlZj1cIlxcXFwjXCI+Izp0ZXh0IzwvYT48L2xpPicpLHRoaXMuX2FjdGlvblNoZWV0UG9wdXBPcHRpb25zPWUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5oYXNDbGFzcyhcImttLXJvb3RcIik/e21vZGFsOiExfTp7YWxpZ246XCJib3R0b20gY2VudGVyXCIscG9zaXRpb246XCJib3R0b20gY2VudGVyXCIsZWZmZWN0Olwic2xpZGVJbjp1cFwifX0sb3B0aW9uczp7YW5pbWF0aW9uczp7bGVmdDpcInNsaWRlXCIscmlnaHQ6XCJzbGlkZTpyaWdodFwifX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuY2xvc2UoKSx0aGlzLnVuYmluZCgpLHRoaXMucGFuZS5kZXN0cm95KCl9LF9pbml0VGltZXpvbmVFZGl0b3I6ZnVuY3Rpb24odCl7dmFyIGkscj10aGlzLG89ci5wYW5lLGE9ci5vcHRpb25zLm1lc3NhZ2VzLHM9ci50aW1lem9uZVZpZXcsbD1yLmNvbnRhaW5lci5maW5kKFwiLmstc2NoZWR1bGVyLXRpbWV6b25lc1wiKSxjPWwuZmluZChcIi5rLXRpbWV6b25lLXRvZ2dsZVwiKSxkPWwuZmluZChcIi5rLWVkaXQtbGFiZWw6bGFzdFwiKS5hZGQobC5maW5kKFwiLmstZWRpdC1maWVsZDpsYXN0XCIpKSx1PWZ1bmN0aW9uKGUpe2lmKFwic3RhcnRUaW1lem9uZVwiPT09ZS5maWVsZCl7dmFyIG49dC5zdGFydFRpbWV6b25lO2MucHJvcChcImRpc2FibGVkXCIsIW4pLG58fChkLmhpZGUoKSx0LnNldChcImVuZFRpbWV6b25lXCIsXCJcIiksYy5wcm9wKFwiY2hlY2tlZFwiLCExKSl9fTtyLl9zdGFydFRpbWV6b25lPXQuc3RhcnRUaW1lem9uZXx8XCJcIixyLl9lbmRUaW1lem9uZT10LmVuZFRpbWV6b25lfHxcIlwiLHN8fChpPSc8ZGl2IGRhdGEtcm9sZT1cInZpZXdcIiBjbGFzcz1cImstcG9wdXAtZWRpdC1mb3JtIGstc2NoZWR1bGVyLWVkaXQtZm9ybSBrLW1vYmlsZS1saXN0XCI+PGRpdiBkYXRhLXJvbGU9XCJoZWFkZXJcIiBjbGFzcz1cImstaGVhZGVyXCI+PGEgaHJlZj1cIiNcIiBjbGFzcz1cImstYnV0dG9uIGstc2NoZWR1bGVyLWNhbmNlbFwiPicrYS5jYW5jZWwrXCI8L2E+XCIrYS5lZGl0b3IudGltZXpvbmVUaXRsZSsnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImstYnV0dG9uIGstc2NoZWR1bGVyLXVwZGF0ZVwiPicrYS5zYXZlK1wiPC9hPjwvZGl2PjwvZGl2PlwiLHRoaXMudGltZXpvbmVWaWV3PXM9by5hcHBlbmQoaSkscy5jb250ZW50RWxlbWVudCgpLmFwcGVuZChsLnNob3coKSkscy5lbGVtZW50Lm9uKFkrJCxcIi5rLXNjaGVkdWxlci1jYW5jZWwsIC5rLXNjaGVkdWxlci11cGRhdGVcIixmdW5jdGlvbihpKXt2YXIgcyxsO2kucHJldmVudERlZmF1bHQoKSxpLnN0b3BQcm9wYWdhdGlvbigpLGUodGhpcykuaGFzQ2xhc3MoXCJrLXNjaGVkdWxlci1jYW5jZWxcIikmJnIuX3JldmVydFRpbWV6b25lcyh0KSx0LnVuYmluZChcImNoYW5nZVwiLHUpLHM9by5lbGVtZW50LmZpbmQoXCIjZWRpdFwiKS5kYXRhKFwia2VuZG9Nb2JpbGVWaWV3XCIpLGw9bih0LGEuZWRpdG9yLm5vVGltZXpvbmUpLHMuY29udGVudEVsZW1lbnQoKS5maW5kKFwiLmstdGltZXpvbmUtYnV0dG9uXCIpLnRleHQobCksby5uYXZpZ2F0ZShzLHIub3B0aW9ucy5hbmltYXRpb25zLnJpZ2h0KX0pLGMuY2xpY2soZnVuY3Rpb24oKXtkLnRvZ2dsZShjLnByb3AoXCJjaGVja2VkXCIpKSx0LnNldChcImVuZFRpbWV6b25lXCIsXCJcIil9KSx0LmJpbmQoXCJjaGFuZ2VcIix1KSksYy5wcm9wKFwiY2hlY2tlZFwiLHQuZW5kVGltZXpvbmUpLnByb3AoXCJkaXNhYmxlZFwiLCF0LnN0YXJ0VGltZXpvbmUpLHQuZW5kVGltZXpvbmU/ZC5zaG93KCk6ZC5oaWRlKCksby5uYXZpZ2F0ZShzLHIub3B0aW9ucy5hbmltYXRpb25zLmxlZnQpfSxfY3JlYXRlQWN0aW9uU2hlZXRCdXR0b246ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGVtcGxhdGU9dGhpcy5fYWN0aW9uU2hlZXRCdXR0b25UZW1wbGF0ZSx0aGlzLmNyZWF0ZUJ1dHRvbihlKX0sc2hvd0RpYWxvZzpmdW5jdGlvbih0KXt2YXIgbixpLHI9XCJcIixvPSc8dWw+PGxpIGNsYXNzPVwia20tYWN0aW9uc2hlZXQtdGl0bGVcIj4nK3QudGl0bGUrXCI8L2xpPlwiLGE9dGhpcy5lbGVtZW50LmZpbmQoXCIuay1ldmVudFtcIitBLmF0dHIoXCJ1aWRcIikrXCI9J1wiK3QubW9kZWwudWlkK1wiJ11cIik7Zm9yKHRoaXMuY29udGFpbmVyJiYoYT10aGlzLmNvbnRhaW5lci5maW5kKFwiLmstc2NoZWR1bGVyLWRlbGV0ZVwiKSxhWzBdJiYocj1cInBob25lXCIpKSxuPTA7dC5idXR0b25zLmxlbmd0aD5uO24rKylvKz10aGlzLl9jcmVhdGVBY3Rpb25TaGVldEJ1dHRvbih0LmJ1dHRvbnNbbl0pO1xubys9XCI8L3VsPlwiLGk9ZShvKS5hcHBlbmRUbyh0aGlzLnBhbmUudmlldygpLmVsZW1lbnQpLmtlbmRvTW9iaWxlQWN0aW9uU2hlZXQoe3R5cGU6cixjYW5jZWw6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLmNhbmNlbCxjYW5jZWxUZW1wbGF0ZTonPGxpIGNsYXNzPVwia20tYWN0aW9uc2hlZXQtY2FuY2VsXCI+PGEgY2xhc3M9XCJrLWJ1dHRvblwiIGhyZWY9XCJcXFxcI1wiPiM6Y2FuY2VsIzwvYT48L2xpPicsY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLmRlc3Ryb3koKX0sY29tbWFuZDpmdW5jdGlvbihuKXt2YXIgcj1pLmVsZW1lbnQuZmluZChcImxpOm5vdCgua20tYWN0aW9uc2hlZXQtY2FuY2VsKSA+IC5rLWJ1dHRvblwiKS5pbmRleChlKG4uY3VycmVudFRhcmdldCkpO3I+LTEmJihpLmNsb3NlKCksdC5idXR0b25zW3JdLmNsaWNrKCkpfSxwb3B1cDp0aGlzLl9hY3Rpb25TaGVldFBvcHVwT3B0aW9uc30pLmRhdGEoXCJrZW5kb01vYmlsZUFjdGlvblNoZWV0XCIpLGkub3BlbihhKX0sZWRpdEV2ZW50OmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvLGEscz10aGlzLnBhbmUsbD1cIlwiLGM9dGhpcy5vcHRpb25zLm1lc3NhZ2VzLGQ9Yy5zYXZlLHU9Yy5kZXN0cm95LGg9Yy5jYW5jZWwscD1jLmVkaXRvci5lZGl0b3JUaXRsZTtyZXR1cm4gbCs9JzxkaXYgZGF0YS1yb2xlPVwidmlld1wiIGNsYXNzPVwiay1wb3B1cC1lZGl0LWZvcm0gay1zY2hlZHVsZXItZWRpdC1mb3JtIGstbW9iaWxlLWxpc3RcIiBpZD1cImVkaXRcIiAnK0EuYXR0cihcInVpZFwiKSsnPVwiJyt0LnVpZCsnXCI+PGRpdiBkYXRhLXJvbGU9XCJoZWFkZXJcIiBjbGFzcz1cImstaGVhZGVyXCI+PGEgaHJlZj1cIiNcIiBjbGFzcz1cImstYnV0dG9uIGstc2NoZWR1bGVyLWNhbmNlbFwiPicraCtcIjwvYT5cIitwKyc8YSBocmVmPVwiI1wiIGNsYXNzPVwiay1idXR0b24gay1zY2hlZHVsZXItdXBkYXRlXCI+JytkK1wiPC9hPjwvZGl2PlwiLG49dGhpcy5maWVsZHMoXy5tb2JpbGUsdCksaT10aGlzLHI9W10sbCs9dGhpcy5fYnVpbGRFZGl0VGVtcGxhdGUodCxuLHIpLCF0LmlzTmV3KCkmJnRoaXMub3B0aW9ucy5lZGl0YWJsZSYmdGhpcy5vcHRpb25zLmVkaXRhYmxlLmRlc3Ryb3khPT0hMSYmKGwrPSc8ZGl2IGNsYXNzPVwiay1lZGl0LWJ1dHRvbnNcIj48YSBocmVmPVwiI1wiIGNsYXNzPVwiay1zY2hlZHVsZXItZGVsZXRlIGstYnV0dG9uXCI+Jyt1K1wiPC9hPjwvZGl2PlwiKSxsKz1cIjwvZGl2PlwiLG89cy5hcHBlbmQobCksYT10aGlzLmNvbnRhaW5lcj1vLmVsZW1lbnQsdGhpcy5lZGl0YWJsZT1hLmtlbmRvRWRpdGFibGUoe2ZpZWxkczpyLG1vZGVsOnQsY2xlYXJDb250YWluZXI6ITEsdGFyZ2V0Omkub3B0aW9ucy50YXJnZXQsdmFsaWRhdGVPbkJsdXI6ITB9KS5kYXRhKFwia2VuZG9FZGl0YWJsZVwiKSxhLmZpbmQoXCJpbnB1dFt0eXBlPWNoZWNrYm94XSxpbnB1dFt0eXBlPXJhZGlvXVwiKS5wYXJlbnQoXCIuay1lZGl0LWZpZWxkXCIpLmFkZENsYXNzKFwiay1jaGVja1wiKS5wcmV2KFwiLmstZWRpdC1sYWJlbFwiKS5hZGRDbGFzcyhcImstY2hlY2tcIikuY2xpY2soZnVuY3Rpb24oKXtlKHRoaXMpLm5leHQoKS5jaGlsZHJlbihcImlucHV0XCIpLmNsaWNrKCl9KSx0aGlzLnRyaWdnZXIoXCJlZGl0XCIse2NvbnRhaW5lcjphLG1vZGVsOnR9KT90aGlzLnRyaWdnZXIoXCJjYW5jZWxcIix7Y29udGFpbmVyOmEsbW9kZWw6dH0pOihhLm9uKFkrJCxcImEuay1zY2hlZHVsZXItZWRpdCwgYS5rLXNjaGVkdWxlci1jYW5jZWwsIGEuay1zY2hlZHVsZXItdXBkYXRlLCBhLmstc2NoZWR1bGVyLWRlbGV0ZVwiLGZ1bmN0aW9uKG4pe3ZhciByLG87bi5wcmV2ZW50RGVmYXVsdCgpLG4uc3RvcFByb3BhZ2F0aW9uKCkscj1lKHRoaXMpLHIuaGFzQ2xhc3MoXCJrLXNjaGVkdWxlci1lZGl0XCIpP3MubmF2aWdhdGUoXCIjZWRpdFwiLGkub3B0aW9ucy5hbmltYXRpb25zLnJpZ2h0KToobz1cImNhbmNlbFwiLHIuaGFzQ2xhc3MoXCJrLXNjaGVkdWxlci11cGRhdGVcIik/bz1cInNhdmVcIjpyLmhhc0NsYXNzKFwiay1zY2hlZHVsZXItZGVsZXRlXCIpJiYobz1cInJlbW92ZVwiKSxpLnRyaWdnZXIobyx7Y29udGFpbmVyOmEsbW9kZWw6dH0pKX0pLHMubmF2aWdhdGUobyxpLm9wdGlvbnMuYW5pbWF0aW9ucy5sZWZ0KSx0LmJpbmQoXCJjaGFuZ2VcIixpLnRvZ2dsZURhdGVWYWxpZGF0aW9uSGFuZGxlcikpLHRoaXMuZWRpdGFibGV9LF92aWV3czpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhbmUuZWxlbWVudC5maW5kKEEucm9sZVNlbGVjdG9yKFwidmlld1wiKSkubm90KHRoaXMudmlldy5lbGVtZW50KX0sY2xvc2U6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saTtpZih0aGlzLmNvbnRhaW5lcil7Zm9yKHRoaXMucGFuZS5uYXZpZ2F0ZShcIlwiLHRoaXMub3B0aW9ucy5hbmltYXRpb25zLnJpZ2h0KSxlPXRoaXMuX3ZpZXdzKCksbj0wLGk9ZS5sZW5ndGg7aT5uO24rKyl0PWUuZXEobikuZGF0YShcImtlbmRvTW9iaWxlVmlld1wiKSx0JiZ0LnB1cmdlKCk7ZS5yZW1vdmUoKSx0aGlzLmNvbnRhaW5lcj1udWxsLHRoaXMuZWRpdGFibGUmJih0aGlzLmVkaXRhYmxlLm9wdGlvbnMubW9kZWwudW5iaW5kKFwiY2hhbmdlXCIsdGhpcy50b2dnbGVEYXRlVmFsaWRhdGlvbkhhbmRsZXIpLHRoaXMuZWRpdGFibGUuZGVzdHJveSgpLHRoaXMuZWRpdGFibGU9bnVsbCksdGhpcy50aW1lem9uZVZpZXc9bnVsbH19fSksYj15LmV4dGVuZCh7ZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuY2xvc2UoKSx0aGlzLnVuYmluZCgpfSxlZGl0RXZlbnQ6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG89dGhpcyxhPW8ub3B0aW9ucy5lZGl0YWJsZSxzPVwiPGRpdiBcIitBLmF0dHIoXCJ1aWRcIikrJz1cIicrdC51aWQrJ1wiIGNsYXNzPVwiay1wb3B1cC1lZGl0LWZvcm0gay1zY2hlZHVsZXItZWRpdC1mb3JtXCI+PGRpdiBjbGFzcz1cImstZWRpdC1mb3JtLWNvbnRhaW5lclwiPicsbD1vLm9wdGlvbnMubWVzc2FnZXMsYz1sLnNhdmUsZD1sLmNhbmNlbCx1PWwuZGVzdHJveSxoPXRoaXMuZmllbGRzKF8uZGVza3RvcCx0KSxwPVtdO3JldHVybiBzKz10aGlzLl9idWlsZEVkaXRUZW1wbGF0ZSh0LGgscCksaT1VKGEpP2Eud2luZG93Ont9LHMrPSc8ZGl2IGNsYXNzPVwiay1lZGl0LWJ1dHRvbnMgay1zdGF0ZS1kZWZhdWx0XCI+JyxzKz10aGlzLmNyZWF0ZUJ1dHRvbih7bmFtZTpcInVwZGF0ZVwiLHRleHQ6YyxhdHRyOm59KSt0aGlzLmNyZWF0ZUJ1dHRvbih7bmFtZTpcImNhbmNlbGVkaXRcIix0ZXh0OmQsYXR0cjpufSksdC5pc05ldygpfHxhLmRlc3Ryb3k9PT0hMXx8KHMrPXRoaXMuY3JlYXRlQnV0dG9uKHtuYW1lOlwiZGVsZXRlXCIsdGV4dDp1LGF0dHI6bn0pKSxzKz1cIjwvZGl2PjwvZGl2PjwvZGl2PlwiLHI9dGhpcy5jb250YWluZXI9ZShzKS5hcHBlbmRUbyhvLmVsZW1lbnQpLmVxKDApLmtlbmRvV2luZG93KFcoe21vZGFsOiEwLHJlc2l6YWJsZTohMSxkcmFnZ2FibGU6ITAsdGl0bGU6bC5lZGl0b3IuZWRpdG9yVGl0bGUsdmlzaWJsZTohMSxjbG9zZTpmdW5jdGlvbihlKXtlLnVzZXJUcmlnZ2VyZWQmJm8udHJpZ2dlcihRLHtjb250YWluZXI6cixtb2RlbDp0fSkmJmUucHJldmVudERlZmF1bHQoKX19LGkpKSxvLmVkaXRhYmxlPXIua2VuZG9FZGl0YWJsZSh7ZmllbGRzOnAsbW9kZWw6dCxjbGVhckNvbnRhaW5lcjohMSx2YWxpZGF0ZU9uQmx1cjohMCx0YXJnZXQ6by5vcHRpb25zLnRhcmdldH0pLmRhdGEoXCJrZW5kb0VkaXRhYmxlXCIpLG8udHJpZ2dlcihldCx7Y29udGFpbmVyOnIsbW9kZWw6dH0pP28udHJpZ2dlcihRLHtjb250YWluZXI6cixtb2RlbDp0fSk6KHIuZGF0YShcImtlbmRvV2luZG93XCIpLmNlbnRlcigpLm9wZW4oKSxyLm9uKFkrJCxcImEuay1zY2hlZHVsZXItY2FuY2VsXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksby50cmlnZ2VyKFEse2NvbnRhaW5lcjpyLG1vZGVsOnR9KX0pLHIub24oWSskLFwiYS5rLXNjaGVkdWxlci11cGRhdGVcIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSxvLnRyaWdnZXIoXCJzYXZlXCIse2NvbnRhaW5lcjpyLG1vZGVsOnR9KX0pLHIub24oWSskLFwiYS5rLXNjaGVkdWxlci1kZWxldGVcIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSxvLnRyaWdnZXIoWCx7Y29udGFpbmVyOnIsbW9kZWw6dH0pfSksdC5iaW5kKFwiY2hhbmdlXCIsby50b2dnbGVEYXRlVmFsaWRhdGlvbkhhbmRsZXIpKSxvLmVkaXRhYmxlfSxjbG9zZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1mdW5jdGlvbigpe2UuZWRpdGFibGUmJihlLmVkaXRhYmxlLm9wdGlvbnMubW9kZWwudW5iaW5kKFwiY2hhbmdlXCIsZS50b2dnbGVEYXRlVmFsaWRhdGlvbkhhbmRsZXIpLGUuZWRpdGFibGUuZGVzdHJveSgpLGUuZWRpdGFibGU9bnVsbCxlLmNvbnRhaW5lcj1udWxsKSxlLnBvcHVwJiYoZS5wb3B1cC5kZXN0cm95KCksZS5wb3B1cD1udWxsKX07ZS5lZGl0YWJsZT8oZS5fdGltZXpvbmVQb3B1cCYmZS5fdGltZXpvbmVQb3B1cC5kYXRhKFwia2VuZG9XaW5kb3dcIikmJihlLl90aW1lem9uZVBvcHVwLmRhdGEoXCJrZW5kb1dpbmRvd1wiKS5kZXN0cm95KCksZS5fdGltZXpvbmVQb3B1cD1udWxsKSxlLmNvbnRhaW5lci5pcyhcIjp2aXNpYmxlXCIpP2UuY29udGFpbmVyLmRhdGEoXCJrZW5kb1dpbmRvd1wiKS5iaW5kKFwiZGVhY3RpdmF0ZVwiLHQpLmNsb3NlKCk6dCgpKTp0KCl9LF9jcmVhdGVFbmRUaW1lem9uZUJ1dHRvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5tZXNzYWdlcyx0PVwiXCI7cmV0dXJuIHQrPSc8ZGl2IGNsYXNzPVwiay1lZGl0LWJ1dHRvbnMgay1zdGF0ZS1kZWZhdWx0XCI+Jyx0Kz10aGlzLmNyZWF0ZUJ1dHRvbih7bmFtZTpcInNhdmV0aW1lem9uZVwiLHRleHQ6ZS5zYXZlfSkrdGhpcy5jcmVhdGVCdXR0b24oe25hbWU6XCJjYW5jZWx0aW1lem9uZVwiLHRleHQ6ZS5jYW5jZWx9KSx0Kz1cIjwvZGl2PjwvZGl2PjwvZGl2PlwifSxzaG93RGlhbG9nOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvPUEuZm9ybWF0KFwiPGRpdiBjbGFzcz0nay1wb3B1cC1lZGl0LWZvcm0nPjxkaXYgY2xhc3M9J2stZWRpdC1mb3JtLWNvbnRhaW5lcic+PHAgY2xhc3M9J2stcG9wdXAtbWVzc2FnZSc+ezB9PC9wPlwiLHQudGV4dCk7Zm9yKG8rPSc8ZGl2IGNsYXNzPVwiay1lZGl0LWJ1dHRvbnMgay1zdGF0ZS1kZWZhdWx0XCI+JyxuPTA7dC5idXR0b25zLmxlbmd0aD5uO24rKylvKz10aGlzLmNyZWF0ZUJ1dHRvbih0LmJ1dHRvbnNbbl0pO28rPVwiPC9kaXY+PC9kaXY+PC9kaXY+XCIsaT10aGlzLmVsZW1lbnQsdGhpcy5wb3B1cCYmdGhpcy5wb3B1cC5kZXN0cm95KCkscj10aGlzLnBvcHVwPWUobykuYXBwZW5kVG8oaSkuZXEoMCkub24oXCJjbGlja1wiLFwiLmstYnV0dG9uXCIsZnVuY3Rpb24obil7bi5wcmV2ZW50RGVmYXVsdCgpLHIuY2xvc2UoKTt2YXIgaT1lKG4uY3VycmVudFRhcmdldCkuaW5kZXgoKTt0LmJ1dHRvbnNbaV0uY2xpY2soKX0pLmtlbmRvV2luZG93KHttb2RhbDohMCxyZXNpemFibGU6ITEsZHJhZ2dhYmxlOiExLHRpdGxlOnQudGl0bGUsdmlzaWJsZTohMSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuZGVzdHJveSgpLGkuZm9jdXMoKX19KS5nZXRLZW5kb1dpbmRvdygpLHIuY2VudGVyKCkub3BlbigpfSxfaW5pdFRpbWV6b25lRWRpdG9yOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzLHI9aS5jb250YWluZXIuZmluZChcIi5rLXNjaGVkdWxlci10aW1lem9uZXNcIiksbz1yLmZpbmQoXCIuay10aW1lem9uZS10b2dnbGVcIiksYT1yLmZpbmQoXCIuay1lZGl0LWxhYmVsOmxhc3RcIikuYWRkKHIuZmluZChcIi5rLWVkaXQtZmllbGQ6bGFzdFwiKSkscz1yLmZpbmQoXCIuay1zY2hlZHVsZXItc2F2ZXRpbWV6b25lXCIpLGw9ci5maW5kKFwiLmstc2NoZWR1bGVyLWNhbmNlbHRpbWV6b25lXCIpLGM9aS5fdGltZXpvbmVQb3B1cCxkPWZ1bmN0aW9uKHQpe2lmKFwic3RhcnRUaW1lem9uZVwiPT09dC5maWVsZCl7dmFyIG49ZS5zdGFydFRpbWV6b25lO28ucHJvcChcImRpc2FibGVkXCIsIW4pLG58fChhLmhpZGUoKSxlLnNldChcImVuZFRpbWV6b25lXCIsXCJcIiksby5wcm9wKFwiY2hlY2tlZFwiLCExKSl9fTtpLl9zdGFydFRpbWV6b25lPWUuc3RhcnRUaW1lem9uZSxpLl9lbmRUaW1lem9uZT1lLmVuZFRpbWV6b25lLGN8fChpLl90aW1lem9uZVBvcHVwPWM9ci5rZW5kb1dpbmRvdyh7bW9kYWw6ITAscmVzaXphYmxlOiExLGRyYWdnYWJsZTohMCx0aXRsZTppLm9wdGlvbnMubWVzc2FnZXMuZWRpdG9yLnRpbWV6b25lRWRpdG9yVGl0bGUsdmlzaWJsZTohMSxjbG9zZTpmdW5jdGlvbihuKXtlLnVuYmluZChcImNoYW5nZVwiLGQpLG4udXNlclRyaWdnZXJlZCYmaS5fcmV2ZXJ0VGltZXpvbmVzKGUpLHQmJnQuZm9jdXMoKX19KSxvLmNsaWNrKGZ1bmN0aW9uKCl7YS50b2dnbGUoby5wcm9wKFwiY2hlY2tlZFwiKSksZS5zZXQoXCJlbmRUaW1lem9uZVwiLFwiXCIpfSkscy5jbGljayhmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksbi5jbG9zZSgpfSksbC5jbGljayhmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksaS5fcmV2ZXJ0VGltZXpvbmVzKGUpLG4uY2xvc2UoKX0pLGUuYmluZChcImNoYW5nZVwiLGQpKSxvLnByb3AoXCJjaGVja2VkXCIsZS5lbmRUaW1lem9uZSkucHJvcChcImRpc2FibGVkXCIsIWUuc3RhcnRUaW1lem9uZSksZS5lbmRUaW1lem9uZT9hLnNob3coKTphLmhpZGUoKSxuPWMuZGF0YShcImtlbmRvV2luZG93XCIpLG4uY2VudGVyKCkub3BlbigpfX0pLGs9TC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzO0wuZm4uaW5pdC5jYWxsKGksdCxuKSxpLm9wdGlvbnMudmlld3MmJmkub3B0aW9ucy52aWV3cy5sZW5ndGh8fChpLm9wdGlvbnMudmlld3M9W1wiZGF5XCIsXCJ3ZWVrXCJdKSxpLnJlc291cmNlcz1bXSxpLl9pbml0TW9kZWwoKSxpLl93cmFwcGVyKCksaS5fdmlld3MoKSxpLl90b29sYmFyKCksaS5fZGF0YVNvdXJjZSgpLGkuX3Jlc291cmNlcygpLGkuX3Jlc2l6ZUhhbmRsZXI9aihpLnJlc2l6ZSxpKSxpLndyYXBwZXIub24oXCJtb3VzZWRvd25cIiskK1wiIHNlbGVjdHN0YXJ0XCIrJCxmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCl9KSxpLm9wdGlvbnMuZWRpdGFibGUmJmkub3B0aW9ucy5lZGl0YWJsZS5yZXNpemUhPT0hMSYmaS5fcmVzaXphYmxlKCksaS5fbW92YWJsZSgpLGUod2luZG93KS5vbihcInJlc2l6ZVwiKyQsaS5fcmVzaXplSGFuZGxlciksaS5vcHRpb25zLm1lc3NhZ2VzJiZpLm9wdGlvbnMubWVzc2FnZXMucmVjdXJyZW5jZSYmKEYub3B0aW9ucz1pLm9wdGlvbnMubWVzc2FnZXMucmVjdXJyZW5jZSksaS5fc2VsZWN0YWJsZSgpLGkuX2FyaWFJZD1BLmd1aWQoKSxpLl9jcmVhdGVFZGl0b3IoKX0sX2lzTW9iaWxlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zO3JldHVybiBlLm1vYmlsZT09PSEwJiZBLnN1cHBvcnQubW9iaWxlT1N8fFwicGhvbmVcIj09PWUubW9iaWxlfHxcInRhYmxldFwiPT09ZS5tb2JpbGV9LF9pc01vYmlsZVBob25lVmlldzpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucztyZXR1cm4gZS5tb2JpbGU9PT0hMCYmQS5zdXBwb3J0Lm1vYmlsZU9TJiYhQS5zdXBwb3J0Lm1vYmlsZU9TLnRhYmxldHx8XCJwaG9uZVwiPT09ZS5tb2JpbGV9LF9zZWxlY3RhYmxlOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi53cmFwcGVyLHI9QS5zdXBwb3J0Lm1vYmlsZU9TP1widG91Y2hlbmRcIjpcIm1vdXNlZG93blwiO24ub3B0aW9ucy5zZWxlY3RhYmxlJiYobi5fdGFiaW5kZXgoKSxpLm9uKHIrJCxcIi5rLXNjaGVkdWxlci1oZWFkZXItYWxsLWRheSB0ZCwgLmstc2NoZWR1bGVyLWNvbnRlbnQgdGQsIC5rLWV2ZW50XCIsZnVuY3Rpb24oZSl7dmFyIHQ9ZS53aGljaCxyPWUuYnV0dG9uLG89QS5zdXBwb3J0LmJyb3dzZXIsYT10JiYzPT09dHx8ciYmMj09cjtBLnN1cHBvcnQubW9iaWxlT1MmJmUuaXNEZWZhdWx0UHJldmVudGVkKCl8fChhfHxuLl9jcmVhdGVTZWxlY3Rpb24oZS5jdXJyZW50VGFyZ2V0KSxpLmZvY3VzKCksby5tc2llJiY5Pm8udmVyc2lvbiYmc2V0VGltZW91dChmdW5jdGlvbigpe2kuZm9jdXMoKX0pKX0pLHQ9ZS5wcm94eShuLl9tb3VzZU1vdmUsbiksaS5vbihcIm1vdXNlZG93blwiKyQsXCIuay1zY2hlZHVsZXItaGVhZGVyLWFsbC1kYXkgdGQsIC5rLXNjaGVkdWxlci1jb250ZW50IHRkXCIsZnVuY3Rpb24oZSl7dmFyIG49ZS53aGljaCxyPWUuYnV0dG9uLG89biYmMz09PW58fHImJjI9PXI7b3x8aS5vbihcIm1vdXNlbW92ZVwiKyQsXCIuay1zY2hlZHVsZXItaGVhZGVyLWFsbC1kYXkgdGQsIC5rLXNjaGVkdWxlci1jb250ZW50IHRkXCIsdCl9KSxpLm9uKFwibW91c2V1cFwiKyQrXCIgbW91c2VsZWF2ZVwiKyQsZnVuY3Rpb24oKXtpLm9mZihcIm1vdXNlbW92ZVwiKyQsXCIuay1zY2hlZHVsZXItaGVhZGVyLWFsbC1kYXkgdGQsIC5rLXNjaGVkdWxlci1jb250ZW50IHRkXCIsdCl9KSxpLm9uKFwiZm9jdXNcIiskLGZ1bmN0aW9uKCl7bi5fc2VsZWN0aW9ufHxuLl9jcmVhdGVTZWxlY3Rpb24oZShcIi5rLXNjaGVkdWxlci1jb250ZW50XCIpLmZpbmQoXCJ0ZDpmaXJzdFwiKSksbi5fc2VsZWN0KCl9KSxpLm9uKFwiZm9jdXNvdXRcIiskLGZ1bmN0aW9uKCl7bi52aWV3KCkuY2xlYXJTZWxlY3Rpb24oKSxuLl9jdHJsS2V5PW4uX3NoaWZ0S2V5PSExfSksaS5vbihcImtleWRvd25cIiskLGoobi5fa2V5ZG93bixuKSksaS5vbihcImtleXVwXCIrJCxmdW5jdGlvbihlKXtuLl9jdHJsS2V5PWUuY3RybEtleSxuLl9zaGlmdEtleT1lLnNoaWZ0S2V5fSkpfSxfc2VsZWN0OmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscj10aGlzLG89ci52aWV3KCksYT1yLndyYXBwZXIscz1vLmN1cnJlbnQoKSxsPXIuX3NlbGVjdGlvbjtzJiYocy5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKSxzLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiksYS5yZW1vdmVBdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIpKSxvLnNlbGVjdChsKSxzPW8uY3VycmVudCgpLHMmJnIuX29sZCE9PXMmJih0PWwsbj1yLl9zZWxlY3RlZEV2ZW50cygpLGk9by5fc2VsZWN0ZWRTbG90cyxuWzBdPyh0PW5bMF18fGwsZT1BLmZvcm1hdChyLm9wdGlvbnMubWVzc2FnZXMuYXJpYUV2ZW50TGFiZWwsdC50aXRsZSx0LnN0YXJ0LHQuc3RhcnQpKTplPUEuZm9ybWF0KHIub3B0aW9ucy5tZXNzYWdlcy5hcmlhU2xvdExhYmVsLHQuc3RhcnQsdC5lbmQpLHMuc2V0QXR0cmlidXRlKFwiaWRcIixyLl9hcmlhSWQpLHMuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLGUpLGEuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLHIuX2FyaWFJZCksci5fb2xkPXMsci50cmlnZ2VyKFwiY2hhbmdlXCIse3N0YXJ0Omwuc3RhcnQsZW5kOmwuZW5kLGV2ZW50czpuLHNsb3RzOmkscmVzb3VyY2VzOm8uX3Jlc291cmNlQnlTbG90KGwpfSkpfSxfc2VsZWN0ZWRFdmVudHM6ZnVuY3Rpb24oKXtmb3IodmFyIGUsdD10aGlzLl9zZWxlY3Rpb24uZXZlbnRzLG49dC5sZW5ndGgsaT0wLHI9W107bj5pO2krKyllPXRoaXMub2NjdXJyZW5jZUJ5VWlkKHRbaV0pLGUmJnIucHVzaChlKTtyZXR1cm4gcn0sX21vdXNlTW92ZTpmdW5jdGlvbih0KXt2YXIgbj10aGlzO2NsZWFyVGltZW91dChuLl9tb3ZlVGltZXIpLG4uX21vdmVUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGkscixvLGE9bi52aWV3KCkscz1uLl9zZWxlY3Rpb247cyYmKGk9YS5zZWxlY3Rpb25CeUVsZW1lbnQoZSh0LmN1cnJlbnRUYXJnZXQpKSxpJiZzLmdyb3VwSW5kZXg9PT1pLmdyb3VwSW5kZXgmJihyPWkuc3RhcnREYXRlKCksbz1pLmVuZERhdGUoKSxyPj1zLmVuZD9zLmJhY2t3YXJkPSExOnMuc3RhcnQ+PW8mJihzLmJhY2t3YXJkPSEwKSxzLmJhY2t3YXJkP3Muc3RhcnQ9cjpzLmVuZD1vLG4uX3NlbGVjdCgpKSl9LDUpfSxfdmlld0J5SW5kZXg6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLnZpZXdzO2Zvcih0IGluIG4pe2lmKCFlKXJldHVybiB0O2UtLX19LF9rZXlkb3duOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT10LmtleUNvZGUscj1uLnZpZXcoKSxvPXIub3B0aW9ucy5lZGl0YWJsZSxhPW4uX3NlbGVjdGlvbixzPXQuc2hpZnRLZXk7bi5fY3RybEtleT10LmN0cmxLZXksbi5fc2hpZnRLZXk9dC5zaGlmdEtleSxpPT09Ui5UQUI/ci5tb3ZlVG9FdmVudChhLHMpJiYobi5fc2VsZWN0KCksdC5wcmV2ZW50RGVmYXVsdCgpKTpvJiZpPT09Ui5FTlRFUj9hLmV2ZW50cy5sZW5ndGg/by51cGRhdGUhPT0hMSYmbi5lZGl0RXZlbnQoYS5ldmVudHNbMF0pOm8uY3JlYXRlIT09ITEmJihhLmlzQWxsRGF5JiYoYT1lLmV4dGVuZCh7fSxhLHtlbmQ6QS5kYXRlLmFkZERheXMoYS5lbmQsLTEpfSkpLG4uYWRkRXZlbnQoVyh7fSxhLHIuX3Jlc291cmNlQnlTbG90KGEpKSkpOmk9PT1SLkRFTEVURSYmbyE9PSExJiZvLmRlc3Ryb3khPT0hMT9uLnJlbW92ZUV2ZW50KGEuZXZlbnRzWzBdKTppPj00OSYmNTc+PWk/bi52aWV3KG4uX3ZpZXdCeUluZGV4KGktNDkpKTpyLm1vdmUoYSxpLHMpJiYoci5pblJhbmdlKGEpP24uX3NlbGVjdCgpOm4uZGF0ZShhLnN0YXJ0KSx0LnByZXZlbnREZWZhdWx0KCkpLG4uX2FkanVzdFNlbGVjdGVkRGF0ZSgpfSxfY3JlYXRlU2VsZWN0aW9uOmZ1bmN0aW9uKHQpe3ZhciBuLGkscjt0aGlzLl9zZWxlY3Rpb24mJih0aGlzLl9jdHJsS2V5fHx0aGlzLl9zaGlmdEtleSl8fCh0aGlzLl9zZWxlY3Rpb249e2V2ZW50czpbXSxncm91cEluZGV4OjB9KSx0PWUodCkscj10aGlzLl9zZWxlY3Rpb24sbj10LmF0dHIoQS5hdHRyKFwidWlkXCIpKSxpPXRoaXMudmlldygpLnNlbGVjdGlvbkJ5RWxlbWVudCh0KSxpJiYoci5ncm91cEluZGV4PWkuZ3JvdXBJbmRleHx8MCksbiYmKGk9bCh0aGlzLl9kYXRhLG4pKSxpJiZpLnVpZCYmKG49W2kudWlkXSksdGhpcy5fdXBkYXRlU2VsZWN0aW9uKGksbiksdGhpcy5fYWRqdXN0U2VsZWN0ZWREYXRlKCl9LF91cGRhdGVTZWxlY3Rpb246ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcy5fc2VsZWN0aW9uO2UmJnImJihuPXRoaXMudmlldygpLGUudWlkJiYoZT1uLl91cGRhdGVFdmVudEZvclNlbGVjdGlvbihlKSksdGhpcy5fc2hpZnRLZXkmJnIuc3RhcnQmJnIuZW5kPyhpPXIuZW5kPmUuZW5kLHIuZW5kPWUuZW5kRGF0ZT9lLmVuZERhdGUoKTplLmVuZCxpJiZuLl90aW1lU2xvdEludGVydmFsJiZBLmRhdGUuc2V0VGltZShyLmVuZCwtbi5fdGltZVNsb3RJbnRlcnZhbCgpKSk6KHIuc3RhcnQ9ZS5zdGFydERhdGU/ZS5zdGFydERhdGUoKTplLnN0YXJ0LHIuZW5kPWUuZW5kRGF0ZT9lLmVuZERhdGUoKTplLmVuZCksci5pc0FsbERheT1cImlzRGF5U2xvdFwiaW4gZT9lLmlzRGF5U2xvdDplLmlzQWxsRGF5LHIuaW5kZXg9ZS5pbmRleCxyLmV2ZW50cz10aGlzLl9jdHJsS2V5P3IuZXZlbnRzLmNvbmNhdCh0fHxbXSk6dHx8W10pfSxvcHRpb25zOntuYW1lOlwiU2NoZWR1bGVyXCIsZGF0ZTpudCxlZGl0YWJsZTohMCxhdXRvQmluZDohMCxzbmFwOiEwLG1vYmlsZTohMSx0aW1lem9uZTpcIlwiLGFsbERheVNsb3Q6ITAsbWluOm5ldyBEYXRlKDE5MDAsMCwxKSxtYXg6bmV3IERhdGUoMjA5OSwxMSwzMSksdG9vbGJhcjpudWxsLG1lc3NhZ2VzOnt0b2RheTpcIlRvZGF5XCIscGRmOlwiRXhwb3J0IHRvIFBERlwiLHNhdmU6XCJTYXZlXCIsY2FuY2VsOlwiQ2FuY2VsXCIsZGVzdHJveTpcIkRlbGV0ZVwiLGRlbGV0ZVdpbmRvd1RpdGxlOlwiRGVsZXRlIGV2ZW50XCIsYXJpYVNsb3RMYWJlbDpcIlNlbGVjdGVkIGZyb20gezA6dH0gdG8gezE6dH1cIixhcmlhRXZlbnRMYWJlbDpcInswfSBvbiB7MTpEfSBhdCB7Mjp0fVwiLHZpZXdzOntkYXk6XCJEYXlcIix3ZWVrOlwiV2Vla1wiLHdvcmtXZWVrOlwiV29yayBXZWVrXCIsYWdlbmRhOlwiQWdlbmRhXCIsbW9udGg6XCJNb250aFwiLHRpbWVsaW5lOlwiVGltZWxpbmVcIix0aW1lbGluZVdlZWs6XCJUaW1lbGluZSBXZWVrXCIsdGltZWxpbmVXb3JrV2VlazpcIlRpbWVsaW5lIFdvcmsgV2Vla1wiLHRpbWVsaW5lTW9udGg6XCJUaW1lbGluZSBNb250aFwifSxyZWN1cnJlbmNlTWVzc2FnZXM6e2RlbGV0ZVdpbmRvd1RpdGxlOlwiRGVsZXRlIFJlY3VycmluZyBJdGVtXCIsZGVsZXRlV2luZG93T2NjdXJyZW5jZTpcIkRlbGV0ZSBjdXJyZW50IG9jY3VycmVuY2VcIixkZWxldGVXaW5kb3dTZXJpZXM6XCJEZWxldGUgdGhlIHNlcmllc1wiLGVkaXRXaW5kb3dUaXRsZTpcIkVkaXQgUmVjdXJyaW5nIEl0ZW1cIixlZGl0V2luZG93T2NjdXJyZW5jZTpcIkVkaXQgY3VycmVudCBvY2N1cnJlbmNlXCIsZWRpdFdpbmRvd1NlcmllczpcIkVkaXQgdGhlIHNlcmllc1wifSxlZGl0b3I6e3RpdGxlOlwiVGl0bGVcIixzdGFydDpcIlN0YXJ0XCIsZW5kOlwiRW5kXCIsYWxsRGF5RXZlbnQ6XCJBbGwgZGF5IGV2ZW50XCIsZGVzY3JpcHRpb246XCJEZXNjcmlwdGlvblwiLHJlcGVhdDpcIlJlcGVhdFwiLHRpbWV6b25lOlwiIFwiLHN0YXJ0VGltZXpvbmU6XCJTdGFydCB0aW1lem9uZVwiLGVuZFRpbWV6b25lOlwiRW5kIHRpbWV6b25lXCIsc2VwYXJhdGVUaW1lem9uZXM6XCJVc2Ugc2VwYXJhdGUgc3RhcnQgYW5kIGVuZCB0aW1lIHpvbmVzXCIsdGltZXpvbmVFZGl0b3JUaXRsZTpcIlRpbWV6b25lc1wiLHRpbWV6b25lRWRpdG9yQnV0dG9uOlwiVGltZSB6b25lXCIsdGltZXpvbmVUaXRsZTpcIlRpbWUgem9uZXNcIixub1RpbWV6b25lOlwiTm8gdGltZXpvbmVcIixlZGl0b3JUaXRsZTpcIkV2ZW50XCJ9fSxoZWlnaHQ6bnVsbCx3aWR0aDpudWxsLHJlc291cmNlczpbXSxncm91cDp7cmVzb3VyY2VzOltdLGRpcmVjdGlvbjpcImhvcml6b250YWxcIn0sdmlld3M6W10sc2VsZWN0YWJsZTohMX0sZXZlbnRzOltYLGV0LFEsSixcImFkZFwiLFwiZGF0YUJpbmRpbmdcIixcImRhdGFCb3VuZFwiLFwibW92ZVN0YXJ0XCIsXCJtb3ZlXCIsXCJtb3ZlRW5kXCIsXCJyZXNpemVTdGFydFwiLFwicmVzaXplXCIsXCJyZXNpemVFbmRcIixcIm5hdmlnYXRlXCIsXCJjaGFuZ2VcIl0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciB0LG49dGhpcztMLmZuLmRlc3Ryb3kuY2FsbChuKSxuLmRhdGFTb3VyY2UmJihuLmRhdGFTb3VyY2UudW5iaW5kKEssbi5fcmVmcmVzaEhhbmRsZXIpLG4uZGF0YVNvdXJjZS51bmJpbmQoXCJwcm9ncmVzc1wiLG4uX3Byb2dyZXNzSGFuZGxlciksbi5kYXRhU291cmNlLnVuYmluZChcImVycm9yXCIsbi5fZXJyb3JIYW5kbGVyKSksbi5jYWxlbmRhciYmKG4uY2FsZW5kYXIuZGVzdHJveSgpLG4ucG9wdXAuZGVzdHJveSgpKSxuLnZpZXcoKSYmbi52aWV3KCkuZGVzdHJveSgpLG4uX2VkaXRvciYmbi5fZWRpdG9yLmRlc3Ryb3koKSx0aGlzLl9tb3ZlRHJhZ2dhYmxlJiZ0aGlzLl9tb3ZlRHJhZ2dhYmxlLmRlc3Ryb3koKSx0aGlzLl9yZXNpemVEcmFnZ2FibGUmJnRoaXMuX3Jlc2l6ZURyYWdnYWJsZS5kZXN0cm95KCksdD1uLmVsZW1lbnQuYWRkKG4ud3JhcHBlcikuYWRkKG4udG9vbGJhcikuYWRkKG4ucG9wdXApLHQub2ZmKCQpLGNsZWFyVGltZW91dChuLl9tb3ZlVGltZXIpLG4uX21vZGVsPW51bGwsbi50b29sYmFyPW51bGwsbi5lbGVtZW50PW51bGwsZSh3aW5kb3cpLm9mZihcInJlc2l6ZVwiKyQsbi5fcmVzaXplSGFuZGxlciksQS5kZXN0cm95KG4ud3JhcHBlcil9LHNldERhdGFTb3VyY2U6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zLmRhdGFTb3VyY2U9ZSx0aGlzLl9kYXRhU291cmNlKCksdGhpcy5vcHRpb25zLmF1dG9CaW5kJiZlLmZldGNoKCl9LGl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud3JhcHBlci5maW5kKFwiLmstZXZlbnQsIC5rLXRhc2tcIil9LF9tb3ZhYmxlOmZ1bmN0aW9uKCl7dmFyIG4saSxyLG8sYSxzLGw9dGhpcyxjPWwuX2lzTW9iaWxlKCksZD1sLm9wdGlvbnMuZWRpdGFibGUmJmwub3B0aW9ucy5lZGl0YWJsZS5tb3ZlIT09ITEsdT1sLm9wdGlvbnMuZWRpdGFibGUmJmwub3B0aW9ucy5lZGl0YWJsZS5yZXNpemUhPT0hMTsoZHx8dSYmYykmJihsLl9tb3ZlRHJhZ2dhYmxlPW5ldyBBLnVpLkRyYWdnYWJsZShsLmVsZW1lbnQse2Rpc3RhbmNlOjAsZmlsdGVyOlwiLmstZXZlbnRcIixpZ25vcmU6XCIuay1yZXNpemUtaGFuZGxlXCIsaG9sZFRvRHJhZzpjfSksZCYmbC5fbW92ZURyYWdnYWJsZS5iaW5kKFwiZHJhZ3N0YXJ0XCIsZnVuY3Rpb24oZSl7dmFyIG89bC52aWV3KCksZD1lLmN1cnJlbnRUYXJnZXQ7cmV0dXJuIG8ub3B0aW9ucy5lZGl0YWJsZSYmby5vcHRpb25zLmVkaXRhYmxlLm1vdmUhPT0hMT9jJiYhZC5oYXNDbGFzcyhcImstZXZlbnQtYWN0aXZlXCIpPyhsLmVsZW1lbnQuZmluZChcIi5rLWV2ZW50LWFjdGl2ZVwiKS5yZW1vdmVDbGFzcyhcImstZXZlbnQtYWN0aXZlXCIpLGUucHJldmVudERlZmF1bHQoKSx0KTooYT1sLm9jY3VycmVuY2VCeVVpZChkLmF0dHIoQS5hdHRyKFwidWlkXCIpKSkscz1hLmNsb25lKCksby5fdXBkYXRlRXZlbnRGb3JNb3ZlKHMpLG49by5fc2xvdEJ5UG9zaXRpb24oZS54LnN0YXJ0TG9jYXRpb24sZS55LnN0YXJ0TG9jYXRpb24pLHI9bi5zdGFydE9mZnNldChlLnguc3RhcnRMb2NhdGlvbixlLnkuc3RhcnRMb2NhdGlvbixsLm9wdGlvbnMuc25hcCksaT1uLCghbnx8bC50cmlnZ2VyKFwibW92ZVN0YXJ0XCIse2V2ZW50OmF9KSkmJmUucHJldmVudERlZmF1bHQoKSx0KTooZS5wcmV2ZW50RGVmYXVsdCgpLHQpfSkuYmluZChcImRyYWdcIixmdW5jdGlvbihlKXt2YXIgdCxuLGM9bC52aWV3KCksZD1jLl9zbG90QnlQb3NpdGlvbihlLngubG9jYXRpb24sZS55LmxvY2F0aW9uKTtkJiYobz1kLnN0YXJ0T2Zmc2V0KGUueC5sb2NhdGlvbixlLnkubG9jYXRpb24sbC5vcHRpb25zLnNuYXApLHQ9by1yLGMuX3VwZGF0ZU1vdmVIaW50KHMsZC5ncm91cEluZGV4LHQpLG49bShzLHQpLGwudHJpZ2dlcihcIm1vdmVcIix7ZXZlbnQ6YSxzbG90OntlbGVtZW50OmQuZWxlbWVudCxzdGFydDpkLnN0YXJ0RGF0ZSgpLGVuZDpkLmVuZERhdGUoKX0scmVzb3VyY2VzOmMuX3Jlc291cmNlQnlTbG90KGQpLHN0YXJ0Om4uc3RhcnQsZW5kOm4uZW5kfSk/Yy5fdXBkYXRlTW92ZUhpbnQocyxkLmdyb3VwSW5kZXgsdCk6aT1kKX0pLmJpbmQoXCJkcmFnZW5kXCIsZnVuY3Rpb24odCl7dmFyIGMsZCx1LGgscCxmLGc7bC52aWV3KCkuX3JlbW92ZU1vdmVIaW50KCksYz1vLXIsZD1tKHMsYyksdT1kLnN0YXJ0LGg9ZC5lbmQscD1sLnZpZXcoKS5fcmVzb3VyY2VCeVNsb3QoaSksZj1sLnZpZXcoKS5fcmVzb3VyY2VCeVNsb3QobiksZz1sLnRyaWdnZXIoXCJtb3ZlRW5kXCIse2V2ZW50OmEsc2xvdDp7ZWxlbWVudDppLmVsZW1lbnQsc3RhcnQ6aS5zdGFydERhdGUoKSxlbmQ6aS5lbmREYXRlKCl9LHN0YXJ0OnUsZW5kOmgscmVzb3VyY2VzOnB9KSxnfHxzLnN0YXJ0LmdldFRpbWUoKT09dS5nZXRUaW1lKCkmJnMuZW5kLmdldFRpbWUoKT09aC5nZXRUaW1lKCkmJkEuc3RyaW5naWZ5KHApPT1BLnN0cmluZ2lmeShmKXx8KGwudmlldygpLl91cGRhdGVFdmVudEZvck1vdmUoYSksbC5fdXBkYXRlRXZlbnQobnVsbCxhLGUuZXh0ZW5kKHtzdGFydDp1LGVuZDpofSxwKSkpLHQuY3VycmVudFRhcmdldC5yZW1vdmVDbGFzcyhcImstZXZlbnQtYWN0aXZlXCIpLHRoaXMuY2FuY2VsSG9sZCgpfSkuYmluZChcImRyYWdjYW5jZWxcIixmdW5jdGlvbigpe2wudmlldygpLl9yZW1vdmVNb3ZlSGludCgpLHRoaXMuY2FuY2VsSG9sZCgpfSksYyYmKGwuX21vdmVEcmFnZ2FibGUuYmluZChcImhvbGRcIixmdW5jdGlvbihlKXtsLmVsZW1lbnQuZmluZChcIi5rLXNjaGVkdWxlci1tb250aHZpZXdcIikubGVuZ3RoJiZlLnByZXZlbnREZWZhdWx0KCksbC5lbGVtZW50LmZpbmQoXCIuay1ldmVudC1hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJrLWV2ZW50LWFjdGl2ZVwiKSxlLmN1cnJlbnRUYXJnZXQuYWRkQ2xhc3MoXCJrLWV2ZW50LWFjdGl2ZVwiKX0pLGwuX21vdmVEcmFnZ2FibGUudXNlckV2ZW50cy5iaW5kKFwicHJlc3NcIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCl9KSkpfSxfcmVzaXphYmxlOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgdCxuPXtcImstcmVzaXplLWVcIjpcImVhc3RcIixcImstcmVzaXplLXdcIjpcIndlc3RcIixcImstcmVzaXplLW5cIjpcIm5vcnRoXCIsXCJrLXJlc2l6ZS1zXCI6XCJzb3V0aFwifTtmb3IodCBpbiBuKWlmKGUuaGFzQ2xhc3ModCkpcmV0dXJuIG5bdF19dmFyIG4saSxyLG8sYSxzPXRoaXM7cy5fcmVzaXplRHJhZ2dhYmxlPW5ldyBBLnVpLkRyYWdnYWJsZShzLmVsZW1lbnQse2Rpc3RhbmNlOjAsZmlsdGVyOlwiLmstcmVzaXplLWhhbmRsZVwiLGRyYWdzdGFydDpmdW5jdGlvbih0KXt2YXIgbD1lKHQuY3VycmVudFRhcmdldCksYz1sLmNsb3Nlc3QoXCIuay1ldmVudFwiKSxkPWMuYXR0cihBLmF0dHIoXCJ1aWRcIikpLHU9cy52aWV3KCk7cj1zLm9jY3VycmVuY2VCeVVpZChkKSxvPXIuY2xvbmUoKSx1Ll91cGRhdGVFdmVudEZvclJlc2l6ZShvKSxhPXUuX3Nsb3RCeVBvc2l0aW9uKHQueC5zdGFydExvY2F0aW9uLHQueS5zdGFydExvY2F0aW9uKSxzLnRyaWdnZXIoXCJyZXNpemVTdGFydFwiLHtldmVudDpyfSkmJnQucHJldmVudERlZmF1bHQoKSxuPUEuZGF0ZS50b1V0Y1RpbWUoby5zdGFydCksaT1BLmRhdGUudG9VdGNUaW1lKG8uZW5kKX0sZHJhZzpmdW5jdGlvbihsKXt2YXIgYyxkLHUsaCxwLGY7YSYmKGM9ZShsLmN1cnJlbnRUYXJnZXQpLGQ9dChjKSx1PXMudmlldygpLGg9dS5fc2xvdEJ5UG9zaXRpb24obC54LmxvY2F0aW9uLGwueS5sb2NhdGlvbiksaCYmYS5ncm91cEluZGV4PT1oLmdyb3VwSW5kZXgmJihhPWgscD1uLGY9aSxcInNvdXRoXCI9PWQ/IWEuaXNEYXlTbG90JiZhLmVuZC1BLmRhdGUudG9VdGNUaW1lKG8uc3RhcnQpPj11Ll90aW1lU2xvdEludGVydmFsKCkmJihpPW8uaXNBbGxEYXk/YS5zdGFydE9mZnNldChsLngubG9jYXRpb24sbC55LmxvY2F0aW9uLHMub3B0aW9ucy5zbmFwKTphLmVuZE9mZnNldChsLngubG9jYXRpb24sbC55LmxvY2F0aW9uLHMub3B0aW9ucy5zbmFwKSk6XCJub3J0aFwiPT1kPyFhLmlzRGF5U2xvdCYmQS5kYXRlLnRvVXRjVGltZShvLmVuZCktYS5zdGFydD49dS5fdGltZVNsb3RJbnRlcnZhbCgpJiYobj1hLnN0YXJ0T2Zmc2V0KGwueC5sb2NhdGlvbixsLnkubG9jYXRpb24scy5vcHRpb25zLnNuYXApKTpcImVhc3RcIj09ZD9hLmlzRGF5U2xvdCYmQS5kYXRlLnRvVXRjVGltZShBLmRhdGUuZ2V0RGF0ZShhLmVuZERhdGUoKSkpPj1BLmRhdGUudG9VdGNUaW1lKEEuZGF0ZS5nZXREYXRlKG8uc3RhcnQpKT9pPW8uaXNBbGxEYXk/YS5zdGFydE9mZnNldChsLngubG9jYXRpb24sbC55LmxvY2F0aW9uLHMub3B0aW9ucy5zbmFwKTphLmVuZE9mZnNldChsLngubG9jYXRpb24sbC55LmxvY2F0aW9uLHMub3B0aW9ucy5zbmFwKTohYS5pc0RheVNsb3QmJmEuZW5kLUEuZGF0ZS50b1V0Y1RpbWUoby5zdGFydCk+PXUuX3RpbWVTbG90SW50ZXJ2YWwoKSYmKGk9YS5lbmRPZmZzZXQobC54LmxvY2F0aW9uLGwueS5sb2NhdGlvbixzLm9wdGlvbnMuc25hcCkpOlwid2VzdFwiPT1kJiYoYS5pc0RheVNsb3QmJkEuZGF0ZS50b1V0Y1RpbWUoQS5kYXRlLmdldERhdGUoby5lbmQpKT49QS5kYXRlLnRvVXRjVGltZShBLmRhdGUuZ2V0RGF0ZShhLnN0YXJ0RGF0ZSgpKSk/bj1hLnN0YXJ0T2Zmc2V0KGwueC5sb2NhdGlvbixsLnkubG9jYXRpb24scy5vcHRpb25zLnNuYXApOiFhLmlzRGF5U2xvdCYmQS5kYXRlLnRvVXRjVGltZShvLmVuZCktYS5zdGFydD49dS5fdGltZVNsb3RJbnRlcnZhbCgpJiYobj1hLnN0YXJ0T2Zmc2V0KGwueC5sb2NhdGlvbixsLnkubG9jYXRpb24scy5vcHRpb25zLnNuYXApKSkscy50cmlnZ2VyKFwicmVzaXplXCIse2V2ZW50OnIsc2xvdDp7ZWxlbWVudDphLmVsZW1lbnQsc3RhcnQ6YS5zdGFydERhdGUoKSxlbmQ6YS5lbmREYXRlKCl9LHN0YXJ0OkEudGltZXpvbmUudG9Mb2NhbERhdGUobiksZW5kOkEudGltZXpvbmUudG9Mb2NhbERhdGUoaSkscmVzb3VyY2VzOnUuX3Jlc291cmNlQnlTbG90KGEpfSk/KG49cCxpPWYpOnUuX3VwZGF0ZVJlc2l6ZUhpbnQobyxhLmdyb3VwSW5kZXgsbixpKSkpfSxkcmFnZW5kOmZ1bmN0aW9uKGwpe3ZhciBjLGQ9ZShsLmN1cnJlbnRUYXJnZXQpLHU9bmV3IERhdGUoby5zdGFydC5nZXRUaW1lKCkpLGg9bmV3IERhdGUoby5lbmQuZ2V0VGltZSgpKSxwPXQoZCk7cy52aWV3KCkuX3JlbW92ZVJlc2l6ZUhpbnQoKSxcInNvdXRoXCI9PXA/aD1BLnRpbWV6b25lLnRvTG9jYWxEYXRlKGkpOlwibm9ydGhcIj09cD91PUEudGltZXpvbmUudG9Mb2NhbERhdGUobik6XCJlYXN0XCI9PXA/aD1hLmlzRGF5U2xvdD9BLmRhdGUuZ2V0RGF0ZShBLnRpbWV6b25lLnRvTG9jYWxEYXRlKGkpKTpBLnRpbWV6b25lLnRvTG9jYWxEYXRlKGkpOlwid2VzdFwiPT1wJiYoYS5pc0RheVNsb3Q/KHU9bmV3IERhdGUoQS50aW1lem9uZS50b0xvY2FsRGF0ZShuKSksdS5zZXRIb3VycygwKSx1LnNldE1pbnV0ZXMoMCkpOnU9QS50aW1lem9uZS50b0xvY2FsRGF0ZShuKSksYz1zLnRyaWdnZXIoXCJyZXNpemVFbmRcIix7ZXZlbnQ6cixzbG90OntlbGVtZW50OmEuZWxlbWVudCxzdGFydDphLnN0YXJ0RGF0ZSgpLGVuZDphLmVuZERhdGUoKX0sc3RhcnQ6dSxlbmQ6aCxyZXNvdXJjZXM6cy52aWV3KCkuX3Jlc291cmNlQnlTbG90KGEpfSksIWMmJmguZ2V0VGltZSgpPj11LmdldFRpbWUoKSYmKG8uc3RhcnQuZ2V0VGltZSgpIT11LmdldFRpbWUoKXx8by5lbmQuZ2V0VGltZSgpIT1oLmdldFRpbWUoKSkmJihzLnZpZXcoKS5fdXBkYXRlRXZlbnRGb3JSZXNpemUocikscy5fdXBkYXRlRXZlbnQocCxyLHtzdGFydDp1LGVuZDpofSkpLGE9bnVsbCxyPW51bGx9LGRyYWdjYW5jZWw6ZnVuY3Rpb24oKXtzLnZpZXcoKS5fcmVtb3ZlUmVzaXplSGludCgpLGE9bnVsbCxyPW51bGx9fSl9LF91cGRhdGVFdmVudDpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcyxyPWZ1bmN0aW9uKGUsdCl7dHJ5e2kuX3ByZXZlbnRSZWZyZXNoPSEwLGUudXBkYXRlKG4pLGkuX2NvbnZlcnREYXRlcyhlKX1maW5hbGx5e2kuX3ByZXZlbnRSZWZyZXNoPSExfWkudHJpZ2dlcihKLHtldmVudDplfSl8fCh0JiZ0KCksaS5fdXBkYXRlU2VsZWN0aW9uKGUpLGkuZGF0YVNvdXJjZS5zeW5jKCkpfSxvPWZ1bmN0aW9uKGUpe3JldHVybiBlLnJlY3VycmVuY2VSdWxlP2kuZGF0YVNvdXJjZS5nZXRCeVVpZChlLnVpZCk6aS5kYXRhU291cmNlLmdldChlLnJlY3VycmVuY2VJZCl9LGE9ZnVuY3Rpb24oKXt2YXIgYSxzLGw9byh0KTsoXCJzb3V0aFwiPT1lfHxcIm5vcnRoXCI9PWUpJiYobi5zdGFydCYmKGE9QS5kYXRlLmdldERhdGUobC5zdGFydCksQS5kYXRlLnNldFRpbWUoYSx6KG4uc3RhcnQpKSxuLnN0YXJ0PWEpLG4uZW5kJiYocz1BLmRhdGUuZ2V0RGF0ZShsLmVuZCksQS5kYXRlLnNldFRpbWUocyx6KG4uZW5kKSksbi5lbmQ9cykpLGkuZGF0YVNvdXJjZS5fcmVtb3ZlRXhjZXB0aW9ucyhsKSxyKGwpfSxzPWZ1bmN0aW9uKCl7dmFyIGU9byh0KSxuPWZ1bmN0aW9uKCl7aS5fY29udmVydERhdGVzKGUpfSxhPWUudG9PY2N1cnJlbmNlKHtzdGFydDp0LnN0YXJ0LGVuZDp0LmVuZH0pO3IoaS5kYXRhU291cmNlLmFkZChhKSxuKX0sbD1pLm9wdGlvbnMubWVzc2FnZXMucmVjdXJyZW5jZU1lc3NhZ2VzO3QucmVjdXJyZW5jZVJ1bGV8fHQuaXNPY2N1cnJlbmNlKCk/aS5zaG93RGlhbG9nKHttb2RlbDp0LHRpdGxlOmwuZWRpdFdpbmRvd1RpdGxlLHRleHQ6bC5lZGl0UmVjdXJyaW5nP2wuZWRpdFJlY3VycmluZzphdCxidXR0b25zOlt7dGV4dDpsLmVkaXRXaW5kb3dPY2N1cnJlbmNlLGNsaWNrOnN9LHt0ZXh0OmwuZWRpdFdpbmRvd1NlcmllcyxjbGljazphfV19KTpyKGkuZGF0YVNvdXJjZS5nZXRCeVVpZCh0LnVpZCkpfSxfbW9kZWxGb3JDb250YWluZXI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9ZSh0KS5jbG9zZXN0KFwiW1wiK0EuYXR0cihcInVpZFwiKStcIl1cIiksdGhpcy5kYXRhU291cmNlLmdldEJ5VWlkKHQuYXR0cihBLmF0dHIoXCJ1aWRcIikpKX0sc2hvd0RpYWxvZzpmdW5jdGlvbihlKXt0aGlzLl9lZGl0b3Iuc2hvd0RpYWxvZyhlKX0sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLndyYXBwZXIuZm9jdXMoKX0sX2NvbmZpcm1hdGlvbjpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvPXRoaXMub3B0aW9ucy5lZGl0YWJsZTtvPT09ITB8fG8uY29uZmlybWF0aW9uIT09ITE/KG49dGhpcy5vcHRpb25zLm1lc3NhZ2VzLGk9dHlwZW9mIG8uY29uZmlybWF0aW9uPT09Tz9vLmNvbmZpcm1hdGlvbjpydCxyPVt7bmFtZTpcImRlc3Ryb3lcIix0ZXh0Om4uZGVzdHJveSxjbGljazpmdW5jdGlvbigpe2UoKX19XSx0aGlzLl9pc01vYmlsZSgpJiZBLm1vYmlsZS51aS5QYW5lfHxyLnB1c2goe25hbWU6XCJjYW5jZWxlZGl0XCIsdGV4dDpuLmNhbmNlbCxjbGljazpmdW5jdGlvbigpe2UoITApfX0pLHRoaXMuc2hvd0RpYWxvZyh7bW9kZWw6dCx0ZXh0OmksdGl0bGU6bi5kZWxldGVXaW5kb3dUaXRsZSxidXR0b25zOnJ9KSk6ZSgpfSxhZGRFdmVudDpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcy5fZWRpdG9yLmVkaXRhYmxlLHI9dGhpcy5kYXRhU291cmNlO2U9ZXx8e30sbj10aGlzLnRyaWdnZXIoXCJhZGRcIix7ZXZlbnQ6ZX0pLCFuJiYoaSYmaS5lbmQoKXx8IWkpJiYodGhpcy5jYW5jZWxFdmVudCgpLGUmJmUudG9KU09OJiYoZT1lLnRvSlNPTigpKSx0PXIuYWRkKGUpLHQmJih0aGlzLmNhbmNlbEV2ZW50KCksdGhpcy5fZWRpdEV2ZW50KHQpKSl9LHNhdmVFdmVudDpmdW5jdGlvbigpe3ZhciBlLHQsbixpPXRoaXMuX2VkaXRvcjtpJiYoZT1pLmVkaXRhYmxlLHQ9aS5jb250YWluZXIsbj10aGlzLl9tb2RlbEZvckNvbnRhaW5lcih0KSx0JiZlJiZlLmVuZCgpJiYhdGhpcy50cmlnZ2VyKEose2NvbnRhaW5lcjp0LGV2ZW50Om59KSYmKG4uaXNSZWN1cnJlbmNlSGVhZCgpJiZ0aGlzLmRhdGFTb3VyY2UuX3JlbW92ZUV4Y2VwdGlvbnMobiksbi5kaXJ0eXx8bi5pc09jY3VycmVuY2UoKXx8dGhpcy5fY29udmVydERhdGVzKG4sXCJyZW1vdmVcIiksdGhpcy5kYXRhU291cmNlLnN5bmMoKSkpfSxjYW5jZWxFdmVudDpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fZWRpdG9yLG49dC5jb250YWluZXI7biYmKGU9dGhpcy5fbW9kZWxGb3JDb250YWluZXIobiksZSYmZS5pc09jY3VycmVuY2UoKSYmKHRoaXMuX2NvbnZlcnREYXRlcyhlLFwicmVtb3ZlXCIpLHRoaXMuX2NvbnZlcnREYXRlcyh0aGlzLmRhdGFTb3VyY2UuZ2V0KGUucmVjdXJyZW5jZUlkKSxcInJlbW92ZVwiKSksdGhpcy5kYXRhU291cmNlLmNhbmNlbENoYW5nZXMoZSksdC5jbG9zZSgpKX0sZWRpdEV2ZW50OmZ1bmN0aW9uKGUpe3ZhciB0PVwic3RyaW5nXCI9PXR5cGVvZiBlP3RoaXMub2NjdXJyZW5jZUJ5VWlkKGUpOmU7dCYmKHRoaXMuY2FuY2VsRXZlbnQoKSx0LmlzUmVjdXJyaW5nKCk/dGhpcy5fZWRpdFJlY3VycmluZ0RpYWxvZyh0KTp0aGlzLl9lZGl0RXZlbnQodCkpfSxfZWRpdEV2ZW50OmZ1bmN0aW9uKGUpe3RoaXMuX2NyZWF0ZVBvcHVwRWRpdG9yKGUpfSxfZWRpdFJlY3VycmluZ0RpYWxvZzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZnVuY3Rpb24oKXtlLmlzRXhjZXB0aW9uKCk/dC5fZWRpdEV2ZW50KGUpOnQuYWRkRXZlbnQoZSl9LGk9ZnVuY3Rpb24oKXtlLnJlY3VycmVuY2VJZCYmKGU9dC5kYXRhU291cmNlLmdldChlLnJlY3VycmVuY2VJZCkpLHQuX2VkaXRFdmVudChlKX0scj10Lm9wdGlvbnMubWVzc2FnZXMucmVjdXJyZW5jZU1lc3NhZ2VzO3Quc2hvd0RpYWxvZyh7bW9kZWw6ZSx0aXRsZTpyLmVkaXRXaW5kb3dUaXRsZSx0ZXh0OnIuZWRpdFJlY3VycmluZz9yLmVkaXRSZWN1cnJpbmc6YXQsYnV0dG9uczpbe3RleHQ6ci5lZGl0V2luZG93T2NjdXJyZW5jZSxjbGljazpufSx7dGV4dDpyLmVkaXRXaW5kb3dTZXJpZXMsY2xpY2s6aX1dfSl9LF9jcmVhdGVCdXR0b246ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50ZW1wbGF0ZXx8c3Qsbj10eXBlb2YgZT09PU8/ZTplLm5hbWV8fGUudGV4dCxpPXtjbGFzc05hbWU6XCJrLXNjaGVkdWxlci1cIisobnx8XCJcIikucmVwbGFjZSgvXFxzL2csXCJcIiksdGV4dDpuLGF0dHI6XCJcIn07aWYoIShufHxVKGUpJiZlLnRlbXBsYXRlKSl0aHJvdyBFcnJvcihcIkN1c3RvbSBjb21tYW5kcyBzaG91bGQgaGF2ZSBuYW1lIHNwZWNpZmllZFwiKTtyZXR1cm4gVShlKT8oZS5jbGFzc05hbWUmJihlLmNsYXNzTmFtZSs9XCIgXCIraS5jbGFzc05hbWUpLFwiZWRpdFwiPT09biYmVShlLnRleHQpJiYoZT1XKCEwLHt9LGUpLGUudGV4dD1lLnRleHQuZWRpdCksaT1XKCEwLGksdltuXSxlKSk6aT1XKCEwLGksdltuXSksQS50ZW1wbGF0ZSh0KShpKX0sX2NvbnZlcnREYXRlczpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuZGF0YVNvdXJjZS5yZWFkZXIudGltZXpvbmUsaT1lLnN0YXJ0VGltZXpvbmUscj1lLmVuZFRpbWV6b25lLG89ZS5zdGFydCxhPWUuc3RhcnQ7dD10fHxcImFwcGx5XCIsaT1pfHxyLHI9cnx8aSxpJiYobj9cImFwcGx5XCI9PT10PyhvPUEudGltZXpvbmUuY29udmVydChlLnN0YXJ0LG4saSksYT1BLnRpbWV6b25lLmNvbnZlcnQoZS5lbmQsbixyKSk6KG89QS50aW1lem9uZS5jb252ZXJ0KGUuc3RhcnQsaSxuKSxhPUEudGltZXpvbmUuY29udmVydChlLmVuZCxyLG4pKToobz1BLnRpbWV6b25lW3RdKGUuc3RhcnQsaSksYT1BLnRpbWV6b25lW3RdKGUuZW5kLHIpKSxlLl9zZXQoXCJzdGFydFwiLG8pLGUuX3NldChcImVuZFwiLGEpKX0sX2NyZWF0ZUVkaXRvcjpmdW5jdGlvbigpe3ZhciBlLG49dGhpcztlPW4uX2VkaXRvcj10aGlzLl9pc01vYmlsZSgpJiZBLm1vYmlsZS51aS5QYW5lP25ldyB3KHRoaXMud3JhcHBlcixXKHt9LHRoaXMub3B0aW9ucyx7dGFyZ2V0OnRoaXMsdGltZXpvbmU6bi5kYXRhU291cmNlLnJlYWRlci50aW1lem9uZSxyZXNvdXJjZXM6bi5yZXNvdXJjZXMsY3JlYXRlQnV0dG9uOmoodGhpcy5fY3JlYXRlQnV0dG9uLHRoaXMpfSkpOm5ldyBiKHRoaXMud3JhcHBlcixXKHt9LHRoaXMub3B0aW9ucyx7dGFyZ2V0OnRoaXMsY3JlYXRlQnV0dG9uOmoodGhpcy5fY3JlYXRlQnV0dG9uLHRoaXMpLHRpbWV6b25lOm4uZGF0YVNvdXJjZS5yZWFkZXIudGltZXpvbmUscmVzb3VyY2VzOm4ucmVzb3VyY2VzfSkpLGUuYmluZChcImNhbmNlbFwiLGZ1bmN0aW9uKGUpe3JldHVybiBuLnRyaWdnZXIoXCJjYW5jZWxcIix7Y29udGFpbmVyOmUuY29udGFpbmVyLGV2ZW50OmUubW9kZWx9KT8oZS5wcmV2ZW50RGVmYXVsdCgpLHQpOihuLmNhbmNlbEV2ZW50KCksbi5mb2N1cygpLHQpfSksZS5iaW5kKFwiZWRpdFwiLGZ1bmN0aW9uKGUpe24udHJpZ2dlcihldCx7Y29udGFpbmVyOmUuY29udGFpbmVyLGV2ZW50OmUubW9kZWx9KSYmZS5wcmV2ZW50RGVmYXVsdCgpfSksZS5iaW5kKFwic2F2ZVwiLGZ1bmN0aW9uKCl7bi5zYXZlRXZlbnQoKX0pLGUuYmluZChcInJlbW92ZVwiLGZ1bmN0aW9uKGUpe24ucmVtb3ZlRXZlbnQoZS5tb2RlbCl9KX0sX2NyZWF0ZVBvcHVwRWRpdG9yOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2VkaXRvcjsoIWUuaXNOZXcoKXx8ZS5pc09jY3VycmVuY2UoKSkmJihlLmlzT2NjdXJyZW5jZSgpJiZ0aGlzLl9jb252ZXJ0RGF0ZXMoZS5yZWN1cnJlbmNlSWQ/dGhpcy5kYXRhU291cmNlLmdldChlLnJlY3VycmVuY2VJZCk6ZSksdGhpcy5fY29udmVydERhdGVzKGUpKSx0aGlzLmVkaXRhYmxlPXQuZWRpdEV2ZW50KGUpfSxyZW1vdmVFdmVudDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJzdHJpbmdcIj09dHlwZW9mIGU/dC5vY2N1cnJlbmNlQnlVaWQoZSk6ZTtuJiYobi5pc1JlY3VycmluZygpP3QuX2RlbGV0ZVJlY3VycmluZ0RpYWxvZyhuKTp0Ll9jb25maXJtYXRpb24oZnVuY3Rpb24oZSl7ZXx8dC5fcmVtb3ZlRXZlbnQobil9LG4pKX0sb2NjdXJyZW5jZUJ5VWlkOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZGF0YVNvdXJjZS5nZXRCeVVpZChlKTtyZXR1cm4gdHx8KHQ9bCh0aGlzLl9kYXRhLGUpKSx0fSxvY2N1cnJlbmNlc0luUmFuZ2U6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IEEuZGF0YS5RdWVyeSh0aGlzLl9kYXRhKS5maWx0ZXIoe2xvZ2ljOlwib3JcIixmaWx0ZXJzOlt7bG9naWM6XCJhbmRcIixmaWx0ZXJzOlt7ZmllbGQ6XCJzdGFydFwiLG9wZXJhdG9yOlwiZ3RlXCIsdmFsdWU6ZX0se2ZpZWxkOlwiZW5kXCIsb3BlcmF0b3I6XCJndGVcIix2YWx1ZTplfSx7ZmllbGQ6XCJzdGFydFwiLG9wZXJhdG9yOlwibHRcIix2YWx1ZTp0fV19LHtsb2dpYzpcImFuZFwiLGZpbHRlcnM6W3tmaWVsZDpcInN0YXJ0XCIsb3BlcmF0b3I6XCJsdGVcIix2YWx1ZTplfSx7ZmllbGQ6XCJlbmRcIixvcGVyYXRvcjpcImd0XCIsdmFsdWU6ZX1dfV19KS50b0FycmF5KCl9LF9yZW1vdmVFdmVudDpmdW5jdGlvbihlKXt0aGlzLnRyaWdnZXIoWCx7ZXZlbnQ6ZX0pfHx0aGlzLmRhdGFTb3VyY2UucmVtb3ZlKGUpJiZ0aGlzLmRhdGFTb3VyY2Uuc3luYygpfSxfZGVsZXRlUmVjdXJyaW5nRGlhbG9nOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLGk9ZnVuY3Rpb24oKXt2YXIgZT1uLnJlY3VycmVuY2VJZD9uOm4udG9PY2N1cnJlbmNlKCksaT10LmRhdGFTb3VyY2UuZ2V0KGUucmVjdXJyZW5jZUlkKTt0Ll9jb252ZXJ0RGF0ZXMoaSksdC5fcmVtb3ZlRXZlbnQoZSl9LHI9ZnVuY3Rpb24oKXtuLnJlY3VycmVuY2VJZCYmKG49dC5kYXRhU291cmNlLmdldChuLnJlY3VycmVuY2VJZCkpLHQuX3JlbW92ZUV2ZW50KG4pfSxvPXQub3B0aW9ucy5tZXNzYWdlcy5yZWN1cnJlbmNlTWVzc2FnZXM7dC5zaG93RGlhbG9nKHttb2RlbDplLHRpdGxlOm8uZGVsZXRlV2luZG93VGl0bGUsdGV4dDpvLmRlbGV0ZVJlY3VycmluZz9vLmRlbGV0ZVJlY3VycmluZzpvdCxidXR0b25zOlt7dGV4dDpvLmRlbGV0ZVdpbmRvd09jY3VycmVuY2UsY2xpY2s6aX0se3RleHQ6by5kZWxldGVXaW5kb3dTZXJpZXMsY2xpY2s6cn1dfSl9LF91bmJpbmRWaWV3OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5hbmd1bGFyKFwiY2xlYW51cFwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOnQuaXRlbXMoKX19KSxlLmRlc3Ryb3koKX0sX2JpbmRWaWV3OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5vcHRpb25zLmVkaXRhYmxlJiYodC5fdmlld1JlbW92ZUhhbmRsZXImJmUudW5iaW5kKFgsdC5fdmlld1JlbW92ZUhhbmRsZXIpLHQuX3ZpZXdSZW1vdmVIYW5kbGVyPWZ1bmN0aW9uKGUpe3QucmVtb3ZlRXZlbnQoZS51aWQpfSxlLmJpbmQoWCx0Ll92aWV3UmVtb3ZlSGFuZGxlciksdC5fdmlld0FkZEhhbmRsZXImJmUudW5iaW5kKFosdC5fdmlld0FkZEhhbmRsZXIpLHQuX3ZpZXdBZGRIYW5kbGVyPWZ1bmN0aW9uKGUpe3QuYWRkRXZlbnQoZS5ldmVudEluZm8pfSxlLmJpbmQoWix0aGlzLl92aWV3QWRkSGFuZGxlciksdC5fdmlld0VkaXRIYW5kbGVyJiZlLnVuYmluZChldCx0Ll92aWV3RWRpdEhhbmRsZXIpLHQuX3ZpZXdFZGl0SGFuZGxlcj1mdW5jdGlvbihlKXt0LmVkaXRFdmVudChlLnVpZCl9LGUuYmluZChldCx0aGlzLl92aWV3RWRpdEhhbmRsZXIpKSx0Ll92aWV3TmF2aWdhdGVIYW5kbGVyJiZlLnVuYmluZChcIm5hdmlnYXRlXCIsdC5fdmlld05hdmlnYXRlSGFuZGxlciksdC5fdmlld05hdmlnYXRlSGFuZGxlcj1mdW5jdGlvbihlKXt2YXIgbixpO2UudmlldyYmKG49XCJpc1dvcmtEYXlcImluIGUsaT1uP1wiY2hhbmdlV29ya0RheVwiOlwiY2hhbmdlVmlld1wiLHQudHJpZ2dlcihcIm5hdmlnYXRlXCIse3ZpZXc6ZS52aWV3LGlzV29ya0RheTplLmlzV29ya0RheSxhY3Rpb246aSxkYXRlOmUuZGF0ZX0pfHwobiYmKHQuX3dvcmtEYXlNb2RlPWUuaXNXb3JrRGF5KSx0Ll9zZWxlY3RWaWV3KGUudmlldyksdC5kYXRlKGUuZGF0ZSkpKX0sZS5iaW5kKFwibmF2aWdhdGVcIix0Ll92aWV3TmF2aWdhdGVIYW5kbGVyKSx0Ll92aWV3QWN0aXZhdGVIYW5kbGVyJiZlLnVuYmluZChcImFjdGl2YXRlXCIsdC5fdmlld0FjdGl2YXRlSGFuZGxlciksdC5fdmlld0FjdGl2YXRlSGFuZGxlcj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dC5fc2VsZWN0aW9uJiYoZS5jb25zdHJhaW5TZWxlY3Rpb24odC5fc2VsZWN0aW9uKSx0Ll9zZWxlY3QoKSx0Ll9hZGp1c3RTZWxlY3RlZERhdGUoKSl9LGUuYmluZChcImFjdGl2YXRlXCIsdC5fdmlld0FjdGl2YXRlSGFuZGxlcil9LF9zZWxlY3RWaWV3OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZSYmdC52aWV3c1tlXSYmKHQuX3NlbGVjdGVkVmlldyYmdC5fdW5iaW5kVmlldyh0Ll9zZWxlY3RlZFZpZXcpLHQuX3NlbGVjdGVkVmlldz10Ll9yZW5kZXJWaWV3KGUpLHQuX3NlbGVjdGVkVmlld05hbWU9ZSx0LnRvb2xiYXIuZmluZChcIi5rLXNjaGVkdWxlci12aWV3cyBsaVwiKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIikuZW5kKCkuZmluZChcIi5rLXZpZXctXCIrZS5yZXBsYWNlKC9cXC4vZyxcIlxcXFwuXCIpLnRvTG93ZXJDYXNlKCkpLmFkZENsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiKSl9LHZpZXc6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztyZXR1cm4gZT8obi5fc2VsZWN0VmlldyhlKSxuLnJlYmluZCgpLHQpOm4uX3NlbGVjdGVkVmlld30sX3JlbmRlclZpZXc6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5faW5pdGlhbGl6ZVZpZXcoZSk7cmV0dXJuIHRoaXMuX2JpbmRWaWV3KHQpLHRoaXMuX21vZGVsLnNldChcImZvcm1hdHRlZERhdGVcIix0LmRhdGVGb3JUaXRsZSgpKSx0fSxyZXNpemU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRTaXplKCksbj10aGlzLl9zaXplLGk9dGhpcy52aWV3KCk7aSYmaS5ncm91cHMmJihlfHwhbnx8dC53aWR0aCE9PW4ud2lkdGh8fHQuaGVpZ2h0IT09bi5oZWlnaHQpJiYodGhpcy5yZWZyZXNoKHthY3Rpb246XCJyZXNpemVcIn0pLHRoaXMuX3NpemU9dCl9LF9hZGp1c3RTZWxlY3RlZERhdGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9tb2RlbC5zZWxlY3RlZERhdGUsdD10aGlzLl9zZWxlY3Rpb24sbj10LnN0YXJ0O24mJiFBLmRhdGUuaXNJbkRhdGVSYW5nZShlLEkobiksSSh0LmVuZCkpJiZlLnNldEZ1bGxZZWFyKG4uZ2V0RnVsbFllYXIoKSxuLmdldE1vbnRoKCksbi5nZXREYXRlKCkpfSxfaW5pdGlhbGl6ZVZpZXc6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMudmlld3NbZV07aWYoaSl7aWYodD1VKGkpLG49aS50eXBlLHR5cGVvZiBuPT09TyYmKG49QS5nZXR0ZXIoaS50eXBlKSh3aW5kb3cpKSwhbil0aHJvdyBFcnJvcihcIlRoZXJlIGlzIG5vIHN1Y2ggdmlld1wiKTtpPW5ldyBuKHRoaXMud3JhcHBlcixoKFcoITAse30sdGhpcy5vcHRpb25zLHQ/aTp7fSx7cmVzb3VyY2VzOnRoaXMucmVzb3VyY2VzLGRhdGU6dGhpcy5kYXRlKCksc2hvd1dvcmtIb3Vyczp0aGlzLl93b3JrRGF5TW9kZX0pKSl9cmV0dXJuIGl9LF92aWV3czpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbyxhLHMsbCxjPXRoaXMub3B0aW9ucy52aWV3cztmb3IodGhpcy52aWV3cz17fSxhPTAscz1jLmxlbmd0aDtzPmE7YSsrKWw9ITEsZT1jW2FdLGk9VShlKSxpPyhvPXI9ZS50eXBlP2UudHlwZTplLHR5cGVvZiBvIT09TyYmKHI9ZS50aXRsZSxsPSEwKSk6bz1yPWUsdD14W3JdLHQmJiFsJiYoZS50eXBlPXQudHlwZSx0LnRpdGxlPXRoaXMub3B0aW9ucy5tZXNzYWdlcy52aWV3c1tyXSxcImRheVwiPT09dC50eXBlP3QubWVzc2FnZXM9e2FsbERheTp0aGlzLm9wdGlvbnMubWVzc2FnZXMuYWxsRGF5fTpcImFnZW5kYVwiPT09dC50eXBlJiYodC5tZXNzYWdlcz17ZXZlbnQ6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLmV2ZW50LGRhdGU6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLmRhdGUsdGltZTp0aGlzLm9wdGlvbnMubWVzc2FnZXMudGltZX0pKSxlPVcoe3RpdGxlOnJ9LHQsaT9lOnt9KSxyJiYodGhpcy52aWV3c1tyXT1lLCghbnx8ZS5zZWxlY3RlZCkmJihuPXIpKTtuJiYodGhpcy5fc2VsZWN0ZWRWaWV3TmFtZT1uKX0scmViaW5kOmZ1bmN0aW9uKCl7dGhpcy5kYXRhU291cmNlLmZldGNoKCl9LF9kYXRhU291cmNlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUub3B0aW9ucyxuPXQuZGF0YVNvdXJjZTtuPXEobik/e2RhdGE6bn06biwhdC50aW1lem9uZXx8biBpbnN0YW5jZW9mIHd0P24gaW5zdGFuY2VvZiB3dCYmKHQudGltZXpvbmU9bi5zY2hlbWE/bi5zY2hlbWEudGltZXpvbmU6XCJcIik6bj1XKCEwLG4se3NjaGVtYTp7dGltZXpvbmU6dC50aW1lem9uZX19KSxlLmRhdGFTb3VyY2UmJmUuX3JlZnJlc2hIYW5kbGVyP2UuZGF0YVNvdXJjZS51bmJpbmQoSyxlLl9yZWZyZXNoSGFuZGxlcikudW5iaW5kKFwicHJvZ3Jlc3NcIixlLl9wcm9ncmVzc0hhbmRsZXIpLnVuYmluZChcImVycm9yXCIsZS5fZXJyb3JIYW5kbGVyKTooZS5fcmVmcmVzaEhhbmRsZXI9aihlLnJlZnJlc2gsZSksZS5fcHJvZ3Jlc3NIYW5kbGVyPWooZS5fcmVxdWVzdFN0YXJ0LGUpLGUuX2Vycm9ySGFuZGxlcj1qKGUuX2Vycm9yLGUpKSxlLmRhdGFTb3VyY2U9QS5kYXRhLlNjaGVkdWxlckRhdGFTb3VyY2UuY3JlYXRlKG4pLmJpbmQoSyxlLl9yZWZyZXNoSGFuZGxlcikuYmluZChcInByb2dyZXNzXCIsZS5fcHJvZ3Jlc3NIYW5kbGVyKS5iaW5kKFwiZXJyb3JcIixlLl9lcnJvckhhbmRsZXIpLGUub3B0aW9ucy5kYXRhU291cmNlPWUuZGF0YVNvdXJjZX0sX2Vycm9yOmZ1bmN0aW9uKCl7dGhpcy5fcHJvZ3Jlc3MoITEpfSxfcmVxdWVzdFN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5fcHJvZ3Jlc3MoITApfSxfcHJvZ3Jlc3M6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5lbGVtZW50LmZpbmQoXCIuay1zY2hlZHVsZXItY29udGVudFwiKTtBLnVpLnByb2dyZXNzKHQsZSl9LF9yZXNvdXJjZXM6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscixvLGE9dGhpcyxzPWEub3B0aW9ucy5yZXNvdXJjZXM7Zm9yKHQ9MDtzLmxlbmd0aD50O3QrKyl7aWYobj1zW3RdLGk9bi5maWVsZCxyPW4uZGF0YVNvdXJjZSwhaXx8IXIpdGhyb3cgRXJyb3IoJ1RoZSBcImZpZWxkXCIgYW5kIFwiZGF0YVNvdXJjZVwiIG9wdGlvbnMgb2YgdGhlIHNjaGVkdWxlciByZXNvdXJjZSBhcmUgbWFuZGF0b3J5LicpO2EucmVzb3VyY2VzLnB1c2goe2ZpZWxkOmksbmFtZTpuLm5hbWV8fGksdGl0bGU6bi50aXRsZXx8aSxkYXRhVGV4dEZpZWxkOm4uZGF0YVRleHRGaWVsZHx8XCJ0ZXh0XCIsZGF0YVZhbHVlRmllbGQ6bi5kYXRhVmFsdWVGaWVsZHx8XCJ2YWx1ZVwiLGRhdGFDb2xvckZpZWxkOm4uZGF0YUNvbG9yRmllbGR8fFwiY29sb3JcIix2YWx1ZVByaW1pdGl2ZTpudWxsIT1uLnZhbHVlUHJpbWl0aXZlP24udmFsdWVQcmltaXRpdmU6ITAsbXVsdGlwbGU6bi5tdWx0aXBsZXx8ITEsZGF0YVNvdXJjZTpBLmRhdGEuRGF0YVNvdXJjZS5jcmVhdGUocil9KX1vPWUubWFwKGEucmVzb3VyY2VzLGZ1bmN0aW9uKGUpe3JldHVybiBlLmRhdGFTb3VyY2UuZmV0Y2goKX0pLGUud2hlbi5hcHBseShudWxsLG8pLnRoZW4oZnVuY3Rpb24oKXthLm9wdGlvbnMuYXV0b0JpbmQ/YS52aWV3KGEuX3NlbGVjdGVkVmlld05hbWUpOmEuX3NlbGVjdFZpZXcoYS5fc2VsZWN0ZWRWaWV3TmFtZSl9KX0sX2luaXRNb2RlbDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbW9kZWw9QS5vYnNlcnZhYmxlKHtzZWxlY3RlZERhdGU6bmV3IERhdGUodGhpcy5vcHRpb25zLmRhdGUpLGZvcm1hdHRlZERhdGU6XCJcIn0pLGUuX21vZGVsLmJpbmQoXCJjaGFuZ2VcIixmdW5jdGlvbih0KXtcInNlbGVjdGVkRGF0ZVwiPT09dC5maWVsZCYmZS52aWV3KGUuX3NlbGVjdGVkVmlld05hbWUpfSl9LF93cmFwcGVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUub3B0aW9ucyxuPXQuaGVpZ2h0LGk9dC53aWR0aDtlLndyYXBwZXI9ZS5lbGVtZW50LmFkZENsYXNzKFwiay13aWRnZXQgay1zY2hlZHVsZXIgay1mbG9hdHdyYXBcIikuYXR0cihcInJvbGVcIixcImdyaWRcIikuYXR0cihcImFyaWEtbXVsdGlzZWxlY3RhYmxlXCIsITApLGUuX2lzTW9iaWxlKCkmJmUud3JhcHBlci5hZGRDbGFzcyhcImstc2NoZWR1bGVyLW1vYmlsZVwiKSxlLl9pc01vYmlsZVBob25lVmlldygpJiZlLndyYXBwZXIuYWRkQ2xhc3MoXCJrLXNjaGVkdWxlci1waG9uZVwiKSxuJiZlLndyYXBwZXIuaGVpZ2h0KG4pLGkmJmUud3JhcHBlci53aWR0aChpKX0sZGF0ZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZSYmSShlKT49SSh0aGlzLm9wdGlvbnMubWluKSYmSShlKTw9SSh0aGlzLm9wdGlvbnMubWF4KSYmdGhpcy5fbW9kZWwuc2V0KFwic2VsZWN0ZWREYXRlXCIsZSksSSh0aGlzLl9tb2RlbC5nZXQoXCJzZWxlY3RlZERhdGVcIikpfSxfdG9vbGJhcjpmdW5jdGlvbigpe3ZhciBuLGkscj10aGlzLG89ci5vcHRpb25zLGE9W107by50b29sYmFyJiYoYT1lLmlzQXJyYXkoby50b29sYmFyKT9vLnRvb2xiYXI6W28udG9vbGJhcl0pLG49dGhpcy5faXNNb2JpbGVQaG9uZVZpZXcoKT9jdDpsdCxpPWUobih7bWVzc2FnZXM6by5tZXNzYWdlcyxwZGY6ZS5ncmVwKGEsZnVuY3Rpb24oZSl7cmV0dXJuXCJwZGZcIj09ZXx8XCJwZGZcIj09ZS5uYW1lfSkubGVuZ3RoPjAsbnM6QS5ucyx2aWV3czpyLnZpZXdzfSkpLHIud3JhcHBlci5hcHBlbmQoaSksci50b29sYmFyPWksQS5iaW5kKHIudG9vbGJhcixyLl9tb2RlbCksaS5vbihZKyQsXCIuay1wZGZcIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksci5zYXZlQXNQREYoKX0pLGkub24oWSskLFwiLmstc2NoZWR1bGVyLW5hdmlnYXRpb24gbGlcIixmdW5jdGlvbihuKXt2YXIgaT1lKHRoaXMpLG89bmV3IERhdGUoci5kYXRlKCkpLGE9XCJcIjtpZihuLnByZXZlbnREZWZhdWx0KCksaS5oYXNDbGFzcyhcImstbmF2LXRvZGF5XCIpKWE9XCJ0b2RheVwiLG89bmV3IERhdGU7ZWxzZSBpZihpLmhhc0NsYXNzKFwiay1uYXYtbmV4dFwiKSlhPVwibmV4dFwiLG89ci52aWV3KCkubmV4dERhdGUoKTtlbHNlIGlmKGkuaGFzQ2xhc3MoXCJrLW5hdi1wcmV2XCIpKWE9XCJwcmV2aW91c1wiLG89ci52aWV3KCkucHJldmlvdXNEYXRlKCk7ZWxzZSBpZihpLmhhc0NsYXNzKFwiay1uYXYtY3VycmVudFwiKSYmIXIuX2lzTW9iaWxlUGhvbmVWaWV3KCkpcmV0dXJuIHIuX3Nob3dDYWxlbmRhcigpLHQ7ci50cmlnZ2VyKFwibmF2aWdhdGVcIix7dmlldzpyLl9zZWxlY3RlZFZpZXdOYW1lLGFjdGlvbjphLGRhdGU6b30pfHxyLmRhdGUobyl9KSxpLm9uKFkrJCxcIi5rLXNjaGVkdWxlci12aWV3cyBsaVwiLGZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKTt2YXIgbj1lKHRoaXMpLmF0dHIoQS5hdHRyKFwibmFtZVwiKSk7ci50cmlnZ2VyKFwibmF2aWdhdGVcIix7dmlldzpuLGFjdGlvbjpcImNoYW5nZVZpZXdcIixkYXRlOnIuZGF0ZSgpfSl8fHIudmlldyhuKX0pLGkuZmluZChcImxpXCIpLmhvdmVyKGZ1bmN0aW9uKCl7ZSh0aGlzKS5hZGRDbGFzcyhcImstc3RhdGUtaG92ZXJcIil9LGZ1bmN0aW9uKCl7ZSh0aGlzKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtaG92ZXJcIil9KX0sX3Nob3dDYWxlbmRhcjpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LnRvb2xiYXIuZmluZChcIi5rLW5hdi1jdXJyZW50XCIpLGk9ZSgnPGRpdiBjbGFzcz1cImstY2FsZW5kYXItY29udGFpbmVyXCI+PGRpdiBjbGFzcz1cImstc2NoZWR1bGVyLWNhbGVuZGFyXCIvPjwvZGl2PicpO3QucG9wdXB8fCh0LnBvcHVwPW5ldyBIKGkse2FuY2hvcjpuLGFjdGl2YXRlOmZ1bmN0aW9uKCl7dC5jYWxlbmRhcnx8KHQuY2FsZW5kYXI9bmV3IE4odGhpcy5lbGVtZW50LmZpbmQoXCIuay1zY2hlZHVsZXItY2FsZW5kYXJcIikse2NoYW5nZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMudmFsdWUoKTt0LnRyaWdnZXIoXCJuYXZpZ2F0ZVwiLHt2aWV3OnQuX3NlbGVjdGVkVmlld05hbWUsYWN0aW9uOlwiY2hhbmdlRGF0ZVwiLGRhdGU6ZX0pfHwodC5kYXRlKGUpLHQucG9wdXAuY2xvc2UoKSl9LG1pbjp0Lm9wdGlvbnMubWluLG1heDp0Lm9wdGlvbnMubWF4fSkpLHQuY2FsZW5kYXIudmFsdWUodC5kYXRlKCkpfSxjb3B5QW5jaG9yU3R5bGVzOiExfSkpLHQucG9wdXAub3BlbigpfSxyZWZyZXNoOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10aGlzLnZpZXcoKTt0aGlzLl9wcm9ncmVzcyghMSksdGhpcy5hbmd1bGFyKFwiY2xlYW51cFwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOnQuaXRlbXMoKX19KSxlPWV8fHt9LG4mJihlJiZcIml0ZW1jaGFuZ2VcIj09PWUuYWN0aW9uJiYodGhpcy5fZWRpdG9yLmVkaXRhYmxlfHx0aGlzLl9wcmV2ZW50UmVmcmVzaCl8fHRoaXMudHJpZ2dlcihcImRhdGFCaW5kaW5nXCIse2FjdGlvbjplLmFjdGlvbnx8XCJyZWJpbmRcIixpbmRleDplLmluZGV4LGl0ZW1zOmUuaXRlbXN9KXx8KGUmJlwicmVzaXplXCI9PT1lLmFjdGlvbnx8IXRoaXMuX2VkaXRvcnx8dGhpcy5fZWRpdG9yLmNsb3NlKCksdGhpcy5fZGF0YT10aGlzLmRhdGFTb3VyY2UuZXhwYW5kKG4uc3RhcnREYXRlKCksbi5lbmREYXRlKCkpLG4ucmVuZGVyKHRoaXMuX2RhdGEpLHRoaXMudHJpZ2dlcihcImRhdGFCb3VuZFwiKSkpfSxzbG90QnlQb3NpdGlvbjpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcy52aWV3KCk7cmV0dXJuIGkuX3Nsb3RCeVBvc2l0aW9uPyhuPWkuX3Nsb3RCeVBvc2l0aW9uKGUsdCksbj97c3RhcnREYXRlOm4uc3RhcnREYXRlKCksZW5kRGF0ZTpuLmVuZERhdGUoKSxncm91cEluZGV4Om4uZ3JvdXBJbmRleCxlbGVtZW50Om4uZWxlbWVudCxpc0RheVNsb3Q6bi5pc0RheVNsb3R9Om51bGwpOm51bGx9LHNsb3RCeUVsZW1lbnQ6ZnVuY3Rpb24odCl7dmFyIG49ZSh0KS5vZmZzZXQoKTtcbnJldHVybiB0aGlzLnNsb3RCeVBvc2l0aW9uKG4ubGVmdCxuLnRvcCl9LHJlc291cmNlc0J5U2xvdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy52aWV3KCkuX3Jlc291cmNlQnlTbG90KGUpfX0pLHg9e2RheTp7dHlwZTpcImtlbmRvLnVpLkRheVZpZXdcIn0sd2Vlazp7dHlwZTpcImtlbmRvLnVpLldlZWtWaWV3XCJ9LHdvcmtXZWVrOnt0eXBlOlwia2VuZG8udWkuV29ya1dlZWtWaWV3XCJ9LGFnZW5kYTp7dHlwZTpcImtlbmRvLnVpLkFnZW5kYVZpZXdcIn0sbW9udGg6e3R5cGU6XCJrZW5kby51aS5Nb250aFZpZXdcIn0sdGltZWxpbmU6e3R5cGU6XCJrZW5kby51aS5UaW1lbGluZVZpZXdcIn0sdGltZWxpbmVXZWVrOnt0eXBlOlwia2VuZG8udWkuVGltZWxpbmVXZWVrVmlld1wifSx0aW1lbGluZVdvcmtXZWVrOnt0eXBlOlwia2VuZG8udWkuVGltZWxpbmVXb3JrV2Vla1ZpZXdcIn0sdGltZWxpbmVNb250aDp7dHlwZTpcImtlbmRvLnVpLlRpbWVsaW5lTW9udGhWaWV3XCJ9fSxCLnBsdWdpbihrKSxBLlBERk1peGluJiZBLlBERk1peGluLmV4dGVuZChrLnByb3RvdHlwZSksQz1MLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1BLnRpbWV6b25lLndpbmRvd3Nfem9uZXM7aWYoIWl8fCFBLnRpbWV6b25lLnpvbmVzX3RpdGxlcyl0aHJvdyBFcnJvcihcImtlbmRvLnRpbWV6b25lcy5taW4uanMgaXMgbm90IGluY2x1ZGVkLlwiKTtMLmZuLmluaXQuY2FsbChuLGUsdCksbi53cmFwcGVyPW4uZWxlbWVudCxuLl96b25lc1F1ZXJ5PW5ldyBBLmRhdGEuUXVlcnkoaSksbi5fem9uZVRpdGxlSWQ9QS5ndWlkKCksbi5fem9uZVRpdGxlUGlja2VyKCksbi5fem9uZVBpY2tlcigpLG4udmFsdWUobi5vcHRpb25zLnZhbHVlKX0sb3B0aW9uczp7bmFtZTpcIlRpbWV6b25lRWRpdG9yXCIsdmFsdWU6XCJcIixvcHRpb25MYWJlbDpcIk5vIHRpbWV6b25lXCJ9LGV2ZW50czpbXCJjaGFuZ2VcIl0sX3pvbmVUaXRsZVBpY2tlcjpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj1lKCc8aW5wdXQgaWQ9XCInK3QuX3pvbmVUaXRsZUlkKydcIi8+JykuYXBwZW5kVG8odC53cmFwcGVyKTt0Ll96b25lVGl0bGU9bmV3IEEudWkuRHJvcERvd25MaXN0KG4se2RhdGFTb3VyY2U6QS50aW1lem9uZS56b25lc190aXRsZXMsZGF0YVZhbHVlRmllbGQ6XCJvdGhlcl96b25lXCIsZGF0YVRleHRGaWVsZDpcIm5hbWVcIixvcHRpb25MYWJlbDp0Lm9wdGlvbnMub3B0aW9uTGFiZWwsY2FzY2FkZTpmdW5jdGlvbigpe3RoaXMudmFsdWUoKXx8dC5fem9uZS53cmFwcGVyLmhpZGUoKX19KX0sX3pvbmVQaWNrZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49ZShcIjxpbnB1dCAvPlwiKS5hcHBlbmRUbyh0aGlzLndyYXBwZXIpO3QuX3pvbmU9bmV3IEEudWkuRHJvcERvd25MaXN0KG4se2RhdGFWYWx1ZUZpZWxkOlwiem9uZVwiLGRhdGFUZXh0RmllbGQ6XCJ0ZXJyaXRvcnlcIixkYXRhU291cmNlOnQuX3pvbmVzUXVlcnkuZGF0YSxjYXNjYWRlRnJvbTp0Ll96b25lVGl0bGVJZCxjYXNjYWRlOmZ1bmN0aW9uKCl7dC5fdmFsdWU9dGhpcy52YWx1ZSgpLHQudHJpZ2dlcihcImNoYW5nZVwiKX0sZGF0YUJvdW5kOmZ1bmN0aW9uKCl7dC5fdmFsdWU9dGhpcy52YWx1ZSgpLHRoaXMud3JhcHBlci50b2dnbGUodGhpcy5kYXRhU291cmNlLnZpZXcoKS5sZW5ndGg+MSl9fSksdC5fem9uZS53cmFwcGVyLmhpZGUoKX0sZGVzdHJveTpmdW5jdGlvbigpe0wuZm4uZGVzdHJveS5jYWxsKHRoaXMpLEEuZGVzdHJveSh0aGlzLndyYXBwZXIpfSx2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbixpPXRoaXM7cmV0dXJuIGU9PT10P2kuX3ZhbHVlOihuPWkuX3pvbmVzUXVlcnkuZmlsdGVyKHtmaWVsZDpcInpvbmVcIixvcGVyYXRvcjpcImVxXCIsdmFsdWU6ZX0pLmRhdGFbMF0sbj8oaS5fem9uZVRpdGxlLnZhbHVlKG4ub3RoZXJfem9uZSksaS5fem9uZS52YWx1ZShuLnpvbmUpKTppLl96b25lVGl0bGUudmFsdWUoXCJcIiksdCl9fSksQi5wbHVnaW4oQyksUz1BLnRlbXBsYXRlKCc8b3B0aW9uIHZhbHVlPVwiIz1vdGhlcl96b25lI1wiPiM9bmFtZSM8L29wdGlvbj4nKSxUPUEudGVtcGxhdGUoJzxvcHRpb24gdmFsdWU9XCIjPXpvbmUjXCI+Iz10ZXJyaXRvcnkjPC9vcHRpb24+JyksRD1MLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1BLnRpbWV6b25lLndpbmRvd3Nfem9uZXM7aWYoIWl8fCFBLnRpbWV6b25lLnpvbmVzX3RpdGxlcyl0aHJvdyBFcnJvcihcImtlbmRvLnRpbWV6b25lcy5taW4uanMgaXMgbm90IGluY2x1ZGVkLlwiKTtMLmZuLmluaXQuY2FsbChuLGUsdCksbi53cmFwcGVyPW4uZWxlbWVudCxuLl96b25lc1F1ZXJ5PW5ldyBBLmRhdGEuUXVlcnkoaSksbi5fem9uZVRpdGxlUGlja2VyKCksbi5fem9uZVBpY2tlcigpLG4udmFsdWUobi5vcHRpb25zLnZhbHVlKX0sb3B0aW9uczp7bmFtZTpcIk1vYmlsZVRpbWV6b25lRWRpdG9yXCIsb3B0aW9uTGFiZWw6XCJObyB0aW1lem9uZVwiLHZhbHVlOlwiXCJ9LGV2ZW50czpbXCJjaGFuZ2VcIl0sX2JpbmRab25lczpmdW5jdGlvbihlKXt2YXIgdD1lP3RoaXMuX2ZpbHRlcihlKTpbXTt0aGlzLl96b25lLmh0bWwodGhpcy5fb3B0aW9ucyh0LFQpKX0sX2ZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fem9uZXNRdWVyeS5maWx0ZXIoe2ZpZWxkOlwib3RoZXJfem9uZVwiLG9wZXJhdG9yOlwiZXFcIix2YWx1ZTplfSkuZGF0YX0sX29wdGlvbnM6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPTAscj1cIlwiLG89ZS5sZW5ndGg7Zm9yKG4mJihyKz10KHtvdGhlcl96b25lOlwiXCIsbmFtZTpufSkpO28+aTtpKyspcis9dChlW2ldKTtyZXR1cm4gcn0sX3pvbmVUaXRsZVBpY2tlcjpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10Ll9vcHRpb25zKEEudGltZXpvbmUuem9uZXNfdGl0bGVzLFMsdC5vcHRpb25zLm9wdGlvbkxhYmVsKTt0Ll96b25lVGl0bGU9ZShcIjxzZWxlY3Q+XCIrbitcIjwvc2VsZWN0PlwiKS5hcHBlbmRUbyh0LndyYXBwZXIpLmNoYW5nZShmdW5jdGlvbigpe3ZhciBlPXRoaXMudmFsdWUsbj10Ll96b25lO3QuX2JpbmRab25lcyhlKSxlJiZuWzBdLmNoaWxkcmVuLmxlbmd0aD4xP24uc2hvdygpOm4uaGlkZSgpLHQuX3ZhbHVlPW5bMF0udmFsdWUsdC50cmlnZ2VyKFwiY2hhbmdlXCIpfSl9LF96b25lUGlja2VyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0Ll96b25lPWUoJzxzZWxlY3Qgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj48L3NlbGVjdD4nKS5hcHBlbmRUbyh0aGlzLndyYXBwZXIpLmNoYW5nZShmdW5jdGlvbigpe3QuX3ZhbHVlPXRoaXMudmFsdWUsdC50cmlnZ2VyKFwiY2hhbmdlXCIpfSksdC5fYmluZFpvbmVzKHQuX3pvbmVUaXRsZS52YWwoKSksdC5fdmFsdWU9dC5fem9uZVswXS52YWx1ZX0sZGVzdHJveTpmdW5jdGlvbigpe0wuZm4uZGVzdHJveS5jYWxsKHRoaXMpLEEuZGVzdHJveSh0aGlzLndyYXBwZXIpfSx2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbixpPXRoaXMscj1pLl96b25lLG89XCJcIixhPVwiXCI7cmV0dXJuIGU9PT10P2kuX3ZhbHVlOihuPWkuX3pvbmVzUXVlcnkuZmlsdGVyKHtmaWVsZDpcInpvbmVcIixvcGVyYXRvcjpcImVxXCIsdmFsdWU6ZX0pLmRhdGFbMF0sbiYmKGE9bi56b25lLG89bi5vdGhlcl96b25lKSxpLl96b25lVGl0bGUudmFsKG8pLGkuX2JpbmRab25lcyhvKSxyLnZhbChhKSxhPXJbMF0udmFsdWUsYSYmclswXS5jaGlsZHJlbi5sZW5ndGg+MT9yLnNob3coKTpyLmhpZGUoKSxpLl92YWx1ZT1hLHQpfX0pLEIucGx1Z2luKEQpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXt2YXIgdD13aW5kb3cua2VuZG8sbj10LnVpLldpZGdldCxpPWUucHJveHkscj1NYXRoLmFicyxvPTIwLGE9dC5DbGFzcy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24obixpLG8pe289ZS5leHRlbmQoe21pblhEZWx0YTozMCxtYXhZRGVsdGE6MjAsbWF4RHVyYXRpb246MWUzfSxvKSxuZXcgdC5Vc2VyRXZlbnRzKG4se3N1cmZhY2U6by5zdXJmYWNlLGFsbG93U2VsZWN0aW9uOiEwLHN0YXJ0OmZ1bmN0aW9uKGUpezIqcihlLngudmVsb2NpdHkpPj1yKGUueS52ZWxvY2l0eSkmJmUuc2VuZGVyLmNhcHR1cmUoKX0sbW92ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnRvdWNoLG49ZS5ldmVudC50aW1lU3RhbXAtdC5zdGFydFRpbWUsYT10LnguaW5pdGlhbERlbHRhPjA/XCJyaWdodFwiOlwibGVmdFwiO3IodC54LmluaXRpYWxEZWx0YSk+PW8ubWluWERlbHRhJiZyKHQueS5pbml0aWFsRGVsdGEpPG8ubWF4WURlbHRhJiZvLm1heER1cmF0aW9uPm4mJihpKHtkaXJlY3Rpb246YSx0b3VjaDp0LHRhcmdldDp0LnRhcmdldH0pLHQuY2FuY2VsKCkpfX0pfX0pLHM9bi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBvKGUpe3JldHVybiBmdW5jdGlvbih0KXtzLl90cmlnZ2VyVG91Y2goZSx0KX19ZnVuY3Rpb24gYShlKXtyZXR1cm4gZnVuY3Rpb24odCl7cy50cmlnZ2VyKGUse3RvdWNoZXM6dC50b3VjaGVzLGRpc3RhbmNlOnQuZGlzdGFuY2UsY2VudGVyOnQuY2VudGVyLGV2ZW50OnQuZXZlbnR9KX19dmFyIHM9dGhpcztuLmZuLmluaXQuY2FsbChzLGUscikscj1zLm9wdGlvbnMsZT1zLmVsZW1lbnQscy5ldmVudHM9bmV3IHQuVXNlckV2ZW50cyhlLHtmaWx0ZXI6ci5maWx0ZXIsc3VyZmFjZTpyLnN1cmZhY2UsbWluSG9sZDpyLm1pbkhvbGQsbXVsdGlUb3VjaDpyLm11bHRpVG91Y2gsYWxsb3dTZWxlY3Rpb246ITAscHJlc3M6byhcInRvdWNoc3RhcnRcIiksaG9sZDpvKFwiaG9sZFwiKSx0YXA6aShzLFwiX3RhcFwiKSxnZXN0dXJlc3RhcnQ6YShcImdlc3R1cmVzdGFydFwiKSxnZXN0dXJlY2hhbmdlOmEoXCJnZXN0dXJlY2hhbmdlXCIpLGdlc3R1cmVlbmQ6YShcImdlc3R1cmVlbmRcIil9KSxyLmVuYWJsZVN3aXBlPyhzLmV2ZW50cy5iaW5kKFwic3RhcnRcIixpKHMsXCJfc3dpcGVzdGFydFwiKSkscy5ldmVudHMuYmluZChcIm1vdmVcIixpKHMsXCJfc3dpcGVtb3ZlXCIpKSk6KHMuZXZlbnRzLmJpbmQoXCJzdGFydFwiLGkocyxcIl9kcmFnc3RhcnRcIikpLHMuZXZlbnRzLmJpbmQoXCJtb3ZlXCIsbyhcImRyYWdcIikpLHMuZXZlbnRzLmJpbmQoXCJlbmRcIixvKFwiZHJhZ2VuZFwiKSkpLHQubm90aWZ5KHMpfSxldmVudHM6W1widG91Y2hzdGFydFwiLFwiZHJhZ3N0YXJ0XCIsXCJkcmFnXCIsXCJkcmFnZW5kXCIsXCJ0YXBcIixcImRvdWJsZXRhcFwiLFwiaG9sZFwiLFwic3dpcGVcIixcImdlc3R1cmVzdGFydFwiLFwiZ2VzdHVyZWNoYW5nZVwiLFwiZ2VzdHVyZWVuZFwiXSxvcHRpb25zOntuYW1lOlwiVG91Y2hcIixzdXJmYWNlOm51bGwsZ2xvYmFsOiExLG11bHRpVG91Y2g6ITEsZW5hYmxlU3dpcGU6ITEsbWluWERlbHRhOjMwLG1heFlEZWx0YToyMCxtYXhEdXJhdGlvbjoxZTMsbWluSG9sZDo4MDAsZG91YmxlVGFwVGltZW91dDo4MDB9LGNhbmNlbDpmdW5jdGlvbigpe3RoaXMuZXZlbnRzLmNhbmNlbCgpfSxfdHJpZ2dlclRvdWNoOmZ1bmN0aW9uKGUsdCl7dGhpcy50cmlnZ2VyKGUse3RvdWNoOnQudG91Y2gsZXZlbnQ6dC5ldmVudH0pJiZ0LnByZXZlbnREZWZhdWx0KCl9LF90YXA6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4ubGFzdFRhcCxyPWUudG91Y2g7aSYmbi5vcHRpb25zLmRvdWJsZVRhcFRpbWVvdXQ+ci5lbmRUaW1lLWkuZW5kVGltZSYmdC50b3VjaERlbHRhKHIsaSkuZGlzdGFuY2U8bz8obi5fdHJpZ2dlclRvdWNoKFwiZG91YmxldGFwXCIsZSksbi5sYXN0VGFwPW51bGwpOihuLl90cmlnZ2VyVG91Y2goXCJ0YXBcIixlKSxuLmxhc3RUYXA9cil9LF9kcmFnc3RhcnQ6ZnVuY3Rpb24oZSl7dGhpcy5fdHJpZ2dlclRvdWNoKFwiZHJhZ3N0YXJ0XCIsZSl9LF9zd2lwZXN0YXJ0OmZ1bmN0aW9uKGUpezIqcihlLngudmVsb2NpdHkpPj1yKGUueS52ZWxvY2l0eSkmJmUuc2VuZGVyLmNhcHR1cmUoKX0sX3N3aXBlbW92ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLGk9ZS50b3VjaCxvPWUuZXZlbnQudGltZVN0YW1wLWkuc3RhcnRUaW1lLGE9aS54LmluaXRpYWxEZWx0YT4wP1wicmlnaHRcIjpcImxlZnRcIjtyKGkueC5pbml0aWFsRGVsdGEpPj1uLm1pblhEZWx0YSYmcihpLnkuaW5pdGlhbERlbHRhKTxuLm1heFlEZWx0YSYmbi5tYXhEdXJhdGlvbj5vJiYodC50cmlnZ2VyKFwic3dpcGVcIix7ZGlyZWN0aW9uOmEsdG91Y2g6ZS50b3VjaH0pLGkuY2FuY2VsKCkpfX0pO3dpbmRvdy5qUXVlcnkuZm4ua2VuZG9Nb2JpbGVTd2lwZT1mdW5jdGlvbihlLHQpe3RoaXMuZWFjaChmdW5jdGlvbigpe25ldyBhKHRoaXMsZSx0KX0pfSx0LnVpLnBsdWdpbihzKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXt2YXIgdCxuLGk9W10scj1lLmNsYXNzTmFtZTtmb3IodD0wLG49ZS5sZXZlbDtuPnQ7dCsrKWkucHVzaChvKFwic3BhblwiLHtjbGFzc05hbWU6cn0pKTtyZXR1cm4gaX1mdW5jdGlvbiBuKCl7dmFyIHQ9aS5fYWN0aXZlRWxlbWVudCgpO1wiYm9keVwiIT09dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZlKHQpLmJsdXIoKX12YXIgaT13aW5kb3cua2VuZG8scj1pLmRvbSxvPXIuZWxlbWVudCxhPXIudGV4dCxzPWkuc3VwcG9ydC5tb2JpbGVPUyxsPWkudWksYz1sLldpZGdldCxkPWUuZXh0ZW5kLHU9ZS5tYXAsaD1lLmlzRnVuY3Rpb24scD1pLmtleXMsZj17dGl0bGU6XCJUaXRsZVwiLHN0YXJ0OlwiU3RhcnQgVGltZVwiLGVuZDpcIkVuZCBUaW1lXCIscGVyY2VudENvbXBsZXRlOlwiJSBEb25lXCIscGFyZW50SWQ6XCJQcmVkZWNlc3NvciBJRFwiLGlkOlwiSURcIixvcmRlcklkOlwiT3JkZXIgSURcIn0sZz1cInN0cmluZ1wiLG09XCIua2VuZG9HYW50dExpc3RcIix2PVwiY2xpY2tcIixfPVwiLlwiLHk9e3dyYXBwZXI6XCJrLXRyZWVsaXN0IGstZ3JpZCBrLXdpZGdldFwiLGhlYWRlcjpcImstaGVhZGVyXCIsYWx0Olwiay1hbHRcIixlZGl0Q2VsbDpcImstZWRpdC1jZWxsXCIsZ3JvdXA6XCJrLXRyZWVsaXN0LWdyb3VwXCIsZ3JpZEhlYWRlcjpcImstZ3JpZC1oZWFkZXJcIixncmlkSGVhZGVyV3JhcDpcImstZ3JpZC1oZWFkZXItd3JhcFwiLGdyaWRDb250ZW50Olwiay1ncmlkLWNvbnRlbnRcIixncmlkQ29udGVudFdyYXA6XCJrLWdyaWQtY29udGVudFwiLHNlbGVjdGVkOlwiay1zdGF0ZS1zZWxlY3RlZFwiLGljb246XCJrLWljb25cIixpY29uQ29sbGFwc2U6XCJrLWktY29sbGFwc2VcIixpY29uRXhwYW5kOlwiay1pLWV4cGFuZFwiLGljb25IaWRkZW46XCJrLWktbm9uZVwiLGljb25QbGFjZUhvbGRlcjpcImstaWNvbiBrLWktbm9uZVwiLGlucHV0Olwiay1pbnB1dFwiLGRyb3BQb3NpdGlvbnM6XCJrLWluc2VydC10b3Agay1pbnNlcnQtYm90dG9tIGstYWRkIGstaW5zZXJ0LW1pZGRsZVwiLGRyb3BUb3A6XCJrLWluc2VydC10b3BcIixkcm9wQm90dG9tOlwiay1pbnNlcnQtYm90dG9tXCIsZHJvcEFkZDpcImstYWRkXCIsZHJvcE1pZGRsZTpcImstaW5zZXJ0LW1pZGRsZVwiLGRyb3BEZW5pZWQ6XCJrLWRlbmllZFwiLGRyYWdTdGF0dXM6XCJrLWRyYWctc3RhdHVzXCIsZHJhZ0NsdWU6XCJrLWRyYWctY2x1ZVwiLGRyYWdDbHVlVGV4dDpcImstY2x1ZS10ZXh0XCJ9LHc9bC5HYW50dExpc3Q9Yy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXtjLmZuLmluaXQuY2FsbCh0aGlzLGUsdCksMD09PXRoaXMub3B0aW9ucy5jb2x1bW5zLmxlbmd0aCYmdGhpcy5vcHRpb25zLmNvbHVtbnMucHVzaChcInRpdGxlXCIpLHRoaXMuZGF0YVNvdXJjZT10aGlzLm9wdGlvbnMuZGF0YVNvdXJjZSx0aGlzLl9jb2x1bW5zKCksdGhpcy5fbGF5b3V0KCksdGhpcy5fZG9tVHJlZXMoKSx0aGlzLl9oZWFkZXIoKSx0aGlzLl9zb3J0YWJsZSgpLHRoaXMuX2VkaXRhYmxlKCksdGhpcy5fc2VsZWN0YWJsZSgpLHRoaXMuX2RyYWdnYWJsZSgpLHRoaXMuX2F0dGFjaEV2ZW50cygpLHRoaXMuX2FkanVzdEhlaWdodCgpfSxfYWRqdXN0SGVpZ2h0OmZ1bmN0aW9uKCl7dGhpcy5jb250ZW50LmhlaWdodCh0aGlzLmVsZW1lbnQuaGVpZ2h0KCktdGhpcy5oZWFkZXIucGFyZW50KCkub3V0ZXJIZWlnaHQoKSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtjLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLl9yZW9yZGVyRHJhZ2dhYmxlJiZ0aGlzLl9yZW9yZGVyRHJhZ2dhYmxlLmRlc3Ryb3koKSx0aGlzLl90YWJsZURyb3BBcmVhJiZ0aGlzLl90YWJsZURyb3BBcmVhLmRlc3Ryb3koKSx0aGlzLl9jb250ZW50RHJvcEFyZWEmJnRoaXMuX2NvbnRlbnREcm9wQXJlYS5kZXN0cm95KCksdGhpcy50b3VjaCYmdGhpcy50b3VjaC5kZXN0cm95KCksdGhpcy5jb250ZW50Lm9mZihtKSx0aGlzLmhlYWRlcj1udWxsLHRoaXMuY29udGVudD1udWxsLHRoaXMubGV2ZWxzPW51bGwsaS5kZXN0cm95KHRoaXMuZWxlbWVudCl9LG9wdGlvbnM6e25hbWU6XCJHYW50dExpc3RcIixzZWxlY3RhYmxlOiEwLGVkaXRhYmxlOiEwfSxfYXR0YWNoRXZlbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXcuc3R5bGVzO3QuY29udGVudC5vbih2K20sXCJ0ZCA+IHNwYW4uXCIrbi5pY29uK1wiOm5vdCguXCIrbi5pY29uSGlkZGVuK1wiKVwiLGZ1bmN0aW9uKG4pe3ZhciBpPWUodGhpcykscj10Ll9tb2RlbEZyb21FbGVtZW50KGkpO3Iuc2V0KFwiZXhwYW5kZWRcIiwhci5nZXQoXCJleHBhbmRlZFwiKSksbi5zdG9wUHJvcGFnYXRpb24oKX0pfSxfZG9tVHJlZXM6ZnVuY3Rpb24oKXt0aGlzLmhlYWRlclRyZWU9bmV3IHIuVHJlZSh0aGlzLmhlYWRlclswXSksdGhpcy5jb250ZW50VHJlZT1uZXcgci5UcmVlKHRoaXMuY29udGVudFswXSl9LF9jb2x1bW5zOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLmNvbHVtbnMsdD1mdW5jdGlvbigpe3RoaXMuZmllbGQ9XCJcIix0aGlzLnRpdGxlPVwiXCIsdGhpcy5lZGl0YWJsZT0hMSx0aGlzLnNvcnRhYmxlPSExfTt0aGlzLmNvbHVtbnM9dShlLGZ1bmN0aW9uKGUpe3JldHVybiBlPVwic3RyaW5nXCI9PXR5cGVvZiBlP3tmaWVsZDplLHRpdGxlOmZbZV19OmUsZChuZXcgdCxlKX0pfSxfbGF5b3V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50LHQ9dy5zdHlsZXM7ZS5hZGRDbGFzcyh0LndyYXBwZXIpLmFwcGVuZChcIjxkaXYgY2xhc3M9J1wiK3QuZ3JpZEhlYWRlcitcIic+PGRpdiBjbGFzcz0nXCIrdC5ncmlkSGVhZGVyV3JhcCtcIic+PC9kaXY+PC9kaXY+XCIpLmFwcGVuZChcIjxkaXYgY2xhc3M9J1wiK3QuZ3JpZENvbnRlbnRXcmFwK1wiJz48L2Rpdj5cIiksdGhpcy5oZWFkZXI9ZS5maW5kKF8rdC5ncmlkSGVhZGVyV3JhcCksdGhpcy5jb250ZW50PWUuZmluZChfK3QuZ3JpZENvbnRlbnQpfSxfaGVhZGVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5oZWFkZXJUcmVlLHQ9byhcImNvbGdyb3VwXCIsbnVsbCx0aGlzLl9jb2xzKCkpLG49byhcInRoZWFkXCIse3JvbGU6XCJyb3dncm91cFwifSxbbyhcInRyXCIse3JvbGU6XCJyb3dcIn0sdGhpcy5fdGhzKCkpXSksaT1vKFwidGFibGVcIix7c3R5bGU6e1wibWluLXdpZHRoXCI6dGhpcy5vcHRpb25zLmxpc3RXaWR0aCtcInB4XCJ9LHJvbGU6XCJncmlkXCJ9LFt0LG5dKTtlLnJlbmRlcihbaV0pfSxfcmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG4saTt0aGlzLmxldmVscz1be2ZpZWxkOm51bGwsdmFsdWU6MH1dLHQ9byhcImNvbGdyb3VwXCIsbnVsbCx0aGlzLl9jb2xzKCkpLG49byhcInRib2R5XCIse3JvbGU6XCJyb3dncm91cFwifSx0aGlzLl90cnMoZSkpLGk9byhcInRhYmxlXCIse3N0eWxlOntcIm1pbi13aWR0aFwiOnRoaXMub3B0aW9ucy5saXN0V2lkdGgrXCJweFwifSx0YWJJbmRleDowLHJvbGU6XCJ0cmVlZ3JpZFwifSxbdCxuXSksdGhpcy5jb250ZW50VHJlZS5yZW5kZXIoW2ldKSx0aGlzLnRyaWdnZXIoXCJyZW5kZXJcIil9LF90aHM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyPXRoaXMuY29sdW1ucyxzPVtdO2ZvcihuPTAsaT1yLmxlbmd0aDtpPm47bisrKWU9cltuXSx0PXtcImRhdGEtZmllbGRcIjplLmZpZWxkLFwiZGF0YS10aXRsZVwiOmUudGl0bGUsY2xhc3NOYW1lOncuc3R5bGVzLmhlYWRlcixyb2xlOlwiY29sdW1uaGVhZGVyXCJ9LHMucHVzaChvKFwidGhcIix0LFthKGUudGl0bGUpXSkpO3JldHVybiBzfSxfY29sczpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsYT10aGlzLmNvbHVtbnMscz1bXTtmb3IoaT0wLHI9YS5sZW5ndGg7cj5pO2krKyllPWFbaV0sbj1lLndpZHRoLHQ9biYmMCE9PXBhcnNlSW50KG4sMTApP3tzdHlsZTp7d2lkdGg6dHlwZW9mIG49PT1nP246bitcInB4XCJ9fTpudWxsLHMucHVzaChvKFwiY29sXCIsdCxbXSkpO3JldHVybiBzfSxfdHJzOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYT1bXSxzPVtdLGw9dy5zdHlsZXM7Zm9yKHI9MCxvPWUubGVuZ3RoO28+cjtyKyspdD1lW3JdLGk9dGhpcy5fbGV2ZWxzKHtpZHg6dC5wYXJlbnRJZCxpZDp0LmlkLHN1bW1hcnk6dC5zdW1tYXJ5fSksbj17XCJkYXRhLXVpZFwiOnQudWlkLFwiZGF0YS1sZXZlbFwiOmkscm9sZTpcInJvd1wifSx0LnN1bW1hcnkmJihuW1wiYXJpYS1leHBhbmRlZFwiXT10LmV4cGFuZGVkKSxyJTIhPT0wJiZzLnB1c2gobC5hbHQpLHQuc3VtbWFyeSYmcy5wdXNoKGwuZ3JvdXApLHMubGVuZ3RoJiYobi5jbGFzc05hbWU9cy5qb2luKFwiIFwiKSksYS5wdXNoKHRoaXMuX3Rkcyh7dGFzazp0LGF0dHI6bixsZXZlbDppfSkpLHM9W107cmV0dXJuIGF9LF90ZHM6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9W10sYT10aGlzLmNvbHVtbnM7Zm9yKG49MCxpPWEubGVuZ3RoO2k+bjtuKyspdD1hW25dLHIucHVzaCh0aGlzLl90ZCh7dGFzazplLnRhc2ssY29sdW1uOnQsbGV2ZWw6ZS5sZXZlbH0pKTtyZXR1cm4gbyhcInRyXCIsZS5hdHRyLHIpfSxfdGQ6ZnVuY3Rpb24oZSl7dmFyIG4scixzPVtdLGw9dGhpcy5vcHRpb25zLnJlc291cmNlc0ZpZWxkLGM9dy5zdHlsZXMsZD1lLnRhc2ssdT1lLmNvbHVtbixoPWQuZ2V0KHUuZmllbGQpfHxbXTtpZih1LmZpZWxkPT1sKXtmb3Iobj1bXSxyPTA7aC5sZW5ndGg+cjtyKyspbi5wdXNoKGkuZm9ybWF0KFwiezB9IFt7MX1dXCIsaFtyXS5nZXQoXCJuYW1lXCIpLGhbcl0uZ2V0KFwiZm9ybWF0ZWRWYWx1ZVwiKSkpO249bi5qb2luKFwiLCBcIil9ZWxzZSBuPXUuZm9ybWF0P2kuZm9ybWF0KHUuZm9ybWF0LGgpOmg7cmV0dXJuXCJ0aXRsZVwiPT09dS5maWVsZCYmKHM9dCh7bGV2ZWw6ZS5sZXZlbCxjbGFzc05hbWU6Yy5pY29uUGxhY2VIb2xkZXJ9KSxzLnB1c2gobyhcInNwYW5cIix7Y2xhc3NOYW1lOmMuaWNvbitcIiBcIisoZC5zdW1tYXJ5P2QuZXhwYW5kZWQ/Yy5pY29uQ29sbGFwc2U6Yy5pY29uRXhwYW5kOmMuaWNvbkhpZGRlbil9KSkpLHMucHVzaChvKFwic3BhblwiLG51bGwsW2EobildKSksbyhcInRkXCIse3JvbGU6XCJncmlkY2VsbFwifSxzKX0sX2xldmVsczpmdW5jdGlvbihlKXt2YXIgdCxuLGkscj10aGlzLmxldmVscyxvPWUuc3VtbWFyeSxhPWUuaWR4LHM9ZS5pZDtmb3Iobj0wLGk9ci5sZW5ndGg7aT5uO24rKylpZih0PXJbbl0sdC5maWVsZD09YSlyZXR1cm4gbyYmci5wdXNoKHtmaWVsZDpzLHZhbHVlOnQudmFsdWUrMX0pLHQudmFsdWV9LF9zb3J0YWJsZTpmdW5jdGlvbigpe3ZhciBlLHQsbixyLG8sYT10aGlzLm9wdGlvbnMucmVzb3VyY2VzRmllbGQscz10aGlzLmNvbHVtbnMsbD10aGlzLmhlYWRlci5maW5kKFwidGhcIik7Zm9yKHI9MCxvPWwubGVuZ3RoO28+cjtyKyspZT1zW3JdLGUuc29ydGFibGUmJmUuZmllbGQhPT1hJiYobj1sLmVxKHIpLHQ9bi5kYXRhKFwia2VuZG9Db2x1bW5Tb3J0ZXJcIiksdCYmdC5kZXN0cm95KCksbi5hdHRyKFwiZGF0YS1cIitpLm5zK1wiZmllbGRcIixlLmZpZWxkKS5rZW5kb0NvbHVtblNvcnRlcih7ZGF0YVNvdXJjZTp0aGlzLmRhdGFTb3VyY2V9KSk7bD1udWxsfSxfc2VsZWN0YWJsZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10aGlzLm9wdGlvbnMuc2VsZWN0YWJsZTtuJiZ0aGlzLmNvbnRlbnQub24odittLFwidHJcIixmdW5jdGlvbihuKXt2YXIgaT1lKHRoaXMpO24uY3RybEtleT90LmNsZWFyU2VsZWN0aW9uKCk6dC5zZWxlY3QoaSl9KX0sc2VsZWN0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY29udGVudC5maW5kKGUpLG49dy5zdHlsZXMuc2VsZWN0ZWQ7cmV0dXJuIHQubGVuZ3RoPyh0LnNpYmxpbmdzKF8rbikucmVtb3ZlQ2xhc3MobikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMSkuZW5kKCkuYWRkQ2xhc3MobikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMCksdm9pZCB0aGlzLnRyaWdnZXIoXCJjaGFuZ2VcIikpOnRoaXMuY29udGVudC5maW5kKF8rbil9LGNsZWFyU2VsZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zZWxlY3QoKTtlLmxlbmd0aCYmKGUucmVtb3ZlQ2xhc3Mody5zdHlsZXMuc2VsZWN0ZWQpLHRoaXMudHJpZ2dlcihcImNoYW5nZVwiKSl9LF9zZXREYXRhU291cmNlOmZ1bmN0aW9uKGUpe3RoaXMuZGF0YVNvdXJjZT1lfSxfZWRpdGFibGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGk9dy5zdHlsZXMscj1cInNwYW4uXCIraS5pY29uK1wiOm5vdChcIitpLmljb25IaWRkZW4rXCIpXCIsbz1mdW5jdGlvbigpe3QuZWRpdGFibGUmJnQuZWRpdGFibGUuZW5kKCkmJnQuX2Nsb3NlQ2VsbCgpfSxhPWZ1bmN0aW9uKHQpe3ZhciByPWUodC5jdXJyZW50VGFyZ2V0KTtyLmhhc0NsYXNzKGkuZWRpdENlbGwpfHxuKCl9O3RoaXMub3B0aW9ucy5lZGl0YWJsZSYmKHRoaXMuX3N0YXJ0RWRpdEhhbmRsZXI9ZnVuY3Rpb24obil7dmFyIGk9bi5jdXJyZW50VGFyZ2V0P2Uobi5jdXJyZW50VGFyZ2V0KTpuLHI9dC5fY29sdW1uRnJvbUVsZW1lbnQoaSk7dC5lZGl0YWJsZXx8ci5lZGl0YWJsZSYmdC5fZWRpdENlbGwoe2NlbGw6aSxjb2x1bW46cn0pfSx0LmNvbnRlbnQub24oXCJmb2N1c2luXCIrbSxmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0LnRpbWVyKSx0LnRpbWVyPW51bGx9KS5vbihcImZvY3Vzb3V0XCIrbSxmdW5jdGlvbigpe3QudGltZXI9c2V0VGltZW91dChvLDEpfSkub24oXCJrZXlkb3duXCIrbSxmdW5jdGlvbihlKXt2YXIgaSxyLGE9ZS5rZXlDb2RlO3N3aXRjaChhKXtjYXNlIHAuRU5URVI6bigpLG8oKTticmVhaztjYXNlIHAuRVNDOnQuZWRpdGFibGUmJihpPXQuX2VkaXRhYmxlQ29udGFpbmVyLHI9dC5fbW9kZWxGcm9tRWxlbWVudChpKSx0LnRyaWdnZXIoXCJjYW5jZWxcIix7bW9kZWw6cixjZWxsOml9KXx8dC5fY2xvc2VDZWxsKCEwKSl9fSkscz90LnRvdWNoPXQuY29udGVudC5rZW5kb1RvdWNoKHtmaWx0ZXI6XCJ0ZFwiLHRvdWNoc3RhcnQ6ZnVuY3Rpb24oZSl7YShlLnRvdWNoKX0sZG91YmxldGFwOmZ1bmN0aW9uKG4pe2Uobi50b3VjaC5pbml0aWFsVG91Y2gpLmlzKHIpfHx0Ll9zdGFydEVkaXRIYW5kbGVyKG4udG91Y2gpfX0pLmRhdGEoXCJrZW5kb1RvdWNoXCIpOnQuY29udGVudC5vbihcIm1vdXNlZG93blwiK20sXCJ0ZFwiLGZ1bmN0aW9uKGUpe2EoZSl9KS5vbihcImRibGNsaWNrXCIrbSxcInRkXCIsZnVuY3Rpb24obil7ZShuLnRhcmdldCkuaXMocil8fHQuX3N0YXJ0RWRpdEhhbmRsZXIobil9KSl9LF9lZGl0Q2VsbDpmdW5jdGlvbih0KXt2YXIgbixyPXRoaXMub3B0aW9ucy5yZXNvdXJjZXNGaWVsZCxvPXcuc3R5bGVzLGE9dC5jZWxsLHM9dC5jb2x1bW4sbD10aGlzLl9tb2RlbEZyb21FbGVtZW50KGEpLGM9dGhpcy5kYXRhU291cmNlLl9jcmVhdGVOZXdNb2RlbChsLnRvSlNPTigpKSxkPWMuZmllbGRzW3MuZmllbGRdfHxjW3MuZmllbGRdLHU9ZC52YWxpZGF0aW9uLHA9aS5hdHRyKFwidHlwZVwiKSxmPWkuYXR0cihcImJpbmRcIiksZz17bmFtZTpzLmZpZWxkLHJlcXVpcmVkOmQudmFsaWRhdGlvbj9kLnZhbGlkYXRpb24ucmVxdWlyZWQ9PT0hMDohMX07cmV0dXJuIHMuZmllbGQ9PT1yP3ZvaWQgcy5lZGl0b3IoYSxjKToodGhpcy5fZWRpdGFibGVDb250ZW50PWEuY2hpbGRyZW4oKS5kZXRhY2goKSx0aGlzLl9lZGl0YWJsZUNvbnRhaW5lcj1hLGEuZGF0YShcIm1vZGVsQ29weVwiLGMpLFwiZGF0ZVwiIT09ZC50eXBlJiZcImRhdGVcIiE9PWUudHlwZShkKXx8IS9IfG18c3xGfGd8dS8udGVzdChzLmZvcm1hdCl8fChcInN0YXJ0XCI9PT1zLmZpZWxkJiZkZWxldGUgZC52YWxpZGF0aW9uLmRhdGVDb21wYXJlLGdbZl09XCJ2YWx1ZTpcIitzLmZpZWxkLGdbcF09XCJkYXRlXCIsbj1mdW5jdGlvbih0LG4pe2UoJzxpbnB1dCB0eXBlPVwidGV4dFwiLz4nKS5hdHRyKGcpLmFwcGVuZFRvKHQpLmtlbmRvRGF0ZVRpbWVQaWNrZXIoe2Zvcm1hdDpuLmZvcm1hdH0pfSksdGhpcy5lZGl0YWJsZT1hLmFkZENsYXNzKG8uZWRpdENlbGwpLmtlbmRvRWRpdGFibGUoe2ZpZWxkczp7ZmllbGQ6cy5maWVsZCxmb3JtYXQ6cy5mb3JtYXQsZWRpdG9yOnMuZWRpdG9yfHxufSxtb2RlbDpjLGNsZWFyQ29udGFpbmVyOiExfSkuZGF0YShcImtlbmRvRWRpdGFibGVcIiksdSYmdS5kYXRlQ29tcGFyZSYmaCh1LmRhdGVDb21wYXJlKSYmdS5tZXNzYWdlJiYoZShcIjxzcGFuIFwiK2kuYXR0cihcImZvclwiKSsnPVwiJytzLmZpZWxkKydcIiBjbGFzcz1cImstaW52YWxpZC1tc2dcIi8+JykuaGlkZSgpLmFwcGVuZFRvKGEpLGEuZmluZChcIltuYW1lPVwiK3MuZmllbGQrXCJdXCIpLmF0dHIoaS5hdHRyKFwiZGF0ZUNvbXBhcmUtbXNnXCIpLHUubWVzc2FnZSkpLHZvaWQodGhpcy50cmlnZ2VyKFwiZWRpdFwiLHttb2RlbDpsLGNlbGw6YX0pJiZ0aGlzLl9jbG9zZUNlbGwoITApKSl9LF9jbG9zZUNlbGw6ZnVuY3Rpb24oZSl7dmFyIHQ9dy5zdHlsZXMsbj10aGlzLl9lZGl0YWJsZUNvbnRhaW5lcixpPXRoaXMuX21vZGVsRnJvbUVsZW1lbnQobikscj10aGlzLl9jb2x1bW5Gcm9tRWxlbWVudChuKSxvPXIuZmllbGQsYT1uLmRhdGEoXCJtb2RlbENvcHlcIikscz17fTtzW29dPWEuZ2V0KG8pLG4uZW1wdHkoKS5yZW1vdmVEYXRhKFwibW9kZWxDb3B5XCIpLnJlbW92ZUNsYXNzKHQuZWRpdENlbGwpLmFwcGVuZCh0aGlzLl9lZGl0YWJsZUNvbnRlbnQpLHRoaXMuZWRpdGFibGUuZGVzdHJveSgpLHRoaXMuZWRpdGFibGU9bnVsbCx0aGlzLl9lZGl0YWJsZUNvbnRhaW5lcj1udWxsLHRoaXMuX2VkaXRhYmxlQ29udGVudD1udWxsLGV8fChcInN0YXJ0XCI9PT1vJiYocy5lbmQ9bmV3IERhdGUocy5zdGFydC5nZXRUaW1lKCkraS5kdXJhdGlvbigpKSksdGhpcy50cmlnZ2VyKFwidXBkYXRlXCIse3Rhc2s6aSx1cGRhdGVJbmZvOnN9KSl9LF9kcmFnZ2FibGU6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMscj1udWxsLG89ITAsYT13LnN0eWxlcyxsPVwidHJbXCIraS5hdHRyKFwibGV2ZWxcIikrXCIgPSAwXTpsYXN0XCIsYz17fSx1PWZ1bmN0aW9uKCl7cj1udWxsLHQ9bnVsbCxvPSEwLGM9e319LGg9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWU7dDspe2lmKHIuZ2V0KFwiaWRcIik9PT10LmdldChcImlkXCIpKXtvPSExO2JyZWFrfXQ9bi5kYXRhU291cmNlLnRhc2tQYXJlbnQodCl9fSxwPWZ1bmN0aW9uKCl7dmFyIG49ZSh0KS5oZWlnaHQoKSxyPWkuZ2V0T2Zmc2V0KHQpLnRvcDtkKHQse2JlZm9yZUxpbWl0OnIrLjI1Km4sYWZ0ZXJMaW1pdDpyKy43NSpufSl9LGY9ZnVuY3Rpb24oZSl7dmFyIG4scj1lLmxvY2F0aW9uLG89YS5kcm9wQWRkLHM9XCJhZGRcIixsPXBhcnNlSW50KHQuYXR0cihpLmF0dHIoXCJsZXZlbFwiKSksMTApO3QuYmVmb3JlTGltaXQ+PXI/KG49dC5wcmV2KCksbz1hLmRyb3BUb3Ascz1cImluc2VydC1iZWZvcmVcIik6cj49dC5hZnRlckxpbWl0JiYobj10Lm5leHQoKSxvPWEuZHJvcEJvdHRvbSxzPVwiaW5zZXJ0LWFmdGVyXCIpLG4mJnBhcnNlSW50KG4uYXR0cihpLmF0dHIoXCJsZXZlbFwiKSksMTApPT09bCYmKG89YS5kcm9wTWlkZGxlKSxjLmNsYXNzTmFtZT1vLGMuY29tbWFuZD1zfSxnPWZ1bmN0aW9uKCl7cmV0dXJuIG4uX3Jlb3JkZXJEcmFnZ2FibGUuaGludC5jaGlsZHJlbihfK2EuZHJhZ1N0YXR1cykucmVtb3ZlQ2xhc3MoYS5kcm9wUG9zaXRpb25zKX07dGhpcy5vcHRpb25zLmVkaXRhYmxlJiYodGhpcy5fcmVvcmRlckRyYWdnYWJsZT10aGlzLmNvbnRlbnQua2VuZG9EcmFnZ2FibGUoe2Rpc3RhbmNlOjEwLGhvbGRUb0RyYWc6cyxncm91cDpcImxpc3RHcm91cFwiLGZpbHRlcjpcInRyW2RhdGEtdWlkXVwiLGlnbm9yZTpfK2EuaW5wdXQsaGludDpmdW5jdGlvbih0KXtyZXR1cm4gZSgnPGRpdiBjbGFzcz1cIicrYS5oZWFkZXIrXCIgXCIrYS5kcmFnQ2x1ZSsnXCIvPicpLmNzcyh7d2lkdGg6MzAwLHBhZGRpbmdMZWZ0OnQuY3NzKFwicGFkZGluZ0xlZnRcIikscGFkZGluZ1JpZ2h0OnQuY3NzKFwicGFkZGluZ1JpZ2h0XCIpLGxpbmVIZWlnaHQ6dC5oZWlnaHQoKStcInB4XCIscGFkZGluZ1RvcDp0LmNzcyhcInBhZGRpbmdUb3BcIikscGFkZGluZ0JvdHRvbTp0LmNzcyhcInBhZGRpbmdCb3R0b21cIil9KS5hcHBlbmQoJzxzcGFuIGNsYXNzPVwiJythLmljb24rXCIgXCIrYS5kcmFnU3RhdHVzKydcIiAvPjxzcGFuIGNsYXNzPVwiJythLmRyYWdDbHVlVGV4dCsnXCIvPicpfSxjdXJzb3JPZmZzZXQ6e3RvcDotMjAsbGVmdDowfSxjb250YWluZXI6dGhpcy5jb250ZW50LGRyYWdzdGFydDpmdW5jdGlvbihlKXtuLmVkaXRhYmxlJiZlLnByZXZlbnREZWZhdWx0KCkscj1uLl9tb2RlbEZyb21FbGVtZW50KGUuY3VycmVudFRhcmdldCksdGhpcy5oaW50LmNoaWxkcmVuKF8rYS5kcmFnQ2x1ZVRleHQpLnRleHQoci5nZXQoXCJ0aXRsZVwiKSl9LGRyYWc6ZnVuY3Rpb24oZSl7byYmKGYoZS55KSxnKCkuYWRkQ2xhc3MoYy5jbGFzc05hbWUpKX0sZHJhZ2VuZDpmdW5jdGlvbigpe3UoKX0sZHJhZ2NhbmNlbDpmdW5jdGlvbigpe3UoKX19KS5kYXRhKFwia2VuZG9EcmFnZ2FibGVcIiksdGhpcy5fdGFibGVEcm9wQXJlYT10aGlzLmNvbnRlbnQua2VuZG9Ecm9wVGFyZ2V0QXJlYSh7ZGlzdGFuY2U6MCxncm91cDpcImxpc3RHcm91cFwiLGZpbHRlcjpcInRyW2RhdGEtdWlkXVwiLGRyYWdlbnRlcjpmdW5jdGlvbihlKXt0PWUuZHJvcFRhcmdldCxoKG4uX21vZGVsRnJvbUVsZW1lbnQodCkpLHAoKSxnKCkudG9nZ2xlQ2xhc3MoYS5kcm9wRGVuaWVkLCFvKX0sZHJhZ2xlYXZlOmZ1bmN0aW9uKCl7bz0hMCxnKCl9LGRyb3A6ZnVuY3Rpb24oKXt2YXIgZT1uLl9tb2RlbEZyb21FbGVtZW50KHQpLGk9ZS5vcmRlcklkLGE9e3BhcmVudElkOmUucGFyZW50SWR9O2lmKG8pe3N3aXRjaChjLmNvbW1hbmQpe2Nhc2VcImFkZFwiOmEucGFyZW50SWQ9ZS5pZDticmVhaztjYXNlXCJpbnNlcnQtYmVmb3JlXCI6YS5vcmRlcklkPWUucGFyZW50SWQ9PT1yLnBhcmVudElkJiZlLm9yZGVySWQ+ci5vcmRlcklkP2ktMTppO2JyZWFrO2Nhc2VcImluc2VydC1hZnRlclwiOmEub3JkZXJJZD1lLnBhcmVudElkPT09ci5wYXJlbnRJZCYmZS5vcmRlcklkPnIub3JkZXJJZD9pOmkrMX1uLnRyaWdnZXIoXCJ1cGRhdGVcIix7dGFzazpyLHVwZGF0ZUluZm86YX0pfX19KS5kYXRhKFwia2VuZG9Ecm9wVGFyZ2V0QXJlYVwiKSx0aGlzLl9jb250ZW50RHJvcEFyZWE9dGhpcy5lbGVtZW50LmtlbmRvRHJvcFRhcmdldEFyZWEoe2Rpc3RhbmNlOjAsZ3JvdXA6XCJsaXN0R3JvdXBcIixmaWx0ZXI6XythLmdyaWRDb250ZW50LGRyb3A6ZnVuY3Rpb24oKXt2YXIgZT1uLl9tb2RlbEZyb21FbGVtZW50KG4uY29udGVudC5maW5kKGwpKSx0PWUub3JkZXJJZCxpPXtwYXJlbnRJZDpudWxsLG9yZGVySWQ6bnVsbCE9PXIucGFyZW50SWQ/dCsxOnR9O24udHJpZ2dlcihcInVwZGF0ZVwiLHt0YXNrOnIsdXBkYXRlSW5mbzppfSl9fSkuZGF0YShcImtlbmRvRHJvcFRhcmdldEFyZWFcIikpfSxfbW9kZWxGcm9tRWxlbWVudDpmdW5jdGlvbihlKXt2YXIgdD1lLmNsb3Nlc3QoXCJ0clwiKSxuPXRoaXMuZGF0YVNvdXJjZS5nZXRCeVVpZCh0LmF0dHIoaS5hdHRyKFwidWlkXCIpKSk7cmV0dXJuIG59LF9jb2x1bW5Gcm9tRWxlbWVudDpmdW5jdGlvbihlKXt2YXIgdD1lLmNsb3Nlc3QoXCJ0ZFwiKSxuPXQucGFyZW50KCksaT1uLmNoaWxkcmVuKCkuaW5kZXgodCk7cmV0dXJuIHRoaXMuY29sdW1uc1tpXX19KTtkKCEwLGwuR2FudHRMaXN0LHtzdHlsZXM6eX0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3JldHVybiBkZWxldGUgZS5uYW1lLGRlbGV0ZSBlLnByZWZpeCxkZWxldGUgZS52aWV3cyxlfWZ1bmN0aW9uIG4oZSl7dmFyIHQ9W10sbj1lLndvcmtXZWVrU3RhcnQ7Zm9yKHQucHVzaChuKTtlLndvcmtXZWVrRW5kIT1uOyluPjY/bi09NzpuKyssdC5wdXNoKG4pO3JldHVybiB0fWZ1bmN0aW9uIGkoKXt2YXIgdD1rZW5kby5fYWN0aXZlRWxlbWVudCgpO1wiYm9keVwiIT09dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZlKHQpLmJsdXIoKX12YXIgcixvLGE9a2VuZG8udWkuV2lkZ2V0LHM9a2VuZG8uZG9tLmVsZW1lbnQsbD1rZW5kby5kb20udGV4dCxjPWUuaXNQbGFpbk9iamVjdCxkPWUuZXh0ZW5kLHU9a2VuZG8uc3VwcG9ydC5icm93c2VyLGg9a2VuZG8ua2V5cyxwPWtlbmRvLmRhdGEuUXVlcnksZj1cIi5rZW5kb0dhbnR0VGltZWxpbmVcIixnPVwiY2xpY2tcIixtPVwiZGJsY2xpY2tcIix2PVwia2V5ZG93blwiLF89XCIuXCIseT1rZW5kby50ZW1wbGF0ZShcIiM9a2VuZG8udG9TdHJpbmcoc3RhcnQsICd0JykjXCIpLHc9a2VuZG8udGVtcGxhdGUoXCIjPWtlbmRvLnRvU3RyaW5nKHN0YXJ0LCAnZGRkIE0vZGQnKSNcIiksYj1rZW5kby50ZW1wbGF0ZShcIiM9a2VuZG8udG9TdHJpbmcoc3RhcnQsICdkZGQgTS9kZCcpIyAtICM9a2VuZG8udG9TdHJpbmcoa2VuZG8uZGF0ZS5hZGREYXlzKGVuZCwgLTEpLCAnZGRkIE0vZGQnKSNcIiksaz1rZW5kby50ZW1wbGF0ZShcIiM9a2VuZG8udG9TdHJpbmcoc3RhcnQsICdNTU0nKSNcIikseD1rZW5kby50ZW1wbGF0ZShcIiM9a2VuZG8udG9TdHJpbmcoc3RhcnQsICd5eXl5JykjXCIpLEM9a2VuZG8udGVtcGxhdGUoJzxkaXYgY2xhc3M9XCIjPXN0eWxlcy5tYXJxdWVlI1wiPjxkaXYgY2xhc3M9XCIjPXN0eWxlcy5tYXJxdWVlQ29sb3IjXCI+PC9kaXY+PC9kaXY+JyksUz1rZW5kby50ZW1wbGF0ZSgnPGRpdiBzdHlsZT1cInotaW5kZXg6IDEwMDAwMjtcIiBjbGFzcz1cIiM9c3R5bGVzLnRvb2x0aXBXcmFwcGVyI1wiPjxkaXYgY2xhc3M9XCIjPXN0eWxlcy50b29sdGlwQ29udGVudCNcIj48ZGl2PlN0YXJ0OiAjPWtlbmRvLnRvU3RyaW5nKHN0YXJ0LCBcImRkZCBNL2RkIEhIOm1tXCIpIzwvZGl2PjxkaXY+RW5kOiAjPWtlbmRvLnRvU3RyaW5nKGVuZCwgXCJkZGQgTS9kZCBISDptbVwiKSM8L2Rpdj48L2Rpdj48L2Rpdj4nKSxUPWtlbmRvLnRlbXBsYXRlKCc8ZGl2IHN0eWxlPVwiei1pbmRleDogMTAwMDAyO1wiIGNsYXNzPVwiIz1zdHlsZXMudG9vbHRpcFdyYXBwZXIjXCIgPjxkaXYgY2xhc3M9XCIjPXN0eWxlcy50b29sdGlwQ29udGVudCNcIj4jPXRleHQjJTwvZGl2PjxkaXYgY2xhc3M9XCIjPXN0eWxlcy50b29sdGlwQ2FsbG91dCNcIiBzdHlsZT1cImxlZnQ6MTNweDtcIj48L2Rpdj48L2Rpdj4nKSxEPXtkYXk6e3R5cGU6XCJrZW5kby51aS5HYW50dERheVZpZXdcIn0sd2Vlazp7dHlwZTpcImtlbmRvLnVpLkdhbnR0V2Vla1ZpZXdcIn0sbW9udGg6e3R5cGU6XCJrZW5kby51aS5HYW50dE1vbnRoVmlld1wifSx5ZWFyOnt0eXBlOlwia2VuZG8udWkuR2FudHRZZWFyVmlld1wifX0sQT17YWx0Olwiay1hbHRcIixub25Xb3JraW5nOlwiay1ub253b3JrLWhvdXJcIixoZWFkZXI6XCJrLWhlYWRlclwiLGdyaWRIZWFkZXI6XCJrLWdyaWQtaGVhZGVyXCIsZ3JpZEhlYWRlcldyYXA6XCJrLWdyaWQtaGVhZGVyLXdyYXBcIixncmlkQ29udGVudDpcImstZ3JpZC1jb250ZW50XCIscm93c1RhYmxlOlwiay1nYW50dC1yb3dzXCIsY29sdW1uc1RhYmxlOlwiay1nYW50dC1jb2x1bW5zXCIsdGFza3NUYWJsZTpcImstZ2FudHQtdGFza3NcIixyZXNvdXJjZTpcImstcmVzb3VyY2VcIixyZXNvdXJjZUFsdDpcImstcmVzb3VyY2Ugay1hbHRcIix0YXNrOlwiay10YXNrXCIsdGFza1NpbmdsZTpcImstdGFzay1zaW5nbGVcIix0YXNrTWlsZXN0b25lOlwiay10YXNrLW1pbGVzdG9uZVwiLHRhc2tTdW1tYXJ5Olwiay10YXNrLXN1bW1hcnlcIix0YXNrV3JhcDpcImstdGFzay13cmFwXCIsdGFza01pbGVzdG9uZVdyYXA6XCJrLW1pbGVzdG9uZS13cmFwXCIscmVzb3VyY2VzV3JhcDpcImstcmVzb3VyY2VzLXdyYXBcIix0YXNrRG90Olwiay10YXNrLWRvdFwiLHRhc2tEb3RTdGFydDpcImstdGFzay1zdGFydFwiLHRhc2tEb3RFbmQ6XCJrLXRhc2stZW5kXCIsdGFza0RyYWdIYW5kbGU6XCJrLXRhc2stZHJhZ2hhbmRsZVwiLHRhc2tDb250ZW50Olwiay10YXNrLWNvbnRlbnRcIix0YXNrVGVtcGxhdGU6XCJrLXRhc2stdGVtcGxhdGVcIix0YXNrQWN0aW9uczpcImstdGFzay1hY3Rpb25zXCIsdGFza0RlbGV0ZTpcImstdGFzay1kZWxldGVcIix0YXNrQ29tcGxldGU6XCJrLXRhc2stY29tcGxldGVcIixsaW5rOlwiay1saW5rXCIsaWNvbjpcImstaWNvblwiLGljb25EZWxldGU6XCJrLXNpLWNsb3NlXCIsdGFza1Jlc2l6ZUhhbmRsZTpcImstcmVzaXplLWhhbmRsZVwiLHRhc2tSZXNpemVIYW5kbGVXZXN0Olwiay1yZXNpemUtd1wiLHRhc2tSZXNpemVIYW5kbGVFYXN0Olwiay1yZXNpemUtZVwiLHRhc2tTdW1tYXJ5UHJvZ3Jlc3M6XCJrLXRhc2stc3VtbWFyeS1wcm9ncmVzc1wiLHRhc2tTdW1tYXJ5Q29tcGxldGU6XCJrLXRhc2stc3VtbWFyeS1jb21wbGV0ZVwiLGxpbmU6XCJrLWxpbmVcIixsaW5lSG9yaXpvbnRhbDpcImstbGluZS1oXCIsbGluZVZlcnRpY2FsOlwiay1saW5lLXZcIixhcnJvd1dlc3Q6XCJrLWFycm93LXdcIixhcnJvd0Vhc3Q6XCJrLWFycm93LWVcIixkcmFnSGludDpcImstZHJhZy1oaW50XCIsZGVwZW5kZW5jeUhpbnQ6XCJrLWRlcGVuZGVuY3ktaGludFwiLHRvb2x0aXBXcmFwcGVyOlwiay13aWRnZXQgay10b29sdGlwIGstcG9wdXAgay1ncm91cCBrLXJlc2V0XCIsdG9vbHRpcENvbnRlbnQ6XCJrLXRvb2x0aXAtY29udGVudFwiLHRvb2x0aXBDYWxsb3V0Olwiay1jYWxsb3V0IGstY2FsbG91dC1zXCIsY2FsbG91dDpcImstY2FsbG91dFwiLG1hcnF1ZWU6XCJrLW1hcnF1ZWUgay1nYW50dC1tYXJxdWVlXCIsbWFycXVlZUNvbG9yOlwiay1tYXJxdWVlLWNvbG9yXCJ9LEU9a2VuZG8udWkuR2FudHRWaWV3PWEuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7YS5mbi5pbml0LmNhbGwodGhpcyxlLHQpLHRoaXMudGl0bGU9dGhpcy5vcHRpb25zLnRpdGxlfHx0aGlzLm9wdGlvbnMubmFtZSx0aGlzLmhlYWRlcj10aGlzLmVsZW1lbnQuZmluZChfK0Uuc3R5bGVzLmdyaWRIZWFkZXIpLHRoaXMuY29udGVudD10aGlzLmVsZW1lbnQuZmluZChfK0Uuc3R5bGVzLmdyaWRDb250ZW50KSx0aGlzLmNvbnRlbnRXaWR0aD10aGlzLmNvbnRlbnQud2lkdGgoKSx0aGlzLl93b3JrRGF5cz1uKHRoaXMub3B0aW9ucyksdGhpcy5faGVhZGVyVHJlZT10LmhlYWRlclRyZWUsdGhpcy5fdGFza1RyZWU9dC50YXNrVHJlZSx0aGlzLl9kZXBlbmRlbmN5VHJlZT10LmRlcGVuZGVuY3lUcmVlLHRoaXMuX3Rhc2tDb29yZGluYXRlcz17fX0sZGVzdHJveTpmdW5jdGlvbigpe2EuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuaGVhZGVyUm93PW51bGwsdGhpcy5oZWFkZXI9bnVsbCx0aGlzLmNvbnRlbnQ9bnVsbCx0aGlzLl9kcmFnSGludD1udWxsLHRoaXMuX3Jlc2l6ZUhpbnQ9bnVsbCx0aGlzLl9yZXNpemVUb29sdGlwPW51bGwsdGhpcy5fcGVyY2VudENvbXBsZXRlUmVzaXplVG9vbHRpcD1udWxsLHRoaXMuX2hlYWRlclRyZWU9bnVsbCx0aGlzLl90YXNrVHJlZT1udWxsLHRoaXMuX2RlcGVuZGVuY3lUcmVlPW51bGx9LG9wdGlvbnM6e3Nob3dXb3JrSG91cnM6ITEsc2hvd1dvcmtEYXlzOiExLHdvcmtEYXlTdGFydDpuZXcgRGF0ZSgxOTgwLDEsMSw4LDAsMCksd29ya0RheUVuZDpuZXcgRGF0ZSgxOTgwLDEsMSwxNywwLDApLHdvcmtXZWVrU3RhcnQ6MSx3b3JrV2Vla0VuZDo1LGhvdXJTcGFuOjEsc2xvdFNpemU6MTAwfSxyZW5kZXJMYXlvdXQ6ZnVuY3Rpb24oKXt0aGlzLl9zbG90cz10aGlzLl9jcmVhdGVTbG90cygpLHRoaXMuX3RhYmxlV2lkdGg9dGhpcy5fY2FsY3VsYXRlVGFibGVXaWR0aCgpLHRoaXMuY3JlYXRlTGF5b3V0KHRoaXMuX2xheW91dCgpKSx0aGlzLl9zbG90RGltZW5zaW9ucygpLHRoaXMuX2FkanVzdEhlaWdodCgpfSxfYWRqdXN0SGVpZ2h0OmZ1bmN0aW9uKCl7dGhpcy5jb250ZW50LmhlaWdodCh0aGlzLmVsZW1lbnQuaGVpZ2h0KCktdGhpcy5oZWFkZXIub3V0ZXJIZWlnaHQoKSl9LGNyZWF0ZUxheW91dDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9oZWFkZXJzKGUpLG49dGhpcy5fY29sZ3JvdXAoKSxpPXRoaXMuX2hlYWRlclRyZWUscj1zKFwidGhlYWRcIixudWxsLHQpLG89cyhcInRhYmxlXCIse3N0eWxlOnt3aWR0aDp0aGlzLl90YWJsZVdpZHRoK1wicHhcIn19LFtuLHJdKTtpLnJlbmRlcihbb10pLHRoaXMuaGVhZGVyUm93PXRoaXMuaGVhZGVyLmZpbmQoXCJ0YWJsZTpmaXJzdCB0clwiKS5sYXN0KCl9LF9zbG90RGltZW5zaW9uczpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHI9dGhpcy5oZWFkZXJSb3dbMF0uY2hpbGRyZW4sbz10aGlzLl90aW1lU2xvdHMoKTtmb3Iobj0wLGk9ci5sZW5ndGg7aT5uO24rKyl0PXJbbl0sZT1vW25dLGUub2Zmc2V0TGVmdD10Lm9mZnNldExlZnQsZS5vZmZzZXRXaWR0aD10Lm9mZnNldFdpZHRofSxyZW5kZXI6ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLmxlbmd0aCxpPUUuc3R5bGVzLHI9dGhpcy5fcm93c1RhYmxlKG4pLG89dGhpcy5fY29sdW1uc1RhYmxlKG4pLGE9dGhpcy5fdGFza3NUYWJsZShlKTt0aGlzLl90YXNrVHJlZS5yZW5kZXIoW3IsbyxhXSksdD10aGlzLmNvbnRlbnQuZmluZChfK2kucm93c1RhYmxlKSx0aGlzLl9jb250ZW50SGVpZ2h0PXQuaGVpZ2h0KCksdGhpcy5fcm93SGVpZ2h0PXQuZmluZChcInRyXCIpLmhlaWdodCgpLHRoaXMuY29udGVudC5maW5kKF8raS5jb2x1bW5zVGFibGUpLmhlaWdodCh0aGlzLl9jb250ZW50SGVpZ2h0KX0sX3Jvd3NUYWJsZTpmdW5jdGlvbihlKXt2YXIgdCxuLGk9W10scj1FLnN0eWxlcyxvPVtudWxsLHtjbGFzc05hbWU6ci5hbHR9XTtmb3Iobj0wO2U+bjtuKyspdD1zKFwidHJcIixvW24lMl0sW3MoXCJ0ZFwiLG51bGwsW2woXCLCoFwiKV0pXSksaS5wdXNoKHQpO3JldHVybiB0aGlzLl9jcmVhdGVUYWJsZSgxLGkse2NsYXNzTmFtZTpyLnJvd3NUYWJsZX0pfSxfY29sdW1uc1RhYmxlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixvPVtdLGE9RS5zdHlsZXMsYz10aGlzLl90aW1lU2xvdHMoKSxkPWMubGVuZ3RoLHU9MDtmb3Iocj0wO2Q+cjtyKyspdD1jW3JdLGk9e30sbj10LnNwYW4sdSs9biwxIT09biYmKGkuY29sc3Bhbj1uKSx0LmlzTm9uV29ya2luZyYmKGkuY2xhc3NOYW1lPWEubm9uV29ya2luZyksby5wdXNoKHMoXCJ0ZFwiLGksW2woXCLCoFwiKV0pKTtyZXR1cm4gZT1zKFwidHJcIixudWxsLG8pLHRoaXMuX2NyZWF0ZVRhYmxlKHUsW2VdLHtjbGFzc05hbWU6YS5jb2x1bW5zVGFibGV9KX0sX3Rhc2tzVGFibGU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhLGwsYz1bXSxkPUUuc3R5bGVzLHU9dGhpcy5fdGFza0Nvb3JkaW5hdGVzPXt9LGg9dGhpcy5fY2FsY3VsYXRlTWlsZXN0b25lV2lkdGgoKSxwPU1hdGgucm91bmQoaC53aWR0aCksZj10aGlzLm9wdGlvbnMucmVzb3VyY2VzRmllbGQsZz1bZC5yZXNvdXJjZSxkLnJlc291cmNlQWx0XSxtPXRoaXMuX2NhbGN1bGF0ZVJlc291cmNlc01hcmdpbigpLHY9ZnVuY3Rpb24oZSl7dmFyIHQ9aS5sZWZ0LG49dCtpLndpZHRoO3IuaXNNaWxlc3RvbmUoKSYmKHQtPXAvMixuPXQrcCksdVtyLmlkXT17c3RhcnQ6dCxlbmQ6bixyb3dJbmRleDplfX07Zm9yKGE9MCxsPWUubGVuZ3RoO2w+YTthKyspcj1lW2FdLGk9dGhpcy5fdGFza1Bvc2l0aW9uKHIpLHQ9cyhcInRyXCIsbnVsbCksbj1zKFwidGRcIixudWxsLFt0aGlzLl9yZW5kZXJUYXNrKGVbYV0saSldKSxyW2ZdJiZyW2ZdLmxlbmd0aCYmKG89TWF0aC5tYXgoaS53aWR0aHx8aC5jbGllbnRXaWR0aCwwKStpLmxlZnQsbi5jaGlsZHJlbi5wdXNoKHMoXCJkaXZcIix7Y2xhc3NOYW1lOmQucmVzb3VyY2VzV3JhcCxzdHlsZTp7bGVmdDpvK1wicHhcIix3aWR0aDp0aGlzLl90YWJsZVdpZHRoLShvK20pK1wicHhcIn19LHRoaXMuX3JlbmRlclJlc291cmNlcyhyW2ZdLGdbYSUyXSkpKSksdC5jaGlsZHJlbi5wdXNoKG4pLGMucHVzaCh0KSx2KGEpO3JldHVybiB0aGlzLl9jcmVhdGVUYWJsZSgxLGMse2NsYXNzTmFtZTpFLnN0eWxlcy50YXNrc1RhYmxlfSl9LF9jcmVhdGVUYWJsZTpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGE9W107Zm9yKG89MDtlPm87bysrKWEucHVzaChzKFwiY29sXCIpKTtyZXR1cm4gaT1zKFwiY29sZ3JvdXBcIixudWxsLGEpLHI9cyhcInRib2R5XCIsbnVsbCx0KSxuLnN0eWxlfHwobi5zdHlsZT17fSksbi5zdHlsZS53aWR0aD10aGlzLl90YWJsZVdpZHRoK1wicHhcIixzKFwidGFibGVcIixuLFtpLHJdKX0sX2NhbGN1bGF0ZVRhYmxlV2lkdGg6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyPXRoaXMuX3RpbWVTbG90cygpLG89MCxhPTA7Zm9yKG49MCxpPXIubGVuZ3RoO2k+bjtuKyspZT1yW25dLnNwYW4sYSs9ZSxlPm8mJihvPWUpO3JldHVybiB0PU1hdGgucm91bmQoYSp0aGlzLm9wdGlvbnMuc2xvdFNpemUvbyl9LF9jYWxjdWxhdGVNaWxlc3RvbmVXaWR0aDpmdW5jdGlvbigpe3ZhciB0LG49RS5zdHlsZXMudGFzaytcIiBcIitFLnN0eWxlcy50YXNrTWlsZXN0b25lLGk9ZShcIjxkaXYgY2xhc3M9J1wiK24rXCInIHN0eWxlPSd2aXNpYmlsaXR5OiBoaWRkZW47IHBvc2l0aW9uOiBhYnNvbHV0ZSc+XCIpO3JldHVybiB0aGlzLmNvbnRlbnQuYXBwZW5kKGkpLHQ9e3dpZHRoOmlbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgsY2xpZW50V2lkdGg6aVswXS5jbGllbnRXaWR0aH0saS5yZW1vdmUoKSx0fSxfY2FsY3VsYXRlUmVzb3VyY2VzTWFyZ2luOmZ1bmN0aW9uKCl7dmFyIHQsbj1lKFwiPGRpdiBjbGFzcz0nXCIrRS5zdHlsZXMucmVzb3VyY2VzV3JhcCtcIicgc3R5bGU9J3Zpc2liaWxpdHk6IGhpZGRlbjsgcG9zaXRpb246IGFic29sdXRlJz5cIik7cmV0dXJuIHRoaXMuY29udGVudC5hcHBlbmQobiksdD1wYXJzZUludChuLmNzcyhcIm1hcmdpbi1sZWZ0XCIpLDEwKSxuLnJlbW92ZSgpLHR9LF9yZW5kZXJUYXNrOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG89dGhpcy5vcHRpb25zLmVkaXRhYmxlLGE9dC5sZWZ0LGw9RS5zdHlsZXMsYz1sLnRhc2tXcmFwO3JldHVybiBlLnN1bW1hcnk/aT10aGlzLl9yZW5kZXJTdW1tYXJ5KGUsdCk6ZS5pc01pbGVzdG9uZSgpPyhpPXRoaXMuX3JlbmRlck1pbGVzdG9uZShlLHQpLGMrPVwiIFwiK2wudGFza01pbGVzdG9uZVdyYXApOmk9dGhpcy5fcmVuZGVyU2luZ2xlVGFzayhlLHQpLG49cyhcImRpdlwiLHtjbGFzc05hbWU6YyxzdHlsZTp7bGVmdDphK1wicHhcIn19LFtpXSksbyYmKG4uY2hpbGRyZW4ucHVzaChzKFwiZGl2XCIse2NsYXNzTmFtZTpsLnRhc2tEb3QrXCIgXCIrbC50YXNrRG90U3RhcnR9KSksbi5jaGlsZHJlbi5wdXNoKHMoXCJkaXZcIix7Y2xhc3NOYW1lOmwudGFza0RvdCtcIiBcIitsLnRhc2tEb3RFbmR9KSkpLGUuc3VtbWFyeXx8ZS5pc01pbGVzdG9uZSgpfHwhb3x8KHI9TWF0aC5yb3VuZCh0LndpZHRoKmUucGVyY2VudENvbXBsZXRlKSxuLmNoaWxkcmVuLnB1c2gocyhcImRpdlwiLHtjbGFzc05hbWU6bC50YXNrRHJhZ0hhbmRsZSxzdHlsZTp7bGVmdDpyK1wicHhcIn19KSkpLG59LF9yZW5kZXJTaW5nbGVUYXNrOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT1FLnN0eWxlcyxyPU1hdGgucm91bmQodC53aWR0aCplLnBlcmNlbnRDb21wbGV0ZSksbz1zKFwiZGl2XCIse2NsYXNzTmFtZTppLnRhc2tDb250ZW50fSxbcyhcImRpdlwiLHtjbGFzc05hbWU6aS50YXNrVGVtcGxhdGV9LFtsKGUudGl0bGUpXSldKTtyZXR1cm4gdGhpcy5vcHRpb25zLmVkaXRhYmxlJiYoby5jaGlsZHJlbi5wdXNoKHMoXCJzcGFuXCIse2NsYXNzTmFtZTppLnRhc2tBY3Rpb25zfSxbcyhcImFcIix7Y2xhc3NOYW1lOmkubGluaytcIiBcIitpLnRhc2tEZWxldGUsaHJlZjpcIiNcIn0sW3MoXCJzcGFuXCIse2NsYXNzTmFtZTppLmljb24rXCIgXCIraS5pY29uRGVsZXRlfSldKV0pKSxvLmNoaWxkcmVuLnB1c2gocyhcInNwYW5cIix7Y2xhc3NOYW1lOmkudGFza1Jlc2l6ZUhhbmRsZStcIiBcIitpLnRhc2tSZXNpemVIYW5kbGVXZXN0fSkpLG8uY2hpbGRyZW4ucHVzaChzKFwic3BhblwiLHtjbGFzc05hbWU6aS50YXNrUmVzaXplSGFuZGxlK1wiIFwiK2kudGFza1Jlc2l6ZUhhbmRsZUVhc3R9KSkpLG49cyhcImRpdlwiLHtjbGFzc05hbWU6aS50YXNrK1wiIFwiK2kudGFza1NpbmdsZSxcImRhdGEtdWlkXCI6ZS51aWQsc3R5bGU6e3dpZHRoOk1hdGgubWF4KHQud2lkdGgtMiwwKStcInB4XCJ9fSxbcyhcImRpdlwiLHtjbGFzc05hbWU6aS50YXNrQ29tcGxldGUsc3R5bGU6e3dpZHRoOnIrXCJweFwifX0pLG9dKX0sX3JlbmRlck1pbGVzdG9uZTpmdW5jdGlvbihlKXt2YXIgdD1FLnN0eWxlcyxuPXMoXCJkaXZcIix7Y2xhc3NOYW1lOnQudGFzaytcIiBcIit0LnRhc2tNaWxlc3RvbmUsXCJkYXRhLXVpZFwiOmUudWlkfSk7cmV0dXJuIG59LF9yZW5kZXJTdW1tYXJ5OmZ1bmN0aW9uKGUsdCl7dmFyIG49RS5zdHlsZXMsaT1NYXRoLnJvdW5kKHQud2lkdGgqZS5wZXJjZW50Q29tcGxldGUpLHI9cyhcImRpdlwiLHtjbGFzc05hbWU6bi50YXNrK1wiIFwiK24udGFza1N1bW1hcnksXCJkYXRhLXVpZFwiOmUudWlkLHN0eWxlOnt3aWR0aDp0LndpZHRoK1wicHhcIn19LFtzKFwiZGl2XCIse2NsYXNzTmFtZTpuLnRhc2tTdW1tYXJ5UHJvZ3Jlc3Msc3R5bGU6e3dpZHRoOmkrXCJweFwifX0sW3MoXCJkaXZcIix7Y2xhc3NOYW1lOm4udGFza1N1bW1hcnlDb21wbGV0ZSxzdHlsZTp7d2lkdGg6dC53aWR0aCtcInB4XCJ9fSldKV0pO3JldHVybiByfSxfcmVuZGVyUmVzb3VyY2VzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG89W107Zm9yKGk9MCxyPWUubGVuZ3RoO3I+aTtpKyspbj1lW2ldLG8ucHVzaChzKFwic3BhblwiLHtjbGFzc05hbWU6dCxzdHlsZTp7Y29sb3I6bi5nZXQoXCJjb2xvclwiKX19LFtsKG4uZ2V0KFwibmFtZVwiKSldKSk7cmV0dXJuIG99LF90YXNrUG9zaXRpb246ZnVuY3Rpb24oZSl7dmFyIHQ9TWF0aC5yb3VuZCxuPXQodGhpcy5fb2Zmc2V0KGUuc3RhcnQpKSxpPXQodGhpcy5fb2Zmc2V0KGUuZW5kKSk7cmV0dXJue2xlZnQ6bix3aWR0aDppLW59fSxfb2Zmc2V0OmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPXRoaXMuX3RpbWVTbG90cygpLG89dGhpcy5fc2xvdEluZGV4KFwic3RhcnRcIixlKSxhPXJbb107cmV0dXJuIGU+YS5lbmQ/YS5vZmZzZXRMZWZ0K2Eub2Zmc2V0V2lkdGg6YS5zdGFydD5lP2Eub2Zmc2V0TGVmdDoodD1lLWEuc3RhcnQsbj1hLmVuZC1hLnN0YXJ0LGk9dC9uKmEub2Zmc2V0V2lkdGgsYS5vZmZzZXRMZWZ0K2kpfSxfc2xvdEluZGV4OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzLl90aW1lU2xvdHMoKSxyPTAsbz1pLmxlbmd0aC0xO2RvIG49TWF0aC5jZWlsKChvK3IpLzIpLHQ+aVtuXVtlXT9yPW46KG49PT1vJiZuLS0sbz1uKTt3aGlsZShyIT09byk7cmV0dXJuIHJ9LF90aW1lQnlQb3NpdGlvbjpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGE9dGhpcy5fc2xvdEJ5UG9zaXRpb24oZSk7cmV0dXJuIHQ/bj9hLmVuZDphLnN0YXJ0OihpPWUtKHRoaXMuY29udGVudC5vZmZzZXQoKS5sZWZ0LXRoaXMuY29udGVudC5zY3JvbGxMZWZ0KCkpLHI9YS5lbmQtYS5zdGFydCxvPXIqKChpLWEub2Zmc2V0TGVmdCkvYS5vZmZzZXRXaWR0aCksbmV3IERhdGUoYS5zdGFydC5nZXRUaW1lKCkrbykpfSxfc2xvdEJ5UG9zaXRpb246ZnVuY3Rpb24oZSl7dmFyIHQ9ZS0odGhpcy5jb250ZW50Lm9mZnNldCgpLmxlZnQtdGhpcy5jb250ZW50LnNjcm9sbExlZnQoKSksbj10aGlzLl9zbG90SW5kZXgoXCJvZmZzZXRMZWZ0XCIsdCk7cmV0dXJuIHRoaXMuX3RpbWVTbG90cygpW25dfSxfcmVuZGVyRGVwZW5kZW5jaWVzOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT1bXSxyPXRoaXMuX2RlcGVuZGVuY3lUcmVlO2Zvcih0PTAsbj1lLmxlbmd0aDtuPnQ7dCsrKWkucHVzaC5hcHBseShpLHRoaXMuX3JlbmRlckRlcGVuZGVuY3koZVt0XSkpO3IucmVuZGVyKGkpfSxfcmVuZGVyRGVwZW5kZW5jeTpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvPXRoaXMuX3Rhc2tDb29yZGluYXRlc1tlLnByZWRlY2Vzc29ySWRdLGE9dGhpcy5fdGFza0Nvb3JkaW5hdGVzW2Uuc3VjY2Vzc29ySWRdO2lmKCFvfHwhYSlyZXR1cm5bXTtmb3Iobj1cIl9yZW5kZXJcIitbXCJGRlwiLFwiRlNcIixcIlNGXCIsXCJTU1wiXVtlLnR5cGVdLHQ9dGhpc1tuXShvLGEpLGk9MCxyPXQubGVuZ3RoO3I+aTtpKyspdFtpXS5hdHRyW1wiZGF0YS11aWRcIl09ZS51aWQ7cmV0dXJuIHR9LF9yZW5kZXJGRjpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX2RlcGVuZGVuY3lGRihlLHQsITEpO3JldHVybiBuW24ubGVuZ3RoLTFdLmNoaWxkcmVuWzBdPXRoaXMuX2Fycm93KCEwKSxufSxfcmVuZGVyU1M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9kZXBlbmRlbmN5RkYodCxlLCEwKTtyZXR1cm4gblswXS5jaGlsZHJlblswXT10aGlzLl9hcnJvdyghMSksbi5yZXZlcnNlKCl9LF9yZW5kZXJGUzpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX2RlcGVuZGVuY3lGUyhlLHQsITEpO3JldHVybiBuW24ubGVuZ3RoLTFdLmNoaWxkcmVuWzBdPXRoaXMuX2Fycm93KCExKSxufSxfcmVuZGVyU0Y6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9kZXBlbmRlbmN5RlModCxlLCEwKTtyZXR1cm4gblswXS5jaGlsZHJlblswXT10aGlzLl9hcnJvdyghMCksbi5yZXZlcnNlKCl9LF9kZXBlbmRlbmN5RkY6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI9dGhpcyxvPVtdLGE9MCxzPTAsbD0wLGM9MCxkPW4/XCJzdGFydFwiOlwiZW5kXCIsdT0yLGg9MSxwPXRoaXMuX3Jvd0hlaWdodCxmPTEwLGc9ZS5yb3dJbmRleCpwK01hdGguZmxvb3IocC8yKS0xLG09dC5yb3dJbmRleCpwK01hdGguZmxvb3IocC8yKS0xLHY9RS5zdHlsZXMsXz1mdW5jdGlvbigpe28ucHVzaChyLl9saW5lKHYubGluZStcIiBcIit2LmxpbmVIb3Jpem9udGFsLHtsZWZ0OmErXCJweFwiLHRvcDpzK1wicHhcIix3aWR0aDpsK1wicHhcIn0pKX0seT1mdW5jdGlvbigpe28ucHVzaChyLl9saW5lKHYubGluZStcIiBcIit2LmxpbmVWZXJ0aWNhbCx7bGVmdDphK1wicHhcIix0b3A6cytcInB4XCIsaGVpZ2h0OmMrXCJweFwifSkpfTtyZXR1cm4gYT1lW2RdLHM9ZyxsPWYsaT10W2RdLWVbZF0saT4wIT09biYmKGw9TWF0aC5hYnMoaSkrZiksbj8oYS09bCxsLT1oLF8oKSk6KF8oKSxhKz1sLXUpLHM+bT8oYz1zLW0sYys9dSxzPW0seSgpKTooYz1tLXMsYys9dSx5KCkscys9Yy11KSxsPU1hdGguYWJzKGEtdFtkXSksbnx8KGwtPWgsYS09bCksXygpLG99LF9kZXBlbmRlbmN5RlM6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMscj1bXSxvPTAsYT0wLHM9MCxsPTAsYz10aGlzLl9yb3dIZWlnaHQsZD1NYXRoLmZsb29yKGMvMiksdT0xMCxoPTIqdSxwPXQuc3RhcnQtZS5lbmQsZj0yLGc9MSxtPWUucm93SW5kZXgqYytNYXRoLmZsb29yKGMvMiktMSx2PXQucm93SW5kZXgqYytNYXRoLmZsb29yKGMvMiktMSxfPUUuc3R5bGVzLHk9ZnVuY3Rpb24oKXtyLnB1c2goaS5fbGluZShfLmxpbmUrXCIgXCIrXy5saW5lSG9yaXpvbnRhbCx7bGVmdDpvK1wicHhcIix0b3A6YStcInB4XCIsd2lkdGg6cytcInB4XCJ9KSl9LHc9ZnVuY3Rpb24oKXtyLnB1c2goaS5fbGluZShfLmxpbmUrXCIgXCIrXy5saW5lVmVydGljYWwse2xlZnQ6bytcInB4XCIsdG9wOmErXCJweFwiLGhlaWdodDpsK1wicHhcIn0pKX07cmV0dXJuIG89ZS5lbmQsYT1tLHM9dSxuJiYobys9ZyxwPmgmJihzPXAtKHUtZikpLHMtPWcpLHkoKSxvKz1zLWYsaD49cCYmKGw9bj9NYXRoLmFicyh2LW0pLWQ6ZCxtPnY/KGEtPWwsbCs9Zix3KCkpOih3KCksYSs9bCkscz1lLmVuZC10LnN0YXJ0K2gsdT5zJiYocz11KSxvLT1zLWYseSgpKSxtPnY/KGw9YS12LGE9dixsKz1mLHcoKSk6KGw9di1hLHcoKSxhKz1sKSxzPXQuc3RhcnQtbyxufHwocy09ZykseSgpLHJ9LF9saW5lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHMoXCJkaXZcIix7Y2xhc3NOYW1lOmUsc3R5bGU6dH0pfSxfYXJyb3c6ZnVuY3Rpb24oZSl7cmV0dXJuIHMoXCJzcGFuXCIse2NsYXNzTmFtZTplP0Uuc3R5bGVzLmFycm93V2VzdDpFLnN0eWxlcy5hcnJvd0Vhc3R9KX0sX2NvbGdyb3VwOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGk9dGhpcy5fdGltZVNsb3RzKCkscj1pLmxlbmd0aCxvPVtdO2ZvcihlPTA7cj5lO2UrKylmb3IodD0wLG49aVtlXS5zcGFuO24+dDt0Kyspby5wdXNoKHMoXCJjb2xcIikpO3JldHVybiBzKFwiY29sZ3JvdXBcIixudWxsLG8pfSxfY3JlYXRlRHJhZ0hpbnQ6ZnVuY3Rpb24oZSl7dGhpcy5fZHJhZ0hpbnQ9ZS5jbG9uZSgpLmFkZENsYXNzKEUuc3R5bGVzLmRyYWdIaW50KS5jc3MoXCJjdXJzb3JcIixcIm1vdmVcIiksZS5wYXJlbnQoKS5hcHBlbmQodGhpcy5fZHJhZ0hpbnQpfSxfdXBkYXRlRHJhZ0hpbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fb2Zmc2V0KGUpO3RoaXMuX2RyYWdIaW50LmNzcyh7bGVmdDp0fSl9LF9yZW1vdmVEcmFnSGludDpmdW5jdGlvbigpe3RoaXMuX2RyYWdIaW50LnJlbW92ZSgpLHRoaXMuX2RyYWdIaW50PW51bGx9LF9jcmVhdGVSZXNpemVIaW50OmZ1bmN0aW9uKHQpe3ZhciBuLGkscj1FLnN0eWxlcyxvPXRoaXMuX3Rhc2tDb29yZGluYXRlc1t0LmlkXS5yb3dJbmRleCp0aGlzLl9yb3dIZWlnaHQ7dGhpcy5fcmVzaXplSGludD1lKEMoe3N0eWxlczpyfSkpLmNzcyh7dG9wOjAsaGVpZ2h0OnRoaXMuX2NvbnRlbnRIZWlnaHR9KSx0aGlzLmNvbnRlbnQuYXBwZW5kKHRoaXMuX3Jlc2l6ZUhpbnQpLHRoaXMuX3Jlc2l6ZVRvb2x0aXA9ZShTKHtzdHlsZXM6cixzdGFydDp0LnN0YXJ0LGVuZDp0LmVuZH0pKS5jc3Moe3RvcDowLGxlZnQ6MH0pLHRoaXMuY29udGVudC5hcHBlbmQodGhpcy5fcmVzaXplVG9vbHRpcCksdGhpcy5fcmVzaXplVG9vbHRpcFdpZHRoPXRoaXMuX3Jlc2l6ZVRvb2x0aXAub3V0ZXJXaWR0aCgpLG49dGhpcy5fcmVzaXplVG9vbHRpcC5vdXRlckhlaWdodCgpLGk9by1uLDA+aSYmKGk9byt0aGlzLl9yb3dIZWlnaHQpLHRoaXMuX3Jlc2l6ZVRvb2x0aXBUb3A9aX0sX3VwZGF0ZVJlc2l6ZUhpbnQ6ZnVuY3Rpb24odCxuLGkpe3ZhciByPXRoaXMuX29mZnNldCh0KSxvPXRoaXMuX29mZnNldChuKSxhPW8tcixzPWk/cjpvLGw9dGhpcy5fdGFibGVXaWR0aC0xNyxjPXRoaXMuX3Jlc2l6ZVRvb2x0aXBXaWR0aDt0aGlzLl9yZXNpemVIaW50LmNzcyh7bGVmdDpyLHdpZHRoOmF9KSx0aGlzLl9yZXNpemVUb29sdGlwJiZ0aGlzLl9yZXNpemVUb29sdGlwLnJlbW92ZSgpLHMtPU1hdGgucm91bmQoYy8yKSwwPnM/cz0wOnMrYz5sJiYocz1sLWMpLHRoaXMuX3Jlc2l6ZVRvb2x0aXA9ZShTKHtzdHlsZXM6RS5zdHlsZXMsc3RhcnQ6dCxlbmQ6bn0pKS5jc3Moe3RvcDp0aGlzLl9yZXNpemVUb29sdGlwVG9wLGxlZnQ6cyxcIm1pbi13aWR0aFwiOmN9KSx0aGlzLmNvbnRlbnQuYXBwZW5kKHRoaXMuX3Jlc2l6ZVRvb2x0aXApfSxfcmVtb3ZlUmVzaXplSGludDpmdW5jdGlvbigpe3RoaXMuX3Jlc2l6ZUhpbnQucmVtb3ZlKCksdGhpcy5fcmVzaXplSGludD1udWxsLHRoaXMuX3Jlc2l6ZVRvb2x0aXAucmVtb3ZlKCksdGhpcy5fcmVzaXplVG9vbHRpcD1udWxsfSxfdXBkYXRlUGVyY2VudENvbXBsZXRlVG9vbHRpcDpmdW5jdGlvbih0LG4saSl7dmFyIHIsbyxhLHM7dGhpcy5fcmVtb3ZlUGVyY2VudENvbXBsZXRlVG9vbHRpcCgpLHI9dGhpcy5fcGVyY2VudENvbXBsZXRlUmVzaXplVG9vbHRpcD1lKFQoe3N0eWxlczpFLnN0eWxlcyx0ZXh0Oml9KSkuYXBwZW5kVG8odGhpcy5lbGVtZW50KSxvPU1hdGgucm91bmQoci5vdXRlcldpZHRoKCkvMiksYT1yLmZpbmQoXytFLnN0eWxlcy5jYWxsb3V0KSxzPU1hdGgucm91bmQoYS5vdXRlcldpZHRoKCkvMiksci5jc3Moe3RvcDp0LShyLm91dGVySGVpZ2h0KCkrcyksbGVmdDpuLW99KSxhLmNzcyhcImxlZnRcIixvLXMpfSxfcmVtb3ZlUGVyY2VudENvbXBsZXRlVG9vbHRpcDpmdW5jdGlvbigpe3RoaXMuX3BlcmNlbnRDb21wbGV0ZVJlc2l6ZVRvb2x0aXAmJnRoaXMuX3BlcmNlbnRDb21wbGV0ZVJlc2l6ZVRvb2x0aXAucmVtb3ZlKCksdGhpcy5fcGVyY2VudENvbXBsZXRlUmVzaXplVG9vbHRpcD1udWxsfSxfdXBkYXRlRGVwZW5kZW5jeURyYWdIaW50OmZ1bmN0aW9uKGUsdCxuKXt0aGlzLl9yZW1vdmVEZXBlbmRlbmN5RHJhZ0hpbnQoKSxuP3RoaXMuX2NyZXRlVm1sRGVwZW5kZW5jeURyYWdIaW50KGUsdCk6dGhpcy5fY3JldGVEZXBlbmRlbmN5RHJhZ0hpbnQoZSx0KX0sX2NyZXRlRGVwZW5kZW5jeURyYWdIaW50OmZ1bmN0aW9uKHQsbil7dmFyIGk9RS5zdHlsZXMscj1uLngtdC54LG89bi55LXQueSxhPU1hdGguc3FydChyKnIrbypvKSxzPU1hdGguYXRhbihvL3IpOzA+ciYmKHMrPU1hdGguUEkpLGUoXCI8ZGl2IGNsYXNzPSdcIitpLmxpbmUrXCIgXCIraS5saW5lSG9yaXpvbnRhbCtcIiBcIitpLmRlcGVuZGVuY3lIaW50K1wiJz48L2Rpdj5cIikuY3NzKHt0b3A6dC55LGxlZnQ6dC54LHdpZHRoOmEsXCJ0cmFuc2Zvcm0tb3JpZ2luXCI6XCIwJSAwXCIsXCItbXMtdHJhbnNmb3JtLW9yaWdpblwiOlwiMCUgMFwiLFwiLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luXCI6XCIwJSAwXCIsdHJhbnNmb3JtOlwicm90YXRlKFwiK3MrXCJyYWQpXCIsXCItbXMtdHJhbnNmb3JtXCI6XCJyb3RhdGUoXCIrcytcInJhZClcIixcIi13ZWJraXQtdHJhbnNmb3JtXCI6XCJyb3RhdGUoXCIrcytcInJhZClcIn0pLmFwcGVuZFRvKHRoaXMuY29udGVudCl9LF9jcmV0ZVZtbERlcGVuZGVuY3lEcmFnSGludDpmdW5jdGlvbih0LG4pe3ZhciBpPWUoXCI8a3ZtbDpsaW5lIGNsYXNzPSdcIitFLnN0eWxlcy5kZXBlbmRlbmN5SGludCtcIicgc3R5bGU9J3Bvc2l0aW9uOmFic29sdXRlOyB0b3A6IDBweDsnIHN0cm9rZWNvbG9yPSdibGFjaycgc3Ryb2tld2VpZ2h0PScycHgnIGZyb209J1wiK3QueCtcInB4LFwiK3QueStcInB4JyB0bz0nXCIrbi54K1wicHgsXCIrbi55K1wicHgnPjwva3ZtbDpsaW5lPlwiKS5hcHBlbmRUbyh0aGlzLmNvbnRlbnQpO1xuaVswXS5vdXRlckhUTUw9aVswXS5vdXRlckhUTUx9LF9yZW1vdmVEZXBlbmRlbmN5RHJhZ0hpbnQ6ZnVuY3Rpb24oKXt0aGlzLmNvbnRlbnQuZmluZChfK0Uuc3R5bGVzLmRlcGVuZGVuY3lIaW50KS5yZW1vdmUoKX0sX3Njcm9sbFRvOmZ1bmN0aW9uKGUpe3ZhciB0PWUub2Zmc2V0KCkubGVmdCxuPWUud2lkdGgoKSxpPXQrbixyPWUuY2xvc2VzdChcInRyXCIpLG89ci5vZmZzZXQoKS50b3AsYT1yLmhlaWdodCgpLHM9bythLGw9dGhpcy5jb250ZW50LGM9bC5vZmZzZXQoKSxkPWMudG9wLHU9bC5oZWlnaHQoKSxoPWQrdSxwPWMubGVmdCxmPWwud2lkdGgoKSxnPXArZixtPWtlbmRvLnN1cHBvcnQuc2Nyb2xsYmFyKCk7ZD5vP2wuc2Nyb2xsVG9wKGwuc2Nyb2xsVG9wKCkrKG8tZCkpOnM+aCYmbC5zY3JvbGxUb3AobC5zY3JvbGxUb3AoKSsocyttLWgpKSxwPnQmJm4+ZiYmZz5pfHxpPmcmJmY+bj9sLnNjcm9sbExlZnQobC5zY3JvbGxMZWZ0KCkrKGkrbS1nKSk6KGk+ZyYmbj5mJiZ0PnB8fHA+dCYmZj5uKSYmbC5zY3JvbGxMZWZ0KGwuc2Nyb2xsTGVmdCgpKyh0LXApKX0sX3RpbWVTbG90czpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zbG90c1t0aGlzLl9zbG90cy5sZW5ndGgtMV19LF9oZWFkZXJzOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYSxjLGQsdT1bXSxoPUUuc3R5bGVzO2ZvcihvPTAsYT1lLmxlbmd0aDthPm87bysrKXtmb3IodD1lW29dLG49W10sYz0wLGQ9dC5sZW5ndGg7ZD5jO2MrKylpPXRbY10scj1sKGkudGV4dCksbi5wdXNoKHMoXCJ0aFwiLHtjb2xzcGFuOmkuc3BhbixjbGFzc05hbWU6aC5oZWFkZXIrKGkuaXNOb25Xb3JraW5nP1wiIFwiK2gubm9uV29ya2luZzpcIlwiKX0sW3JdKSk7dS5wdXNoKHMoXCJ0clwiLG51bGwsbikpfXJldHVybiB1fSxfaG91cnM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbz1bXSxhPXRoaXMub3B0aW9ucyxzPWEud29ya0RheVN0YXJ0LmdldEhvdXJzKCksbD1hLndvcmtEYXlFbmQuZ2V0SG91cnMoKSxjPWEuaG91clNwYW47Zm9yKGU9bmV3IERhdGUoZSksdD1uZXcgRGF0ZSh0KTt0PmU7KW49bmV3IERhdGUoZSkscj1uLmdldEhvdXJzKCksaT1yPj1zJiZsPnIsbi5zZXRIb3VycyhuLmdldEhvdXJzKCkrYykscj09bi5nZXRIb3VycygpJiZuLnNldEhvdXJzKG4uZ2V0SG91cnMoKSsyKmMpLCghYS5zaG93V29ya0hvdXJzfHxpKSYmby5wdXNoKHtzdGFydDplLGVuZDpuLGlzTm9uV29ya2luZzohaSxzcGFuOjF9KSxlPW47cmV0dXJuIG99LF9kYXlzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPVtdO2ZvcihlPW5ldyBEYXRlKGUpLHQ9bmV3IERhdGUodCk7dD5lOyluPWtlbmRvLmRhdGUubmV4dERheShlKSxpPXRoaXMuX2lzV29ya0RheShlKSwoIXRoaXMub3B0aW9ucy5zaG93V29ya0RheXN8fGkpJiZyLnB1c2goe3N0YXJ0OmUsZW5kOm4saXNOb25Xb3JraW5nOiFpLHNwYW46MX0pLGU9bjtyZXR1cm4gcn0sX3dlZWtzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG89W10sYT10aGlzLmNhbGVuZGFySW5mbygpLmZpcnN0RGF5O2ZvcihlPW5ldyBEYXRlKGUpLHQ9bmV3IERhdGUodCk7dD5lOyluPWtlbmRvLmRhdGUuZGF5T2ZXZWVrKGtlbmRvLmRhdGUuYWRkRGF5cyhlLDEpLGEsMSksbj50JiYobj10KSxpPXRoaXMuX2RheXMoZSxuKSxyPWkubGVuZ3RoLHI+MCYmby5wdXNoKHtzdGFydDppWzBdLnN0YXJ0LGVuZDppW3ItMV0uZW5kLHNwYW46cn0pLGU9bjtyZXR1cm4gb30sX21vbnRoczpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvPVtdO2ZvcihlPW5ldyBEYXRlKGUpLHQ9bmV3IERhdGUodCk7dD5lOyluPW5ldyBEYXRlKGUpLG4uc2V0TW9udGgobi5nZXRNb250aCgpKzEpLGk9dGhpcy5fZGF5cyhlLG4pLHI9aS5sZW5ndGgscj4wJiZvLnB1c2goe3N0YXJ0OmlbMF0uc3RhcnQsZW5kOmlbci0xXS5lbmQsc3BhbjpyfSksZT1uO3JldHVybiBvfSxfeWVhcnM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPVtdO2ZvcihlPW5ldyBEYXRlKGUpLHQ9bmV3IERhdGUodCk7dD5lOyluPW5ldyBEYXRlKGUpLG4uc2V0RnVsbFllYXIobi5nZXRGdWxsWWVhcigpKzEpLGkucHVzaCh7c3RhcnQ6ZSxlbmQ6bixzcGFuOjEyfSksZT1uO3JldHVybiBpfSxfc2xvdEhlYWRlcnM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbz1bXTtmb3IoaT0wLHI9ZS5sZW5ndGg7cj5pO2krKyluPWVbaV0sby5wdXNoKHt0ZXh0OnQobiksaXNOb25Xb3JraW5nOiEhbi5pc05vbldvcmtpbmcsc3BhbjpuLnNwYW59KTtyZXR1cm4gb30sX2lzV29ya0RheTpmdW5jdGlvbihlKXt2YXIgdCxuLGk9ZS5nZXREYXkoKSxyPXRoaXMuX3dvcmtEYXlzO2Zvcih0PTAsbj1yLmxlbmd0aDtuPnQ7dCsrKWlmKHJbdF09PT1pKXJldHVybiEwO3JldHVybiExfSxjYWxlbmRhckluZm86ZnVuY3Rpb24oKXtyZXR1cm4ga2VuZG8uZ2V0Q3VsdHVyZSgpLmNhbGVuZGFycy5zdGFuZGFyZH19KTtkKCEwLEUse3N0eWxlczpBfSksa2VuZG8udWkuR2FudHREYXlWaWV3PUUuZXh0ZW5kKHtuYW1lOlwiZGF5XCIsb3B0aW9uczp7dGltZUhlYWRlclRlbXBsYXRlOnksZGF5SGVhZGVyVGVtcGxhdGU6d30scmFuZ2U6ZnVuY3Rpb24oZSl7dGhpcy5zdGFydD1rZW5kby5kYXRlLmdldERhdGUoZS5zdGFydCksdGhpcy5lbmQ9a2VuZG8uZGF0ZS5nZXREYXRlKGUuZW5kKSwoa2VuZG8uZGF0ZS5nZXRNaWxsaXNlY29uZHMoZS5lbmQpPjB8fHRoaXMuZW5kLmdldFRpbWUoKT09PXRoaXMuc3RhcnQuZ2V0VGltZSgpKSYmKHRoaXMuZW5kPWtlbmRvLmRhdGUuYWRkRGF5cyh0aGlzLmVuZCwxKSl9LF9jcmVhdGVTbG90czpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHI9W10sbz10aGlzLl9kYXlzKHRoaXMuc3RhcnQsdGhpcy5lbmQpLGE9W107Zm9yKG49MCxpPW8ubGVuZ3RoO2k+bjtuKyspZT1vW25dLHQ9dGhpcy5faG91cnMoZS5zdGFydCxlLmVuZCksZS5zcGFuPXQubGVuZ3RoLGEucHVzaC5hcHBseShhLHQpO3JldHVybiByLnB1c2gobyksci5wdXNoKGEpLHJ9LF9sYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgZT1bXSx0PXRoaXMub3B0aW9ucztyZXR1cm4gZS5wdXNoKHRoaXMuX3Nsb3RIZWFkZXJzKHRoaXMuX3Nsb3RzWzBdLGtlbmRvLnRlbXBsYXRlKHQuZGF5SGVhZGVyVGVtcGxhdGUpKSksZS5wdXNoKHRoaXMuX3Nsb3RIZWFkZXJzKHRoaXMuX3Nsb3RzWzFdLGtlbmRvLnRlbXBsYXRlKHQudGltZUhlYWRlclRlbXBsYXRlKSkpLGV9fSksa2VuZG8udWkuR2FudHRXZWVrVmlldz1FLmV4dGVuZCh7bmFtZTpcIndlZWtcIixvcHRpb25zOntkYXlIZWFkZXJUZW1wbGF0ZTp3LHdlZWtIZWFkZXJUZW1wbGF0ZTpifSxyYW5nZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmNhbGVuZGFySW5mbygpLG49dC5maXJzdERheTt0aGlzLnN0YXJ0PWtlbmRvLmRhdGUuZ2V0RGF0ZShrZW5kby5kYXRlLmRheU9mV2VlayhlLnN0YXJ0LG4sLTEpKSx0aGlzLmVuZD1rZW5kby5kYXRlLmdldERhdGUoa2VuZG8uZGF0ZS5kYXlPZldlZWsoZS5lbmQsbiwxKSl9LF9jcmVhdGVTbG90czpmdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiBlLnB1c2godGhpcy5fd2Vla3ModGhpcy5zdGFydCx0aGlzLmVuZCkpLGUucHVzaCh0aGlzLl9kYXlzKHRoaXMuc3RhcnQsdGhpcy5lbmQpKSxlfSxfbGF5b3V0OmZ1bmN0aW9uKCl7dmFyIGU9W10sdD10aGlzLm9wdGlvbnM7cmV0dXJuIGUucHVzaCh0aGlzLl9zbG90SGVhZGVycyh0aGlzLl9zbG90c1swXSxrZW5kby50ZW1wbGF0ZSh0LndlZWtIZWFkZXJUZW1wbGF0ZSkpKSxlLnB1c2godGhpcy5fc2xvdEhlYWRlcnModGhpcy5fc2xvdHNbMV0sa2VuZG8udGVtcGxhdGUodC5kYXlIZWFkZXJUZW1wbGF0ZSkpKSxlfX0pLGtlbmRvLnVpLkdhbnR0TW9udGhWaWV3PUUuZXh0ZW5kKHtuYW1lOlwibW9udGhcIixvcHRpb25zOnt3ZWVrSGVhZGVyVGVtcGxhdGU6Yixtb250aEhlYWRlclRlbXBsYXRlOmt9LHJhbmdlOmZ1bmN0aW9uKGUpe3RoaXMuc3RhcnQ9a2VuZG8uZGF0ZS5maXJzdERheU9mTW9udGgoZS5zdGFydCksdGhpcy5lbmQ9a2VuZG8uZGF0ZS5hZGREYXlzKGtlbmRvLmRhdGUuZ2V0RGF0ZShrZW5kby5kYXRlLmxhc3REYXlPZk1vbnRoKGUuZW5kKSksMSl9LF9jcmVhdGVTbG90czpmdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiBlLnB1c2godGhpcy5fbW9udGhzKHRoaXMuc3RhcnQsdGhpcy5lbmQpKSxlLnB1c2godGhpcy5fd2Vla3ModGhpcy5zdGFydCx0aGlzLmVuZCkpLGV9LF9sYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgZT1bXSx0PXRoaXMub3B0aW9ucztyZXR1cm4gZS5wdXNoKHRoaXMuX3Nsb3RIZWFkZXJzKHRoaXMuX3Nsb3RzWzBdLGtlbmRvLnRlbXBsYXRlKHQubW9udGhIZWFkZXJUZW1wbGF0ZSkpKSxlLnB1c2godGhpcy5fc2xvdEhlYWRlcnModGhpcy5fc2xvdHNbMV0sa2VuZG8udGVtcGxhdGUodC53ZWVrSGVhZGVyVGVtcGxhdGUpKSksZX19KSxrZW5kby51aS5HYW50dFllYXJWaWV3PUUuZXh0ZW5kKHtuYW1lOlwieWVhclwiLG9wdGlvbnM6e3llYXJIZWFkZXJUZW1wbGF0ZTp4LG1vbnRoSGVhZGVyVGVtcGxhdGU6a30scmFuZ2U6ZnVuY3Rpb24oZSl7dGhpcy5zdGFydD1rZW5kby5kYXRlLmZpcnN0RGF5T2ZNb250aChuZXcgRGF0ZShlLnN0YXJ0LnNldE1vbnRoKDApKSksdGhpcy5lbmQ9a2VuZG8uZGF0ZS5maXJzdERheU9mTW9udGgobmV3IERhdGUoZS5lbmQuc2V0TW9udGgoMTIpKSl9LF9jcmVhdGVTbG90czpmdW5jdGlvbigpe3ZhciB0PVtdLG49dGhpcy5fbW9udGhzKHRoaXMuc3RhcnQsdGhpcy5lbmQpO3JldHVybiBlKG4pLmVhY2goZnVuY3Rpb24oZSx0KXt0LnNwYW49MX0pLHQucHVzaCh0aGlzLl95ZWFycyh0aGlzLnN0YXJ0LHRoaXMuZW5kKSksdC5wdXNoKG4pLHR9LF9sYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgZT1bXSx0PXRoaXMub3B0aW9ucztyZXR1cm4gZS5wdXNoKHRoaXMuX3Nsb3RIZWFkZXJzKHRoaXMuX3Nsb3RzWzBdLGtlbmRvLnRlbXBsYXRlKHQueWVhckhlYWRlclRlbXBsYXRlKSkpLGUucHVzaCh0aGlzLl9zbG90SGVhZGVycyh0aGlzLl9zbG90c1sxXSxrZW5kby50ZW1wbGF0ZSh0Lm1vbnRoSGVhZGVyVGVtcGxhdGUpKSksZX19KSxyPXt3cmFwcGVyOlwiay10aW1lbGluZSBrLWdyaWQgay13aWRnZXRcIixncmlkSGVhZGVyOlwiay1ncmlkLWhlYWRlclwiLGdyaWRIZWFkZXJXcmFwOlwiay1ncmlkLWhlYWRlci13cmFwXCIsZ3JpZENvbnRlbnQ6XCJrLWdyaWQtY29udGVudFwiLGdyaWRDb250ZW50V3JhcDpcImstZ3JpZC1jb250ZW50XCIsdGFza3NXcmFwcGVyOlwiay1nYW50dC10YWJsZXNcIixkZXBlbmRlbmNpZXNXcmFwcGVyOlwiay1nYW50dC1kZXBlbmRlbmNpZXNcIix0YXNrOlwiay10YXNrXCIsbGluZTpcImstbGluZVwiLHRhc2tSZXNpemVIYW5kbGU6XCJrLXJlc2l6ZS1oYW5kbGVcIix0YXNrUmVzaXplSGFuZGxlV2VzdDpcImstcmVzaXplLXdcIix0YXNrRHJhZ0hhbmRsZTpcImstdGFzay1kcmFnaGFuZGxlXCIsdGFza0NvbXBsZXRlOlwiay10YXNrLWNvbXBsZXRlXCIsdGFza0RlbGV0ZTpcImstdGFzay1kZWxldGVcIix0YXNrV3JhcEFjdGl2ZTpcImstdGFzay13cmFwLWFjdGl2ZVwiLHRhc2tXcmFwOlwiay10YXNrLXdyYXBcIix0YXNrRG90Olwiay10YXNrLWRvdFwiLHRhc2tEb3RTdGFydDpcImstdGFzay1zdGFydFwiLHRhc2tEb3RFbmQ6XCJrLXRhc2stZW5kXCIsaG92ZXJlZDpcImstc3RhdGUtaG92ZXJcIixzZWxlY3RlZDpcImstc3RhdGUtc2VsZWN0ZWRcIixvcmlnaW46XCJrLW9yaWdpblwifSxvPWtlbmRvLnVpLkdhbnR0VGltZWxpbmU9YS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXthLmZuLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy5vcHRpb25zLnZpZXdzJiZ0aGlzLm9wdGlvbnMudmlld3MubGVuZ3RofHwodGhpcy5vcHRpb25zLnZpZXdzPVtcImRheVwiLFwid2Vla1wiLFwibW9udGhcIl0pLHRoaXMuX3dyYXBwZXIoKSx0aGlzLl9kb21UcmVlcygpLHRoaXMuX3ZpZXdzKCksdGhpcy5fc2VsZWN0YWJsZSgpLHRoaXMuX2RyYWdnYWJsZSgpLHRoaXMuX3Jlc2l6YWJsZSgpLHRoaXMuX3BlcmNlbnRSZXNpemVEcmFnZ2FibGUoKSx0aGlzLl9jcmVhdGVEZXBlbmRlbmN5RHJhZ2dhYmxlKCksdGhpcy5fYXR0YWNoRXZlbnRzKCl9LG9wdGlvbnM6e25hbWU6XCJHYW50dFRpbWVsaW5lXCIsbWVzc2FnZXM6e3ZpZXdzOntkYXk6XCJEYXlcIix3ZWVrOlwiV2Vla1wiLG1vbnRoOlwiTW9udGhcIix5ZWFyOlwiWWVhclwifX0sc25hcDohMCxzZWxlY3RhYmxlOiEwLGVkaXRhYmxlOiEwfSxkZXN0cm95OmZ1bmN0aW9uKCl7YS5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5fdW5iaW5kVmlldyh0aGlzLl9zZWxlY3RlZFZpZXcpLHRoaXMuX21vdmVEcmFnZ2FibGUmJnRoaXMuX21vdmVEcmFnZ2FibGUuZGVzdHJveSgpLHRoaXMuX3Jlc2l6ZURyYWdnYWJsZSYmdGhpcy5fcmVzaXplRHJhZ2dhYmxlLmRlc3Ryb3koKSx0aGlzLl9wZXJjZW50RHJhZ2dhYmxlJiZ0aGlzLl9wZXJjZW50RHJhZ2dhYmxlLmRlc3Ryb3koKSx0aGlzLl9kZXBlbmRlbmN5RHJhZ2dhYmxlJiZ0aGlzLl9kZXBlbmRlbmN5RHJhZ2dhYmxlLmRlc3Ryb3koKSx0aGlzLl9oZWFkZXJUcmVlPW51bGwsdGhpcy5fdGFza1RyZWU9bnVsbCx0aGlzLl9kZXBlbmRlbmN5VHJlZT1udWxsLHRoaXMud3JhcHBlci5vZmYoZiksa2VuZG8uZGVzdHJveSh0aGlzLndyYXBwZXIpfSxfd3JhcHBlcjpmdW5jdGlvbigpe3ZhciBlPW8uc3R5bGVzO3RoaXMud3JhcHBlcj10aGlzLmVsZW1lbnQuYWRkQ2xhc3MoZS53cmFwcGVyKS5hcHBlbmQoXCI8ZGl2IGNsYXNzPSdcIitlLmdyaWRIZWFkZXIrXCInPjxkaXYgY2xhc3M9J1wiK2UuZ3JpZEhlYWRlcldyYXArXCInPjwvZGl2PjwvZGl2PlwiKS5hcHBlbmQoXCI8ZGl2IGNsYXNzPSdcIitlLmdyaWRDb250ZW50V3JhcCtcIic+PGRpdiBjbGFzcz0nXCIrZS50YXNrc1dyYXBwZXIrXCInPjwvZGl2PjxkaXYgY2xhc3M9J1wiK2UuZGVwZW5kZW5jaWVzV3JhcHBlcitcIic+PC9kaXY+PC9kaXY+XCIpfSxfZG9tVHJlZXM6ZnVuY3Rpb24oKXt2YXIgZT1vLnN0eWxlcyx0PWtlbmRvLmRvbS5UcmVlLG49dGhpcy53cmFwcGVyO3RoaXMuX2hlYWRlclRyZWU9bmV3IHQobi5maW5kKF8rZS5ncmlkSGVhZGVyV3JhcClbMF0pLHRoaXMuX3Rhc2tUcmVlPW5ldyB0KG4uZmluZChfK2UudGFza3NXcmFwcGVyKVswXSksdGhpcy5fZGVwZW5kZW5jeVRyZWU9bmV3IHQobi5maW5kKF8rZS5kZXBlbmRlbmNpZXNXcmFwcGVyKVswXSl9LF92aWV3czpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbyxhLHM9dGhpcy5vcHRpb25zLnZpZXdzO2Zvcih0aGlzLnZpZXdzPXt9LG89MCxhPXMubGVuZ3RoO2E+bztvKyspZT1zW29dLHQ9YyhlKSx0JiZlLnNlbGVjdGFibGU9PT0hMXx8KG49dD9cInN0cmluZ1wiIT10eXBlb2YgZS50eXBlP2UudGl0bGU6ZS50eXBlOmUsaT1EW25dLGkmJih0JiYoZS50eXBlPWkudHlwZSksaS50aXRsZT10aGlzLm9wdGlvbnMubWVzc2FnZXMudmlld3Nbbl0pLGU9ZCh7dGl0bGU6bn0saSx0P2U6e30pLG4mJih0aGlzLnZpZXdzW25dPWUsKCFyfHxlLnNlbGVjdGVkKSYmKHI9bikpKTtyJiYodGhpcy5fc2VsZWN0ZWRWaWV3TmFtZT1yKX0sdmlldzpmdW5jdGlvbihlKXtyZXR1cm4gZSYmKHRoaXMuX3NlbGVjdFZpZXcoZSksdGhpcy50cmlnZ2VyKFwibmF2aWdhdGVcIix7dmlldzplLGFjdGlvbjpcImNoYW5nZVZpZXdcIn0pKSx0aGlzLl9zZWxlY3RlZFZpZXd9LF9zZWxlY3RWaWV3OmZ1bmN0aW9uKGUpe2UmJnRoaXMudmlld3NbZV0mJih0aGlzLl9zZWxlY3RlZFZpZXcmJnRoaXMuX3VuYmluZFZpZXcodGhpcy5fc2VsZWN0ZWRWaWV3KSx0aGlzLl9zZWxlY3RlZFZpZXc9dGhpcy5faW5pdGlhbGl6ZVZpZXcoZSksdGhpcy5fc2VsZWN0ZWRWaWV3TmFtZT1lKX0sX3ZpZXdCeUluZGV4OmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy52aWV3cztmb3IodCBpbiBuKXtpZighZSlyZXR1cm4gdDtlLS19fSxfaW5pdGlhbGl6ZVZpZXc6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLnZpZXdzW2VdO2lmKGkpe2lmKG49aS50eXBlLFwic3RyaW5nXCI9PXR5cGVvZiBuJiYobj1rZW5kby5nZXR0ZXIoaS50eXBlKSh3aW5kb3cpKSwhbil0aHJvdyBFcnJvcihcIlRoZXJlIGlzIG5vIHN1Y2ggdmlld1wiKTtpPW5ldyBuKHRoaXMud3JhcHBlcix0KGQoITAse2hlYWRlclRyZWU6dGhpcy5faGVhZGVyVHJlZSx0YXNrVHJlZTp0aGlzLl90YXNrVHJlZSxkZXBlbmRlbmN5VHJlZTp0aGlzLl9kZXBlbmRlbmN5VHJlZX0saSx0aGlzLm9wdGlvbnMpKSl9cmV0dXJuIGl9LF91bmJpbmRWaWV3OmZ1bmN0aW9uKGUpe2UmJmUuZGVzdHJveSgpfSxfcmFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXtmaWVsZDpcInN0YXJ0XCIsZGlyOlwiYXNjXCJ9LHI9e2ZpZWxkOlwiZW5kXCIsZGlyOlwiZGVzY1wifTtyZXR1cm4gZSYmZS5sZW5ndGg/KHQ9bmV3IHAoZSkuc29ydChpKS50b0FycmF5KClbMF0uc3RhcnR8fG5ldyBEYXRlLG49bmV3IHAoZSkuc29ydChyKS50b0FycmF5KClbMF0uZW5kfHxuZXcgRGF0ZSx7c3RhcnQ6bmV3IERhdGUodCksZW5kOm5ldyBEYXRlKG4pfSk6e3N0YXJ0Om5ldyBEYXRlLGVuZDpuZXcgRGF0ZX19LF9yZW5kZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy52aWV3KCksbj10aGlzLl9yYW5nZShlKTt0aGlzLl90YXNrcz1lLHQucmFuZ2UobiksdC5yZW5kZXJMYXlvdXQoKSx0LnJlbmRlcihlKX0sX3JlbmRlckRlcGVuZGVuY2llczpmdW5jdGlvbihlKXt0aGlzLnZpZXcoKS5fcmVuZGVyRGVwZW5kZW5jaWVzKGUpfSxfdGFza0J5VWlkOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLl90YXNrcyxyPWkubGVuZ3RoO2ZvcihuPTA7cj5uO24rKylpZih0PWlbbl0sdC51aWQ9PT1lKXJldHVybiB0fSxfZHJhZ2dhYmxlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLHIsYSxzPXRoaXMsbD10aGlzLm9wdGlvbnMuc25hcCxjPW8uc3R5bGVzLGQ9ZnVuY3Rpb24oKXtzLnZpZXcoKS5fcmVtb3ZlRHJhZ0hpbnQoKSxlJiZlLmNzcyhcIm9wYWNpdHlcIiwxKSxlPW51bGwsdD1udWxsLGE9ITF9O3RoaXMub3B0aW9ucy5lZGl0YWJsZSYmKHRoaXMuX21vdmVEcmFnZ2FibGU9bmV3IGtlbmRvLnVpLkRyYWdnYWJsZSh0aGlzLndyYXBwZXIse2Rpc3RhbmNlOjAsZmlsdGVyOl8rYy50YXNrLGhvbGRUb0RyYWc6a2VuZG8uc3VwcG9ydC5tb2JpbGVPUyxpZ25vcmU6XytjLnRhc2tSZXNpemVIYW5kbGV9KSx0aGlzLl9tb3ZlRHJhZ2dhYmxlLmJpbmQoXCJkcmFnc3RhcnRcIixmdW5jdGlvbihpKXt2YXIgbz1zLnZpZXcoKTtyZXR1cm4gZT1pLmN1cnJlbnRUYXJnZXQucGFyZW50KCksdD1zLl90YXNrQnlVaWQoaS5jdXJyZW50VGFyZ2V0LmF0dHIoXCJkYXRhLXVpZFwiKSkscy50cmlnZ2VyKFwibW92ZVN0YXJ0XCIse3Rhc2s6dH0pP3ZvaWQgaS5wcmV2ZW50RGVmYXVsdCgpOihuPXQuc3RhcnQscj1vLl90aW1lQnlQb3NpdGlvbihpLngubG9jYXRpb24sbCktbixvLl9jcmVhdGVEcmFnSGludChlKSxlLmNzcyhcIm9wYWNpdHlcIiwuNSksdm9pZChhPSEwKSl9KS5iaW5kKFwiZHJhZ1wiLGtlbmRvLnRocm90dGxlKGZ1bmN0aW9uKGUpe3ZhciBpLG87YSYmKGk9cy52aWV3KCksbz1uZXcgRGF0ZShpLl90aW1lQnlQb3NpdGlvbihlLngubG9jYXRpb24sbCktcikscy50cmlnZ2VyKFwibW92ZVwiLHt0YXNrOnQsc3RhcnQ6b30pfHwobj1vLGkuX3VwZGF0ZURyYWdIaW50KG4pKSl9LDE1KSkuYmluZChcImRyYWdlbmRcIixmdW5jdGlvbigpe3MudHJpZ2dlcihcIm1vdmVFbmRcIix7dGFzazp0LHN0YXJ0Om59KSxkKCl9KS5iaW5kKFwiZHJhZ2NhbmNlbFwiLGZ1bmN0aW9uKCl7ZCgpfSkudXNlckV2ZW50cy5iaW5kKFwic2VsZWN0XCIsZnVuY3Rpb24oKXtpKCl9KSl9LF9yZXNpemFibGU6ZnVuY3Rpb24oKXt2YXIgZSx0LG4scixhLHMsbD10aGlzLGM9dGhpcy5vcHRpb25zLnNuYXAsZD1vLnN0eWxlcyx1PWZ1bmN0aW9uKCl7bC52aWV3KCkuX3JlbW92ZVJlc2l6ZUhpbnQoKSxlPW51bGwsdD1udWxsLHM9ITF9O3RoaXMub3B0aW9ucy5lZGl0YWJsZSYmKHRoaXMuX3Jlc2l6ZURyYWdnYWJsZT1uZXcga2VuZG8udWkuRHJhZ2dhYmxlKHRoaXMud3JhcHBlcix7ZGlzdGFuY2U6MCxmaWx0ZXI6XytkLnRhc2tSZXNpemVIYW5kbGUsaG9sZFRvRHJhZzohMX0pLHRoaXMuX3Jlc2l6ZURyYWdnYWJsZS5iaW5kKFwiZHJhZ3N0YXJ0XCIsZnVuY3Rpb24oaSl7cmV0dXJuIGE9aS5jdXJyZW50VGFyZ2V0Lmhhc0NsYXNzKGQudGFza1Jlc2l6ZUhhbmRsZVdlc3QpLGU9aS5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoXytkLnRhc2spLHQ9bC5fdGFza0J5VWlkKGUuYXR0cihcImRhdGEtdWlkXCIpKSxsLnRyaWdnZXIoXCJyZXNpemVTdGFydFwiLHt0YXNrOnR9KT92b2lkIGkucHJldmVudERlZmF1bHQoKToobj10LnN0YXJ0LHI9dC5lbmQsbC52aWV3KCkuX2NyZWF0ZVJlc2l6ZUhpbnQodCksdm9pZChzPSEwKSl9KS5iaW5kKFwiZHJhZ1wiLGtlbmRvLnRocm90dGxlKGZ1bmN0aW9uKGUpe3ZhciBpLG87cyYmKGk9bC52aWV3KCksbz1pLl90aW1lQnlQb3NpdGlvbihlLngubG9jYXRpb24sYywhYSksYT9uPXI+bz9vOnI6cj1vPm4/bzpuLGwudHJpZ2dlcihcInJlc2l6ZVwiLHt0YXNrOnQsc3RhcnQ6bixlbmQ6cn0pfHxpLl91cGRhdGVSZXNpemVIaW50KG4scixhKSl9LDE1KSkuYmluZChcImRyYWdlbmRcIixmdW5jdGlvbigpe2wudHJpZ2dlcihcInJlc2l6ZUVuZFwiLHt0YXNrOnQscmVzaXplU3RhcnQ6YSxzdGFydDpuLGVuZDpyfSksdSgpfSkuYmluZChcImRyYWdjYW5jZWxcIixmdW5jdGlvbigpe3UoKX0pLnVzZXJFdmVudHMuYmluZChcInNlbGVjdFwiLGZ1bmN0aW9uKCl7aSgpfSkpfSxfcGVyY2VudFJlc2l6ZURyYWdnYWJsZTpmdW5jdGlvbigpe3ZhciBlLHQsbixyLGEscyxsLGMsZCx1LGg9dGhpcyxwPW8uc3R5bGVzLGY9ZnVuY3Rpb24oKXtoLnZpZXcoKS5fcmVtb3ZlUGVyY2VudENvbXBsZXRlVG9vbHRpcCgpLHQ9bnVsbCxlPW51bGwsdT0hMX0sZz1mdW5jdGlvbihlKXt0LmZpbmQoXytwLnRhc2tDb21wbGV0ZSkud2lkdGgoZSkuZW5kKCkuc2libGluZ3MoXytwLnRhc2tEcmFnSGFuZGxlKS5jc3MoXCJsZWZ0XCIsZSl9O3RoaXMub3B0aW9ucy5lZGl0YWJsZSYmKHRoaXMuX3BlcmNlbnREcmFnZ2FibGU9bmV3IGtlbmRvLnVpLkRyYWdnYWJsZSh0aGlzLndyYXBwZXIse2Rpc3RhbmNlOjAsZmlsdGVyOl8rcC50YXNrRHJhZ0hhbmRsZSxob2xkVG9EcmFnOiExfSksdGhpcy5fcGVyY2VudERyYWdnYWJsZS5iaW5kKFwiZHJhZ3N0YXJ0XCIsZnVuY3Rpb24oaSl7dD1pLmN1cnJlbnRUYXJnZXQuc2libGluZ3MoXytwLnRhc2spLGU9aC5fdGFza0J5VWlkKHQuYXR0cihcImRhdGEtdWlkXCIpKSxsPWUucGVyY2VudENvbXBsZXRlLG49dC5vZmZzZXQoKSxyPXRoaXMuZWxlbWVudC5vZmZzZXQoKSxhPXQuZmluZChfK3AudGFza0NvbXBsZXRlKS53aWR0aCgpLHM9dC5vdXRlcldpZHRoKCksdT0hMH0pLmJpbmQoXCJkcmFnXCIsa2VuZG8udGhyb3R0bGUoZnVuY3Rpb24oZSl7aWYodSl7dmFyIHQ9TWF0aC5tYXgoMCxNYXRoLm1pbihzLGErZS54LmluaXRpYWxEZWx0YSkpO2w9TWF0aC5yb3VuZCh0L3MqMTAwKSxnKHQpLGM9bi50b3Atci50b3AsZD1uLmxlZnQrdC1yLmxlZnQsaC52aWV3KCkuX3VwZGF0ZVBlcmNlbnRDb21wbGV0ZVRvb2x0aXAoYyxkLGwpfX0sMTUpKS5iaW5kKFwiZHJhZ2VuZFwiLGZ1bmN0aW9uKCl7aC50cmlnZ2VyKFwicGVyY2VudFJlc2l6ZUVuZFwiLHt0YXNrOmUscGVyY2VudENvbXBsZXRlOmwvMTAwfSksZigpfSkuYmluZChcImRyYWdjYW5jZWxcIixmdW5jdGlvbigpe2coYSksZigpfSkudXNlckV2ZW50cy5iaW5kKFwic2VsZWN0XCIsZnVuY3Rpb24oKXtpKCl9KSl9LF9jcmVhdGVEZXBlbmRlbmN5RHJhZ2dhYmxlOmZ1bmN0aW9uKCl7dmFyIHQsbixyLGEscyxsLGM9dGhpcyxkPWUoKSxoPWUoKSxwPXUubXNpZSYmOT51LnZlcnNpb24sZj1vLnN0eWxlcyxnPWZ1bmN0aW9uKCl7dC5jc3MoXCJkaXNwbGF5XCIsXCJcIikucmVtb3ZlQ2xhc3MoZi5ob3ZlcmVkKSx0LnBhcmVudCgpLnJlbW92ZUNsYXNzKGYub3JpZ2luKSx0PW51bGwsbSghMSksaD1lKCksZD1lKCksYy52aWV3KCkuX3JlbW92ZURlcGVuZGVuY3lEcmFnSGludCgpLG49ITF9LG09ZnVuY3Rpb24oZSl7aC5oYXNDbGFzcyhmLm9yaWdpbil8fChoLmZpbmQoXytmLnRhc2tEb3QpLmNzcyhcImRpc3BsYXlcIixlP1wiYmxvY2tcIjpcIlwiKSxkLnRvZ2dsZUNsYXNzKGYuaG92ZXJlZCxlKSl9O3RoaXMub3B0aW9ucy5lZGl0YWJsZSYmKHAmJmRvY3VtZW50Lm5hbWVzcGFjZXMmJmRvY3VtZW50Lm5hbWVzcGFjZXMuYWRkKFwia3ZtbFwiLFwidXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTp2bWxcIixcIiNkZWZhdWx0I1ZNTFwiKSx0aGlzLl9kZXBlbmRlbmN5RHJhZ2dhYmxlPW5ldyBrZW5kby51aS5EcmFnZ2FibGUodGhpcy53cmFwcGVyLHtkaXN0YW5jZTowLGZpbHRlcjpfK2YudGFza0RvdCxob2xkVG9EcmFnOiExfSksdGhpcy5fZGVwZW5kZW5jeURyYWdnYWJsZS5iaW5kKFwiZHJhZ3N0YXJ0XCIsZnVuY3Rpb24oZSl7dD1lLmN1cnJlbnRUYXJnZXQuY3NzKFwiZGlzcGxheVwiLFwiYmxvY2tcIikuYWRkQ2xhc3MoZi5ob3ZlcmVkKSx0LnBhcmVudCgpLmFkZENsYXNzKGYub3JpZ2luKTt2YXIgaT10Lm9mZnNldCgpO3M9Yy52aWV3KCkuY29udGVudCxsPXMub2Zmc2V0KCkscj1NYXRoLnJvdW5kKGkubGVmdCtzLnNjcm9sbExlZnQoKS1sLmxlZnQrdC5vdXRlckhlaWdodCgpLzIpLGE9TWF0aC5yb3VuZChpLnRvcCtzLnNjcm9sbFRvcCgpLWwudG9wK3Qub3V0ZXJXaWR0aCgpLzIpLG49ITB9KS5iaW5kKFwiZHJhZ1wiLGtlbmRvLnRocm90dGxlKGZ1bmN0aW9uKHQpe3ZhciBpLG8sdTtuJiYoYy52aWV3KCkuX3JlbW92ZURlcGVuZGVuY3lEcmFnSGludCgpLGk9ZShrZW5kby5lbGVtZW50VW5kZXJDdXJzb3IodCkpLG89dC54LmxvY2F0aW9uK3Muc2Nyb2xsTGVmdCgpLWwubGVmdCx1PXQueS5sb2NhdGlvbitzLnNjcm9sbFRvcCgpLWwudG9wLGMudmlldygpLl91cGRhdGVEZXBlbmRlbmN5RHJhZ0hpbnQoe3g6cix5OmF9LHt4Om8seTp1fSxwKSxtKCExKSxkPWkuaGFzQ2xhc3MoZi50YXNrRG90KT9pOmUoKSxoPWkuY2xvc2VzdChfK2YudGFza1dyYXApLG0oITApKX0sMTUpKS5iaW5kKFwiZHJhZ2VuZFwiLGZ1bmN0aW9uKCl7dmFyIGUsbixpLHIsbztkLmxlbmd0aCYmKGU9dC5oYXNDbGFzcyhmLnRhc2tEb3RTdGFydCksbj1kLmhhc0NsYXNzKGYudGFza0RvdFN0YXJ0KSxpPWU/bj8zOjI6bj8xOjAscj1jLl90YXNrQnlVaWQodC5zaWJsaW5ncyhfK2YudGFzaykuYXR0cihcImRhdGEtdWlkXCIpKSxvPWMuX3Rhc2tCeVVpZChkLnNpYmxpbmdzKF8rZi50YXNrKS5hdHRyKFwiZGF0YS11aWRcIikpLHIhPT1vJiZjLnRyaWdnZXIoXCJkZXBlbmRlbmN5RHJhZ0VuZFwiLHt0eXBlOmkscHJlZGVjZXNzb3I6cixzdWNjZXNzb3I6b30pKSxnKCl9KS5iaW5kKFwiZHJhZ2NhbmNlbFwiLGZ1bmN0aW9uKCl7ZygpfSkudXNlckV2ZW50cy5iaW5kKFwic2VsZWN0XCIsZnVuY3Rpb24oKXtpKCl9KSl9LF9zZWxlY3RhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPW8uc3R5bGVzO3RoaXMub3B0aW9ucy5zZWxlY3RhYmxlJiZ0aGlzLndyYXBwZXIub24oZytmLF8rbi50YXNrLGZ1bmN0aW9uKG4pe24uc3RvcFByb3BhZ2F0aW9uKCksbi5jdHJsS2V5P3QudHJpZ2dlcihcImNsZWFyXCIpOnQudHJpZ2dlcihcInNlbGVjdFwiLHt1aWQ6ZSh0aGlzKS5hdHRyKFwiZGF0YS11aWRcIil9KX0pLm9uKGcrZixfK24udGFza3NXcmFwcGVyLGZ1bmN0aW9uKCl7dC5zZWxlY3REZXBlbmRlbmN5KCkubGVuZ3RoPjA/dC5jbGVhclNlbGVjdGlvbigpOnQudHJpZ2dlcihcImNsZWFyXCIpfSkub24oZytmLF8rbi5saW5lLGZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCksdC5zZWxlY3REZXBlbmRlbmN5KHRoaXMpfSl9LHNlbGVjdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLndyYXBwZXIuZmluZChlKSxuPW8uc3R5bGVzO3JldHVybiB0Lmxlbmd0aD8odGhpcy5jbGVhclNlbGVjdGlvbigpLHQuYWRkQ2xhc3Mobi5zZWxlY3RlZCksdm9pZChrZW5kby5zdXBwb3J0Lm1vYmlsZU9TJiZ0LnBhcmVudCgpLmFkZENsYXNzKG4udGFza1dyYXBBY3RpdmUpKSk6dGhpcy53cmFwcGVyLmZpbmQoXytuLnRhc2srXytuLnNlbGVjdGVkKX0sc2VsZWN0RGVwZW5kZW5jeTpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXMud3JhcHBlci5maW5kKHQpLHI9by5zdHlsZXM7cmV0dXJuIGkubGVuZ3RoPyh0aGlzLmNsZWFyU2VsZWN0aW9uKCksdGhpcy50cmlnZ2VyKFwiY2xlYXJcIiksbj1lKGkpLmF0dHIoXCJkYXRhLXVpZFwiKSx2b2lkIHRoaXMud3JhcHBlci5maW5kKF8rci5saW5lK1wiW2RhdGEtdWlkPSdcIituK1wiJ11cIikuYWRkQ2xhc3Moci5zZWxlY3RlZCkpOnRoaXMud3JhcHBlci5maW5kKF8rci5saW5lK18rci5zZWxlY3RlZCl9LGNsZWFyU2VsZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9by5zdHlsZXM7dGhpcy53cmFwcGVyLmZpbmQoXytlLnNlbGVjdGVkKS5yZW1vdmVDbGFzcyhlLnNlbGVjdGVkKSxrZW5kby5zdXBwb3J0Lm1vYmlsZU9TJiZ0aGlzLndyYXBwZXIuZmluZChfK2UudGFza1dyYXBBY3RpdmUpLnJlbW92ZUNsYXNzKGUudGFza1dyYXBBY3RpdmUpfSxfYXR0YWNoRXZlbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPW8uc3R5bGVzO3RoaXMub3B0aW9ucy5lZGl0YWJsZSYmKHRoaXMuX3RhYmluZGV4KCksdGhpcy53cmFwcGVyLm9uKGcrZixfK24udGFza0RlbGV0ZSxmdW5jdGlvbihpKXt0LnRyaWdnZXIoXCJyZW1vdmVUYXNrXCIse3VpZDplKHRoaXMpLmNsb3Nlc3QoXytuLnRhc2spLmF0dHIoXCJkYXRhLXVpZFwiKX0pLGkuc3RvcFByb3BhZ2F0aW9uKCksaS5wcmV2ZW50RGVmYXVsdCgpfSkub24obStmLF8rbi50YXNrLGZ1bmN0aW9uKG4pe3QudHJpZ2dlcihcImVkaXRUYXNrXCIse3VpZDplKHRoaXMpLmF0dHIoXCJkYXRhLXVpZFwiKX0pLG4uc3RvcFByb3BhZ2F0aW9uKCksbi5wcmV2ZW50RGVmYXVsdCgpfSkub24oditmLGZ1bmN0aW9uKGUpe3ZhciBuO2Uua2V5Q29kZT09PWguREVMRVRFJiYobj10LnNlbGVjdERlcGVuZGVuY3koKSxuLmxlbmd0aCYmKHQudHJpZ2dlcihcInJlbW92ZURlcGVuZGVuY3lcIix7dWlkOm4uYXR0cihcImRhdGEtdWlkXCIpfSksdC5jbGVhclNlbGVjdGlvbigpKSl9KSl9fSksZCghMCxvLHtzdHlsZXM6cn0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7cmV0dXJuXCJbXCIrZi5hdHRyKFwidWlkXCIpKyhlP1wiPSdcIitlK1wiJ11cIjpcIl1cIil9ZnVuY3Rpb24gaShlKXtyZXR1cm4gZGVsZXRlIGUubmFtZSxkZWxldGUgZS5wcmVmaXgsZGVsZXRlIGUucmVtb3ZlLGRlbGV0ZSBlLmVkaXQsZGVsZXRlIGUuYWRkLGRlbGV0ZSBlLm5hdmlnYXRlLGV9ZnVuY3Rpb24gcihlKXt2YXIgdCxuLGkscixvLGE7aWYoZS5maWx0ZXIoXCJbbmFtZT1lbmRdLCBbbmFtZT1zdGFydF1cIikubGVuZ3RoKXtmb3IodD1lLmF0dHIoXCJuYW1lXCIpLG49Zi53aWRnZXRJbnN0YW5jZShlLGYudWkpLGk9e30scj1lO3IhPT13aW5kb3cmJiFvOylyPXIucGFyZW50KCksbz1yLmRhdGEoXCJrZW5kb0VkaXRhYmxlXCIpO3JldHVybihhPW8/by5vcHRpb25zLm1vZGVsOm51bGwpPyhpLnN0YXJ0PWEuc3RhcnQsaS5lbmQ9YS5lbmQsaVt0XT1uP24udmFsdWUoKTpmLnBhcnNlRGF0ZShlLnZhbHVlKCkpLGkuZW5kPj1pLnN0YXJ0KTohMH1yZXR1cm4hMH1mdW5jdGlvbiBvKHQsbil7dmFyIGk9dC5wYXJlbnRzKFwiW1wiK2YuYXR0cihcInJvbGVcIikrJz1cImdhbnR0XCJdJykscj1bXSxvPWEoaSk7dC5hdHRyKEksMCksbiYmby5lYWNoKGZ1bmN0aW9uKHQsbil7clt0XT1lKG4pLnNjcm9sbFRvcCgpfSk7dHJ5e3RbMF0uc2V0QWN0aXZlKCl9Y2F0Y2gocyl7dFswXS5mb2N1cygpfW4mJm8uZWFjaChmdW5jdGlvbih0LG4pe2Uobikuc2Nyb2xsVG9wKHJbdF0pfSl9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gZSh0KS5wYXJlbnRzVW50aWwoXCJib2R5XCIpLmZpbHRlcihmdW5jdGlvbihlLHQpe3ZhciBuPWYuZ2V0Q29tcHV0ZWRTdHlsZXModCxbXCJvdmVyZmxvd1wiXSk7cmV0dXJuXCJ2aXNpYmxlXCIhPW4ub3ZlcmZsb3d9KS5hZGQod2luZG93KX12YXIgcyxsLGMsZCx1LGgscCxmPXdpbmRvdy5rZW5kbyxnPWYuc3VwcG9ydC5icm93c2VyLG09Zi5PYnNlcnZhYmxlLHY9Zi51aS5XaWRnZXQsXz1mLmRhdGEuRGF0YVNvdXJjZSx5PWYuZGF0YS5PYnNlcnZhYmxlT2JqZWN0LHc9Zi5kYXRhLk9ic2VydmFibGVBcnJheSxiPWYuZGF0YS5RdWVyeSxrPWUuaXNBcnJheSx4PWUuaW5BcnJheSxDPWYuaXNGdW5jdGlvbixTPWUucHJveHksVD1lLmV4dGVuZCxEPWUuaXNQbGFpbk9iamVjdCxBPWUubWFwLEU9Zi5rZXlzLE09XCIua2VuZG9HYW50dFwiLFA9XCJwMFwiLEk9XCJ0YWJJbmRleFwiLHo9XCJjbGlja1wiLEY9XCJ3aWR0aFwiLFI9XCJzdHJpbmdcIixCPXtkb3duOntvcmlnaW46XCJib3R0b20gY2VudGVyXCIscG9zaXRpb246XCJ0b3AgY2VudGVyXCJ9LHVwOntvcmlnaW46XCJ0b3AgY2VudGVyXCIscG9zaXRpb246XCJib3R0b20gY2VudGVyXCJ9fSxMPVwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsTz1cImdhbnR0X2FjdGl2ZV9jZWxsXCIsSD1cImFjdGlvbi1vcHRpb24tZm9jdXNlZFwiLE49XCIuXCIsVj1cIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyB0YXNrP1wiLFU9XCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgZGVwZW5kZW5jeT9cIixXPSc8YnV0dG9uIGNsYXNzPVwiIz1zdHlsZXMuYnV0dG9uIyAjPWNsYXNzTmFtZSNcIiAjaWYgKGFjdGlvbikgeyNkYXRhLWFjdGlvbj1cIiM9YWN0aW9uI1wiI30jPjxzcGFuIGNsYXNzPVwiIz1pY29uQ2xhc3MjXCI+PC9zcGFuPiM9dGV4dCM8L2J1dHRvbj4nLGo9JzxhIGNsYXNzPVwiIz1jbGFzc05hbWUjXCIgIz1hdHRyIyBocmVmPVwiXFxcXCNcIj4jPXRleHQjPC9hPicsRz1mLnRlbXBsYXRlKCc8dWwgY2xhc3M9XCIjPXN0eWxlcy52aWV3c1dyYXBwZXIjXCI+I2Zvcih2YXIgdmlldyBpbiB2aWV3cyl7IzxsaSBjbGFzcz1cIiM9c3R5bGVzLnZpZXdCdXR0b25EZWZhdWx0IyAjPXN0eWxlcy52aWV3QnV0dG9uIy0jPSB2aWV3LnRvTG93ZXJDYXNlKCkgI1wiIGRhdGEtIz1ucyNuYW1lPVwiIz12aWV3I1wiPjxhIGhyZWY9XCJcXFxcI1wiIGNsYXNzPVwiIz1zdHlsZXMubGluayNcIj4jPXZpZXdzW3ZpZXddLnRpdGxlIzwvYT48L2xpPiN9IzwvdWw+JykscT1mLnRlbXBsYXRlKCc8ZGl2IGNsYXNzPVwiIz1zdHlsZXMucG9wdXBXcmFwcGVyI1wiPjx1bCBjbGFzcz1cIiM9c3R5bGVzLnBvcHVwTGlzdCNcIiByb2xlPVwibGlzdGJveFwiPiNmb3IodmFyIGkgPSAwLCBsID0gYWN0aW9ucy5sZW5ndGg7IGkgPCBsOyBpKyspeyM8bGkgY2xhc3M9XCIjPXN0eWxlcy5pdGVtI1wiIGRhdGEtYWN0aW9uPVwiIz1hY3Rpb25zW2ldLmRhdGEjXCIgcm9sZT1cIm9wdGlvblwiPiM9YWN0aW9uc1tpXS50ZXh0Izwvc3Bhbj4jfSM8L3VsPjwvZGl2PicpLCQ9Zi50ZW1wbGF0ZSgnPGRpdiBjbGFzcz1cIiM9c3R5bGVzLmZvb3RlcldyYXBwZXIjXCI+PGRpdiBjbGFzcz1cIiM9c3R5bGVzLmFjdGlvbnMjXCI+PGJ1dHRvbiBjbGFzcz1cIiM9c3R5bGVzLmJ1dHRvbiNcIiBkYXRhLWFjdGlvbj1cIiM9YWN0aW9uLmRhdGEjXCI+PHNwYW4gY2xhc3M9XCIjPXN0eWxlcy5pY29uUGx1cyNcIj48L3NwYW4+Iz1hY3Rpb24udGl0bGUjPC9idXR0b24+PC9kaXY+PC9kaXY+JyksWT1mdW5jdGlvbih0LG4pe3ZhciBpPXtuYW1lOm4uZmllbGR9LHI9bi5tb2RlbC5maWVsZHNbbi5maWVsZF0udmFsaWRhdGlvbjtyJiZEKHIpJiZyLm1lc3NhZ2UmJihpW2YuYXR0cihcImRhdGVDb21wYXJlLW1zZ1wiKV09ci5tZXNzYWdlKSxlKCc8aW5wdXQgdHlwZT1cInRleHRcIiByZXF1aXJlZCAnK2YuYXR0cihcInR5cGVcIikrJz1cImRhdGVcIiAnK2YuYXR0cihcInJvbGVcIikrJz1cImRhdGV0aW1lcGlja2VyXCIgJytmLmF0dHIoXCJiaW5kXCIpKyc9XCJ2YWx1ZTonK24uZmllbGQrJ1wiICcrZi5hdHRyKFwidmFsaWRhdGVcIikrXCI9J3RydWUnIC8+XCIpLmF0dHIoaSkuYXBwZW5kVG8odCksZShcIjxzcGFuIFwiK2YuYXR0cihcImZvclwiKSsnPVwiJytuLmZpZWxkKydcIiBjbGFzcz1cImstaW52YWxpZC1tc2dcIi8+JykuaGlkZSgpLmFwcGVuZFRvKHQpfSxLPWZ1bmN0aW9uKHQsbil7ZSgnPGEgaHJlZj1cIiNcIiBjbGFzcz1cIicrbi5zdHlsZXMuYnV0dG9uKydcIj4nK24ubWVzc2FnZXMuYXNzaW5nQnV0dG9uK1wiPC9hPlwiKS5jbGljayhuLmNsaWNrKS5hcHBlbmRUbyh0KX0sUT17d3JhcHBlcjpcImstd2lkZ2V0IGstZ2FudHRcIixsaXN0V3JhcHBlcjpcImstZ2FudHQtbGF5b3V0IGstZ2FudHQtdHJlZWxpc3RcIixsaXN0Olwiay1nYW50dC10cmVlbGlzdFwiLHRpbWVsaW5lV3JhcHBlcjpcImstZ2FudHQtbGF5b3V0IGstZ2FudHQtdGltZWxpbmVcIix0aW1lbGluZTpcImstZ2FudHQtdGltZWxpbmVcIixzcGxpdEJhcldyYXBwZXI6XCJrLXNwbGl0YmFyIGstc3RhdGUtZGVmYXVsdCBrLXNwbGl0YmFyLWhvcml6b250YWwgay1zcGxpdGJhci1kcmFnZ2FibGUtaG9yaXpvbnRhbCBrLWdhbnR0LWxheW91dFwiLHNwbGl0QmFyOlwiay1zcGxpdGJhclwiLHNwbGl0QmFySG92ZXI6XCJrLXNwbGl0YmFyLWhvcml6b250YWwtaG92ZXJcIixwb3B1cFdyYXBwZXI6XCJrLWxpc3QtY29udGFpbmVyXCIscG9wdXBMaXN0Olwiay1saXN0IGstcmVzZXRcIixyZXNpemVIYW5kbGU6XCJrLXJlc2l6ZS1oYW5kbGVcIixpY29uOlwiay1pY29uXCIsaXRlbTpcImstaXRlbVwiLGxpbmU6XCJrLWxpbmVcIixidXR0b25EZWxldGU6XCJrLWdhbnR0LWRlbGV0ZVwiLGJ1dHRvbkNhbmNlbDpcImstZ2FudHQtY2FuY2VsXCIsYnV0dG9uU2F2ZTpcImstZ2FudHQtdXBkYXRlXCIscHJpbWFyeTpcImstcHJpbWFyeVwiLGhvdmVyZWQ6XCJrLXN0YXRlLWhvdmVyXCIsc2VsZWN0ZWQ6XCJrLXN0YXRlLXNlbGVjdGVkXCIsZm9jdXNlZDpcImstc3RhdGUtZm9jdXNlZFwiLGdyaWRIZWFkZXI6XCJrLWdyaWQtaGVhZGVyXCIsZ3JpZEhlYWRlcldyYXA6XCJrLWdyaWQtaGVhZGVyLXdyYXBcIixncmlkQ29udGVudDpcImstZ3JpZC1jb250ZW50XCIscG9wdXA6e2Zvcm06XCJrLXBvcHVwLWVkaXQtZm9ybVwiLGVkaXRGb3JtOlwiay1nYW50dC1lZGl0LWZvcm1cIixmb3JtQ29udGFpbmVyOlwiay1lZGl0LWZvcm0tY29udGFpbmVyXCIscmVzb3VyY2VzRm9ybUNvbnRhaW5lcjpcImstcmVzb3VyY2VzLWZvcm0tY29udGFpbmVyXCIsbWVzc2FnZTpcImstcG9wdXAtbWVzc2FnZVwiLGJ1dHRvbnNDb250YWluZXI6XCJrLWVkaXQtYnV0dG9ucyBrLXN0YXRlLWRlZmF1bHRcIixidXR0b246XCJrLWJ1dHRvblwiLGVkaXRGaWVsZDpcImstZWRpdC1maWVsZFwiLGVkaXRMYWJlbDpcImstZWRpdC1sYWJlbFwiLHJlc291cmNlc0ZpZWxkOlwiay1nYW50dC1yZXNvdXJjZXNcIn0sdG9vbGJhcjp7aGVhZGVyV3JhcHBlcjpcImstZmxvYXR3cmFwIGstaGVhZGVyIGstZ2FudHQtdG9vbGJhclwiLGZvb3RlcldyYXBwZXI6XCJrLWZsb2F0d3JhcCBrLWhlYWRlciBrLWdhbnR0LXRvb2xiYXJcIix0b29sYmFyOlwiay1nYW50dC10b29sYmFyXCIsdmlld3M6XCJrLWdhbnR0LXZpZXdzXCIsdmlld3NXcmFwcGVyOlwiay1yZXNldCBrLWhlYWRlciBrLWdhbnR0LXZpZXdzXCIsYWN0aW9uczpcImstZ2FudHQtYWN0aW9uc1wiLGJ1dHRvbjpcImstYnV0dG9uIGstYnV0dG9uLWljb250ZXh0XCIsaWNvblBsdXM6XCJrLWljb24gay1pLXBsdXNcIixpY29uUGRmOlwiay1pY29uIGstaS1wZGZcIix2aWV3QnV0dG9uRGVmYXVsdDpcImstc3RhdGUtZGVmYXVsdFwiLHZpZXdCdXR0b246XCJrLXZpZXdcIixsaW5rOlwiay1saW5rXCIscGRmQnV0dG9uOlwiay1nYW50dC1wZGZcIixhcHBlbmRCdXR0b246XCJrLWdhbnR0LWNyZWF0ZVwifX0sWD17YXBwZW5kOnt0ZXh0OlwiQWRkIFRhc2tcIixhY3Rpb246XCJhZGRcIixjbGFzc05hbWU6US50b29sYmFyLmFwcGVuZEJ1dHRvbixpY29uQ2xhc3M6US50b29sYmFyLmljb25QbHVzfSxwZGY6e3RleHQ6XCJFeHBvcnQgdG8gUERGXCIsY2xhc3NOYW1lOlEudG9vbGJhci5wZGZCdXR0b24saWNvbkNsYXNzOlEudG9vbGJhci5pY29uUGRmfX0sSj1tLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe20uZm4uaW5pdC5jYWxsKHRoaXMpLHRoaXMuZWxlbWVudD1lLHRoaXMub3B0aW9ucz1UKCEwLHt9LHRoaXMub3B0aW9ucyx0KSx0aGlzLl9wb3B1cCgpfSxvcHRpb25zOntkaXJlY3Rpb246XCJkb3duXCIsbmF2aWdhdGFibGU6ITF9LF9jdXJyZW50OmZ1bmN0aW9uKGUpe3ZhciB0PXAuc3R5bGVzLG49dGhpcy5saXN0LmZpbmQoTit0LmZvY3VzZWQpLGk9bltlXSgpO2kubGVuZ3RoJiYobi5yZW1vdmVDbGFzcyh0LmZvY3VzZWQpLnJlbW92ZUF0dHIoXCJpZFwiKSxpLmFkZENsYXNzKHQuZm9jdXNlZCkuYXR0cihcImlkXCIsSCksdGhpcy5saXN0LmZpbmQoXCJ1bFwiKS5yZW1vdmVBdHRyKEwpLmF0dHIoTCxIKSl9LF9wb3B1cDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj1wLnN0eWxlcyxpPVwibGlcIitOK24uaXRlbSxyPXRoaXMub3B0aW9ucy5tZXNzYWdlcy5hY3Rpb25zLG89dGhpcy5vcHRpb25zLm5hdmlnYXRhYmxlO3RoaXMubGlzdD1lKHEoe3N0eWxlczpuLGFjdGlvbnM6W3tkYXRhOlwiYWRkXCIsdGV4dDpyLmFkZENoaWxkfSx7ZGF0YTpcImluc2VydC1iZWZvcmVcIix0ZXh0OnIuaW5zZXJ0QmVmb3JlfSx7ZGF0YTpcImluc2VydC1hZnRlclwiLHRleHQ6ci5pbnNlcnRBZnRlcn1dfSkpLHRoaXMuZWxlbWVudC5hcHBlbmQodGhpcy5saXN0KSx0aGlzLnBvcHVwPW5ldyBmLnVpLlBvcHVwKHRoaXMubGlzdCxUKHthbmNob3I6dGhpcy5lbGVtZW50LG9wZW46ZnVuY3Rpb24oKXt0Ll9hZGp1c3RMaXN0V2lkdGgoKX0sYW5pbWF0aW9uOnRoaXMub3B0aW9ucy5hbmltYXRpb259LEJbdGhpcy5vcHRpb25zLmRpcmVjdGlvbl0pKSx0aGlzLmVsZW1lbnQub24oeitNLE4rbi50b29sYmFyLmFwcGVuZEJ1dHRvbixmdW5jdGlvbihpKXt2YXIgcj1lKHRoaXMpLGE9ci5hdHRyKGYuYXR0cihcImFjdGlvblwiKSk7aS5wcmV2ZW50RGVmYXVsdCgpLGE/dC50cmlnZ2VyKFwiY29tbWFuZFwiLHt0eXBlOmF9KToodC5wb3B1cC5vcGVuKCksbyYmdC5saXN0LmZpbmQoXCJsaTpmaXJzdFwiKS5hZGRDbGFzcyhuLmZvY3VzZWQpLmF0dHIoXCJpZFwiLEgpLmVuZCgpLmZpbmQoXCJ1bFwiKS5hdHRyKHtUQUJJTkRFWDowLFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCI6SH0pLmZvY3VzKCkpfSksdGhpcy5saXN0LmZpbmQoaSkuaG92ZXIoZnVuY3Rpb24oKXtlKHRoaXMpLmFkZENsYXNzKG4uaG92ZXJlZCl9LGZ1bmN0aW9uKCl7ZSh0aGlzKS5yZW1vdmVDbGFzcyhuLmhvdmVyZWQpfSkuZW5kKCkub24oeitNLGksZnVuY3Rpb24oKXt0LnRyaWdnZXIoXCJjb21tYW5kXCIse3R5cGU6ZSh0aGlzKS5hdHRyKGYuYXR0cihcImFjdGlvblwiKSl9KSx0LnBvcHVwLmNsb3NlKCl9KSxvJiYodGhpcy5wb3B1cC5iaW5kKFwiY2xvc2VcIixmdW5jdGlvbigpe3QubGlzdC5maW5kKGkpLnJlbW92ZUNsYXNzKG4uZm9jdXNlZCkuZW5kKCkuZmluZChcInVsXCIpLmF0dHIoSSwwKSx0LmVsZW1lbnQucGFyZW50cyhcIltcIitmLmF0dHIoXCJyb2xlXCIpKyc9XCJnYW50dFwiXScpLmZpbmQoTituLmdyaWRDb250ZW50K1wiID4gdGFibGU6Zmlyc3RcIikuZm9jdXMoKX0pLHRoaXMubGlzdC5maW5kKFwidWxcIikub24oXCJrZXlkb3duXCIrTSxmdW5jdGlvbihlKXt2YXIgaT1lLmtleUNvZGU7c3dpdGNoKGkpe2Nhc2UgRS5VUDplLnByZXZlbnREZWZhdWx0KCksdC5fY3VycmVudChcInByZXZcIik7YnJlYWs7Y2FzZSBFLkRPV046ZS5wcmV2ZW50RGVmYXVsdCgpLHQuX2N1cnJlbnQoXCJuZXh0XCIpO2JyZWFrO2Nhc2UgRS5FTlRFUjp0Lmxpc3QuZmluZChOK24uZm9jdXNlZCkuY2xpY2soKTticmVhaztjYXNlIEUuRVNDOmUucHJldmVudERlZmF1bHQoKSx0LnBvcHVwLmNsb3NlKCl9fSkpfSxfYWRqdXN0TGlzdFdpZHRoOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMubGlzdCxpPW5bMF0uc3R5bGUud2lkdGgscj10aGlzLmVsZW1lbnQ7KG4uZGF0YShGKXx8IWkpJiYoZT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZT93aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShyWzBdLG51bGwpOjAsdD1lP3BhcnNlRmxvYXQoZS53aWR0aCk6ci5vdXRlcldpZHRoKCksZSYmKGcubW96aWxsYXx8Zy5tc2llKSYmKHQrPXBhcnNlRmxvYXQoZS5wYWRkaW5nTGVmdCkrcGFyc2VGbG9hdChlLnBhZGRpbmdSaWdodCkrcGFyc2VGbG9hdChlLmJvcmRlckxlZnRXaWR0aCkrcGFyc2VGbG9hdChlLmJvcmRlclJpZ2h0V2lkdGgpKSxpPVwiYm9yZGVyLWJveFwiIT09bi5jc3MoXCJib3gtc2l6aW5nXCIpP3QtKG4ub3V0ZXJXaWR0aCgpLW4ud2lkdGgoKSk6dCxuLmNzcyh7Zm9udEZhbWlseTpyLmNzcyhcImZvbnQtZmFtaWx5XCIpLHdpZHRoOml9KS5kYXRhKEYsaSkpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wb3B1cC5kZXN0cm95KCksdGhpcy5lbGVtZW50Lm9mZihNKSx0aGlzLmxpc3Qub2ZmKE0pLHRoaXMudW5iaW5kKCl9fSksWj1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgaSxyO2lmKG49ayhpKT97ZGF0YTpufTpuLGk9bnx8e30scj1pLmRhdGEsaS5kYXRhPXIsIShpIGluc3RhbmNlb2YgZSkmJmkgaW5zdGFuY2VvZiBfKXRocm93IEVycm9yKFwiSW5jb3JyZWN0IERhdGFTb3VyY2UgdHlwZS4gT25seSBcIit0K1wiIGluc3RhbmNlcyBhcmUgc3VwcG9ydGVkXCIpO3JldHVybiBpIGluc3RhbmNlb2YgZT9pOm5ldyBlKGkpfX0sZXQ9Zi5kYXRhLk1vZGVsLmRlZmluZSh7aWQ6XCJpZFwiLGZpZWxkczp7aWQ6e3R5cGU6XCJudW1iZXJcIn0scHJlZGVjZXNzb3JJZDp7dHlwZTpcIm51bWJlclwifSxzdWNjZXNzb3JJZDp7dHlwZTpcIm51bWJlclwifSx0eXBlOnt0eXBlOlwibnVtYmVyXCJ9fX0pLHR0PV8uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe18uZm4uaW5pdC5jYWxsKHRoaXMsVCghMCx7fSx7c2NoZW1hOnttb2RlbEJhc2U6ZXQsbW9kZWw6ZXR9fSxlKSl9LHN1Y2Nlc3NvcnM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2RlcGVuZGVuY2llcyhcInByZWRlY2Vzc29ySWRcIixlKX0scHJlZGVjZXNzb3JzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9kZXBlbmRlbmNpZXMoXCJzdWNjZXNzb3JJZFwiLGUpfSxkZXBlbmRlbmNpZXM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wcmVkZWNlc3NvcnMoZSksbj10aGlzLnN1Y2Nlc3NvcnMoZSk7cmV0dXJuIHQucHVzaC5hcHBseSh0LG4pLHR9LF9kZXBlbmRlbmNpZXM6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLnZpZXcoKSxpPXtmaWVsZDplLG9wZXJhdG9yOlwiZXFcIix2YWx1ZTp0fTtyZXR1cm4gbj1uZXcgYihuKS5maWx0ZXIoaSkudG9BcnJheSgpfX0pO3R0LmNyZWF0ZT1aKHR0LFwiR2FudHREZXBlbmRlbmN5RGF0YVNvdXJjZVwiKSxzPWYuZGF0YS5Nb2RlbC5kZWZpbmUoe2R1cmF0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbmQsdD10aGlzLnN0YXJ0O3JldHVybiBlLXR9LGlzTWlsZXN0b25lOmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmR1cmF0aW9uKCl9LF9vZmZzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPVtcInN0YXJ0XCIsXCJlbmRcIl07Zm9yKG49MDtpLmxlbmd0aD5uO24rKyl0PW5ldyBEYXRlKHRoaXMuZ2V0KGlbbl0pLmdldFRpbWUoKStlKSx0aGlzLnNldChpW25dLHQpfSxpZDpcImlkXCIsZmllbGRzOntpZDp7dHlwZTpcIm51bWJlclwifSxwYXJlbnRJZDp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHRWYWx1ZTpudWxsLHZhbGlkYXRpb246e3JlcXVpcmVkOiEwfX0sb3JkZXJJZDp7dHlwZTpcIm51bWJlclwiLHZhbGlkYXRpb246e3JlcXVpcmVkOiEwfX0sdGl0bGU6e3R5cGU6XCJzdHJpbmdcIixkZWZhdWx0VmFsdWU6XCJcIn0sc3RhcnQ6e3R5cGU6XCJkYXRlXCIsdmFsaWRhdGlvbjp7cmVxdWlyZWQ6ITAsZGF0ZUNvbXBhcmU6cixtZXNzYWdlOlwiU3RhcnQgZGF0ZSBzaG91bGQgYmUgYmVmb3JlIG9yIGVxdWFsIHRvIHRoZSBlbmQgZGF0ZVwifX0sZW5kOnt0eXBlOlwiZGF0ZVwiLHZhbGlkYXRpb246e3JlcXVpcmVkOiEwLGRhdGVDb21wYXJlOnIsbWVzc2FnZTpcIkVuZCBkYXRlIHNob3VsZCBiZSBhZnRlciBvciBlcXVhbCB0byB0aGUgc3RhcnQgZGF0ZVwifX0scGVyY2VudENvbXBsZXRlOnt0eXBlOlwibnVtYmVyXCIsdmFsaWRhdGlvbjp7cmVxdWlyZWQ6ITAsbWluOjAsbWF4OjEsc3RlcDouMDF9fSxzdW1tYXJ5Ont0eXBlOlwiYm9vbGVhblwifSxleHBhbmRlZDp7dHlwZTpcImJvb2xlYW5cIixkZWZhdWx0VmFsdWU6ITB9fX0pLGw9Xy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7Xy5mbi5pbml0LmNhbGwodGhpcyxUKCEwLHt9LHtzY2hlbWE6e21vZGVsQmFzZTpzLG1vZGVsOnN9fSxlKSl9LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmdldChcInBhcmVudElkXCIpLG49dGhpcy50YXNrQWxsQ2hpbGRyZW4oZSk7cmV0dXJuIHRoaXMuX3JlbW92ZUl0ZW1zKG4pLGU9Xy5mbi5yZW1vdmUuY2FsbCh0aGlzLGUpLHRoaXMuX2NoaWxkUmVtb3ZlZCh0LGUuZ2V0KFwib3JkZXJJZFwiKSksZX0sYWRkOmZ1bmN0aW9uKGUpe3JldHVybiBlPyhlPXRoaXMuX3RvR2FudHRUYXNrKGUpLHRoaXMuaW5zZXJ0KHRoaXMudGFza1NpYmxpbmdzKGUpLmxlbmd0aCxlKSk6dH0saW5zZXJ0OmZ1bmN0aW9uKGUsbil7cmV0dXJuIG4/KG49dGhpcy5fdG9HYW50dFRhc2sobiksbi5zZXQoXCJvcmRlcklkXCIsZSksbj1fLmZuLmluc2VydC5jYWxsKHRoaXMsZSxuKSx0aGlzLl9yZW9yZGVyU2libGluZ3Mobix0aGlzLnRhc2tTaWJsaW5ncyhuKS5sZW5ndGgtMSksdGhpcy5fcmVzb2x2ZVN1bW1hcnlGaWVsZHModGhpcy50YXNrUGFyZW50KG4pKSxuKTp0fSx0YXNrQ2hpbGRyZW46ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLnZpZXcoKSxyPXtmaWVsZDpcInBhcmVudElkXCIsb3BlcmF0b3I6XCJlcVwiLHZhbHVlOm51bGx9LG89dGhpcy5fc29ydHx8e2ZpZWxkOlwib3JkZXJJZFwiLGRpcjpcImFzY1wifTtpZihlKXtpZihuPWUuZ2V0KFwiaWRcIiksbj09PXR8fG51bGw9PT1uKXJldHVybltdO3IudmFsdWU9bn1yZXR1cm4gaT1uZXcgYihpKS5maWx0ZXIocikuc29ydChvKS50b0FycmF5KCl9LHRhc2tBbGxDaGlsZHJlbjpmdW5jdGlvbihlKXt2YXIgdD1bXSxuPXRoaXMsaT1mdW5jdGlvbihlKXt2YXIgcj1uLnRhc2tDaGlsZHJlbihlKTt0LnB1c2guYXBwbHkodCxyKSxBKHIsaSl9O3JldHVybiBlP2koZSk6dD10aGlzLnZpZXcoKSx0fSx0YXNrU2libGluZ3M6ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIG51bGw7dmFyIHQ9dGhpcy50YXNrUGFyZW50KGUpO3JldHVybiB0aGlzLnRhc2tDaGlsZHJlbih0KX0sdGFza1BhcmVudDpmdW5jdGlvbihlKXtyZXR1cm4gZSYmbnVsbCE9PWUuZ2V0KFwicGFyZW50SWRcIik/dGhpcy5nZXQoZS5wYXJlbnRJZCk6bnVsbH0sdGFza0xldmVsOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLG49dGhpcy50YXNrUGFyZW50KGUpO251bGwhPT1uOyl0Kz0xLG49dGhpcy50YXNrUGFyZW50KG4pO3JldHVybiB0fSx0YXNrVHJlZTpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvPVtdLGE9dGhpcy50YXNrQ2hpbGRyZW4oZSk7Zm9yKG49MCxpPWEubGVuZ3RoO2k+bjtuKyspdD1hW25dLG8ucHVzaCh0KSx0LmdldChcImV4cGFuZGVkXCIpJiYocj10aGlzLnRhc2tUcmVlKHQpLG8ucHVzaC5hcHBseShvLHIpKTtyZXR1cm4gb30sdXBkYXRlOmZ1bmN0aW9uKGUsbil7dmFyIGkscixvPXRoaXMsYT1mdW5jdGlvbihlLHQpe3ZhciBuLGkscj1vLnRhc2tBbGxDaGlsZHJlbihlKTtmb3Iobj0wLGk9ci5sZW5ndGg7aT5uO24rKylyW25dLl9vZmZzZXQodCl9LHM9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5maWVsZCxuPWUuc2VuZGVyO3N3aXRjaCh0KXtjYXNlXCJzdGFydFwiOm8uX3Jlc29sdmVTdW1tYXJ5U3RhcnQoby50YXNrUGFyZW50KG4pKSxhKG4sbi5nZXQodCkuZ2V0VGltZSgpLWkuZ2V0VGltZSgpKTticmVhaztjYXNlXCJlbmRcIjpvLl9yZXNvbHZlU3VtbWFyeUVuZChvLnRhc2tQYXJlbnQobikpO2JyZWFrO2Nhc2VcInBlcmNlbnRDb21wbGV0ZVwiOm8uX3Jlc29sdmVTdW1tYXJ5UGVyY2VudENvbXBsZXRlKG8udGFza1BhcmVudChuKSk7YnJlYWs7Y2FzZVwib3JkZXJJZFwiOm8uX3Jlb3JkZXJTaWJsaW5ncyhuLGkpfX07bi5wYXJlbnRJZCE9PXQmJihpPWUuZ2V0KFwicGFyZW50SWRcIiksaSE9PW4ucGFyZW50SWQmJihlLnNldChcInBhcmVudElkXCIsbi5wYXJlbnRJZCksby5fY2hpbGRSZW1vdmVkKGksZS5nZXQoXCJvcmRlcklkXCIpKSxlLnNldChcIm9yZGVySWRcIixvLnRhc2tTaWJsaW5ncyhlKS5sZW5ndGgtMSksby5fcmVzb2x2ZVN1bW1hcnlGaWVsZHMoby50YXNrUGFyZW50KGUpKSksZGVsZXRlIG4ucGFyZW50SWQpLGUuYmluZChcImNoYW5nZVwiLHMpO2ZvcihyIGluIG4paT1lLmdldChyKSxlLnNldChyLG5bcl0pO2UudW5iaW5kKFwiY2hhbmdlXCIscyl9LF9yZXNvbHZlU3VtbWFyeUZpZWxkczpmdW5jdGlvbihlKXtlJiYodGhpcy5fdXBkYXRlU3VtbWFyeShlKSx0aGlzLnRhc2tDaGlsZHJlbihlKS5sZW5ndGgmJih0aGlzLl9yZXNvbHZlU3VtbWFyeVN0YXJ0KGUpLHRoaXMuX3Jlc29sdmVTdW1tYXJ5RW5kKGUpLHRoaXMuX3Jlc29sdmVTdW1tYXJ5UGVyY2VudENvbXBsZXRlKGUpKSl9LF9yZXNvbHZlU3VtbWFyeVN0YXJ0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1mdW5jdGlvbihlKXt2YXIgbixpLHIsbz10LnRhc2tDaGlsZHJlbihlKSxhPW9bMF0uc3RhcnQuZ2V0VGltZSgpO2ZvcihpPTEscj1vLmxlbmd0aDtyPmk7aSsrKW49b1tpXS5zdGFydC5nZXRUaW1lKCksYT5uJiYoYT1uKTtyZXR1cm4gbmV3IERhdGUoYSl9O3RoaXMuX3VwZGF0ZVN1bW1hcnlSZWN1cnNpdmUoZSxcInN0YXJ0XCIsbil9LF9yZXNvbHZlU3VtbWFyeUVuZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZnVuY3Rpb24oZSl7dmFyIG4saSxyLG89dC50YXNrQ2hpbGRyZW4oZSksYT1vWzBdLmVuZC5nZXRUaW1lKCk7Zm9yKGk9MSxyPW8ubGVuZ3RoO3I+aTtpKyspbj1vW2ldLmVuZC5nZXRUaW1lKCksbj5hJiYoYT1uKTtyZXR1cm4gbmV3IERhdGUoYSl9O3RoaXMuX3VwZGF0ZVN1bW1hcnlSZWN1cnNpdmUoZSxcImVuZFwiLG4pfSxfcmVzb2x2ZVN1bW1hcnlQZXJjZW50Q29tcGxldGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWZ1bmN0aW9uKGUpe3ZhciBuPXQudGFza0NoaWxkcmVuKGUpLGk9bmV3IGIobikuYWdncmVnYXRlKFt7ZmllbGQ6XCJwZXJjZW50Q29tcGxldGVcIixhZ2dyZWdhdGU6XCJhdmVyYWdlXCJ9XSk7cmV0dXJuIGkucGVyY2VudENvbXBsZXRlLmF2ZXJhZ2V9O3RoaXMuX3VwZGF0ZVN1bW1hcnlSZWN1cnNpdmUoZSxcInBlcmNlbnRDb21wbGV0ZVwiLG4pfSxfdXBkYXRlU3VtbWFyeVJlY3Vyc2l2ZTpmdW5jdGlvbihlLHQsbil7dmFyIGkscjtlJiYoaT1uKGUpLGUuc2V0KHQsaSkscj10aGlzLnRhc2tQYXJlbnQoZSksciYmdGhpcy5fdXBkYXRlU3VtbWFyeVJlY3Vyc2l2ZShyLHQsbikpfSxfY2hpbGRSZW1vdmVkOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPW51bGw9PT1lP251bGw6dGhpcy5nZXQoZSksbz10aGlzLnRhc2tDaGlsZHJlbihyKTtmb3Iobj10LGk9by5sZW5ndGg7aT5uO24rKylvW25dLnNldChcIm9yZGVySWRcIixuKTt0aGlzLl9yZXNvbHZlU3VtbWFyeUZpZWxkcyhyKX0sX3Jlb3JkZXJTaWJsaW5nczpmdW5jdGlvbihlLHQpe3ZhciBuLGk9ZS5nZXQoXCJvcmRlcklkXCIpLHI9aT50LG89cj90OmksYT1yP2k6dCxzPXI/bzpvKzEsbD10aGlzLnRhc2tTaWJsaW5ncyhlKTtmb3IoYT1NYXRoLm1pbihhLGwubGVuZ3RoLTEpLG49bzthPj1uO24rKylsW25dIT09ZSYmKGxbbl0uc2V0KFwib3JkZXJJZFwiLHMpLHMrPTEpfSxfdXBkYXRlU3VtbWFyeTpmdW5jdGlvbihlKXtpZihudWxsIT09ZSl7dmFyIHQ9dGhpcy50YXNrQ2hpbGRyZW4oZSkubGVuZ3RoO2Uuc2V0KFwic3VtbWFyeVwiLHQ+MCl9fSxfdG9HYW50dFRhc2s6ZnVuY3Rpb24oZSl7aWYoIShlIGluc3RhbmNlb2Ygcykpe3ZhciB0PWU7ZT10aGlzLl9jcmVhdGVOZXdNb2RlbCgpLGUuYWNjZXB0KHQpfXJldHVybiBlfX0pLGwuY3JlYXRlPVoobCxcIkdhbnR0RGF0YVNvdXJjZVwiKSxUKCEwLGYuZGF0YSx7R2FudHREYXRhU291cmNlOmwsR2FudHRUYXNrOnMsR2FudHREZXBlbmRlbmN5RGF0YVNvdXJjZTp0dCxHYW50dERlcGVuZGVuY3k6ZXR9KSxjPXtkZXNrdG9wOntkYXRlUmFuZ2U6WSxyZXNvdXJjZXM6S319LGQ9Zi5PYnNlcnZhYmxlLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe2YuT2JzZXJ2YWJsZS5mbi5pbml0LmNhbGwodGhpcyksdGhpcy5lbGVtZW50PWUsdGhpcy5vcHRpb25zPVQoITAse30sdGhpcy5vcHRpb25zLHQpLHRoaXMuY3JlYXRlQnV0dG9uPXRoaXMub3B0aW9ucy5jcmVhdGVCdXR0b259LGZpZWxkczpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT10aGlzLm9wdGlvbnMubWVzc2FnZXMuZWRpdG9yLHI9dGhpcy5vcHRpb25zLnJlc291cmNlcyxvPWZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxyLmVkaXRvcihuLmNvbnRhaW5lci5maW5kKE4rcC5zdHlsZXMucG9wdXAucmVzb3VyY2VzRmllbGQpLHQpfSxhPVt7ZmllbGQ6XCJ0aXRsZVwiLHRpdGxlOmkudGl0bGV9LHtmaWVsZDpcInN0YXJ0XCIsdGl0bGU6aS5zdGFydCxlZGl0b3I6ZS5kYXRlUmFuZ2V9LHtmaWVsZDpcImVuZFwiLHRpdGxlOmkuZW5kLGVkaXRvcjplLmRhdGVSYW5nZX0se2ZpZWxkOlwicGVyY2VudENvbXBsZXRlXCIsdGl0bGU6aS5wZXJjZW50Q29tcGxldGUsZm9ybWF0OlB9XTtyZXR1cm4gdC5nZXQoci5maWVsZCkmJmEucHVzaCh7ZmllbGQ6ci5maWVsZCx0aXRsZTppLnJlc291cmNlcyxtZXNzYWdlczppLGVkaXRvcjplLnJlc291cmNlcyxjbGljazpvLHN0eWxlczpwLnN0eWxlcy5wb3B1cH0pLGF9LF9idWlsZEVkaXRUZW1wbGF0ZTpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGEscz10aGlzLm9wdGlvbnMucmVzb3VyY2VzLGw9dGhpcy5vcHRpb25zLmVkaXRhYmxlLnRlbXBsYXRlLGM9VCh7fSxmLlRlbXBsYXRlLHRoaXMub3B0aW9ucy50ZW1wbGF0ZVNldHRpbmdzKSxkPWMucGFyYW1OYW1lLHU9cC5zdHlsZXMucG9wdXAsaD1cIlwiO2lmKGwpdHlwZW9mIGw9PT1SJiYobD13aW5kb3cudW5lc2NhcGUobCkpLGgrPWYudGVtcGxhdGUobCxjKShlKTtlbHNlIGZvcihpPTAscj10Lmxlbmd0aDtyPmk7aSsrKW89dFtpXSxoKz0nPGRpdiBjbGFzcz1cIicrdS5lZGl0TGFiZWwrJ1wiPjxsYWJlbCBmb3I9XCInK28uZmllbGQrJ1wiPicrKG8udGl0bGV8fG8uZmllbGR8fFwiXCIpK1wiPC9sYWJlbD48L2Rpdj5cIixvLmZpZWxkPT09cy5maWVsZCYmKGgrPSc8ZGl2IGNsYXNzPVwiJyt1LnJlc291cmNlc0ZpZWxkKydcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPjwvZGl2PicpLCFlLmVkaXRhYmxlfHxlLmVkaXRhYmxlKG8uZmllbGQpPyhuLnB1c2gobyksaCs9XCI8ZGl2IFwiK2YuYXR0cihcImNvbnRhaW5lci1mb3JcIikrJz1cIicrby5maWVsZCsnXCIgY2xhc3M9XCInK3UuZWRpdEZpZWxkKydcIj48L2Rpdj4nKTooYT1cIiM6XCIsby5maWVsZD8obz1mLmV4cHIoby5maWVsZCxkKSxhKz1vK1wiPT1udWxsPycnOlwiK28pOmErPVwiJydcIixhKz1cIiNcIixhPWYudGVtcGxhdGUoYSxjKSxoKz0nPGRpdiBjbGFzcz1cIicrdS5lZGl0RmllbGQrJ1wiPicrYShlKStcIjwvZGl2PlwiKTtyZXR1cm4gaH19KSx1PWQuZXh0ZW5kKHtkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5jbG9zZSgpLHRoaXMudW5iaW5kKCl9LGVkaXRUYXNrOmZ1bmN0aW9uKGUpe3RoaXMuZWRpdGFibGU9dGhpcy5fY3JlYXRlUG9wdXBFZGl0b3IoZSl9LGNsb3NlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWZ1bmN0aW9uKCl7ZS5lZGl0YWJsZSYmKGUuZWRpdGFibGUuZGVzdHJveSgpLGUuZWRpdGFibGU9bnVsbCxlLmNvbnRhaW5lcj1udWxsKSxlLnBvcHVwJiYoZS5wb3B1cC5kZXN0cm95KCksZS5wb3B1cD1udWxsKX07dGhpcy5lZGl0YWJsZSYmdGhpcy5jb250YWluZXIuaXMoXCI6dmlzaWJsZVwiKT90aGlzLmNvbnRhaW5lci5kYXRhKFwia2VuZG9XaW5kb3dcIikuYmluZChcImRlYWN0aXZhdGVcIix0KS5jbG9zZSgpOnQoKX0sc2hvd0RpYWxvZzpmdW5jdGlvbih0KXt2YXIgbixpLHIsbyxhPXQuYnV0dG9ucyxzPXAuc3R5bGVzLnBvcHVwLGw9Zi5mb3JtYXQoJzxkaXYgY2xhc3M9XCJ7MH1cIj48ZGl2IGNsYXNzPVwiezF9XCI+PHAgY2xhc3M9XCJ7Mn1cIj57M308L3A+PGRpdiBjbGFzcz1cIns0fVwiPicscy5mb3JtLHMuZm9ybUNvbnRhaW5lcixzLm1lc3NhZ2UsdC50ZXh0LHMuYnV0dG9uc0NvbnRhaW5lcik7Zm9yKG49MCxpPWEubGVuZ3RoO2k+bjtuKyspbCs9dGhpcy5jcmVhdGVCdXR0b24oYVtuXSk7bCs9XCI8L2Rpdj48L2Rpdj48L2Rpdj5cIixyPXRoaXMuZWxlbWVudCx0aGlzLnBvcHVwJiZ0aGlzLnBvcHVwLmRlc3Ryb3koKSxvPXRoaXMucG9wdXA9ZShsKS5hcHBlbmRUbyhyKS5lcSgwKS5vbihcImNsaWNrXCIsTitzLmJ1dHRvbixmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksby5jbG9zZSgpO3ZhciBuPWUodC5jdXJyZW50VGFyZ2V0KS5pbmRleCgpO2Fbbl0uY2xpY2soKX0pLmtlbmRvV2luZG93KHttb2RhbDohMCxyZXNpemFibGU6ITEsZHJhZ2dhYmxlOiExLHRpdGxlOnQudGl0bGUsdmlzaWJsZTohMSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuZGVzdHJveSgpLHIuZm9jdXMoKX19KS5nZXRLZW5kb1dpbmRvdygpLG8uY2VudGVyKCkub3BlbigpfSxfY3JlYXRlUG9wdXBFZGl0b3I6ZnVuY3Rpb24odCl7dmFyIG4saSxyPXRoaXMsbz17fSxhPXRoaXMub3B0aW9ucy5tZXNzYWdlcyxzPXAuc3R5bGVzLGw9cy5wb3B1cCxkPWYuZm9ybWF0KCc8ZGl2IHswfT1cInsxfVwiIGNsYXNzPVwiezJ9IHszfVwiPjxkaXYgY2xhc3M9XCJ7NH1cIj4nLGYuYXR0cihcInVpZFwiKSx0LnVpZCxsLmZvcm0sbC5lZGl0Rm9ybSxsLmZvcm1Db250YWluZXIpLHU9dGhpcy5maWVsZHMoYy5kZXNrdG9wLHQpLGg9W107cmV0dXJuIGQrPXRoaXMuX2J1aWxkRWRpdFRlbXBsYXRlKHQsdSxoKSxkKz0nPGRpdiBjbGFzcz1cIicrbC5idXR0b25zQ29udGFpbmVyKydcIj4nLGQrPXRoaXMuY3JlYXRlQnV0dG9uKHtuYW1lOlwidXBkYXRlXCIsdGV4dDphLnNhdmUsY2xhc3NOYW1lOnAuc3R5bGVzLnByaW1hcnl9KSxkKz10aGlzLmNyZWF0ZUJ1dHRvbih7bmFtZTpcImNhbmNlbFwiLHRleHQ6YS5jYW5jZWx9KSxkKz10aGlzLmNyZWF0ZUJ1dHRvbih7bmFtZTpcImRlbGV0ZVwiLHRleHQ6YS5kZXN0cm95fSksZCs9XCI8L2Rpdj48L2Rpdj48L2Rpdj5cIixuPXRoaXMuY29udGFpbmVyPWUoZCkuYXBwZW5kVG8odGhpcy5lbGVtZW50KS5lcSgwKS5rZW5kb1dpbmRvdyhUKHttb2RhbDohMCxyZXNpemFibGU6ITEsZHJhZ2dhYmxlOiEwLHRpdGxlOmEuZWRpdG9yLmVkaXRvclRpdGxlLHZpc2libGU6ITEsY2xvc2U6ZnVuY3Rpb24oZSl7ZS51c2VyVHJpZ2dlcmVkJiZyLnRyaWdnZXIoXCJjYW5jZWxcIix7Y29udGFpbmVyOm4sbW9kZWw6dH0pJiZlLnByZXZlbnREZWZhdWx0KCl9fSxvKSksaT1uLmtlbmRvRWRpdGFibGUoe2ZpZWxkczpoLG1vZGVsOnQsY2xlYXJDb250YWluZXI6ITEsdmFsaWRhdGVPbkJsdXI6ITAsdGFyZ2V0OnIub3B0aW9ucy50YXJnZXR9KS5kYXRhKFwia2VuZG9FZGl0YWJsZVwiKSx0aGlzLnRyaWdnZXIoXCJlZGl0XCIse2NvbnRhaW5lcjpuLG1vZGVsOnR9KT9yLnRyaWdnZXIoXCJjYW5jZWxcIix7Y29udGFpbmVyOm4sbW9kZWw6dH0pOihuLmRhdGEoXCJrZW5kb1dpbmRvd1wiKS5jZW50ZXIoKS5vcGVuKCksbi5vbih6K00sTitzLmJ1dHRvbkNhbmNlbCxmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSxyLnRyaWdnZXIoXCJjYW5jZWxcIix7Y29udGFpbmVyOm4sbW9kZWw6dH0pfSksbi5vbih6K00sTitzLmJ1dHRvblNhdmUsZnVuY3Rpb24oZSl7dmFyIGksbyxhLHMsbDtmb3IoZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksaT1yLmZpZWxkcyhjLmRlc2t0b3AsdCksbz17fSxzPTAsbD1pLmxlbmd0aDtsPnM7cysrKWE9aVtzXS5maWVsZCxvW2FdPXQuZ2V0KGEpO3IudHJpZ2dlcihcInNhdmVcIix7Y29udGFpbmVyOm4sbW9kZWw6dCx1cGRhdGVJbmZvOm99KX0pLG4ub24oeitNLE4rcy5idXR0b25EZWxldGUsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksci50cmlnZ2VyKFwicmVtb3ZlXCIse2NvbnRhaW5lcjpuLG1vZGVsOnR9KX0pKSxpfX0pLGg9di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2LmZuLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy53cmFwcGVyPXRoaXMuZWxlbWVudCx0aGlzLm1vZGVsPXRoaXMub3B0aW9ucy5tb2RlbCx0aGlzLnJlc291cmNlc0ZpZWxkPXRoaXMub3B0aW9ucy5yZXNvdXJjZXNGaWVsZCx0aGlzLmNyZWF0ZUJ1dHRvbj10aGlzLm9wdGlvbnMuY3JlYXRlQnV0dG9uLHRoaXMuX2luaXRDb250YWluZXIoKSx0aGlzLl9hdHRhY2hIYW5kbGVycygpfSxldmVudHM6W1wic2F2ZVwiXSxvcGVuOmZ1bmN0aW9uKCl7dGhpcy53aW5kb3cuY2VudGVyKCkub3BlbigpLHRoaXMuZ3JpZC5yZXNpemUoITApfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMud2luZG93LmJpbmQoXCJkZWFjdGl2YXRlXCIsUyh0aGlzLmRlc3Ryb3ksdGhpcykpLmNsb3NlKClcbn0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX2RldHRhY2hIYW5kbGVycygpLHRoaXMuZ3JpZC5kZXN0cm95KCksdGhpcy5ncmlkPW51bGwsdGhpcy53aW5kb3cuZGVzdHJveSgpLHRoaXMud2luZG93PW51bGwsdi5mbi5kZXN0cm95LmNhbGwodGhpcyksZi5kZXN0cm95KHRoaXMud3JhcHBlciksdGhpcy5lbGVtZW50PXRoaXMud3JhcHBlcj1udWxsfSxfYXR0YWNoSGFuZGxlcnM6ZnVuY3Rpb24oKXt2YXIgdD1wLnN0eWxlcyxuPXRoaXMuZ3JpZCxpPXRoaXMuX2NhbmNlbFByb3h5PVModGhpcy5fY2FuY2VsLHRoaXMpO3RoaXMuY29udGFpbmVyLm9uKHorTSxOK3QuYnV0dG9uQ2FuY2VsLHRoaXMuX2NhbmNlbFByb3h5KSx0aGlzLl9zYXZlUHJveHk9Uyh0aGlzLl9zYXZlLHRoaXMpLHRoaXMuY29udGFpbmVyLm9uKHorTSxOK3QuYnV0dG9uU2F2ZSx0aGlzLl9zYXZlUHJveHkpLHRoaXMud2luZG93LmJpbmQoXCJjbG9zZVwiLGZ1bmN0aW9uKGUpe2UudXNlclRyaWdnZXJlZCYmaShlKX0pLG4ud3JhcHBlci5vbih6K00sXCJpbnB1dFt0eXBlPSdjaGVja2JveCddXCIsZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLGk9ZSh0KS5jbG9zZXN0KFwidHJcIikscj1uLmRhdGFTb3VyY2UuZ2V0QnlVaWQoaS5hdHRyKGYuYXR0cihcInVpZFwiKSkpLG89ZSh0KS5pcyhcIjpjaGVja2VkXCIpPzE6XCJcIjtyLnNldChcInZhbHVlXCIsbyl9KX0sX2RldHRhY2hIYW5kbGVyczpmdW5jdGlvbigpe3RoaXMuX2NhbmNlbFByb3h5PW51bGwsdGhpcy5fc2F2ZVByb3h5PW51bGwsdGhpcy5jb250YWluZXIub2ZmKE0pLHRoaXMuZ3JpZC53cmFwcGVyLm9mZigpfSxfY2FuY2VsOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0aGlzLmNsb3NlKCl9LF9zYXZlOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0aGlzLl91cGRhdGVNb2RlbCgpLHRoaXMud3JhcHBlci5pcyhOK3Auc3R5bGVzLnBvcHVwLnJlc291cmNlc0ZpZWxkKXx8dGhpcy50cmlnZ2VyKFwic2F2ZVwiLHtjb250YWluZXI6dGhpcy53cmFwcGVyLG1vZGVsOnRoaXMubW9kZWx9KSx0aGlzLmNsb3NlKCl9LF9pbml0Q29udGFpbmVyOmZ1bmN0aW9uKCl7dmFyIHQ9cC5zdHlsZXMucG9wdXAsbj1mLmZvcm1hdCgnPGRpdiBjbGFzcz1cInswfSB7MX1cIj48ZGl2IGNsYXNzPVwiezJ9IHszfVwiLz48L2Rpdj5cIicsdC5mb3JtLHQuZWRpdEZvcm0sdC5mb3JtQ29udGFpbmVyLHQucmVzb3VyY2VzRm9ybUNvbnRhaW5lcik7bj1lKG4pLHRoaXMuY29udGFpbmVyPW4uZmluZChOK3QucmVzb3VyY2VzRm9ybUNvbnRhaW5lciksdGhpcy53aW5kb3c9bi5rZW5kb1dpbmRvdyh7bW9kYWw6ITAscmVzaXphYmxlOiExLGRyYWdnYWJsZTohMCx2aXNpYmxlOiExLHRpdGxlOnRoaXMub3B0aW9ucy5tZXNzYWdlcy5yZXNvdXJjZXNFZGl0b3JUaXRsZX0pLmRhdGEoXCJrZW5kb1dpbmRvd1wiKSx0aGlzLl9yZXNvdXJjZUdyaWQoKSx0aGlzLl9jcmVhdGVCdXR0b25zKCl9LF9yZXNvdXJjZUdyaWQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dGhpcy5vcHRpb25zLm1lc3NhZ2VzLGk9ZSgnPGRpdiBpZD1cInJlc291cmNlcy1ncmlkXCIvPicpLmFwcGVuZFRvKHRoaXMuY29udGFpbmVyKTt0aGlzLmdyaWQ9bmV3IGYudWkuR3JpZChpLHtjb2x1bW5zOlt7ZmllbGQ6XCJuYW1lXCIsdGl0bGU6bi5yZXNvdXJjZXNIZWFkZXIsdGVtcGxhdGU6XCI8bGFiZWw+PGlucHV0IHR5cGU9J2NoZWNrYm94JyB2YWx1ZT0nIz1uYW1lIycjIGlmICh2YWx1ZSA+IDAgJiYgdmFsdWUgIT09IG51bGwpIHsjY2hlY2tlZD0nY2hlY2tlZCcjIH0gIy8+Iz1uYW1lIzwvbGFiZT5cIn0se2ZpZWxkOlwidmFsdWVcIix0aXRsZTpuLnVuaXRzSGVhZGVyLHRlbXBsYXRlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZm9ybWF0LG49bnVsbCE9PWUudmFsdWU/ZS52YWx1ZTpcIlwiO3JldHVybiB0P2YudG9TdHJpbmcobix0KTpufX1dLGhlaWdodDoyODAsc29ydGFibGU6ITAsZWRpdGFibGU6ITAsZmlsdGVyYWJsZTohMCxkYXRhU291cmNlOntkYXRhOnQub3B0aW9ucy5kYXRhLHNjaGVtYTp7bW9kZWw6e2lkOlwiaWRcIixmaWVsZHM6e2lkOntmcm9tOlwiaWRcIix0eXBlOlwibnVtYmVyXCJ9LG5hbWU6e2Zyb206XCJuYW1lXCIsdHlwZTpcInN0cmluZ1wiLGVkaXRhYmxlOiExfSx2YWx1ZTp7ZnJvbTpcInZhbHVlXCIsdHlwZTpcIm51bWJlclwiLGRlZmF1bHRWYWx1ZTpcIlwifSxmb3JtYXQ6e2Zyb206XCJmb3JtYXRcIix0eXBlOlwic3RyaW5nXCJ9fX19fSxzYXZlOmZ1bmN0aW9uKGUpe3ZhciB0PSEhZS52YWx1ZXMudmFsdWU7ZS5jb250YWluZXIucGFyZW50KCkuZmluZChcImlucHV0W3R5cGU9J2NoZWNrYm94J11cIikucHJvcChcImNoZWNrZWRcIix0KX19KX0sX2NyZWF0ZUJ1dHRvbnM6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy5vcHRpb25zLmJ1dHRvbnMsaT0nPGRpdiBjbGFzcz1cIicrcC5zdHlsZXMucG9wdXAuYnV0dG9uc0NvbnRhaW5lcisnXCI+Jztmb3IoZT0wLHQ9bi5sZW5ndGg7dD5lO2UrKylpKz10aGlzLmNyZWF0ZUJ1dHRvbihuW2VdKTtpKz1cIjwvZGl2PlwiLHRoaXMuY29udGFpbmVyLmFwcGVuZChpKX0sX3VwZGF0ZU1vZGVsOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGk9W10scj10aGlzLmdyaWQuZGF0YVNvdXJjZS5kYXRhKCk7Zm9yKHQ9MCxuPXIubGVuZ3RoO24+dDt0KyspZT1yW3RdLmdldChcInZhbHVlXCIpLG51bGwhPT1lJiZlPjAmJmkucHVzaChyW3RdKTt0aGlzLm1vZGVsW3RoaXMucmVzb3VyY2VzRmllbGRdPWl9fSkscD12LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe2sodCkmJih0PXtkYXRhU291cmNlOnR9KSx2LmZuLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy5fd3JhcHBlcigpLHRoaXMuX3Jlc291cmNlcygpLHRoaXMuX3RpbWVsaW5lKCksdGhpcy5fdG9vbGJhcigpLHRoaXMuX2Zvb3RlcigpLHRoaXMuX2FkanVzdERpbWVuc2lvbnMoKSx0aGlzLl9wcmV2ZW50UmVmcmVzaD0hMCx0aGlzLnZpZXcodGhpcy50aW1lbGluZS5fc2VsZWN0ZWRWaWV3TmFtZSksdGhpcy5fcHJldmVudFJlZnJlc2g9ITEsdGhpcy5fZGF0YVNvdXJjZSgpLHRoaXMuX2Fzc2lnbm1lbnRzKCksdGhpcy5fZHJvcERvd25zKCksdGhpcy5fbGlzdCgpLHRoaXMuX2RlcGVuZGVuY2llcygpLHRoaXMuX3Jlc2l6YWJsZSgpLHRoaXMuX3Njcm9sbGFibGUoKSx0aGlzLl9kYXRhQmluZCgpLHRoaXMuX2F0dGFjaEV2ZW50cygpLHRoaXMuX2NyZWF0ZUVkaXRvcigpLGYubm90aWZ5KHRoaXMpfSxldmVudHM6W1wiZGF0YUJpbmRpbmdcIixcImRhdGFCb3VuZFwiLFwiYWRkXCIsXCJlZGl0XCIsXCJyZW1vdmVcIixcImNhbmNlbFwiLFwic2F2ZVwiLFwiY2hhbmdlXCIsXCJuYXZpZ2F0ZVwiLFwibW92ZVN0YXJ0XCIsXCJtb3ZlXCIsXCJtb3ZlRW5kXCIsXCJyZXNpemVTdGFydFwiLFwicmVzaXplXCIsXCJyZXNpemVFbmRcIl0sb3B0aW9uczp7bmFtZTpcIkdhbnR0XCIsYXV0b0JpbmQ6ITAsbmF2aWdhdGFibGU6ITEsc2VsZWN0YWJsZTohMCxlZGl0YWJsZTohMCxjb2x1bW5zOltdLHZpZXdzOltdLGRhdGFTb3VyY2U6e30sZGVwZW5kZW5jaWVzOnt9LHJlc291cmNlczp7fSxhc3NpZ25tZW50czp7fSxtZXNzYWdlczp7c2F2ZTpcIlNhdmVcIixjYW5jZWw6XCJDYW5jZWxcIixkZXN0cm95OlwiRGVsZXRlXCIsZGVsZXRlVGFza1dpbmRvd1RpdGxlOlwiRGVsZXRlIHRhc2tcIixkZWxldGVEZXBlbmRlbmN5V2luZG93VGl0bGU6XCJEZWxldGUgZGVwZW5kZW5jeVwiLHZpZXdzOntkYXk6XCJEYXlcIix3ZWVrOlwiV2Vla1wiLG1vbnRoOlwiTW9udGhcIix5ZWFyOlwiWWVhclwifSxhY3Rpb25zOnthcHBlbmQ6XCJBZGQgVGFza1wiLGFkZENoaWxkOlwiQWRkIENoaWxkXCIsaW5zZXJ0QmVmb3JlOlwiQWRkIEFib3ZlXCIsaW5zZXJ0QWZ0ZXI6XCJBZGQgQmVsb3dcIixwZGY6XCJFeHBvcnQgdG8gUERGXCJ9LGVkaXRvcjp7ZWRpdG9yVGl0bGU6XCJUYXNrXCIscmVzb3VyY2VzRWRpdG9yVGl0bGU6XCJSZXNvdXJjZXNcIix0aXRsZTpcIlRpdGxlXCIsc3RhcnQ6XCJTdGFydFwiLGVuZDpcIkVuZFwiLHBlcmNlbnRDb21wbGV0ZTpcIkNvbXBsZXRlXCIscmVzb3VyY2VzOlwiUmVzb3VyY2VzXCIsYXNzaW5nQnV0dG9uOlwiQXNzaWduXCIscmVzb3VyY2VzSGVhZGVyOlwiUmVzb3VyY2VzXCIsdW5pdHNIZWFkZXI6XCJVbml0c1wifX0sc2hvd1dvcmtIb3VyczohMCxzaG93V29ya0RheXM6ITAsd29ya0RheVN0YXJ0Om5ldyBEYXRlKDE5ODAsMSwxLDgsMCwwKSx3b3JrRGF5RW5kOm5ldyBEYXRlKDE5ODAsMSwxLDE3LDAsMCksd29ya1dlZWtTdGFydDoxLHdvcmtXZWVrRW5kOjUsaG91clNwYW46MSxzbmFwOiEwLGhlaWdodDo2MDAsbGlzdFdpZHRoOlwiMzAlXCJ9LHNlbGVjdDpmdW5jdGlvbihlKXt2YXIgbj10aGlzLmxpc3Q7cmV0dXJuIGU/KG4uc2VsZWN0KGUpLHQpOm4uc2VsZWN0KCl9LGNsZWFyU2VsZWN0aW9uOmZ1bmN0aW9uKCl7dGhpcy5saXN0LmNsZWFyU2VsZWN0aW9uKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2LmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLmRhdGFTb3VyY2UmJih0aGlzLmRhdGFTb3VyY2UudW5iaW5kKFwiY2hhbmdlXCIsdGhpcy5fcmVmcmVzaEhhbmRsZXIpLHRoaXMuZGF0YVNvdXJjZS51bmJpbmQoXCJwcm9ncmVzc1wiLHRoaXMuX3Byb2dyZXNzSGFuZGxlciksdGhpcy5kYXRhU291cmNlLnVuYmluZChcImVycm9yXCIsdGhpcy5fZXJyb3JIYW5kbGVyKSksdGhpcy5kZXBlbmRlbmNpZXMmJih0aGlzLmRlcGVuZGVuY2llcy51bmJpbmQoXCJjaGFuZ2VcIix0aGlzLl9kZXBlbmRlbmN5UmVmcmVzaEhhbmRsZXIpLHRoaXMuZGVwZW5kZW5jaWVzLnVuYmluZChcImVycm9yXCIsdGhpcy5fZGVwZW5kZW5jeUVycm9ySGFuZGxlcikpLHRoaXMudGltZWxpbmUmJih0aGlzLnRpbWVsaW5lLnVuYmluZCgpLHRoaXMudGltZWxpbmUuZGVzdHJveSgpKSx0aGlzLmxpc3QmJih0aGlzLmxpc3QudW5iaW5kKCksdGhpcy5saXN0LmRlc3Ryb3koKSksdGhpcy5mb290ZXJEcm9wRG93biYmdGhpcy5mb290ZXJEcm9wRG93bi5kZXN0cm95KCksdGhpcy5oZWFkZXJEcm9wRG93biYmdGhpcy5oZWFkZXJEcm9wRG93bi5kZXN0cm95KCksdGhpcy5fZWRpdG9yJiZ0aGlzLl9lZGl0b3IuZGVzdHJveSgpLHRoaXMuX3Jlc2l6ZURyYWdnYWJsZSYmdGhpcy5fcmVzaXplRHJhZ2dhYmxlLmRlc3Ryb3koKSx0aGlzLnRvb2xiYXIub2ZmKE0pLGUod2luZG93KS5vZmYoXCJyZXNpemVcIitNLHRoaXMuX3Jlc2l6ZUhhbmRsZXIpLGUodGhpcy53cmFwcGVyKS5vZmYoTSksdGhpcy50b29sYmFyPW51bGwsdGhpcy5mb290ZXI9bnVsbH0sX2F0dGFjaEV2ZW50czpmdW5jdGlvbigpe3RoaXMuX3Jlc2l6ZUhhbmRsZXI9Uyh0aGlzLnJlc2l6ZSx0aGlzKSxlKHdpbmRvdykub24oXCJyZXNpemVcIitNLHRoaXMuX3Jlc2l6ZUhhbmRsZXIpfSxfd3JhcHBlcjpmdW5jdGlvbigpe3ZhciBlPXAuc3R5bGVzLHQ9W2UuaWNvbixlLnJlc2l6ZUhhbmRsZV0uam9pbihcIiBcIiksbj10aGlzLm9wdGlvbnMsaT1uLmhlaWdodCxyPW4ud2lkdGg7dGhpcy53cmFwcGVyPXRoaXMuZWxlbWVudC5hZGRDbGFzcyhlLndyYXBwZXIpLmFwcGVuZChcIjxkaXYgY2xhc3M9J1wiK2UubGlzdFdyYXBwZXIrXCInPjxkaXY+PC9kaXY+PC9kaXY+XCIpLmFwcGVuZChcIjxkaXYgY2xhc3M9J1wiK2Uuc3BsaXRCYXJXcmFwcGVyK1wiJz48ZGl2IGNsYXNzPSdcIit0K1wiJz48L2Rpdj48L2Rpdj5cIikuYXBwZW5kKFwiPGRpdiBjbGFzcz0nXCIrZS50aW1lbGluZVdyYXBwZXIrXCInPjxkaXY+PC9kaXY+PC9kaXY+XCIpLHRoaXMud3JhcHBlci5maW5kKE4rZS5saXN0KS53aWR0aChuLmxpc3RXaWR0aCksaSYmdGhpcy53cmFwcGVyLmhlaWdodChpKSxyJiZ0aGlzLndyYXBwZXIud2lkdGgocil9LF90b29sYmFyOmZ1bmN0aW9uKCl7dmFyIHQsbixpPXRoaXMscj1wLnN0eWxlcyxvPU4rci50b29sYmFyLnZpZXdzK1wiID4gbGlcIixhPU4rci50b29sYmFyLnBkZkJ1dHRvbixzPXIuaG92ZXJlZCxsPXRoaXMub3B0aW9ucy50b29sYmFyLGM9ZShcIjxkaXYgY2xhc3M9J1wiK3IudG9vbGJhci5hY3Rpb25zK1wiJz5cIik7QyhsKXx8KGw9dHlwZW9mIGw9PT1SP2w6dGhpcy5fYWN0aW9ucyhsKSxsPVMoZi50ZW1wbGF0ZShsKSx0aGlzKSksbj1lKEcoe25zOmYubnMsdmlld3M6dGhpcy50aW1lbGluZS52aWV3cyxzdHlsZXM6ci50b29sYmFyfSkpLGMuYXBwZW5kKGwoe30pKSx0PWUoXCI8ZGl2IGNsYXNzPSdcIityLnRvb2xiYXIuaGVhZGVyV3JhcHBlcitcIic+XCIpLmFwcGVuZChjKS5hcHBlbmQobiksdGhpcy53cmFwcGVyLnByZXBlbmQodCksdGhpcy50b29sYmFyPXQsdC5vbih6K00sbyxmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCk7dmFyIG49ZSh0aGlzKS5hdHRyKGYuYXR0cihcIm5hbWVcIikpO2kudHJpZ2dlcihcIm5hdmlnYXRlXCIse3ZpZXc6bn0pfHxpLnZpZXcobil9KS5vbih6K00sYSxmdW5jdGlvbigpe2kuc2F2ZUFzUERGKCl9KSx0aGlzLndyYXBwZXIuZmluZChOK3IudG9vbGJhci50b29sYmFyK1wiIGxpXCIpLmhvdmVyKGZ1bmN0aW9uKCl7ZSh0aGlzKS5hZGRDbGFzcyhzKX0sZnVuY3Rpb24oKXtlKHRoaXMpLnJlbW92ZUNsYXNzKHMpfSl9LF9hY3Rpb25zOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMub3B0aW9ucyxpPW4udG9vbGJhcixyPVwiXCI7aWYoIWsoaSkpe2lmKCFuLmVkaXRhYmxlKXJldHVybiByO2k9W1wiYXBwZW5kXCJdfWZvcihlPTAsdD1pLmxlbmd0aDt0PmU7ZSsrKXIrPXRoaXMuX2NyZWF0ZUJ1dHRvbihpW2VdKTtyZXR1cm4gcn0sX2Zvb3RlcjpmdW5jdGlvbigpe2lmKHRoaXMub3B0aW9ucy5lZGl0YWJsZSl7dmFyIHQ9ZSgkKHtzdHlsZXM6cC5zdHlsZXMudG9vbGJhcixhY3Rpb246e2RhdGE6XCJhZGRcIix0aXRsZTp0aGlzLm9wdGlvbnMubWVzc2FnZXMuYWN0aW9ucy5hcHBlbmR9fSkpO3RoaXMud3JhcHBlci5hcHBlbmQodCksdGhpcy5mb290ZXI9dH19LF9jcmVhdGVCdXR0b246ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50ZW1wbGF0ZXx8VyxuPXRoaXMub3B0aW9ucy5tZXNzYWdlcy5hY3Rpb25zLGk9dHlwZW9mIGU9PT1SP2U6ZS5uYW1lfHxlLnRleHQscj1YW2ldP1hbaV0uY2xhc3NOYW1lOlwiay1nYW50dC1cIisoaXx8XCJcIikucmVwbGFjZSgvXFxzL2csXCJcIiksbz17aWNvbkNsYXNzOlwiXCIsYWN0aW9uOlwiXCIsdGV4dDppLGNsYXNzTmFtZTpyLHN0eWxlczpwLnN0eWxlcy50b29sYmFyfTtpZighKGl8fEQoZSkmJmUudGVtcGxhdGUpKXRocm93IEVycm9yKFwiQ3VzdG9tIGNvbW1hbmRzIHNob3VsZCBoYXZlIG5hbWUgc3BlY2lmaWVkXCIpO3JldHVybiBvPVQoITAsbyxYW2ldLHt0ZXh0Om5baV19KSxEKGUpJiYoZS5jbGFzc05hbWUmJngoby5jbGFzc05hbWUsZS5jbGFzc05hbWUuc3BsaXQoXCIgXCIpKTwwJiYoZS5jbGFzc05hbWUrPVwiIFwiK28uY2xhc3NOYW1lKSxvPVQoITAsbyxlKSksZi50ZW1wbGF0ZSh0KShvKX0sX2FkanVzdERpbWVuc2lvbnM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnQsdD1wLnN0eWxlcyxuPU4rdC5saXN0LGk9Tit0LnRpbWVsaW5lLHI9Tit0LnNwbGl0QmFyLG89dGhpcy50b29sYmFyLm91dGVySGVpZ2h0KCksYT10aGlzLmZvb3Rlcj90aGlzLmZvb3Rlci5vdXRlckhlaWdodCgpOjAscz1lLmhlaWdodCgpLGw9ZS53aWR0aCgpLGM9ZS5maW5kKHIpLm91dGVyV2lkdGgoKSxkPWUuZmluZChuKS5vdXRlcldpZHRoKCk7ZS5jaGlsZHJlbihbbixpLHJdLmpvaW4oXCIsXCIpKS5oZWlnaHQocy0obythKSkuZW5kKCkuY2hpbGRyZW4oaSkud2lkdGgobC0oYytkKSl9LF9zY3JvbGxUbzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnRpbWVsaW5lLnZpZXcoKSxpPWYuYXR0cihcInVpZFwiKSxyPVwic3RyaW5nXCI9PXR5cGVvZiBlP2U6ZS5jbG9zZXN0KFwidHJcIituKCkpLmF0dHIoaSksbz10LmNvbnRlbnQuZmluZChuKHIpKTswIT09by5sZW5ndGgmJnQuX3Njcm9sbFRvKG8pfSxfZHJvcERvd25zOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PU4rcC5zdHlsZXMudG9vbGJhci5hY3Rpb25zLG49dGhpcy5vcHRpb25zLm1lc3NhZ2VzLmFjdGlvbnMsaT10aGlzLmRhdGFTb3VyY2Uscj10aGlzLnRpbWVsaW5lLG89ZnVuY3Rpb24odCl7dmFyIG4sbz10LnR5cGUsYT1pLl9jcmVhdGVOZXdNb2RlbCgpLHM9ZS5kYXRhSXRlbShlLnNlbGVjdCgpKSxsPWkudGFza1BhcmVudChzKSxjPXIudmlldygpLl90aW1lU2xvdHMoKVswXSxkPVwiYWRkXCI9PT1vP3M6bDthLnNldChcInRpdGxlXCIsXCJOZXcgdGFza1wiKSxkPyhhLnNldChcInBhcmVudElkXCIsZC5nZXQoXCJpZFwiKSksYS5zZXQoXCJzdGFydFwiLGQuZ2V0KFwic3RhcnRcIikpLGEuc2V0KFwiZW5kXCIsZC5nZXQoXCJlbmRcIikpKTooYS5zZXQoXCJzdGFydFwiLGMuc3RhcnQpLGEuc2V0KFwiZW5kXCIsYy5lbmQpKSxcImFkZFwiIT09byYmKG49cy5nZXQoXCJvcmRlcklkXCIpLG49XCJpbnNlcnQtYmVmb3JlXCI9PT1vP246bisxKSxlLl9jcmVhdGVUYXNrKGEsbil9O3RoaXMub3B0aW9ucy5lZGl0YWJsZSYmKHRoaXMuZm9vdGVyRHJvcERvd249bmV3IEoodGhpcy5mb290ZXIuY2hpbGRyZW4odCkuZXEoMCkse21lc3NhZ2VzOnthY3Rpb25zOm59LGRpcmVjdGlvbjpcInVwXCIsYW5pbWF0aW9uOntvcGVuOntlZmZlY3RzOlwic2xpZGVJbjp1cFwifX0sbmF2aWdhdGFibGU6ZS5vcHRpb25zLm5hdmlnYXRhYmxlfSksdGhpcy5oZWFkZXJEcm9wRG93bj1uZXcgSih0aGlzLnRvb2xiYXIuY2hpbGRyZW4odCkuZXEoMCkse21lc3NhZ2VzOnthY3Rpb25zOm59LG5hdmlnYXRhYmxlOmUub3B0aW9ucy5uYXZpZ2F0YWJsZX0pLHRoaXMuZm9vdGVyRHJvcERvd24uYmluZChcImNvbW1hbmRcIixvKSx0aGlzLmhlYWRlckRyb3BEb3duLmJpbmQoXCJjb21tYW5kXCIsbykpfSxfbGlzdDpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLGk9bi5vcHRpb25zLm5hdmlnYXRhYmxlLHI9cC5zdHlsZXMsYT10aGlzLndyYXBwZXIuZmluZChOK3IubGlzdCkscz1hLmZpbmQoXCI+IGRpdlwiKSxsPXRoaXMud3JhcHBlci5maW5kKE4rci50b29sYmFyLmFjdGlvbnMrXCIgPiBidXR0b25cIiksYz17Y29sdW1uczp0aGlzLm9wdGlvbnMuY29sdW1uc3x8W10sZGF0YVNvdXJjZTp0aGlzLmRhdGFTb3VyY2Usc2VsZWN0YWJsZTp0aGlzLm9wdGlvbnMuc2VsZWN0YWJsZSxlZGl0YWJsZTp0aGlzLm9wdGlvbnMuZWRpdGFibGUsbGlzdFdpZHRoOmEub3V0ZXJXaWR0aCgpLHJlc291cmNlc0ZpZWxkOnRoaXMucmVzb3VyY2VzLmZpZWxkfSxkPWMuY29sdW1ucyx1PWZ1bmN0aW9uKCl7aSYmKG4uX2N1cnJlbnQobi5fY2FjaGVkQ3VycmVudCksbyhuLmxpc3QuY29udGVudC5maW5kKFwidGFibGVcIiksITApKSxkZWxldGUgbi5fY2FjaGVkQ3VycmVudH07Zm9yKHQ9MDtkLmxlbmd0aD50O3QrKyllPWRbdF0sZS5maWVsZD09PXRoaXMucmVzb3VyY2VzLmZpZWxkJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlLmVkaXRvciYmKGUuZWRpdG9yPVModGhpcy5fY3JlYXRlUmVzb3VyY2VFZGl0b3IsdGhpcykpO3RoaXMubGlzdD1uZXcgZi51aS5HYW50dExpc3QocyxjKSx0aGlzLmxpc3QuYmluZChcInJlbmRlclwiLGZ1bmN0aW9uKCl7bi5fbmF2aWdhdGFibGUoKX0sITApLmJpbmQoXCJlZGl0XCIsZnVuY3Rpb24oZSl7bi5fY2FjaGVkQ3VycmVudD1lLmNlbGwsbi50cmlnZ2VyKFwiZWRpdFwiLHt0YXNrOmUubW9kZWwsY29udGFpbmVyOmUuY2VsbH0pJiZlLnByZXZlbnREZWZhdWx0KCl9KS5iaW5kKFwiY2FuY2VsXCIsZnVuY3Rpb24oZSl7bi50cmlnZ2VyKFwiY2FuY2VsXCIse3Rhc2s6ZS5tb2RlbCxjb250YWluZXI6ZS5jZWxsfSkmJmUucHJldmVudERlZmF1bHQoKSx1KCl9KS5iaW5kKFwidXBkYXRlXCIsZnVuY3Rpb24oZSl7bi5fdXBkYXRlVGFzayhlLnRhc2ssZS51cGRhdGVJbmZvKSx1KCl9KS5iaW5kKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXtuLnRyaWdnZXIoXCJjaGFuZ2VcIik7dmFyIGU9bi5saXN0LnNlbGVjdCgpO2UubGVuZ3RoPyhsLnJlbW92ZUF0dHIoXCJkYXRhLWFjdGlvblwiLFwiYWRkXCIpLG4udGltZWxpbmUuc2VsZWN0KFwiW2RhdGEtdWlkPSdcIitlLmF0dHIoXCJkYXRhLXVpZFwiKStcIiddXCIpKToobC5hdHRyKFwiZGF0YS1hY3Rpb25cIixcImFkZFwiKSxuLnRpbWVsaW5lLmNsZWFyU2VsZWN0aW9uKCkpfSl9LF90aW1lbGluZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1wLnN0eWxlcyxuPWkoVCghMCx7cmVzb3VyY2VzRmllbGQ6dGhpcy5yZXNvdXJjZXMuZmllbGR9LHRoaXMub3B0aW9ucykpLHI9dGhpcy53cmFwcGVyLmZpbmQoTit0LnRpbWVsaW5lK1wiID4gZGl2XCIpO3RoaXMudGltZWxpbmU9bmV3IGYudWkuR2FudHRUaW1lbGluZShyLG4pLHRoaXMudGltZWxpbmUuYmluZChcIm5hdmlnYXRlXCIsZnVuY3Rpb24obil7ZS50b29sYmFyLmZpbmQoTit0LnRvb2xiYXIudmlld3MrXCIgPiBsaVwiKS5yZW1vdmVDbGFzcyh0LnNlbGVjdGVkKS5lbmQoKS5maW5kKE4rdC50b29sYmFyLnZpZXdCdXR0b24rXCItXCIrbi52aWV3LnJlcGxhY2UoL1xcLi9nLFwiXFxcXC5cIikudG9Mb3dlckNhc2UoKSkuYWRkQ2xhc3ModC5zZWxlY3RlZCksZS5yZWZyZXNoKCl9KS5iaW5kKFwibW92ZVN0YXJ0XCIsZnVuY3Rpb24odCl7ZS50cmlnZ2VyKFwibW92ZVN0YXJ0XCIse3Rhc2s6dC50YXNrfSkmJnQucHJldmVudERlZmF1bHQoKX0pLmJpbmQoXCJtb3ZlXCIsZnVuY3Rpb24odCl7dmFyIG49dC50YXNrLGk9dC5zdGFydCxyPW5ldyBEYXRlKGkuZ2V0VGltZSgpK24uZHVyYXRpb24oKSk7ZS50cmlnZ2VyKFwibW92ZVwiLHt0YXNrOm4sc3RhcnQ6aSxlbmQ6cn0pJiZ0LnByZXZlbnREZWZhdWx0KCl9KS5iaW5kKFwibW92ZUVuZFwiLGZ1bmN0aW9uKHQpe3ZhciBuPXQudGFzayxpPXQuc3RhcnQscj1uZXcgRGF0ZShpLmdldFRpbWUoKStuLmR1cmF0aW9uKCkpO2UudHJpZ2dlcihcIm1vdmVFbmRcIix7dGFzazpuLHN0YXJ0OmksZW5kOnJ9KXx8ZS5fdXBkYXRlVGFzayhlLmRhdGFTb3VyY2UuZ2V0QnlVaWQobi51aWQpLHtzdGFydDppLGVuZDpyfSl9KS5iaW5kKFwicmVzaXplU3RhcnRcIixmdW5jdGlvbih0KXtlLnRyaWdnZXIoXCJyZXNpemVTdGFydFwiLHt0YXNrOnQudGFza30pJiZ0LnByZXZlbnREZWZhdWx0KCl9KS5iaW5kKFwicmVzaXplXCIsZnVuY3Rpb24odCl7ZS50cmlnZ2VyKFwicmVzaXplXCIse3Rhc2s6dC50YXNrLHN0YXJ0OnQuc3RhcnQsZW5kOnQuZW5kfSkmJnQucHJldmVudERlZmF1bHQoKX0pLmJpbmQoXCJyZXNpemVFbmRcIixmdW5jdGlvbih0KXt2YXIgbj10LnRhc2ssaT17fTt0LnJlc2l6ZVN0YXJ0P2kuc3RhcnQ9dC5zdGFydDppLmVuZD10LmVuZCxlLnRyaWdnZXIoXCJyZXNpemVFbmRcIix7dGFzazpuLHN0YXJ0OnQuc3RhcnQsZW5kOnQuZW5kfSl8fGUuX3VwZGF0ZVRhc2soZS5kYXRhU291cmNlLmdldEJ5VWlkKG4udWlkKSxpKX0pLmJpbmQoXCJwZXJjZW50UmVzaXplRW5kXCIsZnVuY3Rpb24odCl7ZS5fdXBkYXRlVGFzayhlLmRhdGFTb3VyY2UuZ2V0QnlVaWQodC50YXNrLnVpZCkse3BlcmNlbnRDb21wbGV0ZTp0LnBlcmNlbnRDb21wbGV0ZX0pfSkuYmluZChcImRlcGVuZGVuY3lEcmFnRW5kXCIsZnVuY3Rpb24odCl7dmFyIG49ZS5kZXBlbmRlbmNpZXMuX2NyZWF0ZU5ld01vZGVsKHt0eXBlOnQudHlwZSxwcmVkZWNlc3NvcklkOnQucHJlZGVjZXNzb3IuaWQsc3VjY2Vzc29ySWQ6dC5zdWNjZXNzb3IuaWR9KTtlLl9jcmVhdGVEZXBlbmRlbmN5KG4pfSkuYmluZChcInNlbGVjdFwiLGZ1bmN0aW9uKHQpe2Uuc2VsZWN0KFwiW2RhdGEtdWlkPSdcIit0LnVpZCtcIiddXCIpfSkuYmluZChcImVkaXRUYXNrXCIsZnVuY3Rpb24odCl7ZS5lZGl0VGFzayh0LnVpZCl9KS5iaW5kKFwiY2xlYXJcIixmdW5jdGlvbigpe2UuY2xlYXJTZWxlY3Rpb24oKX0pLmJpbmQoXCJyZW1vdmVUYXNrXCIsZnVuY3Rpb24odCl7ZS5yZW1vdmVUYXNrKGUuZGF0YVNvdXJjZS5nZXRCeVVpZCh0LnVpZCkpfSkuYmluZChcInJlbW92ZURlcGVuZGVuY3lcIixmdW5jdGlvbih0KXtlLnJlbW92ZURlcGVuZGVuY3koZS5kZXBlbmRlbmNpZXMuZ2V0QnlVaWQodC51aWQpKX0pfSxfZGF0YVNvdXJjZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucyx0PWUuZGF0YVNvdXJjZTt0PWsodCk/e2RhdGE6dH06dCx0aGlzLmRhdGFTb3VyY2UmJnRoaXMuX3JlZnJlc2hIYW5kbGVyP3RoaXMuZGF0YVNvdXJjZS51bmJpbmQoXCJjaGFuZ2VcIix0aGlzLl9yZWZyZXNoSGFuZGxlcikudW5iaW5kKFwicHJvZ3Jlc3NcIix0aGlzLl9wcm9ncmVzc0hhbmRsZXIpLnVuYmluZChcImVycm9yXCIsdGhpcy5fZXJyb3JIYW5kbGVyKToodGhpcy5fcmVmcmVzaEhhbmRsZXI9Uyh0aGlzLnJlZnJlc2gsdGhpcyksdGhpcy5fcHJvZ3Jlc3NIYW5kbGVyPVModGhpcy5fcmVxdWVzdFN0YXJ0LHRoaXMpLHRoaXMuX2Vycm9ySGFuZGxlcj1TKHRoaXMuX2Vycm9yLHRoaXMpKSx0aGlzLmRhdGFTb3VyY2U9Zi5kYXRhLkdhbnR0RGF0YVNvdXJjZS5jcmVhdGUodCkuYmluZChcImNoYW5nZVwiLHRoaXMuX3JlZnJlc2hIYW5kbGVyKS5iaW5kKFwicHJvZ3Jlc3NcIix0aGlzLl9wcm9ncmVzc0hhbmRsZXIpLmJpbmQoXCJlcnJvclwiLHRoaXMuX2Vycm9ySGFuZGxlcil9LF9kZXBlbmRlbmNpZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMuZGVwZW5kZW5jaWVzfHx7fSx0PWsoZSk/e2RhdGE6ZX06ZTt0aGlzLmRlcGVuZGVuY2llcyYmdGhpcy5fZGVwZW5kZW5jeVJlZnJlc2hIYW5kbGVyP3RoaXMuZGVwZW5kZW5jaWVzLnVuYmluZChcImNoYW5nZVwiLHRoaXMuX2RlcGVuZGVuY3lSZWZyZXNoSGFuZGxlcikudW5iaW5kKFwiZXJyb3JcIix0aGlzLl9kZXBlbmRlbmN5RXJyb3JIYW5kbGVyKToodGhpcy5fZGVwZW5kZW5jeVJlZnJlc2hIYW5kbGVyPVModGhpcy5yZWZyZXNoRGVwZW5kZW5jaWVzLHRoaXMpLHRoaXMuX2RlcGVuZGVuY3lFcnJvckhhbmRsZXI9Uyh0aGlzLl9lcnJvcix0aGlzKSksdGhpcy5kZXBlbmRlbmNpZXM9Zi5kYXRhLkdhbnR0RGVwZW5kZW5jeURhdGFTb3VyY2UuY3JlYXRlKHQpLmJpbmQoXCJjaGFuZ2VcIix0aGlzLl9kZXBlbmRlbmN5UmVmcmVzaEhhbmRsZXIpLmJpbmQoXCJlcnJvclwiLHRoaXMuX2RlcGVuZGVuY3lFcnJvckhhbmRsZXIpfSxfcmVzb3VyY2VzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLnJlc291cmNlcyx0PWUuZGF0YVNvdXJjZXx8e307dGhpcy5yZXNvdXJjZXM9e2ZpZWxkOlwicmVzb3VyY2VzXCIsZGF0YVRleHRGaWVsZDpcIm5hbWVcIixkYXRhQ29sb3JGaWVsZDpcImNvbG9yXCIsZGF0YUZvcm1hdEZpZWxkOlwiZm9ybWF0XCJ9LFQodGhpcy5yZXNvdXJjZXMsZSksdGhpcy5yZXNvdXJjZXMuZGF0YVNvdXJjZT1mLmRhdGEuRGF0YVNvdXJjZS5jcmVhdGUodCl9LF9hc3NpZ25tZW50czpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5hc3NpZ25tZW50cyx0PWUuZGF0YVNvdXJjZXx8e307dGhpcy5hc3NpZ25tZW50cz90aGlzLmFzc2lnbm1lbnRzLmRhdGFTb3VyY2UudW5iaW5kKFwiY2hhbmdlXCIsdGhpcy5fYXNzaWdubWVudHNSZWZyZXNoSGFuZGxlcik6dGhpcy5fYXNzaWdubWVudHNSZWZyZXNoSGFuZGxlcj1TKHRoaXMucmVmcmVzaCx0aGlzKSx0aGlzLmFzc2lnbm1lbnRzPXtkYXRhVGFza0lkRmllbGQ6XCJ0YXNrSWRcIixkYXRhUmVzb3VyY2VJZEZpZWxkOlwicmVzb3VyY2VJZFwiLGRhdGFWYWx1ZUZpZWxkOlwidmFsdWVcIn0sVCh0aGlzLmFzc2lnbm1lbnRzLGUpLHRoaXMuYXNzaWdubWVudHMuZGF0YVNvdXJjZT1mLmRhdGEuRGF0YVNvdXJjZS5jcmVhdGUodCksdGhpcy5hc3NpZ25tZW50cy5kYXRhU291cmNlLmJpbmQoXCJjaGFuZ2VcIix0aGlzLl9hc3NpZ25tZW50c1JlZnJlc2hIYW5kbGVyKX0sX2NyZWF0ZUVkaXRvcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMsbj10aGlzLl9lZGl0b3I9bmV3IHUodGhpcy53cmFwcGVyLFQoe30sdGhpcy5vcHRpb25zLHt0YXJnZXQ6dGhpcyxyZXNvdXJjZXM6e2ZpZWxkOnRoaXMucmVzb3VyY2VzLmZpZWxkLGVkaXRvcjpTKHRoaXMuX2NyZWF0ZVJlc291cmNlRWRpdG9yLHRoaXMpfSxjcmVhdGVCdXR0b246Uyh0aGlzLl9jcmVhdGVQb3B1cEJ1dHRvbix0aGlzKX0pKTtuLmJpbmQoXCJjYW5jZWxcIixmdW5jdGlvbihuKXt2YXIgaT1lLmRhdGFTb3VyY2UuZ2V0QnlVaWQobi5tb2RlbC51aWQpO3JldHVybiBlLnRyaWdnZXIoXCJjYW5jZWxcIix7Y29udGFpbmVyOm4uY29udGFpbmVyLHRhc2s6aX0pPyhuLnByZXZlbnREZWZhdWx0KCksdCk6KGUuY2FuY2VsVGFzaygpLHQpfSkuYmluZChcImVkaXRcIixmdW5jdGlvbih0KXt2YXIgbj1lLmRhdGFTb3VyY2UuZ2V0QnlVaWQodC5tb2RlbC51aWQpO2UudHJpZ2dlcihcImVkaXRcIix7Y29udGFpbmVyOnQuY29udGFpbmVyLHRhc2s6bn0pJiZ0LnByZXZlbnREZWZhdWx0KCl9KS5iaW5kKFwic2F2ZVwiLGZ1bmN0aW9uKHQpe3ZhciBuPWUuZGF0YVNvdXJjZS5nZXRCeVVpZCh0Lm1vZGVsLnVpZCk7ZS5zYXZlVGFzayhuLHQudXBkYXRlSW5mbyl9KS5iaW5kKFwicmVtb3ZlXCIsZnVuY3Rpb24odCl7ZS5yZW1vdmVUYXNrKHQubW9kZWwudWlkKX0pfSxfY3JlYXRlUmVzb3VyY2VFZGl0b3I6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9dCBpbnN0YW5jZW9mIHk/dDp0Lm1vZGVsLHI9aS5nZXQoXCJpZFwiKSxvPXRoaXMub3B0aW9ucy5tZXNzYWdlcyxhPW4ucmVzb3VyY2VzLmZpZWxkLHM9dGhpcy5fcmVzb3VyY2VFZGl0b3I9bmV3IGgoZSx7cmVzb3VyY2VzRmllbGQ6YSxkYXRhOnRoaXMuX3dyYXBSZXNvdXJjZURhdGEociksbW9kZWw6aSxtZXNzYWdlczpUKHt9LG8uZWRpdG9yKSxidXR0b25zOlt7bmFtZTpcInVwZGF0ZVwiLHRleHQ6by5zYXZlLGNsYXNzTmFtZTpwLnN0eWxlcy5wcmltYXJ5fSx7bmFtZTpcImNhbmNlbFwiLHRleHQ6by5jYW5jZWx9XSxjcmVhdGVCdXR0b246Uyh0aGlzLl9jcmVhdGVQb3B1cEJ1dHRvbix0aGlzKSxzYXZlOmZ1bmN0aW9uKGUpe24uX3VwZGF0ZUFzc2lnbm1lbnRzKGUubW9kZWwuZ2V0KFwiaWRcIiksZS5tb2RlbC5nZXQoYSkpfX0pO3Mub3BlbigpfSxfY3JlYXRlUG9wdXBCdXR0b246ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5uYW1lfHxlLnRleHQsbj17Y2xhc3NOYW1lOnAuc3R5bGVzLnBvcHVwLmJ1dHRvbitcIiBrLWdhbnR0LVwiKyh0fHxcIlwiKS5yZXBsYWNlKC9cXHMvZyxcIlwiKSx0ZXh0OnQsYXR0cjpcIlwifTtpZighKHR8fEQoZSkmJmUudGVtcGxhdGUpKXRocm93IEVycm9yKFwiQ3VzdG9tIGNvbW1hbmRzIHNob3VsZCBoYXZlIG5hbWUgc3BlY2lmaWVkXCIpO3JldHVybiBEKGUpJiYoZS5jbGFzc05hbWUmJihlLmNsYXNzTmFtZSs9XCIgXCIrbi5jbGFzc05hbWUpLG49VCghMCxuLGUpKSxmLnRlbXBsYXRlKGopKG4pfSx2aWV3OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRpbWVsaW5lLnZpZXcoZSl9LGRhdGFJdGVtOmZ1bmN0aW9uKGUpe3ZhciB0LG47cmV0dXJuIGU/KHQ9dGhpcy5saXN0LG49dC5jb250ZW50LmZpbmQoZSksdC5fbW9kZWxGcm9tRWxlbWVudChuKSk6bnVsbH0sc2V0RGF0YVNvdXJjZTpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZT1lLHRoaXMuX2RhdGFTb3VyY2UoKSx0aGlzLmxpc3QuX3NldERhdGFTb3VyY2UodGhpcy5kYXRhU291cmNlKSx0aGlzLm9wdGlvbnMuYXV0b0JpbmQmJmUuZmV0Y2goKX0sc2V0RGVwZW5kZW5jaWVzRGF0YVNvdXJjZTpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnMuZGVwZW5kZW5jaWVzPWUsdGhpcy5fZGVwZW5kZW5jaWVzKCksdGhpcy5vcHRpb25zLmF1dG9CaW5kJiZlLmZldGNoKCl9LGl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud3JhcHBlci5jaGlsZHJlbihcIi5rLXRhc2tcIil9LF91cGRhdGVBc3NpZ25tZW50czpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixpLHIsbyxhLHMsbCxjPXRoaXMuYXNzaWdubWVudHMuZGF0YVNvdXJjZSxkPXRoaXMuYXNzaWdubWVudHMuZGF0YVRhc2tJZEZpZWxkLHU9dGhpcy5hc3NpZ25tZW50cy5kYXRhUmVzb3VyY2VJZEZpZWxkLGg9dGhpcy5hc3NpZ25tZW50cy5kYXRhVmFsdWVGaWVsZCxwPSExLGY9bmV3IGIoYy52aWV3KCkpLmZpbHRlcih7ZmllbGQ6ZCxvcGVyYXRvcjpcImVxXCIsdmFsdWU6ZX0pLnRvQXJyYXkoKTtmLmxlbmd0aDspe2ZvcihuPWZbMF0sbz0wLGE9dC5sZW5ndGg7YT5vO28rKylpZihpPXRbb10sbi5nZXQodSk9PT1pLmdldChcImlkXCIpKXtyPXRbb10uZ2V0KFwidmFsdWVcIiksbi5zZXQoaCxyKSx0LnNwbGljZShvLDEpLHA9ITA7YnJlYWt9cHx8Yy5yZW1vdmUobikscD0hMSxmLnNoaWZ0KCl9Zm9yKHM9MCxsPXQubGVuZ3RoO2w+cztzKyspaT10W3NdLG49Yy5fY3JlYXRlTmV3TW9kZWwoKSxuW2RdPWUsblt1XT1pLmdldChcImlkXCIpLG5baF09aS5nZXQoXCJ2YWx1ZVwiKSxjLmFkZChuKTtjLnN5bmMoKX0sY2FuY2VsVGFzazpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2VkaXRvcix0PWUuY29udGFpbmVyO3QmJmUuY2xvc2UoKX0sZWRpdFRhc2s6ZnVuY3Rpb24oZSl7dmFyIHQsbj1cInN0cmluZ1wiPT10eXBlb2YgZT90aGlzLmRhdGFTb3VyY2UuZ2V0QnlVaWQoZSk6ZTtuJiYodD10aGlzLmRhdGFTb3VyY2UuX2NyZWF0ZU5ld01vZGVsKG4udG9KU09OKCkpLHQudWlkPW4udWlkLHRoaXMuY2FuY2VsVGFzaygpLHRoaXMuX2VkaXRUYXNrKHQpKX0sX2VkaXRUYXNrOmZ1bmN0aW9uKGUpe3RoaXMuX2VkaXRvci5lZGl0VGFzayhlKX0sc2F2ZVRhc2s6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9lZGl0b3IsaT1uLmNvbnRhaW5lcixyPW4uZWRpdGFibGU7aSYmciYmci5lbmQoKSYmdGhpcy5fdXBkYXRlVGFzayhlLHQpfSxfdXBkYXRlVGFzazpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMucmVzb3VyY2VzLmZpZWxkO3RoaXMudHJpZ2dlcihcInNhdmVcIix7dGFzazplLHZhbHVlczp0fSl8fCh0aGlzLl9wcmV2ZW50UmVmcmVzaD0hMCx0aGlzLmRhdGFTb3VyY2UudXBkYXRlKGUsdCksdFtuXSYmdGhpcy5fdXBkYXRlQXNzaWdubWVudHMoZS5nZXQoXCJpZFwiKSx0W25dKSx0aGlzLl9zeW5jRGF0YVNvdXJjZSgpKX0scmVtb3ZlVGFzazpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJzdHJpbmdcIj09dHlwZW9mIGU/dGhpcy5kYXRhU291cmNlLmdldEJ5VWlkKGUpOmU7biYmdGhpcy5fdGFza0NvbmZpcm0oZnVuY3Rpb24oZSl7ZXx8dC5fcmVtb3ZlVGFzayhuKX0sbil9LF9jcmVhdGVUYXNrOmZ1bmN0aW9uKGUsbil7aWYoIXRoaXMudHJpZ2dlcihcImFkZFwiLHt0YXNrOmUsZGVwZW5kZW5jeTpudWxsfSkpe3ZhciBpPXRoaXMuZGF0YVNvdXJjZTt0aGlzLl9wcmV2ZW50UmVmcmVzaD0hMCxuPT09dD9pLmFkZChlKTppLmluc2VydChuLGUpLHRoaXMuX3Njcm9sbFRvVWlkPWUudWlkLHRoaXMuX3N5bmNEYXRhU291cmNlKCl9fSxfY3JlYXRlRGVwZW5kZW5jeTpmdW5jdGlvbihlKXt0aGlzLnRyaWdnZXIoXCJhZGRcIix7dGFzazpudWxsLGRlcGVuZGVuY3k6ZX0pfHwodGhpcy5fcHJldmVudERlcGVuZGVuY3lSZWZyZXNoPSEwLHRoaXMuZGVwZW5kZW5jaWVzLmFkZChlKSx0aGlzLl9wcmV2ZW50RGVwZW5kZW5jeVJlZnJlc2g9ITEsdGhpcy5kZXBlbmRlbmNpZXMuc3luYygpKX0scmVtb3ZlRGVwZW5kZW5jeTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJzdHJpbmdcIj09dHlwZW9mIGU/dGhpcy5kZXBlbmRlbmNpZXMuZ2V0QnlVaWQoZSk6ZTtuJiZ0aGlzLl9kZXBlbmRlbmN5Q29uZmlybShmdW5jdGlvbihlKXtlfHx0Ll9yZW1vdmVEZXBlbmRlbmN5KG4pfSxuKX0sX3JlbW92ZVRhc2tEZXBlbmRlbmNpZXM6ZnVuY3Rpb24oZSx0KXt0aGlzLl9wcmV2ZW50RGVwZW5kZW5jeVJlZnJlc2g9ITA7Zm9yKHZhciBuPTAsaT10Lmxlbmd0aDtpPm47bisrKXRoaXMuZGVwZW5kZW5jaWVzLnJlbW92ZSh0W25dKTt0aGlzLl9wcmV2ZW50RGVwZW5kZW5jeVJlZnJlc2g9ITEsdGhpcy5kZXBlbmRlbmNpZXMuc3luYygpfSxfcmVtb3ZlUmVzb3VyY2VBc3NpZ25tZW50czpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcy5hc3NpZ25tZW50cy5kYXRhU291cmNlLHI9aS52aWV3KCksbz17ZmllbGQ6dGhpcy5hc3NpZ25tZW50cy5kYXRhVGFza0lkRmllbGQsb3BlcmF0b3I6XCJlcVwiLHZhbHVlOmUuZ2V0KFwiaWRcIil9O2ZvcihyPW5ldyBiKHIpLmZpbHRlcihvKS50b0FycmF5KCksdGhpcy5fcHJldmVudFJlZnJlc2g9ITAsdD0wLG49ci5sZW5ndGg7bj50O3QrKylpLnJlbW92ZShyW3RdKTt0aGlzLl9wcmV2ZW50UmVmcmVzaD0hMSxpLnN5bmMoKX0sX3JlbW92ZVRhc2s6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kZXBlbmRlbmNpZXMuZGVwZW5kZW5jaWVzKGUuaWQpO3RoaXMudHJpZ2dlcihcInJlbW92ZVwiLHt0YXNrOmUsZGVwZW5kZW5jaWVzOnR9KXx8KHRoaXMuX3JlbW92ZVRhc2tEZXBlbmRlbmNpZXMoZSx0KSx0aGlzLl9yZW1vdmVSZXNvdXJjZUFzc2lnbm1lbnRzKGUpLHRoaXMuX3ByZXZlbnRSZWZyZXNoPSEwLHRoaXMuZGF0YVNvdXJjZS5yZW1vdmUoZSkmJnRoaXMuX3N5bmNEYXRhU291cmNlKCksdGhpcy5fcHJldmVudFJlZnJlc2g9ITEpfSxfcmVtb3ZlRGVwZW5kZW5jeTpmdW5jdGlvbihlKXt0aGlzLnRyaWdnZXIoXCJyZW1vdmVcIix7dGFzazpudWxsLGRlcGVuZGVuY2llczpbZV19KXx8dGhpcy5kZXBlbmRlbmNpZXMucmVtb3ZlKGUpJiZ0aGlzLmRlcGVuZGVuY2llcy5zeW5jKCl9LF90YXNrQ29uZmlybTpmdW5jdGlvbihlLHQpe3RoaXMuX2NvbmZpcm0oZSx7bW9kZWw6dCx0ZXh0OlYsdGl0bGU6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLmRlbGV0ZVRhc2tXaW5kb3dUaXRsZX0pfSxfZGVwZW5kZW5jeUNvbmZpcm06ZnVuY3Rpb24oZSx0KXt0aGlzLl9jb25maXJtKGUse21vZGVsOnQsdGV4dDpVLHRpdGxlOnRoaXMub3B0aW9ucy5tZXNzYWdlcy5kZWxldGVEZXBlbmRlbmN5V2luZG93VGl0bGV9KX0sX2NvbmZpcm06ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcy5vcHRpb25zLmVkaXRhYmxlO3I9PT0hMHx8ci5jb25maXJtYXRpb24hPT0hMT8obj10aGlzLm9wdGlvbnMubWVzc2FnZXMsaT1be25hbWU6XCJkZWxldGVcIix0ZXh0Om4uZGVzdHJveSxjbGFzc05hbWU6cC5zdHlsZXMucHJpbWFyeSxjbGljazpmdW5jdGlvbigpe2UoKX19LHtuYW1lOlwiY2FuY2VsXCIsdGV4dDpuLmNhbmNlbCxjbGljazpmdW5jdGlvbigpe2UoITApfX1dLHRoaXMuc2hvd0RpYWxvZyhUKCEwLHt9LHQse2J1dHRvbnM6aX0pKSk6ZSgpfSxzaG93RGlhbG9nOmZ1bmN0aW9uKGUpe3RoaXMuX2VkaXRvci5zaG93RGlhbG9nKGUpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGUsdCxpLHIsbyxhO3RoaXMuX3ByZXZlbnRSZWZyZXNofHx0aGlzLmxpc3QuZWRpdGFibGV8fCh0aGlzLl9wcm9ncmVzcyghMSksZT10aGlzLmRhdGFTb3VyY2UsdD1lLnRhc2tUcmVlKCksaT10aGlzLl9zY3JvbGxUb1VpZCxhPS0xLHRoaXMuY3VycmVudCYmKG89dGhpcy5jdXJyZW50LmNsb3Nlc3QoXCJ0clwiKS5hdHRyKGYuYXR0cihcInVpZFwiKSksYT10aGlzLmN1cnJlbnQuaW5kZXgoKSksdGhpcy50cmlnZ2VyKFwiZGF0YUJpbmRpbmdcIil8fCgwIT09dGhpcy5yZXNvdXJjZXMuZGF0YVNvdXJjZS5kYXRhKCkubGVuZ3RoJiZ0aGlzLl9hc3NpZ25SZXNvdXJjZXModCksdGhpcy5fZWRpdG9yJiZ0aGlzLl9lZGl0b3IuY2xvc2UoKSx0aGlzLmNsZWFyU2VsZWN0aW9uKCksdGhpcy5saXN0Ll9yZW5kZXIodCksdGhpcy50aW1lbGluZS5fcmVuZGVyKHQpLHRoaXMudGltZWxpbmUuX3JlbmRlckRlcGVuZGVuY2llcyh0aGlzLmRlcGVuZGVuY2llcy52aWV3KCkpLGkmJih0aGlzLl9zY3JvbGxUbyhpKSx0aGlzLnNlbGVjdChuKGkpKSksKGl8fG8pJiZhPj0wJiYocj10aGlzLmxpc3QuY29udGVudC5maW5kKFwidHJcIituKGl8fG8pK1wiID4gdGQ6ZXEoXCIrYStcIilcIiksdGhpcy5fY3VycmVudChyKSksdGhpcy5fc2Nyb2xsVG9VaWQ9bnVsbCx0aGlzLnRyaWdnZXIoXCJkYXRhQm91bmRcIikpKX0scmVmcmVzaERlcGVuZGVuY2llczpmdW5jdGlvbigpe3RoaXMuX3ByZXZlbnREZXBlbmRlbmN5UmVmcmVzaHx8dGhpcy50cmlnZ2VyKFwiZGF0YUJpbmRpbmdcIil8fCh0aGlzLnRpbWVsaW5lLl9yZW5kZXJEZXBlbmRlbmNpZXModGhpcy5kZXBlbmRlbmNpZXMudmlldygpKSx0aGlzLnRyaWdnZXIoXCJkYXRhQm91bmRcIikpfSxfYXNzaWduUmVzb3VyY2VzOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLnJlc291cmNlcyxyPXRoaXMuYXNzaWdubWVudHMsbz1mdW5jdGlvbigpe3ZhciBlPXIuZGF0YVNvdXJjZS52aWV3KCksdD17ZmllbGQ6ci5kYXRhVGFza0lkRmllbGR9O3JldHVybiBlPW5ldyBiKGUpLmdyb3VwKHQpLnRvQXJyYXkoKX0sYT1vKCkscz1mdW5jdGlvbihlLHQpe3ZhciBuLHIsbz1lLmdldChcImlkXCIpO2ZvcihmLnNldHRlcihpLmZpZWxkKShlLG5ldyB3KFtdKSksbj0wLHI9YS5sZW5ndGg7cj5uO24rKylhW25dLnZhbHVlPT09byYmdChlLGFbbl0uaXRlbXMpfSxsPWZ1bmN0aW9uKGUsdCl7dmFyIG4sbyxhLHMsbCxjLGQsdTtmb3Iobj0wLG89dC5sZW5ndGg7bz5uO24rKylhPXRbbl0scz1pLmRhdGFTb3VyY2UuZ2V0KGEuZ2V0KHIuZGF0YVJlc291cmNlSWRGaWVsZCkpLGw9YS5nZXQoci5kYXRhVmFsdWVGaWVsZCksYz1hLmdldChyLmRhdGFSZXNvdXJjZUlkRmllbGQpLGQ9cy5nZXQoaS5kYXRhRm9ybWF0RmllbGQpfHxQLHU9Zi50b1N0cmluZyhsLGQpLGVbaS5maWVsZF0ucHVzaChuZXcgeSh7aWQ6YyxuYW1lOnMuZ2V0KGkuZGF0YVRleHRGaWVsZCksY29sb3I6cy5nZXQoaS5kYXRhQ29sb3JGaWVsZCksdmFsdWU6bCxmb3JtYXRlZFZhbHVlOnV9KSl9O2Zvcih0PTAsbj1lLmxlbmd0aDtuPnQ7dCsrKXMoZVt0XSxsKX0sX3dyYXBSZXNvdXJjZURhdGE6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9dGhpcyxvPVtdLGE9dGhpcy5yZXNvdXJjZXMuZGF0YVNvdXJjZS52aWV3KCkscz10aGlzLmFzc2lnbm1lbnRzLmRhdGFTb3VyY2UudmlldygpLGw9bmV3IGIocykuZmlsdGVyKHtmaWVsZDpyLmFzc2lnbm1lbnRzLmRhdGFUYXNrSWRGaWVsZCxvcGVyYXRvcjpcImVxXCIsdmFsdWU6ZX0pLnRvQXJyYXkoKSxjPWZ1bmN0aW9uKGUpe3ZhciB0PW51bGw7cmV0dXJuIG5ldyBiKGwpLmZpbHRlcih7ZmllbGQ6ci5hc3NpZ25tZW50cy5kYXRhUmVzb3VyY2VJZEZpZWxkLG9wZXJhdG9yOlwiZXFcIix2YWx1ZTplfSkuc2VsZWN0KGZ1bmN0aW9uKGUpe3QrPWUuZ2V0KHIuYXNzaWdubWVudHMuZGF0YVZhbHVlRmllbGQpfSksdH07Zm9yKG49MCxpPWEubGVuZ3RoO2k+bjtuKyspdD1hW25dLG8ucHVzaCh7aWQ6dC5nZXQoXCJpZFwiKSxuYW1lOnQuZ2V0KHIucmVzb3VyY2VzLmRhdGFUZXh0RmllbGQpLGZvcm1hdDp0LmdldChyLnJlc291cmNlcy5kYXRhRm9ybWF0RmllbGQpfHxQLHZhbHVlOmModC5pZCl9KTtyZXR1cm4gb30sX3N5bmNEYXRhU291cmNlOmZ1bmN0aW9uKCl7dGhpcy5fcHJldmVudFJlZnJlc2g9ITEsdGhpcy5fcmVxdWVzdFN0YXJ0KCksdGhpcy5kYXRhU291cmNlLnN5bmMoKX0sX3JlcXVlc3RTdGFydDpmdW5jdGlvbigpe3RoaXMuX3Byb2dyZXNzKCEwKX0sX2Vycm9yOmZ1bmN0aW9uKCl7dGhpcy5fcHJvZ3Jlc3MoITEpfSxfcHJvZ3Jlc3M6ZnVuY3Rpb24oZSl7Zi51aS5wcm9ncmVzcyh0aGlzLmVsZW1lbnQsZSl9LF9yZXNpemFibGU6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscj10aGlzLndyYXBwZXIsbz1wLnN0eWxlcyxhPU4rby5ncmlkQ29udGVudCxzPXIuZmluZChOK28ubGlzdCksbD1yLmZpbmQoTitvLnRpbWVsaW5lKTt0aGlzLl9yZXNpemVEcmFnZ2FibGU9ci5maW5kKE4rby5zcGxpdEJhcikuaGVpZ2h0KHMuaGVpZ2h0KCkpLmhvdmVyKGZ1bmN0aW9uKCl7ZSh0aGlzKS5hZGRDbGFzcyhvLnNwbGl0QmFySG92ZXIpfSxmdW5jdGlvbigpe2UodGhpcykucmVtb3ZlQ2xhc3Moby5zcGxpdEJhckhvdmVyKX0pLmVuZCgpLmtlbmRvUmVzaXphYmxlKHtvcmllbnRhdGlvbjpcImhvcml6b250YWxcIixoYW5kbGU6TitvLnNwbGl0QmFyLHN0YXJ0OmZ1bmN0aW9uKCl7dD1zLndpZHRoKCksbj1sLndpZHRoKCksaT1sLmZpbmQoYSkuc2Nyb2xsTGVmdCgpfSxyZXNpemU6ZnVuY3Rpb24oZSl7dmFyIHI9ZS54LmluaXRpYWxEZWx0YTswPnQrcnx8MD5uLXJ8fChzLndpZHRoKHQrciksbC53aWR0aChuLXIpLGwuZmluZChhKS5zY3JvbGxMZWZ0KGkrcikpfX0pLmRhdGEoXCJrZW5kb1Jlc2l6YWJsZVwiKX0sX3Njcm9sbGFibGU6ZnVuY3Rpb24oKXt2YXIgdD1wLnN0eWxlcyxuPU4rdC5ncmlkQ29udGVudCxpPU4rdC5ncmlkSGVhZGVyV3JhcCxyPXRoaXMudGltZWxpbmUuZWxlbWVudCxvPXRoaXMubGlzdC5lbGVtZW50O3IuZmluZChuKS5vbihcInNjcm9sbFwiLGZ1bmN0aW9uKCl7ci5maW5kKGkpLnNjcm9sbExlZnQodGhpcy5zY3JvbGxMZWZ0KSxvLmZpbmQobikuc2Nyb2xsVG9wKHRoaXMuc2Nyb2xsVG9wKX0pLG8uZmluZChuKS5vbihcInNjcm9sbFwiLGZ1bmN0aW9uKCl7by5maW5kKGkpLnNjcm9sbExlZnQodGhpcy5zY3JvbGxMZWZ0KX0pLm9uKFwiRE9NTW91c2VTY3JvbGxcIitNK1wiIG1vdXNld2hlZWxcIitNLGZ1bmN0aW9uKHQpe3ZhciBpPXIuZmluZChuKSxvPWkuc2Nyb2xsVG9wKCksYT1mLndoZWVsRGVsdGFZKHQpO2EmJih0LnByZXZlbnREZWZhdWx0KCksZSh0LmN1cnJlbnRUYXJnZXQpLm9uZShcIndoZWVsXCIrTSwhMSksaS5zY3JvbGxUb3AobystYSkpfSl9LF9uYXZpZ2F0YWJsZTpmdW5jdGlvbigpe3ZhciBpLHI9dGhpcyxhPXRoaXMub3B0aW9ucy5uYXZpZ2F0YWJsZSxzPXRoaXMub3B0aW9ucy5lZGl0YWJsZSxsPXRoaXMubGlzdC5oZWFkZXIuZmluZChcInRhYmxlXCIpLGM9dGhpcy5saXN0LmNvbnRlbnQuZmluZChcInRhYmxlXCIpLGQ9cC5zdHlsZXMsdT10aGlzLnRpbWVsaW5lLmVsZW1lbnQuZmluZChOK2QuZ3JpZENvbnRlbnQpLGg9bC5hZGQoYyksZz1uKCksbT17Y29sbGFwc2U6ITEsZXhwYW5kOiEwfSx2PWZ1bmN0aW9uKGUpe3ZhciB0PXIudGltZWxpbmUudmlldygpLl90aW1lU2xvdHMoKVswXS5vZmZzZXRXaWR0aDt1LnNjcm9sbExlZnQodS5zY3JvbGxMZWZ0KCkrKGU/LXQ6dCkpfSxfPWZ1bmN0aW9uKGUpe3ZhciB0PXIuY3VycmVudC5wYXJlbnQoXCJ0clwiK24oKSksaT1yLmN1cnJlbnQuaW5kZXgoKSxhPXRbZV0oKTswIT09ci5zZWxlY3QoKS5sZW5ndGgmJnIuY2xlYXJTZWxlY3Rpb24oKSwwIT09YS5sZW5ndGg/KHIuX2N1cnJlbnQoYS5jaGlsZHJlbihcInRkOmVxKFwiK2krXCIpXCIpKSxyLl9zY3JvbGxUbyhyLmN1cnJlbnQpKTpyLmN1cnJlbnQuaXMoXCJ0ZFwiKSYmXCJwcmV2XCI9PWU/byhsKTpyLmN1cnJlbnQuaXMoXCJ0aFwiKSYmXCJuZXh0XCI9PWUmJm8oYyl9LHk9ZnVuY3Rpb24oZSl7dmFyIHQ9ci5jdXJyZW50W2VdKCk7MCE9PXQubGVuZ3RoJiYoci5fY3VycmVudCh0KSxpPXIuY3VycmVudC5pbmRleCgpKX0sdz1mdW5jdGlvbihlKXt2YXIgdD1yLmRhdGFJdGVtKHIuY3VycmVudCk7dC5zdW1tYXJ5JiZ0LmV4cGFuZGVkIT09ZSYmdC5zZXQoXCJleHBhbmRlZFwiLGUpfSxiPWZ1bmN0aW9uKCl7dmFyIGUsdDtyLm9wdGlvbnMuZWRpdGFibGUmJiFyLmxpc3QuZWRpdGFibGUmJihlPXIuc2VsZWN0KCksdD1mLmF0dHIoXCJ1aWRcIiksZS5sZW5ndGgmJnIucmVtb3ZlVGFzayhlLmF0dHIodCkpKX07cmV0dXJuIGUodGhpcy53cmFwcGVyKS5vbihcIm1vdXNlZG93blwiK00sXCJ0clwiK2crXCIsIGRpdlwiK2crXCI6bm90KFwiK04rZC5saW5lK1wiKVwiLGZ1bmN0aW9uKHQpe3ZhciBpLGw9ZSh0LmN1cnJlbnRUYXJnZXQpLGM9ZSh0LnRhcmdldCkuaXMoXCI6YnV0dG9uLGEsOmlucHV0LGE+LmstaWNvbix0ZXh0YXJlYSxzcGFuLmstaWNvbixzcGFuLmstbGluaywuay1pbnB1dCwuay1tdWx0aXNlbGVjdC13cmFwXCIpO3QuY3RybEtleXx8KGEmJihpPWwuaXMoXCJ0clwiKT9lKHQudGFyZ2V0KS5jbG9zZXN0KFwidGRcIik6ci5saXN0LmNvbnRlbnQuZmluZChcInRyXCIrbihsLmF0dHIoZi5hdHRyKFwidWlkXCIpKSkrXCIgPiB0ZDpmaXJzdFwiKSxyLl9jdXJyZW50KGkpKSwhYSYmIXN8fGN8fHNldFRpbWVvdXQoZnVuY3Rpb24oKXtvKHIubGlzdC5jb250ZW50LmZpbmQoXCJ0YWJsZVwiKSwhMCl9LDIpKX0pLGEhPT0hMD8oYy5vbihcImtleWRvd25cIitNLGZ1bmN0aW9uKGUpe2Uua2V5Q29kZT09RS5ERUxFVEUmJmIoKX0pLHQpOihoLm9uKFwiZm9jdXNcIitNLGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcz09PWMuZ2V0KDApP1widGRcIjpcInRoXCIsbj0oZSh0aGlzKSxyLnNlbGVjdCgpKSxvPXIuY3VycmVudHx8ZShuLmxlbmd0aD9uOnRoaXMpLmZpbmQodCtcIjplcShcIisoaXx8MCkrXCIpXCIpO3IuX2N1cnJlbnQobyl9KS5vbihcImJsdXJcIitNLGZ1bmN0aW9uKCl7ci5fY3VycmVudCgpLHRoaXM9PWwmJmUodGhpcykuYXR0cihJLC0xKX0pLm9uKFwia2V5ZG93blwiK00sZnVuY3Rpb24oZSl7dmFyIHQsbj1lLmtleUNvZGU7aWYoci5jdXJyZW50KXN3aXRjaCh0PXIuY3VycmVudC5pcyhcInRkXCIpLG4pe2Nhc2UgRS5SSUdIVDplLnByZXZlbnREZWZhdWx0KCksZS5hbHRLZXk/digpOmUuY3RybEtleT93KG0uZXhwYW5kKTp5KFwibmV4dFwiKTticmVhaztjYXNlIEUuTEVGVDplLnByZXZlbnREZWZhdWx0KCksZS5hbHRLZXk/dighMCk6ZS5jdHJsS2V5P3cobS5jb2xsYXBzZSk6eShcInByZXZcIik7YnJlYWs7Y2FzZSBFLlVQOmUucHJldmVudERlZmF1bHQoKSxfKFwicHJldlwiKTticmVhaztjYXNlIEUuRE9XTjplLnByZXZlbnREZWZhdWx0KCksXyhcIm5leHRcIik7YnJlYWs7Y2FzZSBFLlNQQUNFQkFSOmUucHJldmVudERlZmF1bHQoKSx0JiZyLnNlbGVjdChyLmN1cnJlbnQuY2xvc2VzdChcInRyXCIpKTticmVhaztjYXNlIEUuRU5URVI6ZS5wcmV2ZW50RGVmYXVsdCgpLHQ/ci5vcHRpb25zLmVkaXRhYmxlJiYoci5fY2FjaGVkQ3VycmVudD1yLmN1cnJlbnQsci5saXN0Ll9zdGFydEVkaXRIYW5kbGVyKHIuY3VycmVudCksZS5zdG9wUHJvcGFnYXRpb24oKSk6ci5jdXJyZW50LmNoaWxkcmVuKFwiYS5rLWxpbmtcIikuY2xpY2soKTticmVhaztjYXNlIEUuRVNDOmUuc3RvcFByb3BhZ2F0aW9uKCk7YnJlYWs7Y2FzZSBFLkRFTEVURTp0JiZiKCk7YnJlYWs7ZGVmYXVsdDpuPj00OSYmNTc+PW4mJnIudmlldyhyLnRpbWVsaW5lLl92aWV3QnlJbmRleChuLTQ5KSl9fSksdCl9LF9jdXJyZW50OmZ1bmN0aW9uKHQpe3ZhciBuLGk9cC5zdHlsZXM7dGhpcy5jdXJyZW50JiZ0aGlzLmN1cnJlbnQubGVuZ3RoJiZ0aGlzLmN1cnJlbnQucmVtb3ZlQ2xhc3MoaS5mb2N1c2VkKS5yZW1vdmVBdHRyKFwiaWRcIiksdCYmdC5sZW5ndGg/KHRoaXMuY3VycmVudD10LmFkZENsYXNzKGkuZm9jdXNlZCkuYXR0cihcImlkXCIsTyksbj1lKGYuX2FjdGl2ZUVsZW1lbnQoKSksbi5pcyhcInRhYmxlXCIpJiZ0aGlzLndyYXBwZXIuZmluZChuKS5sZW5ndGg+MCYmbi5yZW1vdmVBdHRyKEwpLmF0dHIoTCxPKSk6dGhpcy5jdXJyZW50PW51bGx9LF9kYXRhQmluZDpmdW5jdGlvbigpe3ZhciB0LG49dGhpcztuLm9wdGlvbnMuYXV0b0JpbmQmJih0aGlzLl9wcmV2ZW50UmVmcmVzaD0hMCx0aGlzLl9wcmV2ZW50RGVwZW5kZW5jeVJlZnJlc2g9ITAsdD1lLm1hcChbdGhpcy5kYXRhU291cmNlLHRoaXMuZGVwZW5kZW5jaWVzLHRoaXMucmVzb3VyY2VzLmRhdGFTb3VyY2UsdGhpcy5hc3NpZ25tZW50cy5kYXRhU291cmNlXSxmdW5jdGlvbihlKXtyZXR1cm4gZS5mZXRjaCgpfSksZS53aGVuLmFwcGx5KG51bGwsdCkuZG9uZShmdW5jdGlvbigpe24uX3ByZXZlbnRSZWZyZXNoPSExLG4uX3ByZXZlbnREZXBlbmRlbmN5UmVmcmVzaD0hMSxuLnJlZnJlc2goKX0pKX0sX3Jlc2l6ZTpmdW5jdGlvbigpe3RoaXMuX2FkanVzdERpbWVuc2lvbnMoKSx0aGlzLnRpbWVsaW5lLnZpZXcoKS5fYWRqdXN0SGVpZ2h0KCksdGhpcy5saXN0Ll9hZGp1c3RIZWlnaHQoKX19KSxmLlBERk1peGluJiZmLlBERk1peGluLmV4dGVuZChwLnByb3RvdHlwZSksZi51aS5wbHVnaW4ocCksVCghMCxwLHtzdHlsZXM6UX0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7dmFyIHQsbixpPVtdLHI9ZS5jbGFzc05hbWU7Zm9yKHQ9MCxuPWUubGV2ZWw7bj50O3QrKylpLnB1c2goYyhcInNwYW5cIix7Y2xhc3NOYW1lOnJ9KSk7cmV0dXJuIGl9dmFyIGkscixvLGE9a2VuZG8uZGF0YSxzPWUuZXh0ZW5kLGw9a2VuZG8uZG9tLGM9bC5lbGVtZW50LGQ9bC50ZXh0LHU9bC5odG1sLGg9a2VuZG8udWkscD1oLkRhdGFCb3VuZFdpZGdldCxmPWEuRGF0YVNvdXJjZSxnPWEuT2JzZXJ2YWJsZUFycmF5LG09YS5RdWVyeSx2PWEuTW9kZWwsXz1lLnByb3h5LHk9ZS5tYXAsdz1lLmdyZXAsYj1cInN0cmluZ1wiLGs9XCJjaGFuZ2VcIix4PVwiZXJyb3JcIixDPVwicHJvZ3Jlc3NcIixTPVwiLlwiLFQ9XCIua2VuZG9UcmVlTGlzdFwiLEQ9XCJjbGlja1wiLEE9XCJtb3VzZWRvd25cIixFPVwiZWRpdFwiLE09XCJzYXZlXCIsUD1cImV4cGFuZFwiLEk9XCJjb2xsYXBzZVwiLHo9XCJyZW1vdmVcIixGPVwiZGF0YUJpbmRpbmdcIixSPVwiZGF0YUJvdW5kXCIsQj1cImNhbmNlbFwiLEw9XCJmaWx0ZXJNZW51SW5pdFwiLE89e3dyYXBwZXI6XCJrLXRyZWVsaXN0IGstZ3JpZCBrLXdpZGdldFwiLGhlYWRlcjpcImstaGVhZGVyXCIsYnV0dG9uOlwiay1idXR0b25cIixhbHQ6XCJrLWFsdFwiLGVkaXRDZWxsOlwiay1lZGl0LWNlbGxcIixncm91cDpcImstdHJlZWxpc3QtZ3JvdXBcIixncmlkVG9vbGJhcjpcImstZ3JpZC10b29sYmFyXCIsZ3JpZEhlYWRlcjpcImstZ3JpZC1oZWFkZXJcIixncmlkSGVhZGVyV3JhcDpcImstZ3JpZC1oZWFkZXItd3JhcFwiLGdyaWRDb250ZW50Olwiay1ncmlkLWNvbnRlbnRcIixncmlkQ29udGVudFdyYXA6XCJrLWdyaWQtY29udGVudFwiLGdyaWRGaWx0ZXI6XCJrLWdyaWQtZmlsdGVyXCIsZm9vdGVyVGVtcGxhdGU6XCJrLWZvb3Rlci10ZW1wbGF0ZVwiLGxvYWRpbmc6XCJrLWxvYWRpbmdcIixyZWZyZXNoOlwiay1pLXJlZnJlc2hcIixyZXRyeTpcImstcmVxdWVzdC1yZXRyeVwiLHNlbGVjdGVkOlwiay1zdGF0ZS1zZWxlY3RlZFwiLHN0YXR1czpcImstc3RhdHVzXCIsbGluazpcImstbGlua1wiLHdpdGhJY29uOlwiay13aXRoLWljb25cIixmaWx0ZXJhYmxlOlwiay1maWx0ZXJhYmxlXCIsaWNvbjpcImstaWNvblwiLGljb25GaWx0ZXI6XCJrLWZpbHRlclwiLGljb25Db2xsYXBzZTpcImstaS1jb2xsYXBzZVwiLGljb25FeHBhbmQ6XCJrLWktZXhwYW5kXCIsaWNvbkhpZGRlbjpcImstaS1ub25lXCIsaWNvblBsYWNlSG9sZGVyOlwiay1pY29uIGstaS1ub25lXCIsaW5wdXQ6XCJrLWlucHV0XCIsZHJvcFBvc2l0aW9uczpcImstaW5zZXJ0LXRvcCBrLWluc2VydC1ib3R0b20gay1hZGQgay1pbnNlcnQtbWlkZGxlXCIsZHJvcFRvcDpcImstaW5zZXJ0LXRvcFwiLGRyb3BCb3R0b206XCJrLWluc2VydC1ib3R0b21cIixkcm9wQWRkOlwiay1hZGRcIixkcm9wTWlkZGxlOlwiay1pbnNlcnQtbWlkZGxlXCIsZHJvcERlbmllZDpcImstZGVuaWVkXCIsZHJhZ1N0YXR1czpcImstZHJhZy1zdGF0dXNcIixkcmFnQ2x1ZTpcImstZHJhZy1jbHVlXCIsZHJhZ0NsdWVUZXh0Olwiay1jbHVlLXRleHRcIn0sSD17Y3JlYXRlOntpbWFnZUNsYXNzOlwiay1hZGRcIixjbGFzc05hbWU6XCJrLWdyaWQtYWRkXCIsbWV0aG9kTmFtZTpcImFkZFJvd1wifSxjcmVhdGVjaGlsZDp7aW1hZ2VDbGFzczpcImstYWRkXCIsY2xhc3NOYW1lOlwiay1ncmlkLWFkZFwiLG1ldGhvZE5hbWU6XCJhZGRSb3dcIn0sZGVzdHJveTp7aW1hZ2VDbGFzczpcImstZGVsZXRlXCIsY2xhc3NOYW1lOlwiay1ncmlkLWRlbGV0ZVwiLG1ldGhvZE5hbWU6XCJyZW1vdmVSb3dcIn0sZWRpdDp7aW1hZ2VDbGFzczpcImstZWRpdFwiLGNsYXNzTmFtZTpcImstZ3JpZC1lZGl0XCIsbWV0aG9kTmFtZTpcImVkaXRSb3dcIn0sdXBkYXRlOntpbWFnZUNsYXNzOlwiay11cGRhdGVcIixjbGFzc05hbWU6XCJrLXByaW1hcnkgay1ncmlkLXVwZGF0ZVwiLG1ldGhvZE5hbWU6XCJzYXZlUm93XCJ9LGNhbmNlbGVkaXQ6e2ltYWdlQ2xhc3M6XCJrLWNhbmNlbFwiLGNsYXNzTmFtZTpcImstZ3JpZC1jYW5jZWxcIixtZXRob2ROYW1lOlwiX2NhbmNlbEVkaXRcIn0sZXhjZWw6e2ltYWdlQ2xhc3M6XCJrLWktZXhjZWxcIixjbGFzc05hbWU6XCJrLWdyaWQtZXhjZWxcIixtZXRob2ROYW1lOlwic2F2ZUFzRXhjZWxcIn0scGRmOntpbWFnZUNsYXNzOlwiay1pLXBkZlwiLGNsYXNzTmFtZTpcImstZ3JpZC1wZGZcIixtZXRob2ROYW1lOlwic2F2ZUFzUERGXCJ9fSxOPXYuZGVmaW5lKHtpZDpcImlkXCIsZmllbGRzOntpZDp7dHlwZTpcIm51bWJlclwifSxwYXJlbnRJZDp7dHlwZTpcIm51bWJlclwiLG51bGxhYmxlOiEwfX0saW5pdDpmdW5jdGlvbihlKXt2LmZuLmluaXQuY2FsbCh0aGlzLGUpLHRoaXMuX2xvYWRlZD0hMX0sbG9hZGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD90aGlzLl9sb2FkZWQ6KHRoaXMuX2xvYWRlZD1lLHQpfSxzaG91bGRTZXJpYWxpemU6ZnVuY3Rpb24oZSl7cmV0dXJuIHYuZm4uc2hvdWxkU2VyaWFsaXplLmNhbGwodGhpcyxlKSYmXCJfbG9hZGVkXCIhPT1lJiZcIl9lcnJvclwiIT1lJiZcIl9lZGl0XCIhPWV9fSksVj1mLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXtmLmZuLmluaXQuY2FsbCh0aGlzLHMoITAse30se3NjaGVtYTp7bW9kZWxCYXNlOk4sbW9kZWw6Tn19LGUpKX0sX3JlYWREYXRhOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT1bXSxyPXRoaXMuZGF0YSgpO2Zvcih0PTAsbj1yLmxlbmd0aDtuPnQ7dCsrKWkucHVzaChyW3RdKTtyZXR1cm4gaS5jb25jYXQoZi5mbi5fcmVhZERhdGEuY2FsbCh0aGlzLGUpKX0sX3JlYWRBZ2dyZWdhdGVzOmZ1bmN0aW9uKGUpe3ZhciB0PXModGhpcy5fYWdncmVnYXRlUmVzdWx0LHRoaXMucmVhZGVyLmFnZ3JlZ2F0ZXMoZSkpO3JldHVyblwiXCJpbiB0JiYodFt0aGlzLl9kZWZhdWx0UGFyZW50SWQoKV09dFtcIlwiXSxkZWxldGUgdFtcIlwiXSksdH0scmVtb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3N1YnRyZWUodGhpcy5fY2hpbGRyZW5NYXAodGhpcy5kYXRhKCkpLGUuaWQpO3RoaXMuX3JlbW92ZUl0ZW1zKHQpLGYuZm4ucmVtb3ZlLmNhbGwodGhpcyxlKX0sX2ZpbHRlckNhbGxiYWNrOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT1bXSxyPWUudG9BcnJheSgpLG89e307Zm9yKHQ9MDtyLmxlbmd0aD50O3QrKylmb3Iobj1yW3RdO24mJihvW24uaWRdPSEwLCFvW24ucGFyZW50SWRdKTspb1tuLnBhcmVudElkXT0hMCxuPXRoaXMucGFyZW50Tm9kZShuKSxuJiZpLnB1c2gobik7cmV0dXJuIG5ldyBtKHIuY29uY2F0KGkpKX0sX3N1YnRyZWU6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9ZVt0XXx8W10sbz10aGlzLl9kZWZhdWx0UGFyZW50SWQoKTtmb3Iobj0wLGk9ci5sZW5ndGg7aT5uO24rKylyW25dLmlkIT09byYmKHI9ci5jb25jYXQodGhpcy5fc3VidHJlZShlLHJbbl0uaWQpKSk7cmV0dXJuIHJ9LF9jaGlsZHJlbk1hcDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvPXt9O2ZvcihlPXRoaXMuX29ic2VydmVWaWV3KGUpLHQ9MDtlLmxlbmd0aD50O3QrKyluPWVbdF0saT1uLmlkLHI9bi5wYXJlbnRJZCxvW2ldPW9baV18fFtdLG9bcl09b1tyXXx8W10sb1tyXS5wdXNoKG4pO3JldHVybiBvfSxfY2FsY3VsYXRlQWdncmVnYXRlczpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGEscztmb3IodD10fHx7fSxuPXt9LGE9dC5maWx0ZXIsYSYmKGU9bS5wcm9jZXNzKGUse2ZpbHRlcjphLGZpbHRlckNhbGxiYWNrOl8odGhpcy5fZmlsdGVyQ2FsbGJhY2ssdGhpcyl9KS5kYXRhKSxzPXRoaXMuX2NoaWxkcmVuTWFwKGUpLG5bdGhpcy5fZGVmYXVsdFBhcmVudElkKCldPW5ldyBtKHRoaXMuX3N1YnRyZWUocyx0aGlzLl9kZWZhdWx0UGFyZW50SWQoKSkpLmFnZ3JlZ2F0ZSh0LmFnZ3JlZ2F0ZSksbz0wO2UubGVuZ3RoPm87bysrKWk9ZVtvXSxyPXRoaXMuX3N1YnRyZWUocyxpLmlkKSxuW2kuaWRdPW5ldyBtKHIpLmFnZ3JlZ2F0ZSh0LmFnZ3JlZ2F0ZSk7cmV0dXJuIG59LF9xdWVyeVByb2Nlc3M6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxhLHMsbDtmb3IodD10fHx7fSx0LmZpbHRlckNhbGxiYWNrPV8odGhpcy5fZmlsdGVyQ2FsbGJhY2ssdGhpcyksbj10aGlzLl9kZWZhdWx0UGFyZW50SWQoKSxpPW0ucHJvY2VzcyhlLHQpLHI9dGhpcy5fY2hpbGRyZW5NYXAoaS5kYXRhKSxlPXJbbl18fFtdLGE9MDtlLmxlbmd0aD5hO2ErKylzPWVbYV0scy5pZCE9PW4mJihsPXJbcy5pZF0sbz0hKCFsfHwhbC5sZW5ndGgpLHMubG9hZGVkKCl8fHMubG9hZGVkKG8pLChzLmxvYWRlZCgpfHxzLmhhc0NoaWxkcmVuIT09ITApJiYocy5oYXNDaGlsZHJlbj1vKSxvJiZlLnNwbGljZS5hcHBseShlLFthKzEsMF0uY29uY2F0KGwpKSk7cmV0dXJuIGkuZGF0YT1lLGl9LF9xdWV1ZVJlcXVlc3Q6ZnVuY3Rpb24oZSx0KXt0LmNhbGwodGhpcyl9LF9tb2RlbExvYWRlZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldChlKTt0LmxvYWRlZCghMCksdC5oYXNDaGlsZHJlbj10aGlzLmNoaWxkTm9kZXModCkubGVuZ3RoPjB9LF9tb2RlbEVycm9yOmZ1bmN0aW9uKGUsdCl7dGhpcy5nZXQoZSkuX2Vycm9yPXR9LHJlYWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuaWR8fCh0aGlzLl9kYXRhPXRoaXMuX29ic2VydmUoW10pKSxmLmZuLnJlYWQuY2FsbCh0aGlzLGUpfSxsb2FkOmZ1bmN0aW9uKGUpe3ZhciB0PVwiX3F1ZXJ5XCI7cmV0dXJuIWUubG9hZGVkKCkmJmUuaGFzQ2hpbGRyZW4mJih0PVwicmVhZFwiKSx0aGlzW3RdKHtpZDplLmlkfSkudGhlbihfKHRoaXMuX21vZGVsTG9hZGVkLHRoaXMsZS5pZCksXyh0aGlzLl9tb2RlbEVycm9yLHRoaXMsZS5pZCkpfSxfYnlQYXJlbnRJZDpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj1bXSxvPXRoaXMudmlldygpO2lmKGU9PT10KXJldHVybltdO2ZvcihpPTA7by5sZW5ndGg+aTtpKyspbj1vLmF0KGkpLG4ucGFyZW50SWQ9PWUmJnIucHVzaChuKTtyZXR1cm4gcn0sX2RlZmF1bHRQYXJlbnRJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlYWRlci5tb2RlbC5mbi5kZWZhdWx0cy5wYXJlbnRJZH0sY2hpbGROb2RlczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYnlQYXJlbnRJZChlLmlkLHRoaXMuX2RlZmF1bHRQYXJlbnRJZCgpKX0scm9vdE5vZGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J5UGFyZW50SWQodGhpcy5fZGVmYXVsdFBhcmVudElkKCkpfSxwYXJlbnROb2RlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdldChlLnBhcmVudElkKX0sbGV2ZWw6ZnVuY3Rpb24oZSl7dmFyIHQ9LTE7ZSBpbnN0YW5jZW9mIE58fChlPXRoaXMuZ2V0KGUpKTtkbyBlPXRoaXMucGFyZW50Tm9kZShlKSx0Kys7d2hpbGUoZSk7cmV0dXJuIHR9LGZpbHRlcjpmdW5jdGlvbihlKXt2YXIgbj1mLmZuLmZpbHRlcjtyZXR1cm4gZT09PXQ/bi5jYWxsKHRoaXMsZSk6KG4uY2FsbCh0aGlzLGUpLHQpfX0pO1YuY3JlYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBlLmlzQXJyYXkodCk/dD17ZGF0YTp0fTp0IGluc3RhbmNlb2YgZyYmKHQ9e2RhdGE6dC50b0pTT04oKX0pLHQgaW5zdGFuY2VvZiBWP3Q6bmV3IFYodCl9LGk9a2VuZG8uT2JzZXJ2YWJsZS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXtrZW5kby5PYnNlcnZhYmxlLmZuLmluaXQuY2FsbCh0aGlzKSx0PXRoaXMub3B0aW9ucz1zKCEwLHt9LHRoaXMub3B0aW9ucyx0KSx0aGlzLmVsZW1lbnQ9ZSx0aGlzLmJpbmQodGhpcy5ldmVudHMsdCksdGhpcy5tb2RlbD10aGlzLm9wdGlvbnMubW9kZWwsdGhpcy5maWVsZHM9dGhpcy5fZmllbGRzKHRoaXMub3B0aW9ucy5jb2x1bW5zKSx0aGlzLl9pbml0Q29udGFpbmVyKCksdGhpcy5jcmVhdGVFZGl0YWJsZSgpfSxldmVudHM6W10sX2luaXRDb250YWluZXI6ZnVuY3Rpb24oKXt0aGlzLndyYXBwZXI9dGhpcy5lbGVtZW50fSxjcmVhdGVFZGl0YWJsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uczt0aGlzLmVkaXRhYmxlPW5ldyBoLkVkaXRhYmxlKHRoaXMud3JhcHBlcix7ZmllbGRzOnRoaXMuZmllbGRzLHRhcmdldDplLnRhcmdldCxjbGVhckNvbnRhaW5lcjplLmNsZWFyQ29udGFpbmVyLG1vZGVsOnRoaXMubW9kZWx9KX0sX2lzRWRpdGFibGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmllbGQmJnRoaXMubW9kZWwuZWRpdGFibGUoZS5maWVsZCl9LF9maWVsZHM6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9W107Zm9yKHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspaT1lW3RdLHRoaXMuX2lzRWRpdGFibGUoaSkmJnIucHVzaCh7ZmllbGQ6aS5maWVsZCxmb3JtYXQ6aS5mb3JtYXQsZWRpdG9yOmkuZWRpdG9yfSk7cmV0dXJuIHJ9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkaXRhYmxlLmVuZCgpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuZGVzdHJveSgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lZGl0YWJsZS5kZXN0cm95KCksdGhpcy5lZGl0YWJsZS5lbGVtZW50LmZpbmQoXCJbXCIra2VuZG8uYXR0cihcImNvbnRhaW5lci1mb3JcIikrXCJdXCIpLmVtcHR5KCksdGhpcy5tb2RlbD10aGlzLndyYXBwZXI9dGhpcy5lbGVtZW50PXRoaXMuY29sdW1ucz10aGlzLmVkaXRhYmxlPW51bGx9fSkscj1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe2kuZm4uaW5pdC5jYWxsKHRoaXMsZSx0KSx0aGlzLl9hdHRhY2hIYW5kbGVycygpLHRoaXMub3BlbigpfSxldmVudHM6W0IsTV0sb3B0aW9uczp7d2luZG93Onttb2RhbDohMCxyZXNpemFibGU6ITEsZHJhZ2dhYmxlOiEwLHRpdGxlOlwiRWRpdFwiLHZpc2libGU6ITF9fSxfaW5pdENvbnRhaW5lcjpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucyxuPVtdO1xudGhpcy53cmFwcGVyPWUoJzxkaXYgY2xhc3M9XCJrLXBvcHVwLWVkaXQtZm9ybVwiLz4nKS5hdHRyKGtlbmRvLmF0dHIoXCJ1aWRcIiksdGhpcy5tb2RlbC51aWQpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImstZWRpdC1mb3JtLWNvbnRhaW5lclwiLz4nKSx0LnRlbXBsYXRlPyh0aGlzLl9hcHBlbmRUZW1wbGF0ZShuKSx0aGlzLmZpZWxkcz1bXSk6dGhpcy5fYXBwZW5kRmllbGRzKG4pLHRoaXMuX2FwcGVuZEJ1dHRvbnMobiksbmV3IGwuVHJlZSh0aGlzLndyYXBwZXIuY2hpbGRyZW4oKVswXSkucmVuZGVyKG4pLHRoaXMud3JhcHBlci5hcHBlbmRUbyh0LmFwcGVuZFRvKSx0aGlzLndpbmRvdz1uZXcgaC5XaW5kb3codGhpcy53cmFwcGVyLHQud2luZG93KX0sX2FwcGVuZFRlbXBsYXRlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9ucy50ZW1wbGF0ZTt0eXBlb2YgdD09PWImJih0PXdpbmRvdy51bmVzY2FwZSh0KSksdD1rZW5kby50ZW1wbGF0ZSh0KSh0aGlzLm1vZGVsKSxlLnB1c2godSh0KSl9LF9hcHBlbmRGaWVsZHM6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9dGhpcy5vcHRpb25zLmNvbHVtbnM7Zm9yKHQ9MCxuPXIubGVuZ3RoO24+dDt0KyspaT1yW3RdLGkuY29tbWFuZHx8KGUucHVzaCh1KCc8ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsIGZvcj1cIicraS5maWVsZCsnXCI+JysoaS50aXRsZXx8aS5maWVsZHx8XCJcIikrXCI8L2xhYmVsPjwvZGl2PlwiKSksZS5wdXNoKHRoaXMuX2lzRWRpdGFibGUoaSk/dShcIjxkaXYgXCIra2VuZG8uYXR0cihcImNvbnRhaW5lci1mb3JcIikrJz1cIicraS5maWVsZCsnXCIgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj48L2Rpdj4nKTpjKFwiZGl2XCIse1wiY2xhc3NcIjpcImstZWRpdC1maWVsZFwifSxbdGhpcy5vcHRpb25zLmZpZWxkUmVuZGVyZXIoaSx0aGlzLm1vZGVsKV0pKSl9LF9hcHBlbmRCdXR0b25zOmZ1bmN0aW9uKGUpe2UucHVzaChjKFwiZGl2XCIse1wiY2xhc3NcIjpcImstZWRpdC1idXR0b25zIGstc3RhdGUtZGVmYXVsdFwifSx0aGlzLm9wdGlvbnMuY29tbWFuZFJlbmRlcmVyKCkpKX0sX2F0dGFjaEhhbmRsZXJzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fY2FuY2VsUHJveHk9Xyh0aGlzLl9jYW5jZWwsdGhpcyk7dGhpcy53cmFwcGVyLm9uKEQrVCxcIi5rLWdyaWQtY2FuY2VsXCIsdGhpcy5fY2FuY2VsUHJveHkpLHRoaXMuX3NhdmVQcm94eT1fKHRoaXMuX3NhdmUsdGhpcyksdGhpcy53cmFwcGVyLm9uKEQrVCxcIi5rLWdyaWQtdXBkYXRlXCIsdGhpcy5fc2F2ZVByb3h5KSx0aGlzLndpbmRvdy5iaW5kKFwiY2xvc2VcIixmdW5jdGlvbih0KXt0LnVzZXJUcmlnZ2VyZWQmJmUodCl9KX0sX2RldHRhY2hIYW5kbGVyczpmdW5jdGlvbigpe3RoaXMuX2NhbmNlbFByb3h5PW51bGwsdGhpcy5fc2F2ZVByb3h5PW51bGwsdGhpcy53cmFwcGVyLm9mZihUKX0sX2NhbmNlbDpmdW5jdGlvbihlKXt0aGlzLnRyaWdnZXIoQixlKX0sX3NhdmU6ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIoTSl9LG9wZW46ZnVuY3Rpb24oKXt0aGlzLndpbmRvdy5jZW50ZXIoKS5vcGVuKCl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy53aW5kb3cuYmluZChcImRlYWN0aXZhdGVcIixfKHRoaXMuZGVzdHJveSx0aGlzKSkuY2xvc2UoKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMud2luZG93LmRlc3Ryb3koKSx0aGlzLndpbmRvdz1udWxsLHRoaXMuX2RldHRhY2hIYW5kbGVycygpLGkuZm4uZGVzdHJveS5jYWxsKHRoaXMpfX0pLG89cC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXtwLmZuLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy5fZGF0YVNvdXJjZSh0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZSksdGhpcy5fY29sdW1ucygpLHRoaXMuX2xheW91dCgpLHRoaXMuX3NvcnRhYmxlKCksdGhpcy5fZmlsdGVyYWJsZSgpLHRoaXMuX3NlbGVjdGFibGUoKSx0aGlzLl9hdHRhY2hFdmVudHMoKSx0aGlzLl90b29sYmFyKCksdGhpcy5fc2Nyb2xsYWJsZSgpLHRoaXMub3B0aW9ucy5hdXRvQmluZCYmdGhpcy5kYXRhU291cmNlLmZldGNoKCksdGhpcy5fYWRqdXN0SGVpZ2h0KCksa2VuZG8ubm90aWZ5KHRoaXMpfSxfc2Nyb2xsYWJsZTpmdW5jdGlvbigpe3ZhciBlLHQ7dGhpcy5vcHRpb25zLnNjcm9sbGFibGUmJihlPXRoaXMuaGVhZGVyLmNsb3Nlc3QoXCIuay1ncmlkLWhlYWRlci13cmFwXCIpLHRoaXMuY29udGVudC5jbG9zZXN0KFwiLmstZ3JpZC1jb250ZW50XCIpLmJpbmQoXCJzY3JvbGxcIitULGZ1bmN0aW9uKCl7ZS5zY3JvbGxMZWZ0KHRoaXMuc2Nyb2xsTGVmdCl9KSx0PWtlbmRvLnRvdWNoU2Nyb2xsZXIodGhpcy5jb250ZW50LmNsb3Nlc3QoXCJkaXZcIikpLHQmJnQubW92YWJsZSYmKHRoaXMuX3RvdWNoU2Nyb2xsZXI9dCkpfSxfcHJvZ3Jlc3M6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMubWVzc2FnZXM7dGhpcy5jb250ZW50LmZpbmQoXCJ0clwiKS5sZW5ndGh8fHRoaXMuX3Nob3dTdGF0dXMoa2VuZG8udGVtcGxhdGUoXCI8c3BhbiBjbGFzcz0nIz0gY2xhc3NOYW1lICMnIC8+ICM6IG1lc3NhZ2VzLmxvYWRpbmcgI1wiKSh7Y2xhc3NOYW1lOk8uaWNvbitcIiBcIitPLmxvYWRpbmcsbWVzc2FnZXM6ZX0pKX0sX2Vycm9yOmZ1bmN0aW9uKGUpe3RoaXMuZGF0YVNvdXJjZS5yb290Tm9kZXMoKS5sZW5ndGh8fHRoaXMuX3JlbmRlcih7ZXJyb3I6ZX0pfSxyZWZyZXNoOmZ1bmN0aW9uKGUpe2U9ZXx8e30sXCJpdGVtY2hhbmdlXCI9PWUuYWN0aW9uJiZ0aGlzLmVkaXRvcnx8dGhpcy50cmlnZ2VyKEYpfHwodGhpcy5fYW5ndWxhckl0ZW1zKFwiY2xlYW51cFwiKSx0aGlzLl9hbmd1bGFyRm9vdGVycyhcImNsZWFudXBcIiksdGhpcy5fY2FuY2VsRWRpdG9yKCksdGhpcy5fcmVuZGVyKCksdGhpcy5fYWRqdXN0SGVpZ2h0KCksdGhpcy5fYW5ndWxhckl0ZW1zKFwiY29tcGlsZVwiKSx0aGlzLl9hbmd1bGFyRm9vdGVycyhcImNvbXBpbGVcIiksdGhpcy50cmlnZ2VyKFIpKX0sX2FuZ3VsYXJGb290ZXJzOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvPXRoaXMuZGF0YVNvdXJjZS5hZ2dyZWdhdGVzKCksYT10aGlzLmNvbnRlbnQuZmluZChcInRyXCIpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBlKHRoaXMpLmhhc0NsYXNzKE8uZm9vdGVyVGVtcGxhdGUpfSk7Zm9yKG49MDthLmxlbmd0aD5uO24rKylpPWEuZXEobikscj1vW2kuYXR0cihcImRhdGEtcGFyZW50SWRcIildLHRoaXMuX2FuZ3VsYXJGb290ZXIodCxpLmZpbmQoXCJ0ZFwiKS5nZXQoKSxyKX0sX2FuZ3VsYXJGb290ZXI6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMuY29sdW1uczt0aGlzLmFuZ3VsYXIoZSxmdW5jdGlvbigpe3JldHVybntlbGVtZW50czp0LGRhdGE6eShpLGZ1bmN0aW9uKGUpe3JldHVybntjb2x1bW46ZSxhZ2dyZWdhdGU6biYmbltlLmZpZWxkXX19KX19KX0saXRlbXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmZpbmQoXCJ0clwiKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4hZSh0aGlzKS5oYXNDbGFzcyhPLmZvb3RlclRlbXBsYXRlKX0pfSxfc2hvd1N0YXR1czpmdW5jdGlvbih0KXt2YXIgbj10aGlzLmVsZW1lbnQuZmluZChcIi5rLXN0YXR1c1wiKTtuLmxlbmd0aHx8KG49ZShcIjxkaXYgY2xhc3M9J2stc3RhdHVzJyAvPlwiKS5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpKSx0aGlzLl9jb250ZW50VHJlZS5yZW5kZXIoW10pLHRoaXMuY29udGVudC5jbG9zZXN0KFMrTy5ncmlkQ29udGVudCkuaGlkZSgpLG4uaHRtbCh0KX0sX2hpZGVTdGF0dXM6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuZmluZChcIi5rLXN0YXR1c1wiKS5yZW1vdmUoKSx0aGlzLmNvbnRlbnQuY2xvc2VzdChTK08uZ3JpZENvbnRlbnQpLnNob3coKX0sX2FkanVzdEhlaWdodDpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5lbGVtZW50LG49dC5maW5kKFMrTy5ncmlkQ29udGVudFdyYXApLGk9dC5maW5kKFMrTy5ncmlkSGVhZGVyKSxyPXQuZmluZChTK08uZ3JpZFRvb2xiYXIpO3QuaGVpZ2h0KHRoaXMub3B0aW9ucy5oZWlnaHQpLGU9ZnVuY3Rpb24oZSl7dmFyIHQsbjtyZXR1cm4gZVswXS5zdHlsZS5oZWlnaHQ/ITA6KHQ9ZS5oZWlnaHQoKSxlLmhlaWdodChcImF1dG9cIiksbj1lLmhlaWdodCgpLGUuaGVpZ2h0KFwiXCIpLHQhPW4pfSxlKHQpJiZuLmhlaWdodCh0LmhlaWdodCgpLWkub3V0ZXJIZWlnaHQoKS1yLm91dGVySGVpZ2h0KCkpfSxkZXN0cm95OmZ1bmN0aW9uKCl7cC5mbi5kZXN0cm95LmNhbGwodGhpcyk7dmFyIGU9dGhpcy5kYXRhU291cmNlO2UudW5iaW5kKGssdGhpcy5fcmVmcmVzaEhhbmRsZXIpLGUudW5iaW5kKHgsdGhpcy5fZXJyb3JIYW5kbGVyKSxlLnVuYmluZChDLHRoaXMuX3Byb2dyZXNzSGFuZGxlciksdGhpcy5fZGVzdHJveUVkaXRvcigpLHRoaXMuZWxlbWVudC5vZmYoVCksdGhpcy5fdG91Y2hTY3JvbGxlciYmdGhpcy5fdG91Y2hTY3JvbGxlci5kZXN0cm95KCksdGhpcy5fcmVmcmVzaEhhbmRsZXI9dGhpcy5fZXJyb3JIYW5kbGVyPXRoaXMuX3Byb2dyZXNzSGFuZGxlcj1udWxsLHRoaXMuaGVhZGVyPXRoaXMuY29udGVudD10aGlzLmVsZW1lbnQ9bnVsbCx0aGlzLl9zdGF0dXNUcmVlPXRoaXMuX2hlYWRlclRyZWU9dGhpcy5fY29udGVudFRyZWU9bnVsbH0sb3B0aW9uczp7bmFtZTpcIlRyZWVMaXN0XCIsY29sdW1uczpbXSxhdXRvQmluZDohMCxzY3JvbGxhYmxlOiEwLHNlbGVjdGFibGU6ITEsc29ydGFibGU6ITEsdG9vbGJhcjpudWxsLGhlaWdodDpudWxsLG1lc3NhZ2VzOntub1Jvd3M6XCJObyByZWNvcmRzIHRvIGRpc3BsYXlcIixsb2FkaW5nOlwiTG9hZGluZy4uLlwiLHJlcXVlc3RGYWlsZWQ6XCJSZXF1ZXN0IGZhaWxlZC5cIixyZXRyeTpcIlJldHJ5XCIsY29tbWFuZHM6e2VkaXQ6XCJFZGl0XCIsdXBkYXRlOlwiVXBkYXRlXCIsY2FuY2VsZWRpdDpcIkNhbmNlbFwiLGNyZWF0ZTpcIkFkZCBuZXcgcmVjb3JkXCIsY3JlYXRlY2hpbGQ6XCJBZGQgY2hpbGQgcmVjb3JkXCIsZGVzdHJveTpcIkRlbGV0ZVwiLGV4Y2VsOlwiRXhwb3J0IHRvIEV4Y2VsXCIscGRmOlwiRXhwb3J0IHRvIFBERlwifX0sZXhjZWw6e2hpZXJhcmNoeTohMH0sZmlsdGVyYWJsZTohMSxlZGl0YWJsZTohMX0sZXZlbnRzOltrLEUsTSx6LFAsSSxGLFIsQixMXSxfdG9nZ2xlOmZ1bmN0aW9uKGUsbil7dmFyIGk9ZS5sb2FkZWQoKTtlLl9lcnJvciYmKGUuZXhwYW5kZWQ9ITEsZS5fZXJyb3I9dCksKGl8fCFlLmV4cGFuZGVkKSYmKHQ9PT1uJiYobj0hZS5leHBhbmRlZCksZS5leHBhbmRlZD1uLGl8fHRoaXMuZGF0YVNvdXJjZS5sb2FkKGUpLmFsd2F5cyhfKHRoaXMucmVmcmVzaCx0aGlzKSksdGhpcy5yZWZyZXNoKCkpfSxleHBhbmQ6ZnVuY3Rpb24oZSl7dGhpcy5fdG9nZ2xlKHRoaXMuZGF0YUl0ZW0oZSksITApfSxjb2xsYXBzZTpmdW5jdGlvbihlKXt0aGlzLl90b2dnbGUodGhpcy5kYXRhSXRlbShlKSwhMSl9LF90b2dnbGVDaGlsZHJlbjpmdW5jdGlvbih0KXt2YXIgbj1lKHQuY3VycmVudFRhcmdldCksaT10aGlzLmRhdGFJdGVtKG4pLHI9aS5leHBhbmRlZD9JOlA7dGhpcy50cmlnZ2VyKHIse21vZGVsOml9KXx8dGhpcy5fdG9nZ2xlKGkpLHQucHJldmVudERlZmF1bHQoKX0sX2F0dGFjaEV2ZW50czpmdW5jdGlvbigpe3ZhciBlPVMrTy5pY29uQ29sbGFwc2UrXCIsIC5cIitPLmljb25FeHBhbmQrXCIsIC5cIitPLnJlZnJlc2gsdD1TK08ucmV0cnksbj10aGlzLmRhdGFTb3VyY2U7dGhpcy5lbGVtZW50Lm9uKEErVCxlLF8odGhpcy5fdG9nZ2xlQ2hpbGRyZW4sdGhpcykpLm9uKEQrVCx0LF8obi5mZXRjaCxuKSkub24oRCtULFwiLmstYnV0dG9uW2RhdGEtY29tbWFuZF1cIixfKHRoaXMuX2NvbW1hbmRDbGljayx0aGlzKSl9LF9jb21tYW5kQnlOYW1lOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPXRoaXMuY29sdW1ucztpZihlPWUudG9Mb3dlckNhc2UoKSxIW2VdKXJldHVybiBIW2VdO2Zvcih0PTA7ci5sZW5ndGg+dDt0KyspaWYoaT1yW3RdLmNvbW1hbmQpZm9yKG49MDtpLmxlbmd0aD5uO24rKylpZihpW25dLm5hbWUudG9Mb3dlckNhc2UoKT09ZSlyZXR1cm4gaVtuXX0sX2NvbW1hbmRDbGljazpmdW5jdGlvbihuKXt2YXIgaT1lKG4uY3VycmVudFRhcmdldCkscj1pLmF0dHIoXCJkYXRhLWNvbW1hbmRcIiksbz10aGlzLl9jb21tYW5kQnlOYW1lKHIpLGE9aS5jbG9zZXN0KFwidHJcIik7YT1hLmxlbmd0aD9hOnQsbyYmKG8ubWV0aG9kTmFtZT90aGlzW28ubWV0aG9kTmFtZV0oYSk6by5jbGljayYmby5jbGljay5jYWxsKHRoaXMsbikpfSxfY29sdW1uczpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5vcHRpb25zLmNvbHVtbnN8fFtdO3RoaXMuY29sdW1ucz15KHQsZnVuY3Rpb24oZSl7cmV0dXJuIGU9XCJzdHJpbmdcIj09dHlwZW9mIGU/e2ZpZWxkOmV9OmUscyh7ZW5jb2RlZDohMH0sZSl9KSxlPXcodGhpcy5jb2x1bW5zLGZ1bmN0aW9uKGUpe3JldHVybiBlLmV4cGFuZGFibGV9KSx0aGlzLmNvbHVtbnMubGVuZ3RoJiYhZS5sZW5ndGgmJih0aGlzLmNvbHVtbnNbMF0uZXhwYW5kYWJsZT0hMCksdGhpcy5fY29sdW1uVGVtcGxhdGVzKCksdGhpcy5fY29sdW1uQXR0cmlidXRlcygpfSxfY29sdW1uVGVtcGxhdGVzOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGk9dGhpcy5jb2x1bW5zO2ZvcihlPTAsdD1pLmxlbmd0aDt0PmU7ZSsrKW49aVtlXSxuLnRlbXBsYXRlJiYobi50ZW1wbGF0ZT1rZW5kby50ZW1wbGF0ZShuLnRlbXBsYXRlKSksbi5oZWFkZXJUZW1wbGF0ZSYmKG4uaGVhZGVyVGVtcGxhdGU9a2VuZG8udGVtcGxhdGUobi5oZWFkZXJUZW1wbGF0ZSkpLG4uZm9vdGVyVGVtcGxhdGUmJihuLmZvb3RlclRlbXBsYXRlPWtlbmRvLnRlbXBsYXRlKG4uZm9vdGVyVGVtcGxhdGUpKX0sX2NvbHVtbkF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLG8sYT10aGlzLmNvbHVtbnM7Zm9yKGU9MCx0PWEubGVuZ3RoO3Q+ZTtlKyspaWYobj1hW2VdLmF0dHJpYnV0ZXMsbiYmbi5zdHlsZSlmb3IoaT1uLnN0eWxlLnNwbGl0KFwiO1wiKSxuLnN0eWxlPXt9LHI9MDtpLmxlbmd0aD5yO3IrKylvPWlbcl0uc3BsaXQoXCI6XCIpLG4uc3R5bGVbb1swXV09b1sxXX0sX2xheW91dDpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLmVsZW1lbnQsaT10aGlzLl9jb2xncm91cCgpLHI9XCJcIjt0aGlzLndyYXBwZXI9bi5hZGRDbGFzcyhPLndyYXBwZXIpLHI9XCI8ZGl2IGNsYXNzPScjPSBncmlkSGVhZGVyICMnIHN0eWxlPVxcXCJwYWRkaW5nLXJpZ2h0OiBcIitrZW5kby5zdXBwb3J0LnNjcm9sbGJhcigpK1wicHg7XFxcIj48ZGl2IGNsYXNzPScjPSBncmlkSGVhZGVyV3JhcCAjJz48dGFibGUgcm9sZT0nZ3JpZCc+XCIraStcIjx0aGVhZCByb2xlPSdyb3dncm91cCcgLz48L3RhYmxlPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9JyM9IGdyaWRDb250ZW50V3JhcCAjJz48dGFibGUgcm9sZT0ndHJlZWdyaWQnIHRhYmluZGV4PScwJz5cIitpK1wiPHRib2R5IC8+PC90YWJsZT48L2Rpdj5cIix0aGlzLm9wdGlvbnMuc2Nyb2xsYWJsZXx8KHI9XCI8dGFibGUgcm9sZT0ndHJlZWdyaWQnIHRhYmluZGV4PScwJz5cIitpK1wiPHRoZWFkIGNsYXNzPScjPSBncmlkSGVhZGVyICMnIHJvbGU9J3Jvd2dyb3VwJyAvPjx0Ym9keSAvPjwvdGFibGU+XCIpLHRoaXMub3B0aW9ucy50b29sYmFyJiYocj1cIjxkaXYgY2xhc3M9JyM9IGhlYWRlciAjICM9IGdyaWRUb29sYmFyICMnIC8+XCIrciksbi5hcHBlbmQoa2VuZG8udGVtcGxhdGUocikoTykrXCI8ZGl2IGNsYXNzPSdrLXN0YXR1cycgLz5cIiksdGhpcy50b29sYmFyPW4uZmluZChTK08uZ3JpZFRvb2xiYXIpLGU9dGhpcy5oZWFkZXI9bi5maW5kKFMrTy5ncmlkSGVhZGVyKS5maW5kKFwidGhlYWRcIikuYWRkQmFjaygpLmZpbHRlcihcInRoZWFkXCIpLHRoaXMuX2hlYWRlclRyZWU9bmV3IGwuVHJlZSh0aGlzLmhlYWRlclswXSksdGhpcy5faGVhZGVyVHJlZS5yZW5kZXIoW2MoXCJ0clwiLHtyb2xlOlwicm93XCJ9LHRoaXMuX3RocygpKV0pLHQ9dGhpcy5jb2x1bW5zLHRoaXMuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czplLmZpbmQoXCJ0aC5rLWhlYWRlclwiKS5nZXQoKSxkYXRhOnkodCxmdW5jdGlvbihlKXtyZXR1cm57Y29sdW1uOmV9fSl9fSksdGhpcy5jb250ZW50PW4uZmluZChTK08uZ3JpZENvbnRlbnRXcmFwKS5maW5kKFwidGJvZHlcIiksdGhpcy5jb250ZW50Lmxlbmd0aHx8KHRoaXMuY29udGVudD1uLmZpbmQoXCJ0Ym9keVwiKSksdGhpcy5fY29udGVudFRyZWU9bmV3IGwuVHJlZSh0aGlzLmNvbnRlbnRbMF0pLHRoaXMuX3N0YXR1c1RyZWU9bmV3IGwuVHJlZSh0aGlzLmVsZW1lbnQuY2hpbGRyZW4oXCIuay1zdGF0dXNcIilbMF0pfSxfdG9vbGJhcjpmdW5jdGlvbigpe3ZhciB0LG49dGhpcy5vcHRpb25zLnRvb2xiYXIsaT10aGlzLnRvb2xiYXI7biYmKGUuaXNBcnJheShuKT8odD10aGlzLl9idWlsZENvbW1hbmRzKG4pLG5ldyBsLlRyZWUoaVswXSkucmVuZGVyKHQpKTppLmFwcGVuZChrZW5kby50ZW1wbGF0ZShuKSh7fSkpLHRoaXMuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czppLmdldCgpfX0pKX0sX3JlbmRlcjpmdW5jdGlvbihlKXt2YXIgdCxuLGk7ZT1lfHx7fSx0PXRoaXMub3B0aW9ucy5tZXNzYWdlcyxuPXRoaXMuZGF0YVNvdXJjZS5yb290Tm9kZXMoKSxpPXRoaXMuZGF0YVNvdXJjZS5hZ2dyZWdhdGVzKCksdGhpcy5fYWJzb2x1dGVJbmRleD0wLGUuZXJyb3I/dGhpcy5fc2hvd1N0YXR1cyhrZW5kby50ZW1wbGF0ZShcIiM6IG1lc3NhZ2VzLnJlcXVlc3RGYWlsZWQgIyA8YnV0dG9uIGNsYXNzPScjPSBidXR0b25DbGFzcyAjJz4jOiBtZXNzYWdlcy5yZXRyeSAjPC9idXR0b24+XCIpKHtidXR0b25DbGFzczpbTy5idXR0b24sTy5yZXRyeV0uam9pbihcIiBcIiksbWVzc2FnZXM6dH0pKTpuLmxlbmd0aD8odGhpcy5faGlkZVN0YXR1cygpLHRoaXMuX2NvbnRlbnRUcmVlLnJlbmRlcih0aGlzLl90cnMoe2FnZ3JlZ2F0ZXM6ZS5hZ2dyZWdhdGVzLGRhdGE6bix2aXNpYmxlOiEwLGxldmVsOjB9KSkpOnRoaXMuX3Nob3dTdGF0dXMoa2VuZG8uaHRtbEVuY29kZSh0Lm5vUm93cykpfSxfdGhzOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixvLGE9dGhpcy5jb2x1bW5zLHM9W107Zm9yKHI9MCxvPWEubGVuZ3RoO28+cjtyKyspZT1hW3JdLG49W10saT1bTy5oZWFkZXJdLHQ9ZS5oZWFkZXJUZW1wbGF0ZT9lLmhlYWRlclRlbXBsYXRlKHt9KTplLnRpdGxlfHxlLmZpZWxkfHxcIlwiLG4ucHVzaChlLnNvcnRhYmxlP2MoXCJhXCIse2hyZWY6XCIjXCIsY2xhc3NOYW1lOk8ubGlua30sW2QodCldKTplLmhlYWRlclRlbXBsYXRlP3UodCk6ZCh0KSkscy5wdXNoKGMoXCJ0aFwiLHtcImRhdGEtZmllbGRcIjplLmZpZWxkLFwiZGF0YS10aXRsZVwiOmUudGl0bGUsY2xhc3NOYW1lOmkuam9pbihcIiBcIikscm9sZTpcImNvbHVtbmhlYWRlclwifSxuKSk7cmV0dXJuIHN9LF9jb2xncm91cDpmdW5jdGlvbigpe3ZhciBlLHQsbixpPXRoaXMuY29sdW1ucyxyPVtdO2Zvcih0PTAsbj1pLmxlbmd0aDtuPnQ7dCsrKXIucHVzaChcIjxjb2wgXCIpLGU9aVt0XS53aWR0aCxlJiYwIT09cGFyc2VJbnQoZSwxMCkmJihyLnB1c2goXCJzdHlsZT0nd2lkdGg6XCIpLHIucHVzaChcInN0cmluZ1wiPT10eXBlb2YgZT9lOmUrXCJweFwiKSxyLnB1c2goXCInXCIpKSxyLnB1c2goXCIvPlwiKTtyZXR1cm5cIjxjb2xncm91cD5cIityLmpvaW4oXCJcIikrXCI8L2NvbGdyb3VwPlwifSxfdHJzOmZ1bmN0aW9uKGUpe3ZhciBuLGkscixvLGEscyxsLGMsZD1bXSx1PWUubGV2ZWwsaD1lLmRhdGEscD10aGlzLmRhdGFTb3VyY2UsZj1wLmFnZ3JlZ2F0ZXMoKXx8e307Zm9yKHM9MCxsPWgubGVuZ3RoO2w+cztzKyspcj1bXSxuPWhbc10sYT1uLmxvYWRlZCgpJiZwLmNoaWxkTm9kZXMobiksbz1hJiZhLmxlbmd0aCxpPXtcImRhdGEtdWlkXCI6bi51aWQscm9sZTpcInJvd1wifSxvJiYoaVtcImFyaWEtZXhwYW5kZWRcIl09ISFuLmV4cGFuZGVkKSx0aGlzLl9hYnNvbHV0ZUluZGV4JTIhPT0wJiZyLnB1c2goTy5hbHQpLGUudmlzaWJsZT90aGlzLl9hYnNvbHV0ZUluZGV4Kys6aS5zdHlsZT17ZGlzcGxheTpcIm5vbmVcIn0sbyYmci5wdXNoKE8uZ3JvdXApLG4uX2VkaXQmJnIucHVzaChcImstZ3JpZC1lZGl0LXJvd1wiKSxpLmNsYXNzTmFtZT1yLmpvaW4oXCIgXCIpfHx0LGQucHVzaCh0aGlzLl90ZHMoe21vZGVsOm4sYXR0cjppLGxldmVsOnV9LF8odGhpcy5fdGQsdGhpcykpKSxvJiYoZD1kLmNvbmNhdCh0aGlzLl90cnMoe3BhcmVudElkOm4uaWQsYWdncmVnYXRlczpmLHZpc2libGU6ZS52aXNpYmxlJiYhIW4uZXhwYW5kZWQsZGF0YTphLGxldmVsOnUrMX0pKSk7cmV0dXJuIHRoaXMuX2hhc0Zvb3RlclRlbXBsYXRlKCkmJihjPWUucGFyZW50SWR8fG51bGwsaT17Y2xhc3NOYW1lOk8uZm9vdGVyVGVtcGxhdGUsXCJkYXRhLXBhcmVudElkXCI6Y30sZS52aXNpYmxlfHwoaS5zdHlsZT17ZGlzcGxheTpcIm5vbmVcIn0pLGQucHVzaCh0aGlzLl90ZHMoe21vZGVsOmZbY10sYXR0cjppLGxldmVsOnV9LHRoaXMuX2Zvb3RlclRkKSkpLGR9LF9mb290ZXJUZDpmdW5jdGlvbih0KXt2YXIgaT1bXSxyPXQuY29sdW1uLG89dC5jb2x1bW4uZm9vdGVyVGVtcGxhdGV8fGUubm9vcCxhPXQubW9kZWxbci5maWVsZF18fHt9LGw9e3JvbGU6XCJncmlkY2VsbFwifTtyZXR1cm4gci5leHBhbmRhYmxlJiYoaT1pLmNvbmNhdChuKHtsZXZlbDp0LmxldmVsKzEsY2xhc3NOYW1lOk8uaWNvblBsYWNlSG9sZGVyfSkpKSxyLmF0dHJpYnV0ZXMmJnMobCxyLmF0dHJpYnV0ZXMpLGkucHVzaChkKG8oYSl8fFwiXCIpKSxjKFwidGRcIixsLGkpfSxfaGFzRm9vdGVyVGVtcGxhdGU6ZnVuY3Rpb24oKXtyZXR1cm4hIXcodGhpcy5jb2x1bW5zLGZ1bmN0aW9uKGUpe3JldHVybiBlLmZvb3RlclRlbXBsYXRlfSkubGVuZ3RofSxfdGRzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG89W10sYT10aGlzLmNvbHVtbnM7Zm9yKGk9MCxyPWEubGVuZ3RoO3I+aTtpKyspbj1hW2ldLG8ucHVzaCh0KHttb2RlbDplLm1vZGVsLGNvbHVtbjpuLGxldmVsOmUubGV2ZWx9KSk7cmV0dXJuIGMoXCJ0clwiLGUuYXR0cixvKX0sX3RkOmZ1bmN0aW9uKGUpe3ZhciB0LGk9W10scj1lLm1vZGVsLG89ZS5jb2x1bW4sYT17cm9sZTpcImdyaWRjZWxsXCJ9O3JldHVybiByLl9lZGl0JiZvLmZpZWxkJiZyLmVkaXRhYmxlKG8uZmllbGQpP2Fba2VuZG8uYXR0cihcImNvbnRhaW5lci1mb3JcIildPW8uZmllbGQ6KG8uZXhwYW5kYWJsZSYmKGk9bih7bGV2ZWw6ZS5sZXZlbCxjbGFzc05hbWU6Ty5pY29uUGxhY2VIb2xkZXJ9KSx0PVtPLmljb25dLHQucHVzaChyLmhhc0NoaWxkcmVuP3IuZXhwYW5kZWQ/Ty5pY29uQ29sbGFwc2U6Ty5pY29uRXhwYW5kOk8uaWNvbkhpZGRlbiksci5fZXJyb3I/dC5wdXNoKE8ucmVmcmVzaCk6IXIubG9hZGVkKCkmJnIuZXhwYW5kZWQmJnQucHVzaChPLmxvYWRpbmcpLGkucHVzaChjKFwic3BhblwiLHtjbGFzc05hbWU6dC5qb2luKFwiIFwiKX0pKSksby5hdHRyaWJ1dGVzJiZzKGEsby5hdHRyaWJ1dGVzKSxvLmNvbW1hbmQ/aT10aGlzLl9idWlsZENvbW1hbmRzKHIuX2VkaXQ/W1widXBkYXRlXCIsXCJjYW5jZWxlZGl0XCJdOm8uY29tbWFuZCk6aS5wdXNoKHRoaXMuX2NlbGxDb250ZW50KG8scikpKSxjKFwidGRcIixhLGkpfSxfY2VsbENvbnRlbnQ6ZnVuY3Rpb24oZSxuKXt2YXIgaTtyZXR1cm4gZS50ZW1wbGF0ZT9pPWUudGVtcGxhdGUobik6ZS5maWVsZCYmKGk9bi5nZXQoZS5maWVsZCksZS5mb3JtYXQmJihpPWtlbmRvLmZvcm1hdChlLmZvcm1hdCxpKSkpLHQ9PT1pJiYoaT1cIlwiKSxlLnRlbXBsYXRlfHwhZS5lbmNvZGVkP3UoaSk6ZChpKX0sX2J1aWxkQ29tbWFuZHM6ZnVuY3Rpb24oZSl7dmFyIHQsbj1bXTtmb3IodD0wO2UubGVuZ3RoPnQ7dCsrKW4ucHVzaCh0aGlzLl9idXR0b24oZVt0XSkpO3JldHVybiBufSxfYnV0dG9uOmZ1bmN0aW9uKGUpe3ZhciB0PShlLm5hbWV8fGUpLnRvTG93ZXJDYXNlKCksbj10aGlzLm9wdGlvbnMubWVzc2FnZXMuY29tbWFuZHNbdF0saT1bXTtyZXR1cm4gZT1zKHt9LEhbdF0se3RleHQ6bn0sZSksZS5pbWFnZUNsYXNzJiZpLnB1c2goYyhcInNwYW5cIix7Y2xhc3NOYW1lOltcImstaWNvblwiLGUuaW1hZ2VDbGFzc10uam9pbihcIiBcIil9KSksYyhcImJ1dHRvblwiLHtcImRhdGEtY29tbWFuZFwiOnQsY2xhc3NOYW1lOltcImstYnV0dG9uIGstYnV0dG9uLWljb250ZXh0XCIsZS5jbGFzc05hbWVdLmpvaW4oXCIgXCIpfSxpLmNvbmNhdChbZChlLnRleHR8fGUubmFtZSldKSl9LF9zb3J0YWJsZTpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbz10aGlzLmNvbHVtbnMsYT10aGlzLmhlYWRlci5maW5kKFwidGhcIiksbD1rZW5kby5hdHRyKFwiZmllbGRcIiksYz10aGlzLm9wdGlvbnMuc29ydGFibGU7aWYoYylmb3IoaT0wLHI9YS5sZW5ndGg7cj5pO2krKyllPW9baV0sZS5zb3J0YWJsZSE9PSExJiYhZS5jb21tYW5kJiZlLmZpZWxkJiYobj1hLmVxKGkpLHQ9bi5kYXRhKFwia2VuZG9Db2x1bW5Tb3J0ZXJcIiksdCYmdC5kZXN0cm95KCksbi5hdHRyKGwsZS5maWVsZCkua2VuZG9Db2x1bW5Tb3J0ZXIocyh7fSxjLGUuc29ydGFibGUse2RhdGFTb3VyY2U6dGhpcy5kYXRhU291cmNlfSkpKX0sX2ZpbHRlcmFibGU6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyPXRoaXMuaGVhZGVyLmZpbmQoXCJ0aFwiKSxvPXRoaXMub3B0aW9ucy5maWx0ZXJhYmxlO2lmKG8pZm9yKGk9XyhmdW5jdGlvbihlKXt0aGlzLnRyaWdnZXIoTCx7ZmllbGQ6ZS5maWVsZCxjb250YWluZXI6ZS5jb250YWluZXJ9KX0sdGhpcyksZT0wLHQ9ci5sZW5ndGg7dD5lO2UrKyluPXRoaXMuY29sdW1uc1tlXSxuLmNvbW1hbmR8fG4uZmlsdGVyYWJsZT09PSExfHxyLmVxKGUpLmtlbmRvRmlsdGVyTWVudShzKCEwLHt9LG8sbi5maWx0ZXJhYmxlLHtkYXRhU291cmNlOnRoaXMuZGF0YVNvdXJjZSxpbml0Oml9KSl9LF9jaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIoayl9LF9zZWxlY3RhYmxlOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLm9wdGlvbnMuc2VsZWN0YWJsZTt0JiYodD1rZW5kby51aS5TZWxlY3RhYmxlLnBhcnNlT3B0aW9ucyh0KSxlPVwiPnRyOm5vdCguay1mb290ZXItdGVtcGxhdGUpXCIsdC5jZWxsJiYoZSs9XCI+dGRcIiksdGhpcy5zZWxlY3RhYmxlPW5ldyBrZW5kby51aS5TZWxlY3RhYmxlKHRoaXMuY29udGVudCx7ZmlsdGVyOmUsYXJpYTohMCxtdWx0aXBsZTp0Lm11bHRpcGxlLGNoYW5nZTpfKHRoaXMuX2NoYW5nZSx0aGlzKX0pKX0sc2VsZWN0OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMuc2VsZWN0YWJsZTtyZXR1cm4gdD09PWV8fG4ub3B0aW9ucy5tdWx0aXBsZXx8KG4uY2xlYXIoKSxlPWUuZmlyc3QoKSksbi52YWx1ZShlKX0sY2xlYXJTZWxlY3Rpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNlbGVjdCgpO2UubGVuZ3RoJiYodGhpcy5zZWxlY3RhYmxlLmNsZWFyKCksdGhpcy50cmlnZ2VyKGspKX0sX2RhdGFTb3VyY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kYXRhU291cmNlO3QmJih0LnVuYmluZChrLHRoaXMuX3JlZnJlc2hIYW5kbGVyKSx0LnVuYmluZCh4LHRoaXMuX2Vycm9ySGFuZGxlciksdC51bmJpbmQoQyx0aGlzLl9wcm9ncmVzc0hhbmRsZXIpKSx0aGlzLl9yZWZyZXNoSGFuZGxlcj1fKHRoaXMucmVmcmVzaCx0aGlzKSx0aGlzLl9lcnJvckhhbmRsZXI9Xyh0aGlzLl9lcnJvcix0aGlzKSx0aGlzLl9wcm9ncmVzc0hhbmRsZXI9Xyh0aGlzLl9wcm9ncmVzcyx0aGlzKSx0PXRoaXMuZGF0YVNvdXJjZT1WLmNyZWF0ZShlKSx0LmJpbmQoayx0aGlzLl9yZWZyZXNoSGFuZGxlciksdC5iaW5kKHgsdGhpcy5fZXJyb3JIYW5kbGVyKSx0LmJpbmQoQyx0aGlzLl9wcm9ncmVzc0hhbmRsZXIpfSxzZXREYXRhU291cmNlOmZ1bmN0aW9uKGUpe3RoaXMuX2RhdGFTb3VyY2UoZSksdGhpcy5vcHRpb25zLmF1dG9CaW5kJiZ0aGlzLmRhdGFTb3VyY2UuZmV0Y2goKX0sZGF0YUl0ZW06ZnVuY3Rpb24odCl7dmFyIG49ZSh0KS5jbG9zZXN0KFwidHJcIiksaT10aGlzLmRhdGFTb3VyY2UuZ2V0QnlVaWQobi5hdHRyKGtlbmRvLmF0dHIoXCJ1aWRcIikpKTtyZXR1cm4gaX0sZWRpdFJvdzpmdW5jdGlvbihlKXt2YXIgdDt0eXBlb2YgZT09PWImJihlPXRoaXMuY29udGVudC5maW5kKGUpKSx0PXRoaXMuZGF0YUl0ZW0oZSksdCYmKFwicG9wdXBcIiE9dGhpcy5fZWRpdE1vZGUoKSYmKHQuX2VkaXQ9ITApLHRoaXMuX2NhbmNlbEVkaXRvcigpLHRoaXMuX3JlbmRlcigpLHRoaXMuX2NyZWF0ZUVkaXRvcih0KSx0aGlzLnRyaWdnZXIoRSx7Y29udGFpbmVyOnRoaXMuZWRpdG9yLmVsZW1lbnQsbW9kZWw6dH0pKX0sX2NhbmNlbEVkaXQ6ZnVuY3Rpb24oZSl7ZT1zKGUse2NvbnRhaW5lcjp0aGlzLmVkaXRvci53cmFwcGVyLG1vZGVsOnRoaXMuZWRpdG9yLm1vZGVsfSksdGhpcy50cmlnZ2VyKEIsZSl8fHRoaXMuY2FuY2VsUm93KCl9LGNhbmNlbFJvdzpmdW5jdGlvbigpe3RoaXMuX2NhbmNlbEVkaXRvcigpLHRoaXMuX3JlbmRlcigpfSxzYXZlUm93OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLmVkaXRvcjt0JiYoZT17bW9kZWw6dC5tb2RlbCxjb250YWluZXI6dC5lbGVtZW50fSx0LmVuZCgpJiYhdGhpcy50cmlnZ2VyKE0sZSkmJnRoaXMuZGF0YVNvdXJjZS5zeW5jKCkpfSxhZGRSb3c6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5lZGl0b3IsaT0wLHI9e307aWYoIW58fG4uZW5kKCkpcmV0dXJuIGU/KGUgaW5zdGFuY2VvZiBOfHwoZT10aGlzLmRhdGFJdGVtKGUpKSxyLnBhcmVudElkPWUuaWQsaT10aGlzLmRhdGFTb3VyY2UuaW5kZXhPZihlKSsxLGUuc2V0KFwiZXhwYW5kZWRcIiwhMCksdGhpcy5kYXRhU291cmNlLmxvYWQoZSkudGhlbihfKHRoaXMuX2luc2VydEF0LHRoaXMscixpKSksdCk6KHRoaXMuX2luc2VydEF0KHIsaSksdCl9LF9pbnNlcnRBdDpmdW5jdGlvbihlLHQpe2U9dGhpcy5kYXRhU291cmNlLmluc2VydCh0LGUpO3ZhciBuPXRoaXMuY29udGVudC5maW5kKFwiW1wiK2tlbmRvLmF0dHIoXCJ1aWRcIikrXCI9XCIrZS51aWQrXCJdXCIpO3RoaXMuZWRpdFJvdyhuKX0scmVtb3ZlUm93OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZGF0YUl0ZW0oZSksbj17bW9kZWw6dCxyb3c6ZX07dCYmIXRoaXMudHJpZ2dlcih6LG4pJiYodGhpcy5kYXRhU291cmNlLnJlbW92ZSh0KSx0aGlzLmRhdGFTb3VyY2Uuc3luYygpKX0sX2NhbmNlbEVkaXRvcjpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5lZGl0b3I7dCYmKGU9dC5tb2RlbCx0aGlzLl9kZXN0cm95RWRpdG9yKCksdGhpcy5kYXRhU291cmNlLmNhbmNlbENoYW5nZXMoZSksZS5fZWRpdD0hMSl9LF9kZXN0cm95RWRpdG9yOmZ1bmN0aW9uKCl7dGhpcy5lZGl0b3ImJih0aGlzLmVkaXRvci5jbG9zZSgpLHRoaXMuZWRpdG9yPW51bGwpfSxfY3JlYXRlRWRpdG9yOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY29udGVudC5maW5kKFwiW1wiK2tlbmRvLmF0dHIoXCJ1aWRcIikrXCI9XCIrZS51aWQrXCJdXCIpLG49dGhpcy5fZWRpdE1vZGUoKSxvPXtjb2x1bW5zOnRoaXMuY29sdW1ucyxtb2RlbDplLHRhcmdldDp0aGlzLGNsZWFyQ29udGFpbmVyOiExLHRlbXBsYXRlOnRoaXMub3B0aW9ucy5lZGl0YWJsZS50ZW1wbGF0ZX07XCJpbmxpbmVcIj09bj90aGlzLmVkaXRvcj1uZXcgaSh0LG8pOihzKG8se3dpbmRvdzp0aGlzLm9wdGlvbnMuZWRpdGFibGUud2luZG93LGNvbW1hbmRSZW5kZXJlcjpfKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1aWxkQ29tbWFuZHMoW1widXBkYXRlXCIsXCJjYW5jZWxlZGl0XCJdKX0sdGhpcyksZmllbGRSZW5kZXJlcjp0aGlzLl9jZWxsQ29udGVudCxzYXZlOl8odGhpcy5zYXZlUm93LHRoaXMpLGNhbmNlbDpfKHRoaXMuX2NhbmNlbEVkaXQsdGhpcyksYXBwZW5kVG86dGhpcy53cmFwcGVyfSksdGhpcy5lZGl0b3I9bmV3IHIodCxvKSl9LF9lZGl0TW9kZTpmdW5jdGlvbigpe3ZhciBlPVwiaW5saW5lXCIsdD10aGlzLm9wdGlvbnMuZWRpdGFibGU7cmV0dXJuIHQhPT0hMCYmKGU9XCJzdHJpbmdcIj09dHlwZW9mIHQ/dDp0Lm1vZGV8fGUpLGUudG9Mb3dlckNhc2UoKX19KSxrZW5kby5FeGNlbE1peGluJiZrZW5kby5FeGNlbE1peGluLmV4dGVuZChvLnByb3RvdHlwZSksa2VuZG8uUERGTWl4aW4mJmtlbmRvLlBERk1peGluLmV4dGVuZChvLnByb3RvdHlwZSkscyghMCxrZW5kby5kYXRhLHtUcmVlTGlzdERhdGFTb3VyY2U6VixUcmVlTGlzdE1vZGVsOk59KSxzKCEwLGtlbmRvLnVpLHtUcmVlTGlzdDpvfSksaC5wbHVnaW4obyl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7Zm9yKHZhciB0LG49MCxpPWUubGVuZ3RoO2k+bjtuKyspaWYoMj09ZVtuXS50eXBlKXt0PSEwO2JyZWFrfXQmJmUuc3BsaWNlKG4rMSwwLHtjYXB0aW9uOlwiS1BJc1wiLGRlZmF1bHRIaWVyYXJjaHk6XCJbS1BJc11cIixuYW1lOlwiS1BJc1wiLHVuaXF1ZU5hbWU6XCJbS1BJc11cIn0pfWZ1bmN0aW9uIG4oZSl7cmV0dXJue25hbWU6ZS51bmlxdWVOYW1lLHR5cGU6ZS50eXBlfX1mdW5jdGlvbiBpKGUpe2Zvcih2YXIgdD0wLG49ZS5sZW5ndGg7bj50O3QrKyllW3RdLnVuaXF1ZU5hbWU9ZVt0XS5uYW1lLGVbdF0udHlwZT1cImtwaVwiO3JldHVybiBlfWZ1bmN0aW9uIHIodCl7dmFyIG49ZSh0KS5jbG9zZXN0KFwiLmstcGl2b3Qtc2V0dGluZ1wiKTtyZXR1cm4gbi5sZW5ndGg/bi5kYXRhKFwia2VuZG9QaXZvdFNldHRpbmdUYXJnZXRcIik6bnVsbH1mdW5jdGlvbiBvKGUsdCxuKXtyZXR1cm57aGllcmFyY2h5VW5pcXVlTmFtZTplLHVuaXF1ZU5hbWU6dCxjYXB0aW9uOnQsbWVhc3VyZTp0LG5hbWU6dCx0eXBlOm59fWZ1bmN0aW9uIGEoZSl7dmFyIHQ9ZS5uYW1lO3JldHVybltvKHQsZS52YWx1ZSxcInZhbHVlXCIpLG8odCxlLmdvYWwsXCJnb2FsXCIpLG8odCxlLnN0YXR1cyxcInN0YXR1c1wiKSxvKHQsZS50cmVuZCxcInRyZW5kXCIpXX12YXIgcz13aW5kb3cua2VuZG8sbD1zLnVpLGM9bC5XaWRnZXQsZD1cIi5rZW5kb1Bpdm90Q29uZmlndXJhdG9yXCIsdT1cIm1vdXNlZW50ZXJcIitkK1wiIG1vdXNlbGVhdmVcIitkLGg9cy50ZW1wbGF0ZSgnPHAgY2xhc3M9XCJrLXJlc2V0XCI+PHNwYW4gY2xhc3M9XCJrLWljb24gIz1pY29uI1wiPjwvc3Bhbj4ke25hbWV9PC9wPjxkaXYgY2xhc3M9XCJrLWxpc3QtY29udGFpbmVyIGstcmVzZXRcIi8+JykscD1jLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe2MuZm4uaW5pdC5jYWxsKHRoaXMsZSx0KSx0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJrLXdpZGdldCBrLWZpZWxkc2VsZWN0b3Igay1hbHQgay1lZGl0LWZvcm0tY29udGFpbmVyXCIpLHRoaXMuX2RhdGFTb3VyY2UoKSx0aGlzLl9sYXlvdXQoKSx0aGlzLnJlZnJlc2goKSxzLm5vdGlmeSh0aGlzKX0sZXZlbnRzOltdLG9wdGlvbnM6e25hbWU6XCJQaXZvdENvbmZpZ3VyYXRvclwiLGZpbHRlcmFibGU6ITEsc29ydGFibGU6ITEsbWVzc2FnZXM6e21lYXN1cmVzOlwiRHJvcCBEYXRhIEZpZWxkcyBIZXJlXCIsY29sdW1uczpcIkRyb3AgQ29sdW1uIEZpZWxkcyBIZXJlXCIscm93czpcIkRyb3AgUm93cyBGaWVsZHMgSGVyZVwiLG1lYXN1cmVzTGFiZWw6XCJNZWFzdXJlc1wiLGNvbHVtbnNMYWJlbDpcIkNvbHVtbnNcIixyb3dzTGFiZWw6XCJSb3dzXCIsZmllbGRzTGFiZWw6XCJGaWVsZHNcIn19LF9kYXRhU291cmNlOmZ1bmN0aW9uKCl7dGhpcy5kYXRhU291cmNlJiZ0aGlzLl9yZWZyZXNoSGFuZGxlcj90aGlzLmRhdGFTb3VyY2UudW5iaW5kKFwiY2hhbmdlXCIsdGhpcy5fcmVmcmVzaEhhbmRsZXIpOnRoaXMuX3JlZnJlc2hIYW5kbGVyPWUucHJveHkodGhpcy5yZWZyZXNoLHRoaXMpLHRoaXMuZGF0YVNvdXJjZT1zLmRhdGEuUGl2b3REYXRhU291cmNlLmNyZWF0ZSh0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZSksdGhpcy5kYXRhU291cmNlLmJpbmQoXCJjaGFuZ2VcIix0aGlzLl9yZWZyZXNoSGFuZGxlcil9LHNldERhdGFTb3VyY2U6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zLmRhdGFTb3VyY2U9ZSx0aGlzLl9kYXRhU291cmNlKCksdGhpcy5tZWFzdXJlcyYmdGhpcy5tZWFzdXJlcy5zZXREYXRhU291cmNlKGUpLHRoaXMucm93cyYmdGhpcy5yb3dzLnNldERhdGFTb3VyY2UoZSksdGhpcy5jb2x1bW5zJiZ0aGlzLmNvbHVtbnMuc2V0RGF0YVNvdXJjZShlKSx0aGlzLnJlZnJlc2goKX0sX3RyZWVWaWV3RGF0YVNvdXJjZTpmdW5jdGlvbigpe3ZhciBuPXRoaXM7cmV0dXJuIHMuZGF0YS5IaWVyYXJjaGljYWxEYXRhU291cmNlLmNyZWF0ZSh7c2NoZW1hOnttb2RlbDp7aWQ6XCJ1bmlxdWVOYW1lXCIsaGFzQ2hpbGRyZW46ZnVuY3Rpb24oZSl7cmV0dXJuIShcImhpZXJhcmNoeVVuaXF1ZU5hbWVcImluIGV8fFwiYWdncmVnYXRvclwiaW4gZSl9fX0sdHJhbnNwb3J0OntyZWFkOmZ1bmN0aW9uKHIpe3ZhciBvLHMsbDtlLmlzRW1wdHlPYmplY3Qoci5kYXRhKT8obz1uLmRhdGFTb3VyY2Uuc2NoZW1hRGltZW5zaW9ucygpLG8uZG9uZShmdW5jdGlvbihlKXtuLmRhdGFTb3VyY2UuY3ViZUJ1aWxkZXJ8fHQoZSksci5zdWNjZXNzKGUpfSkuZmFpbChyLmVycm9yKSk6KHM9bi50cmVlVmlldy5kYXRhU291cmNlLmdldChyLmRhdGEudW5pcXVlTmFtZSksXCJbS1BJc11cIj09PXMudW5pcXVlTmFtZT8obD0hMCxvPW4uZGF0YVNvdXJjZS5zY2hlbWFLUElzKCksby5kb25lKGZ1bmN0aW9uKGUpe3Iuc3VjY2VzcyhpKGUpKX0pLmZhaWwoci5lcnJvcikpOlwia3BpXCI9PXMudHlwZSYmKGw9ITAsci5zdWNjZXNzKGEocykpKSxsfHwobz0yPT1zLnR5cGU/bi5kYXRhU291cmNlLnNjaGVtYU1lYXN1cmVzKCk6cy5kaW1lbnNpb25VbmlxdWVOYW1lP24uZGF0YVNvdXJjZS5zY2hlbWFMZXZlbHMoci5kYXRhLnVuaXF1ZU5hbWUpOm4uZGF0YVNvdXJjZS5zY2hlbWFIaWVyYXJjaGllcyhyLmRhdGEudW5pcXVlTmFtZSksby5kb25lKHIuc3VjY2VzcykuZmFpbChyLmVycm9yKSkpfX19KX0sX2xheW91dDpmdW5jdGlvbigpe3RoaXMuZm9ybT1lKCc8ZGl2IGNsYXNzPVwiay1jb2x1bW5zIGstc3RhdGUtZGVmYXVsdCBrLWZsb2F0d3JhcFwiLz4nKS5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpLHRoaXMuX2ZpZWxkcygpLHRoaXMuX3RhcmdldHMoKX0sX2ZpZWxkczpmdW5jdGlvbigpe3ZhciB0PWUoJzxkaXYgY2xhc3M9XCJrLXN0YXRlLWRlZmF1bHRcIj48cCBjbGFzcz1cImstcmVzZXRcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWktZ3JvdXBcIj48L3NwYW4+Jyt0aGlzLm9wdGlvbnMubWVzc2FnZXMuZmllbGRzTGFiZWwrXCI8L3A+PC9kaXY+XCIpLmFwcGVuZFRvKHRoaXMuZm9ybSksaT0nIyBpZiAoaXRlbS50eXBlID09IDIgfHwgaXRlbS51bmlxdWVOYW1lID09IFwiW0tQSXNdXCIpIHsgIzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS0jPSAoaXRlbS50eXBlID09IDIgPyBcInN1bVwiIDogXCJrcGlcIikgI1wiPjwvc3Bhbj4jIH0gZWxzZSBpZiAoaXRlbS50eXBlICYmIGl0ZW0udHlwZSAhPT0gXCJrcGlcIikgeyAjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWRpbWVuc2lvblwiPjwvc3Bhbj4jIH0gIyM6IGl0ZW0ubmFtZSAjJzt0aGlzLnRyZWVWaWV3PWUoXCI8ZGl2Lz5cIikuYXBwZW5kVG8odCkua2VuZG9UcmVlVmlldyh7dGVtcGxhdGU6aSxkYXRhVGV4dEZpZWxkOlwibmFtZVwiLGRyYWdBbmREcm9wOiEwLGF1dG9CaW5kOiExLGRhdGFTb3VyY2U6dGhpcy5fdHJlZVZpZXdEYXRhU291cmNlKCksZHJhZ3N0YXJ0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZGF0YUl0ZW0oZS5zb3VyY2VOb2RlKTsodC5oYXNDaGlsZHJlbnx8dC5hZ2dyZWdhdG9yfHx0Lm1lYXN1cmUpJiYyIT10LnR5cGUmJlwiW0tQSXNdXCIhPT10LnVuaXF1ZU5hbWV8fGUucHJldmVudERlZmF1bHQoKX0sZHJhZzpmdW5jdGlvbihlKXt2YXIgdD1cImstZGVuaWVkXCIsbj1yKGUuZHJvcFRhcmdldCk7biYmbi52YWxpZGF0ZSh0aGlzLmRhdGFJdGVtKGUuc291cmNlTm9kZSkpJiYodD1cImstYWRkXCIpLGUuc2V0U3RhdHVzQ2xhc3ModCl9LGRyb3A6ZnVuY3Rpb24oZSl7dmFyIHQsaSxvLHMsbCxjO2lmKGUucHJldmVudERlZmF1bHQoKSx0PXIoZS5kcm9wVGFyZ2V0KSxpPXRoaXMuZGF0YUl0ZW0oZS5zb3VyY2VOb2RlKSx0JiZ0LnZhbGlkYXRlKGkpKXtpZihjPWkuZGVmYXVsdEhpZXJhcmNoeXx8aS51bmlxdWVOYW1lLFwia3BpXCI9PT1pLnR5cGUpZm9yKGw9YShpKSxzPWwubGVuZ3RoLGM9W10sbz0wO3M+bztvKyspYy5wdXNoKG4obFtvXSkpO2Vsc2UgaS50eXBlJiYoYz1bbihpKV0pO3QuYWRkKGMpfX19KS5kYXRhKFwia2VuZG9UcmVlVmlld1wiKX0sX2NyZWF0ZVRhcmdldDpmdW5jdGlvbih0LG4pe3ZhciBpPSc8bGkgY2xhc3M9XCJrLWl0ZW0gay1oZWFkZXJcIiBkYXRhLScrcy5ucysnbmFtZT1cIiR7ZGF0YS5uYW1lfVwiPiR7ZGF0YS5uYW1lfScscj1uLnNvcnRhYmxlLG89XCJcIjtyZXR1cm4gciYmKG8rPVwiI2lmIChkYXRhLnNvcnRJY29uKSB7I1wiLG8rPSc8c3BhbiBjbGFzcz1cImstaWNvbiAke2RhdGEuc29ydEljb259IGstc2V0dGluZy1zb3J0XCI+PC9zcGFuPicsbys9XCIjfSNcIiksKG4uZmlsdGVyYWJsZXx8cikmJihvKz0nPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93aGVhZC1zIGstc2V0dGluZy1maWVsZG1lbnVcIj48L3NwYW4+Jyksbys9JzxzcGFuIGNsYXNzPVwiay1pY29uIGstc2ktY2xvc2Ugay1zZXR0aW5nLWRlbGV0ZVwiPjwvc3Bhbj4nLGkrPSc8c3BhbiBjbGFzcz1cImstZmllbGQtYWN0aW9uc1wiPicrbytcIjwvc3Bhbj48L2xpPlwiLG5ldyBzLnVpLlBpdm90U2V0dGluZ1RhcmdldCh0LGUuZXh0ZW5kKHtkYXRhU291cmNlOnRoaXMuZGF0YVNvdXJjZSxoaW50OmZ1bmN0aW9uKHQpe3ZhciBuPWUoJzxkaXYgY2xhc3M9XCJrLWZpZWxkc2VsZWN0b3JcIj48dWwgY2xhc3M9XCJrLWxpc3Qgay1yZXNldFwiPjwvdWw+PC9kaXY+Jyk7cmV0dXJuIG4uZmluZChcIi5rLWxpc3RcIikuYXBwZW5kKHQuY2xvbmUoKSksbn0sdGVtcGxhdGU6aSxlbXB0eVRlbXBsYXRlOic8bGkgY2xhc3M9XCJrLWl0ZW0gay1lbXB0eVwiPiR7ZGF0YX08L2xpPid9LG4pKX0sX3RhcmdldHM6ZnVuY3Rpb24oKXt2YXIgdD1lKCc8ZGl2IGNsYXNzPVwiay1zdGF0ZS1kZWZhdWx0XCIvPicpLmFwcGVuZFRvKHRoaXMuZm9ybSksbj1lKGgoe25hbWU6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLmNvbHVtbnNMYWJlbCxpY29uOlwiay1pLXZiYXJzXCJ9KSkuYXBwZW5kVG8odCksaT1lKCc8dWwgY2xhc3M9XCJrLXBpdm90LWNvbmZpZ3VyYXRvci1zZXR0aW5ncyBrLWxpc3Qgay1yZXNldFwiIC8+JykuYXBwZW5kVG8obi5sYXN0KCkpLHI9ZShoKHtuYW1lOnRoaXMub3B0aW9ucy5tZXNzYWdlcy5yb3dzTGFiZWwsaWNvbjpcImstaS1oYmFyc1wifSkpLmFwcGVuZFRvKHQpLG89ZSgnPHVsIGNsYXNzPVwiay1waXZvdC1jb25maWd1cmF0b3Itc2V0dGluZ3Mgay1saXN0IGstcmVzZXRcIiAvPicpLmFwcGVuZFRvKHIubGFzdCgpKSxhPWUoaCh7bmFtZTp0aGlzLm9wdGlvbnMubWVzc2FnZXMubWVhc3VyZXNMYWJlbCxpY29uOlwiay1pLXN1bVwifSkpLmFwcGVuZFRvKHQpLHM9ZSgnPHVsIGNsYXNzPVwiay1waXZvdC1jb25maWd1cmF0b3Itc2V0dGluZ3Mgay1saXN0IGstcmVzZXRcIiAvPicpLmFwcGVuZFRvKGEubGFzdCgpKSxsPXRoaXMub3B0aW9uczt0aGlzLmNvbHVtbnM9dGhpcy5fY3JlYXRlVGFyZ2V0KGkse2ZpbHRlcmFibGU6bC5maWx0ZXJhYmxlLHNvcnRhYmxlOmwuc29ydGFibGUsY29ubmVjdFdpdGg6byxtZXNzYWdlczp7ZW1wdHk6bC5tZXNzYWdlcy5jb2x1bW5zLGZpZWxkTWVudTpsLm1lc3NhZ2VzLmZpZWxkTWVudX19KSx0aGlzLnJvd3M9dGhpcy5fY3JlYXRlVGFyZ2V0KG8se2ZpbHRlcmFibGU6bC5maWx0ZXJhYmxlLHNldHRpbmc6XCJyb3dzXCIsY29ubmVjdFdpdGg6aSxtZXNzYWdlczp7ZW1wdHk6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLnJvd3MsZmllbGRNZW51OnRoaXMub3B0aW9ucy5tZXNzYWdlcy5maWVsZE1lbnV9fSksdGhpcy5tZWFzdXJlcz10aGlzLl9jcmVhdGVUYXJnZXQocyx7c2V0dGluZzpcIm1lYXN1cmVzXCIsbWVzc2FnZXM6e2VtcHR5OmwubWVzc2FnZXMubWVhc3VyZXN9fSksaS5hZGQobykuYWRkKHMpLm9uKHUsXCIuay1pdGVtOm5vdCguay1lbXB0eSlcIix0aGlzLl90b2dnbGVIb3Zlcil9LF90b2dnbGVIb3ZlcjpmdW5jdGlvbih0KXtlKHQuY3VycmVudFRhcmdldCkudG9nZ2xlQ2xhc3MoXCJrLXN0YXRlLWhvdmVyXCIsXCJtb3VzZWVudGVyXCI9PT10LnR5cGUpfSxfcmVzaXplOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMuZWxlbWVudCxpPXRoaXMub3B0aW9ucy5oZWlnaHQ7aSYmbi5pcyhcIjp2aXNpYmxlXCIpJiYobi5oZWlnaHQoaSksdD1uLmNoaWxkcmVuKFwiLmstY29sdW1uc1wiKS5jaGlsZHJlbihcImRpdi5rLXN0YXRlLWRlZmF1bHRcIiksZT0obi5vdXRlckhlaWdodCgpLW4uaW5uZXJIZWlnaHQoKSkvMixpPWktKHQub3V0ZXJIZWlnaHQoITApLXQuaGVpZ2h0KCkpLWUsdC5oZWlnaHQoaSkpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kYXRhU291cmNlOyhlLmN1YmVCdWlsZGVyfHx0aGlzLl9jdWJlIT09ZS5jdWJlKCl8fHRoaXMuX2NhdGFsb2chPT1lLmNhdGFsb2coKSkmJnRoaXMudHJlZVZpZXcuZGF0YVNvdXJjZS5mZXRjaCgpLHRoaXMuX2NhdGFsb2c9dGhpcy5kYXRhU291cmNlLmNhdGFsb2coKSx0aGlzLl9jdWJlPXRoaXMuZGF0YVNvdXJjZS5jdWJlKCksdGhpcy5fcmVzaXplKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtjLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLmRhdGFTb3VyY2UudW5iaW5kKFwiY2hhbmdlXCIsdGhpcy5fcmVmcmVzaEhhbmRsZXIpLHRoaXMuZm9ybS5maW5kKFwiLmstbGlzdFwiKS5vZmYoZCksdGhpcy5yb3dzLmRlc3Ryb3koKSx0aGlzLmNvbHVtbnMuZGVzdHJveSgpLHRoaXMubWVhc3VyZXMuZGVzdHJveSgpLHRoaXMudHJlZVZpZXcuZGVzdHJveSgpLHRoaXMuZWxlbWVudD1udWxsLHRoaXMuX3JlZnJlc2hIYW5kbGVyPW51bGx9fSk7bC5wbHVnaW4ocCl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKGUpe3ZhciB0PWs7dHJ5e3JldHVybiBrPWZ1bmN0aW9uKGUpe3JldHVybiBlKCl9LGUoKX1maW5hbGx5e2s9dH19ZnVuY3Rpb24gcihlLGkscixvKXtpW3JdPXQuY29weShlLiRldmFsKG8pKSxpW3JdPT09biYmby5tYXRjaCgvXlxcdyokLykmJkMud2FybihyK1wiIGF0dHJpYnV0ZSByZXNvbHZlZCB0byB1bmRlZmluZWQuIE1heWJlIHlvdSBtZWFudCB0byB1c2UgYSBzdHJpbmcgbGl0ZXJhbCBsaWtlOiAnXCIrbytcIic/XCIpfWZ1bmN0aW9uIG8oaSxvLHMsbCxjKXtmdW5jdGlvbiBkKCl7dmFyIG4sZCxoLGYsZyxtLHYsXyx5O3JldHVybiBzLmtSZWJpbmQmJihuPWUoZShvKVswXS5jbG9uZU5vZGUoITApKSksZD1sLnJlcGxhY2UoL15rZW5kby8sXCJcIiksaD10LmV4dGVuZCh7fSxzLmRlZmF1bHRPcHRpb25zLGkuJGV2YWwocy5rT3B0aW9uc3x8cy5vcHRpb25zKSksKGY9ZShvKVtsXSk/KGc9Zi53aWRnZXQucHJvdG90eXBlLm9wdGlvbnMsbT1mLndpZGdldC5wcm90b3R5cGUuZXZlbnRzLGUuZWFjaChzLGZ1bmN0aW9uKGUsdCl7dmFyIG4sbyxhLHM7XCJzb3VyY2VcIiE9PWUmJlwia0RhdGFTb3VyY2VcIiE9PWUmJihuPVwiZGF0YVwiK2UuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKSwwPT09ZS5pbmRleE9mKFwib25cIikmJihvPWUucmVwbGFjZSgvXm9uLi8sZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckF0KDIpLnRvTG93ZXJDYXNlKCl9KSxtLmluZGV4T2Yobyk+LTEmJihoW29dPXQpKSxnLmhhc093blByb3BlcnR5KG4pP3IoaSxoLG4sdCk6Zy5oYXNPd25Qcm9wZXJ0eShlKSYmIUFbZV0/cihpLGgsZSx0KTpEW2VdfHwoYT1lLm1hdGNoKC9eayhPbik/KFtBLVpdLiopLyksYSYmKHM9YVsyXS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSthWzJdLnNsaWNlKDEpLGFbMV0mJlwia09uTGFiZWxcIiE9ZT9oW3NdPXQ6KFwia09uTGFiZWxcIj09ZSYmKHM9XCJvbkxhYmVsXCIpLHIoaSxoLHMsdCkpKSkpfSksdj1zLmtEYXRhU291cmNlfHxzLnNvdXJjZSx2JiYoaC5kYXRhU291cmNlPVQoaSxvLGQsdikpLGguJGFuZ3VsYXI9W2ldLG8uaXMoXCJzZWxlY3RcIikmJiFmdW5jdGlvbih0KXtpZih0Lmxlbmd0aD4wKXt2YXIgbj1lKHRbMF0pOyEvXFxTLy50ZXN0KG4udGV4dCgpKSYmL15cXD8vLnRlc3Qobi52YWwoKSkmJm4ucmVtb3ZlKCl9fShvWzBdLm9wdGlvbnMpLF89Zi5jYWxsKG8sUz1oKS5kYXRhKGwpLGEoXyxpLHMsbCxjKSxpLiRlbWl0KFwia2VuZG9XaWRnZXRDcmVhdGVkXCIsXykseT11KGksXykscy5rUmViaW5kJiZwKF8saSxvLG4scy5rUmViaW5kLHkpLF8pOih3aW5kb3cuY29uc29sZS5lcnJvcihcIkNvdWxkIG5vdCBmaW5kOiBcIitsKSxudWxsKX12YXIgaCxmPXMua05nRGVsYXksZz1pLiRldmFsKGYpO3JldHVybiBmJiYhZz8oaD1pLiR3YXRjaChmLGZ1bmN0aW9uKGUsdCl7ZSE9PXQmJihoKCksby5yZW1vdmVBdHRyKHMuJGF0dHIua05nRGVsYXkpLGY9bnVsbCxrKGQpKX0pLG4pOmQoKX1mdW5jdGlvbiBhKGUsdCxuLGkscil7aWYobltyXSl7dmFyIG89YihuW3JdKS5hc3NpZ247aWYoIW8pdGhyb3cgRXJyb3IocitcIiBhdHRyaWJ1dGUgdXNlZCBidXQgZXhwcmVzc2lvbiBpbiBpdCBpcyBub3QgYXNzaWduYWJsZTogXCIrbltpXSk7byh0LGUpfX1mdW5jdGlvbiBzKGUpe3JldHVybi9jaGVja2JveHxyYWRpby9pLnRlc3QoZS5hdHRyKFwidHlwZVwiKSk/ZS5wcm9wKFwiY2hlY2tlZFwiKTplLnZhbCgpfWZ1bmN0aW9uIGwoZSl7cmV0dXJuIEUudGVzdChlWzBdLnRhZ05hbWUpfWZ1bmN0aW9uIGMoZSx0LGkscixvKXt2YXIgYSxjLGQsdTtlLnZhbHVlJiYoYT1sKGkpP2Z1bmN0aW9uKCl7cmV0dXJuIHMoaSl9OmZ1bmN0aW9uKCl7cmV0dXJuIGUudmFsdWUoKX0sci4kcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIHQ9ci4kdmlld1ZhbHVlO3Q9PT1uJiYodD1yLiRtb2RlbFZhbHVlKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZSYmZS52YWx1ZSh0KX0sMCl9LGM9ITEsbChpKSYmaS5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7Yz0hMH0pLGQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG47Y3x8KGM9ITEsZSYmbyYmKG49by4kcHJpc3RpbmUpLHIuJHNldFZpZXdWYWx1ZShhKCkpLGUmJihyLiRzZXRQcmlzdGluZSgpLG4mJm8uJHNldFByaXN0aW5lKCkpLG0odCkpfX0sZS5maXJzdChcImNoYW5nZVwiLGQoITEpKSxlLmZpcnN0KFwiZGF0YUJvdW5kXCIsZCghMCkpLHU9YSgpLHUhPXIuJHZpZXdWYWx1ZSYmKHIuJGlzRW1wdHkoci4kdmlld1ZhbHVlKT9udWxsIT11JiZcIlwiIT09dSYmdSE9ci4kdmlld1ZhbHVlJiZyLiRzZXRWaWV3VmFsdWUodSk6ZS52YWx1ZShyLiR2aWV3VmFsdWUpKSxyLiRzZXRQcmlzdGluZSgpKX1mdW5jdGlvbiBkKGUsdCxpKXt2YXIgcixvLGE7cmV0dXJuXCJmdW5jdGlvblwiIT10eXBlb2YgZS52YWx1ZT8oQy53YXJuKFwiay1uZy1tb2RlbCBzcGVjaWZpZWQgb24gYSB3aWRnZXQgdGhhdCBkb2VzIG5vdCBoYXZlIHRoZSB2YWx1ZSgpIG1ldGhvZDogXCIrZS5vcHRpb25zLm5hbWUpLG4pOihyPWIoaSksbz1yLmFzc2lnbixhPSExLGUuJGFuZ3VsYXJfc2V0TG9naWNWYWx1ZShyKHQpKSx0LiR3YXRjaChpLGZ1bmN0aW9uKHQsaSl7dD09PW4mJih0PW51bGwpLGF8fHQhPT1pJiZlLiRhbmd1bGFyX3NldExvZ2ljVmFsdWUodCl9KSxlLmZpcnN0KFwiY2hhbmdlXCIsZnVuY3Rpb24oKXthPSEwLHQuJGFwcGx5KGZ1bmN0aW9uKCl7byh0LGUuJGFuZ3VsYXJfZ2V0TG9naWNWYWx1ZSgpKX0pLGE9ITF9KSxuKX1mdW5jdGlvbiB1KGUsdCl7dmFyIG49ZS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7bigpLHQmJih0LmVsZW1lbnQmJih0PWcodC5lbGVtZW50KSx0JiZ0LmRlc3Ryb3koKSksdD1udWxsKX0pO3JldHVybiBufWZ1bmN0aW9uIGgodCxuKXtmdW5jdGlvbiBpKCl7YS5kaXNjb25uZWN0KCl9ZnVuY3Rpb24gcigpe2Eub2JzZXJ2ZShlKG4pWzBdLHthdHRyaWJ1dGVzOiEwfSl9dmFyIG8sYTt3aW5kb3cuTXV0YXRpb25PYnNlcnZlciYmdC53cmFwcGVyJiYobz1bXS5zbGljZS5jYWxsKGUobilbMF0uY2xhc3NMaXN0KSxhPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKG4pe2koKSx0JiYobi5mb3JFYWNoKGZ1bmN0aW9uKG4pe3ZhciBpLHI9ZSh0LndyYXBwZXIpWzBdO3N3aXRjaChuLmF0dHJpYnV0ZU5hbWUpe2Nhc2VcImNsYXNzXCI6aT1bXS5zbGljZS5jYWxsKG4udGFyZ2V0LmNsYXNzTGlzdCksaS5mb3JFYWNoKGZ1bmN0aW9uKGUpe28uaW5kZXhPZihlKTwwJiYoci5jbGFzc0xpc3QuYWRkKGUpLGtlbmRvLnVpLkNvbWJvQm94JiZ0IGluc3RhbmNlb2Yga2VuZG8udWkuQ29tYm9Cb3gmJnQuaW5wdXRbMF0uY2xhc3NMaXN0LmFkZChlKSl9KSxvLmZvckVhY2goZnVuY3Rpb24oZSl7aS5pbmRleE9mKGUpPDAmJihyLmNsYXNzTGlzdC5yZW1vdmUoZSksa2VuZG8udWkuQ29tYm9Cb3gmJnQgaW5zdGFuY2VvZiBrZW5kby51aS5Db21ib0JveCYmdC5pbnB1dFswXS5jbGFzc0xpc3QucmVtb3ZlKGUpKX0pLG89aTticmVhaztjYXNlXCJkaXNhYmxlZFwiOlwiZnVuY3Rpb25cIj09dHlwZW9mIHQuZW5hYmxlJiZ0LmVuYWJsZSghZShuLnRhcmdldCkuYXR0cihcImRpc2FibGVkXCIpKTticmVhaztjYXNlXCJyZWFkb25seVwiOlwiZnVuY3Rpb25cIj09dHlwZW9mIHQucmVhZG9ubHkmJnQucmVhZG9ubHkoISFlKG4udGFyZ2V0KS5hdHRyKFwicmVhZG9ubHlcIikpfX0pLHIoKSl9KSxyKCksdC5maXJzdChcImRlc3Ryb3lcIixpKSl9ZnVuY3Rpb24gcCh0LG4saSxyLG8sYSl7dmFyIHM9bi4kd2F0Y2gobyxmdW5jdGlvbihvLGwpe3ZhciBjLGQsdTtvIT09bCYmKHMoKSxjPWUodC53cmFwcGVyKVswXSxkPWUodC5lbGVtZW50KVswXSx1PWkuaW5qZWN0b3IoKS5nZXQoXCIkY29tcGlsZVwiKSx0LmRlc3Ryb3koKSxhJiZhKCksdD1udWxsLGMmJmQmJihjLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGQsYyksZShpKS5yZXBsYWNlV2l0aChyKSksdShyKShuKSl9LCEwKTttKG4pfWZ1bmN0aW9uIGYoZSxuKXtmdW5jdGlvbiBpKGUsdCl7eS5kaXJlY3RpdmUoZSxbXCJkaXJlY3RpdmVGYWN0b3J5XCIsZnVuY3Rpb24obil7cmV0dXJuIG4uY3JlYXRlKHQsZSl9XSl9dmFyIHIsbyxhLHMsbD1uP1wiTW9iaWxlXCI6XCJcIjtsKz1lLmZuLm9wdGlvbnMubmFtZSxyPWwsbz1cImtlbmRvXCIrbC5jaGFyQXQoMCkrbC5zdWJzdHIoMSkudG9Mb3dlckNhc2UoKSxsPVwia2VuZG9cIitsLGE9bC5yZXBsYWNlKC8oW0EtWl0pL2csXCItJDFcIiksLTE9PVAuaW5kZXhPZihsLnJlcGxhY2UoXCJrZW5kb1wiLFwiXCIpKSYmKHM9bD09PW8/W2xdOltsLG9dLHQuZm9yRWFjaChzLGZ1bmN0aW9uKGUpe3kuZGlyZWN0aXZlKGUsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIscmVwbGFjZTohMCx0ZW1wbGF0ZTpmdW5jdGlvbihlKXt2YXIgdD1NW3JdfHxcImRpdlwiO3JldHVyblwiPFwiK3QrXCIgXCIrYStcIj5cIitlLmh0bWwoKStcIjwvXCIrdCtcIj5cIn19fSl9KSksSS5pbmRleE9mKGwucmVwbGFjZShcImtlbmRvXCIsXCJcIikpPi0xfHwoaShsLGwpLG8hPWwmJmkobyxsKSl9ZnVuY3Rpb24gZyh0KXtyZXR1cm4gdD1lKHQpLGtlbmRvLndpZGdldEluc3RhbmNlKHQsa2VuZG8udWkpfHxrZW5kby53aWRnZXRJbnN0YW5jZSh0LGtlbmRvLm1vYmlsZS51aSl8fGtlbmRvLndpZGdldEluc3RhbmNlKHQsa2VuZG8uZGF0YXZpei51aSl9ZnVuY3Rpb24gbShlLHQpe3ZhciBuPWUuJHJvb3R8fGUsaT0vXlxcJChkaWdlc3R8YXBwbHkpJC8udGVzdChuLiQkcGhhc2UpO3Q/aT90KCk6bi4kYXBwbHkodCk6aXx8bi4kZGlnZXN0KCl9ZnVuY3Rpb24gdih0LG4pe3QuJGRlc3Ryb3koKSxuJiZlKG4pLnJlbW92ZURhdGEoXCIkc2NvcGVcIikucmVtb3ZlRGF0YShcIiRpc29sYXRlU2NvcGVcIikucmVtb3ZlRGF0YShcIiRpc29sYXRlU2NvcGVOb1RlbXBsYXRlXCIpLnJlbW92ZUNsYXNzKFwibmctc2NvcGVcIil9ZnVuY3Rpb24gXyhuLGkscil7dmFyIG8sYSxzO2lmKGUuaXNBcnJheShuKSlyZXR1cm4gdC5mb3JFYWNoKG4sZnVuY3Rpb24oZSl7XyhlLGkscil9KTtpZihcInN0cmluZ1wiPT10eXBlb2Ygbil7Zm9yKG89bi5zcGxpdChcIi5cIiksYT1rZW5kbzthJiZvLmxlbmd0aD4wOylhPWFbby5zaGlmdCgpXTtpZighYSlyZXR1cm4gei5wdXNoKFtuLGkscl0pLCExO249YS5wcm90b3R5cGV9cmV0dXJuIHM9bltpXSxuW2ldPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWFyZ3VtZW50cztyZXR1cm4gci5hcHBseSh7c2VsZjplLG5leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy5hcHBseShlLGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHM6dCl9fSx0KX0sITB9dmFyIHksdyxiLGsseCxDLFMsVCxELEEsRSxNLFAsSSx6LEY7dCYmKHk9dC5tb2R1bGUoXCJrZW5kby5kaXJlY3RpdmVzXCIsW10pLHc9dC5pbmplY3RvcihbXCJuZ1wiXSksYj13LmdldChcIiRwYXJzZVwiKSxrPXcuZ2V0KFwiJHRpbWVvdXRcIiksQz13LmdldChcIiRsb2dcIiksVD1mdW5jdGlvbigpe3ZhciBlPXtUcmVlTGlzdDpcIlRyZWVMaXN0RGF0YVNvdXJjZVwiLFRyZWVWaWV3OlwiSGllcmFyY2hpY2FsRGF0YVNvdXJjZVwiLFNjaGVkdWxlcjpcIlNjaGVkdWxlckRhdGFTb3VyY2VcIixQYW5lbEJhcjpcIiRQTEFJTlwiLE1lbnU6XCIkUExBSU5cIixDb250ZXh0TWVudTpcIiRQTEFJTlwifSx0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuXCIkUExBSU5cIj09dD9lOmtlbmRvLmRhdGFbdF0uY3JlYXRlKGUpfTtyZXR1cm4gZnVuY3Rpb24obixpLHIsbyl7dmFyIGE9ZVtyXXx8XCJEYXRhU291cmNlXCIscz10KG4uJGV2YWwobyksYSk7cmV0dXJuIG4uJHdhdGNoKG8sZnVuY3Rpb24oZSxuKXt2YXIgcixvO2UhPT1uJiYocj10KGUsYSksbz1nKGkpLG8mJlwiZnVuY3Rpb25cIj09dHlwZW9mIG8uc2V0RGF0YVNvdXJjZSYmby5zZXREYXRhU291cmNlKHIpKX0pLHN9fSgpLEQ9e2tEYXRhU291cmNlOiEwLGtPcHRpb25zOiEwLGtSZWJpbmQ6ITAsa05nTW9kZWw6ITAsa05nRGVsYXk6ITB9LEE9e25hbWU6ITAsdGl0bGU6ITAsc3R5bGU6ITB9LEU9L14oaW5wdXR8c2VsZWN0fHRleHRhcmVhKSQvaSx5LmZhY3RvcnkoXCJkaXJlY3RpdmVGYWN0b3J5XCIsW1wiJGNvbXBpbGVcIixmdW5jdGlvbih0KXt2YXIgbixpPTAscj0hMTtyZXR1cm4geD10LG49ZnVuY3Rpb24odCxuKXtyZXR1cm57cmVzdHJpY3Q6XCJBQ1wiLHJlcXVpcmU6W1wiP25nTW9kZWxcIixcIl4/Zm9ybVwiXSxzY29wZTohMSxjb250cm9sbGVyOltcIiRzY29wZVwiLFwiJGF0dHJzXCIsXCIkZWxlbWVudFwiLGZ1bmN0aW9uKGUsdCl7dGhpcy50ZW1wbGF0ZT1mdW5jdGlvbihlLG4pe3RbZV09a2VuZG8uc3RyaW5naWZ5KG4pfX1dLGxpbms6ZnVuY3Rpb24oYSxzLGwsdSl7dmFyIHA9dVswXSxmPXVbMV0sZz1lKHMpLG09dC5yZXBsYWNlKC8oW0EtWl0pL2csXCItJDFcIiksdj1cImhpZGRlblwiIT09Zy5jc3MoXCJ2aXNpYmlsaXR5XCIpO2cuYXR0cihtLGcuYXR0cihcImRhdGEtXCIrbSkpLGdbMF0ucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1cIittKSx2JiZnLmNzcyhcInZpc2liaWxpdHlcIixcImhpZGRlblwiKSwrK2ksayhmdW5jdGlvbigpe3YmJmcuY3NzKFwidmlzaWJpbGl0eVwiLFwiXCIpO3ZhciB1PW8oYSxzLGwsdCxuKTt1JiYocCYmYyh1LGEscyxwLGYpLGwua05nTW9kZWwmJmQodSxhLGwua05nTW9kZWwpLGgodSxzKSwtLWksMD09PWkmJihyfHwocj0hMCxhLiRlbWl0KFwia2VuZG9SZW5kZXJlZFwiKSxlKFwiZm9ybVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKS5jb250cm9sbGVyKFwiZm9ybVwiKTt0JiZ0LiRzZXRQcmlzdGluZSgpfSkpKSl9KX19fSx7Y3JlYXRlOm59fV0pLE09e0VkaXRvcjpcInRleHRhcmVhXCIsTnVtZXJpY1RleHRCb3g6XCJpbnB1dFwiLERhdGVQaWNrZXI6XCJpbnB1dFwiLERhdGVUaW1lUGlja2VyOlwiaW5wdXRcIixUaW1lUGlja2VyOlwiaW5wdXRcIixBdXRvQ29tcGxldGU6XCJpbnB1dFwiLENvbG9yUGlja2VyOlwiaW5wdXRcIixNYXNrZWRUZXh0Qm94OlwiaW5wdXRcIixNdWx0aVNlbGVjdDpcImlucHV0XCIsVXBsb2FkOlwiaW5wdXRcIixWYWxpZGF0b3I6XCJmb3JtXCIsQnV0dG9uOlwiYnV0dG9uXCIsTW9iaWxlQnV0dG9uOlwiYVwiLE1vYmlsZUJhY2tCdXR0b246XCJhXCIsTW9iaWxlRGV0YWlsQnV0dG9uOlwiYVwiLExpc3RWaWV3OlwidWxcIixNb2JpbGVMaXN0VmlldzpcInVsXCIsVHJlZVZpZXc6XCJ1bFwiLE1lbnU6XCJ1bFwiLENvbnRleHRNZW51OlwidWxcIixBY3Rpb25TaGVldDpcInVsXCJ9LFA9W1wiTW9iaWxlVmlld1wiLFwiTW9iaWxlTGF5b3V0XCIsXCJNb2JpbGVTcGxpdFZpZXdcIixcIk1vYmlsZVBhbmVcIixcIk1vYmlsZU1vZGFsVmlld1wiXSxJPVtcIk1vYmlsZUFwcGxpY2F0aW9uXCIsXCJNb2JpbGVWaWV3XCIsXCJNb2JpbGVNb2RhbFZpZXdcIixcIk1vYmlsZUxheW91dFwiLFwiTW9iaWxlQWN0aW9uU2hlZXRcIixcIk1vYmlsZURyYXdlclwiLFwiTW9iaWxlU3BsaXRWaWV3XCIsXCJNb2JpbGVQYW5lXCIsXCJNb2JpbGVTY3JvbGxWaWV3XCIsXCJNb2JpbGVQb3BPdmVyXCJdLHQuZm9yRWFjaChbXCJNb2JpbGVOYXZCYXJcIixcIk1vYmlsZUJ1dHRvblwiLFwiTW9iaWxlQmFja0J1dHRvblwiLFwiTW9iaWxlRGV0YWlsQnV0dG9uXCIsXCJNb2JpbGVUYWJTdHJpcFwiLFwiTW9iaWxlU2Nyb2xsVmlld1wiXSxmdW5jdGlvbihlKXtJLnB1c2goZSksZT1cImtlbmRvXCIrZSx5LmRpcmVjdGl2ZShlLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLGxpbms6ZnVuY3Rpb24odCxuLGkpe28odCxuLGksZSxlKX19fSl9KSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3QuZm9yRWFjaChuLGZ1bmN0aW9uKHQpe3QuZm4mJnQuZm4ub3B0aW9ucyYmdC5mbi5vcHRpb25zLm5hbWUmJi9eW0EtWl0vLnRlc3QodC5mbi5vcHRpb25zLm5hbWUpJiZmKHQsZSl9KX19dC5mb3JFYWNoKFtrZW5kby51aSxrZW5kby5kYXRhdml6JiZrZW5kby5kYXRhdml6LnVpXSxlKCExKSksdC5mb3JFYWNoKFtrZW5kby5tb2JpbGUmJmtlbmRvLm1vYmlsZS51aV0sZSghMCkpfSgpLHo9W10sXyhrZW5kby51aSxcInBsdWdpblwiLGZ1bmN0aW9uKHQsbixpKXt0aGlzLm5leHQoKSx6PWUuZ3JlcCh6LGZ1bmN0aW9uKGUpe3JldHVybiFfLmFwcGx5KG51bGwsZSl9KSxmKHQsXCJNb2JpbGVcIj09aSl9KSxfKFtcInVpLldpZGdldFwiLFwibW9iaWxlLnVpLldpZGdldFwiXSxcImFuZ3VsYXJcIixmdW5jdGlvbihyLG8pe3ZhciBhLHM9dGhpcy5zZWxmO3JldHVyblwiaW5pdFwiPT1yPyghbyYmUyYmKG89UyksUz1udWxsLG8mJm8uJGFuZ3VsYXImJihzLiRhbmd1bGFyX3Njb3BlPW8uJGFuZ3VsYXJbMF0scy4kYW5ndWxhcl9pbml0KHMuZWxlbWVudCxvKSksbik6KGE9cy4kYW5ndWxhcl9zY29wZSxhJiZpKGZ1bmN0aW9uKCl7dmFyIGksbCxjPW8oKSxkPWMuZWxlbWVudHMsdT1jLmRhdGE7aWYoZC5sZW5ndGg+MClzd2l0Y2gocil7Y2FzZVwiY2xlYW51cFwiOnQuZm9yRWFjaChkLGZ1bmN0aW9uKGUpe3ZhciBuPXQuZWxlbWVudChlKS5zY29wZSgpO24mJm4hPT1hJiZuLiQka2VuZG9TY29wZSYmdihuLGUpfSk7YnJlYWs7Y2FzZVwiY29tcGlsZVwiOmk9cy5lbGVtZW50LmluamVjdG9yKCksbD1pP2kuZ2V0KFwiJGNvbXBpbGVcIik6eCx0LmZvckVhY2goZCxmdW5jdGlvbihpLHIpe3ZhciBvLHM7Yy5zY29wZUZyb20/bz10LmVsZW1lbnQoYy5zY29wZUZyb20pLnNjb3BlKCk6KHM9dSYmdVtyXSxzIT09biYmKG89ZS5leHRlbmQoYS4kbmV3KCkscyksby4kJGtlbmRvU2NvcGU9ITApKSxsKGkpKG98fGEpfSksbShhKX19KSxuKX0pLF8oXCJ1aS5XaWRnZXRcIixcIiRhbmd1bGFyX2dldExvZ2ljVmFsdWVcIixmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGYudmFsdWUoKX0pLF8oXCJ1aS5XaWRnZXRcIixcIiRhbmd1bGFyX3NldExvZ2ljVmFsdWVcIixmdW5jdGlvbihlKXt0aGlzLnNlbGYudmFsdWUoZSl9KSxfKFwidWkuU2VsZWN0XCIsXCIkYW5ndWxhcl9nZXRMb2dpY1ZhbHVlXCIsZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNlbGYuZGF0YUl0ZW0oKTtyZXR1cm4gZT90aGlzLnNlbGYub3B0aW9ucy52YWx1ZVByaW1pdGl2ZT9lW3RoaXMuc2VsZi5vcHRpb25zLmRhdGFWYWx1ZUZpZWxkXTplLnRvSlNPTigpOm51bGx9KSxfKFwidWkuU2VsZWN0XCIsXCIkYW5ndWxhcl9zZXRMb2dpY1ZhbHVlXCIsZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zZWxmLG49dC5vcHRpb25zLGk9bi5kYXRhVmFsdWVGaWVsZDtpJiYhbi52YWx1ZVByaW1pdGl2ZSYmKGU9bnVsbCE9ZT9lW24uZGF0YVZhbHVlRmllbGR8fG4uZGF0YVRleHRGaWVsZF06bnVsbCksdC52YWx1ZShlKX0pLF8oXCJ1aS5NdWx0aVNlbGVjdFwiLFwiJGFuZ3VsYXJfZ2V0TG9naWNWYWx1ZVwiLGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5zZWxmLmRhdGFJdGVtcygpLG49dGhpcy5zZWxmLm9wdGlvbnMuZGF0YVZhbHVlRmllbGQ7cmV0dXJuIG4mJnRoaXMuc2VsZi5vcHRpb25zLnZhbHVlUHJpbWl0aXZlJiYodD1lLm1hcCh0LGZ1bmN0aW9uKGUpe3JldHVybiBlW25dfSkpLHR9KSxfKFwidWkuTXVsdGlTZWxlY3RcIixcIiRhbmd1bGFyX3NldExvZ2ljVmFsdWVcIixmdW5jdGlvbih0KXtudWxsPT10JiYodD1bXSk7dmFyIG49dGhpcy5zZWxmLGk9bi5vcHRpb25zLmRhdGFWYWx1ZUZpZWxkO2kmJiFuLm9wdGlvbnMudmFsdWVQcmltaXRpdmUmJih0PWUubWFwKHQsZnVuY3Rpb24oZSl7cmV0dXJuIGVbaV1cbn0pKSxuLnZhbHVlKHQpfSksXyhcInVpLkF1dG9Db21wbGV0ZVwiLFwiJGFuZ3VsYXJfZ2V0TG9naWNWYWx1ZVwiLGZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixvPXRoaXMuc2VsZi5vcHRpb25zLGE9dGhpcy5zZWxmLnZhbHVlKCkuc3BsaXQoby5zZXBhcmF0b3IpLHM9by52YWx1ZVByaW1pdGl2ZSxsPXRoaXMuc2VsZi5kYXRhU291cmNlLmRhdGEoKSxjPVtdO2ZvcihlPTAsdD1sLmxlbmd0aDt0PmU7ZSsrKWZvcihuPWxbZV0saT1vLmRhdGFUZXh0RmllbGQ/bltvLmRhdGFUZXh0RmllbGRdOm4scj0wO2EubGVuZ3RoPnI7cisrKWlmKGk9PT1hW3JdKXtjLnB1c2gocz9pOm4udG9KU09OKCkpO2JyZWFrfXJldHVybiBjfSksXyhcInVpLkF1dG9Db21wbGV0ZVwiLFwiJGFuZ3VsYXJfc2V0TG9naWNWYWx1ZVwiLGZ1bmN0aW9uKHQpe251bGw9PXQmJih0PVtdKTt2YXIgbj10aGlzLnNlbGYsaT1uLm9wdGlvbnMuZGF0YVRleHRGaWVsZDtpJiYhbi5vcHRpb25zLnZhbHVlUHJpbWl0aXZlJiYodD1lLm1hcCh0LGZ1bmN0aW9uKGUpe3JldHVybiBlW2ldfSkpLG4udmFsdWUodCl9KSxfKFwidWkuV2lkZ2V0XCIsXCIkYW5ndWxhcl9pbml0XCIsZnVuY3Rpb24odCxuKXt2YXIgaSxyLG8sYSxzPXRoaXMuc2VsZjtpZihuJiYhZS5pc0FycmF5KG4pKWZvcihpPXMuJGFuZ3VsYXJfc2NvcGUscj1zLmV2ZW50cy5sZW5ndGg7LS1yPj0wOylvPXMuZXZlbnRzW3JdLGE9bltvXSxhJiZcInN0cmluZ1wiPT10eXBlb2YgYSYmKG5bb109cy4kYW5ndWxhcl9tYWtlRXZlbnRIYW5kbGVyKG8saSxhKSl9KSxfKFwidWkuV2lkZ2V0XCIsXCIkYW5ndWxhcl9tYWtlRXZlbnRIYW5kbGVyXCIsZnVuY3Rpb24oZSx0LG4pe3JldHVybiBuPWIobiksZnVuY3Rpb24oZSl7bSh0LGZ1bmN0aW9uKCl7bih0LHtrZW5kb0V2ZW50OmV9KX0pfX0pLF8oW1widWkuR3JpZFwiLFwidWkuTGlzdFZpZXdcIixcInVpLlRyZWVWaWV3XCJdLFwiJGFuZ3VsYXJfbWFrZUV2ZW50SGFuZGxlclwiLGZ1bmN0aW9uKGUsbixpKXtyZXR1cm5cImNoYW5nZVwiIT1lP3RoaXMubmV4dCgpOihpPWIoaSksZnVuY3Rpb24oZSl7dmFyIHIsbyxhLHMsbCxjLGQsdSxoLHA9ZS5zZW5kZXIsZj1wLm9wdGlvbnMsZz17a2VuZG9FdmVudDplfTtmb3IodC5pc1N0cmluZyhmLnNlbGVjdGFibGUpJiYocj0tMSE9PWYuc2VsZWN0YWJsZS5pbmRleE9mKFwiY2VsbFwiKSxvPS0xIT09Zi5zZWxlY3RhYmxlLmluZGV4T2YoXCJtdWx0aXBsZVwiKSksYT1nLnNlbGVjdGVkPXRoaXMuc2VsZWN0KCkscz1nLmRhdGE9W10sbD1nLmNvbHVtbnM9W10sZD0wO2EubGVuZ3RoPmQ7ZCsrKXU9cj9hW2RdLnBhcmVudE5vZGU6YVtkXSxoPXAuZGF0YUl0ZW0odSkscj8odC5lbGVtZW50LmluQXJyYXkoaCxzKTwwJiZzLnB1c2goaCksYz10LmVsZW1lbnQoYVtkXSkuaW5kZXgoKSx0LmVsZW1lbnQuaW5BcnJheShjLGwpPDAmJmwucHVzaChjKSk6cy5wdXNoKGgpO298fChnLmRhdGFJdGVtPWcuZGF0YT1zWzBdLGcuc2VsZWN0ZWQ9YVswXSksbShuLGZ1bmN0aW9uKCl7aShuLGcpfSl9KX0pLF8oXCJ1aS5HcmlkXCIsXCIkYW5ndWxhcl9pbml0XCIsZnVuY3Rpb24oaSxyKXtpZih0aGlzLm5leHQoKSxyLmNvbHVtbnMpe3ZhciBvPWUuZXh0ZW5kKHt9LGtlbmRvLlRlbXBsYXRlLHIudGVtcGxhdGVTZXR0aW5ncyk7dC5mb3JFYWNoKHIuY29sdW1ucyxmdW5jdGlvbihlKXshZS5maWVsZHx8ZS50ZW1wbGF0ZXx8ZS5mb3JtYXR8fGUudmFsdWVzfHxlLmVuY29kZWQhPT1uJiYhZS5lbmNvZGVkfHwoZS50ZW1wbGF0ZT1cIjxzcGFuIG5nLWJpbmQ9J1wiK2tlbmRvLmV4cHIoZS5maWVsZCxcImRhdGFJdGVtXCIpK1wiJz4jOiBcIitrZW5kby5leHByKGUuZmllbGQsby5wYXJhbU5hbWUpK1wiIzwvc3Bhbj5cIil9KX19KSxfKFwibW9iaWxlLnVpLkJ1dHRvbkdyb3VwXCIsXCJ2YWx1ZVwiLGZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc2VsZjtyZXR1cm4gbnVsbCE9ZSYmKHQuc2VsZWN0KHQuZWxlbWVudC5jaGlsZHJlbihcImxpLmttLWJ1dHRvblwiKS5lcShlKSksdC50cmlnZ2VyKFwiY2hhbmdlXCIpLHQudHJpZ2dlcihcInNlbGVjdFwiLHtpbmRleDp0LnNlbGVjdGVkSW5kZXh9KSksdC5zZWxlY3RlZEluZGV4fSksXyhcIm1vYmlsZS51aS5CdXR0b25Hcm91cFwiLFwiX3NlbGVjdFwiLGZ1bmN0aW9uKCl7dGhpcy5uZXh0KCksdGhpcy5zZWxmLnRyaWdnZXIoXCJjaGFuZ2VcIil9KSx5LmRpcmVjdGl2ZShcImtlbmRvTW9iaWxlQXBwbGljYXRpb25cIixmdW5jdGlvbigpe3JldHVybnt0ZXJtaW5hbDohMCxsaW5rOmZ1bmN0aW9uKGUsdCxuKXtvKGUsdCxuLFwia2VuZG9Nb2JpbGVBcHBsaWNhdGlvblwiLFwia2VuZG9Nb2JpbGVBcHBsaWNhdGlvblwiKX19fSkuZGlyZWN0aXZlKFwia2VuZG9Nb2JpbGVWaWV3XCIsZnVuY3Rpb24oKXtyZXR1cm57c2NvcGU6ITAsbGluazp7cHJlOmZ1bmN0aW9uKGUsdCxuKXtuLmRlZmF1bHRPcHRpb25zPWUudmlld09wdGlvbnMsbi5faW5zdGFuY2U9byhlLHQsbixcImtlbmRvTW9iaWxlVmlld1wiLFwia2VuZG9Nb2JpbGVWaWV3XCIpfSxwb3N0OmZ1bmN0aW9uKGUsdCxuKXtuLl9pbnN0YW5jZS5fbGF5b3V0KCksbi5faW5zdGFuY2UuX3Njcm9sbGVyKCl9fX19KS5kaXJlY3RpdmUoXCJrZW5kb01vYmlsZURyYXdlclwiLGZ1bmN0aW9uKCl7cmV0dXJue3Njb3BlOiEwLGxpbms6e3ByZTpmdW5jdGlvbihlLHQsbil7bi5kZWZhdWx0T3B0aW9ucz1lLnZpZXdPcHRpb25zLG4uX2luc3RhbmNlPW8oZSx0LG4sXCJrZW5kb01vYmlsZURyYXdlclwiLFwia2VuZG9Nb2JpbGVEcmF3ZXJcIil9LHBvc3Q6ZnVuY3Rpb24oZSx0LG4pe24uX2luc3RhbmNlLl9sYXlvdXQoKSxuLl9pbnN0YW5jZS5fc2Nyb2xsZXIoKX19fX0pLmRpcmVjdGl2ZShcImtlbmRvTW9iaWxlTW9kYWxWaWV3XCIsZnVuY3Rpb24oKXtyZXR1cm57c2NvcGU6ITAsbGluazp7cHJlOmZ1bmN0aW9uKGUsdCxuKXtuLmRlZmF1bHRPcHRpb25zPWUudmlld09wdGlvbnMsbi5faW5zdGFuY2U9byhlLHQsbixcImtlbmRvTW9iaWxlTW9kYWxWaWV3XCIsXCJrZW5kb01vYmlsZU1vZGFsVmlld1wiKX0scG9zdDpmdW5jdGlvbihlLHQsbil7bi5faW5zdGFuY2UuX2xheW91dCgpLG4uX2luc3RhbmNlLl9zY3JvbGxlcigpfX19fSkuZGlyZWN0aXZlKFwia2VuZG9Nb2JpbGVTcGxpdFZpZXdcIixmdW5jdGlvbigpe3JldHVybnt0ZXJtaW5hbDohMCxsaW5rOntwcmU6ZnVuY3Rpb24oZSx0LG4pe24uZGVmYXVsdE9wdGlvbnM9ZS52aWV3T3B0aW9ucyxuLl9pbnN0YW5jZT1vKGUsdCxuLFwia2VuZG9Nb2JpbGVTcGxpdFZpZXdcIixcImtlbmRvTW9iaWxlU3BsaXRWaWV3XCIpfSxwb3N0OmZ1bmN0aW9uKGUsdCxuKXtuLl9pbnN0YW5jZS5fbGF5b3V0KCl9fX19KS5kaXJlY3RpdmUoXCJrZW5kb01vYmlsZVBhbmVcIixmdW5jdGlvbigpe3JldHVybnt0ZXJtaW5hbDohMCxsaW5rOntwcmU6ZnVuY3Rpb24oZSx0LG4pe24uZGVmYXVsdE9wdGlvbnM9ZS52aWV3T3B0aW9ucyxvKGUsdCxuLFwia2VuZG9Nb2JpbGVQYW5lXCIsXCJrZW5kb01vYmlsZVBhbmVcIil9fX19KS5kaXJlY3RpdmUoXCJrZW5kb01vYmlsZUxheW91dFwiLGZ1bmN0aW9uKCl7cmV0dXJue2xpbms6e3ByZTpmdW5jdGlvbihlLHQsbil7byhlLHQsbixcImtlbmRvTW9iaWxlTGF5b3V0XCIsXCJrZW5kb01vYmlsZUxheW91dFwiKX19fX0pLmRpcmVjdGl2ZShcImtlbmRvTW9iaWxlQWN0aW9uU2hlZXRcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixsaW5rOmZ1bmN0aW9uKHQsbixpKXtuLmZpbmQoXCJhW2stYWN0aW9uXVwiKS5lYWNoKGZ1bmN0aW9uKCl7ZSh0aGlzKS5hdHRyKFwiZGF0YS1cIitrZW5kby5ucytcImFjdGlvblwiLGUodGhpcykuYXR0cihcImstYWN0aW9uXCIpKX0pLG8odCxuLGksXCJrZW5kb01vYmlsZUFjdGlvblNoZWV0XCIsXCJrZW5kb01vYmlsZUFjdGlvblNoZWV0XCIpfX19KS5kaXJlY3RpdmUoXCJrZW5kb01vYmlsZVBvcE92ZXJcIixmdW5jdGlvbigpe3JldHVybnt0ZXJtaW5hbDohMCxsaW5rOntwcmU6ZnVuY3Rpb24oZSx0LG4pe24uZGVmYXVsdE9wdGlvbnM9ZS52aWV3T3B0aW9ucyxvKGUsdCxuLFwia2VuZG9Nb2JpbGVQb3BPdmVyXCIsXCJrZW5kb01vYmlsZVBvcE92ZXJcIil9fX19KS5kaXJlY3RpdmUoXCJrZW5kb1ZpZXdUaXRsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHJlcGxhY2U6ITAsdGVtcGxhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuXCI8c3BhbiBkYXRhLVwiK2tlbmRvLm5zK1wicm9sZT0ndmlldy10aXRsZSc+XCIrZS5odG1sKCkrXCI8L3NwYW4+XCJ9fX0pLmRpcmVjdGl2ZShcImtlbmRvTW9iaWxlSGVhZGVyXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIsbGluazpmdW5jdGlvbihlLHQpe3QuYWRkQ2xhc3MoXCJrbS1oZWFkZXJcIikuYXR0cihcImRhdGEtcm9sZVwiLFwiaGVhZGVyXCIpfX19KS5kaXJlY3RpdmUoXCJrZW5kb01vYmlsZUZvb3RlclwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLGxpbms6ZnVuY3Rpb24oZSx0KXt0LmFkZENsYXNzKFwia20tZm9vdGVyXCIpLmF0dHIoXCJkYXRhLXJvbGVcIixcImZvb3RlclwiKX19fSkuZGlyZWN0aXZlKFwia2VuZG9Nb2JpbGVTY3JvbGxWaWV3UGFnZVwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHJlcGxhY2U6ITAsdGVtcGxhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuXCI8ZGl2IGRhdGEtXCIra2VuZG8ubnMrXCJyb2xlPSdwYWdlJz5cIitlLmh0bWwoKStcIjwvZGl2PlwifX19KSx0LmZvckVhY2goW1wiYWxpZ25cIixcImljb25cIixcInJlbFwiLFwidHJhbnNpdGlvblwiLFwiYWN0aW9uc2hlZXRDb250ZXh0XCJdLGZ1bmN0aW9uKGUpe3ZhciB0PVwia1wiK2Uuc2xpY2UoMCwxKS50b1VwcGVyQ2FzZSgpK2Uuc2xpY2UoMSk7eS5kaXJlY3RpdmUodCxmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixwcmlvcml0eToyLGxpbms6ZnVuY3Rpb24obixpLHIpe2kuYXR0cihrZW5kby5hdHRyKGtlbmRvLnRvSHlwaGVucyhlKSksbi4kZXZhbChyW3RdKSl9fX0pfSksRj17VHJlZU1hcDpbXCJUZW1wbGF0ZVwiXSxNb2JpbGVMaXN0VmlldzpbXCJIZWFkZXJUZW1wbGF0ZVwiLFwiVGVtcGxhdGVcIl0sTW9iaWxlU2Nyb2xsVmlldzpbXCJFbXB0eVRlbXBsYXRlXCIsXCJUZW1wbGF0ZVwiXSxHcmlkOltcIkFsdFJvd1RlbXBsYXRlXCIsXCJEZXRhaWxUZW1wbGF0ZVwiLFwiUm93VGVtcGxhdGVcIl0sTGlzdFZpZXc6W1wiRWRpdFRlbXBsYXRlXCIsXCJUZW1wbGF0ZVwiLFwiQWx0VGVtcGxhdGVcIl0sUGFnZXI6W1wiU2VsZWN0VGVtcGxhdGVcIixcIkxpbmtUZW1wbGF0ZVwiXSxQaXZvdEdyaWQ6W1wiQ29sdW1uSGVhZGVyVGVtcGxhdGVcIixcIkRhdGFDZWxsVGVtcGxhdGVcIixcIlJvd0hlYWRlclRlbXBsYXRlXCJdLFNjaGVkdWxlcjpbXCJBbGxEYXlFdmVudFRlbXBsYXRlXCIsXCJEYXRlSGVhZGVyVGVtcGxhdGVcIixcIkV2ZW50VGVtcGxhdGVcIixcIk1ham9yVGltZUhlYWRlclRlbXBsYXRlXCIsXCJNaW5vclRpbWVIZWFkZXJUZW1wbGF0ZVwiXSxUcmVlVmlldzpbXCJUZW1wbGF0ZVwiXSxWYWxpZGF0b3I6W1wiRXJyb3JUZW1wbGF0ZVwiXX0sZnVuY3Rpb24oKXt2YXIgZT17fTt0LmZvckVhY2goRixmdW5jdGlvbihuLGkpe3QuZm9yRWFjaChuLGZ1bmN0aW9uKHQpe2VbdF18fChlW3RdPVtdKSxlW3RdLnB1c2goXCI/Xl5rZW5kb1wiK2kpfSl9KSx0LmZvckVhY2goZSxmdW5jdGlvbihlLHQpe3ZhciBuPVwia1wiK3QsaT1rZW5kby50b0h5cGhlbnMobik7eS5kaXJlY3RpdmUobixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOmUsdGVybWluYWw6ITAsY29tcGlsZTpmdW5jdGlvbih0LHIpe2lmKFwiXCI9PT1yW25dKXt0LnJlbW92ZUF0dHIoaSk7dmFyIG89dFswXS5vdXRlckhUTUw7cmV0dXJuIGZ1bmN0aW9uKHIsYSxzLGwpe2Zvcih2YXIgYzshYyYmbC5sZW5ndGg7KWM9bC5zaGlmdCgpO2M/KGMudGVtcGxhdGUobixvKSx0LnJlbW92ZSgpKTpDLndhcm4oaStcIiB3aXRob3V0IGEgbWF0Y2hpbmcgcGFyZW50IHdpZGdldCBmb3VuZC4gSXQgY2FuIGJlIG9uZSBvZiB0aGUgZm9sbG93aW5nOiBcIitlLmpvaW4oXCIsIFwiKSl9fX19fSl9KX0oKSl9KHdpbmRvdy5rZW5kby5qUXVlcnksd2luZG93LmFuZ3VsYXIpO3JldHVybiB3aW5kb3cua2VuZG99LHR5cGVvZiBkZWZpbmU9PVwiZnVuY3Rpb25cIiYmZGVmaW5lLmFtZD9kZWZpbmU6ZnVuY3Rpb24oXyxmKXtmKCl9KTsiLG51bGwsIihmdW5jdGlvbiAocHJvY2Vzcyl7XG7vu79wcm9jZXNzLmVudi5CUk9XU0VSSUZZU0hJTV9ESUFHTk9TVElDUyA9IDFcbi8vIFN0YXJ0IGxvYWRpbmcgdGhlIG1haW4gYXBwIGZpbGUuIFB1dCBhbGwgb2Zcbi8vIHlvdXIgYXBwbGljYXRpb24gbG9naWMgaW4gdGhlcmUuXG52YXIgJCA9IGpRdWVyeSA9IHJlcXVpcmUoJy4va2VuZG8vMjAxNC4zLjExMTkvanF1ZXJ5Lm1pbi5qcycpO1xudmFyIG0gPSByZXF1aXJlKCcuL21pdGhyaWwuanMnKTtcbi8vcmVxdWlyZSgnLi9ib290c3RyYXAubWluLmpzJyk7XHJcbnJlcXVpcmUoXCIuL3JpcHBsZXMubWluLmpzXCIpO1xyXG5yZXF1aXJlKFwiLi9tYXRlcmlhbC5taW4uanNcIik7XHJcbnJlcXVpcmUoJy4va2VuZG8vMjAxNC4zLjExMTkva2VuZG8ud2ViLm1pbi5qcycpO1xyXG5yZXF1aXJlKCcuL2pxdWVyeS5ob3RrZXlzLmpzJyk7XHJcbnJlcXVpcmUoJy4vdmVsb2NpdHkuanMnKTtcclxucmVxdWlyZSgnLi9jb3JlLmpzJyk7XHJcbnJlcXVpcmUoJy4vbGF5b3V0LmpzJyk7XHJcbnJlcXVpcmUoJy4vY29udHJvbHMuanMnKTtcclxuLy8gICAgICAgIDwhLS0gVG9wIGxldmVsIE1pdGhyaWwgUmVmZXJlbmNlcyAtLT5cbnJlcXVpcmUoJy4vYXBwL21vZHVsZXMvY2xlYXJzY3JlZW4ubW9kdWxlLmpzJyk7XG5yZXF1aXJlKCcuL2FwcC9hcHAucm91dGUuanMnKTtcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgJC5tYXRlcmlhbC5pbml0KCk7XHJcbn0pO1xufSkuY2FsbCh0aGlzLHJlcXVpcmUoJ19wcm9jZXNzJykpIiwiKGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQobil7cmV0dXJuIHR5cGVvZiBuLndoaWNoPT1cInVuZGVmaW5lZFwiPyEwOnR5cGVvZiBuLndoaWNoPT1cIm51bWJlclwiJiZuLndoaWNoPjA/IW4uY3RybEtleSYmIW4ubWV0YUtleSYmIW4uYWx0S2V5JiZuLndoaWNoIT04OiExfW4uZXhwcltcIjpcIl0ubm90bWRwcm9jPWZ1bmN0aW9uKHQpe3JldHVybiBuKHQpLmRhdGEoXCJtZHByb2NcIik/ITE6ITB9O24ubWF0ZXJpYWw9e29wdGlvbnM6e3dpdGhSaXBwbGVzOlwiLnRpbGUsLmJ0bjpub3QoLmJ0bi1saW5rKSwuY2FyZC1pbWFnZSwubmF2YmFyIGE6bm90KC53aXRob3V0cmlwcGxlKSwuZHJvcGRvd24tbWVudSBhLC5uYXYtdGFicyBhOm5vdCgud2l0aG91dHJpcHBsZSksLndpdGhyaXBwbGVcIixpbnB1dEVsZW1lbnRzOlwiaW5wdXQuZm9ybS1jb250cm9sLCB0ZXh0YXJlYS5mb3JtLWNvbnRyb2wsIHNlbGVjdC5mb3JtLWNvbnRyb2xcIixjaGVja2JveEVsZW1lbnRzOlwiLmNoZWNrYm94ID4gbGFiZWwgPiBpbnB1dFt0eXBlPWNoZWNrYm94XVwiLHJhZGlvRWxlbWVudHM6XCIucmFkaW8gPiBsYWJlbCA+IGlucHV0W3R5cGU9cmFkaW9dXCJ9LGNoZWNrYm94OmZ1bmN0aW9uKHQpe24odD90OnRoaXMub3B0aW9ucy5jaGVja2JveEVsZW1lbnRzKS5maWx0ZXIoXCI6bm90bWRwcm9jXCIpLmRhdGEoXCJtZHByb2NcIiwhMCkuYWZ0ZXIoXCI8c3BhbiBjbGFzcz1yaXBwbGU+PFxcL3NwYW4+PHNwYW4gY2xhc3M9Y2hlY2s+PFxcL3NwYW4+XCIpfSxyYWRpbzpmdW5jdGlvbih0KXtuKHQ/dDp0aGlzLm9wdGlvbnMucmFkaW9FbGVtZW50cykuZmlsdGVyKFwiOm5vdG1kcHJvY1wiKS5kYXRhKFwibWRwcm9jXCIsITApLmFmdGVyKFwiPHNwYW4gY2xhc3M9Y2lyY2xlPjxcXC9zcGFuPjxzcGFuIGNsYXNzPWNoZWNrPjxcXC9zcGFuPlwiKX0saW5wdXQ6ZnVuY3Rpb24oaSl7bihpP2k6dGhpcy5vcHRpb25zLmlucHV0RWxlbWVudHMpLmZpbHRlcihcIjpub3RtZHByb2NcIikuZGF0YShcIm1kcHJvY1wiLCEwKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9bih0aGlzKSxpLHI7dC53cmFwKFwiPGRpdiBjbGFzcz1mb3JtLWNvbnRyb2wtd3JhcHBlcj48XFwvZGl2PlwiKTt0LmFmdGVyKFwiPHNwYW4gY2xhc3M9bWF0ZXJpYWwtaW5wdXQ+PFxcL3NwYW4+XCIpO3QuaGFzQ2xhc3MoXCJmbG9hdGluZy1sYWJlbFwiKSYmKGk9dC5hdHRyKFwicGxhY2Vob2xkZXJcIiksdC5hdHRyKFwicGxhY2Vob2xkZXJcIixudWxsKS5yZW1vdmVDbGFzcyhcImZsb2F0aW5nLWxhYmVsXCIpLHQuYWZ0ZXIoXCI8ZGl2IGNsYXNzPWZsb2F0aW5nLWxhYmVsPlwiK2krXCI8XFwvZGl2PlwiKSk7KHQudmFsKCk9PT1udWxsfHx0LnZhbCgpPT1cInVuZGVmaW5lZFwifHx0LnZhbCgpPT09XCJcIikmJnQuYWRkQ2xhc3MoXCJlbXB0eVwiKTt0LnBhcmVudCgpLm5leHQoKS5pcyhcIlt0eXBlPWZpbGVdXCIpJiYodC5wYXJlbnQoKS5hZGRDbGFzcyhcImZpbGVpbnB1dFwiKSxyPXQucGFyZW50KCkubmV4dCgpLmRldGFjaCgpLHQuYWZ0ZXIocikpfSk7bihkb2N1bWVudCkub24oXCJjaGFuZ2VcIixcIi5jaGVja2JveCBpbnB1dFwiLGZ1bmN0aW9uKCl7bih0aGlzKS5ibHVyKCl9KS5vbihcImtleWRvd24gcGFzdGVcIixcIi5mb3JtLWNvbnRyb2xcIixmdW5jdGlvbihpKXt0KGkpJiZuKHRoaXMpLnJlbW92ZUNsYXNzKFwiZW1wdHlcIil9KS5vbihcImtleXVwIGNoYW5nZVwiLFwiLmZvcm0tY29udHJvbFwiLGZ1bmN0aW9uKCl7dmFyIHQ9bih0aGlzKTt0LnZhbCgpPT09XCJcIj90LmFkZENsYXNzKFwiZW1wdHlcIik6dC5yZW1vdmVDbGFzcyhcImVtcHR5XCIpfSkub24oXCJmb2N1c1wiLFwiLmZvcm0tY29udHJvbC13cmFwcGVyLmZpbGVpbnB1dFwiLGZ1bmN0aW9uKCl7bih0aGlzKS5maW5kKFwiaW5wdXRcIikuYWRkQ2xhc3MoXCJmb2N1c1wiKX0pLm9uKFwiYmx1clwiLFwiLmZvcm0tY29udHJvbC13cmFwcGVyLmZpbGVpbnB1dFwiLGZ1bmN0aW9uKCl7bih0aGlzKS5maW5kKFwiaW5wdXRcIikucmVtb3ZlQ2xhc3MoXCJmb2N1c1wiKX0pLm9uKFwiY2hhbmdlXCIsXCIuZm9ybS1jb250cm9sLXdyYXBwZXIuZmlsZWlucHV0IFt0eXBlPWZpbGVdXCIsZnVuY3Rpb24oKXt2YXIgdD1cIlwiO24uZWFjaChuKHRoaXMpWzBdLmZpbGVzLGZ1bmN0aW9uKG4saSl7Y29uc29sZS5sb2coaSk7dCs9aS5uYW1lK1wiLCBcIn0pO3Q9dC5zdWJzdHJpbmcoMCx0Lmxlbmd0aC0yKTt0P24odGhpcykucHJldigpLnJlbW92ZUNsYXNzKFwiZW1wdHlcIik6bih0aGlzKS5wcmV2KCkuYWRkQ2xhc3MoXCJlbXB0eVwiKTtuKHRoaXMpLnByZXYoKS52YWwodCl9KX0scmlwcGxlczpmdW5jdGlvbihuKXtyaXBwbGVzLmluaXQobj9uOnRoaXMub3B0aW9ucy53aXRoUmlwcGxlcyl9LGluaXQ6ZnVuY3Rpb24oKXt0aGlzLnJpcHBsZXMoKTt0aGlzLmlucHV0KCk7dGhpcy5jaGVja2JveCgpO3RoaXMucmFkaW8oKTtkb2N1bWVudC5hcnJpdmUmJmRvY3VtZW50LmFycml2ZShcImlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0XCIsZnVuY3Rpb24oKXtuLm1hdGVyaWFsLmluaXQoKX0pLGZ1bmN0aW9uKCl7dmFyIGk9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtuKFwiaW5wdXRcIikuZWFjaChmdW5jdGlvbigpe24odGhpcykudmFsKCkhPT1uKHRoaXMpLmF0dHIoXCJ2YWx1ZVwiKSYmbih0aGlzKS50cmlnZ2VyKFwiY2hhbmdlXCIpfSl9LDEwMCksdDtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChpKX0sMWU0KTtuKGRvY3VtZW50KS5vbihcImZvY3VzXCIsXCJpbnB1dFwiLGZ1bmN0aW9uKCl7dmFyIGk9bih0aGlzKS5wYXJlbnRzKFwiZm9ybVwiKS5maW5kKFwiaW5wdXRcIik7dD1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2kuZWFjaChmdW5jdGlvbigpe24odGhpcykudmFsKCkhPT1uKHRoaXMpLmF0dHIoXCJ2YWx1ZVwiKSYmbih0aGlzKS50cmlnZ2VyKFwiY2hhbmdlXCIpfSl9LDEwMCl9KS5vbihcImJsdXJcIixcImlucHV0XCIsZnVuY3Rpb24oKXtjbGVhckludGVydmFsKHQpfSl9KCl9fX0pKGpRdWVyeSk7XHJcbi8qXHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hdGVyaWFsLm1pbi5qcy5tYXBcclxuKi8iLCJ2YXIgbSA9IChmdW5jdGlvbiBhcHAod2luZG93LCB1bmRlZmluZWQpIHtcclxuXHR2YXIgT0JKRUNUID0gXCJbb2JqZWN0IE9iamVjdF1cIiwgQVJSQVkgPSBcIltvYmplY3QgQXJyYXldXCIsIFNUUklORyA9IFwiW29iamVjdCBTdHJpbmddXCIsIEZVTkNUSU9OID0gXCJmdW5jdGlvblwiO1xyXG5cdHZhciB0eXBlID0ge30udG9TdHJpbmc7XHJcblx0dmFyIHBhcnNlciA9IC8oPzooXnwjfFxcLikoW14jXFwuXFxbXFxdXSspKXwoXFxbLis/XFxdKS9nLCBhdHRyUGFyc2VyID0gL1xcWyguKz8pKD86PShcInwnfCkoLio/KVxcMik/XFxdLztcclxuXHR2YXIgdm9pZEVsZW1lbnRzID0gL14oQVJFQXxCQVNFfEJSfENPTHxDT01NQU5EfEVNQkVEfEhSfElNR3xJTlBVVHxLRVlHRU58TElOS3xNRVRBfFBBUkFNfFNPVVJDRXxUUkFDS3xXQlIpJC87XHJcblxyXG5cdC8vIGNhY2hpbmcgY29tbW9ubHkgdXNlZCB2YXJpYWJsZXNcclxuXHR2YXIgJGRvY3VtZW50LCAkbG9jYXRpb24sICRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUsICRjYW5jZWxBbmltYXRpb25GcmFtZTtcclxuXHJcblx0Ly8gc2VsZiBpbnZva2luZyBmdW5jdGlvbiBuZWVkZWQgYmVjYXVzZSBvZiB0aGUgd2F5IG1vY2tzIHdvcmtcclxuXHRmdW5jdGlvbiBpbml0aWFsaXplKHdpbmRvdyl7XHJcblx0XHQkZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQ7XHJcblx0XHQkbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XHJcblx0XHQkY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LmNsZWFyVGltZW91dDtcclxuXHRcdCRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5zZXRUaW1lb3V0O1xyXG5cdH1cclxuXHJcblx0aW5pdGlhbGl6ZSh3aW5kb3cpO1xyXG5cclxuXHJcblx0LypcclxuXHQgKiBAdHlwZWRlZiB7U3RyaW5nfSBUYWdcclxuXHQgKiBBIHN0cmluZyB0aGF0IGxvb2tzIGxpa2UgLT4gZGl2LmNsYXNzbmFtZSNpZFtwYXJhbT1vbmVdW3BhcmFtMj10d29dXHJcblx0ICogV2hpY2ggZGVzY3JpYmVzIGEgRE9NIG5vZGVcclxuXHQgKi9cclxuXHJcblx0LypcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB7VGFnfSBUaGUgRE9NIG5vZGUgdGFnXHJcblx0ICogQHBhcmFtIHtPYmplY3Q9W119IG9wdGlvbmFsIGtleS12YWx1ZSBwYWlycyB0byBiZSBtYXBwZWQgdG8gRE9NIGF0dHJzXHJcblx0ICogQHBhcmFtIHsuLi5tTm9kZT1bXX0gWmVybyBvciBtb3JlIE1pdGhyaWwgY2hpbGQgbm9kZXMuIENhbiBiZSBhbiBhcnJheSwgb3Igc3BsYXQgKG9wdGlvbmFsKVxyXG5cdCAqXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gbSgpIHtcclxuXHRcdHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpO1xyXG5cdFx0dmFyIGhhc0F0dHJzID0gYXJnc1sxXSAhPSBudWxsICYmIHR5cGUuY2FsbChhcmdzWzFdKSA9PSBPQkpFQ1QgJiYgIShcInRhZ1wiIGluIGFyZ3NbMV0pICYmICEoXCJzdWJ0cmVlXCIgaW4gYXJnc1sxXSk7XHJcblx0XHR2YXIgYXR0cnMgPSBoYXNBdHRycyA/IGFyZ3NbMV0gOiB7fTtcclxuXHRcdHZhciBjbGFzc0F0dHJOYW1lID0gXCJjbGFzc1wiIGluIGF0dHJzID8gXCJjbGFzc1wiIDogXCJjbGFzc05hbWVcIjtcclxuXHRcdHZhciBjZWxsID0ge3RhZzogXCJkaXZcIiwgYXR0cnM6IHt9fTtcclxuXHRcdHZhciBtYXRjaCwgY2xhc3NlcyA9IFtdO1xyXG5cdFx0aWYgKHR5cGUuY2FsbChhcmdzWzBdKSAhPSBTVFJJTkcpIHRocm93IG5ldyBFcnJvcihcInNlbGVjdG9yIGluIG0oc2VsZWN0b3IsIGF0dHJzLCBjaGlsZHJlbikgc2hvdWxkIGJlIGEgc3RyaW5nXCIpXHJcblx0XHR3aGlsZSAobWF0Y2ggPSBwYXJzZXIuZXhlYyhhcmdzWzBdKSkge1xyXG5cdFx0XHRpZiAobWF0Y2hbMV0gPT0gXCJcIiAmJiBtYXRjaFsyXSkgY2VsbC50YWcgPSBtYXRjaFsyXTtcclxuXHRcdFx0ZWxzZSBpZiAobWF0Y2hbMV0gPT0gXCIjXCIpIGNlbGwuYXR0cnMuaWQgPSBtYXRjaFsyXTtcclxuXHRcdFx0ZWxzZSBpZiAobWF0Y2hbMV0gPT0gXCIuXCIpIGNsYXNzZXMucHVzaChtYXRjaFsyXSk7XHJcblx0XHRcdGVsc2UgaWYgKG1hdGNoWzNdWzBdID09IFwiW1wiKSB7XHJcblx0XHRcdFx0dmFyIHBhaXIgPSBhdHRyUGFyc2VyLmV4ZWMobWF0Y2hbM10pO1xyXG5cdFx0XHRcdGNlbGwuYXR0cnNbcGFpclsxXV0gPSBwYWlyWzNdIHx8IChwYWlyWzJdID8gXCJcIiA6dHJ1ZSlcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0aWYgKGNsYXNzZXMubGVuZ3RoID4gMCkgY2VsbC5hdHRyc1tjbGFzc0F0dHJOYW1lXSA9IGNsYXNzZXMuam9pbihcIiBcIik7XHJcblxyXG5cclxuXHRcdHZhciBjaGlsZHJlbiA9IGhhc0F0dHJzID8gYXJnc1syXSA6IGFyZ3NbMV07XHJcblx0XHRpZiAodHlwZS5jYWxsKGNoaWxkcmVuKSA9PSBBUlJBWSkge1xyXG5cdFx0XHRjZWxsLmNoaWxkcmVuID0gY2hpbGRyZW5cclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRjZWxsLmNoaWxkcmVuID0gaGFzQXR0cnMgPyBhcmdzLnNsaWNlKDIpIDogYXJncy5zbGljZSgxKVxyXG5cdFx0fVxyXG5cclxuXHRcdGZvciAodmFyIGF0dHJOYW1lIGluIGF0dHJzKSB7XHJcblx0XHRcdGlmIChhdHRyTmFtZSA9PSBjbGFzc0F0dHJOYW1lKSBjZWxsLmF0dHJzW2F0dHJOYW1lXSA9IChjZWxsLmF0dHJzW2F0dHJOYW1lXSB8fCBcIlwiKSArIFwiIFwiICsgYXR0cnNbYXR0ck5hbWVdO1xyXG5cdFx0XHRlbHNlIGNlbGwuYXR0cnNbYXR0ck5hbWVdID0gYXR0cnNbYXR0ck5hbWVdXHJcblx0XHR9XHJcblx0XHRyZXR1cm4gY2VsbFxyXG5cdH1cclxuXHRmdW5jdGlvbiBidWlsZChwYXJlbnRFbGVtZW50LCBwYXJlbnRUYWcsIHBhcmVudENhY2hlLCBwYXJlbnRJbmRleCwgZGF0YSwgY2FjaGVkLCBzaG91bGRSZWF0dGFjaCwgaW5kZXgsIGVkaXRhYmxlLCBuYW1lc3BhY2UsIGNvbmZpZ3MpIHtcclxuXHRcdC8vYGJ1aWxkYCBpcyBhIHJlY3Vyc2l2ZSBmdW5jdGlvbiB0aGF0IG1hbmFnZXMgY3JlYXRpb24vZGlmZmluZy9yZW1vdmFsIG9mIERPTSBlbGVtZW50cyBiYXNlZCBvbiBjb21wYXJpc29uIGJldHdlZW4gYGRhdGFgIGFuZCBgY2FjaGVkYFxyXG5cdFx0Ly90aGUgZGlmZiBhbGdvcml0aG0gY2FuIGJlIHN1bW1hcml6ZWQgYXMgdGhpczpcclxuXHRcdC8vMSAtIGNvbXBhcmUgYGRhdGFgIGFuZCBgY2FjaGVkYFxyXG5cdFx0Ly8yIC0gaWYgdGhleSBhcmUgZGlmZmVyZW50LCBjb3B5IGBkYXRhYCB0byBgY2FjaGVkYCBhbmQgdXBkYXRlIHRoZSBET00gYmFzZWQgb24gd2hhdCB0aGUgZGlmZmVyZW5jZSBpc1xyXG5cdFx0Ly8zIC0gcmVjdXJzaXZlbHkgYXBwbHkgdGhpcyBhbGdvcml0aG0gZm9yIGV2ZXJ5IGFycmF5IGFuZCBmb3IgdGhlIGNoaWxkcmVuIG9mIGV2ZXJ5IHZpcnR1YWwgZWxlbWVudFxyXG5cclxuXHRcdC8vdGhlIGBjYWNoZWRgIGRhdGEgc3RydWN0dXJlIGlzIGVzc2VudGlhbGx5IHRoZSBzYW1lIGFzIHRoZSBwcmV2aW91cyByZWRyYXcncyBgZGF0YWAgZGF0YSBzdHJ1Y3R1cmUsIHdpdGggYSBmZXcgYWRkaXRpb25zOlxyXG5cdFx0Ly8tIGBjYWNoZWRgIGFsd2F5cyBoYXMgYSBwcm9wZXJ0eSBjYWxsZWQgYG5vZGVzYCwgd2hpY2ggaXMgYSBsaXN0IG9mIERPTSBlbGVtZW50cyB0aGF0IGNvcnJlc3BvbmQgdG8gdGhlIGRhdGEgcmVwcmVzZW50ZWQgYnkgdGhlIHJlc3BlY3RpdmUgdmlydHVhbCBlbGVtZW50XHJcblx0XHQvLy0gaW4gb3JkZXIgdG8gc3VwcG9ydCBhdHRhY2hpbmcgYG5vZGVzYCBhcyBhIHByb3BlcnR5IG9mIGBjYWNoZWRgLCBgY2FjaGVkYCBpcyAqYWx3YXlzKiBhIG5vbi1wcmltaXRpdmUgb2JqZWN0LCBpLmUuIGlmIHRoZSBkYXRhIHdhcyBhIHN0cmluZywgdGhlbiBjYWNoZWQgaXMgYSBTdHJpbmcgaW5zdGFuY2UuIElmIGRhdGEgd2FzIGBudWxsYCBvciBgdW5kZWZpbmVkYCwgY2FjaGVkIGlzIGBuZXcgU3RyaW5nKFwiXCIpYFxyXG5cdFx0Ly8tIGBjYWNoZWQgYWxzbyBoYXMgYSBgY29uZmlnQ29udGV4dGAgcHJvcGVydHksIHdoaWNoIGlzIHRoZSBzdGF0ZSBzdG9yYWdlIG9iamVjdCBleHBvc2VkIGJ5IGNvbmZpZyhlbGVtZW50LCBpc0luaXRpYWxpemVkLCBjb250ZXh0KVxyXG5cdFx0Ly8tIHdoZW4gYGNhY2hlZGAgaXMgYW4gT2JqZWN0LCBpdCByZXByZXNlbnRzIGEgdmlydHVhbCBlbGVtZW50OyB3aGVuIGl0J3MgYW4gQXJyYXksIGl0IHJlcHJlc2VudHMgYSBsaXN0IG9mIGVsZW1lbnRzOyB3aGVuIGl0J3MgYSBTdHJpbmcsIE51bWJlciBvciBCb29sZWFuLCBpdCByZXByZXNlbnRzIGEgdGV4dCBub2RlXHJcblxyXG5cdFx0Ly9gcGFyZW50RWxlbWVudGAgaXMgYSBET00gZWxlbWVudCB1c2VkIGZvciBXM0MgRE9NIEFQSSBjYWxsc1xyXG5cdFx0Ly9gcGFyZW50VGFnYCBpcyBvbmx5IHVzZWQgZm9yIGhhbmRsaW5nIGEgY29ybmVyIGNhc2UgZm9yIHRleHRhcmVhIHZhbHVlc1xyXG5cdFx0Ly9gcGFyZW50Q2FjaGVgIGlzIHVzZWQgdG8gcmVtb3ZlIG5vZGVzIGluIHNvbWUgbXVsdGktbm9kZSBjYXNlc1xyXG5cdFx0Ly9gcGFyZW50SW5kZXhgIGFuZCBgaW5kZXhgIGFyZSB1c2VkIHRvIGZpZ3VyZSBvdXQgdGhlIG9mZnNldCBvZiBub2Rlcy4gVGhleSdyZSBhcnRpZmFjdHMgZnJvbSBiZWZvcmUgYXJyYXlzIHN0YXJ0ZWQgYmVpbmcgZmxhdHRlbmVkIGFuZCBhcmUgbGlrZWx5IHJlZmFjdG9yYWJsZVxyXG5cdFx0Ly9gZGF0YWAgYW5kIGBjYWNoZWRgIGFyZSwgcmVzcGVjdGl2ZWx5LCB0aGUgbmV3IGFuZCBvbGQgbm9kZXMgYmVpbmcgZGlmZmVkXHJcblx0XHQvL2BzaG91bGRSZWF0dGFjaGAgaXMgYSBmbGFnIGluZGljYXRpbmcgd2hldGhlciBhIHBhcmVudCBub2RlIHdhcyByZWNyZWF0ZWQgKGlmIHNvLCBhbmQgaWYgdGhpcyBub2RlIGlzIHJldXNlZCwgdGhlbiB0aGlzIG5vZGUgbXVzdCByZWF0dGFjaCBpdHNlbGYgdG8gdGhlIG5ldyBwYXJlbnQpXHJcblx0XHQvL2BlZGl0YWJsZWAgaXMgYSBmbGFnIHRoYXQgaW5kaWNhdGVzIHdoZXRoZXIgYW4gYW5jZXN0b3IgaXMgY29udGVudGVkaXRhYmxlXHJcblx0XHQvL2BuYW1lc3BhY2VgIGluZGljYXRlcyB0aGUgY2xvc2VzdCBIVE1MIG5hbWVzcGFjZSBhcyBpdCBjYXNjYWRlcyBkb3duIGZyb20gYW4gYW5jZXN0b3JcclxuXHRcdC8vYGNvbmZpZ3NgIGlzIGEgbGlzdCBvZiBjb25maWcgZnVuY3Rpb25zIHRvIHJ1biBhZnRlciB0aGUgdG9wbW9zdCBgYnVpbGRgIGNhbGwgZmluaXNoZXMgcnVubmluZ1xyXG5cclxuXHRcdC8vdGhlcmUncyBsb2dpYyB0aGF0IHJlbGllcyBvbiB0aGUgYXNzdW1wdGlvbiB0aGF0IG51bGwgYW5kIHVuZGVmaW5lZCBkYXRhIGFyZSBlcXVpdmFsZW50IHRvIGVtcHR5IHN0cmluZ3NcclxuXHRcdC8vLSB0aGlzIHByZXZlbnRzIGxpZmVjeWNsZSBzdXJwcmlzZXMgZnJvbSBwcm9jZWR1cmFsIGhlbHBlcnMgdGhhdCBtaXggaW1wbGljaXQgYW5kIGV4cGxpY2l0IHJldHVybiBzdGF0ZW1lbnRzIChlLmcuIGZ1bmN0aW9uIGZvbygpIHtpZiAoY29uZCkgcmV0dXJuIG0oXCJkaXZcIil9XHJcblx0XHQvLy0gaXQgc2ltcGxpZmllcyBkaWZmaW5nIGNvZGVcclxuXHRcdGlmIChkYXRhID09IG51bGwpIGRhdGEgPSBcIlwiO1xyXG5cdFx0aWYgKGRhdGEuc3VidHJlZSA9PT0gXCJyZXRhaW5cIikgcmV0dXJuIGNhY2hlZDtcclxuXHRcdHZhciBjYWNoZWRUeXBlID0gdHlwZS5jYWxsKGNhY2hlZCksIGRhdGFUeXBlID0gdHlwZS5jYWxsKGRhdGEpO1xyXG5cdFx0aWYgKGNhY2hlZCA9PSBudWxsIHx8IGNhY2hlZFR5cGUgIT0gZGF0YVR5cGUpIHtcclxuXHRcdFx0aWYgKGNhY2hlZCAhPSBudWxsKSB7XHJcblx0XHRcdFx0aWYgKHBhcmVudENhY2hlICYmIHBhcmVudENhY2hlLm5vZGVzKSB7XHJcblx0XHRcdFx0XHR2YXIgb2Zmc2V0ID0gaW5kZXggLSBwYXJlbnRJbmRleDtcclxuXHRcdFx0XHRcdHZhciBlbmQgPSBvZmZzZXQgKyAoZGF0YVR5cGUgPT0gQVJSQVkgPyBkYXRhIDogY2FjaGVkLm5vZGVzKS5sZW5ndGg7XHJcblx0XHRcdFx0XHRjbGVhcihwYXJlbnRDYWNoZS5ub2Rlcy5zbGljZShvZmZzZXQsIGVuZCksIHBhcmVudENhY2hlLnNsaWNlKG9mZnNldCwgZW5kKSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSBpZiAoY2FjaGVkLm5vZGVzKSBjbGVhcihjYWNoZWQubm9kZXMsIGNhY2hlZClcclxuXHRcdFx0fVxyXG5cdFx0XHRjYWNoZWQgPSBuZXcgZGF0YS5jb25zdHJ1Y3RvcjtcclxuXHRcdFx0aWYgKGNhY2hlZC50YWcpIGNhY2hlZCA9IHt9OyAvL2lmIGNvbnN0cnVjdG9yIGNyZWF0ZXMgYSB2aXJ0dWFsIGRvbSBlbGVtZW50LCB1c2UgYSBibGFuayBvYmplY3QgYXMgdGhlIGJhc2UgY2FjaGVkIG5vZGUgaW5zdGVhZCBvZiBjb3B5aW5nIHRoZSB2aXJ0dWFsIGVsICgjMjc3KVxyXG5cdFx0XHRjYWNoZWQubm9kZXMgPSBbXVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChkYXRhVHlwZSA9PSBBUlJBWSkge1xyXG5cdFx0XHQvL3JlY3Vyc2l2ZWx5IGZsYXR0ZW4gYXJyYXlcclxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0aWYgKHR5cGUuY2FsbChkYXRhW2ldKSA9PSBBUlJBWSkge1xyXG5cdFx0XHRcdFx0ZGF0YSA9IGRhdGEuY29uY2F0LmFwcGx5KFtdLCBkYXRhKTtcclxuXHRcdFx0XHRcdGktLSAvL2NoZWNrIGN1cnJlbnQgaW5kZXggYWdhaW4gYW5kIGZsYXR0ZW4gdW50aWwgdGhlcmUgYXJlIG5vIG1vcmUgbmVzdGVkIGFycmF5cyBhdCB0aGF0IGluZGV4XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgbm9kZXMgPSBbXSwgaW50YWN0ID0gY2FjaGVkLmxlbmd0aCA9PT0gZGF0YS5sZW5ndGgsIHN1YkFycmF5Q291bnQgPSAwO1xyXG5cclxuXHRcdFx0Ly9rZXlzIGFsZ29yaXRobTogc29ydCBlbGVtZW50cyB3aXRob3V0IHJlY3JlYXRpbmcgdGhlbSBpZiBrZXlzIGFyZSBwcmVzZW50XHJcblx0XHRcdC8vMSkgY3JlYXRlIGEgbWFwIG9mIGFsbCBleGlzdGluZyBrZXlzLCBhbmQgbWFyayBhbGwgZm9yIGRlbGV0aW9uXHJcblx0XHRcdC8vMikgYWRkIG5ldyBrZXlzIHRvIG1hcCBhbmQgbWFyayB0aGVtIGZvciBhZGRpdGlvblxyXG5cdFx0XHQvLzMpIGlmIGtleSBleGlzdHMgaW4gbmV3IGxpc3QsIGNoYW5nZSBhY3Rpb24gZnJvbSBkZWxldGlvbiB0byBhIG1vdmVcclxuXHRcdFx0Ly80KSBmb3IgZWFjaCBrZXksIGhhbmRsZSBpdHMgY29ycmVzcG9uZGluZyBhY3Rpb24gYXMgbWFya2VkIGluIHByZXZpb3VzIHN0ZXBzXHJcblx0XHRcdC8vNSkgY29weSB1bmtleWVkIGl0ZW1zIGludG8gdGhlaXIgcmVzcGVjdGl2ZSBnYXBzXHJcblx0XHRcdHZhciBERUxFVElPTiA9IDEsIElOU0VSVElPTiA9IDIgLCBNT1ZFID0gMztcclxuXHRcdFx0dmFyIGV4aXN0aW5nID0ge30sIHVua2V5ZWQgPSBbXSwgc2hvdWxkTWFpbnRhaW5JZGVudGl0aWVzID0gZmFsc2U7XHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgY2FjaGVkLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0aWYgKGNhY2hlZFtpXSAmJiBjYWNoZWRbaV0uYXR0cnMgJiYgY2FjaGVkW2ldLmF0dHJzLmtleSAhPSBudWxsKSB7XHJcblx0XHRcdFx0XHRzaG91bGRNYWludGFpbklkZW50aXRpZXMgPSB0cnVlO1xyXG5cdFx0XHRcdFx0ZXhpc3RpbmdbY2FjaGVkW2ldLmF0dHJzLmtleV0gPSB7YWN0aW9uOiBERUxFVElPTiwgaW5kZXg6IGl9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChzaG91bGRNYWludGFpbklkZW50aXRpZXMpIHtcclxuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdGlmIChkYXRhW2ldICYmIGRhdGFbaV0uYXR0cnMpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGRhdGFbaV0uYXR0cnMua2V5ICE9IG51bGwpIHtcclxuXHRcdFx0XHRcdFx0XHR2YXIga2V5ID0gZGF0YVtpXS5hdHRycy5rZXk7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCFleGlzdGluZ1trZXldKSBleGlzdGluZ1trZXldID0ge2FjdGlvbjogSU5TRVJUSU9OLCBpbmRleDogaX07XHJcblx0XHRcdFx0XHRcdFx0ZWxzZSBleGlzdGluZ1trZXldID0ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YWN0aW9uOiBNT1ZFLFxyXG5cdFx0XHRcdFx0XHRcdFx0aW5kZXg6IGksXHJcblx0XHRcdFx0XHRcdFx0XHRmcm9tOiBleGlzdGluZ1trZXldLmluZGV4LFxyXG5cdFx0XHRcdFx0XHRcdFx0ZWxlbWVudDogcGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2V4aXN0aW5nW2tleV0uaW5kZXhdIHx8ICRkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGVsc2UgdW5rZXllZC5wdXNoKHtpbmRleDogaSwgZWxlbWVudDogcGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2ldIHx8ICRkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpfSlcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dmFyIGFjdGlvbnMgPSBPYmplY3Qua2V5cyhleGlzdGluZykubWFwKGZ1bmN0aW9uKGtleSkge3JldHVybiBleGlzdGluZ1trZXldfSk7XHJcblx0XHRcdFx0dmFyIGNoYW5nZXMgPSBhY3Rpb25zLnNvcnQoZnVuY3Rpb24oYSwgYikge3JldHVybiBhLmFjdGlvbiAtIGIuYWN0aW9uIHx8IGEuaW5kZXggLSBiLmluZGV4fSk7XHJcblx0XHRcdFx0dmFyIG5ld0NhY2hlZCA9IGNhY2hlZC5zbGljZSgpO1xyXG5cclxuXHRcdFx0XHRmb3IgKHZhciBpID0gMCwgY2hhbmdlOyBjaGFuZ2UgPSBjaGFuZ2VzW2ldOyBpKyspIHtcclxuXHRcdFx0XHRcdGlmIChjaGFuZ2UuYWN0aW9uID09IERFTEVUSU9OKSB7XHJcblx0XHRcdFx0XHRcdGNsZWFyKGNhY2hlZFtjaGFuZ2UuaW5kZXhdLm5vZGVzLCBjYWNoZWRbY2hhbmdlLmluZGV4XSk7XHJcblx0XHRcdFx0XHRcdG5ld0NhY2hlZC5zcGxpY2UoY2hhbmdlLmluZGV4LCAxKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKGNoYW5nZS5hY3Rpb24gPT0gSU5TRVJUSU9OKSB7XHJcblx0XHRcdFx0XHRcdHZhciBkdW1teSA9ICRkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0XHRcdFx0XHRkdW1teS5rZXkgPSBkYXRhW2NoYW5nZS5pbmRleF0uYXR0cnMua2V5O1xyXG5cdFx0XHRcdFx0XHRwYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShkdW1teSwgcGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2NoYW5nZS5pbmRleF0gfHwgbnVsbCk7XHJcblx0XHRcdFx0XHRcdG5ld0NhY2hlZC5zcGxpY2UoY2hhbmdlLmluZGV4LCAwLCB7YXR0cnM6IHtrZXk6IGRhdGFbY2hhbmdlLmluZGV4XS5hdHRycy5rZXl9LCBub2RlczogW2R1bW15XX0pXHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKGNoYW5nZS5hY3Rpb24gPT0gTU9WRSkge1xyXG5cdFx0XHRcdFx0XHRpZiAocGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2NoYW5nZS5pbmRleF0gIT09IGNoYW5nZS5lbGVtZW50ICYmIGNoYW5nZS5lbGVtZW50ICE9PSBudWxsKSB7XHJcblx0XHRcdFx0XHRcdFx0cGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoY2hhbmdlLmVsZW1lbnQsIHBhcmVudEVsZW1lbnQuY2hpbGROb2Rlc1tjaGFuZ2UuaW5kZXhdIHx8IG51bGwpXHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0bmV3Q2FjaGVkW2NoYW5nZS5pbmRleF0gPSBjYWNoZWRbY2hhbmdlLmZyb21dXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdW5rZXllZC5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0dmFyIGNoYW5nZSA9IHVua2V5ZWRbaV07XHJcblx0XHRcdFx0XHRwYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShjaGFuZ2UuZWxlbWVudCwgcGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2NoYW5nZS5pbmRleF0gfHwgbnVsbCk7XHJcblx0XHRcdFx0XHRuZXdDYWNoZWRbY2hhbmdlLmluZGV4XSA9IGNhY2hlZFtjaGFuZ2UuaW5kZXhdXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNhY2hlZCA9IG5ld0NhY2hlZDtcclxuXHRcdFx0XHRjYWNoZWQubm9kZXMgPSBbXTtcclxuXHRcdFx0XHRmb3IgKHZhciBpID0gMCwgY2hpbGQ7IGNoaWxkID0gcGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2ldOyBpKyspIGNhY2hlZC5ub2Rlcy5wdXNoKGNoaWxkKVxyXG5cdFx0XHR9XHJcblx0XHRcdC8vZW5kIGtleSBhbGdvcml0aG1cclxuXHJcblx0XHRcdGZvciAodmFyIGkgPSAwLCBjYWNoZUNvdW50ID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHQvL2RpZmYgZWFjaCBpdGVtIGluIHRoZSBhcnJheVxyXG5cdFx0XHRcdHZhciBpdGVtID0gYnVpbGQocGFyZW50RWxlbWVudCwgcGFyZW50VGFnLCBjYWNoZWQsIGluZGV4LCBkYXRhW2ldLCBjYWNoZWRbY2FjaGVDb3VudF0sIHNob3VsZFJlYXR0YWNoLCBpbmRleCArIHN1YkFycmF5Q291bnQgfHwgc3ViQXJyYXlDb3VudCwgZWRpdGFibGUsIG5hbWVzcGFjZSwgY29uZmlncyk7XHJcblx0XHRcdFx0aWYgKGl0ZW0gPT09IHVuZGVmaW5lZCkgY29udGludWU7XHJcblx0XHRcdFx0aWYgKCFpdGVtLm5vZGVzLmludGFjdCkgaW50YWN0ID0gZmFsc2U7XHJcblx0XHRcdFx0aWYgKGl0ZW0uJHRydXN0ZWQpIHtcclxuXHRcdFx0XHRcdC8vZml4IG9mZnNldCBvZiBuZXh0IGVsZW1lbnQgaWYgaXRlbSB3YXMgYSB0cnVzdGVkIHN0cmluZyB3LyBtb3JlIHRoYW4gb25lIGh0bWwgZWxlbWVudFxyXG5cdFx0XHRcdFx0Ly90aGUgZmlyc3QgY2xhdXNlIGluIHRoZSByZWdleHAgbWF0Y2hlcyBlbGVtZW50c1xyXG5cdFx0XHRcdFx0Ly90aGUgc2Vjb25kIGNsYXVzZSAoYWZ0ZXIgdGhlIHBpcGUpIG1hdGNoZXMgdGV4dCBub2Rlc1xyXG5cdFx0XHRcdFx0c3ViQXJyYXlDb3VudCArPSAoaXRlbS5tYXRjaCgvPFteXFwvXXxcXD5cXHMqW148XS9nKSB8fCBbXSkubGVuZ3RoXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Ugc3ViQXJyYXlDb3VudCArPSB0eXBlLmNhbGwoaXRlbSkgPT0gQVJSQVkgPyBpdGVtLmxlbmd0aCA6IDE7XHJcblx0XHRcdFx0Y2FjaGVkW2NhY2hlQ291bnQrK10gPSBpdGVtXHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCFpbnRhY3QpIHtcclxuXHRcdFx0XHQvL2RpZmYgdGhlIGFycmF5IGl0c2VsZlxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vdXBkYXRlIHRoZSBsaXN0IG9mIERPTSBub2RlcyBieSBjb2xsZWN0aW5nIHRoZSBub2RlcyBmcm9tIGVhY2ggaXRlbVxyXG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0aWYgKGNhY2hlZFtpXSAhPSBudWxsKSBub2Rlcy5wdXNoLmFwcGx5KG5vZGVzLCBjYWNoZWRbaV0ubm9kZXMpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vcmVtb3ZlIGl0ZW1zIGZyb20gdGhlIGVuZCBvZiB0aGUgYXJyYXkgaWYgdGhlIG5ldyBhcnJheSBpcyBzaG9ydGVyIHRoYW4gdGhlIG9sZCBvbmVcclxuXHRcdFx0XHQvL2lmIGVycm9ycyBldmVyIGhhcHBlbiBoZXJlLCB0aGUgaXNzdWUgaXMgbW9zdCBsaWtlbHkgYSBidWcgaW4gdGhlIGNvbnN0cnVjdGlvbiBvZiB0aGUgYGNhY2hlZGAgZGF0YSBzdHJ1Y3R1cmUgc29tZXdoZXJlIGVhcmxpZXIgaW4gdGhlIHByb2dyYW1cclxuXHRcdFx0XHRmb3IgKHZhciBpID0gMCwgbm9kZTsgbm9kZSA9IGNhY2hlZC5ub2Rlc1tpXTsgaSsrKSB7XHJcblx0XHRcdFx0XHRpZiAobm9kZS5wYXJlbnROb2RlICE9IG51bGwgJiYgbm9kZXMuaW5kZXhPZihub2RlKSA8IDApIGNsZWFyKFtub2RlXSwgW2NhY2hlZFtpXV0pXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmIChkYXRhLmxlbmd0aCA8IGNhY2hlZC5sZW5ndGgpIGNhY2hlZC5sZW5ndGggPSBkYXRhLmxlbmd0aDtcclxuXHRcdFx0XHRjYWNoZWQubm9kZXMgPSBub2Rlc1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmIChkYXRhICE9IG51bGwgJiYgZGF0YVR5cGUgPT0gT0JKRUNUKSB7XHJcblx0XHRcdGlmICghZGF0YS5hdHRycykgZGF0YS5hdHRycyA9IHt9O1xyXG5cdFx0XHRpZiAoIWNhY2hlZC5hdHRycykgY2FjaGVkLmF0dHJzID0ge307XHJcblxyXG5cdFx0XHR2YXIgZGF0YUF0dHJLZXlzID0gT2JqZWN0LmtleXMoZGF0YS5hdHRycyk7XHJcblx0XHRcdHZhciBoYXNLZXlzID0gZGF0YUF0dHJLZXlzLmxlbmd0aCA+IChcImtleVwiIGluIGRhdGEuYXR0cnMgPyAxIDogMClcclxuXHRcdFx0Ly9pZiBhbiBlbGVtZW50IGlzIGRpZmZlcmVudCBlbm91Z2ggZnJvbSB0aGUgb25lIGluIGNhY2hlLCByZWNyZWF0ZSBpdFxyXG5cdFx0XHRpZiAoZGF0YS50YWcgIT0gY2FjaGVkLnRhZyB8fCBkYXRhQXR0cktleXMuam9pbigpICE9IE9iamVjdC5rZXlzKGNhY2hlZC5hdHRycykuam9pbigpIHx8IGRhdGEuYXR0cnMuaWQgIT0gY2FjaGVkLmF0dHJzLmlkKSB7XHJcblx0XHRcdFx0aWYgKGNhY2hlZC5ub2Rlcy5sZW5ndGgpIGNsZWFyKGNhY2hlZC5ub2Rlcyk7XHJcblx0XHRcdFx0aWYgKGNhY2hlZC5jb25maWdDb250ZXh0ICYmIHR5cGVvZiBjYWNoZWQuY29uZmlnQ29udGV4dC5vbnVubG9hZCA9PSBGVU5DVElPTikgY2FjaGVkLmNvbmZpZ0NvbnRleHQub251bmxvYWQoKVxyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0eXBlLmNhbGwoZGF0YS50YWcpICE9IFNUUklORykgcmV0dXJuO1xyXG5cclxuXHRcdFx0dmFyIG5vZGUsIGlzTmV3ID0gY2FjaGVkLm5vZGVzLmxlbmd0aCA9PT0gMDtcclxuXHRcdFx0aWYgKGRhdGEuYXR0cnMueG1sbnMpIG5hbWVzcGFjZSA9IGRhdGEuYXR0cnMueG1sbnM7XHJcblx0XHRcdGVsc2UgaWYgKGRhdGEudGFnID09PSBcInN2Z1wiKSBuYW1lc3BhY2UgPSBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI7XHJcblx0XHRcdGVsc2UgaWYgKGRhdGEudGFnID09PSBcIm1hdGhcIikgbmFtZXNwYWNlID0gXCJodHRwOi8vd3d3LnczLm9yZy8xOTk4L01hdGgvTWF0aE1MXCI7XHJcblx0XHRcdGlmIChpc05ldykge1xyXG5cdFx0XHRcdGlmIChkYXRhLmF0dHJzLmlzKSBub2RlID0gbmFtZXNwYWNlID09PSB1bmRlZmluZWQgPyAkZG9jdW1lbnQuY3JlYXRlRWxlbWVudChkYXRhLnRhZywgZGF0YS5hdHRycy5pcykgOiAkZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZSwgZGF0YS50YWcsIGRhdGEuYXR0cnMuaXMpO1xyXG5cdFx0XHRcdGVsc2Ugbm9kZSA9IG5hbWVzcGFjZSA9PT0gdW5kZWZpbmVkID8gJGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZGF0YS50YWcpIDogJGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhuYW1lc3BhY2UsIGRhdGEudGFnKTtcclxuXHRcdFx0XHRjYWNoZWQgPSB7XHJcblx0XHRcdFx0XHR0YWc6IGRhdGEudGFnLFxyXG5cdFx0XHRcdFx0Ly9zZXQgYXR0cmlidXRlcyBmaXJzdCwgdGhlbiBjcmVhdGUgY2hpbGRyZW5cclxuXHRcdFx0XHRcdGF0dHJzOiBkYXRhQXR0cktleXMubGVuZ3RoID8gc2V0QXR0cmlidXRlcyhub2RlLCBkYXRhLnRhZywgZGF0YS5hdHRycywge30sIG5hbWVzcGFjZSkgOiB7fSxcclxuXHRcdFx0XHRcdGNoaWxkcmVuOiBkYXRhLmNoaWxkcmVuICE9IG51bGwgJiYgZGF0YS5jaGlsZHJlbi5sZW5ndGggPiAwID9cclxuXHRcdFx0XHRcdFx0YnVpbGQobm9kZSwgZGF0YS50YWcsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBkYXRhLmNoaWxkcmVuLCBjYWNoZWQuY2hpbGRyZW4sIHRydWUsIDAsIGRhdGEuYXR0cnMuY29udGVudGVkaXRhYmxlID8gbm9kZSA6IGVkaXRhYmxlLCBuYW1lc3BhY2UsIGNvbmZpZ3MpIDpcclxuXHRcdFx0XHRcdFx0ZGF0YS5jaGlsZHJlbixcclxuXHRcdFx0XHRcdG5vZGVzOiBbbm9kZV1cclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRcdGlmIChjYWNoZWQuY2hpbGRyZW4gJiYgIWNhY2hlZC5jaGlsZHJlbi5ub2RlcykgY2FjaGVkLmNoaWxkcmVuLm5vZGVzID0gW107XHJcblx0XHRcdFx0Ly9lZGdlIGNhc2U6IHNldHRpbmcgdmFsdWUgb24gPHNlbGVjdD4gZG9lc24ndCB3b3JrIGJlZm9yZSBjaGlsZHJlbiBleGlzdCwgc28gc2V0IGl0IGFnYWluIGFmdGVyIGNoaWxkcmVuIGhhdmUgYmVlbiBjcmVhdGVkXHJcblx0XHRcdFx0aWYgKGRhdGEudGFnID09IFwic2VsZWN0XCIgJiYgZGF0YS5hdHRycy52YWx1ZSkgc2V0QXR0cmlidXRlcyhub2RlLCBkYXRhLnRhZywge3ZhbHVlOiBkYXRhLmF0dHJzLnZhbHVlfSwge30sIG5hbWVzcGFjZSk7XHJcblx0XHRcdFx0cGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUobm9kZSwgcGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2luZGV4XSB8fCBudWxsKVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdG5vZGUgPSBjYWNoZWQubm9kZXNbMF07XHJcblx0XHRcdFx0aWYgKGRhdGFBdHRyS2V5cy5sZW5ndGgpIHNldEF0dHJpYnV0ZXMobm9kZSwgZGF0YS50YWcsIGRhdGEuYXR0cnMsIGNhY2hlZC5hdHRycywgbmFtZXNwYWNlKTtcclxuXHRcdFx0XHRjYWNoZWQuY2hpbGRyZW4gPSBidWlsZChub2RlLCBkYXRhLnRhZywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGRhdGEuY2hpbGRyZW4sIGNhY2hlZC5jaGlsZHJlbiwgZmFsc2UsIDAsIGRhdGEuYXR0cnMuY29udGVudGVkaXRhYmxlID8gbm9kZSA6IGVkaXRhYmxlLCBuYW1lc3BhY2UsIGNvbmZpZ3MpO1xyXG5cdFx0XHRcdGNhY2hlZC5ub2Rlcy5pbnRhY3QgPSB0cnVlO1xyXG5cdFx0XHRcdGlmIChzaG91bGRSZWF0dGFjaCA9PT0gdHJ1ZSAmJiBub2RlICE9IG51bGwpIHBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKG5vZGUsIHBhcmVudEVsZW1lbnQuY2hpbGROb2Rlc1tpbmRleF0gfHwgbnVsbClcclxuXHRcdFx0fVxyXG5cdFx0XHQvL3NjaGVkdWxlIGNvbmZpZ3MgdG8gYmUgY2FsbGVkLiBUaGV5IGFyZSBjYWxsZWQgYWZ0ZXIgYGJ1aWxkYCBmaW5pc2hlcyBydW5uaW5nXHJcblx0XHRcdGlmICh0eXBlb2YgZGF0YS5hdHRyc1tcImNvbmZpZ1wiXSA9PSBGVU5DVElPTikge1xyXG5cdFx0XHRcdHZhciBjb250ZXh0ID0gY2FjaGVkLmNvbmZpZ0NvbnRleHQgPSBjYWNoZWQuY29uZmlnQ29udGV4dCB8fCB7fTtcclxuXHJcblx0XHRcdFx0Ly8gYmluZFxyXG5cdFx0XHRcdHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uKGRhdGEsIGFyZ3MpIHtcclxuXHRcdFx0XHRcdHJldHVybiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGRhdGEuYXR0cnNbXCJjb25maWdcIl0uYXBwbHkoZGF0YSwgYXJncylcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRcdGNvbmZpZ3MucHVzaChjYWxsYmFjayhkYXRhLCBbbm9kZSwgIWlzTmV3LCBjb250ZXh0LCBjYWNoZWRdKSlcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAodHlwZW9mIGRhdGFUeXBlICE9IEZVTkNUSU9OKSB7XHJcblx0XHRcdC8vaGFuZGxlIHRleHQgbm9kZXNcclxuXHRcdFx0dmFyIG5vZGVzO1xyXG5cdFx0XHRpZiAoY2FjaGVkLm5vZGVzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRcdGlmIChkYXRhLiR0cnVzdGVkKSB7XHJcblx0XHRcdFx0XHRub2RlcyA9IGluamVjdEhUTUwocGFyZW50RWxlbWVudCwgaW5kZXgsIGRhdGEpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0bm9kZXMgPSBbJGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGRhdGEpXTtcclxuXHRcdFx0XHRcdGlmICghcGFyZW50RWxlbWVudC5ub2RlTmFtZS5tYXRjaCh2b2lkRWxlbWVudHMpKSBwYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShub2Rlc1swXSwgcGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2luZGV4XSB8fCBudWxsKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjYWNoZWQgPSBcInN0cmluZyBudW1iZXIgYm9vbGVhblwiLmluZGV4T2YodHlwZW9mIGRhdGEpID4gLTEgPyBuZXcgZGF0YS5jb25zdHJ1Y3RvcihkYXRhKSA6IGRhdGE7XHJcblx0XHRcdFx0Y2FjaGVkLm5vZGVzID0gbm9kZXNcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmIChjYWNoZWQudmFsdWVPZigpICE9PSBkYXRhLnZhbHVlT2YoKSB8fCBzaG91bGRSZWF0dGFjaCA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRcdG5vZGVzID0gY2FjaGVkLm5vZGVzO1xyXG5cdFx0XHRcdGlmICghZWRpdGFibGUgfHwgZWRpdGFibGUgIT09ICRkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB7XHJcblx0XHRcdFx0XHRpZiAoZGF0YS4kdHJ1c3RlZCkge1xyXG5cdFx0XHRcdFx0XHRjbGVhcihub2RlcywgY2FjaGVkKTtcclxuXHRcdFx0XHRcdFx0bm9kZXMgPSBpbmplY3RIVE1MKHBhcmVudEVsZW1lbnQsIGluZGV4LCBkYXRhKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdC8vY29ybmVyIGNhc2U6IHJlcGxhY2luZyB0aGUgbm9kZVZhbHVlIG9mIGEgdGV4dCBub2RlIHRoYXQgaXMgYSBjaGlsZCBvZiBhIHRleHRhcmVhL2NvbnRlbnRlZGl0YWJsZSBkb2Vzbid0IHdvcmtcclxuXHRcdFx0XHRcdFx0Ly93ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgdmFsdWUgcHJvcGVydHkgb2YgdGhlIHBhcmVudCB0ZXh0YXJlYSBvciB0aGUgaW5uZXJIVE1MIG9mIHRoZSBjb250ZW50ZWRpdGFibGUgZWxlbWVudCBpbnN0ZWFkXHJcblx0XHRcdFx0XHRcdGlmIChwYXJlbnRUYWcgPT09IFwidGV4dGFyZWFcIikgcGFyZW50RWxlbWVudC52YWx1ZSA9IGRhdGE7XHJcblx0XHRcdFx0XHRcdGVsc2UgaWYgKGVkaXRhYmxlKSBlZGl0YWJsZS5pbm5lckhUTUwgPSBkYXRhO1xyXG5cdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAobm9kZXNbMF0ubm9kZVR5cGUgPT0gMSB8fCBub2Rlcy5sZW5ndGggPiAxKSB7IC8vd2FzIGEgdHJ1c3RlZCBzdHJpbmdcclxuXHRcdFx0XHRcdFx0XHRcdGNsZWFyKGNhY2hlZC5ub2RlcywgY2FjaGVkKTtcclxuXHRcdFx0XHRcdFx0XHRcdG5vZGVzID0gWyRkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShkYXRhKV1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0cGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUobm9kZXNbMF0sIHBhcmVudEVsZW1lbnQuY2hpbGROb2Rlc1tpbmRleF0gfHwgbnVsbCk7XHJcblx0XHRcdFx0XHRcdFx0bm9kZXNbMF0ubm9kZVZhbHVlID0gZGF0YVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNhY2hlZCA9IG5ldyBkYXRhLmNvbnN0cnVjdG9yKGRhdGEpO1xyXG5cdFx0XHRcdGNhY2hlZC5ub2RlcyA9IG5vZGVzXHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBjYWNoZWQubm9kZXMuaW50YWN0ID0gdHJ1ZVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBjYWNoZWRcclxuXHR9XHJcblx0ZnVuY3Rpb24gc2V0QXR0cmlidXRlcyhub2RlLCB0YWcsIGRhdGFBdHRycywgY2FjaGVkQXR0cnMsIG5hbWVzcGFjZSkge1xyXG5cdFx0Zm9yICh2YXIgYXR0ck5hbWUgaW4gZGF0YUF0dHJzKSB7XHJcblx0XHRcdHZhciBkYXRhQXR0ciA9IGRhdGFBdHRyc1thdHRyTmFtZV07XHJcblx0XHRcdHZhciBjYWNoZWRBdHRyID0gY2FjaGVkQXR0cnNbYXR0ck5hbWVdO1xyXG5cdFx0XHRpZiAoIShhdHRyTmFtZSBpbiBjYWNoZWRBdHRycykgfHwgKGNhY2hlZEF0dHIgIT09IGRhdGFBdHRyKSkge1xyXG5cdFx0XHRcdGNhY2hlZEF0dHJzW2F0dHJOYW1lXSA9IGRhdGFBdHRyO1xyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHQvL2Bjb25maWdgIGlzbid0IGEgcmVhbCBhdHRyaWJ1dGVzLCBzbyBpZ25vcmUgaXRcclxuXHRcdFx0XHRcdC8vd2UgZG9uJ3QgaWdub3JlIGBrZXlgIGJlY2F1c2UgaXQgbXVzdCBiZSB1bmlxdWUgYW5kIGhhdmluZyBpdCBvbiB0aGUgRE9NIGhlbHBzIGRlYnVnZ2luZ1xyXG5cdFx0XHRcdFx0aWYgKGF0dHJOYW1lID09PSBcImNvbmZpZ1wiKSBjb250aW51ZTtcclxuXHRcdFx0XHRcdC8vaG9vayBldmVudCBoYW5kbGVycyB0byB0aGUgYXV0by1yZWRyYXdpbmcgc3lzdGVtXHJcblx0XHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgZGF0YUF0dHIgPT0gRlVOQ1RJT04gJiYgYXR0ck5hbWUuaW5kZXhPZihcIm9uXCIpID09IDApIHtcclxuXHRcdFx0XHRcdFx0bm9kZVthdHRyTmFtZV0gPSBhdXRvcmVkcmF3KGRhdGFBdHRyLCBub2RlKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly9oYW5kbGUgYHN0eWxlOiB7Li4ufWBcclxuXHRcdFx0XHRcdGVsc2UgaWYgKGF0dHJOYW1lID09PSBcInN0eWxlXCIgJiYgZGF0YUF0dHIgIT0gbnVsbCAmJiB0eXBlLmNhbGwoZGF0YUF0dHIpID09IE9CSkVDVCkge1xyXG5cdFx0XHRcdFx0XHRmb3IgKHZhciBydWxlIGluIGRhdGFBdHRyKSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKGNhY2hlZEF0dHIgPT0gbnVsbCB8fCBjYWNoZWRBdHRyW3J1bGVdICE9PSBkYXRhQXR0cltydWxlXSkgbm9kZS5zdHlsZVtydWxlXSA9IGRhdGFBdHRyW3J1bGVdXHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0Zm9yICh2YXIgcnVsZSBpbiBjYWNoZWRBdHRyKSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCEocnVsZSBpbiBkYXRhQXR0cikpIG5vZGUuc3R5bGVbcnVsZV0gPSBcIlwiXHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vaGFuZGxlIFNWR1xyXG5cdFx0XHRcdFx0ZWxzZSBpZiAobmFtZXNwYWNlICE9IG51bGwpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGF0dHJOYW1lID09PSBcImhyZWZcIikgbm9kZS5zZXRBdHRyaWJ1dGVOUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiwgXCJocmVmXCIsIGRhdGFBdHRyKTtcclxuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoYXR0ck5hbWUgPT09IFwiY2xhc3NOYW1lXCIpIG5vZGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgZGF0YUF0dHIpO1xyXG5cdFx0XHRcdFx0XHRlbHNlIG5vZGUuc2V0QXR0cmlidXRlKGF0dHJOYW1lLCBkYXRhQXR0cilcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vaGFuZGxlIGNhc2VzIHRoYXQgYXJlIHByb3BlcnRpZXMgKGJ1dCBpZ25vcmUgY2FzZXMgd2hlcmUgd2Ugc2hvdWxkIHVzZSBzZXRBdHRyaWJ1dGUgaW5zdGVhZClcclxuXHRcdFx0XHRcdC8vLSBsaXN0IGFuZCBmb3JtIGFyZSB0eXBpY2FsbHkgdXNlZCBhcyBzdHJpbmdzLCBidXQgYXJlIERPTSBlbGVtZW50IHJlZmVyZW5jZXMgaW4ganNcclxuXHRcdFx0XHRcdC8vLSB3aGVuIHVzaW5nIENTUyBzZWxlY3RvcnMgKGUuZy4gYG0oXCJbc3R5bGU9JyddXCIpYCksIHN0eWxlIGlzIHVzZWQgYXMgYSBzdHJpbmcsIGJ1dCBpdCdzIGFuIG9iamVjdCBpbiBqc1xyXG5cdFx0XHRcdFx0ZWxzZSBpZiAoYXR0ck5hbWUgaW4gbm9kZSAmJiAhKGF0dHJOYW1lID09IFwibGlzdFwiIHx8IGF0dHJOYW1lID09IFwic3R5bGVcIiB8fCBhdHRyTmFtZSA9PSBcImZvcm1cIikpIHtcclxuXHRcdFx0XHRcdFx0Ly8jMzQ4IGRvbid0IHNldCB0aGUgdmFsdWUgaWYgbm90IG5lZWRlZCBvdGhlcndpc2UgY3Vyc29yIHBsYWNlbWVudCBicmVha3MgaW4gQ2hyb21lXHJcblx0XHRcdFx0XHRcdGlmIChub2RlW2F0dHJOYW1lXSAhPSBkYXRhQXR0cikgbm9kZVthdHRyTmFtZV0gPSBkYXRhQXR0clxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSBub2RlLnNldEF0dHJpYnV0ZShhdHRyTmFtZSwgZGF0YUF0dHIpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNhdGNoIChlKSB7XHJcblx0XHRcdFx0XHQvL3N3YWxsb3cgSUUncyBpbnZhbGlkIGFyZ3VtZW50IGVycm9ycyB0byBtaW1pYyBIVE1MJ3MgZmFsbGJhY2stdG8tZG9pbmctbm90aGluZy1vbi1pbnZhbGlkLWF0dHJpYnV0ZXMgYmVoYXZpb3JcclxuXHRcdFx0XHRcdGlmIChlLm1lc3NhZ2UuaW5kZXhPZihcIkludmFsaWQgYXJndW1lbnRcIikgPCAwKSB0aHJvdyBlXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdC8vIzM0OCBkYXRhQXR0ciBtYXkgbm90IGJlIGEgc3RyaW5nLCBzbyB1c2UgbG9vc2UgY29tcGFyaXNvbiAoZG91YmxlIGVxdWFsKSBpbnN0ZWFkIG9mIHN0cmljdCAodHJpcGxlIGVxdWFsKVxyXG5cdFx0XHRlbHNlIGlmIChhdHRyTmFtZSA9PT0gXCJ2YWx1ZVwiICYmIHRhZyA9PT0gXCJpbnB1dFwiICYmIG5vZGUudmFsdWUgIT0gZGF0YUF0dHIpIHtcclxuXHRcdFx0XHRub2RlLnZhbHVlID0gZGF0YUF0dHJcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGNhY2hlZEF0dHJzXHJcblx0fVxyXG5cdGZ1bmN0aW9uIGNsZWFyKG5vZGVzLCBjYWNoZWQpIHtcclxuXHRcdGZvciAodmFyIGkgPSBub2Rlcy5sZW5ndGggLSAxOyBpID4gLTE7IGktLSkge1xyXG5cdFx0XHRpZiAobm9kZXNbaV0gJiYgbm9kZXNbaV0ucGFyZW50Tm9kZSkge1xyXG5cdFx0XHRcdHRyeSB7bm9kZXNbaV0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2Rlc1tpXSl9XHJcblx0XHRcdFx0Y2F0Y2ggKGUpIHt9IC8vaWdub3JlIGlmIHRoaXMgZmFpbHMgZHVlIHRvIG9yZGVyIG9mIGV2ZW50cyAoc2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjE5MjYwODMvZmFpbGVkLXRvLWV4ZWN1dGUtcmVtb3ZlY2hpbGQtb24tbm9kZSlcclxuXHRcdFx0XHRjYWNoZWQgPSBbXS5jb25jYXQoY2FjaGVkKTtcclxuXHRcdFx0XHRpZiAoY2FjaGVkW2ldKSB1bmxvYWQoY2FjaGVkW2ldKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRpZiAobm9kZXMubGVuZ3RoICE9IDApIG5vZGVzLmxlbmd0aCA9IDBcclxuXHR9XHJcblx0ZnVuY3Rpb24gdW5sb2FkKGNhY2hlZCkge1xyXG5cdFx0aWYgKGNhY2hlZC5jb25maWdDb250ZXh0ICYmIHR5cGVvZiBjYWNoZWQuY29uZmlnQ29udGV4dC5vbnVubG9hZCA9PSBGVU5DVElPTikgY2FjaGVkLmNvbmZpZ0NvbnRleHQub251bmxvYWQoKTtcclxuXHRcdGlmIChjYWNoZWQuY2hpbGRyZW4pIHtcclxuXHRcdFx0aWYgKHR5cGUuY2FsbChjYWNoZWQuY2hpbGRyZW4pID09IEFSUkFZKSB7XHJcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjYWNoZWQuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHVubG9hZChjYWNoZWQuY2hpbGRyZW5baV0pXHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAoY2FjaGVkLmNoaWxkcmVuLnRhZykgdW5sb2FkKGNhY2hlZC5jaGlsZHJlbilcclxuXHRcdH1cclxuXHR9XHJcblx0ZnVuY3Rpb24gaW5qZWN0SFRNTChwYXJlbnRFbGVtZW50LCBpbmRleCwgZGF0YSkge1xyXG5cdFx0dmFyIG5leHRTaWJsaW5nID0gcGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2luZGV4XTtcclxuXHRcdGlmIChuZXh0U2libGluZykge1xyXG5cdFx0XHR2YXIgaXNFbGVtZW50ID0gbmV4dFNpYmxpbmcubm9kZVR5cGUgIT0gMTtcclxuXHRcdFx0dmFyIHBsYWNlaG9sZGVyID0gJGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG5cdFx0XHRpZiAoaXNFbGVtZW50KSB7XHJcblx0XHRcdFx0cGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUocGxhY2Vob2xkZXIsIG5leHRTaWJsaW5nIHx8IG51bGwpO1xyXG5cdFx0XHRcdHBsYWNlaG9sZGVyLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWJlZ2luXCIsIGRhdGEpO1xyXG5cdFx0XHRcdHBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQocGxhY2Vob2xkZXIpXHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBuZXh0U2libGluZy5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmViZWdpblwiLCBkYXRhKVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSBwYXJlbnRFbGVtZW50Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBkYXRhKTtcclxuXHRcdHZhciBub2RlcyA9IFtdO1xyXG5cdFx0d2hpbGUgKHBhcmVudEVsZW1lbnQuY2hpbGROb2Rlc1tpbmRleF0gIT09IG5leHRTaWJsaW5nKSB7XHJcblx0XHRcdG5vZGVzLnB1c2gocGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2luZGV4XSk7XHJcblx0XHRcdGluZGV4KytcclxuXHRcdH1cclxuXHRcdHJldHVybiBub2Rlc1xyXG5cdH1cclxuXHRmdW5jdGlvbiBhdXRvcmVkcmF3KGNhbGxiYWNrLCBvYmplY3QpIHtcclxuXHRcdHJldHVybiBmdW5jdGlvbihlKSB7XHJcblx0XHRcdGUgPSBlIHx8IGV2ZW50O1xyXG5cdFx0XHRtLnJlZHJhdy5zdHJhdGVneShcImRpZmZcIik7XHJcblx0XHRcdG0uc3RhcnRDb21wdXRhdGlvbigpO1xyXG5cdFx0XHR0cnkge3JldHVybiBjYWxsYmFjay5jYWxsKG9iamVjdCwgZSl9XHJcblx0XHRcdGZpbmFsbHkge1xyXG5cdFx0XHRcdG0uZW5kQ29tcHV0YXRpb24oKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHR2YXIgaHRtbDtcclxuXHR2YXIgZG9jdW1lbnROb2RlID0ge1xyXG5cdFx0YXBwZW5kQ2hpbGQ6IGZ1bmN0aW9uKG5vZGUpIHtcclxuXHRcdFx0aWYgKGh0bWwgPT09IHVuZGVmaW5lZCkgaHRtbCA9ICRkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHRtbFwiKTtcclxuXHRcdFx0aWYgKCRkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgJGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAhPT0gbm9kZSkge1xyXG5cdFx0XHRcdCRkb2N1bWVudC5yZXBsYWNlQ2hpbGQobm9kZSwgJGRvY3VtZW50LmRvY3VtZW50RWxlbWVudClcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlICRkb2N1bWVudC5hcHBlbmRDaGlsZChub2RlKTtcclxuXHRcdFx0dGhpcy5jaGlsZE5vZGVzID0gJGRvY3VtZW50LmNoaWxkTm9kZXNcclxuXHRcdH0sXHJcblx0XHRpbnNlcnRCZWZvcmU6IGZ1bmN0aW9uKG5vZGUpIHtcclxuXHRcdFx0dGhpcy5hcHBlbmRDaGlsZChub2RlKVxyXG5cdFx0fSxcclxuXHRcdGNoaWxkTm9kZXM6IFtdXHJcblx0fTtcclxuXHR2YXIgbm9kZUNhY2hlID0gW10sIGNlbGxDYWNoZSA9IHt9O1xyXG5cdG0ucmVuZGVyID0gZnVuY3Rpb24ocm9vdCwgY2VsbCwgZm9yY2VSZWNyZWF0aW9uKSB7XHJcblx0XHR2YXIgY29uZmlncyA9IFtdO1xyXG5cdFx0aWYgKCFyb290KSB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgZW5zdXJlIHRoZSBET00gZWxlbWVudCBleGlzdHMgYmVmb3JlIHJlbmRlcmluZyBhIHRlbXBsYXRlIGludG8gaXQuXCIpO1xyXG5cdFx0dmFyIGlkID0gZ2V0Q2VsbENhY2hlS2V5KHJvb3QpO1xyXG5cdFx0dmFyIGlzRG9jdW1lbnRSb290ID0gcm9vdCA9PSAkZG9jdW1lbnQ7XHJcblx0XHR2YXIgbm9kZSA9IGlzRG9jdW1lbnRSb290IHx8IHJvb3QgPT0gJGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA/IGRvY3VtZW50Tm9kZSA6IHJvb3Q7XHJcblx0XHRpZiAoaXNEb2N1bWVudFJvb3QgJiYgY2VsbC50YWcgIT0gXCJodG1sXCIpIGNlbGwgPSB7dGFnOiBcImh0bWxcIiwgYXR0cnM6IHt9LCBjaGlsZHJlbjogY2VsbH07XHJcblx0XHRpZiAoY2VsbENhY2hlW2lkXSA9PT0gdW5kZWZpbmVkKSBjbGVhcihub2RlLmNoaWxkTm9kZXMpO1xyXG5cdFx0aWYgKGZvcmNlUmVjcmVhdGlvbiA9PT0gdHJ1ZSkgcmVzZXQocm9vdCk7XHJcblx0XHRjZWxsQ2FjaGVbaWRdID0gYnVpbGQobm9kZSwgbnVsbCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNlbGwsIGNlbGxDYWNoZVtpZF0sIGZhbHNlLCAwLCBudWxsLCB1bmRlZmluZWQsIGNvbmZpZ3MpO1xyXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjb25maWdzLmxlbmd0aDsgaSsrKSBjb25maWdzW2ldKClcclxuXHR9O1xyXG5cdGZ1bmN0aW9uIGdldENlbGxDYWNoZUtleShlbGVtZW50KSB7XHJcblx0XHR2YXIgaW5kZXggPSBub2RlQ2FjaGUuaW5kZXhPZihlbGVtZW50KTtcclxuXHRcdHJldHVybiBpbmRleCA8IDAgPyBub2RlQ2FjaGUucHVzaChlbGVtZW50KSAtIDEgOiBpbmRleFxyXG5cdH1cclxuXHJcblx0bS50cnVzdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcblx0XHR2YWx1ZSA9IG5ldyBTdHJpbmcodmFsdWUpO1xyXG5cdFx0dmFsdWUuJHRydXN0ZWQgPSB0cnVlO1xyXG5cdFx0cmV0dXJuIHZhbHVlXHJcblx0fTtcclxuXHJcblx0ZnVuY3Rpb24gZ2V0dGVyc2V0dGVyKHN0b3JlKSB7XHJcblx0XHR2YXIgcHJvcCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCkgc3RvcmUgPSBhcmd1bWVudHNbMF07XHJcblx0XHRcdHJldHVybiBzdG9yZVxyXG5cdFx0fTtcclxuXHJcblx0XHRwcm9wLnRvSlNPTiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gc3RvcmVcclxuXHRcdH07XHJcblxyXG5cdFx0cmV0dXJuIHByb3BcclxuXHR9XHJcblxyXG5cdG0ucHJvcCA9IGZ1bmN0aW9uIChzdG9yZSkge1xyXG5cdFx0Ly9ub3RlOiB1c2luZyBub24tc3RyaWN0IGVxdWFsaXR5IGNoZWNrIGhlcmUgYmVjYXVzZSB3ZSdyZSBjaGVja2luZyBpZiBzdG9yZSBpcyBudWxsIE9SIHVuZGVmaW5lZFxyXG5cdFx0aWYgKCgoc3RvcmUgIT0gbnVsbCAmJiB0eXBlLmNhbGwoc3RvcmUpID09IE9CSkVDVCkgfHwgdHlwZW9mIHN0b3JlID09IEZVTkNUSU9OKSAmJiB0eXBlb2Ygc3RvcmUudGhlbiA9PSBGVU5DVElPTikge1xyXG5cdFx0XHRyZXR1cm4gcHJvcGlmeShzdG9yZSlcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gZ2V0dGVyc2V0dGVyKHN0b3JlKVxyXG5cdH07XHJcblxyXG5cdHZhciByb290cyA9IFtdLCBtb2R1bGVzID0gW10sIGNvbnRyb2xsZXJzID0gW10sIGxhc3RSZWRyYXdJZCA9IG51bGwsIGxhc3RSZWRyYXdDYWxsVGltZSA9IDAsIGNvbXB1dGVQb3N0UmVkcmF3SG9vayA9IG51bGwsIHByZXZlbnRlZCA9IGZhbHNlLCB0b3BNb2R1bGU7XHJcblx0dmFyIEZSQU1FX0JVREdFVCA9IDE2OyAvLzYwIGZyYW1lcyBwZXIgc2Vjb25kID0gMSBjYWxsIHBlciAxNiBtc1xyXG5cdG0ubW9kdWxlID0gZnVuY3Rpb24ocm9vdCwgbW9kdWxlKSB7XHJcblx0XHR2YXIgaW5kZXggPSByb290cy5pbmRleE9mKHJvb3QpO1xyXG5cdFx0aWYgKGluZGV4IDwgMCkgaW5kZXggPSByb290cy5sZW5ndGg7XHJcblx0XHR2YXIgaXNQcmV2ZW50ZWQgPSBmYWxzZTtcclxuXHRcdGlmIChjb250cm9sbGVyc1tpbmRleF0gJiYgdHlwZW9mIGNvbnRyb2xsZXJzW2luZGV4XS5vbnVubG9hZCA9PSBGVU5DVElPTikge1xyXG5cdFx0XHR2YXIgZXZlbnQgPSB7XHJcblx0XHRcdFx0cHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkge2lzUHJldmVudGVkID0gdHJ1ZX1cclxuXHRcdFx0fTtcclxuXHRcdFx0Y29udHJvbGxlcnNbaW5kZXhdLm9udW5sb2FkKGV2ZW50KVxyXG5cdFx0fVxyXG5cdFx0aWYgKCFpc1ByZXZlbnRlZCkge1xyXG5cdFx0XHRtLnJlZHJhdy5zdHJhdGVneShcImFsbFwiKTtcclxuXHRcdFx0bS5zdGFydENvbXB1dGF0aW9uKCk7XHJcblx0XHRcdHJvb3RzW2luZGV4XSA9IHJvb3Q7XHJcblx0XHRcdHZhciBjdXJyZW50TW9kdWxlID0gdG9wTW9kdWxlID0gbW9kdWxlO1xyXG5cdFx0XHR2YXIgY29udHJvbGxlciA9IG5ldyBtb2R1bGUuY29udHJvbGxlcjtcclxuXHRcdFx0Ly9jb250cm9sbGVycyBtYXkgY2FsbCBtLm1vZHVsZSByZWN1cnNpdmVseSAodmlhIG0ucm91dGUgcmVkaXJlY3RzLCBmb3IgZXhhbXBsZSlcclxuXHRcdFx0Ly90aGlzIGNvbmRpdGlvbmFsIGVuc3VyZXMgb25seSB0aGUgbGFzdCByZWN1cnNpdmUgbS5tb2R1bGUgY2FsbCBpcyBhcHBsaWVkXHJcblx0XHRcdGlmIChjdXJyZW50TW9kdWxlID09IHRvcE1vZHVsZSkge1xyXG5cdFx0XHRcdGNvbnRyb2xsZXJzW2luZGV4XSA9IGNvbnRyb2xsZXI7XHJcblx0XHRcdFx0bW9kdWxlc1tpbmRleF0gPSBtb2R1bGVcclxuXHRcdFx0fVxyXG5cdFx0XHRtLmVuZENvbXB1dGF0aW9uKCk7XHJcblx0XHRcdHJldHVybiBjb250cm9sbGVyc1tpbmRleF1cclxuXHRcdH1cclxuXHR9O1xyXG5cdG0ucmVkcmF3ID0gZnVuY3Rpb24oZm9yY2UpIHtcclxuXHRcdC8vbGFzdFJlZHJhd0lkIGlzIGEgcG9zaXRpdmUgbnVtYmVyIGlmIGEgc2Vjb25kIHJlZHJhdyBpcyByZXF1ZXN0ZWQgYmVmb3JlIHRoZSBuZXh0IGFuaW1hdGlvbiBmcmFtZVxyXG5cdFx0Ly9sYXN0UmVkcmF3SUQgaXMgbnVsbCBpZiBpdCdzIHRoZSBmaXJzdCByZWRyYXcgYW5kIG5vdCBhbiBldmVudCBoYW5kbGVyXHJcblx0XHRpZiAobGFzdFJlZHJhd0lkICYmIGZvcmNlICE9PSB0cnVlKSB7XHJcblx0XHRcdC8vd2hlbiBzZXRUaW1lb3V0OiBvbmx5IHJlc2NoZWR1bGUgcmVkcmF3IGlmIHRpbWUgYmV0d2VlbiBub3cgYW5kIHByZXZpb3VzIHJlZHJhdyBpcyBiaWdnZXIgdGhhbiBhIGZyYW1lLCBvdGhlcndpc2Uga2VlcCBjdXJyZW50bHkgc2NoZWR1bGVkIHRpbWVvdXRcclxuXHRcdFx0Ly93aGVuIHJBRjogYWx3YXlzIHJlc2NoZWR1bGUgcmVkcmF3XHJcblx0XHRcdGlmIChuZXcgRGF0ZSAtIGxhc3RSZWRyYXdDYWxsVGltZSA+IEZSQU1FX0JVREdFVCB8fCAkcmVxdWVzdEFuaW1hdGlvbkZyYW1lID09IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHtcclxuXHRcdFx0XHRpZiAobGFzdFJlZHJhd0lkID4gMCkgJGNhbmNlbEFuaW1hdGlvbkZyYW1lKGxhc3RSZWRyYXdJZCk7XHJcblx0XHRcdFx0bGFzdFJlZHJhd0lkID0gJHJlcXVlc3RBbmltYXRpb25GcmFtZShyZWRyYXcsIEZSQU1FX0JVREdFVClcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHJlZHJhdygpO1xyXG5cdFx0XHRsYXN0UmVkcmF3SWQgPSAkcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge2xhc3RSZWRyYXdJZCA9IG51bGx9LCBGUkFNRV9CVURHRVQpXHJcblx0XHR9XHJcblx0fTtcclxuXHRtLnJlZHJhdy5zdHJhdGVneSA9IG0ucHJvcCgpO1xyXG5cdGZ1bmN0aW9uIHJlZHJhdygpIHtcclxuXHRcdHZhciBtb2RlID0gbS5yZWRyYXcuc3RyYXRlZ3koKTtcclxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcm9vdHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0aWYgKGNvbnRyb2xsZXJzW2ldICYmIG1vZGUgIT0gXCJub25lXCIpIHtcclxuXHRcdFx0XHRtLnJlbmRlcihyb290c1tpXSwgbW9kdWxlc1tpXS52aWV3KGNvbnRyb2xsZXJzW2ldKSwgbW9kZSA9PSBcImFsbFwiKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHQvL2FmdGVyIHJlbmRlcmluZyB3aXRoaW4gYSByb3V0ZWQgY29udGV4dCwgd2UgbmVlZCB0byBzY3JvbGwgYmFjayB0byB0aGUgdG9wLCBhbmQgZmV0Y2ggdGhlIGRvY3VtZW50IHRpdGxlIGZvciBoaXN0b3J5LnB1c2hTdGF0ZVxyXG5cdFx0aWYgKGNvbXB1dGVQb3N0UmVkcmF3SG9vaykge1xyXG5cdFx0XHRjb21wdXRlUG9zdFJlZHJhd0hvb2soKTtcclxuXHRcdFx0Y29tcHV0ZVBvc3RSZWRyYXdIb29rID0gbnVsbFxyXG5cdFx0fVxyXG5cdFx0bGFzdFJlZHJhd0lkID0gbnVsbDtcclxuXHRcdGxhc3RSZWRyYXdDYWxsVGltZSA9IG5ldyBEYXRlO1xyXG5cdFx0bS5yZWRyYXcuc3RyYXRlZ3koXCJkaWZmXCIpXHJcblx0fVxyXG5cclxuXHR2YXIgcGVuZGluZ1JlcXVlc3RzID0gMDtcclxuXHRtLnN0YXJ0Q29tcHV0YXRpb24gPSBmdW5jdGlvbigpIHtwZW5kaW5nUmVxdWVzdHMrK307XHJcblx0bS5lbmRDb21wdXRhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0cGVuZGluZ1JlcXVlc3RzID0gTWF0aC5tYXgocGVuZGluZ1JlcXVlc3RzIC0gMSwgMCk7XHJcblx0XHRpZiAocGVuZGluZ1JlcXVlc3RzID09IDApIG0ucmVkcmF3KClcclxuXHR9O1xyXG5cclxuXHRtLndpdGhBdHRyID0gZnVuY3Rpb24ocHJvcCwgd2l0aEF0dHJDYWxsYmFjaykge1xyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0ZSA9IGUgfHwgZXZlbnQ7XHJcblx0XHRcdHZhciBjdXJyZW50VGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0IHx8IHRoaXM7XHJcblx0XHRcdHdpdGhBdHRyQ2FsbGJhY2socHJvcCBpbiBjdXJyZW50VGFyZ2V0ID8gY3VycmVudFRhcmdldFtwcm9wXSA6IGN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKHByb3ApKVxyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8vcm91dGluZ1xyXG5cdHZhciBtb2RlcyA9IHtwYXRobmFtZTogXCJcIiwgaGFzaDogXCIjXCIsIHNlYXJjaDogXCI/XCJ9O1xyXG5cdHZhciByZWRpcmVjdCA9IGZ1bmN0aW9uKCkge30sIHJvdXRlUGFyYW1zID0ge30sIGN1cnJlbnRSb3V0ZTtcclxuXHRtLnJvdXRlID0gZnVuY3Rpb24oKSB7XHJcblx0XHQvL20ucm91dGUoKVxyXG5cdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiBjdXJyZW50Um91dGU7XHJcblx0XHRlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAzICYmIHR5cGUuY2FsbChhcmd1bWVudHNbMV0pID09IFNUUklORykge1xyXG5cdFx0XHR2YXIgcm9vdCA9IGFyZ3VtZW50c1swXSwgZGVmYXVsdFJvdXRlID0gYXJndW1lbnRzWzFdLCByb3V0ZXIgPSBhcmd1bWVudHNbMl07XHJcblx0XHRcdHJlZGlyZWN0ID0gZnVuY3Rpb24oc291cmNlKSB7XHJcblx0XHRcdFx0dmFyIHBhdGggPSBjdXJyZW50Um91dGUgPSBub3JtYWxpemVSb3V0ZShzb3VyY2UpO1xyXG5cdFx0XHRcdGlmICghcm91dGVCeVZhbHVlKHJvb3QsIHJvdXRlciwgcGF0aCkpIHtcclxuXHRcdFx0XHRcdG0ucm91dGUoZGVmYXVsdFJvdXRlLCB0cnVlKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHRcdFx0dmFyIGxpc3RlbmVyID0gbS5yb3V0ZS5tb2RlID09IFwiaGFzaFwiID8gXCJvbmhhc2hjaGFuZ2VcIiA6IFwib25wb3BzdGF0ZVwiO1xyXG5cdFx0XHR3aW5kb3dbbGlzdGVuZXJdID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYgKGN1cnJlbnRSb3V0ZSAhPSBub3JtYWxpemVSb3V0ZSgkbG9jYXRpb25bbS5yb3V0ZS5tb2RlXSkpIHtcclxuXHRcdFx0XHRcdHJlZGlyZWN0KCRsb2NhdGlvblttLnJvdXRlLm1vZGVdKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHRcdFx0Y29tcHV0ZVBvc3RSZWRyYXdIb29rID0gc2V0U2Nyb2xsO1xyXG5cdFx0XHR3aW5kb3dbbGlzdGVuZXJdKClcclxuXHRcdH1cclxuXHRcdC8vY29uZmlnOiBtLnJvdXRlXHJcblx0XHRlbHNlIGlmIChhcmd1bWVudHNbMF0uYWRkRXZlbnRMaXN0ZW5lcikge1xyXG5cdFx0XHR2YXIgZWxlbWVudCA9IGFyZ3VtZW50c1swXTtcclxuXHRcdFx0dmFyIGlzSW5pdGlhbGl6ZWQgPSBhcmd1bWVudHNbMV07XHJcblx0XHRcdHZhciBjb250ZXh0ID0gYXJndW1lbnRzWzJdO1xyXG5cdFx0XHRlbGVtZW50LmhyZWYgPSAobS5yb3V0ZS5tb2RlICE9PSAncGF0aG5hbWUnID8gJGxvY2F0aW9uLnBhdGhuYW1lIDogJycpICsgbW9kZXNbbS5yb3V0ZS5tb2RlXSArIHRoaXMuYXR0cnMuaHJlZjtcclxuXHRcdFx0ZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcm91dGVVbm9idHJ1c2l2ZSk7XHJcblx0XHRcdGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJvdXRlVW5vYnRydXNpdmUpXHJcblx0XHR9XHJcblx0XHQvL20ucm91dGUocm91dGUsIHBhcmFtcylcclxuXHRcdGVsc2UgaWYgKHR5cGUuY2FsbChhcmd1bWVudHNbMF0pID09IFNUUklORykge1xyXG5cdFx0XHRjdXJyZW50Um91dGUgPSBhcmd1bWVudHNbMF07XHJcblx0XHRcdHZhciBhcmdzID0gYXJndW1lbnRzWzFdIHx8IHt9XHJcblx0XHRcdHZhciBxdWVyeUluZGV4ID0gY3VycmVudFJvdXRlLmluZGV4T2YoXCI/XCIpXHJcblx0XHRcdHZhciBwYXJhbXMgPSBxdWVyeUluZGV4ID4gLTEgPyBwYXJzZVF1ZXJ5U3RyaW5nKGN1cnJlbnRSb3V0ZS5zbGljZShxdWVyeUluZGV4ICsgMSkpIDoge31cclxuXHRcdFx0Zm9yICh2YXIgaSBpbiBhcmdzKSBwYXJhbXNbaV0gPSBhcmdzW2ldXHJcblx0XHRcdHZhciBxdWVyeXN0cmluZyA9IGJ1aWxkUXVlcnlTdHJpbmcocGFyYW1zKVxyXG5cdFx0XHR2YXIgY3VycmVudFBhdGggPSBxdWVyeUluZGV4ID4gLTEgPyBjdXJyZW50Um91dGUuc2xpY2UoMCwgcXVlcnlJbmRleCkgOiBjdXJyZW50Um91dGVcclxuXHRcdFx0aWYgKHF1ZXJ5c3RyaW5nKSBjdXJyZW50Um91dGUgPSBjdXJyZW50UGF0aCArIChjdXJyZW50UGF0aC5pbmRleE9mKFwiP1wiKSA9PT0gLTEgPyBcIj9cIiA6IFwiJlwiKSArIHF1ZXJ5c3RyaW5nO1xyXG5cclxuXHRcdFx0dmFyIHNob3VsZFJlcGxhY2VIaXN0b3J5RW50cnkgPSAoYXJndW1lbnRzLmxlbmd0aCA9PSAzID8gYXJndW1lbnRzWzJdIDogYXJndW1lbnRzWzFdKSA9PT0gdHJ1ZTtcclxuXHJcblx0XHRcdGlmICh3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUpIHtcclxuXHRcdFx0XHRjb21wdXRlUG9zdFJlZHJhd0hvb2sgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHdpbmRvdy5oaXN0b3J5W3Nob3VsZFJlcGxhY2VIaXN0b3J5RW50cnkgPyBcInJlcGxhY2VTdGF0ZVwiIDogXCJwdXNoU3RhdGVcIl0obnVsbCwgJGRvY3VtZW50LnRpdGxlLCBtb2Rlc1ttLnJvdXRlLm1vZGVdICsgY3VycmVudFJvdXRlKTtcclxuXHRcdFx0XHRcdHNldFNjcm9sbCgpXHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHRyZWRpcmVjdChtb2Rlc1ttLnJvdXRlLm1vZGVdICsgY3VycmVudFJvdXRlKVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgJGxvY2F0aW9uW20ucm91dGUubW9kZV0gPSBjdXJyZW50Um91dGVcclxuXHRcdH1cclxuXHR9O1xyXG5cdG0ucm91dGUucGFyYW0gPSBmdW5jdGlvbihrZXkpIHtyZXR1cm4gcm91dGVQYXJhbXNba2V5XX07XHJcblx0bS5yb3V0ZS5tb2RlID0gXCJzZWFyY2hcIjtcclxuXHRmdW5jdGlvbiBub3JtYWxpemVSb3V0ZShyb3V0ZSkge3JldHVybiByb3V0ZS5zbGljZShtb2Rlc1ttLnJvdXRlLm1vZGVdLmxlbmd0aCl9XHJcblx0ZnVuY3Rpb24gcm91dGVCeVZhbHVlKHJvb3QsIHJvdXRlciwgcGF0aCkge1xyXG5cdFx0cm91dGVQYXJhbXMgPSB7fTtcclxuXHJcblx0XHR2YXIgcXVlcnlTdGFydCA9IHBhdGguaW5kZXhPZihcIj9cIik7XHJcblx0XHRpZiAocXVlcnlTdGFydCAhPT0gLTEpIHtcclxuXHRcdFx0cm91dGVQYXJhbXMgPSBwYXJzZVF1ZXJ5U3RyaW5nKHBhdGguc3Vic3RyKHF1ZXJ5U3RhcnQgKyAxLCBwYXRoLmxlbmd0aCkpO1xyXG5cdFx0XHRwYXRoID0gcGF0aC5zdWJzdHIoMCwgcXVlcnlTdGFydClcclxuXHRcdH1cclxuXHJcblx0XHRmb3IgKHZhciByb3V0ZSBpbiByb3V0ZXIpIHtcclxuXHRcdFx0aWYgKHJvdXRlID09IHBhdGgpIHtcclxuXHRcdFx0XHRtLm1vZHVsZShyb290LCByb3V0ZXJbcm91dGVdKTtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgbWF0Y2hlciA9IG5ldyBSZWdFeHAoXCJeXCIgKyByb3V0ZS5yZXBsYWNlKC86W15cXC9dKz9cXC57M30vZywgXCIoLio/KVwiKS5yZXBsYWNlKC86W15cXC9dKy9nLCBcIihbXlxcXFwvXSspXCIpICsgXCJcXC8/JFwiKTtcclxuXHJcblx0XHRcdGlmIChtYXRjaGVyLnRlc3QocGF0aCkpIHtcclxuXHRcdFx0XHRwYXRoLnJlcGxhY2UobWF0Y2hlciwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHR2YXIga2V5cyA9IHJvdXRlLm1hdGNoKC86W15cXC9dKy9nKSB8fCBbXTtcclxuXHRcdFx0XHRcdHZhciB2YWx1ZXMgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSwgLTIpO1xyXG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSByb3V0ZVBhcmFtc1trZXlzW2ldLnJlcGxhY2UoLzp8XFwuL2csIFwiXCIpXSA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZXNbaV0pXHJcblx0XHRcdFx0XHRtLm1vZHVsZShyb290LCByb3V0ZXJbcm91dGVdKVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdHJldHVybiB0cnVlXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0ZnVuY3Rpb24gcm91dGVVbm9idHJ1c2l2ZShlKSB7XHJcblx0XHRlID0gZSB8fCBldmVudDtcclxuXHRcdGlmIChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5IHx8IGUud2hpY2ggPT0gMikgcmV0dXJuO1xyXG5cdFx0aWYgKGUucHJldmVudERlZmF1bHQpIGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdGVsc2UgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xyXG5cdFx0dmFyIGN1cnJlbnRUYXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQgfHwgdGhpcztcclxuXHRcdHZhciBhcmdzID0gbS5yb3V0ZS5tb2RlID09IFwicGF0aG5hbWVcIiAmJiBjdXJyZW50VGFyZ2V0LnNlYXJjaCA/IHBhcnNlUXVlcnlTdHJpbmcoY3VycmVudFRhcmdldC5zZWFyY2guc2xpY2UoMSkpIDoge307XHJcblx0XHRtLnJvdXRlKGN1cnJlbnRUYXJnZXRbbS5yb3V0ZS5tb2RlXS5zbGljZShtb2Rlc1ttLnJvdXRlLm1vZGVdLmxlbmd0aCksIGFyZ3MpXHJcblx0fVxyXG5cdGZ1bmN0aW9uIHNldFNjcm9sbCgpIHtcclxuXHRcdGlmIChtLnJvdXRlLm1vZGUgIT0gXCJoYXNoXCIgJiYgJGxvY2F0aW9uLmhhc2gpICRsb2NhdGlvbi5oYXNoID0gJGxvY2F0aW9uLmhhc2g7XHJcblx0XHRlbHNlIHdpbmRvdy5zY3JvbGxUbygwLCAwKVxyXG5cdH1cclxuXHRmdW5jdGlvbiBidWlsZFF1ZXJ5U3RyaW5nKG9iamVjdCwgcHJlZml4KSB7XHJcblx0XHR2YXIgc3RyID0gW107XHJcblx0XHRmb3IodmFyIHByb3AgaW4gb2JqZWN0KSB7XHJcblx0XHRcdHZhciBrZXkgPSBwcmVmaXggPyBwcmVmaXggKyBcIltcIiArIHByb3AgKyBcIl1cIiA6IHByb3AsIHZhbHVlID0gb2JqZWN0W3Byb3BdO1xyXG5cdFx0XHRzdHIucHVzaCh2YWx1ZSAhPSBudWxsICYmIHR5cGUuY2FsbCh2YWx1ZSkgPT0gT0JKRUNUID8gYnVpbGRRdWVyeVN0cmluZyh2YWx1ZSwga2V5KSA6IGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHN0ci5qb2luKFwiJlwiKVxyXG5cdH1cclxuXHRmdW5jdGlvbiBwYXJzZVF1ZXJ5U3RyaW5nKHN0cikge1xyXG5cdFx0dmFyIHBhaXJzID0gc3RyLnNwbGl0KFwiJlwiKSwgcGFyYW1zID0ge307XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHBhaXJzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBwYWlyID0gcGFpcnNbaV0uc3BsaXQoXCI9XCIpO1xyXG5cdFx0XHRwYXJhbXNbZGVjb2RlU3BhY2UocGFpclswXSldID0gcGFpclsxXSA/IGRlY29kZVNwYWNlKHBhaXJbMV0pIDogXCJcIlxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHBhcmFtc1xyXG5cdH1cclxuXHRmdW5jdGlvbiBkZWNvZGVTcGFjZShzdHJpbmcpIHtcclxuXHRcdHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoc3RyaW5nLnJlcGxhY2UoL1xcKy9nLCBcIiBcIikpXHJcblx0fVxyXG5cdGZ1bmN0aW9uIHJlc2V0KHJvb3QpIHtcclxuXHRcdHZhciBjYWNoZUtleSA9IGdldENlbGxDYWNoZUtleShyb290KTtcclxuXHRcdGNsZWFyKHJvb3QuY2hpbGROb2RlcywgY2VsbENhY2hlW2NhY2hlS2V5XSk7XHJcblx0XHRjZWxsQ2FjaGVbY2FjaGVLZXldID0gdW5kZWZpbmVkXHJcblx0fVxyXG5cclxuXHRtLmRlZmVycmVkID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0dmFyIGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcblx0XHRkZWZlcnJlZC5wcm9taXNlID0gcHJvcGlmeShkZWZlcnJlZC5wcm9taXNlKTtcclxuXHRcdHJldHVybiBkZWZlcnJlZFxyXG5cdH07XHJcblx0ZnVuY3Rpb24gcHJvcGlmeShwcm9taXNlKSB7XHJcblx0XHR2YXIgcHJvcCA9IG0ucHJvcCgpO1xyXG5cdFx0cHJvbWlzZS50aGVuKHByb3ApO1xyXG5cdFx0cHJvcC50aGVuID0gZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcblx0XHRcdHJldHVybiBwcm9waWZ5KHByb21pc2UudGhlbihyZXNvbHZlLCByZWplY3QpKVxyXG5cdFx0fTtcclxuXHRcdHJldHVybiBwcm9wXHJcblx0fVxyXG5cdC8vUHJvbWl6Lm1pdGhyaWwuanMgfCBab2xtZWlzdGVyIHwgTUlUXHJcblx0Ly9hIG1vZGlmaWVkIHZlcnNpb24gb2YgUHJvbWl6LmpzLCB3aGljaCBkb2VzIG5vdCBjb25mb3JtIHRvIFByb21pc2VzL0ErIGZvciB0d28gcmVhc29uczpcclxuXHQvLzEpIGB0aGVuYCBjYWxsYmFja3MgYXJlIGNhbGxlZCBzeW5jaHJvbm91c2x5IChiZWNhdXNlIHNldFRpbWVvdXQgaXMgdG9vIHNsb3csIGFuZCB0aGUgc2V0SW1tZWRpYXRlIHBvbHlmaWxsIGlzIHRvbyBiaWdcclxuXHQvLzIpIHRocm93aW5nIHN1YmNsYXNzZXMgb2YgRXJyb3IgY2F1c2UgdGhlIGVycm9yIHRvIGJlIGJ1YmJsZWQgdXAgaW5zdGVhZCBvZiB0cmlnZ2VyaW5nIHJlamVjdGlvbiAoYmVjYXVzZSB0aGUgc3BlYyBkb2VzIG5vdCBhY2NvdW50IGZvciB0aGUgaW1wb3J0YW50IHVzZSBjYXNlIG9mIGRlZmF1bHQgYnJvd3NlciBlcnJvciBoYW5kbGluZywgaS5lLiBtZXNzYWdlIHcvIGxpbmUgbnVtYmVyKVxyXG5cdGZ1bmN0aW9uIERlZmVycmVkKHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKSB7XHJcblx0XHR2YXIgUkVTT0xWSU5HID0gMSwgUkVKRUNUSU5HID0gMiwgUkVTT0xWRUQgPSAzLCBSRUpFQ1RFRCA9IDQ7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsIHN0YXRlID0gMCwgcHJvbWlzZVZhbHVlID0gMCwgbmV4dCA9IFtdO1xyXG5cclxuXHRcdHNlbGZbXCJwcm9taXNlXCJdID0ge307XHJcblxyXG5cdFx0c2VsZltcInJlc29sdmVcIl0gPSBmdW5jdGlvbih2YWx1ZSkge1xyXG5cdFx0XHRpZiAoIXN0YXRlKSB7XHJcblx0XHRcdFx0cHJvbWlzZVZhbHVlID0gdmFsdWU7XHJcblx0XHRcdFx0c3RhdGUgPSBSRVNPTFZJTkc7XHJcblxyXG5cdFx0XHRcdGZpcmUoKVxyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB0aGlzXHJcblx0XHR9O1xyXG5cclxuXHRcdHNlbGZbXCJyZWplY3RcIl0gPSBmdW5jdGlvbih2YWx1ZSkge1xyXG5cdFx0XHRpZiAoIXN0YXRlKSB7XHJcblx0XHRcdFx0cHJvbWlzZVZhbHVlID0gdmFsdWU7XHJcblx0XHRcdFx0c3RhdGUgPSBSRUpFQ1RJTkc7XHJcblxyXG5cdFx0XHRcdGZpcmUoKVxyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB0aGlzXHJcblx0XHR9O1xyXG5cclxuXHRcdHNlbGYucHJvbWlzZVtcInRoZW5cIl0gPSBmdW5jdGlvbihzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaykge1xyXG5cdFx0XHR2YXIgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spO1xyXG5cdFx0XHRpZiAoc3RhdGUgPT0gUkVTT0xWRUQpIHtcclxuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHByb21pc2VWYWx1ZSlcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmIChzdGF0ZSA9PSBSRUpFQ1RFRCkge1xyXG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdChwcm9taXNlVmFsdWUpXHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0bmV4dC5wdXNoKGRlZmVycmVkKVxyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGZpbmlzaCh0eXBlKSB7XHJcblx0XHRcdHN0YXRlID0gdHlwZSB8fCBSRUpFQ1RFRDtcclxuXHRcdFx0bmV4dC5tYXAoZnVuY3Rpb24oZGVmZXJyZWQpIHtcclxuXHRcdFx0XHRzdGF0ZSA9PSBSRVNPTFZFRCAmJiBkZWZlcnJlZC5yZXNvbHZlKHByb21pc2VWYWx1ZSkgfHwgZGVmZXJyZWQucmVqZWN0KHByb21pc2VWYWx1ZSlcclxuXHRcdFx0fSlcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiB0aGVubmFibGUodGhlbiwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2ssIG5vdFRoZW5uYWJsZUNhbGxiYWNrKSB7XHJcblx0XHRcdGlmICgoKHByb21pc2VWYWx1ZSAhPSBudWxsICYmIHR5cGUuY2FsbChwcm9taXNlVmFsdWUpID09IE9CSkVDVCkgfHwgdHlwZW9mIHByb21pc2VWYWx1ZSA9PSBGVU5DVElPTikgJiYgdHlwZW9mIHRoZW4gPT0gRlVOQ1RJT04pIHtcclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0Ly8gY291bnQgcHJvdGVjdHMgYWdhaW5zdCBhYnVzZSBjYWxscyBmcm9tIHNwZWMgY2hlY2tlclxyXG5cdFx0XHRcdFx0dmFyIGNvdW50ID0gMDtcclxuXHRcdFx0XHRcdHRoZW4uY2FsbChwcm9taXNlVmFsdWUsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcblx0XHRcdFx0XHRcdGlmIChjb3VudCsrKSByZXR1cm47XHJcblx0XHRcdFx0XHRcdHByb21pc2VWYWx1ZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRzdWNjZXNzQ2FsbGJhY2soKVxyXG5cdFx0XHRcdFx0fSwgZnVuY3Rpb24gKHZhbHVlKSB7XHJcblx0XHRcdFx0XHRcdGlmIChjb3VudCsrKSByZXR1cm47XHJcblx0XHRcdFx0XHRcdHByb21pc2VWYWx1ZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRmYWlsdXJlQ2FsbGJhY2soKVxyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y2F0Y2ggKGUpIHtcclxuXHRcdFx0XHRcdG0uZGVmZXJyZWQub25lcnJvcihlKTtcclxuXHRcdFx0XHRcdHByb21pc2VWYWx1ZSA9IGU7XHJcblx0XHRcdFx0XHRmYWlsdXJlQ2FsbGJhY2soKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRub3RUaGVubmFibGVDYWxsYmFjaygpXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBmaXJlKCkge1xyXG5cdFx0XHQvLyBjaGVjayBpZiBpdCdzIGEgdGhlbmFibGVcclxuXHRcdFx0dmFyIHRoZW47XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0dGhlbiA9IHByb21pc2VWYWx1ZSAmJiBwcm9taXNlVmFsdWUudGhlblxyXG5cdFx0XHR9XHJcblx0XHRcdGNhdGNoIChlKSB7XHJcblx0XHRcdFx0bS5kZWZlcnJlZC5vbmVycm9yKGUpO1xyXG5cdFx0XHRcdHByb21pc2VWYWx1ZSA9IGU7XHJcblx0XHRcdFx0c3RhdGUgPSBSRUpFQ1RJTkc7XHJcblx0XHRcdFx0cmV0dXJuIGZpcmUoKVxyXG5cdFx0XHR9XHJcblx0XHRcdHRoZW5uYWJsZSh0aGVuLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRzdGF0ZSA9IFJFU09MVklORztcclxuXHRcdFx0XHRmaXJlKClcclxuXHRcdFx0fSwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0c3RhdGUgPSBSRUpFQ1RJTkc7XHJcblx0XHRcdFx0ZmlyZSgpXHJcblx0XHRcdH0sIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRpZiAoc3RhdGUgPT0gUkVTT0xWSU5HICYmIHR5cGVvZiBzdWNjZXNzQ2FsbGJhY2sgPT0gRlVOQ1RJT04pIHtcclxuXHRcdFx0XHRcdFx0cHJvbWlzZVZhbHVlID0gc3VjY2Vzc0NhbGxiYWNrKHByb21pc2VWYWx1ZSlcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2UgaWYgKHN0YXRlID09IFJFSkVDVElORyAmJiB0eXBlb2YgZmFpbHVyZUNhbGxiYWNrID09IFwiZnVuY3Rpb25cIikge1xyXG5cdFx0XHRcdFx0XHRwcm9taXNlVmFsdWUgPSBmYWlsdXJlQ2FsbGJhY2socHJvbWlzZVZhbHVlKTtcclxuXHRcdFx0XHRcdFx0c3RhdGUgPSBSRVNPTFZJTkdcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y2F0Y2ggKGUpIHtcclxuXHRcdFx0XHRcdG0uZGVmZXJyZWQub25lcnJvcihlKTtcclxuXHRcdFx0XHRcdHByb21pc2VWYWx1ZSA9IGU7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmluaXNoKClcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmIChwcm9taXNlVmFsdWUgPT0gc2VsZikge1xyXG5cdFx0XHRcdFx0cHJvbWlzZVZhbHVlID0gVHlwZUVycm9yKCk7XHJcblx0XHRcdFx0XHRmaW5pc2goKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdHRoZW5uYWJsZSh0aGVuLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRcdGZpbmlzaChSRVNPTFZFRClcclxuXHRcdFx0XHRcdH0sIGZpbmlzaCwgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0XHRmaW5pc2goc3RhdGUgPT0gUkVTT0xWSU5HICYmIFJFU09MVkVEKVxyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pXHJcblx0XHR9XHJcblx0fVxyXG5cdG0uZGVmZXJyZWQub25lcnJvciA9IGZ1bmN0aW9uKGUpIHtcclxuXHRcdGlmICh0eXBlLmNhbGwoZSkgPT0gXCJbb2JqZWN0IEVycm9yXVwiICYmICFlLmNvbnN0cnVjdG9yLnRvU3RyaW5nKCkubWF0Y2goLyBFcnJvci8pKSB0aHJvdyBlXHJcblx0fTtcclxuXHJcblx0bS5zeW5jID0gZnVuY3Rpb24oYXJncykge1xyXG5cdFx0dmFyIG1ldGhvZCA9IFwicmVzb2x2ZVwiO1xyXG5cdFx0ZnVuY3Rpb24gc3luY2hyb25pemVyKHBvcywgcmVzb2x2ZWQpIHtcclxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XHJcblx0XHRcdFx0cmVzdWx0c1twb3NdID0gdmFsdWU7XHJcblx0XHRcdFx0aWYgKCFyZXNvbHZlZCkgbWV0aG9kID0gXCJyZWplY3RcIjtcclxuXHRcdFx0XHRpZiAoLS1vdXRzdGFuZGluZyA9PSAwKSB7XHJcblx0XHRcdFx0XHRkZWZlcnJlZC5wcm9taXNlKHJlc3VsdHMpO1xyXG5cdFx0XHRcdFx0ZGVmZXJyZWRbbWV0aG9kXShyZXN1bHRzKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gdmFsdWVcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHZhciBkZWZlcnJlZCA9IG0uZGVmZXJyZWQoKTtcclxuXHRcdHZhciBvdXRzdGFuZGluZyA9IGFyZ3MubGVuZ3RoO1xyXG5cdFx0dmFyIHJlc3VsdHMgPSBuZXcgQXJyYXkob3V0c3RhbmRpbmcpO1xyXG5cdFx0aWYgKGFyZ3MubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRhcmdzW2ldLnRoZW4oc3luY2hyb25pemVyKGksIHRydWUpLCBzeW5jaHJvbml6ZXIoaSwgZmFsc2UpKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIGRlZmVycmVkLnJlc29sdmUoW10pO1xyXG5cclxuXHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlXHJcblx0fTtcclxuXHRmdW5jdGlvbiBpZGVudGl0eSh2YWx1ZSkge3JldHVybiB2YWx1ZX1cclxuXHJcblx0ZnVuY3Rpb24gYWpheChvcHRpb25zKSB7XHJcblx0XHRpZiAob3B0aW9ucy5kYXRhVHlwZSAmJiBvcHRpb25zLmRhdGFUeXBlLnRvTG93ZXJDYXNlKCkgPT09IFwianNvbnBcIikge1xyXG5cdFx0XHR2YXIgY2FsbGJhY2tLZXkgPSBcIm1pdGhyaWxfY2FsbGJhY2tfXCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIFwiX1wiICsgKE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDFlMTYpKS50b1N0cmluZygzNik7XHJcblx0XHRcdHZhciBzY3JpcHQgPSAkZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcclxuXHJcblx0XHRcdHdpbmRvd1tjYWxsYmFja0tleV0gPSBmdW5jdGlvbihyZXNwKSB7XHJcblx0XHRcdFx0JGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcclxuXHRcdFx0XHRvcHRpb25zLm9ubG9hZCh7XHJcblx0XHRcdFx0XHR0eXBlOiBcImxvYWRcIixcclxuXHRcdFx0XHRcdHRhcmdldDoge1xyXG5cdFx0XHRcdFx0XHRyZXNwb25zZVRleHQ6IHJlc3BcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHR3aW5kb3dbY2FsbGJhY2tLZXldID0gdW5kZWZpbmVkXHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRzY3JpcHQub25lcnJvciA9IGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHQkZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JpcHQpO1xyXG5cclxuXHRcdFx0XHRvcHRpb25zLm9uZXJyb3Ioe1xyXG5cdFx0XHRcdFx0dHlwZTogXCJlcnJvclwiLFxyXG5cdFx0XHRcdFx0dGFyZ2V0OiB7XHJcblx0XHRcdFx0XHRcdHN0YXR1czogNTAwLFxyXG5cdFx0XHRcdFx0XHRyZXNwb25zZVRleHQ6IEpTT04uc3RyaW5naWZ5KHtlcnJvcjogXCJFcnJvciBtYWtpbmcganNvbnAgcmVxdWVzdFwifSlcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHR3aW5kb3dbY2FsbGJhY2tLZXldID0gdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0XHRyZXR1cm4gZmFsc2VcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlXHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRzY3JpcHQuc3JjID0gb3B0aW9ucy51cmxcclxuXHRcdFx0XHQrIChvcHRpb25zLnVybC5pbmRleE9mKFwiP1wiKSA+IDAgPyBcIiZcIiA6IFwiP1wiKVxyXG5cdFx0XHRcdCsgKG9wdGlvbnMuY2FsbGJhY2tLZXkgPyBvcHRpb25zLmNhbGxiYWNrS2V5IDogXCJjYWxsYmFja1wiKVxyXG5cdFx0XHRcdCsgXCI9XCIgKyBjYWxsYmFja0tleVxyXG5cdFx0XHRcdCsgXCImXCIgKyBidWlsZFF1ZXJ5U3RyaW5nKG9wdGlvbnMuZGF0YSB8fCB7fSk7XHJcblx0XHRcdCRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdClcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR2YXIgeGhyID0gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdDtcclxuXHRcdFx0eGhyLm9wZW4ob3B0aW9ucy5tZXRob2QsIG9wdGlvbnMudXJsLCB0cnVlLCBvcHRpb25zLnVzZXIsIG9wdGlvbnMucGFzc3dvcmQpO1xyXG5cdFx0XHR4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYgKHhoci5yZWFkeVN0YXRlID09PSA0KSB7XHJcblx0XHRcdFx0XHRpZiAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDMwMCkgb3B0aW9ucy5vbmxvYWQoe3R5cGU6IFwibG9hZFwiLCB0YXJnZXQ6IHhocn0pO1xyXG5cdFx0XHRcdFx0ZWxzZSBvcHRpb25zLm9uZXJyb3Ioe3R5cGU6IFwiZXJyb3JcIiwgdGFyZ2V0OiB4aHJ9KVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHRcdFx0aWYgKG9wdGlvbnMuc2VyaWFsaXplID09IEpTT04uc3RyaW5naWZ5ICYmIG9wdGlvbnMuZGF0YSAmJiBvcHRpb25zLm1ldGhvZCAhPSBcIkdFVFwiKSB7XHJcblx0XHRcdFx0eGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIpXHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKG9wdGlvbnMuZGVzZXJpYWxpemUgPT0gSlNPTi5wYXJzZSkge1xyXG5cdFx0XHRcdHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsIFwiYXBwbGljYXRpb24vanNvbiwgdGV4dC8qXCIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0eXBlb2Ygb3B0aW9ucy5jb25maWcgPT0gRlVOQ1RJT04pIHtcclxuXHRcdFx0XHR2YXIgbWF5YmVYaHIgPSBvcHRpb25zLmNvbmZpZyh4aHIsIG9wdGlvbnMpO1xyXG5cdFx0XHRcdGlmIChtYXliZVhociAhPSBudWxsKSB4aHIgPSBtYXliZVhoclxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgZGF0YSA9IG9wdGlvbnMubWV0aG9kID09IFwiR0VUXCIgfHwgIW9wdGlvbnMuZGF0YSA/IFwiXCIgOiBvcHRpb25zLmRhdGFcclxuXHRcdFx0aWYgKGRhdGEgJiYgKHR5cGUuY2FsbChkYXRhKSAhPSBTVFJJTkcgJiYgZGF0YS5jb25zdHJ1Y3RvciAhPSB3aW5kb3cuRm9ybURhdGEpKSB7XHJcblx0XHRcdFx0dGhyb3cgXCJSZXF1ZXN0IGRhdGEgc2hvdWxkIGJlIGVpdGhlciBiZSBhIHN0cmluZyBvciBGb3JtRGF0YS4gQ2hlY2sgdGhlIGBzZXJpYWxpemVgIG9wdGlvbiBpbiBgbS5yZXF1ZXN0YFwiO1xyXG5cdFx0XHR9XHJcblx0XHRcdHhoci5zZW5kKGRhdGEpO1xyXG5cdFx0XHRyZXR1cm4geGhyXHJcblx0XHR9XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGJpbmREYXRhKHhock9wdGlvbnMsIGRhdGEsIHNlcmlhbGl6ZSkge1xyXG5cdFx0aWYgKHhock9wdGlvbnMubWV0aG9kID09IFwiR0VUXCIgJiYgeGhyT3B0aW9ucy5kYXRhVHlwZSAhPSBcImpzb25wXCIpIHtcclxuXHRcdFx0dmFyIHByZWZpeCA9IHhock9wdGlvbnMudXJsLmluZGV4T2YoXCI/XCIpIDwgMCA/IFwiP1wiIDogXCImXCI7XHJcblx0XHRcdHZhciBxdWVyeXN0cmluZyA9IGJ1aWxkUXVlcnlTdHJpbmcoZGF0YSk7XHJcblx0XHRcdHhock9wdGlvbnMudXJsID0geGhyT3B0aW9ucy51cmwgKyAocXVlcnlzdHJpbmcgPyBwcmVmaXggKyBxdWVyeXN0cmluZyA6IFwiXCIpXHJcblx0XHR9XHJcblx0XHRlbHNlIHhock9wdGlvbnMuZGF0YSA9IHNlcmlhbGl6ZShkYXRhKTtcclxuXHRcdHJldHVybiB4aHJPcHRpb25zXHJcblx0fVxyXG5cdGZ1bmN0aW9uIHBhcmFtZXRlcml6ZVVybCh1cmwsIGRhdGEpIHtcclxuXHRcdHZhciB0b2tlbnMgPSB1cmwubWF0Y2goLzpbYS16XVxcdysvZ2kpO1xyXG5cdFx0aWYgKHRva2VucyAmJiBkYXRhKSB7XHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0dmFyIGtleSA9IHRva2Vuc1tpXS5zbGljZSgxKTtcclxuXHRcdFx0XHR1cmwgPSB1cmwucmVwbGFjZSh0b2tlbnNbaV0sIGRhdGFba2V5XSk7XHJcblx0XHRcdFx0ZGVsZXRlIGRhdGFba2V5XVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gdXJsXHJcblx0fVxyXG5cclxuXHRtLnJlcXVlc3QgPSBmdW5jdGlvbih4aHJPcHRpb25zKSB7XHJcblx0XHRpZiAoeGhyT3B0aW9ucy5iYWNrZ3JvdW5kICE9PSB0cnVlKSBtLnN0YXJ0Q29tcHV0YXRpb24oKTtcclxuXHRcdHZhciBkZWZlcnJlZCA9IG0uZGVmZXJyZWQoKTtcclxuXHRcdHZhciBpc0pTT05QID0geGhyT3B0aW9ucy5kYXRhVHlwZSAmJiB4aHJPcHRpb25zLmRhdGFUeXBlLnRvTG93ZXJDYXNlKCkgPT09IFwianNvbnBcIjtcclxuXHRcdHZhciBzZXJpYWxpemUgPSB4aHJPcHRpb25zLnNlcmlhbGl6ZSA9IGlzSlNPTlAgPyBpZGVudGl0eSA6IHhock9wdGlvbnMuc2VyaWFsaXplIHx8IEpTT04uc3RyaW5naWZ5O1xyXG5cdFx0dmFyIGRlc2VyaWFsaXplID0geGhyT3B0aW9ucy5kZXNlcmlhbGl6ZSA9IGlzSlNPTlAgPyBpZGVudGl0eSA6IHhock9wdGlvbnMuZGVzZXJpYWxpemUgfHwgSlNPTi5wYXJzZTtcclxuXHRcdHZhciBleHRyYWN0ID0geGhyT3B0aW9ucy5leHRyYWN0IHx8IGZ1bmN0aW9uKHhocikge1xyXG5cdFx0XHRyZXR1cm4geGhyLnJlc3BvbnNlVGV4dC5sZW5ndGggPT09IDAgJiYgZGVzZXJpYWxpemUgPT09IEpTT04ucGFyc2UgPyBudWxsIDogeGhyLnJlc3BvbnNlVGV4dFxyXG5cdFx0fTtcclxuXHRcdHhock9wdGlvbnMudXJsID0gcGFyYW1ldGVyaXplVXJsKHhock9wdGlvbnMudXJsLCB4aHJPcHRpb25zLmRhdGEpO1xyXG5cdFx0eGhyT3B0aW9ucyA9IGJpbmREYXRhKHhock9wdGlvbnMsIHhock9wdGlvbnMuZGF0YSwgc2VyaWFsaXplKTtcclxuXHRcdHhock9wdGlvbnMub25sb2FkID0geGhyT3B0aW9ucy5vbmVycm9yID0gZnVuY3Rpb24oZSkge1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGUgPSBlIHx8IGV2ZW50O1xyXG5cdFx0XHRcdHZhciB1bndyYXAgPSAoZS50eXBlID09IFwibG9hZFwiID8geGhyT3B0aW9ucy51bndyYXBTdWNjZXNzIDogeGhyT3B0aW9ucy51bndyYXBFcnJvcikgfHwgaWRlbnRpdHk7XHJcblx0XHRcdFx0dmFyIHJlc3BvbnNlID0gdW53cmFwKGRlc2VyaWFsaXplKGV4dHJhY3QoZS50YXJnZXQsIHhock9wdGlvbnMpKSk7XHJcblx0XHRcdFx0aWYgKGUudHlwZSA9PSBcImxvYWRcIikge1xyXG5cdFx0XHRcdFx0aWYgKHR5cGUuY2FsbChyZXNwb25zZSkgPT0gQVJSQVkgJiYgeGhyT3B0aW9ucy50eXBlKSB7XHJcblx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcmVzcG9uc2UubGVuZ3RoOyBpKyspIHJlc3BvbnNlW2ldID0gbmV3IHhock9wdGlvbnMudHlwZShyZXNwb25zZVtpXSlcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2UgaWYgKHhock9wdGlvbnMudHlwZSkgcmVzcG9uc2UgPSBuZXcgeGhyT3B0aW9ucy50eXBlKHJlc3BvbnNlKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRkZWZlcnJlZFtlLnR5cGUgPT0gXCJsb2FkXCIgPyBcInJlc29sdmVcIiA6IFwicmVqZWN0XCJdKHJlc3BvbnNlKVxyXG5cdFx0XHR9XHJcblx0XHRcdGNhdGNoIChlKSB7XHJcblx0XHRcdFx0bS5kZWZlcnJlZC5vbmVycm9yKGUpO1xyXG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdChlKVxyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh4aHJPcHRpb25zLmJhY2tncm91bmQgIT09IHRydWUpIG0uZW5kQ29tcHV0YXRpb24oKVxyXG5cdFx0fTtcclxuXHRcdGFqYXgoeGhyT3B0aW9ucyk7XHJcblx0XHRkZWZlcnJlZC5wcm9taXNlKHhock9wdGlvbnMuaW5pdGlhbFZhbHVlKTtcclxuXHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlXHJcblx0fTtcclxuXHJcblx0Ly90ZXN0aW5nIEFQSVxyXG5cdG0uZGVwcyA9IGZ1bmN0aW9uKG1vY2spIHtcclxuXHRcdGluaXRpYWxpemUod2luZG93ID0gbW9jayB8fCB3aW5kb3cpO1xyXG5cdFx0cmV0dXJuIHdpbmRvdztcclxuXHR9O1xyXG5cdC8vZm9yIGludGVybmFsIHRlc3Rpbmcgb25seSwgZG8gbm90IHVzZSBgbS5kZXBzLmZhY3RvcnlgXHJcblx0bS5kZXBzLmZhY3RvcnkgPSBhcHA7XHJcblxyXG5cdHJldHVybiBtXHJcbn0pKHR5cGVvZiB3aW5kb3cgIT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KTtcclxuXHJcbmlmICh0eXBlb2YgbW9kdWxlICE9IFwidW5kZWZpbmVkXCIgJiYgbW9kdWxlICE9PSBudWxsICYmIG1vZHVsZS5leHBvcnRzKSBtb2R1bGUuZXhwb3J0cyA9IG07XHJcbmVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIGRlZmluZShmdW5jdGlvbigpIHtyZXR1cm4gbX0pO1xyXG4iLCJ3aW5kb3cucmlwcGxlcz17aW5pdDpmdW5jdGlvbihuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBvKG4sdCl7dmFyIGk9bi5tYXRjaGVzfHxuLm1hdGNoZXNTZWxlY3Rvcnx8bi53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG4ubW96TWF0Y2hlc1NlbGVjdG9yfHxuLm1zTWF0Y2hlc1NlbGVjdG9yfHxuLm9NYXRjaGVzU2VsZWN0b3I7cmV0dXJuIGkuY2FsbChuLHQpfXZhciBzPTEwMCxoPTUwMCx0PWZ1bmN0aW9uKG4sdCxpKXt0eXBlb2Ygbj09XCJzdHJpbmdcIiYmKG49W25dKTtuLmZvckVhY2goZnVuY3Rpb24obil7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihuLGZ1bmN0aW9uKG4pe3ZhciByPXR5cGVvZiBuLmRldGFpbCE9XCJudW1iZXJcIj9uLmRldGFpbDpuLnRhcmdldDtvKHIsdCkmJmkobixyKX0pfSl9LHI9ZnVuY3Rpb24obix0LGkpe3ZhciBzPXQsbD1zLnBhcmVudE5vZGUscj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHU9bC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxjPXt4Om4uY2xpZW50WC11LmxlZnQseTood2luZG93Lm9udG91Y2hzdGFydD9uLmNsaWVudFktd2luZG93LnNjcm9sbFk6bi5jbGllbnRZKS11LnRvcH0sZj1cInNjYWxlKFwiK01hdGgucm91bmQocy5vZmZzZXRXaWR0aC81KStcIilcIix2PW5ldyBDdXN0b21FdmVudChcInJpcHBsZUVuZFwiLHtkZXRhaWw6cn0pLHksbyxhO24udG91Y2hlcyYmKGM9e3g6bi50b3VjaGVzWzBdLmNsaWVudFgtdS5sZWZ0LHk6bi50b3VjaGVzWzBdLmNsaWVudFktdS50b3B9KTtlPXI7ci5jbGFzc05hbWU9XCJyaXBwbGVcIjtyLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJsZWZ0OlwiK2MueCtcInB4OyB0b3A6XCIrYy55K1wicHg7XCIpO289d2luZG93LmdldENvbXB1dGVkU3R5bGUobCkuY29sb3I7bz1vLnJlcGxhY2UoXCJyZ2JcIixcInJnYmFcIikucmVwbGFjZShcIilcIixcIiwgXCIrLjMrXCIpXCIpO3MuYXBwZW5kQ2hpbGQocik7eT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShyKS5vcGFjaXR5O3IuZGF0YXNldC5hbmltYXRpbmc9MTtyLmNsYXNzTmFtZT1cInJpcHBsZSByaXBwbGUtb25cIjthPVtyLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpLFwiYmFja2dyb3VuZC1jb2xvcjogXCIrbyxcIi1tcy10cmFuc2Zvcm06IFwiK2YsXCItbW96LXRyYW5zZm9ybVwiK2YsXCItd2Via2l0LXRyYW5zZm9ybVwiK2YsXCJ0cmFuc2Zvcm06IFwiK2ZdO3Iuc2V0QXR0cmlidXRlKFwic3R5bGVcIixhLmpvaW4oXCI7XCIpKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci5kYXRhc2V0LmFuaW1hdGluZz0wO2RvY3VtZW50LmRpc3BhdGNoRXZlbnQodik7aSYmaSgpfSxoKX0sdT1mdW5jdGlvbihuKXtuLmNsYXNzTmFtZT1cInJpcHBsZSByaXBwbGUtb24gcmlwcGxlLW91dFwiO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtuLnJlbW92ZSgpfSxzKX0saT0hMSxmLGU7dChbXCJtb3VzZWRvd25cIixcInRvdWNoc3RhcnRcIl0sXCIqXCIsZnVuY3Rpb24oKXtpPSEwfSk7dChbXCJtb3VzZXVwXCIsXCJ0b3VjaGVuZFwiLFwibW91c2VvdXRcIl0sXCIqXCIsZnVuY3Rpb24oKXtpPSExfSk7Zj1mdW5jdGlvbihuLHQpe2lmKHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInJpcHBsZS13cmFwcGVyXCIpLmxlbmd0aD09PTApe3QuY2xhc3NOYW1lKz1cIiB3aXRocmlwcGxlXCI7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpLmNsYXNzTmFtZT1cInJpcHBsZS13cmFwcGVyXCI7dC5hcHBlbmRDaGlsZChpKTt3aW5kb3cub250b3VjaHN0YXJ0PT09bnVsbCYmcihuLGksZnVuY3Rpb24oKXtpLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJyaXBwbGVcIilbMF0ucmVtb3ZlKCl9KX19O3QoW1wibW91c2VvdmVyXCIsXCJ0b3VjaHN0YXJ0XCJdLG4sZik7dChbXCJtb3VzZWRvd25cIixcInRvdWNoc3RhcnRcIl0sXCIucmlwcGxlLXdyYXBwZXJcIixmdW5jdGlvbihuLHQpeyhuLndoaWNoPT09MHx8bi53aGljaD09PTF8fG4ud2hpY2g9PT0yKSYmcihuLHQpfSk7dChcInJpcHBsZUVuZFwiLFwiLnJpcHBsZS13cmFwcGVyIC5yaXBwbGVcIixmdW5jdGlvbihuLHQpe3ZhciByPXQucGFyZW50Tm9kZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwicmlwcGxlXCIpOyghaXx8clswXT09dCYmci5sZW5ndGg+MSkmJnUodCl9KTt0KFtcIm1vdXNldXBcIixcInRvdWNoZW5kXCIsXCJtb3VzZW91dFwiXSxcIi5yaXBwbGUtd3JhcHBlclwiLGZ1bmN0aW9uKCl7dmFyIG49ZTtuJiZuLmRhdGFzZXQuYW5pbWF0aW5nIT0xJiZ1KG4pfSl9fTtcclxuLypcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmlwcGxlcy5taW4uanMubWFwXHJcbiovIiwiLyohIFZlbG9jaXR5SlMub3JnICgxLjEuMCkuIChDKSAyMDE0IEp1bGlhbiBTaGFwaXJvLiBNSVQgQGxpY2Vuc2U6IGVuLndpa2lwZWRpYS5vcmcvd2lraS9NSVRfTGljZW5zZSAqL1xyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgVmVsb2NpdHkgalF1ZXJ5IFNoaW1cclxuKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8qISBWZWxvY2l0eUpTLm9yZyBqUXVlcnkgU2hpbSAoMS4wLjEpLiAoQykgMjAxNCBUaGUgalF1ZXJ5IEZvdW5kYXRpb24uIE1JVCBAbGljZW5zZTogZW4ud2lraXBlZGlhLm9yZy93aWtpL01JVF9MaWNlbnNlLiAqL1xyXG5cclxuLyogVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBqUXVlcnkgZnVuY3Rpb25zIHRoYXQgVmVsb2NpdHkgcmVsaWVzIG9uLCB0aGVyZWJ5IHJlbW92aW5nIFZlbG9jaXR5J3MgZGVwZW5kZW5jeSBvbiBhIGZ1bGwgY29weSBvZiBqUXVlcnksIGFuZCBhbGxvd2luZyBpdCB0byB3b3JrIGluIGFueSBlbnZpcm9ubWVudC4gKi9cclxuLyogVGhlc2Ugc2hpbW1lZCBmdW5jdGlvbnMgYXJlIG9ubHkgdXNlZCBpZiBqUXVlcnkgaXNuJ3QgcHJlc2VudC4gSWYgYm90aCB0aGlzIHNoaW0gYW5kIGpRdWVyeSBhcmUgbG9hZGVkLCBWZWxvY2l0eSBkZWZhdWx0cyB0byBqUXVlcnkgcHJvcGVyLiAqL1xyXG4vKiBCcm93c2VyIHN1cHBvcnQ6IFVzaW5nIHRoaXMgc2hpbSBpbnN0ZWFkIG9mIGpRdWVyeSBwcm9wZXIgcmVtb3ZlcyBzdXBwb3J0IGZvciBJRTguICovXHJcblxyXG47KGZ1bmN0aW9uICh3aW5kb3cpIHtcclxuICAgIC8qKioqKioqKioqKioqKipcclxuICAgICAgICAgU2V0dXBcclxuICAgICoqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAvKiBJZiBqUXVlcnkgaXMgYWxyZWFkeSBsb2FkZWQsIHRoZXJlJ3Mgbm8gcG9pbnQgaW4gbG9hZGluZyB0aGlzIHNoaW0uICovXHJcbiAgICBpZiAod2luZG93LmpRdWVyeSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvKiBqUXVlcnkgYmFzZS4gKi9cclxuICAgIHZhciAkID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBjb250ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyAkLmZuLmluaXQoc2VsZWN0b3IsIGNvbnRleHQpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgIFByaXZhdGUgTWV0aG9kc1xyXG4gICAgKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgLyogalF1ZXJ5ICovXHJcbiAgICAkLmlzV2luZG93ID0gZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgIC8qIGpzaGludCBlcWVxZXE6IGZhbHNlICovXHJcbiAgICAgICAgcmV0dXJuIG9iaiAhPSBudWxsICYmIG9iaiA9PSBvYmoud2luZG93O1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiBqUXVlcnkgKi9cclxuICAgICQudHlwZSA9IGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICBpZiAob2JqID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9iaiArIFwiXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCIgP1xyXG4gICAgICAgICAgICBjbGFzczJ0eXBlW3RvU3RyaW5nLmNhbGwob2JqKV0gfHwgXCJvYmplY3RcIiA6XHJcbiAgICAgICAgICAgIHR5cGVvZiBvYmo7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qIGpRdWVyeSAqL1xyXG4gICAgJC5pc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgcmV0dXJuICQudHlwZShvYmopID09PSBcImFycmF5XCI7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qIGpRdWVyeSAqL1xyXG4gICAgZnVuY3Rpb24gaXNBcnJheWxpa2UgKG9iaikge1xyXG4gICAgICAgIHZhciBsZW5ndGggPSBvYmoubGVuZ3RoLFxyXG4gICAgICAgICAgICB0eXBlID0gJC50eXBlKG9iaik7XHJcblxyXG4gICAgICAgIGlmICh0eXBlID09PSBcImZ1bmN0aW9uXCIgfHwgJC5pc1dpbmRvdyhvYmopKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChvYmoubm9kZVR5cGUgPT09IDEgJiYgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHR5cGUgPT09IFwiYXJyYXlcIiB8fCBsZW5ndGggPT09IDAgfHwgdHlwZW9mIGxlbmd0aCA9PT0gXCJudW1iZXJcIiAmJiBsZW5ndGggPiAwICYmIChsZW5ndGggLSAxKSBpbiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKlxyXG4gICAgICAgJCBNZXRob2RzXHJcbiAgICAqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgLyogalF1ZXJ5OiBTdXBwb3J0IHJlbW92ZWQgZm9yIElFPDkuICovXHJcbiAgICAkLmlzUGxhaW5PYmplY3QgPSBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgdmFyIGtleTtcclxuXHJcbiAgICAgICAgaWYgKCFvYmogfHwgJC50eXBlKG9iaikgIT09IFwib2JqZWN0XCIgfHwgb2JqLm5vZGVUeXBlIHx8ICQuaXNXaW5kb3cob2JqKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAob2JqLmNvbnN0cnVjdG9yICYmXHJcbiAgICAgICAgICAgICAgICAhaGFzT3duLmNhbGwob2JqLCBcImNvbnN0cnVjdG9yXCIpICYmXHJcbiAgICAgICAgICAgICAgICAhaGFzT3duLmNhbGwob2JqLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwgXCJpc1Byb3RvdHlwZU9mXCIpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoa2V5IGluIG9iaikge31cclxuXHJcbiAgICAgICAgcmV0dXJuIGtleSA9PT0gdW5kZWZpbmVkIHx8IGhhc093bi5jYWxsKG9iaiwga2V5KTtcclxuICAgIH07XHJcblxyXG4gICAgLyogalF1ZXJ5ICovXHJcbiAgICAkLmVhY2ggPSBmdW5jdGlvbihvYmosIGNhbGxiYWNrLCBhcmdzKSB7XHJcbiAgICAgICAgdmFyIHZhbHVlLFxyXG4gICAgICAgICAgICBpID0gMCxcclxuICAgICAgICAgICAgbGVuZ3RoID0gb2JqLmxlbmd0aCxcclxuICAgICAgICAgICAgaXNBcnJheSA9IGlzQXJyYXlsaWtlKG9iaik7XHJcblxyXG4gICAgICAgIGlmIChhcmdzKSB7XHJcbiAgICAgICAgICAgIGlmIChpc0FycmF5KSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjYWxsYmFjay5hcHBseShvYmpbaV0sIGFyZ3MpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaSBpbiBvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNhbGxiYWNrLmFwcGx5KG9ialtpXSwgYXJncyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChpc0FycmF5KSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjYWxsYmFjay5jYWxsKG9ialtpXSwgaSwgb2JqW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjYWxsYmFjay5jYWxsKG9ialtpXSwgaSwgb2JqW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qIEN1c3RvbSAqL1xyXG4gICAgJC5kYXRhID0gZnVuY3Rpb24gKG5vZGUsIGtleSwgdmFsdWUpIHtcclxuICAgICAgICAvKiAkLmdldERhdGEoKSAqL1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHZhciBpZCA9IG5vZGVbJC5leHBhbmRvXSxcclxuICAgICAgICAgICAgICAgIHN0b3JlID0gaWQgJiYgY2FjaGVbaWRdO1xyXG5cclxuICAgICAgICAgICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RvcmUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gc3RvcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmVba2V5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIC8qICQuc2V0RGF0YSgpICovXHJcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB2YXIgaWQgPSBub2RlWyQuZXhwYW5kb10gfHwgKG5vZGVbJC5leHBhbmRvXSA9ICsrJC51dWlkKTtcclxuXHJcbiAgICAgICAgICAgIGNhY2hlW2lkXSA9IGNhY2hlW2lkXSB8fCB7fTtcclxuICAgICAgICAgICAgY2FjaGVbaWRdW2tleV0gPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qIEN1c3RvbSAqL1xyXG4gICAgJC5yZW1vdmVEYXRhID0gZnVuY3Rpb24gKG5vZGUsIGtleXMpIHtcclxuICAgICAgICB2YXIgaWQgPSBub2RlWyQuZXhwYW5kb10sXHJcbiAgICAgICAgICAgIHN0b3JlID0gaWQgJiYgY2FjaGVbaWRdO1xyXG5cclxuICAgICAgICBpZiAoc3RvcmUpIHtcclxuICAgICAgICAgICAgJC5lYWNoKGtleXMsIGZ1bmN0aW9uKF8sIGtleSkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHN0b3JlW2tleV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyogalF1ZXJ5ICovXHJcbiAgICAkLmV4dGVuZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc3JjLCBjb3B5SXNBcnJheSwgY29weSwgbmFtZSwgb3B0aW9ucywgY2xvbmUsXHJcbiAgICAgICAgICAgIHRhcmdldCA9IGFyZ3VtZW50c1swXSB8fCB7fSxcclxuICAgICAgICAgICAgaSA9IDEsXHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsXHJcbiAgICAgICAgICAgIGRlZXAgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiB0YXJnZXQgPT09IFwiYm9vbGVhblwiKSB7XHJcbiAgICAgICAgICAgIGRlZXAgPSB0YXJnZXQ7XHJcblxyXG4gICAgICAgICAgICB0YXJnZXQgPSBhcmd1bWVudHNbaV0gfHwge307XHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0ICE9PSBcIm9iamVjdFwiICYmICQudHlwZSh0YXJnZXQpICE9PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgdGFyZ2V0ID0ge307XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaSA9PT0gbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRhcmdldCA9IHRoaXM7XHJcbiAgICAgICAgICAgIGktLTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKChvcHRpb25zID0gYXJndW1lbnRzW2ldKSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKG5hbWUgaW4gb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNyYyA9IHRhcmdldFtuYW1lXTtcclxuICAgICAgICAgICAgICAgICAgICBjb3B5ID0gb3B0aW9uc1tuYW1lXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gY29weSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWVwICYmIGNvcHkgJiYgKCQuaXNQbGFpbk9iamVjdChjb3B5KSB8fCAoY29weUlzQXJyYXkgPSAkLmlzQXJyYXkoY29weSkpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29weUlzQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlJc0FycmF5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZSA9IHNyYyAmJiAkLmlzQXJyYXkoc3JjKSA/IHNyYyA6IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lID0gc3JjICYmICQuaXNQbGFpbk9iamVjdChzcmMpID8gc3JjIDoge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFtuYW1lXSA9ICQuZXh0ZW5kKGRlZXAsIGNsb25lLCBjb3B5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb3B5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W25hbWVdID0gY29weTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qIGpRdWVyeSAxLjQuMyAqL1xyXG4gICAgJC5xdWV1ZSA9IGZ1bmN0aW9uIChlbGVtLCB0eXBlLCBkYXRhKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gJG1ha2VBcnJheSAoYXJyLCByZXN1bHRzKSB7XHJcbiAgICAgICAgICAgIHZhciByZXQgPSByZXN1bHRzIHx8IFtdO1xyXG5cclxuICAgICAgICAgICAgaWYgKGFyciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheWxpa2UoT2JqZWN0KGFycikpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogJC5tZXJnZSAqL1xyXG4gICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbihmaXJzdCwgc2Vjb25kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZW4gPSArc2Vjb25kLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGogPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGZpcnN0Lmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChqIDwgbGVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdFtpKytdID0gc2Vjb25kW2orK107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZW4gIT09IGxlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHNlY29uZFtqXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RbaSsrXSA9IHNlY29uZFtqKytdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdC5sZW5ndGggPSBpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKHJldCwgdHlwZW9mIGFyciA9PT0gXCJzdHJpbmdcIiA/IFthcnJdIDogYXJyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgW10ucHVzaC5jYWxsKHJldCwgYXJyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghZWxlbSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0eXBlID0gKHR5cGUgfHwgXCJmeFwiKSArIFwicXVldWVcIjtcclxuXHJcbiAgICAgICAgdmFyIHEgPSAkLmRhdGEoZWxlbSwgdHlwZSk7XHJcblxyXG4gICAgICAgIGlmICghZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcSB8fCBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghcSB8fCAkLmlzQXJyYXkoZGF0YSkpIHtcclxuICAgICAgICAgICAgcSA9ICQuZGF0YShlbGVtLCB0eXBlLCAkbWFrZUFycmF5KGRhdGEpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBxLnB1c2goZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcTtcclxuICAgIH07XHJcblxyXG4gICAgLyogalF1ZXJ5IDEuNC4zICovXHJcbiAgICAkLmRlcXVldWUgPSBmdW5jdGlvbiAoZWxlbXMsIHR5cGUpIHtcclxuICAgICAgICAvKiBDdXN0b206IEVtYmVkIGVsZW1lbnQgaXRlcmF0aW9uLiAqL1xyXG4gICAgICAgICQuZWFjaChlbGVtcy5ub2RlVHlwZSA/IFsgZWxlbXMgXSA6IGVsZW1zLCBmdW5jdGlvbihpLCBlbGVtKSB7XHJcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcclxuXHJcbiAgICAgICAgICAgIHZhciBxdWV1ZSA9ICQucXVldWUoZWxlbSwgdHlwZSksXHJcbiAgICAgICAgICAgICAgICBmbiA9IHF1ZXVlLnNoaWZ0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZm4gPT09IFwiaW5wcm9ncmVzc1wiKSB7XHJcbiAgICAgICAgICAgICAgICBmbiA9IHF1ZXVlLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChmbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IFwiZnhcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLnVuc2hpZnQoXCJpbnByb2dyZXNzXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZuLmNhbGwoZWxlbSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5kZXF1ZXVlKGVsZW0sIHR5cGUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgJC5mbiBNZXRob2RzXHJcbiAgICAqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgLyogalF1ZXJ5ICovXHJcbiAgICAkLmZuID0gJC5wcm90b3R5cGUgPSB7XHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKHNlbGVjdG9yKSB7XHJcbiAgICAgICAgICAgIC8qIEp1c3QgcmV0dXJuIHRoZSBlbGVtZW50IHdyYXBwZWQgaW5zaWRlIGFuIGFycmF5OyBkb24ndCBwcm9jZWVkIHdpdGggdGhlIGFjdHVhbCBqUXVlcnkgbm9kZSB3cmFwcGluZyBwcm9jZXNzLiAqL1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0b3Iubm9kZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXNbMF0gPSBzZWxlY3RvcjtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBhIERPTSBub2RlLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIG9mZnNldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvKiBqUXVlcnkgYWx0ZXJlZCBjb2RlOiBEcm9wcGVkIGRpc2Nvbm5lY3RlZCBET00gbm9kZSBjaGVja2luZy4gKi9cclxuICAgICAgICAgICAgdmFyIGJveCA9IHRoaXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0ID8gdGhpc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSA6IHsgdG9wOiAwLCBsZWZ0OiAwIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdG9wOiBib3gudG9wICsgKHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5zY3JvbGxUb3AgIHx8IDApICAtIChkb2N1bWVudC5jbGllbnRUb3AgIHx8IDApLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogYm94LmxlZnQgKyAod2luZG93LnBhZ2VYT2Zmc2V0IHx8IGRvY3VtZW50LnNjcm9sbExlZnQgIHx8IDApIC0gKGRvY3VtZW50LmNsaWVudExlZnQgfHwgMClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBwb3NpdGlvbjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvKiBqUXVlcnkgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gb2Zmc2V0UGFyZW50KCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50IHx8IGRvY3VtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlIChvZmZzZXRQYXJlbnQgJiYgKCFvZmZzZXRQYXJlbnQubm9kZVR5cGUudG9Mb3dlckNhc2UgPT09IFwiaHRtbFwiICYmIG9mZnNldFBhcmVudC5zdHlsZS5wb3NpdGlvbiA9PT0gXCJzdGF0aWNcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0UGFyZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBvZmZzZXRQYXJlbnQgfHwgZG9jdW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qIFplcHRvICovXHJcbiAgICAgICAgICAgIHZhciBlbGVtID0gdGhpc1swXSxcclxuICAgICAgICAgICAgICAgIG9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudC5hcHBseShlbGVtKSxcclxuICAgICAgICAgICAgICAgIG9mZnNldCA9IHRoaXMub2Zmc2V0KCksXHJcbiAgICAgICAgICAgICAgICBwYXJlbnRPZmZzZXQgPSAvXig/OmJvZHl8aHRtbCkkL2kudGVzdChvZmZzZXRQYXJlbnQubm9kZU5hbWUpID8geyB0b3A6IDAsIGxlZnQ6IDAgfSA6ICQob2Zmc2V0UGFyZW50KS5vZmZzZXQoKVxyXG5cclxuICAgICAgICAgICAgb2Zmc2V0LnRvcCAtPSBwYXJzZUZsb2F0KGVsZW0uc3R5bGUubWFyZ2luVG9wKSB8fCAwO1xyXG4gICAgICAgICAgICBvZmZzZXQubGVmdCAtPSBwYXJzZUZsb2F0KGVsZW0uc3R5bGUubWFyZ2luTGVmdCkgfHwgMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChvZmZzZXRQYXJlbnQuc3R5bGUpIHtcclxuICAgICAgICAgICAgICAgIHBhcmVudE9mZnNldC50b3AgKz0gcGFyc2VGbG9hdChvZmZzZXRQYXJlbnQuc3R5bGUuYm9yZGVyVG9wV2lkdGgpIHx8IDBcclxuICAgICAgICAgICAgICAgIHBhcmVudE9mZnNldC5sZWZ0ICs9IHBhcnNlRmxvYXQob2Zmc2V0UGFyZW50LnN0eWxlLmJvcmRlckxlZnRXaWR0aCkgfHwgMFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdG9wOiBvZmZzZXQudG9wIC0gcGFyZW50T2Zmc2V0LnRvcCxcclxuICAgICAgICAgICAgICAgIGxlZnQ6IG9mZnNldC5sZWZ0IC0gcGFyZW50T2Zmc2V0LmxlZnRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICBQcml2YXRlIFZhcmlhYmxlc1xyXG4gICAgKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAvKiBGb3IgJC5kYXRhKCkgKi9cclxuICAgIHZhciBjYWNoZSA9IHt9O1xyXG4gICAgJC5leHBhbmRvID0gXCJ2ZWxvY2l0eVwiICsgKG5ldyBEYXRlKCkuZ2V0VGltZSgpKTtcclxuICAgICQudXVpZCA9IDA7XHJcblxyXG4gICAgLyogRm9yICQucXVldWUoKSAqL1xyXG4gICAgdmFyIGNsYXNzMnR5cGUgPSB7fSxcclxuICAgICAgICBoYXNPd24gPSBjbGFzczJ0eXBlLmhhc093blByb3BlcnR5LFxyXG4gICAgICAgIHRvU3RyaW5nID0gY2xhc3MydHlwZS50b1N0cmluZztcclxuXHJcbiAgICB2YXIgdHlwZXMgPSBcIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3JcIi5zcGxpdChcIiBcIik7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR5cGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY2xhc3MydHlwZVtcIltvYmplY3QgXCIgKyB0eXBlc1tpXSArIFwiXVwiXSA9IHR5cGVzW2ldLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyogTWFrZXMgJChub2RlKSBwb3NzaWJsZSwgd2l0aG91dCBoYXZpbmcgdG8gY2FsbCBpbml0LiAqL1xyXG4gICAgJC5mbi5pbml0LnByb3RvdHlwZSA9ICQuZm47XHJcblxyXG4gICAgLyogR2xvYmFsaXplIFZlbG9jaXR5IG9udG8gdGhlIHdpbmRvdywgYW5kIGFzc2lnbiBpdHMgVXRpbGl0aWVzIHByb3BlcnR5LiAqL1xyXG4gICAgd2luZG93LlZlbG9jaXR5ID0geyBVdGlsaXRpZXM6ICQgfTtcclxufSkod2luZG93KTtcclxuXHJcbi8qKioqKioqKioqKioqKioqKipcclxuICAgIFZlbG9jaXR5LmpzXHJcbioqKioqKioqKioqKioqKioqKi9cclxuXHJcbjsoZnVuY3Rpb24gKGZhY3RvcnkpIHtcclxuICAgIC8qIENvbW1vbkpTIG1vZHVsZS4gKi9cclxuICAgIGlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xyXG4gICAgLyogQU1EIG1vZHVsZS4gKi9cclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcclxuICAgICAgICBkZWZpbmUoZmFjdG9yeSk7XHJcbiAgICAvKiBCcm93c2VyIGdsb2JhbHMuICovXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZhY3RvcnkoKTtcclxuICAgIH1cclxufShmdW5jdGlvbigpIHtcclxucmV0dXJuIGZ1bmN0aW9uIChnbG9iYWwsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xyXG5cclxuICAgIC8qKioqKioqKioqKioqKipcclxuICAgICAgICBTdW1tYXJ5XHJcbiAgICAqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgLypcclxuICAgIC0gQ1NTOiBDU1Mgc3RhY2sgdGhhdCB3b3JrcyBpbmRlcGVuZGVudGx5IGZyb20gdGhlIHJlc3Qgb2YgVmVsb2NpdHkuXHJcbiAgICAtIGFuaW1hdGUoKTogQ29yZSBhbmltYXRpb24gbWV0aG9kIHRoYXQgaXRlcmF0ZXMgb3ZlciB0aGUgdGFyZ2V0ZWQgZWxlbWVudHMgYW5kIHF1ZXVlcyB0aGUgaW5jb21pbmcgY2FsbCBvbnRvIGVhY2ggZWxlbWVudCBpbmRpdmlkdWFsbHkuXHJcbiAgICAgIC0gUHJlLVF1ZXVlaW5nOiBQcmVwYXJlIHRoZSBlbGVtZW50IGZvciBhbmltYXRpb24gYnkgaW5zdGFudGlhdGluZyBpdHMgZGF0YSBjYWNoZSBhbmQgcHJvY2Vzc2luZyB0aGUgY2FsbCdzIG9wdGlvbnMuXHJcbiAgICAgIC0gUXVldWVpbmc6IFRoZSBsb2dpYyB0aGF0IHJ1bnMgb25jZSB0aGUgY2FsbCBoYXMgcmVhY2hlZCBpdHMgcG9pbnQgb2YgZXhlY3V0aW9uIGluIHRoZSBlbGVtZW50J3MgJC5xdWV1ZSgpIHN0YWNrLlxyXG4gICAgICAgICAgICAgICAgICBNb3N0IGxvZ2ljIGlzIHBsYWNlZCBoZXJlIHRvIGF2b2lkIHJpc2tpbmcgaXQgYmVjb21pbmcgc3RhbGUgKGlmIHRoZSBlbGVtZW50J3MgcHJvcGVydGllcyBoYXZlIGNoYW5nZWQpLlxyXG4gICAgICAtIFB1c2hpbmc6IENvbnNvbGlkYXRpb24gb2YgdGhlIHR3ZWVuIGRhdGEgZm9sbG93ZWQgYnkgaXRzIHB1c2ggb250byB0aGUgZ2xvYmFsIGluLXByb2dyZXNzIGNhbGxzIGNvbnRhaW5lci5cclxuICAgIC0gdGljaygpOiBUaGUgc2luZ2xlIHJlcXVlc3RBbmltYXRpb25GcmFtZSBsb29wIHJlc3BvbnNpYmxlIGZvciB0d2VlbmluZyBhbGwgaW4tcHJvZ3Jlc3MgY2FsbHMuXHJcbiAgICAtIGNvbXBsZXRlQ2FsbCgpOiBIYW5kbGVzIHRoZSBjbGVhbnVwIHByb2Nlc3MgZm9yIGVhY2ggVmVsb2NpdHkgY2FsbC5cclxuICAgICovXHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgSGVscGVyIEZ1bmN0aW9uc1xyXG4gICAgKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgIC8qIElFIGRldGVjdGlvbi4gR2lzdDogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vanVsaWFuc2hhcGlyby85MDk4NjA5ICovXHJcbiAgICB2YXIgSUUgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LmRvY3VtZW50TW9kZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRNb2RlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSA3OyBpID4gNDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gXCI8IS0tW2lmIElFIFwiICsgaSArIFwiXT48c3Bhbj48L3NwYW4+PCFbZW5kaWZdLS0+XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNwYW5cIikubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGl2ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIC8qIHJBRiBzaGltLiBHaXN0OiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9qdWxpYW5zaGFwaXJvLzk0OTc1MTMgKi9cclxuICAgIHZhciByQUZTaGltID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciB0aW1lTGFzdCA9IDA7XHJcblxyXG4gICAgICAgIHJldHVybiB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdmFyIHRpbWVDdXJyZW50ID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKSxcclxuICAgICAgICAgICAgICAgIHRpbWVEZWx0YTtcclxuXHJcbiAgICAgICAgICAgIC8qIER5bmFtaWNhbGx5IHNldCBkZWxheSBvbiBhIHBlci10aWNrIGJhc2lzIHRvIG1hdGNoIDYwZnBzLiAqL1xyXG4gICAgICAgICAgICAvKiBUZWNobmlxdWUgYnkgRXJpayBNb2xsZXIuIE1JVCBsaWNlbnNlOiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9wYXVsaXJpc2gvMTU3OTY3MSAqL1xyXG4gICAgICAgICAgICB0aW1lRGVsdGEgPSBNYXRoLm1heCgwLCAxNiAtICh0aW1lQ3VycmVudCAtIHRpbWVMYXN0KSk7XHJcbiAgICAgICAgICAgIHRpbWVMYXN0ID0gdGltZUN1cnJlbnQgKyB0aW1lRGVsdGE7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHsgY2FsbGJhY2sodGltZUN1cnJlbnQgKyB0aW1lRGVsdGEpOyB9LCB0aW1lRGVsdGEpO1xyXG4gICAgICAgIH07XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIC8qIEFycmF5IGNvbXBhY3RpbmcuIENvcHlyaWdodCBMby1EYXNoLiBNSVQgTGljZW5zZTogaHR0cHM6Ly9naXRodWIuY29tL2xvZGFzaC9sb2Rhc2gvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cclxuICAgIGZ1bmN0aW9uIGNvbXBhY3RTcGFyc2VBcnJheSAoYXJyYXkpIHtcclxuICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwLFxyXG4gICAgICAgICAgICByZXN1bHQgPSBbXTtcclxuXHJcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2FuaXRpemVFbGVtZW50cyAoZWxlbWVudHMpIHtcclxuICAgICAgICAvKiBVbndyYXAgalF1ZXJ5L1plcHRvIG9iamVjdHMuICovXHJcbiAgICAgICAgaWYgKFR5cGUuaXNXcmFwcGVkKGVsZW1lbnRzKSkge1xyXG4gICAgICAgICAgICBlbGVtZW50cyA9IFtdLnNsaWNlLmNhbGwoZWxlbWVudHMpO1xyXG4gICAgICAgIC8qIFdyYXAgYSBzaW5nbGUgZWxlbWVudCBpbiBhbiBhcnJheSBzbyB0aGF0ICQuZWFjaCgpIGNhbiBpdGVyYXRlIHdpdGggdGhlIGVsZW1lbnQgaW5zdGVhZCBvZiBpdHMgbm9kZSdzIGNoaWxkcmVuLiAqL1xyXG4gICAgICAgIH0gZWxzZSBpZiAoVHlwZS5pc05vZGUoZWxlbWVudHMpKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnRzID0gWyBlbGVtZW50cyBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBUeXBlID0ge1xyXG4gICAgICAgIGlzU3RyaW5nOiBmdW5jdGlvbiAodmFyaWFibGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuICh0eXBlb2YgdmFyaWFibGUgPT09IFwic3RyaW5nXCIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaXNBcnJheTogQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAodmFyaWFibGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YXJpYWJsZSkgPT09IFwiW29iamVjdCBBcnJheV1cIjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGlzRnVuY3Rpb246IGZ1bmN0aW9uICh2YXJpYWJsZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhcmlhYmxlKSA9PT0gXCJbb2JqZWN0IEZ1bmN0aW9uXVwiO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaXNOb2RlOiBmdW5jdGlvbiAodmFyaWFibGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhcmlhYmxlICYmIHZhcmlhYmxlLm5vZGVUeXBlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLyogQ29weXJpZ2h0IE1hcnRpbiBCb2htLiBNSVQgTGljZW5zZTogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vVG9tYWxhay84MThhNzhhMjI2YTA3MzhlYWFkZSAqL1xyXG4gICAgICAgIGlzTm9kZUxpc3Q6IGZ1bmN0aW9uICh2YXJpYWJsZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHZhcmlhYmxlID09PSBcIm9iamVjdFwiICYmXHJcbiAgICAgICAgICAgICAgICAvXlxcW29iamVjdCAoSFRNTENvbGxlY3Rpb258Tm9kZUxpc3R8T2JqZWN0KVxcXSQvLnRlc3QoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhcmlhYmxlKSkgJiZcclxuICAgICAgICAgICAgICAgIHZhcmlhYmxlLmxlbmd0aCAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgICAodmFyaWFibGUubGVuZ3RoID09PSAwIHx8ICh0eXBlb2YgdmFyaWFibGVbMF0gPT09IFwib2JqZWN0XCIgJiYgdmFyaWFibGVbMF0ubm9kZVR5cGUgPiAwKSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAvKiBEZXRlcm1pbmUgaWYgdmFyaWFibGUgaXMgYSB3cmFwcGVkIGpRdWVyeSBvciBaZXB0byBlbGVtZW50LiAqL1xyXG4gICAgICAgIGlzV3JhcHBlZDogZnVuY3Rpb24gKHZhcmlhYmxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YXJpYWJsZSAmJiAodmFyaWFibGUuanF1ZXJ5IHx8ICh3aW5kb3cuWmVwdG8gJiYgd2luZG93LlplcHRvLnplcHRvLmlzWih2YXJpYWJsZSkpKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGlzU1ZHOiBmdW5jdGlvbiAodmFyaWFibGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5TVkdFbGVtZW50ICYmICh2YXJpYWJsZSBpbnN0YW5jZW9mIHdpbmRvdy5TVkdFbGVtZW50KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGlzRW1wdHlPYmplY3Q6IGZ1bmN0aW9uICh2YXJpYWJsZSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBuYW1lIGluIHZhcmlhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKioqXHJcbiAgICAgICBEZXBlbmRlbmNpZXNcclxuICAgICoqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgIHZhciAkLFxyXG4gICAgICAgIGlzSlF1ZXJ5ID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKGdsb2JhbC5mbiAmJiBnbG9iYWwuZm4uanF1ZXJ5KSB7XHJcbiAgICAgICAgJCA9IGdsb2JhbDtcclxuICAgICAgICBpc0pRdWVyeSA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQgPSB3aW5kb3cuVmVsb2NpdHkuVXRpbGl0aWVzO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChJRSA8PSA4ICYmICFpc0pRdWVyeSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlZlbG9jaXR5OiBJRTggYW5kIGJlbG93IHJlcXVpcmUgalF1ZXJ5IHRvIGJlIGxvYWRlZCBiZWZvcmUgVmVsb2NpdHkuXCIpO1xyXG4gICAgfSBlbHNlIGlmIChJRSA8PSA3KSB7XHJcbiAgICAgICAgLyogUmV2ZXJ0IHRvIGpRdWVyeSdzICQuYW5pbWF0ZSgpLCBhbmQgbG9zZSBWZWxvY2l0eSdzIGV4dHJhIGZlYXR1cmVzLiAqL1xyXG4gICAgICAgIGpRdWVyeS5mbi52ZWxvY2l0eSA9IGpRdWVyeS5mbi5hbmltYXRlO1xyXG5cclxuICAgICAgICAvKiBOb3cgdGhhdCAkLmZuLnZlbG9jaXR5IGlzIGFsaWFzZWQsIGFib3J0IHRoaXMgVmVsb2NpdHkgZGVjbGFyYXRpb24uICovXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKioqKioqKioqKioqKioqKlxyXG4gICAgICAgIENvbnN0YW50c1xyXG4gICAgKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgdmFyIERVUkFUSU9OX0RFRkFVTFQgPSA0MDAsXHJcbiAgICAgICAgRUFTSU5HX0RFRkFVTFQgPSBcInN3aW5nXCI7XHJcblxyXG4gICAgLyoqKioqKioqKioqKipcclxuICAgICAgICBTdGF0ZVxyXG4gICAgKioqKioqKioqKioqKi9cclxuXHJcbiAgICAvKiBOb3RlOiBUaGUgZ2xvYmFsIG9iamVjdCBhbHNvIGRvdWJsZXMgYXMgYSBwdWJsaWNseS1hY2Nlc3NpYmxlIGRhdGEgc3RvcmUgZm9yIHRoZSBwdXJwb3NlcyBvZiB1bml0IHRlc3RpbmcuICovXHJcbiAgICAvKiBOb3RlOiBBbGlhcyB0aGUgbG93ZXJjYXNlIGFuZCB1cHBlcmNhc2UgdmFyaWFudHMgb2YgXCJ2ZWxvY2l0eVwiIHRvIG1pbmltaXplIHVzZXIgY29uZnVzaW9uIGR1ZSB0byB0aGUgbG93ZXJjYXNlIG5hdHVyZSBvZiB0aGUgJC5mbiBleHRlbnNpb24uICovXHJcbiAgICB2YXIgVmVsb2NpdHkgPSB7XHJcbiAgICAgICAgLyogQ29udGFpbmVyIGZvciBwYWdlLXdpZGUgVmVsb2NpdHkgc3RhdGUgZGF0YS4gKi9cclxuICAgICAgICBTdGF0ZToge1xyXG4gICAgICAgICAgICAvKiBEZXRlY3QgbW9iaWxlIGRldmljZXMgdG8gZGV0ZXJtaW5lIGlmIG1vYmlsZUhBIHNob3VsZCBiZSB0dXJuZWQgb24uICovXHJcbiAgICAgICAgICAgIGlzTW9iaWxlOiAvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksXHJcbiAgICAgICAgICAgIC8qIFRoZSBtb2JpbGVIQSBvcHRpb24ncyBiZWhhdmlvciBjaGFuZ2VzIG9uIG9sZGVyIEFuZHJvaWQgZGV2aWNlcyAoR2luZ2VyYnJlYWQsIHZlcnNpb25zIDIuMy4zLTIuMy43KS4gKi9cclxuICAgICAgICAgICAgaXNBbmRyb2lkOiAvQW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksXHJcbiAgICAgICAgICAgIGlzR2luZ2VyYnJlYWQ6IC9BbmRyb2lkIDJcXC4zXFwuWzMtN10vaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLFxyXG4gICAgICAgICAgICBpc0Nocm9tZTogd2luZG93LmNocm9tZSxcclxuICAgICAgICAgICAgaXNGaXJlZm94OiAvRmlyZWZveC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksXHJcbiAgICAgICAgICAgIC8qIENyZWF0ZSBhIGNhY2hlZCBlbGVtZW50IGZvciByZS11c2Ugd2hlbiBjaGVja2luZyBmb3IgQ1NTIHByb3BlcnR5IHByZWZpeGVzLiAqL1xyXG4gICAgICAgICAgICBwcmVmaXhFbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxyXG4gICAgICAgICAgICAvKiBDYWNoZSBldmVyeSBwcmVmaXggbWF0Y2ggdG8gYXZvaWQgcmVwZWF0aW5nIGxvb2t1cHMuICovXHJcbiAgICAgICAgICAgIHByZWZpeE1hdGNoZXM6IHt9LFxyXG4gICAgICAgICAgICAvKiBDYWNoZSB0aGUgYW5jaG9yIHVzZWQgZm9yIGFuaW1hdGluZyB3aW5kb3cgc2Nyb2xsaW5nLiAqL1xyXG4gICAgICAgICAgICBzY3JvbGxBbmNob3I6IG51bGwsXHJcbiAgICAgICAgICAgIC8qIENhY2hlIHRoZSBwcm9wZXJ0eSBuYW1lcyBhc3NvY2lhdGVkIHdpdGggdGhlIHNjcm9sbCBhbmNob3IuICovXHJcbiAgICAgICAgICAgIHNjcm9sbFByb3BlcnR5TGVmdDogbnVsbCxcclxuICAgICAgICAgICAgc2Nyb2xsUHJvcGVydHlUb3A6IG51bGwsXHJcbiAgICAgICAgICAgIC8qIEtlZXAgdHJhY2sgb2Ygd2hldGhlciBvdXIgUkFGIHRpY2sgaXMgcnVubmluZy4gKi9cclxuICAgICAgICAgICAgaXNUaWNraW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgLyogQ29udGFpbmVyIGZvciBldmVyeSBpbi1wcm9ncmVzcyBjYWxsIHRvIFZlbG9jaXR5LiAqL1xyXG4gICAgICAgICAgICBjYWxsczogW11cclxuICAgICAgICB9LFxyXG4gICAgICAgIC8qIFZlbG9jaXR5J3MgY3VzdG9tIENTUyBzdGFjay4gTWFkZSBnbG9iYWwgZm9yIHVuaXQgdGVzdGluZy4gKi9cclxuICAgICAgICBDU1M6IHsgLyogRGVmaW5lZCBiZWxvdy4gKi8gfSxcclxuICAgICAgICAvKiBEZWZpbmVkIGJ5IFZlbG9jaXR5J3Mgb3B0aW9uYWwgalF1ZXJ5IHNoaW0uICovXHJcbiAgICAgICAgVXRpbGl0aWVzOiAkLFxyXG4gICAgICAgIC8qIENvbnRhaW5lciBmb3IgdGhlIHVzZXIncyBjdXN0b20gYW5pbWF0aW9uIHJlZGlyZWN0cyB0aGF0IGFyZSByZWZlcmVuY2VkIGJ5IG5hbWUgaW4gcGxhY2Ugb2YgYSBwcm9wZXJ0aWVzIG1hcCBvYmplY3QuICovXHJcbiAgICAgICAgUmVkaXJlY3RzOiB7IC8qIE1hbnVhbGx5IHJlZ2lzdGVyZWQgYnkgdGhlIHVzZXIuICovIH0sXHJcbiAgICAgICAgRWFzaW5nczogeyAvKiBEZWZpbmVkIGJlbG93LiAqLyB9LFxyXG4gICAgICAgIC8qIEF0dGVtcHQgdG8gdXNlIEVTNiBQcm9taXNlcyBieSBkZWZhdWx0LiBVc2VycyBjYW4gb3ZlcnJpZGUgdGhpcyB3aXRoIGEgdGhpcmQtcGFydHkgcHJvbWlzZXMgbGlicmFyeS4gKi9cclxuICAgICAgICBQcm9taXNlOiB3aW5kb3cuUHJvbWlzZSxcclxuICAgICAgICAvKiBQYWdlLXdpZGUgb3B0aW9uIGRlZmF1bHRzLCB3aGljaCBjYW4gYmUgb3ZlcnJpZGVuIGJ5IHRoZSB1c2VyLiAqL1xyXG4gICAgICAgIGRlZmF1bHRzOiB7XHJcbiAgICAgICAgICAgIHF1ZXVlOiBcIlwiLFxyXG4gICAgICAgICAgICBkdXJhdGlvbjogRFVSQVRJT05fREVGQVVMVCxcclxuICAgICAgICAgICAgZWFzaW5nOiBFQVNJTkdfREVGQVVMVCxcclxuICAgICAgICAgICAgYmVnaW46IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgY29tcGxldGU6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgcHJvZ3Jlc3M6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgZGlzcGxheTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICB2aXNpYmlsaXR5OiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGxvb3A6IGZhbHNlLFxyXG4gICAgICAgICAgICBkZWxheTogZmFsc2UsXHJcbiAgICAgICAgICAgIG1vYmlsZUhBOiB0cnVlLFxyXG4gICAgICAgICAgICAvKiBTZXQgdG8gZmFsc2UgdG8gcHJldmVudCBwcm9wZXJ0eSB2YWx1ZXMgZnJvbSBiZWluZyBjYWNoZWQgYmV0d2VlbiBjb25zZWN1dGl2ZSBWZWxvY2l0eS1pbml0aWF0ZWQgY2hhaW4gY2FsbHMuICovXHJcbiAgICAgICAgICAgIF9jYWNoZVZhbHVlczogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLyogQSBkZXNpZ24gZ29hbCBvZiBWZWxvY2l0eSBpcyB0byBjYWNoZSBkYXRhIHdoZXJldmVyIHBvc3NpYmxlIGluIG9yZGVyIHRvIGF2b2lkIERPTSByZXF1ZXJ5aW5nLlxyXG4gICAgICAgICAgIEFjY29yZGluZ2x5LCBlYWNoIGVsZW1lbnQgaGFzIGEgZGF0YSBjYWNoZSBpbnN0YW50aWF0ZWQgb24gaXQuICovXHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgJC5kYXRhKGVsZW1lbnQsIFwidmVsb2NpdHlcIiwge1xyXG4gICAgICAgICAgICAgICAgLyogU3RvcmUgd2hldGhlciB0aGlzIGlzIGFuIFNWRyBlbGVtZW50LCBzaW5jZSBpdHMgcHJvcGVydGllcyBhcmUgcmV0cmlldmVkIGFuZCB1cGRhdGVkIGRpZmZlcmVudGx5IHRoYW4gc3RhbmRhcmQgSFRNTCBlbGVtZW50cy4gKi9cclxuICAgICAgICAgICAgICAgIGlzU1ZHOiBUeXBlLmlzU1ZHKGVsZW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgLyogS2VlcCB0cmFjayBvZiB3aGV0aGVyIHRoZSBlbGVtZW50IGlzIGN1cnJlbnRseSBiZWluZyBhbmltYXRlZCBieSBWZWxvY2l0eS5cclxuICAgICAgICAgICAgICAgICAgIFRoaXMgaXMgdXNlZCB0byBlbnN1cmUgdGhhdCBwcm9wZXJ0eSB2YWx1ZXMgYXJlIG5vdCB0cmFuc2ZlcnJlZCBiZXR3ZWVuIG5vbi1jb25zZWN1dGl2ZSAoc3RhbGUpIGNhbGxzLiAqL1xyXG4gICAgICAgICAgICAgICAgaXNBbmltYXRpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgLyogQSByZWZlcmVuY2UgdG8gdGhlIGVsZW1lbnQncyBsaXZlIGNvbXB1dGVkU3R5bGUgb2JqZWN0LiBMZWFybiBtb3JlIGhlcmU6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0FQSS93aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSAqL1xyXG4gICAgICAgICAgICAgICAgY29tcHV0ZWRTdHlsZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIC8qIFR3ZWVuIGRhdGEgaXMgY2FjaGVkIGZvciBlYWNoIGFuaW1hdGlvbiBvbiB0aGUgZWxlbWVudCBzbyB0aGF0IGRhdGEgY2FuIGJlIHBhc3NlZCBhY3Jvc3MgY2FsbHMgLS1cclxuICAgICAgICAgICAgICAgICAgIGluIHBhcnRpY3VsYXIsIGVuZCB2YWx1ZXMgYXJlIHVzZWQgYXMgc3Vic2VxdWVudCBzdGFydCB2YWx1ZXMgaW4gY29uc2VjdXRpdmUgVmVsb2NpdHkgY2FsbHMuICovXHJcbiAgICAgICAgICAgICAgICB0d2VlbnNDb250YWluZXI6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAvKiBUaGUgZnVsbCByb290IHByb3BlcnR5IHZhbHVlcyBvZiBlYWNoIENTUyBob29rIGJlaW5nIGFuaW1hdGVkIG9uIHRoaXMgZWxlbWVudCBhcmUgY2FjaGVkIHNvIHRoYXQ6XHJcbiAgICAgICAgICAgICAgICAgICAxKSBDb25jdXJyZW50bHktYW5pbWF0aW5nIGhvb2tzIHNoYXJpbmcgdGhlIHNhbWUgcm9vdCBjYW4gaGF2ZSB0aGVpciByb290IHZhbHVlcycgbWVyZ2VkIGludG8gb25lIHdoaWxlIHR3ZWVuaW5nLlxyXG4gICAgICAgICAgICAgICAgICAgMikgUG9zdC1ob29rLWluamVjdGlvbiByb290IHZhbHVlcyBjYW4gYmUgdHJhbnNmZXJyZWQgb3ZlciB0byBjb25zZWN1dGl2ZWx5IGNoYWluZWQgVmVsb2NpdHkgY2FsbHMgYXMgc3RhcnRpbmcgcm9vdCB2YWx1ZXMuICovXHJcbiAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZUNhY2hlOiB7fSxcclxuICAgICAgICAgICAgICAgIC8qIEEgY2FjaGUgZm9yIHRyYW5zZm9ybSB1cGRhdGVzLCB3aGljaCBtdXN0IGJlIG1hbnVhbGx5IGZsdXNoZWQgdmlhIENTUy5mbHVzaFRyYW5zZm9ybUNhY2hlKCkuICovXHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1DYWNoZToge31cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAvKiBBIHBhcmFsbGVsIHRvIGpRdWVyeSdzICQuY3NzKCksIHVzZWQgZm9yIGdldHRpbmcvc2V0dGluZyBWZWxvY2l0eSdzIGhvb2tlZCBDU1MgcHJvcGVydGllcy4gKi9cclxuICAgICAgICBob29rOiBudWxsLCAvKiBEZWZpbmVkIGJlbG93LiAqL1xyXG4gICAgICAgIC8qIFZlbG9jaXR5LXdpZGUgYW5pbWF0aW9uIHRpbWUgcmVtYXBwaW5nIGZvciB0ZXN0aW5nIHB1cnBvc2VzLiAqL1xyXG4gICAgICAgIG1vY2s6IGZhbHNlLFxyXG4gICAgICAgIHZlcnNpb246IHsgbWFqb3I6IDEsIG1pbm9yOiAxLCBwYXRjaDogMCB9LFxyXG4gICAgICAgIC8qIFNldCB0byAxIG9yIDIgKG1vc3QgdmVyYm9zZSkgdG8gb3V0cHV0IGRlYnVnIGluZm8gdG8gY29uc29sZS4gKi9cclxuICAgICAgICBkZWJ1ZzogZmFsc2VcclxuICAgIH07XHJcblxyXG4gICAgLyogUmV0cmlldmUgdGhlIGFwcHJvcHJpYXRlIHNjcm9sbCBhbmNob3IgYW5kIHByb3BlcnR5IG5hbWUgZm9yIHRoZSBicm93c2VyOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2luZG93LnNjcm9sbFkgKi9cclxuICAgIGlmICh3aW5kb3cucGFnZVlPZmZzZXQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIFZlbG9jaXR5LlN0YXRlLnNjcm9sbEFuY2hvciA9IHdpbmRvdztcclxuICAgICAgICBWZWxvY2l0eS5TdGF0ZS5zY3JvbGxQcm9wZXJ0eUxlZnQgPSBcInBhZ2VYT2Zmc2V0XCI7XHJcbiAgICAgICAgVmVsb2NpdHkuU3RhdGUuc2Nyb2xsUHJvcGVydHlUb3AgPSBcInBhZ2VZT2Zmc2V0XCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIFZlbG9jaXR5LlN0YXRlLnNjcm9sbEFuY2hvciA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fCBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUgfHwgZG9jdW1lbnQuYm9keTtcclxuICAgICAgICBWZWxvY2l0eS5TdGF0ZS5zY3JvbGxQcm9wZXJ0eUxlZnQgPSBcInNjcm9sbExlZnRcIjtcclxuICAgICAgICBWZWxvY2l0eS5TdGF0ZS5zY3JvbGxQcm9wZXJ0eVRvcCA9IFwic2Nyb2xsVG9wXCI7XHJcbiAgICB9XHJcblxyXG4gICAgLyogU2hvcnRoYW5kIGFsaWFzIGZvciBqUXVlcnkncyAkLmRhdGEoKSB1dGlsaXR5LiAqL1xyXG4gICAgZnVuY3Rpb24gRGF0YSAoZWxlbWVudCkge1xyXG4gICAgICAgIC8qIEhhcmRjb2RlIGEgcmVmZXJlbmNlIHRvIHRoZSBwbHVnaW4gbmFtZS4gKi9cclxuICAgICAgICB2YXIgcmVzcG9uc2UgPSAkLmRhdGEoZWxlbWVudCwgXCJ2ZWxvY2l0eVwiKTtcclxuXHJcbiAgICAgICAgLyogalF1ZXJ5IDw9MS40LjIgcmV0dXJucyBudWxsIGluc3RlYWQgb2YgdW5kZWZpbmVkIHdoZW4gbm8gbWF0Y2ggaXMgZm91bmQuIFdlIG5vcm1hbGl6ZSB0aGlzIGJlaGF2aW9yLiAqL1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZSA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IHJlc3BvbnNlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKioqKioqKioqKioqKipcclxuICAgICAgICBFYXNpbmdcclxuICAgICoqKioqKioqKioqKioqL1xyXG5cclxuICAgIC8qIFN0ZXAgZWFzaW5nIGdlbmVyYXRvci4gKi9cclxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlU3RlcCAoc3RlcHMpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHApIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQocCAqIHN0ZXBzKSAqICgxIC8gc3RlcHMpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyogQmV6aWVyIGN1cnZlIGZ1bmN0aW9uIGdlbmVyYXRvci4gQ29weXJpZ2h0IEdhZXRhbiBSZW5hdWRlYXUuIE1JVCBMaWNlbnNlOiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL01JVF9MaWNlbnNlICovXHJcbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUJlemllciAobVgxLCBtWTEsIG1YMiwgbVkyKSB7XHJcbiAgICAgICAgdmFyIE5FV1RPTl9JVEVSQVRJT05TID0gNCxcclxuICAgICAgICAgICAgTkVXVE9OX01JTl9TTE9QRSA9IDAuMDAxLFxyXG4gICAgICAgICAgICBTVUJESVZJU0lPTl9QUkVDSVNJT04gPSAwLjAwMDAwMDEsXHJcbiAgICAgICAgICAgIFNVQkRJVklTSU9OX01BWF9JVEVSQVRJT05TID0gMTAsXHJcbiAgICAgICAgICAgIGtTcGxpbmVUYWJsZVNpemUgPSAxMSxcclxuICAgICAgICAgICAga1NhbXBsZVN0ZXBTaXplID0gMS4wIC8gKGtTcGxpbmVUYWJsZVNpemUgLSAxLjApLFxyXG4gICAgICAgICAgICBmbG9hdDMyQXJyYXlTdXBwb3J0ZWQgPSBcIkZsb2F0MzJBcnJheVwiIGluIHdpbmRvdztcclxuXHJcbiAgICAgICAgLyogTXVzdCBjb250YWluIGZvdXIgYXJndW1lbnRzLiAqL1xyXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICE9PSA0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIEFyZ3VtZW50cyBtdXN0IGJlIG51bWJlcnMuICovXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyArK2kpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbaV0gIT09IFwibnVtYmVyXCIgfHwgaXNOYU4oYXJndW1lbnRzW2ldKSB8fCAhaXNGaW5pdGUoYXJndW1lbnRzW2ldKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBYIHZhbHVlcyBtdXN0IGJlIGluIHRoZSBbMCwgMV0gcmFuZ2UuICovXHJcbiAgICAgICAgbVgxID0gTWF0aC5taW4obVgxLCAxKTtcclxuICAgICAgICBtWDIgPSBNYXRoLm1pbihtWDIsIDEpO1xyXG4gICAgICAgIG1YMSA9IE1hdGgubWF4KG1YMSwgMCk7XHJcbiAgICAgICAgbVgyID0gTWF0aC5tYXgobVgyLCAwKTtcclxuXHJcbiAgICAgICAgdmFyIG1TYW1wbGVWYWx1ZXMgPSBmbG9hdDMyQXJyYXlTdXBwb3J0ZWQgPyBuZXcgRmxvYXQzMkFycmF5KGtTcGxpbmVUYWJsZVNpemUpIDogbmV3IEFycmF5KGtTcGxpbmVUYWJsZVNpemUpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBBIChhQTEsIGFBMikgeyByZXR1cm4gMS4wIC0gMy4wICogYUEyICsgMy4wICogYUExOyB9XHJcbiAgICAgICAgZnVuY3Rpb24gQiAoYUExLCBhQTIpIHsgcmV0dXJuIDMuMCAqIGFBMiAtIDYuMCAqIGFBMTsgfVxyXG4gICAgICAgIGZ1bmN0aW9uIEMgKGFBMSkgICAgICB7IHJldHVybiAzLjAgKiBhQTE7IH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2FsY0JlemllciAoYVQsIGFBMSwgYUEyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoKEEoYUExLCBhQTIpKmFUICsgQihhQTEsIGFBMikpKmFUICsgQyhhQTEpKSphVDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFNsb3BlIChhVCwgYUExLCBhQTIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDMuMCAqIEEoYUExLCBhQTIpKmFUKmFUICsgMi4wICogQihhQTEsIGFBMikgKiBhVCArIEMoYUExKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG5ld3RvblJhcGhzb25JdGVyYXRlIChhWCwgYUd1ZXNzVCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE5FV1RPTl9JVEVSQVRJT05TOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50U2xvcGUgPSBnZXRTbG9wZShhR3Vlc3NULCBtWDEsIG1YMik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTbG9wZSA9PT0gMC4wKSByZXR1cm4gYUd1ZXNzVDtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFggPSBjYWxjQmV6aWVyKGFHdWVzc1QsIG1YMSwgbVgyKSAtIGFYO1xyXG4gICAgICAgICAgICAgICAgYUd1ZXNzVCAtPSBjdXJyZW50WCAvIGN1cnJlbnRTbG9wZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFHdWVzc1Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjYWxjU2FtcGxlVmFsdWVzICgpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrU3BsaW5lVGFibGVTaXplOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIG1TYW1wbGVWYWx1ZXNbaV0gPSBjYWxjQmV6aWVyKGkgKiBrU2FtcGxlU3RlcFNpemUsIG1YMSwgbVgyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYmluYXJ5U3ViZGl2aWRlIChhWCwgYUEsIGFCKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50WCwgY3VycmVudFQsIGkgPSAwO1xyXG5cclxuICAgICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFQgPSBhQSArIChhQiAtIGFBKSAvIDIuMDtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRYID0gY2FsY0JlemllcihjdXJyZW50VCwgbVgxLCBtWDIpIC0gYVg7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFggPiAwLjApIHtcclxuICAgICAgICAgICAgICAgICAgYUIgPSBjdXJyZW50VDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIGFBID0gY3VycmVudFQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gd2hpbGUgKE1hdGguYWJzKGN1cnJlbnRYKSA+IFNVQkRJVklTSU9OX1BSRUNJU0lPTiAmJiArK2kgPCBTVUJESVZJU0lPTl9NQVhfSVRFUkFUSU9OUyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY3VycmVudFQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRURm9yWCAoYVgpIHtcclxuICAgICAgICAgICAgdmFyIGludGVydmFsU3RhcnQgPSAwLjAsXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2FtcGxlID0gMSxcclxuICAgICAgICAgICAgICAgIGxhc3RTYW1wbGUgPSBrU3BsaW5lVGFibGVTaXplIC0gMTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoOyBjdXJyZW50U2FtcGxlICE9IGxhc3RTYW1wbGUgJiYgbVNhbXBsZVZhbHVlc1tjdXJyZW50U2FtcGxlXSA8PSBhWDsgKytjdXJyZW50U2FtcGxlKSB7XHJcbiAgICAgICAgICAgICAgICBpbnRlcnZhbFN0YXJ0ICs9IGtTYW1wbGVTdGVwU2l6ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLS1jdXJyZW50U2FtcGxlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRpc3QgPSAoYVggLSBtU2FtcGxlVmFsdWVzW2N1cnJlbnRTYW1wbGVdKSAvIChtU2FtcGxlVmFsdWVzW2N1cnJlbnRTYW1wbGUrMV0gLSBtU2FtcGxlVmFsdWVzW2N1cnJlbnRTYW1wbGVdKSxcclxuICAgICAgICAgICAgICAgIGd1ZXNzRm9yVCA9IGludGVydmFsU3RhcnQgKyBkaXN0ICoga1NhbXBsZVN0ZXBTaXplLFxyXG4gICAgICAgICAgICAgICAgaW5pdGlhbFNsb3BlID0gZ2V0U2xvcGUoZ3Vlc3NGb3JULCBtWDEsIG1YMik7XHJcblxyXG4gICAgICAgICAgICBpZiAoaW5pdGlhbFNsb3BlID49IE5FV1RPTl9NSU5fU0xPUEUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXd0b25SYXBoc29uSXRlcmF0ZShhWCwgZ3Vlc3NGb3JUKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpbml0aWFsU2xvcGUgPT0gMC4wKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ3Vlc3NGb3JUO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJpbmFyeVN1YmRpdmlkZShhWCwgaW50ZXJ2YWxTdGFydCwgaW50ZXJ2YWxTdGFydCArIGtTYW1wbGVTdGVwU2l6ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBfcHJlY29tcHV0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcHJlY29tcHV0ZSgpIHtcclxuICAgICAgICAgICAgX3ByZWNvbXB1dGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKG1YMSAhPSBtWTEgfHwgbVgyICE9IG1ZMikgY2FsY1NhbXBsZVZhbHVlcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGYgPSBmdW5jdGlvbiAoYVgpIHtcclxuICAgICAgICAgICAgaWYgKCFfcHJlY29tcHV0ZWQpIHByZWNvbXB1dGUoKTtcclxuICAgICAgICAgICAgaWYgKG1YMSA9PT0gbVkxICYmIG1YMiA9PT0gbVkyKSByZXR1cm4gYVg7XHJcbiAgICAgICAgICAgIGlmIChhWCA9PT0gMCkgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIGlmIChhWCA9PT0gMSkgcmV0dXJuIDE7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2FsY0JlemllcihnZXRURm9yWChhWCksIG1ZMSwgbVkyKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmLmdldENvbnRyb2xQb2ludHMgPSBmdW5jdGlvbigpIHsgcmV0dXJuIFt7IHg6IG1YMSwgeTogbVkxIH0sIHsgeDogbVgyLCB5OiBtWTIgfV07IH07XHJcblxyXG4gICAgICAgIHZhciBzdHIgPSBcImdlbmVyYXRlQmV6aWVyKFwiICsgW21YMSwgbVkxLCBtWDIsIG1ZMl0gKyBcIilcIjtcclxuICAgICAgICBmLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc3RyOyB9O1xyXG5cclxuICAgICAgICByZXR1cm4gZjtcclxuICAgIH1cclxuXHJcbiAgICAvKiBSdW5nZS1LdXR0YSBzcHJpbmcgcGh5c2ljcyBmdW5jdGlvbiBnZW5lcmF0b3IuIEFkYXB0ZWQgZnJvbSBGcmFtZXIuanMsIGNvcHlyaWdodCBLb2VuIEJvay4gTUlUIExpY2Vuc2U6IGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTUlUX0xpY2Vuc2UgKi9cclxuICAgIC8qIEdpdmVuIGEgdGVuc2lvbiwgZnJpY3Rpb24sIGFuZCBkdXJhdGlvbiwgYSBzaW11bGF0aW9uIGF0IDYwRlBTIHdpbGwgZmlyc3QgcnVuIHdpdGhvdXQgYSBkZWZpbmVkIGR1cmF0aW9uIGluIG9yZGVyIHRvIGNhbGN1bGF0ZSB0aGUgZnVsbCBwYXRoLiBBIHNlY29uZCBwYXNzXHJcbiAgICAgICB0aGVuIGFkanVzdHMgdGhlIHRpbWUgZGVsdGEgLS0gdXNpbmcgdGhlIHJlbGF0aW9uIGJldHdlZW4gYWN0dWFsIHRpbWUgYW5kIGR1cmF0aW9uIC0tIHRvIGNhbGN1bGF0ZSB0aGUgcGF0aCBmb3IgdGhlIGR1cmF0aW9uLWNvbnN0cmFpbmVkIGFuaW1hdGlvbi4gKi9cclxuICAgIHZhciBnZW5lcmF0ZVNwcmluZ1JLNCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gc3ByaW5nQWNjZWxlcmF0aW9uRm9yU3RhdGUgKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoLXN0YXRlLnRlbnNpb24gKiBzdGF0ZS54KSAtIChzdGF0ZS5mcmljdGlvbiAqIHN0YXRlLnYpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc3ByaW5nRXZhbHVhdGVTdGF0ZVdpdGhEZXJpdmF0aXZlIChpbml0aWFsU3RhdGUsIGR0LCBkZXJpdmF0aXZlKSB7XHJcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IHtcclxuICAgICAgICAgICAgICAgIHg6IGluaXRpYWxTdGF0ZS54ICsgZGVyaXZhdGl2ZS5keCAqIGR0LFxyXG4gICAgICAgICAgICAgICAgdjogaW5pdGlhbFN0YXRlLnYgKyBkZXJpdmF0aXZlLmR2ICogZHQsXHJcbiAgICAgICAgICAgICAgICB0ZW5zaW9uOiBpbml0aWFsU3RhdGUudGVuc2lvbixcclxuICAgICAgICAgICAgICAgIGZyaWN0aW9uOiBpbml0aWFsU3RhdGUuZnJpY3Rpb25cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7IGR4OiBzdGF0ZS52LCBkdjogc3ByaW5nQWNjZWxlcmF0aW9uRm9yU3RhdGUoc3RhdGUpIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzcHJpbmdJbnRlZ3JhdGVTdGF0ZSAoc3RhdGUsIGR0KSB7XHJcbiAgICAgICAgICAgIHZhciBhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGR4OiBzdGF0ZS52LFxyXG4gICAgICAgICAgICAgICAgICAgIGR2OiBzcHJpbmdBY2NlbGVyYXRpb25Gb3JTdGF0ZShzdGF0ZSlcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBiID0gc3ByaW5nRXZhbHVhdGVTdGF0ZVdpdGhEZXJpdmF0aXZlKHN0YXRlLCBkdCAqIDAuNSwgYSksXHJcbiAgICAgICAgICAgICAgICBjID0gc3ByaW5nRXZhbHVhdGVTdGF0ZVdpdGhEZXJpdmF0aXZlKHN0YXRlLCBkdCAqIDAuNSwgYiksXHJcbiAgICAgICAgICAgICAgICBkID0gc3ByaW5nRXZhbHVhdGVTdGF0ZVdpdGhEZXJpdmF0aXZlKHN0YXRlLCBkdCwgYyksXHJcbiAgICAgICAgICAgICAgICBkeGR0ID0gMS4wIC8gNi4wICogKGEuZHggKyAyLjAgKiAoYi5keCArIGMuZHgpICsgZC5keCksXHJcbiAgICAgICAgICAgICAgICBkdmR0ID0gMS4wIC8gNi4wICogKGEuZHYgKyAyLjAgKiAoYi5kdiArIGMuZHYpICsgZC5kdik7XHJcblxyXG4gICAgICAgICAgICBzdGF0ZS54ID0gc3RhdGUueCArIGR4ZHQgKiBkdDtcclxuICAgICAgICAgICAgc3RhdGUudiA9IHN0YXRlLnYgKyBkdmR0ICogZHQ7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gc3ByaW5nUks0RmFjdG9yeSAodGVuc2lvbiwgZnJpY3Rpb24sIGR1cmF0aW9uKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5pdFN0YXRlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHg6IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgIHY6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVuc2lvbjogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBmcmljdGlvbjogbnVsbFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHBhdGggPSBbMF0sXHJcbiAgICAgICAgICAgICAgICB0aW1lX2xhcHNlZCA9IDAsXHJcbiAgICAgICAgICAgICAgICB0b2xlcmFuY2UgPSAxIC8gMTAwMDAsXHJcbiAgICAgICAgICAgICAgICBEVCA9IDE2IC8gMTAwMCxcclxuICAgICAgICAgICAgICAgIGhhdmVfZHVyYXRpb24sIGR0LCBsYXN0X3N0YXRlO1xyXG5cclxuICAgICAgICAgICAgdGVuc2lvbiA9IHBhcnNlRmxvYXQodGVuc2lvbikgfHwgNTAwO1xyXG4gICAgICAgICAgICBmcmljdGlvbiA9IHBhcnNlRmxvYXQoZnJpY3Rpb24pIHx8IDIwO1xyXG4gICAgICAgICAgICBkdXJhdGlvbiA9IGR1cmF0aW9uIHx8IG51bGw7XHJcblxyXG4gICAgICAgICAgICBpbml0U3RhdGUudGVuc2lvbiA9IHRlbnNpb247XHJcbiAgICAgICAgICAgIGluaXRTdGF0ZS5mcmljdGlvbiA9IGZyaWN0aW9uO1xyXG5cclxuICAgICAgICAgICAgaGF2ZV9kdXJhdGlvbiA9IGR1cmF0aW9uICE9PSBudWxsO1xyXG5cclxuICAgICAgICAgICAgLyogQ2FsY3VsYXRlIHRoZSBhY3R1YWwgdGltZSBpdCB0YWtlcyBmb3IgdGhpcyBhbmltYXRpb24gdG8gY29tcGxldGUgd2l0aCB0aGUgcHJvdmlkZWQgY29uZGl0aW9ucy4gKi9cclxuICAgICAgICAgICAgaWYgKGhhdmVfZHVyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIC8qIFJ1biB0aGUgc2ltdWxhdGlvbiB3aXRob3V0IGEgZHVyYXRpb24uICovXHJcbiAgICAgICAgICAgICAgICB0aW1lX2xhcHNlZCA9IHNwcmluZ1JLNEZhY3RvcnkodGVuc2lvbiwgZnJpY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgLyogQ29tcHV0ZSB0aGUgYWRqdXN0ZWQgdGltZSBkZWx0YS4gKi9cclxuICAgICAgICAgICAgICAgIGR0ID0gdGltZV9sYXBzZWQgLyBkdXJhdGlvbiAqIERUO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZHQgPSBEVDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgICAgIC8qIE5leHQvc3RlcCBmdW5jdGlvbiAuKi9cclxuICAgICAgICAgICAgICAgIGxhc3Rfc3RhdGUgPSBzcHJpbmdJbnRlZ3JhdGVTdGF0ZShsYXN0X3N0YXRlIHx8IGluaXRTdGF0ZSwgZHQpO1xyXG4gICAgICAgICAgICAgICAgLyogU3RvcmUgdGhlIHBvc2l0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgcGF0aC5wdXNoKDEgKyBsYXN0X3N0YXRlLngpO1xyXG4gICAgICAgICAgICAgICAgdGltZV9sYXBzZWQgKz0gMTY7XHJcbiAgICAgICAgICAgICAgICAvKiBJZiB0aGUgY2hhbmdlIHRocmVzaG9sZCBpcyByZWFjaGVkLCBicmVhay4gKi9cclxuICAgICAgICAgICAgICAgIGlmICghKE1hdGguYWJzKGxhc3Rfc3RhdGUueCkgPiB0b2xlcmFuY2UgJiYgTWF0aC5hYnMobGFzdF9zdGF0ZS52KSA+IHRvbGVyYW5jZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyogSWYgZHVyYXRpb24gaXMgbm90IGRlZmluZWQsIHJldHVybiB0aGUgYWN0dWFsIHRpbWUgcmVxdWlyZWQgZm9yIGNvbXBsZXRpbmcgdGhpcyBhbmltYXRpb24uIE90aGVyd2lzZSwgcmV0dXJuIGEgY2xvc3VyZSB0aGF0IGhvbGRzIHRoZVxyXG4gICAgICAgICAgICAgICBjb21wdXRlZCBwYXRoIGFuZCByZXR1cm5zIGEgc25hcHNob3Qgb2YgdGhlIHBvc2l0aW9uIGFjY29yZGluZyB0byBhIGdpdmVuIHBlcmNlbnRDb21wbGV0ZS4gKi9cclxuICAgICAgICAgICAgcmV0dXJuICFoYXZlX2R1cmF0aW9uID8gdGltZV9sYXBzZWQgOiBmdW5jdGlvbihwZXJjZW50Q29tcGxldGUpIHsgcmV0dXJuIHBhdGhbIChwZXJjZW50Q29tcGxldGUgKiAocGF0aC5sZW5ndGggLSAxKSkgfCAwIF07IH07XHJcbiAgICAgICAgfTtcclxuICAgIH0oKSk7XHJcblxyXG4gICAgLyogalF1ZXJ5IGVhc2luZ3MuICovXHJcbiAgICBWZWxvY2l0eS5FYXNpbmdzID0ge1xyXG4gICAgICAgIGxpbmVhcjogZnVuY3Rpb24ocCkgeyByZXR1cm4gcDsgfSxcclxuICAgICAgICBzd2luZzogZnVuY3Rpb24ocCkgeyByZXR1cm4gMC41IC0gTWF0aC5jb3MoIHAgKiBNYXRoLlBJICkgLyAyIH0sXHJcbiAgICAgICAgLyogQm9udXMgXCJzcHJpbmdcIiBlYXNpbmcsIHdoaWNoIGlzIGEgbGVzcyBleGFnZ2VyYXRlZCB2ZXJzaW9uIG9mIGVhc2VJbk91dEVsYXN0aWMuICovXHJcbiAgICAgICAgc3ByaW5nOiBmdW5jdGlvbihwKSB7IHJldHVybiAxIC0gKE1hdGguY29zKHAgKiA0LjUgKiBNYXRoLlBJKSAqIE1hdGguZXhwKC1wICogNikpOyB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qIENTUzMgYW5kIFJvYmVydCBQZW5uZXIgZWFzaW5ncy4gKi9cclxuICAgICQuZWFjaChcclxuICAgICAgICBbXHJcbiAgICAgICAgICAgIFsgXCJlYXNlXCIsIFsgMC4yNSwgMC4xLCAwLjI1LCAxLjAgXSBdLFxyXG4gICAgICAgICAgICBbIFwiZWFzZS1pblwiLCBbIDAuNDIsIDAuMCwgMS4wMCwgMS4wIF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2Utb3V0XCIsIFsgMC4wMCwgMC4wLCAwLjU4LCAxLjAgXSBdLFxyXG4gICAgICAgICAgICBbIFwiZWFzZS1pbi1vdXRcIiwgWyAwLjQyLCAwLjAsIDAuNTgsIDEuMCBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlSW5TaW5lXCIsIFsgMC40NywgMCwgMC43NDUsIDAuNzE1IF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VPdXRTaW5lXCIsIFsgMC4zOSwgMC41NzUsIDAuNTY1LCAxIF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VJbk91dFNpbmVcIiwgWyAwLjQ0NSwgMC4wNSwgMC41NSwgMC45NSBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlSW5RdWFkXCIsIFsgMC41NSwgMC4wODUsIDAuNjgsIDAuNTMgXSBdLFxyXG4gICAgICAgICAgICBbIFwiZWFzZU91dFF1YWRcIiwgWyAwLjI1LCAwLjQ2LCAwLjQ1LCAwLjk0IF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VJbk91dFF1YWRcIiwgWyAwLjQ1NSwgMC4wMywgMC41MTUsIDAuOTU1IF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VJbkN1YmljXCIsIFsgMC41NSwgMC4wNTUsIDAuNjc1LCAwLjE5IF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VPdXRDdWJpY1wiLCBbIDAuMjE1LCAwLjYxLCAwLjM1NSwgMSBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlSW5PdXRDdWJpY1wiLCBbIDAuNjQ1LCAwLjA0NSwgMC4zNTUsIDEgXSBdLFxyXG4gICAgICAgICAgICBbIFwiZWFzZUluUXVhcnRcIiwgWyAwLjg5NSwgMC4wMywgMC42ODUsIDAuMjIgXSBdLFxyXG4gICAgICAgICAgICBbIFwiZWFzZU91dFF1YXJ0XCIsIFsgMC4xNjUsIDAuODQsIDAuNDQsIDEgXSBdLFxyXG4gICAgICAgICAgICBbIFwiZWFzZUluT3V0UXVhcnRcIiwgWyAwLjc3LCAwLCAwLjE3NSwgMSBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlSW5RdWludFwiLCBbIDAuNzU1LCAwLjA1LCAwLjg1NSwgMC4wNiBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlT3V0UXVpbnRcIiwgWyAwLjIzLCAxLCAwLjMyLCAxIF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VJbk91dFF1aW50XCIsIFsgMC44NiwgMCwgMC4wNywgMSBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlSW5FeHBvXCIsIFsgMC45NSwgMC4wNSwgMC43OTUsIDAuMDM1IF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VPdXRFeHBvXCIsIFsgMC4xOSwgMSwgMC4yMiwgMSBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlSW5PdXRFeHBvXCIsIFsgMSwgMCwgMCwgMSBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlSW5DaXJjXCIsIFsgMC42LCAwLjA0LCAwLjk4LCAwLjMzNSBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlT3V0Q2lyY1wiLCBbIDAuMDc1LCAwLjgyLCAwLjE2NSwgMSBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlSW5PdXRDaXJjXCIsIFsgMC43ODUsIDAuMTM1LCAwLjE1LCAwLjg2IF0gXVxyXG4gICAgICAgIF0sIGZ1bmN0aW9uKGksIGVhc2luZ0FycmF5KSB7XHJcbiAgICAgICAgICAgIFZlbG9jaXR5LkVhc2luZ3NbZWFzaW5nQXJyYXlbMF1dID0gZ2VuZXJhdGVCZXppZXIuYXBwbHkobnVsbCwgZWFzaW5nQXJyYXlbMV0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8qIERldGVybWluZSB0aGUgYXBwcm9wcmlhdGUgZWFzaW5nIHR5cGUgZ2l2ZW4gYW4gZWFzaW5nIGlucHV0LiAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0RWFzaW5nKHZhbHVlLCBkdXJhdGlvbikge1xyXG4gICAgICAgIHZhciBlYXNpbmcgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgLyogVGhlIGVhc2luZyBvcHRpb24gY2FuIGVpdGhlciBiZSBhIHN0cmluZyB0aGF0IHJlZmVyZW5jZXMgYSBwcmUtcmVnaXN0ZXJlZCBlYXNpbmcsXHJcbiAgICAgICAgICAgb3IgaXQgY2FuIGJlIGEgdHdvLS9mb3VyLWl0ZW0gYXJyYXkgb2YgaW50ZWdlcnMgdG8gYmUgY29udmVydGVkIGludG8gYSBiZXppZXIvc3ByaW5nIGZ1bmN0aW9uLiAqL1xyXG4gICAgICAgIGlmIChUeXBlLmlzU3RyaW5nKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAvKiBFbnN1cmUgdGhhdCB0aGUgZWFzaW5nIGhhcyBiZWVuIGFzc2lnbmVkIHRvIGpRdWVyeSdzIFZlbG9jaXR5LkVhc2luZ3Mgb2JqZWN0LiAqL1xyXG4gICAgICAgICAgICBpZiAoIVZlbG9jaXR5LkVhc2luZ3NbdmFsdWVdKSB7XHJcbiAgICAgICAgICAgICAgICBlYXNpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoVHlwZS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgZWFzaW5nID0gZ2VuZXJhdGVTdGVwLmFwcGx5KG51bGwsIHZhbHVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKFR5cGUuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgICAgIC8qIHNwcmluZ1JLNCBtdXN0IGJlIHBhc3NlZCB0aGUgYW5pbWF0aW9uJ3MgZHVyYXRpb24uICovXHJcbiAgICAgICAgICAgIC8qIE5vdGU6IElmIHRoZSBzcHJpbmdSSzQgYXJyYXkgY29udGFpbnMgbm9uLW51bWJlcnMsIGdlbmVyYXRlU3ByaW5nUks0KCkgcmV0dXJucyBhbiBlYXNpbmdcclxuICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVkIHdpdGggZGVmYXVsdCB0ZW5zaW9uIGFuZCBmcmljdGlvbiB2YWx1ZXMuICovXHJcbiAgICAgICAgICAgIGVhc2luZyA9IGdlbmVyYXRlU3ByaW5nUks0LmFwcGx5KG51bGwsIHZhbHVlLmNvbmNhdChbIGR1cmF0aW9uIF0pKTtcclxuICAgICAgICB9IGVsc2UgaWYgKFR5cGUuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID09PSA0KSB7XHJcbiAgICAgICAgICAgIC8qIE5vdGU6IElmIHRoZSBiZXppZXIgYXJyYXkgY29udGFpbnMgbm9uLW51bWJlcnMsIGdlbmVyYXRlQmV6aWVyKCkgcmV0dXJucyBmYWxzZS4gKi9cclxuICAgICAgICAgICAgZWFzaW5nID0gZ2VuZXJhdGVCZXppZXIuYXBwbHkobnVsbCwgdmFsdWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGVhc2luZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogUmV2ZXJ0IHRvIHRoZSBWZWxvY2l0eS13aWRlIGRlZmF1bHQgZWFzaW5nIHR5cGUsIG9yIGZhbGwgYmFjayB0byBcInN3aW5nXCIgKHdoaWNoIGlzIGFsc28galF1ZXJ5J3MgZGVmYXVsdClcclxuICAgICAgICAgICBpZiB0aGUgVmVsb2NpdHktd2lkZSBkZWZhdWx0IGhhcyBiZWVuIGluY29ycmVjdGx5IG1vZGlmaWVkLiAqL1xyXG4gICAgICAgIGlmIChlYXNpbmcgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGlmIChWZWxvY2l0eS5FYXNpbmdzW1ZlbG9jaXR5LmRlZmF1bHRzLmVhc2luZ10pIHtcclxuICAgICAgICAgICAgICAgIGVhc2luZyA9IFZlbG9jaXR5LmRlZmF1bHRzLmVhc2luZztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVhc2luZyA9IEVBU0lOR19ERUZBVUxUO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZWFzaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKioqKioqKioqKioqKioqKlxyXG4gICAgICAgIENTUyBTdGFja1xyXG4gICAgKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgLyogVGhlIENTUyBvYmplY3QgaXMgYSBoaWdobHkgY29uZGVuc2VkIGFuZCBwZXJmb3JtYW50IENTUyBzdGFjayB0aGF0IGZ1bGx5IHJlcGxhY2VzIGpRdWVyeSdzLlxyXG4gICAgICAgSXQgaGFuZGxlcyB0aGUgdmFsaWRhdGlvbiwgZ2V0dGluZywgYW5kIHNldHRpbmcgb2YgYm90aCBzdGFuZGFyZCBDU1MgcHJvcGVydGllcyBhbmQgQ1NTIHByb3BlcnR5IGhvb2tzLiAqL1xyXG4gICAgLyogTm90ZTogQSBcIkNTU1wiIHNob3J0aGFuZCBpcyBhbGlhc2VkIHNvIHRoYXQgb3VyIGNvZGUgaXMgZWFzaWVyIHRvIHJlYWQuICovXHJcbiAgICB2YXIgQ1NTID0gVmVsb2NpdHkuQ1NTID0ge1xyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICBSZWdFeFxyXG4gICAgICAgICoqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIFJlZ0V4OiB7XHJcbiAgICAgICAgICAgIGlzSGV4OiAvXiMoW0EtZlxcZF17M30pezEsMn0kL2ksXHJcbiAgICAgICAgICAgIC8qIFVud3JhcCBhIHByb3BlcnR5IHZhbHVlJ3Mgc3Vycm91bmRpbmcgdGV4dCwgZS5nLiBcInJnYmEoNCwgMywgMiwgMSlcIiA9PT4gXCI0LCAzLCAyLCAxXCIgYW5kIFwicmVjdCg0cHggM3B4IDJweCAxcHgpXCIgPT0+IFwiNHB4IDNweCAycHggMXB4XCIuICovXHJcbiAgICAgICAgICAgIHZhbHVlVW53cmFwOiAvXltBLXpdK1xcKCguKilcXCkkL2ksXHJcbiAgICAgICAgICAgIHdyYXBwZWRWYWx1ZUFscmVhZHlFeHRyYWN0ZWQ6IC9bMC05Ll0rIFswLTkuXSsgWzAtOS5dKyggWzAtOS5dKyk/LyxcclxuICAgICAgICAgICAgLyogU3BsaXQgYSBtdWx0aS12YWx1ZSBwcm9wZXJ0eSBpbnRvIGFuIGFycmF5IG9mIHN1YnZhbHVlcywgZS5nLiBcInJnYmEoNCwgMywgMiwgMSkgNHB4IDNweCAycHggMXB4XCIgPT0+IFsgXCJyZ2JhKDQsIDMsIDIsIDEpXCIsIFwiNHB4XCIsIFwiM3B4XCIsIFwiMnB4XCIsIFwiMXB4XCIgXS4gKi9cclxuICAgICAgICAgICAgdmFsdWVTcGxpdDogLyhbQS16XStcXCguK1xcKSl8KChbQS16MC05Iy0uXSs/KSg/PVxcc3wkKSkvaWdcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKioqKioqKioqKioqXHJcbiAgICAgICAgICAgIExpc3RzXHJcbiAgICAgICAgKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICBMaXN0czoge1xyXG4gICAgICAgICAgICBjb2xvcnM6IFsgXCJmaWxsXCIsIFwic3Ryb2tlXCIsIFwic3RvcENvbG9yXCIsIFwiY29sb3JcIiwgXCJiYWNrZ3JvdW5kQ29sb3JcIiwgXCJib3JkZXJDb2xvclwiLCBcImJvcmRlclRvcENvbG9yXCIsIFwiYm9yZGVyUmlnaHRDb2xvclwiLCBcImJvcmRlckJvdHRvbUNvbG9yXCIsIFwiYm9yZGVyTGVmdENvbG9yXCIsIFwib3V0bGluZUNvbG9yXCIgXSxcclxuICAgICAgICAgICAgdHJhbnNmb3Jtc0Jhc2U6IFsgXCJ0cmFuc2xhdGVYXCIsIFwidHJhbnNsYXRlWVwiLCBcInNjYWxlXCIsIFwic2NhbGVYXCIsIFwic2NhbGVZXCIsIFwic2tld1hcIiwgXCJza2V3WVwiLCBcInJvdGF0ZVpcIiBdLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1zM0Q6IFsgXCJ0cmFuc2Zvcm1QZXJzcGVjdGl2ZVwiLCBcInRyYW5zbGF0ZVpcIiwgXCJzY2FsZVpcIiwgXCJyb3RhdGVYXCIsIFwicm90YXRlWVwiIF1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKioqKioqKioqKioqXHJcbiAgICAgICAgICAgIEhvb2tzXHJcbiAgICAgICAgKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAvKiBIb29rcyBhbGxvdyBhIHN1YnByb3BlcnR5IChlLmcuIFwiYm94U2hhZG93Qmx1clwiKSBvZiBhIGNvbXBvdW5kLXZhbHVlIENTUyBwcm9wZXJ0eVxyXG4gICAgICAgICAgIChlLmcuIFwiYm94U2hhZG93OiBYIFkgQmx1ciBTcHJlYWQgQ29sb3JcIikgdG8gYmUgYW5pbWF0ZWQgYXMgaWYgaXQgd2VyZSBhIGRpc2NyZXRlIHByb3BlcnR5LiAqL1xyXG4gICAgICAgIC8qIE5vdGU6IEJleW9uZCBlbmFibGluZyBmaW5lLWdyYWluZWQgcHJvcGVydHkgYW5pbWF0aW9uLCBob29raW5nIGlzIG5lY2Vzc2FyeSBzaW5jZSBWZWxvY2l0eSBvbmx5XHJcbiAgICAgICAgICAgdHdlZW5zIHByb3BlcnRpZXMgd2l0aCBzaW5nbGUgbnVtZXJpYyB2YWx1ZXM7IHVubGlrZSBDU1MgdHJhbnNpdGlvbnMsIFZlbG9jaXR5IGRvZXMgbm90IGludGVycG9sYXRlIGNvbXBvdW5kLXZhbHVlcy4gKi9cclxuICAgICAgICBIb29rczoge1xyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgIFJlZ2lzdHJhdGlvblxyXG4gICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIC8qIFRlbXBsYXRlcyBhcmUgYSBjb25jaXNlIHdheSBvZiBpbmRpY2F0aW5nIHdoaWNoIHN1YnByb3BlcnRpZXMgbXVzdCBiZSBpbmRpdmlkdWFsbHkgcmVnaXN0ZXJlZCBmb3IgZWFjaCBjb21wb3VuZC12YWx1ZSBDU1MgcHJvcGVydHkuICovXHJcbiAgICAgICAgICAgIC8qIEVhY2ggdGVtcGxhdGUgY29uc2lzdHMgb2YgdGhlIGNvbXBvdW5kLXZhbHVlJ3MgYmFzZSBuYW1lLCBpdHMgY29uc3RpdHVlbnQgc3VicHJvcGVydHkgbmFtZXMsIGFuZCB0aG9zZSBzdWJwcm9wZXJ0aWVzJyBkZWZhdWx0IHZhbHVlcy4gKi9cclxuICAgICAgICAgICAgdGVtcGxhdGVzOiB7XHJcbiAgICAgICAgICAgICAgICBcInRleHRTaGFkb3dcIjogWyBcIkNvbG9yIFggWSBCbHVyXCIsIFwiYmxhY2sgMHB4IDBweCAwcHhcIiBdLFxyXG4gICAgICAgICAgICAgICAgLyogVG9kbzogQWRkIHN1cHBvcnQgZm9yIGluc2V0IGJveFNoYWRvd3MuICh3ZWJraXQgcGxhY2VzIGl0IGxhc3Qgd2hlcmVhcyBJRSBwbGFjZXMgaXQgZmlyc3QuKSAqL1xyXG4gICAgICAgICAgICAgICAgXCJib3hTaGFkb3dcIjogWyBcIkNvbG9yIFggWSBCbHVyIFNwcmVhZFwiLCBcImJsYWNrIDBweCAwcHggMHB4IDBweFwiIF0sXHJcbiAgICAgICAgICAgICAgICBcImNsaXBcIjogWyBcIlRvcCBSaWdodCBCb3R0b20gTGVmdFwiLCBcIjBweCAwcHggMHB4IDBweFwiIF0sXHJcbiAgICAgICAgICAgICAgICBcImJhY2tncm91bmRQb3NpdGlvblwiOiBbIFwiWCBZXCIsIFwiMCUgMCVcIiBdLFxyXG4gICAgICAgICAgICAgICAgXCJ0cmFuc2Zvcm1PcmlnaW5cIjogWyBcIlggWSBaXCIsIFwiNTAlIDUwJSAwcHhcIiBdLFxyXG4gICAgICAgICAgICAgICAgXCJwZXJzcGVjdGl2ZU9yaWdpblwiOiBbIFwiWCBZXCIsIFwiNTAlIDUwJVwiIF1cclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8qIEEgXCJyZWdpc3RlcmVkXCIgaG9vayBpcyBvbmUgdGhhdCBoYXMgYmVlbiBjb252ZXJ0ZWQgZnJvbSBpdHMgdGVtcGxhdGUgZm9ybSBpbnRvIGEgbGl2ZSxcclxuICAgICAgICAgICAgICAgdHdlZW5hYmxlIHByb3BlcnR5LiBJdCBjb250YWlucyBkYXRhIHRvIGFzc29jaWF0ZSBpdCB3aXRoIGl0cyByb290IHByb3BlcnR5LiAqL1xyXG4gICAgICAgICAgICByZWdpc3RlcmVkOiB7XHJcbiAgICAgICAgICAgICAgICAvKiBOb3RlOiBBIHJlZ2lzdGVyZWQgaG9vayBsb29rcyBsaWtlIHRoaXMgPT0+IHRleHRTaGFkb3dCbHVyOiBbIFwidGV4dFNoYWRvd1wiLCAzIF0sXHJcbiAgICAgICAgICAgICAgICAgICB3aGljaCBjb25zaXN0cyBvZiB0aGUgc3VicHJvcGVydHkncyBuYW1lLCB0aGUgYXNzb2NpYXRlZCByb290IHByb3BlcnR5J3MgbmFtZSxcclxuICAgICAgICAgICAgICAgICAgIGFuZCB0aGUgc3VicHJvcGVydHkncyBwb3NpdGlvbiBpbiB0aGUgcm9vdCdzIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvKiBDb252ZXJ0IHRoZSB0ZW1wbGF0ZXMgaW50byBpbmRpdmlkdWFsIGhvb2tzIHRoZW4gYXBwZW5kIHRoZW0gdG8gdGhlIHJlZ2lzdGVyZWQgb2JqZWN0IGFib3ZlLiAqL1xyXG4gICAgICAgICAgICByZWdpc3RlcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLyogQ29sb3IgaG9va3MgcmVnaXN0cmF0aW9uOiBDb2xvcnMgYXJlIGRlZmF1bHRlZCB0byB3aGl0ZSAtLSBhcyBvcHBvc2VkIHRvIGJsYWNrIC0tIHNpbmNlIGNvbG9ycyB0aGF0IGFyZVxyXG4gICAgICAgICAgICAgICAgICAgY3VycmVudGx5IHNldCB0byBcInRyYW5zcGFyZW50XCIgZGVmYXVsdCB0byB0aGVpciByZXNwZWN0aXZlIHRlbXBsYXRlIGJlbG93IHdoZW4gY29sb3ItYW5pbWF0ZWQsXHJcbiAgICAgICAgICAgICAgICAgICBhbmQgd2hpdGUgaXMgdHlwaWNhbGx5IGEgY2xvc2VyIG1hdGNoIHRvIHRyYW5zcGFyZW50IHRoYW4gYmxhY2sgaXMuIEFuIGV4Y2VwdGlvbiBpcyBtYWRlIGZvciB0ZXh0IChcImNvbG9yXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgd2hpY2ggaXMgYWxtb3N0IGFsd2F5cyBzZXQgY2xvc2VyIHRvIGJsYWNrIHRoYW4gd2hpdGUuICovXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IENTUy5MaXN0cy5jb2xvcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmdiQ29tcG9uZW50cyA9IChDU1MuTGlzdHMuY29sb3JzW2ldID09PSBcImNvbG9yXCIpID8gXCIwIDAgMCAxXCIgOiBcIjI1NSAyNTUgMjU1IDFcIjtcclxuICAgICAgICAgICAgICAgICAgICBDU1MuSG9va3MudGVtcGxhdGVzW0NTUy5MaXN0cy5jb2xvcnNbaV1dID0gWyBcIlJlZCBHcmVlbiBCbHVlIEFscGhhXCIsIHJnYkNvbXBvbmVudHMgXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcm9vdFByb3BlcnR5LFxyXG4gICAgICAgICAgICAgICAgICAgIGhvb2tUZW1wbGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBob29rTmFtZXM7XHJcblxyXG4gICAgICAgICAgICAgICAgLyogSW4gSUUsIGNvbG9yIHZhbHVlcyBpbnNpZGUgY29tcG91bmQtdmFsdWUgcHJvcGVydGllcyBhcmUgcG9zaXRpb25lZCBhdCB0aGUgZW5kIHRoZSB2YWx1ZSBpbnN0ZWFkIG9mIGF0IHRoZSBiZWdpbm5pbmcuXHJcbiAgICAgICAgICAgICAgICAgICBUaHVzLCB3ZSByZS1hcnJhbmdlIHRoZSB0ZW1wbGF0ZXMgYWNjb3JkaW5nbHkuICovXHJcbiAgICAgICAgICAgICAgICBpZiAoSUUpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHJvb3RQcm9wZXJ0eSBpbiBDU1MuSG9va3MudGVtcGxhdGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvb2tUZW1wbGF0ZSA9IENTUy5Ib29rcy50ZW1wbGF0ZXNbcm9vdFByb3BlcnR5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG9va05hbWVzID0gaG9va1RlbXBsYXRlWzBdLnNwbGl0KFwiIFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0VmFsdWVzID0gaG9va1RlbXBsYXRlWzFdLm1hdGNoKENTUy5SZWdFeC52YWx1ZVNwbGl0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChob29rTmFtZXNbMF0gPT09IFwiQ29sb3JcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogUmVwb3NpdGlvbiBib3RoIHRoZSBob29rJ3MgbmFtZSBhbmQgaXRzIGRlZmF1bHQgdmFsdWUgdG8gdGhlIGVuZCBvZiB0aGVpciByZXNwZWN0aXZlIHN0cmluZ3MuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob29rTmFtZXMucHVzaChob29rTmFtZXMuc2hpZnQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWVzLnB1c2goZGVmYXVsdFZhbHVlcy5zaGlmdCgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBSZXBsYWNlIHRoZSBleGlzdGluZyB0ZW1wbGF0ZSBmb3IgdGhlIGhvb2sncyByb290IHByb3BlcnR5LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ1NTLkhvb2tzLnRlbXBsYXRlc1tyb290UHJvcGVydHldID0gWyBob29rTmFtZXMuam9pbihcIiBcIiksIGRlZmF1bHRWYWx1ZXMuam9pbihcIiBcIikgXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBIb29rIHJlZ2lzdHJhdGlvbi4gKi9cclxuICAgICAgICAgICAgICAgIGZvciAocm9vdFByb3BlcnR5IGluIENTUy5Ib29rcy50ZW1wbGF0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBob29rVGVtcGxhdGUgPSBDU1MuSG9va3MudGVtcGxhdGVzW3Jvb3RQcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICAgICAgaG9va05hbWVzID0gaG9va1RlbXBsYXRlWzBdLnNwbGl0KFwiIFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBob29rTmFtZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZ1bGxIb29rTmFtZSA9IHJvb3RQcm9wZXJ0eSArIGhvb2tOYW1lc1tpXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvb2tQb3NpdGlvbiA9IGk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBGb3IgZWFjaCBob29rLCByZWdpc3RlciBpdHMgZnVsbCBuYW1lIChlLmcuIHRleHRTaGFkb3dCbHVyKSB3aXRoIGl0cyByb290IHByb3BlcnR5IChlLmcuIHRleHRTaGFkb3cpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZCB0aGUgaG9vaydzIHBvc2l0aW9uIGluIGl0cyB0ZW1wbGF0ZSdzIGRlZmF1bHQgdmFsdWUgc3RyaW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDU1MuSG9va3MucmVnaXN0ZXJlZFtmdWxsSG9va05hbWVdID0gWyByb290UHJvcGVydHksIGhvb2tQb3NpdGlvbiBdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICBJbmplY3Rpb24gYW5kIEV4dHJhY3Rpb25cclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAvKiBMb29rIHVwIHRoZSByb290IHByb3BlcnR5IGFzc29jaWF0ZWQgd2l0aCB0aGUgaG9vayAoZS5nLiByZXR1cm4gXCJ0ZXh0U2hhZG93XCIgZm9yIFwidGV4dFNoYWRvd0JsdXJcIikuICovXHJcbiAgICAgICAgICAgIC8qIFNpbmNlIGEgaG9vayBjYW5ub3QgYmUgc2V0IGRpcmVjdGx5ICh0aGUgYnJvd3NlciB3b24ndCByZWNvZ25pemUgaXQpLCBzdHlsZSB1cGRhdGluZyBmb3IgaG9va3MgaXMgcm91dGVkIHRocm91Z2ggdGhlIGhvb2sncyByb290IHByb3BlcnR5LiAqL1xyXG4gICAgICAgICAgICBnZXRSb290OiBmdW5jdGlvbiAocHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBob29rRGF0YSA9IENTUy5Ib29rcy5yZWdpc3RlcmVkW3Byb3BlcnR5XTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaG9va0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaG9va0RhdGFbMF07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZXJlIHdhcyBubyBob29rIG1hdGNoLCByZXR1cm4gdGhlIHByb3BlcnR5IG5hbWUgdW50b3VjaGVkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0eTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLyogQ29udmVydCBhbnkgcm9vdFByb3BlcnR5VmFsdWUsIG51bGwgb3Igb3RoZXJ3aXNlLCBpbnRvIGEgc3BhY2UtZGVsaW1pdGVkIGxpc3Qgb2YgaG9vayB2YWx1ZXMgc28gdGhhdFxyXG4gICAgICAgICAgICAgICB0aGUgdGFyZ2V0ZWQgaG9vayBjYW4gYmUgaW5qZWN0ZWQgb3IgZXh0cmFjdGVkIGF0IGl0cyBzdGFuZGFyZCBwb3NpdGlvbi4gKi9cclxuICAgICAgICAgICAgY2xlYW5Sb290UHJvcGVydHlWYWx1ZTogZnVuY3Rpb24ocm9vdFByb3BlcnR5LCByb290UHJvcGVydHlWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgLyogSWYgdGhlIHJvb3RQcm9wZXJ0eVZhbHVlIGlzIHdyYXBwZWQgd2l0aCBcInJnYigpXCIsIFwiY2xpcCgpXCIsIGV0Yy4sIHJlbW92ZSB0aGUgd3JhcHBpbmcgdG8gbm9ybWFsaXplIHRoZSB2YWx1ZSBiZWZvcmUgbWFuaXB1bGF0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKENTUy5SZWdFeC52YWx1ZVVud3JhcC50ZXN0KHJvb3RQcm9wZXJ0eVZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlID0gcm9vdFByb3BlcnR5VmFsdWUubWF0Y2goQ1NTLlJlZ0V4LnZhbHVlVW53cmFwKVsxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBJZiByb290UHJvcGVydHlWYWx1ZSBpcyBhIENTUyBudWxsLXZhbHVlIChmcm9tIHdoaWNoIHRoZXJlJ3MgaW5oZXJlbnRseSBubyBob29rIHZhbHVlIHRvIGV4dHJhY3QpLFxyXG4gICAgICAgICAgICAgICAgICAgZGVmYXVsdCB0byB0aGUgcm9vdCdzIGRlZmF1bHQgdmFsdWUgYXMgZGVmaW5lZCBpbiBDU1MuSG9va3MudGVtcGxhdGVzLiAqL1xyXG4gICAgICAgICAgICAgICAgLyogTm90ZTogQ1NTIG51bGwtdmFsdWVzIGluY2x1ZGUgXCJub25lXCIsIFwiYXV0b1wiLCBhbmQgXCJ0cmFuc3BhcmVudFwiLiBUaGV5IG11c3QgYmUgY29udmVydGVkIGludG8gdGhlaXJcclxuICAgICAgICAgICAgICAgICAgIHplcm8tdmFsdWVzIChlLmcuIHRleHRTaGFkb3c6IFwibm9uZVwiID09PiB0ZXh0U2hhZG93OiBcIjBweCAwcHggMHB4IGJsYWNrXCIpIGZvciBob29rIG1hbmlwdWxhdGlvbiB0byBwcm9jZWVkLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKENTUy5WYWx1ZXMuaXNDU1NOdWxsVmFsdWUocm9vdFByb3BlcnR5VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm9vdFByb3BlcnR5VmFsdWUgPSBDU1MuSG9va3MudGVtcGxhdGVzW3Jvb3RQcm9wZXJ0eV1bMV07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvb3RQcm9wZXJ0eVZhbHVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvKiBFeHRyYWN0ZWQgdGhlIGhvb2sncyB2YWx1ZSBmcm9tIGl0cyByb290IHByb3BlcnR5J3MgdmFsdWUuIFRoaXMgaXMgdXNlZCB0byBnZXQgdGhlIHN0YXJ0aW5nIHZhbHVlIG9mIGFuIGFuaW1hdGluZyBob29rLiAqL1xyXG4gICAgICAgICAgICBleHRyYWN0VmFsdWU6IGZ1bmN0aW9uIChmdWxsSG9va05hbWUsIHJvb3RQcm9wZXJ0eVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaG9va0RhdGEgPSBDU1MuSG9va3MucmVnaXN0ZXJlZFtmdWxsSG9va05hbWVdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChob29rRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBob29rUm9vdCA9IGhvb2tEYXRhWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBob29rUG9zaXRpb24gPSBob29rRGF0YVsxXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcm9vdFByb3BlcnR5VmFsdWUgPSBDU1MuSG9va3MuY2xlYW5Sb290UHJvcGVydHlWYWx1ZShob29rUm9vdCwgcm9vdFByb3BlcnR5VmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBTcGxpdCByb290UHJvcGVydHlWYWx1ZSBpbnRvIGl0cyBjb25zdGl0dWVudCBob29rIHZhbHVlcyB0aGVuIGdyYWIgdGhlIGRlc2lyZWQgaG9vayBhdCBpdHMgc3RhbmRhcmQgcG9zaXRpb24uICovXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvb3RQcm9wZXJ0eVZhbHVlLnRvU3RyaW5nKCkubWF0Y2goQ1NTLlJlZ0V4LnZhbHVlU3BsaXQpW2hvb2tQb3NpdGlvbl07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZSBwcm92aWRlZCBmdWxsSG9va05hbWUgaXNuJ3QgYSByZWdpc3RlcmVkIGhvb2ssIHJldHVybiB0aGUgcm9vdFByb3BlcnR5VmFsdWUgdGhhdCB3YXMgcGFzc2VkIGluLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb290UHJvcGVydHlWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLyogSW5qZWN0IHRoZSBob29rJ3MgdmFsdWUgaW50byBpdHMgcm9vdCBwcm9wZXJ0eSdzIHZhbHVlLiBUaGlzIGlzIHVzZWQgdG8gcGllY2UgYmFjayB0b2dldGhlciB0aGUgcm9vdCBwcm9wZXJ0eVxyXG4gICAgICAgICAgICAgICBvbmNlIFZlbG9jaXR5IGhhcyB1cGRhdGVkIG9uZSBvZiBpdHMgaW5kaXZpZHVhbGx5IGhvb2tlZCB2YWx1ZXMgdGhyb3VnaCB0d2VlbmluZy4gKi9cclxuICAgICAgICAgICAgaW5qZWN0VmFsdWU6IGZ1bmN0aW9uIChmdWxsSG9va05hbWUsIGhvb2tWYWx1ZSwgcm9vdFByb3BlcnR5VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBob29rRGF0YSA9IENTUy5Ib29rcy5yZWdpc3RlcmVkW2Z1bGxIb29rTmFtZV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGhvb2tEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhvb2tSb290ID0gaG9va0RhdGFbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvb2tQb3NpdGlvbiA9IGhvb2tEYXRhWzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZVBhcnRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZVVwZGF0ZWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlID0gQ1NTLkhvb2tzLmNsZWFuUm9vdFByb3BlcnR5VmFsdWUoaG9va1Jvb3QsIHJvb3RQcm9wZXJ0eVZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogU3BsaXQgcm9vdFByb3BlcnR5VmFsdWUgaW50byBpdHMgaW5kaXZpZHVhbCBob29rIHZhbHVlcywgcmVwbGFjZSB0aGUgdGFyZ2V0ZWQgdmFsdWUgd2l0aCBob29rVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgdGhlbiByZWNvbnN0cnVjdCB0aGUgcm9vdFByb3BlcnR5VmFsdWUgc3RyaW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlUGFydHMgPSByb290UHJvcGVydHlWYWx1ZS50b1N0cmluZygpLm1hdGNoKENTUy5SZWdFeC52YWx1ZVNwbGl0KTtcclxuICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZVBhcnRzW2hvb2tQb3NpdGlvbl0gPSBob29rVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcm9vdFByb3BlcnR5VmFsdWVVcGRhdGVkID0gcm9vdFByb3BlcnR5VmFsdWVQYXJ0cy5qb2luKFwiIFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvb3RQcm9wZXJ0eVZhbHVlVXBkYXRlZDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIHByb3ZpZGVkIGZ1bGxIb29rTmFtZSBpc24ndCBhIHJlZ2lzdGVyZWQgaG9vaywgcmV0dXJuIHRoZSByb290UHJvcGVydHlWYWx1ZSB0aGF0IHdhcyBwYXNzZWQgaW4uICovXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvb3RQcm9wZXJ0eVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICBOb3JtYWxpemF0aW9uc1xyXG4gICAgICAgICoqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIC8qIE5vcm1hbGl6YXRpb25zIHN0YW5kYXJkaXplIENTUyBwcm9wZXJ0eSBtYW5pcHVsYXRpb24gYnkgcG9sbHlmaWxsaW5nIGJyb3dzZXItc3BlY2lmaWMgaW1wbGVtZW50YXRpb25zIChlLmcuIG9wYWNpdHkpXHJcbiAgICAgICAgICAgYW5kIHJlZm9ybWF0dGluZyBzcGVjaWFsIHByb3BlcnRpZXMgKGUuZy4gY2xpcCwgcmdiYSkgdG8gbG9vayBsaWtlIHN0YW5kYXJkIG9uZXMuICovXHJcbiAgICAgICAgTm9ybWFsaXphdGlvbnM6IHtcclxuICAgICAgICAgICAgLyogTm9ybWFsaXphdGlvbnMgYXJlIHBhc3NlZCBhIG5vcm1hbGl6YXRpb24gdGFyZ2V0IChlaXRoZXIgdGhlIHByb3BlcnR5J3MgbmFtZSwgaXRzIGV4dHJhY3RlZCB2YWx1ZSwgb3IgaXRzIGluamVjdGVkIHZhbHVlKSxcclxuICAgICAgICAgICAgICAgdGhlIHRhcmdldGVkIGVsZW1lbnQgKHdoaWNoIG1heSBuZWVkIHRvIGJlIHF1ZXJpZWQpLCBhbmQgdGhlIHRhcmdldGVkIHByb3BlcnR5IHZhbHVlLiAqL1xyXG4gICAgICAgICAgICByZWdpc3RlcmVkOiB7XHJcbiAgICAgICAgICAgICAgICBjbGlwOiBmdW5jdGlvbiAodHlwZSwgZWxlbWVudCwgcHJvcGVydHlWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibmFtZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY2xpcFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBDbGlwIG5lZWRzIHRvIGJlIHVud3JhcHBlZCBhbmQgc3RyaXBwZWQgb2YgaXRzIGNvbW1hcyBkdXJpbmcgZXh0cmFjdGlvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImV4dHJhY3RcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHRyYWN0ZWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgVmVsb2NpdHkgYWxzbyBleHRyYWN0ZWQgdGhpcyB2YWx1ZSwgc2tpcCBleHRyYWN0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKENTUy5SZWdFeC53cmFwcGVkVmFsdWVBbHJlYWR5RXh0cmFjdGVkLnRlc3QocHJvcGVydHlWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0ZWQgPSBwcm9wZXJ0eVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBSZW1vdmUgdGhlIFwicmVjdCgpXCIgd3JhcHBlci4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0ZWQgPSBwcm9wZXJ0eVZhbHVlLnRvU3RyaW5nKCkubWF0Y2goQ1NTLlJlZ0V4LnZhbHVlVW53cmFwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogU3RyaXAgb2ZmIGNvbW1hcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0ZWQgPSBleHRyYWN0ZWQgPyBleHRyYWN0ZWRbMV0ucmVwbGFjZSgvLChcXHMrKT8vZywgXCIgXCIpIDogcHJvcGVydHlWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXh0cmFjdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBDbGlwIG5lZWRzIHRvIGJlIHJlLXdyYXBwZWQgZHVyaW5nIGluamVjdGlvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluamVjdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicmVjdChcIiArIHByb3BlcnR5VmFsdWUgKyBcIilcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIGJsdXI6IGZ1bmN0aW9uKHR5cGUsIGVsZW1lbnQsIHByb3BlcnR5VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5hbWVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIi13ZWJraXQtZmlsdGVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJleHRyYWN0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh0cmFjdGVkID0gcGFyc2VGbG9hdChwcm9wZXJ0eVZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiBleHRyYWN0ZWQgaXMgTmFOLCBtZWFuaW5nIHRoZSB2YWx1ZSBpc24ndCBhbHJlYWR5IGV4dHJhY3RlZC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGV4dHJhY3RlZCB8fCBleHRyYWN0ZWQgPT09IDApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJsdXJDb21wb25lbnQgPSBwcm9wZXJ0eVZhbHVlLnRvU3RyaW5nKCkubWF0Y2goL2JsdXJcXCgoWzAtOV0rW0Etel0rKVxcKS9pKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIGZpbHRlciBzdHJpbmcgaGFkIGEgYmx1ciBjb21wb25lbnQsIHJldHVybiBqdXN0IHRoZSBibHVyIHZhbHVlIGFuZCB1bml0IHR5cGUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsdXJDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdGVkID0gYmx1ckNvbXBvbmVudFsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGUgY29tcG9uZW50IGRvZXNuJ3QgZXhpc3QsIGRlZmF1bHQgYmx1ciB0byAwLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RlZCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBleHRyYWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEJsdXIgbmVlZHMgdG8gYmUgcmUtd3JhcHBlZCBkdXJpbmcgaW5qZWN0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW5qZWN0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBGb3IgdGhlIGJsdXIgZWZmZWN0IHRvIGJlIGZ1bGx5IGRlLWFwcGxpZWQsIGl0IG5lZWRzIHRvIGJlIHNldCB0byBcIm5vbmVcIiBpbnN0ZWFkIG9mIDAuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlRmxvYXQocHJvcGVydHlWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJub25lXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImJsdXIoXCIgKyBwcm9wZXJ0eVZhbHVlICsgXCIpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvKiA8PUlFOCBkbyBub3Qgc3VwcG9ydCB0aGUgc3RhbmRhcmQgb3BhY2l0eSBwcm9wZXJ0eS4gVGhleSB1c2UgZmlsdGVyOmFscGhhKG9wYWNpdHk9SU5UKSBpbnN0ZWFkLiAqL1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogZnVuY3Rpb24gKHR5cGUsIGVsZW1lbnQsIHByb3BlcnR5VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoSUUgPD0gOCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuYW1lXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZmlsdGVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZXh0cmFjdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIDw9SUU4IHJldHVybiBhIFwiZmlsdGVyXCIgdmFsdWUgb2YgXCJhbHBoYShvcGFjaXR5PVxcZHsxLDN9KVwiLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV4dHJhY3QgdGhlIHZhbHVlIGFuZCBjb252ZXJ0IGl0IHRvIGEgZGVjaW1hbCB2YWx1ZSB0byBtYXRjaCB0aGUgc3RhbmRhcmQgQ1NTIG9wYWNpdHkgcHJvcGVydHkncyBmb3JtYXR0aW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHRyYWN0ZWQgPSBwcm9wZXJ0eVZhbHVlLnRvU3RyaW5nKCkubWF0Y2goL2FscGhhXFwob3BhY2l0eT0oLiopXFwpL2kpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXh0cmFjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIENvbnZlcnQgdG8gZGVjaW1hbCB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlWYWx1ZSA9IGV4dHJhY3RlZFsxXSAvIDEwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBXaGVuIGV4dHJhY3Rpbmcgb3BhY2l0eSwgZGVmYXVsdCB0byAxIHNpbmNlIGEgbnVsbCB2YWx1ZSBtZWFucyBvcGFjaXR5IGhhc24ndCBiZWVuIHNldC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlWYWx1ZSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvcGVydHlWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbmplY3RcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBPcGFjaWZpZWQgZWxlbWVudHMgYXJlIHJlcXVpcmVkIHRvIGhhdmUgdGhlaXIgem9vbSBwcm9wZXJ0eSBzZXQgdG8gYSBub24temVybyB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnpvb20gPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTZXR0aW5nIHRoZSBmaWx0ZXIgcHJvcGVydHkgb24gZWxlbWVudHMgd2l0aCBjZXJ0YWluIGZvbnQgcHJvcGVydHkgY29tYmluYXRpb25zIGNhbiByZXN1bHQgaW4gYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hseSB1bmFwcGVhbGluZyB1bHRyYS1ib2xkaW5nIGVmZmVjdC4gVGhlcmUncyBubyB3YXkgdG8gcmVtZWR5IHRoaXMgdGhyb3VnaG91dCBhIHR3ZWVuLCBidXQgZHJvcHBpbmcgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgYWx0b2dldGhlciAod2hlbiBvcGFjaXR5IGhpdHMgMSkgYXQgbGVhc3RzIGVuc3VyZXMgdGhhdCB0aGUgZ2xpdGNoIGlzIGdvbmUgcG9zdC10d2VlbmluZy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VGbG9hdChwcm9wZXJ0eVZhbHVlKSA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBBcyBwZXIgdGhlIGZpbHRlciBwcm9wZXJ0eSdzIHNwZWMsIGNvbnZlcnQgdGhlIGRlY2ltYWwgdmFsdWUgdG8gYSB3aG9sZSBudW1iZXIgYW5kIHdyYXAgdGhlIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiYWxwaGEob3BhY2l0eT1cIiArIHBhcnNlSW50KHBhcnNlRmxvYXQocHJvcGVydHlWYWx1ZSkgKiAxMDAsIDEwKSArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8qIFdpdGggYWxsIG90aGVyIGJyb3dzZXJzLCBub3JtYWxpemF0aW9uIGlzIG5vdCByZXF1aXJlZDsgcmV0dXJuIHRoZSBzYW1lIHZhbHVlcyB0aGF0IHdlcmUgcGFzc2VkIGluLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5hbWVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvcGFjaXR5XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZXh0cmFjdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0eVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluamVjdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0eVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICBCYXRjaGVkIFJlZ2lzdHJhdGlvbnNcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAvKiBOb3RlOiBCYXRjaGVkIG5vcm1hbGl6YXRpb25zIGV4dGVuZCB0aGUgQ1NTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWQgb2JqZWN0LiAqL1xyXG4gICAgICAgICAgICByZWdpc3RlcjogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXNcclxuICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIFRyYW5zZm9ybXMgYXJlIHRoZSBzdWJwcm9wZXJ0aWVzIGNvbnRhaW5lZCBieSB0aGUgQ1NTIFwidHJhbnNmb3JtXCIgcHJvcGVydHkuIFRyYW5zZm9ybXMgbXVzdCB1bmRlcmdvIG5vcm1hbGl6YXRpb25cclxuICAgICAgICAgICAgICAgICAgIHNvIHRoYXQgdGhleSBjYW4gYmUgcmVmZXJlbmNlZCBpbiBhIHByb3BlcnRpZXMgbWFwIGJ5IHRoZWlyIGluZGl2aWR1YWwgbmFtZXMuICovXHJcbiAgICAgICAgICAgICAgICAvKiBOb3RlOiBXaGVuIHRyYW5zZm9ybXMgYXJlIFwic2V0XCIsIHRoZXkgYXJlIGFjdHVhbGx5IGFzc2lnbmVkIHRvIGEgcGVyLWVsZW1lbnQgdHJhbnNmb3JtQ2FjaGUuIFdoZW4gYWxsIHRyYW5zZm9ybVxyXG4gICAgICAgICAgICAgICAgICAgc2V0dGluZyBpcyBjb21wbGV0ZSBjb21wbGV0ZSwgQ1NTLmZsdXNoVHJhbnNmb3JtQ2FjaGUoKSBtdXN0IGJlIG1hbnVhbGx5IGNhbGxlZCB0byBmbHVzaCB0aGUgdmFsdWVzIHRvIHRoZSBET00uXHJcbiAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm0gc2V0dGluZyBpcyBiYXRjaGVkIGluIHRoaXMgd2F5IHRvIGltcHJvdmUgcGVyZm9ybWFuY2U6IHRoZSB0cmFuc2Zvcm0gc3R5bGUgb25seSBuZWVkcyB0byBiZSB1cGRhdGVkXHJcbiAgICAgICAgICAgICAgICAgICBvbmNlIHdoZW4gbXVsdGlwbGUgdHJhbnNmb3JtIHN1YnByb3BlcnRpZXMgYXJlIGJlaW5nIGFuaW1hdGVkIHNpbXVsdGFuZW91c2x5LiAqL1xyXG4gICAgICAgICAgICAgICAgLyogTm90ZTogSUU5IGFuZCBBbmRyb2lkIEdpbmdlcmJyZWFkIGhhdmUgc3VwcG9ydCBmb3IgMkQgLS0gYnV0IG5vdCAzRCAtLSB0cmFuc2Zvcm1zLiBTaW5jZSBhbmltYXRpbmcgdW5zdXBwb3J0ZWRcclxuICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybSBwcm9wZXJ0aWVzIHJlc3VsdHMgaW4gdGhlIGJyb3dzZXIgaWdub3JpbmcgdGhlICplbnRpcmUqIHRyYW5zZm9ybSBzdHJpbmcsIHdlIHByZXZlbnQgdGhlc2UgM0QgdmFsdWVzXHJcbiAgICAgICAgICAgICAgICAgICBmcm9tIGJlaW5nIG5vcm1hbGl6ZWQgZm9yIHRoZXNlIGJyb3dzZXJzIHNvIHRoYXQgdHdlZW5pbmcgc2tpcHMgdGhlc2UgcHJvcGVydGllcyBhbHRvZ2V0aGVyXHJcbiAgICAgICAgICAgICAgICAgICAoc2luY2UgaXQgd2lsbCBpZ25vcmUgdGhlbSBhcyBiZWluZyB1bnN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlci4pICovXHJcbiAgICAgICAgICAgICAgICBpZiAoIShJRSA8PSA5KSAmJiAhVmVsb2NpdHkuU3RhdGUuaXNHaW5nZXJicmVhZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IFNpbmNlIHRoZSBzdGFuZGFsb25lIENTUyBcInBlcnNwZWN0aXZlXCIgcHJvcGVydHkgYW5kIHRoZSBDU1MgdHJhbnNmb3JtIFwicGVyc3BlY3RpdmVcIiBzdWJwcm9wZXJ0eVxyXG4gICAgICAgICAgICAgICAgICAgIHNoYXJlIHRoZSBzYW1lIG5hbWUsIHRoZSBsYXR0ZXIgaXMgZ2l2ZW4gYSB1bmlxdWUgdG9rZW4gd2l0aGluIFZlbG9jaXR5OiBcInRyYW5zZm9ybVBlcnNwZWN0aXZlXCIuICovXHJcbiAgICAgICAgICAgICAgICAgICAgQ1NTLkxpc3RzLnRyYW5zZm9ybXNCYXNlID0gQ1NTLkxpc3RzLnRyYW5zZm9ybXNCYXNlLmNvbmNhdChDU1MuTGlzdHMudHJhbnNmb3JtczNEKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IENTUy5MaXN0cy50cmFuc2Zvcm1zQmFzZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIFdyYXAgdGhlIGR5bmFtaWNhbGx5IGdlbmVyYXRlZCBub3JtYWxpemF0aW9uIGZ1bmN0aW9uIGluIGEgbmV3IHNjb3BlIHNvIHRoYXQgdHJhbnNmb3JtTmFtZSdzIHZhbHVlIGlzXHJcbiAgICAgICAgICAgICAgICAgICAgcGFpcmVkIHdpdGggaXRzIHJlc3BlY3RpdmUgZnVuY3Rpb24uIChPdGhlcndpc2UsIGFsbCBmdW5jdGlvbnMgd291bGQgdGFrZSB0aGUgZmluYWwgZm9yIGxvb3AncyB0cmFuc2Zvcm1OYW1lLikgKi9cclxuICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2Zvcm1OYW1lID0gQ1NTLkxpc3RzLnRyYW5zZm9ybXNCYXNlW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1NTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbdHJhbnNmb3JtTmFtZV0gPSBmdW5jdGlvbiAodHlwZSwgZWxlbWVudCwgcHJvcGVydHlWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogVGhlIG5vcm1hbGl6ZWQgcHJvcGVydHkgbmFtZSBpcyB0aGUgcGFyZW50IFwidHJhbnNmb3JtXCIgcHJvcGVydHkgLS0gdGhlIHByb3BlcnR5IHRoYXQgaXMgYWN0dWFsbHkgc2V0IGluIENTUy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibmFtZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2Zvcm1cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBUcmFuc2Zvcm0gdmFsdWVzIGFyZSBjYWNoZWQgb250byBhIHBlci1lbGVtZW50IHRyYW5zZm9ybUNhY2hlIG9iamVjdC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZXh0cmFjdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGlzIHRyYW5zZm9ybSBoYXMgeWV0IHRvIGJlIGFzc2lnbmVkIGEgdmFsdWUsIHJldHVybiBpdHMgbnVsbCB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERhdGEoZWxlbWVudCkgPT09IHVuZGVmaW5lZCB8fCBEYXRhKGVsZW1lbnQpLnRyYW5zZm9ybUNhY2hlW3RyYW5zZm9ybU5hbWVdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFNjYWxlIENTUy5MaXN0cy50cmFuc2Zvcm1zQmFzZSBkZWZhdWx0IHRvIDEgd2hlcmVhcyBhbGwgb3RoZXIgdHJhbnNmb3JtIHByb3BlcnRpZXMgZGVmYXVsdCB0byAwLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC9ec2NhbGUvaS50ZXN0KHRyYW5zZm9ybU5hbWUpID8gMSA6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFdoZW4gdHJhbnNmb3JtIHZhbHVlcyBhcmUgc2V0LCB0aGV5IGFyZSB3cmFwcGVkIGluIHBhcmVudGhlc2VzIGFzIHBlciB0aGUgQ1NTIHNwZWMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRodXMsIHdoZW4gZXh0cmFjdGluZyB0aGVpciB2YWx1ZXMgKGZvciB0d2VlbiBjYWxjdWxhdGlvbnMpLCB3ZSBzdHJpcCBvZmYgdGhlIHBhcmVudGhlc2VzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGEoZWxlbWVudCkudHJhbnNmb3JtQ2FjaGVbdHJhbnNmb3JtTmFtZV0ucmVwbGFjZSgvWygpXS9nLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbmplY3RcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGludmFsaWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIGFuIGluZGl2aWR1YWwgdHJhbnNmb3JtIHByb3BlcnR5IGNvbnRhaW5zIGFuIHVuc3VwcG9ydGVkIHVuaXQgdHlwZSwgdGhlIGJyb3dzZXIgaWdub3JlcyB0aGUgKmVudGlyZSogdHJhbnNmb3JtIHByb3BlcnR5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaHVzLCBwcm90ZWN0IHVzZXJzIGZyb20gdGhlbXNlbHZlcyBieSBza2lwcGluZyBzZXR0aW5nIGZvciB0cmFuc2Zvcm0gdmFsdWVzIHN1cHBsaWVkIHdpdGggaW52YWxpZCB1bml0IHR5cGVzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTd2l0Y2ggb24gdGhlIGJhc2UgdHJhbnNmb3JtIHR5cGU7IGlnbm9yZSB0aGUgYXhpcyBieSByZW1vdmluZyB0aGUgbGFzdCBsZXR0ZXIgZnJvbSB0aGUgdHJhbnNmb3JtJ3MgbmFtZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0cmFuc2Zvcm1OYW1lLnN1YnN0cigwLCB0cmFuc2Zvcm1OYW1lLmxlbmd0aCAtIDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBXaGl0ZWxpc3QgdW5pdCB0eXBlcyBmb3IgZWFjaCB0cmFuc2Zvcm0uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidHJhbnNsYXRlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52YWxpZCA9ICEvKCV8cHh8ZW18cmVtfHZ3fHZofFxcZCkkL2kudGVzdChwcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFNpbmNlIGFuIGF4aXMtZnJlZSBcInNjYWxlXCIgcHJvcGVydHkgaXMgc3VwcG9ydGVkIGFzIHdlbGwsIGEgbGl0dGxlIGhhY2sgaXMgdXNlZCBoZXJlIHRvIGRldGVjdCBpdCBieSBjaG9wcGluZyBvZmYgaXRzIGxhc3QgbGV0dGVyLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNjYWxcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzY2FsZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIENocm9tZSBvbiBBbmRyb2lkIGhhcyBhIGJ1ZyBpbiB3aGljaCBzY2FsZWQgZWxlbWVudHMgYmx1ciBpZiB0aGVpciBpbml0aWFsIHNjYWxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgaXMgYmVsb3cgMSAod2hpY2ggY2FuIGhhcHBlbiB3aXRoIGZvcmNlZmVlZGluZykuIFRodXMsIHdlIGRldGVjdCBhIHlldC11bnNldCBzY2FsZSBwcm9wZXJ0eVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZCBlbnN1cmUgdGhhdCBpdHMgZmlyc3QgdmFsdWUgaXMgYWx3YXlzIDEuIE1vcmUgaW5mbzogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDQxNzg5MC9jc3MzLWFuaW1hdGlvbnMtd2l0aC10cmFuc2Zvcm0tY2F1c2VzLWJsdXJyZWQtZWxlbWVudHMtb24td2Via2l0LzEwNDE3OTYyIzEwNDE3OTYyICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFZlbG9jaXR5LlN0YXRlLmlzQW5kcm9pZCAmJiBEYXRhKGVsZW1lbnQpLnRyYW5zZm9ybUNhY2hlW3RyYW5zZm9ybU5hbWVdID09PSB1bmRlZmluZWQgJiYgcHJvcGVydHlWYWx1ZSA8IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlWYWx1ZSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkID0gIS8oXFxkKSQvaS50ZXN0KHByb3BlcnR5VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNrZXdcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkID0gIS8oZGVnfFxcZCkkL2kudGVzdChwcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyb3RhdGVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkID0gIS8oZGVnfFxcZCkkL2kudGVzdChwcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpbnZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBBcyBwZXIgdGhlIENTUyBzcGVjLCB3cmFwIHRoZSB2YWx1ZSBpbiBwYXJlbnRoZXNlcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGEoZWxlbWVudCkudHJhbnNmb3JtQ2FjaGVbdHJhbnNmb3JtTmFtZV0gPSBcIihcIiArIHByb3BlcnR5VmFsdWUgKyBcIilcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQWx0aG91Z2ggdGhlIHZhbHVlIGlzIHNldCBvbiB0aGUgdHJhbnNmb3JtQ2FjaGUgb2JqZWN0LCByZXR1cm4gdGhlIG5ld2x5LXVwZGF0ZWQgdmFsdWUgZm9yIHRoZSBjYWxsaW5nIGNvZGUgdG8gcHJvY2VzcyBhcyBub3JtYWwuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRhKGVsZW1lbnQpLnRyYW5zZm9ybUNhY2hlW3RyYW5zZm9ybU5hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyoqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICBDb2xvcnNcclxuICAgICAgICAgICAgICAgICoqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgLyogU2luY2UgVmVsb2NpdHkgb25seSBhbmltYXRlcyBhIHNpbmdsZSBudW1lcmljIHZhbHVlIHBlciBwcm9wZXJ0eSwgY29sb3IgYW5pbWF0aW9uIGlzIGFjaGlldmVkIGJ5IGhvb2tpbmcgdGhlIGluZGl2aWR1YWwgUkdCQSBjb21wb25lbnRzIG9mIENTUyBjb2xvciBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICAgICAgICAgQWNjb3JkaW5nbHksIGNvbG9yIHZhbHVlcyBtdXN0IGJlIG5vcm1hbGl6ZWQgKGUuZy4gXCIjZmYwMDAwXCIsIFwicmVkXCIsIGFuZCBcInJnYigyNTUsIDAsIDApXCIgPT0+IFwiMjU1IDAgMCAxXCIpIHNvIHRoYXQgdGhlaXIgY29tcG9uZW50cyBjYW4gYmUgaW5qZWN0ZWQvZXh0cmFjdGVkIGJ5IENTUy5Ib29rcyBsb2dpYy4gKi9cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ1NTLkxpc3RzLmNvbG9ycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIFdyYXAgdGhlIGR5bmFtaWNhbGx5IGdlbmVyYXRlZCBub3JtYWxpemF0aW9uIGZ1bmN0aW9uIGluIGEgbmV3IHNjb3BlIHNvIHRoYXQgY29sb3JOYW1lJ3MgdmFsdWUgaXMgcGFpcmVkIHdpdGggaXRzIHJlc3BlY3RpdmUgZnVuY3Rpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgKE90aGVyd2lzZSwgYWxsIGZ1bmN0aW9ucyB3b3VsZCB0YWtlIHRoZSBmaW5hbCBmb3IgbG9vcCdzIGNvbG9yTmFtZS4pICovXHJcbiAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yTmFtZSA9IENTUy5MaXN0cy5jb2xvcnNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBJbiBJRTw9OCwgd2hpY2ggc3VwcG9ydCByZ2IgYnV0IG5vdCByZ2JhLCBjb2xvciBwcm9wZXJ0aWVzIGFyZSByZXZlcnRlZCB0byByZ2IgYnkgc3RyaXBwaW5nIG9mZiB0aGUgYWxwaGEgY29tcG9uZW50LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDU1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtjb2xvck5hbWVdID0gZnVuY3Rpb24odHlwZSwgZWxlbWVudCwgcHJvcGVydHlWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5hbWVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBDb252ZXJ0IGFsbCBjb2xvciB2YWx1ZXMgaW50byB0aGUgcmdiIGZvcm1hdC4gKE9sZCBJRSBjYW4gcmV0dXJuIGhleCB2YWx1ZXMgYW5kIGNvbG9yIG5hbWVzIGluc3RlYWQgb2YgcmdiL3JnYmEuKSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJleHRyYWN0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHRyYWN0ZWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGUgY29sb3IgaXMgYWxyZWFkeSBpbiBpdHMgaG9va2FibGUgZm9ybSAoZS5nLiBcIjI1NSAyNTUgMjU1IDFcIikgZHVlIHRvIGhhdmluZyBiZWVuIHByZXZpb3VzbHkgZXh0cmFjdGVkLCBza2lwIGV4dHJhY3Rpb24uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChDU1MuUmVnRXgud3JhcHBlZFZhbHVlQWxyZWFkeUV4dHJhY3RlZC50ZXN0KHByb3BlcnR5VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0ZWQgPSBwcm9wZXJ0eVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnZlcnRlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvck5hbWVzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFjazogXCJyZ2IoMCwgMCwgMClcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmx1ZTogXCJyZ2IoMCwgMCwgMjU1KVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmF5OiBcInJnYigxMjgsIDEyOCwgMTI4KVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmVlbjogXCJyZ2IoMCwgMTI4LCAwKVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWQ6IFwicmdiKDI1NSwgMCwgMClcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGU6IFwicmdiKDI1NSwgMjU1LCAyNTUpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIENvbnZlcnQgY29sb3IgbmFtZXMgdG8gcmdiLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC9eW0Etel0rJC9pLnRlc3QocHJvcGVydHlWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sb3JOYW1lc1twcm9wZXJ0eVZhbHVlXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnRlZCA9IGNvbG9yTmFtZXNbcHJvcGVydHlWYWx1ZV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiBhbiB1bm1hdGNoZWQgY29sb3IgbmFtZSBpcyBwcm92aWRlZCwgZGVmYXVsdCB0byBibGFjay4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udmVydGVkID0gY29sb3JOYW1lcy5ibGFjaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBDb252ZXJ0IGhleCB2YWx1ZXMgdG8gcmdiLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChDU1MuUmVnRXguaXNIZXgudGVzdChwcm9wZXJ0eVZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnRlZCA9IFwicmdiKFwiICsgQ1NTLlZhbHVlcy5oZXhUb1JnYihwcm9wZXJ0eVZhbHVlKS5qb2luKFwiIFwiKSArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIHByb3ZpZGVkIGNvbG9yIGRvZXNuJ3QgbWF0Y2ggYW55IG9mIHRoZSBhY2NlcHRlZCBjb2xvciBmb3JtYXRzLCBkZWZhdWx0IHRvIGJsYWNrLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghKC9ecmdiYT9cXCgvaS50ZXN0KHByb3BlcnR5VmFsdWUpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnRlZCA9IGNvbG9yTmFtZXMuYmxhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogUmVtb3ZlIHRoZSBzdXJyb3VuZGluZyBcInJnYi9yZ2JhKClcIiBzdHJpbmcgdGhlbiByZXBsYWNlIGNvbW1hcyB3aXRoIHNwYWNlcyBhbmQgc3RyaXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdGVkIHNwYWNlcyAoaW4gY2FzZSB0aGUgdmFsdWUgaW5jbHVkZWQgc3BhY2VzIHRvIGJlZ2luIHdpdGgpLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdGVkID0gKGNvbnZlcnRlZCB8fCBwcm9wZXJ0eVZhbHVlKS50b1N0cmluZygpLm1hdGNoKENTUy5SZWdFeC52YWx1ZVVud3JhcClbMV0ucmVwbGFjZSgvLChcXHMrKT8vZywgXCIgXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTbyBsb25nIGFzIHRoaXMgaXNuJ3QgPD1JRTgsIGFkZCBhIGZvdXJ0aCAoYWxwaGEpIGNvbXBvbmVudCBpZiBpdCdzIG1pc3NpbmcgYW5kIGRlZmF1bHQgaXQgdG8gMSAodmlzaWJsZSkuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKElFIDw9IDgpICYmIGV4dHJhY3RlZC5zcGxpdChcIiBcIikubGVuZ3RoID09PSAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0ZWQgKz0gXCIgMVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXh0cmFjdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbmplY3RcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhpcyBpcyBJRTw9OCBhbmQgYW4gYWxwaGEgY29tcG9uZW50IGV4aXN0cywgc3RyaXAgaXQgb2ZmLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoSUUgPD0gOCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnR5VmFsdWUuc3BsaXQoXCIgXCIpLmxlbmd0aCA9PT0gNCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5VmFsdWUgPSBwcm9wZXJ0eVZhbHVlLnNwbGl0KC9cXHMrLykuc2xpY2UoMCwgMykuam9pbihcIiBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIE90aGVyd2lzZSwgYWRkIGEgZm91cnRoIChhbHBoYSkgY29tcG9uZW50IGlmIGl0J3MgbWlzc2luZyBhbmQgZGVmYXVsdCBpdCB0byAxICh2aXNpYmxlKS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eVZhbHVlLnNwbGl0KFwiIFwiKS5sZW5ndGggPT09IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5VmFsdWUgKz0gXCIgMVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBSZS1pbnNlcnQgdGhlIGJyb3dzZXItYXBwcm9wcmlhdGUgd3JhcHBlcihcInJnYi9yZ2JhKClcIiksIGluc2VydCBjb21tYXMsIGFuZCBzdHJpcCBvZmYgZGVjaW1hbCB1bml0c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbiBhbGwgdmFsdWVzIGJ1dCB0aGUgZm91cnRoIChSLCBHLCBhbmQgQiBvbmx5IGFjY2VwdCB3aG9sZSBudW1iZXJzKS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChJRSA8PSA4ID8gXCJyZ2JcIiA6IFwicmdiYVwiKSArIFwiKFwiICsgcHJvcGVydHlWYWx1ZS5yZXBsYWNlKC9cXHMrL2csIFwiLFwiKS5yZXBsYWNlKC9cXC4oXFxkKSsoPz0sKS9nLCBcIlwiKSArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgQ1NTIFByb3BlcnR5IE5hbWVzXHJcbiAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICBOYW1lczoge1xyXG4gICAgICAgICAgICAvKiBDYW1lbGNhc2UgYSBwcm9wZXJ0eSBuYW1lIGludG8gaXRzIEphdmFTY3JpcHQgbm90YXRpb24gKGUuZy4gXCJiYWNrZ3JvdW5kLWNvbG9yXCIgPT0+IFwiYmFja2dyb3VuZENvbG9yXCIpLlxyXG4gICAgICAgICAgICAgICBDYW1lbGNhc2luZyBpcyB1c2VkIHRvIG5vcm1hbGl6ZSBwcm9wZXJ0eSBuYW1lcyBiZXR3ZWVuIGFuZCBhY3Jvc3MgY2FsbHMuICovXHJcbiAgICAgICAgICAgIGNhbWVsQ2FzZTogZnVuY3Rpb24gKHByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvcGVydHkucmVwbGFjZSgvLShcXHcpL2csIGZ1bmN0aW9uIChtYXRjaCwgc3ViTWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3ViTWF0Y2gudG9VcHBlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLyogRm9yIFNWRyBlbGVtZW50cywgc29tZSBwcm9wZXJ0aWVzIChuYW1lbHksIGRpbWVuc2lvbmFsIG9uZXMpIGFyZSBHRVQvU0VUIHZpYSB0aGUgZWxlbWVudCdzIEhUTUwgYXR0cmlidXRlcyAoaW5zdGVhZCBvZiB2aWEgQ1NTIHN0eWxlcykuICovXHJcbiAgICAgICAgICAgIFNWR0F0dHJpYnV0ZTogZnVuY3Rpb24gKHByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgU1ZHQXR0cmlidXRlcyA9IFwid2lkdGh8aGVpZ2h0fHh8eXxjeHxjeXxyfHJ4fHJ5fHgxfHgyfHkxfHkyXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgLyogQ2VydGFpbiBicm93c2VycyByZXF1aXJlIGFuIFNWRyB0cmFuc2Zvcm0gdG8gYmUgYXBwbGllZCBhcyBhbiBhdHRyaWJ1dGUuIChPdGhlcndpc2UsIGFwcGxpY2F0aW9uIHZpYSBDU1MgaXMgcHJlZmVyYWJsZSBkdWUgdG8gM0Qgc3VwcG9ydC4pICovXHJcbiAgICAgICAgICAgICAgICBpZiAoSUUgfHwgKFZlbG9jaXR5LlN0YXRlLmlzQW5kcm9pZCAmJiAhVmVsb2NpdHkuU3RhdGUuaXNDaHJvbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgU1ZHQXR0cmlidXRlcyArPSBcInx0cmFuc2Zvcm1cIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChcIl4oXCIgKyBTVkdBdHRyaWJ1dGVzICsgXCIpJFwiLCBcImlcIikudGVzdChwcm9wZXJ0eSk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvKiBEZXRlcm1pbmUgd2hldGhlciBhIHByb3BlcnR5IHNob3VsZCBiZSBzZXQgd2l0aCBhIHZlbmRvciBwcmVmaXguICovXHJcbiAgICAgICAgICAgIC8qIElmIGEgcHJlZml4ZWQgdmVyc2lvbiBvZiB0aGUgcHJvcGVydHkgZXhpc3RzLCByZXR1cm4gaXQuIE90aGVyd2lzZSwgcmV0dXJuIHRoZSBvcmlnaW5hbCBwcm9wZXJ0eSBuYW1lLlxyXG4gICAgICAgICAgICAgICBJZiB0aGUgcHJvcGVydHkgaXMgbm90IGF0IGFsbCBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIsIHJldHVybiBhIGZhbHNlIGZsYWcuICovXHJcbiAgICAgICAgICAgIHByZWZpeENoZWNrOiBmdW5jdGlvbiAocHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgIC8qIElmIHRoaXMgcHJvcGVydHkgaGFzIGFscmVhZHkgYmVlbiBjaGVja2VkLCByZXR1cm4gdGhlIGNhY2hlZCB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChWZWxvY2l0eS5TdGF0ZS5wcmVmaXhNYXRjaGVzW3Byb3BlcnR5XSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbIFZlbG9jaXR5LlN0YXRlLnByZWZpeE1hdGNoZXNbcHJvcGVydHldLCB0cnVlIF07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2ZW5kb3JzID0gWyBcIlwiLCBcIldlYmtpdFwiLCBcIk1velwiLCBcIm1zXCIsIFwiT1wiIF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCB2ZW5kb3JzTGVuZ3RoID0gdmVuZG9ycy5sZW5ndGg7IGkgPCB2ZW5kb3JzTGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb3BlcnR5UHJlZml4ZWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlQcmVmaXhlZCA9IHByb3BlcnR5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQ2FwaXRhbGl6ZSB0aGUgZmlyc3QgbGV0dGVyIG9mIHRoZSBwcm9wZXJ0eSB0byBjb25mb3JtIHRvIEphdmFTY3JpcHQgdmVuZG9yIHByZWZpeCBub3RhdGlvbiAoZS5nLiB3ZWJraXRGaWx0ZXIpLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlQcmVmaXhlZCA9IHZlbmRvcnNbaV0gKyBwcm9wZXJ0eS5yZXBsYWNlKC9eXFx3LywgZnVuY3Rpb24obWF0Y2gpIHsgcmV0dXJuIG1hdGNoLnRvVXBwZXJDYXNlKCk7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBDaGVjayBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0aGlzIHByb3BlcnR5IGFzIHByZWZpeGVkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoVHlwZS5pc1N0cmluZyhWZWxvY2l0eS5TdGF0ZS5wcmVmaXhFbGVtZW50LnN0eWxlW3Byb3BlcnR5UHJlZml4ZWRdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQ2FjaGUgdGhlIG1hdGNoLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkuU3RhdGUucHJlZml4TWF0Y2hlc1twcm9wZXJ0eV0gPSBwcm9wZXJ0eVByZWZpeGVkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIHByb3BlcnR5UHJlZml4ZWQsIHRydWUgXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHRoaXMgcHJvcGVydHkgaW4gYW55IGZvcm0sIGluY2x1ZGUgYSBmYWxzZSBmbGFnIHNvIHRoYXQgdGhlIGNhbGxlciBjYW4gZGVjaWRlIGhvdyB0byBwcm9jZWVkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbIHByb3BlcnR5LCBmYWxzZSBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgIENTUyBQcm9wZXJ0eSBWYWx1ZXNcclxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIFZhbHVlczoge1xyXG4gICAgICAgICAgICAvKiBIZXggdG8gUkdCIGNvbnZlcnNpb24uIENvcHlyaWdodCBUaW0gRG93bjogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy81NjIzODM4L3JnYi10by1oZXgtYW5kLWhleC10by1yZ2IgKi9cclxuICAgICAgICAgICAgaGV4VG9SZ2I6IGZ1bmN0aW9uIChoZXgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzaG9ydGZvcm1SZWdleCA9IC9eIz8oW2EtZlxcZF0pKFthLWZcXGRdKShbYS1mXFxkXSkkL2ksXHJcbiAgICAgICAgICAgICAgICAgICAgbG9uZ2Zvcm1SZWdleCA9IC9eIz8oW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkkL2ksXHJcbiAgICAgICAgICAgICAgICAgICAgcmdiUGFydHM7XHJcblxyXG4gICAgICAgICAgICAgICAgaGV4ID0gaGV4LnJlcGxhY2Uoc2hvcnRmb3JtUmVnZXgsIGZ1bmN0aW9uIChtLCByLCBnLCBiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgKyByICsgZyArIGcgKyBiICsgYjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHJnYlBhcnRzID0gbG9uZ2Zvcm1SZWdleC5leGVjKGhleCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJnYlBhcnRzID8gWyBwYXJzZUludChyZ2JQYXJ0c1sxXSwgMTYpLCBwYXJzZUludChyZ2JQYXJ0c1syXSwgMTYpLCBwYXJzZUludChyZ2JQYXJ0c1szXSwgMTYpIF0gOiBbIDAsIDAsIDAgXTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIGlzQ1NTTnVsbFZhbHVlOiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIC8qIFRoZSBicm93c2VyIGRlZmF1bHRzIENTUyB2YWx1ZXMgdGhhdCBoYXZlIG5vdCBiZWVuIHNldCB0byBlaXRoZXIgMCBvciBvbmUgb2Ygc2V2ZXJhbCBwb3NzaWJsZSBudWxsLXZhbHVlIHN0cmluZ3MuXHJcbiAgICAgICAgICAgICAgICAgICBUaHVzLCB3ZSBjaGVjayBmb3IgYm90aCBmYWxzaW5lc3MgYW5kIHRoZXNlIHNwZWNpYWwgc3RyaW5ncy4gKi9cclxuICAgICAgICAgICAgICAgIC8qIE51bGwtdmFsdWUgY2hlY2tpbmcgaXMgcGVyZm9ybWVkIHRvIGRlZmF1bHQgdGhlIHNwZWNpYWwgc3RyaW5ncyB0byAwIChmb3IgdGhlIHNha2Ugb2YgdHdlZW5pbmcpIG9yIHRoZWlyIGhvb2tcclxuICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlcyBhcyBkZWZpbmVkIGFzIENTUy5Ib29rcyAoZm9yIHRoZSBzYWtlIG9mIGhvb2sgaW5qZWN0aW9uL2V4dHJhY3Rpb24pLiAqL1xyXG4gICAgICAgICAgICAgICAgLyogTm90ZTogQ2hyb21lIHJldHVybnMgXCJyZ2JhKDAsIDAsIDAsIDApXCIgZm9yIGFuIHVuZGVmaW5lZCBjb2xvciB3aGVyZWFzIElFIHJldHVybnMgXCJ0cmFuc3BhcmVudFwiLiAqL1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICh2YWx1ZSA9PSAwIHx8IC9eKG5vbmV8YXV0b3x0cmFuc3BhcmVudHwocmdiYVxcKDAsID8wLCA/MCwgPzBcXCkpKSQvaS50ZXN0KHZhbHVlKSk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvKiBSZXRyaWV2ZSBhIHByb3BlcnR5J3MgZGVmYXVsdCB1bml0IHR5cGUuIFVzZWQgZm9yIGFzc2lnbmluZyBhIHVuaXQgdHlwZSB3aGVuIG9uZSBpcyBub3Qgc3VwcGxpZWQgYnkgdGhlIHVzZXIuICovXHJcbiAgICAgICAgICAgIGdldFVuaXRUeXBlOiBmdW5jdGlvbiAocHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgIGlmICgvXihyb3RhdGV8c2tldykvaS50ZXN0KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImRlZ1wiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvKF4oc2NhbGV8c2NhbGVYfHNjYWxlWXxzY2FsZVp8YWxwaGF8ZmxleEdyb3d8ZmxleEhlaWdodHx6SW5kZXh8Zm9udFdlaWdodCkkKXwoKG9wYWNpdHl8cmVkfGdyZWVufGJsdWV8YWxwaGEpJCkvaS50ZXN0KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIFRoZSBhYm92ZSBwcm9wZXJ0aWVzIGFyZSB1bml0bGVzcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogRGVmYXVsdCB0byBweCBmb3IgYWxsIG90aGVyIHByb3BlcnRpZXMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicHhcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8qIEhUTUwgZWxlbWVudHMgZGVmYXVsdCB0byBhbiBhc3NvY2lhdGVkIGRpc3BsYXkgdHlwZSB3aGVuIHRoZXkncmUgbm90IHNldCB0byBkaXNwbGF5Om5vbmUuICovXHJcbiAgICAgICAgICAgIC8qIE5vdGU6IFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBmb3IgY29ycmVjdGx5IHNldHRpbmcgdGhlIG5vbi1cIm5vbmVcIiBkaXNwbGF5IHZhbHVlIGluIGNlcnRhaW4gVmVsb2NpdHkgcmVkaXJlY3RzLCBzdWNoIGFzIGZhZGVJbi9PdXQuICovXHJcbiAgICAgICAgICAgIGdldERpc3BsYXlUeXBlOiBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhZ05hbWUgPSBlbGVtZW50ICYmIGVsZW1lbnQudGFnTmFtZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKC9eKGJ8YmlnfGl8c21hbGx8dHR8YWJicnxhY3JvbnltfGNpdGV8Y29kZXxkZm58ZW18a2JkfHN0cm9uZ3xzYW1wfHZhcnxhfGJkb3xicnxpbWd8bWFwfG9iamVjdHxxfHNjcmlwdHxzcGFufHN1YnxzdXB8YnV0dG9ufGlucHV0fGxhYmVsfHNlbGVjdHx0ZXh0YXJlYSkkL2kudGVzdCh0YWdOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImlubGluZVwiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvXihsaSkkL2kudGVzdCh0YWdOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImxpc3QtaXRlbVwiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvXih0cikkL2kudGVzdCh0YWdOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRhYmxlLXJvd1wiO1xyXG4gICAgICAgICAgICAgICAgLyogRGVmYXVsdCB0byBcImJsb2NrXCIgd2hlbiBubyBtYXRjaCBpcyBmb3VuZC4gKi9cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8qIFRoZSBjbGFzcyBhZGQvcmVtb3ZlIGZ1bmN0aW9ucyBhcmUgdXNlZCB0byB0ZW1wb3JhcmlseSBhcHBseSBhIFwidmVsb2NpdHktYW5pbWF0aW5nXCIgY2xhc3MgdG8gZWxlbWVudHMgd2hpbGUgdGhleSdyZSBhbmltYXRpbmcuICovXHJcbiAgICAgICAgICAgIGFkZENsYXNzOiBmdW5jdGlvbiAoZWxlbWVudCwgY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgKz0gKGVsZW1lbnQuY2xhc3NOYW1lLmxlbmd0aCA/IFwiIFwiIDogXCJcIikgKyBjbGFzc05hbWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICByZW1vdmVDbGFzczogZnVuY3Rpb24gKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUudG9TdHJpbmcoKS5yZXBsYWNlKG5ldyBSZWdFeHAoXCIoXnxcXFxccylcIiArIGNsYXNzTmFtZS5zcGxpdChcIiBcIikuam9pbihcInxcIikgKyBcIihcXFxcc3wkKVwiLCBcImdpXCIpLCBcIiBcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgIFN0eWxlIEdldHRpbmcgJiBTZXR0aW5nXHJcbiAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgLyogVGhlIHNpbmd1bGFyIGdldFByb3BlcnR5VmFsdWUsIHdoaWNoIHJvdXRlcyB0aGUgbG9naWMgZm9yIGFsbCBub3JtYWxpemF0aW9ucywgaG9va3MsIGFuZCBzdGFuZGFyZCBDU1MgcHJvcGVydGllcy4gKi9cclxuICAgICAgICBnZXRQcm9wZXJ0eVZhbHVlOiBmdW5jdGlvbiAoZWxlbWVudCwgcHJvcGVydHksIHJvb3RQcm9wZXJ0eVZhbHVlLCBmb3JjZVN0eWxlTG9va3VwKSB7XHJcbiAgICAgICAgICAgIC8qIEdldCBhbiBlbGVtZW50J3MgY29tcHV0ZWQgcHJvcGVydHkgdmFsdWUuICovXHJcbiAgICAgICAgICAgIC8qIE5vdGU6IFJldHJpZXZpbmcgdGhlIHZhbHVlIG9mIGEgQ1NTIHByb3BlcnR5IGNhbm5vdCBzaW1wbHkgYmUgcGVyZm9ybWVkIGJ5IGNoZWNraW5nIGFuIGVsZW1lbnQnc1xyXG4gICAgICAgICAgICAgICBzdHlsZSBhdHRyaWJ1dGUgKHdoaWNoIG9ubHkgcmVmbGVjdHMgdXNlci1kZWZpbmVkIHZhbHVlcykuIEluc3RlYWQsIHRoZSBicm93c2VyIG11c3QgYmUgcXVlcmllZCBmb3IgYSBwcm9wZXJ0eSdzXHJcbiAgICAgICAgICAgICAgICpjb21wdXRlZCogdmFsdWUuIFlvdSBjYW4gcmVhZCBtb3JlIGFib3V0IGdldENvbXB1dGVkU3R5bGUgaGVyZTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvQVBJL3dpbmRvdy5nZXRDb21wdXRlZFN0eWxlICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNvbXB1dGVQcm9wZXJ0eVZhbHVlIChlbGVtZW50LCBwcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICAgICAgLyogV2hlbiBib3gtc2l6aW5nIGlzbid0IHNldCB0byBib3JkZXItYm94LCBoZWlnaHQgYW5kIHdpZHRoIHN0eWxlIHZhbHVlcyBhcmUgaW5jb3JyZWN0bHkgY29tcHV0ZWQgd2hlbiBhblxyXG4gICAgICAgICAgICAgICAgICAgZWxlbWVudCdzIHNjcm9sbGJhcnMgYXJlIHZpc2libGUgKHdoaWNoIGV4cGFuZHMgdGhlIGVsZW1lbnQncyBkaW1lbnNpb25zKS4gVGh1cywgd2UgZGVmZXIgdG8gdGhlIG1vcmUgYWNjdXJhdGVcclxuICAgICAgICAgICAgICAgICAgIG9mZnNldEhlaWdodC9XaWR0aCBwcm9wZXJ0eSwgd2hpY2ggaW5jbHVkZXMgdGhlIHRvdGFsIGRpbWVuc2lvbnMgZm9yIGludGVyaW9yLCBib3JkZXIsIHBhZGRpbmcsIGFuZCBzY3JvbGxiYXIuXHJcbiAgICAgICAgICAgICAgICAgICBXZSBzdWJ0cmFjdCBib3JkZXIgYW5kIHBhZGRpbmcgdG8gZ2V0IHRoZSBzdW0gb2YgaW50ZXJpb3IgKyBzY3JvbGxiYXIuICovXHJcbiAgICAgICAgICAgICAgICB2YXIgY29tcHV0ZWRWYWx1ZSA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgLyogSUU8PTggZG9lc24ndCBzdXBwb3J0IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlLCB0aHVzIHdlIGRlZmVyIHRvIGpRdWVyeSwgd2hpY2ggaGFzIGFuIGV4dGVuc2l2ZSBhcnJheVxyXG4gICAgICAgICAgICAgICAgICAgb2YgaGFja3MgdG8gYWNjdXJhdGVseSByZXRyaWV2ZSBJRTggcHJvcGVydHkgdmFsdWVzLiBSZS1pbXBsZW1lbnRpbmcgdGhhdCBsb2dpYyBoZXJlIGlzIG5vdCB3b3J0aCBibG9hdGluZyB0aGVcclxuICAgICAgICAgICAgICAgICAgIGNvZGViYXNlIGZvciBhIGR5aW5nIGJyb3dzZXIuIFRoZSBwZXJmb3JtYW5jZSByZXBlcmN1c3Npb25zIG9mIHVzaW5nIGpRdWVyeSBoZXJlIGFyZSBtaW5pbWFsIHNpbmNlXHJcbiAgICAgICAgICAgICAgICAgICBWZWxvY2l0eSBpcyBvcHRpbWl6ZWQgdG8gcmFyZWx5IChhbmQgc29tZXRpbWVzIG5ldmVyKSBxdWVyeSB0aGUgRE9NLiBGdXJ0aGVyLCB0aGUgJC5jc3MoKSBjb2RlcGF0aCBpc24ndCB0aGF0IHNsb3cuICovXHJcbiAgICAgICAgICAgICAgICBpZiAoSUUgPD0gOCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkVmFsdWUgPSAkLmNzcyhlbGVtZW50LCBwcm9wZXJ0eSk7IC8qIEdFVCAqL1xyXG4gICAgICAgICAgICAgICAgLyogQWxsIG90aGVyIGJyb3dzZXJzIHN1cHBvcnQgZ2V0Q29tcHV0ZWRTdHlsZS4gVGhlIHJldHVybmVkIGxpdmUgb2JqZWN0IHJlZmVyZW5jZSBpcyBjYWNoZWQgb250byBpdHNcclxuICAgICAgICAgICAgICAgICAgIGFzc29jaWF0ZWQgZWxlbWVudCBzbyB0aGF0IGl0IGRvZXMgbm90IG5lZWQgdG8gYmUgcmVmZXRjaGVkIHVwb24gZXZlcnkgR0VULiAqL1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBCcm93c2VycyBkbyBub3QgcmV0dXJuIGhlaWdodCBhbmQgd2lkdGggdmFsdWVzIGZvciBlbGVtZW50cyB0aGF0IGFyZSBzZXQgdG8gZGlzcGxheTpcIm5vbmVcIi4gVGh1cywgd2UgdGVtcG9yYXJpbHlcclxuICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGUgZGlzcGxheSB0byB0aGUgZWxlbWVudCB0eXBlJ3MgZGVmYXVsdCB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlRGlzcGxheSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoL14od2lkdGh8aGVpZ2h0KSQvLnRlc3QocHJvcGVydHkpICYmIENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwiZGlzcGxheVwiKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVEaXNwbGF5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1NTLnNldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJkaXNwbGF5XCIsIENTUy5WYWx1ZXMuZ2V0RGlzcGxheVR5cGUoZWxlbWVudCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcmV2ZXJ0RGlzcGxheSAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2dnbGVEaXNwbGF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDU1Muc2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCBcImRpc3BsYXlcIiwgXCJub25lXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZvcmNlU3R5bGVMb29rdXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnR5ID09PSBcImhlaWdodFwiICYmIENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwiYm94U2l6aW5nXCIpLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSAhPT0gXCJib3JkZXItYm94XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50Qm94SGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQgLSAocGFyc2VGbG9hdChDU1MuZ2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCBcImJvcmRlclRvcFdpZHRoXCIpKSB8fCAwKSAtIChwYXJzZUZsb2F0KENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwiYm9yZGVyQm90dG9tV2lkdGhcIikpIHx8IDApIC0gKHBhcnNlRmxvYXQoQ1NTLmdldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJwYWRkaW5nVG9wXCIpKSB8fCAwKSAtIChwYXJzZUZsb2F0KENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwicGFkZGluZ0JvdHRvbVwiKSkgfHwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZlcnREaXNwbGF5KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnRCb3hIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvcGVydHkgPT09IFwid2lkdGhcIiAmJiBDU1MuZ2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCBcImJveFNpemluZ1wiKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkgIT09IFwiYm9yZGVyLWJveFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGVudEJveFdpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aCAtIChwYXJzZUZsb2F0KENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwiYm9yZGVyTGVmdFdpZHRoXCIpKSB8fCAwKSAtIChwYXJzZUZsb2F0KENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwiYm9yZGVyUmlnaHRXaWR0aFwiKSkgfHwgMCkgLSAocGFyc2VGbG9hdChDU1MuZ2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCBcInBhZGRpbmdMZWZ0XCIpKSB8fCAwKSAtIChwYXJzZUZsb2F0KENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwicGFkZGluZ1JpZ2h0XCIpKSB8fCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmVydERpc3BsYXkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudEJveFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogRm9yIGVsZW1lbnRzIHRoYXQgVmVsb2NpdHkgaGFzbid0IGJlZW4gY2FsbGVkIG9uIGRpcmVjdGx5IChlLmcuIHdoZW4gVmVsb2NpdHkgcXVlcmllcyB0aGUgRE9NIG9uIGJlaGFsZlxyXG4gICAgICAgICAgICAgICAgICAgICAgIG9mIGEgcGFyZW50IG9mIGFuIGVsZW1lbnQgaXRzIGFuaW1hdGluZyksIHBlcmZvcm0gYSBkaXJlY3QgZ2V0Q29tcHV0ZWRTdHlsZSBsb29rdXAgc2luY2UgdGhlIG9iamVjdCBpc24ndCBjYWNoZWQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKERhdGEoZWxlbWVudCkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCwgbnVsbCk7IC8qIEdFVCAqL1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZSBjb21wdXRlZFN0eWxlIG9iamVjdCBoYXMgeWV0IHRvIGJlIGNhY2hlZCwgZG8gc28gbm93LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIURhdGEoZWxlbWVudCkuY29tcHV0ZWRTdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlZFN0eWxlID0gRGF0YShlbGVtZW50KS5jb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCwgbnVsbCk7IC8qIEdFVCAqL1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIElmIGNvbXB1dGVkU3R5bGUgaXMgY2FjaGVkLCB1c2UgaXQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZWRTdHlsZSA9IERhdGEoZWxlbWVudCkuY29tcHV0ZWRTdHlsZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIElFIGFuZCBGaXJlZm94IGRvIG5vdCByZXR1cm4gYSB2YWx1ZSBmb3IgdGhlIGdlbmVyaWMgYm9yZGVyQ29sb3IgLS0gdGhleSBvbmx5IHJldHVybiBpbmRpdmlkdWFsIHZhbHVlcyBmb3IgZWFjaCBib3JkZXIgc2lkZSdzIGNvbG9yLlxyXG4gICAgICAgICAgICAgICAgICAgICAgIEFzIGEgcG9seWZpbGwgZm9yIHF1ZXJ5aW5nIGluZGl2aWR1YWwgYm9yZGVyIHNpZGUgY29sb3JzLCBqdXN0IHJldHVybiB0aGUgdG9wIGJvcmRlcidzIGNvbG9yLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoSUUgfHwgVmVsb2NpdHkuU3RhdGUuaXNGaXJlZm94KSAmJiBwcm9wZXJ0eSA9PT0gXCJib3JkZXJDb2xvclwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5ID0gXCJib3JkZXJUb3BDb2xvclwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogSUU5IGhhcyBhIGJ1ZyBpbiB3aGljaCB0aGUgXCJmaWx0ZXJcIiBwcm9wZXJ0eSBtdXN0IGJlIGFjY2Vzc2VkIGZyb20gY29tcHV0ZWRTdHlsZSB1c2luZyB0aGUgZ2V0UHJvcGVydHlWYWx1ZSBtZXRob2RcclxuICAgICAgICAgICAgICAgICAgICAgICBpbnN0ZWFkIG9mIGEgZGlyZWN0IHByb3BlcnR5IGxvb2t1cC4gVGhlIGdldFByb3BlcnR5VmFsdWUgbWV0aG9kIGlzIHNsb3dlciB0aGFuIGEgZGlyZWN0IGxvb2t1cCwgd2hpY2ggaXMgd2h5IHdlIGF2b2lkIGl0IGJ5IGRlZmF1bHQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKElFID09PSA5ICYmIHByb3BlcnR5ID09PSBcImZpbHRlclwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkVmFsdWUgPSBjb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUocHJvcGVydHkpOyAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlZFZhbHVlID0gY29tcHV0ZWRTdHlsZVtwcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBGYWxsIGJhY2sgdG8gdGhlIHByb3BlcnR5J3Mgc3R5bGUgdmFsdWUgKGlmIGRlZmluZWQpIHdoZW4gY29tcHV0ZWRWYWx1ZSByZXR1cm5zIG5vdGhpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgd2hpY2ggY2FuIGhhcHBlbiB3aGVuIHRoZSBlbGVtZW50IGhhc24ndCBiZWVuIHBhaW50ZWQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXB1dGVkVmFsdWUgPT09IFwiXCIgfHwgY29tcHV0ZWRWYWx1ZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlZFZhbHVlID0gZWxlbWVudC5zdHlsZVtwcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXZlcnREaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyogRm9yIHRvcCwgcmlnaHQsIGJvdHRvbSwgYW5kIGxlZnQgKFRSQkwpIHZhbHVlcyB0aGF0IGFyZSBzZXQgdG8gXCJhdXRvXCIgb24gZWxlbWVudHMgb2YgXCJmaXhlZFwiIG9yIFwiYWJzb2x1dGVcIiBwb3NpdGlvbixcclxuICAgICAgICAgICAgICAgICAgIGRlZmVyIHRvIGpRdWVyeSBmb3IgY29udmVydGluZyBcImF1dG9cIiB0byBhIG51bWVyaWMgdmFsdWUuIChGb3IgZWxlbWVudHMgd2l0aCBhIFwic3RhdGljXCIgb3IgXCJyZWxhdGl2ZVwiIHBvc2l0aW9uLCBcImF1dG9cIiBoYXMgdGhlIHNhbWVcclxuICAgICAgICAgICAgICAgICAgIGVmZmVjdCBhcyBiZWluZyBzZXQgdG8gMCwgc28gbm8gY29udmVyc2lvbiBpcyBuZWNlc3NhcnkuKSAqL1xyXG4gICAgICAgICAgICAgICAgLyogQW4gZXhhbXBsZSBvZiB3aHkgbnVtZXJpYyBjb252ZXJzaW9uIGlzIG5lY2Vzc2FyeTogV2hlbiBhbiBlbGVtZW50IHdpdGggXCJwb3NpdGlvbjphYnNvbHV0ZVwiIGhhcyBhbiB1bnRvdWNoZWQgXCJsZWZ0XCJcclxuICAgICAgICAgICAgICAgICAgIHByb3BlcnR5LCB3aGljaCByZXZlcnRzIHRvIFwiYXV0b1wiLCBsZWZ0J3MgdmFsdWUgaXMgMCByZWxhdGl2ZSB0byBpdHMgcGFyZW50IGVsZW1lbnQsIGJ1dCBpcyBvZnRlbiBub24temVybyByZWxhdGl2ZVxyXG4gICAgICAgICAgICAgICAgICAgdG8gaXRzICpjb250YWluaW5nKiAobm90IHBhcmVudCkgZWxlbWVudCwgd2hpY2ggaXMgdGhlIG5lYXJlc3QgXCJwb3NpdGlvbjpyZWxhdGl2ZVwiIGFuY2VzdG9yIG9yIHRoZSB2aWV3cG9ydCAoYW5kIGFsd2F5cyB0aGUgdmlld3BvcnQgaW4gdGhlIGNhc2Ugb2YgXCJwb3NpdGlvbjpmaXhlZFwiKS4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChjb21wdXRlZFZhbHVlID09PSBcImF1dG9cIiAmJiAvXih0b3B8cmlnaHR8Ym90dG9tfGxlZnQpJC9pLnRlc3QocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gY29tcHV0ZVByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJwb3NpdGlvblwiKTsgLyogR0VUICovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIEZvciBhYnNvbHV0ZSBwb3NpdGlvbmluZywgalF1ZXJ5J3MgJC5wb3NpdGlvbigpIG9ubHkgcmV0dXJucyB2YWx1ZXMgZm9yIHRvcCBhbmQgbGVmdDtcclxuICAgICAgICAgICAgICAgICAgICAgICByaWdodCBhbmQgYm90dG9tIHdpbGwgaGF2ZSB0aGVpciBcImF1dG9cIiB2YWx1ZSByZXZlcnRlZCB0byAwLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IEEgalF1ZXJ5IG9iamVjdCBtdXN0IGJlIGNyZWF0ZWQgaGVyZSBzaW5jZSBqUXVlcnkgZG9lc24ndCBoYXZlIGEgbG93LWxldmVsIGFsaWFzIGZvciAkLnBvc2l0aW9uKCkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgTm90IGEgYmlnIGRlYWwgc2luY2Ugd2UncmUgY3VycmVudGx5IGluIGEgR0VUIGJhdGNoIGFueXdheS4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24gPT09IFwiZml4ZWRcIiB8fCAocG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiAmJiAvdG9wfGxlZnQvaS50ZXN0KHByb3BlcnR5KSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogalF1ZXJ5IHN0cmlwcyB0aGUgcGl4ZWwgdW5pdCBmcm9tIGl0cyByZXR1cm5lZCB2YWx1ZXM7IHdlIHJlLWFkZCBpdCBoZXJlIHRvIGNvbmZvcm0gd2l0aCBjb21wdXRlUHJvcGVydHlWYWx1ZSdzIGJlaGF2aW9yLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlZFZhbHVlID0gJChlbGVtZW50KS5wb3NpdGlvbigpW3Byb3BlcnR5XSArIFwicHhcIjsgLyogR0VUICovXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJvcGVydHlWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgIC8qIElmIHRoaXMgaXMgYSBob29rZWQgcHJvcGVydHkgKGUuZy4gXCJjbGlwTGVmdFwiIGluc3RlYWQgb2YgdGhlIHJvb3QgcHJvcGVydHkgb2YgXCJjbGlwXCIpLFxyXG4gICAgICAgICAgICAgICBleHRyYWN0IHRoZSBob29rJ3MgdmFsdWUgZnJvbSBhIG5vcm1hbGl6ZWQgcm9vdFByb3BlcnR5VmFsdWUgdXNpbmcgQ1NTLkhvb2tzLmV4dHJhY3RWYWx1ZSgpLiAqL1xyXG4gICAgICAgICAgICBpZiAoQ1NTLkhvb2tzLnJlZ2lzdGVyZWRbcHJvcGVydHldKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaG9vayA9IHByb3BlcnR5LFxyXG4gICAgICAgICAgICAgICAgICAgIGhvb2tSb290ID0gQ1NTLkhvb2tzLmdldFJvb3QoaG9vayk7XHJcblxyXG4gICAgICAgICAgICAgICAgLyogSWYgYSBjYWNoZWQgcm9vdFByb3BlcnR5VmFsdWUgd2Fzbid0IHBhc3NlZCBpbiAod2hpY2ggVmVsb2NpdHkgYWx3YXlzIGF0dGVtcHRzIHRvIGRvIGluIG9yZGVyIHRvIGF2b2lkIHJlcXVlcnlpbmcgdGhlIERPTSksXHJcbiAgICAgICAgICAgICAgICAgICBxdWVyeSB0aGUgRE9NIGZvciB0aGUgcm9vdCBwcm9wZXJ0eSdzIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKHJvb3RQcm9wZXJ0eVZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBTaW5jZSB0aGUgYnJvd3NlciBpcyBub3cgYmVpbmcgZGlyZWN0bHkgcXVlcmllZCwgdXNlIHRoZSBvZmZpY2lhbCBwb3N0LXByZWZpeGluZyBwcm9wZXJ0eSBuYW1lIGZvciB0aGlzIGxvb2t1cC4gKi9cclxuICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZSA9IENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIENTUy5OYW1lcy5wcmVmaXhDaGVjayhob29rUm9vdClbMF0pOyAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBJZiB0aGlzIHJvb3QgaGFzIGEgbm9ybWFsaXphdGlvbiByZWdpc3RlcmVkLCBwZWZvcm0gdGhlIGFzc29jaWF0ZWQgbm9ybWFsaXphdGlvbiBleHRyYWN0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKENTUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW2hvb2tSb290XSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlID0gQ1NTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbaG9va1Jvb3RdKFwiZXh0cmFjdFwiLCBlbGVtZW50LCByb290UHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyogRXh0cmFjdCB0aGUgaG9vaydzIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgcHJvcGVydHlWYWx1ZSA9IENTUy5Ib29rcy5leHRyYWN0VmFsdWUoaG9vaywgcm9vdFByb3BlcnR5VmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgLyogSWYgdGhpcyBpcyBhIG5vcm1hbGl6ZWQgcHJvcGVydHkgKGUuZy4gXCJvcGFjaXR5XCIgYmVjb21lcyBcImZpbHRlclwiIGluIDw9SUU4KSBvciBcInRyYW5zbGF0ZVhcIiBiZWNvbWVzIFwidHJhbnNmb3JtXCIpLFxyXG4gICAgICAgICAgICAgICBub3JtYWxpemUgdGhlIHByb3BlcnR5J3MgbmFtZSBhbmQgdmFsdWUsIGFuZCBoYW5kbGUgdGhlIHNwZWNpYWwgY2FzZSBvZiB0cmFuc2Zvcm1zLiAqL1xyXG4gICAgICAgICAgICAvKiBOb3RlOiBOb3JtYWxpemluZyBhIHByb3BlcnR5IGlzIG11dHVhbGx5IGV4Y2x1c2l2ZSBmcm9tIGhvb2tpbmcgYSBwcm9wZXJ0eSBzaW5jZSBob29rLWV4dHJhY3RlZCB2YWx1ZXMgYXJlIHN0cmljdGx5XHJcbiAgICAgICAgICAgICAgIG51bWVyaWNhbCBhbmQgdGhlcmVmb3JlIGRvIG5vdCByZXF1aXJlIG5vcm1hbGl6YXRpb24gZXh0cmFjdGlvbi4gKi9cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChDU1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtwcm9wZXJ0eV0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBub3JtYWxpemVkUHJvcGVydHlOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRQcm9wZXJ0eVZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRQcm9wZXJ0eU5hbWUgPSBDU1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtwcm9wZXJ0eV0oXCJuYW1lXCIsIGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIFRyYW5zZm9ybSB2YWx1ZXMgYXJlIGNhbGN1bGF0ZWQgdmlhIG5vcm1hbGl6YXRpb24gZXh0cmFjdGlvbiAoc2VlIGJlbG93KSwgd2hpY2ggY2hlY2tzIGFnYWluc3QgdGhlIGVsZW1lbnQncyB0cmFuc2Zvcm1DYWNoZS5cclxuICAgICAgICAgICAgICAgICAgIEF0IG5vIHBvaW50IGRvIHRyYW5zZm9ybSBHRVRzIGV2ZXIgYWN0dWFsbHkgcXVlcnkgdGhlIERPTTsgaW5pdGlhbCBzdHlsZXNoZWV0IHZhbHVlcyBhcmUgbmV2ZXIgcHJvY2Vzc2VkLlxyXG4gICAgICAgICAgICAgICAgICAgVGhpcyBpcyBiZWNhdXNlIHBhcnNpbmcgM0QgdHJhbnNmb3JtIG1hdHJpY2VzIGlzIG5vdCBhbHdheXMgYWNjdXJhdGUgYW5kIHdvdWxkIGJsb2F0IG91ciBjb2RlYmFzZTtcclxuICAgICAgICAgICAgICAgICAgIHRodXMsIG5vcm1hbGl6YXRpb24gZXh0cmFjdGlvbiBkZWZhdWx0cyBpbml0aWFsIHRyYW5zZm9ybSB2YWx1ZXMgdG8gdGhlaXIgemVyby12YWx1ZXMgKGUuZy4gMSBmb3Igc2NhbGVYIGFuZCAwIGZvciB0cmFuc2xhdGVYKS4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChub3JtYWxpemVkUHJvcGVydHlOYW1lICE9PSBcInRyYW5zZm9ybVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZFByb3BlcnR5VmFsdWUgPSBjb21wdXRlUHJvcGVydHlWYWx1ZShlbGVtZW50LCBDU1MuTmFtZXMucHJlZml4Q2hlY2sobm9ybWFsaXplZFByb3BlcnR5TmFtZSlbMF0pOyAvKiBHRVQgKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIHZhbHVlIGlzIGEgQ1NTIG51bGwtdmFsdWUgYW5kIHRoaXMgcHJvcGVydHkgaGFzIGEgaG9vayB0ZW1wbGF0ZSwgdXNlIHRoYXQgemVyby12YWx1ZSB0ZW1wbGF0ZSBzbyB0aGF0IGhvb2tzIGNhbiBiZSBleHRyYWN0ZWQgZnJvbSBpdC4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoQ1NTLlZhbHVlcy5pc0NTU051bGxWYWx1ZShub3JtYWxpemVkUHJvcGVydHlWYWx1ZSkgJiYgQ1NTLkhvb2tzLnRlbXBsYXRlc1twcm9wZXJ0eV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZFByb3BlcnR5VmFsdWUgPSBDU1MuSG9va3MudGVtcGxhdGVzW3Byb3BlcnR5XVsxXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcHJvcGVydHlWYWx1ZSA9IENTUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3Byb3BlcnR5XShcImV4dHJhY3RcIiwgZWxlbWVudCwgbm9ybWFsaXplZFByb3BlcnR5VmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBJZiBhIChudW1lcmljKSB2YWx1ZSB3YXNuJ3QgcHJvZHVjZWQgdmlhIGhvb2sgZXh0cmFjdGlvbiBvciBub3JtYWxpemF0aW9uLCBxdWVyeSB0aGUgRE9NLiAqL1xyXG4gICAgICAgICAgICBpZiAoIS9eW1xcZC1dLy50ZXN0KHByb3BlcnR5VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBGb3IgU1ZHIGVsZW1lbnRzLCBkaW1lbnNpb25hbCBwcm9wZXJ0aWVzICh3aGljaCBTVkdBdHRyaWJ1dGUoKSBkZXRlY3RzKSBhcmUgdHdlZW5lZCB2aWFcclxuICAgICAgICAgICAgICAgICAgIHRoZWlyIEhUTUwgYXR0cmlidXRlIHZhbHVlcyBpbnN0ZWFkIG9mIHRoZWlyIENTUyBzdHlsZSB2YWx1ZXMuICovXHJcbiAgICAgICAgICAgICAgICBpZiAoRGF0YShlbGVtZW50KSAmJiBEYXRhKGVsZW1lbnQpLmlzU1ZHICYmIENTUy5OYW1lcy5TVkdBdHRyaWJ1dGUocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogU2luY2UgdGhlIGhlaWdodC93aWR0aCBhdHRyaWJ1dGUgdmFsdWVzIG11c3QgYmUgc2V0IG1hbnVhbGx5LCB0aGV5IGRvbid0IHJlZmxlY3QgY29tcHV0ZWQgdmFsdWVzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgIFRodXMsIHdlIHVzZSB1c2UgZ2V0QkJveCgpIHRvIGVuc3VyZSB3ZSBhbHdheXMgZ2V0IHZhbHVlcyBmb3IgZWxlbWVudHMgd2l0aCB1bmRlZmluZWQgaGVpZ2h0L3dpZHRoIGF0dHJpYnV0ZXMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKC9eKGhlaWdodHx3aWR0aCkkL2kudGVzdChwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlWYWx1ZSA9IGVsZW1lbnQuZ2V0QkJveCgpW3Byb3BlcnR5XTtcclxuICAgICAgICAgICAgICAgICAgICAvKiBPdGhlcndpc2UsIGFjY2VzcyB0aGUgYXR0cmlidXRlIHZhbHVlIGRpcmVjdGx5LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5VmFsdWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShwcm9wZXJ0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eVZhbHVlID0gY29tcHV0ZVByb3BlcnR5VmFsdWUoZWxlbWVudCwgQ1NTLk5hbWVzLnByZWZpeENoZWNrKHByb3BlcnR5KVswXSk7IC8qIEdFVCAqL1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBTaW5jZSBwcm9wZXJ0eSBsb29rdXBzIGFyZSBmb3IgYW5pbWF0aW9uIHB1cnBvc2VzICh3aGljaCBlbnRhaWxzIGNvbXB1dGluZyB0aGUgbnVtZXJpYyBkZWx0YSBiZXR3ZWVuIHN0YXJ0IGFuZCBlbmQgdmFsdWVzKSxcclxuICAgICAgICAgICAgICAgY29udmVydCBDU1MgbnVsbC12YWx1ZXMgdG8gYW4gaW50ZWdlciBvZiB2YWx1ZSAwLiAqL1xyXG4gICAgICAgICAgICBpZiAoQ1NTLlZhbHVlcy5pc0NTU051bGxWYWx1ZShwcm9wZXJ0eVZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgcHJvcGVydHlWYWx1ZSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChWZWxvY2l0eS5kZWJ1ZyA+PSAyKSBjb25zb2xlLmxvZyhcIkdldCBcIiArIHByb3BlcnR5ICsgXCI6IFwiICsgcHJvcGVydHlWYWx1ZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcHJvcGVydHlWYWx1ZTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKiBUaGUgc2luZ3VsYXIgc2V0UHJvcGVydHlWYWx1ZSwgd2hpY2ggcm91dGVzIHRoZSBsb2dpYyBmb3IgYWxsIG5vcm1hbGl6YXRpb25zLCBob29rcywgYW5kIHN0YW5kYXJkIENTUyBwcm9wZXJ0aWVzLiAqL1xyXG4gICAgICAgIHNldFByb3BlcnR5VmFsdWU6IGZ1bmN0aW9uKGVsZW1lbnQsIHByb3BlcnR5LCBwcm9wZXJ0eVZhbHVlLCByb290UHJvcGVydHlWYWx1ZSwgc2Nyb2xsRGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgcHJvcGVydHlOYW1lID0gcHJvcGVydHk7XHJcblxyXG4gICAgICAgICAgICAvKiBJbiBvcmRlciB0byBiZSBzdWJqZWN0ZWQgdG8gY2FsbCBvcHRpb25zIGFuZCBlbGVtZW50IHF1ZXVlaW5nLCBzY3JvbGwgYW5pbWF0aW9uIGlzIHJvdXRlZCB0aHJvdWdoIFZlbG9jaXR5IGFzIGlmIGl0IHdlcmUgYSBzdGFuZGFyZCBDU1MgcHJvcGVydHkuICovXHJcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eSA9PT0gXCJzY3JvbGxcIikge1xyXG4gICAgICAgICAgICAgICAgLyogSWYgYSBjb250YWluZXIgb3B0aW9uIGlzIHByZXNlbnQsIHNjcm9sbCB0aGUgY29udGFpbmVyIGluc3RlYWQgb2YgdGhlIGJyb3dzZXIgd2luZG93LiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKHNjcm9sbERhdGEuY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsRGF0YS5jb250YWluZXJbXCJzY3JvbGxcIiArIHNjcm9sbERhdGEuZGlyZWN0aW9uXSA9IHByb3BlcnR5VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAvKiBPdGhlcndpc2UsIFZlbG9jaXR5IGRlZmF1bHRzIHRvIHNjcm9sbGluZyB0aGUgYnJvd3NlciB3aW5kb3cuICovXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzY3JvbGxEYXRhLmRpcmVjdGlvbiA9PT0gXCJMZWZ0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKHByb3BlcnR5VmFsdWUsIHNjcm9sbERhdGEuYWx0ZXJuYXRlVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyhzY3JvbGxEYXRhLmFsdGVybmF0ZVZhbHVlLCBwcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvKiBUcmFuc2Zvcm1zICh0cmFuc2xhdGVYLCByb3RhdGVaLCBldGMuKSBhcmUgYXBwbGllZCB0byBhIHBlci1lbGVtZW50IHRyYW5zZm9ybUNhY2hlIG9iamVjdCwgd2hpY2ggaXMgbWFudWFsbHkgZmx1c2hlZCB2aWEgZmx1c2hUcmFuc2Zvcm1DYWNoZSgpLlxyXG4gICAgICAgICAgICAgICAgICAgVGh1cywgZm9yIG5vdywgd2UgbWVyZWx5IGNhY2hlIHRyYW5zZm9ybXMgYmVpbmcgU0VULiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKENTUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3Byb3BlcnR5XSAmJiBDU1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtwcm9wZXJ0eV0oXCJuYW1lXCIsIGVsZW1lbnQpID09PSBcInRyYW5zZm9ybVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogUGVyZm9ybSBhIG5vcm1hbGl6YXRpb24gaW5qZWN0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IFRoZSBub3JtYWxpemF0aW9uIGxvZ2ljIGhhbmRsZXMgdGhlIHRyYW5zZm9ybUNhY2hlIHVwZGF0aW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIENTUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3Byb3BlcnR5XShcImluamVjdFwiLCBlbGVtZW50LCBwcm9wZXJ0eVZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlOYW1lID0gXCJ0cmFuc2Zvcm1cIjtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eVZhbHVlID0gRGF0YShlbGVtZW50KS50cmFuc2Zvcm1DYWNoZVtwcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIEluamVjdCBob29rcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoQ1NTLkhvb2tzLnJlZ2lzdGVyZWRbcHJvcGVydHldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBob29rTmFtZSA9IHByb3BlcnR5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9va1Jvb3QgPSBDU1MuSG9va3MuZ2V0Um9vdChwcm9wZXJ0eSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiBhIGNhY2hlZCByb290UHJvcGVydHlWYWx1ZSB3YXMgbm90IHByb3ZpZGVkLCBxdWVyeSB0aGUgRE9NIGZvciB0aGUgaG9va1Jvb3QncyBjdXJyZW50IHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZSA9IHJvb3RQcm9wZXJ0eVZhbHVlIHx8IENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIGhvb2tSb290KTsgLyogR0VUICovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eVZhbHVlID0gQ1NTLkhvb2tzLmluamVjdFZhbHVlKGhvb2tOYW1lLCBwcm9wZXJ0eVZhbHVlLCByb290UHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5ID0gaG9va1Jvb3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBOb3JtYWxpemUgbmFtZXMgYW5kIHZhbHVlcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoQ1NTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcHJvcGVydHldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5VmFsdWUgPSBDU1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtwcm9wZXJ0eV0oXCJpbmplY3RcIiwgZWxlbWVudCwgcHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5ID0gQ1NTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcHJvcGVydHldKFwibmFtZVwiLCBlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIEFzc2lnbiB0aGUgYXBwcm9wcmlhdGUgdmVuZG9yIHByZWZpeCBiZWZvcmUgcGVyZm9ybWluZyBhbiBvZmZpY2lhbCBzdHlsZSB1cGRhdGUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlOYW1lID0gQ1NTLk5hbWVzLnByZWZpeENoZWNrKHByb3BlcnR5KVswXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogQSB0cnkvY2F0Y2ggaXMgdXNlZCBmb3IgSUU8PTgsIHdoaWNoIHRocm93cyBhbiBlcnJvciB3aGVuIFwiaW52YWxpZFwiIENTUyB2YWx1ZXMgYXJlIHNldCwgZS5nLiBhIG5lZ2F0aXZlIHdpZHRoLlxyXG4gICAgICAgICAgICAgICAgICAgICAgIFRyeS9jYXRjaCBpcyBhdm9pZGVkIGZvciBvdGhlciBicm93c2VycyBzaW5jZSBpdCBpbmN1cnMgYSBwZXJmb3JtYW5jZSBvdmVyaGVhZC4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoSUUgPD0gOCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZVtwcm9wZXJ0eU5hbWVdID0gcHJvcGVydHlWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsgaWYgKFZlbG9jaXR5LmRlYnVnKSBjb25zb2xlLmxvZyhcIkJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBbXCIgKyBwcm9wZXJ0eVZhbHVlICsgXCJdIGZvciBbXCIgKyBwcm9wZXJ0eU5hbWUgKyBcIl1cIik7IH1cclxuICAgICAgICAgICAgICAgICAgICAvKiBTVkcgZWxlbWVudHMgaGF2ZSB0aGVpciBkaW1lbnNpb25hbCBwcm9wZXJ0aWVzICh3aWR0aCwgaGVpZ2h0LCB4LCB5LCBjeCwgZXRjLikgYXBwbGllZCBkaXJlY3RseSBhcyBhdHRyaWJ1dGVzIGluc3RlYWQgb2YgYXMgc3R5bGVzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IElFOCBkb2VzIG5vdCBzdXBwb3J0IFNWRyBlbGVtZW50cywgc28gaXQncyBva2F5IHRoYXQgd2Ugc2tpcCBpdCBmb3IgU1ZHIGFuaW1hdGlvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKERhdGEoZWxlbWVudCkgJiYgRGF0YShlbGVtZW50KS5pc1NWRyAmJiBDU1MuTmFtZXMuU1ZHQXR0cmlidXRlKHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBGb3IgU1ZHIGF0dHJpYnV0ZXMsIHZlbmRvci1wcmVmaXhlZCBwcm9wZXJ0eSBuYW1lcyBhcmUgbmV2ZXIgdXNlZC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogTm90IGFsbCBDU1MgcHJvcGVydGllcyBjYW4gYmUgYW5pbWF0ZWQgdmlhIGF0dHJpYnV0ZXMsIGJ1dCB0aGUgYnJvd3NlciB3b24ndCB0aHJvdyBhbiBlcnJvciBmb3IgdW5zdXBwb3J0ZWQgcHJvcGVydGllcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUocHJvcGVydHksIHByb3BlcnR5VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGVbcHJvcGVydHlOYW1lXSA9IHByb3BlcnR5VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoVmVsb2NpdHkuZGVidWcgPj0gMikgY29uc29sZS5sb2coXCJTZXQgXCIgKyBwcm9wZXJ0eSArIFwiIChcIiArIHByb3BlcnR5TmFtZSArIFwiKTogXCIgKyBwcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyogUmV0dXJuIHRoZSBub3JtYWxpemVkIHByb3BlcnR5IG5hbWUgYW5kIHZhbHVlIGluIGNhc2UgdGhlIGNhbGxlciB3YW50cyB0byBrbm93IGhvdyB0aGVzZSB2YWx1ZXMgd2VyZSBtb2RpZmllZCBiZWZvcmUgYmVpbmcgYXBwbGllZCB0byB0aGUgRE9NLiAqL1xyXG4gICAgICAgICAgICByZXR1cm4gWyBwcm9wZXJ0eU5hbWUsIHByb3BlcnR5VmFsdWUgXTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKiBUbyBpbmNyZWFzZSBwZXJmb3JtYW5jZSBieSBiYXRjaGluZyB0cmFuc2Zvcm0gdXBkYXRlcyBpbnRvIGEgc2luZ2xlIFNFVCwgdHJhbnNmb3JtcyBhcmUgbm90IGRpcmVjdGx5IGFwcGxpZWQgdG8gYW4gZWxlbWVudCB1bnRpbCBmbHVzaFRyYW5zZm9ybUNhY2hlKCkgaXMgY2FsbGVkLiAqL1xyXG4gICAgICAgIC8qIE5vdGU6IFZlbG9jaXR5IGFwcGxpZXMgdHJhbnNmb3JtIHByb3BlcnRpZXMgaW4gdGhlIHNhbWUgb3JkZXIgdGhhdCB0aGV5IGFyZSBjaHJvbm9naWNhbGx5IGludHJvZHVjZWQgdG8gdGhlIGVsZW1lbnQncyBDU1Mgc3R5bGVzLiAqL1xyXG4gICAgICAgIGZsdXNoVHJhbnNmb3JtQ2FjaGU6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdmFyIHRyYW5zZm9ybVN0cmluZyA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAvKiBDZXJ0YWluIGJyb3dzZXJzIHJlcXVpcmUgdGhhdCBTVkcgdHJhbnNmb3JtcyBiZSBhcHBsaWVkIGFzIGFuIGF0dHJpYnV0ZS4gSG93ZXZlciwgdGhlIFNWRyB0cmFuc2Zvcm0gYXR0cmlidXRlIHRha2VzIGEgbW9kaWZpZWQgdmVyc2lvbiBvZiBDU1MncyB0cmFuc2Zvcm0gc3RyaW5nXHJcbiAgICAgICAgICAgICAgICh1bml0cyBhcmUgZHJvcHBlZCBhbmQsIGV4Y2VwdCBmb3Igc2tld1gvWSwgc3VicHJvcGVydGllcyBhcmUgbWVyZ2VkIGludG8gdGhlaXIgbWFzdGVyIHByb3BlcnR5IC0tIGUuZy4gc2NhbGVYIGFuZCBzY2FsZVkgYXJlIG1lcmdlZCBpbnRvIHNjYWxlKFggWSkuICovXHJcbiAgICAgICAgICAgIGlmICgoSUUgfHwgKFZlbG9jaXR5LlN0YXRlLmlzQW5kcm9pZCAmJiAhVmVsb2NpdHkuU3RhdGUuaXNDaHJvbWUpKSAmJiBEYXRhKGVsZW1lbnQpLmlzU1ZHKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBTaW5jZSB0cmFuc2Zvcm0gdmFsdWVzIGFyZSBzdG9yZWQgaW4gdGhlaXIgcGFyZW50aGVzZXMtd3JhcHBlZCBmb3JtLCB3ZSB1c2UgYSBoZWxwZXIgZnVuY3Rpb24gdG8gc3RyaXAgb3V0IHRoZWlyIG51bWVyaWMgdmFsdWVzLlxyXG4gICAgICAgICAgICAgICAgICAgRnVydGhlciwgU1ZHIHRyYW5zZm9ybSBwcm9wZXJ0aWVzIG9ubHkgdGFrZSB1bml0bGVzcyAocmVwcmVzZW50aW5nIHBpeGVscykgdmFsdWVzLCBzbyBpdCdzIG9rYXkgdGhhdCBwYXJzZUZsb2F0KCkgc3RyaXBzIHRoZSB1bml0IHN1ZmZpeGVkIHRvIHRoZSBmbG9hdCB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldFRyYW5zZm9ybUZsb2F0ICh0cmFuc2Zvcm1Qcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIHRyYW5zZm9ybVByb3BlcnR5KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyogQ3JlYXRlIGFuIG9iamVjdCB0byBvcmdhbml6ZSBhbGwgdGhlIHRyYW5zZm9ybXMgdGhhdCB3ZSdsbCBhcHBseSB0byB0aGUgU1ZHIGVsZW1lbnQuIFRvIGtlZXAgdGhlIGxvZ2ljIHNpbXBsZSxcclxuICAgICAgICAgICAgICAgICAgIHdlIHByb2Nlc3MgKmFsbCogdHJhbnNmb3JtIHByb3BlcnRpZXMgLS0gZXZlbiB0aG9zZSB0aGF0IG1heSBub3QgYmUgZXhwbGljaXRseSBhcHBsaWVkIChzaW5jZSB0aGV5IGRlZmF1bHQgdG8gdGhlaXIgemVyby12YWx1ZXMgYW55d2F5KS4gKi9cclxuICAgICAgICAgICAgICAgIHZhciBTVkdUcmFuc2Zvcm1zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZTogWyBnZXRUcmFuc2Zvcm1GbG9hdChcInRyYW5zbGF0ZVhcIiksIGdldFRyYW5zZm9ybUZsb2F0KFwidHJhbnNsYXRlWVwiKSBdLFxyXG4gICAgICAgICAgICAgICAgICAgIHNrZXdYOiBbIGdldFRyYW5zZm9ybUZsb2F0KFwic2tld1hcIikgXSwgc2tld1k6IFsgZ2V0VHJhbnNmb3JtRmxvYXQoXCJza2V3WVwiKSBdLFxyXG4gICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZSBzY2FsZSBwcm9wZXJ0eSBpcyBzZXQgKG5vbi0xKSwgdXNlIHRoYXQgdmFsdWUgZm9yIHRoZSBzY2FsZVggYW5kIHNjYWxlWSB2YWx1ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAodGhpcyBiZWhhdmlvciBtaW1pY3MgdGhlIHJlc3VsdCBvZiBhbmltYXRpbmcgYWxsIHRoZXNlIHByb3BlcnRpZXMgYXQgb25jZSBvbiBIVE1MIGVsZW1lbnRzKS4gKi9cclxuICAgICAgICAgICAgICAgICAgICBzY2FsZTogZ2V0VHJhbnNmb3JtRmxvYXQoXCJzY2FsZVwiKSAhPT0gMSA/IFsgZ2V0VHJhbnNmb3JtRmxvYXQoXCJzY2FsZVwiKSwgZ2V0VHJhbnNmb3JtRmxvYXQoXCJzY2FsZVwiKSBdIDogWyBnZXRUcmFuc2Zvcm1GbG9hdChcInNjYWxlWFwiKSwgZ2V0VHJhbnNmb3JtRmxvYXQoXCJzY2FsZVlcIikgXSxcclxuICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBTVkcncyByb3RhdGUgdHJhbnNmb3JtIHRha2VzIHRocmVlIHZhbHVlczogcm90YXRpb24gZGVncmVlcyBmb2xsb3dlZCBieSB0aGUgWCBhbmQgWSB2YWx1ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmluZyB0aGUgcm90YXRpb24ncyBvcmlnaW4gcG9pbnQuIFdlIGlnbm9yZSB0aGUgb3JpZ2luIHZhbHVlcyAoZGVmYXVsdCB0aGVtIHRvIDApLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdGF0ZTogWyBnZXRUcmFuc2Zvcm1GbG9hdChcInJvdGF0ZVpcIiksIDAsIDAgXVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBJdGVyYXRlIHRocm91Z2ggdGhlIHRyYW5zZm9ybSBwcm9wZXJ0aWVzIGluIHRoZSB1c2VyLWRlZmluZWQgcHJvcGVydHkgbWFwIG9yZGVyLlxyXG4gICAgICAgICAgICAgICAgICAgKFRoaXMgbWltaWNzIHRoZSBiZWhhdmlvciBvZiBub24tU1ZHIHRyYW5zZm9ybSBhbmltYXRpb24uKSAqL1xyXG4gICAgICAgICAgICAgICAgJC5lYWNoKERhdGEoZWxlbWVudCkudHJhbnNmb3JtQ2FjaGUsIGZ1bmN0aW9uKHRyYW5zZm9ybU5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBFeGNlcHQgZm9yIHdpdGggc2tld1gvWSwgcmV2ZXJ0IHRoZSBheGlzLXNwZWNpZmljIHRyYW5zZm9ybSBzdWJwcm9wZXJ0aWVzIHRvIHRoZWlyIGF4aXMtZnJlZSBtYXN0ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzIHNvIHRoYXQgdGhleSBtYXRjaCB1cCB3aXRoIFNWRydzIGFjY2VwdGVkIHRyYW5zZm9ybSBwcm9wZXJ0aWVzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgvXnRyYW5zbGF0ZS9pLnRlc3QodHJhbnNmb3JtTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtTmFtZSA9IFwidHJhbnNsYXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvXnNjYWxlL2kudGVzdCh0cmFuc2Zvcm1OYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1OYW1lID0gXCJzY2FsZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoL15yb3RhdGUvaS50ZXN0KHRyYW5zZm9ybU5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybU5hbWUgPSBcInJvdGF0ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogQ2hlY2sgdGhhdCB3ZSBoYXZlbid0IHlldCBkZWxldGVkIHRoZSBwcm9wZXJ0eSBmcm9tIHRoZSBTVkdUcmFuc2Zvcm1zIGNvbnRhaW5lci4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoU1ZHVHJhbnNmb3Jtc1t0cmFuc2Zvcm1OYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBBcHBlbmQgdGhlIHRyYW5zZm9ybSBwcm9wZXJ0eSBpbiB0aGUgU1ZHLXN1cHBvcnRlZCB0cmFuc2Zvcm0gZm9ybWF0LiBBcyBwZXIgdGhlIHNwZWMsIHN1cnJvdW5kIHRoZSBzcGFjZS1kZWxpbWl0ZWQgdmFsdWVzIGluIHBhcmVudGhlc2VzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1TdHJpbmcgKz0gdHJhbnNmb3JtTmFtZSArIFwiKFwiICsgU1ZHVHJhbnNmb3Jtc1t0cmFuc2Zvcm1OYW1lXS5qb2luKFwiIFwiKSArIFwiKVwiICsgXCIgXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBBZnRlciBwcm9jZXNzaW5nIGFuIFNWRyB0cmFuc2Zvcm0gcHJvcGVydHksIGRlbGV0ZSBpdCBmcm9tIHRoZSBTVkdUcmFuc2Zvcm1zIGNvbnRhaW5lciBzbyB3ZSBkb24ndFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZS1pbnNlcnQgdGhlIHNhbWUgbWFzdGVyIHByb3BlcnR5IGlmIHdlIGVuY291bnRlciBhbm90aGVyIG9uZSBvZiBpdHMgYXhpcy1zcGVjaWZpYyBwcm9wZXJ0aWVzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgU1ZHVHJhbnNmb3Jtc1t0cmFuc2Zvcm1OYW1lXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciB0cmFuc2Zvcm1WYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBwZXJzcGVjdGl2ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBUcmFuc2Zvcm0gcHJvcGVydGllcyBhcmUgc3RvcmVkIGFzIG1lbWJlcnMgb2YgdGhlIHRyYW5zZm9ybUNhY2hlIG9iamVjdC4gQ29uY2F0ZW5hdGUgYWxsIHRoZSBtZW1iZXJzIGludG8gYSBzdHJpbmcuICovXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goRGF0YShlbGVtZW50KS50cmFuc2Zvcm1DYWNoZSwgZnVuY3Rpb24odHJhbnNmb3JtTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybVZhbHVlID0gRGF0YShlbGVtZW50KS50cmFuc2Zvcm1DYWNoZVt0cmFuc2Zvcm1OYW1lXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogVHJhbnNmb3JtJ3MgcGVyc3BlY3RpdmUgc3VicHJvcGVydHkgbXVzdCBiZSBzZXQgZmlyc3QgaW4gb3JkZXIgdG8gdGFrZSBlZmZlY3QuIFN0b3JlIGl0IHRlbXBvcmFyaWx5LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2Zvcm1OYW1lID09PSBcInRyYW5zZm9ybVBlcnNwZWN0aXZlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc3BlY3RpdmUgPSB0cmFuc2Zvcm1WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBJRTkgb25seSBzdXBwb3J0cyBvbmUgcm90YXRpb24gdHlwZSwgcm90YXRlWiwgd2hpY2ggaXQgcmVmZXJzIHRvIGFzIFwicm90YXRlXCIuICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKElFID09PSA5ICYmIHRyYW5zZm9ybU5hbWUgPT09IFwicm90YXRlWlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybU5hbWUgPSBcInJvdGF0ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtU3RyaW5nICs9IHRyYW5zZm9ybU5hbWUgKyB0cmFuc2Zvcm1WYWx1ZSArIFwiIFwiO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLyogSWYgcHJlc2VudCwgc2V0IHRoZSBwZXJzcGVjdGl2ZSBzdWJwcm9wZXJ0eSBmaXJzdC4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChwZXJzcGVjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybVN0cmluZyA9IFwicGVyc3BlY3RpdmVcIiArIHBlcnNwZWN0aXZlICsgXCIgXCIgKyB0cmFuc2Zvcm1TdHJpbmc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIENTUy5zZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwidHJhbnNmb3JtXCIsIHRyYW5zZm9ybVN0cmluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKiBSZWdpc3RlciBob29rcyBhbmQgbm9ybWFsaXphdGlvbnMuICovXHJcbiAgICBDU1MuSG9va3MucmVnaXN0ZXIoKTtcclxuICAgIENTUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcigpO1xyXG5cclxuICAgIC8qIEFsbG93IGhvb2sgc2V0dGluZyBpbiB0aGUgc2FtZSBmYXNoaW9uIGFzIGpRdWVyeSdzICQuY3NzKCkuICovXHJcbiAgICBWZWxvY2l0eS5ob29rID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBhcmcyLCBhcmczKSB7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBlbGVtZW50cyA9IHNhbml0aXplRWxlbWVudHMoZWxlbWVudHMpO1xyXG5cclxuICAgICAgICAkLmVhY2goZWxlbWVudHMsIGZ1bmN0aW9uKGksIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgLyogSW5pdGlhbGl6ZSBWZWxvY2l0eSdzIHBlci1lbGVtZW50IGRhdGEgY2FjaGUgaWYgdGhpcyBlbGVtZW50IGhhc24ndCBwcmV2aW91c2x5IGJlZW4gYW5pbWF0ZWQuICovXHJcbiAgICAgICAgICAgIGlmIChEYXRhKGVsZW1lbnQpID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIFZlbG9jaXR5LmluaXQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qIEdldCBwcm9wZXJ0eSB2YWx1ZS4gSWYgYW4gZWxlbWVudCBzZXQgd2FzIHBhc3NlZCBpbiwgb25seSByZXR1cm4gdGhlIHZhbHVlIGZvciB0aGUgZmlyc3QgZWxlbWVudC4gKi9cclxuICAgICAgICAgICAgaWYgKGFyZzMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFZlbG9jaXR5LkNTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIGFyZzIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvKiBTZXQgcHJvcGVydHkgdmFsdWUuICovXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvKiBzUFYgcmV0dXJucyBhbiBhcnJheSBvZiB0aGUgbm9ybWFsaXplZCBwcm9wZXJ0eU5hbWUvcHJvcGVydHlWYWx1ZSBwYWlyIHVzZWQgdG8gdXBkYXRlIHRoZSBET00uICovXHJcbiAgICAgICAgICAgICAgICB2YXIgYWRqdXN0ZWRTZXQgPSBWZWxvY2l0eS5DU1Muc2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCBhcmcyLCBhcmczKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBUcmFuc2Zvcm0gcHJvcGVydGllcyBkb24ndCBhdXRvbWF0aWNhbGx5IHNldC4gVGhleSBoYXZlIHRvIGJlIGZsdXNoZWQgdG8gdGhlIERPTS4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChhZGp1c3RlZFNldFswXSA9PT0gXCJ0cmFuc2Zvcm1cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIFZlbG9jaXR5LkNTUy5mbHVzaFRyYW5zZm9ybUNhY2hlKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhbHVlID0gYWRqdXN0ZWRTZXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKioqKioqKioqKioqKioqKipcclxuICAgICAgICBBbmltYXRpb25cclxuICAgICoqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgIHZhciBhbmltYXRlID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgQ2FsbCBDaGFpblxyXG4gICAgICAgICoqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgLyogTG9naWMgZm9yIGRldGVybWluaW5nIHdoYXQgdG8gcmV0dXJuIHRvIHRoZSBjYWxsIHN0YWNrIHdoZW4gZXhpdGluZyBvdXQgb2YgVmVsb2NpdHkuICovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0Q2hhaW4gKCkge1xyXG4gICAgICAgICAgICAvKiBJZiB3ZSBhcmUgdXNpbmcgdGhlIHV0aWxpdHkgZnVuY3Rpb24sIGF0dGVtcHQgdG8gcmV0dXJuIHRoaXMgY2FsbCdzIHByb21pc2UuIElmIG5vIHByb21pc2UgbGlicmFyeSB3YXMgZGV0ZWN0ZWQsXHJcbiAgICAgICAgICAgICAgIGRlZmF1bHQgdG8gbnVsbCBpbnN0ZWFkIG9mIHJldHVybmluZyB0aGUgdGFyZ2V0ZWQgZWxlbWVudHMgc28gdGhhdCB1dGlsaXR5IGZ1bmN0aW9uJ3MgcmV0dXJuIHZhbHVlIGlzIHN0YW5kYXJkaXplZC4gKi9cclxuICAgICAgICAgICAgaWYgKGlzVXRpbGl0eSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2VEYXRhLnByb21pc2UgfHwgbnVsbDtcclxuICAgICAgICAgICAgLyogT3RoZXJ3aXNlLCBpZiB3ZSdyZSB1c2luZyAkLmZuLCByZXR1cm4gdGhlIGpRdWVyeS0vWmVwdG8td3JhcHBlZCBlbGVtZW50IHNldC4gKi9cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50c1dyYXBwZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgQXJndW1lbnRzIEFzc2lnbm1lbnRcclxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAvKiBUbyBhbGxvdyBmb3IgZXhwcmVzc2l2ZSBDb2ZmZWVTY3JpcHQgY29kZSwgVmVsb2NpdHkgc3VwcG9ydHMgYW4gYWx0ZXJuYXRpdmUgc3ludGF4IGluIHdoaWNoIFwicHJvcGVydGllc1wiIGFuZCBcIm9wdGlvbnNcIlxyXG4gICAgICAgICAgIG9iamVjdHMgYXJlIGRlZmluZWQgb24gYSBjb250YWluZXIgb2JqZWN0IHRoYXQncyBwYXNzZWQgaW4gYXMgVmVsb2NpdHkncyBzb2xlIGFyZ3VtZW50LiAqL1xyXG4gICAgICAgIC8qIE5vdGU6IFNvbWUgYnJvd3NlcnMgYXV0b21hdGljYWxseSBwb3B1bGF0ZSBhcmd1bWVudHMgd2l0aCBhIFwicHJvcGVydGllc1wiIG9iamVjdC4gV2UgZGV0ZWN0IGl0IGJ5IGNoZWNraW5nIGZvciBpdHMgZGVmYXVsdCBcIm5hbWVzXCIgcHJvcGVydHkuICovXHJcbiAgICAgICAgdmFyIHN5bnRhY3RpY1N1Z2FyID0gKGFyZ3VtZW50c1swXSAmJiAoKCQuaXNQbGFpbk9iamVjdChhcmd1bWVudHNbMF0ucHJvcGVydGllcykgJiYgIWFyZ3VtZW50c1swXS5wcm9wZXJ0aWVzLm5hbWVzKSB8fCBUeXBlLmlzU3RyaW5nKGFyZ3VtZW50c1swXS5wcm9wZXJ0aWVzKSkpLFxyXG4gICAgICAgICAgICAvKiBXaGV0aGVyIFZlbG9jaXR5IHdhcyBjYWxsZWQgdmlhIHRoZSB1dGlsaXR5IGZ1bmN0aW9uIChhcyBvcHBvc2VkIHRvIG9uIGEgalF1ZXJ5L1plcHRvIG9iamVjdCkuICovXHJcbiAgICAgICAgICAgIGlzVXRpbGl0eSxcclxuICAgICAgICAgICAgLyogV2hlbiBWZWxvY2l0eSBpcyBjYWxsZWQgdmlhIHRoZSB1dGlsaXR5IGZ1bmN0aW9uICgkLlZlbG9jaXR5KCkvVmVsb2NpdHkoKSksIGVsZW1lbnRzIGFyZSBleHBsaWNpdGx5XHJcbiAgICAgICAgICAgICAgIHBhc3NlZCBpbiBhcyB0aGUgZmlyc3QgcGFyYW1ldGVyLiBUaHVzLCBhcmd1bWVudCBwb3NpdGlvbmluZyB2YXJpZXMuIFdlIG5vcm1hbGl6ZSB0aGVtIGhlcmUuICovXHJcbiAgICAgICAgICAgIGVsZW1lbnRzV3JhcHBlZCxcclxuICAgICAgICAgICAgYXJndW1lbnRJbmRleDtcclxuXHJcbiAgICAgICAgdmFyIGVsZW1lbnRzLFxyXG4gICAgICAgICAgICBwcm9wZXJ0aWVzTWFwLFxyXG4gICAgICAgICAgICBvcHRpb25zO1xyXG5cclxuICAgICAgICAvKiBEZXRlY3QgalF1ZXJ5L1plcHRvIGVsZW1lbnRzIGJlaW5nIGFuaW1hdGVkIHZpYSB0aGUgJC5mbiBtZXRob2QuICovXHJcbiAgICAgICAgaWYgKFR5cGUuaXNXcmFwcGVkKHRoaXMpKSB7XHJcbiAgICAgICAgICAgIGlzVXRpbGl0eSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgYXJndW1lbnRJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIGVsZW1lbnRzID0gdGhpcztcclxuICAgICAgICAgICAgZWxlbWVudHNXcmFwcGVkID0gdGhpcztcclxuICAgICAgICAvKiBPdGhlcndpc2UsIHJhdyBlbGVtZW50cyBhcmUgYmVpbmcgYW5pbWF0ZWQgdmlhIHRoZSB1dGlsaXR5IGZ1bmN0aW9uLiAqL1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlzVXRpbGl0eSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBhcmd1bWVudEluZGV4ID0gMTtcclxuICAgICAgICAgICAgZWxlbWVudHMgPSBzeW50YWN0aWNTdWdhciA/IGFyZ3VtZW50c1swXS5lbGVtZW50cyA6IGFyZ3VtZW50c1swXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsZW1lbnRzID0gc2FuaXRpemVFbGVtZW50cyhlbGVtZW50cyk7XHJcblxyXG4gICAgICAgIGlmICghZWxlbWVudHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHN5bnRhY3RpY1N1Z2FyKSB7XHJcbiAgICAgICAgICAgIHByb3BlcnRpZXNNYXAgPSBhcmd1bWVudHNbMF0ucHJvcGVydGllcztcclxuICAgICAgICAgICAgb3B0aW9ucyA9IGFyZ3VtZW50c1swXS5vcHRpb25zO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHByb3BlcnRpZXNNYXAgPSBhcmd1bWVudHNbYXJndW1lbnRJbmRleF07XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBhcmd1bWVudHNbYXJndW1lbnRJbmRleCArIDFdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogVGhlIGxlbmd0aCBvZiB0aGUgZWxlbWVudCBzZXQgKGluIHRoZSBmb3JtIG9mIGEgbm9kZUxpc3Qgb3IgYW4gYXJyYXkgb2YgZWxlbWVudHMpIGlzIGRlZmF1bHRlZCB0byAxIGluIGNhc2UgYVxyXG4gICAgICAgICAgIHNpbmdsZSByYXcgRE9NIGVsZW1lbnQgaXMgcGFzc2VkIGluICh3aGljaCBkb2Vzbid0IGNvbnRhaW4gYSBsZW5ndGggcHJvcGVydHkpLiAqL1xyXG4gICAgICAgIHZhciBlbGVtZW50c0xlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aCxcclxuICAgICAgICAgICAgZWxlbWVudHNJbmRleCA9IDA7XHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgQXJndW1lbnQgT3ZlcmxvYWRpbmdcclxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIC8qIFN1cHBvcnQgaXMgaW5jbHVkZWQgZm9yIGpRdWVyeSdzIGFyZ3VtZW50IG92ZXJsb2FkaW5nOiAkLmFuaW1hdGUocHJvcGVydHlNYXAgWywgZHVyYXRpb25dIFssIGVhc2luZ10gWywgY29tcGxldGVdKS5cclxuICAgICAgICAgICBPdmVybG9hZGluZyBpcyBkZXRlY3RlZCBieSBjaGVja2luZyBmb3IgdGhlIGFic2VuY2Ugb2YgYW4gb2JqZWN0IGJlaW5nIHBhc3NlZCBpbnRvIG9wdGlvbnMuICovXHJcbiAgICAgICAgLyogTm90ZTogVGhlIHN0b3AgYWN0aW9uIGRvZXMgbm90IGFjY2VwdCBhbmltYXRpb24gb3B0aW9ucywgYW5kIGlzIHRoZXJlZm9yZSBleGNsdWRlZCBmcm9tIHRoaXMgY2hlY2suICovXHJcbiAgICAgICAgaWYgKHByb3BlcnRpZXNNYXAgIT09IFwic3RvcFwiICYmICEkLmlzUGxhaW5PYmplY3Qob3B0aW9ucykpIHtcclxuICAgICAgICAgICAgLyogVGhlIHV0aWxpdHkgZnVuY3Rpb24gc2hpZnRzIGFsbCBhcmd1bWVudHMgb25lIHBvc2l0aW9uIHRvIHRoZSByaWdodCwgc28gd2UgYWRqdXN0IGZvciB0aGF0IG9mZnNldC4gKi9cclxuICAgICAgICAgICAgdmFyIHN0YXJ0aW5nQXJndW1lbnRQb3NpdGlvbiA9IGFyZ3VtZW50SW5kZXggKyAxO1xyXG5cclxuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG5cclxuICAgICAgICAgICAgLyogSXRlcmF0ZSB0aHJvdWdoIGFsbCBvcHRpb25zIGFyZ3VtZW50cyAqL1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhcnRpbmdBcmd1bWVudFBvc2l0aW9uOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBUcmVhdCBhIG51bWJlciBhcyBhIGR1cmF0aW9uLiBQYXJzZSBpdCBvdXQuICovXHJcbiAgICAgICAgICAgICAgICAvKiBOb3RlOiBUaGUgZm9sbG93aW5nIFJlZ0V4IHdpbGwgcmV0dXJuIHRydWUgaWYgcGFzc2VkIGFuIGFycmF5IHdpdGggYSBudW1iZXIgYXMgaXRzIGZpcnN0IGl0ZW0uXHJcbiAgICAgICAgICAgICAgICAgICBUaHVzLCBhcnJheXMgYXJlIHNraXBwZWQgZnJvbSB0aGlzIGNoZWNrLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKCFUeXBlLmlzQXJyYXkoYXJndW1lbnRzW2ldKSAmJiAoL14oZmFzdHxub3JtYWx8c2xvdykkL2kudGVzdChhcmd1bWVudHNbaV0pIHx8IC9eXFxkLy50ZXN0KGFyZ3VtZW50c1tpXSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kdXJhdGlvbiA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgICAgIC8qIFRyZWF0IHN0cmluZ3MgYW5kIGFycmF5cyBhcyBlYXNpbmdzLiAqL1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChUeXBlLmlzU3RyaW5nKGFyZ3VtZW50c1tpXSkgfHwgVHlwZS5pc0FycmF5KGFyZ3VtZW50c1tpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmVhc2luZyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgICAgIC8qIFRyZWF0IGEgZnVuY3Rpb24gYXMgYSBjb21wbGV0ZSBjYWxsYmFjay4gKi9cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoVHlwZS5pc0Z1bmN0aW9uKGFyZ3VtZW50c1tpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNvbXBsZXRlID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgIFByb21pc2VzXHJcbiAgICAgICAgKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICB2YXIgcHJvbWlzZURhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZXI6IG51bGwsXHJcbiAgICAgICAgICAgICAgICByZWplY3RlcjogbnVsbFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKiBJZiB0aGlzIGNhbGwgd2FzIG1hZGUgdmlhIHRoZSB1dGlsaXR5IGZ1bmN0aW9uICh3aGljaCBpcyB0aGUgZGVmYXVsdCBtZXRob2Qgb2YgaW52b2NhdGlvbiB3aGVuIGpRdWVyeS9aZXB0byBhcmUgbm90IGJlaW5nIHVzZWQpLCBhbmQgaWZcclxuICAgICAgICAgICBwcm9taXNlIHN1cHBvcnQgd2FzIGRldGVjdGVkLCBjcmVhdGUgYSBwcm9taXNlIG9iamVjdCBmb3IgdGhpcyBjYWxsIGFuZCBzdG9yZSByZWZlcmVuY2VzIHRvIGl0cyByZXNvbHZlciBhbmQgcmVqZWN0ZXIgbWV0aG9kcy4gVGhlIHJlc29sdmVcclxuICAgICAgICAgICBtZXRob2QgaXMgdXNlZCB3aGVuIGEgY2FsbCBjb21wbGV0ZXMgbmF0dXJhbGx5IG9yIGlzIHByZW1hdHVyZWx5IHN0b3BwZWQgYnkgdGhlIHVzZXIuIEluIGJvdGggY2FzZXMsIGNvbXBsZXRlQ2FsbCgpIGhhbmRsZXMgdGhlIGFzc29jaWF0ZWRcclxuICAgICAgICAgICBjYWxsIGNsZWFudXAgYW5kIHByb21pc2UgcmVzb2x2aW5nIGxvZ2ljLiBUaGUgcmVqZWN0IG1ldGhvZCBpcyB1c2VkIHdoZW4gYW4gaW52YWxpZCBzZXQgb2YgYXJndW1lbnRzIGlzIHBhc3NlZCBpbnRvIGEgVmVsb2NpdHkgY2FsbC4gKi9cclxuICAgICAgICAvKiBOb3RlOiBWZWxvY2l0eSBlbXBsb3lzIGEgY2FsbC1iYXNlZCBxdWV1ZWluZyBhcmNoaXRlY3R1cmUsIHdoaWNoIG1lYW5zIHRoYXQgc3RvcHBpbmcgYW4gYW5pbWF0aW5nIGVsZW1lbnQgYWN0dWFsbHkgc3RvcHMgdGhlIGZ1bGwgY2FsbCB0aGF0XHJcbiAgICAgICAgICAgdHJpZ2dlcmVkIGl0IC0tIG5vdCB0aGF0IG9uZSBlbGVtZW50IGV4Y2x1c2l2ZWx5LiBTaW1pbGFybHksIHRoZXJlIGlzIG9uZSBwcm9taXNlIHBlciBjYWxsLCBhbmQgYWxsIGVsZW1lbnRzIHRhcmdldGVkIGJ5IGEgVmVsb2NpdHkgY2FsbCBhcmVcclxuICAgICAgICAgICBncm91cGVkIHRvZ2V0aGVyIGZvciB0aGUgcHVycG9zZXMgb2YgcmVzb2x2aW5nIGFuZCByZWplY3RpbmcgYSBwcm9taXNlLiAqL1xyXG4gICAgICAgIGlmIChpc1V0aWxpdHkgJiYgVmVsb2NpdHkuUHJvbWlzZSkge1xyXG4gICAgICAgICAgICBwcm9taXNlRGF0YS5wcm9taXNlID0gbmV3IFZlbG9jaXR5LlByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZURhdGEucmVzb2x2ZXIgPSByZXNvbHZlO1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZURhdGEucmVqZWN0ZXIgPSByZWplY3Q7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgIEFjdGlvbiBEZXRlY3Rpb25cclxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIC8qIFZlbG9jaXR5J3MgYmVoYXZpb3IgaXMgY2F0ZWdvcml6ZWQgaW50byBcImFjdGlvbnNcIjogRWxlbWVudHMgY2FuIGVpdGhlciBiZSBzcGVjaWFsbHkgc2Nyb2xsZWQgaW50byB2aWV3LFxyXG4gICAgICAgICAgIG9yIHRoZXkgY2FuIGJlIHN0YXJ0ZWQsIHN0b3BwZWQsIG9yIHJldmVyc2VkLiBJZiBhIGxpdGVyYWwgb3IgcmVmZXJlbmNlZCBwcm9wZXJ0aWVzIG1hcCBpcyBwYXNzZWQgaW4gYXMgVmVsb2NpdHknc1xyXG4gICAgICAgICAgIGZpcnN0IGFyZ3VtZW50LCB0aGUgYXNzb2NpYXRlZCBhY3Rpb24gaXMgXCJzdGFydFwiLiBBbHRlcm5hdGl2ZWx5LCBcInNjcm9sbFwiLCBcInJldmVyc2VcIiwgb3IgXCJzdG9wXCIgY2FuIGJlIHBhc3NlZCBpbiBpbnN0ZWFkIG9mIGEgcHJvcGVydGllcyBtYXAuICovXHJcbiAgICAgICAgdmFyIGFjdGlvbjtcclxuXHJcbiAgICAgICAgc3dpdGNoIChwcm9wZXJ0aWVzTWFwKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzY3JvbGxcIjpcclxuICAgICAgICAgICAgICAgIGFjdGlvbiA9IFwic2Nyb2xsXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJyZXZlcnNlXCI6XHJcbiAgICAgICAgICAgICAgICBhY3Rpb24gPSBcInJldmVyc2VcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcInN0b3BcIjpcclxuICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICAgQWN0aW9uOiBTdG9wXHJcbiAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIENsZWFyIHRoZSBjdXJyZW50bHktYWN0aXZlIGRlbGF5IG9uIGVhY2ggdGFyZ2V0ZWQgZWxlbWVudC4gKi9cclxuICAgICAgICAgICAgICAgICQuZWFjaChlbGVtZW50cywgZnVuY3Rpb24oaSwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChEYXRhKGVsZW1lbnQpICYmIERhdGEoZWxlbWVudCkuZGVsYXlUaW1lcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBTdG9wIHRoZSB0aW1lciBmcm9tIHRyaWdnZXJpbmcgaXRzIGNhY2hlZCBuZXh0KCkgZnVuY3Rpb24uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChEYXRhKGVsZW1lbnQpLmRlbGF5VGltZXIuc2V0VGltZW91dCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBNYW51YWxseSBjYWxsIHRoZSBuZXh0KCkgZnVuY3Rpb24gc28gdGhhdCB0aGUgc3Vic2VxdWVudCBxdWV1ZSBpdGVtcyBjYW4gcHJvZ3Jlc3MuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChEYXRhKGVsZW1lbnQpLmRlbGF5VGltZXIubmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YShlbGVtZW50KS5kZWxheVRpbWVyLm5leHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIERhdGEoZWxlbWVudCkuZGVsYXlUaW1lcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY2FsbHNUb1N0b3AgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBXaGVuIHRoZSBzdG9wIGFjdGlvbiBpcyB0cmlnZ2VyZWQsIHRoZSBlbGVtZW50cycgY3VycmVudGx5IGFjdGl2ZSBjYWxsIGlzIGltbWVkaWF0ZWx5IHN0b3BwZWQuIFRoZSBhY3RpdmUgY2FsbCBtaWdodCBoYXZlXHJcbiAgICAgICAgICAgICAgICAgICBiZWVuIGFwcGxpZWQgdG8gbXVsdGlwbGUgZWxlbWVudHMsIGluIHdoaWNoIGNhc2UgYWxsIG9mIHRoZSBjYWxsJ3MgZWxlbWVudHMgd2lsbCBiZSBzdWJqZWN0ZWQgdG8gc3RvcHBpbmcuIFdoZW4gYW4gZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgaXMgc3RvcHBlZCwgdGhlIG5leHQgaXRlbSBpbiBpdHMgYW5pbWF0aW9uIHF1ZXVlIGlzIGltbWVkaWF0ZWx5IHRyaWdnZXJlZC4gKi9cclxuICAgICAgICAgICAgICAgIC8qIEFuIGFkZGl0aW9uYWwgYXJndW1lbnQgbWF5IGJlIHBhc3NlZCBpbiB0byBjbGVhciBhbiBlbGVtZW50J3MgcmVtYWluaW5nIHF1ZXVlZCBjYWxscy4gRWl0aGVyIHRydWUgKHdoaWNoIGRlZmF1bHRzIHRvIHRoZSBcImZ4XCIgcXVldWUpXHJcbiAgICAgICAgICAgICAgICAgICBvciBhIGN1c3RvbSBxdWV1ZSBzdHJpbmcgY2FuIGJlIHBhc3NlZCBpbi4gKi9cclxuICAgICAgICAgICAgICAgIC8qIE5vdGU6IFRoZSBzdG9wIGNvbW1hbmQgcnVucyBwcmlvciB0byBRdWV1ZWluZyBzaW5jZSBpdHMgYmVoYXZpb3IgaXMgaW50ZW5kZWQgdG8gdGFrZSBlZmZlY3QgKmltbWVkaWF0ZWx5KixcclxuICAgICAgICAgICAgICAgICAgIHJlZ2FyZGxlc3Mgb2YgdGhlIGVsZW1lbnQncyBjdXJyZW50IHF1ZXVlIHN0YXRlLiAqL1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIEl0ZXJhdGUgdGhyb3VnaCBldmVyeSBhY3RpdmUgY2FsbC4gKi9cclxuICAgICAgICAgICAgICAgICQuZWFjaChWZWxvY2l0eS5TdGF0ZS5jYWxscywgZnVuY3Rpb24oaSwgYWN0aXZlQ2FsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIEluYWN0aXZlIGNhbGxzIGFyZSBzZXQgdG8gZmFsc2UgYnkgdGhlIGxvZ2ljIGluc2lkZSBjb21wbGV0ZUNhbGwoKS4gU2tpcCB0aGVtLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVDYWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEl0ZXJhdGUgdGhyb3VnaCB0aGUgYWN0aXZlIGNhbGwncyB0YXJnZXRlZCBlbGVtZW50cy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGFjdGl2ZUNhbGxbMV0sIGZ1bmN0aW9uKGssIGFjdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBxdWV1ZU5hbWUgPSBUeXBlLmlzU3RyaW5nKG9wdGlvbnMpID8gb3B0aW9ucyA6IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgIT09IHVuZGVmaW5lZCAmJiBhY3RpdmVDYWxsWzJdLnF1ZXVlICE9PSBxdWV1ZU5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJdGVyYXRlIHRocm91Z2ggdGhlIGNhbGxzIHRhcmdldGVkIGJ5IHRoZSBzdG9wIGNvbW1hbmQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goZWxlbWVudHMsIGZ1bmN0aW9uKGwsIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBDaGVjayB0aGF0IHRoaXMgY2FsbCB3YXMgYXBwbGllZCB0byB0aGUgdGFyZ2V0IGVsZW1lbnQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT09IGFjdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogT3B0aW9uYWxseSBjbGVhciB0aGUgcmVtYWluaW5nIHF1ZXVlZCBjYWxscy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSXRlcmF0ZSB0aHJvdWdoIHRoZSBpdGVtcyBpbiB0aGUgZWxlbWVudCdzIHF1ZXVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKCQucXVldWUoZWxlbWVudCwgcXVldWVOYW1lKSwgZnVuY3Rpb24oXywgaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFRoZSBxdWV1ZSBhcnJheSBjYW4gY29udGFpbiBhbiBcImlucHJvZ3Jlc3NcIiBzdHJpbmcsIHdoaWNoIHdlIHNraXAuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFR5cGUuaXNGdW5jdGlvbihpdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBQYXNzIHRoZSBpdGVtJ3MgY2FsbGJhY2sgYSBmbGFnIGluZGljYXRpbmcgdGhhdCB3ZSB3YW50IHRvIGFib3J0IGZyb20gdGhlIHF1ZXVlIGNhbGwuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChTcGVjaWZpY2FsbHksIHRoZSBxdWV1ZSB3aWxsIHJlc29sdmUgdGhlIGNhbGwncyBhc3NvY2lhdGVkIHByb21pc2UgdGhlbiBhYm9ydC4pICAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtKG51bGwsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIENsZWFyaW5nIHRoZSAkLnF1ZXVlKCkgYXJyYXkgaXMgYWNoaWV2ZWQgYnkgcmVzZXR0aW5nIGl0IHRvIFtdLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5xdWV1ZShlbGVtZW50LCBxdWV1ZU5hbWUsIFtdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERhdGEoZWxlbWVudCkgJiYgcXVldWVOYW1lID09PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTaW5jZSBcInJldmVyc2VcIiB1c2VzIGNhY2hlZCBzdGFydCB2YWx1ZXMgKHRoZSBwcmV2aW91cyBjYWxsJ3MgZW5kVmFsdWVzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZXNlIHZhbHVlcyBtdXN0IGJlIGNoYW5nZWQgdG8gcmVmbGVjdCB0aGUgZmluYWwgdmFsdWUgdGhhdCB0aGUgZWxlbWVudHMgd2VyZSBhY3R1YWxseSB0d2VlbmVkIHRvLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKERhdGEoZWxlbWVudCkudHdlZW5zQ29udGFpbmVyLCBmdW5jdGlvbihtLCBhY3RpdmVUd2Vlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVR3ZWVuLmVuZFZhbHVlID0gYWN0aXZlVHdlZW4uY3VycmVudFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxzVG9TdG9wLnB1c2goaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIFByZW1hdHVyZWx5IGNhbGwgY29tcGxldGVDYWxsKCkgb24gZWFjaCBtYXRjaGVkIGFjdGl2ZSBjYWxsLCBwYXNzaW5nIGFuIGFkZGl0aW9uYWwgZmxhZyB0byBpbmRpY2F0ZVxyXG4gICAgICAgICAgICAgICAgICAgdGhhdCB0aGUgY29tcGxldGUgY2FsbGJhY2sgYW5kIGRpc3BsYXk6bm9uZSBzZXR0aW5nIHNob3VsZCBiZSBza2lwcGVkIHNpbmNlIHdlJ3JlIGNvbXBsZXRpbmcgcHJlbWF0dXJlbHkuICovXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goY2FsbHNUb1N0b3AsIGZ1bmN0aW9uKGksIGopIHtcclxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZUNhbGwoaiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocHJvbWlzZURhdGEucHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIEltbWVkaWF0ZWx5IHJlc29sdmUgdGhlIHByb21pc2UgYXNzb2NpYXRlZCB3aXRoIHRoaXMgc3RvcCBjYWxsIHNpbmNlIHN0b3AgcnVucyBzeW5jaHJvbm91c2x5LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2VEYXRhLnJlc29sdmVyKGVsZW1lbnRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBTaW5jZSB3ZSdyZSBzdG9wcGluZywgYW5kIG5vdCBwcm9jZWVkaW5nIHdpdGggcXVldWVpbmcsIGV4aXQgb3V0IG9mIFZlbG9jaXR5LiAqL1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldENoYWluKCk7XHJcblxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgLyogVHJlYXQgYSBub24tZW1wdHkgcGxhaW4gb2JqZWN0IGFzIGEgbGl0ZXJhbCBwcm9wZXJ0aWVzIG1hcC4gKi9cclxuICAgICAgICAgICAgICAgIGlmICgkLmlzUGxhaW5PYmplY3QocHJvcGVydGllc01hcCkgJiYgIVR5cGUuaXNFbXB0eU9iamVjdChwcm9wZXJ0aWVzTWFwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbiA9IFwic3RhcnRcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgIFJlZGlyZWN0c1xyXG4gICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBDaGVjayBpZiBhIHN0cmluZyBtYXRjaGVzIGEgcmVnaXN0ZXJlZCByZWRpcmVjdCAoc2VlIFJlZGlyZWN0cyBhYm92ZSkuICovXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFR5cGUuaXNTdHJpbmcocHJvcGVydGllc01hcCkgJiYgVmVsb2NpdHkuUmVkaXJlY3RzW3Byb3BlcnRpZXNNYXBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdHMgPSAkLmV4dGVuZCh7fSwgb3B0aW9ucyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uT3JpZ2luYWwgPSBvcHRzLmR1cmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxheU9yaWdpbmFsID0gb3B0cy5kZWxheSB8fCAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGUgYmFja3dhcmRzIG9wdGlvbiB3YXMgcGFzc2VkIGluLCByZXZlcnNlIHRoZSBlbGVtZW50IHNldCBzbyB0aGF0IGVsZW1lbnRzIGFuaW1hdGUgZnJvbSB0aGUgbGFzdCB0byB0aGUgZmlyc3QuICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMuYmFja3dhcmRzID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzID0gJC5leHRlbmQodHJ1ZSwgW10sIGVsZW1lbnRzKS5yZXZlcnNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBJbmRpdmlkdWFsbHkgdHJpZ2dlciB0aGUgcmVkaXJlY3QgZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgc2V0IHRvIHByZXZlbnQgdXNlcnMgZnJvbSBoYXZpbmcgdG8gaGFuZGxlIGl0ZXJhdGlvbiBsb2dpYyBpbiB0aGVpciByZWRpcmVjdC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAkLmVhY2goZWxlbWVudHMsIGZ1bmN0aW9uKGVsZW1lbnRJbmRleCwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGUgc3RhZ2dlciBvcHRpb24gd2FzIHBhc3NlZCBpbiwgc3VjY2Vzc2l2ZWx5IGRlbGF5IGVhY2ggZWxlbWVudCBieSB0aGUgc3RhZ2dlciB2YWx1ZSAoaW4gbXMpLiBSZXRhaW4gdGhlIG9yaWdpbmFsIGRlbGF5IHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VGbG9hdChvcHRzLnN0YWdnZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRzLmRlbGF5ID0gZGVsYXlPcmlnaW5hbCArIChwYXJzZUZsb2F0KG9wdHMuc3RhZ2dlcikgKiBlbGVtZW50SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFR5cGUuaXNGdW5jdGlvbihvcHRzLnN0YWdnZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRzLmRlbGF5ID0gZGVsYXlPcmlnaW5hbCArIG9wdHMuc3RhZ2dlci5jYWxsKGVsZW1lbnQsIGVsZW1lbnRJbmRleCwgZWxlbWVudHNMZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGUgZHJhZyBvcHRpb24gd2FzIHBhc3NlZCBpbiwgc3VjY2Vzc2l2ZWx5IGluY3JlYXNlL2RlY3JlYXNlIChkZXBlbmRpbmcgb24gdGhlIHByZXNlbnNlIG9mIG9wdHMuYmFja3dhcmRzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgZHVyYXRpb24gb2YgZWFjaCBlbGVtZW50J3MgYW5pbWF0aW9uLCB1c2luZyBmbG9vcnMgdG8gcHJldmVudCBwcm9kdWNpbmcgdmVyeSBzaG9ydCBkdXJhdGlvbnMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRzLmRyYWcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIERlZmF1bHQgdGhlIGR1cmF0aW9uIG9mIFVJIHBhY2sgZWZmZWN0cyAoY2FsbG91dHMgYW5kIHRyYW5zaXRpb25zKSB0byAxMDAwbXMgaW5zdGVhZCBvZiB0aGUgdXN1YWwgZGVmYXVsdCBkdXJhdGlvbiBvZiA0MDBtcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMuZHVyYXRpb24gPSBwYXJzZUZsb2F0KGR1cmF0aW9uT3JpZ2luYWwpIHx8ICgvXihjYWxsb3V0fHRyYW5zaXRpb24pLy50ZXN0KHByb3BlcnRpZXNNYXApID8gMTAwMCA6IERVUkFUSU9OX0RFRkFVTFQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEZvciBlYWNoIGVsZW1lbnQsIHRha2UgdGhlIGdyZWF0ZXIgZHVyYXRpb24gb2Y6IEEpIGFuaW1hdGlvbiBjb21wbGV0aW9uIHBlcmNlbnRhZ2UgcmVsYXRpdmUgdG8gdGhlIG9yaWdpbmFsIGR1cmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQikgNzUlIG9mIHRoZSBvcmlnaW5hbCBkdXJhdGlvbiwgb3IgQykgYSAyMDBtcyBmYWxsYmFjayAoaW4gY2FzZSBkdXJhdGlvbiBpcyBhbHJlYWR5IHNldCB0byBhIGxvdyB2YWx1ZSkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaGUgZW5kIHJlc3VsdCBpcyBhIGJhc2VsaW5lIG9mIDc1JSBvZiB0aGUgcmVkaXJlY3QncyBkdXJhdGlvbiB0aGF0IGluY3JlYXNlcy9kZWNyZWFzZXMgYXMgdGhlIGVuZCBvZiB0aGUgZWxlbWVudCBzZXQgaXMgYXBwcm9hY2hlZC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMuZHVyYXRpb24gPSBNYXRoLm1heChvcHRzLmR1cmF0aW9uICogKG9wdHMuYmFja3dhcmRzID8gMSAtIGVsZW1lbnRJbmRleC9lbGVtZW50c0xlbmd0aCA6IChlbGVtZW50SW5kZXggKyAxKSAvIGVsZW1lbnRzTGVuZ3RoKSwgb3B0cy5kdXJhdGlvbiAqIDAuNzUsIDIwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFBhc3MgaW4gdGhlIGNhbGwncyBvcHRzIG9iamVjdCBzbyB0aGF0IHRoZSByZWRpcmVjdCBjYW4gb3B0aW9uYWxseSBleHRlbmQgaXQuIEl0IGRlZmF1bHRzIHRvIGFuIGVtcHR5IG9iamVjdCBpbnN0ZWFkIG9mIG51bGwgdG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVkdWNlIHRoZSBvcHRzIGNoZWNraW5nIGxvZ2ljIHJlcXVpcmVkIGluc2lkZSB0aGUgcmVkaXJlY3QuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFZlbG9jaXR5LlJlZGlyZWN0c1twcm9wZXJ0aWVzTWFwXS5jYWxsKGVsZW1lbnQsIGVsZW1lbnQsIG9wdHMgfHwge30sIGVsZW1lbnRJbmRleCwgZWxlbWVudHNMZW5ndGgsIGVsZW1lbnRzLCBwcm9taXNlRGF0YS5wcm9taXNlID8gcHJvbWlzZURhdGEgOiB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBTaW5jZSB0aGUgYW5pbWF0aW9uIGxvZ2ljIHJlc2lkZXMgd2l0aGluIHRoZSByZWRpcmVjdCdzIG93biBjb2RlLCBhYm9ydCB0aGUgcmVtYWluZGVyIG9mIHRoaXMgY2FsbC5cclxuICAgICAgICAgICAgICAgICAgICAgICAoVGhlIHBlcmZvcm1hbmNlIG92ZXJoZWFkIHVwIHRvIHRoaXMgcG9pbnQgaXMgdmlydHVhbGx5IG5vbi1leGlzdGFudC4pICovXHJcbiAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogVGhlIGpRdWVyeSBjYWxsIGNoYWluIGlzIGtlcHQgaW50YWN0IGJ5IHJldHVybmluZyB0aGUgY29tcGxldGUgZWxlbWVudCBzZXQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldENoYWluKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhYm9ydEVycm9yID0gXCJWZWxvY2l0eTogRmlyc3QgYXJndW1lbnQgKFwiICsgcHJvcGVydGllc01hcCArIFwiKSB3YXMgbm90IGEgcHJvcGVydHkgbWFwLCBhIGtub3duIGFjdGlvbiwgb3IgYSByZWdpc3RlcmVkIHJlZGlyZWN0LiBBYm9ydGluZy5cIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb21pc2VEYXRhLnByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZURhdGEucmVqZWN0ZXIobmV3IEVycm9yKGFib3J0RXJyb3IpKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhYm9ydEVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRDaGFpbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgIENhbGwtV2lkZSBWYXJpYWJsZXNcclxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgLyogQSBjb250YWluZXIgZm9yIENTUyB1bml0IGNvbnZlcnNpb24gcmF0aW9zIChlLmcuICUsIHJlbSwgYW5kIGVtID09PiBweCkgdGhhdCBpcyB1c2VkIHRvIGNhY2hlIHJhdGlvcyBhY3Jvc3MgYWxsIGVsZW1lbnRzXHJcbiAgICAgICAgICAgYmVpbmcgYW5pbWF0ZWQgaW4gYSBzaW5nbGUgVmVsb2NpdHkgY2FsbC4gQ2FsY3VsYXRpbmcgdW5pdCByYXRpb3MgbmVjZXNzaXRhdGVzIERPTSBxdWVyeWluZyBhbmQgdXBkYXRpbmcsIGFuZCBpcyB0aGVyZWZvcmVcclxuICAgICAgICAgICBhdm9pZGVkICh2aWEgY2FjaGluZykgd2hlcmV2ZXIgcG9zc2libGUuIFRoaXMgY29udGFpbmVyIGlzIGNhbGwtd2lkZSBpbnN0ZWFkIG9mIHBhZ2Utd2lkZSB0byBhdm9pZCB0aGUgcmlzayBvZiB1c2luZyBzdGFsZVxyXG4gICAgICAgICAgIGNvbnZlcnNpb24gbWV0cmljcyBhY3Jvc3MgVmVsb2NpdHkgYW5pbWF0aW9ucyB0aGF0IGFyZSBub3QgaW1tZWRpYXRlbHkgY29uc2VjdXRpdmVseSBjaGFpbmVkLiAqL1xyXG4gICAgICAgIHZhciBjYWxsVW5pdENvbnZlcnNpb25EYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgbGFzdFBhcmVudDogbnVsbCxcclxuICAgICAgICAgICAgICAgIGxhc3RQb3NpdGlvbjogbnVsbCxcclxuICAgICAgICAgICAgICAgIGxhc3RGb250U2l6ZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGxhc3RQZXJjZW50VG9QeFdpZHRoOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbGFzdFBlcmNlbnRUb1B4SGVpZ2h0OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbGFzdEVtVG9QeDogbnVsbCxcclxuICAgICAgICAgICAgICAgIHJlbVRvUHg6IG51bGwsXHJcbiAgICAgICAgICAgICAgICB2d1RvUHg6IG51bGwsXHJcbiAgICAgICAgICAgICAgICB2aFRvUHg6IG51bGxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyogQSBjb250YWluZXIgZm9yIGFsbCB0aGUgZW5zdWluZyB0d2VlbiBkYXRhIGFuZCBtZXRhZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhpcyBjYWxsLiBUaGlzIGNvbnRhaW5lciBnZXRzIHB1c2hlZCB0byB0aGUgcGFnZS13aWRlXHJcbiAgICAgICAgICAgVmVsb2NpdHkuU3RhdGUuY2FsbHMgYXJyYXkgdGhhdCBpcyBwcm9jZXNzZWQgZHVyaW5nIGFuaW1hdGlvbiB0aWNraW5nLiAqL1xyXG4gICAgICAgIHZhciBjYWxsID0gW107XHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICBFbGVtZW50IFByb2Nlc3NpbmdcclxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIC8qIEVsZW1lbnQgcHJvY2Vzc2luZyBjb25zaXN0cyBvZiB0aHJlZSBwYXJ0cyAtLSBkYXRhIHByb2Nlc3NpbmcgdGhhdCBjYW5ub3QgZ28gc3RhbGUgYW5kIGRhdGEgcHJvY2Vzc2luZyB0aGF0ICpjYW4qIGdvIHN0YWxlIChpLmUuIHRoaXJkLXBhcnR5IHN0eWxlIG1vZGlmaWNhdGlvbnMpOlxyXG4gICAgICAgICAgIDEpIFByZS1RdWV1ZWluZzogRWxlbWVudC13aWRlIHZhcmlhYmxlcywgaW5jbHVkaW5nIHRoZSBlbGVtZW50J3MgZGF0YSBzdG9yYWdlLCBhcmUgaW5zdGFudGlhdGVkLiBDYWxsIG9wdGlvbnMgYXJlIHByZXBhcmVkLiBJZiB0cmlnZ2VyZWQsIHRoZSBTdG9wIGFjdGlvbiBpcyBleGVjdXRlZC5cclxuICAgICAgICAgICAyKSBRdWV1ZWluZzogVGhlIGxvZ2ljIHRoYXQgcnVucyBvbmNlIHRoaXMgY2FsbCBoYXMgcmVhY2hlZCBpdHMgcG9pbnQgb2YgZXhlY3V0aW9uIGluIHRoZSBlbGVtZW50J3MgJC5xdWV1ZSgpIHN0YWNrLiBNb3N0IGxvZ2ljIGlzIHBsYWNlZCBoZXJlIHRvIGF2b2lkIHJpc2tpbmcgaXQgYmVjb21pbmcgc3RhbGUuXHJcbiAgICAgICAgICAgMykgUHVzaGluZzogQ29uc29saWRhdGlvbiBvZiB0aGUgdHdlZW4gZGF0YSBmb2xsb3dlZCBieSBpdHMgcHVzaCBvbnRvIHRoZSBnbG9iYWwgaW4tcHJvZ3Jlc3MgY2FsbHMgY29udGFpbmVyLlxyXG4gICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHByb2Nlc3NFbGVtZW50ICgpIHtcclxuXHJcbiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgIFBhcnQgSTogUHJlLVF1ZXVlaW5nXHJcbiAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgIEVsZW1lbnQtV2lkZSBWYXJpYWJsZXNcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgLyogVGhlIHJ1bnRpbWUgb3B0cyBvYmplY3QgaXMgdGhlIGV4dGVuc2lvbiBvZiB0aGUgY3VycmVudCBjYWxsJ3Mgb3B0aW9ucyBhbmQgVmVsb2NpdHkncyBwYWdlLXdpZGUgb3B0aW9uIGRlZmF1bHRzLiAqL1xyXG4gICAgICAgICAgICAgICAgb3B0cyA9ICQuZXh0ZW5kKHt9LCBWZWxvY2l0eS5kZWZhdWx0cywgb3B0aW9ucyksXHJcbiAgICAgICAgICAgICAgICAvKiBBIGNvbnRhaW5lciBmb3IgdGhlIHByb2Nlc3NlZCBkYXRhIGFzc29jaWF0ZWQgd2l0aCBlYWNoIHByb3BlcnR5IGluIHRoZSBwcm9wZXJ0eU1hcC5cclxuICAgICAgICAgICAgICAgICAgIChFYWNoIHByb3BlcnR5IGluIHRoZSBtYXAgcHJvZHVjZXMgaXRzIG93biBcInR3ZWVuXCIuKSAqL1xyXG4gICAgICAgICAgICAgICAgdHdlZW5zQ29udGFpbmVyID0ge30sXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50VW5pdENvbnZlcnNpb25EYXRhO1xyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICBFbGVtZW50IEluaXRcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgaWYgKERhdGEoZWxlbWVudCkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgVmVsb2NpdHkuaW5pdChlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICBPcHRpb246IERlbGF5XHJcbiAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIC8qIFNpbmNlIHF1ZXVlOmZhbHNlIGRvZXNuJ3QgcmVzcGVjdCB0aGUgaXRlbSdzIGV4aXN0aW5nIHF1ZXVlLCB3ZSBhdm9pZCBpbmplY3RpbmcgaXRzIGRlbGF5IGhlcmUgKGl0J3Mgc2V0IGxhdGVyIG9uKS4gKi9cclxuICAgICAgICAgICAgLyogTm90ZTogVmVsb2NpdHkgcm9sbHMgaXRzIG93biBkZWxheSBmdW5jdGlvbiBzaW5jZSBqUXVlcnkgZG9lc24ndCBoYXZlIGEgdXRpbGl0eSBhbGlhcyBmb3IgJC5mbi5kZWxheSgpXHJcbiAgICAgICAgICAgICAgIChhbmQgdGh1cyByZXF1aXJlcyBqUXVlcnkgZWxlbWVudCBjcmVhdGlvbiwgd2hpY2ggd2UgYXZvaWQgc2luY2UgaXRzIG92ZXJoZWFkIGluY2x1ZGVzIERPTSBxdWVyeWluZykuICovXHJcbiAgICAgICAgICAgIGlmIChwYXJzZUZsb2F0KG9wdHMuZGVsYXkpICYmIG9wdHMucXVldWUgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAkLnF1ZXVlKGVsZW1lbnQsIG9wdHMucXVldWUsIGZ1bmN0aW9uKG5leHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBUaGlzIGlzIGEgZmxhZyB1c2VkIHRvIGluZGljYXRlIHRvIHRoZSB1cGNvbWluZyBjb21wbGV0ZUNhbGwoKSBmdW5jdGlvbiB0aGF0IHRoaXMgcXVldWUgZW50cnkgd2FzIGluaXRpYXRlZCBieSBWZWxvY2l0eS4gU2VlIGNvbXBsZXRlQ2FsbCgpIGZvciBmdXJ0aGVyIGRldGFpbHMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkudmVsb2NpdHlRdWV1ZUVudHJ5RmxhZyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIFRoZSBlbnN1aW5nIHF1ZXVlIGl0ZW0gKHdoaWNoIGlzIGFzc2lnbmVkIHRvIHRoZSBcIm5leHRcIiBhcmd1bWVudCB0aGF0ICQucXVldWUoKSBhdXRvbWF0aWNhbGx5IHBhc3NlcyBpbikgd2lsbCBiZSB0cmlnZ2VyZWQgYWZ0ZXIgYSBzZXRUaW1lb3V0IGRlbGF5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgIFRoZSBzZXRUaW1lb3V0IGlzIHN0b3JlZCBzbyB0aGF0IGl0IGNhbiBiZSBzdWJqZWN0ZWQgdG8gY2xlYXJUaW1lb3V0KCkgaWYgdGhpcyBhbmltYXRpb24gaXMgcHJlbWF0dXJlbHkgc3RvcHBlZCB2aWEgVmVsb2NpdHkncyBcInN0b3BcIiBjb21tYW5kLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIERhdGEoZWxlbWVudCkuZGVsYXlUaW1lciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dDogc2V0VGltZW91dChuZXh0LCBwYXJzZUZsb2F0KG9wdHMuZGVsYXkpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogbmV4dFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICBPcHRpb246IER1cmF0aW9uXHJcbiAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIC8qIFN1cHBvcnQgZm9yIGpRdWVyeSdzIG5hbWVkIGR1cmF0aW9ucy4gKi9cclxuICAgICAgICAgICAgc3dpdGNoIChvcHRzLmR1cmF0aW9uLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImZhc3RcIjpcclxuICAgICAgICAgICAgICAgICAgICBvcHRzLmR1cmF0aW9uID0gMjAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgXCJub3JtYWxcIjpcclxuICAgICAgICAgICAgICAgICAgICBvcHRzLmR1cmF0aW9uID0gRFVSQVRJT05fREVGQVVMVDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2xvd1wiOlxyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMuZHVyYXRpb24gPSA2MDA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAvKiBSZW1vdmUgdGhlIHBvdGVudGlhbCBcIm1zXCIgc3VmZml4IGFuZCBkZWZhdWx0IHRvIDEgaWYgdGhlIHVzZXIgaXMgYXR0ZW1wdGluZyB0byBzZXQgYSBkdXJhdGlvbiBvZiAwIChpbiBvcmRlciB0byBwcm9kdWNlIGFuIGltbWVkaWF0ZSBzdHlsZSBjaGFuZ2UpLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMuZHVyYXRpb24gPSBwYXJzZUZsb2F0KG9wdHMuZHVyYXRpb24pIHx8IDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgR2xvYmFsIE9wdGlvbjogTW9ja1xyXG4gICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICBpZiAoVmVsb2NpdHkubW9jayAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIC8qIEluIG1vY2sgbW9kZSwgYWxsIGFuaW1hdGlvbnMgYXJlIGZvcmNlZCB0byAxbXMgc28gdGhhdCB0aGV5IG9jY3VyIGltbWVkaWF0ZWx5IHVwb24gdGhlIG5leHQgckFGIHRpY2suXHJcbiAgICAgICAgICAgICAgICAgICBBbHRlcm5hdGl2ZWx5LCBhIG11bHRpcGxpZXIgY2FuIGJlIHBhc3NlZCBpbiB0byB0aW1lIHJlbWFwIGFsbCBkZWxheXMgYW5kIGR1cmF0aW9ucy4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChWZWxvY2l0eS5tb2NrID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cy5kdXJhdGlvbiA9IG9wdHMuZGVsYXkgPSAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRzLmR1cmF0aW9uICo9IHBhcnNlRmxvYXQoVmVsb2NpdHkubW9jaykgfHwgMTtcclxuICAgICAgICAgICAgICAgICAgICBvcHRzLmRlbGF5ICo9IHBhcnNlRmxvYXQoVmVsb2NpdHkubW9jaykgfHwgMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgT3B0aW9uOiBFYXNpbmdcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIG9wdHMuZWFzaW5nID0gZ2V0RWFzaW5nKG9wdHMuZWFzaW5nLCBvcHRzLmR1cmF0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgIE9wdGlvbjogQ2FsbGJhY2tzXHJcbiAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAvKiBDYWxsYmFja3MgbXVzdCBmdW5jdGlvbnMuIE90aGVyd2lzZSwgZGVmYXVsdCB0byBudWxsLiAqL1xyXG4gICAgICAgICAgICBpZiAob3B0cy5iZWdpbiAmJiAhVHlwZS5pc0Z1bmN0aW9uKG9wdHMuYmVnaW4pKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRzLmJlZ2luID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG9wdHMucHJvZ3Jlc3MgJiYgIVR5cGUuaXNGdW5jdGlvbihvcHRzLnByb2dyZXNzKSkge1xyXG4gICAgICAgICAgICAgICAgb3B0cy5wcm9ncmVzcyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRzLmNvbXBsZXRlICYmICFUeXBlLmlzRnVuY3Rpb24ob3B0cy5jb21wbGV0ZSkpIHtcclxuICAgICAgICAgICAgICAgIG9wdHMuY29tcGxldGUgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgIE9wdGlvbjogRGlzcGxheSAmIFZpc2liaWxpdHlcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgLyogUmVmZXIgdG8gVmVsb2NpdHkncyBkb2N1bWVudGF0aW9uIChWZWxvY2l0eUpTLm9yZy8jZGlzcGxheUFuZFZpc2liaWxpdHkpIGZvciBhIGRlc2NyaXB0aW9uIG9mIHRoZSBkaXNwbGF5IGFuZCB2aXNpYmlsaXR5IG9wdGlvbnMnIGJlaGF2aW9yLiAqL1xyXG4gICAgICAgICAgICAvKiBOb3RlOiBXZSBzdHJpY3RseSBjaGVjayBmb3IgdW5kZWZpbmVkIGluc3RlYWQgb2YgZmFsc2luZXNzIGJlY2F1c2UgZGlzcGxheSBhY2NlcHRzIGFuIGVtcHR5IHN0cmluZyB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgaWYgKG9wdHMuZGlzcGxheSAhPT0gdW5kZWZpbmVkICYmIG9wdHMuZGlzcGxheSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgb3B0cy5kaXNwbGF5ID0gb3B0cy5kaXNwbGF5LnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBVc2VycyBjYW4gcGFzcyBpbiBhIHNwZWNpYWwgXCJhdXRvXCIgdmFsdWUgdG8gaW5zdHJ1Y3QgVmVsb2NpdHkgdG8gc2V0IHRoZSBlbGVtZW50IHRvIGl0cyBkZWZhdWx0IGRpc3BsYXkgdmFsdWUuICovXHJcbiAgICAgICAgICAgICAgICBpZiAob3B0cy5kaXNwbGF5ID09PSBcImF1dG9cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMuZGlzcGxheSA9IFZlbG9jaXR5LkNTUy5WYWx1ZXMuZ2V0RGlzcGxheVR5cGUoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRzLnZpc2liaWxpdHkgIT09IHVuZGVmaW5lZCAmJiBvcHRzLnZpc2liaWxpdHkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIG9wdHMudmlzaWJpbGl0eSA9IG9wdHMudmlzaWJpbGl0eS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgIE9wdGlvbjogbW9iaWxlSEFcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIC8qIFdoZW4gc2V0IHRvIHRydWUsIGFuZCBpZiB0aGlzIGlzIGEgbW9iaWxlIGRldmljZSwgbW9iaWxlSEEgYXV0b21hdGljYWxseSBlbmFibGVzIGhhcmR3YXJlIGFjY2VsZXJhdGlvbiAodmlhIGEgbnVsbCB0cmFuc2Zvcm0gaGFjaylcclxuICAgICAgICAgICAgICAgb24gYW5pbWF0aW5nIGVsZW1lbnRzLiBIQSBpcyByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnQgYXQgdGhlIGNvbXBsZXRpb24gb2YgaXRzIGFuaW1hdGlvbi4gKi9cclxuICAgICAgICAgICAgLyogTm90ZTogQW5kcm9pZCBHaW5nZXJicmVhZCBkb2Vzbid0IHN1cHBvcnQgSEEuIElmIGEgbnVsbCB0cmFuc2Zvcm0gaGFjayAobW9iaWxlSEEpIGlzIGluIGZhY3Qgc2V0LCBpdCB3aWxsIHByZXZlbnQgb3RoZXIgdHJhbmZvcm0gc3VicHJvcGVydGllcyBmcm9tIHRha2luZyBlZmZlY3QuICovXHJcbiAgICAgICAgICAgIC8qIE5vdGU6IFlvdSBjYW4gcmVhZCBtb3JlIGFib3V0IHRoZSB1c2Ugb2YgbW9iaWxlSEEgaW4gVmVsb2NpdHkncyBkb2N1bWVudGF0aW9uOiBWZWxvY2l0eUpTLm9yZy8jbW9iaWxlSEEuICovXHJcbiAgICAgICAgICAgIG9wdHMubW9iaWxlSEEgPSAob3B0cy5tb2JpbGVIQSAmJiBWZWxvY2l0eS5TdGF0ZS5pc01vYmlsZSAmJiAhVmVsb2NpdHkuU3RhdGUuaXNHaW5nZXJicmVhZCk7XHJcblxyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgUGFydCBJSTogUXVldWVpbmdcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAvKiBXaGVuIGEgc2V0IG9mIGVsZW1lbnRzIGlzIHRhcmdldGVkIGJ5IGEgVmVsb2NpdHkgY2FsbCwgdGhlIHNldCBpcyBicm9rZW4gdXAgYW5kIGVhY2ggZWxlbWVudCBoYXMgdGhlIGN1cnJlbnQgVmVsb2NpdHkgY2FsbCBpbmRpdmlkdWFsbHkgcXVldWVkIG9udG8gaXQuXHJcbiAgICAgICAgICAgICAgIEluIHRoaXMgd2F5LCBlYWNoIGVsZW1lbnQncyBleGlzdGluZyBxdWV1ZSBpcyByZXNwZWN0ZWQ7IHNvbWUgZWxlbWVudHMgbWF5IGFscmVhZHkgYmUgYW5pbWF0aW5nIGFuZCBhY2NvcmRpbmdseSBzaG91bGQgbm90IGhhdmUgdGhpcyBjdXJyZW50IFZlbG9jaXR5IGNhbGwgdHJpZ2dlcmVkIGltbWVkaWF0ZWx5LiAqL1xyXG4gICAgICAgICAgICAvKiBJbiBlYWNoIHF1ZXVlLCB0d2VlbiBkYXRhIGlzIHByb2Nlc3NlZCBmb3IgZWFjaCBhbmltYXRpbmcgcHJvcGVydHkgdGhlbiBwdXNoZWQgb250byB0aGUgY2FsbC13aWRlIGNhbGxzIGFycmF5LiBXaGVuIHRoZSBsYXN0IGVsZW1lbnQgaW4gdGhlIHNldCBoYXMgaGFkIGl0cyB0d2VlbnMgcHJvY2Vzc2VkLFxyXG4gICAgICAgICAgICAgICB0aGUgY2FsbCBhcnJheSBpcyBwdXNoZWQgdG8gVmVsb2NpdHkuU3RhdGUuY2FsbHMgZm9yIGxpdmUgcHJvY2Vzc2luZyBieSB0aGUgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHRpY2suICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkUXVldWUgKG5leHQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgT3B0aW9uOiBCZWdpblxyXG4gICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBUaGUgYmVnaW4gY2FsbGJhY2sgaXMgZmlyZWQgb25jZSBwZXIgY2FsbCAtLSBub3Qgb25jZSBwZXIgZWxlbWVuZXQgLS0gYW5kIGlzIHBhc3NlZCB0aGUgZnVsbCByYXcgRE9NIGVsZW1lbnQgc2V0IGFzIGJvdGggaXRzIGNvbnRleHQgYW5kIGl0cyBmaXJzdCBhcmd1bWVudC4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChvcHRzLmJlZ2luICYmIGVsZW1lbnRzSW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBXZSB0aHJvdyBjYWxsYmFja3MgaW4gYSBzZXRUaW1lb3V0IHNvIHRoYXQgdGhyb3duIGVycm9ycyBkb24ndCBoYWx0IHRoZSBleGVjdXRpb24gb2YgVmVsb2NpdHkgaXRzZWxmLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMuYmVnaW4uY2FsbChlbGVtZW50cywgZWxlbWVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHRocm93IGVycm9yOyB9LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICBUd2VlbiBEYXRhIENvbnN0cnVjdGlvbiAoZm9yIFNjcm9sbClcclxuICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIE5vdGU6IEluIG9yZGVyIHRvIGJlIHN1YmplY3RlZCB0byBjaGFpbmluZyBhbmQgYW5pbWF0aW9uIG9wdGlvbnMsIHNjcm9sbCdzIHR3ZWVuaW5nIGlzIHJvdXRlZCB0aHJvdWdoIFZlbG9jaXR5IGFzIGlmIGl0IHdlcmUgYSBzdGFuZGFyZCBDU1MgcHJvcGVydHkgYW5pbWF0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gXCJzY3JvbGxcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIFRoZSBzY3JvbGwgYWN0aW9uIHVuaXF1ZWx5IHRha2VzIGFuIG9wdGlvbmFsIFwib2Zmc2V0XCIgb3B0aW9uIC0tIHNwZWNpZmllZCBpbiBwaXhlbHMgLS0gdGhhdCBvZmZzZXRzIHRoZSB0YXJnZXRlZCBzY3JvbGwgcG9zaXRpb24uICovXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbERpcmVjdGlvbiA9ICgvXngkL2kudGVzdChvcHRzLmF4aXMpID8gXCJMZWZ0XCIgOiBcIlRvcFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsT2Zmc2V0ID0gcGFyc2VGbG9hdChvcHRzLm9mZnNldCkgfHwgMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9zaXRpb25DdXJyZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb3NpdGlvbkN1cnJlbnRBbHRlcm5hdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvc2l0aW9uRW5kO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBTY3JvbGwgYWxzbyB1bmlxdWVseSB0YWtlcyBhbiBvcHRpb25hbCBcImNvbnRhaW5lclwiIG9wdGlvbiwgd2hpY2ggaW5kaWNhdGVzIHRoZSBwYXJlbnQgZWxlbWVudCB0aGF0IHNob3VsZCBiZSBzY3JvbGxlZCAtLVxyXG4gICAgICAgICAgICAgICAgICAgICAgIGFzIG9wcG9zZWQgdG8gdGhlIGJyb3dzZXIgd2luZG93IGl0c2VsZi4gVGhpcyBpcyB1c2VmdWwgZm9yIHNjcm9sbGluZyB0b3dhcmQgYW4gZWxlbWVudCB0aGF0J3MgaW5zaWRlIGFuIG92ZXJmbG93aW5nIHBhcmVudCBlbGVtZW50LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRzLmNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBFbnN1cmUgdGhhdCBlaXRoZXIgYSBqUXVlcnkgb2JqZWN0IG9yIGEgcmF3IERPTSBlbGVtZW50IHdhcyBwYXNzZWQgaW4uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChUeXBlLmlzV3JhcHBlZChvcHRzLmNvbnRhaW5lcikgfHwgVHlwZS5pc05vZGUob3B0cy5jb250YWluZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBFeHRyYWN0IHRoZSByYXcgRE9NIGVsZW1lbnQgZnJvbSB0aGUgalF1ZXJ5IHdyYXBwZXIuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRzLmNvbnRhaW5lciA9IG9wdHMuY29udGFpbmVyWzBdIHx8IG9wdHMuY29udGFpbmVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogVW5saWtlIG90aGVyIHByb3BlcnRpZXMgaW4gVmVsb2NpdHksIHRoZSBicm93c2VyJ3Mgc2Nyb2xsIHBvc2l0aW9uIGlzIG5ldmVyIGNhY2hlZCBzaW5jZSBpdCBzbyBmcmVxdWVudGx5IGNoYW5nZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkdWUgdG8gdGhlIHVzZXIncyBuYXR1cmFsIGludGVyYWN0aW9uIHdpdGggdGhlIHBhZ2UpLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9zaXRpb25DdXJyZW50ID0gb3B0cy5jb250YWluZXJbXCJzY3JvbGxcIiArIHNjcm9sbERpcmVjdGlvbl07IC8qIEdFVCAqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICQucG9zaXRpb24oKSB2YWx1ZXMgYXJlIHJlbGF0aXZlIHRvIHRoZSBjb250YWluZXIncyBjdXJyZW50bHkgdmlld2FibGUgYXJlYSAod2l0aG91dCB0YWtpbmcgaW50byBhY2NvdW50IHRoZSBjb250YWluZXIncyB0cnVlIGRpbWVuc2lvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tIHNheSwgZm9yIGV4YW1wbGUsIGlmIHRoZSBjb250YWluZXIgd2FzIG5vdCBvdmVyZmxvd2luZykuIFRodXMsIHRoZSBzY3JvbGwgZW5kIHZhbHVlIGlzIHRoZSBzdW0gb2YgdGhlIGNoaWxkIGVsZW1lbnQncyBwb3NpdGlvbiAqYW5kKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHNjcm9sbCBjb250YWluZXIncyBjdXJyZW50IHNjcm9sbCBwb3NpdGlvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IGpRdWVyeSBkb2VzIG5vdCBvZmZlciBhIHV0aWxpdHkgYWxpYXMgZm9yICQucG9zaXRpb24oKSwgc28gd2UgaGF2ZSB0byBpbmN1ciBqUXVlcnkgb2JqZWN0IGNvbnZlcnNpb24gaGVyZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoaXMgc3luY3MgdXAgd2l0aCBhbiBlbnN1aW5nIGJhdGNoIG9mIEdFVHMsIHNvIGl0IGZvcnR1bmF0ZWx5IGRvZXMgbm90IHRyaWdnZXIgbGF5b3V0IHRocmFzaGluZy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvc2l0aW9uRW5kID0gKHNjcm9sbFBvc2l0aW9uQ3VycmVudCArICQoZWxlbWVudCkucG9zaXRpb24oKVtzY3JvbGxEaXJlY3Rpb24udG9Mb3dlckNhc2UoKV0pICsgc2Nyb2xsT2Zmc2V0OyAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgYSB2YWx1ZSBvdGhlciB0aGFuIGEgalF1ZXJ5IG9iamVjdCBvciBhIHJhdyBET00gZWxlbWVudCB3YXMgcGFzc2VkIGluLCBkZWZhdWx0IHRvIG51bGwgc28gdGhhdCB0aGlzIG9wdGlvbiBpcyBpZ25vcmVkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5jb250YWluZXIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIHdpbmRvdyBpdHNlbGYgaXMgYmVpbmcgc2Nyb2xsZWQgLS0gbm90IGEgY29udGFpbmluZyBlbGVtZW50IC0tIHBlcmZvcm0gYSBsaXZlIHNjcm9sbCBwb3NpdGlvbiBsb29rdXAgdXNpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGFwcHJvcHJpYXRlIGNhY2hlZCBwcm9wZXJ0eSBuYW1lcyAod2hpY2ggZGlmZmVyIGJhc2VkIG9uIGJyb3dzZXIgdHlwZSkuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvc2l0aW9uQ3VycmVudCA9IFZlbG9jaXR5LlN0YXRlLnNjcm9sbEFuY2hvcltWZWxvY2l0eS5TdGF0ZVtcInNjcm9sbFByb3BlcnR5XCIgKyBzY3JvbGxEaXJlY3Rpb25dXTsgLyogR0VUICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFdoZW4gc2Nyb2xsaW5nIHRoZSBicm93c2VyIHdpbmRvdywgY2FjaGUgdGhlIGFsdGVybmF0ZSBheGlzJ3MgY3VycmVudCB2YWx1ZSBzaW5jZSB3aW5kb3cuc2Nyb2xsVG8oKSBkb2Vzbid0IGxldCB1cyBjaGFuZ2Ugb25seSBvbmUgdmFsdWUgYXQgYSB0aW1lLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb3NpdGlvbkN1cnJlbnRBbHRlcm5hdGUgPSBWZWxvY2l0eS5TdGF0ZS5zY3JvbGxBbmNob3JbVmVsb2NpdHkuU3RhdGVbXCJzY3JvbGxQcm9wZXJ0eVwiICsgKHNjcm9sbERpcmVjdGlvbiA9PT0gXCJMZWZ0XCIgPyBcIlRvcFwiIDogXCJMZWZ0XCIpXV07IC8qIEdFVCAqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogVW5saWtlICQucG9zaXRpb24oKSwgJC5vZmZzZXQoKSB2YWx1ZXMgYXJlIHJlbGF0aXZlIHRvIHRoZSBicm93c2VyIHdpbmRvdydzIHRydWUgZGltZW5zaW9ucyAtLSBub3QgbWVyZWx5IGl0cyBjdXJyZW50bHkgdmlld2FibGUgYXJlYSAtLVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBhbmQgdGhlcmVmb3JlIGVuZCB2YWx1ZXMgZG8gbm90IG5lZWQgdG8gYmUgY29tcG91bmRlZCBvbnRvIGN1cnJlbnQgdmFsdWVzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb3NpdGlvbkVuZCA9ICQoZWxlbWVudCkub2Zmc2V0KClbc2Nyb2xsRGlyZWN0aW9uLnRvTG93ZXJDYXNlKCldICsgc2Nyb2xsT2Zmc2V0OyAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIFNpbmNlIHRoZXJlJ3Mgb25seSBvbmUgZm9ybWF0IHRoYXQgc2Nyb2xsJ3MgYXNzb2NpYXRlZCB0d2VlbnNDb250YWluZXIgY2FuIHRha2UsIHdlIGNyZWF0ZSBpdCBtYW51YWxseS4gKi9cclxuICAgICAgICAgICAgICAgICAgICB0d2VlbnNDb250YWluZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFByb3BlcnR5VmFsdWU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZTogc2Nyb2xsUG9zaXRpb25DdXJyZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlOiBzY3JvbGxQb3NpdGlvbkN1cnJlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZTogc2Nyb2xsUG9zaXRpb25FbmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml0VHlwZTogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogb3B0cy5lYXNpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxEYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiBvcHRzLmNvbnRhaW5lcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246IHNjcm9sbERpcmVjdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHRlcm5hdGVWYWx1ZTogc2Nyb2xsUG9zaXRpb25DdXJyZW50QWx0ZXJuYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoVmVsb2NpdHkuZGVidWcpIGNvbnNvbGUubG9nKFwidHdlZW5zQ29udGFpbmVyIChzY3JvbGwpOiBcIiwgdHdlZW5zQ29udGFpbmVyLnNjcm9sbCwgZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgVHdlZW4gRGF0YSBDb25zdHJ1Y3Rpb24gKGZvciBSZXZlcnNlKVxyXG4gICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIFJldmVyc2UgYWN0cyBsaWtlIGEgXCJzdGFydFwiIGFjdGlvbiBpbiB0aGF0IGEgcHJvcGVydHkgbWFwIGlzIGFuaW1hdGVkIHRvd2FyZC4gVGhlIG9ubHkgZGlmZmVyZW5jZSBpc1xyXG4gICAgICAgICAgICAgICAgICAgdGhhdCB0aGUgcHJvcGVydHkgbWFwIHVzZWQgZm9yIHJldmVyc2UgaXMgdGhlIGludmVyc2Ugb2YgdGhlIG1hcCB1c2VkIGluIHRoZSBwcmV2aW91cyBjYWxsLiBUaHVzLCB3ZSBtYW5pcHVsYXRlXHJcbiAgICAgICAgICAgICAgICAgICB0aGUgcHJldmlvdXMgY2FsbCB0byBjb25zdHJ1Y3Qgb3VyIG5ldyBtYXA6IHVzZSB0aGUgcHJldmlvdXMgbWFwJ3MgZW5kIHZhbHVlcyBhcyBvdXIgbmV3IG1hcCdzIHN0YXJ0IHZhbHVlcy4gQ29weSBvdmVyIGFsbCBvdGhlciBkYXRhLiAqL1xyXG4gICAgICAgICAgICAgICAgLyogTm90ZTogUmV2ZXJzZSBjYW4gYmUgZGlyZWN0bHkgY2FsbGVkIHZpYSB0aGUgXCJyZXZlcnNlXCIgcGFyYW1ldGVyLCBvciBpdCBjYW4gYmUgaW5kaXJlY3RseSB0cmlnZ2VyZWQgdmlhIHRoZSBsb29wIG9wdGlvbi4gKExvb3BzIGFyZSBjb21wb3NlZCBvZiBtdWx0aXBsZSByZXZlcnNlcy4pICovXHJcbiAgICAgICAgICAgICAgICAvKiBOb3RlOiBSZXZlcnNlIGNhbGxzIGRvIG5vdCBuZWVkIHRvIGJlIGNvbnNlY3V0aXZlbHkgY2hhaW5lZCBvbnRvIGEgY3VycmVudGx5LWFuaW1hdGluZyBlbGVtZW50IGluIG9yZGVyIHRvIG9wZXJhdGUgb24gY2FjaGVkIHZhbHVlcztcclxuICAgICAgICAgICAgICAgICAgIHRoZXJlIGlzIG5vIGhhcm0gdG8gcmV2ZXJzZSBiZWluZyBjYWxsZWQgb24gYSBwb3RlbnRpYWxseSBzdGFsZSBkYXRhIGNhY2hlIHNpbmNlIHJldmVyc2UncyBiZWhhdmlvciBpcyBzaW1wbHkgZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgICAgYXMgcmV2ZXJ0aW5nIHRvIHRoZSBlbGVtZW50J3MgdmFsdWVzIGFzIHRoZXkgd2VyZSBwcmlvciB0byB0aGUgcHJldmlvdXMgKlZlbG9jaXR5KiBjYWxsLiAqL1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IFwicmV2ZXJzZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogQWJvcnQgaWYgdGhlcmUgaXMgbm8gcHJpb3IgYW5pbWF0aW9uIGRhdGEgdG8gcmV2ZXJzZSB0by4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIURhdGEoZWxlbWVudCkudHdlZW5zQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIERlcXVldWUgdGhlIGVsZW1lbnQgc28gdGhhdCB0aGlzIHF1ZXVlIGVudHJ5IHJlbGVhc2VzIGl0c2VsZiBpbW1lZGlhdGVseSwgYWxsb3dpbmcgc3Vic2VxdWVudCBxdWV1ZSBlbnRyaWVzIHRvIHJ1bi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgJC5kZXF1ZXVlKGVsZW1lbnQsIG9wdHMucXVldWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgT3B0aW9ucyBQYXJzaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZSBlbGVtZW50IHdhcyBoaWRkZW4gdmlhIHRoZSBkaXNwbGF5IG9wdGlvbiBpbiB0aGUgcHJldmlvdXMgY2FsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2ZXJ0IGRpc3BsYXkgdG8gXCJhdXRvXCIgcHJpb3IgdG8gcmV2ZXJzYWwgc28gdGhhdCB0aGUgZWxlbWVudCBpcyB2aXNpYmxlIGFnYWluLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGF0YShlbGVtZW50KS5vcHRzLmRpc3BsYXkgPT09IFwibm9uZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhKGVsZW1lbnQpLm9wdHMuZGlzcGxheSA9IFwiYXV0b1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGF0YShlbGVtZW50KS5vcHRzLnZpc2liaWxpdHkgPT09IFwiaGlkZGVuXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGEoZWxlbWVudCkub3B0cy52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZSBsb29wIG9wdGlvbiB3YXMgc2V0IGluIHRoZSBwcmV2aW91cyBjYWxsLCBkaXNhYmxlIGl0IHNvIHRoYXQgXCJyZXZlcnNlXCIgY2FsbHMgYXJlbid0IHJlY3Vyc2l2ZWx5IGdlbmVyYXRlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVydGhlciwgcmVtb3ZlIHRoZSBwcmV2aW91cyBjYWxsJ3MgY2FsbGJhY2sgb3B0aW9uczsgdHlwaWNhbGx5LCB1c2VycyBkbyBub3Qgd2FudCB0aGVzZSB0byBiZSByZWZpcmVkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEYXRhKGVsZW1lbnQpLm9wdHMubG9vcCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEYXRhKGVsZW1lbnQpLm9wdHMuYmVnaW4gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEYXRhKGVsZW1lbnQpLm9wdHMuY29tcGxldGUgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogU2luY2Ugd2UncmUgZXh0ZW5kaW5nIGFuIG9wdHMgb2JqZWN0IHRoYXQgaGFzIGFscmVhZHkgYmVlbiBleHRlbmRlZCB3aXRoIHRoZSBkZWZhdWx0cyBvcHRpb25zIG9iamVjdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgd2UgcmVtb3ZlIG5vbi1leHBsaWNpdGx5LWRlZmluZWQgcHJvcGVydGllcyB0aGF0IGFyZSBhdXRvLWFzc2lnbmVkIHZhbHVlcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zLmVhc2luZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9wdHMuZWFzaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMuZHVyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRzLmR1cmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBUaGUgb3B0cyBvYmplY3QgdXNlZCBmb3IgcmV2ZXJzYWwgaXMgYW4gZXh0ZW5zaW9uIG9mIHRoZSBvcHRpb25zIG9iamVjdCBvcHRpb25hbGx5IHBhc3NlZCBpbnRvIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2ZXJzZSBjYWxsIHBsdXMgdGhlIG9wdGlvbnMgdXNlZCBpbiB0aGUgcHJldmlvdXMgVmVsb2NpdHkgY2FsbC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0cyA9ICQuZXh0ZW5kKHt9LCBEYXRhKGVsZW1lbnQpLm9wdHMsIG9wdHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW5zIENvbnRhaW5lciBSZWNvbnN0cnVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogQ3JlYXRlIGEgZGVlcHkgY29weSAoaW5kaWNhdGVkIHZpYSB0aGUgdHJ1ZSBmbGFnKSBvZiB0aGUgcHJldmlvdXMgY2FsbCdzIHR3ZWVuc0NvbnRhaW5lci4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RUd2VlbnNDb250YWluZXIgPSAkLmV4dGVuZCh0cnVlLCB7fSwgRGF0YShlbGVtZW50KS50d2VlbnNDb250YWluZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogTWFuaXB1bGF0ZSB0aGUgcHJldmlvdXMgdHdlZW5zQ29udGFpbmVyIGJ5IHJlcGxhY2luZyBpdHMgZW5kIHZhbHVlcyBhbmQgY3VycmVudFZhbHVlcyB3aXRoIGl0cyBzdGFydCB2YWx1ZXMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGxhc3RUd2VlbiBpbiBsYXN0VHdlZW5zQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJbiBhZGRpdGlvbiB0byB0d2VlbiBkYXRhLCB0d2VlbnNDb250YWluZXJzIGNvbnRhaW4gYW4gZWxlbWVudCBwcm9wZXJ0eSB0aGF0IHdlIGlnbm9yZSBoZXJlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RUd2VlbiAhPT0gXCJlbGVtZW50XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdFN0YXJ0VmFsdWUgPSBsYXN0VHdlZW5zQ29udGFpbmVyW2xhc3RUd2Vlbl0uc3RhcnRWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFR3ZWVuc0NvbnRhaW5lcltsYXN0VHdlZW5dLnN0YXJ0VmFsdWUgPSBsYXN0VHdlZW5zQ29udGFpbmVyW2xhc3RUd2Vlbl0uY3VycmVudFZhbHVlID0gbGFzdFR3ZWVuc0NvbnRhaW5lcltsYXN0VHdlZW5dLmVuZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RUd2VlbnNDb250YWluZXJbbGFzdFR3ZWVuXS5lbmRWYWx1ZSA9IGxhc3RTdGFydFZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBFYXNpbmcgaXMgdGhlIG9ubHkgb3B0aW9uIHRoYXQgZW1iZWRzIGludG8gdGhlIGluZGl2aWR1YWwgdHdlZW4gZGF0YSAoc2luY2UgaXQgY2FuIGJlIGRlZmluZWQgb24gYSBwZXItcHJvcGVydHkgYmFzaXMpLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFjY29yZGluZ2x5LCBldmVyeSBwcm9wZXJ0eSdzIGVhc2luZyB2YWx1ZSBtdXN0IGJlIHVwZGF0ZWQgd2hlbiBhbiBvcHRpb25zIG9iamVjdCBpcyBwYXNzZWQgaW4gd2l0aCBhIHJldmVyc2UgY2FsbC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaGUgc2lkZSBlZmZlY3Qgb2YgdGhpcyBleHRlbnNpYmlsaXR5IGlzIHRoYXQgYWxsIHBlci1wcm9wZXJ0eSBlYXNpbmcgdmFsdWVzIGFyZSBmb3JjZWZ1bGx5IHJlc2V0IHRvIHRoZSBuZXcgdmFsdWUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFUeXBlLmlzRW1wdHlPYmplY3Qob3B0aW9ucykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFR3ZWVuc0NvbnRhaW5lcltsYXN0VHdlZW5dLmVhc2luZyA9IG9wdHMuZWFzaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFZlbG9jaXR5LmRlYnVnKSBjb25zb2xlLmxvZyhcInJldmVyc2UgdHdlZW5zQ29udGFpbmVyIChcIiArIGxhc3RUd2VlbiArIFwiKTogXCIgKyBKU09OLnN0cmluZ2lmeShsYXN0VHdlZW5zQ29udGFpbmVyW2xhc3RUd2Vlbl0pLCBlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHdlZW5zQ29udGFpbmVyID0gbGFzdFR3ZWVuc0NvbnRhaW5lcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICBUd2VlbiBEYXRhIENvbnN0cnVjdGlvbiAoZm9yIFN0YXJ0KVxyXG4gICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IFwic3RhcnRcIikge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZSBUcmFuc2ZlcnJpbmdcclxuICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGlzIHF1ZXVlIGVudHJ5IGZvbGxvd3MgYSBwcmV2aW91cyBWZWxvY2l0eS1pbml0aWF0ZWQgcXVldWUgZW50cnkgKmFuZCogaWYgdGhpcyBlbnRyeSB3YXMgY3JlYXRlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIHRoZSBlbGVtZW50IHdhcyBpbiB0aGUgcHJvY2VzcyBvZiBiZWluZyBhbmltYXRlZCBieSBWZWxvY2l0eSwgdGhlbiB0aGlzIGN1cnJlbnQgY2FsbCBpcyBzYWZlIHRvIHVzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgIHRoZSBlbmQgdmFsdWVzIGZyb20gdGhlIHByaW9yIGNhbGwgYXMgaXRzIHN0YXJ0IHZhbHVlcy4gVmVsb2NpdHkgYXR0ZW1wdHMgdG8gcGVyZm9ybSB0aGlzIHZhbHVlIHRyYW5zZmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgcHJvY2VzcyB3aGVuZXZlciBwb3NzaWJsZSBpbiBvcmRlciB0byBhdm9pZCByZXF1ZXJ5aW5nIHRoZSBET00uICovXHJcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgdmFsdWVzIGFyZW4ndCB0cmFuc2ZlcnJlZCBmcm9tIGEgcHJpb3IgY2FsbCBhbmQgc3RhcnQgdmFsdWVzIHdlcmUgbm90IGZvcmNlZmVkIGJ5IHRoZSB1c2VyIChtb3JlIG9uIHRoaXMgYmVsb3cpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgIHRoZW4gdGhlIERPTSBpcyBxdWVyaWVkIGZvciB0aGUgZWxlbWVudCdzIGN1cnJlbnQgdmFsdWVzIGFzIGEgbGFzdCByZXNvcnQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogQ29udmVyc2VseSwgYW5pbWF0aW9uIHJldmVyc2FsIChhbmQgbG9vcGluZykgKmFsd2F5cyogcGVyZm9ybSBpbnRlci1jYWxsIHZhbHVlIHRyYW5zZmVyczsgdGhleSBuZXZlciByZXF1ZXJ5IHRoZSBET00uICovXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RUd2VlbnNDb250YWluZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIFRoZSBwZXItZWxlbWVudCBpc0FuaW1hdGluZyBmbGFnIGlzIHVzZWQgdG8gaW5kaWNhdGUgd2hldGhlciBpdCdzIHNhZmUgKGkuZS4gdGhlIGRhdGEgaXNuJ3Qgc3RhbGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgdG8gdHJhbnNmZXIgb3ZlciBlbmQgdmFsdWVzIHRvIHVzZSBhcyBzdGFydCB2YWx1ZXMuIElmIGl0J3Mgc2V0IHRvIHRydWUgYW5kIHRoZXJlIGlzIGEgcHJldmlvdXNcclxuICAgICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eSBjYWxsIHRvIHB1bGwgdmFsdWVzIGZyb20sIGRvIHNvLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChEYXRhKGVsZW1lbnQpLnR3ZWVuc0NvbnRhaW5lciAmJiBEYXRhKGVsZW1lbnQpLmlzQW5pbWF0aW5nID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RUd2VlbnNDb250YWluZXIgPSBEYXRhKGVsZW1lbnQpLnR3ZWVuc0NvbnRhaW5lcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICBUd2VlbiBEYXRhIENhbGN1bGF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBUaGlzIGZ1bmN0aW9uIHBhcnNlcyBwcm9wZXJ0eSBkYXRhIGFuZCBkZWZhdWx0cyBlbmRWYWx1ZSwgZWFzaW5nLCBhbmQgc3RhcnRWYWx1ZSBhcyBhcHByb3ByaWF0ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAvKiBQcm9wZXJ0eSBtYXAgdmFsdWVzIGNhbiBlaXRoZXIgdGFrZSB0aGUgZm9ybSBvZiAxKSBhIHNpbmdsZSB2YWx1ZSByZXByZXNlbnRpbmcgdGhlIGVuZCB2YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICBvciAyKSBhbiBhcnJheSBpbiB0aGUgZm9ybSBvZiBbIGVuZFZhbHVlLCBbLCBlYXNpbmddIFssIHN0YXJ0VmFsdWVdIF0uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgVGhlIG9wdGlvbmFsIHRoaXJkIHBhcmFtZXRlciBpcyBhIGZvcmNlZmVkIHN0YXJ0VmFsdWUgdG8gYmUgdXNlZCBpbnN0ZWFkIG9mIHF1ZXJ5aW5nIHRoZSBET00gZm9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgdGhlIGVsZW1lbnQncyBjdXJyZW50IHZhbHVlLiBSZWFkIFZlbG9jaXR5J3MgZG9jbWVudGF0aW9uIHRvIGxlYXJuIG1vcmUgYWJvdXQgZm9yY2VmZWVkaW5nOiBWZWxvY2l0eUpTLm9yZy8jZm9yY2VmZWVkaW5nICovXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VQcm9wZXJ0eVZhbHVlICh2YWx1ZURhdGEsIHNraXBSZXNvbHZpbmdFYXNpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZFZhbHVlID0gdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nID0gdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEhhbmRsZSB0aGUgYXJyYXkgZm9ybWF0LCB3aGljaCBjYW4gYmUgc3RydWN0dXJlZCBhcyBvbmUgb2YgdGhyZWUgcG90ZW50aWFsIG92ZXJsb2FkczpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgQSkgWyBlbmRWYWx1ZSwgZWFzaW5nLCBzdGFydFZhbHVlIF0sIEIpIFsgZW5kVmFsdWUsIGVhc2luZyBdLCBvciBDKSBbIGVuZFZhbHVlLCBzdGFydFZhbHVlIF0gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFR5cGUuaXNBcnJheSh2YWx1ZURhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBlbmRWYWx1ZSBpcyBhbHdheXMgdGhlIGZpcnN0IGl0ZW0gaW4gdGhlIGFycmF5LiBEb24ndCBib3RoZXIgdmFsaWRhdGluZyBlbmRWYWx1ZSdzIHZhbHVlIG5vd1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2luY2UgdGhlIGVuc3VpbmcgcHJvcGVydHkgY3ljbGluZyBsb2dpYyBkb2VzIHRoYXQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZSA9IHZhbHVlRGF0YVswXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBUd28taXRlbSBhcnJheSBmb3JtYXQ6IElmIHRoZSBzZWNvbmQgaXRlbSBpcyBhIG51bWJlciwgZnVuY3Rpb24sIG9yIGhleCBzdHJpbmcsIHRyZWF0IGl0IGFzIGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0IHZhbHVlIHNpbmNlIGVhc2luZ3MgY2FuIG9ubHkgYmUgbm9uLWhleCBzdHJpbmdzIG9yIGFycmF5cy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoIVR5cGUuaXNBcnJheSh2YWx1ZURhdGFbMV0pICYmIC9eW1xcZC1dLy50ZXN0KHZhbHVlRGF0YVsxXSkpIHx8IFR5cGUuaXNGdW5jdGlvbih2YWx1ZURhdGFbMV0pIHx8IENTUy5SZWdFeC5pc0hleC50ZXN0KHZhbHVlRGF0YVsxXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlID0gdmFsdWVEYXRhWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogVHdvIG9yIHRocmVlLWl0ZW0gYXJyYXk6IElmIHRoZSBzZWNvbmQgaXRlbSBpcyBhIG5vbi1oZXggc3RyaW5nIG9yIGFuIGFycmF5LCB0cmVhdCBpdCBhcyBhbiBlYXNpbmcuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKChUeXBlLmlzU3RyaW5nKHZhbHVlRGF0YVsxXSkgJiYgIUNTUy5SZWdFeC5pc0hleC50ZXN0KHZhbHVlRGF0YVsxXSkpIHx8IFR5cGUuaXNBcnJheSh2YWx1ZURhdGFbMV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nID0gc2tpcFJlc29sdmluZ0Vhc2luZyA/IHZhbHVlRGF0YVsxXSA6IGdldEVhc2luZyh2YWx1ZURhdGFbMV0sIG9wdHMuZHVyYXRpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBEb24ndCBib3RoZXIgdmFsaWRhdGluZyBzdGFydFZhbHVlJ3MgdmFsdWUgbm93IHNpbmNlIHRoZSBlbnN1aW5nIHByb3BlcnR5IGN5Y2xpbmcgbG9naWMgaW5oZXJlbnRseSBkb2VzIHRoYXQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlRGF0YVsyXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VmFsdWUgPSB2YWx1ZURhdGFbMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBIYW5kbGUgdGhlIHNpbmdsZS12YWx1ZSBmb3JtYXQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZSA9IHZhbHVlRGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogRGVmYXVsdCB0byB0aGUgY2FsbCdzIGVhc2luZyBpZiBhIHBlci1wcm9wZXJ0eSBlYXNpbmcgdHlwZSB3YXMgbm90IGRlZmluZWQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2tpcFJlc29sdmluZ0Vhc2luZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nID0gZWFzaW5nIHx8IG9wdHMuZWFzaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiBmdW5jdGlvbnMgd2VyZSBwYXNzZWQgaW4gYXMgdmFsdWVzLCBwYXNzIHRoZSBmdW5jdGlvbiB0aGUgY3VycmVudCBlbGVtZW50IGFzIGl0cyBjb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwbHVzIHRoZSBlbGVtZW50J3MgaW5kZXggYW5kIHRoZSBlbGVtZW50IHNldCdzIHNpemUgYXMgYXJndW1lbnRzLiBUaGVuLCBhc3NpZ24gdGhlIHJldHVybmVkIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoVHlwZS5pc0Z1bmN0aW9uKGVuZFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWUgPSBlbmRWYWx1ZS5jYWxsKGVsZW1lbnQsIGVsZW1lbnRzSW5kZXgsIGVsZW1lbnRzTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFR5cGUuaXNGdW5jdGlvbihzdGFydFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZSA9IHN0YXJ0VmFsdWUuY2FsbChlbGVtZW50LCBlbGVtZW50c0luZGV4LCBlbGVtZW50c0xlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEFsbG93IHN0YXJ0VmFsdWUgdG8gYmUgbGVmdCBhcyB1bmRlZmluZWQgdG8gaW5kaWNhdGUgdG8gdGhlIGVuc3VpbmcgY29kZSB0aGF0IGl0cyB2YWx1ZSB3YXMgbm90IGZvcmNlZmVkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBlbmRWYWx1ZSB8fCAwLCBlYXNpbmcsIHN0YXJ0VmFsdWUgXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIEN5Y2xlIHRocm91Z2ggZWFjaCBwcm9wZXJ0eSBpbiB0aGUgbWFwLCBsb29raW5nIGZvciBzaG9ydGhhbmQgY29sb3IgcHJvcGVydGllcyAoZS5nLiBcImNvbG9yXCIgYXMgb3Bwb3NlZCB0byBcImNvbG9yUmVkXCIpLiBJbmplY3QgdGhlIGNvcnJlc3BvbmRpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICBjb2xvclJlZCwgY29sb3JHcmVlbiwgYW5kIGNvbG9yQmx1ZSBSR0IgY29tcG9uZW50IHR3ZWVucyBpbnRvIHRoZSBwcm9wZXJ0aWVzTWFwICh3aGljaCBWZWxvY2l0eSB1bmRlcnN0YW5kcykgYW5kIHJlbW92ZSB0aGUgc2hvcnRoYW5kIHByb3BlcnR5LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChwcm9wZXJ0aWVzTWFwLCBmdW5jdGlvbihwcm9wZXJ0eSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogRmluZCBzaG9ydGhhbmQgY29sb3IgcHJvcGVydGllcyB0aGF0IGhhdmUgYmVlbiBwYXNzZWQgYSBoZXggc3RyaW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoUmVnRXhwKFwiXlwiICsgQ1NTLkxpc3RzLmNvbG9ycy5qb2luKFwiJHxeXCIpICsgXCIkXCIpLnRlc3QocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBQYXJzZSB0aGUgdmFsdWUgZGF0YSBmb3IgZWFjaCBzaG9ydGhhbmQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVEYXRhID0gcGFyc2VQcm9wZXJ0eVZhbHVlKHZhbHVlLCB0cnVlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZSA9IHZhbHVlRGF0YVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmcgPSB2YWx1ZURhdGFbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZSA9IHZhbHVlRGF0YVsyXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQ1NTLlJlZ0V4LmlzSGV4LnRlc3QoZW5kVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQ29udmVydCB0aGUgaGV4IHN0cmluZ3MgaW50byB0aGVpciBSR0IgY29tcG9uZW50IGFycmF5cy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3JDb21wb25lbnRzID0gWyBcIlJlZFwiLCBcIkdyZWVuXCIsIFwiQmx1ZVwiIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlUkdCID0gQ1NTLlZhbHVlcy5oZXhUb1JnYihlbmRWYWx1ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VmFsdWVSR0IgPSBzdGFydFZhbHVlID8gQ1NTLlZhbHVlcy5oZXhUb1JnYihzdGFydFZhbHVlKSA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSW5qZWN0IHRoZSBSR0IgY29tcG9uZW50IHR3ZWVucyBpbnRvIHByb3BlcnRpZXNNYXAuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2xvckNvbXBvbmVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFBcnJheSA9IFsgZW5kVmFsdWVSR0JbaV0gXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlYXNpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFBcnJheS5wdXNoKGVhc2luZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGFydFZhbHVlUkdCICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFBcnJheS5wdXNoKHN0YXJ0VmFsdWVSR0JbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzTWFwW3Byb3BlcnR5ICsgY29sb3JDb21wb25lbnRzW2ldXSA9IGRhdGFBcnJheTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJlbW92ZSB0aGUgaW50ZXJtZWRpYXJ5IHNob3J0aGFuZCBwcm9wZXJ0eSBlbnRyeSBub3cgdGhhdCB3ZSd2ZSBwcm9jZXNzZWQgaXQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHByb3BlcnRpZXNNYXBbcHJvcGVydHldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIENyZWF0ZSBhIHR3ZWVuIG91dCBvZiBlYWNoIHByb3BlcnR5LCBhbmQgYXBwZW5kIGl0cyBhc3NvY2lhdGVkIGRhdGEgdG8gdHdlZW5zQ29udGFpbmVyLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIHByb3BlcnRpZXNNYXApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBTdGFydCBWYWx1ZSBTb3VyY2luZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFBhcnNlIG91dCBlbmRWYWx1ZSwgZWFzaW5nLCBhbmQgc3RhcnRWYWx1ZSBmcm9tIHRoZSBwcm9wZXJ0eSdzIGRhdGEuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZURhdGEgPSBwYXJzZVByb3BlcnR5VmFsdWUocHJvcGVydGllc01hcFtwcm9wZXJ0eV0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWUgPSB2YWx1ZURhdGFbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmcgPSB2YWx1ZURhdGFbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlID0gdmFsdWVEYXRhWzJdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogTm93IHRoYXQgdGhlIG9yaWdpbmFsIHByb3BlcnR5IG5hbWUncyBmb3JtYXQgaGFzIGJlZW4gdXNlZCBmb3IgdGhlIHBhcnNlUHJvcGVydHlWYWx1ZSgpIGxvb2t1cCBhYm92ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgd2UgZm9yY2UgdGhlIHByb3BlcnR5IHRvIGl0cyBjYW1lbENhc2Ugc3R5bGluZyB0byBub3JtYWxpemUgaXQgZm9yIG1hbmlwdWxhdGlvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkgPSBDU1MuTmFtZXMuY2FtZWxDYXNlKHByb3BlcnR5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEluIGNhc2UgdGhpcyBwcm9wZXJ0eSBpcyBhIGhvb2ssIHRoZXJlIGFyZSBjaXJjdW1zdGFuY2VzIHdoZXJlIHdlIHdpbGwgaW50ZW5kIHRvIHdvcmsgb24gdGhlIGhvb2sncyByb290IHByb3BlcnR5IGFuZCBub3QgdGhlIGhvb2tlZCBzdWJwcm9wZXJ0eS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJvb3RQcm9wZXJ0eSA9IENTUy5Ib29rcy5nZXRSb290KHByb3BlcnR5KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBQcm9wZXJ0aWVzIHRoYXQgYXJlIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIgKGFuZCBkbyBub3QgaGF2ZSBhbiBhc3NvY2lhdGVkIG5vcm1hbGl6YXRpb24pIHdpbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5oZXJlbnRseSBwcm9kdWNlIG5vIHN0eWxlIGNoYW5nZXMgd2hlbiBzZXQsIHNvIHRoZXkgYXJlIHNraXBwZWQgaW4gb3JkZXIgdG8gZGVjcmVhc2UgYW5pbWF0aW9uIHRpY2sgb3ZlcmhlYWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFByb3BlcnR5IHN1cHBvcnQgaXMgZGV0ZXJtaW5lZCB2aWEgcHJlZml4Q2hlY2soKSwgd2hpY2ggcmV0dXJucyBhIGZhbHNlIGZsYWcgd2hlbiBubyBzdXBwb3J0ZWQgaXMgZGV0ZWN0ZWQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IFNpbmNlIFNWRyBlbGVtZW50cyBoYXZlIHNvbWUgb2YgdGhlaXIgcHJvcGVydGllcyBkaXJlY3RseSBhcHBsaWVkIGFzIEhUTUwgYXR0cmlidXRlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlcmUgaXMgbm8gd2F5IHRvIGNoZWNrIGZvciB0aGVpciBleHBsaWNpdCBicm93c2VyIHN1cHBvcnQsIGFuZCBzbyB3ZSBza2lwIHNraXAgdGhpcyBjaGVjayBmb3IgdGhlbS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFEYXRhKGVsZW1lbnQpLmlzU1ZHICYmIENTUy5OYW1lcy5wcmVmaXhDaGVjayhyb290UHJvcGVydHkpWzFdID09PSBmYWxzZSAmJiBDU1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtyb290UHJvcGVydHldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChWZWxvY2l0eS5kZWJ1ZykgY29uc29sZS5sb2coXCJTa2lwcGluZyBbXCIgKyByb290UHJvcGVydHkgKyBcIl0gZHVlIHRvIGEgbGFjayBvZiBicm93c2VyIHN1cHBvcnQuXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGUgZGlzcGxheSBvcHRpb24gaXMgYmVpbmcgc2V0IHRvIGEgbm9uLVwibm9uZVwiIChlLmcuIFwiYmxvY2tcIikgYW5kIG9wYWNpdHkgKGZpbHRlciBvbiBJRTw9OCkgaXMgYmVpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZWQgdG8gYW4gZW5kVmFsdWUgb2Ygbm9uLXplcm8sIHRoZSB1c2VyJ3MgaW50ZW50aW9uIGlzIHRvIGZhZGUgaW4gZnJvbSBpbnZpc2libGUsIHRodXMgd2UgZm9yY2VmZWVkIG9wYWNpdHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgYSBzdGFydFZhbHVlIG9mIDAgaWYgaXRzIHN0YXJ0VmFsdWUgaGFzbid0IGFscmVhZHkgYmVlbiBzb3VyY2VkIGJ5IHZhbHVlIHRyYW5zZmVycmluZyBvciBwcmlvciBmb3JjZWZlZWRpbmcuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKG9wdHMuZGlzcGxheSAhPT0gdW5kZWZpbmVkICYmIG9wdHMuZGlzcGxheSAhPT0gbnVsbCAmJiBvcHRzLmRpc3BsYXkgIT09IFwibm9uZVwiKSB8fCAob3B0cy52aXNpYmlsaXR5ICE9PSB1bmRlZmluZWQgJiYgb3B0cy52aXNpYmlsaXR5ICE9PSBcImhpZGRlblwiKSkgJiYgL29wYWNpdHl8ZmlsdGVyLy50ZXN0KHByb3BlcnR5KSAmJiAhc3RhcnRWYWx1ZSAmJiBlbmRWYWx1ZSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIHZhbHVlcyBoYXZlIGJlZW4gdHJhbnNmZXJyZWQgZnJvbSB0aGUgcHJldmlvdXMgVmVsb2NpdHkgY2FsbCwgZXh0cmFjdCB0aGUgZW5kVmFsdWUgYW5kIHJvb3RQcm9wZXJ0eVZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBhbGwgb2YgdGhlIGN1cnJlbnQgY2FsbCdzIHByb3BlcnRpZXMgdGhhdCB3ZXJlICphbHNvKiBhbmltYXRlZCBpbiB0aGUgcHJldmlvdXMgY2FsbC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogVmFsdWUgdHJhbnNmZXJyaW5nIGNhbiBvcHRpb25hbGx5IGJlIGRpc2FibGVkIGJ5IHRoZSB1c2VyIHZpYSB0aGUgX2NhY2hlVmFsdWVzIG9wdGlvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMuX2NhY2hlVmFsdWVzICYmIGxhc3RUd2VlbnNDb250YWluZXIgJiYgbGFzdFR3ZWVuc0NvbnRhaW5lcltwcm9wZXJ0eV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGFydFZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlID0gbGFzdFR3ZWVuc0NvbnRhaW5lcltwcm9wZXJ0eV0uZW5kVmFsdWUgKyBsYXN0VHdlZW5zQ29udGFpbmVyW3Byb3BlcnR5XS51bml0VHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBUaGUgcHJldmlvdXMgY2FsbCdzIHJvb3RQcm9wZXJ0eVZhbHVlIGlzIGV4dHJhY3RlZCBmcm9tIHRoZSBlbGVtZW50J3MgZGF0YSBjYWNoZSBzaW5jZSB0aGF0J3MgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZSBvZiByb290UHJvcGVydHlWYWx1ZSB0aGF0IGdldHMgZnJlc2hseSB1cGRhdGVkIGJ5IHRoZSB0d2VlbmluZyBwcm9jZXNzLCB3aGVyZWFzIHRoZSByb290UHJvcGVydHlWYWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNoZWQgdG8gdGhlIGluY29taW5nIGxhc3RUd2VlbnNDb250YWluZXIgaXMgZXF1YWwgdG8gdGhlIHJvb3QgcHJvcGVydHkncyB2YWx1ZSBwcmlvciB0byBhbnkgdHdlZW5pbmcuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZSA9IERhdGEoZWxlbWVudCkucm9vdFByb3BlcnR5VmFsdWVDYWNoZVtyb290UHJvcGVydHldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiB2YWx1ZXMgd2VyZSBub3QgdHJhbnNmZXJyZWQgZnJvbSBhIHByZXZpb3VzIFZlbG9jaXR5IGNhbGwsIHF1ZXJ5IHRoZSBET00gYXMgbmVlZGVkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSGFuZGxlIGhvb2tlZCBwcm9wZXJ0aWVzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKENTUy5Ib29rcy5yZWdpc3RlcmVkW3Byb3BlcnR5XSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0VmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZSA9IENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIHJvb3RQcm9wZXJ0eSk7IC8qIEdFVCAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBUaGUgZm9sbG93aW5nIGdldFByb3BlcnR5VmFsdWUoKSBjYWxsIGRvZXMgbm90IGFjdHVhbGx5IHRyaWdnZXIgYSBET00gcXVlcnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFByb3BlcnR5VmFsdWUoKSB3aWxsIGV4dHJhY3QgdGhlIGhvb2sgZnJvbSByb290UHJvcGVydHlWYWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZSA9IENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIHByb3BlcnR5LCByb290UHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgc3RhcnRWYWx1ZSBpcyBhbHJlYWR5IGRlZmluZWQgdmlhIGZvcmNlZmVlZGluZywgZG8gbm90IHF1ZXJ5IHRoZSBET00gZm9yIHRoZSByb290IHByb3BlcnR5J3MgdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdCBncmFiIHJvb3RQcm9wZXJ0eSdzIHplcm8tdmFsdWUgdGVtcGxhdGUgZnJvbSBDU1MuSG9va3MuIFRoaXMgb3ZlcndyaXRlcyB0aGUgZWxlbWVudCdzIGFjdHVhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QgcHJvcGVydHkgdmFsdWUgKGlmIG9uZSBpcyBzZXQpLCBidXQgdGhpcyBpcyBhY2NlcHRhYmxlIHNpbmNlIHRoZSBwcmltYXJ5IHJlYXNvbiB1c2VycyBmb3JjZWZlZWQgaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhdm9pZCBET00gcXVlcmllcywgYW5kIHRodXMgd2UgbGlrZXdpc2UgYXZvaWQgcXVlcnlpbmcgdGhlIERPTSBmb3IgdGhlIHJvb3QgcHJvcGVydHkncyB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBHcmFiIHRoaXMgaG9vaydzIHplcm8tdmFsdWUgdGVtcGxhdGUsIGUuZy4gXCIwcHggMHB4IDBweCBibGFja1wiLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZSA9IENTUy5Ib29rcy50ZW1wbGF0ZXNbcm9vdFByb3BlcnR5XVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBIYW5kbGUgbm9uLWhvb2tlZCBwcm9wZXJ0aWVzIHRoYXQgaGF2ZW4ndCBhbHJlYWR5IGJlZW4gZGVmaW5lZCB2aWEgZm9yY2VmZWVkaW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdGFydFZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlID0gQ1NTLmdldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgcHJvcGVydHkpOyAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlIERhdGEgRXh0cmFjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZXBhcmF0ZWRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlVW5pdFR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlVW5pdFR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRvciA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogU2VwYXJhdGVzIGEgcHJvcGVydHkgdmFsdWUgaW50byBpdHMgbnVtZXJpYyB2YWx1ZSBhbmQgaXRzIHVuaXQgdHlwZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc2VwYXJhdGVWYWx1ZSAocHJvcGVydHksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdW5pdFR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtZXJpY1ZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bWVyaWNWYWx1ZSA9ICh2YWx1ZSB8fCBcIjBcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogTWF0Y2ggdGhlIHVuaXQgdHlwZSBhdCB0aGUgZW5kIG9mIHRoZSB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvWyVBLXpdKyQvLCBmdW5jdGlvbihtYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBHcmFiIHRoZSB1bml0IHR5cGUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRUeXBlID0gbWF0Y2g7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTdHJpcCB0aGUgdW5pdCB0eXBlIG9mZiBvZiB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgbm8gdW5pdCB0eXBlIHdhcyBzdXBwbGllZCwgYXNzaWduIG9uZSB0aGF0IGlzIGFwcHJvcHJpYXRlIGZvciB0aGlzIHByb3BlcnR5IChlLmcuIFwiZGVnXCIgZm9yIHJvdGF0ZVogb3IgXCJweFwiIGZvciB3aWR0aCkuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXVuaXRUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdFR5cGUgPSBDU1MuVmFsdWVzLmdldFVuaXRUeXBlKHByb3BlcnR5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBudW1lcmljVmFsdWUsIHVuaXRUeXBlIF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFNlcGFyYXRlIHN0YXJ0VmFsdWUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcGFyYXRlZFZhbHVlID0gc2VwYXJhdGVWYWx1ZShwcm9wZXJ0eSwgc3RhcnRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VmFsdWUgPSBzZXBhcmF0ZWRWYWx1ZVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZVVuaXRUeXBlID0gc2VwYXJhdGVkVmFsdWVbMV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBTZXBhcmF0ZSBlbmRWYWx1ZSwgYW5kIGV4dHJhY3QgYSB2YWx1ZSBvcGVyYXRvciAoZS5nLiBcIis9XCIsIFwiLT1cIikgaWYgb25lIGV4aXN0cy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VwYXJhdGVkVmFsdWUgPSBzZXBhcmF0ZVZhbHVlKHByb3BlcnR5LCBlbmRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlID0gc2VwYXJhdGVkVmFsdWVbMF0ucmVwbGFjZSgvXihbKy1cXC8qXSk9LywgZnVuY3Rpb24obWF0Y2gsIHN1Yk1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRvciA9IHN1Yk1hdGNoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFN0cmlwIHRoZSBvcGVyYXRvciBvZmYgb2YgdGhlIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZVVuaXRUeXBlID0gc2VwYXJhdGVkVmFsdWVbMV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBQYXJzZSBmbG9hdCB2YWx1ZXMgZnJvbSBlbmRWYWx1ZSBhbmQgc3RhcnRWYWx1ZS4gRGVmYXVsdCB0byAwIGlmIE5hTiBpcyByZXR1cm5lZC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZSA9IHBhcnNlRmxvYXQoc3RhcnRWYWx1ZSkgfHwgMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWUgPSBwYXJzZUZsb2F0KGVuZFZhbHVlKSB8fCAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9wZXJ0eS1TcGVjaWZpYyBWYWx1ZSBDb252ZXJzaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEN1c3RvbSBzdXBwb3J0IGZvciBwcm9wZXJ0aWVzIHRoYXQgZG9uJ3QgYWN0dWFsbHkgYWNjZXB0IHRoZSAlIHVuaXQgdHlwZSwgYnV0IHdoZXJlIHBvbGx5ZmlsbGluZyBpcyB0cml2aWFsIGFuZCByZWxhdGl2ZWx5IGZvb2xwcm9vZi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZFZhbHVlVW5pdFR5cGUgPT09IFwiJVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBBICUtdmFsdWUgZm9udFNpemUvbGluZUhlaWdodCBpcyByZWxhdGl2ZSB0byB0aGUgcGFyZW50J3MgZm9udFNpemUgKGFzIG9wcG9zZWQgdG8gdGhlIHBhcmVudCdzIGRpbWVuc2lvbnMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpY2ggaXMgaWRlbnRpY2FsIHRvIHRoZSBlbSB1bml0J3MgYmVoYXZpb3IsIHNvIHdlIHBpZ2d5YmFjayBvZmYgb2YgdGhhdC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgvXihmb250U2l6ZXxsaW5lSGVpZ2h0KSQvLnRlc3QocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQ29udmVydCAlIGludG8gYW4gZW0gZGVjaW1hbCB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZSA9IGVuZFZhbHVlIC8gMTAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlVW5pdFR5cGUgPSBcImVtXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBGb3Igc2NhbGVYIGFuZCBzY2FsZVksIGNvbnZlcnQgdGhlIHZhbHVlIGludG8gaXRzIGRlY2ltYWwgZm9ybWF0IGFuZCBzdHJpcCBvZmYgdGhlIHVuaXQgdHlwZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoL15zY2FsZS8udGVzdChwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZSA9IGVuZFZhbHVlIC8gMTAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlVW5pdFR5cGUgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogRm9yIFJHQiBjb21wb25lbnRzLCB0YWtlIHRoZSBkZWZpbmVkIHBlcmNlbnRhZ2Ugb2YgMjU1IGFuZCBzdHJpcCBvZmYgdGhlIHVuaXQgdHlwZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoLyhSZWR8R3JlZW58Qmx1ZSkkL2kudGVzdChwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZSA9IChlbmRWYWx1ZSAvIDEwMCkgKiAyNTU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWVVbml0VHlwZSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgVW5pdCBSYXRpbyBDYWxjdWxhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBXaGVuIHF1ZXJpZWQsIHRoZSBicm93c2VyIHJldHVybnMgKG1vc3QpIENTUyBwcm9wZXJ0eSB2YWx1ZXMgaW4gcGl4ZWxzLiBUaGVyZWZvcmUsIGlmIGFuIGVuZFZhbHVlIHdpdGggYSB1bml0IHR5cGUgb2ZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJSwgZW0sIG9yIHJlbSBpcyBhbmltYXRlZCB0b3dhcmQsIHN0YXJ0VmFsdWUgbXVzdCBiZSBjb252ZXJ0ZWQgZnJvbSBwaXhlbHMgaW50byB0aGUgc2FtZSB1bml0IHR5cGUgYXMgZW5kVmFsdWUgaW4gb3JkZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHZhbHVlIG1hbmlwdWxhdGlvbiBsb2dpYyAoaW5jcmVtZW50L2RlY3JlbWVudCkgdG8gcHJvY2VlZC4gRnVydGhlciwgaWYgdGhlIHN0YXJ0VmFsdWUgd2FzIGZvcmNlZmVkIG9yIHRyYW5zZmVycmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gYSBwcmV2aW91cyBjYWxsLCBzdGFydFZhbHVlIG1heSBhbHNvIG5vdCBiZSBpbiBwaXhlbHMuIFVuaXQgY29udmVyc2lvbiBsb2dpYyB0aGVyZWZvcmUgY29uc2lzdHMgb2YgdHdvIHN0ZXBzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAxKSBDYWxjdWxhdGluZyB0aGUgcmF0aW8gb2YgJS9lbS9yZW0vdmgvdncgcmVsYXRpdmUgdG8gcGl4ZWxzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIDIpIENvbnZlcnRpbmcgc3RhcnRWYWx1ZSBpbnRvIHRoZSBzYW1lIHVuaXQgb2YgbWVhc3VyZW1lbnQgYXMgZW5kVmFsdWUgYmFzZWQgb24gdGhlc2UgcmF0aW9zLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBVbml0IGNvbnZlcnNpb24gcmF0aW9zIGFyZSBjYWxjdWxhdGVkIGJ5IGluc2VydGluZyBhIHNpYmxpbmcgbm9kZSBuZXh0IHRvIHRoZSB0YXJnZXQgbm9kZSwgY29weWluZyBvdmVyIGl0cyBwb3NpdGlvbiBwcm9wZXJ0eSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZyB2YWx1ZXMgd2l0aCB0aGUgdGFyZ2V0IHVuaXQgdHlwZSB0aGVuIGNvbXBhcmluZyB0aGUgcmV0dXJuZWQgcGl4ZWwgdmFsdWUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IEV2ZW4gaWYgb25seSBvbmUgb2YgdGhlc2UgdW5pdCB0eXBlcyBpcyBiZWluZyBhbmltYXRlZCwgYWxsIHVuaXQgcmF0aW9zIGFyZSBjYWxjdWxhdGVkIGF0IG9uY2Ugc2luY2UgdGhlIG92ZXJoZWFkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mIGJhdGNoaW5nIHRoZSBTRVRzIGFuZCBHRVRzIHRvZ2V0aGVyIHVwZnJvbnQgb3V0d2VpZ2h0cyB0aGUgcG90ZW50aWFsIG92ZXJoZWFkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mIGxheW91dCB0aHJhc2hpbmcgY2F1c2VkIGJ5IHJlLXF1ZXJ5aW5nIGZvciB1bmNhbGN1bGF0ZWQgcmF0aW9zIGZvciBzdWJzZXF1ZW50bHktcHJvY2Vzc2VkIHByb3BlcnRpZXMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFRvZG86IFNoaWZ0IHRoaXMgbG9naWMgaW50byB0aGUgY2FsbHMnIGZpcnN0IHRpY2sgaW5zdGFuY2Ugc28gdGhhdCBpdCdzIHN5bmNlZCB3aXRoIFJBRi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlVW5pdFJhdGlvcyAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNhbWUgUmF0aW8gQ2hlY2tzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogVGhlIHByb3BlcnRpZXMgYmVsb3cgYXJlIHVzZWQgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGVsZW1lbnQgZGlmZmVycyBzdWZmaWNpZW50bHkgZnJvbSB0aGlzIGNhbGwnc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNseSBpdGVyYXRlZCBlbGVtZW50IHRvIGFsc28gZGlmZmVyIGluIGl0cyB1bml0IGNvbnZlcnNpb24gcmF0aW9zLiBJZiB0aGUgcHJvcGVydGllcyBtYXRjaCB1cCB3aXRoIHRob3NlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZiB0aGUgcHJpb3IgZWxlbWVudCwgdGhlIHByaW9yIGVsZW1lbnQncyBjb252ZXJzaW9uIHJhdGlvcyBhcmUgdXNlZC4gTGlrZSBtb3N0IG9wdGltaXphdGlvbnMgaW4gVmVsb2NpdHksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzIGlzIGRvbmUgdG8gbWluaW1pemUgRE9NIHF1ZXJ5aW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNhbWVSYXRpb0luZGljYXRvcnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15UGFyZW50OiBlbGVtZW50LnBhcmVudE5vZGUgfHwgZG9jdW1lbnQuYm9keSwgLyogR0VUICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBDU1MuZ2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCBcInBvc2l0aW9uXCIpLCAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwiZm9udFNpemVcIikgLyogR0VUICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBEZXRlcm1pbmUgaWYgdGhlIHNhbWUgJSByYXRpbyBjYW4gYmUgdXNlZC4gJSBpcyBiYXNlZCBvbiB0aGUgZWxlbWVudCdzIHBvc2l0aW9uIHZhbHVlIGFuZCBpdHMgcGFyZW50J3Mgd2lkdGggYW5kIGhlaWdodCBkaW1lbnNpb25zLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhbWVQZXJjZW50UmF0aW8gPSAoKHNhbWVSYXRpb0luZGljYXRvcnMucG9zaXRpb24gPT09IGNhbGxVbml0Q29udmVyc2lvbkRhdGEubGFzdFBvc2l0aW9uKSAmJiAoc2FtZVJhdGlvSW5kaWNhdG9ycy5teVBhcmVudCA9PT0gY2FsbFVuaXRDb252ZXJzaW9uRGF0YS5sYXN0UGFyZW50KSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogRGV0ZXJtaW5lIGlmIHRoZSBzYW1lIGVtIHJhdGlvIGNhbiBiZSB1c2VkLiBlbSBpcyByZWxhdGl2ZSB0byB0aGUgZWxlbWVudCdzIGZvbnRTaXplLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhbWVFbVJhdGlvID0gKHNhbWVSYXRpb0luZGljYXRvcnMuZm9udFNpemUgPT09IGNhbGxVbml0Q29udmVyc2lvbkRhdGEubGFzdEZvbnRTaXplKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTdG9yZSB0aGVzZSByYXRpbyBpbmRpY2F0b3JzIGNhbGwtd2lkZSBmb3IgdGhlIG5leHQgZWxlbWVudCB0byBjb21wYXJlIGFnYWluc3QuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsVW5pdENvbnZlcnNpb25EYXRhLmxhc3RQYXJlbnQgPSBzYW1lUmF0aW9JbmRpY2F0b3JzLm15UGFyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbFVuaXRDb252ZXJzaW9uRGF0YS5sYXN0UG9zaXRpb24gPSBzYW1lUmF0aW9JbmRpY2F0b3JzLnBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbFVuaXRDb252ZXJzaW9uRGF0YS5sYXN0Rm9udFNpemUgPSBzYW1lUmF0aW9JbmRpY2F0b3JzLmZvbnRTaXplO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnQtU3BlY2lmaWMgVW5pdHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBJRTggcm91bmRzIHRvIHRoZSBuZWFyZXN0IHBpeGVsIHdoZW4gcmV0dXJuaW5nIENTUyB2YWx1ZXMsIHRodXMgd2UgcGVyZm9ybSBjb252ZXJzaW9ucyB1c2luZyBhIG1lYXN1cmVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZiAxMDAgKGluc3RlYWQgb2YgMSkgdG8gZ2l2ZSBvdXIgcmF0aW9zIGEgcHJlY2lzaW9uIG9mIGF0IGxlYXN0IDIgZGVjaW1hbCB2YWx1ZXMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVhc3VyZW1lbnQgPSAxMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdFJhdGlvcyA9IHt9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2FtZUVtUmF0aW8gfHwgIXNhbWVQZXJjZW50UmF0aW8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHVtbXkgPSBEYXRhKGVsZW1lbnQpLmlzU1ZHID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJyZWN0XCIpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkuaW5pdChkdW1teSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FtZVJhdGlvSW5kaWNhdG9ycy5teVBhcmVudC5hcHBlbmRDaGlsZChkdW1teSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFRvIGFjY3VyYXRlbHkgYW5kIGNvbnNpc3RlbnRseSBjYWxjdWxhdGUgY29udmVyc2lvbiByYXRpb3MsIHRoZSBlbGVtZW50J3MgY2FzY2FkZWQgb3ZlcmZsb3cgYW5kIGJveC1zaXppbmcgYXJlIHN0cmlwcGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNpbWlsYXJseSwgc2luY2Ugd2lkdGgvaGVpZ2h0IGNhbiBiZSBhcnRpZmljaWFsbHkgY29uc3RyYWluZWQgYnkgdGhlaXIgbWluLS9tYXgtIGVxdWl2YWxlbnRzLCB0aGVzZSBhcmUgY29udHJvbGxlZCBmb3IgYXMgd2VsbC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBPdmVyZmxvdyBtdXN0IGJlIGFsc28gYmUgY29udHJvbGxlZCBmb3IgcGVyLWF4aXMgc2luY2UgdGhlIG92ZXJmbG93IHByb3BlcnR5IG92ZXJ3cml0ZXMgaXRzIHBlci1heGlzIHZhbHVlcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goWyBcIm92ZXJmbG93XCIsIFwib3ZlcmZsb3dYXCIsIFwib3ZlcmZsb3dZXCIgXSwgZnVuY3Rpb24oaSwgcHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkuQ1NTLnNldFByb3BlcnR5VmFsdWUoZHVtbXksIHByb3BlcnR5LCBcImhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS5DU1Muc2V0UHJvcGVydHlWYWx1ZShkdW1teSwgXCJwb3NpdGlvblwiLCBzYW1lUmF0aW9JbmRpY2F0b3JzLnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS5DU1Muc2V0UHJvcGVydHlWYWx1ZShkdW1teSwgXCJmb250U2l6ZVwiLCBzYW1lUmF0aW9JbmRpY2F0b3JzLmZvbnRTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS5DU1Muc2V0UHJvcGVydHlWYWx1ZShkdW1teSwgXCJib3hTaXppbmdcIiwgXCJjb250ZW50LWJveFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogd2lkdGggYW5kIGhlaWdodCBhY3QgYXMgb3VyIHByb3h5IHByb3BlcnRpZXMgZm9yIG1lYXN1cmluZyB0aGUgaG9yaXpvbnRhbCBhbmQgdmVydGljYWwgJSByYXRpb3MuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKFsgXCJtaW5XaWR0aFwiLCBcIm1heFdpZHRoXCIsIFwid2lkdGhcIiwgXCJtaW5IZWlnaHRcIiwgXCJtYXhIZWlnaHRcIiwgXCJoZWlnaHRcIiBdLCBmdW5jdGlvbihpLCBwcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS5DU1Muc2V0UHJvcGVydHlWYWx1ZShkdW1teSwgcHJvcGVydHksIG1lYXN1cmVtZW50ICsgXCIlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHBhZGRpbmdMZWZ0IGFyYml0cmFyaWx5IGFjdHMgYXMgb3VyIHByb3h5IHByb3BlcnR5IGZvciB0aGUgZW0gcmF0aW8uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkuQ1NTLnNldFByb3BlcnR5VmFsdWUoZHVtbXksIFwicGFkZGluZ0xlZnRcIiwgbWVhc3VyZW1lbnQgKyBcImVtXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBEaXZpZGUgdGhlIHJldHVybmVkIHZhbHVlIGJ5IHRoZSBtZWFzdXJlbWVudCB0byBnZXQgdGhlIHJhdGlvIGJldHdlZW4gMSUgYW5kIDFweC4gRGVmYXVsdCB0byAxIHNpbmNlIHdvcmtpbmcgd2l0aCAwIGNhbiBwcm9kdWNlIEluZmluaXRlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRSYXRpb3MucGVyY2VudFRvUHhXaWR0aCA9IGNhbGxVbml0Q29udmVyc2lvbkRhdGEubGFzdFBlcmNlbnRUb1B4V2lkdGggPSAocGFyc2VGbG9hdChDU1MuZ2V0UHJvcGVydHlWYWx1ZShkdW1teSwgXCJ3aWR0aFwiLCBudWxsLCB0cnVlKSkgfHwgMSkgLyBtZWFzdXJlbWVudDsgLyogR0VUICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdFJhdGlvcy5wZXJjZW50VG9QeEhlaWdodCA9IGNhbGxVbml0Q29udmVyc2lvbkRhdGEubGFzdFBlcmNlbnRUb1B4SGVpZ2h0ID0gKHBhcnNlRmxvYXQoQ1NTLmdldFByb3BlcnR5VmFsdWUoZHVtbXksIFwiaGVpZ2h0XCIsIG51bGwsIHRydWUpKSB8fCAxKSAvIG1lYXN1cmVtZW50OyAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml0UmF0aW9zLmVtVG9QeCA9IGNhbGxVbml0Q29udmVyc2lvbkRhdGEubGFzdEVtVG9QeCA9IChwYXJzZUZsb2F0KENTUy5nZXRQcm9wZXJ0eVZhbHVlKGR1bW15LCBcInBhZGRpbmdMZWZ0XCIpKSB8fCAxKSAvIG1lYXN1cmVtZW50OyAvKiBHRVQgKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FtZVJhdGlvSW5kaWNhdG9ycy5teVBhcmVudC5yZW1vdmVDaGlsZChkdW1teSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRSYXRpb3MuZW1Ub1B4ID0gY2FsbFVuaXRDb252ZXJzaW9uRGF0YS5sYXN0RW1Ub1B4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRSYXRpb3MucGVyY2VudFRvUHhXaWR0aCA9IGNhbGxVbml0Q29udmVyc2lvbkRhdGEubGFzdFBlcmNlbnRUb1B4V2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdFJhdGlvcy5wZXJjZW50VG9QeEhlaWdodCA9IGNhbGxVbml0Q29udmVyc2lvbkRhdGEubGFzdFBlcmNlbnRUb1B4SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnQtQWdub3N0aWMgVW5pdHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBXaGVyZWFzICUgYW5kIGVtIHJhdGlvcyBhcmUgZGV0ZXJtaW5lZCBvbiBhIHBlci1lbGVtZW50IGJhc2lzLCB0aGUgcmVtIHVuaXQgb25seSBuZWVkcyB0byBiZSBjaGVja2VkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNlIHBlciBjYWxsIHNpbmNlIGl0J3MgZXhjbHVzaXZlbHkgZGVwZW5kYW50IHVwb24gZG9jdW1lbnQuYm9keSdzIGZvbnRTaXplLiBJZiB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0IGNhbGN1bGF0ZVVuaXRSYXRpb3MoKSBpcyBiZWluZyBydW4gZHVyaW5nIHRoaXMgY2FsbCwgcmVtVG9QeCB3aWxsIHN0aWxsIGJlIHNldCB0byBpdHMgZGVmYXVsdCB2YWx1ZSBvZiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc28gd2UgY2FsY3VsYXRlIGl0IG5vdy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsVW5pdENvbnZlcnNpb25EYXRhLnJlbVRvUHggPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBEZWZhdWx0IHRvIGJyb3dzZXJzJyBkZWZhdWx0IGZvbnRTaXplIG9mIDE2cHggaW4gdGhlIGNhc2Ugb2YgMC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsVW5pdENvbnZlcnNpb25EYXRhLnJlbVRvUHggPSBwYXJzZUZsb2F0KENTUy5nZXRQcm9wZXJ0eVZhbHVlKGRvY3VtZW50LmJvZHksIFwiZm9udFNpemVcIikpIHx8IDE2OyAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTaW1pbGFybHksIHZpZXdwb3J0IHVuaXRzIGFyZSAlLXJlbGF0aXZlIHRvIHRoZSB3aW5kb3cncyBpbm5lciBkaW1lbnNpb25zLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxVbml0Q29udmVyc2lvbkRhdGEudndUb1B4ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbFVuaXRDb252ZXJzaW9uRGF0YS52d1RvUHggPSBwYXJzZUZsb2F0KHdpbmRvdy5pbm5lcldpZHRoKSAvIDEwMDsgLyogR0VUICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbFVuaXRDb252ZXJzaW9uRGF0YS52aFRvUHggPSBwYXJzZUZsb2F0KHdpbmRvdy5pbm5lckhlaWdodCkgLyAxMDA7IC8qIEdFVCAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRSYXRpb3MucmVtVG9QeCA9IGNhbGxVbml0Q29udmVyc2lvbkRhdGEucmVtVG9QeDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRSYXRpb3MudndUb1B4ID0gY2FsbFVuaXRDb252ZXJzaW9uRGF0YS52d1RvUHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml0UmF0aW9zLnZoVG9QeCA9IGNhbGxVbml0Q29udmVyc2lvbkRhdGEudmhUb1B4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChWZWxvY2l0eS5kZWJ1ZyA+PSAxKSBjb25zb2xlLmxvZyhcIlVuaXQgcmF0aW9zOiBcIiArIEpTT04uc3RyaW5naWZ5KHVuaXRSYXRpb3MpLCBlbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5pdFJhdGlvcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFVuaXQgQ29udmVyc2lvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFRoZSAqIGFuZCAvIG9wZXJhdG9ycywgd2hpY2ggYXJlIG5vdCBwYXNzZWQgaW4gd2l0aCBhbiBhc3NvY2lhdGVkIHVuaXQsIGluaGVyZW50bHkgdXNlIHN0YXJ0VmFsdWUncyB1bml0LiBTa2lwIHZhbHVlIGFuZCB1bml0IGNvbnZlcnNpb24uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgvW1xcLypdLy50ZXN0KG9wZXJhdG9yKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWVVbml0VHlwZSA9IHN0YXJ0VmFsdWVVbml0VHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgc3RhcnRWYWx1ZSBhbmQgZW5kVmFsdWUgZGlmZmVyIGluIHVuaXQgdHlwZSwgY29udmVydCBzdGFydFZhbHVlIGludG8gdGhlIHNhbWUgdW5pdCB0eXBlIGFzIGVuZFZhbHVlIHNvIHRoYXQgaWYgZW5kVmFsdWVVbml0VHlwZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBpcyBhIHJlbGF0aXZlIHVuaXQgKCUsIGVtLCByZW0pLCB0aGUgdmFsdWVzIHNldCBkdXJpbmcgdHdlZW5pbmcgd2lsbCBjb250aW51ZSB0byBiZSBhY2N1cmF0ZWx5IHJlbGF0aXZlIGV2ZW4gaWYgdGhlIG1ldHJpY3MgdGhleSBkZXBlbmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgb24gYXJlIGR5bmFtaWNhbGx5IGNoYW5naW5nIGR1cmluZyB0aGUgY291cnNlIG9mIHRoZSBhbmltYXRpb24uIENvbnZlcnNlbHksIGlmIHdlIGFsd2F5cyBub3JtYWxpemVkIGludG8gcHggYW5kIHVzZWQgcHggZm9yIHNldHRpbmcgdmFsdWVzLCB0aGUgcHggcmF0aW9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgd291bGQgYmVjb21lIHN0YWxlIGlmIHRoZSBvcmlnaW5hbCB1bml0IGJlaW5nIGFuaW1hdGVkIHRvd2FyZCB3YXMgcmVsYXRpdmUgYW5kIHRoZSB1bmRlcmx5aW5nIG1ldHJpY3MgY2hhbmdlIGR1cmluZyB0aGUgYW5pbWF0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBTaW5jZSAwIGlzIDAgaW4gYW55IHVuaXQgdHlwZSwgbm8gY29udmVyc2lvbiBpcyBuZWNlc3Nhcnkgd2hlbiBzdGFydFZhbHVlIGlzIDAgLS0gd2UganVzdCBzdGFydCBhdCAwIHdpdGggZW5kVmFsdWVVbml0VHlwZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoc3RhcnRWYWx1ZVVuaXRUeXBlICE9PSBlbmRWYWx1ZVVuaXRUeXBlKSAmJiBzdGFydFZhbHVlICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBVbml0IGNvbnZlcnNpb24gaXMgYWxzbyBza2lwcGVkIHdoZW4gZW5kVmFsdWUgaXMgMCwgYnV0ICpzdGFydFZhbHVlVW5pdFR5cGUqIG11c3QgYmUgdXNlZCBmb3IgdHdlZW4gdmFsdWVzIHRvIHJlbWFpbiBhY2N1cmF0ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IFNraXBwaW5nIHVuaXQgY29udmVyc2lvbiBoZXJlIG1lYW5zIHRoYXQgaWYgZW5kVmFsdWVVbml0VHlwZSB3YXMgb3JpZ2luYWxseSBhIHJlbGF0aXZlIHVuaXQsIHRoZSBhbmltYXRpb24gd29uJ3QgcmVsYXRpdmVseVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggdGhlIHVuZGVybHlpbmcgbWV0cmljcyBpZiB0aGV5IGNoYW5nZSwgYnV0IHRoaXMgaXMgYWNjZXB0YWJsZSBzaW5jZSB3ZSdyZSBhbmltYXRpbmcgdG93YXJkIGludmlzaWJpbGl0eSBpbnN0ZWFkIG9mIHRvd2FyZCB2aXNpYmlsaXR5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpY2ggcmVtYWlucyBwYXN0IHRoZSBwb2ludCBvZiB0aGUgYW5pbWF0aW9uJ3MgY29tcGxldGlvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRWYWx1ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlVW5pdFR5cGUgPSBzdGFydFZhbHVlVW5pdFR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEJ5IHRoaXMgcG9pbnQsIHdlIGNhbm5vdCBhdm9pZCB1bml0IGNvbnZlcnNpb24gKGl0J3MgdW5kZXNpcmFibGUgc2luY2UgaXQgY2F1c2VzIGxheW91dCB0aHJhc2hpbmcpLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIHdlIGhhdmVuJ3QgYWxyZWFkeSwgd2UgdHJpZ2dlciBjYWxjdWxhdGVVbml0UmF0aW9zKCksIHdoaWNoIHJ1bnMgb25jZSBwZXIgZWxlbWVudCBwZXIgY2FsbC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50VW5pdENvbnZlcnNpb25EYXRhID0gZWxlbWVudFVuaXRDb252ZXJzaW9uRGF0YSB8fCBjYWxjdWxhdGVVbml0UmF0aW9zKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFRoZSBmb2xsb3dpbmcgUmVnRXggbWF0Y2hlcyBDU1MgcHJvcGVydGllcyB0aGF0IGhhdmUgdGhlaXIgJSB2YWx1ZXMgbWVhc3VyZWQgcmVsYXRpdmUgdG8gdGhlIHgtYXhpcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBXM0Mgc3BlYyBtYW5kYXRlcyB0aGF0IGFsbCBvZiBtYXJnaW4gYW5kIHBhZGRpbmcncyBwcm9wZXJ0aWVzIChldmVuIHRvcCBhbmQgYm90dG9tKSBhcmUgJS1yZWxhdGl2ZSB0byB0aGUgKndpZHRoKiBvZiB0aGUgcGFyZW50IGVsZW1lbnQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF4aXMgPSAoL21hcmdpbnxwYWRkaW5nfGxlZnR8cmlnaHR8d2lkdGh8dGV4dHx3b3JkfGxldHRlci9pLnRlc3QocHJvcGVydHkpIHx8IC9YJC8udGVzdChwcm9wZXJ0eSkgfHwgcHJvcGVydHkgPT09IFwieFwiKSA/IFwieFwiIDogXCJ5XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEluIG9yZGVyIHRvIGF2b2lkIGdlbmVyYXRpbmcgbl4yIGJlc3Bva2UgY29udmVyc2lvbiBmdW5jdGlvbnMsIHVuaXQgY29udmVyc2lvbiBpcyBhIHR3by1zdGVwIHByb2Nlc3M6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMSkgQ29udmVydCBzdGFydFZhbHVlIGludG8gcGl4ZWxzLiAyKSBDb252ZXJ0IHRoaXMgbmV3IHBpeGVsIHZhbHVlIGludG8gZW5kVmFsdWUncyB1bml0IHR5cGUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChzdGFydFZhbHVlVW5pdFR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IHRyYW5zbGF0ZVggYW5kIHRyYW5zbGF0ZVkgYXJlIHRoZSBvbmx5IHByb3BlcnRpZXMgdGhhdCBhcmUgJS1yZWxhdGl2ZSB0byBhbiBlbGVtZW50J3Mgb3duIGRpbWVuc2lvbnMgLS0gbm90IGl0cyBwYXJlbnQncyBkaW1lbnNpb25zLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkgZG9lcyBub3QgaW5jbHVkZSBhIHNwZWNpYWwgY29udmVyc2lvbiBwcm9jZXNzIHRvIGFjY291bnQgZm9yIHRoaXMgYmVoYXZpb3IuIFRoZXJlZm9yZSwgYW5pbWF0aW5nIHRyYW5zbGF0ZVgvWSBmcm9tIGEgJSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub24tJSB2YWx1ZSB3aWxsIHByb2R1Y2UgYW4gaW5jb3JyZWN0IHN0YXJ0IHZhbHVlLiBGb3J0dW5hdGVseSwgdGhpcyBzb3J0IG9mIGNyb3NzLXVuaXQgY29udmVyc2lvbiBpcyByYXJlbHkgZG9uZSBieSB1c2VycyBpbiBwcmFjdGljZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VmFsdWUgKj0gKGF4aXMgPT09IFwieFwiID8gZWxlbWVudFVuaXRDb252ZXJzaW9uRGF0YS5wZXJjZW50VG9QeFdpZHRoIDogZWxlbWVudFVuaXRDb252ZXJzaW9uRGF0YS5wZXJjZW50VG9QeEhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJweFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogcHggYWN0cyBhcyBvdXIgbWlkcG9pbnQgaW4gdGhlIHVuaXQgY29udmVyc2lvbiBwcm9jZXNzOyBkbyBub3RoaW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZSAqPSBlbGVtZW50VW5pdENvbnZlcnNpb25EYXRhW3N0YXJ0VmFsdWVVbml0VHlwZSArIFwiVG9QeFwiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEludmVydCB0aGUgcHggcmF0aW9zIHRvIGNvbnZlcnQgaW50byB0byB0aGUgdGFyZ2V0IHVuaXQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlbmRWYWx1ZVVuaXRUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlICo9IDEgLyAoYXhpcyA9PT0gXCJ4XCIgPyBlbGVtZW50VW5pdENvbnZlcnNpb25EYXRhLnBlcmNlbnRUb1B4V2lkdGggOiBlbGVtZW50VW5pdENvbnZlcnNpb25EYXRhLnBlcmNlbnRUb1B4SGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInB4XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBzdGFydFZhbHVlIGlzIGFscmVhZHkgaW4gcHgsIGRvIG5vdGhpbmc7IHdlJ3JlIGRvbmUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlICo9IDEgLyBlbGVtZW50VW5pdENvbnZlcnNpb25EYXRhW2VuZFZhbHVlVW5pdFR5cGUgKyBcIlRvUHhcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlbGF0aXZlIFZhbHVlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBPcGVyYXRvciBsb2dpYyBtdXN0IGJlIHBlcmZvcm1lZCBsYXN0IHNpbmNlIGl0IHJlcXVpcmVzIHVuaXQtbm9ybWFsaXplZCBzdGFydCBhbmQgZW5kIHZhbHVlcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogUmVsYXRpdmUgKnBlcmNlbnQgdmFsdWVzKiBkbyBub3QgYmVoYXZlIGhvdyBtb3N0IHBlb3BsZSB0aGluazsgd2hpbGUgb25lIHdvdWxkIGV4cGVjdCBcIis9NTAlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gaW5jcmVhc2UgdGhlIHByb3BlcnR5IDEuNXggaXRzIGN1cnJlbnQgdmFsdWUsIGl0IGluIGZhY3QgaW5jcmVhc2VzIHRoZSBwZXJjZW50IHVuaXRzIGluIGFic29sdXRlIHRlcm1zOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICA1MCBwb2ludHMgaXMgYWRkZWQgb24gdG9wIG9mIHRoZSBjdXJyZW50ICUgdmFsdWUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAob3BlcmF0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIrXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWUgPSBzdGFydFZhbHVlICsgZW5kVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIi1cIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZSA9IHN0YXJ0VmFsdWUgLSBlbmRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiKlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlID0gc3RhcnRWYWx1ZSAqIGVuZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIvXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWUgPSBzdGFydFZhbHVlIC8gZW5kVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0d2VlbnNDb250YWluZXIgUHVzaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIENvbnN0cnVjdCB0aGUgcGVyLXByb3BlcnR5IHR3ZWVuIG9iamVjdCwgYW5kIHB1c2ggaXQgdG8gdGhlIGVsZW1lbnQncyB0d2VlbnNDb250YWluZXIuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuc0NvbnRhaW5lcltwcm9wZXJ0eV0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZTogcm9vdFByb3BlcnR5VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlOiBzdGFydFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlOiBzdGFydFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWU6IGVuZFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdFR5cGU6IGVuZFZhbHVlVW5pdFR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc2luZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFZlbG9jaXR5LmRlYnVnKSBjb25zb2xlLmxvZyhcInR3ZWVuc0NvbnRhaW5lciAoXCIgKyBwcm9wZXJ0eSArIFwiKTogXCIgKyBKU09OLnN0cmluZ2lmeSh0d2VlbnNDb250YWluZXJbcHJvcGVydHldKSwgZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBBbG9uZyB3aXRoIGl0cyBwcm9wZXJ0eSBkYXRhLCBzdG9yZSBhIHJlZmVyZW5jZSB0byB0aGUgZWxlbWVudCBpdHNlbGYgb250byB0d2VlbnNDb250YWluZXIuICovXHJcbiAgICAgICAgICAgICAgICAgICAgdHdlZW5zQ29udGFpbmVyLmVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgIENhbGwgUHVzaFxyXG4gICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgLyogTm90ZTogdHdlZW5zQ29udGFpbmVyIGNhbiBiZSBlbXB0eSBpZiBhbGwgb2YgdGhlIHByb3BlcnRpZXMgaW4gdGhpcyBjYWxsJ3MgcHJvcGVydHkgbWFwIHdlcmUgc2tpcHBlZCBkdWUgdG8gbm90XHJcbiAgICAgICAgICAgICAgICAgICBiZWluZyBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIuIFRoZSBlbGVtZW50IHByb3BlcnR5IGlzIHVzZWQgZm9yIGNoZWNraW5nIHRoYXQgdGhlIHR3ZWVuc0NvbnRhaW5lciBoYXMgYmVlbiBhcHBlbmRlZCB0by4gKi9cclxuICAgICAgICAgICAgICAgIGlmICh0d2VlbnNDb250YWluZXIuZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIEFwcGx5IHRoZSBcInZlbG9jaXR5LWFuaW1hdGluZ1wiIGluZGljYXRvciBjbGFzcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICBDU1MuVmFsdWVzLmFkZENsYXNzKGVsZW1lbnQsIFwidmVsb2NpdHktYW5pbWF0aW5nXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBUaGUgY2FsbCBhcnJheSBob3VzZXMgdGhlIHR3ZWVuc0NvbnRhaW5lcnMgZm9yIGVhY2ggZWxlbWVudCBiZWluZyBhbmltYXRlZCBpbiB0aGUgY3VycmVudCBjYWxsLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGwucHVzaCh0d2VlbnNDb250YWluZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBTdG9yZSB0aGUgdHdlZW5zQ29udGFpbmVyIGFuZCBvcHRpb25zIGlmIHdlJ3JlIHdvcmtpbmcgb24gdGhlIGRlZmF1bHQgZWZmZWN0cyBxdWV1ZSwgc28gdGhhdCB0aGV5IGNhbiBiZSB1c2VkIGJ5IHRoZSByZXZlcnNlIGNvbW1hbmQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMucXVldWUgPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRGF0YShlbGVtZW50KS50d2VlbnNDb250YWluZXIgPSB0d2VlbnNDb250YWluZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERhdGEoZWxlbWVudCkub3B0cyA9IG9wdHM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBTd2l0Y2ggb24gdGhlIGVsZW1lbnQncyBhbmltYXRpbmcgZmxhZy4gKi9cclxuICAgICAgICAgICAgICAgICAgICBEYXRhKGVsZW1lbnQpLmlzQW5pbWF0aW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogT25jZSB0aGUgZmluYWwgZWxlbWVudCBpbiB0aGlzIGNhbGwncyBlbGVtZW50IHNldCBoYXMgYmVlbiBwcm9jZXNzZWQsIHB1c2ggdGhlIGNhbGwgYXJyYXkgb250b1xyXG4gICAgICAgICAgICAgICAgICAgICAgIFZlbG9jaXR5LlN0YXRlLmNhbGxzIGZvciB0aGUgYW5pbWF0aW9uIHRpY2sgdG8gaW1tZWRpYXRlbHkgYmVnaW4gcHJvY2Vzc2luZy4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudHNJbmRleCA9PT0gZWxlbWVudHNMZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFRvIHNwZWVkIHVwIGl0ZXJhdGluZyBvdmVyIHRoaXMgYXJyYXksIGl0IGlzIGNvbXBhY3RlZCAoZmFsc2V5IGl0ZW1zIC0tIGNhbGxzIHRoYXQgaGF2ZSBjb21wbGV0ZWQgLS0gYXJlIHJlbW92ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoZW4gaXRzIGxlbmd0aCBoYXMgYmFsbG9vbmVkIHRvIGEgcG9pbnQgdGhhdCBjYW4gaW1wYWN0IHRpY2sgcGVyZm9ybWFuY2UuIFRoaXMgb25seSBiZWNvbWVzIG5lY2Vzc2FyeSB3aGVuIGFuaW1hdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBoYXMgYmVlbiBjb250aW51b3VzIHdpdGggbWFueSBlbGVtZW50cyBvdmVyIGEgbG9uZyBwZXJpb2Qgb2YgdGltZTsgd2hlbmV2ZXIgYWxsIGFjdGl2ZSBjYWxscyBhcmUgY29tcGxldGVkLCBjb21wbGV0ZUNhbGwoKSBjbGVhcnMgVmVsb2NpdHkuU3RhdGUuY2FsbHMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChWZWxvY2l0eS5TdGF0ZS5jYWxscy5sZW5ndGggPiAxMDAwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkuU3RhdGUuY2FsbHMgPSBjb21wYWN0U3BhcnNlQXJyYXkoVmVsb2NpdHkuU3RhdGUuY2FsbHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBBZGQgdGhlIGN1cnJlbnQgY2FsbCBwbHVzIGl0cyBhc3NvY2lhdGVkIG1ldGFkYXRhICh0aGUgZWxlbWVudCBzZXQgYW5kIHRoZSBjYWxsJ3Mgb3B0aW9ucykgb250byB0aGUgZ2xvYmFsIGNhbGwgY29udGFpbmVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBBbnl0aGluZyBvbiB0aGlzIGNhbGwgY29udGFpbmVyIGlzIHN1YmplY3RlZCB0byB0aWNrKCkgcHJvY2Vzc2luZy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkuU3RhdGUuY2FsbHMucHVzaChbIGNhbGwsIGVsZW1lbnRzLCBvcHRzLCBudWxsLCBwcm9taXNlRGF0YS5yZXNvbHZlciBdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZSBhbmltYXRpb24gdGljayBpc24ndCBydW5uaW5nLCBzdGFydCBpdC4gKFZlbG9jaXR5IHNodXRzIGl0IG9mZiB3aGVuIHRoZXJlIGFyZSBubyBhY3RpdmUgY2FsbHMgdG8gcHJvY2Vzcy4pICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChWZWxvY2l0eS5TdGF0ZS5pc1RpY2tpbmcgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS5TdGF0ZS5pc1RpY2tpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFN0YXJ0IHRoZSB0aWNrIGxvb3AuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50c0luZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBXaGVuIHRoZSBxdWV1ZSBvcHRpb24gaXMgc2V0IHRvIGZhbHNlLCB0aGUgY2FsbCBza2lwcyB0aGUgZWxlbWVudCdzIHF1ZXVlIGFuZCBmaXJlcyBpbW1lZGlhdGVseS4gKi9cclxuICAgICAgICAgICAgaWYgKG9wdHMucXVldWUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBTaW5jZSB0aGlzIGJ1aWxkUXVldWUgY2FsbCBkb2Vzbid0IHJlc3BlY3QgdGhlIGVsZW1lbnQncyBleGlzdGluZyBxdWV1ZSAod2hpY2ggaXMgd2hlcmUgYSBkZWxheSBvcHRpb24gd291bGQgaGF2ZSBiZWVuIGFwcGVuZGVkKSxcclxuICAgICAgICAgICAgICAgICAgIHdlIG1hbnVhbGx5IGluamVjdCB0aGUgZGVsYXkgcHJvcGVydHkgaGVyZSB3aXRoIGFuIGV4cGxpY2l0IHNldFRpbWVvdXQuICovXHJcbiAgICAgICAgICAgICAgICBpZiAob3B0cy5kZWxheSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoYnVpbGRRdWV1ZSwgb3B0cy5kZWxheSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkUXVldWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyogT3RoZXJ3aXNlLCB0aGUgY2FsbCB1bmRlcmdvZXMgZWxlbWVudCBxdWV1ZWluZyBhcyBub3JtYWwuICovXHJcbiAgICAgICAgICAgIC8qIE5vdGU6IFRvIGludGVyb3BlcmF0ZSB3aXRoIGpRdWVyeSwgVmVsb2NpdHkgdXNlcyBqUXVlcnkncyBvd24gJC5xdWV1ZSgpIHN0YWNrIGZvciBxdWV1aW5nIGxvZ2ljLiAqL1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJC5xdWV1ZShlbGVtZW50LCBvcHRzLnF1ZXVlLCBmdW5jdGlvbihuZXh0LCBjbGVhclF1ZXVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIGNsZWFyUXVldWUgZmxhZyB3YXMgcGFzc2VkIGluIGJ5IHRoZSBzdG9wIGNvbW1hbmQsIHJlc29sdmUgdGhpcyBjYWxsJ3MgcHJvbWlzZS4gKFByb21pc2VzIGNhbiBvbmx5IGJlIHJlc29sdmVkIG9uY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgc28gaXQncyBmaW5lIGlmIHRoaXMgaXMgcmVwZWF0ZWRseSB0cmlnZ2VyZWQgZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgYXNzb2NpYXRlZCBjYWxsLikgKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2xlYXJRdWV1ZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvbWlzZURhdGEucHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZURhdGEucmVzb2x2ZXIoZWxlbWVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBEbyBub3QgY29udGludWUgd2l0aCBhbmltYXRpb24gcXVldWVpbmcuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogVGhpcyBmbGFnIGluZGljYXRlcyB0byB0aGUgdXBjb21pbmcgY29tcGxldGVDYWxsKCkgZnVuY3Rpb24gdGhhdCB0aGlzIHF1ZXVlIGVudHJ5IHdhcyBpbml0aWF0ZWQgYnkgVmVsb2NpdHkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgU2VlIGNvbXBsZXRlQ2FsbCgpIGZvciBmdXJ0aGVyIGRldGFpbHMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkudmVsb2NpdHlRdWV1ZUVudHJ5RmxhZyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkUXVldWUobmV4dCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgQXV0by1EZXF1ZXVpbmdcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgLyogQXMgcGVyIGpRdWVyeSdzICQucXVldWUoKSBiZWhhdmlvciwgdG8gZmlyZSB0aGUgZmlyc3Qgbm9uLWN1c3RvbS1xdWV1ZSBlbnRyeSBvbiBhbiBlbGVtZW50LCB0aGUgZWxlbWVudFxyXG4gICAgICAgICAgICAgICBtdXN0IGJlIGRlcXVldWVkIGlmIGl0cyBxdWV1ZSBzdGFjayBjb25zaXN0cyAqc29sZWx5KiBvZiB0aGUgY3VycmVudCBjYWxsLiAoVGhpcyBjYW4gYmUgZGV0ZXJtaW5lZCBieSBjaGVja2luZ1xyXG4gICAgICAgICAgICAgICBmb3IgdGhlIFwiaW5wcm9ncmVzc1wiIGl0ZW0gdGhhdCBqUXVlcnkgcHJlcGVuZHMgdG8gYWN0aXZlIHF1ZXVlIHN0YWNrIGFycmF5cy4pIFJlZ2FyZGxlc3MsIHdoZW5ldmVyIHRoZSBlbGVtZW50J3NcclxuICAgICAgICAgICAgICAgcXVldWUgaXMgZnVydGhlciBhcHBlbmRlZCB3aXRoIGFkZGl0aW9uYWwgaXRlbXMgLS0gaW5jbHVkaW5nICQuZGVsYXkoKSdzIG9yIGV2ZW4gJC5hbmltYXRlKCkgY2FsbHMsIHRoZSBxdWV1ZSdzXHJcbiAgICAgICAgICAgICAgIGZpcnN0IGVudHJ5IGlzIGF1dG9tYXRpY2FsbHkgZmlyZWQuIFRoaXMgYmVoYXZpb3IgY29udHJhc3RzIHRoYXQgb2YgY3VzdG9tIHF1ZXVlcywgd2hpY2ggbmV2ZXIgYXV0by1maXJlLiAqL1xyXG4gICAgICAgICAgICAvKiBOb3RlOiBXaGVuIGFuIGVsZW1lbnQgc2V0IGlzIGJlaW5nIHN1YmplY3RlZCB0byBhIG5vbi1wYXJhbGxlbCBWZWxvY2l0eSBjYWxsLCB0aGUgYW5pbWF0aW9uIHdpbGwgbm90IGJlZ2luIHVudGlsXHJcbiAgICAgICAgICAgICAgIGVhY2ggb25lIG9mIHRoZSBlbGVtZW50cyBpbiB0aGUgc2V0IGhhcyByZWFjaGVkIHRoZSBlbmQgb2YgaXRzIGluZGl2aWR1YWxseSBwcmUtZXhpc3RpbmcgcXVldWUgY2hhaW4uICovXHJcbiAgICAgICAgICAgIC8qIE5vdGU6IFVuZm9ydHVuYXRlbHksIG1vc3QgcGVvcGxlIGRvbid0IGZ1bGx5IGdyYXNwIGpRdWVyeSdzIHBvd2VyZnVsLCB5ZXQgcXVpcmt5LCAkLnF1ZXVlKCkgZnVuY3Rpb24uXHJcbiAgICAgICAgICAgICAgIExlYW4gbW9yZSBoZXJlOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNTgxNTgvY2FuLXNvbWVib2R5LWV4cGxhaW4tanF1ZXJ5LXF1ZXVlLXRvLW1lICovXHJcbiAgICAgICAgICAgIGlmICgob3B0cy5xdWV1ZSA9PT0gXCJcIiB8fCBvcHRzLnF1ZXVlID09PSBcImZ4XCIpICYmICQucXVldWUoZWxlbWVudClbMF0gIT09IFwiaW5wcm9ncmVzc1wiKSB7XHJcbiAgICAgICAgICAgICAgICAkLmRlcXVldWUoZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgIEVsZW1lbnQgU2V0IEl0ZXJhdGlvblxyXG4gICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAvKiBJZiB0aGUgXCJub2RlVHlwZVwiIHByb3BlcnR5IGV4aXN0cyBvbiB0aGUgZWxlbWVudHMgdmFyaWFibGUsIHdlJ3JlIGFuaW1hdGluZyBhIHNpbmdsZSBlbGVtZW50LlxyXG4gICAgICAgICAgIFBsYWNlIGl0IGluIGFuIGFycmF5IHNvIHRoYXQgJC5lYWNoKCkgY2FuIGl0ZXJhdGUgb3ZlciBpdC4gKi9cclxuICAgICAgICAkLmVhY2goZWxlbWVudHMsIGZ1bmN0aW9uKGksIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgLyogRW5zdXJlIGVhY2ggZWxlbWVudCBpbiBhIHNldCBoYXMgYSBub2RlVHlwZSAoaXMgYSByZWFsIGVsZW1lbnQpIHRvIGF2b2lkIHRocm93aW5nIGVycm9ycy4gKi9cclxuICAgICAgICAgICAgaWYgKFR5cGUuaXNOb2RlKGVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzRWxlbWVudC5jYWxsKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICBPcHRpb246IExvb3BcclxuICAgICAgICAqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIC8qIFRoZSBsb29wIG9wdGlvbiBhY2NlcHRzIGFuIGludGVnZXIgaW5kaWNhdGluZyBob3cgbWFueSB0aW1lcyB0aGUgZWxlbWVudCBzaG91bGQgbG9vcCBiZXR3ZWVuIHRoZSB2YWx1ZXMgaW4gdGhlXHJcbiAgICAgICAgICAgY3VycmVudCBjYWxsJ3MgcHJvcGVydGllcyBtYXAgYW5kIHRoZSBlbGVtZW50J3MgcHJvcGVydHkgdmFsdWVzIHByaW9yIHRvIHRoaXMgY2FsbC4gKi9cclxuICAgICAgICAvKiBOb3RlOiBUaGUgbG9vcCBvcHRpb24ncyBsb2dpYyBpcyBwZXJmb3JtZWQgaGVyZSAtLSBhZnRlciBlbGVtZW50IHByb2Nlc3NpbmcgLS0gYmVjYXVzZSB0aGUgY3VycmVudCBjYWxsIG5lZWRzXHJcbiAgICAgICAgICAgdG8gdW5kZXJnbyBpdHMgcXVldWUgaW5zZXJ0aW9uIHByaW9yIHRvIHRoZSBsb29wIG9wdGlvbiBnZW5lcmF0aW5nIGl0cyBzZXJpZXMgb2YgY29uc3RpdHVlbnQgXCJyZXZlcnNlXCIgY2FsbHMsXHJcbiAgICAgICAgICAgd2hpY2ggY2hhaW4gYWZ0ZXIgdGhlIGN1cnJlbnQgY2FsbC4gVHdvIHJldmVyc2UgY2FsbHMgKHR3byBcImFsdGVybmF0aW9uc1wiKSBjb25zdGl0dXRlIG9uZSBsb29wLiAqL1xyXG4gICAgICAgIHZhciBvcHRzID0gJC5leHRlbmQoe30sIFZlbG9jaXR5LmRlZmF1bHRzLCBvcHRpb25zKSxcclxuICAgICAgICAgICAgcmV2ZXJzZUNhbGxzQ291bnQ7XHJcblxyXG4gICAgICAgIG9wdHMubG9vcCA9IHBhcnNlSW50KG9wdHMubG9vcCk7XHJcbiAgICAgICAgcmV2ZXJzZUNhbGxzQ291bnQgPSAob3B0cy5sb29wICogMikgLSAxO1xyXG5cclxuICAgICAgICBpZiAob3B0cy5sb29wKSB7XHJcbiAgICAgICAgICAgIC8qIERvdWJsZSB0aGUgbG9vcCBjb3VudCB0byBjb252ZXJ0IGl0IGludG8gaXRzIGFwcHJvcHJpYXRlIG51bWJlciBvZiBcInJldmVyc2VcIiBjYWxscy5cclxuICAgICAgICAgICAgICAgU3VidHJhY3QgMSBmcm9tIHRoZSByZXN1bHRpbmcgdmFsdWUgc2luY2UgdGhlIGN1cnJlbnQgY2FsbCBpcyBpbmNsdWRlZCBpbiB0aGUgdG90YWwgYWx0ZXJuYXRpb24gY291bnQuICovXHJcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcmV2ZXJzZUNhbGxzQ291bnQ7IHgrKykge1xyXG4gICAgICAgICAgICAgICAgLyogU2luY2UgdGhlIGxvZ2ljIGZvciB0aGUgcmV2ZXJzZSBhY3Rpb24gb2NjdXJzIGluc2lkZSBRdWV1ZWluZyBhbmQgdGhlcmVmb3JlIHRoaXMgY2FsbCdzIG9wdGlvbnMgb2JqZWN0XHJcbiAgICAgICAgICAgICAgICAgICBpc24ndCBwYXJzZWQgdW50aWwgdGhlbiBhcyB3ZWxsLCB0aGUgY3VycmVudCBjYWxsJ3MgZGVsYXkgb3B0aW9uIG11c3QgYmUgZXhwbGljaXRseSBwYXNzZWQgaW50byB0aGUgcmV2ZXJzZVxyXG4gICAgICAgICAgICAgICAgICAgY2FsbCBzbyB0aGF0IHRoZSBkZWxheSBsb2dpYyB0aGF0IG9jY3VycyBpbnNpZGUgKlByZS1RdWV1ZWluZyogY2FuIHByb2Nlc3MgaXQuICovXHJcbiAgICAgICAgICAgICAgICB2YXIgcmV2ZXJzZU9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IG9wdHMuZGVsYXksXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IG9wdHMucHJvZ3Jlc3NcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgLyogSWYgYSBjb21wbGV0ZSBjYWxsYmFjayB3YXMgcGFzc2VkIGludG8gdGhpcyBjYWxsLCB0cmFuc2ZlciBpdCB0byB0aGUgbG9vcCByZWRpcmVjdCdzIGZpbmFsIFwicmV2ZXJzZVwiIGNhbGxcclxuICAgICAgICAgICAgICAgICAgIHNvIHRoYXQgaXQncyB0cmlnZ2VyZWQgd2hlbiB0aGUgZW50aXJlIHJlZGlyZWN0IGlzIGNvbXBsZXRlIChhbmQgbm90IHdoZW4gdGhlIHZlcnkgZmlyc3QgYW5pbWF0aW9uIGlzIGNvbXBsZXRlKS4gKi9cclxuICAgICAgICAgICAgICAgIGlmICh4ID09PSByZXZlcnNlQ2FsbHNDb3VudCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXZlcnNlT3B0aW9ucy5kaXNwbGF5ID0gb3B0cy5kaXNwbGF5O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldmVyc2VPcHRpb25zLnZpc2liaWxpdHkgPSBvcHRzLnZpc2liaWxpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV2ZXJzZU9wdGlvbnMuY29tcGxldGUgPSBvcHRzLmNvbXBsZXRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGFuaW1hdGUoZWxlbWVudHMsIFwicmV2ZXJzZVwiLCByZXZlcnNlT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgQ2hhaW5pbmdcclxuICAgICAgICAqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIC8qIFJldHVybiB0aGUgZWxlbWVudHMgYmFjayB0byB0aGUgY2FsbCBjaGFpbiwgd2l0aCB3cmFwcGVkIGVsZW1lbnRzIHRha2luZyBwcmVjZWRlbmNlIGluIGNhc2UgVmVsb2NpdHkgd2FzIGNhbGxlZCB2aWEgdGhlICQuZm4uIGV4dGVuc2lvbi4gKi9cclxuICAgICAgICByZXR1cm4gZ2V0Q2hhaW4oKTtcclxuICAgIH07XHJcblxyXG4gICAgLyogVHVybiBWZWxvY2l0eSBpbnRvIHRoZSBhbmltYXRpb24gZnVuY3Rpb24sIGV4dGVuZGVkIHdpdGggdGhlIHByZS1leGlzdGluZyBWZWxvY2l0eSBvYmplY3QuICovXHJcbiAgICBWZWxvY2l0eSA9ICQuZXh0ZW5kKGFuaW1hdGUsIFZlbG9jaXR5KTtcclxuICAgIC8qIEZvciBsZWdhY3kgc3VwcG9ydCwgYWxzbyBleHBvc2UgdGhlIGxpdGVyYWwgYW5pbWF0ZSBtZXRob2QuICovXHJcbiAgICBWZWxvY2l0eS5hbmltYXRlID0gYW5pbWF0ZTtcclxuXHJcbiAgICAvKioqKioqKioqKioqKipcclxuICAgICAgICBUaW1pbmdcclxuICAgICoqKioqKioqKioqKioqL1xyXG5cclxuICAgIC8qIFRpY2tlciBmdW5jdGlvbi4gKi9cclxuICAgIHZhciB0aWNrZXIgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHJBRlNoaW07XHJcblxyXG4gICAgLyogSW5hY3RpdmUgYnJvd3NlciB0YWJzIHBhdXNlIHJBRiwgd2hpY2ggcmVzdWx0cyBpbiBhbGwgYWN0aXZlIGFuaW1hdGlvbnMgaW1tZWRpYXRlbHkgc3ByaW50aW5nIHRvIHRoZWlyIGNvbXBsZXRpb24gc3RhdGVzIHdoZW4gdGhlIHRhYiByZWZvY3VzZXMuXHJcbiAgICAgICBUbyBnZXQgYXJvdW5kIHRoaXMsIHdlIGR5bmFtaWNhbGx5IHN3aXRjaCByQUYgdG8gc2V0VGltZW91dCAod2hpY2ggdGhlIGJyb3dzZXIgKmRvZXNuJ3QqIHBhdXNlKSB3aGVuIHRoZSB0YWIgbG9zZXMgZm9jdXMuIFdlIHNraXAgdGhpcyBmb3IgbW9iaWxlXHJcbiAgICAgICBkZXZpY2VzIHRvIGF2b2lkIHdhc3RpbmcgYmF0dGVyeSBwb3dlciBvbiBpbmFjdGl2ZSB0YWJzLiAqL1xyXG4gICAgLyogTm90ZTogVGFiIGZvY3VzIGRldGVjdGlvbiBkb2Vzbid0IHdvcmsgb24gb2xkZXIgdmVyc2lvbnMgb2YgSUUsIGJ1dCB0aGF0J3Mgb2theSBzaW5jZSB0aGV5IGRvbid0IHN1cHBvcnQgckFGIHRvIGJlZ2luIHdpdGguICovXHJcbiAgICBpZiAoIVZlbG9jaXR5LlN0YXRlLmlzTW9iaWxlICYmIGRvY3VtZW50LmhpZGRlbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8qIFJlYXNzaWduIHRoZSByQUYgZnVuY3Rpb24gKHdoaWNoIHRoZSBnbG9iYWwgdGljaygpIGZ1bmN0aW9uIHVzZXMpIGJhc2VkIG9uIHRoZSB0YWIncyBmb2N1cyBzdGF0ZS4gKi9cclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmhpZGRlbikge1xyXG4gICAgICAgICAgICAgICAgdGlja2VyID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBUaGUgdGljayBmdW5jdGlvbiBuZWVkcyBhIHRydXRoeSBmaXJzdCBhcmd1bWVudCBpbiBvcmRlciB0byBwYXNzIGl0cyBpbnRlcm5hbCB0aW1lc3RhbXAgY2hlY2suICovXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGNhbGxiYWNrKHRydWUpIH0sIDE2KTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgLyogVGhlIHJBRiBsb29wIGhhcyBiZWVuIHBhdXNlZCBieSB0aGUgYnJvd3Nlciwgc28gd2UgbWFudWFsbHkgcmVzdGFydCB0aGUgdGljay4gKi9cclxuICAgICAgICAgICAgICAgIHRpY2soKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRpY2tlciA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgckFGU2hpbTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKioqKioqKioqKipcclxuICAgICAgICBUaWNrXHJcbiAgICAqKioqKioqKioqKiovXHJcblxyXG4gICAgLyogTm90ZTogQWxsIGNhbGxzIHRvIFZlbG9jaXR5IGFyZSBwdXNoZWQgdG8gdGhlIFZlbG9jaXR5LlN0YXRlLmNhbGxzIGFycmF5LCB3aGljaCBpcyBmdWxseSBpdGVyYXRlZCB0aHJvdWdoIHVwb24gZWFjaCB0aWNrLiAqL1xyXG4gICAgZnVuY3Rpb24gdGljayAodGltZXN0YW1wKSB7XHJcbiAgICAgICAgLyogQW4gZW1wdHkgdGltZXN0YW1wIGFyZ3VtZW50IGluZGljYXRlcyB0aGF0IHRoaXMgaXMgdGhlIGZpcnN0IHRpY2sgb2NjdXJlbmNlIHNpbmNlIHRpY2tpbmcgd2FzIHR1cm5lZCBvbi5cclxuICAgICAgICAgICBXZSBsZXZlcmFnZSB0aGlzIG1ldGFkYXRhIHRvIGZ1bGx5IGlnbm9yZSB0aGUgZmlyc3QgdGljayBwYXNzIHNpbmNlIFJBRidzIGluaXRpYWwgcGFzcyBpcyBmaXJlZCB3aGVuZXZlclxyXG4gICAgICAgICAgIHRoZSBicm93c2VyJ3MgbmV4dCB0aWNrIHN5bmMgdGltZSBvY2N1cnMsIHdoaWNoIHJlc3VsdHMgaW4gdGhlIGZpcnN0IGVsZW1lbnRzIHN1YmplY3RlZCB0byBWZWxvY2l0eVxyXG4gICAgICAgICAgIGNhbGxzIGJlaW5nIGFuaW1hdGVkIG91dCBvZiBzeW5jIHdpdGggYW55IGVsZW1lbnRzIGFuaW1hdGVkIGltbWVkaWF0ZWx5IHRoZXJlYWZ0ZXIuIEluIHNob3J0LCB3ZSBpZ25vcmVcclxuICAgICAgICAgICB0aGUgZmlyc3QgUkFGIHRpY2sgcGFzcyBzbyB0aGF0IGVsZW1lbnRzIGJlaW5nIGltbWVkaWF0ZWx5IGNvbnNlY3V0aXZlbHkgYW5pbWF0ZWQgLS0gaW5zdGVhZCBvZiBzaW11bHRhbmVvdXNseSBhbmltYXRlZFxyXG4gICAgICAgICAgIGJ5IHRoZSBzYW1lIFZlbG9jaXR5IGNhbGwgLS0gYXJlIHByb3Blcmx5IGJhdGNoZWQgaW50byB0aGUgc2FtZSBpbml0aWFsIFJBRiB0aWNrIGFuZCBjb25zZXF1ZW50bHkgcmVtYWluIGluIHN5bmMgdGhlcmVhZnRlci4gKi9cclxuICAgICAgICBpZiAodGltZXN0YW1wKSB7XHJcbiAgICAgICAgICAgIC8qIFdlIGlnbm9yZSBSQUYncyBoaWdoIHJlc29sdXRpb24gdGltZXN0YW1wIHNpbmNlIGl0IGNhbiBiZSBzaWduaWZpY2FudGx5IG9mZnNldCB3aGVuIHRoZSBicm93c2VyIGlzXHJcbiAgICAgICAgICAgICAgIHVuZGVyIGhpZ2ggc3RyZXNzOyB3ZSBvcHQgZm9yIGNob3BwaW5lc3Mgb3ZlciBhbGxvd2luZyB0aGUgYnJvd3NlciB0byBkcm9wIGh1Z2UgY2h1bmtzIG9mIGZyYW1lcy4gKi9cclxuICAgICAgICAgICAgdmFyIHRpbWVDdXJyZW50ID0gKG5ldyBEYXRlKS5nZXRUaW1lKCk7XHJcblxyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgQ2FsbCBJdGVyYXRpb25cclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAvKiBJdGVyYXRlIHRocm91Z2ggZWFjaCBhY3RpdmUgY2FsbC4gKi9cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGNhbGxzTGVuZ3RoID0gVmVsb2NpdHkuU3RhdGUuY2FsbHMubGVuZ3RoOyBpIDwgY2FsbHNMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLyogV2hlbiBhIFZlbG9jaXR5IGNhbGwgaXMgY29tcGxldGVkLCBpdHMgVmVsb2NpdHkuU3RhdGUuY2FsbHMgZW50cnkgaXMgc2V0IHRvIGZhbHNlLiBDb250aW51ZSBvbiB0byB0aGUgbmV4dCBjYWxsLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKCFWZWxvY2l0eS5TdGF0ZS5jYWxsc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgIENhbGwtV2lkZSBWYXJpYWJsZXNcclxuICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY2FsbENvbnRhaW5lciA9IFZlbG9jaXR5LlN0YXRlLmNhbGxzW2ldLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbGwgPSBjYWxsQ29udGFpbmVyWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMgPSBjYWxsQ29udGFpbmVyWzJdLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVTdGFydCA9IGNhbGxDb250YWluZXJbM10sXHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RUaWNrID0gISF0aW1lU3RhcnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgLyogSWYgdGltZVN0YXJ0IGlzIHVuZGVmaW5lZCwgdGhlbiB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lIHRoYXQgdGhpcyBjYWxsIGhhcyBiZWVuIHByb2Nlc3NlZCBieSB0aWNrKCkuXHJcbiAgICAgICAgICAgICAgICAgICBXZSBhc3NpZ24gdGltZVN0YXJ0IG5vdyBzbyB0aGF0IGl0cyB2YWx1ZSBpcyBhcyBjbG9zZSB0byB0aGUgcmVhbCBhbmltYXRpb24gc3RhcnQgdGltZSBhcyBwb3NzaWJsZS5cclxuICAgICAgICAgICAgICAgICAgIChDb252ZXJzZWx5LCBoYWQgdGltZVN0YXJ0IGJlZW4gZGVmaW5lZCB3aGVuIHRoaXMgY2FsbCB3YXMgYWRkZWQgdG8gVmVsb2NpdHkuU3RhdGUuY2FsbHMsIHRoZSBkZWxheVxyXG4gICAgICAgICAgICAgICAgICAgYmV0d2VlbiB0aGF0IHRpbWUgYW5kIG5vdyB3b3VsZCBjYXVzZSB0aGUgZmlyc3QgZmV3IGZyYW1lcyBvZiB0aGUgdHdlZW4gdG8gYmUgc2tpcHBlZCBzaW5jZVxyXG4gICAgICAgICAgICAgICAgICAgcGVyY2VudENvbXBsZXRlIGlzIGNhbGN1bGF0ZWQgcmVsYXRpdmUgdG8gdGltZVN0YXJ0LikgKi9cclxuICAgICAgICAgICAgICAgIC8qIEZ1cnRoZXIsIHN1YnRyYWN0IDE2bXMgKHRoZSBhcHByb3hpbWF0ZSByZXNvbHV0aW9uIG9mIFJBRikgZnJvbSB0aGUgY3VycmVudCB0aW1lIHZhbHVlIHNvIHRoYXQgdGhlXHJcbiAgICAgICAgICAgICAgICAgICBmaXJzdCB0aWNrIGl0ZXJhdGlvbiBpc24ndCB3YXN0ZWQgYnkgYW5pbWF0aW5nIGF0IDAlIHR3ZWVuIGNvbXBsZXRpb24sIHdoaWNoIHdvdWxkIHByb2R1Y2UgdGhlXHJcbiAgICAgICAgICAgICAgICAgICBzYW1lIHN0eWxlIHZhbHVlIGFzIHRoZSBlbGVtZW50J3MgY3VycmVudCB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgIGlmICghdGltZVN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZVN0YXJ0ID0gVmVsb2NpdHkuU3RhdGUuY2FsbHNbaV1bM10gPSB0aW1lQ3VycmVudCAtIDE2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8qIFRoZSB0d2VlbidzIGNvbXBsZXRpb24gcGVyY2VudGFnZSBpcyByZWxhdGl2ZSB0byB0aGUgdHdlZW4ncyBzdGFydCB0aW1lLCBub3QgdGhlIHR3ZWVuJ3Mgc3RhcnQgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICh3aGljaCB3b3VsZCByZXN1bHQgaW4gdW5wcmVkaWN0YWJsZSB0d2VlbiBkdXJhdGlvbnMgc2luY2UgSmF2YVNjcmlwdCdzIHRpbWVycyBhcmUgbm90IHBhcnRpY3VsYXJseSBhY2N1cmF0ZSkuXHJcbiAgICAgICAgICAgICAgICAgICBBY2NvcmRpbmdseSwgd2UgZW5zdXJlIHRoYXQgcGVyY2VudENvbXBsZXRlIGRvZXMgbm90IGV4Y2VlZCAxLiAqL1xyXG4gICAgICAgICAgICAgICAgdmFyIHBlcmNlbnRDb21wbGV0ZSA9IE1hdGgubWluKCh0aW1lQ3VycmVudCAtIHRpbWVTdGFydCkgLyBvcHRzLmR1cmF0aW9uLCAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgRWxlbWVudCBJdGVyYXRpb25cclxuICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgLyogRm9yIGV2ZXJ5IGNhbGwsIGl0ZXJhdGUgdGhyb3VnaCBlYWNoIG9mIHRoZSBlbGVtZW50cyBpbiBpdHMgc2V0LiAqL1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGNhbGxMZW5ndGggPSBjYWxsLmxlbmd0aDsgaiA8IGNhbGxMZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0d2VlbnNDb250YWluZXIgPSBjYWxsW2pdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gdHdlZW5zQ29udGFpbmVyLmVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIENoZWNrIHRvIHNlZSBpZiB0aGlzIGVsZW1lbnQgaGFzIGJlZW4gZGVsZXRlZCBtaWR3YXkgdGhyb3VnaCB0aGUgYW5pbWF0aW9uIGJ5IGNoZWNraW5nIGZvciB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZWQgZXhpc3RlbmNlIG9mIGl0cyBkYXRhIGNhY2hlLiBJZiBpdCdzIGdvbmUsIHNraXAgYW5pbWF0aW5nIHRoaXMgZWxlbWVudC4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIURhdGEoZWxlbWVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNmb3JtUHJvcGVydHlFeGlzdHMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICBEaXNwbGF5ICYgVmlzaWJpbGl0eSBUb2dnbGluZ1xyXG4gICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZSBkaXNwbGF5IG9wdGlvbiBpcyBzZXQgdG8gbm9uLVwibm9uZVwiLCBzZXQgaXQgdXBmcm9udCBzbyB0aGF0IHRoZSBlbGVtZW50IGNhbiBiZWNvbWUgdmlzaWJsZSBiZWZvcmUgdHdlZW5pbmcgYmVnaW5zLlxyXG4gICAgICAgICAgICAgICAgICAgICAgIChPdGhlcndpc2UsIGRpc3BsYXkncyBcIm5vbmVcIiB2YWx1ZSBpcyBzZXQgaW4gY29tcGxldGVDYWxsKCkgb25jZSB0aGUgYW5pbWF0aW9uIGhhcyBjb21wbGV0ZWQuKSAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRzLmRpc3BsYXkgIT09IHVuZGVmaW5lZCAmJiBvcHRzLmRpc3BsYXkgIT09IG51bGwgJiYgb3B0cy5kaXNwbGF5ICE9PSBcIm5vbmVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5kaXNwbGF5ID09PSBcImZsZXhcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZsZXhWYWx1ZXMgPSBbIFwiLXdlYmtpdC1ib3hcIiwgXCItbW96LWJveFwiLCBcIi1tcy1mbGV4Ym94XCIsIFwiLXdlYmtpdC1mbGV4XCIgXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goZmxleFZhbHVlcywgZnVuY3Rpb24oaSwgZmxleFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ1NTLnNldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJkaXNwbGF5XCIsIGZsZXhWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1NTLnNldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJkaXNwbGF5XCIsIG9wdHMuZGlzcGxheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBTYW1lIGdvZXMgd2l0aCB0aGUgdmlzaWJpbGl0eSBvcHRpb24sIGJ1dCBpdHMgXCJub25lXCIgZXF1aXZhbGVudCBpcyBcImhpZGRlblwiLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRzLnZpc2liaWxpdHkgIT09IHVuZGVmaW5lZCAmJiBvcHRzLnZpc2liaWxpdHkgIT09IFwiaGlkZGVuXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1NTLnNldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJ2aXNpYmlsaXR5XCIsIG9wdHMudmlzaWJpbGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgUHJvcGVydHkgSXRlcmF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBGb3IgZXZlcnkgZWxlbWVudCwgaXRlcmF0ZSB0aHJvdWdoIGVhY2ggcHJvcGVydHkuICovXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gdHdlZW5zQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IEluIGFkZGl0aW9uIHRvIHByb3BlcnR5IHR3ZWVuIGRhdGEsIHR3ZWVuc0NvbnRhaW5lciBjb250YWlucyBhIHJlZmVyZW5jZSB0byBpdHMgYXNzb2NpYXRlZCBlbGVtZW50LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydHkgIT09IFwiZWxlbWVudFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHdlZW4gPSB0d2VlbnNDb250YWluZXJbcHJvcGVydHldLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBFYXNpbmcgY2FuIGVpdGhlciBiZSBhIHByZS1nZW5lcmVhdGVkIGZ1bmN0aW9uIG9yIGEgc3RyaW5nIHRoYXQgcmVmZXJlbmNlcyBhIHByZS1yZWdpc3RlcmVkIGVhc2luZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uIHRoZSBWZWxvY2l0eS5FYXNpbmdzIG9iamVjdC4gSW4gZWl0aGVyIGNhc2UsIHJldHVybiB0aGUgYXBwcm9wcmlhdGUgZWFzaW5nICpmdW5jdGlvbiouICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nID0gVHlwZS5pc1N0cmluZyh0d2Vlbi5lYXNpbmcpID8gVmVsb2NpdHkuRWFzaW5nc1t0d2Vlbi5lYXNpbmddIDogdHdlZW4uZWFzaW5nO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEN1cnJlbnQgVmFsdWUgQ2FsY3VsYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGlzIGlzIHRoZSBsYXN0IHRpY2sgcGFzcyAoaWYgd2UndmUgcmVhY2hlZCAxMDAlIGNvbXBsZXRpb24gZm9yIHRoaXMgdHdlZW4pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5zdXJlIHRoYXQgY3VycmVudFZhbHVlIGlzIGV4cGxpY2l0bHkgc2V0IHRvIGl0cyB0YXJnZXQgZW5kVmFsdWUgc28gdGhhdCBpdCdzIG5vdCBzdWJqZWN0ZWQgdG8gYW55IHJvdW5kaW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlcmNlbnRDb21wbGV0ZSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IHR3ZWVuLmVuZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogT3RoZXJ3aXNlLCBjYWxjdWxhdGUgY3VycmVudFZhbHVlIGJhc2VkIG9uIHRoZSBjdXJyZW50IGRlbHRhIGZyb20gc3RhcnRWYWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlID0gdHdlZW4uc3RhcnRWYWx1ZSArICgodHdlZW4uZW5kVmFsdWUgLSB0d2Vlbi5zdGFydFZhbHVlKSAqIGVhc2luZyhwZXJjZW50Q29tcGxldGUpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgbm8gdmFsdWUgY2hhbmdlIGlzIG9jY3VycmluZywgZG9uJ3QgcHJvY2VlZCB3aXRoIERPTSB1cGRhdGluZy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0VGljayAmJiAoY3VycmVudFZhbHVlID09PSB0d2Vlbi5jdXJyZW50VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0d2Vlbi5jdXJyZW50VmFsdWUgPSBjdXJyZW50VmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSG9va3M6IFBhcnQgSVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEZvciBob29rZWQgcHJvcGVydGllcywgdGhlIG5ld2x5LXVwZGF0ZWQgcm9vdFByb3BlcnR5VmFsdWVDYWNoZSBpcyBjYWNoZWQgb250byB0aGUgZWxlbWVudCBzbyB0aGF0IGl0IGNhbiBiZSB1c2VkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3Igc3Vic2VxdWVudCBob29rcyBpbiB0aGlzIGNhbGwgdGhhdCBhcmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBzYW1lIHJvb3QgcHJvcGVydHkuIElmIHdlIGRpZG4ndCBjYWNoZSB0aGUgdXBkYXRlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFByb3BlcnR5VmFsdWUsIGVhY2ggc3Vic2VxdWVudCB1cGRhdGUgdG8gdGhlIHJvb3QgcHJvcGVydHkgaW4gdGhpcyB0aWNrIHBhc3Mgd291bGQgcmVzZXQgdGhlIHByZXZpb3VzIGhvb2snc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlcyB0byByb290UHJvcGVydHlWYWx1ZSBwcmlvciB0byBpbmplY3Rpb24uIEEgbmljZSBwZXJmb3JtYW5jZSBieXByb2R1Y3Qgb2Ygcm9vdFByb3BlcnR5VmFsdWUgY2FjaGluZyBpcyB0aGF0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzZXF1ZW50bHkgY2hhaW5lZCBhbmltYXRpb25zIHVzaW5nIHRoZSBzYW1lIGhvb2tSb290IGJ1dCBhIGRpZmZlcmVudCBob29rIGNhbiB1c2UgdGhpcyBjYWNoZWQgcm9vdFByb3BlcnR5VmFsdWUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQ1NTLkhvb2tzLnJlZ2lzdGVyZWRbcHJvcGVydHldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhvb2tSb290ID0gQ1NTLkhvb2tzLmdldFJvb3QocHJvcGVydHkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZUNhY2hlID0gRGF0YShlbGVtZW50KS5yb290UHJvcGVydHlWYWx1ZUNhY2hlW2hvb2tSb290XTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvb3RQcm9wZXJ0eVZhbHVlQ2FjaGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHdlZW4ucm9vdFByb3BlcnR5VmFsdWUgPSByb290UHJvcGVydHlWYWx1ZUNhY2hlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBET00gVXBkYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBzZXRQcm9wZXJ0eVZhbHVlKCkgcmV0dXJucyBhbiBhcnJheSBvZiB0aGUgcHJvcGVydHkgbmFtZSBhbmQgcHJvcGVydHkgdmFsdWUgcG9zdCBhbnkgbm9ybWFsaXphdGlvbiB0aGF0IG1heSBoYXZlIGJlZW4gcGVyZm9ybWVkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogVG8gc29sdmUgYW4gSUU8PTggcG9zaXRpb25pbmcgYnVnLCB0aGUgdW5pdCB0eXBlIGlzIGRyb3BwZWQgd2hlbiBzZXR0aW5nIGEgcHJvcGVydHkgdmFsdWUgb2YgMC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhZGp1c3RlZFNldERhdGEgPSBDU1Muc2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCAvKiBTRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0d2Vlbi5jdXJyZW50VmFsdWUgKyAocGFyc2VGbG9hdChjdXJyZW50VmFsdWUpID09PSAwID8gXCJcIiA6IHR3ZWVuLnVuaXRUeXBlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0d2Vlbi5yb290UHJvcGVydHlWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0d2Vlbi5zY3JvbGxEYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSG9va3M6IFBhcnQgSUlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogTm93IHRoYXQgd2UgaGF2ZSB0aGUgaG9vaydzIHVwZGF0ZWQgcm9vdFByb3BlcnR5VmFsdWUgKHRoZSBwb3N0LXByb2Nlc3NlZCB2YWx1ZSBwcm92aWRlZCBieSBhZGp1c3RlZFNldERhdGEpLCBjYWNoZSBpdCBvbnRvIHRoZSBlbGVtZW50LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKENTUy5Ib29rcy5yZWdpc3RlcmVkW3Byb3BlcnR5XSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFNpbmNlIGFkanVzdGVkU2V0RGF0YSBjb250YWlucyBub3JtYWxpemVkIGRhdGEgcmVhZHkgZm9yIERPTSB1cGRhdGluZywgdGhlIHJvb3RQcm9wZXJ0eVZhbHVlIG5lZWRzIHRvIGJlIHJlLWV4dHJhY3RlZCBmcm9tIGl0cyBub3JtYWxpemVkIGZvcm0uID8/ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKENTUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW2hvb2tSb290XSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhKGVsZW1lbnQpLnJvb3RQcm9wZXJ0eVZhbHVlQ2FjaGVbaG9va1Jvb3RdID0gQ1NTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbaG9va1Jvb3RdKFwiZXh0cmFjdFwiLCBudWxsLCBhZGp1c3RlZFNldERhdGFbMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGEoZWxlbWVudCkucm9vdFByb3BlcnR5VmFsdWVDYWNoZVtob29rUm9vdF0gPSBhZGp1c3RlZFNldERhdGFbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBGbGFnIHdoZXRoZXIgYSB0cmFuc2Zvcm0gcHJvcGVydHkgaXMgYmVpbmcgYW5pbWF0ZWQgc28gdGhhdCBmbHVzaFRyYW5zZm9ybUNhY2hlKCkgY2FuIGJlIHRyaWdnZXJlZCBvbmNlIHRoaXMgdGljayBwYXNzIGlzIGNvbXBsZXRlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkanVzdGVkU2V0RGF0YVswXSA9PT0gXCJ0cmFuc2Zvcm1cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybVByb3BlcnR5RXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlSEFcclxuICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBJZiBtb2JpbGVIQSBpcyBlbmFibGVkLCBzZXQgdGhlIHRyYW5zbGF0ZTNkIHRyYW5zZm9ybSB0byBudWxsIHRvIGZvcmNlIGhhcmR3YXJlIGFjY2VsZXJhdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICBJdCdzIHNhZmUgdG8gb3ZlcnJpZGUgdGhpcyBwcm9wZXJ0eSBzaW5jZSBWZWxvY2l0eSBkb2Vzbid0IGFjdHVhbGx5IHN1cHBvcnQgaXRzIGFuaW1hdGlvbiAoaG9va3MgYXJlIHVzZWQgaW4gaXRzIHBsYWNlKS4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5tb2JpbGVIQSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBEb24ndCBzZXQgdGhlIG51bGwgdHJhbnNmb3JtIGhhY2sgaWYgd2UndmUgYWxyZWFkeSBkb25lIHNvLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGF0YShlbGVtZW50KS50cmFuc2Zvcm1DYWNoZS50cmFuc2xhdGUzZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBBbGwgZW50cmllcyBvbiB0aGUgdHJhbnNmb3JtQ2FjaGUgb2JqZWN0IGFyZSBsYXRlciBjb25jYXRlbmF0ZWQgaW50byBhIHNpbmdsZSB0cmFuc2Zvcm0gc3RyaW5nIHZpYSBmbHVzaFRyYW5zZm9ybUNhY2hlKCkuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhKGVsZW1lbnQpLnRyYW5zZm9ybUNhY2hlLnRyYW5zbGF0ZTNkID0gXCIoMHB4LCAwcHgsIDBweClcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1Qcm9wZXJ0eUV4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2Zvcm1Qcm9wZXJ0eUV4aXN0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDU1MuZmx1c2hUcmFuc2Zvcm1DYWNoZShlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyogVGhlIG5vbi1cIm5vbmVcIiBkaXNwbGF5IHZhbHVlIGlzIG9ubHkgYXBwbGllZCB0byBhbiBlbGVtZW50IG9uY2UgLS0gd2hlbiBpdHMgYXNzb2NpYXRlZCBjYWxsIGlzIGZpcnN0IHRpY2tlZCB0aHJvdWdoLlxyXG4gICAgICAgICAgICAgICAgICAgQWNjb3JkaW5nbHksIGl0J3Mgc2V0IHRvIGZhbHNlIHNvIHRoYXQgaXQgaXNuJ3QgcmUtcHJvY2Vzc2VkIGJ5IHRoaXMgY2FsbCBpbiB0aGUgbmV4dCB0aWNrLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdHMuZGlzcGxheSAhPT0gdW5kZWZpbmVkICYmIG9wdHMuZGlzcGxheSAhPT0gXCJub25lXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS5TdGF0ZS5jYWxsc1tpXVsyXS5kaXNwbGF5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0cy52aXNpYmlsaXR5ICE9PSB1bmRlZmluZWQgJiYgb3B0cy52aXNpYmlsaXR5ICE9PSBcImhpZGRlblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkuU3RhdGUuY2FsbHNbaV1bMl0udmlzaWJpbGl0eSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBQYXNzIHRoZSBlbGVtZW50cyBhbmQgdGhlIHRpbWluZyBkYXRhIChwZXJjZW50Q29tcGxldGUsIG1zUmVtYWluaW5nLCBhbmQgdGltZVN0YXJ0KSBpbnRvIHRoZSBwcm9ncmVzcyBjYWxsYmFjay4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChvcHRzLnByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cy5wcm9ncmVzcy5jYWxsKGNhbGxDb250YWluZXJbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxDb250YWluZXJbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmNlbnRDb21wbGV0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoMCwgKHRpbWVTdGFydCArIG9wdHMuZHVyYXRpb24pIC0gdGltZUN1cnJlbnQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lU3RhcnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8qIElmIHRoaXMgY2FsbCBoYXMgZmluaXNoZWQgdHdlZW5pbmcsIHBhc3MgaXRzIGluZGV4IHRvIGNvbXBsZXRlQ2FsbCgpIHRvIGhhbmRsZSBjYWxsIGNsZWFudXAuICovXHJcbiAgICAgICAgICAgICAgICBpZiAocGVyY2VudENvbXBsZXRlID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGVDYWxsKGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBOb3RlOiBjb21wbGV0ZUNhbGwoKSBzZXRzIHRoZSBpc1RpY2tpbmcgZmxhZyB0byBmYWxzZSB3aGVuIHRoZSBsYXN0IGNhbGwgb24gVmVsb2NpdHkuU3RhdGUuY2FsbHMgaGFzIGNvbXBsZXRlZC4gKi9cclxuICAgICAgICBpZiAoVmVsb2NpdHkuU3RhdGUuaXNUaWNraW5nKSB7XHJcbiAgICAgICAgICAgIHRpY2tlcih0aWNrKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICBDYWxsIENvbXBsZXRpb25cclxuICAgICoqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgLyogTm90ZTogVW5saWtlIHRpY2soKSwgd2hpY2ggcHJvY2Vzc2VzIGFsbCBhY3RpdmUgY2FsbHMgYXQgb25jZSwgY2FsbCBjb21wbGV0aW9uIGlzIGhhbmRsZWQgb24gYSBwZXItY2FsbCBiYXNpcy4gKi9cclxuICAgIGZ1bmN0aW9uIGNvbXBsZXRlQ2FsbCAoY2FsbEluZGV4LCBpc1N0b3BwZWQpIHtcclxuICAgICAgICAvKiBFbnN1cmUgdGhlIGNhbGwgZXhpc3RzLiAqL1xyXG4gICAgICAgIGlmICghVmVsb2NpdHkuU3RhdGUuY2FsbHNbY2FsbEluZGV4XSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBQdWxsIHRoZSBtZXRhZGF0YSBmcm9tIHRoZSBjYWxsLiAqL1xyXG4gICAgICAgIHZhciBjYWxsID0gVmVsb2NpdHkuU3RhdGUuY2FsbHNbY2FsbEluZGV4XVswXSxcclxuICAgICAgICAgICAgZWxlbWVudHMgPSBWZWxvY2l0eS5TdGF0ZS5jYWxsc1tjYWxsSW5kZXhdWzFdLFxyXG4gICAgICAgICAgICBvcHRzID0gVmVsb2NpdHkuU3RhdGUuY2FsbHNbY2FsbEluZGV4XVsyXSxcclxuICAgICAgICAgICAgcmVzb2x2ZXIgPSBWZWxvY2l0eS5TdGF0ZS5jYWxsc1tjYWxsSW5kZXhdWzRdO1xyXG5cclxuICAgICAgICB2YXIgcmVtYWluaW5nQ2FsbHNFeGlzdCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgIEVsZW1lbnQgRmluYWxpemF0aW9uXHJcbiAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGNhbGxMZW5ndGggPSBjYWxsLmxlbmd0aDsgaSA8IGNhbGxMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGNhbGxbaV0uZWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgIC8qIElmIHRoZSB1c2VyIHNldCBkaXNwbGF5IHRvIFwibm9uZVwiIChpbnRlbmRpbmcgdG8gaGlkZSB0aGUgZWxlbWVudCksIHNldCBpdCBub3cgdGhhdCB0aGUgYW5pbWF0aW9uIGhhcyBjb21wbGV0ZWQuICovXHJcbiAgICAgICAgICAgIC8qIE5vdGU6IGRpc3BsYXk6bm9uZSBpc24ndCBzZXQgd2hlbiBjYWxscyBhcmUgbWFudWFsbHkgc3RvcHBlZCAodmlhIFZlbG9jaXR5KFwic3RvcFwiKS4gKi9cclxuICAgICAgICAgICAgLyogTm90ZTogRGlzcGxheSBnZXRzIGlnbm9yZWQgd2l0aCBcInJldmVyc2VcIiBjYWxscyBhbmQgaW5maW5pdGUgbG9vcHMsIHNpbmNlIHRoaXMgYmVoYXZpb3Igd291bGQgYmUgdW5kZXNpcmFibGUuICovXHJcbiAgICAgICAgICAgIGlmICghaXNTdG9wcGVkICYmICFvcHRzLmxvb3ApIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRzLmRpc3BsYXkgPT09IFwibm9uZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1NTLnNldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJkaXNwbGF5XCIsIG9wdHMuZGlzcGxheSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9wdHMudmlzaWJpbGl0eSA9PT0gXCJoaWRkZW5cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIENTUy5zZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwidmlzaWJpbGl0eVwiLCBvcHRzLnZpc2liaWxpdHkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBJZiB0aGUgZWxlbWVudCdzIHF1ZXVlIGlzIGVtcHR5IChpZiBvbmx5IHRoZSBcImlucHJvZ3Jlc3NcIiBpdGVtIGlzIGxlZnQgYXQgcG9zaXRpb24gMCkgb3IgaWYgaXRzIHF1ZXVlIGlzIGFib3V0IHRvIHJ1blxyXG4gICAgICAgICAgICAgICBhIG5vbi1WZWxvY2l0eS1pbml0aWF0ZWQgZW50cnksIHR1cm4gb2ZmIHRoZSBpc0FuaW1hdGluZyBmbGFnLiBBIG5vbi1WZWxvY2l0eS1pbml0aWF0aWVkIHF1ZXVlIGVudHJ5J3MgbG9naWMgbWlnaHQgYWx0ZXJcclxuICAgICAgICAgICAgICAgYW4gZWxlbWVudCdzIENTUyB2YWx1ZXMgYW5kIHRoZXJlYnkgY2F1c2UgVmVsb2NpdHkncyBjYWNoZWQgdmFsdWUgZGF0YSB0byBnbyBzdGFsZS4gVG8gZGV0ZWN0IGlmIGEgcXVldWUgZW50cnkgd2FzIGluaXRpYXRlZCBieSBWZWxvY2l0eSxcclxuICAgICAgICAgICAgICAgd2UgY2hlY2sgZm9yIHRoZSBleGlzdGVuY2Ugb2Ygb3VyIHNwZWNpYWwgVmVsb2NpdHkucXVldWVFbnRyeUZsYWcgZGVjbGFyYXRpb24sIHdoaWNoIG1pbmlmaWVycyB3b24ndCByZW5hbWUgc2luY2UgdGhlIGZsYWdcclxuICAgICAgICAgICAgICAgaXMgYXNzaWduZWQgdG8galF1ZXJ5J3MgZ2xvYmFsICQgb2JqZWN0IGFuZCB0aHVzIGV4aXN0cyBvdXQgb2YgVmVsb2NpdHkncyBvd24gc2NvcGUuICovXHJcbiAgICAgICAgICAgIGlmIChvcHRzLmxvb3AgIT09IHRydWUgJiYgKCQucXVldWUoZWxlbWVudClbMV0gPT09IHVuZGVmaW5lZCB8fCAhL1xcLnZlbG9jaXR5UXVldWVFbnRyeUZsYWcvaS50ZXN0KCQucXVldWUoZWxlbWVudClbMV0pKSkge1xyXG4gICAgICAgICAgICAgICAgLyogVGhlIGVsZW1lbnQgbWF5IGhhdmUgYmVlbiBkZWxldGVkLiBFbnN1cmUgdGhhdCBpdHMgZGF0YSBjYWNoZSBzdGlsbCBleGlzdHMgYmVmb3JlIGFjdGluZyBvbiBpdC4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChEYXRhKGVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgRGF0YShlbGVtZW50KS5pc0FuaW1hdGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIENsZWFyIHRoZSBlbGVtZW50J3Mgcm9vdFByb3BlcnR5VmFsdWVDYWNoZSwgd2hpY2ggd2lsbCBiZWNvbWUgc3RhbGUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgRGF0YShlbGVtZW50KS5yb290UHJvcGVydHlWYWx1ZUNhY2hlID0ge307XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2Zvcm1IQVByb3BlcnR5RXhpc3RzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgYW55IDNEIHRyYW5zZm9ybSBzdWJwcm9wZXJ0eSBpcyBhdCBpdHMgZGVmYXVsdCB2YWx1ZSAocmVnYXJkbGVzcyBvZiB1bml0IHR5cGUpLCByZW1vdmUgaXQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKENTUy5MaXN0cy50cmFuc2Zvcm1zM0QsIGZ1bmN0aW9uKGksIHRyYW5zZm9ybU5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRWYWx1ZSA9IC9ec2NhbGUvLnRlc3QodHJhbnNmb3JtTmFtZSkgPyAxIDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IERhdGEoZWxlbWVudCkudHJhbnNmb3JtQ2FjaGVbdHJhbnNmb3JtTmFtZV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGF0YShlbGVtZW50KS50cmFuc2Zvcm1DYWNoZVt0cmFuc2Zvcm1OYW1lXSAhPT0gdW5kZWZpbmVkICYmIG5ldyBSZWdFeHAoXCJeXFxcXChcIiArIGRlZmF1bHRWYWx1ZSArIFwiW14uXVwiKS50ZXN0KGN1cnJlbnRWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybUhBUHJvcGVydHlFeGlzdHMgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBEYXRhKGVsZW1lbnQpLnRyYW5zZm9ybUNhY2hlW3RyYW5zZm9ybU5hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIE1vYmlsZSBkZXZpY2VzIGhhdmUgaGFyZHdhcmUgYWNjZWxlcmF0aW9uIHJlbW92ZWQgYXQgdGhlIGVuZCBvZiB0aGUgYW5pbWF0aW9uIGluIG9yZGVyIHRvIGF2b2lkIGhvZ2dpbmcgdGhlIEdQVSdzIG1lbW9yeS4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5tb2JpbGVIQSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1IQVByb3BlcnR5RXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIERhdGEoZWxlbWVudCkudHJhbnNmb3JtQ2FjaGUudHJhbnNsYXRlM2Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBGbHVzaCB0aGUgc3VicHJvcGVydHkgcmVtb3ZhbHMgdG8gdGhlIERPTS4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNmb3JtSEFQcm9wZXJ0eUV4aXN0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDU1MuZmx1c2hUcmFuc2Zvcm1DYWNoZShlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIFJlbW92ZSB0aGUgXCJ2ZWxvY2l0eS1hbmltYXRpbmdcIiBpbmRpY2F0b3IgY2xhc3MuICovXHJcbiAgICAgICAgICAgICAgICAgICAgQ1NTLlZhbHVlcy5yZW1vdmVDbGFzcyhlbGVtZW50LCBcInZlbG9jaXR5LWFuaW1hdGluZ1wiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICBPcHRpb246IENvbXBsZXRlXHJcbiAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIC8qIENvbXBsZXRlIGlzIGZpcmVkIG9uY2UgcGVyIGNhbGwgKG5vdCBvbmNlIHBlciBlbGVtZW50KSBhbmQgaXMgcGFzc2VkIHRoZSBmdWxsIHJhdyBET00gZWxlbWVudCBzZXQgYXMgYm90aCBpdHMgY29udGV4dCBhbmQgaXRzIGZpcnN0IGFyZ3VtZW50LiAqL1xyXG4gICAgICAgICAgICAvKiBOb3RlOiBDYWxsYmFja3MgYXJlbid0IGZpcmVkIHdoZW4gY2FsbHMgYXJlIG1hbnVhbGx5IHN0b3BwZWQgKHZpYSBWZWxvY2l0eShcInN0b3BcIikuICovXHJcbiAgICAgICAgICAgIGlmICghaXNTdG9wcGVkICYmIG9wdHMuY29tcGxldGUgJiYgIW9wdHMubG9vcCAmJiAoaSA9PT0gY2FsbExlbmd0aCAtIDEpKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBXZSB0aHJvdyBjYWxsYmFja3MgaW4gYSBzZXRUaW1lb3V0IHNvIHRoYXQgdGhyb3duIGVycm9ycyBkb24ndCBoYWx0IHRoZSBleGVjdXRpb24gb2YgVmVsb2NpdHkgaXRzZWxmLiAqL1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRzLmNvbXBsZXRlLmNhbGwoZWxlbWVudHMsIGVsZW1lbnRzKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgdGhyb3cgZXJyb3I7IH0sIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICBQcm9taXNlIFJlc29sdmluZ1xyXG4gICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgLyogTm90ZTogSW5maW5pdGUgbG9vcHMgZG9uJ3QgcmV0dXJuIHByb21pc2VzLiAqL1xyXG4gICAgICAgICAgICBpZiAocmVzb2x2ZXIgJiYgb3B0cy5sb29wICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlcihlbGVtZW50cyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgIE9wdGlvbjogTG9vcCAoSW5maW5pdGUpXHJcbiAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICBpZiAob3B0cy5sb29wID09PSB0cnVlICYmICFpc1N0b3BwZWQpIHtcclxuICAgICAgICAgICAgICAgIC8qIElmIGEgcm90YXRlWC9ZL1ogcHJvcGVydHkgaXMgYmVpbmcgYW5pbWF0ZWQgdG8gMzYwIGRlZyB3aXRoIGxvb3A6dHJ1ZSwgc3dhcCB0d2VlbiBzdGFydC9lbmQgdmFsdWVzIHRvIGVuYWJsZVxyXG4gICAgICAgICAgICAgICAgICAgY29udGludW91cyBpdGVyYXRpdmUgcm90YXRpb24gbG9vcGluZy4gKE90aGVyaXNlLCB0aGUgZWxlbWVudCB3b3VsZCBqdXN0IHJvdGF0ZSBiYWNrIGFuZCBmb3J0aC4pICovXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goRGF0YShlbGVtZW50KS50d2VlbnNDb250YWluZXIsIGZ1bmN0aW9uKHByb3BlcnR5TmFtZSwgdHdlZW5Db250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoL15yb3RhdGUvLnRlc3QocHJvcGVydHlOYW1lKSAmJiBwYXJzZUZsb2F0KHR3ZWVuQ29udGFpbmVyLmVuZFZhbHVlKSA9PT0gMzYwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuQ29udGFpbmVyLmVuZFZhbHVlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHdlZW5Db250YWluZXIuc3RhcnRWYWx1ZSA9IDM2MDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBWZWxvY2l0eShlbGVtZW50LCBcInJldmVyc2VcIiwgeyBsb29wOiB0cnVlLCBkZWxheTogb3B0cy5kZWxheSB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICBEZXF1ZXVlaW5nXHJcbiAgICAgICAgICAgICoqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIC8qIEZpcmUgdGhlIG5leHQgY2FsbCBpbiB0aGUgcXVldWUgc28gbG9uZyBhcyB0aGlzIGNhbGwncyBxdWV1ZSB3YXNuJ3Qgc2V0IHRvIGZhbHNlICh0byB0cmlnZ2VyIGEgcGFyYWxsZWwgYW5pbWF0aW9uKSxcclxuICAgICAgICAgICAgICAgd2hpY2ggd291bGQgaGF2ZSBhbHJlYWR5IGNhdXNlZCB0aGUgbmV4dCBjYWxsIHRvIGZpcmUuIE5vdGU6IEV2ZW4gaWYgdGhlIGVuZCBvZiB0aGUgYW5pbWF0aW9uIHF1ZXVlIGhhcyBiZWVuIHJlYWNoZWQsXHJcbiAgICAgICAgICAgICAgICQuZGVxdWV1ZSgpIG11c3Qgc3RpbGwgYmUgY2FsbGVkIGluIG9yZGVyIHRvIGNvbXBsZXRlbHkgY2xlYXIgalF1ZXJ5J3MgYW5pbWF0aW9uIHF1ZXVlLiAqL1xyXG4gICAgICAgICAgICBpZiAob3B0cy5xdWV1ZSAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICQuZGVxdWV1ZShlbGVtZW50LCBvcHRzLnF1ZXVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgIENhbGxzIEFycmF5IENsZWFudXBcclxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIC8qIFNpbmNlIHRoaXMgY2FsbCBpcyBjb21wbGV0ZSwgc2V0IGl0IHRvIGZhbHNlIHNvIHRoYXQgdGhlIHJBRiB0aWNrIHNraXBzIGl0LiBUaGlzIGFycmF5IGlzIGxhdGVyIGNvbXBhY3RlZCB2aWEgY29tcGFjdFNwYXJzZUFycmF5KCkuXHJcbiAgICAgICAgICAoRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIHRoZSBjYWxsIGlzIHNldCB0byBmYWxzZSBpbnN0ZWFkIG9mIGJlaW5nIGRlbGV0ZWQgZnJvbSB0aGUgYXJyYXk6IGh0dHA6Ly93d3cuaHRtbDVyb2Nrcy5jb20vZW4vdHV0b3JpYWxzL3NwZWVkL3Y4LykgKi9cclxuICAgICAgICBWZWxvY2l0eS5TdGF0ZS5jYWxsc1tjYWxsSW5kZXhdID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8qIEl0ZXJhdGUgdGhyb3VnaCB0aGUgY2FsbHMgYXJyYXkgdG8gZGV0ZXJtaW5lIGlmIHRoaXMgd2FzIHRoZSBmaW5hbCBpbi1wcm9ncmVzcyBhbmltYXRpb24uXHJcbiAgICAgICAgICAgSWYgc28sIHNldCBhIGZsYWcgdG8gZW5kIHRpY2tpbmcgYW5kIGNsZWFyIHRoZSBjYWxscyBhcnJheS4gKi9cclxuICAgICAgICBmb3IgKHZhciBqID0gMCwgY2FsbHNMZW5ndGggPSBWZWxvY2l0eS5TdGF0ZS5jYWxscy5sZW5ndGg7IGogPCBjYWxsc0xlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIGlmIChWZWxvY2l0eS5TdGF0ZS5jYWxsc1tqXSAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHJlbWFpbmluZ0NhbGxzRXhpc3QgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocmVtYWluaW5nQ2FsbHNFeGlzdCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgLyogdGljaygpIHdpbGwgZGV0ZWN0IHRoaXMgZmxhZyB1cG9uIGl0cyBuZXh0IGl0ZXJhdGlvbiBhbmQgc3Vic2VxdWVudGx5IHR1cm4gaXRzZWxmIG9mZi4gKi9cclxuICAgICAgICAgICAgVmVsb2NpdHkuU3RhdGUuaXNUaWNraW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvKiBDbGVhciB0aGUgY2FsbHMgYXJyYXkgc28gdGhhdCBpdHMgbGVuZ3RoIGlzIHJlc2V0LiAqL1xyXG4gICAgICAgICAgICBkZWxldGUgVmVsb2NpdHkuU3RhdGUuY2FsbHM7XHJcbiAgICAgICAgICAgIFZlbG9jaXR5LlN0YXRlLmNhbGxzID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKioqKioqKioqKioqKioqKipcclxuICAgICAgICBGcmFtZXdvcmtzXHJcbiAgICAqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgLyogQm90aCBqUXVlcnkgYW5kIFplcHRvIGFsbG93IHRoZWlyICQuZm4gb2JqZWN0IHRvIGJlIGV4dGVuZGVkIHRvIGFsbG93IHdyYXBwZWQgZWxlbWVudHMgdG8gYmUgc3ViamVjdGVkIHRvIHBsdWdpbiBjYWxscy5cclxuICAgICAgIElmIGVpdGhlciBmcmFtZXdvcmsgaXMgbG9hZGVkLCByZWdpc3RlciBhIFwidmVsb2NpdHlcIiBleHRlbnNpb24gcG9pbnRpbmcgdG8gVmVsb2NpdHkncyBjb3JlIGFuaW1hdGUoKSBtZXRob2QuICBWZWxvY2l0eVxyXG4gICAgICAgYWxzbyByZWdpc3RlcnMgaXRzZWxmIG9udG8gYSBnbG9iYWwgY29udGFpbmVyICh3aW5kb3cualF1ZXJ5IHx8IHdpbmRvdy5aZXB0byB8fCB3aW5kb3cpIHNvIHRoYXQgY2VydGFpbiBmZWF0dXJlcyBhcmVcclxuICAgICAgIGFjY2Vzc2libGUgYmV5b25kIGp1c3QgYSBwZXItZWxlbWVudCBzY29wZS4gVGhpcyBtYXN0ZXIgb2JqZWN0IGNvbnRhaW5zIGFuIC5hbmltYXRlKCkgbWV0aG9kLCB3aGljaCBpcyBsYXRlciBhc3NpZ25lZCB0byAkLmZuXHJcbiAgICAgICAoaWYgalF1ZXJ5IG9yIFplcHRvIGFyZSBwcmVzZW50KS4gQWNjb3JkaW5nbHksIFZlbG9jaXR5IGNhbiBib3RoIGFjdCBvbiB3cmFwcGVkIERPTSBlbGVtZW50cyBhbmQgc3RhbmQgYWxvbmUgZm9yIHRhcmdldGluZyByYXcgRE9NIGVsZW1lbnRzLiAqL1xyXG4gICAgZ2xvYmFsLlZlbG9jaXR5ID0gVmVsb2NpdHk7XHJcblxyXG4gICAgaWYgKGdsb2JhbCAhPT0gd2luZG93KSB7XHJcbiAgICAgICAgLyogQXNzaWduIHRoZSBlbGVtZW50IGZ1bmN0aW9uIHRvIFZlbG9jaXR5J3MgY29yZSBhbmltYXRlKCkgbWV0aG9kLiAqL1xyXG4gICAgICAgIGdsb2JhbC5mbi52ZWxvY2l0eSA9IGFuaW1hdGU7XHJcbiAgICAgICAgLyogQXNzaWduIHRoZSBvYmplY3QgZnVuY3Rpb24ncyBkZWZhdWx0cyB0byBWZWxvY2l0eSdzIGdsb2JhbCBkZWZhdWx0cyBvYmplY3QuICovXHJcbiAgICAgICAgZ2xvYmFsLmZuLnZlbG9jaXR5LmRlZmF1bHRzID0gVmVsb2NpdHkuZGVmYXVsdHM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICBQYWNrYWdlZCBSZWRpcmVjdHNcclxuICAgICoqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgIC8qIHNsaWRlVXAsIHNsaWRlRG93biAqL1xyXG4gICAgJC5lYWNoKFsgXCJEb3duXCIsIFwiVXBcIiBdLCBmdW5jdGlvbihpLCBkaXJlY3Rpb24pIHtcclxuICAgICAgICBWZWxvY2l0eS5SZWRpcmVjdHNbXCJzbGlkZVwiICsgZGlyZWN0aW9uXSA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zLCBlbGVtZW50c0luZGV4LCBlbGVtZW50c1NpemUsIGVsZW1lbnRzLCBwcm9taXNlRGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHt9LCBvcHRpb25zKSxcclxuICAgICAgICAgICAgICAgIGJlZ2luID0gb3B0cy5iZWdpbixcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlID0gb3B0cy5jb21wbGV0ZSxcclxuICAgICAgICAgICAgICAgIGNvbXB1dGVkVmFsdWVzID0geyBoZWlnaHQ6IFwiXCIsIG1hcmdpblRvcDogXCJcIiwgbWFyZ2luQm90dG9tOiBcIlwiLCBwYWRkaW5nVG9wOiBcIlwiLCBwYWRkaW5nQm90dG9tOiBcIlwiIH0sXHJcbiAgICAgICAgICAgICAgICBpbmxpbmVWYWx1ZXMgPSB7fTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRzLmRpc3BsYXkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgLyogU2hvdyB0aGUgZWxlbWVudCBiZWZvcmUgc2xpZGVEb3duIGJlZ2lucyBhbmQgaGlkZSB0aGUgZWxlbWVudCBhZnRlciBzbGlkZVVwIGNvbXBsZXRlcy4gKi9cclxuICAgICAgICAgICAgICAgIC8qIE5vdGU6IElubGluZSBlbGVtZW50cyBjYW5ub3QgaGF2ZSBkaW1lbnNpb25zIGFuaW1hdGVkLCBzbyB0aGV5J3JlIHJldmVydGVkIHRvIGlubGluZS1ibG9jay4gKi9cclxuICAgICAgICAgICAgICAgIG9wdHMuZGlzcGxheSA9IChkaXJlY3Rpb24gPT09IFwiRG93blwiID8gKFZlbG9jaXR5LkNTUy5WYWx1ZXMuZ2V0RGlzcGxheVR5cGUoZWxlbWVudCkgPT09IFwiaW5saW5lXCIgPyBcImlubGluZS1ibG9ja1wiIDogXCJibG9ja1wiKSA6IFwibm9uZVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgb3B0cy5iZWdpbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgLyogSWYgdGhlIHVzZXIgcGFzc2VkIGluIGEgYmVnaW4gY2FsbGJhY2ssIGZpcmUgaXQgbm93LiAqL1xyXG4gICAgICAgICAgICAgICAgYmVnaW4gJiYgYmVnaW4uY2FsbChlbGVtZW50cywgZWxlbWVudHMpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIENhY2hlIHRoZSBlbGVtZW50cycgb3JpZ2luYWwgdmVydGljYWwgZGltZW5zaW9uYWwgcHJvcGVydHkgdmFsdWVzIHNvIHRoYXQgd2UgY2FuIGFuaW1hdGUgYmFjayB0byB0aGVtLiAqL1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gY29tcHV0ZWRWYWx1ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBDYWNoZSBhbGwgaW5saW5lIHZhbHVlcywgd2UgcmVzZXQgdG8gdXBvbiBhbmltYXRpb24gY29tcGxldGlvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpbmxpbmVWYWx1ZXNbcHJvcGVydHldID0gZWxlbWVudC5zdHlsZVtwcm9wZXJ0eV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIEZvciBzbGlkZURvd24sIHVzZSBmb3JjZWZlZWRpbmcgdG8gYW5pbWF0ZSBhbGwgdmVydGljYWwgcHJvcGVydGllcyBmcm9tIDAuIEZvciBzbGlkZVVwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgIHVzZSBmb3JjZWZlZWRpbmcgdG8gc3RhcnQgZnJvbSBjb21wdXRlZCB2YWx1ZXMgYW5kIGFuaW1hdGUgZG93biB0byAwLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9wZXJ0eVZhbHVlID0gVmVsb2NpdHkuQ1NTLmdldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgcHJvcGVydHkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkVmFsdWVzW3Byb3BlcnR5XSA9IChkaXJlY3Rpb24gPT09IFwiRG93blwiKSA/IFsgcHJvcGVydHlWYWx1ZSwgMCBdIDogWyAwLCBwcm9wZXJ0eVZhbHVlIF07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyogRm9yY2UgdmVydGljYWwgb3ZlcmZsb3cgY29udGVudCB0byBjbGlwIHNvIHRoYXQgc2xpZGluZyB3b3JrcyBhcyBleHBlY3RlZC4gKi9cclxuICAgICAgICAgICAgICAgIGlubGluZVZhbHVlcy5vdmVyZmxvdyA9IGVsZW1lbnQuc3R5bGUub3ZlcmZsb3c7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgb3B0cy5jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgLyogUmVzZXQgZWxlbWVudCB0byBpdHMgcHJlLXNsaWRlIGlubGluZSB2YWx1ZXMgb25jZSBpdHMgc2xpZGUgYW5pbWF0aW9uIGlzIGNvbXBsZXRlLiAqL1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gaW5saW5lVmFsdWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZVtwcm9wZXJ0eV0gPSBpbmxpbmVWYWx1ZXNbcHJvcGVydHldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8qIElmIHRoZSB1c2VyIHBhc3NlZCBpbiBhIGNvbXBsZXRlIGNhbGxiYWNrLCBmaXJlIGl0IG5vdy4gKi9cclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlICYmIGNvbXBsZXRlLmNhbGwoZWxlbWVudHMsIGVsZW1lbnRzKTtcclxuICAgICAgICAgICAgICAgIHByb21pc2VEYXRhICYmIHByb21pc2VEYXRhLnJlc29sdmVyKGVsZW1lbnRzKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIFZlbG9jaXR5KGVsZW1lbnQsIGNvbXB1dGVkVmFsdWVzLCBvcHRzKTtcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyogZmFkZUluLCBmYWRlT3V0ICovXHJcbiAgICAkLmVhY2goWyBcIkluXCIsIFwiT3V0XCIgXSwgZnVuY3Rpb24oaSwgZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgVmVsb2NpdHkuUmVkaXJlY3RzW1wiZmFkZVwiICsgZGlyZWN0aW9uXSA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zLCBlbGVtZW50c0luZGV4LCBlbGVtZW50c1NpemUsIGVsZW1lbnRzLCBwcm9taXNlRGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHt9LCBvcHRpb25zKSxcclxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXNNYXAgPSB7IG9wYWNpdHk6IChkaXJlY3Rpb24gPT09IFwiSW5cIikgPyAxIDogMCB9LFxyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxDb21wbGV0ZSA9IG9wdHMuY29tcGxldGU7XHJcblxyXG4gICAgICAgICAgICAvKiBTaW5jZSByZWRpcmVjdHMgYXJlIHRyaWdnZXJlZCBpbmRpdmlkdWFsbHkgZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgYW5pbWF0ZWQgc2V0LCBhdm9pZCByZXBlYXRlZGx5IHRyaWdnZXJpbmdcclxuICAgICAgICAgICAgICAgY2FsbGJhY2tzIGJ5IGZpcmluZyB0aGVtIG9ubHkgd2hlbiB0aGUgZmluYWwgZWxlbWVudCBoYXMgYmVlbiByZWFjaGVkLiAqL1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudHNJbmRleCAhPT0gZWxlbWVudHNTaXplIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgb3B0cy5jb21wbGV0ZSA9IG9wdHMuYmVnaW4gPSBudWxsO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb3B0cy5jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbENvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsQ29tcGxldGUuY2FsbChlbGVtZW50cywgZWxlbWVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZURhdGEgJiYgcHJvbWlzZURhdGEucmVzb2x2ZXIoZWxlbWVudHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBJZiBhIGRpc3BsYXkgd2FzIHBhc3NlZCBpbiwgdXNlIGl0LiBPdGhlcndpc2UsIGRlZmF1bHQgdG8gXCJub25lXCIgZm9yIGZhZGVPdXQgb3IgdGhlIGVsZW1lbnQtc3BlY2lmaWMgZGVmYXVsdCBmb3IgZmFkZUluLiAqL1xyXG4gICAgICAgICAgICAvKiBOb3RlOiBXZSBhbGxvdyB1c2VycyB0byBwYXNzIGluIFwibnVsbFwiIHRvIHNraXAgZGlzcGxheSBzZXR0aW5nIGFsdG9nZXRoZXIuICovXHJcbiAgICAgICAgICAgIGlmIChvcHRzLmRpc3BsYXkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgb3B0cy5kaXNwbGF5ID0gKGRpcmVjdGlvbiA9PT0gXCJJblwiID8gXCJhdXRvXCIgOiBcIm5vbmVcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMsIHByb3BlcnRpZXNNYXAsIG9wdHMpO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gVmVsb2NpdHk7XHJcbn0oKHdpbmRvdy5qUXVlcnkgfHwgd2luZG93LlplcHRvIHx8IHdpbmRvdyksIHdpbmRvdywgZG9jdW1lbnQpO1xyXG59KSk7XHJcblxyXG4vKioqKioqKioqKioqKioqKioqXHJcbiAgIEtub3duIElzc3Vlc1xyXG4qKioqKioqKioqKioqKioqKiovXHJcblxyXG4vKiBUaGUgQ1NTIHNwZWMgbWFuZGF0ZXMgdGhhdCB0aGUgdHJhbnNsYXRlWC9ZL1ogdHJhbnNmb3JtcyBhcmUgJS1yZWxhdGl2ZSB0byB0aGUgZWxlbWVudCBpdHNlbGYgLS0gbm90IGl0cyBwYXJlbnQuXHJcblZlbG9jaXR5LCBob3dldmVyLCBkb2Vzbid0IG1ha2UgdGhpcyBkaXN0aW5jdGlvbi4gVGh1cywgY29udmVydGluZyB0byBvciBmcm9tIHRoZSAlIHVuaXQgd2l0aCB0aGVzZSBzdWJwcm9wZXJ0aWVzXHJcbndpbGwgcHJvZHVjZSBhbiBpbmFjY3VyYXRlIGNvbnZlcnNpb24gdmFsdWUuIFRoZSBzYW1lIGlzc3VlIGV4aXN0cyB3aXRoIHRoZSBjeC9jeSBhdHRyaWJ1dGVzIG9mIFNWRyBjaXJjbGVzIGFuZCBlbGxpcHNlcy4gKi9cclxuIl19
